/*! Copyright (c) 2023 WhatsApp Inc. All Rights Reserved. */
(self.webpackChunkwhatsapp_web_client=self.webpackChunkwhatsapp_web_client||[]).push([[1761],{589332:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toArray=function(e){if(null==e)return[];if(Array.isArray(e))return[...e];return[e]}},31761:(e,t,r)=>{"use strict";var n=r(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(r(348926)),a=n(r(81109)),o=n(r(288306)),u=r(72696),i=n(r(873969)),c=r(919175),d=r(778945),s=r(542358),f=r(713464),p=L(r(27578)),m=r(900316),y=r(486392),g=r(114850),v=n(r(930440)),b=r(411597),h=r(25968),M=r(699411),S=r(100149),O=r(973176),P=r(238977),_=r(706197),E=r(886066),w=r(665195),C=n(r(454903)),I=r(832545),j=r(392632),k=r(459857),x=n(r(844453)),D=L(r(667294)),T=n(r(829686)),A=n(r(637660)),R=n(r(895851));function W(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(W=function(e){return e?r:t})(e)}function L(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=W(t);if(r&&r.has(e))return r.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=l?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}const F=r(76672).Mirrored(["CATALOG_PRODUCTS_FORM","CUSTOM_ITEM_FORM","ORDER_SUMMARY","ADDITIONAL_CHARGES_FORM"]),N=Array.from(F.members()),B=(0,o.default)((()=>p.currencyForCountryShortcode((0,y.getCountryShortcodeByPhone)((0,k.getMeUser)().user))));function q(e,t){var r,n;let{entryPoint:o,order:p,chat:y,onBack:W,onSend:L,onCancel:q,onDeclineOrder:U}=e;const z=(0,R.default)(),[G,H]=(0,D.useState)(F.ORDER_SUMMARY),[Y,Q]=(0,D.useState)(null),[V,K]=(0,D.useState)(!1),[X,$]=(0,D.useState)((()=>function(e){if(!e)return[];const t={isCustomItem:!1,isQuantitySet:!0},r=e.products.map((e=>new C.default((0,a.default)((0,a.default)({},t),e))));return(0,w.notifyIfAnyProductMissesPrice)(r,{}),r}(p))),[J,Z]=(0,D.useState)({}),[ee,te]=(0,D.useState)(null),re=(0,A.default)((()=>new v.default([],(e=>e.id.toString())))).current,ne=f.CatalogCollection.get((0,k.getMeUser)()),le=(e,t)=>{Z((r=>(0,a.default)((0,a.default)({},r),{},{[t]:e})))},ae=(0,D.useMemo)((()=>X.reduce(((e,t)=>{var r,n;return e+(null!==(r=null!==(n=t.price)&&void 0!==n?n:J[t.id])&&void 0!==r?r:0)*t.quantity}),0)),[X,J]),oe=(0,P.calculateFlatAmounts)({orderSubtotal:ae/P.DEFAULT_OFFSET,discountType:(null==ee?void 0:ee.discountType)||"",discountText:(null==ee?void 0:ee.discountText)||"",taxType:(null==ee?void 0:ee.taxType)||"",taxText:(null==ee?void 0:ee.taxText)||"",shippingText:(null==ee?void 0:ee.shippingText)||""}),ue=(0,s.hasCatalog)(d.BusinessProfileCollection.get((0,k.getMaybeMeUser)())),ie=B(),ce=(0,u.getOrdersExpansionAllowedCurrencies)(y.contact.id.user),de=null!==(r=null===(n=X.at(0))||void 0===n?void 0:n.currency)&&void 0!==r?r:ie,se=()=>{const e=X.some((e=>J[e.id]));null!=o&&(0,E.createSendOrderDetailsWamEvent)(y,o,X,oe,ue,e).commit();const t=null!=p?p:M.OrderCollection.addOrder();t.products=X.map((e=>{var t,r;return e.price=null!==(t=e.price)&&void 0!==t?t:J[e.id],e.currency=null!==(r=e.currency)&&void 0!==r?r:ie,e})),t.currency=de,t.subtotal=ae,t.triggerItemCollectionUpdate(),(0,c.sendOrderDetailsMessageAsMerchant)({order:t,chat:y,orderNote:"",offset:P.DEFAULT_OFFSET,total:oe.total,discount:oe.discount,shipping:oe.shipping,tax:oe.tax}),null==L||L(),m.DrawerManager.closeDrawerRight()},fe=(0,T.default)((()=>{W?W():(m.DrawerManager.closeDrawerRight(),null==q||q())})),pe=()=>{!function(e,t,r){return e?t.length!==e.products.length||t.some(((t,n)=>{var l,a;return t.id!==e.products[n].id||t.quantity!==e.products[n].quantity||(null!==(l=null!==(a=t.price)&&void 0!==a?a:r[t.id])&&void 0!==l?l:null)!==e.products[n].price})):t.length>0}(p,X,J)?fe():g.ModalManager.open(D.default.createElement(S.ConfirmDiscardModal,{onOK:fe}))},me=e=>{z.aborted||(!0!==e&&(0,w.notifyIfAnyProductMissesPrice)(X,J),H(F.ORDER_SUMMARY))},ye=()=>{H(F.CATALOG_PRODUCTS_FORM)},ge=(e,t)=>{const r=Number.isInteger(e)?e:null;Q(r),K(!0===t),H(null==r||X[r].isCustomItem?F.CUSTOM_ITEM_FORM:F.CATALOG_PRODUCTS_FORM)},ve=()=>{H(F.ADDITIONAL_CHARGES_FORM)},be=(e,t)=>{const r=e.length,n=e.reduce(((e,t,r)=>e.set(t.id,r)),new Map);return[...t].sort(((e,t)=>{var l,a;return(null!==(l=n.get(e.id))&&void 0!==l?l:r)-(null!==(a=n.get(t.id))&&void 0!==a?a:r)}))},he=e=>e.map((e=>{var t;return new C.default({id:e.id,name:e.name,price:e.priceAmount1000,thumbnailUrl:null===(t=e.getPreviewImage())||void 0===t?void 0:t.mediaUrl,quantity:Number(re.getVal(e)),isCustomItem:!1,isQuantitySet:!0})})),Me=(e,t,r)=>{const n=null==ne?void 0:ne.productCollection.getProductModels(),l=new Set(t.map((e=>{let{id:t}=e;return t}))),a=new Set(null==n?void 0:n.map((e=>{let{id:t}=e;return t})));return r.reduce(((e,t)=>{const r=l.has(t.id),n=a.has(t.id);return r||n?e:e.concat(t)}),e)},Se=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];ue&&$((t=>{const r=re.getSelected(),n=he(r),l=Me(n,r,t);return e&&(0,w.notifyIfAnyProductMissesPrice)(l,J),be(t,l)}))},Oe=e=>re.getSelected().find((t=>{let{id:r}=t;return r===e.id})),Pe=(e,t)=>{re.setVal(e,t)},_e=e=>{if(!X[e].isCustomItem){const t=Oe(X[e]);t&&Pe(t,0)}$((t=>[...t.slice(0,e),...t.slice(e+1)]))},Ee=(e,t)=>{if(X[e].isCustomItem)((e,t)=>{t?$((r=>{const n=[...r];return n[e].quantity=t,n[e].isQuantitySet=!0,n})):_e(e)})(e,t);else{const r=Oe(X[e]);r&&Pe(r,t),Se(!1)}},we=function(){var e=(0,l.default)((function*(e){var t;let r,n=null==ne?void 0:ne.productCollection.getProductModels(),l=(null===(t=n)||void 0===t?void 0:t.length)||0,a=0;for(;(!r||!re.isSelected(r))&&a<l;){var o,u;yield f.CatalogCollection.update((0,k.getMaybeMeUser)()),a=l,n=null==ne?void 0:ne.productCollection.getProductModels(),r=null===(o=n)||void 0===o?void 0:o.find((t=>t.id===e.id)),r&&Pe(r,e.quantity),l=null===(u=n)||void 0===u?void 0:u.length}}));return function(){return e.apply(this,arguments)}}();(0,D.useEffect)((()=>((()=>{if(!p)return[];const e=null==ne?void 0:ne.productCollection.getProductModels();for(const t of p.products){const r=null==e?void 0:e.find((e=>e.id===t.id));r?Pe(r,t.quantity):we(t)}})(),()=>{})),[]);const Ce=N.indexOf(G);return G?D.default.createElement(x.default,{ref:t},D.default.createElement(j.UIE,{displayName:`FlowDrawer${Ce}`,key:Ce,escapable:!0},D.default.createElement("div",null,(e=>{switch(e){case F.CATALOG_PRODUCTS_FORM:return D.default.createElement(h.OrderCatalogFormDrawer,{currency:ie,productsSelection:re,orderItems:X,priceMap:J,onBack:me,onAddProducts:()=>{Se(),me(!0)},onAddCustomItem:()=>{ge(null,!0)},onProductSelectionChange:Pe});case F.CUSTOM_ITEM_FORM:return D.default.createElement(O.CustomItemFormDrawer,{currency:de,eligibleCurrencies:0===X.length&&0===re.getSelected().length?ce:[],onBack:V?ye:me,onSaveCustomItem:e=>{Se(),(e=>{let{name:t,priceAmount1000:r,quantity:n,isQuantitySet:l,currency:a}=e;const o=`${(0,_.getCustomItemIdPrefix)()}-${(0,i.default)()}`;$((e=>be(e,[...e,new C.default({id:o,name:t,price:r,quantity:null!=n?n:1,isCustomItem:!0,isQuantitySet:l,currency:a})])))})(e),me()},customItem:X[Number.isInteger(Y)?Number(Y):-1]});case F.ORDER_SUMMARY:return D.default.createElement(I.OrderSummaryDrawer,{chat:y,currency:de,priceMap:J,orderItems:X,orderSubtotal:ae,additionalCharges:ee,flatAmounts:oe,onPriceChange:le,onBack:pe,onSubmit:se,onAddItem:ue&&(0,u.orderDetailsFromCatalogEnabled)()?ye:ge,onAdditionalCharges:ve,onDeleteItem:_e,onItemQuantityChange:Ee,entryPoint:o,onDeclineOrder:U});case F.ADDITIONAL_CHARGES_FORM:return D.default.createElement(b.AdditionalChargesFormDrawer,{currency:de,additionalCharges:ee,subtotal:ae,onBack:me,onApply:e=>{te((t=>(0,a.default)((0,a.default)({},t),e))),me()}})}})(G)))):null}var U=(0,D.forwardRef)(q);t.default=U},702895:(e,t,r)=>{"use strict";var n=r(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return i.default.createElement(l.ConfirmPopup,{testid:"order-expansion-different-order-currency-title",title:u.fbt._("Orders can't have items with different currencies",null,{hk:"19WokI"}),onOK:()=>{a.ModalManager.close()}},i.default.createElement(o.WDSTextSectionTitle,{testid:"order-expansion-different-order-currency-description"},u.fbt._("Make sure all items in your order have the same currency.",null,{hk:"213L8w"})))};var l=r(103440),a=r(114850),o=r(180519),u=r(548360),i=n(r(667294))},411597:(e,t,r)=>{"use strict";var n=r(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.AdditionalChargesFormDrawer=function(e){let{currency:t,subtotal:r,additionalCharges:n,onBack:f,onApply:h}=e;const O=(null==n?void 0:n.discountText)||"",[P,_]=(0,v.useState)(O),E=(null==n?void 0:n.taxText)||"",[w,C]=(0,v.useState)(E),I=(null==n?void 0:n.shippingText)||"",[j,k]=(0,v.useState)(I),x=(null==n?void 0:n.discountType)||M,[D,T]=(0,v.useState)(x),A=(null==n?void 0:n.taxType)||S,[R,W]=(0,v.useState)(A),[L,F]=(0,v.useState)(!1),[N,B]=(0,v.useState)(!1),q=(0,v.useMemo)((()=>(0,s.additionalChargeErrorHandler)({currency:t,value:j})),[t,j]),U=[L,N,q].some((e=>e));return v.default.createElement(a.default,null,v.default.createElement(o.DrawerHeader,{title:g.fbt._("Add discount, shipping or tax",null,{hk:"nPDUK"}),type:o.DRAWER_HEADER_TYPE.SMALL,onBack:O!==P||E!==w||I!==j||x!==D||A!==R?()=>{i.ModalManager.open(v.default.createElement(d.ConfirmDiscardModal,{onOK:f}))}:f,focusBackOrCancel:!0}),v.default.createElement(u.default,{className:(0,b.default)(y.uiPadding.all16)},v.default.createElement(c.AdditionalChargesTextInput,{text:P,testid:"additional-charges-discount-input",label:g.fbt._("Discount",null,{hk:"3acZrp"}),symbol:D,currency:t,priceValue:r,setText:_,setError:F,setSymbol:T}),v.default.createElement(m.RichTextField,{value:j,testid:"additional-charges-shipping-input",placeholder:g.fbt._("Shipping ({currency_symbol})",[g.fbt._param("currency_symbol",(0,l.formatAmount1000ToParts)(t,0).symbol)],{hk:"H2WDY"}),onChange:e=>k(e.text),theme:"small",maxLength:10,customStyleThemes:["desaturated"],error:q}),v.default.createElement(c.AdditionalChargesTextInput,{text:w,testid:"additional-charges-tax-input",label:g.fbt._("Tax",null,{hk:"2r5wzT"}),symbol:R,currency:t,priceValue:r,setText:C,setError:B,setSymbol:W}),v.default.createElement(p.OrderApplyChangesButton,{disabled:U,testid:"apply-additional-costs-button",title:g.fbt._("Apply",null,{hk:"3E5Tq7"}),onClick:()=>h({discountText:P,taxText:w,shippingText:j,discountType:D,taxType:R})})))};var l=r(27578),a=n(r(908081)),o=r(626194),u=n(r(969358)),i=r(114850),c=r(633571),d=r(100149),s=r(353950),f=r(238977),p=r(208160),m=r(202391),y=r(676345),g=r(548360),v=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=l?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(667294)),b=n(r(156720));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}const M=f.PERCENTAGE_SYMBOL,S=f.PERCENTAGE_SYMBOL},633571:(e,t,r)=>{"use strict";var n=r(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.AdditionalChargesTextInput=function(e){let{text:t,label:r,symbol:n,testid:s,currency:m,priceValue:y,setText:g,setError:v,setSymbol:b}=e;const h=(0,c.useMemo)((()=>{const e=(0,a.additionalChargeErrorHandler)({label:r,currency:m,fieldType:n,maxFlatValue:y/o.DEFAULT_OFFSET,enablePercentValueCheck:!0,value:t});return v(Boolean(e)),e}),[t,r,n,m,v,y]);return c.default.createElement("div",{className:(0,d.default)(f)},c.default.createElement(u.RichTextField,{value:t,testid:s,placeholder:i.fbt._("{input_label} ({currency_or_percentage})",[i.fbt._param("input_label",r),i.fbt._param("currency_or_percentage",n)],{hk:"vf1Ko"}),onChange:e=>g(e.text),theme:"small",maxLength:10,customStyleThemes:["desaturated"],error:h}),c.default.createElement("div",{className:(0,d.default)(p)},c.default.createElement(l.OrderDetailAmountTypeSelector,{currency:m,value:n,onChange:e=>{let{value:t}=e;return b(t)}})))};var l=r(660516),a=r(353950),o=r(238977),u=r(202391),i=r(548360),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=l?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(667294)),d=n(r(156720));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}const f={position:"g0rxnol2"},p={position:"lhggkp7q",end:"ebjesfe0",zIndex:"mb8var44",top:"agjvi7sf"}},25968:(e,t,r)=>{"use strict";var n=r(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.OrderCatalogFormDrawer=function(e){let{currency:t,productsSelection:r,orderItems:n,priceMap:_,onBack:w,onAddProducts:C,onAddCustomItem:I,onProductSelectionChange:j}=e;const[k,x]=(0,M.useState)(!1),D=(0,O.default)(),T=(0,P.default)((()=>new d.default)),A=r.getSelected().reduce(((e,t)=>{var n,l;return e+(null!==(n=null!==(l=t.priceAmount1000)&&void 0!==l?l:_[t.id.toString()])&&void 0!==n?n:0)*Number(r.getVal(t))}),0),R=n.filter((e=>e.isCustomItem)).reduce(((e,t)=>e+t.price*t.quantity),0);return M.default.createElement(o.default,null,M.default.createElement(i.DrawerHeader,{title:h.fbt._("Add items",null,{hk:"2U1Vru"}),type:i.DRAWER_HEADER_TYPE.SMALL,onBack:k?()=>{s.ModalManager.open(M.default.createElement(m.ConfirmDiscardModal,{onOK:w}))}:w,focusBackOrCancel:!0}),M.default.createElement(u.default,null,M.default.createElement(c.default,{theme:"expand-height",xstyle:E.drawerSection},(0,l.orderDetailsCustomItemEnabled)()&&M.default.createElement(M.default.Fragment,null,M.default.createElement(f.AddOrderItem,{title:h.fbt._("Create new item",null,{hk:"2GmSAs"}),onClick:I}),M.default.createElement("hr",{className:(0,S.default)(E.catalogBar,b.uiMargin.vert0)})),M.default.createElement("p",{className:(0,S.default)(E.catalogTitleText,b.uiPadding.start16,b.uiPadding.vert10)},h.fbt._("Catalog items",null,{hk:"4chzUe"})),M.default.createElement(p.default,{className:(0,S.default)(E.catalogProductsList),productsSelection:r,orderItems:n,flatListController:T.current,onProductSelectChange:function(e,r){let l=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(0,g.shouldPreventCatalogProductSelection)(n,t)?s.ModalManager.open(M.default.createElement(y.default,null)):(j(e,r),l||k||x(!0),D())}})),M.default.createElement(c.default,null,M.default.createElement(v.OrderTotalPrice,{xstyle:[b.uiPadding.all16,b.uiMargin.top10],visible:!0,disabled:!k,totalPrice:(0,a.formatAmount1000)(t,A+R),testid:"save-products-button",onConfirm:C,title:h.fbt._("Subtotal",null,{hk:"4ciFet"}),confirmTitle:h.fbt._("Add to Order",null,{hk:"2SYeoP"})}))))};var l=r(72696),a=r(27578),o=n(r(908081)),u=n(r(324093)),i=r(626194),c=n(r(969358)),d=n(r(570834)),s=r(114850),f=r(359162),p=n(r(881238)),m=r(100149),y=n(r(702895)),g=r(272493),v=r(208160),b=r(676345),h=r(548360),M=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=_(t);if(r&&r.has(e))return r.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=l?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(667294)),S=n(r(156720)),O=n(r(969651)),P=n(r(637660));function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_=function(e){return e?r:t})(e)}const E={catalogTitleText:{fontWeight:"m1e7cby3",lineHeight:"tkq7s68q",fontSize:"ovllcyds",color:"q70jrbp7"},catalogBar:{width:"ln8gz9je",borderEnd:"eta5aym1",borderBottom:"d9802myq",borderStart:"e4xiuwjv",borderTop:"gq6acybq"},catalogProductsList:{overflowX:"i44ccddp",overflowY:"ag5g9lrv",flexGrow:"ggj6brxn",flexShrink:"m0h2a7mj",flexBasis:"l07amlnk"},drawerSection:{display:"p357zi0d",overflowX:"i44ccddp",overflowY:"ag5g9lrv",flexDirection:"f8m0rgwh"}}},504234:(e,t,r)=>{"use strict";var n=r(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.CatalogFormProduct=function(e){let{product:t,productsSelection:r,onProductSelectChange:n}=e;const i=Number(r.getVal(t))||0,[c,d]=(0,u.useState)(!1);return u.default.createElement("div",{onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1)},u.default.createElement(a.default,{product:t,detail:(c||r.isSelected(t))&&u.default.createElement(l.default,{quantity:i,quantityTitle:o.fbt._("Items in order",null,{hk:"35Mpfd"}),isCollapsed:!c,onAddOneClick:()=>n(t,i+1),onRemoveOneClick:()=>n(t,i-1)}),managedFocus:!0,theme:"product-add-to-order"}))};var l=n(r(763879)),a=n(r(698690)),o=r(548360),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=l?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(667294));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}},881238:(e,t,r)=>{"use strict";var n=r(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{className:t,productsSelection:r,orderItems:n,flatListController:h,onProductSelectChange:M}=e;const S=(0,b.default)(),O=(0,y.default)(),P=(0,m.default)(O,100),_=a.CatalogCollection.assertGet((0,f.getMaybeMeUser)()),[E,w]=(0,p.useState)(!1),[C,I]=(0,p.useState)(0),[j,k]=(0,p.useState)(!1),x=()=>{const e=new Set(n.map((e=>{let{id:t}=e;return t})));return _.productCollection.getProductModels().filter((t=>!e.has(t.id))).map((e=>({itemKey:e.id.toString(),product:e})))},D=e=>{e.forEach((e=>{const t=n.find((t=>{let{id:r}=t;return r===e.product.id}));void 0!==t&&M(e.product,Number(t.quantity),!0)}))},T=function(){var e=(0,l.default)((function*(){if(j)return;if(!_.afterCursor)return;const e=_.productCollection.getProductModels().length;w(!0),I(e);try{const t=yield a.CatalogCollection.update((0,f.getMaybeMeUser)());if(S.aborted)return;w(!1);const r=(Array.isArray(t)?t[0]:t).productCollection.getProductModels().length;if(D(x().slice(e)),r===C&&k(!0),e*s.PRODUCT_LIST_ITEM_HEIGHT<window.innerHeight)return T()}catch(e){w(!1),k(!0)}}));return function(){return e.apply(this,arguments)}}();(0,p.useEffect)((()=>{D(x()),T()}),[]),(0,g.useListener)(_.productCollection,"add",P);const A=(0,v.default)((e=>{E||e.scrollTop+c.SCROLL_FUDGE>e.scrollHeight-e.clientHeight&&T()}),100);return p.default.createElement(u.default,{className:t,flatListControllers:[h],onScroll:e=>{e.currentTarget&&A(e.currentTarget)}},p.default.createElement(o.FlatList,{flatListController:h,direction:"vertical",forceConsistentRenderCount:!1,data:x(),renderItem:e=>{let{product:t}=e;return p.default.createElement(d.CatalogFormProduct,{product:t,productsSelection:r,onProductSelectChange:M})},defaultItemHeight:s.PRODUCT_LIST_ITEM_HEIGHT}),E&&p.default.createElement(i.default,null))};var l=n(r(348926)),a=r(713464),o=r(512938),u=n(r(964223)),i=n(r(495012)),c=r(914368),d=r(504234),s=r(899841),f=r(459857),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=l?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(667294)),m=n(r(710629)),y=n(r(969651)),g=r(808446),v=n(r(286481)),b=n(r(895851));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}},100149:(e,t,r)=>{"use strict";var n=r(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.ConfirmDiscardModal=function(e){let{onOK:t}=e;return i.default.createElement(l.ConfirmPopup,{title:u.fbt._("Discard changes?",null,{hk:"1SaEaC"}),onOK:()=>{a.ModalManager.close(),t()},okText:u.fbt._("Discard",null,{hk:"3etb6C"}),onCancel:()=>a.ModalManager.close()},i.default.createElement(o.TextDiv,{theme:"muted"},u.fbt._("If you close this, your draft will be discarded.",null,{hk:"4G5DVj"})))};var l=r(103440),a=r(114850),o=r(180519),u=r(548360),i=n(r(667294))},973176:(e,t,r)=>{"use strict";var n=r(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.CustomItemFormDrawer=function(e){var t,r;let{currency:n,customItem:l,onBack:P,onSaveCustomItem:E,eligibleCurrencies:w}=e;const[C,I]=(0,S.useState)(null==l?void 0:l.name),[j,k]=(0,S.useState)(Number.isInteger(null==l?void 0:l.price)?String(Number(null==l?void 0:l.price)/1e3):null),[x,D]=(0,S.useState)(null==l?void 0:l.price),[T,A]=(0,S.useState)((null==l?void 0:l.isQuantitySet)?l.quantity:null),[R,W]=(0,S.useState)((null==l?void 0:l.isQuantitySet)?String(l.quantity):null),[L,F]=(0,S.useState)(null!==(t=null==l?void 0:l.currency)&&void 0!==t?t:n),N=(0,S.useMemo)((()=>function(e){if(null==e)return"";const t=String(M.fbt._("Add a title",null,{hk:"7Lm6B"}));return""===e.trim()?t:""}(C)),[C]),B=(0,S.useMemo)((()=>function(e,t){if(null==t)return"";const r=String(M.fbt._("Enter a valid price",null,{hk:"4yb1Sg"}));return""!==t.trim()&&(0,a.validatePriceString)(e,t,y.MIN_PRICE,y.MAX_PRICE)?"":r}(n,j)),[n,j]),q=(0,S.useMemo)((()=>function(e){if(null==e)return"";const t=String(M.fbt._("Enter a valid quantity",null,{hk:"u6SoG"}));return _(Number(e))?"":t}(R)),[R]),U=function(e,t,r,n){const l=(null==e?void 0:e.isQuantitySet)?Number(n)!==e.quantity:null!=n;return(null==e?void 0:e.name)!==t||(null==e?void 0:e.price)!==r||l}(l,C,x,R);return S.default.createElement(o.default,null,S.default.createElement(i.DrawerHeader,{title:l?M.fbt._("Update item",null,{hk:"1TL07p"}):M.fbt._("Create new item",null,{hk:"4xRwlm"}),type:i.DRAWER_HEADER_TYPE.SMALL,onBack:U?()=>{f.ModalManager.open(S.default.createElement(p.ConfirmDiscardModal,{onOK:P}))}:P,focusBackOrCancel:!0}),S.default.createElement(u.default,null,S.default.createElement(c.default,{className:(0,O.default)(v.uiPadding.all16)},S.default.createElement(g.RichTextField,{testid:"custom-item-edit-name-input",value:C,placeholder:M.fbt._("Item name",null,{hk:"1TMRR7"}),onChange:e=>{I(e.text)},theme:"small",customStyleThemes:["desaturated"],maxLength:150,error:N}),S.default.createElement(d.FlexRow,null,S.default.createElement(s.default,{grow:4},S.default.createElement(g.RichTextField,{testid:"custom-item-edit-price-input",value:j,placeholder:M.fbt._("Price {symbol}",[M.fbt._param("symbol",(0,a.formatAmount1000ToParts)(L,0).symbol)],{hk:"3jcGcb"}),onChange:e=>{const t=e.text,r=(0,a.valueFromString)(n,t);D(r),k(t)},theme:"small",maxLength:30,customStyleThemes:["desaturated"],error:B})),(null!==(r=null==w?void 0:w.length)&&void 0!==r?r:0)>1&&S.default.createElement(s.default,{testid:"custom-item-edit-currency-flex-item"},S.default.createElement(h.Select,{ariaRoleDescription:"Currency selection in custom order item screen",initialSelection:L,width:150,onChange:e=>{F(e)}},(null!=w?w:[]).map((e=>S.default.createElement(b.SelectMenuItem,{key:e,optionId:e,primary:`${e} ${(0,a.formatLocalSymbol)(e)}`})))))),S.default.createElement(g.RichTextField,{testid:"custom-item-edit-quantity-input",value:R,placeholder:M.fbt._("Quantity (Optional)",null,{hk:"4swiuO"}),onChange:e=>{const t=e.text;let r=""===t?null:Number(t);_(r)||(r=null),A(r),W(""===t?null:t)},theme:"small",maxLength:30,customStyleThemes:["desaturated"],error:q}),S.default.createElement(m.OrderApplyChangesButton,{title:l?M.fbt._("Update Order",null,{hk:"HjU1X"}):M.fbt._("Add to Order",null,{hk:"3p1U18"}),disabled:null==C||null==j||!(!l||U)||[N,B,q].some((e=>e)),onClick:()=>{const e={name:C,priceAmount1000:+x,quantity:T,isQuantitySet:Number.isInteger(T),currency:L};E(e)},testid:"save-custom-item-button"}))))};var l=r(753958),a=r(27578),o=n(r(908081)),u=n(r(324093)),i=r(626194),c=n(r(969358)),d=r(690495),s=n(r(469733)),f=r(114850),p=r(100149),m=r(208160),y=r(517086),g=r(202391),v=r(676345),b=r(752104),h=r(825548),M=r(548360),S=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=P(t);if(r&&r.has(e))return r.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=l?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(667294)),O=n(r(156720));function P(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(P=function(e){return e?r:t})(e)}function _(e){return Number.isInteger(e)&&+e>0&&+e<=l.CART_ITEM_MAX_QUANTITY}},660516:(e,t,r)=>{"use strict";var n=r(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.OrderDetailAmountTypeSelector=function(e){let{value:t,onChange:r,currency:n}=e;const c=l.formatLocalSymbol(n),d=u.fbt._("Select amount type",null,{hk:"1xddkG"}),s=[{id:"percentage",label:u.fbt._("by Percentage ({percentage-symbol})",[u.fbt._param("percentage-symbol",a.PERCENTAGE_SYMBOL)],{hk:"3fQwM3"}),value:a.PERCENTAGE_SYMBOL},{id:"flat-amount",label:u.fbt._("by Flat amount ({currency-symbol})",[u.fbt._param("currency-symbol",c)],{hk:"duPhj"}),value:c}],f=(0,i.useMemo)((()=>s.findIndex((e=>e.value===t))),[]);return i.default.createElement(o.default,{"aria-label":d,options:s,defaultIndex:f,onChange:r})};var l=d(r(27578)),a=r(238977),o=n(r(754493)),u=r(548360),i=d(r(667294));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}function d(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=c(t);if(r&&r.has(e))return r.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=l?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}},754493:(e,t,r)=>{"use strict";var n=r(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{defaultIndex:t=0,options:r,onChange:n,"aria-label":p}=e;const y=(0,s.useRef)(null),[g,v]=(0,s.useState)(!1),[b,h]=(0,s.useState)(t),M=r.map(((e,t)=>{const{id:r,label:l}=e;return s.default.createElement(o.DropdownItem,{testid:`mi-${r}`,action:()=>{n(e),h(t)},key:r},s.default.createElement("div",{className:(0,f.default)(m.option),role:"button","aria-label":l},t===b?s.default.createElement(i.TextSpan,{weight:"bold"},l):l))}));return s.default.createElement("div",{ref:y},s.default.createElement(l.default,{xstyle:u.default.isRTL()&&m.chipButtonRTL,"aria-label":p,PostfixIcon:a.DownIcon,label:r[b].value,onClick:()=>v((e=>!e))}),g&&y.current&&s.default.createElement(c.UIE,{displayName:"ValuePicker",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:()=>v(!1)},s.default.createElement(d.default,{contextMenu:{menu:M,anchor:y.current}})))};var l=n(r(407284)),a=r(820765),o=r(675085),u=n(r(932325)),i=r(180519),c=r(392632),d=n(r(37875)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=l?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(667294)),f=n(r(156720));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}const m={option:{boxSizing:"cm280p3y",color:"tviruh8d",cursor:"ajgl1lbb",fontSize:"f8jlpxt4",height:"lniyxyh2",lineHeight:"gz7w46tb",overflowX:"gfz4du6o",overflowY:"r7fjleex",paddingStart:"sta02ykp",paddingEnd:"pnfw7ual",paddingTop:"lqdozo90",textOverflow:"lhj4utae",whiteSpace:"le5p0ye3",position:"g0rxnol2"},chipButtonRTL:{paddingStart:"fif0zr45",paddingEnd:"gp4edbez"}}},886066:(e,t,r)=>{"use strict";var n=r(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.createSendOrderDetailsWamEvent=t.createSendOrderDetailsExtraAttributes=void 0;var l=r(738501),a=n(r(94530)),o=r(873994),u=r(130756);const i=(e,t,r)=>{var n,a,o;let u=0,i=0;return t.forEach((e=>{!0===e.isCustomItem?u+=e.quantity:i+=e.quantity})),{num_custom_items:u,num_catalog_items:i,has_additional_charges:(null!==(n=r.discount)&&void 0!==n?n:0)>0||(null!==(a=r.tax)&&void 0!==a?a:0)>0||(null!==(o=r.shipping)&&void 0!==o?o:0)>0,has_ephemeral_messages_turned_on:(0,l.isEphemeralSettingOn)(e)}};t.createSendOrderDetailsExtraAttributes=i;t.createSendOrderDetailsWamEvent=(e,t,r,n,l,c)=>{const d=i(e,r,n);return new o.OrderDetailsActionsSmbWamEvent({orderDetailsCreationAction:u.ORDER_DETAILS_CREATION_ACTION.SEND_ORDER_DETAILS,actionCategory:a.default.ORDER_DETAILS_CREATION,hasCatalog:l,hasAddedPrice:c,orderDetailEntryPoint:t,extraAttributes:JSON.stringify(d)})}},665195:(e,t,r)=>{"use strict";var n=r(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.getErrorMsgFromProducts=i,t.notifyIfAnyProductMissesPrice=void 0;var l=r(625786),a=r(390737),o=r(548360),u=n(r(667294));function i(e){const t=e.length;return 0===t?"":1===t?o.fbt._("Enter a price for {first-product-name}",[o.fbt._param("first-product-name",e[0])],{hk:"Lf39K"}):2===t?o.fbt._("Enter prices for {first-product-name} and {second-product-name}",[o.fbt._param("first-product-name",e[0]),o.fbt._param("second-product-name",e[1])],{hk:"1uLet0"}):o.fbt._({"*":"Enter prices for {first-product-name}, {second-product-name} and {other-items} other items",_1:"Enter prices for {first-product-name}, {second-product-name} and 1 other item"},[o.fbt._plural(t-2,"other-items"),o.fbt._param("first-product-name",e[0]),o.fbt._param("second-product-name",e[1])],{hk:"1Crsuq"})}t.notifyIfAnyProductMissesPrice=(e,t)=>{const r=i(e.reduce(((e,r)=>{var n;const l=null!==(n=r.price)&&void 0!==n?n:t[r.id];return Number.isInteger(l)||e.push(r.name||""),e}),[]));r&&a.ToastManager.open(u.default.createElement(l.Toast,{duration:1e4,msg:r,action:{actionText:o.fbt._("OKAY",null,{hk:"3RIrWh"}),dismiss:!0,theme:"success"}}))}},487655:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useSet=function(e){const[t,r]=(0,n.useState)(e?e():()=>new Set),l=(0,n.useCallback)((e=>new Promise((t=>{r((r=>{const n=new Set(r);return n.add(e),t(n),n}))}))),[]),a=(0,n.useCallback)((e=>new Promise((t=>{r((r=>{const n=new Set(r);return n.delete(e),t(n),n}))}))),[]),o=(0,n.useCallback)((e=>new Promise((t=>{r((r=>{const n=new Set(r);return n.has(e)?n.delete(e):n.add(e),t(n),n}))}))),[]),u=(0,n.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new Promise((t=>{r((()=>{const r=new Set(e);return t(r),r}))}))}),[]);return[t,{add:l,remove:a,toggle:o,clear:u}]};var n=r(667294)},957533:(e,t,r)=>{"use strict";var n=r(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.WDSMenuItem=void 0,t.useMenuGroup=function(e){const t=(0,u.useMenu)();if(null==t)throw(0,i.default)("[Menu] MenuGroup must be a child of a MenuItemList");const r=(0,c.useRef)();(0,c.useImperativeHandle)(r,e),(0,c.useEffect)((()=>{const e=(e,t,n)=>{var l;null!=r.current&&r.current.optionIds.has(e)&&(null===(l=r.current)||void 0===l||l.onSelect(e,t,n))};return t.events.on("select",e),()=>{t.events.off("select",e)}}),[r])},t.useMenuItem=s;var l=r(180519),a=n(r(625903)),o=r(219753),u=r(913290),i=n(r(556869)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=l?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(667294));n(r(156720));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}function s(e,t){(0,u.useRegisterItem)(e,t);const r=(0,u.useMenu)();if(null==r)throw(0,i.default)("[Menu] MenuItem must be a child of a MenuItemList");return{menu:r,colorScheme:r.colorScheme,size:r.size,isActive:(null==r?void 0:r.activeItemId)===e,isFiltered:null!=r.filteredItems&&!1===r.filteredItems.has(e)}}const f={container:{textAlign:"ljrqcn24",borderTopStartRadius:"bbr44loe",borderTopEndRadius:"ooj5yc5b",borderBottomEndRadius:"m8i16etx",borderBottomStartRadius:"cw0ivh8j",overflowX:"gfz4du6o",overflowY:"r7fjleex",display:"p357zi0d",flexGrow:"ggj6brxn",flexShrink:"oq44ahr5",flexBasis:"lb5m6g5c",alignSelf:"l33m68ws",width:"ln8gz9je"},disabled:{cursor:"h2qzpyga"}},p=(0,c.forwardRef)(((e,t)=>{const{optionId:r,primary:n,detailRight:u,secondary:i,primaryRight:d,secondaryRight:p,detailLeft:m,disabled:y,children:g,type:v,onSelect:b,searchCriteria:h,size:M,testid:S}=e,{menu:O,isActive:P,isFiltered:_,colorScheme:E,size:w}=s(r,{id:r,type:v,label:n,searchCriteria:h,onSelect:b});return!0===_?null:c.default.createElement(a.default,{ref:t,role:"listitem",xstyle:[f.container,!0===y&&f.disabled],onClick:!0!==y?e=>{e.stopPropagation(),O.selectItem(r)}:null,tabIndex:-1,testid:S},c.default.createElement(o.WDSCell,{size:null!=M?M:w,colorScheme:E,disabled:y,primary:c.default.createElement(l.WDSTextTitle,null,n),primaryRight:d,secondary:c.default.createElement(l.WDSTextMuted,null,i),secondaryRight:p,detailLeft:m,detailRight:u,active:P,tabIndex:-1}),g)}));t.WDSMenuItem=p,p.displayName="WDSMenuItem"},752104:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ActionMenuItem",{enumerable:!0,get:function(){return n.ActionMenuItem}}),Object.defineProperty(t,"MenuSearchInput",{enumerable:!0,get:function(){return l.MenuSearchInput}}),Object.defineProperty(t,"MenuSection",{enumerable:!0,get:function(){return o.MenuSection}}),Object.defineProperty(t,"SelectMenuItem",{enumerable:!0,get:function(){return a.SelectMenuItem}}),Object.defineProperty(t,"SelectMenuItemGroup",{enumerable:!0,get:function(){return a.SelectMenuItemGroup}}),Object.defineProperty(t,"SubMenuItem",{enumerable:!0,get:function(){return u.SubMenuItem}}),Object.defineProperty(t,"SwitchMenuItem",{enumerable:!0,get:function(){return i.SwitchMenuItem}});var n=r(136351),l=r(891382),a=r(401108),o=r(273275),u=r(279772),i=r(321725)},136351:(e,t,r)=>{"use strict";var n=r(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.ActionMenuItem=function(e){return o.default.createElement(a.WDSMenuItem,(0,l.default)({},e,{type:"action"}))};var l=n(r(967154)),a=r(957533),o=n(r(667294))},891382:(e,t,r)=>{"use strict";var n=r(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.MenuSearchInput=function(){const e=(0,i.useMenu)(),t=e=>{e.stopPropagation(),e.preventDefault()},r=function(){var t=(0,l.default)((function*(t){const r=e.items;if(""===t){const t=Array.from(r.keys());return e.filterItems(t)}const n=Array.from(r.values()).map((e=>e.current)).filter(Boolean),l=(0,o.filterPaginate)(n,(e=>(0,u.simpleSearch)(t,[e.searchCriteria])),{pageLength:n.length});yield e.filterItems(l.map((e=>e.id)))}));return function(){return t.apply(this,arguments)}}();return c.default.createElement(a.SearchInput,{focusOnMount:!0,colorScheme:"darker",onEnter:()=>{null!=e.activeItemId&&e.selectItem(e.activeItemId)},onClick:t,onFocus:t,onBlur:t,onSearch:r,placeholder:""})};var l=n(r(348926)),a=r(745170),o=r(900359),u=r(268755),i=r(913290),c=n(r(667294))},401108:(e,t,r)=>{"use strict";var n=r(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.SelectMenuItem=function(e){const t=(0,p.useContext)(v);if(null==t)throw(0,f.default)("[menu] `SelectMenuItem` must be used inside of a `SelectMenuItemGroup`");const r=t.selection.has(e.optionId);let n,a;t.isMultiselect?(n="multi-select",a=r?p.default.createElement(o.CheckboxRoundCheckedIcon,null):p.default.createElement(u.CheckboxRoundUncheckedIcon,null)):(n="single-select",a=r?p.default.createElement(i.CheckmarkIcon,{color:c.SvgColorProp.TEAL}):null);return p.default.createElement(s.WDSMenuItem,(0,l.default)({detailRight:a},e,{type:n}))},t.SelectMenuItemGroup=function(e){const{multiselect:t,children:r,initialSelection:n}=e,l=(0,d.useMenu)(),[o,{clear:u,toggle:i}]=(0,y.useSet)(),c=p.Children.map(r,(e=>e.props.optionId)),s=function(){var r=(0,a.default)((function*(r,n){var l;let a;a=!0===t?yield i(r):yield u([r]),null===(l=e.onSelect)||void 0===l||l.call(e,r,n,a)}));return function(){return r.apply(this,arguments)}}();return(0,m.useListener)(l.events,"select",function(){var e=(0,a.default)((function*(e,t){c.includes(e)&&(yield s(e,t))}));return function(){return e.apply(this,arguments)}}()),(0,p.useEffect)((()=>{if(null!=n){const e=Array.isArray(n)?n:[n];u(e)}}),[]),p.default.createElement(v.Provider,{value:{selection:o,isMultiselect:!0===t}},r)};var l=n(r(967154)),a=n(r(348926)),o=r(95833),u=r(827728),i=r(969579),c=r(220584),d=r(913290),s=r(957533),f=n(r(556869)),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=l?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(667294)),m=r(808446),y=r(487655);function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}const v=(0,p.createContext)(null)},273275:(e,t,r)=>{"use strict";var n=r(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.MenuSection=function(e){let{scroll:t}=e,r=(0,a.default)(e,c);return u.default.createElement(o.FlexColumn,(0,l.default)({},r,{className:(0,i.default)(!0===t&&d.scroll)}))};var l=n(r(967154)),a=n(r(506479)),o=r(690495),u=n(r(667294)),i=n(r(156720));const c=["scroll"],d={scroll:{overflowY:"ag5g9lrv"}}},279772:(e,t,r)=>{"use strict";var n=r(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.SubMenuItem=function(e){const{children:t}=e,r=(0,a.default)(e,s),{activeItemId:n}=(0,i.useMenu)(),f=(0,d.useRef)(null),p=(0,d.useRef)(),m=n===e.optionId;return(0,d.useEffect)((()=>{null!=p.current&&(m?p.current.showPopover():p.current.hidePopover())}),[m]),d.default.createElement(c.WDSMenuItem,(0,l.default)({ref:f},r,{type:"submenu",onSelect:()=>{null!=p.current&&(p.current.popoverIsVisible?p.current.hidePopover():p.current.showPopover())},detailRight:d.default.createElement(o.ChevronRightIcon,{width:20})}),d.default.createElement(u.DropdownMenu,{controllerRef:p,buffer:-8,target:f,position:u.PopoverPosition.End,alignment:u.PopoverAlignment.Start,initHandling:"hover-popover"},t))};var l=n(r(967154)),a=n(r(506479)),o=r(181712),u=r(585110),i=r(913290),c=r(957533),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=l?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(667294));const s=["children"];function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}},321725:(e,t,r)=>{"use strict";var n=r(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.SwitchMenuItem=function(e){const{initialState:t=!1,onSelect:r}=e,n=(0,a.default)(e,c),[d,s]=(0,i.useState)(t);return i.default.createElement(u.WDSMenuItem,(0,l.default)({},n,{type:"switch",onSelect:()=>{s(!d),null==r||r(!d)},primaryRight:i.default.createElement(o.Switch,{checked:d,onChange:()=>{},tabIndex:-1})}))};var l=n(r(967154)),a=n(r(506479)),o=r(137506),u=r(957533),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=l?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(667294));const c=["initialState","onSelect"];function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}},825548:(e,t,r)=>{"use strict";var n=r(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.Select=void 0;var l=n(r(967154)),a=r(641711),o=r(585110),u=n(r(469733)),i=r(891382),c=r(401108),d=r(589332),s=r(676345),f=n(r(625903)),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=v(t);if(r&&r.has(e))return r.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=l?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(667294)),m=n(r(156720)),y=n(r(576191)),g=n(r(38085));function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(v=function(e){return e?r:t})(e)}const b={selectDropdownContainer:{position:"g0rxnol2",color:"k2bacm8l"},select:{display:"p357zi0d",alignItems:"gndfcl4n",textAlign:"ljrqcn24",position:"g0rxnol2",backgroundColor:"f6cvynhn",borderTop:"kagi745y",borderEnd:"evq3mrnv",borderBottom:"daad4uqs",borderStart:"jdssz2gn",borderTopStartRadius:"m2gb0jvt",borderTopEndRadius:"rfxpxord",borderBottomEndRadius:"gwd8mfxi",borderBottomStartRadius:"mnh9o63b",overflowX:"gfz4du6o",overflowY:"r7fjleex",whiteSpace:"le5p0ye3",textOverflow:"lhj4utae",cursor:"ajgl1lbb",userSelect:"rkxvyd19",boxSizing:"cm280p3y",width:"ln8gz9je"},selectFocused:{borderTop:"ggk2mtcd",borderEnd:"c4hi5cu5",borderBottom:"dorenqkw",borderStart:"pidw8noc"},label:{overflowX:"gfz4du6o",overflowY:"r7fjleex",textOverflow:"lhj4utae"}},h={select:{height:"qmp0wt83"}},M={select:{height:"sai7fuui"}},S=(0,p.forwardRef)(((e,t)=>{const{children:r,label:n,size:l="large",width:o,ariaRoleDescription:i}=e,[c,d]=(0,y.default)(),v=(0,g.default)(c,t);return p.default.createElement("div",{className:(0,m.default)(b.selectDropdownContainer),"aria-roledescription":i,style:{width:o}},p.default.createElement(f.default,{onClick:e=>{e.stopPropagation()},ref:v,xstyle:[b.select,"large"===l&&[h.select,s.uiPadding.start24,s.uiPadding.end36],"small"===l&&[M.select,s.uiPadding.horiz16],d&&b.selectFocused]},p.default.createElement(u.default,{grow:1,justify:"start",xstyle:b.label},n),p.default.createElement(a.CaretDownIcon,{xstyle:s.uiPadding.start8})),r)}));S.displayName="SelectButton";const O=(0,p.forwardRef)(((e,t)=>{const{defaultLabel:r,customLabel:n,children:a,popoverControllerRef:u,menuMinWidth:s,menuMaxHeight:f,ariaRoleDescription:m,size:y,width:v,includeSearchInput:b}=e,h=new Map(p.Children.toArray(a).map((e=>[e.props.optionId,{optionId:e.props.optionId,label:e.props.primary}]))),M=e=>{var t,l;let a;if(null!=n&&(a=n(e)),null==a&&null!=e&&e.size){const t=Array.from(e).map((e=>{var t;const r=null===(t=h.get(e))||void 0===t?void 0:t.label;return null!=r?[r,", "]:null})).filter(Boolean).flat().slice(0,-1);a=t.length?t:null}return null!==(t=null!==(l=a)&&void 0!==l?l:r)&&void 0!==t?t:""},O=(0,p.useRef)(null),P=(0,g.default)(t,O),_=(0,p.useRef)(null),E=(0,d.toArray)(e.initialSelection),[w,C]=(0,p.useState)(E),[I,j]=(0,p.useState)(M(new Set(E))),k=!0===e.multiselect?{multiselect:!0,initialSelection:w}:{multiselect:!1,initialSelection:w[0]};return p.default.createElement(S,{ref:P,ariaRoleDescription:m,size:y,label:I,width:v},p.default.createElement(o.DropdownMenu,{target:O,listControllerRef:_,controllerRef:u,position:o.PopoverPosition.Bottom,alignment:o.PopoverAlignment.Start,maxHeight:f,minWidth:null!=s?Math.max(s,v):v,initHandling:"click",initialActiveOptionId:w[0]},!0===b?p.default.createElement(i.MenuSearchInput,null):null,p.default.createElement(c.SelectMenuItemGroup,(0,l.default)({},k,{onSelect:(t,r,n)=>{const l=M(n);var a,o;(j(l),C(Array.from(n)),!0===e.multiselect)?null===(a=e.onChange)||void 0===a||a.call(e,t,n.has(t),new Set(n)):null===(o=e.onChange)||void 0===o||o.call(e,t)}}),a)))}));t.Select=O,O.displayName="Select"}}]);
//# sourceMappingURL=https://web.whatsapp.com/1761.e6620099827f4de416a6.js.map
