/*! Copyright (c) 2022 WhatsApp Inc. All Rights Reserved. */
(self.webpackChunkwhatsapp_web_client=self.webpackChunkwhatsapp_web_client||[]).push([[9488],{854161:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteCoverPhoto=function e(t){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,s.genId)();const i=(0,a.deleteCoverPhoto)(t),u=new s.ActionType(c.fbt._("Removing cover photo",null,{hk:"1KJSi4"})),f=c.fbt._("Cover photo removal failed",null,{hk:"lbogl"}),p=i.catch((()=>{throw __LOG__(3)`actions:deleteCoverPhoto dropped`,new s.ActionType(f)})).catch((0,n.filteredCatch)(l.ServerStatusCodeError,(n=>{if(n.status>=400)return new s.ActionType(f,{actionText:c.fbt._("Try again",null,{hk:"BVffp"}),actionHandler:()=>e(t,o)})}))).then((()=>new s.ActionType(c.fbt._("Cover photo removed",null,{hk:"2jTL3n"}))));return r.ToastManager.open((0,d.jsx)(s.ActionToast,{id:o,initialAction:u,pendingAction:p})),i.then((()=>{}))},t.setCoverPhoto=function e(t,o,u){let f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,s.genId)();const p=new s.ActionType(c.fbt._("Setting cover photo",null,{hk:"1W6Cm8"})),h=c.fbt._("Cover photo set failed",null,{hk:"4jlUAI"}),g=(0,a.sendCoverPhoto)(t,o,u).catch((()=>{throw __LOG__(3)`action:setCoverPhoto dropped`,new s.ActionType(h)})).catch((0,n.filteredCatch)(l.ServerStatusCodeError,(n=>{if(__LOG__(3)`action:setCoverPhoto server error`,n.status>=400)return new s.ActionType(h,{actionText:c.fbt._("Try again",null,{hk:"BVffp"}),actionHandler:()=>e(t,o,u,f)})}))).then((()=>{let e;return e=(0,i.coverPhotoPrivacyMessagingEnabled)()?c.fbt._("Your cover photo is now public",null,{hk:"zDyK5"}):c.fbt._("Cover photo set",null,{hk:"zswp6"}),new s.ActionType(e)}));return r.ToastManager.open((0,d.jsx)(s.ActionToast,{id:f,initialAction:p,pendingAction:g})),g.then((()=>{}))};var n=o(450796),l=o(492574),a=o(461561),i=o(408139),r=o(694816),s=o(446331),c=o(548360),d=o(785893)},884838:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.verifyPostcode=void 0;var n=o(407799);t.verifyPostcode=(e,t)=>(0,n.verifyPostcode)(e,t)},293978:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return f.apply(this,arguments)};var l=n(o(348926)),a=o(450796),i=o(492574),r=o(634552),s=o(694816),c=o(446331),d=o(548360),u=o(785893);function f(){return(f=(0,l.default)((function*(e,t){const o=(0,r.sendUnlinkSubgroups)({parentGroupId:e,subgroupIds:t}),n=(0,l.default)((function*(){return yield o,new c.ActionType(d.fbt._({"*":"Groups unlinked",_1:"Group unlinked"},[d.fbt._plural(t.length)],{hk:"1t0149"}))}))(),f=new c.ActionType(d.fbt._({"*":"Unlinking groups",_1:"Unlinking group"},[d.fbt._plural(t.length)],{hk:"7pwnQ"}));s.ToastManager.open((0,u.jsx)(c.ActionToast,{id:(0,c.genId)(),initialAction:f,pendingAction:n}));try{yield o}catch(e){(0,a.filteredCatch)(i.ServerStatusCodeError,(()=>{}))(e)}}))).apply(this,arguments)}},634552:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendCreateCommunity=function(){return h.apply(this,arguments)},t.sendDeactivateCommunity=function(){return _.apply(this,arguments)},t.sendLinkSubgroups=function(){return C.apply(this,arguments)},t.sendUnlinkSubgroups=function(){return b.apply(this,arguments)};var l=n(o(348926)),a=o(736184),i=o(787614),r=o(831914),s=o(471914),c=o(492574),d=o(696055),u=o(181663),f=o(745454);const p=new s.WapParser("createCommunityReplyParser",(e=>{const t=e.child("group"),o=(0,f.createWid)(`${t.attrString("id")}@g.us`);if(!o.isGroup())throw Error("createGroupReplyParser: invalid group id");return{wid:o,subject:t.attrString("subject"),creator:(0,u.userJidToUserWid)(t.attrUserJid("creator")),ts:t.attrTime("creation")}}));function h(){return(h=(0,l.default)((function*(e){let{name:t,desc:o}=e;const n=(0,i.randomHex)(8),l=(0,r.wap)("iq",{to:r.G_US,type:"set",xmlns:"w:g2",id:(0,r.generateId)()},(0,r.wap)("create",{subject:(0,r.CUSTOM_STRING)(t),key:(0,r.CUSTOM_STRING)(n)},(0,r.wap)("parent",null),null!=o&&o.length>0?(0,r.wap)("description",{id:(0,r.generateId)()},(0,r.wap)("body",null,o)):null)),s=yield(0,a.deprecatedSendIqIfConnectedWithin)(l,p,10);return s.success?s.result:(__LOG__(2)`sendCreateCommunity failed: ${s.errorCode}:${s.errorType}`,Promise.reject(new c.ServerStatusCodeError(s.errorCode,s.errorText)))}))).apply(this,arguments)}const g=new s.WapParser("deactivateCommunityReplyParser",(e=>(e.assertTag("iq"),e.assertAttr("type","result"),{id:e.attrString("id"),parent_group_jid:e.attrString("from")})));function _(){return(_=(0,l.default)((function*(e){let{parentGroupId:t}=e;const o=(0,r.wap)("iq",{to:(0,d.JID)(t),type:"set",xmlns:"w:g2",id:(0,r.generateId)()},(0,r.wap)("delete_parent",null)),n=yield(0,a.sendIq)(o,g);return n.success?n.result:(__LOG__(2)`sendDeactivateCommunity failed: ${n.errorCode}:${n.errorType}`,Promise.reject(new c.ServerStatusCodeError(n.errorCode,n.errorText)))}))).apply(this,arguments)}const m=new s.WapParser("linkSubgroupsReplyParser",(e=>{e.assertTag("iq"),e.assertAttr("type","result");const t=[],o=[];return e.child("links").child("link").mapChildren((e=>{const n=e.attrGroupJid("jid");e.hasAttr("error")?o.push({jid:n,error:e.attrInt("error")}):t.push(n)})),{id:e.attrString("id"),linkedGroupJids:t,failedGroups:o}}));function C(){return(C=(0,l.default)((function*(e){let{parentGroupId:t,subgroupIds:o}=e;const n=o.map((e=>(0,r.wap)("group",{jid:(0,d.JID)(e)}))),l=(0,r.wap)("iq",{to:(0,d.JID)(t),type:"set",xmlns:"w:g2",id:(0,r.generateId)()},(0,r.wap)("links",null,(0,r.wap)("link",{link_type:"sub_group"},n))),i=yield(0,a.sendIq)(l,m);return i.success?i.result:(__LOG__(2)`sendLinkSubgroups failed: ${i.errorCode}:${i.errorType}`,Promise.reject(new c.ServerStatusCodeError(i.errorCode,i.errorText)))}))).apply(this,arguments)}const v=new s.WapParser("unlinkSubgroupsReplyParser",(e=>{e.assertTag("iq"),e.assertAttr("type","result");const t=[],o=[];return e.child("unlink").mapChildren((e=>{const n=e.attrGroupJid("jid");e.hasAttr("error")?o.push({jid:n,error:e.attrInt("error")}):t.push(n)})),{id:e.attrString("id"),unlinkedGroupJids:t,failedGroups:o}}));function b(){return(b=(0,l.default)((function*(e){let{parentGroupId:t,subgroupIds:o}=e;const n=o.map((e=>(0,r.wap)("group",{jid:(0,d.JID)(e)}))),l=(0,r.wap)("iq",{to:(0,d.JID)(t),type:"set",xmlns:"w:g2",id:(0,r.generateId)()},(0,r.wap)("unlink",{unlink_type:"sub_group"},n)),i=yield(0,a.sendIq)(l,v);return i.success?i.result:(__LOG__(2)`sendUnlinkSubgroups failed: ${i.errorCode}:${i.errorType}`,Promise.reject(new c.ServerStatusCodeError(i.errorCode,i.errorText)))}))).apply(this,arguments)}},407799:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.verifyPostcode=function(e,t){if((0,l.isLegacyWebdBackend)())return Promise.reject(new Error("Postcode feature not supported in Non MD mode"));return a.default.verifyAndSavePostcode(e,t)};var l=o(88555),a=n(o(515131))},7749:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.uploadBizCoverPhoto=function(){return d.apply(this,arguments)};var l=n(o(348926)),a=o(565885),i=o(923082),r=n(o(471410)),s=o(661596),c=n(o(154824));function d(){return(d=(0,l.default)((function*(e,t,o){const n=yield(0,a.blobToArrayBuffer)(e),l=yield c.default.uploadCoverPhoto({file:n,hash:t,signal:o,type:s.MEDIA_TYPES.BIZ_COVER_PHOTO,uploadOrigin:r.default.UPLOAD_ORIGIN_TYPE.UNKNOWN,isViewOnce:!1}),{fbid:d,ts:u,metaHmac:f}=l;if(null!=d&&null!=u&&null!=f)return{id:d,ts:u,metaHmac:f};throw new i.HttpInvalidResponseError("mmsUpload: missing fields in upload response")}))).apply(this,arguments)}},32266:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCatalogLink=function(e){return`https://wa.me/c/${e}`},t.createProductLink=function(e,t){return`https://wa.me/p/${t}/${e}`}},724697:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;let{businessProfile:o,contact:n,editable:E,profilePicThumb:j,onClick:O,onOpenStatus:A,onLoad:w,hideStatusV3:L}=e;const[M,N]=(0,P.useState)(window.innerWidth),[R,D]=(0,P.useState)(null),B=(0,y.useModelValues)(o,["coverPhoto"]),W=(0,k.default)();(0,P.useEffect)((()=>{function e(){N(window.innerWidth)}return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)}),[]);const F=M>1300?152:122,H=(0,r.isStatusV3ProfilePhotoRingEnabled)()||!(0,r.canSeeStatusV3OnContact)()||n.statusMute||L?null:v.StatusV3Collection.get(n.id);function U(){H&&(i.ModalManager.openMedia((0,x.jsx)(g.default,{statusV3:H,onClose:()=>i.ModalManager.closeMedia()}),{transition:"status-v3-modal"}),null==A||A())}let G=null;R&&(G=(0,x.jsx)(p.UIE,{displayName:"ContextMenu",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:()=>{D(null)},children:(0,x.jsx)(h.default,{contextMenu:R})}));let z,V=null,q=s.default.noStatusBorder;if(null!=H){const e=!(0,r.isStatusV3ProfilePhotoRingEnabled)();V=(0,x.jsx)(C.StatusV3ImageRing,{statusV3:H,size:F+24,stroke:3,theme:C.RingTheme.BusinessContactInfo,respectAppTheme:!0,breakRing:e}),q=s.default.hasStatusBorder}z=E&&null!=j?(0,x.jsx)(m.default,{profilePicThumb:j,size:F}):(0,x.jsx)(c.DetailImage,{id:n.id,size:F,loader:!0,onLoad:w,onClick:function(e){if(O)if(null!=H&&H.totalCount>0){e.stopPropagation(),e.preventDefault();const t=[(0,x.jsx)(d.DropdownItem,{testid:"mi-view-photo",action:()=>{O(e)},children:l.default.t(653)},"view-photo"),(0,x.jsx)(d.DropdownItem,{testid:"mi-view-status",action:U,children:S.fbt._("View status",null,{hk:"1QQMZy"})},"view-status")];D({menu:t,event:e})}else O(e)},quality:c.DetailImageQuality.High});const K=null===(t=B.coverPhoto)||void 0===t?void 0:t.url.toString();let Y,Q,J;if(null!=E&&(0,a.isBizCoverPhotoEditEnabled)()){Y=(0,x.jsx)(_.default,{coverPhoto:null!=B.coverPhoto?B.coverPhoto:void 0,signal:W});const e=(0,x.jsx)(f.default,{name:"pencil",directional:!0,color:"teal"});Q=(0,x.jsx)("div",{className:(0,T.default)(I),"aria-hidden":!0,children:(0,x.jsx)(u.Round,{inverted:!0,testid:"edit_cover_photo",children:e})})}if(null==E&&null!=K&&(0,a.isBizCoverPhotoViewEnabled)()){const e=S.fbt._("Business cover photo image",null,{hk:"10WGS4"}),t=""!==K?{backgroundImage:`url(${K})`}:null;J=(0,x.jsx)("div",{className:s.default.coverPhotoImage,style:t,"data-testid":"cover-photo-img",role:"img","aria-label":e})}return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:(0,b.default)(s.default.coverPhoto,{[s.default.isEditable]:E}),children:[J,Y,Q]}),(0,x.jsxs)("div",{className:s.default.avatar,children:[V,(0,x.jsx)("div",{className:q,children:z})]}),G]})};var l=n(o(568064)),a=o(408139),i=o(914597),r=o(263161),s=n(o(495941)),c=o(288984),d=o(471174),u=o(482857),f=n(o(23217)),p=o(718644),h=n(o(624717)),g=n(o(110121)),_=n(o(900958)),m=n(o(786791)),C=o(924391),v=o(459387),b=n(o(294184)),S=o(548360),P=o(667294),T=n(o(156720)),y=o(735461),k=n(o(803409)),x=o(785893);const I={position:"lhggkp7q",end:"i7sa5vq0",bottom:"fcd3cnzj",zIndex:"jnl3jror",pointerEvents:"m62443ks"}},630426:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.getProfilePopulatedFields=i,t.getProfilePopulatedFieldsFromModel=function(e){return{hasDescription:null!=e.description,hasCategory:!!(e.categories&&e.categories.length>0),hasHours:null!=e.hours,hasEmail:null!=e.email,hasAddress:null!=e.address,hasWebsite:null!=e.primaryWebsite}},t.logEditCoverPhoto=function(){new a.default.EditBusinessProfile({editProfileAction:a.default.EDIT_PROFILE_ACTION.ACTION_EDIT_COVER_PHOTO_CLICK,businessProfileEntryPoint:a.default.BUSINESS_PROFILE_ENTRY_POINT.SETTINGS}).commit()},t.logProfileFieldDiscard=function(e,t,o){new a.default.EditBusinessProfile((0,l.default)({editProfileAction:a.default.EDIT_PROFILE_ACTION.ACTION_PROFILE_FIELD_DISCARD,businessProfileEntryPoint:a.default.BUSINESS_PROFILE_ENTRY_POINT.SETTINGS,editProfileActionField:e,editBusinessProfileSessionId:o},i(t))).commit()},t.logProfileFieldOpen=function(e,t,o){new a.default.EditBusinessProfile((0,l.default)({editProfileAction:a.default.EDIT_PROFILE_ACTION.ACTION_PROFILE_FIELD_OPEN,businessProfileEntryPoint:a.default.BUSINESS_PROFILE_ENTRY_POINT.SETTINGS,editProfileActionField:e,editBusinessProfileSessionId:o},i(t))).commit()},t.logProfileFieldSave=function(e,t,o){new a.default.EditBusinessProfile((0,l.default)({editProfileAction:a.default.EDIT_PROFILE_ACTION.ACTION_PROFILE_FIELD_SAVE,businessProfileEntryPoint:a.default.BUSINESS_PROFILE_ENTRY_POINT.SETTINGS,editProfileActionField:e,editBusinessProfileSessionId:o},i(t))).commit()},t.logProfileOpen=function(e,t){var o;new a.default.EditBusinessProfile({editProfileAction:a.default.EDIT_PROFILE_ACTION.ACTION_OPEN,businessProfileEntryPoint:a.default.BUSINESS_PROFILE_ENTRY_POINT.SETTINGS,editBusinessProfileSessionId:t,hasDescription:null!=e.description,hasCategory:!!(e.categories&&e.categories.length>0),hasHours:null!=(null===(o=e.businessHours)||void 0===o?void 0:o.config),hasEmail:null!=e.email,hasAddress:null!=e.address,hasWebsite:null!=e.website}).commit()},t.logRemoveCoverPhoto=function(){new a.default.EditBusinessProfile({editProfileAction:a.default.EDIT_PROFILE_ACTION.ACTION_REMOVE_COVER_PHOTO,businessProfileEntryPoint:a.default.BUSINESS_PROFILE_ENTRY_POINT.SETTINGS}).commit()};var l=n(o(81109)),a=n(o(471410));function i(e){var t;return{hasDescription:null!=e.description,hasCategory:!!(e.categories&&e.categories.length>0),hasHours:null!=(null===(t=e.businessHours)||void 0===t?void 0:t.config),hasEmail:null!=e.email,hasAddress:null!=e.address,hasWebsite:null!=e.website}}},551070:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.jsx)(l.default,{name:"shopping-cart",xstyle:[i.cartIcon,"inherit-color"===e.theme&&i.inheritColor]})};var l=n(o(23217)),a=(n(o(156720)),o(785893));const i={cartIcon:{color:"svlsagor"},inheritColor:{color:"gtscxtjd"}}},925840:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.CartIconMenuBarItem=function(e){const{cartIconTheme:t,onClick:o,cartCountText:n,testid:f,catalogOwnerJid:p}=e,h=(0,d.useContext)(s.DrawerContext);return(0,u.jsx)(r.MenuBarItem,{testid:f,icon:(0,u.jsx)(l.default,{theme:t}),text:n,title:c.fbt._("Your cart",null,{hk:"Sn66V"}),onClick:(0,a.getOnCartClickWithLog)(o,p,(0,i.getProductCatalogContext)(h))})};var l=n(o(551070)),a=o(441868),i=o(397567),r=o(646346),s=o(427394),c=o(548360),d=o(667294),u=o(785893)},777577:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{labels:t,theme:o}=e;if(!t||!(0,l.canDisplayLabel)())return null;const n="standalone"===o;return(0,s.jsx)("div",{className:(0,r.default)(a.default.labelContainer,{[a.default.standaloneLabelContainer]:n}),children:t.map(((e,t)=>(0,s.jsx)(c,{labelId:e,isStandalone:n},t)))})};var l=o(408139),a=n(o(65753)),i=o(384543),r=n(o(294184)),s=o(785893);function c(e){let{labelId:t,isStandalone:o}=e;return(0,s.jsx)("div",{className:(0,r.default)(a.default.labelRow,{[a.default.standaloneLabelRow]:o}),children:(0,s.jsx)(i.Labels,{labels:[t],showName:!0})})}},144043:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onCartClick:t,cartCount:o,catalogId:n,canManageCatalog:a,onSendCatalog:i,onOpenCollections:r,onOpenMerchantDetailsForm:s,onOpenSettings:d,cartIconTheme:u}=e,f=t&&null!=n?(0,g.jsx)(c.CartIconMenuBarItem,{cartCountText:(0,l.isNumber)(o)&&o>0?o.toString():void 0,onClick:t,catalogOwnerJid:n,cartIconTheme:u}):null;return(0,g.jsxs)(g.Fragment,{children:[f,(0,g.jsx)(_,{canManageCatalog:a,onSendCatalog:i,onOpenCollections:r,onOpenMerchantDetailsForm:s,onOpenSettings:d})]})};var l=o(551737),a=n(o(568064)),i=o(408139),r=o(978820),s=n(o(662371)),c=o(925840),d=o(160811),u=o(471174),f=o(646346),p=n(o(23217)),h=o(548360),g=o(785893);function _(e){let{canManageCatalog:t,onSendCatalog:o,onOpenCollections:n,onOpenMerchantDetailsForm:l,onOpenSettings:c}=e;return t?(0,g.jsx)(f.MenuBarItem,{testid:"menu-bar-menu",icon:(0,g.jsx)(p.default,{name:"menu"}),title:a.default.t(451),children:(0,g.jsxs)(d.Dropdown,{type:d.MenuType.DropdownMenu,flipOnRTL:!0,dirX:d.DirX.LEFT,children:[(0,g.jsx)(u.DropdownItem,{testid:"mi-foward menu-item",action:o,children:a.default.t(312)}),n&&(0,g.jsx)(u.DropdownItem,{testid:"mi-collections menu-item",action:n,children:h.fbt._("Collections",null,{hk:"1VWu7A"})}),(0,i.canSeeECommerceComplianceIndiaCountryOriginExemptBusinessJourney)((0,r.getMeUser)().user)&&l&&(0,g.jsx)(u.DropdownItem,{testid:"merchant-details",action:l,children:h.fbt._("Business details",null,{hk:"m9xzp"})},"merchantDetails"),(0,i.canToggleCartOnOff)()&&c&&(0,g.jsx)(u.DropdownItem,{testid:"mi-settings menu-item",action:c,children:h.fbt._("Settings",null,{hk:"2RmHUB"})})]},"CatalogDetailHeader")}):(0,g.jsx)(f.MenuBarItem,{testid:"menu-bar-catalog-link",icon:(0,g.jsx)(s.default,{}),title:h.fbt._("Catalog link",null,{hk:"M36Dw"}),onClick:o})}},542953:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onProductCatalog:t,title:o,subtitle:n,animation:l,sectionTheme:r="padding",shouldLog:s,catalog:u,onProductDetail:p,filterProductId:_,productsToShow:b=6,hideIncompleteRows:x=!1,showProductPlaceholders:I,seeMoreOverlay:E,catalogEntryLabel:j,showShopsLogo:O}=e,A=(0,v.useContext)(h.DrawerContext);(0,v.useEffect)((()=>{s&&null!=u&&(0,a.logBusinessProfileCatalogView)({catalogOwnerWid:u.id,catalogContext:(0,i.getProductCatalogContext)(A)})}),[]);const w=(0,S.jsx)(T,{catalogEntryLabel:j,onClick:()=>t((0,i.getProductCatalogContext)(A),"ContactInfo")}),L=(0,S.jsx)(k,{productsToShow:b,catalog:u,hideIncompleteRows:x,filterProductId:_,seeMoreOverlay:E,showProductPlaceholders:I,onProductThumbClick:(e,o)=>e?t((0,i.getProductCatalogContext)(A),"ContactInfo"):(e=>{s&&(0,a.logProfileProductClick)({product:(0,m.unproxy)(e),catalogContext:(0,i.getProductCatalogContext)(A)}),p(e)})(o),onProductImageClick:()=>t((0,i.getProductCatalogContext)(A),"ContactInfo")}),M=n?(0,S.jsx)(d.default,{xstyle:P.subtitle,children:n}):null,N=(0,S.jsxs)(c.FlexRow,{align:"center",children:[M,(0,S.jsx)(d.default,{children:(0,S.jsx)(f.default,{xstyle:P.chevron,name:"chevron-right-alt",directional:!0})})]});return(0,S.jsxs)(g.default,{title:o||C.fbt._("Products",null,{hk:"3Ky71N"}),titleOnClick:()=>t((0,i.getProductCatalogContext)(A),"ContactInfo"),subtitle:N,theme:r,animation:l,children:[L,w,!0===O?(0,S.jsx)(y,{}):null]})};var l=o(408139),a=o(277975),i=o(397567),r=o(303013),s=n(o(39770)),c=o(429623),d=n(o(748846)),u=o(860263),f=n(o(23217)),p=n(o(701784)),h=o(427394),g=n(o(833308)),_=o(105641),m=o(118146),C=o(548360),v=o(667294),b=n(o(156720)),S=o(785893);const P={addIcon:{position:"g0rxnol2",width:"d0st09ow",height:"bbl9m3t3",paddingBottom:"aus7m8kn",marginTop:"tt8xd2xn",marginEnd:"bugiwsl0",marginBottom:"or9x5nie",marginStart:"svoq16ka",borderTop:"rom324v9",borderEnd:"na7ur5ty",borderBottom:"gjeyj30g",borderStart:"bmro6pka",borderTopStartRadius:"l147y7tb",borderTopEndRadius:"mjscftrx",borderBottomEndRadius:"fqwk616h",borderBottomStartRadius:"pkud3j3x",":before":{position:"oxaw94s0",top:"ijeufx4s",start:"meq75apj",display:"oa3lyrek",width:"slvs4faj",height:"jaq0b63r",content:"lij4d1x3",background:"nkmjymgc",transform:"k95pjfv1"},":after":{position:"dkvli2l0",top:"qi2a0yje",start:"bunkm0yn",display:"b0f5vxaq",width:"qbfuvgfc",height:"i0r7mfoh",content:"k15o3o4i",background:"fji5f4ri",transform:"cai600lj"}},largeGallerySpacing:{width:"b8z6cu80",height:"bbl9m3t3",marginEnd:"jnwc1y2a",marginBottom:"qrsyb3yy"},placeholderThumb:{width:"d0st09ow",height:"fujac5jc",paddingBottom:"lxvt2vq0",marginTop:"tt8xd2xn",marginEnd:"bugiwsl0",marginBottom:"or9x5nie",marginStart:"svoq16ka",backgroundColor:"o27ac25e",borderTopStartRadius:"l147y7tb",borderTopEndRadius:"mjscftrx",borderBottomEndRadius:"fqwk616h",borderBottomStartRadius:"pkud3j3x"},subtitle:{marginTop:"tt8xd2xn",marginEnd:"q471nw87",marginBottom:"mpdn4nr2",marginStart:"svoq16ka",fontSize:"f8jlpxt4",color:"sbs3osm6"},catalogEntryButton:{marginTop:"iin4x6c7",marginEnd:"jnwc1y2a",marginBottom:"mpdn4nr2",marginStart:"svoq16ka",textAlign:"qfejxiq4"},shopsLogo:{marginTop:"qt60bha0",textAlign:"qfejxiq4"},chevron:{color:"cs9t9or5"}};function T(e){let{catalogEntryLabel:t,onClick:o}=e;return null==t?null:(0,S.jsx)("div",{className:(0,b.default)(P.catalogEntryButton),children:(0,S.jsx)(s.default,{testid:"catalog-entry-button",type:"secondary",onClick:o,children:t})})}function y(){return(0,S.jsx)("div",{className:(0,b.default)(P.shopsLogo),children:(0,S.jsx)(f.default,{name:"fbshops",display:"inline"})})}function k(e){let t,o,{productsToShow:n,catalog:a,hideIncompleteRows:i,filterProductId:s,seeMoreOverlay:c,showProductPlaceholders:d,onProductThumbClick:f,onProductImageClick:h}=e,g=[],m=n;if((0,l.canSeeBizProfileV3)()&&(o="largeGallerySpacing"),null!=a?(t=a.productCollection,g=a.productCollection.getProductModels(),i&&g.length>3&&(m=Math.min(n,g.length-g.length%3)),g=g.slice(0,m+1),g=g.filter((e=>e.id.toString()!==s)).map(((e,t)=>{var n;const l=null===(n=e.getPreviewImage())||void 0===n?void 0:n.mediaData;if(!l)return(0,S.jsx)(S.Fragment,{});let i;c&&t===m-1&&a.productCollection.length>m-1&&(i=C.fbt._("See more",null,{hk:"450jnd"}));return(0,S.jsx)(r.ProductThumb,{onClick:()=>f(null!=i,e),mediaData:l,overlayContent:i,theme:o},e.id.toString())})).slice(0,m)):(t=new _.ProductCollection,t.add({id:"_ph"})),!g.length&&!d)return null;let v,b=P.addIcon;for(;d&&g.length<m;)g.push((0,S.jsx)(p.default,{onClick:h,title:C.fbt._("Add product",null,{hk:"3gdovw"}),xstyle:[b,"largeGallerySpacing"===o&&P.largeGallerySpacing],children:(0,S.jsx)(S.Fragment,{})},`_ph${g.length}`)),b=P.placeholderThumb;return(0,l.canSeeBizProfileV3)()&&(v="space-between"),(0,S.jsx)(u.MediaGalleryView,{productMedias:g,mediaCollection:t,justify:v})}},7532:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=o(32266),a=o(914597),i=n(o(500786)),r=o(277975),s=o(397567),c=n(o(744356)),d=o(288984),u=o(812176),f=n(o(335400)),p=n(o(426609)),h=n(o(60453)),g=n(o(69637)),_=o(427394),m=o(994790),C=n(o(651628)),v=o(548360),b=o(667294),S=n(o(156720)),P=o(785893);const T={paddingTop:"i5tg98hk",paddingEnd:"iffbo4e8",paddingBottom:"aiput80m",paddingStart:"khscay3k",lineHeight:"qg52vu03"},y="catalog-link-anchor";function k(e,t){const{onBack:o,onCancel:n,catalog:k,contact:x,prompt:I,centerDrawer:E,onSend:j}=e,O=(0,b.useContext)(_.DrawerContext),A=()=>{a.ModalManager.open((0,P.jsx)(f.default,{catalog:k,onSend:j}),{transition:"modal-flow"}),(0,r.logShareCatalogViaWALinkClick)({catalogOwnerWid:k.id,catalogContext:(0,s.getProductCatalogContext)(O)})},w=(0,P.jsx)(d.DetailImage,{id:x.id,size:82,quality:d.DetailImageQuality.High});let L,M;return E&&(L="labels",M="center-column"),(0,P.jsxs)(h.default,{ref:t,theme:L,children:[(0,P.jsx)(m.DrawerHeader,{testid:"catalog-link-title",title:v.fbt._("Catalog link",null,{hk:"M36Dw"}),onBack:o,onCancel:n,type:m.DRAWER_HEADER_TYPE.SMALL}),(0,P.jsxs)(g.default,{theme:M,children:[(0,P.jsx)("div",{className:(0,S.default)(T),children:I}),(0,P.jsx)(c.default,{image:w,primary:(0,P.jsx)(u.Name,{contact:x,useVerifiedName:!0}),theme:"identity",secondary:(0,P.jsx)(i.default,{id:y,href:(0,l.createCatalogLink)(k.id.user),onClick:e=>{e.preventDefault(),A()},noHandle:!0})}),(0,P.jsx)(C.default,{onClick:A}),(0,P.jsx)(p.default,{elementId:y,onClick:()=>{(0,r.logShareCatalogCopyLinkClick)({catalogOwnerWid:k.id,catalogContext:(0,s.getProductCatalogContext)(O)})}})]})]},"catalog-link-drawer")}var x=(0,b.forwardRef)(k);t.default=x},217986:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return i.apply(this,arguments)};var l=n(o(348926)),a=o(493581);function i(){return(i=(0,l.default)((function*(e){var t;let o=a.BusinessProfileCollection.get(e);if(!o||o.stale){const t=yield a.BusinessProfileCollection.update(e);o=Array.isArray(t)?t[0]:t}return(null===(t=o.profileOptions)||void 0===t?void 0:t.cartEnabled)||!1}))).apply(this,arguments)}},411466:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{contactId:t,onSendProduct:o,onReportProduct:n,onProductLinkClick:g,onProductMoreInformation:_,onCartClick:m,cartCount:C,catalogId:v}=e,b=m&&null!=v?(0,h.jsx)(s.CartIconMenuBarItem,{cartCountText:(0,l.isNumber)(C)&&C>0?C.toString():void 0,onClick:m,catalogOwnerJid:v}):null;return(0,h.jsxs)(h.Fragment,{children:[b,(0,h.jsx)(u.MenuBarItem,{testid:"menu-bar-product-link",icon:(0,h.jsx)(r.default,{}),title:p.fbt._("Product link",null,{hk:"1RIlvV"}),onClick:g}),(0,h.jsx)(u.MenuBarItem,{testid:"menu-bar-menu",icon:(0,h.jsx)(f.default,{name:"menu"}),title:a.default.t(451),children:(0,h.jsxs)(c.Dropdown,{type:c.MenuType.DropdownMenu,flipOnRTL:!0,dirX:c.DirX.LEFT,children:[(0,h.jsx)(d.DropdownItem,{testid:"mi-send menu-item",action:o,children:p.fbt._("Send product",null,{hk:"1wkzue"})}),(0,i.canSeeECommerceComplianceIndiaSoftEnforcement)(t)&&(0,h.jsx)(d.DropdownItem,{testid:"mi-send menu-item",action:_,children:p.fbt._("More information",null,{hk:"2JHvi1"})}),(0,h.jsx)(d.DropdownItem,{testid:"mi-report menu-item",action:n,children:p.fbt._("Report product",null,{hk:"1jgCyX"})})]},"ProductDetailHeader")})]})};var l=o(551737),a=n(o(568064)),i=o(408139),r=n(o(662371)),s=o(925840),c=o(160811),d=o(471174),u=o(646346),f=n(o(23217)),p=o(548360),h=o(785893)},414375:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseErrorState=function(e,t){if(e instanceof l.Unmount);else if(e instanceof n.ServerStatusCodeError)"not_found"===e.status||404===e.status?t("NOT_FOUND"):(t("ERROR"),__LOG__(3)`parseErrorState:Failed to fetch from server`);else{if(!(e instanceof n.WebdDrop))throw t("ERROR"),e;t("ERROR"),__LOG__(3)`parseErrorState:Failed to fetch due to WebdDrop`}};var n=o(492574),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var o=a(t);if(o&&o.has(e))return o.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var r=l?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(n,i,r):n[i]=e[i]}n.default=e,o&&o.set(e,n);return n}(o(435232));function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,o=new WeakMap;return(a=function(e){return e?o:t})(e)}},961055:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{fetchState:t}=e;switch(t){case"NONE":case"SUCCESS":return null;case"PENDING":return(0,s.jsxs)("div",{className:(0,r.default)(c),children:[(0,s.jsx)(l.Spinner,{size:14,color:l.colorOptions.highlight}),(0,s.jsx)(a.TextSpan,{className:(0,r.default)(d,u),theme:"small",children:i.fbt._("Waiting for network",null,{hk:"3I2DtN"})})]});case"NOT_FOUND":case"ERROR":return(0,s.jsx)("div",{className:(0,r.default)(c),children:(0,s.jsx)(a.TextSpan,{className:(0,r.default)(d),theme:"small",color:"danger",children:"NOT_FOUND"===t?i.fbt._("This product or service has been removed",null,{hk:"3mE1ld"}):i.fbt._("Something went wrong",null,{hk:"7C9hw"})})});default:throw new Error(`invalid fetchState ${t}`)}};var l=o(111054),a=o(113923),i=o(548360),r=n(o(156720)),s=o(785893);const c={position:"lhggkp7q",zIndex:"nbczt5ty",boxSizing:"cm280p3y",display:"p357zi0d",alignItems:"gndfcl4n",justifyContent:"ac2vgrno",width:"ln8gz9je",paddingTop:"fbgy3m38",paddingEnd:"ft2m32mm",paddingBottom:"oq31bsqd",paddingStart:"nu34rnf1",backgroundColor:"ihvf49ua",boxShadow:"g07l9dru",opacity:"bs7a17vp",transitionDelay:"kji9i36c",transitionTimingFunction:"bkifpc9x"},d={marginTop:"tt8xd2xn",marginEnd:"spjzgwxb",marginBottom:"mpdn4nr2",marginStart:"a3oefunm",fontWeight:"hnx8ox4h"},u={color:"evzurl1e"}},662371:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.jsx)(l.default,{name:"link",className:(0,a.default)(r.linkIcon,"inherit-color"===e.theme&&r.inheritColor)})};var l=n(o(23217)),a=n(o(156720)),i=o(785893);const r={linkIcon:{color:"svlsagor"},inheritColor:{color:"gtscxtjd"}}},500786:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{id:t,href:o,onClick:n,noHandle:c}=e;return(0,i.jsx)("span",{className:(0,a.default)(r),children:(0,i.jsx)(l.SelectableLink,{id:t,href:o,className:(0,a.default)(s),selectable:!0,onClick:n,"data-nohandle":c,children:o})})};var l=o(552596),a=n(o(156720)),i=o(785893);const r={wordWrap:"b6f1x6w7",whiteSpace:"hmy10g0s"},s={color:"e1vllz7m"}},547217:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleCollectionAppeal=function(){return x.apply(this,arguments)},t.handleCollectionDelete=function(e,t,o){return new Promise(((n,l)=>{d.ModalManager.open((0,P.jsx)(v.default,{title:S.fbt._("Delete Collection",null,{hk:"2y3JZ4"}),okText:S.fbt._("OK",null,{hk:"2KEeHb"}),cancelText:S.fbt._("Cancel",null,{hk:"H0gNq"}),onOK:()=>{d.ModalManager.close(),function(){return k.apply(this,arguments)}(e,t,o).then((e=>n(e))).catch((e=>l(e)))},onCancel:()=>{d.ModalManager.close(),n(!1)},children:(0,P.jsx)("div",{children:S.fbt._("When you delete this collection, items in the collection will not be deleted.",null,{hk:"192Jcv"})})}))}))},t.handleCollectionReorder=function(){return j.apply(this,arguments)},t.handleCollectionSave=function(e,t,o,n,l,a){let i;p.QPL.markerPoint(f.QuickLogMarkerId.WHATSAPP_COLLECTION_EDIT,"datasource_start"),i=t?(0,u.editCollection)(t.id.toString()||"",o===t.name?void 0:o,!1,n.map((e=>e.id.toString())),l.map((e=>e.id.toString())),a.session.toString()).then((a=>(p.QPL.markerPoint(f.QuickLogMarkerId.WHATSAPP_COLLECTION_EDIT,"datasource_end"),t.name=o,t.reviewStatus=a.reviewStatus,e.collections.replaceId(t.id,a.id),0===n.length&&0===l.length||(t.productCollection.reset(),t.afterCursor=void 0,e.collections.reset(),e.collections.afterCursor=""),!0))):(0,u.createCollection)(o,n.map((e=>e.id.toString())),a.session.toString()).then((t=>(p.QPL.markerPoint(f.QuickLogMarkerId.WHATSAPP_COLLECTION_EDIT,"datasource_end"),(0,m.logCollectionCreated)({catalogContext:a,collectionId:t.id,productCount:n.length}),e.collections.reset(),e.collections.afterCursor="",!0)));return i.catch((e=>{const t=e=>{h.ToastManager.open((0,P.jsx)(C.Toast,{msg:e,id:(0,C.genId)("catalog_save_collection_failed")}))};let o=S.fbt._("Failed to save collection",null,{hk:"3Chwhp"});if("not-acceptable"===e.text)return"products"===e.fieldName&&"duplicate"===e.fieldReason&&(o=S.fbt._("You already have a collection with this group of items. Add or delete items to make a different group.",null,{hk:"1fZXaY"})),"collection"===e.fieldName&&"empty"===e.fieldReason&&(o=S.fbt._("A collection must have at least one item in it",null,{hk:"39rLHR"})),t(o),!1;throw __LOG__(4,!0,new Error,!0)`Failed to save collection, error: ${e}`,SEND_LOGS("Saving collection failed"),t(o),e}))},t.handleProductDelete=function(e,t,o,n){return(0,_.logDeleteProductClick)(t,1,o),new Promise(((l,a)=>{d.ModalManager.open((0,P.jsx)(v.default,{title:S.fbt._("Delete Item",null,{hk:"20DBg1"}),okText:S.fbt._("OK",null,{hk:"2KEeHb"}),cancelText:S.fbt._("Cancel",null,{hk:"H0gNq"}),onOK:()=>{d.ModalManager.close(),p.QPL.markerStart(f.QuickLogMarkerId.WHATSAPP_PRODUCT_DELETE,{annotations:{string:{EntryPoint:n}}}),function(){return T.apply(this,arguments)}(e,t,o).then((e=>{p.QPL.markerEnd(f.QuickLogMarkerId.WHATSAPP_PRODUCT_DELETE,i.QuickLogActionType.SUCCESS),l(e)})).catch((e=>{p.QPL.markerEnd(f.QuickLogMarkerId.WHATSAPP_PRODUCT_DELETE,i.QuickLogActionType.FAIL),a(e)}))},onCancel:()=>{d.ModalManager.close(),l(!1)},children:(0,P.jsx)("div",{children:S.fbt._("Are you sure you want to delete this item from your catalog?",null,{hk:"2WwNSA"})})}))}))},t.handleProductVisibilityChange=function(e,t,o,n){const l=t.id.toString(),a=!t.isHidden;a?(0,_.logCatalogProductHideClick)(l,o):(0,_.logCatalogProductShowClick)(l,o);return new Promise(((r,s)=>{const c=t.isHidden?S.fbt._("Show item in your catalog?",null,{hk:"VfDKM"}):S.fbt._("Hide item in your catalog?",null,{hk:"1KmslI"});d.ModalManager.open((0,P.jsx)(v.default,{okText:S.fbt._("OK",null,{hk:"2KEeHb"}),cancelText:S.fbt._("Cancel",null,{hk:"H0gNq"}),onOK:()=>{p.QPL.markerStart(f.QuickLogMarkerId.WHATSAPP_PRODUCT_SET_VISIBLE,{annotations:{string:{EntryPoint:n}}}),d.ModalManager.close(),function(){return y.apply(this,arguments)}(e,t).then((()=>{p.QPL.markerEnd(f.QuickLogMarkerId.WHATSAPP_PRODUCT_SET_VISIBLE,i.QuickLogActionType.SUCCESS),a?(0,_.logCatalogProductHideSuccess)(l,o):(0,_.logCatalogProductShowSuccess)(l,o),r(!0)})).catch((e=>{p.QPL.markerEnd(f.QuickLogMarkerId.WHATSAPP_PRODUCT_SET_VISIBLE,i.QuickLogActionType.FAIL),a?(0,_.logCatalogProductHideFailed)(l,o):(0,_.logCatalogProductShowFailed)(l,o),s(e)}))},onCancel:()=>{d.ModalManager.close(),a?(0,_.logCatalogProductHideCancelled)(l,o):(0,_.logCatalogProductShowCancelled)(l,o),r(!1)},children:(0,P.jsx)("div",{children:c})}))}))};var l=n(o(348926)),a=o(450796),i=o(451897),r=o(492574),s=o(895697),c=o(923082),d=o(914597),u=o(409465),f=o(665397),p=o(669393),h=o(694816),g=o(621374),_=o(277975),m=o(435054),C=o(950452),v=n(o(452665)),b=o(105641),S=o(548360),P=o(785893);function T(){return(T=(0,l.default)((function*(e,t,o){try{return yield(0,s.deleteProducts)([t.id.toString()]),(0,_.logDeleteProductSuccess)(t,1,o),e.productCollection.evictImagesFromCache(t.id.toString()),e.productCollection.remove(t.id.toString()),e.collections&&e.collections.forEach((e=>e.productCollection.remove(t.id.toString()))),!0}catch(e){return(0,a.filteredCatch)(r.ServerStatusCodeError,(e=>((0,_.logDeleteProductFailed)(t,1,o,e.statusCode),h.ToastManager.open((0,P.jsx)(C.Toast,{msg:S.fbt._("Failed to delete product",null,{hk:"18E03X"}),id:(0,C.genId)("catalog_delete_product_failed")})),!1)))(e)}}))).apply(this,arguments)}function y(){return(y=(0,l.default)((function*(e,t){yield(0,g.productVisibilitySet)([{productId:t.id.toString(),isHidden:!t.isHidden}]),t.isHidden=!t.isHidden;[e.productCollection,...(e.collections||[]).map((e=>e.productCollection))].forEach((e=>{const o=e.get(t.id);o&&(o.isHidden=t.isHidden)}))}))).apply(this,arguments)}function k(){return(k=(0,l.default)((function*(e,t,o){try{return yield(0,u.deleteCollection)(t.id.toString(),o.session.sessionId.toString()),e.collections.remove(t.id.toString()),(0,m.logCollectionDeleted)({catalogContext:o,collectionId:t.id}),!0}catch(e){return(0,a.filteredCatch)(r.ServerStatusCodeError,(e=>(__LOG__(4,!0,new Error,!0)`Failed to delete collection, error: ${e}`,SEND_LOGS("Deleteing collection failed"),h.ToastManager.open((0,P.jsx)(C.Toast,{msg:S.fbt._("Failed to delete collection",null,{hk:"S7UrR"}),id:(0,C.genId)("catalog_delete_product_failed")})),!1)))(e)}}))).apply(this,arguments)}function x(){return(x=(0,l.default)((function*(e,t){p.QPL.markerPoint(f.QuickLogMarkerId.WHATSAPP_COLLECTION_APPEAL,"datasource_start"),yield(0,u.appealCollection)(e.id.toString(),t),e.set({canAppeal:!1,reviewStatus:b.PRODUCT_REVIEW_STATUS.PENDING}),p.QPL.markerPoint(f.QuickLogMarkerId.WHATSAPP_COLLECTION_APPEAL,"datasource_end")}))).apply(this,arguments)}const I={OUT_OF_SYNC:{title:S.fbt._("Changes cannot be saved",null,{hk:"2N3tQ7"}),description:S.fbt._("Please refresh and try again.",null,{hk:"3gfRqz"}),okText:S.fbt._("Reload",null,{hk:"3hzNTy"})},SERVER_ERROR:{title:S.fbt._("Error",null,{hk:"1jfaqb"}),description:S.fbt._("Something went wrong. Please try again.",null,{hk:"CZwf"}),okText:S.fbt._("OK",null,{hk:"2jkNuT"})},HTTP_NETWORK_ERROR:{title:S.fbt._("No internet connection",null,{hk:"4psTpe"}),description:S.fbt._("Check your internet connection and try again.",null,{hk:"2QcT2T"}),okText:S.fbt._("OK",null,{hk:"3si9C7"})}},E=e=>e instanceof c.HttpNetworkError?I.HTTP_NETWORK_ERROR:e instanceof u.CollectionReorderError?I.OUT_OF_SYNC:I.SERVER_ERROR;function j(){return(j=(0,l.default)((function*(e,t){try{const o=yield(0,u.reorderCollection)(e);return o&&(0,m.logCollectionReorder)({catalogContext:t,movesCount:e.length}),o}catch(e){const{title:t,description:o,okText:n}=E(e);return new Promise(((l,a)=>{d.ModalManager.open((0,P.jsx)(v.default,{title:t,okText:n,onOK:()=>{d.ModalManager.close(),e instanceof c.HttpNetworkError?a(e):l(!1)},children:(0,P.jsx)("div",{children:o})}),{blockClose:!0})}))}}))).apply(this,arguments)}},33889:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onClick:t,testid:o="add-item"}=e,n=(0,r.default)(c.addItemButton,"default"===e.theme&&c.themeDefault,"in-list"===e.theme&&c.themeInList,"collections"===e.theme&&c.themeCollections),d=(0,s.jsx)(a.default,{title:i.fbt._("Add new item",null,{hk:"2Tc6p3"}),onClick:()=>{},xstyle:c.addIcon,children:(0,s.jsx)(s.Fragment,{})});return(0,s.jsx)(l.default,{theme:"add-item",image:d,customImage:!0,primary:e.title||i.fbt._("Add new item",null,{hk:"2Tc6p3"}),className:n,onClick:t,idle:e.idle,testid:o})};var l=n(o(744356)),a=n(o(701784)),i=o(548360),r=n(o(156720)),s=o(785893);const c={addIcon:{position:"g0rxnol2",width:"o22r6p4i",height:"dng4fqht",borderTop:"btoh1681",borderEnd:"sngpozrj",borderBottom:"c2eze1zb",borderStart:"bd2x2sk5",borderTopStartRadius:"l147y7tb",borderTopEndRadius:"mjscftrx",borderBottomEndRadius:"fqwk616h",borderBottomStartRadius:"pkud3j3x",":focus":{borderTopStartRadius:"mmjxyicr",borderTopEndRadius:"r1jx4bdh",borderBottomEndRadius:"f9yclydc",borderBottomStartRadius:"mtzt60z0",boxShadow:"esbo3we0"},"::before":{position:"jiaumjzp",top:"iu8zqbur",left:"c4kjmepz",display:"chh99fau",width:"ln1ej6zg",height:"i0a739jv",content:"ckfn5qle",backgroundColor:"t4c1fkc8",transform:"bsbo06yw"},"::after":{position:"tkubpkrc",top:"khfyavfg",left:"nly7wueh",display:"l1wvjj35",width:"dbiwaw4z",height:"l9a7srmz",content:"lw9p9708",backgroundColor:"sadoqatt",transform:"n2obx7p9"}},addItemButton:{borderTop:"q4zabkcz"},themeDefault:{paddingTop:"pxvlsfnc",paddingEnd:"f9ovudaz",paddingBottom:"n3bptxsn",paddingStart:"gx1rr48f",marginTop:"dj1c3cmq",marginEnd:"jnwc1y2a",marginBottom:"mpdn4nr2",marginStart:"svoq16ka"},themeInList:{paddingTop:"fbgy3m38",paddingEnd:"kyc7k6mt",paddingBottom:"oq31bsqd",paddingStart:"f78eapp6"},themeCollections:{paddingTop:"fbgy3m38",paddingEnd:"kyc7k6mt",paddingBottom:"oq31bsqd",paddingStart:"f78eapp6",marginBottom:"inogquss",borderTop:"q4zabkcz",borderBottom:"qmxv8cnq"}}},779174:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.CollectionIntegrityBanner=function(e){const{collection:t,onEditCollection:o}=e,n=()=>{null==o||o(t)},i=()=>{a.ModalManager.open((0,_.jsx)(d.default,{collection:t}))};switch(t.reviewStatus){case f.PRODUCT_REVIEW_STATUS.PENDING:return(0,_.jsxs)("div",{className:(0,g.default)(m.pendingBanner),children:[p.fbt._("This collection is being reviewed. Once it’s approved, your customers will see it in your catalog.",null,{hk:"3DQb07"}),(0,_.jsx)("div",{className:(0,g.default)(m.iconContainerPending),children:(0,_.jsx)(c.default,{name:"info"})})]});case f.PRODUCT_REVIEW_STATUS.REJECTED:return(0,l.canAppealCollections)()?(0,_.jsx)(b,{collection:t,onRename:n,onAppeal:i}):(0,_.jsx)(v,{onRename:n});default:return null}},t.getCollectionIntegrityHeight=function(e){return(0,l.canAppealCollections)()&&e.reviewStatus===f.PRODUCT_REVIEW_STATUS.REJECTED?2*i.PRODUCT_LIST_ITEM_HEIGHT+10:i.PRODUCT_LIST_ITEM_HEIGHT+10};var l=o(408139),a=o(914597),i=o(364481),r=o(936346),s=n(o(499360)),c=n(o(23217)),d=n(o(5970)),u=o(597628),f=o(105641),p=o(548360),h=o(667294),g=n(o(156720)),_=o(785893);const m={iconContainerRejected:{position:"lhggkp7q",end:"h223g3sc",color:"mvxzr2tb",wordBreak:"cw3vfol9"},iconContainerRejectedWithAppeal:{end:"ku3lw4j3"},rejectedBanner:{display:"p357zi0d",alignItems:"gndfcl4n",height:"m9lpqg3r",minHeight:"gc15jzxb",paddingTop:"i5tg98hk",paddingEnd:"rmnzjp8r",paddingBottom:"przvwfww",paddingStart:"khscay3k",marginTop:"o9i7y497",marginBottom:"brac1wpa",overflowX:"gfz4du6o",overflowY:"r7fjleex",fontSize:"dsh4tgtl",lineHeight:"erpdyial",color:"e7al1772",backgroundColor:"io9pg0pp"},rejectedBannerWithAppeal:{display:"p357zi0d",flexDirection:"f8m0rgwh",justifyContent:"ac2vgrno",height:"g4tbm4ed",minHeight:"gc15jzxb",paddingTop:"i5tg98hk",paddingEnd:"sjajxv0r",paddingBottom:"przvwfww",paddingStart:"khscay3k",marginTop:"o9i7y497",marginBottom:"brac1wpa",overflowX:"gfz4du6o",overflowY:"r7fjleex",fontSize:"dsh4tgtl",lineHeight:"erpdyial",color:"e7al1772",backgroundColor:"io9pg0pp"},rejectedBannerDarkBackground:{backgroundColor:"og7unhan"},pendingBanner:{display:"p357zi0d",alignItems:"gndfcl4n",height:"m9lpqg3r",minHeight:"gc15jzxb",paddingTop:"i5tg98hk",paddingEnd:"rmnzjp8r",paddingBottom:"przvwfww",paddingStart:"khscay3k",marginTop:"o9i7y497",overflowX:"gfz4du6o",overflowY:"r7fjleex",fontSize:"dsh4tgtl",lineHeight:"erpdyial",color:"e7al1772",wordBreak:"cw3vfol9",backgroundColor:"a5fn8qve"},iconContainerPending:{position:"lhggkp7q",end:"h223g3sc"}};function C(e){return(0,_.jsx)("div",{className:(0,g.default)(m.iconContainerRejected,e.withAppeal&&m.iconContainerRejectedWithAppeal),children:(0,_.jsx)(c.default,{name:"info"})})}function v(e){let{onRename:t}=e;const{theme:o}=(0,h.useContext)(u.ThemeContext);return(0,_.jsxs)("div",{className:(0,g.default)(m.rejectedBanner,"dark"===o&&m.rejectedBannerDarkBackground),children:[p.fbt._("This collection wasn’t approved because it doesn’t follow our guidelines.",null,{hk:"4bjvNq"}),(0,_.jsx)(s.default,{onClick:t,children:p.fbt._("Rename",null,{hk:"2U6ctb"})}),(0,_.jsx)(C,{withAppeal:!1})]})}function b(e){let{collection:t,onRename:o,onAppeal:n}=e;const l=(t.rejectReason||"other_violation").toLowerCase(),a=(0,r.getRejectedCollectionCopy)(l,t.commerceUrl),{theme:i}=(0,h.useContext)(u.ThemeContext),c="dark"===i,d=(0,_.jsx)(s.default,{onClick:o,children:p.fbt._("rename the collection",null,{hk:"2j5eIB"})});if(t.canAppeal){const e=(0,_.jsx)(s.default,{onClick:n,children:p.fbt._("request another review",null,{hk:"2BSEoy"})}),t=p.fbt._("You can {rename_collection_link} or {request_another_review_link}.",[p.fbt._param("rename_collection_link",d),p.fbt._param("request_another_review_link",e)],{hk:"49Nar9"});return(0,_.jsxs)("div",{className:(0,g.default)(m.rejectedBannerWithAppeal,c&&m.rejectedBannerDarkBackground),children:[a.first,(0,_.jsx)("br",{}),t,(0,_.jsx)(C,{withAppeal:!0})]})}const f=p.fbt._("You can {rename_collection_link}.",[p.fbt._param("rename_collection_link",d)],{hk:"33lrOJ"});return(0,_.jsxs)("div",{className:(0,g.default)(m.rejectedBannerWithAppeal,c&&m.rejectedBannerDarkBackground),children:[a.second,(0,_.jsx)("br",{}),f,(0,_.jsx)(C,{withAppeal:!0})]})}},274259:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onProductDetail:t,onProductShare:o,onCartOpen:n,shareLinks:C,canManageCatalog:v}=e,[b,S]=(0,g.useState)(void 0),P=(0,_.useModelValues)(e.catalog,["productCollection","afterCursor","id","index"]),T=e=>{o&&o(e)};if(!P.productCollection||!P.productCollection.getProductModels(e.canManageCatalog).length)return null;return(0,m.jsx)(u.default,{flatListControllers:[e.flatListController],children:(0,m.jsx)(d.FlatList,{flatListController:e.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:(()=>{const e=void 0!==n;return P.productCollection.getProductModels(v).map((t=>({itemKey:`${t.id.toString()}_${e.toString()}`,product:t})))})(),renderItem:e=>{let{product:o}=e;return(0,m.jsx)(p.DrawerContext.Consumer,{children:e=>{const a=(0,s.getProductCatalogContext)(e);return(0,m.jsx)(c.default,{product:o,onCartOpen:n,onClick:()=>((e,o)=>((0,i.logCatalogListDetailClick)({product:(0,h.unproxy)(e),catalogContext:o}),S(e.id.toString()),t(e)))(o,a),onProductShare:C?T:null,onProductDelete:e=>((e,t)=>{(0,r.handleProductDelete)(P,e,t,"Catalog").then((()=>{e.id===b&&(l.DrawerManager.closeDrawerMid(),S(void 0))}))})(e,a),onProductHideShow:e=>((e,t)=>{(0,r.handleProductVisibilityChange)(P,e,t,"Catalog")})(e,a),canManageCatalog:v})}})},defaultItemHeight:a.PRODUCT_LIST_ITEM_HEIGHT,keyOrder:f.KeyOrder.INVERSE})})};var l=o(141455),a=o(364481),i=o(277975),r=o(547217),s=o(397567),c=n(o(188990)),d=o(747915),u=n(o(944942)),f=o(243882),p=o(427394),h=o(118146),g=o(667294),_=o(735461),m=o(785893)},747105:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.CatalogCategoriesBanner=function(e){let{catalog:t}=e;const{id:o,hasCatalogCategories:n}=(0,c.useModelValues)(t,["id","hasCatalogCategories"]);if((0,s.useEffect)((()=>{null==n&&(0,a.queryCatalogHasCategories)(o).then((e=>{t.set({hasCatalogCategories:e})}))}),[n,o,t]),!1===n||null==n)return null;return(0,d.jsx)(i.TextDiv,{xstyle:[u.banner,l.uiPadding.all16],size:"13",color:"dark",children:r.fbt._("Use WhatsApp on your phone to browse product categories.",null,{hk:"7z4dS"})})};var l=o(128298),a=o(621374),i=o(113923),r=o(548360),s=o(667294),c=(n(o(156720)),o(735461)),d=o(785893);const u={banner:{backgroundColor:"se2m7z6i",display:"p357zi0d",alignItems:"gndfcl4n",borderBottom:"daad4uqs"}}},210805:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,o;const n=(0,p.default)(),[m,C]=(0,f.useState)({state:g.NOT_STARTED}),[v,b]=(0,f.useState)(e.existingPostcode),S=e.existingPostcode===v,P=function(){var t=(0,l.default)((function*(){if("string"==typeof v){C({state:g.IN_PROGRESS});try{const t=yield(0,a.verifyPostcode)(e.catalogId,v);n.aborted||C({state:g.COMPLETED,data:t}),"success"===(null==t?void 0:t.resultCode)&&e.onSuccess()}catch(e){if(__LOG__(4,!0,new Error,!0)`[direct-connection] Updating postcode failed ${e}`,SEND_LOGS("[direct-connection] Updating postcode failed"),n.aborted)return;C({state:g.FAILED})}}}));return function(){return t.apply(this,arguments)}}(),T=(0,f.useCallback)((()=>C({state:g.NOT_STARTED})),[]),y="unserviceable_location"===(null===(t=m.data)||void 0===t?void 0:t.resultCode);let k=null;const x=u.fbt._("Enter a valid Pincode.",null,{hk:"21I4U6"});("invalid_postcode"===(null===(o=m.data)||void 0===o?void 0:o.resultCode)||"string"!=typeof v||0===v.length||0!==v.search("^[0-9]{6}$"))&&(k=x);const I=m.state===g.IN_PROGRESS,E=I||null!=k||S,j=()=>{E||(y?T():P())};return(0,h.jsx)(d.default,{onOK:j,title:y?null:u.fbt._("Change Pincode",null,{hk:"3R9hJZ"}),okDisabled:E,okSpinner:I,okText:y?u.fbt._("OK",null,{hk:"ReE7S"}):u.fbt._("CONTINUE",null,{hk:"3HQEmh"}),onCancel:y?null:e.onCancel,cancelDisabled:I,children:y?(0,h.jsx)(s.Text,{as:"p",testid:"catalog_postcode_change_modal__unservicable-alert",children:u.fbt._("JioMart doesn’t have items available in that area. You can try a different Pincode.",null,{hk:"lB5OT"})}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(s.Text,{as:"p",xstyle:_.infoText,children:u.fbt._("To see JioMart items available in a different area, enter the area’s Pincode.",null,{hk:"3Zntch"})}),(0,h.jsx)(c.TextInput,{testid:"catalog_postcode_change_modal__input",onChange:e=>{T(),b(e)},value:v,managed:!0,editable:!I,managedError:!0,selectOnMount:!0,focusOnMount:!0,error:k,onEnter:()=>{j()}}),(0,h.jsxs)(s.Text,{as:"p",theme:"muted",xstyle:_.privacyText,children:[u.fbt._("By continuing, you agree to share your Pincode and phone number with JioMart. Only JioMart can see your Pincode.",null,{hk:"2XMhtN"})," ",(0,h.jsx)(r.ExternalLink,{href:(0,i.getJioMartPostcodeChangeLearnMoreLink)(),children:u.fbt._("Learn More",null,{hk:"27Rbeo"})})]})]})})};var l=n(o(348926)),a=o(884838),i=o(221310),r=o(912591),s=o(113923),c=o(990011),d=n(o(452665)),u=o(548360),f=o(667294),p=(n(o(156720)),n(o(803409))),h=o(785893);const g=o(76672).Mirrored(["NOT_STARTED","COMPLETED","FAILED","IN_PROGRESS"]),_={infoText:{fontSize:"enbbiyaj",lineHeight:"erpdyial",marginBottom:"t4zgqcuo"},privacyText:{fontSize:"f8jlpxt4",lineHeight:"q5jc98e4",marginTop:"iy2cu22y"}}},570988:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.CatalogPostcodeMenu=function(e){const{postcode:t,postcodeLocationName:o,postcodeSetByUser:n}=(0,S.useModelValues)(e.businessDirectConnection,["postcode","postcodeLocationName","postcodeSetByUser"]),{id:x,hasCatalogCategories:I}=(0,S.useModelValues)(e.catalog,["id","hasCatalogCategories"]),E=!0===n,[j,O]=(0,v.useState)(!1),A=()=>{r.ModalManager.close(),O(!1)},w=()=>{r.ModalManager.open((0,y.jsx)(c.default,{existingPostcode:null!=t?t:"",catalogId:x,onCancel:A,onSuccess:()=>{A(),e.postcodeChangeSuccess()}})),O(!0)},L=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(0,a.delayMs)(e?d.CATALOG_POSTCODE_CHANGE_MODAL_OPEN_DELAY:0).then(w)},[M,N]=(0,v.useState)(null),R=(0,v.useRef)(null),D=(0,v.useRef)(null),B=(0,v.useCallback)((()=>N(null)),[]),[W]=(0,T.useTimeout)(B,d.CATALOG_POSTCODE_MENU_TOOLTIP_DURATION),F=(0,v.useCallback)((()=>{const e=D.current?3*D.current.offsetWidth/4:null;N({menu:(0,y.jsx)("div",{style:"number"==typeof e?{maxWidth:`${e}px`}:null,children:(0,y.jsx)(g.Text,{as:"p",children:C.fbt._("Click to change pincode to see items available in your area",null,{hk:"2p5qlf"})})}),anchor:R.current,dirY:f.DirY.TOP,type:f.MenuType.Tooltip,horizontal:!0,tooltipColorScheme:f.TooltipColorScheme.Highlight})}),[]),[H]=(0,T.useTimeout)((()=>{R.current?(F(),W()):__LOG__(3)`[direct-connection] change postcode tooltip is not shown`}),d.CATALOG_POSTCODE_MENU_TOOLTIP_DELAY);(0,v.useEffect)((()=>{E||((0,i.editPostcodeByDefaultEnabled)()?(()=>{if((0,s.getPostcodeAutoOpenChangePostcodeDone)())return!1;const e=(0,s.getPostcodeAutoOpenChangePostcodeCount)();if("number"==typeof e&&e>=2)return!1;return!0})()&&(L(!0),(0,s.setPostcodeAutoOpenChangePostcodeDone)(!0),(()=>{const e=(0,s.getPostcodeAutoOpenChangePostcodeCount)();(0,s.setPostcodeAutoOpenChangePostcodeCount)("number"==typeof e?e+1:1)})()):(()=>{if((0,s.getPostcodeTooltipViewedInSession)())return!1;const e=(0,s.getPostcodeTooltipViewCount)();if("number"==typeof e&&e>=5)return!1;return!0})()&&((()=>{const e=(0,s.getPostcodeTooltipViewCount)();(0,s.setPostcodeTooltipViewCount)("number"==typeof e?e+1:1)})(),(0,s.setPostcodeTooltipViewedInSession)(!0),H()))}),[]),(0,P.default)((()=>{j&&A()}));const[U,G]=(0,v.useState)(0);(0,v.useEffect)((()=>{!0===I&&G((e=>e+1))}),[I]);const z=M?(0,y.jsx)(_.UIE,{displayName:"CatalogPostcodeTooltip",popable:!0,escapable:!0,requestDismiss:B,dismissOnWindowResize:!0,children:(0,y.jsx)(m.default,{tooltip:M})},U):null;return(0,y.jsxs)("div",(0,l.default)((0,l.default)({className:(0,b.default)(k.container)},(0,u.accessibleClickableButtonProps)({onClick:L})),{},{ref:D,children:[(0,y.jsx)("span",{className:(0,b.default)(k.svgWrapper),children:(0,y.jsx)(h.default,{name:"business-address"})}),(0,y.jsxs)(p.FlexColumn,{ref:R,children:[(0,y.jsx)(g.Text,{as:"p",xstyle:k.postcodeDescription,children:C.fbt._("Deliver to {postcode-of-a-geographic-area}",[C.fbt._param("postcode-of-a-geographic-area",t)],{hk:"1dDn6Y"})}),(0,y.jsx)(g.Text,{as:"p",xstyle:k.postcodeLocationName,theme:"muted",children:E?o:C.fbt._("Click to change Pincode",null,{hk:"37HAka"})}),z]})]}))},t.MAX_TIMES_POSTCODE_CHANGE_TOOLTIP_TO_SHOW=t.MAX_TIMES_POSTCODE_CHANGE_MODAL_AUTO_OPEN=void 0;var l=n(o(81109)),a=o(413959),i=o(471682),r=o(914597),s=o(555452),c=n(o(210805)),d=o(808985),u=o(355712),f=o(160811),p=o(429623),h=n(o(23217)),g=o(113923),_=o(718644),m=n(o(146780)),C=o(548360),v=o(667294),b=n(o(156720)),S=o(735461),P=n(o(955010)),T=o(346428),y=o(785893);const k={container:{display:"p357zi0d",alignItems:"gndfcl4n",backgroundColor:"ihvf49ua",position:"cca4rwve",top:"qq0sjtgm",zIndex:"l355kaf8",boxShadow:"i35u2c65",":hover":{backgroundColor:"os03hap6"}},svgWrapper:{paddingTop:"nlnf8xo7",paddingBottom:"r219jyu0",paddingStart:"nntdgyy8",paddingEnd:"igb3k0ri",width:"i94gqilv",color:"kv0r5hzt"},postcodeDescription:{lineHeight:"erpdyial",fontSize:"enbbiyaj"},postcodeLocationName:{lineHeight:"r5qsrrlp",fontSize:"f8jlpxt4"}};t.MAX_TIMES_POSTCODE_CHANGE_MODAL_AUTO_OPEN=2;t.MAX_TIMES_POSTCODE_CHANGE_TOOLTIP_TO_SHOW=5},808985:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CATALOG_POSTCODE_MENU_TOOLTIP_DURATION=t.CATALOG_POSTCODE_MENU_TOOLTIP_DELAY=t.CATALOG_POSTCODE_CHANGE_MODAL_OPEN_DELAY=void 0;t.CATALOG_POSTCODE_CHANGE_MODAL_OPEN_DELAY=500;t.CATALOG_POSTCODE_MENU_TOOLTIP_DELAY=500;t.CATALOG_POSTCODE_MENU_TOOLTIP_DURATION=3500},54414:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(o(348926)),a=o(451897),i=o(257243),r=o(88555),s=o(634245),c=o(471682),d=o(408139),u=o(665397),f=o(669393),p=o(747105),h=o(570988),g=n(o(844315)),_=o(364481),m=n(o(144043)),C=n(o(217986)),v=o(414375),b=n(o(961055)),S=n(o(33889)),P=n(o(462647)),T=n(o(630855)),y=n(o(329796)),k=o(582145),x=n(o(813712)),I=n(o(292351)),E=n(o(60453)),j=n(o(69637)),O=o(994790),A=n(o(515131)),w=o(900884),L=o(612392),M=o(599989),N=o(548360),R=o(667294),D=n(o(156720)),B=n(o(651799)),W=n(o(859312)),F=n(o(616223)),H=o(735461),U=n(o(290886)),G=n(o(803409)),z=o(785893);const V={header:{flex:"kk3akd72"},list:{flex:"kk3akd72",paddingBottom:"oq31bsqd",overflowX:"gfz4du6o",overflowY:"r7fjleex"},listTopMargin:{marginTop:"dj1c3cmq"}};function q(e){var t;const{cartEnabled:o,contact:n,catalog:l,dataSource:a,handleCartClick:s,onCartClick:c,canManageCatalog:u,businessProfile:f,blockCartInterstitialFn:_,onAddProduct:m,onProductDetail:C,onProductShare:v,onCollectionSeeAll:T,onEditCollection:k,onOpenCollections:E,catalogFlatListControllerRef:j,catalogFetchState:O,directConnectionPostcodeEnabled:A,loadingDirectConnectionInfo:w,businessDirectConnection:L,loadingMore:M,postcodeChangeSuccess:R}=e,B=o&&c?s:void 0;let W,F,H,U;if(u&&m&&(W=(0,z.jsx)(S.default,{onClick:()=>m(),theme:"collections",testid:"add-item"})),l&&u&&k){F=l.productCollection.getProductModels(!0).some((e=>!e.isHidden&&"REJECTED"!==e.reviewStatus))?(0,z.jsx)(S.default,{onClick:()=>{k(null)},theme:"collections",title:N.fbt._("Add new collection",null,{hk:"1DddmB"}),testid:"add-collection"}):null}return l&&a?(H=(0,z.jsx)(g.default,{onCartOpen:B,onProductDetail:C,flatListController:j.current,catalog:l,canManageCatalog:u,shareLinks:u,onProductShare:v,onCollectionSeeAll:T,data:a.getData(),onEditCollection:k}),(0,r.isMDBackend)()&&u&&((0,i.getABPropConfigValue)("web_abprop_nux_cart_interstitial")&&o&&!_()&&(0,x.default)(),U=(0,z.jsx)(I.default,{onOpenCollections:E}))):H=(0,z.jsx)(b.default,{fetchState:O}),(0,z.jsxs)(z.Fragment,{children:[f&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{"data-testid":"catalog-header",className:(0,D.default)(V.header),children:(0,z.jsx)(P.default,{profilePicThumb:n.getProfilePicThumb(),contact:n,businessProfile:f})}),l&&(0,d.catalogCategoriesEnabled)()&&(null===(t=f.directConnection)||void 0===t?void 0:t.enabled)?(0,z.jsx)(p.CatalogCategoriesBanner,{catalog:l}):null,l&&A&&!w&&L&&(0,z.jsx)(h.CatalogPostcodeMenu,{catalog:l,businessDirectConnection:L,postcodeChangeSuccess:R})]}),(0,z.jsxs)("div",{"data-testid":"catalog-items",className:(0,D.default)(V.list,f&&V.listTopMargin),children:[U,W,F,H,M&&(0,z.jsx)(y.default,{})]})]})}function K(e,t){const{catalogId:o,setScrollOffset:n,onCartClick:i,onCatalogLinkClick:r,canManageCatalog:d,canLogQpl:p=!0,isPushed:h=!0,scrollOffset:g,autoUpdate:b,businessProfile:S,blockCartInterstitialFn:P=(()=>!1),onAddProduct:y,onProductDetail:x,onProductShare:I,onCollectionSeeAll:D,onEditCollection:V,onOpenCollections:K,onRemoveProduct:Y,onOpenSettings:Q,onOpenMerchantDetailsForm:J}=e,X=(0,c.enablePostcodeInCatalog)()&&!!S&&(0,w.businessSupportsPostcode)(S),$=(0,G.default)(),Z=(0,W.default)(),ee=(0,B.default)(Z,100),te=(0,F.default)((()=>new T.default)),oe=(0,H.useModelValues)(e.contact,["id"]),ne=(0,R.useMemo)((()=>L.CartCollection.findCart(oe.id.toString())),[oe.id]),[le,ae]=(0,R.useState)(!1),[ie,re]=(0,R.useState)(null),[se,ce]=(0,R.useState)(ne.itemCount),[de,ue]=(0,R.useState)("NONE"),[fe,pe]=(0,R.useState)(null),[he,ge]=(0,R.useState)(null),[_e,me]=(0,R.useState)(!0),Ce=function(){var e=(0,l.default)((function*(e){yield null==e?void 0:e.loadInitialItems(),me(!1)}));return function(){return e.apply(this,arguments)}}(),ve=(0,B.default)((()=>{Z(),null==Y||Y()}),100),[be,Se]=(0,R.useState)(),[Pe,Te]=(0,R.useState)(!1),ye=()=>{const e=p&&h,t=e?u.QuickLogMarkerId.WHATSAPP_CATALOG_COLLECTIONS_VIEW:void 0;M.CatalogCollection.find(o,{markerId:t}).then((t=>{if($.aborted)return;const o=new s.CatalogWithCollectionsDataSource(t,d||!1,_.PRODUCT_LIST_ITEM_HEIGHT,e),n=new s.CatalogListItemScrollHelper(o);re(t),pe(o),ge(n),ue("SUCCESS"),Ce(o).then((()=>{e&&f.QPL.markerEnd(u.QuickLogMarkerId.WHATSAPP_CATALOG_COLLECTIONS_VIEW,a.QuickLogActionType.SUCCESS)})).catch((()=>{e&&f.QPL.markerEnd(u.QuickLogMarkerId.WHATSAPP_CATALOG_COLLECTIONS_VIEW,a.QuickLogActionType.FAIL)})),(e=>{b&&null!=e&&(e.productCollection.on("add",ee),e.productCollection.on("remove",ve),e.collections.on("add",ee),e.collections.on("remove",ee))})(t),void 0!==g&&te.current.setScrollFromStart(g)})).catch((t=>{e&&f.QPL.markerEnd(u.QuickLogMarkerId.WHATSAPP_CATALOG_COLLECTIONS_VIEW,a.QuickLogActionType.FAIL),(0,v.parseErrorState)(t,(e=>{ue(e),me(!1)}))}))},ke=()=>{X?(Te(!0),A.default.getCypher(o).then((e=>{Se(e),Te(!1),ye()}))):ye()};(0,R.useEffect)((()=>{ke(),(0,C.default)(o).then((e=>{ae(e),e&&ne.on("change:cartItemCollection",(()=>ce(ne.itemCount)))}))}),[]);const xe=(0,U.default)(((e,t)=>{null==n||n(t.scrollTop),(null==he?void 0:he.willLoadMore(t))&&me(!0),null==he||he.onScroll(e,t).then((e=>{e&&me(!1)})).catch((e=>{throw me(!1),e}))}),100),Ie=()=>{(0,k.qplStartCartView)("Catalog"),null==i||i(oe.id.toString())},Ee=(0,z.jsx)(m.default,{onSendCatalog:()=>{ie&&r(ie,oe)},onCartClick:le?Ie:void 0,cartCount:se,catalogId:o.toString(),canManageCatalog:d,onOpenCollections:K,onOpenMerchantDetailsForm:J,onOpenSettings:Q,cartIconTheme:e.headerType===O.DRAWER_HEADER_TYPE.LARGE?"inherit-color":null});return(0,z.jsxs)(E.default,{ref:t,theme:"products",onDrop:e.onBack,children:[(0,z.jsx)(O.DrawerHeader,{title:N.fbt._("Catalog",null,{hk:"3YVOSV"}),type:e.headerType||O.DRAWER_HEADER_TYPE.SMALL,onBack:e.onBack,menu:Ee,focusBackOrCancel:!0}),(0,z.jsx)(j.default,{onScroll:e=>{xe(e,e.currentTarget)},flatListControllers:[te.current],children:(0,z.jsx)(q,{cartEnabled:le,contact:oe,handleCartClick:Ie,onProductDetail:x,onCartClick:i,catalog:ie,dataSource:fe,businessProfile:S,canManageCatalog:d,onAddProduct:y,onProductShare:I,onCollectionSeeAll:D,onOpenCollections:K,onEditCollection:V,blockCartInterstitialFn:P,catalogFlatListControllerRef:te,catalogFetchState:de,directConnectionPostcodeEnabled:X,loadingDirectConnectionInfo:Pe,businessDirectConnection:be,loadingMore:_e,postcodeChangeSuccess:()=>{M.CatalogCollection.removeCatalog(o),re(null),pe(null),ge(null),ue("NONE"),me(!0),ke()}})})]})}var Y=(0,R.forwardRef)(K);t.default=Y},919829:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.CollectionContentDrawer=void 0;var l=n(o(348926)),a=o(451897),i=o(634245),r=o(665397),s=o(669393),c=o(435054),d=n(o(844315)),u=o(364481),f=n(o(144043)),p=n(o(217986)),h=o(414375),g=n(o(961055)),_=n(o(33889)),m=o(779174),C=o(397567),v=n(o(630855)),b=n(o(329796)),S=o(582145),P=n(o(60453)),T=n(o(69637)),y=o(427394),k=o(994790),x=o(612392),I=o(599989),E=o(548360),j=o(667294),O=n(o(156720)),A=n(o(651799)),w=n(o(859312)),L=n(o(616223)),M=o(587550),N=o(735461),R=n(o(803409)),D=o(785893);const B={flex:"kk3akd72",paddingBottom:"oq31bsqd",overflowX:"gfz4du6o",overflowY:"r7fjleex"},W={paddingTop:"pxvlsfnc",paddingEnd:"kyc7k6mt",paddingBottom:"n3bptxsn",paddingStart:"f78eapp6",lineHeight:"qg52vu03"};function F(e){const{cartEnabled:t,catalogFetchState:o,collectionFlatListController:n,loadingMore:l,catalog:a,dataSource:i,canManageCatalog:r,collection:s,handleCartClick:c,onProductDetail:u,onCartClick:f,onProductShare:p,onEditCollection:h}=e,C=t&&f?c:void 0;if(!a||!i)return(0,D.jsx)(g.default,{fetchState:o});const v=i.getData();if(0===v.length&&!l&&r&&s)return(0,D.jsx)(D.Fragment,{children:(0,D.jsxs)("div",{className:(0,O.default)(B),children:[(0,D.jsx)(_.default,{theme:"collections",onClick:()=>{null==h||h(s)},testid:"add-collection"}),(0,D.jsx)("div",{className:(0,O.default)(W),children:E.fbt._("This collection won’t be visible to customers until you add at least 1 item",null,{hk:"34nbHb"})})]})});const S=(0,D.jsx)(d.default,{onCartOpen:C,onProductDetail:u,flatListController:n,catalog:a,canManageCatalog:r,shareLinks:r,onProductShare:p,collectionId:null==s?void 0:s.id.toString(),data:v}),P=s?(0,D.jsx)(m.CollectionIntegrityBanner,{collection:s,onEditCollection:h}):void 0;return(0,D.jsx)(D.Fragment,{children:(0,D.jsxs)("div",{className:(0,O.default)(B),children:[P,S,l&&(0,D.jsx)(b.default,{})]})})}const H=(0,j.forwardRef)(((e,t)=>{var o;const{catalogId:n,onCartClick:d,onCatalogLinkClick:g,setScrollOffset:_,canManageCatalog:m,scrollOffset:b,collection:O,onProductDetail:B,onProductShare:W,onEditCollection:H}=e,U=(0,w.default)(),G=(0,R.default)(),z=(0,j.useContext)(y.DrawerContext),V=(0,N.useModelValues)(e.contact,["id"]),q=(0,j.useMemo)((()=>x.CartCollection.findCart(V.id.toString())),[V.id]),K=(0,L.default)((()=>new v.default)),[Y,Q]=(0,j.useState)(!1),[J,X]=(0,j.useState)(null),[$,Z]=(0,j.useState)(q.itemCount),[ee,te]=(0,j.useState)("NONE"),[oe,ne]=(0,j.useState)(null),[le,ae]=(0,j.useState)(null),[ie,re]=(0,j.useState)(!0);(0,M.useListener)(null==O?void 0:O.productCollection,["add","remove"],U),(0,M.useListener)(null==J?void 0:J.productCollection,["add","remove"],U),(0,M.useListener)(null==J?void 0:J.collections,["add","remove"],U),(0,M.useListener)(O,["change:reviewStatus","canAppeal"],U);const se=function(){var e=(0,l.default)((function*(e){yield null==e?void 0:e.loadInitialItems(),re(!1),(0,c.logCollectionSeeAllView)({catalogOwnerJid:n.toString(),catalogContext:(0,C.getProductCatalogContext)(z),collectionId:null==e?void 0:e.collectionId})}));return function(){return e.apply(this,arguments)}}(),ce=()=>{const e=q.itemCount;$!==e&&Z(e)};(0,j.useEffect)((()=>{I.CatalogCollection.find(n).then((e=>{if(G.aborted)return;X(e),te("SUCCESS");const t=new i.SingleCollectionDataSource(e,null==O?void 0:O.id.toString(),m||!1,u.PRODUCT_LIST_ITEM_HEIGHT),o=new i.CatalogListItemScrollHelper(t);ne(t),ae(o),se(t).then((()=>{s.QPL.markerEnd(r.QuickLogMarkerId.WHATSAPP_COLLECTION_VIEW_ALL,a.QuickLogActionType.SUCCESS)})).catch((()=>{s.QPL.markerEnd(r.QuickLogMarkerId.WHATSAPP_COLLECTION_VIEW_ALL,a.QuickLogActionType.FAIL)})),void 0!==b&&K.current.setScrollFromStart(b)})).catch((e=>{s.QPL.markerEnd(r.QuickLogMarkerId.WHATSAPP_COLLECTION_VIEW_ALL,a.QuickLogActionType.FAIL),(0,h.parseErrorState)(e,(e=>{te(e),re(!1)}))})),(0,p.default)(n).then((e=>{Q(e),e&&q.on("all",ce)}))}),[]);const de=()=>{(0,S.qplStartCartView)("Collection"),null==d||d(V.id.toString())},ue=(0,A.default)(((e,t)=>{null==_||_(t.scrollTop),(null==le?void 0:le.willLoadMore(t))&&re(!0),null==le||le.onScroll(e,t).then((e=>{e&&re(!1)})).catch((e=>{throw re(!1),e}))}),100),fe=(0,D.jsx)(f.default,{onSendCatalog:()=>{J&&g(J,V)},onCartClick:Y?de:void 0,cartCount:q.itemCount,catalogId:n.toString(),canManageCatalog:m}),pe=(null===(o=e.collection)||void 0===o?void 0:o.name)||E.fbt._("All Items",null,{hk:"2x8dE2"});return(0,D.jsxs)(P.default,{ref:t,theme:"products",onDrop:e.onBack,children:[(0,D.jsx)(k.DrawerHeader,{title:pe,type:e.headerType||k.DRAWER_HEADER_TYPE.SMALL,onBack:e.onBack,menu:fe}),(0,D.jsx)(T.default,{flatListControllers:[K.current],onScroll:e=>{ue(e,e.currentTarget)},children:(0,D.jsx)(F,{cartEnabled:Y,onCartClick:d,handleCartClick:de,catalog:J,dataSource:oe,catalogFetchState:ee,loadingMore:ie,canManageCatalog:m,collection:O,onProductDetail:B,onProductShare:W,onEditCollection:H,collectionFlatListController:K.current})})]})}));t.CollectionContentDrawer=H,H.displayName="CollectionContentDrawer"},236153:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{collection:t,onSeeAll:o,allItems:n}=e;let m,C;t?({name:m,id:C}=t):n&&(m=d.fbt._("All Items",null,{hk:"2x8dE2"}));const v=(0,f.jsx)(r.TextDiv,{className:(0,u.default)(p),theme:"title",children:(0,f.jsx)(i.EmojiText,{text:m,ellipsify:!0,titlify:!0})});function b(e){!function(e){e.preventDefault(),e.stopPropagation()}(e),(0,s.qplStartCollectionViewAll)("Catalog"),o&&t?o(t):o&&o()}let S;if(t)switch(t.reviewStatus){case c.PRODUCT_REVIEW_STATUS.REJECTED:S=(0,f.jsx)("span",{className:(0,u.default)(g),children:d.fbt._("rejected",null,{hk:"3f3H8P"})})}return(0,f.jsx)(l.default,{primary:v,secondary:S,detail:(0,f.jsx)(a.default,{onClick:b,className:(0,u.default)(h),title:d.fbt._("Collection {collectionName}, see all",[d.fbt._param("collectionName",m)],{hk:"1kqerQ"}),tabIndex:0,children:d.fbt._("See all",null,{hk:"UPjou"})}),theme:"collection-header",idle:!0,className:(0,u.default)(_)},C)};var l=n(o(744356)),a=n(o(499360)),i=o(965417),r=o(113923),s=o(582145),c=o(105641),d=o(548360),u=n(o(156720)),f=o(785893);const p={lineHeight:"erpdyial"},h={lineHeight:"erpdyial"},g={color:"mvxzr2tb"},_={paddingStart:"f78eapp6",marginTop:"o9i7y497",borderTop:"swyb62mu"}},936346:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.getPolicyLink=d,t.getRejectedCollectionCopy=function(e,t){let o;switch(e){case"drugs":return o=s.fbt._("WhatsApp's Commerce Policy for prescription, recreational, or other types of Drugs",null,{hk:"B27ED"}),{first:s.fbt._("This collection wasn't approved because its name violates {collections_rejected_policy_drugs}",[s.fbt._param("collections_rejected_policy_drugs",d(o,t))],{hk:"1ZU364"}),second:s.fbt._("We reviewed this collection again and confirmed its name violates {collections_rejected_policy_drugs}.",[s.fbt._param("collections_rejected_policy_drugs",d(o,t))],{hk:"4pJPwW"})};case"weapons":return o=s.fbt._("WhatsApp's Commerce Policy for Weapons, ammunition, or explosives",null,{hk:"1X972I"}),{first:s.fbt._("This collection wasn't approved because its name violates {collections_rejected_policy_weapons}",[s.fbt._param("collections_rejected_policy_weapons",d(o,t))],{hk:"1RUS3E"}),second:(0,c.jsx)(r.default,{id:188,params:{collections_rejected_policy_weapons:d(o,t)}})};case"animals":return o=s.fbt._("WhatsApp's Commerce Policy for Animals",null,{hk:"3hxXr8"}),{first:s.fbt._("This collection wasn't approved because its name violates {collections_rejected_policy_animals}",[s.fbt._param("collections_rejected_policy_animals",d(o,t))],{hk:"3pIJQl"}),second:s.fbt._("We reviewed this collection again and confirmed its name violates {collections_rejected_policy_animals}.",[s.fbt._param("collections_rejected_policy_animals",d(o,t))],{hk:"jmRZD"})};case"alcohol":return o=s.fbt._("WhatsApp's Commerce Policy for Alcohol",null,{hk:"1G8YGL"}),{first:s.fbt._("This collection wasn't approved because its name violates {collections_rejected_policy_alcohol}",[s.fbt._param("collections_rejected_policy_alcohol",d(o,t))],{hk:"1K5gKG"}),second:s.fbt._("We reviewed this collection again and confirmed its name violates {collections_rejected_policy_alcohol}.",[s.fbt._param("collections_rejected_policy_alcohol",d(o,t))],{hk:"1BLaYk"})};case"gambling":return o=s.fbt._("WhatsApp's Commerce Policy for Real money gambling services",null,{hk:"1zQIeM"}),{first:s.fbt._("This collection wasn't approved because its name violates {collections_rejected_policy_gambling}",[s.fbt._param("collections_rejected_policy_gambling",d(o,t))],{hk:"2sjwfv"}),second:s.fbt._("We reviewed this collection again and confirmed its name violates {collections_rejected_policy_gambling}.",[s.fbt._param("collections_rejected_policy_gambling",d(o,t))],{hk:"2N7wJa"})};case"tobacco":return o=s.fbt._("WhatsApp's Commerce Policy for Tobacco items and related paraphernalia",null,{hk:"EAQLL"}),{first:s.fbt._("This collection wasn't approved because its name violates {collections_rejected_policy_tobacco}",[s.fbt._param("collections_rejected_policy_tobacco",d(o,t))],{hk:"49kjok"}),second:s.fbt._("We reviewed this collection again and confirmed its name violates {collections_rejected_policy_tobacco}.",[s.fbt._param("collections_rejected_policy_tobacco",d(o,t))],{hk:"1hYXEJ"})};case"overtly_sexualized_positioning":return o=s.fbt._("WhatsApp's Commerce Policy for Overtly sexualized positioning",null,{hk:"1oaFbX"}),{first:s.fbt._("This collection wasn't approved because its name violates {collections_rejected_policy_overtly_sexualized_positioning}",[s.fbt._param("collections_rejected_policy_overtly_sexualized_positioning",d(o,t))],{hk:"2imNEe"}),second:s.fbt._("We reviewed this collection again and confirmed its name violates {collections_rejected_policy_overtly_sexualized_positioning}.",[s.fbt._param("collections_rejected_policy_overtly_sexualized_positioning",d(o,t))],{hk:"2Bi73E"})};case"adult":return o=s.fbt._("WhatsApp's Commerce Policy for Adult products or service",null,{hk:"Wf7q5"}),{first:s.fbt._("This collection wasn't approved because its name violates {collections_rejected_policy_adult}",[s.fbt._param("collections_rejected_policy_adult",d(o,t))],{hk:"2sWh94"}),second:s.fbt._("We reviewed this collection again and confirmed its name violates {collections_rejected_policy_adult}.",[s.fbt._param("collections_rejected_policy_adult",d(o,t))],{hk:"4Fv5xc"})};case"supplements":return o=s.fbt._("WhatsApp's Commerce Policy for Unsafe ingestible supplements",null,{hk:"9a4Y2"}),{first:s.fbt._("This collection wasn't approved because its name violates {collections_rejected_policy_supplements}",[s.fbt._param("collections_rejected_policy_supplements",d(o,t))],{hk:"3m5ayk"}),second:s.fbt._("We reviewed this collection again and confirmed its name violates {collections_rejected_policy_supplements}.",[s.fbt._param("collections_rejected_policy_supplements",d(o,t))],{hk:"4g93H8"})};case"body_parts_fluids":return o=s.fbt._("WhatsApp's Commerce Policy for Body parts and fluids",null,{hk:"2EAd21"}),{first:s.fbt._("This collection wasn't approved because its name violates {collections_rejected_policy_body_parts_fluids}",[s.fbt._param("collections_rejected_policy_body_parts_fluids",d(o,t))],{hk:"1fH8mf"}),second:s.fbt._("We reviewed this collection again and confirmed its name violates {collections_rejected_policy_body_parts_fluids}.",[s.fbt._param("collections_rejected_policy_body_parts_fluids",d(o,t))],{hk:"2HB7OE"})};case"healthcare":return o=s.fbt._("WhatsApp's Commerce Policy for Medical and healthcare products",null,{hk:"3vvgOF"}),{first:s.fbt._("This collection wasn't approved because its name violates {collections_rejected_policy_healthcare}",[s.fbt._param("collections_rejected_policy_healthcare",d(o,t))],{hk:"1o5Y8p"}),second:s.fbt._("We reviewed this collection again and confirmed its name violates {collections_rejected_policy_healthcare}.",[s.fbt._param("collections_rejected_policy_healthcare",d(o,t))],{hk:"18tOqv"})};case"misleading":return o=s.fbt._("WhatsApp's Commerce Policy for Business models, goods, items, or services that may be or are fraudulent, misleading, offensive, or deceptive, or may be or are exploitative, inappropriate, or exert undue pressure on targeted groups",null,{hk:"3TyOB"}),{first:s.fbt._("This collection wasn't approved because its name violates {collections_rejected_policy_misleading}",[s.fbt._param("collections_rejected_policy_misleading",d(o,t))],{hk:"1icG7s"}),second:s.fbt._("We reviewed this collection again and confirmed its name violates {collections_rejected_policy_misleading}.",[s.fbt._param("collections_rejected_policy_misleading",d(o,t))],{hk:"4gURah"})};case"real_fake_currency":return o=s.fbt._("WhatsApp's Commerce Policy for Real, virtual, or fake currency",null,{hk:"2XnVq2"}),{first:s.fbt._("This collection wasn't approved because its name violates {collections_rejected_policy_real_fake_currency}",[s.fbt._param("collections_rejected_policy_real_fake_currency",d(o,t))],{hk:"2F8xUp"}),second:s.fbt._("We reviewed this collection again and confirmed its name violates {collections_rejected_policy_real_fake_currency}.",[s.fbt._param("collections_rejected_policy_real_fake_currency",d(o,t))],{hk:"3mr0Qt"})};case"digital_services_products":return o=s.fbt._("WhatsApp's Commerce Policy for Digital and subscription services",null,{hk:"2mvwqB"}),{first:s.fbt._("This collection wasn't approved because its name violates {collections_rejected_policy_digital_services_products}",[s.fbt._param("collections_rejected_policy_digital_services_products",d(o,t))],{hk:"W6Ct0"}),second:s.fbt._("We reviewed this collection again and confirmed its name violates {collections_rejected_policy_digital_services_products}.",[s.fbt._param("collections_rejected_policy_digital_services_products",d(o,t))],{hk:"4gcYAt"})};case"thrid_party_infringements":return o=s.fbt._("WhatsApp's Commerce Policy for Third-Party Infringement",null,{hk:"48SSD"}),{first:s.fbt._("This collection wasn't approved because its name violates {collections_rejected_policy_thrid_party_infringements}",[s.fbt._param("collections_rejected_policy_thrid_party_infringements",d(o,t))],{hk:"2S7xKD"}),second:s.fbt._("We reviewed this collection again and confirmed its name violates {collections_rejected_policy_thrid_party_infringements}.",[s.fbt._param("collections_rejected_policy_thrid_party_infringements",d(o,t))],{hk:"1UXaIr"})};case"unauthorized_media":return o=s.fbt._("WhatsApp's Commerce Policy for Products or items that facilitate or encourage unauthorized access to digital media",null,{hk:"2ldhoF"}),{first:s.fbt._("This collection wasn't approved because its name violates {collections_rejected_policy_unauthorized_media}",[s.fbt._param("collections_rejected_policy_unauthorized_media",d(o,t))],{hk:"2oPAST"}),second:(0,c.jsx)(r.default,{id:187,params:{collections_rejected_policy_unauthorized_media:d(o,t)}})};case"illegal_products":return o=s.fbt._("WhatsApp's Commerce Policy for Illegal products or services",null,{hk:"c5Zjc"}),{first:s.fbt._("This collection wasn't approved because its name violates {collections_rejected_policy_illegal_products}",[s.fbt._param("collections_rejected_policy_illegal_products",d(o,t))],{hk:"41Oqb6"}),second:s.fbt._("We reviewed this collection again and confirmed its name violates {collections_rejected_policy_illegal_products}.",[s.fbt._param("collections_rejected_policy_illegal_products",d(o,t))],{hk:"46TgAV"})};case"hazardous_goods_and_materials":return o=s.fbt._("WhatsApp's Commerce Policy for Business models, goods, items, or services that may be or are fraudulent, misleading, offensive, or deceptive, or may be or are exploitative, inappropriate, or exert undue pressure on targeted groups",null,{hk:"3TyOB"}),{first:s.fbt._("This collection wasn't approved because its name violates {collections_rejected_policy_hazardous_goods_and_materials}",[s.fbt._param("collections_rejected_policy_hazardous_goods_and_materials",d(o,t))],{hk:"smMcx"}),second:s.fbt._("We reviewed this collection again and confirmed its name violates {collections_rejected_policy_hazardous_goods_and_materials}.",[s.fbt._param("collections_rejected_policy_hazardous_goods_and_materials",d(o,t))],{hk:"SdRo5"})};case"stolen_goods":return o=s.fbt._("WhatsApp's Commerce Policy",null,{hk:"1kuvvN"}),{first:s.fbt._("This collection wasn't approved because its name violates {collections_rejected_policy_stolen_goods}",[s.fbt._param("collections_rejected_policy_stolen_goods",d(o,t))],{hk:"4mvVou"}),second:s.fbt._("We reviewed this collection again and confirmed its name violates {collections_rejected_policy_stolen_goods}.",[s.fbt._param("collections_rejected_policy_stolen_goods",d(o,t))],{hk:"1Zd6PC"})};case"human_exploitation_and_sexual_services":return o=s.fbt._("WhatsApp's Commerce Policy",null,{hk:"1kuvvN"}),{first:s.fbt._("This collection wasn't approved because its name violates {collections_rejected_policy_human_exploitation_and_sexual_services}",[s.fbt._param("collections_rejected_policy_human_exploitation_and_sexual_services",d(o,t))],{hk:"4yXqyf"}),second:s.fbt._("We reviewed this collection again and confirmed its name violates {collections_rejected_policy_human_exploitation_and_sexual_services}.",[s.fbt._param("collections_rejected_policy_human_exploitation_and_sexual_services",d(o,t))],{hk:"3XImZQ"})};case"community_standards":return o=s.fbt._("WhatsApp's Business Terms",null,{hk:"1x5ZqO"}),{first:s.fbt._("This collection wasn't approved because its name violates {collections_rejected_policy_community_standards}",[s.fbt._param("collections_rejected_policy_community_standards",d(o,t))],{hk:"2AoLET"}),second:s.fbt._("We reviewed this collection again and confirmed its name violates {collections_rejected_policy_community_standards}.",[s.fbt._param("collections_rejected_policy_community_standards",d(o,t))],{hk:"apmZF"})};case"discrimination":return o=s.fbt._("WhatsApp's Business Terms",null,{hk:"1x5ZqO"}),{first:s.fbt._("This collection wasn't approved because its name violates {collections_rejected_policy_discrimination}",[s.fbt._param("collections_rejected_policy_discrimination",d(o,t))],{hk:"4gmrAW"}),second:s.fbt._("We reviewed this collection again and confirmed its name violates {collections_rejected_policy_discrimination}.",[s.fbt._param("collections_rejected_policy_discrimination",d(o,t))],{hk:"3j6FXO"})};default:return o=s.fbt._("WhatsApp's Commerce Policy",null,{hk:"1kuvvN"}),{first:s.fbt._("This collection wasn't approved because its name violates {collections_rejected_policy_other_violation}",[s.fbt._param("collections_rejected_policy_other_violation",d(o,t))],{hk:"3AiJjt"}),second:s.fbt._("We reviewed this collection again and confirmed its name violates {collections_rejected_policy_other_violation}.",[s.fbt._param("collections_rejected_policy_other_violation",d(o,t))],{hk:"A2Pf5"})}}};var l=n(o(364369)),a=n(o(499360)),i=o(912591),r=n(o(356074)),s=o(548360),c=o(785893);function d(e,t){const o=t||l.default.WA_COMMERCE_POLICY_URL;return(0,c.jsx)(a.default,{href:o,onClick:e=>{e.preventDefault(),(0,i.openExternalLink)(o)},children:e})}},435054:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.logCollectionCreateClicked=function(e){new i.default.CatalogBiz({catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_COLLECTION_CREATE_CLICKED,catalogEntryPoint:e.entryPoint,catalogSessionId:e.session.toString()}).commit()},t.logCollectionCreated=function(e){let{catalogContext:t,collectionId:o,productCount:n}=e;new i.default.CatalogBiz({catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_COLLECTION_CREATED,catalogEntryPoint:t.entryPoint,catalogSessionId:t.session.toString(),productCount:n}).commit()},t.logCollectionDeleted=function(e){let{catalogContext:t,collectionId:o}=e;new i.default.CatalogBiz({catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_COLLECTION_DELETED,catalogEntryPoint:t.entryPoint,catalogSessionId:t.session.toString(),collectionId:o}).commit()},t.logCollectionItemsAssignment=function(e){let{catalogContext:t,collectionId:o,addedCount:n,removedCount:l}=e;n>0&&new i.default.CatalogBiz({catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_COLLECTION_ASSIGN_ITEMS,catalogEntryPoint:t.entryPoint,catalogSessionId:t.session.toString(),productCount:n,collectionId:o}).commit();l>0&&new i.default.CatalogBiz({catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_COLLECTION_UNASSIGN_ITEMS,catalogEntryPoint:t.entryPoint,catalogSessionId:t.session.toString(),productCount:l,collectionId:o}).commit()},t.logCollectionMenuClicked=function(e){new i.default.CatalogBiz({catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_MENU_COLLECTIONS_CLICK,catalogEntryPoint:e.entryPoint,catalogSessionId:e.session.toString()}).commit()},t.logCollectionRenamed=function(e){let{catalogContext:t,collectionId:o}=e;new i.default.CatalogBiz({catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_COLLECTION_DELETED,catalogEntryPoint:t.entryPoint,catalogSessionId:t.session.toString(),collectionId:o}).commit()},t.logCollectionReorder=function(e){let{catalogContext:t,movesCount:o}=e;new i.default.CatalogBiz({catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_COLLECTION_CHANGE_ORDER,catalogEntryPoint:t.entryPoint,catalogSessionId:t.session.toString(),productCount:o}).commit()},t.logCollectionSeeAllView=function(e){let{catalogOwnerJid:t,catalogContext:o,collectionId:n}=e;const c=(0,a.getProductStatsInFetched)(t,n),d=null==c?void 0:c.productIndex,u=null==c?void 0:c.collectionIndex;(0,s.createCatalogViewEvent)((0,l.default)({isOwner:(0,s.isCatalogOwner)({catalogOwnerJid:t}),catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_COLLECTION_IMPRESSION,catalogViewAction:i.default.CATALOG_VIEW_ACTION.ACTION_COLLECTION_IMPRESSION,productIndex:d,collectionIndex:u},(0,r.toDataForCatalogViewEvents)(o))).commit()};var l=n(o(81109)),a=o(634245),i=n(o(471410)),r=o(397567),s=o(614545)},844315:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onProductDetail:t,onProductShare:o,onCartOpen:n,shareLinks:k,onEditCollection:x,onCollectionSeeAll:I,canManageCatalog:E}=e,j=(0,b.default)(),O=(0,T.useModelValues)(e.catalog,["productCollection","collections","afterCursor","id","index"]),A=(0,v.useContext)(_.DrawerContext),w=(0,S.default)((()=>new Set)),L=(0,S.default)((()=>new p.default)),M=e=>{null==o||o(e)},N=e=>{(0,r.handleProductDelete)(O,e,(0,c.getProductCatalogContext)(A),"Collection")},R=e=>{(0,r.handleProductVisibilityChange)(O,e,(0,c.getProductCatalogContext)(A),"Collections")};return(0,P.useListeners)(Array.from(w.current).map((e=>({source:e,eventOrEvents:["change:reviewStatus","canAppeal"],callback:j})))),(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(f.default,{flatListControllers:[L.current],children:(0,y.jsx)(u.FlatList,{flatListController:L.current,direction:"vertical",forceConsistentRenderCount:!1,data:(()=>{const t=void 0!==n,o=e.data||[],l=[];return o.forEach((o=>{const n=o.collection,a=o.product,i=o.allItems;if(n&&a){const e=n.id;l.push({itemKey:`${e.toString()}_${a.id.toString()}_${t.toString()}`,product:a,collectionId:e})}else if(n)w.current.has(n)||w.current.add(n),l.push({itemKey:`${n.id.toString()}_${n.reviewStatus.toString()}`,collection:n}),n.reviewStatus!==m.PRODUCT_REVIEW_STATUS.PENDING&&n.reviewStatus!==m.PRODUCT_REVIEW_STATUS.REJECTED||l.push({itemKey:`${n.id.toString()}_reviewBanner`,collection:n,height:(0,s.getCollectionIntegrityHeight)(n),reviewBanner:!0});else if(i)l.push({itemKey:"view_all",allItems:i});else if(a){const o=e.collectionId||void 0;l.push({itemKey:`${a.id.toString()}_${t.toString()}`,product:a,collectionId:o})}})),l})(),renderItem:e=>{const{collection:o,product:a,allItems:r,reviewBanner:u,collectionId:f}=e;return o?u?(0,y.jsx)(s.CollectionIntegrityBanner,{collection:o,onEditCollection:x}):(0,y.jsx)(l.default,{collection:o,onSeeAll:I}):r?(0,y.jsx)(l.default,{allItems:r,onSeeAll:I}):a?(0,y.jsx)(d.default,{collectionId:f,product:a,onCartOpen:n,onClick:()=>((e,o)=>((0,g.qplStartProductView)("Collection"),(0,i.logCatalogListDetailClick)({product:(0,C.unproxy)(e),catalogContext:(0,c.getProductCatalogContext)(A)}),t(e,o)))(a,f),onProductShare:k?M:null,onProductDelete:N,onProductHideShow:R,theme:"product-of-collection",canManageCatalog:E}):null},defaultItemHeight:a.PRODUCT_LIST_ITEM_HEIGHT,keyOrder:h.KeyOrder.INVERSE})})})};var l=n(o(236153)),a=o(364481),i=o(277975),r=o(547217),s=o(779174),c=o(397567),d=n(o(188990)),u=o(747915),f=n(o(944942)),p=n(o(630855)),h=o(243882),g=o(582145),_=o(427394),m=o(105641),C=o(118146),v=o(667294),b=n(o(859312)),S=n(o(616223)),P=o(587550),T=o(735461),y=o(785893)},170107:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=o(389385),a=o(450796),i=o(451897),r=o(892844),s=o(492574),c=o(895697),d=o(781572),u=o(471682),f=o(408139),p=o(914597),h=o(978820),g=n(o(542953)),_=n(o(217986)),m=n(o(411466)),C=o(277975),v=o(397567),b=n(o(16481)),S=o(871643),P=n(o(233382)),T=n(o(279387)),y=o(932107),k=o(111054),x=o(113923),I=o(582145),E=n(o(452665)),j=n(o(60453)),O=n(o(69637)),A=o(427394),w=o(994790),L=o(493581),M=o(794010),N=o(612392),R=o(599989),D=o(105641),B=o(906822),W=o(118146),F=o(548360),H=o(667294),U=n(o(156720)),G=n(o(859312)),z=n(o(616223)),V=o(587550),q=o(735461),K=n(o(803409)),Y=o(785893);const Q={availabilityBanner:{display:"p357zi0d",paddingTop:"a71rq12o",paddingEnd:"bcymb0na",paddingBottom:"pcbmd69e",paddingStart:"e8k79tju",marginBottom:"mpdn4nr2",lineHeight:"r5qsrrlp",backgroundColor:"ronsgs3n"},text:{marginTop:"tt8xd2xn",marginEnd:"spjzgwxb",marginBottom:"mpdn4nr2",marginStart:"a3oefunm",fontWeight:"hnx8ox4h"},loadingText:{color:"evzurl1e"},loadingContainer:{position:"lhggkp7q",zIndex:"nbczt5ty",boxSizing:"cm280p3y",display:"p357zi0d",alignItems:"gndfcl4n",justifyContent:"ac2vgrno",width:"ln8gz9je",paddingTop:"fbgy3m38",paddingEnd:"ft2m32mm",paddingBottom:"oq31bsqd",paddingStart:"nu34rnf1",background:"kqm7f4gm",boxShadow:"g07l9dru",opacity:"bs7a17vp",transitionProperty:"fx1ldmn8",transitionDuration:"grkbsjmy",transitionTimingFunction:"bkifpc9x"},shiftUp:{position:"lhggkp7q",zIndex:"pcpjcif5",display:"p357zi0d",alignItems:"gndfcl4n",justifyContent:"ac2vgrno",width:"ln8gz9je",paddingTop:"fbgy3m38",paddingEnd:"ft2m32mm",paddingBottom:"oq31bsqd",paddingStart:"nu34rnf1",background:"kqm7f4gm",boxShadow:"g07l9dru",transitionProperty:"fx1ldmn8",transitionDuration:"pa888v5w",transitionTimingFunction:"bkifpc9x",transform:"sihoqmp4"},body:{flex:"kk3akd72",paddingBottom:"s9fl9ege"}};function J(e){let t,{productFetchState:o,productCatalogFetchState:n,isAvailable:l}=e;t="ERROR"===o?(0,Y.jsx)(x.TextSpan,{className:(0,U.default)(Q.text),theme:"small",color:"danger",children:F.fbt._("Something went wrong",null,{hk:"7C9hw"})}):l?[(0,Y.jsx)(k.Spinner,{size:14,color:k.colorOptions.highlight},"DetailDrawer-loadingBar-spinner"),(0,Y.jsx)(x.TextSpan,{className:(0,U.default)(Q.text,Q.loadingText),theme:"small",children:F.fbt._("Waiting for network",null,{hk:"3I2DtN"})},"DetailDrawer-loadingBar-msg")]:(0,Y.jsx)(x.TextSpan,{className:(0,U.default)(Q.text),theme:"small",color:"danger",children:F.fbt._("This product or service has been removed",null,{hk:"3mE1ld"})});const a="PENDING"===o||"PENDING"===n||!l;return(0,Y.jsx)("div",{className:(0,U.default)(a&&Q.loadingContainer,!a&&Q.shiftUp),children:t})}function X(e){let{menu:t,handleBack:o}=e;return(0,Y.jsx)(w.DrawerHeader,{title:F.fbt._("Details",null,{hk:"1hLRT1"}),onBack:o,type:w.DRAWER_HEADER_TYPE.SMALL,menu:t})}function $(e,t){var o;const{collectionId:n,onCartClick:k,onProductLinkClick:x,onProductMoreInformation:w,onBack:$,onProductCatalog:Z,onProductDetail:ee,refreshCarousel:te,chat:oe,isPushed:ne=!0}=e,le=(0,G.default)(),ae=(0,K.default)(),ie=(0,H.useContext)(A.DrawerContext),re=(0,q.useModelValues)(e.product,["id","catalogWid","productImageCollection","fetchedFromServer","name","availability","reviewStatus"]),[se,ce]=(0,H.useState)(null),[de,ue]=(0,H.useState)(!1),[fe,pe]=(0,H.useState)(null),[he,ge]=(0,H.useState)("NONE"),[_e,me]=(0,H.useState)("NONE"),Ce=(0,z.default)((()=>N.CartCollection.findCart(re.catalogWid.toString())));(0,V.useListener)(Ce.current,"change:cartItemCollection",le);const ve=()=>{if($)return $()},be=()=>{const e=re.catalogWid,t=re.id.toString();return R.CatalogCollection.findProduct({catalogWid:e,productId:t,productMsgMediaData:(0,W.unproxy)(re).productMsgMediaData,canLogQpl:ne})},Se=()=>{const e=re.catalogWid,t=be(),o=L.BusinessProfileCollection.find(e);let n=!0;return Promise.all([o,t]).then((e=>{let[t]=e;if(ae.aborted)throw new l.AbortError;return n=!1,ne&&(0,I.qplEndProductView)(i.QuickLogActionType.SUCCESS),ce(t),ge("SUCCESS"),t})).then((e=>{me((t=>{if("PENDING"===t){if(!(0,M.hasCatalog)(e))return"NONE";(()=>{const e=re.catalogWid;R.CatalogCollection.findCarouselCatalog(e).then((e=>{if(ae.aborted)return;const t=Array.isArray(e)?e[0]:e;pe(t||null),me(t?"SUCCESS":"NONE")})).catch((0,a.filteredCatch)(s.ServerStatusCodeError,(e=>{"not_found"===e.status||404===e.status?(pe(null),me("NOT_FOUND")):(pe(null),me("ERROR"),__LOG__(3)`Failed to fetch product catalog from server`)}))).catch((0,a.filteredCatch)(s.WebdDrop,(()=>{pe(null),me("ERROR"),__LOG__(3)`Failed to fetch product catalog`})))})()}return t}))})).catch((0,l.catchAbort)((()=>{}))).catch((0,a.filteredCatch)(s.E404,(()=>{ve(),p.ModalManager.open((0,Y.jsx)(E.default,{onOK:()=>{p.ModalManager.close()},okText:F.fbt._("OK",null,{hk:"2KEeHb"}),children:F.fbt._("This product or service has been removed",null,{hk:"3mE1ld"})})),ge("NOT_FOUND"),n=!1,(0,I.qplDropProductView)()}))).catch((0,a.filteredCatch)(s.WebdDrop,(()=>{ge("ERROR"),__LOG__(3)`Failed to fetch product`}))).catch((0,a.filteredCatch)(s.ServerStatusCodeError,(()=>{ge("ERROR"),__LOG__(3)`Failed to fetch product from server`}))).finally((()=>{ne&&n&&(0,I.qplEndProductView)(i.QuickLogActionType.FAIL)}))};(0,H.useEffect)((()=>{if((0,f.commerceThreadsLoggingEnabled)()&&oe&&(0,y.addChatThreadLoggingActivities)([{activityType:"pdpViews",ts:(0,r.unixTime)(),chatId:oe.id}]),te){const e=R.CatalogCollection.get(re.catalogWid);(null==e?void 0:e.productCollection)&&e.fetchedFromServer?me("SUCCESS"):me("PENDING")}const e=(0,h.getMaybeMeUser)();ne&&(0,I.qplAnnotateProductView)(!(null==e?void 0:e.equals(re.catalogWid)));const t=re.catalogWid,o=re.id.toString();if(t&&o)return Se(),(0,_.default)(t).then((e=>{ue(e)})),(0,C.logProductDetailView)({product:(0,W.unproxy)(re),catalogContext:(0,v.getProductCatalogContext)(ie),cartToggle:de,collectionId:n}),()=>{const e=re.catalogWid,t=re.id.toString();if(!e||!t)return;const o=R.CatalogCollection.get(e),n=o&&o.msgProductCollection.get(t);(null==n?void 0:n.fetchedFromServer)&&o&&o.msgProductCollection.remove(n)};(0,I.qplDropProductView)()}),[]);const Pe=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];(0,f.commerceThreadsLoggingEnabled)()&&oe&&(0,y.addChatThreadLoggingActivities)([{activityType:e,ts:(0,r.unixTime)(),chatId:oe.id,boolValue:t}])},Te=()=>"ERROR"!==he&&"NOT_FOUND"!==he&&!(()=>{const{reviewStatus:e}=re;return e===D.PRODUCT_REVIEW_STATUS.REJECTED})(),ye=Te(),ke=(0,M.hasCatalog)(se),xe=()=>{be().then((()=>{const e=R.CatalogCollection.get(re.catalogWid);e&&(e.stale=!0)}))};return(0,Y.jsxs)(j.default,{ref:t,onDrop:ve,theme:"striped",children:[(0,Y.jsx)(X,{handleBack:ve,menu:Te()?(0,Y.jsx)(m.default,{onSendProduct:()=>{const e=re,{catalogWid:t}=e,o=R.CatalogCollection.get(t);if(!o)return;const n=o.productCollection.get(e.id);d.Cmd.attachProduct({product:n?(0,W.unproxy)(n):(0,W.unproxy)(e)})},onReportProduct:()=>{p.ModalManager.open((0,Y.jsx)(T.default,{product:re,sessionId:(0,v.getProductCatalogSessionId)(ie)}))},onProductLinkClick:()=>{x(re)},onProductMoreInformation:()=>{w(re)},onCartClick:de?()=>{(0,I.qplStartCartView)("Product"),null==k||k(re.catalogWid.toString())}:void 0,cartCount:Ce.current.itemCount,catalogId:re.catalogWid.toString(),contactId:null==oe?void 0:oe.contact.id.user}):null}),(0,Y.jsx)(O.default,{children:(0,Y.jsxs)("div",{"data-testid":"product-details",className:(0,U.default)(Q.body),children:[(0,Y.jsx)(J,{productFetchState:he,productCatalogFetchState:_e,isAvailable:ye}),(0,Y.jsx)(P.default,{product:re,isAvailable:ye,fetching:"PENDING"===he}),B.PRODUCT_AVAILABILITY_UNAVAILABLE_VALUES.includes(re.availability)?(0,Y.jsxs)("div",{className:(0,U.default)(Q.availabilityBanner),children:[re.availability===B.ProductAvailability.OUT_OF_STOCK?F.fbt._("This item is out of stock.",null,{hk:"4gOwiz"}):null,re.availability===B.ProductAvailability.AVAILABLE_FOR_ANOTHER_POSTCODE&&(0,u.enablePostcodeInCatalog)()?(0,Y.jsx)(S.ProductPostcodeChangeBanner,{catalogWid:re.catalogWid,postcodeChangeSuccess:xe}):null]}):null,(0,Y.jsx)(b.default,{product:re,collectionId:n,onSendChat:()=>{const e=R.CatalogCollection.get(re.catalogWid);(0,c.sendProductToChat)(re,e,(0,v.getProductCatalogContext)(ie)),Pe("isCtaOnPdpClicked"),(0,C.logProductMessageBusinessClick)(re,(0,v.getProductCatalogContext)(ie))},onAddToCart:()=>{Pe("isCartAddClicked")},isAvailable:ye,hideRetailerID:null===(o=e.chat)||void 0===o?void 0:o.contact.isEnterprise}),ke&&fe?(0,Y.jsx)(g.default,{catalog:fe,onProductCatalog:()=>{Z&&Z(re.catalogWid,(0,v.getProductCatalogContext)(ie))},onProductDetail:e=>{if((0,I.qplStartProductView)("Product"),ee)return ee(e)},filterProductId:re.id.toString(),title:F.fbt._("More",null,{hk:"2A3GqV"}),animation:!1}):null]})})]},"product-details-drawer")}var Z=(0,H.forwardRef)($);t.default=Z},16481:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{collectionId:t,onSendChat:o,onAddToCart:n,isAvailable:l}=e,a=(0,E.useContext)(P.DrawerContext),r=(0,A.useModelValues)(e.product,["name","url","description","availability","currency","priceAmount1000","salePriceAmount1000","salePriceStartDate","salePriceEndDate","fetchedFromServer","retailerId","catalogWid","productImageCollection","imageHash","reviewStatus","imageCdnUrl","id","maxAvailable"]),[h,g]=(0,E.useState)(!1),[m,S]=(0,E.useState)(!1);return(0,E.useEffect)((()=>{(0,d.default)(r.catalogWid).then((e=>{S(e)}))}),[]),(0,w.jsxs)(T.default,{theme:"padding-product",animation:!1,children:[(0,w.jsx)(b.TextDiv,{theme:"title",className:(0,j.default)(M.name),children:(0,w.jsx)(C.EmojiText,{text:r.name,selectable:!0})}),null!=r.priceAmount1000?(0,w.jsx)(b.TextDiv,{className:(0,j.default)(M.price),color:"dark",theme:"plain",children:(0,w.jsx)(p.default,{product:r,selectable:!0,direction:"inherit"})}):null,(0,w.jsx)(B,{product:r,isAvailable:l,isDescExpanded:h,hideRetailerID:e.hideRetailerID,onReadMore:()=>{g(!0)},onClickUrl:(e,t)=>{e.stopPropagation(),(0,u.logDetailLinkClick)({product:(0,x.unproxy)(r),catalogContext:(0,f.getProductCatalogContext)(a)});const o=t&&i.findLink(t);o&&(0,v.openExternalLink)(o.url)}}),(0,w.jsx)(N,{onSendChat:()=>{null==o||o()},isAvailable:l,product:r}),(0,w.jsx)(R,{cartEnabled:m,isAvailable:l,product:r,onClick:e=>{c.QPL.markerStart(s.QuickLogMarkerId.WHATSAPP_CART_ADD,{annotations:{string:{EntryPoint:"Product"}}}),(0,_.addToCart)(r,(0,f.getProductCatalogContext)(a),t),null==n||n(),e.stopPropagation()},context:a})]})};var l=n(o(427315)),a=n(o(364369)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var o=L(t);if(o&&o.has(e))return o.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=l?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,o&&o.set(e,n);return n}(o(995726)),r=o(408139),s=o(665397),c=o(669393),d=n(o(217986)),u=o(277975),f=o(397567),p=n(o(962089)),h=n(o(324170)),g=n(o(556016)),_=o(89593),m=n(o(39770)),C=o(965417),v=o(912591),b=o(113923),S=o(130695),P=o(427394),T=n(o(833308)),y=o(105641),k=o(906822),x=o(118146),I=o(548360),E=o(667294),j=n(o(156720)),O=n(o(168419)),A=o(735461),w=o(785893);function L(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,o=new WeakMap;return(L=function(e){return e?o:t})(e)}const M={addToCartIconDisabled:{color:"baku5n5n",":hover":{color:"k3zau70k"}},addToCartIcon:{color:"o2v2jkg7",":hover":{color:"oehg7oif"}},addToCartBtnHoverIcon:{color:"jk96mlgm",":hover":{color:"dul83ws3"}},button:{width:"ln8gz9je"},buttonContainer:{display:"p357zi0d",marginBottom:"or9x5nie"},addToCartContainer:{display:"p357zi0d",alignItems:"gndfcl4n",justifyItems:"g3ty6e9x"},addToCartContainerWithIcon:{marginTop:"kv6wexeh",marginEnd:"jnwc1y2a",marginBottom:"rkx9gk34",marginStart:"svoq16ka"},more:{color:"o0rubyzf"},description:{marginBottom:"du8bjn1j",overflowX:"gfz4du6o",overflowY:"r7fjleex",wordWrap:"b6f1x6w7"},name:{marginBottom:"t4zgqcuo",fontWeight:"hnx8ox4h",wordWrap:"b6f1x6w7"},price:{marginBottom:"t4zgqcuo"},quantityControls:{justifyContent:"ac2vgrno",marginTop:"kmqqq083",marginBottom:"mpdn4nr2"}};function N(e){let{onSendChat:t,isAvailable:o,product:n}=e;if(!t||!n.fetchedFromServer||!o||n.reviewStatus!==y.PRODUCT_REVIEW_STATUS.APPROVED)return null;const l=I.fbt._("Message Business",null,{hk:"3jgAJS"});return(0,w.jsx)("div",{className:(0,j.default)(M.buttonContainer),title:l,children:(0,w.jsx)(m.default,{testid:"product-message-business-btn",className:(0,j.default)(M.button),onClick:t,type:"secondary",children:l})})}function R(e){let{cartEnabled:t,isAvailable:o,product:n,onClick:a,context:i}=e;const{isHovered:s,onMouseEnter:c,onMouseLeave:d}=(0,O.default)();if(!t||!n.fetchedFromServer||!o||n.reviewStatus!==y.PRODUCT_REVIEW_STATUS.APPROVED)return null;const u=(0,r.isQuantityControlsFeatureEnabled)(),f=I.fbt._("Add to cart",null,{hk:"2qbS08"}),p=k.PRODUCT_AVAILABILITY_UNAVAILABLE_VALUES.includes(n.availability);let _=null;_=p?M.addToCartIconDisabled:s?M.addToCartBtnHoverIcon:M.addToCartIcon;const C=(0,l.default)(n),v=u?null:(0,w.jsx)(h.default,{colorXStyle:_}),b=u&&C>0?(0,w.jsx)(g.default,{product:n,context:i}):(0,w.jsx)(m.default,{testid:"add-to-cart-btn",className:(0,j.default)(M.button),onClick:a,type:"secondary",disabled:p,children:(0,w.jsxs)("span",{className:(0,j.default)(M.addToCartContainer,v&&M.addToCartContainerWithIcon),children:[v,f]})});return(0,w.jsx)("div",{className:(0,j.default)(M.buttonContainer,u&&M.quantityControls),title:f,onMouseEnter:c,onMouseLeave:d,children:b})}function D(e){let{isAvailable:t,product:o,onClick:n}=e;const{url:l}=o;if(!o.fetchedFromServer||!l||!t)return null;const a=S.Configuration.TrustedGroupDesc({links:i.findLinks(l)});return(0,w.jsx)("div",{children:(0,w.jsx)(C.EmojiText,{selectable:!0,formatters:a,text:l,onClick:e=>n(e,l)})})}function B(e){let{product:t,isAvailable:o,isDescExpanded:n,hideRetailerID:l,onReadMore:i,onClickUrl:r}=e;if(!t.description&&!t.url&&!t.retailerId)return null;const s=!!t.description&&t.description.length>a.default.GROUP_DESCRIPTION_INFO_PANEL_TRUNC_LENGTH;let c;return t.description&&(c=(0,w.jsxs)("div",{children:[(0,w.jsx)(C.EmojiText,{selectable:!0,multiline:!0,text:t.description,textLimit:n?1/0:a.default.GROUP_DESCRIPTION_INFO_PANEL_TRUNC_LENGTH}),s&&!n?(0,w.jsxs)("span",{className:(0,j.default)(M.more),role:"button",onClick:i,children:[" ",I.fbt._("Read more",null,{hk:"2DvSvh"})]}):null]})),(0,w.jsxs)(b.TextDiv,{theme:"plain",className:(0,j.default)(M.description),children:[c,(0,w.jsx)(D,{isAvailable:o,product:t,onClick:r}),t.retailerId&&!l?(0,w.jsx)("div",{children:(0,w.jsx)(C.EmojiText,{text:t.retailerId,selectable:!0,direction:"inherit"})}):null]})}},679188:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.ProductDetailsWithDeepLink=void 0;var l=o(450796),a=n(o(145095)),i=o(492574),r=o(914597),s=o(745454),c=o(414375),d=n(o(961055)),u=n(o(326218)),f=n(o(170107)),p=n(o(452665)),h=n(o(60453)),g=n(o(69637)),_=o(994790),m=o(599989),C=o(548360),v=o(667294),b=o(785893);const S=(0,v.forwardRef)(((e,t)=>{const{isPushed:o=!0,productInfo:{productId:n,businessOwnerJid:S},onBack:P}=e,[T,y]=(0,v.useState)((()=>(0,u.default)({productId:n,businessOwnerJid:S}))),[k,x]=(0,v.useState)((()=>T?"NONE":"PENDING")),I=()=>{const e=(0,s.createWid)(S);m.CatalogCollection.findProduct({catalogWid:e,productId:n}).then((()=>{const t=m.CatalogCollection.get(e);y((0,a.default)(t,"catalog").productCollection.get(n)),x("SUCCESS")})).catch((0,l.filteredCatch)(i.E404,(()=>{P(),r.ModalManager.open((0,b.jsx)(p.default,{onOK:()=>{r.ModalManager.close()},okText:C.fbt._("OK",null,{hk:"2KEeHb"}),children:C.fbt._("This product or service has been removed",null,{hk:"3mE1ld"})})),x("ERROR")}))).catch((e=>{(0,c.parseErrorState)(e,(e=>{x(e)}))}))};return(0,v.useEffect)((()=>{T||I()}),[]),T?(0,b.jsx)(f.default,{ref:t,chat:e.chat,isPushed:o,product:T,onEnd:e.onEnd,onBack:e.onBack,onProductDetail:e.onProductDetail,onProductCatalog:e.onProductCatalog,refreshCarousel:!0,onProductLinkClick:e.onProductLinkClick,onProductMoreInformation:e.onProductMoreInformation,onCartClick:e.onCartClick}):(0,b.jsxs)(h.default,{ref:t,onDrop:e.onBack,children:[(0,b.jsx)(_.DrawerHeader,{testid:"drawer-title-profile",title:C.fbt._("Details",null,{hk:"1hLRT1"}),onBack:e.onBack,type:_.DRAWER_HEADER_TYPE.SMALL}),(0,b.jsx)(g.default,{children:(0,b.jsx)(d.default,{fetchState:k})})]},"product-details-drawer")}));t.ProductDetailsWithDeepLink=S,S.displayName="ProductDetailsWithDeepLink"},754050:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=o(32266),a=o(781572),i=o(914597),r=n(o(500786)),s=o(277975),c=o(397567),d=n(o(649762)),u=o(303013),f=n(o(744356)),p=o(965417),h=n(o(361266)),g=n(o(523358)),_=n(o(426609)),m=n(o(60453)),C=n(o(69637)),v=o(427394),b=o(994790),S=n(o(651628)),P=o(118146),T=n(o(294184)),y=o(548360),k=o(667294),x=o(785893);const I="product-link-anchor";function E(e){const t=e.getProductImageCollectionHead();return t?(0,x.jsx)(u.ProductThumb,{className:(0,T.default)(d.default.productImage,d.default.productImageContainer),mediaData:t.mediaData}):(0,x.jsx)(u.ProductThumbPlaceholder,{className:(0,T.default)(d.default.productThumb,d.default.productThumbContainer)})}function j(e,t){const{onBack:o,onCancel:n,product:u,prompt:T,centerDrawer:j,sendProductMsg:O,onSend:A}=e,w=(0,k.useContext)(v.DrawerContext),L=()=>{i.ModalManager.open((0,x.jsx)(h.default,{product:u,onSend:A}),{transition:"modal-flow"}),(0,s.logShareProductViaWALinkClick)({product:u,catalogContext:(0,c.getProductCatalogContext)(w)})},M=()=>{a.Cmd.attachProduct({product:(0,P.unproxy)(u),onSend:A})},N=(0,l.createProductLink)(u.catalogWid.user,u.id.toString());let R,D,B;return j&&(R="labels",D="center-column"),B=null!=O?(0,x.jsx)(g.default,{onClick:M}):(0,x.jsx)(S.default,{onClick:L}),(0,x.jsxs)(m.default,{ref:t,theme:R,children:[(0,x.jsx)(b.DrawerHeader,{testid:"product-link-title",title:y.fbt._("Product link",null,{hk:"1RIlvV"}),onBack:o,onCancel:n,type:b.DRAWER_HEADER_TYPE.SMALL,focusBackOrCancel:!0}),(0,x.jsxs)(C.default,{theme:D,children:[(0,x.jsx)("div",{className:d.default.prompt,children:T}),(0,x.jsx)(f.default,{image:E(u),primary:(0,x.jsx)(p.EmojiText,{text:u.name,direction:"auto"}),theme:"identity",secondary:(0,x.jsx)(r.default,{id:I,href:N,onClick:e=>{e.preventDefault(),L()},noHandle:!0})}),B,(0,x.jsx)(_.default,{elementId:I,onClick:()=>{(0,s.logShareProductCopyLinkClick)({product:u,catalogContext:(0,c.getProductCatalogContext)(w)})}})]})]},"product-link-drawer")}var O=(0,k.forwardRef)(j);t.default=O},11395:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.ProductListDrawer=void 0;var l=o(450796),a=o(551737),i=o(257243),r=o(492574),s=o(88555),c=o(941906),d=n(o(568064)),u=o(408139),f=o(364481),p=n(o(217986)),h=o(414375),g=n(o(961055)),_=n(o(662371)),m=o(277975),C=n(o(33889)),v=o(397567),b=n(o(274259)),S=n(o(462647)),P=o(925840),T=o(160811),y=o(471174),k=n(o(630855)),x=n(o(329796)),I=o(646346),E=n(o(23217)),j=n(o(813712)),O=n(o(60453)),A=n(o(69637)),w=o(427394),L=o(994790),M=o(612392),N=o(599989),R=o(548360),D=o(667294),B=n(o(156720)),W=n(o(651799)),F=n(o(859312)),H=n(o(616223)),U=o(587550),G=o(735461),z=n(o(290886)),V=n(o(803409)),q=o(785893);const K={header:{flex:"kk3akd72"},list:{flex:"kk3akd72",paddingBottom:"oq31bsqd",overflowX:"gfz4du6o",overflowY:"r7fjleex"},listMarginTop:{marginTop:"dj1c3cmq"}};function Y(e){let t,{canManageCatalog:o,onAddProduct:n,businessProfile:l,contact:a,productCatalogList:i,loadingMore:r}=e;return o&&n&&(t=(0,q.jsx)(C.default,{onClick:()=>n(),theme:"in-list",testid:"add-item"})),(0,q.jsxs)(q.Fragment,{children:[l&&(0,q.jsx)("div",{"data-testid":"catalog-header",className:(0,B.default)(K.header),children:(0,q.jsx)(S.default,{profilePicThumb:a.getProfilePicThumb(),contact:a,businessProfile:l})}),(0,q.jsxs)("div",{"data-testid":"catalog-items",className:(0,B.default)(K.list,l&&K.listMarginTop),children:[t,i,r&&(0,q.jsx)(x.default,{})]})]})}function Q(e){let{canManageCatalog:t,onOpenSettings:o,headerType:n,onCartClick:l,catalogId:i,handleCatalogLinkClick:r,handleCartClick:s,cartEnabled:c,cartCount:f}=e;const p=t&&(0,u.canToggleCartOnOff)()?(0,q.jsx)(I.MenuBarItem,{testid:"menu-bar-menu",icon:(0,q.jsx)(E.default,{name:"menu"}),title:d.default.t(451),children:(0,q.jsxs)(T.Dropdown,{type:T.MenuType.DropdownMenu,flipOnRTL:!0,dirX:T.DirX.LEFT,children:[(0,q.jsx)(y.DropdownItem,{testid:"mi-foward menu-item",action:r,children:d.default.t(312)}),o&&(0,q.jsx)(y.DropdownItem,{testid:"mi-settings menu-item",action:o,children:R.fbt._("Settings",null,{hk:"2RmHUB"})})]},"CatalogDetailHeader")}):(0,q.jsx)(I.MenuBarItem,{testid:"menu-bar-catalog-link",icon:(0,q.jsx)(_.default,{theme:n===L.DRAWER_HEADER_TYPE.LARGE?"inherit-color":null}),title:R.fbt._("Catalog link",null,{hk:"M36Dw"}),onClick:r}),h=c&&l?(0,q.jsx)(P.CartIconMenuBarItem,{cartIconTheme:n===L.DRAWER_HEADER_TYPE.LARGE?"inherit-color":null,cartCountText:(0,a.isNumber)(f)&&f>0?f.toString():void 0,onClick:s,catalogOwnerJid:i.toString()}):null;return(0,q.jsxs)(q.Fragment,{children:[h,p]})}const J=(0,D.forwardRef)(((e,t)=>{const{catalogId:o,canManageCatalog:n,setScrollOffset:a,onCartClick:d,onCatalogLinkClick:u,autoUpdate:_=!1,businessProfile:C,onAddProduct:S,onProductDetail:P,onProductShare:T,headerType:y,onOpenSettings:x,blockCartInterstitialFn:I=(()=>!1)}=e,E=(0,V.default)(),B=(0,D.useContext)(w.DrawerContext),K=(0,F.default)(),J=(0,W.default)(K,100),X=(0,G.useModelValues)(e.contact,["id"]),$=(0,H.default)((()=>new k.default)),Z=()=>{const e=N.CatalogCollection.get(o);return!e||e.stale?null:e},ee=(0,D.useMemo)((()=>M.CartCollection.findCart(X.id.toString())),[X.id]),[te,oe]=(0,D.useState)(!1),[ne,le]=(0,D.useState)(0),[ae,ie]=(0,D.useState)(!1),[re,se]=(0,D.useState)(!1),[ce,de]=(0,D.useState)(Z),[ue,fe]=(0,D.useState)((()=>ee.itemCount)),[pe,he]=(0,D.useState)((()=>Z()?"SUCCESS":"NONE"));(0,U.useListener)(ee,"all",(()=>{const e=ee.itemCount;ue!==e&&fe(e)}));const ge=()=>{if(ae)return;const e=N.CatalogCollection.assertGet(o);if(!e.afterCursor)return;const t=e.productCollection.getProductModels().length;oe(!0),le(t),N.CatalogCollection.update(o).then((e=>{if(E.aborted)return;oe(!1);(Array.isArray(e)?e[0]:e).productCollection.getProductModels().length===ne&&ie(!0),t*f.PRODUCT_LIST_ITEM_HEIGHT<window.innerHeight&&ge()})).catch((()=>{oe(!1),ie(!0)}))},_e=(0,W.default)((()=>{var t;null===(t=e.onRemoveProduct)||void 0===t||t.call(e),K()}),100),me=_?null==ce?void 0:ce.productCollection:null;(0,U.useListener)(me,"add",J),(0,U.useListener)(me,"remove",_e);(0,D.useEffect)((()=>{(0,m.logCatalogListView)({catalogOwnerWid:o,catalogContext:(0,v.getProductCatalogContext)(B),cartToggle:re}),ce?ge():N.CatalogCollection.find(o).then((e=>{de(e),he("SUCCESS"),ge()})).catch((0,l.filteredCatch)(r.ServerStatusCodeError,(e=>{403!==e.status&&404!==e.status||(de(null),he("NOT_FOUND"))}))).catch((e=>{(0,h.parseErrorState)(e,(e=>he(e)))})),(0,p.default)(o).then((e=>{se(e),(0,s.isMDBackend)()&&n&&re&&!I()&&(0,i.getABPropConfigValue)("web_abprop_nux_cart_interstitial")&&(0,j.default)()}))}),[]);const Ce=(0,z.default)((e=>{te||e.scrollTop+c.SCROLL_FUDGE>e.scrollHeight-e.clientHeight&&ge()}),100),ve=()=>{null==d||d(X.id.toString())},be=re&&d?ve:void 0,Se=ce?(0,q.jsx)(Y,{canManageCatalog:n,onAddProduct:S,businessProfile:C,contact:X,loadingMore:te,productCatalogList:(0,q.jsx)(b.default,{onCartOpen:be,onProductDetail:P,flatListController:$.current,catalog:ce,canManageCatalog:n,shareLinks:n,onProductShare:T})}):(0,q.jsx)(g.default,{fetchState:pe});return(0,q.jsxs)(O.default,{ref:t,theme:"products",onDrop:e.onBack,children:[(0,q.jsx)(L.DrawerHeader,{title:R.fbt._("Catalog",null,{hk:"3YVOSV"}),type:e.headerType||L.DRAWER_HEADER_TYPE.SMALL,onBack:e.onBack,menu:(0,q.jsx)(Q,{canManageCatalog:n,handleCatalogLinkClick:()=>{ce&&(u(ce,X),(0,m.logCatalogShareLinkClick)({catalogOwnerWid:o,catalogContext:(0,v.getProductCatalogContext)(B)}))},onOpenSettings:x,headerType:y,cartEnabled:re,onCartClick:d,cartCount:ue,handleCartClick:ve,catalogId:o}),focusBackOrCancel:!0}),(0,q.jsx)(A.default,{onScroll:e=>{var t,o;e.currentTarget&&Ce(e.currentTarget),null==a||a(null!==(t=null===(o=e.currentTarget)||void 0===o?void 0:o.scrollTop)&&void 0!==t?t:0)},flatListControllers:[$.current],scrollOffset:e.scrollOffset,children:Se})]})}));t.ProductListDrawer=J},462647:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{profilePicThumb:t,contact:o,businessProfile:n}=e;return(0,d.jsxs)("div",{className:l.default.header,"data-testid":"product-list-header",children:[(0,d.jsx)(f,{profilePicThumb:t,contact:o}),(0,d.jsxs)("div",{className:l.default.text,children:[(0,d.jsx)(s.TextDiv,{className:l.default.name,theme:"large",children:(0,d.jsx)(r.Name,{contact:o,selectable:!0,useVerifiedName:!0})}),(0,d.jsx)(u,{businessProfile:n})]})]})};var l=n(o(72940)),a=o(288984),i=o(965417),r=o(812176),s=o(113923),c=o(735461),d=o(785893);function u(e){const t=(0,c.useOptionalModelValues)(e.businessProfile,["description"]);return t&&t.description?(0,d.jsx)("div",{className:l.default.description,children:(0,d.jsx)(i.EmojiText,{text:t.description,direction:"auto",selectable:!0,titlify:!0})}):null}function f(e){const t=(0,c.useOptionalModelValues)(e.profilePicThumb,["imgFull"]),o=(0,c.useModelValues)(e.contact,["id","isMe"]);if(!t)return null;const n=(0,d.jsx)(a.DefaultIcon,{id:o.id});return(0,d.jsx)("div",{className:l.default.photo,children:(0,d.jsx)(a.DetailImageCommon,{profilePicThumb:t,loader:!0,defaultIcon:n,profilePicThumbImg:t.imgFull,spinnerClassName:l.default.spinner,imgClassName:l.default.img,theme:"business"})})}},277776:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(o(81109)),a=n(o(348926)),i=n(o(145095)),r=o(715127),s=o(509978),c=o(227105),d=n(o(60453)),u=n(o(69637)),f=o(994790),p=o(599989),h=o(118146),g=o(548360),_=o(667294),m=n(o(156720)),C=o(735461),v=o(785893);const b={marginBottom:"ngycyvoj"};function S(e,t){const{onBack:o}=e,n=(0,C.useModelValues)(e.product,["id","catalogWid"]),[S,P]=(0,_.useState)({}),[T,y]=(0,_.useState)(""),[k,x]=(0,_.useState)(""),[I,E]=(0,_.useState)(!0),j=e=>{var t,o;return(null===(t=e.complianceInfo)||void 0===t?void 0:t.countryCodeOrigin)===String(s.SyntheticCountryCode.NotApplicable)?Promise.resolve((0,v.jsxs)("div",{children:[(0,v.jsx)("div",{className:(0,m.default)(b),children:g.fbt._("Not Applicable",null,{hk:"2k1klN"})}),(0,v.jsx)("div",{children:g.fbt._("Item is a service or non-physical good",null,{hk:"3uDBY7"})})]})):(0,s.getCountryName)(null===(o=e.complianceInfo)||void 0===o?void 0:o.countryCodeOrigin)};(0,_.useEffect)((()=>{function e(){return(e=(0,a.default)((function*(){yield p.CatalogCollection.findProduct({catalogWid:n.catalogWid,productId:n.id.toString(),productMsgMediaData:(0,h.unproxy)(n).productMsgMediaData,shouldFetchComplianceFields:!0});const e=p.CatalogCollection.get(n.catalogWid),t=(0,i.default)(e,"catalog").productCollection.get(n.id);if(t){var o,l,a,r,c,d,u,f,g,_,m,C,v,b;const e=yield j(t),n=yield(0,s.getCountryName)(null===(o=t.complianceInfo)||void 0===o||null===(l=o.importerAddress)||void 0===l?void 0:l.countryCode),i={importerName:(null===(a=t.complianceInfo)||void 0===a?void 0:a.importerName)||"",countryCodeOrigin:(null===(r=t.complianceInfo)||void 0===r?void 0:r.countryCodeOrigin)||"",importerAddress:{street1:(null===(c=t.complianceInfo)||void 0===c||null===(d=c.importerAddress)||void 0===d?void 0:d.street1)||"",street2:(null===(u=t.complianceInfo)||void 0===u||null===(f=u.importerAddress)||void 0===f?void 0:f.street2)||"",city:(null===(g=t.complianceInfo)||void 0===g||null===(_=g.importerAddress)||void 0===_?void 0:_.city)||"",region:(null===(m=t.complianceInfo)||void 0===m||null===(C=m.importerAddress)||void 0===C?void 0:C.region)||"",postalCode:(null===(v=t.complianceInfo)||void 0===v||null===(b=v.importerAddress)||void 0===b?void 0:b.postalCode)||""}};P(i),E(!1),y(e),x(n)}else __LOG__(3)`Unable to fetch compliance for product: ${n.id}`}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);const O=()=>{if(o)return o()},{countryCodeOrigin:A,importerName:w,importerAddress:L}=S;return(0,v.jsxs)(d.default,{ref:t,onDrop:O,theme:"striped",children:[(0,v.jsx)(f.DrawerHeader,{testid:"drawer-title-profile",title:g.fbt._("More information",null,{hk:"2JHvi1"}),onBack:O,type:f.DRAWER_HEADER_TYPE.SMALL}),(0,v.jsx)(u.default,{theme:I?"center-content":void 0,children:I?(0,v.jsx)(c.ComplianceInfoLoading,{}):(0,v.jsxs)(c.ComplianceInfoGroup,{children:[(0,v.jsx)(c.ComplianceInfoPrimitiveField,{value:T,label:g.fbt._("Country of Origin",null,{hk:"2yl0F7"})}),A&&![r.COMPLIANCE_INFO_CODES.INDIA,s.SyntheticCountryCode.NotApplicable].includes(A)?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(c.ComplianceInfoPrimitiveField,{value:w,label:g.fbt._("Name of Importer",null,{hk:"3gfW35"})}),(0,v.jsx)(c.ComplianceInfoStructuralField,{valuesMap:(0,l.default)({importerAddressCountryNameOrigin:k},L),keys:["street1","street2","city","region","postalCode","importerAddressCountryNameOrigin"],label:g.fbt._("Address of Importer",null,{hk:"Kxo8I"})})]}):null]})})]},"product-details-drawer")}var P=(0,_.forwardRef)(S);t.default=P},871643:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.ProductPostcodeChangeBanner=function(e){const{catalogWid:t,postcodeChangeSuccess:o}=e,[n,a]=(0,d.useState)(null),{value:i,set:r}=(0,u.default)(!0),c=(0,p.default)();if((0,d.useEffect)((()=>{(function(){var e=(0,l.default)((function*(){try{const e=yield s.default.getCypher(t);if(c.aborted)return;a(e)}catch(e){__LOG__(4,!0,new Error,!0)`[direct-connection] Setting cypher failed in PDP ${e}`,SEND_LOGS("direct-connection-setting-cypher-failed-in-pdp")}c.aborted||r(!1)}));return function(){return e.apply(this,arguments)}})()()}),[t,r,c]),i||null==n)return null;return(0,h.jsx)(_,{businessDirectConnection:n,catalogWid:t,postcodeChangeSuccess:o})};var l=n(o(348926)),a=o(914597),i=n(o(210805)),r=n(o(499360)),s=n(o(515131)),c=o(548360),d=o(667294),u=n(o(197067)),f=o(735461),p=n(o(803409)),h=o(785893);function g(e){let{catalogWid:t,postcodeChangeSuccess:o,postcode:n}=e;return(0,h.jsx)(r.default,{onClick:()=>{a.ModalManager.open((0,h.jsx)(i.default,{existingPostcode:n,catalogId:t,onCancel:()=>a.ModalManager.close(),onSuccess:()=>{a.ModalManager.close(),o()}}))},children:c.fbt._("Change",null,{hk:"3d8zl4"})})}function _(e){let{businessDirectConnection:t,catalogWid:o,postcodeChangeSuccess:n}=e;const{postcode:l}=(0,f.useModelValues)(t,["postcode"]);return null==l?null:(0,h.jsxs)(h.Fragment,{children:[c.fbt._("Not available in {area-postcode}.",[c.fbt._param("area-postcode",l)],{hk:"4tHAo0"})," ",(0,h.jsx)(g,{postcode:l,catalogWid:o,postcodeChangeSuccess:n})]})}},233382:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{isAvailable:t,fetching:o}=e,n=(0,d.useContext)(s.DrawerContext),g=(0,f.useModelValues)(e.product,["productImageCollection","productMsgMediaData","catalogWid","imageCdnUrl"]),_=g.lazyloadProductImageCollection().toArray();return(0,p.jsx)("div",{className:(0,u.default)(h),children:(0,p.jsx)(r.default,{images:_,fetching:o,onClick:t?(e,t)=>{(0,a.logDetailImageClick)({product:(0,c.unproxy)(g),catalogContext:(0,i.getProductCatalogContext)(n)});const o={activeProductImage:t,productImageCollection:g.lazyloadProductImageCollection(),getZoomNode:()=>e,product:g};l.Cmd.productImageViewerModal(o,(0,i.getProductCatalogSessionId)(n))}:null,renderFallback:!t,fallbackMediaData:g.productMsgMediaData})})};var l=o(781572),a=o(277975),i=o(397567),r=n(o(698046)),s=o(427394),c=o(118146),d=o(667294),u=n(o(156720)),f=o(735461),p=o(785893);const h={width:"ln8gz9je"}},197802:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(o(39770)),a=o(729424),i=o(857224),r=o(548360),s=o(667294),c=n(o(156720)),d=o(785893);const u={display:"p357zi0d",flexDirection:"f8m0rgwh"},f={marginTop:"qt60bha0"};function p(e,t){const{onPopupCancel:o,onReport:n,onTellUsMore:s}=e,p=r.fbt._("Report this product?",null,{hk:"3IDG0p"}),h=(0,d.jsx)("div",{children:r.fbt._("We will review the product and if it does not meet our guidelines, it will be removed.",null,{hk:"2CRdfl"})},"ReportProductChoicePopup-desc"),g=(0,d.jsx)(l.default,{testid:"popup-controls-more",type:"secondary",onClick:s,children:r.fbt._("Tell Us More",null,{hk:"2CkelY"})},"ReportProductChoicePopup-moreBtn"),_=(0,d.jsx)(l.default,{testid:"popup-controls-report",type:"secondary",onClick:()=>n(),children:r.fbt._("Report Product",null,{hk:"3XLjyb"})},"ReportProductChoicePopup-reportBtn"),m=(0,d.jsx)(l.default,{type:"secondary",onClick:o,children:r.fbt._("Cancel",null,{hk:"H0gNq"})},0),C=(0,d.jsxs)("div",{className:(0,c.default)(u),children:[(0,d.jsx)("div",{children:g}),(0,d.jsx)("div",{className:(0,c.default)(f),children:_}),(0,d.jsx)("div",{className:(0,c.default)(f),children:m})]});return(0,d.jsx)(a.HotKeys,{ref:t,handlers:{escape:o},children:(0,d.jsx)(i.Modal,{title:p,actions:C,children:h})})}var h=(0,s.forwardRef)(p);t.default=h},279387:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=o(451897),a=o(895697),i=o(665397),r=o(669393),s=o(694816),c=o(277975),d=n(o(197802)),u=n(o(14819)),f=o(446331),p=n(o(832973)),h=o(118146),g=o(548360),_=o(785893);class m extends p.default{constructor(){var e;super(...arguments),e=this,this._submitReason=e=>{const{product:t,sessionId:o}=this.props;return(0,c.logReportProduct)({product:(0,h.unproxy)(t),catalogSessionId:o}),(0,a.reportProduct)(t.catalogWid,t.id.toString(),e)},this._handleDelete=()=>{this.end()},this._handleReport=e=>{r.QPL.markerStart(i.QuickLogMarkerId.WHATSAPP_PRODUCT_REPORT),this._handleShowSubmittedToast(e)},this._handleTellUsMore=()=>{this.push((0,_.jsx)(u.default,{onTellUsMoreSubmit:this._handleReport,onCancel:this._handleCancel}),"none")},this._handlePopupCancel=()=>{this.end()},this._handleCancel=()=>{this.end()},this._handleReportSubmitted=()=>{this.end()},this._handleShowSubmittedToast=function(t){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,f.genId)();const{product:n,sessionId:a}=e.props,d=e._submitReason(t),u=new f.ActionType(g.fbt._("Reporting product",null,{hk:"4qusYv"})),p=d.then((()=>((0,c.logReportProductSuccess)({product:(0,h.unproxy)(n),catalogSessionId:a}),r.QPL.markerEnd(i.QuickLogMarkerId.WHATSAPP_PRODUCT_REPORT,l.QuickLogActionType.SUCCESS),new f.ActionType(g.fbt._("Thanks for your feedback",null,{hk:"1vRsPv"}).toString()+". "+g.fbt._("Your report has now been submitted.",null,{hk:"40tL3T"}).toString())))).catch((()=>((0,c.logReportProductFailure)({product:(0,h.unproxy)(n),catalogSessionId:a}),r.QPL.markerEnd(i.QuickLogMarkerId.WHATSAPP_PRODUCT_REPORT,l.QuickLogActionType.FAIL),__LOG__(3)`error submitting product report`,new f.ActionType(g.fbt._("Couldn't report product",null,{hk:"11JN2U"}),{actionText:g.fbt._("Retry",null,{hk:"2jS9Tg"}),actionHandler:()=>e._handleShowSubmittedToast(t,o)}))));return s.ToastManager.open((0,_.jsx)(f.ActionToast,{id:o,initialAction:u,pendingAction:p})),e._handleReportSubmitted(),d}}componentDidMount(){this.push((0,_.jsx)(d.default,{onTellUsMore:this._handleTellUsMore,onReport:this._handleReport,onPopupCancel:this._handlePopupCancel,onCancel:this._handleCancel}))}}t.default=m},14819:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=o(694816),a=n(o(39770)),i=o(729424),r=o(950452),s=o(857224),c=o(548360),d=o(667294),u=n(o(156720)),f=o(785893);const p={display:"p357zi0d"},h={display:"p357zi0d",paddingTop:"emrlamx0",paddingEnd:"f9ovudaz",paddingBottom:"aiput80m",paddingStart:"gx1rr48f",cursor:"ajgl1lbb"},g={marginTop:"qt60bha0",marginEnd:"spjzgwxb"},_={position:"g0rxnol2",flex:"a1m9qzja"},m={display:"l7jjieqr"},C=["NO_MATCH","SPAM","ILLEGAL","SCAM","KNOCKOFF","OTHER"];function v(e){let{reason:t,isChecked:o,onChange:n}=e;return(0,f.jsx)("li",{children:(0,f.jsxs)("label",{className:(0,u.default)(h),children:[(0,f.jsx)("input",{type:"radio",name:t,value:t,onChange:n,className:(0,u.default)(g),checked:o}),(0,f.jsx)(S,{reason:t})]})})}function b(e,t){const{onCancel:o,onTellUsMoreSubmit:n}=e,[h,g]=(0,d.useState)(null),b=()=>{null==o||o()},S=e=>{e.target.value&&g(e.target.value)},P=c.fbt._("Tell us more",null,{hk:"2fZHoO"}),T=(0,f.jsx)("div",{className:(0,u.default)(p),children:(0,f.jsx)("ul",{className:(0,u.default)(_),children:C.map((e=>(0,f.jsx)(v,{reason:e,isChecked:h===e,onChange:S},`ReportProductReasonPopup-${e}-option`)))})}),y=(0,f.jsx)(a.default,{testid:"popup-controls-submit",type:"primary",onClick:()=>{h?n(h):l.ToastManager.open((0,f.jsx)(r.Toast,{msg:c.fbt._("Please select a reason.",null,{hk:"3UgUaa"}),id:(0,r.genId)()}))},disabled:!h,children:c.fbt._("Submit",null,{hk:"3npRPm"})},"ReportProductReasonPopup-submitButton"),k=(0,f.jsx)(a.default,{type:"secondary",testid:"popup-controls-cancel",onClick:b,children:c.fbt._("Cancel",null,{hk:"H0gNq"})},"ReportProductReasonPopup-cancelButton"),x=(0,f.jsxs)("div",{className:(0,u.default)(m),children:[k,y]});return(0,f.jsx)(i.HotKeys,{ref:t,handlers:{escape:b},children:(0,f.jsx)(s.Modal,{title:P,actions:x,children:T})})}function S(e){const{reason:t}=e;switch(t){case"NO_MATCH":return c.fbt._("The pictures or descriptions don't match the item",null,{hk:"2ifaot"});case"SPAM":return c.fbt._("This is spam",null,{hk:"hjxQJ"});case"ILLEGAL":return c.fbt._("This is abusive, harmful or illegal",null,{hk:"3xz9jr"});case"SCAM":return c.fbt._("This is fraud or a scam",null,{hk:"2iFRd8"});case"KNOCKOFF":return c.fbt._("This appears to be a knockoff or counterfeit item",null,{hk:"UiFcs"});case"OTHER":return c.fbt._("Other",null,{hk:"1Kn4LY"});default:throw new Error(`Invalid reason: ${t}`)}}var P=(0,d.forwardRef)(b);t.default=P},696222:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{isEditMode:t,catalog:o,subtitle:n,hideIncompleteRows:h,productsToShow:g,businessProfile:_}=e;const m=(0,p.jsx)(d.default,{onViewShopClick:()=>{(0,r.logShopsManagementEvent)(s.default.SHOPS_MANAGEMENT_ACTION.ACTION_CLICK_VIEW_SHOPS_FROM_EDIT_BIZ_PROFILE)},onCommerceManagerClick:()=>{(0,r.logShopsManagementEvent)(s.default.SHOPS_MANAGEMENT_ACTION.ACTION_CLICK_COMMERCE_MANAGER_FROM_EDIT_BIZ_PROFILE)},onCancelClick:()=>{(0,r.logShopsManagementEvent)(s.default.SHOPS_MANAGEMENT_ACTION.ACTION_CLICK_CANCEL_FROM_EDIT_BIZ_PROFILE)}});return(0,p.jsx)(c.default,{onProductDetail:function(e){if(t)i.ModalManager.open(m),(0,r.logShopsManagementEvent)(s.default.SHOPS_MANAGEMENT_ACTION.ACTION_CLICK_SHOPS_PRODUCT_PREVIEW_TILE,{shouldLogJid:!1});else{const t=new URL((0,l.default)(e.url,"product.url"),`https://${u.HOSTNAME.FACEBOOK}`);a.default.open(String(t))}},onProductCatalog:function(){t?(i.ModalManager.open(m),(0,r.logShopsManagementEvent)(s.default.SHOPS_MANAGEMENT_ACTION.ACTION_CLICK_MANAGE_SHOPS)):(0,f.goToShop)(_)},catalog:o,subtitle:n,hideIncompleteRows:h,productsToShow:g,showShopsLogo:!0})};var l=n(o(145095)),a=n(o(379264)),i=o(914597),r=o(144262),s=n(o(471410)),c=n(o(542953)),d=n(o(195042)),u=o(640875),f=o(794010),p=o(785893)},227105:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleGrievanceOfficerDetailsError=t.handleCustomerCareDetailsError=t.getLegalEntityDetails=t.ComplianceInfoStructuralField=t.ComplianceInfoPrimitiveField=t.ComplianceInfoLoading=t.ComplianceInfoHelpCenterBanner=t.ComplianceInfoGroup=void 0;var l=n(o(348926)),a=o(374316),i=n(o(568064)),r=o(128298),s=n(o(435721)),c=o(912591),d=o(429623),u=n(o(748846)),f=o(111054),p=o(113923),h=n(o(262738)),g=n(o(833308)),_=o(493581),m=o(548360),C=n(o(156720)),v=o(785893);const b={fieldLabel:{display:"f804f6gw",lineHeight:"gz7w46tb"},fieldValue:{display:"f804f6gw",wordBreak:"cw3vfol9",whiteSpace:"c2jc77nu"},helpCenterBanner:{fontSize:"f8jlpxt4",lineHeight:"jgi8eev7"},displayRight:{textAlign:"cb8ormfa"}},S=()=>m.fbt._("Not Provided",null,{hk:"43OpXI"});t.ComplianceInfoGroup=e=>{let{title:t,children:o}=e;return(0,v.jsx)(g.default,{title:t,xstyle:r.uiPadding.vert8,children:o})};t.ComplianceInfoPrimitiveField=e=>{let{value:t,label:o,forceLTR:n}=e;return(0,v.jsxs)(P,{children:[(0,v.jsx)(k,{value:t,forceLTR:n}),(0,v.jsx)(y,{label:o})]})};t.ComplianceInfoStructuralField=e=>{let{valuesMap:t={},keys:o=[],label:n}=e;const l=o.reduce(((e,o)=>t[o]?e.concat(t[o]):e),[]),a=l.length?l.join(", "):S();return(0,v.jsxs)(P,{children:[(0,v.jsx)(k,{value:a}),(0,v.jsx)(y,{label:n})]})};const P=e=>{let{children:t}=e;return(0,v.jsx)(s.default,{multiline:!0,restrictSpacing:!0,children:(0,v.jsx)("div",{className:(0,C.default)(r.uiPadding.vert8),children:t})})};t.ComplianceInfoLoading=()=>(0,v.jsx)(d.FlexRow,{align:"center",justify:"center",testid:"compliance-info-loading",children:(0,v.jsx)(u.default,{children:(0,v.jsx)(f.Spinner,{})})});t.ComplianceInfoHelpCenterBanner=e=>{let{xstyle:t}=e;return(0,v.jsxs)("div",{className:(0,C.default)(b.helpCenterBanner,t),"data-testid":"compliance-help-center-banner",children:[m.fbt._("Indian law requires additional information from businesses selling online.",null,{hk:"1zuHU2"})," ",(0,v.jsx)(c.ExternalLink,{href:"https://faq.whatsapp.com/general/account-and-profile/how-to-comply-with-the-laws-for-selling-online-in-India",children:m.fbt._("Learn more",null,{hk:"1JNnQ1"})})]})};const T=function(){var e=(0,l.default)((function*(e){const t=(e=>(Array.isArray(e)?e[0]:e).serialize())(yield _.BusinessProfileCollection.update(e,{getMerchantCompliance:!0}));if(t)return t.legalEntityDetails||void 0;__LOG__(3)`compliance: cannot fetch business details (${e.toString()})`}));return function(){return e.apply(this,arguments)}}();t.getLegalEntityDetails=T;const y=e=>{let{label:t}=e;return(0,v.jsx)("div",{className:(0,C.default)(b.fieldLabel),"data-testid":"compliance-info-field-label",children:(0,v.jsx)(p.TextSpan,{theme:"muted",children:t})})},k=e=>{let{value:t,forceLTR:o=!1}=e;const n=i.default.isRTL();return(0,v.jsx)("div",{className:(0,C.default)(b.fieldValue,r.uiMargin.vert3,n&&o&&b.displayRight),dir:o||!n?"ltr":"rtl","data-testid":"compliance-info-field-value",children:t||S()})};t.handleCustomerCareDetailsError=(e,t,o,n)=>{(0,a.existsCustomerCareDetailsContact)(e,t,o,n)||(0,h.default)(m.fbt._("At least one phone number is required. Please provide another phone number before removing this.",null,{hk:"2LGoJd"}))};t.handleGrievanceOfficerDetailsError=(e,t,o,n)=>{(0,a.existsGrievanceOfficerDetailsContact)(e,t,o,n)||(0,h.default)(m.fbt._("At least one contact method is required. Please provide another contact method first before removing this.",null,{hk:"NXBiy"}))}},698046:(e,t,o)=>{"use strict";var n=o(280366).default,l=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{images:t,renderFallback:o,fallbackMediaData:l,fetching:m,onClick:v}=e,b=(0,_.useRef)(null),S=(0,_.useRef)(null),P=(0,_.useRef)(null),T=(0,_.useRef)(null),y=(0,_.useRef)(null),[k,x]=(0,_.useState)(null),[I,E]=(0,_.useState)(t.filter((e=>e.mediaData.mediaStage===h.MEDIA_DATA_STAGE.RESOLVED)).length),[j,O]=(0,_.useState)(!1),A=I===t.length,w=()=>E((e=>e+1));(0,_.useEffect)((()=>{let e=null;if(!A&&!o){var t,l;const o=S.current;if(!o)return;null===(t=P.current)||void 0===t||t.controller.abort(),e=new n;const s=e.signal,c=((null===(l=P.current)||void 0===l?void 0:l.promise)||Promise.resolve()).then((()=>(0,r.default)(o,{opacity:[1,0]},{delay:75,duration:50}))),d=(0,i.default)(c,s).then((()=>{if(s.aborted)throw new a.AbortError;O(!0)})).catch((0,a.catchAbort)((()=>{(0,r.default)(o,"stop",!0)}))).finally((()=>{P.current=null}));P.current={promise:d,controller:e}}return()=>{var t;null===(t=e)||void 0===t||t.abort()}}),[A,o]);const L=()=>{var e;return(null===(e=b.current)||void 0===e?void 0:e.children)?b.current.scrollWidth===b.current.offsetWidth?null:0===b.current.scrollLeft?"next":b.current.scrollWidth-1<=b.current.scrollLeft+b.current.offsetWidth?"prev":"both":null};if((0,_.useEffect)((()=>{x(L())}),[A]),o&&0===t.length)return(0,C.jsx)("div",{className:c.default.carousel,dir:"ltr",children:(0,C.jsx)("div",{className:(0,g.default)(c.default.contentContainer,c.default.slidesContainer),children:l&&(0,C.jsx)(d.default,{altText:"",mediaData:l,renderFallback:!0,singleSlide:!0})})});let M,N,R;const D=()=>{T.current=null;const e=L();k!==e&&x(e)};if(t.length>1){const e=()=>{const e=b.current;if(null!=e&&("prev"===k||"both"===k)){let t=0;const o=e.scrollLeft+Math.floor(e.offsetWidth/2);let n=e.lastElementChild;for(;n instanceof HTMLElement&&0===t;){const e=n.offsetLeft+Math.floor(n.offsetWidth/2);e<o&&(t=e-o),n=n.previousElementSibling}0!==t&&e.scrollBy({left:t,behavior:"smooth"})}},t=()=>{const e=b.current;if(null!=e&&("next"===k||"both"===k)){let t=0;const o=e.scrollLeft+Math.floor(e.offsetWidth/2);let n=e.firstElementChild;for(;n instanceof HTMLElement&&0===t;){const e=n.offsetLeft+Math.floor(n.offsetWidth/2);o<e&&(t=e-o),n=n.nextElementSibling}0!==t&&e.scrollBy({left:t,behavior:"smooth"})}},o=()=>{y.current=null;const e=L();k!==e&&x(e)};R=()=>{null==y.current&&(y.current=requestAnimationFrame(o))},A&&null!=k&&(M=(0,C.jsx)(s.ChevronButton,{type:s.ButtonType.Prev,onClick:e,onKeyDown:e,disabled:"prev"!==k&&"both"!==k,theme:f.RoundTheme.Small,overMedia:!0}),N=(0,C.jsx)(s.ChevronButton,{type:s.ButtonType.Next,onClick:t,onKeyDown:t,disabled:"next"!==k&&"both"!==k,theme:f.RoundTheme.Small,overMedia:!0}))}const B=1===t.length,W=t.map(((e,t)=>(0,C.jsx)(d.default,{altText:"",image:e,singleSlide:B,mediaData:e.mediaData,onClick:v,onLoad:w},t))),F=A?null:(0,C.jsx)("div",{className:(0,g.default)(c.default.contentContainer,c.default.spinnerContainer),children:(0,C.jsx)("div",{className:c.default.spinner,ref:S,children:(0,C.jsx)(p.Spinner,{color:"default",size:50,stroke:4})})}),H=(0,g.default)(c.default.carousel,{[c.default.loaded]:!m&&A,[c.default.fadeIn]:j});return(0,C.jsxs)("div",{className:H,dir:"ltr",children:[F,(0,C.jsx)("div",{ref:b,className:(0,g.default)(c.default.contentContainer,c.default.slidesContainer),onScroll:R,children:W}),M,N,(0,C.jsx)(u.default,{onResize:()=>{null==T.current&&(T.current=requestAnimationFrame(D))}})]})};var a=o(389385),i=l(o(747259)),r=l(o(462831)),s=o(61991),c=l(o(255140)),d=l(o(798491)),u=l(o(108694)),f=o(482857),p=o(111054),h=o(58668),g=l(o(294184)),_=o(667294),m=l(o(730523)),C=o(785893);m.default.polyfill()},798491:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(o(257246)),a=o(58668),i=o(667294),r=o(735461),s=o(785893);var c=e=>{let{mediaData:t,altText:o,image:n,singleSlide:c,renderFallback:d,onClick:u,onLoad:f,forwardRef:p}=e;const{fullHeight:h,fullWidth:g,mediaStage:_,renderableUrl:m}=(0,r.useModelValues)(t,["fullHeight","fullWidth","mediaStage","renderableUrl"]),C=(0,i.useRef)(null),v=(0,i.useRef)(_===a.MEDIA_DATA_STAGE.RESOLVED);(0,i.useEffect)((()=>{!f||v.current||d||_!==a.MEDIA_DATA_STAGE.RESOLVED||(f(),v.current=!0)}),[f,d,_]);const b=!!c;let S=g&&h?g/h:.8;S<.8&&(S=.8),S>1.91&&(S=1.91),S>1&&!b&&(S=1);const P={width:b&&S<1?100*S+"%":1!==S||c?null:"100%"},T={paddingTop:`${Math.floor(100/S)}%`},y={cursor:""+(u?"pointer":"auto")};return(0,s.jsx)("div",{ref:p?e=>p(e):null,className:l.default.slide,style:P,children:(0,s.jsx)("div",{className:l.default.slideInnerContainer,style:T,children:(0,s.jsx)("img",{ref:C,alt:o,src:m,className:l.default.image,style:y,draggable:"false",onClick:()=>{u&&C.current&&n&&u(C.current,n)}})})})};t.default=c},860263:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyCanvas=f,t.MediaGalleryView=function(e){const{mediaCollection:t,fullCollection:o,chat:n,onScroll:l,justify:s}=e,d=e.medias||e.productMedias,h="chat-info"===e.theme;if(!d)return null;let g=(0,c.default)(a.default.container,{[a.default.drawer]:o,[a.default.galleryEmpty]:0===t.length,[a.default.justifySpaceBetween]:"space-between"===s,[a.default.themeChatInfo]:h}),_=[...d];if(t.queryMediaBefore&&(o||_.length<6)){const e=(0,c.default)(a.default.more,a.default.canvasComponent,{[a.default.canvasSecondRow]:!o&&_.length>=3,[a.default.canvasFirst]:0===t.length});_.push((0,u.jsx)("div",{className:e,children:(0,u.jsx)(r.Spinner,{stroke:6,size:24})},"spinner"))}if(0===t.length){if(o)return t.queryMediaBefore?(0,u.jsx)("div",{className:(0,c.default)(a.default.drawer,a.default.drawerBody),children:(0,u.jsx)(i.Loading,{})}):(0,u.jsx)(i.MediaMsgs,{});if(h)return null;t.queryMediaBefore||t.hasMediaBefore||(g=(0,c.default)(g,a.default.galleryEmpty),_=[p(Math.max(n?n.docCount:0,0),Math.max(n?n.linkCount:0,0),Math.max(n?n.productCount:0,0))])}else for(let e=0;e<6;e++)_.push((0,u.jsx)(f,{},"empty"+e));return(0,u.jsx)("div",{onScroll:l,"data-testid":"media-gallery",className:g,children:_})};var l=n(o(568064)),a=n(o(470764)),i=o(685600),r=o(111054),s=o(964551),c=n(o(294184)),d=o(548360),u=o(785893);function f(){return(0,u.jsx)("div",{className:a.default.canvasEmpty})}function p(e,t,o){const n=[];return null!=e&&e>0&&n.push(l.default.t(245,{count:e,_plural:e})),null!=t&&t>0&&n.push(l.default.t(396,{count:t,_plural:t})),s.ServerProps.productMediaAttachments&&null!=o&&o>0&&n.push(l.default.t(543,{count:o,_plural:o})),n.length>0?n.join(l.default.t(254)):s.ServerProps.productMediaAttachments?d.fbt._("No Media, Links, Docs and Products",null,{hk:"3RKA8T"}):d.fbt._("No Media, Links and Docs",null,{hk:"226fK3"})}},610595:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.StickerDetailsStickerPackInfo=function(e){const{name:t,publisher:o,theme:n}=e;return(0,i.jsxs)(a.TextDiv,{theme:"plain",xstyle:[r.container,n===s.StickerStore&&r.stickerStore,n===s.MediaViewer&&r.mediaViewer],children:[t&&(0,i.jsx)(l.EmojiText,{xstyle:r.name,text:t}),t&&o&&(0,i.jsx)(l.EmojiText,{text:" • "}),o&&(0,i.jsx)(l.EmojiText,{text:o})]})},t.Theme=void 0;var l=o(965417),a=o(113923),i=(n(o(156720)),o(785893));const r={container:{color:"hp667wtd",fontSize:"f8jlpxt4",lineHeight:"jgi8eev7",textAlign:"qfejxiq4"},stickerStore:{marginBottom:"e2xccmyv"},mediaViewer:{marginBottom:"r2u2pyhj"},name:{fontSize:"enbbiyaj",lineHeight:"l85iiqla",color:"tl2vja3b"}},s=o(76672).Mirrored(["StickerStore","MediaViewer"]);t.Theme=s},335400:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{catalog:t,onSend:o}=e,n=(0,l.createCatalogLink)(t.id.user),c=t.id.equals((0,a.getMaybeMeUser)())?`${r.fbt._("Follow this link to view our catalog on WhatsApp:",null,{hk:"1bmMoC"}).toString()} ${n}`:n;return(0,s.jsx)(i.default,{text:c,onSend:o})};var l=o(32266),a=o(978820),i=n(o(24158)),r=o(548360),s=o(785893)},361266:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{product:t,onSend:o}=e,n=(0,l.createProductLink)(t.catalogWid.user,t.id.toString()),c=(0,a.isMeAccount)(t.catalogWid)?`${r.fbt._("Follow this link to view our item on WhatsApp:",null,{hk:"H5KuN"}).toString()} ${n}`:n;return(0,s.jsx)(i.default,{text:c,onSend:o})};var l=o(32266),a=o(978820),i=n(o(24158)),r=o(548360),s=o(785893)},24158:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const[t,o]=(0,m.useFlow)(v.Select,{pushTransition:"none",popTransition:"none"}),n=(0,_.useRef)([]),b=(0,_.useRef)([]),S=function(){var e=(0,l.default)((function*(e){e.isUser&&e.contact.isBlocked()&&(yield(0,a.unblockContact)(e.contact))}));return function(){return e.apply(this,arguments)}}();if(null==o.step)return null;let P;switch(o.step){case v.Select:const t=function(){var e=(0,l.default)((function*(e,t){yield S(e),e.active?d.ComposeBoxActions.paste(e,t):(e.setComposeContents({text:t}),i.Cmd.openChatFromUnread(e).then((t=>{t&&d.ComposeBoxActions.focus(e)})))}));return function(){return e.apply(this,arguments)}}(),a=function(){var n=(0,l.default)((function*(n){if(b.current=n,1===n.length){const l=n[0];yield t(l,e.text),o.end(),window.innerWidth<=s.LAYOUT_2COLUMNS_MAX_WIDTH&&r.DrawerManager.closeDrawerRight()}else o.push(v.TextMessage);e.onSend&&e.onSend()}));return function(){return n.apply(this,arguments)}}();P=(0,C.jsx)(u.SelectModal,{title:e.title||g.fbt._("Send message to",null,{hk:"2kkuQs"}),listType:u.ListType.CHAT_SELECT_MODAL,getInitialItems:()=>n.current,maxItems:h.ServerProps.multicastLimitGlobal,onConfirm:a,onCancel:()=>o.end(),onSelectionChanged:(e,t,o)=>{n.current=o},singleSelectionFooterType:f.FooterType.NEXT,multipleSelectionFooterType:f.FooterType.NEXT});break;case v.TextMessage:const _=(e,t,n)=>{e.forEach(function(){var e=(0,l.default)((function*(e){yield S(e),i.Cmd.once("ui_idle",(()=>{(0,c.sendTextMsgToChat)(e,t,{linkPreview:n})}))}));return function(){return e.apply(this,arguments)}}()),o.end()};P=(0,C.jsx)(p.default,{defaultText:e.text,title:e.title||g.fbt._("Send message to",null,{hk:"2kkuQs"}),onSend:(e,t)=>_(b.current,e,t),onBack:()=>o.pop()})}return(0,C.jsx)(t,{flow:o,children:P})};var l=n(o(348926)),a=o(48826),i=o(781572),r=o(141455),s=o(941906),c=o(781845),d=o(188172),u=o(756728),f=o(218963),p=n(o(409031)),h=o(964551),g=o(548360),_=o(667294),m=o(159083),C=o(785893);const v=o(76672).Mirrored(["Select","TextMessage"])},829929:(e,t,o)=>{"use strict";var n=o(280366).default,l=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.findFirstWebLink=void 0,t.useLinkPreview=function(e,t){const[o,l]=(0,C.useState)(null),c=()=>{l(null)};return(0,C.useEffect)((()=>{if(c(),!e)return;const o=new n,d=o.signal;return(0,i.default)((function*(){try{const o=yield(0,s.default)((0,u.default)(e),d),n=null==o?void 0:o.data;if(!n)return;if(l(n),!n.thumbnailHQ)return;const i=yield function(){return b.apply(this,arguments)}(n.thumbnailHQ,d,t);if(!i)return;l((0,a.default)((0,a.default)({},n),i))}catch(e){if(e.name===r.ABORT_ERROR)return;__LOG__(2)`useLinkPreview: error`}}))(),()=>{o.signal.aborted||o.abort()}}),[e,t]),{linkPreview:o,clearLinkPreview:c}};var a=l(o(81109)),i=l(o(348926)),r=o(389385),s=l(o(747259)),c=l(o(364369)),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var o=v(t);if(o&&o.has(e))return o.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=l?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,o&&o.set(e,n);return n}(o(995726)),u=l(o(632590)),f=l(o(534949)),p=l(o(846220)),h=o(661596),g=l(o(215554)),_=l(o(474460)),m=o(204841),C=o(667294);function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,o=new WeakMap;return(v=function(e){return e?o:t})(e)}function b(){return(b=(0,i.default)((function*(e,t,o){try{const n=yield(0,s.default)(f.default.createFromBase64Jpeg(e),t),l=yield(0,_.default)({thumbnail:n,mediaType:h.MEDIA_TYPES.THUMBNAIL_LINK,mediaKeyInfo:(0,g.default)(),uploadOrigin:(0,p.default)(o),forwardedFromWeb:!1,signal:t,timeout:c.default.MMS_THUMBNAIL_UPLOAD_TIMEOUT,isViewOnce:!1}),a=l.mediaEntry;if(!a)return;return{mediaKey:a.mediaKey,mediaKeyTimestamp:a.mediaKeyTimestamp,thumbnailDirectPath:a.directPath,thumbnailSha256:l.filehash,thumbnailEncSha256:a.encFilehash}}catch(e){if(e.name===r.ABORT_ERROR)return;__LOG__(2)`useLinkPreview.uploadHQPreview: error`}}))).apply(this,arguments)}t.findFirstWebLink=e=>{const t=(0,m.removeCodeBlocks)(e),o=d.findLinks(t,!0)[0];if(o)return o}},197067:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const[t,o]=(0,n.useState)(e);return{value:t,set:o,toggle:(0,n.useCallback)((()=>o((e=>!e))),[]),setTrue:(0,n.useCallback)((()=>o(!0)),[]),setFalse:(0,n.useCallback)((()=>o(!1)),[])}};var n=o(667294)},168419:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const{value:o,set:n,setTrue:i,setFalse:r}=(0,a.default)(!1),s=(0,l.useCallback)((t=>{i(),null!=e&&e(t)}),[i,e]),c=(0,l.useCallback)((e=>{r(),null!=t&&t(e)}),[r,t]);return{isHovered:o,onMouseEnter:s,onMouseLeave:c,setIsHovered:n}};var l=o(667294),a=n(o(197067))},5970:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{collection:t}=e,[o,n]=(0,v.useState)(!1),[S,P]=(0,v.useState)(!1),[T,y]=(0,v.useState)(""),k=()=>{s.ModalManager.close()};if(S)return(0,b.jsx)(m.default,{title:C.fbt._("Request review",null,{hk:"1Rp2pL"}),onOK:k,children:(0,b.jsx)(h.TextDiv,{children:C.fbt._("We will review the collection and if it meets our guidelines, it will be added to your catalog.",null,{hk:"y5vML"})})});const x=T.length<1||o;return(0,b.jsx)(m.default,{title:C.fbt._("Request review",null,{hk:"1Rp2pL"}),onOK:()=>{n(!0);let e=!0;d.QPL.markerStart(c.QuickLogMarkerId.WHATSAPP_COLLECTION_APPEAL),(0,f.handleCollectionAppeal)(t,T).then((()=>{n(!1),P(!0),e=!1,d.QPL.markerEnd(c.QuickLogMarkerId.WHATSAPP_COLLECTION_APPEAL,a.QuickLogActionType.SUCCESS)})).catch((0,l.filteredCatch)(i.ServerStatusCodeError,(()=>{u.ToastManager.open((0,b.jsx)(_.Toast,{msg:C.fbt._("Something went wrong and your request wasn't submitted. Try again.",null,{hk:"3sAwQH"}),id:(0,_.genId)("catalog_collection_appeal_submission_failed")})),n(!1)}))).finally((()=>{e&&d.QPL.markerEnd(c.QuickLogMarkerId.WHATSAPP_COLLECTION_APPEAL,a.QuickLogActionType.FAIL)}))},onCancel:k,okDisabled:x,children:(0,b.jsxs)("form",{children:[(0,b.jsx)(g.TextInput,{testid:"confirm-popup-text-input",placeholder:C.fbt._("Enter reason for this request...",null,{hk:"3U5nE7"}),onChange:e=>{y(e)},value:T,maxLength:1e3}),(0,b.jsx)(p.ExternalLink,{href:r.default.WA_COMMERCE_POLICY_URL,children:C.fbt._("Learn More",null,{hk:"FZuUT"})})]})})};var l=o(450796),a=o(451897),i=o(492574),r=n(o(364369)),s=o(914597),c=o(665397),d=o(669393),u=o(694816),f=o(547217),p=o(912591),h=o(113923),g=o(990011),_=o(950452),m=n(o(452665)),C=o(548360),v=o(667294),b=o(785893)},900958:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{coverPhoto:t,signal:o}=e,[n,g]=(0,p.useState)(!1),[_,m]=(0,p.useState)(null==t?void 0:t.url);return(0,p.useEffect)((()=>{(null==_?void 0:_.pathname)!==(null==t?void 0:t.url.pathname)&&m(null==t?void 0:t.url)}),[t,_]),(0,h.jsx)(f.PhotoPickerLoadable,{type:u.default.COVER_PHOTO,pending:n,readOnly:!1,onImageSet:(e,n)=>{if(g(!0),null==n)return void((null==t?void 0:t.id)&&(0,a.deleteCoverPhoto)(t.id).finally((()=>{g(!1),(0,d.logRemoveCoverPhoto)()})));const u=(0,i.dataURLtoBlob)(n);(0,c.calculateFilehashFromBlob)(u).then((e=>{(0,s.uploadBizCoverPhoto)(u,e,o).then((e=>{o.aborted||((0,a.setCoverPhoto)(e.id,e.ts,e.metaHmac),(0,d.logEditCoverPhoto)())})).catch((0,l.filteredCatch)(r.HttpInvalidResponseError,(()=>{__LOG__(3)`BizCoverPhotoPicker: failed to upload cover photo`}))).catch((()=>{__LOG__(4,void 0,new Error,!0)`BizCoverPhotoPicker: unexpected error uploading cover photo`,SEND_LOGS("biz_cover_photo_upload")})).finally((()=>{g(!1)}))}))},attachToChat:!1,startImage:null==_?void 0:_.toString(),theme:"coverPhoto"})};var l=o(450796),a=o(854161),i=o(241931),r=o(923082),s=o(7749),c=o(818309),d=o(630426),u=n(o(243556)),f=o(533646),p=o(667294),h=o(785893)},262738:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=o(914597),a=n(o(452665)),i=o(548360),r=o(785893);var s=e=>{l.ModalManager.open((0,r.jsx)(a.default,{okText:i.fbt._("OK",null,{hk:"2KEeHb"}),onOK:()=>l.ModalManager.close(),children:e}))};t.default=s},813712:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const e=new i.CoolOffNux(_,C,{COOL_OFF_START_STORAGE_KEY:a.CoolOffPeriodKeys.CATALOG,MAX_VIEWS_IN_DAYS:1,COOL_OFF_DURATION_IN_DAYS:1});if(e.shouldShow()){const t=(0,g.jsx)(p.default,{onOK:()=>{e.dismiss(),l.ModalManager.close()},children:(0,g.jsxs)(c.FlexColumn,{align:"center",children:[(0,g.jsx)(d.default,{xstyle:m.graphic,children:(0,g.jsx)(u.default,{name:"cart-interstitial-graphic"})}),(0,g.jsx)(f.TextHeader,{theme:"popup-title",children:h.fbt._("New: Add to Cart",null,{hk:"34ysyY"})}),(0,g.jsx)(f.TextParagraph,{color:"secondary",className:s.default.description,children:h.fbt._("Simpler for you to keep track of order inquiries, manage requests, and close sales.",null,{hk:"25ZM2y"})})]})});l.ModalManager.open(t),e.show(),e.startCoolOffToday()}};var l=o(914597),a=o(871579),i=o(295670),r=n(o(471410)),s=n(o(431907)),c=o(429623),d=n(o(748846)),u=n(o(23217)),f=o(113923),p=n(o(452665)),h=o(548360),g=(n(o(156720)),o(785893));const _=a.NuxKeyTypes.COOL_OFF_NUX.CART_INTERSTITIAL,m={graphic:{marginTop:"nylzjxre",marginEnd:"lfum0007",marginBottom:"bvhm1occ",marginStart:"r6x3u63k",color:"bc38n4nm"}},C=r.default.BANNER_TYPES.SMB_CATALOG_CART_INTERSTITIAL},292351:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{onOpenCollections:t}=e;const[o,n]=(0,s.useState)(!1),u=r.CatalogCollection.get((0,l.getMeUser)());return(0,c.useListener)(null==u?void 0:u.collections,"change",(()=>{n(!0)})),o&&(0,d.jsx)(i.default,{children:(0,d.jsx)(a.default,{onClick:t})})};var l=o(978820),a=n(o(931502)),i=n(o(826293)),r=o(599989),s=o(667294),c=o(587550),d=o(785893)},931502:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=o(257243),a=o(871579),i=o(295670),r=o(978820),s=n(o(471410)),c=n(o(122235)),d=n(o(295993)),u=n(o(325550)),f=o(599989),p=o(317239),h=o(548360),g=o(785893);const _=a.NuxKeyTypes.COOL_OFF_NUX.COLLECTIONS,m={COOL_OFF_DURATION_IN_DAYS:2,VIEWS_BEFORE_COOL_OFF_IN_DAYS:1,CLICKS_BEFORE_COOL_OFF:1,MAX_VIEWS_IN_DAYS:2,COOL_OFF_START_STORAGE_KEY:a.CoolOffPeriodKeys.CATALOG};class C extends u.default{render(){const{onClick:e}=this.props,t=new i.CoolOffNux(_,s.default.BANNER_TYPES.SMB_COLLECTION_CREATION,m),o=(0,g.jsx)("span",{className:c.default.actionText,children:h.fbt._("Get started",null,{hk:"m7Zf5"})});return(0,g.jsx)(d.default,{title:h.fbt._("Create new collection",null,{hk:"19zBCQ"}),subtitle:h.fbt._("Group items into collections to stay organized.",null,{hk:"1sDPK6"}),actionText:o,onClick:e,nuxManager:t,theme:"nuxBlue"})}static shouldShow(){return(0,l.getABPropConfigValue)("web_abprop_collections_nux_banner")&&p.Conn.isSMB&&function(){const e=f.CatalogCollection.get((0,r.getMeUser)());if(null==e||null==e.collections)return!1;const t=e.collections.getCollectionModels(!0);return e.productCollection.getProductModels(!0).some((e=>!e.isHidden&&"REJECTED"!==e.reviewStatus))&&0===t.length}()&&(0,i.shouldShowNUX)(_,m)}}t.default=C,C.displayName="CollectionsBanner"},523358:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,s.jsx)(i.default,{testid:"li-share-link",icon:(0,s.jsx)(a.default,{name:"forward",className:l.default.icon}),onClick:e.onClick,children:r.fbt._("Send product",null,{hk:"1wkzue"})})};var l=n(o(537295)),a=n(o(23217)),i=n(o(464738)),r=o(548360),s=o(785893)},839902:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{testid:t,icon:o,iconWidth:n,iconHeight:u,label:f,disabled:p,xstyle:h,onClick:g}=e;const{isHovered:_,onMouseEnter:m,onMouseLeave:C}=function(){const[e,t]=(0,r.useState)(!1),o=(0,r.useCallback)((()=>{t(!0)}),[]),n=(0,r.useCallback)((()=>{t(!1)}),[]);return{isHovered:e,onMouseEnter:o,onMouseLeave:n}}(),v=(0,c.jsx)(a.default,{name:o,directional:!0,color:"teal",width:n,height:u});return(0,c.jsxs)("div",{className:(0,s.default)(d.button,p&&d.disabled,h),onMouseEnter:m,onMouseLeave:C,children:[(0,c.jsx)(l.Round,{inverted:!0,onClick:g,disabled:p,testid:t,hideBackground:p||!_,children:v}),(0,c.jsx)(i.default,{xstyle:d.label,disabled:p,testid:t,onClick:g,children:f})]})};var l=o(482857),a=n(o(23217)),i=n(o(701784)),r=o(667294),s=n(o(156720)),c=o(785893);const d={button:{textAlign:"qfejxiq4"},label:{marginEnd:"jnwc1y2a",marginBottom:"mpdn4nr2",marginStart:"svoq16ka",fontSize:"ovllcyds",marginTop:"qt60bha0",color:"jq3rn4u7"},disabled:{opacity:"ge6flnsz"}}},957501:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.logCatalogClick=function(e,t,o){r({viewBusinessProfileAction:i.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_CATALOG_ICON,catalogSessionId:e,isProfileLinked:t,hasCoverPhoto:o})},t.logCoverPhotoView=function(e,t,o){r({viewBusinessProfileAction:i.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_COVER_PHOTO_IMPRESSION,catalogSessionId:e,isProfileLinked:t,hasCoverPhoto:o})},t.logEmailClick=function(e,t,o){r({viewBusinessProfileAction:i.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_EMAIL,catalogSessionId:e,isProfileLinked:t,hasCoverPhoto:o})},t.logForwardClick=function(e,t,o){r({viewBusinessProfileAction:i.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_FORWARD,catalogSessionId:e,isProfileLinked:t,hasCoverPhoto:o})},t.logHoursClick=function(e,t,o){r({viewBusinessProfileAction:i.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_HOURS,catalogSessionId:e,isProfileLinked:t,hasCoverPhoto:o})},t.logLinkedAccountImpression=function(e,t,o){r({viewBusinessProfileAction:i.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_APP_IMPRESSION,linkedAccount:t,catalogSessionId:e,isProfileLinked:!0,hasCoverPhoto:o})},t.logLinkedFbClick=function(e,t,o){r({viewBusinessProfileAction:i.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_APP_LINK,linkedAccount:i.default.BUSINESS_TOOLS_LINKED_ACCOUNT_TYPE.FACEBOOK,catalogSessionId:e,bizFbSize:s(t),isProfileLinked:!0,hasCoverPhoto:o})},t.logLinkedIgClick=function(e,t,o){r({viewBusinessProfileAction:i.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_APP_LINK,linkedAccount:i.default.BUSINESS_TOOLS_LINKED_ACCOUNT_TYPE.INSTAGRAM,catalogSessionId:e,bizIgSize:s(t),isProfileLinked:!0,hasCoverPhoto:o})},t.logLocationClick=function(e,t,o){r({viewBusinessProfileAction:i.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_LOCATION,catalogSessionId:e,isProfileLinked:t,hasCoverPhoto:o})},t.logMessageClick=function(e,t,o){r({viewBusinessProfileAction:i.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_MESSAGE,catalogSessionId:e,hasCoverPhoto:o})},t.logProfileExit=function(e,t,o,n){r({viewBusinessProfileAction:i.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_EXIT,catalogSessionId:e,scrollDepth:t,isProfileLinked:o,hasCoverPhoto:n})},t.logProfileImpression=function(e,t,o,n){(0,a.smbBizProfileLoggingEnabled)()?new i.default.ViewBusinessProfile({viewBusinessProfileAction:i.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_IMPRESSION,catalogSessionId:e,profileEntryPoint:t,isProfileLinked:o,hasCoverPhoto:n}).commit():new i.default.ViewBusinessProfile({viewBusinessProfileAction:i.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_IMPRESSION,catalogSessionId:e,isProfileLinked:o,hasCoverPhoto:n}).commit()},t.logShopsClick=function(e,t,o){r({viewBusinessProfileAction:i.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_SHOPS_ICON,catalogSessionId:e,isProfileLinked:t,hasCoverPhoto:o})},t.logStatusClick=function(e,t,o){r({viewBusinessProfileAction:i.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_STATUS,catalogSessionId:e,isProfileLinked:t,hasCoverPhoto:o})},t.logVoiceCallClick=function(e,t,o){r({viewBusinessProfileAction:i.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_VOICE_CALL,catalogSessionId:e,isProfileLinked:t,hasCoverPhoto:o})},t.logWebsiteClick=function(e,t,o){r({viewBusinessProfileAction:i.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_WEBSITE,catalogSessionId:e,isProfileLinked:t,hasCoverPhoto:o})};var l=n(o(81109)),a=o(408139),i=n(o(471410));function r(e){const t=new i.default.ViewBusinessProfile((0,l.default)((0,l.default)({},e),{},{isProfileLinked:!!e.isProfileLinked}));t&&t.commit()}function s(e){return e>1e6?i.default.TRUST_SIGNAL_BUCKETS.B1M:e>=1e5?i.default.TRUST_SIGNAL_BUCKETS.B100K:e>=1e4?i.default.TRUST_SIGNAL_BUCKETS.B10K:e>=1e3?i.default.TRUST_SIGNAL_BUCKETS.B1K:e>=501?i.default.TRUST_SIGNAL_BUCKETS.B501:e>=101?i.default.TRUST_SIGNAL_BUCKETS.B101:e>=51?i.default.TRUST_SIGNAL_BUCKETS.B51:e>=11?i.default.TRUST_SIGNAL_BUCKETS.B11:e>=2?i.default.TRUST_SIGNAL_BUCKETS.B2:1===e?i.default.TRUST_SIGNAL_BUCKETS.B1:i.default.TRUST_SIGNAL_BUCKETS.B0}},441470:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{text:t,secondary:o,icon:n,href:g,linkedAccountType:_,onClick:m,rowTheme:C,hasCoverPhoto:v}=e,b=(0,p.jsx)(c.default,{name:n}),S=(0,f.useContext)(u.DrawerContext),P=(0,r.getProductCatalogSessionId)(S);return(0,f.useEffect)((()=>{(0,i.logLinkedAccountImpression)(P,_,v)}),[P,_,v]),(0,p.jsx)(d.default,{testid:"social-row",onClick:()=>{if(void 0!==g){const e=(0,a.getWebsiteLink)(g);l.default.open(e),null==m||m()}},disabled:void 0===g,xstyle:h.button,children:(0,p.jsx)(s.default,{image:b,primary:t,secondary:o,theme:C,idle:void 0===g})})};var l=n(o(379264)),a=o(319496),i=(n(o(471410)),o(957501)),r=o(397567),s=n(o(744356)),c=n(o(23217)),d=n(o(701784)),u=o(427394),f=o(667294),p=(n(o(156720)),o(785893));const h={button:{width:"ln8gz9je"}}},235580:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{showEditHint:t,businessProfile:o,sectionTheme:n="no-padding",rowTheme:_="linked-account"}=e,{fbPage:m,igProfessional:C}=(0,p.useModelValues)(o,["fbPage","igProfessional"]),v=(0,r.getProductCatalogSessionId)((0,f.useContext)(c.DrawerContext)),b=[];if(null==m?void 0:m.displayName){const e=m.likes?u.fbt._({"*":"Facebook • {count} Likes",_1:"Facebook • 1 Like"},[u.fbt._plural(m.likes,"count")],{hk:"4fuveG"}):u.fbt._("Facebook",null,{hk:"2PcUTa"});b.push((0,h.jsx)(i.default,{icon:"logo-facebook-round",text:m.displayName,secondary:e,href:`https://www.facebook.com/${m.id}`,rowTheme:_,onClick:()=>{(0,a.logLinkedFbClick)(v,m.likes,!!o.coverPhoto)},linkedAccountType:l.default.BUSINESS_TOOLS_LINKED_ACCOUNT_TYPE.FACEBOOK,hasCoverPhoto:!!o.coverPhoto},"fb"))}if(null==C?void 0:C.handle){const e=C.followers?u.fbt._({"*":"Instagram • {count} Followers",_1:"Instagram • 1 Follower"},[u.fbt._plural(C.followers,"count")],{hk:"4gGhJG"}):u.fbt._("Instagram",null,{hk:"4kjnWv"});b.push((0,h.jsx)(i.default,{icon:"logo-instagram-color",text:`@${C.handle}`,secondary:e,href:`https://www.instagram.com/${C.handle}`,rowTheme:_,onClick:()=>{(0,a.logLinkedIgClick)(v,C.followers,!!o.coverPhoto)},linkedAccountType:l.default.BUSINESS_TOOLS_LINKED_ACCOUNT_TYPE.INSTAGRAM,hasCoverPhoto:!!o.coverPhoto},"ig"))}if(0===b.length)return null;let S;if(!0===t){const e=u.fbt._("Facebook and Instagram handles can only be edited from the app on your mobile device.",null,{hk:"3JNYRt"});S=(0,h.jsx)(s.EmojiText,{direction:"inherit",xstyle:g.infoText,text:e.toString()})}return(0,h.jsxs)(d.default,{theme:n,children:[b.map((e=>e)),S]})};var l=n(o(471410)),a=o(957501),i=n(o(441470)),r=o(397567),s=o(965417),c=o(427394),d=n(o(833308)),u=o(548360),f=o(667294),p=(n(o(156720)),o(735461)),h=o(785893);const g={infoText:{fontSize:"dsh4tgtl",lineHeight:"jgi8eev7",color:"t35qvd06",paddingStart:"nvib3uz4",paddingEnd:"sjajxv0r",display:"f804f6gw",paddingBottom:"p9a4hubg",paddingTop:"b7n2qyd4",marginTop:"tt8xd2xn"}}},662664:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleTooFewGroups=t.handleRemoveGroup=void 0;var l=n(o(348926)),a=o(914597),i=n(o(293978)),r=n(o(452665)),s=o(548360),c=o(785893);const d=e=>{a.ModalManager.open((0,c.jsx)(r.default,{onOK:()=>a.ModalManager.close(),title:s.fbt._("Cannot remove group from community",null,{hk:"3AsH6T"}),children:s.fbt._('A community must have at least 1 group. You can remove "{group_title}" after adding another group to this community.',[s.fbt._param("group_title",e)],{hk:"3v1qFO"})}))};t.handleTooFewGroups=d;t.handleRemoveGroup=(e,t,o,n,u)=>{2===t?d(n):((e,t,o,n)=>{const d=s.fbt._('Remove "{group_title}" from community?',[s.fbt._param("group_title",o)],{hk:"VrqaU"}),u=s.fbt._('"{group_title}" will no longer be a part of this community. Anyone in this group will still be able to find it from their chats to send messages and make calls.',[s.fbt._param("group_title",o)],{hk:"1iKEHi"});a.ModalManager.open((0,c.jsx)(r.default,{onOK:(0,l.default)((function*(){a.ModalManager.close(),n(!0),yield(0,i.default)(e,[t]),n(!1)})),okText:s.fbt._("Remove",null,{hk:"3xUR13"}),onCancel:()=>a.ModalManager.close(),title:d,children:u}))})(e,o,n,u)}},426609:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{elementId:t,onClick:o}=e;return document.queryCommandSupported("copy")?(0,d.jsx)(i.default,{testid:"li-copy-link",icon:(0,d.jsx)(r.default,{name:"copy",xstyle:u.icon}),onClick:()=>function(e,t){(0,l.default)(e)?a.ToastManager.open((0,d.jsx)(s.Toast,{msg:c.fbt._("Link copied to clipboard.",null,{hk:"2d44NZ"}),id:(0,s.genId)()})):a.ToastManager.open((0,d.jsx)(s.Toast,{msg:c.fbt._("Couldn't copy to clipboard. Copy using mouse or keyboard.",null,{hk:"4aKgWx"}),id:(0,s.genId)()}));null!=t&&t()}(t,o),children:c.fbt._("Copy link",null,{hk:"2ZtjA3"})}):null};var l=n(o(712891)),a=o(694816),i=n(o(464738)),r=n(o(23217)),s=o(950452),c=o(548360),d=(n(o(156720)),o(785893));const u={icon:{color:"rahkaw8d"}}},225653:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=o(88555),a=o(781572),i=o(813042),r=o(705177),s=n(o(352013)),c=o(941906),d=n(o(568064)),u=o(115461),f=o(355715),p=n(o(540436)),h=n(o(60453)),g=n(o(69637)),_=o(994790),m=n(o(158654)),C=o(685600),v=o(729424),b=o(375705),S=n(o(188406)),P=o(111054),T=n(o(23217)),y=o(887931),k=n(o(335563)),x=o(667294),I=n(o(156720)),E=n(o(859312)),j=n(o(616223)),O=o(587550),A=n(o(389113)),w=n(o(290886)),L=n(o(174570)),M=n(o(895402)),N=n(o(803409)),R=o(785893);const D={display:"p357zi0d",flex:"kk3akd72",justifyContent:"ac2vgrno",paddingTop:"a4bywxmn",paddingBottom:"lzi2pvmc",color:"cs9t9or5"},B={position:"lhggkp7q",top:"qq0sjtgm",start:"tkdu00h0",display:"p357zi0d",flexDirection:"f8m0rgwh",width:"ln8gz9je",height:"ppled2lx",overflowX:"gfz4du6o",overflowY:"r7fjleex",pointerEvents:"jv8uhy2r"};function W(e,t){const{msgCollection:o,chat:n=null,onClose:W,title:F,emptyListText:H,footerText:U,headerMenu:G,descriptionSection:z,displayType:V}=e,q=(0,N.default)(),K=(0,M.default)(),Y=(0,E.default)(),Q=(0,L.default)(),J=(0,j.default)((()=>new S.default([],(e=>e.id.toString())))),X=(0,j.default)((()=>new S.default([],(e=>e.id.toString())))),$=(0,j.default)((()=>new Set)),Z=(0,x.useRef)(0),ee=(0,x.useRef)({}),te=(0,x.useRef)(null),oe=(0,x.useRef)(null),ne=()=>b.RenderCursor.create({msgCollection:o,type:b.RENDER_CURSOR.STARRED_DRAWER}).loadAfter(o,{count:i.MSG_PRELOAD_THRESHOLD}),[le,ae]=(0,x.useState)(ne),ie=()=>{const e=o.toArray();J.current.init(e,!0),X.current.init(e)},re=(0,A.default)((()=>{const e=null==n?void 0:n.id;if(le.getEnd(o)<o.length)ae(le.loadAfter(o));else{if(o.isSynced)return;o.sync(e).then((()=>{q.aborted||le.hasAfter(o)&&ae(le.loadAfter(o))})).catch((e=>{__LOG__(2)`MsgDrawer:loadEarlierMsgs failed\n${e}`}))}})),se=e=>{if(!te.current)return;(e?e.target:document.activeElement)===te.current&&(J.current.index<0?J.current.setFirst(!0):J.current.reset(!1))},ce=e=>{J.current.setVal(e),X.current.setVal(e),a.Cmd.openChatAt(e.chat,e.chat.getSearchContext(e)),a.Cmd.focusShowMsg(e.id)},de=()=>{let e=o.toArray();const t=o.isSynced?le.getEnd(o):Math.min(le.getEnd(o),e.length);return e=e.slice(le.getStart(o),t),Z.current=e.length,e},ue=e=>{if(!e)return y.MSG_VISIBILITY.BELOW;const t=oe.current;if(!t)return;const o=t.previousSibling;if(!(o&&o instanceof HTMLElement))return;const n=o.clientHeight,l=t.scrollTop+n,a=l+t.clientHeight,i=e.getContainerElement();return i?i.offsetTop+i.clientHeight<=l?y.MSG_VISIBILITY.ABOVE:i.offsetTop>=a?y.MSG_VISIBILITY.BELOW:y.MSG_VISIBILITY.VISIBLE:y.MSG_VISIBILITY.BELOW},fe=e=>{const t=ee.current[e.toString()];if(!t)return;const o=t.getWrapperRef();return o&&"function"==typeof o.getMsgComponentRef?o.getMsgComponentRef():void 0},pe=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return $.current.has(e.toString())&&(!!t||fe(e))},he=(0,w.default)((()=>{const e=de(),t=new Set;let n=0,l=Z.current-1;for(;n<l;){const t=Math.floor((n+l)/2),o=ee.current[e[t].id.toString()];ue(o)===y.MSG_VISIBILITY.ABOVE?n=t+1:l=t}for(let o=n;o<e.length;o++){const n=ee.current[e[o].id.toString()];if(ue(n)!==y.MSG_VISIBILITY.VISIBLE)break;t.add(e[o].id.toString())}var a,i;a=$.current,i=t,a.forEach((e=>{if(!i.has(e)){const t=o.get(e);if(null==t?void 0:t.isGif){const t=fe(e);(null==t?void 0:t.getPlayCount())&&(null==t||t.pause())}}})),$.current=t}),100),ge=(0,w.default)((e=>{var t;he(),e.currentTarget&&(t=e.currentTarget).scrollTop+c.SCROLL_FUDGE>t.scrollHeight-t.clientHeight&&re()}),100);(0,x.useEffect)((()=>{ie(),te.current&&s.default.focus(te.current),!o.isSynced&&o.length<i.PAGE_SIZE&&Q(re),se()}),[]),(0,x.useEffect)((()=>{he()})),(0,O.useListener)(window,"resize",he),(0,O.useListener)(o,["reset","sync"],(()=>{ie(),Y()})),(0,O.useListener)(o,["add","remove"],(()=>{ie(),Y()})),(0,O.useListener)(o,"reset",(()=>{$.current=new Set,ae(ne()),re()}));const{isSynced:_e,length:me}=o;(0,x.useEffect)((()=>{!_e&&me<i.PAGE_SIZE&&Q(re)}),[re,Q,_e,me]);const Ce=de();let ve,be,Se,Pe;if(be=o.isSynced&&le.getEnd(o)>=Ce.length?null:e.msgCollection.syncPromise?(0,R.jsx)("div",{className:(0,I.default)(D),title:d.default.t(420),children:(0,R.jsx)(P.Spinner,{stroke:6,size:24})}):(0,R.jsx)("div",{className:(0,I.default)(D),children:(0,R.jsx)("div",{title:d.default.t(417),onClick:re,children:(0,R.jsx)(T.default,{name:"refresh"})})}),Ce.length>0){const e=Ce.map((e=>{const t=e.type===u.MSG_TYPE.IMAGE||e.type===u.MSG_TYPE.VIDEO||e.type===u.MSG_TYPE.AUDIO;return(0,R.jsx)(k.default,{ref:t=>{((e,t)=>{t?ee.current[e.id.toString()]=t:delete ee.current[e.id.toString()]})(e,t)},msg:e,isMsgVisible:t?pe:()=>{},currSelection:J.current,activeSelection:X.current,onClickMsg:ce,displayType:V||r.DISPLAY_TYPE.STARRED_MSGS},e.id.toString())}));ve=(0,R.jsx)(p.default,{transitionName:"slide",children:e}),Se=z}else e.msgCollection.isSynced?ve=H:(ve=(0,R.jsx)(C.Loading,{}),be=null);return(0,l.isMDBackend)()&&null!=U&&(Pe=(0,R.jsx)(m.default,{theme:"md-chat-search-list",children:U})),(0,R.jsx)(h.default,{theme:"gallery",ref:t,children:(0,R.jsxs)(v.HotKeys,{className:(0,I.default)(B),handlers:{down:e=>{e&&(e.preventDefault(),e.stopPropagation());const t=J.current.next();J.current.index!==t&&J.current.setNext(!0)},up:e=>{e&&(e.stopPropagation(),e.preventDefault());J.current.prev()>-1&&J.current.setPrev(!0)}},onFocus:se,"data-tab":f.TAB_ORDER.CHAT_STARRED_DRAWER,ref:te,children:[(0,R.jsx)(_.DrawerHeader,{title:F,onBack:()=>{W?W():null==K||K.requestDismiss()},type:_.DRAWER_HEADER_TYPE.LARGE,menu:G}),(0,R.jsxs)(g.default,{onScroll:ge,ref:oe,children:[Se,ve,be,Pe]})]})})}var F=(0,x.forwardRef)(W);t.default=F},871528:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(o(145095)),a=o(914597),i=n(o(462831)),r=n(o(67978)),s=n(o(744356)),c=o(288984),d=o(965417),u=n(o(247065)),f=o(646346),p=n(o(311791)),h=n(o(23217)),g=o(718644),_=n(o(65932)),m=n(o(294184)),C=o(548360),v=o(667294),b=o(785893);class S extends v.Component{constructor(){super(...arguments),this.state={style:{visibility:"hidden"}},this.setRefImage=e=>{this._refImage=e},this._handleImageLoad=e=>{const t=e.currentTarget;this.setState({size:{width:t.naturalWidth,height:t.naturalHeight}},(()=>{this.props.getZoomNode((e=>{const o=t.getBoundingClientRect(),n=e.getBoundingClientRect(),l=n.top-o.top,a={visibility:"hidden",transform:`translateX(${n.left-o.left}px) translateY(${l}px) scale(${e.clientWidth/t.clientWidth})`,transition:"transform 0s",borderRadius:void 0};this.props.animateBorderRadius&&(a.borderRadius="50%"),this.setState({style:a},(()=>{let e={transform:"translateX(0px) translateY(0px) scale(1)",transition:"transform 500ms cubic-bezier(.1,.82,.25,1)"};this.props.animateBorderRadius&&(e={transform:"translateX(0px) translateY(0px) scale(1)",borderRadius:"0%",transition:"transform 500ms cubic-bezier(.1,.82,.25,1),\n                                         border-radius 500ms cubic-bezier(.1,.82,.25,1)"}),this.setState({style:e})}))}))}))},this._handleClose=()=>{if(this.closing)return;let e;if(this.closing=!0,this.props.getZoomNode((t=>{e=t})),!e)return a.ModalManager.closeMedia();const t=this._refImage;if(t){this.props.animateBorderRadius&&(t.style.transition="border-radius 500ms cubic-bezier(.1,.82,.25,1)",t.style.borderRadius="50%");const o=(0,l.default)(e,"start"),n=t.getBoundingClientRect(),r=o.getBoundingClientRect(),s=r.top-n.top,c=r.left-n.left,d=o.clientWidth/t.clientWidth;(0,i.default)(t,{translateX:[c,0],translateY:[s,0],scale:[d,1]},{duration:200,easing:[.1,.82,.25,1]}).then((()=>{a.ModalManager.closeMedia()}))}},this._handleScroll=e=>{Math.abs(e.deltaY)>3&&this._handleClose()}}shouldComponentUpdate(e){return!!e.profilePicThumb.imgFull||(this._handleClose(),!1)}render(){const{contact:e,profilePicThumb:t}=this.props;let o;return t.imgFull&&(o=(0,b.jsx)(u.default,{src:t.imgFull,hasPrivacyChecks:!0,onLoad:this._handleImageLoad,className:r.default.profileViewerImg})),(0,b.jsx)(g.UIE,{displayName:"PhotoViewer",escapable:!0,requestDismiss:this._handleClose,children:(0,b.jsxs)("div",{className:(0,m.default)("overlay",r.default.container),onWheel:this._handleScroll,onClick:this._handleClose,children:[(0,b.jsxs)("div",{className:r.default.headerContainer,children:[(0,b.jsx)("div",{className:r.default.profileThumb,children:(0,b.jsx)(s.default,{image:(0,b.jsx)(c.DetailImage,{id:e.id,size:40}),theme:"plain",primary:(0,b.jsx)(d.EmojiText,{text:e.formattedUser})})}),(0,b.jsx)("div",{className:r.default.mediaPanelTools,children:(0,b.jsx)(f.MenuBar,{theme:"strong",children:(0,b.jsx)(f.MenuBarItem,{testid:"btn-close",icon:(0,b.jsx)(h.default,{name:"x-viewer"}),title:C.fbt._("Close",null,{hk:"19Jpec"}),onClick:this._handleClose})},"media-panel-header")})]}),(0,b.jsx)("div",{className:r.default.profileContainer,dir:"ltr",children:(0,b.jsx)("div",{className:r.default.media,children:(0,b.jsx)(p.default,{type:"scaleDown",size:this.state.size,children:(0,b.jsx)("div",{className:r.default.profileViewer,ref:this.setRefImage,style:this.state.style,children:o})})})})]})})}}S.CONCERNS={contact:["formattedUser","id"],profilePicThumb:["imgFull"]},S.displayName="PhotoViewerModal";var P=(0,_.default)(S,S.CONCERNS);t.default=P},786791:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{profilePicThumb:t,size:o}=e,n=!t.canSet()&&!t.canDelete(),[h,g]=(0,u.useState)(!1),_=(0,f.default)();return(0,p.jsx)(d.PhotoPickerLoadable,{type:c.default.PROFILE,id:t.id,attachToChat:!1,pending:h,startImage:t.imgFull,readOnly:n,onImageSet:(t,o)=>{const n=e.profilePicThumb;let c;g(!0),c=t&&o?(0,s.setProfilePic)(n,t,o):(0,s.deleteProfilePic)(n),(0,i.default)(c,_).catch((0,a.filteredCatch)(r.ActionError,(()=>{__LOG__(3)`ProfileDrawer: failed to set/delete profile image`}))).catch((0,l.catchAbort)((()=>{}))).finally((()=>{g(!1)}))},size:o})};var l=o(389385),a=o(450796),i=n(o(747259)),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var o=h(t);if(o&&o.has(e))return o.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=l?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,o&&o.set(e,n);return n}(o(435232)),s=o(300016),c=n(o(243556)),d=o(533646),u=o(667294),f=n(o(803409)),p=o(785893);function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,o=new WeakMap;return(h=function(e){return e?o:t})(e)}},651628:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,s.jsx)(l.default,{testid:"li-share-link",icon:(0,s.jsx)(a.default,{name:"forward",className:(0,r.default)(c)}),onClick:e.onClick,children:i.fbt._("Send link via WhatsApp",null,{hk:"459eKy"})})};var l=n(o(464738)),a=n(o(23217)),i=o(548360),r=n(o(156720)),s=o(785893);const c={color:"rahkaw8d"}},409031:(e,t,o)=>{"use strict";var n=o(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(o(364369)),a=n(o(60453)),i=n(o(69637)),r=o(994790),s=o(857224),c=n(o(743693)),d=o(965417),u=o(729424),f=o(482857),p=n(o(23217)),h=o(990011),g=o(718644),_=n(o(681880)),m=n(o(151845)),C=o(667294),v=o(829929),b=o(785893);const S=(e,t)=>{const{defaultText:o,title:n,onSend:S,onBack:P}=e,[T,y]=(0,C.useState)(o),k=(0,v.findFirstWebLink)(T),{linkPreview:x,clearLinkPreview:I}=(0,v.useLinkPreview)(k),E=n?(0,b.jsx)(d.EmojiText,{text:n,direction:"auto",titlify:!0,ellipsify:!0}):null,{title:j,canonicalUrl:O,description:A,thumbnail:w}=x||{},L=x?(0,b.jsx)(g.UIE,{displayName:"ComposeBoxLinkPreview",escapable:!0,requestDismiss:I,children:(0,b.jsx)(_.default,{onOmit:I,children:(0,b.jsx)(m.default,{title:j,compose:!0,canonicalUrl:O,description:A,thumbnailJpeg:w})})}):null;return(0,b.jsx)(s.Modal,{ref:t,type:s.ModalTheme.Box,children:(0,b.jsxs)(a.default,{children:[(0,b.jsx)(r.DrawerHeader,{type:r.DRAWER_HEADER_TYPE.POPUP,onBack:P,children:E}),(0,b.jsx)(i.default,{children:(0,b.jsxs)(u.HotKeys,{className:c.default.container,children:[(0,b.jsx)("div",{className:c.default.inputContainer,children:(0,b.jsx)(h.TextInput,{testid:"text-message-modal-text-unput",value:T,maxLength:l.default.MAX_TXT_MSG_SIZE,onChange:e=>{y(e)},supportsEmoji:!0,multiline:!0,spellCheck:!0,showRemaining:!0,focusOnMount:!0,theme:"small"})}),L]})}),(0,b.jsx)("div",{className:c.default.btnContainer,children:(0,b.jsx)("div",{className:c.default.btnPosition,children:(0,b.jsx)(f.Round,{large:!0,onClick:()=>{T.length&&S(T,x)},children:(0,b.jsx)(p.default,{name:"send",directional:!0})})})})]})})};var P=(0,C.forwardRef)(S);t.default=P},712891:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){window.getSelection().removeAllRanges();const t=document.getElementById(e),o=document.createRange();t&&o.selectNode(t),window.getSelection().addRange(o);try{const e=document.execCommand("copy");return window.getSelection().removeAllRanges(),e}catch(e){return!1}}},495941:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>n});const n={coverPhoto:"_3bmNw",isEditable:"_1k-Tj",avatar:"_1KIoW",noStatusBorder:"kNRox",hasStatusBorder:"_8N7c7",coverPhotoImage:"D-p9K"}},65753:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>n});const n={labelRow:"_49vG",standaloneLabelRow:"_2l3_Y",labelContainer:"_1Nfyf",standaloneLabelContainer:"DENbs"}},649762:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>n});const n={productImage:"fkslc",productImageContainer:"_18n4q",productThumb:"IO4T6",productThumbContainer:"ime-i",prompt:"_3OFgQ"}},72940:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>n});const n={header:"_16mlH",photo:"_21sHs",text:"_2lk6f",name:"pTNRM",description:"_2GV6F",spinner:"O1bTA",img:"_3i1KT"}},255140:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>n});const n={carousel:"alksS",contentContainer:"OkAlG",slidesContainer:"_1w5W1",loaded:"j1J2j",fadeIn:"_2QkLV",spinnerContainer:"_1kDDe",spinner:"_3j4fM"}},257246:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>n});const n={slide:"_2MjCA",slideInnerContainer:"_2cG76",image:"ubkU5"}},470764:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>n});const n={canvasComponent:"_1OaQb",canvasEmpty:"_3jEqW",canvasSecondRow:"_13Jdf",canvasFirst:"az8Pk",more:"_2e4dR",container:"_1TLrW",justifySpaceBetween:"_2UyBh",galleryEmpty:"_160BB",drawer:"v7KVf",drawerBody:"_1QjIY",themeChatInfo:"_1Y056"}},431907:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>n});const n={description:"_1PJIk"}},122235:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>n});const n={actionText:"-KBcF"}},537295:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>n});const n={icon:"_3ovSZ"}},67978:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>n});const n={mediaPanelTools:"f3Dup",profileThumb:"_2xUs5",profileContainer:"Cq6XJ",media:"_1_TZb",profileViewer:"_3OWRM",profileViewerImg:"_2hH_e",container:"_9-YHG","media-viewer-animate":"_7DTuk",mediaViewerAnimate:"_7DTuk",headerContainer:"_1U_13"}},743693:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>n});const n={container:"_1ufTj",inputContainer:"_1rO5S",btnContainer:"_3KRZ3",btnPosition:"D6yuB"}}}]);
//# sourceMappingURL=https://web.whatsapp.com/lazy_loaded_high_priority_components~lazy_loaded_low_priority_components.94f0b7d67c55c199b769.js.map
