/*! Copyright (c) 2021 WhatsApp Inc. All Rights Reserved. */
(self.webpackChunkwhatsapp_web_client=self.webpackChunkwhatsapp_web_client||[]).push([[9488],{10882:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.formatRemoveResult=function(e,t){return s(e,f,h,p,t)},t.formatResult=s,t.formatParticipantActionString=d,t.formatGroupStatusReasonString=u,t.formatParticipantStatusReasonString=c,t.addSuccessString=function(e,t){return o.default.t(169,{participantNames:e,_plural:t})},t.addFailedString=function(e,t){return o.default.t(167,{participantNames:e,_plural:t})},t.addPartialFailedString=function(){return o.default.t(168)},t.removeSuccessString=f,t.removeFailedString=h,t.removePartialFailedString=p,t.promoteSuccessString=function(e,t){return o.default.t(182,{participantNames:e,_plural:t})},t.promoteFailedString=function(e,t){return o.default.t(180,{participantNames:e,_plural:t})},t.promotePartialFailedString=function(){return o.default.t(181)},t.demoteFailedString=function(e,t,a){switch(a){case 406:return o.default.t(172,{participant:e});default:return o.default.t(171,{participantNames:e,_plural:t})}},t.demoteSuccessString=function(e,t){return o.default.t(174,{participantNames:e,_plural:t})},t.demotePartialFailedString=function(){return o.default.t(173)};var l=r(a(62899)),n=r(a(77188)),o=r(a(80162)),i=r(a(53680));function s(e,t,a,r,o){var s;if(207===e.status){var f={};for(var h in e)if(i.default.isWid(h)){var p=e[h];if((403!==p||!n.default.supportsFeature(n.default.F.GROUPS_V_4_JOIN_PERMISSION))&&207!==p){f[p]||(f[p]=[]);var m=l.default.get(h);m&&f[p].push(m)}}var g=[];for(var _ in f){var C=d(t,a,c,parseInt(_,10),f[_]);C&&g.push(C)}s=g.length>0?g.join("\n"):r()}else s=d(t,a,u,e.status,o);return s}function d(e,t,a,r,l){var n=l.map((e=>e.formattedShortName)).join(o.default.t(724)),i=200===r;return(i?e(n,l.length):t(n,l.length,r))+(i?"":a(r,l.length))}function u(e){var t="";switch(e){case 403:t=" "+o.default.t(117);break;case 408:t=" "+o.default.t(177);break;case 404:t=" "+o.default.t(118);break;case 429:t=" "+o.default.t(119)}return t}function c(e,t){var a="";switch(e){case 401:case 406:case 409:break;case 404:a=" "+o.default.t(176,{_plural:t});break;case 408:a=" "+o.default.t(177,{_plural:t});break;case 500:a=" "+o.default.t(178);break;default:a=" "+o.default.t(179)}return a}function f(e,t){return o.default.t(187,{participantNames:e,_plural:t})}function h(e,t,a){switch(a){case 406:return o.default.t(186,{participant:e});default:return o.default.t(184,{participantNames:e,_plural:t})}}function p(){return o.default.t(185)}},95801:(e,t,a)=>{"use strict";var r=a(20862),l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addParticipants=function(e,t){return h((0,f.unproxy)(e),t)},t.removeParticipants=function(e,t){return p((0,f.unproxy)(e),t)},t.promoteParticipants=function(e,t){return m((0,f.unproxy)(e),t)},t.demoteParticipants=function(e,t){return g((0,f.unproxy)(e),t)};var n=l(a(67294)),o=a(84481),i=l(a(33766)),s=r(a(12536)),d=r(a(10882)),u=l(a(80162)),c=a(37283),f=a(6578);function h(e,t,a=(0,o.genId)()){var r,l=null===(r=e.groupMetadata)||void 0===r?void 0:r.participants;if(null==l)return Promise.reject(new s.ActionError);if(t.some((e=>l.get(e.id))))return __LOG__(3)`models:groupMetadata:participantCollection:addParticipants already a group member`,Promise.reject(new s.ActionError);if(!l.canAdd())return Promise.reject(new s.ActionError);var f=(0,c.sendAddParticipants)(e.id,t.map((e=>e.id))),p=t.map((e=>e.formattedShortName)).join(u.default.t(724)),m=new o.ActionType(u.default.t(170,{participantNames:p,_plural:t.length})),g=f.then((e=>{l.sendForNeededAddRequest(e);var a=d.formatResult(e,d.addSuccessString,d.addFailedString,d.addPartialFailedString,t);return new o.ActionType(a)})).catch((()=>(__LOG__(3)`models:groupMetadata:participantCollection:addParticipants dropped`,new o.ActionType(u.default.t(167,{participantNames:p,_plural:t.length}),{actionText:u.default.t(207),actionHandler:()=>h(e,t,a)}))));return i.default.openToast(n.default.createElement(o.ActionToast,{id:a,initialAction:m,pendingAction:g})),f.then((()=>{}))}function p(e,t,a=(0,o.genId)()){var r,l=null===(r=e.groupMetadata)||void 0===r?void 0:r.participants;if(null==l)return Promise.reject(new s.ActionError);if(t.some((e=>!l.canRemove(e))))return Promise.reject(new s.ActionError);var f=(0,c.sendRemoveParticipants)(e.id,t.map((e=>e.id))),h=t.map((e=>e.contact.formattedShortName)).join(u.default.t(724)),m=new o.ActionType(u.default.t(188,{participantNames:h,_plural:t.length})),g=f.then((e=>{var a=d.formatRemoveResult(e,t.map((e=>e.contact)));return new o.ActionType(a)})).catch((()=>(__LOG__(3)`models:groupMetadata:participantCollection:removeParticipants dropped`,new o.ActionType(u.default.t(184,{participantNames:h,_plural:t.length}),{actionText:u.default.t(207),actionHandler:()=>p(e,t,a)}))));return i.default.openToast(n.default.createElement(o.ActionToast,{id:a,initialAction:m,pendingAction:g})),f.then((()=>{}))}function m(e,t,a=(0,o.genId)()){var r,l=null===(r=e.groupMetadata)||void 0===r?void 0:r.participants;if(null==l)return Promise.reject(new s.ActionError);if(t.some((e=>!l.canPromote(e))))return Promise.reject(new s.ActionError);var f=(0,c.sendPromoteParticipants)(e.id,t.map((e=>e.id))),h=t.map((e=>e.contact.formattedShortName)).join(u.default.t(724)),p=new o.ActionType(u.default.t(183,{participantNames:h,_plural:t.length})),g=f.then((e=>{var a=d.formatResult(e,d.promoteSuccessString,d.promoteFailedString,d.promotePartialFailedString,t.map((e=>e.contact)));return new o.ActionType(a)})).catch((()=>(__LOG__(3)`models:groupMetadata:participantCollection:removeParticipants dropped`,new o.ActionType(u.default.t(180,{participantNames:h,_plural:t.length}),{actionText:u.default.t(207),actionHandler:()=>m(e,t,a)}))));return i.default.openToast(n.default.createElement(o.ActionToast,{id:a,initialAction:p,pendingAction:g})),f.then((()=>{}))}function g(e,t,a=(0,o.genId)()){var r,l=null===(r=e.groupMetadata)||void 0===r?void 0:r.participants;if(null==l)return Promise.reject(new s.ActionError);if(t.some((e=>!l.canDemote(e))))return Promise.reject(new s.ActionError);var f=(0,c.sendDemoteParticipants)(e.id,t.map((e=>e.id))),h=t.map((e=>e.contact.formattedShortName)).join(u.default.t(724)),p=new o.ActionType(u.default.t(175,{participantNames:h,_plural:t.length})),m=f.then((e=>{var a=d.formatResult(e,d.demoteSuccessString,d.demoteFailedString,d.demotePartialFailedString,t.map((e=>e.contact)));return new o.ActionType(a)})).catch((()=>(__LOG__(3)`models:groupMetadata:participantCollection:demoteParticipants dropped`,new o.ActionType(u.default.t(171,{participantNames:h,_plural:t.length}),{actionText:u.default.t(207),actionHandler:()=>g(e,t,a)}))));return i.default.openToast(n.default.createElement(o.ActionToast,{id:a,initialAction:p,pendingAction:m})),f.then((()=>{}))}},55531:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.removeGroupParticipants=function(e,t){return p(e,t,u).catch((e=>{__LOG__(3)`error sending removing group participants iq: ${e}`}))},t.addGroupParticipants=function(e,t){return p(e,t,c).catchType(i.ServerStatusCodeError,(e=>({status:e.statusCode})))},t.demoteGroupParticipants=function(e,t){return p(e,t,f).catch((e=>{__LOG__(3)`error sending demoting group participants iq: ${e}`}))},t.promoteGroupParticipants=function(e,t){return p(e,t,h).catch((e=>{__LOG__(3)`error sending promoting group participants iq: ${e}`}))};var l=r(a(81109)),n=a(34176),o=a(60110),i=a(54438),s=r(a(90737)),d=a(31668),u="remove",c="add",f="demote",h="promote";function p(e,t,a){var r,p=t.map((e=>(0,n.wap)("participant",{jid:(0,d.JID)(e)})));switch(a){case c:r=(0,n.wap)("add",null,p);break;case u:r=(0,n.wap)("remove",null,p);break;case f:r=(0,n.wap)("demote",null,p);break;case h:r=(0,n.wap)("promote",null,p);break;default:return Promise.reject(new Error(`invalid group operation ${a}`))}var m=(0,n.wap)("iq",{to:(0,d.GROUP_JID)(e),type:"set",xmlns:"w:g2",id:(0,n.generateId)()},r);return(0,o.sendIq)(m,function(e){return new s.default(`${e}GroupParticipantsReplyParser`,(t=>({id:t.attrString("id"),participants:t.child(e).mapChildren((e=>{var t=e.maybeChild("add_request");return{wid:e.attrUserWid("jid"),error:e.hasAttr("error")?e.attrInt("error"):null,invite_code:t&&t.attrString("code"),invite_code_exp:t&&t.attrString("expiration")}}))})))}(a)).then((e=>{if(e.success){var{participants:t}=e.result,a={};return t.forEach((e=>{Object.assign(a,{[e.wid.toString()]:null!=e.error?e.error:200})})),(0,l.default)((0,l.default)({},a),{},{status:207,participants:t.map((e=>({[e.wid.toString()]:{code:null!=e.error&&e.error.toString()||"200",invite_code:e.invite_code,invite_code_exp:e.invite_code_exp}})))})}return Promise.reject(new i.ServerStatusCodeError(e.errorCode,e.errorText))}))}},37283:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendAddParticipants=function(e,t){var a;if(l.default.supportsFeature(l.default.F.MD_BACKEND)){if(!(a=(0,o.addGroupParticipants)(e,t)))return Promise.reject(new Error("addParticipants: not supported when not build with MD_BACKEND"))}else a=n.default.addParticipants(e,t);return a},t.sendRemoveParticipants=function(e,t){var a;if(l.default.supportsFeature(l.default.F.MD_BACKEND)){if(!(a=(0,o.removeGroupParticipants)(e,t)))return Promise.reject(new Error("sendRemoveParticipants: not supported when not build with MD_BACKEND"))}else a=n.default.removeParticipants(e,t);return a},t.sendDemoteParticipants=function(e,t){var a;if(l.default.supportsFeature(l.default.F.MD_BACKEND)){if(!(a=(0,o.demoteGroupParticipants)(e,t)))return Promise.reject(new Error("sendDemoteParticipants: not supported when not build with MD_BACKEND"))}else a=n.default.demoteParticipants(e,t);return a},t.sendPromoteParticipants=function(e,t){var a;if(l.default.supportsFeature(l.default.F.MD_BACKEND)){if(!(a=(0,o.promoteGroupParticipants)(e,t)))return Promise.reject(new Error("sendPromoteParticipants: not supported when not build with MD_BACKEND"))}else a=n.default.promoteParticipants(e,t);return a};var l=r(a(77188)),n=r(a(35822)),o=a(55531)},79332:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoadType=t.EditType=void 0;var r=a(54302).Mirrored(["EDITING","PENDING","DONE","ERROR"]);t.EditType=r;var l=a(54302).Mirrored(["PENDING","DONE","ERROR"]);t.LoadType=l},77953:(e,t,a)=>{"use strict";var r=a(20862),l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({contact:e,editable:t,profilePicThumb:a,onClick:r,onOpenStatus:l,onLoad:S,hideStatusV3:P}){var[T,y]=v(window.innerWidth),[I,w]=v(null);E((()=>{function e(){y(window.innerWidth)}return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)}),[]);var O=T>1300?152:122,N=!(0,c.canSeeStatusV3OnContact)()||e.statusMute||P?null:m.default.get(e.id);function k(){N&&(i.default.openModalMedia(o.default.createElement(p.default,{removeTopDrawer:!1,statusV3:N}),{transition:"status-v3-modal"}),l&&l())}var M=null;I&&(M=o.default.createElement(_.default,{displayName:"ContextMenu",escapable:!0,popable:!0,requestDismiss:()=>{w(null)}},o.default.createElement(C.default,{contextMenu:I})));var b,D=null,x=s.default.noStatusBorder;null!=N&&(D=o.default.createElement(g.default,{statusV3:N,size:O+24,stroke:3,theme:g.RingTheme.BUSINESS_CONTACT_INFO}),x=s.default.hasStatusBorder);b=t&&null!=a?o.default.createElement(h.default,{profilePicThumb:a,size:O}):o.default.createElement(d.default,{id:e.id,size:O,loader:!0,onLoad:S,onClick:function(e){if(r)if(null!=N){e.stopPropagation(),e.preventDefault();var t=[o.default.createElement(u.default,{a8n:"mi-view-photo",key:"view-photo",action:()=>{r(e)}},f.default.t(1654)),o.default.createElement(u.default,{a8n:"mi-view-status",key:"view-status",action:k},f.default.t(1522))];e.persist(),w({menu:t,event:e})}else r(e)},quality:d.DETAIL_IMAGE_QUALITY.HIGH});return o.default.createElement(o.default.Fragment,null,o.default.createElement("div",{className:(0,n.default)(s.default.coverPhoto,{[s.default.isEditable]:t})}),o.default.createElement("div",{className:s.default.avatar},D,o.default.createElement("div",{className:x},b)),M)};var n=l(a(94184)),o=l(a(67294)),i=l(a(33766)),s=l(a(21997)),d=r(a(17367)),u=l(a(7970)),c=a(34605),f=l(a(80162)),h=l(a(94916)),p=l(a(38908)),m=l(a(11818)),g=r(a(49071)),_=l(a(26144)),C=l(a(11918)),{useState:v,useEffect:E}=o.default},43281:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RawBusinessProfile",{enumerable:!0,get:function(){return r.RawBusinessProfile}}),Object.defineProperty(t,"BUSINESS_HOUR_MODES",{enumerable:!0,get:function(){return l.BUSINESS_HOUR_MODES}}),Object.defineProperty(t,"DAYS_OF_WEEK",{enumerable:!0,get:function(){return l.DAYS_OF_WEEK}});var r=a(62353),l=a(78783)},59753:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBusinessOpenState=function(e,t){var a,n;if(null==e.timezone)return{status:"unknown"};var o=t||new Date,d=new Date(o.toLocaleString("en-US",{timeZone:e.timezone})),u=(o.getTime()-d.getTime())/1e3/60,c=e.config[r.DAYS_OF_WEEK[o.getDay()]];if(!c)return{status:i.CLOSED_TODAY};switch(c.mode){case l.BUSINESS_HOUR_MODES.OPEN_24H:if(c)return{status:i.OPEN_24H};break;case l.BUSINESS_HOUR_MODES.APPOINTMENT_ONLY:if(c)return{status:i.OPEN_APPOINTMENT};break;case l.BUSINESS_HOUR_MODES.SPECIFIC_HOURS:var f=60*o.getHours()+o.getMinutes();if(1===(null===(a=c.hours)||void 0===a?void 0:a.length)){var h=c.hours[0][0],p=c.hours[0][1];return f>=h&&f<=p?{status:i.OPEN,openUntil:s(u+p)}:f<=h?{status:i.CLOSED,opensAt:s(u+h)}:{status:i.CLOSED}}if(2===(null===(n=c.hours)||void 0===n?void 0:n.length)){var m=c.hours[0][0],g=c.hours[0][1],_=c.hours[1][0],C=c.hours[1][1];return f>=m&&f<=g?{status:i.OPEN,openUntil:s(u+g),additionalOpen:s(u+_),additionalClose:s(u+C)}:f<m?{status:i.CLOSED,opensAt:s(u+m),additionalOpen:s(u+_),additionalClose:s(u+C)}:f>=_&&f<=C?{status:i.OPEN,openUntil:s(u+C)}:f<_?{status:i.CLOSED,opensAt:s(u+_)}:{status:i.CLOSED}}}return{status:"unknown"}},Object.defineProperty(t,"minutesToTime",{enumerable:!0,get:function(){return n.minutesToTime}}),Object.defineProperty(t,"timeStringToMinutes",{enumerable:!0,get:function(){return n.timeStringToMinutes}}),t.BUSINESS_OPEN_STATUS=t.convertToRawBusinessProfile=t.isValidBusinessHours=t.isValidTime=void 0;var r=a(78783),l=a(43281),n=a(48590),o=e=>void 0!==(0,n.timeStringToMinutes)(e);t.isValidTime=o;t.isValidBusinessHours=(e,t)=>{if(e===l.BUSINESS_HOUR_MODES.SPECIFIC_HOURS)for(var a in t){var r=t[a],{closed:n,hours:i}=r;if(!n)for(var[s,d]of i)if(!o(s)||!o(d))return!1}return!0};t.convertToRawBusinessProfile=({mode:e,dayValues:t,note:a,timezone:r})=>{var o={};for(var i in t){var s=t[i],{closed:d,hours:u}=s;if(!d){var c={mode:e};e===l.BUSINESS_HOUR_MODES.SPECIFIC_HOURS&&(c.hours=u.map((([e,t])=>[(0,n.timeStringToMinutes)(e)||0,(0,n.timeStringToMinutes)(t)||0]))),o[i]=c}}return{businessHours:{config:o,note:a,timezone:r||Intl.DateTimeFormat().resolvedOptions().timeZone}}};var i={OPEN:"open",CLOSED:"closed",OPEN_TODAY:"open_today",CLOSED_TODAY:"closed_today",OPEN_APPOINTMENT:"open_appointment",OPEN_24H:"open_24h",UNKNOWN:"unknown"};function s(e){var t=new Date,a=Math.floor(e/60);return t.setHours(a),t.setMinutes(e%60),t.setSeconds(0),t}t.BUSINESS_OPEN_STATUS=i},62353:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"EditType",{enumerable:!0,get:function(){return r.EditType}}),Object.defineProperty(t,"LoadType",{enumerable:!0,get:function(){return r.LoadType}});var r=a(79332)},76429:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return n.default.createElement(i.default,{name:"shopping-cart",className:(0,l.default)(o.default.cartIcon,{[o.default.inheritColor]:"inherit-color"===e.theme})})};var l=r(a(94184)),n=r(a(67294)),o=r(a(91214)),i=r(a(32885))},22846:(e,t,a)=>{"use strict";var r=a(20862),l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var[a,r]=(0,s.useState)(null),l=()=>{r(null)};return(0,s.useEffect)((()=>{if(l(),e){var a=new d.default,s=a.signal;return(0,o.default)((function*(){try{var a=yield(0,C.default)((0,h.default)(e),s),l=null==a?void 0:a.data;if(!l)return;if(r(l),!f.default.supportsFeature(f.default.F.HIGH_QUALITY_LINK_PREVIEWS)||!E.default.webUploadLinkThumbMmsEnabled||!l.thumbnailHQ)return;var o=yield function(){return P.apply(this,arguments)}(l.thumbnailHQ,s,t);if(!o)return;r((0,n.default)((0,n.default)({},l),o))}catch(e){if(e.name===i.ABORT_ERROR)return;__LOG__(2)`useLinkPreview: error`}}))(),()=>{a.signal.aborted||a.abort()}}}),[e,t]),{linkPreview:a,clearLinkPreview:l}},t.findFirstWebLink=void 0;var n=l(a(81109)),o=l(a(48926)),i=a(58566),s=a(67294),d=l(a(33364)),u=a(58939),c=l(a(75444)),f=l(a(77188)),h=l(a(76076)),p=r(a(66802)),m=a(13162),g=l(a(20249)),_=l(a(80177)),C=l(a(46532)),v=l(a(77535)),E=l(a(43232)),S=l(a(66454));function P(){return(P=(0,o.default)((function*(e,t,a){try{var r=yield(0,C.default)(_.default.createFromBase64Jpeg(e),t),l=yield(0,S.default)({thumbnail:r,mediaType:g.default.THUMBNAIL_LINK,mediaKeyInfo:(0,v.default)(),uploadOrigin:(0,m.getUploadOriginForChat)(a),forwardedFromWeb:!1,signal:t,timeout:c.default.MMS_THUMBNAIL_UPLOAD_TIMEOUT}),n=l.mediaEntry;if(!n)return;return{mediaKey:n.mediaKey,mediaKeyTimestamp:n.mediaKeyTimestamp,thumbnailDirectPath:n.directPath,thumbnailSha256:l.filehash,thumbnailEncSha256:n.encFilehash}}catch(e){if(e.name===i.ABORT_ERROR)return;__LOG__(2)`useLinkPreview.uploadHQPreview: error`}}))).apply(this,arguments)}t.findFirstWebLink=e=>{var t=(0,u.removeCodeBlocks)(e),a=p.findLinks(t,!0)[0];if(a)return a.url}},84657:(e,t,a)=>{"use strict";var r=a(20862),l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{images:t,renderFallback:a,fallbackMediaData:r,fetching:l,onClick:s}=e,_=(0,i.useRef)(null),C=(0,i.useRef)(null),v=(0,i.useRef)(null),E=(0,i.useRef)(null),S=(0,i.useRef)(null),[P,T]=(0,i.useState)(null),[y,I]=(0,i.useState)(t.filter((e=>e.mediaData.mediaStage===f.MEDIA_DATA_STAGE.RESOLVED)).length),[w,O]=(0,i.useState)(!1),N=y===t.length,k=()=>I((e=>e+1));(0,i.useEffect)((()=>{if(!N&&!a){var e,t=C.current;if(!t)return;null===(e=v.current)||void 0===e||e.cancel(),v.current=(v.current||Promise.resolve()).then((()=>(0,g.default)(t,{opacity:[1,0]},{delay:75,duration:50}))).cancellable().then((()=>{O(!0)})).catch((0,o.filteredCatch)(Promise.CancellationError,(()=>{(0,g.default)(t,"stop",!0)}))).finally((()=>{v.current=null}))}return()=>{var e;null===(e=v.current)||void 0===e||e.cancel()}}),[N,a]);var M,b,D,x=()=>{var e;return(null===(e=_.current)||void 0===e?void 0:e.children)?_.current.scrollWidth===_.current.offsetWidth?null:0===_.current.scrollLeft?"next":_.current.scrollWidth-1<=_.current.scrollLeft+_.current.offsetWidth?"prev":"both":null};if((0,i.useEffect)((()=>{T(x())}),[N]),a&&0===t.length)return i.default.createElement("div",{className:u.default.carousel,dir:"ltr"},i.default.createElement("div",{className:(0,n.default)(u.default.contentContainer,u.default.slidesContainer)},r&&i.default.createElement(c.default,{altText:"",mediaData:r,renderFallback:!0,singleSlide:!0})));var L=()=>{E.current=null;var e=x();P!==e&&T(e)};if(t.length>1){var A=()=>{var e=_.current;if(null!=e&&("prev"===P||"both"===P)){for(var t=0,a=e.scrollLeft+Math.floor(e.offsetWidth/2),r=e.lastElementChild;r instanceof HTMLElement&&0===t;){var l=r.offsetLeft+Math.floor(r.offsetWidth/2);l<a&&(t=l-a),r=r.previousElementSibling}0!==t&&e.scrollBy({left:t,behavior:"smooth"})}},R=()=>{var e=_.current;if(null!=e&&("next"===P||"both"===P)){for(var t=0,a=e.scrollLeft+Math.floor(e.offsetWidth/2),r=e.firstElementChild;r instanceof HTMLElement&&0===t;){var l=r.offsetLeft+Math.floor(r.offsetWidth/2);a<l&&(t=l-a),r=r.nextElementSibling}0!==t&&e.scrollBy({left:t,behavior:"smooth"})}},F=()=>{S.current=null;var e=x();P!==e&&T(e)};D=()=>{null==S.current&&(S.current=requestAnimationFrame(F))},N&&null!=P&&(M=i.default.createElement(d.default,{type:d.ButtonType.Prev,onClick:A,onKeyDown:A,disabled:"prev"!==P&&"both"!==P,theme:p.RoundTheme.Small,overMedia:!0}),b=i.default.createElement(d.default,{type:d.ButtonType.Next,onClick:R,onKeyDown:R,disabled:"next"!==P&&"both"!==P,theme:p.RoundTheme.Small,overMedia:!0}))}var B=1===t.length,U=t.map(((e,t)=>i.default.createElement(c.default,{key:t,altText:"",image:e,singleSlide:B,mediaData:e.mediaData,onClick:s,onLoad:k}))),V=N?null:i.default.createElement("div",{className:(0,n.default)(u.default.contentContainer,u.default.spinnerContainer)},i.default.createElement("div",{className:u.default.spinner,ref:C},i.default.createElement(m.default,{color:"default",size:50,stroke:4}))),j=(0,n.default)(u.default.carousel,{[u.default.loaded]:!l&&N,[u.default.fadeIn]:w});return i.default.createElement("div",{className:j,dir:"ltr"},V,i.default.createElement("div",{ref:_,className:(0,n.default)(u.default.contentContainer,u.default.slidesContainer),onScroll:D},U),M,b,i.default.createElement(h.default,{onResize:()=>{null==E.current&&(E.current=requestAnimationFrame(L))}}))};var n=l(a(94184)),o=a(24788),i=r(a(67294)),s=l(a(30523)),d=r(a(82388)),u=l(a(55140)),c=l(a(53413)),f=a(85063),h=l(a(42529)),p=a(93227),m=l(a(69507)),g=l(a(59979));s.default.polyfill()},53413:(e,t,a)=>{"use strict";var r=a(95318),l=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a(67294)),o=r(a(57246)),i=a(85063),s=r(a(95607)),d=({mediaData:e,altText:t,image:a,singleSlide:r,renderFallback:l,onClick:d,onLoad:u,forwardRef:c})=>{var{fullHeight:f,fullWidth:h,mediaStage:p,renderableUrl:m}=(0,s.default)(e,["fullHeight","fullWidth","mediaStage","renderableUrl"]),g=(0,n.useRef)(null),_=(0,n.useRef)(p===i.MEDIA_DATA_STAGE.RESOLVED);(0,n.useEffect)((()=>{!u||_.current||l||p!==i.MEDIA_DATA_STAGE.RESOLVED||(u(),_.current=!0)}),[u,l,p]);var C=h&&f?h/f:.8;C<.8&&(C=.8),C>1.91&&(C=1.91),C>1&&!r&&(C=1);var v={width:r&&C<1?100*C+"%":1!==C||r?null:"100%"},E={paddingTop:`${Math.floor(100/C)}%`},S={cursor:""+(d?"pointer":"auto")};return n.default.createElement("div",{ref:c?e=>c(e):null,className:o.default.slide,style:v},n.default.createElement("div",{className:o.default.slideInnerContainer,style:E},n.default.createElement("img",{ref:g,alt:t,src:m,className:o.default.image,style:S,draggable:"false",onClick:()=>{d&&g.current&&a&&d(g.current,a)}})))};t.default=d},10276:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyCanvas=f,t.default=function(e){var{mediaCollection:t,fullCollection:a,chat:r,onScroll:s,justify:u}=e,p=e.medias||e.productMedias;if(!p)return null;var m=(0,l.default)(d.default.container,{[d.default.drawer]:a,[d.default.galleryEmpty]:0===t.length,[d.default.justifySpaceBetween]:"space-between"===u}),g=[...p];if(t.queryMediaBefore&&(a||g.length<6)){var _=(0,l.default)(d.default.more,d.default.canvasComponent,{[d.default.canvasSecondRow]:!a&&g.length>=3,[d.default.canvasFirst]:0===t.length});g.push(n.default.createElement("div",{className:_,key:"spinner"},n.default.createElement(c.default,{stroke:6,size:24})))}if(0===t.length){if(a)return t.queryMediaBefore?n.default.createElement("div",{className:(0,l.default)(d.default.drawer,d.default.drawerBody)},n.default.createElement(i.Loading,null)):n.default.createElement(i.MediaMsgs,null);t.queryMediaBefore||t.hasMediaBefore||(m=(0,l.default)(m,d.default.galleryEmpty),g=[h(Math.max(r?r.docCount:0,0),Math.max(r?r.linkCount:0,0),Math.max(r?r.productCount:0,0))])}else for(var C=0;C<6;C++)g.push(n.default.createElement(f,{key:"empty"+C}));return n.default.createElement("div",{onScroll:s,"data-a8n":o.default.key("media-gallery"),className:m},g)};var l=r(a(94184)),n=r(a(67294)),o=r(a(55847)),i=a(92997),s=r(a(80162)),d=r(a(69775)),u=r(a(43232)),c=r(a(69507));function f(){return n.default.createElement("div",{className:d.default.canvasEmpty})}function h(e,t,a){var r=[];return null!=e&&e>0&&r.push(s.default.t(689,{count:e,_plural:e})),null!=t&&t>0&&r.push(s.default.t(1007,{count:t,_plural:t})),u.default.productMediaAttachments&&null!=a&&a>0&&r.push(s.default.t(1373,{count:a,_plural:a})),r.length>0?r.join(s.default.t(724)):u.default.productMediaAttachments?s.default.t(1265):s.default.t(1264)}},89670:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return n.default.createElement("div",{className:(0,l.default)(o.default.icon,{[o.default.transparent]:e.theme&&"transparent"===e.theme,[o.default.compact]:e.theme&&"compact"===e.theme,[o.default.disabled]:e.disabled})},e.children)};var l=r(a(94184)),n=r(a(67294)),o=r(a(87041))},84854:(e,t,a)=>{"use strict";var r=a(20862),l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a(23279)),o=r(a(67294)),i=l(a(33766)),s=l(a(75444)),d=l(a(790)),u=a(26226),c=l(a(80896)),f=l(a(72765)),h=l(a(89848)),p=r(a(13353)),m=(0,n.default)(((e,t)=>{(0,u.setVideoVolumeSettings)(e,t)}),500);class g extends o.PureComponent{constructor(...e){super(...e),this.checkIteration=0,this.checkForSuccessInterval=0,this.hasCalledPlaying=!1,this.mediaBlobWasDownloadedBeforeMount=Boolean(this.props.mediaData.mediaBlob),this.refVideo=(0,o.createRef)(),this.onVolumeChange=()=>{var e=this.refVideo&&this.refVideo.current;e&&m(e.volume,e.muted)},this.startCheckForSuccess=()=>{this.checkIteration=0,this.checkForSuccessInterval||(this.checkForSuccessInterval=setInterval(this.checkForSuccess,250))},this.clearCheckForSuccess=()=>{this.checkForSuccessInterval&&(clearInterval(this.checkForSuccessInterval),this.checkIteration=0,this.checkForSuccessInterval=0)},this.checkForSuccess=()=>{if(p.default.state===p.STATE.CONNECTED){this.checkIteration++;var e=this.refVideo&&this.refVideo.current,t=e&&e.buffered;t&&t.length&&t.end(0)>0?this.onPlaying():this.checkIteration>240&&this.clearCheckForSuccess()}},this.onPlayerError=()=>{this.clearCheckForSuccess()},this.onOtherPlaying=e=>{e!==this&&this.pause()},this.pause=()=>{var e=this.refVideo&&this.refVideo.current;e&&(e.paused||e.pause())},this.onPlaying=()=>{this.clearCheckForSuccess(),i.default.mediaPlaying(this)},this.onLoadedMetadata=e=>{this.setStartTime();var{onLoadedMetadata:t}=this.props;t&&t(e)},this.setStartTime=()=>{var e=this.refVideo&&this.refVideo.current;null!=this.props.startTime&&0!==this.props.startTime&&e&&(e.currentTime=this.props.startTime)},this.onContextMenu=e=>{this.props.disableContextMenu&&e.preventDefault()}}componentDidMount(){this.props.listeners.add(i.default,"mediaPlaying",this.onOtherPlaying),this.props.listeners.add(i.default,"pttRecording",this.pause),this._updateVideoUserPrefs(),this.props.refVideo&&this.props.refVideo(this.refVideo)}componentWillUnmount(){m.flush(),this.clearCheckForSuccess(),this.pause(),h.default.isBlink&&this.refVideo.current&&(0,d.default)(this.refVideo.current)}componentDidUpdate(e){this._updateVideoUserPrefs(),e.startTime!==this.props.startTime&&this.setStartTime(),this.props.refVideo&&this.props.refVideo(this.refVideo)}_updateVideoUserPrefs(){var e=this.refVideo&&this.refVideo.current;if(e){var t=(0,u.getVideoVolumeSettings)();t&&("number"==typeof t.volume&&(e.volume=t.volume),"boolean"==typeof t.muted&&(e.muted=t.muted)),C()&&this.props.autoPlay&&this.startCheckForSuccess()}}render(){var e,t=this.props,{mediaData:a}=t,r=a.mediaBlob,l=a.streamable&&a.isStreamable();if(!this.mediaBlobWasDownloadedBeforeMount&&l||!r){if(!a.streamable||!a.isStreamable())return null;e=`${s.default.VIDEO_STREAM_URL}?key=${this.props.msg.id.toString()}`}else e=r.url();var n=C()&&!t.autoPlay?this.startCheckForSuccess:void 0;return o.default.createElement("video",{ref:this.refVideo,src:e,poster:t.poster,className:t.className,controls:t.controls,autoPlay:t.autoPlay,onClick:t.onClick,onDoubleClick:t.onDoubleClick,onVolumeChange:this.onVolumeChange,onLoadedMetadata:this.onLoadedMetadata,onPlay:n,onPlaying:this.onPlaying,onError:this.clearCheckForSuccess,onContextMenu:this.onContextMenu},t.children)}}g.CONCERNS={msg:["id"],mediaData:["mediaBlob","streamable"]},g.displayName="VideoTag";var _=(0,c.default)((0,f.default)(g,g.CONCERNS));function C(){return h.default.isGecko||h.default.isSafari}t.default=_},38908:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(a(67294)),n=r(a(59986)),o=r(a(39226));class i extends n.default{constructor(...e){super(...e),this.closeStatusViewer=()=>{this.end()}}componentDidMount(){this.push(l.default.createElement(o.default,{initialStatusV3:this.props.statusV3,quotedMsgKey:this.props.msgKey,closeStatusViewer:this.closeStatusViewer,onMsgNotFound:this.props.onMsgNotFound}),"none")}}t.default=i},64629:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{catalog:t,onSend:a}=e,r=(0,s.createCatalogLink)(t.id.user),d=t.id.equals((0,n.getMaybeMeUser)())?`${o.default.t(1340)} ${r}`:r;return l.default.createElement(i.default,{text:d,pushTransition:"none",popTransition:"none",onSend:a})};var l=r(a(67294)),n=a(26226),o=r(a(80162)),i=r(a(48305)),s=a(92758)},53458:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{product:t,onSend:a}=e,r=(0,s.createProductLink)(t.catalogWid.user,t.id.toString()),d=t.catalogWid.equals((0,n.getMaybeMeUser)())?`${o.default.t(1370)} ${r}`:r;return l.default.createElement(i.default,{text:d,pushTransition:"none",popTransition:"none",onSend:a})};var l=r(a(67294)),n=a(26226),o=r(a(80162)),i=r(a(48305)),s=a(92758)},48305:(e,t,a)=>{"use strict";var r=a(20862),l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a(48926)),o=l(a(67294)),i=a(97308),s=a(17938),d=l(a(33766)),u=l(a(75444)),c=l(a(59986)),f=l(a(80162)),h=r(a(72352)),p=a(59094),m=l(a(43232)),g=l(a(23348));class _ extends c.default{constructor(...e){var t;super(...e),t=this,this._selected=[],this._getSelected=()=>this._selected,this._handleSelectionChange=(e,t,a)=>{this._selected=a},this._handleForwardConfirmed=e=>{this._send(e)},this._handleCancel=()=>{this.end()},this._send=function(){var e=(0,n.default)((function*(e){var{text:a,title:r,onSend:l}=t.props;if(1===e.length){var n=e[0];yield t._pasteText(n,a),t.end(),window.innerWidth<=u.default.LAYOUT_2COLUMNS_MAX_WIDTH&&d.default.closeDrawerRight()}else t.push(o.default.createElement(g.default,{defaultText:a,title:r||f.default.t(1164),onSend:(a,r)=>t._handleSend(e,a,r),onBack:t._handleBack}));l&&l()}));return function(){return e.apply(this,arguments)}}(),this._handleSend=(e,t,a)=>{this._sendText(e,t,a),this.end()},this._handleBack=()=>{this.pop()},this._pasteText=function(){var e=(0,n.default)((function*(e,a){yield t._ensureContactUnblocked(e),e.active?d.default.pasteChatTextInput(e,a):(e.setComposeContents({text:a}),d.default.openChatFromUnread(e).then((t=>{t&&d.default.focusChatTextInput(e)})))}));return function(){return e.apply(this,arguments)}}(),this._sendText=(e,a,r)=>{e.forEach(function(){var e=(0,n.default)((function*(e){yield t._ensureContactUnblocked(e),d.default.once("ui_idle",(()=>{(0,p.sendTextMsgToChat)(e,a,{linkPreview:r})}))}));return function(){return e.apply(this,arguments)}}())},this._ensureContactUnblocked=function(){var e=(0,n.default)((function*(e){e.isUser&&e.contact.isBlocked()&&(yield(0,i.unblockContact)(e.contact))}));return function(){return e.apply(this,arguments)}}()}componentDidMount(){this.push(o.default.createElement(h.default,{title:this.props.title||f.default.t(1164),listType:h.ListType.CHAT_SELECT_MODAL,getInitialItems:this._getSelected,maxItems:m.default.multicastLimitGlobal,onConfirm:this._handleForwardConfirmed,onCancel:this._handleCancel,onSelectionChanged:this._handleSelectionChange,singleSelectionFooterType:s.FooterType.NEXT,multipleSelectionFooterType:s.FooterType.NEXT}))}}t.default=_},52275:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{labels:t,theme:a}=e;return t&&(0,o.canDisplayLabel)()?n.default.createElement("div",{className:(0,l.default)(i.default.labelContainer,{[i.default.standaloneLabelContainer]:"standalone"===a})},(()=>{if(t)return t.map(((e,t)=>n.default.createElement("div",{key:t,className:(0,l.default)(i.default.labelRow,{[i.default.standaloneLabelRow]:"standalone"===a})},n.default.createElement(s.default,{labels:[e],showName:!0}))))})()):null};var l=r(a(94184)),n=r(a(67294)),o=a(34605),i=r(a(87571)),s=r(a(64190))},62062:(e,t,a)=>{"use strict";var r=a(95318),l=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(24788),o=l(a(67294)),i=r(a(33766)),s=r(a(51115)),d=r(a(75444)),u=a(54438),c=r(a(1886)),f=r(a(80162)),h=a(45437),p=a(20650),m=a(38245),g=r(a(5711)),_=l(a(48847));class C extends o.PureComponent{constructor(...e){super(...e),this.state={isSubmitting:!1,submitted:!1,reason:""},this._onInputChange=e=>{this.setState({reason:e})},this._handleOk=()=>{var{collection:e}=this.props;this.setState({isSubmitting:!0}),(0,p.appealCollection)(e.id.toString(),this.state.reason).then((()=>{e.canAppeal=!1,e.reviewStatus=h.PRODUCT_REVIEW_STATUS.PENDING,this.setState({isSubmitting:!1,submitted:!0})})).catch((0,n.filteredCatch)(u.ServerStatusCodeError,(()=>{i.default.openToast(o.default.createElement(_.default,{msg:f.default.t(459),id:(0,_.genId)("catalog_collection_appeal_submission_failed")})),this.setState({isSubmitting:!1})})))},this._handleCancel=()=>{i.default.closeModal()}}render(){var{submitted:e,isSubmitting:t,reason:a}=this.state;return e?o.default.createElement(s.default,{title:f.default.t(1416),onOK:this._handleCancel},o.default.createElement(m.TextDiv,null,f.default.t(458))):o.default.createElement(s.default,{title:f.default.t(1416),onOK:this._handleOk,onCancel:this._handleCancel,okDisabled:t},o.default.createElement("form",null,o.default.createElement(g.default,{a8n:"confirm-popup-text-input",placeholder:f.default.t(990),onChange:this._onInputChange,value:a,maxLength:1e3}),o.default.createElement(c.default,{href:d.default.WA_COMMERCE_POLICY_URL},f.default.t(1002))))}}t.default=C,C.displayName="AppealCollectionPopup"},60995:(e,t,a)=>{"use strict";var r=a(95318),l=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a(67294)),o=r(a(55847)),i=r(a(59271)),s=r(a(20451)),d=r(a(64120)),u=r(a(39490)),c=l(a(55977)),f=r(a(80162)),h=a(51545),p=a(38245),m=r(a(95607)),g=(0,n.forwardRef)(((e,t)=>{var{settings:a,onClose:r}=e,{archive:l}=(0,m.default)(a,["archive"]),g=!l.classic;return n.default.createElement(d.default,{ref:t},n.default.createElement(c.default,{title:f.default.t(241),type:c.DRAWER_HEADER_TYPE.LARGE,onBack:r}),n.default.createElement(u.default,null,n.default.createElement("div",{className:i.default.section},n.default.createElement("div",{"data-a8n":o.default.key("auto-unarchive-setting"),className:i.default.control},n.default.createElement(s.default,{onChange:()=>{var e=!l.classic;(0,h.setArchiveClassicSetting)(e)},checked:g})),n.default.createElement("div",{"data-a8n":o.default.key("auto-unarchive-setting-text")},f.default.t(261),n.default.createElement(p.TextDiv,{theme:"muted"},f.default.t(260))))))}));t.default=g},95653:(e,t,a)=>{"use strict";var r=a(20862),l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({elementId:e,onClick:t}){return document.queryCommandSupported("copy")?n.default.createElement(d.default,{a8nText:"li-copy-link",icon:n.default.createElement(c.default,{name:"copy",className:i.default.icon}),onClick:()=>function(e,t){(0,s.default)(e)?o.default.openToast(n.default.createElement(f.default,{msg:u.default.t(1005),id:(0,f.genId)()})):o.default.openToast(n.default.createElement(f.default,{msg:u.default.t(1004),id:(0,f.genId)()}));null!=t&&t()}(e,t)},u.default.t(648)):null};var n=l(a(67294)),o=l(a(33766)),i=l(a(555)),s=l(a(6532)),d=l(a(75389)),u=l(a(80162)),c=l(a(32885)),f=r(a(48847))},75389:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{children:t,onClick:a,icon:r,className:c,color:f,theme:h}=e,[p,m]=(0,u.default)(a),g=null!=r?o.default.createElement("div",{className:(0,n.default)(s.default.icon,{[s.default.danger]:"danger"===f,[s.default.success]:"success"===f})},r):null,_=(0,n.default)(s.default.container,c,{[s.default.containerNoIcon]:!r,[s.default.containerListAligned]:"list-aligned"===h}),C="string"==typeof t?t:null;return o.default.createElement("div",(0,l.default)({},m,{className:_,"data-a8n":i.default.key(e.a8nText),"data-ignore-capture":"any",ref:p,title:C}),g,o.default.createElement("div",{className:s.default.bodyContainer},o.default.createElement("div",{className:s.default.body},o.default.createElement(d.TextSpan,{theme:"title",color:f},t))))};var l=r(a(67154)),n=r(a(94184)),o=r(a(67294)),i=r(a(55847)),s=r(a(73858)),d=a(38245),u=r(a(13085))},89581:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=new f.default(m,g,{COOL_OFF_START_STORAGE_KEY:c.CoolOffPeriodKeys.CATALOG,MAX_VIEWS_IN_DAYS:1,COOL_OFF_DURATION_IN_DAYS:1});if(e.shouldShow()){var t=l.default.createElement(i.default,{onOK:()=>{e.dismiss(),o.default.closeModal()}},l.default.createElement(s.FlexColumn,{align:"center"},l.default.createElement(s.FlexItem,{className:n.default.graphic},l.default.createElement(h.default,{name:"cart-interstitial-graphic"})),l.default.createElement(p.TextHeader,{theme:"popup-title"},d.default.t(1284)),l.default.createElement(p.TextParagraph,{color:"secondary",className:n.default.description},d.default.t(1283))));o.default.openModal(t),e.show(),e.startCoolOffToday()}};var l=r(a(67294)),n=r(a(80257)),o=r(a(33766)),i=r(a(51115)),s=a(57909),d=r(a(80162)),u=r(a(72462)),c=a(14823),f=r(a(25475)),h=r(a(32885)),p=a(38245),m=c.NuxKeyTypes.COOL_OFF_NUX.CART_INTERSTITIAL,g=u.default.BANNER_TYPES.SMB_CATALOG_CART_INTERSTITIAL},17465:(e,t,a)=>{"use strict";var r=a(95318),l=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({onOpenCollections:e}){var[t,a]=(0,n.useState)(!1),r=o.default.get((0,s.getMeUser)());return(0,u.useListener)(null==r?void 0:r.collections,"change",(()=>{a(!0)})),t&&n.default.createElement(d.default,null,n.default.createElement(i.default,{onClick:e}))};var n=l(a(67294)),o=r(a(75204)),i=r(a(14529)),s=a(26226),d=r(a(92695)),u=a(54890)},14529:(e,t,a)=>{"use strict";var r=a(20862),l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a(67294)),o=a(2860),i=l(a(75204)),s=l(a(70583)),d=l(a(11288)),u=l(a(49817)),c=a(26226),f=l(a(80162)),h=l(a(72462)),p=a(14823),m=l(a(1680)),g=r(a(25475)),_=p.NuxKeyTypes.COOL_OFF_NUX.COLLECTIONS,C={COOL_OFF_DURATION_IN_DAYS:2,VIEWS_BEFORE_COOL_OFF_IN_DAYS:1,CLICKS_BEFORE_COOL_OFF:1,MAX_VIEWS_IN_DAYS:2,COOL_OFF_START_STORAGE_KEY:p.CoolOffPeriodKeys.CATALOG};class v extends m.default{render(){var{onClick:e}=this.props,t=new g.default(_,h.default.BANNER_TYPES.SMB_COLLECTION_CREATION,C),a=n.default.createElement("span",{className:s.default.actionText},f.default.t(1278));return n.default.createElement(u.default,{title:f.default.t(1280),subtitle:f.default.t(1279),actionText:a,onClick:e,nuxManager:t,theme:"nuxBlue"})}static shouldShow(){return(0,o.getABPropConfigValue)("web_abprop_collections_nux_banner")&&d.default.isSMB&&function(){var e=i.default.get((0,c.getMeUser)());if(null==e||null==e.collections)return!1;var t=e.collections.getCollectionModels(!0);return e.productCollection.getProductModels(!0).some((e=>!e.isHidden&&"REJECTED"!==e.reviewStatus))&&0===t.length}()&&(0,g.shouldShowNUX)(_,C)}}t.default=v,v.displayName="CollectionsBanner"},25954:(e,t,a)=>{"use strict";var r=a(20862),l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a(94184)),o=l(a(63337)),i=r(a(67294)),s=l(a(74724)),d=l(a(33766)),u=l(a(17367)),c=l(a(20923)),f=l(a(23152)),h=l(a(80162)),p=a(97713),m=l(a(51124)),g=l(a(67978)),_=l(a(72765)),C=l(a(32885)),v=l(a(26144)),E=l(a(59979));class S extends i.Component{constructor(...e){super(...e),this.state={style:{visibility:"hidden"}},this.handleScroll=e=>{Math.abs(e.deltaY)>3&&this.handleClose()},this.handleClose=()=>{if(!this.closing){var e;if(this.closing=!0,this.props.getZoomNode((t=>{e=t})),!e)return d.default.closeModalMedia();var t=this._refImage;if(t){this.props.animateBorderRadius&&(t.style.transition="border-radius 500ms cubic-bezier(.1,.82,.25,1)",t.style.borderRadius="50%");var a=(0,o.default)(e,"start"),r=t.getBoundingClientRect(),l=a.getBoundingClientRect(),n=l.top-r.top,i=l.left-r.left,s=a.clientWidth/t.clientWidth;(0,E.default)(t,{translateX:[i,0],translateY:[n,0],scale:[s,1]},{duration:200,easing:[.1,.82,.25,1]}).then((()=>{d.default.closeModalMedia()}))}}},this.handleImageLoad=e=>{var t=e.target;this.setState({size:{width:t.naturalWidth,height:t.naturalHeight}},(()=>{this.props.getZoomNode((e=>{var a=t.getBoundingClientRect(),r=e.getBoundingClientRect(),l=r.top-a.top,n={visibility:"hidden",transform:`translateX(${r.left-a.left}px) translateY(${l}px) scale(${e.clientWidth/t.clientWidth})`,transition:"transform 0s",borderRadius:void 0};this.props.animateBorderRadius&&(n.borderRadius="50%"),this.setState({style:n},(()=>{var e={transform:"translateX(0px) translateY(0px) scale(1)",transition:"transform 500ms cubic-bezier(.1,.82,.25,1)"};this.props.animateBorderRadius&&(e={transform:"translateX(0px) translateY(0px) scale(1)",borderRadius:"0%",transition:"transform 500ms cubic-bezier(.1,.82,.25,1),\n                                         border-radius 500ms cubic-bezier(.1,.82,.25,1)"}),this.setState({style:e})}))}))}))},this.setRefImage=e=>{this._refImage=e}}shouldComponentUpdate(e){return!!e.profilePicThumb.imgFull||(this.handleClose(),!1)}render(){var e,{contact:t,profilePicThumb:a}=this.props;return a.imgFull&&(e=i.default.createElement(f.default,{src:a.imgFull,hasPrivacyChecks:!0,onLoad:this.handleImageLoad,className:g.default.profileViewerImg})),i.default.createElement(v.default,{displayName:"PhotoViewer",escapable:!0,requestDismiss:this.handleClose},i.default.createElement("div",{className:(0,n.default)("overlay",g.default.container),onWheel:this.handleScroll,onClick:this.handleClose},i.default.createElement("div",{className:g.default.headerContainer},i.default.createElement("div",{className:g.default.profileThumb},i.default.createElement(s.default,{image:i.default.createElement(u.default,{id:t.id,size:40}),theme:"plain",primary:i.default.createElement(c.default,{text:t.formattedUser})})),i.default.createElement("div",{className:g.default.mediaPanelTools},i.default.createElement(p.MenuBar,{key:"media-panel-header",theme:"strong"},i.default.createElement(p.MenuBarItem,{a8nText:"btn-close",icon:i.default.createElement(C.default,{name:"x-viewer"}),title:h.default.t(1779),onClick:this.handleClose})))),i.default.createElement("div",{className:g.default.profileContainer,dir:"ltr"},i.default.createElement("div",{className:g.default.media},i.default.createElement(m.default,{type:"scaleDown",size:this.state.size},i.default.createElement("div",{className:g.default.profileViewer,"data-animate-profile-viewer":!0,ref:this.setRefImage,style:this.state.style},e))))))}}S.CONCERNS={contact:["formattedUser","id"],profilePicThumb:["imgFull"]},S.displayName="PhotoViewerModal";var P=(0,_.default)(S,S.CONCERNS);t.default=P},94916:(e,t,a)=>{"use strict";var r=a(20862),l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{profilePicThumb:t,size:a}=e,r=!t.canSet()&&!t.canDelete(),[l,m]=p(!1),g=(0,h.default)();return i.default.createElement(d.default,{type:u.default.PROFILE,id:t.id,attachToChat:!1,pending:l,startImage:t.imgFull,readOnly:r,onImageSet:(t,a)=>{var r,l=e.profilePicThumb;m(!0),r=t&&a?(0,c.setProfilePic)(l,t,a):(0,c.deleteProfilePic)(l),(0,f.default)(r,g).catch((0,o.filteredCatch)(s.ActionError,(()=>{__LOG__(3)`ProfileDrawer: failed to set/delete profile image`}))).catch((0,n.catchAbort)((()=>{}))).finally((()=>{m(!1)}))},size:a})};var n=a(58566),o=a(24788),i=l(a(67294)),s=r(a(12536)),d=l(a(21668)),u=l(a(77031)),c=a(56435),f=l(a(46532)),h=l(a(83069)),{useState:p}=i.default},22347:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return l.default.createElement(n.default,{a8nText:"li-share-link",icon:l.default.createElement(s.default,{name:"forward",className:i.default.icon}),onClick:e.onClick},o.default.t(1468))};var l=r(a(67294)),n=r(a(75389)),o=r(a(80162)),i=r(a(60654)),s=r(a(32885))},9300:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return l.default.createElement(n.default,{a8nText:"li-share-link",icon:l.default.createElement(s.default,{name:"forward",className:i.default.icon}),onClick:e.onClick},o.default.t(1491))};var l=r(a(67294)),n=r(a(75389)),o=r(a(80162)),i=r(a(67873)),s=r(a(32885))},42216:(e,t,a)=>{"use strict";var r=a(95318),l=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(24788),o=l(a(67294)),i=r(a(33766)),s=r(a(61732)),d=a(44373),u=r(a(67755)),c=r(a(91704)),f=a(68570),h=r(a(87709)),p=a(77824),m=r(a(80162)),g=r(a(85726)),_=r(a(58667)),C=a(59094),v=r(a(19614)),E=r(a(32885)),S=l(a(48847)),P=r(a(26144)),T=r(a(11918)),y=r(a(4328));class I extends o.Component{constructor(){super(...arguments),this.emojiInputComponent=(0,u.default)(),this._refEmojiPanel=(0,o.createRef)(),this.isSkinTonePickerOpen=!1,this.handleSend=e=>{var t;if(e.preventDefault(),this._refInputLine){var a=this._refInputLine.value.trim();if(a.length){var r=(0,S.genId)();(0,p.findChat)(this.props.msg.sender).then((e=>(i.default.openToast(o.default.createElement(S.default,{msg:m.default.t(1518),id:r})),(0,C.sendTextMsgToChat)(e,(0,h.default)(a),{quotedMsg:this.props.msg})))).then((()=>{this.props.onSend()})).catch((0,n.filteredCatch)(s.default,(()=>{var{chat:e}=this.state;e&&i.default.openToast(o.default.createElement(S.default,{msg:m.default.t(1770,{contact:e.contact.formattedName}),id:r}))}))),null===(t=this._refInputLine)||void 0===t||t.reset(),this._emojiPickerClose(),this.props.dismissReply()}}},this.handleFocus=()=>{this.setState({focused:!0})},this.handleBlur=()=>{this.isSkinTonePickerOpen||document.activeElement===document.body&&this.setState({focused:!1})},this.handleSkinTonePicker=e=>{this.isSkinTonePickerOpen=e},this.isFocused=()=>this.state.focused,this.handleEmojiPicker=e=>{e&&(e.preventDefault(),e.stopPropagation());var t=o.default.createElement(c.default,{ref:this._refEmojiPanel,onEmoji:this.handleEmoji,onFocusNext:this.restoreFocus,onFocusPrev:this.restoreFocus});this.setState({emojiPicker:{menu:t,dirY:d.DirY.TOP,type:"emoji_picker",anchor:e.target}})},this.handleEmoji=e=>{this._refInputLine&&this._refInputLine.replaceSelection(e)},this.restoreFocus=()=>{this._refInputLine&&this._refInputLine.focus()},this._restoreEmojiPickerFocus=()=>{var e;null===(e=this._refEmojiPanel.current)||void 0===e||e.restoreFocus()},this._emojiPickerClose=()=>{this.setState({emojiPicker:void 0}),this.restoreFocus()},this.state={replyCaption:"",focused:!1,emojiPicker:void 0,chat:void 0},(0,p.findChat)(this.props.msg.sender).checkpoint(this.props.rejectOnUnmount()).then((e=>{this.setState({chat:e})}))}componentDidUpdate(e,t){this._shouldPausePlayback(t)&&!this._shouldPausePlayback(this.state)?this.props.play():!this._shouldPausePlayback(t)&&this._shouldPausePlayback(this.state)&&this.props.pause()}_shouldPausePlayback(e){return Boolean(e.emojiPicker)||e.focused}isPaused(){return this._shouldPausePlayback(this.state)}render(){var e,t,a;this.state.emojiPicker&&(e=o.default.createElement(P.default,{displayName:"EmojiPicker",escapable:!0,popable:!0,requestDismiss:this._emojiPickerClose,requestFocus:this._restoreEmojiPickerFocus},o.default.createElement(T.default,{contextMenu:this.state.emojiPicker})),t=o.default.createElement(P.default,{displayName:"EmojiPicker",escapable:!0,requestFocus:this._restoreEmojiPickerFocus},o.default.createElement("div",null,e)));var{chat:r}=this.state;r&&this.state.focused&&!this.state.emojiPicker&&(a=o.default.createElement(P.default,{displayName:"StatusV3Reply",escapable:!0,requestDismiss:this.props.dismissReply},o.default.createElement("div",{className:v.default.popupPanel},o.default.createElement(_.default,{msg:this.props.msg.safe(),theme:"statusV3",key:this.props.msg.id.toString(),chat:r}))));var l=this.emojiInputComponent;return o.default.createElement("div",{className:v.default.container},o.default.createElement(y.default,{transitionName:"status-v3-quoted-msg",transitionAppear:!0},a),o.default.createElement("div",{className:v.default.wrapper},o.default.createElement("button",{className:v.default.emojiIcon,onClick:this.handleEmojiPicker},o.default.createElement(E.default,{name:"smiley"})),o.default.createElement("div",{className:v.default.lineWrapper},o.default.createElement(l.EmojiSuggestions,{theme:f.ThemeOptions.EMOJI_INPUT,onSkinTonePicker:this.handleSkinTonePicker}),o.default.createElement(l,{ref:e=>{this._refInputLine=e},theme:"status-reply",spellCheck:!0,onFocus:this.handleFocus,onBlur:this.handleBlur,onEnter:this.handleSend,placeholder:m.default.t(1572),editable:!0,multiline:!0})),o.default.createElement("button",{className:v.default.sendIcon,onClick:this.handleSend},o.default.createElement(E.default,{name:"send",directional:!0})),t))}}I.displayName="StatusV3ComposeBox";var w=(0,g.default)(I);t.default=class extends w{isFocused(){return!0===this.getComponent().isFocused()}isPaused(){return this.getComponent().isPaused()}restoreFocus(){this.getComponent().restoreFocus()}}},53176:(e,t,a)=>{"use strict";var r=a(20862),l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.StatusV3Text=t.default=void 0;var n=l(a(23279)),o=l(a(94184)),i=a(24788),s=r(a(67294)),d=l(a(52087)),u=l(a(44386)),c=l(a(33766)),f=l(a(75444)),h=l(a(17367)),p=l(a(20923)),m=a(54438),g=r(a(12536)),_=a(77824),C=l(a(62886)),v=l(a(9462)),E=l(a(77188)),S=l(a(35001)),P=l(a(23152)),T=a(99375),y=l(a(80162)),I=l(a(80896)),w=l(a(76022)),O=a(85063),N=l(a(89958)),k=l(a(72462)),M=l(a(51321)),b=l(a(51124)),D=l(a(85726)),x=l(a(69507)),L=l(a(72765)),A=l(a(42216)),R=a(70904),F=l(a(4764)),B=l(a(71194)),U=l(a(94573)),V=l(a(26144)),j=a(96769),H=l(a(95607)),W=l(a(84854));class G extends s.Component{constructor(){super(...arguments),this._refProgressBar=(0,s.createRef)(),this._refProgressBarComponent=(0,s.createRef)(),this._refMeasuringProfile=(0,s.createRef)(),this._refWrapper=(0,s.createRef)(),this.componentWillUnmount=()=>{if(this._playbackController.removeListeners(),null!=this.props.sessionId){var e=Math.round(this._playbackController.duration||0);this._statusViewEvent.webcStatusPlaybackT=e;var t=this._playStartTime;null!=t&&(this._statusViewEvent.webcStatusViewT+=Math.round(window.performance.now()-t),this._playStartTime=void 0),this._statusViewEvent.commit()}},this._updateStatusViewers=()=>{M.default.find(this.props.msg.id).checkpoint(this.props.rejectOnUnmount()).then((e=>{this.setState({seenBy:e.read})})).catch((0,i.filteredCatch)(g.Unmount,(()=>{}))).catch((0,i.filteredCatch)(m.EphemeralDrop,(()=>{})))},this._handleWindowResize=()=>{var e=this._refMeasuringProfile&&this._refMeasuringProfile.current,t=this._refProgressBar&&this._refProgressBar.current;if(e&&t){var a=e.getBoundingClientRect(),r=t.getBoundingClientRect();!y.default.isRTL()&&a.right>r.left-5||y.default.isRTL()&&a.left<r.right+5?this.setState({narrow:!0}):this.setState({narrow:!1})}},this._handleTab=e=>{var t;(e&&(e.stopPropagation(),e.preventDefault()),this.props.statusV3.contact.isMe)||((null===(t=this._refComposeBox)||void 0===t?void 0:t.isFocused())?this.dismissReply():this._startReply())},this.handleWindowGainedFocus=()=>{this._windowFocused=!0,this.play()},this.handleWindowLostFocus=()=>{this._windowFocused=!1,this.pause()},this._handleClickProfile=()=>{var e=this.props.statusV3.contact.id;(0,_.findChat)(e).then((e=>c.default.openChatBottom(e))).then((()=>{this.props.closeStatusViewer(!0)}))},this.play=()=>{var e,t=this.props.mediaData;if(t){if(t.mediaStage!==O.MEDIA_DATA_STAGE.RESOLVED)return;this._statusViewEvent.webcStatusLoadT||(this._statusViewEvent.markWebcStatusLoadT(),this._statusViewEvent.webcStatusLoaded=!0)}(null===(e=this._refComposeBox)||void 0===e?void 0:e.isPaused())||this._windowFocused&&(this._playStartTime=window.performance.now(),this._playbackController.resume())},this.pause=()=>{var e=this.props.mediaData;if(!e||e.mediaStage===O.MEDIA_DATA_STAGE.RESOLVED){var t=this._playStartTime;null!=t&&(this._statusViewEvent.webcStatusViewT+=Math.round(window.performance.now()-t),this._playStartTime=void 0),this._playbackController.pause()}},this.handleMouseDown=()=>{this.pause()},this.handleMouseUp=()=>{this.play()},this.dismissReply=()=>{var e=this._refWrapper&&this._refWrapper.current;e&&C.default.focus(e)},this._startReply=()=>{var e;null===(e=this._refComposeBox)||void 0===e||e.restoreFocus()},this.handleSend=()=>{this._statusViewEvent.webcStatusReplyCount++},this.state={chat:void 0,narrow:!1},this._windowFocused=!0,this._playbackController=(0,R.setupStatusV3Controller)(this.props.mediaData,this.props.msg),this._statusViewEvent=new k.default.WebcStatusView({webcStatusLoaded:!1,webcStatusReplyCount:0,webcStatusViewT:0})}componentDidMount(){var{statusV3:e,msg:t,mediaData:a,msgIdx:r,sessionId:l}=this.props;if(null!=l){var o;e.contact.isMe?(o=k.default.WEBC_STATUS_ROW_SECTION.MY,this._updateStatusViewers()):o=e.contact.statusMute?k.default.WEBC_STATUS_ROW_SECTION.MUTED:e.hasUnread?k.default.WEBC_STATUS_ROW_SECTION.RECENT:k.default.WEBC_STATUS_ROW_SECTION.VIEWED;var s,d=this.props.rowIdx||0,u=e.msgs.length-1-r<e.unreadCount;a?s=a.isGif?k.default.WEBC_STATUS_MEDIA_TYPE.GIF:"video"===a.type?k.default.WEBC_STATUS_MEDIA_TYPE.VIDEO:k.default.WEBC_STATUS_MEDIA_TYPE.IMAGE:(s=t.getLinks().length?k.default.WEBC_STATUS_MEDIA_TYPE.URL:k.default.WEBC_STATUS_MEDIA_TYPE.TEXT,this._statusViewEvent.markWebcStatusLoadT(),this._statusViewEvent.webcStatusLoaded=!0),this._statusViewEvent.webcStatusSessionId=l,this._statusViewEvent.webcStatusRowSection=o,this._statusViewEvent.webcStatusRowIndex=d,this._statusViewEvent.webcStatusMediaType=s,this._statusViewEvent.webcStatusUnread=u}this._refProgressBarComponent&&this._refProgressBarComponent.current&&this._playbackController.addListeners(((e,t)=>{var a=this._refProgressBarComponent&&this._refProgressBarComponent.current;a&&a.handleStart(e,t)}),(()=>{var e=this._refProgressBarComponent&&this._refProgressBarComponent.current;e&&e.handlePause()}),(()=>{var e=this._refProgressBarComponent&&this._refProgressBarComponent.current;e&&e.handleEnded().checkpoint(this.props.rejectOnUnmount()).then((()=>{this.props.onNext()})).catch((0,i.filteredCatch)(g.Unmount,(()=>{})))})),a?(this.play(),a&&a.mediaStage===O.MEDIA_DATA_STAGE.RESOLVED&&this.props.markRead(this.props.statusV3,this.props.msg)):(this.props.msg.type,f.default.MSG_TYPE.CHAT,this.play(),this.props.markRead(this.props.statusV3,this.props.msg));var c=this._refWrapper&&this._refWrapper.current;c&&c.focus();var h=this.props.listeners;h.add(window,"focus",this.handleWindowGainedFocus),h.add(window,"blur",this.handleWindowLostFocus),h.add(window,"resize",(0,n.default)(this._handleWindowResize)),this._handleWindowResize()}render(){var e,t,{msg:a,mediaData:r,statusV3:l}=this.props;if(r){var n=J(r);n&&(e={backgroundImage:`url(${n})`})}else if(a.type===f.default.MSG_TYPE.CHAT){e={backgroundColor:a.statusV3TextBg}}if(r)switch(r.type){case w.default.TYPE.IMAGE:t=s.default.createElement(z,{msg:a,statusV3:l,mediaData:r,markRead:this.props.markRead,play:this.play,pause:this.pause,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp});break;case w.default.TYPE.VIDEO:t=s.default.createElement($,{msg:a,statusV3:l,mediaData:r,markRead:this.props.markRead,play:this.play,pause:this.pause,playbackController:this._playbackController,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp});break;default:__LOG__(3)`Invalid status v3 image type: ${r.type}`}else t=a.type===f.default.MSG_TYPE.CHAT?s.default.createElement(q,{msg:a,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp}):s.default.createElement(X,{onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp});var i,d=s.default.createElement("div",{ref:this._refProgressBar},s.default.createElement(B.default,{ref:this._refProgressBarComponent,current:this.props.msgIdx,total:this.props.totalMsgs,onClick:this.props.onClickProgressBar}));a.type!==f.default.MSG_TYPE.CHAT&&(i=s.default.createElement("div",{className:F.default.captionBackdrop},s.default.createElement(p.default,{className:F.default.mediaCaption,text:a.caption,formatters:T.Configuration.StatusV3Caption()})));var c,m,g=(0,o.default)(F.default.profile,{[F.default.nonClickProfile]:a.isSentByMe,[F.default.profileNarrow]:this.state.narrow}),_=(0,o.default)(F.default.profile,F.default.measuringProfile,{}),C=s.default.createElement("div",{className:g,onClick:a.isSentByMe?null:this._handleClickProfile},s.default.createElement("div",{className:F.default.playerAvatar},s.default.createElement(h.default,{id:l.contact.id,theme:"status_v3",size:40})),s.default.createElement("div",{className:F.default.msgInfo},s.default.createElement(p.default,{className:F.default.msgInfoName,text:l.contact.formattedName}),s.default.createElement("div",{className:F.default.timestamp},u.default.relativeDateAndTimeStr(a.t)))),v=s.default.createElement("div",{ref:this._refMeasuringProfile,className:_},s.default.createElement("div",{className:F.default.playerAvatar},s.default.createElement(h.default,{id:l.contact.id,theme:"status_v3",size:40})),s.default.createElement("div",{className:F.default.msgInfo},s.default.createElement(p.default,{className:F.default.msgInfoName,text:l.contact.formattedName}),s.default.createElement("div",{className:F.default.timestamp},u.default.relativeDateAndTimeStr(a.t)))),P={tab:this._handleTab,"shift+tab":this._handleTab},y=e=>e.stopPropagation();r&&(c=s.default.createElement(Z,{mediaData:r}));var I=this.props.statusV3.contact;I.isMe||I.isPSA||(m=s.default.createElement(S.default,{handlers:{left:y,right:y}},s.default.createElement(A.default,{msg:this.props.msg,dismissReply:this.dismissReply,onSend:this.handleSend,pause:this.pause,play:this.play,ref:e=>{this._refComposeBox=e}})));var O,N=E.default.supportsFeature(E.default.F.SEE_STATUS_VIEWERS)&&I.isMe&&this.state.seenBy?s.default.createElement("div",{className:F.default.seen},s.default.createElement(U.default,{seenCount:this.state.seenBy.length})):null,k=(0,o.default)(F.default.playerBackground,{[F.default.media]:r}),M=(0,o.default)(F.default.progressBackdrop,{[F.default.progressBarBackdropNarrow]:this.state.narrow});return a.type!==f.default.MSG_TYPE.CHAT&&(O=s.default.createElement("div",{className:M})),s.default.createElement(V.default,{displayName:"StatusV3Player",escapable:!0,requestDismiss:e=>{e||this.props.closeStatusViewer()},requestFocus:this.dismissReply},s.default.createElement(S.default,{handlers:P},s.default.createElement("div",{className:F.default.playerWrapper,key:a.id.toString(),tabIndex:-1,ref:this._refWrapper},v,C,O,d,i,s.default.createElement("div",{className:k,style:e}),t,c,N,m)))}}G.displayName="_StatusV3Player";class K extends s.PureComponent{constructor(...e){super(...e),this._renderImage=e=>{var{msg:t,mediaData:a}=this.props,r=(0,o.default)(F.default.playerContent,F.default.v3Image);return s.default.createElement("div",{className:r,onMouseDown:this.props.onMouseDown,onMouseUp:this.props.onMouseUp,onDragEnd:this.props.onMouseUp},s.default.createElement(b.default,{type:"contain",size:{width:a.fullWidth,height:a.fullHeight}},s.default.createElement("div",{className:F.default.mediaViewer},s.default.createElement(P.default,{src:e,disableContextMenu:!0}),t&&t.interactiveAnnotations&&t.interactiveAnnotations.length>0&&s.default.createElement(d.default,{annotations:t.interactiveAnnotations,onTooltipDisplay:this.props.onMouseDown,onTooltipDismiss:this.props.onMouseUp}))))},this._renderPreviewImage=()=>{var e,{mediaData:t}=this.props,a=(0,o.default)(F.default.playerContent,F.default.v3Image,F.default.loading);return s.default.createElement("div",{className:a,onMouseDown:this.props.onMouseDown,onMouseUp:this.props.onMouseUp},s.default.createElement(b.default,{type:"contain",size:{width:t.aspectRatio,height:1}},s.default.createElement(P.default,{src:null!==(e=J(t))&&void 0!==e?e:""})))},this._downloadMedia=()=>this.props.msg.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:k.default.WEBC_RMR_REASON_CODE.STATUS_V3,isUserInitiated:!0})}componentDidMount(){this.props.mediaData.mediaStage!==O.MEDIA_DATA_STAGE.RESOLVED&&this.props.msg.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:k.default.WEBC_RMR_REASON_CODE.STATUS_V3,isUserInitiated:!0})}componentDidUpdate(){this.props.play();var e=this.props.mediaData;e&&e.mediaStage===O.MEDIA_DATA_STAGE.RESOLVED&&this.props.markRead(this.props.statusV3,this.props.msg)}componentWillUnmount(){this.props.pause()}render(){return s.default.createElement(N.default,{mediaData:this.props.mediaData,placeholderRenderer:this._renderPreviewImage,downloadMedia:this._downloadMedia,renderProgressively:!0},this._renderImage)}}K.CONCERNS={mediaData:["mediaStage","renderableUrl","preview","fullWidth","fullHeight","aspectRatio","fullPreviewData"]},K.displayName="_StatusV3Img";var z=(0,L.default)(K,K.CONCERNS);class Y extends s.PureComponent{constructor(...e){super(...e),this.refVideo=(0,s.createRef)(),this.setRefVideo=e=>{this.refVideo=e,this.props.playbackController.setVideo(this.refVideo.current)}}componentDidMount(){var e=this.props.mediaData;e.streamable||e.isStreamable()||this.props.msg.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:k.default.WEBC_RMR_REASON_CODE.STATUS_V3,isUserInitiated:!0})}componentDidUpdate(){this.props.play();var e=this.props.mediaData;e&&e.mediaStage===O.MEDIA_DATA_STAGE.RESOLVED&&this.props.markRead(this.props.statusV3,this.props.msg)}componentWillUnmount(){this.props.pause()}render(){var e,{msg:t,mediaData:a,onMouseDown:r,onMouseUp:l}=this.props,n=a.mediaStage!==O.MEDIA_DATA_STAGE.RESOLVED,i=(0,o.default)(F.default.playerContent,F.default.v3Video,{loading:n});return s.default.createElement("div",{className:i,onMouseDown:r,onMouseUp:l},s.default.createElement(b.default,{type:"contain",size:{width:a.fullWidth,height:a.fullHeight}},s.default.createElement("div",{className:F.default.mediaViewer},s.default.createElement(W.default,{msg:t,mediaData:a,autoPlay:!0,refVideo:this.setRefVideo,poster:null!==(e=J(a))&&void 0!==e?e:"",disableContextMenu:!0},y.default.t(1633)),t&&t.interactiveAnnotations&&t.interactiveAnnotations.length>0&&s.default.createElement(d.default,{annotations:t.interactiveAnnotations,onTooltipDisplay:this.props.onMouseDown,onTooltipDismiss:this.props.onMouseUp}))))}}Y.CONCERNS={mediaData:["preview","mediaStage","fullWidth","fullHeight","streamable","fullPreviewData"]},Y.displayName="_StatusV3Video";var $=(0,L.default)(Y,Y.CONCERNS);class q extends s.PureComponent{componentDidMount(){v.default.load(this.props.msg.font).catch((()=>{}))}render(){var e,t,a=(0,j.numCodepoints)(this.props.msg.body),r={[F.default[`font_${this.props.msg.font}`]]:!0};return a<=60?(e=(0,o.default)(F.default.text,F.default.textLarge,r),t=T.Configuration.StatusV3Text({links:this.props.msg.getLinks()})):a<=240?(e=(0,o.default)(F.default.text,F.default.textMedium,r),t=T.Configuration.StatusV3Text({links:this.props.msg.getLinks()})):e=(0,o.default)(F.default.text,F.default.textSmall,r),s.default.createElement("div",{className:(0,o.default)(F.default.playerContent,{[F.default.statusPanelPlayerContent]:"status-panel"===this.props.theme,[F.default.statusThumbnailPlayerContent]:"status-thumbnail"===this.props.theme,[F.default.textThumbnailPlayerContent]:"text-thumb"===this.props.theme}),onMouseDown:this.props.onMouseDown,onMouseUp:this.props.onMouseUp},s.default.createElement("div",{className:e},s.default.createElement(p.default,{text:this.props.msg.body,formatters:t})))}}function X(e){return s.default.createElement("div",{className:F.default.playerContent,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp},s.default.createElement("div",{className:F.default.unknown},y.default.t(1519)))}function J(e){return e?e.fullPreviewData?e.fullPreviewData.url():e.preview?e.preview.url():null:null}t.StatusV3Text=q,q.displayName="StatusV3Text";var Z=function(e){return(0,H.default)(e.mediaData,["mediaStage"]).mediaStage!==O.MEDIA_DATA_STAGE.RESOLVED?s.default.createElement("div",{className:F.default.mediaStateControls},s.default.createElement("button",{className:"icon-media-disabled"},s.default.createElement(x.default,{size:50,stroke:4,color:"white"}))):null},Q=(0,D.default)((0,I.default)(G));t.default=Q},39226:(e,t,a)=>{"use strict";var r=a(20862),l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a(94184)),o=a(9019),i=a(24788),s=r(a(67294)),d=l(a(33766)),u=l(a(75444)),c=a(54438),f=r(a(12536)),h=l(a(9462)),p=l(a(35001)),m=l(a(80162)),g=a(85063),_=l(a(72462)),C=l(a(85726)),v=l(a(69507)),E=l(a(53176)),S=r(a(15605)),P=l(a(17394)),T=l(a(32885)),y=r(a(48847)),I=l(a(4328));class w extends s.Component{constructor(){super(...arguments),this.handleClickProgressBar=e=>{var t=this.state.iterator;if((!t||e!==t.msgIdx)&&t){var a=this._statusV3Snapshot.statusAt(t,e);a.isFulfilled()||this.setState({loading:!0}),a.checkpoint(this.props.rejectOnUnmount()).then((e=>{this.setState({iterator:e})})).catch((0,i.filteredCatch)(S.InvalidStatusV3Iterator,(()=>{__LOG__(3)`Invalid iterator while getting next status msg`}))).catch((0,i.filteredCatch)(c.EphemeralDrop,(()=>{}))).catch((0,i.filteredCatch)(f.Unmount,(()=>{}))).catch((0,i.filteredCatch)(S.StatusV3LoadingError,(()=>{__LOG__(3)`No more status v3 while preloading next status`}))).finally((()=>{this.setState({loading:!1})}))}},this._preloadNextStatus=()=>{var e=this.state.iterator;e&&this._statusV3Snapshot.hasNext(e)&&this._statusV3Snapshot.getNext(e).checkpoint(this.props.rejectOnUnmount()).then((e=>{var t=this._statusV3Snapshot.statuses[e.statusIdx].msgs[e.msgIdx];if(!t)throw new S.StatusV3MsgNotFound;if(t.type===u.default.MSG_TYPE.CHAT)h.default.load(t.font).catch((()=>{}));else{var a=t.mediaData;a&&a.mediaStage!==g.MEDIA_DATA_STAGE.RESOLVED&&t.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:_.default.WEBC_RMR_REASON_CODE.STATUS_V3,isUserInitiated:!1})}})).catch((0,i.filteredCatch)(S.StatusV3MsgNotFound,(()=>{__LOG__(3)`Error finding next status while preloading next status`}))).catch((0,i.filteredCatch)(S.InvalidStatusV3Iterator,(()=>{__LOG__(3)`Invalid iterator while preloading next status`}))).catch((0,i.filteredCatch)(c.EphemeralDrop,(()=>{}))).catch((0,i.filteredCatch)(f.Unmount,(()=>{}))).catch((0,i.filteredCatch)(S.StatusV3LoadingError,(()=>{__LOG__(3)`No more status v3 while preloading next status`})))},this.handlePrev=()=>{var e=this.state.iterator;if(e&&this._statusV3Snapshot.hasPrev(e)){var t=e.statusIdx;this._statusV3Snapshot.getPrev(e).checkpoint(this.props.rejectOnUnmount()).then((e=>{e.statusIdx===t?this.setState({iterator:e}):(this.setState({transitioning:!0}),(0,o.delayMs)(200).checkpoint(this.props.rejectOnUnmount()).then((()=>{this.setState({iterator:e,transitioning:!1})})).catch((0,i.filteredCatch)(f.Unmount,(()=>{}))))})).catch((0,i.filteredCatch)(S.InvalidStatusV3Iterator,(()=>{__LOG__(3)`Invalid iterator while getting previous status msg`}))).catch((0,i.filteredCatch)(c.EphemeralDrop,(()=>{}))).catch((0,i.filteredCatch)(f.Unmount,(()=>{}))).catch((0,i.filteredCatch)(S.StatusV3LoadingError,(()=>{__LOG__(3)`No more status v3 while preloading next status`})))}},this.handleNext=()=>{var e=this.state.iterator;if(e&&this._statusV3Snapshot.hasNext(e)){var t=e.statusIdx,a=this._statusV3Snapshot.getNext(e);a.isFulfilled()||this.setState({loading:!0}),a.checkpoint(this.props.rejectOnUnmount()).then((e=>{e.statusIdx===t?this.setState({iterator:e}):(this.setState({transitioning:!0,loading:!1}),(0,o.delayMs)(200).checkpoint(this.props.rejectOnUnmount()).then((()=>{this.setState({iterator:e,transitioning:!1})})).catch((0,i.filteredCatch)(f.Unmount,(()=>{}))))})).catch((0,i.filteredCatch)(S.InvalidStatusV3Iterator,(()=>{__LOG__(3)`Invalid iterator while getting next status msg`,this.closeStatusViewer()}))).catch((0,i.filteredCatch)(c.EphemeralDrop,(()=>{}))).catch((0,i.filteredCatch)(f.Unmount,(()=>{}))).catch((0,i.filteredCatch)(S.StatusV3LoadingError,(()=>{__LOG__(3)`No more status v3 while preloading next status`}))).finally((()=>{this.setState({loading:!1})}))}else this.closeStatusViewer()},this.markRead=(e,t)=>{if(t){var a=e.unreadCount,r=e.totalCount;e.msgs.getModelsArray().findIndex((e=>e===t))>=r-a&&e.sendReadStatus(t.id,t.author);var l=this._statusV3Snapshot.statuses.find((t=>t.statusV3===e));l&&l.readMsgKeys.push(t.id.toString())}},this.closeStatusViewer=e=>{this.setState({transitioning:!0}),(0,o.delayMs)(200).checkpoint(this.props.rejectOnUnmount()).then((()=>{this.props.closeStatusViewer(e)})).catch((0,i.filteredCatch)(f.Unmount,(()=>{})))};var e=this.props.initialStatusV3;if(this.props.quotedMsgKey){this.state={};var t=this.props.quotedMsgKey;if(-1!==e.msgs.getModelsArray().findIndex((e=>e.id.toString()===t.toString())))this._statusV3Snapshot=new S.default(e,t),this._statusV3Snapshot.getFirstUnread(e,!0,t).checkpoint(this.props.rejectOnUnmount()).then((e=>{this.setState({iterator:e,loading:!1})})).catch((0,i.filteredCatch)(c.EphemeralDrop,(()=>{}))).catch((0,i.filteredCatch)(f.Unmount,(()=>{}))).catch((0,i.filteredCatch)(S.InvalidStatusV3Iterator,(()=>{__LOG__(3)`Invalid iterator while loading first unread msg`,d.default.openToast(s.default.createElement(y.default,{msg:m.default.t(1512),id:(0,y.genId)()})),this.props.closeStatusViewer()})));else this.state={loading:!0},e.loadMore(e.totalCount).then((()=>{(this.setState({loading:!1}),-1!==e.msgs.getModelsArray().findIndex((e=>e.id.toString()===t.toString())))?(this._statusV3Snapshot=new S.default(e,t),this._statusV3Snapshot.getFirstUnread(e,!0,t).checkpoint(this.props.rejectOnUnmount()).then((e=>{this.setState({iterator:e,loading:!1})})).catch((0,i.filteredCatch)(c.EphemeralDrop,(()=>{}))).catch((0,i.filteredCatch)(f.Unmount,(()=>{}))).catch((0,i.filteredCatch)(S.InvalidStatusV3Iterator,(()=>{__LOG__(3)`Invalid iterator while loading first unread msg`,d.default.openToast(s.default.createElement(y.default,{msg:m.default.t(1512),id:(0,y.genId)()})),this.props.closeStatusViewer()})))):(this.props.onMsgNotFound&&this.props.onMsgNotFound(),d.default.openToast(s.default.createElement(y.default,{msg:m.default.t(1512),id:(0,y.genId)()})),this.props.closeStatusViewer())})).catch((()=>{d.default.openToast(s.default.createElement(y.default,{msg:m.default.t(1512),id:(0,y.genId)()})),this.props.closeStatusViewer()})).finally((()=>{this.setState({loading:!1})}))}else{var a=this.props.initialStatusMsg;this._statusV3Snapshot=new S.default(e);var r=this._statusV3Snapshot.getFirstUnread(e,!0,a&&a.id);r.isFulfilled()?this.state={}:this.state={loading:!0},r.checkpoint(this.props.rejectOnUnmount()).then((e=>{this.setState({iterator:e,loading:!1})})).catch((0,i.filteredCatch)(c.EphemeralDrop,(()=>{}))).catch((0,i.filteredCatch)(f.Unmount,(()=>{}))).catch((0,i.filteredCatch)(S.InvalidStatusV3Iterator,(()=>{__LOG__(3)`Invalid iterator while loading first unread msg`,d.default.openToast(s.default.createElement(y.default,{msg:m.default.t(1512),id:(0,y.genId)()})),this.props.closeStatusViewer()})))}}componentDidMount(){this._preloadNextStatus()}componentDidUpdate(){this._preloadNextStatus()}render(){var e,t,a,r,l,o,i,d,u=this.state.iterator;u&&(o=(l=this._statusV3Snapshot).statuses[u.statusIdx],i=o.statusV3,d=o.msgs[u.msgIdx],l.hasPrev(u)&&(a=s.default.createElement("div",{className:P.default.chevronLeft},s.default.createElement(T.default,{name:"chevron-left"})),r=s.default.createElement("div",{className:P.default.chevronLeftBg,onClick:this.handlePrev})),l.hasNext(u)&&(e=s.default.createElement("div",{className:P.default.chevronRight},s.default.createElement(T.default,{name:"chevron-right"})),t=s.default.createElement("div",{className:P.default.chevronRightBg,onClick:()=>{this.handleNext(),this.markRead(i,d)}})));var c,f={left:this.handlePrev,right:this.handleNext};!this.state.transitioning&&!this.state.loading&&d&&u&&o&&i&&(c=s.default.createElement("div",{className:P.default.playerContainer,key:d.id},s.default.createElement(E.default,{key:d.id,statusV3:i,msg:d,mediaData:d.mediaData,msgIdx:u.msgIdx,totalMsgs:o.totalCount,markRead:this.markRead,closeStatusViewer:this.closeStatusViewer,onClickProgressBar:this.handleClickProgressBar,onNext:this.handleNext,onPrev:this.handlePrev,sessionId:this.props.sessionId,rowIdx:this.props.rowIdx})));var h,m=(0,n.default)(P.default.v3X,{}),g=s.default.createElement("button",{className:m,onClick:()=>this.props.closeStatusViewer(!0)},s.default.createElement(T.default,{name:"x-viewer"})),_=(0,n.default)(P.default.backIcon,{}),C=s.default.createElement("button",{className:_,onClick:()=>this.props.closeStatusViewer()},s.default.createElement(T.default,{name:"back",directional:!0}));return this.state.loading&&(h=s.default.createElement("div",{className:P.default.mediaStateControls},s.default.createElement("button",null,s.default.createElement(v.default,{size:50,stroke:4,color:"white"})))),s.default.createElement(p.default,{handlers:f},s.default.createElement("div",{className:P.default.viewer,"data-animate-status-v3-viewer":!0},g,C,r,a,t,e,h,s.default.createElement(I.default,{transitionName:"status-v3-player",transitionAppear:!0},c)))}}w.displayName="StatusV3Viewer";var O=(0,C.default)(w);t.default=O},23348:(e,t,a)=>{"use strict";var r=a(95318),l=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a(67294)),o=r(a(75444)),i=r(a(64120)),s=r(a(39490)),d=l(a(55977)),u=r(a(20923)),c=r(a(35001)),f=r(a(29700)),h=l(a(26689)),p=r(a(16479)),m=r(a(93227)),g=r(a(32885)),_=r(a(5711)),C=r(a(43693)),v=r(a(26144)),E=l(a(22846)),S=(e,t)=>{var{defaultText:a,title:r,onSend:l,onBack:S}=e,[P,T]=(0,n.useState)(a),y=(0,E.findFirstWebLink)(P),{linkPreview:I,clearLinkPreview:w}=(0,E.default)(y),O=r?n.default.createElement(u.default,{text:r,direction:"auto",titlify:!0,ellipsify:!0}):null,{title:N,canonicalUrl:k,description:M,thumbnail:b}=I||{},D=I?n.default.createElement(v.default,{displayName:"ComposeBoxLinkPreview",escapable:!0,requestDismiss:w},n.default.createElement(p.default,{onOmit:w},n.default.createElement(f.default,{title:N,compose:!0,canonicalUrl:k,description:M,thumbnailJpeg:b}))):null;return n.default.createElement(h.default,{type:h.BoxModalType,ref:t},n.default.createElement(i.default,null,n.default.createElement(d.default,{type:d.DRAWER_HEADER_TYPE.POPUP,onBack:S},O),n.default.createElement(s.default,null,n.default.createElement(c.default,{className:C.default.container},n.default.createElement("div",{className:C.default.inputContainer},n.default.createElement(_.default,{a8n:"text-message-modal-text-unput",value:P,maxLength:o.default.MAX_TXT_MSG_SIZE,onChange:e=>{T(e)},supportsEmoji:!0,multiline:!0,spellCheck:!0,showRemaining:!0,focusOnMount:!0,theme:"small"})),D)),n.default.createElement("div",{className:C.default.btnContainer},n.default.createElement("div",{className:C.default.btnPosition},n.default.createElement(m.default,{large:!0,onClick:()=>{P.length&&l(P,I)}},n.default.createElement(g.default,{name:"send",directional:!0}))))))},P=(0,n.forwardRef)(S);t.default=P},93226:(e,t,a)=>{"use strict";var r=a(95318),l=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a(67294)),o=r(a(76429)),i=r(a(49589)),s=r(a(44373)),d=r(a(7970)),u=a(34605),c=r(a(80162)),f=r(a(86311)),h=a(37463),p=a(97713),m=a(38335),g=r(a(32885)),_=a(56670);class C extends n.PureComponent{_getCartIcon(){var{onCartClick:e,cartCount:t,catalogId:a}=this.props;if(e&&a){var r=(0,_.isNumber)(t)&&t>0?t.toString():void 0,l=(0,h.getOnCartClickWithLog)(e,a,(0,m.getProductCatalogContext)(this.context));return n.default.createElement(p.MenuBarItem,{a8nText:"menu-bar-cart-link",icon:n.default.createElement(o.default,{theme:"inherit-color"}),text:r,title:c.default.t(439),onClick:l})}return null}_getMenuItems(){var{canManageCatalog:e,onSendCatalog:t,onOpenCollections:a,onOpenSettings:r}=this.props;return e?n.default.createElement(p.MenuBarItem,{a8nText:"menu-bar-menu",icon:n.default.createElement(g.default,{name:"menu"}),title:c.default.t(1112)},n.default.createElement(s.default,{type:"dropdown_menu",flipOnRTL:!0,key:"CatalogDetailHeader",dirX:"LEFT"},n.default.createElement(d.default,{a8n:"mi-foward menu-item",action:t},c.default.t(813)),a&&n.default.createElement(d.default,{a8n:"mi-collections menu-item",action:a},c.default.t(567)),(0,u.canToggleCartOnOff)()&&r&&n.default.createElement(d.default,{a8n:"mi-settings menu-item",action:r},c.default.t(507)))):n.default.createElement(p.MenuBarItem,{a8nText:"menu-bar-catalog-link",icon:n.default.createElement(f.default,null),title:c.default.t(500),onClick:t})}render(){return n.default.createElement(n.default.Fragment,null,this._getCartIcon(),this._getMenuItems())}}t.default=C,C.contextType=i.default,C.displayName="DetailDrawerMenu"},18824:(e,t,a)=>{"use strict";var r=a(95318),l=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(72436);var n=l(a(67294)),o=(r(a(56720)),r(a(62685))),i=r(a(89729)),s=r(a(49589)),d=r(a(68698)),u=a(57909),c=a(34605),f=r(a(80162)),h=a(4566),p=r(a(10276)),m=a(38335),g=r(a(45437)),_=r(a(34991)),C=a(6578),v=r(a(32885)),E=r(a(32759)),S={addIcon:{position:"i14x6aek",width:"f73llzs0",height:"p5bptefk",paddingBottom:"dd5odw7y",marginTop:"jpyiffne",marginEnd:"o1in6s62",marginBottom:"tun6atdl",marginStart:"lcl76wud",borderTop:"r8942mb9",borderEnd:"moazgnih",borderBottom:"trumgx9t",borderStart:"m3c8cjh7",borderTopStartRadius:"f7zq07it",borderTopEndRadius:"drynjn6o",borderBottomEndRadius:"la1typr2",borderBottomStartRadius:"djlxxc2x",":before":{position:"s77xvi93",top:"sj7t9j7y",start:"j10wkmka",display:"t8ns054n",width:"mi3x5l2c",height:"sj1q95lx",content:"i5w33dwk",background:"k20djfad",transform:"bo6fa6aj"},":after":{position:"owt6xe1z",top:"io6gddtd",start:"shzgc9s5",display:"tsccu3a5",width:"hoew7jmc",height:"gn3scexo",content:"aplu3kzi",background:"per0pcvy",transform:"qo0wi34t"}},largeGallerySpacing:{width:"csc7lp03",height:"p5bptefk",marginEnd:"cb2qgrf8",marginBottom:"jvibjkbe"},placeholderThumb:{width:"f73llzs0",height:"c0vztv70",paddingBottom:"qhspb9pi",marginTop:"jpyiffne",marginEnd:"o1in6s62",marginBottom:"tun6atdl",marginStart:"lcl76wud",backgroundColor:"h134f7bd",borderTopStartRadius:"f7zq07it",borderTopEndRadius:"drynjn6o",borderBottomEndRadius:"la1typr2",borderBottomStartRadius:"djlxxc2x"}};class P extends n.Component{constructor(...e){super(...e),this.handleProductDetail=e=>{var{onProductDetail:t,shouldLog:a}=this.props;a&&(0,h.logProfileProductClick)({product:(0,C.unproxy)(e),catalogContext:(0,m.getProductCatalogContext)(this.context)}),t(e)}}componentDidMount(){var{shouldLog:e,catalog:t}=this.props;e&&null!=t&&(0,h.logBusinessProfileCatalogView)({catalogOwnerWid:t.id,catalogContext:(0,m.getProductCatalogContext)(this.context)})}_renderGallery(){var e,{catalog:t,filterProductId:a,productsToShow:r,hideIncompleteRows:l,onProductCatalog:o,showProductPlaceholders:i,seeMoreOverlay:s}=this.props,d=[],u=r,h=void 0;if((0,c.canSeeBizProfileV3)()&&(h="largeGallerySpacing"),null!=t?(e=t.productCollection,d=t.productCollection.getProductModels(),l&&d.length>3&&(u=Math.min(r,d.length-d.length%3)),d=(d=d.slice(0,u+1)).filter((e=>e.id.toString()!==a)).map(((e,a)=>{var r,l,o=null===(r=e.getPreviewImage())||void 0===r?void 0:r.mediaData;return o?(s&&a===u-1&&t.productCollection.length>u-1&&(l=f.default.t(1463)),n.default.createElement(_.default,{key:e.id.toString(),onClick:()=>this.handleProductDetail(e),mediaData:o,overlayContent:l,theme:h})):n.default.createElement(n.default.Fragment,null)})).slice(0,u)):(e=new g.default).add({id:"_ph"}),!d.length&&!i)return null;for(var C,v=S.addIcon;i&&d.length<u;)d.push(n.default.createElement(E.default,{key:`_ph${d.length}`,onClick:o.bind(this,(0,m.getProductCatalogContext)(this.context)),title:f.default.t(2),xstyle:[v,"largeGallerySpacing"===h&&S.largeGallerySpacing]},n.default.createElement(n.default.Fragment,null))),v=S.placeholderThumb;return(0,c.canSeeBizProfileV3)()&&(C="space-between"),n.default.createElement(p.default,{productMedias:d,mediaCollection:e,justify:C})}_renderCatalogEntryButton(){var{onProductCatalog:e,catalogEntryLabel:t}=this.props;return null==t?null:n.default.createElement("div",{className:i.default.catalogEntryButton},n.default.createElement(o.default,{a8nText:"catalog-entry-button",type:"secondary",onClick:e.bind(this,(0,m.getProductCatalogContext)(this.context))},t))}_renderShopsLogo(){return this.props.showShopsLogo?n.default.createElement("div",{className:i.default.shopsLogo},n.default.createElement(v.default,{name:"fbshops",display:"inline"})):null}render(){var{onProductCatalog:e,title:t,subtitle:a,animation:r,sectionTheme:l}=this.props,o=this._renderCatalogEntryButton(),s=this._renderGallery(),c=a?n.default.createElement(u.FlexItem,{className:i.default.subtitle},a):null,h=n.default.createElement(u.FlexRow,{align:"center"},c,n.default.createElement(u.FlexItem,null,n.default.createElement(v.default,{className:i.default.chevron,name:"chevron-right-alt",directional:!0})));return n.default.createElement(d.default,{title:t||f.default.t(1372),titleOnClick:e.bind(this,(0,m.getProductCatalogContext)(this.context)),subtitle:h,theme:l,animation:r},s,o,this._renderShopsLogo())}}t.default=P,P.contextType=s.default,P.defaultProps={productsToShow:6,sectionTheme:"padding",hideIncompleteRows:!1},P.displayName="CatalogDrawerSection"},75508:(e,t,a)=>{"use strict";var r=a(95318),l=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a(67294)),o=r(a(73040)),i=r(a(74724)),s=r(a(33766)),d=r(a(95653)),u=l(a(17367)),c=r(a(64120)),f=r(a(39490)),h=r(a(49589)),p=l(a(55977)),m=r(a(80162)),g=r(a(84345)),_=a(4566),C=r(a(39148)),v=a(38335),E=r(a(64629)),S=r(a(22347)),P=a(92758),T="catalog-link-anchor";class y extends n.Component{constructor(...e){super(...e),this._handleCatalogLinkClick=e=>{e.preventDefault(),this._handleSendCatalogLinkClick()},this._handleSendCatalogLinkClick=()=>{var{catalog:e,onSend:t}=this.props;s.default.openModal(n.default.createElement(E.default,{catalog:e,onSend:t}),{transition:"modal-flow"}),(0,_.logShareCatalogViaWALinkClick)({catalogOwnerWid:e.id,catalogContext:(0,v.getProductCatalogContext)(this.context)})},this._handleCopyLinkClick=()=>{var{catalog:e}=this.props;(0,_.logShareCatalogCopyLinkClick)({catalogOwnerWid:e.id,catalogContext:(0,v.getProductCatalogContext)(this.context)})}}render(){var e,t,{onBack:a,onCancel:r,catalog:l,contact:s,prompt:h,centerDrawer:_}=this.props,v=n.default.createElement(u.default,{id:s.id,size:82,quality:u.DETAIL_IMAGE_QUALITY.HIGH});return _&&(e="labels",t="center-column"),n.default.createElement(c.default,{key:"catalog-link-drawer",theme:e},n.default.createElement(p.default,{a8n:"catalog-link-title",title:m.default.t(500),onBack:a,onCancel:r,type:p.DRAWER_HEADER_TYPE.SMALL}),n.default.createElement(f.default,{theme:t},n.default.createElement("div",{className:o.default.prompt},h),n.default.createElement(i.default,{image:v,primary:n.default.createElement(C.default,{contact:s,useVerifiedName:!0}),theme:"identity",secondary:n.default.createElement(g.default,{id:T,href:(0,P.createCatalogLink)(l.id.user),onClick:this._handleCatalogLinkClick,noHandle:!0})}),n.default.createElement(S.default,{onClick:this._handleSendCatalogLinkClick}),n.default.createElement(d.default,{elementId:T,onClick:this._handleCopyLinkClick})))}}t.default=y,y.contextType=h.default,y.displayName="CatalogLinkDrawer"},94172:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return i.apply(this,arguments)};var l=r(a(48926)),n=r(a(81732)),o=a(34605);function i(){return(i=(0,l.default)((function*(e){var t;if(!(0,o.cartPropEnabled)())return!1;var a=n.default.get(e);if(!a||a.stale){var r=yield n.default.update(e);a=Array.isArray(r)?r[0]:r}return(null===(t=a.profileOptions)||void 0===t?void 0:t.cartEnabled)||!1}))).apply(this,arguments)}},45144:(e,t,a)=>{"use strict";var r=a(95318),l=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a(67294)),o=r(a(76429)),i=r(a(49589)),s=r(a(44373)),d=r(a(7970)),u=a(34605),c=r(a(80162)),f=r(a(86311)),h=a(37463),p=a(97713),m=a(38335),g=r(a(32885)),_=a(56670);class C extends n.PureComponent{_getCartIcon(){var{onCartClick:e,cartCount:t,catalogId:a}=this.props;if(e&&a){var r=(0,_.isNumber)(t)&&t>0?t.toString():void 0,l=(0,h.getOnCartClickWithLog)(e,a,(0,m.getProductCatalogContext)(this.context));return n.default.createElement(p.MenuBarItem,{a8nText:"menu-bar-cart-link",icon:n.default.createElement(o.default,null),text:r,title:c.default.t(439),onClick:l})}return null}render(){var{contactId:e,onSendProduct:t,onReportProduct:a,onProductLinkClick:r}=this.props;return n.default.createElement(n.default.Fragment,null,this._getCartIcon(),n.default.createElement(p.MenuBarItem,{a8nText:"menu-bar-product-link",icon:n.default.createElement(f.default,null),title:c.default.t(1349),onClick:r}),n.default.createElement(p.MenuBarItem,{a8nText:"menu-bar-menu",icon:n.default.createElement(g.default,{name:"menu"}),title:c.default.t(1112)},n.default.createElement(s.default,{type:"dropdown_menu",flipOnRTL:!0,key:"ProductDetailHeader",dirX:"LEFT"},n.default.createElement(d.default,{a8n:"mi-send menu-item",action:t},c.default.t(1491)),(0,u.canSeeECommerceComplianceIndia)(e)&&n.default.createElement(d.default,{a8n:"mi-send menu-item",action:()=>{}},c.default.t(1344)),n.default.createElement(d.default,{a8n:"mi-report menu-item",action:a},c.default.t(1400)))))}}t.default=C,C.contextType=i.default,C.displayName="DetailDrawerMenu"},66187:(e,t,a)=>{"use strict";var r=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.parseErrorState=function(e,t){if(e instanceof n.Unmount);else if(e instanceof l.ServerStatusCodeError)"not_found"===e.status||404===e.status?t("NOT_FOUND"):(t("ERROR"),__LOG__(3)`parseErrorState:Failed to fetch from server`);else{if(!(e instanceof l.WebdDrop))throw t("ERROR"),e;t("ERROR"),__LOG__(3)`parseErrorState:Failed to fetch due to WebdDrop`}};var l=a(54438),n=r(a(12536))},41951:(e,t,a)=>{"use strict";var r=a(20862),l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({fetchState:e}){switch(e){case"NONE":case"SUCCESS":return null;case"PENDING":return o.default.createElement("div",{className:(0,n.default)(s.default.loadingContainer)},o.default.createElement(d.default,{size:14,color:d.colorOptions.highlight}),o.default.createElement(u.TextSpan,{className:(0,n.default)(s.default.text,s.default.loadingText),theme:"small"},i.default.t(1371)));case"NOT_FOUND":case"ERROR":return o.default.createElement("div",{className:(0,n.default)(s.default.loadingContainer)},o.default.createElement(u.TextSpan,{className:s.default.text,theme:"small",color:"danger"},"NOT_FOUND"===e?i.default.t(1357):i.default.t(1341)));default:throw new Error(`invalid fetchState ${e}`)}};var n=l(a(94184)),o=l(a(67294)),i=l(a(80162)),s=l(a(35769)),d=r(a(69507)),u=a(38245)},86311:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return n.default.createElement(i.default,{name:"link",className:(0,l.default)(o.default.linkIcon,{[o.default.inheritColor]:"inherit-color"===e.theme})})};var l=r(a(94184)),n=r(a(67294)),o=r(a(52160)),i=r(a(32885))},84345:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({id:e,href:t,onClick:a,noHandle:r}){return l.default.createElement("span",{className:n.default.linkContainer},l.default.createElement(o.SelectableLink,{id:e,href:t,className:n.default.activeLink,selectable:!0,onClick:a,"data-nohandle":r},t))};var l=r(a(67294)),n=r(a(78097)),o=a(69519)},60662:(e,t,a)=>{"use strict";var r=a(20862),l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleProductDelete=function(e,t,a){return(0,f.logDeleteProductClick)(t,1,a),new Promise(((r,l)=>{s.default.openModal(i.default.createElement(d.default,{title:c.default.t(477),okText:c.default.t(1941),cancelText:c.default.t(1768),onOK:()=>{s.default.closeModal(),function(e,t,a){return(0,p.deleteProducts)([t.id.toString()]).then((()=>((0,f.logDeleteProductSuccess)(t,1,a),e.productCollection.evictImagesFromCache(t.id.toString()),e.productCollection.remove(t.id.toString()),e.collections.forEach((e=>e.productCollection.remove(t.id.toString()))),!0))).catch((0,o.filteredCatch)(u.ServerStatusCodeError,(e=>((0,f.logDeleteProductFailed)(t,1,a,e.statusCode),s.default.openToast(i.default.createElement(C.default,{msg:c.default.t(478),id:(0,C.genId)("catalog_delete_product_failed")})),!1))))}(e,t,a).then((e=>r(e))).catch((e=>l(e)))},onCancel:()=>{s.default.closeModal(),r(!1)}},i.default.createElement("div",null,c.default.t(476))))}))},t.handleProductVisibilityChange=function(e,t,a){var r=t.id.toString(),l=!t.isHidden;l?(0,f.logCatalogProductHideClick)(r,a):(0,f.logCatalogProductShowClick)(r,a);return new Promise(((n,o)=>{var u=t.isHidden?c.default.t(497):c.default.t(488);s.default.openModal(i.default.createElement(d.default,{okText:c.default.t(1941),cancelText:c.default.t(1768),onOK:()=>{s.default.closeModal(),function(){return v.apply(this,arguments)}(e,t).then((()=>{l?(0,f.logCatalogProductHideSuccess)(r,a):(0,f.logCatalogProductShowSuccess)(r,a),n(!0)})).catch((e=>{l?(0,f.logCatalogProductHideFailed)(r,a):(0,f.logCatalogProductShowFailed)(r,a),o(e)}))},onCancel:()=>{s.default.closeModal(),l?(0,f.logCatalogProductHideCancelled)(r,a):(0,f.logCatalogProductShowCancelled)(r,a),n(!1)}},i.default.createElement("div",null,u)))}))},t.handleCollectionDelete=function(e,t,a){return new Promise(((r,l)=>{s.default.openModal(i.default.createElement(d.default,{title:c.default.t(464),okText:c.default.t(1941),cancelText:c.default.t(1768),onOK:()=>{s.default.closeModal(),function(e,t,a){return(0,_.deleteCollection)(t.id.toString(),a.session.sessionId.toString()).then((()=>(e.collections.remove(t.id.toString()),(0,h.logCollectionDeleted)({catalogContext:a,collectionId:t.id}),!0))).catch((0,o.filteredCatch)(u.ServerStatusCodeError,(()=>(s.default.openToast(i.default.createElement(C.default,{msg:c.default.t(461),id:(0,C.genId)("catalog_delete_product_failed")})),!1))))}(e,t,a).then((e=>r(e))).catch((e=>l(e)))},onCancel:()=>{s.default.closeModal(),r(!1)}},i.default.createElement("div",null,c.default.t(462))))}))},t.handleCollectionSave=function(e,t,a,r,l,n){return(t?(0,_.editCollection)(t.id.toString()||"",a===t.name?void 0:a,!1,r.map((e=>e.id.toString())),l.map((e=>e.id.toString())),n.session.toString()).then((n=>(t.name=a,t.reviewStatus=n.reviewStatus,e.collections.replaceId(t.id,n.id),0===r.length&&0===l.length||(t.productCollection.reset(),t.afterCursor=void 0,e.collections.reset(),e.collections.afterCursor=""),!0))):(0,_.createCollection)(a,r.map((e=>e.id.toString())),n.session.toString()).then((t=>{(0,h.logCollectionCreated)({catalogContext:n,collectionId:t.id,productCount:r.length});var l=new g.default;return l.id=t.id,l.reviewStatus=t.reviewStatus,l.isHidden=!1,l.name=a,l.totalItemsCount=r.length,e.collections.add(l),!0}))).catch((e=>{var t=c.default.t(475);return"not-acceptable"===e.text&&("products"===e.fieldName&&"duplicate"===e.fieldReason&&(t=c.default.t(473)),"collection"===e.fieldName&&"empty"===e.fieldReason&&(t=c.default.t(474))),s.default.openToast(i.default.createElement(C.default,{msg:t,id:(0,C.genId)("catalog_save_collection_failed")})),!1}))};var n=l(a(48926)),o=a(24788),i=l(a(67294)),s=l(a(33766)),d=l(a(51115)),u=a(54438),c=l(a(80162)),f=a(4566),h=a(22708),p=a(11183),m=a(53629),g=l(a(26297)),_=a(20650),C=r(a(48847));function v(){return(v=(0,n.default)((function*(e,t){yield(0,m.productVisibilitySet)([{productId:t.id.toString(),isHidden:!t.isHidden}]),t.isHidden=!t.isHidden,[e.productCollection,...(e.collections||[]).map((e=>e.productCollection))].forEach((e=>{var a=e.get(t.id);a&&(a.isHidden=t.isHidden)}))}))).apply(this,arguments)}},16895:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{onClick:t}=e,a=(0,l.default)(o.default.addItemButton,{[o.default.themeDefault]:"default"===e.theme,[o.default.themeInList]:"in-list"===e.theme,[o.default.themeCollections]:"collections"===e.theme});return n.default.createElement(i.default,{theme:"add-item",image:n.default.createElement("div",{className:o.default.addIcon}),customImage:!0,primary:e.title||s.default.t(455),className:a,onClick:t,idle:e.idle,a8n:"add-item"})};var l=r(a(94184)),n=r(a(67294)),o=r(a(26886)),i=r(a(74724)),s=r(a(80162))},26851:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{collection:t,onEditCollection:a}=e,r=l.default.createElement("div",{className:s.default.iconContainerRejected},l.default.createElement(g.default,{name:"info"})),_=()=>{a&&a(t)},C=()=>{i.default.openModal(l.default.createElement(n.default,{collection:t}))};switch(t.reviewStatus){case m.PRODUCT_REVIEW_STATUS.PENDING:return l.default.createElement("div",{className:s.default.pendingBanner},h.default.t(566),l.default.createElement("div",{className:s.default.iconContainerPending},l.default.createElement(g.default,{name:"info"})));case m.PRODUCT_REVIEW_STATUS.REJECTED:return(0,f.canAppealCollections)()?(()=>{var e=t.commerceUrl||u.default.WA_COMMERCE_POLICY_URL,a=(t.rejectReason||"other_violation").toLowerCase(),n=(0,d.default)(a),i=l.default.createElement(o.default,{href:e,onClick:t=>{t.preventDefault(),(0,c.openExternalLink)(e)}},n),f=l.default.createElement(o.default,{onClick:_},h.default.t(595));if(t.canAppeal){var m=l.default.createElement(p.default,{id:568,params:{policy_link:i}}),g=l.default.createElement(o.default,{onClick:C},h.default.t(596)),v=l.default.createElement(p.default,{id:569,params:{rename_collection_link:f,request_another_review_link:g}});return l.default.createElement("div",{className:s.default.rejectedBannerWithAppeal},m,l.default.createElement("br",null),v,r)}var E=l.default.createElement(p.default,{id:597,params:{policy_link:i}}),S=l.default.createElement(p.default,{id:598,params:{rename_collection_link:f}});return l.default.createElement("div",{className:s.default.rejectedBannerWithAppeal},E,l.default.createElement("br",null),S,r)})():l.default.createElement("div",{className:s.default.rejectedBanner},h.default.t(570),l.default.createElement(o.default,{onClick:_},h.default.t(571)),r);default:return null}};var l=r(a(67294)),n=r(a(62062)),o=r(a(72853)),i=r(a(33766)),s=r(a(7105)),d=r(a(12578)),u=r(a(75444)),c=a(1886),f=a(34605),h=r(a(80162)),p=r(a(41849)),m=a(45437),g=r(a(32885))},46983:(e,t,a)=>{"use strict";var r=a(95318),l=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a(67294)),o=a(60662),i=r(a(33766)),s=r(a(75444)),d=r(a(49589)),u=r(a(3128)),c=r(a(9444)),f=a(4566),h=a(38335),p=r(a(72143)),m=r(a(72765)),g=a(6578);class _ extends n.Component{constructor(...e){super(...e),this.state={openedProductId:void 0},this.handleProductDetail=(e,t)=>{var{onProductDetail:a}=this.props;return(0,f.logCatalogListDetailClick)({product:(0,g.unproxy)(e),catalogContext:t}),this.setState({openedProductId:e.id.toString()}),a(e)},this.handleProductShare=e=>{var{onProductShare:t}=this.props;t&&t(e)},this.handleProductDelete=(e,t)=>{var{catalog:a}=this.props;(0,o.handleProductDelete)(a,e,t).then((()=>{e.id===this.state.openedProductId&&(i.default.closeDrawerMid(),this.setState({openedProductId:void 0}))}))},this.handleProductHideShow=(e,t)=>{var{catalog:a}=this.props;(0,o.handleProductVisibilityChange)(a,e,t)},this.renderItem=e=>{var{product:t}=e,{onCartOpen:a,shareLinks:r}=this.props;return n.default.createElement(d.default.Consumer,null,(e=>{var l=(0,h.getProductCatalogContext)(e);return n.default.createElement(p.default,{product:t,onCartOpen:a,onClick:()=>this.handleProductDetail(t,l),onProductShare:r?this.handleProductShare:null,onProductDelete:e=>this.handleProductDelete(e,l),onProductHideShow:e=>this.handleProductHideShow(e,l),canManageCatalog:this.props.canManageCatalog})}))}}getData(){var{catalog:e,onCartOpen:t}=this.props,a=void 0!==t;return e.productCollection.getProductModels(this.props.canManageCatalog).map((e=>({itemKey:`${e.id.toString()}_${a.toString()}`,product:e})))}render(){var{catalog:e}=this.props;return e.productCollection&&e.productCollection.getProductModels(this.props.canManageCatalog).length?n.default.createElement(c.default,{flatListControllers:[this.props.flatListController]},n.default.createElement(u.default,{flatListController:this.props.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:this.getData(),renderItem:this.renderItem,defaultItemHeight:s.default.PRODUCT_LIST_ITEM_HEIGHT})):null}}_.CONCERNS={catalog:["productCollection","afterCursor","id","index"]},_.displayName="ProductCatalogList";var C=(0,m.default)(_,_.CONCERNS);t.default=C},15146:(e,t,a)=>{"use strict";var r=a(20862),l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CatalogViewDrawer=void 0;var n=l(a(48926)),o=l(a(23493)),i=l(a(23279)),s=r(a(67294)),d=a(2860),u=l(a(16895)),c=l(a(10905)),f=l(a(89581)),h=l(a(75204)),p=l(a(93226)),m=l(a(17465)),g=a(20766),_=l(a(23628)),C=l(a(94172)),v=l(a(75444)),E=l(a(64120)),S=l(a(39490)),P=r(a(55977)),T=a(66187),y=l(a(41951)),I=l(a(59432)),w=l(a(35128)),O=l(a(77188)),N=l(a(80162)),k=l(a(80896)),M=l(a(96639)),b=l(a(9014)),D=l(a(85726)),x=l(a(72765));class L extends s.Component{constructor(e){super(e),this._catalogFlatListController=new I.default,this._handleScroll=(e,t)=>{var a,r;this.props.setScrollOffset&&this.props.setScrollOffset(t.scrollTop),(null===(a=this.state.scrollHelper)||void 0===a?void 0:a.willLoadMore(t))&&this.setState({loadingMore:!0}),null===(r=this.state.scrollHelper)||void 0===r||r.onScroll(e,t).then((e=>{e&&this.setState({loadingMore:!1})})).catch((e=>{throw this.setState({loadingMore:!1}),e}))},this.handleScroll=(0,o.default)(this._handleScroll,100),this.onScroll=e=>{this.handleScroll(e,e.currentTarget)},this._handleCartChange=()=>{var e=this.state.cart.itemCount;this.state.cartCount!==e&&this.setState({cartCount:e})},this._handleCartClick=()=>{var{contact:e,onCartClick:t}=this.props;t&&t(e.id.toString())},this._handleCatalogLinkClick=()=>{var{catalog:e}=this.state,{onCatalogLinkClick:t,contact:a}=this.props;e&&t(e,a)};var t=c.default.findCart(this.props.contact.id.toString());this.state={cartEnabled:!1,catalog:null,cartCount:t.itemCount,catalogFetchState:"NONE",dataSource:null,scrollHelper:null,loadingMore:!0,cart:t}}componentDidMount(){var{catalogId:e,listeners:t}=this.props;this._setupCatalog(),(0,C.default)(e).then((e=>{this.setState({cartEnabled:e}),e&&t.add(this.state.cart,"all",this._handleCartChange)}))}_setupCatalog(){var{catalogId:e,rejectOnUnmount:t,canManageCatalog:a,scrollOffset:r}=this.props;h.default.find(e).checkpoint(t()).then((e=>{var t=new g.CatalogWithCollectionsDataSource(e,a||!1,v.default.PRODUCT_LIST_ITEM_HEIGHT),l=new g.CatalogListItemScrollHelper(t);this.setState({catalog:e,dataSource:t,scrollHelper:l,catalogFetchState:"SUCCESS"},(()=>{this.loadInitialItems(),this._watchProductCollection(),void 0!==r&&this._catalogFlatListController.setScrollFromStart(r)}))})).catch((e=>{(0,T.parseErrorState)(e,(e=>this.setState({catalogFetchState:e,loadingMore:!1})))}))}_watchProductCollection(){var{catalog:e}=this.state;this.props.autoUpdate&&null!=e&&(e.productCollection.on("add",(0,i.default)((()=>this.forceUpdate()),100)),e.productCollection.on("remove",(0,i.default)((()=>this.forceUpdate()),100)),e.collections.on("add",(0,i.default)((()=>this.forceUpdate()),100)),e.collections.on("remove",(0,i.default)((()=>this.forceUpdate()),100)))}_getDrawerContent(){var e,t,a,{catalog:r,cartEnabled:l,dataSource:n}=this.state,{contact:o,businessProfile:i,canManageCatalog:c,onAddProduct:h,onCartClick:p}=this.props,g=l&&p?this._handleCartClick:void 0;return c&&h&&(e=s.default.createElement(u.default,{onClick:()=>h(),theme:"collections"})),r&&n?(t=s.default.createElement(M.default,{onCartOpen:g,onProductDetail:this.props.onProductDetail,flatListController:this._catalogFlatListController,catalog:r,canManageCatalog:this.props.canManageCatalog,shareLinks:this.props.canManageCatalog,onProductShare:this.props.onProductShare,onCollectionSeeAll:this.props.onCollectionSeeAll,data:n.getData(),onEditCollection:this.props.onEditCollection}),O.default.supportsFeature(O.default.F.MD_BACKEND)&&c&&((0,d.getABPropConfigValue)("web_abprop_nux_cart_interstitial")&&l&&(0,f.default)(),a=s.default.createElement(m.default,{onOpenCollections:this.props.onOpenCollections}))):t=s.default.createElement(y.default,{fetchState:this.state.catalogFetchState}),s.default.createElement(s.default.Fragment,null,i&&s.default.createElement("div",{className:_.default.header},s.default.createElement(b.default,{profilePicThumb:o.getProfilePicThumb(),contact:o,businessProfile:i})),s.default.createElement("div",{className:_.default.list},a,e,t,this.state.loadingMore&&s.default.createElement(w.default,null)))}loadInitialItems(){var e=this;return(0,n.default)((function*(){var{dataSource:t}=e.state;yield null==t?void 0:t.loadInitialItems(),e.setState({loadingMore:!1})}))()}_renderDrawerMenu(){var e=this.state.cartEnabled?this._handleCartClick:void 0;return s.default.createElement(p.default,{onSendCatalog:this._handleCatalogLinkClick,onCartClick:e,cartCount:this.state.cart.itemCount,catalogId:this.props.catalogId.toString(),canManageCatalog:this.props.canManageCatalog,onOpenCollections:this.props.onOpenCollections,onOpenSettings:this.props.onOpenSettings})}render(){return s.default.createElement(E.default,{theme:"products",onDrop:this.props.onBack},s.default.createElement(P.default,{title:N.default.t(1342),type:this.props.headerType||P.DRAWER_HEADER_TYPE.SMALL,onBack:this.props.onBack,menu:this._renderDrawerMenu()}),s.default.createElement(S.default,{onScroll:this.onScroll,flatListControllers:[this._catalogFlatListController]},this._getDrawerContent()))}}t.CatalogViewDrawer=L,L.CONCERNS={contact:["id"]},L.displayName="CatalogViewDrawer";var A=(0,D.default)((0,k.default)((0,x.default)(L,L.CONCERNS)));t.default=A},32086:(e,t,a)=>{"use strict";var r=a(20862),l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CollectionContentDrawer=void 0;var n=l(a(48926)),o=l(a(23493)),i=r(a(67294)),s=l(a(16895)),d=l(a(10905)),u=l(a(75204)),c=l(a(93226)),f=a(20766),h=l(a(94172)),p=l(a(83669)),m=l(a(26851)),g=l(a(75444)),_=l(a(64120)),C=l(a(39490)),v=l(a(49589)),E=r(a(55977)),S=a(66187),P=l(a(41951)),T=l(a(59432)),y=l(a(35128)),I=l(a(80162)),w=l(a(80896)),O=a(22708),N=a(38335),k=l(a(96639)),M=l(a(85726)),b=l(a(72765));class D extends i.Component{constructor(e){super(e),this._collectionFlatListController=new T.default,this._handleCartChange=()=>{var e=this.state.cart.itemCount;this.state.cartCount!==e&&this.setState({cartCount:e})},this._handleCartClick=()=>{var{contact:e,onCartClick:t}=this.props;t&&t(e.id.toString())},this._handleCatalogLinkClick=()=>{var{catalog:e}=this.state;if(e){var{onCatalogLinkClick:t,contact:a}=this.props;t(e,a)}},this._handleScroll=(e,t)=>{var a,r;this.props.setScrollOffset&&this.props.setScrollOffset(t.scrollTop),(null===(a=this.state.scrollHelper)||void 0===a?void 0:a.willLoadMore(t))&&this.setState({loadingMore:!0}),null===(r=this.state.scrollHelper)||void 0===r||r.onScroll(e,t).then((e=>{e&&this.setState({loadingMore:!1})})).catch((e=>{throw this.setState({loadingMore:!1}),e}))},this.handleScroll=(0,o.default)(this._handleScroll,100),this.onScroll=e=>{this.handleScroll(e,e.currentTarget)};var t=d.default.findCart(this.props.contact.id.toString());this.state={cartEnabled:!1,catalog:null,cartCount:t.itemCount,catalogFetchState:"NONE",dataSource:null,scrollHelper:null,loadingMore:!0,cart:t}}componentDidMount(){var{catalogId:e,listeners:t}=this.props;this._setupCatalog(),(0,h.default)(e).then((e=>{this.setState({cartEnabled:e}),e&&t.add(this.state.cart,"all",this._handleCartChange)}))}_setupCatalog(){var{canManageCatalog:e,catalogId:t,rejectOnUnmount:a,scrollOffset:r}=this.props;u.default.find(t).then((t=>{var a;this.setState({catalog:t,catalogFetchState:"SUCCESS"});var l=new f.SingleCollectionDataSource(t,null===(a=this.props.collection)||void 0===a?void 0:a.id.toString(),e||!1,g.default.PRODUCT_LIST_ITEM_HEIGHT),n=new f.CatalogListItemScrollHelper(l);this.setState({dataSource:l,scrollHelper:n},(()=>{this.loadInitialItems(),this._watchProductCollection(),void 0!==r&&this._collectionFlatListController.setScrollFromStart(r)}))})).checkpoint(a()).catch((e=>{(0,S.parseErrorState)(e,(e=>this.setState({catalogFetchState:e,loadingMore:!1})))}))}_watchProductCollection(){var{collection:e}=this.props,{catalog:t}=this.state;null!=e&&(e.productCollection.on("add",(()=>this.forceUpdate())),e.productCollection.on("remove",(()=>this.forceUpdate())),this.props.listeners.add(e,"change:reviewStatus canAppeal",(()=>this.forceUpdate()))),null!=t&&(t.productCollection.on("add",(()=>this.forceUpdate())),t.productCollection.on("remove",(()=>this.forceUpdate())),t.collections.on("add",(()=>this.forceUpdate())),t.collections.on("remove",(()=>this.forceUpdate())))}_getDrawerContent(){var e,{catalog:t,cartEnabled:a,dataSource:r,catalogFetchState:l,loadingMore:n}=this.state,{canManageCatalog:o,onCartClick:d,onProductDetail:u,onProductShare:c,collection:f}=this.props,h=a&&d?this._handleCartClick:void 0;if(!t||!r)return i.default.createElement(P.default,{fetchState:l});var g=r.getData();if(0===g.length&&!n&&o&&f)return i.default.createElement(i.default.Fragment,null,i.default.createElement("div",{className:p.default.list},i.default.createElement(s.default,{theme:"collections",onClick:()=>{this.props.onEditCollection&&this.props.onEditCollection(f)}}),i.default.createElement("div",{className:p.default.addItemsNotice},I.default.t(470))));var _=i.default.createElement(k.default,{onCartOpen:h,onProductDetail:u,flatListController:this._collectionFlatListController,catalog:t,canManageCatalog:o,shareLinks:o,onProductShare:c,collectionId:null===(e=this.props.collection)||void 0===e?void 0:e.id.toString(),data:g}),C=this.props.collection?i.default.createElement(m.default,{collection:this.props.collection,onEditCollection:this.props.onEditCollection}):void 0;return i.default.createElement(i.default.Fragment,null,i.default.createElement("div",{className:p.default.list},C,_,n&&i.default.createElement(y.default,null)))}loadInitialItems(){var e=this;return(0,n.default)((function*(){var{dataSource:t}=e.state;yield null==t?void 0:t.loadInitialItems(),e.setState({loadingMore:!1}),(0,O.logCollectionSeeAllView)({catalogOwnerJid:e.props.catalogId.toString(),catalogContext:(0,N.getProductCatalogContext)(e.context),collectionId:null==t?void 0:t.collectionId})}))()}_renderDrawerMenu(){var e=this.state.cartEnabled?this._handleCartClick:void 0;return i.default.createElement(c.default,{onSendCatalog:this._handleCatalogLinkClick,onCartClick:e,cartCount:this.state.cart.itemCount,catalogId:this.props.catalogId.toString(),canManageCatalog:this.props.canManageCatalog})}render(){var e,t=(null===(e=this.props.collection)||void 0===e?void 0:e.name)||I.default.t(562);return i.default.createElement(_.default,{theme:"products",onDrop:this.props.onBack},i.default.createElement(E.default,{title:t,type:this.props.headerType||E.DRAWER_HEADER_TYPE.SMALL,onBack:this.props.onBack,menu:this._renderDrawerMenu()}),i.default.createElement(C.default,{flatListControllers:[this._collectionFlatListController],onScroll:this.onScroll},this._getDrawerContent()))}}t.CollectionContentDrawer=D,D.contextType=v.default,D.CONCERNS={contact:["id"]},D.displayName="CollectionContentDrawer";var x=(0,M.default)((0,w.default)((0,b.default)(D,D.CONCERNS)));t.default=x},44718:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a,{collection:r,onSeeAll:f,allItems:h}=e;r?({name:t,id:a}=r):h&&(t=d.default.t(562));var p=l.default.createElement(c.TextDiv,{theme:"title"},l.default.createElement(s.default,{text:t,ellipsify:!0,titlify:!0}));function m(e){!function(e){e.preventDefault(),e.stopPropagation()}(e),f&&r?f(r):f&&f()}var g=void 0;if(r)switch(r.reviewStatus){case u.PRODUCT_REVIEW_STATUS.REJECTED:g=l.default.createElement("span",{className:i.default.reviewStateRejected},d.default.t(564))}return l.default.createElement(n.default,{key:a,primary:p,secondary:g,detail:l.default.createElement(o.default,{onClick:m},d.default.t(565)),theme:"collection-header",idle:!0,className:i.default.collectionListItem})};var l=r(a(67294)),n=r(a(74724)),o=r(a(72853)),i=r(a(74591)),s=r(a(20923)),d=r(a(80162)),u=a(45437),c=a(38245)},12578:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){switch(e){case"drugs":return l.default.t(579);case"weapons":return l.default.t(594);case"animals":return l.default.t(574);case"alcohol":return l.default.t(573);case"gambling":return l.default.t(580);case"tobacco":return l.default.t(592);case"overtly_sexualized_positioning":return l.default.t(587);case"adult":return l.default.t(572);case"supplements":return l.default.t(590);case"body_parts_fluids":return l.default.t(575);case"healthcare":return l.default.t(582);case"misleading":return l.default.t(585);case"real_fake_currency":return l.default.t(588);case"digital_services_products":return l.default.t(577);case"thrid_party_infringements":return l.default.t(591);case"unauthorized_media":return l.default.t(593);case"illegal_products":return l.default.t(584);case"hazardous_goods_and_materials":return l.default.t(581);case"stolen_goods":return l.default.t(589);case"human_exploitation_and_sexual_services":return l.default.t(583);case"community_standards":return l.default.t(576);case"discrimination":return l.default.t(578);default:return l.default.t(586)}};var l=r(a(80162))},22708:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.logCollectionSeeAllView=function({catalogOwnerJid:e,catalogContext:t,collectionId:a}){var r=(0,n.getProductStatsInFetched)(e,a),d=null==r?void 0:r.productIndex,u=null==r?void 0:r.collectionIndex;(0,s.createCatalogViewEvent)((0,l.default)({isOwner:(0,s.isCatalogOwner)({catalogOwnerJid:e}),catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_COLLECTION_IMPRESSION,catalogViewAction:o.default.CATALOG_VIEW_ACTION.ACTION_COLLECTION_IMPRESSION,productIndex:d,collectionIndex:u},(0,i.toDataForCatalogViewEvents)(t))).commit()},t.logCollectionItemsAssignment=function({catalogContext:e,collectionId:t,addedCount:a,removedCount:r}){a>0&&new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_COLLECTION_ASSIGN_ITEMS,catalogEntryPoint:e.entryPoint,catalogSessionId:e.session.toString(),productCount:a,collectionId:t}).commit();r>0&&new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_COLLECTION_UNASSIGN_ITEMS,catalogEntryPoint:e.entryPoint,catalogSessionId:e.session.toString(),productCount:r,collectionId:t}).commit()},t.logCollectionDeleted=function({catalogContext:e,collectionId:t}){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_COLLECTION_DELETED,catalogEntryPoint:e.entryPoint,catalogSessionId:e.session.toString(),collectionId:t}).commit()},t.logCollectionRenamed=function({catalogContext:e,collectionId:t}){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_COLLECTION_DELETED,catalogEntryPoint:e.entryPoint,catalogSessionId:e.session.toString(),collectionId:t}).commit()},t.logCollectionMenuClicked=function(e){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_MENU_COLLECTIONS_CLICK,catalogEntryPoint:e.entryPoint,catalogSessionId:e.session.toString()}).commit()},t.logCollectionCreated=function({catalogContext:e,collectionId:t,productCount:a}){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_COLLECTION_CREATED,catalogEntryPoint:e.entryPoint,catalogSessionId:e.session.toString(),productCount:a}).commit()},t.logCollectionCreateClicked=function(e){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_COLLECTION_CREATE_CLICKED,catalogEntryPoint:e.entryPoint,catalogSessionId:e.session.toString()}).commit()};var l=r(a(81109)),n=a(20766),o=r(a(72462)),i=a(38335),s=a(53121)},96639:(e,t,a)=>{"use strict";var r=a(95318),l=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a(67294)),o=a(60662),i=r(a(33766)),s=r(a(26851)),d=r(a(44718)),u=r(a(75444)),c=r(a(49589)),f=r(a(3128)),h=r(a(9444)),p=r(a(59432)),m=a(34605),g=r(a(80896)),_=a(4566),C=a(38335),v=r(a(72143)),E=a(45437),S=r(a(85726)),P=r(a(72765)),T=a(6578);class y extends n.Component{constructor(e){super(e),this.attachedListeners=new Set,this._catalogFlatListController=new p.default,this.handleProductDetail=(e,t)=>{var{onProductDetail:a}=this.props;return(0,_.logCatalogListDetailClick)({product:(0,T.unproxy)(e),catalogContext:(0,C.getProductCatalogContext)(this.context)}),this.setState({openedProductId:e.id.toString()}),a(e,t)},this.handleProductShare=e=>{var{onProductShare:t}=this.props;t&&t(e)},this.handleProductDelete=e=>{var{catalog:t}=this.props;(0,o.handleProductDelete)(t,e,(0,C.getProductCatalogContext)(this.context)).then((()=>{e.id===this.state.openedProductId&&(i.default.closeDrawerMid(),this.setState({openedProductId:void 0}))}))},this.handleProductHideShow=e=>{var{catalog:t}=this.props;(0,o.handleProductVisibilityChange)(t,e,(0,C.getProductCatalogContext)(this.context))},this.renderItem=e=>{var{collection:t,product:a,allItems:r,reviewBanner:l,collectionId:o}=e,{onCartOpen:i,shareLinks:u}=this.props;return t?l?n.default.createElement(s.default,{collection:t,onEditCollection:this.props.onEditCollection}):n.default.createElement(d.default,{collection:t,onSeeAll:this.props.onCollectionSeeAll}):r?n.default.createElement(d.default,{allItems:r,onSeeAll:this.props.onCollectionSeeAll}):a?n.default.createElement(v.default,{collectionId:o,product:a,onCartOpen:i,onClick:()=>this.handleProductDetail(a,o),onProductShare:u?this.handleProductShare:null,onProductDelete:this.handleProductDelete,onProductHideShow:this.handleProductHideShow,theme:"product-of-collection",canManageCatalog:this.props.canManageCatalog}):null},this.state={openedProductId:void 0,loadingMore:!1,stopLoading:!1,catalogFetchState:e.catalog?"SUCCESS":"NONE"}}getData(){var{onCartOpen:e}=this.props,t=void 0!==e,a=this.props.data||[],r=[];return a.forEach((e=>{var a=e.collection,l=e.product,n=e.allItems;if(a&&l){var o=a.id;r.push({itemKey:`${o.toString()}_${l.id.toString()}_${t.toString()}`,product:l,collectionId:o})}else if(a){if(this.attachedListeners.has(a.id)||(this.attachedListeners.add(a.id),this.props.listeners.add(a,"change:reviewStatus canAppeal",(()=>{this.forceUpdate()}))),r.push({itemKey:a.id.toString(),collection:a}),a.reviewStatus===E.PRODUCT_REVIEW_STATUS.PENDING||a.reviewStatus===E.PRODUCT_REVIEW_STATUS.REJECTED){var i=(0,m.canAppealCollections)()&&a.canAppeal?2*u.default.PRODUCT_LIST_ITEM_HEIGHT:u.default.PRODUCT_LIST_ITEM_HEIGHT;r.push({itemKey:`${a.id.toString()}_reviewBanner`,collection:a,height:i,reviewBanner:!0})}}else if(n)r.push({itemKey:"view_all",allItems:n});else if(l){var s=this.props.collectionId||void 0;r.push({itemKey:`${l.id.toString()}_${t.toString()}`,product:l,collectionId:s})}})),r}render(){var e=this.getData();return n.default.createElement(n.default.Fragment,null,n.default.createElement(h.default,{flatListControllers:[this._catalogFlatListController]},n.default.createElement(f.default,{flatListController:this._catalogFlatListController,direction:"vertical",forceConsistentRenderCount:!1,data:e,renderItem:this.renderItem,defaultItemHeight:u.default.PRODUCT_LIST_ITEM_HEIGHT})))}}y.CONCERNS={catalog:["productCollection","collections","afterCursor","id","index"]},y.contextType=c.default,y.displayName="ProductCollectionsList";var I=(0,S.default)((0,g.default)((0,P.default)(y,y.CONCERNS)));t.default=I},96697:(e,t,a)=>{"use strict";var r=a(20862),l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a(94184)),o=a(24788),i=r(a(67294)),s=l(a(81732)),d=a(95140),u=l(a(10905)),c=l(a(75204)),f=l(a(18824)),h=l(a(94172)),p=l(a(33766)),m=l(a(45144)),g=l(a(64120)),_=l(a(39490)),C=l(a(49589)),v=r(a(55977)),E=a(54438),S=r(a(12536)),P=l(a(80162)),T=l(a(80896)),y=a(4566),I=a(11183),w=a(38335),O=a(45437),N=l(a(35769)),k=l(a(24401)),M=l(a(31790)),b=a(21529),D=l(a(85726)),x=l(a(28540)),L=r(a(69507)),A=l(a(72765)),R=a(6578),F=a(38245);class B extends i.Component{constructor(e){super(e),this.handleCartClick=()=>{var{product:e,onCartClick:t}=this.props;t&&t(e.catalogWid.toString())},this._handleReportProduct=()=>{var{product:e}=this.props;p.default.openModal(i.default.createElement(x.default,{product:e,sessionId:(0,w.getProductCatalogSessionId)(this.context)}))},this.handleProductLinkClick=()=>{var{product:e}=this.props;this.props.onProductLinkClick(e)},this.handleSendChat=()=>{var{product:e}=this.props,t=c.default.get(e.catalogWid);(0,I.sendProductToChat)(e,t,(0,w.getProductCatalogContext)(this.context)),(0,y.logProductMessageBusinessClick)(e,(0,w.getProductCatalogContext)(this.context))},this._handleSendProduct=()=>{var{product:e}=this.props,{catalogWid:t}=e,a=c.default.get(t);if(a){var r=a.productCollection.get(e.id),l=r?(0,R.unproxy)(r):(0,R.unproxy)(e);p.default.attachProduct({product:l})}},this.handleBack=()=>{var{onBack:e}=this.props;if(e)return e()},this.handleProductCatalog=()=>{var{onProductCatalog:e,product:t}=this.props;e&&e(t.catalogWid,(0,w.getProductCatalogContext)(this.context))},this.handleProductDetail=e=>{var{onProductDetail:t}=this.props;if(t)return t(e)},this.isRejected=()=>{var{reviewStatus:e}=this.props.product;return e===O.PRODUCT_REVIEW_STATUS.REJECTED},this._isAvailable=()=>{var{productFetchState:e}=this.state;return"ERROR"!==e&&"NOT_FOUND"!==e&&!this.isRejected()};var t=e.product.fetchedFromServer?"SUCCESS":"PENDING",a=null,r="NONE";e.refreshCarousel&&((a=c.default.get(e.product.catalogWid))&&a.productCollection&&a.fetchedFromServer?r="SUCCESS":(a=null,r="PENDING"));var l=u.default.findCart(this.props.product.catalogWid.toString());this.state={businessProfile:null,cartEnabled:!1,productCatalog:a,productFetchState:t,productCatalogFetchState:r,cart:l}}componentDidMount(){var{product:e,listeners:t,collectionId:a}=this.props,r=this.state.cart,l=e.catalogWid,n=e.id.toString();l&&n&&(this._fetchData(),t.add(r,"change:cartItemCollection",(()=>{this.forceUpdate()})),(0,h.default)(l).then((e=>{this.setState({cartEnabled:e})})),(0,y.logProductDetailView)({product:(0,R.unproxy)(e),catalogContext:(0,w.getProductCatalogContext)(this.context),cartToggle:this.state.cartEnabled,collectionId:a}))}_fetchData(){var{product:e,rejectOnUnmount:t}=this.props,a=e.catalogWid,r=e.id.toString(),l=c.default.findProduct({catalogWid:a,productId:r,productMsgMediaData:(0,R.unproxy)(e).productMsgMediaData}),n=s.default.find(a);return Promise.all([n,l]).checkpoint(t()).then((([e])=>(this.setState({productFetchState:"SUCCESS",businessProfile:e}),e))).then((e=>{(0,d.hasCatalog)(e)&&"PENDING"===this.state.productCatalogFetchState&&this._fetchProductCatalog()})).catch((0,o.filteredCatch)(E.ServerStatusCodeError,(()=>{this.setState({productFetchState:"ERROR"}),__LOG__(3)`Failed to fetch product from server`}))).catch((0,o.filteredCatch)(S.Unmount,(()=>{}))).catch((0,o.filteredCatch)(E.E404,(()=>{this.setState({productFetchState:"NOT_FOUND"})}))).catch((0,o.filteredCatch)(E.WebdDrop,(()=>{this.setState({productFetchState:"ERROR"}),__LOG__(3)`Failed to fetch product`})))}_fetchProductCatalog(){var{product:e,rejectOnUnmount:t}=this.props,a=e.catalogWid;c.default.findCarouselCatalog(a).checkpoint(t()).then((e=>{var t=Array.isArray(e)?e[0]:e;this.setState({productCatalog:t||null,productCatalogFetchState:t?"SUCCESS":"NONE"})})).catch((0,o.filteredCatch)(E.ServerStatusCodeError,(e=>{"not_found"===e.status||404===e.status?this.setState({productCatalog:null,productCatalogFetchState:"NOT_FOUND"}):(this.setState({productCatalog:null,productCatalogFetchState:"ERROR"}),__LOG__(3)`Failed to fetch product catalog from server`)}))).catch((0,o.filteredCatch)(S.Unmount,(()=>{}))).catch((0,o.filteredCatch)(E.WebdDrop,(()=>{this.setState({productCatalog:null,productCatalogFetchState:"ERROR"}),__LOG__(3)`Failed to fetch product catalog`})))}componentWillUnmount(){var{product:e}=this.props,t=e.catalogWid,a=e.id.toString();if(t&&a){var r=c.default.get(t),l=r&&r.msgProductCollection.get(a);l&&l.fetchedFromServer&&r&&r.msgProductCollection.remove(l)}}_renderTopBar(){var e,{productFetchState:t,productCatalogFetchState:a}=this.state,r=this._isAvailable();e="ERROR"===t?i.default.createElement(F.TextSpan,{className:N.default.text,theme:"small",color:"danger"},P.default.t(1341)):r?[i.default.createElement(L.default,{size:14,color:L.colorOptions.highlight,key:"DetailDrawer-loadingBar-spinner"}),i.default.createElement(F.TextSpan,{className:(0,n.default)(N.default.text,N.default.loadingText),theme:"small",key:"DetailDrawer-loadingBar-msg"},P.default.t(1371))]:i.default.createElement(F.TextSpan,{className:N.default.text,theme:"small",color:"danger"},P.default.t(1357));var l="PENDING"===t||"PENDING"===a||!r;return i.default.createElement("div",{className:(0,n.default)({[N.default.loadingContainer]:l,[N.default.shiftUp]:!l})},e)}_renderDrawerMenu(){var e;if(!this._isAvailable())return null;var t=this.state.cartEnabled?this.handleCartClick:void 0;return i.default.createElement(m.default,{onSendProduct:this._handleSendProduct,onReportProduct:this._handleReportProduct,onProductLinkClick:this.handleProductLinkClick,onCartClick:t,cartCount:this.state.cart.itemCount,catalogId:this.props.product.catalogWid.toString(),contactId:null===(e=this.props.chat)||void 0===e?void 0:e.contact.id.user})}_renderDrawerHeader(){return i.default.createElement(v.default,{a8n:"drawer-title-profile",title:P.default.t(1347),onBack:this.handleBack,type:v.DRAWER_HEADER_TYPE.SMALL,menu:this._renderDrawerMenu()})}render(){var{product:e,collectionId:t}=this.props,{productCatalog:a,productFetchState:r}=this.state,l=this._isAvailable(),n=(0,d.hasCatalog)(this.state.businessProfile);return i.default.createElement(g.default,{onDrop:this.handleBack,theme:"striped",key:"product-details-drawer"},this._renderDrawerHeader(),i.default.createElement(_.default,null,i.default.createElement("div",{className:N.default.body},this._renderTopBar(),i.default.createElement(M.default,{product:e,isAvailable:l,fetching:"PENDING"===r}),e.availability===b.ProductAvailability.OUT_OF_STOCK?i.default.createElement("div",{className:N.default.availabilityBanner},P.default.t(1346)):null,i.default.createElement(k.default,{product:e,collectionId:t,onSendChat:this.handleSendChat,isAvailable:l}),n&&a?i.default.createElement(f.default,{catalog:a,onProductCatalog:this.handleProductCatalog,onProductDetail:this.handleProductDetail,filterProductId:e.id.toString(),title:P.default.t(1338),animation:!1}):null)))}}B.CONCERNS={product:["id","catalogWid","productImageCollection","fetchedFromServer","name","availability","reviewStatus"]},B.contextType=C.default,B.displayName="ProductDetails";var U=(0,D.default)((0,T.default)((0,A.default)(B,B.CONCERNS)));t.default=U},24401:(e,t,a)=>{"use strict";var r=a(20862),l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a(94184)),o=r(a(67294)),i=l(a(40118)),s=l(a(70950)),d=l(a(62685)),u=l(a(94172)),c=l(a(75444)),f=l(a(49589)),h=l(a(68698)),p=l(a(20923)),m=a(1886),g=a(99375),_=l(a(80162)),C=r(a(66802)),v=a(4566),E=a(38335),S=a(45437),P=l(a(57142)),T=l(a(96437)),y=a(21529),I=l(a(72765)),w=a(6578),O=a(38245);class N extends o.Component{constructor(e){super(e),this.handleAddToCart=e=>{var{product:t,collectionId:a}=this.props;(0,i.default)(t,(0,E.getProductCatalogContext)(this.context),a),e.stopPropagation()},this.handleReadMore=()=>{this.setState({isDescExpanded:!0})},this._handleClickUrl=(e,t)=>{e.stopPropagation();var{product:a}=this.props;(0,v.logDetailLinkClick)({product:(0,w.unproxy)(a),catalogContext:(0,E.getProductCatalogContext)(this.context)});var r=t&&C.findLink(t);r&&(0,m.openExternalLink)(r.url)},this.state={isDescExpanded:!1,cartEnabled:!1}}componentDidMount(){(0,u.default)(this.props.product.catalogWid).then((e=>{this.setState({cartEnabled:e})}))}_renderMessageBusinessButton(){var{onSendChat:e,product:t,isAvailable:a}=this.props;if(!e||!t.fetchedFromServer||!a||t.reviewStatus!==S.PRODUCT_REVIEW_STATUS.APPROVED)return null;var r=_.default.t(1352);return o.default.createElement("div",{className:P.default.buttonContainer,title:r},o.default.createElement(d.default,{className:P.default.button,onClick:e,type:"secondary"},r))}_renderAddToCartButton(){var{product:e,isAvailable:t}=this.props;if(!this.state.cartEnabled||!e.fetchedFromServer||!t||e.reviewStatus!==S.PRODUCT_REVIEW_STATUS.APPROVED)return null;var a=_.default.t(1335),r=e.availability===y.ProductAvailability.OUT_OF_STOCK;return o.default.createElement("div",{className:P.default.buttonContainer,title:a},o.default.createElement(d.default,{className:(0,n.default)(P.default.button,P.default.addToCartButton),onClick:this.handleAddToCart,type:"secondary",disabled:r},o.default.createElement("span",{className:P.default.addToCartContainer},o.default.createElement(s.default,{className:(0,n.default)(P.default.addToCartIcon,{[P.default.addToCartIconDisabled]:r})}),a)))}_renderLink(e){var{product:t,isAvailable:a}=this.props;if(!t.fetchedFromServer||!e||!a)return null;var r=g.Configuration.TrustedGroupDesc({links:C.findLinks(e)});return o.default.createElement("div",{className:P.default.descBlock},o.default.createElement(p.default,{selectable:!0,formatters:r,text:e,onClick:t=>this._handleClickUrl(t,e)}))}_renderDesc(){var{product:e}=this.props,{isDescExpanded:t}=this.state;if(!e.description&&!e.url&&!e.retailerId)return null;var a,r=!(!e||!e.description)&&e.description.length>c.default.GROUP_DESCRIPTION_INFO_PANEL_TRUNC_LENGTH;return e.description&&(a=o.default.createElement("div",{className:P.default.descBlock},o.default.createElement(p.default,{selectable:!0,multiline:!0,text:e.description,textLimit:t?1/0:c.default.GROUP_DESCRIPTION_INFO_PANEL_TRUNC_LENGTH}),r&&!t?o.default.createElement("span",{className:P.default.more,role:"button",onClick:this.handleReadMore},` ${_.default.t(1380)}`):null)),o.default.createElement(O.TextDiv,{theme:"plain",className:P.default.description},a,this._renderLink(e.url),e.retailerId?o.default.createElement("div",{className:P.default.descBlock},o.default.createElement(p.default,{text:e.retailerId,selectable:!0,direction:"inherit"})):null)}render(){var{product:e}=this.props;return o.default.createElement(h.default,{theme:"padding-product",animation:!1},o.default.createElement(O.TextDiv,{theme:"title",className:P.default.name},o.default.createElement(p.default,{text:e.name,selectable:!0})),null!=e.priceAmount1000?o.default.createElement(O.TextDiv,{className:P.default.price,color:"dark",theme:"plain"},o.default.createElement(T.default,{product:e,selectable:!0,direction:"inherit"})):null,this._renderDesc(),this._renderMessageBusinessButton(),this._renderAddToCartButton())}}N.contextType=f.default,N.CONCERNS={product:["name","url","description","availability","currency","priceAmount1000","salePriceAmount1000","salePriceStartDate","salePriceEndDate","fetchedFromServer","retailerId","catalogWid","productImageCollection","imageHash","reviewStatus","imageCdnUrl","id"]},N.displayName="ProductDetailsInfo";var k=(0,I.default)(N,N.CONCERNS);t.default=k},33590:(e,t,a)=>{"use strict";var r=a(20862),l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ProductDetailsForDeepLink=void 0;var n=l(a(63337)),o=r(a(67294)),i=l(a(75204)),s=l(a(64120)),d=l(a(39490)),u=r(a(55977)),c=a(66187),f=l(a(41951)),h=l(a(64751)),p=l(a(80162)),m=l(a(96697)),g=l(a(85726)),_=a(52152);class C extends o.PureComponent{constructor(e){super(e),this.state={product:null,productFetchState:"NONE"};var{productId:t,businessOwnerJid:a}=this.props.productInfo,r=(0,h.default)({productId:t,businessOwnerJid:a});this.state=r?{product:r,productFetchState:"NONE"}:{product:r,productFetchState:"PENDING"}}componentDidMount(){this.state.product||this._fetchProduct()}_fetchProduct(){var{productId:e,businessOwnerJid:t}=this.props.productInfo,a=(0,_.createWid)(t);i.default.findProduct({catalogWid:a,productId:e}).checkpoint(this.props.rejectOnUnmount()).then((()=>{var t=i.default.get(a),r=(0,n.default)(t,"catalog").productCollection.get(e);this.setState({product:r,productFetchState:"SUCCESS"})})).catch((e=>{(0,c.parseErrorState)(e,(e=>this.setState({productFetchState:e})))}))}render(){return this.state.product?o.default.createElement(m.default,{product:this.state.product,onEnd:this.props.onEnd,onBack:this.props.onBack,onProductDetail:this.props.onProductDetail,onProductCatalog:this.props.onProductCatalog,refreshCarousel:!0,onProductLinkClick:this.props.onProductLinkClick,onCartClick:this.props.onCartClick}):o.default.createElement(s.default,{onDrop:this.props.onBack,key:"product-details-drawer"},o.default.createElement(u.default,{a8n:"drawer-title-profile",title:p.default.t(1347),onBack:this.props.onBack,type:u.DRAWER_HEADER_TYPE.SMALL}),o.default.createElement(d.default,null,o.default.createElement(f.default,{fetchState:this.state.productFetchState})))}}t.ProductDetailsForDeepLink=C,C.displayName="ProductDetailsForDeepLink";var v=(0,g.default)(C);t.default=v},48748:(e,t,a)=>{"use strict";var r=a(20862),l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a(94184)),o=r(a(67294)),i=l(a(74724)),s=l(a(33766)),d=l(a(95653)),u=l(a(64120)),c=l(a(39490)),f=l(a(49589)),h=r(a(55977)),p=l(a(20923)),m=l(a(80162)),g=l(a(84345)),_=a(4566),C=a(38335),v=l(a(65374)),E=r(a(34991)),S=l(a(22347)),P=l(a(9300)),T=l(a(53458)),y=a(92758),I=a(6578),w="product-link-anchor";function O(e){var t=e.productImageCollection.head();return t?o.default.createElement(E.default,{className:(0,n.default)(v.default.productImage,v.default.productImageContainer),mediaData:t.mediaData}):o.default.createElement(E.ProductThumbPlaceholder,{className:(0,n.default)(v.default.productThumb,v.default.productThumbContainer)})}class N extends o.Component{constructor(...e){super(...e),this._handleProductLinkClick=e=>{e.preventDefault(),this._handleSendProductLinkClick()},this._handleSendProductLinkClick=()=>{var{product:e,onSend:t}=this.props;s.default.openModal(o.default.createElement(T.default,{product:e,onSend:t}),{transition:"modal-flow"}),(0,_.logShareProductViaWALinkClick)({product:e,catalogContext:(0,C.getProductCatalogContext)(this.context)})},this._handleCopyLinkClick=()=>{var{product:e}=this.props;(0,_.logShareProductCopyLinkClick)({product:e,catalogContext:(0,C.getProductCatalogContext)(this.context)})},this._handleSendProduct=()=>{var{product:e,onSend:t}=this.props;s.default.attachProduct({product:(0,I.unproxy)(e),onSend:t})}}render(){var e,t,a,{onBack:r,onCancel:l,product:n,prompt:s,centerDrawer:f,sendProductMsg:_}=this.props,C=(0,y.createProductLink)(n.catalogWid.user,n.id.toString());return f&&(e="labels",t="center-column"),a=null!=_?o.default.createElement(P.default,{onClick:this._handleSendProduct}):o.default.createElement(S.default,{onClick:this._handleSendProductLinkClick}),o.default.createElement(u.default,{key:"product-link-drawer",theme:e},o.default.createElement(h.default,{a8n:"product-link-title",title:m.default.t(1349),onBack:r,onCancel:l,type:h.DRAWER_HEADER_TYPE.SMALL}),o.default.createElement(c.default,{theme:t},o.default.createElement("div",{className:v.default.prompt},s),o.default.createElement(i.default,{image:O(n),primary:o.default.createElement(p.default,{text:n.name,direction:"auto"}),theme:"identity",secondary:o.default.createElement(g.default,{id:w,href:C,onClick:this._handleProductLinkClick,noHandle:!0})}),a,o.default.createElement(d.default,{elementId:w,onClick:this._handleCopyLinkClick})))}}t.default=N,N.contextType=f.default,N.displayName="ProductLinkDrawer"},53599:(e,t,a)=>{"use strict";var r=a(20862),l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ProductListDrawer=void 0;var n=l(a(23493)),o=l(a(23279)),i=a(24788),s=r(a(67294)),d=a(2860),u=l(a(16895)),c=l(a(10905)),f=l(a(76429)),h=l(a(89581)),p=l(a(75204)),m=l(a(94172)),g=l(a(75444)),_=l(a(64120)),C=l(a(39490)),v=l(a(49589)),E=r(a(55977)),S=l(a(44373)),P=l(a(7970)),T=a(54438),y=r(a(12536)),I=a(66187),w=l(a(41951)),O=l(a(59432)),N=l(a(35128)),k=l(a(77188)),M=a(34605),b=l(a(80162)),D=l(a(86311)),x=l(a(80896)),L=a(4566),A=a(37463),R=a(97713),F=a(38335),B=l(a(46983)),U=l(a(81618)),V=l(a(9014)),j=l(a(85726)),H=l(a(72765)),W=l(a(32885)),G=a(56670);class K extends s.Component{constructor(e){super(e),this._catalogFlatListController=new O.default,this._handleScroll=e=>{this.state.loadingMore||e.scrollTop+g.default.SCROLL_FUDGE>e.scrollHeight-e.clientHeight&&this._loadMoreProduct()},this.handleScroll=(0,n.default)(this._handleScroll,100),this._loadMoreProduct=()=>{var{catalogId:e}=this.props,{stopLoading:t,loadedProducts:a}=this.state;if(!t){var r=p.default.assertGet(e);if(r.afterCursor){var l=r.productCollection.getProductModels().length;this.setState({loadingMore:!0,loadedProducts:l}),p.default.update(e).checkpoint(this.props.rejectOnUnmount()).then((e=>{this.setState({loadingMore:!1}),(Array.isArray(e)?e[0]:e).productCollection.getProductModels().length===a&&this.setState({stopLoading:!0}),l*g.default.PRODUCT_LIST_ITEM_HEIGHT<window.innerHeight&&this._loadMoreProduct()})).catch((0,i.filteredCatch)(y.Unmount,(()=>{}))).catch((()=>{this.setState({loadingMore:!1,stopLoading:!0})}))}}},this.onScroll=e=>{this.handleScroll(e.currentTarget),this.props.setScrollOffset&&this.props.setScrollOffset(e.currentTarget.scrollTop)},this._handleCartChange=()=>{var e=this.state.cart.itemCount;this.state.cartCount!==e&&this.setState({cartCount:e})},this._handleCartClick=()=>{var{contact:e,onCartClick:t}=this.props;t&&t(e.id.toString())},this._handleCatalogLinkClick=()=>{var{catalog:e}=this.state;if(e){var{onCatalogLinkClick:t,contact:a,catalogId:r}=this.props;t(e,a),(0,L.logCatalogShareLinkClick)({catalogOwnerWid:r,catalogContext:(0,F.getProductCatalogContext)(this.context)})}};var t=p.default.get(this.props.catalogId),a=!t||t.stale?null:t,r=c.default.findCart(this.props.contact.id.toString());this.state={loadingMore:!1,loadedProducts:0,stopLoading:!1,cartEnabled:!1,catalog:a,cart:r,cartCount:r.itemCount,catalogFetchState:a?"SUCCESS":"NONE"}}componentDidMount(){var{catalogId:e,listeners:t,canManageCatalog:a}=this.props;t.add(this.state.cart,"all",this._handleCartChange),(0,L.logCatalogListView)({catalogOwnerWid:e,catalogContext:(0,F.getProductCatalogContext)(this.context),cartToggle:this.state.cartEnabled}),this.state.catalog?(this._loadMoreProduct(),this._watchProductCollection()):this._findCatalog(),(0,m.default)(e).then((e=>{this.setState({cartEnabled:e}),k.default.supportsFeature(k.default.F.MD_BACKEND)&&a&&e&&(0,d.getABPropConfigValue)("web_abprop_nux_cart_interstitial")&&(0,h.default)()}))}_findCatalog(){return p.default.find(this.props.catalogId).checkpoint(this.props.rejectOnUnmount()).then((e=>{this.setState({catalog:e,catalogFetchState:"SUCCESS"}),this._loadMoreProduct(),this._watchProductCollection()})).catch((0,i.filteredCatch)(T.ServerStatusCodeError,(e=>{403!==e.status&&404!==e.status||this.setState({catalog:null,catalogFetchState:"NOT_FOUND"})}))).catch((e=>{(0,I.parseErrorState)(e,(e=>this.setState({catalogFetchState:e})))}))}_watchProductCollection(){var{catalog:e}=this.state;this.props.autoUpdate&&null!=e&&(e.productCollection.on("add",(0,o.default)((()=>this.forceUpdate()),100)),e.productCollection.on("remove",(0,o.default)((()=>this.forceUpdate()),100)))}_getDrawerContent(){var e,{catalog:t,cartEnabled:a}=this.state,{contact:r,businessProfile:l,canManageCatalog:n,onAddProduct:o,onCartClick:i}=this.props,d=a&&i?this._handleCartClick:void 0;return t?(n&&o&&(e=s.default.createElement(u.default,{onClick:()=>o(),theme:"in-list"})),s.default.createElement(s.default.Fragment,null,l&&s.default.createElement("div",{className:U.default.header},s.default.createElement(V.default,{profilePicThumb:r.getProfilePicThumb(),contact:r,businessProfile:l})),s.default.createElement("div",{className:U.default.list},e,s.default.createElement(B.default,{onCartOpen:d,onProductDetail:this.props.onProductDetail,flatListController:this._catalogFlatListController,catalog:t,canManageCatalog:this.props.canManageCatalog,shareLinks:this.props.canManageCatalog,onProductShare:this.props.onProductShare}),this.state.loadingMore&&s.default.createElement(N.default,null)))):s.default.createElement(w.default,{fetchState:this.state.catalogFetchState})}_getCartIcon(){var{onCartClick:e,headerType:t,catalogId:a}=this.props;if(this.state.cartEnabled&&e){var r=this.state.cartCount,l=(0,G.isNumber)(r)&&r>0?r.toString():void 0,n=(0,A.getOnCartClickWithLog)(this._handleCartClick,a.toString(),(0,F.getProductCatalogContext)(this.context));return s.default.createElement(R.MenuBarItem,{a8nText:"menu-bar-cart-link",icon:s.default.createElement(f.default,{theme:t===E.DRAWER_HEADER_TYPE.LARGE?"inherit-color":null}),text:l,title:b.default.t(439),onClick:n})}return null}_getDrawerHeaderMenu(){var{canManageCatalog:e,onOpenSettings:t}=this.props,a=e&&(0,M.canToggleCartOnOff)()?s.default.createElement(R.MenuBarItem,{a8nText:"menu-bar-menu",icon:s.default.createElement(W.default,{name:"menu"}),title:b.default.t(1112)},s.default.createElement(S.default,{type:"dropdown_menu",flipOnRTL:!0,key:"CatalogDetailHeader",dirX:"LEFT"},s.default.createElement(P.default,{a8n:"mi-foward menu-item",action:this._handleCatalogLinkClick},b.default.t(813)),t&&s.default.createElement(P.default,{a8n:"mi-settings menu-item",action:t},b.default.t(507)))):s.default.createElement(R.MenuBarItem,{a8nText:"menu-bar-catalog-link",icon:s.default.createElement(D.default,{theme:this.props.headerType===E.DRAWER_HEADER_TYPE.LARGE?"inherit-color":null}),title:b.default.t(500),onClick:this._handleCatalogLinkClick});return s.default.createElement(s.default.Fragment,null,this._getCartIcon(),a)}render(){return s.default.createElement(_.default,{theme:"products",onDrop:this.props.onBack},s.default.createElement(E.default,{title:b.default.t(1342),type:this.props.headerType||E.DRAWER_HEADER_TYPE.SMALL,onBack:this.props.onBack,menu:this._getDrawerHeaderMenu()}),s.default.createElement(C.default,{onScroll:this.onScroll,flatListControllers:[this._catalogFlatListController],scrollOffset:this.props.scrollOffset},this._getDrawerContent()))}}t.ProductListDrawer=K,K.CONCERNS={contact:["id"]},K.contextType=v.default,K.displayName="ProductListDrawer";var z=(0,j.default)((0,x.default)((0,H.default)(K,K.CONCERNS)));t.default=z},9014:(e,t,a)=>{"use strict";var r=a(95318),l=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a(67294)),o=a(17367),i=r(a(20923)),s=r(a(39148)),d=r(a(81891)),u=r(a(72765)),c=a(38245);class f extends n.Component{_renderDescription(){var{businessProfile:e}=this.props;return e&&e.description?n.default.createElement("div",{className:d.default.description},n.default.createElement(i.default,{text:e.description,direction:"auto",selectable:!0,titlify:!0})):null}_renderPicture(){var{profilePicThumb:e,contact:t}=this.props;if(!e)return null;var a=(0,o.getDefaultIcon)(t.id);return n.default.createElement("div",{className:d.default.photo},n.default.createElement(o.DetailImageCommon,{profilePicThumb:e,loader:!0,defaultIcon:a,profilePicThumbImg:e.imgFull,spinnerClassName:d.default.spinner,imgClassName:d.default.img,theme:"business"}))}render(){var{contact:e}=this.props;return n.default.createElement("div",{className:d.default.header,"data-testid":"product-list-header"},this._renderPicture(),n.default.createElement("div",{className:d.default.text},n.default.createElement(c.TextDiv,{className:d.default.name,theme:"large"},n.default.createElement(s.default,{contact:e,selectable:!0,useVerifiedName:!0})),this._renderDescription()))}}f.CONCERNS={profilePicThumb:["imgFull"],contact:["id","isMe"],businessProfile:["description"]},f.displayName="ProductListDrawerHeader";var h=(0,u.default)(f,f.CONCERNS);t.default=h},31790:(e,t,a)=>{"use strict";var r=a(95318),l=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a(67294)),o=r(a(33766)),i=r(a(49589)),s=r(a(84657)),d=a(4566),u=a(38335),c=r(a(44612)),f=r(a(72765)),h=a(6578);class p extends n.Component{constructor(...e){super(...e),this.handleClick=(e,t)=>{var{product:a}=this.props;(0,d.logDetailImageClick)({product:(0,h.unproxy)(a),catalogContext:(0,u.getProductCatalogContext)(this.context)});var r={activeProductImage:t,productImageCollection:a.productImageCollection,getZoomNode:()=>e,product:a};o.default.productImageViewerModal(r,(0,u.getProductCatalogSessionId)(this.context))}}render(){var{product:e,isAvailable:t,fetching:a}=this.props,r=e.productImageCollection.toArray();return n.default.createElement("div",{className:c.default.imageCarouselContainer},n.default.createElement(s.default,{images:r,fetching:a,onClick:t?this.handleClick:null,renderFallback:!t,fallbackMediaData:e.productMsgMediaData}))}}p.contextType=i.default,p.CONCERNS={product:["productImageCollection","productMsgMediaData","catalogWid","imageCdnUrl"]},p.displayName="ProductTile";var m=(0,f.default)(p,p.CONCERNS);t.default=m},25086:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{onPopupCancel:t,onReport:a,onTellUsMore:r}=e,u=()=>{t()},c=i.default.t(1404),f=l.default.createElement("div",{key:"ReportProductChoicePopup-desc"},i.default.t(1402)),h=l.default.createElement(n.default,{a8nText:"popup-controls-more",type:"secondary",onClick:()=>{r()},key:"ReportProductChoicePopup-moreBtn"},i.default.t(1405)),p=l.default.createElement(n.default,{a8nText:"popup-controls-report",type:"secondary",onClick:()=>{a()},key:"ReportProductChoicePopup-reportBtn"},i.default.t(1401)),m=l.default.createElement(n.default,{type:"secondary",onClick:u,key:0},i.default.t(1768)),g=l.default.createElement("div",{className:d.default.buttons},l.default.createElement("div",{className:d.default.button},h),l.default.createElement("div",{className:d.default.button},p),l.default.createElement("div",{className:d.default.button},m));return l.default.createElement(o.default,{handlers:{escape:u}},l.default.createElement(s.default,{title:c,actions:g,children:f}))};var l=r(a(67294)),n=r(a(62685)),o=r(a(35001)),i=r(a(80162)),s=r(a(26689)),d=r(a(78140))},28540:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(a(67294)),n=a(84481),o=r(a(33766)),i=r(a(59986)),s=r(a(80162)),d=a(4566),u=a(11183),c=r(a(25086)),f=r(a(95788)),h=a(6578);class p extends i.default{constructor(...e){super(...e),this._submitReason=e=>{var{product:t,sessionId:a}=this.props;return(0,d.logReportProduct)({product:(0,h.unproxy)(t),catalogSessionId:a}),(0,u.reportProduct)(t.catalogWid,t.id.toString(),e)},this.onDelete=()=>{this.end()},this.onReport=e=>{this._onShowSubmittedToast(e)},this.onTellUsMore=()=>{this.push(l.default.createElement(f.default,{onTellUsMoreSubmit:this.onReport,onCancel:this.onCancel}),"none")},this.onPopupCancel=()=>{this.end()},this.onCancel=()=>{this.end()},this._onReportSubmitted=()=>{this.end()},this._onShowSubmittedToast=(e,t=(0,n.genId)())=>{var{product:a,sessionId:r}=this.props,i=this._submitReason(e),u=new n.ActionType(s.default.t(1368)),c=i.then((()=>((0,d.logReportProductSuccess)({product:(0,h.unproxy)(a),catalogSessionId:r}),new n.ActionType(`${s.default.t(1367)}. ${s.default.t(1403)}`)))).catch((()=>((0,d.logReportProductFailure)({product:(0,h.unproxy)(a),catalogSessionId:r}),__LOG__(3)`error submitting product report`,new n.ActionType(s.default.t(1366),{actionText:s.default.t(1419),actionHandler:()=>this._onShowSubmittedToast(e,t)}))));return o.default.openToast(l.default.createElement(n.ActionToast,{id:t,initialAction:u,pendingAction:c})),this._onReportSubmitted(),i}}componentDidMount(){this.push(l.default.createElement(c.default,{onTellUsMore:this.onTellUsMore,onReport:this.onReport,onPopupCancel:this.onPopupCancel,onCancel:this.onCancel}))}}t.default=p},95788:(e,t,a)=>{"use strict";var r=a(20862),l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a(94184)),o=r(a(67294)),i=l(a(62685)),s=l(a(33766)),d=l(a(35001)),u=l(a(80162)),c=l(a(41849)),f=l(a(26689)),h=l(a(85371)),p=r(a(48847)),m=["NO_MATCH","SPAM","ILLEGAL","SCAM","KNOCKOFF","OTHER"];class g extends o.Component{constructor(...e){super(...e),this.state={reason:null},this.handleCancel=()=>{var{onCancel:e}=this.props;e&&e()},this._handleSubmit=()=>{if(!this.state.reason)return this._noSelectionToast();this.props.onTellUsMoreSubmit(this.state.reason)},this._handleReasonChange=e=>{e.target&&e.target.value&&this.setState({reason:e.target.value})}}_noSelectionToast(){s.default.openToast(o.default.createElement(p.default,{msg:u.default.t(1369),id:(0,p.genId)()}))}_renderRadioOptions(){var{reason:e}=this.state;return m.map((t=>o.default.createElement("li",{key:`ReportProductReasonPopup-${t}-option`},o.default.createElement("label",{className:h.default.label},o.default.createElement("input",{type:"radio",name:t,value:t,onChange:this._handleReasonChange,className:h.default.input,checked:e===t}),o.default.createElement(_,{reason:t})))))}render(){var e=u.default.t(1362),t=o.default.createElement("div",{className:(0,n.default)(h.default.section)},o.default.createElement("ul",{className:h.default.reasonList},this._renderRadioOptions())),a=o.default.createElement(i.default,{a8nText:"popup-controls-submit",type:"primary",onClick:this._handleSubmit,key:"ReportProductReasonPopup-submitButton",disabled:!this.state.reason},u.default.t(1365)),r=o.default.createElement(i.default,{type:"secondary",a8nText:"popup-controls-cancel",onClick:this.handleCancel,key:"ReportProductReasonPopup-cancelButton"},u.default.t(1768)),l={escape:this.handleCancel},s=o.default.createElement("div",{className:h.default.buttons},r,a);return o.default.createElement(d.default,{handlers:l},o.default.createElement(f.default,{title:e,actions:s,children:t}))}}function _(e){var{reason:t}=e;switch(t){case"NO_MATCH":return o.default.createElement(c.default,{id:1360});case"SPAM":return o.default.createElement(c.default,{id:1364});case"ILLEGAL":return o.default.createElement(c.default,{id:1358});case"SCAM":return o.default.createElement(c.default,{id:1363});case"KNOCKOFF":return o.default.createElement(c.default,{id:1359});case"OTHER":return o.default.createElement(c.default,{id:1361});default:throw new Error(`Invalid reason: ${t}`)}}t.default=g,g.displayName="ReportProductReasonPopup"},43662:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({isEditMode:e,catalog:t,subtitle:a,hideIncompleteRows:r,productsToShow:f,businessProfile:h}){return l.default.createElement(i.default,{onProductDetail:function(t){if(e)s.default.openModal(l.default.createElement(c.default,null));else{var a=new URL((0,u.default)(t.url,"product.url"),`https://${d.default.HOSTNAME.FACEBOOK}`);n.default.open(String(a))}},onProductCatalog:function(){e?s.default.openModal(l.default.createElement(c.default,null)):(0,o.goToShop)(h)},catalog:t,subtitle:a,hideIncompleteRows:r,productsToShow:f,showShopsLogo:!0})};var l=r(a(67294)),n=r(a(92018)),o=a(95140),i=r(a(18824)),s=r(a(33766)),d=r(a(75444)),u=r(a(8238)),c=r(a(41304))},49071:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.RingTheme=void 0;var l=r(a(67154)),n=r(a(94184)),o=r(a(67294)),i=r(a(50234)),s=r(a(95607)),d=a(54302).Mirrored(["STATUS_V3_PANEL","BUSINESS_CONTACT_INFO"]);t.RingTheme=d;function u(e){var{stroke:t,size:a}=e,r=(0,s.default)(e.statusV3,["unreadCount","totalCount","contact"]),u=e=>{var a=100+t;return o.default.createElement("circle",(0,l.default)({cx:a/2,cy:a/2,r:50,fill:"none",strokeLinecap:"round",strokeWidth:t},e))},c=(e,t,a,r)=>{for(var l="",n=0;n<e;n++)l+=n===e-1?`${t} ${a-e*(r+t)+r} `:`${t} ${r} `;return l},f=100+t,h=r.totalCount,p=10,m=50*Math.PI*2;m-10*h<1&&(p=m/h/1.2);var g,_,C=(m-p*h)/h,v=m/4-p/2,E=r.contact.isMe?0:r.unreadCount,S=h-E;if(E){var P,T=v+h*(p+C);1!==h&&(P=c(E,C,m,p)),g=u({strokeDashoffset:T,strokeDasharray:P,className:i.default.unread})}if(S){var y,I=v+S*(p+C);1!==h&&(y=c(S,C,m,p)),_=u({strokeDashoffset:I,strokeDasharray:y,className:i.default.read})}return o.default.createElement("svg",{className:(0,n.default)({[i.default.statusV3PanelRing]:e.theme===d.STATUS_V3_PANEL,[i.default.businessContactInfoRing]:e.theme===d.BUSINESS_CONTACT_INFO}),width:a,height:a,viewBox:`0 0 ${f} ${f}`},g,_)}u.defaultProps={size:48,stroke:4,theme:d.STATUS_V3_PANEL};var c=u;t.default=c},70904:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.setupStatusV3Controller=function(e,t){if(e){if(e.type===o.default.TYPE.IMAGE){var a=4500;return(0,l.default)(t.caption)||(a+=2e3*Math.min(t.caption.length/150,1)),new s(a)}return e.type===o.default.TYPE.VIDEO?t.isGif?new u:new i.default:new s(3e3)}if(t.type===n.default.MSG_TYPE.CHAT){var r=2e3+60*Math.min(t.body.length,1e3);return new s(r)}return new s(3e3)},t.StatusV3GifController=t.StatusV3CountdownController=void 0;var l=r(a(41609)),n=r(a(75444)),o=r(a(76022)),i=r(a(64055));class s{constructor(e){this.addListeners=(e,t,a)=>{this._onStart=e,this._onPause=t,this._onEnded=a},this.removeListeners=()=>{this._onStart=void 0,this._onPause=void 0,this._onEnded=void 0},this.play=()=>{if(this._timer)__LOG__(2)`Duplicate timer start`;else{this._timer=setTimeout(this._onTimeup,this._timeout),this._start=(new Date).getTime();var e=this._onStart;e&&e(this._timeout,this._duration)}},this.stop=()=>{if(this._timer){clearTimeout(this._timer),this._timer=null;var e=(new Date).getTime();this._timeout-=e-this._start;var t=this._onPause;t&&t()}else __LOG__(2)`Timer stop called on stopped timer`},this.resume=()=>{this.play()},this.pause=()=>{this.stop()},this._onTimeup=()=>{var e=this._onEnded;e&&e()},this._duration=e,this._timeout=this._duration,this._start=0}get duration(){return this._duration}}t.StatusV3CountdownController=s;var d=6e3;class u{constructor(){this.removeListeners=()=>{this._onStart=void 0,this._onPause=void 0,this._onEnded=void 0,this._videoController.removeListeners(),this._countdownController.removeListeners()},this.setVideo=(e,t)=>{this._video!==e&&(this._video=e,null!=t&&(this._duration=t),this._videoController.setVideo(e))},this._onVideoStartHandler=()=>{var e=this._video;if(null!=e){var t=this._onStart,a=e.duration||this._duration,r=Math.max(3*a*1e3,d);t&&t(r-1e3*a*this._playCounter-1e3*e.currentTime,r)}},this._onVideoPauseHandler=()=>{var e=this._onPause;e&&e()},this._onVideoEndedHandler=()=>{var e=this._video;if(null!=e){this._playCounter++;var t=this._onEnded;3===this._playCounter&&(this._videoEnded=!0,this._timerEnded&&t&&t()),e.currentTime=0,this._videoEnded&&this._timerEnded||setTimeout((()=>{this._videoController.play()}),0)}},this._onTimerEndedHandler=()=>{var e=this._onEnded;this._timerEnded=!0,e&&this._videoEnded&&e()},this.play=()=>{this._videoController.play(),this._countdownController.play()},this.stop=()=>{this._videoController.stop(),this._countdownController.stop()},this.resume=()=>{this._videoController.resume(),this._countdownController.resume()},this.pause=()=>{this._videoController.pause(),this._countdownController.pause()},this._playCounter=0,this._timerEnded=!1,this._videoEnded=!1,this._videoController=new i.default,this._countdownController=new s(d),this._videoController.addListeners(this._onVideoStartHandler,this._onVideoPauseHandler,this._onVideoEndedHandler),this._countdownController.addListeners(void 0,void 0,this._onTimerEndedHandler)}addListeners(e,t,a){this._onStart=e,this._onPause=t,this._onEnded=a}get duration(){return Math.max(3*(this._video&&this._video.duration||this._duration)*1e3,d)}}t.StatusV3GifController=u},71194:(e,t,a)=>{"use strict";var r=a(20862),l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a(94184)),o=r(a(67294)),i=l(a(43232)),s=l(a(57136)),d=l(a(59979));class u extends o.Component{constructor(){super(...arguments),this._setRefBar=e=>{this._refBar=e},this.handleClick=e=>{this.props.onClick&&this.props.onClick(e)},this.handleStart=(e,t)=>{if(this._refBar){var a=1e3*i.default.statusVideoMaxDuration,r=Math.min(e,a),l=Math.min(t,a);(0,d.default)(this._refBar,"stop"),this._barAnimation=(0,d.default)(this._refBar,{translateX:["0%",`-${r/l*100}%`]},{duration:r,easing:"linear"})}},this.handlePause=()=>{this._refBar&&(0,d.default)(this._refBar,"stop")},this.handleEnded=()=>this._barAnimation?this._barAnimation:Promise.resolve(),__LOG__(2)`Current index: ${this.props.current}, total count: ${this.props.total}`,this.props.current>=0&&this.props.current<this.props.total||(__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("bad current status v3 index"))}render(){for(var e=this,t=[],a=100/this.props.total+"%",r=function(r){var l=(0,n.default)(s.default.foreground,{[s.default.filled]:r<e.props.current,[s.default.empty]:r>e.props.current,[s.default.active]:r===e.props.current}),i=o.default.createElement("div",{className:s.default.wrapper,style:{width:a},key:r,onClick:()=>e.handleClick(r)},o.default.createElement("div",{className:s.default.bg}),o.default.createElement("div",{className:s.default.mask},o.default.createElement("div",{className:l,ref:r===e.props.current?e._setRefBar:()=>{}})));t.push(i)},l=0;l<this.props.total;++l)r(l);return o.default.createElement("div",{className:s.default.container},t)}}t.default=u,u.displayName="StatusV3ProgressBar"},94573:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({seenCount:e}){if(null!=e)return l.default.createElement("div",{className:o.default.container},l.default.createElement(i.default,{name:"status-v3-seen",className:o.default.iconSeen}),l.default.createElement("div",{className:o.default.seenCount},e));return l.default.createElement(n.default,{stroke:3,size:12})};var l=r(a(67294)),n=r(a(69507)),o=r(a(76168)),i=r(a(32885))},15605:(e,t,a)=>{"use strict";var r=a(20862),l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.StatusV3MsgNotFound=t.StatusV3LoadingError=t.InvalidStatusV3Iterator=void 0;var n=l(a(57043)),o=l(a(44908)),i=l(a(35161)),s=a(9019),d=a(40515),u=a(13266),c=l(a(11818)),f=r(a(65427));class h extends((0,u.customError)("InvalidStatusV3Iterator")){}t.InvalidStatusV3Iterator=h;class p extends((0,u.customError)("StatusV3LoadingError")){}t.StatusV3LoadingError=p;class m extends((0,u.customError)("StatusV3MsgNotFound")){}t.StatusV3MsgNotFound=m;t.default=class{constructor(e,t){if(this._printInfo=()=>{this.statuses.forEach((e=>{__LOG__(2)`Total count: ${e.totalCount}, unread count: ${e.unreadCount}, msgs length: ${e.msgs.length}`}))},this.getFirstUnread=(e,t,a)=>{var r=this.statuses.findIndex((t=>t.statusV3===e));if(-1!==r){var l,n=this.statuses[r],o=n.readMsgKeys;return a?(l=n.msgs?n.msgs.findIndex((e=>a&&e.id.toString()===a.toString())):-1)>=0?Promise.resolve({msgIdx:l,statusIdx:r}):Promise.reject(new h):-1===(l=n.msgs?n.msgs.findIndex((e=>!o.includes(e.id.toString()))):-1)&&e.msgs.msgLoadState.noEarlierMsgs?(l=t?0:n.msgs.length-1,Promise.resolve({msgIdx:l,statusIdx:r})):-1!==l?Promise.resolve({msgIdx:l,statusIdx:r}):0===n.unreadCount&&t&&n.msgs.length>0?Promise.resolve({msgIdx:0,statusIdx:r}):this._fetchMore(e).then((()=>this.getFirstUnread(e,t,a))).catch((e=>(__LOG__(3)`error while getting first unread status: ${String(e)}`,Promise.reject(new h))))}return Promise.reject(new h)},this.hasNext=e=>{var t=this.statuses[e.statusIdx];return e.msgIdx+1<t.totalCount||e.statusIdx+1<this.statuses.length},this.getNext=e=>{var t=this.statuses[e.statusIdx],a=t.statusV3;if(e.msgIdx+1<t.totalCount&&e.msgIdx+1<t.msgs.length)return Promise.resolve({msgIdx:e.msgIdx+1,statusIdx:e.statusIdx});if(e.msgIdx+1<t.totalCount)return a.msgs.msgLoadState.noEarlierMsgs?(__LOG__(3)`Loaded ${t.msgs.length} messages with total count ${t.totalCount}, but noEarlierMsgs set`,Promise.reject(new h)):this._fetchMore(a).then((()=>this.getNext(e))).catch((t=>{if(__LOG__(3)`error while loading more status msgs: ${String(t)}`,e.statusIdx+1<this.statuses.length){var a=this.statuses[e.statusIdx+1].statusV3;return this.getFirstUnread(a,!0)}return Promise.reject(new h)}));if(e.statusIdx+1<this.statuses.length){var r=this.statuses[e.statusIdx+1].statusV3;return this.getFirstUnread(r,!0)}return Promise.reject(new h)},this.hasPrev=e=>e.msgIdx>0||e.statusIdx>0,this.getPrev=e=>{if(e.msgIdx>0)return Promise.resolve({msgIdx:e.msgIdx-1,statusIdx:e.statusIdx});if(e.statusIdx>0){var t=this.statuses[e.statusIdx-1].statusV3;return this.getFirstUnread(t,!1)}return Promise.reject(new h)},this.statusAt=(e,t)=>{var a=this.statuses[e.statusIdx],r=a.statusV3;return t<a.msgs.length?Promise.resolve({msgIdx:t,statusIdx:e.statusIdx}):r.msgs.msgLoadState.noEarlierMsgs?Promise.reject(new h):this._fetchMore(r).then((()=>this.statusAt(e,t))).catch((e=>(__LOG__(3)`error while loading more status msgs: ${String(e)}`,Promise.reject(new h))))},this._fetchMore=e=>(0,d.promiseLoop)(((t,a,r)=>{var l=(0,s.delayMs)(f.expBackoff(r,12e4,1e3,.1));return e.loadMore().then((()=>{var a=this.statuses.findIndex((t=>t.statusV3===e));if(-1!==a){var s=this.statuses[a],d=s.totalCount,u=s.unreadCount,c=e.msgs.getModelsArray().slice(0,d),f=c.slice(0,d-u),h=(0,i.default)(f,(e=>e.id.toString()));s.msgs=c,s.readMsgKeys=(0,o.default)((0,n.default)(s.readMsgKeys,h)),t(!0)}else{if(!(r>=4))return l;t(!1)}})).catch((()=>{if(!(r>=4))return l;t(!1)}))})).then((e=>{if(!e)throw new p})),t){var a=e.msgs.getModelsArray().find((e=>t&&e.id.toString()===t.toString()));if(!a)throw new m;this.statuses=[{statusV3:e,totalCount:1,unreadCount:0,msgs:[a],readMsgKeys:[a.id.toString()]}]}else if(e.unreadCount>0&&!e.contact.isMe&&!e.contact.statusMute){var r=c.default.getUnexpired(!0),l=[];r.forEach((e=>{if(!e.contact.statusMute){var t=e.msgs.getModelsArray(),a=e.totalCount-e.unreadCount,r=t.slice(0,a),n=(0,i.default)(r,(e=>e.id.toString()));l.push({statusV3:e,totalCount:e.totalCount,unreadCount:e.unreadCount,msgs:t,readMsgKeys:n})}})),this.statuses=l}else{var u=e.msgs.getModelsArray(),g=e.totalCount-e.unreadCount,_=u.slice(0,g),C=(0,i.default)(_,(e=>e.id.toString())),v=[{statusV3:e,totalCount:e.totalCount,unreadCount:e.unreadCount,msgs:u,readMsgKeys:C}];this.statuses=v}this._printInfo()}}},64055:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(a(43232));function n(e){return Math.min(e,l.default.statusVideoMaxDuration)}var o=class{constructor(){this.addListeners=(e,t,a)=>{this._onStart=e,this._onPause=t,this._onEnded=a},this.setVideo=e=>{this._video!==e&&(this._unsetVideo(),this._video=e,null!=e&&(e.addEventListener("playing",this._onPlayingHandler),e.addEventListener("pause",this._onPauseHandler),e.addEventListener("ended",this._onEndedHandler),e.addEventListener("timeupdate",this._onTimeUpdate)))},this._unsetVideo=()=>{var e=this._video;e&&(this.stop(),e.removeEventListener("playing",this._onPlayingHandler),e.removeEventListener("pause",this._onPauseHandler),e.removeEventListener("ended",this._onEndedHandler),e.removeEventListener("timeupdate",this._onTimeUpdate))},this.play=()=>{this._video&&this._video.play()},this.pause=()=>{this._video&&!this._video.paused&&this._video.pause()},this.resume=()=>{this._video&&this._video.play()},this.stop=()=>{this._video&&!this._video.paused&&this._video.pause()},this._onPlayingHandler=()=>{var e=this._video;if(null!=e){var t=this._onStart;if(t){var a=n(e.duration);t(1e3*(a-e.currentTime),1e3*a)}}},this._onPauseHandler=()=>{var e=this._onPause;e&&e()},this._onEndedHandler=()=>{var e=this._onEnded;e&&e()},this._onTimeUpdate=()=>{var e,t=null===(e=this._video)||void 0===e?void 0:e.currentTime;if(null!=t&&t>=l.default.statusVideoMaxDuration){this.stop(),this._onEndedHandler();var a=this._video;a&&(a.removeEventListener("timeupdate",this._onTimeUpdate),a.removeEventListener("ended",this._onEndedHandler))}},this.removeListeners=()=>{this.stop(),this._onStart=void 0,this._onPause=void 0,this._onEnded=void 0}}get duration(){return null==this._video?0:1e3*n(this._video.duration)}};t.default=o},6532:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){window.getSelection().removeAllRanges();var t=document.getElementById(e),a=document.createRange();t&&a.selectNode(t),window.getSelection().addRange(a);try{var r=document.execCommand("copy");return window.getSelection().removeAllRanges(),r}catch(e){return!1}}},9462:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(a(81109)),n=a(91591),o=a(10901),i={};i[n.ExtendedTextMessageFontType.SERIF]={google:{families:["Roboto"]}},i[n.ExtendedTextMessageFontType.SANS_SERIF]={google:{families:["Droid Serif"]}},i[n.ExtendedTextMessageFontType.NORICAN_REGULAR]={google:{families:["Norican"]}},i[n.ExtendedTextMessageFontType.BRYNDAN_WRITE]={custom:{families:["Bryndan-Write"]}},i[n.ExtendedTextMessageFontType.OSWALD_HEAVY]={google:{families:["Oswald:bold"]}};var s={};s[n.ExtendedTextMessageFontType.BRYNDAN_WRITE]=`@font-face {font-family:"Bryndan-Write"; src:url("${o}") format("truetype");}`;var d=new class{constructor(){this.loadedFonts={},this.loadingPromise={}}load(e){if(this.loadedFonts[e])return Promise.resolve();if(this.loadingPromise[e])return this.loadingPromise[e];var t=i[e],a=s[e],r=(a?new Promise(((e,t)=>{var r=document.createElement("style");r.appendChild(document.createTextNode(a)),r.onload=e,r.onerror=t,document.head&&document.head.appendChild(r)})):Promise.resolve()).then((()=>new Promise(((a,r)=>{var n=(0,l.default)((0,l.default)({},t),{},{active:()=>{this.loadedFonts[e]=!0,a()},inactive:()=>{this.loadingPromise[e]=void 0,r("Failed to load font: "+e)}});WebFont.load(n)}))));return this.loadingPromise[e]=r,r}loadAllFonts(){return Promise.all(Array.from(n.ExtendedTextMessageFontType.members()).map((e=>this.load(e))))}};t.default=d},87709:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return n.default.supportsFeature(n.default.F.RICH_TEXT)?(0,l.default)(e,s,i.TextSerializer):e};var l=r(a(68666)),n=r(a(77188)),o=a(99375),i=a(87167),s=o.Configuration.ComposeBox()},92758:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createProductLink=function(e,t){return`https://wa.me/p/${t}/${e}`},t.createCatalogLink=function(e){return`https://wa.me/c/${e}`}},48590:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.dayToWeekday=s,t.businessHoursFromConfig=d,t.getWebsiteLink=function(e){return`https://l.wl.co/l?u=${encodeURIComponent(e)}`},t.getBusinessHours=function(e){var{config:t}=e,a=(new Date).getDay();return n.DAYS_OF_WEEK.map(((e,r)=>{var l=(a+r)%n.DAYS_OF_WEEK.length,o=n.DAYS_OF_WEEK[l];return{day:s(l),hours:d(t[o]),first:0===r}}))},t.getBusinessHoursForEdit=function(e){var t,a=null==e?{}:e.config,{note:r,timezone:o}=e||{},s=n.DAYS_OF_WEEK.map(((e,r)=>{var n,o=a[e],s=l.default.weekdays(r);return o&&(t=o.mode,o.hours&&(n=o.hours.map((([e,t])=>[(0,i.minutesToTime)(e),(0,i.minutesToTime)(t)])))),{dayName:s,dayKey:e,closed:!o,hours:n}})),d=l.default.weekdays(!0,0),u=l.default.weekdays().indexOf(d),c=s.splice(u);return{mode:t,days:[...c,...s],timezone:o,note:r}},Object.defineProperty(t,"minutesToTime",{enumerable:!0,get:function(){return i.minutesToTime}}),Object.defineProperty(t,"timeStringToMinutes",{enumerable:!0,get:function(){return i.timeStringToMinutes}});var l=r(a(30381)),n=a(78783),o=r(a(80162)),i=a(82872);function s(e){return l.default.weekdays(e)}function d(e){switch(e&&e.mode){case n.BUSINESS_HOUR_MODES.SPECIFIC_HOURS:return e&&e.hours?e.hours.map((e=>e.map(i.minutesToTime).join(" - "))).join("\n"):"";case n.BUSINESS_HOUR_MODES.APPOINTMENT_ONLY:return o.default.t(373);case n.BUSINESS_HOUR_MODES.OPEN_24H:return o.default.t(385);default:return o.default.t(374)}}},82872:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.minutesToTime=function(e){return l.default.utc().startOf("day").add(e,"minutes").format(n.default.timestampStrFormat())},t.timeStringToMinutes=void 0;var l=r(a(30381)),n=r(a(44386)),o=["h:mm A","h:mmA","HH:mm","HH.mm","H:mm","H.mm"];t.timeStringToMinutes=e=>{var t,a=e.trim();if(a){for(var r of o){var n=(0,l.default)(a,r,!0);if(n.isValid()){t=n;break}}if(t){var i=t,s=(0,l.default)().startOf("day"),d=i.diff(s);return l.default.duration(d).asMinutes()}}}},10901:(e,t,a)=>{e.exports=a.p+"bryndan_write_20e48b2ec8c64b2a1ceb5b28d9bcc9d0.ttf"},72436:(e,t,a)=>{"use strict";a.r(t)},21997:(e,t,a)=>{"use strict";a.r(t),t.default={coverPhoto:"_3_2za",isEditable:"_1aFdX",avatar:"_3RULU",noStatusBorder:"_3xp59",hasStatusBorder:"IYr2u"}},91214:(e,t,a)=>{"use strict";a.r(t),t.default={cartIcon:"PKmps",inheritColor:"qM2C3"}},55140:(e,t,a)=>{"use strict";a.r(t),t.default={carousel:"alksS",contentContainer:"OkAlG",slidesContainer:"_1w5W1",loaded:"j1J2j",fadeIn:"_2QkLV",spinnerContainer:"_1kDDe",spinner:"_3j4fM"}},57246:(e,t,a)=>{"use strict";a.r(t),t.default={slide:"_2MjCA",slideInnerContainer:"_2cG76",image:"ubkU5"}},69775:(e,t,a)=>{"use strict";a.r(t),t.default={canvasComponent:"_1JMw2",canvasEmpty:"_166Sa",canvasSecondRow:"_3Ggjl",canvasFirst:"_2CUR-",more:"_1ZQxr",container:"_3G6fW",justifySpaceBetween:"_1I8Ig",galleryEmpty:"_2Liso",drawer:"_3q1U7",drawerBody:"_1uuJx"}},87041:(e,t,a)=>{"use strict";a.r(t),t.default={icon:"_23QTJ",disabled:"iP9Fm",transparent:"_2HMfd",compact:"_25tj-"}},87571:(e,t,a)=>{"use strict";a.r(t),t.default={labelRow:"_1_9J2",standaloneLabelRow:"_2Lv1o",labelContainer:"_3A-ba",standaloneLabelContainer:"_34ojr"}},59271:(e,t,a)=>{"use strict";a.r(t),t.default={section:"_17dED",control:"_3T0RE"}},555:(e,t,a)=>{"use strict";a.r(t),t.default={icon:"_2I7Gg"}},73858:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_2QzJd",containerNoIcon:"_1EaD-",containerListAligned:"_1I4H7",icon:"_13qOF",danger:"_1O1hL",success:"x8B-w",bodyContainer:"_36Lzk",body:"Qy5WW"}},80257:(e,t,a)=>{"use strict";a.r(t),t.default={graphic:"_2XZIC",description:"_14eHx"}},70583:(e,t,a)=>{"use strict";a.r(t),t.default={actionText:"_3nrbz"}},67978:(e,t,a)=>{"use strict";a.r(t),t.default={mediaPanelTools:"f3Dup",profileThumb:"_2xUs5",profileContainer:"Cq6XJ",media:"_1_TZb",profileViewer:"_3OWRM",profileViewerImg:"_2hH_e",container:"_9-YHG","media-viewer-animate":"_7DTuk",mediaViewerAnimate:"_7DTuk",headerContainer:"_1U_13"}},60654:(e,t,a)=>{"use strict";a.r(t),t.default={icon:"woEzZ"}},67873:(e,t,a)=>{"use strict";a.r(t),t.default={icon:"_1eLBZ"}},19614:(e,t,a)=>{"use strict";a.r(t),t.default={container:"xWfq_",popupPanel:"B7YnW",wrapper:"_35Bca",emojiIcon:"_1nsaN",sendIcon:"dJI7Y",lineWrapper:"_2X8K7"}},4764:(e,t,a)=>{"use strict";a.r(t),t.default={playerWrapper:"_1E241",mediaViewer:"_19K91",mediaStateControls:"_12QEi",playerBackground:"_20Ki1",media:"Kr9Tk",captionBackdrop:"_43j_5",mediaCaption:"_3yP6V",progressBackdrop:"_21bEk",progressBarBackdropNarrow:"_2paot",profile:"_1Oh7Z",nonClickProfile:"_3AuES",profileNarrow:"_2iahT",playerAvatar:"_19BWt",measuringProfile:"nF1-N",profileMac:"_1At-O",msgInfo:"_2LKvA",msgInfoName:"_3VYz8",timestamp:"_2tXxE",playerContent:"_2MwhR",statusPanelPlayerContent:"_2HrM5",statusThumbnailPlayerContent:"_1CbQs",loading:"_3e8Or",v3Image:"_1pf64",v3Video:"_3uHZH",text:"ecFHI",textLarge:"nRSvd",textMedium:"_1WIYL",textSmall:"_1PvQk",font_1:"_2b6no",font1:"_2b6no",font_2:"_3KLoY",font2:"_3KLoY",font_3:"_2LoU3",font3:"_2LoU3",font_5:"wQ88j",font5:"wQ88j",unknown:"_3-Nhy",seen:"_1PF3_",textThumbnailPlayerContent:"_3wxAA"}},43693:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_1ufTj",inputContainer:"_1rO5S",btnContainer:"_3KRZ3",btnPosition:"D6yuB"}},89729:(e,t,a)=>{"use strict";a.r(t),t.default={chevron:"_23hMF",catalogEntryButton:"_3GuCY",subtitle:"_3nHWT",shopsLogo:"taQA_"}},73040:(e,t,a)=>{"use strict";a.r(t),t.default={prompt:"_1MKrR"}},52160:(e,t,a)=>{"use strict";a.r(t),t.default={linkIcon:"_3n54f",inheritColor:"dF0c_"}},78097:(e,t,a)=>{"use strict";a.r(t),t.default={linkContainer:"_36niN",activeLink:"_218Ww"}},26886:(e,t,a)=>{"use strict";a.r(t),t.default={addItemButton:"_2e394",themeInList:"_2tMVN",themeCollections:"_1AeNq",themeDefault:"_28K_k",addIcon:"_3UMBX"}},7105:(e,t,a)=>{"use strict";a.r(t),t.default={pendingBanner:"_3oeDZ",iconContainerPending:"_1lkig",iconContainerRejected:"NHVOL",rejectedBanner:"_14t2G",rejectedBannerWithAppeal:"xAt0d"}},23628:(e,t,a)=>{"use strict";a.r(t),t.default={header:"_361SI",list:"_300on"}},83669:(e,t,a)=>{"use strict";a.r(t),t.default={list:"_1x_gj",addItemsNotice:"_3uGr0"}},74591:(e,t,a)=>{"use strict";a.r(t),t.default={collectionListItem:"V0C2k",reviewStateRejected:"_22_86"}},35769:(e,t,a)=>{"use strict";a.r(t),t.default={body:"_3I775",loadingContainer:"AOdvD",text:"_2yxqg",loadingText:"_38kp2",shiftUp:"_1gMAq",availabilityBanner:"_32wIk"}},57142:(e,t,a)=>{"use strict";a.r(t),t.default={buttonContainer:"_1IcSo",button:"_2I8rD",addToCartButton:"_1jLhq",addToCartIcon:"PoXRl",addToCartIconDisabled:"_3l5-l",addToCartContainer:"_3shFG",name:"_1l7n8",price:"_27spI",originalPrice:"_1DYEx",description:"_2f0i8",more:"Jjucz",descBlock:"_2IFFX"}},65374:(e,t,a)=>{"use strict";a.r(t),t.default={productImage:"_3rmhv",productImageContainer:"_1E8LA",productThumb:"_3HQ90",productThumbContainer:"_6O-Qy",prompt:"_3K3du"}},81618:(e,t,a)=>{"use strict";a.r(t),t.default={header:"_9UV-x",list:"_8UHUF"}},81891:(e,t,a)=>{"use strict";a.r(t),t.default={header:"_1fhXS",photo:"_1XF90",text:"_3oXCf",name:"_3o6p1",description:"_2OTQS",spinner:"_2Fceq",img:"sz61d"}},44612:(e,t,a)=>{"use strict";a.r(t),t.default={imageCarouselContainer:"_33-Dh"}},78140:(e,t,a)=>{"use strict";a.r(t),t.default={buttons:"wH7Ij",button:"_2Na0-"}},85371:(e,t,a)=>{"use strict";a.r(t),t.default={section:"_3KLwP",reasonList:"CsJ_u",label:"KvCZU",input:"_3uXLe",buttons:"_1VUcX"}},50234:(e,t,a)=>{"use strict";a.r(t),t.default={statusV3PanelRing:"cFfKt",businessContactInfoRing:"_3EL6s",read:"_3tgk6",unread:"_1min4"}},57136:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_3b17O",wrapper:"sZBni",mask:"_3CRhO",bg:"_3r7AV",foreground:"_3f8oh",filled:"_3t0iC",empty:"_1A2HZ",active:"_2gskD"}},76168:(e,t,a)=>{"use strict";a.r(t),t.default={iconSeen:"_1VGOo",seenCount:"_1QbZj",container:"PP_R1"}}}]);