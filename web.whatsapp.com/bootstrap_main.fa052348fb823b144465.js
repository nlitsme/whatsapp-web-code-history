/*! Copyright (c) 2021 WhatsApp Inc. All Rights Reserved. */
(self.webpackChunkbuild=self.webpackChunkbuild||[]).push([[7964],{5172:e=>{"use strict";e.exports=JSON.parse("[65,26,32,26,73,1,11,1,5,1,6,23,24,31,32,449,451,7,21,2,16,5,14,1,130,4,6,2,4,4,5,1,7,1,2,3,4,1,2,20,21,83,84,140,147,166,167,38,40,49,55,-1,46,-1,2,-1,3,-1,3,-1,2,-56,64,-1,3,-1,2,-1,14,-48,82,-3,4,-101,116,-2,9,-2,12,-23,24,-30,57,-91,102,-58,67,-2,6,-3,4,-24,28,-1,10,-1,4,-1,6,-43,46,-119,167,55,56,1,2,4,12,4,5,3,10,10,12,29,30,2,3,8,10,2,4,22,23,7,8,1,4,4,7,4,10,2,4,2,3,1,9,1,5,2,3,3,7,12,14,7,8,2,7,1,2,6,10,2,4,22,23,7,8,2,3,2,3,2,6,3,27,4,5,1,8,10,12,3,4,1,13,1,2,9,10,3,4,22,23,7,8,2,3,5,8,4,12,1,2,2,5,1,16,2,6,11,19,1,9,2,3,8,10,2,4,22,23,7,8,2,3,5,8,2,3,1,7,2,4,2,12,1,5,2,3,3,7,18,29,1,2,6,9,3,4,4,7,2,3,1,2,2,5,2,5,3,6,12,16,2,3,2,5,3,4,3,6,1,7,1,15,13,27,3,4,8,9,3,4,23,24,16,19,1,4,4,23,3,8,2,6,10,25,2,3,11,12,3,4,23,24,10,11,5,8,8,9,3,4,2,11,2,9,1,2,2,6,10,11,2,17,2,3,8,9,3,4,41,43,4,9,3,4,3,4,2,6,14,18,26,28,2,3,18,21,24,25,9,10,1,3,7,15,3,9,8,14,10,12,3,15,48,49,2,14,7,15,13,50,2,3,1,3,2,3,1,3,1,7,4,5,7,8,3,4,1,2,1,3,2,3,4,5,2,11,1,3,5,6,1,10,10,12,4,36,24,26,27,28,1,2,1,6,10,11,36,54,1,6,1,3,5,54,8,9,6,7,13,50,45,49,1,7,1,3,2,4,25,27,4,7,16,20,13,14,2,4,6,7,15,16,40,41,1,6,1,3,377,378,4,6,7,8,1,2,4,6,41,42,4,6,33,34,4,6,7,8,1,2,4,6,15,16,57,58,4,6,67,72,29,32,16,32,86,88,6,9,639,640,26,31,89,96,13,14,4,18,18,21,2,11,18,32,13,14,3,18,52,54,1,8,8,9,2,13,7,8,1,4,10,48,10,16,89,96,5,7,34,35,1,6,70,80,31,35,4,6,3,7,2,3,6,19,40,42,5,16,44,48,26,32,11,48,23,25,2,5,56,57,1,10,1,2,2,10,6,19,10,16,10,16,14,100,48,49,1,6,1,2,5,6,9,13,27,36,9,14,32,36,2,4,1,4,56,57,1,3,3,4,1,4,2,10,48,56,2,7,15,18,60,67,43,45,11,22,1,14,1,8,4,5,6,7,3,11,192,256,278,280,6,8,38,40,6,8,8,9,1,2,1,2,1,2,31,33,53,54,7,8,1,4,3,4,7,10,4,6,6,10,13,18,3,4,7,24,1,1,-1,98,1,14,1,17,13,114,1,5,1,3,10,11,1,4,5,11,1,2,1,2,1,2,4,5,11,13,4,9,5,9,2,18,41,470,69,95,1,263,78,528,1,340,256,1024,47,48,47,48,133,139,4,7,2,14,38,39,1,6,1,3,56,63,2,17,23,32,7,8,7,8,7,8,7,8,7,8,7,8,7,8,7,557,3,28,9,13,2,3,5,7,5,9,86,92,3,4,90,91,4,9,43,44,94,95,43,96,45,48,48,64,28,31,50,65,12,16,47,48,119,123,99,101,31,32,6582,6656,20976,20992,1165,1232,317,320,28,48,47,64,30,32,80,82,6,48,102,103,49,110,11,12,3,4,4,5,25,27,1,9,8,16,52,64,68,78,12,36,13,14,38,46,25,36,2,13,30,36,48,49,2,6,2,3,17,18,11,15,7,8,25,26,41,47,2,4,2,13,3,4,8,9,1,3,10,12,32,33,51,52,1,4,2,4,5,7,1,2,1,25,17,19,8,19,6,8,6,8,6,15,7,8,7,8,54,64,117,118,2,3,4,7,10,16,11172,11184,23,27,49,2101,6766,6768,106,144,7,19,5,10,-1,2,-10,11,-532,534,-144,176,-13,14,-2,114,-143,177,26,32,26,37,89,92,6,8,6,8,6,8,3,38,12,13,26,27,19,20,2,3,15,17,14,48,123,128,1,2,1,5,45,48,9,86,2,67,45,176,29,32,49,96,36,45,30,35,38,48,30,31,37,41,14,56,158,160,10,16,36,40,36,40,40,48,52,63,1,145,311,320,22,32,8,160,-287,288,-225,228,-1,3,-5,9,-40,43,-4,5,-165,167,-82,89,-484,488,-8,18,-294,325,-199,210,-175,175,1,2,54,69,7,31,10,28,49,53,2,4,7,18,1,3,25,32,10,19,36,41,1,10,17,26,35,36,3,14,52,61,10,14,1,3,16,17,20,31,18,19,28,31,2,3,1,3,6,72,7,8,1,2,4,5,15,16,11,17,47,48,3,16,10,18,2,3,8,10,2,4,22,23,7,8,2,3,5,8,3,4,4,6,2,4,3,5,1,7,1,6,7,163,56,64,2,5,1,2,19,20,1,2,1,35,51,57,1,2,4,6,1,3,4,12,10,176,50,56,4,6,1,3,27,63,51,59,2,3,1,3,4,15,10,48,43,44,1,2,2,8,1,10,10,64,27,32,2,6,1,10,16,208,47,56,1,3,1,101,83,95,1,257,1,7,2,4,40,46,2,6,8,17,1,7,2,5,40,42,4,17,1,3,9,38,57,320,9,10,38,52,8,18,29,32,32,57,1,8,1,3,1,76,7,8,2,3,38,59,1,10,10,16,6,7,2,3,37,41,2,3,1,2,1,8,10,320,19,21,4,267,922,1024,111,112,5,16,196,2944,1071,5120,583,9216,569,576,31,32,10,14,2,98,30,37,1,11,48,55,15,25,10,11,7,8,21,26,19,707,91,192,69,80,47,67,13,77,2,32,6130,6144,755,10240,287,368,396,2704,107,112,13,16,9,16,10,12,1,3,1,4961,246,256,39,41,62,65,9,25,2,9,30,34,59,306,20,128,25,160,85,86,71,72,2,4,1,3,2,4,4,5,12,13,1,2,7,8,65,66,4,6,8,9,7,8,28,29,4,5,5,6,1,4,7,8,340,342,51,52,57,58,57,58,57,58,57,58,8,60,512,567,4,54,8,9,14,15,7,3451,-208,215,-109,116,-1445,1447,-270,542,31,32,58,64,61,118,29,42,44,48,9,16,2,3504,42711,42752,4149,4160,222,224,5762,5776,7473,10576,542,788480,65534,65536,65534]")},98970:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseQueueMap=t.PromiseQueue=void 0;t.PromiseQueue=class{constructor(e=-1){this._promise=Promise.resolve(),this._maxDelay=e}wait(){return this._promise}enqueueHandlers(e,t,r){var i=this._promise.then((()=>e)).then(t,r),s=i.then();return this._promise=a(i,this._maxDelay),s}enqueue(e){var t=this._promise.then(e),r=t.then();return this._promise=a(t,this._maxDelay),r}};function a(e,t){return t>=0?new Promise((a=>{var r=()=>{a()};e.then(r,r),setTimeout(r,t)})):e.then(r,r)}function r(){}t.PromiseQueueMap=class{constructor(e=-1){this._map=new Map,this._maxDelay=e}waitIfPending(e){return this._map.get(e)}wait(e){return this._map.get(e)||Promise.resolve()}enqueueHandlers(e,t,a,r){var i=this.wait(e).then((()=>t)).then(a,r);return this._addToMap(e,i)}enqueue(e,t){var a=this.wait(e).then(t);return this._addToMap(e,a)}_addToMap(e,t){var r,i=t.then(),s=()=>{this._map.get(e)===r&&this._map.delete(e)};return r=a(t,this._maxDelay).then(s,s),this._map.set(e,r),i}}},73559:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.callSyncPromise=function(e,t,...a){return new Promise(((r,i)=>{try{r(e.apply(t,a))}catch(e){i(e)}}))}},68519:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encodeProto=function(e,t,a=new r.Binary){return(0,o.checkValid)(e,t),m(a,t,e),d=void 0,a},t.encodeErrorInfo=function(){return void 0!==d?"Last encoded value for ".concat(d):"No information known"};var r=a(46378),i=a(80802),s=a(45261),n=a(54219),o=a(26032),l=a(8320),d=void 0;function u(e,t){e.writeVarInt(t)}function c(e,t){if("number"==typeof t&&t<4503599627370496&&t>=-4503599627370496)e.writeVarInt(t>=0?2*t:2*-t-1);else{var a,i=new r.Binary;"number"==typeof t?(a=t<0,i.writeVarInt(a?-t:t)):(a=(0,l.hexLongIsNegative)(t),i.writeVarIntFromHexLong(a?(0,l.negateHexLong)(t):t));var s=i.peek((()=>i.readByteArray())),n=s.byteLength;if(a){var o,d=0;do{o=s[d],s[d]=128&o|(127&o)-1&127,d++}while(255===s[d-1])}for(var u=a?1:0,c=0;c<n;c++){var h=s[c],f=128&h|(63&h)<<1|u;u=(64&h)>>6,s[c]=f}1===u&&(s[n-1]|=128,i.writeInt8(1)),e.writeBinary(i)}}function h(e,t){"number"==typeof t?e.writeVarInt(t):e.writeVarIntFromHexLong(t)}var f=[void 0,u,h,u,h,c,c,(e,t)=>{e.writeVarInt(t?1:0)},u,(e,t)=>{"number"==typeof t?e.writeUint64(t,!0):e.writeHexLong(t,!0)},(e,t)=>{"number"==typeof t?e.writeInt64(t,!0):e.writeHexLong(t,!0)},(e,t)=>{e.writeFloat64(t,!0)},function(e,t){e.writeVarInt((0,r.numUtf8Bytes)(t)),e.writeString(t)},function(e,t){e.writeVarInt(t.byteLength),e.writeBuffer(t)},function(e,t,a){e.writeWithVarIntLength(((e,t)=>m(e,t,a)),t)},(e,t)=>{e.writeUint32(t,!0)},(e,t)=>{e.writeInt32(t,!0)},(e,t)=>{e.writeFloat32(t,!0)}],p=f.map((e=>{if(null!=e)return(e,a)=>{e.writeWithVarIntLength(t,a)};function t(t,a){for(var r=0;r<a.length;r++)e(t,a[r])}}));function m(e,t,a){for(var{names:r,fields:o,types:l,meta:u}=(0,i.compileSpec)(a),{internalDefaults:c}=a,h=0;h<r.length;h++){var m=r[h],_=t[m];if(void 0===_&&c&&(_=c[m]),void 0!==_){d=m;var v=o[h],g=l[h],E=g&s.TYPE_MASK,y=u[h],S=8*v|(0,n.typeToEncType)(g);if(g&s.FLAGS.PACKED){if(_.length>0)e.writeVarInt(S),(0,p[E])(e,_,y)}else if(g&s.FLAGS.REPEATED)for(var C=0;C<_.length;C++){e.writeVarInt(S),(0,f[E])(e,_[C],y)}else{e.writeVarInt(S),(0,f[E])(e,_,y)}}}}},79255:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findSuspiciousCharacters=function(e,t,a,o){var l,h=e.split("."),f=!1;if(h.forEach((e=>{if(f=!e.match(c)){if(l)return null;l=e}})),null==l||f)return null;for(var p=[],m=!0,_=(0,r.toArray)(l),v=0;v<_.length;v++){var g=_[v];if(!(m=m&&u(g))&&s[g]){if(p.length>=2)return null;p.push(g)}}if(m)return d(a)||d(t)||o.some((e=>function(e){return n.has(e)}(e)))?null:new Set(_);if(!p.length)return null;var E=p.filter((e=>{var r=s[e];if(null==r)return!1;if(o.some((e=>r.includes(e))))return!1;for(var n=new Set,l=0;l<r.length;l++){var d=i.LANGUAGE_TO_REGIONS[r[l]];if(null!=d)for(var u=0;u<d.length;u++)n.add(d[u])}return!n.has(a)&&!n.has(t)}));return E.length?new Set(E):null};var r=a(10462),i=a(88477),s={í:["ast","ksf","bas","ca","cs","dua","nl","ee","ewo","fo","fr","gl","kl","hu","is","ga","dyo","kea","kkj","nmg","lkt","lag","ln","lu","mas","nnh","jgo","pt","qu","seh","sk","es","to","vai","vi","wae","cy","fy","yav","yo"],î:["af","agq","bss","bfd","bas","bkv","btt","nl","igb","ewo","fr","fur","gaj","gby","kl","jab","atg","jbu","kkj","naq","ksh","ku","nmb","lmp","ln","mda","mg","mas","mzm","jgo","nin","ann","ro","sg","scn","srn","yer","tr","wa","cy","yav","yle"],ü:["agg","ast","az","br","ca","co","cs","nl","etr","et","fr","gl","de","tof","god","hu","tbd","geb","ksh","kup","nds","lb","arn","oc","sg","sk","es","gsw","dts","tr","tk","vo","wa","wae","fy","yll"],ċ:["mt"],ī:["agq","bss","bfd","bas","bkv","btt","ddn","igb","kjy","ich","gux","haw","jab","iby","idu","jbu","kub","nmg","lv","mda","mi","mas","mql","nin","prg","gd","to","yba","yav"],ı:["az","crh","tr"],ļ:["lv"],ł:["dsb","nv","pl","hsb"],š:["bs","hr","cs","dzg","et","fi","smn","geb","khq","ses","kun","lkt","lv","lt","dsb","se","nso","prg","sr","sh","sms","sk","sl","taq","twq","tuq","hsb","wqe","dje"],ƙ:["ckl","ank","ha","ikx","kai","hia","mbu","anc","nin","pip","tal","tan","wja","wji"],ǀ:["naq"],ǁ:["naq"],ȯ:["liv"],ɑ:["fmp","dud","tmh"],ɓ:["fub","yay","bkc","bjt","bcn","bas","bsq","bmq","fue","bys","bwr","cky","fuq","ckl","asg","dbq","dnj","dgh","dow","dua","enn","ff","gby","gba","gmm","ank","gde","gkp","jgk","ha","hbb","ikx","kkj","hig","kzr","kai","kpe","nmg","hia","ffm","mbo","mbu","mif","mzm","mua","sur","anc","fuv","nin","dgi","pbi","pip","fuf","cla","sav","srr","sld","sok","tal","tan","yer","ttr","tik","kdl","tsw","vai","vut","wja","wji","fuh","gnd"],ḍ:["tzm","kab","okr","shi","tmh","taq"],ṛ:["tzm","kab","shi"],ṭ:["tzm","kab","shi","tmh","taq"],ẉ:[],ạ:["izi","yaz","blt","vi"],ẹ:["yay","bom","bin","mfn","dzg","igb","enn","gkn","iby","ikk","ikw","izi","okr","yaz","blt","tan","tuq","vi","yo"],ị:["avu","mfn","igb","enn","iby","ig","ige","ikk","ikw","izi","okr","blt","tan","vi"]},n=new Set(["abq","ab","ady","av","az","ba","be","bs","bg","bua","ce","ckt","cu","cv","crh","dar","dng","myv","evn","gag","inh","kbd","xal","krc","kaa","kk","kjh","kca","ky","kv","koi","kpy","kum","lbe","lez","mk","mns","chm","mdf","mn","ttt","gld","yrk","nog","os","ru","rue","sr","sh","cjs","alt","tab","tg","tt","tkr","tk","tyv","ude","udm","uk","uz","mrj","sah"]),o=new Set(["374","994","375","387","359","995","7","383","996","389","373","976","382","381","992","993","380","998"]),l="авгекмнорстухшщьѕіјѡѵүһӏԁԛԝԧꚙ";function d(e){return o.has(e)}function u(e){return l.includes(e)}var c=new RegExp("^[a-z0-9-]+$")},88477:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LANGUAGE_TO_REGIONS=void 0;t.LANGUAGE_TO_REGIONS={fub:["237","235","234"],af:["237","27"],agq:["237"],yay:["234"],bss:["237"],agg:["675"],ast:["34"],avu:["243","211"],az:["994"],bkc:["237","241"],ksf:["237"],bfd:["237"],bjt:["221"],bcn:["234"],bas:["237"],bsq:["231"],bkv:["234"],bom:["234"],btt:["234"],bin:["234"],bmq:["226","223"],bs:["387","385","383","382","381"],fue:["229","228"],br:["33"],bys:["234"],bwr:["234"],cky:["234"],ca:["376","33","39","34"],tzm:["212"],fuq:["234"],ckl:["234"],asg:["234"],co:["33","39"],crh:["7"],hr:["387","385","383","382","381"],mfn:["234"],cs:["420","421"],dbq:["237","234"],dnj:["225","231"],dzg:["235","227"],ddn:["229"],dgh:["234"],dow:["237"],dua:["229"],nl:["297","32","599","31","1","597"],igb:["234"],etr:["675"],enn:["234"],kgy:["675"],et:["372"],ich:["234"],ee:["229","233","228"],ewo:["237"],fo:["298"],fmp:["237"],fi:["358","46"],fr:["32","229","226","257","237","1","236","242","243","235","269","253","240","33","241","509","225","352","261","223","377","227","250","221","248","41","228","678"],fur:["39"],ff:["237","224","222","221"],gaj:["675"],gl:["34"],gby:["234"],gba:["236"],gmm:["237"],de:["43","32","49","423","352","41"],tof:["675"],god:["225"],ank:["234"],gkn:["234"],gux:["229","226","227","228"],gde:["237","234"],gkp:["224"],kl:["299"],jgk:["234"],ha:["229","237","235","233","225","227","234","249","228"],haw:["1"],hbb:["234"],hu:["36"],dud:["234"],jab:["234"],iby:["234"],is:["354"],idu:["234"],ig:["240"],ige:["234"],ikx:["256"],ikk:["234"],ikq:["234"],smn:["358"],ga:["353","44"],atg:["234"],izi:["234"],dyo:["220","221"],jbu:["237","234"],kab:["213"],kea:["238"],tbd:["675"],hig:["234"],kai:["234"],kkj:["237","236","242"],kzr:["237","235"],naq:["264"],geb:["675"],okr:["234"],ksh:["49"],ses:["223"],khq:["223"],kun:["291","251"],kup:["675"],kub:["237","234"],kpe:["224","231"],nmg:["237","240"],ku:["963","90"],lkt:["1"],hia:["234"],lag:["255"],lv:["371"],lmp:["237"],ln:["242","243"],liv:[],lt:["370"],yaz:["234"],nds:["55","49","31"],dsb:["49"],lu:["243"],lb:["32","33","49","352"],mda:["234"],mb:["261"],mt:["356"],mi:["64"],arn:["56"],mas:["254","255"],ffm:["223"],mql:["229","228"],mbo:["237"],mbu:["234"],mif:["237"],mzm:["234"],mua:["237","235"],sur:["234"],nv:["1"],anc:["234"],nnh:["237"],jgo:["237"],fuv:["237","234"],nin:["234"],dgi:["226"],se:["358","46","47"],nso:["27"],ann:["234"],oc:["33","39","377","34"],pbi:["237"],pip:["234"],pl:["48"],pt:["244","55","238","240","245","853","258","351","239","670"],prg:[],fuf:["224","223","221","232"],qu:["54","591","57","593","51"],ro:["373","40"],cla:["234"],sav:["221"],sg:["236","235","243"],gd:["44"],seh:["258"],sr:["387","385","383","382","381"],sh:["387","385","383","382","381"],srr:["220","221"],sch:["39"],sld:["226"],sms:["358"],sk:["420","421"],sl:["386"],sok:["235"],es:["54","501","591","56","57","506","53","593","503","240","502","504","52","505","507","595","51","34","1","598","58"],srn:["597"],gsw:["43","33","49","423","41"],shi:["212"],tal:["234"],tmh:["223"],taq:["226","223"],tan:["234"],twq:["227"],blt:["856","84"],yer:["234"],tuq:["235","218","227","234"],ttr:["234"],tik:["237"],to:["676"],dts:["223"],kdl:["234"],tsw:["234"],tr:["90"],tk:["993"],hsb:["49"],vai:["231","232"],vi:["855","84"],vo:[],vut:["237","234"],wja:["234"],wa:["32"],wae:["43","39","423","41"],wji:["234"],cy:["44"],fy:["31"],fuh:["229","226","227"],yba:["234"],yav:["237"],yle:["675"],yll:["675"],yo:["229","234"],dje:["227"],gnd:["237"]}},24569:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findSuspiciousCharacters=function(e,t,a,n){var o=e.match(s),l=o&&o[1];if(null==l)return null;var d=(0,i.phoneCC)(a),u="whatsapp"===t?"":(0,i.phoneCC)(t),c=n.map((e=>e.toLowerCase()));return(0,r.findSuspiciousCharacters)(l,u,d,c)};var r=a(79255),i=a(28721),s=/^(?:https?:\/\/)?([^/?#]+)(?:[/?#]|$)/i},99774:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.queryBusinessProfile=function(e){return(0,i.queryBusinessProfile)(e)},t.queryBusinessCategories=function(e){return e===r.BUSINESS_CATEGORY_EMPTY_STR_ID?(0,s.queryBusinessCategories)(""):(0,s.queryBusinessCategories)(e)};var r=a(95167),i=a(59998),s=a(45618)},93774:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.addProductToCart=function(e){var{id:t,priceAmount1000:a,currency:r,name:i,imageHash:s}=e,n=e.catalogWid.toString(),o=d.default.findCart(n),l=o.cartItemCollection.get(t),u=(null==l?void 0:l.quantity)||0,h=Math.min(u+1,c.MAX_QUANTITY);o.cartItemCollection.add({id:t,priceAmount1000:a,currency:r,name:i,imageHash:s,quantity:h},{merge:!0}),o.trigger("change:cartItemCollection");var f=u+1>c.MAX_QUANTITY?T.QUANTITY_LIMIT_REACHED:T.SUCCESS;return A(o),{newCount:h,status:f}},t.updateProductQuantity=function(e,t,a){var r=d.default.findCart(e),i=r.cartItemCollection.get(t.id);null==i||i.set("quantity",a),r.trigger("change:cartItemCollection"),A(r)},t.deleteProductFromCart=function(e,t){var a=d.default.findCart(e);return a.cartItemCollection.remove(t),a.trigger("change:cartItemCollection"),A(a),a.itemCount},t.clearCart=M,t.updateCartMessage=function(e,t){e.set("message",t),A(e)},t.submitOrder=function(){return b.apply(this,arguments)},t.parsePrice=N,t.isPriceMatch=w,t.matchCartItemsToProducts=function(){return R.apply(this,arguments)},t.showGenericErrorToast=function(){f.default.openToast(n.createElement(y.default,{msg:_.default.t(414),duration:6e3,id:(0,y.genId)()}))},t.pullCartUpdate=k,t.showCart=function(e,t,a){return(0,u.showCartFlow)(e,t,a)},t.createProductFromRefreshCartItem=x,t.checkCartEnabled=function(){return F.apply(this,arguments)},t.AddToCartStatus=void 0;var s=i(a(52954)),n=r(a(2784)),o=i(a(89216)),l=a(78091),d=i(a(99601)),u=a(90440),c=a(69160),h=i(a(65468)),f=i(a(79711)),p=i(a(9386)),m=a(75459),_=i(a(17957)),v=a(47296),g=i(a(37163)),E=i(a(55009)),y=r(a(75074)),S=a(11419),C=a(75637),T=a(28103).Mirrored(["SUCCESS","QUANTITY_LIMIT_REACHED"]);function M(e){e.cartItemCollection.reset(),e.set("message",void 0),e.trigger("change:cartItemCollection"),A(e)}function b(){return(b=(0,s.default)((function*(e,t){var a=yield(0,v.createOrder)(t.id,e.cartItemCollection.toArray());return yield(0,E.default)(t,a,e.itemCount,P(e),e.message),A(e),a.id}))).apply(this,arguments)}function P(e){var t,a,r=e.cartItemCollection.at(0);if(null==r)return"";var i=h.default.get((0,C.createWid)(e.id)),s=null==i?void 0:i.productCollection.get(r.id),n=null==s||null===(t=s.productImageCollection.at(0))||void 0===t?void 0:t.mediaData;if(null==n)return"";var o=null===(a=n.preview)||void 0===a?void 0:a.getBase64();return null!=o?o:""}function A(e){return(0,l.updateCart)(e)}function I(e,t){var a=function(e,t){return e.priceAmount1000===t.priceAmount1000&&e.currency===t.currency&&e.name===t.name&&e.imageHash===t.imageHash}(e,t);return a||e.set({priceAmount1000:t.priceAmount1000,currency:t.currency,name:t.name,imageHash:t.imageHash},{silent:!0}),a}function O(e,t){var a,r,i=!t||function(e,t){var a,r;return w(e.priceAmount1000,t.price)&&e.currency===t.currency&&e.name===t.name&&e.imageHash===(null===(a=t.media)||void 0===a||null===(r=a.image)||void 0===r?void 0:r.id)}(e,t);!i&&t&&e.set({priceAmount1000:N(t.price),currency:t.currency,name:t.name,imageHash:null===(a=t.media)||void 0===a||null===(r=a.image)||void 0===r?void 0:r.id},{silent:!0});return i}function N(e){return(0,S.isString)(e)&&e.length>0?parseInt(e,10):e}function w(e,t){var a=N(e),r=N(t);return(0,S.isNumber)(a)&&(0,S.isNumber)(r)?a===r:!(0,S.isNumber)(a)&&!(0,S.isNumber)(r)}function D(e,t){if(!e||"deleted"!==e.status)return e;t.productCollection.remove(e.id)}function R(){return(R=(0,s.default)((function*(e,t){var a=h.default.get((0,C.createWid)(e.id)),r=[],i=[],s=!0,n=void 0;return t&&(n=yield k(e)),a&&e.cartItemCollection.forEach((o=>{var l=a.productCollection.get(o.id),d=n&&n.products.find((e=>e.id===o.id));if(d=D(d,a),!t&&l){var u=I(o,l);s=s&&u,r.push({product:l,cartItem:o})}else if(t&&d){var c=O(o,d);s=s&&c,r.push({product:x(d,e.id),cartItem:o})}else s=!1,i.push(o.id)})),a||M(e),s||(i.length&&e.cartItemCollection.remove(i),e.trigger("change:cartItemCollection"),L()),A(e),Promise.resolve(r)}))).apply(this,arguments)}function L(){f.default.openModal(n.createElement(p.default,{onOK:()=>{f.default.closeModal()}},_.default.t(406)))}function k(e){if(0===e.cartItemCollection.length)return Promise.resolve({products:[],price:{}});var t=e.cartItemCollection.map((e=>e.id));return(0,l.refreshCart)(e.id,t,d.default.imageWidth,d.default.imageHeight)}function x(e,t){var a,r,i,s;return new g.default({catalogWid:(0,C.createWid)(t),id:e.id,name:e.name,imageCdnUrl:null===(a=e.media)||void 0===a||null===(r=a.image)||void 0===r?void 0:r.request_image_url,imageHash:null===(i=e.media)||void 0===i||null===(s=i.image)||void 0===s?void 0:s.id,currency:e.currency,priceAmount1000:e.price,productMsgMediaData:null,imageCount:1,fetchedFromServer:!0,t:Date.now()/1e3,old:!1})}function F(){return(F=(0,s.default)((function*(e){var t;if(!(0,m.cartPropEnabled)())return!1;var a=o.default.get(e);if(!a||a.stale){var r=yield o.default.update(e);a=Array.isArray(r)?r[0]:r}return(null===(t=a.profileOptions)||void 0===t?void 0:t.cartEnabled)||!1}))).apply(this,arguments)}t.AddToCartStatus=T},70750:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.sendDelete=function(e){return _((0,f.unproxy)(e))};var s=i(a(19976)),n=r(a(2784)),o=a(12073),l=a(46774),d=i(a(79711)),u=a(60383),c=i(a(18120)),h=i(a(17957)),f=a(64658);function p(){var e=(0,s.default)(["models:chat:sendDelete dropped"]);return p=function(){return e},e}function m(e){var t;switch(e){case l.KIND.GROUP:t=h.default.t(98);break;case l.KIND.BROADCAST:t=h.default.t(47);break;case l.KIND.CHAT:default:t=h.default.t(59)}return new o.ActionType(t)}function _(e){if(e.promises.sendDelete)return e.promises.sendDelete;var t=e.getLastMsgKeyForAction(),a=t?e.msgs.get(t):void 0,r=e.promises.sendDelete=(0,u.sendConversationDelete)(e.id,t,e.getLastMsgKeyForAction.bind(e)),i=e.kind,s=r.then((function(e){if(200===e.status)switch(i){case l.KIND.GROUP:return c.default.supportsFeature(c.default.F.MD_BACKEND)?new o.ActionType(h.default.t(97)):new o.ActionType(h.default.t(96));case l.KIND.BROADCAST:return c.default.supportsFeature(c.default.F.MD_BACKEND)?new o.ActionType(h.default.t(46)):new o.ActionType(h.default.t(45));case l.KIND.CHAT:return c.default.supportsFeature(c.default.F.MD_BACKEND)?new o.ActionType(h.default.t(58)):new o.ActionType(h.default.t(57))}else if(e.status>=400)switch(i){case l.KIND.GROUP:return new o.ActionType(h.default.t(95));case l.KIND.BROADCAST:return new o.ActionType(h.default.t(44));case l.KIND.CHAT:return new o.ActionType(h.default.t(56))}})).catch((function(){var t;switch(__LOG__(3)(p()),i){case l.KIND.GROUP:t=h.default.t(95);break;case l.KIND.BROADCAST:t=h.default.t(44);break;case l.KIND.CHAT:default:t=h.default.t(56)}return new o.ActionType(t,{actionText:h.default.t(195),actionHandler:()=>_(e)})}));return d.default.openToast(n.createElement(o.ActionToast,{id:(0,o.genId)(),initialAction:m(i),pendingAction:s})),r.then((function(r){if(200===r.status&&!r._duplicate){var i=e.getLastMsgKeyForAction();t&&t.equals(i)||t===i?e.delete():e.deleteMsgsBeforeMsgInclusive(a)}})).finally((()=>{e.promises.sendDelete=null}))}},74253:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.updateEphemeralSettingTimestamp=T,t.changeEphemeralDuration=function(e,t){if(e.isGroup)return __LOG__(4,void 0,new Error,!0)(y(),e.id.toString()),SEND_LOGS("change-ephemeral-duration"),Promise.resolve();var a=e.contact;if(a.isUser&&a.isContactBlocked)return Promise.reject(new o.default("changing ephemeral setting for contact is blocked",a));var r={id:new c.default({id:(0,h.default)(),remote:e.id,fromMe:!0}),from:(0,l.getMaybeMeUser)(),to:e.id,t:s.default.globalUnixTime(),type:n.default.MSG_TYPE.PROTOCOL,subtype:"ephemeral_setting",ephemeralDuration:t,local:!0,isNewMsg:!0,self:"out"},i=null==e.ephemeralSettingTimestamp?1:e.ephemeralSettingTimestamp+1;return T(e,i),(0,f.addAndSendMsgToChat)(e,r)[1].then((()=>(0,m.updateLocal)(e.id,{ephemeralDuration:t}).then((()=>{e.ephemeralDuration=t,__LOG__(2)(E(),e.id.toString(),t)}))))},t.maybeUpdateEphemeralSetting=function(e,t,a,r=!0){var i,s;if(e.isGroup)return __LOG__(4,void 0,new Error,!0)(g(),e.id.toString()),SEND_LOGS("handle-ephemeral-sync-response"),!1;if(!(0,u.isEphemeralDurationAllowed)(t))return __LOG__(2)(v(),t,e.id.toString()),!1;var n=null!==(i=e.ephemeralSettingTimestamp)&&void 0!==i?i:0,o=null!==(s=e.ephemeralDuration)&&void 0!==s?s:0,l=e.id,c=(0,p.shouldUpdateEphemeralSetting)({oldDuration:o,oldSettingTimestamp:n,newDuration:t,newSettingTimestamp:a,chatId:l});c&&(0,m.updateLocal)(e.id,{ephemeralDuration:t,ephemeralSettingTimestamp:a}).then((()=>{o!==t&&r&&(0,d.generateEphemeralSystemMessage)(e,t),e.ephemeralDuration=t,e.ephemeralSettingTimestamp=a,__LOG__(2)(_(),e.id.toString(),t,a)}));return c};var i=r(a(19976)),s=r(a(19899)),n=r(a(50935)),o=r(a(64357)),l=a(95595),d=a(74404),u=a(38822),c=r(a(77865)),h=r(a(49213)),f=a(95721),p=a(44989),m=a(82373);function _(){var e=(0,i.default)(["chat.maybeUpdateEphemeralSetting updated chatId="," ephemeralDuration="," ephemeralSettingTimestamp=",""]);return _=function(){return e},e}function v(){var e=(0,i.default)(["chat.maybeUpdateEphemeralSetting called with invalid setting "," seconds for chat ",""]);return v=function(){return e},e}function g(){var e=(0,i.default)(["chat.maybeUpdateEphemeralSetting should not be called for group ",""]);return g=function(){return e},e}function E(){var e=(0,i.default)(["chat.changeEphemeralDuration chatId="," ephemeralDuration=",""]);return E=function(){return e},e}function y(){var e=(0,i.default)(["chat.changeEphemeralDuration should not be called for group ",""]);return y=function(){return e},e}function S(){var e=(0,i.default)(["chat.updateEphemeralSettingTimestamp chatId="," ephemeralSettingTimestamp=",""]);return S=function(){return e},e}function C(){var e=(0,i.default)(["chat.updateEphemeralSettingTimestamp should not be called for group ",""]);return C=function(){return e},e}function T(e,t){if(e.isGroup)return __LOG__(4,void 0,new Error,!0)(C(),e.id.toString()),void SEND_LOGS("update-ephemeral-setting-timestamp");(0,m.updateLocal)(e.id,{ephemeralSettingTimestamp:t}).then((()=>{e.ephemeralSettingTimestamp=t,__LOG__(2)(S(),e.id.toString(),t)}))}},31659:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){var r=(0,l.getMaybeMeUser)(),h=e.msgContextInfo(a.id),f=(0,i.default)((0,i.default)({type:"buttons_response",ack:n.default.ACK.CLOCK,from:r,id:new d.default({from:r,to:a.id,id:(0,u.default)(),participant:void 0,selfDir:"out"}),local:!0,isNewMsg:!0,self:"out",t:s.default.globalUnixTime(),to:a.id},h),{},{buttonsResponse:{selectedButtonId:t.id,selectedDisplayText:t.displayText,type:o.ButtonsResponseMessageType.DISPLAY_TEXT},body:t.displayText||""});return(0,c.addAndSendMsgToChat)(a,f)[1]};var i=r(a(70417)),s=r(a(19899)),n=r(a(50935)),o=a(28703),l=a(95595),d=r(a(77865)),u=r(a(49213)),c=a(95721);a(59420)},46638:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.sendClear=function(e,t){return m((0,f.unproxy)(e),t)},t.clearChat=_;var s=i(a(19976)),n=r(a(2784)),o=a(12073),l=a(16059),d=i(a(79711)),u=a(19741),c=i(a(18120)),h=i(a(17957)),f=a(64658);function p(){var e=(0,s.default)(["models:chat:sendClear dropped"]);return p=function(){return e},e}function m(e,t){var{promises:a}=e;if(a.sendClear)return a.sendClear;var r=e.getLastMsgKeyForAction(),i=a.sendClear=(0,l.sendClear)(e,r,t),s=new o.ActionType(h.default.t(55)),f=i.then((()=>c.default.supportsFeature(c.default.F.MD_BACKEND)?new o.ActionType(h.default.t(54)):new o.ActionType(h.default.t(53)))).catchType(u.ServerStatusCodeError,(e=>{if(e.status>=400)return new o.ActionType(h.default.t(52))})).catch((()=>(__LOG__(3)(p()),new o.ActionType(h.default.t(52),{actionText:h.default.t(195),actionHandler:()=>m(e,t)}))));return d.default.openToast(n.createElement(o.ActionToast,{id:(0,o.genId)(),initialAction:s,pendingAction:f})),i.then((a=>{a._duplicate||_(e,t)})).catchType(u.ServerStatusCodeError,(()=>{})).finally((()=>{a.sendClear=null}))}function _(e,t){if(e){var a=e.getLastMsgKeyForAction(),r=a?e.msgs.get(a):void 0;e.deleteMsgsBeforeMsgInclusive(r,t)}}},63505:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=e.chat,r=e.msgContextInfo(a.id),h=(0,l.getMaybeMeUser)(),f=(0,i.default)((0,i.default)({type:"list_response",ack:n.default.ACK.CLOCK,from:h,id:new d.default({from:h,to:a.id,id:(0,u.default)(),participant:void 0,selfDir:"out"}),local:!0,isNewMsg:!0,self:"out",t:s.default.globalUnixTime(),to:a.id},r),{},{listResponse:{listType:o.ListResponseMessageListType.SINGLE_SELECT,title:t.title,description:t.description,singleSelectReply:{selectedRowId:t.rowId}},body:(t.title||"")+(t.description?"\n".concat(t.description):"")});return(0,c.addAndSendMsgToChat)(a,f)[1]};var i=r(a(70417)),s=r(a(19899)),n=r(a(50935)),o=a(28703),l=a(95595),d=r(a(77865)),u=r(a(49213)),c=a(95721);a(59420)},95721:(e,t,a)=>{"use strict";var r=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.addAndSendMsgToChat=function(e,t,r){return function(e,t,r){var n=Promise.resolve(t).then((t=>{var r=a(58885).default.add(t)[0];if(r)return(0,s.storeMessages)([t],e.id).then((()=>r.waitForPrep().then((()=>r))));throw new i.ModelCreateError("Msg",t)})),o=e.addQueue.enqueue(n).then((t=>e.msgs.add(t)[0])),d=r?o.then(r).then((()=>o)):o,u=l(e,d);return[o,u]}((0,o.unproxy)(e),t,r)},t.sendMsgToChat=function(e,t){return l((0,o.unproxy)(e),t)};var i=r(a(96452)),s=a(12425),n=a(45591),o=(a(59420),a(64658));function l(e,t){return e.sendQueue.enqueue(t).then((e=>(0,n.sendMsgRecord)(e)))}},55009:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,r,i){var m=(0,o.getMaybeMeUser)(),_=function(e,t,a,r,i){var u=(0,o.getMaybeMeUser)(),c={type:"order",ack:n.default.ACK.CLOCK,from:u,id:new l.default({from:u,to:e.id,id:(0,d.default)(),participant:void 0,selfDir:"out"}),local:!0,isNewMsg:!0,self:"out",t:s.default.globalUnixTime(),to:e.id,orderId:t.id,token:t.token,orderTitle:e.name||e.formattedTitle,sellerJid:e.id.toString({legacy:!0}),thumbnail:r,itemCount:a,message:i},h=t.price.total;h&&h.length>0&&(c.totalAmount1000=parseInt(h,10));t.price.currency&&t.price.currency.length>0&&(c.totalCurrencyCode=t.price.currency);return c}(e,t,a,r,i);if(h.default.equals(e.id,m))return(0,u.addAndSendMsgToChat)(e,_)[0].then((()=>{})).catch((e=>{throw __LOG__(3)(p(),e),e}));return(0,u.addAndSendMsgToChat)(e,_)[1].then((e=>{if(!e||e!==c.SendMsgResult.OK)throw new Error("Order message SendMsgResult failure status")})).catch((e=>{throw __LOG__(3)(f(),e),e}))};var i=r(a(19976)),s=r(a(19899)),n=r(a(50935)),o=a(95595),l=r(a(77865)),d=r(a(49213)),u=a(95721),c=a(59420),h=r(a(68384));function f(){var e=(0,i.default)(["Order message send to chat failure: ",""]);return f=function(){return e},e}function p(){var e=(0,i.default)(["Order message send to chat failure: ",""]);return p=function(){return e},e}},89590:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.sendSpamReport=function(e,t){return S((0,v.unproxy)(e),t)},t.sendNotSpam=function(e,t){return C((0,v.unproxy)(e),t)},t.sendSpamBlockClear=function(e){return function(e){var{promises:t,isGroup:a,contact:r}=e;if(t.reportSpamBlockClear)return t.reportSpamBlockClear;if(a)return Promise.reject(new c.ActionError);var i=S(e,_.SpamFlow.Block);return t.reportSpamBlockClear=i.then((()=>(0,l.blockContact)(r))).then((()=>(0,p.sendClear)(e,!1))).catch((()=>{})).finally((()=>{t.reportSpamBlockClear=null})),t.reportSpamBlockClear}((0,v.unproxy)(e))},t.sendSpamExitClear=function(e){return function(e){var t,{promises:a,isGroup:r,isReadOnly:i,msgs:s}=e;if(a.reportSpamExitClear)return a.reportSpamExitClear;if(!r)return Promise.reject(new c.ActionError);var n=S(e,_.SpamFlow.Block);if(i)t=n;else{var o=(0,h.sendExitGroup)(e),l=(0,g.default)(s,"change:last",(e=>e.isGroupLeave()));t=Promise.all([n,o,l])}return a.reportSpamExitClear=t.then((()=>(0,p.sendClear)(e,!1))).catch((()=>{})).finally((()=>{a.reportSpamExitClear=null})),a.reportSpamExitClear}((0,v.unproxy)(e))};var s=i(a(19976)),n=r(a(2784)),o=a(12073),l=a(43322),d=i(a(79711)),u=a(19741),c=r(a(96452)),h=a(71142),f=i(a(17957)),p=a(46638),m=a(52354),_=a(25995),v=a(64658),g=i(a(17744));function E(){var e=(0,s.default)(["models:chat:sendNotSpam dropped"]);return E=function(){return e},e}function y(){var e=(0,s.default)(["models:chat:sendSpamReport dropped"]);return y=function(){return e},e}function S(e,t,a=(0,o.genId)()){var{promises:r}=e;if(r.sendSpamReport)return r.sendSpamReport;var i=r.sendSpamReport=(0,m.sendSpamReport)(e,t),s=new o.ActionType(f.default.t(188)),l=i.then((()=>new o.ActionType(f.default.t(190)))).catchType(u.ServerStatusCodeError,(()=>new o.ActionType(f.default.t(189)))).catch((()=>(__LOG__(3)(y()),new o.ActionType(f.default.t(189),{actionText:f.default.t(195),actionHandler:()=>S(e,t,a)}))));return d.default.openToast(n.createElement(o.ActionToast,{id:a,initialAction:s,pendingAction:l})),i.finally((()=>{r.sendSpamReport=null}))}function C(e,t=!1,a=(0,o.genId)()){var{promises:r,notSpam:i}=e;if(i)return Promise.resolve();if(r.sendNotSpam)return r.sendNotSpam;var s=r.sendNotSpam=(0,m.sendNotSpam)(e);if(t){var l=new o.ActionType(f.default.t(135)),c=s.then((()=>new o.ActionType(f.default.t(137)))).catchType(u.ServerStatusCodeError,(()=>new o.ActionType(f.default.t(136)))).catch((()=>(__LOG__(3)(E()),new o.ActionType(f.default.t(136),{actionText:f.default.t(195),actionHandler:()=>C(e,t,a)}))));d.default.openToast(n.createElement(o.ActionToast,{id:a,initialAction:l,pendingAction:c}))}return s.then((()=>{e.set({notSpam:!0})})).finally((()=>{e.isTrusted(),r.sendNotSpam=null}))}},37960:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.sendTextMsgToChat=function(e,t,a={}){return function(e,t,a={}){var r=(t||"").trim(),{linkPreview:g,quotedMsg:E,mentionedJidList:y,quotedMsgAdminGroupJid:S,selectedId:C,selectedIndex:T,ctwaContext:M}=a;if(""===r)return Promise.resolve();(0,p.clearPresence)(e);var b=e.id,P=(0,l.getMaybeMeUser)(),A=void 0;d.default.supportsFeature(d.default.F.MD_BACKEND)||(A=void 0);var I,O=new f.default({from:P,to:b,id:(0,m.default)(),participant:A,selfDir:"out"});E?I=E.msgContextInfo(e.id):S&&(I={quotedRemoteJid:S});var N=(0,s.default)({id:O,body:r,type:"chat",subtype:g&&!(0,i.default)(g)?"url":null,t:n.default.globalUnixTime(),from:P,to:b,self:"out",isNewMsg:!0,local:!0,ack:o.default.ACK.CLOCK,urlText:e.urlText,urlNumber:e.urlNumber},g||{},I||{},{mentionedJidList:y},{ctwaContext:M});e.urlText&&(e.urlText=void 0);e.urlNumber&&(e.urlNumber=void 0);null!=T&&(N.type="template_button_reply",N.selectedId=C,N.selectedIndex=T);if(v.default.ephemeralMessages&&N.type!==o.default.MSG_TYPE.PROTOCOL){e.isEphemeralSettingOn()&&(N.ephemeralDuration=e.getEphemeralSetting());var w=e.getEphemeralSettingTimestamp();null!=w&&(N.ephemeralSettingTimestamp=w)}var D=new h.default(N);e.msgs.add(D),E&&E.type===o.default.MSG_TYPE.PRODUCT&&(0,u.logProductMessageBusinessSend)(E,E.sessionId);return(0,c.storeMessages)([N],e.id).then((()=>(0,_.sendMsgRecord)(D)))}((0,g.unproxy)(e),t,a)};var i=r(a(45455)),s=r(a(84573)),n=r(a(19899)),o=r(a(50935)),l=a(95595),d=r(a(18120)),u=a(83974),c=a(12425),h=r(a(27e3)),f=r(a(77865)),p=a(207),m=r(a(49213)),_=a(45591),v=(a(59420),r(a(72424))),g=a(64658)},1767:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.unstarAllMessages=function(e,t){return _(e,t?(0,p.unproxy)(t):t)};var s=i(a(19976)),n=r(a(2784)),o=a(12073),l=i(a(79711)),d=a(19741),u=i(a(17957)),c=a(78475),h=i(a(72852)),f=r(a(63095)),p=a(64658);function m(){var e=(0,s.default)(["models:chat:sendUnstarAll dropped"]);return m=function(){return e},e}function _(e,t){var r=a(43334).default,i=t?t.promises:r.promises,s=t?t.id:void 0;if(i.sendUnstarAll)return i.sendUnstarAll;var p=i.sendUnstarAll=(0,c.sendUnstarAll)(e,s),v=new o.ActionType(u.default.t(152)),g=p.then((()=>new o.ActionType(u.default.t(150)))).catchType(d.ServerStatusCodeError,(e=>{if(e.statusCode>=400)return new o.ActionType(u.default.t(146))})).catch((()=>(__LOG__(3)(m()),new o.ActionType(u.default.t(146),{actionText:u.default.t(195),actionHandler:()=>_(e,t)}))));return l.default.openToast(n.createElement(o.ActionToast,{id:(0,o.genId)(),initialAction:v,pendingAction:g})),p.then((()=>{e.forEach((e=>{e.set("star",!1)})),t?(0,f.removeStarredMsgs)(e):(f.default.reset(),h.default.reset(),r.forEach((e=>{e.starredMsgs&&e.starredMsgs.reset()})))})).finally((()=>{i.sendUnstarAll=null}))}},32544:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.setArchive=function(e,t){return p((0,h.unproxy)(e),t)};var s=i(a(19976)),n=r(a(2784)),o=a(12073),l=a(69227),d=i(a(79711)),u=r(a(96452)),c=i(a(17957)),h=a(64658);function f(){var e=(0,s.default)(["models:chat:setArchive dropped"]);return f=function(){return e},e}function p(e,t,a=(0,o.genId)()){if(e.archive===t)return Promise.reject(new u.ActionError);var{promises:r}=e;if(r.setArchive)return r.setArchive;var i=e.getLastMsgKeyForAction(),s=(0,l.sendConversationArchive)(e.id,t,i).cancellable(),h=t?new o.ActionType(c.default.t(51)):new o.ActionType(c.default.t(78)),m=s.then((r=>{var i;return 200===r.status?(i=t?c.default.t(50):c.default.t(77),new o.ActionType(i,{actionText:c.default.t(199),actionHandler:()=>p(e,!t,a)})):r.status>=400?t?new o.ActionType(c.default.t(49)):new o.ActionType(c.default.t(76)):void 0})).catch((()=>{__LOG__(3)(f());var r=t?c.default.t(49):c.default.t(76);return new o.ActionType(r,{actionText:c.default.t(195),actionHandler:()=>p(e,t,a)})}));d.default.openToast(n.createElement(o.ActionToast,{id:a,initialAction:h,pendingAction:m}));var _=r.setArchive=s.then((a=>{200!==a.status||a._duplicate||(e.archive=t,t&&(e.pin=void 0))})).finally((()=>{r.setArchive=null}));return _.archive=t,_}},10131:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.setPin=function(e,t){return f((0,c.unproxy)(e),t)};var s=i(a(19976)),n=r(a(2784)),o=a(12073),l=i(a(79711)),d=i(a(17957)),u=a(50015),c=a(64658);function h(){var e=(0,s.default)(["models:chat:setPin dropped"]);return h=function(){return e},e}function f(e,t,a=(0,o.genId)()){var{promises:r}=e;r.setPin&&r.setPin.cancel();var i,s=0;t?s=Math.round(+new Date):i=e.pin;var c=(0,u.setPin)(e.id,s,i).cancellable(),p=t?new o.ActionType(d.default.t(75)):new o.ActionType(d.default.t(85)),m=c.then((()=>{var r=t?d.default.t(74):d.default.t(84);return new o.ActionType(r,{actionText:d.default.t(199),actionHandler:()=>f(e,!t,a)})})).catch((r=>{if(405===r.status)return new o.ActionType(d.default.t(73));if(r.status>=400)return t?new o.ActionType(d.default.t(72)):new o.ActionType(d.default.t(83));__LOG__(3)(h());var i=t?d.default.t(72):d.default.t(83);return new o.ActionType(i,{actionText:d.default.t(195),actionHandler:()=>f(e,t,a)})}));return l.default.openToast(n.createElement(o.ActionToast,{id:a,initialAction:p,pendingAction:m})),r.setPin=c.then((t=>{t._duplicate||(e.pin=s)})).finally((()=>{r.setPin=null}))}},58269:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.markUnread=function(e,t){return T((0,p.unproxy)(e),t)},t.sendSeen=y,t.markSeen=S,t.markUnseen=C;var s=i(a(19976)),n=r(a(2784)),o=a(12073),l=i(a(79711)),d=i(a(50935)),u=a(19741),c=r(a(96452)),h=i(a(17957)),f=a(77902),p=a(64658),m=i(a(17026));function _(){var e=(0,s.default)(["models:chat:sendConversationSeen dropped"]);return _=function(){return e},e}function v(){var e=(0,s.default)(["models:chat:sendSeen unread "," pending: "," delta: ",""]);return v=function(){return e},e}function g(){var e=(0,s.default)(["markUnread: got status ",""]);return g=function(){return e},e}function E(){var e=(0,s.default)(["sendSeen: got status ",""]);return E=function(){return e},e}function y(e,t=!0){return M((0,p.unproxy)(e),t).catchType(u.ServerStatusCodeError,(e=>{__LOG__(3)(E(),e.status)}))}function S(e,t,a){return function(e,t,a=!1){"markSeen ".concat(String(t));var r=null;null!=t?t>0&&t<=e.unreadCount?(r=e.unreadCount-t,"unreadCount set to ".concat(String(r))):-1===t&&e.unreadCount<=0&&(r=0,"unreadCount set to ".concat(String(r))):(r=0,"unreadCount set to ".concat(String(r)));return(null==r?Promise.resolve():(0,f.markConversationSeen)(e.id,r)).then((()=>{if(null!=t&&a){var i=e.pendingSeenCount-t;e.pendingSeenCount=Math.max(0,i)}null!=r&&(e.unreadCount=r),e.unreadMsgAnchor=void 0,e.markedUnread=!1}))}((0,p.unproxy)(e),t,a)}function C(e){!function(e){0===e.unreadCount&&(e.active&&(e.markedUnread=!0),(0,f.markConversationUnseen)(e.id).then((()=>{e.unreadCount=d.default.MARKED_AS_UNREAD})))}((0,p.unproxy)(e))}function T(e,t,a=(0,o.genId)()){t?e.active&&(e.markedUnread=!0):e.markedUnread=!1;var{promises:r}=e;if(r.markUnread)return r.markUnread;var i=r.markUnread=t?function(e){var t=e.getLastMsgKeyForAction();return(0,f.sendConversationUnseen)(e.id,t).then((()=>{C(e)})).catchType(u.ServerStatusCodeError,(t=>(e.markedUnread=!1,Promise.reject(t))))}(e):M(e),s=t?new o.ActionType(h.default.t(68)):new o.ActionType(h.default.t(67)),d=i.then((()=>{var r=t?h.default.t(66):h.default.t(65);return new o.ActionType(r,{actionText:h.default.t(199),actionHandler:()=>T(e,!t,a)})})).catchType(u.ServerStatusCodeError,(e=>{if(e.status>=400)return t?new o.ActionType(h.default.t(64)):new o.ActionType(h.default.t(63));throw new Error("invalid response status")})).catch((()=>{var r=t?h.default.t(64):h.default.t(63);return new o.ActionType(r,{actionText:h.default.t(195),actionHandler:()=>T(e,t,a)})}));return l.default.openToast(n.createElement(o.ActionToast,{id:a,initialAction:s,pendingAction:d})),i.then((()=>{})).catchType(u.ServerStatusCodeError,(e=>{__LOG__(3)(g(),e.status)})).finally((()=>{r.markUnread=null}))}function M(e,t=!0){if(e.markedUnread||0===e.unreadCount)return"markedUnread: ".concat(String(e.markedUnread)),"unreadCount: ".concat(e.unreadCount),Promise.resolve();if(!m.default.available&&t)return e.listenToOnce(m.default,"change:available",(()=>y(e))),Promise.resolve();e.unreadCount,e.pendingSeenCount;var a=e.unreadCount-e.pendingSeenCount,r=-1===e.unreadCount&&-1===a;if(a<=0&&!r)return Promise.resolve();e.disableUnreadAnchor=!0,e.pendingSeenCount=e.unreadCount,e.pendingSeenCount;var i=()=>{e.pendingSeenCount=e.pendingSeenCount-a,e.pendingSeenCount,e.pendingSeenCount<0&&(__LOG__(3)(v(),e.unreadCount,e.pendingSeenCount,a),e.pendingSeenCount=0)},s=e.getLastMsgKeyForAction();return(0,f.sendConversationSeen)(e,s,a).then((t=>{t._duplicate?i():S(e,a,!0)})).catchType(u.ServerStatusCodeError,(e=>(i(),Promise.reject(e)))).catchTypes(u.WebdDrop,c.ProtoVersionUndefined,(()=>{i(),__LOG__(3)(_())}))}},43322:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.blockContact=function(e){return m((0,f.unproxy)(e),!0)},t.unblockContact=function(e){return m((0,f.unproxy)(e),!1)};var s=i(a(19976)),n=r(a(2784)),o=a(12073),l=a(82184),d=i(a(79148)),u=i(a(79711)),c=a(19741),h=i(a(17957)),f=a(64658);function p(){var e=(0,s.default)(["action:setBlock dropped"]);return p=function(){return e},e}function m(e,t,a){var{id:r}=e,i=e.isBlocked();if(t&&i||!t&&!i)return Promise.resolve();var s=(0,l.sendSetBlock)(t,r).then((e=>{e&&(t?d.default.add({id:r}):d.default.remove(r))}));return function(e,t,a,r=(0,o.genId)()){var i={participant:e.formattedName},s=a?new o.ActionType(h.default.t(43,i)):new o.ActionType(h.default.t(198,i)),l=t.then((()=>{var t=a?h.default.t(42,i):h.default.t(197,i);return new o.ActionType(t,{actionText:h.default.t(199),actionHandler:()=>m(e,!a,r)})})).catch((t=>{if(!(t instanceof c.ServerStatusCodeError)){__LOG__(3)(p());var s=a?h.default.t(41,i):h.default.t(196,i),n=new o.ActionType(s,{actionText:h.default.t(195),actionHandler:()=>m(e,a,r)});return Promise.reject(n)}if(t.statusCode>=400){var l=a?new o.ActionType(h.default.t(41,i)):new o.ActionType(h.default.t(196,i));return Promise.reject(l)}}));u.default.openToast(n.createElement(o.ActionToast,{id:r,initialAction:s,pendingAction:l}))}(e,s,t,a),s}},28291:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onIsBusinessChange=function(e){var t=(0,r.unproxy)(e),{isBusiness:i,businessProfile:s,id:n}=t;i&&!s?t.addChild("businessProfile",a(89216).default.gadd(n)):!i&&s&&(t.stopListening(s),t.businessProfile=void 0,s.delete())};var r=a(64658)},87819:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.findCommonGroups=function(e){var t=(0,d.unproxy)(e),{commonGroups:r,id:i,promises:c}=t;if(c.findCommonGroups)return c.findCommonGroups;if(r&&!r.stale)return Promise.resolve();return c.findCommonGroups=(0,l.default)(i).then((e=>{var o=(0,s.default)(e.map((e=>a(43334).default.get(e))));return r?(r.set(o),r.stale=!1):t.commonGroups=new n.default(o,i),!0})).catchType(o.ServerStatusCodeError,(e=>(__LOG__(3)(u(),e.status),Promise.reject(new Error("models:Contact:findCommonGroups error: "+e.status))))).finally((()=>{c.findCommonGroups=null}))};var i=r(a(19976)),s=r(a(60417)),n=r(a(16804)),o=a(19741),l=r(a(21552)),d=a(64658);function u(){var e=(0,i.default)(["models:Contact:findCommonGroups error: ",""]);return u=function(){return e},e}},70703:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.contactFindQuery=function(e){var t=performance.now(),r={};return o.default.contactFindQuery(e.retry,(e=>{r.binarySize=e.binarySize})).then((e=>{var i=e;if("preempted"===i.data)return Promise.reject("contacts preempted");r.count=i.data&&i.data.length,r.timing=Math.ceil(performance.now()-t);var o=a(7470).default;return o.trigger(s.default.COLLECTION_HAS_SYNCED,r),(0,n.mungePSAContact)(i.data),i.checksum&&(o.setChecksum(i.checksum),__LOG__(2)(l(),i.checksum)),Promise.resolve(i.data)}))};var i=r(a(19976)),s=r(a(50935)),n=a(84748),o=r(a(76022));function l(){var e=(0,i.default)(["Store:Contact:query update checksum ",""]);return l=function(){return e},e}},33526:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.queryIdentity=function(e){var t=(0,s.unproxy)(e),{verificationBinary:a,verificationString:r,id:i}=t;if(a&&r)return Promise.resolve();if(t.promises.queryIdentity)return t.promises.queryIdentity;t.promises.queryIdentity=n.default.queryIdentity(i).then((t=>{l(e,t)})).catch((e=>{__LOG__(3)(o(),String(e))})).finally((()=>{t.promises.queryIdentity=null}))},t.updateIdentity=l;var i=r(a(19976)),s=a(64658),n=r(a(76022));function o(){var e=(0,i.default)(["models:contact:queryIdentity error: ",""]);return o=function(){return e},e}function l(e,t){var a=(0,s.unproxy)(e);t.status&&t.status>=400?(a.unset("verificationBinary"),a.unset("verificationString")):(a.verificationBinary=t.binary,a.verificationString=t.string)}},78054:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addLiveLocation=function(e,t){var a=(0,r.unproxy)(e);a.liveLocations||(a.liveLocations=[]);var{liveLocations:i}=a;i.push(t)},t.removeLiveLocation=function(e,t){var a=(0,r.unproxy)(e),{liveLocations:i}=a;if(!i)return;for(var s=i.length-1;s>=0;s--)if(i[s]===t){i.splice(s,1);break}0===i.length&&(a.liveLocations=null)};var r=a(64658)},17555:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.resyncContacts=function(e){void 0!==s.default.checksum&&void 0!==e&&(s.default.checksum!==e?s.default.findQuery({retry:!0}).then((e=>{if(Array.isArray(e)){(0,d.mungePSAContact)(e),__LOG__(2)(h());var t=(0,l.getContactsToRemove)(e),a=Promise.resolve();o.default.supportsFeature(o.default.F.MD_BACKEND),a.then((()=>{t.forEach((e=>{e.unset("name"),e.unset("shortName")}))}))}else __LOG__(3)(c(),JSON.stringify(e))})).catchType(n.WebdDrop,(()=>{})):__LOG__(2)(u()))};var i=r(a(19976)),s=r(a(7470)),n=a(19741),o=r(a(18120)),l=a(87354),d=a(84748);function u(){var e=(0,i.default)(["Store:Contact:resync checksum match"]);return u=function(){return e},e}function c(){var e=(0,i.default)(["Store:Contact.resync error ",""]);return c=function(){return e},e}function h(){var e=(0,i.default)(["Store:Contact:resync success"]);return h=function(){return e},e}},84748:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.mungePSAContact=function(e){if(Array.isArray(e)){var t=e.findIndex((e=>e&&s.default.isPSA(e.id))),a=e[t];t>-1&&a&&(a.name=i.default.t(1854),a.shortName=i.default.t(1854))}};var i=r(a(17957)),s=r(a(68384))},87951:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.fetchFirstPartyStickers=function(){return f.apply(this,arguments)};var s=i(a(52954)),n=r(a(96452)),o=i(a(93601)),l=i(a(17957)),d=i(a(40210)),u=i(a(74185)),c=i(a(99340)),h="https://static.whatsapp.net/sticker";function f(){return(f=(0,s.default)((function*(e,t){var a={id:e,lg:l.default.getLocale()},r=u.default.build(h,a),i=yield(0,o.default)(r,{signal:null==t?void 0:t.signal}),s=new d.default.StickerCommonQueryToStaticServer;if(s.set({httpResponseCode:i.status,params:new c.default(a).toString(),queryType:d.default.QUERY_TYPE.STICKER_PACK_DATA}),s.commit(),!i.ok)throw new n.InvalidServerResponseError(r,i.status.toString(),"Invalid response from WhatsApp stickers endpoint");var f=yield i.json();if(null==f||0===f.length)throw new n.InvalidServerResponseError(r,i.status.toString(),"Invalid response from WhatsApp stickers endpoint: ".concat(JSON.stringify(f)));return f[0].stickers.map(((e,t)=>({mimetype:e.mimetype,width:e.width,height:e.height,index:t,filehash:e["file-hash"],directPath:e["direct-path"],mediaKey:e["media-key"],id:e["file-hash"],deprecatedMms3Url:e.url,encFilehash:e["enc-file-hash"],mediaKeyTimestamp:0})))}))).apply(this,arguments)}},23751:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.createGroup=function(e,t,a,r,i=!1){return T(e,t,a,r,void 0,i)},t.sendForNeededAddRequest=M;var s=i(a(70417)),n=i(a(19976)),o=r(a(2784)),l=a(12073),d=i(a(43334)),u=i(a(79711)),c=i(a(7470)),h=a(58665),f=a(19741),p=i(a(18120)),m=i(a(17957)),_=a(75613),v=i(a(15118)),g=i(a(49213)),E=a(75637);function y(){var e=(0,n.default)(["Assertion failed!"]);return y=function(){return e},e}function S(){var e=(0,n.default)(["createGroup failed to set picture."]);return S=function(){return e},e}function C(){var e=(0,n.default)(["models:chatCollection:createGroup dropped"]);return C=function(){return e},e}function T(e,t,a,r,i=(0,l.genId)(),s=!1){var n=r.map((e=>e.id)),c=void 0,p=(0,h.sendCreateGroup)(e,n,c,(0,g.default)(),!1,!1,s),E=new l.ActionType(m.default.t(94)),y=p.then((t=>(M(t,e,c),new l.ActionType(m.default.t(93))))).catchType(f.ServerStatusCodeError,(e=>406===e.status?new l.ActionType(m.default.t(89)+" "+m.default.t(90)):429===e.status?new l.ActionType(m.default.t(89)+" "+m.default.t(91)):void 0)).catch((()=>(__LOG__(3)(C()),new l.ActionType(m.default.t(89),{actionText:m.default.t(195),actionHandler:()=>T(e,t,a,r,i)}))));return u.default.openToast(o.createElement(l.ActionToast,{id:i,initialAction:E,pendingAction:y})),p.then((e=>{if(e.gid&&d.default.find(e.gid).then((e=>{u.default.openChatBottom(e).then((t=>{t&&u.default.focusChatTextInput(e)}))})),!e._duplicate&&t&&a){var r=v.default.gadd(e.gid);return(0,_.setProfilePic)(r,t,a)}e._duplicate&&__LOG__(3)(S())})).catchType(f.ServerStatusCodeError,(()=>{}))}function M(e,t,a,r){if(p.default.supportsFeature(p.default.F.GROUPS_V_4_JOIN_PERMISSION)&&e.participants){var i=r||e.gid;i||(__LOG__(4,void 0,new Error,!0)(y()),SEND_LOGS("Group add request was provided with undefined gid"));var n=e.participants.reduce(((e,t)=>{var a=Object.keys(t)[0];if("403"!==t[a].code)return e;var r=(0,E.createWid)(a),i=c.default.gadd(r,{silent:!0});return[...e,(0,s.default)((0,s.default)({},t[a]),{},{contact:i})]}),[]);n.length>0&&i&&u.default.openGroupV4InviteRequestFlow(n,i,t,a)}}},71142:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.sendExitGroup=function(e){return v((0,p.unproxy)(e))},t.localExitGroup=g;var s=i(a(19976)),n=r(a(2784)),o=a(12073),l=i(a(79711)),d=a(19741),u=r(a(96452)),c=a(14809),h=a(95595),f=i(a(17957)),p=a(64658);function m(){var e=(0,s.default)(["failed to merge chat table"]);return m=function(){return e},e}function _(){var e=(0,s.default)(["actions:chat:sendExit dropped"]);return _=function(){return e},e}function v(e){var{isGroup:t,promises:a}=e;if(!t)return Promise.reject(new u.ActionError);if(a.sendExit)return a.sendExit;var r=a.sendExit=(0,c.sendExitGroup)(e.id),i=new o.ActionType(f.default.t(104)),s=r.then((function(){return new o.ActionType(f.default.t(103))})).catchType(d.ServerStatusCodeError,(e=>{if(e.status>=400)return new o.ActionType(f.default.t(102))})).catch((function(){return __LOG__(3)(_()),new o.ActionType(f.default.t(102),{actionText:f.default.t(195),actionHandler:()=>v(e)})}));return l.default.openToast(n.createElement(o.ActionToast,{id:(0,o.genId)(),initialAction:i,pendingAction:s})),r.then((t=>{t._duplicate||g(e)})).finally((()=>{a.sendExit=null})).catchType(d.ServerStatusCodeError,(()=>{}))}function g(e){e.isGroup&&(e.groupMetadata.participants.remove((0,h.getMaybeMeUser)()),(0,c.markExited)(e.id).then((()=>{e.isReadOnly=!0})).catch((()=>{throw __LOG__(4,!0,new Error,!0)(m()),SEND_LOGS("failed to merge chat table when exiting group"),new Error("failed to merge chat table")})))}},55600:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.queryGroupInviteCode=function(e){return function(e){if(e.groupInviteCodePromise)return e.groupInviteCodePromise;return e.groupInviteCodePromise=(0,l.sendQueryGroupInviteCode)(e.id).then((t=>{e.inviteCode=t})).finally((()=>{e.groupInviteCodePromise=null}))}((0,d.unproxy)(e))},t.revokeGroupInvite=function(e){return function(e){if(e.revokeGroupInvitePromise)return e.revokeGroupInvitePromise;return e.revokeGroupInvitePromise=(0,l.sendRevokeGroupInviteCode)(e.id).then((t=>{e.inviteCode=t})).catchType(n.ServerStatusCodeError,(e=>{throw e})).catch((()=>{__LOG__(3)(u())})).finally((()=>{e.revokeGroupInvitePromise=null}))}((0,d.unproxy)(e))},t.joinGroupViaInvite=function(e){return(0,l.sendJoinGroupViaInvite)(e).then((e=>o.default.supportsFeature(o.default.F.MD_BACKEND)?s.default.gadd(e):s.default.find(e)))};var i=r(a(19976)),s=r(a(43334)),n=a(19741),o=r(a(18120)),l=a(29697),d=a(64658);function u(){var e=(0,i.default)(["models:groupMetadata:participantCollection:revokeGroupInvite dropped"]);return u=function(){return e},e}},70185:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.handleGroupAction=function(e,t,a){return function(e,t,a){var{action:r}=a;switch(a.action){case d.SUBJECT:var i={name:a.subject};return e.contact.set(i),(0,s.persistGroupMetadata)(e.groupMetadata.id,{subject:a.subject});case d.ADD:case d.PROMOTE:case d.DEMOTE:var o=a.participants.map((e=>({id:e,isAdmin:"promote"===r})));e.groupMetadata.participants.add(o,{merge:!0}),"add"===r&&a.participants.forEach((t=>{n.default.trigger("group_participant_change_".concat(t.toString()),e.id)}));break;case d.REMOVE:var u=e.groupMetadata;a.participants.forEach((e=>{u.participants.remove(e)})),a.participants.forEach((t=>{n.default.trigger("group_participant_change_".concat(t.toString()),e.id)}));break;case d.MODIFY:if(t&&a.participants&&a.participants.length>0){var c=a.participants[0],h=e.groupMetadata.participants.remove(t),f=!1,p=!1;h&&h.length&&h[0]&&(f=h[0].isAdmin,p=h[0].isSuperAdmin);var m={id:c,isAdmin:f,isSuperAdmin:p};e.groupMetadata.participants.add(m)}break;case d.INVITE_CODE:a.code?e.groupMetadata.inviteCode=a.code:__LOG__(3)(l(),a.code,e.id.toString());break;case d.DESC_ADD:return e.groupMetadata.set({desc:a.desc,descId:a.descId,descTime:a.descTime,descOwner:null==t?void 0:t.toString()}),(0,s.persistGroupMetadata)(e.groupMetadata.id,{desc:a.desc,descId:a.descId,descTime:a.descTime,descOwner:null==t?void 0:t.toString()});case d.DESC_REMOVE:if(e.groupMetadata.descId===a.descId)return e.groupMetadata.set({desc:void 0,descId:void 0,descTime:void 0,descOwner:void 0}),(0,s.persistGroupMetadata)(e.groupMetadata.id,{desc:void 0,descId:void 0,descTime:void 0,descOwner:void 0});break;case d.RESTRICT:return e.groupMetadata.restrict=!!a.value,(0,s.persistGroupMetadata)(e.groupMetadata.id,{restrict:!!a.value});case d.ANNOUNCE:return e.groupMetadata.announce=!!a.value,(0,s.persistGroupMetadata)(e.groupMetadata.id,{announce:!!a.value});case d.NO_FORWARD:return e.groupMetadata.noFrequentlyForwarded=!!a.value,(0,s.persistGroupMetadata)(e.groupMetadata.id,{noFrequentlyForwarded:!!a.value});case d.EPHEMERAL:return e.groupMetadata.ephemeralDuration=a.duration,(0,s.persistGroupMetadata)(e.groupMetadata.id,{ephemeralDuration:a.duration})}return Promise.resolve()}((0,o.unproxy)(e),t,a)},t.GROUP_ACTIONS=void 0;var i=r(a(19976)),s=a(60156),n=r(a(99922)),o=a(64658);function l(){var e=(0,i.default)(["model:chat:handleGroupAction:invalid invite code: "," for ",""]);return l=function(){return e},e}var d=Object.freeze({SUBJECT:"subject",ADD:"add",PROMOTE:"promote",DEMOTE:"demote",REMOVE:"remove",MODIFY:"modify",INVITE_CODE:"invite",DESC_ADD:"desc_add",DESC_REMOVE:"desc_remove",RESTRICT:"restrict",ANNOUNCE:"announce",NO_FORWARD:"no_frequently_forwarded",EPHEMERAL:"ephemeral"});t.GROUP_ACTIONS=d},69007:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.handleGroupActionWap=function(){return u.apply(this,arguments)},t.handleGroupActionMD=function(){n.default.supportsFeature(n.default.F.MD_BACKEND);return Promise.reject(new Error("handleGroupActionMD: only supported on MD"))},t.handleGroupCreation=function(){n.default.supportsFeature(n.default.F.MD_BACKEND);return Promise.reject(new Error("handleGroupCreation: should not be called in wap mode"))};var i=r(a(19976)),s=r(a(52954)),n=r(a(18120)),o=a(70185),l=a(51803);function d(){var e=(0,i.default)(["model:chat: unknown chat for ",", action ",""]);return d=function(){return e},e}function u(){return(u=(0,s.default)((function*(e,t){var{chatId:r,author:i}=e,s=a(43334).default.get(r);if(s){if(t.action===o.GROUP_ACTIONS.SUBJECT){var n={name:t.subject};yield(0,l.updateLocal)(s.contact.id,n)}(0,o.handleGroupAction)(s,i,t)}else __LOG__(3)(d(),r.toString(),JSON.stringify(t))}))).apply(this,arguments)}},70574:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.queryGroupFromPhone=function(e){return(0,d.groupMetadataFindFromPhone)(e).then((t=>"ok"===t.status?t.data:"missing"!==t.status?"error"===t.status?(__LOG__(3)(u(),t.info),Promise.reject(new Error("model:GroupMetadata:find error"))):void 0:void(0,n.default)((()=>{a(43334).default.assertGet(e).delete()}))))},t.queryGroupInviteInfo=function(e){return(0,d.sendQueryGroupInvite)(e).then((e=>{var{status:t,subject:r}=e,s=(0,i.default)(e,["status","subject"]),n=new l.default(s);o.default.gadd(n.id);var d=a(43334).default.get(n.id);return{status:t,subject:r,groupMetadata:n,inGroup:!!d&&!d.isReadOnly}}))};var i=r(a(22220)),s=r(a(19976)),n=r(a(98874)),o=r(a(7470)),l=r(a(30440)),d=a(90401);function u(){var e=(0,s.default)(["model:GroupMetadata:find error ",""]);return u=function(){return e},e}},63590:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.setGroupProperty=function(e,t,a){return _((0,p.unproxy)(e),t,a)};var s=i(a(19976)),n=r(a(2784)),o=a(12073),l=i(a(79711)),d=i(a(50935)),u=a(19741),c=r(a(96452)),h=i(a(17957)),f=a(88011),p=a(64658);function m(){var e=(0,s.default)(["Error while setting property"]);return m=function(){return e},e}function _(e,t,a,r=(0,o.genId)()){if(!t)return Promise.reject(new c.ActionError);if(t===d.default.GROUP_SETTING_TYPE.EPHEMERAL&&!e.groupMetadata.canSetEphemeralSetting())return Promise.reject(new c.ActionError);if(t!==d.default.GROUP_SETTING_TYPE.EPHEMERAL&&!e.groupMetadata.canSetGroupProperty())return Promise.reject(new c.ActionError);var i=(0,f.sendSetGroupProperty)(e.id,t,a),s={[d.default.GROUP_SETTING_TYPE.ANNOUNCEMENT]:{on:[h.default.t(462),h.default.t(454)],off:[h.default.t(461),h.default.t(453)]},[d.default.GROUP_SETTING_TYPE.RESTRICT]:{on:[h.default.t(468),h.default.t(460)],off:[h.default.t(467),h.default.t(459)]},[d.default.GROUP_SETTING_TYPE.NO_FREQUENTLY_FORWARDED]:{on:[h.default.t(466),h.default.t(458)],off:[h.default.t(465),h.default.t(457)]},[d.default.GROUP_SETTING_TYPE.EPHEMERAL]:{on:[h.default.t(464),h.default.t(456)],off:[h.default.t(463),h.default.t(455)]}},p=0===a?"off":"on",[v,g]=s[t][p],E=new o.ActionType(v),y=i.then((()=>new o.ActionType(g))).catchType(u.ServerStatusCodeError,(e=>{if(404===e.status)return new o.ActionType(h.default.t(48)+" "+h.default.t(106))})).catch((()=>(__LOG__(3)(m()),new o.ActionType(h.default.t(48),{actionText:h.default.t(195),actionHandler:()=>_(e,t,a,r)}))));return l.default.openToast(n.createElement(o.ActionToast,{id:r,initialAction:E,pendingAction:y})),i.then((r=>{r._duplicate||e.groupMetadata.set(d.default.GROUP_SETTING_TO_METADATA[t],a)})).catchType(u.ServerStatusCodeError,(()=>{}))}},83035:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.updateParticipants=function(){return n.apply(this,arguments)},t.addParticipants=function(){return o.apply(this,arguments)},t.removeParticipants=function(){s.default.supportsFeature(s.default.F.MD_BACKEND);return Promise.resolve()},t.demoteParticipants=function(){return l.apply(this,arguments)},t.promoteParticipants=function(){return d.apply(this,arguments)};r(a(19976));var i=r(a(52954)),s=r(a(18120));function n(){return(n=(0,i.default)((function*(){s.default.supportsFeature(s.default.F.MD_BACKEND),yield Promise.resolve()}))).apply(this,arguments)}function o(){return(o=(0,i.default)((function*(){s.default.supportsFeature(s.default.F.MD_BACKEND),yield Promise.resolve()}))).apply(this,arguments)}function l(){return(l=(0,i.default)((function*(){s.default.supportsFeature(s.default.F.MD_BACKEND),yield Promise.resolve()}))).apply(this,arguments)}function d(){return(d=(0,i.default)((function*(){s.default.supportsFeature(s.default.F.MD_BACKEND),yield Promise.resolve()}))).apply(this,arguments)}},53603:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t=!0){if(!(0,s.getMaybeMeUser)().equals(e.id)){var a=n.default.get(e.id);a&&("unsubscribe"===e.type?a.set({isSubscribed:!1,stale:!0}):(!function(e,t){var a,r=!1;void 0===t.type?t.type=e.chatstate.type||"unavailable":"paused"===t.type&&(r=!0,t.type="available");e.isGroup&&"available"!==t.type&&(t.updateTime=Date.now());if(e.isGroup){if(!t.participant)return;t.id=t.participant,t.participant=void 0,a=e.chatstates.gadd(t.id)}else a=e.chatstate;r&&"composing"!==a.type&&"recording"!==a.type||a.set(t);a.expireTimerId&&clearTimeout(a.expireTimerId);"composing"===a.type||"recording"===a.type?a.expireTimerId=setTimeout((()=>function(e){var t=e.type;"composing"!==t&&"recording"!==t||(e.type="available")}(a)),i.default.PRESENCE_COMPOSING_TIMEOUT):a.expireTimerId=void 0;var s=e.forceDisplay||e.isOnline||e.isUser&&!e.chatstate.deny;e.set({hasData:!0,forceDisplay:s})}(a,e),t&&a.set({stale:!1})))}return Promise.resolve()};var i=r(a(50935)),s=a(95595),n=r(a(99098))},95303:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.changeProfilePicThumb=function(e,t){return i.default.imageChanged(e,t),Promise.resolve()};var i=r(a(15118))},27857:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.updateMsgAck=c,t.processOrphanAck=function(e,t){var a=o.default.get(e);if(!a)return Promise.reject("processOrphanAck: no msg found for id ".concat(e.toString()));return(0,s.getHighestAck)(a).then((e=>{if(e&&e.ack!==a.ack)return c(a,t,e)})).catch((()=>{__LOG__(4,void 0,new Error,!0)(u()),SEND_LOGS("processOrphanAck failed")}))};var i=r(a(19976)),s=a(45492),n=a(11824),o=r(a(58885)),l=r(a(68384)),d=a(75637);function u(){var e=(0,i.default)(["Assertion failed!"]);return u=function(){return e},e}function c(e,t,a){var{ack:r,t:i,from:s,to:o}=a,{remote:u,id:c}=e.id;e.updateAck(r,i);var h=(0,n.getBridge)();return h.sendAndReceive("msg_collection","updateLastReceipt",{wid:u,t:i}).then((()=>l.default.isUser(u)?h.sendAndReceive("msg_info_collection","updateInfo",{id:c,from:s,to:o,ack:r,participant:u,t:i}).then((()=>{if(t&&l.default.isBroadcast(t)){var e=t instanceof l.default?t:(0,d.createWid)(t);return h.sendAndReceive("msg_info_collection","updateInfo",{id:c,from:s,to:e,ack:r,participant:u,t:i})}})):l.default.isStatusV3(u)?h.sendAndReceive("msg_info_collection","updateInfo",{id:c,from:s,to:u,ack:r,participant:o,t:i}):void 0))}},55488:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.markPlayed=function(e){return function(e){c(e)?(0,o.default)(e).then((()=>{e.ack=s.default.ACK.PLAYED})).catchType(n.WebdDrop,(()=>{})):__LOG__(2)(u())}((0,d.unproxy)(e))},t.canMarkPlayed=function(e){return c((0,d.unproxy)(e))};var i=r(a(19976)),s=r(a(50935)),n=a(19741),o=r(a(77021)),l=r(a(72424)),d=a(64658);function u(){var e=(0,i.default)(["Msg:msg should not call sendPlayed"]);return u=function(){return e},e}function c(e){return!e.isSentByMe&&(!(e.ack>=s.default.ACK.PLAYED)&&(e.type===s.default.MSG_TYPE.PTT||!!e.isViewOnce&&l.default.viewOnceWrite))}},22952:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.updateMsgInfo=function(e,t,a,r){s.default.supportsFeature(s.default.F.MD_BACKEND);return function(e,t,a,r){var i=e.id;if(!o.default.isUser(i.remote)){if(t!==l.RECEIVED){var s=e.delivery.get(a);s&&e.delivery.remove(s)}if(t!==l.READ){var n=e.read.get(a);n&&e.read.remove(n)}if(t!==l.PLAYED){var d=e.played.get(a);d&&e.played.remove(d)}}t===l.PLAYED?(e.played.get(a)||(e.playedRemaining-=1),e.played.add({id:a,t:r})):t===l.READ?(e.read.get(a)||(e.readRemaining-=1),e.read.add({id:a,t:r})):t===l.RECEIVED&&(e.delivery.get(a)||(e.deliveryRemaining-=1),e.delivery.add({id:a,t:r}))}((0,n.unproxy)(e),t,a,r)};var i=r(a(50935)),s=r(a(18120)),n=a(64658),o=r(a(68384)),{ACK:l}=i.default},81233:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t._processMultipleMessages=function(e,t,r,i){var s=[],I=[],F=[],G=a(43334).default,U=a(58885).default;return t.forEach((function(t){var u;t.id instanceof v.default||(__LOG__(3)(k(),(new Error).stack),d.upload({reason:"forgot-to-create-msgkey"}),t.id=new v.default({from:t.from,to:t.to,id:t.id,participant:t.participant,selfDir:t.self})),(0,M.isString)(e)&&P.default.isBroadcast(e)&&delete t.broadcast,"ptt"===t.type&&!t.id.fromMe&&t.ack<c.default.ACK.CLOCK&&(t.ack=c.default.ACK.CLOCK),null!=t.hydratedButtons&&((u=t).buttons=new T.default,u.buttons.add(u.hydratedButtons.map(((e,t)=>{var a=null!=e.index?e.index:t,r="".concat(a);return e.quickReplyButton?new C.default({id:r,displayText:e.quickReplyButton.displayText,selectionId:e.quickReplyButton.id,subtype:"quick_reply"}):e.callButton?new C.default({id:r,displayText:e.callButton.displayText,phoneNumber:e.callButton.phoneNumber,subtype:"call"}):new C.default({id:r,displayText:e.urlButton.displayText,url:e.urlButton.url,subtype:"url"})})))),null!=t.dynamicReplyButtons&&function(e){e.replyButtons=new l.default,e.replyButtons.add(e.dynamicReplyButtons.map((({buttonId:e,buttonText:t})=>new o.default({id:e,displayText:null==t?void 0:t.displayText}))))}(t);var f=U.get(t.id);if(t.type===c.default.MSG_TYPE.PROTOCOL&&"ephemeral_setting"!==t.subtype)switch(t.subtype){case"revoke":if(f=U.get(t.protocolMessageKey)){var m=new U.constructor.model(t);P.default.equals(f.sender,m.sender)?(P.default.isStatusV3(e)&&f.msgChunk&&f.msgChunk.remove(f),(0,S.revoke)(f,m.id),P.default.isStatusV3(e)&&a(57185).default.find(f.sender).then((e=>{p.default.supportsFeature(p.default.F.QUERY_STATUS_V_3_THUMBNAIL)&&f&&f.msgChunk&&f.msgChunk.length!==e.totalCount&&b.default.statusQueryThumbnail(e.id)}))):__LOG__(3)(L(),m.id.toString(),f.id.toString())}break;case"ephemeral_sync_response":var _=G.get(t.id.remote);_&&(0,h.maybeUpdateEphemeralSetting)(_,t.ephemeralDuration,t.ephemeralSettingTimestamp);break;default:__LOG__(2)(R(),t.id.toString())}else if(f&&!f.asRevoked){for(var E in t.ack<f.ack&&delete t.ack,t)t.hasOwnProperty(E)&&void 0===t[E]&&delete t[E];t.id.fromMe&&!f.deprecatedMms3Url&&t.deprecatedMms3Url&&(t.phoneUploading=!1),r.isHistory&&(t.isNewMsg=!1);var y=f.t?(0,n.default)(t,["t","id","from","to"]):t,O=f.applyUpdate(y).then((()=>f));if(F.push(O),P.default.isBroadcast(f.id.remote)){var x=g.getBroadcastFanoutKeys(f);x&&x.forEach((e=>{var t=U.get(e);t&&F.push(t.applyUpdate(y).then((()=>f)))}))}r.isHistory&&(f.recvFresh||i)&&!f.search?(__LOG__(3)(D(),f.recvFresh?"dup:":"overlap:",String(f.id)),I.push(f)):r.isHistory&&f.search?(f.search=!1,__LOG__(3)(w(),String(f.id)),s.push({id:f.id})):"search"===r.add&&s.push({id:f.id})}else{g.typeIsMms(t)&&!t.deprecatedMms3Url&&(t.phoneUploading=t.id.fromMe&&t.ack===c.default.ACK.CLOCK);var B=G.get(t.id.remote);"search"===r.add&&(t.search=!0),r.update||s.push(t),!r.isHistory&&"search"!==r.add&&B&&function(e,t){if(!e.isNewMsg||!e.recvFresh)return __LOG__(3,void 0,void 0,!0)(A(),e.id.toString()),void SEND_LOGS("bad-process-live-message-call");e.type===c.default.MSG_TYPE.GP2&&"delete"===e.subtype&&(t.isReadOnly=!0);if(t.isUser){var a,r,i=null!==(a=e.ephemeralDuration)&&void 0!==a?a:0,s=!1;e.type===c.default.MSG_TYPE.PROTOCOL&&"ephemeral_setting"===e.subtype?r=e.t:e.ephemeralSettingTimestamp&&(r=e.ephemeralSettingTimestamp,s=!0),null!=r&&(0,h.maybeUpdateEphemeralSetting)(t,i,r,s)}}(t,B),t.ephemeralOutOfSync&&__LOG__(2)(N(),t.id.toString(),null==B?void 0:B.id.toString())}})),(F.length?Promise.all(F):Promise.resolve()).then((()=>{if(0===s.length&&0===I.length){if(e&&r.pendingMsgsDone){var n=G.get(e);n&&(n.pendingMsgs=!1)}return t.map((e=>U.get(e.id))).filter((e=>e))}if(e){var o;if(P.default.isStatusV3(e)){var l=t[0],d=l.id.fromMe?(0,f.getMaybeMeUser)():l.author;o=a(57185).default.find(d)}else o=G.find(e);return o.then((a=>x(s).then((s=>{var n,o,l="after"===r.add||"last"===r.add,d=!r.isHistory,h=!1;if("unread"===r.add?(n=i,a.msgChunks.push(n),o=r.firstUnreadKey):"last"===r.add&&r.resume?(n=i,h=!0):n="function"==typeof i?i():i,function(e,t,a,r,i,s,n,o){var l=function(e,t,a,r,i){var s,n,o,l={},d={},u=a.length,c=i;if(0===u)return{msgs:t,collection:c};for(s=0;s<u;s++)n=a[s],d[n.id]=n;for(u=t.length,s=0;s<u;s++)(n=t[s])&&(l[n.id]=n);var h=[];for(u=e.length,s=0;s<u;s++)if((n=e[s])&&((o=l[n.id])&&h.push(o),o=d[n.id]))if(o.recvFresh)h.push(o),r.removeMsg(o),o.unset("recvFresh");else{var f=r.getAllCMCs().find((function(e){return e.get(o.id)}));i&&f===i||(f?(f.forEach((function(e){h.push(e),delete d[e.id]})),f===r.msgs?(r.replaceMsgsCollection(i),c=r.msgs):(r.notifyMsgCollectionMerge(i,f,i),r.removeMsgsCollection(f))):(__LOG__(3)(O(),n.id),h.push(d[n.id])))}return{msgs:h,collection:c}}(e,t,a,r,s);g.addRecordsToChat(l.msgs,r,i,l.collection,n,o)}(t,s,I,a,l,n||a.msgs,o,h),r.pendingMsgsDone&&(a.pendingMsgs=!1),d&&P.default.isBroadcast(e)&&!P.default.isStatusV3(e)&&s.forEach((function(e){e&&e.recvFresh&&!e.isNotification&&g.broadcastFanout(e)})),p.default.supportsFeature(p.default.F.RECENT_EMOJI_SYNC))for(var v=0;v<s.length;v++){var S=s[v];if(S&&S.isNewMsg&&S.isSentByMe&&S.containsEmoji){E.default.throttledSync();break}}if(p.default.isRecentStickersEnabled()){var C=s.map((e=>{if(e&&e.isNewMsg&&e.isSentByMe&&e.type===c.default.MSG_TYPE.STICKER){var{mediaData:t}=e;return{id:t.filehash,directPath:t.directPath,filehash:t.filehash,encFilehash:t.encFilehash,mediaKey:t.mediaKey,mediaKeyTimestamp:null!=t.mediaKeyTimestamp?t.mediaKeyTimestamp:u.default.globalUnixTime(),width:t.fullWidth,height:t.fullHeight,size:t.size,mimetype:t.mimetype,type:_.OUTWARD_TYPES.STICKER,index:0}}})).filter(Boolean);y.default.enqueue(C)}if(p.default.supportsFeature(p.default.F.DOWNLOAD_DOCUMENT_THUMB_MMS)&&s.map((e=>e.asDoc)).filter(Boolean).forEach((e=>{(0,m.downloadMmsThumbnail)({msg:e,isPreload:!0})})),p.default.supportsFeature(p.default.F.DOWNLOAD_STATUS_THUMB_MMS)&&P.default.isStatusV3(e)){var T=(0,f.getLastStatusUsage)();(null==T||Date.now()-T<12096e5)&&s.map((e=>e.asImage)).filter(Boolean).forEach((e=>{(0,m.downloadStatusV3Thumbnail)({msg:e,isPreload:!0})}))}return t.map((e=>U.get(e.id))).filter((e=>e))}))))}return x(s).then((()=>t.map((e=>U.get(e.id))).filter((e=>e&&!!e.chat))))}))};var s=i(a(19976)),n=i(a(17620)),o=i(a(25764)),l=i(a(50760)),d=r(a(3594)),u=i(a(19899)),c=i(a(50935)),h=a(74253),f=a(95595),p=i(a(18120)),m=a(28278),_=a(96645),v=i(a(77865)),g=r(a(57556)),E=i(a(67110)),y=i(a(49569)),S=a(74034),C=i(a(13274)),T=i(a(10750)),M=a(11419),b=i(a(76022)),P=i(a(68384));function A(){var e=(0,s.default)(["processLiveMessage should not be called with history message id ",""]);return A=function(){return e},e}function I(){var e=(0,s.default)(["Assertion failed! ",""]);return I=function(){return e},e}function O(){var e=(0,s.default)(["models:Msg:reorder trying to merge CMC of orphaned message ",""]);return O=function(){return e},e}function N(){var e=(0,s.default)(["ephemeralOutOfSync msgId="," chatId=",""]);return N=function(){return e},e}function w(){var e=(0,s.default)(["model:Msg:handle:processMM load search as history ",""]);return w=function(){return e},e}function D(){var e=(0,s.default)(["model:Msg:handle:processMM:","",""]);return D=function(){return e},e}function R(){var e=(0,s.default)(["unknown protocolMessage ",""]);return R=function(){return e},e}function L(){var e=(0,s.default)(["model:Msg:processMM revoke sender mismatch ",", ",""]);return L=function(){return e},e}function k(){var e=(0,s.default)(["_processMultipleMessages: el.id is not a MsgKey ",""]);return k=function(){return e},e}function x(e){var t=a(58885).default.add(e,{merge:!0});return Promise.all(t.map((e=>e.waitForPrep().catch((e=>{__LOG__(4,void 0,new Error,!0)(I(),String(e)),SEND_LOGS("bad-msg-prep")}))))).then((()=>t))}},74034:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.sendRevoke=function(e,t){return function(e,t){var{id:a,t:r}=e;if(!a.fromMe)return Promise.reject("revoking received message");var i=void 0;l.default.supportsFeature(l.default.F.MD_BACKEND);var s=new p.default({id:(0,_.default)(),remote:e.id.remote,fromMe:!0,participant:i}),n={id:s,to:a.remote,t:r,type:o.default.MSG_TYPE.PROTOCOL,subtype:"revoke",protocolMessageKey:a,clearMedia:!!t,local:!0};return(0,c.storeMessages)([n],e.chat.id).catch((e=>{throw __LOG__(4,!0,new Error,!0)(T()),SEND_LOGS("storeMessages failed"),e})).then((()=>(0,v.sendMsgRecord)(new f.default(n)))).then((t=>{if(t===g.SendMsgResult.OK){var a=Math.trunc(Date.now()/1e3-e.t);return new h.default.SendRevokeMessage({messageType:e.getWamMessageType(),messageMediaType:e.getWamMediaType(),revokeSendDelay:a}).commit(),M(e,s).then((()=>g.SendMsgResult.OK))}return Promise.resolve(g.SendMsgResult.ERROR_UNKNOWN)}))}((0,E.unproxy)(e),t)},t.revoke=M;var s=i(a(19976)),n=i(a(8555)),o=i(a(50935)),l=i(a(18120)),d=a(57525),u=r(a(28278)),c=a(12425),h=i(a(40210)),f=i(a(27e3)),p=i(a(77865)),m=r(a(57556)),_=i(a(49213)),v=a(45591),g=a(59420),E=a(64658),y=i(a(68384));function S(){var e=(0,s.default)(["cannot fanout revoke: "," ",""]);return S=function(){return e},e}function C(){var e=(0,s.default)(["_revoke: failed to process revoke message"]);return C=function(){return e},e}function T(){var e=(0,s.default)(["_sendRevoke: failed to storeMessages into storage"]);return T=function(){return e},e}function M(e,t){return function(e,t){return(0,c.processRevokeMsg)(e.id.toString(),t.toString()).catch((e=>{throw __LOG__(4,!0,new Error,!0)(C()),SEND_LOGS("removeMessagesFromHistory failed"),e})).then((()=>{m.typeIsMms(e)&&u.deregisterMsg(e),e.chat&&e.chat.removeFromCollection(e);var r=e.getCollection(),i=e.id;e.msgChunk&&e.msgChunk.replaceId(i,t),r.replaceId(i,t);var s={id:t,type:o.default.MSG_TYPE.REVOKED,body:void 0,caption:void 0,clientUrl:void 0,deprecatedMms3Url:void 0,loc:void 0,lat:void 0,lng:void 0,isLive:void 0,accuracy:void 0,speed:void 0,degrees:void 0,comment:void 0,sequence:void 0,shareDuration:void 0,finalLat:void 0,finalLng:void 0,finalAccuracy:void 0,finalThumbnail:void 0,finalSpeed:void 0,finalDegrees:void 0,finalTimeOffset:void 0,title:void 0,description:void 0,canonicalUrl:void 0,matchedText:void 0,thumbnail:void 0,richPreviewType:void 0,doNotPlayInline:void 0,quotedMsg:void 0,quotedStanzaID:void 0,quotedRemoteJid:void 0,quotedParticipant:void 0,mediaData:void 0,mentionedJidList:void 0,vcardList:void 0,star:!1};if(e.set(s),e.trigger("change:msgKey",{newKey:t,oldKey:i}),e.chat&&(e.chat.updateMediasCountOnMsg(e,!0),i.equals(e.chat.lastReceivedKey)&&(0,d.setLastReceivedKey)(e.chat.id,t).then((()=>{e.chat.lastReceivedKey=t})),e.chat.composeQuotedMsg===e&&(e.chat.composeQuotedMsg=null)),e.isLive&&a(84383).default.removeMsg(e),y.default.isBroadcast(i.remote)){var l=m.getBroadcastFanoutKeys(i),c=m.getBroadcastFanoutKeys(t);if(!l||!c||l.length!==c.length)return void __LOG__(2)(S(),String(l),String(c));(0,n.default)(l,c).forEach((e=>{var t=r.get(e[0]);t&&M(t,e[1])}))}}))}((0,E.unproxy)(e),t)}},45591:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.sendMsgRecord=function(e){return(0,s.callSyncPromise)((()=>{var t,r=e.id,i=a(43334).default;i.find(r.remote).then((e=>{e.isTrusted()||(0,g.sendNotSpam)(e).catch((()=>{}))})),y.default.isBroadcast(e.to)&&(t=(0,m.broadcastFanout)(e)),e.isNewMsg=!0;var s,A=e.type===o.default.MSG_TYPE.PROTOCOL&&"revoke"===e.subtype;if(!e.isGroupMsg&&!A&&n.default.get(e.to))return Promise.reject(new l.default("Contact is blocked",d.default.assertGet(e.to)));A||(s=new f.default.WebcMessageSend({messageType:e.getWamMessageType(),messageMediaType:e.getWamMediaType(),messageIsForward:Boolean(e.isForwarded)}));var I=a(58885).default;return i.find(e.id.remote).then((t=>((0,E.sendSeen)(t),I.trigger(o.default.NEW_MSG_SENT),Promise.props({reply:(0,_.sendMsgRecord)(e),chat:t})))).then((({reply:a,chat:n})=>{var l=r.remote,d=(0,c.getMaybeMeUser)(),u=r.fromMe&&y.default.equals(r.remote,d)?3:a.data?a.data.ack:1;return e.updateAck(u,a.t),s&&(s.markMessageSendT(),s.commit()),e.type!==o.default.MSG_TYPE.PROTOCOL&&(0,h.setLastReceivedKey)(n.id,r).then((()=>{n.lastReceivedKey=r})),I.updateLastReceipt(l,a.t),y.default.isBroadcast(l)&&(t?t.forEach((e=>{var t=new p.default({from:d,to:e,id:r.id}),a=I.get(t);a&&(a.ack=o.default.ACK.SENT,I.updateLastReceipt(e,a.t),null==a.ephemeralStartTimestamp&&a.updateEphemeralStartTimestamp(a.t),i.find(e).then((e=>{(0,h.setLastReceivedKey)(e.id,t).then((()=>{e.lastReceivedKey=t}))})))})):__LOG__(2)(P())),v.SendMsgResult.OK})).catchType(u.ServerStatusCodeError,(t=>{if(408!==t.status){var a=e.toJSON();__LOG__(2)(b(),JSON.stringify(a.body)),a.body=void 0,__LOG__(2,!0)(M(),JSON.stringify(a)),__LOG__(4,void 0,new Error,!0)(T(),t.status),SEND_LOGS("send-not-200")}return v.SendMsgResult.ERROR_NETWORK})).catch((t=>(__LOG__(3)(C(),e.id.toString()),__LOG__(4,void 0,new Error,!0)(S(),String(t)),SEND_LOGS("send-msg-error"),v.SendMsgResult.ERROR_UNKNOWN)))})).finally((()=>{e.promises.sendPromise&&e.promises.sendPromise.control.settled()}))};var i=r(a(19976)),s=a(73559),n=r(a(79148)),o=r(a(50935)),l=r(a(64357)),d=r(a(7470)),u=a(19741),c=a(95595),h=a(57525),f=r(a(40210)),p=r(a(77865)),m=a(57556),_=a(8541),v=a(59420),g=a(89590),E=a(58269),y=r(a(68384));function S(){var e=(0,i.default)(["Got error ",""]);return S=function(){return e},e}function C(){var e=(0,i.default)(["model:msg:createRecord dropped msg: ",""]);return C=function(){return e},e}function T(){var e=(0,i.default)(["Phone responded ",""]);return T=function(){return e},e}function M(){var e=(0,i.default)(["Json: ",""]);return M=function(){return e},e}function b(){var e=(0,i.default)(["json.body: ",""]);return b=function(){return e},e}function P(){var e=(0,i.default)(["model:msg:createRecord bclist server ack, no recipients"]);return P=function(){return e},e}},59420:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SendMsgResult=void 0;var r=a(28103).Mirrored(["OK","ERROR_NETWORK","ERROR_EXPIRED","ERROR_CANCELLED","ERROR_UPLOAD","ERROR_UNKNOWN"]);t.SendMsgResult=r},47296:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.queryOrder=function(e,t,a,i){return(0,r.queryOrder)(e,t,a,i)},t.createOrder=function(e,t){return(0,r.createOrder)(e,t)};var r=a(63928)},93649:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.queryProduct=function(e,t,a=100,r=100){return(0,l.queryProduct)(e,t,a,r)},t.queryCatalog=function(e,t,a=5,r=100,i=100){return(0,l.queryCatalog)(e,t,a,r,i)},t.queryProductList=function(e,t,a=100,r=100){return(0,l.queryProductList)(e,t,a,r)},t.appealProduct=function(e,t){return(0,l.appealProduct)(e,t)},t.reportProduct=function(e,t,a){return(0,l.reportProduct)(e,t,a)},t.createBusinessCatalog=function(){return(0,l.createCatalog)()},t.addProduct=function(e,t=100,a=100){return(0,l.addProduct)(e,t,a)},t.editProduct=function(e,t=100,a=100){return(0,l.editProduct)(e,t,a)},t.deleteProducts=function(e){return(0,l.deleteProducts)(e)},t.sendProductToChat=function(e,t,a){var{catalogWid:r}=e;if(!t)return;var l=t.productCollection.get(e.id),u=l?(0,d.unproxy)(l):(0,d.unproxy)(e);if(!u)return;var c=u.productImageCollection.head(),h=c&&c.mediaData;if(!h)return;i.default.find(r).then((function(e){s.default.openChatFromUnread(e).then((t=>{if(t){var i=(0,d.unproxy)((0,o.createProductInquiry)(u,r,h,a));e.composeQuotedMsg=i,s.default.focusChatTextInput(e),window.innerWidth<=n.default.LAYOUT_2COLUMNS_MAX_WIDTH&&s.default.closeDrawerRight()}}))}))};var i=r(a(43334)),s=r(a(79711)),n=r(a(50935)),o=a(27e3),l=a(8125),d=a(64658)},75613:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.setProfilePic=function(e,t,a){return v((0,p.unproxy)(e),t,a)},t.deleteProfilePic=function(e){return g((0,p.unproxy)(e))};var s=i(a(19976)),n=r(a(2784)),o=a(12073),l=i(a(79711)),d=a(19741),u=r(a(96452)),c=a(95595),h=i(a(17957)),f=a(85619),p=a(64658);function m(){var e=(0,s.default)(["models:ProfilePicThumb:deletePicture dropped"]);return m=function(){return e},e}function _(){var e=(0,s.default)(["models:ProfilePicThumb:setPicture dropped"]);return _=function(){return e},e}function v(e,t,a,r=(0,o.genId)()){var{id:i}=e;if(!e.canSet())return Promise.reject(new u.ActionError);var s=(0,f.sendSetPicture)(i,t,a);e.pendingPic=t;var p=(0,c.getMaybeMeUser)(),m=i.equals(p)?new o.ActionType(h.default.t(182)):new o.ActionType(h.default.t(113)),g=s.catch((()=>{throw __LOG__(3)(_()),i.equals(p)?new o.ActionType(h.default.t(181)):new o.ActionType(h.default.t(112))})).catchType(d.ServerStatusCodeError,(s=>{if(s.status>=400){var n=i.equals(p)?h.default.t(181):h.default.t(112);return new o.ActionType(n,{actionText:h.default.t(195),actionHandler:()=>v(e,t,a,r)})}})).then((()=>i.equals(p)?new o.ActionType(h.default.t(180)):new o.ActionType(h.default.t(111))));return l.default.openToast(n.createElement(o.ActionToast,{id:r,initialAction:m,pendingAction:g})),s.then((t=>{t._duplicate||e.set({tag:t.tag,eurl:t.eurl,token:t.token})})).finally((()=>{e.pendingPic=void 0}))}function g(e,t=(0,o.genId)()){var{id:a}=e;if(!e.canDelete())return Promise.reject(new u.ActionError);var r=(0,f.requestDeletePicture)(a);e.pendingPic=e.fallbackType;var i=(0,c.getMaybeMeUser)(),s=a.equals(i)?new o.ActionType(h.default.t(179)):new o.ActionType(h.default.t(110)),p=r.catch((()=>{throw __LOG__(3)(m()),a.equals(i)?new o.ActionType(h.default.t(177)):new o.ActionType(h.default.t(108))})).catchType(d.ServerStatusCodeError,(r=>{if(r.status>=400){var s=a.equals(i)?h.default.t(177):h.default.t(108);return new o.ActionType(s,{actionText:h.default.t(195),actionHandler:()=>g(e,t)})}})).then((()=>a.equals(i)?new o.ActionType(h.default.t(178)):new o.ActionType(h.default.t(109))));return l.default.openToast(n.createElement(o.ActionToast,{id:t,initialAction:s,pendingAction:p})),r.then((t=>{t._duplicate||e.set({tag:void 0,eurl:void 0})})).finally((()=>{e.pendingPic=void 0}))}},6446:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.queryServerProps=function(){return i||(i=(0,n.queryServerProps)().then((e=>{o.default.updateProps(e)})).catchType(s.ServerStatusCodeError,(()=>{})).catchType(s.WebdDrop,(()=>{})).finally((()=>{i=null})))};var i,s=a(19741),n=a(8766),o=r(a(72424))},18920:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.searchFirstPartyStickers=function(){return _.apply(this,arguments)};var s=i(a(70417)),n=i(a(52954)),o=a(8430),l=r(a(96452)),d=i(a(93601)),u=a(95595),c=i(a(40210)),h=i(a(86484)),f=i(a(74185)),p=i(a(99340)),m="https://static.whatsapp.net/sticker";function _(){return(_=(0,n.default)((function*(e,t){for(var a,r=(0,o.getCountryShortcodeByPhone)(null===(a=(0,u.getMaybeMeUser)())||void 0===a?void 0:a.user)||"default",i=0,n=0;i<=250;)i+=3+encodeURIComponent(e[n++]).length;var _=e.slice(0,n-1).join(","),v={country:r,ver:"2"},g=f.default.build(m,(0,s.default)((0,s.default)({},v),{},{search:_})),E=yield(0,d.default)(g,{signal:null==t?void 0:t.signal}),y=new c.default.StickerCommonQueryToStaticServer;if(y.set({httpResponseCode:E.status,params:new p.default(v).toString(),queryType:c.default.QUERY_TYPE.STICKER_SEARCH}),y.commit(),!E.ok)throw new l.InvalidServerResponseError(g,E.status.toString(),"Invalid response from WhatsApp stickers endpoint");var S=yield E.json();if(null==S)throw new l.InvalidServerResponseError(g,E.status.toString(),"Invalid response from WhatsApp stickers endpoint: ".concat(JSON.stringify(S)));return S.map(((e,t)=>new h.default({mimetype:e.mimetype,width:e.width,height:e.height,filehash:e["file-hash"],directPath:e["direct-path"],mediaKey:e["media-key"],id:e["file-hash"],encFilehash:e["enc-file-hash"],mediaKeyTimestamp:0,index:t})))}))).apply(this,arguments)}},92816:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.setArchiveClassicSetting=function(e){return _(e)},t.setArchiveEnabledSetting=function(e){return function(e){return Promise.resolve().then((()=>{h.default.archive.enabled!==e&&(h.default.archive=(0,n.default)((0,n.default)({},h.default.archive),{},{enabled:e}))}))}(e)};var s=i(a(19976)),n=i(a(70417)),o=r(a(2784)),l=a(12073),d=i(a(79711)),u=a(19741),c=i(a(17957)),h=i(a(2734)),f=i(a(37513));function p(){var e=(0,s.default)(["models:settings:setArchiveClassicSetting dropped"]);return p=function(){return e},e}function m(){var e=(0,s.default)(["models:settings:setArchiveClassicSetting failed with server error"]);return m=function(){return e},e}function _(e,t=(0,l.genId)()){var a=(0,f.default)(e),r=new l.ActionType(c.default.t(39)),i=Boolean(h.default.archive.classic),s=a.then((()=>{var a=e?c.default.t(37):c.default.t(40);return new l.ActionType(a,{actionText:c.default.t(199),actionHandler:()=>_(i,t)})})).catchType(u.ServerStatusCodeError,(e=>{if(__LOG__(3)(m()),e.status>=400)return new l.ActionType(c.default.t(38))})).catch((()=>{throw __LOG__(3)(p()),new l.ActionType(c.default.t(38),{actionText:c.default.t(195),actionHandler:()=>_(e,t)})}));return d.default.openToast(o.createElement(l.ActionToast,{id:t,initialAction:r,pendingAction:s})),a.then((()=>{h.default.archive.classic!==e&&(h.default.archive=(0,n.default)((0,n.default)({},h.default.archive),{},{classic:e}))}))}},96911:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.getStatus=function(e){return(0,h.getStatus)(e).then((t=>{var r={id:e};if((0,f.isNumber)(t.status))switch(t.status){case 429:r.stale=!0;var i=a(76019).default.get(e);i&&!(0,f.isString)(i.status)&&(r.status="");break;default:r.status=""}else{var s=t.status;if(t.stale){var n=a(76019).default.get(e);n&&(s=n.status)}r.status=s}return r}))},t.setMyStatus=function e(t,r=(0,o.genId)()){var i=t.trim();if(!i)return Promise.reject(new d.ActionError);var s=(0,h.setMyStatus)(i),f=new o.ActionType(c.default.t(194)),m=(0,u.getMaybeMeUser)(),_=a(76019).default,v=_.assertGet(m).status,g=s.then((t=>200===t.status?new o.ActionType(c.default.t(192),{actionText:c.default.t(199),actionHandler:()=>e(v,r)}):t.status>=400?new o.ActionType(c.default.t(193)):void 0)).catch((()=>{throw __LOG__(3)(p()),new o.ActionType(c.default.t(193),{actionText:c.default.t(195),actionHandler:()=>e(t,r)})}));return l.default.openToast(n.createElement(o.ActionToast,{id:r,initialAction:f,pendingAction:g})),s.then((e=>{200!==e.status||e._duplicate||(_.assertGet(m).status=t)}))};var s=i(a(19976)),n=r(a(2784)),o=a(12073),l=i(a(79711)),d=r(a(96452)),u=a(95595),c=i(a(17957)),h=a(6829),f=a(11419);function p(){var e=(0,s.default)(["models:statusCollection:setMyStatus dropped"]);return p=function(){return e},e}},95207:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.applyContactBusinessProps=t.updateContactBusinessProperties=void 0;var i=r(a(52954)),s=r(a(50935)),n=r(a(7470)),o=r(a(18120)),l=a(84066),d=a(75637),u=(e,t)=>{var a={};for(var r of e){var{id:i}=r;a[i.user]=r}for(var s of t){var{id:n}=s,o=a[n.user],l=Boolean(o),{level:d,name:u,isApi:c,actualActors:f,hostStorage:p,privacyModeTs:m}=o||{},_={isBusiness:l,isEnterprise:Boolean(c),verifiedLevel:h(d),verifiedName:u,actualActors:f,hostStorage:p,privacyModeTs:m};s.set(_)}};t.updateContactBusinessProperties=u;var c=function(){var e=(0,i.default)((function*(){if(o.default.supportsFeature(o.default.F.MD_BACKEND)){var e=(yield(0,l.getAllVerifiedNames)()).map((({id:e,name:t,level:a,isApi:r,actualActors:i,hostStorage:s,privacyModeTs:n})=>({id:(0,d.createUserWid)(e),name:t,level:a,isApi:r,actualActors:i,hostStorage:s,privacyModeTs:n})));u(e,n.default.toArray())}}));return function(){return e.apply(this,arguments)}}();function h(e){if(null!=e){switch(e){case"unknown":return s.default.VERIFIED_LEVEL.UNKNOWN;case"low":return s.default.VERIFIED_LEVEL.LOW;case"high":return s.default.VERIFIED_LEVEL.HIGH}return s.default.VERIFIED_LEVEL.UNKNOWN}}t.applyContactBusinessProps=c},40690:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.updateVerifiedInfo=u,t.updateContactPropertiesOnNewChat=function(e){var t=!i.default.get(e);if(n.default.supportsFeature(n.default.F.MD_BACKEND)&&t)return(0,o.default)(e).then((t=>{if(t){var{bizInfo:a}=t;if(a)return u(s.default.gadd(e),a.verifiedName)}}));return Promise.resolve()};var i=r(a(43334)),s=r(a(7470)),n=r(a(18120)),o=r(a(55042)),l=a(95207),d=a(84066);function u(e,t){var a=e.id,{name:r,level:i,isApi:s,serial:n,actualActors:o,hostStorage:u,privacyModeTs:c}=t;return(0,l.updateContactBusinessProperties)([{id:a,name:r,level:i,isApi:s,actualActors:o,hostStorage:u,privacyModeTs:c}],[e]),(0,d.createOrUpdateVerifiedBusinessName)(void 0,a,i,n,r,s,o,u,c)}},72502:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendCallOffer=function(e){return(0,r.sendCallOfferBridge)(e)},t.sendCallSignalingMsg=function(e,t){return(0,r.sendCallSignalingMsgBridge)(e,t)},t.sendCallEnd=function(e,t){return(0,r.sendCallEndBridge)(e,t)},t.sendEncRekey=function(e){return(0,r.sendEncRekeyBridge)(e)},t.queryCall=function(e,t){return(0,r.sendQueryCallBridge)(e,t)},t.prepareRetryReceipt=function(e){return(0,r.prepareRetryReceiptBridge)(e)};var r=a(65978)},4870:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);t.Z=void 0;var s=i(a(19976)),n=i(a(70417)),o=i(a(84573)),l=i(a(16760)),d=i(a(98537)),u=i(a(54004)),c=a(73559),h=a(84139),f=a(68519),p=a(60339),m=i(a(19034)),_=i(a(31225)),v=i(a(50935)),g=a(28703),E=a(95595),y=a(84962),S=i(a(18120)),C=i(a(86014)),T=i(a(77865)),M=i(a(61941)),b=r(a(69338)),P=i(a(49213)),A=i(a(53397)),I=i(a(74185)),O=i(a(5361)),N=a(21617),w=i(a(68384)),D=i(a(12767));function R(){var e=(0,s.default)(["LiveLocation:update without lat/lng"]);return R=function(){return e},e}function L(){var e=(0,s.default)(["LiveLocation:update with lat/lng"]);return L=function(){return e},e}function k(){var e=(0,s.default)(["bin-recv: response,location"]);return k=function(){return e},e}function x(){var e=(0,s.default)(["LiveLocation:response without lat/lng"]);return x=function(){return e},e}function F(){var e=(0,s.default)(["LiveLocation:response with lat/lng"]);return F=function(){return e},e}function G(){var e=(0,s.default)(["LiveLocation:response with no participants"]);return G=function(){return e},e}function U(){var e=(0,s.default)(["bin-recv: response,location"]);return U=function(){return e},e}function B(){var e=(0,s.default)(["drop: cannot create MsgKey: ",""]);return B=function(){return e},e}function j(){var e=(0,s.default)(["drop: broadcast"]);return j=function(){return e},e}function V(){var e=(0,s.default)(["drop: failed parsing wmi"]);return V=function(){return e},e}function H(){var e=(0,s.default)(["wmi error: ",""]);return H=function(){return e},e}function W(){var e=(0,s.default)(["drop: no bytes"]);return W=function(){return e},e}function K(){var e=(0,s.default)(["drop: not message"]);return K=function(){return e},e}function Y(){var e=(0,s.default)(["expected tag: received, received tag: ",", tag id: ",""]);return Y=function(){return e},e}function q(){var e=(0,s.default)(["expected tag: user, received tag: ",", tag id: ",""]);return q=function(){return e},e}function z(){var e=(0,s.default)(["wap:requestMediaReupload:malformed"]);return z=function(){return e},e}function Q(){var e=(0,s.default)(["wap:requestMediaReupload:error ",""]);return Q=function(){return e},e}function J(){var e=(0,s.default)(["Assertion failed!"]);return J=function(){return e},e}function X(){var e=(0,s.default)(["wap:requestMediaReupload:error ",""]);return X=function(){return e},e}function Z(){var e=(0,s.default)(["bin-recv: response,media"]);return Z=function(){return e},e}function $(){var e=(0,s.default)(["bin-recv: response,statusv3"]);return $=function(){return e},e}function ee(){var e=(0,s.default)(["bin-recv: response,statusv3"]);return ee=function(){return e},e}function te(){var e=(0,s.default)(["bin-recv: response,msg"]);return te=function(){return e},e}function ae(){var e=(0,s.default)(["wap:msgCreateRecord:sendMedia error ",""]);return ae=function(){return e},e}function re(){var e=(0,s.default)(["wap:msgCreateRecord mPromise error (","): ",""]);return re=function(){return e},e}function ie(){var e=(0,s.default)(["bin-recv: response,receipt"]);return ie=function(){return e},e}function se(){var e=(0,s.default)(["bin-recv: response,resume"]);return se=function(){return e},e}function ne(){var e=(0,s.default)(["bin-recv: response,emoji"]);return ne=function(){return e},e}function oe(){var e=(0,s.default)(["bin-recv: response,actions"]);return oe=function(){return e},e}function le(){var e=(0,s.default)(["bin-recv: response,msg,info"]);return le=function(){return e},e}function de(){var e=(0,s.default)(["bin-recv: response,url"]);return de=function(){return e},e}function ue(){var e=(0,s.default)(["bin-recv: response,identity"]);return ue=function(){return e},e}function ce(){var e=(0,s.default)(["received tag: ",", tag id: ",""]);return ce=function(){return e},e}function he(){var e=(0,s.default)(["expected tag: chat, received tag: ",", tag id: ",""]);return he=function(){return e},e}function fe(){var e=(0,s.default)(["expected tag: broadcast, received tag: ",", tag id: ",""]);return fe=function(){return e},e}function pe(){var e=(0,s.default)(["expected tag: battery, received tag: ",", tag id: ",""]);return pe=function(){return e},e}function me(){var e=(0,s.default)(["create group tag"]);return me=function(){return e},e}var _e=(0,n.default)((0,n.default)({version:"17",M:C.default,BinaryProtocol:null,N:null,addContact:function(e){return new Promise(((t,a)=>{var r=this.actionNode("set",[["contacts",{type:"add"},e]]);this.binSend("send",r,a,{clientCacheable:!0,onSend:this.binWrap(t,t),onDrop:this.wrap(a)},{debugString:"action,contact,add",metricName:"CONTACT",ackRequest:!0})}))},addParticipants:function(e,t){return this.setGroupParticipants("add",e,t)},changeSubject:function(e,t){return new Promise(((a,r)=>{var i=D.default.tag(),s=this.wrap(a);s.tag=i;var n=["group",{id:i,jid:e,type:"subject",author:(0,E.getMaybeMeUser)(),subject:t},void 0],o=this.actionNode("set",[n]);this.binSend("send",o,r,{clientCacheable:!0,onSend:s,onDrop:this.wrap(r)},{debugString:"action,group,subject",metricName:"GROUP",ackRequest:!1,expires:(0,m.default)().unix()})}))},chatFindQuery:function(e,t){return new Promise(((a,r)=>{var i={type:"chat"};"boolean"==typeof e&&e?i.kind="retry":"string"==typeof e&&(i.jid=e);var s=this.queryNode(i,void 0);this.binSend("sendEphemeral",s,r,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var t=[],r=this.N.children(e);if("response"===this.N.tag(e)&&"chat"===this.N.attr("type",e))if("true"===this.N.attr("duplicate",e))t="preempted";else if(Array.isArray(r)){var i,s=r.length;for(i=0;i<s;i++){var n=this.parseChat(r[i]);n&&t.push(n)}}a(t)})).catch(r)}),a),logOnSend:t,onDrop:this.wrap(r)},{debugString:["query","chat",e].join(),metricName:"QUERY_CHAT",ackRequest:!1})}))},contactFindQuery:function(e,t){return new Promise(((a,r)=>{var i=this.queryNode({type:"contacts",kind:e?"retry":void 0},void 0);this.binSend("send",i,r,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var t=[],r=this.N.children(e);if("response"===this.N.tag(e)&&"contacts"===this.N.attr("type",e))if("true"===this.N.attr("duplicate",e))t="preempted";else if(Array.isArray(r)){var i,s=r.length;for(i=0;i<s;i++){var n=this.parseContact(r[i]);n&&t.push(n)}}a({checksum:this.N.attr("checksum",e),data:t})})).catch(r)}),a),logOnSend:t,onDrop:this.wrap(r)},{debugString:"query,contacts, "+String(e),metricName:"QUERY_CONTACTS",ackRequest:!1})}))},createGroup:function(e,t,a=!1){return new Promise(((a,r)=>{var i=D.default.tag(),s=this.wrap(a);s.tag=i;var n=t.map((e=>["participant",{jid:e},void 0]));__LOG__(2)(me());var o=["group",{id:i,type:"create",author:(0,E.getMaybeMeUser)(),subject:e},n],l=this.actionNode("set",[o]);this.binSend("send",l,r,{clientCacheable:!0,onSend:s,onDrop:this.wrap(r)},{debugString:"action,group,create",metricName:"GROUP",ackRequest:!1,expires:(0,m.default)().unix()})}))},deletePicture:function(e){return new Promise(((t,a)=>{var r=D.default.tag(),i=this.wrap(t);i.tag=r;var s=["picture",{id:r,jid:e,type:"delete"},void 0],n=this.actionNode("set",[s]);this.binSend("send",n,a,{clientCacheable:!0,onSend:i,onDrop:this.wrap(a)},{debugString:"action,delete_pic,"+e,metricName:"PIC",ackRequest:!1,expires:(0,m.default)().unix()})}))},groupMetadataFindFromPhone:function(e){return new Promise(((t,a)=>{var r=this.queryNode({type:"group",jid:e},[]);this.binSend("sendEphemeral",r,a,{onSend:this.binWrap((r=>{this.BinaryProtocol.read(r).then((a=>{if("response"===this.N.tag(a)&&"group"===this.N.attr("type",a)){var r=this.N.children(a),i=r&&r[0];if(i)if("missing"!==this.N.attr("type")){var s,n=[],o=this.N.children(i),l=!1;Array.isArray(o)&&o.forEach((e=>{switch(this.N.tag(e)){case"participant":n.push({id:this.N.attr("jid",e),isAdmin:"admin"===this.N.attr("type",e)});break;case"description":s=this.N.dataStr(e);break;case"support":l=!0}})),t({status:"ok",data:{creation:parseInt(this.N.attr("create",i),10)||void 0,desc:s,id:e,owner:this.N.attr("creator",i),participants:n,support:l}})}else t({status:"missing"});else t({status:"error",info:"bad format: no group node"})}else t({status:"error",info:"bad format: response incorrect"})})).catch(a)}),t),onDrop:this.wrap(a)},{debugString:"query,group,"+e,metricName:"QUERY_GROUP",ackRequest:!1})}))},leaveGroup:function(e){return new Promise(((t,a)=>{var r=D.default.tag(),i=this.wrap(t);i.tag=r;var s=["group",{id:r,jid:e,type:"leave",author:(0,E.getMaybeMeUser)()},void 0],n=this.actionNode("set",[s]);this.binSend("send",n,a,{clientCacheable:!0,onSend:i,onDrop:this.wrap(a)},{debugString:"action,group,delete",metricName:"GROUP",ackRequest:!1,expires:(0,m.default)().unix()})}))},parseBattery:function(e){if("battery"!==this.N.tag(e))return __LOG__(4,void 0,new Error,!0)(pe(),this.N.tag(e),this.N.attr("id",e)),void SEND_LOGS("wap-unexpected-tag");var t=Math.min(parseInt(this.N.attr("value",e),10)||-1,100),a=this.N.attr("live",e),r={battery:t<0?void 0:t,plugged:a?"true"===a:void 0};return this.dropIfConditionMet([t<0&&!a],r)},parseBCUpdate:function(e){if("broadcast"!==this.N.tag(e)||"modify"!==this.N.attr("type",e))return __LOG__(4,void 0,new Error,!0)(fe(),this.N.tag(e),this.N.attr("id",e)),void SEND_LOGS("wap-unexpected-tag");var t=this.N.attr("jid",e),a=this.N.children(e),r=[];if(Array.isArray(a)){var i,s,n,o=a.length;for(i=0;i<o;i++)s=a[i],n=this.N.attr("jid",s),"recipient"===this.N.tag(s)&&n&&w.default.isUser(n)&&r.push({id:n})}var l=[!t,!w.default.isBroadcast(t),0===r.length];return this.dropIfConditionMet(l,{id:t,participants:r})},parseChat:function(e){if("chat"!==this.N.tag(e))return __LOG__(4,void 0,new Error,!0)(he(),this.N.tag(e),this.N.attr("id",e)),void SEND_LOGS("wap-unexpected-tag");var t=this.N.attr("kind",e),a=this.N.attr("type",e),r=this.N.attr("jid",e),i=parseInt(this.N.attr("t",e),10)||void 0,s=parseInt(this.N.attr("mute",e),10),n=parseInt(this.N.attr("before",e),10)||void 0,o="true"===this.N.attr("archive",e),l="true"===this.N.attr("read_only",e),d=parseInt(this.N.attr("modify_tag",e),10)||void 0,u=this.N.attr("name",e)||void 0,c=this.safeParseInt(e,"count"),h="true"===this.N.attr("message",e),f="true"===this.N.attr("star",e),p="false"===this.N.attr("spam",e),m=parseInt(this.N.attr("pin",e),10)||0,_=this.N.attr("old_jid",e),v=this.N.attr("new_jid",e),g=parseInt(this.N.attr("ephemeral",e),10)||0,E=parseInt(this.N.attr("eph_setting_ts",e),10)||0;switch(t){case"text":case"image":case"video":case"gif":case"audio":case"ptt":case"document":case"location":case"vcard":case"url":case"sticker":break;default:t=void 0}"ahead"===a&&(a="clear");var y,S,C=this.N.children(e);if(Array.isArray(C)){var T,M;y=[],S=[];var b=C.length;for(T=0;T<b;T++)if(M=C[T],"item"===this.N.tag(M)){var P=this.N.attr("index",M);P&&y.push([P,"true"===this.N.attr("owner",M),this.N.attr("participant",M)])}else if("label"===this.N.tag(M)){var A=this.N.attr("id",M);A&&S.push(A)}else{var I=this.parseMsgMessage(M,"response");I&&y.push(I)}}var O={id:r,t:i,type:a,kind:t,keys:y,before:n,archive:o,isReadOnly:l,unreadCount:c,muteExpiration:isNaN(s)?void 0:s,modifyTag:d,name:u,pendingMsgs:h,star:f,notSpam:p,pin:m,changeNumberOldJid:_,changeNumberNewJid:v,ephemeralDuration:w.default.isUser(r)?g:void 0,ephemeralSettingTimestamp:w.default.isUser(r)?E:void 0,labels:S};this.pruneUndefinedProps(O);var N=[a&&"delete"!==a&&"clear"!==a&&"ephemeral"!==a&&"archive"!==a&&"unarchive"!==a&&"mute"!==a&&"star"!==a&&"unstar"!==a&&"spam"!==a&&"modify_tag"!==a&&"pin"!==a&&"modify"!==a,!a&&!r,o&&a&&"clear"!==a,"clear"!==a&&n&&n>0,"clear"!==a&&"star"!==a&&"unstar"!==a&&y&&y.length>0];return this.dropIfConditionMet(N,O)},parseMsg:function(e,t){switch(this.N.tag(e)){case"message":return this.parseMsgMessage(e,t);default:return __LOG__(4,void 0,new Error,!0)(ce(),this.N.tag(e),this.N.attr("id",e)),void SEND_LOGS("wap-unknown-tag")}},parseIdentity:function(e){var t=this.N.child("raw",e),a=this.N.child("text",e);if(t&&a&&this.N.children(t)instanceof ArrayBuffer&&this.N.dataStr(a))return{jid:this.N.attr("jid",e),binary:this.N.children(t),string:this.N.dataStr(a)}},profilePicFindThumbFromPhone:function(e,t,a){return new Promise(((r,i)=>{var s={type:"preview",jid:e};t&&t.tag&&t.raw&&(s.id=t.tag),a&&(s.kind="status");var n=this.queryNode(s,[]);this.binSend("sendEphemeral",n,i,{onSend:this.binWrap((a=>{this.BinaryProtocol.read(a).then((a=>{"response"===this.N.tag(a)&&"preview"===this.N.attr("type",a)||i("Not response or preview");var s=this.N.children(a),n=s&&s[0];if(n||i("Missing preview node"),"missing"===this.N.attr("type",n))r({id:e,tag:void 0,raw:void 0});else{var o,l=this.N.attr("id",n);if(t&&l===t.tag&&t.raw)o=t.raw;else{var d=this.N.children(n);o=d?(0,p.encodeB64)(d):void 0}r({id:e,tag:l,raw:o})}})).catch(i)}),r),onDrop:this.wrap(i)},{debugString:"query,thumb,"+e,metricName:"QUERY_PREVIEW",ackRequest:!1})}))},promoteParticipants:function(e,t){return this.setGroupParticipants("promote",e,t)},queryIdentity:function(e){return new Promise(((t,a)=>{var r=this.queryNode({type:"identity",jid:e},void 0);this.binSend("sendEphemeral",r,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var a=void 0;__LOG__(2)(ue()),"response"===this.N.tag(e)&&"identity"===this.N.attr("type",e)&&(a=this.parseIdentity(e)),t(a)})).catch(a)}),t),onDrop:this.wrap(a)},{debugString:"query,identity,".concat(e),metricName:"QUERY_IDENTITY",ackRequest:!1})}))},queryLinkPreview:function(e){return new Promise(((t,a)=>{var r=this.queryNode({type:"url",url:e},void 0);this.binSend("sendEphemeral",r,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var a=void 0;if(__LOG__(2)(de()),"response"===this.N.tag(e)&&"url"===this.N.attr("type",e)){var r=this.N.children(e);a={title:this.N.attr("title",e),description:this.N.attr("description",e),canonicalUrl:this.N.attr("canonical-url",e),matchedText:this.N.attr("matched-text",e),preview:this.N.attr("preview",e),thumbnail:r?(0,p.encodeB64)(r):void 0,doNotPlayInline:"true"===this.N.attr("do-not-play-inline",e)}}t(a)})).catch(a)}),t),onDrop:this.wrap(a)},{debugString:"query,url",metricName:"QUERY_URL",ackRequest:!1})}))},queryMsgInfo:function(e){var t=e=>{var t,a,r=[];if(Array.isArray(e)){t=e.length;for(var i=0;i<t;i++)a=e[i],"item"===this.N.tag(a)&&this.N.attr("jid",a)&&this.N.attr("t",a)&&r.push({id:this.N.attr("jid",a),t:parseInt(this.N.attr("t",a),10)||0})}return r};return new Promise(((a,r)=>{var i=this.queryNode({type:"message_info",index:e.id,jid:e.remote},void 0);this.binSend("sendEphemeral",i,r,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var r={played:[],playedRemaining:0,read:[],readRemaining:0,delivery:[],deliveryRemaining:0};if(__LOG__(2)(le()),"response"===this.N.tag(e)&&"message_info"===this.N.attr("type",e)){var i=this.N.child("played",e),s=this.N.child("read",e),n=this.N.child("delivery",e),o=this.N.children(i),l=this.N.children(s),d=this.N.children(n),u=parseInt(this.N.attr("count",e),10)||0;r.played=t(o),r.read=t(l),r.delivery=t(d);var c=u-r.played.length,h=u-r.played.length-r.read.length,f=u-r.played.length-r.read.length-r.delivery.length;r.playedRemaining=c<0?0:c,r.readRemaining=h<0?0:h,r.deliveryRemaining=f<0?0:f}a(r)})).catch(r)}),a),onDrop:this.wrap(r)},{debugString:["query,msg,info",e.id,e.remote,e.fromMe].join(),metricName:"QUERY_MESSAGE_INFO",ackRequest:!1})}))},queryReceivedActions:function(e){return new Promise(((t,a)=>{var r=e.map((e=>["item",{id:e},void 0])),i=this.queryNode({type:"action"},r);this.binSend("sendEphemeral",i,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var a=[],r=this.N.children(e);if(__LOG__(2)(oe()),"response"===this.N.tag(e)&&"action"===this.N.attr("type",e))if(Array.isArray(r)){var i,s=r.length;for(i=0;i<s;i++){var n=r[i],o=this.N.attr("id",n),l=parseInt(this.N.attr("code",n),10)||0;"item"===this.N.tag(n)&&o&&0!==l&&a.push({id:o,code:l})}}else"true"===this.N.attr("replaced",e)&&(a="replaced");t(a)})).catch(a)}),t),onDrop:this.wrap(a),serverCacheable:!0},{debugString:"query,actions",metricName:"QUERY_ACTIONS",ackRequest:!1})}))},recentEmojiQuery:function(e){return new Promise(((t,a)=>{var r=Array.isArray(e)?e.map((e=>["item",{code:e.id,value:e.weight.toString()},void 0])):void 0,i=this.queryNode({type:"emoji"},r);this.binSend("sendEphemeral",i,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var a=[],r=this.N.children(e);if(__LOG__(2)(ne()),"response"===this.N.tag(e)&&"emoji"===this.N.attr("type",e)&&Array.isArray(r)){var i,s=r.length;for(i=0;i<s;i++){var n=r[i],o=this.N.attr("code",n),l=parseFloat(this.N.attr("value",n))||0;"item"===this.N.tag(n)&&o&&l&&!isNaN(l)&&a.push({id:o,weight:l})}}t(a)})).catch(a)}),t),onDrop:this.wrap(a)},{debugString:"query,emoji",metricName:"QUERY_EMOJI",ackRequest:!1})}))},removeParticipants:function(e,t){return this.setGroupParticipants("remove",e,t)},resyncMessages:function(e){return new A.default(((t,a)=>{var r=e.map((e=>{var t={jid:e.wid,index:e.id,owner:e.fromMe,participant:e.participant,archive:(!!e.archive).toString(),spam:(!e.notSpam).toString(),old_jid:e.changeNumberOldJid,new_jid:e.changeNumberNewJid};return e.mute&&(t.mute=e.mute.toString()),w.default.isUser(e.wid)&&e.ephemeralDuration&&(t.ephemeral=e.ephemeralDuration.toString()),w.default.isUser(e.wid)&&null!=e.ephemeralSettingTimestamp&&(t.eph_setting_ts=e.ephemeralSettingTimestamp.toString()),e.active&&(t.active="true"),w.default.isGroup(e.wid)&&(t.read_only=(!!e.isReadOnly).toString()),e.modifyTag&&(t.modify_tag=e.modifyTag.toString()),e.unreadCount&&(t.count=e.unreadCount.toString()),e.pin&&(t.pin=e.pin.toString()),["last",t,void 0]})),i=this.queryNode({type:"resume"},r);this.binSend("sendEphemeral",i,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var a=[],r=this.N.children(e);if(__LOG__(2)(se()),"response"===this.N.tag(e)&&"resume"===this.N.attr("type",e)&&Array.isArray(r)){var i,s=r.length;for(i=0;i<s;i++){var n=this.parseChat(r[i]);n&&a.push(n)}}t({checksum:this.N.attr("checksum",e),statusChecksum:this.N.attr("status",e),labelsChecksum:this.N.attr("label",e),quickRepliesChecksum:this.N.attr("quick_reply",e),stickerPackChecksum:this.N.attr("sticker_pack",e),recentStickersChecksum:this.N.attr("recent_stickers",e),starredStickersChecksum:this.N.attr("starred_stickers",e),data:a})})).catch(a)}),t),onDrop:this.wrap(a),serverCacheable:!0},{debugString:"query,resume",metricName:"QUERY_RESUME",ackRequest:!1})}))},resyncReceipts:function(e){return new Promise(((t,a)=>{var r=e.map((e=>["last",{jid:e.remote,index:e.id,owner:e.fromMe.toString(),participant:e.participant,t:e.t.toString(),pay_t:e.payT&&e.payT.toString()},void 0])),i=this.queryNode({type:"receipt"},r);this.binSend("sendEphemeral",i,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var a=[],r=this.N.children(e);if(__LOG__(2)(ie()),"response"===this.N.tag(e)&&"receipt"===this.N.attr("type",e)&&Array.isArray(r)){var i,s,n,o=r.length;for(i=0;i<o;i++){s=r[i],n=this.N.children(s);var l=this.N.attr("jid",s),d=this.N.attr("t",s),u=this.N.attr("pay_t",s);if("receipt"===this.N.tag(s)&&l&&(d||u)&&Array.isArray(n)){var c=void 0,h=[],f=[],p=n.length;for(c=0;c<p;c++){var m=n[c];if("item"===this.N.tag(m)){var _=this.N.attr("index",m),v="true"===this.N.attr("owner",m),g=parseInt(this.N.attr("status",m),10)||0,E=this.N.attr("participant",m),y=parseInt(this.N.attr("t",m),10)||void 0;_&&0!==g&&g<=4&&h.push({id:_,fromMe:v,participant:E,status:g,t:y})}else if("message"===this.N.tag(m)){var S=this.parseMsgMessage(m);S&&f.push(S)}}h.length>0&&a.push({id:l,t:d&&parseInt(d,10),payT:u&&parseInt(u,10),acks:h,msgs:f})}}}t(a)})).catch(a)}),t),onDrop:this.wrap(a),serverCacheable:!0},{debugString:"query,receipt",metricName:"QUERY_RECEIPT",ackRequest:!1})}))},sendChatstateUpdate:function(e,t){if(["composing","paused","recording"].includes(e))return new Promise(((a,r)=>{var i=this.actionNode("set",[["presence",{type:e,to:t},void 0]],!0);this.binSend("sendEphemeralIgnore",i,r,{onSend:a,onDrop:r,epochIneligible:!0},{debugString:"action,chatstate,"+e,metricName:"PRESENCE",skipOffline:!0,ackRequest:!1})}))},sendConversationArchive:function(e,t,a){return this.sendConversationOpWithKey(t?"archive":"unarchive",e,a)},sendConversationClear:function(e,t,a){return this.sendConversationOpWithKey("clear",e,t,a)},sendConversationDelete:function(e,t){return this.sendConversationOpWithKey("delete",e,t)},sendConversationMute:function(e,t,a){return new Promise(((r,i)=>{var s=t?t.toString():void 0,n=a?a.toString():void 0,o=this.actionNode("set",[["chat",{type:"mute",mute:s,previous:n,jid:e},void 0]]);this.binSend("send",o,i,{clientCacheable:!0,onSend:this.wrap(r),onDrop:this.wrap(i)},{debugString:"action,chat,"+e+", "+(s?"mute,"+s:"unmute"),metricName:"CHAT",ackRequest:!0})}))},sendConversationNotSpam:function(e){return this.sendConversationOpWithKey("spam",e,void 0,!1)},sendConversationOpWithKey:function(e,t,a,r){return new Promise(((i,s)=>{var n,o;switch(e){case"clear":n=(!!r).toString();break;case"spam":o=(!!r).toString()}var l=this.actionNode("set",[["chat",{type:e,jid:t,index:a?a.id:void 0,owner:a?a.fromMe.toString():void 0,participant:a?a.participant:void 0,star:void 0!==n?n:void 0,spam:void 0!==o?o:void 0},void 0]]);this.binSend("send",l,s,{clientCacheable:!0,onSend:this.wrap(i),onDrop:this.wrap(s)},{debugString:"action,chat,"+[e,a,r].join(),metricName:"CHAT",ackRequest:!0})}))},sendConversationUnseen:function(e,t){return this.sendConversationSeen(e,t,-2)},sendMedia:function(e){return new Promise(((t,a)=>{var r=(0,u.default)(e);D.default.send({data:["query","sendMedia",r.url],onSend:this.wrap02((e=>{t((0,d.default)(r,e))})),onDrop:a})}))},sendMessageDelete:function(e,t,a){return new Promise(((r,i)=>{var s=t.map((e=>["item",{index:e.id,owner:e.fromMe.toString(),participant:e.participant},void 0])),n=this.actionNode("set",[["chat",{type:"clear",jid:e,media:a.toString()},s]]);this.binSend("send",n,i,{clientCacheable:!0,onSend:this.wrap(r),onDrop:this.wrap(i)},{debugString:"action,msgs,delete,"+[e,a,t.length].join(),metricName:"CHAT",ackRequest:!0})}))},sendMessagePlayed:function(e){return new Promise(((t,a)=>{var r=this.wrap(t),i=this.actionNode("set",[["received",{type:"played",index:e.id,from:e.remote,participant:e.participant},void 0]]);this.binSend("send",i,a,{onSend:r,onDrop:this.wrap(a)},{debugString:"action,played,"+e.toString(),metricName:"RECEIVED",ackRequest:!0})}))},sendMessageStarred:function(e,t,a){return new Promise(((r,i)=>{var s=t.map((e=>["item",{index:e.id,owner:e.fromMe.toString(),participant:e.participant},void 0])),n=this.actionNode("set",[["chat",{type:a?"star":"unstar",jid:e},s]]);this.binSend("send",n,i,{clientCacheable:!0,onSend:this.wrap(r),onDrop:this.wrap(i)},{debugString:"action,msgs,star,"+[e,a,t.length].join(),metrics:"CHAT",ackRequest:!0})}))},sendPresenceUpdate:function(e){if(["available","unavailable"].includes(e))return new Promise(((t,a)=>{var r="available"===e,i=this.actionNode("set",[["presence",{type:e},void 0]],!r),s=r?"sendEphemeral":"sendEphemeralIgnore";this.binSend(s,i,a,{onSend:r?this.wrap(t):t,onDrop:r?this.wrap(a):t,epochIneligible:!r},{debugString:"action,presence,"+e,metricName:"PRESENCE",available:"available"===e,ackRequest:r})}))},sendSetBlock:function(e,t){return new Promise(((a,r)=>{var i=t.map((e=>["user",{jid:e.jid},void 0])),s=["block",{type:e?"add":"remove"},i],n=this.actionNode("set",[s]);this.binSend("send",n,r,{clientCacheable:!0,onSend:this.wrap(a),onDrop:this.wrap(r)},{debugString:"action,block,"+e+","+(0,l.default)(t,"jid").join(","),metricName:"BLOCK",ackRequest:!1,expires:(0,m.default)().unix()})}))},sendSetPicture:function(e,t,a){return new Promise(((r,i)=>{var s=I.default.parseDataURL(t).data,n=I.default.parseDataURL(a).data,o=(0,p.decodeB64)(s),l=(0,p.decodeB64)(n),d=D.default.tag(),u=this.wrap(r);u.tag=d;var c=["picture",{id:d,jid:e,type:"set"},[["image",void 0,l],["preview",void 0,o]]],h=this.actionNode("set",[c]);this.binSend("send",h,i,{clientCacheable:!0,onSend:u,onDrop:this.wrap(i)},{debugString:"action,set_pic,"+e,metricName:"PIC",ackRequest:!1,expires:(0,m.default)().unix()})}))},sendSetStatus:function(e){return new Promise(((t,a)=>{var r=this.wrap(t),i=this.actionNode("set",[["status",void 0,e]]);this.binSend("send",i,a,{clientCacheable:!0,onSend:r,onDrop:this.wrap(a)},{debugString:"action,status,set",metricName:"STATUS",ackRequest:!1,expires:(0,m.default)().unix()})}))},sendSpamReport:function(e){return new Promise(((t,a)=>{var r=this.actionNode("set",[["spam",{jid:e},void 0]]);this.binSend("send",r,a,{onSend:this.wrap(t),onDrop:this.wrap(a)},{debugString:"action,spam,"+e,metricName:"SPAM",ackRequest:!1,expires:(0,m.default)().unix()})}))},sendUnstarAll:function(e){return new Promise(((t,a)=>{var r=this.actionNode("set",[["chat",{type:"unstar",jid:e||void 0},void 0]]);this.binSend("send",r,a,{clientCacheable:!0,onSend:this.binWrap(t,t),onDrop:this.wrap(a)},{debugString:"action,unstar,all,"+e,metrics:"CHAT",ackRequest:!0,expires:(0,m.default)().unix()})}))},setGroupParticipants:function(e,t,a){return new Promise(((r,i)=>{var s=D.default.tag(),n=this.wrap(r),o=a.map((e=>["participant",{jid:e},void 0])),l=["group",{id:s,jid:t,type:e,author:(0,E.getMaybeMeUser)()},o],d=this.actionNode("set",[l]);this.binSend("send",d,i,{tag:s,clientCacheable:!0,onSend:n,onDrop:this.wrap(i)},{debugString:["action,group,participant",e,t].concat(a).join(),metricName:"GROUP",ackRequest:!1,expires:(0,m.default)().unix()})}))},setPushname:function(e){return new Promise(((t,a)=>{var r=this.actionNode("set",[["profile",{name:e},void 0]]);this.binSend("send",r,a,{onSend:this.binWrap(t,t),onDrop:this.wrap(a)},{debugString:"action,pushname",metricName:"PROFILE",ackRequest:!1})}))}},b.default),{},{parseLiveLocationMessageProto:function(e,t,a){e.type="location",e.isLive=!0,e.lat=void 0!==t.degreesLatitude?t.degreesLatitude:void 0,e.lng=void 0!==t.degreesLongitude?t.degreesLongitude:void 0,e.body=this.decodeBytes(t.jpegThumbnail)||"",e.accuracy=t.accuracyInMeters,e.speed=t.speedInMps,e.degrees=t.degreesClockwiseFromMagneticNorth,e.comment=(0,b.convertToTextWithoutSpecialEmojis)(t.caption),e.sequence=t.sequenceNumber,a&&(e.finalLat=void 0!==a.degreesLatitude?a.degreesLatitude:void 0,e.finalLng=void 0!==a.degreesLongitude?a.degreesLongitude:void 0,e.finalThumbnail=this.decodeBytes(a.jpegThumbnail)||"",e.finalAccuracy=a.accuracyInMeters,e.finalSpeed=a.speedInMps,e.finalDegrees=a.degreesClockwiseFromMagneticNorth,e.finalTimeOffset=a.timeOffset)},parseSendPaymentMessageProto:function(e,t,a){if(e.type="payment",this.callFeatureFlagFun(S.default.F.PAYMENTS,"parsePaymentInfo",e,a),S.default.supportsFeature(S.default.F.PAYMENTS)){e.subtype="send";var r=t.requestMessageKey;e.paymentRequestMessageKey=t.requestMessageKey?new T.default({fromMe:r.fromMe,remote:this.decodeJid(r.remoteJid),id:r.id,participant:this.decodeJid(r.participant)}):void 0,t.noteMessage&&(e.paymentNoteMsg={},t.noteMessage=this.parseMsgProto(t.noteMessage,e.paymentNoteMsg))}},parseRequestPaymentMessageProto:function(e,t,a){e.type="payment",this.callFeatureFlagFun(S.default.F.PAYMENTS,"parsePaymentInfo",e,a),S.default.supportsFeature(S.default.F.PAYMENTS)&&(e.subtype="request",t.currencyCodeIso4217&&!e.paymentCurrency&&(e.paymentCurrency=t.currencyCodeIso4217),t.amount1000&&!e.paymentAmount1000&&(e.paymentAmount1000=t.amount1000),t.requestFrom&&!e.paymentMessageReceiverJid&&(e.paymentMessageReceiverJid=this.decodeJid(t.requestFrom)),t.expiryTimestamp&&!e.paymentExpiryTimestamp&&(e.paymentExpiryTimestamp=t.expiryTimestamp),t.noteMessage&&(e.paymentNoteMsg={},t.noteMessage=this.parseMsgProto(t.noteMessage,e.paymentNoteMsg)))},parseGroupInviteMessageProto:function(e,t){e.type="groups_v4_invite",S.default.supportsFeature(S.default.F.GROUPS_V_4_JOIN_PERMISSION)&&(e.inviteCode=t.inviteCode,e.inviteCodeExp=t.inviteExpiration,e.inviteGrp=t.groupJid,e.inviteGrpName=t.groupName,e.inviteGrpJpegThum=this.decodeBytes(t.jpegThumbnail),e.comment=(0,b.convertToTextWithoutSpecialEmojis)(t.caption))},parseContextInfoProto:function(e,t,a){var r=t.quotedMessage,i=t.mentionedJid;e.quotedMsg=r&&this.parseMsgProto(r,{type:"unknown"}),e.quotedMsg&&"payment"===e.quotedMsg.type&&a&&this.callFeatureFlagFun(S.default.F.PAYMENTS,"parsePaymentInfo",e.quotedMsg,a),e.quotedStanzaID=t.stanzaId,e.quotedParticipant=this.decodeJid(t.participant),e.quotedRemoteJid=this.decodeJid(t.remoteJid),e.mentionedJidList=Array.isArray(i)?i.map(this.decodeJid):i,e.isForwarded=t.isForwarded,e.forwardingScore=t.forwardingScore,null!=t.expiration&&(e.ephemeralDuration=t.expiration),null!=t.ephemeralSettingTimestamp&&(e.ephemeralSettingTimestamp=t.ephemeralSettingTimestamp),null!=t.ephemeralSharedSecret&&(e.ephemeralSharedSecret=t.ephemeralSharedSecret)},msgCreateRecord:function(e){return(0,c.callSyncPromise)((()=>{if(["ptt","audio","image","video","document","sticker","product"].includes(e.type)){var t,a="ptt"===e.type?"audio":e.type;return e.asMms&&(t=e.isUnsentPhoneMsg()?{type:e.type}:e.avParams()),e.local&&!e.mediaKey?this.sendMedia(t):(0,d.default)({status:200,type:a},t)}})).catch((e=>(__LOG__(3)(re(),(0,f.encodeErrorInfo)(),e.stack),Promise.reject("wap:msgCreateRecord mPromise error")))).then((t=>{if(t&&200!==t.status)return __LOG__(3)(ae(),t.status),Promise.reject("wap:msgCreateRecord:sendMedia error ".concat(t.status));var r=e.id.id,i=(0,y.createMessageKey)(e),s=(0,y.createMsgProtobuf)(e,t||{}),n=!!e.multicast||void 0,o=!!e.urlText||void 0,l=!!e.urlNumber||void 0,d=!!e.clearMedia||void 0,u=w.default.isUser(e.id.remote)||null==e.ephemeralDuration?void 0:e.ephemeralDuration,c={key:i,message:s,messageTimestamp:e.t,multicast:n,urlText:o,urlNumber:l,clearMedia:d,ephemeralDuration:u},h=this.actionNode("relay",[["message",void 0,(0,f.encodeProto)(N.WebMessageInfoSpec,c).readBuffer()]]);return new Promise(((t,i)=>{this.binSend("send",h,i,{tag:r,onSend:this.wrap(t),onDrop:this.wrap(i),retryOn5xx:!0,resendGuard:()=>{var t=a(58885).default.get(e.id);return"protocol"===e.type||t&&t.id.equals(e.id)}},{debugString:["action","message",e.type,e.subtype,r].join(),debugObj:{xml:h,pb:c},metricName:"MESSAGE",ackRequest:!1})}))}))},msgFindQuery:function(e,t,a,r){var i=e;return new Promise(((e,s)=>{var o,l="";switch(i){case"after":t.id||(i="before");case"before":o={type:"message",kind:i,jid:t.remote,count:t.count.toString(),index:t.id,owner:void 0===t.fromMe?void 0:t.fromMe.toString(),participant:t.participant},l=[t instanceof T.default?t.toString():t.remote,t.count].join();break;case"search":o={type:"search",search:t.searchTerm,page:t.page.toString(),count:t.count.toString(),jid:t.remote,canceled:t.tagToCancel},t.label?o=(0,n.default)((0,n.default)({},o),{},{label:t.label}):t.filter&&(o=(0,n.default)((0,n.default)({},o),{},{filter:t.filter})),l=["search",t.page,t.count,t.jid,t.label].join();break;case"star":o={type:"star",media:"gif"===t.media?t.media:void 0,chat:t.chat,count:t.count.toString(),jid:t.remote,index:t.id,owner:void 0===t.fromMe?void 0:t.fromMe.toString(),participant:t.participant},l="starred";break;case"media":o={type:"media_message",media:"document"===t.media||"url"===t.media?t.media:void 0,count:t.count.toString(),kind:t.direction,jid:t.remote,index:t.id,owner:void 0===t.fromMe?void 0:t.fromMe.toString(),participant:t.participant},l="media"}var d=this.queryNode(o,void 0);this.binSend("sendEphemeral",d,s,{onSend:this.binWrap((a=>{this.BinaryProtocol.read(a).then((a=>{var r=[],s=this.N.children(a);if(__LOG__(2)(te()),"response"===this.N.tag(a)&&("message"===this.N.attr("type",a)||"star"===this.N.attr("type",a)||"search"===this.N.attr("type",a)||"media_message"===this.N.attr("type",a)||"label"===this.N.attr("type",a))){if(Array.isArray(s)){var n,o=s.length;for(n=0;n<o;n++){var l=this.parseMsg(s[n],"response");if(l)switch(i){case"star":("gif"!==t.media||"video"===l.type&&l.isGif)&&r.push(l);break;case"media":"document"===t.media&&"document"===l.type||"url"===t.media&&"chat"===l.type?r.push(l):t.media||r.push(l);break;default:r.push(l)}}}"search"===this.N.attr("type",a)||"label"===this.N.attr("type",a)?r={eof:"true"===this.N.attr("last",a),messages:r}:"media"!==i||t.media||(r={docCount:parseInt(this.N.attr("document",a),10)||void 0,linkCount:parseInt(this.N.attr("url",a),10)||void 0,mediaCount:parseInt(this.N.attr("media",a),10)||void 0,messages:r})}e(r)})).catch(s)}),e),onDrop:this.wrap(s),logOnSend:a,onTag:r,tagToCancel:t.tagToCancel},{debugString:"query,message,"+l,metricName:"search"===i?"QUERY_SEARCH":"QUERY_MESSAGES",ackRequest:!1})}))},queryVcard:function(e){return new Promise(((t,a)=>{var r=this.queryNode({type:"vcard",jid:e},void 0);this.binSend("sendEphemeral",r,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var a=[],r=this.N.children(e);if("response"===this.N.tag(e)&&"vcard"===this.N.attr("type",e)&&Array.isArray(r))for(var i=r.length,s=0;s<i;s++){var n=this.parseMsg(r[s],"response");!n||"vcard"!==n.type&&"multi_vcard"!==n.type||a.push(n)}t(a)})).catch(a)}),t),onDrop:this.wrap(a)},{debugString:"query,vcard,".concat(e),metricName:"QUERY_VCARD",ackRequest:!1})}))},parseContacts:function(e){if("contacts"===this.N.tag(e)){var t,a,r,i,s,n=this.N.attr("type",e),o=this.N.children(e);switch(n){case"frequent":if(Array.isArray(o)){a=o.length;for(var l=0;l<a;l++)switch(s=o[l],r=this.N.tag(s)){case"image":case"video":case"message":(i=this.N.attr("jid",s))&&(t||(t={type:"frequent"}),t[r]?t[r].push(i):t[r]=[i])}}}return t}},statusQuery:function(){switch(arguments.length){case 2:case 3:case 4:return this.statusQueryUpdate.apply(this,arguments);case 0:default:return this.statusQueryAll()}},statusQueryAll:function(){return new Promise(((e,t)=>{var a=this.queryNode({type:"status"},void 0);this.binSend("sendEphemeral",a,t,{onSend:this.binWrap((a=>{this.BinaryProtocol.read(a).then((t=>{var a={statuses:[]},r=this.N.children(t);if(__LOG__(2)(ee()),"response"===this.N.tag(t)&&"status"===this.N.attr("type",t)&&(a.checksum=this.N.attr("checksum",t),Array.isArray(r)))for(var i=r.length,s=0;s<i;s++){var n=r[s],o=this.N.attr("jid",n),l=this.N.attr("unread",n),d=this.N.attr("count",n),u=this.N.attr("t",n);if("status"===this.N.tag(n)&&o&&d&&u){var c={id:o,unreadCount:parseInt(l,10)||0,totalCount:parseInt(d,10)||0,t:parseInt(u,10)||0,_msgs:[]},h=this.N.children(n);if(Array.isArray(h))for(var f=h.length,p=0;p<f;p++)switch(this.N.tag(h[p])){default:case"message":var m=this.parseMsgMessage(h[p],"response");m&&c._msgs.push(m);break;case"picture":var _=this.N.children(h[p]);_ instanceof ArrayBuffer&&(c.pic=_)}a.statuses.push(c)}}e(a)})).catch(t)}),e),onDrop:this.wrap(t)},{debugString:"query,statusv3",metricName:"QUERY_STATUS",ackRequest:!1})}))},statusQueryUpdate:function(e,t,a,r){return new Promise(((i,s)=>{var n="before"===r?"before":"after",o={type:"status",kind:n,chat:e,count:t.toString(),jid:a?a.remote:void 0,index:a?a.id:void 0,owner:a?a.fromMe.toString():void 0,participant:a?a.participant:void 0},l=this.queryNode(o,void 0);this.binSend("sendEphemeral",l,s,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var t=[],a=this.N.children(e);if(__LOG__(2)($()),"response"===this.N.tag(e)&&"status"===this.N.attr("type",e)&&Array.isArray(a))for(var r=a.length,s=0;s<r;s++){var n=this.parseMsg(a[s],"response");n&&t.push(n)}i(t)})).catch(s)}),i),onDrop:this.wrap(s)},{debugString:["query","statusv3",n,t,a instanceof T.default?a.toString():e].join(),metricName:"QUERY_STATUS_UPDATE",ackRequest:!1})}))},sendConversationSeen:function(e,t,a,r,i){return new Promise(((s,n)=>{var o=this.actionNode("set",[["read",{kind:r?"status":void 0,chat:r?i:void 0,jid:e,index:t?t.id:void 0,owner:t?t.fromMe.toString():void 0,participant:t?t.participant:void 0,count:a&&t?a.toString():void 0},void 0]]);this.binSend("send",o,n,{clientCacheable:!0,onSend:this.wrap(s),onDrop:this.wrap(n)},{debugString:"action,"+(r?"status":"chat")+",read,"+JSON.stringify(t)+","+a,metricName:"READ",ackRequest:!0})}))},sendStatusSeen:function(e,t){return this.sendConversationSeen(e.remote,e,void 0,!0,t)},requestMediaReupload:function(e,t){return new Promise(((a,r)=>{var i=e.id,s=Array.isArray(t)?t.map((e=>["user",{jid:e},void 0])):void 0,n=i,o=this.queryNode({type:"media",index:n.id,jid:n.remote,owner:n.fromMe.toString(),participant:n.participant},s);this.binSend("sendEphemeral",o,r,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var t;if(__LOG__(2)(Z()),"response"===this.N.tag(e)&&"media"===this.N.attr("type",e)){var r=parseInt(this.N.attr("code",e),10)||400,i=this.N.attr("url",e);r>=500&&502!==r?(__LOG__(3)(X(),r),t={status:r}):200===r&&i?t={status:200,url:i,mediaKey:this.N.attr("media_key",e),mediaKeyTimestamp:this.N.attr("media_key_timestamp",e),encFilehash:this.N.attr("enc_filehash",e),directPath:this.N.attr("direct_path",e)}:200!==r||i?(__LOG__(3)(Q(),r),t={status:r}):(__LOG__(4,void 0,new Error,!0)(J()),SEND_LOGS("wap:requestMediaReupload:emptyUrl"),t={status:400})}else __LOG__(3)(z()),t={status:400};a(t)})).catch(r)}),a),onDrop:this.wrap(r)},{debugString:"query,media",metricName:"QUERY_MEDIA",ackRequest:!1})}))},parseCmd:function(e){switch(this.N.tag(e)){case"read":var t,a=this.N.attr("jid",e),r="false"===this.N.attr("type",e),i="status"===this.N.attr("kind",e),s=this.N.attr("checksum",e),n=this.N.attr("index",e),o="true"===this.N.attr("owner",e),l=this.N.attr("participant",e),d=this.N.attr("chat",e);try{t=new T.default({id:n,fromMe:o,remote:a,participant:l})}catch(e){}var u={type:r?"unread":"read",jid:a,isStatus:i,checksum:s,chat:this.decodeJid(d),key:t},c=[!a,i&&!t];return this.dropIfConditionMet(c,u);case"identity":var h=this.parseIdentity(e);return h?(h.type="identity",h):void 0;default:return}},parseContact:function(e,t){if("user"!==this.N.tag(e))return __LOG__(4,void 0,new Error,!0)(q(),this.N.tag(e),this.N.attr("id",e)),void SEND_LOGS("wap-unexpected-tag");var a,r,i=this.N.attr("name",e),s="true"===this.N.attr("enterprise",e),n=this.N.attr("jid",e)||t,o=this.N.attr("short",e)||void 0,l=this.N.attr("type",e)||"in",d=this.N.attr("notify",e),u=this.N.attr("verify",e),c="true"===this.N.attr("status_mute",e),h=this.N.attr("index",e)||void 0,f=this.N.attr("vname",e);switch(u){case"true":case"0":case"1":case"2":a=!0,r=parseInt(u,10)||0;break;default:a=!1,s=!1}i||r!==v.default.VERIFIED_LEVEL.HIGH||(i=f);var p=this.N.children(e),m=[];if(Array.isArray(p))for(var _=0;_<p.length;_++){var g=p[_];if("label"===this.N.tag(g)){var E=this.N.attr("id",g);E&&m.push(E)}}var y={id:n,name:i,type:l,shortName:o,pushname:d,isBusiness:a,verifiedLevel:r,statusMute:c,sectionHeader:h,verifiedName:f,labels:m,isEnterprise:s};return this.dropIfConditionMet([!n,"in"!==l&&"out"!==l&&!!l],y)},parseAck:function(e){if("received"!==this.N.tag(e))return __LOG__(4,void 0,new Error,!0)(Y(),this.N.tag(e),this.N.attr("id",e)),void SEND_LOGS("wap-unexpected-tag");var t,a=this.N.attr("type",e),r=this.N.attr("index",e),i=this.N.attr("jid",e),s="true"===this.N.attr("owner",e),n=this.N.attr("participant",e);switch(a){case"message":t=v.default.ACK.RECEIVED;break;case"read":t=v.default.ACK.READ;break;case"played":t=v.default.ACK.PLAYED;break;case"error":t=v.default.ACK.FAILED;break;case"pending":default:t=v.default.ACK.CLOCK}var o=(0,E.getMaybeMeUser)(),l={cmd:"ack",id:r,ack:t,from:s?o:i,to:s?i:o,participant:n,self:s?"out":"in"},d=[!r,!i,w.default.isStatusV3(i),"message"!==a&&"read"!==a&&"played"!==a&&"error"!==a&&"pending"!==a];return this.dropIfConditionMet(d,l)},parseMsgMessage:function(e,t){if("message"===this.N.tag(e)){var a=this.N.children(e);if(a instanceof ArrayBuffer)try{var r=(0,h.decodeProto)(N.WebMessageInfoSpec,a);return this.parseWebMessageInfo(r,t)}catch(e){return __LOG__(2)(H(),String(e)),__LOG__(4,void 0,new Error,!0)(V()),void SEND_LOGS("parse-error")}else __LOG__(3)(W())}else __LOG__(3)(K())},parseWebMessageInfo:function(e,t){var a=e.key,r=this.decodeJid(a.remoteJid),i=(0,E.getMaybeMeUser)(),s=a.fromMe?r:i,n=a.fromMe?i:r,o=this.decodeJid(a.participant),l=this.decodeJid(e.participant);S.default.supportsFeature(S.default.F.MD_BACKEND)&&(w.default.isGroup(r)||w.default.isStatusV3(r));var d="in";if(i.equals(r)&&(d=a.fromMe?"out":"in"),"broadcast"!==s){var u;try{u=new T.default({fromMe:(0,M.default)(a.fromMe,"key.fromMe"),remote:r,id:(0,M.default)(a.id,"key.id"),participant:o})}catch(e){return void __LOG__(3)(B(),e.stack)}var c={id:u,from:n,to:s,self:d,participant:o,type:"unknown",t:e.messageTimestamp||0,ack:"fresh"===t?v.default.ACK.SENT:e.status-1,author:l,invis:!!e.ignore,star:!!e.starred,broadcast:a.fromMe&&e.broadcast,notifyName:e.pushName||"",encFilehash:this.decodeBytes(e.mediaCiphertextSha256),shareDuration:e.duration,labels:e.labels,ephemeralStartTimestamp:e.ephemeralStartTimestamp,ephemeralOutOfSync:e.ephemeralOutOfSync,bizPrivacyStatus:e.bizPrivacyStatus,verifiedBizName:e.verifiedBizName};return e.message?this.parseMsgProto(e.message,c,t,e.paymentInfo,e.finalLiveLocation,e.quotedPaymentInfo):this.parseMsgStubProto(e,c)}__LOG__(3)(j())},parseProtocolMessageProto:function(e,t,a){if("relay"===a||t.type===g.ProtocolMessageType.EPHEMERAL_SETTING)switch(e.type="protocol",t.type){case g.ProtocolMessageType.REVOKE:var r=t.key,i=new T.default({fromMe:r.fromMe,remote:this.decodeJid(r.remoteJid),id:r.id,participant:this.decodeJid(r.participant)});e.subtype="revoke",e.protocolMessageKey=i;break;case g.ProtocolMessageType.EPHEMERAL_SETTING:e.subtype="ephemeral_setting",e.ephemeralDuration=t.ephemeralExpiration;break;case g.ProtocolMessageType.EPHEMERAL_SYNC_RESPONSE:e.subtype="ephemeral_sync_response",e.ephemeralDuration=t.ephemeralExpiration,e.ephemeralSettingTimestamp=t.ephemeralSettingTimestamp;break;default:e.subtype="unknown"}},sendConversationPin:function(e,t,a){return new Promise(((r,i)=>{var s=this.actionNode("set",[["chat",{type:"pin",pin:t?t.toString():void 0,previous:a?a.toString():void 0,jid:e},void 0]]);this.binSend("send",s,i,{clientCacheable:!0,onSend:this.wrap(r),onDrop:this.wrap(i)},{debugString:["action","chat",e,t?"pin,"+t:"unpin,"+a].join(),metricName:"CHAT",ackRequest:!0})}))},subscribeLiveLocation:function(e,t){return new Promise(((a,r)=>{var i=this.queryNode({type:"location",kind:"subscribe",jid:e,participant:t?"true":void 0},void 0);this.binSend("sendEphemeral",i,r,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var r=this.N.children(e),i={participants:[]};if(__LOG__(2)(U()),"response"===this.N.tag(e)&&"location"===this.N.attr("type",e)){var s=parseInt(this.N.attr("duration",e),10);if(i.duration=Number.isNaN(s)?void 0:s,!t||!Array.isArray(r))return t&&__LOG__(2)(G()),void a(i);for(var n=r.length,o=0;o<n;o++){var l=r[o],d=this.N.attr("jid",l),u=parseInt(this.N.attr("expiration",l),10),c=parseInt(this.N.attr("elapsed",l),10)||0,f=this.N.children(l);if("participant"===this.N.tag(l)&&d){var p={id:d,expiration:Number.isNaN(u)?void 0:u,elapsed:c};if(f){var m=(0,h.decodeProto)(g.MessageSpec,f).liveLocationMessage;m&&this.parseLiveLocationMessageProto(p,m)}p.lat&&p.lng?__LOG__(2)(F()):__LOG__(2)(x()),i.participants.push(p)}}a(i)}else a(i)})).catch(r)}),a),onDrop:this.wrap(r)},{debugString:["query,location",e,t].join(),metricName:"QUERY_LIVE_LOCATIONS"})}))},unsubscribeLiveLocation:function(e){return new Promise(((t,a)=>{var r=this.actionNode("set",[["location",{type:"unsubscribe",jid:e},void 0]]);this.binSend("send",r,a,{clientCacheable:!0,onSend:this.wrap(t),onDrop:this.wrap(a)},{debugString:"action,location,unsubscribe,"+e,metricName:"LIVE_LOCATION"})}))},queryActiveLiveLocation:function(e){return new Promise(((t,a)=>{var r=this.queryNode({type:"location",kind:"participant",jid:e},void 0);this.binSend("sendEphemeral",r,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var a=this.N.children(e),r={participants:[]};if(__LOG__(2)(k()),"response"===this.N.tag(e)&&"location"===this.N.attr("type",e))if(Array.isArray(a)){for(var i=a.length,s=0;s<i;s++){var n=a[s],o=this.N.attr("jid",n),l=parseInt(this.N.attr("expiration",n),10);if("participant"===this.N.tag(n)&&o){var d={id:o,expiration:Number.isNaN(l)?void 0:l};r.participants.push(d)}}t(r)}else t(r);else t(r)})).catch(a)}),t),onDrop:this.wrap(a)},{debugString:"query,location,participant,"+e,metricName:"QUERY_LIVE_LOCATIONS"})}))},disableLiveLocation:function(e){return new Promise(((t,a)=>{var r=this.actionNode("set",[["location",{type:"disable",jid:e},void 0]]);this.binSend("send",r,a,{clientCacheable:!0,onSend:this.wrap(t),onDrop:this.wrap(a)},{debugString:"action,location,disable,"+e,metricName:"LIVE_LOCATION"})}))},parseLocation:function(e){if("location"===this.N.tag(e)){var t=this.N.attr("type",e),a=this.N.attr("jid",e),r=this.N.attr("author",e),i=parseInt(this.N.attr("elapsed",e),10)||0,s=parseInt(this.N.attr("id",e),10)||0,n=this.N.children(e),o={type:t};switch(t){case"update":if(o.jid=a,o.elapsed=i,n){var l=(0,h.decodeProto)(g.MessageSpec,n).liveLocationMessage;l&&this.parseLiveLocationMessageProto(o,l)}o.type="update",o.lat&&o.lng?__LOG__(2)(L()):__LOG__(2)(R());break;case"disable":o.jid=r||a,o.chat=a,o.seq=s}return this.pruneUndefinedProps(o),this.dropIfConditionMet(["update"!==t&&"disable"!==t,!("update"!==t||a&&n),"disable"===t&&!a],o)}},parseMsgStubProto:function(e,t){var a=N.WebMessageInfoStubType;switch(e.messageStubType){case a.REVOKE:return t.type="revoked",t;case a.CIPHERTEXT:return t.type="ciphertext",t;case a.OVERSIZED:return t.type="oversized",t;case a.FUTUREPROOF:return t.subtype="phone",t;default:return this.parseMsgStubTemplate(e,t)}},parseMsgStubTemplate:function(e,t){var a=N.WebMessageInfoStubType;switch(t.type="notification_template",t.templateParams=Array.isArray(e.messageStubParameters)?e.messageStubParameters.map((t=>e.messageStubType===a.GROUP_CREATE||e.messageStubType===a.GROUP_CHANGE_SUBJECT?t:this.decodeJid(t))):void 0,e.messageStubType){case a.NON_VERIFIED_TRANSITION:t.subtype="non_verified_transition";break;case a.UNVERIFIED_TRANSITION:t.subtype="unverified_transition";break;case a.VERIFIED_TRANSITION:t.subtype="verified_transition";break;case a.VERIFIED_LOW_UNKNOWN:t.subtype="verified_low_unknown";break;case a.VERIFIED_HIGH:t.subtype="verified_high";break;case a.VERIFIED_INITIAL_UNKNOWN:t.subtype="verified_initial_unknown";break;case a.VERIFIED_INITIAL_LOW:t.subtype="verified_initial_low";break;case a.VERIFIED_INITIAL_HIGH:t.subtype="verified_initial_high";break;case a.VERIFIED_TRANSITION_ANY_TO_NONE:t.subtype="verified_transition_any_to_none";break;case a.VERIFIED_TRANSITION_ANY_TO_HIGH:t.subtype="verified_transition_any_to_high";break;case a.VERIFIED_TRANSITION_HIGH_TO_LOW:t.subtype="verified_transition_high_to_low";break;case a.VERIFIED_TRANSITION_HIGH_TO_UNKNOWN:t.subtype="verified_transition_high_to_unknown";break;case a.VERIFIED_TRANSITION_UNKNOWN_TO_LOW:t.subtype="verified_transition_unknown_to_low";break;case a.VERIFIED_TRANSITION_LOW_TO_UNKNOWN:t.subtype="verified_transition_low_to_unknown";break;case a.VERIFIED_TRANSITION_NONE_TO_LOW:t.subtype="verified_transition_none_to_low";break;case a.VERIFIED_TRANSITION_NONE_TO_UNKNOWN:t.subtype="verified_transition_none_to_unknown";break;case a.GROUP_CREATE:t.type="gp2",t.subtype="create",t.body=t.templateParams[0],t.recipients=[],t.templateParams=void 0;break;case a.GROUP_DELETE:t.type="gp2",t.subtype="delete",t.recipients=[],t.templateParams=void 0;break;case a.GROUP_CHANGE_SUBJECT:t.type="gp2",t.subtype="subject",t.body=t.templateParams[0],t.recipients=[],t.templateParams=void 0;break;case a.GROUP_CHANGE_ICON:t.type="gp2",t.subtype="picture",t.recipients=[],t.body=t.templateParams[0],t.templateParams=void 0;break;case a.GROUP_CHANGE_INVITE_LINK:t.type="gp2",t.subtype="revoke_invite",t.recipients=[];break;case a.GROUP_CHANGE_DESCRIPTION:t.type="gp2",t.subtype="description",t.recipients=[];break;case a.GROUP_CHANGE_RESTRICT:t.type="gp2",t.subtype="restrict",t.recipients=[],t.body=t.templateParams[0];break;case a.GROUP_CHANGE_ANNOUNCE:t.type="gp2",t.subtype="announce",t.recipients=[],t.body=t.templateParams[0];break;case a.GROUP_CHANGE_NO_FREQUENTLY_FORWARDED:t.type="gp2",t.subtype="no_frequently_forwarded",t.recipients=[],t.body=t.templateParams[0];break;case a.GROUP_ANNOUNCE_MODE_MESSAGE_BOUNCE:t.type="gp2",t.subtype="announce_msg_bounce",t.recipients=[],t.templateParams=void 0;break;case a.GROUP_PARTICIPANT_ADD:t.type="gp2",t.subtype="add",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.GROUP_PARTICIPANT_REMOVE:t.type="gp2",t.subtype="remove",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.GROUP_PARTICIPANT_PROMOTE:t.type="gp2",t.subtype="promote",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.GROUP_PARTICIPANT_DEMOTE:t.type="gp2",t.subtype="demote",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.GROUP_PARTICIPANT_INVITE:t.type="gp2",t.subtype="invite",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.GROUP_PARTICIPANT_LEAVE:t.type="gp2",t.subtype="leave",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.GROUP_PARTICIPANT_CHANGE_NUMBER:t.type="gp2",t.subtype="modify",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.GROUP_V4_ADD_INVITE_SENT:t.type="gp2",t.subtype="v4_add_invite_sent",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.GROUP_PARTICIPANT_ADD_REQUEST_JOIN:t.type="gp2",t.subtype="v4_add_invite_join",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.BROADCAST_CREATE:t.type="broadcast_notification",t.subtype="create",t.body=t.templateParams[0]||"0",t.templateParams=void 0;break;case a.BROADCAST_ADD:t.type="broadcast_notification",t.subtype="add",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.BROADCAST_REMOVE:t.type="broadcast_notification",t.subtype="remove",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.GENERIC_NOTIFICATION:t.type="notification",t.body=t.templateParams[0],t.templateParams=void 0;break;case a.E2E_IDENTITY_CHANGED:t.type="e2e_notification",t.subtype="identity",t.body=t.templateParams[0]instanceof w.default?t.templateParams[0].toString():t.templateParams[0],t.templateParams=void 0;break;case a.E2E_IDENTITY_UNAVAILABLE:t.subtype="blue_msg_e2e_identity_unavailable";break;case a.E2E_DEVICE_CHANGED:t.type="e2e_notification",t.subtype="device",t.body=t.templateParams[0]instanceof w.default?t.templateParams[0].toString():t.templateParams[0],t.devicesAdded=parseInt(t.templateParams[1],10),t.devicesRemoved=parseInt(t.templateParams[2],10),t.templateParams=void 0;break;case a.E2E_ENCRYPTED:t.type="e2e_notification",t.subtype="encrypt";break;case a.E2E_ENCRYPTED_NOW:t.type="e2e_notification",t.subtype="encrypt_now";break;case a.CALL_MISSED_VOICE:t.type="call_log",t.subtype="miss";break;case a.CALL_MISSED_VIDEO:t.type="call_log",t.subtype="miss_video";break;case a.CALL_MISSED_GROUP_VOICE:t.type="call_log",t.subtype="miss_group";break;case a.CALL_MISSED_GROUP_VIDEO:t.type="call_log",t.subtype="miss_group_video";break;case a.INDIVIDUAL_CHANGE_NUMBER:t.subtype="change_number";break;case a.CHANGE_EPHEMERAL_SETTING:t.type="gp2",t.subtype="ephemeral",t.author=t.templateParams[1],t.recipients=[];break;case a.PAYMENT_CIPHERTEXT:t.type="payment",t.subtype="ciphertext",this.callFeatureFlagFun(S.default.F.PAYMENTS,"parsePaymentInfo",t,e.paymentInfo);break;case a.PAYMENT_FUTUREPROOF:t.type="payment",t.subtype="futureproof",this.callFeatureFlagFun(S.default.F.PAYMENTS,"parsePaymentInfo",t,e.paymentInfo);break;case a.PAYMENT_ACTION_REQUEST_CANCELLED:t.subtype="payment_transaction_request_cancelled";break;case a.PAYMENT_TRANSACTION_STATUS_UPDATE_FAILED:t.subtype="payment_transaction_status_update_failed";break;case a.PAYMENT_TRANSACTION_STATUS_UPDATE_REFUNDED:t.subtype="payment_transaction_status_update_refunded";break;case a.PAYMENT_TRANSACTION_STATUS_UPDATE_REFUND_FAILED:t.subtype="payment_transaction_status_update_refund_failed";break;case a.PAYMENT_TRANSACTION_STATUS_RECEIVER_PENDING_SETUP:t.subtype="payment_transaction_status_receiver_pending_setup";break;case a.PAYMENT_TRANSACTION_STATUS_RECEIVER_SUCCESS_AFTER_HICCUP:t.subtype="payment_transaction_status_receiver_success_after_hiccup";break;case a.PAYMENT_ACTION_ACCOUNT_SETUP_REMINDER:t.subtype="payment_action_account_setup_reminder";break;case a.PAYMENT_ACTION_SEND_PAYMENT_REMINDER:t.subtype="payment_action_send_payment_reminder";break;case a.PAYMENT_ACTION_SEND_PAYMENT_INVITATION:t.subtype="payment_action_send_payment_invitation";break;case a.PAYMENT_ACTION_REQUEST_DECLINED:t.subtype="payment_action_request_declined";break;case a.PAYMENT_ACTION_REQUEST_EXPIRED:t.subtype="payment_action_request_expired";break;case a.BIZ_VERIFIED_TRANSITION_TOP_TO_BOTTOM:t.subtype="biz_verified_transition_top_to_bottom";break;case a.BIZ_VERIFIED_TRANSITION_BOTTOM_TO_TOP:t.subtype="biz_verified_transition_bottom_to_top";break;case a.BIZ_INTRO_TOP:t.subtype="biz_intro_top";break;case a.BIZ_INTRO_BOTTOM:t.subtype="biz_intro_bottom";break;case a.BIZ_NAME_CHANGE:t.subtype="biz_name_change";break;case a.BIZ_MOVE_TO_CONSUMER_APP:t.subtype="biz_move_to_consumer_app";break;case a.BIZ_TWO_TIER_MIGRATION_TOP:t.subtype="biz_two_tier_migration_top";break;case a.BIZ_TWO_TIER_MIGRATION_BOTTOM:t.subtype="biz_two_tier_migration_bottom";break;case a.BLUE_MSG_BSP_FB_TO_BSP_PREMISE:t.subtype="blue_msg_bsp_fb_to_bsp_premise";break;case a.BLUE_MSG_BSP_FB_TO_SELF_FB:t.subtype="blue_msg_bsp_fb_to_self_fb";break;case a.BLUE_MSG_BSP_FB_TO_SELF_PREMISE:t.subtype="blue_msg_bsp_fb_to_self_premise";break;case a.BLUE_MSG_BSP_FB_UNVERIFIED:t.subtype="blue_msg_bsp_fb_unverified";break;case a.BLUE_MSG_BSP_FB_UNVERIFIED_TO_BSP_PREMISE_VERIFIED:t.subtype="blue_msg_bsp_fb_unverified_to_bsp_premise_verified";break;case a.BLUE_MSG_BSP_FB_UNVERIFIED_TO_SELF_FB_VERIFIED:t.subtype="blue_msg_bsp_fb_unverified_to_self_fb_verified";break;case a.BLUE_MSG_BSP_FB_UNVERIFIED_TO_SELF_PREMISE_VERIFIED:t.subtype="blue_msg_bsp_fb_unverified_to_self_premise_verified";break;case a.BLUE_MSG_BSP_FB_VERIFIED:t.subtype="blue_msg_bsp_fb_verified";break;case a.BLUE_MSG_BSP_FB_VERIFIED_TO_BSP_PREMISE_UNVERIFIED:t.subtype="blue_msg_bsp_fb_verified_to_bsp_premise_unverified";break;case a.BLUE_MSG_BSP_FB_VERIFIED_TO_SELF_FB_UNVERIFIED:t.subtype="blue_msg_bsp_fb_verified_to_self_fb_unverified";break;case a.BLUE_MSG_BSP_FB_VERIFIED_TO_SELF_PREMISE_UNVERIFIED:t.subtype="blue_msg_bsp_fb_verified_to_self_premise_unverified";break;case a.BLUE_MSG_BSP_PREMISE_TO_SELF_PREMISE:t.subtype="blue_msg_bsp_premise_to_self_premise";break;case a.BLUE_MSG_BSP_PREMISE_UNVERIFIED:t.subtype="blue_msg_bsp_premise_unverified";break;case a.BLUE_MSG_BSP_PREMISE_UNVERIFIED_TO_SELF_PREMISE_VERIFIED:t.subtype="blue_msg_bsp_premise_unverified_to_self_premise_verified";break;case a.BLUE_MSG_BSP_PREMISE_VERIFIED:t.subtype="blue_msg_bsp_premise_verified";break;case a.BLUE_MSG_BSP_PREMISE_VERIFIED_TO_SELF_PREMISE_UNVERIFIED:t.subtype="blue_msg_bsp_premise_verified_to_self_premise_unverified";break;case a.BLUE_MSG_CONSUMER_TO_BSP_FB_UNVERIFIED:t.subtype="blue_msg_consumer_to_bsp_fb_unverified";break;case a.BLUE_MSG_CONSUMER_TO_BSP_PREMISE_UNVERIFIED:t.subtype="blue_msg_consumer_to_bsp_premise_unverified";break;case a.BLUE_MSG_CONSUMER_TO_SELF_FB_UNVERIFIED:t.subtype="blue_msg_consumer_to_self_fb_unverified";break;case a.BLUE_MSG_CONSUMER_TO_SELF_PREMISE_UNVERIFIED:t.subtype="blue_msg_consumer_to_self_premise_unverified";break;case a.BLUE_MSG_SELF_FB_TO_BSP_PREMISE:t.subtype="blue_msg_self_fb_to_bsp_premise";break;case a.BLUE_MSG_SELF_FB_TO_SELF_PREMISE:t.subtype="blue_msg_self_fb_to_self_premise";break;case a.BLUE_MSG_SELF_FB_UNVERIFIED:t.subtype="blue_msg_self_fb_unverified";break;case a.BLUE_MSG_SELF_FB_UNVERIFIED_TO_BSP_PREMISE_VERIFIED:t.subtype="blue_msg_self_fb_unverified_to_bsp_premise_verified";break;case a.BLUE_MSG_SELF_FB_UNVERIFIED_TO_SELF_PREMISE_VERIFIED:t.subtype="blue_msg_self_fb_unverified_to_self_premise_verified";break;case a.BLUE_MSG_SELF_FB_VERIFIED:t.subtype="blue_msg_self_fb_verified";break;case a.BLUE_MSG_SELF_FB_VERIFIED_TO_BSP_PREMISE_UNVERIFIED:t.subtype="blue_msg_self_fb_verified_to_bsp_premise_unverified";break;case a.BLUE_MSG_SELF_FB_VERIFIED_TO_SELF_PREMISE_UNVERIFIED:t.subtype="blue_msg_self_fb_verified_to_self_premise_unverified";break;case a.BLUE_MSG_SELF_PREMISE_TO_BSP_PREMISE:t.subtype="blue_msg_self_premise_to_bsp_premise";break;case a.BLUE_MSG_SELF_PREMISE_UNVERIFIED:t.subtype="blue_msg_self_premise_unverified";break;case a.BLUE_MSG_SELF_PREMISE_VERIFIED:t.subtype="blue_msg_self_premise_verified";break;case a.BLUE_MSG_TO_BSP_FB:t.subtype="blue_msg_to_bsp_fb";break;case a.BLUE_MSG_TO_CONSUMER:t.subtype="blue_msg_to_consumer";break;case a.BLUE_MSG_TO_SELF_FB:t.subtype="blue_msg_to_self_fb";break;case a.BLUE_MSG_UNVERIFIED_TO_BSP_FB_VERIFIED:t.subtype="blue_msg_unverified_to_bsp_fb_verified";break;case a.BLUE_MSG_UNVERIFIED_TO_BSP_PREMISE_VERIFIED:t.subtype="blue_msg_unverified_to_bsp_premise_verified";break;case a.BLUE_MSG_UNVERIFIED_TO_SELF_FB_VERIFIED:t.subtype="blue_msg_unverified_to_self_fb_verified";break;case a.BLUE_MSG_UNVERIFIED_TO_VERIFIED:t.subtype="blue_msg_unverified_to_verified";break;case a.BLUE_MSG_VERIFIED_TO_BSP_FB_UNVERIFIED:t.subtype="blue_msg_verified_to_bsp_fb_unverified";break;case a.BLUE_MSG_VERIFIED_TO_BSP_PREMISE_UNVERIFIED:t.subtype="blue_msg_verified_to_bsp_premise_unverified";break;case a.BLUE_MSG_VERIFIED_TO_SELF_FB_UNVERIFIED:t.subtype="blue_msg_verified_to_self_fb_unverified";break;case a.BLUE_MSG_VERIFIED_TO_UNVERIFIED:t.subtype="blue_msg_verified_to_unverified";break;default:t.templateParams=void 0}return t},sendCallOffer:function(e){return new Promise(((t,a)=>{var r=(0,P.default)(),i=O.default.formatCallOffer(this,r,e);this.binSend("send",i,a,{tag:r,onSend:this.wrap((e=>{t(e)}),t),onDrop:this.wrap(a),retryOn5xx:!0,isCallOffer:!0},{debugString:["action","call","offer",e.common.peer_jid].join(),debugObj:{xml:i,struct:e},metricName:"CALL"})}))},supportsFeatureFlags:!0,implementedFeatures:{}}),ve=(0,o.default)(_e,_.default);t.Z=ve},31225:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(19976)),n=i(a(45455)),o=i(a(98346)),l=a(60339),d=i(a(49968)),u=i(a(50278)),c=i(a(79504)),h=i(a(79626)),f=i(a(96985)),p=i(a(75001)),m=a(19741),_=r(a(96452)),v=a(95595),g=i(a(18120)),E=i(a(67964)),y=i(a(85059)),S=i(a(11680)),C=i(a(61941)),T=i(a(75537)),M=i(a(49569)),b=i(a(92961)),P=i(a(2734)),A=i(a(24499)),I=i(a(23054)),O=i(a(68384)),N=i(a(12767));function w(){var e=(0,s.default)(["BinaryProtocol read error stack: ",""]);return w=function(){return e},e}function D(){var e=(0,s.default)(["BinaryProtocol read error with tag ",", size: ",""]);return D=function(){return e},e}function R(){var e=(0,s.default)(["LogoutDrop error: ",""]);return R=function(){return e},e}function L(){var e=(0,s.default)(["TODO ",""]);return L=function(){return e},e}function k(){var e=(0,s.default)(["Wap:handle read invalid"]);return k=function(){return e},e}function x(){var e=(0,s.default)(["bin-recv:",""]);return x=function(){return e},e}function F(){var e=(0,s.default)(["wap:handle:query unknown ",""]);return F=function(){return e},e}function G(){var e=(0,s.default)(["bin-recv:",""]);return G=function(){return e},e}function U(){var e=(0,s.default)(["Wap:handle action unknown ",""]);return U=function(){return e},e}function B(){var e=(0,s.default)(["bin-recv:",""]);return B=function(){return e},e}function j(){var e=(0,s.default)(["Wap:handle:setting dropped"]);return j=function(){return e},e}function V(){var e=(0,s.default)(["bin-recv:",""]);return V=function(){return e},e}function H(){var e=(0,s.default)(["Wap:handle:notice dropped"]);return H=function(){return e},e}function W(){var e=(0,s.default)(["Wap:handle:starredStickers dropped"]);return W=function(){return e},e}function K(){var e=(0,s.default)(["bin-recv:",""]);return K=function(){return e},e}function Y(){var e=(0,s.default)(["Wap:handle:recentStickers dropped"]);return Y=function(){return e},e}function q(){var e=(0,s.default)(["bin-recv:",""]);return q=function(){return e},e}function z(){var e=(0,s.default)(["bin-recv:",""]);return z=function(){return e},e}function Q(){var e=(0,s.default)(["Wap:handle:stickerPack dropped"]);return Q=function(){return e},e}function J(){var e=(0,s.default)(["Wap:handle:action:call dropped"]);return J=function(){return e},e}function X(){var e=(0,s.default)(["bin-recv:",""]);return X=function(){return e},e}function Z(){var e=(0,s.default)(["bin-recv:",""]);return Z=function(){return e},e}function $(){var e=(0,s.default)(["Wap:handle:quickReply dropped"]);return $=function(){return e},e}function ee(){var e=(0,s.default)(["bin-recv:",""]);return ee=function(){return e},e}function te(){var e=(0,s.default)(["bin-recv:",""]);return te=function(){return e},e}function ae(){var e=(0,s.default)(["Wap:handle:label dropped"]);return ae=function(){return e},e}function re(){var e=(0,s.default)(["bin-recv:",""]);return re=function(){return e},e}function ie(){var e=(0,s.default)(["Wap:handle:location dropped"]);return ie=function(){return e},e}function se(){var e=(0,s.default)(["bin-recv: ",""]);return se=function(){return e},e}function ne(){var e=(0,s.default)(["Wap:handle action mute dropped"]);return ne=function(){return e},e}function oe(){var e=(0,s.default)(["Wap:handle action battery dropped"]);return oe=function(){return e},e}function le(){var e=(0,s.default)(["bin-recv: ",""]);return le=function(){return e},e}function de(){var e=(0,s.default)(["bin-recv: ",""]);return de=function(){return e},e}function ue(){var e=(0,s.default)(["Wap:handle action chat dropped"]);return ue=function(){return e},e}function ce(){var e=(0,s.default)(["Wap:handle:action:contacts dropped"]);return ce=function(){return e},e}function he(){var e=(0,s.default)(["bin-recv: ",""]);return he=function(){return e},e}function fe(){var e=(0,s.default)(["bin-recv: ",""]);return fe=function(){return e},e}function pe(){var e=(0,s.default)(["Wap:handle action contact dropped"]);return pe=function(){return e},e}function me(){var e=(0,s.default)(["Wap:handle action ack invalid"]);return me=function(){return e},e}function _e(){var e=(0,s.default)(["bin-recv: ",""]);return _e=function(){return e},e}function ve(){var e=(0,s.default)(["bin-recv: ",""]);return ve=function(){return e},e}function ge(){var e=(0,s.default)(["Wap:handle action bc update invalid"]);return ge=function(){return e},e}function Ee(){var e=(0,s.default)(["Wap:handle action cmd invalid"]);return Ee=function(){return e},e}function ye(){var e=(0,s.default)(["bin-recv: ",""]);return ye=function(){return e},e}function Se(){var e=(0,s.default)(["Wap:handle:action keys not array: ",""]);return Se=function(){return e},e}function Ce(){var e=(0,s.default)(["Wap:handle action msg no meta.add"]);return Ce=function(){return e},e}function Te(){var e=(0,s.default)(["Wap:handle action msg before/after 0 msgs"]);return Te=function(){return e},e}function Me(){var e=(0,s.default)(["Wap:handle action msg "," dropped to 0"]);return Me=function(){return e},e}function be(){var e=(0,s.default)(["bin-recv: ",""]);return be=function(){return e},e}function Pe(){var e=(0,s.default)(["Wap:handle action msg before/after dropped"]);return Pe=function(){return e},e}function Ae(){var e=(0,s.default)(["Wap:handle action msg last dropped to 0"]);return Ae=function(){return e},e}function Ie(){var e=(0,s.default)(["bin-recv: ",""]);return Ie=function(){return e},e}function Oe(){var e=(0,s.default)(["Wap:handle action msg last dropped"]);return Oe=function(){return e},e}function Ne(){var e=(0,s.default)(["Wap:handle action msg relay dropped"]);return Ne=function(){return e},e}function we(){var e=(0,s.default)(["bin-recv: ",""]);return we=function(){return e},e}function De(){var e=(0,s.default)(["Wap:handle action msg relay length not 1"]);return De=function(){return e},e}function Re(){var e=(0,s.default)(["Wap:handle non-preemptive response: ",""]);return Re=function(){return e},e}function Le(){var e=(0,s.default)(["Wap:handle unknown response type: ",""]);return Le=function(){return e},e}function ke(){var e=(0,s.default)(["bin-recv: ",",response,contact"]);return ke=function(){return e},e}function xe(){var e=(0,s.default)(["bin-recv: ",",response,chat"]);return xe=function(){return e},e}function Fe(){var e=(0,s.default)(["Wap:groupActionsByType unknown action: ",""]);return Fe=function(){return e},e}function Ge(){var e=(0,s.default)(["Wap:setSubProtocol unknown ",""]);return Ge=function(){return e},e}function Ue(){var e=(0,s.default)(["wap:epochCount: "," epoch: ",""]);return Ue=function(){return e},e}function Be(){var e=(0,s.default)(["wap:epochRecv: NEGATIVE"]);return Be=function(){return e},e}function je(){var e=(0,s.default)(["wap:epochCount: "," epoch: ",""]);return je=function(){return e},e}var Ve={epochCount:0,epoch:0,epochSend:function(e){return 0===this.epochCount&&this.epoch++,e||this.epochCount++,__LOG__(2)(je(),this.epochCount,this.epoch),this.epoch.toString()},epochRecv:function(){this.epochCount>0?this.epochCount--:__LOG__(3)(Be()),__LOG__(2)(Ue(),this.epochCount,this.epoch)},setSubProtocol:function(e){if(-1===e)this.BinaryProtocol=new u.default,this.N=this.BinaryProtocol.Node;else{if(null==e||0===e)throw __LOG__(3)(Ge(),String(e)),new _.UpdateImmediately("".concat(this.version,"_unknown_version"));this.BinaryProtocol=new d.default(e),this.N=this.BinaryProtocol.Node}},clearBPQueue:function(){return new Promise((e=>{this.BinaryProtocol.dropAllBecauseLogout(),e()}))},upgradeProtoVersion(e){if(e.BinaryProtocol instanceof u.default)for(var t=e.BinaryProtocol.getWriteQueue();t.length;){var{n:a,resolve:r,reject:i}=t.shift();this.BinaryProtocol.write(a).then(r).catch(i)}},delete:function(){this.epochCount=0,this.epoch=0},cannotReachPhone:function(){this.epochRecv()},dropIfConditionMet:function(e,t){return e.reduce((function(e,t){return e||t}),!1)?void 0:t},pruneUndefinedProps:function(e){for(var t in e){void 0===e[t]&&delete e[t]}},callFeatureFlagFun:function(e,t){if(g.default.supportsFeature(e)){for(var a=[],r=2;r<arguments.length;r++)a.push(arguments[r]);return this[t](...a)}},safeParseInt:function(e,t){var a=parseInt(this.N.attr(t,e),10);return Number.isNaN(a)?void 0:a},wrap:function(e){return t=>{if(t&&"object"==typeof t&&"number"==typeof t.status&&t.status>=500)return t;this.epochRecv(),e(t)}},wrap02:function(e){return function(t){if(t&&"object"==typeof t&&"number"==typeof t.status&&t.status>=500)return t;e(t)}},binWrap:function(e,t){return a=>{if(a&&"object"==typeof a&&"number"==typeof a.status){if(401===a.status)throw this.epochRecv(),new m.E401;if(a.status>=500)return a;this.epochRecv(),t(a)}else this.epochRecv(),e(a)}},binSend:function(e,t,a,r,i){var s=r.epochIneligible?a:e=>{this.epochRecv(),a(e)};return delete r.epochIneligible,this.BinaryProtocol.write(t).then((a=>{i.debugObj||(i.debugObj=t),i.metric=this.M[i.metricName],i.ackRequest=!1,r.data=a,r.binaryOpts=i,N.default[e](r)})).catch(s)},msgGetTarget:function(e){return O.default.equals(e.from,(0,v.getMaybeMeUser)())?e.to:e.from},thumbFromMediaXml:function(e){return"raw"===this.N.attr("encoding",e)?this.N.children(e)instanceof ArrayBuffer?(0,l.encodeB64)(this.N.children(e)):"":this.N.dataStr(e)},actionNode:function(e,t,a){return["action",{type:e,epoch:this.epochSend(a)},t]},queryNode:function(e,t){var a=e;return a||(a={}),a.epoch=this.epochSend(),["query",a,t]},responseNode:function(e,t){var a=e;return a||(a={}),a.epoch=this.epochSend(),["response",a,t]},errorNode:function(e){return["error",{code:e.toString(),epoch:this.epochSend()},void 0]},actionGetMeta:function(e){var t={};if("action"!==this.N.tag(e))return t;var a=this.N.attr("add",e),r=this.N.attr("missing",e),i=this.N.attr("checksum",e);switch(a){case"unread":t.unreadId=this.N.attr("index",e),t.unreadFromMe="true"===this.N.attr("owner",e),t.unreadParticipant=this.N.attr("participant",e);case"after":case"before":case"last":t.pendingMsgsDone="true"===this.N.attr("last",e),t.resume="true"===this.N.attr("resume",e);case"relay":case"update":t.add=a}switch(r){case"remove":t.missing=r}return i&&(t.checksum=i),t},groupActionsByType:function(e){var t,a,r={};if(!Array.isArray(e))return r;var i=e.length;for(a=0;a<i;a++)switch(t=e[a],this.N.tag(t)){case"broadcast":switch(this.N.attr("type",t)){case"create":case"add":case"remove":r.msg||(r.msg=[]),r.msg.push(t);break;case"modify":r.bcUpdate||(r.bcUpdate=[]),r.bcUpdate.push(t)}break;case"message":case"groups_v2":case"notification":case"call_log":case"security":r.msg||(r.msg=[]),r.msg.push(t);break;case"read":case"log":case"identity":r.cmd||(r.cmd=[]),r.cmd.push(t);break;case"received":r.ack||(r.ack=[]),r.ack.push(t);break;case"user":r.contact||(r.contact=[]),r.contact.push(t);break;case"contacts":r.contacts||(r.contacts=[]),r.contacts.push(t);break;case"chat":switch(this.N.attr("type",t)){case"mute":r.mute||(r.mute=[]),r.mute.push(t);break;default:r.chat||(r.chat=[]),r.chat.push(t)}break;case"battery":r.battery||(r.battery=[]),r.battery.push(t);break;case"location":r.location||(r.location=[]),r.location.push(t);break;case"label":r.label||(r.label=[]),r.label.push(t);break;case"group":r.group||(r.group=[]),r.group.push(t);break;case"quick_reply":r.quickReply||(r.quickReply=[]),r.quickReply.push(t);break;case"call":r.call||(r.call=[]),r.call.push(t);break;case"stickerPack":case"sticker_pack":r.stickerPack||(r.stickerPack=[]),r.stickerPack.push(t);break;case"recent_stickers":r.recentStickers||(r.recentStickers=[]),r.recentStickers.push(t);break;case"starred_stickers":r.starredStickers||(r.starredStickers=[]),r.starredStickers.push(t);break;case"notice":r.notice||(r.notice=[]),r.notice.push(t);break;case"read_later":r.archiveSetting||(r.archiveSetting=[]),r.archiveSetting.push(t);break;default:__LOG__(3,!0)(Fe(),this.N.toString(t))}return r},handleResponse:function(e,t,a){if(0===e.indexOf("preempt"))switch(this.N.attr("type",t)){case"chat":__LOG__(2)(xe(),e);var r=this.N.children(t)||[];if(Array.isArray(r)){for(var i=r.length,s=[],n=0;n<i;n++){var o=this.parseChat(r[n]);o&&s.push(o)}(0,h.default)([{cmd:"preempt",response:s,binarySize:a}])}break;case"contacts":__LOG__(2)(ke(),e);var l=this.N.children(t);if(Array.isArray(l)){for(var d=l.length,u=[],c=0;c<d;c++){var f=this.parseContact(l[c]);f&&u.push(f)}(0,p.default)([{cmd:"preempt",checksum:this.N.attr("checksum",t),response:u,binarySize:a}])}break;default:__LOG__(3)(Le(),this.N.toString(t,!0))}else __LOG__(3)(Re(),this.N.toString(t,!0))},handleActionMsg:function(e,t,a,r){var i=r.length;switch(a.add){case"relay":case"update":var s=this.parseMsg(r[0],"relay");if(1!==i&&__LOG__(3)(De()),s){__LOG__(2)(we(),[e,"action","msg",a.add,s.type,s.from,s.to,s.id,s.author].join(","));var n=this.msgGetTarget(s);(0,E.default)([{meta:a,chat:n,msg:s}])}else __LOG__(3)(Ne());break;case"last":for(var o=[],l=0;l<i;l++){var d=this.parseMsg(r[l],"last");d?o.push(d):__LOG__(3)(Oe())}if(o.length>0){__LOG__(2)(Ie(),[e,"action","msg","last",r.length].join(","));for(var u={recent:!0,meta:a,binarySize:t},c=0;c<o.length;c++)u[this.msgGetTarget(o[c])]=o[c];(0,E.default)([u])}else __LOG__(3)(Ae());break;case"before":case"after":case"unread":if(i>0){for(var h=[],f=0;f<i;f++){var p=this.parseMsg(r[f],a.add);p?h.push(p):__LOG__(3)(Pe())}if(h.length>0){var m=this.msgGetTarget(h[0]);__LOG__(2)(be(),[e,"action","msg",a.add,m,h.length].join(",")),(0,E.default)([{meta:a,chat:m,msgs:h,binarySize:t}])}else __LOG__(3)(Me(),a.add)}else __LOG__(3)(Te());break;default:__LOG__(3)(Ce())}},handleAction:function(e,t,r){var i=this.actionGetMeta(t),s=this.groupActionsByType(this.N.children(t)),l=Object.keys(s);if(Array.isArray(l)){var d=l.length;if(0!==d||"last"!==i.add)for(var u=0;u<d;u++){var m=l[u],_=s[m],v=_.length;switch(m){case"msg":this.handleActionMsg(e,r,i,_,t);break;case"cmd":for(var O=0;O<v;O++){var N=this.parseCmd(_[O]);if(N){var w=(0,o.default)(N).join(",");__LOG__(2)(ye(),[e,"action","cmd",w].join(",")),a(42871).handle([N])}else __LOG__(3)(Ee())}break;case"bcUpdate":for(var D=[],R=0;R<v;R++){var L=this.parseBCUpdate(_[R]);L?D.push(L):__LOG__(3)(ge())}if(__LOG__(2)(ve(),[e,"action","bcUpdate",D.length].join(",")),D.length>0)a(99922).default.handle(D);break;case"ack":for(var k=0;k<v;k++){var x=this.parseAck(_[k]);x?(__LOG__(2)(_e(),[e,"action","ack",x.to,x.id,x.ack].join(",")),(0,E.default)([x])):__LOG__(3)(me())}break;case"contact":for(var F=[],G=0;G<v;G++){var Ce=this.parseContact(_[G]);Ce?F.push(Ce):__LOG__(3)(pe())}if(__LOG__(2)(fe(),[e,"action","contact",F.length,i.missing].join(",")),F.length>0){var Te=[F];(i.missing||i.checksum)&&Te.push(i),(0,p.default)(Te)}break;case"contacts":var Me=this.parseContacts(_[0]);__LOG__(2)(he(),[e,"action","contacts"].join(",")),Me?(0,p.default)([Me]):__LOG__(3)(ce());break;case"chat":for(var be=[],Pe=0;Pe<v;Pe++){var Ae=this.parseChat(_[Pe]);Ae?be.push(Ae):__LOG__(3)(ue())}__LOG__(2)(de(),[e,"action","chat",be.length].join(",")),be.length>0&&(0,h.default)([be]);break;case"battery":var Ie=this.parseBattery(_[0]);Ie?(__LOG__(2)(le(),[e,"action","battery",Ie.battery,Ie.plugged].join(",")),(0,f.default)([Ie])):__LOG__(3)(oe());break;case"mute":for(var Oe=[],Ne=0;Ne<v;Ne++){var we=this.parseChat(_[Ne]);we?Oe.push(we):__LOG__(3)(ne())}__LOG__(2)(se(),[e,"action","mute",Oe.length].join(",")),Oe.length>0&&y.default.handle(Oe);break;case"location":for(var De=[],Re=0;Re<v;Re++){var Le=this.parseLocation(_[Re]);Le?De.push(Le):__LOG__(3)(ie()),__LOG__(2)(re(),[e,"action,location",De.length].join()),De.length>0&&a(84383).default.handle(De)}break;case"label":for(var ke=[],xe=0;xe<v;xe++){var Fe=this.callFeatureFlagFun(g.default.F.LABELS_DISPLAY,"parseLabel",_[xe]);Fe?ke.push(Fe):__LOG__(3)(ae()),__LOG__(2)(te(),[e,"action,label",ke.length].join()),ke.length>0&&a(23539).default.handle({checksum:i.checksum,labels:ke})}break;case"group":for(var Ge=0;Ge<v;Ge++){var Ue=this.callFeatureFlagFun(g.default.F.GROUPS_V_4_JOIN_PERMISSION,"parseInviteUpdate",_[Ge]);if(__LOG__(2)(ee(),[e,"action,group_v4_pending_invites",Ue&&Ue.length].join()),void 0!==Ue)a(99922).default.handlePendingInvite({gid:Ue.gid,participants:Ue.participants})}break;case"quickReply":for(var Be=[],je=0;je<v;je++){var Ve=this.callFeatureFlagFun(g.default.F.QUICK_REPLIES_QUERY,"parseQuickReply",_[je]);Ve?Be.push(Ve):__LOG__(3)($()),__LOG__(2)(Z(),[e,"action,quickReply",Be.length].join()),Be.length>0&&T.default.handle({checksum:i.checksum,quickReplies:Be})}break;case"call":var He=this.callFeatureFlagFun(g.default.F.VOIP_INDIVIDUAL_INCOMING,"parseCall",_[0]);__LOG__(2)(X(),[e,"action","call"].join()),He?c.default.handle([He]):__LOG__(3)(J());break;case"stickerPack":case"sticker_pack":for(var We=[],Ke=0;Ke<v;Ke++){var Ye=this.callFeatureFlagFun(g.default.F.STICKER_PACK_QUERY,"parseStickerPackUpdate",_[Ke]);Ye?(We.push(Ye),I.default.sync(i.checksum)):__LOG__(3)(Q()),__LOG__(2)(z(),[e,"action,stickerPack",We.length].join())}break;case"recentStickers":if(g.default.isRecentStickersEnabled())for(var qe=0;qe<v;qe++){var ze=(0,b.default)(_[qe],this.N);ze?(M.default.setChecksum(i.checksum),M.default.remove(ze),__LOG__(2)(q(),[e,"action,recentStickers",ze].join())):__LOG__(3)(Y())}break;case"starredStickers":if(g.default.isStarredStickersEnabled())for(var Qe=0;Qe<v;Qe++){var Je=(0,A.default)(_[Qe],this.N);if(Je){var{type:Xe,filehash:Ze,sticker:$e}=Je,et=a(47805).default;switch(Xe){case"add":et.add((0,C.default)($e,"sticker"),{at:0,sort:!1},!0);break;case"delete":et.remove(Ze)}__LOG__(2)(K(),[e,"action,starredStickers",Xe,Ze].join())}else __LOG__(3)(W())}break;case"notice":for(var tt=[],at=0;at<v;at++){var rt=this.callFeatureFlagFun(g.default.F.USER_NOTICE,"parseNotice",_[at]);rt?!(0,n.default)(rt)&&tt.push(rt):__LOG__(3)(H()),__LOG__(2)(V(),[e,"action,notice",tt.length].join()),S.default.handleResponse(tt)}break;case"archiveSetting":for(var it=0;it<v;it++){var st=this.callFeatureFlagFun(g.default.F.SETTINGS_SYNC,"parseSetting",_[it]);st||__LOG__(3)(j()),__LOG__(2)(B(),[e,"action,setting,archive"].join()),P.default.handleResponse([st])}break;default:__LOG__(3)(U(),m)}}else(0,E.default)([{recent:!0,meta:i,binarySize:r}])}else __LOG__(3)(Se(),typeof l)},handleQuery:function(e,t){var a=this,r=this.N.children(t);if(Array.isArray(r))for(var i=function(t){var i=r[t],s=a.N.tag(i);__LOG__(2)(G(),[e,"query",s].join());var n=void 0;switch(s){case"call":n=a.callFeatureFlagFun(g.default.F.VOIP_INDIVIDUAL_INCOMING,"handleCallQuery",i);break;default:__LOG__(3)(F(),s)}n||(n=Promise.resolve(a.errorNode(501))),n.then((t=>{a.BinaryProtocol.write(t).then((r=>{N.default.send({tag:e,data:r,onSend:a.wrap((()=>{})),onDrop:a.wrap((()=>{})),retryOn5xx:!0,binaryOpts:{debugString:["response",s].join(),debugObj:t,metricName:"QUERY_RESPONSE",ackRequest:!0}})})).catch((()=>{a.epochRecv()}))}))},s=0;s<r.length;s++)i(s)},handle:function(e,t,r,i){return this.BinaryProtocol.read(e).then((e=>{switch(this.N.tag(e)){case"response":this.handleResponse(r,e,i,t);break;case"action":this.handleAction(r,e,i,t);break;case"query":this.handleQuery(r,e,i);break;case"read":var s=this.parseCmd(e);if(s){var n=(0,o.default)(s).join();__LOG__(2)(x(),[r,"action",n].join()),a(42871).handle([s])}else __LOG__(3)(k());break;default:__LOG__(3,!0)(L(),this.N.toString(e,!0))}return!0})).catchType(m.LogoutDrop,(e=>{__LOG__(3)(R(),e.toString())})).catch((e=>{throw __LOG__(2)(D(),r,i),__LOG__(2)(w(),e.stack||""),new Error("BinaryProtocol read error: ".concat(e))}))}};t.default=Ve},50278:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(19976)),n=a(19741),o=r(a(96452)),l=i(a(73631));function d(){var e=(0,s.default)(["Attempted to call `read` on BinaryProtocolQueue"],["Attempted to call \\`read\\` on BinaryProtocolQueue"]);return d=function(){return e},e}var u=class{constructor(){this._writeQueue=[],this.Node=l.default}read(){return __LOG__(3)(d()),Promise.reject(new o.Disconnected)}write(e){return new Promise(((t,a)=>{this._writeQueue.push({resolve:t,reject:a,n:e})}))}dropAllBecauseLogout(){for(var e=new n.LogoutDrop("cancelled binary protocol call");this._writeQueue.length;){this._writeQueue.shift().reject(e)}}getWriteQueue(){return this._writeQueue}};t.default=u},49968:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(19976)),n=i(a(84573)),o=i(a(12782)),l=a(78692),d=i(a(2008)),u=i(a(21107)),c=i(a(98546)),h=i(a(78499)),f=i(a(14848)),p=i(a(92810)),m=i(a(26522)),_=i(a(52761)),v=r(a(96452)),g=i(a(18120)),E=i(a(65986)),y=i(a(76564)),S=i(a(44341)),C=i(a(43339)),T=i(a(51629)),M=i(a(74284));function b(){var e=(0,s.default)(["binaryProtocol unknown version: ",""]);return b=function(){return e},e}function P(){var e=(0,s.default)(["binaryProtocol deprecated version: ",""]);return P=function(){return e},e}var A=(e,t)=>{if(Array.isArray(e)&&t)return e.concat(t)},I=(e,t)=>{if(e.Dictionary){var a={};(0,o.default)(a,t.Dictionary,e.Dictionary,A),e.Dictionary=a}return(0,n.default)(e,t)},O={OutputStream:y.default,Writer:T.default,InputStream:E.default,Reader:S.default,Dictionary:u.default,Crypto:d.default},N=I({Dictionary:c.default},O),w=I({Dictionary:h.default},N),D=I({Dictionary:f.default},w),R=I({Dictionary:p.default},D),L=I({Dictionary:m.default},R),k=I({Writer:M.default,Reader:C.default,Dictionary:_.default},L),x={"01":!0,"03":!0,"04":!0,"05":!0,"06":!0,v1:!0,v2:!0,v3:!0,v4:!0},F={v5:O,v6:N,v7:w,v8:D,v9:R,v10:L,v11:k};t.default=class{constructor(e){var t="number"==typeof e?"v".concat(e):e;if(x[t])throw __LOG__(3)(P(),t),new v.DeprecatedProtocolVersion("bp_deprecated_version");var r=F[t];if(!r)throw __LOG__(3)(b(),t),new v.UpdateImmediately("bp_unknown_version");var i=r.OutputStream,s=new r.Writer(r.Dictionary),n=r.InputStream,o=new r.Reader(r.Dictionary),d=r.Crypto;this.Node=a(73631).default,g.default.supportsFeature(g.default.F.MD_BACKEND)||(this.read=e=>d.decrypt(e).then((e=>o.readNode(new n(e))))),this.write=(0,l.wrapSyncPromise)((e=>{var t=new i;return s.writeNode(t,e),d.encrypt(t.toBuffer())})),this.dropAllBecauseLogout=()=>d.dropAllBecauseLogout()}}},73631:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(46378);class i{static tag(e){return e&&e[0]}static attr(e,t){return t&&t[1]?t[1][e]:void 0}static attrs(e){return e[1]}static child(e,t){var a=t[2];if(Array.isArray(a))for(var r=a.length,i=0;i<r;i++){var s=a[i];if(Array.isArray(s)&&s[0]===e)return s}}static firstChild(e){var t=e[2];if(Array.isArray(t))return t[0]}static children(e,t){if(!t)return e&&e[2];var a=e[2];return Array.isArray(a)?a.filter((e=>e[0]===t)):void 0}static dataStr(e){if(!e)return"";var t=e[2];return"string"==typeof t?t:t instanceof ArrayBuffer?new r.Binary(t).readString(t.byteLength):""}static toString(e,t){if(!e)return"undefined";var a=function(e,t){if(e){var a="";for(var r in e){a+=" "+r+"="+("string"==typeof e[r]?t?"...":'"'+e[r]+'"':e[r])}return a}return""}(e[1],t),r=function(e,t){if(e instanceof ArrayBuffer)return"<<bin:"+e.byteLength+">>";if("string"==typeof e)return t?"<<string:"+e.length+">>":e;if(Array.isArray(e))return e.map((e=>i.toString(e,t))).join("\n");return""}(e[2],t);return"<"+e[0]+a+(r?">\n"+r+"\n</"+e[0]+">":"/>")}}t.default=i},26522:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={singleByte:["vname","old_jid","new_jid","announcement","locked","prop","label","color","call","offer","call-id"]}},74227:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={STREAM_END:2,LIST_EMPTY:0,DICTIONARY_0:236,DICTIONARY_1:237,DICTIONARY_2:238,DICTIONARY_3:239,JID_AD:247,LIST_8:248,LIST_16:249,JID_PAIR:250,HEX_8:251,BINARY_8:252,BINARY_20:253,BINARY_32:254,NIBBLE_8:255,SINGLE_BYTE_MAX:256,PACKED_MAX:254}},52761:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={singleByte:["quick_reply","sticker","pay_t","accept","reject","sticker_pack","invalid","canceled","missed","connected","result","audio","video","recent"]}},43339:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t="",a="",r=e.singleByte,i=e.doubleByte,o=e.nibbleDecode;this.readNode=function(e){var a=e.readByte(),r=this.readListSize(e,a);if((a=e.readByte())===s.default.STREAM_END)throw new Error("unexpected stream end "+e.debugInfo());var i=this.readString(e,a);if(t=i,0===r||!i)throw new Error("invalid node. 0 list or empty tag"+e.debugInfo());var n,o=this.readAttributes(e,r-2+r%2>>1);if(r%2==1)return[i,o,void 0];if(a=e.readByte(),this.isListTag(a))n=this.readList(e,a);else if(a===s.default.BINARY_8){var l=e.readByte();n=e.readBytes(l)}else if(a===s.default.BINARY_20){var d=e.readInt20();n=e.readBytes(d)}else if(a===s.default.BINARY_32){var u=e.readInt32();n=e.readBytes(u)}else n=this.readString(e,a);return[i,o,n]},this.isListTag=function(e){return e===s.default.LIST_EMPTY||e===s.default.LIST_8||e===s.default.LIST_16},this.readListSize=function(e,t){if(t===s.default.LIST_EMPTY)return 0;if(t===s.default.LIST_8)return e.readByte();if(t===s.default.LIST_16)return e.readInt16();throw new Error("invalid list size "+e.debugInfo())},this.readString=function(e,r,i=!0){var o;if(-1===r)throw new Error("invalid start token readString"+e.debugInfo());if(r>2&&r<236){var u=this.getToken(r);return"s.whatsapp.net"===u&&(u="c.us"),u}switch(r){case s.default.DICTIONARY_0:case s.default.DICTIONARY_1:case s.default.DICTIONARY_2:case s.default.DICTIONARY_3:var c=e.readByte();return this.getTokenDouble(r-s.default.DICTIONARY_0,c);case s.default.LIST_EMPTY:return;case s.default.BINARY_8:return o=e.readString(e.readByte()),this.isAttr&&i&&n.default.isWid(o)?d(o):o;case s.default.BINARY_20:return o=e.readString(e.readInt20()),this.isAttr&&i&&n.default.isWid(o)?d(o):o;case s.default.BINARY_32:return o=e.readString(e.readInt32()),this.isAttr&&i&&n.default.isWid(o)?d(o):o;case s.default.JID_PAIR:var h=this.readString(e,e.readByte()),f=this.readString(e,e.readByte());if(void 0!==h&&void 0!==f){var p=h+"@"+f;return i&&n.default.isWid(p)?d(p):p}if(void 0!==f)return f;throw new Error("invalid jid "+h+","+f+" "+e.debugInfo());case s.default.JID_AD:var m=e.readByte(),_=e.readByte(),v=this.readString(e,e.readByte());if(void 0!==v)return d(m&&_?v+"."+m+":"+_+"@c.us":m?v+"."+m+"@c.us":_?v+":"+_+"@c.us":v+"@c.us");throw new Error("invalid JID_AD agent:".concat(m," device:").concat(_," user:").concat(v));case s.default.NIBBLE_8:case s.default.HEX_8:return this.readPacked8(r,e);default:throw __LOG__(2,!0)(l(),r,t,a,e.debugInfoWithPadding()),new Error("invalid string "+r)}},this.getToken=function(e){var t;if(e>=0&&e<r.length&&(t=r[e]),void 0===t)throw new Error("invalid token "+e);return t},this.getTokenDouble=function(e,t){var a,r=256*e+t;if(r>=0&&r<i.length&&(a=i[r]),void 0===a)throw new Error("invalid double byte token "+e+" "+t);return a},this.readAttributes=function(e,t){var r,i;this.isAttr=!0;for(var s=t?{}:void 0,o=0;o<t;o++)r=this.readString(e,e.readByte()),a=r,i=this.readString(e,e.readByte(),n.default.canBeWid(r)),s[r]=i;return this.isAttr=!1,s},this.readList=function(e,t){for(var a=[],r=this.readListSize(e,t),i=0;i<r;i++)a.push(this.readNode(e));return a},this.readPacked8=function(e,t){for(var a=t.readByte(),r="",i=0;i<(127&a);i++){var s=t.readByte();r+=this.unpackByte(e,(240&s)>>4),r+=this.unpackByte(e,15&s)}return a>>7&&(r=r.substring(0,r.length-1)),r},this.unpackByte=function(e,t){switch(e){case s.default.NIBBLE_8:return this.unpackNibble(t);case s.default.HEX_8:return this.unpackHex(t);default:throw new Error("unpack non-nibble/hex type: "+e)}},this.unpackNibble=function(e){if(!o.hasOwnProperty(e))throw new Error("invalid nibble to unpack: "+e);return o[e]},this.unpackHex=function(e){if(e>=0&&e<=15)return e.toString(16).toUpperCase();throw new Error("invalid hex to unpack: "+e)}};var i=r(a(19976)),s=r(a(74227)),n=r(a(68384)),o=a(75637);function l(){var e=(0,i.default)(["Unexpected token in binary protocol read. Token : ","\nlastTag: ","\nlastAttributeKey: ","\n",""]);return l=function(){return e},e}function d(e){try{return(0,o.createWid)(e)}catch(t){return e}}},74284:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a={},r=e.nibbleEncode;for(t=0;t<e.singleByte.length;t++)e.singleByte[t]&&(a[e.singleByte[t]]=t);for(t=0;t<e.doubleByte.length;t++)e.doubleByte[t]&&(a[e.doubleByte[t]]=t+n.default.SINGLE_BYTE_MAX);this.writeNode=function(e,t){if(t){if(3!==t.length)throw new Error("invalid node");var a=t[1]?2*Object.keys(t[1]).filter((function(e){return!!t[1][e]})).length:0;this.writeListStart(e,1+a+(t[2]?1:0)),this.writeString(e,t[0]),this.writeAttributes(e,t[1]),this.writeChildren(e,t[2])}},this.writeString=function(e,t,r){if("string"!=typeof t&&!(t instanceof o.default))throw __LOG__(3)(c(),typeof t),new Error("invalid string");if(t instanceof o.default)this.writeJid(e,t);else{var i,s,d=a.hasOwnProperty(t)?a[t]:void 0;if("c.us"!==t||r)if(void 0===d){if(t.indexOf("@")<1)this.writeStringRaw(e,t);else try{var u=(0,l.createWid)(t);this.writeJid(e,u)}catch(a){this.writeStringRaw(e,t)}}else{if(d<n.default.SINGLE_BYTE_MAX)this.writeToken(e,d);else{var h=d-n.default.SINGLE_BYTE_MAX;switch(s=h%256,h>>8){case 0:i=n.default.DICTIONARY_0;break;case 1:i=n.default.DICTIONARY_1;break;case 2:i=n.default.DICTIONARY_2;break;case 3:i=n.default.DICTIONARY_3;break;default:throw new Error("double byte dictionary token out of range: "+t+" "+d)}}this.writeToken(e,i),this.writeToken(e,s)}else this.writeToken(e,a["s.whatsapp.net"])}},this.writeStringRaw=function(e,t){var a=(0,s.numUtf8Bytes)(t);if(a>=4294967296)throw new Error("string too large to encode (len = "+a+"): "+t);a>=1<<20?(e.pushByte(n.default.BINARY_32),e.pushInt32(a)):a>=256?(e.pushByte(n.default.BINARY_20),e.pushInt20(a)):(e.pushByte(n.default.BINARY_8),e.pushByte(a)),e.pushString(t)},this.writeJid=function(e,t){var a=t.user,r=t.server,i=t.agent,s=t.device;if(i||s){if(i>255||s>255||"c.us"!==r&&"s.whatsapp.net"!==r)throw new Error("invalid agent:".concat(i," or device:").concat(s," or server:").concat(r," for wid ").concat(t.toString()));e.pushByte(n.default.JID_AD),e.pushByte(i||0),e.pushByte(s||0),a?this.writePackedBytesStringFallback(e,a):this.writeToken(e,n.default.LIST_EMPTY)}else e.pushByte(n.default.JID_PAIR),a?this.writePackedBytesStringFallback(e,a):this.writeToken(e,n.default.LIST_EMPTY),this.writeString(e,r)},this.writeToken=function(e,t){if(t<245)e.pushByte(t);else if(t<=500)throw new Error("invalid token")},this.writeAttributes=function(e,t){if(t){for(var a in this.isAttr=!0,t)t[a]&&(this.writeString(e,a),this.writeString(e,t[a]));this.isAttr=!1}},this.writeChildren=function(e,t){var a;if(t)if("string"==typeof t)this.writeString(e,t,!0);else if(t instanceof ArrayBuffer){if((a=t.byteLength)>=4294967296)throw new Error("invalid children; too long (len = "+a);a>=1<<20?(e.pushByte(n.default.BINARY_32),e.pushInt32(a)):a>=256?(e.pushByte(n.default.BINARY_20),e.pushInt20(a)):(e.pushByte(n.default.BINARY_8),e.pushByte(a)),e.pushBytes(t)}else{if(!Array.isArray(t))throw new Error("invalid children");a=t.length,this.writeListStart(e,a);for(var r=0;r<a;r++)this.writeNode(e,t[r])}},this.writeListStart=function(e,t){0===t?e.pushByte(n.default.LIST_EMPTY):t<256?(e.pushByte(n.default.LIST_8),e.pushByte(t)):(e.pushByte(n.default.LIST_16),e.pushInt16(t))},this.writePackedBytesStringFallback=function(e,t){try{this.writePackedBytes(e,t)}catch(a){__LOG__(3,!0)(u(),a.message),this.writeString(e,t)}},this.writePackedBytes=function(e,t){try{this.writePackedBytesImpl(e,t,n.default.NIBBLE_8)}catch(a){__LOG__(3)(d(),a.message),this.writePackedBytesImpl(e,t,n.default.HEX_8)}},this.writePackedBytesImpl=function(e,t,a){var r=(0,s.numUtf8Bytes)(t);if(r>n.default.PACKED_MAX)throw new Error("too many bytes to nibble-encode: len = "+r);var i,o=[],l=0;r%2>0&&(l=128);var d=l|Math.ceil(r/2);o.push(a),o.push(d);for(var u=Math.floor(r/2),c=0;c<u;c++)i=this.packBytePair(a,t[2*c],t[2*c+1]),o.push(i);l>0&&(i=this.packBytePair(a,t[r-1],"\0"),o.push(i));var h=new Uint8Array(o);e.pushUint8Array(h)},this.packBytePair=function(e,t,a){var r,i;switch(e){case n.default.NIBBLE_8:r=this.packNibble(t),i=this.packNibble(a);break;case n.default.HEX_8:r=this.packHex(t),i=this.packHex(a);break;default:throw new Error("invalid byte pack type: "+e)}return r<<4|i},this.packNibble=function(e){if(!r.hasOwnProperty(e))throw new Error("invalid byte to nibble-pack: "+e);return r[e]},this.packHex=function(e){switch(e){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"A":case"B":case"C":case"D":case"E":case"F":return parseInt(e,16);case"\0":return 15;default:throw new Error("packHex:invalid byte: "+e)}}};var i=r(a(19976)),s=a(46378),n=r(a(74227)),o=r(a(68384)),l=a(75637);function d(){var e=(0,i.default)(['writer:enc nib fail, try hex "','"']);return d=function(){return e},e}function u(){var e=(0,i.default)(['writer:encode-fallback "','"']);return u=function(){return e},e}function c(){var e=(0,i.default)(["writer:writeString passed non-string/wid type: ",""]);return c=function(){return e},e}},7188:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={STREAM_END:2,LIST_EMPTY:0,DICTIONARY_0:236,DICTIONARY_1:237,DICTIONARY_2:238,DICTIONARY_3:239,LIST_8:248,LIST_16:249,JID_PAIR:250,HEX_8:251,BINARY_8:252,BINARY_20:253,BINARY_32:254,NIBBLE_8:255,SINGLE_BYTE_MAX:256,PACKED_MAX:254}},2008:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(38174),n=a(19741),o=i(a(22605)),l=i(a(61941)),d=r(a(8292));class u{static encrypt(e){if(!e)return Promise.reject(new Error("Missing ArrayBuffer in cryptoAsync:encrypt"));var t=d.get(),a=(0,s.encryptAndMac)((0,l.default)(t.encKey,"bundle.encKey"),(0,l.default)(t.macKey,"bundle.macKey"),e);return this._encryptQueue.enqueue(a)}static decrypt(e){if(!e)return Promise.reject(new Error("Missing ArrayBuffer in cryptoAsync:decrypt"));var t=d.get(),a=(0,s.macAndDecrypt)((0,l.default)(t.encKey,"bundle.encKey"),(0,l.default)(t.macKey,"bundle.macKey"),e);return this._decryptQueue.enqueue(a)}static dropAllBecauseLogout(){var e=new n.LogoutDrop("cancelled binary protocol call");this._encryptQueue.cancelAll(e),this._decryptQueue.cancelAll(e)}}t.default=u,u._encryptQueue=new o.default,u._decryptQueue=new o.default},21107:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={singleByte:[void 0,void 0,void 0,"200","400","404","500","501","502","action","add","after","archive","author","available","battery","before","body","broadcast","chat","clear","code","composing","contacts","count","create","debug","delete","demote","duplicate","encoding","error","false","filehash","from","g.us","group","groups_v2","height","id","image","in","index","invis","item","jid","kind","last","leave","live","log","media","message","mimetype","missing","modify","name","notification","notify","out","owner","participant","paused","picture","played","presence","preview","promote","query","raw","read","receipt","received","recipient","recording","relay","remove","response","resume","retry","s.whatsapp.net","seconds","set","size","status","subject","subscribe","t","text","to","true","type","unarchive","unavailable","url","user","value","web","width","mute","read_only","admin","creator","short","update","powersave","checksum","epoch","block","previous","409","replaced","reason","spam","modify_tag","message_info","delivery","emoji","title","description","canonical-url","matched-text","star","unstar","media_key","filename","identity","unread","page","page_count","search","media_message","security","call_log","profile"],doubleByte:[],nibbleEncode:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,"-":10,".":11,"\0":15},nibbleDecode:{0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"-",11:".",15:"\0"}};t.default=a},65986:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(46378);t.default=class{constructor(e){this.binary=new r.Binary(e)}readByte(){return this.binary.readUint8()}readInt16(){return this.binary.readUint16()}readInt20(){return((15&this.binary.readUint8())<<16)+(this.binary.readUint8()<<8)+this.binary.readUint8()}readInt32(){return this.binary.readUint32()}readString(e){return this.binary.readString(e)}readBytes(e){return this.binary.readBuffer(e)}debugInfo(){var e=this.binary;return"offset: ".concat(e._readIndex," byte: ").concat(e._buffer[e._readIndex])}debugInfoWithPadding(){var e=this.binary,t=e._buffer.slice(Math.max(0,e._readIndex-20),e._readIndex).toString(),a=e._buffer.slice(e._readIndex,Math.min(e._buffer.length,e._readIndex+20)).toString();return"offset: ".concat(e._readIndex," byte: ").concat(e._buffer[e._readIndex]," previous 20 bytes: ").concat(t,"\n        following 20 bytes: ").concat(a,"\n        ")}}},76564:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(46378);t.default=class{constructor(){this.buf=new r.Binary}pushInt16(e){this.buf.writeUint16(e)}pushInt20(e){if("number"!=typeof e)throw new Error("invalid int20");this.buf.writeUint8((983040&e)>>16),this.buf.writeUint16(65535&e)}pushInt32(e){this.buf.writeUint32(e)}pushByte(e){this.buf.writeUint8(e)}pushBytes(e){if(!(e instanceof ArrayBuffer))throw new Error("invalid byte buffer");this.buf.writeBuffer(e)}pushUint8Array(e){if("[object Uint8Array]"!==Object.prototype.toString.call(e))throw new Error("invalid Uint8Array");this.buf.writeByteArray(e)}pushString(e){if("string"!=typeof e)throw new Error("invalid string");this.buf.writeString(e)}toBuffer(){return this.buf.readBuffer()}}},44341:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t="",a="",r=e.singleByte,i=e.doubleByte,o=e.nibbleDecode;this.readNode=function(e){var a=e.readByte(),r=this.readListSize(e,a);if((a=e.readByte())===s.default.STREAM_END)throw new Error("unexpected stream end "+e.debugInfo());var i=this.readString(e,a);if(0===r||!i)throw new Error("invalid node. 0 list or empty tag"+e.debugInfo());t=i;var n,o=this.readAttributes(e,r-2+r%2>>1);if(r%2==1)return[i,o,void 0];if(a=e.readByte(),this.isListTag(a))n=this.readList(e,a);else if(a===s.default.BINARY_8){var l=e.readByte();n=e.readBytes(l)}else if(a===s.default.BINARY_20){var d=e.readInt20();n=e.readBytes(d)}else if(a===s.default.BINARY_32){var u=e.readInt32();n=e.readBytes(u)}else n=this.readString(e,a);return[i,o,n]},this.isListTag=function(e){return e===s.default.LIST_EMPTY||e===s.default.LIST_8||e===s.default.LIST_16},this.readListSize=function(e,t){if(t===s.default.LIST_EMPTY)return 0;if(t===s.default.LIST_8)return e.readByte();if(t===s.default.LIST_16)return e.readInt16();throw new Error("invalid list size "+e.debugInfo())},this.readString=function(e,r,i=!0){var o;if(-1===r)throw new Error("invalid start token readString"+e.debugInfo());if(r>2&&r<236){var u=this.getToken(r);return"s.whatsapp.net"===u&&(u="c.us"),u}switch(r){case s.default.DICTIONARY_0:case s.default.DICTIONARY_1:case s.default.DICTIONARY_2:case s.default.DICTIONARY_3:var c=e.readByte();return this.getTokenDouble(r-s.default.DICTIONARY_0,c);case s.default.LIST_EMPTY:return;case s.default.BINARY_8:return o=e.readString(e.readByte()),this.isAttr&&i&&n.default.isWid(o)?d(o):o;case s.default.BINARY_20:return o=e.readString(e.readInt20()),this.isAttr&&i&&n.default.isWid(o)?d(o):o;case s.default.BINARY_32:return o=e.readString(e.readInt32()),this.isAttr&&i&&n.default.isWid(o)?d(o):o;case s.default.JID_PAIR:var h=this.readString(e,e.readByte()),f=this.readString(e,e.readByte());if(void 0!==h&&void 0!==f){var p=h+"@"+f;return i&&n.default.isWid(p)?d(p):p}if(void 0!==f)return f;throw new Error("invalid jid "+h+","+f+" "+e.debugInfo());case s.default.NIBBLE_8:case s.default.HEX_8:return this.readPacked8(r,e);default:throw __LOG__(2,!0)(l(),r,t,a,e.debugInfoWithPadding()),new Error("invalid string "+r)}},this.getToken=function(e){var t;if(e>=0&&e<r.length&&(t=r[e]),void 0===t)throw new Error("invalid token "+e);return t},this.getTokenDouble=function(e,t){var a,r=256*e+t;if(r>=0&&r<i.length&&(a=i[r]),void 0===a)throw new Error("invalid double byte token "+e+" "+t);return a},this.readAttributes=function(e,t){var r,i;this.isAttr=!0;for(var s=t?{}:void 0,o=0;o<t;o++)r=this.readString(e,e.readByte()),a=r,i=this.readString(e,e.readByte(),n.default.canBeWid(r)),s[r]=i;return this.isAttr=!1,s},this.readList=function(e,t){for(var a=[],r=this.readListSize(e,t),i=0;i<r;i++)a.push(this.readNode(e));return a},this.readPacked8=function(e,t){for(var a=t.readByte(),r="",i=0;i<(127&a);i++){var s=t.readByte();r+=this.unpackByte(e,(240&s)>>4),r+=this.unpackByte(e,15&s)}return a>>7&&(r=r.substring(0,r.length-1)),r},this.unpackByte=function(e,t){switch(e){case s.default.NIBBLE_8:return this.unpackNibble(t);case s.default.HEX_8:return this.unpackHex(t);default:throw new Error("unpack non-nibble/hex type: "+e)}},this.unpackNibble=function(e){if(!o.hasOwnProperty(e))throw new Error("invalid nibble to unpack: "+e);return o[e]},this.unpackHex=function(e){if(e>=0&&e<=15)return e.toString(16).toUpperCase();throw new Error("invalid hex to unpack: "+e)}};var i=r(a(19976)),s=r(a(7188)),n=r(a(68384)),o=a(75637);function l(){var e=(0,i.default)(["Unexpected token in binary protocol read. Token : ","\nlastTag: ","\nlastAttributeKey: ","\n",""]);return l=function(){return e},e}function d(e){try{return(0,o.createWid)(e)}catch(t){return e}}},51629:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a={},r=e.nibbleEncode;for(t=0;t<e.singleByte.length;t++)e.singleByte[t]&&(a[e.singleByte[t]]=t);for(t=0;t<e.doubleByte.length;t++)e.doubleByte[t]&&(a[e.doubleByte[t]]=t+n.default.SINGLE_BYTE_MAX);this.writeNode=function(e,t){if(t){if(3!==t.length)throw new Error("invalid node");var a=t[1]?2*Object.keys(t[1]).filter((function(e){return!!t[1][e]})).length:0;this.writeListStart(e,1+a+(t[2]?1:0)),this.writeString(e,t[0]),this.writeAttributes(e,t[1]),this.writeChildren(e,t[2])}},this.writeString=function(e,t,r){if("string"!=typeof t&&!(t instanceof o.default))throw __LOG__(3)(u(),typeof t),new Error("invalid string");if(t instanceof o.default)this.writeJid(e,t.user,t.server);else{var i,s,l=a.hasOwnProperty(t)?a[t]:void 0;if("c.us"!==t||r)if(void 0===l){var d=t.indexOf("@");if(d<1)this.writeStringRaw(e,t);else{var c=t.substring(0,d),h=t.substring(d+1);this.writeJid(e,c,h)}}else{if(l<n.default.SINGLE_BYTE_MAX)this.writeToken(e,l);else{var f=l-n.default.SINGLE_BYTE_MAX;switch(s=f%256,f>>8){case 0:i=n.default.DICTIONARY_0;break;case 1:i=n.default.DICTIONARY_1;break;case 2:i=n.default.DICTIONARY_2;break;case 3:i=n.default.DICTIONARY_3;break;default:throw new Error("double byte dictionary token out of range: "+t+" "+l)}}this.writeToken(e,i),this.writeToken(e,s)}else this.writeToken(e,a["s.whatsapp.net"])}},this.writeStringRaw=function(e,t){var a=(0,s.numUtf8Bytes)(t);if(a>=4294967296)throw new Error("string too large to encode (len = "+a+"): "+t);a>=1<<20?(e.pushByte(n.default.BINARY_32),e.pushInt32(a)):a>=256?(e.pushByte(n.default.BINARY_20),e.pushInt20(a)):(e.pushByte(n.default.BINARY_8),e.pushByte(a)),e.pushString(t)},this.writeJid=function(e,t,a){if(e.pushByte(n.default.JID_PAIR),t)try{this.writePackedBytes(e,t)}catch(a){__LOG__(3,!0)(d(),a.message),this.writeString(e,t)}else this.writeToken(e,n.default.LIST_EMPTY);this.writeString(e,a)},this.writeToken=function(e,t){if(t<245)e.pushByte(t);else if(t<=500)throw new Error("invalid token")},this.writeAttributes=function(e,t){if(t){for(var a in this.isAttr=!0,t)t[a]&&(this.writeString(e,a),this.writeString(e,t[a]));this.isAttr=!1}},this.writeChildren=function(e,t){var a;if(t)if("string"==typeof t)this.writeString(e,t,!0);else if(t instanceof ArrayBuffer){if((a=t.byteLength)>=4294967296)throw new Error("invalid children; too long (len = "+a);a>=1<<20?(e.pushByte(n.default.BINARY_32),e.pushInt32(a)):a>=256?(e.pushByte(n.default.BINARY_20),e.pushInt20(a)):(e.pushByte(n.default.BINARY_8),e.pushByte(a)),e.pushBytes(t)}else{if(!Array.isArray(t))throw new Error("invalid children");a=t.length,this.writeListStart(e,a);for(var r=0;r<a;r++)this.writeNode(e,t[r])}},this.writeListStart=function(e,t){0===t?e.pushByte(n.default.LIST_EMPTY):t<256?(e.pushByte(n.default.LIST_8),e.pushByte(t)):(e.pushByte(n.default.LIST_16),e.pushInt16(t))},this.writePackedBytes=function(e,t){try{this.writePackedBytesImpl(e,t,n.default.NIBBLE_8)}catch(a){__LOG__(3)(l(),a.message),this.writePackedBytesImpl(e,t,n.default.HEX_8)}},this.writePackedBytesImpl=function(e,t,a){var r=(0,s.numUtf8Bytes)(t);if(r>n.default.PACKED_MAX)throw new Error("too many bytes to nibble-encode: len = "+r);var i,o=[],l=0;r%2>0&&(l=128);var d=l|Math.ceil(r/2);o.push(a),o.push(d);for(var u=Math.floor(r/2),c=0;c<u;c++)i=this.packBytePair(a,t[2*c],t[2*c+1]),o.push(i);l>0&&(i=this.packBytePair(a,t[r-1],"\0"),o.push(i));var h=new Uint8Array(o);e.pushUint8Array(h)},this.packBytePair=function(e,t,a){var r,i;switch(e){case n.default.NIBBLE_8:r=this.packNibble(t),i=this.packNibble(a);break;case n.default.HEX_8:r=this.packHex(t),i=this.packHex(a);break;default:throw new Error("invalid byte pack type: "+e)}return r<<4|i},this.packNibble=function(e){if(!r.hasOwnProperty(e))throw new Error("invalid byte to nibble-pack: "+e);return r[e]},this.packHex=function(e){switch(e){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"A":case"B":case"C":case"D":case"E":case"F":return parseInt(e,16);case"\0":return 15;default:throw new Error("packHex:invalid byte: "+e)}}};var i=r(a(19976)),s=a(46378),n=r(a(7188)),o=r(a(68384));function l(){var e=(0,i.default)(['writer:enc nib fail, try hex "','"']);return l=function(){return e},e}function d(){var e=(0,i.default)(['writer:encode-fallback "','"']);return d=function(){return e},e}function u(){var e=(0,i.default)(["writer:writeString passed non-string/wid type: ",""]);return u=function(){return e},e}},98546:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={singleByte:["ciphertext","invite"]}},78499:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={singleByte:["gif","vcard","frequent"]}},14848:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={singleByte:["privacy","blacklist","whitelist","verify"]}},92810:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={singleByte:["location","document","elapsed","revoke_invite","expiration","unsubscribe","disable"]}},17318:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={sendConversationDismissChangeNumber:function(e){return this.sendConversationOpWithKey("modify",e,void 0,void 0)}};t.default=a},72711:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(19034)),s=a(95595),n=r(a(12767)),o={setGroupEphemeralDuration:function(e,t){return new Promise(((a,r)=>{var o=n.default.tag(),l=this.wrap(a);l.tag=o;var d=[["ephemeral",{value:t.toString()},void 0]],u=["group",{id:o,jid:e,type:"prop",author:(0,s.getMaybeMeUser)()},d],c=this.actionNode("set",[u]);this.binSend("send",c,r,{clientCacheable:!0,onSend:l,onDrop:this.wrap(r)},{debugString:"action,group,ephemeral,"+t,metricName:"GROUP",expires:(0,i.default)().unix()})}))}};t.default=o},58305:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(19034)),s=a(95595),n=a(11419),o=r(a(12767)),l={setGroupDescription:function(e,t,a,r){return new Promise(((l,d)=>{var u,c=o.default.tag(),h=this.wrap(l);h.tag=c,u=(0,n.isString)(t)?[["description",{id:a,prev:r||"none"},t]]:[["description",{prev:r||"none",delete:"true"},void 0]];var f=["group",{id:c,jid:e,type:"description",author:(0,s.getMaybeMeUser)()},u],p=this.actionNode("set",[f]);this.binSend("send",p,d,{clientCacheable:!0,onSend:h,onDrop:this.wrap(d)},{debugString:"action,group,desc",metricName:"GROUP",expires:(0,i.default)().unix()})}))},setGroupProperty:function(e,t,a){return"announcement"!==t&&"restrict"!==t&&"no_frequently_forwarded"!==t?Promise.reject("invalid group property"):new Promise(((r,n)=>{var l,d=o.default.tag(),u=this.wrap(r);switch(u.tag=d,t){case"announcement":l=[["announcement",{value:(!!a).toString()},void 0]];break;case"restrict":l=[["locked",{value:(!!a).toString()},void 0]];break;case"no_frequently_forwarded":l=[["no_frequently_forwarded",{value:(!!a).toString()},void 0]]}var c=["group",{id:d,jid:e,type:"prop",author:(0,s.getMaybeMeUser)()},l],h=this.actionNode("set",[c]);this.binSend("send",h,n,{clientCacheable:!0,onSend:u,onDrop:this.wrap(n)},{debugString:["action,group,prop",t,a].join(),metricName:"GROUP",expires:(0,i.default)().unix()})}))},demoteParticipants:function(e,t){return this.setGroupParticipants("demote",e,t)}};t.default=l},98283:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(19976)),s=r(a(19034)),n=a(95595),o=a(11419),l=r(a(12767));function d(){var e=(0,i.default)(["create group tag"]);return d=function(){return e},e}var u={createGroup:function(e,t,a,r,i,u,c){return new Promise(((h,f)=>{var p=l.default.tag(),m=this.wrap(h);m.tag=p;var _=t.map((e=>["participant",{jid:e},void 0]));(0,o.isString)(a)&&(0,o.isString)(r)&&_.unshift(["description",{id:r},a]),i&&_.unshift(["locked",void 0,void 0]),u&&_.unshift(["announcement",void 0,void 0]),null!=c&&0!==c&&_.unshift(["ephemeral",{value:c.toString()},void 0]),__LOG__(2)(d());var v=["group",{id:p,type:"create",author:(0,n.getMaybeMeUser)(),subject:e},_],g=this.actionNode("set",[v]);this.binSend("send",g,f,{clientCacheable:!0,onSend:m,onDrop:this.wrap(f)},{debugString:"action,group,create",metricName:"GROUP",expires:(0,s.default)().unix()})}))}};t.default=u},21017:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(19034)),s=r(a(12767)),n={findGroupPendingInvitesFromPhone:function(e,t){return new Promise(((a,r)=>{var i=this.queryNode({type:"group",kind:"invite",from:e,jid:t},[]);this.binSend("sendEphemeral",i,r,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{if("response"===this.N.tag(e)&&"group"===this.N.attr("type",e)){var t=this.N.children(e),r=t&&t[0];if(r){var i=[],s=this.N.children(r);Array.isArray(s)&&s.forEach((e=>{switch(this.N.tag(e)){case"participant":i.push({id:this.N.attr("jid",e)})}})),a({participants:i})}else a({status:"error",info:"bad format: no group node"})}else a({status:"error",info:"bad format: response incorrect"})})).catch(r)}),a),onDrop:this.wrap(r)},{debugString:"query,group_pending_invite",metricName:"QUERY_GROUP",ackRequest:!1})}))},acceptGroupV4Invite:function(e,t,a,r,n){return new Promise(((o,l)=>{var d=s.default.tag(),u=this.wrap(o);u.tag=d;var c=[["accept",{admin:t,expiration:r,code:a},void 0]],h=this.actionNode("set",[["group",{id:d,author:n,jid:e,type:"accept"},c]]);this.binSend("send",h,l,{clientCacheable:!0,onSend:u,onDrop:this.wrap(l)},{debugString:"action,group_invite_accept,",ackRequest:!1,expires:(0,i.default)().unix()})}))},revokeGroupV4Invite:function(e,t,a){return new Promise(((r,n)=>{var o=s.default.tag(),l=this.wrap(r);l.tag=o;var d=e.map((e=>["participant",{jid:e},void 0])),u=this.actionNode("set",[["group",{id:o,author:a,jid:t,type:"revoke"},d]]);this.binSend("send",u,n,{clientCacheable:!0,onSend:l,onDrop:this.wrap(n)},{debugString:"action,group_invite_revoke,",ackRequest:!1,expires:(0,i.default)().unix()})}))},parseInviteUpdate(e){var t=[],[a,r,i]=[this.N.attr("kind",e),this.N.attr("jid",e),this.N.attr("type",e)];if("update"===a&&"invite"===i&&void 0!==r){for(var s=this.N.children(e),n=0;n<s.length;n++){var o=s[n];"participant"===this.N.tag(o)&&t.push(this.N.attr("jid",o))}return{gid:r,participants:t}}}};t.default=n},90806:(e,t,a)=>{"use strict";var r=a(14859);t.Z=void 0;var i=r(a(17318)),s=r(a(72711)),n=r(a(58305)),o=r(a(98283)),l=r(a(21017)),d=r(a(22999)),u=r(a(9304)),c=r(a(5450)),h=r(a(50568)),f=r(a(16219)),p=r(a(64716)),m=r(a(49749)),_=r(a(69525)),v=r(a(88981)),g=r(a(99891)),E=r(a(94953)),y=r(a(13494)),S=r(a(30144)),C=r(a(47668)),T={labelsDisplay:d.default,groupsV3:n.default,groupsV3Create:o.default,changeNumberV2:i.default,queryStatusV3Thumbnail:p.default,queryVname:m.default,voipIndividualIncoming:C.default,quickRepliesQuery:_.default,payments:f.default,stickerPackQuery:y.default,labelsEdit:u.default,mediaUpload:c.default,videoPlaybackUrl:S.default,recentStickersV2:v.default,recentStickersV3:v.default,starredStickers:E.default,groupsV4JoinPermission:l.default,ephemeralMessages:s.default,userNotice:h.default,settingsSync:g.default};t.Z=T},22999:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(19976)),s=(a(12824),r(a(77865))),n=r(a(61941));function o(){var e=(0,i.default)(["bin-recv: response,label"]);return o=function(){return e},e}var l={chat:["Chat","Contact"],message:["Msg"],contact:["Contact"]},d={queryLabels:function(){return new Promise(((e,t)=>{var a=this.queryNode({type:"label"});this.binSend("sendEphemeral",a,t,{onSend:this.binWrap((a=>{this.BinaryProtocol.read(a).then((t=>{var a={labels:[]};if(__LOG__(2)(o()),"response"===this.N.tag(t)&&"label"===this.N.attr("type",t)){a.checksum=this.N.attr("checksum",t);var r=this.N.children(t);if(Array.isArray(r))for(var i=0;i<r.length;i++){var s=this.parseLabel(r[i]),n=s&&s.label;n&&a.labels.push(n)}}e(a)})).catch(t)}),e),onDrop:this.wrap(t)},{debugString:"query,labels",metricName:"QUERY_LABELS"})}))},parseLabel:function(e){if("label"===this.N.tag(e)){var t,a=parseInt(this.N.attr("count",e),10),r=this.N.attr("id",e),i=this.N.attr("name",e),o=this.N.attr("color",e),d=isNaN(a)?void 0:a,c=this.N.attr("type",e);if("update"===c)for(var h=this.N.children(e),f=0;f<h.length;f++){var p=h[f],m=null;switch(this.N.tag(p)){case"chat":m=this.N.attr("jid",p);break;case"message":var _=this.N.attr("jid",p),v=this.N.attr("index",p),g="true"===this.N.attr("owner",p),E=this.N.attr("participant",p);m=new s.default({fromMe:g,remote:_,id:v,participant:E})}var y={id:(0,n.default)(m,"updateId"),labels:u(this.N.children(p),this.N.attr),collection:l[this.N.tag(p)]};t=t?t.concat(y):[y]}var S={label:{id:r,name:i,color:o,count:d},type:c,labelUpdates:t};return this.dropIfConditionMet([!(c||r&&i&&o),c&&"update"!==c&&"delete"!==c],S)}}};function u(e,t){return e&&Array.isArray(e)?e.reduce(((e,a)=>[...e,(0,n.default)(t("id",a),"attr('id', label)")]),[]):[]}t.default=d},9304:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(19976)),s=r(a(19034)),n=r(a(7470));function o(){var e=(0,i.default)(["bin-recv: response,",""]);return o=function(){return e},e}var l={queryNextLabelColor(){return this._queryLabelColor(!0)},queryLabelPalette(){return this._queryLabelColor()},createLabel(e,t){return this._createOrDeleteLabels("create",e,t)},deleteLabel(e){return this._createOrDeleteLabels("delete",void 0,void 0,e)},_queryLabelColor:function(e){var t=e?"next label color":"all label color palette";return new Promise(((a,r)=>{var i=this.queryNode({type:"label",kind:"color",create:e?"true":void 0});this.binSend("sendEphemeral",i,r,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var r={};if(__LOG__(2)(o(),t),"response"===this.N.tag(e)&&"label"===this.N.attr("type",e)){r.labelColors=[];var i=this.N.children(e);if(Array.isArray(i))for(var s=0;s<i.length;s++){var n=this.parseLabelColor(i[s]);n&&r.labelColors.push(n)}}a(r)})).catch(r)}),a),onDrop:this.wrap(r)},{debugString:"query,".concat(t),metricName:e?"QUERY_NEXT_LABEL_COLOR":"QUERY_LABEL_PALETTE"})}))},addOrRemoveLabels:function(e,t=[]){return new Promise(((r,i)=>{var o=this.wrap(r),l=e.map((e=>["label",{id:e.id,type:e.type},void 0])),d=t.map((e=>e instanceof a(43334).default.modelClass?["chat",{jid:e.id},void 0]:e instanceof n.default.modelClass?["contact",{jid:e.id},void 0]:e instanceof a(58885).default.modelClass?["message",{index:e.id.id,owner:void 0===e.id.fromMe?void 0:e.id.fromMe.toString(),jid:e.id.remote},void 0]:void 0)),u=this.actionNode("set",[["label",{type:"update"},d.concat(l)]]);this.binSend("send",u,i,{onSend:o,onDrop:this.wrap(i)},{debugString:"action,label,remove or add",metricName:"ADD_OR_REMOVE_LABELS",expires:(0,s.default)().unix()})}))},_createOrDeleteLabels:function(e,t,a,r){return"delete"!==e&&"create"!==e?Promise.reject(new Error("_createOrDeleteLabels must be called with type of delete or create")):new Promise(((i,n)=>{var o=this.wrap(i),l={type:e,name:t,color:a,id:r||void 0},d=this.actionNode("set",[["label",l,void 0]]);this.binSend("send",d,n,{onSend:o,onDrop:this.wrap(n)},{debugString:"action,label,create or delete",metricName:"CREATE_OR_DELETE_LABELS",expires:(0,s.default)().unix()})}))},editLabel:function(e,t,a){return new Promise(((r,i)=>{var n=this.wrap(r),o={id:e,name:t||void 0,color:a||void 0,type:"update"},l=this.actionNode("set",[["label",o,void 0]]);this.binSend("send",l,i,{onSend:n,onDrop:this.wrap(i)},{debugString:"action,label,edit",metricName:"EDIT_LABELS",expires:(0,s.default)().unix()})}))},parseLabelColor:function(e){if("label"===this.N.tag(e)){var t=this.N.attr("color",e);return this.dropIfConditionMet([!t],{color:t})}}};t.default=l},5450:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(19976));function s(){var e=(0,i.default)(["wap:mediaUpload:missing-field"]);return s=function(){return e},e}function n(){var e=(0,i.default)(["wap:mediaUpload:missing-field"]);return n=function(){return e},e}function o(){var e=(0,i.default)(["wap:mediaUpload:error ",""]);return o=function(){return e},e}function l(){var e=(0,i.default)(["wap:mediaUpload:malformed"]);return l=function(){return e},e}function d(){var e=(0,i.default)(["bin-recv: response,media"]);return d=function(){return e},e}var u=["url","mediaKey","filehash","encFilehash","width","height","mimetype"],c=["url","mediaKey","filehash","encFilehash","mimetype"];function h(e,t){for(var a=0;a<t.length;a++)if(!e[t[a]])return!1;return!0}var f={mediaUpload:function(e,t){return new Promise(((a,r)=>{var i=this.queryNode({type:"media",kind:e,id:t.toString()},void 0);this.binSend("sendEphemeral",i,r,{onSend:this.binWrap((t=>{this.BinaryProtocol.read(t).then((t=>{if(__LOG__(2)(d()),"response"!==this.N.tag(t)||"media"!==this.N.attr("type",t))return __LOG__(3)(l()),void a({status:400});var r=parseInt(this.N.attr("code",t),10)||200;if(200!==r)return __LOG__(3)(o(),r),void a({status:r});switch(e){case"sticker":var i={directPath:this.N.attr("direct_path",t),url:this.N.attr("url",t),filehash:this.N.attr("filehash",t),encFilehash:this.N.attr("enc_filehash",t),mediaKey:this.N.attr("media_key",t),mimetype:this.N.attr("mimetype",t),height:this.N.attr("height",t),width:this.N.attr("width",t)};return h(i,u)?void a({status:r,sticker:i}):(__LOG__(3)(n()),void a({status:400}));case"sticker-pack":var f={directPath:this.N.attr("direct_path",t),url:this.N.attr("url",t),filehash:this.N.attr("filehash",t),encFilehash:this.N.attr("enc_filehash",t),mediaKey:this.N.attr("media_key",t),mimetype:this.N.attr("mimetype",t)};return h(f,c)?void a({status:r,stickerPack:f}):(__LOG__(3)(s()),void a({status:400}));case"quick-reply":throw new Error('"quick-reply" not yet implemented');default:throw new Error("unknown kind ".concat(e))}}))}),a),onDrop:this.wrap(r)},{debugString:"query,media",metricName:"QUERY_MEDIA",ackRequest:!1})}))}};t.default=f},50568:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(70417)),s=r(a(19976)),n=r(a(45455));function o(){var e=(0,s.default)(["bin-recv: response,notice_state"]);return o=function(){return e},e}var l={queryNoticeState:function(e){return new Promise(((t,a)=>{var r=this.queryNode({type:"notice"},void 0),i=e?"query,notice_state,resume":"query,notice_state";this.binSend("sendEphemeral",r,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var a={notices:[],status:parseInt(this.N.attr("code",e),10)||200};if(__LOG__(2)(o()),"response"===this.N.tag(e)&&"notice"===this.N.attr("type",e)){var r=this.N.children(e);if(Array.isArray(r))for(var i=0;i<r.length;i++){var s=this.parseNotice(r[i]);(0,n.default)(s)||a.notices.push(s)}}t(a)})).catch(a)}),t),onDrop:this.wrap(a),serverCacheable:Boolean(e)},{debugString:i,metricName:"QUERY_NOTICE_STATE"})}))},parseNotice:function(e){if("notice"===this.N.tag(e)){var t=parseInt(this.N.attr("id",e),10),a=parseInt(this.N.attr("version",e),10),r={id:isNaN(t)?void 0:t,blocking:"true"===this.N.attr("blocking",e),version:isNaN(a)?void 0:a};return null!=r.id?r:(0,i.default)({},void 0)}}};t.default=l},16219:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(44880),s=r(a(61941)),n={parsePaymentInfo:function(e,t){t&&(e.paymentStatus=t.status,e.paymentTxnStatus=t.txnStatus,e.paymentCurrency=t.currency||"",e.paymentAmount1000=(0,s.default)((0,i.maybeNumberOrThrowIfTooLarge)(t.amount1000),"maybeNumberOrThrowIfTooLarge(paymentInfo.amount1000)"),e.paymentMessageReceiverJid=this.decodeJid((0,s.default)(t.receiverJid,"paymentInfo.receiverJid")),e.paymentExpiryTimestamp=(0,i.maybeNumberOrThrowIfTooLarge)(t.expiryTimestamp),e.paymentTransactionTimestamp=(0,s.default)((0,i.maybeNumberOrThrowIfTooLarge)(t.transactionTimestamp),"maybeNumberOrThrowIfTooLarge(paymentInfo.transactionTimestamp)"))}};t.default=n},64716:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={statusQueryThumbnail:function(e){return this.profilePicFindThumbFromPhone(e,void 0,!0)}};t.default=a},49749:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(19976));function s(){var e=(0,i.default)(["bin-recv: response,vname"]);return s=function(){return e},e}var n={queryVname:function(e){return new Promise(((t,a)=>{var r=this.queryNode({type:"vname",jid:e},void 0);this.binSend("sendEphemeral",r,a,{onSend:this.binWrap((r=>{this.BinaryProtocol.read(r).then((a=>{var r;__LOG__(2)(s()),"response"===this.N.tag(a)&&"vname"===this.N.attr("type",a)&&(r=this.parseContact(this.N.child("user",a),e)),t(r)})).catch(a)}),t),onDrop:this.wrap(a)},{debugString:"query,vname,".concat(e),metricName:"QUERY_VNAME"})}))}};t.default=n},69525:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(19976)),s=a(11419);function n(){var e=(0,i.default)(["bin-recv: response,quick_reply"]);return n=function(){return e},e}var o={queryQuickReplies:function(e){return this.sendQuickRepliesQuery(e,!1)},flushQuickReplyCounts:function(e){return this.sendQuickRepliesQuery(e,!0)},sendQuickRepliesQuery:function(e,t){return new Promise(((a,r)=>{var i=e?Object.keys(e).map((t=>["quick_reply",{id:t,count:e[t].toString()},void 0])):void 0,s={type:"quick_reply"};t&&(s.kind="count");var o=this.queryNode(s,i);this.binSend("sendEphemeral",o,r,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var r={data:[]};if(__LOG__(2)(n()),"response"===this.N.tag(e)&&"quick_reply"===this.N.attr("type",e)){r.checksum=this.N.attr("checksum",e);var i=this.N.children(e);if(Array.isArray(i))for(var s=0;s<i.length;s++){var o=(t?this.parseQuickReplyCount.bind(this):this.parseQuickReply.bind(this))(i[s]);o&&r.data.push(o)}}a(r)})).catch(r)}),a),onDrop:this.wrap(r)},{debugString:"query,quick_replies",metricName:"QUERY_QUICK_REPLIES"})}))},parseQuickReply:function(e){if("quick_reply"===this.N.tag(e)){var t=this.N.attr("id",e),a=this.N.attr("short",e),r=this.N.attr("message",e),i=parseInt(this.N.attr("count",e),10)||0,n=this.N.attr("type",e),o=[];if("delete"!==n){var l=this.N.children(e);if(Array.isArray(l))for(var d=0;d<l.length;d++){var u=l[d];"matched-text"===this.N.tag(u)&&o.push(this.N.dataStr(u))}}var c=[!(n||t&&a&&r&&(0,s.isNumber)(i)),n&&"delete"!==n,"delete"===n&&!t];return this.dropIfConditionMet(c,{id:t,shortcut:a,message:r,count:i,keywords:o,type:n})}},parseQuickReplyCount:function(e){if("quick_reply"===this.N.tag(e)){var t=this.N.attr("id",e),a=parseInt(this.N.attr("count",e),10)||0,r=[!t||!(0,s.isNumber)(a)];return this.dropIfConditionMet(r,{id:t,count:a})}}};t.default=o},88981:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(38739)),s={queryRecentStickers:function(){return new Promise(((e,t)=>{var a=this.queryNode({type:"recent_stickers"},void 0);this.binSend("sendEphemeral",a,t,{onSend:this.binWrap((a=>{this.BinaryProtocol.read(a).then((e=>(0,i.default)(e,this.N,"recent_stickers"))).then(e,t)}),e),onDrop:this.wrap(t)},{debugString:"query,recent_stickers",metricName:"QUERY_RECENT_STICKERS"})}))}};t.default=s},92961:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("recent_stickers"!==t.tag(e))return;if("delete"!==t.attr("type",e))return;return t.attr("filehash",e)}},99891:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(19976)),s=r(a(45455));function n(){var e=(0,i.default)(["bin-recv: response,settings"]);return n=function(){return e},e}var o={querySettings:function(e){return new Promise(((t,a)=>{var r=this.queryNode({type:"settings"},void 0),i=e?"query,settings,resume":"query,settings";this.binSend("sendEphemeral",r,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var a={settings:[],status:parseInt(this.N.attr("code",e),10)||200};if(__LOG__(2)(n()),"response"===this.N.tag(e)&&"settings"===this.N.attr("type",e)){var r=this.N.children(e);if(Array.isArray(r))for(var i=0;i<r.length;i++){var o=this.parseSetting(r[i]);(0,s.default)(o)||a.settings.push(o)}}t(a)})).catch(a)}),t),onDrop:this.wrap(a),serverCacheable:Boolean(e)},{debugString:i,metricName:"QUERY_SETTINGS"})}))},setArchiveSetting:function(e){return new Promise(((t,a)=>{var r=this.actionNode("set",[["read_later",{move_chats:e.toString()},void 0]]);this.binSend("send",r,a,{clientCacheable:!0,onSend:this.wrap(t),onDrop:this.wrap(a)},{debugString:"action,settings,archive",metrics:"SET_ARCHIVE_SETTING",ackRequest:!0})}))},parseSetting:function(e){switch(this.N.tag(e)){case"read_later":return{type:"Archive",value:{classic:"true"===this.N.attr("move_chats",e),enabled:this.N.attr("enabled",e)&&"true"===this.N.attr("enabled",e)}};default:return}}};t.default=o},94953:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(38739)),s={queryStarredStickers:function(e=1,t=32){return new Promise(((a,r)=>{var s=this.queryNode({type:"starred_stickers",page:e.toString(),count:t.toString()},void 0);this.binSend("sendEphemeral",s,r,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>(0,i.default)(e,this.N,"starred_stickers"))).then(a,r)}),a),onDrop:this.wrap(r)},{debugString:"query,starred_stickers",metricName:"QUERY_STARRED_STICKERS"})}))}};t.default=s},24499:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("starred_stickers"!==t.tag(e))return;var a=t.attr("type",e);if("delete"!==a&&"add"!==a)return;var r=t.attr("filehash",e)||"";if("add"===a){var i={id:r,deprecatedMms3Url:t.attr("url",e)||"",directPath:t.attr("direct_path",e)||"",filehash:r,encFilehash:t.attr("enc_filehash",e),mediaKey:t.attr("media_key",e)||"",width:parseInt(t.attr("width",e)||"0",10),height:parseInt(t.attr("height",e)||"0",10),size:parseInt(t.attr("size",e)||"0",10),mimetype:t.attr("mimetype",e),index:0};return{filehash:r,type:a,sticker:i}}return{filehash:r,type:a}}},41335:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a;if("sticker"!==t.tag(e))return;var r=t.attr("filehash",e);if(!r)return __LOG__(4,void 0,new Error,!0)(n()),void SEND_LOGS("sticker-missing-filehash-from-phone");var i={id:r,deprecatedMms3Url:t.attr("url",e),directPath:t.attr("direct_path",e),mediaKey:t.attr("media_key",e),filehash:r,encFilehash:t.attr("enc_filehash",e),mimetype:t.attr("mimetype",e),width:parseInt(t.attr("width",e),10),height:parseInt(t.attr("height",e),10),size:parseInt(t.attr("size",e),10),weight:parseFloat(null!==(a=t.attr("weight",e))&&void 0!==a?a:1)};(!i.mimetype||Number.isNaN(i.width)||Number.isNaN(i.height)||Number.isNaN(i.size))&&__LOG__(3)(s());return i};var i=r(a(19976));function s(){var e=(0,i.default)(["sticker:parse missing preferred fields: "]);return s=function(){return e},e}function n(){var e=(0,i.default)(["filehash is missing in sticker from phone"]);return n=function(){return e},e}},38739:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){__LOG__(2)(o(),a);var r=t.tag(e);if("response"!==r)throw new Error("node tag for ".concat(a," response is invalid: ").concat(r));var i=t.attr("type",e)||"";if(i!==a)throw new Error("node type for ".concat(a," response is invalid: ").concat(i));var l=parseInt(t.attr("code",e),10)||200;if(200!==l)throw new Error("response status for ".concat(a," is invalid: ").concat(l));var d=t.attr("checksum",e)||"",u=parseInt(t.attr("total",e)||"0",10),c=t.children(e)||[];(0,s.default)(Array.isArray(c),"expects an Array of Stickers");var h=c.map((e=>(0,n.default)(e,t))).filter(Boolean);return{checksum:d,total:u,stickers:h}};var i=r(a(19976)),s=r(a(47677)),n=r(a(41335));function o(){var e=(0,i.default)(["bin-recv: response,",""]);return o=function(){return e},e}},13494:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(70417)),s=r(a(19976)),n=r(a(18120));function o(){var e=(0,s.default)(["bin-recv: response,sticker"]);return o=function(){return e},e}function l(){var e=(0,s.default)(["bin-recv: response,sticker_pack"]);return l=function(){return e},e}var d={queryStickerPacks:function(e=1,t=50){return new Promise(((a,r)=>{var i={type:n.default.isThirdPartyStickersEnabled()?"sticker_pack_v2":"sticker_pack",page:e.toString(),count:t.toString()},s=this.queryNode(i,void 0);this.binSend("sendEphemeral",s,r,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var t={};if(__LOG__(2)(l()),"response"===this.N.tag(e)&&"sticker_pack"===this.N.attr("type",e)){var r=parseInt(this.N.attr("code",e),10)||200;t.status=r,t.data=[],t.checksum=this.N.attr("checksum",e);var i=this.N.attr("count",e);t.count=null==i?null:parseInt(i,10);var s=this.N.children(e);if(Array.isArray(s))for(var n=0;n<s.length;n++){var o=this.parseStickerPack(s[n]);o&&t.data.push(o)}}a(t)})).catch(r)}),a),onDrop:this.wrap(r)},{debugString:"query,sticker_pack",metricName:"QUERY_STICKER_PACKS"})}))},queryStickersInStickerPack:function(e){return this.queryStickers({id:e})},queryStickers:function(e){return new Promise(((t,a)=>{var r=(0,i.default)({type:"sticker"},e),s=this.queryNode(r,void 0);this.binSend("sendEphemeral",s,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var a={};if(__LOG__(2)(o()),"response"===this.N.tag(e)&&"sticker"===this.N.attr("type",e)){var r=parseInt(this.N.attr("code",e),10)||200;a.status=r,a.data=[];var i=this.N.children(e);if(Array.isArray(i))for(var s=0;s<i.length;s++){var n=this.parseSticker(i[s]);n&&a.data.push(n)}}t(a)})).catch(a)}),t),onDrop:this.wrap(a)},{debugString:"query,sticker,".concat(e.id),metricName:"QUERY_STICKERS"})}))},parseSticker:function(e){if("sticker"===this.N.tag(e)){var t={url:this.N.attr("url",e),directPath:this.N.attr("direct_path",e),mediaKey:this.N.attr("media_key",e),filehash:this.N.attr("filehash",e),encFilehash:this.N.attr("enc_filehash",e),mimetype:this.N.attr("mimetype",e),width:parseInt(this.N.attr("width",e)||125,10),height:parseInt(this.N.attr("height",e)||125,10),size:parseInt(this.N.attr("size",e)||0,10)||null};return t.filehash?t:void 0}},parseStickerPack:function(e){if("sticker_pack"===this.N.tag(e)){var t={id:this.N.attr("id",e),name:this.N.attr("name",e),url:this.N.attr("url",e),directPath:this.N.attr("direct_path",e),mediaKey:this.N.attr("media_key",e),filehash:this.N.attr("filehash",e),encFilehash:this.N.attr("enc_filehash",e),mimetype:this.N.attr("mimetype",e)};return t.id?t:void 0}},parseStickerPackUpdate:function(e){if("sticker_pack"===this.N.tag(e)){var t=this.N.attr("type",e);return this.dropIfConditionMet([!t],{type:t})}}};t.default=d},30144:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(19976));function s(){var e=(0,i.default)(["bin-recv: response,video_playback_url"]);return s=function(){return e},e}var n={queryVideoPlaybackUrl:function(e){return new Promise(((t,a)=>{var r=this.queryNode({type:"video",url:e},void 0);this.binSend("sendEphemeral",r,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{__LOG__(2)(s());var a=void 0;if("response"===this.N.tag(e)&&"video"===this.N.attr("type",e)){var r=this.N.attr("url",e);r&&(a={url:r})}t(a)})).catch(a)}),t),onDrop:this.wrap(a)},{debugString:"query,video_playback_url",metricName:"QUERY_URL"})}))}};t.default=n},47668:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(84139),i=a(28703),s=a(35205),n={parseCall:function(e){if("call"===this.N.tag(e)){var t=this.N.child("offer",e);if(t){var a=this.N.child("call",t);if(a){var s=this.N.children(a),n=(0,r.decodeProto)(i.MessageSpec,s).call;if(n){var o=this.N.attr("from",e),l=this.N.attr("call-id",t),d=n.callKey;return this.dropIfConditionMet([!l,!o,!d],{type:"offer_key",id:l,peerJid:o,key:d})}}}}},queryCall:function(e,t){return new Promise(((a,r)=>{var i=this.queryNode({type:"call","call-id":e,kind:t});this.binSend("sendEphemeral",i,r,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var t={status:400};"response"===this.N.tag(e)&&"call"===this.N.attr("type",e)&&(t.status=parseInt(this.N.attr("code",e),10)||400),a(t)})).catch(r)}),a),onDrop:this.wrap(r)},{debugString:"query,call,"+e,metricName:"QUERY_CALL"})}))},handleCallQuery(){var e=a(79504).default.handleQuery({});if(e)return e.then((()=>this.responseNode(void 0,[["some",{formatted:"xml"},void 0]])))},sendCallEnd:function(e,t){return new Promise(((a,r)=>{var i={};i.jid=e.jid,i["call-id"]=e["call-id"],i.result=o(e.result),i.audio=e.audio.toString(),i.out=e.out.toString(),i.seconds=e.seconds.toString(),i.t=e.t.toString(),i.group=e.group.toString();var s=t.map((e=>["participant",{jid:e.jid,result:o(e.result)},void 0])),n=this.actionNode("relay",[["call_end",i,s]]);this.binSend("send",n,r,{onSend:this.wrap(a),onDrop:this.wrap(r)},{debugString:"action,call_end,".concat(e["call-id"])})}))}};function o(e){return s.CALL_LOG_RESULT[e]||"invalid"}t.default=n},86014:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={DEBUG_LOG:1,QUERY_RESUME:2,QUERY_RECEIPT:3,QUERY_MEDIA:4,QUERY_CHAT:5,QUERY_CONTACTS:6,QUERY_MESSAGES:7,PRESENCE:8,PRESENCE_SUBSCRIBE:9,GROUP:10,READ:11,CHAT:12,RECEIVED:13,PIC:14,STATUS:15,MESSAGE:16,QUERY_ACTIONS:17,BLOCK:18,QUERY_GROUP:19,QUERY_PREVIEW:20,QUERY_EMOJI:21,QUERY_MESSAGE_INFO:22,SPAM:23,QUERY_SEARCH:24,QUERY_IDENTITY:25,QUERY_URL:26,PROFILE:27,CONTACT:28,QUERY_VCARD:29,QUERY_STATUS:30,QUERY_STATUS_UPDATE:31,PRIVACY_STATUS:32,QUERY_LIVE_LOCATIONS:33,LIVE_LOCATION:34,QUERY_VNAME:35,QUERY_LABELS:36,CALL:37,QUERY_CALL:38,QUERY_QUICK_REPLIES:39,QUERY_CALL_OFFER:40,QUERY_RESPONSE:41,QUERY_STICKER_PACKS:42,QUERY_STICKERS:43,ADD_OR_REMOVE_LABELS:44,QUERY_NEXT_LABEL_COLOR:45,QUERY_LABEL_PALETTE:46,CREATE_OR_DELETE_LABELS:47,EDIT_LABELS:48,QUERY_RECENT_STICKERS:49,QUERY_NOTICE_STATE:50,QUERY_SETTINGS:51,SET_ARCHIVE_SETTING:51};t.default=a},5361:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.base64DecodeRecursively=function e(t){var a=t[2];Array.isArray(a)&&a.forEach((t=>{t&&(t[2]instanceof ArrayBuffer||"string"==typeof t[2]?t[2]=(0,l.decodeB64ToJsArray)(t[2]):t[2]&&e(t))}))},t.default=void 0;var i=r(a(19976)),s=r(a(13888)),n=a(84139),o=a(68519),l=a(60339),d=r(a(7470)),u=a(28703),c=a(95595),h=r(a(73631)),f=a(31558),p=a(5029);function m(){var e=(0,i.default)(["voip_signaling:enc node not present"]);return m=function(){return e},e}function _(){var e=(0,i.default)(["voip_signaling:invalid serializedMessage"]);return _=function(){return e},e}function v(){var e=(0,i.default)(["voip_signaling:invalid messageProto.call"]);return v=function(){return e},e}function g(){var e=(0,i.default)(["Error parsing voip signaling message"]);return g=function(){return e},e}var E={formatCallOffer:function(e,t,a){var r,i,s=a.payload,n={to:a.common.peer_jid,id:t,from:(0,c.getMaybeMeUser)().toString({legacy:!0})},l=s[2];return l.forEach(((e,t)=>{switch(e[0]){case"enc":var n={call:{callKey:new Uint8Array(e[2])}},l={},d=s[1].retry_count;d&&(l.count=d);var c=["call",l,(0,p.cdataArrayBuffer)((0,o.encodeProto)(u.MessageSpec,n))];r=c,i=t;break;default:(0,p.arrayToB64Recursively)(a.payload,!0)}})),l.splice(i,1),l.push(r),s[2]=l,e.actionNode("relay",[["call",n,[s]]])},parseCallSignalingMsg:function(e){try{var t=d.default.get(e.from),a={peer_jid:e.from.toString({legacy:!0}),isContact:t&&t.isMyContact},r=["wrapper",{},e.data];switch(e.type){case"offer":var i=y("offer",r);a.peer_platform=e.platform,e.version&&e.version.length&&(a.peer_version=e.version.join(".")),this.parseCallOffer(i,a,!1);break;case"accept":var s=y("accept",r);a.type=f.TYPE.ACCEPT,a.call_id=h.default.attr("call-id",s)||"",a.peer_platform=e.platform,e.version&&e.version.length&&(a.peer_version=e.version.join("."));break;case"receipt":var n=e.data;switch(a.call_id=h.default.attr("call-id",n)||"",h.default.tag(n)){case"offer":a.type=f.TYPE.OFFER_RECEIPT;break;case"accept":a.type=f.TYPE.ACCEPT_RECEIPT;break;case"reject":default:return}break;case"terminate":var o=y("terminate",r);a.call_id=h.default.attr("call-id",o)||"",a.type=f.TYPE.TERMINATE;break;default:var l=function(e){var t=h.default.firstChild(e);if(!t)throw new Error("voip_signaling:Failed to get first child node");return t}(r);a.call_id=h.default.attr("call-id",l)}return a&&a.call_id&&this.createCommonHeader(a),a}catch(e){return void __LOG__(3)(g())}},parseCallOffer:function(e,t,a){if(t.type=f.TYPE.OFFER,t.call_id=h.default.attr("call-id",e)||"",a){var r=y("call",e),i=h.default.children(r);if(i instanceof ArrayBuffer){var s=(0,n.decodeProto)(u.MessageSpec,i);s.call&&s.call.callKey?this.receiveCallOfferKey(s.call.callKey,t):__LOG__(3)(v())}else __LOG__(3)(_())}else t.enc=this.parseRawE2EMaterial(e);var o=h.default.children(e,"video");t.video_count=Array.isArray(o)?o.length:void 0,t.isVideoCall=!!t.video_count,t.isGroupCall_DEPRECATED=!!t.group_info;var l=h.default.attr("t",e);l&&(t.t=l)},parseRawE2EMaterial:function(e){var t=h.default.child("enc",e);if(t)return(0,l.decodeB64ToJsArray)(h.default.dataStr(t));__LOG__(3)(m())},receiveCallOfferKey:function(e,t){t&&(t[2]=Array.prototype.slice.call(new Uint8Array(e)))},createCommonHeader(e){e.common=(0,s.default)(e,["type","call_id","peer_jid"])}};function y(e,t){var a=h.default.child(e,t);if(!a)throw new Error("voip_signaling:Failed to get child node ".concat(e));return a}t.default=E},59998:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.queryBusinessProfile=function(e){var t,a=(0,i.getBusinessProfileQueryVersion)();s.default.supportsFeature(s.default.F.MD_BACKEND)?t||(t=Promise.reject(new Error("Should not reach here"))):t=n.default.queryBusinessProfile(e,a);return t};var i=a(69452),s=r(a(18120)),n=r(a(76022))},45618:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.queryBusinessCategories=function(e){var t;if(!i.default.supportsFeature(i.default.F.MD_BACKEND))return s.default.queryBusinessCategories(e);t||(t=Promise.reject(new Error("BusinessCategory MD query not yet implemented")));return t};var i=r(a(18120)),s=r(a(76022))},69452:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.getBusinessProfileQueryVersion=function(){return 87&i.default.webBizProfileOptions};var i=r(a(72424))},78091:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.refreshCart=function(e,t,a,r){var n;i.default.supportsFeature(i.default.F.MD_BACKEND)?n||(n=Promise.reject(new Error("Should not reach here"))):n=s.default.refreshCart(e,t,a,r);return n},t.updateCart=function(){return Promise.resolve()};var i=r(a(18120)),s=r(a(76022))},69227:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.sendConversationArchive=function(e,t,a){var r;i.default.supportsFeature(i.default.F.MD_BACKEND)?r||(r=Promise.reject(new Error("Should not reach here"))):r=s.default.sendConversationArchive(e,t,a);return r};r(a(19976));var i=r(a(18120)),s=r(a(76022))},16059:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.sendClear=function(e,t,a){var r;s.default.supportsFeature(s.default.F.MD_BACKEND)?r||(r=Promise.reject(new Error("md:sendClear: should not reach here"))):r=n.default.sendConversationClear(e.id,t,!a).then((e=>{if(200!==e.status)throw new i.ServerStatusCodeError(e.status);return e}));return r};var i=a(19741),s=r(a(18120)),n=r(a(76022))},15790:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.createLocal=function(){i.default.supportsFeature(i.default.F.MD_BACKEND);return Promise.resolve()};r(a(19976)),r(a(70417));var i=r(a(18120))},60383:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.sendConversationDelete=function(e,t){var a=Promise.resolve({status:400,_duplicate:!1});i.default.supportsFeature(i.default.F.MD_BACKEND)||(a=s.default.sendConversationDelete(e,t));return a};r(a(19976));var i=r(a(18120)),s=r(a(76022))},12392:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.find=function(e,t){var a=performance.now();return s.default.chatFindQuery(e,(e=>{t.binarySize=e.binarySize})).then((function(e){return"preempted"!==e&&(t.timing=Math.ceil(performance.now()-a),t.size=e.length,i.default.supportsFeature(i.default.F.MD_BACKEND)),e}))};r(a(19976)),r(a(70417));var i=r(a(18120)),s=r(a(76022))},63789:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{wid:t}=e;s.default.supportsFeature(s.default.F.MD_BACKEND);return i.default.find(t)};var i=r(a(43334)),s=r(a(18120))},57525:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setLastReceivedKey=function(){return Promise.resolve()}},37821:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.sendConversationMute=function(e,t,a){var r;s.default.supportsFeature(s.default.F.MD_BACKEND)?r||(r=Promise.reject(new Error("Should not reach here"))):r=n.default.sendConversationMute(e,t,a).then((e=>{if(200!==e.status)throw new i.ServerStatusCodeError(e.status);return e}));return r};var i=a(19741),s=r(a(18120)),n=r(a(76022))},50015:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.setPin=function(e,t,a){var r;s.default.supportsFeature(s.default.F.MD_BACKEND)?r||(r=Promise.reject(new Error("Should not reach here"))):r=n.default.sendConversationPin(e,t,a).then((e=>{if(200!==e.status)throw new i.ServerStatusCodeError(e.status);return e}));return r};var i=a(19741),s=r(a(18120)),n=r(a(76022))},54371:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.resyncMessages=function(e){return l.default.resyncMessages(e).then((e=>{if(n.default.supportsFeature(n.default.F.MD_BACKEND)&&(!e.status||e.status<400)){var{data:t}=e,r=[],i=[];return t.forEach((e=>{a(43334).default.get(e.id)?"clear"===e.type?r.push({id:e.id.toString(),t:e.t,unreadCount:e.unreadCount,archive:e.archive,isReadOnly:e.isReadOnly,modifyTag:e.modifyTag,notSpam:e.notSpam,pin:e.pin,changeNumberOldJid:e.changeNumberOldJid,changeNumberNewJid:e.changeNumberNewJid,muteExpiration:e.muteExpiration,ephemeralDuration:e.ephemeralDuration,ephemeralSettingTimestamp:e.ephemeralSettingTimestamp}):"delete"===e.type?i.push(e.id.toString()):r.push((0,s.default)((0,s.default)({},e),{},{id:e.id.toString()})):r.push((0,s.default)((0,s.default)({},e),{},{id:e.id.toString()}))})),(0,o.getStorage)().lock(["chat"],(([e])=>e.bulkCreateOrMerge(r).then((()=>e.bulkRemove(i))))).then((()=>e)).catch((()=>{throw __LOG__(4,!0,new Error,!0)(d()),SEND_LOGS("get storage or bulk update chats failedwhen re-sync messages"),new Error("get storage or bulk update chats failed")}))}return e}))};var i=r(a(19976)),s=r(a(70417)),n=r(a(18120)),o=a(77993),l=r(a(76022));function d(){var e=(0,i.default)(["get storage or bulk update chats failed"]);return d=function(){return e},e}},77902:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.sendConversationSeen=function(e,t,a){var r;s.default.supportsFeature(s.default.F.MD_BACKEND)?r||(r=Promise.reject(new Error("Should not reach here"))):r=n.default.sendConversationSeen(e.id,t,a).then((e=>{var{status:t,_duplicate:a}=e;return 200!==t?Promise.reject(new i.ServerStatusCodeError(t)):{_duplicate:a}}));return r},t.sendConversationUnseen=function(e,t){var a;s.default.supportsFeature(s.default.F.MD_BACKEND)?a||(a=Promise.reject(new Error("Should not reach here"))):a=n.default.sendConversationUnseen(e,t).then((e=>{var{status:t}=e;if(200!==t)return Promise.reject(new i.ServerStatusCodeError(t))}));return a},t.markConversationSeen=function(){s.default.supportsFeature(s.default.F.MD_BACKEND);return Promise.resolve()},t.markConversationUnseen=function(){s.default.supportsFeature(s.default.F.MD_BACKEND);return Promise.resolve()};var i=a(19741),s=r(a(18120)),n=r(a(76022))},55630:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.sendDeleteMsgs=function(e,t,a){var r,o=e.map((e=>e.id));if(s.default.supportsFeature(s.default.F.MD_BACKEND)){if(!r)return Promise.reject(new Error("Not Supported for Non-MD"))}else r=n.default.sendMessageDelete(a,o,t).then((e=>{if(200!==e.status)throw new i.ServerStatusCodeError(e.status)}));return r};r(a(19976));var i=a(19741),s=r(a(18120)),n=r(a(76022))},78475:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.sendStarMsgs=function(e,t,a){var r;s.default.supportsFeature(s.default.F.MD_BACKEND)?r||(r=Promise.reject(new Error("Should not reach here"))):r=n.default.sendMessageStarred(e,t.map((e=>e.id)),a).then((e=>{if(200!==e.status)return Promise.reject(new i.ServerStatusCodeError(e.status))}));return r},t.sendUnstarAll=function(e,t){var a;s.default.supportsFeature(s.default.F.MD_BACKEND)?a||(a=Promise.reject(new Error("Should not reach here"))):a=n.default.sendUnstarAll(t).then((e=>{if(200!==e.status)return Promise.reject(new i.ServerStatusCodeError(e.status))}));return a};var i=a(19741),s=r(a(18120)),n=r(a(76022))},82373:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.updateLocal=function(){i.default.supportsFeature(i.default.F.MD_BACKEND);return Promise.resolve()};r(a(19976));var i=r(a(18120))},82184:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.sendSetBlock=function(e,t){var a;s.default.supportsFeature(s.default.F.MD_BACKEND)?a||(a=Promise.reject(new Error("Should not reach here"))):a=n.default.sendSetBlock(e,[{jid:t}]).then((e=>{if(200!==e.status)throw new i.ServerStatusCodeError(e.status);return!(e._duplicate||200!==e.status)}));return a.then((e=>(e&&s.default.supportsFeature(s.default.F.MD_BACKEND),e)))};r(a(19976));var i=a(19741),s=r(a(18120)),n=r(a(76022))},36655:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.setChecksum=function(e){i.default.supportsFeature(i.default.F.MD_BACKEND)&&(0,s.setContactChecksum)(e);return Promise.resolve()};var i=r(a(18120)),s=a(65291)},95402:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.setFrequent=function(e){var t={};Object.keys(e).forEach((a=>{t[a]=e[a].map((e=>e.toString()))})),i.default.supportsFeature(i.default.F.MD_BACKEND)&&(0,s.setFrequentContacts)(t);return Promise.resolve()};var i=r(a(18120)),s=a(65291)},87354:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.getContactsToRemove=function(e){var t=[],r={};return e.forEach((e=>{e&&(r[e.id]=!0)})),i.default.forEach((e=>{var{id:i}=e;!(e.isUser||e.isGroup&&!a(43334).default.get(i))||r[i.toString()]||e.isPSA||t.push(e)})),t};var i=r(a(7470))},52354:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.sendSpamReport=function(e){var t;s.default.supportsFeature(s.default.F.MD_BACKEND)?t||(t=Promise.reject(new Error("Should not reach here"))):t=n.default.sendSpamReport(e.id).then((e=>{if(200!==e.status)throw new i.ServerStatusCodeError(e.status)}));return t},t.sendNotSpam=function(e){var t;t=s.default.supportsFeature(s.default.F.MD_BACKEND)?Promise.resolve():n.default.sendConversationNotSpam(e.id).then((e=>{if(200!==e.status)throw new i.ServerStatusCodeError(e.status)}));return t.then((()=>(s.default.supportsFeature(s.default.F.MD_BACKEND),Promise.resolve())))};r(a(19976));var i=a(19741),s=r(a(18120)),n=r(a(76022))},51803:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.updateLocal=function(){i.default.supportsFeature(i.default.F.MD_BACKEND);return Promise.resolve()};var i=r(a(18120))},58665:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.sendCreateGroup=function(e,t,a,r,o,l,d=!1){var u;if(s.default.supportsFeature(s.default.F.MD_BACKEND)){if(!u)return Promise.reject(new Error("queryGroupInvite: not supported when not build with MD_BACKEND"))}else u=n.default.createGroup(e,t,a,r,o,l,void 0,d).then((e=>200===e.status?e:Promise.reject(new i.ServerStatusCodeError(e.status))));return u};var i=a(19741),s=r(a(18120)),n=r(a(76022))},14809:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.markExited=function(){s.default.supportsFeature(s.default.F.MD_BACKEND);return Promise.resolve()},t.sendExitGroup=function(e){var t;if(s.default.supportsFeature(s.default.F.MD_BACKEND)){if(!t)return Promise.reject(new Error("sendExitGroup: not supported when not build with MD_BACKEND"))}else t=n.default.leaveGroup(e).then((e=>200!==e.status?Promise.reject(new i.ServerStatusCodeError(e.status)):{_duplicate:e._duplicate}));return t};var i=a(19741),s=r(a(18120)),n=r(a(76022))},21552:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;s.default.supportsFeature(s.default.F.MD_BACKEND)?t||(t=Promise.reject(new Error("Should not reach here"))):t=n.default.commonGroupsFind(e).then((e=>{if(200!==e.status)throw new i.ServerStatusCodeError(e.status);return e.groups}));return t};var i=a(19741),s=r(a(18120)),n=r(a(76022))},29697:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.sendQueryGroupInviteCode=function(e){var t;if(s.default.supportsFeature(s.default.F.MD_BACKEND)){if(!t)return Promise.reject(new Error("queryGroupInvite: not supported when not build with MD_BACKEND"))}else t=n.default.groupInviteCode(e).then((e=>200===e.status?e.code:Promise.reject(new i.ServerStatusCodeError(e.status))));return t},t.sendRevokeGroupInviteCode=function(e){var t;if(s.default.supportsFeature(s.default.F.MD_BACKEND)){if(!t)return Promise.reject(new Error("queryGroupInvite: not supported when not build with MD_BACKEND"))}else t=n.default.revokeGroupInvite(e).then((e=>200===e.status?e.code:Promise.reject(new i.ServerStatusCodeError(e.status))));return t},t.sendJoinGroupViaInvite=function(e){var t;if(s.default.supportsFeature(s.default.F.MD_BACKEND)){if(!t)return Promise.reject(new Error("joinGroupViaInvite: not supported when not build with MD_BACKEND"))}else t=n.default.acceptGroupInvite(e).then((e=>200===e.status?e.gid:Promise.reject(new i.ServerStatusCodeError(e.status))));return t};var i=a(19741),s=r(a(18120)),n=r(a(76022))},88011:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.sendSetGroupSubject=function(e,t){var a;if(n.default.supportsFeature(n.default.F.MD_BACKEND)){if(!a)return Promise.reject(new Error("sendSetGroupSubject: not supported when not build with MD_BACKEND"))}else a=o.default.changeSubject(e,t).then((e=>200!==e.status?Promise.reject(new s.ServerStatusCodeError(e.status)):{_duplicate:e._duplicate}));return a},t.sendSetGroupDescription=function(e,t,a,r){var i;if(n.default.supportsFeature(n.default.F.MD_BACKEND)){if(!i)return Promise.reject(new Error("sendSetGroupDescription: not supported when not build with MD_BACKEND"))}else i=o.default.setGroupDescription(e,t,a,r).then((e=>200!==e.status?Promise.reject(new s.ServerStatusCodeError(e.status)):{_duplicate:e._duplicate}));return i},t.sendSetGroupProperty=function(e,t,a){var r;if(n.default.supportsFeature(n.default.F.MD_BACKEND)){if(!r)return Promise.reject(new Error("sendSetGroupProperty: not supported when not build with MD_BACKEND"))}else r=(r=t===i.default.GROUP_SETTING_TYPE.EPHEMERAL?o.default.setGroupEphemeralDuration(e,a):o.default.setGroupProperty(e,t,Boolean(a))).then((e=>200!==e.status?Promise.reject(new s.ServerStatusCodeError(e.status)):{_duplicate:e._duplicate}));return r};var i=r(a(50935)),s=a(19741),n=r(a(18120)),o=r(a(76022))},90401:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.sendQueryGroup=function(e){var t;if(o.default.supportsFeature(o.default.F.MD_BACKEND)){if(!t)return Promise.reject(new Error("queryGroup: not supported when not build with MD_BACKEND"))}else t=c.default.groupMetadataFind(e);return t.then((t=>{if(t.id)return f(e,t.subject),(0,d.updateParticipants)(t.id,t.participants,t.pvId).then((()=>({id:t.id,owner:t.owner,creation:t.creation,desc:t.desc,descId:t.descId,descOwner:t.descOwner,descTime:t.descTime,restrict:t.restrict||!1,announce:t.announce||!1,noFrequentlyForwarded:t.noFrequentlyForwarded||!1,ephemeralDuration:t.ephemeralDuration||0,participants:t.participants,support:o.default.supportsFeature(o.default.F.SUPPORT)&&!0===t.support})));__LOG__(3)(h())})).catchType(n.ServerStatusCodeError,(t=>{if(t.status>=400)return{id:e,stale:!1}}))},t.sendQueryGroupInvite=function(e){var t;if(o.default.supportsFeature(o.default.F.MD_BACKEND)){if(!t)return Promise.reject(new Error("queryGroup: not supported when not build with MD_BACKEND"))}else t=c.default.groupInviteInfo(e).then((e=>200!==e.status?Promise.reject(new n.ServerStatusCodeError(e.status)):e));return t},t.groupMetadataFindFromPhone=function(e){if(o.default.supportsFeature(o.default.F.MD_BACKEND))return Promise.reject(new Error("groupMetadataFindFromPhone: not supported in MD_BACKEND mode"));return c.default.groupMetadataFindFromPhone(e)},t.updateSubject=f;r(a(70417));var i=r(a(19976)),s=r(a(7470)),n=a(19741),o=r(a(18120)),l=a(11419),d=a(83035),u=a(51803),c=r(a(76022));function h(){var e=(0,i.default)(["Store:GroupMetadata Unexpected server response"]);return h=function(){return e},e}function f(e,t){(0,l.isString)(t)&&s.default.find(e).then((function(e){if(!e.name){var a={name:t};(0,u.updateLocal)(e.id,a).then((()=>{e.set(a)}))}}))}},63504:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a;s.default.supportsFeature(s.default.F.MD_BACKEND)?a||(a=Promise.reject(new Error("Should not reach here"))):a=n.default.addOrRemoveLabels(e,t).then((e=>{if(200!==e.status)return Promise.reject(new i.ServerStatusCodeError(e.status))}));return a};var i=a(19741),s=r(a(18120)),n=r(a(76022))},4526:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.updateLocal=function(){i.default.supportsFeature(i.default.F.MD_BACKEND);return Promise.resolve()};r(a(19976));var i=r(a(18120))},45492:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.getHighestAck=function(){return n.apply(this,arguments)};r(a(19976));var i=r(a(52954)),s=r(a(18120));function n(){return(n=(0,i.default)((function*(){return s.default.supportsFeature(s.default.F.MD_BACKEND),Promise.reject(new Error("getHighestAck: not supported for non MD"))}))).apply(this,arguments)}},44700:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.msgFindQuery=function(e,t,a,r){if(s.default.supportsFeature(s.default.F.MD_BACKEND))return(0,n.msgFindQuery)(e,t).catch((e=>{throw __LOG__(4,!0,new Error,!0)(u()),SEND_LOGS("msgFindQueryMD failed"),e}));return o.default.msgFindQuery(e,t,a,r)},t.msgFindByIds=function(e){if(s.default.supportsFeature(s.default.F.MD_BACKEND))return(0,n.getMsgsByMsgKey)(e).catch((e=>{throw __LOG__(4,!0,new Error,!0)(d()),SEND_LOGS("msgFindByIdsMD failed"),e}));return Promise.resolve([])},t.queryVcard=function(e){if(s.default.supportsFeature(s.default.F.MD_BACKEND))return(0,n.queryVcard)(e).catch((e=>{throw __LOG__(4,!0,new Error,!0)(l()),SEND_LOGS("queryVcardMD failed"),e}));return o.default.queryVcard(e)};var i=r(a(19976)),s=r(a(18120)),n=a(12425),o=r(a(76022));function l(){var e=(0,i.default)(["queryVcard: failed to find vCard in storage"]);return l=function(){return e},e}function d(){var e=(0,i.default)(["msgFindByIds: failed to find msg in storage"]);return d=function(){return e},e}function u(){var e=(0,i.default)(["msgFindQuery: failed to find msg in storage"]);return u=function(){return e},e}},77021:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return i.default.supportsFeature(i.default.F.MD_BACKEND)?Promise.resolve():s.default.sendMessagePlayed(e.id).then((()=>{}))};var i=r(a(18120)),s=r(a(76022))},62885:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.sendQueryMsgInfo=function(e){var t,{id:a}=e;l.default.supportsFeature(l.default.F.MD_BACKEND)?t||(t=Promise.reject(new Error("Should not reach here"))):t=d.default.queryMsgInfo(a).then((e=>e.status>=400?(__LOG__(2)(u(),e.status),Promise.reject(new o.ServerStatusCodeError(e.status))):e));return t.then((t=>(0,i.default)((0,i.default)({},t),{},{id:a,usePlayReceipt:e.type===n.default.MSG_TYPE.PTT||e.isViewOnce})))};var i=r(a(70417)),s=r(a(19976)),n=r(a(50935)),o=a(19741),l=r(a(18120)),d=r(a(76022));function u(){var e=(0,s.default)(["model:MsgInfo:findQuery error ",""]);return u=function(){return e},e}},8541:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.sendMsgRecord=function(e){var t=Promise.resolve();s.default.supportsFeature(s.default.F.MD_BACKEND)||(t=n.default.msgCreateRecord(e).then((e=>200!==e.status?Promise.reject(new i.ServerStatusCodeError(e.status)):e)));return t};var i=a(19741),s=r(a(18120)),n=r(a(76022))},63928:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.queryOrder=function(e,t,a,r){var n;i.default.supportsFeature(i.default.F.MD_BACKEND)?n||(n=Promise.reject(new Error("md:queryOrder: should not reach here"))):n=s.default.queryOrder(e,t,a,r);return n},t.createOrder=function(e,t){var a;i.default.supportsFeature(i.default.F.MD_BACKEND)?a||(a=Promise.reject(new Error("Should not reach here"))):a=s.default.createOrder(e.user,t);return a};var i=r(a(18120)),s=r(a(76022))},8125:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.queryProduct=function(e,t,a,r){var n;if(i.default.supportsFeature(i.default.F.MD_BACKEND))n||(n=Promise.reject(new Error("Should not reach here")));else{var o=e.toString({legacy:!0});n=s.default.queryProduct(o,t,a,r)}return n},t.queryCatalog=function(e,t,a,r,n){var o;if(i.default.supportsFeature(i.default.F.MD_BACKEND))o||(o=Promise.reject(new Error("Should not reach here")));else{var l=e.toString({legacy:!0});o=s.default.queryProductCatalog(l,t,a,r,n)}return o},t.queryProductList=function(e,t,a,r){var i=e.toString({legacy:!0});return s.default.queryProductList(i,t,a,r)},t.reportProduct=function(e,t,a){var r;i.default.supportsFeature(i.default.F.MD_BACKEND)?r||(r=Promise.reject(new Error("Should not reach here"))):r=s.default.reportBusinessCatalogProduct(e,t,a);return r},t.appealProduct=function(e,t){var a;i.default.supportsFeature(i.default.F.MD_BACKEND)?a||(a=Promise.reject(new Error("Should not reach here"))):a=s.default.appealCatalogProduct(e,t);return a},t.createCatalog=function(){var e;i.default.supportsFeature(i.default.F.MD_BACKEND)?e||(e=Promise.reject(new Error("Should not reach here"))):e=s.default.createBusinessCatalog();return e},t.addProduct=function(e,t,a){var r;i.default.supportsFeature(i.default.F.MD_BACKEND)?r||(r=Promise.reject(new Error("Should not reach here"))):r=s.default.addBusinessCatalogProduct(e,t,a).then(l);return r},t.editProduct=function(e,t,a){var r;i.default.supportsFeature(i.default.F.MD_BACKEND)?r||(r=Promise.reject(new Error("Should not reach here"))):r=s.default.editBusinessCatalogProduct(e,t,a).then(l);return r},t.deleteProducts=function(e){var t;i.default.supportsFeature(i.default.F.MD_BACKEND)?t||(t=Promise.reject(new Error("Should not reach here"))):t=s.default.deleteBusinessCatalogProduct(e);return t},t.getPriceFromResponse=o,t.mapProductResponseToModel=l,t.mapMsgToProductModel=function(e){var t;e.businessOwnerJid&&(t=(0,n.createWid)(e.businessOwnerJid));return{catalogWid:t,id:e.productId||"",url:e.url,name:e.title,description:e.description,imageCdnUrl:e.mediaData.renderableUrl,reviewStatus:"",currency:e.currencyCode,priceAmount1000:e.priceAmount1000,retailerId:e.retailerId,productMsgMediaData:e.mediaData,imageCount:null!=e.productImageCount&&0!==e.productImageCount?e.productImageCount:1,fetchedFromServer:!1,t:e.t,isHidden:!1}},t.productVisibilitySet=function(e){var t;i.default.supportsFeature(i.default.F.MD_BACKEND)?t||(t=Promise.reject(new Error("Should not reach here"))):t=s.default.productVisibilitySet(e);return t};var i=r(a(18120)),s=r(a(76022)),n=a(75637);function o(e){var t=null;return null!=e.price&&(i.default.supportsFeature(i.default.F.MD_BACKEND)||(t=10*parseInt(e.price,10))),t}function l(e,t){var a=o(e);return{catalogWid:t,id:e.id,isHidden:e.is_hidden||!1,url:e.url||"",name:e.name,description:e.description||"",additionalImageCdnUrl:e.additional_image_cdn_urls.map((e=>e[1].value)),additionalImageHashes:e.image_hashes_for_whatsapp.slice(1),imageCdnUrl:e.image_cdn_urls[1].value,imageHash:e.image_hashes_for_whatsapp[0],reviewStatus:e.capability_to_review_status.length?e.capability_to_review_status[0].value:"",currency:e.currency,priceAmount1000:a,retailerId:e.retailer_id||"",productMsgMediaData:null,imageCount:e.additional_image_cdn_urls.length+1,fetchedFromServer:!0,t:Date.now()/1e3,old:!1,canAppeal:e.whatsapp_product_can_appeal}}},85619:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.requestDeletePicture=function(e){var t;o.default.supportsFeature(o.default.F.MD_BACKEND)?t||(t=Promise.reject(new Error("Should not reach here"))):t=c.default.deletePicture(e).then((e=>e.status&&200!==e.status?Promise.reject(new n.ServerStatusCodeError(e.status)):e));return t.then((e=>(e._duplicate||o.default.supportsFeature(o.default.F.MD_BACKEND),e)))},t.sendSetPicture=function(e,t,a){var r;o.default.supportsFeature(o.default.F.MD_BACKEND)?r||(r=Promise.reject(new Error("Should not reach here"))):r=c.default.sendSetPicture(e,t,a).then((e=>200!==e.status?Promise.reject(new n.ServerStatusCodeError(e.status)):e));return r.then((t=>p(e).then((e=>(t.token=e,t._duplicate||o.default.supportsFeature(o.default.F.MD_BACKEND),t)))))},t.profilePicFindThumbFromPhone=function(e,t){return c.default.profilePicFindThumbFromPhone(e,t).then((t=>p(e).then((e=>(t.token=e,o.default.supportsFeature(o.default.F.MD_BACKEND),t)))))},t.profilePicFind=function(e){var t;o.default.supportsFeature(o.default.F.MD_BACKEND)?t||(t=Promise.reject(new Error("Should not reach here"))):t=c.default.profilePicFind(e).then((e=>null!=e.status&&200!==e.status?Promise.reject(new n.ServerStatusCodeError(e.status)):e));var a=t=>(0,u.getStorage)().lock(["profile-pic-thumb"],(([a])=>a.get(e.toString()).then((r=>r?a.merge(e.toString(),t):a.create(t))))),r={id:e.toString(),tag:void 0,eurl:void 0,raw:void 0};return(0,l.default)(t,"serverPromise").then((t=>p(e).then((e=>(t.token=e,o.default.supportsFeature(o.default.F.MD_BACKEND)?(r.tag=t.tag,r.eurl=t.eurl,r.raw=null,a(r).then((()=>t))):t))))).catchType(n.ServerStatusCodeError,(e=>{if(!o.default.supportsFeature(o.default.F.MD_BACKEND))throw e;return o.default.supportsFeature(o.default.F.MD_BACKEND)&&404===e.status||!o.default.supportsFeature(o.default.F.MD_BACKEND)&&401===e.status?(r.tag="",r.raw=null):(r.tag=null,r.eurl=null),a(r).then((()=>{throw e}))}))},t.profilePicResync=function(e){o.default.supportsFeature(o.default.F.MD_BACKEND);return c.default.resyncPictures(e).then((e=>Array.isArray(e)?Promise.all(e.map((e=>p(e.id).then((t=>(0,s.default)((0,s.default)({},e),{},{token:t})))))):"number"==typeof e.status&&e.status>=400?(423!==e.status&&429!==e.status&&__LOG__(3)(f(),e.status),Promise.reject(new n.ServerStatusCodeError(e.status))):(__LOG__(3)(h()),Promise.reject(new Error("ProfilePicThumbStore:resyncPictures unknown reply")))))};var i=r(a(19976)),s=r(a(70417)),n=a(19741),o=r(a(18120)),l=r(a(61941)),d=a(8292),u=a(77993),c=r(a(76022));function h(){var e=(0,i.default)(["ProfilePicThumbStore:resyncPictures unknown reply"]);return h=function(){return e},e}function f(){var e=(0,i.default)(["ProfilePicThumbStore:resyncPictures error ",""]);return f=function(){return e},e}function p(e){if(o.default.supportsFeature(o.default.F.MD_BACKEND))return Promise.resolve("");for(var t=String(e),a=new ArrayBuffer(2*t.length),r=new Uint16Array(a),i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return Promise.resolve().then((()=>(0,d.getSecurityToken)(a)))}},90920:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.fetchCtwaContextData=function(e){var t,{phone:a,sourceUrl:r,context:n}=e;if(!a||!r||!n)return Promise.reject(new Error("Invalid params passed to fetchCtwaContextData"));i.default.supportsFeature(i.default.F.MD_BACKEND)?t||(t=Promise.reject(new Error("Should not reach fetchCtwaContextData MD"))):t=s.default.queryCtwaContext(a,n,r);return t};var i=r(a(18120)),s=r(a(76022))},55042:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a="+".concat(e.toString());if(!i.default.supportsFeature(i.default.F.MD_BACKEND))return s.default.queryExist(a).then((e=>200===e.status?{wid:e.jid,biz:e.biz||!1}:null));t||(t=Promise.reject(new Error("Should not reach queryExists MD")));return t};var i=r(a(18120)),s=r(a(76022))},11252:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.sendQueryMediaConn=function(e){return(0,n.default)({delay:({taskDuration:e})=>{var t=1e3*u();return Math.max(t-e,0)},signal:e},(t=>{var a;if(l.default.supportsFeature(l.default.F.MD_BACKEND)){if(!a)return Promise.reject(new Error("sendQueryMediaConn: not supported when not build with MD_BACKEND"))}else a=d.default.queryMediaConnections(e);return a.then((e=>{var{ttl:t,authTTL:a}=e;return null==a?(a=1e3*t,t=3e5):(a*=1e3,t*=1e3),(0,i.default)((0,i.default)({},e),{},{authTTL:a,ttl:t})})).catchType(o.ServerStatusCodeError,(e=>{if(e.status>=500)return t(e);throw e}))}))};var i=r(a(70417)),s=a(26800),n=r(a(93282)),o=a(19741),l=r(a(18120)),d=r(a(76022)),u=(0,s.createTimer)({algo:{type:"fibonacci",first:0,second:1},max:9e5,jitter:.25})},8766:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.queryServerProps=function(){var e;i.default.supportsFeature(i.default.F.MD_BACKEND)?e||(e=Promise.reject(new Error("Should not reach here"))):e=s.default.queryServerProps();return e};var i=r(a(18120)),s=r(a(76022))},40103:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(i.default.supportsFeature(i.default.F.MD_BACKEND))return Promise.reject(new Error("Should not reach here"));return s.default.requestMediaReupload(e).then((({status:e,url:t,mediaKey:a,mediaKeyTimestamp:r,encFilehash:i,directPath:s})=>({isMD:!1,status:e,url:t,mediaKey:a,mediaKeyTimestamp:r,encFilehash:i,directPath:s})))};var i=r(a(18120)),s=r(a(76022))},37513:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){s.default.supportsFeature(s.default.F.MD_BACKEND);return n.default.setArchiveSetting(e).then((e=>{if(e.status&&200!==e.status)throw new i.ServerStatusCodeError(e.status)}))};var i=a(19741),s=r(a(18120)),n=r(a(76022))},6829:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.getStatus=function(e){var t;n.default.supportsFeature(n.default.F.MD_BACKEND)?t||(t=Promise.reject(new Error("getAbout: invalid when build with MD_BACKEND"))):t=o.default.statusFind(e).then((t=>({id:e,status:null!=t.status?t.status:""}))).catchType(s.WebdDrop,(()=>({id:e,stale:!0,status:""})));return t},t.setMyStatus=function(e){var t;n.default.supportsFeature(n.default.F.MD_BACKEND)?t||(t=Promise.reject(new Error("setStatus: invalid when build with MD_BACKEND"))):t=o.default.sendSetStatus(e);return t},t.queryStatusAll=function(){var e=Promise.resolve();n.default.supportsFeature(n.default.F.MD_BACKEND)||(e=o.default.statusQuery());return e},t.queryStatusUpdate=function(e,t,a){var r=Promise.resolve();n.default.supportsFeature(n.default.F.MD_BACKEND)||(r=o.default.statusQuery(e,t,a,"after"));return r},t.sendReadStatus=function(){return l.apply(this,arguments)};var i=r(a(52954)),s=a(19741),n=r(a(18120)),o=r(a(76022));function l(){return(l=(0,i.default)((function*(e,t){var a;if(n.default.supportsFeature(n.default.F.MD_BACKEND)){if(null==a)throw new Error("sendReadStatus: shouldn't reach here (md_backend was disabled)!")}else a=200===(yield o.default.sendStatusSeen(e,t)).status;return a}))).apply(this,arguments)}},75780:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(n.default.supportsFeature(n.default.F.MD_BACKEND)){if(t){var a=i.default.gadd(e);(0,o.updateVerifiedInfo)(a,t.verifiedName)}}else l.default.queryVname(e).catchType(s.WebdDrop,(()=>{}))};var i=r(a(7470)),s=a(19741),n=r(a(18120)),o=a(40690),l=r(a(76022))},65978:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.sendCallOfferBridge=function(e){var t;i.default.supportsFeature(i.default.F.MD_BACKEND)?t||(t=Promise.reject(new Error("Should not reach here"))):t=e.payload[2].find((e=>"enc"===e[0]))?s.default.sendCallOffer(e):s.default.sendGroupCallOffer(e);return t},t.sendCallSignalingMsgBridge=function(e,t){var a;i.default.supportsFeature(i.default.F.MD_BACKEND)?a||(a=Promise.reject(new Error("Should not reach here"))):a=s.default.sendCallSignalingMsg(e,t);return a},t.sendQueryCallBridge=function(e,t){var a;i.default.supportsFeature(i.default.F.MD_BACKEND)?a||(a=Promise.reject(new Error("Should not reach here"))):a=s.default.queryCall(e,t);return a},t.sendCallEndBridge=function(e,t){var a;i.default.supportsFeature(i.default.F.MD_BACKEND)?a||(a=Promise.reject(new Error("Should not reach here"))):a=s.default.sendCallEnd(e,t);return a},t.sendEncRekeyBridge=function(e){var t;i.default.supportsFeature(i.default.F.MD_BACKEND)?t||(t=Promise.reject(new Error("Should not reach here"))):t=s.default.sendCallSignalingMsg(e);return t},t.prepareRetryReceiptBridge=function(e){var t;i.default.supportsFeature(i.default.F.MD_BACKEND)?t||(t=Promise.reject(new Error("Should not reach here"))):t=Promise.resolve(e);return t};var i=r(a(18120)),s=r(a(76022))},46554:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.shift().blocklist.map((e=>({id:e}))),r=a(79148).default;i.default.supportsFeature(i.default.F.MD_BACKEND)||r.set(t)};var i=r(a(18120))},79626:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.shift(),r=a(43334).default,i=a(58885).default;if(Array.isArray(t)){var o=[],j=[],V=[],H=[];t.forEach((function(e){if("c.us"===e.id)j.push(e);else{var t=!!r.get(e.id),a=["delete","clear","ephemeral","archive","unarchive","star","unstar","spam","modify_tag","pin","modify"].includes(e.type);a?t&&a?j.push(e):__LOG__(2)(B(),JSON.stringify(e)):o.push(e)}}));var W=o.findIndex((e=>P.default.isPSA(e.id)));W>-1&&(o[W].name=C.default.t(1854));var K=a(63095).default;return j.forEach((function(e){var t,a=e.type;if("c.us"===(null===(t=e.id)||void 0===t?void 0:t.toString())){switch(r.disableSortListener(),a){case"clear":__LOG__(2)(U(),String(e.before),String(e.kind)),r.forEach((function(t){"number"==typeof e.before?t.deleteMsgsOlderThan(e.before,e.star,e.kind):t.deleteMsgs(e.star,e.kind)}));break;case"delete":__LOG__(2)(G()),r.toArray().forEach((function(e){e.isGroup?e.deleteMsgs(!0):V.push(e)}));break;case"archive":__LOG__(2)(F()),r.forEach((function(e){H.push({id:e.id,archive:!0,pin:void 0})}));break;case"unarchive":__LOG__(2)(x()),r.forEach((function(e){H.push({id:e.id,archive:!1})}));break;case"unstar":__LOG__(2)(k()),K.delete(),r.forEach((function(e){e.unstarAll()}));break;default:__LOG__(3)(L(),JSON.stringify(e))}r.enableSortListener()}else{var s=r.get(e.id);if(!s)return;switch(a){case"ephemeral":if(null!=e.t){var n=s.getLastReceivedNonExpiredMsg(e.t);n&&(0,T.setLastReceivedKey)(s.id,n.id).then((()=>{s.lastReceivedKey=n.id}))}break;case"clear":case"star":case"unstar":if(e.keys){for(var o=e.keys.length,l="star"===a,d=[],c=[],h=[],f=!1,p=0;p<o;p++){var m=void 0,_=void 0,v=void 0,g=void 0,E=void 0,y=e.keys[p];Array.isArray(y)?([m,_,v]=y,g=new M.default({fromMe:_,remote:e.id,id:m,participant:v}),(E=i.get(g))?"clear"===a?E.delete():(E.star=l,h.push(E)):l&&(f=!0)):!(0,u.default)(y)||"star"!==a&&"unstar"!==a||(g=y.id,(E=i.get(y.id))?(E.star=l,h.push(E)):c.push(y)),d.push(g&&g.toString())}"star"!==a&&"unstar"!==a||K.process(l,c,h,f),__LOG__(2)(R(),[a,e.id,d.join(),e.modifyTag].join())}else"clear"===a?("number"==typeof e.before?s.deleteMsgsOlderThan(e.before,e.star,e.kind):s.deleteMsgs(e.star,e.kind),__LOG__(2)(D(),[e.id,e.before,e.modifyTag,e.kind].join())):"unstar"===a&&(s.unstarAll(),__LOG__(2)(w(),e.id));isNaN(e.modifyTag)||H.push({id:e.id,modifyTag:e.modifyTag});break;case"delete":V.push(s),__LOG__(2)(N(),String(e.id));break;case"archive":H.push({id:e.id,archive:!0,pin:void 0});break;case"unarchive":H.push({id:e.id,archive:!1});break;case"spam":H.push({id:e.id,notSpam:e.notSpam});break;case"modify_tag":H.push({id:e.id,modifyTag:e.modifyTag});break;case"pin":H.push({id:e.id,pin:e.pin});break;case"modify":H.push({id:e.id,changeNumberOldJid:e.changeNumberOldJid,changeNumberNewJid:e.changeNumberNewJid})}}})),(v.default.supportsFeature(v.default.F.MD_BACKEND)?(0,b.getStorage)().lock(["chat"],(([e])=>e.bulkCreateOrMerge(o.map((e=>(0,n.default)((0,n.default)({},e),{},{id:e.id.toString()})))).then((()=>Promise.map(H,(t=>{var{id:a}=t,r=(0,s.default)(t,["id"]);e.merge(a.toString(),r)})))).then((()=>e.bulkRemove(V.map((e=>e.id.toString()))))))).catch((()=>{__LOG__(4,void 0,new Error,!0)(O()),SEND_LOGS("ChatHandler: bulk handle error")})):Promise.resolve()).then((()=>{r.add(o,{merge:!0}),H.forEach((e=>{var{id:t}=e,a=(0,s.default)(e,["id"]),i=r.get(t);i&&i.set(a)})),V.forEach((e=>e.delete()))}))}if("leave"===t.cmd)t.gids.forEach((function(e){var t=r.get(e);t&&(0,m.localExitGroup)(t)}));else{if("preempt"===t.cmd){var Y=Promise.resolve();v.default.supportsFeature(v.default.F.MD_BACKEND);var q=(0,g.getBridge)();return Y.then((()=>q.sendAndReceive("chat_collection","add",{things:t.response,options:{merge:!0}}))).then((()=>{h.default.platform!==h.PLATFORMS.IPHONE&&h.default.platform!==h.PLATFORMS.SMBI||((0,d.default)(t.response)?q.fireAndForget("msg_collection","trigger",{name:f.default.COLLECTION_HAS_SYNCED}):setTimeout((()=>{q.fireAndForget("msg_collection","trigger",{name:f.default.COLLECTION_HAS_SYNCED})}),2500)),q.fireAndForget("chat_collection","trigger",{name:f.default.COLLECTION_HAS_SYNCED,args:{count:t.response.length,binarySize:t.binarySize}})}))}if("action"===t.cmd){var z=t.id,Q=t.data;if("create"!==Q[0]&&"introduce"!==Q[0]){if(Q.length<3)return void __LOG__(3)(I(),JSON.stringify(t));var J,X=t.data[0],Z="unknown"===t.data[1]?null:t.data[1];return J=X===y.GROUP_ACTIONS.RESTRICT||X===y.GROUP_ACTIONS.ANNOUNCE||X===y.GROUP_ACTIONS.NO_FORWARD?{action:X,value:t.data[2]}:X===y.GROUP_ACTIONS.EPHEMERAL?{action:X,duration:t.data[2]}:(0,n.default)({action:X},t.data[2]),(0,S.handleGroupActionWap)({chatId:t.id,author:Z},J)}var $=Q[1],ee=Q[2],te=[...(0,l.default)(ee.admins,(e=>({id:e,isAdmin:!0}))),...(0,l.default)(ee.superadmins||[],(e=>({id:e,isAdmin:!0,isSuperAdmin:!0}))),...(0,l.default)(ee.regulars,(e=>({id:e,isAdmin:!1})))];E.default.add({id:z,creation:ee.creation,owner:$,participants:te,stale:!1,desc:ee.desc,descId:ee.descId,descTime:ee.descTime,descOwner:ee.descOwner,restrict:!!ee.restrict,announce:!!ee.announce},{merge:!0}),p.default.add({id:z,name:ee.subject},{merge:!0});var ae=r.get(z);if(!ae)return;var re=ae.msgs.last();if(!re)return;if("gp2"===re.type&&"add"===re.subtype){var ie=(0,_.getMaybeMeUser)();E.default.trigger("group_participant_change_".concat(ie.toString()),z),P.default.equals(re.recipients[0],ie)&&c.default.alertNewMsg(re)}}else __LOG__(3)(A(),JSON.stringify(t))}};var s=i(a(22220)),n=i(a(70417)),o=i(a(19976)),l=i(a(16760)),d=i(a(45455)),u=i(a(29259)),c=i(a(79711)),h=r(a(52737)),f=i(a(50935)),p=i(a(7470)),m=a(71142),_=a(95595),v=i(a(18120)),g=a(11824),E=i(a(99922)),y=a(70185),S=a(69007),C=i(a(17957)),T=a(57525),M=i(a(77865)),b=a(77993),P=i(a(68384));function A(){var e=(0,o.default)(["model:chat: unknown payload: ",""]);return A=function(){return e},e}function I(){var e=(0,o.default)(["model:chat: incorrect length of payload data for action ",""]);return I=function(){return e},e}function O(){var e=(0,o.default)(["Assertion failed!"]);return O=function(){return e},e}function N(){var e=(0,o.default)(["model:Chat:handle deleted chat for ",""]);return N=function(){return e},e}function w(){var e=(0,o.default)(["model:Chat:handle unstarred chat: ",""]);return w=function(){return e},e}function D(){var e=(0,o.default)(["model:Chat:handle cleared chat:",""]);return D=function(){return e},e}function R(){var e=(0,o.default)(["model:Chat:handle:messages:",""]);return R=function(){return e},e}function L(){var e=(0,o.default)(["Model:chat:handle unknown ",""]);return L=function(){return e},e}function k(){var e=(0,o.default)(["Model:chat:handle:unstar:all"]);return k=function(){return e},e}function x(){var e=(0,o.default)(["Model:chat:handle:unarchive:all"]);return x=function(){return e},e}function F(){var e=(0,o.default)(["Model:chat:handle:archive:all"]);return F=function(){return e},e}function G(){var e=(0,o.default)(["Model:chat:handle:delete:all"]);return G=function(){return e},e}function U(){var e=(0,o.default)(["Model:chat:handle:clear:all before:"," kind:",""]);return U=function(){return e},e}function B(){var e=(0,o.default)(["Model:chat:handle received junk chat record: ",""]);return B=function(){return e},e}},96898:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.shift();switch(t.type){case"picture":(0,i.changeProfilePicThumb)(t.jid,t.tag);break;default:(0,r.handle)([t])}return Promise.resolve()};var r=a(42871),i=a(95303)},75001:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.shift();if(Array.isArray(t)){var a=e.shift();!function(e,t){var a=t&&"remove"===t.missing?(0,d.getContactsToRemove)(e):[];(0,u.mungePSAContact)(e),n.default.add(e,{merge:!0}),a.forEach((e=>{e.unset("name"),e.unset("shortName")})),t&&t.checksum&&(n.default.setChecksum(t.checksum),__LOG__(2)(p(),t.checksum));__LOG__(2)(f(),e.map((e=>e.id)).join())}(t,a)}else"preempt"===t.cmd?function(e){(0,u.mungePSAContact)(e.response),n.default.add(e.response,{merge:!0}),e.checksum&&(n.default.setChecksum(e.checksum),__LOG__(2)(h(),e.checksum));n.default.trigger(s.default.COLLECTION_HAS_SYNCED,{count:e.response.length,binarySize:e.binarySize})}(t):"frequent"===t.type?function(e){var t;delete e.type,t=l.default.supportsFeature(l.default.F.MD_BACKEND)?(0,o.setFrequent)(e):Promise.resolve();t.then((()=>{n.default.updateFrequentContacts(e)}))}(t):"sidelist"===t.type?function(e){var{notification:t,action:a,hash:r}=e,i=n.default.resolveWidsFromHash(r);if(!i)return;"business"===t&&"profile"===a&&i.forEach((e=>{var t=n.default.get(e);if(t)t.businessProfile&&t.businessProfile.markStale();else{var a=n.default.getUserCount(),i=n.default.contactHashLength();__LOG__(4,void 0,new Error,!0)(c(),r,a,i),SEND_LOGS("Stale wid in contact hash index")}}))}(t):__LOG__(3)(m(),JSON.stringify(t))};var i=r(a(19976)),s=r(a(50935)),n=r(a(7470)),o=a(95402),l=r(a(18120)),d=a(87354),u=a(84748);function c(){var e=(0,i.default)(["Hash: "," Users: ",", Hashes: ",""]);return c=function(){return e},e}function h(){var e=(0,i.default)(["Store:Contact:handle update checksum ",""]);return h=function(){return e},e}function f(){var e=(0,i.default)(["handle:Contact updated ",""]);return f=function(){return e},e}function p(){var e=(0,i.default)(["handle:Contact update checksum ",""]);return p=function(){return e},e}function m(){var e=(0,i.default)(["handle:Contact unknown: ",""]);return m=function(){return e},e}},9383:(e,t,a)=>{"use strict";var r=a(14859);t.Z=function(e){if(!Array.isArray(e))return __LOG__(4,void 0,new Error,!0)(m()),void SEND_LOGS("ws2:invalid-msg");var t=e.shift();switch(t){case"Blocklist":return void(0,s.default)(e);case"Contact":return void(0,d.default)(e);case"Props":case"ServerProps":return void a(72424).default.handle(e);case"Location":case"LiveLocation":return void a(84383).default.handle(e);case"Chat":return void(0,n.default)(e);case"Msg":return void(0,u.default)(e);case"Stream":return void(0,f.default)(e);case"Conn":return void(0,l.default)(e);case"Cmd":return void(0,o.default)(e);case"Presence":return void(0,h.default)(e);case"MsgInfo":return void(0,c.default)(e);case"BusinessProfile":return void a(89216).default.handle(e);case"GroupMetadata":return void a(99922).default.handle(e);case"Label":return void a(23539).default.handle(e);case"QuickReply":return void a(75537).default.handle(e);case"Call":return void a(79504).default.handle(e);case"Mute":return void a(85059).default.handle(e);case"Status":return void a(76019).default.handle(e);case"StatusV3":return void a(57185).default.handle(e);default:__LOG__(4,void 0,new Error,!0)(p(),t),SEND_LOGS("ws2: Invalid type received")}};var i=r(a(19976)),s=r(a(46554)),n=r(a(79626)),o=r(a(96898)),l=r(a(96985)),d=r(a(75001)),u=r(a(67964)),c=r(a(95501)),h=r(a(24733)),f=r(a(58251));function p(){var e=(0,i.default)(["ws2: Invalid type received: ",""]);return p=function(){return e},e}function m(){var e=(0,i.default)(["ws2: Invalid message, not an array"]);return m=function(){return e},e}},67964:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function([e]){var t=a(58885).default;function r(){return i.apply(this,arguments)}function i(){return(i=(0,n.default)((function*(a,r){var i;i=m.default.isStatusV3(e.broadcast)?new p.default({from:e.from,to:e.broadcast,id:r,selfDir:e.self||"out"}):new p.default({from:e.from,to:a,id:r,participant:e.participant,selfDir:e.self||"out"});var s=t.get(i);s?yield(0,l.updateMsgAck)(s,e.broadcast,{from:e.from,to:a,ack:e.ack,t:e.t}):(__LOG__(2)(v()),t.preAck[i]=e)}))).apply(this,arguments)}if("ack"===e.cmd){var s=[e.to];if(m.default.isBroadcast(e.to)&&e.ack===c.default.ACK.SENT){var C=f.default.get(e.to);C&&Array.prototype.push.apply(s,(0,o.default)(C.participants.toArray(),"id"))}var T=s.map((t=>r(t,e.id)));return Promise.all(T)}if("acks"===e.cmd){var M=e.id.map((t=>r(e.to,t)));return Promise.all(M)}if(e.msg){if(!(e.chat instanceof m.default))return Promise.resolve();var b="update"===e.meta.add;return m.default.isStatusV3(e.chat)&&!a(57185).default.handleUpdate(e.msg,e.meta.checksum,b)?Promise.resolve():(e.msg.recvFresh=!0,e.msg.isNewMsg=!0,t.processMultipleMessages(e.chat,[e.msg],{add:"after",update:b,isHistory:!1}).catch((()=>{})).catch((t=>{__LOG__(4,void 0,new Error,!0)(S(),String(e.msg.id),String(e.chat),t.name,t.message,t.stack),SEND_LOGS("msg_handler: error storing/processing single message")})))}if(e.msgs){var P=e.msgs.length;if(!P)return Promise.resolve();var A=null;if(!(e.chat instanceof m.default))return Promise.resolve();var I=e.meta;I.isHistory=!0,"unread"===I.add&&(I.firstUnreadKey=new p.default({fromMe:I.unreadFromMe,remote:e.chat,id:I.unreadId,participant:I.unreadParticipant}),A=new d.default);for(var O=0;O<P;O++){e.msgs[O].invis=!0}return u.default.platform!==u.PLATFORMS.IPHONE&&u.default.platform!==u.PLATFORMS.SMBI||t.trigger(c.default.COLLECTION_HAS_SYNCED),t.trigger("handle:msg_history",{count:e.msgs.length,binarySize:e.binarySize}),t.processMultipleMessages(e.chat,e.msgs,I,A).catchType(h.LogoutDrop,(()=>{})).catch((t=>{__LOG__(4,void 0,new Error,!0)(y(),P,String(e.chat),t.name,t.message,t.stack),SEND_LOGS("msg_handler: error storing/processing multiple messages")}))}if(e.recent){var N=e.meta,w=e.binarySize;return delete e.recent,delete e.meta,delete e.binarySize,t.trigger(c.default.COLLECTION_HAS_SYNCED,{count:Object.keys(e).length,binarySize:w}),N.isHistory=!0,Promise.map(Object.keys(e),(a=>{var r;try{r=(0,_.createWid)(a)}catch(e){return Promise.resolve()}var i=e[a];i.invis=!0;var s="last"===N.add&&N.resume?new d.default:null;t.processMultipleMessages(r,[i],N,s).catchType(h.LogoutDrop,(()=>{})).catch((()=>{__LOG__(4,void 0,new Error,!0)(E()),SEND_LOGS("msg_handler: error storing recent messages")}))}))}return __LOG__(2)(g()),Promise.resolve()};var s=i(a(19976)),n=i(a(52954)),o=i(a(16760)),l=a(27857),d=i(a(90980)),u=r(a(52737)),c=i(a(50935)),h=a(19741),f=i(a(99922)),p=i(a(77865)),m=i(a(68384)),_=a(75637);function v(){var e=(0,s.default)(["Msg:out of order ack"]);return v=function(){return e},e}function g(){var e=(0,s.default)(["************** Msg else clause. something strange is going on"]);return g=function(){return e},e}function E(){var e=(0,s.default)(["Assertion failed!"]);return E=function(){return e},e}function y(){var e=(0,s.default)(["Msgs count: "," Chat: "," Error: ",", message: ",", stack: ",""]);return y=function(){return e},e}function S(){var e=(0,s.default)(["Msg: "," chat: "," Error: ",", message: ",", stack: ",""]);return S=function(){return e},e}},95501:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.shift(),{from:a,to:r,ack:s,participant:n,t:o}=t;switch(t.cmd){case"ack":i.default.updateInfo(t.id,a,r,s,n,o);break;case"acks":t.id.forEach((e=>{i.default.updateInfo(e,a,r,s,n,o)}))}};var i=r(a(92313))},24733:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.shift();return(0,i.default)(t)};var i=r(a(53603))},58251:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){switch(e[0]){case"asleep":break;case"killsw":s.default.killServiceWorker();break;case"update":case"update_desktop":break;default:__LOG__(3)(n(),e[0])}};var i=r(a(19976)),s=r(a(78135));function n(){var e=(0,i.default)(["Stream:handle unknown cmd ",""]);return n=function(){return e},e}},92436:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AVDeviceStatusCode=t.AVDeviceStatusContext=t.AVDeviceType=void 0;t.AVDeviceType={AudioInput:0,AudioOutput:1,Video:2,NotIdentified:3};t.AVDeviceStatusContext={DeviceSetup:0,DeviceMidstream:1,DeviceSelection:2,DeviceStop:3,DeviceOther:4};t.AVDeviceStatusCode={DeviceSuccess:0,FailureNonDevice:1,VideoDeviceNotFound:2,VideoDeviceUnsupportedCapability:3,VideoDeviceUnusable:4,VideoDeviceInUse:5,VideoDeviceUnauthorized:6,VideoDeviceTimeout:7,VideoDeviceOther:127,AudioCaptureDeviceNotFound:128,AudioPlaybackDeviceNotFound:129,AudioDeviceNotFound:130,AudioCaptureDeviceUnusable:131,AudioPlaybackDeviceUnusable:132,AudioDeviceUnusable:133,AudioCaptureDeviceInUse:134,AudioPlaybackDeviceInUse:135,AudioDeviceInUse:136,AudioCaptureDeviceUnauthorized:137,AudioPlaybackDeviceUnauthorized:138,AudioDeviceUnauthorized:139,AudioCaptureDeviceTimeout:140,AudioPlaybackDeviceTimeout:141,AudioDeviceTimeout:142,AudioCaptureDeviceOther:253,AudioPlaybackDeviceOther:254,AudioDeviceOther:255}},6469:(e,t,a)=>{"use strict";var r=a(14859);t.y=function(e){e.setHandlers("msg_collection",{processMultipleMessages:({chatId:e,msgObjs:t,meta:a,chatMsgsCollection:r})=>n.default.processMultipleMessages(e,t,a,r),trigger({name:e,args:t}){n.default.trigger(e,t)},updateLastReceipt({wid:e,t}){n.default.updateLastReceipt(e,t)}}),e.setHandlers("contact_collection",{updatePushname({contactId:e,pushname:t}){var a=s.default.gadd(e);return a.pushname!==t&&(a.set({pushname:t}),!0)}}),e.setHandlers("chat_collection",{add:({things:e,options:t})=>i.default.add(e,t),trigger({name:e,args:t}){i.default.trigger(e,t)}}),e.setHandlers("status_v3_collection",{handleUpdate:({rawMsg:e,checksum:t,isMsgUpdate:a})=>l.default.handleUpdate(e,t,a)}),e.setHandlers("msg_info_collection",{updateInfo({id:e,from:t,to:a,ack:r,participant:i,t:s}){o.default.updateInfo(e,t,a,r,i,s)}})};var i=r(a(43334)),s=r(a(7470)),n=r(a(58885)),o=r(a(92313)),l=r(a(57185))},1867:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(52954)),s=r(a(70417)),n=r(a(61941)),o=r(a(13818));t.default=class{constructor(e,t){this._concurrency=e,this._groupLimits=t,this._runningTasksByGroup=new Map,this._enqueuedTasksByGroup=new Map}enqueue(e,t){var a,r,n,o=new Promise(((e,t)=>{a=e,r=t}));return this._doEnqueue((0,s.default)((0,s.default)({},t),{},{run:(n=(0,i.default)((function*(){try{var t=yield e();a(t)}catch(e){r(e)}})),function(){return n.apply(this,arguments)})})),this._runTasks(),o}_doEnqueue(e){this._getOrCreatePriorityQueueForGroup(e.group).push(e)}_doDequeue(){return this._getHighestPriorityAmongGroups()}_runTasks(){for(;this._getRunningTasksCount()<this._concurrency;){var e=this._doDequeue();if(null==e)break;this._runTask(e)}}_runTask(e){var t=this;return(0,i.default)((function*(){var{run:a,signal:r,group:i}=e,s=t._getRunningTasksForGroup(i);if(null==r?void 0:r.aborted)setTimeout(t._runTasks.bind(t),0);else{s.add(e);try{yield a()}finally{s.delete(e),t._runTasks()}}}))()}_getHighestPriorityAmongGroups(){var e,t;for(var a of this._enqueuedTasksByGroup.values()){var r=a.peek();r&&(this._isFullOfGroup(r.group)||(!t||t.priority<r.priority)&&(t=a))}return null===(e=t)||void 0===e?void 0:e.pull()}_getRunningTasksCount(){var e=0;for(var t of this._runningTasksByGroup.values())e+=t.size;return e}_getRunningTasksForGroup(e){if(!this._runningTasksByGroup.has(e)){var t=new Set;return this._runningTasksByGroup.set(e,t),t}return(0,n.default)(this._runningTasksByGroup.get(e),"this._runningTasksByGroup.get(group)")}_isFullOfGroup(e){var t=this._runningTasksByGroup.get(e);return null!=t&&t.size>=this._getLimitForGroup(e)}_getOrCreatePriorityQueueForGroup(e){if(!this._enqueuedTasksByGroup.has(e)){var t=new o.default((e=>-e.priority));this._enqueuedTasksByGroup.set(e,t)}return(0,n.default)(this._enqueuedTasksByGroup.get(e),"this._enqueuedTasksByGroup.get(group)")}_getLimitForGroup(e){var t=this._groupLimits[e];return null==t?1/0:t}}},75328:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MMS_URL_MEDIA_TYPE_SEARCH_PARAM=t.IS_MMS_URL_SEARCH_PARAM=void 0;t.IS_MMS_URL_SEARCH_PARAM="__wa-mms";t.MMS_URL_MEDIA_TYPE_SEARCH_PARAM="mms-type"},25995:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpamFlow=void 0;var r=a(28103)({Chat:"chat",Account:"account_info",Group:"group_info",Block:"block_dialog",Dropdown:"overflow_menu"});t.SpamFlow=r},83005:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.trim().normalize("NFKD");if((0,s.numCodepoints)(t)>=i.default.FTS_MIN_CHARS)return!0;if(n.test(t))return!0;if(o.test(t))return!0;return!1};var i=r(a(50935)),s=a(86145),n=/(?!(?:[0-9\xB2\xB3\xB9\xBC-\xBE\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u09F4-\u09F9\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0B72-\u0B77\u0BE6-\u0BF2\u0C66-\u0C6F\u0C78-\u0C7E\u0CE6-\u0CEF\u0D58-\u0D5E\u0D66-\u0D78\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F33\u1040-\u1049\u1090-\u1099\u1369-\u137C\u16EE-\u16F0\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1946-\u194F\u19D0-\u19DA\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\u2070\u2074-\u2079\u2080-\u2089\u2150-\u2182\u2185-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2CFD\u3007\u3021-\u3029\u3038-\u303A\u3192-\u3195\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\uA620-\uA629\uA6E6-\uA6EF\uA830-\uA835\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]|\uD800[\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDEE1-\uDEFB\uDF20-\uDF23\uDF41\uDF4A\uDFD1-\uDFD5]|\uD801[\uDCA0-\uDCA9]|\uD802[\uDC58-\uDC5F\uDC79-\uDC7F\uDCA7-\uDCAF\uDCFB-\uDCFF\uDD16-\uDD1B\uDDBC\uDDBD\uDDC0-\uDDCF\uDDD2-\uDDFF\uDE40-\uDE48\uDE7D\uDE7E\uDE9D-\uDE9F\uDEEB-\uDEEF\uDF58-\uDF5F\uDF78-\uDF7F\uDFA9-\uDFAF]|\uD803[\uDCFA-\uDCFF\uDD30-\uDD39\uDE60-\uDE7E\uDF1D-\uDF26\uDF51-\uDF54\uDFC5-\uDFCB]|\uD804[\uDC52-\uDC6F\uDCF0-\uDCF9\uDD36-\uDD3F\uDDD0-\uDDD9\uDDE1-\uDDF4\uDEF0-\uDEF9]|\uD805[\uDC50-\uDC59\uDCD0-\uDCD9\uDE50-\uDE59\uDEC0-\uDEC9\uDF30-\uDF3B]|\uD806[\uDCE0-\uDCF2\uDD50-\uDD59]|\uD807[\uDC50-\uDC6C\uDD50-\uDD59\uDDA0-\uDDA9\uDFC0-\uDFD4]|\uD809[\uDC00-\uDC6E]|\uD81A[\uDE60-\uDE69\uDF50-\uDF59\uDF5B-\uDF61]|\uD81B[\uDE80-\uDE96]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDFCE-\uDFFF]|\uD838[\uDD40-\uDD49\uDEF0-\uDEF9]|\uD83A[\uDCC7-\uDCCF\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]))(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299\uFE0E\uFE0F]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])/,o=/(?:[\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u3005\u3007\u3021-\u3029\u3038-\u303B\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FD-\u30FF\u31F0-\u31FF\u32D0-\u32FE\u3300-\u3357\u3400-\u4DBF\u4E00-\u9FFC\uF900-\uFA6D\uFA70-\uFAD9\uFF66-\uFF6F\uFF71-\uFF9D]|\uD81B[\uDFF0\uDFF1]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67]|\uD83C\uDE00|[\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD869[\uDC00-\uDEDD\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/},89687:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(19976)),s=a(39329);function n(){var e=(0,i.default)([""," called on unretained OpaqueData"]);return n=function(){return e},e}function o(){var e=(0,i.default)([""," called on released OpaqueData"]);return o=function(){return e},e}function l(){var e=(0,i.default)(["OpaqueData:autorelease too many release calls"]);return l=function(){return e},e}function d(){var e=(0,i.default)(["OpaqueData:autorelease called on released object"]);return d=function(){return e},e}function u(){var e=(0,i.default)(["OpaqueData:retain called on released OpaqueData"]);return u=function(){return e},e}var c=[],h=new s.ShiftTimer((function(){var e=c;c=[];for(var t=0;t<e.length;t++){var a=e[t];a._inAutoreleasePool=!1,0!==a._retainCount||a.released||(a.released=!0,a._releaseImpl())}}));t.default=class{constructor(){this._retainCount=1,this._inAutoreleasePool=!1,this.released=!1}retain(){if(this.released)throw __LOG__(3)(u()),new Error("OpaqueData:retain called on released OpaqueData");this._retainCount++}autorelease(){this.released?__LOG__(3)(d()):0===this._retainCount?__LOG__(3)(l()):1===this._retainCount?(this._retainCount=0,this._inAutoreleasePool||(this._inAutoreleasePool=!0,c.push(this),h.onOrBefore(1e3))):this._retainCount--}autoreleaseWhenPromiseCompletes(e){var t=()=>{this.autorelease()};e.then(t,t)}throwIfReleased(e){if(this.released)throw __LOG__(4,void 0,new Error)(o(),e),new Error("".concat(e," called on released OpaqueData"));0===this._retainCount&&__LOG__(4,void 0,new Error)(n(),e)}_releaseImpl(){throw new Error("OpaqueData:_releaseImpl unimplemented")}}},46194:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.cleanFilename=n,t.cleanIncomingFilename=function(e){if(!e)return e;var t=n(e);if(e!==t&&t){var a=t.split("."),r=a.length>=2&&a.pop();["bat","exe","cmd","com","lnk","pif","scr","vb","vbe","vbs","wsh","js","ps1","hta","sh","csh","msi","app","scpt","applescript","reg","vbe","wsf","sct"].includes(r)&&__LOG__(2,!0)(s(),r||"")}return t};var i=r(a(19976));function s(){var e=(0,i.default)(["cleanIncomingFilename:extension: ",""]);return s=function(){return e},e}function n(e){if(!e)return e;var t=e.replace(/[\u202a-\u202e\u2066-\u2069\u200E\u200F\u061C]/g,"�"),a=t.split(".");if(1===a.length)return t;for(var r=a.length-1;r>0;r--){var i=a[r].trim();if(i.length)return a.slice(0,r).join(".")+"."+i}return t}},82982:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.getImageWidthHeight=function(e){return q((t=>{var a;return t(e),new Promise(((t,r)=>{(a=new Image).onload=t,a.onabort=()=>{r(new Error("getImageWidthHeight onabort"))},a.onerror=()=>{r(new Error("getImageWidthHeight onerror"))},a.src=e.url()})).then((()=>({width:a.naturalWidth,height:a.naturalHeight})))}))},t.getImageWidthHeightNoOpaque=G,t.opaqueDataToArrayBuffer=function(e){return q((t=>{t(e);var a=e._blob;if(a)return U(a);var r=e._b64;return(0,d.decodeB64)(r)}))},t.decodeWebpToRGBANoOpaque=B,t.parseWebpNoOpaque=j,t.videoWidthHeightDuration=function(e){return q((t=>(t(e),C.videoWidthHeightDuration(e.forceToBlob()))))},t.videoWidthHeightDurationNoOpaque=V,t.processRawImage=function(e){var t=e.forceToBlob();return y.rotateAndResize(t,I.default.imageMaxEdge,y.BLOB|y.CANVAS).then((({width:e,height:t,images:{blob:a,canvas:r}})=>y.rotateAndResize(r,h.default.IMG_THUMB_MAX_EDGE,y.DATA_URL|y.CANVAS).then((({images:{canvas:r}})=>{var i=y.getResizedDataUrl(r,"image/jpeg",2e4),s=i?O.default.parseDataURL(i).data:null;return s||__LOG__(2)(x()),{blob:a,width:e,height:t,preview:s}}))))},t.processRawAudioVideo=function(e,t,a,r,i){var s=e.forceToBlob();return(0,S.checkAndRepair)(s,!!r).then((e=>{if(!e)return __LOG__(3)(k(),s.type),Promise.reject(new _.InvalidMediaFileType);var o=e.type,l=e.file,d=r||e.isGif;switch((0,v.typeFromMimetype)(o)){case v.FILETYPE.VIDEO:if(t)return __LOG__(4,void 0,new Error,!0)(L()),SEND_LOGS("media-fault: ptt became video"),Promise.reject(new _.InvalidMediaFileType);var u={type:M.OUTWARD_TYPES.VIDEO,mediaBlob:l,mimetype:o,isGif:d,gifAttribution:d?i||0:void 0};return a&&null!=a.duration&&null!=a.fullHeight&&0!==a.fullHeight&&null!=a.fullWidth&&0!==a.fullWidth&&a.preview?Promise.resolve((0,n.default)((0,n.default)({},u),{},{fullWidth:a.fullWidth,fullHeight:a.fullHeight,preview:a.preview,duration:a.duration.toString()})):y.generateVideoThumbAndDuration(l,h.default.IMG_THUMB_MAX_EDGE).then((({thumb:e,duration:t})=>(0,n.default)((0,n.default)({},u),{},{fullWidth:e.fullWidth,fullHeight:e.fullHeight,preview:O.default.parseDataURL(e.url).data,duration:t.toString()})));case v.FILETYPE.AUDIO:return(a&&null!=a.duration?Promise.resolve(a.duration):(0,v.getAudioDuration)(l)).then((e=>({type:t?M.OUTWARD_TYPES.PTT:M.OUTWARD_TYPES.AUDIO,mediaBlob:l,mimetype:o,duration:e.toString()})));default:throw __LOG__(4,void 0,new Error,!0)(R()),SEND_LOGS("media-fault: audio/video became other"),new Error("audio/video became ".concat(o))}}))},t.getRawDocumentMimetype=W,t.processRawDocument=function(){return Y.apply(this,arguments)},t.fetchMedia=function(e){return(0,E.default)(e,"GET",null,w.default.RESP_TYPE.ARRAY_BUFFER).then((e=>e?Promise.resolve({result:e.response,status:e.status}):Promise.resolve(null)))},t.canPlayOgg=function(){return!!C.canPlayOgg},t.gatherAndSetMetadata=function(){return z.apply(this,arguments)},t.gatherAndSetMetadataNoOpaque=function(e,t){return Promise.resolve().then((()=>{switch(e.type){case M.TYPE.VIDEO:return V(t).then((e=>({fullWidth:e.width,fullHeight:e.height,duration:void 0!==e.duration?"".concat(Math.ceil(e.duration)):void 0,durationFloat:e.duration})));case M.TYPE.IMAGE:return null!=e.contentInfo.fullHeight&&null!=e.contentInfo.fullWidth&&e.size===t.size?null:G(t).then((e=>({fullWidth:e.width,fullHeight:e.height,size:t.size})));case M.TYPE.STICKER:return(0,p.default)().then((e=>e?Promise.props({widthHeight:G(t),webpData:j(t)}).then((e=>({fullWidth:e.widthHeight.width,fullHeight:e.widthHeight.height,animationDuration:e.webpData.animationDuration,firstFrameLength:e.webpData.firstFrameLength,singleLoopDuration:e.webpData.singleLoopDuration,emojis:e.webpData.emojis,isAnimated:e.webpData.animationDuration>0,size:t.size}))):j(t).then((({animationDuration:e,firstFrameLength:a,singleLoopDuration:r,emojis:i})=>e>0?{animationDuration:e,firstFrameLength:a,singleLoopDuration:r,emojis:i,isAnimated:!0,size:t.size}:B(t).then((a=>({animationDuration:e,rgbaBuffer:a.rgbaBuffer,rgbaWidth:a.width,rgbaHeight:a.height,size:t.size})))))));case M.TYPE.AUDIO:default:return{}}})).catchType(_.MediaUnsupportedError,(t=>{throw e.consolidate({}),t})).then((t=>{null!=t&&e.consolidate(t)}))},t.shouldUseMediaCache=function(e){return e===T.default.STICKER||e===T.default.IMAGE||e===T.default.PRODUCT||e===T.default.PTT||e===T.default.AUDIO},t.shouldUseLruMediaStore=function(e){var t=e===T.default.STICKER||e===T.default.IMAGE,a=e===T.default.AUDIO||e===T.default.DOCUMENT||e===T.default.GIF||e===T.default.PPIC||e===T.default.PRODUCT||e===T.default.PTT||e===T.default.VIDEO||e===T.default.TEMPLATE||e===T.default.THUMBNAIL_DOCUMENT||e===T.default.THUMBNAIL_IMAGE;return(t||a)&&(0,g.getRememberMe)()},t.getResizedThumbData=function(e,t,a,r,i){return new Promise((s=>{var n=new Image;n.setAttribute("crossorigin","anonymous"),n.onload=()=>{var e,o,l=document.createElement("canvas"),d=l.getContext("2d"),u=0,c=0;if(l.width=t,l.height=a,n.height>n.width){var h=n.height/n.width;e=t,c=-((o=h*t)-a)/2}else{var f=n.width/n.height;o=a,u=-((e=f*a)-t)/2}d.drawImage(n,u,c,e,o),s(l.toDataURL(r,i))},n.src=e}))};var s=i(a(52954)),n=i(a(70417)),o=i(a(19976)),l=a(73559),d=a(60339),u=i(a(5025)),c=a(46194),h=i(a(50935)),f=i(a(36334)),p=i(a(36455)),m=r(a(78711)),_=r(a(96452)),v=a(99888),g=a(95595),E=i(a(37448)),y=r(a(44202)),S=a(91063),C=r(a(23765)),T=i(a(81135)),M=a(96645),b=a(41501),P=i(a(25012)),A=i(a(38579)),I=i(a(72424)),O=i(a(74185)),N=a(84990),w=i(a(69835));function D(){var e=(0,o.default)(["object type: ",""]);return D=function(){return e},e}function R(){var e=(0,o.default)(["Assertion failed!"]);return R=function(){return e},e}function L(){var e=(0,o.default)(["Assertion failed!"]);return L=function(){return e},e}function k(){var e=(0,o.default)(["processRawAudioVideo bad video file ",""]);return k=function(){return e},e}function x(){var e=(0,o.default)(["processRawImage: Failed to reach max thumbnail size, preview will be null"]);return x=function(){return e},e}function F(){var e=(0,o.default)(["MediaUtils error: ",""]);return F=function(){return e},e}function G(e){return new Promise(((t,a)=>{var r=new Image,i=window.URL.createObjectURL(e);r.onload=()=>{var e={width:r.naturalWidth,height:r.naturalHeight};window.URL.revokeObjectURL(i),t(e)},r.onabort=()=>{window.URL.revokeObjectURL(i),a(new Error("getImageWidthHeight onabort"))},r.onerror=()=>{window.URL.revokeObjectURL(i),a(new Error("getImageWidthHeight onerror"))},r.src=i}))}function U(e){return(0,v.blobToArrayBuffer)(e).catch((e=>{throw __LOG__(3)(F(),e),e}))}function B(e){return U(e).then((e=>(0,f.default)(e)))}function j(e){return U(e).then(A.default)}function V(e){return C.videoWidthHeightDuration(e)}function H(e,t){return q((a=>(a(e),C.transcode(e.forceToBlob(),t).then((e=>P.default.createFromData(e,e.type))).then((e=>(a(e),e.autorelease(),e))))))}function W(){return K.apply(this,arguments)}function K(){return(K=(0,s.default)((function*(e,t){var a=e.type;if(a){if("*"===b.DOC_MIMES||b.DOC_MIMES.includes(a))return a;throw new _.InvalidMediaFileType("disallowed mimetype ".concat(a))}var r=yield U(e),i=(0,u.default)(new Uint8Array(r,0,Math.min(262,r.byteLength)));if(i&&i.mime){var s=(0,b.isAllowedDocumentMimetype)(i.mime,t,!0);if(s)return s}else if(t){var n=(0,v.getMimeTypeForFilepath)(t);if(n)return n}throw new _.InvalidMediaFileType("type: ".concat(String(e.type)," name: ").concat(String(t)))}))).apply(this,arguments)}function Y(){return(Y=(0,s.default)((function*(e,t,a,r){var i,s,n=e.forceToBlob(),o=(0,c.cleanFilename)(n.name||t||null),l=yield W(n,o),d=a?(0,v.blobToText)(n):null,[u,h]=yield Promise.all([m.enrich(n,l),d]),f=null!==(i=null==u||null===(s=u.microThumbnail)||void 0===s?void 0:s.dataUrl)&&void 0!==i?i:null==u?void 0:u.thumbUrl,p=f?O.default.parseDataURL(f).data:null;return{type:M.OUTWARD_TYPES.DOCUMENT,mediaBlob:yield P.default.createFromData(n,l),mimetype:l,filename:o||void 0,documentPreview:u,preview:p,fullPreviewData:null==u?void 0:u.fullPreviewData,fullPreviewSize:u?{width:u.width,height:u.height}:null,pageCount:null!=r?r:null==u?void 0:u.pdfPages,isVcardOverMmsDocument:a,parsedVcards:h?(0,N.parseMultiVcard)(h):null}}))).apply(this,arguments)}function q(e){var t=[];return(0,l.callSyncPromise)(e,null,(function(e){e.retain(),t.push(e)})).finally((()=>{for(var e=0;e<t.length;e++)t[e].autorelease()}))}function z(){return(z=(0,s.default)((function*(e,t){var a,r;t.retain();try{switch(e.type){case M.TYPE.VIDEO:var i=t.forceToBlob(),{thumb:s,duration:n}=yield y.generateVideoThumbAndDuration(i,h.default.VIDEO_THUMB_MAX_EDGE),o=yield P.default.createFromBase64Jpeg(O.default.parseDataURL(s.url).data);a={mediaBlob:t,renderableUrl:t.url(),fullWidth:s.fullWidth,fullHeight:s.fullHeight,duration:void 0!==n?"".concat(Math.ceil(n)):void 0,durationFloat:n,fullPreviewData:o};break;case M.TYPE.AUDIO:var l=yield H(t);l.retain(),a={mediaBlob:l,renderableUrl:l.url()},r=()=>l.autorelease();break;default:e.type!==M.TYPE.IMAGE&&e.type!==M.TYPE.STICKER||(__LOG__(4,void 0,new Error,!0)(D(),e.type||""),SEND_LOGS("Entering gatherAndSetMetadata (with OpaqueData) unexpectedly")),a={mediaBlob:t,renderableUrl:t.url()}}e.consolidate(a)}catch(a){if(!(a instanceof _.MediaUnsupportedError))throw a;e.consolidate({mediaBlob:t,renderableUrl:t.url()})}finally{t.autorelease(),null!=r&&r()}}))).apply(this,arguments)}},25012:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(60339),s=r(a(89687)),n=a(99888);class o extends s.default{constructor(...e){super(...e),this._b64=void 0,this._blob=void 0,this._url=void 0,this._mimetype=void 0,this._released=void 0}url(){return this.throwIfReleased("OpaqueData:url"),this._url?this._url:this._b64?this._url="data:image/jpeg;base64,".concat(this._b64):this._url=window.URL.createObjectURL(this._blob)}getBase64(){return this._b64}filepath(){throw new Error("OpaqueData:filepath can not be implemented on web")}wavFilepath(){throw new Error("OpaqueData:wavFilepath can not be implemented on web")}setWavFilepath(){throw new Error("OpaqueData:setWavFilepath can not be implemented on web")}validate(){return this._released?Promise.resolve(!1):this._blob?(0,n.validateBlob)(this._blob):Promise.resolve(!0)}size(){return this.throwIfReleased("OpaqueData:size"),this._blob?this._blob.size:(0,i.sizeWhenB64Decoded)(this._b64)}formData(){return this.throwIfReleased("OpaqueData:formData"),this.forceToBlob()}type(){return this.throwIfReleased("OpaqueData:type"),this._mimetype||"undefined"}forceToBlob(){this.throwIfReleased("OpaqueData:forceToBlob");var e=this._blob;if(e)return e;var t=this._b64;if(t){this._b64=void 0,this._url=void 0;var a=this._mimetype;return this._blob=new Blob([(0,i.decodeB64)(t)],a?{type:a}:void 0)}throw new Error("OpaqueData:forceToBlob no b64 or blob")}_releaseImpl(){this._mimetype=void 0,this._blob?(this._blob=void 0,this._url&&(window.URL.revokeObjectURL(this._url),this._url=void 0)):(this._b64=void 0,this._url=void 0)}isBlobEqual(e){return e?this._blob===e._blob:!this._blob}}t.default=o,o.createFromBase64Jpeg=e=>new Promise((t=>{var a=new o;return a._b64=e,a._mimetype="image/jpeg",t(a)})),o.createFromData=(e,t)=>new Promise((a=>{var r=new o;return r._blob=e instanceof Blob&&e.type===t?e:new Blob([e],{type:t}),r._mimetype=t,a(r)}))},52741:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(54146)),o=a(96645),l=r(a(40207));class d extends s.Component{constructor(e){super(e),this.refreshBlob=()=>{var e=this.blob;if(!e)throw new Error("Cannot call refreshBlob when the blob does not exist.");var t=new Blob([e],{type:e.type}),a=window.URL.createObjectURL(t);this.state.url&&window.URL.revokeObjectURL(this.state.url),this.setState({url:a})};var t=e.mediaData.filehash,a=n.default.has(t);!a&&e.mediaData.mediaStage===o.MEDIA_DATA_STAGE.RESOLVED&&e.downloadMedia&&e.downloadMedia();var r=a?this.createURL(t):null;this.state={url:r}}componentDidUpdate(){var e=this.props.mediaData.filehash;n.default.has(e)&&!this.state.url&&this.setState({url:this.createURL(e)})}componentWillUnmount(){this.state.url&&this.revokeURL(this.state.url)}createURL(e){var t=n.default.get(e);if(!t)throw new Error("Cannot call createURL when the blob does not exist.");this.blob=t;var a=new Blob([t],{type:t.type});return window.URL.createObjectURL(a)}revokeURL(e){window.URL.revokeObjectURL(e)}render(){return this.state.url?this.props.children(this.state.url):this.props.placeholderRenderer()}}d.CONCERNS={mediaData:["filehash","mediaStage"]};var u=(0,l.default)(d,d.CONCERNS);t.default=class extends u{constructor(...e){super(...e),this.refreshBlob=()=>{this.getComponent().refreshBlob()}}}},54146:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(26823)),s=a(53882),n=a(96645),o=r(a(40210));class l{constructor(e){this.itemCount=e.itemCount,this.purgesSoFar=e.purgesSoFar,this.sizeLimit=e.sizeLimit,this.startTime=null!=e.startTime?e.startTime:window.performance.now()}increaseItemCount(){this.itemCount++}decreaseItemCount(){this.itemCount--}increasePurgesSoFar(){this.purgesSoFar++}commitMetric(){new o.default.WebcMediaBlobCachePurge({mediaBlobCacheItemCount:this.itemCount,mediaBlobCachePurgesSoFar:this.purgesSoFar,mediaBlobCacheSizeLimit:this.sizeLimit,mediaBlobCacheUptimeT:Math.round(window.performance.now()-this.startTime)}).commit()}reset(){this.itemCount=0,this.purgesSoFar=0,this.startTime=window.performance.now()}}var d=new class{constructor(e=25e7){if(this.getOrCreateURL=e=>{if(this._filehashToUrl[e])return this.touch(e),this._filehashToUrl[e];var t=this.get(e);if(!t)throw new Error("There is no blob matching filehash: ".concat(e,"."));var a=window.URL.createObjectURL(t);return this._filehashToUrl[e]=a,a},this.revokeURL=(e,t)=>{if(t){if(this._filehashToUrl[e]!==t)throw new Error("The url provided does not match the filehash.");delete this._filehashToUrl[e],window.URL.revokeObjectURL(t)}},null!=e&&e<0)throw new Error("Size limit cannot be a negative number.");this._metricHelper=new l({itemCount:0,purgesSoFar:0,sizeLimit:e,startTime:null}),this._usageCounts={},this._filehashToUrl={},this._lruCache=new i.default({sizeLimit:e,getSize:e=>e.size,onEvict:e=>{this._filehashToUrl[e]&&0===this._getUsageCount(e)&&(this.revokeURL(e,this._filehashToUrl[e]),(0,s.getOrCreateMediaObject)(e).consolidate({downloadStage:n.DOWNLOAD_STAGE.INIT})),this._metricHelper.increasePurgesSoFar(),this._metricHelper.commitMetric()},onAdd:()=>{this._metricHelper.increaseItemCount()},shouldEvict:e=>0===this._getUsageCount(e),onDelete:()=>{this._metricHelper.decreaseItemCount()},onClear:()=>{this._metricHelper.reset()}})}get(e){return this._lruCache.get(e)}has(e){return this._lruCache.has(e)}touch(e){this.get(e)}put(e,t){this._lruCache.put(e,t)}clear(){this._usageCounts={},Object.keys(this._filehashToUrl).forEach((e=>{this._filehashToUrl[e]&&this.revokeURL(e,this._filehashToUrl[e])})),this._filehashToUrl={},this._lruCache.clear()}increaseUsageCount(e){this._usageCounts[e]=this._getUsageCount(e)+1}decreaseUsageCount(e){var t=this._getUsageCount(e);if(t<=0)throw new Error("Cannot decrease the usageCount to a negative number.");this._usageCounts[e]=t-1,0===this._usageCounts[e]&&delete this._usageCounts[e]}_getUsageCount(e){return this._usageCounts[e]||0}};t.default=d},94011:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(54146)),o=a(96645),l=r(a(40207));class d extends s.Component{constructor(e){super(e),this.state={blob:n.default.get(this.props.mediaData.filehash)},this.state.blob||e.mediaData.mediaStage!==o.MEDIA_DATA_STAGE.RESOLVED||e.downloadMedia()}componentDidUpdate(){if(!this.state.blob){var{filehash:e}=this.props.mediaData;n.default.has(e)&&this.setState({blob:n.default.get(e)})}}render(){var{blob:e}=this.state;return e?this.props.render(e):this.props.renderPlaceholder()}}d.CONCERNS={mediaData:["filehash","mediaStage"]};var u=(0,l.default)(d,d.CONCERNS);t.default=u},19125:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(19976)),n=r(a(2784)),o=a(64724),l=i(a(54146)),d=a(96645),u=i(a(94883)),c=i(a(40207));function h(){var e=(0,s.default)(["Blob missing for trimmed-filehash: "," with progressive stage: "," and mediaStage: ",""]);return h=function(){return e},e}class f extends n.Component{constructor(...e){super(...e),this.state={}}static getDerivedStateFromProps(e,t){var{renderProgressively:a}=e,{filehash:r,progressiveStage:i}=e.mediaData,s=t.stackedUrls||[],n=null!=i?(0,o.getProgressiveMediaCacheKey)(r,i):null;if(null!=n&&a){if(!e.renderProgressively)return null;if(n!==t.progressiveKey&&e.mediaData.mediaStage!==d.MEDIA_DATA_STAGE.RESOLVED){if(!l.default.has(n))return __LOG__(4,void 0,new Error,!0)(h(),r.slice(0,10),i,e.mediaData.mediaStage),SEND_LOGS("missing-progressive-blob"),null;t.url&&t.progressiveKey&&l.default.decreaseUsageCount(t.progressiveKey),l.default.increaseUsageCount(n);var u=l.default.getOrCreateURL(n);return{filehash:r,url:u,progressiveKey:n,stackedUrls:[...s,u]}}if(l.default.has(r)){var c=l.default.getOrCreateURL(r);return t.url===c?null:(l.default.increaseUsageCount(r),t.progressiveKey&&l.default.decreaseUsageCount(t.progressiveKey),{filehash:r,url:c,progressiveKey:n,stackedUrls:[...s,c]})}return null}if(r!==t.filehash){if(e.downloadMedia&&e.downloadMedia(),t.url&&t.filehash&&l.default.decreaseUsageCount(t.filehash),l.default.has(r)){var f=l.default.getOrCreateURL(r);return t.url===f?null:(l.default.increaseUsageCount(r),t.progressiveKey&&l.default.decreaseUsageCount(t.progressiveKey),{filehash:r,url:f,progressiveKey:n,stackedUrls:[...s,f]})}return{filehash:r}}if(l.default.has(r)){var p=l.default.getOrCreateURL(r);return t.url===p?null:(l.default.increaseUsageCount(r),t.progressiveKey&&l.default.decreaseUsageCount(t.progressiveKey),{filehash:r,url:p,progressiveKey:n,stackedUrls:[...s,p]})}return null}componentWillUnmount(){this.state.url&&(this.props.mediaData.mediaStage===d.MEDIA_DATA_STAGE.RESOLVED?l.default.decreaseUsageCount(this.state.filehash):this.state.progressiveKey&&l.default.decreaseUsageCount(this.state.progressiveKey))}render(){var{url:e,stackedUrls:t}=this.state,{renderProgressively:a}=this.props;return e?a?n.createElement("div",{className:u.default.container},n.createElement("div",{className:u.default.child},this.props.placeholderRenderer()),t.map((e=>n.createElement("div",{className:u.default.child,key:e},this.props.children(e))))):this.props.children(e):this.props.placeholderRenderer()}}f.CONCERNS={mediaData:["filehash","mediaStage","progressiveStage"]};var p=(0,c.default)(f,f.CONCERNS);t.default=p},60221:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cleanJPEG=function(e){var t,a=new r.Binary(e),j=new r.Binary(e),V=new r.Binary,H=!1,W=!1,K=!1,Y=!1,q={version:257,densityUnits:0,xDensity:1,yDensity:1};if(255!==a.readUint8()||a.readUint8()!==g)throw new Error("SOI marker not at the start of the file.");j.advance(2);var z=void 0;for(;null!=z||a.size();){if(void 0===z){var Q=a.readUint8();if(255!==Q)throw new Error("0x".concat(Q.toString(16)," is not a marker prefix."));z=a.readUint8()}switch(z){case T:if(W)t=a.readUint16(),j.advance(t+2),a.advance(a.size()-j.size());else{if(t=a.readUint16(),"JFIF\0"!==a.readString(5))throw new Error("APP0 marker missing 'JFIF' magic bytes.");Y=!0,q.version=a.readUint16(),q.densityUnits=a.readUint8(),q.xDensity=a.readUint16(),q.yDensity=a.readUint16(),j.advance(t+2),a.advance(a.size()-j.size()),W=!0}break;case y:if(!K&&!Y)throw new Error("Missing magic bytes marker.");a.advance(a.readUint16()-2);for(var J=void 0,X=a.readUint8();a.size();){if(J=a.readUint8(),255===X&&!B.includes(J)){z=J;break}X=J}V.writeByteArray(j.readByteArray(j.size()-a.size()-2));continue;case M:if(t=a.readUint16(),!K&&"Exif\0\0"!==a.readString(6))throw new Error("APP1 marker missing 'EXIF' magic bytes.");K=!0,j.advance(t+2),a.advance(a.size()-j.size());break;case x:case U:if(!K&&!Y)throw new Error("Missing magic bytes marker.");t=a.readUint16(),j.advance(t+2),a.advance(a.size()-j.size());break;case E:if(!K&&!Y)throw new Error("Missing magic bytes marker.");H=!0,V.writeByteArray(j.readByteArray(2));break;case i:case s:case n:case o:case d:case u:case c:case h:case f:case p:case m:case _:case v:case S:case l:case C:if(!K&&!Y)throw new Error("Missing magic bytes marker.");t=a.readUint16(),V.writeByteArray(j.readByteArray(2+t)),a.advance(a.size()-j.size());break;case b:case P:case A:case I:case O:case N:case w:case D:case R:case L:case k:case F:case G:throw new Error("Received unexpected APP marker 0x".concat(z.toString(16)));default:throw new Error("Did not understand marker: 0x".concat(z.toString(16)))}if(z=void 0,H)break}if(!H)throw new Error("No EOI tag found.");var Z=function(e){var t=new r.Binary;return t.writeBytes(255,216,255,224,0,16,74,70,73,70,0),t.writeUint16(e.version),t.writeUint8(e.densityUnits),t.writeUint16(e.xDensity),t.writeUint16(e.yDensity),t.writeBytes(0,0),t.readByteArray()}(q);return new Blob([Z,V.readByteArray()],{type:"image/jpeg"})};var r=a(46378),i=192,s=193,n=194,o=195,l=196,d=197,u=198,c=199,h=201,f=202,p=203,m=205,_=206,v=207,g=216,E=217,y=218,S=219,C=221,T=224,M=225,b=226,P=227,A=228,I=229,O=230,N=231,w=232,D=233,R=234,L=235,k=236,x=237,F=238,G=239,U=254,B=[0,208,209,210,211,212,213,214,215]},28278:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.downloadMsg=function(e){var{msg:t,isUserClick:a,mode:r,downloadEvenIfExpensive:i,rmrReason:s,rmrData:n}=e,{mediaObject:o}=t;return o?o.getPendingProcess("fromDisk").then((()=>(a&&o.userDownloadAttemptCount++,(0,A.downloadMedia)({mimetype:t.mimetype,mediaObject:o,downloadEvenIfExpensive:i,mediaType:(0,M.msgToMediaType)(t),rmrReason:s,rmrData:n,downloadOrigin:Ce(t),isVcardOverMmsDocument:t.isVcardOverMmsDocument,mode:r}).then((()=>{o.userDownloadAttemptCount=0}))))):(__LOG__(4,void 0,new Error,!0)(ge(),t.id.toString(),t.type),SEND_LOGS("media-fault: downloadMsg msg without mediaObject"),Promise.resolve())},t.cancelDownloadMedia=Te,t.checkExistence=function(){return Me.apply(this,arguments)},t.cancelDownloadMsg=function(e){e.mediaObject?Te(e.mediaObject):e.mediaObject||(__LOG__(4,void 0,new Error,!0)(ve(),e.id.toString(),e.type),SEND_LOGS("media-fault: cancelDownloadMsg msg without mediaObject"))},t.prepRawMedia=function(e,t){var a;__LOG__(2)(_e()),a=t.isPtt?T.OUTWARD_TYPES.PTT:t.asDocument?T.OUTWARD_TYPES.DOCUMENT:t.asGif?T.OUTWARD_TYPES.VIDEO:t.isAudio?T.OUTWARD_TYPES.AUDIO:T.OUTWARD_TYPES.UNKNOWN;var r=Promise.resolve(e).then((e=>(e.autoreleaseWhenPromiseCompletes(r),(0,D.default)(e,t))));return new Se(a,r)},t.forwardMediaMsg=function(e,t,a=!1){__LOG__(2)(me());var r=e.mediaObject;if(!r)return __LOG__(4,void 0,new Error,!0)(pe(),e.id.toString(),e.type),SEND_LOGS("media-fault: forwardMediaMsg msg without mediaObject"),Promise.reject("non initialized media");var i=e.mediaData.toJSON();i.preview&&(i.preview=r.contentInfo._preview);i.mediaBlob&&i.mediaBlob.retain();var s=i.isGif?{isGif:!0}:{};i.type===T.OUTWARD_TYPES.PTT&&(i.type=T.OUTWARD_TYPES.AUDIO);var n={businessOwnerJid:e.businessOwnerJid,productId:e.productId,currencyCode:e.currencyCode,priceAmount1000:e.priceAmount1000,retailerId:e.retailerId,url:e.url,productImageCount:e.productImageCount,title:e.title,description:e.description};return new Se(i.type,Promise.resolve(i)).sendToChat(t,{forwardedFromWeb:!0,caption:i.type===T.OUTWARD_TYPES.DOCUMENT?e.caption:void 0,addEvenWhilePreparing:!0,placeholderProps:s,isForwarded:e.isForwarded||!e.isSentByMe,forwardingScore:e.getForwardingScoreWhenForwarded(),multicast:a,productMsgOptions:n}).then((t=>{var a;i.type===T.OUTWARD_TYPES.STICKER&&new P.default.StickerSend({stickerSendOrigin:P.default.STICKER_SEND_ORIGIN_TYPE.FORWARD,stickerIsAnimated:Boolean(null===(a=e.mediaData)||void 0===a?void 0:a.isAnimated)}).commit();return t}))},t.cancelUploadMedia=be,t.cancelUploadMsg=function(e){e.mediaObject?be(e.mediaObject):(__LOG__(4,void 0,new Error,!0)(fe(),e.id.toString(),e.type),SEND_LOGS("media-fault: cancelUploadMsg msg without mediaObject"))},t.resumeUploadMsg=function(e){var{mediaObject:t}=e;if(!t)return __LOG__(4,void 0,new Error,!0)(he(),e.id.toString(),e.type),SEND_LOGS("media-fault: resumeUploadMsg msg without mediaObject"),Promise.resolve();t.userUploadAttemptCount++;var a=(0,I.uploadMedia)({mimetype:e.mimetype,mediaObject:t,mediaType:(0,M.msgToMediaType)(e),forwardedFromWeb:Boolean(e.forwardedFromWeb),uploadOrigin:Pe(e.chat)}).then((({mediaEntry:a})=>{if(!a)throw new Error("upload failed: media entry was not created");t.userUploadAttemptCount=0;var r={deprecatedMms3Url:a.deprecatedMms3Url,directPath:a.directPath,mediaKey:a.mediaKey,mediaKeyTimestamp:a.mediaKeyTimestamp,filehash:t.filehash,encFilehash:a.encFilehash,size:t.size,streamingSidecar:a.sidecar,firstFrameSidecar:a.firstFrameSidecar};return Ge(e,r).then((()=>e))}));return(0,k.sendMsgToChat)(e.chat,a).catch((()=>{e.ack=f.default.ACK.FAILED}))},t.mediaMetadata=function(e){var t=e.mediaObject;if(!t)throw __LOG__(4,void 0,new Error,!0)(ce(),e.id.toString(),e.type),SEND_LOGS("media-fault: mediaMetadata msg without mediaObject"),new Error("msg.mediaMetadata with no mediaObject");var a=t.entries.getEntryByEncFilehash({encFilehash:e.encFilehash,deprecatedMms3Url:e.deprecatedMms3Url});if(!a)throw __LOG__(4,void 0,new Error,!0)(ue(),e.id.toString(),e.type),SEND_LOGS("media-fault: mediaMetadata no entry"),new Error("msg.mediaMetadata with entry mismatch");var r=e.mediaData;return{url:a.deprecatedMms3Url,directPath:a.directPath,encFilehash:a.encFilehash,mediaKey:a.mediaKey,mediaKeyTimestamp:a.mediaKeyTimestamp,filehash:e.filehash,type:r.type,mimetype:r.mimetype,filename:r.filename,duration:r.duration,width:r.fullWidth,height:r.fullHeight,firstFrameLength:r.firstFrameLength,isAnimated:r.isAnimated,thumbnailDirectPath:e.thumbnailDirectPath,thumbnailSha256:e.thumbnailSha256,thumbnailEncSha256:e.thumbnailEncSha256,thumbnailHeight:e.thumbnailHeight,thumbnailWidth:e.thumbnailWidth}},t.videoStreamingInfo=function(e){var t=e.mediaObject;return t?t.videoStreamingInfo(e.id.toString()):null},t.manuallySetMedia=function({msg:e,media:t,rmrReason:a}){var r=e.mediaObject;if(!r)return;w.default.createFromData(t,e.mimetype).then((t=>{(0,A.manuallySetMedia)({mimetype:e.mimetype,mediaObject:r,mediaBlob:t,mediaType:(0,M.msgToMediaType)(e),rmrReason:a,downloadOrigin:Ce(e)})}))},t.clearMediaForChat=function(e){C.clearMediaForChat(e)},t.prepareMsg=function(e){var t=e.mediaObject;if(t)return t.resolveWhenConsolidated();var a=e.mediaData,r=a.preview;return!r||void 0!==a.aspectRatio||void 0!==a.fullWidth&&void 0!==a.fullHeight?Promise.resolve():(0,b.getImageWidthHeight)(r).then((({width:t,height:a})=>{e.mediaObject||e.mediaData.set({aspectRatio:t/a})}))},t.registerMsgEarly=function(e,t){e.isUnsentPhoneMsg()&&(__LOG__(4,void 0,new Error,!0)(de(),e.id.toString(),e.type),SEND_LOGS("media-fault: registerMsgEarly msg without mediaObject"));for(var a={},r=0;r<T.MEDIA_MSG_PROPS.length;r++){var i=T.MEDIA_MSG_PROPS[r],s=t[i];a[i]=void 0!==s?s:e[i]}a.mimetype||a.type!==T.OUTWARD_TYPES.IMAGE||(t.mimetype=a.mimetype="image/jpeg");e.on(ye,Ae),Le(e,a,P.default.WEBC_RMR_REASON_CODE.MSG_UPDATE);for(var n={},o=0;o<T.MSG_SPECIFIC_FIELDS.length;o++){var l=T.MSG_SPECIFIC_FIELDS[o];n[l]=a[T.MEDIA_TO_MSG[l]]}e.mediaData.set(n)},t.registerMsg=function(e){e.mimetype||e.type!==T.OUTWARD_TYPES.IMAGE||(e.mimetype="image/jpeg");e.mimetype||e.type!==T.OUTWARD_TYPES.STICKER||(e.mimetype="image/webp");e.on(ye,Ae),Ie(e,P.default.WEBC_RMR_REASON_CODE.MSG_INIT)},t.deregisterMsg=function(e){e.off(null,Ae);var t=e.mediaObject;t&&C.disassociateMediaFromMsg(t,e)},t.downloadMmsThumbnail=Oe,t.downloadProgressiveJpegThumbnail=we,t.downloadStatusV3Thumbnail=function(){return Re.apply(this,arguments)},t.registerSticker=function(e){Ue(e,e.mediaObject||function(e){if(!e.filehash)return __LOG__(4,void 0,new Error,!0)(ee()),void SEND_LOGS("sticker-filehash-error");var t=C.getOrCreateMediaObject(e.filehash);return C.associateMediaWithSticker(t,e),t}(e),M.default.STICKER)},t.deregisterSticker=function(e){var{mediaObject:t}=e;t&&C.disassociateMediaFromSticker(t,e)},t.registerStickerPackIcon=function(e){Ue(e,e.mediaObject||function(e){if(!e.filehash)return __LOG__(4,void 0,new Error,!0)($()),void SEND_LOGS("sticker-pack-filehash-error");var t=C.getOrCreateMediaObject(e.filehash);return C.associateMediaWithStickerPack(t,e),t}(e),M.default.IMAGE)},t.deregisterStickerPackIcon=function(e){var{mediaObject:t}=e;t&&C.disassociateMediaFromStickerPack(t,e)},t.downloadStickerOrStickerPackIcon=function(e,t){if(e.isPlaceholder)return e.mediaData.mediaStage=T.MEDIA_DATA_STAGE.PREPARING,Promise.resolve();var a=e.mediaObject;if(!a)return Promise.reject(new Error("media-fault: downloadStickerOrStickerPackIcon sticker/stickerPack without mediaObject"));if(a.downloadStage===T.DOWNLOAD_STAGE.RESOLVED)return Promise.resolve();var r="STICKER"===t?P.default.WEBC_RMR_REASON_CODE.STICKER_PANEL_STICKER:P.default.WEBC_RMR_REASON_CODE.STICKER_PANEL_ICON;return a.getPendingProcess("fromDisk").then((()=>{if(!v.default.supportsFeature(v.default.F.MD_BACKEND)&&!e.deprecatedMms3Url||!e.filehash||!e.mediaKey||!e.encFilehash)return p.default.rmr({mediaObject:a,signal:(new u.default).signal,rmrReason:r})})).then((()=>(0,A.downloadMedia)({mimetype:e.mimetype,mediaObject:e.mediaObject,downloadEvenIfExpensive:!0,mediaType:(0,M.msgToMediaType)({type:e.type,isGif:!1}),rmrReason:r,downloadOrigin:P.default.DOWNLOAD_ORIGIN_TYPE.STICKER_PICKER,shouldThrow:!0})))},t.prepSticker=function(e){__LOG__(2)(Z());var t=e.mediaObject,a=e.mediaData.toJSON();if(a.fullWidth=125,a.fullHeight=125,!t)return __LOG__(4,void 0,new Error,!0)(X(),e.id),SEND_LOGS("media-fault: prepSticker sticker without mediaObject"),new Se(a.type,Promise.reject("non initialized media"));return new Se(a.type,Promise.resolve(a))},t.uploadProductImage=function(e,t){return(0,m.blobToArrayBuffer)(e.forceToBlob()).then((e=>g.default.unencryptedUpload({file:e,hash:t,signal:(new u.default).signal,type:M.default.PRODUCT_CATALOG_IMAGE,uploadOrigin:P.default.UPLOAD_ORIGIN_TYPE.PRODUCT_CATALOG}))).then((e=>new URL(e.directPath,"https://mmg.whatsapp.net").toString()))},t.MediaPrep=void 0;var s=i(a(70417)),n=i(a(52954)),o=i(a(19976)),l=a(73559),d=i(a(47677)),u=i(a(12489)),c=a(8701),h=i(a(19899)),f=i(a(50935)),p=i(a(1616)),m=a(99888),_=a(95595),v=i(a(18120)),g=i(a(14258)),E=i(a(54146)),y=i(a(8603)),S=i(a(24008)),C=r(a(53882)),T=a(96645),M=r(a(81135)),b=a(82982),P=i(a(40210)),A=a(8401),I=a(78460),O=i(a(77865)),N=i(a(61941)),w=i(a(25012)),D=i(a(73698)),R=i(a(96598)),L=i(a(49213)),k=a(95721),x=a(59420),F=i(a(66823)),G=i(a(72424)),U=a(64658),B=a(83286),j=a(4526);function V(){var e=(0,o.default)(["media.downloadProgressiveJpegThumbnail: error\n",""],["media.downloadProgressiveJpegThumbnail: error\\n",""]);return V=function(){return e},e}function H(){var e=(0,o.default)(["media.downloadProgressiveJpegThumbnail aborted"]);return H=function(){return e},e}function W(){var e=(0,o.default)(["media.downloadProgressiveJpegThumbnail: success"]);return W=function(){return e},e}function K(){var e=(0,o.default)(["media.downloadProgressiveJpegThumbnail: start"]);return K=function(){return e},e}function Y(){var e=(0,o.default)(["media.downloadMmsThumbnail: error\n",""],["media.downloadMmsThumbnail: error\\n",""]);return Y=function(){return e},e}function q(){var e=(0,o.default)(["media.downloadMmsThumbnail aborted"]);return q=function(){return e},e}function z(){var e=(0,o.default)(["media.downloadMmsThumbnail: success"]);return z=function(){return e},e}function Q(){var e=(0,o.default)(["media.downloadMmsThumbnail: start"]);return Q=function(){return e},e}function J(){var e=(0,o.default)(["checkExistence msg without mediaObject, id: "," type: ",""]);return J=function(){return e},e}function X(){var e=(0,o.default)(["id: ",""]);return X=function(){return e},e}function Z(){var e=(0,o.default)(["Prepping sticker"]);return Z=function(){return e},e}function $(){var e=(0,o.default)(["Unexpected sticker pack with no filehash"]);return $=function(){return e},e}function ee(){var e=(0,o.default)(["Unexpected sticker with no filehash"]);return ee=function(){return e},e}function te(){var e=(0,o.default)(["upload failed: thumbnail data incomplete\nDebug info:",""],["upload failed: thumbnail data incomplete\\nDebug info:",""]);return te=function(){return e},e}function ae(){var e=(0,o.default)(["Assertion failed!"]);return ae=function(){return e},e}function re(){var e=(0,o.default)(["Media:sendToChat error\nresult: ","\nuploadStage: ","\nuploadResultKind: ","\nerror: ",""],["Media:sendToChat error\\nresult: ","\\nuploadStage: ","\\nuploadResultKind: ","\\nerror: ",""]);return re=function(){return e},e}function ie(){var e=(0,o.default)(["Media:sendToChat canceled"]);return ie=function(){return e},e}function se(){var e=(0,o.default)(["Assertion failed!"]);return se=function(){return e},e}function ne(){var e=(0,o.default)(["Media:sendToChat chat ",""]);return ne=function(){return e},e}function oe(){var e=(0,o.default)(["media:msg "," "," filehash"]);return oe=function(){return e},e}function le(){var e=(0,o.default)(["id: "," type: ",""]);return le=function(){return e},e}function de(){var e=(0,o.default)(["id: "," type: ",""]);return de=function(){return e},e}function ue(){var e=(0,o.default)(["id: "," type: ",""]);return ue=function(){return e},e}function ce(){var e=(0,o.default)(["id: "," type: ",""]);return ce=function(){return e},e}function he(){var e=(0,o.default)(["id: "," type: ",""]);return he=function(){return e},e}function fe(){var e=(0,o.default)(["id: "," type: ",""]);return fe=function(){return e},e}function pe(){var e=(0,o.default)(["id: "," type: ",""]);return pe=function(){return e},e}function me(){var e=(0,o.default)(["Prepping media msg"]);return me=function(){return e},e}function _e(){var e=(0,o.default)(["Prepping raw media"]);return _e=function(){return e},e}function ve(){var e=(0,o.default)(["id: "," type: ",""]);return ve=function(){return e},e}function ge(){var e=(0,o.default)(["id: "," type: ",""]);return ge=function(){return e},e}function Ee(){var e=(0,o.default)(["Assertion failed!"]);return Ee=function(){return e},e}var ye="change:phoneUploading change:ack ".concat(T.MEDIA_MSG_PROPS.map((e=>"change:".concat(e))).join(" "));class Se{constructor(e,t){this._baseType=e,this._mediaData=new y.default({mediaStage:T.MEDIA_DATA_STAGE.PREPARING}),this._prepwork=t.then((e=>{if(this._mediaData.set(e),!e.filehash)return e.mediaBlob||(__LOG__(4,void 0,new Error,!0)(Ee()),SEND_LOGS("media-fault: no hash or blob")),(0,B.getHash)(e.mediaBlob).then((e=>{this._mediaData.filehash=e}))}),(e=>(this._mediaData.mediaStage=T.MEDIA_DATA_STAGE.ERROR_UNSUPPORTED,Promise.reject(e))))}sendToChat(e,t){return(0,l.callSyncPromise)(Fe,null,this,e,t)}waitForPrep(){return this._prepwork.then((()=>this._mediaData))}}function Ce(e){return e.asProduct?P.default.DOWNLOAD_ORIGIN_TYPE.PRODUCT_CATALOG:e.isStatusV3?P.default.DOWNLOAD_ORIGIN_TYPE.STATUS_USER:e.isGroupMsg?P.default.DOWNLOAD_ORIGIN_TYPE.CHAT_GROUP:P.default.DOWNLOAD_ORIGIN_TYPE.CHAT_PERSONAL}function Te(e){(0,A.cancelDownloadMedia)(e)}function Me(){return(Me=(0,n.default)((function*(e){if(yield e.waitForPhoneUpload(),!e.mediaObject)return __LOG__(4,void 0,new Error,!0)(J(),e.id.toString(),e.type),void SEND_LOGS("media-fault: checkExistence msg without mediaObject");yield(0,A.checkExistence)({mimetype:e.mimetype,mediaObject:e.mediaObject,mediaType:(0,M.msgToMediaType)({type:e.type,isGif:!1})})}))).apply(this,arguments)}function be(e){(0,I.cancelUploadMedia)(e)}function Pe(e){return e?(0,U.unproxy)(e).isGroup?P.default.UPLOAD_ORIGIN_TYPE.CHAT_GROUP:P.default.UPLOAD_ORIGIN_TYPE.CHAT_PERSONAL:P.default.UPLOAD_ORIGIN_TYPE.UNKNOWN}function Ae(e){Ie(e,P.default.WEBC_RMR_REASON_CODE.MSG_UPDATE)}function Ie(e,t){if(e.isUnsentPhoneMsg()){e.mediaObject&&(__LOG__(4,void 0,new Error,!0)(le(),e.id.toString(),e.type),SEND_LOGS("media-fault: consolidateMediaUpdate unsent message"));var a=ke(e);if(a.hasOwnProperty("preview")){var r=a.preview;delete a.preview,r&&w.default.createFromBase64Jpeg(r).then((t=>{e&&e.mediaData&&e.isUnsentPhoneMsg()&&(e.mediaData.preview=t)}))}e.mediaData.set((0,s.default)((0,s.default)({},a),{},{mediaStage:e.phoneUploading?T.MEDIA_DATA_STAGE.REMOTE_UPLOADING:T.MEDIA_DATA_STAGE.REMOTE_NEED_UPLOAD}))}else Le(e,e,t)}function Oe(){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,n.default)((function*(e){var{msg:t,isPreload:a,signal:r}=e,{thumbnailSha256:i,thumbnailEncSha256:s,thumbnailDirectPath:n}=t;if(n&&s&&i&&(t.type!==M.default.DOCUMENT||null!=t.thumbnailHeight&&null!=t.thumbnailWidth)){__LOG__(2)(Q());try{var o=yield p.default.downloadAndDecrypt({directPath:n,encFilehash:s,filehash:i,mediaKey:t.mediaKey,mediaKeyTimestamp:t.mediaKeyTimestamp,type:t.type===M.default.DOCUMENT?M.default.THUMBNAIL_DOCUMENT:M.default.THUMBNAIL_IMAGE,signal:r||(new u.default).signal,userDownloadAttemptCount:0,isPreload:a}),l=(0,N.default)(t.mediaObject,"mediaObject cannot be null for thumbnail download"),d={fullPreviewData:yield w.default.createFromData(o,"image/jpeg")};t.type===M.default.DOCUMENT&&(d.fullPreviewSize={height:(0,N.default)(t.thumbnailHeight,"msg.thumbnailHeight"),width:(0,N.default)(t.thumbnailWidth,"msg.thumbnailWidth")}),l.consolidate(d),__LOG__(2)(z())}catch(e){if(e.name===c.ABORT_ERROR)return void __LOG__(2)(q());__LOG__(3,!0)(Y(),(0,F.default)(e))}}}))).apply(this,arguments)}function we(){return De.apply(this,arguments)}function De(){return(De=(0,n.default)((function*(e){var{msg:t,isPreload:a,signal:r}=e;__LOG__(2)(K());try{var i=(0,N.default)(t.scanLengths,"msg.scanLengths"),s=(0,N.default)(t.scansSidecar,"msg.scansSidecar"),n=(0,N.default)(t.mediaObject,"msg.mediaObject"),o=(0,N.default)(n.filehash,"mediaObject.filehash"),{encFilehash:l,directPath:d}=t,h=yield p.default.downloadAndDecrypt({directPath:d,encFilehash:l,filehash:o,mediaKey:t.mediaKey,mediaKeyTimestamp:t.mediaKeyTimestamp,type:M.default.IMAGE,signal:r||(new u.default).signal,userDownloadAttemptCount:0,progressiveJpegOpts:{mimetype:"image/jpeg",scansSidecar:s,scanLengths:i,scanCount:1},isPreload:a});n.consolidate({fullPreviewData:yield w.default.createFromData(h,"image/jpeg")}),__LOG__(2)(W())}catch(e){if(e.name===c.ABORT_ERROR)return void __LOG__(2)(H());__LOG__(3,void 0,void 0,!0)(V(),(0,F.default)(e)),SEND_LOGS("download-pjpeg-thumbnail-failed")}}))).apply(this,arguments)}function Re(){return(Re=(0,n.default)((function*(e){var{msg:t,isPreload:a,signal:r}=e,{scanLengths:i,scansSidecar:s,encFilehash:n,thumbnailSha256:o,thumbnailEncSha256:l,thumbnailDirectPath:d}=t;i&&s&&n?yield we({msg:t,signal:r,isPreload:a}):o&&l&&d&&(yield Oe({msg:t,signal:r,isPreload:a}))}))).apply(this,arguments)}function Le(e,t,a){var r=ke(t),i=e.mediaObject,s=t.filehash;if(i)s&&s!==i.filehash&&(__LOG__(2)(oe(),e.id.toString(),i.filehash?"changed":"added"),C.disassociateMediaFromMsg(i,e),i=C.getOrCreateMediaObject(s),e.mediaObject=i,C.associateMediaWithMsg(i,e));else{i=s?C.getOrCreateMediaObject(s):new S.default;var n=e.mediaData;void 0!==n.aspectRatio&&(r.aspectRatio=n.aspectRatio),e.mediaObject=i,C.associateMediaWithMsg(i,e)}var o=!1,{deprecatedMms3Url:l,mediaKey:d,mediaKeyTimestamp:u,encFilehash:c,type:h,streamingSidecar:f,firstFrameSidecar:p,directPath:m,scansSidecar:_,scanLengths:v}=t;if(l||c){var g,E=~M.MEDIA_TYPE_VALUES.indexOf(h)?h:null;(o=!i.entries.has({encFilehash:c,deprecatedMms3Url:l}))?d&&E&&c?g=i.entries.addEntry({deprecatedMms3Url:l,mediaKey:d,mediaKeyTimestamp:u,encFilehash:c,type:E,sidecar:f,directPath:m,firstFrameSidecar:p,scansSidecar:_,scanLengths:v,debugHint:"consolidate"}):o=!1:d&&(g=i.entries.updateEntry({deprecatedMms3Url:l,mediaKey:d,mediaKeyTimestamp:u,encFilehash:c,type:E,sidecar:f,directPath:m,firstFrameSidecar:p,scansSidecar:_,scanLengths:v})),g||(o=!1),o&&i.downloadStage===T.DOWNLOAD_STAGE.ERROR_MISSING&&(r.downloadStage=T.DOWNLOAD_STAGE.INIT)}if(i.consolidate(r)||i.notifyMsgsAsync(),o&&i.downloadStage===T.DOWNLOAD_STAGE.NEED_POKE){var y;try{y=(0,M.msgToMediaType)(e)}catch(a){if(!t.type)throw a;y=(0,M.msgToMediaType)({type:t.type,isGif:e.isGif})}(0,A.downloadMedia)({mimetype:t.mimetype,mediaObject:i,downloadEvenIfExpensive:!1,mediaType:y,rmrReason:a,downloadOrigin:Ce(e)})}}function ke(e){var t={};return T.MAPPED_MSG_PROPS.forEach((a=>{var r=e[a],i=T.MSG_TO_MEDIA[a];t[i]=r})),t}function xe(e,t){return"product"===t.type?P.default.DOWNLOAD_ORIGIN_TYPE.PRODUCT_CATALOG:(0,U.unproxy)(e).isGroup?P.default.DOWNLOAD_ORIGIN_TYPE.CHAT_GROUP:P.default.DOWNLOAD_ORIGIN_TYPE.CHAT_PERSONAL}function Fe(e,t,a){__LOG__(2)(ne(),t.id.toString());var r,i,o=a.caption,l=a.quotedMsg?a.quotedMsg.msgContextInfo(t.id):{},u=(0,_.getMaybeMeUser)(),c=a.productMsgOptions||{};if(!t.isUser&&v.default.supportsFeature(v.default.F.MD_BACKEND),G.default.ephemeralMessages){t.isEphemeralSettingOn()&&(r=t.getEphemeralSetting());var p=t.getEphemeralSettingTimestamp();null!=p&&(i=p)}var m,g,y,S=(0,s.default)({t:h.default.globalUnixTime(),from:u,isNewMsg:!0,to:t.id,self:"out",type:e._baseType,ack:f.default.ACK.CLOCK,local:!0,id:new O.default({from:u,to:t.id,id:(0,L.default)(),participant:undefined,selfDir:"out"}),caption:o,quotedMsg:l.quotedMsg,quotedParticipant:l.quotedParticipant,quotedStanzaID:l.quotedStanzaID,quotedRemoteJid:l.quotedRemoteJid,mentionedJidList:a.mentionedJidList,isForwarded:a.isForwarded,forwardingScore:a.forwardingScore,multicast:a.multicast,forwardedFromWeb:a.forwardedFromWeb,ctwaContext:a.ctwaContext,ephemeralDuration:r,ephemeralSettingTimestamp:i},c),N=e.waitForPrep().then((e=>{var t=e.mediaBlob;return!t||t instanceof w.default?Promise.resolve(e):w.default.createFromData(t,t.type).then((t=>(e.mediaBlob=t,e)))})).then((e=>{var r=e.filehash;r||(__LOG__(4,void 0,new Error,!0)(se()),SEND_LOGS("media-fault: sendToChat filehash undefined"));var i=C.getOrCreateMediaObject(r),s=i.mediaBlob;if(s&&(s.retain(),e.mediaBlob&&e.mediaBlob.autorelease(),e.mediaBlob=s),e.mediaBlob&&(e.renderableUrl=e.mediaBlob.url()),i.consolidate(e.toJSON()),e.mediaBlob&&e.mediaBlob.autorelease(),(0,b.shouldUseMediaCache)((0,M.castToV4)(i.type))&&e.mediaBlob){var n=e.mediaBlob.formData();E.default.put(r,n)}(0,A.downloadMedia)({mimetype:e.mimetype,mediaObject:i,downloadEvenIfExpensive:!0,mediaType:(0,M.msgToMediaType)({type:e.type,isGif:e.isGif}),rmrReason:P.default.WEBC_RMR_REASON_CODE.SEND_TO_CHAT,downloadOrigin:xe(t,S),mode:"manual"});var l=i.msgProps(e);return l.caption=o,o||e.type!==T.OUTWARD_TYPES.DOCUMENT||(l.caption=e.filename),G.default.viewOnceWrite&&a.isViewOnce&&(l.isViewOnce=!0),l}));function D(){return F.apply(this,arguments)}function F(){return(F=(0,n.default)((function*(e){m=e;var{mediaObject:a}=e;a||(__LOG__(4,void 0,new Error,!0)(ae()),SEND_LOGS("media-fault: incorrect media object for created msg")),(0,d.default)(a,"msg is missing mediaObject");var r=(0,M.msgToMediaType)(e),i=a.entries.getUploadEntry(),n=i?{key:i.mediaKey,timestamp:i.mediaKeyTimestamp}:(0,R.default)(),{fullPreviewData:o,fullPreviewSize:l}=a.contentInfo,u=o&&Be(r),c=o&&u?je(e,o,r,n):Promise.resolve(null),h=(0,I.uploadMedia)({mimetype:e.mimetype,mediaObject:a,mediaType:r,forwardedFromWeb:Boolean(e.forwardedFromWeb),uploadOrigin:Pe(t),mediaKeyInfo:n}),[{kind:f,mediaEntry:p},_]=yield Promise.all([h,c]),v=null==_?void 0:_.uploadMediaResult.mediaEntry;if(g=f,!p)throw new Error("upload failed: media entry was not created");var E={};if(u){if(!(v&&_&&l))throw __LOG__(4,void 0,new Error,!0)(te(),JSON.stringify({thumbnailResultEntry:v,uploadThumbnailResult:_,fullPreviewSize:l})),SEND_LOGS("mms-thumbnail-data-incomplete"),new Error("upload failed: thumbnail data incomplete");E={thumbnailDirectPath:v.directPath,thumbnailSha256:_.filehash,thumbnailEncSha256:v.encFilehash,thumbnailHeight:l.height,thumbnailWidth:l.width}}return Ge(m,(0,s.default)({deprecatedMms3Url:p.deprecatedMms3Url,directPath:p.directPath,mediaKey:p.mediaKey,mediaKeyTimestamp:p.mediaKeyTimestamp,filehash:a.filehash,encFilehash:p.encFilehash,size:a.size,streamingSidecar:p.sidecar,firstFrameSidecar:p.firstFrameSidecar},E))}))).apply(this,arguments)}if(a.addEvenWhilePreparing){var U=a.placeholderProps||{};y=(0,k.addAndSendMsgToChat)(t,(0,s.default)((0,s.default)({},U),S),(e=>(m=e,N.then((e=>Ge(m,e))).then((()=>D(m))))))[1]}else{var B=N.then((e=>{var t=a.useBasePropsType?S.type:e.type;return(0,s.default)((0,s.default)((0,s.default)({},S),e),{},{type:t})}));y=(0,k.addAndSendMsgToChat)(t,B,D)[1]}return y.then((e=>({result:e,error:null}))).catch((e=>({result:null,error:e}))).then((({result:e,error:t})=>{var a,r;if(e===x.SendMsgResult.OK)return x.SendMsgResult.OK;var i=null===(a=m)||void 0===a||null===(r=a.mediaObject)||void 0===r?void 0:r.uploadStage;if(m&&(m.ack=f.default.ACK.FAILED),g===I.UploadMediaResultKind.CANCELLATION)return __LOG__(2)(ie()),x.SendMsgResult.ERROR_CANCELLED;if(__LOG__(3)(re(),e,i,g,String(t)),null!=i)switch(i){case T.UPLOAD_STAGE.NEED_UPLOAD:case T.UPLOAD_STAGE.ERROR_TOO_LARGE:return x.SendMsgResult.ERROR_UPLOAD;case T.UPLOAD_STAGE.ERROR_MISSING:return x.SendMsgResult.ERROR_EXPIRED}return g===I.UploadMediaResultKind.ERROR?x.SendMsgResult.ERROR_UPLOAD:null!=e?e:x.SendMsgResult.ERROR_UNKNOWN}))}function Ge(e,t){return(0,j.updateLocal)(e.id,t).then((()=>{e.set(t)}))}function Ue(e,t,a){var r,i,s=(r=e,i={},T.MAPPED_STICKER_PROPS.forEach((e=>{var t=r[e],a=T.MSG_TO_MEDIA[e];i[a]=t})),i);if(e.mediaData.set(s),t){e.mediaObject=t;var{deprecatedMms3Url:n,encFilehash:o}=e;if((o||n)&&!t.entries.has({encFilehash:o,deprecatedMms3Url:n}))t.entries.addEntry({deprecatedMms3Url:n,mediaKey:e.mediaKey,mediaKeyTimestamp:e.mediaKeyTimestamp,encFilehash:o,type:a,directPath:e.directPath,debugHint:"setMediaObjectValues"})&&t.downloadStage===T.DOWNLOAD_STAGE.ERROR_MISSING&&(s.downloadStage=T.DOWNLOAD_STAGE.INIT);t.consolidate(s)}}function Be(e){return v.default.supportsFeature(v.default.F.UPLOAD_DOCUMENT_THUMB_MMS)&&e===M.default.DOCUMENT}function je(){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,n.default)((function*(e,t,a,r){var{chat:i}=e,s=new S.default,n=yield(0,B.getHash)(t);return s.filehash=n,s.mediaBlob=t,(0,I.uploadMedia)({mimetype:"image/jpeg",mediaObject:s,mediaType:"thumbnail-document",forwardedFromWeb:Boolean(e.forwardedFromWeb),uploadOrigin:Pe(i),mediaKeyInfo:r}).then((e=>({uploadMediaResult:e,filehash:n})))}))).apply(this,arguments)}t.MediaPrep=Se},91063:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.checkAndRepair=function(e,t){var a=new n.default.WebcMediaAnalyzed;return(r={type:"prep",file:e,asGif:t},new Promise(((e,t)=>{__LOG__(2)(d()),s=i||new o.default,i=void 0,s.onmessage=a=>{try{a.data&&"log"===a.data.type?__LOG__(2)(l(),a.data.msg):e(a.data)}catch(e){t(e)}},s.onerror=e=>{t("Milan.onerror = ".concat(e&&e.message?e.message:e))},s.postMessage(r)})).finally((()=>{s&&(s.terminate(),i=new o.default)}))).then((({type:e,result:t,error:a,filename:r,file:i})=>{switch(e){case"result":return __LOG__(2)(p()),t;case"parsingError":return __LOG__(2)(f(),i,r,String(a)),i&&(__LOG__(4,void 0,new Error,!0)(h(),String(a)),SEND_LOGS("media-parsing-error")),void __LOG__(2)(c(),String(a))}})).catch((e=>{__LOG__(4,void 0,new Error,!0)(u(),String(e)),SEND_LOGS("media-detection-error")})).finally((t=>{if(a){var r=void 0;if(e.name){var i=e.name.split(".");i.length>1&&(r=i[i.length-1])}a.set({webcMediaSupported:!!t,webcMediaExtensions:r}),a.markWebcMediaAnalyzeT(),a.commit()}}));var r,s};var i,s=r(a(19976)),n=r(a(40210)),o=r(a(77012));function l(){var e=(0,s.default)(["(via Milan) ",""]);return l=function(){return e},e}function d(){var e=(0,s.default)(["MediaAnalyzer:sendMessageToWorker"]);return d=function(){return e},e}function u(){var e=(0,s.default)(["MediaAnalyzer:checkAndRepair got error! ",""]);return u=function(){return e},e}function c(){var e=(0,s.default)(["MediaAnalyzer:checkAndRepair rejected file (",")"]);return c=function(){return e},e}function h(){var e=(0,s.default)(["MediaAnalyzer:checkAndRepair got parsing error! ",""]);return h=function(){return e},e}function f(){var e=(0,s.default)(["trouble parsing file "," (fossil ",") ",""]);return f=function(){return e},e}function p(){var e=(0,s.default)(["MediaAnalyzer:checkAndRepair approved file"]);return p=function(){return e},e}},8603:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(70417)),n=r(a(61247)),o=a(46194),l=i(a(54146)),d=a(96645),u=new Set([d.OUTWARD_TYPES.IMAGE,d.OUTWARD_TYPES.VIDEO]);class c extends n.default{constructor(...e){super(...e),this.type=(0,n.prop)(d.OUTWARD_TYPES.UNKNOWN),this.directPath=(0,n.prop)(),this.mediaKey=(0,n.prop)(),this.mediaKeyTimestamp=(0,n.prop)(),this.encFilehash=(0,n.prop)(),this.mediaStage=(0,n.prop)(d.MEDIA_DATA_STAGE.INIT),this.size=(0,n.prop)(),this.filehash=(0,n.prop)(),this.mimetype=(0,n.prop)(),this.mediaBlob=(0,n.prop)(),this.renderableUrl=(0,n.prop)(),this.fullHeight=(0,n.prop)(),this.fullWidth=(0,n.prop)(),this.aspectRatio=(0,n.prop)(),this.rgbaBuffer=(0,n.prop)(),this.rgbaHeight=(0,n.prop)(),this.rgbaWidth=(0,n.prop)(),this.animationDuration=(0,n.prop)(0),this.animatedAsNewMsg=(0,n.prop)(!1),this.isAnimated=(0,n.prop)(),this.singleLoopDuration=(0,n.prop)(),this.firstFrameLength=(0,n.prop)(),this.firstFrameSidecar=(0,n.prop)(),this.emojis=(0,n.prop)(),this.progressiveStage=(0,n.prop)(),this.isViewOnce=(0,n.prop)(!1),this.preview=(0,n.prop)(),this.sidecar=(0,n.prop)(),this.duration=(0,n.prop)(),this.durationFloat=(0,n.prop)(),this.isGif=(0,n.prop)(),this.gifAttribution=(0,n.prop)(),this.streamable=(0,n.derived)(this._isStreamable,["isGif","isViewOnce","mediaStage","sidecar","type","_swStreamingSupported"]),this._swStreamingSupported=(0,n.prop)(!1),this._listeningToSwSupport=(0,n.prop)(!1),this.filename=(0,n.prop)(),this.pageCount=(0,n.prop)(),this.documentPreview=(0,n.prop)(),this.isVcardOverMmsDocument=(0,n.prop)(!1),this.parsedVcards=(0,n.prop)(),this.fullPreviewSize=(0,n.prop)(),this.fullPreviewData=(0,n.prop)(),this.subtype=(0,n.prop)()}initialize(){super.initialize()}set(e,t,a){var r,i=a;return"string"==typeof e?r={[e]:t}:(r=e,i=t),r=function(e){var t=e.filename||e.caption;if(t&&e.type===h.TYPE.DOCUMENT)return t=(0,o.cleanFilename)(t),(0,s.default)((0,s.default)({},e),{},{filename:t,caption:t});return e}(r),super.set(r,i)}_isStreamable(){return this.isStreamable()}isStreamable(){return this.isStreamableType()&&this.listenToServiceWorkerSupport()&&!this.isViewOnce}_updateStreamingSupported(e){this._swStreamingSupported=e}listenToServiceWorkerSupport(){if(this._listeningToSwSupport)return this._swStreamingSupported;var e=a(58906).default;return this.listenTo(e,"change:streamingSupported",this._updateStreamingSupported),this._swStreamingSupported=Boolean(e.streamingSupported),this._listeningToSwSupport=!0,this._swStreamingSupported}isStreamableType(){return this.type===d.OUTWARD_TYPES.VIDEO&&!this.isGif&&(this.mediaStage===d.MEDIA_DATA_STAGE.INIT||this.mediaStage===d.MEDIA_DATA_STAGE.FETCHING||this.mediaStage===d.MEDIA_DATA_STAGE.DECRYPTING||this.mediaStage===d.MEDIA_DATA_STAGE.RESOLVED)&&null!=this.fullWidth&&null!=this.fullHeight&&Boolean(this.sidecar&&this.sidecar.byteLength>0)}isDownloadable(){return!this.isViewOnce&&(null!=this.renderableUrl||l.default.has(this.filehash)||this.mediaStage===d.MEDIA_DATA_STAGE.EXISTS||this.mediaStage===d.MEDIA_DATA_STAGE.PROGRESSIVE_READY)}isViewOnceCompatible(){return u.has(this.type)}}c.Proxy="mediaData";var h=(0,n.defineModel)(c);h.TYPE=d.OUTWARD_TYPES;var f=h;t.default=f},24991:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.MediaEntryList=t.MediaEntry=void 0;var i=r(a(19976)),s=a(2505),n=r(a(42140)),o=r(a(55288)),l=r(a(39417)),d=r(a(27674));function u(){var e=(0,i.default)(["Media type "," from "," is missing encFilehash"]);return u=function(){return e},e}function c(){var e=(0,i.default)(["media-fault: mediaKey changed for the same MMS3 url. type:",". equal?:",". Debug:\n",""],["media-fault: mediaKey changed for the same MMS3 url. type:",". equal?:",". Debug:\\n",""]);return c=function(){return e},e}var h="PROBABLY_ON_SERVER",f="PROBABLY_OFF_SERVER",p="UNKNOWN";class m{constructor(e,t,a,r,i,s,n,o,l,d){this.useBackupUrl=!1,this._encFilehashPromise=null,this.deprecatedMms3Url=e,this.mediaKey=t,this.mediaKeyTimestamp=a,this.encFilehash=r,this.serverStatus=p,this.sidecar=s,this.directPath=n,this.firstFrameSidecar=o,this.type=i,this.scansSidecar=l,this.scanLengths=d}url(e){var{useFallback:t,forceHashUrl:a}=e||{},{encFilehash:r}=this;return r?o.default.getHostsInfo({operation:l.default.DOWNLOAD,encFilehash:r,type:this.type}).then((({selectedHost:e,fallbackHost:i})=>{var s=t&&i?i:e;return(0,n.default)({directPath:a?null:this.directPath,encFilehash:r,hostname:s.hostname,type:this.type})})):Promise.reject(new Error("media_entry: encFilehash does not exist"))}markWhetherOnServer(e){this.serverStatus=e?h:f}}t.MediaEntry=m;function _(e){e.entries.sort(((e,t)=>{var a=v(t)-v(e);return 0===a?t.mediaKeyTimestamp-e.mediaKeyTimestamp:a}))}function v(e){var t=0;switch(e.serverStatus){case h:t+=200;break;case f:break;case p:t+=100}return e.encFilehash?t+=20:e._encFilehashPromise&&(t+=10),t}t.MediaEntryList=class{constructor(){this.entries=[]}_updateEntry({foundEntry:e,mediaKey:t,mediaKeyTimestamp:a,encFilehash:r,sidecar:i,directPath:n,firstFrameSidecar:o,scansSidecar:l,scanLengths:d,deprecatedMms3Url:u}){if(t&&!(0,s.b64Equal)(e.mediaKey,t)){var h=e.mediaKey.replace("=","").split("\n")[0],f=t.replace("=","").split("\n")[0];return __LOG__(4,void 0,new Error,!0)(c(),e.type,h===f,JSON.stringify({before:{hasDirectPath:Boolean(e.directPath),hasEncFilehash:Boolean(e.encFilehash),hasMediaKey:Boolean(e.mediaKey),hasDeprecatedMms3Url:Boolean(e.deprecatedMms3Url)},after:{hasDirectPath:Boolean(n),hasEncFilehash:Boolean(r),hasDeprecatedMms3Url:Boolean(u)}},null,2)),SEND_LOGS("media-key-mismatch-same-mms3-url"),null}return null!=a&&(e.mediaKeyTimestamp=a),i&&(e.sidecar=i),o&&(e.firstFrameSidecar=o),l&&(e.scansSidecar=l),(null==d?void 0:d.length)&&(e.scanLengths=d),e.directPath=n,e}updateEntry({deprecatedMms3Url:e,mediaKey:t,mediaKeyTimestamp:a,encFilehash:r,type:i,sidecar:s,directPath:n,firstFrameSidecar:o,scansSidecar:l,scanLengths:d}){var u=this.getEntryByEncFilehash({encFilehash:r,deprecatedMms3Url:e});if(u)return this._updateEntry({foundEntry:u,mediaKey:t,mediaKeyTimestamp:a,encFilehash:r,sidecar:s,directPath:n,firstFrameSidecar:o,scansSidecar:l,scanLengths:d,deprecatedMms3Url:e})}addEntry(e){var{deprecatedMms3Url:t,mediaKey:a,mediaKeyTimestamp:r,encFilehash:i,type:s,sidecar:n,directPath:o,firstFrameSidecar:l,scansSidecar:d,scanLengths:c,debugHint:h}=e;null==i&&(__LOG__(4,void 0,new Error,!0)(u(),s,h),SEND_LOGS("media-entry-missing-upload-hash-".concat(s,"-").concat(h)));var f=this.entries,p=this.getEntryByEncFilehash({encFilehash:i,deprecatedMms3Url:t}),_=p?this._updateEntry({foundEntry:p,mediaKey:a,mediaKeyTimestamp:r,encFilehash:i,sidecar:n,directPath:o,firstFrameSidecar:l,scansSidecar:d,scanLengths:c,deprecatedMms3Url:t}):null;if(_)return _;if(!a)return null;var v=new m(t,a,r,i,s,n,o,l,d,c);return f.push(v),v}_getKey({encFilehash:e,deprecatedMms3Url:t}){return null==e?"mms3:".concat(t):e}has(e){return null!=this.getEntryByEncFilehash(e)}getEntryByEncFilehash(e){var t=this._getKey(e);return this.entries.find((e=>this._getKey(e)===t))}getUploadEntry(){return _(this),this.entries.find((e=>(0,d.default)(e.mediaKeyTimestamp)))||null}getDownloadEntry(){_(this);var e=this.entries[0];return e&&e.serverStatus!==f?e:null}}},24008:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.consolidate=T,t.webMediaTypeToWamMediaType=function(e){switch(e){case"VIDEO":return 3;case"IMAGE":return 2;case"AUDIO":return 4;case"STICKER":return 16;case"DOCUMENT":return 8;case"PRODUCT":return 18;default:throw new Error("web media type is invalid: ".concat(e))}},t.default=void 0;var i=r(a(70417)),s=r(a(19976)),n=a(39329),o=r(a(50935)),l=r(a(6698)),d=a(24991),u=r(a(81135)),c=a(96645),h=a(82982),f=(r(a(40210)),r(a(25012))),p=r(a(40103)),m=a(23214);function _(){var e=(0,s.default)(["Assertion failed!"]);return _=function(){return e},e}function v(){var e=(0,s.default)(["Assertion failed!"]);return v=function(){return e},e}function g(){var e=(0,s.default)(["Assertion failed!"]);return g=function(){return e},e}function E(){var e=(0,s.default)(["type: ",""]);return E=function(){return e},e}function y(){var e=(0,s.default)(["Assertion failed!"]);return y=function(){return e},e}function S(){var e=(0,s.default)(["Assertion failed!"]);return S=function(){return e},e}function C(){var e=(0,s.default)(["Assertion failed!"]);return C=function(){return e},e}function T(e,t){var a=e.contentInfo,r=!1,i=function(e){switch(e){case c.OUTWARD_TYPES.IMAGE:case c.OUTWARD_TYPES.PRODUCT:return c.TYPE.IMAGE;case c.OUTWARD_TYPES.VIDEO:return c.TYPE.VIDEO;case c.OUTWARD_TYPES.STICKER:return c.TYPE.STICKER;case c.OUTWARD_TYPES.AUDIO:case c.OUTWARD_TYPES.PTT:return c.TYPE.AUDIO;case c.OUTWARD_TYPES.DOCUMENT:default:return}}(t.type,t.subtype);i&&!e.type&&(e.type=i,r=!0);var{downloadStage:s,uploadStage:n}=t;s&&s!==e.downloadStage&&(e.downloadStage=s,r=!0),n&&n!==e.uploadStage&&(e.uploadStage=n,r=!0),t.resolvedPreview&&!a.preview&&(t.resolvedPreview.retain(),a.preview=t.resolvedPreview,r=!0),null!=t.progressiveStage&&t.progressiveStage!==e.progressiveStage&&(e.progressiveStage=t.progressiveStage,r=!0);var o=t.mediaBlob;o&&!o.isBlobEqual(e.mediaBlob)&&(e.mediaBlob&&e.clearBlob(),o.retain(),e.mediaBlob=o,e.size=o.size(),r=!0),null!=t.size&&(null==e.size||t.size<e.size)&&(e.size=t.size,r=!0),t.filehash&&!e.filehash&&(e.filehash=t.filehash,r=!0),t.parsedVcards&&t.parsedVcards!==e.parsedVcards&&(e.parsedVcards=t.parsedVcards,r=!0);for(var l=e.contentFields(),d=0;d<l.length;d++){var u=l[d];switch(u){case"preview":t.preview&&!a._preview&&(e.runProcessIfNotRunBefore("preview",A,t.preview),a._preview=t.preview,r=!0);break;case"fullWidth":case"fullHeight":case"aspectRatio":var h=t[u];null!=h&&0!==h&&a[u]!==h&&(a[u]=h,r=!0);break;case"animationDuration":case"singleLoopDuration":var f=t[u];null!=f&&f!==a[u]&&(a[u]=f,r=!0);break;default:var p=t[u];void 0!==p&&void 0===a[u]&&(a[u]=p,r=!0)}}return null!=a.aspectRatio&&0!==a.aspectRatio||(null!=a.fullWidth&&0!==a.fullWidth&&null!=a.fullHeight&&0!==a.fullHeight?(a.aspectRatio=a.fullWidth/a.fullHeight,r=!0):a.preview&&e.runProcessIfNotRunBefore("aspectRatio",I,a.preview)),r}function M(e,t,a){for(var r=0;r<a.length;r++){var i=a[r];e[i]=t[i]}}function b(e,t){return t.filehash?e.id.fromMe&&e.ack<o.default.ACK.SENT?(e.local||(__LOG__(4,void 0,new Error,!0)(_()),SEND_LOGS("media-fault: unsent media system message not local")),function(e){switch(e.uploadStage){case c.UPLOAD_STAGE.INIT:case c.UPLOAD_STAGE.PREPARING:return c.MEDIA_DATA_STAGE.PREPARING;case c.UPLOAD_STAGE.UPLOADING:return c.MEDIA_DATA_STAGE.UPLOADING;case c.UPLOAD_STAGE.NEED_UPLOAD:return c.MEDIA_DATA_STAGE.NEED_UPLOAD;case c.UPLOAD_STAGE.ERROR_MISSING:return c.MEDIA_DATA_STAGE.ERROR_MISSING;case c.UPLOAD_STAGE.ERROR_TOO_LARGE:return c.MEDIA_DATA_STAGE.ERROR_TOO_LARGE;case c.UPLOAD_STAGE.UPLOADED:return c.MEDIA_DATA_STAGE.SENDING}}(t)):P(t):c.MEDIA_DATA_STAGE.PREPARING}function P(e){switch(e.downloadStage){case c.DOWNLOAD_STAGE.INIT:return c.MEDIA_DATA_STAGE.INIT;case c.DOWNLOAD_STAGE.EXISTS:return c.MEDIA_DATA_STAGE.EXISTS;case c.DOWNLOAD_STAGE.PREPARING:return c.MEDIA_DATA_STAGE.PREPARING;case c.DOWNLOAD_STAGE.REUPLOADING:return c.MEDIA_DATA_STAGE.REUPLOADING;case c.DOWNLOAD_STAGE.FETCHING:return c.MEDIA_DATA_STAGE.FETCHING;case c.DOWNLOAD_STAGE.PROCESSING:return c.MEDIA_DATA_STAGE.DECRYPTING;case c.DOWNLOAD_STAGE.NEED_POKE:return c.MEDIA_DATA_STAGE.NEED_POKE;case c.DOWNLOAD_STAGE.ERROR_MISSING:return c.MEDIA_DATA_STAGE.ERROR_MISSING;case c.DOWNLOAD_STAGE.ERROR_UNSUPPORTED:return c.MEDIA_DATA_STAGE.ERROR_UNSUPPORTED;case c.DOWNLOAD_STAGE.RESOLVED:return c.MEDIA_DATA_STAGE.RESOLVED;case c.DOWNLOAD_STAGE.PROGRESSIVE_READY:return c.MEDIA_DATA_STAGE.PROGRESSIVE_READY}}function A(e){return f.default.createFromBase64Jpeg(e).then((e=>(e.autorelease(),{resolvedPreview:e})))}function I(e){return(0,h.getImageWidthHeight)(e).then((({width:e,height:t})=>({aspectRatio:e/t})))}t.default=class{constructor(){this._msgs=[],this._notifyTimer=new n.ShiftTimer((()=>{!function(e){var t={};M(t,e,c.FIELDS.RAW),M(t,e.contentInfo,e.contentFields()),e.mediaBlob&&(t.renderableUrl=e.mediaBlob.url());for(var a=e._msgs,r=a.length,i=0;i<r;i++){var[s,n]=a[i];if(!n){if(s.type!==o.default.MSG_TYPE.CIPHERTEXT){t.mediaStage=b(s,e);for(var l=0;l<c.MSG_SPECIFIC_FIELDS.length;l++){var d=c.MSG_SPECIFIC_FIELDS[l];t[d]=s[c.MEDIA_TO_MSG[d]]}}else{delete t.mediaStage;for(var u=0;u<c.MSG_SPECIFIC_FIELDS.length;u++)delete t[c.MSG_SPECIFIC_FIELDS[u]]}s.mediaData.set(t)}}for(var h=a.length-1;h>=0;h--)a[h][1]&&a.splice(h,1);var f=e._callOnConsolidate;!e._pendingChanges&&f&&(e._callOnConsolidate=null,f.forEach((e=>{e()})));e._saveMedia&&e._saveMedia(e)}(this),function(e){var t={};M(t,e,c.FIELDS.RAW),M(t,e.contentInfo,e.contentFields()),e.mediaBlob&&(t.renderableUrl=e.mediaBlob.url());var a=P(e);e._stickers=e._stickers.filter((([e,t])=>!t)),e._stickers.forEach((([e,r])=>{e.mediaData.set((0,i.default)((0,i.default)({},t),{},{mediaStage:a}))})),e._stickerPacks=e._stickerPacks.filter((([e,t])=>!t)),e._stickerPacks.forEach((([e,r])=>{e.mediaData.set((0,i.default)((0,i.default)({},t),{},{mediaStage:a}))})),!e._pendingChanges&&e._callOnConsolidate&&(e._callOnConsolidate.forEach((e=>{e()})),e._callOnConsolidate=null);e._saveMedia&&e._saveMedia(e)}(this)})),this._callOnConsolidate=null,this._keyedProcesses=null,this._pendingChangesCount=0,this._saveMedia=null,this._stickers=[],this._stickerPacks=[],this.entries=new d.MediaEntryList,this.downloadStage=c.DOWNLOAD_STAGE.INIT,this.uploadStage=c.UPLOAD_STAGE.INIT,this.userUploadAttemptCount=0,this.userDownloadAttemptCount=0,this.downloadPromise=null,this.uploadPromise=null,this.mediaBlob=null,this.size=void 0,this.filehash=void 0,this.contentInfo={},this.progressiveStage=void 0,this.parsedVcards=null}consolidate(e){return!!T(this,e)&&(this.notifyMsgsAsync(),!0)}clearBlob(){var e=this.mediaBlob;e&&(this.mediaBlob=null,e.autorelease())}contentFields(){var e=this.type||c.TYPE.DOCUMENT;return c.FIELDS[e]}resolveWhenConsolidated(){return this._notifyTimer.ts||this._pendingChanges?new Promise((e=>{this._callOnConsolidate?this._callOnConsolidate.push(e):this._callOnConsolidate=[e]})):Promise.resolve()}notifyMsgsAsync(){this._notifyTimer.debounce(0)}addMsg(e){for(var t=this._msgs,a=0;a<t.length;a++){var[r,i]=t[a];r!==e||i||(__LOG__(4,void 0,new Error,!0)(C()),SEND_LOGS("redundant-media-msg"))}t.push([e,!1]),this.notifyMsgsAsync()}removeMsg(e){for(var t=this._msgs,a=!1,r=0;!a&&r<t.length;r++){var[i,s]=t[r];i!==e||s||(t[r][1]=!0,a=!0)}}hasAssociatedMsgsOrStickers(){for(var e=this._msgs,t=0;t<e.length;t++)if(!e[t][1])return!0;return this.hasAssociatedStickers()||this.hasAssociatedStickerPacks()}associatedMsgs(){for(var e=this._msgs,t=[],a=0;a<e.length;a++){var[r,i]=e[a];i||t.push(r)}return t}rmr(e){var t=this.associatedStickers();if(t.length>0)return(0,m.rmrSticker)(this.entries,this._stickers,t[0]).then((e=>e.status));var a=this.associatedStickerPacks();if(a.length>0)return(0,m.rmrStickerPack)(this.entries,this._stickerPacks,a[0]).then((e=>e.status));var[r]=this._msgs.find((([e,t])=>!t&&!e.isUnsentPhoneMsg()))||[null];return r||(__LOG__(4,void 0,new Error,!0)(S()),SEND_LOGS("media-fault: rmr called on MediaObject with no msg")),r?(e.onMsgSelect(r),(0,p.default)(r).then((e=>{if(200===e.status){var{encFilehash:t}=r,a=e.isMD?this.entries.updateEntry({deprecatedMms3Url:r.deprecatedMms3Url,encFilehash:t,directPath:e.directPath}):this.entries.addEntry({deprecatedMms3Url:e.url,mediaKey:e.mediaKey||r.mediaKey,mediaKeyTimestamp:e.mediaKeyTimestamp,encFilehash:e.encFilehash,type:r.mediaData.type,directPath:e.directPath,debugHint:"rmr"});a||(__LOG__(4,void 0,new Error,!0)(y()),SEND_LOGS("media-fault: rmr entry can not be found")),null==a||a.markWhetherOnServer(!0)}return e.status}))):Promise.reject(new Error("rmr called on MediaObject with no msg"))}msgProps(e){var t={};M(t,this,c.FIELDS.RAW),M(t,this.contentInfo,this.contentFields()),M(t,e,c.MSG_SPECIFIC_FIELDS),t.preview=this.contentInfo._preview;var a={};for(var r in t){var i=c.MEDIA_TO_MSG[r];i&&(a[i]=t[r])}return a}delete(){this._saveMedia=null;var{cancelDownloadMedia:e,cancelUploadMedia:t}=a(28278);e(this),t(this),this.clearBlob()}runProcessIfNotRunBefore(e,t,a){var r=this._keyedProcesses;r||(r=this._keyedProcesses={}),r.hasOwnProperty(e)||(this._pendingChangesCount++,r[e]=Promise.resolve(a).then(t).then((e=>{this.consolidate(e)})).finally((()=>{this._pendingChangesCount--,0===this._pendingChangesCount&&this.notifyMsgsAsync()})))}getPendingProcess(e){return 0!==this._pendingChangesCount&&this._keyedProcesses&&this._keyedProcesses.hasOwnProperty(e)?this._keyedProcesses[e]:Promise.resolve()}videoStreamingInfo(e){if(this.type!==c.TYPE.VIDEO)return __LOG__(4,void 0,new Error,!0)(E(),String(this.type)),SEND_LOGS("media-fault: media streaming info request for non-video type"),null;var t=this.entries.getDownloadEntry();return t&&t.sidecar?Promise.all([(0,l.default)(u.default.VIDEO,t.mediaKey),t.url()]).then((([a,r])=>({cryptoKeys:(0,i.default)((0,i.default)({},a),{},{cipherKey:a.encKey,sidecar:t.sidecar}),streamData:{clientUrl:r,size:this.size,msgKey:e}}))):null}addStickerPack(e){for(var t=this._stickerPacks,a=0;a<t.length;a++){var[r,i]=t[a];r!==e||i||(__LOG__(4,void 0,new Error,!0)(g()),SEND_LOGS("redundant-sticker-pack-add"))}t.push([e,!1]),this.notifyMsgsAsync()}addSticker(e){for(var t=this._stickers,a=0;a<t.length;a++){var[r,i]=t[a];r!==e||i||(__LOG__(4,void 0,new Error,!0)(v()),SEND_LOGS("redundant-sticker-add"))}t.push([e,!1]),this.notifyMsgsAsync()}removeSticker(e){for(var t=this._stickers,a=!1,r=0;!a&&r<t.length;r++){var[i,s]=t[r];i!==e||s||(t[r][1]=!0,a=!0)}}removeStickerPack(e){for(var t=this._stickerPacks,a=!1,r=0;!a&&r<t.length;r++){var[i,s]=t[r];i!==e||s||(t[r][1]=!0,a=!0)}}hasAssociatedStickers(){return this._stickers.some((([e,t])=>!t))}hasAssociatedStickerPacks(){return this._stickerPacks.some((([e,t])=>!t))}associatedStickers(){return this._stickers.reduce(((e,[t,a])=>a?e:e.concat(t)),[])}associatedStickerPacks(){return this._stickerPacks.reduce(((e,[t,a])=>a?e:e.concat(t)),[])}toJSON(){return{mediaBlob:this.mediaBlob,size:this.size,filehash:this.filehash,type:this.type,contentInfo:this.contentInfo,downloadStage:this.downloadStage,uploadStage:this.uploadStage}}}},23214:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.rmrSticker=function(e,t,a){a||(__LOG__(4,void 0,new Error,!0)(u()),SEND_LOGS("media-fault: rmr called on MediaObject without sticker"));return n.default.mediaUpload("sticker",a.id).tap((a=>{var r=a.sticker;if(200===a.status&&r){t.forEach((([e,t])=>{t||(e.directPath===r.directPath&&(__LOG__(4,void 0,new Error,!0)(d()),SEND_LOGS("rmrSticker:same-direct-path-after-rmr")),e.deprecatedMms3Url=r.url,e.filehash=r.filehash,e.width=r.width,e.height=r.height,e.mediaKey=r.mediaKey,e.mediaKeyTimestamp=0,e.directPath=r.directPath,e.encFilehash=r.encFilehash,r.mimetype&&(e.mimetype=r.mimetype))}));var i=e.addEntry({deprecatedMms3Url:r.url,mediaKey:r.mediaKey,mediaKeyTimestamp:0,encFilehash:r.encFilehash,type:s.default.STICKER,directPath:r.directPath,debugHint:"rmrSticker"});i&&i.markWhetherOnServer(!0)}}))},t.rmrStickerPack=function(e,t,a){a||(__LOG__(4,void 0,new Error,!0)(l()),SEND_LOGS("media-fault: rmr called on MediaObject without stickerPack"));return n.default.mediaUpload("sticker-pack",a.id).tap((a=>{var r=a.stickerPack;if(200===a.status&&r){t.forEach((([e,t])=>{t||(e.directPath===r.directPath&&(__LOG__(4,void 0,new Error,!0)(o()),SEND_LOGS("rmrStickerPack:same-direct-path-after-rmr")),e.url=r.url,e.filehash=r.filehash,e.mediaKey=r.mediaKey,e.mediaKeyTimestamp=0,e.directPath=r.directPath,e.encFilehash=r.encFilehash,r.mimetype&&(e.mimetype=r.mimetype))}));var i=e.addEntry({deprecatedMms3Url:r.url,mediaKey:r.mediaKey,mediaKeyTimestamp:0,encFilehash:r.encFilehash,type:s.default.IMAGE,directPath:r.directPath,debugHint:"rmrStickerPack"});i&&i.markWhetherOnServer(!0)}}))};var i=r(a(19976)),s=r(a(81135)),n=r(a(76022));function o(){var e=(0,i.default)(["Assertion failed!"]);return o=function(){return e},e}function l(){var e=(0,i.default)(["Assertion failed!"]);return l=function(){return e},e}function d(){var e=(0,i.default)(["Assertion failed!"]);return d=function(){return e},e}function u(){var e=(0,i.default)(["Assertion failed!"]);return u=function(){return e},e}},53882:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.associateMediaWithMsg=function(e,t){e.addMsg(t)},t.disassociateMediaFromMsg=function(e,t){if(t.mediaObject=null,e.removeMsg(t),e.hasAssociatedMsgsOrStickers())return;var{filehash:a}=e;a&&delete l[a];a&&(0,n.shouldUseLruMediaStore)((0,s.msgToMediaType)(t))&&o.default.del(a);e.delete()},t.delistAndDeleteAllMedia=function(){var e=l;for(var t in l={},e)e[t].delete()},t.getOrCreateMediaObject=function(e){return l.hasOwnProperty(e)?l[e]:l[e]=new i.default},t.clearMediaForChat=function(){},t.associateMediaWithStickerPack=function(e,t){e.addStickerPack(t)},t.disassociateMediaFromStickerPack=function(e,t){if(t.mediaObject=null,e.removeStickerPack(t),e.hasAssociatedMsgsOrStickers())return;var{filehash:a}=e;a&&delete l[a];a&&o.default.del(a);e.delete()},t.associateMediaWithSticker=function(e,t){e.addSticker(t)},t.disassociateMediaFromSticker=function(e,t){if(t.mediaObject=null,e.removeSticker(t),e.hasAssociatedMsgsOrStickers())return;var{filehash:a}=e;a&&delete l[a];a&&o.default.del(a);e.delete()};var i=r(a(24008)),s=a(81135),n=a(82982),o=r(a(90382)),l={}},96645:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TYPE=t.OUTWARD_TYPES=t.MEDIA_DATA_STAGE=t.UPLOAD_STAGE=t.DOWNLOAD_STAGE=t.MSG_SPECIFIC_FIELDS=t.FIELDS=t.MEDIA_MSG_PROPS=t.MAPPED_STICKER_PROPS=t.MAPPED_MEDIA_PROPS=t.MAPPED_MSG_PROPS=t.MSG_TO_MEDIA=t.MEDIA_TO_MSG=void 0;var r=Object.freeze({preview:"body",mediaKey:"mediaKey",mediaKeyTimestamp:"mediaKeyTimestamp",size:"size",filehash:"filehash",mimetype:"mimetype",duration:"duration",pageCount:"pageCount",fullHeight:"height",fullWidth:"width",type:"type",filename:"filename",caption:"caption",isGif:"isGif",gifAttribution:"gifAttribution",sidecar:"streamingSidecar",subtype:"subtype",firstFrameLength:"firstFrameLength",firstFrameSidecar:"firstFrameSidecar",isAnimated:"isAnimated",isVcardOverMmsDocument:"isVcardOverMmsDocument",isViewOnce:"isViewOnce"});t.MEDIA_TO_MSG=r;var i=Object.freeze({body:"preview",directPath:"directPath",mediaKey:"mediaKey",mediaKeyTimestamp:"mediaKeyTimestamp",size:"size",filehash:"filehash",mimetype:"mimetype",duration:"duration",pageCount:"pageCount",height:"fullHeight",width:"fullWidth",type:"type",filename:"filename",caption:"caption",isGif:"isGif",gifAttribution:"gifAttribution",streamingSidecar:"sidecar",subtype:"subtype",firstFrameLength:"firstFrameLength",firstFrameSidecar:"firstFrameSidecar",isAnimated:"isAnimated",isVcardOverMmsDocument:"isVcardOverMmsDocument",isViewOnce:"isViewOnce"});t.MSG_TO_MEDIA=i;var s=Object.keys(i);t.MAPPED_MSG_PROPS=s;var n=Object.keys(r);t.MAPPED_MEDIA_PROPS=n;t.MAPPED_STICKER_PROPS=["filehash","height","mimetype","size","type","width"];var o=[...s,"deprecatedMms3Url","encFilehash","streamable"];t.MEDIA_MSG_PROPS=o;var l=Object.freeze({VIDEO:Object.freeze(["aspectRatio","fullWidth","fullHeight","preview","duration","durationFloat","isViewOnce","fullPreviewData"]),AUDIO:Object.freeze(["duration"]),IMAGE:Object.freeze(["aspectRatio","fullWidth","fullHeight","preview","isViewOnce","fullPreviewData"]),PRODUCT:Object.freeze(["aspectRatio","fullWidth","fullHeight","preview"]),STICKER:Object.freeze(["animationDuration","singleLoopDuration","emojis","firstFrameLength","firstFrameSidecar","isAnimated","fullWidth","fullHeight","preview","rgbaBuffer","rgbaWidth","rgbaHeight","aspectRatio"]),STICKER_PACK:Object.freeze([]),DOCUMENT:Object.freeze(["aspectRatio","pageCount","preview","isVcardOverMmsDocument","parsedVcards","fullPreviewData","fullPreviewSize"]),RAW:Object.freeze(["mediaBlob","size","filehash","progressiveStage"])});t.FIELDS=l;t.MSG_SPECIFIC_FIELDS=["type","filename","caption","isGif","gifAttribution","mimetype","pageCount","sidecar","subtype","isViewOnce"];var d=a(28103).Mirrored(["INIT","EXISTS","PREPARING","REUPLOADING","FETCHING","PROCESSING","NEED_POKE","ERROR_MISSING","ERROR_UNSUPPORTED","PROGRESSIVE_READY","RESOLVED"]);t.DOWNLOAD_STAGE=d;var u=a(28103).Mirrored(["INIT","PREPARING","UPLOADING","NEED_UPLOAD","ERROR_MISSING","ERROR_TOO_LARGE","UPLOADED"]);t.UPLOAD_STAGE=u;var c=a(28103).Mirrored(["INIT","EXISTS","PREPARING","UPLOADING","SENDING","REUPLOADING","FETCHING","DECRYPTING","RESOLVED","NEED_POKE","NEED_UPLOAD","ERROR_MISSING","ERROR_TOO_LARGE","ERROR_UNSUPPORTED","PROGRESSIVE_READY","REMOTE_UPLOADING","REMOTE_NEED_UPLOAD"]);t.MEDIA_DATA_STAGE=c;t.OUTWARD_TYPES={IMAGE:"image",VIDEO:"video",AUDIO:"audio",PTT:"ptt",STICKER:"sticker",DOCUMENT:"document",PRODUCT:"product",UNKNOWN:"unknown"};var h=Object.freeze({VIDEO:"VIDEO",IMAGE:"IMAGE",AUDIO:"AUDIO",STICKER:"STICKER",DOCUMENT:"DOCUMENT",PRODUCT:"PRODUCT"});t.TYPE=h},81135:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.castToV4=function(e){var t;if(null==e)t=o.DOCUMENT;else{if(!(e in o))throw new Error("castToV4: unexpected mmsv3 type ".concat(e));t=o[e]}return t},t.msgToMediaType=function({type:e,isGif:t}){switch(e){case n.IMAGE:return o.IMAGE;case n.VIDEO:return t?o.GIF:o.VIDEO;case n.AUDIO:return o.AUDIO;case n.PTT:return o.PTT;case n.DOCUMENT:return o.DOCUMENT;case n.STICKER:return o.STICKER;case n.PRODUCT:return o.PRODUCT;default:throw new Error("msg is not a media msg: ".concat(e,", isGif=").concat(String(t)))}},t.MEDIA_TYPE_VALUES=t.MEDIA_TYPES_INVERTED=t.default=void 0;var i=r(a(98346)),s=r(a(50935)),{MSG_TYPE:n}=s.default,o=Object.freeze({AUDIO:"audio",DOCUMENT:"document",GIF:"gif",IMAGE:"image",PPIC:"ppic",PRODUCT:"product",PTT:"ptt",STICKER:"sticker",VIDEO:"video",TEMPLATE:"template",THUMBNAIL_DOCUMENT:"thumbnail-document",THUMBNAIL_IMAGE:"thumbnail-image",HISTORY_SYNC:"md-msg-hist",MD_APP_STATE:"md-app-state",PRODUCT_CATALOG_IMAGE:"product-catalog-image"}),l=o;t.default=l;var d=Object.freeze({audio:"AUDIO",document:"DOCUMENT",gif:"GIF",image:"IMAGE",ppic:"PPIC",product:"PRODUCT",ptt:"PTT",sticker:"STICKER",video:"VIDEO",template:"TEMPLATE","thumbnail-document":"THUMBNAIL_DOCUMENT","thumbnail-image":"THUMBNAIL_IMAGE","md-msg-hist":"HISTORY_SYNC","md-app-state":"MD_APP_STATE","product-catalog-image":"PRODUCT_CATALOG_IMAGE"});t.MEDIA_TYPES_INVERTED=d;var u=(0,i.default)(o);t.MEDIA_TYPE_VALUES=u},39417:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={DOWNLOAD:"DOWNLOAD",UPLOAD:"UPLOAD"};t.default=a},57430:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.default)(e)};var i=r(a(40571))},40682:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){var r=16*Math.ceil(e/16),n=t.slice(0,i.IV_LENGTH+r);return new s.default(a).sign(n,i.HMAC_LENGTH)};var i=a(43768),s=r(a(36398))},43768:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=e instanceof ArrayBuffer?e.byteLength:e.buffer.byteLength,r=new n.default(t),l=Math.ceil((a-16)/o),d=(0,i.default)(l,(t=>{var a=t*o,i=e.slice(a,a+16+o);return r.sign(i,10)}));return Promise.all(d).then((e=>(0,s.default)(...e)))},t.HMAC_LENGTH=t.IV_LENGTH=void 0;var i=r(a(61258)),s=r(a(50846)),n=r(a(36398)),o=65536;t.IV_LENGTH=16;t.HMAC_LENGTH=10},6698:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return c.apply(this,arguments)};i(a(19976));var s=i(a(52954)),n=a(60339),o=r(a(96452)),l=r(a(55273)),d=i(a(62808)),u=i(a(81135));function c(){return(c=(0,s.default)((function*(e,t){var a,r=h(e);try{a=(0,n.decodeB64)(t)}catch(e){}if(!t||!r||!a)throw new o.MediaEncryptionError("createKeys fail: !!mediakey: ".concat(!!t," info: ").concat(r," type: ").concat(e));return l.extractAndExpand(a,r,112).then((e=>{if(!e||e.byteLength<112)throw new o.MediaEncryptionError("computeMediaKeys: hkdf error");return{iv:e.slice(0,16),encKey:e.slice(16,48),macKey:e.slice(48,80),refKey:e.slice(80,112)}}))}))).apply(this,arguments)}function h(e){return(0,d.default)(e,{[u.default.AUDIO]:()=>"WhatsApp Audio Keys",[u.default.DOCUMENT]:()=>"WhatsApp Document Keys",[u.default.GIF]:()=>"WhatsApp Video Keys",[u.default.IMAGE]:()=>"WhatsApp Image Keys",[u.default.PPIC]:()=>{throw new Error("Cannot create media keys for profile pics")},[u.default.PRODUCT]:()=>"WhatsApp Image Keys",[u.default.PTT]:()=>"WhatsApp Audio Keys",[u.default.STICKER]:()=>"WhatsApp Image Keys",[u.default.VIDEO]:()=>"WhatsApp Video Keys",[u.default.THUMBNAIL_DOCUMENT]:()=>"WhatsApp Document Thumbnail Keys",[u.default.THUMBNAIL_IMAGE]:()=>"WhatsApp Image Thumbnail Keys",[u.default.TEMPLATE]:()=>{throw new Error("Cannot create media keys for template")},[u.default.HISTORY_SYNC]:()=>"WhatsApp History Keys",[u.default.MD_APP_STATE]:()=>"WhatsApp App State Keys",[u.default.PRODUCT_CATALOG_IMAGE]:()=>{throw new Error("Cannot create media keys for product catalog image")}})}},46822:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({mediaKeys:e,ciphertextHmac:t,expectedPlaintextHash:a,debugString:r}){return Promise.resolve().then((()=>{if(__LOG__(2)(m(),r),t.byteLength<10)throw new u.MediaDecryptionError("ciphertext too short: ".concat(t.byteLength));var i=new h.default.WebcCryptoMedia({webcCryptoType:h.default.WEBC_CRYPTO_TYPE_CODE.DECRYPT,webcCryptoLibrary:h.default.WEBC_CRYPTO_LIBRARY_CODE.WEBCRYPTO,webcCryptoFileSize:t.byteLength}),{iv:_,encKey:v,macKey:g}=e,E=(0,o.default)(Uint8Array,t),y=(0,l.default)(Uint8Array,[new Uint8Array(_),E.slice(0,-10)]);return new c.default(g).sign(y,10).then((e=>{var t=E.buffer.slice(-10);if(!(0,d.default)(e,t))throw new u.MediaDecryptionError("decryptMedia: hmac mismatch");return(0,s.aesCbcDecrypt)(v,y)})).then((e=>null==a?e:(0,n.default)(e).then((t=>{if(t!==a)throw new u.MediaDecryptionError("decryptMedia: plaintext hash mismatch");return e})))).then((e=>(__LOG__(2)(p(),r),i.markWebcCryptoElapsedT(),i.commit(),e))).catch((e=>{if(__LOG__(3)(f(),r),e instanceof u.MediaDecryptionError)throw e;throw new u.MediaDecryptionError("decryption error: ".concat(String(e),"; stack: ").concat(e.stack))}))}))};var i=r(a(19976)),s=a(9729),n=r(a(57430)),o=r(a(77638)),l=r(a(66190)),d=r(a(38307)),u=a(96452),c=r(a(36398)),h=r(a(40210));function f(){var e=(0,i.default)(["decryptMedia: [","] error"]);return f=function(){return e},e}function p(){var e=(0,i.default)(["decryptMedia: [","] success"]);return p=function(){return e},e}function m(){var e=(0,i.default)(["decryptMedia: [","] start"]);return m=function(){return e},e}},495:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({mediaKey:e,plaintext:t,type:a}){return new Promise(((r,i)=>{if(e.slice(0,10),__LOG__(2)(g()),!a)throw new c.MediaEncryptionError('encryptMedia: missing "type"');if(!e)throw new c.MediaEncryptionError('encryptMedia: missing "mediaKey"');var E=new p.default.WebcCryptoMedia({webcCryptoType:p.default.WEBC_CRYPTO_TYPE_CODE.ENCRYPT,webcCryptoLibrary:p.default.WEBC_CRYPTO_LIBRARY_CODE.WEBCRYPTO});(0,u.default)(a,e).then((({iv:e,encKey:r,macKey:i})=>(0,s.aesCbcEncrypt)(r,t,e).then((r=>{var s=r.slice(e.byteLength);return new h.default(i).sign(r,10).then((e=>{var u=Promise.resolve();if(a===f.default.VIDEO||a===f.default.AUDIO){var c=(0,d.default)(r,e);u=(0,l.default)(c,i)}var h=Promise.resolve();if(a===f.default.STICKER){var{firstFrameLength:p}=(0,m.default)(t);if(null!=p){var _=(0,d.default)(r,e);h=(0,o.default)(p,_,i)}}var v=(0,d.default)(s,e);return Promise.props({ciphertextHmac:v,hash:(0,n.default)(v),sidecar:u,firstFrameSidecar:h})}))})))).then((e=>{E.webcCryptoFileSize=e.ciphertextHmac.byteLength,E.markWebcCryptoElapsedT(),E.commit(),__LOG__(2)(v()),r(e)})).catch((e=>{if(__LOG__(3)(_()),e instanceof c.MediaEncryptionError)throw e;throw new c.MediaEncryptionError("encryption error: ".concat(String(e),"; stack: ").concat(e.stack))})).catch(i)}))};var i=r(a(19976)),s=a(9729),n=r(a(57430)),o=r(a(40682)),l=r(a(43768)),d=r(a(50846)),u=r(a(6698)),c=a(96452),h=r(a(36398)),f=r(a(81135)),p=r(a(40210)),m=r(a(38579));function _(){var e=(0,i.default)(["encryptMedia: error"]);return _=function(){return e},e}function v(){var e=(0,i.default)(["encryptMedia: success"]);return v=function(){return e},e}function g(){var e=(0,i.default)(["encryptMedia: start"]);return g=function(){return e},e}},64724:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.getProgressiveMediaCacheKey=S,t.default=t.EOI_TAG=void 0;var i=r(a(52954)),s=r(a(19976)),n=a(29351),o=a(9729),l=r(a(66190)),d=a(38174),u=r(a(38307)),c=r(a(36398)),h=r(a(54146));function f(){var e=(0,s.default)(["Assertion failed! ",""]);return f=function(){return e},e}function p(){var e=(0,s.default)(["Assertion failed! ",""]);return p=function(){return e},e}function m(){var e=(0,s.default)(["ImageStreamer:handleProgress error: ",""]);return m=function(){return e},e}function _(){var e=(0,s.default)(["ImageStreamer: [","] Generated progressive image using "," chunks of "," total"]);return _=function(){return e},e}function v(){var e=(0,s.default)(["ImageStreamer: [","] Successfully decrypted chunk "," of "," total"]);return v=function(){return e},e}class g extends((0,n.customError)("ChunkValidationError")){constructor(e){super("Chunk ".concat(e," does not match sidecar"))}}var E=new Uint8Array([2,2]),y=new Uint8Array([255,217]);t.EOI_TAG=y;function S(e,t){return"".concat(e,"-progressive-").concat(t)}t.default=class{constructor(e){this._alignedScanLengths=[],this._increasingScanLengths=[],this._lastDecryptedChunk=0,this._downloadedBytes=new ArrayBuffer(0);var{cryptoKeys:t,scanLengths:a,scansSidecar:r,filehash:i,mimetype:s,debugString:n,onProgressiveUpdate:o}=e;this._cryptoKeys=t,this._scanLengths=a,this._scansSideCar=r,this._filehash=i,this._mimetype=s,this._nextChunkIV=this._cryptoKeys.iv,this._decryptedChunks=new Array(a.length),this._onProgressiveUpdate=o,this._debugString=n}_validateSidecar(e,t){0===t&&(this._nextChunkIV=this._cryptoKeys.iv);var{macKey:a}=this._cryptoKeys,r=this._scansSideCar.slice(10*t,10*t+10),i=this._nextChunkIV;this._nextChunkIV=e.slice(-16);var s=(0,l.default)(Uint8Array,[new Uint8Array(i),new Uint8Array(e)]);return new c.default(a).sign(s,10).then((e=>(0,u.default)(e,r)?Promise.resolve():Promise.reject(new g(t))))}_cleanupCipherTextAndIV(e,t){var a,r=e,i=r.byteLength%16==0;if(0===t)a=this._cryptoKeys.iv;else{var s=this._increasingScanLengths[t-1];a=this._downloadedBytes.slice(s-16,s)}return i||(r=r.slice(0,r.byteLength-10)),i?function(e,t){var{encKey:a}=t;return(0,o.aesCbcEncrypt)(a,E,new Uint8Array(e.slice(-16))).then((e=>e.slice(-16)))}(r,this._cryptoKeys).then((e=>({cipherText:r=(0,l.default)(Uint8Array,[new Uint8Array(r),new Uint8Array(e)]),iv:a}))):Promise.resolve({cipherText:r,iv:a})}_getLastFullyLoadedChunkIndex(e){for(var t=0,a=0;a<this._alignedScanLengths.length;a++)if(e<(t+=this._alignedScanLengths[a]))return a;return this._alignedScanLengths.length}_handleChunk(e,t){return this._validateSidecar(e,t).then((()=>this._cleanupCipherTextAndIV(e,t))).then((({iv:e,cipherText:t})=>(0,o.aesCbcDecrypt)(this._cryptoKeys.encKey,(0,l.default)(Uint8Array,[new Uint8Array(e),new Uint8Array(t)])))).then((e=>(0,d.removeEncryptedPadding)(e,E.buffer))).then((e=>(__LOG__(2)(v(),this._debugString,t,this._scanLengths.length),e)))}_generateBlobFromFullyLoadedChunks(e){return Promise.all(this._decryptedChunks.slice(0,e)).then((t=>{var a,r=this._scanLengths.slice(0,e).reduce(((e,t)=>e+t),0),i=(0,l.default)(Uint8Array,t.map((e=>new Uint8Array(e)))).slice(0,r),s=(0,u.default)(y.buffer,i.slice(-y.length).buffer)?i:(0,l.default)(Uint8Array,[i,y]),n=[s],o=this._mimetype?new Blob(n,{type:this._mimetype}):new Blob(n),d=S(this._filehash,e);return h.default.put(d,o),__LOG__(2)(_(),this._debugString,e,this._scanLengths.length),null===(a=this._onProgressiveUpdate)||void 0===a||a.call(this,e),this._lastDecryptedChunk=e,s.buffer}))}_decryptFullyLoadedChunks(e,t){var a=this;return(0,i.default)((function*(){for(var r=0;r<t;r++)if(!a._decryptedChunks[r]){var i=0===r?0:a._increasingScanLengths[r-1],s=e.slice(i,i+a._alignedScanLengths[r]);yield Promise.all(a._decryptedChunks),a._decryptedChunks[r]||(a._decryptedChunks[r]=a._handleChunk(s,r))}}))()}handleProgress(e,t){if(!this._alignedScanLengths.length){this._alignedScanLengths=(0,d.alignChunkLengthsToMultipleOfAesBlockSize)(this._scanLengths,e);for(var a=0;a<this._alignedScanLengths.length;a++){var r=this._alignedScanLengths[a],i=0===a?r:this._increasingScanLengths[a-1]+r;this._increasingScanLengths.push(i)}}var s,n,o="string"==typeof t?t.length:t.byteLength,l=this._getLastFullyLoadedChunkIndex(o);return l<=this._lastDecryptedChunk?Promise.resolve(null):(this._downloadedBytes="string"==typeof t?(s=t,(n=new Uint8Array(s.length)).set([...s].map((e=>e.codePointAt(0)))),n.buffer):t,this._decryptFullyLoadedChunks(this._downloadedBytes,l).then((()=>this._generateBlobFromFullyLoadedChunks(l))).catch((e=>{__LOG__(3)(m(),e);var t="".concat(e.message,", [").concat(this._debugString,"]")+"scanLengths length: ".concat(this._scanLengths.length,", scansSidecar byteLength: ").concat(this._scansSideCar.byteLength,". ")+"Stack: ".concat(e.stack);e instanceof g?(__LOG__(4,void 0,new Error,!0)(p(),t),SEND_LOGS("ImageStreamer:chunk validation error")):(__LOG__(4,void 0,new Error,!0)(f(),t),SEND_LOGS("ImageStreamer:handleProgress error"))})))}}},96598:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=new Uint8Array(32);return self.crypto.getRandomValues(e),{key:(0,i.encodeB64)(e),timestamp:s.default.globalUnixTime()}};var i=a(60339),s=r(a(19899))},1616:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DownloadManager=void 0;var i=r(a(70417)),s=r(a(19976)),n=r(a(52954)),o=r(a(12489)),l=r(a(43856)),d=r(a(1867)),u=r(a(6698)),c=a(38174),h=r(a(46822)),f=a(50261),p=r(a(64724)),m=a(66925),_=a(24008),v=r(a(81135)),g=a(96645),E=a(82982),y=r(a(10111)),S=r(a(40210)),C=r(a(62962)),T=a(86809),M=r(a(61941)),b=r(a(66823)),P=r(a(90382));function A(){var e=(0,s.default)(["downloadManager.rmr: [","] error ","\n",""],["downloadManager.rmr: [","] error ","\\n",""]);return A=function(){return e},e}function I(){var e=(0,s.default)(["downloadManager.rmr: [","] error MediaNotOnPhone\n",""],["downloadManager.rmr: [","] error MediaNotOnPhone\\n",""]);return I=function(){return e},e}function O(){var e=(0,s.default)(["downloadManager.rmr: [","] status ",""]);return O=function(){return e},e}function N(){var e=(0,s.default)(["downloadManager.rmr: [","] start"]);return N=function(){return e},e}function w(){var e=(0,s.default)(["downloadManager.download: [","] error\n",""],["downloadManager.download: [","] error\\n",""]);return w=function(){return e},e}function D(){var e=(0,s.default)(["downloadManager.download: [","] expected error\n",""],["downloadManager.download: [","] expected error\\n",""]);return D=function(){return e},e}function R(){var e=(0,s.default)(["downloadManager.download: [","] success"]);return R=function(){return e},e}function L(){var e=(0,s.default)(["downloadManager.download: [","] start"]);return L=function(){return e},e}function k(){var e=(0,s.default)(["downloadManager.asyncCache.set error:\n",""],["downloadManager.asyncCache.set error:\\n",""]);return k=function(){return e},e}function x(){var e=(0,s.default)(["downloadManager.asyncCache.get error:\n",""],["downloadManager.asyncCache.get error:\\n",""]);return x=function(){return e},e}function F(e){var t,a,r=null===(t=e.progressiveJpegOpts)||void 0===t?void 0:t.scanCount,i=null===(a=e.progressiveJpegOpts)||void 0===a?void 0:a.scanLengths;return null!=r&&i?"".concat(e.filehash,"-").concat(r,"/").concat(i.length,"-scans"):e.filehash}var G=1,U=2;class B{constructor(){this.preloader=new d.default(10,{thumbnail:4}),this.downloadAndDecrypt=(0,l.default)((e=>F(e)),new j,(e=>e.isPreload?this.preloader.enqueue((()=>V(e)),{priority:e.type===v.default.THUMBNAIL_DOCUMENT?U:G,group:"thumbnail",signal:e.signal}):V(e))),this.rmr=(0,y.default)((e=>e.mediaObject.filehash||""),W),this.checkExistence=(0,y.default)((e=>e.encFilehash),Y)}}t.DownloadManager=B;class j{get(e,t){return(0,n.default)((function*(){if(!(0,E.shouldUseLruMediaStore)(t.type))return null;try{return yield P.default.get(F(t))}catch(e){return __LOG__(3,!0)(x(),(0,b.default)(e)),null}}))()}set(e,t,a){return(0,n.default)((function*(){if((0,E.shouldUseLruMediaStore)(a.type))try{yield P.default.put(F(a),t)}catch(e){__LOG__(3,!0)(k(),(0,b.default)(e))}}))()}}function V(){return H.apply(this,arguments)}function H(){return(H=(0,n.default)((function*(e){var t,a,r=new S.default.MediaDownload2({mediaId:(0,m.generateMediaEventId)(),connectionType:S.default.CONNECTION_TYPE.HOSTNAME,overallMediaType:(0,m.getMetricMediaType)(e.type),overallMmsVersion:4,networkStack:S.default.NETWORK_STACK_TYPE.NATIVE,overallDownloadMode:S.default.MEDIA_DOWNLOAD_MODE_TYPE.FULL,overallAttemptCount:e.userDownloadAttemptCount,overallDownloadOrigin:e.downloadOrigin,overallBackendStore:null!==(t=(0,m.getMetricBackendStore)(e.directPath))&&void 0!==t?t:void 0}),{directPath:i,encFilehash:s,filehash:n,mediaKey:l,onDecryptStart:d,type:_,mode:v,progressiveJpegOpts:g}=e,E=e.signal||(new o.default).signal,y=n.slice(0,10);__LOG__(2)(L(),y);try{var T,P,A,I=null==g?void 0:g.scanCount,O=null!=I&&I===(null==g||null===(T=g.scanLengths)||void 0===T?void 0:T.length)?null:I,[N,k,x]=yield Promise.all([(0,u.default)(_,l).then((e=>{if(g){var{scanLengths:t,scansSidecar:a,mimetype:r,onProgressiveUpdate:i}=g;A=new p.default({cryptoKeys:e,scanLengths:t,scansSidecar:a,mimetype:r,filehash:n,debugString:y,onProgressiveUpdate:i})}return e})),z({scanCount:O,directPath:i,encFilehash:s,type:_,signal:E}),C.default.download({directPath:i,encFilehash:s,type:_,signal:E,mode:v,byteRange:g&&null!=O?{start:0,end:(0,c.alignChunkLengthsToMultipleOfAesBlockSize)(g.scanLengths).slice(0,O).reduce(((e,t)=>e+t),0)}:null,onResponseText:null==O?(e,t)=>{var a;null===(a=A)||void 0===a||a.handleProgress(e.total,t)}:null,onDownloadHostFound:({hostName:e,hostClass:t,failCount:a})=>{r.set({overallDomain:e,overallConnectionClass:t,overallRetryCount:a})},onDownloadAttemptSuccess:e=>{r.set({overallT:e})},onDownloadAttemptError:({err:e,overallT:t,failCount:a})=>{var i=new S.default.MediaDownload2(r);i.set({mediaId:(0,m.generateMediaEventId)(),overallDownloadResult:(0,m.getMetricDownloadErrorResultType)(e),overallIsFinal:!1,overallT:t,overallRetryCount:a});var s=(0,m.getStatusCode)(e);null!=s&&(r.downloadHttpCode=s),r.markOverallCumT(),i.commit(),(0,m.logErrorUnknownDetails)(i,e)},debugString:y})]);d&&d(),a=x.byteLength,r.set({overallMediaSize:a,overallDownloadResult:S.default.MEDIA_DOWNLOAD_RESULT_TYPE.OK,overallIsFinal:!0,downloadHttpCode:200}),r.markOverallCumT(),r.commit();var F=null==O?yield(0,h.default)({mediaKeys:N,ciphertextHmac:x,expectedPlaintextHash:n,debugString:y}):(0,M.default)(yield null===(P=A)||void 0===P?void 0:P.handleProgress(k,x),"yield imageStreamer?.handleProgress(encryptedFileSize, ciphertextHmac)");return __LOG__(2)(R(),y),F}catch(e){throw(e=>{r.set({overallDownloadResult:(0,m.getMetricDownloadErrorResultType)(e),overallIsFinal:!0});var t=(0,m.getStatusCode)(e);null!=t&&(r.downloadHttpCode=t),r.markOverallCumT(),r.commit(),(0,m.logErrorUnknownDetails)(r,e)})(e),e instanceof f.MediaNotFoundError?__LOG__(2,!0)(D(),y,(0,b.default)(e)):__LOG__(3,!0)(w(),y,(0,b.default)(e)),e}}))).apply(this,arguments)}function W(){return K.apply(this,arguments)}function K(){return(K=(0,n.default)((function*(e){var t,a,{mediaObject:r}=e,s=null!==(t=null===(a=r.filehash)||void 0===a?void 0:a.slice(0,10))&&void 0!==t?t:"";r.filehash,r.type,__LOG__(2)(N(),s),r.consolidate({downloadStage:g.DOWNLOAD_STAGE.REUPLOADING});var n=performance.now(),o=new S.default.WebcMediaRmr((0,i.default)((0,i.default)({},e.rmrData),{},{webcRmrReason:e.rmrReason})),l=(0,T.getEffectiveNetworkType)();null!=l&&(o.webcBrowserNetworkType=l),r.type&&(o.messageMediaType=(0,_.webMediaTypeToWamMediaType)(r.type)),null!=r.size&&(o.webcMediaSize=r.size);try{var d=yield r.rmr({onMsgSelect:function(e){null==o.webcChatType&&e.chat&&(o.webcChatType=e.chat.getWebcChatType()),null==o.webcMessageT&&(o.webcMessageT=e.t),o.messageMediaType=e.getWamMediaType()}});if(o.webcRmrStatusCode=d,__LOG__(2)(O(),s,d),404===d)throw new f.MediaNotOnPhone;if(200!==d)throw new f.ServerStatusCodeError(d)}catch(e){throw o.webcMediaRmrError=!0,e instanceof f.MediaNotOnPhone?(__LOG__(2,!0)(I(),s,(0,b.default)(e)),e):(__LOG__(3,!0)(A(),s,e.status||e.message,e.stack),new f.MediaNeedsReupload)}finally{o.webcMediaRmrT=Math.ceil(performance.now()-n),o.commit()}}))).apply(this,arguments)}function Y(){return q.apply(this,arguments)}function q(){return(q=(0,n.default)((function*(e){var{directPath:t,encFilehash:a,signal:r,type:i}=e;yield C.default.checkExistence({directPath:t,encFilehash:a,type:i,signal:r||(new o.default).signal})}))).apply(this,arguments)}function z(e){var{scanCount:t,directPath:a,encFilehash:r,type:i,signal:s}=e;return null==t?Promise.resolve(null):C.default.getEncryptedMediaSize({directPath:(0,M.default)(a,"directPath is required for partial downloads"),encFilehash:(0,M.default)(r,"encFilehash is required for partial downloads"),signal:s,type:i})}var Q=new B;t.default=Q},50261:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"LogoutDrop",{enumerable:!0,get:function(){return r.LogoutDrop}}),Object.defineProperty(t,"WebdDrop",{enumerable:!0,get:function(){return r.WebdDrop}}),Object.defineProperty(t,"ServerStatusCodeError",{enumerable:!0,get:function(){return r.ServerStatusCodeError}}),Object.defineProperty(t,"AbortError",{enumerable:!0,get:function(){return i.AbortError}}),Object.defineProperty(t,"HttpNetworkError",{enumerable:!0,get:function(){return i.HttpNetworkError}}),Object.defineProperty(t,"HttpStatusCodeError",{enumerable:!0,get:function(){return i.HttpStatusCodeError}}),Object.defineProperty(t,"MMSForbiddenError",{enumerable:!0,get:function(){return i.MMSForbiddenError}}),Object.defineProperty(t,"MMSUnauthorizedError",{enumerable:!0,get:function(){return i.MMSUnauthorizedError}}),Object.defineProperty(t,"MMSThrottleError",{enumerable:!0,get:function(){return i.MMSThrottleError}}),Object.defineProperty(t,"MediaNotFoundError",{enumerable:!0,get:function(){return i.MediaNotFoundError}}),Object.defineProperty(t,"MediaDecryptionError",{enumerable:!0,get:function(){return s.MediaDecryptionError}}),Object.defineProperty(t,"MediaNeedsReupload",{enumerable:!0,get:function(){return s.MediaNeedsReupload}}),Object.defineProperty(t,"NoMediaHostsError",{enumerable:!0,get:function(){return n.NoMediaHostsError}}),t.MediaNotOnPhone=void 0;var r=a(19741),i=a(85699),s=a(96452),n=a(25172);class o extends r.ServerStatusCodeError{constructor(){super(404)}}t.MediaNotOnPhone=o},25172:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AbortError",{enumerable:!0,get:function(){return s.default}}),t.NoMediaHostsError=void 0;var i=a(29351),s=r(a(8701));class n extends((0,i.customError)("NoMediaHostsError")){}t.NoMediaHostsError=n},55288:(e,t,a)=>{"use strict";var r=a(93291);Object.defineProperty(t,"__esModule",{value:!0});var i={};Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s.default}});var s=r(a(23832));Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))}))},94221:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.HOST_TYPE=void 0;var r=a(81135),i=new Set(r.MEDIA_TYPE_VALUES),s=Object.freeze({PRIMARY:"primary",FALLBACK:"fallback"});t.HOST_TYPE=s;t.default=class{constructor(e){this.hostname=e.hostname,this.ips=e.ips||[],this.type=e.type,this.class=e.class;var{downloadBuckets:t,supportedDownloadTypes:a,supportedUploadTypes:r}=function(e){var t,a,r,s,n,o=e||[];for(var l of o){var d,u;if(l.download)for(var c of(r=null!==(d=r)&&void 0!==d?d:new Set,l.download))r.add(c);if(l.upload)for(var h of(s=null!==(u=s)&&void 0!==u?u:new Set,l.upload))s.add(h);l.downloadBuckets&&(n=l.downloadBuckets.map((e=>parseInt(e,10))))}return{supportedDownloadTypes:null!==(t=r)&&void 0!==t?t:i,supportedUploadTypes:null!==(a=s)&&void 0!==a?a:i,downloadBuckets:n}}(e.rules);this.downloadBuckets=t,this._supportedDownloadTypes=a,this._supportedUploadTypes=r}isFallback(){return this.type===s.FALLBACK}supportsDownloadMediaType(e){return this._supportedDownloadTypes.has(e)}supportsUploadMediaType(e){var t="product-catalog-image"===e?"product":e;return this._supportedUploadTypes.has(t)}}},23832:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FETCH_STATE=void 0;var i=r(a(22220)),s=r(a(19976)),n=r(a(52954)),o=r(a(12489)),l=a(8701),d=a(25172),u=r(a(94221)),c=r(a(10111)),h=r(a(67015)),f=a(11252),p=r(a(94203));function m(){var e=(0,s.default)(["Assertion failed!"]);return m=function(){return e},e}function _(){var e=(0,s.default)(["mediaHosts.sendQueryMediaConn error: ",""]);return _=function(){return e},e}function v(){var e=(0,s.default)(["mediaHosts.sendQueryMediaConn aborted"]);return v=function(){return e},e}t.FETCH_STATE={PENDING:"PENDING",SUCCESS:"SUCCESS",ERROR:"ERROR"};var g=new class{constructor(){var e=this;this._fetch=(0,c.default)((()=>"all"),function(){var t=(0,n.default)((function*({signal:t}){try{var a=yield(0,f.sendQueryMediaConn)(t);e._err=null,e._data={auth:a.auth,authExpirationTime:new Date(a.queryStartTime.getTime()+a.authTTL),authTTL:a.authTTL,hosts:a.hosts.map((e=>new u.default(e))),hostsRefreshTime:new Date(a.queryStartTime.getTime()+a.ttl),queryStartTime:a.queryStartTime,maxBuckets:a.maxBuckets}}catch(t){if(e._data=null,e._err=t,t.name===l.ABORT_ERROR)return void __LOG__(2)(v());__LOG__(3,!0)(_(),function(e){var{name:t,message:a,stack:r}=e,s=(0,i.default)(e,["name","message","stack"]),n=(0,h.default)(e),o=n.slice(n.indexOf("\n")+1),l=0===Object.keys(s).length?"":" "+JSON.stringify(s,((e,t)=>e&&"object"==typeof t?String(t):t));return"".concat(e.name||"Error",": ").concat(e.message).concat(l,"\n").concat(o)}(t)),__LOG__(4,void 0,new Error,!0)(m()),SEND_LOGS("Error fetching mms hosts")}}));return function(){return t.apply(this,arguments)}}()),this._reset()}getHostsInfo({directPath:e,encFilehash:t,operation:a,type:r,signal:i}){var s=this;return(0,n.default)((function*(){var n={signal:i||(new o.default).signal};if(yield s._refreshIfStale(n),!s._data)throw new d.NoMediaHostsError("no fetched data");var{auth:l,hosts:u,maxBuckets:c}=s._data,{selectedHost:h,fallbackHost:f}=(0,p.default)({directPath:e,encFilehash:t,hosts:u,operation:a,type:r,maxBuckets:c});if(!h)throw new d.NoMediaHostsError("no selected host");return{auth:l,selectedHost:h,fallbackHost:f}}))()}_isExpiredOrMissing(){if(!this._data)return!0;var e=this._data;return new Date>=e.authExpirationTime}_needsRefresh(){if(!this._data)return!0;var e=this._data;if(new Date>=e.hostsRefreshTime)return!0;var{authTTL:t,queryStartTime:a}=e,r=Math.floor(.8*t),i=new Date(a.getTime()+r);return new Date>=i}_refreshIfStale(e){var t=this;return(0,n.default)((function*(){return t._isExpiredOrMissing()?(t._reset(),yield t._fetch(e),!0):!!t._needsRefresh()&&(t._fetch(e),!1)}))()}_reset(){this._data=null,this._err=null}};t.default=g},94203:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({encFilehash:e,directPath:t,hosts:a,operation:r,type:l,maxBuckets:d}){var u,c,h;if(!a.length)return{selectedHost:null,fallbackHost:null};if(r===o.DOWNLOAD){var f,p=t?t.match(/&_nc_hot=([0-9]+)/):null,m=parseInt(p&&p[1],10),_=isNaN(m)?null:Date.now()-m,{mmsHotContentTimespan:v,mmsVCacheAggregationEnabled:g}=n.default;null!=v&&v>0&&(l===s.default.STICKER||null!=_&&_<=v)?f=1:g&&null!=d&&(f=(0,i.default)(e,d)+100);var E=function(e){var t=new Map;return e.forEach((e=>{var a;null===(a=e.downloadBuckets)||void 0===a||a.forEach((a=>{t.set(a,e)}))})),t}(a),y=null==f?null:E.get(f),S=E.get(0);(null==y?void 0:y.supportsDownloadMediaType(l))?h=y:(null==S?void 0:S.supportsDownloadMediaType(l))&&(h=S)}var C=a.find((e=>e.isFallback()));return h=null!==(u=h)&&void 0!==u?u:a.find((e=>r===o.UPLOAD?e.supportsUploadMediaType(l):e.supportsDownloadMediaType(l))),{selectedHost:null!==(c=h)&&void 0!==c?c:null,fallbackHost:null!=C?C:null}},t.OPERATIONS=void 0;var i=r(a(91612)),s=r(a(81135)),n=r(a(72424)),o={DOWNLOAD:"DOWNLOAD",UPLOAD:"UPLOAD"};t.OPERATIONS=o},85699:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AbortError",{enumerable:!0,get:function(){return r.AbortError}}),Object.defineProperty(t,"HttpNetworkError",{enumerable:!0,get:function(){return r.HttpNetworkError}}),Object.defineProperty(t,"HttpInvalidResponseError",{enumerable:!0,get:function(){return r.HttpInvalidResponseError}}),Object.defineProperty(t,"MmsDownloadFilehashMismatchError",{enumerable:!0,get:function(){return r.MmsDownloadFilehashMismatchError}}),Object.defineProperty(t,"HttpStatusCodeError",{enumerable:!0,get:function(){return r.HttpStatusCodeError}}),Object.defineProperty(t,"NoMediaHostsError",{enumerable:!0,get:function(){return i.NoMediaHostsError}}),t.MMSThrottleError=t.MMSForbiddenError=t.MMSUnauthorizedError=t.MediaInvalidError=t.MediaTooLargeError=t.MediaNotFoundError=void 0;var r=a(37755),i=a(25172);class s extends r.HttpStatusCodeError{constructor(e,t){super(404,e,t),this.name="MediaNotFoundError"}}t.MediaNotFoundError=s;class n extends r.HttpStatusCodeError{constructor(e,t){super(413,e,t),this.name="MediaTooLargeError"}}t.MediaTooLargeError=n;class o extends r.HttpStatusCodeError{constructor(e,t){super(415,e,t),this.name="MediaInvalidError"}}t.MediaInvalidError=o;class l extends r.HttpStatusCodeError{constructor(e,t){super(401,e,t),this.name="MMSUnauthorizedError"}}t.MMSUnauthorizedError=l;class d extends r.HttpStatusCodeError{constructor(e,t){super(403,e,t),this.name="MMSForbiddenError"}}t.MMSForbiddenError=d;class u extends r.HttpStatusCodeError{constructor(e,t){super(507,e,t),this.name="MMSThrottleError"}}t.MMSThrottleError=u},42140:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({directPath:e,encFilehash:t,hostname:a,type:r,mode:i,byteRange:u}){return e?function({directPath:e,encFilehash:t,hostname:a,query:r}){var i=new URL(e,"https://".concat(a));if(i.hostname!==a)throw __LOG__(4,void 0,new Error,!0)(d(),i.hostname,a,e),SEND_LOGS("malicious directPath"),new Error("malicious directPath");var s=i.searchParams||new l.default(i.search);return s.set("hash",(0,o.default)(t)),Object.keys(r).forEach((e=>{var t=r[e];null!=t&&s.set(e,t)})),"https://".concat(i.host).concat(i.pathname,"?").concat(s.toString())}({encFilehash:t,hostname:a,directPath:e,query:{mode:i,bytestart:null==u?void 0:u.start.toString(),byteend:null==u?void 0:u.end.toString(),[n.MMS_URL_MEDIA_TYPE_SEARCH_PARAM]:r,[n.IS_MMS_URL_SEARCH_PARAM]:""}}):(0,s.default)({hostname:a,type:r,encFilehash:t,query:{mode:i,[n.IS_MMS_URL_SEARCH_PARAM]:""}})};var i=r(a(19976)),s=r(a(78053)),n=a(75328),o=r(a(76796)),l=r(a(99340));function d(){var e=(0,i.default)(["url.hostname: ",", hostname: ",", directPath: ",""]);return d=function(){return e},e}},78053:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({hostname:e,type:t,encFilehash:a,query:r}){var o=n[t],l=new URL("https://".concat(e).concat(o,"/").concat((0,i.default)(a))),d={};r&&Object.keys(r).forEach((e=>{null!=r[e]&&(d[e]=r[e])}));var u=new s.default(d).toString();u&&(u="?".concat(u));return"https://".concat(l.host).concat(l.pathname).concat(u)};var i=r(a(76796)),s=r(a(99340)),n={audio:"/mms/audio",document:"/mms/document",gif:"/mms/gif",image:"/mms/image",ppic:"/pps/photo",product:"/mms/image",ptt:"/mms/ptt",sticker:"/mms/sticker","thumbnail-document":"/mms/thumbnail-document",video:"/mms/video","md-app-state":"/mms/md-app-state","product-catalog-image":"/product/image"}},25608:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({auth:e,encFilehash:t,hostname:a,query:r,type:o}){var l=(0,i.default)({auth:e,token:(0,n.default)(t)},r);return(0,s.default)({encFilehash:t,hostname:a,type:o,query:l})};var i=r(a(70417)),s=r(a(78053)),n=r(a(76796))},62962:(e,t,a)=>{"use strict";var r=a(93291);Object.defineProperty(t,"__esModule",{value:!0});var i={};Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s.default}});var s=r(a(29203));Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))}))},321:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(e instanceof r.MMSThrottleError)return!1;return e instanceof r.NoMediaHostsError||e instanceof r.HttpNetworkError||e instanceof r.MMSUnauthorizedError||e instanceof r.HttpStatusCodeError&&e.status>=500};var r=a(85699)},97352:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.encFilehash,e.type,__LOG__(2)(h()),(0,o.default)(e).then((e=>{if("complete"!==e.resume)throw new n.MediaNotFoundError("mmsCheckIfUploadExists");if(!e.directPath)throw new n.HttpInvalidResponseError("mmsCheckIfUploadExists: missing directPath");if(!e.url)throw new n.HttpInvalidResponseError("mmsCheckIfUploadExists: missing url");return{directPath:e.directPath,url:e.url,handle:e.handle}})).then((e=>(__LOG__(2)(c()),e))).catch((e=>{throw e instanceof n.MediaNotFoundError?__LOG__(2)(u()):e.name===s.ABORT_ERROR?__LOG__(2)(d()):__LOG__(3)(l()),e}))};var i=r(a(19976)),s=a(8701),n=a(85699),o=r(a(60918));function l(){var e=(0,i.default)(["mmsCheckIfUploadExists: error"]);return l=function(){return e},e}function d(){var e=(0,i.default)(["mmsCheckIfUploadExists: canceled"]);return d=function(){return e},e}function u(){var e=(0,i.default)(["mmsCheckIfUploadExists: expected error"]);return u=function(){return e},e}function c(){var e=(0,i.default)(["mmsCheckIfUploadExists: success"]);return c=function(){return e},e}function h(){var e=(0,i.default)(["mmsCheckIfUploadExists: start"]);return h=function(){return e},e}},29203:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(52954)),s=r(a(70417)),n=r(a(19976)),o=a(8701),l=a(85699),d=r(a(82195)),u=r(a(321)),c=r(a(55288)),h=r(a(97352)),f=a(74477),p=r(a(70950)),m=r(a(99911)),_=r(a(39417));function v(){var e=(0,n.default)(["runMmsTaskWithBackoff: attempt #",""]);return v=function(){return e},e}function g(){var e=(0,n.default)(["runTaskWithBackoff: start"]);return g=function(){return e},e}function E(){var e=(0,n.default)(["mmsClient.download: [","] error"]);return E=function(){return e},e}function y(){var e=(0,n.default)(["mmsClient.download: [","] canceled"]);return y=function(){return e},e}function S(){var e=(0,n.default)(["mmsClient.download: [","] expected error"]);return S=function(){return e},e}function C(){var e=(0,n.default)(["mmsClient.download: [","] success"]);return C=function(){return e},e}function T(){var e=(0,n.default)(["mmsClient.download: [","] attempt #",""]);return T=function(){return e},e}function M(){var e=(0,n.default)(["mmsClient.download: [","] start"]);return M=function(){return e},e}function b(){var e=(0,n.default)(["mmsClient.upload: error"]);return b=function(){return e},e}function P(){var e=(0,n.default)(["mmsClient.upload: canceled"]);return P=function(){return e},e}function A(){var e=(0,n.default)(["mmsClient.upload: success"]);return A=function(){return e},e}function I(){var e=(0,n.default)(["mmsClient.upload: attempt #",""]);return I=function(){return e},e}function O(){var e=(0,n.default)(["mmsClient.upload: start"]);return O=function(){return e},e}function N(){var e=(0,n.default)(["mmsClient.checkIfUploadExists: error"]);return N=function(){return e},e}function w(){var e=(0,n.default)(["mmsClient.checkIfUploadExists: canceled"]);return w=function(){return e},e}function D(){var e=(0,n.default)(["mmsClient.checkIfUploadExists: expected error"]);return D=function(){return e},e}function R(){var e=(0,n.default)(["mmsClient.checkIfUploadExists: success"]);return R=function(){return e},e}function L(){var e=(0,n.default)(["mmsClient.checkIfUploadExists: attempt #",""]);return L=function(){return e},e}function k(){var e=(0,n.default)(["mmsClient.checkIfUploadExists: start"]);return k=function(){return e},e}var x={minTimeout:1e3,retries:3};function F(e,t){var{directPath:a,encFilehash:r,type:n,signal:o}=t;return __LOG__(2)(g()),(0,d.default)((0,s.default)((0,s.default)({},x),{},{signal:o}),function(){var t=(0,i.default)((function*(t,i){__LOG__(2)(v(),i+1);try{var s=yield function(){return G.apply(this,arguments)}({operation:_.default.DOWNLOAD,directPath:a,encFilehash:r,type:n,signal:o,failCount:i});return yield e(s)}catch(e){if((0,u.default)(e))return t(e);throw e}}));return function(){return t.apply(this,arguments)}}())}function G(){return(G=(0,i.default)((function*(e){var{failCount:t,operation:a,directPath:r,encFilehash:i,type:s,signal:n}=e,{selectedHost:o,fallbackHost:l}=yield c.default.getHostsInfo({operation:a,directPath:r,encFilehash:i,type:s,signal:n});return(t>=2&&l?l:o).hostname}))).apply(this,arguments)}var U=new class{checkIfUploadExists(e){var{encFilehash:t,signal:a,type:r}=e,i=!0;return e.encFilehash,e.type,__LOG__(2)(k()),(0,d.default)((0,s.default)((0,s.default)({},x),{},{signal:a}),((e,s)=>(__LOG__(2)(L(),s+1),m.default.waitIfOffline({signal:a}).then((()=>c.default.getHostsInfo({operation:_.default.UPLOAD,encFilehash:t,type:r,signal:a}).then((({auth:e,selectedHost:n,fallbackHost:o})=>{var l=s>=2&&!i&&o?o:n;return(0,h.default)({auth:e,encFilehash:t,hostname:l.hostname,type:r,signal:a,onProgress:()=>{i=!0}})})).catch((t=>{if((0,u.default)(t))return e(t);throw t}))))))).then((e=>(__LOG__(2)(R()),e))).catch((e=>{throw e instanceof l.MediaNotFoundError?__LOG__(2)(D()):e.name===o.ABORT_ERROR?__LOG__(2)(w()):__LOG__(3)(N()),e}))}upload(e){var{ciphertextHmac:t,encFilehash:a,type:r,signal:i,onUploadHostFound:n,onUploadAttemptSuccess:l,onUploadAttemptError:h}=e,f=!0;__LOG__(2)(O());var v=Date.now();return(0,d.default)((0,s.default)((0,s.default)({},x),{},{signal:i}),((e,s)=>(v=Date.now(),__LOG__(2)(I(),s+1),m.default.waitIfOffline({signal:i}).then((()=>c.default.getHostsInfo({operation:_.default.UPLOAD,encFilehash:a,type:r,signal:i}).then((({auth:e,selectedHost:o,fallbackHost:l})=>{var d=s>=2&&!f&&l?l:o;return n({hostName:d.hostname,hostClass:d.class,failCount:s}),(0,p.default)({auth:e,ciphertextHmac:t,hostname:d.hostname,encFilehash:a,type:r,signal:i,onProgress:()=>{f=!0}})})).catch((t=>{var a=(0,u.default)(t);if(!a||s===x.retries||h(t,Date.now()-v),a)return e(t);throw t}))))))).then((e=>(l(Date.now()-v),__LOG__(2)(A()),e))).catch((e=>{throw e.name===o.ABORT_ERROR?__LOG__(2)(P()):__LOG__(3)(b()),e}))}download(e){var{directPath:t,encFilehash:a,type:r,signal:i,mode:n,byteRange:h,debugString:p,onResponseText:m,onDownloadHostFound:v,onDownloadAttemptSuccess:g,onDownloadAttemptError:b}=e,P=!0;__LOG__(2)(M(),p);var A=Date.now();return(0,d.default)((0,s.default)((0,s.default)({},x),{},{signal:i}),((e,s)=>(A=Date.now(),__LOG__(2)(T(),p,s+1),c.default.getHostsInfo({operation:_.default.DOWNLOAD,directPath:t,encFilehash:a,type:r,signal:i}).then((({auth:e,selectedHost:o,fallbackHost:l})=>{var d=s>=2&&!P&&l?l:o;return v({hostName:d.hostname,hostClass:d.class,failCount:s}),(0,f.mms4Download)({directPath:t,encFilehash:a,hostname:d.hostname,type:r,signal:i,mode:n,byteRange:h,debugString:p,onProgress:()=>{P=!0},onResponseText:m})})).catch((t=>{var a=(0,u.default)(t);if(!a||s===x.retries||b({err:t,overallT:Date.now()-A,failCount:s}),a)return e(t);throw t}))))).then((e=>(g(Date.now()-A),__LOG__(2)(C(),p),e))).catch((e=>{throw e instanceof l.MediaNotFoundError?__LOG__(2)(S(),p):e.name===o.ABORT_ERROR?__LOG__(2)(y(),p):__LOG__(3)(E(),p),e}))}checkExistence(e){return F((t=>(0,f.mmsCheckExistence)((0,s.default)((0,s.default)({},e),{},{hostname:t}))),e)}getEncryptedMediaSize(e){return F((t=>(0,f.mmsGetEncryptedMediaSize)((0,s.default)((0,s.default)({},e),{},{hostname:t}))),e)}};t.default=U},74477:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=v,t.mms4Download=function({directPath:e,encFilehash:t,hostname:a,type:r,signal:i,onProgress:n,onResponseText:l,mode:d,byteRange:u,debugString:h}){var f=(0,c.default)({directPath:e,encFilehash:t,hostname:a,type:r,mode:d,byteRange:u});return v({url:f,signal:i,onProgress:n,onResponseText:l,ciphertextValidator:u?null:function(){var e=(0,s.default)((function*(e){return(yield(0,o.default)(e))===t}));return function(){return e.apply(this,arguments)}}(),debugString:h,debug:{encFilehash:t,type:r,url:f}})},t.mms3Download=function({signal:e,deprecatedMms3Url:t,debugString:a,onProgress:r,onResponseText:i}){return v({url:t,signal:e,onProgress:r,onResponseText:i,debugString:a,debug:{deprecatedMms3Url:t}})},t.mmsCheckExistence=function(){return E.apply(this,arguments)},t.mmsGetEncryptedMediaSize=function(){return y.apply(this,arguments)},t.validateMmsResponse=S;var i=r(a(19976)),s=r(a(52954)),n=a(8701),o=r(a(57430)),l=a(85699),d=a(96452),u=r(a(3757)),c=r(a(42140));function h(){var e=(0,i.default)(["mmsDownload: [","] error ",""]);return h=function(){return e},e}function f(){var e=(0,i.default)(["mmsDownload: [","] canceled"]);return f=function(){return e},e}function p(){var e=(0,i.default)(["mmsDownload: [","] error "," ",""]);return p=function(){return e},e}function m(){var e=(0,i.default)(["mmsDownload: [","] success"]);return m=function(){return e},e}function _(){var e=(0,i.default)(["mmsDownload: [","] start"]);return _=function(){return e},e}function v(){return g.apply(this,arguments)}function g(){return(g=(0,s.default)((function*({url:e,signal:t,onProgress:a,onResponseText:r,debug:i,debugString:s,ciphertextValidator:o}){__LOG__(2)(_(),s);try{var d=yield(0,u.default)(e,{signal:t,onProgress:a,onResponseText:r});yield S({response:d,functionName:"mmsDownload",url:e});var c=yield d.arrayBuffer();if(o&&!(yield o(c)))throw new l.MmsDownloadFilehashMismatchError({url:e});return __LOG__(2)(m(),s),c}catch(e){throw e instanceof l.MediaNotFoundError?__LOG__(2)(p(),s,e.name,e.message):e.name===n.ABORT_ERROR?__LOG__(2)(f(),s):__LOG__(3)(h(),s,String(e)),e}}))).apply(this,arguments)}function E(){return(E=(0,s.default)((function*(e){var{directPath:t,encFilehash:a,hostname:r,type:i,signal:s}=e;yield T({directPath:t,encFilehash:a,hostname:r,type:i,signal:s,functionName:"mmsCheckExistence"})}))).apply(this,arguments)}function y(){return(y=(0,s.default)((function*(e){var{directPath:t,encFilehash:a,hostname:r,type:i,signal:s}=e,n=(yield T({directPath:t,encFilehash:a,hostname:r,type:i,signal:s,functionName:"mmsGetEncryptedMediaSize"})).headers.get("content-length");if(!n)throw new d.UnableToGetContentLengthError;return parseInt(n,10)}))).apply(this,arguments)}function S(){return C.apply(this,arguments)}function C(){return(C=(0,s.default)((function*(e){var{response:t,url:a,functionName:r}=e;if(!t.ok)switch(t.status){case 401:throw new l.MMSUnauthorizedError(r,{url:a});case 403:if((yield t.text()).includes("URL signature expired"))throw new l.MediaNotFoundError(r,{url:a,status:t.status});throw new l.MMSForbiddenError(r,{url:a});case 404:case 410:throw new l.MediaNotFoundError(r,{url:a,status:t.status});case 507:throw new l.MMSThrottleError(r,{url:a});default:throw new l.HttpStatusCodeError(t.status,r,{url:a})}}))).apply(this,arguments)}function T(){return M.apply(this,arguments)}function M(){return(M=(0,s.default)((function*(e){var{directPath:t,encFilehash:a,hostname:r,type:i,signal:s,functionName:n}=e,o=(0,c.default)({directPath:t,encFilehash:a,hostname:r,type:i,mode:"auto"}),l=yield(0,u.default)(o,{method:"HEAD",signal:s});return yield S({response:l,functionName:n,url:o}),l}))).apply(this,arguments)}},60918:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{auth:t,encFilehash:a,hostname:r,signal:i,type:p,onProgress:m}=e,_=(0,l.default)({auth:t,encFilehash:a,hostname:r,query:{resume:1},type:p});return e.encFilehash,e.type,__LOG__(2)(f()),(0,o.default)(_,{method:"post",signal:i,onProgress:m}).then((e=>{if(e.ok)return e.json();switch(e.status){case 401:throw new n.MMSUnauthorizedError("mmsGetUploadProgress",{url:_});case 404:throw new n.MediaNotFoundError("mmsGetUploadProgress",{url:_});default:throw new n.HttpStatusCodeError(e.status,"mmsGetUploadProgress",{url:_})}})).then((e=>{if(!e.resume)throw new n.HttpInvalidResponseError("mmsGetUploadProgress: missing resume",{url:_});return{directPath:e.direct_path,resume:e.resume,url:e.url}})).then((e=>(__LOG__(2)(h()),e))).catch((e=>{throw e instanceof n.MediaNotFoundError?__LOG__(2)(c()):e.name===s.ABORT_ERROR?__LOG__(2)(u()):__LOG__(3)(d()),e}))};var i=r(a(19976)),s=a(8701),n=a(85699),o=r(a(3757)),l=r(a(25608));function d(){var e=(0,i.default)(["mmsGetUploadProgress: error"]);return d=function(){return e},e}function u(){var e=(0,i.default)(["mmsGetUploadProgress: canceled"]);return u=function(){return e},e}function c(){var e=(0,i.default)(["mmsGetUploadProgress: expected error"]);return c=function(){return e},e}function h(){var e=(0,i.default)(["mmsGetUploadProgress: success"]);return h=function(){return e},e}function f(){var e=(0,i.default)(["mmsGetUploadProgress: start"]);return f=function(){return e},e}},70950:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{auth:t,ciphertextHmac:a,encFilehash:r,hostname:i,type:f,signal:p,onProgress:m}=e,_=(0,l.default)({auth:t,encFilehash:r,hostname:i,type:f});return __LOG__(2)(h()),(0,o.default)(_,{method:"post",body:a,signal:p,onProgress:m}).then((e=>{if(!e.ok)switch(e.status){case 401:throw new n.MMSUnauthorizedError("mmsUpload",{url:_});case 413:throw new n.MediaTooLargeError("mmsUpload",{url:_});case 415:throw new n.MediaInvalidError("mmsUpload: hash mismatch",{url:_});case 507:throw new n.MMSThrottleError("mmsUpload",{url:_});default:throw new n.HttpStatusCodeError(e.status,"mmsUpload",{url:_})}return e.json()})).then((e=>{if(!e.direct_path)throw new n.HttpInvalidResponseError("mmsUpload: missing direct_path");if(!e.url)throw new n.HttpInvalidResponseError("mmsUpload: missing url");return{directPath:e.direct_path,url:e.url,handle:e.handle}})).then((e=>(__LOG__(2)(c()),e))).catch((e=>{throw e.name===s.ABORT_ERROR?__LOG__(2)(u()):__LOG__(3)(d()),e}))};var i=r(a(19976)),s=a(8701),n=a(85699),o=r(a(3757)),l=r(a(25608));function d(){var e=(0,i.default)(["mmsUpload: error"]);return d=function(){return e},e}function u(){var e=(0,i.default)(["mmsUpload: canceled"]);return u=function(){return e},e}function c(){var e=(0,i.default)(["mmsUpload: success"]);return c=function(){return e},e}function h(){var e=(0,i.default)(["mmsUpload: start"]);return h=function(){return e},e}},65710:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AbortError",{enumerable:!0,get:function(){return r.AbortError}}),Object.defineProperty(t,"HttpNetworkError",{enumerable:!0,get:function(){return r.HttpNetworkError}}),Object.defineProperty(t,"HttpStatusCodeError",{enumerable:!0,get:function(){return r.HttpStatusCodeError}}),Object.defineProperty(t,"MediaNotFoundError",{enumerable:!0,get:function(){return r.MediaNotFoundError}}),Object.defineProperty(t,"MediaTooLargeError",{enumerable:!0,get:function(){return r.MediaTooLargeError}}),Object.defineProperty(t,"MediaInvalidError",{enumerable:!0,get:function(){return r.MediaInvalidError}}),Object.defineProperty(t,"MMSUnauthorizedError",{enumerable:!0,get:function(){return r.MMSUnauthorizedError}}),Object.defineProperty(t,"MediaEncryptionError",{enumerable:!0,get:function(){return i.MediaEncryptionError}}),Object.defineProperty(t,"NoMediaHostsError",{enumerable:!0,get:function(){return s.NoMediaHostsError}});var r=a(85699),i=a(96452),s=a(25172)},14258:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(a(52134))},52134:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(19976)),s=a(8701),n=r(a(495)),o=a(85699),l=a(99888),d=a(66925),u=r(a(10111)),c=r(a(40210)),h=r(a(62962)),f=r(a(96598)),p=r(a(72424)),m=r(a(99340));function _(){var e=(0,i.default)(["uploadManager.encryptAndUpload: error"]);return _=function(){return e},e}function v(){var e=(0,i.default)(["uploadManager.encryptAndUpload: canceled"]);return v=function(){return e},e}function g(){var e=(0,i.default)(["uploadManager.encryptAndUpload: success"]);return g=function(){return e},e}function E(){var e=(0,i.default)(["uploadManager.encryptAndUpload: start"]);return E=function(){return e},e}function y(){var e=(0,i.default)(["uploadManager._getExistingOrUpload: error"]);return y=function(){return e},e}function S(){var e=(0,i.default)(["uploadManager._getExistingOrUpload: canceled"]);return S=function(){return e},e}function C(){var e=(0,i.default)(["uploadManager._getExistingOrUpload: success"]);return C=function(){return e},e}function T(){var e=(0,i.default)(["uploadManager._getExistingOrUpload: start"]);return T=function(){return e},e}function M(){var e=(0,i.default)(["uploadManager.checkIfAlreadyUploaded: error"]);return M=function(){return e},e}function b(){var e=(0,i.default)(["uploadManager.checkIfAlreadyUploaded: canceled"]);return b=function(){return e},e}function P(){var e=(0,i.default)(["uploadManager.checkIfAlreadyUploaded: success"]);return P=function(){return e},e}function A(){var e=(0,i.default)(["uploadManager.checkIfAlreadyUploaded: start"]);return A=function(){return e},e}function I(e,t,a,r){var i=new c.default.MediaUpload2({mediaId:(0,d.generateMediaEventId)(),connectionType:c.default.CONNECTION_TYPE.HOSTNAME,overallMediaType:(0,d.getMetricMediaType)(e),overallMmsVersion:4,overallAttemptCount:a,networkStack:c.default.NETWORK_STACK_TYPE.NATIVE,overallUploadMode:c.default.MEDIA_UPLOAD_MODE_TYPE.REGULAR,overallIsForward:r,overallUploadOrigin:t});return{onArrayBufferCreated:function(e){i.set({overallMediaSize:e})},onCheckExistingError:function(e){e instanceof o.HttpStatusCodeError&&i.set({resumeHttpCode:e.status})},onCheckExistingSuccess:function(){i.set({overallUploadResult:c.default.MEDIA_UPLOAD_RESULT_TYPE.DUPLICATE,overallIsFinal:!0,resumeHttpCode:200}),i.markOverallCumT(),i.commit()},onUploadHostFound:function({hostName:e,hostClass:t,failCount:a}){i.set({overallDomain:e,overallConnectionClass:t,overallRetryCount:a})},onUploadSuccess:function(){i.set({resumeHttpCode:404,overallUploadResult:c.default.MEDIA_UPLOAD_RESULT_TYPE.OK,overallIsFinal:!0,uploadHttpCode:200,finalizeHttpCode:200}),i.markOverallCumT(),i.commit()},onUploadError:function(e){i.set({overallUploadResult:(0,d.getMetricUploadErrorResultType)(e),overallIsFinal:!0});var t=(0,d.getStatusCode)(e);null!=t&&(i.uploadHttpCode=t,i.finalizeHttpCode=t),i.markOverallCumT(),i.commit(),(0,d.logErrorUnknownDetails)(i,e)},onUploadAttemptSuccess:function(e){i.set({overallT:e})},onUploadAttemptError:function(e,t,a){var r=new c.default.MediaUpload2(i);r.set({mediaId:(0,d.generateMediaEventId)(),overallUploadResult:(0,d.getMetricUploadErrorResultType)(e),overallIsFinal:!1,overallT:t,overallRetryCount:a});var s=(0,d.getStatusCode)(e);null!=s&&(i.uploadHttpCode=s),i.markOverallCumT(),r.commit(),(0,d.logErrorUnknownDetails)(i,e)}}}var O=new class{constructor(){this.checkIfAlreadyUploaded=(0,u.default)((e=>e.encFilehash),(e=>{var{encFilehash:t,type:a}=e;return __LOG__(2)(A()),h.default.checkIfUploadExists(e).catchType(o.MediaNotFoundError,(()=>null)).then((e=>(__LOG__(2)(P()),e))).catch((e=>{throw e.name===s.ABORT_ERROR?__LOG__(2)(b()):__LOG__(3)(M()),e}))})),this._memoizedUpload=(0,u.default)((e=>e.encFilehash),(e=>{var{ciphertextHmac:t,encFilehash:a,type:r,signal:i,onUploadHostFound:s,onUploadAttemptSuccess:n,onUploadAttemptError:o,onUploadSuccess:l}=e;return h.default.upload({ciphertextHmac:t,encFilehash:a,type:r,signal:i,onUploadHostFound:s,onUploadAttemptSuccess:n,onUploadAttemptError:o}).then((e=>(l(),e)))})),this._getExistingOrUpload=(0,u.default)((e=>e.encFilehash),(e=>{var{ciphertextHmac:t,encFilehash:a,signal:r,type:i,onCheckExistingSuccess:n,onCheckExistingError:o,onUploadHostFound:l,onUploadAttemptSuccess:d,onUploadAttemptError:u,onUploadSuccess:c}=e;return __LOG__(2)(T()),this.checkIfAlreadyUploaded({encFilehash:a,type:i,signal:r}).catch((e=>{throw o(e),e})).then((e=>e?(n(),e):this._memoizedUpload({ciphertextHmac:t,encFilehash:a,type:i,signal:r,onUploadHostFound:l,onUploadAttemptSuccess:d,onUploadAttemptError:u,onUploadSuccess:c}))).then((e=>(__LOG__(2)(C()),e))).catch((e=>{throw e.name===s.ABORT_ERROR?__LOG__(2)(S()):__LOG__(3)(y()),e}))}))}encryptAndUpload(e){var{blob:t,signal:a,type:r,userUploadAttemptCount:i,forwardedFromWeb:o,uploadOrigin:d}=e;__LOG__(2)(E());var{onCheckExistingSuccess:u,onCheckExistingError:c,onUploadHostFound:h,onUploadAttemptSuccess:m,onUploadAttemptError:y,onUploadSuccess:S,onArrayBufferCreated:C,onUploadError:T}=I(r,d,i,o);return(t instanceof Blob?(0,l.blobToArrayBuffer)(t):Promise.resolve(t)).then((t=>{var i,s;if(C(t.byteLength),null!=e.mediaKey&&null!=e.mediaKeyTimestamp)i=e.mediaKey,s=e.mediaKeyTimestamp;else{var l=(0,f.default)();i=l.key,s=l.timestamp}return(0,n.default)({type:r,plaintext:t,mediaKey:i}).then((({ciphertextHmac:t,hash:n,sidecar:l,firstFrameSidecar:d})=>(e.mediaKey?this._getExistingOrUpload({ciphertextHmac:t,encFilehash:n,type:r,signal:a,onCheckExistingSuccess:u,onCheckExistingError:c,onUploadHostFound:h,onUploadAttemptSuccess:m,onUploadAttemptError:y,onUploadSuccess:S}):this._memoizedUpload({ciphertextHmac:t,encFilehash:n,type:r,signal:a,onUploadHostFound:h,onUploadAttemptSuccess:m,onUploadAttemptError:y,onUploadSuccess:S})).then((e=>({directPath:o&&p.default.mmsCatV1ForwardHotOverrideEnabled?N(e.directPath):e.directPath,encFilehash:n,mediaKey:i,mediaKeyTimestamp:s,sidecar:l,firstFrameSidecar:d,url:e.url,handle:e.handle})))))})).then((e=>(__LOG__(2)(g()),e))).catch((e=>{throw e.name===s.ABORT_ERROR?__LOG__(2)(v()):__LOG__(3)(_()),T(e),e}))}unencryptedUpload(e){var{file:t,hash:a,type:r,signal:i,uploadOrigin:s}=e,{onCheckExistingSuccess:n,onCheckExistingError:o,onUploadHostFound:l,onUploadAttemptSuccess:d,onUploadAttemptError:u,onUploadSuccess:c}=I(r,s,0,!1);return this._getExistingOrUpload({ciphertextHmac:t,encFilehash:a,type:r,signal:i,onCheckExistingSuccess:n,onCheckExistingError:o,onUploadHostFound:l,onUploadAttemptSuccess:d,onUploadAttemptError:u,onUploadSuccess:c})}};function N(e){var[t,a]=e.split("?"),r=new m.default(a),i=Math.round(Date.now()/1e3);return r.set("_nc_hot",String(i)),"".concat(t,"?").concat(r.toString())}t.default=O},62808:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return t[e]()}},8401:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.cancelDownloadMedia=function(e){var{downloadPromise:t}=e;if(null==t)return;var a=H.get(t);if(null==a)return;H.delete(t),a()},t.manuallySetMedia=function({mimetype:e,mediaObject:t,mediaBlob:a,mediaType:r,rmrReason:i,downloadOrigin:s}){if(t.mediaBlob)return;(0,g.gatherAndSetMetadata)(t,a).then((()=>W({mimetype:e,mediaObject:t,downloadEvenIfExpensive:!1,mediaType:r,rmrReason:i,downloadOrigin:s})))},t.downloadMedia=W,t.checkExistence=function(){return K.apply(this,arguments)},Object.defineProperty(t,"MediaDecryptionError",{enumerable:!0,get:function(){return c.MediaDecryptionError}}),Object.defineProperty(t,"MediaNotOnPhone",{enumerable:!0,get:function(){return c.MediaNotOnPhone}});var s=i(a(52954)),n=i(a(19976)),o=a(29351),l=i(a(12489)),d=a(8701),u=i(a(1616)),c=a(50261),h=r(a(96452)),f=a(99888),p=i(a(54146)),m=r(a(23765)),_=i(a(81135)),v=a(96645),g=a(82982),E=i(a(40210)),y=a(41501),S=i(a(61941)),C=i(a(25012)),T=i(a(92087)),M=a(84990);function b(){var e=(0,n.default)(["checkExistence: error"]);return b=function(){return e},e}function P(){var e=(0,n.default)(["downloadMedia: error"]);return P=function(){return e},e}function A(){var e=(0,n.default)(["Assertion failed! ",""]);return A=function(){return e},e}function I(){var e=(0,n.default)(["downloadMedia: error: ",", ",""]);return I=function(){return e},e}function O(){var e=(0,n.default)(["Assertion failed! ",""]);return O=function(){return e},e}function N(){var e=(0,n.default)(["downloadMedia: error: ",", ",""]);return N=function(){return e},e}function w(){var e=(0,n.default)(["Assertion failed! ",""]);return w=function(){return e},e}function D(){var e=(0,n.default)(["downloadMedia: media unsupported error: ",", ",", ",""]);return D=function(){return e},e}function R(){var e=(0,n.default)(["Assertion failed!"]);return R=function(){return e},e}function L(){var e=(0,n.default)(["Unexpected download error: ",""]);return L=function(){return e},e}function k(){var e=(0,n.default)(["Assertion failed! ",""]);return k=function(){return e},e}function x(){var e=(0,n.default)(["downloadMedia: media unsupported error: ",", ",", ",""]);return x=function(){return e},e}function F(){var e=(0,n.default)(["Failed to retrieve blob text contents ",""]);return F=function(){return e},e}function G(){var e=(0,n.default)(["Assertion failed!"]);return G=function(){return e},e}class U extends((0,o.customError)("NoEntryAfterRMR")){}class B extends((0,o.customError)("MissingEncFilehash")){}var j=3,V=4,H=new WeakMap;function W({mimetype:e,mediaObject:t,downloadEvenIfExpensive:a,mediaType:r,signal:i,rmrReason:s,rmrData:n,downloadOrigin:o,shouldThrow:E,isVcardOverMmsDocument:b,mode:j}){if(!t)return Promise.resolve();var V=t.filehash;if(!V)return Promise.resolve();if(t.downloadPromise)return t.downloadPromise;if(t.downloadStage===v.DOWNLOAD_STAGE.ERROR_MISSING)return Promise.resolve();if(t.downloadStage===v.DOWNLOAD_STAGE.PREPARING)return Promise.resolve();if(t.mediaBlob)return t.mediaBlob.validate().then((e=>{if(!e)return t.clearBlob(),t.consolidate({downloadStage:v.DOWNLOAD_STAGE.NEED_POKE}),t.notifyMsgsAsync(),Promise.resolve();t.consolidate({downloadStage:v.DOWNLOAD_STAGE.RESOLVED})}));var K,q,z=p.default.get(V),Q=new l.default;return(0,T.default)([Q.signal,i].filter(Boolean),(i=>{if(z)K=Promise.resolve(z);else{var T;if(q=t.entries.getDownloadEntry())T=Promise.resolve(q);else{if(!a)return t.consolidate({downloadStage:v.DOWNLOAD_STAGE.NEED_POKE}),Promise.resolve();T=u.default.rmr({mediaObject:t,signal:i,rmrReason:s,rmrData:n}).then((()=>{if(!(q=t.entries.getDownloadEntry()))throw new U;return q}))}t.consolidate({downloadStage:v.DOWNLOAD_STAGE.FETCHING}),K=(0,S.default)(T,"entryPromise").then((a=>{q=a;var{encFilehash:s}=q;if(!s)throw q.markWhetherOnServer(!1),new B;var n=q,{scansSidecar:l,scanLengths:d}=q;return u.default.downloadAndDecrypt({directPath:n.directPath,encFilehash:s,filehash:V,mediaKey:n.mediaKey,mediaKeyTimestamp:n.mediaKeyTimestamp,signal:i,type:r,onDecryptStart:()=>{t.consolidate({downloadStage:v.DOWNLOAD_STAGE.PROCESSING})},userDownloadAttemptCount:t.userDownloadAttemptCount,downloadOrigin:o,mode:j,progressiveJpegOpts:Y({scanLengths:d,scansSidecar:l,mimetype:e,mediaObject:t})}).then((t=>{var a=e||(0,y.getMediaMimeType)(r,new Uint8Array(t)),i=new Blob([t],{type:a});return!(0,g.shouldUseMediaCache)(r)||r!==_.default.PTT&&r!==_.default.AUDIO?i:m.transcode(i)}))}))}var J=K.then((e=>("text/vcard"===e.type&&b&&(0,f.blobToText)(e).then((e=>{var a=(0,M.parseMultiVcard)(e);a.length>0?t.consolidate({parsedVcards:a}):(__LOG__(4,void 0,new Error,!0)(G()),SEND_LOGS("vcard_over_mms:Failed to parse vcard over mms contents"))})).catch((e=>{__LOG__(4,void 0,new Error,!0)(F(),String(e)),SEND_LOGS("vcard_over_mms:blobToText failed with error: ".concat(String(e)))})),e))).then((e=>(0,g.shouldUseMediaCache)(r)?(p.default.put(V,e),(0,g.gatherAndSetMetadataNoOpaque)(t,e)):C.default.createFromData(e,e.type).then((e=>(0,g.gatherAndSetMetadata)(t,e))))).then((()=>(t.consolidate({downloadStage:v.DOWNLOAD_STAGE.RESOLVED}),t.downloadPromise=null,t.resolveWhenConsolidated()))).catchType(c.MediaNotFoundError,(i=>{if(!q)throw i;if(q.markWhetherOnServer(!1),!a)throw i;return u.default.rmr({mediaObject:t,signal:(new l.default).signal,rmrReason:s,rmrData:n}).then((()=>(t.downloadPromise=null,W({mimetype:e,mediaObject:t,downloadEvenIfExpensive:!1,mediaType:r,rmrReason:s,rmrData:n,downloadOrigin:o,isVcardOverMmsDocument:b,mode:j}))))})).catchType(h.MediaUnsupportedError,(a=>{if(t.consolidate({downloadStage:v.DOWNLOAD_STAGE.ERROR_UNSUPPORTED}),__LOG__(3)(x(),a.name,a.message,e||""),__LOG__(4,void 0,new Error,!0)(k(),a.message),SEND_LOGS("downloadMedia: media unsupported error:"),E)throw a})).catchType(c.MediaNotOnPhone,(e=>{if(t.consolidate({downloadStage:v.DOWNLOAD_STAGE.ERROR_MISSING}),E)throw e})).catchTypes(U,B,(e=>{if(t.consolidate({downloadStage:v.DOWNLOAD_STAGE.ERROR_MISSING}),__LOG__(3)(L(),e.name),__LOG__(4,void 0,new Error,!0)(R()),SEND_LOGS("unexpected download error: ".concat(e.name)),E)throw e})).catchType(c.MediaDecryptionError,(e=>{if(t.consolidate({downloadStage:v.DOWNLOAD_STAGE.ERROR_MISSING}),E)throw e})).catch((a=>{if(t.consolidate({downloadStage:v.DOWNLOAD_STAGE.NEED_POKE}),a instanceof h.MediaLoadError){if(__LOG__(3)(D(),a.name,a.message,e||""),__LOG__(4,void 0,new Error,!0)(w(),a.message),SEND_LOGS("downloadMedia: media load error:"),E)throw a}else if(a instanceof h.TranscodeBlobTooLargeError){if(__LOG__(3)(N(),a.message,e||""),__LOG__(4,void 0,new Error,!0)(O(),a.message),SEND_LOGS("downloadMedia: transcode blob too large"),E)throw a}else if(a instanceof h.UnableToPlayVideoError){if(__LOG__(3)(I(),a.message,e||""),__LOG__(4,void 0,new Error,!0)(A(),a.message),SEND_LOGS("downloadMedia: unable to play video"),E)throw a}else if(a.name!==d.ABORT_ERROR){if(__LOG__(2)(P()),E)throw a}else if(E)throw a})).finally((()=>{t.downloadPromise=null}));return H.set(J,(()=>{Q.abort()})),t.downloadPromise=J,J}))}function K(){return(K=(0,s.default)((function*({mimetype:e,mediaObject:t,mediaType:a}){var{filehash:r}=t;if(r&&t.downloadStage===v.DOWNLOAD_STAGE.INIT&&!(yield q(t))){var i=p.default.get(r),s=new l.default;if(i)t.downloadStage===v.DOWNLOAD_STAGE.INIT&&t.consolidate({downloadStage:v.DOWNLOAD_STAGE.EXISTS});else{var n=t.entries.getDownloadEntry();if(n){var{encFilehash:o}=n;if(!o)return n.markWhetherOnServer(!1),void(t.downloadStage===v.DOWNLOAD_STAGE.INIT&&t.consolidate({downloadStage:v.DOWNLOAD_STAGE.NEED_POKE}));try{yield u.default.checkExistence({directPath:n.directPath,encFilehash:o,signal:s.signal,type:a}),t.downloadStage===v.DOWNLOAD_STAGE.INIT&&t.consolidate({downloadStage:v.DOWNLOAD_STAGE.EXISTS})}catch(e){t.downloadStage===v.DOWNLOAD_STAGE.INIT&&t.consolidate({downloadStage:v.DOWNLOAD_STAGE.NEED_POKE}),__LOG__(2)(b())}}else t.downloadStage===v.DOWNLOAD_STAGE.INIT&&t.consolidate({downloadStage:v.DOWNLOAD_STAGE.NEED_POKE})}}}))).apply(this,arguments)}function Y(e){var{scanLengths:t,scansSidecar:a,mimetype:r,mediaObject:i}=e;if(!function(e,t){return!!(e&&t&&e.length>=2&&10*e.length===t.byteLength)}(t,a))return null;var s=new E.default.WebcProgressiveImage({webcFirstRenderScans:0});return{mimetype:r,scansSidecar:(0,S.default)(a,"scansSidecar"),scanLengths:(0,S.default)(t,"scanLengths"),onProgressiveUpdate:e=>{i.downloadStage!==v.DOWNLOAD_STAGE.RESOLVED&&(i.consolidate({downloadStage:v.DOWNLOAD_STAGE.PROGRESSIVE_READY,progressiveStage:e}),s.webcFirstRenderScans||(s.webcFirstRenderScans=e,s.markWebcFirstRenderT()),e>=j&&!s.webcMidQualityT&&s.markWebcMidQualityT(),e!==V||s.webcFullQualityT||(s.markWebcFullQualityT(),s.commit()))}}}function q(){return z.apply(this,arguments)}function z(){return(z=(0,s.default)((function*(e){return!!e.mediaBlob&&((yield e.mediaBlob.validate())?(e.consolidate({downloadStage:v.DOWNLOAD_STAGE.RESOLVED}),!0):(e.clearBlob(),e.consolidate({downloadStage:v.DOWNLOAD_STAGE.NEED_POKE}),e.notifyMsgsAsync(),!1))}))).apply(this,arguments)}},78460:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.cancelUploadMedia=function(e){var{uploadPromise:t}=e;if(null==t)return;var a=T.get(t);if(null==a)return;T.delete(t),a()},t.uploadMedia=function({mimetype:e,mediaObject:t,mediaType:a,forwardedFromWeb:r,uploadOrigin:i,mediaKeyInfo:s}){if(t.uploadPromise)return t.uploadPromise;var n=new l.default,{signal:v}=n,g=Promise.resolve().then((()=>{t.consolidate({uploadStage:p.UPLOAD_STAGE.UPLOADING})})).then((()=>b({mediaObject:t,mimetype:e,mediaType:a,abortSignal:v,uploadOrigin:i}))).then((e=>{var n=t.entries.getUploadEntry();n&&s&&(0,o.default)(n.mediaKey===s.key,"uploadEntry.mediaKey and mediaKeyInfo.mediaKey should be the same");var l=s?s.key:null==n?void 0:n.mediaKey,d=s?s.timestamp:null==n?void 0:n.mediaKeyTimestamp;return E.default.encryptAndUpload({blob:e,mediaKey:l,mediaKeyTimestamp:d,type:a,signal:v,userUploadAttemptCount:t.userUploadAttemptCount,forwardedFromWeb:r,uploadOrigin:i}).then((({directPath:e,encFilehash:r,mediaKey:i,mediaKeyTimestamp:s,url:n,sidecar:o,firstFrameSidecar:l})=>{var d=t.entries.addEntry({deprecatedMms3Url:n,mediaKey:i,mediaKeyTimestamp:s,encFilehash:r,type:a,sidecar:o,directPath:e,firstFrameSidecar:l,debugHint:"upload"});if(!d)throw new Error("could not create media entry");if((a===m.default.PTT||a===m.default.AUDIO)&&!_.canPlayOgg())if(_.shouldUseMediaCache(a)){var u=t.filehash;if(u&&t.mediaBlob)return f.transcode(t.mediaBlob.formData()).then((e=>{h.default.put(u,e)})).then((()=>d))}else if(t.mediaBlob)return _.gatherAndSetMetadata(t,t.mediaBlob).then((()=>d));return d}))})).then((e=>{if(v.aborted)throw new c.AbortError;return t.consolidate({uploadStage:p.UPLOAD_STAGE.UPLOADED}),__LOG__(2)(C()),{kind:M.SUCCESS,mediaEntry:e}})).catch((e=>{throw e.name===d.ABORT_ERROR?__LOG__(2)(S()):__LOG__(3)(y()),e})).finally((()=>{delete t.uploadPromise})).catchType(u.MediaNotOnPhone,(()=>(t.consolidate({uploadStage:p.UPLOAD_STAGE.ERROR_MISSING}),{kind:M.ERROR}))).catchType(c.MediaTooLargeError,(()=>(t.consolidate({uploadStage:p.UPLOAD_STAGE.ERROR_TOO_LARGE}),{kind:M.ERROR}))).catch((e=>(t.consolidate({uploadStage:p.UPLOAD_STAGE.NEED_UPLOAD}),e.name===d.ABORT_ERROR?{kind:M.CANCELLATION}:{kind:M.ERROR})));return T.set(g,(()=>{n.abort()})),t.uploadPromise=g,g},t.getOrDownloadBlob=b,t.getBlobFromMediaObject=A,t.UploadMediaResultKind=void 0;var s=i(a(52954)),n=i(a(19976)),o=i(a(47677)),l=i(a(12489)),d=a(8701),u=a(50261),c=a(65710),h=i(a(54146)),f=r(a(23765)),p=a(96645),m=i(a(81135)),_=r(a(82982)),v=i(a(40210)),g=a(8401),E=i(a(14258));function y(){var e=(0,n.default)(["MediaAlgo.uploadMedia: error"]);return y=function(){return e},e}function S(){var e=(0,n.default)(["MediaAlgo.uploadMedia: canceled"]);return S=function(){return e},e}function C(){var e=(0,n.default)(["MediaAlgo.uploadMedia: success"]);return C=function(){return e},e}var T=new WeakMap;var M={SUCCESS:"success",CANCELLATION:"cancellation",ERROR:"error"};function b(){return P.apply(this,arguments)}function P(){return(P=(0,s.default)((function*({mediaObject:e,mimetype:t,mediaType:a,abortSignal:r,uploadOrigin:i}){var s=A(e);if(s)return s;if(yield(0,g.downloadMedia)({mimetype:t,mediaObject:e,downloadEvenIfExpensive:!0,mediaType:a,signal:r,rmrReason:v.default.WEBC_RMR_REASON_CODE.UPLOAD,downloadOrigin:i===v.default.UPLOAD_ORIGIN_TYPE.CHAT_PERSONAL?v.default.DOWNLOAD_ORIGIN_TYPE.CHAT_PERSONAL:v.default.DOWNLOAD_ORIGIN_TYPE.CHAT_GROUP,mode:"manual"}),e.downloadStage===p.DOWNLOAD_STAGE.ERROR_MISSING)throw new u.MediaNotOnPhone;var n=A(e);if(n)return n;throw new Error("cant upload media w/out mediaBlob after download")}))).apply(this,arguments)}function A(e){var t=e.mediaBlob;return t?t.formData():e.filehash?h.default.get(e.filehash):void 0}t.UploadMediaResultKind=M},73698:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=Promise.resolve().then((()=>{var a,r,i=e.size(),c=t.asDocument?n.FILETYPE.DOCUMENT:(0,n.typeFromMimetype)(e.type()),h=null!==(a=t.isVcardOverMmsDocument)&&void 0!==a&&a;if(i>function(e,t){if(e===n.FILETYPE.DOCUMENT)return t?1024*u.default.vcardMaxSizeKb:u.default.maxFileSize;return u.default.media}(c,h))return Promise.reject(new o.default(e));if(i<=0)return Promise.reject(new s.MediaFileEmpty);switch(null!=t.gifAttribution?r=t.gifAttribution:t.asGif&&(r=0),c){case"image":return d.processRawImage(e).then((({blob:e,width:t,height:a,preview:r})=>({type:l.OUTWARD_TYPES.IMAGE,mediaBlob:e,mimetype:"image/jpeg",fullWidth:t,fullHeight:a,preview:r})));case"video":case"audio":return d.processRawAudioVideo(e,!!t.isPtt,t.precomputedFields,t.asGif,r,e.type());case"document":return d.processRawDocument(e,t.filename,h,t.documentPageCount);default:throw new Error("Received unsupported mediaType: "+c)}}));return e.retain(),e.autoreleaseWhenPromiseCompletes(a),a};var s=i(a(96452)),n=a(99888),o=r(a(97626)),l=a(96645),d=i(a(82982)),u=r(a(72424))},27674:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return i.default.globalUnixTime()-e<s.default.mmsMediaKeyTTL+Math.floor(86400*Math.random())};var i=r(a(19899)),s=r(a(72424))},421:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PushnameSpec=t.HistorySyncMsgSpec=t.ConversationSpec=t.HistorySyncSpec=t.ConversationEndOfHistoryTransferType=t.HistorySyncHistorySyncType=void 0;var r=a(21617),i=a(45261),s=a(28103)({INITIAL_BOOTSTRAP:0,INITIAL_STATUS_V3:1,FULL:2,RECENT:3,PUSH_NAME:4});t.HistorySyncHistorySyncType=s;var n=a(28103)({COMPLETE_BUT_MORE_MESSAGES_REMAIN_ON_PRIMARY:0,COMPLETE_AND_NO_MORE_MESSAGE_REMAIN_ON_PRIMARY:1});t.ConversationEndOfHistoryTransferType=n;var o={};t.HistorySyncSpec=o;var l={};t.ConversationSpec=l;var d={};t.HistorySyncMsgSpec=d;var u={};t.PushnameSpec=u,o.internalSpec={syncType:[1,i.FLAGS.REQUIRED|i.TYPES.ENUM,s],conversations:[2,i.FLAGS.REPEATED|i.TYPES.MESSAGE,l],statusV3Messages:[3,i.FLAGS.REPEATED|i.TYPES.MESSAGE,r.WebMessageInfoSpec],chunkOrder:[5,i.TYPES.UINT32],progress:[6,i.TYPES.UINT32],pushnames:[7,i.FLAGS.REPEATED|i.TYPES.MESSAGE,u]},l.internalSpec={id:[1,i.FLAGS.REQUIRED|i.TYPES.STRING],messages:[2,i.FLAGS.REPEATED|i.TYPES.MESSAGE,d],newJid:[3,i.TYPES.STRING],oldJid:[4,i.TYPES.STRING],lastMsgTimestamp:[5,i.TYPES.UINT64],unreadCount:[6,i.TYPES.UINT32],readOnly:[7,i.TYPES.BOOL],endOfHistoryTransfer:[8,i.TYPES.BOOL],ephemeralExpiration:[9,i.TYPES.UINT32],ephemeralSettingTimestamp:[10,i.TYPES.INT64],endOfHistoryTransferType:[11,i.TYPES.ENUM,n],conversationTimestamp:[12,i.TYPES.UINT64],name:[13,i.TYPES.STRING],pHash:[14,i.TYPES.STRING],notSpam:[15,i.TYPES.BOOL]},d.internalSpec={message:[1,i.TYPES.MESSAGE,r.WebMessageInfoSpec],msgOrderId:[2,i.TYPES.UINT64]},u.internalSpec={id:[1,i.TYPES.STRING],pushname:[2,i.TYPES.STRING]}},42451:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MsgOpaqueDataSpec=t.MsgRowOpaqueDataSpec=void 0;var r=a(45261),i={};t.MsgRowOpaqueDataSpec=i;var s={};t.MsgOpaqueDataSpec=s,i.internalSpec={currentMsg:[1,r.TYPES.MESSAGE,s],quotedMsg:[2,r.TYPES.MESSAGE,s]},s.internalSpec={body:[1,r.TYPES.STRING],caption:[3,r.TYPES.STRING],clientUrl:[4,r.TYPES.STRING],loc:[4,r.TYPES.STRING],lng:[5,r.TYPES.DOUBLE],lat:[7,r.TYPES.DOUBLE],paymentAmount1000:[8,r.TYPES.INT32],paymentNoteMsgBody:[9,r.TYPES.STRING],canonicalUrl:[10,r.TYPES.STRING],matchedText:[11,r.TYPES.STRING],title:[12,r.TYPES.STRING],description:[13,r.TYPES.STRING]}},25046:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateICELiteAnswerSDP=function(e,t,a,n,o,l,d){var u=(g=e,g.ip.join(".")),c=e.port+1,h=new TextDecoder,f=(0,r.encodeB64)(t),p=h.decode(a),m=(0,r.encodeB64)(l),_=(new Date).getTime(),v="v=0\no=- ".concat(_," ").concat(2," IN IP4 127.0.0.1\ns=-\nt=0 0\na=group:BUNDLE 0").concat(d?" 1":"","\na=ice-lite\na=msid-semantic: WMS g1noOjzcjYNgtJfnKdCzBmyvTozKsCGWCleP\nm=audio ").concat(c," RTP/SAVPF ").concat(i,"\nc=IN IP4 ").concat(u,"\na=rtcp:9 IN IP4 0.0.0.0\na=candidate:1152096416 1 udp 2113937151 ").concat(u," ").concat(c," typ host generation 0 network-cost 999\na=ice-ufrag:").concat(f,"\na=ice-pwd:").concat(p,"\na=ice-options:trickle\na=setup:active\na=mid:0\na=extmap:13 http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01\na=sendrecv\na=msid:g1noOjzcjYNgtJfnKdCzBmyvTozKsCGWCleP df375ff4-7ed5-459d-b991-76c8e47ffc52\na=rtcp-mux\na=crypto:0 AES_CM_128_HMAC_SHA1_32 inline:").concat(m,"\na=rtpmap:").concat(i," opus/48000/2\na=rtcp-fb:").concat(i," goog-remb\na=rtcp-fb:").concat(i," transport-cc\na=ssrc:").concat(n," cname:noAs9WOptAnM/+QP\n");var g;d&&(v+="m=video ".concat(c," RTP/SAVP ").concat(s,"\nc=IN IP4 ").concat(u,"\na=rtcp:9 IN IP4 0.0.0.0\na=candidate:1152096416 1 udp 2113937151 ").concat(u," ").concat(c," typ host generation 0 network-cost 999\na=ice-ufrag:").concat(f,"\na=ice-pwd:").concat(p,"\na=ice-options:trickle\na=mid:1\na=extmap:12 urn:3gpp:video-orientation\na=extmap:13 http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01\na=sendrecv\na=msid:ZhweKKCOEinfZyYuSPSvnC7upm9Zs0IIaRYb 629eaf55-18ca-47ed-8bfe-98dfd17c0bc9\na=rtcp-mux\na=crypto:0 AES_CM_128_HMAC_SHA1_32 inline:").concat(m,"\na=rtpmap:").concat(s," VP8/90000\na=rtcp-fb:").concat(s," nack\na=rtcp-fb:").concat(s," nack pli\na=rtcp-fb:").concat(s," goog-remb\na=rtcp-fb:").concat(s," transport-cc\na=ssrc:").concat(o," cname:rcpcNyS/Kejuq2+Y\n"));return{type:"answer",sdp:v}},t.modifyOfferSDP=function(e,t,a,i,s){var n=e;if(n=(n=(n=n.replace(/ice-ufrag:\S+/g,"ice-ufrag:wa-web")).replace(/ice-pwd:\S+/g,"ice-pwd:CplKUv1mtNXWrv0ZzQkHX3TF")).replace(/a=crypto:.*/g,"a=crypto:0 AES_CM_128_HMAC_SHA1_32 inline:".concat((0,r.encodeB64)(i))),s){var o=n.search(/m=video/g),l=n.substring(0,o),d=n.substring(o);l=l.replace(/ssrc:\S+/g,"ssrc:".concat(t)),d=d.replace(/ssrc:\S+/g,"ssrc:".concat(a)),n=l+d}else n=n.replace(/ssrc:\S+/g,"ssrc:".concat(t));return n};var r=a(60339),i=111,s=102},64786:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.checkVoipCapability=function(){return Promise.resolve(!1)},t.default=void 0;var s=i(a(52954)),n=i(a(70417)),o=i(a(19976)),l=i(a(79504)),d=a(95595),u=i(a(68476)),c=r(a(55273)),h=a(72502),f=i(a(49213)),p=a(25046),m=a(92565),_=i(a(43711)),v=r(a(31558));function g(){var e=(0,o.default)(["voip:recv:offerAck: Unknown status:",""]);return g=function(){return e},e}function E(){var e=(0,o.default)(["voip:recv:offer_ack: phone_busy"]);return E=function(){return e},e}function y(){var e=(0,o.default)(["voip:recv:offer_ack: no payload"]);return y=function(){return e},e}function S(){var e=(0,o.default)(["voip:recv:offerAck:"]);return S=function(){return e},e}function C(){var e=(0,o.default)(["voip:send:offer: payload:"]);return C=function(){return e},e}function T(){var e=(0,o.default)(["voip:recieved-track"]);return T=function(){return e},e}function M(){var e=(0,o.default)(["voip:generated-answer: ",""]);return M=function(){return e},e}function b(){var e=(0,o.default)(["voip:modified-offer: ",""]);return b=function(){return e},e}function P(){var e=(0,o.default)(["voip:original-offer: ",""]);return P=function(){return e},e}function A(){var e=(0,o.default)(["voip:generateId: ",""]);return A=function(){return e},e}function I(){var e=(0,o.default)(['voip:handleIncomingSignalingMsg: type: "','" msg: ']);return I=function(){return e},e}function O(){var e=(0,o.default)(["voip:callStart: "," video: ",""]);return O=function(){return e},e}function N(){var e=(0,o.default)(["voip:init"]);return N=function(){return e},e}var w=null,D={type:"none"},R={init:()=>(__LOG__(2)(N()),Promise.resolve(!1)),updateAudioVideoSwitch:()=>{},cleanup:()=>{},refresh:()=>{},callStart:(e,t)=>{if(__LOG__(2)(O(),e.toString(),t.toString()),!_.default.isVoiceCallEnabled&&!_.default.isVideoCallEnabled)throw new Error("voip:callStart: calling not enabled");!function(){j.apply(this,arguments)}(e,t)},groupCallStart:()=>{},sendGroupCallInvite:()=>{},endCall:()=>{if("ongoing"===D.type){var e=D;!function(){H.apply(this,arguments)}(D.callId,D.peerJid),e.pc.close(),e.stream.getTracks().forEach((e=>e.stop())),D={type:"none"}}},callEndByHandledRemotely:()=>{},acceptCall:()=>{},rejectCall:()=>{},rejectCallWithoutCallCtx:()=>{},resendEncRekeyRetry:()=>{},processMissedIncomingCall:()=>{},mute:()=>{},videoTurnCameraOn:()=>{},videoTurnCameraOff:()=>{},videoStreamPause:()=>{},videoStreamResume:()=>{},videoRequestUpgrade:()=>{},videoAcceptUpgrade:()=>{},videoRejectUpgrade:()=>{},videoCancelUpgrade:()=>{},handleIncomingSignalingMessage:function(e,t){var a=v.TYPE_NAME[e.type];__LOG__(2)(I(),a);var r=l.default.get(e.call_id);if(null==r?void 0:r.canHandleLocally)switch(e.type){case v.TYPE.OFFER:throw new Error("Incoming call offer unimplemented.");case v.TYPE.OFFER_RECEIPT:case v.TYPE.ACCEPT_RECEIPT:return;case v.TYPE.MUTE:case v.TYPE.VIDEO_STATE:break;case v.TYPE.ACCEPT:"offer-sent"===D.type&&(D.pc.setRemoteDescription(D.answer),D=(0,n.default)((0,n.default)({},D),{},{type:"ongoing"}));break;case v.TYPE.REJECT:if("offer-sent"===D.type){var i=D;i.pc.close(),i.stream.getTracks().forEach((e=>e.stop())),D={type:"none"}}break;case v.TYPE.TERMINATE:if("ongoing"===D.type){var s=D;s.pc.close(),s.stream.getTracks().forEach((e=>e.stop())),D={type:"none"}}}else(0,m.handleIncomingSignalingMessage)(e,t)},isInitialized:()=>!0,registerVideoCallback:()=>{},cleanupVideoBuffer:()=>{},updateNetworkMedium:()=>{},registerWebRTCCallback:e=>{w=e},notifyDeviceIdentityChangedOrDeleted:()=>{}};function L(){return k.apply(this,arguments)}function k(){return(k=(0,s.default)((function*(e,t,a,r){var i=new TextDecoder,s=yield c.extract(e,t);return c.expand(s,i.decode(a),r)}))).apply(this,arguments)}function x(){return F.apply(this,arguments)}function F(){return(F=(0,s.default)((function*(e,t,a){var r=new TextEncoder,i=r.encode(e).buffer,s=r.encode(t).buffer,n=new Uint32Array([a]).buffer,o=yield L(i,n,s,32);return new Uint32Array(o)[0]}))).apply(this,arguments)}function G(){return U.apply(this,arguments)}function U(){return(U=(0,s.default)((function*(e,t){var a=new TextEncoder;return(yield L(e,c.DEFAULT_SALT,a.encode(t).buffer,46)).slice(0,30)}))).apply(this,arguments)}t.default=R;function B(){var e=new Uint8Array(32);return self.crypto.getRandomValues(e),e.buffer}function j(){return(j=(0,s.default)((function*(e,t){if(!u.default)throw new Error("Unable to request Media Devices.");var a=yield(0,u.default)({audio:!0,video:t}),r=(0,f.default)().substr(0,64);__LOG__(2)(A(),r);var i=B(),n=(0,d.getMaybeMeUser)(),o=yield x(r,n.toString({legacy:!0}),0),l=yield x(r,e.toString({legacy:!0}),0),c=yield x(r,n.toString({legacy:!0}),2),h=yield x(r,e.toString({legacy:!0}),2),m=yield G(i,n.toString({legacy:!0})),_=yield G(i,e.toString({legacy:!0})),v=new RTCPeerConnection({sdpSemantics:"unified-plan"},{mandatory:{},optional:[{DtlsSrtpKeyAgreement:!1},{RtpDataChannels:!0}]});v.onnegotiationneeded=(0,s.default)((function*(){var s=yield v.createOffer();__LOG__(2)(P(),s.sdp);var{token:d,key:u,relay:f}=yield z(i,n,e.toString({legacy:!0}),r,t);yield Y(f,r,n,e.toString({legacy:!0})),s.sdp=(0,p.modifyOfferSDP)(s.sdp,o,c,m,t),__LOG__(2)(b(),s.sdp),yield v.setLocalDescription(s);var g=(0,p.generateICELiteAnswerSDP)(f,d,u,l,h,_,t);__LOG__(2)(M(),g.sdp),D={type:"offer-sent",pc:v,answer:g,stream:a,callId:r,peerJid:e.toString({legacy:!0})}})),v.ontrack=e=>{if(__LOG__(2)(T()),!w)throw new Error("No Track callback registered.");w(e)},null==a||a.getTracks().forEach((e=>v.addTrack(e,a)))}))).apply(this,arguments)}function V(e){return["terminate",{"call-id":e},null]}function H(){return(H=(0,s.default)((function*(e,t){var a=V(e),r=a[0];yield(0,h.sendCallSignalingMsg)({common:{type:r,call_id:e,call_creator_jid:"",peer_jid:t},payload:a})}))).apply(this,arguments)}function W(e,t,a,r){return["offer",{"call-id":t,"call-creator":a},[["audio",{enc:"opus",rate:"8000"},null],["audio",{enc:"opus",rate:"16000"},null]].concat(r?[["video",{orientation:"0",screen_width:"1920",screen_height:"1080",device_orientation:"0",enc:"vp8"},null]]:[]).concat([["net",{medium:"3"},null],["capability",{ver:"1"},[1,3,-1,-125,-33]],["enc",{count:"0"},Array.from(new Int8Array(e))],["encopt",{keygen:"2"},null]])]}function K(e,t,a){var r=new ArrayBuffer(6),i=new DataView(r);return i.setUint8(0,e.ip[0]),i.setUint8(1,e.ip[1]),i.setUint8(2,e.ip[2]),i.setUint8(3,e.ip[3]),i.setUint16(4,e.port),["relaylatency",{"call-id":t,"call-creator":a},[["te",{latency:"-99954"},Array.from(new Int8Array(r))]]]}function Y(){return q.apply(this,arguments)}function q(){return(q=(0,s.default)((function*(e,t,a,r){var i=K(e,t,a),s=i[0];yield(0,h.sendCallSignalingMsg)({common:{type:s,call_id:t,call_creator_jid:"",peer_jid:r},payload:i})}))).apply(this,arguments)}function z(){return Q.apply(this,arguments)}function Q(){return(Q=(0,s.default)((function*(e,t,a,r,i){var s=W(e,r,t,i),n=s[0];__LOG__(2)(C());var o=yield(0,h.sendCallOffer)({common:{type:n,call_id:r,call_creator_jid:"",peer_jid:a},payload:s});if(!o||!o.status)throw new Error("Error receiving Offer Ack.");switch(o.status){case 200:if(o.payload){__LOG__(2)(S());var l=null,d=null,u=null;for(var c of o.payload[2])if("relay"===c[0])for(var f of c[2])if("token"===f[0])l=new Uint8Array(f[2]);else if("key"===f[0])d=new Uint8Array(f[2]);else if("te2"===f[0]){var p=new Uint8Array(f[2]);if(6===p.length){var m=new DataView(p.buffer);u={ip:[m.getUint8(0),m.getUint8(1),m.getUint8(2),m.getUint8(3)],port:m.getUint16(4)}}}if(null==l)throw new Error("No relay token in Offer Ack");if(null==d)throw new Error("No relay key in Offer Ack");if(null==u)throw new Error("No relay server found in Offer Ack");return{token:l,key:d,relay:u}}throw __LOG__(2)(y()),new Error("Error receiving Offer Ack: No Payload");case 409:throw __LOG__(2)(E()),new Error("Error receiving Offer Ack: Phone Busy");default:throw __LOG__(2)(g(),status),new Error("Error receiving Offer Ack: Unknown status:".concat(status))}}))).apply(this,arguments)}},92565:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.handleIncomingSignalingMessage=function(e){var t=s.default.get(e.call_id);switch(e.type){case o.TYPE.OFFER:null==t||t.setState(n.CALL_STATES.INCOMING_RING);break;case o.TYPE.TERMINATE:null==t||t.setState(n.CALL_STATES.ENDED)}};var s=i(a(79504)),n=a(35205),o=r(a(31558))},17689:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=a(43322),o=r(a(79711)),l=r(a(9386)),d=r(a(17957));function u(e,t){o.default.openModal(s.createElement(l.default,{title:t,okText:d.default.t(1709),onOK:()=>o.default.closeModal()},s.createElement("div",null,e)))}var c={openModal:u,openUnblockModal:function(e){o.default.openModal(s.createElement(l.default,{okText:d.default.t(1362),onOK:()=>{(0,n.unblockContact)(e).catch((()=>{})),o.default.closeModal()},cancelText:d.default.t(1547),onCancel:()=>{o.default.closeModal()}},d.default.t(1503)))},soundPortErrorModal:function(){u(d.default.t(1478),d.default.t(1479))},videoPortErrorModal:function(){var e=a(59694).default;o.default.openModal(s.createElement(l.default,{title:d.default.t(1481),okText:d.default.t(1276),onOK:()=>{o.default.closeModal(),o.default.openModal(s.createElement(e,null))},cancelText:d.default.t(1547),onCancel:()=>{o.default.closeModal()}},s.createElement("div",null,d.default.t(1480))))}};t.default=c},31558:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ENC_RETRY_RECEIPT_ATTRS=t.TYPE_NAME=t.TYPE_STR=t.TYPE=void 0;t.TYPE={NONE:0,OFFER:1,OFFER_RECEIPT:2,ACCEPT:3,REJECT:4,TERMINATE:5,TRANSPORT:6,OFFER_ACK:7,OFFER_NACK:8,RELAY_LATENCY:9,RELAY_ELECTION:10,INTERRUPTION:11,MUTE:12,PREACCEPT:13,ACCEPT_RECEIPT:14,VIDEO_STATE:15,NOTIFY:16,GROUP_INFO:17,ENC_REKEY:18,PEER_STATE:19,VIDEO_STATE_ACK:20,FLOW_CONTROL:21,WEB_CLIENT:22,ACCEPT_ACK:23,GROUP_UPDATE:24,MAX:25};t.TYPE_STR={OFFER:"offer",ACCEPT:"accept",ENC_REKEY:"enc_rekey",REJECT:"reject",RECEIPT:"receipt"};t.TYPE_NAME=["NONE","OFFER","OFFER_RECEIPT","ACCEPT","REJECT","TERMINATE","TRANSPORT","OFFER_ACK","OFFER_NACK","RELAY_LATENCY","RELAY_ELECTION","INTERRUPTION","MUTE","PREACCEPT","ACCEPT_RECEIPT","VIDEO_STATE","NOTIFY","GROUP_INFO","ENC_REKEY","PEER_STATE","VIDEO_STATE_ACK","FLOW_CONTROL","WEB_CLIENT","ACCEPT_ACK","GROUP_UPDATE","MAX"];t.ENC_RETRY_RECEIPT_ATTRS={SINGLE_PARTICIPANT:"enc",GROUP_CALL:"enc_rekey_retry"}},89524:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);t.Z=void 0;var s=i(a(19976)),n=r(a(2784)),o=i(a(44764)),l=i(a(79504)),d=i(a(79711)),u=i(a(7470)),c=i(a(17957)),h=r(a(17026)),f=r(a(75074)),p=i(a(43711)),m=i(a(17689)),_=a(35205),v=i(a(3111)),g=a(75637);function E(){var e=(0,s.default)(["voip:checkIfCanStartCall expected contact to be provided"]);return E=function(){return e},e}function y(e){return{callId:e.call_id,peerJid:e.peer_jid,initialPeerJid:e.initial_peer_jid,creatorJid:e.creator_jid,callerStatus:Boolean(e.caller_status),callActiveTime:{sec:e.call_active_time.sec,msec:e.call_active_time.msec},callDuration:e.call_duration,audioDuration:e.audio_duration,videoDuration:e.video_duration,canInviteNewParticipant:p.default.isGroupVoiceCallEnabled()&&Boolean(e.can_invite_new_participant),canSwitchAudioVideo:Boolean(e.can_switch_audio_video),isGroupCall:Boolean(e.is_group_call),participantCount:e.participant_count,participants:e.participants.filter((e=>null!=e.jid)).map((e=>{var t=(0,g.createUserWid)(e.jid.user,e.jid.server);return{wid:t.toString(),userJid:t.toString({legacy:!0}),deviceRawJid:e.device_raw_jid,isMuted:Boolean(e.is_muted),isSelf:Boolean(e.is_self),isInterrupted:Boolean(e.is_interrupted),isBackgrounded:Boolean(e.is_backgrounded),orderId:e.order_id,videoOrientation:e.video_orientation,videoRenderStarted:Boolean(e.video_render_started),videoState:e.video_state,state:e.state}})),videoCaptureStarted:Boolean(e.video_capture_started),videoPreviewStarted:Boolean(e.video_preview_started),videoEnabled:Boolean(e.video_enabled),videoEnabledAtCallStart:Boolean(e.video_enabled_at_call_start),rotateVideo:Boolean(e.rotate_video)}}function S(e){return!l.default.activeCall&&!e.isContactBlocked&&h.default.displayInfo===h.StreamInfo.NORMAL}function C(e){if(e)return l.default.get(e)}var T={parseCallInfo:y,canStartCall:S,canStartVideoCall:function(e){return S(e)&&o.default.isVideoAvailable},isParticipantRequestingVideoUpgrade:function(e,t){var a=C(e);return!!(a&&a.callInfo&&a.callInfo.participants.length)&&!!a.callInfo.participants.find((e=>e.isSelf===t&&e.videoState===_.VideoState.VideoStateUpgradeRequest))},updateCallWithCallInfo:function(e){var t=e&&C(e.call_id);e&&t&&(t.callInfo=y(e))},callOfferNackToast:function(e,t,a){var r=t.map((e=>{var t=u.default.get(e);return t?t.shortName||t.name||t.displayName:(0,v.default)(e)})).join(c.default.t(594)),i=null;switch(e){case 401:i=c.default.t(1499);break;case 404:i=c.default.t(1502,{callee:r});break;case 405:i=c.default.t(1497,{callee:r});break;case 460:case 406:i=a?c.default.t(1504,{callee:r}):c.default.t(1501,{callee:r});break;case 426:i=a?c.default.t(1504,{callee:r}):c.default.t(1500,{callee:r});break;case 427:case 461:default:i=a?c.default.t(1520):c.default.t(1496)}i&&d.default.openToast(n.createElement(f.default,{msg:i,id:(0,f.genId)()}))},getCallFromCallId:C,checkIfCanStartCall:function(e){var t;if(!e.isGroup&&!e.contact)return __LOG__(4,void 0,new Error)(E()),!1;var a=!0;if(h.default.displayInfo!==h.StreamInfo.NORMAL)switch(a=!1,h.default.displayInfo){case h.StreamInfo.RESUMING:case h.StreamInfo.TIMEOUT:m.default.openModal(c.default.t(1492),c.default.t(1493));break;case h.StreamInfo.OFFLINE:case h.StreamInfo.OPENING:case h.StreamInfo.CONNECTING:default:m.default.openModal(c.default.t(1490),c.default.t(1491))}else!e.isGroup&&(null===(t=e.contact)||void 0===t?void 0:t.isContactBlocked)?(a=!1,m.default.openUnblockModal(e.contact)):l.default.activeCall?(a=!1,m.default.openModal(c.default.t(1482))):o.default.isMicrophoneAvailable?o.default.isSpeakerAvailable?e.isVideo&&!o.default.isVideoAvailable&&(a=!1,m.default.openModal(c.default.t(1486),c.default.t(1487))):(a=!1,m.default.openModal(c.default.t(1494),c.default.t(1495))):(a=!1,m.default.openModal(c.default.t(1488),c.default.t(1489)));return a}};t.Z=T},35205:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CallNetworkMedium=t.ParticipantState=t.VideoUpgradeRequestEndedReason=t.VideoState=t.VoipSettingsType=t.CALL_LOG_RESULT_TYPE=t.CALL_LOG_RESULT=t.CALL_RESULT_TYPE=t.RENDERER_IPC_EVENTS=t.MAIN_IPC_EVENTS=t.VOIP_WINDOW_IPC_EVENTS=t.CALL_STATES=t.CALL_UI_STATES=t.WACallState=t.WACallEndReason=t.WAVideoCodecScheme=t.WACallEvent=void 0;t.WACallEvent={WANone:0,CallOfferSent:1,CallOfferReceived:2,CallOfferAckedWithRelayInfo:3,CallOfferNacked:4,CallOfferReceiptReceived:5,CallAcceptFailed:6,CallAcceptSent:7,CallAcceptReceived:8,CallPreacceptReceived:9,CallTerminateReceived:10,CallRejectReceived:11,CallOfferResend:12,AudioStreamStarted:13,P2PNegotiationSuccess:14,RelayCreateSuccess:15,CallStateChanged:16,P2PNegotiationFailed:17,MediaStreamError:18,AudioInitError:19,NoSamplingRatesForAudioRecord:20,SendOfferFailed:21,HandleOfferFailed:22,SendAcceptFailed:23,HandlePreAcceptFailed:24,HandleAcceptFailed:25,WillCreateSoundPort:26,SoundPortCreateFailed:27,TransportCandSendFailed:28,P2PTransportCreateFailed:29,P2PTransportMediaCreateFailed:30,P2PTransportStartFailed:31,P2PTransportRestartSuccess:32,MissingRelayInfo:33,ErrorGatheringHostCandidates:34,MediaStreamStartError:35,RelayLatencySendFailed:36,RelayElectionSendFailed:37,CallEnding:38,CallCaptureBufferFilled:39,CallCaptureEnded:40,RxTimeout:41,TxTimeout:42,RxTrafficStarted:43,RxTrafficStopped:44,RTCPPacketReceived:45,RTCPByeReceived:46,RelayBindsFailed:47,SoundPortCreated:48,AudioDriverRestart:49,Echo:50,SelfVideoStateChanged:51,PeerVideoStateChanged:52,VideoPortCreated:53,VideoPortCreateFailed:54,VideoDecodeStarted:55,VideoRenderStarted:56,VideoCaptureStarted:57,VideoPreviewFailed:58,VideoPreviewReady:59,VideoPreviewShouldMinimize:60,VideoStreamCreateError:61,VideoRenderFormatChanged:62,VideoCodecMismatch:63,VideoDecodePaused:64,VideoDecodeResumed:65,VideoEncodeFatalError:66,VideoDecodeFatalError:67,BatteryLevelLow:68,PeerBatteryLevelLow:69,GroupInfoChanged:70,FieldstatsReady:71,PendingCallInfoChanged:72,MuteStateChanged:73,InterruptionStateChanged:74,RxTrafficStateForPeerChanged:75,HandleAcceptReceiptFailed:76,GroupParticipantLeft:77,AudioRouteChangeRequest:78,HandleAcceptAckFailed:79,CallMissed:80,WeakWiFiSwitchedToCellular:81,CallAutoConnect:82,RejectedDecryptionFailure:83,PeerDeviceOrientationChanged:84,HandleOfferAckFailed:85,PendingCallAutoRejected:86,FDLeakDetected:87,RestartCamera:88,AudioTestReplayFinished:89,SyncDevices:90,VideoCodecStateChanged:91,CallFatal:92,UpdateJoinableCallLog:93,WAMax:94};t.WAVideoCodecScheme={VideoCodecSchemeNone:0,VideoCodecSchemeH26X:1,VideoCodecSchemeVPX:2,VideoCodecSchemeVPXH26X:3};t.WACallEndReason={WACallEndReasonUnknown:0,WACallEndReasonEndButtonTapped:1,WACallEndReasonEndButtonTappedOnBusy:2,WACallEndReasonReject:3,WACallEndReasonRejectUnavailable:4,WACallEndReasonRejectBlocked:5,WACallEndReasonTimeout:6,WACallEndReasonPeerUnavailable:7,WACallEndReasonRejectedByPeer:8,WACallEndReasonTimedoutByPeer:9,WACallEndReasonTerminatedByPeer:10,WACallEndReasonFailed:11,WACallEndReasonHandledRemotely:12};t.WACallState={WACallStateNone:0,WACallStateCalling:1,WACallStatePreacceptReceived:2,WACallStateReceivedCall:3,WACallStateAcceptSent:4,WACallStateAcceptReceived:5,WACallStateCallActive:6,WACallStateCallActiveElseWhere:7,WACallStateReceivedCallWithoutOffer:8};t.CALL_UI_STATES={NONE:"NONE",OUTGOING_RING:"OUTGOING_RING",INCOMING_RING:"INCOMING_RING",OUTGOING_CALLING:"OUTGOING_CALLING",CONNECTING:"CONNECTING",RECONNECTING:"RECONNECTING",ACTIVE:"ACTIVE",ENDED:"ENDED",REJECTED:"REJECTED",REMOTE_CALL_IN_PROGRESS:"REMOTE_CALL_IN_PROGRESS",FAILED:"FAILED"};t.CALL_STATES={INCOMING_RING:"INCOMING_RING",OUTGOING_RING:"OUTGOING_RING",OUTGOING_CALLING:"OUTGOING_CALLING",CONNECTING:"CONNECTING",CONNECTION_LOST:"CONNECTION_LOST",ACTIVE:"ACTIVE",HANDLED_REMOTELY:"HANDLED_REMOTELY",ENDED:"ENDED",REJECTED:"REJECTED",REMOTE_CALL_IN_PROGRESS:"REMOTE_CALL_IN_PROGRESS",FAILED:"FAILED",NOT_ANSWERED:"NOT_ANSWERED"};t.VOIP_WINDOW_IPC_EVENTS={INIT:"VOIP_WINDOW_INIT",UPDATE:"VOIP_WINDOW_UPDATE",REJECT:"VOIP_WINDOW_REJECT",ACCEPT:"VOIP_WINDOW_ACCEPT",IGNORE:"VOIP_WINDOW_IGNORE",END:"VOIP_WINDOW_END",RESET:"VOIP_WINDOW_RESET",TOGGLE_MUTE:"VOIP_WINDOW_TOGGLE_MUTE",TOGGLE_CAMERA:"VOIP_WINDOW_TOGGLE_CAMERA",OPEN_IN_CALL_MENU:"OPEN_IN_CALL_MENU",CLOSE_IN_CALL_MENU:"CLOSE_IN_CALL_MENU",TOGGLE_DEBUG_INFO:"TOGGLE_DEBUG_INFO",GROUP_CALL_INVITE:"GROUP_CALL_INVITE",UPGRADE_REQUEST:"UPGRADE_REQUEST",UPGRADE_ACCEPT:"UPGRADE_ACCEPT",UPGRADE_REJECT:"UPGRADE_REJECT",UPGRADE_CANCEL:"UPGRADE_CANCEL",INITIATE_WINDOW_MOVE:"INITIATE_WINDOW_MOVE",CLOSE_WINDOW_CLICK:"CLOSE_WINDOW_CLICK",MINIMIZE_WINDOW_CLICK:"MINIMIZE_WINDOW_CLICK",MAXIMIZE_WINDOW_CLICK:"MAXIMIZE_WINDOW_CLICK",UNMAXIMIZE_WINDOW_CLICK:"UNMAXIMIZE_WINDOW_CLICK",WINDOW_MAXIMIZED:"WINDOW_MAXIMIZED",WINDOW_UNMAXIMIZED:"WINDOW_UNMAXIMIZED",WINDOW_TITLE_DBL_CLICK:"WINDOW_TITLE_DBL_CLICK",WINDOW_ALWAYS_ON_TOP_CHANGED:"WINDOW_ALWAYS_ON_TOP_CHANGED",L10N_UPDATE:"L10N_UPDATE"};t.MAIN_IPC_EVENTS={EVENT:"VOIP_MAIN_WINDOW_EVENT",SIGNALING:"VOIP_MAIN_WINDOW_SIGNALING",LOGGING:"VOIP_MAIN_WINDOW_LOGGING",LOG_PATH:"VOIP_MAIN_WINDOW_LOG_PATH",AV_EVENT:"AV_DEVICE_INFO_CHANGED",AV_LOG:"AV_MAIN_WINDOW_LOGGING",AV_DEVICE_CHANGE_TOAST:"AV_DEVICE_CHANGE_TOAST",AV_DEVICE_STATUS_CHANGE:"AV_DEVICE_STATUS_CHANGE"};t.RENDERER_IPC_EVENTS={ENABLE_VOIP_FEATURES:"voip:ENABLE_VOIP_FEATURES",ENABLE_VOIP_GROUP_FEATURES:"voip:ENABLE_VOIP_GROUP_FEATURES"};t.CALL_RESULT_TYPE={INVALID:0,CONNECTED:1,REJECTED_BY_USER:2,REJECTED_BY_SERVER:3,MISSED:4,BUSY:5,SETUP_ERROR:6,SERVER_NACK:7,CALL_OFFER_ACK_NOT_RECEIVED:8,MISSED_NO_RECEIPT:9,ACCEPTED_BUT_NOT_CONNECTED:10,CALL_CANCELED_CELLULAR_IN_PROGRESS:11,CALL_CANCELED_AIRPLANE_MODE_ON:12,CALL_CANCELED_NO_NETWORK:13,CALL_OFFER_ACK_CORRUPT:14,CALL_REJECTED_TOS:15,CALL_REJECTED_E2E:16,CALL_REJECTED_UNAVAILABLE:17,CALL_CANCELED_OFFER_NOT_SENT:18,PEER_SETUP_ERROR:19,ACTIVE_ELSEWHERE:20,NO_DECRYPTED_OFFER:21,ACCEPTED_ELSEWHERE:22,REJECTED_ELSEWHERE:23};t.CALL_LOG_RESULT={0:"invalid",1:"canceled",2:"missed",3:"unavailable",4:"reject",5:"connected"};t.CALL_LOG_RESULT_TYPE={INVALID:0,CANCELED:1,MISSED:2,UNAVAILABLE:3,REJECT:4,CONNECTED:5};t.VoipSettingsType={voipSettingsNone:0,voipSettingsAudio:1,voipSettingsVideo:2};t.VideoState={VideoStateDisabled:0,VideoStateEnabled:1,VideoStatePaused:2,VideoStateUpgradeRequest:3,VideoStateUpgradeAccept:4,VideoStateUpgradeReject:5,VideoStateStopped:6,VideoStateUpgradeRejectByTimeout:7,VideoStateUpgradeCancel:8,VideoStateUpgradeCancelByTimeout:9,VideoStateError:20};t.VideoUpgradeRequestEndedReason={EndedByUser:0,EndedByTimeout:1};t.ParticipantState={ParticipantStateInvalid:0,ParticipantConnected:1,ParticipantIncoming:2,ParticipantRinging:3,ParticipantRejected:4,ParticipantTerminated:5,ParticipantTimedout:6,ParticipantCreatingCall:7,ParticipantInvisible:8,ParticipantVisible:9,ParticipantCancelOffer:10};t.CallNetworkMedium={CallNetworkMediumCellular:1,CallNetworkMediumWifi:2,CallNetworkMediumNone:3}},74282:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.logLabelOperationEvent=function(e,t,a){var r={labelOperation:e};null!=t&&Object.assign(r,{labelCount:t});a&&Object.assign(r,{labelTarget:a});new i.default.LabelEvent(r).commit()};var i=r(a(40210))},23062:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);t.j=void 0;var s=i(a(19976)),n=i(a(43334)),o=i(a(79711)),l=i(a(50935)),d=i(a(7470)),u=i(a(25353)),c=i(a(28267)),h=a(95595),f=i(a(40210)),p=i(a(58885)),m=a(86809),_=i(a(35920)),v=r(a(17026));function g(){var e=(0,s.default)(["One or more of the login timings was not logged: "]);return g=function(){return e},e}function E(){var e=(0,s.default)(["wam:Error comitting login event"]);return E=function(){return e},e}function y(){return Math.floor(window.performance.now())}class S extends c.default{constructor(){super(),this.timings={chatSync:void 0,contactSync:void 0,endSync:void 0,msgSync:void 0,startSync:void 0},this.data={webcPersistentLoginEnabled:!1,webcQrCodes:0,webcSyncMessageCount:0,webcSyncMessageSize:0},window.performance&&window.performance.now&&((0,h.knowsPhone)()?this.listenToOnce(o.default,"logout",this.init):this.init())}init(){this.timings.startSync=v.default.lastSyncStart,this.listenTo(v.default,"change:mode",this.changeStreamMode),this.listenTo(n.default,l.default.COLLECTION_HAS_SYNCED,this.onChatSync),this.listenTo(d.default,l.default.COLLECTION_HAS_SYNCED,this.onContactSync),this.listenTo(p.default,l.default.COLLECTION_HAS_SYNCED,this.onMsgSync),this.listenTo(p.default,"handle:msg_history",this.onMsgHistory)}changeStreamMode(){v.default.mode===v.StreamMode.SYNCING&&(this.timings.startSync=y(),this.data.webcPersistentLoginEnabled=(0,h.getRememberMe)()),v.default.mode===v.StreamMode.MAIN&&(this.timings.endSync=y(),this.maybeLogToWam())}onChatSync(e){null!=e.timing?this.data.webcSyncChatT=e.timing:this.timings.chatSync=y(),this.data.webcSyncChatCount=e.count,this.data.webcSyncChatSize=e.binarySize,this.maybeLogToWam()}onMsgSync(e){e&&(this.timings.msgSync=y(),this.data.webcSyncMessageCount+=e.count,this.data.webcSyncMessageSize+=e.binarySize),this.maybeLogToWam()}onContactSync(e){null!=e.timing?this.data.webcSyncContactT=e.timing:this.timings.contactSync=y(),this.data.webcSyncContactCount=e.count,this.data.webcSyncContactSize=e.binarySize,this.maybeLogToWam()}onMsgHistory(e){this.data.webcSyncMessageSize+=e.binarySize,this.data.webcSyncMessageCount+=e.count,null!=this.timings.msgSync&&(this.timings.msgSync=y())}maybeLogToWam(){var{contactSync:e,msgSync:t,chatSync:a}=this.timings,r=null!=a&&Number.isFinite(a||this.data.webcSyncChatT),i=null!=e&&Number.isFinite(e||this.data.webcSyncContactT),s=Number.isFinite(t);r&&i&&s&&(this._commitPromise||(this._commitPromise=(0,u.default)().then((e=>this._commitEvent(e))).catch((()=>{__LOG__(3)(E())})).finally((()=>this.reset()))))}_commitEvent(e){var{startSync:t,endSync:a,contactSync:r,msgSync:i,chatSync:s}=this.timings,n=_.default.initialDisplayDate;null!=n&&0!==n&&null!=t&&null!=a&&null!=i&&null!=s&&null!=r&&Number.isFinite(n)&&Number.isFinite(t)&&Number.isFinite(a)?(this.data.webcQrLoadT=n,this.data.webcQrCodes=_.default.get(),this.data.webcLoginT=t-n,this.data.webcSyncT=a-t,this.data.webcSyncMessageT=i-t,this.data.webcSyncChatT||(this.data.webcSyncChatT=s-t),this.data.webcSyncContactT||(this.data.webcSyncContactT=r-t),this.data.webcBrowserNetworkType=(0,m.getEffectiveNetworkType)(),e&&(this.data.webcBrowserStorageQuotaBytes=e.quota,this.data.webcBrowserStorageQuotaUsedBytes=e.usage),new f.default.WebcLogin(this.data).commit()):__LOG__(3)(g())}reset(){this.stopListening(),this.data={webcPersistentLoginEnabled:!1,webcQrCodes:0,webcSyncMessageCount:0,webcSyncMessageSize:0},this.timings={chatSync:void 0,contactSync:void 0,endSync:void 0,msgSync:void 0,startSync:void 0},this._commitPromise=void 0,this.listenToOnce(o.default,"logout",this.init)}}t.j=()=>new S},61196:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(19976)),s=r(a(40210));function n(){var e=(0,i.default)(["mediaPickerSentUnchange mediaPickerSent: ",", mediaPickerChanged: ",""]);return n=function(){return e},e}var o={document:s.default.MEDIA_TYPE.DOCUMENT,video:s.default.MEDIA_TYPE.VIDEO,gif:s.default.MEDIA_TYPE.GIF,image:s.default.MEDIA_TYPE.PHOTO,audio:s.default.MEDIA_TYPE.AUDIO};t.default=class{constructor(e,t,a){this.mediaPickerSentUnchanged=0,this.mediaPickerDeleted=0,this.mediaPickerChanged=new Set,this.mediaPickerCroppedRotated=new Set,this.mediaPickerDrawing=new Set,this.mediaPickerStickers=new Set,this.mediaPickerText=new Set,this.mediaPickerLikeDoc=0,this.mediaPickerNotLikeDoc=0,this.mediaPickerT=0,this.t0=Date.now(),this.mediaType=o[t],this.mediaPickerOrigin=a,this.medias=new Set,this.medias.add(e),this.changeTypes={mediaPickerCroppedRotated:this.mediaPickerCroppedRotated,mediaPickerDrawing:this.mediaPickerDrawing,mediaPickerStickers:this.mediaPickerStickers,mediaPickerText:this.mediaPickerText}}onAdd(e){this.medias.add(e),"document"===this.mediaType?this.mediaPickerLikeDoc++:this.mediaPickerNotLikeDoc++}onChange(e,t){this.mediaPickerChanged.add(e),this.changeTypes[t].add(e)}onDelete(e){if(this.medias.delete(e),this.mediaPickerDeleted++,0===this.medias.size)return this.onCancel()}onSend(){return this.mediaPickerSent=this.medias.size,this.mediaPickerSentUnchanged=this.mediaPickerSent-this.mediaPickerChanged.size,this.dataPreflight()}onCancel(){return this.mediaPickerSent=0,this.mediaPickerSentUnchanged=0,this.dataPreflight()}onPause(){this.mediaPickerT+=Date.now()-(this.t0||0),this.t0=null}onResume(){this.t0=null!=this.t0?this.t0:Date.now()}dataPreflight(){var e=this.mediaPickerSentUnchanged;return isNaN(e)&&(e=0,__LOG__(4,void 0,new Error,!0)(n(),null!=this.mediaPickerSent&&0!==this.mediaPickerSent?this.mediaPickerSent:"undefined",this.mediaPickerChanged.size||"undefined"),SEND_LOGS("mediaPickerSentUnchange is not a number")),{mediaPickerSent:this.mediaPickerSent,mediaPickerSentUnchanged:e,mediaPickerT:this.mediaPickerT+(Date.now()-(this.t0||0)),mediaType:this.mediaType,mediaPickerOrigin:this.mediaPickerOrigin,mediaPickerChanged:this.mediaPickerChanged.size,mediaPickerCroppedRotated:this.mediaPickerCroppedRotated.size,mediaPickerDrawing:this.mediaPickerDrawing.size,mediaPickerStickers:this.mediaPickerStickers.size,mediaPickerText:this.mediaPickerText.size,mediaPickerLikeDoc:this.mediaPickerLikeDoc,mediaPickerNotLikeDoc:this.mediaPickerNotLikeDoc,mediaPickerDeleted:this.mediaPickerDeleted}}}},44422:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MediaPickerChangeTypes=void 0;var i=r(a(70417)),s=r(a(61196)),n=r(a(40210));t.MediaPickerChangeTypes={mediaPickerCroppedRotated:"mediaPickerCroppedRotated",mediaPickerDrawing:"mediaPickerCroppedRotated",mediaPickerStickers:"mediaPickerCroppedRotated",mediaPickerText:"mediaPickerCroppedRotated"};t.default=class{constructor(){this.mediaByTypeAndOrigin=new Map,this.mediaEventReverseIndex=new Map,this.chatRecipients=null}pauseTimer(){this.mediaByTypeAndOrigin.forEach((e=>{e.onPause()}))}resumeTimer(){this.mediaByTypeAndOrigin.forEach((e=>{e.onResume()}))}_getKey(e,t){return"".concat(e,"_").concat(t)}_commitLog(e){new n.default.MediaPicker((0,i.default)((0,i.default)({},e),{},{chatRecipients:this.chatRecipients})).commit()}_processNewMedia(e,t,a){var r=this._getKey(t,a),i=this.mediaByTypeAndOrigin.get(r);if(i)i.onAdd(e),this.mediaEventReverseIndex.set(e,i);else{var n=new s.default(e,t,a);this.mediaByTypeAndOrigin.set(r,n),this.mediaEventReverseIndex.set(e,n)}}logChange(e,t){var a=this.mediaEventReverseIndex.get(e);a&&a.onChange(e,t)}logDelete(e){var t=this.mediaEventReverseIndex.get(e);t&&t.onDelete(e)}logSend(){this.mediaByTypeAndOrigin.forEach((e=>{this._commitLog(e.onSend())}))}logCancel(){this.mediaByTypeAndOrigin.forEach((e=>{this._commitLog(e.onCancel())}))}logAdd(e,t,a){this.mediaEventReverseIndex.get(e)||this._processNewMedia(e,t,a)}}},66925:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.getMetricMediaType=function(e){switch(e){case"audio":return l.default.MEDIA_TYPE.AUDIO;case"document":case"thumbnail-document":return l.default.MEDIA_TYPE.DOCUMENT;case"gif":return l.default.MEDIA_TYPE.GIF;case"image":case"thumbnail-image":return l.default.MEDIA_TYPE.PHOTO;case"ppic":return l.default.MEDIA_TYPE.PROFILE_PIC;case"product":return l.default.MEDIA_TYPE.PRODUCT_IMAGE;case"ptt":return l.default.MEDIA_TYPE.PTT;case"sticker":return l.default.MEDIA_TYPE.STICKER;case"video":return l.default.MEDIA_TYPE.VIDEO;case"template":return l.default.MEDIA_TYPE.TEMPLATE;case"md-msg-hist":return l.default.MEDIA_TYPE.MD_HISTORY_SYNC;case"md-app-state":return l.default.MEDIA_TYPE.MD_APP_STATE;case"product-catalog-image":return l.default.MEDIA_TYPE.PRODUCT_IMAGE;default:throw new Error("webMediaType is invalid: ".concat(e))}},t.getMetricUploadErrorResultType=function(e){if(e instanceof o.MMSUnauthorizedError)return l.default.MEDIA_UPLOAD_RESULT_TYPE.ERROR_NO_PERMISSIONS;if(e instanceof o.MediaTooLargeError)return l.default.MEDIA_UPLOAD_RESULT_TYPE.ERROR_BAD_MEDIA;if(e instanceof o.MMSThrottleError)return l.default.MEDIA_UPLOAD_RESULT_TYPE.ERROR_THROTTLE;if(e instanceof o.HttpStatusCodeError&&e.status>=500)return l.default.MEDIA_UPLOAD_RESULT_TYPE.ERROR_SERVER;if(e instanceof n.NoMediaHostsError)return l.default.MEDIA_UPLOAD_RESULT_TYPE.ERROR_MEDIA_CONN;if(e instanceof Promise.CancellationError||e.name===s.ABORT_ERROR)return l.default.MEDIA_UPLOAD_RESULT_TYPE.ERROR_CANCEL;if(e instanceof o.HttpNetworkError)return l.default.MEDIA_UPLOAD_RESULT_TYPE.ERROR_UPLOAD;return l.default.MEDIA_UPLOAD_RESULT_TYPE.ERROR_UNKNOWN},t.getMetricDownloadErrorResultType=function(e){if(e instanceof o.MMSThrottleError)return l.default.MEDIA_DOWNLOAD_RESULT_TYPE.ERROR_THROTTLE;if(e instanceof n.NoMediaHostsError)return l.default.MEDIA_DOWNLOAD_RESULT_TYPE.ERROR_MEDIA_CONN;if(e instanceof o.HttpNetworkError)return l.default.MEDIA_DOWNLOAD_RESULT_TYPE.ERROR_NETWORK;if(e instanceof o.HttpStatusCodeError)switch(e.status){case 404:case 410:return l.default.MEDIA_DOWNLOAD_RESULT_TYPE.ERROR_TOO_OLD;case 416:return l.default.MEDIA_DOWNLOAD_RESULT_TYPE.ERROR_CANNOT_RESUME;case 401:return l.default.MEDIA_DOWNLOAD_RESULT_TYPE.ERROR_INVALID_URL;case 429:case 507:return l.default.MEDIA_DOWNLOAD_RESULT_TYPE.ERROR_THROTTLE;default:return l.default.MEDIA_DOWNLOAD_RESULT_TYPE.ERROR_UNKNOWN}if(e instanceof Promise.CancellationError||e.name===s.ABORT_ERROR)return l.default.MEDIA_DOWNLOAD_RESULT_TYPE.ERROR_CANCEL;if(e instanceof o.MmsDownloadFilehashMismatchError)return l.default.MEDIA_DOWNLOAD_RESULT_TYPE.ERROR_ENC_HASH_MISMATCH;return l.default.MEDIA_DOWNLOAD_RESULT_TYPE.ERROR_UNKNOWN},t.getStatusCode=function(e){if(e instanceof o.HttpStatusCodeError)return e.status},t.generateMediaEventId=function(){return 1+Math.floor(Number.MAX_SAFE_INTEGER*Math.random())},t.logErrorUnknownDetails=function(e,t){if(null==t)return;var a;e.overallDownloadResult===l.default.MEDIA_DOWNLOAD_RESULT_TYPE.ERROR_UNKNOWN?a=l.default.WEBC_MEDIA_OPERATION_CODE.DOWNLOAD:e.overallUploadResult===l.default.MEDIA_UPLOAD_RESULT_TYPE.ERROR_UNKNOWN&&(a=l.default.WEBC_MEDIA_OPERATION_CODE.UPLOAD);if(null==a)return;new l.default.WebcMediaErrorUnknownDetails({mediaId:e.mediaId,webcMediaOperation:a,webcMediaErrorName:t.name}).commit()},t.getMetricBackendStore=function(e){if(!e)return l.default.BACKEND_STORE_TYPE.NON_DIRECT_PATH;switch(e.slice(0,2).toLowerCase()){case"/v":return l.default.BACKEND_STORE_TYPE.EVERSTORE;case"/o":return l.default.BACKEND_STORE_TYPE.OIL}return __LOG__(4,void 0,new Error,!0)(d()),SEND_LOGS("unrecognized-direct-path-type"),null};var i=r(a(19976)),s=a(8701),n=a(25172),o=a(85699),l=r(a(40210));function d(){var e=(0,i.default)(["Unrecognized direct path type"]);return d=function(){return e},e}},16199:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.newMessageQueryEvent=function(e){return new s.default.WebcMessageQuery({webcResponseBytes:0,webcMessageCount:0,webcTextMessageCount:0,webcVideoMessageCount:0,webcPhotoMessageCount:0,webcAudioMessageCount:0,webcPttMessageCount:0,webcStickerMessageCount:0,webcDocumentMessageCount:0,webcOtherMessageCount:0,webcMessageQueryTrigger:e})},t.logMessageCounts=function(e,t){e.webcMessageCount+=t.length;for(var a=0,r=t[a];a<t.length;++a,r=t[a])switch(r.type){case n.CHAT:case n.LOCATION:case n.PAYMENT:case n.VCARD:case n.CIPHERTEXT:case n.MULTI_VCARD:case n.REVOKED:case n.OVERSIZED:e.webcTextMessageCount+=1;break;case n.IMAGE:case n.PRODUCT:e.webcPhotoMessageCount+=1;break;case n.VIDEO:e.webcVideoMessageCount+=1;break;case n.AUDIO:e.webcAudioMessageCount+=1;break;case n.PTT:e.webcPttMessageCount+=1;break;case n.STICKER:e.webcStickerMessageCount+=1;break;case n.DOCUMENT:e.webcDocumentMessageCount+=1;break;default:e.webcOtherMessageCount+=1}};var i=r(a(50935)),s=r(a(40210));var{MSG_TYPE:n}=i.default},954:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(39329);t.default=class{constructor(e){this.ship=e=>{var t=this.bitmap;if(t){var a=Date.now();a>this.lastActiveInMS&&(this.bitmapLength=Math.min(64,Math.ceil(a/1e3-this.startTimeInSec)));var r={sessionId:this.sessionId,startTime:this.startTimeInSec,bitmap:t,bitmapLen:this.bitmapLength,sessionSeq:this.sequenceId,sessionCum:this.cumulativeBitsSet};(e||this.loggingCallback)(r),this.timer.cancel(),this.bitmap=null}},this.loggingCallback=e,this.timer=new r.ShiftTimer(this.ship),this._initSession(),this._initArray(Math.floor(Date.now()/1e3))}_initSession(){this.cumulativeBitsSet=0,this.sequenceId=-1,this.sessionId=Math.floor(2147483648*Math.random()).toString(36)}_initArray(e){this.startTimeInSec=e,this.lastActiveInMS=1e3*this.startTimeInSec,this.bitmap=new Int32Array(2),this.bitmap[0]=1,this.bitmapLength=1,this.cumulativeBitsSet+=1,this.sequenceId+=1;this.timer.debounceAndCap(64e3,64e3)}_doUpdate(e){var t=e-this.startTimeInSec;this.bitmap&&(t<0||t>=64)&&this.ship(),this.bitmap?(this.bitmap[t>>5]|=1<<(31&t),this.bitmapLength=t+1,this.cumulativeBitsSet+=1,this.lastActiveInMS=1e3*e):this._initArray(e)}update(e){e>=this.lastActiveInMS&&e-this.lastActiveInMS<1e3||this._doUpdate(Math.floor(e/1e3))}shipAndEndSession(e){this.ship(e),this._initSession()}}},85217:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(19976)),n=r(a(2784)),o=i(a(50935)),l=i(a(77771)),d=i(a(20642)),u=i(a(40210)),c=i(a(32510)),h=i(a(954));function f(){var e=(0,s.default)(["Invalid stashed time spent event"]);return f=function(){return e},e}function p(){var e=(0,s.default)(["Invalid stashed time spent event"]);return p=function(){return e},e}function m(){var e=(0,s.default)(["Time Spent Logger not started"]);return m=function(){return e},e}var _=[{source:window,name:"focus"},{source:document,name:"wheel"},{source:document,name:"keydown"},{source:document,name:"mouseover"},{source:document,name:"mousemove"},{source:document,name:"click"},{source:document,name:"scroll"}];class v extends n.Component{constructor(...e){super(...e),this.lastInform=Date.now(),this.lastPageX=-1,this.lastPageY=-1,this.bitArray=null,this.endSession=()=>{this.bitArray&&this.bitArray.shipAndEndSession()},this.handleRestore=()=>{var e=this.bitArray;e?(this.lastInform=Date.now(),e.update(this.lastInform)):__LOG__(3)(m())},this.handleEvent=e=>{var t=this.bitArray;if(t){if(e instanceof MouseEvent){if(e.pageX===this.lastPageX&&e.pageY===this.lastPageY&&"click"!==e.type)return;this.lastPageX=e.pageX,this.lastPageY=e.pageY}var a=Date.now(),r=a-this.lastInform;r>0?(this.lastInform=a,t.update(this.lastInform)):r<-5&&(this.lastInform=a)}},this.handleUnload=()=>{this.bitArray&&(this.bitArray.ship(this.stashLogs),this.bitArray=null)},this.shipLogs=e=>{var t=new u.default.UserActivity({userActivitySessionId:e.sessionId,userActivityStartTime:e.startTime,userActivityBitmapLen:e.bitmapLen,userActivityBitmapLow:e.bitmap[0],userActivitySessionSeq:e.sessionSeq,userActivitySessionCum:e.sessionCum});e.bitmapLen>32&&(t.userActivityBitmapHigh=e.bitmap[1]),t.commit()},this.stashLogs=e=>{for(var t="".concat(e.bitmap[0]),a=1;a<e.bitmap.length;++a)t+=":".concat(e.bitmap[a]);var r="".concat(e.sessionId,":").concat(e.sessionSeq,":").concat(e.sessionCum)+":".concat(e.startTime,":").concat(e.bitmapLen,"$").concat(t);l.default.permanentStorage.setItem(o.default.KEY_TIME_SPENT_EVENT,r)}}componentDidMount(){var e=l.default.permanentStorage.getItem(o.default.KEY_TIME_SPENT_EVENT);e&&(this.parseAndShipStashed(e),l.default.permanentStorage.removeItem(o.default.KEY_TIME_SPENT_EVENT));var t=this.props.listeners;this.bitArray=new h.default(this.shipLogs);var a=!c.default||{passive:!0,capture:!0};t.add(window,"beforeunload",this.handleUnload);for(var r=0;r<_.length;++r){var{source:i,name:s}=_[r];t.add(i,s,this.handleEvent,a)}}componentWillUnmount(){this.bitArray&&(this.bitArray.ship(),this.bitArray=null)}parseAndShipStashed(e){var[t,a,...r]=e.split("$");if(!r.length&&a)if(5===(t=t.split(":")).length){a=new Int32Array(a.split(":").map((e=>Number(e))));var i={sessionId:t[0],sessionSeq:Number(t[1]),sessionCum:Number(t[2]),startTime:Number(t[3]),bitmapLen:Number(t[4]),bitmap:a};this.shipLogs(i)}else __LOG__(3)(f());else __LOG__(3)(p())}render(){return null}}var g=(0,d.default)(v);t.default=g},21088:e=>{e.exports={Action:"keyboard_action",Event:"keyboard_event",Events:{LOGGED_IN:"logged_in",LOGGED_OUT:"logged_out",ARCHIVE:"archived",MUTE:"muted",PIN:"pinned",READ:"read",READ_ONLY:"read_only",CHAT_KIND:"chat_kind",ZOOM:"zoom",LAUNCH:"launch",BATCH_RENDER:"batch_render"}}},68398:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAppUserModelId=function(){return"win32"!==process.platform||process.windowsStore?null:"com.squirrel.WhatsApp.WhatsApp"}},17483:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.getDoNotDisturb=function(){try{var e,t;if("darwin"===process.platform)return(null===(e=window.Native.MacOSNotificationState)||void 0===e?void 0:e.getDoNotDisturb())||(null===(t=window.Native.MacOSNotificationState)||void 0===t?void 0:t.getNotificationState())===o.SESSION_SCREEN_IS_LOCKED;if("win32"===process.platform){var a,r,i,d,u;if((null===(a=window.Native.WindowsNotificationState)||void 0===a?void 0:a.getNotificationState())!==o.QUNS_ACCEPTS_NOTIFICATIONS)return!0;var c=(0,s.getAppUserModelId)(),h=c&&"YES"===(null===(r=window.Native.WindowsFocusAssist)||void 0===r||null===(i=r.isPriority(c))||void 0===i?void 0:i.name),f=null===(d=window.Native.WindowsFocusAssist)||void 0===d?void 0:d.getFocusAssist().name;return!!(h&&f===l.ALARMS_ONLY||!h&&[l.PRIORITY_ONLY,l.ALARMS_ONLY].includes(f))||!!(null===(u=window.Native.WindowsQuiteHours)||void 0===u?void 0:u.getIsQuietHours())}}catch(e){__LOG__(3)(n(),e)}return!1};var i=r(a(19976)),s=a(68398);function n(){var e=(0,i.default)(["getDoNotDisturb failed with error ",""]);return n=function(){return e},e}var o=a(28103).Mirrored(["UNKNOWN","SESSION_SCREEN_IS_LOCKED","SESSION_ON_CONSOLE_KEY","QUNS_NOT_PRESENT","QUNS_BUSY","QUNS_RUNNING_D3D_FULL_SCREEN","QUNS_PRESENTATION_MODE","QUNS_ACCEPTS_NOTIFICATIONS","QUNS_QUIET_TIME","QUNS_APP","UNKNOWN_ERROR"]),l=a(28103).Mirrored(["NOT_SUPPORTED","FAILED","OFF","PRIORITY_ONLY","ALARMS_ONLY"])},27998:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.playEndCallTone=function(){}},80401:(e,t,a)=>{"use strict";t.Z=function(e){a(23062).j(),a(81063).yj();var t=a(58906).default,i=a(15118).default,s=a(99215).default,n=a(30734).default;t.supported&&i.on("change:tag",(e=>{var t=navigator.serviceWorker;t&&t.controller&&!e.tag&&n.request(t.controller,s.REMOVE_PP,e.id).catch((()=>{}))}));(0,a(76533).default)((0,r.getEmojiTypeFromPlatform)(e)),(0,a(19979).Z)();var o=a(35590);return{MainComponent:o.default,hasPending:o.hasPending,notificationBackend:a(4651),execApiCmd:a(29233).Z}};var r=a(38527)},84767:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=(0,o.addProductToCart)(e);switch(a.status){case o.AddToCartStatus.SUCCESS:!function(e,t){a=function(){var a=(0,s.default)((function*(){yield(0,o.showCart)(e.catalogWid.toString(),t),(0,u.logCartToastClick)(e.catalogWid.toString(),t)}));return function(){return a.apply(this,arguments)}}(),l.default.openToast(n.createElement(c.default,{action:{actionText:d.default.t(1123),onAction:()=>{a()}},duration:6e3,id:(0,c.genId)(),msg:d.default.t(1143)}));var a}(e,t),(0,u.logAddProductToCart)(e,t,a.newCount);break;case o.AddToCartStatus.QUANTITY_LIMIT_REACHED:l.default.openToast(n.createElement(c.default,{action:{onAction:()=>{},actionText:d.default.t(723),dismiss:!0,theme:"success"},duration:6e3,id:(0,c.genId)(),msg:d.default.t(407)}))}};var s=i(a(52954)),n=r(a(2784)),o=a(93774),l=i(a(79711)),d=i(a(17957)),u=a(49080),c=r(a(75074))},18392:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{className:t,onClick:a}=e,r={className:(0,n.default)(t,l.default.addToCartIcon),name:"add_shopping_cart",title:d.default.t(1142)};if(null!=a)return o.createElement(u.default,(0,s.default)({},r,{"aria-label":d.default.t(1142),onClick:a}));return o.createElement(c.default,r)};var s=i(a(58527)),n=i(a(72779)),o=r(a(2784)),l=i(a(78714)),d=i(a(17957)),u=i(a(22948)),c=i(a(82631))},49080:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.logAddProductToCart=function(e,t,a){var r=d(e.catalogWid.toString(),"ACTION_CART_ADD_PRODUCT",{catalogSessionId:t,quantity:a});r&&r.commit()},t.logEditProduct=function(e,t,a){var r=d(e.catalogWid.toString(),"ACTION_CART_EDIT_PRODUCT",{catalogSessionId:t,quantity:a});r&&r.commit()},t.logDeleteProduct=function(e,t){var a=d(e.catalogWid.toString(),"ACTION_CART_DELETE_PRODUCT",{catalogSessionId:t});a&&a.commit()},t.logCartAbandon=function(e,t){var a=d(e,"ACTION_CART_ABANDON",{catalogSessionId:t});a&&a.commit()},t.getOnCartClickWithLog=function(e,t,a){return()=>{e(),function(e,t){var a=d(e,"ACTION_CART_ICON_CLICK",{catalogSessionId:t});a&&a.commit()}(t,a)}},t.logCartToastClick=function(e,t){var a=d(e,"ACTION_CART_SNACKBAR_CLICK",{catalogSessionId:t});a&&a.commit()},t.logCartListImpression=function(e,t){var a=d(e,"ACTION_CART_LIST_IMPRESSION",{catalogSessionId:t});a&&a.commit()};var i=r(a(19976)),s=r(a(70417)),n=a(95595),o=r(a(40210));function l(){var e=(0,i.default)(["getCartLogAction: unsupported log action - ",""]);return l=function(){return e},e}function d(e,t,a){var r=e===(0,n.getMeUser)().toString();return r&&void 0!==o.default.CATALOG_BIZ_ACTION[t]?new o.default.CatalogBiz((0,s.default)({catalogBizAction:o.default.CATALOG_BIZ_ACTION[t]},a)):r||void 0===o.default.CATALOG_VIEW_ACTION[t]?void __LOG__(3)(l(),t):new o.default.CatalogView((0,s.default)({catalogViewAction:o.default.CATALOG_VIEW_ACTION[t]},a))}},67790:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(30950)),o=r(a(67524)),l=r(a(44572)),d=r(a(96066)),u=r(a(43334)),c=r(a(79711)),h=r(a(50935)),f=a(90973),p=r(a(17957)),m=r(a(20642)),_=r(a(82631)),v=a(40263);class g extends s.PureComponent{constructor(e){super(e),this._updateUnreadArchivedCount=()=>{var e=u.default.filter((e=>e.archive&&(e.optimisticUnreadCount>0||e.optimisticUnreadCount===h.default.MARKED_AS_UNREAD))).length;this.setState({count:e})},this._archivedIcon=()=>s.createElement(f.FlexRow,{align:"center",justify:"center",className:n.default.archivedIcon},s.createElement(_.default,{name:"archived"})),this._unreadArchivedCount=()=>{var{count:e}=this.state;return 0===e?null:s.createElement(v.TextDiv,{size:"12",className:n.default.unreadArchivedCount},e)},this.state={count:0}}componentDidMount(){this.props.listeners.add(u.default,"add remove reset change:archive change:optimisticUnreadCount change:muteExpiration",this._updateUnreadArchivedCount),this._updateUnreadArchivedCount()}render(){return s.createElement(s.Fragment,null,s.createElement(d.default,{image:this._archivedIcon(),primary:p.default.t(225),detail:this._unreadArchivedCount(),onClick:()=>{c.default.openDrawerLeft(s.createElement(o.default,null))},theme:"archive-panel"}),s.createElement(l.default,null))}}var E=(0,m.default)(g);t.default=E},90513:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(39329),n=i(a(2784)),o=r(a(39594)),l=r(a(79711)),d=r(a(52737)),u=r(a(50935)),c=a(35387),h=a(95585),f=r(a(18120)),p=i(a(45356)),m=r(a(20642)),_=r(a(40210)),v=r(a(85059)),g=r(a(11680)),E=r(a(7729)),y=r(a(93569)),S=r(a(72424)),C=r(a(40207)),T=r(a(17026)),M=r(a(2220)),b=r(a(77626)),P=r(a(74824));class A extends n.PureComponent{constructor(e){var t;super(e),this._showBatteryTimer=new s.ShiftTimer((()=>this._batteryUpdate(!1))),this._onDismissLowBatteryWarning=()=>{var e=this.state.lowBatteryWarning;e>0&&this.setState({lowBatteryWarning:-e})},this._showNotifyTimer=new s.ShiftTimer((e=>{this.setState({showNotify:e})})),this._onShowNotify=()=>{this._showNotifyTimer.onOrBefore(0,!1)},this._onShowNotifyDelay=()=>{this._showNotifyTimer.onOrBefore(u.default.NOTIFICATION_PROMPT_DELAY,!0)},this._onRequestPermissions=()=>{l.default.openModal(n.createElement(p.default,{messaging:p.Messaging.NOTIFICATIONS,onConfirm:O,onCancel:N,type:p.default.TYPE.GUIDE_ALLOW})),window.Notification.requestPermission((e=>{l.default.closeModal(),this.setState({notifyPermission:e})}))},this._shouldShowBanner=()=>f.default.supportsFeature(f.default.F.USER_NOTICE)&&g.default.shouldShowButterBar&&null!=g.default.noticeId&&null!=g.default.banner&&!1===g.default.blocking,this._handleNoticeBannerChange=()=>{this._shouldShowBanner()&&(this.state.bannerDisplayed||(new _.default.UserNotice({userNoticeId:g.default.noticeId,userNoticeContentVersion:g.default.policyVersion,userNoticeEvent:_.default.USER_NOTICE_EVENT.BANNER_APPEAR}).commit(),this.setState({bannerDisplayed:!0})))},this.handleNoticeIdChange=()=>{this.setState({bannerDisplayed:!1})},this._onDismissNotice=()=>{g.default.dismissButterBarNotice()};var a=d.default.battery<u.default.BATTERY_LOW_THRESHOLD_1?d.default.battery<u.default.BATTERY_LOW_THRESHOLD_2?2:1:0;this.state={lowBatteryWarning:d.default.plugged?0:a,notifyPermission:null===(t=window.Notification)||void 0===t?void 0:t.permission,showNotify:!1,bannerDisplayed:!1};var r=()=>{this._batteryUpdate(!0)};e.listeners.add(d.default,"change:plugged",r),e.listeners.add(d.default,"change:battery",r),e.listeners.add(g.default,"change:noticeId",this.handleNoticeIdChange),e.listeners.add(g.default,"change:banner change:blocking",this._handleNoticeBannerChange)}componentWillUnmount(){this._showNotifyTimer.cancel(),this._showBatteryTimer.cancel()}_batteryUpdate(e){var t=this.state.lowBatteryWarning;d.default.plugged||d.default.battery>u.default.BATTERY_LOW_THRESHOLD_1?0!==t&&this.setState({lowBatteryWarning:0}):d.default.battery<=u.default.BATTERY_LOW_THRESHOLD_2?-2!==t&&(e?this._showBatteryTimer.onOrBefore(u.default.BATTERY_DELAY):2!==t&&this.setState({lowBatteryWarning:2})):t>-1&&d.default.battery<=u.default.BATTERY_LOW_THRESHOLD_1&&(e?this._showBatteryTimer.onOrBefore(u.default.BATTERY_DELAY):1!==t&&this.setState({lowBatteryWarning:1}))}render(){return f.default.supportsFeature(f.default.F.MD_BACKEND),n.createElement(P.default,{transitionName:"butterbar",className:o.default.container},null,n.createElement(E.default,{shouldShow:this._shouldShowBanner(),banner:g.default.banner,theme:this.context.theme,onDismissNotice:0===S.default.greenAlertBannerDuration?null:this._onDismissNotice}),n.createElement(y.default,{displayInfo:T.default.displayInfo,needsUpdate:T.default.needsUpdate,needsManualDownload:!1,lowBatteryWarning:this.state.lowBatteryWarning,showNotify:this.state.showNotify,isMuted:this.props.mute.isMuted,notifyPermission:this.state.notifyPermission,onShowNotify:this._onShowNotify,onShowNotifyDelay:this._onShowNotifyDelay,onRequestPermissions:this._onRequestPermissions,onDismissLowBatteryWarning:this._onDismissLowBatteryWarning}))}}A.CONCERNS={stream:["displayInfo","needsUpdate"],notice:["noticeId","blocking","banner","shouldShowButterBar"],mute:["isMuted"]},A.contextType=M.default;var I=(0,m.default)((0,C.default)(A,A.CONCERNS));function O(){l.default.closeModal()}function N(){switch(b.default.browser){case u.default.BROWSER_TYPE.CHROME:return(0,c.openExternalLink)((0,h.getNotificationChromeFaqUrl)());case u.default.BROWSER_TYPE.FIREFOX:return(0,c.openExternalLink)((0,h.getNotificationFirefoxFaqUrl)());case u.default.BROWSER_TYPE.SAFARI:return(0,c.openExternalLink)((0,h.getNotificationSafariFaqUrl)());case u.default.BROWSER_TYPE.OPERA:return(0,c.openExternalLink)((0,h.getNotificationOperaFaqUrl)());case u.default.BROWSER_TYPE.EDGE:return(0,c.openExternalLink)((0,h.getNotificationEdgeFaqUrl)());default:return(0,c.openExternalLink)((0,h.getNotificationChromeFaqUrl)())}}t.default=()=>n.createElement(I,{stream:T.default,notice:g.default,mute:v.default.globalMute()})},20301:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return s.createElement("span",{className:n.default.actionLink},s.createElement("span",{className:n.default.actionText,onClick:e.action},e.children),s.createElement(o.default,{className:n.default.chevron,directional:!0,name:"chevron-right-text"}))};var s=i(a(2784)),n=r(a(84621)),o=r(a(82631))},12588:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{action:t=null,onDismiss:a,type:r}=e,i=(0,s.default)(o.default.butterbar,{[o.default.action]:t,[o.default.computer]:"computer"===r,[o.default.phone]:"phone"===r,[o.default.notification]:"notification"===r,[o.default.battery]:"battery"===r,[o.default.update]:"update"===r,[o.default.notice]:"notice"===r&&!l.default.isSMB,[o.default.noticeSmb]:"notice"===r&&l.default.isSMB,[o.default.fatal]:"fatal"===r}),p={computer:"alert-computer",phone:"alert-phone",notification:"alert-notification",battery:"alert-battery",update:"alert-update",notice:"alert-notice",fatal:"alert"},m=a?n.createElement("div",{className:o.default.controls},n.createElement(h.default,{className:o.default.controlsIcon,"aria-label":c.default.t(1558),name:"x",onClick:a})):null,_=e.title?n.createElement("div",{className:o.default.title},e.title):null,v=n.createElement(f.default,{name:p[e.type],"aria-label":e.iconDescription}),g=e.iconSvg&&(0,d.sanitizeNoticeSVG)(e.iconSvg),E=g?n.createElement("span",{"aria-label":e.iconDescription,dangerouslySetInnerHTML:{__html:g}}):v,y="notice"===e.type?n.createElement(u.FlexRow,{className:o.default.noticeSvgWrapper,align:"center",justify:"center"},E):"fatal"===e.type?n.createElement(u.FlexRow,{className:o.default.fatalSvgWrapper,align:"center",justify:"center"},n.createElement(f.default,{name:p[e.type]})):n.createElement(f.default,{name:p[e.type]});return n.createElement("div",{className:o.default.wrapper},n.createElement("div",{className:i,onClick:t},n.createElement("div",{className:o.default.icon},y),n.createElement("div",{className:o.default.body},_,e.text?"notice"===e.type?n.createElement("div",{dangerouslySetInnerHTML:{__html:(0,d.sanitizeNoticeText)(e.text)},className:o.default.text}):n.createElement("div",{className:o.default.text},e.text):null),m))};var s=i(a(72779)),n=r(a(2784)),o=i(a(51421)),l=i(a(52737)),d=a(62436),u=a(90973),c=i(a(17957)),h=i(a(22948)),f=i(a(82631))},7729:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({shouldShow:e,banner:t,theme:a,onDismissNotice:r}){if(!e)return null;if(!(null==t?void 0:t.text))return null;var i,{iconDescription:o,text:l,iconSvg:d}=t;d&&(i="light"===a?d.light:d.dark);return n.createElement(s.default,{type:"notice",key:"noticebbar",text:l,iconSvg:i,iconDescription:null!=o?o:"",onDismiss:r})};var s=i(a(12588)),n=r(a(2784))},73113:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(39329),n=i(a(2784)),o=r(a(20301)),l=r(a(12588)),d=r(a(17957)),u=r(a(40210)),c=i(a(17026)),h=r(a(17744)),f=r(a(79345)),p=r(a(12767));class m extends n.PureComponent{constructor(...e){super(...e),this.state={allowReconnect:!0},this.reconnect=()=>{var e=f.default.numSocketsAttempted+1;p.default.poke(),(0,h.default)(c.default,"change:displayInfo",(()=>c.default.displayInfo===c.StreamInfo.NORMAL)).then((()=>{new u.default.WebcManualWebsocketAttempt({webcManualWebsocketAttemptSuccessful:f.default.numSocketsAttempted===e}).commit()})),this.setState({allowReconnect:!1}),this._reconnectTimeoutTimer.onOrAfter(3e3)},this._reconnectTimeoutTimer=new s.ShiftTimer((()=>{this.setState({allowReconnect:!0})}))}componentWillUnmount(){this._reconnectTimeoutTimer.cancel()}render(){var e,t;return this.state.allowReconnect?(e=n.createElement(n.Fragment,null,"".concat(d.default.t(903)," "),n.createElement(o.default,{action:this.reconnect},d.default.t(1182))),t=d.default.t(493)):(e=null,t=d.default.t(515)),n.createElement(l.default,{type:"computer",title:t,text:e})}}t.default=m},93569:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({displayInfo:e,needsUpdate:t,needsManualDownload:a,lowBatteryWarning:r,showNotify:i,isMuted:d,notifyPermission:u,onShowNotify:m,onShowNotifyDelay:g,onRequestPermissions:E,onDismissLowBatteryWarning:y}){var S=null;switch(e){case p.StreamInfo.OFFLINE:S=s.createElement(h.default,{key:"bbar"});break;case p.StreamInfo.OPENING:case p.StreamInfo.CONNECTING:S=s.createElement(f.default,{key:"bbar"});break;case p.StreamInfo.NORMAL:break;case p.StreamInfo.RESUMING:case p.StreamInfo.TIMEOUT:var C=s.createElement(s.Fragment,null,c.default.t(904)," ",s.createElement(n.default,{action:v},c.default.t(848)));S=s.createElement(o.default,{type:"phone",key:"bbar",title:c.default.t(1132),text:C})}!S&&r>0&&(S=s.createElement(o.default,{type:"battery",key:"bbar",title:c.default.t(1130),text:c.default.t(469),dismissable:!0,onDismiss:y}));if(!S&&t){var T=s.createElement(n.default,null,c.default.t(490));S=s.createElement(o.default,{type:"update",key:"bbar",title:c.default.t(1386),text:T,action:_})}if(S)i&&m();else if(i){if(window.Notification&&u===l.default.PERMISSION_DEFAULT&&!d){var M=s.createElement(n.default,null,c.default.t(593));S=s.createElement(o.default,{type:"notification",key:"bbar",title:c.default.t(701),text:M,action:E})}}else g();return S};var s=i(a(2784)),n=r(a(20301)),o=r(a(12588)),l=r(a(50935)),d=a(35387),u=a(95585),c=r(a(17957)),h=r(a(73113)),f=r(a(89797)),p=a(17026),m=r(a(78135));function _(){m.default.restart()}function v(){(0,d.openExternalLink)((0,u.getCannotConnectFaqUrl)())}},89797:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(39329),n=i(a(19034)),o=r(a(2784)),l=i(a(20301)),d=i(a(12588)),u=i(a(17957)),c=i(a(20642)),h=r(a(17026)),f=i(a(12767));class p extends o.Component{constructor(...e){super(...e),this.state={takingTooLong:!1,didShowSubtitle:!1},this._timeoutTimer=new s.ShiftTimer((()=>{this.setState({takingTooLong:!0,didShowSubtitle:!0})})),this.onProgress=()=>{this._rerenderTimer.cancel(),this._timeoutTimer.onOrBefore(3e3),this.setState({takingTooLong:!1})},this._rerenderTimer=new s.ShiftTimer((()=>{this.forceUpdate()})),this.retry=()=>{f.default.poke(),this.onProgress()}}componentDidMount(){this.props.listeners.add(f.default,"change:state",this.onProgress),this.props.listeners.add(f.default,"change:retryTimestamp",this.onProgress),this._timeoutTimer.onOrBefore(3e3)}componentWillUnmount(){this._timeoutTimer.cancel(),this._rerenderTimer.cancel()}render(){var e,t;if(h.default.displayInfo===h.StreamInfo.OPENING)e=u.default.t(514);else{if(h.default.displayInfo!==h.StreamInfo.CONNECTING)return null;e=u.default.t(515)}if(this.state.takingTooLong){this._rerenderTimer.onOrAfter(1e3);var a=f.default.retryTimestamp-Date.now();if(isNaN(a)||a<1)a=u.default.t(1216),setTimeout((()=>{f.default.poke()}),0);else if(a<6e4){var r=Math.ceil(a/1e3);a=u.default.t(1218,{number:r,_plural:r})}else a=u.default.t(1217,{duration:n.default.duration(a).humanize()});t=o.createElement(o.Fragment,null,a," ",o.createElement(l.default,{action:this.retry},u.default.t(1214)))}else t=this.state.didShowSubtitle?o.createElement("span",null,u.default.t(1216)):null;return o.createElement(d.default,{type:"computer",title:e,text:t})}}var m=(0,c.default)(p);t.default=m},73549:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(32960)),l=i(a(19475)),d=i(a(96066)),u=i(a(91581)),c=i(a(38147)),h=i(a(6660)),f=a(62902),p=i(a(72509)),m=i(a(50868)),_=i(a(17957)),v=i(a(61941)),g=i(a(2825)),E=i(a(82631)),y=i(a(74824));class S extends n.PureComponent{constructor(...e){super(...e),this.state={hover:!1,contextMenu:!1,forceContextMenu:!1},this._setRefContextMenu=e=>{this._refContextMenu=e},this._setRefCellFrameDiv=e=>{this._refCellFrameDiv=e},this.getCellFrameDivRef=()=>this._refCellFrameDiv,this.indicateFocus=()=>{c.default.maybeIndicateFocus(this._refCellFrameDiv,l.default.focusAnimation)},this._handleMenuMouseDown=e=>{var{contextEnabled:t,onContext:a}=this.props,{contextMenu:r}=this.state;(t()||r)&&(e.stopPropagation(),e.preventDefault(),a&&a({anchor:e.target}))},this._handleMenuClick=e=>{e.stopPropagation()},this._handleKeyboardActivation=e=>{if((0,p.default)(e)){e.stopPropagation();var{contextEnabled:t,onContext:a}=this.props,{contextMenu:r}=this.state;if(!t()&&!r)return;a&&a({anchor:this._refContextMenu})}},this.onContextMenu=e=>{var{contextEnabled:t,onContext:a}=this.props;t()&&(e.stopPropagation(),e.preventDefault(),a&&a({event:e}))},this.openContextMenu=()=>{this.props.contextEnabled()&&this.setState({contextMenu:!0},(()=>{if(!this._refContextMenu)throw new Error("Context ref not set");var e=new MouseEvent("mousedown",{bubbles:!0});(0,v.default)(this._refContextMenu,"this._refContextMenu").dispatchEvent(e)}))},this.focusOnContextMenuButton=()=>{(this._refContextMenu||this.props.contextEnabled())&&h.default.focus(this._refContextMenu)},this.mouseOver=()=>{this.state.hover||this.state.contextMenu||!this.props.contextEnabled()||this.setState({hover:!0})},this.mouseEnter=()=>{this.state.hover||this.state.contextMenu||!this.props.contextEnabled()||this.setState({hover:!0})},this.mouseLeave=()=>{this.state.hover&&this.setState({hover:!1})},this._onFocusContextMenuButton=()=>{var e;null===(e=this._refContextMenu)||void 0===e||e.removeAttribute("aria-hidden")},this._onBlurContextMenuButton=()=>{var e;null===(e=this._refContextMenu)||void 0===e||e.setAttribute("aria-hidden","true")}}static getDerivedStateFromProps(e,t){return t.forceContextMenu&&t.contextMenu&&!e.contextMenu?{contextMenu:!1,forceContextMenu:e.contextMenu}:{forceContextMenu:e.contextMenu}}isKeyboardUser(){return this.context}render(){var e=this.state.contextMenu,t=this.isKeyboardUser()&&this.props.active&&this.props.contextEnabled(),a=e||this.state.hover||t,r=(0,s.default)(this.props.className,{hover:a}),i="string"==typeof this.props.primary?n.createElement(u.default,{text:this.props.primary,direction:"auto",formatters:f.Configuration.Search({terms:this.props.searchText?[this.props.searchText]:[]}),titlify:!0,ellipsify:!0}):this.props.primary,c=null,h=null;if(null!=this.props.pendingAction&&this.props.pendingAction>0)h=n.createElement("div",{className:l.default.btnContext},n.createElement(g.default,{size:18,stroke:6,color:"highlight"}));else if(a){var p=(0,s.default)(l.default.btnContext,{[l.default.product]:"product"===this.props.theme});c=n.createElement("button",{"data-a8n":o.default.key("context-btn"),className:p,key:"icon-context",ref:this._setRefContextMenu,onMouseDown:this._handleMenuMouseDown,onClick:this._handleMenuClick,"aria-label":_.default.t(4),onKeyDown:this._handleKeyboardActivation,onFocus:this._onFocusContextMenuButton,onBlur:this._onBlurContextMenuButton,"aria-hidden":!0},n.createElement(E.default,{name:"down"}))}var m,v,S=n.createElement(y.default,{transitionName:"fade"},h),C=n.createElement(y.default,{transitionName:"pop-fast-chat"},a?c:null);return null!=this.props.secondary?(m=this.props.primaryDetail,v=[n.createElement(n.Fragment,{key:"prop"},this.props.secondaryDetail),n.createElement(n.Fragment,{key:"spinner"},S),n.createElement(n.Fragment,{key:"button"},C)]):m=[n.createElement(n.Fragment,{key:"prop"},this.props.primaryDetail),n.createElement(n.Fragment,{key:"spinner"},S),n.createElement(n.Fragment,{key:"button"},C)],n.createElement(d.default,{setDivRef:this._setRefCellFrameDiv,image:this.props.image,customImage:this.props.customImage,className:r,unread:this.props.unread,active:this.props.active,idle:this.props.idle,isMuted:this.props.isMuted,dragging:this.props.dragging,theme:this.props.theme,primary:i,primaryDetail:m,secondary:this.props.secondary,secondaryDetail:v,detail:this.props.detail,onClick:this.props.onClick,onMouseDown:this.props.onMouseDown,onContextMenu:this.props.contextEnabled()?this.onContextMenu:null,onMouseEnter:this.state.hover?null:this.mouseEnter,onMouseOver:this.state.hover?null:this.mouseOver,onMouseLeave:this.state.hover?this.mouseLeave:null})}}t.default=S,S.contextType=m.default},13886:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Component=t.Mode=void 0;var s=i(a(19976)),n=r(a(2784)),o=a(60474),l=i(a(26387)),d=i(a(73549)),u=i(a(46774)),c=i(a(43334)),h=i(a(43433)),f=i(a(79711)),p=i(a(9386)),m=r(a(52737)),_=i(a(50935)),v=a(65219),g=i(a(28515)),E=i(a(24211)),y=i(a(46478)),S=a(62436),C=i(a(71201)),T=a(19741),M=a(555),b=r(a(96452)),P=i(a(38147)),A=i(a(6660)),I=i(a(18120)),O=a(75459),N=i(a(99922)),w=a(86038),D=i(a(44343)),R=i(a(35239)),L=i(a(78986)),k=a(13735),x=i(a(17957)),F=i(a(20642)),G=i(a(26432)),U=i(a(27862)),B=i(a(40210)),j=(i(a(85059)),i(a(60733))),V=i(a(60949)),H=i(a(59477)),W=a(4859),K=i(a(2734)),Y=i(a(40207)),q=a(64658),z=i(a(67134)),Q=i(a(74223)),J=i(a(17693)),X=i(a(63498)),Z=i(a(37698)),$=i(a(68384));function ee(){var e=(0,s.default)(["Chat: prop searchQuery is undefined"]);return ee=function(){return e},e}var te={LAST:"LAST",INFO:"INFO"};t.Mode=te;class ae extends n.PureComponent{static getDerivedStateFromProps(e,t){var a,r={},i=e.active&&e.active.value instanceof u.default&&$.default.equals(e.active.value.id,e.chat.id);e.active&&e.active.value instanceof $.default&&$.default.isGroup(null===(a=e.active)||void 0===a?void 0:a.value)&&(i=$.default.equals(e.active.value,e.chat.id)),t.active!==i&&(r.active=i);var s=e.searchQuery?e.searchQuery.trimmed:"";t.searchText!==s&&(r.searchText=s);var n=e.chat.id;return t.chatId!==n&&(r.chatId=n,r.unreadCount=e.chat.optimisticUnreadCount),r}constructor(e){super(e),this._hoverCounter=0,this._setCellRef=e=>{this._cellRef=e},this._setHotKeysRef=e=>{this._hotKeysRef=e},this.state={active:!1,dragging:!1,searchText:"",contextMenu:null,chatId:null,unreadCount:0},this._setUnreadCount=()=>{var e=this.props.chat.optimisticUnreadCount;e!==this.state.unreadCount&&this.setState({unreadCount:e})},this._prefetchGroupMetadata=()=>{var{chat:e}=this.props;I.default.supportsFeature(I.default.F.GROUPS_V_3)&&e.isGroup&&e.groupMetadata&&e.groupMetadata.stale&&N.default.find(e.id).catchTypes(T.WebdDrop,b.ProtoVersionUndefined,(()=>{}))},this.onSearch=()=>{this.props.searchQuery?this.setState({searchText:this.props.searchQuery.trimmed}):__LOG__(3)(ee())},this.onActiveChange=(e,t)=>{if("focus"===e){var a=this._hotKeysRef;a&&(A.default.focus(a),t&&(0,S.scrollIntoViewIfNeeded)(a))}this.setState({active:!!e})},this.contextEnabled=()=>{var{noContext:e}=this.props;return!e},this.editLabel=()=>{var{selectableState:e,multiSelection:t}=this.props;!this.props.searchQuery||this.props.searchQuery.isEmptyQuery?e&&t&&(e.setSelectable(!0),t.setVal((0,q.unproxy)(this.props.chat))):this.addOrRemoveLabelOnSelected()},this.addOrRemoveLabelOnSelected=()=>{var e=[(0,q.unproxy)(this.props.chat)];f.default.openModal(n.createElement(G.default,{modelsToUpdate:e}))},this.onMenu=e=>{if(this.state.contextMenu)this.setState({contextMenu:null});else{var t=this.props.chat,a=[];t.canArchive()&&a.push(n.createElement(l.default,{key:"archive",onArchive:this.onArchive,chat:(0,q.unproxy)(t)})),t.mute.canMute()&&(t.archive&&this.props.hideMuteOption||a.push(n.createElement(j.default,{key:"mute",onMute:this.onMute,mute:t.mute,chat:t,settings:K.default}))),a.push(n.createElement(E.default,{key:"delete",onDeleteOrExit:this.onDeleteOrExit,chat:(0,q.unproxy)(t)})),m.default.platform===m.PLATFORMS.IPHONE&&t.isBroadcast||!t.canPin()||a.push(n.createElement(H.default,{key:"pin",onPinOrUnpin:this._onPinOrUnpin,chat:t})),(0,O.canEditLabelAssociation)()&&a.push(n.createElement(C.default,{a8n:"mi-edit-label",action:this.editLabel,key:"EditLabel"},x.default.t(581))),t.canUnread&&a.push(n.createElement(U.default,{key:"mark_unread",onMarkUnread:this.onMarkUnread,chat:(0,q.unproxy)(t)})),e.event&&e.event.persist(),this.setState({contextMenu:{menu:a,event:e.event,anchor:e.anchor}})}},this._removeContext=()=>{this.setState({contextMenu:null})},this.onMute=e=>{f.default.muteChat((0,q.unproxy)(this.props.chat),e)},this.onArchive=e=>{f.default.archiveChat((0,q.unproxy)(this.props.chat),e)},this.onDeleteOrExit=()=>{f.default.deleteOrExitChat((0,q.unproxy)(this.props.chat),this)},this._onPinOrUnpin=e=>{!e||c.default.filter((e=>e.pin)).length<3?f.default.pinChat((0,q.unproxy)(this.props.chat),e):f.default.openModal(n.createElement(p.default,{onOK:()=>f.default.closeModal(),okText:x.default.t(1709)},x.default.t(73)))},this.onMarkUnread=e=>{f.default.markChatUnread((0,q.unproxy)(this.props.chat),e)},this.onClick=e=>{var{onClick:t,chat:a}=this.props;t&&t(e,(0,q.unproxy)(a))},this.onMouseDown=e=>{0===e.button&&this.onClick(e)},this.onKeyboardActivation=e=>{e.preventDefault(),e.stopPropagation(),P.default.shouldIndicateFocus(),this.onClick(e)},this.onDragEnter=e=>{this.props.chat.canSend&&(new g.default(e.dataTransfer).hasType(_.default.DRAG_TYPE_FILE)&&(0===this._hoverCounter&&this.setState({dragging:!0}),this._hoverCounter+=1))},this.onDragLeave=e=>{this.props.chat.canSend&&(new g.default(e.dataTransfer).hasType(_.default.DRAG_TYPE_FILE)&&(this._hoverCounter-=1,0===this._hoverCounter&&this.setState({dragging:!1})))},this.onDrop=e=>{var{chat:t}=this.props;if(t.canSend){this.setState({dragging:!1});var a=new g.default(e.dataTransfer);(a.hasType(_.default.DRAG_TYPE_FILE)||a.hasType("text/uri-list")||a.hasType("text/html"))&&(0,M.getFiles)(e).then((e=>{f.default.openChatFromUnread(t).then((a=>{a&&f.default.attachMediaDrawer({chat:t,attachments:e.map((e=>({file:e}))),fileOrigin:B.default.MEDIA_PICKER_ORIGIN_TYPE.CHAT_PHOTO_LIBRARY})}))})).catchType(b.MediaDragDropError,(e=>{f.default.openChatFromUnread(t).then((a=>{a&&e.src&&f.default.pasteChatTextInput(t,e.src)}))}))}},this.indicateFocus=e=>{var t;e.stopPropagation(),e.preventDefault(),null===(t=this._cellRef)||void 0===t||t.indicateFocus()},this._toggleFocusInContact=()=>{this._hotKeysRef&&this._hotKeysRef!==document.activeElement?A.default.focus(this._hotKeysRef):this._cellRef&&this._cellRef.focusOnContextMenuButton()},this._handlers={enter:this.onKeyboardActivation,space:this.onKeyboardActivation,right:this._toggleFocusInContact,left:this._toggleFocusInContact},this._throttledSetUnreadCount=this.props.throttle(this._setUnreadCount,0,{leading:!1,tailing:!0})}componentDidMount(){var{chat:e}=this.props;this.initListeners(this.props),I.default.supportsFeature(I.default.F.GROUPS_V_3)&&e.isGroup&&e.groupMetadata&&e.groupMetadata.stale&&L.default.enqueue(this._prefetchGroupMetadata)}componentDidUpdate(e){var{chat:t}=this.props;t!==e.chat&&I.default.supportsFeature(I.default.F.GROUPS_V_3)&&t.isGroup&&t.groupMetadata&&t.groupMetadata.stale&&L.default.enqueue(this._prefetchGroupMetadata),t.optimisticUnreadCount!==this.state.unreadCount&&this._throttledSetUnreadCount(),this.initListeners(this.props,e)}initListeners(e,t){var{listeners:a,active:r,chat:i,searchQuery:s,frequent:n}=e;t&&t.searchQuery&&t.searchQuery!==s&&a.remove(t.searchQuery,W.SEARCH_EVENT,this.onSearch),!s||t&&s===t.searchQuery||a.add(s,W.SEARCH_EVENT,this.onSearch);var o=t&&t.chat.id;if(!i.id.equals(o)&&(t&&t.active&&a.remove(t.active,t.chat.id.toString(),this.onActiveChange),r)){var l=(n?v.FREQUENT_PREFIX:"")+i.id.toString();a.add(r,l,this.onActiveChange)}}render(){var e,t,{chat:a,mode:r,secondary:i,theme:s,filterPreset:l,showEphemeralIcon:u,hideArchivedIcon:c,hideMuteIcon:f}=this.props,{searchText:p,active:m,dragging:_,contextMenu:v,unreadCount:g}=this.state;switch(r){case te.LAST:e=n.createElement(Q.default,{chat:a}),null==i&&(i=n.createElement(h.default,{chat:a}),t=n.createElement(R.default,{chat:a,mute:a.mute,unreadCount:g,hideArchivedIcon:!0===c,hideMuteIcon:!0===f,settings:K.default}));break;case te.INFO:null==i&&(i=a.isGroup||a.isBroadcast?n.createElement(w.ParticipantsList,{groupMetadata:a.groupMetadata}):n.createElement(Z.default,{presence:a.presence,chatstate:a.presence.chatstate,location:"list"}))}var E,S=n.createElement(y.default,{id:a.id,alt:"",showEphemeralIcon:u,waitIdle:!0}),C=this.props.mouseDownAsClick;v&&(E=n.createElement(J.default,{displayName:"ChatContextMenu",escapable:!0,popable:!0,requestDismiss:this._removeContext},n.createElement(X.default,{contextMenu:v})));var T=n.createElement(V.default,{chat:a,firstLabel:null==l?void 0:l.label,highlightText:p,showLabel:!0,titlify:!0,ellipsify:!0}),M=null,b=a.getEphemeralSetting();return null!=b&&0!==b&&(M=n.createElement(o.InvisibleLabel,null,(0,k.getEphemeralExplanationString)(b))),n.createElement(D.default,{onRef:this._setHotKeysRef,handlers:this._handlers,onFocus:this.indicateFocus,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDrop:this.onDrop,"aria-selected":m,tabIndex:m?0:-1,role:"row"},n.createElement(d.default,{id:a.id,ref:this._setCellRef,theme:s,contextEnabled:this.contextEnabled,pendingAction:a.pendingAction,contextMenu:!!v,unread:0!==g,active:!!m,isMuted:!1,dragging:!!_,image:S,primary:T,primaryDetail:e,secondary:i,secondaryDetail:t,onClick:C?void 0:this.onClick,onMouseDown:C?this.onMouseDown:void 0,onContext:this.onMenu}),M,E)}}ae.CONCERNS={chat:["id","isReadOnly","isGroup","pendingAction","canSend","isUser","contact","presence","groupMetadata","mute","isBroadcast","canUnread","optimisticUnreadCount","labels","archive"]},ae.defaultProps={mode:te.LAST};var re=ae;t.Component=re;var ie=(0,z.default)((0,F.default)((0,Y.default)(ae,ae.CONCERNS)));t.default=ie},43433:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(48880)),o=r(a(91581)),l=r(a(45420)),d=r(a(40207));class u extends s.PureComponent{render(){var{chat:e,presence:t}=this.props;if(t.isActive()){var a=t.getFormattedString();if(a)return s.createElement(o.default,{className:n.default.chatstateTyping,direction:"inherit",ellipsify:!0,titlify:!0,text:a})}var r=e.previewMessage;return r?s.createElement(l.default,{msg:r.safe(),msgType:"LastMessage"}):null}}u.displayName="ChatStateInfo",u.CONCERNS={chat:["previewMessage"],chatstate:["id","type"]},u.WEAK_CONCERNS={presence:["hasData","withholdDisplay"]};var c=(0,d.default)(u,u.CONCERNS,u.WEAK_CONCERNS);t.default=({chat:e})=>s.createElement(c,{chat:e,presence:e.presence,chatstate:e.presence.chatstate})},65219:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Component=t.FREQUENT_PREFIX=t.Type=void 0;var s=i(a(19976)),n=i(a(72779)),o=r(a(2784)),l=i(a(32960)),d=i(a(73549)),u=i(a(40147)),c=i(a(28714)),h=i(a(46478)),f=a(62436),p=i(a(91581)),m=i(a(6660)),_=i(a(44343)),v=i(a(17957)),g=i(a(20642)),E=i(a(60949)),y=a(4859),S=i(a(40207)),C=a(64658),T=i(a(58914)),M=i(a(82631)),b=i(a(68384));function P(){var e=(0,s.default)(["Contact: prop searchQuery is undefined"]);return P=function(){return e},e}var A={SMALL:"SMALL",DEFAULT:"DEFAULT"};t.Type=A;var I="freq_";t.FREQUENT_PREFIX=I;class O extends o.Component{constructor(...e){super(...e),this._setCellRef=e=>{this._cellRef=e},this._setHotKeysRef=e=>{this._hotKeysRef=e},this.state={active:!1,searchText:"",contextMenu:!1},this.onSearch=()=>{this.props.searchQuery?this.setState({searchText:this.props.searchQuery.trimmed}):__LOG__(3)(P())},this.onActiveChange=(e,t)=>{if("focus"===e){var a=this._hotKeysRef;a&&(m.default.focus(a),t&&(0,f.scrollIntoViewIfNeeded)(a))}this.setState({active:!!e})},this.onDelete=e=>{e.stopPropagation();var t=this.props.onDelete;t&&t(e,(0,C.unproxy)(this.props.contact))},this.onClick=e=>{var{onClick:t,contact:a}=this.props;t&&t(e,(0,C.unproxy)(a))},this.onMouseDown=e=>{0===e.button&&this.onClick(e)},this.onKeyboardActivation=e=>{e.preventDefault(),e.stopPropagation(),this.onClick(e)},this.onContext=e=>{this.props.onContext&&this.props.onContext(e,this.props.contact)},this.indicateFocus=e=>{var t;e.stopPropagation(),e.preventDefault(),null===(t=this._cellRef)||void 0===t||t.indicateFocus()}}static getDerivedStateFromProps(e,t){var{active:a,contact:r,searchQuery:i}=e,s={},n=a&&a.value instanceof u.default&&r.isProxyOf(a.value);t.active!==n&&(s.active=n);var o=i?i.trimmed:"";return t.searchText!==o&&(s.searchText=o),s}componentDidMount(){this.initListeners(this.props);var{listenForAdminChange:e,listeners:t,participantCollection:a,contact:r}=this.props;e&&a&&t.add(a,"change:isAdmin change:isSuperAdmin",(e=>{b.default.equals(e.id,r.id)&&this.forceUpdate()}))}componentDidUpdate(e){this.initListeners(this.props,e)}initListeners(e,t){var{listeners:a,active:r,contact:i,searchQuery:s,frequent:n}=e;if(t&&t.searchQuery&&t.searchQuery!==s&&a.remove(t.searchQuery,y.SEARCH_EVENT,this.onSearch),!s||t&&s===t.searchQuery||a.add(s,y.SEARCH_EVENT,this.onSearch),(!t||!i.id.equals(t.contact.id))&&(t&&t.active&&a.remove(t.active,t.contact.id.toString(),this.onActiveChange),r)){var o=(n?I:"")+i.id.toString();a.add(r,o,this.onActiveChange)}}contextEnabled(){return!1}render(){var e,t,a,{contact:r,secondary:i,onContext:s,onDelete:u,contextEnabled:f,contextMenu:m,admin:g,showNotifyName:y,waitIdle:S,theme:C,useShortName:b,detail:P,listenForAdminChange:I,participantCollection:O,isPendingParticipant:N,showEphemeralIcon:w}=this.props,{active:D,searchText:R}=this.state,L=(0,n.default)({[c.default.contactSmall]:this.props.type===A.SMALL});if(!r.name&&y&&r.notifyName&&(a=o.createElement("span",{className:c.default.screenName},o.createElement(p.default,{direction:"auto",text:r.notifyName}))),(g||I&&O&&O.assertGet(r.id).isAdmin)&&(t=o.createElement("div",{className:c.default.markerAdmin},v.default.t(1597))),N&&(t=o.createElement("div",{className:c.default.markerInvited},v.default.t(771))),null!=P)e=P;else if(u){var k=this.props.type===A.SMALL?"x-alt-small":"x-alt";e=o.createElement("div",{"data-a8n":l.default.key("chat-controls"),className:c.default.chatControls,role:"button",onClick:this.onDelete},o.createElement(M.default,{name:k}))}var x,F=i;null==F&&(F=o.createElement(T.default,{id:r.id,waitIdle:S})),s&&(x=this.onContext);var G=this.props.type===A.SMALL?26:void 0,U={enter:this.onKeyboardActivation,space:this.onKeyboardActivation},B=this.props.mouseDownAsClick,j=o.createElement(E.default,{contact:r,useShortName:b,highlightText:R,showLabel:!0,titlify:!0,ellipsify:!0,you:!0}),V="list-names"!==C||u?C:"list-names-no-delete";return o.createElement(_.default,{onRef:this._setHotKeysRef,handlers:U,onFocus:this.indicateFocus,className:L},o.createElement(d.default,{ref:this._setCellRef,theme:V,active:D,contextEnabled:f||this.contextEnabled,contextMenu:m,pendingAction:r.pendingAction,detail:e,image:o.createElement(h.default,{id:r.id,size:G,showEphemeralIcon:w,waitIdle:S}),primary:j,primaryDetail:t,secondary:F,secondaryDetail:a,onClick:B?null:this.onClick,onMouseDown:B?this.onMouseDown:null,onContext:x}))}}O.CONCERNS={contact:["id","pendingAction","notifyName","name"]};var N=O;t.Component=N;var w=(0,g.default)((0,S.default)(O,O.CONCERNS));t.default=w},35239:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(72779)),n=r(a(2784)),o=a(75459),l=i(a(51758)),d=i(a(17957)),u=i(a(40207)),c=i(a(82631)),h=i(a(42097)),f=i(a(74824)),p=i(a(68384));class m extends n.PureComponent{constructor(...e){super(...e),this.state={chatId:null,shouldAnimate:!1}}static getDerivedStateFromProps(e,t){var a=e.chat.id;return{chatId:a,shouldAnimate:p.default.equals(t.chatId,a)}}_showMuteIcon(){var{chat:e,mute:t,hideMuteIcon:a,settings:r}=this.props;return e.archive&&(0,o.archiveV2Supported)()&&r.showArchiveV2?!a:t.isMuted}render(){var{chat:e,unreadCount:t,hideArchivedIcon:a}=this.props,r=this._showMuteIcon()?n.createElement("div",{className:l.default.icon,key:"icon-muted","aria-label":d.default.t(21)},n.createElement(c.default,{name:"muted"})):null,i=null!=e.pin&&e.pin>0?n.createElement("div",{className:(0,s.default)(l.default.icon,l.default.iconPinned),key:"icon-pinned"},n.createElement(c.default,{name:"pinned"})):null,o=0!==t?n.createElement("div",{className:l.default.icon,key:"icon-unread"},n.createElement(h.default,{count:t})):null,u=e.archive&&!a?n.createElement("span",{className:(0,s.default)(l.default.icon,l.default.archived),key:"icon-archived"},d.default.t(470)):null;return n.createElement(f.default,{transitionName:"pop",transitionEnter:this.state.shouldAnimate,transitionLeave:this.state.shouldAnimate},r,u,i,o)}}m.CONCERNS={chat:["id","archive","pin"],mute:["isMuted"],settings:["showArchiveV2"]};var _=(0,u.default)(m,m.CONCERNS);t.default=_},45420:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(87400)),l=i(a(50935)),d=i(a(91581)),u=i(a(73540)),c=i(a(18120)),h=i(a(87162)),f=a(62902),p=i(a(17957)),m=i(a(33359)),_=i(a(20642)),v=i(a(40210)),g=i(a(6903)),E=i(a(56266)),y=i(a(60949)),S=i(a(10385)),C=i(a(72424)),T=i(a(40207)),M=a(64658);class b extends n.PureComponent{constructor(...e){super(...e),this.updateAfterFeatureFlagChange=()=>{this.props.listeners._unmounted||this.forceUpdate()}}componentDidMount(){var{listeners:e,msg:t}=this.props;e.add(c.default,c.default.FEATURE_CHANGE_EVENT,this.updateAfterFeatureFlagChange),t.type===l.default.MSG_TYPE.DOCUMENT&&t.isVcardOverMmsDocument&&(!t.mediaData||!t.mediaData.mediaBlob)&&t.isTrusted()&&t.unsafe().size<=1024*C.default.mmsVcardAutodownloadSizeKb&&t.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:v.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1}),t.type===l.default.MSG_TYPE.DOCUMENT&&t.mediaData&&t.isVcardOverMmsDocument&&e.add(t.mediaData,"change:parsedVcards",(()=>{this.forceUpdate()}))}render(){var{msg:e,searchQuery:t=[],msgType:a,author:r}=this.props,i=[];c.default.supportsFeature(c.default.F.MD_BACKEND)||e.isSentByMe&&!e.asRevoked&&i.push(n.createElement(g.default,{msg:e.unsafe(),key:"symbol"}));var l="Search"!==a&&!e.isSentByMe&&e.isGroupMsg&&!e.isNotification,_=r&&"Search"===a;if((l||_)&&(l?i.push(n.createElement(y.default,{contact:e.senderObj,useShortName:!0,key:"author"})):_&&i.push(n.createElement(d.default,{text:r,direction:"auto",key:"author"})),i.push(n.createElement("span",{key:"divider"},":"," "))),e.hasSymbol()&&i.push(n.createElement(E.default,{msg:e.unsafe(),key:"msg-symbol"})),"order"===e.type&&null!=e.itemCount&&i.push(n.createElement("div",{key:"item-count"},p.default.t(837,{count:e.itemCount||0,_plural:e.itemCount||0}),e.message?n.createElement("span",{key:"item-divider"},":"," "):null)),null!=e.asGroupNotification)i.push(n.createElement(h.default,{msg:e.asGroupNotification,groupMetadata:e.chat.groupMetadata,clickable:!1,key:"status"}));else if(null!=e.asBroadcastNotification)i.push(n.createElement(o.default,{msg:e.asBroadcastNotification,clickable:!1,key:"broadcast_notification"}));else{var v=e.asRevoked;c.default.supportsFeature(c.default.F.MD_BACKEND);var C=(0,s.default)({[m.default.product]:null!=e.asProduct,[m.default.italic]:v});i.push(n.createElement(d.default,{className:C,direction:e.dir,text:(0,S.default)((0,u.default)((0,M.unproxy)(e.unsafe()),!1,!0)||"",!0),dirMismatch:e.rtl!==p.default.isRTL(),formatters:f.Configuration[a]({mentions:e.mentionMap(),terms:t}),ellipsify:!0,inlineblock:!0,key:"status"}))}var T=p.default.embedDir((0,u.default)((0,M.unproxy)(e.unsafe()))||"",e.rtl);return n.createElement("span",{className:m.default.last,title:T},i)}}b.CONCERNS={msg:["ack","asBroadcastNotification","asGroupNotification","asProduct","asRevoked","chat","dir","isGroupMsg","isNotification","isSentByMe","itemCount","rtl","senderObj","type","mediaData","message","isVcardOverMmsDocument","size","mdDowngrade"]};var P=(0,_.default)((0,T.default)(b,b.CONCERNS));t.default=P},99639:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(73549)),o=a(62436),l=r(a(38147)),d=r(a(6660)),u=a(13414),c=r(a(44343)),h=r(a(45420)),f=r(a(20642)),p=r(a(27e3)),m=r(a(58885)),_=r(a(60949)),v=a(4859),g=r(a(40207)),E=a(64658),y=r(a(74223)),S=a(11419);class C extends s.PureComponent{constructor(...e){super(...e),this.onSearch=()=>{this.setState({searchText:this.props.searchQuery.trimmed})},this.onActiveChange=e=>{if("focus"===e){var t,a=null===(t=this.cell)||void 0===t?void 0:t.getCellFrameDivRef();a&&(d.default.focus(a),(0,o.scrollIntoViewIfNeeded)(a))}this.setState({active:!!e})},this.onClick=e=>{var t=this.props.onClick;if((0,S.isFunction)(t)){var{msg:a,chat:r}=this.props,i=m.default.assertGet(a.id),s=r.getSearchContext(i);s.msg=i,t(e,(0,E.unproxy)(r),s)}},this.onMouseDown=e=>{0===e.button&&this.onClick(e)},this.onEnter=e=>{e.preventDefault(),e.stopPropagation(),l.default.shouldIndicateFocus(),this.onClick(e)},this.indicateFocus=e=>{var t;e.stopPropagation(),e.preventDefault(),null===(t=this.cell)||void 0===t||t.indicateFocus()}}static getDerivedStateFromProps(e){var{active:t,msg:a,searchQuery:r}=e,i=t&&t.value instanceof p.default&&t.value.id.equals(a.id);return{searchText:r.trimmed,active:i}}componentDidMount(){this.initListeners(this.props)}componentDidUpdate(e){this.initListeners(this.props,e)}initListeners(e,t){var{listeners:a,active:r,msg:i,searchQuery:s}=e;t&&t.searchQuery&&t.searchQuery!==s&&a.remove(s,v.SEARCH_EVENT,this.onSearch),!s||t&&s===t.searchQuery||a.add(s,v.SEARCH_EVENT,this.onSearch);var n=t?t.msg.id:null;n&&!i.id.equals(n)&&(t&&t.active&&a.remove(t.active,t.msg.id.toString(),this.onActiveChange),r&&a.add(r,i.id.toString(),this.onActiveChange))}render(){var{msg:e,chat:t,searchQuery:a,filterPreset:r}=this.props,{active:i}=this.state,o=s.createElement(y.default,{msg:e}),l=s.createElement(h.default,{msg:e.safe(),msgType:"FTSMessage",searchQuery:a.highlighted}),d={enter:this.onEnter};return s.createElement(c.default,{handlers:d,onFocus:this.indicateFocus},s.createElement(n.default,{ref:(0,u.GetRef)((e=>{this.cell=e})),contextEnabled:()=>!1,theme:"chat-checkbox"===this.props.theme?"cell-message-checkbox":"cell-message",active:!!i,primary:s.createElement(_.default,{chat:t,labels:e.labels,firstLabel:null==r?void 0:r.label,showLabel:!0,titlify:!0,ellipsify:!0}),primaryDetail:o,secondary:l,onClick:this.onClick}))}}C.CONCERNS={msg:["id","isSentByMe","isGroupMsg","isNotification","senderObj","dir","rtl","type","labels"],chat:["id","isUser","contact","formattedTitle","groupMetadata"]};var T=(0,f.default)((0,g.default)(C,C.CONCERNS));t.default=T},6903:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(50935)),l=i(a(40722)),d=i(a(40207)),u=i(a(82631));class c extends n.PureComponent{render(){var e,t,a=this.props.msg.ack;return a<o.default.ACK.SENT?e="status-time":a===o.default.ACK.SENT?e="status-check":a===o.default.ACK.RECEIVED?e="status-dblcheck":(e="status-dblcheck",t=l.default.ackBlue),n.createElement("div",{className:(0,s.default)(l.default.ack,t)},n.createElement(u.default,{name:e}))}}c.CONCERNS={msg:["ack"]};var h=(0,d.default)(c,c.CONCERNS);t.default=h},56266:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(19976)),n=i(a(72779)),o=r(a(2784)),l=i(a(50935)),d=i(a(18120)),u=i(a(20642)),c=i(a(39399)),h=i(a(74287)),f=a(57052),p=i(a(40207)),m=i(a(82631)),_=a(89526);function v(){var e=(0,s.default)(['chat:getClasses Invalid msg type:"','"']);return v=function(){return e},e}class g extends o.PureComponent{constructor(...e){super(...e),this.state={parsedVcards:null},this.updateAfterFeatureFlagChange=()=>{this.forceUpdate()}}static getDerivedStateFromProps(e,t){var a,r,i=e.msg;return(null===(a=i.mediaData)||void 0===a?void 0:a.parsedVcards)!==t.parsedVcards?{parsedVcards:null===(r=i.mediaData)||void 0===r?void 0:r.parsedVcards}:null}componentDidMount(){var{listeners:e}=this.props;e.add(d.default,d.default.FEATURE_CHANGE_EVENT,this.updateAfterFeatureFlagChange)}render(){var{msg:e}=this.props,t=function(e,t){switch(e.type){case l.default.MSG_TYPE.IMAGE:case l.default.MSG_TYPE.VIDEO:return e.isViewOnce?(0,_.isUnviewed)(e.safe())?"view-once":"view-once-viewed":e.isGif?"status-gif":e.type===l.default.MSG_TYPE.VIDEO?"status-video":"status-image";case l.default.MSG_TYPE.AUDIO:return e.isGif?"status-gif":"status-audio";case l.default.MSG_TYPE.VCARD:case l.default.MSG_TYPE.MULTI_VCARD:return e.isGif?"status-gif":"status-vcard";case l.default.MSG_TYPE.DOCUMENT:return e.isGif?"status-gif":t?"status-vcard":"status-document";case l.default.MSG_TYPE.CIPHERTEXT:return e.isGif?"status-gif":"status-ciphertext";case l.default.MSG_TYPE.UNKNOWN:return e.isGif?"status-gif":"status-unknown";case l.default.MSG_TYPE.PRODUCT:return"business-description";case l.default.MSG_TYPE.STICKER:return"status-sticker";case l.default.MSG_TYPE.CALL_LOG:switch(e.subtype){case"miss_video":case"miss_group_video":return"status-miss_video"}return"status-miss";case l.default.MSG_TYPE.PTT:return"status-ptt";case l.default.MSG_TYPE.REVOKED:return"recalled";case l.default.MSG_TYPE.LOCATION:return e.isLive?(0,f.liveLocationIcon)(!1):"status-location";case l.default.MSG_TYPE.GROUPS_V4_INVITE:return d.default.supportsFeature(d.default.F.GROUPS_V_4_JOIN_PERMISSION)?"group":"status-unknown";case l.default.MSG_TYPE.PAYMENT:return"status-unknown";case l.default.MSG_TYPE.ORDER:return"shopping-cart"}return __LOG__(2)(v(),e.type),"status-unknown"}(e,this.state.parsedVcards),a=(0,n.default)(c.default.symbol,t,{[c.default.margin]:!e.asRevoked,[c.default.miss]:e.type===l.default.MSG_TYPE.CALL_LOG,[c.default.pttBlue]:e.type===l.default.MSG_TYPE.PTT&&e.ack===l.default.ACK.PLAYED,[c.default.pttGreen]:e.type===l.default.MSG_TYPE.PTT&&e.ack!==l.default.ACK.PLAYED&&!e.isSentByMe}),r=e.paymentAmount1000&&e.paymentCurrency;return o.createElement("div",{className:a},e.type===l.default.MSG_TYPE.PAYMENT&&r?o.createElement(h.default,{currency:e.paymentCurrency,subtype:e.subtype,paymentStatus:e.paymentStatus,paymentTxnStatus:e.paymentTxnStatus,isCompact:!0}):o.createElement(m.default,{name:t}))}}g.CONCERNS={msg:["ack","isGif","isLive","isViewOnce","type","subtype","asRevoked","isSentByMe","paymentCurrency","paymentAmount1000","paymentStatus","paymentTxnStatus","mediaData"]};var E=(0,u.default)((0,p.default)(g,g.CONCERNS));t.default=E},58914:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(7470)),o=r(a(91581)),l=r(a(92507)),d=r(a(17957)),u=r(a(40207)),c=a(64658),h=r(a(58362)),f=r(a(76019)),p=r(a(68384)),m=s.createElement("span",{className:h.default.statusLoading},d.default.t(520));class _ extends s.PureComponent{render(){var{status:e}=this.props,t=s.createElement(o.default,{direction:"auto",selectable:!0,titlify:!0,text:e.status}),a=(0,c.unproxy)(e).stale?m:t;return s.createElement(l.default,{id:e.id,onComplex:()=>(f.default.find(e.id),void 0!==e.status?t:m),waitIdle:this.props.waitIdle},a)}}_.WEAK_CONCERNS={status:["id","stale","status"]};var v=(0,u.default)(_,void 0,_.WEAK_CONCERNS);class g extends s.PureComponent{constructor(e){super(e),this.state={status:f.default.get(e.id)}}componentDidMount(){if(!this.state.status){var e=n.default.gadd(this.props.id);this.setState({status:e.getStatus()})}}componentDidUpdate(e){if(!p.default.equals(this.props.id,e.id)){var t=n.default.gadd(this.props.id);this.setState({status:t.getStatus()})}}render(){var{status:e}=this.state;return e?s.createElement(v,{status:e,waitIdle:this.props.waitIdle}):m}}t.default=g},74223:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(19034)),n=r(a(2784)),o=i(a(19899)),l=i(a(79711)),d=i(a(20642)),u=i(a(40207));class c extends n.PureComponent{constructor(...e){super(...e),this.state={updater:!1},this._listening=!1,this.rerender=()=>{this.setState({updater:!this.state.updater})}}componentDidMount(){this.maybeRegMidnight()}componentDidUpdate(){this.maybeRegMidnight()}maybeRegMidnight(){var{listeners:e,msg:t}=this.props,a=(0,s.default)().startOf("day").subtract(7,"day");t.t>=a.unix()?this._listening||(this._listening=!0,e.add(l.default,"midnight",this.rerender)):this._listening&&(this._listening=!1,e.remove(l.default,"midnight",this.rerender))}render(){return n.createElement(n.Fragment,null,o.default.relativeStr(this.props.msg.t))}}c.CONCERNS={msg:["t"]};var h=(0,d.default)((0,u.default)(c,c.CONCERNS));class f extends n.PureComponent{render(){var{chat:e}=this.props;return e.previewMessage?n.createElement(h,{msg:e.previewMessage}):null}}f.CONCERNS={chat:["previewMessage"]};var p=(0,u.default)(f,f.CONCERNS);t.default=({chat:e,msg:t})=>e?n.createElement(p,{chat:e}):t?n.createElement(h,{msg:t}):null},97702:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=a(43322),o=r(a(65219)),l=r(a(71201)),d=r(a(17957)),u=r(a(20642)),c=r(a(40207)),h=r(a(17693)),f=r(a(63498));class p extends s.Component{constructor(...e){super(...e),this.state={contextMenu:null},this._unblockContactTrigger=e=>{var{contact:t}=this.props,a=[s.createElement(l.default,{a8n:"unblock-contact-in-multi-select",key:"unblock",action:this.unblockContact},d.default.t(509,{contact:t.shortName||t.name}))];e.event&&e.event.persist(),this.setState({contextMenu:{contactId:t.id.toString(),menu:a,anchor:e.anchor,event:e.event}})},this.closeContextMenu=()=>{this.setState({contextMenu:null})},this.unblockContact=()=>{var{contact:e}=this.props;this.closeContextMenu(),e.addPendingAction((0,n.unblockContact)(e)).then((()=>this.props.onSelect())).catch((()=>{}))},this.onSelect=e=>{if(!this.props.disabled)if(this.props.allowBlockedContacts)this.props.onSelect();else{var{contact:t}=this.props;this.state.contextMenu?this.closeContextMenu():t.isContactBlocked?this._unblockContactTrigger({event:e}):this.props.onSelect()}}}render(){var e,{disabled:t,customSecondaryText:a,contact:r,active:i,allowBlockedContacts:n,showEphemeralIcon:l}=this.props;return this.state.contextMenu&&(e=s.createElement(h.default,{displayName:"ChatContextMenu",escapable:!0,popable:!0},s.createElement(f.default,{contextMenu:this.state.contextMenu}))),s.createElement(s.Fragment,null,s.createElement(o.default,{theme:t||r.isContactBlocked&&!n?"chat-checkbox-no-delete":"chat-checkbox",active:i,contact:r,onClick:t?null:this.onSelect,secondary:r.isContactBlocked&&!n?d.default.t(508):a||null,waitIdle:!0,showEphemeralIcon:l}),e)}}p.CONCERNS={contact:["id","isGroup","isContactBlocked","pendingAction","shortName","name"]};var m=(0,u.default)((0,c.default)(p,p.CONCERNS));t.default=m},42097:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({count:e}){var t="";e>0&&(t=n.default.t(1367,{count:n.default.n(e),_plural:e}));return s.createElement("span",{className:o.default.count,"aria-label":t},e>0?n.default.n(e):null)};var s=i(a(2784)),n=r(a(17957)),o=r(a(99165))},35528:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(19976)),n=r(a(2784)),o=i(a(36543)),l=i(a(59853)),d=a(46774),u=i(a(13574)),c=i(a(79711)),h=i(a(26871)),f=i(a(44537)),p=i(a(77906)),m=i(a(98294)),_=i(a(71292)),v=i(a(17957)),g=i(a(20642)),E=a(94469),y=i(a(69345)),S=i(a(62303)),C=i(a(40210)),T=i(a(58885)),M=i(a(61941)),b=i(a(91944)),P=r(a(17026)),A=r(a(75074)),I=i(a(64786));function O(){var e=(0,s.default)(["ChatActionListener:onAttachMediaDrawer fileOrigin is not specified, fallback to default"]);return O=function(){return e},e}class N extends n.Component{constructor(...e){super(...e),this._onChatInfoDrawer=(e,t)=>{c.default.openDrawerRight(n.createElement(_.default,{chat:e,key:"info-".concat(e.id.toString()),showFullGroupDescription:t}),"slide-left",this.props.uim)},this._onLiveLocationDrawer=(e,t)=>{e.liveLocation&&e.liveLocation.active||c.default.openDrawerRight(n.createElement(E.LiveLocationDrawerLoadable,{chat:e,openFrom:t,isFirstLevel:!0}),"slide-left",this.props.uim)},this._onExpiredLocationDrawer=e=>{c.default.openDrawerRight(n.createElement(E.ExpiredLocationDrawerLoadable,{msg:e}),"slide-left",this.props.uim)},this._onMsgInfoDrawer=e=>{P.default.displayInfo===P.StreamInfo.NORMAL?e.chat.kind===d.CHAT_KIND.CHAT?c.default.openDrawerRight(n.createElement(h.default,{msg:e}),"slide-left",this.props.uim):c.default.openDrawerRight(n.createElement(p.default,{msg:e}),"slide-left",this.props.uim):c.default.openToast(n.createElement(A.default,{msg:v.default.t(986),id:(0,A.genId)("msg_info_failed")}))},this._onAttachMediaDrawer=({chat:e,attachments:t,animationName:a,initCaption:r,onComplete:i,fileOrigin:s})=>{var d=()=>{var a=e.attachMediaContents;a&&t&&(s?a.processAttachments(t,s):(__LOG__(3)(O()),a.processAttachments(t,C.default.MEDIA_PICKER_ORIGIN_TYPE.CHAT_PHOTO_LIBRARY)))};c.default.existsDrawerMid((t=>{if(t)d();else{e.attachMediaContents||e.setAttachMediaContents(new o.default({chatParticipantCount:e.getParticipantCount()}));var s=(0,M.default)(e.attachMediaContents,"chat.attachMediaContents");c.default.openDrawerMid(n.createElement(l.default,{chat:e,onComplete:i,initCaption:r,mediaCollection:s}),a||"slide-up",this.props.uim,{noFocus:!0,onEnterAnimationComplete:d})}}))},this.onChatSearch=e=>{c.default.openDrawerRight(n.createElement(u.default,{chat:e}),"slide-left",this.props.uim)},this._onMediaViewer=e=>{var{msg:t,getZoomNode:a,currentTime:r,highlightedMsgIds:i}=e;T.default.get(t.id)?c.default.openModalMedia(n.createElement(S.default,{msg:t,startTime:r,getZoomNode:a,highlightedMsgIds:i}),{transition:"media-viewer",uim:this.props.uim}):c.default.openModal(n.createElement(y.default,{msg:t}))},this._onEphemeralDrawer=e=>{c.default.openDrawerRight(n.createElement(f.default,{chat:e,fromInfoFlow:!1}),"slide-left",this.props.uim)},this._onVoipStartGroupCall=(e,t)=>{var a=e.groupMetadata.participants.map((e=>e.contact.id)),r=n.createElement(b.default,{isVideo:t,groupParticipants:a,onStartGroupCall:e=>I.default.groupCallStart(e,t)});c.default.openModal(r,{transition:"modal-flow"})}}componentDidMount(){var{listeners:e}=this.props;e.add(c.default,"chat_info_drawer",this._onChatInfoDrawer),e.add(c.default,"msg_info_drawer",this._onMsgInfoDrawer),e.add(c.default,"chat_search",this.onChatSearch),e.add(c.default,"attach_media_drawer",this._onAttachMediaDrawer),e.add(c.default,"live_location_drawer",this._onLiveLocationDrawer),e.add(c.default,"media_viewer_modal",this._onMediaViewer),e.add(c.default,"expired_location_drawer",this._onExpiredLocationDrawer),e.add(c.default,"ephemeral_drawer",this._onEphemeralDrawer),e.add(c.default,"voip_start_group_call",this._onVoipStartGroupCall)}render(){return null}}var w=(0,m.default)((0,g.default)(N));t.default=w},60846:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FooterType=void 0;var s=i(a(16760)),n=i(a(30898)),o=i(a(17335)),l=i(a(72779)),d=r(a(2784)),u=i(a(46774)),c=i(a(46394)),h=i(a(91581)),f=i(a(17957)),p=i(a(20642)),m=i(a(37163)),_=i(a(94461)),v=i(a(82631)),g=i(a(74824)),E={CONFIRM:"CONFIRM",NEXT:"NEXT",SEND:"SEND"};t.FooterType=E;class y extends d.Component{constructor(e){super(e),this._forwardIsEnabled=!0,this.state={selected:[]},this._handleForwardClick=()=>{this._forwardIsEnabled&&(this._forwardIsEnabled=!1,this.props.onForward())},this._firstRenderActive=e.startActive||!1}componentDidMount(){var e=this.props.selections.getSelected();this.setState({selected:e}),this.props.listeners.add(this.props.selections,"all",(()=>{this.setState({selected:this.props.selections.getSelected()})})),0===e.length&&(this._firstRenderActive=!1)}componentDidUpdate(){this._hasSelected()||(this._firstRenderActive=!1)}_hasSelected(){return this.state.selected.length>0}render(){var e;if(this._hasSelected()){var t,a=1===this.state.selected.length?this.props.singleSelectionType:this.props.multipleSelectionType;switch(a){case E.CONFIRM:t=d.createElement(v.default,{name:"checkmark-medium"});break;case E.NEXT:t=d.createElement(v.default,{name:"arrow-forward"});break;case E.SEND:default:t=d.createElement(v.default,{directional:!0,name:"send"})}e=d.createElement("div",{className:(0,l.default)(c.default.controlsSummary,{[c.default.confirm]:a===E.CONFIRM})},a!==E.CONFIRM&&d.createElement(C,{chats:this.state.selected}),d.createElement("div",{"data-animate-btn":!0,className:this._firstRenderActive?c.default.btnActive:c.default.btnAction},d.createElement(_.default,{large:!0,onClick:this._handleForwardClick},t)))}return d.createElement(g.default,{transitionName:"slide-up-down-footer",className:c.default.container},e)}}y.defaultProps={singleSelectionType:E.SEND,multipleSelectionType:E.SEND};var S=(0,p.default)(y);t.default=S;class C extends d.Component{constructor(e){super(e),this.state={chats:this.props.chats}}static getDerivedStateFromProps(e,t){var a=t.chats,r=e.chats;return{chats:a=r&&r.length>a.length?a.concat((0,o.default)(r,a)):(0,n.default)(a,r)}}render(){for(var e=(0,s.default)(this.state.chats,(e=>e instanceof u.default?e.formattedTitle:e instanceof m.default?e.name:e.formattedShortNameWithNonBreakingSpaces)),t=[],a=e.length-1;a>=0;a--)t.push(d.createElement(h.default,{className:c.default.item,key:a,text:e[a]})),a>0&&t.push(d.createElement("span",{key:"comma-".concat(a)},f.default.t(594)));return d.createElement(g.default,{transitionName:"pop",className:c.default.summaryText},t)}}},64237:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Component=void 0;var s=i(a(26139)),n=i(a(17335)),o=r(a(2784)),l=i(a(46774)),d=r(a(13886)),u=i(a(43334)),c=i(a(68580)),h=i(a(79711)),f=i(a(50935)),p=(i(a(40147)),i(a(65219))),m=i(a(17029)),_=i(a(91581)),v=r(a(35598)),g=i(a(6660)),E=i(a(44343)),y=a(62902),S=i(a(17957)),C=i(a(20642)),T=i(a(99639)),M=(i(a(27e3)),i(a(73073))),b=i(a(67134)),P=i(a(17693)),A="SEC_CHATS",I="SEC_CONTACTS",O="SEC_GROUPCHATS",N="SEC_STARRED",w="SEC_MSG",D="SEC_MUTED_CHATS",R="ROW_CHATS",L="ROW_CONTACTS",k="ROW_GROUPCHATS",x="ROW_STARRED",F="ROW_MSG";class G extends o.Component{static getDerivedStateFromProps(e){return{ftsStarred:e.ftsResult.filter((({star:e})=>e)),ftsMessages:e.ftsResult.filter((({star:e})=>!e))}}constructor(e){super(e),this._setRefHotKeys=e=>{this._refHotKeys=e},this._onListPointerEventsOff=()=>{this._listPointerEvents=!1},this._onListPointerEventsOn=()=>{this._listPointerEvents=!0},this._updateSelected=e=>{this._debouncedOpenSelected.cancel(),this.props.selection.setVal(e,!1),this._oldSelection=e},this.onContactClick=(e,t)=>{this.onClick(e,t.id)},this._onChatClick=(e,t)=>{this.onClick(e,t.id)},this.onMessageClick=(e,t,a)=>{this.onClick(e,t.id,a)},this.onClick=(e,t,a)=>{e.preventDefault(),e.stopPropagation(),u.default.find(t).then((e=>{a?h.default.openChatAt(e,a).then((t=>{t&&h.default.focusChatTextInput(e)})):e!==this._getActiveChat()?h.default.openChatFromUnread(e).then((t=>{t&&h.default.focusChatTextInput(e)})):h.default.focusChatTextInput(e)}))},this.restoreFocus=()=>{this.props.selection.reset(!0)},this.onFocusGain=e=>{if(e.target===this._refHotKeys&&this._listPointerEvents)if(this.props.selection.index<0)this.focusFirst();else{var{uie:t}=this;t&&t.activate(),this.props.selection.reset(!0)}},this.handleClearChat=e=>{e===this.props.selection.getVal()&&this.props.selection.unset()},this.onFocusSearch=e=>{e.stopPropagation(),e.preventDefault(),this.props.onFocusSearch()},this.setRefUIE=e=>{this.uie=e},this.onFocusList=()=>{this.refList&&this._refHotKeys&&g.default.focus(this._refHotKeys)},this.requestFocus=()=>{this.props.selection.reset(!1),this.props.selection.index>-1&&document.activeElement===document.body&&this.onFocusList()},this.setRefList=e=>{this.refList=e},this.onMultiSelect=(e,t,a)=>{var{multiSelection:r}=this.props;r&&r.setVal(e,t,a)},this._renderWrappedItem=(e,t)=>{var{multiSelection:a,selectableState:r}=this.props;return a&&r?o.createElement(c.default,{model:t,theme:"chat-checkbox",selectableState:r,multiSelection:a,onSelect:this.onMultiSelect},e):e},this.renderItem=e=>{var{searchQuery:t,filterPreset:a}=this.props;switch(e.type){case A:return o.createElement(M.default,{header:S.default.t(1557)});case I:return o.createElement(M.default,{header:S.default.t(1564)});case O:return o.createElement(M.default,{header:S.default.t(1668)});case N:return o.createElement(M.default,{header:S.default.t(1788)});case w:return o.createElement(M.default,{header:S.default.t(1695)});case R:var{data:r}=e;return this._renderWrappedItem(o.createElement(d.default,{chat:r,contact:r.contact,mode:d.Mode.LAST,searchQuery:t,filterPreset:a,onClick:this._onChatClick,mouseDownAsClick:!0,selectableState:this.props.selectableState,multiSelection:this.props.multiSelection,active:this.props.selection,showEphemeralIcon:!0}),r);case L:var{data:i}=e;return this._renderWrappedItem(o.createElement(p.default,{contact:i,active:this.props.selection,searchQuery:t,onClick:this.onContactClick,mouseDownAsClick:!0,waitIdle:!0}),i);case k:var{data:s}=e,n=s[0],l=this._getGroupChatSubtitle(s);return this._renderWrappedItem(o.createElement(d.default,{chat:n,contact:n.contact,secondary:l,mode:d.Mode.LAST,searchQuery:t,filterPreset:a,onClick:this._onChatClick,mouseDownAsClick:!0,selectableState:this.props.selectableState,multiSelection:this.props.multiSelection,active:this.props.selection}),n);case x:var{data:u}=e;return this._renderWrappedItem(o.createElement(T.default,{msg:u,chat:u.chat,searchQuery:t,filterPreset:a,onClick:this.onMessageClick,active:this.props.selection}),u);case F:var{data:c}=e;return this._renderWrappedItem(o.createElement(T.default,{msg:c,chat:c.chat,searchQuery:t,filterPreset:a,onClick:this.onMessageClick,active:this.props.selection}),c);default:throw new v.UnknownDataError(e)}},this._listPointerEvents=!0,this._oldSelection=null,this._debouncedOpenSelected=this.props.debounce((()=>{this._openSelected(this._focusComposer),this._focusComposer=!1}),200),this.state={textsize:m.default.get().textsize,ftsStarred:[],ftsMessages:[],mutedChats:[],collapseMutedChatsEnabled:!1,mutedChatsCollapsed:!0}}componentWillUnmount(){var e=this.getSelection(),t=this.props.selection.getVal();t&&t.isState&&!this.props.isSearching&&!e.length&&h.default.clearChat(t)}componentDidMount(){this.props.selection.init(this.getSelection()),this.props.listeners.add(h.default,"focus_chat_list",this.restoreFocus),this.props.listeners.add(h.default,"focus_next_chat",(e=>{this.onNextChat(null,!0,e)})),this.props.listeners.add(h.default,"focus_prev_chat",(e=>{this.onPrevChat(null,!0,e)})),this.props.listeners.add(h.default,"update_chatlist_selection",this._updateSelected),this.props.listeners.add(h.default,"clear_chat",this.handleClearChat),this.props.listeners.add(h.default,"textsize_change",(e=>{this.setState({textsize:e})}))}componentDidUpdate(e){var t=e.selection.getVal();this.props.selection.init(this.getSelection(),!e.isSearching&&!this.props.isSearching);var a=this.props.selection.getVal();e.isSearching&&!this.props.isSearching&&!a&&this._oldSelection&&this.props.selection.setVal(this._oldSelection),a&&a!==t&&(this._focusComposer=!0,this._debouncedOpenSelected())}_openSelected(e=!1){var t=this.props.selection.getVal();t&&(t instanceof l.default&&t!==this._getActiveChat()?h.default.openChatFromUnread(t).then((a=>{a&&e&&h.default.focusChatTextInput(t)})):e&&h.default.focusChatTextInput(t))}getSelection(){return[...this.props.chats,...this.props.contacts,...this.props.messages,...this.props.groupChats.map((e=>e[0])),...this.state.ftsStarred,...this.state.ftsMessages]}_scrollListIntoFocusedItem(e=100){this.refList&&this.refList.scrollIntoViewIfNeeded(this.props.selection.index,e)}focusFirst(){var{uie:e}=this;e&&e.activate(),this.props.selection.setFirst(),this._scrollListIntoFocusedItem(0),this._debouncedOpenSelected()}onNextChat(e,t,a){e&&e.preventDefault();var r=this.props.selection.next();this.props.selection.index!==r&&(this.props.selection.setNext(!0),this._focusComposer=a,this._scrollListIntoFocusedItem(),this._debouncedOpenSelected())}onPrevChat(e,t,a){e&&e.preventDefault(),this.props.selection.prev()>-1?(this.props.selection.setPrev(!0),this._focusComposer=a,this._scrollListIntoFocusedItem(),this._debouncedOpenSelected()):t||(this._debouncedOpenSelected.cancel(),this._openSelected(),this.props.onFocusSearch())}_getHeight(){var{textsize:e}=this.state,t=f.default.LIST_HEIGHT_TEXTSIZE_MAP.find((t=>t.scale===e));return t?t.height:72}getData(){var{chats:e,contacts:t,groupChats:a,isSearching:r,messages:i}=this.props,{ftsStarred:s,ftsMessages:n,mutedChats:o,mutedChatsCollapsed:l,collapseMutedChatsEnabled:d}=this.state,u=[];return r&&e.length>0&&u.push({itemKey:"section-chats",type:A}),!r&&d?(o.length>0&&u.push({itemKey:"section-collapse-muted",contentKey:"".concat(String(l),"-").concat(o.length),type:D,height:30}),l||u.push(...o.map((e=>({itemKey:"chat-".concat(e.id.toString()),data:e,expanded:!l,type:R})))),u.push(...e.filter((e=>!e.mute.isMuted)).map((e=>({itemKey:"chat-".concat(e.id.toString()),data:e,type:R}))))):u.push(...e.map((e=>({itemKey:"chat-".concat(e.id.toString()),data:e,type:R})))),r&&t.length>0&&u.push({itemKey:"section-contacts",type:I}),u.push(...t.map((e=>({itemKey:"contact-".concat(e.id.toString()),data:e,type:L})))),r&&a.length>0&&u.push({itemKey:"section-groupchats",type:O}),u.push(...a.map((e=>({itemKey:"groupchat-".concat(e[0].id.toString(),"-").concat(e[1].map((e=>e.id.toString())).join("-")),data:e,type:k})))),r&&s.length>0&&u.push({itemKey:"section-starred",type:N}),u.push(...s.map((e=>({itemKey:"starred-".concat(e.id.toString()),data:e,type:x})))),r&&n.length>0&&u.push({itemKey:"section-msg",type:w}),u.push(...n.map((e=>({itemKey:"msg-".concat(e.id.toString()),data:e,type:F})))),r&&i.length>0&&u.push({itemKey:"section-msg",type:w}),u.push(...i.map((e=>({itemKey:"msg-".concat(e.id.toString()),data:e,type:F})))),u}render(){var e,t,{isSearching:a,chats:r}=this.props;return t=a?S.default.t(26):S.default.t(2),o.createElement(P.default,{displayName:"Chatlist",ref:this.setRefUIE,uimState:P.default.State.PASSIVE,requestFocus:this.requestFocus},o.createElement(E.default,{handlers:{down:e=>this.onNextChat(e,!0),j:e=>this.onNextChat(e,!0),up:e=>this.onPrevChat(e,!0),k:e=>this.onPrevChat(e,!0),"/":e=>this.onFocusSearch(e)},onFocus:this.onFocusGain,onRef:this._setRefHotKeys,"data-tab":f.default.TAB_ORDERS.CHAT_LIST},o.createElement(v.default,{"aria-label":t,data:this.getData(),renderItem:this.renderItem,flatListController:this.props.flatListController,direction:"vertical",defaultItemHeight:this._getHeight(),onPointerEventsOff:this._onListPointerEventsOff,onPointerEventsOn:this._onListPointerEventsOn,ref:this.setRefList,role:"grid","aria-rowcount":null!==(e=null==r?void 0:r.length)&&void 0!==e?e:0})))}_getActiveChat(){return u.default.toArray().find((e=>e.active))}_getGroupChatSubtitle(e){var t=e[1],a=e[0].groupMetadata.participants.map((e=>e.contact)),r=(0,n.default)(a,t),i=(0,s.default)(t,r).map((e=>e.formattedShortNameWithNonBreakingSpaces)).join(S.default.t(594)),l=y.Configuration.Search({terms:[this.props.searchQuery.trimmed]});return o.createElement(_.default,{text:i,formatters:l,titlify:!0,direction:"auto"})}}G.defaultProps={chats:[],groupChats:[]};var U=G;t.Component=U;var B=(0,C.default)((0,b.default)(G));t.default=B},38593:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(28080)),o=r(a(15271)),l=r(a(79711)),d=r(a(52737)),u=r(a(46478)),c=a(95595),h=r(a(18120)),f=r(a(17957)),p=r(a(20642)),m=a(80898),_=r(a(85059)),v=r(a(57557)),g=r(a(35194)),E=r(a(15118)),y=r(a(40207)),S=r(a(76019)),C=r(a(15553)),T=r(a(82631)),M=r(a(67134)),b=i(a(75074)),P=r(a(74824));class A extends s.Component{constructor(){super(...arguments),this.onWindowFocus=()=>{},this.onMouseDown=()=>{},this.onDrag=()=>{this.didDrag=!0},this.onClickCapture=()=>{},this._onNewChat=e=>{e.preventDefault(),l.default.openDrawerLeft(s.createElement(v.default,null))},this.onProfile=()=>{var e=(0,c.getMaybeMeUser)(),t=S.default.assertGet(e),a=E.default.assertGet(e);l.default.openDrawerLeft(s.createElement(g.default,{status:t,profilePicThumb:a,conn:d.default}))},this.onUnmute=()=>{_.default.globalMute().unmute(),l.default.openToast(s.createElement(b.default,{msg:f.default.t(719),id:(0,b.genId)()}))},this.state={}}componentDidMount(){}render(){var e=null;this.props.mute.isMuted&&(e=s.createElement(m.MenuBarItem,{a8nText:"menu-bar-unmute",icon:s.createElement(T.default,{name:"dnd"}),title:f.default.t(718),onClick:this.onUnmute,key:"btn-dnd"}));var t=s.createElement("div",{className:n.default.listUser},s.createElement(u.default,{id:(0,c.getMaybeMeUser)(),size:40,onClick:this.onProfile}));return h.default.supportsFeature(h.default.F.MD_BACKEND),s.createElement("header",{className:n.default.header,onMouseDown:this.onMouseDown,onClickCapture:this.onClickCapture},t,s.createElement("div",{className:n.default.listControls},s.createElement(m.MenuBar,{key:"chatlist-header"},s.createElement(P.default,{transitionName:"btn"},e,s.createElement(C.default,null),s.createElement(m.MenuBarItem,{a8nText:"menu-bar-chat",icon:s.createElement(T.default,{name:"chat",directional:!0}),title:f.default.t(1692),onClick:this._onNewChat}),s.createElement(m.MenuBarItem,{a8nText:"menu-bar-menu",icon:s.createElement(T.default,{name:"menu"}),title:f.default.t(939)},s.createElement(o.default,{settings:this.props.settings}))))))}}A.CONCERNS={mute:["isMuted"]};var I=(0,M.default)((0,p.default)((0,y.default)(A,A.CONCERNS)));t.default=I},15271:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(17057));class s extends i.default{}t.default=s},17057:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(67524)),o=a(66181),l=r(a(49951)),d=r(a(79711)),u=r(a(9386)),c=r(a(52737)),h=r(a(50935)),f=i(a(14457)),p=r(a(71201)),m=a(95595),_=a(75459),v=r(a(17957)),g=r(a(54700)),E=a(69421),y=a(53527),S=r(a(91729)),C=r(a(40210)),T=r(a(58885)),M=r(a(82476)),b=r(a(35194)),P=r(a(15118)),A=r(a(40773)),I=r(a(92062)),O=r(a(11405)),N=r(a(63095)),w=r(a(76019)),D=r(a(12767));class R extends s.Component{getElement(){return this._refDropdown}constructor(){super(...arguments),this.openTime=-1,this.onCreateGroup=()=>{d.default.openDrawerLeft(s.createElement(M.default,null)),(0,l.default)(C.default.WEBC_MENU_ITEM_LABEL.NEW_GROUP)},this.onCreateMessengerRoom=()=>{(0,m.shouldShowNUX)(h.default.NUX.MESSENGER_ROOM_DIALOG_NEW)||(0,m.shouldShowNUX)(h.default.NUX.MESSENGER_ROOM_DIALOG_RETURNING)||(0,m.shouldShowNUX)(h.default.NUX.MESSENGER_ROOM_DIALOG_FROM_CHATLIST)?d.default.openModal(s.createElement(S.default,null)):(0,y.openMessengerRoomUrl)(),(0,l.default)(C.default.WEBC_MENU_ITEM_LABEL.CREATE_A_ROOM)},this.onProfile=()=>{var e=(0,m.getMaybeMeUser)(),t=w.default.assertGet(e),a=P.default.assertGet(e);d.default.openDrawerLeft(s.createElement(b.default,{status:t,profilePicThumb:a,conn:c.default})),(0,l.default)(C.default.WEBC_MENU_ITEM_LABEL.PROFILE)},this.onDisconnect=()=>{var e=T.default.some((e=>e.ack===h.default.ACK.CLOCK&&e.local&&e.isSentByMe));if((0,l.default)(C.default.WEBC_MENU_ITEM_LABEL.LOG_OUT),!e)return D.default.logout();d.default.openModal(s.createElement(u.default,{title:v.default.t(501),onOK:()=>D.default.logout(),okText:v.default.t(927),onCancel:()=>d.default.closeModal(),cancelText:v.default.t(1547)},v.default.t(1294)))},this.onArchived=()=>{d.default.openDrawerLeft(s.createElement(n.default,null)),(0,l.default)(C.default.WEBC_MENU_ITEM_LABEL.ARCHIVED)},this.onSettings=()=>{d.default.openDrawerLeft(s.createElement(I.default,null)),(0,l.default)(C.default.WEBC_MENU_ITEM_LABEL.SETTINGS)},this.onStarred=()=>{d.default.openDrawerLeft(s.createElement(O.default,{starredMsgs:N.default})),(0,l.default)(C.default.WEBC_MENU_ITEM_LABEL.STARRED)},this.onLabel=()=>{d.default.openDrawerLeft(s.createElement(g.default,null)),(0,l.default)(C.default.WEBC_MENU_ITEM_LABEL.LABELS)},this.onContactUsOpen=()=>{this.openTime=performance.now(),d.default.openModal(s.createElement(A.default,{onCancel:this.onContactUsCancel,onSend:this.onContactUsSend}))},this.onContactUsCancel=()=>{(0,E.logSessionEvent)(C.default.CONTACT_US_EXIT_STATE.PROBLEM_DESCRIPTION,this.openTime)},this.onContactUsSend=e=>{(0,E.logSessionEvent)(C.default.CONTACT_US_EXIT_STATE.EMAIL_SEND,this.openTime,e)},this.onCatalog=()=>{(0,o.openCatalogManagementFlow)(),(0,l.default)(C.default.WEBC_MENU_ITEM_LABEL.CATALOG)},this.state={rememberMe:(0,m.getRememberMe)()}}componentDidMount(){(0,l.default)(C.default.WEBC_MENU_ITEM_LABEL.OPEN)}render(){var e=s.createElement(p.default,{a8n:"mi-new-group menu-item",action:this.onCreateGroup},v.default.t(1689)),t=s.createElement(p.default,{a8n:"mi-create-messenger-room menu-item",action:this.onCreateMessengerRoom},v.default.t(968)),a=s.createElement(p.default,{a8n:"mi-starred menu-item",action:this.onStarred},v.default.t(935)),r=(0,_.canEditLabelAssociation)()&&s.createElement(p.default,{a8n:"mi-setting menu-item",action:this.onLabel},v.default.t(846)),i=c.default.isSMB?s.createElement(p.default,{a8n:"mi-setting menu-item",action:this.onCatalog},v.default.t(835)):null,n=v.default.t(931);return s.createElement(f.default,{onRef:e=>{this._refDropdown=e},type:"dropdown_menu",flipOnRTL:!0,key:"ChatlistHeader",dirX:f.DirX.LEFT},e,t,s.createElement(p.default,{a8n:"mi-profile-status menu-item",action:this.onProfile},n),i,(0,_.archiveV2Supported)()&&this.props.settings.showArchiveV2?null:s.createElement(p.default,{a8n:"mi-archived menu-item",action:this.onArchived},v.default.t(922)),a,r,s.createElement(p.default,{a8n:"mi-setting menu-item",action:this.onSettings},v.default.t(934)),null,s.createElement(p.default,{a8n:"mi-logout menu-item",action:this.onDisconnect},v.default.t(927)))}}t.default=R},49951:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){new i.default.WebcMenu({webcMenuAction:i.default.WEBC_MENU_TYPE.THREADS_SCREEN_CLICK,webcMenuItemLabel:e}).commit()};var i=r(a(40210))},662:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(19976)),n=i(a(67304)),o=i(a(16760)),l=i(a(54073)),d=i(a(72779)),u=a(39329),c=r(a(2784)),h=i(a(67790)),f=i(a(90513)),p=i(a(43334)),m=i(a(64237)),_=i(a(38593)),v=i(a(97838)),g=i(a(79711)),E=i(a(50935)),y=i(a(7470)),S=i(a(17029)),C=a(20485),T=r(a(96452)),M=a(87819),b=i(a(63097)),P=i(a(22004)),A=i(a(38147)),I=i(a(6660)),O=i(a(92803)),N=i(a(18120)),w=a(75459),D=a(13414),R=i(a(44343)),L=i(a(83005)),k=i(a(17957)),x=i(a(23539)),F=a(12824),G=i(a(81610)),U=i(a(20642)),B=i(a(40210)),j=i(a(51956)),V=i(a(58885)),H=i(a(42913)),W=i(a(85059)),K=i(a(46821)),Y=i(a(72259)),q=i(a(4859)),z=i(a(38362)),Q=i(a(73664)),J=i(a(79953)),X=i(a(2825)),Z=i(a(40207)),$=(i(a(82631)),i(a(67134))),ee=i(a(17693)),te=i(a(91378));function ae(){var e=(0,s.default)(["get from participants table failed"]);return ae=function(){return e},e}var re=450,ie=75;class se extends c.Component{constructor(e){super(e),this._refPanel=null,this.flatListController=new P.default,this._batchState={},this.setRefSearch=e=>{this.refSearch=e},this._setRefInputHotkey=e=>{this._refInputHotkey=e},this._smbFilterSession=new J.default,this._hasLabelEditGK=!1,this._refContainer=c.createRef(),this._debounceSetState=new u.ShiftTimer((()=>{this.setState(this._batchState),this._batchState={}})),this.debounceSetState=(e,t,a)=>{Object.assign(this._batchState,e),void 0===t?this._debounceSetState.onOrBeforeRepaint():void 0===a?this._debounceSetState.debounce(t):this._debounceSetState.debounceAndCap(t,a)},this._updateLabelFeatureFlagChange=()=>{!this._hasLabelEditGK&&(0,w.canEditLabelAssociation)()&&(this._hasLabelEditGK=!0,this.props.listeners.add(x.default,"bulk_msg_chat_label_change",(()=>{this.searchQuery&&!this.searchQuery.isEmptyQuery&&(this.ftsMsgs.updateFtsAfterMsgLabelUpdate(),this.onSearch(this.searchQuery.trimmed,{label:this.searchQuery.filter.label,kind:this.searchQuery.filter.kind}))})),this.selectableState=new z.default(this.props.selectable||!1),this.props.listeners.add(this._multiSelection,"all",this._updateShowMultiselectBar),this.setState({chatlistKeyId:1}))},this._updateShowMultiselectBar=()=>{var{showMultiSelectBar:e}=this.state,t=this._multiSelection&&this._multiSelection.getSelected().length>0&&!this.props.hideMultiSelectBar;!1===e&&t&&this.setState({showMultiSelectBar:!0})},this._scrollChatListToTop=()=>{var e=this._refPanel;if(e){var t=e.scrollTop;0!==e.scrollTop&&(t<e.clientHeight?(0,te.default)(e,"scroll",{duration:300,container:e,offset:-(e.scrollTop+e.getBoundingClientRect().top)}):e.scrollTop=0)}},this.getFilteredContacts=(e,t={},a=!1)=>{var r=(e||"").trim();if(!r&&this._isEmptyFilterQuery(t))return[];r=k.default.accentFold(r);var i=(0,K.default)(r);return y.default.getFilteredContacts().filter((function(e){if(!e.searchMatch(r,i,t.label))return!1;if(!a){var s=p.default.get(e.id);if(s&&s.shouldAppearInList)return!1}return!0}))},this._getFilteredMessages=(e={})=>{var t;if(!this._isEmptyFilterQuery(e)&&e.label){var a=(null===(t=x.default.get(e.label))||void 0===t?void 0:t.labelItemCollection.filter((e=>e.parentType===F.LabelItemParentType.Msg)).map((e=>e.parentId)))||[];V.default.getMessagesById(a).then((e=>{this.setState({messages:e.messages})}))}},this._getFilteredChats=(e,t={})=>{var a=(e||"").trim();if(a||!this._isEmptyFilterQuery(t)){a=k.default.accentFold(a);var r=(0,K.default)(a);return(0,w.canDisplayLabel)()?p.default.filter((e=>{var i=t.label&&e.contact.searchMatch(a,r,t.label),s=!a||e.contact.searchMatch(a,r),n=!t.kind&&!t.label||e.matchFilter(t);return i||s&&n})):p.default.filter((e=>e.contact.searchMatch(a,r)&&e.shouldAppearInList))}return p.default.filter((e=>!e.archive&&e.shouldAppearInList))},this.fullTextSearch=(e,t)=>{var a=e||this.searchQuery.query;(0,L.default)(a)||t&&t.label?(this.state.searching||this.debounceSetState({searching:!0}),this._fts()):this.isFTSSearching()?this._cancelSearch():this.ftsMsgs.reset()},this.shouldFTSSearch=e=>!(!this.ftsMsgs.hasMoreMsgs||this.isFTSSearching()||(0,L.default)(this.searchQuery.query||""))&&e.scrollTop+E.default.SCROLL_FUDGE>e.scrollHeight-e.clientHeight,this._mapGroupToContacts=(e,t)=>{for(var a=new Map,r=function(r){var i=e[r];i&&i.forEach((e=>{e&&(a.has(e)||a.set(e,[]),a.get(e).push(t[r]))}))},i=0;i<e.length;i++)r(i);var s=[];return a.forEach(((e,t)=>{s.push([t,e])})),s.sort((function(e,t){return e[1].length===t[1].length?null!=e[0].t&&null!=t[0].t?t[0].t-e[0].t:null!=e[0].t?-1:1:t[1].length-e[1].length})),s.slice(0,10)},this.onSearch=(e,t)=>{var a=(0,w.canDisplayLabel)()?t:{};if(!e&&this._isEmptyFilterQuery(a))return this.searchQuery.updateQuery(e),this.searchQuery.updateLabelQuery({}),void this.onStopSearch();e===this.searchQuery.query&&this._isEmptyFilterQuery(a)||(this.fullTextSearch(e,a),this._commonGroupSearch(),this._throttledFilteredChats(e,a),this._throttledFilteredContacts(e,a),this.searchQuery.updateQuery(e),this.searchQuery.updateLabelQuery(a))},this._hasSearchText=()=>(0,w.canDisplayLabel)()?!!this.searchQuery.query||!this._isEmptyFilterQuery(this.searchQuery.filter):!!this.searchQuery.query,this.isFTSSearching=()=>{var e=this._batchState;return"searching"in e?e.searching:this.state.searching},this._cancelSearch=()=>{this._fts.cancel(),this._commonGroupSearch.cancel(),this.ftsMsgs.resetSearch(),this.ftsMsgs.reset(),this._ftsPromise&&this._ftsPromise.cancel(),this._findCommonGroupsPromise&&this._findCommonGroupsPromise.cancel(),this.setState({groupChats:[]}),this.isFTSSearching()&&this.debounceSetState({searching:!1},ie)},this._cancelThrottled=()=>{this._throttledFilteredChats.cancel(),this._throttledFilteredContacts.cancel(),this._throttledOnScroll.cancel()},this.onStopSearch=()=>new Promise((e=>{var t;this._isEmptyFilterQuery(this.searchQuery.filter)||(t=this._smbFilterSession.sessionId,new B.default.ChatFilterEvent({actionType:B.default.CHAT_FILTER_ACTION_TYPES.SEARCH_WITH_FILTER,filterType:B.default.CHAT_FILTER_TYPES.OTHER_LABELS,sessionId:t}).commit()),this._cancelSearch(),this.searchQuery.clear(),this._cancelThrottled(),null!=this.refSearch&&this.refSearch.reset(),this.setState({chats:this._getFilteredChats(),contacts:this.getFilteredContacts(),searching:!1},(()=>e()))})),this.onFocusList=e=>{e.repeat||this._chatlist&&(this.refSearch&&!this.refSearch.cursorIsAtEnd()||(e.preventDefault(),A.default.shouldIndicateFocus(),this._chatlist.focusFirst()))},this.onOpenFirst=e=>{e.preventDefault();var t=this.searchQuery.query,a=this.searchQuery.filter,r=this._getFilteredChats(t,a)[0]||this.getFilteredContacts(t,a)[0];r&&p.default.find(r.id).then((e=>{this.onStopSearch(),A.default.shouldIndicateFocus(),g.default.openChatFromUnread(e).then((t=>{t&&g.default.focusChatTextInput(e)}))}))},this.onFocusSearch=()=>{g.default.existsDrawerLeft((e=>{e||(A.default.shouldIndicateFocus(),I.default.focus(this.refSearch))}))},this.indicateFocus=()=>{A.default.maybeIndicateFocus(this._refInputHotkey)},this.onScroll=e=>{this._throttledOnScroll(e.target)},this.getEmptyChatlistState=(e,t,a,r)=>e&&e.length||t&&t.length||a&&a.length||r&&r.length?null:this.props.labelFilter?this.state.searching?c.createElement("span",null):c.createElement(C.NoResultForLabel,{labelId:this.props.labelFilter}):this.searchQuery.query?this.state.searching?c.createElement(C.Searching,null):c.createElement(C.Search,null):p.default.some((e=>e.shouldAppearInList))?c.createElement(C.AllArchived,null):c.createElement(C.ListChats,null),this._setRefPanel=e=>{this._refPanel=e},this.onCancelLabelSelection=()=>{this.setState({showMultiSelectBar:!1}),this._multiSelection&&this._multiSelection.unsetAll(),this.selectableState&&this.selectableState.setSelectable(!!this.props.selectable)},this.ftsMsgs=new O.default,this.selection=new Q.default([],(e=>e.id.toString())),this.searchQuery=new q.default,this._multiSelection=this.props.multiSelection||new H.default([],(e=>e.id.toString())),this._fts=this.props.debounce((()=>{var e=this.searchQuery.trimmed;this._ftsPromise&&this._ftsPromise.cancel(),this._ftsPromise=Promise.resolve().then((()=>{this.isFTSSearching()||this.debounceSetState({searching:!0},ie)})).then((()=>this.ftsMsgs.search({count:E.default.FTS_NUM_RESULTS,filter:this.searchQuery.filter,searchTerm:e}))).checkpoint(this.props.rejectOnUnmount()).then((e=>{e&&!e.canceled&&this.debounceSetState({searching:!1},ie)})).catchType(T.Unmount,(()=>{})).catchType(Promise.CancellationError,(()=>{})).finally((()=>{this._ftsPromise=void 0})).catch((()=>{this.isFTSSearching()&&this.debounceSetState({searching:!1},ie)}))}),E.default.FTS_TYPING_DELAY),this._throttledFilteredChats=this.props.throttle(((e,t)=>{var a=this._getFilteredChats(e,t);this.debounceSetState({chats:a},ie,50)}),re,{leading:!1,trailing:!0}),this._throttledFilteredContacts=this.props.throttle(((e,t)=>{var a=this.getFilteredContacts(e,t);this.debounceSetState({contacts:a},ie,50)}),re,{leading:!1,trailing:!0}),this._throttledOnScroll=this.props.throttle((e=>{this.shouldFTSSearch(e)&&this.fullTextSearch()}),100),this._commonGroupSearch=(0,l.default)((()=>{var e=this.searchQuery.trimmed;if(e){var t=this.getFilteredContacts(e,{},!0);if(0===t.length||t.length>5)this.setState({groupChats:[]});else{var a=(0,o.default)(t,(e=>(0,M.findCommonGroups)(e).then((()=>e.commonGroups)).catch((()=>{throw __LOG__(4,!0,new Error,!0)(ae()),SEND_LOGS("get from participants table failed when finding common groups"),new Error("get from participants table failed")}))));this._findCommonGroupsPromise&&this._findCommonGroupsPromise.cancel(),this._findCommonGroupsPromise=Promise.all(a).then((a=>{if(e===this.searchQuery.trimmed){var r=this._mapGroupToContacts(a,t);this.setState({groupChats:r})}})).catch((()=>{})).finally((()=>{this._findCommonGroupsPromise=null}))}}else this.setState({groupChats:[]})}),750);var{labelFilter:t}=this.props,a=this.props.labelFilter?{label:t}:void 0;this.state={searching:!!a,chats:this._getFilteredChats("",a),contacts:this.getFilteredContacts("",a),groupChats:[],showMultiSelectBar:!1,chatlistKeyId:0,filterPreset:a,textsize:S.default.get().textsize},this.searchQuery.updateLabelQuery(a),this._getFilteredMessages(a)}componentDidMount(){var{labelFilter:e,listeners:t}=this.props;e&&this.onSearch("",{label:e}),this._updateLabelFeatureFlagChange(),t.add(N.default,N.default.FEATURE_CHANGE_EVENT,this._updateLabelFeatureFlagChange),this.props.listeners.add(p.default,"remove",(e=>{if(this.searchQuery.query){var t=(0,n.default)(this.state.chats,e);this.state.chats&&t.length!==this.state.chats.length&&this.debounceSetState({chats:t})}else this._throttledFilteredChats.cancel(),this.debounceSetState({chats:this._getFilteredChats()})})),this.props.listeners.add(y.default,"remove",(e=>{if(this.searchQuery.query||!this._isEmptyFilterQuery(this.searchQuery.filter)){var t=(0,n.default)(this.state.contacts,e);this.state.contacts&&t.length!==this.state.contacts.length&&this.debounceSetState({contacts:t})}else this._throttledFilteredContacts.cancel(),this.debounceSetState({contacts:this.getFilteredContacts()})})),this.props.listeners.add(p.default,"sort change:archive",(()=>{!this.searchQuery.query&&this._isEmptyFilterQuery(this.searchQuery.filter)&&(this._throttledFilteredChats.cancel(),this.debounceSetState({chats:this._getFilteredChats()}))})),this.props.listeners.add(y.default,"sort",(()=>{!this.searchQuery.query&&this._isEmptyFilterQuery(this.searchQuery.filter)&&(this._throttledFilteredContacts.cancel(),this.debounceSetState({contacts:this.getFilteredContacts()}))})),this.props.listeners.add(this.ftsMsgs,"bulk_remove reset",(()=>{!this.searchQuery.query&&this._isEmptyFilterQuery(this.searchQuery.filter)&&(this._throttledFilteredChats.cancel(),this.debounceSetState({chats:this._getFilteredChats()}))})),this.props.listeners.add(g.default,"focus_chat_search",this.onFocusSearch),this.props.listeners.add(g.default,"textsize_change",(e=>{this.debounceSetState({textsize:e})})),this.props.listeners.add(V.default,E.default.NEW_MSG_SENT,(()=>{this._hasSearchText()||!this._isEmptyFilterQuery(this.searchQuery.filter)?this.onStopSearch().then((()=>this._scrollChatListToTop())):this._scrollChatListToTop()}))}getClientWidth(){var e,t;return null===(e=this._refContainer)||void 0===e||null===(t=e.current)||void 0===t?void 0:t.clientWidth}containsDOMNode(e){var t;return!!(null===(t=this._refContainer)||void 0===t?void 0:t.current)&&this._refContainer.current.contains(e)}componentWillUnmount(){this._cancelSearch(),this._cancelThrottled(),this._debounceSetState.cancel()}_isEmptyFilterQuery(e){return!e||!(e.label||e.kind)}_showUnread(){}_showArchivedPanel(){return(0,w.archiveV2Supported)()&&this.props.settings.showArchiveV2&&!this.state.showMultiSelectBar&&this.searchQuery.isEmptyQuery&&this.state.chats&&this.state.chats.length>0&&p.default.some((e=>e.archive))}render(){var{chats:e,contacts:t,groupChats:a,filterPreset:r,messages:i}=this.state,s=this.ftsMsgs.toArray(),n=this.getEmptyChatlistState(e,t,s,i);null==n&&(n=c.createElement(m.default,{key:this.state.chatlistKeyId,ref:(0,D.GetRef)((e=>{this._chatlist=e})),flatListController:this.flatListController,chats:e,contacts:t||[],messages:i||[],filterPreset:r,groupChats:a,isSearching:!!this._hasSearchText(),searchQuery:this.searchQuery,ftsResult:s,selection:this.selection,onFocusSearch:this.onFocusSearch,multiSelection:this._multiSelection,selectableState:this.selectableState}));var o,l={down:this.onFocusList},u=this.state.searching&&this.props.labelFilter||this.state.searching&&this.ftsMsgs.length?c.createElement("div",{key:"spinner",className:v.default.spinner},c.createElement(X.default,{stroke:6,size:24})):null,p=E.default.TEXTSIZE_CLASS_MAP.find((e=>e.scale===this.state.textsize));p&&(o=p.classname);var g,y,S,C,T=(0,d.default)(v.default.chatListPanel,o),M=this.ftsMsgs.hasMoreMsgs&&s.length||this._showUnread()?this.onScroll:void 0;return this.state.showMultiSelectBar?g=c.createElement(ee.default,{key:"multiSelectBar",displayName:"MultiSelect",escapable:!0,requestDismiss:this.onCancelLabelSelection},c.createElement(j.default,{theme:"chatlist-panel",selectedModels:this._multiSelection,labelEditEnabled:!0,iconColor:"#8d9194",onCancel:this.onCancelLabelSelection})):S=c.createElement(R.default,{key:"ListSearchHotKey",handlers:l,onFocus:this.indicateFocus,onRef:this._setRefInputHotkey,className:v.default.panelSearch},c.createElement(G.default,{ref:this.setRefSearch,onSearch:this.onSearch,onEnter:this.onOpenFirst,loading:this.state.searching,smbFilterSession:this._smbFilterSession,listFilterEnabled:!0})),this.props.labelFilter||(y=c.createElement(c.Fragment,null,c.createElement(_.default,{mute:W.default.globalMute(),settings:this.props.settings}),c.createElement(f.default,null),S,g)),this._showArchivedPanel()&&(C=c.createElement(h.default,null)),c.createElement("div",{id:"side",className:T,ref:this._refContainer},y,c.createElement(b.default,{flatListControllers:[this.flatListController],onRef:this._setRefPanel,className:v.default.panelBody,onScroll:M,id:"pane-side"},C,n,u,undefined))}}se.CONCERNS={settings:["showArchiveV2"]};var ne=(0,Y.default)((0,$.default)((0,U.default)((0,Z.default)(se,se.CONCERNS))));t.default=class extends ne{getClientWidth(){return this.getComponent().getClientWidth()}containsDOMNode(e){return this.getComponent().containsDOMNode(e)}}},68580:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(72779)),n=r(a(2784)),o=r(a(21403)),l=i(a(74269)),d=i(a(20642));class u extends n.Component{constructor(e){super(e),this._onSelectableChange=()=>{this.forceUpdate()},this.onSelectChange=e=>{this.state.selected!==e&&this.setState({selected:e})},this.onSelect=e=>{e&&e.stopPropagation();var t,{onSelect:a,model:r}=this.props,{selected:i}=this.state;i?(this.setState({selected:!1,partialSelected:!1}),t=!1):t=!0,a&&a(r,t,!1)};var{multiSelection:t,initialSelection:a,model:r}=this.props,i=!1,s=!1;switch(a){case 0:i=!1,s=!1;break;case 1:i=!0,s=!1;break;case 2:i=!0,s=!0;break;default:i=t.isSelected(r),s=!1}this.state={selected:i,partialSelected:s,modelId:r.id.toString()}}componentDidMount(){this.props.listeners.add(this.props.multiSelection,this.props.model.id.toString(),this.onSelectChange),this.props.selectableState&&this.props.listeners.add(this.props.selectableState,"all",this._onSelectableChange)}componentDidUpdate(e){var{model:t,multiSelection:a,listeners:r}=e,i=t.id.toString(),s=this.props.model.id.toString();a&&i!==s&&(r.remove(a,i,this.onSelectChange),r.add(a,s,this.onSelectChange))}static getDerivedStateFromProps(e,t){var{modelId:a}=t,{multiSelection:r,model:i}=e,s=i.id.toString();return r&&a!==s?{modelId:s,selected:r.isSelected(i)}:null}render(){var{theme:e,selectableState:t,children:a}=this.props,r=(0,s.default)(l.default.checkboxChatControl,{[l.default.labelSelection]:"label-selection"===this.props.theme}),i=t&&t.isSelectable,d={};if(i&&e&&Object.assign(d,{theme:e}),i&&Object.assign(d,{noContext:!0}),null==a)return null;var u=n.Children.toArray(a)[0],c="label-selection"===e?this.onSelect:null;return n.createElement("div",{className:l.default.checkboxChatWrapper,onClick:c},i&&n.createElement("div",{className:r,onClick:this.onSelect},n.createElement(o.default,{onChange:this.onSelect,checked:this.state.selected,theme:this.state.selected&&this.state.partialSelected?o.CHECKBOX_THEME.PARTIAL:void 0})),n.cloneElement(u,d))}}var c=(0,d.default)(u);t.default=c},37097:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(58527)),n=r(a(2784)),o=r(a(65219)),l=i(a(17110)),d=i(a(20642)),u=i(a(74824));class c extends n.Component{constructor(e){super(e),this._renderPills=e=>{var{useShortName:t,isDisabled:a,onDelete:r}=this.props;return e.length?e.map((e=>{var i=a&&a(e.id)?null:{onDelete:r};return n.createElement(o.default,(0,s.default)({contact:e,useShortName:t},i,{type:o.Type.SMALL,key:e.id.toString(),theme:"list-names",waitIdle:!0}))})):null},this.props.listeners.add(this.props.selections,"all",(()=>{this.forceUpdate()}))}componentDidMount(){this.forceUpdate()}render(){return n.createElement(u.default,{transitionName:"slide-up-down-footer",className:l.default.selectedListContainer},this._renderPills(this.props.selections.getSelected()))}}var h=(0,d.default)(c);t.default=h},81610:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(32960)),l=i(a(50935)),d=i(a(71201)),u=i(a(99003)),c=i(a(38147)),h=a(75459),f=i(a(17957)),p=i(a(23539)),m=i(a(49984)),_=i(a(46526)),v=i(a(20642)),g=i(a(40210)),E=i(a(58885)),y=i(a(61941)),S=i(a(2825)),C=i(a(82631)),T=i(a(67134)),M=i(a(17693)),b=i(a(63498)),P=i(a(74824)),A=()=>{};class I extends n.Component{constructor(...e){super(...e),this.state={searchText:"",searchLabel:null,searchKind:null,isSearching:!1,contextMenu:null},this._emojiInputComponent=(0,u.default)(),this.refInput=n.createRef(),this.refContainer=n.createRef(),this._disableOnBlur=!1,this.onBlur=()=>{this._disableOnBlur||this.props.setTimeout((()=>{this.state.searchText||this.state.searchLabel||this.state.searchKind||this.onCancel()}),0)},this._handleChange=e=>{this.setState({searchText:e},(()=>{this.props.onSearch(e,{label:this.state.searchLabel,kind:this.state.searchKind})}))},this._renderSmbSearchKindDropDownItem=(e,t,a)=>{var r="chat_filter_".concat(e);return n.createElement(d.default,{a8n:r,key:r,action:this._updateSearchFilter.bind(this,{kind:e})},n.createElement("div",{className:_.default.kind},n.createElement(C.default,{name:t}),n.createElement("div",{className:_.default.kindName},a)))},this._renderMsgTypeFilter=()=>"chat-msg-search"===this.props.type?[]:[n.createElement("div",{className:_.default.filterTitle,key:"chat_filter_kind_header"},f.default.t(1557)),this._renderSmbSearchKindDropDownItem(l.default.SMB_SEARCH_FILTERS.UNREAD,"search-unread",f.default.t(1290)),this._renderSmbSearchKindDropDownItem(l.default.SMB_SEARCH_FILTERS.GROUP,"group",f.default.t(1668)),this._renderSmbSearchKindDropDownItem(l.default.SMB_SEARCH_FILTERS.BROADCAST,"search-broadcasts",f.default.t(1289))],this._renderFilterLabels=()=>{var e=p.default.toArray().reduce(((e,t)=>t.name&&t.count&&0!==t.count?[...e,n.createElement(d.default,{a8n:"label_item_".concat(t.id),key:"label_item_".concat(t.id),action:this._updateSearchFilter.bind(this,{label:t.id})},n.createElement("button",{className:_.default.labels},n.createElement(m.default,{labels:[t.id],showName:!0,theme:"label-filter"})))]:e),[]);return e.length>0?[n.createElement("div",{className:_.default.filterTitle,key:"chat_filter_label_header"},f.default.t(1292)),...e]:[]},this._renderFilterSelectorMenu=()=>[...this._renderMsgTypeFilter(),...this._renderFilterLabels()],this.onCancel=()=>{var e=this.refInput&&this.refInput.current;e&&!this.state.contextMenu&&(e.reset(),e.blur(),this.setState({searchLabel:null,searchKind:null,searchText:"",isSearching:!1}),this.props.onSearch("",void 0))},this.onReset=e=>{var t;e.stopPropagation(),this.focus();var a=null===(t=this.refInput)||void 0===t?void 0:t.current;a&&(a.reset(),this.setState({searchLabel:null,searchKind:null}),this.props.onSearch("",void 0))},this._handleSearchButtonClick=()=>{this.focus()},this._onSearchOn=()=>{this.setState({isSearching:!0}),this.props.setTimeout(this.focus,0)},this.focus=()=>{(0,y.default)(this.refInput.current,"this.refInput.current").focus()},this._showFilterSelector=e=>{var t,{smbFilterSession:a}=this.props;a&&(t=a.newSessionId(),new g.default.ChatFilterEvent({actionType:g.default.CHAT_FILTER_ACTION_TYPES.OPEN,sessionId:t}).commit()),e.stopPropagation(),this.setState({contextMenu:{menu:this._renderFilterSelectorMenu(),anchor:e.target}})},this.closeContextMenu=()=>{this.setState({contextMenu:null})},this._updateSearchFilter=e=>{var{smbFilterSession:t}=this.props;this.state.contextMenu&&this.closeContextMenu(),this.setState({searchLabel:e.label,searchKind:e.kind}),t&&function(e,t){new g.default.ChatFilterEvent({actionType:g.default.CHAT_FILTER_ACTION_TYPES.SELECT_FILTER,filterType:N(t),sessionId:e}).commit()}(t.sessionId,e),this.props.onSearch("",e)},this._labelSelectorMouseEnter=()=>{(0,h.canDisplayLabel)()&&(this._disableOnBlur=!0)},this._labelSelectorMouseLeave=()=>{this._disableOnBlur=!1},this.onContextClose=()=>{this.setState({contextMenu:null})},this._constructSearchPlaceholder=e=>n.createElement("div",{"data-a8n":o.default.key("input-placeholder"),className:_.default.labelSearchPlaceholder},e)}componentWillUnmount(){this.onCancel()}componentDidMount(){this._checkIfActive(),this.props.listeners.add(E.default,l.default.NEW_MSG_SENT,(()=>{(this.state.searchKind||this.state.searchLabel)&&this.onCancel()}))}componentDidUpdate(){this._checkIfActive()}indicateFocus(){c.default.shouldIndicateFocus(),c.default.maybeIndicateFocus(this.refContainer.current)}_checkIfActive(){if(this.state.isSearching&&!this.state.searchText&&!this.state.searchLabel&&!this.state.searchKind){var e=this.refContainer&&this.refContainer.current;e&&e.contains(document.activeElement)||this.onCancel()}}cursorIsAtEnd(){return(0,y.default)(this.refInput.current,"this.refInput.current").cursorIsAtEnd()}select(){(0,y.default)(this.refInput.current,"this.refInput.current").select()}reset(){var e,t=null===(e=this.refInput)||void 0===e?void 0:e.current;t&&t.reset()}render(){var e,{loading:t,placeholder:a,spellCheck:r,listFilterEnabled:i}=this.props,{isSearching:d,searchText:u,searchLabel:c,searchKind:m}=this.state,v=null;d&&(t?v=n.createElement("div",{className:_.default.iconSpinner,key:"icon-clear-search",onClick:this.onReset},n.createElement(S.default,{size:20,stroke:5,color:"highlight"})):u.length||c||m?v=n.createElement("button",{className:_.default.iconCloseSearch,key:"icon-clear-search",onClick:this.onReset},n.createElement(C.default,{name:"x-alt"})):(0,h.canDisplayLabel)()&&i&&(v=n.createElement("button",{className:_.default.iconLabelSelect,key:"icon-select-label",onClick:this._showFilterSelector},n.createElement(C.default,{name:"filter"})))),d&&(e=n.createElement(M.default,{displayName:"ListSearch",escapable:!0,requestDismiss:this.onCancel,requestFocus:this.focus}));var g,E,y=a||f.default.t(1236),T=d?this.onCancel:this._handleSearchButtonClick,I=(0,s.default)(_.default.listSearch,{[_.default.active]:d||c||m});this.state.contextMenu&&(g=n.createElement(M.default,{displayName:"ChatContextMenu",escapable:!0,popable:!0,requestDismiss:this.onContextClose},n.createElement(b.default,{contextMenu:this.state.contextMenu}))),!u&&(0,h.canDisplayLabel)()&&(c?E=this._constructSearchPlaceholder(f.default.t(845,{labelName:p.default.assertGet(c).name})):m===l.default.SMB_SEARCH_FILTERS.GROUP?E=this._constructSearchPlaceholder(f.default.t(1291)):m===l.default.SMB_SEARCH_FILTERS.UNREAD?E=this._constructSearchPlaceholder(f.default.t(1293)):m===l.default.SMB_SEARCH_FILTERS.BROADCAST&&(E=this._constructSearchPlaceholder(f.default.t(1288))));var O=this._emojiInputComponent;return n.createElement("div",{ref:this.refContainer,onMouseEnter:this._labelSelectorMouseEnter,onMouseLeave:this._labelSelectorMouseLeave,className:I},n.createElement("button",{"data-a8n":o.default.key("icon-search-morph"),className:_.default.iconSearchMorph,onMouseDown:T},n.createElement("div",{className:(0,s.default)(_.default.iconMorph,_.default.iconMorphBack)},n.createElement(C.default,{name:"back"})),n.createElement("div",{className:(0,s.default)(_.default.iconMorph,_.default.iconMorphSearch)},n.createElement(C.default,{name:"search"}))),n.createElement(P.default,{transitionName:"pop"},v,g),n.createElement("div",{"data-a8n":o.default.key("input-placeholder"),className:_.default.inputPlaceholder},u?null:y),E,n.createElement("label",{className:_.default.contInputSearch},n.createElement(O,{a8n:"chat-list-search",ref:this.refInput,theme:"list-search",tabOrder:l.default.TAB_ORDERS.CHAT_LIST_SEARCH,spellCheck:r,onBlur:this.onBlur,onFocus:d?A:this._onSearchOn,onChange:d?this._handleChange:A,onEnter:this.props.onEnter})),e)}}var O=(0,T.default)((0,v.default)(I));function N(e){switch(e.kind){case l.default.SMB_SEARCH_FILTERS.UNREAD:return g.default.CHAT_FILTER_TYPES.UNREAD;case l.default.SMB_SEARCH_FILTERS.GROUP:return g.default.CHAT_FILTER_TYPES.GROUP;case l.default.SMB_SEARCH_FILTERS.BROADCAST:return g.default.CHAT_FILTER_TYPES.BROADCAST_LIST;default:return g.default.CHAT_FILTER_TYPES.OTHER_LABELS}}t.default=class extends O{focus(){this.getComponent().focus()}cursorIsAtEnd(){return this.getComponent().cursorIsAtEnd()}reset(){this.getComponent().reset()}select(){this.getComponent().select()}}},4859:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.SEARCH_EVENT=void 0;var i=r(a(60417)),s=r(a(75652)),n=r(a(28267)),o="SEARCH_EVENT";t.SEARCH_EVENT=o;class l extends n.default{constructor(...e){super(...e),this.query="",this.filter={}}get trimmed(){return this.query.trim()}get highlighted(){var e=this.trimmed.toLowerCase().split(" ");return(0,s.default)((0,i.default)(e))}get _isEmptySearchTerm(){return""===this.trimmed||!this.trimmed}get isEmptyQuery(){return this._isEmptySearchTerm&&!this.filter.kind&&!this.filter.label}updateQuery(e){var t=this.query;this.query=e,e.trim()!==t&&this.trigger(o)}updateLabelQuery(e){this.filter=e||{}}clear(){this.updateQuery("")}}t.default=l},60474:(e,t,a)=>{"use strict";var r=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.InvisibleLabel=function({children:e}){return i.createElement("span",{"aria-label":e})};var i=r(a(2784))},15566:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(19976)),n=r(a(2784)),o=a(12073),l=i(a(17707)),d=i(a(79711)),u=i(a(9386)),c=i(a(50935)),h=i(a(43225)),f=a(19741),p=r(a(96452)),m=a(95595),_=i(a(18120)),v=i(a(71559)),g=i(a(98294)),E=i(a(17957)),y=i(a(20642)),S=i(a(87095)),C=i(a(93714)),T=a(59420),M=i(a(11086)),b=a(32544),P=a(10131),A=r(a(75074)),I=a(58269),O=i(a(76022));function N(){var e=(0,s.default)(["chatAction:sendRevokeMsgs fail"]);return N=function(){return e},e}function w(){var e=(0,s.default)(["chatAction:sendDeleteMsgs dropped"]);return w=function(){return e},e}function D(){var e=(0,s.default)(["chatAction:sendUnstarMsgs dropped"]);return D=function(){return e},e}function R(){var e=(0,s.default)(["chatAction:sendStarMsgs dropped"]);return R=function(){return e},e}function L(){var e=(0,s.default)(["DoNotDisturbSettings:globalMuteDurationLabel non standard global mute duration:",""]);return L=function(){return e},e}function k(e){switch(e){case 1:return E.default.t(715);case 8:return E.default.t(717);case 24:return E.default.t(714);case 168:return E.default.t(716);default:return __LOG__(2)(L(),e),E.default.t(713)}}class x extends n.PureComponent{constructor(...e){super(...e),this._onAttachProduct=({product:e,onSend:t})=>{d.default.openModal(n.createElement(M.default,{product:e,onSend:t}),{transition:"modal-flow",uim:this.props.uim})},this._onProductImageViewer=(e,t)=>{d.default.openModalMedia(n.createElement(C.default,{activeProductImage:e.activeProductImage,productImageCollection:e.productImageCollection,getZoomNode:e.getZoomNode,product:e.product,sessionId:t}),{transition:"media-viewer",uim:this.props.uim})},this.openGroupV4InviteRequestFlow=(e,t,a,r)=>{d.default.openModal(n.createElement(v.default,{participantNeedInvite:e,groupGid:t,subject:a,groupDesc:r}))},this.onToggleMute=(e,t)=>{if(t){var a=E.default.t(1001,{name:e.title()});d.default.openModal(n.createElement(S.default,{title:a,mute:e.mute,onMute:t=>{e.pendingAction++,e.mute.mute(t,!0).finally((()=>{e.pendingAction--}))}}),{transition:"modal",uim:this.props.uim})}else e.pendingAction++,e.mute.unmute(!0).finally((()=>{e.pendingAction--}))},this._onToggleMuteAll=(e,t)=>{t?d.default.openModal(n.createElement(S.default,{mute:e,title:E.default.t(1358),onMute:(t,a)=>{e.mute(t),d.default.openToast(n.createElement(A.default,{msg:k(a),id:(0,A.genId)()}))},muteAll:!0}),{transition:"modal",uim:this.props.uim}):d.default.openModal(n.createElement(u.default,{onOK:()=>{e.unmute(),d.default.closeModal(),d.default.openToast(n.createElement(A.default,{msg:E.default.t(719),id:(0,A.genId)()}))},okText:E.default.t(79),onCancel:()=>d.default.closeModal(),cancelText:E.default.t(1547)},E.default.t(511)))},this.onDeleteOrExit=e=>{d.default.openModal(n.createElement(h.default,{chat:e,onDeleteOrExit:t=>{e.pendingAction++,t.finally((()=>{e.pendingAction--}))}}),{transition:"modal",uim:this.props.uim})},this.onPin=(e,t)=>{_.default.supportsFeature(_.default.F.MD_BACKEND)?d.default.openModal(n.createElement(u.default,{title:E.default.t(1687),onOK:()=>{d.default.closeModal()},okText:E.default.t(1558)},E.default.t(1686))):(e.pendingAction++,(0,P.setPin)(e,t).catch((()=>{})).finally((()=>{e.pendingAction--})))},this.onClear=e=>{d.default.openModal(n.createElement(l.default,{chat:e}),{transition:"modal",uim:this.props.uim})},this.onArchive=(e,t)=>{e.pendingAction++,(0,b.setArchive)(e,t).catch((()=>{})).finally((()=>{e.pendingAction--}))},this.onMarkUnread=(e,t)=>{e.pendingAction++,(0,I.markUnread)(e,t).finally((()=>{e.pendingAction--}))},this._onSendStarMsgs=(e,t,a,r="LEFT")=>{if(!t)return Promise.reject(new p.ActionError);if(t.some((e=>!e.id)))return Promise.reject(new p.ActionError);var i=a||(0,o.genId)(),s=t.length,l={count:s,_plural:s},u=new o.ActionType(E.default.t(145,l)),c=e.sendStarMsgs(t,!0).then((()=>new o.ActionType(E.default.t(144,l),{actionText:E.default.t(199),actionHandler:this._onSendUnstarMsgs.bind(this,e,t,i,r)}))).catchType(f.ServerStatusCodeError,(t=>t.status>=400?e.isEphemeralSettingOn()?new o.ActionType(E.default.t(142,l)):new o.ActionType(E.default.t(143,l)):void 0)).catch((()=>(__LOG__(3)(R()),new o.ActionType(E.default.t(143,l),{actionText:E.default.t(195),actionHandler:this._onSendStarMsgs.bind(this,e,t,i,r)}))));return d.default.openToast(n.createElement(o.ActionToast,{id:i,toastPosition:r,initialAction:u,pendingAction:c})),c},this._onSendUnstarMsgs=(e,t,a,r="LEFT")=>{if(!t)return Promise.reject(new p.ActionError);if(t.some((e=>!e.id)))return Promise.reject(new p.ActionError);var i=a||(0,o.genId)(),s=t.length,l={count:s,_plural:s},u=new o.ActionType(E.default.t(151,l)),c=e.sendStarMsgs(t,!1).then((()=>new o.ActionType(E.default.t(149,l),{actionText:E.default.t(199),actionHandler:this._onSendStarMsgs.bind(this,e,t,i,r)}))).catchType(f.ServerStatusCodeError,(t=>t.status>=400?e.isEphemeralSettingOn()?new o.ActionType(E.default.t(147,l)):new o.ActionType(E.default.t(148,l)):void 0)).catch((()=>(__LOG__(3)(D()),new o.ActionType(E.default.t(148,l),{actionText:E.default.t(195),actionHandler:this._onSendUnstarMsgs.bind(this,e,t,i,r)}))));return d.default.openToast(n.createElement(o.ActionToast,{id:i,toastPosition:r,initialAction:u,pendingAction:c})),c},this._onSendDeleteMsgs=(e,t,a,r,i="LEFT")=>{if(!t)return Promise.reject(new p.ActionError);if(t.some((e=>!e.id)))return Promise.reject(new p.ActionError);var s=t.length,l=r||(0,o.genId)(),u={count:s,_plural:s},c=new o.ActionType(E.default.t(141,u)),h=e.sendDeleteMsgs(t,a).then((e=>{if(e===s)return new o.ActionType(E.default.t(140,u));var t=s-e;return u={count:t,_plural:t},new o.ActionType(E.default.t(139,u))})).catch((()=>(__LOG__(3)(w()),new o.ActionType(E.default.t(139,u),{actionText:E.default.t(195),actionHandler:this._onSendDeleteMsgs.bind(this,e,t,!1,l,i)}))));return d.default.openToast(n.createElement(o.ActionToast,{id:l,toastPosition:i,initialAction:c,pendingAction:h})),h},this._onSendRevokeMsgs=(e,t,a,r,i="LEFT")=>{var s=r;if(!t)return Promise.reject(new p.ActionError);var[l,u]=t.reduce(((e,t)=>{var[a,r]=[t.canRevoke(),t.type!==c.default.MSG_TYPE.GROUPS_V4_INVITE||t.isGroupsV4InviteExpired?null:t];return[e[0]||!a,e[1]||r]}),[!1,null]);if(l)return Promise.reject(new p.ActionError);u&&this._handleGroupInviteMsgRevoke(e,u);var h=t.length;s=s||(0,o.genId)();var f={count:h,_plural:h},m=new o.ActionType(E.default.t(141,f)),_=e.sendRevokeMsgs(t,a).then((e=>{var t=e.filter((e=>e!==T.SendMsgResult.OK)).length;if(t>0)throw new Error("".concat(t," / ").concat(e.length," dropped"));return new o.ActionType(E.default.t(140,f))})).catch((()=>(__LOG__(3)(N()),e.isEphemeralSettingOn()?new o.ActionType(E.default.t(138,f)):new o.ActionType(E.default.t(139,f)))));return d.default.openToast(n.createElement(o.ActionToast,{id:s,toastPosition:i,initialAction:m,pendingAction:_})),_},this._handleGroupInviteMsgRevoke=(e,t)=>{var a=t.inviteGrp,r=(0,m.getMaybeMeUser)().toString();O.default.revokeGroupV4Invite([t.to.toString()],a,r)}}componentDidMount(){this.props.listeners.add(d.default,"mute_all",this._onToggleMuteAll),this.props.listeners.add(d.default,"mute_chat",this.onToggleMute),this.props.listeners.add(d.default,"delete_or_exit_chat",this.onDeleteOrExit),this.props.listeners.add(d.default,"archive_chat",this.onArchive),this.props.listeners.add(d.default,"clear_chat_msgs",this.onClear),this.props.listeners.add(d.default,"mark_chat_unread",this.onMarkUnread),this.props.listeners.add(d.default,"pin_chat",this.onPin),this.props.listeners.add(d.default,"send_star_msgs",this._onSendStarMsgs),this.props.listeners.add(d.default,"send_unstar_msgs",this._onSendUnstarMsgs),this.props.listeners.add(d.default,"send_delete_msgs",this._onSendDeleteMsgs),this.props.listeners.add(d.default,"send_revoke_msgs",this._onSendRevokeMsgs),this.props.listeners.add(d.default,"product_image_viewer_modal",this._onProductImageViewer),this.props.listeners.add(d.default,"attach_product",this._onAttachProduct),this.props.listeners.add(d.default,"open_group_v4_invite_request_flow",this.openGroupV4InviteRequestFlow)}render(){return null}}var F=(0,g.default)((0,y.default)(x));t.default=F},12073:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.genId=function(e){return(0,s.default)(e||"action_toast")},t.ActionToast=t.ActionType=t.ToastPosition=void 0;var s=i(a(74930)),n=a(91460),o=r(a(2784)),l=i(a(79711)),d=a(75074),u={LEFT:"LEFT",RIGHT:"RIGHT"};t.ToastPosition=u;t.ActionType=class{constructor(e,t){if(!e)throw new Error("ActionType must have text!");this.text=e,t&&(this.action=t.actionText,this.handler=t.actionHandler)}};class c extends o.Component{constructor(...e){super(...e),this.state={currentInitialAction:this.props.initialAction,actionType:this.props.initialAction,pending:!0},this._actionPromise=null,this.onAction=()=>{this.state.actionType&&this.state.actionType.handler&&this.state.actionType.handler().catch((()=>{}))},this.onDismiss=()=>{l.default.closeToast(this)}}static getDerivedStateFromProps(e,t){var a=e.initialAction;return a!==t.currentInitialAction?{currentInitialAction:a,actionType:a,pending:!0}:null}componentDidMount(){this._runAction(this.props.pendingAction)}componentDidUpdate(e){e.pendingAction!==this.props.pendingAction&&this._runAction(this.props.pendingAction)}_runAction(e){var t={};this._actionPromise&&this._actionPromise.control.cancel(),this._actionPromise=e.addRejectControl("cancel",(()=>t)).then((e=>{this.setState({actionType:e,pending:!1})})).catchConditional((e=>e!==t),(e=>{this.setState({actionType:e,pending:!1})})).then((()=>(0,n.delayMs)(this.props.settleDuration))).addRejectControl("cancel",(()=>t)).then((()=>{l.default.closeToast(this)})).catchConditional((e=>e===t),(()=>{})).endWithControls("cancel")}render(){var e,t,{actionType:a}=this.state;return a?(a.action&&a.handler&&(t=o.createElement(d.ToastActionBtn,{buttonText:a.action,onClick:this.onAction})),this.state.pending||(e=o.createElement(d.ToastDismissBtn,{onClick:this.onDismiss})),o.createElement(d.ToastBody,{toastPosition:this.props.toastPosition,actionText:a.text,actionBtn:t,dismissBtn:e})):null}}t.ActionToast=c,c.defaultProps={settleDuration:5e3,toastPosition:u.LEFT}},72696:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(91460),n=i(a(47677)),o=r(a(2784)),l=i(a(79711)),d=i(a(78986)),u=i(a(61124)),c=i(a(6155)),h=i(a(91378)),f={duration:300,easing:[.1,.82,.25,1]};class p extends o.Component{constructor(...e){super(...e),this.containerHeight=0,this._childAnimations=[],this.didCancel=!1,this._unmounting=!1,this.state={children:this.props.children},this._refChildren=new Map,this._setRefChild=(e,t)=>{t?this._refChildren.set(e,t):this._refChildren.delete(e)},this._setChildRefCache=new c.default(this._setRefChild),this._heightCallbackCache=new Map}componentWillUnmount(){this._unmounting=!0}_getHeightChange(e,t){return e.reduce(((e,a)=>{if(a<t)return e;var r=this._refChildren.get("".concat(a));return r?e+r.clientHeight:e}),0)}_animateElement(e,t,a,r){this._childAnimations[e]&&(this.didCancel=!0,this._childAnimations[e].cancel());var i=a>0?[0,a]:[-a,0];return this._childAnimations[e]=(this._childAnimations[e]||Promise.resolve()).then((()=>(0,h.default)(t,{translateY:i},f))).then((()=>(0,s.delayMs)(100))).cancellable().then((()=>(a<0&&(r.includes(e)?t.style.opacity="0":t.style.transform=""),e))).catchType(Promise.CancellationError,(()=>((0,h.default)(t,"stop",!0),t.style.transform="",!1))).finally((t=>{if(!this.didCancel)return delete this._childAnimations[e],l.default.setUiBusy(!1,"animation_group"),t;this.didCancel=!1})),this._childAnimations[e]}_transitionAffected(e,t){if(!e)return Promise.resolve(new Set);for(var a=[],[r]=e.slice(-1),i=0;i<=r;++i){var s=this._refChildren.get("".concat(i));s&&a.push(this._animateElement(i,s,(t?1:-1)*this._getHeightChange(e,i),e))}return Promise.all(a).then((e=>new Set(e.filter((e=>!1!==e)))))}_notifyHeightChange(e,t){e.length&&this.props.onHeightChange&&this.props.onHeightChange((t?1:-1)*this._getHeightChange(e,0))}static getDerivedStateFromProps(e,t){var a=e.children,r=t.children,i=!1,s=r.map(((e,t)=>{var r,s=null!==(r=a[t])&&void 0!==r?r:e;return s!==e&&(i=!0),s}));return i?{children:s}:null}componentDidUpdate(e,t){var a=this.state.children,r=t.children;(0,n.default)(a.length===r.length&&this.props.children.length===a.length,"The number of children in an AnimationGroup must remain constant. Render null for children you don't want to appear.");var i=a.map(((e,t)=>t)),s=i.filter((t=>null!=this.props.children[t]&&null==e.children[t])),o=i.filter((t=>null==this.props.children[t]&&null!=e.children[t]));o.length>0&&(o.forEach((()=>{this.busyId=d.default.setBusy(this.busyId),l.default.setUiBusy(!0,"animation_group")})),this._notifyHeightChange(o,!1),this._transitionAffected(o,!1).then((e=>{this._unmounting||0!==e.size&&this.setState((t=>({children:t.children.map(((t,a)=>e.has(a)?null:t))})),(()=>{d.default.decBusy(this.busyId)}))}))),s.length>0&&(s.forEach((()=>{this.busyId=d.default.setBusy(this.busyId),l.default.setUiBusy(!0,"animation_group")})),this._notifyHeightChange(s,!0),this._transitionAffected(s,!0).then((()=>{d.default.decBusy(this.busyId)})))}componentDidMount(){var e=this.state.children.reduce(((e,t,a)=>{var r=this._refChildren.get("".concat(a));return r?(r.style.transform="translateY(0)",e+r.clientHeight):e}),0);this.props.onHeightChange(e,!0)}_childHeightCallback(e){var t=this._heightCallbackCache.get(e);if(t)return t;var a=this._refChildren.get("".concat(e)),r=a?a.clientHeight:0,i=({height:e})=>{r&&e&&e!==r?(this.props.onHeightChange(e-r),r=e):r=e};return this._heightCallbackCache.set(e,i),i}_cloneChild(e,t){if(!e)return e;var a=this._setChildRefCache.getRefSetter("".concat(t));return o.cloneElement(e,{ref:a})}render(){return this.state.children.map(((e,t)=>o.createElement(u.default,{key:".".concat(t),onResize:this._childHeightCallback(t)},this._cloneChild(e,t))))}}t.default=p},85567:(e,t,a)=>{"use strict";var r=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(2784)),s=i.forwardRef((function({children:e},t){return i.createElement("div",{ref:t},e)}));t.default=s},43596:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(70417)),n=i(a(54073)),o=r(a(2784)),l=i(a(20838)),d=a(14457),u=i(a(35387)),c=i(a(17957)),h=a(65935),f=i(a(61941)),p=i(a(61124)),m=i(a(17693)),_=i(a(68768));function v(e){var[t,,a]=e.polygonVertices;return"".concat((0,f.default)(t.x,"topLeft.x"),":").concat((0,f.default)(t.y,"topLeft.y"),":").concat((0,f.default)(a.x,"bottomRight.x"),":").concat((0,f.default)(a.y,"bottomRight.y"))}function g(e,t){if(null==e)return null;var a=e.parentNode;if(!(null!=a&&a instanceof HTMLElement))return null;var[r,i,s]=t.polygonVertices;(0,f.default)(r.x,"topLeft.x")!==(0,f.default)(i.x,"topRight.x")&&(0,f.default)(i.y,"topRight.y")!==(0,f.default)(s.y,"bottomRight.y")||([,r,i,s]=t.polygonVertices);var n=(0,f.default)(r.x,"topLeft.x"),o=(0,f.default)(r.y,"topLeft.y"),l=(0,f.default)(i.x,"topRight.x"),d=(0,f.default)(i.y,"topRight.y"),u=(0,f.default)(s.y,"bottomRight.y"),c=n*a.offsetWidth,h=o*a.offsetHeight,p=a.offsetWidth*(n-l),m=a.offsetHeight*(o-d),_=n>l?Math.PI:0,v=p?Math.atan(m/p)+_:0,g=180*v/Math.PI,E=Math.abs(p/Math.cos(v)),y=Math.abs(a.offsetHeight*(u-d)/Math.cos(v)),S="rotate(".concat(g,"deg)");return{left:Math.round(c),top:Math.round(h),width:Math.round(E),height:Math.round(y),transform:S,transformOrigin:"top left"}}class E extends o.Component{constructor(...e){super(...e),this._annotationRef=o.createRef()}componentDidMount(){this.forceUpdate()}render(){var{annotation:e}=this.props;return o.createElement("div",{ref:this._annotationRef,className:l.default.annotation,style:g(this._annotationRef.current,e),onClick:t=>this.props.onClick(t,e),onKeyDown:t=>this.props.onKeyDown(t,e),role:"button","aria-label":e.location.name,tabIndex:"0"})}}class y extends o.Component{constructor(...e){super(...e),this.state={tooltip:null},this._displayTooltip=(e,t,a)=>{if(null!=t||null!=a){var{location:r}=e,i=(0,h.getMapUrl)((0,f.default)(r.degreesLatitude,"location.degreesLatitude"),(0,f.default)(r.degreesLongitude,"location.degreesLongitude")),n={menu:o.createElement(u.default,{href:i,className:l.default.tooltip,onClick:this._hideTooltip},c.default.t(1256)),type:d.MenuType.tooltip,dirX:d.DirX.RIGHT,dirY:d.DirY.TOP};null!=t?(t.persist(),n=(0,s.default)((0,s.default)({},n),{},{event:t,autoFocus:!1,offsetX:0,offsetY:0})):n=(0,s.default)((0,s.default)({},n),{},{anchor:a,autoFocus:!0}),this.setState({tooltip:n},(()=>{this.props.onTooltipDisplay&&this.props.onTooltipDisplay()}))}},this._hideTooltip=()=>{this.setState({tooltip:null},(()=>{this.props.onTooltipDismiss&&this.props.onTooltipDismiss()}))},this._handleAnnotationClick=(e,t)=>{e.stopPropagation(),this._displayTooltip(t,e)},this._handleAnnotationKeyDown=(e,t)=>{" "!==e.key&&"Enter"!==e.key||(e.preventDefault(),this._displayTooltip(t,null,e.target))},this.handleResize=(0,n.default)((()=>{this._hideTooltip()}),100)}componentWillUnmount(){this.handleResize.cancel()}render(){var{annotations:e}=this.props;if(!e.length)return null;var t=this.state.tooltip&&o.createElement(m.default,{displayName:"InteractiveAnnotationTooltip",popable:!0,escapable:!0,requestDismiss:this._hideTooltip,requestRecentFocusOnUnmount:!1},o.createElement(_.default,{tooltip:this.state.tooltip}));return o.createElement(o.Fragment,null,e.map((e=>function(e){var{polygonVertices:t,location:a}=e,[r,,i]=t;return null!=r&&null!=r.x&&null!=r.y&&null!=i&&null!=i.x&&null!=i.y&&null!=a.degreesLatitude&&null!=a.degreesLongitude}(e)&&o.createElement(E,{key:v(e),annotation:e,onClick:t=>this._handleAnnotationClick(t,e),onKeyDown:t=>this._handleAnnotationKeyDown(t,e)}))),t,o.createElement(p.default,{onResize:this.handleResize}))}}t.default=y},26387:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(71201)),o=r(a(17957)),l=r(a(40207));class d extends s.PureComponent{render(){var{chat:e,disabled:t}=this.props,a=this.props.onArchive.bind(null,!e.archive);return s.createElement(n.default,{a8n:"mi-archive",action:a,key:"ArchiveMenuItem",disabled:t},e.archive?o.default.t(1361):o.default.t(224))}}d.CONCERNS={chat:["archive"]};var u=(0,l.default)(d,d.CONCERNS);t.default=u},18984:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(79711)),o=r(a(20642)),l=r(a(61941)),d=r(a(67134)),u=r(a(77626)),c=i(a(12767));class h extends s.Component{constructor(...e){super(...e),this.startCheckForSuccess=()=>{this.checkIteration=0,this.checkForSuccessInterval=this.props.setInterval(this.checkForSuccess,250)},this.clearCheckForSuccess=()=>{this.checkForSuccessInterval&&(this.props.clearInterval(this.checkForSuccessInterval),this.checkForSuccessInterval=0,this.checkIteration=0)},this.checkForSuccess=()=>{if(c.default.state===c.STATE.CONNECTED){this.checkIteration++;var e=this.props.url;if(this.checkIteration>40)this.onPlayerError({target:{src:e,error:{code:window.MediaError.MEDIA_ERR_NETWORK}}});else{var t=(0,l.default)(this._audioElement,"this._audioElement"),a=t.buffered;a&&a.length&&a.end(0)>0&&this.onPlaying({target:t})}}},this.onPlayerError=e=>{this.clearCheckForSuccess(),this.props.onError&&this.props.onError(e.target.src)},this.onOtherPlaying=e=>{e!==this&&(0,l.default)(this._audioElement,"this._audioElement").pause()},this.onPlaying=e=>{this.clearCheckForSuccess(),n.default.mediaPlaying(this),this.props.onPlay&&this.props.onPlay(e)},this._setRefAudio=e=>{this._audioElement=e,null!=this.props.setRefAudio&&this.props.setRefAudio(e)}}componentDidMount(){var{listeners:e}=this.props,t=(0,l.default)(this._audioElement,"this._audioElement");this._updatePlaybackRate(),e.add(t,"error",this.onPlayerError,!0),e.add(t,"playing",this.onPlaying),e.add(n.default,"mediaPlaying",this.onOtherPlaying),(u.default.isGecko||u.default.isSafari)&&(this.props.autoPlay?(this.checkIteration=0,this.checkForSuccessInterval=this.props.setInterval(this.checkForSuccess,250)):this.props.autoPlay?this.startCheckForSuccess():e.add(t,"play",this.startCheckForSuccess))}componentDidUpdate(){this._updatePlaybackRate()}_updatePlaybackRate(){var e=(0,l.default)(this._audioElement,"this._audioElement"),{playbackRate:t}=this.props;e.defaultPlaybackRate===t&&e.playbackRate===t||(e.defaultPlaybackRate=e.playbackRate=null!=t?t:1)}render(){return s.createElement("audio",{ref:this._setRefAudio,src:this.props.url,className:this.props.className,onClick:this.props.onClick,controls:this.props.controls,preload:this.props.preload,type:this.props.type,autoPlay:this.props.autoPlay},this.props.children)}}var f=(0,o.default)((0,d.default)(h));t.default=f},72174:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(61104)),l=i(a(2825));class d extends n.Component{render(){var{className:e}=this.props;return n.createElement("div",{className:(0,s.default)(o.default.container,e)},n.createElement(l.default,{size:50,stroke:3,color:"solidwhite"}))}}t.default=d},43903:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{theme:t,svg:a}=e,r=(0,n.default)(o.default.badge,{[o.default.pending]:"pending"===t,[o.default.warning]:"warning"===t}),i=a?s.createElement(l.default,{className:o.default.icon,name:a}):null;return s.createElement("div",{className:r},i)};var s=i(a(2784)),n=r(a(72779)),o=r(a(90631)),l=r(a(82631))},54374:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(19976)),n=a(8701),o=r(a(2784)),l=i(a(58922)),d=i(a(77626)),u=i(a(2694));function c(){var e=(0,s.default)(["video.play() promise rejected: "," The error code is ","."]);return c=function(){return e},e}function h(){var e=(0,s.default)(["video.play() promise rejected w/ AbortError: ",", error code: ",""]);return h=function(){return e},e}function f(){var e=(0,s.default)(["Assertion failed! ",""]);return f=function(){return e},e}function p(){var e=(0,s.default)(["srcObject is not supported in video tag while src is not set."]);return p=function(){return e},e}class m extends o.PureComponent{constructor(...e){super(...e),this.refVideo=null,this._autoPlayErrorCount=0,this.setRefVideo=e=>{if(e!==this.refVideo&&(this.refVideo&&this.refVideo.removeEventListener("playing",this.onPlaying),this.refVideo=e,e&&("srcObject"in e&&this.props.srcObject?e.srcObject=this.props.srcObject:e.src||__LOG__(3)(p()),e&&e.addEventListener("playing",this.onPlaying),this.props.autoPlay))){if(e.addEventListener("playing",this._onceAutoplay),e.srcObject)return void this.play();(d.default.isGecko||d.default.isSafari)&&this.props.autoPlay&&e.paused&&this.play()}},this._onceAutoplay=()=>{var e=this.refVideo;if(e&&(e.removeEventListener("playing",this._onceAutoplay),!e.videoHeight||!e.videoWidth)){this.pause(),this.play();var t;this._autoPlayErrorCount<6&&this._autoPlayErrorCount++,this._autoPlayErrorCount>1&&this._autoPlayErrorCount<6&&(t="the height and width of the video is not zero, count (larger than 1): ".concat(this._autoPlayErrorCount)),this._autoPlayErrorCount>=6&&(t="the height and width of the video is not zero, count larger than ".concat(this._autoPlayErrorCount)),t&&(__LOG__(4,void 0,new Error,!0)(f(),t),SEND_LOGS("non-zero height and width"))}},this.onPlaying=()=>{var e=this.refVideo;e&&(e.paused||null!=e.videoHeight&&e.videoHeight>0&&null!=e.videoWidth&&e.videoWidth>0&&this.props.onPlaying&&this.props.onPlaying())},this.getVolume=()=>this.refVideo?this.refVideo.volume:0,this.setVolume=e=>{this.refVideo&&(this.refVideo.volume=e)},this.getMuted=()=>!!this.refVideo&&this.refVideo.muted,this.setMuted=e=>{this.refVideo&&(this.refVideo.muted=e)},this.getPaused=()=>!this.refVideo||this.refVideo.paused,this.getCurrentTime=()=>this.refVideo?this.refVideo.currentTime:0,this.setCurrentTime=e=>{this.refVideo&&(this.refVideo.currentTime=e)},this.getDuration=()=>this.refVideo?this.refVideo.duration:0,this.setDuration=e=>{this.refVideo&&(this.refVideo.duration=e)},this.getBuffered=()=>this.refVideo?this.refVideo.buffered:null}underlyingVideo(){return this.refVideo}play(){this._play()}_play(){var e=this.refVideo;return e?e.paused?(e.removeEventListener("playing",this.onPlaying),(0,l.default)(e).then((()=>{e&&e.addEventListener("playing",this.onPlaying),this.onPlaying()})).catch((t=>{if(e&&e.addEventListener("playing",this.onPlaying),t.name!==n.ABORT_ERROR){var a=this.refVideo&&this.refVideo.error&&this.refVideo.error.message?this.refVideo.error.message:"",r=this.refVideo&&this.refVideo.error?this.refVideo.error.code:"";__LOG__(3)(c(),a,r),this.props.onError&&this.props.onError(t)}else __LOG__(3)(h(),t.message,t.code)}))):Promise.resolve():Promise.reject(new Error("cannot play unmounted video"))}pause(){var e=this.refVideo;e&&(e.paused||e.pause())}pauseAndReset(){var e=this.refVideo;e&&(e.currentTime=0,this.pause())}render(){return o.createElement("video",{ref:this.setRefVideo,autoPlay:this.props.src?this.props.autoPlay:void 0,className:this.props.className?this.props.className:u.default.video,controls:this.props.controls,height:this.props.height,loop:this.props.loop,muted:this.props.muted,poster:this.props.poster,src:this.props.src?this.props.src:void 0,width:this.props.width,onClick:this.props.onClick,onAbort:this.props.onAbort,onCanPlay:this.props.onCanPlay,onCanPlayThrough:this.props.onCanPlayThrough,onDurationChange:this.props.onDurationChange,onEmptied:this.props.onEmptied,onEncrypted:this.props.onEncrypted,onEnded:this.props.onEnded,onError:this.props.onError,onLoadedData:this.props.onLoadedData,onLoadedMetadata:this.props.onLoadedMetadata,onLoadStart:this.props.onLoadStart,onPause:this.props.onPause,onPlay:this.props.onPlay,onProgress:this.props.onProgress,onRateChange:this.props.onRateChange,onSeeked:this.props.onSeeked,onSeeking:this.props.onSeeking,onStalled:this.props.onStalled,onSuspend:this.props.onSuspend,onTimeUpdate:this.props.onTimeUpdate,onVolumeChange:this.props.onVolumeChange,onWaiting:this.props.onWaiting},this.props.children)}}t.default=m},44572:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return s.createElement("div",{className:n.default.border})};var s=i(a(2784)),n=r(a(48290))},96066:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(72779)),o=r(a(32960)),l=r(a(58520)),d=e=>{var t,a=(0,n.default)(e.className,l.default.chat,{[l.default.cartProduct]:"cart-product"===e.theme,[l.default.themeCheckbox]:"chat-checkbox"===e.theme||"label-list"===e.theme||"chat-checkbox-no-delete"===e.theme||"cell-message-checkbox"===e.theme||"product-checkbox"===e.theme,[l.default.themeDrawerList]:"drawer-list"===e.theme,[l.default.themeIdentity]:"identity"===e.theme,[l.default.themeListNames]:"list-names"===e.theme||"list-names-no-delete"===e.theme,[l.default.themeMessage]:"cell-message"===e.theme||"cell-message-checkbox"===e.theme,[l.default.themePlain]:"plain"===e.theme,[l.default.themeSearch]:"chat-search"===e.theme,[l.default.themeStatus]:"status-list"===e.theme,[l.default.themeLabel]:"label-selection"===e.theme,[l.default.themeAddItem]:"add-item"===e.theme,[l.default.themeAddItemPlaceholder]:"add-item-placeholder"===e.theme,[l.default.idle]:e.idle,[l.default.member]:"group-modal"===e.theme||"chat-checkbox-no-delete"===e.theme,[l.default.unread]:!!e.unread,[l.default.chatDrag]:!!e.dragging,[l.default.active]:!!e.active,[l.default.isMuted]:!!e.isMuted,[l.default.groupV4Invite]:"group_v4_invite"===e.theme,[l.default.product]:"product"===e.theme||"product-checkbox"===e.theme,[l.default.orderProduct]:"order-product"===e.theme,[l.default.media]:"media"===e.theme,[l.default.listButton]:"list-button-compact"===e.theme,[l.default.listMsg]:"list-msg"===e.theme,[l.default.archivePanel]:"archive-panel"===e.theme});e.image&&(t=e.customImage?e.image:s.createElement("div",{className:l.default.chatAvatar},e.image));var r,i,d=null!=e.primaryDetail?s.createElement("div",{className:l.default.chatMeta},e.primaryDetail):null;null!=e.secondary&&(i=null!=e.secondaryDetail?s.createElement("div",{role:"gridcell","aria-colindex":"1",className:l.default.chatMeta},e.secondaryDetail):null,r=s.createElement("div",{className:l.default.chatSecondary},s.createElement("div",{className:l.default.chatStatus},e.secondary),i));var u=null!=e.detail?s.createElement("div",{className:(0,n.default)(l.default.chatBody,l.default.chatDetails)},e.detail):null;return s.createElement("div",{ref:e.setDivRef,"data-a8n":o.default.key("chat-card"),className:a,onClick:e.onClick,onMouseDown:e.onMouseDown,onMouseEnter:e.onMouseEnter,onMouseOver:e.onMouseOver,onMouseLeave:e.onMouseLeave,onContextMenu:e.onContextMenu},t,s.createElement("div",{className:l.default.chatBody},s.createElement("div",{role:"gridcell","aria-colindex":"2",className:(0,n.default)(l.default.chatMain,{[l.default.noDelete]:"list-names-no-delete"===e.theme})},s.createElement("div",{className:l.default.chatTitle},e.primary),d),r),u)};t.default=d},85395:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,s.default)(o.default.chatSubtitle,{[o.default.chatSubtitleHeader]:"title"===e.location});return n.createElement("div",{className:t},n.createElement(l.default,{titlify:!0,className:o.default.chatSubtitleText,direction:"inherit",text:e.text,selectable:!0}))};var s=i(a(72779)),n=r(a(2784)),o=i(a(95122)),l=i(a(91581))},21403:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CHECKBOX_THEME=void 0;var s=i(a(58527)),n=i(a(22220)),o=i(a(72779)),l=r(a(2784)),d=i(a(35905)),u=i(a(33208)),c={PARTIAL:"PARTIAL"};t.CHECKBOX_THEME=c;var h=function({checked:e,id:t,onChange:a,theme:r,disabled:i,tabIndex:h}){function f(e){if(e.stopPropagation(),null!=t){var r=document.getElementById(t);null==r||r.focus()}a(e)}var p=e&&r===c.PARTIAL,[m,_]=(0,u.default)(f,{checked:e,disabled:i,indeterminate:p}),{tabIndex:v}=_,g=(0,n.default)(_,["tabIndex"]);return l.createElement(l.Fragment,null,l.createElement("input",{className:d.default.a11yHidden,checked:e,disabled:!!i||void 0,indeterminate:!!p||void 0,onChange:f,type:"checkbox",id:t,tabIndex:null!=h?h:0}),l.createElement("div",(0,s.default)({},g,{className:(0,o.default)(d.default.checkboxContainer,{[d.default.containerDisabled]:i}),ref:m,"aria-hidden":"true",tabIndex:-1}),l.createElement("div",{className:(0,o.default)(d.default.checkbox,{[d.default.checkedCheckbox]:e,[d.default.disabled]:i})},l.createElement("div",{className:(0,o.default)(d.default.checkmark,{[d.default.checkedCheckmark]:e&&r!==c.PARTIAL,[d.default.uncheckedCheckmark]:!e,[d.default.partialCheckMark]:p})}))))};t.default=h},32337:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(66692)),l=i(a(82631)),d=i(a(74824));class u extends n.Component{constructor(...e){super(...e),this.onToggle=e=>{e&&e.stopPropagation(),this.props.onChange()}}render(){var e,t;this.props.checked?(t=this.props.radio?"checkbox-round-radio-checked":"checkbox-round-checked",e="checked"):(e="unchecked",t=this.props.hover?"checkbox-round-unchecked":"checkbox-round-passive");var a=(0,s.default)(o.default.roundIcon,{[o.default.unchecked]:!this.props.checked&&this.props.hover&&!this.props.systemUncheckedColor,[o.default.passive]:!this.props.checked&&!this.props.hover&&!this.props.systemUncheckedColor,[o.default.uncheckedSystemColor]:!this.props.checked&&this.props.systemUncheckedColor});return n.createElement(d.default,{className:o.default.container,transitionName:"pop"},n.createElement("div",{className:a,key:e,onClick:this.onToggle},n.createElement(l.default,{name:t})))}}var c=u;t.default=c},60519:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({type:e,onClick:t,onKeyDown:a,disabled:r,theme:i,overMedia:l}){var p=(0,s.default)(o.default.btn,{[o.default.btnMediaPrev]:e===c.Prev,[o.default.btnMediaNext]:e===c.Next,[o.default.disabledBtn]:r,[o.default.overMedia]:l}),m=h[e],_=f[e];return n.createElement(d.default,{className:p,onClick:r?null:t,onKeyDown:a,label:m,theme:i,disabled:r},n.createElement(u.default,{name:_,title:m,directional:!0}))},t.ButtonType=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(77095)),l=i(a(17957)),d=r(a(94461)),u=i(a(82631)),c=a(28103).Mirrored(["Prev","Next"]);t.ButtonType=c;var h={Prev:l.default.t(1140),Next:l.default.t(1080)},f={Prev:"chevron-left",Next:"chevron-right"}},7681:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(23109)),l=i(a(50935)),d=i(a(23695)),u=({children:e,icon:t,secondary:a,theme:r})=>{var i=(0,s.default)(d.default.container,{[d.default.inConversation]:"conversation"===r,[d.default.inList]:"list"===r});if("conversation"===r){var u=o.default.get("defaultPreference");u&&u.wallpaperColor===l.default.DEFAULT_CHAT_WALLPAPER&&(i=(0,s.default)(i,d.default.defaultWallpaper))}var c=t?n.createElement("div",{className:d.default.icon},t):null,h=null!=a?n.createElement("div",{className:d.default.secondary},a):null;return n.createElement("div",{className:i},c,n.createElement("div",{className:d.default.body},n.createElement("div",{className:d.default.main},e),h))};t.default=u},96268:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.createDataLink=function(e){var t=document.createElement("a"),a=i.default.isBlob(e)||i.default.isData(e);return t.href=a?e:"",t};var i=r(a(74185))},24211:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=a(46774),o=r(a(71201)),l=r(a(17957)),d=r(a(40207));class u extends s.PureComponent{render(){var e;switch(this.props.chat.kind){case n.CHAT_KIND.GROUP:e=this.props.chat.isReadOnly?l.default.t(1586):l.default.t(1592);break;case n.CHAT_KIND.BROADCAST:e=l.default.t(1588);break;case n.CHAT_KIND.CHAT:e=l.default.t(540)}return s.createElement(o.default,{a8n:"mi-delete",action:this.props.onDeleteOrExit,disabled:this.props.disabled},e)}}u.CONCERNS={chat:["isReadOnly","kind"]};var c=(0,d.default)(u,u.CONCERNS);t.default=c},46478:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.getSize=O,t.getDefaultIcon=w,t.default=t.DetailImageCommon=t.DETAIL_IMAGE_QUALITY=t.DETAIL_IMAGE_SIZE=void 0;var s=i(a(58527)),n=i(a(70417)),o=i(a(72779)),l=a(39329),d=r(a(2784)),u=i(a(72174)),c=i(a(43334)),h=i(a(13303)),f=r(a(96452)),p=i(a(92507)),m=i(a(53632)),_=i(a(20642)),v=i(a(15118)),g=i(a(40207)),E=a(64658),y=i(a(82631)),S=i(a(68384)),C={SMALL:"SMALL",MEDIUM:"MEDIUM",LARGE:"LARGE",AUTO:"AUTO",NONE:"NONE"};t.DETAIL_IMAGE_SIZE=C;var T={LOW:"LOW",HIGH:"HIGH"};t.DETAIL_IMAGE_QUALITY=T;class M extends d.PureComponent{constructor(e){super(e),this._retriedAfter403=!1,this.state={loading:!0,loaded:!1,showSpinner:!1,profilePicThumbImg:null},this.onLoad=()=>{this._showSpinnerTimeout&&this._showSpinnerTimeout.cancel(),this.setState({loading:!1,loaded:!0}),this.props.onLoad&&this.props.onLoad()},this.onError=e=>{if(this._showSpinnerTimeout&&this._showSpinnerTimeout.cancel(),e instanceof f.ServerStatusError){var{profilePicThumb:t}=this.props;switch(e.status){case 403:t.markStale({eurl:!0}),this._retriedAfter403||(this._retriedAfter403=!0,t.validate());break;case 410:t.markStale()}}this.setState({loading:!1,loaded:!1})},this._enableSpinner="business"!==e.theme,e.loader&&this._enableSpinner&&(this._showSpinnerTimeout=new l.ShiftTimer((()=>{this.setState({showSpinner:!0})})),this._showSpinnerTimeout.onOrAfter(100))}static getDerivedStateFromProps(e,t){return t.profilePicThumbImg!==e.profilePicThumbImg?{loading:!0,loaded:!1,showSpinner:!1,profilePicThumbImg:e.profilePicThumbImg}:{profilePicThumbImg:e.profilePicThumbImg}}componentDidUpdate(e){e.profilePicThumbImg!==this.props.profilePicThumbImg&&this._showSpinnerTimeout&&this._showSpinnerTimeout.onOrAfter(100)}componentWillUnmount(){this._showSpinnerTimeout&&this._showSpinnerTimeout.cancel()}_shouldShowSpinner(){var{profilePicThumb:e,loader:t}=this.props,{loading:a,showSpinner:r}=this.state;return!!this._enableSpinner&&(!!t&&r&&a&&!(!(0,E.unproxy)(e).stale&&!this.props.profilePicThumbImg))}render(){var{profilePicThumbImg:e,spinnerClassName:t,imgClassName:a,alt:r}=this.props,{loading:i,loaded:s}=this.state,l={[h.default.isLoaded]:!i};a&&(l=(0,n.default)((0,n.default)({},l),{},{[a]:"string"==typeof a}));var c,f,p=(0,o.default)(h.default.avatarImage,l);this._shouldShowSpinner()&&(c=d.createElement(u.default,{key:"spinner",className:t})),e&&(f=d.createElement(m.default,{src:e,hasPrivacyChecks:!0,crossOrigin:!1,className:p,draggable:!1,key:"image",onLoad:this.onLoad,onError:this.onError,alt:r}));var _=this.props.defaultIcon;return d.createElement(d.Fragment,null,c,_,f)}}t.DetailImageCommon=M;class b extends d.PureComponent{render(){return d.createElement(M,(0,s.default)({},this.props,{profilePicThumbImg:this.props.profilePicThumb.imgFull}))}}b.CONCERNS={profilePicThumb:["imgFull"]};var P=(0,g.default)(b,b.CONCERNS);class A extends d.PureComponent{render(){return d.createElement(M,(0,s.default)({},this.props,{profilePicThumbImg:this.props.profilePicThumb.img}))}}A.CONCERNS={profilePicThumb:["img"]};var I=(0,g.default)(A,A.CONCERNS);function O(e){switch(e){case C.SMALL:return 49;case C.MEDIUM:return 100;case C.LARGE:return 200;case C.NONE:return;default:return e}}class N extends d.Component{constructor(...e){super(...e),this.state={ephemeral:!1},this._updateEphemeral=()=>{var e=c.default.get(this.props.id);e&&this.setState({ephemeral:e.isEphemeralSettingOn()})}}componentDidMount(){var e=c.default.get(this.props.id);e&&this.props.listeners.add(e.isGroup?e.groupMetadata:e,"change:ephemeralDuration",this._updateEphemeral)}componentDidUpdate(e){if(e.id!==this.props.id){var t=c.default.get(e.id);t&&this.props.listeners.remove(t.isGroup?t.groupMetadata:t,"change:ephemeralDuration",this._updateEphemeral);var a=c.default.get(this.props.id);a&&this.props.listeners.add(a.isGroup?a.groupMetadata:a,"change:ephemeralDuration",this._updateEphemeral)}}render(){var e,t,{id:a,size:r,quality:i,loader:s,onClick:n,onLoad:l,quoted:u,square:f,border:m,waitIdle:_,showEphemeralIcon:g,theme:E,alt:S}=this.props,M=i||T.LOW,b={height:O(t="number"==typeof r?r>0?r:C.SMALL:null!=r?r:C.SMALL),width:O(t)};n&&(b.cursor="pointer");var A,N=(0,o.default)(h.default.avatar,{[h.default.status_v3]:"status_v3"===E,[h.default.avatarSquare]:f,[h.default.avatarBorder]:m}),D=w(a,u),R=d.createElement(p.default,{id:a,onComplex:()=>{var e=null,t=v.default.gadd(a);return t&&(e=M===T.HIGH?d.createElement(P,{profilePicThumb:t,defaultIcon:D,loader:s,onLoad:l,alt:S}):d.createElement(I,{profilePicThumb:t,defaultIcon:D,loader:s,onLoad:l,alt:S})),d.createElement("div",{className:N,style:b,onClick:n},e)},waitIdle:_},d.createElement("div",{className:N,style:b,onClick:n},D));return g&&(null===(e=c.default.get(a))||void 0===e?void 0:e.isEphemeralSettingOn())&&(A=d.createElement("div",{className:h.default.wrapper},d.createElement("div",{className:h.default.badge},d.createElement(y.default,{name:"disappearing",className:h.default.badgeIcon})),R)),A||R}}function w(e,t){var a="default-user";return S.default.isUser(e)&&!S.default.isPSA(e)&&t?a="default-user-square":S.default.isGroup(e)?a="default-group":S.default.isBroadcast(e)?a="default-broadcast":S.default.isPSA(e)&&(a="default-psa"),d.createElement("div",{className:h.default.avatarDefault,key:"default"},d.createElement(y.default,{name:a}))}var D=(0,_.default)(N);t.default=D},98864:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.Upload=t.PendingCancel=t.Pending=t.Download=t.DocState=void 0;var s=i(a(58527)),n=r(a(2784)),o=i(a(32514)),l=i(a(2825)),d=i(a(82631)),u=({children:e,onClick:t})=>{var a=t?{onClick:t}:{};return n.createElement("div",(0,s.default)({className:o.default.docState},a),e)};t.DocState=u;t.Download=({onClick:e})=>n.createElement(u,{onClick:e||(()=>{})},n.createElement(d.default,{name:"audio-download"}));t.Pending=({outgoingMsg:e})=>n.createElement(u,null,n.createElement("div",{className:o.default.spinner},n.createElement(l.default,{stroke:3,size:32,outgoingMsg:e})));t.PendingCancel=({outgoingMsg:e})=>n.createElement(u,null,n.createElement("div",{className:o.default.spinner},n.createElement(l.default,{stroke:3,size:32,outgoingMsg:e})),n.createElement(d.default,{name:"audio-cancel-noborder"}));t.Upload=()=>n.createElement(u,null,n.createElement(d.default,{name:"audio-upload"}))},71201:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ThemeOptions=void 0;var s=i(a(58527)),n=i(a(72779)),o=r(a(2784)),l=i(a(32960)),d=i(a(56061)),u=i(a(98294)),c=i(a(44343)),h=i(a(63252)),f=a(11419),p=(0,h.default)({COMPACT:null,MUTED:null});t.ThemeOptions=p;class m extends o.PureComponent{constructor(...e){super(...e),this.state={hover:!1,focus:!1},this.onMouseEnter=()=>{this.setState({hover:!0})},this.onMouseLeave=()=>{this.setState({hover:!1})},this.onFocus=()=>{this.setState({focus:!0})},this.onBlur=()=>{this.setState({focus:!1})},this.onClick=e=>{this.onAction(e)},this.onKeyboardActivation=e=>{e.repeat||this.onAction(e)},this.onAction=e=>{var{action:t}=this.props;if(t&&!(!1===t(e))){var a=this.props.uim;a&&a.uie.requestDismiss()}}}render(){var{children:e,tooltip:t,type:a,disabled:r=!1,theme:i}=this.props,{hover:u,focus:h}=this.state,m=(u||h)&&null!=t?t:null,v=(0,f.isString)(e)?o.createElement("div",{className:(0,n.default)(d.default.ellipsify,d.default.action,{[d.default.compact]:i===p.COMPACT}),role:"button","aria-label":e},e):e,g={enter:this.onKeyboardActivation,space:this.onKeyboardActivation},E=(0,n.default)(d.default.item,d.default.shortcut,{[d.default.hover]:u||h,[d.default.text]:"text"===a,[d.default.emoji]:"emoji"===a||"emoji-grid"===a,[d.default.emojiGrid]:"emoji-grid"===a,[d.default.icon]:"icon"===a,[d.default.disabled]:r||i===p.MUTED}),y=r?{}:{handlers:g,onContextMenu:_,onMouseDown:_,onClick:this.onClick,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onFocus:this.onFocus,onBlur:this.onBlur};return o.createElement(c.default,(0,s.default)({component:"li","data-a8n":l.default.key(this.props.a8n),className:E,"data-animate-dropdown-item":!0},y),v,o.createElement("div",null,m))}}function _(e){e.preventDefault()}m.defaultProps={type:"text"};var v=(0,u.default)(m);t.default=v},44977:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(72779)),n=r(a(2784)),o=a(86884),l=r(a(86634)),d=i(a(12396)),u=i(a(53632)),{getGlyphId:c,getStyle:h,getCssClasses:f}=d.default;class p extends n.Component{componentDidMount(){var{emoji:e}=this.props,t=this.context,a=c(e);null!=a&&(t.incrementLoadingEmojisCount(),l.default.loadEmoji(a,l.LOAD_PRIORITY.LAZY_LOAD_EMOJI).finally((()=>{t.decrementLoadingEmojisCount()})))}render(){var e,t,{className:a,element:r,emoji:i,selectable:o,selected:l,size:d,src:p,onLoad:m,tabIndex:_}=this.props,v=c(i);if(null==v)return null;p||(e=h(v,d),t=f(v,d));var g=(0,s.default)(a,t,{selected:l});return"span"===r?n.createElement("span",{className:g,style:e,onLoad:m,tabIndex:_,"data-unicode":this.props["data-unicode"],"data-variant":this.props["data-variant"],"data-emoji-index":this.props["data-emoji-index"]}):n.createElement(u.default,{alt:i,className:g,draggable:!1,onLoad:m,plainText:i,selectable:o,style:e,src:p})}}t.default=p,p.contextType=o.InitialEmojisCompletionContext},91581:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.EMOJI_SIZE=void 0;var s=i(a(70417)),n=i(a(54073)),o=i(a(72779)),l=r(a(2784)),d=r(a(91540)),u=i(a(79711)),c=i(a(12396)),h=i(a(89170)),f=i(a(72034)),p=a(62902),m=i(a(17957)),_=i(a(20642)),v=i(a(61941)),g=i(a(66615)),E=a(89659),y=i(a(77626)),S={SMALL:"SMALL",LARGE:"LARGE"};t.EMOJI_SIZE=S;var C=4096;function T(e){return c.default.containsEmoji(e.substring(0,C))}class M extends l.PureComponent{constructor(...e){super(...e),this.state={text:this.props.text||"",ellipsified:null},this.refContainer=l.createRef(),this._registeredListener=!1,this._registerResizeListener=()=>{this._registeredListener||(this._registeredListener=!0,this.props.listeners.add(window,"resize",this._recompute),this.props.listeners.add(u.default,"resize",this._recompute))},this._unregisterResizeListener=()=>{this._registeredListener&&(this._registeredListener=!1,this.props.listeners.remove(window,"resize",this._recompute),this.props.listeners.remove(u.default,"resize",this._recompute))},this._recompute=(0,n.default)((()=>{this.setState({ellipsified:null},this.ellipsify)}),10),this._ellipsifyCheck=()=>T(this.state.text)&&this.ellipsify(),this.ellipsify=()=>{var e=this.refContainer.current;if(e){var t=(0,v.default)(e.parentElement,"node.parentElement"),a=e.querySelectorAll("img");if(a.length){var r=e.clientWidth;e.style.overflow="visible";var i=e.clientWidth!==r;if(e.style.overflow="hidden",i){var s=Boolean(m.default.isRTL())===Boolean(this.props.dirMismatch),n=a[function(e,t,a){var r=0;for(;r<e.length;){var i=e[r];if(a&&i.offsetLeft+i.clientWidth>=t)break;if(!a&&i.offsetLeft<=t)break;r++}return r}(a,s?t.clientWidth-function(e,t){for(var a=0,{childNodes:r}=e,i=0;i<r.length;i++){var s=r[i];if(s===t)break;a+=s instanceof Element?s.clientWidth:0}return a}(t,e)-12:12,s)];this.setState({ellipsified:P(e,n)})}}}},this._buildBidiModel=e=>e.reduce(((e,t)=>{if("string"==typeof t){var a=t.split(/(\r?\n|\r)/g).map((e=>({dir:d.dir(e),content:e})));return e.concat(a)}return e.push({content:t}),e}),[]),this._explodeOutputByLines=(e,t)=>{var{direction:a}=this.props,r=[],i=this._buildBidiModel(e),s=[],n=a;"auto"!==a&&"inherit"!==a||(n=null);for(var o=(e,t=!1)=>{var i=null==n||null==a||n===a,o=i?null:n,d=!i||"rtl"===n!==m.default.isRTL()?h.default.dirMismatch:null;r.push(l.createElement("span",{key:e,dir:o,className:d},s,t?"…":null))},d=0;d<i.length;d++){var u=i[d];n!==u.dir&&null!=n&&void 0!==u.dir&&(o(d),s=[]),void 0!==u.dir&&(n=u.dir),s.push(u.content)}return o(i.length,t),r},this.componentDidMount=()=>{!y.default.supportsEmojiEllipsification&&this.props.ellipsify&&T(this.state.text)&&this._registerResizeListener(),!y.default.supportsEmojiEllipsification&&this.props.ellipsify&&this._ellipsifyCheck()},this.render=()=>{if(!this.state.text)return null;var{onClick:e,ellipsify:t,dirMismatch:a,inferLinesDirection:r,inlineblock:i,direction:s,textLimit:n,multiline:d}=this.props,u=this.state.ellipsified?this.state.ellipsified:this.state.text,c="inherit"===s?null:s||"auto",m=!!this.props.selectable,_=this.props.formatters||p.Configuration.EmojiOnly({selectable:m}),v=n||1/0;t&&u.length>C&&v>C&&(v=C);var y=(0,o.default)(this.props.className,{[h.default.ellipsify]:!!t,[h.default.inlineblock]:!!i,[h.default.clickable]:!!e,[h.default.dirMismatch]:a&&!r,[h.default.multiline]:d}),S=(0,f.default)(u,_,E.JSXSerializer,void 0,v),T=!!this.state.ellipsified||u.length>v,M=this.props.inferLinesDirection?this._explodeOutputByLines(S,T):S;return l.createElement(g.default,{className:y,dir:c,element:this.props.element,onClick:e,ref:this.refContainer,selectable:m,title:this.props.titlify?this.state.text:void 0},M)}}getContainerElement(){return this.refContainer.current}getWidth(){var e=this.refContainer.current;return e?e.getBoundingClientRect().width:0}static getDerivedStateFromProps(e,t){var a,r=null,i=null!==(a=e.text)&&void 0!==a?a:"";return i!==t.text&&(r={text:i}),y.default.supportsEmojiEllipsification||!e.ellipsify||null==r||T(i)||(r=(0,s.default)((0,s.default)({},r),{},{ellipsified:null})),r}componentDidUpdate(e,t){!y.default.supportsEmojiEllipsification&&this.props.ellipsify&&t.text!==this.state.text&&(T(this.state.text)?(this._recompute(),this._registerResizeListener()):this._unregisterResizeListener())}componentWillUnmount(){this._recompute.cancel()}}M.defaultProps={element:"span",emojiSize:S.SMALL,textLimit:1/0};var b=(0,_.default)(M);function P(e,t,a={found:!1}){if(e===t)return a.found=!0,"";if(e instanceof HTMLImageElement)return e.alt;if(e.nodeType===Node.TEXT_NODE)return e.nodeValue;for(var r=function(e){if(e instanceof Element)switch(e.tagName){case"CODE":return["```","```"];case"STRONG":return["*","*"];case"EM":return["_","_"];case"DEL":return["~","~"];case"LI":return["* ",""];default:return null}return null}(e),i="",s=0;s<e.childNodes.length&&(i+=P(e.childNodes[s],t,a),!a.found);)s++;if(null==r)return i;var[n,o]=r;return"".concat(n).concat(i).concat(o)}t.default=class extends b{getWidth(){return this.getComponent().getWidth()}getContainerElement(){return this.getComponent().getContainerElement()}}},20485:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.LazyLoadRetry=t.NoResultForLabel=t.LoadingWithText=t.Loading=t.ImageSearchEmpty=t.SearchingImages=t.BeforeImageSearch=t.DocMsgs=t.LinkMsgs=t.MediaMsgs=t.StarredMsgs=t.AllArchived=t.ListStatus=t.BeforeSearchMessages=t.ListGroups=t.ListProducts=t.ListChats=t.SearchMessagesUnavailable=t.SearchMessages=t.SearchGroups=t.SearchWithKeyword=t.SearchWithoutKeyword=t.SearchContacts=t.SearchingMessages=t.Searching=t.Search=t.Archived=t.Blocked=t.Empty=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(32960)),l=i(a(43334)),d=i(a(79711)),u=i(a(91581)),c=i(a(81226)),h=i(a(17957)),f=i(a(23539)),p=i(a(2825)),m=i(a(82631)),_=({a8nText:e,a8nTitle:t,children:a,className:r,icon:i,text:l,theme:d,title:h,onClick:f})=>{var p=h?n.createElement("div",{"data-a8n":o.default.key(t),className:c.default.title},h):null,m=l?n.createElement("div",{"data-a8n":o.default.key(e),className:c.default.text},n.createElement(u.default,{text:l})):null,_=(0,s.default)(c.default.empty,r,{[c.default.compact]:"compact"===d});return n.createElement("div",{className:_,onClick:f},i,p,m,a)};t.Empty=_;t.Blocked=()=>{var e=n.createElement("div",{className:c.default.icon},n.createElement(m.default,{name:"empty-blocked"}));return n.createElement(_,{icon:e,title:h.default.t(277),text:h.default.t(202),a8nTitle:"blocked-empty",a8nText:"add-blocked-description"})};t.Archived=()=>{var e=n.createElement("div",{className:c.default.icon},n.createElement(m.default,{name:"empty-archived"}));return n.createElement(_,{icon:e,title:h.default.t(229),a8nTitle:"archived-empty"})};t.Search=()=>n.createElement(_,{className:c.default.emptyTop,text:h.default.t(1231),a8nText:"search-no-chats-or-contacts"});t.Searching=()=>n.createElement(_,{className:c.default.emptyTop,text:h.default.t(1243),a8nText:"searching-chats-contacts-messages"});t.SearchingMessages=()=>n.createElement(_,{className:c.default.emptyTop,text:h.default.t(1245),a8nText:"searching-messages"});t.SearchContacts=()=>n.createElement(_,{className:c.default.emptyTop,text:h.default.t(1232),a8nText:"search-no-contacts"});t.SearchWithoutKeyword=()=>n.createElement(_,{className:c.default.emptyTop,text:h.default.t(1092),a8nText:"search-no-results-without-keyword"});t.SearchWithKeyword=e=>n.createElement(_,{className:c.default.emptyTop,text:h.default.t(1235,{keyword:e}),a8nText:"search-no-results-without-keyword"});t.SearchGroups=()=>n.createElement(_,{className:c.default.emptyTop,text:h.default.t(1233),a8nText:"search-no-groups"});t.SearchMessages=()=>n.createElement(_,{className:c.default.emptyTop,text:h.default.t(1234),a8nText:"search-no-messages"});t.SearchMessagesUnavailable=()=>n.createElement(_,{className:c.default.emptyTop,text:h.default.t(1238),a8nText:"search-results-unavailable"});t.ListChats=()=>n.createElement(_,{text:h.default.t(1082),a8nText:"no-chats"});t.ListProducts=({hasCatalog:e=!0})=>{var t=e?h.default.t(1090):h.default.t(1081);return n.createElement(_,{text:t,a8nText:"no-products"})};t.ListGroups=()=>n.createElement(_,{text:h.default.t(1085),a8nText:"no-groups"});t.BeforeSearchMessages=(e,t)=>{var a=t?h.default.t(472,{chatName:e}):h.default.t(533,{chatName:e});return n.createElement(_,{className:c.default.emptyTop,text:a,a8nText:"chat-search-prompt"})};function v(){var e=a(67524).default;d.default.openDrawerLeft(n.createElement(e,null))}t.ListStatus=()=>n.createElement(_,null);t.AllArchived=()=>{var e=l.default.filter((e=>e.archive)).length;return n.createElement(_,{title:h.default.t(219),a8nTitle:"all-chats-archived"},n.createElement("div",{"data-a8n":o.default.key("see-archived"),role:"button",onClick:v,className:c.default.action},h.default.t(1255,{count:e,_plural:e})))};t.StarredMsgs=()=>n.createElement(_,{text:h.default.t(1093),a8nText:"no-starred-messages"});t.MediaMsgs=()=>n.createElement(_,{text:h.default.t(1087),a8nText:"no-media"});t.LinkMsgs=()=>n.createElement(_,{text:h.default.t(1086),a8nText:"no-links"});t.DocMsgs=()=>n.createElement(_,{text:h.default.t(1084),a8nText:"no-docs"});t.BeforeImageSearch=()=>n.createElement(_,{text:h.default.t(813),a8nText:"image-search-prompt"});t.SearchingImages=()=>n.createElement(_,{text:h.default.t(1244),a8nText:"searching-images"});t.ImageSearchEmpty=()=>n.createElement(_,{text:h.default.t(812),a8nText:"image-search-no-results"});t.Loading=()=>n.createElement(_,null,n.createElement(p.default,{size:50,stroke:4}));t.LoadingWithText=({text:e})=>n.createElement(_,null,n.createElement("div",{className:c.default.spinner},n.createElement(p.default,{size:50,stroke:4})),n.createElement(u.default,{element:"div",className:c.default.text,text:e}));t.NoResultForLabel=({labelId:e})=>{var t=f.default.assertGet(e);return n.createElement(_,null,n.createElement(u.default,{element:"div",className:c.default.text,text:h.default.t(1091,{labelName:t.name})}))};t.LazyLoadRetry=({className:e,onClick:t})=>n.createElement(_,{className:e,onClick:t},n.createElement(m.default,{name:"live-location-refresh",className:c.default.iconRetry}),n.createElement("div",null,h.default.t(1213)))},34092:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(65633)),o=({children:e})=>s.createElement("div",{className:n.default.tooltip,role:"tooltip"},e);t.default=o},47642:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(50935)),o=r(a(73823)),l=r(a(17957)),d=a(86145);class u extends s.PureComponent{constructor(e){super(e),this._handleReadMoreClick=()=>{var{text:e}=this.props,t=n.default.SUBSEQUENT_PAGE_SIZE;this.setState((a=>{var r=a.textLimit+n.default.SUBSEQUENT_PAGE_SIZE;return{textLimit:c(e,r,t)?r:1/0}}))};var{text:t,textLimit:a}=e;this.state={textLimit:c(t,a,a)?a:1/0}}render(){return s.createElement(s.Fragment,null,this.props.children(this.state),this.state.textLimit!==1/0?s.createElement("span",{className:o.default.read_more,role:"button",onClick:this._handleReadMoreClick}," "+l.default.t(1181)):null)}}function c(e,t,a){return(0,d.numCodepoints)(e)-t>a*n.default.OVERFLOWING_PAGE_THRESHOLD}t.default=u},47685:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(20642));class o extends s.PureComponent{constructor(...e){super(...e),this._setRefInput=e=>{this._refInput=e},this._handleClick=e=>{e.stopPropagation()},this._handleChange=e=>{this.props.onChange(e)}}open(){this._refInput&&this._refInput.click()}render(){return s.createElement("input",{accept:this.props.mimes,ref:this._setRefInput,type:"file",multiple:!0,style:{display:"none"},onClick:this._handleClick,onChange:this._handleChange})}}var l=(0,n.default)(o);t.default=class extends l{open(){return this.getComponent().open()}}},86038:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ParticipantsList=void 0;var s=a(39329),n=i(a(2784)),o=r(a(77690)),l=r(a(85395)),d=r(a(17957)),u=r(a(20642)),c=r(a(40207)),h="sort remove reset add";class f extends n.PureComponent{constructor(e){super(e),this._onParticipantsUpdate=()=>{this._recalculateParticipantsTimer.debounce(100)},this._recalculateParticipantsTimer=new s.ShiftTimer((()=>{this.setState({participants:v(this.props.groupMetadata.participants)})}));var{listeners:t,groupMetadata:{participants:a}}=e;this.state={participants:v(a)},t.add(a,h,this._onParticipantsUpdate)}componentDidMount(){this.ensureParticipantsSorted()}componentDidUpdate(e){this.ensureParticipantsSorted();var t=e.groupMetadata.participants,a=this.props.groupMetadata.participants;if(a!==t){var r=this.props.listeners;r.remove(t,h,this._onParticipantsUpdate),r.add(a,h,this._onParticipantsUpdate),this._recalculateParticipantsTimer.cancel(),this.setState({participants:v(a)})}}componentWillUnmount(){this._recalculateParticipantsTimer.cancel()}ensureParticipantsSorted(){this.props.groupMetadata.participants.ensureSorted()}render(){var e=this.props.groupMetadata.support?d.default.t(1337):this.props.overridingText||this.state.participants.map((e=>{var[t]=e.split(/\s/);return o.default.exec(t)?t:e})).join(d.default.t(594))||this.props.placeholder;return e?n.createElement(l.default,{text:e,location:this.props.location}):null}}f.CONCERNS={groupMetadata:["participants","support"]};var p=(0,u.default)((0,c.default)(f,f.CONCERNS));t.ParticipantsList=p;class m extends n.PureComponent{render(){var e=this.props,t=e.presence.withholdDisplay?e.placeholder:e.presence.getFormattedString();return n.createElement(p,{groupMetadata:e.groupMetadata,overridingText:t,placeholder:e.placeholder,location:e.location})}}m.CONCERNS={chatstate:["id","type","deny","t"],groupMetadata:["announce","participants"],presence:["forceDisplay","withholdDisplay"]};var _=(0,c.default)(m,m.CONCERNS);function v(e){return e.map((e=>e.contact.formattedShortNameWithNonBreakingSpaces))}t.default=_},38063:(e,t,a)=>{"use strict";var r=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=i.useRef();i.useEffect((()=>{a.current=e}),[e]),i.useEffect((()=>{if(null!=t){var e=setInterval((function(){a.current&&a.current()}),t);return()=>clearInterval(e)}}),[t])};var i=r(a(2784))},47609:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){var r=(0,o.unproxy)(e),i=s.useRef();function d(){return null==i.current&&(i.current=new n.default(null!=a?a:"Hook(useModelValues)",r.proxyName,t,!0,!0)),i.current}var[u,c]=s.useState((()=>{var e=d(),t=e.getModelAndValidate(r);if(!t)throw new l(e.name);return e.createProxy(t)})),h=s.useCallback(((e,t)=>{var a=e.getModelAndValidate(t);if(!a)throw new l(e.name);c(e.createProxy(a))}),[]);s.useEffect((()=>{var e=d(),t=e.getModel(r);return e.attachConcern(t,u.proxyBitMask,h),()=>{e.detachConcern(t,h)}}),[r,u,h]);var[f,p]=s.useState(r);if(f!==r){var m=d();m.detachConcern(f,h);var _=m.getModelAndValidate(r);if(!_)throw new l(m.name);p(_),c(m.createProxy(_))}return u},t.StateHookMissingModelError=void 0;var s=i(a(2784)),n=r(a(97591)),o=a(64658);class l extends Error{constructor(e){super("Received a null value for model key: ".concat(e))}}t.StateHookMissingModelError=l},74494:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=(0,i.unproxy)(e),o=a.proxyName;null==n[o]&&(n[o]=new Set([...a.__props,...a.__session]));if(!n[o].has(t))throw new s(e.proxyName,t);return(0,r.useCallback)((e=>{if("function"==typeof e){var r=a.get(t);a.set(t,e(r))}else a.set(t,e)}),[t,a])},t.SetStateHookMissingModelPropertyError=void 0;var r=a(2784),i=a(64658);class s extends Error{constructor(e,t){super('The model "'.concat(e,'" has no property/sessions "').concat(t,'" defined'))}}t.SetStateHookMissingModelPropertyError=s;var n={}},33208:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a,r=(0,i.useRef)(),o=!0===t.disabled?n:e;return[e=>{r.current=e},{"aria-checked":t.indeterminate?"mixed":t.checked,"aria-disabled":null!==(a=t.disabled)&&void 0!==a?a:void 0,onClick:o,onKeyPress:function(e){var t;(0,s.default)(e)&&(e.stopPropagation(),e.preventDefault(),null===(t=r.current)||void 0===t||t.click())},role:"checkbox",tabIndex:t.disabled?-1:0}]};var i=a(2784),s=r(a(72509));function n(){}},92507:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(78986)),o=r(a(68384));class l extends s.PureComponent{constructor(...e){super(...e),this.state={isBusy:n.default.isBusy()},this.onIdle=()=>{this.setState({isBusy:!1})}}componentDidMount(){this.props.waitIdle&&(this._idleTaskId=n.default.enqueue(this.onIdle))}componentDidUpdate(e){if(!o.default.equals(e.id,this.props.id)||!this.props.waitIdle){this.state.isBusy&&n.default.dequeue(this._idleTaskId);var t=n.default.isBusy();t&&this.props.waitIdle&&(this._idleTaskId=n.default.enqueue(this.onIdle)),this.setState({isBusy:t})}}componentWillUnmount(){this.props.waitIdle&&n.default.dequeue(this._idleTaskId)}render(){var{children:e,onComplex:t,waitIdle:a}=this.props,{isBusy:r}=this.state;return r&&a?s.createElement(s.Fragment,null,e):t()}}t.default=l},27536:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(45455)),n=i(a(72779)),o=r(a(2784)),l=i(a(72174)),d=i(a(53632)),u=i(a(8196)),c=i(a(82631)),h="SMALL",f="MEDIUM",p="LARGE",m="NONE";function _(e){switch(e){case h:return 49;case f:return 100;case p:return 200;case m:return;default:return e}}class v extends o.PureComponent{constructor(...e){super(...e),this.state={isLoaded:!1},this.onLoad=()=>{this.setState({isLoaded:!0})}}render(){var e,{size:t,fallbackSVG:a,className:r,loader:i,wrapOptions:h={},transition:f,roundContainer:p=!0,imgProps:m}=this.props,{src:v,alt:g,crossOrigin:E,draggable:y}=m,{centerWrapperChild:S,wrapperClassName:C}=h,{isLoaded:T}=this.state,M=(0,n.default)(u.default.avatarImage,{[u.default.isLoaded]:T,[u.default.transition]:f}),b={height:_(t),width:_(t)};i&&!T&&(e=o.createElement(l.default,null));var P=o.createElement(d.default,{src:v,className:M,onLoad:this.onLoad,alt:g,crossOrigin:E,draggable:y}),A=(0,s.default)(h)?P:o.createElement("div",{className:(0,n.default)(C,u.default.avatarWrapper,u.default.avatarImageWrapper,{[u.default.centerChild]:S,[u.default.isLoaded]:T})},P),I=""!==v?o.createElement(o.Fragment,null,e,A):null;return o.createElement("div",{className:(0,n.default)(u.default.avatar,r,{[u.default.roundBorder]:p}),style:b},I,o.createElement("div",{className:(0,n.default)(C,u.default.avatarWrapper,u.default.avatarSvgWrapper,{[u.default.centerChild]:S,[u.default.transition]:f})},o.createElement(c.default,{name:a})))}}t.default=v,v.defaultProps={size:h,loader:!1}},43486:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t=!1){if(0===e.length)return"";var a=e[0];if(1===e.length)return a;var r=e[e.length-1];if(2===e.length)return function(e,t,a=!1){return a?n.default.t(1005,l(e,t)):s.createElement(o.default,{id:1005,params:{A:e,B:t}})}(a,r,t);var i=e[1],d=e.slice(2,e.length-1);return function(e,t,a,r,i=!1){var d=[i?n.default.t(1004,l(e,t)):s.createElement(o.default,{id:1004,key:"listItem_firstItem",params:{A:e,B:t}})],u=a.reduce(((e,t,a)=>[i?n.default.t(1002,l(t,e)):s.createElement(o.default,{id:1002,key:"listItem_".concat(a),params:{A:t,B:e}})]),d);return i?n.default.t(1002,l(u,r)):s.createElement(o.default,{id:1003,params:{A:u,B:r}})}(a,i,d,r)};var s=i(a(2784)),n=r(a(17957)),o=r(a(81524));function l(e,t){return{A:e,B:t}}},35598:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.UnknownDataError=t.DEFAULT_ITEM_HEIGHT=t.DEFAULT_ITEM_WIDTH=void 0;var s=i(a(70417)),n=i(a(54073)),o=i(a(72779)),l=a(29351),d=r(a(2784)),u=i(a(25610)),c=i(a(78986)),h=i(a(1100)),f=i(a(66346)),p=i(a(5701)),m=i(a(74824));t.DEFAULT_ITEM_WIDTH=72;t.DEFAULT_ITEM_HEIGHT=72;class _ extends((0,l.customError)("UnknownDataError")){constructor(e){super("Unknown data encountered while rendering. Item key: ".concat(e.itemKey))}}t.UnknownDataError=_;class v extends d.Component{constructor(e){super(e),this.keyPool=new h.default,this.hanging=!1,this.pointerEvents=!0,this.setRefList=e=>{this.refList=e},this.setListLength=()=>{this.setState({renderedListLength:this.state.listLength})},this.getListLength=()=>this.state.renderedListLength,this.onLayout=e=>{var t=this.refList;if(t){var a="horizontal"===this.props.direction?t.getBoundingClientRect().left-e.position.left:t.getBoundingClientRect().top-e.position.top,r=Math.max(a,0),i="horizontal"===this.props.direction?e.width:e.height,{firstIndex:n,lastIndex:o}=v.computeIndexes(this.props,(0,s.default)((0,s.default)({},this.state),{},{offsetFromStart:r,bodyDimension:i}));this.setState({firstIndex:n,lastIndex:o,bodyDimension:i,offsetFromStart:r})}},this.onScroll=()=>{this.animationFrame?this.hanging=!0:(this.hanging=!1,this.animationFrame=requestAnimationFrame(this._onScroll))},this._onScroll=()=>{this.disablePointerEvents();var e=this.props.flatListController.getScrollFromStart();if(null==e)throw new Error("FlatList:ScrollEvent thrown while container is unmounted");var t=Math.max(e,0),a=v.computeIndexes(this.props,(0,s.default)((0,s.default)({},this.state),{},{scrollFromStart:t}));this.setState({scrollFromStart:t,firstIndex:a.firstIndex,lastIndex:a.lastIndex},this.onFinishScroll)},this.onFinishScroll=()=>{this.animationFrame=void 0,this.enablePointerEvents(),this.hanging&&this.onScroll()},this.enablePointerEvents=(0,n.default)((()=>{if(this.animationFrame)return this.enablePointerEvents();null!=this.busyId&&(c.default.clearBusy(this.busyId),delete this.busyId),this.props.onPointerEventsOn&&this.props.onPointerEventsOn();var e=this.refList;e&&(e.style.pointerEvents="auto"),this.pointerEvents=!1}),150);var{enhancedData:t,listLength:a}=v.computeDataAndListLength(e);this.state={firstIndex:0,lastIndex:0,scrollFromStart:0,offsetFromStart:0,bodyDimension:0,enhancedData:t,listLength:a,renderedListLength:a}}static getDerivedStateFromProps(e,t){var{enhancedData:a,listLength:r}=v.computeDataAndListLength(e),{firstIndex:i,lastIndex:n}=v.computeIndexes(e,(0,s.default)((0,s.default)({},t),{},{enhancedData:a,listLength:r})),o={enhancedData:a,listLength:r,firstIndex:i,lastIndex:n};return(!e.itemEnterAnimationsEnabled||r>=t.renderedListLength)&&(o.renderedListLength=r),o}static computeDataAndListLength(e){var t=0;return{enhancedData:e.data.map((a=>{var r=(0,s.default)((0,s.default)({},a),{},{offset:t}),i=v.getDimension(a,e.direction,e.defaultItemWidth,e.defaultItemHeight);return t+=i,r})),listLength:t}}static getDimension(e,t,a,r){return"horizontal"===t?v.getItemWidth(e,a):v.getItemHeight(e,r)}static getItemWidth(e,t){return null!=e.width&&e.width>0?e.width:t}static getItemHeight(e,t){return null!=e.height&&e.height>0?e.height:t}static computeIndexes(e,t){var{bodyDimension:a,offsetFromStart:r,scrollFromStart:i,listLength:s,enhancedData:n}=t;if(void 0===a||void 0===r)throw new Error("FlatList:Computing FlatList without a valid Container");for(var{extraItems:o,forceConsistentRenderCount:l,direction:d,defaultItemWidth:u,defaultItemHeight:c}=e,h=0,f=0;f<n.length;f++){var p=n[f],m=v.getDimension(p,d,u,c);if(r+p.offset+m>i){h=f;break}}for(var _=n.length-1,g=l?Math.min(n[h].offset+a,s):Math.min(i+a,s+r),E=h;E<n.length;E++){var y=n[E],S=v.getDimension(y,d,u,c);if(r+y.offset+S>=g){_=E;break}}var C=o,T=o-h;T>0&&(C+=T);var M=o,b=_+o-n.length;return b>0&&(M+=b),{firstIndex:Math.max(h-M,0),lastIndex:Math.min(_+C,n.length-1)}}componentDidMount(){this.props.flatListController.registerList({handleLayout:this.onLayout,handleScroll:this.onScroll})}componentWillUnmount(){this.props.flatListController.unregisterList(),this.enablePointerEvents.cancel(),this.cancelScroll()}cancelScroll(){this.animationFrame&&(cancelAnimationFrame(this.animationFrame),this.animationFrame=void 0,this.hanging=!1)}disablePointerEvents(){if(this.busyId=c.default.setBusy(this.busyId),!this.pointerEvents){this.props.onPointerEventsOff&&this.props.onPointerEventsOff();var e=this.refList;e&&(e.style.pointerEvents="none"),this.pointerEvents=!0}}scrollIntoViewIfNeeded(e,t=0){var{enhancedData:a,scrollFromStart:r,bodyDimension:i}=this.state;if(e<0||e>=a.length)throw new Error("Invalid Index.");var s=a[e].offset;(s<r-t||s>r+i+t)&&this.props.flatListController.setScrollFromStart(s)}getComponents(){var{reorderAnimationsEnabled:e,renderItem:t,defaultItemWidth:a,defaultItemHeight:r}=this.props,{firstIndex:i,lastIndex:n}=this.state,o=this.state.enhancedData.slice(i,n+1);return this.keyPool.recycleKeysAndMap(o).map((({rctKey:i,data:n},o)=>{var l="horizontal"===this.props.direction?{width:v.getItemWidth(n,a)}:{height:v.getItemHeight(n,r)};return d.createElement(p.default,{key:i,data:(0,s.default)((0,s.default)({},n),l),animate:!!e&&f.default.shouldAnimate,zIndex:this.state.enhancedData.length-o-1,renderItem:t,listDirection:this.props.direction})}))}render(){var{role:e}=this.props,t="horizontal"===this.props.direction?{width:this.state.renderedListLength}:{height:this.state.renderedListLength};return d.createElement("div",{className:(0,o.default)(this.props.className),ref:this.setRefList},d.createElement("div",{"aria-label":this.props["aria-label"],className:(0,o.default)(u.default.viewport,{[u.default.horizontalListViewport]:"horizontal"===this.props.direction,[u.default.verticalListViewport]:"vertical"===this.props.direction}),role:e,"aria-rowcount":this.props["aria-rowcount"],style:t},this.props.itemEnterAnimationsEnabled?d.createElement(m.default,{transitionName:"fade",onAnimationComplete:this.setListLength},this.getComponents()):this.getComponents()))}}t.default=v,v.defaultProps={defaultItemHeight:72,defaultItemWidth:72,forceConsistentRenderCount:!0,extraItems:5,initialScrollFromStart:0,reorderAnimationsEnabled:!0}},63097:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(58527)),n=i(a(22220)),o=i(a(70417)),l=r(a(2784)),d=i(a(61941)),u=i(a(61124));class c extends l.Component{constructor(...e){super(...e),this._setRefObserver=e=>{this._refObserver=e,this.props.onRef&&this.props.onRef(e)},this.getScrollFromStart=()=>{var e=this._refObserver;if(e)return"horizontal"===this.props.direction?e.scrollLeft:e.scrollTop},this.setScrollFromStart=e=>{var t=this._refObserver;t&&("horizontal"===this.props.direction?t.scrollLeft=e:t.scrollTop=e)},this._handleRegisterList=()=>{var e=(0,d.default)(this._refObserver,"this._refObserver"),{flatListControllers:t}=this.props;t.forEach((t=>t.triggerLayout({position:e.getBoundingClientRect(),width:e.clientWidth,height:e.clientHeight})))},this._handleScroll=e=>{var{flatListControllers:t,onScroll:a}=this.props;a&&a(e),t.forEach((e=>e.triggerScroll()))},this._handleResize=e=>{var{flatListControllers:t,onLayout:a}=this.props,r=(0,d.default)(this._refObserver,"this._refObserver"),i=(0,o.default)((0,o.default)({},e),{},{position:r.getBoundingClientRect()});t.forEach((e=>e.triggerLayout(i))),a&&a(i)}}componentDidMount(){var{flatListControllers:e,scrollOffset:t}=this.props;e.forEach((e=>e.registerContainer({getScrollFromStart:this.getScrollFromStart,setScrollFromStart:this.setScrollFromStart,onRegisterList:this._handleRegisterList}))),void 0!==t&&this.setScrollFromStart(t)}componentWillUnmount(){var{flatListControllers:e}=this.props;e.forEach((e=>e.unregisterContainer()))}render(){var e=this.props,{children:t,flatListControllers:a,onScroll:r,onLayout:i,onRef:o,scrollOffset:d}=e,c=(0,n.default)(e,["children","flatListControllers","onScroll","onLayout","onRef","scrollOffset"]);return l.createElement(u.default,(0,s.default)({},c,{onResize:this._handleResize,onScroll:this._handleScroll,onRef:this._setRefObserver}),t)}}t.default=c},22004:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=class{registerContainer(e){this._containerAPI=e,this._listHandlers&&e.onRegisterList()}unregisterContainer(){delete this._containerAPI}triggerScroll(){this._listHandlers&&this._listHandlers.handleScroll()}triggerLayout(e){this._listHandlers&&this._listHandlers.handleLayout(e)}registerList(e){this._listHandlers=e,this._containerAPI&&this._containerAPI.onRegisterList()}unregisterList(){delete this._listHandlers}getScrollFromStart(){if(this._containerAPI)return this._containerAPI.getScrollFromStart()}setScrollFromStart(e){this._containerAPI&&this._containerAPI.setScrollFromStart(e)}}},89286:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return s.createElement("div",{className:n.default.loadingSpinner},s.createElement(o.default,{color:"default",size:24,stroke:6}))};var s=i(a(2784)),n=r(a(31547)),o=r(a(2825))},1100:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(829)),s=r(a(61941));t.default=class{constructor(){this._rctKeyToData=new Map,this._keyToRctKey=new Map}_genNewKeys(e){var t=e-this._rctKeyToData.size;if(t<=0)return[];for(var a=[],r=0;r<e&&(this._rctKeyToData.has(r)||(a.push(r),t!==a.length));r++);return a}recycleKeysAndMap(e){var t=new Map,a=new Map,r=this._genNewKeys(e.length),n=new Set(this._rctKeyToData.keys()),o=[];e.forEach((e=>{var r=this._keyToRctKey.get(e.itemKey);void 0!==r?(a.set(e.itemKey,r),t.set(r,e),n.delete(r)):o.push(e)}));var l=[...r,...n];o.forEach((e=>{var r=l.pop();a.set(e.itemKey,r),t.set(r,e)}));var d=(0,i.default)(e,[e=>a.get(e.itemKey)]).map((e=>({rctKey:(0,s.default)(a.get(e.itemKey),"keyToRctKey.get(item.itemKey)"),data:e})));return this._rctKeyToData=t,this._keyToRctKey=a,d}}},66346:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={shouldAnimate:!0}},5701:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(70417)),n=r(a(2784)),o=i(a(88665)),l=i(a(74489)),d=i(a(28787)),u=l.default.prefix("transform"),c=l.default.prefix("transition");class h extends n.Component{constructor(...e){super(...e),this.state={shouldAnimate:!0,prevItemKey:null,prevRowOffset:null}}static getDerivedStateFromProps(e,t){return(0,s.default)((0,s.default)({},t),{},{prevItemKey:e.data.itemKey,prevRowOffset:e.data.offset,shouldAnimate:f(e,t)})}shouldComponentUpdate(e,t){return this.props.animate!==e.animate||this.props.zIndex!=this.props.zIndex||this.props.renderItem!==e.renderItem||this.state.shouldAnimate!==t.shouldAnimate||!(0,o.default)(this.props.data,e.data)}render(){var{data:e,zIndex:t}=this.props,{shouldAnimate:a}=this.state,r=a?"".concat(u," ").concat(200,"ms ease-in-out"):"none",i="horizontal"===this.props.listDirection?{width:e.width,[u]:"translateX(".concat(e.offset,"px)")}:{height:e.height,[u]:"translateY(".concat(e.offset,"px)")},o=(0,s.default)({zIndex:t,[c]:r},i),l=this.props.renderItem(e);return n.createElement("div",{className:d.default.item,style:o},l)}}function f(e,t){if(!e.animate)return!1;var{prevItemKey:a}=t;return e.data.itemKey===a&&e.data.offset!==t.prevRowOffset}t.default=h},43562:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(70417)),n=i(a(72779)),o=r(a(2784)),l=i(a(50935)),d=i(a(56117)),u=r(a(96452)),c=i(a(35387)),h=r(a(44202)),f=i(a(53632)),p=i(a(17957)),m=i(a(20642)),_=i(a(26327)),v=a(65935),g=i(a(72259)),E=i(a(82631)),y=i(a(2220)),S=i(a(74185));class C extends o.PureComponent{constructor(e){super(e),this._updateImgSrcUrl=e=>{var t,a=e.height+50,r="color:red|"+e.lat+", "+e.lng,i=e.lat+", "+e.lng,n=e.width+"x"+a,o=d.default.currentRes===d.default.RES.HIGH?2:1,c=p.default.getLocale(),f=S.default.GSM_NAME,m=S.default.build(l.default.G_MAPS_IMG_URL,(0,s.default)({zoom:15,size:n,scale:o,language:c,client:f},e.showMarker?{markers:r}:{center:i})),_="dark"===(null===(t=this.context)||void 0===t?void 0:t.theme)?"".concat(m,"&").concat(l.default.G_MAPS_DARK_MODE_STYLE):m;this._lastURL!==_&&(this._lastURL=_,S.default.gsmURL(_,S.default.GSM_NUMS).checkpoint(e.rejectOnUnmount()).then((e=>{this.setState({imgSrcUrl:e,hiResAvail:h.isCached(e)})})).catchType(u.Unmount,(()=>{})))},this._onImgLoaded=()=>{this.state.hiResAvail||this.setState({hiResAvail:!0}),this.props.onLoad&&this.props.onLoad()},this.state={imgSrcUrl:null,hiResAvail:!1},this._updateImgSrcUrl(e)}componentDidMount(){this.props.listeners.add(window,"dpichange",(()=>this._updateImgSrcUrl(this.props)))}componentDidUpdate(){this._updateImgSrcUrl(this.props)}render(){var{lat:e,lng:t,name:a,width:r,height:i,className:s,linkify:l}=this.props,d={pointerEvents:"none",width:r,height:this.state.hiResAvail?void 0:i},u=(0,n.default)(s,{[_.default.hidden]:!this.state.hiResAvail}),h=this.state.hiResAvail?null:o.createElement(E.default,{name:"map-placeholder",display:"inline"}),p=o.createElement(f.default,{src:this.state.imgSrcUrl||"",className:u,style:d,hasPrivacyChecks:!1,onLoad:this._onImgLoaded,noXHR:!0});return l?o.createElement(c.default,{href:(0,v.getMapUrl)(e,t,a),className:_.default.container},h,p):o.createElement("span",{className:_.default.container},h,p)}}C.defaultProps={linkify:!0,showMarker:!0},C.contextType=y.default;var T=(0,m.default)((0,g.default)(C));t.default=T},27862:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(71201)),o=r(a(17957)),l=r(a(40207));class d extends s.PureComponent{render(){var{chat:e,disabled:t}=this.props,a=this.props.onMarkUnread.bind(null,!e.unreadCount);return s.createElement(n.default,{a8n:"mi-mark-as",action:a,key:"MarkUnreadMenuItem",disabled:t},e.unreadCount?o.default.t(906):o.default.t(907))}}d.CONCERNS={chat:["unreadCount"]};var u=(0,l.default)(d,d.CONCERNS);t.default=u},68084:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.Pending=function(){return n.createElement("div",{className:l.default.controls},n.createElement("div",{className:(0,s.default)(l.default.icon)},n.createElement("div",{className:l.default.spinner},n.createElement(d.default,{size:50,stroke:3,color:"white"}))))},t.PendingCancel=function(){return n.createElement("div",{className:l.default.controls},n.createElement("div",{className:(0,s.default)(l.default.icon,l.default.cursorPointer)},n.createElement("div",{className:l.default.spinner},n.createElement(d.default,{size:50,stroke:3,color:"white"})),n.createElement("div",{className:l.default.cancel},n.createElement(u.default,{name:"media-cancel"}))))},t.Download=function({filesize:e=0,onClick:t}){return e>0?n.createElement("div",{className:l.default.controls},n.createElement("button",{className:(0,s.default)(l.default.btnMeta,l.default.cursorPointer),onClick:t},n.createElement(u.default,{name:"media-download",className:l.default.iconMeta}),n.createElement("span",null,o.default.filesize(e)))):n.createElement("div",{className:l.default.controls},n.createElement("button",{className:(0,s.default)(l.default.button,l.default.cursorPointer),onClick:t},n.createElement(u.default,{name:"media-download"})))},t.Upload=function({filesize:e=0}){return e>0?n.createElement("div",{className:l.default.controls},n.createElement("button",{className:(0,s.default)(l.default.btnMeta,l.default.cursorPointer)},n.createElement(u.default,{name:"media-upload",className:l.default.iconMeta}),n.createElement("span",null,o.default.filesize(e)))):n.createElement("div",{className:l.default.controls},n.createElement("div",{className:l.default.button},n.createElement(u.default,{name:"media-upload"})))},t.Play=function(){return n.createElement("div",{className:l.default.controls},n.createElement("div",{className:l.default.button},n.createElement(u.default,{name:"media-play",className:l.default.play})))},t.GifIcon=function({onClick:e}){return n.createElement("div",{role:"button",className:l.default.controls,onClick:e},n.createElement("div",{className:l.default.button},n.createElement(u.default,{name:"media-gif"})))};var s=i(a(72779)),n=r(a(2784)),o=i(a(17957)),l=i(a(43406)),d=i(a(2825)),u=i(a(82631))},40686:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(58527)),n=i(a(22220)),o=i(a(72779)),l=r(a(2784)),d=i(a(25997)),u=i(a(40207));class c extends l.PureComponent{render(){var e=this.props,{msg:t}=e,a=(0,n.default)(e,["msg"]);return t.mediaData?l.createElement(p,(0,s.default)({mediaData:t.mediaData},a)):this.props.shouldRenderEmptyThumbnail?l.createElement(m,{className:a.containerClassName},l.createElement(_,{className:a.childClassName})):null}}c.CONCERNS={msg:["mediaData"]};var h=(0,u.default)(c,c.CONCERNS);t.default=h;class f extends l.PureComponent{render(){var{containerClassName:e,childClassName:t,shouldRenderEmptyThumbnail:a,mediaData:r}=this.props,i=[];return r&&(r.preview&&i.push({opaque:r.preview,key:"preview"}),r.fullPreviewData&&i.push({opaque:r.fullPreviewData,key:"fullPreviewData"})),i.length?l.createElement(m,{className:e},i.map((({key:e,opaque:a})=>l.createElement(_,{className:t,key:e,opaque:a})))):a?l.createElement(_,{className:t}):null}}f.CONCERNS={mediaData:["preview","fullPreviewData"]};var p=(0,u.default)(f,f.CONCERNS);function m(e){var{className:t,children:a}=e;return l.createElement("div",{className:(0,o.default)(d.default.container,t)},a)}class _ extends l.PureComponent{componentDidMount(){var e;null===(e=this.props.opaque)||void 0===e||e.retain()}componentDidUpdate(e){var t,a;e.opaque!==this.props.opaque&&(null===(t=e.opaque)||void 0===t||t.autorelease(),null===(a=this.props.opaque)||void 0===a||a.retain())}componentWillUnmount(){var e;null===(e=this.props.opaque)||void 0===e||e.autorelease()}render(){var{className:e,opaque:t}=this.props;return l.createElement("div",{className:(0,o.default)(d.default.child,e),style:t?{backgroundImage:'url("'.concat(t.url(),'")')}:null})}}},80898:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.MenuBar=function(e){var t=(0,n.default)(d.default.menu,{[d.default.menuDefault]:!e.theme,[d.default.menuStrong]:"strong"===e.theme,[d.default.menuInverse]:"inverse"===e.theme,[d.default.menuNarrow]:"narrow"===e.theme});return o.createElement("div",{className:t},e.children)},t.MenuBarItem=function(e){var{text:t,transitionName:a="dropdown",disabled:r=!1,children:i,icon:f,title:p,selected:m}=e,[_,v]=o.useState(!1),g=null!=i&&_?o.createElement(u.default,{displayName:"MenuBarMenuItem",escapable:!0,popable:!0,requestDismiss:()=>{v(!1)}},i):null,E=(0,n.default)(d.default.item,{[d.default.selected]:m,[d.default.active]:_,[d.default.disabled]:r}),[y,S]=(0,c.default)((t=>{e.onClick&&e.onClick(t),t.isDefaultPrevented()||(t.preventDefault(),_||null!=i&&v(!0))}),{disabled:r});return o.createElement("div",{"data-a8n":l.default.key(e.a8nText),className:E},o.createElement("div",(0,s.default)({},S,{"data-tab":r?void 0:e.tabOrder,title:p,"aria-label":p,ref:y}),f,t&&o.createElement("span",{className:d.default.itemText},t)),o.createElement(h.default,{transitionName:a},g))};var s=i(a(58527)),n=i(a(72779)),o=r(a(2784)),l=i(a(32960)),d=i(a(44417)),u=i(a(17693)),c=i(a(72376)),h=i(a(74824))},51956:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(79711)),l=i(a(17957)),d=i(a(20642)),u=i(a(26432)),c=i(a(94660)),h=i(a(82631));class f extends n.Component{constructor(...e){super(...e),this.refDiv=n.createRef(),this.getElement=()=>this.refDiv.current,this.addOrRemoveLabelOnSelected=()=>{var e=this.props.selectedModels.getSelected();o.default.openModal(n.createElement(u.default,{onLabelUpdateComplete:this.props.onCancel,modelsToUpdate:e}))}}componentDidMount(){this.props.selectedModels&&this.props.listeners.add(this.props.selectedModels,"all",(()=>{this.forceUpdate()}))}componentDidUpdate(){0===this.props.selectedModels.getSelected().length&&this.props.onCancel&&this.props.onCancel()}render(){var e,t,a,{labelEditEnabled:r,onRemoveLabel:i}=this.props,o=this.props.selectedModels.getSelected().length,{onDelete:d}=this.props;r&&o>0&&(e=n.createElement(m,{name:"label",disabled:!o,title:l.default.t(1544),onClick:this.addOrRemoveLabelOnSelected})),i&&o>0&&(a=n.createElement(m,{name:"label-delete",disabled:!o,title:l.default.t(1546),onClick:i})),d&&o>0&&(t=n.createElement(m,{name:"delete",disabled:!o,title:l.default.t(1545),onClick:d}));var u=(0,s.default)(c.default.multiControls,{[c.default.drawerHeader]:"drawer-header"===this.props.theme,[c.default.chatListPanel]:"chatlist-panel"===this.props.theme});return n.createElement("div",{className:u,ref:this.refDiv},n.createElement(m,{name:"x",onClick:this.props.onCancel}),n.createElement("div",{className:c.default.multiCount},l.default.t(1258,{count:o,_plural:o})),e,t,a)}}var p=(0,d.default)(f);t.default=p;var m=({name:e,title:t,onClick:a,directional:r,disabled:i})=>n.createElement("button",{className:c.default.multiselectIcon,title:t,onClick:a,disabled:i?"disabled":void 0},n.createElement(h.default,{name:e,directional:r}))},85472:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(70417)),n=i(a(68015)),o=i(a(18149)),l=i(a(13888)),d=i(a(54073)),u=i(a(72779)),c=a(39329),h=r(a(2784)),f=i(a(79711)),p=r(a(96452)),m=i(a(20642)),_=i(a(43050)),v=i(a(61941)),g=i(a(72259)),E=i(a(91378));class y extends h.Component{constructor(e){var t;super(e),this._setStateTimer=new c.ShiftTimer((e=>{this.setState(e)})),this._setRefComponent=e=>{this._refComponent=e},this.addListeners=()=>{window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("resize",this.handleResize),this.props.listeners.add(f.default,"floater_escape_overlap",this._escapeOverlapMove)},this._getInitialStyle=()=>this.props.initialStyle?{width:this.props.initialStyle.width,left:this.props.initialStyle.left,bottom:this.props.initialStyle.bottom}:{width:this.props.minWidth,left:this.props.margin.x,bottom:this.props.margin.y},this._getResizerCallback=e=>t=>{0===t.button&&this.setState({resizeDirection:e,currentAction:1,resizeStartPiPStyle:{width:this.state.width,left:this.state.left,bottom:this.state.bottom},resizeStartMousePosition:{x:t.clientX,y:t.clientY}}),t.stopPropagation()},this.onMoveStart=e=>{0===e.button&&this.setState({currentAction:2,moveStartPositionStyle:{left:this.state.left,bottom:this.state.bottom},moveStartMousePosition:{x:e.clientX,y:e.clientY}}),e.stopPropagation()},this.onMoveStop=()=>{var e=this._getRect();this.props.onMoveStop&&this.props.onMoveStop(e)},this.handleResize=(0,d.default)((()=>{var e=window.innerHeight-2*this.props.margin.y,t=window.innerWidth-2*this.props.margin.x,a=this.state.width,r=a/this.props.aspectRatio,i=this.state.bottom,s=this.state.left;r>e&&(r=e,a=e*this.props.aspectRatio),a>t&&(r=t/this.props.aspectRatio,a=t),i+r>e+this.props.margin.y&&(i=e+this.props.margin.y-r),s+a>t+this.props.margin.x&&(s=t+this.props.margin.x-a),this.state.previousWindowSize.width<s+a+this.props.margin.x+3&&(s=t+this.props.margin.x-a),this.state.previousWindowSize.height<i+r+this.props.margin.y+3&&(i=e+this.props.margin.y-r);var n,d=null!=this.state.previousConvPanelRightBorder&&this.state.previousConvPanelRightBorder>0&&Math.abs(this.state.left+a+this.props.margin.x-this.state.previousConvPanelRightBorder)<3;this.props.escapeConversationHeader&&f.default.getConversationHeaderOffset((e=>{n=e.right}));var u=n&&n<window.innerWidth;d&&null!=n&&0!==n&&u&&(s=n-this.props.margin.x-a);var c={bottom:Math.max(this.props.margin.y,i),left:Math.max(this.props.margin.x,s),width:Math.max(this.props.minWidth,a),previousWindowSize:{height:window.innerHeight,width:window.innerWidth},previousConvPanelRightBorder:n},h=(0,l.default)(this.state,["bottom","left","width","previousWindowSize","previousConvPanelRightBorder"]);(0,o.default)(c,h)||this.setState(c)}),50),this._validateMoveResize=(e,t,a,r)=>{var i=e,s=t,o=a,l=0,d=0,u=0;switch(r){case 1:l=this.state.resizeStartPiPStyle.width,d=this.state.resizeStartPiPStyle.left,u=this.state.resizeStartPiPStyle.bottom;break;case 2:l=this.state.width,d=this.state.moveStartPositionStyle.left,u=this.state.moveStartPositionStyle.bottom}var c=window.innerHeight,h=window.innerWidth,f=l+i,p=f/this.props.aspectRatio,m=u+o,_=(0,n.default)(m,2),v=d+s,g=(0,n.default)(v,2),E=this.props.minWidth,y=(0,n.default)(this.props.margin.y,2),S=(0,n.default)(c-p-this.props.margin.y,2),C=(0,n.default)(this.props.margin.x,2),T=(0,n.default)(h-f-this.props.margin.x,2);if(y>_||_>S)switch(r){case 1:o=0,s=0,i=0;break;case 2:o=0}if(C>g||g>T)switch(r){case 1:o=0,s=0,i=0;break;case 2:s=0}if(i&&m+p+this.props.margin.y>c)switch(r){case 1:o=0,s=0,i=0}if(i&&v+f+this.props.margin.x>h)switch(r){case 1:o=0,s=0,i=0}return(f<E||p+2*this.props.margin.y>c||f+2*this.props.margin.x>h)&&(o=0,s=0,i=0),{deltaWidth:i,deltaBottom:o,deltaLeft:s}},this.onMouseMove=e=>{var t,a=0,r=0,i=0,s=0;switch(this.state.currentAction){case 0:return;case 1:switch(this.state.resizeDirection){case 0:a=(r=this.state.resizeStartMousePosition.y-e.clientY)*this.props.aspectRatio;break;case 1:a=(r=e.clientY-this.state.resizeStartMousePosition.y)*this.props.aspectRatio,s=-r;break;case 3:s=-(r=(a=e.clientX-this.state.resizeStartMousePosition.x)/this.props.aspectRatio);break;case 2:s=-(r=(a=this.state.resizeStartMousePosition.x-e.clientX)/this.props.aspectRatio),i=-a;break;case 4:r=(a=Math.max(e.clientX-this.state.resizeStartMousePosition.x,this.props.aspectRatio*(this.state.resizeStartMousePosition.y-e.clientY)))/this.props.aspectRatio;break;case 5:r=(a=Math.max(this.state.resizeStartMousePosition.x-e.clientX,this.props.aspectRatio*(this.state.resizeStartMousePosition.y-e.clientY)))/this.props.aspectRatio,i=-a;break;case 6:s=-(r=(a=Math.max(e.clientX-this.state.resizeStartMousePosition.x,this.props.aspectRatio*(e.clientY-this.state.resizeStartMousePosition.y)))/this.props.aspectRatio);break;case 7:s=-(r=(a=Math.max(this.state.resizeStartMousePosition.x-e.clientX,this.props.aspectRatio*(e.clientY-this.state.resizeStartMousePosition.y)))/this.props.aspectRatio),i=-a}var n=0,o=0,l=0;if(0===(t=this._validateMoveResize(a,i,s,1)).deltaWidth&&0===t.deltaLeft&&0===t.deltaBottom){if(a<0)switch(this.state.resizeDirection){case 0:case 4:a=this.props.minWidth-this.state.resizeStartPiPStyle.width,s=0,i=0;break;case 5:i=-(a=this.props.minWidth-this.state.resizeStartPiPStyle.width),s=0;break;case 1:case 3:case 6:s=-(r=(a=this.props.minWidth-this.state.resizeStartPiPStyle.width)/this.props.aspectRatio),i=0;break;case 2:case 7:s=-(r=(a=this.props.minWidth-this.state.resizeStartPiPStyle.width)/this.props.aspectRatio),i=-a}else if(a>0){var d=this.state.resizeStartPiPStyle.width/this.props.aspectRatio;switch(this.state.resizeDirection){case 0:case 4:a=Math.min(window.innerWidth-this.props.margin.x-this.state.resizeStartPiPStyle.width-this.state.resizeStartPiPStyle.left,this.props.aspectRatio*(window.innerHeight-this.props.margin.y-d-this.state.resizeStartPiPStyle.bottom))-.1;break;case 5:r=(a=Math.min(this.state.resizeStartPiPStyle.left-this.props.margin.x,this.props.aspectRatio*(window.innerHeight-this.props.margin.y-d-this.state.resizeStartPiPStyle.bottom))-.1)/this.props.aspectRatio,i=-a;break;case 1:case 3:case 6:s=-(r=(a=Math.min(window.innerWidth-this.props.margin.x-this.state.resizeStartPiPStyle.width-this.state.resizeStartPiPStyle.left,this.props.aspectRatio*(this.state.resizeStartPiPStyle.bottom-this.props.margin.y))-.1)/this.props.aspectRatio);break;case 2:case 7:s=-(r=(a=Math.min(this.state.resizeStartPiPStyle.left-this.props.margin.x,this.props.aspectRatio*(this.state.resizeStartPiPStyle.bottom-this.props.margin.y))-.1)/this.props.aspectRatio),i=-a}}n=this.state.resizeStartPiPStyle.width+a,o=this.state.resizeStartPiPStyle.left+i,l=this.state.resizeStartPiPStyle.bottom+s,this.setState({width:n,left:o,bottom:l})}else n=this.state.resizeStartPiPStyle.width+t.deltaWidth,o=this.state.resizeStartPiPStyle.left+t.deltaLeft,l=this.state.resizeStartPiPStyle.bottom+t.deltaBottom,this.setState({width:n,left:o,bottom:l});this.props.onResize&&this.props.onResize(n,o,l);break;case 2:i=e.clientX-this.state.moveStartMousePosition.x,s=this.state.moveStartMousePosition.y-e.clientY,t=this._validateMoveResize(a,i,s,2);var u=0,c=0;u=0!==i&&0===t.deltaLeft?i>0?window.innerWidth-this.state.width-this.props.margin.x:this.props.margin.x:this.state.moveStartPositionStyle.left+t.deltaLeft,c=0!==s&&0===t.deltaBottom?s>0?window.innerHeight-this.state.width/this.props.aspectRatio-this.props.margin.y-.1:this.props.margin.y:this.state.moveStartPositionStyle.bottom+t.deltaBottom,this.setState({left:u,bottom:c}),this.props.onMove&&this.props.onMove(u,c)}},this.onMouseUp=()=>{this.setState({currentAction:0})},this._getRect=()=>({top:window.innerHeight-this.state.bottom-this.state.width/this.props.aspectRatio,left:this.state.left,bottom:window.innerHeight-this.state.bottom,right:this.state.left+this.state.width}),this._escapeOverlapMove=(e,t)=>{var a=e.getBoundingClientRect(),r={left:a.left-t,top:a.top-t,right:a.right+t,bottom:a.bottom+t},i=this._getRect();if(this._doOverlap(i,r)){var s,n,o=this._escapeDistance(i,r);if(this._isTranslationOutOfBound(-o.toLeftDistance,0)||(void 0===s||o.toLeftDistance<s)&&(s=o.toLeftDistance,n=2),this._isTranslationOutOfBound(0,-o.toBottomDistance)||(void 0===s||o.toBottomDistance<s)&&(s=o.toBottomDistance,n=1),this._isTranslationOutOfBound(o.toRightDistance,0)||(void 0===s||o.toRightDistance<s)&&(s=o.toRightDistance,n=3),this._isTranslationOutOfBound(0,o.toTopDistance)||(void 0===s||o.toTopDistance<s)&&(s=o.toTopDistance,n=0),void 0!==s){var l={};switch(n){case 2:l={left:this.state.left-o.toLeftDistance};break;case 1:l={bottom:this.state.bottom-o.toBottomDistance};break;case 3:l={left:this.state.left+o.toRightDistance};break;case 0:l={bottom:this.state.bottom+o.toTopDistance}}var d=(0,E.default)((0,v.default)(this._refComponent,"this._refComponent"),l,{duration:200});Promise.race([d,this.props.rejectOnUnmount()]).checkpoint(this.props.rejectOnUnmount()).then((()=>{this.setState(l)})).catchType(p.Unmount,(()=>{}))}}},this.props.escapeConversationHeader&&f.default.getConversationHeaderOffset((e=>{t=e.right}));var a={resizeDirection:0,currentAction:0,resizeStartMousePosition:{x:0,y:0},resizeStartPiPStyle:{width:0,bottom:0,left:0},moveStartMousePosition:{x:0,y:0},moveStartPositionStyle:{left:0,bottom:0},previousWindowSize:{height:window.innerHeight,width:window.innerWidth},previousConvPanelRightBorder:t};this.props.animationStartStyle?this.state=(0,s.default)((0,s.default)({},a),this.props.animationStartStyle):this.state=(0,s.default)((0,s.default)({},a),this._getInitialStyle())}componentWillUnmount(){this.handleResize.cancel(),this._setStateTimer.cancel(),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("resize",this.handleResize)}componentDidMount(){if(!this.props.animationStartStyle)return this.addListeners(),void this.handleResize();var e=this.props.animationStartStyle,t=this._getInitialStyle(),a=e.width/this.props.aspectRatio,r=e.height,i=r/a,n=(0,s.default)((0,s.default)({},t),{},{height:t.width/this.props.aspectRatio,scaleY:[1,i],translateY:[0,(a-r)/2/i]}),o=(0,E.default)((0,v.default)(this._refComponent,"this._refComponent"),n,{easing:"easeInOutQuart",duration:400});this._initialAnimationPromise=Promise.race([o,this.props.rejectOnUnmount()]).checkpoint(this.props.rejectOnUnmount()).then((()=>{this._initialAnimationPromise=null,this.setState(t),this.addListeners(),this.handleResize()})).catchType(p.Unmount,(()=>{}))}componentDidUpdate(e){if(this.props.aspectRatio!==e.aspectRatio&&this.props.initialStyle){if(this._initialAnimationPromise)return void this._setStateTimer.onOrAfter(400,this.props.initialStyle);var t=this.props.initialStyle.width,a=this.props.initialStyle.left+t-(this.state.width+this.state.left),r=this.props.initialStyle.bottom+t/this.props.aspectRatio-(this.state.bottom+this.state.width/this.props.aspectRatio);Math.abs(a)<.1&&Math.abs(r)<.1?this.setState(this.props.initialStyle):this.setState({width:t})}}_getDimensions(){return{width:this.state.width,height:this.state.width/this.props.aspectRatio}}_doOverlap(e,t){return!(e.right<=t.left||e.left>=t.right)&&!(e.bottom<=t.top||e.top>=t.bottom)}_escapeDistance(e,t){return{toLeftDistance:e.right-t.left,toBottomDistance:t.bottom-e.top,toRightDistance:t.right-e.left,toTopDistance:e.bottom-t.top}}_isTranslationOutOfBound(e,t){var a=window.innerWidth,r=window.innerHeight,i=this.state.left+e,s=this.state.bottom+t,n=this.state.width,o=n/this.props.aspectRatio,l=this.props.margin.x,d=a-n-this.props.margin.x,u=this.props.margin.y,c=r-o-this.props.margin.y;return u>s||s>c||(l>i||i>d)}render(){var e=this._getDimensions(),t={width:e.width,height:e.height,bottom:this.state.bottom+"px",left:this.state.left+"px"};return h.createElement("div",{ref:this._setRefComponent,className:(0,u.default)(this.props.className,_.default.moveResizeComponentContainer),style:t},this.props.disableResize?null:h.createElement(h.Fragment,null,h.createElement("div",{className:(0,u.default)(_.default.topResizer,_.default.resizer,{[_.default.defaultCursor]:1===this.state.currentAction}),onMouseDown:this._getResizerCallback(0)}),h.createElement("div",{className:(0,u.default)(_.default.bottomResizer,_.default.resizer,{[_.default.defaultCursor]:1===this.state.currentAction}),onMouseDown:this._getResizerCallback(1)}),h.createElement("div",{className:(0,u.default)(_.default.leftResizer,_.default.resizer,{[_.default.defaultCursor]:1===this.state.currentAction}),onMouseDown:this._getResizerCallback(2)}),h.createElement("div",{className:(0,u.default)(_.default.rightResizer,_.default.resizer,{[_.default.defaultCursor]:1===this.state.currentAction}),onMouseDown:this._getResizerCallback(3)}),h.createElement("div",{className:(0,u.default)(_.default.topRightResizer,_.default.resizer,{[_.default.defaultCursor]:1===this.state.currentAction}),onMouseDown:this._getResizerCallback(4)}),h.createElement("div",{className:(0,u.default)(_.default.topLeftResizer,_.default.resizer,{[_.default.defaultCursor]:1===this.state.currentAction}),onMouseDown:this._getResizerCallback(5)}),h.createElement("div",{className:(0,u.default)(_.default.bottomRightResizer,_.default.resizer,{[_.default.defaultCursor]:1===this.state.currentAction}),onMouseDown:this._getResizerCallback(6)}),h.createElement("div",{className:(0,u.default)(_.default.bottomLeftResizer,_.default.resizer,{[_.default.defaultCursor]:1===this.state.currentAction}),onMouseDown:this._getResizerCallback(7)})),h.createElement("div",{className:(0,u.default)(_.default.moveable,{[_.default.defaultCursor]:1===this.state.currentAction}),onMouseDown:this.onMoveStart,onMouseUp:this.onMoveStop,grab:2===this.state.currentAction?"true":"supported"},this.props.children))}}var S=(0,m.default)((0,g.default)(y));t.default=S},51465:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(16760)),n=i(a(90882)),o=i(a(72779)),l=r(a(2784)),d=i(a(79711)),u=i(a(9386)),c=i(a(55236)),h=i(a(43396)),f=i(a(93329)),p=a(75459),m=i(a(17957)),_=i(a(20642)),v=i(a(26432)),g=i(a(40210)),E=i(a(58885)),y=i(a(4018)),S=a(64658),C=i(a(82631)),T=r(a(75074));class M extends l.Component{constructor(...e){super(...e),this._refDiv=l.createRef(),this.getElement=()=>this._refDiv.current,this._onStarChanged=e=>{this.props.selectedMessages.isSelected(e)&&this.forceUpdate()},this._onStarSelected=()=>{var{chat:e,selectedMessages:t,toastPosition:a}=this.props,r=t.getSelected();e&&d.default.sendStarMsgs(e,r,null,a),this.props.onCancel()},this._onUnstarSelected=()=>{var{chat:e,selectedMessages:t,toastPosition:a}=this.props,r=t.getSelected();e&&d.default.sendUnstarMsgs(e,r,null,a),this.props.onCancel()},this._onDownloadSelected=()=>{var e=(0,n.default)(this.props.selectedMessages.getSelected(),(e=>e.mediaData));if(e.length){var t=(0,n.default)(e,(e=>!e.mediaData.isDownloadable()));t.length>0?(d.default.openToast(l.createElement(T.default,{msg:m.default.t(572),id:(0,T.genId)()})),Promise.all((0,s.default)(t,(e=>e.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:g.default.WEBC_RMR_REASON_CODE.MULTI_SELECT_DOWNLOAD,isUserInitiated:!0})))).then((()=>{var t=(0,n.default)(e,(e=>e.mediaData.isDownloadable()));e.length>t.length&&d.default.openToast(l.createElement(T.default,{msg:m.default.t(672,{_plural:e.length-t.length,count:e.length-t.length}),id:(0,T.genId)()})),t.length&&h.default.initDownload(t)}))):h.default.initDownload(e),this.props.onCancel()}},this.addOrRemoveLabelOnSelected=()=>{var e=this.props.selectedMessages.getSelected();d.default.openModal(l.createElement(v.default,{onLabelUpdateComplete:this.props.onCancel,modelsToUpdate:e}))},this._onDeleteSelected=()=>{var{chat:e,selectedMessages:t,toastPosition:a}=this.props,r=t.getSelected(),i=r.every((e=>e.canRevoke()));e&&d.default.openModal(l.createElement(c.default,{chat:e,msgList:r.map(S.unproxy),deletePrompt:!0,revokePrompt:i&&!this.props.disableRevoke,toastPosition:a,onCancel:this.props.onCancel}))},this._onForwardSelected=()=>{var e=this.props.selectedMessages.getSelected();!this.props.noSortOnForward&&this.props.chat&&(e=this.props.chat.sortMsgs(e));var t=e.length,a=()=>{this.props.onCancel()},r=(0,n.default)(e,(e=>e.canForward()));r.length?t!==r.length?d.default.openModal(l.createElement(u.default,{title:m.default.t(499),onOK:()=>{d.default.openModal(l.createElement(f.default,{msgs:r,pushTransition:"none",popTransition:"none",onForward:a}),{transition:"modal-flow"})},okText:m.default.t(680),onCancel:()=>d.default.closeModal(),cancelText:m.default.t(1547)},m.default.t(498))):d.default.openModal(l.createElement(f.default,{msgs:e,pushTransition:"none",popTransition:"none",onForward:a}),{transition:"modal-flow"}):d.default.openModal(l.createElement(u.default,{title:m.default.t(667),onOK:()=>d.default.closeModal(),okText:m.default.t(1709)},m.default.t(664,{_plural:t})))}}componentDidMount(){this.props.selectedMessages.getSelected().forEach((e=>{this.props.listeners.add(e,"change:star",(()=>{this.forceUpdate()}))})),this.props.listeners.add(this.props.selectedMessages,"all",(()=>{this.forceUpdate()})),this.props.listeners.add(E.default,"change:star",this._onStarChanged)}render(){var e,t,a,r=this.props.selectedMessages.getSelected(),i=r.length,s=r.every((e=>e.canForward())),n=r.every((e=>e.canStar())),d=r.every((e=>e.mediaData)),u=r.every((e=>!e.asRevoked)),c=l.createElement(P,{disabled:!i||!s,name:"forward",onClick:this._onForwardSelected,title:m.default.t(685,{_plural:i})}),h=l.createElement(P,{name:"delete",disabled:!i,title:m.default.t(545,{_plural:i}),onClick:this._onDeleteSelected});i&&r.every((e=>e.star))?(e=this._onUnstarSelected,t="unstar-btn",a=m.default.t(1373,{_plural:i})):(e=this._onStarSelected,t="star-btn",a=m.default.t(1295,{_plural:i}));var f,_=l.createElement(P,{name:t,disabled:!i||!n,title:a,onClick:e}),v=(0,p.canEditLabelAssociation)()&&l.createElement(P,{disabled:!i||!u,name:"label",onClick:this.addOrRemoveLabelOnSelected,title:m.default.t(838)});Modernizr.adownload&&this.props.downloadButton&&d&&(f=l.createElement(P,{name:"download",disabled:!i,title:m.default.t(1543),onClick:this._onDownloadSelected}));var g=(0,o.default)(y.default.multiControls,{[y.default.mediaGalleryTheme]:"mediaGallery"===this.props.theme});return l.createElement("div",{className:g,ref:this._refDiv},l.createElement(P,{name:"x",onClick:this.props.onCancel}),l.createElement("span",{className:y.default.multiCount},m.default.t(1258,{count:i,_plural:i})),v,_,h,c,f)}}M.defaultProps={downloadButton:!0};var b=(0,_.default)(M);t.default=b;var P=({name:e,title:t,onClick:a,directional:r,disabled:i})=>l.createElement("button",{className:y.default.multiselectIcon,title:t,onClick:a,disabled:i?"disabled":void 0},l.createElement(C.default,{name:e,directional:r}))},60733:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=i(a(71201)),o=a(75459),l=r(a(17957)),d=r(a(40207)),u=r(a(67360)),c=()=>{};class h extends s.PureComponent{render(){var e,t,a,r,{mute:i,disabled:d,chat:h,settings:f}=this.props,p=this.props.onMute.bind(null,!i.isMuted);return h.archive&&(0,o.archiveV2Supported)()&&f.showArchiveV2?(e=c,r=l.default.t(1691),t=n.ThemeOptions.MUTED,a=s.createElement(u.default,{left:!0},l.default.t(231))):(r=i.isMuted?l.default.t(1691):l.default.t(1690),e=p),s.createElement(n.default,{action:e,disabled:d,theme:t,tooltip:a},r)}}h.CONCERNS={mute:["isMuted"],chat:["archive"],settings:["showArchiveV2"]};var f=(0,d.default)(h,h.CONCERNS);t.default=f},60949:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(e.chat&&!e.chat.isUser){var{chat:t}=e,a=(0,n.default)(e,["chat"]);return d.createElement(T,(0,s.default)({chat:t,groupMetadata:t.groupMetadata},a))}var r,i;if(e.chat){var{chat:o}=e,l=(0,n.default)(e,["chat"]);r=o.contact,i=l}else{var{contact:u}=e;l=(0,n.default)(e,["contact"]);r=u,i=l}return d.createElement(S,(0,s.default)({contact:r},i))},t.GroupNameClass=t.ContactNameClass=void 0;var s=i(a(58527)),n=i(a(22220)),o=i(a(19976)),l=i(a(72779)),d=r(a(2784)),u=i(a(91581)),c=i(a(18120)),h=a(62902),f=i(a(49984)),p=i(a(86638)),m=i(a(26079)),_=i(a(10385)),v=i(a(40207)),g=i(a(82631));function E(){var e=(0,o.default)(["displayName:",",\nformattedName:",",\nname:",",\nformattedShortName:",",\nformattedUser:",""]);return E=function(){return e},e}class y extends d.PureComponent{render(){var e,{element:t,contact:a,highlightText:r,titlify:i,ellipsify:s,you:n,selectable:o,useShortName:v,useDisplayName:y,onClick:S,showLabel:C,showBusinessCheckmark:T,showNotifyName:M,useVerifiedName:b,firstLabel:P}=this.props;r&&(e=h.Configuration.SearchName({terms:[r]}));var A,I=(0,l.default)(a.isPSA?m.default.psa:null);if(!(A=y&&a.displayName?a.displayName:v&&a.formattedShortName?a.formattedShortName:b&&a.verifiedName?a.verifiedName:n&&a.isMe?a.formattedName:M&&!a.name&&a.notifyName?"~".concat(a.notifyName):a.formattedUser))return __LOG__(4,void 0,new Error,!0)(E(),A,a.formattedName,a.name,a.formattedShortName,a.formattedUser),SEND_LOGS("display name is null or undefined"),"";var O=d.createElement(u.default,{text:(0,_.default)(A),element:t,className:I,formatters:e,titlify:i,ellipsify:s,direction:"auto",selectable:o,inlineblock:!0,onClick:S}),N=this.props.labels||a.labels;N&&P&&(0,p.default)(N,P);var w=C&&N&&d.createElement("div",{className:m.default.labels},d.createElement(f.default,{labels:N,showName:!1}));return a.isPSA||c.default.supportsFeature(c.default.F.VNAME_V_2)&&T?d.createElement("span",{className:m.default.verified},O,d.createElement("div",{className:m.default.icon},d.createElement(g.default,{name:"psa-verified"})),w):w?d.createElement("span",{className:m.default.hasLabels},O,w):O}}t.ContactNameClass=y,y.CONCERNS={contact:["isPSA","formattedUser","formattedName","formattedShortName","displayName","labels","name","notifyName","isMe","verifiedName"]},y.defaultProps={element:"span"};var S=(0,v.default)(y,y.CONCERNS);class C extends d.PureComponent{render(){var e,{element:t,chat:a,groupMetadata:r,highlightText:i,titlify:s,ellipsify:n,onClick:o,showLabel:c,firstLabel:v}=this.props;i&&(e=h.Configuration.SearchName({terms:[i]}));var E=this.props.labels||a.labels;E&&v&&(0,p.default)(E,v);var y=c&&E?d.createElement("div",{className:m.default.labels},d.createElement(f.default,{labels:E,showName:!1})):null,S=d.createElement(u.default,{text:(0,_.default)(a.title()),element:t,formatters:e,titlify:s,ellipsify:n,direction:"auto",inlineblock:!0,onClick:o});return r.support?d.createElement("div",{className:(0,l.default)({[m.default.verified]:!0,[m.default.hasLabels]:!!y})},S,d.createElement("div",{className:m.default.icon},d.createElement(g.default,{name:"psa-verified"})),y):y?d.createElement("div",{className:m.default.hasLabels},S,y):S}}t.GroupNameClass=C,C.CONCERNS={chat:["formattedTitle","labels"],groupMetadata:["support"]};var T=(0,v.default)(C,C.CONCERNS)},3303:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(43334)),o=r(a(79711)),l=r(a(20642)),d=i(a(4651)),u=a(53274),c=i(a(17026));class h extends s.Component{constructor(...e){super(...e),this.count=null,this._updateUnreadCount=()=>{var e;e=c.default.displayInfo===c.StreamInfo.OFFLINE||c.default.displayInfo===c.StreamInfo.TIMEOUT?-1:n.default.filter((e=>e.shouldShowUnreadInTitle)).length,this.count!==e&&(this.count=e,(0,u.setTitleAndIcon)(e))}}componentDidMount(){var e=this.props.listeners;e.add(o.default,"alert_new_msg",(e=>d.showMsgNotification(e))),e.add(o.default,"alert_call",d.showCallNotification),e.add(o.default,"cancel_call",d.cancelCallNotification),e.add(n.default,"add remove reset change:archive change:optimisticUnreadCount change:muteExpiration",this._updateUnreadCount),e.add(n.default,"change:hasUnread",d.closeNotifications),e.add(c.default,"change:displayInfo",this._updateUnreadCount),this._updateUnreadCount()}render(){return null}}var f=(0,l.default)(h);t.default=f},88352:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(19976)),n=i(a(12436)),o=i(a(72779)),l=r(a(2784)),d=i(a(50525));function u(){var e=(0,s.default)(["unrecognized type ",""]);return u=function(){return e},e}var c="transform 300ms cubic-bezier(.1,.82,.25,1)",h=l.forwardRef((function(e,t){var a=l.useRef(),r=l.useRef();l.useImperativeHandle(t,(()=>({get insideContainer(){return r.current},get outsideContainer(){return a.current}})));var{objectPosition:i,onObjectLoad:s,position:h,size:p,type:m,zoomIn:_}=e,v=null==p?void 0:p.width,g=null==p?void 0:p.height,E=null==_?void 0:_.factor,y=null==_?void 0:_.translateX,S=null==_?void 0:_.translateY,C=l.useCallback((()=>{null!=s&&null!=r.current&&s(r.current.firstChild)}),[s]),T=l.useCallback((()=>{if(null!=v&&null!=g){var e=a.current,t=r.current;if(e&&t){var s;switch(m){case"contain":s=function(e,t,a){var r=e.clientWidth,i=e.clientHeight,s=t,n=a,l=0,u=0;s/r>n/i?(n*=r/s,s=r,n<i&&(l=i/2-n/2)):(s*=i/n,n=i,s<r&&(u=r/2-s/2));return{style:{width:s,height:n,top:l,left:u,position:"absolute"},className:(0,o.default)(d.default.fit)}}(e,v,g);break;case"cover":s=function(e,t,a){var r=e.clientWidth,i=e.clientHeight,s=t,n=a,l=0,u=0;s!==r&&(n*=r/s,s=r,n>i&&(l=i/2-n/2));n<i&&(s*=i/n,n=i,s>r&&(u=r/2-s/2));return{style:{width:s,height:n,top:l,left:u,position:"absolute"},className:(0,o.default)(d.default.fit)}}(e,v,g);break;case"scaleDown":s=f(e,v,g);break;case"zoomIn":s=function(e,t,a,r){var i,s=f(e,t,a).style;i=r?{width:s.width,height:s.height,transition:c,transform:"translateX(".concat(r.translateX,"px) translateY(").concat(r.translateY,"px) scale(").concat(r.factor,")")}:{width:s.width,height:s.height,transition:c};return{style:i,className:(0,o.default)(d.default.fit,d.default.fitScaledown,d.default.fitZoomin)}}(e,v,g,null!=E&&null!=y&&null!=S?{factor:E,translateX:y,translateY:S}:null);break;default:return __LOG__(4,void 0,new Error,!0)(u(),m),void SEND_LOGS("object-fit")}e.removeAttribute("class"),t.removeAttribute("style"),e.classList.add(...s.className.split(" ")),"relative"===h&&e.classList.add(d.default.fitRelative);var n=null!=i?i:s.style.position;for(var l of(t.style.setProperty("position",n),Object.keys(s.style))){var p=s.style[l];null==p||Number.isNaN(p)||t.style.setProperty(l,"number"==typeof p?p+"px":p)}C()}}}),[C,i,h,g,v,m,E,y,S]);return l.useEffect((()=>{var e=(0,n.default)((()=>{T()}));return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[T]),l.useLayoutEffect((()=>{T()}),[T]),l.createElement("div",{className:(0,o.default)(d.default.fit),ref:a},l.createElement("div",{style:{visibility:"hidden"},ref:r},e.children))}));function f(e,t,a){var r=e.clientWidth,i=e.clientHeight,s=a,n=t;return s>i&&(s=i,n=t*(i/a)),n>r&&(n=r,s=a*(r/t)),{style:{width:n,height:s},className:(0,o.default)(d.default.fit,d.default.fitScaledown)}}t.default=h},96183:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={GROUP:"GROUP",PROFILE:"PROFILE"};t.default=a},59477:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(71201)),o=r(a(17957)),l=r(a(40207));class d extends s.PureComponent{constructor(...e){super(...e),this.pin=()=>{var{chat:e,onPinOrUnpin:t}=this.props;t(!e.pin)}}render(){var{chat:e,disabled:t}=this.props;return s.createElement(n.default,{a8n:"mi-pin",action:this.pin,key:"PinChat",disabled:t},null!=e.pin&&0!==e.pin?o.default.t(1366):o.default.t(1138))}}d.CONCERNS={chat:["pin"]};var u=(0,l.default)(d,d.CONCERNS);t.default=u},61124:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(58527)),n=i(a(22220)),o=i(a(72779)),l=r(a(2784)),d=i(a(62969)),u=i(a(88613));class c extends l.PureComponent{constructor(...e){super(...e),this._setRefResizeObserver=e=>{this._refResizeObserver=e,this.props.onRef&&this.props.onRef(e)},this._handleResize=(e,t)=>{this._refResizeObserver&&(null!=this._prevDimensions&&this._prevDimensions.width===e&&this._prevDimensions.height===t||(this._prevDimensions={height:t,width:e},this.props.onResize({height:t,width:e})))}}render(){var e=this.props,{children:t,className:a,onResize:r,onRef:i}=e,c=(0,n.default)(e,["children","className","onResize","onRef"]);return l.createElement("div",(0,s.default)({className:(0,o.default)(d.default.container,a),ref:this._setRefResizeObserver},c),t,l.createElement(u.default,{onResize:this._handleResize}))}}t.default=c},88613:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ResizeSensor=void 0;var s,n,o=i(a(2784)),l=r(a(97209)),d=r(a(89678));function u(){return null==n&&(n=new WeakMap),n}class c extends o.Component{constructor(...e){super(...e),this._resizeObserver=(null==s&&(s=new l.default((e=>{for(var t of e){var{width:a,height:r}=t.contentRect,i=u().get(t.target);null!=i&&i(a,r)}}))),s),this._observerMap=u(),this._handleDiv=e=>{var t=this._sensorEl;e!==t&&null!=t&&(this._resizeObserver.unobserve(t),this._observerMap.delete(t)),this._sensorEl=e,null!=e&&(this._observerMap.set(e,this._handleResize),this._resizeObserver.observe(e))},this._handleResize=(e,t)=>{this.props.onResize(e,t)}}shouldComponentUpdate(){return!1}render(){return o.createElement("div",{ref:this._handleDiv,className:d.default.sensor})}}t.ResizeSensor=c;var h=c;t.default=h},2426:(e,t,a)=>{"use strict";var r=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(2784));class s extends i.PureComponent{constructor(...e){super(...e),this._onRefChange=e=>{e?(this._ctx=e.getContext("2d"),this._imageData=this._ctx.createImageData(this.props.width,this.props.height)):(this._ctx=null,this._imageData=null)}}_updateCanvas(){var e=this._ctx,t=this._imageData,{rgbaBuffer:a}=this.props;e&&t&&a&&(t.data.set(new Uint8Array(a)),e.putImageData(t,0,0))}componentDidMount(){this._updateCanvas()}componentDidUpdate(){this._updateCanvas()}render(){return i.createElement("canvas",{role:"button",className:this.props.className,width:this.props.width,height:this.props.height,onClick:this.props.onClick,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,ref:this._onRefChange})}}t.default=s},11896:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=class{constructor(){this._internalHandlers=new Map}initialize(e){this.ctx=e}registerHandler(e,t,a){var r=this._internalHandlers.get(t)||new Map;r.set(e,a),this._internalHandlers.set(t,r)}unregisterHandler(e,t){var a=this._internalHandlers.get(t);a&&(a.delete(e),a.size||this._internalHandlers.delete(t))}handle(e,t=[]){var a,r,i=this._internalHandlers.get(e);return!!i&&(a=i,r=[],a.forEach((e=>r.push(e))),r).some((e=>e.apply(null,t)))}}},60353:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(67804)),s=r(a(37688)),n=r(a(40789)),o=r(a(20881)),l=r(a(81059)),d=r(a(79445)),u=r(a(55765)),c=r(a(64887)),h=r(a(57817)),f=r(a(69666)),p=r(a(40314)),m=new o.default,_=new i.default;class v extends((0,l.default)([s.default,_,u.default,m,c.default,d.default])){}t.default=v,v.Suggestions=(0,p.default)(h.default,{plugin:m}),v.EmojiSuggestions=(0,p.default)(n.default,{plugin:_}),v.QuickRepliesSuggestions=(0,p.default)(f.default,{plugin:d.default})},99003:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t,a=new s.default,r=(0,l.default)([n.default,a,d.default]);return t=e=class extends r{},e.EmojiSuggestions=(0,u.default)(o.default,{plugin:a}),t};var s=i(a(67804)),n=i(a(37688)),o=i(a(40789)),l=r(a(81059)),d=i(a(55765)),u=i(a(40314))},80857:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(71201)),o=r(a(91581)),l=r(a(63353)),d=a(62902);class u extends s.Component{componentDidMount(){}render(){var{base:e,unicode:t,action:a,children:r}=this.props;return s.createElement("div",{className:l.default.gridContainer},s.createElement("span",{className:l.default.baseEmoji},s.createElement(n.default,{type:"emoji-grid",key:"base",a8n:"mi-emoji-variant",action:r=>a(r,t,e)},s.createElement(o.default,{text:e,formatters:d.Configuration.LargeEmojiOnly(),tabIndex:"-1"}))),s.createElement("div",{className:l.default.options},r))}}t.default=u},93735:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=e.reduce(((e,t)=>{var{handlers:a}=t;return a?(Object.keys(a).forEach((r=>{e[r]||(e[r]=[]);var i=a[r];null!=i&&e[r].push([t,i])})),e):e}),{});return Object.keys(a).reduce(((e,r)=>{var i=a[r];return e[r]=function(e,t){return a=>{e.some((([e,r])=>{var i=r.call(e,a,t);return!!a.defaultPrevented||!0===i&&(a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),!0)}))}}(i,t),e}),{})}},81646:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=e.reduce(((e,t)=>{var{hooks:a}=t;return a?(Object.keys(a).forEach((r=>{e[r]||(e[r]=[]),e[r].push([t,a[r]])})),e):e}),{});return Object.keys(a).reduce(((e,r)=>(e[r]=function(e,t){return(...a)=>{e.forEach((([e,r])=>r.call(e,...a,t)))}}(a[r],t),e)),{})}},24529:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=e.reduce(((e,t)=>{var{hotkeys:a}=t;return a?(Object.keys(a).forEach((r=>{e[r]||(e[r]=[]),e[r].push([t,a[r]])})),e):e}),{});return Object.keys(a).reduce(((e,r)=>(e[r]=function(e,t){return a=>{e.some((([e,r])=>{var i=r.call(e,a,t);return!!a.defaultPrevented||!0===i&&(a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),!0)}))}}(a[r],t),e)),{})}},8494:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=window.getSelection();if(!a||!a.rangeCount)return null;var r=a.getRangeAt(0);if(!r.collapsed)return null;var{startContainer:s,startOffset:n}=r;if(s===e){var{childNodes:o}=s,{length:l}=o;if(t===i.FORWARD&&n>l||t===i.BACKWARD&&!n)return null;var d=t===i.BACKWARD?1:0,u=o[n-d];return u instanceof Element?u:null}var c=s.length===n;if(t===i.BACKWARD&&n)return null;if(t===i.FORWARD&&!c)return null;var h=t===i.BACKWARD?"previousSibling":"nextSibling",f=s[h];return f instanceof Element?f:null},t.Direction=void 0;var i=(0,r(a(63252)).default)({FORWARD:void 0,BACKWARD:void 0});t.Direction=i},95716:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return!e.getModifierState("Shift")&&!e.getModifierState("Alt")&&!e.getModifierState("Control")}},4314:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e instanceof HTMLElement&&Boolean(e.dataset&&e.dataset.mentionJid)}},14517:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.metaKey||e.shiftKey||e.altKey||e.ctrlKey}},90633:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return function(a,r){var o="",l=!1,d=!0;return(0,s.default)(a,r,(a=>{return l?(r=a,d=i.default.isEmoji(r)||n.test(r),!0):o.length>e||void((l=a===t)||(o=a+o));var r})),l&&d?o:null}};var i=r(a(12396)),s=r(a(25812)),n=/\W/},25812:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){if(1!==t.rangeCount)return;if(!t.getRangeAt(0).collapsed)return;var{anchorNode:r,anchorOffset:d}=t;if(r&&r===e.refInput){if(-1===(d-=1))return;r=r.childNodes[d],d=r.textContent.length}r=(0,o.default)(r)?l(r):r,(0,i.default)(r,(e=>{var t=l(e);return t?[t]:[]}),(e=>{var t,i;if((0,n.isEmojiEl)(e))return t=s.default.fromNode(e,!0).toPlainString(),a(t,0,t);var o=(i=e===r?e.textContent.slice(0,d):e.textContent).lastIndexOf("\n"),l=o>=0;l&&(i=i.slice(o+1));for(var u=i.length-1;u>=0;u--)if(t=i.charAt(u),a(t,u,i))return!0;return!!l||void 0}))};var i=r(a(97990)),s=r(a(76736)),n=a(37688),o=r(a(78185));function l(e){var t=e;do{if((t=t&&t.previousSibling)&&t.nodeType!==Node.TEXT_NODE&&!(0,n.isEmojiEl)(t))return null}while(t&&(0,o.default)(t));return t}},23340:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=t;for(;a>0;)e.modify("extend","backward","character"),a--}},34293:(e,t)=>{"use strict";function a(e,t){return e.msMatchesSelector?e.msMatchesSelector(t):e.webkitMatchesSelector?e.webkitMatchesSelector(t):e.matches(t)}function r(e,t){for(var r=0;r<t.length;++r){var{serializers:i}=t[r];if(i)for(var s=0;s<i.length;++s){var[n,o]=i[s];if(a(e,n))return o}}return null}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=[],n=e.cloneNode(!0).firstChild;for(;n;){switch(n.nodeType){case i:var o=r(n,t);if(o){a.push(o(n));break}switch(n.tagName){case"P":case"BR":case"PRE":a.push("\n");break;case"DIV":n.firstChild&&3!==n.firstChild.nodeType||a.push("\n")}break;case s:a.push(n.nodeValue)}if(n.hasChildNodes())n=n.firstChild;else{for(;n&&!n.nextSibling;)if((n=n.parentNode)===e){n=null;break}n&&(n=n.nextSibling)}}return a.join("")};var i=1,s=3},95580:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(19976)),s=r(a(34293));function n(){var e=(0,i.default)(["Assertion failed!"]);return n=function(){return e},e}var o=(e,t)=>{t.focusNode||(__LOG__(4,void 0,new Error,!0)(n()),SEND_LOGS("serializeTextBeforeCursor requires selection.focusNode"));var a=document.createRange();a.setStart(e,0),a.setEnd(t.focusNode,t.focusOffset);var r=a.cloneContents();return(0,s.default)(r,[])};t.default=o},53633:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return t.reduce(((e,{parsers:t})=>t?t.reduce(((e,t)=>t(e)),e):e),(0,i.default)(e))};var i=r(a(8972))},40314:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(58527)),n=r(a(2784));t.default=(e,t)=>{var a,r;return r=a=class extends n.Component{render(){return n.createElement(e,(0,s.default)({},this.props,t))}},a.displayName="Wrapper(".concat(e.displayName||e.name,")"),r}},96697:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=(0,r(a(63252)).default)({CHANGE:void 0,MOUNT:void 0,INPUT:void 0});t.default=i},32520:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(19976)),n=r(a(2784)),o=i(a(72779)),l=i(a(55547)),d=i(a(6047)),u=i(a(16730)),c=i(a(25407)),h=i(a(17957)),f=i(a(61124)),p=i(a(82631)),m=i(a(71449)),_=i(a(74824));function v(){var e=(0,s.default)(["Assertion failed!"]);return v=function(){return e},e}class g extends n.PureComponent{constructor(e){super(e),this.state={menuWidth:null,offset:0},this._handleItemClick=(e,t)=>{this.props.onItemClick&&this.props.onItemClick(e,t)},this._handleNextClick=()=>{var e=this.props.numItems,t=this.state.offset+this.props.numColumns;"number"!=typeof e||t>e||this.setState({offset:this.state.offset+1})},this._handlePrevClick=()=>{0!==this.state.offset&&this.setState({offset:this.state.offset-1})},this._handleResize=({width:e})=>{this.setState({menuWidth:e})},this._renderItem=(e,t,a)=>{var r=this.props.numItems;if("number"==typeof r&&e>=r)return null;var i=e-this.state.offset;return n.createElement(u.default,{column:i,carouselNumColumns:this.props.numColumns,key:e,menuWidth:a,onClick:this._handleItemClick,index:e,selected:t},this.props.renderItem(e))},this._checkSelectedIndex(e)}componentDidUpdate(){this._checkSelectedIndex(this.props)}_checkSelectedIndex({onItemClick:e,numItems:t,selectedIndex:a}){if(e&&0!==t){a<0&&(__LOG__(4,void 0,new Error,!0)(v()),SEND_LOGS("carousel_menu: selectedIndex is smaller than 0"));var r=t-1;a>r&&e(r)}}_renderPrevButton(){if(0===this.state.offset)return null;var e=h.default.isRTL()?"chevron-right":"chevron-left";return this._renderButton({className:d.default.prevButton,icon:e,onClick:this._handlePrevClick,id:"prev-button"})}_renderNextButton(){var{numColumns:e,numItems:t}=this.props;if("number"!=typeof t)return null;if(this.state.offset+e>=t)return null;var a=h.default.isRTL()?"chevron-left":"chevron-right";return this._renderButton({className:d.default.nextButton,icon:a,onClick:this._handleNextClick,id:"next-button"})}_renderButton({className:e,icon:t,onClick:a,id:r}){var i,{numColumns:s}=this.props;return i=null!=this.state.menuWidth&&0!==this.state.menuWidth?"".concat(Math.round(this.state.menuWidth/s),"px"):"".concat(100/s,"%"),n.createElement("div",{className:(0,o.default)(d.default.button,e),style:{width:i},onClick:a,role:"button","data-testid":r},n.createElement(p.default,{className:d.default.buttonIcon,name:t}))}render(){var e,{numColumns:t,numItems:a,selectedIndex:r}=this.props,{menuWidth:i,offset:s}=this.state;return e=r<s?-1:r>=s+t?t-1+1:(r-s)%t,n.createElement(l.default,{className:this.props.className},n.createElement(f.default,{className:d.default.resizeContainer,onResize:this._handleResize},n.createElement(_.default,null,this._renderPrevButton()),n.createElement(c.default,{menuWidth:i,numColumns:t,numItems:a,offset:s,renderItem:this._renderItem,selectedIndex:r}),n.createElement(_.default,null,this._renderNextButton()),n.createElement(m.default,{numTabs:t,selectedTabIndex:e,hide:-1===e||0===e&&s>0||e===t,animate:!0})))}}t.default=g},16730:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(17957)),o=i(a(59591));class l extends s.PureComponent{constructor(...e){super(...e),this._setRef=e=>{this._ref=e}}render(){var e,{column:t,carouselNumColumns:a,index:r,menuWidth:i}=this.props;e=null!=i&&0!==i?"".concat(Math.round(i/a),"px"):"".concat(100/a,"%");var l=n.default.isRTL()?-1:1;return s.createElement(o.default,{onRef:this._setRef,onClick:this.props.onClick,sectionId:r,selected:this.props.selected,theme:0!==r&&(t<=0||t>=a)?o.THEMES.CAROUSEL_END:o.THEMES.CAROUSEL,transform:"translateX(".concat(100*t*l,"%)"),width:e},this.props.children)}}t.default=l},25407:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(61258)),n=r(a(2784));class o extends n.PureComponent{_renderColumns(){var{numColumns:e,numItems:t,offset:a,renderItem:r,selectedIndex:i}=this.props,n=0,o=t-e;return 1===a&&(e+=1,n=-1),a===o-1&&(e+=1),(0,s.default)(e,(e=>{var s=e+n+a;return s<0||s>=t?null:r(s,s===i,this.props.menuWidth)}))}render(){return n.createElement(n.Fragment,null,this._renderColumns())}}t.default=o},12097:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ValidMoods=t.INPUT_SHOW_POINT=t.INPUT_HIDE_POINT=t.INPUT_BAR_SCROLL_FAST=t.INPUT_BAR_SCROLL_SENSITIVITY=t.INPUT_BAR_TOTAL_HEIGHT=t.SCROLL_THROTTLE_TIME=t.SCROLL_CLICK_TIME_GAP=void 0;t.SCROLL_CLICK_TIME_GAP=1e3;t.SCROLL_THROTTLE_TIME=100;t.INPUT_BAR_TOTAL_HEIGHT=63;t.INPUT_BAR_SCROLL_SENSITIVITY=5;t.INPUT_BAR_SCROLL_FAST=15;t.INPUT_HIDE_POINT=44.099999999999994;t.INPUT_SHOW_POINT=94.5;var r=a(28103).Mirrored(["LOVE","GREETINGS","HAPPY","SAD","ANGRY","CELEBRATE"]);t.ValidMoods=r},18919:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(63833)),s=(0,r(a(63252)).default)(i.default);t.default=s},73928:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.EMOJI_WIDTH=t.EMOJI_HEIGHT=t.SIDE_MARGIN=void 0;var s=i(a(2784)),n=r(a(79711)),o=a(14457),l=r(a(12396)),d=r(a(44977)),u=r(a(15301)),c=r(a(61311)),h=r(a(6660)),f=r(a(44343)),p=r(a(20642)),m=r(a(86921)),_=r(a(17693)),v=r(a(68768)),g=parseInt(u.default["-side-margin"],10);t.SIDE_MARGIN=g;var E=parseInt(u.default["-emoji-height"],10);t.EMOJI_HEIGHT=E;var y=parseInt(u.default["-emoji-width"],10);t.EMOJI_WIDTH=y;class S extends s.Component{constructor(...e){super(...e),this.state={skinTonePicker:null},this._lastFocusedElement=null,this._closeSkinTonePicker=()=>{var e=this.state.skinTonePicker&&this.state.skinTonePicker.anchor;e&&e instanceof HTMLElement&&this._focusElement(e),this.setState({skinTonePicker:null})},this._setEmojiVariant=(e,t,a)=>{T(e),c.default.setVariant(t,a),this._handleEmoji(t)},this._clearPickerTimer=()=>{this._pickerTimer&&clearTimeout(this._pickerTimer)},this._showContextMenu=(e,t,a)=>{var r=l.default.getSkinToneBase(e);r&&this.setState({skinTonePicker:{menu:s.createElement(m.default,{base:r,action:this._setEmojiVariant,unicode:e}),anchor:t,type:"picker",dirX:o.DirX.RIGHT,dirY:o.DirY.TOP,horizontal:!0,autoFocus:a,findFirstItem:!0}})},this._handleEmoji=e=>{var t=e;if(l.default.getSkinToneBase(t)){var a=c.default.getVariantIfExists(t);if(null!=a)t=a;else if(this.props.allowVariantPrompt)return!0}this.props.onEmoji(t)},this._handleEmojiArrowDown=e=>{T(e);var t=M(e);null!=t&&this.props.focusBelow&&this.props.focusBelow(t)},this._handleEmojiArrowLeft=e=>{T(e);var t=M(e);if(null!=t){var a=t-1;a<0?this.props.focusAbove(this.props.numColumns-1):this.focusEmojiAt(a)}},this._handleEmojiArrowRight=e=>{T(e);var t=M(e);if(null!=t){var a=t+1;a>=this.props.emojis.length?this.props.focusBelow&&this.props.focusBelow(0):this.focusEmojiAt(a)}},this._handleEmojiArrowUp=e=>{T(e);var t=M(e);null!=t&&this.props.focusAbove(t)},this._handleEmojiEnter=e=>{T(e);var t=M(e);this._selectEmojiAt(t)},this._handleClick=e=>{T(e);var t=M(e);this._selectEmojiAt(t)},this._handleContextMenu=e=>{T(e);var t=this._getEmojiUnicode(e);t&&e.target instanceof HTMLElement&&this._showContextMenu(t,e.target)},this._handleMouseDown=e=>{T(e);var t=e.target;if(t instanceof HTMLElement){var a=this._getEmojiUnicode(e);a&&this._startPickerTimer(a,t)}},this._setRefEmojis=e=>{this._refEmojis=e}}shouldComponentUpdate(e,t){return this.props.emojis!==e.emojis||this.state.skinTonePicker!==t.skinTonePicker}componentDidMount(){this.props.listeners.add(c.default,"add remove change:variant",(()=>this.forceUpdate()))}componentDidUpdate(e,t){t.skinTonePicker&&this.state.skinTonePicker&&this._closeSkinTonePicker()}focusEmojiAt(e){var t=this._getRefEmojiAt(e);t&&this._focusElement(t)}selectFirstEmoji(){this._selectEmojiAt(0)}restoreFocus(){this._lastFocusedElement&&this._focusElement(this._lastFocusedElement)}_focusElement(e){var t=parseInt(e.dataset.emojiIndex,10);isNaN(t)||(h.default.focus(e,{preventScroll:!0}),this.props.onEmojiFocus(e),this._lastFocusedElement=e)}_selectEmojiAt(e){if(null!=e){var t=this.props.emojis[e];if(t){var a=this._getRefEmojiAt(e);if(a)this._clearPickerTimer(),this._handleEmoji(t)&&this._showContextMenu(t,a,!0)}}}_getEmojiUnicode(e){var t=M(e);if(null!=t){var a=this.props.emojis[t];return a||null}}_getRefEmojiAt(e){var t=this.props.emojis.length-1,a=Math.max(Math.min(e,t),0);if(null!=this._refEmojis)return this._refEmojis.children[a]}_startPickerTimer(e,t){this._clearPickerTimer(),this._pickerTimer=setTimeout((()=>{delete this._pickerTimer,this.props.listeners.addOnce(n.default,"window_click",T),this._showContextMenu(e,t)}),250),this.props.listeners.addOnce(window,"mouseup",this._clearPickerTimer,!0)}render(){var e;this.state.skinTonePicker&&(e=s.createElement(_.default,{displayName:"SkinTonePicker",popable:!0,escapable:!0,requestDismiss:this._closeSkinTonePicker,requestRecentFocusOnUnmount:!1},s.createElement(v.default,{tooltip:this.state.skinTonePicker})));var{emojis:t}=this.props;return t.length?s.createElement("div",{className:u.default.panel},s.createElement(f.default,{onMouseDown:this._handleMouseDown,onClick:this._handleClick,onContextMenu:this._handleContextMenu,handlers:{up:this._handleEmojiArrowUp,down:this._handleEmojiArrowDown,left:this._handleEmojiArrowLeft,right:this._handleEmojiArrowRight,enter:this._handleEmojiEnter,space:this._handleEmojiEnter}},s.createElement("div",{ref:this._setRefEmojis,className:u.default.section},t.map(((e,t)=>{var a=c.default.getVariantIfExists(e);return s.createElement(d.default,{element:"span",emoji:a||e,size:"large",key:e,tabIndex:"-1","data-emoji-index":t})})))),e):null}}var C=(0,p.default)(S);function T(e){e.preventDefault(),e.stopPropagation()}function M(e){if(!(e.target instanceof HTMLElement))return null;var t=parseInt(e.target.dataset.emojiIndex,10);return isNaN(t)?null:t}t.default=class extends C{focusEmojiAt(e){this.getComponent().focusEmojiAt(e)}selectFirstEmoji(){this.getComponent().selectFirstEmoji()}restoreFocus(){this.getComponent().restoreFocus()}}},48308:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(75652)),n=i(a(1573)),o=i(a(18149)),l=i(a(27875)),d=i(a(72779)),u=r(a(2784)),c=i(a(12396)),h=i(a(11632)),f=i(a(33848)),p=i(a(44343)),m=i(a(57656)),_=i(a(17957)),v=i(a(11412)),g=i(a(67110)),E=i(a(76097)),y=r(a(84530)),S=i(a(74824));class C extends u.PureComponent{constructor(...e){super(...e),this._fastScroll=!1,this._scrollFromAnimation=!1,this._scrollFromFocus=!1,this._lastScrollTop=this.props.displayCache.scrollTop,this._lastSectionId=this.props.displayCache.sectionId,this.state={scrolledToTop:0===this.props.displayCache.scrollTop,searchText:this.props.defaultSearchText||"",showSearchInput:this.props.displayCache.showSearchInput},this._handleEmojiFocus=(e,t)=>{this._scrollFromFocus=!0,this._scrollFromFocusHandlerTimeoutID&&clearTimeout(this._scrollFromFocusHandlerTimeoutID),this._scrollFromFocusHandlerTimeoutID=setTimeout((()=>{this._scrollFromFocus=!1}),200);var a=t.scrollTop,r=e.getBoundingClientRect().top-t.getBoundingClientRect().top+a,i=r-t.clientHeight+e.clientHeight+2,s=this.state.showSearchInput?r-y.TOTAL_SEARCH_HEIGHT:r-2;t.scrollTop=(0,l.default)(a,i,s)},this._handleListFocusAbove=()=>{this._focusSearchAndScrollToTop()},this._handleListScroll=e=>{var t=e-this._lastScrollTop;if(this._lastScrollTop=e,!this._scrollFromFocus&&!this._scrollFromAnimation&&!this._checkScrollTop()){var a=Math.abs(t);this._fastScroll=a>15;var r=t>=0?1:-1,i=0===e;e<y.TOTAL_SEARCH_HEIGHT?this.setState({scrolledToTop:i,showSearchInput:!0}):a<5||(this.state.showSearchInput?1===r&&this.setState({scrolledToTop:i,showSearchInput:!1}):-1===r&&this.setState({scrolledToTop:i,showSearchInput:!0}))}},this._handleListSection=e=>{this._scrollFromAnimation||(this._lastSectionId=e,this.props.onSection(e))},this._handleSearchResultsFocusAbove=()=>{this._focusSearchAndScrollToTop()},this._handleSearchChange=(e,t)=>{this.props.onChange&&this.props.onChange(e,t),this.setState({searchText:e})},this._handleScrollListFocusUp=()=>{this._focusSearchAndScrollToTop()},this._handleSearchDownKey=()=>{if(this.state.searchText){if(!this._refSearchResults)return;this._refSearchResults.focusFirstVisibleEmoji()}else this._refScrollList&&this._refScrollList.focusFirstVisibleEmoji(y.TOTAL_SEARCH_HEIGHT)},this._handleSearchEnterKey=()=>{this.state.searchText&&this._refSearchResults&&this._refSearchResults.selectFirstVisibleEmoji()},this._handleShiftTabKey=e=>{if(e.preventDefault(),e.stopPropagation(),this._refSearchInput)return this._refSearchInput.hasFocus()?void this.props.onFocusPrev():this.focusSearchInput()},this._handleTabKey=e=>{if(e.preventDefault(),e.stopPropagation(),this._refSearchInput)return this._refSearchInput.hasFocus()?void this.props.onFocusNext():this.focusSearchInput()},this._setRefSearchInput=e=>{this._refSearchInput=e},this._setRefScrollList=e=>{this._refScrollList=e},this._setRefSearchResults=e=>{this._refSearchResults=e},this._getSectionListDataMemoized=(0,v.default)((({sectionIds:e})=>e.map((e=>({sectionId:e,emojis:"RECENT"===e?(0,s.default)(g.default.reduce(((e,t)=>{var a=c.default.getSkinToneBase(t.id)||t.id;return null!=c.default.getGlyphId(a)&&e.push(a),e}),[])):c.default.getEmojisInCategory(e)})))),((e,t)=>e.sectionIds===t.sectionIds||(0,o.default)(e.sectionIds,t.sectionIds))),this._getSearchResultsDataMemoized=(0,v.default)((({searchText:e})=>[{sectionId:f.default.SEARCH_RESULT,emojis:(0,h.default)((0,n.default)(e))}]))}componentWillUnmount(){this.props.onDisplayCache&&this.props.onDisplayCache({scrollTop:this._lastScrollTop,sectionId:this._lastSectionId,showSearchInput:this.state.showSearchInput})}focusSearchInput(e){if(!this._refSearchInput)return this._fastScroll=!0,void this.setState({showSearchInput:!0},(()=>this.focusSearchInput(!0)));this._refSearchInput.focus(e)}scrollToSection(e){return this._lastSectionId=e,new Promise((e=>{this._fastScroll=!0,this.setState({searchText:"",showSearchInput:!0},e)})).then((()=>{this._scrollFromAnimation=!0;var t=this._refScrollList?this._refScrollList.scrollToSection(e,0-y.TOTAL_SEARCH_HEIGHT):Promise.resolve();return t.finally((()=>{t===this._animationPromise&&(this._scrollFromAnimation=!1,this._checkScrollTop()||this.state.showSearchInput&&this.setState({scrolledToTop:0===this._lastScrollTop}))})),this._animationPromise=t,t}))}_checkScrollTop(){var e=0===this._lastScrollTop;return e&&this.setState({scrolledToTop:e,showSearchInput:!0}),e}_focusSearchAndScrollToTop(){this._scrollFromFocus=!0,this._scrollFromFocusHandlerTimeoutID&&clearTimeout(this._scrollFromFocusHandlerTimeoutID),this._scrollFromFocusHandlerTimeoutID=setTimeout((()=>{this._scrollFromFocus=!1}),200),this.focusSearchInput(),this._refScrollList&&this._refScrollList.scrollToTop()}_stopEvent(e){e.preventDefault(),e.stopPropagation()}render(){return u.createElement(p.default,{handlers:{tab:this._handleTabKey,"shift+tab":this._handleShiftTabKey}},u.createElement("div",{className:m.default.bodyContainer},this._renderSearchInput(),this._renderSearchResults(),u.createElement("div",{className:(0,d.default)(m.default.list,{[m.default.hidden]:!!this.state.searchText})},u.createElement(y.default,{data:this._getSectionListData(),width:this.props.width,onFocusUp:this._handleScrollListFocusUp,initialScrollTop:this.props.displayCache.scrollTop,searchInputVisible:this.state.showSearchInput,focusAbove:this._handleListFocusAbove,onEmoji:this.props.onEmoji,onEmojiFocus:this._handleEmojiFocus,onScroll:this._handleListScroll,onSection:this._handleListSection,ref:this._setRefScrollList,showTitles:!0}))))}_renderSearchInput(){var e=null;this.state.showSearchInput&&(e=u.createElement(E.default,{label:_.default.t(1227),onChange:this._handleSearchChange,onUpKey:this.props.onFocusUp,onDownKey:this._handleSearchDownKey,onEnterKey:this._handleSearchEnterKey,ref:this._setRefSearchInput,shadow:!this.state.scrolledToTop,value:this.state.searchText||""}));var t=this._fastScroll?"emoji-search-slide-away-fast":"emoji-search-slide-away";return u.createElement(S.default,{transitionName:t,className:m.default.search},e)}_renderSearchResults(){return this.state.searchText?u.createElement("div",{className:m.default.list},u.createElement(y.default,{data:this._getSearchResultsData(),width:this.props.width,initialScrollTop:0,searchInputVisible:!0,focusAbove:this._handleSearchResultsFocusAbove,onEmoji:this.props.onEmoji,onEmojiFocus:this._handleEmojiFocus,ref:this._setRefSearchResults,showTitles:!1})):null}_getSectionListData(){return this._getSectionListDataMemoized({sectionIds:this.props.sectionIds})}_getSearchResultsData(){var e=(this.state.searchText||"").replace(/^\s+/,"");return this._getSearchResultsDataMemoized({searchText:e})}}t.default=C},84530:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.findEmojiRowAt=T,t.getNumColumns=M,t.default=t.TOTAL_SEARCH_HEIGHT=void 0;var s=i(a(93586)),n=a(91460),o=r(a(2784)),l=i(a(18919)),d=r(a(73928)),u=i(a(33848)),c=i(a(35598)),h=i(a(63097)),f=i(a(22004)),p=i(a(17957)),m=i(a(11412)),_=i(a(94782)),v=i(a(91378)),g=parseInt(_.default["-total-search-height"],10);t.TOTAL_SEARCH_HEIGHT=g;var E,y=parseInt(_.default["-title-height"],10),S={[u.default.SEARCH_RESULT]:()=>{throw new Error("Search results should not be shown with a title.")},[u.default.RECENT]:()=>p.default.t(589),[l.default.SMILEYS_PEOPLE]:()=>p.default.t(590),[l.default.ANIMALS_NATURE]:()=>p.default.t(585),[l.default.FOOD_DRINK]:()=>p.default.t(587),[l.default.ACTIVITY]:()=>p.default.t(584),[l.default.TRAVEL_PLACES]:()=>p.default.t(592),[l.default.OBJECTS]:()=>p.default.t(588),[l.default.SYMBOLS]:()=>p.default.t(591),[l.default.FLAGS]:()=>p.default.t(586)};E=parseInt(_.default["-scrollbar-width"].replace(/px$/,""),10);class C extends o.PureComponent{constructor(e){super(e),this._rowComponents=new Map,this._flatListController=new f.default,this._renderBlanks=!1,this._getRowsAndSectionDataMemoized=(0,m.default)((e=>{var{numColumns:t,data:a,showTitles:r}=e,i=g,n={},o=[];return a.forEach((({sectionId:e,emojis:l},u)=>{var c=0,h=i;if(0!==l.length){r&&(o.push({kind:"title",itemKey:"section_".concat(e,"_title"),index:o.length,title:S[e](),sectionId:e,height:y,offsetTop:i}),c+=y,i+=y);var f=(0,s.default)(l,t),p=u===a.length-1;f.forEach(((t,a)=>{var r=a===f.length-1&&!p?d.EMOJI_HEIGHT+parseInt(_.default["-section-bottom-margin"],10):d.EMOJI_HEIGHT;o.push({kind:"emojis",itemKey:"section_".concat(e,"_emoji_").concat(a),index:o.length,emojis:t,sectionId:e,height:r,offsetTop:i}),c+=r,i+=r})),n[e]={height:c,offsetTop:h}}})),{rows:o,sectionData:n}})),this._handleEmojiFocus=e=>{var t=this._refScrollContainer;t&&this.props.onEmojiFocus(e,t)},this._handleScroll=()=>{this._animationFrameID||(this._animationFrameID=requestAnimationFrame(this._handleScrollOnAnimationFrame))},this._handleScrollOnAnimationFrame=()=>{if(delete this._animationFrameID,this._refScrollContainer){var e=this._refScrollContainer.scrollTop;this.props.onScroll&&this.props.onScroll(e);var t=this._getSectionIdFromScrollTop(e);t&&this.props.onSection&&this.props.onSection(t)}},this._setRefScrollContainer=e=>{this._refScrollContainer=e},this._renderRow=e=>{switch(e.kind){case"title":return o.createElement("div",{className:_.default.title},e.title);case"emojis":return o.createElement(d.default,{emojis:e.emojis,focusAbove:t=>{var a,r;1===e.index&&(null===(a=(r=this.props).onFocusUp)||void 0===a||a.call(r)),this._focusEmojiAt(e.index,-1,t)},focusBelow:t=>{this._focusEmojiAt(e.index,1,t)},numColumns:this._getNumColumns(),onEmoji:this.props.onEmoji,onEmojiFocus:this._handleEmojiFocus,ref:t=>{t?this._rowComponents.set(e.itemKey,t):this._rowComponents.delete(e.itemKey)},allowVariantPrompt:e.sectionId!==u.default.RECENT});default:throw e.kind,new Error("Invalid row kind: ".concat(e.kind))}},this._getRowsAndSectionData()}componentDidMount(){this._refScrollContainer&&this._refScrollContainer.scrollTop!==this.props.initialScrollTop&&(this._refScrollContainer.scrollTop=this.props.initialScrollTop)}focusFirstVisibleEmoji(e){var t=this._getFirstVisibleEmojiRowComponent(e||0);t&&t.focusEmojiAt(0)}scrollToSection(e,t){var a=this._refScrollContainer;if(!a)return Promise.resolve();var{sectionData:r}=this._getRowsAndSectionData(),i=r[e];if(!i)return Promise.resolve();var s=i.offsetTop;if(a.scrollTop===s)return Promise.resolve();if(this._activeAnimation){if(this._activeAnimation.sectionId===e)return this._activeAnimation.promise;(0,v.default)(this._activeAnimation.scrollTarget,"stop"),this._activeAnimation&&this._activeAnimation.promise.cancel()}if(a.scrollTop===s)return Promise.resolve();var o=document.createElement("div");o.style.position="absolute",o.style.top="".concat(s+(t||0),"px"),o.style.left="0px",a.appendChild(o);var l=(0,v.default)(o,"scroll",{container:a,duration:300,easing:[.99,.13,.13,.99]}).then((()=>{})).then((()=>(0,n.delayMs)(100)));return this._activeAnimation={promise:l,sectionId:e,scrollTarget:o},l.finally((()=>{a.removeChild(o),this._activeAnimation&&this._activeAnimation.promise===l&&delete this._activeAnimation})),l}scrollToTop(){this._refScrollContainer&&(this._refScrollContainer.scrollTop=0)}selectFirstVisibleEmoji(e){var t=this._getFirstVisibleEmojiRowComponent(e||0);t&&t.selectFirstEmoji()}_getCurrentSearchInputHeight(){return this.props.searchInputVisible?g:0}_getNumColumns(){return M(this.props.width)}_getRowsAndSectionData(){return this._getRowsAndSectionDataMemoized({numColumns:this._getNumColumns(),data:this.props.data,showTitles:this.props.showTitles})}_getFirstVisibleEmojiRowComponent(e){if(this._refScrollContainer){var t=this._refScrollContainer.scrollTop+e,a=this._getEmojiRowFromScrollTop(t);if(a)return this._rowComponents.get(a.itemKey)}}_getEmojiRowFromScrollTop(e){var{rows:t}=this._getRowsAndSectionData();return t.map((e=>"emojis"===e.kind?e:null)).filter(Boolean).find((t=>t.offsetTop+t.height>e))}_getSectionIdFromScrollTop(e){var t=this._getEmojiRowFromScrollTop(e+this._getCurrentSearchInputHeight());if(t)return t.sectionId}_focusEmojiAt(e,t,a){var{rows:r}=this._getRowsAndSectionData(),i=T(r,e,t);if(i){var s=this._rowComponents.get(i.itemKey);s&&s.focusEmojiAt(a)}}render(){var e,{rows:t}=this._getRowsAndSectionData(),a=Math.min(t.length,2);return(this.props.onScroll||this.props.onSection)&&(e=this._handleScroll),o.createElement(h.default,{onScroll:e,className:_.default.container,onRef:this._setRefScrollContainer,flatListControllers:[this._flatListController]},o.createElement(c.default,{data:t,reorderAnimationsEnabled:!1,forceConsistentRenderCount:!1,flatListController:this._flatListController,direction:"vertical",extraItems:a,initialScrollFromStart:this.props.initialScrollTop,renderItem:this._renderRow}))}}function T(e,t,a){for(var r=a<0?-1:1,i=t+a;i>=0&&i<e.length;){var s=e[i];if("emojis"===s.kind)return s;i+=r}}function M(e){var t=e-2*d.SIDE_MARGIN-E;return Math.floor(t/d.EMOJI_WIDTH)}t.default=C},55655:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return s.createElement(o.default,{name:l[e.sectionId]})},t.sectionIdToIcon=void 0;var s=i(a(2784)),n=r(a(33848)),o=r(a(82631)),l={[n.default.RECENT]:"panel-recent",[n.default.SMILEYS_PEOPLE]:"panel-emoji-people",[n.default.ANIMALS_NATURE]:"panel-emoji-nature",[n.default.FOOD_DRINK]:"panel-emoji-food",[n.default.ACTIVITY]:"panel-emoji-activity",[n.default.TRAVEL_PLACES]:"panel-emoji-travel",[n.default.OBJECTS]:"panel-emoji-objects",[n.default.SYMBOLS]:"panel-emoji-symbols",[n.default.FLAGS]:"panel-emoji-flags"};t.sectionIdToIcon=l},89088:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(33848)),o=r(a(17957)),l=r(a(55655)),d=i(a(59591));class u extends s.PureComponent{constructor(...e){super(...e),this._handleClick=e=>{this.props.onClick(this.props.sectionId,e)}}render(){var e={[n.default.RECENT]:o.default.t(589),[n.default.SMILEYS_PEOPLE]:o.default.t(590),[n.default.ANIMALS_NATURE]:o.default.t(585),[n.default.FOOD_DRINK]:o.default.t(587),[n.default.ACTIVITY]:o.default.t(584),[n.default.TRAVEL_PLACES]:o.default.t(592),[n.default.OBJECTS]:o.default.t(588),[n.default.SYMBOLS]:o.default.t(591),[n.default.FLAGS]:o.default.t(586)},{sectionId:t}=this.props,a=e[t];return s.createElement(d.default,{onClick:this.props.onClick,sectionId:this.props.sectionId,selected:this.props.selected,showFocusIndicator:this.props.showFocusIndicator,theme:d.THEMES.MENU,title:a,onRef:this.props.onRef},s.createElement(l.default,{sectionId:t}))}}t.default=u},33848:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.ORDERED_TAB_SECTION_IDS=t.default=void 0;var i=r(a(70417)),s=r(a(50935)),{EMOJI:{CATEGORIES:n,ORDERED_CATEGORY_IDS:o}}=s.default,l=(0,i.default)((0,i.default)({RECENT:"RECENT"},n),{},{SEARCH_RESULT:"SEARCH_RESULT"}),d=l;t.default=d;var u=[{[l.RECENT]:l.RECENT,[l.SMILEYS_PEOPLE]:l.SMILEYS_PEOPLE,[l.ANIMALS_NATURE]:l.ANIMALS_NATURE,[l.FOOD_DRINK]:l.FOOD_DRINK,[l.ACTIVITY]:l.ACTIVITY,[l.TRAVEL_PLACES]:l.TRAVEL_PLACES,[l.OBJECTS]:l.OBJECTS,[l.SYMBOLS]:l.SYMBOLS,[l.FLAGS]:l.FLAGS}.RECENT,...o];t.ORDERED_TAB_SECTION_IDS=u},87165:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.EMOJI_WIDTH=void 0;var s=i(a(16760)),n=r(a(2784)),o=i(a(79711)),l=a(14457),d=i(a(12396)),u=i(a(44977)),c=i(a(4212)),h=i(a(61311)),f=i(a(98294)),p=i(a(44343)),m=i(a(20642)),_=i(a(61941)),v=i(a(86921)),g=i(a(67134)),E=i(a(17693)),y=i(a(68768)),S=parseInt(c.default["-emoji-width"].replace(/px$/,""),10);t.EMOJI_WIDTH=S;class C extends n.Component{constructor(...e){super(...e),this.state={selectedIndex:0,skinTonePicker:null},this.emojiList=null,this._rowLength=0,this._emojiPanelRef=n.createRef(),this._emojisRef=n.createRef(),this._windowResized=()=>{var e=this._getEmojiRowLength();if(this._rowLength!==e){this._rowLength=e;var t=this.state.selectedIndex>=e?e-1:this.state.selectedIndex;this.setState({selectedIndex:t})}},this._onEmojiClick=e=>{if(M(e),e.target instanceof HTMLElement){var t=e.target.dataset.unicode;if(t)if(d.default.getSkinToneBase(t)){var a=this._getEmojiVariant(t);a?this.onEmoji(a):this.onContextMenu(e)}else this.onEmoji(t)}},this._onEmojiMouseDown=e=>{if(M(e),e.target instanceof HTMLElement){var t=e.target.dataset.unicode;t&&d.default.getSkinToneBase(t)&&this._startPickerTimer(e)}},this.onEmoji=e=>{this.props.onEmoji(e),this.releaseFocus()},this.releaseFocus=()=>{this.props.onFocusRelease&&this.props.onFocusRelease()},this._getEmojiVariant=e=>d.default.getSkinToneBase(e)?h.default.getVariant(e):null,this._setEmojiVariant=(e,t,a)=>{M(e),this.onEmoji(a),h.default.setVariant(t,a);var r=this.props.uim;return r&&(r.pop(!1,!1),r.uie.requestDismiss()),!1},this.onContextMenu=e=>{M(e);var t=e.target;if(t instanceof HTMLElement){var a=t.dataset.unicode;a&&d.default.getSkinToneBase(a)&&this._onContextMenu(a,t)}},this._onContextMenu=(e,t,a)=>{this._clearPickerTimer();var r=(0,_.default)(d.default.getSkinToneBase(e),"Emoji.getSkinToneBase(unicode)");this.setState({skinTonePicker:{menu:n.createElement(v.default,{base:r,action:this._setEmojiVariant,unicode:e}),anchor:t,type:"picker",dirX:l.DirX.RIGHT,dirY:l.DirY.TOP,horizontal:!0,autoFocus:a,findFirstItem:!0}},(()=>{var{onSkinTonePicker:e}=this.props;e&&e(!0)}))},this._closeSkinTonePicker=()=>{this.setState({skinTonePicker:null},(()=>{var{onSkinTonePicker:e}=this.props;e&&e(!1)}))},this._clearPickerTimer=()=>{null!=this._pickerTimer&&(this.props.clearTimeout(this._pickerTimer),this._pickerTimer=null)},this._startPickerTimer=e=>{M(e),this._clearPickerTimer();var t=e.target;if(t instanceof HTMLElement){var a=t.dataset.unicode;this._pickerTimer=this.props.setTimeout((()=>{this.props.listeners.addOnce(o.default,"window_click",M),this._onContextMenu(a,t)}),250),this.props.listeners.addOnce(window,"mouseup",this._clearPickerTimer,!0)}},this._getEmojiRowLength=()=>{var e=this._emojiPanelRef.current&&this._emojiPanelRef.current.offsetWidth;return null==e?8:Math.floor(e/S)},this.onEmojiArrowLeft=e=>{this._onEmojiArrow(e,"left")},this.onEmojiArrowRight=e=>{this._onEmojiArrow(e,"right")},this._onEmojiArrow=(e,t)=>{if(M(e),e.target instanceof HTMLElement){var a=e.target.dataset.emojiIndex;if(a){a=Number(a);var r=this.props.emojiList,i=a;switch(t){case"left":a>0&&(i=a-1);break;case"right":if(a+1>=r.length)return;i=a+1}this.setState({selectedIndex:i})}}},this._renderEmojiList=e=>{var t=e,a=this._getEmojiRowLength();t&&t.length>a&&(t=t.slice(0,a));var r=(0,s.default)(t,((e,t)=>{var a=this._getEmojiVariant(e),r=this.state.selectedIndex===t&&!this.state.skinTonePicker;return n.createElement(u.default,{element:"span",emoji:a||e,size:"large",key:e,"data-unicode":e,"data-variant":a,tabIndex:"-1","data-emoji-index":t,selected:r})}));return n.createElement(p.default,{onMouseDown:this._onEmojiMouseDown,onClick:this._onEmojiClick,onContextMenu:this.onContextMenu},n.createElement("div",{className:c.default.panel,ref:this._emojisRef},r))},this.onEmojiEnter=e=>{if(M(e),e.target instanceof HTMLElement){var t=e.target.dataset.emojiIndex;if(t&&this.props.emojiList){var a=this.props.emojiList[Number(t)];this._keyboardSelectEmoji(e,a)}}},this._keyboardSelectEmoji=(e,t)=>{if(d.default.getSkinToneBase(t)){var a=this._getEmojiVariant(t);if(a)this.onEmoji(a);else{if(M(e),!(e.target instanceof HTMLElement))return;this._onContextMenu(t,e.target,!0)}}else this.onEmoji(t)}}static getDerivedStateFromProps(e,t){return{selectedIndex:Math.min(t.selectedIndex,e.emojiList.length-1)}}componentDidUpdate(e,t){this.state.skinTonePicker&&this.state.skinTonePicker===t.skinTonePicker&&this._closeSkinTonePicker()}componentDidMount(){this.props.listeners.add(h.default,"add remove change:variant",(()=>this.forceUpdate()));var e=this.props.debounce(this._windowResized,100);this.props.listeners.add(window,"resize",e),this._windowResized()}_getEmojiAtIndex(e){var t;return null!==(t=this.props.emojiList[e])&&void 0!==t?t:null}_getEmojiElement(e){if(!(e<0)&&this._emojisRef.current){var t=this._emojisRef.current.children;if(!(e>=t.length))return t[e]}}render(){var e;return this.state.skinTonePicker&&(e=n.createElement(E.default,{displayName:"SkinTonePicker",popable:!0,escapable:!0,requestDismiss:this._closeSkinTonePicker},n.createElement(y.default,{tooltip:this.state.skinTonePicker}))),n.createElement("div",{ref:this._emojiPanelRef},this._renderEmojiList(this.props.emojiList),e)}moveSelectionLeft(){this.setState({selectedIndex:Math.max(this.state.selectedIndex-1,0)})}moveSelectionRight(){this.setState({selectedIndex:Math.min(this.state.selectedIndex+1,this._getEmojiRowLength()-1,this.props.emojiList.length-1)})}pickSelectedEmoji(){var e=this._getEmojiAtIndex(this.state.selectedIndex);if(e)if(d.default.getSkinToneBase(e)){var t=this._getEmojiVariant(e);if(t)this.onEmoji(t);else{var a=this._getEmojiElement(this.state.selectedIndex);a&&this._onContextMenu(e,a,!0)}}else this.onEmoji(e)}}var T=(0,f.default)((0,m.default)((0,g.default)(C)));function M(e){e&&(e.preventDefault(),e.stopPropagation())}t.default=class extends T{moveSelectionLeft(){this.getComponent().moveSelectionLeft()}moveSelectionRight(){this.getComponent().moveSelectionRight()}pickSelectedEmoji(){this.getComponent().pickSelectedEmoji()}}},82512:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DISP_LOCATION=void 0;var s=i(a(72779)),n=r(a(2784)),o=a(14457),l=i(a(48308)),d=r(a(33848)),u=i(a(60585)),c=i(a(20642)),h=i(a(69132)),f=i(a(67110)),p=i(a(89088)),m={COMPOSE_BOX:"COMPOSE_BOX",DROPDOWN:"DROPDOWN"};t.DISP_LOCATION=m;class _ extends n.PureComponent{constructor(e){var t;super(e),this._refDiv=n.createRef(),this.getElement=()=>this._refDiv.current,this._sectionIds=0===f.default.length?d.ORDERED_TAB_SECTION_IDS.filter((e=>e!==d.default.RECENT)):d.ORDERED_TAB_SECTION_IDS,this._refMenuTabs=new Map,this._handleEmojiPanelFocusUp=()=>{var e;null===(e=this._refMenuTabs.get(this.state.selectedSectionId))||void 0===e||e.focus(),this.setState({focusedTabIndex:this._sectionIds.indexOf(this.state.selectedSectionId)})},this._handleEmojiPanelFocusEnter=e=>{null==e||e.preventDefault();var t=this._sectionIds[this.state.focusedTabIndex];this.setState({focusedTabIndex:-1}),this._handleMenuTabClick(t)},this._handleEmojiPanelFocusNext=()=>{var e,t=(this.state.focusedTabIndex+1)%this._sectionIds.length,a=this._sectionIds[t];null===(e=this._refMenuTabs.get(a))||void 0===e||e.focus(),this.setState({focusedTabIndex:t})},this._handleEmojiPanelFocusPrev=()=>{var e,t=(this._sectionIds.length+this.state.focusedTabIndex-1)%this._sectionIds.length,a=this._sectionIds[t];null===(e=this._refMenuTabs.get(a))||void 0===e||e.focus(),this.setState({focusedTabIndex:t})},this._handleFocusLeave=()=>{this.setState({focusedTabIndex:-1}),this._focusSearchInput()},this._handleMenuTabClick=(e,t)=>{var a,r;this._selectSection(e),null===(a=(r=this.props).onChange)||void 0===a||a.call(r,""),this._focusSearchInput(),null==t||t.preventDefault()},this._handlePanelSection=e=>{this._animationPromise||this.state.selectedSectionId!==e&&this.setState({selectedSectionId:e})},this._onEmoji=e=>{f.default.increment(e),this.props.onEmoji(e)},this._onChange=(e,t)=>{var a,r;null===(a=(r=this.props).onChange)||void 0===a||a.call(r,e,t),this.setState({})},this._setRefContent=e=>{this._refContent=e},this._renderEmojiTab=(e,t)=>n.createElement(p.default,{key:e,onClick:this._handleMenuTabClick,sectionId:e,selected:t,showFocusIndicator:-1!==this.state.focusedTabIndex,onRef:t=>{this._refMenuTabs.set(e,t)}}),this._scrollSectionIds=this._sectionIds,t=this.props.displayCache?this.props.displayCache:{scrollTop:0,sectionId:this._sectionIds[0],showSearchInput:!0},this._displayCache=t,this.state={selectedSectionId:t.sectionId,focusedTabIndex:-1}}componentDidMount(){this.props.listeners.uiIdle((()=>{this.restoreFocus()}))}restoreFocus(e){this._focusSearchInput(e)}_focusSearchInput(e){this._refContent&&this._refContent.focusSearchInput(e)}_selectSection(e){this.state.selectedSectionId!==e&&(this.setState({selectedSectionId:e}),this._scrollToSection(e))}_scrollToSection(e){if(this._refContent){var t=this._refContent.scrollToSection(e);this._animationPromise=t,t.finally((()=>{t===this._animationPromise&&delete this._animationPromise}))}}render(){var e,t=(0,s.default)(u.default.emojiPanel,{[u.default.panelDropdown]:this.props.displayLocation===m.DROPDOWN}),{width:a=o.EMOJI_PICKER_WIDTH}=this.props;return n.createElement("div",{className:t,ref:this._refDiv},n.createElement(h.default,{selectedSectionId:this.state.selectedSectionId,sectionIds:this._sectionIds,renderSectionTab:this._renderEmojiTab,showTabHighlight:!(null===(e=this.props.defaultSearchText)||void 0===e?void 0:e.trim()),onFocusPrev:this._handleEmojiPanelFocusPrev,onFocusNext:this._handleEmojiPanelFocusNext,onFocusLeave:this._handleFocusLeave,onEnter:this._handleEmojiPanelFocusEnter}),n.createElement(l.default,{displayCache:this._displayCache,width:a,onDisplayCache:this.props.onDisplayCache,onFocusUp:this._handleEmojiPanelFocusUp,onFocusPrev:this.props.onFocusPrev,onFocusNext:this.props.onFocusNext,onEmoji:this._onEmoji,onSection:this._handlePanelSection,ref:this._setRefContent,sectionIds:this._scrollSectionIds,onChange:this._onChange,defaultSearchText:this.props.defaultSearchText}))}}_.defaultProps={displayLocation:m.DROPDOWN};var v=(0,c.default)(_);t.default=class extends v{restoreFocus(e){this.getComponent().restoreFocus(e)}}},75656:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.SKIN_TONE_VARIATIONS=void 0;var i=r(a(12396)),s=[""].concat(i.default.skinToneVariations);t.SKIN_TONE_VARIATIONS=s},75705:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={TRENDING:"TRENDING",HAHA:"HAHA",SAD:"SAD",LOVE:"LOVE",REACTIONS:"REACTIONS",SPORTS:"SPORTS",TV:"TV"};t.default=a},52127:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.gifProvider=function(){switch(i.default.gifSearch){case"giphy":return s;case"tenor":default:return n}},t.GIPHY_LOCALES=t.BRAND_NAMES=t.GifInfo=t.TENOR=t.GIPHY=t.GAP_SIZE=t.TARGET_GIF_HEIGHT=void 0;var i=r(a(72424));t.TARGET_GIF_HEIGHT=130;t.GAP_SIZE=6;var s="giphy";t.GIPHY=s;var n="tenor";t.TENOR=n;var o=0;t.GifInfo=class{constructor(e,t,a,r,i,s,n,l){this.rank=e,this.gifId=++o,this.url=t,this.size=a,this.previewUrl=r||t,this.nonVideoUrl=i,this.width=s,this.widthStr="".concat(s,"px"),this.ratioStr="".concat(Math.ceil(13e3/s),"%"),this.attribution=n,this.trending=l}};t.BRAND_NAMES={giphy:"GIPHY",tenor:"Tenor"};t.GIPHY_LOCALES=["en","es","pt","id","fr","ar","tr","th","vi","de","it","ja","zh-CN","zh-TW","ru","ko","pl","nl","ro","hu","sv","cs","hi","bn","da","fa","tl","fi","iw","ms","no","uk"]},70170:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(e.sectionId&&e.sectionId===n.default.FAVORITES)return s.createElement(l.default,{name:"panel-starred"});return s.createElement("span",{className:o.default.text},e.sectionTitle)};var s=i(a(2784)),n=r(a(61180)),o=r(a(87180)),l=r(a(82631))},78119:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(61180)),o=r(a(17957)),l=r(a(70170)),d=i(a(59591));class u extends s.PureComponent{constructor(...e){super(...e),this._handleClick=e=>{this.props.onClick(this.props.sectionId,e)}}render(){var e={[n.default.FAVORITES]:o.default.t(705),[n.default.TRENDING]:o.default.t(711),[n.default.HAHA]:o.default.t(706),[n.default.SAD]:o.default.t(709),[n.default.LOVE]:o.default.t(707),[n.default.REACTIONS]:o.default.t(708),[n.default.SPORTS]:o.default.t(710),[n.default.TV]:o.default.t(712)},{sectionId:t}=this.props,a=e[t];return s.createElement(d.default,{onClick:this.props.onClick,sectionId:this.props.sectionId,selected:this.props.selected,showFocusIndicator:this.props.showFocusIndicator,title:a,theme:d.THEMES.MENU,onRef:this.props.onRef},s.createElement(l.default,{sectionId:t,sectionTitle:a}))}}t.default=u},97586:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(67703)),o=r(a(82631)),l=r(a(77626));class d extends s.Component{get messagePreviewRef(){return this._messagePreviewRef}constructor(e){super(e),this.setRefVideo=e=>{this._videoRef=e,this._synchronizeVideo()},this._synchronizeVideo=()=>{var e=this._videoRef;e&&(this.state.animate?e.paused&&e.play():e.paused||(e.pause(),e.currentTime=0))},this.setShouldAnimate=e=>{this.state.animate===e&&this.state.show||this.setState({animate:e,show:!0},this._synchronizeVideo)},this.handleClick=()=>{this.props.onSend(this.props.gif)},this.setRefHotKeys=e=>{this._messagePreviewRef=e},this.onFocus=e=>{e.preventDefault(),e.stopPropagation(),this.setState({focused:!0})},this.onBlur=e=>{e.preventDefault(),e.stopPropagation(),this.setState({focused:!1})},this._videoRef=null,this.state={animate:!1,show:!1,focused:!1}}render(){var e,t=this.props.gif,a=null;return this.state.show&&(a=l.default.troublesWithLotsOfVideos&&t.nonVideoUrl?s.createElement("img",{className:n.default.body,onClick:this.handleClick,src:t.nonVideoUrl}):s.createElement("video",{className:n.default.body,onClick:this.handleClick,controls:!1,autoPlay:this.state.animate,loop:!0,muted:!0,ref:this.setRefVideo,src:t.previewUrl})),this.props.isStarred&&this.props.onUnstarMsg&&(e=s.createElement("button",{className:n.default.icon,onClick:this.props.onUnstarMsg},s.createElement(o.default,{name:"star"}))),s.createElement("div",{ref:this.setRefHotKeys,className:n.default.preview,tabIndex:"-1",onFocus:this.onFocus,onBlur:this.onBlur,style:{flexBasis:t.widthStr}},this.state.focused&&s.createElement("div",{style:{flexBasis:t.widthStr},className:n.default.focusBorder}),s.createElement("div",{style:{width:t.widthStr},className:n.default.wrapper},s.createElement("div",{style:{paddingBottom:t.ratioStr},className:n.default.container},a)),e)}}var u=d;t.default=u},66514:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.getGifDimensions=W,t.giphyResultsToGifs=K,t.default=t.Component=void 0;var s=i(a(19976)),n=i(a(52954)),o=a(39329),l=r(a(2784)),d=a(28703),u=a(20485),c=r(a(96452)),h=i(a(93601)),f=i(a(6660)),p=a(52127),m=i(a(97586)),_=i(a(87276)),v=i(a(61180)),g=i(a(44343)),E=i(a(17957)),y=i(a(40210)),S=i(a(99911)),C=i(a(72259)),T=i(a(87713)),M=i(a(6155)),b=i(a(38185)),P=i(a(74185)),A=i(a(17744));function I(){var e=(0,s.default)(["gif_search:searchTenor fetch failed with an error : ",""]);return I=function(){return e},e}function O(){var e=(0,s.default)(["gif_search:searchGiphy fetch failed with an error : ",""]);return O=function(){return e},e}function N(){var e=(0,s.default)(["gif_search: All the gifs were skipped, check if there is a change in giphys response"]);return N=function(){return e},e}function w(){var e=(0,s.default)(["gif_search:getGifDimensions original does not have valid dimensions"]);return w=function(){return e},e}function D(){var e=(0,s.default)(["gif_search:getGifDimensions fullContent does not have valid dimensions'"]);return D=function(){return e},e}var R="3o85xmWDYKgihhIKSA",L="DLAQBEYLJJIM",k={giphy:y.default.GIF_SEARCH_PROVIDER.GIPHY,tenor:y.default.GIF_SEARCH_PROVIDER.TENOR},x={giphy:d.VideoMessageAttribution.GIPHY,tenor:d.VideoMessageAttribution.TENOR},F=new T.default((function(e){switch((0,p.gifProvider)()){case"giphy":return function(){return H.apply(this,arguments)}(e);case"tenor":return function(){return Y.apply(this,arguments)}(e);default:throw new Error("Unrecognized provider ".concat((0,p.gifProvider)()))}}),{maxCached:6,maxAge:36e4,shouldCache:e=>!(!e||!e.length)}),G="UP",U="DOWN",B="LEFT",j="RIGHT";class V extends l.Component{constructor(e){super(e),this._scrollTop=0,this._didSendGif=!1,this._onlineRestarter=null,this._pendingQuery=null,this._refGifs={},this._refGifsBySectionId={},this.setRefGif=(e,t)=>{var[a,r]=e;t?(this._refGifs[a]=t,this._refGifsBySectionId[r]=t):(delete this._refGifs[a],delete this._refGifsBySectionId[r])},this._setRefGifCache=new M.default(this.setRefGif),this.onSend=e=>{var t=k[e.attribution];new y.default.GifFromProviderSent({gifSearchProvider:t}).commit(),e.trending||"number"!=typeof e.rank||new y.default.GifSearchResultTapped({gifSearchProvider:t,rank:e.rank}).commit(),this._didSendGif=!0,this.props.onGif(e.url,x[e.attribution])},this.animateGif=()=>{var e=this._animatingRow,t=this._scrollTop+p.GAP_SIZE;this._starredGifs&&(t-=this._starredGifs.getClientHeight()||0);var a=Math.round(t/(p.TARGET_GIF_HEIGHT+p.GAP_SIZE)),r=this.state.gifRows[a];if(r&&r.gifs.length&&r!==e){if(this._animatingRow=r,e)for(var i=0;i<e.gifs.length;i++)this._setGifAnimating(e.gifs[i].gifId,!1);for(var s=0;s<r.gifs.length;s++)this._setGifAnimating(r.gifs[s].gifId,!0)}[a+1,a-1].forEach((e=>{if(this.state.gifRows[e])for(var t=this.state.gifRows[e].gifs,a=0;a<t.length;a++)this._setGifAnimating(t[a].gifId,!1)}))},this._searchForAndSetGifs=()=>{var e=k[(0,p.gifProvider)()],t=this.props.searchText||this.props.selectedSectionId||v.default.TRENDING,a=F.getOrRun(t);a=a.then(),this._pendingQuery=a,a.checkpoint(this.props.rejectOnUnmount()).then((t=>{if(t&&0===t.length&&new y.default.GifSearchNoResults({gifSearchProvider:e}).commit(),a===this._pendingQuery&&(this._pendingQuery=null,t)){var r=this._containerDom&&this._containerDom.clientWidth||0;r-=2*p.GAP_SIZE,this._resetScroll=!0,this._animateTimer.debounce(0),this.setState({gifRows:z(t,r),width:r})}})).catchTypes(c.Unmount,Promise.CancellationError,(()=>{}))},this._onStarredGifsMount=e=>{this._starredGifs=e},this._onContainerMount=e=>{this._containerDom=e,null!=e&&e&&this._resetScroll&&(e.scrollTop=0)},this.initSelection=(e=!1)=>{this._starredGifs&&this._starredGifs.hasGifs()&&!e?this._starredGifs&&this._starredGifs.component&&this._starredGifs.component.initSelection():(this.selection=[0,0],this._focusGif())},this._getNewColPostion=e=>{var{gifRows:t}=this.state,[a,r,i,s,n]=[this.selection[0],this.selection[1],t[Math.min(this.selection[0],t.length-1)].gifs.length-1,t[Math.min(this.selection[0]+1,t.length-1)].gifs.length-1,t[Math.max(this.selection[0]-1,0)].gifs.length-1],o=r/i;switch(e){case G:var l=Math.floor(n*o);return[Math.max(a-1,0),l];case U:return[a+1,Math.floor(s*o)]}return[0,0]},this.contains=e=>!!this._containerDom&&this._containerDom.contains(e),this.getStarredGifsRef=()=>this._starredGifs,this._handleArrowKeys=(e,t)=>{var{gifRows:a}=this.state,[r,i]=[this.selection[0],this.selection[1]];switch(t){case G:if(0===r)return;this.selection=this._getNewColPostion(G);break;case U:if(r===a.length-1)return;this.selection=this._getNewColPostion(U);break;case B:if(0===i&&0===r)return;this.selection=0===i?this._getNewSelection(r-1,a[r-1].gifs.length-1):this._getNewSelection(r,i-1);break;case j:a[r]?a[r].gifs.length===i+1?this.selection=this._getNewSelection(r+1,0):this.selection=this._getNewSelection(r,i+1):this.selection=[0,0]}this.stopEvent(e),this._focusGif()},this.stopEvent=e=>{e&&(e.preventDefault(),e.stopPropagation())},this.restoreFocus=()=>{},this._focusGif=()=>{var e=this.selection.join("_"),t=this._refGifsBySectionId[e];if(t){var a=t.messagePreviewRef;a&&(f.default.focus(a),this.props.scrollGifIntoViewIfNeeded(a))}},this._handleUpArrow=e=>{this._handleArrowKeys(e,G)},this.handleDownArrow=e=>{this._handleArrowKeys(e,U)},this.handleLeftArrow=e=>{this._handleArrowKeys(e,B)},this.handleRightArrow=e=>{this._handleArrowKeys(e,j)},this.handleEnter=e=>{this.stopEvent(e);var{gifRows:t}=this.state,[a,r]=[this.selection[0],this.selection[1],this.selection[2]];this.onSend(t[a].gifs[r])},this._scrollTop=0,this._animatingRow=null,this._containerDom=null,this._didSendGif=!1,this.state={gifRows:[],width:0}}componentDidUpdate(e){e.searchText!==this.props.searchText&&this._scheduleQuery()}shouldComponentUpdate(e,t){return e.onGif!==this.props.onGif||t.gifRows!==this.state.gifRows||e.selectedSectionId!==this.props.selectedSectionId||e.searchText!==this.props.searchText}componentDidMount(){this._searchTimer=new o.ShiftTimer(this._searchForAndSetGifs),this._animateTimer=new o.ShiftTimer(this.animateGif),this._onlineRestarter=Promise.loop((()=>(0,A.default)(S.default,"change:online",(()=>S.default.online)).then((()=>this._scheduleQuery())))).cancellable(),this._onlineRestarter.catchType(Promise.CancellationError,(()=>{})),this._searchForAndSetGifs(),new y.default.GifSearchSessionStarted({gifSearchProvider:k[(0,p.gifProvider)()]}).commit()}componentWillUnmount(){this._animateTimer.cancel(),this._searchTimer.cancel(),this._onlineRestarter&&this._onlineRestarter.cancel(),this._didSendGif||new y.default.GifSearchCancelled({gifSearchProvider:k[(0,p.gifProvider)()]}).commit()}_scheduleQuery(){this._searchTimer.debounceAndCap(200,2e3)}animateOnScroll(e){this._scrollTop=e.scrollTop,this._animateTimer.debounce(200)}_setGifAnimating(e,t=!1){var a=this._refGifs[String(e)];a&&a.setShouldAnimate(t)}_getNewSelection(e,t){return[Math.max(0,e),Math.max(0,t)]}render(){var{gifRows:e}=this.state,t={up:this._handleUpArrow,down:this.handleDownArrow,left:this.handleLeftArrow,right:this.handleRightArrow,enter:this.handleEnter},a=e.map(((e,t)=>{var a=e.gifs.map(((e,a)=>l.createElement(m.default,{key:e.gifId,ref:this._setRefGifCache.getRefSetter(["".concat(e.gifId),"".concat(t,"_").concat(a)]),gif:e,onSend:this.onSend}))),r=null;return e.blankStr&&(r=l.createElement("div",{className:_.default.blank,style:{flexBasis:e.blankStr}})),l.createElement("div",{key:t,className:_.default.row},a,r)})),r=this.props.selectedSectionId!==v.default.FAVORITES&&(0===a.length?l.createElement("div",{className:_.default.noResults},this.props.searchText?l.createElement(u.SearchWithoutKeyword,null):l.createElement(u.Loading,null)):l.createElement(g.default,{className:_.default.section,handlers:t},a)),i=!this.props.searchText&&this.props.selectedSectionId===v.default.FAVORITES&&l.createElement(b.default,{onSend:this.onSend,ref:this._onStarredGifsMount});return l.createElement("div",{className:_.default.searchContainer,ref:this._onContainerMount},r,i)}}function H(){return(H=(0,n.default)((function*(e){var t,a=e===v.default.TRENDING;if(a)t=P.default.build("https://api.giphy.com/v1/gifs/trending",{api_key:R,limit:100,rating:"pg-13"});else{var r=E.default.getLocale(),i="zh-HK"===r?"zh-TW":r,s="";p.GIPHY_LOCALES.includes(i)&&(s=i),t=P.default.build("https://api.giphy.com/v1/gifs/search",{q:e,api_key:R,limit:100,rating:"pg-13",lang:s})}try{var n=yield(0,h.default)(t);if(!n.ok)throw new Error(n.statusText);return K(yield n.json(),a)}catch(e){return __LOG__(4,void 0,new Error)(O(),e),null}}))).apply(this,arguments)}function W(e,t){if(e){var a=parseInt(e.width,10),r=parseInt(e.height,10);if(a&&r)return{width:a,height:r};__LOG__(4,void 0,new Error,!0)(D()),SEND_LOGS("gif_search:getGifDimensions fullContent does not have valid dimensions")}if(t){var i=parseInt(t.width,10),s=parseInt(t.height,10);if(i&&s)return{width:p.TARGET_GIF_HEIGHT*i/s,height:p.TARGET_GIF_HEIGHT};__LOG__(4,void 0,new Error,!0)(w()),SEND_LOGS("gif_search:getGifDimensions original does not have valid dimensions")}return{width:p.TARGET_GIF_HEIGHT,height:p.TARGET_GIF_HEIGHT}}function K(e,t){if(!e||!Array.isArray(e.data))return[];if(!e.data.length&&t)return[];for(var a=e.data,r=[],i=0;i<a.length;i++){var s=a[i],n=s&&s.images;if(n){var{original:o,preview:l,downsized_small:d,preview_webp:u,preview_gif:c}=n;if(d){var h=d.mp4;if(h){var{width:f,height:m}=W(d,o);r.push(new p.GifInfo(r.length,h,parseInt(d.mp4_size,10),l&&l.mp4||void 0,u&&u.url||c&&c.url||void 0,Math.round(f*p.TARGET_GIF_HEIGHT/m),p.GIPHY,t))}}}}return 0===r.length&&a.length>0&&(__LOG__(4,void 0,new Error,!0)(N()),SEND_LOGS("gif_search: All the gifs were skipped, check if there is a change in giphys response")),r}function Y(){return(Y=(0,n.default)((function*(e){var t,a=e===v.default.TRENDING,r=E.default.lng().replace("-","_");t=a?P.default.build("https://wa.tenor.co/v1/trending",{key:L,limit:50,contentfilter:"high",locale:r}):P.default.build("https://wa.tenor.co/v1/search",{q:e,key:L,limit:50,contentfilter:"high",locale:r});try{var i=yield(0,h.default)(t);if(!i.ok)throw new Error(i.statusText);return q(yield i.json())}catch(e){return __LOG__(4,void 0,new Error)(I(),e),null}}))).apply(this,arguments)}function q(e,t=!1){if(!e||!Array.isArray(e.results))return[];for(var a=e.results,r=[],i=0;i<a.length;i++){var s=a[i];if(s&&s.media&&s.media[0]){var{tinymp4:n,previewmp4:o,previewgif:l}=s.media[0];if(n){var[d,u]=n.dims;r.push(new p.GifInfo(r.length,n.url,n.size,o&&o.url||void 0,l&&l.url||void 0,Math.round(d*p.TARGET_GIF_HEIGHT/u),p.TENOR,t))}}}return r}function z(e,t){for(var a=[],r=.9*t,i=e,s=null,n=.05;n<1&&i.length;n+=.05){i.sort(((e,t)=>{var a=e.rank-t.rank;return Math.abs(a)>8?a:t.width-e.width}));for(var o=(1+n)*t,l=[],d=[],u=0;u<i.length;u++){for(var c=i[u],h=!1,f=Math.min(o-c.width,r),m=0;!h&&m<l.length;m++)l[m]<f&&(l[m]+=c.width+p.GAP_SIZE,d[m].push(c),h=!0);h||(l.push(c.width),d.push([c]))}if(1===d.length){i=[];var _=t-l[0]-p.GAP_SIZE;s={gifs:d[0],blankStr:_>0?"".concat(_,"px"):void 0}}else{i=[];for(var v=0;v<d.length;v++)l[v]>r?a.push(d[v]):i.push.apply(i,d[v])}}a.forEach((e=>e.sort(((e,t)=>e.rank-t.rank)))),a.sort(((e,t)=>e[0].rank-t[0].rank));var g=a.map((e=>({gifs:e,blankStr:void 0})));return s&&g.push(s),g}var Q=V;t.Component=Q;var J=(0,C.default)(V);t.default=class extends J{constructor(...e){super(...e),this.initSelection=e=>{this.getComponent().initSelection(e)},this.animateOnScroll=e=>{this.getComponent().animateOnScroll(e)},this.getStarredGifsRef=()=>this.getComponent().getStarredGifsRef()}contains(e){return this.getComponent().contains(e)}}},61180:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.ORDERED_TAB_SECTION_IDS=t.default=void 0;var i=r(a(75705)),s={FAVORITES:"FAVORITES",[i.default.TRENDING]:i.default.TRENDING,[i.default.HAHA]:i.default.HAHA,[i.default.SAD]:i.default.SAD,[i.default.LOVE]:i.default.LOVE,[i.default.REACTIONS]:i.default.REACTIONS,[i.default.SPORTS]:i.default.SPORTS,[i.default.TV]:i.default.TV},n=s;t.default=n;var o={[s.FAVORITES]:s.FAVORITES,[s.TRENDING]:s.TRENDING,[s.HAHA]:s.HAHA,[s.SAD]:s.SAD,[s.LOVE]:s.LOVE,[s.REACTIONS]:s.REACTIONS,[s.SPORTS]:s.SPORTS,[s.TV]:s.TV},l=[o.FAVORITES,o.TRENDING,o.HAHA,o.SAD,o.LOVE,o.REACTIONS,o.SPORTS,o.TV];t.ORDERED_TAB_SECTION_IDS=l},3815:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.GifPanel=void 0;var s=i(a(45455)),n=i(a(12436)),o=i(a(84573)),l=r(a(2784)),d=a(12097),u=r(a(62436)),c=a(52127),h=i(a(66514)),f=r(a(61180)),p=i(a(18120)),m=a(13414),_=i(a(44343)),v=i(a(69132)),g=i(a(408)),E=i(a(17957)),y=i(a(20642)),S=i(a(40210)),C=i(a(61941)),T=i(a(76097)),M=i(a(78119)),b=i(a(74824));class P extends l.PureComponent{constructor(e){super(e),this._refMenuTabs=new Map,this.getElement=()=>this._refContainer,this._setRefContainer=e=>{this._refContainer=e},this._lastScrollTop=0,this._fastScroll=!1,this._lastClickTime=0,this._setGifPanelRef=e=>{this._gifPanelRef=e},this._sectionIds=f.ORDERED_TAB_SECTION_IDS,this.handleScroll=(0,n.default)((()=>{if(null==this.state.selectedSectionId&&this.state.searchText&&this.scrollContainer&&this._gifPanelRef)this._gifPanelRef.animateOnScroll(this.scrollContainer);else if(!(Date.now()-this._lastClickTime<d.SCROLL_CLICK_TIME_GAP)){var e={};if(this.state.isPreview&&(e.isPreview=!1),this.scrollContainer){var t=this.scrollContainer,a=t.scrollTop,r=a<=0;r!==this.state.scrolledToTop&&(e.scrolledToTop=r);var i=this._lastScrollTop-a,n=Math.abs(i)>d.INPUT_BAR_SCROLL_SENSITIVITY;this._fastScroll=Math.abs(i)>d.INPUT_BAR_SCROLL_FAST,i<0?this.state.showSearchInput&&(a>d.INPUT_HIDE_POINT&&n||this._lastScrollTop<d.INPUT_HIDE_POINT&&a>=d.INPUT_HIDE_POINT)&&(e.showSearchInput=!1):this.state.showSearchInput||(n||a<d.INPUT_SHOW_POINT)&&(e.showSearchInput=!0),this._gifPanelRef&&this._gifPanelRef.animateOnScroll(t),this._lastScrollTop=a,(0,s.default)(e)||this.setState(e)}}}),d.SCROLL_THROTTLE_TIME),this._setRefSearchInput=e=>{this._searchInput=e},this.restoreFocus=e=>{this.focusSearchInput(e)},this.onRotateFocus=e=>{this.stopEvent(e),this._searchInputHasFocus()?this.props.onFocusRelease&&this.props.onFocusRelease():this.focusSearchInput()},this.stopEvent=e=>{e&&(e.preventDefault(),e.stopPropagation())},this.scrollGifIntoViewIfNeeded=e=>{this.scrollContainer&&e.offsetTop-this.scrollContainer.scrollTop<d.INPUT_BAR_TOTAL_HEIGHT&&u.scrollIntoView(e,!0,this.scrollContainer)},this._searchInputHasFocus=()=>!!this._searchInput&&this._searchInput.hasFocus(),this.focusSearchInput=e=>{if(!this._searchInput)return this._fastScroll=!0,void this.setState({showSearchInput:!0},(()=>this.focusSearchInput(!0)));this._searchInput.focus(e)},this._onGifSearchDown=e=>{this.stopEvent(e),this._gifPanelRef&&this._gifPanelRef.initSelection()},this._getSearchBox=()=>{var e=null;this.state.showSearchInput&&(e=l.createElement(T.default,{label:E.default.t(1228,{service:c.BRAND_NAMES[(0,c.gifProvider)()]}),onChange:this.onSearch,onUpKey:this._handleFocusUp,onDownKey:this._onGifSearchDown,ref:this._setRefSearchInput,shadow:!this.state.scrolledToTop,tabFocused:this.state.tabFocused,value:this.state.searchText||""}));var t=this._fastScroll?"emoji-search-slide-away-fast":"emoji-search-slide-away";return l.createElement(b.default,{transitionName:t},e)},this.onSearch=(e,t)=>{this.stopEvent(t),null==this.state.searchText&&(this._scrollTopBeforeSearch=this.scrollContainer&&this.scrollContainer.scrollTop),this.props.onChange&&this.props.onChange(e,t),this.setState({searchText:e,tabFocused:!1})},this.preventBlur=e=>{this.stopEvent(e),this.restoreFocus()},this._handleParentContainerUp=e=>{var t,a=e&&e.nativeEvent.target,r=null===(t=this._gifPanelRef)||void 0===t?void 0:t.getStarredGifsRef(),i=a instanceof HTMLElement&&(null==r?void 0:r.isStarredGif(a)),s=a instanceof HTMLElement&&!!this._gifPanelRef&&this._gifPanelRef.contains(a);i?(this.focusSearchInput(),this.stopEvent(e)):s&&(null==r?void 0:r.hasGifs())?(this._gifPanelRef&&this._gifPanelRef.initSelection(!1),this.stopEvent(e)):s&&(this.focusSearchInput(),this.stopEvent(e))},this.handleDownArrow=e=>{var t,a=e&&e.nativeEvent.target,r=null===(t=this._gifPanelRef)||void 0===t?void 0:t.getStarredGifsRef();a instanceof HTMLElement&&(null==r?void 0:r.isStarredGif(a))?(this._gifPanelRef&&this._gifPanelRef.initSelection(!0),this.stopEvent(e)):a instanceof Node&&this._gifPanelRef&&this._gifPanelRef.contains(a)&&(this._gifPanelRef&&this._gifPanelRef.initSelection(!1),this.stopEvent(e))},this._handleTabKey=e=>{if(e.preventDefault(),e.stopPropagation(),this._searchInput)return this._searchInput.hasFocus()?void(this.props.onFocusNext&&this.props.onFocusNext()):this.focusSearchInput()},this._handleShiftTabKey=e=>{if(e.preventDefault(),e.stopPropagation(),this._searchInput)return this._searchInput.hasFocus()?void(this.props.onFocusPrev&&this.props.onFocusPrev()):this.focusSearchInput()},this._handleFocusUp=()=>{var e,t,a=null!==(e=this.state.selectedSectionId)&&void 0!==e?e:this._sectionIds[0];null===(t=this._refMenuTabs.get(a))||void 0===t||t.focus(),this.setState({focusedTabIndex:this._sectionIds.indexOf(this.state.selectedSectionId)})},this._handleFocusEnter=()=>{var e=this._sectionIds[this.state.focusedTabIndex];this.setState({focusedTabIndex:-1}),this._handleMenuTabClick(e)},this._handleMenuFocusNext=()=>{var e,t=(this.state.focusedTabIndex+1)%this._sectionIds.length,a=this._sectionIds[t];null===(e=this._refMenuTabs.get(a))||void 0===e||e.focus(),this.setState({focusedTabIndex:t})},this._handleMenuFocusPrev=()=>{var e,t=(this._sectionIds.length+this.state.focusedTabIndex-1)%this._sectionIds.length,a=this._sectionIds[t];null===(e=this._refMenuTabs.get(a))||void 0===e||e.focus(),this.setState({focusedTabIndex:t})},this._handleFocusLeave=()=>{this.restoreFocus(),this.setState({focusedTabIndex:-1})},this._handleMenuTabClick=e=>{var t,a,r;e===f.default.FAVORITES?this.setState({showSearchInput:!0,selectedSectionId:e,searchText:null,tabFocused:!0}):this.setState({showSearchInput:!0,selectedSectionId:e,searchText:e,tabFocused:!0}),null===(t=(a=this.props).onChange)||void 0===t||t.call(a,""),null===(r=this._searchInput)||void 0===r||r.focus(!1)},this._renderGifTab=(e,t)=>l.createElement(M.default,{key:e,onClick:this._handleMenuTabClick,sectionId:e,selected:t,showFocusIndicator:-1!==this.state.focusedTabIndex,onRef:t=>{this._refMenuTabs.set(e,t)}});var t=(0,o.default)(this.props.displayCache||{},{scrollTop:0,showSearchInput:!0});p.default.supportsFeature(p.default.F.STARRED_GIFS)||(this._sectionIds=this._sectionIds.filter((e=>e!==f.default.FAVORITES))),this.state={isPreview:!t.scrollTop,scrolledToTop:0===t.scrollTop,searchText:this.props.defaultSearchText||null,searchResults:null,showSearchInput:t.showSearchInput,selectedSectionId:t.selectedSectionId||f.default.TRENDING,tabFocused:!1,focusedTabIndex:-1}}componentDidMount(){this._lastClickTime=Date.now();var e=this.props.displayCache&&this.props.displayCache.scrollTop;this.scrollContainer&&null!=e&&0!==e&&(this.scrollContainer.scrollTop=e),this.props.listeners.uiIdle((()=>{this.restoreFocus(),new S.default.WebcEmojiOpen({webcEmojiOpenTab:"GIF"}).commit(),this.setState({isPreview:!1})}))}componentWillUnmount(){this.props.onDisplayCache({scrollTop:this.scrollContainer?this.scrollContainer.scrollTop:0,showSearchInput:this.state.showSearchInput,selectedSectionId:this.state.selectedSectionId}),this.handleScroll.cancel()}componentDidUpdate(e,t){if(t.searchText!==this.state.searchText){if(!this.scrollContainer)return;this.state.searchText?this.scrollContainer.scrollTop=0:null!=this._scrollTopBeforeSearch&&0!==this._scrollTopBeforeSearch&&(this.scrollContainer.scrollTop=this._scrollTopBeforeSearch)}}render(){var e,t=this._getSearchBox(),a=(this.state.searchText||"").replace(/^\s+/,"");return l.createElement(_.default,{onRef:this._setRefContainer,handlers:{tab:this._handleTabKey,"shift+tab":this._handleShiftTabKey,up:this._handleParentContainerUp,down:this.handleDownArrow}},l.createElement(v.default,{selectedSectionId:this.state.selectedSectionId,sectionIds:this._sectionIds,renderSectionTab:this._renderGifTab,showTabHighlight:!(null===(e=this.props.defaultSearchText)||void 0===e?void 0:e.trim()),onFocusPrev:this._handleMenuFocusPrev,onFocusNext:this._handleMenuFocusNext,onEnter:this._handleFocusEnter,onFocusLeave:this._handleFocusLeave}),l.createElement("div",{className:g.default.gifPanel},l.createElement("div",{className:g.default.bodyContainer,onMouseDown:this.preventBlur},t,l.createElement("div",{className:g.default.panelBody,onScroll:this.handleScroll,ref:(0,m.GetRef)((e=>{this.scrollContainer=e}))},l.createElement(h.default,{ref:this._setGifPanelRef,onGif:(0,C.default)(this.props.onGif,"this.props.onGif"),searchText:a,scrollGifIntoViewIfNeeded:this.scrollGifIntoViewIfNeeded,selectedSectionId:this.state.selectedSectionId})))))}}t.GifPanel=P;var A=(0,y.default)(P);t.default=class extends A{focusSearchInput(e){this.getComponent().focusSearchInput(e)}restoreFocus(e){this.getComponent().restoreFocus(e)}}},20692:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(79711)),l=i(a(9386)),d=a(28703),u=a(52127),c=i(a(97586)),h=i(a(17957)),f=i(a(20642)),p=a(96645),m=r(a(68084)),_=i(a(40210)),v=i(a(72852)),g=i(a(47577)),E=i(a(82631));class y extends n.Component{constructor(...e){super(...e),this.setRefGif=e=>{this._gifRef=e},this._getGifProvider=()=>{switch(this.props.msg.gifAttribution){case d.VideoMessageAttribution.GIPHY:return u.GIPHY;case d.VideoMessageAttribution.TENOR:return u.TENOR;default:return""}},this.handleClick=e=>{switch(e.stopPropagation(),this.props.msg.mediaData.mediaStage){case p.MEDIA_DATA_STAGE.NEED_POKE:this.props.msg.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:_.default.WEBC_RMR_REASON_CODE.MSG_CLICK,isUserInitiated:!0});break;case p.MEDIA_DATA_STAGE.FETCHING:this.props.msg.cancelDownload();break;case p.MEDIA_DATA_STAGE.UPLOADING:this.props.msg.cancelUpload();break;case p.MEDIA_DATA_STAGE.ERROR_MISSING:o.default.openModal(n.createElement(l.default,{title:h.default.t(981),onOK:()=>o.default.closeModal(),okText:h.default.t(1709)},h.default.t(980)))}},this.onUnstarMsg=()=>{var{msg:e}=this.props;v.default.remove(e)}}get gifRef(){return this._gifRef}animateGif(){this.props.listeners.uiIdle((()=>{this._gifRef&&this._gifRef.setShouldAnimate(!0)}))}componentDidMount(){var e=this.props.msg;this.props.listeners.add(e,"change:mediaData.mediaStage",(()=>{this.forceUpdate()})),this.props.listeners.uiIdle((()=>{e.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:_.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1})})),this.animateGif()}componentDidUpdate(){this.animateGif()}render(){var e=this.props.msg,t=e.mediaData,a=new u.GifInfo(void 0,t.renderableUrl,void 0,void 0,void 0,Math.round(t.aspectRatio*u.TARGET_GIF_HEIGHT),this._getGifProvider(),!1);if(t.mediaStage===p.MEDIA_DATA_STAGE.RESOLVED)return n.createElement(c.default,{key:e.filehash,ref:this.setRefGif,gif:a,onSend:this.props.onSend,isStarred:!0,onUnstarMsg:this.onUnstarMsg});if(t.preview){var r,i=t.preview.url();switch(t.mediaStage){case p.MEDIA_DATA_STAGE.ERROR_MISSING:break;case p.MEDIA_DATA_STAGE.NEED_POKE:r=n.createElement(m.Download,null);break;case p.MEDIA_DATA_STAGE.FETCHING:case p.MEDIA_DATA_STAGE.UPLOADING:r=n.createElement(m.PendingCancel,null);break;default:r=n.createElement(m.Pending,null)}var o=(0,s.default)(g.default.thumb,{[g.default.blur]:t.mediaStage===p.MEDIA_DATA_STAGE.ERROR_MISSING}),l=n.createElement("div",{className:o,style:{backgroundImage:"url(".concat(i,")"),height:"".concat(u.TARGET_GIF_HEIGHT,"px")}});return n.createElement("div",{className:g.default.container,style:{flexBasis:a.widthStr},key:e.filehash},n.createElement("div",{className:g.default.wrapper,style:{width:a.widthStr},onClick:this.handleClick},n.createElement("div",{className:g.default.innerWrapper,style:{paddingBottom:a.ratioStr}},r,l)),n.createElement("button",{className:g.default.starIcon,onClick:this.onUnstarMsg},n.createElement(E.default,{name:"star"})))}return null}}var S=(0,f.default)(y);t.default=S},38185:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(84636)),n=i(a(72779)),o=r(a(2784)),l=i(a(6660)),d=a(52127),u=i(a(44343)),c=i(a(20642)),h=i(a(72852)),f=i(a(20692)),p=i(a(19893)),m=i(a(82631)),_="RIGHT",v="LEFT";class g extends o.Component{constructor(...e){super(...e),this.state={curIndex:0,direction:_},this._msgLength=0,this._starredPreviewRef={},this._selectionIndex=0,this._onSlideLeft=()=>this._hasLeft()?new Promise((e=>{this.setState({curIndex:this.state.curIndex-1,direction:v},(()=>{e(!0)}))})):Promise.resolve(!1),this._onSlideRight=()=>this._hasRight()?new Promise((e=>{this.setState({curIndex:this.state.curIndex+1,direction:_},(()=>{e(!0)}))})):Promise.resolve(!1),this.setRef=e=>{this._ref=e},this._hasRight=()=>this.state.curIndex+4<this._msgLength,this._hasLeft=()=>this.state.curIndex>0,this.handleLeftArrow=e=>{this._onSlideLeft().then((t=>{this._selectionIndex=t?this._selectionIndex:this._selectionIndex-1,this._selectionIndex<0?this.stopEvent(e):(this.stopEvent(e),this._focusStarredGif())}))},this.handleRightArrow=e=>{this._onSlideRight().then((t=>{this._selectionIndex=t?this._selectionIndex-1:this._selectionIndex;var a=Object.keys(this._starredPreviewRef).length;if(this._selectionIndex<3&&this._selectionIndex<a-1)this._selectionIndex=this._selectionIndex+1;else{if(!this._hasRight())return void this.stopEvent(e);this._selectionIndex=3}this.stopEvent(e),this._focusStarredGif()}))},this.stopEvent=e=>{e&&(e.preventDefault(),e.stopPropagation())},this.handleEnter=e=>{this.stopEvent(e),this._starredPreviewRef[this._selectionIndex].component.gifRef.handleClick()},this._focusStarredGif=()=>{var e,t,a,r=null===(e=this._starredPreviewRef[this._selectionIndex])||void 0===e||null===(t=e.component)||void 0===t||null===(a=t.gifRef)||void 0===a?void 0:a.messagePreviewRef;r&&l.default.focus(r)},this.initSelection=()=>{this._selectionIndex=0,this._focusStarredGif()}}componentDidMount(){var e=h.default;this.props.listeners.add(e,"add remove reset",(()=>{this.forceUpdate()})),e.isSynced||e.sync()}getClientHeight(){return this._ref&&this._ref.clientHeight}hasGifs(){return Boolean(this._ref&&this._ref.childNodes.length)}isStarredGif(e){return!!e&&(!!this._ref&&this._ref.contains(e))}render(){var e={left:this.handleLeftArrow,right:this.handleRightArrow,enter:this.handleEnter},t=(0,s.default)(h.default.toArray(),"filehash");if(this._msgLength=t.length,0===t.length)return o.createElement("div",null);if(t.length<=4){var a=0,r=t.map(((e,t)=>(a+=Math.round(e.mediaData.aspectRatio*d.TARGET_GIF_HEIGHT),o.createElement(f.default,{key:e.filehash,ref:e=>this._starredPreviewRef[t]=e,msg:e,onSend:this.props.onSend}))));return a+=(r.length-1)*d.GAP_SIZE,o.createElement(u.default,{className:p.default.section,handlers:e},o.createElement("div",{ref:this.setRef,className:p.default.searchRow,style:{maxWidth:"".concat(a,"px")}},r))}var i=this._hasLeft(),l=this._hasRight(),c=i?this._onSlideLeft:null,_=l?this._onSlideRight:null,v=(0,n.default)(p.default.pager,p.default.pagerLeft,{[p.default.pagerDisabled]:!i}),g=(0,n.default)(p.default.pager,p.default.pagerRight,{[p.default.pagerDisabled]:!l}),E=o.createElement("div",{className:v,onClick:c},o.createElement(m.default,{name:"chevron-left-alt"})),y=o.createElement("div",{className:g,onClick:_},o.createElement(m.default,{name:"chevron-right-alt"})),S=t.slice(this.state.curIndex,this.state.curIndex+4).map(((e,t)=>o.createElement(f.default,{key:e.filehash,ref:e=>this._starredPreviewRef[t]=e,msg:e,onSend:this.props.onSend})));return o.createElement("div",{className:p.default.section},o.createElement(u.default,{onRef:this.setRef,className:p.default.searchRow,handlers:e},E,o.createElement("div",{className:p.default.body},S),y))}}var E=(0,c.default)(g);t.default=class extends E{getClientHeight(){return this.getComponent().getClientHeight()}hasGifs(){return this.getComponent().hasGifs()}isStarredGif(e){return this.getComponent().isStarredGif(e)}}},55547:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(72779)),o=r(a(45484));class l extends s.PureComponent{constructor(...e){super(...e),this._handleMouseDown=e=>{e.stopPropagation()}}render(){return s.createElement("div",{className:(0,n.default)(o.default.container,this.props.className),onMouseDown:this._handleMouseDown},this.props.children)}}t.default=l},69132:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(55547)),o=r(a(91200)),l=r(a(44343)),d=r(a(71449));class u extends s.Component{render(){var e,t,a=-1,r=this.props.sectionIds.map(((e,t)=>{var r=!1;return e===this.props.selectedSectionId&&(this.props.showTabHighlight?(a=t,r=!0):a=-1),this.props.renderSectionTab(e,r)}));return s.createElement(l.default,{component:"div",handlers:(0,o.default)({"shift+tab":this.props.onFocusPrev,tab:this.props.onFocusNext,down:this.props.onFocusLeave,left:this.props.onFocusPrev,right:this.props.onFocusNext,enter:this.props.onEnter,space:this.props.onEnter})},s.createElement(n.default,null,s.createElement(d.default,{numTabs:this.props.sectionIds.length,selectedTabIndex:a,animate:null===(e=null===(t=this.props)||void 0===t?void 0:t.showTabHighlight)||void 0===e||e}),r))}}t.default=u},59591:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.THEMES=void 0;var s=i(a(18149)),n=i(a(72779)),o=r(a(2784)),l=i(a(6660)),d=i(a(66049)),u={CAROUSEL:"CAROUSEL",CAROUSEL_END:"CAROUSEL_END",MENU:"MENU"};t.THEMES=u;class c extends o.PureComponent{constructor(...e){super(...e),this._setRefTab=e=>{var t,a;this._refTab=e,null===(t=(a=this.props).onRef)||void 0===t||t.call(a,e)},this._handleClick=e=>{this.props.onClick&&this.props.onClick(this.props.sectionId,e)}}focus(){this._refTab&&(this.hasFocus()||l.default.focus(this._refTab))}hasFocus(){return!!document.activeElement&&this._refTab===document.activeElement}_getStyle(e){return(0,s.default)(this._style,e)||(this._style=e),this._style}render(){var{theme:e,title:t}=this.props;return o.createElement("div",{ref:this._setRefTab,role:"button",className:(0,n.default)(d.default.tab,{[d.default.menu]:e===u.MENU,[d.default.carousel]:e===u.CAROUSEL||e===u.CAROUSEL_END,[d.default.carouselEnd]:e===u.CAROUSEL_END,[d.default.selected]:this.props.selected,[d.default.highlightOnFocus]:this.props.showFocusIndicator}),onClick:this._handleClick,style:this._getStyle({width:this.props.width,transform:this.props.transform}),title:t,tabIndex:"0"},this.props.children)}}t.default=c},71449:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=o.default.isRTL()?-1:1,a=-1===e.selectedTabIndex?-2:e.selectedTabIndex,r={width:"".concat(100/e.numTabs,"%"),transform:"translateX(".concat(100*a*t,"%)")};return s.createElement("div",{className:(0,n.default)(l.default.menuTabsMarker,{[l.default.hide]:e.hide,[l.default.animate]:e.animate}),style:r})};var s=i(a(2784)),n=r(a(72779)),o=r(a(17957)),l=r(a(66881))},76097:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.HEIGHT=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(32960)),l=i(a(50935)),d=i(a(38147)),u=i(a(6660)),c=i(a(44343)),h=i(a(17957)),f=i(a(73527)),p=a(66615),m=i(a(82631)),_=i(a(77626));t.HEIGHT=56;class v extends n.PureComponent{constructor(...e){super(...e),this.state={value:this.props.value||"",tabFocused:!!this.props.tabFocused},this._handleChange=e=>{var t=e.target.value;this.setState({value:t}),this.props.onChange&&this.props.onChange(t,e)},this._handleClearButtonClick=e=>{this.setState({value:""}),this.props.onChange&&this.props.onChange("",e)},this._handleUpKey=e=>{e.stopPropagation(),e.preventDefault(),this.props.onUpKey&&this.props.onUpKey(e)},this._handleDownKey=e=>{e.stopPropagation(),e.preventDefault(),this.props.onDownKey&&this.props.onDownKey(e)},this._handleEnterKey=e=>{e.preventDefault(),e.stopPropagation(),this.props.onEnterKey&&this.props.onEnterKey(e)},this._handleFocus=()=>{this.focus()},this._setRefInput=e=>{this._refInput=e},this._setRefInputContainer=e=>{this._refInputContainer=e}}static getDerivedStateFromProps(e){return{value:e.value,tabFocused:e.tabFocused}}focus(e){this._refInput&&(this.hasFocus()||(u.default.focus(this._refInput),e&&d.default.indicateFocus(this._refInputContainer)))}hasFocus(){return!!document.activeElement&&this._refInput===document.activeElement}render(){var e=null;return this.state.value&&!this.props.tabFocused&&(e=n.createElement("button",{className:f.default.cancelIcon,onClick:this._handleClearButtonClick},n.createElement(m.default,{name:"x-alt-small"}))),n.createElement(c.default,{handlers:{enter:this._handleEnterKey,up:this._handleUpKey,down:this._handleDownKey},"data-tab":l.default.TAB_ORDERS.PANEL_SEARCH_INPUT,className:(0,s.default)(f.default.searchRow,{[f.default.ffFix]:_.default.isGecko,[f.default.rowShadow]:this.props.shadow}),key:"search-input",onFocus:this._handleFocus},n.createElement("label",{ref:this._setRefInputContainer,className:f.default.rowInput},n.createElement("div",{className:f.default.inputContainer},n.createElement("input",{"data-a8n":o.default.key("input-emoji-search"),ref:this._setRefInput,className:(0,s.default)(f.default.inputEmojiSearch,p.SELECTABLE_INPUT_CSS_CLASS),type:"text",role:"searchbox",dir:h.default.isRTL()?"rtl":"ltr",value:this.props.tabFocused?"":this.state.value,title:this.props.label,placeholder:this.props.label,onMouseDown:e=>{e.stopPropagation()},onChange:this._handleChange}),e)))}}t.default=v},65742:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DISP_LOCATION=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(6660)),l=i(a(18120)),d=i(a(25416)),u=i(a(20642)),c=i(a(23054)),h=r(a(76151)),f=i(a(45262)),p={COMPOSE_BOX:"COMPOSE_BOX",DROPDOWN:"DROPDOWN"};t.DISP_LOCATION=p;class m extends n.PureComponent{constructor(...e){super(...e),this._refDiv=n.createRef(),this.getElement=()=>this._refDiv.current,this.state={hasFetchedData:c.default.hasFetchedData(),hasStickers:c.default.length>0,menuShadow:!1,selectedStickerPackIndex:this._getInitialStickerPackIndex()},this._setRefEmptyContent=e=>{this._refEmptyContent=e},this._setRefContent=e=>{this._refContent=e},this._setRefMenu=e=>{this._refMenu=e},this._handleContainerClick=e=>{this._stopEvent(e),this.restoreFocus()},this._handleContentFocusNext=e=>{this._stopEvent(e),this._refMenu&&this._refMenu.focus()},this._handleContentFocusPrev=e=>{this._stopEvent(e),this._refMenu&&this._refMenu.focus()},this._handleEmptyFocusPrev=e=>{this._stopEvent(e),this._focusPrev()},this._handleEmptyFocusNext=e=>{this._stopEvent(e),this._focusNext()},this._handleItemClick=e=>{this.setState({selectedStickerPackIndex:e})},this._handleMenuFocusBelow=e=>{this._stopEvent(e),this._refContent&&this._refContent.focus()},this._handleMenuFocusNext=e=>{this._stopEvent(e),this._focusNext()},this._handleMenuFocusPrev=e=>{this._stopEvent(e),this._focusPrev()},this._handleScroll=({scrollTop:e})=>{this._lastScrollTop=e,this.setState({menuShadow:e>0})},this._handleStickerPacksChange=()=>{this.setState({hasFetchedData:c.default.hasFetchedData(),hasStickers:c.default.length>0})}}_getInitialStickerPackIndex(){var{displayCache:e}=this.props;return e&&null!=e.selectedStickerPackIndex?e.selectedStickerPackIndex:0}componentDidMount(){this.props.listeners.add(c.default,"change:length",this._handleStickerPacksChange),this.props.listeners.add(c.default,"change:pageFetchStates",this._handleStickerPacksChange),this.props.listeners.uiIdle((()=>{this.restoreFocus(),c.default.fetchAt(0)}))}componentWillUnmount(){this.props.onDisplayCache&&this.props.onDisplayCache({scrollTop:this._lastScrollTop,selectedStickerPackIndex:this.state.selectedStickerPackIndex})}restoreFocus(){this.props.listeners.uiIdle((()=>{if(this._refEmptyContent){if(document.activeElement===this._refEmptyContent)return;o.default.focus(this._refEmptyContent)}else this._refMenu&&this._refMenu.focus()}))}_focusPrev(){this.props.onFocusPrev()}_focusNext(){this.props.onFocusNext()}_stopEvent(e){e&&(e.preventDefault(),e.stopPropagation())}render(){var e=l.default.isRecentStickersEnabled(),t=l.default.isStarredStickersEnabled(),a=(e?1:0)+(t?1:0),{selectedStickerPackIndex:r}=this.state;if(!e&&this.state.hasFetchedData&&!this.state.hasStickers)return n.createElement(h.StickerPanelEmpty,{containerClassName:d.default.panelContainer,onClick:this._handleContainerClick,onFocusPrev:this._handleEmptyFocusPrev,onFocusNext:this._handleEmptyFocusNext,onRef:this._setRefEmptyContent});var{displayLocation:i}=this.props,o=(0,s.default)(d.default.panelContainer,{[d.default.panelDropdown]:i===p.DROPDOWN});return n.createElement("div",{className:o,onClick:this._handleContainerClick,ref:this._refDiv},n.createElement(f.default,{ref:this._setRefMenu,displayLocation:i,onFocusBelow:this._handleMenuFocusBelow,onFocusNext:this._handleMenuFocusNext,onFocusPrev:this._handleMenuFocusPrev,onItemClick:this._handleItemClick,selectedStickerPackIndex:r,shadow:this.state.menuShadow,recentStickersEnabled:e,starredStickersEnabled:t,specialItemsCount:a}),n.createElement(h.default,{ref:this._setRefContent,onFocusNext:this._handleContentFocusNext,onFocusPrev:this._handleContentFocusPrev,onScroll:this._handleScroll,onSticker:this.props.onSticker,selectedStickerPackIndex:r,recentStickersEnabled:e,starredStickersEnabled:t,specialItemsCount:a}))}}m.defaultProps={displayLocation:p.DROPDOWN};var _=(0,u.default)(m);t.default=class extends _{restoreFocus(){this.getComponent().restoreFocus()}}},60312:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DISP_LOCATION=void 0;var s=i(a(72779)),n=r(a(2784)),o=a(12097),l=i(a(6660)),d=i(a(25416)),u=i(a(69132)),c=i(a(72874)),h=i(a(65063)),f=i(a(17957)),p=i(a(20642)),m=a(76151),_=i(a(84517)),v=r(a(59591)),g={COMPOSE_BOX:"COMPOSE_BOX",DROPDOWN:"DROPDOWN"};t.DISP_LOCATION=g;var E=Array.from(o.ValidMoods.members());class y extends n.PureComponent{constructor(...e){var t;super(...e),this._refDiv=n.createRef(),this.getElement=()=>this._refDiv.current,this._refMenuTabs=new Map,this.state={hasFetched:_.default.hasFetchedData(),hasStickers:_.default.length>0,menuShadow:!1,selectedMood:(null===(t=this.props.displayCache)||void 0===t?void 0:t.selectedMood)||o.ValidMoods.LOVE,focusedTabIndex:-1},this._setRefEmptyContent=e=>{this._refEmptyContent=e},this._setRefContent=e=>{this._refContent=e},this._handleContainerClick=e=>{this._stopEvent(e),this.restoreFocus()},this._handleContentFocusUp=e=>{var t;this._stopEvent(e),null===(t=this._refMenuTabs.get(this.state.selectedMood))||void 0===t||t.focus(),this.setState({focusedTabIndex:E.indexOf(this.state.selectedMood)})},this._handleContentFocusNext=e=>{var t;this._stopEvent(e),null===(t=this.props)||void 0===t||t.onFocusNext()},this._handleContentFocusPrev=e=>{var t;this._stopEvent(e),null===(t=this.props)||void 0===t||t.onFocusPrev()},this._handleEmptyFocusPrev=e=>{this._stopEvent(e),this._focusPrev()},this._handleEmptyFocusNext=e=>{this._stopEvent(e),this._focusNext()},this._handleItemClick=(e,t)=>{var a,r,i,s;null==t||t.preventDefault(),this.setState({selectedMood:e}),null===(a=this._refContent)||void 0===a||a.clearSearchText(),null===(r=(i=this.props).onChange)||void 0===r||r.call(i,""),null===(s=this._refContent)||void 0===s||s.focus()},this._handleMenuFocusBelow=e=>{this._stopEvent(e),this._refContent&&this._refContent.focus()},this._handleFocusEnter=()=>{var e=E[this.state.focusedTabIndex];this.setState({focusedTabIndex:-1}),this._handleItemClick(e)},this._handleMenuFocusPrev=e=>{var t;this._stopEvent(e);var a=(E.length+this.state.focusedTabIndex-1)%E.length,r=E[a];null===(t=this._refMenuTabs.get(r))||void 0===t||t.focus(),this.setState({focusedTabIndex:a})},this._handleMenuFocusNext=e=>{var t;this._stopEvent(e);var a=(this.state.focusedTabIndex+1)%E.length,r=E[a];null===(t=this._refMenuTabs.get(r))||void 0===t||t.focus(),this.setState({focusedTabIndex:a})},this._handleFocusLeave=e=>{this._stopEvent(e),this.restoreFocus(),this.setState({focusedTabIndex:-1})},this._handleScroll=({scrollTop:e})=>{this._lastScrollTop=e,this.setState({menuShadow:e>0})},this._handleSearchChange=(e,t)=>{var a,r;null===(a=(r=this.props).onChange)||void 0===a||a.call(r,e,t)},this._handleStickerPacksChange=()=>{this.setState({hasFetched:_.default.hasFetchedData(),hasStickers:_.default.length>0})},this._renderStickerTab=(e,t)=>{var a=function(e){switch(e){case o.ValidMoods.LOVE:return f.default.t(1320);case o.ValidMoods.GREETINGS:return f.default.t(1318);case o.ValidMoods.HAPPY:return f.default.t(1319);case o.ValidMoods.SAD:return f.default.t(1321);case o.ValidMoods.ANGRY:return f.default.t(1316);case o.ValidMoods.CELEBRATE:return f.default.t(1317)}}(e);return n.createElement(v.default,{onClick:this._handleItemClick,sectionId:e,selected:t,showFocusIndicator:-1!==this.state.focusedTabIndex,title:a,theme:v.THEMES.MENU,key:a,onRef:t=>{this._refMenuTabs.set(e,t)}},n.createElement("span",{className:c.default.tabText},a))}}componentDidMount(){this.props.listeners.add(_.default,"add remove change:variant",this._handleStickerPacksChange)}componentWillUnmount(){this.props.onDisplayCache&&this.props.onDisplayCache({scrollTop:this._lastScrollTop,selectedMood:this.state.selectedMood})}restoreFocus(){this.props.listeners.uiIdle((()=>{if(this._refContent)this._refContent.focus();else if(this._refEmptyContent){if(document.activeElement===this._refEmptyContent)return;l.default.focus(this._refEmptyContent)}}))}_focusPrev(){this.props.onFocusPrev&&this.props.onFocusPrev()}_focusNext(){this.props.onFocusNext&&this.props.onFocusNext()}_stopEvent(e){e&&(e.preventDefault(),e.stopPropagation())}_renderStickerContent(){var e,t;return this.state.hasFetched||this.state.hasStickers?n.createElement(n.Fragment,null,n.createElement(u.default,{selectedSectionId:this.state.selectedMood,sectionIds:Array.from(o.ValidMoods.members()),renderSectionTab:this._renderStickerTab,showTabHighlight:!(null===(e=this.props.defaultSearchText)||void 0===e?void 0:e.trim()),onFocusPrev:this._handleMenuFocusPrev,onFocusNext:this._handleMenuFocusNext,onEnter:this._handleFocusEnter,onFocusLeave:this._handleFocusLeave}),n.createElement(h.default,{ref:this._setRefContent,onFocusUp:this._handleContentFocusUp,onFocusNext:this._handleContentFocusNext,onFocusPrev:this._handleContentFocusPrev,onScroll:this._handleScroll,onChange:this._handleSearchChange,onSticker:this.props.onSticker,defaultSearchText:this.props.defaultSearchText,selectedMood:this.state.selectedMood,listeners:this.props.listeners})):n.createElement(n.Fragment,null,n.createElement(u.default,{selectedSectionId:this.state.selectedMood,sectionIds:Array.from(o.ValidMoods.members()),renderSectionTab:this._renderStickerTab,showTabHighlight:!(null===(t=this.props.defaultSearchText)||void 0===t?void 0:t.trim())}),n.createElement(m.StickerPanelEmpty,{containerClassName:d.default.panelContainer,onClick:this._handleContainerClick,onFocusPrev:this._handleEmptyFocusPrev,onFocusNext:this._handleEmptyFocusNext,onRef:this._setRefEmptyContent}))}render(){var{displayLocation:e}=this.props,t=(0,s.default)(d.default.panelContainer,{[d.default.panelDropdown]:e===g.DROPDOWN});return n.createElement("div",{className:t,ref:this._refDiv},this._renderStickerContent())}}y.defaultProps={displayLocation:g.DROPDOWN};var S=(0,p.default)(y);t.default=class extends S{restoreFocus(){this.getComponent().restoreFocus()}}},76151:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.StickerPanelEmpty=function({containerClassName:e,onClick:t,onFocusPrev:a,onFocusNext:r,onRef:i}){return n.createElement("div",{className:(0,s.default)(e,d.default.emptyContainer),onClick:t},n.createElement("div",{className:d.default.emptySticker,style:{backgroundImage:"url(".concat(h.default,")")}}),n.createElement(l.default,{handlers:{"shift+tab":a,tab:r},onRef:i},n.createElement("p",{className:d.default.emptyText},u.default.t(1315))))},t.default=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(91200)),l=i(a(44343)),d=i(a(15727)),u=i(a(17957)),c=i(a(40210)),h=i(a(59984)),f=i(a(49197)),p=i(a(2187)),m=i(a(15327));class _ extends n.PureComponent{constructor(...e){super(...e),this._handleGridFocusPrev=()=>{this.props.onFocusPrev()},this._setRefScrollGrid=e=>{this._refScrollGrid=e},this._onStickerFromRecent=e=>{this.props.onSticker(e,{stickerSendOrigin:c.default.STICKER_SEND_ORIGIN_TYPE.STICKER_PICKER_TAB_RECENTS})},this._onStickerFromStarred=e=>{this.props.onSticker(e,{stickerSendOrigin:c.default.STICKER_SEND_ORIGIN_TYPE.STICKER_PICKER_TAB_FAVORITES})}}focus(){this._refScrollGrid&&this._refScrollGrid.focus()}_getContent(){return this.props.recentStickersEnabled&&0===this.props.selectedStickerPackIndex?n.createElement(f.default,{ref:this._setRefScrollGrid,onFocusPrev:this._handleGridFocusPrev,onScroll:this.props.onScroll,onStickerClick:this._onStickerFromRecent,onStickerEnter:this._onStickerFromRecent}):this.props.starredStickersEnabled&&1===this.props.selectedStickerPackIndex?n.createElement(m.default,{ref:this._setRefScrollGrid,onFocusPrev:this._handleGridFocusPrev,onScroll:this.props.onScroll,onStickerClick:this._onStickerFromStarred,onStickerEnter:this._onStickerFromStarred}):n.createElement(p.default,{ref:this._setRefScrollGrid,onFocusPrev:this._handleGridFocusPrev,onScroll:this.props.onScroll,onStickerClick:this.props.onSticker,onStickerEnter:this.props.onSticker,selectedStickerPackIndex:this.props.selectedStickerPackIndex-this.props.specialItemsCount})}render(){var e=(0,s.default)(d.default.container);return n.createElement(l.default,{className:e,handlers:(0,o.default)({"shift+tab":this.props.onFocusPrev,tab:this.props.onFocusNext})},this._getContent())}}t.default=_},65063:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.StickerPanelEmpty=function({containerClassName:e,onClick:t,onFocusPrev:a,onFocusNext:r,onRef:i}){return h.createElement("div",{className:(0,c.default)(e,_.default.emptyContainer),onClick:t},h.createElement("div",{className:_.default.emptySticker,style:{backgroundImage:"url(".concat(y.default,")")}}),h.createElement(m.default,{handlers:{"shift+tab":a,tab:r},onRef:i},h.createElement("p",{className:_.default.emptyText},v.default.t(1315))))},t.default=void 0;var s=i(a(19976)),n=i(a(52954)),o=i(a(70417)),l=i(a(45455)),d=i(a(12436)),u=i(a(54073)),c=i(a(72779)),h=r(a(2784)),f=a(12097),p=i(a(91200)),m=i(a(44343)),_=i(a(15727)),v=i(a(17957)),g=i(a(40210)),E=i(a(76097)),y=i(a(59984)),S=i(a(84517)),C=i(a(18224)),T=i(a(74824));function M(){var e=(0,s.default)(["Sticker search promise failed"]);return M=function(){return e},e}class b extends h.PureComponent{constructor(...e){super(...e),this._lastScrollChange=0,this._lastScrollTop=0,this._fastScroll=!1,this._debouncedStickerUpdater=(0,u.default)(this._handleStickersUpdate,250).bind(this),this._debouncedSearchHandler=(0,u.default)(this._handleStickerSearch,250),this.state={searchText:this.props.defaultSearchText||"",showSearchInput:!0,stickers:[],scrolledToTop:!0},this._handleGridFocusPrev=()=>{this.props.onFocusPrev()},this._handleGridFocusNext=()=>{this.props.onFocusNext()},this._handleSearchChange=(e,t)=>{this.props.onChange&&this.props.onChange(e,t),this.setState({searchText:e}),e.trim()?this._debouncedSearchHandler(e):(this._debouncedSearchHandler.cancel(),S.default.searchMood(this.props.selectedMood))},this._handleContainerClick=e=>{this._stopEvent(e),this._focusSearchInput()},this._renderSearchInput=()=>{var e=null;this.state.showSearchInput&&(e=h.createElement(E.default,{label:v.default.t(1239),onChange:this._handleSearchChange,value:this.state.searchText||"",shadow:!this.state.scrolledToTop,ref:this._setRefSearchInput,onUpKey:this.props.onFocusUp,onDownKey:this._focusScrollGrid}));var t=this._fastScroll?"emoji-search-slide-away-fast":"emoji-search-slide-away";return h.createElement(T.default,{transitionName:t},e)},this._handleScroll=(0,d.default)((()=>{var e=this._refScrollContainer;if(e){this.props.onScroll&&this.props.onScroll(e);var t=e.scrollTop,a=t<=0,r=this._lastScrollTop-t;if(r===f.INPUT_BAR_TOTAL_HEIGHT)return this._lastScrollChange=r,void(this._lastScrollTop=t);var i=Math.abs(r)>f.INPUT_BAR_SCROLL_SENSITIVITY;this._fastScroll=Math.abs(r)>f.INPUT_BAR_SCROLL_FAST;var s={};r<0?this.state.showSearchInput&&(t>f.INPUT_HIDE_POINT&&i||this._lastScrollTop<f.INPUT_HIDE_POINT&&t>=f.INPUT_HIDE_POINT)&&(s.showSearchInput=!1):this.state.showSearchInput||(i||t<f.INPUT_SHOW_POINT)&&(s.showSearchInput=!0),this._lastScrollTop=t,this._lastScrollChange=r,a!==this.state.scrolledToTop&&(s.scrolledToTop=a),(0,l.default)(s)||this.setState((0,o.default)({},s))}}),f.SCROLL_THROTTLE_TIME),this._focusSearchInput=()=>{if(!this._refSearchInput)return this._fastScroll=!0,void this.setState({showSearchInput:!0},(()=>this._focusSearchInput()));this._refSearchInput.focus(!1)},this._focusScrollGrid=()=>{var e;null===(e=this._refScrollGrid)||void 0===e||e.focus()},this._setRefScrollGrid=e=>{this._refScrollGrid=e},this._setRefSearchInput=e=>{this._refSearchInput=e},this._onStickerSend=e=>{var t=this.state.searchText.trim()?g.default.STICKER_SEND_ORIGIN_TYPE.STICKER_SEARCH:g.default.STICKER_SEND_ORIGIN_TYPE.STICKER_PICKER_TAB_EMOTION;this.props.onSticker(e,{stickerSendOrigin:t})},this._setScrollContainerRef=e=>{this._refScrollContainer=e}}focus(){var e;null===(e=this._refSearchInput)||void 0===e||e.focus()}clearSearchText(){this.setState({searchText:""}),S.default.searchMood(this.props.selectedMood)}componentDidMount(){S.default.searchMood(this.props.selectedMood),this.props.listeners.add(S.default,"add remove change:variant",this._debouncedStickerUpdater),this.state.searchText&&this._handleStickerSearch(this.state.searchText),S.default.hasFetchedData()&&this._handleStickersUpdate(),this.props.listeners.uiIdle((()=>{this._focusSearchInput()}))}componentDidUpdate(e){this.props.selectedMood!==e.selectedMood&&(S.default.searchMood(this.props.selectedMood),this.setState({searchText:""}))}componentWillUnmount(){this.props.listeners.remove(S.default,"add remove change:variant",this._debouncedStickerUpdater)}_handleStickersUpdate(){this.setState({stickers:S.default.toArray()}),null!=this._refScrollContainer&&(this._refScrollContainer.scrollTop=0,this._lastScrollTop=0,this._lastScrollChange=0)}_handleStickerSearch(e){var t=this;return(0,n.default)((function*(){try{yield S.default.search(e)}catch(e){__LOG__(4,void 0,new Error,!0)(M()),SEND_LOGS(e)}t.setState({stickers:S.default.toArray()})}))()}_stopEvent(e){e&&(e.preventDefault(),e.stopPropagation())}render(){var e=(0,c.default)(_.default.containerSearch);return h.createElement(m.default,{className:e,handlers:(0,p.default)({"shift+tab":this.props.onFocusPrev,tab:this.props.onFocusNext}),onClick:this._handleContainerClick},h.createElement("div",{className:_.default.bodyContainer},this._renderSearchInput(),h.createElement("div",{className:(0,c.default)(_.default.contentContainer,_.default.contentContainerSearch),onScroll:this._handleScroll,ref:this._setScrollContainerRef},h.createElement(C.default,{ref:this._setRefScrollGrid,onFocusPrev:this._focusSearchInput,onStickerClick:this._onStickerSend,isSearchResult:Boolean(this.state.searchText.trim()),stickers:this.state.stickers}))))}}t.default=b},8315:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.StickerItem=void 0;var s=i(a(25291)),n=r(a(2784)),o=i(a(6660)),l=i(a(44343)),d=i(a(40207)),u=a(64658),c=i(a(82562)),h=i(a(94034));class f extends n.PureComponent{constructor(...e){super(...e),this.state={isVisible:!1},this._downloadMedia=()=>this.props.sticker.downloadMedia(),this._downloadOnce=(0,s.default)(this._downloadMedia),this._handleClick=e=>{var t=this.props.onClick;t&&t((0,u.unproxy)(this.props.sticker),e)},this._handleEnterKey=e=>{var t=this.props.onEnter;t&&t((0,u.unproxy)(this.props.sticker),e)},this._setIntersectionObserver=e=>{e&&null==this._intersectionObserver&&(this._intersectionObserver=new IntersectionObserver(this._onVisibilityChange,{root:null,rootMargin:"10px",threshold:0}),this._intersectionObserver.observe(e))},this._onVisibilityChange=e=>{var t;e[0].isIntersecting||(null===(t=e[1])||void 0===t?void 0:t.isIntersecting)?(this._downloadOnce(),this.setState({isVisible:!0})):this.setState({isVisible:!1})},this._onRef=e=>{this._refContainer||(this._refContainer=e,this._setIntersectionObserver(e))}}componentWillUnmount(){this._intersectionObserver&&this._intersectionObserver.disconnect()}focus(){this._refContainer&&(this.hasFocus()||o.default.focus(this._refContainer))}getOffsetTop(){return this._refContainer?this._refContainer.offsetTop:0}hasFocus(){return!!this._refContainer&&this._refContainer===document.activeElement}render(){var e=this.props.sticker;return n.createElement(l.default,{onRef:this._onRef,className:h.default.container,handlers:{enter:this._handleEnterKey}},n.createElement("div",{className:h.default.border},this.state.isVisible&&n.createElement(c.default,{mediaData:e.mediaData,onClick:this._handleClick,theme:"stickerPanel",loopAnimation:!0,downloadMedia:this._downloadOnce})))}}t.StickerItem=f,f.CONCERNS={sticker:["id","mediaData"]};var p=(0,d.default)(f,f.CONCERNS);t.default=class extends p{focus(){this.getComponent().focus()}getOffsetTop(){return this.getComponent().getOffsetTop()}hasFocus(){return this.getComponent().hasFocus()}}},49197:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(61258)),n=i(a(72779)),o=r(a(2784)),l=i(a(15727)),d=i(a(17957)),u=r(a(49569)),c=i(a(72424)),h=i(a(86484)),f=i(a(59984)),p=i(a(8315)),m=i(a(11992)),_=i(a(68830));class v extends o.PureComponent{constructor(...e){super(...e),this.state={isCollectionReady:u.default.isSynced()},this._setRefScrollGrid=e=>{this._refScrollGrid=e}}componentDidMount(){this.state.isCollectionReady||u.default.sync().then((()=>{this.setState({isCollectionReady:!0})}))}focus(e){this._refScrollGrid&&this._refScrollGrid.focus(e)}render(){return this.state.isCollectionReady?0===u.default.length?o.createElement("div",{className:(0,n.default)(l.default.emptyContainer,c.default.stickerSearchEnabled?l.default.panelHeight:null)},o.createElement("div",{className:l.default.emptySticker,style:{backgroundImage:"url(".concat(f.default,")")}}),o.createElement("p",{className:l.default.emptyText},d.default.t(1322))):o.createElement(_.default,{ref:this._setRefScrollGrid,onFocusPrev:this.props.onFocusPrev,onScroll:this.props.onScroll,onStickerClick:this.props.onStickerClick,onStickerEnter:this.props.onStickerEnter,stickers:u.default.toArray()}):o.createElement("div",{className:m.default.container},(0,s.default)(u.RECENT_STICKERS_LIMIT,(e=>o.createElement(p.default,{key:e,sticker:h.default.getPlaceholder()}))))}}t.default=v},2187:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(17957)),o=r(a(20642)),l=r(a(40210)),d=i(a(23054)),u=r(a(16473)),c=r(a(2302));class h extends s.PureComponent{constructor(e){super(e),this._handleRetryClick=()=>{d.default.fetchAt(this.props.selectedStickerPackIndex,!0)},this._handleStickerPackPageFetchState=(e,t)=>{d.default.pageWithIndex(this.props.selectedStickerPackIndex)===e&&(t?this.forceUpdate():d.default.fetchAt(this.props.selectedStickerPackIndex))},this._setRefScrollGrid=e=>{this._refScrollGrid=e},this._renderError=e=>s.createElement("div",{className:u.default.container},s.createElement("div",null,n.default.t(903)),s.createElement("div",{"data-id":"retry",className:u.default.retryButton,onClick:e},n.default.t(1213).toUpperCase())),d.default.fetchAt(this.props.selectedStickerPackIndex)}componentDidMount(){this.props.listeners.add(d.default,"change:pageFetchStates",this._handleStickerPackPageFetchState)}componentDidUpdate(e){var{selectedStickerPackIndex:t}=this.props,{selectedStickerPackIndex:a}=e;if(t!==a){var r=d.default.pageWithIndex(t);d.default.pageFetchStates[r]===d.PAGE_FETCH_STATE.ERROR&&d.default.fetchAt(t,!0)}}focus(e){this._refScrollGrid&&this._refScrollGrid.focus(e)}render(){var e=d.default.at(this.props.selectedStickerPackIndex);if(!e)return null;var t=d.default.pageWithIndex(this.props.selectedStickerPackIndex);if(d.default.pageFetchStates[t]===d.PAGE_FETCH_STATE.ERROR)return this._renderError(this._handleRetryClick);var a={stickerIsFirstParty:e.isFirstParty,stickerSendOrigin:l.default.STICKER_SEND_ORIGIN_TYPE.STICKER_PICKER_TAB_PACK};return s.createElement(c.default,{ref:this._setRefScrollGrid,onFocusPrev:this.props.onFocusPrev,onScroll:this.props.onScroll,onStickerClick:e=>this.props.onStickerClick(e,a),onStickerEnter:e=>this.props.onStickerEnter(e,a),stickers:e.stickers,renderError:this._renderError})}}var f=(0,o.default)(h);t.default=class extends f{focus(e){this.getComponent().focus(e)}}},15327:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(61258)),n=i(a(72779)),o=r(a(2784)),l=i(a(15727)),d=i(a(17957)),u=i(a(20642)),c=i(a(72259)),h=i(a(72424)),f=r(a(47805)),p=i(a(86484)),m=i(a(59984)),_=i(a(8315)),v=i(a(11992)),g=i(a(68830));class E extends o.PureComponent{constructor(...e){super(...e),this.state={isCollectionReady:f.default.isSynced(),stickers:f.default.toArray(),isLoadingMore:!1},this.onScroll=e=>{var{scrollTop:t,clientHeight:a,scrollHeight:r}=e;if(this.props.onScroll&&this.props.onScroll(e),r-a-t<200&&!this.state.isLoadingMore&&f.default.canLoadMore()){var i=f.default.getRemaining(),n=Math.min(f.STARRED_STICKERS_PAGE_SIZE,i),o=(0,s.default)(n,(()=>p.default.getPlaceholder()));this.setState({isLoadingMore:!0,stickers:this.state.stickers.concat(o)}),f.default.syncNextPage()}},this._setRefScrollGrid=e=>{this._refScrollGrid=e}}componentDidMount(){this.state.isCollectionReady||f.default.sync().checkpoint(this.props.rejectOnUnmount()).then((()=>{this.setState({isCollectionReady:!0})})),this.props.listeners.add(f.default,"add remove",(()=>{this.setState({stickers:f.default.toArray()})})),this.props.listeners.add(f.default,"sync",(()=>{this.setState({stickers:f.default.toArray(),isCollectionReady:!0})})),this.props.listeners.add(f.default,"next_page_sync",(()=>{this.setState({stickers:f.default.toArray(),isLoadingMore:!1})}))}focus(e){this._refScrollGrid&&this._refScrollGrid.focus(e)}render(){return this.state.isCollectionReady?0===f.default.length?o.createElement("div",{className:(0,n.default)(l.default.emptyContainer,h.default.stickerSearchEnabled?l.default.panelHeight:null)},o.createElement("div",{className:l.default.emptySticker,style:{backgroundImage:"url(".concat(m.default,")")}}),o.createElement("p",{className:l.default.emptyText},d.default.t(1323))):o.createElement(g.default,{ref:this._setRefScrollGrid,onFocusPrev:this.props.onFocusPrev,onScroll:this.onScroll,onStickerClick:this.props.onStickerClick,onStickerEnter:this.props.onStickerEnter,stickers:this.state.stickers}):o.createElement("div",{className:v.default.container},(0,s.default)(f.STARRED_STICKERS_PAGE_SIZE,(e=>o.createElement(_.default,{key:e,sticker:p.default.getPlaceholder()}))))}}var y=(0,u.default)((0,c.default)(E));t.default=class extends y{focus(e){this.getComponent().focus(e)}}},18224:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.StickerPanelNoResults=f,t.default=void 0;var s=i(a(2784)),n=r(a(17957)),o=r(a(20642)),l=r(a(59984)),d=r(a(7915)),u=r(a(68830));class c extends s.PureComponent{constructor(...e){super(...e),this._setRefScrollGrid=e=>{this._refScrollGrid=e}}focus(e){this._refScrollGrid&&this._refScrollGrid.focus(e)}render(){return this.props.isSearchResult&&0===this.props.stickers.length?s.createElement(f,null):s.createElement(u.default,{ref:this._setRefScrollGrid,onFocusPrev:this.props.onFocusPrev,onScroll:this.props.onScroll,onStickerClick:this.props.onStickerClick,onStickerEnter:this.props.onStickerClick,stickers:this.props.stickers,theme:"searchable"})}}var h=(0,o.default)(c);function f(){return s.createElement("div",{className:d.default.emptyContainer},s.createElement("div",{className:d.default.emptySticker,style:{backgroundImage:"url(".concat(l.default,")")}}),s.createElement("p",{className:d.default.emptyText},n.default.t(1092)))}t.default=class extends h{focus(e){this.getComponent().focus(e)}}},2302:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(61258)),n=r(a(2784)),o=i(a(20642)),l=i(a(86484)),d=a(93771),u=i(a(8315)),c=i(a(11992)),h=i(a(68830));class f extends n.PureComponent{constructor(e){super(e),this._handleFetchState=()=>{this.forceUpdate()},this._handleRetryClick=()=>{this.props.stickers.fetch(!0)},this._setRefScrollGrid=e=>{this._refScrollGrid=e},this._fetchStickers(this.props.stickers)}componentDidUpdate(e){var t=e.stickers,a=this.props.stickers;this._handleStickersChange(t,a)}focus(e){this._refScrollGrid&&this._refScrollGrid.focus(e)}_fetchStickers(e,t){this.props.listeners.add(e,"change:fetchState",this._handleFetchState),e.fetch(t)}_handleStickersChange(e,t){if(e!==t){e&&this.props.listeners.remove(e,"change:fetchState",this._handleFetchState);var a=t.fetchState===d.FETCH_STATE.ERROR;this._fetchStickers(t,a),this._refScrollGrid&&this._refScrollGrid.scrollToTop()}}render(){var{stickers:e}=this.props;if(e.fetchState===d.FETCH_STATE.ERROR)return this.props.renderError(this._handleRetryClick);if(!e.fetchState||e.fetchState===d.FETCH_STATE.PENDING){var t=l.default.getPlaceholder();return n.createElement("div",{className:c.default.container},(0,s.default)(24,(e=>n.createElement(u.default,{key:e,sticker:t}))))}return n.createElement(h.default,{ref:this._setRefScrollGrid,onFocusPrev:this.props.onFocusPrev,onScroll:this.props.onScroll,onStickerClick:this.props.onStickerClick,onStickerEnter:this.props.onStickerEnter,stickers:this.props.stickers.toArray()})}}var p=(0,o.default)(f);t.default=class extends p{focus(e){this.getComponent().focus(e)}}},68830:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(72779)),o=r(a(44343)),l=r(a(8315)),d=a(70275),u=r(a(11992)),c=r(a(20932));class h extends s.PureComponent{constructor(...e){super(...e),this._stickerItems=new Map,this._setRefContainer=e=>{this._refContainer=e,null!=this.props.onRef&&this.props.onRef(e)},this._handleStickerArrowDown=e=>{e.stopPropagation(),e.preventDefault();var t=this._getActiveStickerItemIndex(),a=this._getNumCols(),r=Math.min(t+a,this._stickerItems.size-1);Math.floor(t/a)!==Math.floor(r/a)&&this._incActiveIndex(a)},this._handleStickerArrowLeft=e=>{e.stopPropagation(),e.preventDefault(),this._decActiveIndex(1)},this._handleStickerArrowRight=e=>{e.stopPropagation(),e.preventDefault(),this._incActiveIndex(1)},this._handleStickerArrowUp=e=>{e.stopPropagation(),e.preventDefault(),this._decActiveIndex(this._getNumCols())},this._handleScroll=()=>{this.props.onScroll&&this._refContainer&&this.props.onScroll(this._refContainer)},this._setRefContainer=e=>{this._refContainer=e}}focus(e){var t=e||0;t=Math.min(t,this._stickerItems.size),t=Math.max(t,0);var a=this._stickerItems.get(t);a&&a.focus()}scrollToTop(){this._refContainer&&(this._refContainer.scrollTop=0)}_decActiveIndex(e){this._incActiveIndex(0-e)}_getActiveStickerItemIndex(){for(var e=this._stickerItems.size,t=0;t<e;t++){var a=this._stickerItems.get(t);if(a&&a.hasFocus())return t}return-1}_getNumCols(){var e=this._stickerItems.get(0);if(!e)return 0;for(var t=e.getOffsetTop(),a=this._stickerItems.size,r=0;r<a;r++){var i=this._stickerItems.get(r);if(i&&i.getOffsetTop()!==t)return r}return this._stickerItems.size}_incActiveIndex(e){if(0!==e){var t=this._getActiveStickerItemIndex();if(-1!==t){var a=t+e;if(a<0){if(!this.props.onFocusPrev)return;this.props.onFocusPrev()}else{a=Math.min(a,this._stickerItems.size-1);var r=this._stickerItems.get(a);r&&r.focus()}}}}_renderStickers(){return this.props.stickers.map(((e,t)=>{var a=e.isPlaceholder?"".concat(d.PRE_PLACEHOLDER_ID).concat(t):e.id;return s.createElement(l.default,{key:a,onClick:this.props.onStickerClick,onEnter:this.props.onStickerEnter,ref:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((e=>{e?this._stickerItems.set(t,e):this._stickerItems.delete(t)})),sticker:e})}))}render(){var e=(0,n.default)(u.default.container,"searchable"===this.props.theme&&c.default.unscrollable);return s.createElement(o.default,{onRef:this._setRefContainer,className:e,handlers:{up:this._handleStickerArrowUp,down:this._handleStickerArrowDown,left:this._handleStickerArrowLeft,right:this._handleStickerArrowRight},onScroll:this._handleScroll},this._renderStickers())}}t.default=h},45262:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(32520)),l=i(a(91200)),d=i(a(6660)),u=i(a(44343)),c=i(a(92603)),h=i(a(20642)),f=r(a(23054)),p=i(a(93736)),m=i(a(82631));class _ extends n.PureComponent{constructor(...e){super(...e),this.state={numItems:this.props.specialItemsCount+f.default.length},this._handleLengthChange=()=>{this.setState({numItems:this.props.specialItemsCount+f.default.length})},this._setRefContainer=e=>{this._refContainer=e},this._renderItem=e=>this.props.recentStickersEnabled&&0===e?n.createElement(m.default,{name:"panel-recent"}):this.props.starredStickersEnabled&&1===e?n.createElement(m.default,{name:"panel-starred"}):n.createElement(p.default,{index:e-this.props.specialItemsCount})}componentDidMount(){this.props.listeners.add(f.default,"change:length",this._handleLengthChange),this._handleLengthChange()}focus(){this._refContainer&&(this.hasFocus()||d.default.focus(this._refContainer))}hasFocus(){return!!this._refContainer&&this._refContainer===document.activeElement}render(){var{numItems:e}=this.state,{displayLocation:t}=this.props,a=f.PAGE_SIZE_COMPOSE_BOX;return"DROPDOWN"===t&&(a=f.PAGE_SIZE_POPUP),n.createElement(u.default,{onRef:this._setRefContainer,handlers:(0,l.default)({down:this.props.onFocusBelow,"shift+tab":this.props.onFocusPrev,tab:this.props.onFocusNext})},n.createElement(o.default,{className:(0,s.default)({[c.default.shadow]:this.props.shadow}),numItems:e,numColumns:a,onItemClick:this.props.onItemClick,renderItem:this._renderItem,selectedIndex:this.props.selectedStickerPackIndex}))}}var v=(0,h.default)(_);t.default=class extends v{focus(){this.getComponent().focus()}}},96780:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(27536)),o=r(a(58881));var l=function({id:e,name:t,url:a}){return s.createElement("div",{className:o.default.container,"data-id":e},s.createElement(n.default,{fallbackSVG:"sticker",wrapOptions:{wrapperClassName:o.default.stickerPackIconWrapper,centerWrapperChild:!0},className:o.default.stickerPackContainer,size:"NONE",roundContainer:!1,imgProps:{src:a||"",alt:t,draggable:!1}}))};t.default=l},93736:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(20642)),o=r(a(23054)),l=r(a(76261)),d=r(a(35617)),u=r(a(82631));class c extends s.PureComponent{constructor(e){super(e),this._handleStickerPackPageFetchState=(e,t)=>{if(!this._unmounted){var{index:a}=this.props;o.default.pageWithIndex(a)===e&&(t||o.default.fetchAt(a),this.setState({stickerPack:o.default.at(a)}))}},o.default.fetchAt(e.index),this.state={stickerPack:o.default.at(e.index)},this._unmounted=!1}componentDidMount(){this.props.listeners.add(o.default,"change:pageFetchStates",this._handleStickerPackPageFetchState)}componentWillUnmount(){this._unmounted=!0}render(){var{stickerPack:e}=this.state;return e?e.isPlaceholder?s.createElement(u.default,{name:"sticker"}):e.isFirstParty?s.createElement(l.default,{stickerPack:e}):s.createElement(d.default,{stickerPack:e,mediaData:e.mediaData}):null}}var h=(0,n.default)(c);t.default=h},76261:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(40207)),o=r(a(96780));class l extends s.PureComponent{render(){var{id:e,name:t,url:a}=this.props.stickerPack;return s.createElement(o.default,{id:e,name:t,url:a})}}l.CONCERNS={stickerPack:["id","name","url"]};var d=(0,n.default)(l,l.CONCERNS);t.default=d},35617:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(19125)),o=r(a(40207)),l=r(a(96780));class d extends s.PureComponent{constructor(...e){super(...e),this._downloadMedia=()=>this.props.stickerPack.downloadMedia(),this._renderStickerPackIcon=e=>{var{id:t,name:a}=this.props.stickerPack;return s.createElement(l.default,{id:t,name:a,url:e})},this._renderPlaceholder=()=>this._renderStickerPackIcon(null)}componentDidMount(){this._downloadMedia()}render(){return s.createElement(n.default,{mediaData:this.props.mediaData,placeholderRenderer:this._renderPlaceholder,downloadMedia:this._downloadMedia},this._renderStickerPackIcon)}}d.CONCERNS={stickerPack:["id","name"],mediaData:["renderableUrl","mediaStage"]};var u=(0,o.default)(d,d.CONCERNS);t.default=u},81059:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BaseInput=void 0;var s=i(a(58527)),n=i(a(72779)),o=r(a(2784)),l=i(a(32960)),d=i(a(11896)),u=r(a(91540)),c=i(a(50935)),h=i(a(93735)),f=i(a(81646)),p=i(a(24529)),m=i(a(19117)),_=i(a(81857)),v=i(a(28515)),g=i(a(6660)),E=i(a(96697)),y=i(a(44343)),S=i(a(17957)),C=i(a(61941)),T=i(a(21193)),M=a(66615),b=i(a(34293)),P=i(a(95580)),A=i(a(53633)),I=a(86145);class O extends o.Component{constructor(...e){super(...e),this.__changeDueToReset=!1,this.__isMounted=!0,this.__isComposing=!1,this.containerRef=null,this.selection=this.props.initialSelection,this.state={direction:w(this.props.initialValue||""),focused:!1,value:this.props.initialValue||""},this.trigger=(e,t=[])=>{var a=this._hookMap[e];a&&a(...t)},this.serializeTextBeforeCursor=()=>(0,P.default)(this.refInput||document.createElement("span"),window.getSelection()),this._hasFocus=(e=this.refInput)=>{if(!e)return!1;var{activeElement:t}=document;return!!t&&(t===e||e.contains(t))},this.forceFocus=(e=!1)=>{if(!this.props.readOnly&&this.__isMounted){var{refInput:t}=this;if(t){var a=this._hasFocus(t);if(!a||e)if(a||g.default.focus(t),!e&&this.selection)this._restoreSelection(this.selection);else{var r=window.getSelection();r&&r.rangeCount&&(r.selectAllChildren(t),r.collapseToEnd())}}}},this.focus=(e=!1)=>{this._hasFocus()&&!e||setTimeout((()=>{this.forceFocus(e)}),0)},this.reset=(e="")=>{this.__changeDueToReset=!0,this.selection=null,this._setValue(e)},this._setValue=e=>{if(e!==this.state.value){var t=e||"";this.setState({value:t,direction:w(t)},(()=>{this.trigger(E.default.CHANGE,[t]),this.props.onChange&&this.props.onChange(t)}))}},this.onSelect=()=>{this.selection=this.getSelection(),this.props.onSelect&&this.props.onSelect(this.selection)},this.shouldComponentUpdate=(e,{value:t,focused:a,direction:r})=>{if(null!=this.refInput&&this.props.readOnly!==e.readOnly&&this.refInput.setAttribute("contentEditable",String(!e.readOnly)),a!==this.state.focused&&this.containerRef&&(a?this.containerRef.classList.add("focused"):this.containerRef.classList.remove("focused")),r!==this.state.direction&&this.refInput&&this.refInput.setAttribute("dir",r),this.__changeDueToReset){this.__changeDueToReset=!1;var i=(0,A.default)(t,this._plugins);this.refInput&&(this.refInput.innerHTML=i)}var s=!t.length&&!!this.state.value.length,n=!!t.length&&!this.state.value.length;if(!n&&!s)return!1;var o=n?"hidden":"visible";return this._refPlaceholder&&this._refPlaceholder.setAttribute("style","visibility: ".concat(o)),!1},this.componentWillUnmount=()=>{this.__isMounted=!1,this.refInput&&(this.refInput.restoreFocus=null)},this.onInput=()=>{var{refInput:e}=this,t=e?(0,b.default)(e,this._plugins):"",a=this.props.multiline&&"\n"!==t?t:t.replace(/\n$/,""),{maxLength:r}=this.props;if(null!=r&&(0,I.numCodepoints)(a)>r){var i=this.selection;return e&&(e.innerHTML=(0,A.default)(this.state.value,this._plugins)),void(i&&this._restoreSelection(i))}this.trigger(E.default.INPUT),this._setValue(a)},this.onPaste=e=>{e.preventDefault(),e.stopPropagation();var t=new v.default(e.clipboardData),{onFiles:a,onTextPaste:r}=this.props;t.hasFiles()&&a&&a(t)||t.hasText()&&t.getText(this.props.textPasteMimePriority).then((e=>{if(e&&(!r||!r(e))){var t=this.length-this._selectionLength,{maxLength:a}=this.props;if(null!=a&&t+(0,I.numCodepoints)(e)>a){var{onMaxPasteExceeded:i}=this.props;return i&&i()}this.replaceSelection(e)}}))},this._onBeforeInput=e=>{if(this.props.readOnly)return!0;var{maxLength:t}=this.props;if(null==t)return!1;var a=e.data.charCodeAt(0);if(8===a||127===a)return!1;var r=t+this._selectionLength-this.length;return(0,I.numCodepoints)(e.data)>r},this.onKeyDown=e=>!(!this.props.onKeyDown||!this.props.onKeyDown(e))||13===e.which&&(this.props.multiline&&function(e){return 13===e.which&&(e.shiftKey||e.altKey||e.ctrlKey)}(e)?(""===this.state.value.trim()&&this.cursorIsAtStart()||this._insertNewLineAtSelection(),!0):(this.props.onEnter&&this.props.onEnter(e),!0)),this.componentDidMount=()=>{this.refInput&&(this.refInput.restoreFocus=this.focus),this.trigger(E.default.MOUNT)},this.onBlur=e=>{this.setState({focused:!1}),this.props.onBlur&&this.props.onBlur(e)},this.onFocus=e=>{this.setState({focused:!0}),this.props.onFocus&&this.props.onFocus(e)},this._onCompositionStart=()=>!(this.__isComposing=!0),this._onCompositionEnd=()=>this.__isComposing=!1,this.setRefContainer=e=>{this.containerRef=e},this._setRefPlaceholder=e=>{this._refPlaceholder=e},this.setRefInput=e=>{this.refInput=e},this.getRefInput=()=>this.refInput}get value(){return this.state.value}get _selectionLength(){if(this.props.readOnly)return 0;this._hasFocus(this.refInput)||g.default.focus(this.refInput);var e=window.getSelection();return e.rangeCount?(0,I.numCodepoints)((0,b.default)(e.getRangeAt(0).cloneContents(),this._plugins)):0}get length(){return(0,I.numCodepoints)(this.state.value)}serialize(e){var t=e||this.state.value;return this._plugins.reduce((([e,t],a)=>a.serialize?a.serialize(e,t):[e,t]),[t,{}])}_adjustScrollAfterModification(e,t,a){var{scrollHeight:r,clientHeight:i}=e;r<=i||(e.scrollTop=(a||0)+(r-t))}_ensureFocus(e){this._hasFocus(e)||(g.default.focus(e),this.selection&&this._restoreSelection(this.selection))}replaceSelection(e,t=!1){var{refInput:a}=this;if(!this.props.readOnly&&null!=a){this._ensureFocus(a);var r=this._trimToFit(e);if(r.length||t){this.props.multiline||(r=r.replace(/\r?\n/g,""));var i=window.getSelection().getRangeAt(0);(function({startOffset:e,startContainer:t},a){return 0===e&&t!==a&&(!(!t||!t.previousSibling)&&"\n"===t.previousSibling.textContent.slice(-1))})(i,a)&&(r="\n".concat(r)),i.deleteContents();var{scrollHeight:s,scrollTop:n}=a;document.execCommand("insertHTML",!1,(0,A.default)(r,this._plugins)),this.onSelect(),this._adjustScrollAfterModification(a,s,n)}}}_insertNewLineAtSelection(e=""){this.props.multiline&&this._insertTextAtSelection("\n"+e)}_insertTextAtSelection(e){var{refInput:t}=this;if(this.props.multiline&&!this.props.readOnly&&null!=t){this._ensureFocus(t);var{scrollHeight:a,scrollTop:r}=t,i=this.cursorIsAtEnd(),s=document.createTextNode(e),n=window.getSelection(),o=n.getRangeAt(0);if(o.deleteContents(),o.insertNode(s),/^\n/.test(e)&&a===t.scrollHeight&&i){o.setStartBefore(s);var l=document.createTextNode("\n");o.insertNode(l)}o.setStartAfter(s),o.setEndAfter(s),o.collapse(!1),n.removeAllRanges(),n.addRange(o),t.normalize(),this._adjustScrollAfterModification(t,a,r),t.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!0}))}}deleteSelection(){this.replaceSelection("",!0)}_restoreSelection(e){var{refInput:t}=this;if(t){var{anchorIndex:a,focusIndex:r}=e,{anchorOffset:i,focusOffset:s}=e,{childNodes:n}=t,o=-1===a?t:n[a],l=-1===r?t:n[r];if(o&&l)try{o===l&&i>s&&([i,s]=[s,i]);var d=document.createRange();d.setStart(o,i),d.setEnd(l,s);var u=window.getSelection();u.removeAllRanges(),u.addRange(d);try{var c=document.createRange();c.setStart(l,s),c.setEnd(l,s);var h=c.getBoundingClientRect(),{bottom:f,top:p}=h,m=this.refInput&&this.refInput.getBoundingClientRect(),{bottom:_,top:v}=m||{};if(p>=v&&f<=_)return;this.refInput&&(this.refInput.scrollTop+=f<v?p-v:f-_)}catch(e){}}catch(e){this.focus(!0)}}}getSelection(){var{refInput:e}=this;if(!e||document.activeElement!==e)return null;for(var t,a=window.getSelection(),{anchorNode:r,anchorOffset:i,focusNode:s,focusOffset:n}=a,o=e.childNodes,l=-1,d=-1,u=0;(l<0||d<0)&&(t=o[u++]);)r===t&&(l=u-1),s===t&&(d=u-1);return{anchorIndex:l,anchorOffset:i,focusIndex:d,focusOffset:n}}_trimToFit(e){var{maxLength:t}=this.props;if(null==t)return e;var a=t+this._selectionLength-this.length;return a<=0?"":(0,I.substring)(String(e),0,a)}cursorIsAtEnd(){return null!=this.refInput&&(!(!this.state.focused||""!==this.state.value)||(0,m.default)(this.refInput))}cursorIsAtStart(){return!(!this.state.focused||""!==this.state.value)||(0,_.default)(this.refInput)}isFocused(){return this.state.focused}get isComposing(){return this.__isComposing}blur(){(0,C.default)(this.refInput,"this.refInput").blur()}select(){var e=(0,C.default)(this.refInput,"this.refInput"),t=document.createRange();t.selectNodeContents(e);var a=window.getSelection();a.removeAllRanges(),a.addRange(t)}_getTabOrder(){return null!=this.props.tabOrder?this.props.tabOrder:this.props.readOnly?null:c.default.TAB_ORDERS.COMPOSE_BOX_INPUT}render(){var e,{props:{placeholder:t},state:{value:a,direction:r}}=this,i=a.length>0?"hidden":"visible",d=(0,n.default)(T.default.input,{[T.default.compose]:"compose"===this.props.theme,[T.default.default]:"default"===this.props.theme||"media-caption"===this.props.theme||"text-input"===this.props.theme,[T.default.large]:"large"===this.props.theme,[T.default.media]:"media-caption"===this.props.theme,[T.default.invite]:"v4-invite-caption"===this.props.theme,[T.default.small]:"small"===this.props.theme,[T.default.status]:"status-reply"===this.props.theme,[T.default["list-search"]]:"list-search"===this.props.theme,[T.default.textInput]:"text-input"===this.props.theme});return o.createElement(y.default,{className:d,handlers:this._hotKeyMap,onRef:this.setRefContainer},o.createElement("div",{"data-a8n":l.default.key("pluggable-input-placeholder"),className:T.default.placeholder,ref:this._setRefPlaceholder,style:{visibility:i}},t),o.createElement("div",(0,s.default)({},this._handlerMap,{"data-a8n":null!==(e=l.default.key(this.props.a8n))&&void 0!==e?e:l.default.key("pluggable-input-body"),className:(0,n.default)(T.default.body,M.SELECTABLE_INPUT_CSS_CLASS),contentEditable:!this.props.readOnly,dangerouslySetInnerHTML:{__html:(0,A.default)(a,this._plugins)},"data-tab":this._getTabOrder(),dir:r,ref:this.setRefInput,spellCheck:this.props.spellCheck,style:this.props.style})))}}t.BaseInput=O;t.default=e=>class extends O{constructor(...t){var a,r,i;super(...t),this._plugins=[...e.map((e=>(e instanceof d.default&&e.initialize(this),e))),(i=this,{handlers:(a=i,r=N,r.reduce(((e,t)=>(Array.isArray(t)?e[t[0]]=a[t[1]]:e[t]=a[t],e)),{}))})],this._handlerMap=(0,h.default)(this._plugins,this),this._hookMap=(0,f.default)(this._plugins,this),this._hotKeyMap=(0,p.default)(this._plugins,this)}};var N=["onBeforeInput","onBlur","onCompositionEnd","onCompositionStart","onFocus","onInput","onKeyDown","onPaste","onSelect"];function w(e){return u.dir(e)||S.default.LR("ltr","rtl")}},40789:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Component=t.ThemeOptions=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(79711)),l=i(a(11632)),d=i(a(54359)),u=i(a(87165)),c=i(a(6870)),h=a(13414),f=i(a(14517)),p=i(a(63252)),m=i(a(67110)),_=i(a(67134)),v=i(a(17693)),g=i(a(74824)),E=(0,p.default)({MEDIA_CAPTION:null,EMOJI_INPUT:null});t.ThemeOptions=E;var y={omitted:"",query:"",emojiList:null};class S extends n.Component{constructor(...e){super(...e),this.state=y,this.onEmoji=e=>{m.default.increment(e),this.props.plugin.handleSelect(e)},this.onSearch=e=>{var t=e?e.trim():e,a=this.state.omitted,{chat:r}=this.props;if(r&&r.isGroup&&t&&t.includes("@"))this.setState({emojiList:null,query:""});else if(!a||!t.startsWith(a))if(t.length<2){if(!this.state.emojiList)return;this.setState({emojiList:""===t?null:(0,l.default)(t),query:t})}else{var i=(0,l.default)(t);i.length?this.setState({omitted:null,emojiList:i,query:t}):this.setState({emojiList:null,query:t})}},this.onInactive=()=>{this.setState(y)},this.onEscape=()=>{this.setState({emojiList:null,query:"",omitted:this.state.query})},this.onKeyPress=e=>{e.preventDefault();var{chat:t}=this.props;t&&o.default.pasteChatTextInput(t,String.fromCharCode(e.charCode))},this.onKeyDown=e=>("Backspace"===e.key&&(e.preventDefault(),document.execCommand("delete"),this.props.plugin.ctx.focus()),!1),this.onEnter=e=>{if(!(0,f.default)(e)){var t=this._emojiSuggestionsPanel;return t?(e.preventDefault(),e.stopPropagation(),t.pickSelectedEmoji(),!1):void 0}},this._onLeft=e=>{if(!(0,f.default)(e)){var t=this._emojiSuggestionsPanel;t&&(e.preventDefault(),e.stopPropagation(),t.moveSelectionLeft())}},this._onRight=e=>{if(!(0,f.default)(e)){var t=this._emojiSuggestionsPanel;t&&(e.preventDefault(),e.stopPropagation(),t.moveSelectionRight())}},this.releaseFocus=()=>{this.props.plugin.ctx.focus()}}componentDidMount(){var e=this.props.plugin;e.registerHandler(this,c.default.EMOJI_SEARCH,this.onSearch),e.registerHandler(this,c.default.EMOJI_INACTIVE,this.onInactive),e.registerHandler(this,c.default.EMOJI_ENTER,this.onEnter),e.registerHandler(this,c.default.EMOJI_LEFT,this._onLeft),e.registerHandler(this,c.default.EMOJI_RIGHT,this._onRight),e.registerHandler(this,c.default.EMOJI_TAB,this.onEnter)}componentWillUnmount(){var e=this.props.plugin;e.unregisterHandler(this,c.default.EMOJI_SEARCH),e.unregisterHandler(this,c.default.EMOJI_INACTIVE),e.unregisterHandler(this,c.default.EMOJI_ENTER),e.unregisterHandler(this,c.default.EMOJI_LEFT),e.unregisterHandler(this,c.default.EMOJI_RIGHT),e.unregisterHandler(this,c.default.EMOJI_TAB)}_renderTab(e){return n.createElement("div",{className:d.default.searchBody,key:"RECENT"},n.createElement(u.default,{ref:(0,h.GetRef)((e=>{this._emojiSuggestionsPanel=e})),key:this.state.query,onEmoji:this.onEmoji,onFocusRelease:this.onInactive,onSkinTonePicker:this.props.onSkinTonePicker,emojiList:e}))}render(){var e=this.state.emojiList,t=e?n.createElement(v.default,{displayName:"EmojiSuggestions",escapable:!0,requestDismiss:this.onEscape,requestFocus:this.releaseFocus},n.createElement("div",{className:(0,s.default)(d.default.overlayContainer,{[d.default.mediaCaption]:this.props.theme===E.MEDIA_CAPTION,[d.default.emojiInput]:this.props.theme===E.EMOJI_INPUT})},n.createElement("div",{className:d.default.resultsContainer,"data-list-scroll-container":"false"},n.createElement("div",{className:d.default.emojiSearch,onKeyPress:this.onKeyPress,onKeyDown:this.onKeyDown},this._renderTab(e))))):null;return n.createElement(g.default,{component:"div",className:d.default.positioningContainer,transitionName:"emoji-search-panel-slide-up"},t)}}var C=S;t.Component=C;var T=(0,_.default)(S);t.default=T},6870:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=(0,r(a(63252)).default)({EMOJI_ENTER:void 0,EMOJI_INACTIVE:void 0,EMOJI_LEFT:void 0,EMOJI_RIGHT:void 0,EMOJI_SEARCH:void 0,EMOJI_TAB:void 0});t.default=i},67804:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(11896)),s=r(a(12396)),n=r(a(6870)),o=r(a(96697)),l=r(a(25812)),d=r(a(23340)),u={ArrowLeft:n.default.EMOJI_LEFT,ArrowRight:n.default.EMOJI_RIGHT,Enter:n.default.EMOJI_ENTER,Tab:n.default.EMOJI_TAB};class c extends i.default{constructor(...e){super(...e),this.hooks={[o.default.CHANGE](e,{refInput:t}){""===t.textContent&&this.handle(n.default.EMOJI_INACTIVE)}},this.handlers={onKeyDown(e,t){8!==e.keyCode&&e.repeat&&(this._lastSyncKeyDownWasRepeat=!0,setTimeout((()=>{delete this._lastSyncKeyDownWasRepeat}),0));var a=u[e.key];return!!a&&this.handle(a,[e,t])},onSelect(e,t){if(this.ctx.isComposing)return!1;if(this._lastSyncKeyDownWasRepeat)return!1;var a=window.getSelection();if(!a.modify)return!1;var r=h(t,a);return r?(r=r.slice(1),this.handle(n.default.EMOJI_SEARCH,[r]),!1):this.handle(n.default.EMOJI_INACTIVE)}}}handleSelect(e){this.ctx.forceFocus(),h(this.ctx,window.getSelection(),!0)&&(this.ctx.replaceSelection(e),this.handle(n.default.EMOJI_INACTIVE))}}function h(e,t,a=!1){var r=null,i=null,n="",o=0,u=null;return(0,l.default)(e,t,((e,t,a)=>{if("@"===e||" "===e&&" "===i)return!0;if(":"===i)if(" "===r);else{if(s.default.isEmoji(e))return u=n,!0;if(/\W/.test(e))return u=a.slice(t+1)+n,!0}return 0===t&&(n=a+n),r=i,i=e,(o+=1)>=50||void 0})),!u&&o<50&&":"===i&&(u=n),a&&u&&u.length&&(0,d.default)(t,u.length),u}t.default=c},37688:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.isEmojiEl=function(e){return!!e&&(e instanceof HTMLElement&&!!e.dataset.isEmoji)},t.default=void 0;var i=r(a(72779)),s=a(91460),n=r(a(79711)),o=r(a(50935)),l=r(a(12396)),d=r(a(96697)),u=a(66615),c=!1;var h={serializers:[["img.emoji",e=>e.getAttribute("alt")||""]],parsers:[e=>e.replace(l.default.emojiRegex(),((e,t)=>{var a=(e=>{var t=l.default.getGlyphId(e);if(null==t)return null;var a=(0,u.createSelectableElement)("img",e);a.setAttribute("alt",e),a.setAttribute("draggable","false"),a.setAttribute("class",(0,i.default)(a.getAttribute("class"),l.default.getCssClasses(t)));var r=l.default.getStyle(t);return Object.assign(a.style,r),a.setAttribute("src",o.default.ONE_BY_ONE_TRANS_GIF),a.dataset.isEmoji="true",a})(t);return a?a.outerHTML:""}))],hooks:{[d.default.MOUNT](){c||(c=!0,new Promise((e=>{0===n.default.uiBusy&&e(),n.default.once("ui_idle",(()=>{e()}))})).then((()=>(0,s.delayMs)(0))).then((()=>{document.execCommand("enableObjectResizing",!1,!1)})).catch((()=>{})))}},handlers:{onBeforeInput(e,t){var a=l.default.emojiRegex().exec(e.data);return!!a&&(e.cancelable&&t.replaceSelection(a[0]),!0)},onClick(e){if(!e.target)return!1;var t=e.target.getAttribute("class");if(!t||!~t.indexOf("emoji"))return!1;var a=window.getSelection(),r=new Range;return e.pageX<e.target.x+e.target.width/2?(r.setStartBefore(e.target),r.setEndBefore(e.target)):(r.setStartAfter(e.target),r.setEndAfter(e.target)),a.removeAllRanges(),a.addRange(r),!0}}};t.default=h},79180:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=(0,r(a(63252)).default)({SEARCH:void 0,INACTIVE:void 0,ENTER:void 0,TAB:void 0,DOWN:void 0,UP:void 0});t.default=i},20881:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(11896)),n=a(91540),o=i(a(97990)),l=i(a(43334)),d=i(a(50935)),u=i(a(7470)),c=i(a(12396)),h=i(a(79180)),f=r(a(58390)),p=i(a(8494)),m=i(a(96697)),_=i(a(76774)),v=i(a(64452)),g=i(a(27428)),E=i(a(95716)),y=i(a(4314)),S=i(a(52232)),C=i(a(73745)),T=i(a(62139)),M=i(a(8347)),b=i(a(25812)),P=i(a(23340)),A=a(66615),I=i(a(77626)),O=a(75637),N=2*d.default.MAX_PUSHNAME_LENGTH,w=/\u200B((\d+)@c\.us)\u200B/g,D={Enter:h.default.ENTER,Tab:h.default.TAB,ArrowUp:h.default.UP,ArrowDown:h.default.DOWN};class R extends s.default{constructor(...e){super(...e),this.serializers=[["span[data-mention-jid]",e=>(function(e){if(!e.hasChildNodes())return;for(;e.childNodes.length;)e.removeChild(e.childNodes[0])}(e),"​".concat(e.getAttribute("data-mention-jid")||"","​"))]],this.parsers=[e=>e.replace(w,((e,t)=>{var a=u.default.get(t);if(!a)return t;var r=!a.isMyContact&&a.notifyName?a.notifyName:a.formattedName,i="@".concat(r),s=l.default.toArray().find((e=>e.active));if(null==s||!s.isGroup)return i;if(!s.groupMetadata.participants.get(t))return i;var o=(0,A.createSelectableElement)("span");o.dataset.mentionJid=a.id.toString();var d=document.createElement("span");d.className="at-symbol",d.appendChild(document.createTextNode("@"));var c=document.createElement("span");return c.setAttribute("dir",(0,n.dir)(r)||"auto"),c.appendChild(document.createTextNode(r)),o.appendChild(d),o.appendChild(c),o.dataset.originalName=o.textContent||"",o.dataset.plainText=o.textContent||"",o.dataset.appTextTemplate="​".concat(t,"​"),o.outerHTML}))],this.serialize=(e,t)=>(t.mentionedJidList=[],[e.replace(w,((e,a,r)=>(t.mentionedJidList.push((0,O.createWid)(a)),"@".concat(r)))),t]),this.handleSelect=e=>{var t=window.getSelection();if(function(e,t){var{anchorNode:a,anchorOffset:r}=t;a&&a===e.containerRef&&(r=(a=a.childNodes[r]).textContent.length);if(!a||a&&a.nodeType!==Node.TEXT_NODE)return!1;var i=a.textContent.slice(r),s=a;for(;0===i.length;){if(!(s=s.nextSibling)||s.nodeType!==Node.TEXT_NODE)return!1;i=s.textContent}return" "===i.charAt(0)}(this.ctx,t)&&t.modify("move","forward","character"),U(this.ctx,t,!0)){t=window.getSelection();var{refInput:a}=this.ctx,{mentionAfterEnd:r}=a?L(a):{};r&&G(r),this.ctx.replaceSelection("​".concat(e.id.toString(),"​ ")),this.handle(h.default.INACTIVE)}},this.hooks={[m.default.CHANGE](e,{refInput:t}){if(I.default.isGecko)if(""===e){for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createElement("br"))}else for(var a=t.querySelectorAll("[data-mention-jid]"),r=0;r<a.length;++r){var{nextSibling:i}=a[r];i&&(i instanceof Element&&"BR"===i.tagName&&"_moz"===i.getAttribute("type")&&i.remove())}},[m.default.INPUT]({refInput:e}){var t=e.querySelectorAll("[data-mention-jid]");if(t.length)for(var a=0;a<t.length;++a){var r=t[a];if(r.textContent!==r.getAttribute("data-original-name")){var i=r.querySelector(".at-symbol"),s=r.querySelector("span [dir]"),n=window.getSelection(),o=n.focusOffset,l=n.focusNode&&n.focusNode.parentNode&&n.focusNode.parentNode.className,d=r.parentNode,u=document.createDocumentFragment();i&&u.appendChild(document.createTextNode(i.textContent)),s&&u.appendChild(document.createTextNode(s.textContent));var c="at-symbol"===l?u.firstChild:u.lastChild;if(1===u.childNodes.length&&u.lastChild&&(o="@"===u.lastChild.textContent?1:0),d.replaceChild(u,r),n.rangeCount<=0)return;var h=n.getRangeAt(0);h.setEnd(c,o),h.collapse(!1),n.removeAllRanges(),n.addRange(h)}}}},this.handlers={onKeyDown(e,t){var{key:a}=e;if(!this.ctx.isComposing&&("Backspace"===a||"Delete"===a&&(0,E.default)(e))){var r=window.getSelection();if(r.isCollapsed){var{key:i}=e,{mentionBeforeStart:s,mentionAfterEnd:n}=L(this.ctx.refInput),o=null;if("Delete"===i&&n&&(o=n),"Backspace"===i&&s&&(o=s),o){r.removeAllRanges();var l=document.createRange();l.selectNode(o),r.addRange(l),k(this.ctx.refInput),window.setTimeout((()=>{(0,M.default)()}),0)}}else k(this.ctx.refInput)}var d=D[e.key];return!!d&&this.handle(d,[e,t])},onKeyPress(){return this.ctx.isComposing||k(this.ctx.refInput),!1},onBlur(){return this.handle(h.default.INACTIVE),!1},onSelect(e,t){if(I.default.isTrident||this.ctx.isComposing)return!1;var a=window.getSelection();a.isCollapsed&&a.rangeCount>0&&a.anchorNode&&function(e,t){var{anchorNode:a,anchorOffset:r}=t;if(a&&a===e.refInput){if(0===r)return!0;a=a.childNodes[t.getRangeAt(0).startOffset],r=(0,C.default)(a)?a.textContent.length:0}if((0,g.default)(a,"br"))return!0;if(!a)return!1;if(!(0,C.default)(a))return!1;if("\n"===a.textContent)return!0;var i=a.textContent.slice(0,r);if(""===i){var s=(0,f.default)(a,f.DIR.PREV);if(!s)return!0;if(!(0,C.default)(s))return!1;i=s.textContent}return"\n"===i.charAt(i.length-1)}(t,a)&&(0,M.default)();var r=U(this.ctx,a);if(!r||a.focusNode&&a.focusNode.parentElement&&(0,y.default)(a.focusNode.parentElement.parentElement))return this.handle(h.default.INACTIVE),!1;var i=r.slice(1);return this.handle(h.default.SEARCH,[i]),!1},onPaste(){return k(this.ctx.refInput),!1}}}}function L(e){var t=window.getSelection();if(0===t.rangeCount)return{};var a,r,i,s,n,l,d=t.getRangeAt(0),{startContainer:u,startOffset:c,endContainer:h,endOffset:p}=d,m=h instanceof HTMLElement?h.childNodes.length===p:h.textContent&&h.textContent.length===p;0===c&&(a=u===e?e.childNodes[c]:(0,o.default)(u,(t=>t&&t!==e&&(t.parentElement===e||(0,S.default)(t,0))?[t.parentElement]:[]),(t=>t&&t.parentElement===e))),m&&(r=h===e?e.childNodes[p]:(0,o.default)(h,(t=>t&&t!==e&&(t.parentElement===e||(0,S.default)(t,-1))?[t.parentElement]:[]),(t=>t&&t.parentElement===e)));var _=(0,f.default)(a,f.DIR.PREV);(0,y.default)(_)&&(i=_),(0,y.default)(a)&&(s=a),(0,y.default)(r)&&(n=r,d.collapsed&&(i=i||n));var v=(0,f.default)(r,f.DIR.NEXT);return(0,y.default)(v)&&(l=v,d.collapsed&&(s=s||l)),{mentionBeforeStart:i,mentionAfterStart:s,mentionBeforeEnd:n,mentionAfterEnd:l}}function k(e){var{mentionBeforeStart:t,mentionAfterStart:a,mentionBeforeEnd:r,mentionAfterEnd:i}=L(e);if(t||a||r||i){var s=window.getSelection(),n=s.getRangeAt(0),o=n.collapsed,l=!1;if(t){var d=F(t);l=!0,n.setStartAfter(d),n.collapsed&&n.setEndAfter(d)}if(a){var u=G(a);l=!0,n.setStartBefore(u),o&&n.setEndBefore(u)}if(!o){if(r){var c=F(r);l=!0,n.setEndAfter(c)}if(i){var h=G(i);l=!0,n.setEndBefore(h)}}l&&(s.removeAllRanges(),s.addRange(n))}}function x(){var e=document.createElement("span");return e.textContent="​",e.contentEditable="false",setTimeout((()=>(0,T.default)(e)),0),e}function F(e){var t=x();return(0,_.default)(t,e),t}function G(e){var t=x();return(0,v.default)(t,e),t}function U(e,t,a=!1){var r=(0,p.default)(e.refInput,"BACKWARD");if((0,y.default)(r))return"";var i=null,s="",n=0,o=null;return(0,b.default)(e,t,((e,t,a)=>{if("@"===i){if(c.default.isEmoji(e))return o=s,!0;if(/\W/.test(e))return o=a.slice(t+1)+s,!0}if(0===t&&(s=a+s),i=e,(n+=1)>=N)return!0})),!o&&n<N&&"@"===i&&(o=s),a&&o&&o.length&&(0,P.default)(t,o.length),o}t.default=R},45018:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(46478)),l=i(a(91581)),d=a(62902),u=i(a(97580));class c extends n.PureComponent{render(){var{theme:e,contact:{id:t,formattedName:a,isMyContact:r,notifyName:i},onMouseDown:c,onMouseUp:h,onMouseEnter:f,term:p,selected:m}=this.props,_=d.Configuration.Search({terms:p?[p]:[],boundary:!0});return n.createElement("div",{className:(0,s.default)(u.default.mentionsResult,{[u.default.mediaCaption]:"mediaCaption"===e,[u.default.selected]:!0===m}),onMouseDown:c,onMouseUp:h,onMouseEnter:f},n.createElement("div",{className:u.default.resultImage},n.createElement(o.default,{id:t,size:32})),n.createElement("div",{className:u.default.textContact,dir:"auto"},n.createElement(l.default,{text:a,formatters:_})),n.createElement("div",{className:u.default.textPushname,dir:"auto"},!r&&i?n.createElement(l.default,{text:"~".concat(i),formatters:_}):null))}}t.default=c},57817:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ThemeOptions=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(79180)),l=i(a(35598)),d=i(a(63097)),u=i(a(22004)),c=i(a(14517)),h=i(a(63252)),f=a(40881),p=i(a(45018)),m=i(a(40207)),_=i(a(31033)),v=i(a(17693)),g=i(a(74824)),E=(0,h.default)({MEDIA_CAPTION:null});t.ThemeOptions=E;var y={active:!1,offset:0,omitted:"",query:"",results:[],scrollTop:0};class S extends n.Component{constructor(...e){super(...e),this.state=y,this.flatListController=new u.default,this.setRefList=e=>{this.list=e},this.onEnter=T((()=>this.handleSelect(this.state.offset)),this),this.onInactive=T((()=>this.setState(y)),this),this.onSearch=e=>{var{state:{omitted:t}}=this;if((!t||!e.startsWith(t))&&this.props.chat&&this.props.chat.isGroup){var{chat:{groupMetadata:{participants:a}}}=this.props;this.setState({active:!0,offset:0,omitted:null,query:e,results:(0,f.getResults)(e,a)})}},this.onEscape=()=>{this.setState({active:!1,offset:0,omitted:this.state.query,query:"",results:[]})},this.onUp=T((()=>{var e=Math.max(this.state.offset-1,0);this.setOffset(e)}),this),this.onDown=T((()=>{var e=this.state.results.length-1,t=Math.min(this.state.offset+1,e);this.setOffset(t)}),this),this.renderItem=e=>{var{index:t,contact:a}=e;return n.createElement(p.default,{key:a.id.toString(),contact:a,term:this.state.query,selected:t===this.state.offset,theme:this.props.theme===E.MEDIA_CAPTION?"mediaCaption":null,onMouseDown:e=>e.preventDefault(),onMouseUp:()=>this.handleSelect(t),onMouseEnter:()=>this.setOffset(t,!0)})}}componentDidMount(){var{plugin:e}=this.props;e.registerHandler(this,o.default.ENTER,this.onEnter),e.registerHandler(this,o.default.TAB,this.onEnter),e.registerHandler(this,o.default.SEARCH,this.onSearch),e.registerHandler(this,o.default.INACTIVE,this.onInactive),e.registerHandler(this,o.default.UP,this.onUp),e.registerHandler(this,o.default.DOWN,this.onDown)}componentWillUnmount(){var{plugin:e}=this.props;e.unregisterHandler(this,o.default.ENTER),e.unregisterHandler(this,o.default.TAB),e.unregisterHandler(this,o.default.SEARCH),e.unregisterHandler(this,o.default.INACTIVE),e.unregisterHandler(this,o.default.UP),e.unregisterHandler(this,o.default.DOWN)}handleSelect(e){var t=this.state.results[e];if(t&&t.id){var a=this.props.chat.assignedColor(t.id);this.props.plugin.handleSelect(t,a+"")}}setOffset(e,t=!1){e!==this.state.offset&&this.setState({offset:e},(()=>{!t&&this.list&&this.list.scrollIntoViewIfNeeded(e)}))}renderList(){var{results:e,query:t,offset:a,active:r}=this.state;if(!r||!e.length)return null;var i=e.map(((e,r)=>({height:52,itemKey:e.id.toString(),contentKey:"".concat(t).concat(r===a?"-selected":""),index:r,contact:e})));return n.createElement(v.default,{displayName:"MentionSuggestions",escapable:!0,requestDismiss:this.onEscape,requestRecentFocusOnUnmount:!1},n.createElement("div",{className:(0,s.default)(_.default.overlayContainer,{[_.default.mediaCaption]:this.props.theme===E.MEDIA_CAPTION})},n.createElement(d.default,{className:_.default.resultsContainer,flatListControllers:[this.flatListController]},n.createElement(l.default,{ref:this.setRefList,data:i,flatListController:this.flatListController,direction:"vertical",renderItem:this.renderItem}))))}render(){return n.createElement(g.default,{component:"div",className:_.default.positioningContainer,transitionName:"slide-up"},this.renderList())}}S.CONCERNS={chat:["groupMetadata","isGroup"]};var C=(0,m.default)(S,S.CONCERNS);function T(e,t){return(a,r)=>!(!t.state.active||!t.state.results.length)&&((!a||!(0,c.default)(a))&&(e.call(t,a,r),!0))}t.default=C},47912:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=(0,r(a(63252)).default)({FILTER:void 0,INACTIVE:void 0,ENTER:void 0,TAB:void 0,DOWN:void 0,UP:void 0,BACKSPACE:void 0});t.default=i},79445:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(11896)),s=r(a(47912)),n=r(a(90633)),o=r(a(23340)),l=r(a(77626)),d=(0,n.default)(25,"/"),u={Enter:s.default.ENTER,Tab:s.default.TAB,ArrowUp:s.default.UP,ArrowDown:s.default.DOWN,Backspace:s.default.BACKSPACE};class c extends i.default{constructor(...e){super(...e),this.handleSelect=e=>{e.useOnce();var t=window.getSelection(),a=d(this.ctx,t);null!=a&&((0,o.default)(t,a.length+1),this.ctx.replaceSelection(e.message),(0,o.default)(t,e.message.length),this.handle(s.default.INACTIVE))},this.handlers={onKeyDown(e,t){var a=u[e.key];return!!a&&this.handle(a,[e,t])},onSelect(){if(l.default.isTrident)return!1;if(this.ctx.isComposing)return!1;var e=window.getSelection(),t=d(this.ctx,e);return null==t?(this.handle(s.default.INACTIVE),!1):(this.handle(s.default.FILTER,[t]),!1)},onBlur(){return this.handle(s.default.INACTIVE),!1}}}}var h=new c;t.default=h},39665:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.logFilterEvent=function(e){new i.default.QuickReply({quickReplyAction:i.default.QUICK_REPLY_ACTION.ACTION_CHAT_IMPRESSION,quickReplyCount:e}).commit()},t.logSelectEvent=function(){new i.default.QuickReply({quickReplyAction:i.default.QUICK_REPLY_ACTION.ACTION_CHAT_CLICK,quickReplyKeywordMatched:!1}).commit()},t.logCancelEvent=function(){new i.default.QuickReply({quickReplyAction:i.default.QUICK_REPLY_ACTION.ACTION_CHAT_CLICK_CANCEL}).commit()};var i=r(a(40210))},71722:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(91581)),l=a(62902),d=i(a(86249)),u=i(a(40207));class c extends n.Component{render(){var{quickReply:{shortcut:e,message:t},query:a,selected:r,onMouseDown:i,onMouseEnter:u,onMouseUp:c}=this.props,h=e.slice(a.length);return n.createElement("div",{className:(0,s.default)(d.default.result,{[d.default.selected]:r}),onMouseDown:i,onMouseUp:c,onMouseEnter:u},n.createElement("span",{className:d.default.slash},"/"),n.createElement(o.default,{className:d.default.shortcutPrefix,text:a}),n.createElement(o.default,{className:d.default.shortcutSuffix,text:h}),n.createElement(o.default,{className:d.default.message,ellipsify:!0,text:t,formatters:l.Configuration.QuickReply()}))}}c.CONCERNS={quickReply:["shortcut","message"]};var h=(0,u.default)(c,c.CONCERNS);t.default=h},69666:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(12436)),n=i(a(72779)),o=r(a(2784)),l=i(a(47912)),d=i(a(35598)),u=i(a(63097)),c=i(a(22004)),h=i(a(14517)),f=i(a(20642)),p=a(39665),m=i(a(75537)),_=i(a(71722)),v=i(a(85682)),g=i(a(17693)),E=i(a(74824)),y={query:"",results:[],active:!1,offset:0};class S extends o.Component{constructor(...e){super(...e),this.state=y,this.flatListController=new c.default,this.setRefList=e=>{this.list=e},this.onUpdate=C((()=>this._onFilter(this.state.query)),this),this._onFilter=e=>{m.default.synced()||this._syncIfNeeded();var t=m.default.filterShortcuts(e);t.length&&(0,p.logFilterEvent)(t.length),this.setState({query:e,results:t,active:!0,offset:0})},this.onInactive=C((()=>{this.setState(y)}),this),this.onSelect=C((()=>this.handleSelect(this.state.offset)),this),this.onUp=C((()=>{var e=Math.max(this.state.offset-1,0);this.setOffset(e)}),this),this.onDown=C((()=>{var e=this.state.results.length-1,t=Math.min(this.state.offset+1,e);this.setOffset(t)}),this),this._onBackspace=()=>{var e=window.getSelection().toString();this._lastInsertedText&&e===this._lastInsertedText&&(0,p.logCancelEvent)()},this.onEscape=()=>{this.setState(y)},this._syncIfNeeded=(0,s.default)((()=>{m.default.synced()||m.default.sync()}),1e3),this.renderItem=e=>{var{index:t,quickReply:a}=e;return o.createElement(_.default,{key:a.id,quickReply:a,query:this.state.query,selected:t===this.state.offset,onMouseDown:e=>e.preventDefault(),onMouseUp:()=>this.handleSelect(t),onMouseEnter:()=>this.setOffset(t,!0)})}}componentDidMount(){var{plugin:e}=this.props;e.registerHandler(this,l.default.ENTER,this.onSelect),e.registerHandler(this,l.default.TAB,this.onSelect),e.registerHandler(this,l.default.FILTER,this._onFilter),e.registerHandler(this,l.default.INACTIVE,this.onInactive),e.registerHandler(this,l.default.UP,this.onUp),e.registerHandler(this,l.default.DOWN,this.onDown),e.registerHandler(this,l.default.BACKSPACE,this._onBackspace),this.props.listeners.add(m.default,"add remove change:shortcut",this.onUpdate)}componentWillUnmount(){var{plugin:e}=this.props;e.unregisterHandler(this,l.default.ENTER),e.unregisterHandler(this,l.default.TAB),e.unregisterHandler(this,l.default.FILTER),e.unregisterHandler(this,l.default.INACTIVE),e.unregisterHandler(this,l.default.UP),e.unregisterHandler(this,l.default.DOWN),e.unregisterHandler(this,l.default.BACKSPACE),this._syncIfNeeded.cancel()}setOffset(e,t=!1){e!==this.state.offset&&this.setState({offset:e},(()=>{!t&&this.list&&this.list.scrollIntoViewIfNeeded(e)}))}handleSelect(e){var t=this.state.results[e];t&&t.id&&(this._lastInsertedText=t.message,(0,p.logSelectEvent)(),this.props.plugin.handleSelect(t))}renderList(){var{results:e,query:t,offset:a}=this.state,r=e.map(((e,r)=>({height:52,itemKey:e.id,contentKey:"".concat(t).concat(r===a?"-selected":""),index:r,quickReply:e})));return e.length?o.createElement(g.default,{displayName:"QuickReplySuggestions",escapable:!0,requestDismiss:this.onEscape},o.createElement("div",{className:(0,n.default)(v.default.overlayContainer)},o.createElement(u.default,{className:v.default.resultsContainer,flatListControllers:[this.flatListController]},o.createElement(d.default,{ref:this.setRefList,data:r,flatListController:this.flatListController,direction:"vertical",renderItem:this.renderItem})))):null}render(){return o.createElement(E.default,{component:"div",className:v.default.positioningContainer,transitionName:"slide-up"},this.renderList())}}function C(e,t){return(a,r)=>!(!t.state.active||!t.state.results.length)&&((!a||!(0,h.default)(a))&&(e.call(t,a,r),!0))}var T=(0,f.default)(S);t.default=T},68499:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(t.isComposing)return!1;var a=window.getSelection();return function(e,t,a){if(!t.modify)return!1;if(1!==t.rangeCount)return!1;var r=u.backwardsEmojiTextsTrie,i=e.data||"";if(!(r=r.get(i)))return!1;if(!t.getRangeAt(0).collapsed)return!1;var c=i,h=null,f=null;if((0,l.default)(a,t,((e,t,a)=>((0,s.default)(r,"Trie ptr somehow not set"),!(r=r.get(e))||(r.hasChildren()?void(0===t&&(c=a+c)):(c=a.slice(t)+c,(f=(0,u.default)(c))&&(h=c),!0))))),!h)return!1;var p=a.serializeTextBeforeCursor();if((0,n.isInsideCodeBlock)(p))return!1;(0,d.default)(t,h.length-1),a.replaceSelection(f||"");var{refInput:m}=a,_=(0,o.default)(m,o.Direction.BACKWARD);if(!_)return!0;return _.dataset.replacedEmojiText=h,!0}(e,a,t)};var s=i(a(47677)),n=a(80073),o=r(a(8494)),l=i(a(25812)),d=i(a(23340)),u=r(a(98194))},82506:(e,t,a)=>{"use strict";var r=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(8===e.keyCode)return function(e,t){if(t.isComposing)return!1;var a=window.getSelection();return function(e,t,a){if(!t.modify)return!1;var{refInput:r}=a,s=(0,i.default)(r,i.Direction.BACKWARD);if(!s)return!1;if(n=s,!Boolean(n&&n.dataset&&n.dataset.replacedEmojiText))return!1;var n;t.modify("extend","backward","character"),t.modify("move","backward","character");var o=s.dataset.replacedEmojiText,l=s.parentNode;if(!l)return!1;l.replaceChild(document.createTextNode(o+" "),s);for(var d=o.length,u=0;u<d+1;u++)t.modify("extend","forward","character"),t.modify("move","forward","character");return!1}(0,a,t)}(0,t);return!1};var i=r(a(8494))},55765:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(11896)),s=r(a(68499)),n=r(a(82506));class o extends i.default{constructor(...e){super(...e),this.handlers={onBeforeInput:s.default,onKeyDown:n.default}}}var l=new o;t.default=l},98194:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a=o[e];a&&(t=i.default.getSkinToneBase(a)&&s.default.getVariant(a));return t||a},t.backwardsEmojiTextsTrie=void 0;var i=r(a(12396)),s=r(a(61311)),n=r(a(75688)),o={"(y)":"👍","(Y)":"👍","(n)":"👎","(N)":"👎",":-)":"🙂",":-(":"🙁",":-p":"😛",":-P":"😛",":-|":"😐",":-\\":"😕",":-D":"😀",":-*":"😘",":-o":"😮","<3":"❤️","^_^":"😁",">_<":"😆",";-)":"😉"};var l=Object.keys(o),d=n.default.fromBackwardsStrings(l);t.backwardsEmojiTextsTrie=d},64887:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(11896)),s=r(a(79711)),n=r(a(95716));class o extends i.default{constructor(...e){super(...e),this.handlers={onKeyDown(e){return!this.ctx.isComposing&&(!(" "!==e.key||!(0,n.default)(e))&&(!this.ctx.value.length&&(s.default.scrollMessages(),!0)))}}}}var l=new o;t.default=l},78468:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(52748));class o extends s.Component{componentDidMount(){}render(){var{children:e}=this.props;return s.createElement("div",{className:n.default.container}," ",e," ")}}t.default=o},86921:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(71201)),o=i(a(12396)),l=r(a(91581)),d=r(a(80857)),u=a(62902),c=r(a(78468)),h=a(75656);class f extends s.Component{componentDidMount(){}render(){var{base:e,unicode:t,action:a}=this.props,r=(0,o.isBaseCoupleEmoji)(e),i=(r?(0,o.getPermutations)(h.SKIN_TONE_VARIATIONS.slice(1),2):h.SKIN_TONE_VARIATIONS.map((e=>[e]))).reduce(((t,a)=>{var r=o.default.getSkinToneVariant(e,a);return r?(t.push(r),t):t}),[]).filter((e=>o.default.isEmoji(e))).map(((e,i)=>s.createElement(n.default,{type:r?"emoji-grid":"emoji",key:e+i,a8n:"mi-emoji-variant",action:r=>a(r,t,e)},s.createElement(l.default,{text:e,formatters:u.Configuration.LargeEmojiOnly(),tabIndex:"-1"}))));return r?s.createElement(d.default,{base:e,action:a,unicode:t},i):s.createElement(c.default,null,i)}}t.default=f},94461:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.RoundTheme=void 0;var s=i(a(58527)),n=i(a(72779)),o=r(a(2784)),l=i(a(32960)),d=i(a(72509)),u=i(a(23830)),c=i(a(72376)),h=a(28103).Mirrored(["Default","Small","Large"]);t.RoundTheme=h;var f=({large:e,small:t,theme:a,a8nText:r,label:i,onClick:f,onKeyDown:p,className:m,children:_,disabled:v})=>{var g=(0,n.default)(m,u.default.btn,{[u.default.large]:e||a===h.Large,[u.default.small]:t||a===h.Small,[u.default.disabled]:v}),E=e=>{e.stopPropagation(),e.preventDefault()},[y,S]=(0,c.default)(f,{disabled:v}),C=p?e=>{(0,d.default)(e)&&(e.preventDefault(),p(e))}:S.onKeyPress;return o.createElement("div",(0,s.default)({},S,{"data-a8n":l.default.key(r),role:"button","aria-label":i,tabIndex:"0",className:g,onKeyDown:v?E:C,onMouseDown:E,ref:y}),_)};t.default=f},51908:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(58527)),n=i(a(70417)),o=r(a(2784)),l=i(a(72779)),d=i(a(9140)),u=i(a(72376)),c=({children:e,side:t,ellipsify:a,onClick:r,"aria-label":i})=>{var c=(0,l.default)({[d.default.clickable]:r}),h=(0,l.default)(d.default.main,{[d.default.mainEllipsify]:a}),f=null!=t?o.createElement("div",{className:d.default.side},t):null,p={},[m,_]=(0,u.default)(r);return null!=r&&(p=(0,n.default)({ref:m},_)),o.createElement("div",(0,s.default)({className:c,"aria-label":i},p),o.createElement("div",{className:d.default.body},o.createElement("div",{className:h},e),f))};t.default=c},73073:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(95969)),o=({header:e})=>s.createElement("div",{className:n.default.container},e);t.default=o},97591:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(19976)),n=a(79909),o=i(a(61247));a(61029);var l=a(76128),d=r(a(17026));function u(){var e=(0,s.default)([""," given invalid object for ",": ",""]);return u=function(){return e},e}function c(){var e=(0,s.default)([""," was not supplied the "," model with keys ","."]);return c=function(){return e},e}function h(){var e=(0,s.default)(['Unknown StateHOC concern type "','"']);return h=function(){return e},e}function f(){var e=(0,s.default)(['READ ONLY: Cannot write to proxied property "','", created in <'," />, it is not writable."]);return f=function(){return e},e}t.default=class{constructor(e,t,a,r,i=!1){this.componentName=e,this.name=t,this._isStrong=r,this.keys=a;var s=l.ProxyStates[t];s||(__LOG__(4,void 0,new Error,!0)(h(),t),SEND_LOGS("state-hoc-error")),this._proxyClass=s,this._limitedAccessProxyClass=function(e,t,a,r){var i={$ProxyState$ComponentName:{value:e},proxyBitMask:{value:(0,n.genBitMask)(t.prototype.mirrorMask,a)}},s=function(t){var a={enumerable:!0,get:function(){return this.$ProxyState$state.get(t)},set:function(){__LOG__(4,void 0,new Error)(f(),t,e)}};r||(a.set=function(e){this.$ProxyState$state.set(t,e)}),i[t]=a};for(var o of a)s(o);function l(e){t.call(this,e)}return l.prototype=Object.create(t.prototype,i),l.prototype.constructor=l,l}(e,s,a,i)}getModel(e){return e instanceof this._proxyClass?e.$ProxyState$state:e}getModelAndValidate(e){var t,a=e instanceof this._proxyClass?e.$ProxyState$state:e;return a?a instanceof o.default?a:(__LOG__(4,void 0,new Error,!0)(u(),this.componentName,this.name,"string"==typeof(t=a)?t:t.toString?t.toString():"Invalid Object"),SEND_LOGS("state-hoc-error"),null):(d.default.mode===d.StreamMode.MAIN&&(__LOG__(4,void 0,new Error,!0)(c(),this.componentName,this.name,String(this.keys)),SEND_LOGS("state-hoc-error")),null)}createProxy(e){return new this._limitedAccessProxyClass(e)}attachConcern(e,t,a){e.incObservers(!this._isStrong),e.mirror.addListener(a,t,this)}detachConcern(e,t){e.decObservers(),e.mirror.removeListener(t)}}},142:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({animationFrames:e,signal:t,onFrameChange:a,shouldStop:r}){if(t.aborted)return Promise.reject(new i.default);if(0===e.length)return Promise.resolve();var s=(new Date).getTime(),n=0,o=0,l=s,d=()=>{};return new Promise(((s,u)=>{var c=()=>{0!==n&&window.cancelAnimationFrame(n),u(new i.default)};t.addEventListener("abort",c),d=()=>{t.removeEventListener("abort",c)};var h=()=>{var t=(new Date).getTime();if(t<l)n=window.requestAnimationFrame(h);else{var{duration:i,rgbaBuffer:d}=e[o];a(d),o=(o+1)%e.length,l=t+i,1===o&&r()?s():n=window.requestAnimationFrame(h)}};n=window.requestAnimationFrame(h)})).finally((()=>{d()}))};var i=r(a(8701))},64650:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(19976)),n=r(a(2784)),o=i(a(26293)),l=a(99888),d=i(a(72049));function u(){var e=(0,s.default)(["AnimationCanvas error: ",""]);return u=function(){return e},e}class c extends n.PureComponent{constructor(e){super(e),this.state={animationFramesInfo:null},(0,l.blobToArrayBuffer)(this.props.blob).then(d.default).then((e=>{this.setState({animationFramesInfo:e})})).catch((e=>{__LOG__(3)(u(),e)}))}render(){var{animationFramesInfo:e}=this.state;if(!e)return this.props.renderPreview();var{width:t,height:a,frames:r}=e;return n.createElement(o.default,{className:this.props.className,width:t,height:a,animationFrames:r,startAnimation:Boolean(this.props.loopAnimation||this.props.startAnimation),maxLoops:this.props.maxLoops,onClick:this.props.onClick})}}t.default=c},77070:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(52741)),l=i(a(7765)),d=i(a(61941));class u extends n.PureComponent{constructor(...e){super(...e),this.state={isAnimated:this.props.startAnimation,isReady:!1},this._addObserverToContainer=e=>{this._setIntersectionObserver(e)},this._setImgRef=e=>{this._imgRef=e},this._setUrlProviderRef=e=>{this._urlProviderRef=e},this._setCanvasRef=e=>{this._canvasRef=e},this._setIntersectionObserver=e=>{null!=e&&(null==this._intersectionObserver?(this._intersectionObserver=new IntersectionObserver(this._onVisible,{root:null,rootMargin:"25px",threshold:.99}),this._intersectionObserver.observe(e)):this._intersectionObserver.observe(e))},this._onVisible=e=>{e[0].isIntersecting?(this.startAnimation(),this._startAnimationCountDown()):null!=this._startedAt&&this._startAnimationCountDown()},this._onImageLoad=()=>{if(!this.state.isReady){var e=this._canvasRef,t=this._imgRef;e&&t&&(e.width=t.naturalWidth/2,e.height=t.naturalHeight/2,e.getContext("2d").drawImage(t,0,0,e.width,e.height)),this.props.startAnimation&&(this._startedAt=Date.now(),this._startAnimationCountDown(),this.props.mediaData.animatedAsNewMsg=!0),this.setState({isReady:!0})}},this.startAnimation=()=>{null!=this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null),null==this._startedAt&&(this._startedAt=Date.now()),this.setState({isAnimated:!0})},this.onMouseEnter=()=>{this.startAnimation()},this.onMouseLeave=()=>{null!=this._startedAt&&this._startAnimationCountDown()},this._renderImage=e=>n.createElement("img",{alt:this.props.label,className:(0,s.default)(this.props.className,{[l.default.hide]:!this.state.isReady||!this.state.isAnimated}),draggable:"false",src:e,ref:this._setImgRef,onLoad:this._onImageLoad})}componentWillUnmount(){null!=this._timeoutID&&clearTimeout(this._timeoutID),this._intersectionObserver&&this._intersectionObserver.disconnect()}_startAnimationCountDown(){var e=(0,d.default)(this.props.mediaData.singleLoopDuration,"this.props.mediaData.singleLoopDuration"),t=(Date.now()-(0,d.default)(this._startedAt,"this._startedAt"))%e,a=this.props.mediaData.animationDuration-t;clearTimeout(this._timeoutID),this._timeoutID=window.setTimeout((()=>{this._urlProviderRef&&this._urlProviderRef.refreshBlob(),this.setState({isAnimated:!1}),this._timeoutID=null,this._startedAt=null}),a)}_createRenderableUrl(){return URL.createObjectURL(new Blob([this.props.mediaData.mediaBlob.formData()]))}render(){return n.createElement("div",{className:this.props.className,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onClick:this.props.onClick,ref:this._addObserverToContainer},n.createElement(o.default,{ref:this._setUrlProviderRef,mediaData:this.props.mediaData,placeholderRenderer:this.props.placeholderRenderer,downloadMedia:this.props.downloadMedia},this._renderImage),n.createElement("canvas",{className:(0,s.default)(this.props.className,{[l.default.hide]:!this.state.isReady||this.state.isAnimated}),draggable:"false",ref:this._setCanvasRef}))}}t.default=u},26293:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(12489)),o=a(8701),l=r(a(142)),d=r(a(2426));class u extends s.PureComponent{constructor(...e){super(...e),this._abortController=new n.default,this._isAnimating=!1,this.state={rgbaBuffer:null},this._iterations=0,this._isFocused=!1,this._startAnimation=()=>{this._isAnimating||(this._isAnimating=!0,(0,l.default)({animationFrames:this.props.animationFrames,signal:this._abortController.signal,onFrameChange:e=>this.setState({rgbaBuffer:e}),shouldStop:()=>this._iterations>=this.props.maxLoops||(this._isFocused||this._iterations++,!1)}).catch((e=>{if(e.name!==o.ABORT_ERROR)throw e})).finally((()=>{this._isAnimating=!1})))},this._onMouseEnter=()=>{this.props.maxLoops!==1/0&&(this._isFocused=!0,this._iterations=1,this._startAnimation())},this._onMouseLeave=()=>{this._isFocused=!1}}componentDidMount(){this.props.startAnimation?this._startAnimation():this._renderFirstFrame()}_renderFirstFrame(){var{animationFrames:e}=this.props;0!==e.length&&this.setState({rgbaBuffer:e[0].rgbaBuffer})}componentWillUnmount(){this._abortController.abort()}render(){var{rgbaBuffer:e}=this.state;return e?s.createElement(d.default,{rgbaBuffer:e,className:this.props.className,width:this.props.width,height:this.props.height,onClick:this.props.onClick,onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave}):null}}t.default=u},82562:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(64650)),l=i(a(77070)),d=i(a(36455)),u=i(a(3023)),c=i(a(17957)),h=i(a(94011)),f=a(96645),p=i(a(19125)),m=i(a(61941)),_=i(a(98343)),v=i(a(72259)),g=i(a(2426)),E=i(a(40207));function y({className:e,loopAnimation:t,mediaData:a,startAnimation:r,renderPreview:i,downloadMedia:s,onClick:o,forwardRef:d,label:u}){return a.animationDuration>0&&!t?n.createElement(l.default,{className:e,mediaData:a,startAnimation:r,onClick:o,placeholderRenderer:i,downloadMedia:s,ref:d,label:u}):n.createElement(p.default,{mediaData:a,placeholderRenderer:i,downloadMedia:s},(t=>n.createElement("img",{className:e,draggable:"false",onClick:o,src:t,alt:u})))}function S({className:e,loopAnimation:t,mediaData:a,startAnimation:r,renderPreview:i,downloadMedia:s,onClick:l}){if(a.animationDuration>0){var d=t?1/0:a.animationDuration/(0,m.default)(a.singleLoopDuration,"mediaData.singleLoopDuration");return n.createElement(h.default,{mediaData:a,render:a=>n.createElement(o.default,{className:e,loopAnimation:t,maxLoops:d,blob:a,renderPreview:i,startAnimation:r,onClick:l}),renderPlaceholder:i,downloadMedia:s})}return a.rgbaBuffer?n.createElement(g.default,{className:e,height:a.rgbaHeight,onClick:l,rgbaBuffer:a.rgbaBuffer,width:a.rgbaWidth}):i()}class C extends n.PureComponent{constructor(e){super(e),this.state={},this._animatedAsNewMsg=this.props.mediaData.animatedAsNewMsg,this._renderPreview=()=>{var e,t,a=this.props.mediaData.preview,r=a&&a.url(),i=this._getClassName(),o=null===(e=this.props.mediaData)||void 0===e||null===(t=e.emojis)||void 0===t?void 0:t.join(" "),l=o?c.default.t(28,{emojis:o}):c.default.t(29);return r?n.createElement("img",{className:i,draggable:"false",onClick:this.props.onClick,src:r,alt:l}):n.createElement(_.default,{className:(0,s.default)(u.default.placeholder,i)})};var t=(0,d.default)();t.isFulfilled()?this.state.supportsWebp=t.value():t.checkpoint(this.props.rejectOnUnmount()).then((e=>this.setState({supportsWebp:e})))}_getClassName(){return(0,s.default)({[u.default.conversation]:"conversation"===this.props.theme,[u.default.quoted]:"quoted"===this.props.theme,[u.default.composeBoxQuoted]:"composeBoxQuoted"===this.props.theme,[u.default.stickerPanel]:"stickerPanel"===this.props.theme,[u.default.clickable]:Boolean(this.props.onClick)})}_renderContent(){var e,t,{supportsWebp:a}=this.state;if(null==a)return this._renderPreview();var r=this._getClassName(),{mediaData:i}=this.props,s=null===(e=this.props.mediaData)||void 0===e||null===(t=e.emojis)||void 0===t?void 0:t.join(" "),o=s?c.default.t(28,{emojis:s}):c.default.t(29),l=Boolean(this.props.animateOnView||this.props.isNewMsg&&!this._animatedAsNewMsg),d=Boolean(this.props.loopAnimation);return a?n.createElement(y,{className:r,mediaData:i,loopAnimation:d,startAnimation:l,renderPreview:this._renderPreview,onClick:this.props.onClick,downloadMedia:this.props.downloadMedia,forwardRef:this.props.forwardRef,label:o}):n.createElement(S,{className:r,mediaData:i,loopAnimation:d,startAnimation:l,renderPreview:this._renderPreview,onClick:this.props.onClick,downloadMedia:this.props.downloadMedia,label:o})}render(){return n.createElement("span",{className:(0,s.default)({[u.default.showSticker]:this.props.mediaData.mediaStage===f.MEDIA_DATA_STAGE.RESOLVED})},this._renderContent())}}C.CONCERNS={mediaData:["animatedAsNewMsg","animationDuration","singleLoopDuration","mediaBlob","preview","renderableUrl","rgbaBuffer","rgbaHeight","rgbaWidth","emojis","mediaStage"]};var T=(0,v.default)((0,E.default)(C,C.CONCERNS));t.default=T},98343:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(82631));class o extends s.PureComponent{render(){var{className:e}=this.props;return s.createElement(n.default,{className:e,name:"sticker-placeholder"})}}t.default=o},22948:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{disabled:t,onClick:a,type:r}=e,i=(0,s.default)(e,["disabled","onClick","type"]);return n.createElement(l.default,{disabled:t,onClick:a,type:r},n.createElement(o.default,i))};var s=i(a(22220)),n=r(a(2784)),o=i(a(82631)),l=i(a(5174))},40263:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=u,t.TextHeader=function(e){var{level:t="1"}=e,a=(0,n.default)(e,["level"]);return o.createElement(u,(0,s.default)({as:c[t]},a))},t.TextParagraph=function(e){return o.createElement(u,(0,s.default)({as:"p"},e))},t.TextDiv=function(e){return o.createElement(u,(0,s.default)({as:"div"},e))},t.TextSpan=function(e){return o.createElement(u,(0,s.default)({as:"span"},e))};var s=i(a(58527)),n=i(a(22220)),o=r(a(2784)),l=i(a(72779)),d=i(a(32455));function u(e){var t,a,r,i,s=null!==(t=e.as)&&void 0!==t?t:"span",n=e.theme?d.default[e.theme]:null,u=e.color?d.default["color-".concat(e.color)]:null,c=d.default["weight-".concat(null!==(a=e.weight)&&void 0!==a?a:"normal")],h=null!=e.customSize?null:null!==(r=e.size)&&void 0!==r?r:"14",f=null!=h?d.default["size-".concat(h)]:null;return null!=e.customSize&&(i={fontSize:"string"==typeof e.customSize?e.customSize:"".concat(e.customSize,"px")}),o.createElement(s,{className:(0,l.default)(n,u,f,c,e.className),style:i},e.children)}var c={1:"h1",2:"h2",3:"h3",4:"h4",5:"h5",6:"h6"}},52100:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.TextInputCustomStyleThemes=void 0;var s=i(a(72779)),n=r(a(2784)),o=a(14457),l=i(a(99003)),d=i(a(82512)),u=a(40789),c=r(a(91581)),h=a(13414),f=i(a(44343)),p=i(a(63252)),m=i(a(17957)),_=i(a(2825)),v=i(a(82631)),g=i(a(16661)),E=i(a(17693)),y=i(a(63498)),S=a(86145),C=i(a(5174)),T=i(a(74824)),M=(0,p.default)({groupInfoName:null,desaturated:null,noErrorInfo:null});t.TextInputCustomStyleThemes=M;class b extends n.Component{constructor(...e){super(...e),this.state={active:this.props.startActive||!1,locked:!this.props.startActive&&!!this.props.lockable,emojiPicker:null},this.emojiInputComponent=(0,l.default)(),this._refEmojiPanel=n.createRef(),this.isSkinTonePickerOpen=!1,this.onEmojiPicker=e=>{e&&(e.preventDefault(),e.stopPropagation());var t=n.createElement(d.default,{onEmoji:this.onEmoji,onFocusNext:this.restoreFocus,onFocusPrev:this.restoreFocus});this.setState({emojiPicker:{menu:t,dirY:o.DirY.TOP,type:"emoji_picker",anchor:e.target}}),this.restoreFocus()},this.onEmojiPickerClose=()=>{this.setState({emojiPicker:null})},this.onRestoreEmojiPickerFocus=()=>{var e;null===(e=this._refEmojiPanel.current)||void 0===e||e.restoreFocus()},this.onEmoji=e=>{this.inputLine&&this.inputLine.replaceSelection(e)},this.onEnter=e=>{this.props.lockable&&this._onSaveAndLock(),this.props.onEnter&&!this.props.multiline&&(e.persist(),this.props.onEnter(e))},this.onChange=e=>{this.props.onChange&&this.props.onChange(e)},this.restoreFocus=()=>{this.inputLine&&this.inputLine.focus()},this.onFocus=e=>{var t=e.relatedTarget;this.inputLine&&t instanceof HTMLElement&&e.currentTarget instanceof HTMLElement&&!e.currentTarget.contains(t)&&this.inputLine.focus()},this.onBlur=e=>{this.isSkinTonePickerOpen||(this.state.active&&this.setState({active:!1}),this.props.onBlur&&this.props.onBlur(e))},this.onFocus=e=>{e.stopPropagation(),this.state.active||this.setState({active:!0}),this.props.onFocus&&this.props.onFocus(e)},this.onSkinTonePicker=e=>{this.isSkinTonePickerOpen=e},this._onUnlock=()=>{this.props.onBeginEdit&&this.props.onBeginEdit(),this.setState({locked:!1})},this._onSaveAndLock=()=>{var e=!(!this.props.lowProfile&&this.props.error);this.props.validate&&e&&(e=this.props.validate(this.props.value)),e?(this.props.onSave&&this.props.onSave(),this.setState({locked:!0})):this.props.onError&&this.props.onError()},this.onCancel=()=>{this.props.onCancel&&this.props.onCancel(),this.setState({locked:!0})},this._showEmptyValuePlaceholder=()=>{var{value:e}=this.props;return(!e||""===e)&&this.props.emptyValuePlaceholder&&this.state.locked},this.isEditing=()=>this.props.editable&&!this.state.locked,this._renderEmojiText=()=>{var{renderEmojiTextInLockMode:e,value:t}=this.props;if(e&&t){var{textLimit:a,readMoreText:r,onReadMore:i,formatters:s}=e;return n.createElement("div",{className:g.default.emojiText},n.createElement(c.default,{text:t,selectable:!0,emojiSize:c.EMOJI_SIZE.SMALL,textLimit:a,formatters:s}),(0,S.numCodepoints)(t)>a&&n.createElement("span",{className:g.default.more,role:"button",onClick:i}," ".concat(r)))}},this.onEmojiFocus=()=>{this.state.emojiPicker&&this.onRestoreEmojiPickerFocus()}}componentDidMount(){this.props.focusOnMount&&this.restoreFocus()}componentDidUpdate(e,t){t.locked||!e.editable||this.props.editable||this.onCancel(),!this.inputLine||this.isEditing()&&!this.props.managed||this.inputLine.value===this.props.value||this.inputLine.reset(this.props.value||"")}render(){var e,t,a=this.props.maxLength||b.defaultProps.maxLength,r=this.isEditing(),i=r&&!!this.props.error&&!this.props.lowProfile,{customStyleThemes:o=[]}=this.props,l={container:(0,s.default)(g.default.textInput,o&&o.map((e=>g.default[e])),{[g.default.noPlaceholder]:!this.props.placeholder,[g.default.invite]:"v4-invite-caption"===this.props.theme,[g.default.active]:r,[g.default.small]:"small"===this.props.theme,[g.default.inputLarge]:"large"===this.props.theme}),label:(0,s.default)(g.default.labelText,{[g.default.float]:!!this.props.value,[g.default.hideFloatingLabel]:!!this.props.hideFloatingLabel}),inputWrapper:(0,s.default)(g.default.wrapper,{[g.default.textError]:i,[g.default.invite]:"v4-invite-caption"===this.props.theme,[g.default.textActive]:this.state.active,[g.default.locked]:this.state.locked}),infoWrapper:(0,s.default)(g.default.infoStrip,{[g.default.textError]:i,[g.default.textActive]:this.state.active})};this.props.lockable&&(this.props.pending?t=n.createElement("div",{className:(0,s.default)(g.default.iconSpinner,g.default.iconMain),key:"spinner"},n.createElement(_.default,{size:18,stroke:6,color:"highlight"})):this.state.locked?this.props.editable?t=n.createElement("div",{className:g.default.iconMain,onClick:this._onUnlock,key:"btn-edit",title:m.default.t(578)},n.createElement(v.default,{name:"pencil",directional:!0})):this.props.editRestrictionInfo&&!this.props.editable&&(t=n.createElement("div",{className:g.default.iconMain,onClick:this.props.editRestrictionInfo,key:"btn-info"},n.createElement(v.default,{name:"info"}))):t=n.createElement("div",{className:g.default.iconMain,onClick:this._onSaveAndLock,key:"btn-done",title:m.default.t(489)},n.createElement(v.default,{name:"checkmark"})),e=this.props.lockable?n.createElement(T.default,{className:g.default.iconMainContainer,transitionName:"pop"},t):null);var d,c=r&&this.props.supportsEmoji?n.createElement(C.default,{className:(0,s.default)(g.default.emojiBtn),onClick:this.onEmojiPicker,key:"emoji-btn",onFocus:this.onEmojiFocus},n.createElement(v.default,{name:"emoji-input"})):null;if(this.props.showRemaining){var p=(0,S.numCodepoints)(this.props.value||"");d=a-p<50&&r?n.createElement("div",{className:(0,s.default)(g.default.charCounter),key:"counter"},m.default.n(a-p)):null}var M,P,A=this.props.supportsEmoji||this.props.showRemaining?n.createElement(T.default,{className:g.default.iconsEditContainer,transitionName:"pop"},d,c):null,I=this.props.lowProfile?null:n.createElement("div",{className:l.infoWrapper},n.createElement("div",{className:g.default.errorText},i?this.props.error:null));this.props.lockable&&!this.state.locked?(this.state.emojiPicker&&(P=n.createElement(E.default,{displayName:"EmojiPicker",escapable:!0,popable:!0,requestDismiss:this.onEmojiPickerClose,requestFocus:this.onRestoreEmojiPickerFocus},n.createElement(y.default,{contextMenu:this.state.emojiPicker}))),M=n.createElement(E.default,{displayName:"TextInput",escapable:!0,requestFocus:this.restoreFocus,requestDismiss:this.onCancel},n.createElement("div",null,P))):!this.props.lockable&&this.state.emojiPicker&&(M=n.createElement(E.default,{displayName:"EmojiPicker",escapable:!0,popable:!0,requestDismiss:this.onEmojiPickerClose,requestFocus:this.onRestoreEmojiPickerFocus},n.createElement(y.default,{contextMenu:this.state.emojiPicker})));var O,N,w=this.props.editable&&!this.state.locked,{emptyValuePlaceholder:D,renderEmojiTextInLockMode:R}=this.props,L=this.emojiInputComponent,k=w||!R,x=k?n.createElement(L,{a8n:this.props.a8n,ref:(0,h.GetRef)((e=>{this.inputLine=e})),initialValue:this.props.value,theme:this.props.theme||"default",multiline:this.props.multiline,onChange:this.onChange,onFocus:this.onFocus,onBlur:this.onBlur,onEnter:this.onEnter,onFiles:this.props.onFiles,spellCheck:this.props.spellCheck,maxLength:this.props.maxLength,readOnly:!w,placeholder:this.props.inputPlaceholder}):this._renderEmojiText();return this.props.placeholder&&(O=(!this.props.value||!this.props.hideFloatingLabel)&&n.createElement("span",{className:l.label},this.props.placeholder),N=n.createElement("div",{className:g.default.spacer})),n.createElement(f.default,{className:l.container,onFocus:this.onFocus},O,N,n.createElement("div",{className:l.inputWrapper},x,this._showEmptyValuePlaceholder()&&n.createElement("div",{className:g.default.emptyValPlaceholder},D),A,e),k&&n.createElement(L.EmojiSuggestions,{theme:u.ThemeOptions.EMOJI_INPUT,onSkinTonePicker:this.onSkinTonePicker}),I,M)}}t.default=b,b.defaultProps={maxLength:25,editable:!0}},67360:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(32960)),l=i(a(65549)),d=({children:e,left:t})=>n.createElement("div",{"data-a8n":o.default.key("tooltip"),className:(0,s.default)(l.default.tooltip,{[l.default.left]:!0===t})},e);t.default=d},63498:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(70417)),n=r(a(2784)),o=i(a(79711)),l=i(a(98294));class d extends n.Component{componentDidMount(){var e=(0,s.default)((0,s.default)({},this.props.contextMenu),{},{uim:this.props.uim});o.default.openContextMenu(e,(e=>{this.element=e}))}componentWillUnmount(){o.default.closeContextMenu(this.props.uim)}getElement(){return this.element}render(){return null}}var u=(0,l.default)(d);t.default=u},68768:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(70417)),n=r(a(2784)),o=i(a(79711)),l=i(a(98294));class d extends n.Component{componentDidMount(){var e=(0,s.default)((0,s.default)({},this.props.tooltip),{},{uim:this.props.uim});o.default.openTooltip(e,(e=>{this.element=e}))}componentWillUnmount(){o.default.closeTooltip(this.props.uim)}getElement(){return this.element}render(){return null}}var u=(0,l.default)(d);t.default=u},5174:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{a8nText:t,className:a,children:r,disabled:i,onClick:c,title:h,type:f="button",onFocus:p}=e,m=(0,n.default)(e,["a8nText","className","children","disabled","onClick","title","type","onFocus"]),_={};null!=m["aria-label"]&&(_["aria-label"]=m["aria-label"]);null!=m["aria-pressed"]&&(_["aria-pressed"]=m["aria-pressed"]);return o.createElement("button",(0,s.default)({className:(0,l.default)(u.default.button,a),"data-a8n":d.default.key(t),disabled:!0===i,onClick:c,title:h,type:f,onFocus:p},_),r)};var s=i(a(58527)),n=i(a(22220)),o=r(a(2784)),l=i(a(72779)),d=i(a(32960)),u=i(a(72864))},37698:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(85395)),o=r(a(91581)),l=r(a(18120)),d=r(a(40207)),u=r(a(82631)),c=r(a(13004));class h extends s.PureComponent{render(){var e,t,{contact:a,presence:r}=this.props;return(e="list"===this.props.location||"info"===this.props.location?r.getFormattedString():r.withholdDisplay?this.props.placeholder:r.getFormattedString()||(r.forceDisplay?"":this.props.placeholder))&&(t=s.createElement(n.default,{text:e,location:this.props.location})),"title"===this.props.location&&l.default.supportsFeature(l.default.F.VNAME_V_2)&&e!==this.props.placeholder&&a&&this.props.showBusinessCheckmark?s.createElement("div",{className:c.default.wrapper},s.createElement(o.default,{text:a.verifiedName,className:c.default.verifiedText,direction:"auto",ellipsify:!0,titlify:!0}),s.createElement("div",{className:c.default.icon},s.createElement(u.default,{name:"psa-verified"})),t&&s.createElement("span",{className:c.default.divider},"·"),t):t||null}}h.CONCERNS={contact:["name","verifiedName"],presence:["withholdDisplay","forceDisplay","hasData"],chatstate:["type","deny","t"]};var f=(0,d.default)(h,h.CONCERNS);t.default=f},15668:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Component=void 0;var s=i(a(19976)),n=i(a(72779)),o=r(a(2784)),l=i(a(79711)),d=i(a(20642)),u=i(a(2694));function c(){var e=(0,s.default)(["Neither the height nor the width of video should have zero value"]);return c=function(){return e},e}class h extends o.PureComponent{constructor(...e){super(...e),this._videoRef=null,this._onPlayTriggered=!1,this.setRefVideo=e=>{this._videoRef&&this.props.listeners.remove(this._videoRef,"playing",this.onPlay),this._videoRef=e,e&&("srcObject"in e&&this.props.srcObject?e.srcObject=this.props.srcObject:this.props.src&&(e.src=this.props.src),this.props.listeners.add(e,"playing",this.onPlay),this.props.autoPlay&&e.play())},this.onPlay=()=>{var e=this._videoRef;e&&(e.videoHeight&&e.videoWidth||this._onPlayTriggered||(this._onPlayTriggered=!0,e.pause(),e.play(),__LOG__(4,void 0,new Error,!0)(c()),SEND_LOGS("non-zero height and width")),e.videoHeight&&e.videoWidth&&this.props.onPlay&&(this.props.onPlay(e),this._onPlayTriggered=!1),this.props.muted||l.default.mediaPlaying(this))},this.onOtherPlaying=e=>{e!==this&&this._videoRef&&this._videoRef.pause()},this.onLoadedMetadata=e=>{this.props.onLoadedMetadata&&this.props.onLoadedMetadata(e)}}componentDidMount(){this.props.controls&&this.props.listeners.add(l.default,"mediaPlaying",this.onOtherPlaying)}underlyingVideo(){return this._videoRef}play(){var e=this._videoRef;e&&e.paused&&e.play()}pauseAndReset(){var e=this._videoRef;e&&(e.currentTime=0,e.paused||e.pause())}getDuration(){return null==this._videoRef?null:this._videoRef.duration}render(){var e=this.props;return o.createElement("video",{ref:this.setRefVideo,className:(0,n.default)(u.default.video,e.className),muted:e.muted,controls:e.controls,controlsList:e.controlsList,width:e.width,height:e.height,loop:e.loop,onClick:e.onClick,onEnded:e.onEnded,onLoadedMetadata:this.onLoadedMetadata,style:e.style},e.children)}}var f=h;t.Component=f;var p=(0,d.default)(h);t.default=p},86094:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.PlayerState=void 0;var s=i(a(70417)),n=i(a(18149)),o=r(a(2784)),l=i(a(55741));function d(e){return(0,s.default)((0,s.default)({},e),{},{playerVars:(0,s.default)((0,s.default)({},e.playerVars),{},{autoplay:0,start:0,end:0})})}var u={UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3,CUED:5};t.PlayerState=u;class c extends o.Component{constructor(...e){super(...e),this.listeners=[],this.onPlayerReady=e=>this.props.onReady(e),this.onPlayerError=e=>this.props.onError(e),this.onPlayerStateChange=e=>{switch(this.props.onStateChange(e),e.data){case u.ENDED:this.props.onEnd(e);break;case u.PLAYING:this.props.onPlay(e);break;case u.PAUSED:this.props.onPause(e)}},this.onPlayerPlaybackRateChange=e=>this.props.onPlaybackRateChange(e),this.onPlayerPlaybackQualityChange=e=>this.props.onPlaybackQualityChange(e),this.createPlayer=()=>{var e=(0,s.default)((0,s.default)({},this.props.opts),{},{videoId:this.props.videoId});this.internalPlayer=(0,l.default)(this.container,e),this.listeners.push(this.internalPlayer.on("ready",this.onPlayerReady),this.internalPlayer.on("error",this.onPlayerError),this.internalPlayer.on("stateChange",this.onPlayerStateChange),this.internalPlayer.on("playbackRateChange",this.onPlayerPlaybackRateChange),this.internalPlayer.on("playbackQualityChange",this.onPlayerPlaybackQualityChange))},this.resetPlayer=()=>this.internalPlayer.destroy().then(this.createPlayer),this.updatePlayer=()=>{var e=this.internalPlayer.getIframe();this.props.id?e.setAttribute("id",this.props.id):e.removeAttribute("id"),this.props.className?e.setAttribute("class",this.props.className):e.removeAttribute("class")},this.updateVideo=()=>{if(null!=this.props.videoId){var e,t,a=!1;"playerVars"in this.props.opts&&(a=1===this.props.opts.playerVars.autoplay,"start"in this.props.opts.playerVars&&(e=this.props.opts.playerVars.start),"end"in this.props.opts.playerVars&&(t=this.props.opts.playerVars.end));var r={videoId:this.props.videoId,startSeconds:e,endSeconds:t};a?this.internalPlayer.loadVideoById(r):this.internalPlayer.cueVideoById(r)}else this.internalPlayer.stopVideo()},this.refContainer=e=>{this.container=e}}componentDidMount(){this.createPlayer()}componentDidUpdate(e){(function(e,t){return e.id===t.id||e.className===t.className})(e,this.props)&&this.updatePlayer(),function(e,t){return!(0,n.default)(d(e.opts),d(t.opts))}(e,this.props)&&this.resetPlayer(),function(e,t){if(e.videoId!==t.videoId)return!0;var a=e.opts.playerVars||{},r=t.opts.playerVars||{};return a.start!==r.start||a.end!==r.end}(e,this.props)&&this.updateVideo()}componentWillUnmount(){this.listeners.forEach((e=>{this.internalPlayer.off(e)})),this.internalPlayer.destroy()}render(){return o.createElement("span",{className:this.props.containerClassName},o.createElement("div",{id:this.props.id,className:this.props.className,ref:this.refContainer}))}}c.defaultProps={id:null,className:null,opts:{playerVars:{}},containerClassName:"",onReady:()=>{},onError:()=>{},onPlay:()=>{},onPause:()=>{},onEnd:()=>{},onStateChange:()=>{},onPlaybackRateChange:()=>{},onPlaybackQualityChange:()=>{}};var h=c;t.default=h},24156:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(51383)),o=r(a(43334)),l=r(a(79711)),d=r(a(77977)),u=r(a(17957)),c=r(a(81524)),h=r(a(40207));class f extends s.Component{constructor(...e){super(...e),this._filterAdmins=e=>{var{groupMetadata:t}=this.props,a=t.participants.get(e.id);return!(!a||!a.isAdmin)},this._onSelectAdminToMsg=e=>{this.openChat(e.id),l.default.closeModal()},this.openChat=e=>{o.default.find(e).then((e=>{e.quotedMsgAdminGroupJid=this.props.chat.id,l.default.openChatBottom(e)}))},this._onMsgAdmin=()=>{var{groupMetadata:e}=this.props,t=e.participants.getAdmins();1!==t.length?l.default.openModal(s.createElement(d.default,{title:u.default.t(941),filter:this._filterAdmins,onCancel:()=>l.default.closeModal(),onSelect:this._onSelectAdminToMsg})):this.openChat(t[0].id)}}render(){var e=s.createElement("span",{role:"button",onClick:this._onMsgAdmin,className:n.default.adminBtn},u.default.t(223));return s.createElement(c.default,{id:222,params:{admins:e}})}}f.CONCERNS={mute:["isMuted"],chat:["id"],groupMetadata:["participants"]};var p=(0,h.default)(f,f.CONCERNS);t.default=p},97238:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.onChangeNumberNotificationClick=g,t.default=void 0;var s=i(a(2784)),n=r(a(64)),o=r(a(92338)),l=r(a(43334)),d=r(a(79711)),u=r(a(7470)),c=r(a(7822)),h=r(a(17957)),f=r(a(61941)),p=r(a(40207)),m=a(40263),_=r(a(74824)),v=r(a(3111));function g(e,t){var a=l.default.gadd(e);a.changeNumberOldJid||(a.changeNumberOldJid=t),a.changeNumberNewJid=void 0,d.default.openChatFromUnread(a).then((e=>{e&&d.default.focusChatTextInput(a)}))}class E extends s.Component{constructor(...e){super(...e),this._messageNewNumber=()=>{var{changeNumberNewJid:e}=this.props.chat,t=this.props.chat.id;g((0,f.default)(e,"changeNumberNewJid"),t)},this._dismissChangeNumberNotification=()=>{this.props.chat.sendDismissChangeNumber()}}_isOldChat(){var{changeNumberOldJid:e,changeNumberNewJid:t}=this.props.chat;return void 0===e&&void 0!==t}_isNewChat(){var{changeNumberOldJid:e,changeNumberNewJid:t}=this.props.chat;return void 0!==e&&void 0===t}getText(){var{changeNumberOldJid:e,id:t}=this.props.chat,a=e||t,r=u.default.get(a),i=r&&r.isMyContact?r.formattedName:(0,v.default)(a);return this._isNewChat()?h.default.t(449,{name:i}):h.default.t(450,{name:i})}render(){var e=null;if(this.props.chat.showChangeNumberNotification){var t=this._isOldChat()?s.createElement("div",{className:o.default.messageNewNumberButton},s.createElement(n.default,{onClick:this._messageNewNumber,type:"plain-white",nowrap:!0},h.default.t(448))):null;e=s.createElement(c.default,{onClose:this._dismissChangeNumberNotification},s.createElement("div",{className:o.default.container},s.createElement(m.TextSpan,{theme:"plain",className:o.default.text},this.getText()),t))}return s.createElement(_.default,{transitionName:"butterbar"},e)}}E.CONCERNS={chat:["changeNumberOldJid","changeNumberNewJid","id","showChangeNumberNotification"]};var y=(0,p.default)(E,E.CONCERNS);t.default=y},92545:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return a},t.setHasText=function(e){a=e};var a=!1},72149:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(19976)),n=i(a(72779)),o=a(39329),l=r(a(2784)),d=i(a(32960)),u=i(a(72696)),c=i(a(85567)),h=i(a(57495)),f=i(a(79148)),p=a(76736),m=i(a(79711)),_=a(80073),v=i(a(60353)),g=i(a(46691)),E=i(a(9386)),y=i(a(50935)),S=i(a(17029)),C=i(a(96955)),T=i(a(70727)),M=a(28703),b=a(19741),P=r(a(96452)),A=i(a(93601)),I=a(99888),O=i(a(38147)),N=i(a(68476)),w=i(a(18120)),D=a(75459),R=a(92545),L=i(a(44343)),k=r(a(44202)),x=i(a(36329)),F=i(a(17957)),G=i(a(20227)),U=i(a(89423)),B=r(a(90088)),j=i(a(20642)),V=i(a(40210)),H=i(a(61941)),W=a(18727),K=i(a(74735)),Y=i(a(34837)),q=a(47410),z=a(207),Q=i(a(69789)),J=a(90920),X=i(a(93456)),Z=i(a(77674)),$=a(74556),ee=i(a(61124)),te=a(37960),ae=i(a(68537)),re=i(a(40207)),ie=a(64658),se=i(a(82631)),ne=i(a(67134)),oe=r(a(75074)),le=i(a(17693)),de=i(a(74185)),ue=i(a(76133));function ce(){var e=(0,s.default)(["Unable to retrieve CTWA context data, error: ",""]);return ce=function(){return e},e}function he(){var e=(0,s.default)(["failed loading gif (status: ",")"]);return he=function(){return e},e}var fe=/^https?:\/\/media\.giphy\.com\/media\/([a-zA-Z0-9]+)/,pe=parseInt(x.default["-overlay-border-left"].replace(/px$/,""),10);class me extends l.PureComponent{constructor(e){super(e),this.height=0,this.pendingLinkPreviewPromises=[],this.pasteTriggeredOnChange=!1,this._wasCleared=!1,this.dismissVcardPanel=()=>{(0,ie.unproxy)(this.props.chat).dismissVcard()},this.saveComposeContent=()=>{this.props.chat.setComposeContents({text:this.text,selection:this.selection,omittedURL:this.omittedURL,ctwaContextLinkData:this.state.ctwaContextLinkData,ctwaContext:this.state.ctwaContextData})},this.onTextSizeChange=e=>{this.setState({textsize:e})},this.pasteEmojiInput=e=>{if(" "===e&&!this.hasText())return m.default.scrollMessages();var t;this.refComposeBoxInput&&(this.refComposeBoxInput.focus(!0),null===(t=this.refComposeBoxInput)||void 0===t||t.replaceSelection(e))},this.handleRoutedPaste=e=>{var t;this.refComposeBoxInput&&(this.refComposeBoxInput.focus(!0),null===(t=this.refComposeBoxInput)||void 0===t||t.onPaste(e))},this.onMaxPasteExceeded=()=>{m.default.openModal(l.createElement(E.default,{title:F.default.t(960),onOK:()=>{m.default.closeModal()},okText:F.default.t(1709)},F.default.t(959)))},this.restoreFocus=()=>{var e;null===(e=this.refComposeBoxInput)||void 0===e||e.focus()},this.clearLinkPreview=()=>{this.preview=null,this.omitLinkPreview()},this.cancelPendingLinkPreviews=()=>{this.pendingLinkPreviewPromises.forEach((e=>e.cancel())),this.pendingLinkPreviewPromises=[],!0===this.state.isLoadingLinkPreview&&this.setState({isLoadingLinkPreview:!1})},this.omitLinkPreview=(e=!1)=>{!0!==e&&this.state.linkPreview&&(this.omittedURL=this.preview,this.setState({linkPreview:null}))},this.omitQuotedPreview=(e=!1)=>{!0!==e&&(this.props.chat.composeQuotedMsg=null)},this.omitQuotedMsgAdminGroupNamePreview=(e=!1)=>{!0!==e&&(this.props.chat.quotedMsgAdminGroupJid=null)},this._findFirstWebLink=()=>{var e=(0,_.removeCodeBlocks)(this.text);return B.findLinks(e,!0)[0]},this.scanForLinksTimer=new o.ShiftTimer((()=>{if(this.state.hasText&&!this.state.ctwaContextLinkData){var e=this._findFirstWebLink();if(e){var t=e.url;if(!this.preview||this.preview!==t){this.preview=t,this.omittedURL=null;var a=(0,U.default)(t).cancellable().tap((e=>{e&&this.preview&&this.preview===e.url&&e.data&&(e.data.title||e.data.description)&&this.setState({linkPreview:e})}));this.pendingLinkPreviewPromises.push(a),a.catchTypes3(P.Unmount,b.WebdDrop,Promise.CancellationError,(()=>{}))}}else this.clearLinkPreview()}else this.clearLinkPreview()})),this.onInputFocus=()=>{this.indicateFocus(),this.addEmojisToTouchBar()},this.onInputBlur=()=>{this.removeEmojisFromTouchBar()},this.onVoiceRecordingSent=()=>{this.omitCtwa()},this.setChatCtwaContextLinkData=e=>{this.setState({ctwaContextLinkData:e,ctwaContextData:null},(()=>{this.updateCtwaContextState(e)}))},this.omitCtwa=()=>{this.setState({ctwaContextLinkData:null,ctwaContextData:null},(()=>{this.saveComposeContent(),this.scanForLinksTimer.onOrBefore(1)}))},this.indicateFocus=()=>{var e,t=this.refUIE;t&&t.activate(),O.default.maybeIndicateFocus(this.refInputHotkey,x.default.focusAnimation),null===(e=this.refComposeBoxInput)||void 0===e||e.focus(!1)},this.addEmojisToTouchBar=()=>{},this.removeEmojisFromTouchBar=()=>{},this.onPageUpDown=e=>{this.props.onPageUpDown&&(e.stopPropagation(),this.props.onPageUpDown(e),e.persist(),this.restoreFocusTimer.debounce(0))},this.restoreFocusTimer=new o.ShiftTimer((()=>{var e;null===(e=this.refComposeBoxInput)||void 0===e||e.focus(!1)})),this.handleEmoji=e=>{var t;null===(t=this.refComposeBoxInput)||void 0===t||t.replaceSelection(e)},this.handleGif=(e,t,a)=>{var r=(0,A.default)(e,{headers:{Accept:"video/mp4"}}).then((e=>{if(!e.ok)throw __LOG__(3)(he(),e.status),new P.MediaFileFailedLoad;return e.blob()})).then((e=>k.generateVideoThumbAndDuration(e,y.default.IMG_THUMB_MAX_EDGE).then((({thumb:r,duration:i})=>({file:e,filename:t,mimetype:e.type,isGif:!0,gifAttribution:a,fullPreview:window.URL.createObjectURL(e),fullPreviewSize:{width:r.fullWidth,height:r.fullHeight},preview:de.default.parseDataURL(r.url).data,duration:i})))));return this.saveComposeContentDebounced.flush(),m.default.attachMediaDrawer({chat:this.props.chat,attachments:[r],initCaption:this.getCurrentComposeContent(),fileOrigin:V.default.MEDIA_PICKER_ORIGIN_TYPE.CHAT_GIF_INAPP,onComplete:(e,t)=>{this.updateTextAfterMediaDrawerClose(e,!!t),e&&this.closeEmojiPanel()}}),r.catch((()=>{})),r},this.setRefPanels=e=>{this.refPanels=e},this.handlePanelsDisplayCache=e=>{this.panelsDisplayCache=e},this.handlePanelsGif=(e,t)=>{this.handleGif(e,e,t)},this.handlePanelsSticker=(e,t)=>{e.sendToChat((0,ie.unproxy)(this.props.chat),t),this.omitCtwa()},this.handlePanelsFocusRelease=()=>{O.default.shouldIndicateFocus(),this.restoreFocus()},this.openEmojiPanel=()=>{this._setSelectedPanelId(W.PANELS.EMOJI)},this.closeEmojiPanel=()=>{this._setSelectedPanelId(null),this.restoreFocus()},this.onPTTRecState=e=>{this.setState({recording:e})},this.preventBlur=e=>{var t,a,{target:r}=e,i=null===(t=this.refComposeBoxInput)||void 0===t?void 0:t.getRefInput(),s=(0,H.default)(this.refContainer,"this.refContainer");do{if(r===i)return}while(r!==s&&r instanceof HTMLElement&&(r=r.parentNode));Ee(e),null===(a=this.refComposeBoxInput)||void 0===a||a.focus(!1)},this.onChange=e=>{var t=(0,H.default)(this.refComposeBlock,"this.refComposeBlock").clientHeight,a=t-this.height;a&&this.props.onComposeHeightChange({input:a},!1),this.height=t;var r=this.hasText();this.text=e||"",""===e&&(this._wasCleared=!0);var i=this.hasText();i!==r&&this.setState({hasText:i}),i?(this.props.chat.presence.subscribe().catchType(b.WebdDrop,(()=>{})),(0,z.markComposing)(this.props.chat)):(0,z.markPaused)(this.props.chat);var s=this._findFirstWebLink();(!s&&this.preview||s&&s.url!==this.preview)&&this.clearLinkPreview(),this.pasteTriggeredOnChange?this.scanForLinksTimer.onOrBefore(1):this.scanForLinksTimer.debounce(700),this.pasteTriggeredOnChange=!1,this.saveComposeContentDebounced()},this.renderSendButton=()=>{var e=N.default&&window.AudioContext;return this.state.hasText||!e?l.createElement("button",{"data-a8n":d.default.key("compose-btn-send"),className:x.default.btnSend,onClick:this.onSendText,disabled:!this.hasText},l.createElement(se.default,{name:"send",directional:!0})):l.createElement(Q.default,{key:"ptt",chat:(0,ie.unproxy)(this.props.chat),onRecState:this.onPTTRecState,onRecordingSent:this.onVoiceRecordingSent})},this.renderPopupPanel=()=>{var e;if(this.state.linkPreview){var{title:t,canonicalUrl:a,description:r,thumbnail:i}=this.state.linkPreview.data;e=l.createElement(c.default,null,l.createElement(le.default,{displayName:"ComposeBoxLinkPreview",escapable:!0,requestDismiss:this.omitLinkPreview},l.createElement(Y.default,{onOmit:this.omitLinkPreview},l.createElement(G.default,{title:t,compose:!0,canonicalUrl:a,description:r,thumbnailJpeg:i}))))}var s,n=this.props.chat.composeQuotedMsg,o=this.props.chat.quotedMsgAdminGroupJid,d=this.props.chat.composeQuotedMsgRemoteJid;n?s=l.createElement(c.default,null,l.createElement(le.default,{displayName:"ComposeBoxQuotedMsg",escapable:!0,requestFocus:this.restoreFocus,requestDismiss:this.omitQuotedPreview},l.createElement(Y.default,{onOmit:this.omitQuotedPreview},l.createElement(X.default,{msg:n.safe(),composeQuotedMsgRemoteJid:d,theme:"composeBox",key:n.id.toString(),chat:n.chat})))):o&&(s=l.createElement(c.default,null,l.createElement(le.default,{displayName:"QuotedMsgAdminGroupName",escapable:!0,requestFocus:this.restoreFocus,requestDismiss:this.omitQuotedPreview},l.createElement(Y.default,{onOmit:this.omitQuotedMsgAdminGroupNamePreview},l.createElement(Z.default,{isComposePreview:!0,quotedGroupJid:o,key:o.toString()})))));var h=(0,ie.unproxy)(this.props.chat),p=!h.isPSA&&h.shouldAppearInList&&h.msgs&&h.msgs.length>0,m=null;if(p){var _=f.default.get(h.id),v=h.getReceivedVcardMsgs();Boolean(!_&&v&&v.length&&!h.vcardDismissed)&&(m=l.createElement(c.default,null,l.createElement(ue.default,{chat:h,dismissVcardPanel:this.dismissVcardPanel})))}var E=null;!h.trusted&&p&&null==m&&(E=l.createElement(c.default,null,l.createElement(ae.default,{chat:h,contact:h.contact})));var y,S,C=null;(this.state.selectedPanelId&&null!=this.state.width&&(C=l.createElement(c.default,null,l.createElement(ee.default,{onResize:this._handleResize},l.createElement(g.default,{displayCache:this.panelsDisplayCache,width:this.state.width,onDisplayCache:this.handlePanelsDisplayCache,onEmoji:this.handleEmoji,onFocusRelease:this.handlePanelsFocusRelease,onGif:this.handlePanelsGif,onPanelChange:this.handlePanelChange,onSticker:this.handlePanelsSticker,requestDismiss:this.closeEmojiPanel,forwardedRef:this.setRefPanels,selectedPanelId:this.state.selectedPanelId})))),this.state.ctwaContextLinkData)&&(y=l.createElement(c.default,null,l.createElement(le.default,{displayName:"ComposeBoxCtwaContextPreview",escapable:!0,requestDismiss:this.omitCtwa},l.createElement(Y.default,{onOmit:this.omitCtwa},l.createElement(T.default,{context:this.state.ctwaContextData,sourceUrl:null===(S=this.state.ctwaContextLinkData)||void 0===S?void 0:S.sourceUrl,compose:!0})))));return l.createElement("div",{className:x.default.positioningContainer},l.createElement("div",{className:x.default.overlayContainer},l.createElement(u.default,{onHeightChange:this.onHeightChange},E,m,C,s,e,y)))},this.onHeightChange=(e,t=!1)=>{this.props.onComposeHeightChange({overlay:e},t)},this.onFiles=e=>{var t=e.getFiles().filter((e=>{var t=(0,I.typeFromMimetype)(e.type);return"image"===t||"video"===t}));if(e.hasType("text/html")){var a=e.getData("text/html");if(a){if(a.includes("<meta name=ProgId content=PowerPoint.Slide>"))return!1;var r=a.includes("urn:schemas-microsoft-com:office"),i=a.includes("urn:schemas-microsoft-com:office:excel");if(r&&!i)return!1}}if(t.length)return this.saveComposeContentDebounced.flush(),m.default.attachMediaDrawer({chat:this.props.chat,attachments:t.map((e=>({file:e}))),fileOrigin:V.default.MEDIA_PICKER_ORIGIN_TYPE.PASTE,initCaption:this.getCurrentComposeContent(),onComplete:this.updateTextAfterMediaDrawerClose}),!0},this.updateTextAfterMediaDrawerClose=(e,t)=>{var a;e&&t&&(null===(a=this.refComposeBoxInput)||void 0===a||a.reset());e&&this.omitCtwa()},this.getCurrentComposeContent=()=>this.props.chat.getComposeContents(),this.onTextPaste=e=>{var t=fe.exec(e);if(t){var a="https://media.giphy.com/media/".concat(t[1],"/200w.mp4");return this.handleGif(a,e,M.VideoMessageAttribution.GIPHY).catch((()=>{var t;(m.default.closeDrawerMid(),this.refComposeBoxInput)&&(this.refComposeBoxInput.focus(!0),null===(t=this.refComposeBoxInput)||void 0===t||t.replaceSelection(e));m.default.openToast(l.createElement(oe.default,{msg:F.default.t(918),id:(0,oe.genId)()}))})),!0}return this.pasteTriggeredOnChange=!0,!1},this.onSelectionChange=e=>{this.selection=e},this.hasText=()=>{var e=this.text.trim().length>0;return(0,R.setHasText)(e),e},this.onEnter=e=>{e&&e.repeat||this.onSendText()},this.onSendText=()=>{(0,$.reconnect)();var e=this.refComposeBoxInput,{chat:t}=this.props;if(e){var a=e.serialize(),[r,i]=[a[0].trim(),a[1]];if(0!==r.length||this.state.ctwaContextLinkData){this.cancelPendingLinkPreviews();var s=t.composeQuotedMsg,n=t.quotedMsgAdminGroupJid,o=this.state.linkPreview&&this.state.linkPreview.data,l=i.mentionedJidList||[],d=(0,q.prepareCtwaContextSend)(this.state.ctwaContextLinkData,this.state.ctwaContextData),u=this._wasCleared;this._setSelectedPanelId(null),this.setState({hasText:!1,linkPreview:null},(()=>{if(u){var e=(0,ie.unproxy)(t);e.urlText&&(e.urlText=void 0)}(0,te.sendTextMsgToChat)(t,r,{linkPreview:o,quotedMsg:s,mentionedJidList:l,quotedMsgAdminGroupJid:n,ctwaContext:d}),this._wasCleared=!1})),this.omitCtwa(),t.composeQuotedMsg=null,t.quotedMsgAdminGroupJid=null,t.composeQuotedMsgRemoteJid=null,t.setComposeContents({}),e.reset(),this.text="",this.hasText()}}},this.handlePanelChange=e=>{this._setSelectedPanelId(e)},this.handleTab=e=>{this.state.selectedPanelId&&(this.refPanels&&this.refPanels.restoreFocus(!0),Ee(e))},this.setRefUIE=e=>{this.refUIE=e},this.setRefContainer=e=>{this.refContainer=e},this.setRefComposeBlock=e=>{this.refComposeBlock=e},this.setRefInputHotkey=e=>{this.refInputHotkey=e},this.setRefComposeBoxInput=e=>{this.refComposeBoxInput=e},this._handleResize=({width:e})=>{this.state.width!==e&&this.setState({width:e})};var{chat:t}=e,a=t.getComposeContents();this.text=a.text||"",this.selection=a.selection,this.preview=this.omittedURL=a.omittedURL,this.saveComposeContentDebounced=this.props.debounce(this.saveComposeContent,200),this.state={hasText:!!this.text,recording:!1,linkPreview:null,isLoadingLinkPreview:!1,selectedPanelId:null,textsize:S.default.get().textsize,width:null,ctwaContextLinkData:a.ctwaContextLinkData,ctwaContextData:a.ctwaContext}}componentDidMount(){var{listeners:e,chat:t}=this.props;if(this.props.listeners.add(f.default,"add remove reset",(()=>{this.forceUpdate()})),w.default.supportsFeature(w.default.F.INDEX_RECEIVED_VCARD)){var a=t.getReceivedVcardMsgs();a&&e.add(a,"add remove reset",(()=>{this.forceUpdate()}))}this.height=(0,H.default)(this.refComposeBlock,"this.refComposeBlock").clientHeight,this.scanForLinksTimer.debounceAndCap(50,50);var{ctwaContextLinkData:r}=this.state;!r||this.state.ctwaContextData&&this.state.ctwaContextData.sourceUrl===r.sourceUrl||this.setState({ctwaContextData:null},(()=>{this.updateCtwaContextState(r)}))}componentWillUnmount(){this.scanForLinksTimer.cancel(),this.restoreFocusTimer.cancel(),this.saveComposeContent(),this.removeEmojisFromTouchBar()}updateCtwaContextState(e){this.saveComposeContent(),this.clearLinkPreview(),e.sourceUrl&&(0,J.fetchCtwaContextData)(e).then((e=>{this.setState({ctwaContextData:e},(()=>{this.saveComposeContent()}))})).catch((e=>{__LOG__(3)(ce(),e)}))}_setSelectedPanelId(e){var t=null==this.state.selectedPanelId&&null!=e;this.setState({selectedPanelId:e,width:t&&null!=this.refComposeBlock?this.refComposeBlock.offsetWidth-pe:this.state.width})}render(){return l.createElement(le.default,{displayName:"ComposeBox",ref:this.setRefUIE,uimState:le.default.State.PASSIVE,requestFocus:this.restoreFocus},l.createElement(L.default,{component:"footer",handlers:{pagedown:this.onPageUpDown,pageup:this.onPageUpDown},className:x.default.footer,onRef:this.setRefContainer,onContextMenu:this.preventBlur,onMouseDown:this.preventBlur},l.createElement(C.default,{canCut:!0,className:(0,n.default)(x.default.blockCompose,ye(this.state.textsize)),ref:this.setRefComposeBlock},l.createElement("div",{className:(0,n.default)(x.default.childPadding,x.default.boxPanelWrapper)},l.createElement(K.default,{selectedPanelId:this.state.selectedPanelId,onChange:this.handlePanelChange}),l.createElement("div",{className:x.default.attachButtonContainer},l.createElement(h.default,{chat:(0,ie.unproxy)(this.props.chat),getComposeContents:this.getCurrentComposeContent,onMenuComplete:this.updateTextAfterMediaDrawerClose}))),l.createElement(L.default,{onRef:this.setRefInputHotkey,className:(0,n.default)(x.default.inputContainer,{[x.default.disabled]:this.state.recording}),handlers:{tab:this.handleTab,"shift+tab":this.handleTab},onFocus:this.onInputFocus,onBlur:this.onInputBlur},l.createElement(v.default,{a8n:"conversation-compose-box-input",placeholder:F.default.t(1359),readOnly:this.state.recording,ref:this.setRefComposeBoxInput,initialValue:this.text,initialSelection:this.selection,spellCheck:!0,multiline:!0,maxLength:y.default.MAX_TXT_MSG_SIZE,onMaxPasteExceeded:this.onMaxPasteExceeded,onEnter:this.onEnter,onFiles:this.onFiles,onTextPaste:this.onTextPaste,onChange:this.onChange,onSelect:this.onSelectionChange,textPasteMimePriority:[p.APP_TEXT_MIMETYPE,"text/plain"],theme:"compose"})),l.createElement("div",{className:x.default.childPadding},this.renderSendButton())),this.renderPopupPanel(),l.createElement(v.default.EmojiSuggestions,{chat:(0,ie.unproxy)(this.props.chat)}),l.createElement(ge,{key:this.props.chat.id.toString(),parent:this,chatId:this.props.chat.id}),l.createElement(v.default.Suggestions,{chat:(0,ie.unproxy)(this.props.chat)}),(0,D.canSendQuickReply)()&&l.createElement(v.default.QuickRepliesSuggestions,{chat:(0,ie.unproxy)(this.props.chat)})))}}me.CONCERNS={chat:["id","trusted","composeContents","composeQuotedMsg","isPSA","shouldAppearInList","presence","contact","attachMediaContents","quotedMsgAdminGroupJid","receivedVcardMsgs","vcardDismissed","composeQuotedMsgRemoteJid"]};var _e=(0,ne.default)((0,j.default)((0,re.default)(me,me.CONCERNS)));t.default=_e;class ve extends l.PureComponent{constructor(...e){super(...e),this.restoreFocus=()=>{this.props.parent.restoreFocus()},this.pasteEmojiInput=e=>{this.props.parent.pasteEmojiInput(e)},this.handleRoutedPaste=e=>{this.props.parent.handleRoutedPaste(e)},this.onSendText=()=>{this.props.parent.onSendText()},this.onTextSizeChange=e=>{this.props.parent.onTextSizeChange(e)},this.setChatCtwaContextLinkData=e=>{this.props.parent.setChatCtwaContextLinkData(e)}}componentDidMount(){var{chatId:e,listeners:t}=this.props;t.add(m.default,"focus_chat_text_input_".concat(e.toString()),this.restoreFocus),t.add(m.default,"paste_chat_text_input_".concat(e.toString()),this.pasteEmojiInput),t.add(m.default,"send_paste_to_compose_".concat(e.toString()),this.handleRoutedPaste),t.add(m.default,"enter_chat_text_input_".concat(e.toString()),this.onSendText),t.add(m.default,"chat_set_ctwa_context_link_data_".concat(e.toString()),this.setChatCtwaContextLinkData),t.add(m.default,"focus_chat_text_input",this.restoreFocus),t.add(m.default,"textsize_change",this.onTextSizeChange)}render(){return null}}var ge=(0,j.default)(ve);function Ee(e){e&&(e.preventDefault(),e.stopPropagation())}function ye(e){for(var t=y.default.TEXTSIZE_CLASS_MAP,a=0;a<t.length;a++)if(t[a].scale===e)return t[a].classname}},18727:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PANELS=void 0;t.PANELS={EMOJI:"EMOJI",GIF:"GIF",STICKER:"STICKER"}},22224:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{forwardedRef:t}=e,a=(0,n.default)(e,["forwardedRef"]);return o.createElement(_,(0,s.default)({ref:t},a))};var s=i(a(58527)),n=i(a(22220)),o=r(a(2784)),l=(a(12097),r(a(82512))),d=i(a(3815)),u=i(a(18120)),c=r(a(60312)),h=a(18727),f=i(a(72424)),p=r(a(65742)),m=i(a(17693));class _ extends o.PureComponent{constructor(e){super(e),this.restoreFocus=e=>{switch(this.props.selectedPanelId){case h.PANELS.STICKER:this._refStickerPanel&&this._refStickerPanel.restoreFocus();break;case h.PANELS.GIF:this._refGifPanel&&this._refGifPanel.restoreFocus(e);break;case h.PANELS.EMOJI:default:this._refEmojiPanel&&this._refEmojiPanel.restoreFocus(e)}},this._setRefEmojiPanel=e=>{this._refEmojiPanel=e},this._setRefGifPanel=e=>{this._refGifPanel=e},this._setRefStickerPanel=e=>{this._refStickerPanel=e},this._setRefStickerPanelMd=e=>{this._refStickerPanel=e},this._handleEmojiPanelDisplayCache=e=>{this._emojiPanelDisplayCache=e,this._triggerDisplayCache()},this._handleEmojiPanelFocusNext=()=>{this.props.onPanelChange(h.PANELS.GIF)},this._handleEmojiPanelFocusPrev=()=>{this.props.onFocusRelease()},this._handleGifPanelDisplayCache=e=>{this._gifPanelDisplayCache=e,this._triggerDisplayCache()},this._handleTextChange=e=>{this.setState({searchText:e})},this._handleGifPanelFocusNext=()=>{this.props.onPanelChange(h.PANELS.STICKER)},this._handleGifPanelFocusPrev=()=>{this.props.onPanelChange(h.PANELS.EMOJI)},this._handleRequestFocus=()=>{this.restoreFocus(!1)},this._handleStickerPanelDisplayCache=e=>{this._stickerPanelDisplayCache=e,this._triggerDisplayCache()},this._handleStickerPanelFocusNext=()=>{this.props.onFocusRelease()},this._handleStickerPanelFocusPrev=()=>{this.props.onPanelChange(h.PANELS.GIF)},e.displayCache&&(this._emojiPanelDisplayCache=e.displayCache.emojiPanel,this._gifPanelDisplayCache=e.displayCache.gifPanel,this._stickerPanelDisplayCache=e.displayCache.stickerPanel),this.state={searchText:""}}_triggerDisplayCache(){this.props.onDisplayCache({emojiPanel:this._emojiPanelDisplayCache,gifPanel:this._gifPanelDisplayCache,stickerPanel:this._stickerPanelDisplayCache})}render(){var e=null;switch(this.props.selectedPanelId){case h.PANELS.STICKER:u.default.supportsFeature(u.default.F.MD_BACKEND)?f.default.webServerStickerPanel&&(e=o.createElement(c.default,{ref:this._setRefStickerPanelMd,displayLocation:c.DISP_LOCATION.COMPOSE_BOX,displayCache:this._stickerPanelDisplayCache,onChange:this._handleTextChange,defaultSearchText:this.state.searchText,onDisplayCache:this._handleStickerPanelDisplayCache,onFocusPrev:this._handleStickerPanelFocusPrev,onFocusNext:this._handleStickerPanelFocusNext,onSticker:this.props.onSticker})):e=o.createElement(p.default,{ref:this._setRefStickerPanel,displayCache:this._stickerPanelDisplayCache,displayLocation:p.DISP_LOCATION.COMPOSE_BOX,onChange:this._handleTextChange,defaultSearchText:this.state.searchText,onDisplayCache:this._handleStickerPanelDisplayCache,onFocusPrev:this._handleStickerPanelFocusPrev,onFocusNext:this._handleStickerPanelFocusNext,onSticker:this.props.onSticker});break;case h.PANELS.EMOJI:default:e=o.createElement(l.default,{ref:this._setRefEmojiPanel,displayCache:this._emojiPanelDisplayCache,width:this.props.width,displayLocation:l.DISP_LOCATION.COMPOSE_BOX,onChange:this._handleTextChange,defaultSearchText:this.state.searchText,onDisplayCache:this._handleEmojiPanelDisplayCache,onEmoji:this.props.onEmoji,onFocusPrev:this._handleEmojiPanelFocusPrev,onFocusNext:this._handleEmojiPanelFocusNext});break;case h.PANELS.GIF:e=o.createElement(d.default,{ref:this._setRefGifPanel,displayCache:this._gifPanelDisplayCache,onChange:this._handleTextChange,defaultSearchText:this.state.searchText,onDisplayCache:this._handleGifPanelDisplayCache,onFocusRelease:this.props.onFocusRelease,onFocusNext:this._handleGifPanelFocusNext,onFocusPrev:this._handleGifPanelFocusPrev,onGif:this.props.onGif})}return e&&o.createElement(m.default,{displayName:"ComposeBoxPanels",escapable:!0,requestDismiss:this.props.requestDismiss,requestFocus:this._handleRequestFocus},e)}}},74735:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.OPEN_MENU_WIDTH=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(32960)),l=i(a(50935)),d=a(95595),u=i(a(18120)),c=i(a(17957)),h=a(18727),f=i(a(37264)),p=r(a(23219)),m=i(a(72424)),_=parseInt(f.default["-open-menu-width"].replace(/px$/,""),10);t.OPEN_MENU_WIDTH=_;class v extends n.PureComponent{constructor(...e){super(...e),this._handleOpenClick=()=>{this.props.onChange(this._getLastSelectedPanel())},this._handleCloseClick=()=>{this.props.onChange(null)},this._handleEmojiClick=()=>{Boolean(this.props.selectedPanelId)?((0,d.setLastComposeBoxPanel)(h.PANELS.EMOJI),this.props.onChange(h.PANELS.EMOJI)):this._handleOpenClick()},this._handleGifClick=()=>{(0,d.setLastComposeBoxPanel)(h.PANELS.GIF),this.props.onChange(h.PANELS.GIF)},this._handleStickerClick=()=>{(0,d.setLastComposeBoxPanel)(h.PANELS.STICKER),this.props.onChange(h.PANELS.STICKER)},this._setRefCloseButtonRef=e=>{this._refCloseButton=e},this._setRefEmojiButtonRef=e=>{this._refEmojiButton=e},this._setRefGifButtonRef=e=>{this._refGifButton=e},this._setRefStickerButtonRef=e=>{this._refStickerButton=e},this._setRefMenu=e=>{this._refMenu=e}}_getLastSelectedPanel(){return(0,d.getLastComposeBoxPanel)()||h.PANELS.EMOJI}render(){var e=Boolean(this.props.selectedPanelId),t=!u.default.supportsFeature(u.default.F.MD_BACKEND)||m.default.webServerStickerPanel;return n.createElement("div",{"data-state":e?"open":"closed",ref:this._setRefMenu,className:(0,s.default)(f.default.menu,{[f.default.open]:e,[f.default.full]:t})},n.createElement(p.default,{"aria-label":c.default.t(3),className:(0,s.default)(f.default.button,f.default.closeButton),"data-tab":e?l.default.TAB_ORDERS.COMPOSE_BOX_MENU_BUTTON:null,icon:"x",onClick:this._handleCloseClick,onRef:this._setRefCloseButtonRef,size:p.SIZES.SQUARE24}),n.createElement(p.default,{"aria-label":c.default.t(22),className:(0,s.default)(f.default.button,f.default.firstButton),"data-a8n":o.default.key("compose-btn-emoji"),"data-tab":e?null:l.default.TAB_ORDERS.COMPOSE_BOX_MENU_BUTTON,icon:"smiley",isActive:this.props.selectedPanelId===h.PANELS.EMOJI,isMain:!0,onClick:this._handleEmojiClick,onRef:this._setRefEmojiButtonRef,size:p.SIZES.SQUARE26}),n.createElement(p.default,{"aria-label":c.default.t(23),className:(0,s.default)(f.default.button,f.default.secondButton),icon:"gif",isActive:this.props.selectedPanelId===h.PANELS.GIF,onClick:this._handleGifClick,onRef:this._setRefGifButtonRef,size:p.SIZES.SQUARE26}),t&&n.createElement(p.default,{"aria-label":c.default.t(24),className:(0,s.default)(f.default.button,f.default.thirdButton),icon:"sticker",isActive:this.props.selectedPanelId===h.PANELS.STICKER,onClick:this._handleStickerClick,onRef:this._setRefStickerButtonRef,size:p.SIZES.SQUARE26}))}}t.default=v},23219:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.SIZES=t.ITEM_SPACING=t.ITEM_WIDTH=void 0;var s=i(a(2784)),n=r(a(72779)),o=r(a(44343)),l=r(a(56951)),d=r(a(82631)),u=parseInt(l.default["-item-width"].replace(/px$/,""),10);t.ITEM_WIDTH=u;var c=parseInt(l.default["-item-spacing"].replace(/px$/,""),10);t.ITEM_SPACING=c;var h={SQUARE24:"SQUARE24",SQUARE26:"SQUARE26"};t.SIZES=h;class f extends s.PureComponent{constructor(...e){super(...e),this._handleKeyboardActivation=e=>{e.stopPropagation(),e.preventDefault(),this.props.onClick()},this._handleClick=()=>{this.props.onClick()}}render(){return s.createElement(o.default,{component:"button",className:(0,n.default)(l.default.container,this.props.className,{[l.default.active]:this.props.isActive,[l.default.top]:this.props.isMain||this.props.singleButton,[l.default.padding]:this.props.singleButton,[l.default.square24]:this.props.size===h.SQUARE24,[l.default.square26]:this.props.size===h.SQUARE26}),"aria-label":this.props["aria-label"],"data-tab":this.props["data-tab"],"data-a8n":this.props["data-a8n"],onClick:this._handleClick,onRef:this.props.onRef,handlers:{enter:this._handleKeyboardActivation,space:this._handleKeyboardActivation}},s.createElement(d.default,{name:this.props.icon}))}}t.default=f},34837:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(69327)),o=r(a(82631));class l extends s.Component{constructor(...e){super(...e),this._refDiv=s.createRef(),this.getElement=()=>this._refDiv.current}render(){return s.createElement("div",{className:n.default.panel,ref:this._refDiv},s.createElement("div",{className:n.default.body},this.props.children),s.createElement("div",{className:n.default.cancelButton},s.createElement("div",{role:"button",onClick:this.props.onOmit},s.createElement(o.default,{name:"x"}))))}}t.default=l},72780:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=a(43322),o=r(a(62830)),l=r(a(79711)),d=r(a(9386)),u=r(a(24211)),c=r(a(14457)),h=r(a(71201)),f=r(a(17957)),p=r(a(81524)),m=r(a(20642)),_=r(a(60733)),v=r(a(60949)),g=r(a(50540)),E=a(89590),y=r(a(2734)),S=a(25995),C=r(a(40207)),T=r(a(17026));class M extends s.PureComponent{constructor(...e){super(...e),this._refDropdown=s.createRef(),this.getElement=()=>this._refDropdown.current,this._forceUpdate=()=>{this.forceUpdate()},this.reportSpam=()=>{(0,E.sendSpamReport)(this.props.chat,S.SpamFlow.Dropdown),l.default.closeModal()},this.reportSpamBlock=()=>{var{chat:e,contact:t}=this.props;(0,E.sendSpamReport)(e,S.SpamFlow.Block),(0,n.blockContact)(t),l.default.closeModal()},this.reportSpamBlockClear=()=>{(0,E.sendSpamBlockClear)(this.props.chat),l.default.closeModal()},this.onReportSpam=()=>{l.default.openModal(s.createElement(g.default,{isBusiness:this.props.contact.isBusiness,isGroupChat:!1,onReport:this.reportSpam,onReportBlockClear:this.reportSpamBlockClear,onCancel:()=>l.default.closeModal()}))},this.blockContact=()=>{(0,n.blockContact)(this.props.contact),l.default.closeModal()},this.unblockContact=()=>{(0,n.unblockContact)(this.props.contact),l.default.closeModal()},this.onBlockContact=()=>{l.default.openModal(s.createElement(o.default,{contact:this.props.contact,onCancel:()=>l.default.closeModal(),onBlock:this.blockContact,onReportSpamBlock:this.reportSpamBlock}))},this.onUnblockContact=()=>{var e=s.createElement(v.default,{contact:this.props.contact});l.default.openModal(s.createElement(d.default,{okText:f.default.t(1362),onOK:this.unblockContact,cancelText:f.default.t(1547),onCancel:()=>l.default.closeModal()},s.createElement(p.default,{id:1363,params:{contact:e}})))}}componentDidMount(){this.props.listeners.add(T.default,"change:displayInfo",this._forceUpdate)}menus(){var{chat:e,contact:t,onSelectMessages:a}=this.props,r=[];return e.isPSA||r.push(s.createElement(h.default,{key:"info",a8n:"mi-contact",action:()=>l.default.chatInfoDrawer(e)},f.default.t(1559))),t.isBusiness&&r.push(s.createElement(h.default,{key:"report",a8n:"report",action:this.onReportSpam},f.default.t(1191)),s.createElement(h.default,{key:"block",a8n:"block",action:t.isBlocked()?this.onUnblockContact:this.onBlockContact},t.isBlocked()?f.default.t(1362):f.default.t(273))),r.push(s.createElement(h.default,{a8n:"mi-select-messages",key:"select",action:a},f.default.t(1775))),e.mute.canMute()&&r.push(s.createElement(_.default,{key:"mute",onMute:t=>l.default.muteChat(e,t),mute:e.mute,chat:e,settings:y.default})),r.push(s.createElement(h.default,{key:"clear",a8n:"mi-clear",action:()=>l.default.clearChatMsgs(e)},f.default.t(480))),r.push(s.createElement(u.default,{key:"delete",onDeleteOrExit:()=>l.default.deleteOrExitChat(e),chat:e})),r}render(){return this.props.toContextMenuManager?s.createElement("div",{ref:this._refDropdown},this.menus()):s.createElement(c.default,{onRef:e=>{this._refDropdown.current=e},type:"dropdown_menu",key:"ContactMenuDropdown",flipOnRTL:!0,dirX:"LEFT"},this.menus())}}M.CONCERNS={chat:["isPSA","mute"],contact:["id","isBusiness","name","isContactBlocked"]};var b=(0,m.default)((0,C.default)(M,M.CONCERNS));t.default=b},99850:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;i(a(19976));var s=i(a(45455)),n=r(a(2784)),o=i(a(89216)),l=i(a(23109)),d=i(a(79711)),u=i(a(50935)),c=i(a(52468)),h=a(19741),f=i(a(84941)),p=i(a(20642)),m=i(a(58885)),_=i(a(50751)),v=i(a(72424)),g=i(a(17026)),E=i(a(67134));class y extends n.Component{constructor(){super(...arguments),this._refContainer=n.createRef(),this._msgCollectionChanged=(e,t,a,r)=>{var i=this.state.msgCollection;i!==e&&i!==t||this.setState({msgCollection:a,focusCtx:r&&(r.msg||r.collection)?r:this.state.focusCtx})},this._windowGainedFocus=()=>{g.default.markAvailable();var e=this.state.chat;e&&e.isUser&&e.presence.subscribe().catchType(h.WebdDrop,(()=>{}))},this._windowLostFocus=()=>{g.default.markUnavailable(u.default.SEND_UNAVAILABLE_WAIT)},this.handleClearChat=e=>{this.state.chat===e&&this.setState({chat:void 0,msgCollection:void 0,focusCtx:void 0})},this._handleOpenChatId=0,this._handleOpenChat=(e,t,a)=>{d.default.updateChatlistSelection(e);var r=this._openedChatInfo,i={};this._openedChatInfo=i;var s=t?t.collection:e.msgs;this._handleOpenChatId++;var n=this._handleOpenChatId,o=()=>n===this._handleOpenChatId,l=!1,u=()=>{o()&&(l=!0,a(this._newChatScrollInfo(r,t)))},c=t&&t.msg&&t.msg.id||t&&t.key;this.setState({chat:e,msgCollection:s,focusCtx:t,notifyChatRendered:e=>{!l&&o()&&(c?e.some((e=>e.id.equals(c)))&&u():u())},updateOpenedChatInfo:e=>{Object.assign(i,e)}},(()=>{_.default.lastPlayedMessageId=null}))},this._newChatScrollInfo=(e,t)=>{var a=t?t.msg||m.default.get(t.key):void 0;if(t&&a&&e){var{chat:r,renderedMsgsInfo:i,visibleMsgOrder:n}=e;if(r&&i&&n&&!(0,s.default)(i)&&!(0,s.default)(n)){var o=i[n[0].toString()],l=Object.keys(i).find((e=>e===a.id.toString())),d=l?i[l]:null;if(d)return{wasVisible:!0,offset:d.offset};if(r===a.chat)return o&&a.t<o.t?{wasVisible:!1,alignAt:"top"}:{wasVisible:!1,alignAt:"bottom"}}}return{wasVisible:!1,alignAt:"center"}},this.state={chat:void 0,msgCollection:void 0,focusCtx:void 0,showConversationPreview:!1,animate:void 0}}componentDidMount(){this.props.listeners.add(d.default,"open_chat",this._handleOpenChat),this.props.listeners.add(d.default,"clear_chat",this.handleClearChat),this.props.listeners.add(window,"focus",this._windowGainedFocus),this.props.listeners.add(window,"blur",this._windowLostFocus),v.default.wallpapersV2&&(this.props.listeners.add(l.default,"wallpaper_drawer_open",(()=>{this.setState({showConversationPreview:!0})})),this.props.listeners.add(l.default,"wallpaper_drawer_close",(()=>{this.setState({showConversationPreview:!1})})))}shouldComponentUpdate(e,t){return t!==this.state||e.animate!==this.props.animate}componentDidUpdate(e,t){var a=this.state.chat,r=t.chat;if(a&&r!==a){if(this.props.listeners.add(a,"change:cmc:merge",this._msgCollectionChanged),r&&this.props.listeners.remove(r,"change:cmc:merge",this._msgCollectionChanged),!a.contact.isBusiness)return;var i=o.default.get(a.id);i&&!i.stale||o.default.find(a.id)}}animatePanel(e,t){var a;return!!(null===(a=this._refContainer)||void 0===a?void 0:a.current)&&this._refContainer.current.animatePanel(e,t)}containsDOMNode(e){var t;return!!(null===(t=this._refContainer)||void 0===t?void 0:t.current)&&this._refContainer.current.containsDOMNode(e)}static getDerivedStateFromProps(e,t){return null==t.animate?{animate:e.animate}:!1!==t.animate?{animate:!1}:null}render(){var{chat:e,msgCollection:t,focusCtx:a,showConversationPreview:r,animate:i}=this.state;return e&&t||r?n.createElement(c.default,{chat:e,groupMetadata:null==e?void 0:e.groupMetadata,chatPreference:l.default.assertGet("defaultPreference"),focusCtx:a,msgCollection:t,notifyChatRendered:this.state.notifyChatRendered||(()=>{}),updateOpenedChatInfo:this.state.updateOpenedChatInfo||(()=>{}),key:null==e?void 0:e.id.toString(),ref:this._refContainer,showPreview:r}):n.createElement(f.default,{animate:i,ref:this._refContainer})}}var S=(0,p.default)((0,E.default)(y));t.default=class extends S{animatePanel(e,t){return super.getComponent().animatePanel(e,t)}containsDOMNode(e){return this.getComponent().containsDOMNode(e)}}},47106:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({wallpaperColor:e,showDoodle:t}){var a,{theme:r}=n.useContext(u.default);a=d.default.wallpapersV2?t:e===o.default.DEFAULT_CHAT_WALLPAPER;if(a&&(0,c.colorExistsInTheme)(e,r)){var i={opacity:(0,c.getDoodleOpacity)(e,r)},h=(0,c.getDoodleAssetName)(e,r),f={};return f[h]=!0,n.createElement("div",(0,s.default)({className:l.default.tile},f,{style:i}))}return null};var s=i(a(58527)),n=r(a(2784)),o=i(a(50935)),l=i(a(73554)),d=i(a(72424)),u=i(a(2220)),c=a(80084)},71745:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(22220)),n=i(a(19976)),o=i(a(70417)),l=i(a(45455)),d=i(a(84336)),u=i(a(54073)),c=i(a(12436)),h=i(a(72779)),f=a(39329),p=r(a(2784)),m=i(a(28316)),_=i(a(88665)),v=i(a(8701)),g=i(a(19899)),E=i(a(79711)),y=i(a(50935)),S=i(a(72780)),C=i(a(7681)),T=i(a(17029)),M=i(a(12893)),b=i(a(96955)),P=i(a(45090)),A=a(19741),I=r(a(96452)),O=i(a(6660)),N=i(a(18120)),w=a(421),D=a(13414),R=i(a(17957)),L=i(a(20642)),k=i(a(22493)),x=a(73157),F=i(a(30870)),G=i(a(58885)),U=i(a(61941)),B=i(a(72259)),j=i(a(36533)),V=i(a(75681)),H=i(a(82631)),W=r(a(75074)),K=i(a(77626)),Y=i(a(17693)),q=i(a(63498)),z=i(a(42097)),Q=a(58269),J=i(a(91378)),X=i(a(74824));function Z(){var e=(0,n.default)(["MRM noEarlierMsgs on chat "," is true but chat.msgChunks has length: ",",\nand chat.msgs.length: ",""]);return Z=function(){return e},e}function $(){var e=(0,n.default)(["ConversationMsgs:loadRecentMsgs failed\n",""],["ConversationMsgs:loadRecentMsgs failed\\n",""]);return $=function(){return e},e}function ee(){var e=(0,n.default)(["ConversationMsgs:loadEarlierMsgs failed\n",""],["ConversationMsgs:loadEarlierMsgs failed\\n",""]);return ee=function(){return e},e}class te extends p.Component{constructor(e){super(e),this._chatOpenScrollTimestamp=0,this._renderedMsgCache=new Map,this._visibleMsgOrder=[],this._setScrollContainer=e=>this.scrollContainer=e,this.onPanesWillChange=()=>{var e=this._visibleMsgOrder[this._visibleMsgOrder.length-1];if(e){var t=e.toString(),a=this.messageList;if(t&&a){var r,i=null===(r=a.getMsgWrapperRef(t))||void 0===r?void 0:r.getContainerElement();if(i){var s=this.scrollContainer;if(!s)return;var n=this._getMsgBottom(s,i);this._panesChanging={msg:i,container:s,msgBottom:n}}}}},this.onPanesDidChange=()=>{if(this._panesChanging){var{msg:e,container:t,msgBottom:a}=this._panesChanging;this._setMsgBottom(t,e,a),this._panesChanging=void 0}},this._attachMsgCollectionObservers=e=>{var{listeners:t,chat:a,msgCollection:r}=this.props,{focusCtx:i,chat:s,msgCollection:n}=e;r&&(t.remove(r,"remove_msgs",this._onMsgsDelete),t.remove(a.msgs,"change:last",this._onLastMsgChanged)),t.remove(a,"change:unreadCount",this._onUnreadCount),null!=this._msgLoadStateChangeUnsubscribe&&this._msgLoadStateChangeUnsubscribe(),this._msgLoadStateChangeUnsubscribe=n.onMsgLoadStateChange(this._handleMsgLoadStateChange),t.add(s,"change:unreadCount",this._onUnreadCount),t.add(s.msgs,"change:last",this._onLastMsgChanged),t.add(n,"remove_msgs",this._onMsgsDelete),i&&n.loadAroundPromise&&n.loadAroundPromise.checkpoint(this.props.rejectOnUnmount()).catchType(I.Unmount,(()=>{})).catchType(A.E404,(()=>{E.default.openToast(p.createElement(W.default,{msg:R.default.t(958),id:(0,W.genId)()}))}))},this._updateForCurrentPosition=(0,c.default)((()=>{var e=this.props.rejectOnUnmount();(0,P.default)({signal:e}).then((()=>{e.isRejected()||(this._updateRenderedMsgCache(),m.default.unstable_batchedUpdates((()=>{var{scrollContainer:e}=this;if(null!=e){e.scrollTop<300&&this.loadEarlierMsgs();var{isNearBottom:t,cursor:a}=this.state,r=this._nearBottom();r?(this._maybeSendSeen(!0),le(this.props)&&t!==r&&this.setState({isNearBottom:r,newUnread:0}),(a.getEnd(this.props.msgCollection)<this.props.msgCollection.length||!le(this.props))&&this._loadRecentMsgs()):t!==r&&this.setState({isNearBottom:r})}})))})).catchType(v.default,(()=>{}))}),100),this._handleMsgLoadStateChange=()=>{var e=this.state.msgLoadState,t=ie(this.props.msgCollection),a={msgLoadState:t};if(e.isLoadingAroundMsgs&&!t.isLoadingAroundMsgs){var r=re(this.props.focusCtx),i=r&&r.msg;i&&(a=(0,o.default)((0,o.default)({},a),{},{cursor:this.state.cursor.init(i.id,this.props.msgCollection),focusCtx:r}))}this.setState(a)},this._onResizeThrottle=(0,c.default)((()=>{this._updateRenderedMsgCache()}),100),this.onMsgKeyChange=({newKey:e,oldKey:t})=>{var a=t.toString(),r=e.toString(),i=this._renderedMsgCache.get(a);i&&(this._renderedMsgCache.delete(a),this._renderedMsgCache.set(r,i));for(var s=0;s<this._visibleMsgOrder.length;++s)if(this._visibleMsgOrder[s]===t){this._visibleMsgOrder[s]=e;break}},this._onResizeDebounce=(0,u.default)((()=>{var e=this._nearBottom();this._nearBottom!==e&&this.setState({isNearBottom:e})}),100),this.loadEarlierMsgs=()=>{var{chat:e,msgCollection:t}=this.props,{cursor:a,msgLoadState:r}=this.state;if(a.getStart(t)>0)a.hasBefore(t)&&this.setState({cursor:a.loadBefore(t)});else{if(r.isLoadingEarlierMsgs||r.isLoadingAroundMsgs)return;if(se(e,le(this.props),r)&&(t.msgLoadState.noEarlierMsgs=!1),t.msgLoadState.noEarlierMsgs)return;e.loadEarlierMsgs(t).checkpoint(this.props.rejectOnUnmount()).then((()=>{var e={};this.state.focusCtx||(e.focusCtx=oe(this.props,this.state.unreadCount)),a.hasBefore(t)?(e.cursor=a.loadBefore(t),this.setState(e)):this.setState(e)})).catchType(I.Unmount,(()=>{})).catch((e=>{__LOG__(2)(ee(),e)}))}},this._loadRecentMsgs=()=>{var{chat:e,msgCollection:t}=this.props,{cursor:a,msgLoadState:r}=this.state;if(a.getEnd(t)<t.length)this.setState({cursor:a.loadAfter(t)});else{if(r.isLoadingRecentMsgs||r.isLoadingAroundMsgs)return;this._loadRecentMsgsPromise=e.loadRecentMsgs(t).cancellable().checkpoint(this.props.rejectOnUnmount()).then((()=>{a.hasAfter(t)?this.setState({cursor:a.loadAfter(t)}):this.state.cursor.getEnd(t)>=t.length&&le(this.props)&&this.forceUpdate()})).catchType(I.Unmount,(()=>{})).catch((e=>{__LOG__(2)($(),e)})).finally((()=>{this._loadRecentMsgsPromise=null}))}},this.onComposeHeightChange=e=>{var t=this.scrollContainer;if(t)if(e){if(t&&e<0&&t.scrollTop===t.scrollHeight-t.clientHeight)return;this._setScrollTop(t,t.scrollTop+e)}else{var a=t.scrollHeight-(t.scrollTop+t.clientHeight);(0,J.default)(t,{tween:18},{progress:()=>{this._setScrollTop(t,t.scrollHeight-a-t.clientHeight)},duration:300},[.1,.82,.25,1])}},this._getScrollContainer=()=>(0,U.default)(this.scrollContainer,"this.scrollContainer"),this.getScrollBottom=()=>{var e=this.scrollContainer;return e?e.scrollHeight-(e.scrollTop+e.clientHeight):0},this._hideStickyDateMarker=new f.ShiftTimer((()=>{this._stickyDateMarker&&this._stickyDateMarker.setVisibility(!1)})),this._updateStickyDateMarker=new f.ShiftTimer((e=>{var{dateMarkerIdx:t,silent:a=!1}=e||{},r=this.messageList;if(r&&"number"==typeof t){a||Date.now()-(this._programmaticScroll||0)<200||this._showStickyDateMarker();var i=r.getDateMarkerRef(t);if(-1===t)this._stickyDateMarker.updateDateMarkerText();else if(i){var s=i.getTimestamp(),n=g.default.relativeDateStr(s).toUpperCase();this._stickyDateMarker.updateDateMarkerText(n)}if(this._dateMarkerIdx!==t){var o=r.getDateMarkerRef(this._dateMarkerIdx);o&&o.show(),i&&i.hide()}}})),this.isMsgVisible=(e,t=!1)=>this._renderedMsgCache.has(e.toString())&&(!!t||this.getMsgComponent(e)),this.getSequentialMsg=e=>{var t=this.getMsgs();if(t){var a=t.findIndex((t=>e.equals(t.id)));return a>=t.length-1?null:t[a+1]}},this.onScroll=()=>{this._updateForCurrentPosition()},this.onWindowGainedFocus=()=>{var e=this.props.chat;!this._clearUnreadTimer&&e.isDirty()&&(this._clearUnreadTimer=setTimeout((()=>{delete this._clearUnreadTimer,this._maybeSendSeen()}),y.default.CLEAR_CHAT_DIRTY_WAIT))},this.onWindowLostFocus=()=>{if(this.state.unreadCount&&le(this.props)){var e=this.props.chat;0===e.unreadCount&&this.setState({unreadCount:0}),e.markedUnread=!1}},this._jumpToBottom=()=>{var{msgCollection:e}=this.props;le(this.props)&&this.state.cursor.getEnd(e)>=e.length?this._scrollToBottom():E.default.openChatBottom(this.props.chat).then((e=>{e&&E.default.focusChatTextInput(this.props.chat)}))},this._scrollToBottom=e=>{var t=this.scrollContainer;t&&this._setScrollTop(t,t.scrollHeight),e&&e();var a=this.props.rejectOnUnmount();(0,P.default)({signal:a}).then((()=>{a.isRejected()||this.setState({cursor:this.state.cursor.resetBeforeCursor(this.props.msgCollection)})})).catchType(v.default,(()=>{}))},this._onLastMsgChanged=(e,t)=>{var{msgCollection:a}=this.props,{focusCtx:r}=this.state,{cursor:i}=this.state,s=a.last();if(le(this.props)){var n={},o=document.hasFocus(),d=this._nearBottom(),u=d;o&&d?(n.unreadCount=0,n.focusCtx=void 0,i=i.setFocusedMsgKey(a)):s&&s.isSentByMe&&t&&(u=!0,this.state.unreadCount&&(n.unreadCount=0,n.focusCtx=void 0,i=i.setFocusedMsgKey(a)),this._jumpToBottom()),(i=r&&!n.hasOwnProperty("focusCtx")?i.loadAfter(a,{count:1}):i.loadBeforeCapped(a,{count:1}))!==this.state.cursor&&(n.cursor=i),(0,l.default)(n)||this.setState(n,(()=>{u&&this._scrollToBottom()}))}else t&&e&&e.isSentByMe&&this._jumpToBottom()},this._onUnreadCount=()=>{var{chat:e}=this.props,t=this._nearBottom(),a=document.hasFocus();this._maybeSendSeen(t,a);var r={};if(e.unreadCount&&!e.pendingSeenCount&&le(this.props)){r.unreadCount=e.unreadCount;var i=oe(this.props,this.state.unreadCount);i&&(r.focusCtx=i,r.cursor=this.state.cursor.setFocusedMsgKey(this.props.msgCollection,i.msg&&i.msg.id))}var s=t&&r.unreadCount-this.state.unreadCount==1;(!t&&le(this.props)||!e.pendingSeenCount&&this.state.newUnread!==e.unreadCount)&&(r.newUnread=e.unreadCount),(0,l.default)(r)||this.setState(r,(()=>{s&&this._scrollToBottom()}))},this._onMsgsDelete=()=>{var e=this.state.cursor.ensureValidFocus(this.props.msgCollection);this.state.cursor!==e?this.setState({cursor:e}):this.forceUpdate()},this.onPageUpDown=()=>{O.default.focus(this.scrollContainer)},this.scrollMessages=()=>{var e,t=this._visibleMsgOrder[this._visibleMsgOrder.length-1];if(t){var a=this.messageList;if(a){var r=null===(e=a.getMsgWrapperRef(t.toString()))||void 0===e?void 0:e.getContainerElement();if(r){var i=1===this._visibleMsgOrder.length?r.clientHeight:0,s=this.scrollContainer;(0,J.default)(r,"stop"),s&&(0,J.default)(s,"stop"),(0,J.default)(r,"scroll",{duration:300,container:s,offset:i})}}}},this.onKeyPress=e=>{e.metaKey||e.ctrlKey||(e.preventDefault(),"Enter"!==e.key||e.shiftKey?E.default.pasteChatTextInput(this.props.chat,String.fromCharCode(e.charCode)):E.default.enterChatTextInput(this.props.chat))},this.onContextMenu=e=>{var t,a=this.props.chat,r=this.props.onSelectMessages;if(a.isUser)t=p.createElement(S.default,{chat:a,toContextMenuManager:!0,contact:a.contact,onSelectMessages:r});else if(a.isGroup)t=(0,x.groupMenu)(a,r);else{if(!a.isBroadcast)return;t=(0,x.broadcastMenu)(a,r)}e.preventDefault(),e.stopPropagation(),e.persist(),this.setState({contextMenu:{menu:t,event:e}})},this.onContextClose=()=>{this.setState({contextMenu:null})},this.onPaste=e=>{e.preventDefault(),e.persist(),E.default.sendPasteToCompose(this.props.chat,e)},this._notifyChatRendered=()=>{this.props.notifyChatRendered&&this.props.notifyChatRendered(this.getMsgs())};var{chat:t}=e,a=t.pendingSeenCount?0:t.unreadCount;this.state=(0,o.default)((0,o.default)({},ne(e,a)),{},{unreadCount:a,isNearBottom:!0,newUnread:0,contextMenu:null,textsize:T.default.get().textsize,msgLoadState:ie(e.msgCollection),lastSelectable:e.selectable,lastChat:e.chat,lastMsgCollection:e.msgCollection,lastFocusCtx:e.focusCtx})}componentWillUnmount(){null!=this._msgLoadStateChangeUnsubscribe&&this._msgLoadStateChangeUnsubscribe(),this._updateStickyDateMarker.cancel(),this._updateForCurrentPosition.cancel(),this._onResizeThrottle.cancel(),this._onResizeDebounce.cancel(),this._hideStickyDateMarker.cancel(),this._clearUnreadTimer&&clearTimeout(this._clearUnreadTimer),this._maybeSendSeen(),this.props.chat.markedUnread=!1}componentDidMount(){var{chat:e,listeners:t}=this.props;t.add(E.default,"scroll_chat_to_bottom",(e=>{this._scrollToBottom(e)})),t.add(E.default,"scroll_messages",this.scrollMessages),t.add(E.default,"textsize_change",(e=>this.setState({textsize:e}))),t.add(E.default,"panes_will_change",this.onPanesWillChange),t.add(E.default,"panes_did_change",this.onPanesDidChange),t.add(E.default,"scroll_to_focused_msg",(()=>{this._chatOpenScrollTimestamp=Date.now()})),t.add(window,"focus",this.onWindowGainedFocus),t.add(window,"blur",this.onWindowLostFocus),t.add(window,"resize",this._onResizeThrottle),t.add(window,"resize",this._onResizeDebounce),t.add(G.default,"change:msgKey",this.onMsgKeyChange),this._attachMsgCollectionObservers(this.props);var a=this.props.rejectOnUnmount();(0,P.default)({signal:a}).then((()=>{a.isRejected()||this._showStickyDateMarker()})).catchType(v.default,(()=>{})),this.props.updateOpenedChatInfo({chat:e}),(0,Q.sendSeen)(e),this._updateForCurrentPosition(),this._notifyChatRendered()}static getDerivedStateFromProps(e,t){var a={lastSelectable:e.selectable,lastChat:e.chat,lastMsgCollection:e.msgCollection,lastFocusCtx:e.focusCtx};return e.selectable!==t.lastSelectable||e.chat===t.lastChat&&e.msgCollection===t.lastMsgCollection&&e.focusCtx===t.lastFocusCtx||(a=(0,o.default)((0,o.default)({},a),{},{msgLoadState:ie(e.msgCollection)},ne(e,t.unreadCount))),a}shouldComponentUpdate(e,t){if(!(0,_.default)(e,this.props))return!0;var a=this.state,{msgLoadState:r}=a,i=(0,s.default)(a,["msgLoadState"]),{msgLoadState:n}=t,o=(0,s.default)(t,["msgLoadState"]);return!(0,_.default)(n,r)||!(0,_.default)(o,i)}componentDidUpdate(e){e.selectable!==this.props.selectable||e.chat===this.props.chat&&e.msgCollection===this.props.msgCollection&&e.focusCtx===this.props.focusCtx||(this._loadRecentMsgsPromise&&this._loadRecentMsgsPromise.cancel(),this._attachMsgCollectionObservers(this.props));var{chat:t}=this.props;this._updateRenderedMsgCache(e.chat===t),this.props.updateOpenedChatInfo({chat:t}),e.msgCollection!==this.props.msgCollection&&this._updateForCurrentPosition(),this._notifyChatRendered()}_getMsgBottom(e,t){var a=e.scrollTop,r=e.scrollHeight,i=e.clientHeight;return r-(t.offsetTop+t.clientHeight+(r-(a+i)))}_setMsgBottom(e,t,a){var r=t.offsetTop+t.clientHeight+a-e.clientHeight;this._setScrollTop(e,r)}getRenderedMessageCount(){return this.getMsgs().length}setScrollBottom(e){var t=this.scrollContainer;t&&this._setScrollTop(t,t.scrollHeight-e-t.clientHeight)}_setScrollTop(e,t){this._programmaticScroll=Date.now(),e&&(e.scrollTop=t)}_showStickyDateMarker(){this._stickyDateMarker&&this._stickyDateMarker.setVisibility(!0),this._hideStickyDateMarker.debounce(3e3)}_nearBottom(){var e=this.scrollContainer;return!!e&&e.scrollTop+y.default.SCROLL_FUDGE>e.scrollHeight-e.clientHeight}getUnreadFocusCtx(e){var t,{chat:a,msgCollection:r,focusCtx:i}=e||this.props;if(a.unreadCount?t=a.unreadCount:this.state&&this.state.unreadCount&&(t=this.state.unreadCount),(!i||le(this.props))&&t){var s=r.toArray().filter((e=>e.isUnreadType)).reverse().slice(0,t);if(s.length===t)return{msg:s=s[s.length-1],isUnreadDivider:a.shouldShowUnreadDivider,highlightMsg:!1}}}getMsgs(){var{focusCtx:e,msgCollection:t}=this.props,{cursor:a,msgLoadState:r}=this.state;return e&&r.isLoadingAroundMsgs?[]:t.toArray().slice(a.getStart(t),a.getEnd(t)).map((e=>e.safe()))}_updateRenderedMsgCache(e){var t=this.messageList;if(t){for(var a=[],r=t.props.msgs,i=new Map,s={},n=0,o=r.length-1;n<o;){var l=Math.floor((n+o)/2),d=r[l].id.toString(),u=t.getMsgWrapperRef(d);t.getMsgVisibility(u).visibility===y.default.VISIBILITY.ABOVE?n=l+1:o=l}for(var c=n;c<r.length;c++){var h=r[c].id.toString(),f=t.getMsgWrapperRef(h);if(!f)throw new Error("msgRef not found!");var p=t.getMsgVisibility(f);if(p.visibility!==y.default.VISIBILITY.VISIBLE)break;s[h]={offset:p.offset,t:r[c].t},i.set(h,f),a.push(r[c].id)}if(this.scrollContainer){var m=this.scrollContainer.scrollTop;n=0,o=Object.keys(t.renderedDateMarkers).length-1;var _=t.getDateMarkerRef(0),v=_&&_.getElement();if(v&&v.offsetTop<=m+8.5)for(;n<o;){var g=Math.ceil((n+o)/2),E=t.getDateMarkerRef(g);if(!E)throw new Error("DateMarkerRef: ".concat(g," not found. ").concat(Object.keys(t.renderedDateMarkers).toString(),"}"));(0,U.default)(E.getElement(),"midDateMarkerRef.getElement()").offsetTop>m+8.5?o=g-1:n=g}else n=-1;this._updateStickyDateMarker.onOrBefore(0,{dateMarkerIdx:n,silent:e}),this._dateMarkerIdx=n,this.pauseHiddenGifs(this._renderedMsgCache,i),this._renderedMsgCache=i,this._visibleMsgOrder=a,this.props.updateOpenedChatInfo({renderedMsgsInfo:s,visibleMsgOrder:a,clientHeight:this.scrollContainer?this.scrollContainer.clientHeight:0})}}else this._renderedMsgCache.clear()}getMsgComponent(e){var t=this.messageList;if(t)return t.getMsgComponentRef(e.toString())}pauseHiddenGifs(e,t){e.forEach(((e,a)=>{if(!t.has(a)){var r=this.props.msgCollection.get(a);r&&r.isGif&&"function"==typeof e.pause&&e.pause()}}))}_maybeSendSeen(e,t){var a=e,r=t,{chat:i,msgCollection:s}=this.props,{cursor:n}=this.state;if(i.isDirty()&&le(this.props)&&n.getEnd(s)>=s.length&&((0,d.default)(r)&&(r=document.hasFocus()),r&&((0,d.default)(a)&&(a=this._nearBottom()),a)))return(0,Q.sendSeen)(i),!0}render(){var e,{chat:t,msgCollection:a,selectable:r,onMessageSelect:i}=this.props,{focusCtx:s,msgLoadState:n}=this.state,o=(0,h.default)(M.default.pane,{[M.default.selectable]:r}),l=y.default.TEXTSIZE_CLASS_MAP.find((e=>e.scale===this.state.textsize));l&&(e=l.classname);var d,u,c,f,m=this.getMsgs(),_=p.createElement(F.default,{ref:(0,D.GetRef)((e=>{this.messageList=e})),getScrollContainer:this._getScrollContainer,chat:t,unreadCount:this.state.unreadCount,selectable:r,onMessageSelect:i,msgs:m,focusedMsgCtx:s,selectedMessages:this.props.selectedMessages,isMsgVisible:this.isMsgVisible,getSequentialMsg:this.getSequentialMsg,isLoadingEarlierMsgs:n.isLoadingEarlierMsgs}),v=p.createElement(k.default,{direction:"around",isMostRecentCMC:le(this.props),loadMoreMsgs:()=>{},isLoadingEarlierMsgs:n.isLoadingEarlierMsgs,isLoadingRecentMsgs:n.isLoadingRecentMsgs,isLoadingAroundMsgs:n.isLoadingAroundMsgs});(this.state.cursor.getStart(a)>0||!n.noEarlierMsgs||se(t,le(this.props),n))&&(d=p.createElement(k.default,{direction:"earlier",isMostRecentCMC:le(this.props),loadMoreMsgs:this.loadEarlierMsgs,isLoadingEarlierMsgs:n.isLoadingEarlierMsgs,isLoadingRecentMsgs:n.isLoadingRecentMsgs,isLoadingAroundMsgs:n.isLoadingAroundMsgs})),(this.state.cursor.getEnd(a)<a.length||!le(this.props))&&(u=p.createElement(k.default,{direction:"recent",isMostRecentCMC:le(this.props),loadMoreMsgs:this._loadRecentMsgs,isLoadingEarlierMsgs:n.isLoadingEarlierMsgs,isLoadingRecentMsgs:n.isLoadingRecentMsgs,isLoadingAroundMsgs:n.isLoadingAroundMsgs})),s&&n.isLoadingAroundMsgs?(u=void 0,d=void 0):v=void 0;var g,E,{isNearBottom:S,newUnread:T}=this.state;if(!S||!n.isLoadingAroundMsgs&&!le(this.props)){T&&t.unreadCount&&(f=p.createElement(z.default,{count:this.state.newUnread,key:"icon-unread"}));var P=(0,h.default)(M.default.incoming,{[M.default.ffFix]:K.default.isGecko});c=p.createElement("div",{className:P,onClick:this._jumpToBottom,role:"button"},p.createElement(X.default,{transitionName:"pop",className:M.default.unread},f),p.createElement(H.default,{name:"down",className:M.default.iconDown}))}if(this.state.contextMenu&&(g=p.createElement(Y.default,{displayName:"ConversationContextMenu",escapable:!0,popable:!0,requestDismiss:this.onContextClose},p.createElement(q.default,{contextMenu:this.state.contextMenu}))),N.default.supportsFeature(N.default.F.MD_BACKEND)&&n.noEarlierMsgs){var A,I,O=t.endOfHistoryTransferType;if(null==O)A=R.default.t(532);else switch(O){case w.ConversationEndOfHistoryTransferType.COMPLETE_BUT_MORE_MESSAGES_REMAIN_ON_PRIMARY:A=R.default.t(531),I=R.default.t(530);break;case w.ConversationEndOfHistoryTransferType.COMPLETE_AND_NO_MORE_MESSAGE_REMAIN_ON_PRIMARY:}null!=A&&(E=p.createElement(C.default,{icon:p.createElement(H.default,{name:"content-chat"}),theme:"conversation",secondary:I},A))}return p.createElement(b.default,{className:e},p.createElement(V.default,{ref:(0,D.GetRef)((e=>{this._stickyDateMarker=e}))}),p.createElement(X.default,{transitionName:"pop"},c),p.createElement("div",{className:o,ref:this._setScrollContainer,onScroll:this.onScroll,onKeyPress:this.onKeyPress,onContextMenu:r?null:this.onContextMenu,onPaste:this.onPaste,tabIndex:"0"},E,p.createElement("div",{className:M.default.empty}),v,d,_,u),g)}}var ae=(0,B.default)((0,L.default)(te));function re(e){return null==e?null:null!=e.key?(0,o.default)((0,o.default)({},e),{},{msg:G.default.get(e.key)}):e}function ie(e){var{msgLoadState:t}=e;return{noEarlierMsgs:t.noEarlierMsgs,isLoadingEarlierMsgs:t.isLoadingEarlierMsgs,isLoadingRecentMsgs:t.isLoadingRecentMsgs,isLoadingAroundMsgs:t.isLoadingAroundMsgs,contextLoaded:t.contextLoaded}}function se(e,t,a){var r=a.noEarlierMsgs&&e.shouldAppearInList&&t&&e.msgChunks.filter((e=>e.filter((t=>t.msgChunk===e)).length>0)).length>0;return r&&(__LOG__(4,void 0,new Error,!0)(Z(),String(e.id),e.msgChunks.length,e.msgs.length),SEND_LOGS("noEarlierMsgs-error")),r}function ne(e,t){var{focusCtx:a,chat:r,msgCollection:i}=e,s=re(a)||oe(e,t),n=s&&s.msg,o=n&&n.id;return{cursor:j.default.create({msgCollection:i,focusedMsgKey:o,type:r.isGroup?y.default.RENDER_CURSOR.GROUP_CONVERSATION:y.default.RENDER_CURSOR.CONVERSATION}),focusCtx:s}}function oe(e,t){var a,{chat:r,msgCollection:i,focusCtx:s}=e;if(a=r.unreadCount?r.unreadCount:t,(!s||le(e))&&a){var n=i.toArray().filter((e=>e.isUnreadType)).reverse().slice(0,a);if(n.length===a)return{msg:n=n[n.length-1],isUnreadDivider:r.shouldShowUnreadDivider,highlightMsg:!1}}}function le(e){return e.chat.msgs===e.msgCollection}t.default=ae},66588:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(13888)),n=r(a(2784)),o=i(a(32960)),l=i(a(8701)),d=i(a(24156)),u=i(a(97238)),c=i(a(35528)),h=i(a(79711)),f=i(a(72149)),p=i(a(50935)),m=i(a(47106)),_=i(a(71745)),v=i(a(51971)),g=i(a(7822)),E=i(a(28515)),y=i(a(45090)),S=r(a(96452)),C=a(95595),T=i(a(79251)),M=i(a(18120)),b=i(a(6319)),P=i(a(35625)),A=a(13414),I=i(a(17957)),O=i(a(20642)),N=i(a(40210)),w=i(a(51465)),D=i(a(42913)),R=i(a(61941)),L=i(a(72259)),k=i(a(72424)),x=i(a(17693)),F=i(a(91378)),G=i(a(74824));class U extends n.Component{constructor(e){super(e),this._fillerHeight=0,this._maybeOpenEphemeralNUX=()=>{var{chat:e}=this.props;(0,C.shouldShowNUX)(p.default.NUX.EPHEMERAL)&&e.isEphemeralSettingOn()&&h.default.ephemeralDrawer(e)},this._updateAnnounceGrpState=()=>{this.forceUpdate()},this._onComposeState=()=>{var e=this.props.chat.canSend;this.state.canCompose!==e&&(e||(this._fillerHeight=0),this.setState({canCompose:e}))},this.onComposeHeightChange=({input:e,overlay:t=0},a)=>{var r=this._refMsgPanel;if(r&&this.msgs){var i=this.msgs.getScrollBottom();if(void 0===e){if(a)return this._fillerHeight=t,void(this._refFiller&&(this._refFiller.style.height="".concat(this._fillerHeight,"px"),this.msgs.setScrollBottom(i)));this._fillerHeight+=t,t<0&&(this._refFiller&&(this._refFiller.style.height="".concat(this._fillerHeight,"px")),this.msgs&&this.msgs.setScrollBottom(i)),this._msgPanelAnimation&&(this.didCancel=!0,this._msgPanelAnimation.cancel()),this._msgPanelAnimation=(this._msgPanelAnimation||Promise.resolve()).then((()=>(0,F.default)(r,{translateY:t>0?[-t,0]:[0,t]},{duration:300,easing:[.1,.82,.25,1]}))).cancellable().catchType(S.Unmount,(()=>{})).then((()=>{t>0&&this._refFiller&&(this._refFiller.style.height="".concat(this._fillerHeight,"px")),r.style.transform="",this.msgs&&t>0&&this.msgs.setScrollBottom(i)})).catchType(Promise.CancellationError,(()=>{(0,F.default)(r,"finish",!0)})).then((()=>{this.didCancel?this.didCancel=!1:this._msgPanelAnimation=void 0}))}else this.msgs.onComposeHeightChange(e)}},this.onSelectMessages=()=>{this.state.selectable||this.setState({selectable:!0})},this.onCancelSelection=()=>{this.state.selectable&&(this.selectedMessages.unsetAll(),this.setState({selectable:!1}))},this.onMessageSelect=(e,t,a)=>{this.onSelectMessages();var r=this.selectedMessages.getSelected().pop(),i=a&&a.shiftKey;this.selectedMessages.setVal(e,t,!0),i&&this._selectMsgRange(r,e,t)},this._selectMsgRange=(e,t,a)=>{var{msgCollection:r}=this.props;if(e&&r){var i=r.indexOf(e);if(i)for(var s=r.indexOf(t),n=s>i?-1:1,o=i+(a?n:s<i?0:2*n);s!==o;)this.selectedMessages.setVal((0,R.default)(r.at(s),"msgCollection.at(currentSelectedIndex)").safe(),a,!0),s+=n}},this.onPageUpDown=e=>{this.msgs.onPageUpDown(e)},this.onDragStart=()=>{this.state.canCompose&&(this.blockDrop=!0)},this.onDragEnd=()=>{this.state.canCompose&&(this.blockDrop=!1)},this.onDragEnter=e=>{if(this.state.canCompose){this.onCancelSelection();var t=new E.default(e.dataTransfer);this._ComposeBoxRef&&!this.blockDrop&&(t.hasType("Files")||t.hasType("text/uri-list")||t.hasType("text/html"))&&(this._ComposeBoxRef.saveComposeContentDebounced.flush(),h.default.attachMediaDrawer({chat:this.props.chat,initCaption:this._ComposeBoxRef.getCurrentComposeContent(),onComplete:this._ComposeBoxRef.updateTextAfterMediaDrawerClose}),e.stopPropagation(),e.preventDefault())}},this._setRefFiller=e=>{this._refFiller=e},this._setRefMsgPanel=e=>{this._refMsgPanel=e},this._handleSetRefHeader=e=>{this._refHeader=e},this._getHeaderOffset=e=>{if(this._refHeader){var t=this._refHeader.getBoundingClientRect();e((0,s.default)(t,["right","bottom"]))}else e(null)},this._closeGroupDescription=()=>{this.setState({showGroupDesc:!1})},this.getMsgs=(0,A.GetRef)((e=>{this.msgs=e}));var{chat:t}=this.props;this.selectedMessages=new D.default([],(e=>e.id.toString())),this.state={canCompose:t.canSend,selectable:!1,showGroupDesc:t.isGroup&&this._showGroupDesc()},this._openEvent=new N.default.WebcChatOpen({webcUnreadCount:t.unreadCount,webcWindowHeightFloat:(0,T.default)()}),this.uiActionEvent=new N.default.UiAction({uiActionType:N.default.UI_ACTION_TYPE.CHAT_OPEN,uiActionPreloaded:!0})}_showGroupDesc(){if(!(M.default.supportsFeature(M.default.F.GROUPS_V_3)&&k.default.groupDescLength>0))return!1;var{chat:e}=this.props;return!(0,C.getSeenGroupDesc)(e.id)&&((0,C.setSeenGroupDesc)(e.id),0===e.unreadCount?!e.msgs.some((e=>e.type!==p.default.MSG_TYPE.E2E_NOTIFICATION&&e.type!==p.default.MSG_TYPE.GP2)):!e.shouldShowUnreadDivider)}componentDidMount(){var{chat:e}=this.props;this.props.listeners.add(e,"change:canSend",this._onComposeState),this.props.listeners.add(e,"change:isReadOnly change:isAnnounceGrpRestrict",this._updateAnnounceGrpState),this.props.listeners.add(h.default,"get_conversation_header_offset",this._getHeaderOffset),this.props.listeners.add(e.msgs,"remove",(e=>{this.selectedMessages.isSelected(e)&&this.onMessageSelect(e,!1)}));var t=e.getReceivedVcardMsgs();t&&!t.isSynced&&t.sync(e),e.active=!0;var a=this._openEvent;if(a){this._openEvent=null,this.msgs&&(a.webcRenderedMessageCount=this.msgs.getRenderedMessageCount()),a.markWebcChatOpenT(),this._beforePaintRafId=requestAnimationFrame((()=>{this._beforePaintRafId=null,a.markWebcChatOpenBeforePaintT()}));var r=this.props.rejectOnUnmount();(0,y.default)({signal:r}).then((()=>{r.isRejected()||(this.msgs&&(a.webcFinalRenderedMessageCount=this.msgs.getRenderedMessageCount()),a.markWebcChatOpenPaintedT(),a.commit())})).catchType(l.default,(()=>{}))}var i=this.uiActionEvent;i&&(i.markUiActionT(),i.commit(),this.uiActionEvent=void 0),e.attachMediaContents&&h.default.attachMediaDrawer({chat:e,animationName:"noop"}),k.default.ephemeralMessages&&(0,C.shouldShowNUX)(p.default.NUX.EPHEMERAL)&&e.isEphemeralSettingOn()&&h.default.ephemeralDrawer(e),k.default.ephemeralMessages&&(0,C.shouldShowNUX)(p.default.NUX.EPHEMERAL)&&(e.isGroup?this.props.listeners.add(e.groupMetadata,"change:ephemeralDuration",this._maybeOpenEphemeralNUX):e.isUser&&this.props.listeners.add(e,"change:ephemeralDuration",this._maybeOpenEphemeralNUX))}componentWillUnmount(){var{chat:e}=this.props;e.urlText&&(e.urlText=void 0),e.urlNumber&&(e.urlNumber=void 0),e.active=!1,null!=this._beforePaintRafId&&cancelAnimationFrame(this._beforePaintRafId)}render(){var e,t,a,r,{chat:i,msgCollection:s,focusCtx:l,groupMetadata:h}=this.props;if(this.state.showGroupDesc&&h&&h.desc&&(r=n.createElement(x.default,{displayName:"GroupDesc",escapable:!0,requestDismiss:this._closeGroupDescription},n.createElement(g.default,{onClose:this._closeGroupDescription},n.createElement(b.default,{chat:i,groupMetadata:h})))),this.state.selectable)t=n.createElement(x.default,{displayName:"MultiSelect",escapable:!0,requestDismiss:this.onCancelSelection},n.createElement(w.default,{chat:i,selectedMessages:this.selectedMessages,disableRevoke:!1,noSortOnForward:!1,onCancel:this.onCancelSelection})),e=n.createElement("footer",{className:v.default.footer}),a=n.createElement("div",{ref:this._setRefFiller,className:v.default.filler});else if(this.state.canCompose)e=n.createElement(f.default,{chat:i,ref:(0,A.GetRef)((e=>{this._ComposeBoxRef=e})),onComposeHeightChange:this.onComposeHeightChange,onPageUpDown:this.onPageUpDown}),a=n.createElement("div",{ref:this._setRefFiller,style:{height:"".concat(this._fillerHeight,"px")},className:v.default.filler});else{var p,E;i.isGroup&&!i.isReadOnly&&i.isAnnounceGrpRestrict&&h?p=n.createElement(d.default,{chat:i,groupMetadata:h,mute:i.mute}):E=i.isGroup?h.support?I.default.t(1325):I.default.t(1548):i.isPSA?I.default.t(1761):I.default.t(1549,{contact:i.contact.formattedName}),e=n.createElement("footer",{className:v.default.footer},n.createElement("div",{"data-a8n":o.default.key("block-message"),className:v.default.footerMessage},p||E))}return n.createElement(n.Fragment,null,n.createElement(m.default,{wallpaperColor:this.props.wallpaperColor,showDoodle:this.props.chatPreference.showDoodle}),n.createElement(P.default,{chat:i,contact:i.contact,onSelectMessages:this.onSelectMessages,onRef:this._handleSetRefHeader}),n.createElement(G.default,{transitionName:"butterbar",className:v.default.subheader},r),n.createElement("div",{className:v.default.subheader},n.createElement(u.default,{chat:i})),n.createElement("div",{className:v.default.body,ref:this._setRefMsgPanel,onDragStart:this.onDragStart,onDragEnd:this.onDragEnd,onDragEnter:this.onDragEnter},n.createElement(_.default,{ref:this.getMsgs,chat:i,selectable:this.state.selectable,onMessageSelect:this.onMessageSelect,msgCollection:s,onSelectMessages:this.onSelectMessages,focusCtx:l,selectedMessages:this.selectedMessages,notifyChatRendered:this.props.notifyChatRendered,updateOpenedChatInfo:this.props.updateOpenedChatInfo})),a,e,n.createElement(G.default,{transitionName:"slide-up"},t),n.createElement(c.default,null))}}var B=(0,L.default)((0,O.default)(U));t.default=B},52468:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(70417)),n=i(a(72779)),o=r(a(2784)),l=a(16211),d=i(a(23109)),u=i(a(50935)),c=i(a(47106)),h=i(a(51971)),f=i(a(66588)),p=i(a(88995)),m=i(a(70477)),_=i(a(17957)),v=i(a(20642)),g=i(a(40207)),E=i(a(17693));class y extends o.Component{constructor(e){super(e),this._setRefContainer=e=>{this._refContainer=e},this._onWallpaperColorPreview=e=>{e?this.state.wallpaperColor!==e&&this.setState({wallpaperColor:e}):this.setState({wallpaperColor:d.default.assertGet("defaultPreference").wallpaperColor})},this.state={wallpaperColor:this.props.chatPreference.wallpaperColor,prevWallpaperColor:this.props.chatPreference.wallpaperColor}}static getDerivedStateFromProps(e,t){return e.chatPreference.wallpaperColor!==t.prevWallpaperColor?(0,s.default)((0,s.default)({},t),{},{wallpaperColor:e.chatPreference.wallpaperColor,prevWallpaperColor:e.chatPreference.wallpaperColor}):null}componentDidMount(){this.props.listeners.add(d.default,"wallpaper_color_preview",this._onWallpaperColorPreview)}animatePanel(e,t){var a,r=null===(a=this._refContainer)||void 0===a?void 0:a.clientWidth;return null!=r&&e!==t&&(0,l.animateConversationPanel)(this._refContainer,r/(e-t))}containsDOMNode(e){return!!this._refContainer&&this._refContainer.contains(e)}render(){var e,t={};this.state.wallpaperColor!==u.default.DEFAULT_CHAT_WALLPAPER&&(t={backgroundColor:this.state.wallpaperColor});var{chat:a,msgCollection:r,focusCtx:i,notifyChatRendered:s,updateOpenedChatInfo:l,showPreview:v}=this.props;return a&&r?e=o.createElement(f.default,{chat:a,groupMetadata:a.groupMetadata,chatPreference:d.default.assertGet("defaultPreference"),focusCtx:i,msgCollection:r,notifyChatRendered:s,updateOpenedChatInfo:l,key:a.id.toString(),wallpaperColor:this.state.wallpaperColor}):v&&(e=o.createElement(o.Fragment,null,o.createElement("header",{className:(0,n.default)(m.default.chatHeader,p.default.header)},o.createElement("span",{className:(0,n.default)(p.default.title,m.default.chatTitle)},_.default.t(1528))),o.createElement(c.default,{wallpaperColor:this.state.wallpaperColor,showDoodle:this.props.chatPreference.showDoodle}),o.createElement("footer",{className:h.default.footer}))),o.createElement(E.default,{displayName:"ConversationPanel",uimState:E.default.State.INACTIVE},o.createElement("div",{id:"main",className:(0,n.default)(p.default.pane,{[p.default.previewPane]:this.props.showPreview}),style:t,ref:this._setRefContainer},e))}}y.CONCERNS={chatPreference:["wallpaperColor","showDoodle"]};var S=(0,v.default)((0,g.default)(y,y.CONCERNS));t.default=class extends S{animatePanel(e,t){return super.getComponent().animatePanel(e,t)}containsDOMNode(e){return this.getComponent().containsDOMNode(e)}}},7822:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(90136)),o=r(a(82631));class l extends s.Component{constructor(...e){super(...e),this._refDiv=s.createRef(),this.getElement=()=>this._refDiv.current}render(){var e=this.props.onClose?s.createElement("div",{className:n.default.closeBtn,role:"button",onClick:this.props.onClose},s.createElement(o.default,{name:"x"})):null;return s.createElement("div",{className:n.default.subheader,ref:this._refDiv},s.createElement("div",{className:n.default.main},this.props.children),e)}}t.default=l},6319:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(79711)),l=i(a(91581)),d=i(a(59867)),u=a(62902),c=i(a(17957)),h=r(a(90088)),f=i(a(61124)),p=i(a(40207)),m=a(40263);class _ extends n.Component{constructor(e){super(e),this._setBodyRef=e=>{this._bodyRef=e},this._setDescRef=e=>{this._descRef=e},this.handleResize=({width:e})=>{var{descWidth:t}=this.state;t<=0||this.setState({truncated:e<t})},this.onReadMore=()=>{var{chat:e}=this.props;o.default.chatInfoDrawer(e,!0)},this.state={desc:g(e.groupMetadata),descWidth:0,truncated:!1,hidden:!0}}componentDidMount(){this._onDescWidthObtained()}static getDerivedStateFromProps(e,t){var a=g(e.groupMetadata);return a===t.desc?null:{desc:a,descWidth:0,truncated:!1,hidden:!0}}componentDidUpdate(e,t){t.desc!==this.state.desc&&this._onDescWidthObtained()}_onDescWidthObtained(){var{_bodyRef:e,_descRef:t}=this;if(e&&t){var a=e.clientWidth,r=t.getWidth();this.setState({descWidth:r,truncated:a<r,hidden:!1})}}render(){var{desc:e}=this.state;if(!e)return null;var{truncated:t,hidden:a}=this.state,r=this.props.chat.isTrusted()?u.Configuration.TrustedGroupDesc({links:h.findLinks(e)}):u.Configuration.UntrustedGroupDesc();return n.createElement(n.Fragment,null,n.createElement(m.TextDiv,{theme:"title"},c.default.t(1618)),n.createElement(f.default,{onRef:this._setBodyRef,onResize:this.handleResize,className:d.default.body},n.createElement(m.TextSpan,{theme:"small",className:(0,s.default)(d.default.text,{[d.default.hidden]:a})},n.createElement(l.default,{ref:this._setDescRef,text:e,selectable:!0,formatters:r,className:d.default.desc}),t&&n.createElement("div",{className:d.default.more,role:"button",onClick:this.onReadMore},c.default.t(1181)))))}}_.CONCERNS={groupMetadata:["desc"]};var v=(0,p.default)(_,_.CONCERNS);function g(e){return e&&e.desc}t.default=v},86811:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(1374)),o=r(a(3573)),l=r(a(11932)),d=r(a(79711)),u=r(a(52737)),c=r(a(50935)),h=r(a(14457)),f=r(a(71201)),p=a(99888),m=r(a(47685)),_=a(95595),v=r(a(68476)),g=r(a(98294)),E=r(a(17957)),y=a(83974),S=a(53527),C=r(a(91729)),T=r(a(40210)),M=a(41501),b=r(a(55043)),P=r(a(82631)),A=r(a(67360));class I extends s.Component{constructor(...e){super(...e),this._refContainer=s.createRef(),this._setDocPicker=e=>this._docPicker=e,this._setMediaPicker=e=>this._mediaPicker=e,this._onDocumentPick=e=>{if(e){e.stopPropagation();var t=null==e.target.files?[]:Array.from(e.target.files);if(this.dismiss(),t.length){var a=t.map((e=>({file:e,type:p.FILETYPE.DOCUMENT})));this.attachMediaDrawer(a)}}else this.dismiss()},this._onMediaPick=e=>{if(e){e.stopPropagation();var t=null==e.target.files?[]:Array.from(e.target.files);this.dismiss(),t.length&&this.attachMediaDrawer(t.map((e=>({file:e}))))}else this.dismiss()},this._onMediaClick=e=>{if(e.preventDefault(),this._mediaPicker)return this._mediaPicker.open(),!1},this._onDocumentClick=e=>{if(e.preventDefault(),this._docPicker)return this._docPicker.open(),!1},this.onContactClick=e=>{e.preventDefault(),d.default.openModal(s.createElement(l.default,{chat:this.props.chat,onContactsSent:()=>{this.props.onMenuComplete&&this.props.onMenuComplete(!0,!1)}}))},this.onProductCatalogClick=e=>{e.preventDefault();var t=this._productCatalogSession.toString();(0,y.logCatalogAttachmentButtonClick)(t),d.default.openModal(s.createElement(o.default,{chat:this.props.chat,sessionId:t}))},this.onCreateMessengerRoom=()=>{(0,_.shouldShowNUX)(c.default.NUX.MESSENGER_ROOM_DIALOG_NEW)||(0,_.shouldShowNUX)(c.default.NUX.MESSENGER_ROOM_DIALOG_RETURNING)||(0,_.shouldShowNUX)(c.default.NUX.MESSENGER_ROOM_DIALOG_FROM_ATTACH_DROPDOWN)?d.default.openModal(s.createElement(C.default,{chat:this.props.chat})):(0,S.openMessengerRoomUrl)(this.props.chat)}}getElement(){return this._refContainer.current}componentDidMount(){this._productCatalogSession=new b.default}_canSendProductCatalog(){return u.default.isSMB}dismiss(){var e=this.props.uim;e&&e.uie.requestDismiss()}attachMediaDrawer(e){d.default.attachMediaDrawer({chat:this.props.chat,attachments:e,fileOrigin:T.default.MEDIA_PICKER_ORIGIN_TYPE.CHAT_PHOTO_LIBRARY,initCaption:this.props.getComposeContents&&this.props.getComposeContents(),onComplete:(e,t)=>{this.props.onMenuComplete&&this.props.onMenuComplete(e,t)}})}_renderAttachDocDropdownItem(){return s.createElement(f.default,{type:"icon",tooltip:s.createElement(A.default,null,E.default.t(234)),a8n:"mi-attach-document",action:this._onDocumentClick},s.createElement("button",{className:n.default.iconsItem,"data-animate-menu-icons-item":!0},s.createElement(P.default,{name:"attach-document",className:n.default.iconImage}),s.createElement(m.default,{ref:this._setDocPicker,mimes:M.DOC_MIMES,onChange:this._onDocumentPick})))}_renderAttachMessengerRoomDropdownItem(){return s.createElement(f.default,{type:"icon",tooltip:s.createElement(A.default,null,E.default.t(962)),a8n:"mi-create-messenger-room",action:this.onCreateMessengerRoom},s.createElement("button",{className:n.default.iconsItem,"data-animate-menu-icons-item":!0},s.createElement(P.default,{name:"attach-rooms",className:n.default.iconImage})))}_renderAttachProductCatalogDropdownItem(){return this._canSendProductCatalog()?s.createElement(f.default,{type:"icon",tooltip:s.createElement(A.default,null,E.default.t(237)),a8n:"mi-attach-product-catalog",action:this.onProductCatalogClick},s.createElement("button",{className:n.default.iconsItem,"data-animate-menu-icons-item":!0},s.createElement(P.default,{name:"attach-product",className:n.default.iconImage}))):null}render(){return s.createElement("div",{className:n.default.attachMenuContainer,ref:this._refContainer},s.createElement(P.default,{name:"attach-shadow"}),s.createElement(h.default,{type:"menu",key:"AttachMenuDropdown"},s.createElement(f.default,{type:"icon",tooltip:s.createElement(A.default,null,E.default.t(236)),a8n:"mi-attach-media",action:this._onMediaClick},s.createElement("button",{className:n.default.iconsItem,"data-animate-menu-icons-item":!0},s.createElement(P.default,{name:"attach-image",className:n.default.iconImage}),s.createElement(m.default,{ref:this._setMediaPicker,mimes:[c.default.IMAGE_MIMES,c.default.VIDEO_MIMES].join(","),onChange:this._onMediaPick}))),s.createElement(f.default,{type:"icon",tooltip:s.createElement(A.default,null,E.default.t(232)),a8n:"mi-attach-camera",action:this.props.onCaptureClick,disabled:!v.default},s.createElement("button",{className:n.default.iconsItem,"data-animate-menu-icons-item":!0},s.createElement(P.default,{name:"attach-camera",className:n.default.iconImage}))),this._renderAttachDocDropdownItem(),s.createElement(f.default,{type:"icon",tooltip:s.createElement(A.default,null,E.default.t(238)),a8n:"mi-attach-contact",action:this.onContactClick},s.createElement("button",{className:n.default.iconsItem,"data-animate-menu-icons-item":!0},s.createElement(P.default,{name:"attach-contact",className:n.default.iconImage}))),this._renderAttachProductCatalogDropdownItem(),this._renderAttachMessengerRoomDropdownItem()))}}var O=(0,g.default)(I);t.default=O},57495:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(86811)),o=r(a(39690)),l=r(a(79711)),d=i(a(96452)),u=i(a(45356)),c=r(a(17957)),h=i(a(16622)),f=a(80898),p=r(a(72259)),m=a(64658),_=r(a(82631));class v extends s.PureComponent{constructor(...e){super(...e),this._handleClick=e=>{this._checkForDrawerMid(e)},this._handleDropdownCaptureClick=()=>{this._openCaptureFlow()}}_checkForDrawerMid(e){l.default.existsDrawerMid((t=>{t&&e.preventDefault()}))}_openCaptureFlow(){var e=this.props.chat,t=h.start("camera");Promise.race([t,this.props.rejectOnUnmount()]).checkpoint(this.props.rejectOnUnmount()).then((t=>{t&&l.default.openDrawerMid(s.createElement(o.default,{chat:(0,m.unproxy)(e),stream:t,onCaptureSent:()=>{this.props.onMenuComplete&&this.props.onMenuComplete(!0,!1)}}),"slide-up",this.context.uim,{noFocus:!0})})).catchType(d.Unmount,(()=>{t.then((e=>h.stop(e))).catch((()=>{}))})).catchType(d.GUM.NotAllowedError,(()=>{l.default.openModal(s.createElement(u.default,{messaging:u.Messaging.CAMERA_FAIL,type:u.default.TYPE.GUIDE_UNBLOCK}))})).catchType(d.GUM.GUMError,(()=>{l.default.openModal(s.createElement(u.default,{messaging:u.Messaging.CAMERA_MISSING,type:u.default.TYPE.GUIDE_NONE}))}))}render(){return s.createElement(f.MenuBarItem,{a8nText:"conversation-clip",icon:s.createElement(_.default,{name:"clip"}),title:c.default.t(938),transitionName:"menu",onClick:this._handleClick},s.createElement(n.default,{chat:this.props.chat,onCaptureClick:this._handleDropdownCaptureClick,getComposeContents:this.props.getComposeContents,onMenuComplete:this.props.onMenuComplete}))}}var g=(0,p.default)(v);t.default=g},1944:(e,t,a)=>{"use strict";var r=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(2784)),s=r(a(14457)),n=a(73157);class o extends i.Component{getElement(){return this._refDropdown}render(){var{chat:e,onSelectMessages:t}=this.props;return i.createElement(s.default,{onRef:e=>{this._refDropdown=e},type:"dropdown_menu",key:"BroadcastMenuDropdown",flipOnRTL:!0,dirX:s.DirX.LEFT},(0,n.broadcastMenu)(e,t))}}t.default=o},78898:(e,t,a)=>{"use strict";var r=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(2784)),s=r(a(14457)),n=a(73157);class o extends i.Component{getElement(){return this._refDropdown}render(){var{chat:e,onSelectMessages:t}=this.props;return i.createElement(s.default,{onRef:e=>{this._refDropdown=e},type:"dropdown_menu",key:"GroupMenuDropdown",flipOnRTL:!0,dirX:s.DirX.LEFT},(0,n.groupMenu)(e,t))}}t.default=o},35625:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(1944)),o=a(89216),l=a(25975),d=r(a(13574)),u=r(a(79711)),c=r(a(52737)),h=r(a(50935)),f=r(a(72780)),p=r(a(46478)),m=r(a(78898)),_=r(a(86038)),v=r(a(98294)),g=r(a(70477)),E=r(a(71292)),y=r(a(17957)),S=r(a(20642)),C=a(83974),T=a(80898),M=r(a(60949)),b=r(a(55043)),P=r(a(13531)),A=r(a(72259)),I=r(a(72424)),O=r(a(40207)),N=a(64658),w=r(a(82631)),D=r(a(67134)),R=r(a(20398)),L=r(a(37698)),k=a(64786).default,x=a(89524).Z;class F extends s.Component{constructor(){super(...arguments),this.isListeningForMove=!1,this.didDrag=!1,this._forceUpdate=()=>{this.forceUpdate()},this._updateVoipAvailability=()=>{this.setState({isVoipAvailable:c.default.isVoipInitialized})},this.setRef=e=>{this.ref=e,this.props.onRef(e)},this.onWindowFocus=()=>{},this.onMouseDown=()=>{},this.onDrag=()=>{this.didDrag=!0},this.onClickCapture=()=>{},this._onInfoPanel=()=>{var e=this.props.chat;!e.isPSA&&(e.isUser||e.isBroadcast||e.isGroup)&&u.default.openDrawerRight(s.createElement(E.default,{chat:(0,N.unproxy)(e),key:"info-".concat(e.id.toString())}),"slide-left",this.props.uim)},this._checkForDrawerMid=e=>{u.default.existsDrawerMid((t=>{t&&e.preventDefault()}))},this.onChatSearch=e=>{e.preventDefault();var t=this.props.chat;u.default.existsDrawerMid((e=>{e||u.default.openDrawerRight(s.createElement(d.default,{chat:(0,N.unproxy)(t),key:"chat-search-".concat(t.id.toString())}),"slide-left",this.props.uim)}))},this._onStartCall=e=>{var t=this.props.chat;this.props.chat.isUser?x.checkIfCanStartCall({contact:t.contact,isVideo:e})&&k&&k.callStart(t.contact.id,e):x.checkIfCanStartCall({isGroup:!0,isVideo:e})&&k&&k.groupCallStart(t.groupMetadata.participants.map((e=>e.id)),e)},this.onProductCatalogClick=e=>{e.preventDefault();var t=(new b.default).toString(),a=this.props.chat.contact.id;(0,C.logChatCatalogView)({catalogOwnerWid:a,catalogSessionId:t}),u.default.openDrawerRight(s.createElement(P.default,{chat:this.props.chat,sessionId:t,catalogOwnerJid:a.toJid()}),"slide-left",R.default.Manager.top)},this.state={newlyFocused:!1,isVoipAvailable:c.default.isVoipInitialized}}_maybeAddProfileListeners(){this.props.chat.contact.businessProfile&&this.props.listeners.add(this.props.chat.contact.businessProfile,"change:profileOptions",this._forceUpdate),this.props.chat.contact.businessProfile&&this.props.listeners.add(this.props.chat.contact.businessProfile,"change:catalogStatus",this._forceUpdate)}componentDidMount(){this.props.listeners.add(this.props.chat.contact,"change:businessProfile",(()=>{this._maybeAddProfileListeners(),this._forceUpdate()})),this._maybeAddProfileListeners(),this.props.listeners.add(c.default,"change:isVoipInitialized",this._updateVoipAvailability)}_getVoiceCallButton(){var{chat:e}=this.props;if(!(this.state.isVoipAvailable&&!e.contact.isEnterprise&&!getIsInternalNumber(e.contact.id.user)&&(e.isUser&&VoipGKUtils.isVoiceCallEnabled()||e.isGroup&&VoipGKUtils.isGroupVoiceCallEnabled())))return null;var t=e.contact.isMe,a=e.isUser?y.default.t(1437):y.default.t(774);return CallCollection.activeCall?(t=!0,a=y.default.t(1482)):e.isGroup&&e.groupMetadata.participants.length>h.default.VOIP_MAX_GROUP_CALL_PARTICIPANTS&&(t=!0,a=y.default.t(1483,{count:h.default.VOIP_MAX_GROUP_CALL_PARTICIPANTS,_plural:h.default.VOIP_MAX_GROUP_CALL_PARTICIPANTS})),s.createElement(T.MenuBarItem,{tabOrder:h.default.TAB_ORDERS.CHAT_HEADER_BUTTON,a8nText:"voice-call-button",icon:s.createElement(w.default,{name:"voice-call"}),onClick:()=>this._onStartCall(!1),disabled:t,title:a})}_getVideoCallButton(){var{chat:e}=this.props;if(!(this.state.isVoipAvailable&&!e.contact.isEnterprise&&!getIsInternalNumber(e.contact.id.user)&&(e.isUser&&VoipGKUtils.isVideoCallEnabled()||e.isGroup&&VoipGKUtils.isGroupVideoCallEnabled())))return null;var t=e.contact.isMe,a=e.isUser?y.default.t(1417):y.default.t(773);return CallCollection.activeCall?(t=!0,a=y.default.t(1482)):e.isGroup&&e.groupMetadata.participants.length>h.default.VOIP_MAX_GROUP_CALL_PARTICIPANTS&&(t=!0,a=y.default.t(1483,{count:h.default.VOIP_MAX_GROUP_CALL_PARTICIPANTS,_plural:h.default.VOIP_MAX_GROUP_CALL_PARTICIPANTS})),s.createElement(T.MenuBarItem,{tabOrder:h.default.TAB_ORDERS.CHAT_HEADER_BUTTON,a8nText:"video-call-button",icon:s.createElement(w.default,{name:"video-call"}),onClick:()=>this._onStartCall(!0),disabled:t,title:a})}render(){var e,t,a,r,i,d=this.props.chat,{contact:u}=this.props;if(d.isUser)r=s.createElement(f.default,{chat:d,contact:d.contact,onSelectMessages:this.props.onSelectMessages}),i=s.createElement(L.default,{contact:d.contact,presence:d.presence,chatstate:d.presence.chatstate,placeholder:y.default.t(486),location:"title",showBusinessCheckmark:u.showBusinessCheckmarkAsSecondary});else if(d.isBroadcast)r=s.createElement(n.default,{chat:(0,N.unproxy)(d),onSelectMessages:this.props.onSelectMessages}),i=null;else if(d.isGroup){r=s.createElement(m.default,{chat:(0,N.unproxy)(d),onSelectMessages:this.props.onSelectMessages});var c=d.groupMetadata&&d.groupMetadata.participants&&d.groupMetadata.participants.iAmAdmin()&&d.groupMetadata.announce?y.default.t(221):y.default.t(485);i=s.createElement(_.default,{chatstate:d.presence.chatstate,groupMetadata:d.groupMetadata,presence:d.presence,placeholder:c,location:"title"})}var v;var E=s.createElement(T.MenuBarItem,{tabOrder:h.default.TAB_ORDERS.CHAT_HEADER_BUTTON,a8nText:"search-button",icon:s.createElement(w.default,{name:"search-alt"}),title:y.default.t(1225),onClick:this.onChatSearch});d.isPSA&&(i=null);var S=!I.default.newCommerceEntryPointEnabled||(null===(e=this.props.chat.contact.businessProfile)||void 0===e||null===(t=e.profileOptions)||void 0===t?void 0:t.commerceExperience)!==l.COMMERCE_EXPERIENCE_TYPES.CATALOG&&(null===(a=this.props.chat.contact.businessProfile)||void 0===a?void 0:a.catalogStatus)!==o.CATALOG_EXISTS?null:s.createElement(T.MenuBarItem,{tabOrder:h.default.TAB_ORDERS.CHAT_HEADER_BUTTON,a8nText:"product_catalog-button",icon:s.createElement(w.default,{name:"catalog-entrypoint"}),title:y.default.t(1144),onClick:this.onProductCatalogClick});return s.createElement("header",{ref:this.setRef,className:g.default.chatHeader,onClickCapture:this.onClickCapture,onMouseDown:this.onMouseDown},s.createElement("div",{className:g.default.chatAvatar,onClick:this._onInfoPanel,role:d.isPSA?null:"button"},s.createElement(p.default,{id:d.id,size:40,showEphemeralIcon:!0})),s.createElement("div",{className:g.default.chatBody,onClick:this._onInfoPanel,role:d.isPSA?null:"button"},s.createElement("div",{className:g.default.chatMain},s.createElement("div",{className:g.default.chatTitle},s.createElement(M.default,{chat:d,titlify:!0,ellipsify:!0,showBusinessCheckmark:u.showBusinessCheckmarkAsPrimary}))),i),s.createElement("div",{className:g.default.chatControls},s.createElement(T.MenuBar,{key:"conversation-header"},null,null,v,S,E,s.createElement(T.MenuBarItem,{tabOrder:h.default.TAB_ORDERS.CHAT_HEADER_BUTTON,a8nText:"conversation-menu",icon:s.createElement(w.default,{name:"menu"}),title:y.default.t(939),onClick:this._checkForDrawerMid},r))))}}F.CONCERNS={chat:["id","formattedTitle","presence","isUser","isGroup","isBroadcast","groupMetadata","isPSA","contact","name"],contact:["showBusinessCheckmarkAsPrimary","showBusinessCheckmarkAsSecondary"]};var G=(0,v.default)((0,D.default)((0,S.default)((0,A.default)((0,O.default)(F,F.CONCERNS)))));t.default=G},20227:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({canonicalUrl:e,compose:t,description:a,displayType:r,invite:i,onClick:c,isSentByMe:h,star:f,thumbnail:p,thumbnailJpeg:m,title:_,theme:v}){var g,E;null!=p?E=n.createElement("div",{className:d.default.media},p):m?E=n.createElement("img",{alt:"",className:d.default.media,src:"data:image/jpeg;base64,"+m}):r===o.default.DISP_TYPE.GALLERY&&(E=n.createElement("div",{className:d.default.noThumbContainer},n.createElement(u.default,{className:d.default.noThumbIcon,name:"link"})));if(r===o.default.DISP_TYPE.GALLERY){var y=f?n.createElement(u.default,{className:d.default.iconStar,name:"star"}):null;g=n.createElement("div",{className:d.default.noThumbContainer},E,y)}else g=E;var S=null!=a?n.createElement("div",{className:d.default.description},"string"==typeof a?n.createElement(l.default,{text:a,titlify:!0}):a):null,C=e?n.createElement("div",{className:d.default.source},n.createElement(l.default,{text:e})):null,T=(0,s.default)(d.default.preview,{[d.default.isInvite]:r!==o.default.DISP_TYPE.GALLERY&&i,[d.default.isCompose]:t,[d.default.bubbleIn]:!h,[d.default.bubbleOut]:h,[d.default.extended]:"extended"===v});return n.createElement("div",{className:T,onClick:c},g,n.createElement("div",{className:d.default.body},n.createElement("div",{className:d.default.title,title:_},n.createElement(l.default,{text:_})),S,C))};var s=i(a(72779)),n=r(a(2784)),o=i(a(50935)),l=i(a(91581)),d=i(a(96115)),u=i(a(82631))},22493:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.MessageListButton=function({children:e,onClick:t,title:a}){return s.createElement("div",{className:o.default.wrapper},s.createElement("div",{className:o.default.button,title:a,onClick:t},e))},t.default=void 0;var s=i(a(2784)),n=r(a(17957)),o=r(a(25461)),l=r(a(2825)),d=r(a(82631));class u extends s.PureComponent{render(){var e,t,a,r=this.props.direction;if("earlier"===r&&this.props.isLoadingEarlierMsgs||"recent"===r&&this.props.isLoadingRecentMsgs||"around"===r&&this.props.isLoadingAroundMsgs)e=s.createElement(l.default,{stroke:6,size:24,color:"highlight"}),t=n.default.t(890);else{switch(r){case"earlier":t=n.default.t(887);break;case"recent":t=n.default.t(888);break;default:t=n.default.t(890)}e=s.createElement(d.default,{name:"refresh"}),a=this.props.loadMoreMsgs}return s.createElement("div",{className:o.default.wrapper},s.createElement("div",{className:o.default.button,title:t,onClick:a},e))}}t.default=u},73157:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.groupMenu=function(e,t){var a=[];a.push(s.createElement(l.default,{key:"info",a8n:"mi-group-info",action:()=>n.default.chatInfoDrawer(e)},d.default.t(1620))),a.push(s.createElement(l.default,{a8n:"mi-select-messages",key:"select",action:t},d.default.t(1775))),e.mute.canMute()&&a.push(s.createElement(u.default,{key:"mute",onMute:t=>n.default.muteChat(e,t),mute:e.mute,chat:e,settings:c.default}));return a.push(s.createElement(l.default,{key:"clear",a8n:"mi-clear",action:()=>n.default.clearChatMsgs(e)},d.default.t(480))),a.push(s.createElement(o.default,{key:"delete",onDeleteOrExit:()=>n.default.deleteOrExitChat(e),chat:e})),a},t.broadcastMenu=function(e,t){var a=[];return a.push(s.createElement(l.default,{key:"info",a8n:"mi-broadcast-info",action:()=>n.default.chatInfoDrawer(e)},d.default.t(1672))),a.push(s.createElement(l.default,{a8n:"mi-select-messages",key:"select",action:t},d.default.t(1775))),a.push(s.createElement(l.default,{key:"clear",a8n:"mi-clear",action:()=>n.default.clearChatMsgs(e)},d.default.t(480))),a.push(s.createElement(o.default,{key:"delete",onDeleteOrExit:()=>n.default.deleteOrExitChat(e),chat:e})),a};var s=i(a(2784)),n=r(a(79711)),o=r(a(24211)),l=r(a(71201)),d=r(a(17957)),u=r(a(60733)),c=r(a(2734))},94389:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(2182)),l=a(94176),d=i(a(79711)),u=i(a(50935)),c=a(13414),h=i(a(17957)),f=i(a(20642)),p=a(40713),m=i(a(61941)),_=i(a(15442)),v=a(40263),g=i(a(92276));class E extends n.Component{constructor(...e){super(...e),this._refContainer=n.createRef(),this.addRevokeListener=()=>{this.props.listeners.add(this.props.msg,"change:asRevoked",this.handleRevoke)},this.handleRevoke=()=>{d.default.refreshMessages()}}componentDidMount(){this.addRevokeListener()}componentDidUpdate(e){this.props.msg.id.equals(e.msg.id)||(this.props.listeners.remove(e.msg,"change:asRevoked",this.handleRevoke),this.addRevokeListener())}getRef(){return this.ref}getContainerElement(){return(0,m.default)(this._refContainer.current,"this._refContainer.current")}render(){var e,t,{msg:a,albumMsgs:r,albumPosition:i,isMsgVisible:d,zoomMsg:f,numAdditionalMedia:m}=this.props,E=(0,s.default)({[o.default.albumTopLeft]:i===l.AlbumPosition.TOP_LEFT,[o.default.albumTopRight]:i===l.AlbumPosition.TOP_RIGHT,[o.default.albumBottomLeft]:i===l.AlbumPosition.BOTTOM_LEFT,[o.default.albumBottomRight]:i===l.AlbumPosition.BOTTOM_RIGHT});if(null!=m&&0!==m&&(e=n.createElement(v.TextSpan,{theme:"large",className:(0,s.default)(o.default.numberText)},h.default.t(1099,{number:m}))),a.type===u.default.MSG_TYPE.IMAGE)t=n.createElement(_.default,{theme:p.DisplayTheme.Album,albumMsgs:r,msg:a,mediaData:a.mediaData,ref:(0,c.GetRef)((e=>{this.ref=e})),isMsgVisible:d,zoomMsg:f,overlayContent:e});else{if(a.type!==u.default.MSG_TYPE.VIDEO)throw new Error("Unexpected Album Type: "+a.type);t=n.createElement(g.default,{theme:p.DisplayTheme.Album,albumMsgs:r,msg:a,mediaData:a.mediaData,ref:(0,c.GetRef)((e=>{this.ref=e})),zoomMsg:f,overlayContent:e})}return n.createElement("div",{ref:this._refContainer,className:o.default.albumGridClass},n.createElement("div",{className:E},t))}}var y=(0,f.default)(E);t.default=class extends y{constructor(...e){super(...e),this.getRef=()=>this.getComponent().getRef()}getContainerElement(){return this.getComponent().getContainerElement()}}},94176:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AlbumPosition=void 0;t.AlbumPosition={TOP_LEFT:"TOP_LEFT",TOP_RIGHT:"TOP_RIGHT",BOTTOM_LEFT:"BOTTOM_LEFT",BOTTOM_RIGHT:"BOTTOM_RIGHT"}},46650:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(19976)),n=i(a(72779)),o=i(a(47677)),l=r(a(2784)),d=i(a(88665)),u=i(a(94389)),c=a(94176),h=i(a(71874)),f=a(21403),p=i(a(79711)),m=i(a(9386)),_=i(a(50935)),v=i(a(55236)),g=a(62436),E=r(a(71201)),y=i(a(43396)),S=i(a(38147)),C=i(a(6660)),T=i(a(93329)),M=i(a(4336)),b=i(a(18120)),P=i(a(1512)),A=i(a(44641)),I=i(a(50868)),O=i(a(17957)),N=a(38203),w=a(28278),D=i(a(19773)),R=a(97526),L=i(a(20564)),k=a(62761),x=i(a(61941)),F=a(64658),G=i(a(82631)),U=i(a(17693)),B=i(a(63498)),j=i(a(74824)),V=i(a(50103)),H=a(58355),W=a(24996);function K(){var e=(0,s.default)(["Only ","/"," were valid album messages"]);return K=function(){return e},e}class Y extends l.Component{getContainerElement(){return this._refAlbumWrapper.current}constructor(e){super(e),this._refAlbumWrapper=l.createRef(),this.refAlbumComponents={},this.setRefContext=e=>{this.refContext=e},this._refTail=l.createRef(),this.setRefBubble=e=>{this.refBubble=e},this._setRefLeftStickerBubble=e=>{this._refLeftStickerBubble=e},this._setRefRightStickerBubble=e=>{this._refRightStickerBubble=e},this._firstStickerRef=l.createRef(),this._secondStickerRef=l.createRef(),this.mouseOver=e=>{e.buttons||this.state.hover||this.setState({hover:!0})},this.mouseDown=()=>{this.state.hover&&this.setState({hover:!1})},this.contextMenu=e=>{e.stopPropagation()},this.openForwardFlow=(e,t)=>{for(var a,{msgs:r}=this.props,i=0;i<r.length;i++)if(r[i].isUnsentMedia){a=O.default.t(664,{_plural:1});break}a?p.default.openModal(l.createElement(m.default,{title:O.default.t(667),onOK:()=>p.default.closeModal(),okText:O.default.t(1709)},a)):e?this.onSelectClick({selectedMsg:t}):p.default.openModal(l.createElement(T.default,{msgs:r.map((e=>e.unsafe()))}),{transition:"modal-flow"})},this.onSelectClick=e=>{var{selectedMsg:t,event:a}=e;if(a&&a.stopPropagation(),t)this.props.onMessageSelect((0,F.unproxy)(t.unsafe()),!this.props.selectedMessages.isSelected((0,F.unproxy)(t)),a);else{var r=0===this.state.selectedCount;this.props.msgs.forEach((e=>{this.props.onMessageSelect((0,F.unproxy)(e.unsafe()),r,a)}))}},this._computeSelectedCount=()=>{var{msgs:e,selectedMessages:t}=this.props,a=0;return e.forEach((e=>{t.isSelected((0,F.unproxy)(e.unsafe()))&&a++})),a},this.onDownload=()=>{y.default.initDownload(this.props.msgs.map((e=>e.unsafe())))},this.onDeleteMessage=()=>{var{msgs:e}=this.props;p.default.openModal(l.createElement(v.default,{chat:e[0].chat,msgList:e.map((e=>e.unsafe())),deletePrompt:!0,revokePrompt:e[0].canRevoke(),isMsgVisible:this.props.isMsgVisible}))},this._getMenuRefContext=()=>{if(this.refContext)return this.refContext.getComponent().refContext},this.onMenu=(e,t)=>{var{msgs:a}=this.props;if(t&&this.state.contextMenu)this.setState({contextMenu:null});else{var r=t?this._getMenuRefContext():e,i=[];a.every((e=>e.mediaData&&e.mediaData.isDownloadable()))&&i.push(l.createElement(E.default,{key:"download",a8n:"mi-msg-download",action:this.onDownload},O.default.t(567))),a.every((e=>e.canForward()))&&i.push(l.createElement(E.default,{key:"forward",a8n:"mi-msg-forward",action:()=>{this.openForwardFlow(!0)}},O.default.t(681))),i.push(l.createElement(E.default,{key:"delete",a8n:"mi-msg-delete",action:this.onDeleteMessage},O.default.t(538))),this.setState({contextMenu:{menu:i,anchor:r,theme:E.ThemeOptions.COMPACT}})}},this.openContextMenu=()=>{this.state.hover?this.onMenu(void 0,!0):this.setState({hover:!0},(()=>{this.onMenu(void 0,!0)}))},this.closeContextMenu=()=>{var e={contextMenu:null};this._isKeyboardUser()&&(e.hover=!1),this.setState(e)},this._onAlbumGridRendered=(e,t)=>{e?this.refAlbumComponents[t.id.toString()]=e:delete this.refAlbumComponents[t.id.toString()]},this.scrollMsg=(e,t)=>{var a=this._refAlbumWrapper.current;if(a){var r=a.offsetParent;r&&((0,o.default)(r instanceof HTMLElement,"DOM offset parent is not a valid HTMLElement"),(0,g.scrollAt)(a,r,t).then(e))}},this.highlight=()=>{var e,t,a=null===(e=this._refTail)||void 0===e?void 0:e.current;this.isGroupedSticker()?0===this.props.focusedMsgIndex?t=this._refLeftStickerBubble:1===this.props.focusedMsgIndex&&(t=this._refRightStickerBubble):t=this.refBubble,t&&(S.default.indicateFocus(t,V.default.highlightAnimation),S.default.indicateFocus(a,V.default.highlightAnimation),this.props.isFocusable&&this.focus({preventScroll:!0}))};var t=this._computeSelectedCount();this.state={contextMenu:null,hover:!1,selectedCount:t}}componentDidMount(){b.default.supportsFeature(b.default.F.MEDIA_EXISTENCE_CHECK)&&this.props.msgs.map((e=>e.asAlbumAsset)).filter(Boolean).forEach((e=>{(0,w.checkExistence)(e)}))}componentDidUpdate(e){if(this.props.msgs!==e.msgs&&b.default.supportsFeature(b.default.F.MEDIA_EXISTENCE_CHECK)){var t=new Set(e.msgs);this.props.msgs.map((e=>e.asAlbumAsset)).filter(Boolean).filter((e=>!t.has(e))).forEach((e=>{(0,w.checkExistence)(e)}))}}shouldComponentUpdate(e,t){return!(0,d.default)(t,this.state)||!(0,d.default)(e,this.props,((e,t,a)=>{if("msgs"===a)return(0,d.default)(e,t)}))}onSelectChange(e){var t;t=this.isGroupedSticker()?this._computeSelectedCount():e?this.props.msgs.length:0,this.state.selectedCount!==t&&this.setState({selectedCount:t})}_isKeyboardUser(){return this.context}isGroupedSticker(){var[e,t]=this.props.msgs;return null!=e.asGroupedSticker&&null!=t.asGroupedSticker}focus(e){var t;(null===(t=this._refAlbumWrapper)||void 0===t?void 0:t.current)&&C.default.focus(this._refAlbumWrapper.current,e)}render(){var e,{msgs:t,position:a,isMsgVisible:r,albumId:i,isFocusedAlbum:s,focusedMsgIndex:o,selectedMessages:d,isFocusable:p}=this.props,m=t[0],v=t[1],g=m.isSentByMe,E=m.isGroupMsg,y=this.isGroupedSticker(),S=t.length>_.default.ALBUM_MIN_SIZE?t.length-_.default.ALBUM_MIN_SIZE+1:null,C=a===R.MsgPosition.FRONT||a===R.MsgPosition.SINGLE||y,T=(0,n.default)(V.default.msg,{[V.default.msgContinuation]:a===R.MsgPosition.FRONT||a===R.MsgPosition.MID,"message-out":g,"message-in":!g,[N.LIST_FOCUSABLE_ITEM_CLASS_NAME]:p}),b=!g&&E;if(b){var I=(0,n.default)(V.default.author,{[V.default.groupStickerAuthor]:y});e=l.createElement("div",{className:I},l.createElement(h.default,{msg:t[0],contact:t[0].senderObj,albumId:i}))}var O,w,Y,q,z,Q=(0,n.default)(V.default.message,{[V.default.messageTransparent]:y,[V.default.hasTail]:C,[V.default.tailOverrideHide]:y&&C&&(g||!E),[V.default.hasAuthor]:!this.isGroupedSticker()&&b,[V.default.forwarded]:!this.isGroupedSticker()&&(0,k.showForwarded)(t[0])}),J=(0,n.default)(V.default.albumBubbleContainer,{[V.default.messageBackground]:!y,[V.default.hasBorderBox]:!y});C&&(O=l.createElement(G.default,{name:(0,H.getTailName)(g),className:V.default.tail,containerRef:this._refTail})),m.canQuickForward()&&(w=l.createElement("div",{className:(0,n.default)(V.default.quickActionButton,{[V.default.authorForward]:b}),onClick:()=>{this.openForwardFlow(!1)},role:"button"},l.createElement(G.default,{name:"forward-chat"}))),(this.state.hover||this.state.contextMenu)&&(Y=l.createElement(D.default,{msg:m.unsafe(),position:a,key:"icon-context",ref:this.setRefContext,onToggle:e=>{this.onMenu(e)}})),q=this.state.contextMenu?"none":m.isRTL?"pop-fast-reverse":"pop-fast",this.state.contextMenu&&(z=l.createElement(U.default,{displayName:"MsgContextMenu",escapable:!0,popable:!0,requestDismiss:this.closeContextMenu},l.createElement(B.default,{contextMenu:this.state.contextMenu})));var X,Z=this.props.selectable?l.createElement(L.default,{checked:this.state.selectedCount>0,theme:this.state.selectedCount>0&&this.state.selectedCount<t.length?f.CHECKBOX_THEME.PARTIAL:void 0,onClick:e=>{this.onSelectClick({event:e})}}):null;if(this.props.isFocusedAlbum&&(X=l.createElement(W.WhileFocusedListener,{parent:this})),y){var $=t.map((e=>l.createElement(W.SelectionListener,{key:e.id.toString(),parent:this,msgId:e.id.toString(),selectedMessages:d}))),ee=this.props.selectable?l.createElement(A.default,{checked:this.props.selectedMessages.isSelected((0,F.unproxy)(m.unsafe())),onClick:()=>{this.onSelectClick({selectedMsg:m.unsafe()})}}):null,te=this.props.selectable?l.createElement(A.default,{checked:this.props.selectedMessages.isSelected((0,F.unproxy)(v.unsafe())),onClick:()=>{this.onSelectClick({selectedMsg:v.unsafe()})}}):null;return l.createElement("div",{className:T,"data-id":i,ref:this._refAlbumWrapper,tabIndex:-1},l.createElement(j.default,{transitionName:"delay-leave"},Z),l.createElement("div",{className:Q,onContextMenu:this.contextMenu},O,e,l.createElement("div",{className:V.default.groupStickerContainer},l.createElement("div",{onMouseEnter:this._firstStickerRef.current?this._firstStickerRef.current.onMouseEnter:null,className:V.default.singleGroupedStickerContainer,ref:this._setRefLeftStickerBubble},l.createElement(j.default,{transitionName:"delay-leave"},ee),l.createElement(P.default,{msg:(0,x.default)(m.asGroupedSticker,"firstMsg.asGroupedSticker"),menuTransition:q,onOpenForwardFlow:this.openForwardFlow,isMsgVisible:r,scrollMsg:this.scrollMsg,highlight:this.highlight,isFocused:s&&0===o,forwardRef:this._firstStickerRef})),l.createElement("div",{onMouseEnter:this._secondStickerRef.current?this._secondStickerRef.current.onMouseEnter:null,className:V.default.singleGroupedStickerContainer,ref:this._setRefRightStickerBubble},l.createElement(j.default,{transitionName:"delay-leave"},te),l.createElement(P.default,{msg:(0,x.default)(v.asGroupedSticker,"secondMsg.asGroupedSticker"),menuTransition:q,onOpenForwardFlow:this.openForwardFlow,isMsgVisible:r,scrollMsg:this.scrollMsg,highlight:this.highlight,isFocused:s&&1===o,forwardRef:this._secondStickerRef})))),$)}var ae=t.map((e=>e.asAlbumAsset)).filter(Boolean);ae.length!==t.length&&(__LOG__(4,void 0,new Error,!0)(K(),ae.length,t.length),SEND_LOGS("invalid-album-grid"));var re=ae.length>_.default.ALBUM_MIN_SIZE?ae[0]:null,ie=(0,k.showForwarded)(t[0])?l.createElement(M.default,{msg:t[0].unsafe(),className:V.default.forwardedIndicator}):null;return l.createElement("div",{className:T,"data-id":i,ref:this._refAlbumWrapper,tabIndex:-1},l.createElement(j.default,{transitionName:"delay-leave"},Z),l.createElement("div",{className:Q,onContextMenu:this.contextMenu,onMouseOver:this.mouseOver,onMouseDown:this.mouseDown,onMouseUp:this.mouseOver,onMouseLeave:this.mouseDown},O,l.createElement("div",{className:J,ref:this.setRefBubble},e,ie,l.createElement("div",{className:V.default.gridContainer},l.createElement(u.default,{msg:(0,x.default)(t[0].asAlbumAsset,"msgs[0].asAlbumAsset"),albumMsgs:ae,albumPosition:c.AlbumPosition.TOP_LEFT,isMsgVisible:r,ref:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((e=>{this._onAlbumGridRendered(e,t[0])}))}),l.createElement(u.default,{msg:(0,x.default)(t[1].asAlbumAsset,"msgs[1].asAlbumAsset"),albumMsgs:ae,albumPosition:c.AlbumPosition.TOP_RIGHT,isMsgVisible:r,ref:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((e=>{this._onAlbumGridRendered(e,t[1])}))}),l.createElement(u.default,{msg:(0,x.default)(t[2].asAlbumAsset,"msgs[2].asAlbumAsset"),albumMsgs:ae,albumPosition:c.AlbumPosition.BOTTOM_LEFT,isMsgVisible:r,ref:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((e=>{this._onAlbumGridRendered(e,t[2])}))}),l.createElement(u.default,{msg:(0,x.default)(t[3].asAlbumAsset,"msgs[3].asAlbumAsset"),albumMsgs:ae,albumPosition:c.AlbumPosition.BOTTOM_RIGHT,isMsgVisible:r,zoomMsg:re,numAdditionalMedia:S,ref:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((e=>{this._onAlbumGridRendered(e,t[3])}))}))),l.createElement(j.default,{transitionName:q},Y),w),z,X,l.createElement(W.SelectionListener,{parent:this,msgId:t[0].id.toString(),selectedMessages:d}))}}t.default=Y,Y.contextType=I.default},97125:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(59517)),o=r(a(118)),l=r(a(71874)),d=r(a(79711)),u=(r(a(50935)),r(a(69345))),c=a(96645),h=r(a(10853)),f=r(a(40210)),p=i(a(86447)),m=r(a(40207)),_=a(64658),v=r(a(82631));class g extends s.PureComponent{constructor(e){super(e),this.showMediaMissing=()=>{d.default.openModal(s.createElement(u.default,{msg:this.props.msg.unsafe()}))},this.downloadMedia=()=>{this.props.msg.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:f.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1})},this._forceDownloadMedia=()=>{this.props.msg.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:f.default.WEBC_RMR_REASON_CODE.MSG_CLICK,isUserInitiated:!0})},this.cancelDownload=()=>{this.props.msg.cancelDownload()},this.cancelUpload=()=>{this.props.msg.cancelUpload()},this.resumeUpload=()=>{this.props.msg.resumeUpload()},this.resumeRemoteUpload=()=>{this.props.msg.resumeRemoteUpload()},this.downloadUnsupportedToDesktop=e=>{e&&e.stopPropagation(),d.default.openModal(s.createElement(h.default,{msg:(0,_.unproxy)(this.props.msg.unsafe())}))},this.handleTimeUpdate=e=>{this.setState({currentTime:e})},this.handlePlayingUpdate=e=>{this.setState({autoPlay:!1,playing:e})},this.state={currentTime:0,playing:!1,autoPlay:!1}}componentDidMount(){this.downloadMedia()}render(){var e,t=this.props.msg,a=this.props.mediaData,r=this.state.playing?this.state.currentTime:a.duration;switch(a.mediaStage){case c.MEDIA_DATA_STAGE.RESOLVED:e=s.createElement(p.default,{mediaData:this.props.mediaData,downloadMedia:this.downloadMedia,duration:r,playing:this.state.playing,played:!0,autoPlay:!1,onPlayingUpdate:this.handlePlayingUpdate,onTimeUpdate:this.handleTimeUpdate,outgoingMsg:t.isSentByMe,displayType:this.props.displayType});break;case c.MEDIA_DATA_STAGE.NEED_POKE:e=s.createElement(p.AudioPlayerFrame,{icon:s.createElement(v.default,{name:"audio-download"}),outgoingMsg:t.isSentByMe,action:this._forceDownloadMedia});break;case c.MEDIA_DATA_STAGE.NEED_UPLOAD:e=s.createElement(p.AudioPlayerFrame,{icon:s.createElement(v.default,{name:"audio-upload"}),outgoingMsg:t.isSentByMe,action:this.resumeUpload});break;case c.MEDIA_DATA_STAGE.REMOTE_NEED_UPLOAD:e=s.createElement(p.AudioPlayerFrame,{icon:s.createElement(v.default,{name:"audio-upload"}),outgoingMsg:t.isSentByMe,action:this.resumeRemoteUpload});break;case c.MEDIA_DATA_STAGE.ERROR_MISSING:e=s.createElement(p.AudioPlayerFrame,{icon:s.createElement(v.default,{name:"audio-play",directional:!0}),outgoingMsg:t.isSentByMe,action:this.showMediaMissing});break;default:e=s.createElement(p.AudioPlayerFrame,{outgoingMsg:t.isSentByMe,spinner:!0})}var i=s.createElement("div",{className:n.default.icon},s.createElement(v.default,{name:"audio-file"})),d=this.props.displayAuthor&&!t.isSentByMe&&t.isGroupMsg?s.createElement(l.default,{msg:t,contact:t.senderObj}):null;return s.createElement(o.default,{msg:t,quotedMsg:this.props.quotedMsg,author:d,player:e,avatar:i,displayType:this.props.displayType})}}g.CONCERNS={msg:["ack","isSentByMe","isGroupMsg","senderObj"],mediaData:["duration","type","mediaStage","renderableUrl"]};var E=(0,m.default)(g,g.CONCERNS);t.default=E},118:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(9275)),l=i(a(50935)),d=i(a(131)),u=i(a(4336)),c=i(a(71726)),h=a(62761),f=i(a(26660)),p=i(a(50751)),m=i(a(72424)),_=i(a(47609)),v=e=>{var t,{msg:a}=e,{id:r,type:i,ack:v,isSentByMe:g}=(0,_.default)(a,["id","type","ack","isSentByMe"]),E=(0,s.default)(o.default.bubble,{[o.default.bubbleIn]:!g,[o.default.bubbleOut]:g,[o.default.hasAuthor]:e.author,[o.default.hasQuote]:e.quotedMsg,[o.default.isGallery]:e.displayType===l.default.DISP_TYPE.STARRED_MSGS||e.displayType===l.default.DISP_TYPE.GALLERY,[o.default.isForwarded]:(0,h.showForwarded)(a)}),y=e.status?n.createElement("div",{className:o.default.status},e.status):null,S=null!=e.author?n.createElement("div",{className:o.default.author},e.author):null,C=(0,h.showForwarded)(a)?n.createElement(u.default,{msg:a.unsafe(),className:o.default.forwardedIndicator}):null,T=e.quotedMsg?n.createElement("div",{className:o.default.quote},e.quotedMsg):null,{playbackRate:M,lastPlayedMessageId:b}=(0,_.default)(p.default,["playbackRate","lastPlayedMessageId"]),P=!1;if(m.default.pttPlaybackSpeedEnabled&&"ptt"===i){P=b===r.toString();var A=(0,s.default)(o.default.playbackRateButtonContainer,{[o.default.playbackRateButtonContainerVisible]:P});t=n.createElement("div",{className:A},n.createElement(f.default,{playbackRate:M,onClick:()=>{p.default.advancePlaybackRate()},isSentByMe:g,played:v===l.default.ACK.PLAYED}))}var I=(0,s.default)(o.default.avatar,{[o.default.avatarVisible]:!P});return n.createElement("div",{className:E},S,C,T,n.createElement(d.default,{msg:a.unsafe(),wrapperClass:o.default.ctwaContext}),n.createElement("div",{className:o.default.body},n.createElement("div",{className:o.default.player},e.player),n.createElement("div",{className:o.default.avatarContainer},t,n.createElement("div",{className:I},e.avatar,y))),n.createElement("div",{className:o.default.meta},n.createElement(c.default,{msg:a})))};t.default=v},71874:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(19976)),n=i(a(72779)),o=r(a(2784)),l=i(a(13098)),d=i(a(43334)),u=i(a(79711)),c=i(a(91581)),h=i(a(17957)),f=i(a(40207)),p=i(a(3111));function m(){var e=(0,s.default)(["Assertion failed!"]);return m=function(){return e},e}function _(e,t,a){var r;if(a){var i=d.default.get(a);r=i?i.formattedTitle:h.default.t(724)}return t?"".concat(e," · ").concat(h.default.t(1299)):r?"".concat(e," · ").concat(r):e}class v extends o.PureComponent{constructor(...e){super(...e),this.onClick=()=>{d.default.find(this.props.msg.sender).then((e=>{u.default.openChatFromUnread(e).then((t=>{t&&u.default.focusChatTextInput(e)}))}))}}render(){var{msg:e,chat:t,contact:a,disableClick:r,displaySelf:i,quotedRemoteJid:s,albumId:d}=this.props,u=t||e.chat;u||(__LOG__(4,void 0,new Error,!0)(m()),SEND_LOGS("author-with-no-chat"));var f,v=u?u.assignedColor(e.sender):1,g=r?null:this.onClick,E=(0,n.default)(l.default.author,"color-".concat(v),{[l.default.hoverable]:g});if(i)f=o.createElement(c.default,{text:_(h.default.t(1843),e.isStatusV3,s)});else if(a.name)f=[o.createElement(c.default,{text:_(a.name,e.isStatusV3,s),className:l.default.name,key:"author",onClick:g})];else{var y=f=[o.createElement("span",{className:l.default.number,role:g?"button":null,key:"".concat(e.id.toString(),"-number"),onClick:g},_((0,p.default)(a.id),e.isStatusV3,s))];if(!e.isStatusV3){var S,C="".concat(d||e.id.toString(),"-push-name");S=a.notifyName?a.notifyName:a.pushname,y.push(o.createElement(c.default,{className:l.default.screenName,key:C,onClick:g,direction:"auto",ellipsify:!0,text:S}))}}return o.createElement("div",{className:E,role:this.props.role||""},f)}}v.CONCERNS={msg:["sender","chat","type","isLive","isStatusV3","id","quotedMsg"],contact:["id","name","notifyName","pushname"]};var g=(0,f.default)(v,v.CONCERNS);t.default=g},87400:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=a(45880),o=r(a(81524)),l=r(a(40207));class d extends s.PureComponent{render(){var{msg:e}=this.props,{subtype:t,body:a,recipients:r}=e;if("create"===t){var i=parseInt(a,10);return s.createElement(o.default,{id:1844,params:{count:i},plural:i,wrapInHiddenToken:!0})}return"add"===t?s.createElement(o.default,{id:1673,params:{name:(0,n.getFormattedNames)(r,!0)},plural:r.length,wrapInHiddenToken:!0}):"remove"===t?s.createElement(o.default,{id:1674,params:{name:(0,n.getFormattedNames)(r,!0)},plural:r.length,wrapInHiddenToken:!0}):null}}d.CONCERNS={msg:["type","subtype","body","recipients"]};var u=(0,l.default)(d,d.CONCERNS);t.default=u},20458:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;t=e.placeholder?s.createElement("div",{className:o.default.actionsBtn},"​"):e.items.map(((e,t)=>s.createElement("div",{className:o.default.actionsBtn,key:t,onClick:e.onClick,role:"button",title:e.title||e.label},e.label)));return s.createElement("div",{className:(0,n.default)(o.default.actions,{[o.default.noDivider]:"no-divider"===e.theme})},t)};var s=i(a(2784)),n=r(a(72779)),o=r(a(84221))},92969:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(19899)),o=r(a(52737)),l=a(69914),d=r(a(40207));class u extends s.PureComponent{render(){var e,{children:t,className:a,contact:r,msg:i,onClick:d,style:u}=this.props,c=n.default.timeStr(i.t);return r.isMe&&(e=o.default.pushname),e=e||r.formattedUser||"",s.createElement(l.CopyableDiv,{className:a,onClick:d,prePlainText:"[".concat(c,"] ").concat(e,": "),style:u},t)}}u.CONCERNS={contact:["formattedUser","name","isMe"],msg:["senderObj","t"]};var c=(0,d.default)(u,u.CONCERNS);t.default=c},30809:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({msg:e}){var{replyButtons:t}=e;if(null==t||0===t.length)return null;var a=t.some((e=>e.displayText.length>10));return o.createElement("div",{className:(0,n.default)(l.default.buttonContainer,{[l.default.stacked]:t.length>=3||a,[l.default.withLargeButtonsSpace]:a})},t.map(((t,a)=>o.createElement(p,{key:a,msg:e,replyButton:t}))))};var s=i(a(58527)),n=i(a(72779)),o=r(a(2784)),l=i(a(3535)),d=i(a(31659)),u=a(59420),c=i(a(40207)),h=i(a(74494)),f=i(a(72376));var p=(0,c.default)((function({msg:e,replyButton:t}){var{displayText:a,selected:r}=t,i=(0,h.default)(t,"selected"),[c,p]=(0,f.default)((()=>{i(!0),(0,d.default)(e,t,e.chat).then((e=>{e!==u.SendMsgResult.OK&&i(!1)})).catch((()=>{i(!1)}))}),{disabled:r});return a?o.createElement("div",(0,s.default)({ref:c,className:(0,n.default)(l.default.buttonWrapper,{[l.default.disabled]:r})},p),o.createElement("div",{className:(0,n.default)(l.default.buttonLabel)},o.createElement("span",null,a))):null}),{replyButton:["selected","displayText","id"],msg:["chat"]},{},!0)},12708:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=a(18164),o=r(a(91581)),l=r(a(47642)),d=r(a(17957)),u=r(a(97816)),c=r(a(40207)),h=r(a(65411));class f extends s.PureComponent{render(){var{msg:e,spacer:t,trusted:a}=this.props,r=(0,n.Conversation)({mentions:e.mentionMap(),links:e.getLinks(),selectable:true,trusted:!0===a}),i=e.text;if(!i)return null;var c=!(!e.dir||e.rtl===d.default.isRTL());return s.createElement(s.Fragment,null,!e.ctwaContext&&s.createElement(h.default,{msg:e}),s.createElement(u.default,{msg:e,"data-id":e.id,spacer:t},s.createElement(l.default,{text:i,textLimit:e.initialPageSize},(t=>s.createElement(o.default,{direction:e.dir,dirMismatch:c,formatters:r,inferLinesDirection:!0,selectable:true,text:e.text,textLimit:t.textLimit})))))}}f.CONCERNS={msg:["t","id","dir","rtl","text","initialPageSize","footer","ctwaContext"]};var p=(0,c.default)(f,f.CONCERNS);t.default=p},98788:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=a(35387),o=r(a(20227)),l=r(a(40207));class d extends s.PureComponent{constructor(...e){super(...e),this.onLinkClick=()=>{var e=this.props.msg.matchedText;(0,n.openExternalLink)(e)}}render(){var{msg:e}=this.props;return s.createElement(o.default,{title:e.title,description:e.description,thumbnailJpeg:e.thumbnail,onClick:this.onLinkClick,isSentByMe:e.isSentByMe,star:e.star})}}d.CONCERNS={msg:["thumbnail","title","description","matchedText","isSentByMe","star"]};var u=(0,l.default)(d,d.CONCERNS);t.default=u},17058:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(39012)),o=a(35387),l=a(95585),d=r(a(17957)),u=r(a(90277)),c=r(a(40207)),h=a(64658),f=r(a(20385)),p=()=>{(0,o.openExternalLink)((0,l.getCiphertextFaqUrl)())};class m extends s.PureComponent{render(){return s.createElement(f.default,{msg:(0,h.unproxy)(this.props.msg),displayAuthor:this.props.displayAuthor},s.createElement(u.default,{iconName:"ciphertext",msg:this.props.msg.unsafe()},d.default.t(1139)," ",s.createElement("span",{className:n.default.action,role:"button",onClick:p},d.default.t(848))))}}m.CONCERNS={msg:["isSentByMe","isGroupMsg","senderObj"]};var _=(0,c.default)(m,m.CONCERNS);t.default=_},87478:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.getBubbleDimension=function(e,t,a,r,i){var o,u,c=function(e,t,a){return f(e,t,a)?d:l}(e,r,i);r===n.DisplayTheme.Album?(o=s.default.ALBUM_MAX_HEIGHT-s.default.ALBUM_PADDING,u=s.default.ALBUM_MAX_HEIGHT):(o=a<1?c.portraitWidth:c.width,u=function(e,t,a,r){if(r&&t<=s.default.HSM_ASPECT_RATIO)return h(s.default.HSM_ASPECT_RATIO,e,a);return h(t,e,a)}(c,a,e,t));return{bubbleWidth:o,bubbleHeight:u}},t.getImgStyle=function(e,t,a,r){if(null==e||0===e||null==t||0===t||null==a||0===a||null==r||0===r)return{width:"100%",height:"100%"};return e/t>a/r?{height:"100%"}:{width:"100%"}},t.canUseCustomCropping=f;var i=r(a(70417)),s=r(a(50935)),n=a(40713),o=r(a(72424)),l={width:330,portraitWidth:330,minAspectRatio:1,maxAspectRatio:2.4},d=(0,i.default)((0,i.default)({},l),{},{portraitWidth:240,minAspectRatio:.71,maxAspectRatio:4}),u=new Set([s.default.MSG_TYPE.IMAGE,s.default.MSG_TYPE.VIDEO]),c=new Set([s.default.DISP_TYPE.CONVERSATION,s.default.DISP_TYPE.MSG_INFO,s.default.DISP_TYPE.STARRED_MSGS]);function h(e,t,a){return null==e?a===s.default.MSG_TYPE.VIDEO?240:330:(r=e<t.minAspectRatio?t.portraitWidth/t.minAspectRatio:e<1?t.portraitWidth/e:e<=t.maxAspectRatio?t.width/e:t.width/t.maxAspectRatio,Math.round(r));var r}function f(e,t,a){return!!o.default.webMediaCustomCroppingEnabled&&(u.has(e)&&c.has(a)&&t!==n.DisplayTheme.Album)}},131:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,d.unproxy)(e.msg);if(t.ctwaContext){var a=t.ctwaContext.mediaType!==l.ExternalAdReplyInfoMediaType.VIDEO||t.ctwaContext.isSuspiciousLink?s.createElement(s.Fragment,null,s.createElement(u.default,{msg:t}),s.createElement(n.default,{context:t.ctwaContext,isSentByMe:t.isSentByMe,compose:!1})):s.createElement(o.default,{msg:t,context:t.ctwaContext});return s.createElement("div",{className:e.wrapperClass},a)}return null};var s=i(a(2784)),n=r(a(70727)),o=r(a(16846)),l=a(28703),d=a(64658),u=r(a(65411))},70727:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({sourceUrl:e,context:t,isSentByMe:a,compose:r}){var i;i=(null==t?void 0:t.isSuspiciousLink)||!(null==t?void 0:t.thumbnailUrl)&&!(null==t?void 0:t.thumbnail)?o.createElement("div",{className:d.default.noThumbContainer},o.createElement(p.default,{className:d.default.noThumbIcon,name:"link"})):o.createElement("img",{alt:"",className:d.default.media,src:t.thumbnailUrl?t.thumbnailUrl:"data:image/jpeg;base64,".concat(t.thumbnail||"")});var _=null!=(null==t?void 0:t.description)&&!(null==t?void 0:t.isSuspiciousLink)&&o.createElement("div",{className:d.default.description},o.createElement(u.default,{text:null==t?void 0:t.description,titlify:!0})),v=e;if(t&&(v=t.sourceUrl,!t.isSuspiciousLink&&(t.title||t.thumbnailUrl||t.thumbnail))){v=m.default.hostname(v);try{v=n.default.toUnicode(v)}catch(e){}}var g=v&&o.createElement("div",{className:d.default.source},o.createElement(u.default,{text:v})),E=(null==t?void 0:t.isSuspiciousLink)?null:null==t?void 0:t.title,y=(0,s.default)(d.default.preview,{[d.default.isCompose]:r,[d.default.bubbleIn]:!r&&!a,[d.default.bubbleOut]:a});return o.createElement("div",{className:y,onClick:()=>{if(!r)if(null==t?void 0:t.isSuspiciousLink){var e=(0,h.findLink)(null==t?void 0:t.sourceUrl);e&&l.default.openModal(o.createElement(f.default,{link:e}))}else(null==t?void 0:t.sourceUrl)&&(0,c.openExternalLink)(null==t?void 0:t.sourceUrl)}},i,o.createElement("div",{className:d.default.body},o.createElement("div",{className:d.default.title,title:E},o.createElement(u.default,{text:E})),_,g))};var s=i(a(72779)),n=i(a(71718)),o=r(a(2784)),l=i(a(79711)),d=i(a(58353)),u=i(a(91581)),c=a(35387),h=a(90088),f=i(a(82338)),p=i(a(82631)),m=i(a(74185))},16846:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(79711)),l=i(a(50935)),d=i(a(426)),u=i(a(91581)),c=r(a(35387)),h=i(a(18120)),f=i(a(17957)),p=i(a(20642)),m=r(a(68084)),_=i(a(27e3)),v=i(a(77865)),g=i(a(84443)),E=i(a(57008)),y=i(a(49213)),S=i(a(82631)),C=r(a(75074)),T=i(a(74185)),M=i(a(10252)),b=i(a(76022)),P="PREVIEW",A="FLOATER";class I extends n.Component{constructor(e){super(e),this.setRefThumbnailWrapper=e=>{this.refThumbnailWrapper=e},this.getThumbnailWrapperRect=()=>this.refThumbnailWrapper?this.refThumbnailWrapper.getBoundingClientRect():null,this.setPreviewMode=()=>{this.state.mode!==P&&this.setState({mode:P})},this.setFloaterMode=()=>{this.state.mode!==A&&this.setState({mode:A})},this.handleCtwaSourceButtonClick=e=>{e.preventDefault(),e.stopPropagation(),(0,c.openExternalLink)(this.props.context.sourceUrl)};var t=e.msg;if(t.type===l.default.MSG_TYPE.VIDEO){var a=e.msg.toJSON(),r=new v.default({fromMe:e.msg.id.fromMe,remote:e.msg.id.remote,id:(0,y.default)()});a.id=r,t=new _.default(a)}var i=g.default.isOpened(t)?A:P;this.state={mode:i,msg:t}}componentDidMount(){this.props.listeners.add(g.default,"".concat(this.state.msg.id.toString(),"_pip_did_open"),this.setFloaterMode),this.props.listeners.add(g.default,"".concat(this.state.msg.id.toString(),"_pip_did_close"),this.setPreviewMode)}render(){var e,t=this.props.context.description?n.createElement("div",{className:M.default.description,title:this.props.context.description},n.createElement(u.default,{text:this.props.context.description})):null,a=T.default.withoutWww(T.default.hostname(this.props.context.sourceUrl)),r=n.createElement("div",{className:M.default.source},n.createElement(u.default,{text:a})),i=(0,s.default)(M.default.body,{[M.default.noThumb]:!this.props.context.thumbnail}),p=(0,s.default)(M.default.preview,{[M.default.bubbleIn]:!this.state.msg.isSentByMe,[M.default.bubbleOut]:this.state.msg.isSentByMe}),_=this.state.mode!==P||h.default.supportsFeature(h.default.F.MD_BACKEND)?null:n.createElement("div",{className:M.default.mediaStateControlsWrapper},n.createElement(m.Play,null)),v=this.state.mode===A?n.createElement(E.default,{icon:n.createElement(S.default,{name:"video-pip-large"})},f.default.t(1136)):null;e=this.props.context.thumbnail||this.props.context.thumbnailUrl?n.createElement("img",{alt:"",className:(0,s.default)(M.default.thumbnail,{[M.default.youtubeThumbnail]:!1}),src:this.props.context.thumbnail?"data:image/jpeg;base64,".concat(this.props.context.thumbnail):this.props.context.thumbnailUrl}):n.createElement("div",{className:M.default.thumbnailPlaceholder});var y=(0,s.default)(M.default.attribution,d.default.clickable),I=a===l.default.HOSTNAME.INSTAGRAM,O=n.createElement("div",{className:y,onClick:this.handleCtwaSourceButtonClick},n.createElement(S.default,{name:I?"logo-instagram":"logo-facebook"}));return n.createElement("div",{className:p},n.createElement("div",{ref:this.setRefThumbnailWrapper,className:M.default.thumbnailWrapper,onClick:h.default.supportsFeature(h.default.F.MD_BACKEND)?this.handleCtwaSourceButtonClick:()=>{g.default.openOgVideoPiP("",this.props.context.thumbnail||"",this.state.msg,0,this.getThumbnailWrapperRect()),b.default.queryVideoPlaybackUrl(this.props.context.mediaUrl).then((e=>{if(g.default.isOpened(this.state.msg)){if(!e.url)throw new Error("Url is missing in response.");g.default.openOgVideoPiP(e.url,this.props.context.thumbnail||"",this.state.msg,0,null)}})).catch((()=>{g.default.closeOgVideoPiP(),o.default.openToast(n.createElement(C.default,{id:(0,C.genId)(),msg:f.default.t(1134),action:{actionText:f.default.t(1135),onAction:()=>{(0,c.openExternalLink)(this.props.context.sourceUrl)}}}))}))}},O,e,_,v),n.createElement(c.default,{className:i,href:this.props.context.sourceUrl},n.createElement("div",{className:M.default.title,title:this.props.context.title},n.createElement(u.default,{text:this.props.context.title})),t,r))}}var O=(0,p.default)(I);t.default=O},62181:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(19034)),n=r(a(2784)),o=i(a(19899)),l=i(a(79711)),d=i(a(91581)),u=i(a(20642)),c=a(58355);class h extends n.PureComponent{constructor(...e){super(...e),this.state={hidden:!1},this._setRefBubble=e=>{this.refBubble=e},this.rerender=()=>{this.forceUpdate()}}componentDidMount(){this.maybeRegMidnight()}componentDidUpdate(){this.maybeRegMidnight()}getTimestamp(){return this.props.timestamp}show(){this.state.hidden&&this.setState({hidden:!1})}hide(){this.state.hidden||this.setState({hidden:!0})}maybeRegMidnight(){this.props.listeners.remove(l.default,"midnight",this.rerender);var e=(0,s.default)().startOf("day").subtract(7,"day");this.props.timestamp>=e.unix()&&this.props.listeners.add(l.default,"midnight",this.rerender)}render(){var e,{isFocusable:t}=this.props,{hidden:a}=this.state;if(!a){var r=o.default.relativeDateStr(this.props.timestamp);e=n.createElement(d.default,{direction:"auto",text:r.toUpperCase()})}return n.createElement(c.SystemBubble,{ref:this._setRefBubble,hidden:a,isFocusable:t},e)}}var f=(0,u.default)(h);t.default=class extends f{getTimestamp(){return this.getComponent().getTimestamp()}show(){return this.getComponent().show()}hide(){return this.getComponent().hide()}getElement(){return this.getComponent().refBubble}}},83713:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({className:e,children:t,direction:a="horizontal",outgoingMsg:r,position:i}){return n.createElement("div",{className:(0,s.default)(o.default.wrapper,{[o.default.posBottom]:"bottom"===i,[o.default.posTop]:"top"===i,[o.default.wrapperIn]:!r,[o.default.wrapperOut]:r},e)},t)};var s=i(a(72779)),n=r(a(2784)),o=i(a(66007))},96576:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(58527)),n=i(a(72579)),o=i(a(42208)),l=i(a(72779)),d=r(a(2784)),u=i(a(79711)),c=i(a(9386)),h=i(a(50935)),f=i(a(131)),p=i(a(83713)),m=a(98864),_=i(a(48508)),v=i(a(91581)),g=a(99888),E=i(a(43396)),y=a(90973),S=i(a(18120)),C=i(a(17957)),T=a(28278),M=i(a(69345)),b=i(a(40686)),P=a(96645),A=i(a(13077)),I=i(a(40210)),O=a(41501),N=i(a(40207)),w=a(64658),D=i(a(5174)),R=r(a(75074)),L=(0,o.default)(O.MIMETYPES,(e=>"document"===e.msgType));function k(e){e&&(e.stopPropagation(),e.preventDefault())}class x extends d.PureComponent{constructor(...e){super(...e),this.showMediaMissing=e=>{k(e),u.default.openModal(d.createElement(M.default,{msg:this.props.msg.unsafe()}))},this.downloadMedia=e=>{if(k(e),Modernizr.adownload)this.props.msg.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:I.default.WEBC_RMR_REASON_CODE.MSG_CLICK,isUserInitiated:!0}).catch((()=>{})).then((()=>{switch(this.props.mediaData.mediaStage){case P.MEDIA_DATA_STAGE.RESOLVED:case P.MEDIA_DATA_STAGE.ERROR_UNSUPPORTED:this.props.msg.isVcardOverMmsDocument||(this._displayToast(),E.default.initDownload((0,w.unproxy)(this.props.msg.unsafe())));break;case P.MEDIA_DATA_STAGE.ERROR_MISSING:this.showMediaMissing()}}));else{var t=C.default.t(1856,{chrome_homepage:h.default.BROWSER_LINK.CHROME,firefox_homepage:h.default.BROWSER_LINK.FIREFOX,opera_homepage:h.default.BROWSER_LINK.OPERA});u.default.openModal(d.createElement(c.default,{onOK:()=>u.default.closeModal(),okText:C.default.t(1709)},d.createElement("div",{dangerouslySetInnerHTML:{__html:t}})))}},this.cancelDownload=e=>{k(e),this.props.msg.cancelDownload()},this.cancelUpload=e=>{k(e),this.props.msg.cancelUpload()},this.resumeUpload=e=>{k(e),this.props.msg.resumeUpload()},this.resumeRemoteUpload=e=>{k(e),this.props.msg.resumeRemoteUpload()}}componentDidMount(){var{msg:e,mediaData:t}=this.props;t.fullPreviewData||S.default.supportsFeature(S.default.F.DOWNLOAD_DOCUMENT_THUMB_MMS)&&(0,T.downloadMmsThumbnail)({msg:(0,w.unproxy)(e),isPreload:!1})}_displayToast(){var{mediaData:e}=this.props,t=e.filename||C.default.t(1385);u.default.openToast(d.createElement(R.default,{msg:C.default.t(564,{name:t}),id:(0,R.genId)()}))}render(){var e,t,a,{displayAuthor:r,displayType:i,msg:o,mediaData:u,quotedMsg:c,trusted:E}=this.props;if(u.pageCount>0){var S=C.default.t(1576,{count:u.pageCount,_plural:u.pageCount});e=d.createElement("span",{className:_.default.metaValue,title:S},S)}if(u.size>0){var T=C.default.filesize(u.size);t=d.createElement("span",{className:_.default.metaValue,title:T},T)}var M,I,N,w=_.default.filetypeIcon;L.hasOwnProperty(u.mimetype)&&(M=null===(N=L[u.mimetype].ext)||void 0===N?void 0:N.toLowerCase(),I=u.mimetype);var R=u.filename?(0,g.getFileExtension)(u.filename):null;if((!M||R&&M!==R)&&(M=R,I=(0,n.default)(O.EXT_TO_MIME,M)),w=(0,l.default)(w,I&&(0,n.default)(L,[I,"icon"])||"icon-doc-generic"),M){var k=M.toUpperCase();a=d.createElement("span",{"data-meta-key":"type","data-testid":"type",className:_.default.metaValue,title:k},k)}var x=u.filename||C.default.t(1385),F=null,G={onClick:()=>{}};switch(u.mediaStage){case P.MEDIA_DATA_STAGE.RESOLVED:case P.MEDIA_DATA_STAGE.ERROR_UNSUPPORTED:G.onClick=this.downloadMedia,F=d.createElement(m.Download,{onClick:G.onClick});break;case P.MEDIA_DATA_STAGE.FETCHING:F=d.createElement(m.PendingCancel,{outgoingMsg:o.isSentByMe}),G.onClick=this.cancelDownload;break;case P.MEDIA_DATA_STAGE.NEED_POKE:case P.MEDIA_DATA_STAGE.INIT:G.onClick=this.downloadMedia,F=d.createElement(m.Download,{onClick:G.onClick});break;case P.MEDIA_DATA_STAGE.UPLOADING:F=d.createElement(m.PendingCancel,{outgoingMsg:o.isSentByMe}),G.onClick=this.cancelUpload;break;case P.MEDIA_DATA_STAGE.NEED_UPLOAD:F=d.createElement(m.Upload,null),G.onClick=this.resumeUpload;break;case P.MEDIA_DATA_STAGE.REMOTE_NEED_UPLOAD:F=d.createElement(m.Upload,null),G.onClick=this.resumeRemoteUpload;break;case P.MEDIA_DATA_STAGE.ERROR_TOO_LARGE:break;case P.MEDIA_DATA_STAGE.ERROR_MISSING:G.onClick=this.showMediaMissing;break;case P.MEDIA_DATA_STAGE.SENDING:F=o.isFailed?null:d.createElement(m.Pending,{outgoingMsg:o.isSentByMe});break;default:F=d.createElement(m.Pending,{outgoingMsg:o.isSentByMe})}var U=(o.isFromTemplate||o.isDynamicReplyButtonsMsg)&&o.caption,B=U?null:d.createElement("div",{className:_.default.docMeta},e,a,t);return d.createElement("div",{className:(0,l.default)({[_.default.bubble]:!U,[_.default.templateBubble]:U,[_.default.isPreview]:i===h.default.DISP_TYPE.MSG_INFO,[_.default.isGallery]:i===h.default.DISP_TYPE.STARRED_MSGS||i===h.default.DISP_TYPE.GALLERY})},d.createElement(A.default,{displayType:i,msg:o,quotedMsg:c,showAuthor:r,hideCaption:!(o.isFromTemplate||o.isDynamicReplyButtonsMsg),trusted:E},d.createElement(f.default,{msg:o.unsafe(),wrapperClass:_.default.ctwaContext}),d.createElement(D.default,(0,s.default)({className:_.default.buttonContainer,title:C.default.t(1589,{name:x})},G),this.props.trusted?d.createElement(b.default,{msg:o.unsafe(),containerClassName:_.default.thumbContainer,childClassName:_.default.thumb}):null,d.createElement(p.default,{outgoingMsg:o.isSentByMe,position:[].length?"bottom":void 0},d.createElement(y.FlexRow,{className:_.default.deepContainerContent,align:"center"},d.createElement(y.FlexItem,{className:_.default.icon},d.createElement("div",{className:w})),d.createElement(y.FlexItem,{className:_.default.text,grow:1},d.createElement(v.default,{text:x,dirMismatch:o.rtl!==C.default.isRTL(),direction:"auto"})),d.createElement(y.FlexItem,{grow:0},F)))),B))}}x.CONCERNS={msg:["ack","caption","dir","isFromTemplate","isFailed","isSentByMe","rtl","senderObj","subtype","type","isVcardOverMmsDocument","mediaData","isDynamicReplyButtonsMsg"],mediaData:["mediaStage","filename","pageCount","size","mimetype","preview","fullPreviewData"]};var F=(0,N.default)(x,x.CONCERNS);t.default=F},10084:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(50935)),l=i(a(34092)),d=i(a(71582)),u=i(a(82631));class c extends n.PureComponent{constructor(...e){super(...e),this.state={hover:!1},this._onMouseEnter=()=>{this.setState({hover:!0})},this._onMouseLeave=()=>{this.setState({hover:!1})}}render(){var e=(0,s.default)(d.default.container,{[d.default.compact]:this.props.displayType===o.default.DISP_TYPE.MSG_INFO});return n.createElement("div",{className:e,onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave},this.state.hover?n.createElement(l.default,null,this.props.tooltip):null,n.createElement("div",{className:d.default.error,onClick:this.props.onClick,role:"button"},n.createElement(u.default,{name:"error"})))}}t.default=c},74343:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=(r(a(50935)),r(a(30472))),o=r(a(72068)),l=r(a(40207));class d extends s.PureComponent{render(){var{displayType:e,msg:t}=this.props;return t.mediaData?s.createElement(n.default,{displayType:e,mediaData:t.mediaData,msg:t}):s.createElement(o.default,{msg:t,displayType:e})}}d.CONCERNS={msg:["mediaData","mdDowngrade"]};var u=(0,l.default)(d,d.CONCERNS);t.default=u},30472:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(19976)),n=r(a(2784)),o=i(a(50935)),l=i(a(10084)),d=i(a(18120)),u=i(a(17957)),c=a(96645),h=i(a(53884)),f=i(a(40207));function p(){var e=(0,s.default)(["msg_media_fail_icon:resend failure: ",""]);return p=function(){return e},e}class m extends n.PureComponent{render(){var{displayType:e,mediaData:t,msg:a}=this.props,r=e===o.default.DISP_TYPE.CONVERSATION,i=t.mediaStage;return i===c.MEDIA_DATA_STAGE.ERROR_TOO_LARGE?n.createElement(h.default,{displayType:this.props.displayType,mediaType:t.type}):!a.isUnsentMedia||i!==c.MEDIA_DATA_STAGE.ERROR_MISSING&&i!==c.MEDIA_DATA_STAGE.ERROR_UNSUPPORTED?a.isFailed?i===c.MEDIA_DATA_STAGE.ERROR_MISSING?n.createElement(l.default,{displayType:this.props.displayType,tooltip:u.default.t(1369)}):a.type===o.default.MSG_TYPE.PTT&&i===c.MEDIA_DATA_STAGE.PREPARING?n.createElement(l.default,{displayType:this.props.displayType,tooltip:u.default.t(1176)}):d.default.supportsFeature(d.default.F.RESEND_ICON)&&r&&i!==c.MEDIA_DATA_STAGE.REMOTE_UPLOADING?n.createElement(l.default,{displayType:this.props.displayType,onClick:v.bind(null,a),tooltip:u.default.t(1211)}):n.createElement(l.default,{displayType:this.props.displayType,tooltip:u.default.t(1260)}):null:n.createElement(l.default,{displayType:this.props.displayType,tooltip:u.default.t(1260)})}}m.CONCERNS={msg:["isFailed","asMms","type","isUnsentMedia"],mediaData:["mediaStage","type"]};var _=(0,f.default)(m,m.CONCERNS);function v(e){e.resend().catch((function(e){__LOG__(2)(p(),e)}))}t.default=_},53884:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(79711)),o=r(a(9386)),l=r(a(50935)),d=r(a(10084)),u=r(a(17957)),c=r(a(72424));var h=function(e){var t=function(e){var t={maxSize:u.default.filesize(c.default.media)},a={maxSize:u.default.filesize(c.default.maxFileSize)};switch(e){case l.default.MSG_TYPE.AUDIO:case l.default.MSG_TYPE.PTT:return u.default.t(942,t);case l.default.MSG_TYPE.IMAGE:return u.default.t(946,t);case l.default.MSG_TYPE.VIDEO:return u.default.t(961,t);case l.default.MSG_TYPE.DOCUMENT:return u.default.t(944,a);case l.default.MSG_TYPE.UNKNOWN:default:return u.default.t(945,a)}}(e.mediaType);return s.createElement(d.default,{displayType:e.displayType,onClick:f.bind(null,t),tooltip:t})};function f(e){n.default.openModal(s.createElement(o.default,{onOK:()=>n.default.closeModal()},e))}t.default=h},72068:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(19976)),n=r(a(2784)),o=(i(a(50935)),i(a(10084))),l=i(a(17957)),d=i(a(40207));function u(){var e=(0,s.default)(["PlainMsgFailIcon: failed to resend message"]);return u=function(){return e},e}class c extends n.PureComponent{constructor(...e){super(...e),this.handleClick=()=>{var{msg:e}=this.props;e.resend().catch((()=>{__LOG__(2)(u())}))}}render(){var{msg:e,displayType:t}=this.props;return e.isFailed?n.createElement(o.default,{displayType:t,tooltip:l.default.t(1211),onClick:this.handleClick}):null}}c.CONCERNS={msg:["ack","isFailed"]};var h=(0,d.default)(c,c.CONCERNS);t.default=h},4336:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(51092)),l=i(a(17957)),d=a(62761),u=i(a(72424)),c=i(a(40207)),h=i(a(82631));class f extends n.Component{render(){var{msg:e,className:t}=this.props;if(!(0,d.showForwarded)(e))return null;var a=u.default.frequentlyForwardedMessages&&e.isFrequentlyForwarded,r=u.default.hfmStringChanges?"highly-forwarded-v2":"highly-forwarded",i=a?r:"forwarded",c=(0,s.default)(o.default.icon,{[o.default.iconHighlyForwarded]:a&&!u.default.hfmStringChanges}),f=u.default.hfmStringChanges?l.default.t(690):l.default.t(687),p=a?f:l.default.t(687);return n.createElement("div",{className:(0,s.default)(o.default.container,t)},n.createElement(h.default,{name:i,display:"inline",className:c}),n.createElement("span",{className:o.default.text},p))}}f.CONCERNS={msg:["isForwarded","forwardingScore","numTimesForwarded","isFrequentlyForwarded"]};var p=(0,c.default)(f,f.CONCERNS);t.default=p},41117:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(38147)),l=i(a(39815));class d extends n.PureComponent{constructor(...e){super(...e),this._setCellFrameDivRef=e=>{this._cellFrameDivRef=e}}indicateFocus(){o.default.maybeIndicateFocus(this._cellFrameDivRef,l.default.focusAnimation)}render(){var e=this.props,t=(0,s.default)(l.default.msg,{[l.default.hover]:e.hover,[l.default.current]:e.current,[l.default.active]:e.active});return n.createElement("div",{ref:this._setCellFrameDivRef,className:t,onClick:e.onClick,onMouseEnter:e.onMouseEnter,onMouseOver:e.onMouseOver,onMouseLeave:e.onMouseLeave},e.children)}}t.default=d},84700:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BUBBLE_PADDING=t.MAX_DIM=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(32960)),l=i(a(71874)),d=i(a(92969)),u=i(a(12708)),c=i(a(79711)),h=i(a(50935)),f=i(a(131)),p=a(28703),m=i(a(4336)),_=i(a(43429)),v=i(a(90477)),g=a(13414),E=i(a(17957)),y=i(a(69345)),S=a(96645),C=i(a(71726)),T=i(a(40210)),M=a(62761),b=(a(62742),i(a(40207))),P=a(64658),A=a(18388),I=i(a(82631)),O=i(a(900)),N=i(a(15668)),w=(0,A.getIntFromStylesProp)(_.default,"-width-picture-bubble-inner");t.MAX_DIM=w;var D=(0,A.getIntFromStylesProp)(_.default,"-padding-picture-bubble");t.BUBBLE_PADDING=D;var R=w/5.4;class L extends n.PureComponent{constructor(...e){super(...e),this.state={playing:!1},this.playCount=0,this.pause=()=>{this.playCount=0,this._pause()},this.handleKeyActivation=e=>{e.stopPropagation(),e.preventDefault(),this._handleClick(e)},this.play=e=>{var{mediaData:t}=this.props,a=this.playerRef;if(t.mediaStage===S.MEDIA_DATA_STAGE.RESOLVED&&a){e&&e.stopPropagation();var r=this.duration;if(null==r||0===r){var i=a.getDuration();null!=i?r=i:t.duration&&"0"!==t.duration&&(r=parseInt(t.duration,10))}if(null!=r&&0!==r){var s=Math.ceil(6/r);this.playCount=Math.max(s,3)}else this.playCount=3;this._play()}},this._pause=()=>{this.setState({playing:!1}),this.playerRef&&this.playerRef.pauseAndReset()},this._play=()=>{this.playerRef&&(this.playCount<=0?this.pause():(this.playCount-=1,this.state.playing||this.setState({playing:!0}),this.playerRef.play()))},this.showMediaMissing=()=>{c.default.openModal(n.createElement(y.default,{msg:this.props.msg.unsafe()}))},this.getZoomNode=e=>{var t=this.props.isMsgVisible;if(!t)return null;var a=t(e);return a?a.getImgNode&&a.getImgNode():null},this.launchMediaViewer=e=>{e&&e.stopPropagation(),c.default.mediaViewerModal({msg:(0,P.unproxy)(this.props.msg.unsafe()),getZoomNode:this.getZoomNode})},this._downloadMedia=()=>{this.props.msg.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:T.default.WEBC_RMR_REASON_CODE.MSG_CLICK,isUserInitiated:!0})},this.cancelDownload=()=>{this.props.msg.cancelDownload()},this.cancelUpload=()=>{this.props.msg.cancelUpload()},this.resumeUpload=()=>{this.props.msg.resumeUpload()},this.resumeRemoteUpload=()=>{this.props.msg.resumeRemoteUpload()},this._handleClick=e=>{switch(this.props.mediaData.mediaStage){case S.MEDIA_DATA_STAGE.RESOLVED:this._shouldPlay()?this.play(e):this.launchMediaViewer(e);break;case S.MEDIA_DATA_STAGE.INIT:this.launchMediaViewer(e);break;case S.MEDIA_DATA_STAGE.FETCHING:this.cancelDownload();break;case S.MEDIA_DATA_STAGE.NEED_POKE:this._downloadMedia();break;case S.MEDIA_DATA_STAGE.UPLOADING:this.cancelUpload();break;case S.MEDIA_DATA_STAGE.NEED_UPLOAD:this.resumeUpload();break;case S.MEDIA_DATA_STAGE.REMOTE_NEED_UPLOAD:this.resumeRemoteUpload();break;case S.MEDIA_DATA_STAGE.ERROR_MISSING:this.showMediaMissing()}}}componentDidMount(){this.props.msg.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:T.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1})}getStyle(){var e,t,a=this.props.mediaData,r=a.aspectRatio||a.fullWidth/a.fullHeight;if(!r)return{bubbleWidth:w,bubbleHeight:"100%",contentWidth:w,contentHeight:"100%"};r<1/5.4?(t=w,e=2.5*R):r<1?(t=w,e=w*r):r<5.4?(e=w,t=w/r):(e=w,t=R);var i=a.renderableUrl&&a.fullWidth||e,s=a.renderableUrl&&a.fullHeight||t;return i/s>e/t?(i=i*t/s,s=t):(s=s*e/i,i=e),s>w&&(s=w),{bubbleWidth:e,bubbleHeight:t,contentWidth:i,contentHeight:s}}_getFlexSize(e){var t,a,r=this.props.mediaData,i=r.aspectRatio||r.fullWidth/r.fullHeight,s=2.5*R;i>=1?e<w?(a=(t=e)/i)<R&&(a=R):(a=(t=w)/i)<R&&(a=R):((t=(a=w)*i)<s&&(t=s),e<w&&t>e&&(t=e));var n=t,o=a;return n/o>t/a?(n=n*a/o,o=a):(o=o*t/n,n=t),{bubbleWidth:t,bubbleHeight:a,contentWidth:n,contentHeight:o}}getImgNode(){if(this.playerRef)return this.playerRef.underlyingVideo()}_shouldPlay(){return!this.state.playing&&this.playCount!==1/0}render(){var e=this.props.msg,t=this.props.mediaData,a=t.preview?t.preview.url():void 0,r=null,i=this.getStyle();null!=this.props.maxWidth&&this.props.maxWidth<i.bubbleWidth&&(i=this._getFlexSize(this.props.maxWidth));var{bubbleWidth:c,contentWidth:y,contentHeight:T}=i;if(t.mediaStage===S.MEDIA_DATA_STAGE.RESOLVED){var b=t.aspectRatio>=1?{width:"auto",height:T}:{width:y,height:"auto"};r=n.createElement("div",{className:_.default.thumbVideo},n.createElement(N.default,{ref:(0,g.GetRef)((e=>{this.playerRef=e})),src:t.renderableUrl,style:b,onEnded:this._play,muted:!0},E.default.t(1420)))}var P,A=a?n.createElement("div",{className:_.default.thumbImage,style:{backgroundImage:"url(".concat(a,")")}}):null,w=e.caption?n.createElement("div",{className:_.default.caption,style:{maxWidth:c}},n.createElement(u.default,{msg:e.unsafe(),trusted:this.props.trusted})):null,R=w?null:n.createElement(O.default,null),L=this.props.displayAuthor&&!e.isSentByMe&&e.isGroupMsg,x=(0,M.showForwarded)(e),F=(0,s.default)(_.default.bubble,{[_.default.hasCaption]:e.caption,[_.default.hasAuthor]:L,[_.default.forwarded]:x,[_.default.isPSA]:e.isPSA,[_.default.isGallery]:this.props.displayType===h.default.DISP_TYPE.STARRED_MSGS||this.props.displayType===h.default.DISP_TYPE.GALLERY,[_.default.isInfo]:this.props.displayType===h.default.DISP_TYPE.MSG_INFO}),G=L?n.createElement("div",{className:_.default.author},n.createElement(l.default,{msg:e,contact:e.senderObj})):null,U=x?n.createElement(m.default,{msg:e.unsafe(),className:_.default.forwardedIndicator}):null;switch(e.gifAttribution){case p.VideoMessageAttribution.GIPHY:P=n.createElement("div",{className:_.default.vendor},n.createElement(I.default,{name:"giphy"}));break;case p.VideoMessageAttribution.TENOR:P=n.createElement("div",{className:_.default.vendor},n.createElement(I.default,{name:"tenor"}));break;default:P=null}var B=this.props.quotedMsg?n.createElement("div",{className:_.default.quote},this.props.quotedMsg):null,j=n.createElement(n.Fragment,null,G,U,B,n.createElement(f.default,{msg:e.unsafe(),wrapperClass:_.default.ctwaContext}),n.createElement("div",{"data-a8n":o.default.key("image-thumb-gif"),className:_.default.thumb,onClick:this._handleClick,style:{width:y,height:T}},n.createElement(v.default,{mediaStage:t.mediaStage,mediaDataFileSize:t.size,isFailed:e.isFailed,shouldPlay:this._shouldPlay(),onClick:this._handleClick}),A,r,R,P),w,n.createElement("div",{className:_.default.meta},n.createElement(C.default,{msg:this.props.msg})));return w?n.createElement(d.default,{contact:e.senderObj,msg:e.unsafe(),className:F,onClick:k,style:{width:c}},j):n.createElement("div",{className:F,onClick:k,style:{width:c+2*D}},j)}}function k(e){e.stopPropagation()}L.CONCERNS={msg:["id","ack","caption","isFailed","isPSA","isSentByMe","isGroupMsg","gifAttribution","senderObj"],mediaData:["aspectRatio","preview","duration","type","mediaStage","renderableUrl","fullWidth","fullHeight","size"]};var x=(0,b.default)(L,L.CONCERNS);t.default=x},90477:(e,t,a)=>{"use strict";var r=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({mediaStage:e,isFailed:t,mediaDataFileSize:a,shouldPlay:r,onClick:o}){switch(e){case n.MEDIA_DATA_STAGE.RESOLVED:return r?i.createElement(s.GifIcon,{onClick:o}):null;case n.MEDIA_DATA_STAGE.FETCHING:case n.MEDIA_DATA_STAGE.UPLOADING:return i.createElement(s.PendingCancel,null);case n.MEDIA_DATA_STAGE.NEED_POKE:return i.createElement(s.Download,{filesize:a});case n.MEDIA_DATA_STAGE.NEED_UPLOAD:case n.MEDIA_DATA_STAGE.REMOTE_NEED_UPLOAD:return i.createElement(s.Upload,{filesize:a});case n.MEDIA_DATA_STAGE.SENDING:if(t)return null;break;default:return i.createElement(s.Pending,null)}return i.createElement(s.Pending,null)};var i=r(a(2784)),s=r(a(68084)),n=a(96645)},87162:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(19976)),n=r(a(2784)),o=i(a(43334)),l=i(a(79711)),d=i(a(91581)),u=a(95595),c=a(45880),h=i(a(24510)),f=i(a(98294)),p=a(13735),m=i(a(81524)),_=i(a(40207)),v=i(a(82631)),g=i(a(68384)),E=i(a(3111));function y(){var e=(0,s.default)(["wa:groupNotification:unknown message subtype: ",""]);return y=function(){return e},e}function S(){var e=(0,s.default)(["wa:groupNotification:unknown message subtype: ",""]);return S=function(){return e},e}class C extends n.PureComponent{stopEvent(e){e.stopPropagation(),e.preventDefault()}openInfoDrawer(){return e=>{this.stopEvent(e),l.default.chatInfoDrawer(this.props.msg.chat)}}_openGroupInviteLinkDrawer(){return e=>{this.stopEvent(e);var t=this.props.msg.chat,r=a(93171).default;l.default.openDrawerRight(n.createElement(r,{chat:t,groupMetadata:t.groupMetadata,onBack:()=>l.default.closeDrawerRight()}),"slide-left",this.props.uim)}}_openExpandedGroupDesc(){return e=>{this.stopEvent(e);var t=this.props.msg.chat;l.default.chatInfoDrawer(t,!0)}}openChat(e){return t=>{this.stopEvent(t),o.default.find(e).then((e=>{l.default.openChatFromUnread(e).then((t=>{t&&l.default.focusChatTextInput(e)}))}))}}_openEphemeralSetting(){return e=>{this.stopEvent(e);var t=this.props.msg.chat;l.default.ephemeralDrawer(t)}}_getFormattedText(e){return n.createElement(d.default,{direction:"auto",text:e})}_getEphemeralDuration(){var e,t=null===(e=this.props.msg.templateParams)||void 0===e?void 0:e[0];return t&&parseInt(t,10)||0}isMe(e){return g.default.equals(e,(0,u.getMaybeMeUser)())}_renderGroupNotificationL10n(e,t,a,r){var i=t?(0,c.getFormattedName)(t,!this.props.clickable):null;switch(e){case"add":return this.isMe(t)?n.createElement(m.default,{id:1634}):n.createElement(m.default,{id:1633,params:{name:i}});case"remove":return this.isMe(t)?n.createElement(m.default,{id:1646}):n.createElement(m.default,{id:1645,params:{name:i}});case"leave":return this.isMe(t)?n.createElement(m.default,{id:1642}):n.createElement(m.default,{id:1641,params:{name:i}});case"picture":return"remove"===r?this.isMe(t)?n.createElement(m.default,{id:1759}):n.createElement(m.default,{id:1758,params:{name:i}}):this.isMe(t)?n.createElement(m.default,{id:1757}):n.createElement(m.default,{id:1756,params:{name:i}});case"subject":var s=this._getFormattedText(r);return this.isMe(t)?n.createElement(m.default,{id:1664,params:{subject:s}}):null!=i?n.createElement(m.default,{id:1662,params:{subject:s,name:i}}):n.createElement(m.default,{id:1663,params:{subject:s}});case"modify":if(this.isMe(t)){var o=(0,E.default)(r);return n.createElement(m.default,{id:1636,params:{new_number:o,name:i}})}return n.createElement(m.default,{id:1635,params:{name:i}});default:__LOG__(2)(S(),e)}}_renderGp2L10n(e,t,a,r,i,s){var o,l=t?(0,c.getFormattedName)(t,!this.props.clickable):null,d=i?i[0]:void 0,u=d?(0,c.getFormattedName)(d,!this.props.clickable):null,h=(0,c.getFormattedNames)(i,!this.props.clickable);switch(e){case"add":return t?this.isMe(t)?n.createElement(m.default,{id:1655,params:{participants:h}}):this.isMe(d)?null!=l?n.createElement(m.default,{id:1648,params:{name:l}}):n.createElement(m.default,{id:1652}):null!=l?n.createElement(m.default,{id:1647,params:{participants:h,name:l}}):n.createElement(m.default,{id:1651,params:{participants:h}}):this.isMe(d)?n.createElement(m.default,{id:1634}):n.createElement(m.default,{id:1633,params:{name:u}});case"remove":return t?g.default.equals(t,d)?n.createElement(m.default,{id:1646}):this.isMe(t)?n.createElement(m.default,{id:1656,params:{participants:h}}):this.isMe(d)?null!=l?n.createElement(m.default,{id:1650,params:{name:l}}):n.createElement(m.default,{id:1654}):null!=l?n.createElement(m.default,{id:1649,params:{participants:h,name:l}}):n.createElement(m.default,{id:1653,params:{participants:h}}):this.isMe(d)?n.createElement(m.default,{id:1646}):n.createElement(m.default,{id:1645,params:{name:u}});case"leave":return this.isMe(d)?n.createElement(m.default,{id:1642}):n.createElement(m.default,{id:1641,params:{name:h}});case"picture":return"remove"===r?this.isMe(t)?n.createElement(m.default,{id:1759}):n.createElement(m.default,{id:1758,params:{name:l}}):this.isMe(t)?n.createElement(m.default,{id:1757}):n.createElement(m.default,{id:1756,params:{name:l}});case"subject":var f=this._getFormattedText(r);return this.isMe(t)?n.createElement(m.default,{id:1664,params:{subject:f}}):null!=l?n.createElement(m.default,{id:1662,params:{name:l,subject:f}}):n.createElement(m.default,{id:1663,params:{subject:f}});case"modify":var _=(0,E.default)(t),v=(0,E.default)(d);return _===a?n.createElement(m.default,{id:1636,params:{name:a,new_number:v}}):n.createElement(m.default,{id:1635,params:{name:a}});case"create":if(this.isMe(t))return r?n.createElement(m.default,{id:1607,params:{subject:this._getFormattedText(r)}}):n.createElement(m.default,{id:1608});if(r)return null!=l?n.createElement(m.default,{id:1604,params:{subject:this._getFormattedText(r),name:l}}):n.createElement(m.default,{id:1606,params:{subject:this._getFormattedText(r)}});if(null!=l){var S=s.title();return""===S.trim()?n.createElement(m.default,{id:1605,params:{name:l}}):n.createElement(m.default,{id:1604,params:{name:l,subject:S}})}return n.createElement(m.default,{id:1603});case"delete":return s.isSupportGroup()?n.createElement(m.default,{id:1325}):n.createElement(m.default,{id:1619});case"promote":var C=i.length;return 1===C&&this.isMe(d)?n.createElement(m.default,{id:1644}):n.createElement(m.default,{id:1643,params:{count:C,participants:h},plural:C});case"demote":var T=i.length;return 1===T&&this.isMe(d)?n.createElement(m.default,{id:1638}):n.createElement(m.default,{id:1637,params:{count:T,participants:h},plural:T});case"invite":return this.isMe(d)?n.createElement(m.default,{id:1640}):n.createElement(m.default,{id:1639,params:{name:u}});case"revoke_invite":return this.isMe(t)?n.createElement(m.default,{id:1628}):n.createElement(m.default,{id:1627,params:{name:l}});case"description":return this.isMe(t)?n.createElement(m.default,{id:1617}):null!=l?n.createElement(m.default,{id:1613,params:{name:l}}):n.createElement(m.default,{id:1615});case"announce":return"on"===r?this.isMe(t)?n.createElement(m.default,{id:1602}):n.createElement(m.default,{id:1601,params:{name:l}}):this.isMe(t)?n.createElement(m.default,{id:1600}):n.createElement(m.default,{id:1599,params:{name:l}});case"restrict":return"on"===r?this.isMe(t)?n.createElement(m.default,{id:1660}):n.createElement(m.default,{id:1659,params:{name:l}}):this.isMe(t)?n.createElement(m.default,{id:1658}):n.createElement(m.default,{id:1657,params:{name:l}});case"no_frequently_forwarded":return"on"===r?this.isMe(t)?n.createElement(m.default,{id:1632}):n.createElement(m.default,{id:1631,params:{name:l}}):this.isMe(t)?n.createElement(m.default,{id:1630}):n.createElement(m.default,{id:1629,params:{name:l}});case"announce_msg_bounce":return n.createElement(m.default,{id:1598});case"v4_add_invite_sent":return n.createElement(m.default,{id:1396,params:{participants:h,count:i.length}});case"v4_add_invite_join":return n.createElement(m.default,{id:1395,params:{participants:h,count:i.length}});case"ephemeral":var M=null===(o=s.groupMetadata)||void 0===o?void 0:o.canSetEphemeralSetting(),b=this._getEphemeralDuration();return t?this.isMe(t)?M?n.createElement(p.EphemeralL10n,{type:p.EphemeralStringType.SettingChangeByYouAsAdmin,numSeconds:b}):n.createElement(p.EphemeralL10n,{type:p.EphemeralStringType.SettingChangeByYou,numSeconds:b}):M?n.createElement(p.EphemeralL10n,{type:p.EphemeralStringType.SettingChangeByOthersAsAdmin,numSeconds:b,name:l}):n.createElement(p.EphemeralL10n,{type:p.EphemeralStringType.SettingChangeByOthers,numSeconds:b,name:l}):M?n.createElement(p.EphemeralL10n,{type:p.EphemeralStringType.SettingChangeByUnknownAsAdmin,numSeconds:b}):n.createElement(p.EphemeralL10n,{type:p.EphemeralStringType.SettingChangeByUnknown,numSeconds:b});default:__LOG__(2)(y(),e)}}_renderIcon(e,t){if("gp2"===e){if("announce"===t)return n.createElement("div",{className:h.default.icon},n.createElement(v.default,{name:"megaphone"}));if("ephemeral"===t&&this.props.clickable)return n.createElement("div",{className:h.default.icon},n.createElement(v.default,{name:"disappearing"}))}}_getClickHandler(e,t){var a;if(this.props.clickable)switch(t){case"picture":case"subject":return this.openInfoDrawer();case"revoke_invite":return this._openGroupInviteLinkDrawer();case"description":return this._openExpandedGroupDesc();case"ephemeral":var{chat:r}=this.props.msg;if(null===(a=r.groupMetadata)||void 0===a?void 0:a.canSetEphemeralSetting())return this._openEphemeralSetting()}}render(){var{msg:e}=this.props,{type:t,subtype:a,author:r,body:i,recipients:s,chat:o,templateParams:l}=e,d=e.displayName();if("group_notification"!==t&&"gp2"!==t)return null;var u="gp2"===t?this._renderGp2L10n(a,r,d,i,s,o,l):this._renderGroupNotificationL10n(a,r,d,i);if(!u)return null;var c=this._getClickHandler(t,a);return n.createElement("div",{role:c?"button":void 0,className:h.default.notification,onClick:c},this._renderIcon(t,a),u)}}C.CONCERNS={msg:["type","subtype","author","body","recipients","chat","templateParams"],groupMetadata:["support"]};var T=(0,f.default)((0,_.default)(C,C.CONCERNS));t.default=T},1512:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(43334)),o=r(a(79711)),l=r(a(55236)),d=i(a(71201)),u=r(a(3837)),c=r(a(17957)),h=r(a(20642)),f=r(a(19773)),p=a(97526),m=a(64658),_=r(a(38906)),v=r(a(17693)),g=r(a(63498)),E=r(a(74824)),y=a(24996);class S extends s.Component{constructor(...e){super(...e),this.addRevokeListener=()=>{this.props.listeners.add(this.props.msg,"change:asRevoked",this.handleRevoke)},this.handleRevoke=()=>{o.default.refreshMessages()},this.state={contextMenu:null,hover:!1},this.setRefContext=e=>this.refContext=e,this.mouseOver=e=>{e.buttons||this.state.hover||this.setState({hover:!0})},this.mouseDown=()=>{this.state.hover&&this.setState({hover:!1})},this.openContextMenu=()=>{this.onMenu(void 0,!0)},this.closeContextMenu=()=>{this.setState({contextMenu:null})},this._onOpenInfoDrawer=()=>{o.default.msgInfoDrawer((0,m.unproxy)(this.props.msg.unsafe()))},this.onReplyMessage=()=>{var e=(0,m.unproxy)(this.props.msg.unsafe()),t=e.chat;t.composeQuotedMsg=e,o.default.focusChatTextInput(t)},this.onPrivateReplyMessage=()=>{var e=(0,m.unproxy)(this.props.msg.unsafe());n.default.find(e.sender).then((e=>Promise.props({ok:o.default.openChatBottom(e),chat:e}))).then((({ok:t,chat:a})=>{t&&(a.composeQuotedMsg=e,this.props.msg&&this.props.msg.chat&&(a.composeQuotedMsgRemoteJid=this.props.msg.chat.id))}))},this.onStarMessage=()=>{var e=(0,m.unproxy)(this.props.msg.unsafe());o.default.sendStarMsgs(e.chat,[e])},this.onUnstarMessage=()=>{var e=(0,m.unproxy)(this.props.msg.unsafe());o.default.sendUnstarMsgs(e.chat,[e])},this.onDeleteMessage=()=>{var{msg:e,isMsgVisible:t}=this.props;o.default.openModal(s.createElement(l.default,{chat:e.chat,msgList:[(0,m.unproxy)(e.unsafe())],deletePrompt:!0,revokePrompt:e.canRevoke(),isMsgVisible:t}))},this.openContactChat=()=>{n.default.find(this.props.msg.author).then((e=>{o.default.openChatFromUnread(e).then((t=>{t&&o.default.focusChatTextInput(e)}))}))},this._getMenuRefContext=()=>{if(this.refContext)return this.refContext.getComponent().refContext},this.onMenu=(e,t)=>{if(t&&this.state.contextMenu)this.setState({contextMenu:null});else{var a=t?this._getMenuRefContext():e,r=(0,m.unproxy)(this.props.msg),i=[];r.isSentByMe&&!r.asRevoked&&i.push(s.createElement(d.default,{key:"info",a8n:"mi-msg-info",action:this._onOpenInfoDrawer},c.default.t(947))),r.canReply()&&i.push(s.createElement(d.default,{key:"reply",a8n:"mi-msg-reply",action:this.onReplyMessage},c.default.t(1188))),(r.canPrivateReply()||r.canPrivateReplyInRestrictedGrp())&&i.push(s.createElement(d.default,{key:"private_reply",a8n:"mi-msg-reply",action:this.onPrivateReplyMessage},c.default.t(1141))),r.canForward()&&i.push(s.createElement(d.default,{key:"forward",a8n:"mi-msg-forward",action:()=>{this.props.onOpenForwardFlow(!0,r.unsafe())}},c.default.t(685))),r.canStar()&&(r.star?i.push(s.createElement(d.default,{key:"star",a8n:"mi-msg-unstar",action:this.onUnstarMessage},c.default.t(1373))):i.push(s.createElement(d.default,{key:"star",a8n:"mi-msg-star",action:this.onStarMessage},c.default.t(1295)))),i.push(s.createElement(d.default,{key:"delete",a8n:"mi-msg-delete",action:this.onDeleteMessage},c.default.t(545))),r.isGroupMsg&&r.author&&!r.isSentByMe&&i.push(s.createElement(d.default,{key:"author",a8n:"mi-msg-author",action:this.openContactChat},c.default.t(943,{author:r.displayName()}))),this.setState({contextMenu:{menu:i,anchor:a,theme:d.ThemeOptions.COMPACT}})}}}componentDidMount(){this.addRevokeListener()}componentDidUpdate(e){this.props.msg.id.equals(e.msg.id)||(this.props.listeners.remove(e.msg,"change:asRevoked",this.handleRevoke),this.addRevokeListener())}scrollMsg(e,t){this.props.scrollMsg(e,t)}highlight(e){this.props.highlight(e)}render(){var e,t,a,{msg:r,menuTransition:i}=this.props;return(this.state.hover||this.state.contextMenu)&&(e=s.createElement(f.default,{msg:r.unsafe(),position:p.MsgPosition.SINGLE,key:"icon-context",ref:this.setRefContext,onToggle:e=>{this.onMenu(e)},isGroupedSticker:!0})),this.props.isFocused&&(t=s.createElement(y.WhileFocusedListener,{parent:this})),this.state.contextMenu&&(a=s.createElement(v.default,{displayName:"MsgContextMenu",escapable:!0,popable:!0,requestDismiss:this.closeContextMenu},s.createElement(g.default,{contextMenu:this.state.contextMenu}))),s.createElement("div",{className:u.default.stickerItem,onMouseOver:this.mouseOver,onMouseDown:this.mouseDown,onMouseUp:this.mouseOver,onMouseLeave:this.mouseDown},s.createElement(_.default,{mediaData:r.mediaData,msg:r,forwardRef:this.props.forwardRef,animateOnView:!0}),s.createElement("div",{className:u.default.stickerMenu},s.createElement(E.default,{transitionName:i},e)),a,t)}}var C=(0,h.default)(S);t.default=C},44641:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return s.createElement("div",{className:o.default.outerContainer,onClick:e.onClick},s.createElement("div",{className:o.default.innerContainer},s.createElement(n.default,{onChange:e.onClick,checked:e.checked})))};var s=i(a(2784)),n=r(a(21403)),o=r(a(91276))},47687:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(20458)),l=i(a(92969)),d=i(a(12708)),u=i(a(79711)),c=i(a(18120)),h=i(a(56823)),f=i(a(7341)),p=i(a(39822)),m=i(a(17957)),_=i(a(20227)),v=i(a(71726)),g=i(a(81031)),E=i(a(20299)),y=i(a(40207)),S=a(64658),C=i(a(20385));class T extends n.PureComponent{constructor(...e){super(...e),this._onOpenInvite=()=>{var{msg:e}=this.props;u.default.openModal(n.createElement(h.default,{msg:e}))}}render(){var{msg:e,displayAuthor:t}=this.props,a=e.isGroupsV4InviteExpired,r=e.inviteGrpName;if(!c.default.supportsFeature(c.default.F.GROUPS_V_4_JOIN_PERMISSION))return n.createElement(p.default,{msg:(0,S.unproxy)(e),displayAuthor:t});var i,u=n.createElement(g.default,{size:49,thumb:this.props.msg.inviteGrpJpegThum}),h=e.comment?n.createElement("div",{className:f.default.caption},n.createElement(d.default,{msg:e.unsafe(),spacer:!0,trusted:e.isTrusted()})):null,y=a?null:n.createElement(o.default,{items:[{label:this.props.msg.isSentByMe?m.default.t(772):m.default.t(737),onClick:this._onOpenInvite}],theme:e.comment?void 0:"no-divider"}),T=!a||!h,M=T?n.createElement("div",{className:f.default.meta},n.createElement(v.default,{msg:e})):null,b=e.comment?m.default.t(770):n.createElement(E.default,{msg:e.unsafe()},m.default.t(770));if(a){var P=h?m.default.t(767):n.createElement(E.default,{msg:e.unsafe()},m.default.t(767));i=n.createElement("div",{className:f.default.status},P)}return n.createElement(C.default,{msg:e,displayAuthor:t,hideMeta:T},n.createElement(l.default,{contact:e.senderObj,msg:e.unsafe(),className:(0,s.default)(f.default.container,{[f.default.expired]:a,[f.default.noCaption]:!h})},n.createElement("div",{className:f.default.linkPreview},n.createElement(_.default,{description:b,invite:!0,isSentByMe:e.isSentByMe,onClick:a?void 0:this._onOpenInvite,thumbnail:u,title:r,theme:a?"extended":void 0})),i,h,M),y)}}T.CONCERNS={msg:["id","inviteCode","inviteCodeExp","inviteGrp","inviteGrpName","inviteGrpJpegThum","senderObj","comment","isSentByMe","isGroupMsg","isPSA","isGroupsV4InviteExpired"]};var M=(0,y.default)(T,T.CONCERNS);t.default=M},39822:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(17957)),o=r(a(90277)),l=r(a(20385));class d extends s.Component{render(){var e=this.props.msg;return s.createElement(l.default,{msg:e,displayAuthor:this.props.displayAuthor},s.createElement(o.default,{iconName:"unknown",msg:e.unsafe()},n.default.t(475)))}}t.default=d},21406:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.SIZE=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(50935)),l=i(a(56117)),d=i(a(44977)),u=i(a(12396)),c=a(27703),h=i(a(53632)),f=i(a(3564)),p=i(a(20642)),m=a(66615),{getGlyphId:_,getGlyphPath:v,markGlyphCached:g,isGlyphCached:E}=u.default,y=c.LARGE_EMOJI_SIZE;t.SIZE=y;var S="large",C="xlarge";class T extends n.Component{constructor(e){super(e),this._onHighResLoaded=()=>{var e=_(this.props.emoji);null!=e&&g(e),this.setState({highResLoaded:!0})};var t=_(e.emoji),a=Boolean(null!=t&&E(t));this.state={highResLoaded:a}}componentDidMount(){this.props.listeners.add(window,"dpichange",(()=>{var e=_(this.props.emoji),t=Boolean(null!=e&&E(e));this.setState({highResLoaded:t})}))}render(){var{emoji:e,size:t,animation:a,element:r,selectable:i}=this.props,{highResLoaded:u}=this.state,c=_(e);if(null==c)return null;var p,g=(0,s.default)({[f.default.medium]:t===y.MEDIUM,[f.default.large]:t===y.LARGE,[f.default.xlarge]:t===y.XLARGE});p=t===y.XLARGE?C:S;var E=v(c,p)[l.default.currentRes];if(u&&a)return n.createElement(r,{className:f.default.animation},n.createElement(m.SelectableImg,{alt:e,className:(0,s.default)(f.default.highRes,g),draggable:!1,plainText:e,selectable:Boolean(i),src:o.default.ONE_BY_ONE_TRANS_GIF}),n.createElement(h.default,{className:(0,s.default)(f.default.highRes,g,f.default.heartbeat),draggable:!1,selectable:!1,src:E}));var T=u?void 0:n.createElement(d.default,{key:"low-res",className:(0,s.default)(f.default.lowRes,g),emoji:e,selectable:i}),M=n.createElement(d.default,{key:"high-res",className:(0,s.default)(f.default.highRes,g,{[f.default.invisible]:!u}),emoji:e,selectable:i,src:E,onLoad:this._onHighResLoaded});return n.createElement("span",{className:f.default.wrapper},T,M)}}T.defaultProps={animation:!1,element:"div",size:y.MEDIUM};var M=(0,p.default)(T);t.default=M},9389:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(71718)),n=r(a(2784)),o=i(a(79711)),l=(i(a(50935)),a(35387)),d=i(a(20227)),u=i(a(40207)),c=i(a(82338)),h=i(a(74185));class f extends n.PureComponent{constructor(...e){super(...e),this.onLinkClick=()=>{var e=this.props.msg.matchedText;(0,l.openExternalLink)(e)},this._onSuspiciousLinkClick=e=>{o.default.openModal(n.createElement(c.default,{link:e}))}}render(){var{msg:e,displayType:t,invite:a}=this.props,r=null;if(!a){r=h.default.hostname(e.canonicalUrl||e.matchedText);try{r=s.default.toUnicode(r)}catch(e){}}var i,o,l,u=e.getSuspiciousLinks().filter((({url:t})=>e.matchedText===t));return u.length?l=()=>this._onSuspiciousLinkClick(u[0]):(i=e.description,o=e.thumbnail,l=this.onLinkClick),n.createElement(d.default,{canonicalUrl:r,description:i,displayType:t,invite:a,onClick:l,isSentByMe:e.isSentByMe,thumbnailJpeg:o,title:e.title,star:e.star})}}f.CONCERNS={msg:["thumbnail","title","description","canonicalUrl","matchedText","isSentByMe","star"]};var p=(0,u.default)(f,f.CONCERNS);t.default=p},86292:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{displayAuthor:t,msg:a}=e,r=a.list;if(!r)return null;var i=(0,o.Conversation)({mentions:a.mentionMap(),links:a.getLinks(),selectable:!0,trusted:!0}),m=s.createElement(d.default,{selectable:!0,text:r.title,ellipsify:!0,className:c.default.title,formatters:i,direction:a.dir}),S=s.createElement(d.default,{text:r.description,dirMismatch:a.rtl!==u.default.isRTL(),direction:a.dir,inferLinesDirection:!0,formatters:i}),C=s.createElement("div",{className:c.default.meta},s.createElement(p.default,{msg:a})),T=s.createElement("div",{className:c.default.footer},s.createElement(d.default,{text:a.footer,direction:a.dir})),M=s.createElement("div",{className:c.default.actionContainer,onClick:e=>{e&&e.stopPropagation(),function(e){var{list:{listType:t}}=e;if(null==t)return;switch(t){case l.ListMessageListType.SINGLE_SELECT:n.default.openModal(s.createElement(h.default,{msg:e}));break;case l.ListMessageListType.PRODUCT_LIST:!function(e){var t=y.toString(),a=e.isForwarded?e.businessOwnerJid:e.from.toString({legacy:!0});if(null==e.list.productListInfo||null==a)return;var r=v.default.getOrAdd(e.id,e.list.productListInfo,a);null!=r&&n.default.openDrawerRight(s.createElement(_.default,{chat:e.chat,catalogOwnerJid:a,productListId:r.id,sessionId:t}),"slide-left")}(e)}}(a)},role:"button"},s.createElement("div",{className:c.default.action,title:r.buttonText},s.createElement(g.default,{name:"list-msg-icon",className:c.default.icon}),r.buttonText));return s.createElement("div",{className:c.default.bubble},s.createElement(E.default,{msg:a,displayAuthor:t,hideMeta:!0},s.createElement("div",{className:c.default.container},m,s.createElement(f.default,{msg:a.unsafe(),"data-id":a.id},S,C),a.footer?T:null,M)))};var s=i(a(2784)),n=r(a(79711)),o=a(18164),l=a(28703),d=r(a(91581)),u=r(a(17957)),c=r(a(33545)),h=r(a(88798)),f=r(a(97816)),p=r(a(71726)),m=r(a(55043)),_=r(a(13531)),v=r(a(90567)),g=r(a(82631)),E=r(a(20385)),y=new m.default},18541:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MSG_HEIGHT=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(71874)),l=i(a(92969)),d=i(a(12708)),u=i(a(19899)),c=i(a(79711)),h=i(a(46478)),f=i(a(18120)),p=i(a(17957)),m=i(a(20642)),_=i(a(59354)),v=i(a(86635)),g=i(a(10979)),E=i(a(43562)),y=i(a(71726)),S=a(57052),C=i(a(40207)),T=i(a(82631));t.MSG_HEIGHT=220;class M extends n.Component{constructor(e){super(e),this._openLiveLocationDrawer=()=>{var{chat:e,sender:t}=this.props.msg;c.default.liveLocationDrawer(e,t)},this._openExpiredLocationDrawer=()=>{c.default.expiredLocationDrawer(this.props.msg.unsafe())},this._stopSharing=()=>{var{chat:e}=this.props.msg;c.default.openModal(n.createElement(g.default,{chat:e}))},this._onMapLoad=()=>{this.setState({mapLoaded:!0})},this.state={mapLoaded:!1}}_getExpiration(){var{msg:{t:e,shareDuration:t}}=this.props;return null==t?e:e+t}isExpired(){return u.default.globalUnixTime()>=this._getExpiration()}render(){var{msg:e,trusted:t,displayAuthor:a,quotedMsg:r}=this.props;if(f.default.supportsFeature(f.default.F.LIVE_LOCATIONS)){var i=a&&!e.isSentByMe&&e.isGroupMsg?n.createElement("div",{className:_.default.author},n.createElement(o.default,{msg:e,contact:e.senderObj})):null,c=r?n.createElement("div",{className:_.default.quote},r):null,m=this.isExpired(),g=m&&void 0!==e.finalLat&&void 0!==e.finalLng,C=e.lat,M=e.lng,b=m?void 0:this._openLiveLocationDrawer;f.default.supportsFeature(f.default.F.LIVE_LOCATIONS_FINAL)&&(b||(b=this._openExpiredLocationDrawer),g&&(C=e.finalLat,M=e.finalLng));var P,A,I,O,N=n.createElement("div",{className:_.default.thumb,onClick:b,style:{height:150}},n.createElement("div",{className:_.default.map},n.createElement(E.default,{lat:C,lng:M,width:270,height:150,className:_.default.thumbBody,linkify:!1,showMarker:!1,onLoad:this._onMapLoad})),n.createElement("div",{className:(0,s.default)(_.default.avatar,{[_.default.hidden]:!this.state.mapLoaded})},n.createElement(h.default,{id:e.sender,size:40,border:!0})),n.createElement("div",{className:_.default.overlay})),w=this._getExpiration(),D=m?p.default.t(856):p.default.t(862,{time:u.default.timestampStr(w),_plural:u.default.timestampHour(w)}),R=n.createElement("div",{className:_.default.status,onClick:b},n.createElement("span",{className:_.default.statusIcon},n.createElement(T.default,{name:(0,S.liveLocationIcon)(!m),display:"inline"})),n.createElement("span",{className:_.default.statusText},D)),L=e.comment?n.createElement("div",{className:_.default.caption},n.createElement(d.default,{msg:e.unsafe(),trusted:t})):null,k=n.createElement("div",{className:_.default.meta},n.createElement(y.default,{msg:e}));if(!m)e.isSentByMe?(A=this._stopSharing,I=_.default.stopLocation,O=p.default.t(879)):(A=this._openLiveLocationDrawer,I=_.default.viewLocation,O=p.default.t(886)),P=n.createElement("div",{className:_.default.actionButton,onClick:A},n.createElement("span",{className:I},O));return n.createElement("div",{className:(0,s.default)({[_.default.expired]:m,[_.default.hasCaption]:!!e.comment})},n.createElement(l.default,{className:(0,s.default)(_.default.container,{[_.default.clickable]:!!b}),contact:e.senderObj,msg:e.unsafe()},i,c,N,R,L,k),P)}return n.createElement(v.default,{msg:e,displayAuthor:a,quotedMsg:r})}}M.CONCERNS={msg:["chat","comment","dir","finalLat","finalLng","isGroupMsg","isPSA","isSentByMe","lat","lng","rtl","sender","senderObj","shareDuration","t"]};var b=(0,m.default)((0,C.default)(M,M.CONCERNS));t.default=b},86635:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(72779)),n=r(a(2784)),o=a(18164),l=i(a(91581)),d=i(a(17957)),u=i(a(39002)),c=i(a(97816)),h=i(a(90277)),f=a(62761),p=a(57052),m=i(a(20385));class _ extends n.Component{render(){var e,t=this.props.msg,a=(0,o.Conversation)({mentions:t.mentionMap(),links:t.getLinks(),selectable:!0,trusted:t.isTrusted()}),r=t.comment?n.createElement(c.default,{msg:t.unsafe()},n.createElement(l.default,{text:t.comment,formatters:a,selectable:!0,dirMismatch:t.rtl!==d.default.isRTL(),direction:t.dir})):null;if(this.props.quotedMsg){var i=(0,s.default)(u.default.quote,{[u.default.hasAuthor]:this.props.displayAuthor&&!t.isSentByMe&&t.isGroupMsg,[u.default.forwarded]:(0,f.showForwarded)(t)});e=n.createElement("div",{className:i},this.props.quotedMsg)}return n.createElement(m.default,{msg:t,displayAuthor:this.props.displayAuthor},e,n.createElement("div",{className:r?u.default.hasText:u.default.noText},n.createElement(h.default,{hasCaption:!!r,iconName:(0,p.liveLocationIcon)(!1),msg:this.props.msg.unsafe(),theme:"small-icon"},d.default.t(476))),r)}}t.default=_},33788:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.PREVIEW_HEIGHT=void 0;var s=i(a(19976)),n=i(a(45455)),o=i(a(72779)),l=r(a(2784)),d=i(a(71874)),u=i(a(92969)),c=i(a(12708)),h=i(a(131)),f=i(a(4336)),p=i(a(25085)),m=i(a(43562)),_=a(65935),v=i(a(97816)),g=i(a(71726)),E=a(62761),y=a(66615),S=i(a(40207)),C=i(a(20783)),T=i(a(900)),M=i(a(74185));function b(){var e=(0,s.default)(["Bad url: ",""]);return b=function(){return e},e}t.PREVIEW_HEIGHT=150;var P=["foursquare.com","facebook.com","maps.google.com"];class A extends l.PureComponent{constructor(e){super(e),this.loc=()=>{var e=this.props.msg.get("loc");if(e)return 2===(e=e.split("\n")).length?{name:e[0],addr:e[1]}:{name:e}},this._getLocationDetails=e=>{var t,a,r,{msg:i}=this.props,s=this.loc(),d=i.clientUrl||e,u=M.default.hostname(d),c=(0,n.default)(P.filter((e=>u.includes(e)))),h=c?l.createElement("span",{className:p.default.link},u):null,f=M.default.isHttps(d);if(!f)return d.toLowerCase().startsWith("javascript:")&&(__LOG__(4,void 0,new Error,!0)(b(),d),SEND_LOGS("URL error")),null;if(!c&&f&&s&&!d.includes("javascript")){t=s.name?l.createElement(y.SelectableLink,{className:p.default.title,dir:"auto",href:d,plainText:"".concat(s.name,"\n").concat(d),selectable:!0,target:"_blank",title:s.name},s.name):null;var m=(0,o.default)(p.default.address,{[p.default.hasURL]:h});a=s.addr?l.createElement(y.SelectableDiv,{className:m,selectable:!0,title:s.addr},s.addr):null}return(t||a||h)&&(r=l.createElement("div",{className:p.default.text},l.createElement(v.default,{msg:i.unsafe(),"data-id":i.id},t,a,h))),r},this.onClick=e=>{e.stopPropagation()}}render(){var e,t,a=this.props.msg,{lat:r,lng:i}=a,s=this.loc(),n=s&&s.name,v=(0,_.getMapUrl)(r,i,n),S=a.isDynamicReplyButtonsMsg?null:this._getLocationDetails(v),M=null!=S||a.supportsMessageFooter&&a.hasBodyOrFooter?null:l.createElement(T.default,null),b=this.props.displayAuthor&&!a.isSentByMe&&a.isGroupMsg,P=(0,E.showForwarded)(a),A=b?l.createElement("div",{className:p.default.author},l.createElement(d.default,{msg:a,contact:a.senderObj})):null,I=P?l.createElement(f.default,{msg:a.unsafe(),className:p.default.forwardedIndicator}):null,O=(0,o.default)(p.default.container,{[p.default.hasCaption]:S,[p.default.hasAuthor]:b,[p.default.forwarded]:P,[p.default.ctwaContainerWidth]:null!=a.ctwaContext}),N=this.props.quotedMsg?l.createElement("div",{className:p.default.quote},this.props.quotedMsg):null;return a.supportsMessageFooter&&(e=a.caption?l.createElement("div",{className:p.default.caption},l.createElement(c.default,{msg:a.unsafe(),spacer:!a.footer})):null,t=l.createElement(C.default,{dir:a.dir,footer:a.footer,isShown:a.supportsMessageFooter,msg:a.unsafe(),rtl:a.rtl,type:a.type,trusted:this.props.trusted})),l.createElement("div",null,l.createElement(u.default,{className:O,contact:a.senderObj,msg:a.unsafe()},A,I,N,l.createElement(h.default,{msg:a.unsafe(),wrapperClass:p.default.ctwaContext}),l.createElement(y.SelectableDiv,{className:p.default.thumb,onClick:this.onClick,plainText:v,selectable:!0,style:{height:150}},l.createElement(m.default,{lat:a.lat,lng:a.lng,width:a.ctwaContext?330:270,height:150,name:n,className:p.default.thumbBody}),M),S,e,t,l.createElement("div",{className:p.default.meta},l.createElement(g.default,{msg:a}))))}}A.CONCERNS={msg:["caption","clientUrl","dir","footer","id","isGroupMsg","isSentByMe","lat","lng","rtl","senderObj","type","ctwaContext","supportsMessageFooter","isDynamicReplyButtonsMsg","hasBodyOrFooter"]};var I=(0,S.default)(A,A.CONCERNS);t.default=I},67212:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=!1!==e.displayAuthor?!e.msg.isSentByMe&&e.msg.isGroupMsg:null,a=(0,h.showForwarded)(e.msg),r=t?n.createElement("div",{className:u.default.author},n.createElement(o.default,{msg:e.msg,contact:e.msg.senderObj})):null,i=e.displayType===l.default.DISP_TYPE.GALLERY||e.hideMeta?null:n.createElement("div",{className:u.default.meta},n.createElement(c.default,{msg:e.msg})),f=a?n.createElement(d.default,{msg:e.msg.unsafe(),className:u.default.forwardedIndicator}):null,p=e.quotedMsg?n.createElement("div",{className:u.default.quote},e.quotedMsg):null,m=(0,s.default)(u.default.bubble,{[u.default.forwarded]:a,[u.default.hasAuthor]:t,[u.default.hasCaption]:e.hasCaption,[u.default.isPSA]:e.msg.isPSA});return n.createElement("div",{className:m},r,f,p,e.children,i)};var s=i(a(72779)),n=r(a(2784)),o=i(a(71874)),l=i(a(50935)),d=i(a(4336)),u=i(a(6982)),c=i(a(71726)),h=a(62761)},21644:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.isMediaTypeWithImage=u,t.default=void 0;var s=i(a(2784)),n=r(a(50935)),o=r(a(48726)),l=r(a(19125)),d=r(a(40207));function u(e){return e.type===n.default.MSG_TYPE.IMAGE||e.type===n.default.MSG_TYPE.PRODUCT}class c extends s.PureComponent{constructor(...e){super(...e),this._renderImage=(e,t)=>s.createElement("div",{className:o.default.preview,key:t||null,style:{backgroundImage:"url(".concat(e,")")}}),this._renderPreview=()=>{var e,t,a,r,{mediaData:i}=this.props,s=[],n=null==i||null===(e=i.preview)||void 0===e||null===(t=e.url)||void 0===t?void 0:t.call(e);n&&s.push(this._renderImage(n,"preview"));var o=null==i||null===(a=i.fullPreviewData)||void 0===a||null===(r=a.url)||void 0===r?void 0:r.call(a);return o&&s.push(this._renderImage(o,"fullPreview")),s.length?s:null}}render(){var{mediaData:e}=this.props;return u(e)?s.createElement(l.default,{key:e.filehash,mediaData:e,placeholderRenderer:this._renderPreview,renderProgressively:!0},this._renderImage):this._renderPreview()}}c.CONCERNS={mediaData:["filehash","fullPreviewData","mediaStage","preview","type"]};var h=(0,d.default)(c,c.CONCERNS);t.default=h},19773:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(32960)),l=i(a(23109)),d=i(a(50935)),u=a(12023),c=i(a(17957)),h=i(a(66676)),f=a(62761),p=i(a(40207)),m=i(a(82631)),_=i(a(2220)),v=a(89526),g=a(80084),E="FRONT",y="SINGLE";class S extends n.PureComponent{constructor(...e){super(...e),this.setRefContext=e=>this.refContext=e,this.handleMouseDown=e=>{e.preventDefault(),this.props.onToggle(e.target)}}handleClick(e){e.stopPropagation()}render(){var{msg:e,position:t,isGroupedSticker:a}=this.props,{isSentByMe:r,isGroupMsg:i,type:p}=e,_=!!e.quotedMsg,S=!e.quotedMsg&&e.quotedRemoteJid,C=(0,f.showForwarded)(e),T=S?null:r?h.default.contextOut:h.default.contextIn,M=p===d.default.MSG_TYPE.DOCUMENT&&!e.body,b=p===d.default.MSG_TYPE.DOCUMENT&&e.body,P=p===d.default.MSG_TYPE.LOCATION,A=e.linkPreview&&(0,u.isParsableOnlineVideoURL)(e.richPreviewType,e.matchedText,e.doNotPlayInline),I=b||P||_||p===d.default.MSG_TYPE.PAYMENT||A||p===d.default.MSG_TYPE.PRODUCT||e.ctwaContext||e.isMedia&&!e.isViewOnce&&p!==d.default.MSG_TYPE.AUDIO||e.isViewOnce&&!r&&(0,v.isUnviewed)(e.safe()),O=!1;i&&(O=!r&&(t===E||t===y||_||I||e.linkPreview));var N,w,D=e.getSuspiciousLinks().length>0,R=I&&!O&&!D&&!C,L=p===d.default.MSG_TYPE.CHAT&&e.linkPreview&&!A&&!O&&!C&&!D&&e.isTrusted(),k=(0,s.default)(R?h.default.contextIconMedia:h.default.contextIcon),x=p===d.default.MSG_TYPE.PTT||p===d.default.MSG_TYPE.AUDIO,F=e.type===d.default.MSG_TYPE.MULTI_VCARD&&!_&&!O&&!C,G=p===d.default.MSG_TYPE.GROUPS_V4_INVITE,U=p===d.default.MSG_TYPE.ORDER,B=(L||M||G||U)&&!O&&!C&&!_,j=p===d.default.MSG_TYPE.STICKER&&!e.ctwaContext&&!_&&(a||!e.isGroupMsg||e.isGroupMsg&&e.isSentByMe);if(j){var V=l.default.get("defaultPreference"),H=V?V.wallpaperColor:d.default.DEFAULT_CHAT_WALLPAPER;w=n.createElement("div",{className:h.default.badge,style:{backgroundColor:H,opacity:.9}}),N=(0,g.invertTransparentWallpaperColors)(this.context.theme,H)}var W=!(p!==d.default.MSG_TYPE.CHAT||_||O||C||A||!e.dir||e.rtl===c.default.isRTL()),K=(p===d.default.MSG_TYPE.PTT||p===d.default.MSG_TYPE.AUDIO)&&c.default.isRTL()&&!O,Y=(0,s.default)(T,R?c.default.isRTL()?h.default.contextMediaRtl:h.default.contextMediaLtr:null,{[h.default.context]:!(R||L)||B,[h.default.contextMedia]:R,[h.default.contextPtt]:x,[h.default.contextPttFix]:x&&!_&&!O,[h.default.contextSpecial]:B,[h.default.contextDoc]:M&&!O&&!C&&!_,[h.default.contextMediaDocument]:b,[h.default.contextMultiVcard]:F,[h.default.contextInverse]:W||K,[h.default.contextStickerAuthor]:p===d.default.MSG_TYPE.STICKER&&!j,[h.default.contextStickerTransparent]:j,[h.default.contextStickerInverse]:j&&N});return n.createElement("div",{className:Y},n.createElement("div",{"data-a8n":o.default.key("icon-down-context"),"data-js-context-icon":!0,className:k,ref:this.setRefContext,onMouseDown:this.handleMouseDown,onClick:this.handleClick},n.createElement(m.default,{name:"down-context"})),w)}}S.contextType=_.default,S.CONCERNS={msg:["linkPreview","matchedText","dir","rtl","isMedia","isSentByMe","isGroupMsg","isViewOnce","type","quotedMsg","body","quotedRemoteJid","richPreviewType","doNotPlayInline","ctwaContext"]};var C=(0,p.default)(S,S.CONCERNS);t.default=C},13077:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(71874)),l=i(a(12708)),d=i(a(50935)),u=i(a(4336)),c=i(a(55168)),h=i(a(71726)),f=a(62761),p=i(a(20783)),m=i(a(47609));var _=function({children:e,displayType:t,hideCaption:a=!1,msg:r,quotedMsg:i,showAuthor:_=!1,trusted:v}){var{caption:g,dir:E,footer:y,isSentByMe:S,isGroupMsg:C,rtl:T,senderObj:M,supportsMessageFooter:b,type:P}=(0,m.default)(r,["caption","dir","footer","isFromTemplate","isSentByMe","isGroupMsg","rtl","senderObj","supportsMessageFooter","type"]),A=_&&!S&&C,I=!a&&g,O=(0,f.showForwarded)(r);return n.createElement(n.Fragment,null,A?n.createElement("div",{className:(0,s.default)(c.default.author,{[c.default.hasForwarded]:O})},n.createElement(o.default,{msg:r,contact:M})):null,O?n.createElement(u.default,{msg:r.unsafe(),className:(0,s.default)(c.default.forwardedIndicator,{[c.default.hasAuthor]:A})}):null,null!=i?n.createElement("div",{className:c.default.quote},i):null,e,I?n.createElement("div",{className:c.default.caption},n.createElement(l.default,{msg:r.unsafe(),trusted:v,spacer:!y})):null,b?n.createElement(p.default,{dir:E,footer:y,isShown:b,msg:r.unsafe(),rtl:T,type:P,trusted:v}):null,n.createElement("div",{className:(0,s.default)(c.default.meta,{[c.default.hasCaption]:I})},n.createElement(h.default,{msg:r,theme:t===d.default.DISP_TYPE.GALLERY?"date":void 0})))};t.default=_},97526:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MsgPosition=void 0;t.MsgPosition={FRONT:"FRONT",MID:"MID",END:"END",SINGLE:"SINGLE"}},97816:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,{broadcast:a,isFromTemplate:r,isSentByMe:i,labels:c,star:h,type:f}=(0,u.default)(e.msg,["broadcast","isFromTemplate","isSentByMe","labels","star","type"]),p={},m=null===(t=e.spacer)||void 0===t||t;if(m){var _;switch(f){case o.default.MSG_TYPE.REVOKED:_=[a,c&&c.length&&(0,l.canDisplayLabel)()];break;default:_=[a,i,c&&c.length&&(0,l.canDisplayLabel)(),h]}var v=_.filter(Boolean).length;v>0&&(p={[d.default.icons1]:1===v,[d.default.icons2]:2===v,[d.default.icons3]:3===v,[d.default.icons4]:v>=4})}return n.createElement("div",{className:(0,s.default)(e.className,{[d.default.text]:!0,[d.default.placeholder]:"placeholder"===e.theme,[d.default.template]:r})},e.children,m&&n.createElement("span",{className:(0,s.default)(d.default.spacer,p)}))};var s=i(a(72779)),n=r(a(2784)),o=i(a(50935)),l=a(75459),d=i(a(3456)),u=i(a(47609))},71726:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.MetaFrame=y,t.default=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(19899)),l=i(a(79711)),d=i(a(50935)),u=i(a(17957)),c=i(a(49984)),h=i(a(77602)),f=i(a(40207)),p=a(64658),m=i(a(76841)),_=i(a(82631)),v=i(a(77626)),g=d.default.MSG_TYPE;class E extends n.PureComponent{constructor(...e){super(...e),this.openInfoDrawer=()=>{l.default.msgInfoDrawer((0,p.unproxy)(this.props.msg.unsafe()))}}render(){var e=this.props.msg,t=this.props.theme,a=[],r=(e.type===g.IMAGE||e.type===g.VIDEO)&&!e.caption&&!e.isViewOnce||e.type===g.LOCATION&&!e.isLive&&!e.get("loc");e.star&&!e.asRevoked&&a.push(n.createElement(_.default,{name:"star","aria-label":" ".concat(u.default.t(27)," ")})),e.broadcast&&a.push(n.createElement(_.default,{name:"broadcast"}));var i=e.isSentByMe&&e.type!==g.REVOKED,s=null;i&&(s=n.createElement(m.default,{msg:this.props.msg.unsafe()}));var l=e.labels&&e.labels.length>0?n.createElement(c.default,{labels:e.labels,showName:!1}):null;return n.createElement(y,{icons:a,labels:l,light:r,onClick:i?this.openInfoDrawer:null,status:s},"date"!==t?e.t?o.default.timestampStr(e.t):null:e.t?o.default.relativeStr(e.t):null)}}function y(e){var t=e.icons&&e.icons.length>0?e.icons.map(((e,t)=>n.createElement("div",{className:h.default.icon,key:"icon-".concat(t)},e))):null,a=e.labels?n.createElement("div",{className:h.default.labels},e.labels):null,r=e.status?n.createElement("div",{className:h.default.status},e.status):null,i=(0,s.default)(h.default.meta,{[h.default.metaLight]:e.light,[h.default.chromeFix]:v.default.os===d.default.OS_TYPE.MAC&&v.default.browser===d.default.BROWSER_TYPE.CHROME&&v.default.osVersion.includes("10.15")});return n.createElement("div",{className:i,onClick:e.onClick,role:e.onClick?"button":null},t,a,n.createElement("span",{className:h.default.timestamp,dir:"auto"},e.children),r)}E.CONCERNS={msg:["broadcast","caption","isLive","asRevoked","isSentByMe","isViewOnce","labels","star","t","type","subtype"]};var S=(0,f.default)(E,E.CONCERNS);t.default=S},20564:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,s.default)(l.default.container,{[l.default.isChecked]:e.checked,[l.default.gallery]:"gallery"===e.msgTheme});return n.createElement("div",{className:t,onClick:e.onClick},n.createElement(o.default,{onChange:e.onClick,checked:e.checked,theme:e.theme}))};var s=i(a(72779)),n=r(a(2784)),o=i(a(21403)),l=i(a(96515))},38751:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MsgComponent=void 0;var s=i(a(19976)),n=i(a(70417)),o=r(a(2784)),l=i(a(97125)),d=i(a(17058)),u=i(a(50935)),c=i(a(96576)),h=i(a(84700)),f=i(a(47687)),p=a(13414),m=i(a(86292)),_=i(a(18541)),v=i(a(33788)),g=i(a(11412)),E=a(57556),y=i(a(71748)),S=i(a(673)),C=i(a(80606)),T=i(a(62814)),M=i(a(41434)),b=i(a(15442)),P=i(a(36786)),A=i(a(74837)),I=i(a(93456)),O=i(a(77674)),N=i(a(56089)),w=i(a(40207)),D=a(64658),R=i(a(38906)),L=i(a(29152)),k=i(a(70846)),x=i(a(26691)),F=i(a(99127)),G=a(84990),U=i(a(92276)),B=i(a(33426));function j(){var e=(0,s.default)(["messageList:render Unknown message type: ",""]);return j=function(){return e},e}class V extends o.PureComponent{constructor(...e){super(...e),this._getParsedVcardList=(0,g.default)((({vcardList:e})=>e?e.map((e=>(0,n.default)((0,n.default)({},e),{},{parsedVcard:(0,G.parseVcard)(e.vcard)}))):[]))}getQuotedMsg(){var e,{displayType:t,msg:a,chat:r}=this.props;if(t!==u.default.DISP_TYPE.GALLERY){var i=a.quotedMsgObj();if(i)e=o.createElement(I.default,{msg:i,key:i.id.toString(),rootMsg:(0,D.unproxy)(a.safe()),displayType:t,theme:"conversation",chat:(0,D.unproxy)(r),t:a.t});else{var s=a.getQuotedMsgAdminGroupJid();s&&(e=o.createElement(O.default,{quotedGroupJid:s}))}}return e}getRef(){return this.ref}render(){var{chat:e,displayAuthor:t,displayType:a,isMsgVisible:r,msg:i}=this.props,s=i.safe();if(null!=s.asViewOnce){var n=s.asViewOnce;return o.createElement(B.default,{displayType:a,displayAuthor:t,mediaData:n.mediaData,msg:n,quotedMsg:this.getQuotedMsg(),trusted:i.isTrusted()})}switch(s.type){case u.default.MSG_TYPE.CHAT:case u.default.MSG_TYPE.LIST_RESPONSE:case u.default.MSG_TYPE.BUTTONS_RESPONSE:return o.createElement(L.default,{msg:(0,D.unproxy)(s),contact:s.senderObj,ref:(0,p.GetRef)((e=>{this.ref=e})),quotedMsg:this.getQuotedMsg(),trusted:s.isTrusted(),displayType:a,displayAuthor:t});case u.default.MSG_TYPE.IMAGE:return o.createElement(b.default,{msg:s,displayType:a,mediaData:s.mediaData,ref:(0,p.GetRef)((e=>{this.ref=e})),quotedMsg:this.getQuotedMsg(),isMsgVisible:r,trusted:s.isTrusted(),displayAuthor:t});case u.default.MSG_TYPE.PRODUCT:return o.createElement(P.default,{msg:s,mediaData:s.mediaData,displayAuthor:t,trusted:s.isTrusted(),onProductClick:this.props.onProductClick,quotedMsg:this.getQuotedMsg()});case u.default.MSG_TYPE.GROUP_NOTIFICATION:case u.default.MSG_TYPE.GP2:case u.default.MSG_TYPE.BROADCAST_NOTIFICATION:case u.default.MSG_TYPE.NOTIFICATION:case u.default.MSG_TYPE.NOTIFICATION_TEMPLATE:case u.default.MSG_TYPE.E2E_NOTIFICATION:case u.default.MSG_TYPE.CALL_LOG:return o.createElement(S.default,{contact:(0,D.unproxy)(e).contact,msg:s,ref:(0,p.GetRef)((e=>{this.ref=e}))});case u.default.MSG_TYPE.AUDIO:return o.createElement(l.default,{msg:s,mediaData:s.mediaData,quotedMsg:this.getQuotedMsg(),displayAuthor:t,displayType:a,ref:(0,p.GetRef)((e=>{this.ref=e}))});case u.default.MSG_TYPE.VIDEO:return!0===s.isGif?o.createElement(h.default,{displayAuthor:t,displayType:a,isMsgVisible:r,maxWidth:this.props.maxWidth,mediaData:s.mediaData,msg:s,quotedMsg:this.getQuotedMsg(),ref:(0,p.GetRef)((e=>{this.ref=e})),trusted:s.isTrusted()}):o.createElement(U.default,{displayAuthor:t,displayType:a,hover:this.props.hover,isMsgVisible:r,mediaData:s.mediaData,msg:s,quotedMsg:this.getQuotedMsg(),ref:(0,p.GetRef)((e=>{this.ref=e})),trusted:s.isTrusted()});case u.default.MSG_TYPE.VCARD:return o.createElement(x.default,{msg:s,vcard:s.vcard,ref:(0,p.GetRef)((e=>{this.ref=e})),quotedMsg:this.getQuotedMsg(),displayType:a,displayAuthor:t,onMessageClick:this.props.onMessageClick});case u.default.MSG_TYPE.MULTI_VCARD:return o.createElement(y.default,{msg:s,vcardList:this._getParsedVcardList({vcardList:this.props.msg.vcardList}),ref:(0,p.GetRef)((e=>{this.ref=e})),quotedMsg:this.getQuotedMsg(),displayType:a,displayAuthor:t});case u.default.MSG_TYPE.GROUPS_V4_INVITE:return o.createElement(f.default,{msg:s,ref:(0,p.GetRef)((e=>{this.ref=e})),displayAuthor:t});case u.default.MSG_TYPE.LOCATION:return!0===s.isLive?o.createElement(_.default,{msg:(0,D.unproxy)(s),ref:(0,p.GetRef)((e=>{this.ref=e})),quotedMsg:this.getQuotedMsg(),trusted:s.isTrusted(),displayAuthor:t}):o.createElement(v.default,{msg:(0,D.unproxy)(s),ref:(0,p.GetRef)((e=>{this.ref=e})),quotedMsg:this.getQuotedMsg(),trusted:s.isTrusted(),displayAuthor:t});case u.default.MSG_TYPE.PAYMENT:return o.createElement(M.default,{msg:s,ref:(0,p.GetRef)((e=>{this.ref=e})),quotedMsg:this.getQuotedMsg(),displayAuthor:t});case u.default.MSG_TYPE.PTT:return o.createElement(A.default,{msg:s,mediaData:s.mediaData,quotedMsg:this.getQuotedMsg(),displayAuthor:t,displayType:a,ref:(0,p.GetRef)((e=>{this.ref=e})),getSequentialMsg:this.props.getSequentialMsg});case u.default.MSG_TYPE.STICKER:return o.createElement(R.default,{msg:s,mediaData:s.mediaData,ref:(0,p.GetRef)((e=>{this.ref=e})),quotedMsg:this.getQuotedMsg(),displayAuthor:t,position:this.props.position,forwardRef:this.props.forwardStickerRef,animateOnView:!0});case u.default.MSG_TYPE.DOCUMENT:return i.isVcardOverMmsDocument?o.createElement(F.default,{chat:e,msg:s,mediaData:i.mediaData,displayAuthor:t,displayType:a,getQuotedMsg:()=>this.getQuotedMsg(),onMessageClick:this.props.onMessageClick}):o.createElement(c.default,{msg:s,displayType:a,mediaData:s.mediaData,ref:(0,p.GetRef)((e=>{this.ref=e})),quotedMsg:this.getQuotedMsg(),trusted:s.isTrusted(),displayAuthor:t});case u.default.MSG_TYPE.UNKNOWN:return o.createElement(k.default,{msg:(0,D.unproxy)(s),displayAuthor:t,hideUpdateButton:"phone_only_feature"===s.subtype});case u.default.MSG_TYPE.CIPHERTEXT:return o.createElement(d.default,{msg:s,ref:(0,p.GetRef)((e=>{this.ref=e})),displayAuthor:t});case u.default.MSG_TYPE.REVOKED:return o.createElement(N.default,{msg:(0,D.unproxy)(s),ref:(0,p.GetRef)((e=>{this.ref=e}))});case u.default.MSG_TYPE.OVERSIZED:return o.createElement(T.default,{msg:(0,D.unproxy)(s),displayAuthor:t});case u.default.MSG_TYPE.HSM:case u.default.MSG_TYPE.TEMPLATE_BUTTON_REPLY:return o.createElement(L.default,{msg:(0,D.unproxy)(s),contact:s.senderObj,ref:(0,p.GetRef)((e=>{this.ref=e})),quotedMsg:this.getQuotedMsg(),trusted:s.isTrusted(),displayType:a,displayAuthor:t});case u.default.MSG_TYPE.PROTOCOL:return"ephemeral_setting"===i.subtype?o.createElement(S.default,{contact:(0,D.unproxy)(e).contact,msg:s,ref:(0,p.GetRef)((e=>{this.ref=e}))}):o.createElement(k.default,{msg:(0,D.unproxy)(s),ref:(0,p.GetRef)((e=>{this.ref=e})),displayAuthor:t});case u.default.MSG_TYPE.ORDER:return o.createElement(C.default,{displayAuthor:t,msg:(0,D.unproxy)(s),ref:(0,p.GetRef)((e=>{this.ref=e}))});case u.default.MSG_TYPE.LIST:if((0,E.listMsgCanRender)(s))return o.createElement(m.default,{msg:(0,D.unproxy)(s),displayAuthor:t})}return __LOG__(2)(j(),i.type),o.createElement(k.default,{msg:(0,D.unproxy)(s),ref:(0,p.GetRef)((e=>{this.ref=e})),displayAuthor:t})}}t.MsgComponent=V,V.CONCERNS={msg:["body","caption","rtl","dir","isSentByMe","isPSA","isViewOnce","ctwaContext","initialPageSize","hasTemplateButtons","thumbnail","orderTitle","totalAmount1000","totalCurrencyCode","itemCount","isGif","isLive","isVcardOverMmsDocument","mediaData","senderObj","subtype","type","t","id","title","isFromTemplate","vcard","vcardList"],chat:["trusted"]};var H=(0,w.default)(V,V.CONCERNS);t.default=class extends H{getRef(){return this.getComponent().getRef()}}},32087:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(19976)),n=r(a(2784));function o(){var e=(0,s.default)(["[","] ","\n",""],["[","] ","\\n",""]);return o=function(){return e},e}class l extends n.Component{constructor(...e){super(...e),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,t){__LOG__(4,void 0,new Error,!0)(o(),e.toString(),e.stack,t.componentStack),SEND_LOGS("msg-error-boundary")}render(){return this.state.hasError?null:this.props.children}}t.default=l},90277:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(97816)),l=i(a(8408)),d=i(a(82631)),u=e=>{var t=e.hasCaption?e.children:n.createElement("div",{className:l.default.text},n.createElement(o.default,{msg:e.msg,theme:"placeholder"},e.children)),a=e.iconName?n.createElement("div",{className:l.default.icon},n.createElement(d.default,{name:e.iconName})):null;return n.createElement("div",{className:(0,s.default)(l.default.container,{[l.default.containerSmallIcon]:"small-icon"===e.theme})},a,t)};t.default=u},85791:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=i(a(21406)),o=r(a(60240)),l=a(66615);class d extends s.Component{render(){var e,t=this.props.emojis,a=t?t.length:0;if(0===a)return null;switch(a){default:case 3:e=n.SIZE.MEDIUM;break;case 2:e=n.SIZE.LARGE;break;case 1:e=n.SIZE.XLARGE}var r=t.map(((t,a)=>s.createElement(n.default,{animation:this.props.animation,size:e,emoji:t,key:t+a,selectable:!0})));return s.createElement(l.SelectableDiv,{selectable:!0,className:o.default.wrapper},r)}}t.default=d},71748:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(72779)),n=a(91460),o=r(a(2784)),l=i(a(71874)),d=i(a(20458)),u=i(a(79711)),c=i(a(50935)),h=i(a(91581)),f=i(a(17957)),p=i(a(11412)),m=i(a(71726)),_=i(a(21206)),v=i(a(7632)),g=i(a(81031)),E=i(a(15118)),y=i(a(40207)),S=a(84990);class C extends o.PureComponent{constructor(e){super(e),this._getUnsortedVcardDisplayDataMemo=(0,p.default)((({vcardList:e})=>e.map((({displayName:e,parsedVcard:t})=>({displayName:e,wids:(0,S.vcardWids)(t),thumbnail:(0,S.vcardThumbnail)(t)}))))),this._showContactsModal=()=>{var{vcardList:e}=this.props;if(e){var t=e.map((e=>e.parsedVcard));u.default.openModal(o.createElement(v.default,{vcards:t}))}},this.state={loading:!0,sortedVcardData:null,vcardList:e.vcardList}}componentDidMount(){this._loadProfilePics()}static getDerivedStateFromProps(e,t){return t.vcardList!==e.vcardList?{loading:!0,sortedVcardData:null,vcardList:e.vcardList}:null}componentDidUpdate(e){e.vcardList!==this.props.vcardList&&this._loadProfilePics()}_getUnsortedVcardDisplayData(){return this._getUnsortedVcardDisplayDataMemo({vcardList:this.props.vcardList})}_loadProfilePics(){var e=this.props.vcardList,t=this._getUnsortedVcardDisplayData(),a=[].concat(...t.map((({wids:e})=>e))).slice(0,10);Promise.all(a.map((e=>E.default.find(e)))).then((()=>(0,n.delayMs)(0))).then((()=>{var a;this.props.vcardList===e&&this.setState({loading:!1,sortedVcardData:(a=t,[...a].sort(((e,t)=>{var a=M(e),r=M(t);return a&&!r?-1:!a&&r?1:e.displayName<t.displayName?-1:e.displayName>t.displayName?1:0})))})}))}_renderProfilePics(e){for(var t=Math.min(e.length,3),a=[],r=0;r<t;r++){var{wids:i,thumbnail:s}=e[r],n=E.default.findThumbnailWid(i);this.state.loading||!n&&!s?a.push(o.createElement("div",{className:_.default.image,key:"default-pic-".concat(r)},o.createElement(g.default,{size:39,border:!0}))):a.push(o.createElement("div",{className:_.default.image,key:"profile-pic-".concat(r)},o.createElement(g.default,{wid:n,thumb:s,size:39,border:!0})))}return a}render(){var{msg:e}=this.props,t=this.props.displayAuthor&&!e.isSentByMe&&e.isGroupMsg?o.createElement("div",{className:_.default.author},o.createElement(l.default,{msg:e,contact:e.senderObj})):null,a=this.state.sortedVcardData||this._getUnsortedVcardDisplayData(),r=a.map((({displayName:e})=>e)),i=(0,S.getNameStringFromNames)(r),n=this._renderProfilePics(a),u=this.props.vcardList||e.chat.isTrusted(),p=this.props.quotedMsg?o.createElement("div",{className:_.default.quote},this.props.quotedMsg):null,v=(0,s.default)(_.default.bubble,{[_.default.hasAuthor]:t,[_.default.hasQuote]:p,[_.default.isPreview]:this.props.displayType===c.default.DISP_TYPE.MSG_INFO,[_.default.isGallery]:this.props.displayType===c.default.DISP_TYPE.STARRED_MSGS||this.props.displayType===c.default.DISP_TYPE.GALLERY});return o.createElement("div",{className:v},t,p,o.createElement("div",{className:_.default.vcard,role:u?"button":null,title:i,onClick:this._showContactsModal},o.createElement("div",{className:_.default.avatar},n),o.createElement("div",{className:_.default.body},o.createElement(h.default,{text:i,element:"div",className:_.default.name,dirMismatch:e.rtl!==f.default.isRTL(),direction:e.dir,wbr:15})),o.createElement("div",{className:_.default.meta},o.createElement(m.default,{msg:e}))),o.createElement(d.default,{items:[{label:f.default.t(994),onClick:this._showContactsModal}]}))}}C.CONCERNS={msg:["rtl","dir","senderObj","isSentByMe","isGroupMsg","chat"]};var T=(0,y.default)(C,C.CONCERNS);function M(e){return Boolean(E.default.findThumbnailWid(e.wids)||e.thumbnail)}t.default=T},673:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(87400)),o=a(97238),l=r(a(43334)),d=r(a(41353)),u=r(a(79711)),c=r(a(9386)),h=r(a(50935)),f=r(a(7470)),p=r(a(39292)),m=r(a(91581)),_=a(35387),v=r(a(2572)),g=r(a(72256)),E=r(a(66685)),y=r(a(65308)),S=r(a(30866)),C=r(a(87162)),T=r(a(17957)),M=r(a(78419)),b=r(a(56015)),P=r(a(40207)),A=a(64658),I=r(a(82631)),O=r(a(68384)),N=r(a(3111)),w=a(75637);class D extends s.PureComponent{constructor(...e){super(...e),this._ref=s.createRef()}handleKeyActivation(){var e;null===(e=this._ref.current)||void 0===e||e.click()}render(){var e,t,a,r,i,P,D=this.props.msg;switch(D.type){case h.default.MSG_TYPE.NOTIFICATION:t=D.body;break;case h.default.MSG_TYPE.GP2:case h.default.MSG_TYPE.GROUP_NOTIFICATION:return s.createElement(C.default,{msg:D,groupMetadata:D.chat.groupMetadata,clickable:!0});case h.default.MSG_TYPE.BROADCAST_NOTIFICATION:return s.createElement(n.default,{msg:D,clickable:!0});case h.default.MSG_TYPE.E2E_NOTIFICATION:var R=(0,A.unproxy)(D);t=(0,g.default)(R);var k=D.subtype,x=D.body?(0,w.createWid)(D.body):null,F=D.id.remote;r=()=>{!function(e,t,a,r){u.default.openModal(s.createElement(p.default,{e2eSubtype:e,jid:t,chatId:a,msg:r}))}(k,x,F,D)},e=function(e){if(e.chat.isSupportGroup())return s.createElement("div",{className:M.default.iconSupportGroup},s.createElement(I.default,{name:"info-filled"}));if("encrypt"===e.subtype||"encrypt_now"===e.subtype)return s.createElement("div",{className:M.default.iconE2E},s.createElement(I.default,{name:"lock-small"}))}(R);break;case h.default.MSG_TYPE.CALL_LOG:var G="miss_video"===D.subtype||"miss_group_video"===D.subtype;e=s.createElement("div",{className:M.default.icon},G?s.createElement(I.default,{name:"miss_video",className:M.default.iconMiss}):s.createElement(I.default,{name:"miss",className:M.default.iconMiss})),t=(0,v.default)((0,A.unproxy)(D.unsafe()),!0);break;case h.default.MSG_TYPE.NOTIFICATION_TEMPLATE:if("change_number"===D.subtype){var U=D.templateParams[0],B=D.templateParams[1],j=f.default.get(U),V=j&&j.isMyContact?j.formattedName:(0,N.default)(U),H=O.default.equals(D.chat.id,U);t=H?T.default.t(451,{name:V}):T.default.t(449,{name:V}),H&&(r=()=>function(e,t){(0,o.onChangeNumberNotificationClick)(e,t)}(B,U))}else if(t=(0,S.default)((0,A.unproxy)(D.unsafe())),a=(0,y.default)((0,A.unproxy)(D.unsafe()))){var W=(0,b.default)(D.subtype);r=()=>{!function(e,t){var a;a=s.createElement(d.default,{href:t,onClick:e=>{e.preventDefault(),u.default.closeModal("none"),setTimeout((()=>(0,_.openExternalLink)(t)),10)}},T.default.t(848));var r=s.createElement(c.default,{onOK:()=>u.default.closeModal(),okText:T.default.t(1709)},e," ",a);u.default.openModal(r)}(a,W)}}i=D.type,P=D.subtype,i===h.default.MSG_TYPE.NOTIFICATION_TEMPLATE&&L.has(P)&&(e=s.createElement("div",{className:M.default.bizInfo},s.createElement(I.default,{name:"info-filled"})));break;case h.default.MSG_TYPE.PROTOCOL:if("ephemeral_setting"===D.subtype){var K,Y=D.from,q=D.id.remote,z=l.default.gadd(q),Q=null!==(K=D.ephemeralDuration)&&void 0!==K?K:0;t=(0,E.default)(Q,Y,q),r=()=>{!function(e){u.default.ephemeralDrawer(e)}(z)}}}var J=s.createElement("span",null,e,s.createElement(m.default,{direction:T.default.isRTL()?"rtl":"ltr",text:t}));return r?s.createElement("div",{role:"button",ref:this._ref,onClick:r},J):s.createElement("span",null,J)}}D.CONCERNS={contact:["id","isEnterprise","isContactBlocked","verifiedLevel","verifiedName"],msg:["id","body","chat","from","type","subtype","templateParams","ephemeralDuration"]};var R=(0,P.default)(D,D.CONCERNS);t.default=class extends R{handleKeyActivation(){return this.getComponent().handleKeyActivation()}};var L=new Set(["blue_msg_bsp_fb_unverified","blue_msg_bsp_fb_verified","blue_msg_bsp_premise_unverified","blue_msg_bsp_premise_verified","blue_msg_self_fb_unverified","blue_msg_self_fb_verified"])},80606:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(20458)),o=r(a(79711)),l=r(a(91581)),d=a(95595),u=r(a(17957)),c=a(63865),h=r(a(97816)),f=r(a(71726)),p=r(a(85152)),m=r(a(72457)),_=r(a(55043)),v=r(a(13531)),g=r(a(20385));class E extends s.PureComponent{constructor(...e){super(...e),this._openOrderView=e=>{e&&e.stopPropagation();var{msg:t}=this.props,{orderId:a,sellerJid:r,token:i}=t;if(null!=a&&null!=r&&null!=i){var n=(0,d.getMaybeMeUser)(),l=t.sender.equals(n),u=(new _.default).toString();(0,c.logOrderMessageClick)({catalogSessionId:u,catalogOwnerJid:r,orderId:a}),null!=t.orderId&&o.default.openDrawerRight(s.createElement(v.default,{chat:t.chat,orderId:a,token:i,userIsCartOwner:l,sellerJid:r,sessionId:u}),"slide-left")}}}render(){var{displayAuthor:e,msg:t}=this.props,a=(0,d.getMaybeMeUser)(),r=t.sender.equals(a),i=s.createElement(l.default,{text:t.message,dirMismatch:t.rtl!==u.default.isRTL(),direction:t.dir,inferLinesDirection:!0}),o=s.createElement("div",{className:p.default.meta},s.createElement(f.default,{msg:t})),c=s.createElement(n.default,{items:[{label:r?u.default.t(1124):u.default.t(1123),onClick:this._openOrderView}]});return s.createElement(g.default,{msg:t,displayAuthor:e,hideMeta:!0},s.createElement("div",{className:p.default.orderPreview},s.createElement(m.default,{msg:t.unsafe(),onClick:this._openOrderView})),s.createElement(h.default,{msg:t.unsafe(),"data-id":t.id,className:p.default.messageText},i,o),c)}}t.default=E},62814:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({msg:e,displayAuthor:t}){return s.createElement(u.default,{msg:e,displayAuthor:t},s.createElement("div",{className:l.default.icon},s.createElement(d.default,{name:"unknown"})),s.createElement("div",{className:l.default.text},s.createElement(o.default,{msg:e.unsafe(),theme:"placeholder"},(0,n.default)(e.unsafe()))))};var s=i(a(2784)),n=r(a(73540)),o=r(a(97816)),l=r(a(85673)),d=r(a(82631)),u=r(a(20385))},69353:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,o.formatToParts)(e.currency,e.amount1000);return n.createElement("div",{className:(0,s.default)(l.default.container,{[l.default.isQuoted]:e.isQuoted,[l.default.isQuotedInComposeBox]:e.isQuotedInComposeBox})},n.createElement("div",{"data-testid":"payment-amount-thumb",className:(0,s.default)(l.default.thumb,{"bg-payments":!e.isQuoted})},n.createElement("div",{className:l.default.amount},n.createElement("span",{className:l.default.amountCurrency},t.symbol),n.createElement("span",{className:l.default.amountInteger},t.integer),n.createElement("span",{className:l.default.amountDecimal},t.decimal))))};var s=i(a(72779)),n=r(a(2784)),o=a(37356),l=i(a(74569))},74287:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({currency:e,subtype:t,paymentStatus:a,paymentTxnStatus:r,isCompact:i}){var c=(0,o.formatLocalSymbol)(e),h=null!=r?function(e){switch(null!=e?e:u.PaymentInfoTxnStatus.UNKNOWN){case u.PaymentInfoTxnStatus.SUCCESS:case u.PaymentInfoTxnStatus.COMPLETED:return l.default.success;case u.PaymentInfoTxnStatus.FAILED:case u.PaymentInfoTxnStatus.FAILED_RISK:case u.PaymentInfoTxnStatus.FAILED_DA_FINAL:case u.PaymentInfoTxnStatus.REFUNDED_TXN:case u.PaymentInfoTxnStatus.REFUND_FAILED:case u.PaymentInfoTxnStatus.REFUND_FAILED_PROCESSING:case u.PaymentInfoTxnStatus.REFUND_FAILED_DA:case u.PaymentInfoTxnStatus.AUTH_CANCELED:case u.PaymentInfoTxnStatus.AUTH_CANCEL_FAILED_PROCESSING:case u.PaymentInfoTxnStatus.AUTH_CANCEL_FAILED:case u.PaymentInfoTxnStatus.COLLECT_FAILED:case u.PaymentInfoTxnStatus.COLLECT_FAILED_RISK:return l.default.failed;default:return l.default.pending}}(r):function(e){switch(null!=e?e:u.PaymentInfoStatus.UNKNOWN_STATUS){case u.PaymentInfoStatus.COMPLETE:return l.default.success;case u.PaymentInfoStatus.CANCELLED:case u.PaymentInfoStatus.COULD_NOT_COMPLETE:case u.PaymentInfoStatus.REFUNDED:case u.PaymentInfoStatus.EXPIRED:case u.PaymentInfoStatus.REJECTED:return l.default.failed;default:return l.default.pending}}(a),f="send"===t?n.createElement(d.default,{name:"payment-send"}):n.createElement(d.default,{name:"payment-request"});return n.createElement("div",{"data-testid":"payment-icon-container",className:(0,s.default)(l.default.icon,h,{[l.default.compact]:i})},n.createElement("div",{className:(0,s.default)(l.default.iconSymbol,l.default[e])},c),f)};var s=i(a(72779)),n=r(a(2784)),o=a(37356),l=i(a(77509)),d=i(a(82631)),u=a(21617)},26354:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(69353)),l=i(a(74287)),d=i(a(64270)),u=i(a(96339)),c=i(a(34964)),h=i(a(20299)),f=a(21617);class p extends n.PureComponent{constructor(...e){super(...e),this.state={isMultilineText:!1},this._setRefText=e=>{e&&this.setState({isMultilineText:e.getBoundingClientRect().height>20})}}render(){var e,{paymentStatus:t,paymentTxnStatus:a,expiryTimestamp:r}=this.props,i=(0,s.default)({[d.default.bubbleOut]:this.props.isSentByMe,[d.default.bubbleIn]:!this.props.isSentByMe}),p=null!=a&&a!==f.PaymentInfoTxnStatus.UNKNOWN||null!=t&&t!==f.PaymentInfoStatus.UNKNOWN_STATUS;if(this.props.hasCaption)e=n.createElement("div",{ref:this._setRefText},n.createElement("div",null,n.createElement(c.default,{subtype:this.props.subtype,receiverJid:this.props.receiverJid})),n.createElement(u.default,{paymentStatus:t,paymentTxnStatus:a,expiryTimestamp:r}));else if(p){var m;e=n.createElement("div",{ref:this._setRefText},n.createElement("div",null,n.createElement(c.default,{subtype:this.props.subtype,receiverJid:this.props.receiverJid})),n.createElement(h.default,{msg:null===(m=this.props.msg)||void 0===m?void 0:m.unsafe()},n.createElement(u.default,{paymentStatus:t,paymentTxnStatus:a,expiryTimestamp:r})))}else{var _;e=n.createElement(h.default,{msg:null===(_=this.props.msg)||void 0===_?void 0:_.unsafe()},n.createElement("span",{ref:this._setRefText},n.createElement(c.default,{subtype:this.props.subtype,receiverJid:this.props.receiverJid})))}return n.createElement("div",{className:i},n.createElement(o.default,{currency:this.props.currency,amount1000:this.props.amount1000}),n.createElement("div",{className:d.default.body},n.createElement("div",{className:(0,s.default)(d.default.bodyIcon,{[d.default.bodyIconMultiline]:this.state.isMultilineText})},n.createElement(l.default,{currency:this.props.currency,subtype:this.props.subtype,paymentStatus:t,paymentTxnStatus:a})),n.createElement("div",{className:d.default.bodyText},e)))}}t.default=p},96339:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({paymentStatus:e,paymentTxnStatus:t,expiryTimestamp:a}){var r,i;(function(){var[,e]=o.useState(1e3*l.default.globalUnixTime());(0,c.default)((()=>{e(1e3*l.default.globalUnixTime())}),1e3)})(),({str:r,themeClassName:i}=null!=t?function(e,t){var a=null,r=null;if(null!=e)switch(e){case h.PaymentInfoTxnStatus.UNKNOWN:a=null,r=null;break;case h.PaymentInfoTxnStatus.PENDING_SETUP:a=f(t),r=u.default.pending;break;case h.PaymentInfoTxnStatus.PENDING_RECEIVER_SETUP:a=d.default.t(1737),r=u.default.pending;break;case h.PaymentInfoTxnStatus.INIT:case h.PaymentInfoTxnStatus.FAILED_PROCESSING:case h.PaymentInfoTxnStatus.FAILED_RECEIVER_PROCESSING:case h.PaymentInfoTxnStatus.FAILED_DA:case h.PaymentInfoTxnStatus.COLLECT_INIT:a=d.default.t(1741),r=u.default.pending;break;case h.PaymentInfoTxnStatus.SUCCESS:case h.PaymentInfoTxnStatus.COMPLETED:a=d.default.t(1733),r=u.default.success;break;case h.PaymentInfoTxnStatus.FAILED:case h.PaymentInfoTxnStatus.FAILED_RISK:case h.PaymentInfoTxnStatus.FAILED_DA_FINAL:case h.PaymentInfoTxnStatus.REFUNDED_TXN:case h.PaymentInfoTxnStatus.REFUND_FAILED:case h.PaymentInfoTxnStatus.REFUND_FAILED_PROCESSING:case h.PaymentInfoTxnStatus.REFUND_FAILED_DA:case h.PaymentInfoTxnStatus.AUTH_CANCELED:case h.PaymentInfoTxnStatus.AUTH_CANCEL_FAILED_PROCESSING:case h.PaymentInfoTxnStatus.AUTH_CANCEL_FAILED:case h.PaymentInfoTxnStatus.COLLECT_FAILED:case h.PaymentInfoTxnStatus.COLLECT_FAILED_RISK:a=d.default.t(1734),r=u.default.failed;break;case h.PaymentInfoTxnStatus.EXPIRED_TXN:case h.PaymentInfoTxnStatus.COLLECT_EXPIRED:a=d.default.t(1735),r=u.default.pending;break;case h.PaymentInfoTxnStatus.COLLECT_SUCCESS:a=f(t),r=u.default.pending;break;case h.PaymentInfoTxnStatus.COLLECT_REJECTED:a=d.default.t(1744),r=u.default.pending;break;case h.PaymentInfoTxnStatus.COLLECT_CANCELED:case h.PaymentInfoTxnStatus.COLLECT_CANCELLING:a=d.default.t(1732),r=u.default.pending;break;case h.PaymentInfoTxnStatus.IN_REVIEW:a=d.default.t(1736),r=u.default.pending}return{str:a,themeClassName:r}}(t,a):function(e,t){var a=null,r=null;if(null!=e)switch(e){case h.PaymentInfoStatus.PROCESSING:a=d.default.t(1741),r=u.default.pending;break;case h.PaymentInfoStatus.COMPLETE:a=d.default.t(1733),r=u.default.success;break;case h.PaymentInfoStatus.SENT:a=d.default.t(1737),r=u.default.pending;break;case h.PaymentInfoStatus.NEED_TO_ACCEPT:a=f(t),r=u.default.pending;break;case h.PaymentInfoStatus.COULD_NOT_COMPLETE:case h.PaymentInfoStatus.REFUNDED:a=d.default.t(1734),r=u.default.failed;break;case h.PaymentInfoStatus.EXPIRED:a=d.default.t(1735),r=u.default.failed;break;case h.PaymentInfoStatus.REJECTED:a=d.default.t(1744),r=u.default.failed;break;case h.PaymentInfoStatus.CANCELLED:a=d.default.t(1732),r=u.default.failed;break;case h.PaymentInfoStatus.WAITING_FOR_PAYER:case h.PaymentInfoStatus.WAITING:a=f(t),r=u.default.pending;break;case h.PaymentInfoStatus.UNKNOWN_STATUS:a=null,r=null}return{str:a,themeClassName:r}}(e,a));if(null==r)return null;return o.createElement("span",{"data-testid":"payment-status",className:(0,s.default)(u.default.status,i)},r)};var s=i(a(72779)),n=i(a(19034)),o=r(a(2784)),l=i(a(19899)),d=i(a(17957)),u=i(a(37270)),c=i(a(38063)),h=a(21617);function f(e){if(null==e)return d.default.t(1737);var t=1e3*l.default.globalUnixTime(),a=1e3*e;if(a-t>6e4){var r=(0,n.default)(t).to((0,n.default)(a));return d.default.t(1739,{timeSpan:r})}return a-t>0?d.default.t(1740):d.default.t(1738)}},34964:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e.receiverJid)return null;var t,a=o.default.get(e.receiverJid),r=n.createElement("span",{className:c.default.name},a?a.isMe?l.default.t(1845):n.createElement(u.default,{contact:a,showNotifyName:!0}):(0,h.default)(e.receiverJid));switch(e.subtype){case"send":t=n.createElement(d.default,{id:1731,params:{receiverName:r}});break;case"request":t=n.createElement(d.default,{id:1724,params:{receiverName:r}})}return n.createElement("span",{className:(0,s.default)(c.default.container,{[c.default.isQuoted]:e.isQuoted})},t)};var s=i(a(72779)),n=r(a(2784)),o=i(a(7470)),l=i(a(17957)),d=i(a(81524)),u=i(a(60949)),c=i(a(76884)),h=i(a(3111))},41434:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=(r(a(50935)),r(a(18120))),o=r(a(17957)),l=r(a(26354)),d=r(a(18225)),u=r(a(76772)),c=r(a(40207));class h extends s.Component{render(){var{msg:e,displayAuthor:t,displayType:a,quotedMsg:r}=this.props;if(!n.default.supportsFeature(n.default.F.PAYMENTS))return s.createElement(d.default,{msg:e,displayAuthor:t,displayType:a,quotedMsg:r});var i=!(!e.paymentNoteMsg||!e.paymentNoteMsg.body);if(!(e.paymentAmount1000&&e.paymentCurrency))return s.createElement(d.default,{msg:e,displayAuthor:t,displayType:a,quotedMsg:r});var c=s.createElement(l.default,{isSentByMe:e.isSentByMe,currency:e.paymentCurrency,amount1000:e.paymentAmount1000,receiverJid:e.paymentMessageReceiverJid,paymentStatus:e.paymentStatus,paymentTxnStatus:e.paymentTxnStatus,expiryTimestamp:e.paymentExpiryTimestamp,subtype:e.subtype,hasCaption:i,msg:e});switch(e.subtype){case"ciphertext":return s.createElement(d.default,{msg:e,displayAuthor:t,displayType:a,quotedMsg:r,paymentInfo:c,placeholderText:o.default.t(1721)});case"futureproof":return s.createElement(d.default,{msg:e,displayAuthor:t,displayType:a,quotedMsg:r,paymentInfo:c,placeholderText:o.default.t(1723)});case"send":case"request":return s.createElement(u.default,{msg:e,displayAuthor:t,displayType:a,quotedMsg:r,paymentInfo:c});default:return s.createElement(d.default,{msg:e,displayAuthor:t,displayType:a,quotedMsg:r})}}}h.CONCERNS={msg:["paymentAmount1000","paymentCurrency","id","isSentByMe","paymentNoteMsg","paymentStatus","paymentTxnStatus","paymentExpiryTimestamp","paymentMessageReceiverJid","subtype"]};var f=(0,c.default)(h,h.CONCERNS);t.default=f},18225:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(72779)),n=r(a(2784)),o=a(18164),l=(i(a(50935)),i(a(91581))),d=i(a(17957)),u=i(a(97816)),c=i(a(90277)),h=a(62761),f=i(a(56892)),p=i(a(40207)),m=i(a(20385));class _ extends n.Component{render(){var e,t,a,r=this.props.msg,i=r.paymentNoteMsg&&r.paymentNoteMsg.body;if(i){var p=(0,o.Conversation)({mentions:r.mentionMap(),links:r.getLinks(),trusted:r.isTrusted()});e=n.createElement(u.default,{msg:r.unsafe()},n.createElement(l.default,{text:i,selectable:!0,formatters:p,dirMismatch:r.rtl!==d.default.isRTL(),direction:r.dir}))}if(this.props.quotedMsg){var _=(0,s.default)(f.default.quote,{[f.default.hasAuthor]:this.props.displayAuthor&&!r.isSentByMe&&r.isGroupMsg,[f.default.forwarded]:(0,h.showForwarded)(r)});t=n.createElement("div",{className:_},this.props.quotedMsg)}var v=d.default.t(1722);this.props.placeholderText&&(a="ciphertext",v=this.props.placeholderText);var g=(0,s.default)({[f.default.hasText]:e,[f.default.noText]:!e});return n.createElement(m.default,{msg:r,displayAuthor:this.props.displayAuthor},t,this.props.paymentInfo,n.createElement("div",{className:g},n.createElement(c.default,{hasCaption:!!e,iconName:a,msg:r.unsafe()},v)),e)}}_.CONCERNS={msg:["rtl","dir","isSentByMe","isGroupMsg","isPSA","senderObj","paymentNoteMsg"]};var v=(0,p.default)(_,_.CONCERNS);t.default=v},15442:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(32960)),l=i(a(71874)),d=i(a(92969)),u=i(a(12708)),c=i(a(79711)),h=i(a(50935)),f=a(87478),p=i(a(131)),m=i(a(4336)),_=a(40713),v=i(a(69345)),g=r(a(68084)),E=a(96645),y=i(a(19125)),S=i(a(71726)),C=i(a(40210)),T=a(62761),M=i(a(10667)),b=i(a(40207)),P=a(64658),A=i(a(20783)),I=i(a(900));function O(e){e.stopPropagation()}class N extends n.PureComponent{constructor(...e){super(...e),this.setRefImg=e=>this._refImg=e,this.showMediaMissing=()=>{c.default.openModal(n.createElement(v.default,{msg:this.props.msg.unsafe()}))},this.getZoomNode=e=>{var t=this.props.isMsgVisible;if(!t)return null;var a=t(e);return a?a.getImgNode&&a.getImgNode():null},this.launchMediaViewer=e=>{if(e&&e.stopPropagation(),this.props.theme===_.DisplayTheme.Album){var t=this.props.zoomMsg||this.props.msg,a=new Set((this.props.albumMsgs||[]).map((e=>e.id.toString())));c.default.mediaViewerModal({msg:(0,P.unproxy)(t.unsafe()),getZoomNode:this.getZoomNode,highlightedMsgIds:a})}else c.default.mediaViewerModal({msg:(0,P.unproxy)(this.props.msg.unsafe()),getZoomNode:this.getZoomNode})},this._forceDownloadMedia=()=>{this.props.msg.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:C.default.WEBC_RMR_REASON_CODE.MSG_CLICK,isUserInitiated:!0})},this.downloadMedia=()=>this.props.msg.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:C.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1}),this.cancelDownload=()=>{this.props.msg.cancelDownload()},this.cancelUpload=()=>{this.props.msg.cancelUpload()},this.resumeUpload=()=>{this.props.msg.resumeUpload()},this.resumeRemoteUpload=()=>{this.props.msg.resumeRemoteUpload()},this._renderImage=(e,t=!1,a,r)=>{var{mediaData:{fullHeight:i,fullWidth:o}}=this.props,l=(0,s.default)(M.default.thumbBody,{[M.default.thumbBodyLores]:t}),d=(0,f.getImgStyle)(o||a,i||r,a,r);return n.createElement("img",{alt:this._getCaption(),src:e,className:l,style:d,ref:this.setRefImg})},this._renderPreviewImage=(e,t)=>this._renderImage(this.props.mediaData.preview&&this.props.mediaData.preview.url(),!0,e,t),this._getCaption=()=>{var{msg:e}=this.props;return e.type===h.default.MSG_TYPE.IMAGE&&e.caption?e.caption:void 0}}componentDidMount(){this.downloadMedia()}getImgNode(){return this._refImg}render(){var{msg:e,contentContainerClassName:t,captionComponent:a,thumbClassName:r,onThumbClick:i,mediaData:c,theme:v,overlayContent:C,displayType:b}=this.props,P=this._getCaption(),N=P?null:n.createElement(I.default,null),w=P?n.createElement("div",{className:M.default.caption},n.createElement(u.default,{msg:e.unsafe(),trusted:this.props.trusted,spacer:!(e.supportsMessageFooter&&e.footer)})):null,D=null,R=null;if(null!=C)R=i||this.launchMediaViewer;else{var{mediaStage:L,progressiveStage:k}=c;switch(L){case E.MEDIA_DATA_STAGE.RESOLVED:case E.MEDIA_DATA_STAGE.PROGRESSIVE_READY:R=i||this.launchMediaViewer;break;case E.MEDIA_DATA_STAGE.FETCHING:D=n.createElement(g.PendingCancel,null),R=this.cancelDownload;break;case E.MEDIA_DATA_STAGE.NEED_POKE:D=n.createElement(g.Download,{filesize:c.size}),R=this._forceDownloadMedia;break;case E.MEDIA_DATA_STAGE.UPLOADING:D=n.createElement(g.PendingCancel,null),R=this.cancelUpload;break;case E.MEDIA_DATA_STAGE.NEED_UPLOAD:D=n.createElement(g.Upload,{filesize:c.size}),R=this.resumeUpload;break;case E.MEDIA_DATA_STAGE.REMOTE_NEED_UPLOAD:D=n.createElement(g.Upload,{filesize:c.size}),R=this.resumeRemoteUpload;break;case E.MEDIA_DATA_STAGE.ERROR_MISSING:R=i||this.showMediaMissing;break;case E.MEDIA_DATA_STAGE.ERROR_UNSUPPORTED:D=n.createElement(g.Download,{filesize:c.size}),R=i||this.launchMediaViewer;break;case E.MEDIA_DATA_STAGE.SENDING:e.isFailed||(D=n.createElement(g.Pending,null));break;case E.MEDIA_DATA_STAGE.DECRYPTING:null==k&&(D=n.createElement(g.Pending,null));break;case E.MEDIA_DATA_STAGE.INIT:case E.MEDIA_DATA_STAGE.EXISTS:break;case E.MEDIA_DATA_STAGE.ERROR_TOO_LARGE:case E.MEDIA_DATA_STAGE.PREPARING:case E.MEDIA_DATA_STAGE.REMOTE_UPLOADING:case E.MEDIA_DATA_STAGE.REUPLOADING:D=n.createElement(g.Pending,null)}}var x,F=this.props.displayAuthor&&!e.isSentByMe&&e.isGroupMsg,G=(0,T.showForwarded)(e)&&this.props.theme!==_.DisplayTheme.Album,{bubbleWidth:U,bubbleHeight:B}=(0,f.getBubbleDimension)(e.type,e.isFromTemplate,c.aspectRatio,v,b),j=(0,s.default)(M.default.bubble,{[M.default.isAlbum]:v===_.DisplayTheme.Album,[M.default.portrait]:U<B&&(0,f.canUseCustomCropping)(e.type,v,b)}),V=(0,s.default)(j,{[M.default.hasCaption]:P,[M.default.hasAuthor]:F,[M.default.forwarded]:G,[M.default.isPSA]:e.isPSA,[M.default.isPreview]:this.props.displayType===h.default.DISP_TYPE.MSG_INFO||this.props.displayType===h.default.DISP_TYPE.STARRED_MSGS,[M.default.isGallery]:this.props.displayType===h.default.DISP_TYPE.GALLERY}),H=F?n.createElement("div",{className:M.default.author},n.createElement(l.default,{msg:e,contact:e.senderObj})):null,W=G?n.createElement(m.default,{msg:e.unsafe(),className:M.default.forwardedIndicator}):null,K=this.props.quotedMsg?n.createElement("div",{className:M.default.quote},this.props.quotedMsg):null,Y=(0,s.default)(M.default.thumb,{[M.default.overlay]:C});null==C&&(x=n.createElement("div",{className:M.default.meta},n.createElement(S.default,{msg:e})));var q=n.createElement("div",{className:t},H,W,K,n.createElement(p.default,{msg:e.unsafe(),wrapperClass:M.default.ctwaContext}),n.createElement("div",{role:"button","data-a8n":o.default.key("image-thumb"),className:r||Y,onClick:R,style:{width:U,height:B}},D,n.createElement(y.default,{mediaData:c,placeholderRenderer:()=>this._renderPreviewImage(U,B),downloadMedia:this.downloadMedia,renderProgressively:!0},((e,t)=>this._renderImage(e,t,U,B))),N),a||w,n.createElement(A.default,{dir:e.dir,footer:e.footer,isShown:e.supportsMessageFooter,msg:e.unsafe(),rtl:e.rtl,trusted:this.props.trusted,type:e.type}),x);return w?n.createElement(d.default,{contact:e.senderObj,msg:e.unsafe(),className:V,onClick:O},q):(null!=C&&(q=n.createElement("div",{className:M.default.overlayAlbumText},q,C)),n.createElement("div",{className:V,onClick:O},q))}}N.CONCERNS={msg:["ack","caption","dir","footer","isFromTemplate","id","isFailed","isGroupMsg","isPSA","isSentByMe","rtl","senderObj","type","supportsMessageFooter"],mediaData:["aspectRatio","preview","mediaStage","fullWidth","fullHeight","size","progressiveStage"]};var w=(0,b.default)(N,N.CONCERNS);t.default=w},26660:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{playbackRate:t,onClick:a,played:r,isSentByMe:i}=e,o=null==a?null:e=>{e.key!==u.ENTER&&e.key!==u.SPACE||(e.preventDefault(),e.stopPropagation(),a())},c=(0,n.default)(d.default.badge,{[d.default.badgePlayed]:r,[d.default.badgeOutgoing]:i,[d.default.badgeIncoming]:!i});return s.createElement("div",{role:"button",className:d.default.wrapper,tabIndex:"0",onClick:e.onClick,onKeyPress:o},s.createElement("div",{className:c},function(e){switch(e){case 1:return l.default.t(242);case 1.5:return l.default.t(241);case 2:return l.default.t(243)}}(t)))};var s=i(a(2784)),n=r(a(72779)),o=r(a(10792)),l=r(a(17957)),d=r(a(94842)),{KEYBOARD_EVENT_KEY_VALUE:u}=o.default},36786:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(71874)),l=i(a(65468)),d=i(a(79711)),u=a(18164),c=i(a(50935)),h=r(a(37356)),f=i(a(91581)),p=i(a(52617)),m=i(a(98294)),_=i(a(17957)),v=a(83974),g=i(a(15442)),E=i(a(92512)),y=i(a(55043)),S=i(a(13531)),C=i(a(20299)),T=i(a(40207)),M=a(64658),b=a(75637);class P extends n.Component{constructor(...e){super(...e),this.ProductCatalogSession=new y.default,this._launchProductView=e=>{e&&e.stopPropagation();var{msg:t,onProductClick:a}=this.props;if(t){var{productId:r,businessOwnerJid:i}=t;if(r&&i){var s=(0,p.default)({productId:r,businessOwnerJid:i,msgT:t.t});if(s){(0,v.logProductMsgClick)({product:(0,M.unproxy)(s),catalogSessionId:this.ProductCatalogSession.toString()});var o=this.ProductCatalogSession.toString();a?a(s,o):d.default.openDrawerRight(n.createElement(S.default,{refreshCarousel:!0,chat:t.chat,product:s,sessionId:o}),"slide-left",this.props.uim)}}}}}componentDidMount(){var{msg:e}=this.props;e.businessOwnerJid&&(0,b.createWid)(e.businessOwnerJid)&&l.default.addMsgAsProduct((0,M.unproxy)(e.unsafe()))}_renderProductInfo(){var{msg:e,trusted:t}=this.props,{title:a,description:r,priceAmount1000:i,currencyCode:s}=e,o=(0,u.Conversation)({mentions:e.mentionMap(),links:e.getLinks(),selectable:!0,trusted:!0===t}),l=null!=i&&s?h.format(s,i):r,d=n.createElement(f.default,{direction:"inherit",selectable:!0,text:a,formatters:o,ellipsify:!0,className:E.default.title}),p=l?n.createElement(C.default,{msg:e.unsafe(),className:E.default.subtitle},n.createElement(f.default,{direction:"inherit",selectable:!0,text:l,formatters:o,textLimit:c.default.MAX_PRODUCT_SUBTITLE_LENGTH})):null;return n.createElement("div",{className:E.default.productInfo,onClick:this._launchProductView},d,p)}render(){var{displayAuthor:e,msg:t,mediaData:a,trusted:r,quotedMsg:i}=this.props,l=(!1!==e?!t.isSentByMe&&t.isGroupMsg:null)?n.createElement("div",{className:E.default.author},n.createElement(o.default,{msg:t,contact:t.senderObj})):null,d=n.createElement(g.default,{msg:t,mediaData:a,trusted:r,displayAuthor:!1,contentContainerClassName:E.default.productContainer,captionComponent:this._renderProductInfo(),thumbClassName:E.default.thumb,onThumbClick:this._launchProductView,quotedMsg:i}),u=n.createElement(f.default,{className:E.default.productCta,onClick:this._launchProductView,text:_.default.t(1156)});return n.createElement("div",{className:(0,s.default)(E.default.bubble,{[E.default.bubbleIn]:!t.isSentByMe,[E.default.bubbleOut]:t.isSentByMe})},l,d,u)}}P.CONCERNS={msg:["businessOwnerJid","chat","chat","currencyCode","description","dir","id","isGroupMsg","asProductInquiry","isSentByMe","mediaData","priceAmount1000","productId","productImageCount","retailerId","rtl","senderObj","t","title","url"]};var A=(0,m.default)((0,T.default)(P,P.CONCERNS));t.default=A},81031:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(72779)),n=a(91460),o=r(a(2784)),l=r(a(46478)),d=i(a(20642)),u=i(a(93579)),c=i(a(15118)),h=i(a(82631)),f=i(a(74185));class p extends o.PureComponent{constructor(e){super(e),this.promise=null,this._clearPromise=()=>{this.promise=null},this._handleImageChange=(e={})=>{this.setState({img:e.img})},this.state={img:null}}componentDidMount(){var e=this.props.wid;e&&(this.promise=c.default.find(e).then((e=>(0,n.delayMs)(0,e))).then((e=>{this.props.listeners.add(e,"change:img",this._handleImageChange),this._handleImageChange(e)})).catch((()=>{})).finally(this._clearPromise))}componentWillUnmount(){this.promise&&this.promise.cancel()}render(){var e,{theme:t}=this.props;if(this.state.img&&this.props.wid)return o.createElement(l.default,{id:this.props.wid,quoted:this.props.quoted,size:this.props.size,square:this.props.square,border:this.props.border});e="number"==typeof this.props.size&&0!==this.props.size||"number"!=typeof this.props.size&&null!=this.props.size?this.props.size:l.DETAIL_IMAGE_SIZE.SMALL;var a,r={height:(0,l.getSize)(e),width:(0,l.getSize)(e)},i="voip"===t||"voip-dimmed"===t,n="voip-large"===t||"voip-large-dimmed"===t,d="voip-dimmed"===t||"voip-large-dimmed"===t,c={[u.default.square]:this.props.square,[u.default.hasBorder]:this.props.border};return this.props.thumb?a=o.createElement("div",{style:f.default.thumbAsBackgroundImage(this.props.thumb),className:(0,s.default)(u.default.image,{[u.default.hasInnerBorder]:i,[u.default.hasLargeInnerBorder]:n,[u.default.dimmed]:d})}):(a=o.createElement("div",{className:u.default.default},o.createElement(h.default,{name:this.props.quoted?"default-user-square":"default-user",style:r})),c[u.default.hasInnerBorder]=i,c[u.default.hasLargeInnerBorder]=n,c[u.default.dimmed]=d),o.createElement("div",{className:(0,s.default)(u.default.container,c),style:r},a)}}var m=(0,d.default)(p);t.default=m},74837:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(118)),o=r(a(71874)),l=r(a(79711)),d=r(a(50935)),u=r(a(46478)),c=a(55488),h=r(a(69345)),f=a(96645),p=r(a(40210)),m=i(a(86447)),_=r(a(3406)),v=r(a(40207)),g=r(a(82631));class E extends s.PureComponent{constructor(e){super(e),this._refPTTPlayer=s.createRef(),this.showMediaMissing=()=>{l.default.openModal(s.createElement(h.default,{msg:this.props.msg.unsafe()}))},this.downloadMedia=()=>{this.props.msg.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:p.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1})},this._forceDownloadMedia=()=>{this.props.msg.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:p.default.WEBC_RMR_REASON_CODE.MSG_CLICK,isUserInitiated:!0})},this.cancelDownload=()=>{this.props.msg.cancelDownload()},this.cancelUpload=()=>{this.props.msg.cancelUpload()},this.resumeUpload=()=>{this.props.msg.resumeUpload()},this.resumeRemoteUpload=()=>{this.props.msg.resumeRemoteUpload()},this.handleTimeUpdate=e=>{this.setState({currentTime:e})},this.handlePlayingUpdate=e=>{var{msg:t}=this.props;e&&(0,c.canMarkPlayed)(t.unsafe())&&(0,c.markPlayed)(t.unsafe()),this.setState({autoPlay:!1,playing:e})},this.state={currentTime:0,playing:!1,autoPlay:!1}}componentDidMount(){this.downloadMedia()}handleKeyActivation(){var e;null===(e=this._refPTTPlayer.current)||void 0===e||e.handleKeyActivation()}render(){var e,{msg:t,mediaData:a}=this.props,r=t.ack===d.default.ACK.PLAYED,i=s.createElement(_.default,{played:r,isSentByMe:t.isSentByMe}),l=this.state.playing?this.state.currentTime:a.duration;switch(a.mediaStage){case f.MEDIA_DATA_STAGE.RESOLVED:e=s.createElement(m.default,{ref:this._refPTTPlayer,mediaData:this.props.mediaData,downloadMedia:this.downloadMedia,autoPlay:this.state.autoPlay,duration:l,onPlayingUpdate:this.handlePlayingUpdate,onTimeUpdate:this.handleTimeUpdate,outgoingMsg:t.isSentByMe,playing:this.state.playing,played:r,displayType:this.props.displayType,getSequentialMsg:this.props.getSequentialMsg,currMsgId:t.id,isPtt:!0});break;case f.MEDIA_DATA_STAGE.NEED_POKE:e=s.createElement(m.AudioPlayerFrame,{icon:s.createElement(g.default,{name:"audio-download"}),outgoingMsg:t.isSentByMe,action:this._forceDownloadMedia});break;case f.MEDIA_DATA_STAGE.NEED_UPLOAD:e=s.createElement(m.AudioPlayerFrame,{icon:s.createElement(g.default,{name:"audio-upload"}),outgoingMsg:t.isSentByMe,action:this.resumeUpload});break;case f.MEDIA_DATA_STAGE.REMOTE_NEED_UPLOAD:e=s.createElement(m.AudioPlayerFrame,{icon:s.createElement(g.default,{name:"audio-upload"}),outgoingMsg:t.isSentByMe,action:this.resumeRemoteUpload});break;case f.MEDIA_DATA_STAGE.ERROR_MISSING:e=s.createElement(m.AudioPlayerFrame,{icon:s.createElement(g.default,{name:"audio-play",directional:!0}),outgoingMsg:t.isSentByMe,action:this.showMediaMissing});break;case f.MEDIA_DATA_STAGE.UPLOADING:case f.MEDIA_DATA_STAGE.SENDING:var c=a.mediaStage===f.MEDIA_DATA_STAGE.UPLOADING;e=s.createElement(m.AudioPlayerFrame,{action:c?this.cancelUpload:void 0,canCancel:c,fileSize:a.size,outgoingMsg:t.isSentByMe,spinner:!0});break;default:e=s.createElement(m.AudioPlayerFrame,{spinner:!0,outgoingMsg:t.isSentByMe})}var h=this.props.displayAuthor&&!t.isSentByMe&&t.isGroupMsg?s.createElement(o.default,{msg:t,contact:t.senderObj}):null,p=s.createElement(u.default,{id:t.senderObj.id,size:55});return s.createElement(n.default,{msg:t,quotedMsg:this.props.quotedMsg,author:h,status:i,player:e,avatar:p,displayType:this.props.displayType})}}E.CONCERNS={msg:["ack","isSentByMe","isGroupMsg","senderObj","id"],mediaData:["duration","type","mediaStage","renderableUrl","size"]};var y=(0,v.default)(E,E.CONCERNS);t.default=y},30454:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.playMidPttTone=function(){s.play()},t.playEndPttTone=function(){n.play()};var i=r(a(50935)),s=new window.Audio(i.default.PTT_MIDDLE_TONE_PATH),n=new window.Audio(i.default.PTT_END_TONE_PATH)},86447:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.AudioPlayerFrame=D,t.default=void 0;var s=i(a(19976)),n=i(a(72779)),o=r(a(2784)),l=a(60474),d=i(a(18984)),u=i(a(19899)),c=i(a(79711)),h=i(a(50935)),f=a(98864),p=i(a(17957)),m=i(a(20642)),_=i(a(19125)),v=i(a(40210)),g=i(a(85059)),E=i(a(61941)),y=a(30454),S=i(a(89516)),C=i(a(50751)),T=i(a(92222)),M=i(a(40207)),b=a(64658),P=i(a(82631)),A=i(a(67134));function I(){var e=(0,s.default)(["PTTPlayer:maybePlayNextPTT (last message) error: ",""]);return I=function(){return e},e}function O(){var e=(0,s.default)(["PTTPlayer:maybePlayNextPTT (with next message) error: ",""]);return O=function(){return e},e}function N(){var e=(0,s.default)(["PTTPlayer:onPttPlayback error: ",""]);return N=function(){return e},e}class w extends o.PureComponent{constructor(e){super(e),this.setRefAudio=e=>{this._refAudio=e},this._scrollPositionDetectorRef=o.createRef(),this._onPlayClick=()=>{var e;(null===(e=this._scrollPositionDetectorRef)||void 0===e?void 0:e.current)&&(this._startingScrollPos=this._scrollPositionDetectorRef.current.getBoundingClientRect().top);var t=this._refAudio;t&&(this.props.playing?t.pause():this._playAudio(!1))},this.handleKeyActivation=()=>{this._onPlayClick()},this._onPttPlayback=e=>{var t;if(this.props.currMsgId===e){this.setState({sequentialPlayback:!0,currentTime:0}),(null===(t=this._scrollPositionDetectorRef)||void 0===t?void 0:t.current)&&(this._startingScrollPos=this._scrollPositionDetectorRef.current.getBoundingClientRect().top);var a=this._refAudio;a&&(this._delayPttPromise=this._delayPtt(h.default.PTT_PLAYBACK_DELAY).cancellable().then((()=>{a.currentTime=0,this._playAudio(!0)})).catch((e=>{__LOG__(3)(N(),e)})).finally((()=>{this._delayPttPromise=null})))}},this._delayPtt=e=>new Promise((t=>this.props.setInterval(t,e))),this._onNewPttRecording=()=>{var e=this._refAudio;e&&(this.props.playing&&e.pause(),this._delayPttPromise&&this._delayPttPromise.cancel())},this.onPlaying=()=>{var{currMsgId:e}=this.props;e&&(c.default.pttPlaying(e),C.default.lastPlayedMessageId=e.toString()),this.props.onPlayingUpdate(!0)},this.onPause=()=>{this.props.onPlayingUpdate(!1)},this.onEnded=()=>{var e=this._refAudio;e&&(e.currentTime=0,e.load(),this._maybePlayNextPTT(),this._commitPttPlaybackWamEvent(!0))},this._updateProgress=()=>{var e=this._refAudio;if(e){var{currentTime:t,duration:a}=e,r=Math.round(t);r!==this._previousNotifiedTime&&(this._previousNotifiedTime=r,this.props.onTimeUpdate(r));var i=this.state.currentTime,s=k(this.props,this.state);t===i&&a===s||this.setState({currentTime:t,audioDuration:a})}},this._handleSeekBarChange=e=>{var t=this._refAudio;if(t){var{duration:a}=t;e!==a||this.props.playing?(this.setState({currentTime:e}),t.currentTime=e):(this.setState({currentTime:0}),t.currentTime=0),null!=this._pttPlaybackWamEvent&&(this._pttPlaybackWamEvent.pttSeekCnt+=1)}},this.onPlayerError=()=>{this._commitPttPlaybackWamEvent(!1)},this._onOtherPttPlaying=e=>{this.props.currMsgId!==e&&this._delayPttPromise&&this._delayPttPromise.cancel()},this._renderAudioTag=e=>o.createElement(d.default,{autoPlay:this.props.autoPlay,onError:this.onPlayerError,preload:"auto",setRefAudio:this.setRefAudio,url:e,playbackRate:this.props.pttPrefs.playbackRate}),this._prevPlaybackRate=e.pttPrefs.playbackRate,this.state={currentTime:0,audioDuration:k(e,null),playedBefore:e.played,sequentialPlayback:!1}}componentDidMount(){var e=(0,E.default)(this._refAudio,"this._refAudio");this.props.listeners.add(e,"playing",this.onPlaying),this.props.listeners.add(e,"pause",this.onPause),this.props.listeners.add(e,"ended",this.onEnded),this.props.listeners.add(e,"timeupdate",this._updateProgress),this.props.listeners.add(e,"durationchange",this._updateProgress),this.props.listeners.add(e,"progress",this._updateProgress),this.props.listeners.add(c.default,"pttRecording",this._onNewPttRecording),this.props.listeners.add(c.default,"sequential_playback_ptt",this._onPttPlayback),this.props.listeners.add(c.default,"pttPlaying",this._onOtherPttPlaying)}componentDidUpdate(e){var t,a,r,i;this.props.playing!==e.playing&&(this.props.playing?this._cancelProgressUpdateInterval=(a=this._updateProgress,(i=()=>{r=requestAnimationFrame((()=>{a(),i()}))})(),()=>{cancelAnimationFrame(r)}):null===(t=this._cancelProgressUpdateInterval)||void 0===t||t.call(this));if(null!=this._pttPlaybackWamEvent){var{playbackRate:s}=this.props.pttPrefs;s!==this._prevPlaybackRate&&(this._prevPlaybackRate=s,this._pttPlaybackWamEvent.pttPlaybackSpeedCnt+=1)}}componentWillUnmount(){var e;null===(e=this._cancelProgressUpdateInterval)||void 0===e||e.call(this)}_isValidPlaybackSequence(e){return e.type===h.default.MSG_TYPE.PTT&&!(e.isSentByMe&&!this.props.outgoingMsg&&!this.state.playedBefore)}_playAudio(e){var t=this._refAudio;t&&(t.play(),this.props.isPtt&&null==this._pttPlaybackWamEvent&&(this._pttPlaybackWamEvent=new v.default.PttPlayback({pttSeekCnt:0,pttPlaybackSpeedCnt:0,pttTrigger:e?v.default.PTT_TRIGGER_TYPE.SEQUENTIAL:v.default.PTT_TRIGGER_TYPE.MANUAL})))}_maybePlayNextPTT(){var e=this.state.sequentialPlayback;if(this.props.getSequentialMsg&&this.props.currMsgId){var t=this.props.getSequentialMsg(this.props.currMsgId);t&&this._isValidPlaybackSequence(t)?this._delayPttPromise=this._delayPtt(h.default.PTT_PLAYBACK_DELAY).cancellable().then((()=>{var e,a;g.default.getGlobalSounds()&&(0,y.playMidPttTone)();var r=null===(e=this._scrollPositionDetectorRef)||void 0===e||null===(a=e.current)||void 0===a?void 0:a.getBoundingClientRect().top;null!=r&&this._startingScrollPos===r&&c.default.scrollToPtt(t.unsafe()),c.default.autoplayPTT(t.id)})).catch((e=>{__LOG__(3)(O(),e)})).finally((()=>{this._delayPttPromise=null})):this.state.sequentialPlayback&&(this._delayPttPromise=this._delayPtt(h.default.PTT_PLAYBACK_DELAY).cancellable().then((()=>{g.default.getGlobalSounds()&&(0,y.playEndPttTone)(),this._delayPttPromise=null})).catch((e=>{__LOG__(3)(I(),e)})).finally((()=>{this._delayPttPromise=null})),e=!1),this.setState({playedBefore:!0,sequentialPlayback:e})}}render(){var e=this.props.playing?"audio-pause":"audio-play",t=null!=this.props.duration&&0!==this.props.duration?o.createElement("div",{className:S.default.metadata},u.default.durationStr(this.props.duration)):null,a=o.createElement("button",{className:S.default.button,onClick:this._onPlayClick},o.createElement(P.default,{name:e})),r=(0,E.default)(this.props.mediaData,"this.props.mediaData"),i=(0,E.default)(this.props.downloadMedia,"this.props.downloadMedia"),s=o.createElement(_.default,{mediaData:r,placeholderRenderer:()=>this._renderAudioTag(""),downloadMedia:i},this._renderAudioTag),n=o.createElement("div",{ref:this._scrollPositionDetectorRef,className:S.default.scrollPositionDetector});return o.createElement(D,{button:a,played:this.props.played,outgoingMsg:this.props.outgoingMsg,displayType:this.props.displayType},n,t,o.createElement(T.default,{currentTime:this.state.currentTime,duration:k(this.props,this.state),onChange:this._handleSeekBarChange,outgoing:this.props.outgoingMsg,played:Boolean(this.props.played)}),s)}_commitPttPlaybackWamEvent(e){var t=this._pttPlaybackWamEvent;null!=t&&(t.pttPlaybackFailed=!e,t.pttType=function(e){switch(e.split(";")[0]){case"audio/ogg":return v.default.PTT_STREAM_TYPE.OPUS;case"audio/aac":return v.default.PTT_STREAM_TYPE.AAC;case"audio/mpeg":return v.default.PTT_STREAM_TYPE.MP3;case"audio/amr-wb":return v.default.PTT_STREAM_TYPE.AMR_WB;case"audio/amr":case"audio/3gpp2":return v.default.PTT_STREAM_TYPE.AMR_NB;case"audio/3gpp":default:return v.default.PTT_STREAM_TYPE.UNKNOWN}}((0,b.unproxy)(this.props.mediaData).mimetype),t.pttPlaybackSpeed=function(e){switch(e){case 1:return v.default.PTT_PLAYBACK_SPEED_TYPE.SPEED_1;case 1.5:return v.default.PTT_PLAYBACK_SPEED_TYPE.SPEED_1_5;case 2:return v.default.PTT_PLAYBACK_SPEED_TYPE.SPEED_2;default:throw new Error("Invalid playback rate: ".concat(e))}}(this.props.pttPrefs.playbackRate),null!=this.state.audioDuration&&(t.pttDuration=Math.round(this.state.audioDuration)),t.commit(),this._pttPlaybackWamEvent=null)}}function D(e){var t,a=e.spinner&&null==e.button?o.createElement("button",{className:S.default.button,onClick:e.action},o.createElement("div",{className:S.default.spinner},e.canCancel?o.createElement(f.PendingCancel,{outgoingMsg:e.outgoingMsg}):o.createElement(f.Pending,{outgoingMsg:e.outgoingMsg}))):null,r=e.icon&&null==e.button&&!e.spinner?o.createElement("button",{className:S.default.button,onClick:e.action},e.icon):null,i=null!=e.fileSize&&0!==e.fileSize?o.createElement("div",{className:S.default.metadata},p.default.filesize(e.fileSize)):null,s=null!==(t=e.children)&&void 0!==t?t:o.createElement(T.default,{currentTime:0,duration:100,outgoing:e.outgoingMsg,played:Boolean(e.played),disabled:!0}),d=(0,n.default)(S.default.audio,{[S.default.isGallery]:e.displayType===h.default.DISP_TYPE.STARRED_MSGS||e.displayType===h.default.DISP_TYPE.GALLERY});return o.createElement("div",{className:d},o.createElement("div",{className:S.default.controls},e.button,a,r),o.createElement("div",{className:S.default.body},o.createElement(l.InvisibleLabel,null,p.default.t(20)),s,i))}w.CONCERNS={pttPrefs:["playbackRate"]};var R=(0,M.default)((0,A.default)((0,m.default)(w)),w.CONCERNS);class L extends R{handleKeyActivation(){return this.getComponent().handleKeyActivation()}}function k(e,t){var a=null==t?void 0:t.audioDuration;if(null!=a)return a;var r=null==e.duration?null:parseFloat(e.duration);return null==r||Number.isNaN(r)?0:r}t.default=L,L.defaultProps={pttPrefs:C.default}},92222:(e,t,a)=>{"use strict";var r=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return i.createElement(s.default,{value:e.currentTime,min:0,max:e.duration,smallSkip:1,largeSkip:10,onChange:e.onChange,disabled:e.disabled,theme:n(e)})};var i=r(a(2784)),s=r(a(14240));function n({outgoing:e,played:t}){return e?t?s.SmoothRangeInputTheme.AUDIO_OUTGOING_PLAYED:s.SmoothRangeInputTheme.AUDIO_OUTGOING_UNPLAYED:t?s.SmoothRangeInputTheme.AUDIO_INCOMING_PLAYED:s.SmoothRangeInputTheme.AUDIO_INCOMING_UNPLAYED}},3406:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,s.default)(d.icon,function({played:e,isSentByMe:t}){return t?d.gray:e?d.blue:d.green}(e),{[d.outgoing]:e.isSentByMe,[d.incoming]:!e.isSentByMe});return n.createElement("div",{className:o.default.wrapper},n.createElement("div",{className:t},n.createElement(l.default,{name:"ptt-status"})))};var s=i(a(72779)),n=r(a(2784)),o=i(a(10078)),l=i(a(82631)),d={incoming:o.default.incoming,outgoing:o.default.outgoing,green:o.default.green,blue:o.default.blue,gray:o.default.gray,icon:o.default.icon}},11178:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,{msg:a,theme:r}=e;if(a.isViewOnce)return null;function i(){var{theme:t}=e;return["conversation","starred","msgInfo"].includes(t)?58:79}switch(a.type){case m:case _:case g:case S:var o=(0,l.isMediaTypeWithImage)(a.mediaData),{preview:M,fullPreviewData:b}=a.mediaData;(o||null!=M||null!=b)&&(t=n.createElement(l.default,{mediaData:a.mediaData}));break;case v:a.body&&(t=n.createElement("div",{style:{backgroundImage:"url(data:image/jpeg;base64,".concat(a.body,")")},className:h.default.image}));break;case p:a.thumbnail&&(t=n.createElement("div",{style:{backgroundImage:'url("data:image/jpeg;base64,'.concat(a.thumbnail,'")')},className:h.default.image}));break;case E:t=n.createElement(u.default,{wid:c.default.getThumbnailWidFromVcard(a.vcard),thumb:(0,f.vcardThumbnail)(a.vcard),quoted:!0,square:!0,size:i()});break;case y:t=n.createElement(u.default,{size:i(),square:!0,quoted:!0});break;case C:a.paymentAmount1000&&a.paymentCurrency&&(t=n.createElement(d.default,{currency:a.paymentCurrency,amount1000:a.paymentAmount1000,isQuoted:!0,isQuotedInComposeBox:"composeBox"===r}));break;case T:a.thumbnail&&(t=n.createElement("div",{className:h.default.image,style:{backgroundImage:'url("data:image/jpeg;base64,'.concat(a.thumbnail,'")')}}))}var P=(0,s.default)(h.default.imageWrapper,{[h.default.composeBox]:"composeBox"===r,[h.default.statusV3]:"statusV3"===r,[h.default.isPayment]:a.type===C});return t?n.createElement("div",{className:P},n.createElement("div",{className:h.default.msgImage},t)):null};var s=i(a(72779)),n=r(a(2784)),o=i(a(50935)),l=r(a(21644)),d=i(a(69353)),u=i(a(81031)),c=i(a(15118)),h=i(a(8584)),f=a(84990),{CHAT:p,IMAGE:m,VIDEO:_,LOCATION:v,DOCUMENT:g,VCARD:E,MULTI_VCARD:y,PRODUCT:S,PAYMENT:C,ORDER:T}=o.default.MSG_TYPE},93456:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(72779)),n=a(91460),o=r(a(2784)),l=i(a(71874)),d=i(a(65468)),u=i(a(79711)),c=i(a(50935)),h=a(19741),f=a(95595),p=i(a(98294)),m=i(a(17957)),_=a(83974),v=i(a(58885)),g=i(a(55043)),E=i(a(13531)),y=i(a(11178)),S=i(a(40675)),C=i(a(45204)),T=a(64658),M=i(a(57185)),b=r(a(75074)),P=i(a(68384)),A=a(75637);class I extends o.PureComponent{constructor(...e){super(...e),this.ProductCatalogSession=new g.default,this.state={hover:!1},this.onClick=()=>{var{rootMsg:e,msg:t}=this.props;if(t.isStatusV3)e&&e.isQuotedMsgAvailable?M.default.find(t.sender).then((r=>{var i=a(82163).default;u.default.openModalMedia(o.createElement(i,{removeTopDrawer:!1,statusV3:r,msgKey:t.id,onMsgNotFound:()=>{e&&(e.isQuotedMsgAvailable=!1)}}),{transition:"quoted-status-v3-modal"})})):u.default.openToast(o.createElement(b.default,{msg:m.default.t(1303),id:(0,b.genId)()}));else{if(null!=t.asProductInquiry)return this._onProductInquiry(t.asProductInquiry);if(!e||e.isQuotedMsgAvailable){var r=t.id,i=t.chat,s=v.default.get(r),l=i.getSearchContext(s||r,null==e?void 0:e.unsafe());l&&(l.slideToMsg=!0),u.default.openChatAt(i,l).then((e=>{if(e){var a=v.default.get(t.id);a&&(0,n.delayMs)(500).then((()=>{u.default.openMediaViewerForAlbumMedia((0,T.unproxy)(a))}))}})),s||l.collection.loadAroundPromise.catchType(h.E404,(()=>{var t=null==e?void 0:e.unsafe(),a=null==t?void 0:t.chat;null!=t&&null!=a&&u.default.openChatAt(a,a.getSearchContext(t))}))}}},this.onMouseOver=()=>{this.hoverable()&&this.setState({hover:!0})},this.onMouseEnter=()=>{this.hoverable()&&this.setState({hover:!0})},this.onMouseLeave=()=>{this.state.hover&&this.setState({hover:!1})}}componentDidMount(){var{msg:e,t}=this.props,a=e.asProductInquiry;null!=a&&(a.businessOwnerJid&&(0,A.createWid)(a.businessOwnerJid)&&(null!=t&&(a.t=t),d.default.addMsgAsProduct((0,T.unproxy)(a.unsafe()))))}_onProductInquiry(e){var{t}=this.props,a=e.businessOwnerJid&&(0,A.createWid)(e.businessOwnerJid);if(a){var r=d.default.get(a);if(r){var i=e.productId&&r.productCollection.get(e.productId),s=e.productId&&r.msgProductCollection.get(e.productId);if(i||s){var n=s;if(i&&null!=t&&i.t>=t&&(n=i,s&&r.productCollection.remove(s)),n)return(0,_.logProductInquiryClick)({product:(0,T.unproxy)(n),catalogSessionId:this.ProductCatalogSession.toString()}),u.default.openDrawerRight(o.createElement(E.default,{product:n,chat:e.chat,refreshCarousel:!0,sessionId:this.ProductCatalogSession.toString()}),"slide-left",this.props.uim)}}}}hoverable(){return!this.state.hover&&!!this.props.rootMsg}render(){var{msg:e,displayType:t,chat:a,rootMsg:r,composeQuotedMsgRemoteJid:i}=this.props,n=a.assignedColor(e.sender),d=[c.default.DISP_TYPE.CONVERSATION,c.default.DISP_TYPE.STARRED_MSGS].includes(t),u=i||r&&r.quotedRemoteJid,h=d?"button":null,p=o.createElement(l.default,{msg:e,contact:e.senderObj,role:h,chat:a,displaySelf:P.default.equals(e.sender,(0,f.getMaybeMeUser)()),quotedRemoteJid:u,disableClick:!0}),m=(0,s.default)(S.default.quotedMsg,{[S.default.statusV3QuotedMsg]:"statusV3"===this.props.theme,[S.default.composeBoxQuotedMsg]:"composeBox"===this.props.theme,[S.default.hover]:this.state.hover}),_=o.createElement("div",{className:S.default.msgText},p,o.createElement(C.default,{msg:e,theme:this.props.theme})),v=t===c.default.DISP_TYPE.STARRED_MSGS?"starred":this.props.theme;return o.createElement("div",{className:S.default.container,onMouseOver:d?this.onMouseOver:null,onMouseEnter:d?this.onMouseEnter:null,onMouseLeave:d?this.onMouseLeave:null},o.createElement("div",{className:m,role:h,onClick:d?this.onClick:null},o.createElement("span",{className:(0,s.default)("bg-color-".concat(n),S.default.colorBar)}),o.createElement("div",{className:S.default.msgBody,dir:d?null:e.dir},_),o.createElement(y.default,{msg:e.unsafe(),theme:v})))}}var O=(0,p.default)(I);t.default=O},45204:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(72779)),n=a(91460),o=r(a(2784)),l=i(a(19899)),d=i(a(50935)),u=i(a(91581)),c=r(a(96452)),h=i(a(73540)),f=a(62902),p=i(a(17957)),m=i(a(20642)),_=i(a(40210)),v=i(a(56266)),g=a(72457),E=i(a(34964)),y=i(a(72259)),S=i(a(77837)),C=a(36465),T=i(a(72424)),M=i(a(82562)),b=a(89526),{CHAT:P,IMAGE:A,VIDEO:I,AUDIO:O,STICKER:N,PAYMENT:w,ORDER:D,LIST:R}=d.default.MSG_TYPE;class L extends o.PureComponent{constructor(...e){super(...e),this._handleDownloadMedia=()=>this.props.msg.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:_.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1})}componentDidMount(){var{listeners:e,msg:t}=this.props;t.type===N&&t.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:_.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1}),t.type===d.default.MSG_TYPE.DOCUMENT&&t.isVcardOverMmsDocument&&(!t.mediaData||!t.mediaData.mediaBlob)&&t.isTrusted()&&t.size<=1024*T.default.mmsVcardAutodownloadSizeKb&&t.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:_.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1}).checkpoint(this.props.rejectOnUnmount()).then((()=>(0,n.delayMs)(0))).catchType(c.Unmount,(()=>{})),t.type===d.default.MSG_TYPE.DOCUMENT&&t.mediaData&&t.isVcardOverMmsDocument&&e.add(t.mediaData,"change:parsedVcards",(()=>{this.forceUpdate()}))}render(){var{msg:e,theme:t}=this.props,a=[],r=!1;e.hasSymbol()&&e.type!==N&&e.type!==D&&a.push(o.createElement(v.default,{msg:e.unsafe(),key:"msg-symbol"})),(e.type!==I||e.isGif||e.caption)&&e.type!==O||a.push(l.default.durationStr(Number(e.duration))+" ");var i,n,c=f.Configuration.QuotedMention({mentions:e.mentionMap()});if(e.type===P||e.type===A||e.type===I||e.isFromTemplate||e.isDynamicReplyButtonsMsg)(null===(i=e.asViewOnce)||void 0===i?void 0:i.isViewOnce)?(0,b.isViewed)(e)?(n=p.default.t(1434),r=!0):(0,b.isExpired)(e)?(n=p.default.t(1424),r=!0):n=e.type===A?p.default.t(1428):p.default.t(1431):n=e.isFromTemplate&&e.type===d.default.MSG_TYPE.CHAT&&e.title?"*"+e.title+"*\n"+e.body:(0,h.default)(e.unsafe(),!1),a.push(o.createElement(u.default,{formatters:c,className:"quoted-mention",text:n,textLimit:e.initialPageSize,direction:"auto",key:"status"}));else if(N===e.type){var m="composeBox"===this.props.theme?"composeBoxQuoted":"quoted";a.push(o.createElement(M.default,{key:"sticker",mediaData:e.mediaData,theme:m,downloadMedia:this._handleDownloadMedia}))}else if(e.type===R){var _,y;a.push(o.createElement("div",{dir:"auto",key:"list",className:S.default.listMessageQuote},null===(_=e.list)||void 0===_?void 0:_.title,o.createElement("br",null),null===(y=e.list)||void 0===y?void 0:y.description))}else e.type===w?e.paymentAmount1000&&e.paymentCurrency?a.push(o.createElement(E.default,{key:"payment",subtype:e.subtype,receiverJid:e.paymentMessageReceiverJid,isQuoted:!0})):a.push(p.default.t(1722)):e.type===D?a.push(o.createElement(g.OrderDescription,{msg:e.unsafe(),showMessage:!0})):a.push(o.createElement(u.default,{formatters:c,className:"quoted-mention",text:(0,C.formatQuotedMsg)(e),textLimit:e.initialPageSize,direction:"auto",key:"status"}));var T=(0,s.default)(S.default.messageText,{[S.default.composeBoxQuotedMsg]:"composeBox"===this.props.theme,[S.default.dimmed]:r}),L="conversation"===t||"starred"===t?"button":null;return o.createElement("div",{className:T,dir:e.dir,role:L},a)}}var k=(0,y.default)((0,m.default)(L));t.default=k},36465:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.formatQuotedMsg=function(e){var{MSG_TYPE:t}=i.default;switch(e.type){case t.DOCUMENT:return e.isVcardOverMmsDocument?d(e):(0,s.default)(e.unsafe());case t.MULTI_VCARD:return l(e);default:return(0,s.default)(e.unsafe())}},t.formatMultiVcardText=l,t.formatVcardOverMmsText=d;var i=r(a(50935)),s=r(a(73540)),n=r(a(17957)),o=a(84990);function l(e){var t,a=null===(t=e.vcardList)||void 0===t?void 0:t.length;return a>0?n.default.t(992,{count:a,_plural:a}):n.default.t(991)}function d(e){var t,a;if(null===(t=e.mediaData)||void 0===t?void 0:t.parsedVcards){var{parsedVcards:r}=e.mediaData;return r.length>1?n.default.t(992,{count:r.length,_plural:r.length}):(0,o.vcardGetNameFromParsed)(r[0])||n.default.t(1575)}return null!=e.pageCount?n.default.t(992,{count:e.pageCount,_plural:e.pageCount}):(null===(a=e.mediaData)||void 0===a?void 0:a.filename)||n.default.t(1577)}},77674:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(43334)),l=i(a(79711)),d=i(a(91581)),u=i(a(17957)),c=i(a(28670));class h extends n.PureComponent{constructor(...e){super(...e),this.state={hover:!1},this.onMouseOver=()=>{this.setState({hover:!0})},this.onMouseEnter=()=>{this.setState({hover:!0})},this.onMouseLeave=()=>{this.setState({hover:!1})},this._getGroupName=()=>{var{quotedGroupJid:e}=this.props,t=o.default.get(e);return t&&t.formattedTitle},this.onClick=()=>{var{quotedGroupJid:e}=this.props;o.default.find(e).then((e=>l.default.openChatBottom(e)))}}hoverable(){return!this.state.hover&&!this.props.isComposePreview}render(){var{isComposePreview:e}=this.props,t=this._getGroupName();if(!t)return null;var a=(0,s.default)(c.default.quotedMsg,{[c.default.hover]:this.state.hover,[c.default.composeBoxQuotedMsg]:!!e});return n.createElement("div",{onMouseOver:this.onMouseOver,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,className:a},n.createElement("div",{className:c.default.msg,role:e?"none":"button",onClick:this.onClick},n.createElement("span",{className:c.default.colorBar}),n.createElement("div",{className:c.default.msgBody},n.createElement(d.default,{className:"quoted-mention",text:u.default.t(1180,{groupName:t}),direction:"auto",key:"status"}))))}}t.default=h},56089:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=(r(a(50935)),r(a(17957))),o=r(a(97816)),l=r(a(87472)),d=r(a(82631)),u=r(a(20385));class c extends s.Component{render(){var{msg:e}=this.props,t=e.isSentByMe?n.default.t(1223):n.default.t(1221);return s.createElement(u.default,{msg:e},s.createElement(o.default,{msg:e.unsafe(),theme:"placeholder"},s.createElement("div",{className:l.default.icon},s.createElement(d.default,{name:"recalled"})),t))}}t.default=c},76772:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=a(18164),o=(r(a(50935)),r(a(91581))),l=r(a(17957)),d=r(a(67212)),u=r(a(97816)),c=r(a(71726)),h=r(a(65857)),f=r(a(40207));class p extends s.Component{render(){var e,t=this.props.msg,a=t.paymentNoteMsg&&t.paymentNoteMsg.body,r=null;if(a){var i=(0,n.Conversation)({mentions:t.mentionMap(),links:t.getLinks(),trusted:t.isTrusted()});r=s.createElement("div",{className:h.default.caption},s.createElement(u.default,{msg:t.unsafe()},s.createElement(o.default,{text:a,selectable:!0,formatters:i,dirMismatch:t.rtl!==l.default.isRTL(),direction:t.dir})))}else e=s.createElement("div",{className:h.default.meta},s.createElement(c.default,{msg:t}));return s.createElement(d.default,{displayAuthor:this.props.displayAuthor,displayType:this.props.displayType,hasCaption:!!r,msg:t,quotedMsg:this.props.quotedMsg,hideMeta:!a},this.props.paymentInfo,e,r)}}p.CONCERNS={msg:["rtl","dir","isGroupMsg","isPSA","isSentByMe","senderObj","paymentNoteMsg"]};var m=(0,f.default)(p,p.CONCERNS);t.default=m},14240:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{value:t,min:a,max:r,smallSkip:i,largeSkip:l,onChange:f,disabled:p,theme:m}=e,[_,v]=(0,o.useState)(null),[g,E]=(0,o.useState)(!1),y=(0,o.useCallback)((()=>{E(!0)}),[E]),S=(0,o.useCallback)((()=>{E(!1)}),[E]),C=null!=_?_:t,T=100*(0,s.default)((C-a)/(r-a),0,1),M={width:"".concat(T,"%")},b=(0,n.default)(u.default.container,function(e){switch(e){case c.AUDIO_OUTGOING_UNPLAYED:return u.default.containerOutgoingUnplayed;case c.AUDIO_OUTGOING_PLAYED:return u.default.containerOutgoingPlayed;case c.AUDIO_INCOMING_UNPLAYED:return u.default.containerIncomingUnplayed;case c.AUDIO_INCOMING_PLAYED:return u.default.containerIncomingPlayed}}(m),{[u.default.containerDisabled]:p}),P=(0,o.useRef)(),A=(0,o.useRef)(),I=(0,o.useRef)(),O=(0,o.useCallback)((e=>{var t=(0,d.default)(A.current,"minPxRef.current"),i=(0,d.default)(I.current,"maxPxRef.current"),n=e.clientX,o=(0,s.default)((n-t)/(i-t),0,1);v(a+o*(r-a))}),[a,r]),N=(0,o.useCallback)((e=>{e.preventDefault(),0!==e.buttons?O(e):S()}),[S,O]),w=(0,o.useCallback)((()=>{S();var e=(0,d.default)(_,"uncommittedValue");null==f||f(e),v(null)}),[S,f,_]);(0,o.useEffect)((()=>{if(g)return window.addEventListener("mousemove",N),window.addEventListener("mouseup",w),()=>{window.removeEventListener("mousemove",N),window.removeEventListener("mouseup",w)}}),[N,w,g]);var D={transform:"translateX(".concat(T,"%)")};return o.createElement("div",{className:b,role:"slider","aria-valuenow":t,"aria-valuemin":a,"aria-valuemax":r,tabIndex:"0",onMouseDown:e=>{var t;e.preventDefault();var a=(0,d.default)(null===(t=P.current)||void 0===t?void 0:t.getBoundingClientRect(),"travelContainerRef.current?.getBoundingClientRect()");A.current=a.left,I.current=a.left+a.width,y(),O(e)},onKeyDown:e=>{if(!p){var n;switch(e.key){case h.ARROW_RIGHT:case h.ARROW_UP:n=i;break;case h.ARROW_LEFT:case h.ARROW_DOWN:n=-i;break;case h.PAGE_UP:n=l;break;case h.PAGE_DOWN:n=-l}if(null!=n){var o=(0,s.default)(t+n,a,r);null==f||f(o)}}}},o.createElement("div",{className:u.default.track}),o.createElement("span",{className:u.default.progress,style:M}),o.createElement("div",{className:u.default.thumbTravelContainer,ref:P},o.createElement("div",{className:u.default.thumbContainer,style:D},o.createElement("div",{className:u.default.thumb}))))},t.SmoothRangeInputTheme=void 0;var s=i(a(27875)),n=i(a(72779)),o=r(a(2784)),l=i(a(10792)),d=i(a(61941)),u=i(a(5593)),c=a(28103).Mirrored(["AUDIO_OUTGOING_UNPLAYED","AUDIO_OUTGOING_PLAYED","AUDIO_INCOMING_UNPLAYED","AUDIO_INCOMING_PLAYED"]);t.SmoothRangeInputTheme=c;var{KEYBOARD_EVENT_KEY_VALUE:h}=l.default},20299:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(72779)),n=r(a(2784)),o=a(75459),l=i(a(3456)),d=i(a(40207));class u extends n.PureComponent{render(){var{children:e,className:t,msg:a}=this.props;if(!a)return n.createElement(n.Fragment,null,e);var r=[a.broadcast,a.isSentByMe,a.labels&&a.labels.length&&(0,o.canDisplayLabel)(),a.star].filter(Boolean).length,i=[l.default.icons1,l.default.icons2,l.default.icons3,l.default.icons4],d=r>0?i[r-1]:"";return n.createElement("span",{className:t},e,n.createElement("span",{className:(0,s.default)(l.default.spacer,d)}))}}u.CONCERNS={msg:["broadcast","isEphemeral","isSentByMe","labels","star"]};var c=(0,d.default)(u,u.CONCERNS);t.default=c},85454:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(19899)),o=r(a(50935)),l=r(a(7470)),d=r(a(46478)),u=a(62436),c=r(a(91581)),h=r(a(6660)),f=r(a(41117)),p=r(a(44343)),m=r(a(17957)),_=r(a(20642)),v=a(97526),g=r(a(61941)),E=r(a(51549)),y=r(a(82631)),S=r(a(3111)),C=r(a(58355));class T extends s.Component{constructor(e){super(e),this._setWrapperRef=e=>{this._wrapperRef=e},this._setGalleryMsgRef=e=>{this._galleryMsgRef=e},this._setHotKeysRef=e=>{this._hotKeysRef=e},this.onSelectionChange=(e,t)=>{var a="focus"===e;if(a){var r=this._hotKeysRef;r&&(h.default.focus(r),t&&(0,u.scrollIntoViewIfNeeded)(r))}this.setState({current:a})},this.onActiveChange=(e,t)=>{if("focus"===e){var a=this._hotKeysRef;a&&(h.default.focus(a),t&&(0,u.scrollIntoViewIfNeeded)(a))}this.setState({active:!!e})},this.mouseOver=()=>{this.state.hover||this.setState({hover:!0})},this.mouseEnter=()=>{this.state.hover||this.setState({hover:!0})},this.mouseLeave=()=>{this.state.hover&&this.setState({hover:!1})},this.onEnter=e=>{e.stopPropagation(),e.preventDefault(),this.props.onClickMsg&&this.props.onClickMsg(this.props.msg)},this.openContextMenu=()=>{this._wrapperRef&&this._wrapperRef.openContextMenu()},this.onFocus=()=>{this.setState({focus:!0}),this.indicateFocus()},this.onBlur=()=>{this.setState({focus:!1})},this.indicateFocus=()=>{var e;null===(e=this._galleryMsgRef)||void 0===e||e.indicateFocus()},this.getWrapperRef=()=>this._wrapperRef;var{currSelection:t,activeSelection:a,msg:r}=e;this.state={hover:!1,current:!!t&&t.value===r,active:!!a&&a.value===r,focus:!1}}componentDidMount(){var{msg:e,currSelection:t,activeSelection:a,listeners:r}=this.props;t&&r.add(t,e.id.toString(),this.onSelectionChange),a&&r.add(a,e.id.toString(),this.onActiveChange)}getContainerElement(){return(0,g.default)(this._hotKeysRef,"this._hotKeysRef")}render(){var{msg:e,selectedMessages:t,displayType:a}=this.props,r=e.senderObj.formattedName,i=e.chat.isUser?l.default.assertGet(e.to).formattedName?l.default.assertGet(e.to).formattedName:(0,S.default)(e.to):e.chat.title(),u=a===o.default.DISP_TYPE.GALLERY?null:s.createElement("div",{className:E.default.title},s.createElement("div",{className:E.default.titleMain},s.createElement("div",{className:E.default.avatar},s.createElement(d.default,{id:e.senderObj.id,size:26})),s.createElement(c.default,{className:E.default.author,text:r,direction:"auto",titlify:!0}),s.createElement("span",{className:E.default.divider}),s.createElement(c.default,{className:E.default.chat,text:i,direction:"auto",titlify:!0})),s.createElement("div",{className:E.default.meta,dir:"auto"},n.default.relativeStr(e.t)),s.createElement("div",{className:E.default.chevron},s.createElement(y.default,{name:"chevron-right-alt",directional:!0}))),h={enter:this.onEnter};h[m.default.LR("right","left")]=this.openContextMenu;var _=this.props.selectable||this.state.hover&&a===o.default.DISP_TYPE.GALLERY;return s.createElement(p.default,{onRef:this._setHotKeysRef,handlers:h,onFocus:this.onFocus,onBlur:this.onBlur},s.createElement(f.default,{ref:this._setGalleryMsgRef,hover:this.state.hover,current:this.state.current&&this.state.focus,active:this.state.active,onClick:()=>this.props.onClickMsg&&this.props.onClickMsg(e,t&&!t.isSelected(e)),onMouseEnter:this.state.hover?null:this.mouseEnter,onMouseOver:this.state.hover?null:this.mouseOver,onMouseLeave:this.state.hover?this.mouseLeave:null},u,s.createElement(C.default,{msg:e,key:e.id.toString(),ref:this._setWrapperRef,current:this.state.current&&this.state.focus,displayType:a||o.default.DISP_TYPE.STARRED_MSGS,isMsgVisible:this.props.isMsgVisible,selectable:_,selectedMessages:t,onMessageSelect:this.props.onMessageSelect,position:v.MsgPosition.END,tailOverride:"left",onProductClick:this.props.onProductClick,onMessageClick:this.props.onMessageClick})))}}var M=(0,_.default)(T);t.default=class extends M{getWrapperRef(){return this.getComponent().getWrapperRef()}getContainerElement(){return this.getComponent().getContainerElement()}}},76841:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(50935)),l=i(a(17957)),d=i(a(40207)),u=i(a(59495)),c=i(a(82631)),h=o.default.MSG_TYPE;class f extends n.PureComponent{render(){var e,t,a,{msg:r}=this.props,i=r.ack,d=r.isMedia&&!r.caption&&!r.isViewOnce&&r.type!==h.AUDIO||r.type===h.LOCATION&&!r.loc&&!r.isLive;return i<o.default.ACK.SENT?(e="msg-time",t=l.default.t(17)):i===o.default.ACK.SENT?(e="msg-check",t=l.default.t(19)):i===o.default.ACK.RECEIVED?(e="msg-dblcheck",t=l.default.t(16)):(e="msg-dblcheck",t=l.default.t(18),a=u.default.ackBlue),n.createElement(c.default,{"aria-label":" ".concat(t," "),name:e,className:(0,s.default)(a,{[u.default.light]:d})})}}f.CONCERNS={msg:["ack","isMedia","isViewOnce","caption","type","loc","isLive"]};var p=(0,d.default)(f,f.CONCERNS);t.default=p},38906:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(71874)),l=i(a(131)),d=a(97526),u=i(a(71726)),c=i(a(40210)),h=i(a(40207)),f=i(a(82562)),p=i(a(64061)),m=i(a(62884));class _ extends n.PureComponent{constructor(...e){super(...e),this._stopPropagation=e=>{e.stopPropagation()},this._handleDownloadMedia=()=>this.props.msg.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:c.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1})}componentDidMount(){this.props.msg.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:c.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1})}render(){var e=this.props.msg,t=this.props.displayAuthor&&!e.isSentByMe&&e.isGroupMsg,a=t?n.createElement("div",{className:p.default.author},n.createElement(o.default,{msg:e,contact:e.senderObj})):null,r=this.props.quotedMsg?n.createElement("div",{className:p.default.quote},this.props.quotedMsg):null,i=(0,s.default)(p.default.bubble,{[p.default.hasAuthor]:t,[p.default.isFirst]:this.props.position===d.MsgPosition.FRONT||this.props.position===d.MsgPosition.SINGLE,[p.default.isTransparent]:!e.quotedMsg&&!e.ctwaContext});return n.createElement("div",{className:i,onClick:this._stopPropagation},a,r,n.createElement(l.default,{msg:e.unsafe(),wrapperClass:p.default.ctwaContext}),n.createElement("div",{className:p.default.body},n.createElement(m.default,{mediaData:this.props.mediaData,msg:e},n.createElement(f.default,{mediaData:this.props.mediaData,theme:"conversation",isNewMsg:e.isNewMsg,downloadMedia:this._handleDownloadMedia,forwardRef:this.props.forwardRef,animateOnView:this.props.animateOnView})),n.createElement("div",{className:p.default.meta},n.createElement(u.default,{msg:e}))))}}_.CONCERNS={msg:["isNewMsg","isSentByMe","isGroupMsg","senderObj","quotedMsg","ctwaContext"]};var v=(0,h.default)(_,_.CONCERNS);t.default=v},62884:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(79711)),l=i(a(69345)),d=r(a(68084)),u=a(96645),c=i(a(40210)),h=i(a(10667)),f=i(a(40207)),p=i(a(96410));class m extends n.PureComponent{constructor(...e){super(...e),this._showMediaMissing=()=>{o.default.openModal(n.createElement(l.default,{msg:this.props.msg.unsafe()}))},this._downloadMedia=()=>{this.props.msg.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:c.default.WEBC_RMR_REASON_CODE.MSG_CLICK,isUserInitiated:!0})},this._cancelDownload=()=>{this.props.msg.cancelDownload()},this._cancelUpload=()=>{this.props.msg.cancelUpload()},this._resumeUpload=()=>{this.props.msg.resumeUpload()},this._resumeRemoteUpload=()=>{this.props.msg.resumeRemoteUpload()}}render(){var e,t,a=this.props.mediaData,{mediaStage:r}=a;switch(r){case u.MEDIA_DATA_STAGE.RESOLVED:e=null,t=null;break;case u.MEDIA_DATA_STAGE.FETCHING:e=this._cancelDownload,t=n.createElement(d.PendingCancel,null);break;case u.MEDIA_DATA_STAGE.NEED_POKE:e=this._downloadMedia,t=n.createElement(d.Download,{filesize:a.size});break;case u.MEDIA_DATA_STAGE.UPLOADING:e=this._cancelUpload,t=n.createElement(d.PendingCancel,null);break;case u.MEDIA_DATA_STAGE.NEED_UPLOAD:e=this._resumeUpload,t=n.createElement(d.Upload,{filesize:a.size});break;case u.MEDIA_DATA_STAGE.REMOTE_NEED_UPLOAD:e=this._resumeRemoteUpload,t=n.createElement(d.Upload,{filesize:a.size});break;case u.MEDIA_DATA_STAGE.ERROR_MISSING:e=this._showMediaMissing,t=n.createElement(d.Upload,{filesize:a.size});break;case u.MEDIA_DATA_STAGE.ERROR_UNSUPPORTED:e=this._showMediaMissing,t=n.createElement(d.Download,{filesize:a.size});break;case u.MEDIA_DATA_STAGE.SENDING:case u.MEDIA_DATA_STAGE.DECRYPTING:case u.MEDIA_DATA_STAGE.ERROR_TOO_LARGE:case u.MEDIA_DATA_STAGE.INIT:case u.MEDIA_DATA_STAGE.PREPARING:case u.MEDIA_DATA_STAGE.REMOTE_UPLOADING:case u.MEDIA_DATA_STAGE.REUPLOADING:case u.MEDIA_DATA_STAGE.EXISTS:t=n.createElement(d.Pending,null);break;case u.MEDIA_DATA_STAGE.PROGRESSIVE_READY:throw new Error("invalid value for sticker mediaStage '".concat(r,"'"))}return n.createElement("div",{className:(0,s.default)(h.default.thumb,p.default.cursorAuto),onClick:e},t,this.props.children)}}m.CONCERNS={mediaData:["mediaStage","size"]};var _=(0,f.default)(m,m.CONCERNS);t.default=_},75681:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(91581)),o=r(a(33492)),l=r(a(74824)),d=a(58355);class u extends s.PureComponent{constructor(...e){super(...e),this.state={date:void 0,visible:!0}}updateDateMarkerText(e){this.setState({date:e})}setVisibility(e){this.setState({visible:e})}render(){var e;return this.state.date&&this.state.visible&&(e=s.createElement("div",{className:o.default.sticky},s.createElement(d.SystemBubble,{theme:"sticky"},s.createElement(n.default,{direction:"auto",text:this.state.date})))),s.createElement(l.default,{transitionName:"slide-down-date"},e)}}t.default=u},65411:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a,{msg:r,link:i,displayType:c}=e;if(!r&&!i)return null;if(null==r||null===(t=r.ctwaContext)||void 0===t?void 0:t.isSuspiciousLink)a=l.default.t(1338);else if(i)i.suspiciousCharacters&&i.suspiciousCharacters.size&&(a=l.default.t(1338));else if(r){var h=r.getSuspiciousLinks().length;if(h){var f=r.getLinks().length;a=1===f||c===o.default.DISP_TYPE.GALLERY?l.default.t(1338):l.default.t(1339,{count:h,_plural:h})}}return a?n.createElement("div",{className:(0,s.default)(d.default.container,{[d.default.isLinkMsg]:Boolean(i),[d.default.ctwaContainer]:null!=(null==r?void 0:r.ctwaContext)})},n.createElement(u.default,{name:"alert",display:"inline",className:d.default.icon}),n.createElement("span",{className:d.default.text},a)):null};var s=i(a(72779)),n=r(a(2784)),o=i(a(50935)),l=i(a(17957)),d=i(a(60769)),u=i(a(82631))},48707:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(64)),l=i(a(79711)),d=i(a(50935)),u=r(a(35387)),c=i(a(17957)),h=a(90088),f=i(a(20642)),p=i(a(41967)),m=a(37960),_=i(a(40207)),v=i(a(82338)),g=i(a(82631)),E=i(a(4353)),{QUICK_REPLY:y,URL:S,CALL:C}=d.default.TEMPLATE_BUTTON_SUBTYPE;function T(e,t){var a=(0,h.findLink)(e,!1,t.from);if(a&&a.suspiciousCharacters)return l.default.openModal(n.createElement(v.default,{link:a}));var r=n.createElement(o.default,{a8nText:"popup-controls-go",type:"primary",onClick:()=>function(e){(0,u.openExternalLink)(e),l.default.closeModal()}(e),key:0},c.default.t(1595)),i=n.createElement(o.default,{a8nText:"popup-controls-cancel",type:"plain",onClick:()=>l.default.closeModal(),key:1},c.default.t(1547)),s=d.default.TEMPLATE_URL_START+d.default.TEMPLATE_URL_END;l.default.openModal(n.createElement(p.default,{title:c.default.t(1106),actions:[i,r]},n.createElement("div",null,c.default.t(1107)),n.createElement(u.default,{href:e,isLongTemplateUrl:e.length>s},e)))}class M extends n.PureComponent{constructor(...e){super(...e),this.handleClick=e=>{var t,{subtype:a,url:r,displayText:i,selectionId:s,id:d}=e;a===C?(t=n.createElement(o.default,{a8nText:"popup-controls-ok",type:"primary",onClick:()=>l.default.closeModal(),key:0},c.default.t(1709)),l.default.openModal(n.createElement(p.default,{actions:[t]},c.default.t(391)))):a===S&&r?T(r,this.props.msg):a===y&&(0,m.sendTextMsgToChat)(this.props.chat,i,{quotedMsg:this.props.msg,selectedIndex:parseInt(d,10),selectedId:s}).then((()=>{e.selected=!0}))}}componentDidMount(){var{msg:e}=this.props;e.buttons&&e.buttons.length&&e.buttons.forEach((e=>this.props.listeners.add(e,"change:selected",(()=>this.forceUpdate()))))}render(){var e,{msg:t}=this.props;return t.buttons&&(e=t.buttons.map((e=>{var t;switch(e.subtype){case C:t=n.createElement(g.default,{name:"hsm-call",className:E.default.icon});break;case S:t=n.createElement(g.default,{name:"hsm-link",className:E.default.icon})}var a=e.selected?void 0:()=>this.handleClick(e);return n.createElement("button",{key:e.id,className:(0,s.default)(E.default.actionButton,{[E.default.firstButton]:0===parseInt(e.id,10)&&e.subtype!==y,[E.default.disabled]:e.selected}),onClick:a},t,n.createElement("span",{className:E.default.actionText},e.displayText))}))),n.createElement("div",{className:(0,s.default)({[E.default.quickReply]:t.isQuickReply,[E.default.callUrl]:!t.isQuickReply})},n.createElement("div",{className:E.default.buttonContainer},e))}}M.CONCERNS={msg:["buttons","isQuickReply","from"]};var b=(0,f.default)((0,_.default)(M,M.CONCERNS));t.default=b},20783:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{dir:t,footer:a,isShown:r,msg:i,rtl:f,type:p,trusted:m}=e,_=f!==u.default.isRTL();if(r&&a){var v=(0,s.default)(h.default.footer,{[h.default.isMedia]:p!==o.default.MSG_TYPE.CHAT,[h.default.dirMismatch]:_}),{formatters:g,selectable:E}=i.isDynamicReplyButtonsMsg?(0,d.enableHeaderAndFooterFormatting)(i.getFooterLinks(),!0===m):{};return n.createElement(c.default,{className:v,spacer:!f,msg:i},n.createElement(l.default,{text:a,direction:t,dirMismatch:_,selectable:E,formatters:g}))}return null};var s=i(a(72779)),n=r(a(2784)),o=i(a(50935)),l=i(a(91581)),d=a(38311),u=i(a(17957)),c=i(a(97816)),h=i(a(52283))},29152:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(72779)),n=r(a(2784)),o=a(25675),l=i(a(20458)),d=i(a(92969)),u=i(a(98788)),c=a(18164),h=i(a(50935)),f=i(a(131)),p=i(a(12396)),m=i(a(91581)),_=i(a(47642)),v=a(35387),g=a(38311),E=a(12023),y=i(a(17957)),S=i(a(9389)),C=i(a(97816)),T=i(a(71726)),M=a(62761),b=i(a(85791)),P=a(27985),A=i(a(65411)),I=i(a(20783)),O=i(a(25528)),N=i(a(20385)),w=i(a(24898));class D extends n.PureComponent{render(){var e,t,a,r,{msg:i,displayAuthor:D,trusted:R,displayType:L}=this.props;if(R&&(i.linkPreview||i.ctwaContext))if(i.ctwaContext)e=n.createElement(f.default,{msg:i.unsafe(),wrapperClass:O.default.linkPreview});else if(i.matchedText&&(0,E.isParsableOnlineVideoURL)(i.richPreviewType,i.matchedText,i.doNotPlayInline))e=n.createElement("div",{className:O.default.linkPreview},n.createElement(w.default,{msg:i.unsafe()}));else{var k=(0,P.parseAPICmd)(i.matchedText);if(k.resultType===o.APICmd.GROUP_INVITE){if(e=n.createElement("div",{className:O.default.linkPreview},n.createElement(S.default,{msg:i.unsafe(),displayType:L,invite:!0})),L!==h.default.DISP_TYPE.GALLERY){var x=i.isSentByMe?y.default.t(750):y.default.t(737);t=n.createElement(l.default,{items:[{label:x,onClick:()=>{var e=i.matchedText;(0,v.openExternalLink)(e)}}]})}}else if(k.resultType===o.APICmd.CATALOG){if(e=n.createElement("div",{className:O.default.linkPreview},n.createElement(u.default,{msg:i.unsafe()})),L!==h.default.DISP_TYPE.GALLERY){var F=y.default.t(1150);t=n.createElement(l.default,{items:[{label:F,onClick:()=>{var e=i.matchedText;(0,v.openExternalLink)(e)}}]})}}else e=n.createElement("div",{className:O.default.linkPreview},n.createElement(S.default,{msg:i.unsafe(),displayType:L}))}var G,U,B=p.default.matchLargeEmojiPattern(i.body);if(B){var j=1===B.length&&p.default.getHeartEmojis().some((e=>p.default.normalizeEmoji(e)===p.default.normalizeEmoji(B[0])));a=n.createElement(b.default,{animation:j,emojis:B}),r=!0}else{a=n.createElement(_.default,{text:i.body,textLimit:i.initialPageSize},(e=>{var t=(0,c.Conversation)({mentions:i.mentionMap(),links:i.getLinks(e.textLimit),selectable:true,trusted:!0===R});return n.createElement(m.default,{text:i.body,className:L===h.default.DISP_TYPE.GALLERY?"message-text-link":"",dirMismatch:i.rtl!==y.default.isRTL(),direction:i.dir,inferLinesDirection:!0,formatters:t,selectable:true,textLimit:e.textLimit})}))}if(i.supportsMessageFooter){var{formatters:V,selectable:H}=i.isDynamicReplyButtonsMsg?(0,g.enableHeaderAndFooterFormatting)(i.getHeaderLinks(),!0===R):{};G=i.title?n.createElement("div",{className:O.default.title},n.createElement(m.default,{text:i.title,dirMismatch:i.rtl!==y.default.isRTL(),direction:i.dir,selectable:H,formatters:V})):null,U=n.createElement(I.default,{dir:i.dir,footer:i.footer,isShown:i.supportsMessageFooter,msg:i.unsafe(),rtl:i.rtl,trusted:R,type:i.type})}var W,K=L!==h.default.DISP_TYPE.GALLERY&&!i.isPSA&&!r;this.props.quotedMsg&&(W=n.createElement("div",{className:O.default.quote},this.props.quotedMsg));var Y,q=this.props.displayAuthor&&!i.isSentByMe&&i.isGroupMsg,z=(0,M.showForwarded)(i),Q=i.getSuspiciousLinks().length>0,J=!!t||!!i.hasTemplateButtons||!!i.isDynamicReplyButtonsMsg;return J&&(Y=n.createElement("div",{className:O.default.meta},n.createElement(T.default,{msg:i}))),n.createElement(N.default,{msg:i,displayType:L,displayAuthor:D,hideMeta:J},n.createElement(d.default,{className:(0,s.default)({[O.default.hasAuthor]:q,[O.default.forwarded]:z,[O.default.hasSuspiciousLinks]:Q}),contact:i.senderObj,msg:i.unsafe()},W,!i.ctwaContext&&n.createElement(A.default,{msg:i.unsafe(),displayType:L}),e,n.createElement(C.default,{msg:i.unsafe(),spacer:i.isFromTemplate||i.isDynamicReplyButtonsMsg?K&&!i.footer:K,"data-id":i.id},G,a,U,Y),t))}}t.default=D},20385:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,s.default)(h.default.bubble,{[h.default.isPSA]:e.msg.isPSA}),a=!1!==e.displayAuthor&&(!e.msg.isSentByMe&&e.msg.isGroupMsg)?n.createElement(o.default,{msg:e.msg,contact:e.msg.senderObj}):null,r=(0,c.showForwarded)(e.msg)?n.createElement(d.default,{msg:e.msg.unsafe()}):null,i=e.displayType===l.default.DISP_TYPE.GALLERY||e.hideMeta?null:n.createElement("div",{className:h.default.meta},n.createElement(u.default,{msg:e.msg}));return n.createElement("div",{className:t},a,r,e.children,i)};var s=i(a(72779)),n=r(a(2784)),o=i(a(71874)),l=i(a(50935)),d=i(a(4336)),u=i(a(71726)),c=a(62761),h=i(a(87413))},900:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return s.createElement("div",{className:n.default.shade})};var s=i(a(2784)),n=r(a(45167))},40713:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DisplayTheme=void 0;var r=a(28103).Mirrored(["Album"]);t.DisplayTheme=r},62742:()=>{},63807:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(17957)),l=a(38203),d=i(a(33040));t.default=({count:e,textContainerRef:t})=>{var a=o.default.t(1367,{count:o.default.n(e),_plural:e});return n.createElement("div",{className:(0,s.default)(d.default.msgUnread,l.LIST_FOCUSABLE_ITEM_CLASS_NAME),ref:t,tabIndex:-1},n.createElement("span",{className:d.default.msgUnreadBody,"aria-live":"polite"},a))}},70846:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({msg:e,displayAuthor:t,displayType:a,hideUpdateButton:r=!1}){return n.createElement(h.default,{msg:e,displayAuthor:t},n.createElement(c.default,{iconName:"unknown",msg:e.unsafe()},(0,d.default)(e.unsafe())," ",r?null:function(e){var t=null;!e.isSentByMe&&e.subtype||(t=n.createElement("span",{className:p.default.action,role:"button",onClick:g},u.default.t(1379)));return t}(e)))};var s=i(a(19976)),n=r(a(2784)),o=a(31971),l=i(a(79711)),d=(i(a(50935)),i(a(73540))),u=i(a(17957)),c=i(a(90277)),h=i(a(20385)),f=r(a(75074)),p=i(a(62714)),m=i(a(78135));function _(){var e=(0,s.default)(["Got unsupported message but updater errored"]);return _=function(){return e},e}function v(){var e=(0,s.default)(["Got unsupported message but no newer release found"]);return v=function(){return e},e}function g(){l.default.openToast(n.createElement(f.default,{msg:u.default.t(1391),id:(0,f.genId)()})),m.default.update().then((e=>{e===o.DownloadState.UPDATE_NOT_AVAILABLE?(__LOG__(3)(v()),l.default.openToast(n.createElement(f.default,{msg:u.default.t(1095),id:(0,f.genId)()}))):e===o.DownloadState.UPDATE_DOWNLOADED?m.default.restart():__LOG__(3)(_())}))}window.updater=m.default},26691:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(70417)),n=i(a(36585)),o=i(a(72779)),l=r(a(2784)),d=i(a(69882)),u=i(a(71874)),c=i(a(20458)),h=i(a(92969)),f=i(a(43334)),p=i(a(79711)),m=i(a(9386)),_=i(a(50935)),v=i(a(7470)),g=i(a(81689)),E=i(a(131)),y=i(a(91581)),S=i(a(43396)),C=i(a(63789)),T=i(a(97934)),M=i(a(18120)),b=a(62902),P=i(a(17957)),A=i(a(69345)),I=a(96645),O=i(a(71726)),N=i(a(81031)),w=i(a(15118)),D=i(a(55042)),R=i(a(40207)),L=a(64658),k=i(a(22948)),x=i(a(82631)),F=i(a(20398)),G=i(a(75780)),U=i(a(90660)),B=a(84990),j=i(a(44849));class V extends l.Component{constructor(...e){super(...e),this.onMessageClick=e=>{var{vcard:t}=this.props;if(t){var a=(0,B.vcardWids)(t),r=(0,B.vcardIsBiz)(t);a.length>1?p.default.openModal(l.createElement(j.default,{icon:l.createElement(x.default,{name:"chat",className:U.default.icon,directional:!0}),vcard:t,onCancel:()=>p.default.closeModal(),onSelect:t=>this.openContactChat(t,e,r)})):a.length>0&&this.openContactChat(a[0],e,r)}},this.openContactChat=(e,t,r)=>{var i=!r&&M.default.supportsFeature(M.default.F.QUERY_VNAME)&&!v.default.get(e);(r?(0,T.default)(e).then(C.default):f.default.find(e)).then((r=>{this.props.onMessageClick&&this.props.onMessageClick(),p.default.closeModal(),p.default.openChatFromUnread(r).then((e=>{if(e){if(t){var i=a(71292).default;p.default.openDrawerRight(l.createElement(i,{chat:r,key:"info-".concat(r.id.toString())}),"slide-left",F.default.Manager.top)}p.default.focusChatTextInput(r)}})),i&&(0,D.default)(e).then((t=>{if(t){var{biz:a,bizInfo:r}=t;a&&(0,G.default)(e,r)}}))}))},this.onViewContact=()=>{var{msg:e,vcard:t}=this.props;t?p.default.openModal(l.createElement(g.default,{vcard:t})):p.default.openModal(l.createElement(m.default,{onCancel:()=>p.default.closeModal(),onOK:()=>{p.default.closeModal(),S.default.initDownload((0,L.unproxy)(e.unsafe()))},okText:P.default.t(1543),cancelText:P.default.t(1547),title:P.default.t(569)},P.default.t(568)))},this._onAddToGroupClick=()=>{var e=(0,B.vcardWids)(this.props.vcard),{vcard:t}=this.props;e.length>1&&t?p.default.openModal(l.createElement(j.default,{icon:l.createElement(x.default,{name:"add-user",directional:!0}),vcard:t,onCancel:()=>p.default.closeModal(),onSelect:this._addContactToGroup})):e.length>0&&this._addContactToGroup(e[0])},this._showMediaMissing=()=>{p.default.openModal(l.createElement(A.default,{msg:this.props.msg.unsafe()}))},this._getBubbleActionItems=(e,t)=>{var a={label:P.default.t(940),onClick:()=>this.onMessageClick(!1),title:e?P.default.t(943,{author:e}):P.default.t(940)};return t?[a,{label:P.default.t(1422),onClick:()=>this.onMessageClick(!0)}]:[a,{label:P.default.t(205),onClick:this._onAddToGroupClick}]}}_addContactToGroup(e){v.default.find(e).then((e=>{p.default.openModal(l.createElement(d.default,{contact:e,pushTransition:"none",popTransition:"none"}),{transition:"modal-flow"})}))}render(){var e,t,a,{downloadMedia:r,mediaStage:i,msg:d,vcard:f}=this.props;if(f){e=(0,B.vcardWids)(f);var p=d.type===_.default.MSG_TYPE.VCARD?d.vcardFormattedName:null;t=(0,n.default)(p||(0,B.vcardGetNameFromParsed)(f)||P.default.t(238),{length:120,omission:P.default.t(1177)}),e.length>0&&(a=l.createElement(c.default,{items:this._getBubbleActionItems(t,(0,B.vcardIsBiz)(f))}))}var m=this.props.displayAuthor&&!d.isSentByMe&&d.isGroupMsg?l.createElement("div",{className:U.default.author},l.createElement(u.default,{msg:d,contact:d.senderObj})):null,v=this.props.quotedMsg?l.createElement("div",{className:U.default.quote},this.props.quotedMsg):null,g=(0,o.default)(U.default.bubble,{[U.default.hasAuthor]:m,[U.default.hasQuote]:v,[U.default.isPreview]:this.props.displayType===_.default.DISP_TYPE.MSG_INFO,[U.default.isGallery]:this.props.displayType===_.default.DISP_TYPE.STARRED_MSGS||this.props.displayType===_.default.DISP_TYPE.CONTACT_CARD||this.props.displayType===_.default.DISP_TYPE.GALLERY}),S=d.type===_.default.MSG_TYPE.DOCUMENT&&d.isVcardOverMmsDocument&&i===I.MEDIA_DATA_STAGE.ERROR_MISSING,C=S||!this.props.placeholder&&(f||d.chat.isTrusted()),T=C?S?this._showMediaMissing:this.onViewContact:()=>{},M=b.Configuration.Compatibility({selectable:true}),A=this.props.placeholder?l.createElement(H,{downloadMedia:r,mediaStage:i}):l.createElement(N.default,{size:49,thumb:(0,B.vcardThumbnail)(f),wid:w.default.getThumbnailWidFromVcard(f)}),D=this.props.placeholder?l.createElement(W,{mediaStage:i}):l.createElement(y.default,{text:t,element:"div",className:U.default.name,selectable:true,dirMismatch:d.rtl!==P.default.isRTL(),direction:d.dir,formatters:M});return this.props.placeholder&&(a=i===I.MEDIA_DATA_STAGE.ERROR_MISSING?l.createElement(c.default,{items:this._getBubbleActionItems().map((e=>(0,s.default)((0,s.default)({},e),{},{onClick:this._showMediaMissing})))}):l.createElement(c.default,{items:[],placeholder:!0})),l.createElement(h.default,{className:g,contact:d.senderObj,msg:d.unsafe()},m,v,l.createElement(E.default,{msg:d.unsafe(),wrapperClass:U.default.ctwaContext}),l.createElement("div",{className:U.default.vcard,role:C?"button":null,onClick:T},l.createElement("div",{className:U.default.avatar},A),l.createElement("div",{className:U.default.body},D),l.createElement("div",{className:U.default.meta},l.createElement(O.default,{msg:d}))),a)}}function H(e){var{downloadMedia:t,mediaStage:a}=e;if(!a)return l.createElement(Y,{downloadMedia:t});switch(a){case I.MEDIA_DATA_STAGE.NEED_POKE:case I.MEDIA_DATA_STAGE.INIT:return l.createElement(Y,{downloadMedia:t});case I.MEDIA_DATA_STAGE.FETCHING:case I.MEDIA_DATA_STAGE.REUPLOADING:case I.MEDIA_DATA_STAGE.DECRYPTING:return l.createElement(K,{animate:!0,type:"profileImage"});case I.MEDIA_DATA_STAGE.RESOLVED:return l.createElement(K,{type:"profileImage"});case I.MEDIA_DATA_STAGE.ERROR_MISSING:return l.createElement(Y,{downloadMedia:()=>{}});default:return l.createElement(K,{animate:!0,type:"profileImage"})}}function W(e){var{mediaStage:t}=e;if(!t)return l.createElement(K,{type:"body"});switch(t){case I.MEDIA_DATA_STAGE.NEED_POKE:case I.MEDIA_DATA_STAGE.INIT:return l.createElement(K,{type:"body"});case I.MEDIA_DATA_STAGE.FETCHING:case I.MEDIA_DATA_STAGE.REUPLOADING:case I.MEDIA_DATA_STAGE.DECRYPTING:return l.createElement(K,{animate:!0,type:"body"});case I.MEDIA_DATA_STAGE.RESOLVED:case I.MEDIA_DATA_STAGE.ERROR_MISSING:default:return l.createElement(K,{type:"body"})}}function K(e){var{animate:t,type:a}=e,r=[U.default.placeholder,"profileImage"===a?U.default.placeholderImage:U.default.placeholderText,t?U.default.placeholderAnimation:null].filter(Boolean);return l.createElement("div",{className:(0,o.default)(r)})}function Y(e){var{downloadMedia:t}=e;return l.createElement(k.default,{"aria-label":P.default.t(1543),name:"audio-download",className:U.default.vcardDownloadStageIcon,onClick:()=>{t&&t()}})}V.CONCERNS={msg:["vcardFormattedName","rtl","dir","isSentByMe","isGroupMsg","senderObj","chat","isVcardOverMmsDocument","type"]};var q=(0,R.default)(V,V.CONCERNS);t.default=q},99127:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=(r(a(50935)),r(a(17957))),o=r(a(11412)),l=r(a(40210)),d=r(a(71748)),u=r(a(72424)),c=r(a(40207)),h=r(a(26691)),f=a(84990);class p extends s.Component{constructor(...e){super(...e),this._getParsedVcardList=(0,o.default)((({parsedVcards:e})=>e?e.map((e=>({parsedVcard:e,displayName:(0,f.vcardGetNameFromParsed)(e)||n.default.t(238),isMultiVcard:!1,vcard:""}))):[]))}componentDidMount(){var{msg:e,mediaData:t}=this.props;e.isTrusted()&&t.size<=1024*u.default.mmsVcardAutodownloadSizeKb&&this.downloadMedia()}downloadMedia(){this.props.msg.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:l.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1})}render(){var e,{displayAuthor:t,displayType:a,onMessageClick:r,mediaData:i,msg:n}=this.props,{parsedVcards:o}=i;return o?o.length>1?s.createElement(d.default,{msg:n,vcardList:this._getParsedVcardList({parsedVcards:o}),quotedMsg:this.props.getQuotedMsg(),displayType:a,displayAuthor:t}):s.createElement(h.default,{msg:n,vcard:o[0],quotedMsg:this.props.getQuotedMsg(),displayType:a,displayAuthor:t,onMessageClick:r}):s.createElement(h.default,{mediaStage:null===(e=n.mediaData)||void 0===e?void 0:e.mediaStage,msg:n,vcard:null,quotedMsg:this.props.getQuotedMsg(),displayType:a,displayAuthor:t,onMessageClick:r,downloadMedia:n.isTrusted()?this.downloadMedia:null,placeholder:!0})}}p.CONCERNS={mediaData:["mediaBlob","mediaStage","parsedVcards","size"]};var m=(0,c.default)(p,p.CONCERNS);t.default=m},92276:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(70417)),n=i(a(72779)),o=r(a(2784)),l=i(a(71874)),d=i(a(92969)),u=i(a(12708)),c=i(a(19899)),h=i(a(79711)),f=(i(a(50935)),a(87478)),p=i(a(131)),m=i(a(4336)),_=i(a(18120)),v=i(a(17957)),g=i(a(20642)),E=a(28278),y=a(40713),S=i(a(69345)),C=r(a(68084)),T=a(96645),M=i(a(10853)),b=i(a(71726)),P=i(a(40210)),A=a(62761),I=r(a(64857)),O=i(a(84443)),N=i(a(57008)),w=i(a(40207)),D=a(64658),R=i(a(82631)),L=i(a(20783)),k=i(a(900)),x=i(a(74185)),F=i(a(8106)),G="PREVIEW",U="FLOATER";function B(e){e.stopPropagation()}class j extends o.PureComponent{constructor(e){super(e),this._setRefThumb=e=>{this._refThumb=e},this.showMediaMissing=()=>{h.default.openModal(o.createElement(S.default,{msg:this.props.msg.unsafe()}))},this.downloadMedia=()=>{this.props.msg.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:P.default.WEBC_RMR_REASON_CODE.MSG_CLICK,isUserInitiated:!0})},this.cancelDownload=()=>{this.props.msg.cancelDownload()},this.cancelUpload=()=>{this.props.msg.cancelUpload()},this.resumeUpload=()=>{this.props.msg.resumeUpload()},this.resumeRemoteUpload=()=>{this.props.msg.resumeRemoteUpload()},this._downloadUnsupportedToDesktop=e=>{e&&e.stopPropagation(),h.default.openModal(o.createElement(M.default,{msg:(0,D.unproxy)(this.props.msg.unsafe())}))},this.launchMediaViewer=e=>{if(e&&e.stopPropagation(),this.props.theme===y.DisplayTheme.Album){var t=this.props.zoomMsg||this.props.msg,a=new Set((this.props.albumMsgs||[]).map((e=>e.id.toString())));h.default.mediaViewerModal({msg:(0,D.unproxy)(t.unsafe()),highlightedMsgIds:a})}else h.default.mediaViewerModal({msg:(0,D.unproxy)(this.props.msg.unsafe())})},this._launchVideoFloater=e=>{e&&e.stopPropagation();var t=this._refThumb?this._refThumb.getBoundingClientRect():null;O.default.openPiP((0,D.unproxy)(this.props.msg.unsafe()),0,t)},this.setPreviewMode=()=>{this.state.mode!==G&&this.setState({mode:G})},this.setFloaterMode=()=>{this.state.mode!==U&&this.setState({mode:U})};var t=O.default.isOpened((0,D.unproxy)(e.msg.unsafe()))?U:G;this.state={mode:t}}componentDidMount(){var{listeners:e,msg:t}=this.props;e.add(O.default,"".concat(t.id.toString(),"_pip_did_open"),this.setFloaterMode),e.add(O.default,"".concat(t.id.toString(),"_pip_did_close"),this.setPreviewMode),_.default.supportsFeature(_.default.F.MEDIA_EXISTENCE_CHECK)&&(0,E.checkExistence)((0,D.unproxy)(t))}render(){var e,{msg:t,mediaData:a,theme:r,overlayContent:i,displayType:h}=this.props,_=null,g=null;switch(a.mediaStage){case T.MEDIA_DATA_STAGE.RESOLVED:case T.MEDIA_DATA_STAGE.INIT:case T.MEDIA_DATA_STAGE.EXISTS:_=o.createElement(C.Play,null),g=this.launchMediaViewer;break;case T.MEDIA_DATA_STAGE.NEED_POKE:_=o.createElement(C.Download,{filesize:a.size}),g=this.downloadMedia;break;case T.MEDIA_DATA_STAGE.UPLOADING:_=o.createElement(C.PendingCancel,null),g=this.cancelUpload;break;case T.MEDIA_DATA_STAGE.FETCHING:_=o.createElement(C.PendingCancel,null),g=this.cancelDownload;break;case T.MEDIA_DATA_STAGE.NEED_UPLOAD:_=o.createElement(C.Upload,{filesize:a.size}),g=this.resumeUpload;break;case T.MEDIA_DATA_STAGE.REMOTE_NEED_UPLOAD:_=o.createElement(C.Upload,{filesize:a.size}),g=this.resumeRemoteUpload;break;case T.MEDIA_DATA_STAGE.ERROR_MISSING:g=this.showMediaMissing;break;case T.MEDIA_DATA_STAGE.ERROR_UNSUPPORTED:t.isUnsentMedia||(_=o.createElement(C.Download,{filesize:a.size}),g=this._downloadUnsupportedToDesktop);break;case T.MEDIA_DATA_STAGE.SENDING:t.isFailed||(_=o.createElement(C.Pending,null));break;case T.MEDIA_DATA_STAGE.DECRYPTING:case T.MEDIA_DATA_STAGE.ERROR_TOO_LARGE:case T.MEDIA_DATA_STAGE.PREPARING:case T.MEDIA_DATA_STAGE.PROGRESSIVE_READY:case T.MEDIA_DATA_STAGE.REMOTE_UPLOADING:case T.MEDIA_DATA_STAGE.REUPLOADING:_=o.createElement(C.Pending,null)}var E,S=parseInt(a.duration,10)?c.default.durationStr(a.duration):null,M=S?o.createElement("span",{className:F.default.duration},o.createElement("div",{className:F.default.icon},o.createElement(R.default,{name:"msg-video"})),S):null,{bubbleWidth:P,bubbleHeight:O}=(0,f.getBubbleDimension)(t.type,!1,a.aspectRatio,r,h),w=a.fullHeight||O,D=a.fullWidth||P,j=(0,f.getImgStyle)(D,w,P,O),V=null!==(e=a.fullPreviewData)&&void 0!==e?e:a.preview,H=null!=a.fullPreviewData,W=null!=V?(0,s.default)({backgroundImage:x.default.thumbAsBackgroundImage(V.url()).backgroundImage},j):void 0,K=o.createElement("div",{className:(0,n.default)(F.default.thumbBody,{[F.default.thumbBodyLowQuality]:!H}),style:W}),Y=this.props.displayAuthor&&!t.isSentByMe&&t.isGroupMsg,q=Y?o.createElement("div",{className:F.default.author},o.createElement(l.default,{msg:t,contact:t.senderObj})):null,z=(0,A.showForwarded)(t)&&this.props.theme!==y.DisplayTheme.Album,Q=z?o.createElement(m.default,{msg:t.unsafe(),className:F.default.forwardedIndicator}):null,J=o.createElement(k.default,null),X=t.caption?o.createElement("div",{className:F.default.caption},o.createElement(u.default,{msg:t.unsafe(),trusted:this.props.trusted,spacer:!(t.supportsMessageFooter&&t.footer)})):null,Z=(0,n.default)(F.default.bubble,{[F.default.nonAlbumBubble]:!r||r!==y.DisplayTheme.Album,[F.default.portrait]:P<O&&(0,f.canUseCustomCropping)(t.type,r,h)}),$=(0,n.default)(Z,{[F.default.hasCaption]:X,[F.default.hasAuthor]:Y,[F.default.isHover]:this.props.hover,[F.default.forwarded]:z,[F.default.isPSA]:t.isPSA,[F.default.ctwaContainerWidth]:null!=t.ctwaContext});switch(a.mediaStage){case T.MEDIA_DATA_STAGE.INIT:case T.MEDIA_DATA_STAGE.RESOLVED:E=o.createElement("div",{className:(0,n.default)(F.default.pipBtn,{[F.default.isHover]:!!this.props.hover})},o.createElement(I.default,{onClick:e=>{e&&e.stopPropagation(),this._launchVideoFloater()},theme:I.PIP_BUTTON_THEME.PREVIEW}));break;default:E=null}var ee,te=this.props.quotedMsg?o.createElement("div",{className:F.default.quote},this.props.quotedMsg):null;switch(this.state.mode){case G:ee=o.createElement(o.Fragment,null,E,_);break;case U:ee=o.createElement(N.default,{icon:o.createElement(R.default,{name:"video-pip-large"})},v.default.t(1136))}var ae,re=(0,n.default)(F.default.thumb,{[F.default.inAlbum]:r===y.DisplayTheme.Album});null==i&&(ae=o.createElement("div",{className:F.default.meta},o.createElement(b.default,{msg:t})));var ie=o.createElement("div",{className:$},q,Q,te,o.createElement(p.default,{msg:t.unsafe(),wrapperClass:F.default.ctwaContext}),o.createElement("div",{ref:this._setRefThumb,className:(0,n.default)(re,{[F.default.cursorPointer]:this.state.mode===G,[F.default.overlay]:i,[F.default.ctwaThumbWidth]:null!=t.ctwaContext}),onClick:g,style:{width:P,height:O}},null==i?ee:null,K,J,null==i?M:null),X,o.createElement(L.default,{dir:t.dir,footer:t.footer,isShown:t.supportsMessageFooter,msg:t.unsafe(),rtl:t.rtl,type:t.type,trusted:this.props.trusted}),ae);return X?o.createElement(d.default,{contact:t.senderObj,msg:t.unsafe(),onClick:B},ie):(null!=i&&(ie=o.createElement("div",{className:F.default.overlayAlbumText},ie,i)),o.createElement("div",{onClick:B},ie))}}j.CONCERNS={msg:["ack","caption","dir","footer","gifAttribution","id","isGroupMsg","isPSA","isSentByMe","isUnsentMedia","rtl","senderObj","type","isFailed","ctwaContext","supportsMessageFooter"],mediaData:["aspectRatio","preview","fullPreviewData","duration","mediaStage","fullWidth","fullHeight","size"]};var V=(0,g.default)((0,w.default)(j,j.CONCERNS));t.default=V},24898:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(98346)),n=i(a(72779)),o=r(a(2784)),l=i(a(79711)),d=i(a(50935)),u=a(72292),c=i(a(91581)),h=r(a(35387)),f=i(a(18120)),p=i(a(17957)),m=i(a(20642)),_=r(a(68084)),v=i(a(84443)),g=i(a(57008)),E=a(64658),y=i(a(82631)),S=r(a(75074)),C=i(a(74185)),T=i(a(99340)),M=i(a(10252)),b=i(a(76022)),P="PREVIEW",A="FLOATER";class I extends o.Component{constructor(e){super(e),this.setRefThumbnailWrapper=e=>{this.refThumbnailWrapper=e},this.getThumbnailWrapperRect=()=>this.refThumbnailWrapper?this.refThumbnailWrapper.getBoundingClientRect():null,this.setPreviewMode=()=>{this.state.mode!==P&&this.setState({mode:P})},this.setFloaterMode=()=>{this.state.mode!==A&&this.setState({mode:A})},this.parseYoutubeVideoId=e=>{for(var t=u.URL_PATTERNS.ONLINE_VIDEO_URL.YOUTUBE,a=null,r=0;r<t.length;r++){var i=C.default.withoutWww(e).match(t[r]);if(i){a=i[1];break}}return a},this.parseYoutubeVideoStartTime=e=>{var t=e.split("?");if(2!==t.length)return 0;var a=t[1],r=new T.default(a).get(u.YOUTUBE_URL_TIME_PARAM_NAME);if(!r)return 0;var i=r.match(u.YOUTUBE_URL_TIME_PARAM_PATTERN),s=0;if(i&&i.length)for(var n=1;n<i.length;n++){var o=i[n];if(o){var l=parseInt(o,10);if(isNaN(l))return 0;o.endsWith("h")&&(s+=3600*l),o.endsWith("m")&&(s+=60*l),o.endsWith("s")&&(s+=l),/^\d+$/.test(o)&&(s+=l)}}return s};var t=v.default.isOpened((0,E.unproxy)(e.msg))?A:P;this.state={mode:t}}componentDidMount(){this.props.listeners.add(v.default,"".concat(this.props.msg.id.toString(),"_pip_did_open"),this.setFloaterMode),this.props.listeners.add(v.default,"".concat(this.props.msg.id.toString(),"_pip_did_close"),this.setPreviewMode)}render(){var e=this.props.msg.description?o.createElement("div",{className:M.default.description,title:this.props.msg.description},o.createElement(c.default,{text:this.props.msg.description})):null,t=C.default.hostname(this.props.msg.canonicalUrl||this.props.msg.matchedText);(t=C.default.withoutWww(t))===d.default.HOSTNAME.YOUTUBE_SHORTENED&&(t=d.default.HOSTNAME.YOUTUBE);var a,r=o.createElement("div",{className:M.default.source},o.createElement(c.default,{text:t})),i=(0,n.default)(M.default.body,{[M.default.noThumb]:!this.props.msg.thumbnail});if(this.state.mode===P)switch(t){case d.default.HOSTNAME.YOUTUBE:case d.default.HOSTNAME.YOUTUBE_MOBILE:var u=this.parseYoutubeVideoId(this.props.msg.matchedText);if(u){var m=this.parseYoutubeVideoStartTime(this.props.msg.matchedText);a=e=>{e&&e.stopPropagation(),v.default.openYoutubePiP(u,this.props.msg,m,this.getThumbnailWrapperRect())}}break;case d.default.HOSTNAME.INSTAGRAM:case d.default.HOSTNAME.STREAMABLE:case d.default.HOSTNAME.FACEBOOK:case d.default.HOSTNAME.FBWATCH:case d.default.HOSTNAME.FBWATCH_ALT:case d.default.HOSTNAME.LASSOVIDEOS:case d.default.HOSTNAME.LASSO_SHORTENED:case d.default.HOSTNAME.SHARECHAT:f.default.supportsFeature(f.default.F.VIDEO_PLAYBACK_URL)&&(a=()=>{v.default.openOgVideoPiP("",this.props.msg.thumbnail,this.props.msg,0,this.getThumbnailWrapperRect());var e=C.default.build(this.props.msg.matchedText,{wa_logging_event:"video_play_open"});b.default.queryVideoPlaybackUrl(e).then((e=>{if(v.default.isOpened(this.props.msg)){if(!e.url)throw new Error("Url is missing in response.");v.default.openOgVideoPiP(e.url,this.props.msg.thumbnail,this.props.msg,0,null)}})).catch((()=>{v.default.closeOgVideoPiP(),l.default.openToast(o.createElement(S.default,{id:(0,S.genId)(),msg:p.default.t(1134),action:{actionText:p.default.t(1135),onAction:()=>{(0,h.openExternalLink)(this.props.msg.matchedText)}}}))}))});break;default:return null}var E,T,I=(0,n.default)(M.default.preview,{[M.default.bubbleIn]:!this.props.msg.isSentByMe,[M.default.bubbleOut]:this.props.msg.isSentByMe}),O=this.state.mode===P?o.createElement("div",{className:M.default.mediaStateControlsWrapper},o.createElement(_.Play,null)):null,N=this.state.mode===A?o.createElement(g.default,{icon:o.createElement(y.default,{name:"video-pip-large"})},p.default.t(1136)):null;if(this.props.msg.thumbnail&&(0,s.default)(d.default.HOSTNAME).includes(t)){var w;switch(E=o.createElement("img",{alt:"",className:(0,n.default)(M.default.thumbnail,{[M.default.youtubeThumbnail]:t===d.default.HOSTNAME.YOUTUBE}),src:"data:image/jpeg;base64,".concat(this.props.msg.thumbnail)}),t){case d.default.HOSTNAME.YOUTUBE:w=o.createElement(y.default,{name:"logo-youtube"});break;case d.default.HOSTNAME.INSTAGRAM:w=o.createElement(y.default,{name:"logo-instagram"});break;case d.default.HOSTNAME.FACEBOOK:w=o.createElement(y.default,{name:"logo-facebook"});break;case d.default.HOSTNAME.LASSOVIDEOS:w=o.createElement(y.default,{name:"logo-lasso"})}w&&(T=o.createElement("div",{className:M.default.attribution},w))}else E=o.createElement("div",{className:M.default.thumbnailPlaceholder});return o.createElement("div",{className:I},o.createElement("div",{ref:this.setRefThumbnailWrapper,className:M.default.thumbnailWrapper,onClick:a},T,E,O,N),o.createElement(h.default,{className:i,href:this.props.msg.matchedText},o.createElement("div",{className:M.default.title,title:this.props.msg.title},o.createElement(c.default,{text:this.props.msg.title})),e,r))}}var O=(0,m.default)(I);t.default=O},33426:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(19976)),n=i(a(72779)),o=r(a(2784)),l=i(a(79711)),d=(i(a(50935)),i(a(83713))),u=a(90973),c=i(a(17957)),h=a(96645),f=i(a(13077)),p=i(a(97816)),m=i(a(40210)),_=a(64658),v=i(a(22948)),g=i(a(82631)),E=a(40263),y=i(a(20385)),S=i(a(5174)),C=i(a(47609)),T=i(a(47566)),M=i(a(46326)),b=a(89526);function P(){var e=(0,s.default)(["mediaType: ",""]);return P=function(){return e},e}function A(){var e=(0,s.default)(["Unsupported/too large view once media message"]);return A=function(){return e},e}function I(e){e.stopPropagation(),e.preventDefault()}var O=function({displayAuthor:e,displayType:t,mediaData:a,msg:r,trusted:i,quotedMsg:s}){var O,{mediaStage:N,size:w}=(0,C.default)(a,["mediaStage","size"]),D=(0,C.default)(r,["ack","isGroupMsg","isFailed","isPSA","isSentByMe","senderObj","type"]),R=function(e,t){return(0,o.useMemo)((()=>{var a=t.type===h.OUTWARD_TYPES.IMAGE?c.default.t(1428):c.default.t(1431);if(!(0,b.isUnviewed)(t)){var r=(0,b.isExpired)(t)?c.default.t(1424):c.default.t(1434);return{type:"complete",icon:o.createElement(g.default,{className:T.default.nonSpinnerIcon,name:"view-once-viewed"}),label:r,labelClassname:T.default.labelInactive}}switch(e){case h.MEDIA_DATA_STAGE.RESOLVED:case h.MEDIA_DATA_STAGE.PROGRESSIVE_READY:return t.isSentByMe?{type:"complete",icon:o.createElement(g.default,{className:T.default.nonSpinnerIcon,name:"view-once"}),label:a,labelClassname:T.default.labelActive}:{type:"unviewed",icon:o.createElement(g.default,{className:T.default.nonSpinnerIcon,name:"view-once"}),handleClick:function(){l.default.mediaViewerModal({msg:(0,_.unproxy)(t.unsafe())})},label:a};case h.MEDIA_DATA_STAGE.FETCHING:return{type:"unviewed",icon:o.createElement(M.default,null),handleClick:e=>{I(e),t.cancelDownload()},label:a};case h.MEDIA_DATA_STAGE.NEED_POKE:return{type:"unviewed",icon:o.createElement(g.default,{className:T.default.nonSpinnerIcon,name:"view-once-download"}),handleClick:e=>{I(e),t.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:m.default.WEBC_RMR_REASON_CODE.MSG_CLICK,isUserInitiated:!0})},label:a};case h.MEDIA_DATA_STAGE.UPLOADING:return{type:"complete",icon:o.createElement(M.default,{onClick:e=>{I(e),t.cancelUpload()}}),label:a,labelClassname:T.default.labelActive};case h.MEDIA_DATA_STAGE.NEED_UPLOAD:return{type:"complete",icon:o.createElement(v.default,{className:(0,n.default)(T.default.nonSpinnerIcon,T.default.accentIcon),name:"view-once-retry",onClick:e=>{I(e),t.resumeUpload()},"aria-label":c.default.t(1213)}),label:c.default.t(1213),labelClassname:T.default.labelRetry};case h.MEDIA_DATA_STAGE.REMOTE_NEED_UPLOAD:return{type:"complete",icon:o.createElement(v.default,{className:(0,n.default)(T.default.nonSpinnerIcon,T.default.accentIcon),name:"view-once-retry",onClick:e=>{I(e),t.resumeRemoteUpload()},"aria-label":c.default.t(1213)}),label:c.default.t(1213),labelClassname:T.default.labelRetry};case h.MEDIA_DATA_STAGE.SENDING:return{type:"complete",icon:t.isFailed?null:o.createElement(M.default,null),label:a,labelClassname:T.default.labelActive};case h.MEDIA_DATA_STAGE.ERROR_MISSING:return{type:"complete",icon:o.createElement(g.default,{className:T.default.nonSpinnerIcon,name:"view-once-viewed"}),label:c.default.t(1424),labelClassname:T.default.labelInactive};case h.MEDIA_DATA_STAGE.ERROR_UNSUPPORTED:case h.MEDIA_DATA_STAGE.ERROR_TOO_LARGE:return __LOG__(4,void 0,new Error,!0)(A()),SEND_LOGS("view-once-hook-error"),{type:"complete",icon:o.createElement(g.default,{className:T.default.nonSpinnerIcon,name:"view-once-viewed"}),label:a,labelClassname:T.default.labelActive};case h.MEDIA_DATA_STAGE.INIT:case h.MEDIA_DATA_STAGE.PREPARING:if(!t.isSentByMe)return{type:"unviewed",icon:o.createElement(M.default,null),handleClick:I,label:a};case h.MEDIA_DATA_STAGE.REMOTE_UPLOADING:case h.MEDIA_DATA_STAGE.REUPLOADING:default:return{type:"complete",icon:o.createElement(g.default,{className:T.default.nonSpinnerIcon,name:"view-once"}),label:a,labelClassname:T.default.labelActive}}}),[e,t])}(N,D);if((0,o.useEffect)((()=>{!D.isSentByMe&&(0,b.isUnviewed)(D)&&D.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:m.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1})}),[D]),!a.isViewOnceCompatible())return __LOG__(4,void 0,new Error,!0)(P(),a.type),SEND_LOGS("View once incompatible mediaData type"),null;if("complete"===R.type){var{label:L,labelClassname:k,icon:x}=R;O=o.createElement(y.default,{msg:r},null!=s?o.createElement("div",{className:T.default.quote},s):null,o.createElement(u.FlexRow,{align:"center"},o.createElement(u.FlexItem,{className:(0,n.default)({[T.default.statusIcon]:!0,[T.default.statusDone]:!(0,b.isUnviewed)(D)})},x),o.createElement(u.FlexItem,null,o.createElement(p.default,{className:k,msg:D.unsafe()},L))))}else{var{handleClick:F,label:G,icon:U}=R,B=N===h.MEDIA_DATA_STAGE.NEED_POKE||N===h.MEDIA_DATA_STAGE.FETCHING?c.default.filesize(w):null;O=o.createElement(f.default,{displayType:t,hideCaption:!0,msg:r,quotedMsg:s,showAuthor:e,trusted:i},o.createElement(S.default,{className:T.default.buttonContainer,onClick:i?F:()=>{}},o.createElement(d.default,{outgoingMsg:D.isSentByMe},o.createElement(u.FlexRow,{className:T.default.deepContainerContent,align:"center"},o.createElement(u.FlexItem,{className:T.default.statusIcon,grow:0},U),o.createElement(u.FlexItem,{className:T.default.content,grow:1},o.createElement(E.TextHeader,{color:"secondary",level:"3",weight:"medium",size:"15"},G),null!=B?o.createElement(E.TextParagraph,{className:T.default.contentMeta,size:"10"},B):null)))))}return o.createElement("div",{className:(0,n.default)({[T.default.unviewedBubble]:"unviewed"===R.type})},O)};t.default=O},46326:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({onClick:e}){var[t,a]=(0,u.default)(e),r=null!=e?a:{};return n.createElement("div",(0,s.default)({className:c.default.container,ref:t,"aria-label":o.default.t(1547)},r),n.createElement("div",{className:c.default.icon},n.createElement(d.default,{name:"x-soft"})),n.createElement("div",{className:c.default.spinner},n.createElement(l.default,{color:"accent",size:20,stroke:4})))};var s=i(a(58527)),n=r(a(2784)),o=i(a(17957)),l=i(a(2825)),d=i(a(82631)),u=i(a(72376)),c=i(a(79577))},58355:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.MessageContainer=function(e){var t=(0,n.default)(X.default.msgContainer,{"message-out":e.isSentByMe,"message-in":!e.isSentByMe}),a=(0,n.default)(X.default.message,X.default.hasTail,"tail-override-left");return o.createElement("div",{className:t},o.createElement("div",{className:a},o.createElement("div",{className:X.default.messageBackground},o.createElement("div",{className:X.default.tail},o.createElement(K.default,{name:oe(te)})),e.children)))},t.getTailName=oe,t.SystemBubble=t.default=t.Wrapper=void 0;var s=i(a(19976)),n=i(a(72779)),o=r(a(2784)),l=i(a(32960)),d=a(60474),u=a(14345),c=i(a(30809)),h=i(a(43334)),f=i(a(79711)),p=i(a(80073)),m=i(a(9386)),_=i(a(50935)),v=i(a(55236)),g=a(62436),E=r(a(71201)),y=i(a(43396)),S=i(a(38147)),C=i(a(6660)),T=i(a(4357)),M=i(a(93329)),b=a(75459),P=i(a(44343)),A=a(12023),I=i(a(50868)),O=a(13735),N=i(a(17957)),w=a(38203),D=i(a(20642)),R=i(a(26432)),L=i(a(19773)),k=a(97526),x=i(a(20564)),F=i(a(38751)),G=i(a(32087)),U=i(a(74343)),B=a(57556),j=i(a(61941)),V=i(a(72424)),H=i(a(40207)),W=a(64658),K=i(a(82631)),Y=i(a(48707)),q=i(a(17693)),z=i(a(63498)),Q=i(a(74824)),J=i(a(26203)),X=i(a(50103)),Z=a(24996);function $(){var e=(0,s.default)(["no onMessageSelect"]);return $=function(){return e},e}function ee(){var e=(0,s.default)(["wrapper:resend failure: ",""]);return ee=function(){return e},e}var te=!1,ae=!0;class re extends o.PureComponent{getContainerElement(){return(0,j.default)(this._refContainer,"this._refContainer")}constructor(e){super(e),this.setRefMsgComponent=e=>this.refMsgComponent=e,this.setRefContext=e=>this.refContext=e,this._refTail=o.createRef(),this.setRefBubble=e=>this.refBubble=e,this._sizeMismatch=!1,this._stickerRef=o.createRef(),this._setRefContainer=e=>{this._refContainer=e},this.resend=()=>{this.props.msg.resend().catch((function(e){__LOG__(2)(ee(),e)}))},this._openWebSearchFlow=()=>{var e=this.props.msg;f.default.openModal(o.createElement(J.default,{messageText:e.body}),{transition:"modal-flow"})},this._openEphemeralInfoPopup=()=>{var e=this.props.msg.ephemeralDuration||0;f.default.openModal(o.createElement(m.default,{onOK:()=>{f.default.closeModal()}},(0,O.getEphemeralOutOfSyncInfoString)(e)),{transition:"modal-flow"})},this._openBizPrivacyInfoPopup=()=>{var e,t=this.props.msg,{bizPrivacyStatus:a}=t;if(null!=a){var r=(0,u.getBizPrivacyInfoString)(a,null!==(e=t.verifiedBizName)&&void 0!==e?e:(0,T.default)(t.chat.contact),t.id.fromMe);f.default.openModal(o.createElement(m.default,{onOK:()=>{f.default.closeModal()}},r),{transition:"modal-flow"})}},this.mouseEnter=e=>{e.buttons||this.state.hover||!this._hasContextMenu()||this.setState({hover:!0})},this.mouseLeave=()=>{this.state.hover&&this._hasContextMenu()&&this.setState({hover:!1})},this.mouseDown=()=>{this.state.hover&&this.setState({hover:!1})},this._handleMouseContextMenu=e=>{e.stopPropagation()},this._getMenuRefContext=()=>{if(this.refContext)return this.refContext.getComponent().refContext},this.onMenu=(e,t)=>{if(t&&this.state.contextMenu)this.setState({contextMenu:null});else{var a=t?this._getMenuRefContext():e,r=(0,W.unproxy)(this.props.msg),i=[];r.isSentByMe&&this.props.displayType!==_.default.DISP_TYPE.MSG_INFO&&!r.asRevoked&&i.push(o.createElement(E.default,{key:"info",a8n:"mi-msg-info",action:()=>{this.openInfoDrawer()}},N.default.t(947))),r.canReply()&&i.push(o.createElement(E.default,{key:"reply",a8n:"mi-msg-reply",action:()=>{this.onReplyMessage()}},N.default.t(1188))),(r.canPrivateReply()||r.canPrivateReplyInRestrictedGrp())&&i.push(o.createElement(E.default,{key:"private_reply",a8n:"mi-msg-reply",action:()=>{this.onPrivateReplyMessage()}},N.default.t(1141))),r.isDownloadable()&&i.push(o.createElement(E.default,{key:"download",a8n:"mi-msg-download",action:()=>{this.onDownload()}},N.default.t(1543))),r.canForward()&&i.push(o.createElement(E.default,{key:"forward",a8n:"mi-msg-forward",action:()=>{this.openForwardFlow(!0)}},N.default.t(685))),(0,b.canEditLabelAssociation)()&&!r.asRevoked&&i.push(o.createElement(E.default,{key:"editLabel",a8n:"mi-edit-label",action:()=>{this._openEditLabelFlow()}},N.default.t(581))),r.canStar()&&(r.star?i.push(o.createElement(E.default,{key:"star",a8n:"mi-msg-unstar",action:()=>{this.onUnstarMessage()}},N.default.t(1373))):i.push(o.createElement(E.default,{key:"star",a8n:"mi-msg-star",action:()=>{this.onStarMessage()}},N.default.t(1295)))),i.push(o.createElement(E.default,{key:"delete",a8n:"mi-msg-delete",action:()=>{this.onDeleteMessage()}},N.default.t(545))),r.isGroupMsg&&r.author&&!r.isSentByMe&&i.push(o.createElement(E.default,{key:"author",a8n:"mi-msg-author",action:()=>{this.openContactChat()}},N.default.t(943,{author:r.displayName()}))),this.setState({contextMenu:{menu:i,anchor:a,theme:E.ThemeOptions.COMPACT,autoFocus:this._isKeyboardUser()}})}},this.openContextMenu=()=>{this._hasContextMenu()&&(this.state.hover?this.onMenu(void 0,!0):this.setState({hover:!0},(()=>{this.onMenu(void 0,!0)})))},this.closeContextMenu=()=>{var e={contextMenu:null};this._isKeyboardUser()&&(e.hover=!1),this.setState(e)},this.onSelectClick=e=>{e&&e.stopPropagation();var t=this.props.onMessageSelect;t?t((0,W.unproxy)(this.props.msg),!this.state.selected,e):(__LOG__(4,void 0,new Error,!0)($()),SEND_LOGS("wrapper-onSelectClick"))},this.onDoubleClick=e=>{var{displayType:t}=this.props,a=(0,W.unproxy)(this.props.msg);!a.canReply()||this.props.selectable||t!==_.default.DISP_TYPE.CONVERSATION||this.state.contextMenu||e.target instanceof HTMLElement&&((e,t)=>{for(var a=t;a;){if(a===e)return!0;a=a.parentNode}return!1})(this.refBubble,e.target)||(a.chat.composeQuotedMsg=a,f.default.focusChatTextInput(a.chat),this.highlight())},this.onResize=()=>{this.forceUpdate()},this._handleKeyActivation=e=>{var t,a;null===(t=this.getMsgComponentRef())||void 0===t||null===(a=t.handleKeyActivation)||void 0===a||a.call(t,e)},this.state={canQuickForward:e.msg.canQuickForward(),contextMenu:null,hover:!1,highlighting:!1,selected:!!e.selectedMessages&&e.selectedMessages.isSelected((0,W.unproxy)(e.msg)),isRevoked:Boolean(e.msg.asRevoked)};var t=this.props.displayType===_.default.DISP_TYPE.STARRED_MSGS||this.props.displayType===_.default.DISP_TYPE.GALLERY||this.props.displayType===_.default.DISP_TYPE.MSG_INFO||this.props.displayType===_.default.DISP_TYPE.CONTACT_CARD;this._sizeMismatch=t&&this.props.msg.isGif}componentDidMount(){this._sizeMismatch&&this.refBubble&&(this.maxWidth=this.refBubble.offsetWidth,this.forceUpdate(),window.addEventListener("resize",this.onResize)),this.props.listeners.add(this.props.msg,"change",(()=>{var e=this.props.msg.canQuickForward();e!==this.state.canQuickForward&&this.setState({canQuickForward:e});var t=Boolean(this.props.msg.asRevoked);t!==this.state.isRevoked&&this.setState({isRevoked:t})}))}componentWillUnmount(){this._sizeMismatch&&window.removeEventListener("resize",this.onResize)}componentDidUpdate(e,t){this.state.contextMenu&&t.isRevoked!==this.state.isRevoked&&this.closeContextMenu()}scrollMsg(e,t){this._refContainer&&(0,g.scrollAt)(this._refContainer,void 0,t).then(e)}highlight(){var e=this.refBubble,t=this._refTail.current;e&&(this.setState({highlighting:!0}),S.default.indicateFocus(e,X.default.highlightAnimation),S.default.indicateFocus(t,X.default.highlightAnimation),this.props.listeners.addOnce(e,"animationend",(()=>{this.setState({highlighting:!1})})),this.props.isFocusable&&this.focus({preventScroll:!0}))}openForwardFlow(e){var t,a=this.props.msg;a.type===_.default.MSG_TYPE.CIPHERTEXT?t=N.default.t(665):a.asRevoked?t=N.default.t(666):a.isUnsentMedia&&(t=N.default.t(664,{_plural:1})),t?f.default.openModal(o.createElement(m.default,{title:N.default.t(667),onOK:()=>f.default.closeModal(),okText:N.default.t(1709)},t)):e&&this.props.displayType===_.default.DISP_TYPE.CONVERSATION?this.onSelectClick():f.default.openModal(o.createElement(M.default,{msgs:[(0,W.unproxy)(a)]}),{transition:"modal-flow"})}_openEditLabelFlow(){this.props.displayType===_.default.DISP_TYPE.CONVERSATION?this.onSelectClick():f.default.openModal(o.createElement(R.default,{modelsToUpdate:[(0,W.unproxy)(this.props.msg)]}))}openInfoDrawer(){f.default.msgInfoDrawer((0,W.unproxy)(this.props.msg))}openContactChat(){h.default.find(this.props.msg.author).then((function(e){f.default.openChatFromUnread(e).then((t=>{t&&f.default.focusChatTextInput(e)}))}))}onDeleteMessage(){var{msg:e,isMsgVisible:t}=this.props;f.default.openModal(o.createElement(v.default,{chat:e.chat,msgList:[e].map(W.unproxy),deletePrompt:!0,revokePrompt:e.canRevoke(),isMsgVisible:t}))}onReplyMessage(){var e=(0,W.unproxy)(this.props.msg),t=e.chat;t.composeQuotedMsg=e,t===h.default.toArray().find((e=>e.active))?f.default.focusChatTextInput(t):f.default.openChatBottom(t)}onPrivateReplyMessage(){var e=(0,W.unproxy)(this.props.msg);h.default.find(e.sender).then((e=>Promise.props({ok:f.default.openChatBottom(e),chat:e}))).then((({ok:t,chat:a})=>{t&&(a.composeQuotedMsg=e,this.props.msg&&this.props.msg.chat&&(a.composeQuotedMsgRemoteJid=this.props.msg.chat.id))}))}onDownload(){y.default.initDownload((0,W.unproxy)(this.props.msg))}onStarMessage(){var e=(0,W.unproxy)(this.props.msg);f.default.sendStarMsgs(e.chat,[e])}onUnstarMessage(){var e=(0,W.unproxy)(this.props.msg);f.default.sendUnstarMsgs(e.chat,[e])}_isKeyboardUser(){return this.context}getMsgComponent(e){var{msg:t,position:a,displayType:r,isMsgVisible:i,getSequentialMsg:s}=this.props;return o.createElement(G.default,null,o.createElement(F.default,{chat:t.chat,displayAuthor:e,displayType:r,hover:this.state.hover,isMsgVisible:i,maxWidth:this.maxWidth,msg:t,ref:this.setRefMsgComponent,position:a,getSequentialMsg:s,onProductClick:this.props.onProductClick,onMessageClick:this.props.onMessageClick,forwardStickerRef:this._stickerRef}))}getMsgComponentRef(){return this.refMsgComponent&&this.refMsgComponent.getRef()}onSelectChange(e){this.state.selected!==e&&this.setState({selected:e})}focus(e){this._refContainer&&C.default.focus(this._refContainer,e)}_hasContextMenu(){var{msg:e,displayType:t}=this.props;return!e.isNotification&&t!==_.default.DISP_TYPE.GALLERY&&t!==_.default.DISP_TYPE.CONTACT_CARD}_shouldShowMenuButton(){return this._hasContextMenu()&&!this.props.selectable&&(this.state.hover&&!this.state.highlighting||!!this.props.current||!!this.state.contextMenu)}render(){var e,{msg:t,position:a,displayType:r,selectedMessages:i,isFocusable:s}=this.props,u=r===_.default.DISP_TYPE.CONVERSATION,h=t.type!==_.default.MSG_TYPE.CHAT||r!==_.default.DISP_TYPE.STARRED_MSGS&&!!t.quotedMsg||!(a===k.MsgPosition.MID||a===k.MsgPosition.END)||r===_.default.DISP_TYPE.GALLERY||t.linkPreview||(0,A.isParsableOnlineVideoURL)(t.richPreviewType,t.matchedText,t.doNotPlayInline);this._shouldShowMenuButton()&&(e=o.createElement(L.default,{msg:t,position:a,key:"icon-context",ref:this.setRefContext,onToggle:e=>{this.onMenu(e)}}));var f=null;if(!t.isNotification&&this.props.selectable){var m=r===_.default.DISP_TYPE.GALLERY?"gallery":null;f=o.createElement(x.default,{checked:!!this.state.selected,onClick:this.onSelectClick,msgTheme:m})}var v=null;t.type===_.default.MSG_TYPE.STICKER&&this.props.selectable&&(v=o.createElement("span",null,o.createElement("div",{className:X.default.stickerWrapperContainer,onMouseEnter:this._stickerRef.current?this._stickerRef.current.onMouseEnter:null,onClick:this.onSelectClick})));var g=!1;if(t.type===_.default.MSG_TYPE.CHAT){var E=p.default.match(t.body);g=1===E.length&&E[0][4][0].length===t.body.length}var y,S,C,T,M,b,I=t.chat&&t.chat.isPSA,O=!I&&!t.isNotification&&!this.props.tailOverride&&(a===k.MsgPosition.FRONT||a===k.MsgPosition.SINGLE)||r===_.default.DISP_TYPE.MSG_INFO||this.props.tailOverride,D=ne(t)&&(!h||t.isSentByMe||!t.isGroupMsg&&!t.quotedMsg)&&(u&&(a===k.MsgPosition.FRONT||a===k.MsgPosition.SINGLE)||!u),R=!this.props.selectable&&(r===_.default.DISP_TYPE.CONVERSATION||r===_.default.DISP_TYPE.MSG_INFO||r===_.default.DISP_TYPE.STARRED_MSGS),F=t.ephemeralOutOfSync&&!t.isNotification&&!t.isFutureproof,G=R&&this.state.canQuickForward,j=R&&V.default.quickMessageSearch&&t.isFrequentlyForwarded&&t.type===_.default.MSG_TYPE.CHAT,H=null!=t.bizPrivacyStatus,W=(0,n.default)(X.default.msg,{[X.default.msgContinuation]:!(a!==k.MsgPosition.FRONT&&a!==k.MsgPosition.MID||t.isFromTemplate&&t.isQuickReply),[X.default.msgPSA]:r!==_.default.DISP_TYPE.STARRED_MSGS&&I,[X.default.msgSystem]:t.isNotification,[X.default.msgGallery]:r===_.default.DISP_TYPE.STARRED_MSGS||r===_.default.DISP_TYPE.CONTACT_CARD||r===_.default.DISP_TYPE.GALLERY,[X.default.msgInfo]:r===_.default.DISP_TYPE.MSG_INFO,[X.default.msgWithQuickAction]:H||F||G||j,"message-out":!t.isNotification&&t.isSentByMe||r===_.default.DISP_TYPE.MSG_INFO,"message-in":!t.isNotification&&!t.isSentByMe,[w.LIST_FOCUSABLE_ITEM_CLASS_NAME]:s}),J=(0,n.default)(X.default.message,function(e){switch(e.type){case _.default.MSG_TYPE.NOTIFICATION_TEMPLATE:return e.isBizNotification?X.default.messageBizNotification:void 0;case _.default.MSG_TYPE.E2E_NOTIFICATION:return e.chat.isSupportGroup()?X.default.messageBizNotification:X.default.messageE2ENotification;case _.default.MSG_TYPE.GROUPS_V4_INVITE:return X.default.messageChat;case _.default.MSG_TYPE.CHAT:return(0,A.isParsableOnlineVideoURL)(e.richPreviewType,e.matchedText,e.doNotPlayInline)?X.default.messageVideoLinkPreview:X.default.messageChat;case _.default.MSG_TYPE.LOCATION:return e.isLive?X.default.messageLiveLocation:X.default.messageLocation;case _.default.MSG_TYPE.VCARD:return X.default.messageVcard;case _.default.MSG_TYPE.CIPHERTEXT:return(0,n.default)(X.default.messageChat,X.default.messagePlaceholder);case _.default.MSG_TYPE.MULTI_VCARD:return X.default.messageMultiVcard;case _.default.MSG_TYPE.IMAGE:return X.default.messageImage;case _.default.MSG_TYPE.PRODUCT:return X.default.messageProduct;case _.default.MSG_TYPE.STICKER:return ne(e)?X.default.messageTransparent:X.default.messageSticker;case _.default.MSG_TYPE.VIDEO:return e.mediaData.isGif?X.default.messageGif:X.default.messageVideo;case _.default.MSG_TYPE.AUDIO:return X.default.messageAudio;case _.default.MSG_TYPE.PTT:return X.default.messagePTT;case _.default.MSG_TYPE.DOCUMENT:return X.default.messageDocument;case _.default.MSG_TYPE.TEMPLATE_BUTTON_REPLY:case _.default.MSG_TYPE.BUTTONS_RESPONSE:case _.default.MSG_TYPE.LIST_RESPONSE:return X.default.messageChat;case _.default.MSG_TYPE.ORDER:return X.default.messageProduct;case _.default.MSG_TYPE.LIST:if((0,B.listMsgCanRender)(e))return;case _.default.MSG_TYPE.UNKNOWN:return(0,n.default)(X.default.messageChat,X.default.messagePlaceholder);default:return}}(t),{[X.default.messageSystem]:t.isNotification,[X.default.messageCode]:g,[X.default.hasTail]:O,"tail-override-left":"left"===this.props.tailOverride,"tail-override-right":"right"===this.props.tailOverride,[X.default.tailOverrideHide]:D}),$=(0,n.default)({[X.default.messageBackground]:!ne(t),[X.default.hasBorderBox]:!t.isNotification&&!ne(t),[X.default.hasUrlCallButtons]:t.isFromTemplate&&t.hasTemplateButtons&&!t.isQuickReply});if(this._sizeMismatch&&!this.refBubble)return o.createElement("div",{className:X.default.placeholder,ref:this.setRefBubble});y=this.state.contextMenu?"none":t.isRTL?"pop-fast-reverse":"pop-fast",this.state.contextMenu&&(S=o.createElement(q.default,{displayName:"MsgContextMenu",escapable:!0,popable:!0,requestDismiss:this.closeContextMenu},o.createElement(z.default,{contextMenu:this.state.contextMenu}))),this.props.isFocusedMsg&&(C=o.createElement(Z.WhileFocusedListener,{parent:this})),i&&(T=o.createElement(Z.SelectionListener,{parent:this,msgId:t.id.toString(),selectedMessages:i})),F?M=o.createElement("div",{className:X.default.quickActionButton,onClick:this._openEphemeralInfoPopup,role:"button"},o.createElement(K.default,{name:"info-alt"})):H?M=o.createElement("div",{className:X.default.quickActionButton,onClick:this._openBizPrivacyInfoPopup,role:"button"},o.createElement(K.default,{name:"info-alt"})):G?M=o.createElement("div",{className:X.default.quickActionButton,onClick:()=>this.openForwardFlow(!1),role:"button"},o.createElement(K.default,{name:"forward-chat"})):j&&(M=o.createElement("div",{className:X.default.quickActionButton,onClick:this._openWebSearchFlow,role:"button"},o.createElement(K.default,{name:"search"}))),t.mediaData&&(b=o.createElement(Z.MediaListener,{parent:this,mediaData:t.mediaData}));var ee,re,ie,se,le="msg-container";(t.isNotification&&(le="msg-notification-container"),O)&&(re="left"===this.props.tailOverride?oe(te):"right"===this.props.tailOverride?oe(ae):oe(t.isSentByMe),ee=o.createElement(K.default,{name:re,className:X.default.tail,containerRef:this._refTail}));t.logInitialRender(),t.isFromTemplate&&t.hasTemplateButtons?ie=o.createElement(Y.default,{msg:t,chat:t.chat}):null!=t.dynamicReplyButtons&&t.dynamicReplyButtons.length>0&&r!==_.default.DISP_TYPE.STARRED_MSGS&&(ie=o.createElement(c.default,{msg:t})),t.isNotification||a===k.MsgPosition.MID?se=null:t.isSentByMe?se=o.createElement(d.InvisibleLabel,null,N.default.t(15)):t.isGroupMsg||(se=o.createElement(d.InvisibleLabel,null,N.default.t(14,{author:t.displayName()})));var de=null;return t.isEphemeral&&(de=o.createElement(d.InvisibleLabel,null,N.default.t(5))),o.createElement(P.default,{className:W,"data-id":t.id.toString(),handlers:{enter:this._handleKeyActivation,space:this._handleKeyActivation},onDoubleClick:this.onDoubleClick,onRef:this._setRefContainer,tabIndex:-1},o.createElement(Q.default,{transitionName:"delay-leave"},f),o.createElement("div",{"data-a8n":l.default.key(le),className:J,onContextMenu:this._handleMouseContextMenu,onMouseOver:this.mouseEnter,onMouseEnter:this.mouseEnter,onMouseDown:this.mouseDown,onMouseUp:this.mouseEnter,onMouseLeave:this.mouseLeave},ee,o.createElement(U.default,{displayType:r,msg:t}),v,o.createElement("div",{className:$,ref:this.setRefBubble},se,this.getMsgComponent(h),o.createElement(Q.default,{transitionName:y},e)),M,ie,de),S,C,T,b)}}t.Wrapper=re,re.defaultProps={displayType:_.default.DISP_TYPE.CONVERSATION},re.CONCERNS={msg:["author","body","chat","dir","ephemeralDuration","ephemeralOutOfSync","id","isBizNotification","isEphemeral","isFailed","isFrequentlyForwarded","isFutureproof","isGif","isGroupMsg","isLive","isMedia","asMms","isNotification","asRevoked","isRTL","isSentByMe","isUnsentMedia","linkPreview","list","mediaData","matchedText","quotedMsg","richPreviewType","sender","star","subtype","type","title","hasTemplateButtons","isQuickReply","isFromTemplate","doNotPlayInline","ctwaContext","bizPrivacyStatus","verifiedBizName","templateParams","dynamicReplyButtons","replyButtons"]},re.contextType=I.default;var ie=(0,D.default)((0,H.default)(re,re.CONCERNS));t.default=class extends ie{focus(e){this.getComponent().focus(e)}openContextMenu(){this.getComponent().openContextMenu()}getMsgComponentRef(){return this.getComponent().getMsgComponentRef()}};var se=o.forwardRef((function(e,t){var a=e.theme?X.default[e.theme]:null,r=(0,n.default)(X.default.msg,X.default.msgSystem,a,{[w.LIST_FOCUSABLE_ITEM_CLASS_NAME]:e.isFocusable}),i=(0,n.default)(X.default.message,X.default.messageSystem,{[X.default.messageHidden]:e.hidden});return o.createElement("div",{className:r,tabIndex:-1,ref:t},o.createElement("div",{className:i},e.children))}));function ne(e){return e.type===_.default.MSG_TYPE.STICKER&&!e.quotedMsg&&!e.ctwaContext}function oe(e){return e?N.default.isRTL()?"tail-in":"tail-out":N.default.isRTL()?"tail-out":"tail-in"}t.SystemBubble=se},30870:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(19976)),n=i(a(22220)),o=i(a(72779)),l=r(a(2784)),d=i(a(88665)),u=i(a(46650)),c=i(a(81022)),h=i(a(79711)),f=i(a(50935)),p=i(a(62181)),m=i(a(66026)),_=a(13414),v=i(a(17957)),g=i(a(38203)),E=i(a(20642)),y=i(a(79575)),S=a(97526),C=i(a(58885)),T=i(a(61941)),M=i(a(63807)),b=i(a(58355));function P(){var e=(0,s.default)(["getMsgVisibility on invalid ref: ",""]);return P=function(){return e},e}class A extends l.Component{constructor(e){super(e),this._renderedMsgs={},this.renderedDateMarkers={},this._renderedAlbums={},this._renderedMsgToAlbum={},this._refUnread=l.createRef(),this._getRefUnread=()=>this._refUnread.current,this._handleRefreshMessages=()=>{this.forceUpdate()},this._handleOpenMediaViewerForAlbumMedia=e=>{var t=this._renderedMsgToAlbum[e.id.toString()];if(t&&!t.isGroupedSticker()){var a=t.props.msgs,r=new Set((a||[]).map((e=>e.id.toString())));this._renderedMsgToAlbum[e.id.toString()]&&h.default.mediaViewerModal({msg:e,getZoomNode:()=>{var a=t.refAlbumComponents[e.id.toString()];return null==a?void 0:a.getContainerElement()},highlightedMsgIds:r})}},this.onMsgKeyChange=({newKey:e,oldKey:t})=>{var a=e.toString(),r=t.toString(),i=this._renderedMsgs[r];i&&(delete this._renderedMsgs[r],this._renderedMsgs[a]=i)},this._onMsgRendered=(e,t)=>{e?this._renderedMsgs[t]=e:delete this._renderedMsgs[t]},this._rowRenderers={msg:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(((e,t,a,r)=>{var i,s=this.props;i=r&&!a?S.MsgPosition.FRONT:r&&a?S.MsgPosition.MID:!r&&a?S.MsgPosition.END:S.MsgPosition.SINGLE;var n=e.type===f.default.MSG_TYPE.IMAGE||e.type===f.default.MSG_TYPE.VIDEO||e.type===f.default.MSG_TYPE.AUDIO;return l.createElement(b.default,{key:"msg-"+e.id.toString(),ref:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((t=>{var a={};(0,_.GetRef)((e=>{a.wrapper=e}))(t),this._onMsgRendered(a.wrapper,e.id.toString())})),msg:e.unsafe(),displayType:f.default.DISP_TYPE.CONVERSATION,isMsgVisible:n?s.isMsgVisible:()=>{},selectable:s.selectable,selectedMessages:s.selectedMessages,onMessageSelect:s.onMessageSelect,position:i,isFocusedMsg:t,getSequentialMsg:this.props.getSequentialMsg,isFocusable:!0})})),album:(e,t,a,r,i,s)=>{var n,o=this.props;return n=r&&!a?S.MsgPosition.FRONT:r&&a?S.MsgPosition.MID:!r&&a?S.MsgPosition.END:S.MsgPosition.SINGLE,l.createElement(u.default,{msgs:e,ref:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((a=>{this._onAlbumRendered(a,t,e)})),key:"album-"+t,position:n,isMsgVisible:o.isMsgVisible,selectable:o.selectable,selectedMessages:o.selectedMessages,onMessageSelect:o.onMessageSelect,albumId:t,isFocusedAlbum:i,focusedMsgIndex:s,isFocusable:!0})},date:(e,t)=>{var{isLoadingEarlierMsgs:a}=this.props;return l.createElement(p.default,{ref:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((e=>{this._onDateMarkerRendered(t,e)})),key:"msg-"+e.id.toString()+"-date",timestamp:e.t,isFocusable:!a||0!==t})},unread:()=>l.createElement(M.default,{key:"msg-unread",count:this.props.unreadCount,textContainerRef:this._refUnread})},this._openMsgContextMenu=e=>{if(e.target instanceof HTMLElement){var t,a,r=null===(t=e.target)||void 0===t?void 0:t.dataset.id,i=this._renderedMsgs[r]||this._renderedAlbums[r];null==i||null===(a=i.openContextMenu)||void 0===a||a.call(i)}},this._handleBeforeEnd=()=>h.default.openChatBottom(this.props.chat).then((()=>{}));var{msgs:t}=e;this._latestMsgWhenChatOpen=t.length>0?t[t.length-1]:null}shouldComponentUpdate(e){var{msgs:t}=e,a=(0,n.default)(e,["msgs"]),r=this.props,{msgs:i}=r,s=(0,n.default)(r,["msgs"]);return!(0,d.default)(a,s)||!(0,c.default)(t,i)}getSnapshotBeforeUpdate(){var e,t=this.props.getScrollContainer(),a=this.props.msgs.find((e=>this._renderedMsgs.hasOwnProperty(e.id)));if(null==a)return null;var r=a.id.toString();return{commonMessageId:r,commonMessageTop:(0,T.default)(null===(e=this.getMsgWrapperRef(r))||void 0===e?void 0:e.getContainerElement(),"this.getMsgWrapperRef(commonMessageId)?.getContainerElement()").offsetTop-t.scrollTop}}componentDidMount(){this.props.listeners.add(C.default,"change:msgKey",this.onMsgKeyChange),this.props.listeners.add(h.default,"refresh_messages",this._handleRefreshMessages),this.props.listeners.add(h.default,"open_media_viewer_for_album_media",this._handleOpenMediaViewerForAlbumMedia)}componentDidUpdate(e,t,a){var r=this.props.getScrollContainer();if(null!=a){var i,{commonMessageId:s,commonMessageTop:n}=a,o=(0,T.default)(null===(i=this.getMsgWrapperRef(s))||void 0===i?void 0:i.getContainerElement(),"this.getMsgWrapperRef(commonMessageId)?.getContainerElement()");r.scrollTop=o.offsetTop-n}}getMsgVisibility(e){var t=this.props.getScrollContainer(),a=t.scrollTop,r=a+t.clientHeight,i=null==e?void 0:e.getContainerElement();return i?i.offsetTop+i.clientHeight<=a?{visibility:f.default.VISIBILITY.ABOVE,offset:i.offsetTop-a}:i.offsetTop>=r?{visibility:f.default.VISIBILITY.BELOW,offset:i.offsetTop-a}:{visibility:f.default.VISIBILITY.VISIBLE,offset:i.offsetTop-a}:(__LOG__(3)(P(),e),{visibility:f.default.VISIBILITY.VISIBLE,offset:0})}getMsgWrapperRef(e){return this._renderedMsgs[e]||this._renderedMsgToAlbum[e]}getMsgComponentRef(e){return this._renderedMsgs[e]?this._renderedMsgs[e].refMsgComponent&&this._renderedMsgs[e].refMsgComponent.getRef():this._renderedMsgToAlbum[e]?this._renderedMsgToAlbum[e].refAlbumComponents[e]&&this._renderedMsgToAlbum[e].refAlbumComponents[e].getRef():void 0}getDateMarkerRef(e){return this.renderedDateMarkers[e]}_onDateMarkerRendered(e,t){t?this.renderedDateMarkers[e]=t:delete this.renderedDateMarkers[e]}_onAlbumRendered(e,t,a){e?(this._renderedAlbums[t]=e,a.forEach((t=>{this._renderedMsgToAlbum[t.id.toString()]=e}))):delete this._renderedAlbums[t]}render(){var e,t,a,r,{msgs:i,focusedMsgCtx:s,unreadCount:n}=this.props;s&&(a=s.msg,s.isUnreadDivider&&n>0&&(r=s.msg));var d=(0,o.default)(y.default.messageList,{[y.default.messageListSelectable]:this.props.selectable}),u={["".concat(v.default.LR("right","left"))]:this._openMsgContextMenu},c=v.default.LR(v.default.t(12),v.default.t(13));return l.createElement(g.default,{dataTab:f.default.TAB_ORDERS.MESSAGE_LIST,className:d,getPriorityFocusItem:this._getRefUnread,onBeforeEnd:this._handleBeforeEnd,handlers:u,role:"region","aria-label":c},(0,m.default)(this._rowRenderers,i,null===(e=a)||void 0===e?void 0:e.safe(),null===(t=r)||void 0===t?void 0:t.safe(),n,this._latestMsgWhenChatOpen))}}var I=(0,E.default)(A);t.default=I},72457:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,{msg:a,onClick:r,theme:i}=e,{thumbnail:o,isSentByMe:l}=a;o&&(t=n.createElement("div",{className:u.default.media,style:{backgroundImage:'url("data:image/jpeg;base64,'.concat(o,'")')}}));var d=(0,s.default)(u.default.preview,{[u.default.bubbleIn]:!l&&"quoted"!==i,[u.default.bubbleOut]:l||"quoted"===i,[u.default.quoted]:"quoted"===i});return n.createElement("div",{className:d,onClick:r},t,n.createElement("div",{className:u.default.body},n.createElement(f,{msg:a}),n.createElement(p,{msg:a})))},t.OrderTitle=f,t.OrderDescription=p;var s=i(a(72779)),n=r(a(2784)),o=r(a(37356)),l=i(a(91581)),d=i(a(17957)),u=i(a(48294)),c=i(a(72424)),h=i(a(82631));function f(e){var t,{msg:a}=e;if(c.default.webCartV11OrderMessageChanges){var r=d.default.t(837,{count:a.itemCount||0,_plural:a.itemCount||0});t=n.createElement(n.Fragment,null,n.createElement(h.default,{className:u.default.titleIcon,name:"shopping-cart"}),n.createElement(l.default,{text:r}))}else t=n.createElement(l.default,{text:a.orderTitle});return n.createElement("div",{className:u.default.title},t)}function p(e){var{msg:t,showMessage:a}=e,{totalAmount1000:r,totalCurrencyCode:i,itemCount:s}=t,f=null;if(c.default.webCartV11OrderMessageChanges&&null!=r&&null!=i&&""!==i){var p=d.default.t(1121,{total:o.format(i,r)});f=n.createElement(l.default,{text:p})}else if(!c.default.webCartV11OrderMessageChanges){var m=d.default.t(837,{count:s||0,_plural:s||0});f=n.createElement(n.Fragment,null,n.createElement(h.default,{className:u.default.descriptionIcon,name:"shopping-cart"}),n.createElement(l.default,{text:m}))}var _=!0===a?n.createElement(l.default,{text:t.message}):null;return n.createElement("div",null,n.createElement("div",{className:u.default.description},f),_)}},69789:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(18872));class o extends s.PureComponent{render(){return s.createElement(n.default,this.props)}}var l=o;t.default=l},18872:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(52954)),n=i(a(19976)),o=i(a(68015)),l=i(a(72779)),d=i(a(19034)),u=r(a(2784)),c=i(a(32960)),h=i(a(79504)),f=i(a(79711)),p=i(a(9386)),m=a(19741),_=r(a(96452)),v=r(a(45356)),g=i(a(17957)),E=i(a(20642)),y=a(28278),S=r(a(16622)),C=i(a(40210)),T=i(a(61941)),M=i(a(25012)),b=a(207),P=i(a(72259)),A=i(a(86753)),I=i(a(82170)),O=i(a(82631)),N=i(a(67134)),w=i(a(17693)),D=i(a(74824)),R=i(a(51701));function L(){var e=(0,n.default)(["PTT Recording Error"]);return L=function(){return e},e}class k extends u.PureComponent{constructor(e){super(e),this._cancelRecording=()=>{"ready"!==this.state.state&&(this._recorder&&(this._recorder.stop(),this._recorder=null),this.clearInterval(),(0,b.markPaused)(this.props.chat),this.setState({state:"ready",active:void 0,elapsed:0}),this.props.onRecState(!1))},this._incElapsed=()=>{this.setState({elapsed:this.state.elapsed+1})},this._onPTTReady=()=>{this._cancelPTTTimer(),"delay"===this.state.state&&this.setState({state:"recording"})},this._onMouseOverSend=()=>{this.setState({active:"send"})},this._onMouseOutSend=()=>{this.setState({active:void 0})},this._onMouseOverCancel=()=>{this.setState({active:"cancel"})},this._onMouseOutCancel=()=>{this.setState({active:void 0})},this._onMouseUpCancel=()=>{this.state.elapsed<1||(F((0,T.default)(this._recorder,"this._recorder"),C.default.PTT_RESULT_TYPE.CANCELLED),this._cancelPTTTimer(),this._cancelRecording())},this._onMouseUpSend=()=>{if(!(this.state.elapsed<1)){this._cancelPTTTimer();var e=(0,T.default)(this._recorder,"this._recorder");if("recording"!==this.state.state)return F(e,C.default.PTT_RESULT_TYPE.TOO_SHORT),void this._cancelRecording();var t=this.props.chat;this.setState({state:"processing"}),this.props.onRecState(!1),F(e,C.default.PTT_RESULT_TYPE.SENT);var a=t.regCancellablePromise((0,R.default)(e,"dataAvailable").then((e=>M.default.createFromData(e.detail,e.detail.type)))),r=t.getComposeContents().ctwaContext||void 0;(0,y.prepRawMedia)(a,{isPtt:!0,precomputedFields:{duration:~~e.duration}}).sendToChat(t,{quotedMsg:t.composeQuotedMsg||void 0,addEvenWhilePreparing:!0,ctwaContext:r}),t.composeQuotedMsg=null,a.catchType(Promise.CancellationError,(()=>{})).finally((()=>{this._cancelRecording()})),e.stop(),this.props.onRecordingSent()}},this._startRecord=()=>{if("ready"===this.state.state)if(h.default.activeCall)f.default.openModal(u.createElement(p.default,{onOK:()=>f.default.closeModal()},g.default.t(796)));else{var e=S.start("microphone");Promise.race([e,this.props.rejectOnUnmount()]).checkpoint(this.props.rejectOnUnmount()).then((e=>{f.default.pttRecording();var t=new I.default({bitRate:16e3,encoderSampleRate:16e3,encoderApplication:2048});this._recorder=t,t.initStream(e),t.start(),a(99098).default.update(this.props.chat.presence.id).catchType(m.WebdDrop,(()=>{})),(0,b.markRecording)(this.props.chat),this.setState({state:"delay"}),this.props.onRecState(!0),this._pttTimer=this.props.setTimeout(this._onPTTReady,1500),this._startInterval()})).catchType(_.Unmount,(()=>{e.then((e=>S.stop(e))).catch((()=>{}))})).catchType(_.GUM.NotAllowedError,(()=>{f.default.openModal(u.createElement(v.default,{messaging:v.Messaging.MIC_FAIL,type:v.default.TYPE.GUIDE_UNBLOCK}))})).catchType(_.GUM.GUMError,(()=>{f.default.openModal(u.createElement(v.default,{messaging:v.Messaging.MIC_MISSING,type:v.default.TYPE.GUIDE_NONE}))})).catch((()=>{this._recorder&&this._recorder.stop(),__LOG__(3)(L())}))}},this.state={state:"ready",active:null,elapsed:0}}componentDidMount(){this.props.listeners.add(window,"blur",this._cancelRecording)}componentWillUnmount(){}_startInterval(){this.clearInterval(),this._elapsedInterval=this.props.setInterval(this._incElapsed,1e3)}clearInterval(){null!=this._elapsedInterval&&(this.props.clearInterval(this._elapsedInterval),this._elapsedInterval=null),this.setState({elapsed:0})}_cancelPTTTimer(){null!=this._pttTimer&&(this.props.clearTimeout(this._pttTimer),this._pttTimer=null)}render(){var e=this.state.state,t=(0,l.default)(A.default.btnBorder,A.default.btnCancel,{[A.default.isHover]:"cancel"===this.state.active}),a=(0,l.default)(A.default.btnBorder,A.default.btnSend,{[A.default.isHover]:"send"===this.state.active}),r="delay"===e||"recording"===e?u.createElement(w.default,{displayName:"PTT",popable:!0,escapable:!0},u.createElement("div",{className:A.default.recording,key:"recording"},u.createElement("button",{"data-a8n":c.default.key("ptt-cancel-btn"),className:t,onMouseOver:this._onMouseOverCancel,onMouseOut:this._onMouseOutCancel,onMouseUp:this._onMouseUpCancel,"data-animate-btn-border":!0},u.createElement("div",{className:(0,l.default)(A.default.btnBorderIcon,A.default.btnStateDefault)},u.createElement(O.default,{name:"round-x"})),u.createElement("div",{className:(0,l.default)(A.default.btnBorderIcon,A.default.btnStateHover)},u.createElement(O.default,{name:"round-x-inv"}))),u.createElement("div",{className:A.default.pttCounter,"data-animate-ptt-counter":!0},d.default.unix(this.state.elapsed).format("m:ss")),u.createElement("button",{"data-a8n":c.default.key("ptt-send-btn"),className:a,onMouseOver:this._onMouseOverSend,onMouseOut:this._onMouseOutSend,onMouseUp:this._onMouseUpSend,"data-animate-btn-border":!0},u.createElement("div",{className:(0,l.default)(A.default.btnBorderIcon,A.default.btnStateDefault)},u.createElement(O.default,{name:"round-send"})),u.createElement("div",{className:(0,l.default)(A.default.btnBorderIcon,A.default.btnStateHover)},u.createElement(O.default,{name:"round-send-inv"}))))):null,i=this._startRecord,s=this.props.checkForMicrophoneAccess;s&&(i=()=>{s&&s().then((e=>{e&&this._startRecord()}))});var n="ready"===e||"processing"===e?u.createElement("button",{"data-a8n":c.default.key("ptt-ready-btn"),className:A.default.btnPtt,onMouseDown:i,disabled:"processing"===e,key:"button"},u.createElement(O.default,{name:"ptt"})):null,o=(0,l.default)(A.default.container,{[A.default.active]:!!r});return u.createElement("div",{className:o},u.createElement(D.default,{transitionName:"ptt"},r||n))}}var x=(0,P.default)((0,N.default)((0,E.default)(k)));function F(){return G.apply(this,arguments)}function G(){return(G=(0,s.default)((function*(e,t){yield(0,R.default)(e,"dataAvailable"),new C.default.Ptt({pttSource:C.default.PTT_SOURCE_TYPE.FROM_CONVERSATION,pttResult:t,pttDuration:Math.round(e.duration),pttSize:(0,o.default)(e.totalLength,-3)}).commit()}))).apply(this,arguments)}t.default=x},68537:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=a(43322),o=r(a(62830)),l=r(a(79148)),d=r(a(64)),u=r(a(79711)),c=r(a(9386)),h=r(a(50935)),f=r(a(18120)),p=r(a(98294)),m=r(a(71292)),_=r(a(17957)),v=r(a(20642)),g=r(a(50540)),E=a(89590),y=r(a(53175)),S=a(25995),C=r(a(23136)),T=r(a(40207)),M=a(64658);class b extends s.PureComponent{constructor(...e){super(...e),this._confirmReportGroupSpam=()=>{u.default.openModal(s.createElement(g.default,{isGroupChat:!0,onReport:this.reportSpam,onReportExitClear:this.reportSpamExitClear,onCancel:()=>u.default.closeModal()}))},this._exitChat=()=>{u.default.deleteOrExitChat(this.props.chat)},this._confirmReportSpam=()=>{u.default.openModal(s.createElement(g.default,{isBusiness:this.props.contact.isBusiness,isGroupChat:!1,onReport:this.reportSpam,onReportBlockClear:this.reportSpamBlockClear,onCancel:()=>u.default.closeModal()}))},this.reportSpam=()=>{(0,E.sendSpamReport)(this.props.chat,S.SpamFlow.Chat),u.default.closeModal()},this.reportSpamExitClear=()=>{(0,E.sendSpamExitClear)(this.props.chat),u.default.closeModal()},this.reportSpamBlockClear=()=>{(0,E.sendSpamBlockClear)(this.props.chat),u.default.closeModal()},this.notSpam=()=>{(0,E.sendNotSpam)(this.props.chat,!0).catch((()=>{}))},this._confirmBlock=()=>{u.default.openModal(s.createElement(o.default,{contact:this.props.contact,onCancel:()=>u.default.closeModal(),onBlock:this.block,onReportSpamBlock:this.reportSpamBlock}))},this.block=()=>{(0,n.blockContact)(this.props.contact).catch((()=>{})),u.default.closeModal()},this.reportSpamBlock=()=>{(0,E.sendSpamReport)(this.props.chat,S.SpamFlow.Block),(0,n.blockContact)(this.props.contact).catch((()=>{})),u.default.closeModal()},this._confirmUnblock=()=>{u.default.openModal(s.createElement(c.default,{okText:_.default.t(1362),onOK:this.unblock,cancelText:_.default.t(1547),onCancel:()=>u.default.closeModal()},_.default.t(1363,{contact:this.props.contact.formattedName})))},this.unblock=()=>{(0,n.unblockContact)(this.props.contact).catch((()=>{})),u.default.closeModal()},this._getNotSpamButton=()=>s.createElement("div",{key:"not_spam",className:y.default.button},s.createElement(d.default,{onClick:this.notSpam,type:"plain-white"},_.default.t(1709))),this._onViewInfo=()=>{u.default.openDrawerRight(s.createElement(m.default,{chat:(0,M.unproxy)(this.props.chat),key:"info-".concat(this.props.chat.id.toString())}),"slide-left",this.props.uim)}}componentDidMount(){this.props.listeners.add(l.default,"add remove reset",(()=>{this.forceUpdate()}))}render(){var{chat:e,contact:t}=this.props;if(e.isPSA||!e.shouldAppearInList||e.trusted)return null;var a,r=l.default.get(e.id),i=[];if(e.isGroup)a=_.default.t(725),i.push(s.createElement("div",{key:"report_spam",className:y.default.button},s.createElement(d.default,{type:"plain-white",onClick:this._confirmReportGroupSpam},_.default.t(1189)))),i.push(s.createElement("div",{key:"exit_group",className:y.default.button},s.createElement(d.default,{type:"plain-white",onClick:this._exitChat},_.default.t(1592)))),i.push(this._getNotSpamButton());else{if(a=s.createElement("div",{className:y.default.text},_.default.t(1286)),t.isBusiness)if(f.default.supportsFeature(f.default.F.VNAME_V_2)){var n=t.verifiedLevel===h.default.VERIFIED_LEVEL.HIGH?_.default.t(1103):_.default.t(902);a=s.createElement("div",{className:y.default.text},n)}else t.verifiedLevel>h.default.VERIFIED_LEVEL.UNKNOWN&&t.businessProfile&&(a=s.createElement(C.default,{contact:t,businessProfile:t.businessProfile,onClick:this._onViewInfo}));i.push(s.createElement("div",{key:"report_spam",className:y.default.button},s.createElement(d.default,{type:"plain-white",onClick:this._confirmReportSpam},_.default.t(1189)))),r?i.push(s.createElement("div",{key:"unblock",className:y.default.button},s.createElement(d.default,{onClick:this._confirmUnblock,type:"plain-white"},_.default.t(1362)))):i.push(s.createElement("div",{key:"block",className:y.default.button},s.createElement(d.default,{onClick:this._confirmBlock,type:"plain-white"},_.default.t(273)))),i.push(this._getNotSpamButton())}return s.createElement("div",{className:y.default.spam},a,s.createElement("div",{className:y.default.controls},i))}}b.CONCERNS={chat:["id","isPSA","shouldAppearInList","trusted","isGroup","vcardDismissed"],contact:["id","isBusiness","verifiedLevel","formattedName","businessProfile"]};var P=(0,p.default)((0,v.default)((0,T.default)(b,b.CONCERNS)));t.default=P},23136:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(50935)),o=r(a(46478)),l=r(a(91581)),d=r(a(17957)),u=r(a(84974)),c=r(a(2825)),h=r(a(40207)),f=r(a(82631));class p extends s.PureComponent{getAddressString(e){var{streetAddress:t,localizedCityName:a,zipCode:r}=e;return t&&a&&r?d.default.t(359,{streetAddress:t,city:a,zipCode:r}):t&&a?d.default.t(358,{streetAddress:t,city:a}):t}render(){var e,t,a,r,{businessProfile:i,contact:d}=this.props,{id:h,formattedName:p,verifiedLevel:m}=d;if(i.stale)a=s.createElement("div",null,s.createElement(c.default,{size:20,stroke:5}));else{var _=i.structuredAddress&&this.getAddressString(i.structuredAddress);_&&(e=s.createElement("div",{className:u.default.address},s.createElement(l.default,{selectable:!0,direction:"auto",text:_}))),i.description&&(t=s.createElement("div",{className:u.default.description,title:i.description},s.createElement(l.default,{selectable:!0,direction:"auto",text:i.description})))}return m===n.default.VERIFIED_LEVEL.HIGH&&(r=s.createElement("div",{className:u.default.badge},s.createElement(f.default,{name:"psa-verified"}))),s.createElement("div",{className:u.default.container,onClick:this.props.onClick},s.createElement("div",{className:u.default.image},s.createElement(o.default,{id:h,size:55}),r),s.createElement("div",{className:u.default.body},s.createElement("div",{className:u.default.name},p),a,e,t))}}p.CONCERNS={contact:["id","verifiedLevel","formattedName"],businessProfile:["stale","structuredAddress","description"]};var m=(0,h.default)(p,p.CONCERNS);t.default=m},76133:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(64)),o=r(a(79711)),l=r(a(92229)),d=r(a(98294)),u=r(a(81524)),c=r(a(40207)),h=r(a(59600));class f extends s.PureComponent{constructor(...e){super(...e),this.onViewContact=()=>{o.default.openDrawerRight(s.createElement(l.default,{chat:this.props.chat}),"slide-left",this.props.uim)}}render(){var{chat:e,dismissVcardPanel:t}=this.props,a=e.receivedVcardMsgs;return s.createElement("div",{className:h.default.vcard},s.createElement(u.default,{id:693,plural:a.length}),s.createElement("div",{className:h.default.controls},s.createElement(n.default,{onClick:this.onViewContact,type:"plain-white"},s.createElement(u.default,{id:1423,plural:a.length})),s.createElement(n.default,{onClick:t,type:"plain-white"},s.createElement(u.default,{id:1094}))))}}f.CONCERNS={chat:["receivedVcardMsgs"]};var p=(0,d.default)((0,c.default)(f,f.CONCERNS));t.default=p},33296:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(91460),n=i(a(2784)),o=r(a(79711)),l=r(a(9386)),d=r(a(29505)),u=a(95595),c=r(a(63789)),h=r(a(97934)),f=r(a(17957)),p=i(a(90088)),m=r(a(60127)),_=r(a(2825));class v extends d.default{constructor(...e){super(...e),this._cancel=()=>{this._queryChatPromise&&this._queryChatPromise.cancel(),this._queryChatPromise=void 0,this.end()},this.error=()=>{this.push(n.createElement(l.default,{onOK:()=>this.end(),okText:f.default.t(1709)},f.default.t(987)))}}componentDidMount(){var e=!1,t=(0,s.delayMs)(250).cancellable().then((()=>{e=!0,this.push(n.createElement(l.default,{title:f.default.t(1298),onCancel:this._cancel,cancelText:f.default.t(1547)},n.createElement("div",{className:m.default.spinner},n.createElement(_.default,{stroke:6,size:24}))))})).catchType(Promise.CancellationError,(()=>{})),a=Date.now();this._queryChatPromise=(0,h.default)(this.props.chatId).cancellable().then((e=>(0,c.default)(e))).then((r=>{e||t.cancel();var i=Date.now()-a,n=e?Math.max(750-i,0):0;return this.openChat(r),(0,s.delayMs)(n).then((()=>{this.end(),this.props.onSuccess(r)}))})).catchType(Promise.CancellationError,(()=>{})).catch((e=>{t.cancel(),this.error(e)}))}openChat(e){var{msgText:t}=this.props,a=this.props.ctwaContextLinkData;if(a){var r=p.findLink(a.sourceUrl||"",!1,(0,u.getMaybeMeUser)());r&&r.suspiciousCharacters&&r.suspiciousCharacters.size>0&&(a=null)}a&&(t=a.icebreaker),e.active&&t?(o.default.pasteChatTextInput(e,t),a&&o.default.setChatCtwaContextLinkData(e,a)):(t&&e.setComposeContents({text:t}),o.default.openChatFromUnread(e).then((t=>{t&&(o.default.focusChatTextInput(e),a&&o.default.setChatCtwaContextLinkData(e,a))})))}}t.default=v,v.defaultProps={removeTopDrawer:!0,pushTransition:"none",popTransition:"none"}},91944:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(79711)),o=r(a(50935)),l=r(a(29505)),d=r(a(17957)),u=i(a(51079));class c extends l.default{constructor(...e){super(...e),this._onStartGroupCall=e=>{this.props.onStartGroupCall(e.map((e=>e.id))),n.default.closeModal()},this.contactFilter=e=>!this.props.groupParticipants||!!this.props.groupParticipants.find((t=>t.equals(e.id))),this._pop=()=>{this.pop()}}componentDidMount(){this.push(s.createElement(u.default,{title:this.props.isVideo?d.default.t(773):d.default.t(774),filter:this.contactFilter,onCancel:this._pop,onConfirm:this._onStartGroupCall,listType:u.ListType.PARTICIPANT_MANAGE_MODAL,maxItems:o.default.VOIP_MAX_GROUP_CALL_PARTICIPANTS,allowBlockedContacts:!1}))}}t.default=c},29505:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(95972)),o=r(a(61941)),l=r(a(17693)),d=r(a(5179)),u=r(a(74824));class c extends s.Component{constructor(...e){super(...e),this.state={_stack:[],_transition:"default",_activeKey:0,_ended:!1},this.setRefUIE=e=>{this.refUIE=e},this.popAndUpdate=(e,t)=>{var a=this.state._stack;if(a.length<2)this.pop(t);else{var r=s.cloneElement(a[a.length-2],e);a[a.length-2]=r,this.pop(t)}},this.push=(e,t=this.props.pushTransition)=>{this.setState({_stack:this.state._stack.concat(e),_transition:t,_activeKey:++this.state._activeKey,_ended:!1})},this.pop=(e=this.props.popTransition)=>{var t=this.state._stack.slice(0,-1);t.length?this.setState({_stack:t,_transition:e,_activeKey:--this.state._activeKey}):this.state._ended||this.setState({_ended:!0},this.end)},this.end=e=>{this.props.onEnd?this.props.onEnd(e):(0,o.default)(this.context,"this.context").uie.requestDismiss(e)},this.stackSize=()=>this.state._stack.length,this.requestFocus=()=>{this.props.requestFocus&&this.props.requestFocus()}}handleRequestDismiss(){this.pop()}render(){var{_stack:e,_transition:t,_activeKey:a}=this.state;if(0===e.length)return null;var r=e[e.length-1];return r=s.createElement(l.default,{displayName:"FlowDrawer".concat(a),key:a,escapable:!0,ref:this.setRefUIE,requestFocus:this.requestFocus,requestDismiss:this.handleRequestDismiss.bind(this)},r),s.createElement(u.default,{transitionName:t,className:n.default.container},this.props.removeTopDrawer?r:e)}}t.default=c,c.contextType=d.default,c.defaultProps={removeTopDrawer:!0,pushTransition:"flow-transition-drawer-push",popTransition:"flow-transition-drawer-pop"}},40207:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,r){var i,o,p=(0,u.default)(e);t||a||(__LOG__(4,void 0,new Error,!0)(f()),SEND_LOGS("StateHOC wrapping class with no concerns, check ".concat(p)));var m=[];if(t)for(var _ in t)m.push(new d.default(p,_,t[_],!0));if(a)for(var v in a)t&&t.hasOwnProperty(v)&&(__LOG__(4,void 0,new Error,!0)(h()),SEND_LOGS('Component has marked "'.concat(v,'" as both a normal and weak concern, check ').concat(p))),m.push(new d.default(p,v,a[v],!1));return o=i=class t extends c.WrappedComponent{constructor(e){super(e),this._rr=(e,t)=>{this.setState((a=>({proxies:(0,n.default)((0,n.default)({},a.proxies),{},{[e.name]:e.createProxy(t)})})))};for(var a={},r=!1,i=0;i<m.length;i++){var s=m[i],o=s.name,l=s.getModelAndValidate(t._getModelOrProxy(o,e));if(l){var d=s.createProxy(l);s.attachConcern(l,d.proxyBitMask,this._rr),a[o]=d}else r=!0}this.state={props:e,proxies:a,hasBroken:r}}static _getModelOrProxy(e,t){return t[e]}static getDerivedStateFromProps(e,a){var r=(0,n.default)({},a.proxies),i=!1;if(!a.hasBroken)for(var s=a.props,o=0;o<m.length;o++){var l=m[o],d=l.name,u=l.getModel(t._getModelOrProxy(d,s)),c=l.getModelAndValidate(t._getModelOrProxy(d,e));u!==c&&(c?r[d]=l.createProxy(c):i=!0)}return{props:e,proxies:r,hasBroken:i}}componentDidUpdate(e){if(!this.state.hasBroken)for(var a=0;a<m.length;a++){var r=m[a],i=r.name,s=r.getModel(t._getModelOrProxy(i,e)),n=r.getModelAndValidate(t._getModelOrProxy(i,this.props));if(s!==n&&(r.detachConcern(s,this._rr),n)){var o=this.state.proxies[i];r.attachConcern(n,o.proxyBitMask,this._rr)}}}componentWillUnmount(){if(!this.state.hasBroken)for(var e=0;e<m.length;e++){var a=m[e];a.detachConcern(a.getModel(t._getModelOrProxy(a.name,this.props)),this._rr)}}_getComponent(){return c._getComponent.call(this)}render(){var{proxies:t,hasBroken:a,hasError:i}=this.state;if(a||i)return null;var n={};return r?n.forwardRef=this.setComponent:n.ref=this.setComponent,l.createElement(e,(0,s.default)({},n,this.props,t))}},i.displayName="State(".concat(p,")"),o};var s=i(a(58527)),n=i(a(70417)),o=i(a(19976)),l=r(a(2784)),d=i(a(97591)),u=i(a(93954)),c=a(13414);function h(){var e=(0,o.default)(["Assertion failed!"]);return h=function(){return e},e}function f(){var e=(0,o.default)(["Assertion failed!"]);return f=function(){return e},e}},49984:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.getVisibleLabelId=p,t.renderLabelSvg=_,t.default=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(91581)),l=i(a(18120)),d=a(75459),u=i(a(23539)),c=i(a(50023)),h=i(a(20642)),f=i(a(82631));function p(e){if(0!==e.length){if(!l.default.supportsFeature(l.default.F.MD_BACKEND))return e[0];var t=Math.max(...e.map((e=>parseInt(e,10))));return isNaN(t)?e[0]:t.toString()}}class m extends n.PureComponent{constructor(...e){super(...e),this._forceUpdate=()=>{this.forceUpdate()}}componentDidMount(){var e=p(this.props.labels);null!=e&&this._listenToLabelChange(e)}componentDidUpdate(e){var t=p(e.labels),a=p(this.props.labels);a!==t&&(null!=a&&this._listenToLabelChange(a),null!=t&&this._unlistenToLabelChange(t))}_listenToLabelChange(e){this.props.listeners.add(u.default,"label_updated_".concat(e),this._forceUpdate)}_unlistenToLabelChange(e){this.props.listeners.remove(u.default,"label_updated_".concat(e),this._forceUpdate)}render(){var{labels:e,showName:t,renderAsCircle:a}=this.props;if(!(0,d.canDisplayLabel)())return null;var r=function(e){var t=p(e);return null==t?null:u.default.get(t)}(e);if(!r||!r.name)return null;if(1===e.length){var i=t?n.createElement("span",{className:c.default.name},n.createElement(o.default,{text:r.name})):null,l=(0,s.default)({[c.default.container]:!t&&!a,[c.default.containerCircleIconFull]:!!a,[c.default.containerFull]:t&&!a,[c.default.labelFilter]:"label-filter"===this.props.theme,[c.default.drawerTitle]:"drawer-title"===this.props.theme}),h=a?{backgroundColor:r.hexColor}:{},m=a?n.createElement(f.default,{name:"label",className:c.default.icon}):_(r.hexColor);return n.createElement("div",{className:l},n.createElement("div",{className:(0,s.default)(c.default.iconContainer,{[c.default.circleIcon]:a}),style:h},m),i)}return n.createElement("div",{className:c.default.container},n.createElement("svg",{width:"18px",height:"15px",viewBox:"0 0 18 15"},n.createElement("path",{fill:r.hexColor,d:"M11.208,3.925H2.236C1.556,3.925,1,4.565,1,5.357v7.213C1,13.362,1.556,14,2.236,14h8.972 c0.414,0,0.785-0.237,1.007-0.604l2.701-4.433L12.215,4.53C11.993,4.162,11.622,3.925,11.208,3.925z"}),n.createElement("path",{fill:"currentColor",d:"M15.541,7.832L13.164,3.93 c-0.423-0.698-1.15-1.142-1.956-1.142H2.595V2.432C2.595,1.64,3.151,1,3.831,1h9.1c0.414,0,0.782,0.237,1.005,0.605l2.696,4.433 L15.541,7.832z"})))}}function _(e){return n.createElement("svg",{key:2,width:"18px",height:"12px",viewBox:"0 0 18 12",className:c.default.icon},n.createElement("path",{fill:e||"#ffffff",d:"M11.208,0.925H2.236C1.556,0.925,1,1.565,1,2.357V9.57C1,10.362,1.556,11,2.236,11h8.972 c0.414,0,0.785-0.237,1.007-0.604l2.701-4.433L12.215,1.53C11.993,1.162,11.622,0.925,11.208,0.925z"}))}var v=(0,h.default)(m);t.default=v},69882:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var s=i(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(17957)),d=r(a(1034)),u=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,66681)).then((e=>e.default))),"AddContactToGroupFlow");t.requireBundle=u;var c=(0,n.default)({loader:u,loading:e=>s.createElement(d.default,{title:l.default.t(1668),error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=c},67524:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var s=i(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(28084)),d=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(9488),a.e(7205)]).then(a.bind(a,71194)).then((e=>e.default))),"ArchivedFlow");t.requireBundle=d;var u=(0,n.default)({loader:d,loading:e=>s.createElement(l.default,{error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=u},59853:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var s=i(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(28084)),d=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,84642)).then((e=>e.default))),"AttachMediaFlow");t.requireBundle=d;var u=(0,n.default)({loader:d,loading:e=>s.createElement(l.default,{error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=u},3573:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var s=i(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(17957)),d=r(a(1034)),u=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,60719)).then((e=>e.default))),"AttachProductsFlow");t.requireBundle=u;var c=(0,n.default)({loader:u,loading:e=>s.createElement(d.default,{title:l.default.t(1285),error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=c},11932:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var s=i(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(17957)),d=r(a(1034)),u=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,84834)).then((e=>e.default))),"AttachVcardsFlow");t.requireBundle=u;var c=(0,n.default)({loader:u,loading:e=>s.createElement(d.default,{title:l.default.t(1259),error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=c},39690:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var s=i(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(28084)),d=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,26458)).then((e=>e.default))),"CaptureFlow");t.requireBundle=d;var u=(0,n.default)({loader:d,loading:e=>s.createElement(l.default,{error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=u},90440:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.showCartFlow=function(e,t,a){var r=void 0!==t?t:(new c.default).toString();if(a&&a.id.toString()===e)return s.createElement(m,{sellerJid:e,chat:a,sessionId:r});o.default.openModal(s.createElement(u.default,{chatId:(0,f.createWid)(e),onSuccess:t=>{window.setTimeout((()=>{o.default.openDrawerRight(s.createElement(m,{sellerJid:e,chat:t,sessionId:r}),"slide-left")}),100)},msgText:null}),{transition:"modal-flow"})},t.default=t.requireBundle=void 0;var s=i(a(2784)),n=r(a(89028)),o=r(a(79711)),l=r(a(50935)),d=r(a(86348)),u=r(a(33296)),c=r(a(55043)),h=r(a(95561)),f=a(75637),p=(0,h.default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,96858)).then((e=>e.default))),"CartFlowLoadable");t.requireBundle=p;var m=(0,n.default)({loader:p,loading:e=>s.createElement(d.default,{error:Boolean(e.error)}),delay:l.default.LOADABLE_DELAY}),_=m;t.default=_},66181:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.openCatalogManagementFlow=function(e){var t=(0,u.getMeUser)(),a=o.default.get(t);null==a?o.default.find(t).then((a=>{l.default.openDrawerLeft(s.createElement(p,{catalog:a,catalogId:t,product:e}))})).catch((()=>{l.default.openDrawerLeft(s.createElement(p,{catalogId:t,product:e}))})):(a.stale=!0,a.markProductCollectionOld(),l.default.openDrawerLeft(s.createElement(p,{catalog:a,catalogId:t,product:e})))},t.default=t.requireBundle=void 0;var s=i(a(2784)),n=r(a(89028)),o=r(a(65468)),l=r(a(79711)),d=r(a(50935)),u=a(95595),c=r(a(17957)),h=r(a(28084)),f=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,59693)).then((e=>e.default))),"CatalogManagementFlow");t.requireBundle=f;var p=(0,n.default)({loader:f,loading:e=>s.createElement(h.default,{title:c.default.t(835),error:Boolean(e.error)}),delay:d.default.LOADABLE_DELAY}),m=p;t.default=m},46691:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var s=i(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(90820)),d=r(a(95561)),u=r(a(22224)),c=(0,d.default)((()=>Promise.all([a.e(8295),a.e(9488),a.e(7205)]).then(a.bind(a,22224)).then((e=>e.default))),"ComposeBoxPanels");t.requireBundle=c;(0,n.default)({loader:c,loading:e=>s.createElement(l.default,{error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});var h=u.default;t.default=h},26871:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var s=i(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(17957)),d=r(a(28084)),u=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,77619)).then((e=>e.default))),"ContactMsgInfoFlow");t.requireBundle=u;var c=(0,n.default)({loader:u,loading:e=>s.createElement(d.default,{title:l.default.t(947),error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=c},97473:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var s=i(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(28084)),d=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,5918)).then((e=>e.default))),"EditCaptureFlow");t.requireBundle=d;var u=(0,n.default)({loader:d,loading:e=>s.createElement(l.default,{error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=u},93329:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var s=i(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(17957)),d=r(a(1034)),u=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,90561)).then((e=>e.default))),"ForwardMessageFlow");t.requireBundle=u;var c=(0,n.default)({loader:u,loading:e=>s.createElement(d.default,{title:l.default.t(686,{_plural:1}),error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=c},93171:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var s=i(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(17957)),d=r(a(28084)),u=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,7388)).then((e=>e.default))),"GroupInviteLinkDrawer");t.requireBundle=u;var c=(0,n.default)({loader:u,loading:e=>s.createElement(d.default,{title:l.default.t(738),error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=c},77906:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var s=i(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(28084)),d=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,17302)).then((e=>e.default))),"GroupMsgInfoFlow");t.requireBundle=d;var u=(0,n.default)({loader:d,loading:e=>s.createElement(l.default,{error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=u},71559:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var s=i(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(17957)),d=r(a(91755)),u=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,5727)).then((e=>e.default))),"GroupV4InviteFlow");t.requireBundle=u;var c=(0,n.default)({loader:u,loading:e=>s.createElement(d.default,{okText:l.default.t(1665),error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=c},71292:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var s=i(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(28084)),d=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(9488),a.e(7205)]).then(a.bind(a,41780)).then((e=>e.default))),"InfoFlow");t.requireBundle=d;var u=(0,n.default)({loader:d,loading:e=>s.createElement(l.default,{error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=u},54700:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var s=i(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(17957)),d=r(a(28084)),u=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,51937)).then((e=>e.default))),"LabelFlow");t.requireBundle=u;var c=(0,n.default)({loader:u,loading:e=>s.createElement(d.default,{title:l.default.t(846),error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=c},65829:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var s=i(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(17957)),d=r(a(91755)),u=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,43865)).then((e=>e.default))),"LicensesPopup");t.requireBundle=u;var c=(0,n.default)({loader:u,loading:e=>s.createElement(d.default,{title:l.default.t(849),okText:l.default.t(1709),error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=c},94469:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.ExpiredLocationDrawerLoadable=t.LiveLocationDrawerLoadable=t.requireBundle=void 0;var s=i(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(17957)),d=r(a(28084)),u=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,7266)).then((({LiveLocationDrawer:e,ExpiredLocationDrawer:t})=>({LiveLocationDrawer:e,ExpiredLocationDrawer:t})))),"LiveLocationDrawer");t.requireBundle=u;var c=(0,n.default)({loader:()=>u().then((e=>e.LiveLocationDrawer)),loading:e=>s.createElement(d.default,{title:l.default.t(881),error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.LiveLocationDrawerLoadable=c;var h=(0,n.default)({loader:()=>u().then((e=>e.ExpiredLocationDrawer)),loading:e=>s.createElement(d.default,{title:l.default.t(857),error:Boolean(e.error),retry:e.retry}),delay:o.default.LOADABLE_DELAY});t.ExpiredLocationDrawerLoadable=h},65268:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requireSetHandlers=t.requireVoip=t.requireStickerPackCollection=t.requireMsgCollection=t.requireChatCollection=t.requireLabelCollection=t.requireHandleVideoStreamingRequest=t.requireClearAppStates=t.requireStatusV3Collection=t.requireEmojiAssetMapCreator=t.requireEmojiConfig=t.requireHandleSocketMessage=t.requireLoadProtoVersions=t.requireContactCollection=t.requireMain=void 0;t.requireMain=()=>a(80401).Z;t.requireContactCollection=()=>a(7470).default;t.requireLoadProtoVersions=()=>({features:a(90806).Z,17:a(4870).Z});t.requireHandleSocketMessage=()=>a(9383).Z;t.requireEmojiConfig=()=>({APPLE:{UNICODE_TO_EMOJI:a(29720).Z,SELECTOR:"apple"},WHATSAPP:{UNICODE_TO_EMOJI:a(88877).Z,SELECTOR:"wa"}});t.requireEmojiAssetMapCreator=()=>a(38527).default;t.requireStatusV3Collection=()=>a(57185).default;t.requireClearAppStates=()=>a(9106).Z;t.requireHandleVideoStreamingRequest=()=>a(91658).D;t.requireLabelCollection=()=>a(23539).default;t.requireChatCollection=()=>a(43334).default;t.requireMsgCollection=()=>a(58885).default;t.requireStickerPackCollection=()=>a(23054).default;t.requireVoip=()=>a(64786).default;t.requireSetHandlers=()=>a(6469).y},92998:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=a(20485),o=r(a(17957)),l=r(a(7034)),d=r(a(82631));function u(e){return s.createElement("div",null,s.createElement("div",{className:l.default.circle},s.createElement(d.default,{name:"live-location-refresh"})),s.createElement("div",{className:l.default.text},e.text))}function c(e){var{error:t,text:a,retry:r}=e;return s.createElement("div",{className:l.default.container,onClick:t?r:null},t?s.createElement(u,{text:a}):s.createElement(n.Loading,null))}c.defaultProps={text:o.default.t(847),retry:()=>window.location.reload()};var h=c;t.default=h},86348:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(92998));var o=function(e){return s.createElement("div",null,s.createElement(n.default,{error:e.error}))};t.default=o},90820:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(72779)),o=r(a(45484)),l=r(a(87276)),d=r(a(408)),u=r(a(92998));var c=function(e){var t=(0,n.default)({[d.default.panelBodyError]:e.error},d.default.panelBody);return s.createElement("div",null,s.createElement("div",{className:o.default.container}),s.createElement("div",{className:d.default.gifPanel},s.createElement("div",{className:d.default.bodyContainer},s.createElement("div",{className:t},s.createElement("div",{className:l.default.noResults},s.createElement(u.default,e))))))};t.default=c},91755:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return s.createElement(o.default,{title:e.title,onOK:()=>{},okText:e.okText,okDisabled:!0,onCancel:()=>n.default.closeModal()},s.createElement("div",{className:d.default.container},s.createElement(l.default,{error:e.error})))};var s=i(a(2784)),n=r(a(79711)),o=r(a(9386)),l=r(a(92998)),d=r(a(67211))},28084:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(22220)),n=r(a(2784)),o=i(a(58701)),l=i(a(73023)),d=r(a(71311)),u=i(a(98294)),c=i(a(92998));class h extends n.PureComponent{constructor(...e){super(...e),this.onCancel=()=>{this.props.uim.uie.requestDismiss()}}render(){var e=this.props,{title:t,headerType:a,uim:r}=e,i=(0,s.default)(e,["title","headerType","uim"]);return n.createElement(o.default,null,n.createElement(d.default,{title:t,type:a,onCancel:this.onCancel}),n.createElement(l.default,null,n.createElement(c.default,i)))}}h.defaultProps={headerType:d.DRAWER_HEADER_TYPE.SMALL};var f=(0,u.default)(h);t.default=f},79832:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,s.default)("overlay",c.default.mediaViewer),a=()=>o.default.closeModalMedia();return n.createElement("div",null,n.createElement("div",{className:t,"data-animate-media-viewer":!0},n.createElement("div",{className:u.default.mediaPanelHeader},n.createElement("div",{className:u.default.info}),n.createElement("div",{className:u.default.mediaPanelTools},n.createElement(h.MenuBar,{key:"media-panel-header",theme:"strong"},n.createElement(h.MenuBarItem,{a8nText:"btn-close",icon:n.createElement(f.default,{name:"x-viewer"}),title:l.default.t(1558),onClick:a})))),n.createElement("div",{className:c.default.mediaContent,dir:"ltr",onClick:a},n.createElement("div",{className:c.default.media},n.createElement(d.default,{error:e.error})))))};var s=i(a(72779)),n=r(a(2784)),o=i(a(79711)),l=i(a(17957)),d=i(a(92998)),u=i(a(20434)),c=i(a(45864)),h=a(80898),f=i(a(82631))},1034:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return n.createElement(d.default,{type:d.TowerModalType},n.createElement(l.default,(0,s.default)({headerType:o.DRAWER_HEADER_TYPE.POPUP},e)))};var s=i(a(58527)),n=r(a(2784)),o=a(71311),l=i(a(28084)),d=r(a(41967))},39129:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return s.createElement("div",{className:l.default.container},s.createElement("div",{className:l.default.body,dir:"ltr"},s.createElement("div",{className:l.default.imageContainer},s.createElement("div",{className:l.default.defaultIcon},s.createElement(d.default,{name:e.svgName}))),e.error?s.createElement(o.LazyLoadRetry,{className:l.default.lazyLoadRetry,onClick:e.retry}):s.createElement(n.default,null)))};var s=i(a(2784)),n=r(a(72174)),o=a(20485),l=r(a(29516)),d=r(a(82631))},94786:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{error:t,text:a,retry:r}=e,i=(0,s.default)(d.default.closeButton,u.default.v3X,{}),h=(0,s.default)(d.default.closeButton,u.default.backIcon,{}),f=()=>o.default.closeModalMedia();return n.createElement("div",{className:u.default.viewer,"data-animate-status-v3-viewer":!0},n.createElement("button",{className:i,onClick:f},n.createElement(c.default,{name:"x-viewer"})),n.createElement("button",{className:h,onClick:f},n.createElement(c.default,{name:"back",directional:!0})),n.createElement(l.default,{error:t,text:a,retry:r}))};var s=i(a(72779)),n=r(a(2784)),o=i(a(79711)),l=i(a(92998)),d=i(a(78837)),u=i(a(38157)),c=i(a(82631))},2422:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,s.default)(u.default.closeButton,h.default.v3_x,{});return n.createElement("div",{className:h.default.modalBackground,"data-animate-status-v3-modal-background":!0},n.createElement("div",{className:h.default.mainWrapper},n.createElement("div",{className:c.default.listPanel},n.createElement("div",{className:c.default.panelHeader},n.createElement("div",{className:c.default.headerButtonsPrimary}),n.createElement("div",{className:c.default.headerText},n.createElement("span",{className:c.default.primaryHeaderText},l.default.t(1305))),n.createElement("div",{className:c.default.headerButtonsSecondary}))),n.createElement("div",{className:f.default.outStatusPanel},n.createElement(d.default,e)),n.createElement("button",{className:t,onClick:()=>o.default.closeModalMedia()},n.createElement(p.default,{name:"x-viewer"}))))};var s=i(a(72779)),n=r(a(2784)),o=i(a(79711)),l=i(a(17957)),d=i(a(92998)),u=i(a(78837)),c=i(a(93866)),h=i(a(41837)),f=i(a(95578)),p=i(a(82631))},26432:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var s=i(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(17957)),d=r(a(1034)),u=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,24180)).then((e=>e.default))),"ManageLabelFlow");t.requireBundle=u;var c=(0,n.default)({loader:u,loading:e=>s.createElement(d.default,{title:l.default.t(838),error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=c},62303:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var s=i(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(79832)),d=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(9488),a.e(7205)]).then(a.bind(a,84425)).then((e=>e.default))),"MediaViewerFlow");t.requireBundle=d;var u=(0,n.default)({loader:d,loading:e=>s.createElement(l.default,{error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=u},57557:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var s=i(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(28084)),d=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,26298)).then((e=>e.default))),"NewChatFlow");t.requireBundle=d;var u=(0,n.default)({loader:d,loading:e=>s.createElement(l.default,{error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=u},82476:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var s=i(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(28084)),d=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,75238)).then((e=>e.default))),"NewGroupFlow");t.requireBundle=d;var u=(0,n.default)({loader:d,loading:e=>s.createElement(l.default,{error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=u},91853:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var s=i(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(39129)),d=r(a(96183)),u=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,87881)).then((e=>e.default))),"PhotoPicker");t.requireBundle=u;var c=(0,n.default)({loader:u,loading:e=>s.createElement(l.default,{svgName:"default-user",error:Boolean(e.error),retry:e.retry}),delay:o.default.LOADABLE_DELAY}),h=(0,n.default)({loader:u,loading:e=>s.createElement(l.default,{svgName:"default-group",error:Boolean(e.error),retry:e.retry}),delay:o.default.LOADABLE_DELAY});class f extends s.PureComponent{render(){return this.props.type===d.default.PROFILE?s.createElement(c,this.props):s.createElement(h,this.props)}}t.default=f},19979:(e,t,a)=>{"use strict";var r=a(14859);t.Z=function(){return G.apply(this,arguments)};var i=r(a(19976)),s=r(a(52954)),n=a(69882),o=a(67524),l=a(59853),d=a(3573),u=a(11932),c=a(39690),h=a(90440),f=a(26871),p=a(97473),m=a(93329),_=a(93171),v=a(77906),g=a(71559),E=a(71292),y=a(54700),S=a(94469),C=a(26432),T=a(62303),M=a(57557),b=a(82476),P=a(91853),A=a(13531),I=a(35194),O=a(82163),N=a(41745),w=a(40773),D=a(20661),R=a(11086),L=a(92062),k=a(11405),x=a(89551);function F(){var e=(0,i.default)(["Error prefetching loadables: ",""]);return F=function(){return e},e}function G(){return(G=(0,s.default)((function*(){try{var e=[(0,T.requireBundle)(),(0,E.requireBundle)()];yield Promise.all(e);var t=[(0,I.requireBundle)(),(0,P.requireBundle)(),(0,S.requireBundle)(),(0,k.requireBundle)(),(0,l.requireBundle)(),(0,c.requireBundle)(),(0,p.requireBundle)(),(0,v.requireBundle)(),(0,M.requireBundle)(),(0,b.requireBundle)(),(0,R.requireBundle)(),(0,d.requireBundle)(),(0,N.requireBundle)(),(0,D.requireBundle)(),(0,m.requireBundle)(),(0,u.requireBundle)(),(0,A.requireBundle)(),(0,h.requireBundle)(),(0,y.requireBundle)(),(0,C.requireBundle)(),(0,n.requireBundle)(),(0,L.requireBundle)(),(0,_.requireBundle)(),(0,x.requireBundle)(),(0,O.requireBundle)(),(0,f.requireBundle)(),(0,w.requireBundle)(),(0,g.requireBundle)(),(0,o.requireBundle)()];yield Promise.all(t)}catch(e){__LOG__(3)(F(),e.stack)}}))).apply(this,arguments)}},13531:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var s=i(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(17957)),d=r(a(28084)),u=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,46178)).then((e=>e.default))),"ProductDetailsFlow");t.requireBundle=u;var c=(0,n.default)({loader:u,loading:e=>s.createElement(d.default,{title:l.default.t(1151),error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=c},35194:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var s=i(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(28084)),d=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,89254)).then((e=>e.default))),"ProfileDrawer");t.requireBundle=d;var u=(0,n.default)({loader:d,loading:e=>s.createElement(l.default,{error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=u},82163:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var s=i(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(94786)),d=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,82297)).then((e=>e.default))),"QuotedStatusV3Flow");t.requireBundle=d;var u=(0,n.default)({loader:d,loading:e=>s.createElement(l.default,{error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=u},95561:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a,r=function(e){return(t,a)=>{__LOG__(3)(u(),t.stack);var r=a>1?"s":"",i="loadable:".concat(e," failed to load after [").concat(a,"] attempt").concat(r);__LOG__(4,void 0,new Error,!0)(d()),SEND_LOGS(i)}}(t),s="INIT",c=0;return function d(){switch(s){case"INIT":case"FAILURE":return s="INFLIGHT",a=e().then((e=>(e||r(new Error("Lazyload response is empty"),c),s="SUCCESS",e))).catch(function(){var e=(0,i.default)((function*(e){if(__LOG__(3)(l(),t),s="FAILURE",++c<=10)return yield(0,n.delayMs)(1e3*c),d();throw r(e,c),e}));return function(){return e.apply(this,arguments)}}());case"INFLIGHT":case"SUCCESS":return(0,o.default)(a,"inflightPromise");default:return Promise.reject(new Error("retriable_promise_hoc:promiseStatus is invalid"))}}};var i=r(a(52954)),s=r(a(19976)),n=a(91460),o=r(a(61941));function l(){var e=(0,s.default)(["Lazyload failure for component ",""]);return l=function(){return e},e}function d(){var e=(0,s.default)(["Failed to load a component"]);return d=function(){return e},e}function u(){var e=(0,s.default)(["Loadable error: ",""]);return u=function(){return e},e}},41745:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var s=i(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(17957)),d=r(a(1034)),u=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,4924)).then((e=>e.default))),"SendGroupInviteFlow");t.requireBundle=u;var c=(0,n.default)({loader:u,loading:e=>s.createElement(d.default,{title:l.default.t(748),error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=c},40773:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var s=i(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(17957)),d=r(a(91755)),u=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,59694)).then((e=>e.default))),"SendLogsPopup");t.requireBundle=u;var c=(0,n.default)({loader:u,loading:e=>s.createElement(d.default,{title:l.default.t(1276),okText:l.default.t(1262),error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=c},20661:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var s=i(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(17957)),d=r(a(1034)),u=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,47207)).then((e=>e.default))),"SendMsgMultiFlow");t.requireBundle=u;var c=(0,n.default)({loader:u,loading:e=>s.createElement(d.default,{title:l.default.t(988),error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=c},11086:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var s=i(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(17957)),d=r(a(1034)),u=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,91047)).then((e=>e.default))),"SendProductFlow");t.requireBundle=u;var c=(0,n.default)({loader:u,loading:e=>s.createElement(d.default,{title:l.default.t(988),error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=c},92062:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var s=i(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(17957)),d=r(a(28084)),u=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,44774)).then((e=>e.default))),"SettingsFlow");t.requireBundle=u;var c=(0,n.default)({loader:u,loading:e=>s.createElement(d.default,{title:l.default.t(1287),error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=c},11405:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var s=i(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(28084)),d=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,46156)).then((e=>e.default))),"StarredDrawer");t.requireBundle=d;var u=(0,n.default)({loader:d,loading:e=>s.createElement(l.default,{error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=u},89551:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var s=i(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(2422)),d=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,34044)).then((e=>e.default))),"StatusV3Flow");t.requireBundle=d;var u=(0,n.default)({loader:d,loading:e=>s.createElement(l.default,{error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=u},88798:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var[t,a]=s.useState(null),r=()=>{n.default.closeModal()},i=e=>{a(e)},g=e.msg.list;if(!g)return null;var E;t&&(E=s.createElement("div",{className:c.default.controlsSummary},t.title,s.createElement("div",{className:c.default.btnActive},s.createElement(p.default,{large:!0,onClick:()=>{t&&((0,m.default)(e.msg,t),r())}},s.createElement(_.default,{directional:!0,name:"send"})))));return s.createElement(f.default,{type:f.TowerModalType},s.createElement(o.default,{theme:"products"},s.createElement(d.default,{title:g.buttonText,type:d.DRAWER_HEADER_TYPE.POPUP,onCancel:r}),s.createElement(l.default,{theme:"padding"},g.sections.map(((e,a)=>s.createElement(u.default,{title:e.title,key:a,theme:"list-section"},e.rows.map(((e,a)=>s.createElement(h.default,{key:a,row:e,onSelect:i.bind(null,e),selected:e===t}))))))),s.createElement(v.default,{transitionName:"slide-up-down-footer",className:c.default.container},E)))};var s=i(a(2784)),n=r(a(79711)),o=r(a(58701)),l=r(a(73023)),d=i(a(71311)),u=r(a(77875)),c=r(a(69991)),h=r(a(21160)),f=i(a(41967)),p=r(a(94461)),m=r(a(63505)),_=r(a(82631)),v=r(a(74824))},21160:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return s.createElement(n.default,{primary:e.row.title,secondary:e.row.description,theme:"list-msg",onClick:e.onSelect,detail:s.createElement(o.default,{checked:e.selected,hover:!1,radio:!0,onChange:e.onSelect,systemUncheckedColor:!0})})};var s=i(a(2784)),n=r(a(96066)),o=r(a(32337))},35590:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.hasPending=function(){if(!S.default.connected)return!1;var e=a(92545).default,t=x.default.some((e=>e.ack===C.default.ACK.CLOCK&&e.local&&e.isSentByMe)),r=m.default.some((e=>!!e.composeContents.text));return t||r||e()},t.default=void 0;var s=i(a(19976)),n=i(a(68015)),o=i(a(72779)),l=a(91460),d=a(39329),u=i(a(19034)),c=r(a(2784)),h=i(a(15566)),f=i(a(25337)),p=i(a(86634)),m=i(a(43334)),_=a(61),v=i(a(23109)),g=i(a(662)),E=i(a(79711)),y=i(a(9386)),S=i(a(52737)),C=i(a(50935)),T=i(a(99850)),M=r(a(63360)),b=a(38527),P=i(a(89952)),A=a(95595),I=i(a(68476)),O=i(a(18120)),N=i(a(21088)),w=i(a(75187)),D=i(a(17957)),R=i(a(20642)),L=i(a(32593)),k=i(a(40210)),x=i(a(58885)),F=i(a(11680)),G=i(a(3303)),U=i(a(67802)),B=i(a(72259)),j=a(6446),V=i(a(72424)),H=i(a(2734)),W=i(a(76533)),K=i(a(18470)),Y=i(a(17026)),q=i(a(2220)),z=i(a(85217)),Q=i(a(54794)),J=i(a(74391)),X=i(a(77626)),Z=i(a(17693)),$=i(a(20398)),ee=i(a(74185)),te=i(a(15549)),ae=i(a(68849)),re=a(80084),ie=i(a(12767)),se=i(a(14949)),ne=i(a(58906)),oe=i(a(99215)),le=i(a(30734));function de(){var e=(0,s.default)(["Low FPS Tracker: ","fps, ","s since page open."]);return de=function(){return e},e}var ue=[[document,"mousemove"],[document,"scroll"],[document,"keydown"],[window,"focus"],[window,"resize"]];function ce(){window.history.pushState({},"",window.location.href)}class he extends c.PureComponent{constructor(e){super(e),this.state={drawerActive:!1,drawerAnimating:!1,isVoipInitialized:S.default.isVoipInitialized},this._idleMonitor=null,this._serverPropsQueryLoop=null,this._rightDrawerOut=!1,this._setRefContainer=e=>{this._refContainer=e},this._refChatlistPanel=c.createRef(),this._refConversation=c.createRef(),this._onBlurTimer=new d.ShiftTimer((()=>{if(document.activeElement===document.body){var{top:e}=$.default.Manager;e&&e.uie.requestFocus()}})),this.onBlur=()=>{this._onBlurTimer.debounce(10)},this._onRightDrawerIn=()=>{this._rightDrawerOut=!1,E.default.onPanesWillChange(3),this.setState({drawerActive:!0,drawerAnimating:!0},(()=>{E.default.onPanesDidChange(3)})),this._animateConversationPanel()},this._onRightDrawerOut=()=>{this._rightDrawerOut=!0;var e={drawerActive:this.state.drawerActive,drawerAnimating:!0};this._animateConversationPanel()?(E.default.onPanesWillChange(2),e.drawerActive=!1,this.setState(e,E.default.onPanesDidChange.bind(E.default,2))):this.setState(e)},this._onRightDrawerAnimationComplete=()=>{var e={drawerActive:this.state.drawerActive,drawerAnimating:!1};this.state.drawerActive&&this._rightDrawerOut&&(e.drawerActive=!1),this.setState(e)},this._updateVoip=()=>{this.setState({isVoipInitialized:S.default.isVoipInitialized})},this._showTOS=()=>{switch(S.default.tos){case 1:case 2:E.default.openModal(c.createElement(J.default,null),{blockClose:!0});break;case 3:ie.default.logout()}},this._showSmbTos=()=>{S.default.smbTos&&E.default.openModal(c.createElement(K.default,null),{blockClose:!0})},this._showUserNotice=()=>{O.default.supportsFeature(O.default.F.USER_NOTICE)&&F.default.noticeId&&!0===F.default.blocking&&E.default.openModal(c.createElement(te.default,{notice:F.default}),{blockClose:!0})},this.showKeyboardShortcuts=e=>{for(var t,{target:a}=e,r=0;r<5;r++){if((t=a)&&t.getAttribute("contentEditable")||t instanceof HTMLInputElement)return;a=a.parentNode}E.default.openModal(c.createElement(se.default,null)),e.preventDefault()},Y.default.uiActive=!0,Y.default.markAvailable();var{platform:t}=S.default;(0,W.default)((0,b.getEmojiTypeFromPlatform)(t)),p.default.setPlatform(t)}componentWillUnmount(){this._onBlurTimer.cancel(),w.default.menuBatchRenderWith((()=>{w.default.trigger("".concat(N.default.Event,":").concat(N.default.Events.LOGGED_OUT))})),ee.default.canMuckHistory()&&window.history.back(),Y.default.uiActive=!1,this._clearIdleMonitor(),this._clearServerPropsQueryLoop(),this._stopTrackingFPS&&this._stopTrackingFPS()}componentDidMount(){var{listeners:e}=this.props;if(w.default.menuBatchRenderWith((()=>{w.default.trigger("".concat(N.default.Event,":").concat(N.default.Events.LOGGED_IN))})),ee.default.canMuckHistory()&&(window.history.pushState({},"",window.location.href),e.add(window,"popstate",ce)),this._beginIdleMonitor(!0),this._beginServerPropsQueryLoop(),e.add(S.default,"change:isVoipInitialized",this._updateVoip),e.add(S.default,"change:tos",this._showTOS),this._showTOS(),S.default.isSMB&&(e.add(S.default,"change:smbTos",this._showSmbTos),this._showSmbTos()),e.add(F.default,"change:blocking change:noticeId",this._showUserNotice),this._showUserNotice(),X.default.isSafari&&!I.default&&(0,A.shouldShowNUX)(C.default.NUX.SAFARI_LIMITED_SUPPORT)&&(setTimeout((()=>{var e=D.default.t(1856,{chrome_homepage:C.default.BROWSER_LINK.CHROME,firefox_homepage:C.default.BROWSER_LINK.FIREFOX,opera_homepage:C.default.BROWSER_LINK.OPERA});E.default.openModal(c.createElement(y.default,{onOK:()=>E.default.closeModal(),okText:D.default.t(1104)},c.createElement("div",{dangerouslySetInnerHTML:{__html:e}})))}),250),(0,A.setNUX)(C.default.NUX.SAFARI_LIMITED_SUPPORT,{views:1,maxViews:1})),this._stopTrackingFPS=P.default.whenLessThan(1,((e,t)=>{new k.default.WebcUiFreeze({webcUiFreezeFps:e,webcUiFreezeT:(0,n.default)(t,0)}).commit(),__LOG__(2)(de(),(0,n.default)(e,2),(0,n.default)(t,3)/1e3)})),ne.default.supported){var t=navigator.serviceWorker;t&&t.controller&&le.default.request(t.controller,oe.default.PRELOAD_LAZY_LOADED_BUNDLES).catch((()=>{}))}if(V.default.wallpapersV2){var a=v.default.get(_.DEFAULT_PREFERENCE);if(a&&C.default.DEFAULT_CHAT_WALLPAPER!==a.wallpaperColor){var r=this.context.theme;if(!(0,re.colorExistsInTheme)(a.wallpaperColor,r)){var i="light"===r?"dark":"light";if((0,re.colorExistsInTheme)(a.wallpaperColor,i)){var s=(0,re.toggleWallpaperColor)(a.wallpaperColor,i);a.set("wallpaperColor",s)}}}}}_beginIdleMonitor(e){var t=e?C.default.IDLE_TIMEOUT:0;this._idleMonitor=Promise.loop((()=>(0,l.delayMs)(t).addCancelControl().then((()=>{var e;Y.default.markUnavailable(3e4);var a=new Promise((t=>{e=t}));return ue.forEach((([t,a])=>{this.props.listeners.add(t,a,e)})),a.addCancelControl().finally((()=>{ue.forEach((([t,a])=>{this.props.listeners.remove(t,a,e)}))})).then((function(){document.hasFocus()&&Y.default.markAvailable(),t=C.default.IDLE_TIMEOUT}))})))).finally((()=>{this._idleMonitor=null})).catchType(Promise.CancellationError,(()=>{})).endWithControls("cancel")}_clearIdleMonitor(){this._idleMonitor&&this._idleMonitor.control.cancel()}_beginServerPropsQueryLoop(){this._serverPropsQueryLoop=f.default.setLocalTimeout((()=>{(0,j.queryServerProps)(),this._beginServerPropsQueryLoop()}),(0,u.default)().add(1,"days").valueOf())}_clearServerPropsQueryLoop(){f.default.clearTimeout(this._serverPropsQueryLoop)}_animateConversationPanel(){var e,t,a,r,i=null===(e=this._refChatlistPanel)||void 0===e||null===(t=e.current)||void 0===t?void 0:t.getClientWidth();if(null==i)return!1;var s=null===(a=this._refContainer)||void 0===a?void 0:a.clientWidth;return null!=s&&(!!(null===(r=this._refConversation)||void 0===r?void 0:r.current)&&this._refConversation.current.animatePanel(s,i))}getVisibleDOMNodes(e){var t=e;return E.default.existsDrawerLeft((e=>{var a,r=null===(a=this._refChatlistPanel)||void 0===a?void 0:a.current;e&&r&&(t=t.filter((e=>!r.containsDOMNode(e))))})),E.default.existsDrawerMid((e=>{var a,r=null===(a=this._refConversation)||void 0===a?void 0:a.current;e&&r&&(t=t.filter((e=>!r.containsDOMNode(e))))})),t}render(){var e=(0,o.default)(L.default.app,{three:this.state.drawerActive,two:!this.state.drawerActive,"app-animating":this.state.drawerAnimating,[L.default.noAnimation]:!this.props.animate}),t=c.createElement(ae.default,null);return c.createElement(Z.default,{uimState:Z.default.State.INACTIVE,displayName:"Main"},c.createElement(Q.default,{className:e,onBlur:this.onBlur,onRef:this._setRefContainer,onShowKeyboardShortcuts:this.showKeyboardShortcuts,getVisibleDOMNodes:this.getVisibleDOMNodes},c.createElement(G.default,null),c.createElement(h.default,null),c.createElement(U.default,null),c.createElement(z.default,null),t,undefined,c.createElement("div",{className:L.default.drawerManager},c.createElement("div",{className:(0,o.default)(L.default.pane,L.default.paneOne)},c.createElement(M.default,{direction:M.Dir.LEFT})),c.createElement("div",{className:(0,o.default)(L.default.pane,L.default.paneTwo)},c.createElement(M.default,{direction:M.Dir.MID})),c.createElement("div",{className:(0,o.default)(L.default.pane,L.default.paneThree)},c.createElement(M.default,{direction:M.Dir.RIGHT,onDrawerIn:this._onRightDrawerIn,onDrawerOut:this._onRightDrawerOut,onDrawerAnimationComplete:this._onRightDrawerAnimationComplete}))),c.createElement("div",{className:(0,o.default)(L.default.pane,L.default.paneOne)},c.createElement(g.default,{ref:this._refChatlistPanel,settings:H.default})),c.createElement("div",{className:(0,o.default)(L.default.pane,L.default.paneTwo)},c.createElement(T.default,{animate:this.props.animate,ref:this._refConversation}))))}}he.contextType=q.default;var fe=(0,R.default)((0,B.default)(he));t.default=fe},62830:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(64)),o=r(a(44343)),l=r(a(17957)),d=r(a(81524)),u=r(a(41967)),c=r(a(60949));class h extends s.Component{constructor(...e){super(...e),this.blockContact=e=>{e.stopPropagation(),e.preventDefault(),this.props.onBlock()},this.onCancel=e=>{e.stopPropagation(),e.preventDefault(),this.props.onCancel()},this.reportSpamBlock=e=>{e.stopPropagation(),e.preventDefault(),this.props.onReportSpamBlock()}}render(){var e=s.createElement(n.default,{a8nText:"popup-controls-block",type:"primary",onClick:this.blockContact,key:0},l.default.t(273)),t=s.createElement(n.default,{a8nText:"popup-controls-report-spam",type:"plain",onClick:this.reportSpamBlock,key:1},l.default.t(1190)),a=s.createElement(n.default,{a8nText:"popup-controls-cancel",type:"plain",onClick:this.onCancel,key:2},l.default.t(1547)),r={enter:this.blockContact,escape:this.onCancel},i=s.createElement(c.default,{contact:this.props.contact}),h=s.createElement(d.default,{id:274,params:{contact:i}});return s.createElement(o.default,{handlers:r},s.createElement(u.default,{children:h,actions:[t,e,a]}))}}t.default=h},59646:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(54073)),n=i(a(12436)),o=a(39329),l=r(a(2784)),d=i(a(94470)),u=i(a(79711)),c=i(a(50935)),h=i(a(7681)),f=i(a(58701)),p=i(a(73023)),m=r(a(71311)),_=a(20485),v=a(19741),g=r(a(96452)),E=a(35598),y=i(a(22004)),S=i(a(38147)),C=i(a(6660)),T=i(a(92803)),M=i(a(18120)),b=i(a(98294)),P=i(a(44343)),A=i(a(83005)),I=i(a(17957)),O=i(a(81610)),N=i(a(20642)),w=i(a(55217)),D=i(a(72259)),R=i(a(73664)),L=i(a(2825)),k=i(a(82631)),x=a(86145);class F extends l.Component{constructor(e){super(e),this.flatListController=new y.default,this.state={searchText:"",searching:!1,resultsUnavailable:!1},this.setSearch=e=>{this.search=e},this.selection=new R.default([],(e=>e.id.toString())),this.pending=!1,this._batchRenderState={},this._handleScroll=e=>{this.shouldFTSSearch(e)&&(this.fts(),this.pending=!0)},this.handleScroll=(0,n.default)(this._handleScroll,100),this._debounceSetState=new o.ShiftTimer((()=>{this.setState(this._batchRenderState),this._batchRenderState={}})),this._batchSetState=(e,t=75)=>{Object.assign(this._batchRenderState,e),this._debounceSetState.debounce(t)},this.fts=(0,s.default)((()=>{this.pending=!1;var e=(this.state.searchText||"").trim();(0,A.default)(e)&&(this._ftsPromise&&this._ftsPromise.cancel(),this._ftsPromise=Promise.resolve().then((()=>{this.isFTSSearching()||this._batchSetState({searching:!0})})).then((()=>this.ftsMsgs.search({chat:this.props.chat,count:this._getSearchCount(),searchTerm:e}))).checkpoint(this.props.rejectOnUnmount()).then((t=>{t&&!t.canceled&&e===this.state.searchText.trim()&&this._batchSetState({searching:!1,resultsUnavailable:!1})})).catchType(g.Unmount,(()=>{})).catch((e=>{this.pending||this._batchSetState({searching:!1,resultsUnavailable:e instanceof v.E404})})))}),c.default.FTS_TYPING_DELAY),this.fullTextSearch=e=>{var t=e.trim();(0,A.default)(t)?(this.fts(),this.pending=!0,this.state.searching||this._batchSetState({searching:!0})):(this.fts.cancel(),this.ftsMsgs.resetSearch(),this.ftsMsgs.delete(),this._ftsPromise&&this._ftsPromise.cancel(),this.pending=!1,this.state.searching&&this._batchSetState({searching:!1,resultsUnavailable:!1}))},this.shouldFTSSearch=e=>!(!this.ftsMsgs.hasMoreMsgs||this.pending||this.state.searching||this.ftsMsgs.searchPromise||(0,x.numCodepoints)(this.state.searchText||"")<c.default.FTS_MIN_CHARS)&&e.scrollTop+c.default.SCROLL_FUDGE>e.scrollHeight-e.clientHeight,this.isFTSSearching=()=>{var e=this._batchRenderState;return"searching"in e?e.searching:this.state.searching},this.onSearch=e=>{e?e!==this.state.searchText&&(this.fullTextSearch(e),this.setState({searchText:e}),this._batchSetState({searchText:e,resultsUnavailable:!1})):this.onStopSearch()},this.onStopSearch=()=>{this.fts.cancel(),this.ftsMsgs.resetSearch(),this.ftsMsgs.delete(),this._ftsPromise&&this._ftsPromise.cancel(),this.pending=!1,this.setState({searchText:"",searching:!1})},this.onFocusList=e=>{e.repeat||this._refMsglist&&(this.search&&!this.search.cursorIsAtEnd()||(e.preventDefault(),e.stopPropagation(),S.default.shouldIndicateFocus(),this._refMsglist&&this._refMsglist.focusFirst()))},this.onOpenFirst=e=>{e.preventDefault();var t=this.ftsMsgs.head();if(t){var a=t.chat,r=a.getSearchContext(t);u.default.focusChatTextInput(a),u.default.openChatAt(a,r)}},this.onFocusSearch=()=>{S.default.shouldIndicateFocus(),C.default.focus(this.search)},this.onClose=()=>{this.props.uim.uie.requestDismiss()},this.indicateFocus=()=>{S.default.maybeIndicateFocus(this.refInputHotkey)},this.onScroll=e=>{this.handleScroll(e.currentTarget)},this.getEmptyChatlistState=e=>{if(e.length)return null;var t=(this.state.searchText||"").trim();return(0,x.numCodepoints)(t)>=c.default.FTS_MIN_CHARS?this.state.searching?l.createElement(_.SearchingMessages,null):this.state.resultsUnavailable?l.createElement(_.SearchMessagesUnavailable,null):l.createElement(_.SearchMessages,null):(0,_.BeforeSearchMessages)(this.props.chat.title(),this.props.chat.isGroup)},this._setRefMsglist=e=>{this._refMsglist=e},this._setInputHotkey=e=>{this.refInputHotkey=e},this.ftsMsgs=new T.default(e.chat)}componentDidMount(){this.onFocusSearch(),this.props.listeners.add(this.ftsMsgs,"bulk_remove",(()=>{this.forceUpdate()}))}componentWillUnmount(){this.handleScroll.cancel(),this.fts.cancel(),this.ftsMsgs.delete(!0),this._ftsPromise&&this._ftsPromise.cancel(),this._debounceSetState.cancel()}_getSearchCount(){return Math.round(window.innerHeight/E.DEFAULT_ITEM_HEIGHT)+1}render(){var e=this.ftsMsgs.toArray(),t=this.getEmptyChatlistState(e);if(null==t){var a=this.state.searchText?this.state.searchText.trim():null;t=l.createElement(w.default,{ref:this._setRefMsglist,flatListController:this.flatListController,isSearching:!!this.state.searchText,searchText:a,ftsResult:e,selection:this.selection,onFocusSearch:this.onFocusSearch})}var r,i={down:this.onFocusList},s=this.state.searching&&e.length?l.createElement("div",{className:d.default.searchSpinner},l.createElement(L.default,{stroke:6,size:24})):null;if(M.default.supportsFeature(M.default.F.MD_BACKEND)){var n=(this.state.searchText||"").trim();(0,x.numCodepoints)(n)>=c.default.FTS_MIN_CHARS&&(r=l.createElement(h.default,{icon:l.createElement(k.default,{name:"content-search"}),theme:"list",secondary:I.default.t(694)},I.default.t(695)))}return l.createElement(f.default,{key:"search-modal"},l.createElement(m.default,{title:I.default.t(1230),type:m.DRAWER_HEADER_TYPE.SMALL,onCancel:this.onClose}),l.createElement(P.default,{handlers:i,onFocus:this.indicateFocus,onRef:this._setInputHotkey,className:d.default.panelSearch},l.createElement(O.default,{ref:this.setSearch,type:"chat-msg-search",onSearch:this.onSearch,onEnter:this.onOpenFirst,placeholder:I.default.t(1225),loading:this.state.searching})),l.createElement(p.default,{flatListControllers:[this.flatListController],className:d.default.panelBody,onScroll:this.onScroll,id:"pane-side"},t,s,r))}}var G=(0,b.default)((0,N.default)((0,D.default)(F)));t.default=G},13574:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(a(59646))},69096:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(73549)),o=a(62436),l=r(a(38147)),d=r(a(6660)),u=r(a(44343)),c=r(a(45420)),h=r(a(20642)),f=r(a(40207)),p=a(64658),m=r(a(74223)),_=a(11419);class v extends s.Component{constructor(e){super(e),this.onActiveChange=(e,t)=>{if("focus"===e){var a=this._refHotKeys;d.default.focus(a),t&&a&&(0,o.scrollIntoViewIfNeeded)(a)}this.setState({active:!!e})},this.onClick=e=>{if((0,_.isFunction)(this.props.onClick)){var t=(0,p.unproxy)(this.props.msg),a=t.chat,r=a.getSearchContext(t);r.msg=t,this.props.onClick(e,a,r)}},this.onEnter=e=>{e.preventDefault(),e.stopPropagation(),l.default.shouldIndicateFocus(),this.onClick(e)},this.indicateFocus=()=>{var e;null===(e=this._refCell)||void 0===e||e.indicateFocus()},this.contextEnabled=()=>!1,this._setRefCell=e=>{this._refCell=e},this._setRefHotKeys=e=>{this._refHotKeys=e};var{msg:t,active:a}=e;this.state={active:!!a&&a.value===t}}componentDidMount(){this.props.active&&this.props.listeners.add(this.props.active,this.props.msg.id.toString(),this.onActiveChange)}render(){var{msg:e,author:t}=this.props,a=s.createElement(m.default,{msg:e}),r=s.createElement(c.default,{msg:e.safe(),msgType:"Search",author:t,searchQuery:this.props.searchText?[this.props.searchText]:[]}),i={enter:this.onEnter};return s.createElement(u.default,{handlers:i,onFocus:this.indicateFocus,onRef:this._setRefHotKeys},s.createElement(n.default,{ref:this._setRefCell,contextEnabled:this.contextEnabled,theme:"chat-search",active:!!this.state.active,primaryDetail:a,secondary:r,primary:void 0,onClick:this.onClick}))}}v.CONCERNS={msg:["id","chat","isSentByMe","senderObj","rtl","dir","type"]};var g=(0,h.default)((0,f.default)(v,v.CONCERNS));t.default=g},51613:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(69096)),o=r(a(40207));class l extends s.Component{render(){var{msg:e}=this.props;return s.createElement(n.default,{msg:e,chat:e.chat,author:this.props.contact.formattedShortName,searchText:this.props.searchText,onClick:this.props.onClick,active:this.props.active,key:e.id.toString()})}}l.CONCERNS={msg:["id","chat"],contact:["formattedShortName"]};var d=(0,o.default)(l,l.CONCERNS);t.default=d},55217:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(43334)),o=r(a(79711)),l=r(a(53388)),d=r(a(50935)),u=r(a(35598)),c=r(a(98294)),h=r(a(44343)),f=r(a(69096)),p=r(a(51613));class m extends s.Component{constructor(){super(...arguments),this._listPointerEvents=!0,this._setRefHotKeys=e=>{this._refHotKeys=e},this.onListPointerEventsOff=()=>{this._listPointerEvents=!1},this.onListPointerEventsOn=()=>{this._listPointerEvents=!0},this.onClick=(e,t,a)=>{e.preventDefault(),e.stopPropagation(),n.default.find(t.id).then((e=>{2===l.default.column&&this.props.uim.uie.requestDismiss(),o.default.focusChatTextInput(e),o.default.openChatAt(e,a)}))},this.getSelection=()=>this.props.ftsResult||[],this.renderItem=e=>{var{msg:t}=e;return t.sender&&t.isGroupMsg&&!t.isNotification&&!t.isSentByMe?s.createElement(p.default,{contact:t.senderObj,msg:t,chat:t.chat,searchText:this.props.searchText,onClick:this.onClick,active:this.props.selection,key:t.id.toString()}):s.createElement(f.default,{msg:t,chat:t.chat,searchText:this.props.searchText,onClick:this.onClick,active:this.props.selection,key:t.id.toString()})},this.restoreFocus=()=>{this.props.selection.reset(!0)},this.onFocusGain=e=>{e.target===this._refHotKeys&&this._listPointerEvents&&(this.props.selection.index<0?this.focusFirst():this.props.selection.reset(!0))},this.focusFirst=()=>{this.props.selection.setFirst(!0)},this.onNextChat=e=>{e&&(e.preventDefault(),e.stopPropagation());var t=this.props.selection.next();this.props.selection.index!==t&&this.props.selection.setNext(!0)},this.onPrevChat=e=>{e&&(e.stopPropagation(),e.preventDefault()),this.props.selection.prev()>-1?this.props.selection.setPrev(!0):this.props.onFocusSearch()},this.props.selection.init(this.getSelection())}getData(){return this.props.ftsResult.map((e=>({itemKey:e.id.toString(),msg:e})))}render(){return s.createElement(h.default,{handlers:{down:e=>this.onNextChat(e),up:e=>this.onPrevChat(e)},onFocus:this.onFocusGain,"data-tab":d.default.TAB_ORDERS.CHAT_SEARCH_MSG_LIST,onRef:this._setRefHotKeys},s.createElement(u.default,{flatListController:this.props.flatListController,direction:"vertical",data:this.getData(),renderItem:this.renderItem,forceConsistentRenderCount:!1}))}}var _=(0,c.default)(m);t.default=class extends _{focusFirst(){this.getComponent().focusFirst()}}},16348:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(21403)),o=r(a(22788)),l=r(a(20642));class d extends s.Component{constructor(...e){super(...e),this.state={selected:this.props.selections.isSelected(this.props.model)||!!this.props.checked},this.onSelectChange=e=>{this.state.selected!==e&&this.setState({selected:e})}}componentDidMount(){this.props.listeners.add(this.props.selections,this.props.model.id.toString(),this.onSelectChange)}render(){var{children:e,disabled:t,tabIndex:a}=this.props;return s.createElement("div",{className:o.default.checkboxSelectableWrapper},s.createElement("div",{className:o.default.checkboxSelectableControl},s.createElement(n.default,{onChange:()=>{},checked:this.state.selected,disabled:t,tabIndex:a})),e)}}var u=(0,l.default)(d);t.default=u},17707:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(32960)),l=a(46774),d=i(a(21403)),u=i(a(72503)),c=i(a(79711)),h=i(a(9386)),f=i(a(91581)),p=i(a(18120)),m=i(a(17957)),_=a(46638),v=a(40263);class g extends n.Component{constructor(...e){super(...e),this.state={keepStarred:!0},this.onCancel=()=>{c.default.closeModal()},this.onClear=()=>{var e=this.props.chat;e.pendingAction++,(0,_.sendClear)(e,this.state.keepStarred).finally((()=>{e.pendingAction--})),c.default.closeModal()},this._onToggleStarred=()=>{this.setState({keepStarred:!this.state.keepStarred})}}getText(){var e=this.props.chat;switch(e.kind){case l.CHAT_KIND.GROUP:return m.default.t(483,{name:e.title()});case l.CHAT_KIND.CHAT:return m.default.t(482,{name:e.title()});case l.CHAT_KIND.BROADCAST:return m.default.t(481);default:return""}}render(){return p.default.supportsFeature(p.default.F.MD_BACKEND)?n.createElement(h.default,{title:n.createElement(v.TextDiv,{theme:"title"}," ",this.getText()," "),onOK:this.onClear,okText:m.default.t(479),onCancel:this.onCancel},n.createElement("div",{className:(0,s.default)(u.default.section,u.default.border)},n.createElement("div",{"data-a8n":o.default.key("menu-icon-clear-chat"),className:u.default.control},n.createElement(d.default,{onChange:this._onToggleStarred,checked:this.state.keepStarred,id:"menu-icon-clear-chat"})),n.createElement("label",{htmlFor:"menu-icon-clear-chat",className:u.default.label},m.default.t(833))),n.createElement("div",{className:u.default.note},n.createElement(v.TextParagraph,{theme:"muted"},m.default.t(1681)))):n.createElement(h.default,{onOK:this.onClear,okText:m.default.t(479),onCancel:this.onCancel},n.createElement("div",null,n.createElement(f.default,{text:this.getText()}),n.createElement("div",{className:u.default.section},n.createElement("div",{"data-a8n":o.default.key("menu-icon-clear-chat"),className:u.default.control},n.createElement(d.default,{onChange:this._onToggleStarred,checked:this.state.keepStarred,id:"menu-icon-clear-chat"})),n.createElement("label",{htmlFor:"menu-icon-clear-chat",className:u.default.label},m.default.t(833)))))}}t.default=g},92229:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(50935)),o=r(a(58701)),l=r(a(73023)),d=i(a(71311)),u=r(a(98294)),c=r(a(17957)),h=r(a(85454));class f extends s.Component{constructor(...e){super(...e),this.onClose=()=>{this.props.onClose?this.props.onClose():this.props.uim.uie.requestDismiss()}}render(){var e,t=this.props.chat.getReceivedVcardMsgs(),a=null!==(e=null==t?void 0:t.map((e=>s.createElement(h.default,{key:e.id.toString(),msg:e,displayType:n.default.DISP_TYPE.CONTACT_CARD,onMessageClick:this.onClose}))))&&void 0!==e?e:[];return s.createElement(o.default,null,s.createElement(d.default,{title:c.default.t(517,{_plural:t?t.length:0}),onBack:this.onClose,type:d.DRAWER_HEADER_TYPE.LARGE}),s.createElement(l.default,null,a))}}var p=(0,u.default)(f);t.default=p},81689:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(79711)),o=r(a(58701)),l=r(a(73023)),d=i(a(71311)),u=r(a(44343)),c=r(a(17957)),h=i(a(41967)),f=r(a(91735)),p=a(84990);t.default=e=>{var{vcard:t}=e;return s.createElement(h.default,{type:h.BoxModalType},s.createElement(o.default,{key:"vcard-modal"},s.createElement(d.default,{title:c.default.t(521),type:d.DRAWER_HEADER_TYPE.POPUP,onCancel:()=>n.default.closeModal()}),s.createElement(l.default,null,s.createElement(u.default,null,s.createElement(f.default,{parsedVcard:t,thumbnail:(0,p.vcardThumbnail)(t)})))))}},77977:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(58527)),n=r(a(2784)),o=i(a(65219)),l=i(a(7470)),d=a(20485),u=a(35598),c=i(a(17957)),h=i(a(12002)),f=i(a(20642)),p=i(a(46821)),m=i(a(73073)),_=i(a(73664)),v=i(a(67134)),g=a(11419),E="HEADER",y="ROW";class S extends n.Component{constructor(...e){super(...e),this.selection=new _.default([],(e=>e.id)),this.state={searchFilter:void 0},this.onSelect=(e,t)=>{if(t.type===y){var a=t.contact;!0===this.props.filter(a)&&this.props.onSelect&&this.props.onSelect(a)}},this.onSearch=this.props.debounce((e=>{this.setState({searchFilter:e})}),100),this.renderItem=e=>{var t,{filter:a,onSelect:r,onContext:i,contextEnabled:l,contextMenu:d,openContextOnClick:c,showNotifyName:h,participantCollection:f,listenForAdminChange:p}=this.props;switch(e.type){case E:return n.createElement(m.default,{header:null!==(t=e.header)&&void 0!==t?t:""});case y:var _=(0,g.isString)(a(e.contact)),v=_?"group-modal":null,S=_?a(e.contact):null,C=i&&d?{contextEnabled:l,contextMenu:d(e.contact.id),onContext:i}:{};return n.createElement(o.default,(0,s.default)({contact:e.contact,active:this.selection,theme:v,secondary:S,onClick:c&&i?i:_?void 0:r?()=>{r(e.contact)}:()=>{},waitIdle:!0,showNotifyName:h,listenForAdminChange:p,participantCollection:f},C));default:throw new u.UnknownDataError(e)}}}componentDidMount(){this.props.contacts||this.props.listeners.add(l.default,"add remove change:name",(()=>{this.forceUpdate()}))}getData(){var{filter:e}=this.props,t=c.default.accentFold(this.state.searchFilter),a=(0,p.default)(t),r=(this.props.contacts||l.default).filter((r=>e(r)&&(!t||t&&r.searchMatch(t,a))));this.selection.init(r.filter((t=>!0===e(t))));var i,s,n=[];if(!r.length)return n;for(var o=r.length>10,d=0;d<r.length;d++)i=r[d],o&&i.header!==s&&n.push({type:E,header:i.header,itemKey:"".concat(i.header||"","_").concat(d)}),n.push({type:y,contact:i,itemKey:"".concat(i.id.toString(),"_").concat(d)}),s=i.header;return n}render(){var{title:e,onCancel:t}=this.props;return n.createElement(h.default,{title:e,data:this.getData(),renderItem:this.renderItem,emptyState:n.createElement(d.SearchContacts,null),selection:this.selection,onSearch:this.onSearch,searchPlaceholder:c.default.t(1226),onSelect:this.onSelect,onCancel:t})}}S.defaultProps={filter:e=>l.default.isFilteredContact(e)};var C=(0,f.default)((0,v.default)(S));t.default=C},43225:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(19976)),n=r(a(2784)),o=i(a(79711)),l=i(a(9386)),d=a(70750),u=i(a(91581)),c=a(71142),h=i(a(18120)),f=i(a(17957)),p=i(a(40207)),m=a(40263),_=a(11419);function v(){var e=(0,s.default)(["deleteChatPopup:onDelete Unsupported chat type"]);return v=function(){return e},e}class g extends n.PureComponent{constructor(...e){super(...e),this.isDelete=()=>{var e=this.props.chat;return e.isGroup&&e.isReadOnly||e.isUser||e.isBroadcast},this.getText=()=>{var e=this.props.chat,t=e.title();return e.isGroup?e.isReadOnly?f.default.t(1587,{groupName:t}):f.default.t(1593,{groupName:t}):e.isUser?f.default.t(541,{name:t}):e.isBroadcast?f.default.t(544):void 0},this._getButton=()=>{var e=this.props.chat;return e.isGroup?e.isReadOnly?f.default.t(1585):f.default.t(1591):e.isUser||e.isBroadcast?f.default.t(1585):void 0},this.onCancel=()=>{o.default.closeModal();var{onCancel:e}=this.props;e&&(0,_.isFunction)(e)&&e()},this.onDelete=()=>{var e,t=this.props.chat;t.isGroup?e=t.isReadOnly?(0,d.sendDelete)(t):(0,c.sendExitGroup)(t):t.isUser||t.isBroadcast?e=(0,d.sendDelete)(t):__LOG__(3)(v()),(0,_.isFunction)(this.props.onDeleteOrExit)&&e&&this.props.onDeleteOrExit(e),o.default.closeModal()}}render(){return h.default.supportsFeature(h.default.F.MD_BACKEND)&&this.isDelete()?n.createElement(l.default,{title:n.createElement(m.TextDiv,{theme:"title"}," ",this.getText()," "),onOK:this.onDelete,okText:this._getButton(),onCancel:this.onCancel},n.createElement(m.TextDiv,{theme:"muted"},f.default.t(1682))):n.createElement(l.default,{onOK:this.onDelete,okText:this._getButton(),onCancel:this.onCancel},n.createElement(u.default,{text:this.getText()}))}}g.CONCERNS={chat:["isReadOnly","isGroup","isUser","isBroadcast"]};var E=(0,p.default)(g,g.CONCERNS);t.default=E},55236:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(64)),o=r(a(50935)),l=r(a(20673)),d=r(a(15894)),u=a(35387),c=a(95585),h=r(a(29505)),f=a(95595),p=r(a(44343)),m=r(a(17957)),_=r(a(41967)),v=r(a(17693));class g extends h.default{constructor(){super(),this.onDelete=()=>{this.end()},this.onRevoke=()=>{this._showRevokeNux?(this.push(this._renderRevokeNux(),"none"),(0,f.setNUX)(o.default.NUX.REVOKE_LEGAL_DISCLAIMER_NUX,{views:1,maxViews:1})):this.end()},this.onPopupCancel=()=>{this.end()},this.onCancel=()=>{this.end()},this._openRevokeLearnMore=()=>{(0,u.openExternalLink)((0,c.getRevokeFaqUrl)())},this._onRevokeNuxClicked=()=>{this.end()},this._renderRevokeNux=()=>{var e=[s.createElement(n.default,{type:"plain",onClick:this._openRevokeLearnMore,key:1},m.default.t(848)),s.createElement(n.default,{type:"primary",onClick:this._onRevokeNuxClicked,key:0},m.default.t(1709))];return s.createElement(v.default,{displayName:"MsgRevokeNuxModal",escapable:!1},s.createElement(p.default,{handlers:{enter:this._onRevokeNuxClicked}},s.createElement(_.default,{actions:e},s.createElement("div",{className:l.default.label},m.default.t(1222)))))},this._showRevokeNux=(0,f.shouldShowNUX)(o.default.NUX.REVOKE_LEGAL_DISCLAIMER_NUX)}componentDidMount(){var{chat:e,msgList:t,deletePrompt:a,revokePrompt:r,toastPosition:i,onCancel:n,isMsgVisible:o}=this.props;this.push(s.createElement(d.default,{chat:e,msgList:t,deletePrompt:a,revokePrompt:r,toastPosition:i,onDelete:this.onDelete,onRevoke:this.onRevoke,onPopupCancel:this.onPopupCancel,onCancel:n,isMsgVisible:o}))}}t.default=g},15894:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(32960)),o=r(a(64)),l=r(a(21403)),d=r(a(79711)),u=r(a(50935)),c=r(a(20673)),h=r(a(44343)),f=r(a(17957)),p=r(a(41967));class m extends s.Component{constructor(...e){super(...e),this.state={clearMedia:!0},this.onCancel=()=>{var{onPopupCancel:e}=this.props;e()},this.onRevoke=()=>{var{chat:e,msgList:t,toastPosition:a,onCancel:r,onRevoke:i}=this.props;d.default.sendRevokeMsgs(e,t,this.state.clearMedia,null,a),i(),r&&r()},this.onDelete=()=>{var{chat:e,msgList:t,toastPosition:a,onCancel:r,onDelete:i,isMsgVisible:s}=this.props;d.default.sendDeleteMsgs(e,t,this.state.clearMedia,null,a),i(),r&&r(),d.default.existsDrawerRight((e=>{e&&s&&t.forEach((e=>{s(e.id,!0)&&d.default.closeDrawerRight()}))}))},this._onToggleClearMedia=()=>{this.setState({clearMedia:!this.state.clearMedia})}}render(){var e,{msgList:t,deletePrompt:a,revokePrompt:r}=this.props;t.some((e=>e.asMms&&e.type!==u.default.MSG_TYPE.STICKER))&&(e=s.createElement("div",{className:c.default.container,onClick:this._onToggleClearMedia,key:0},s.createElement("div",{"data-a8n":n.default.key("menu-icon-revoke-message"),className:c.default.control},s.createElement(l.default,{onChange:this._onToggleClearMedia,checked:this.state.clearMedia})),s.createElement("div",{className:c.default.label},f.default.t(484))));var i=s.createElement(o.default,{type:"plain",onClick:this.onCancel,key:0},f.default.t(1547)),d=null,m=null,_=null,v=()=>{},g=t.length,E=f.default.t(546,{_plural:g});r&&(d=s.createElement(o.default,{a8nText:"popup-controls-revoke",type:"plain",onClick:this.onRevoke,key:1},f.default.t(1219)),v=this.onRevoke),a&&(m=s.createElement(o.default,{a8nText:"popup-controls-delete",type:r?"plain":"primary",onClick:this.onDelete,key:2},f.default.t(539)),v=this.onDelete);var y={enter:v,escape:this.onCancel};return m&&(_=d?s.createElement("div",{className:c.default.buttons},s.createElement("div",{className:c.default.button},m),s.createElement("div",{className:c.default.button},i),s.createElement("div",{className:c.default.button},d)):[i,m]),s.createElement(h.default,{handlers:y},s.createElement(p.default,{title:E,actions:_,children:[e]}))}}t.default=m},58701:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(96955)),l=i(a(62262)),d=i(a(79430));class u extends n.PureComponent{constructor(...e){super(...e),this.setDragAndDropRef=e=>{this.dragAndDropRef=e},this.onDragOver=e=>{this.dragAndDropRef&&this.dragAndDropRef.onDragOver(e)},this.onDragStart=e=>{this.dragAndDropRef&&this.dragAndDropRef.onDragStart(e)},this.onDragEnd=e=>{this.dragAndDropRef&&this.dragAndDropRef.onDragEnd(e)}}render(){var{children:e,onDrop:t,onDragChange:a,theme:r}=this.props,i=(0,s.default)(d.default.drawer,{[d.default.white]:"invite"===r||"products"===r||"labels"===r||"settings"===r||"archived"===r,[d.default.drawerCapture]:"capture-contain"===r||"capture-cover"===r,[d.default.drawerEdit]:"edit"===r,[d.default.drawerMedia]:"media"===r,[d.default.drawerGallery]:"gallery"===r,[d.default.drawerCatalog]:"catalog"===r,[d.default.striped]:"striped"===r,[d.default.belowHeader]:"capture-contain"===r||"media"===r,"drawer-verification":"verification"===r});return n.createElement(o.default,{className:i,onDragOver:this.onDragOver,onDragStart:this.onDragStart,onDragEnd:this.onDragEnd},t&&n.createElement(l.default,{ref:this.setDragAndDropRef,disableFromWithin:!0,onDragChange:a,onDrop:t}),e)}}t.default=u},73023:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(58527)),n=i(a(22220)),o=i(a(72779)),l=r(a(2784)),d=i(a(12351)),u=i(a(63097)),c=l.forwardRef((function(e,t){var{overflow:a,flatListControllers:r,children:i,theme:c}=e,h=(0,n.default)(e,["overflow","flatListControllers","children","theme"]),f=(0,o.default)(d.default.container,{[d.default.noscroll]:"hidden"===a,[d.default.centerItem]:"center-content"===c,[d.default.padding]:"padding"===c,[d.default.centerColumn]:"center-column"===c});return r&&r.length>0?l.createElement(u.default,(0,s.default)({flatListControllers:r,className:f},h),i):l.createElement("div",(0,s.default)({className:f,ref:t},h),i)}));t.default=c},71311:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DRAWER_HEADER_TYPE=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(32960)),l=i(a(5315)),d=a(80898),u=i(a(82631)),c=i(a(74824)),h={SMALL:"small",LARGE:"large",POPUP:"popup",OFFSET:"offset",MULTI_MEDIA_GALLERY:"multiMediaGallery",LABELS:"labels"};t.DRAWER_HEADER_TYPE=h;var f=e=>{var{title:t,onBack:a,onCancel:r,type:i,children:f,menu:p}=e,m=a?n.createElement("button",{className:l.default.btnCloseDrawer,"data-a8n":o.default.key("btn-closer-drawer"),onClick:a},n.createElement(u.default,{name:"back",directional:!0})):null,_=r?n.createElement("button",{className:l.default.btnCloseDrawer,"data-a8n":o.default.key("btn-closer-drawer"),onClick:r},n.createElement(u.default,{name:"x"})):null,v=null!=p?n.createElement("span",{className:l.default.paneListControls},n.createElement(d.MenuBar,{key:"drawer-header",theme:i!==h.SMALL?"inverse":null},n.createElement(c.default,{transitionName:"btn"},p))):null,g=(0,s.default)({[l.default.multiMediaGallery]:i===h.MULTI_MEDIA_GALLERY,[l.default.labels]:i===h.LABELS,[l.default.drawerHeader]:i===h.LARGE||i===h.MULTI_MEDIA_GALLERY||i===h.LABELS,[l.default.drawerHeaderSmall]:i===h.SMALL,[l.default.drawerHeaderOffset]:i===h.OFFSET||i===h.POPUP,[l.default.drawerHeaderPopup]:i===h.POPUP}),E=t&&null!=f?n.createElement("div",{className:l.default.side},f):null;return n.createElement("header",{className:g},n.createElement("div",{className:l.default.drawerTitle,"data-animate-drawer-title":!0},n.createElement("div",{className:l.default.drawerTitleAction},m,_),n.createElement("div",{"data-a8n":o.default.key("drawer-title-body"),className:l.default.drawerTitleBody},t||f),E,v))};t.default=f},15466:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(39886)),l=a(66615),d=({title:e,icon:t,onClick:a,children:r})=>{var i=(0,s.default)(o.default.itemBody,{[o.default.row]:t}),d=(0,s.default)({[o.default.main]:t}),u=(0,s.default)({[o.default.side]:t});return n.createElement("div",{className:o.default.item,onClick:a,role:a?"button":""},n.createElement("div",{className:i},n.createElement("div",{className:d,dir:"auto"},n.createElement(l.SelectableDiv,{className:o.default.primary,selectable:!0},e),n.createElement("div",{className:o.default.secondary},r)),n.createElement("div",{className:u},t)))};t.default=d},63360:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Dir=t.Transition=void 0;var s=i(a(23779)),n=i(a(18149)),o=i(a(74930)),l=r(a(2784)),d=i(a(79711)),u=i(a(59753)),c=i(a(6660)),h=i(a(20642)),f=i(a(64225)),p=a(11419),m=i(a(17693)),_=i(a(5179)),v=i(a(74824)),g={LEFT:"drawer-left",MID:"slide-up",NONE:"none",RIGHT:"slide-left"};t.Transition=g;t.Dir={LEFT:"left",MID:"mid",RIGHT:"right"};var E=e=>g[e.toUpperCase()];class y extends l.PureComponent{constructor(...e){super(...e),this.state={drawer:void 0,drawerId:null,transition:E(this.props.direction),uim:void 0,option:void 0},this._blockTransition=null,this._flowDismissPending=!1,this.setRefUIE=e=>{this.refUIE=e},this.openFlow=(e,t=E(this.props.direction),a,r)=>{var i=(0,o.default)("DrawerManager".concat(this.props.direction));if(!this._flowDismissPending&&this.state.drawer){if(null!=e.key&&(0,n.default)(this.state.drawer.key,e.key))return;this._blockTransition=g.NONE,this.setState({drawer:e,drawerId:i,transition:t,uim:a,option:r},(()=>{this._blockTransition=t}))}else this.props.onDrawerIn&&this.props.onDrawerIn(),this.setState({drawer:e,drawerId:i,transition:t,uim:a,option:r})},this._existsFlow=e=>{e(!0!==this._flowDismissPending&&!!this.state.drawer)},this.closeFlow=e=>{e&&this.state.drawerId!==e||this.state.drawer&&(this.props.onDrawerOut&&this.props.onDrawerOut(),this._flowDismissPending=!0,this.setState({drawer:void 0},(()=>{this._flowDismissPending=!1})))},this.requestFocus=()=>{if(this.refUIE){var e=this.refUIE.getNode();e&&!e.contains(document.activeElement)&&c.default.focus(e)}},this._onAnimationComplete=e=>{var t=this.props.onDrawerAnimationComplete;t&&t();var{option:a,drawer:r}=this.state;a&&r&&e===this.state.drawerId&&(0,p.isFunction)(a.onEnterAnimationComplete)&&a.onEnterAnimationComplete()}}componentDidMount(){this.props.listeners.add(d.default,"open_drawer_".concat(this.props.direction),this.openFlow),this.props.listeners.add(d.default,"exists_drawer_".concat(this.props.direction),this._existsFlow),this.props.listeners.add(d.default,"close_drawer_".concat(this.props.direction),this.closeFlow)}componentDidUpdate(e){this.props.direction!==e.direction&&(e.listeners.remove(d.default,"open_drawer_".concat(e.direction),this.openFlow),e.listeners.remove(d.default,"exists_drawer_".concat(e.direction),this._existsFlow),e.listeners.remove(d.default,"close_drawer_".concat(e.direction),this.closeFlow),this.props.listeners.add(d.default,"open_drawer_".concat(this.props.direction),this.openFlow),this.props.listeners.add(d.default,"exists_drawer_".concat(this.props.direction),this._existsFlow),this.props.listeners.add(d.default,"close_drawer_".concat(this.props.direction),this.closeFlow))}render(){var{direction:e}=this.props,{drawer:t,drawerId:a,transition:r,option:i}=this.state,n=this._blockTransition||r,o=i&&i.noFocus?null:this.requestFocus;return t&&(t=l.createElement(m.default,{displayName:"Drawer".concat((0,s.default)(e)),escapable:!0,key:a,ref:this.setRefUIE,requestFocus:o,requestDismiss:this.closeFlow.bind(null,a)},l.createElement(f.default,{style:{height:"100%"}},t))),l.createElement(_.default.Consumer,null,(e=>l.createElement(_.default.Provider,{value:this.state.uim||e},l.createElement(v.default,{className:u.default.container,transitionName:n,onAnimationComplete:this._onAnimationComplete.bind(this,a)},t))))}}var S=(0,h.default)(y);t.default=S},77875:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(32960)),l=i(a(33322)),d=i(a(51908)),u=a(40263);class c extends n.PureComponent{render(){var e,{children:t,title:a,subtitle:r,titleOnClick:i,a8nText:c,"data-list-scroll-offset":h,theme:f,animation:p}=this.props,m=f?l.default[f]:null,_=(0,s.default)(l.default.container,{[l.default.animate]:p},m);return null!=a&&(e=n.createElement("div",{className:l.default.title,"data-a8n":o.default.key(c),role:i?"button":null,onClick:i},n.createElement(d.default,{side:r,ellipsify:!0},n.createElement(u.TextSpan,{theme:"list-section"===this.props.theme?"section-title-larger":"section-title"},a)))),n.createElement("div",{className:_,"data-list-scroll-offset":h},e,t)}}t.default=c,c.defaultProps={animation:!0}},39292:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(19976)),n=i(a(47677)),o=r(a(2784)),l=i(a(79711)),d=i(a(9386)),u=i(a(7470)),c=i(a(35387)),h=a(95585),f=i(a(82785)),p=i(a(4357)),m=a(95595),_=i(a(18120)),v=a(75459),g=i(a(17957)),E=a(64658),y=a(38727),S=i(a(43711)),C=i(a(68384)),T=i(a(3111));function M(){var e=(0,s.default)(["formatE2ENotification: receive identity notification of self"]);return M=function(){return e},e}class b extends o.Component{constructor(...e){super(...e),this.onVerificationClick=()=>{var{jid:e,chatId:t}=this.props;if(e){var a=e.equals((0,m.getMeUser)())?t:e;l.default.closeModal(),l.default.verificationDrawer(a)}}}componentDidMount(){_.default.supportsFeature(_.default.F.MD_BACKEND)}render(){var e,t,a,r,i=null,s=null,m=g.default.t(848);a=()=>l.default.closeModal(),r=g.default.t(1709);var{e2eSubtype:_,chatId:b,chat:P,msg:A}=this.props;switch(_){case"info_encrypted":C.default.isGroup(b)?(null==P?void 0:P.isSupportGroup())?(e=g.default.t(1332),m=g.default.t(1333),t=(0,h.getSupportChatFaqUrl)()):e=S.default.isGroupVoiceCallEnabled()||S.default.isGroupVideoCallEnabled()?g.default.t(1625):g.default.t(1624):C.default.isBroadcast(b)&&(e=g.default.t(1538)),t=(0,h.getE2EFaqUrl)();break;case"identity":var{jid:I}=this.props,O=I&&u.default.get(I);if(O&&O.isMe)if(__LOG__(4,void 0,new Error,!0)(M()),SEND_LOGS("SelfIdentityNotificationError"),C.default.isGroup(b))e=g.default.t(1774);else if(C.default.isBroadcast(b))e=g.default.t(1772);else{var N=u.default.get(b),w=N?N.formattedName:(0,T.default)(b);e=g.default.t(1773,{name:w})}else{var D=O?O.formattedName:(0,T.default)(this.props.jid);e=g.default.t(1771,{name:D})}i=a,s=g.default.t(1547),t=(0,h.getCodeChangeFaqUrl)();break;case"device":var{msg:R}=this.props;(0,n.default)(null!=R,"msg shouldn't be null"),R=(0,E.unproxy)(R),e=(0,f.default)(R,!0),i=a,s=g.default.t(1547),t=(0,h.getCodeChangeFaqUrl)();break;case"encrypt":case"encrypt_now":default:if(t=(0,y.securityUrl)(),C.default.isGroup(b))(null==A?void 0:A.chat.isSupportGroup())?(e=g.default.t(1332),m=g.default.t(1333),t=(0,h.getSupportChatFaqUrl)()):e=S.default.isGroupVoiceCallEnabled()||S.default.isGroupVideoCallEnabled()?g.default.t(1555):g.default.t(1554);else if(C.default.isBroadcast(b))e=g.default.t(1554);else if(C.default.isOfficialBizAccount(b))e=g.default.t(1707),t=(0,h.getE2EEnterpriseFaqUrl)();else{var L=u.default.get(b);if(!(0,v.bspUiEnabled)()&&L&&L.isEnterprise){var k=(0,p.default)(L);e=g.default.t(1670,{businessName:k}),t=(0,h.getE2EEnterpriseFaqUrl)()}else e=S.default.isVoiceCallEnabled()||S.default.isVideoCallEnabled()?g.default.t(1555):g.default.t(1554)}}var x=o.createElement(c.default,{href:t},m);return o.createElement(d.default,{onOK:a,okText:r,onCancel:i,cancelText:s},e," ",x)}}t.default=b},44537:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(19976)),n=a(71684),o=r(a(2784)),l=i(a(64)),d=i(a(79711)),u=i(a(50935)),c=i(a(58701)),h=i(a(73023)),f=r(a(71311)),p=i(a(77875)),m=a(74253),_=i(a(81850)),v=i(a(56241)),g=i(a(35387)),E=a(95585),y=a(95595),S=i(a(18120)),C=i(a(98294)),T=i(a(17957)),M=i(a(40210)),b=i(a(99911)),P=a(63590),A=a(40263),I=r(a(75074));function O(){var e=(0,s.default)(["EphemeralDrawer:unable to set ephemeral setting for ",""]);return O=function(){return e},e}class N extends o.Component{constructor(e){super(e),this._saveSetting=()=>{var{chat:e}=this.props,{duration:t}=this.state;t!==this._getInitialDuration(e)&&(b.default.online?(e.isGroup?(0,P.setGroupProperty)(e,u.default.GROUP_SETTING_TYPE.EPHEMERAL,t).catch((()=>()=>{__LOG__(2)(O(),e.id.toString())})):(0,m.changeEphemeralDuration)(e,t),new M.default.EphemeralSettingChange({chatEphemeralityDuration:t}).commit()):this._showOfflineToast())},this._shouldShowSelections=()=>!(0,y.shouldShowNUX)(u.default.NUX.EPHEMERAL)||this.props.fromInfoFlow,this._showOfflineToast=()=>{d.default.openToast(o.createElement(I.default,{msg:T.default.t(648),id:(0,I.genId)()}))},this._handleBack=()=>{this._shouldShowSelections()&&this._saveSetting(),this.props.onClose?this.props.onClose():this.props.uim.uie.requestDismiss()},this._handleChange=e=>{var t=parseInt(e.target.value,10);this.setState({duration:t})},this.state={duration:this._getInitialDuration(e.chat)}}_getInitialDuration(e){return e.getEphemeralSetting()||0}componentWillUnmount(){(0,y.shouldShowNUX)(u.default.NUX.EPHEMERAL)&&(0,y.setNUX)(u.default.NUX.EPHEMERAL,{views:1,maxViews:1})}render(){var e,t=this._shouldShowSelections()?null:o.createElement("div",{className:_.default.nuxAction},o.createElement(l.default,{type:"primary",onClick:this._handleBack},T.default.t(1709)));e=S.default.supportsFeature(S.default.F.EPHEMERAL_24_H_DURATION)?this.props.fromInfoFlow?T.default.t(641):T.default.t(643):this.props.fromInfoFlow?T.default.t(640):T.default.t(642);var a,r=(0,y.shouldShowNUX)(u.default.NUX.EPHEMERAL)?o.createElement(p.default,{animation:!1},o.createElement(v.default,{type:"disappearing"}),o.createElement("div",{className:_.default.nuxHeader},o.createElement(A.TextSpan,{theme:"large"},this.props.fromInfoFlow?T.default.t(646):T.default.t(647))),o.createElement("div",{className:_.default.nuxContent},o.createElement("div",{className:_.default.nuxText},o.createElement(A.TextSpan,{theme:"muted"},e)),o.createElement("div",{className:_.default.nuxText},o.createElement(A.TextSpan,{theme:"muted"},T.default.t(644))),o.createElement("div",{className:_.default.nuxText},o.createElement(A.TextSpan,{theme:"muted"},T.default.t(645)," ",o.createElement(g.default,{href:(0,E.getEphemeralFaqUrl)()},T.default.t(848)))),t)):null,i=this._shouldShowSelections()?o.createElement(o.Fragment,null,o.createElement(p.default,{animation:!1},(a=[],S.default.supportsFeature(S.default.F.EPHEMERAL_24_H_DURATION)?(a.push({value:24*n.HOUR_SECONDS,label:T.default.t(652,{number:24,_plural:24})}),a.push({value:7*n.DAY_SECONDS,label:T.default.t(651,{number:7,_plural:7})})):a.push({value:7*n.DAY_SECONDS,label:T.default.t(650)}),a.push({value:0,label:T.default.t(649)}),a).map((({value:e,label:t})=>o.createElement("div",{className:_.default.option,key:"option-".concat(e)},o.createElement("label",{className:_.default.label},o.createElement("input",{type:"radio",className:_.default.input,value:String(e),checked:e===this.state.duration,onChange:this._handleChange}),t))))),o.createElement("div",{className:_.default.footer},o.createElement(A.TextParagraph,{className:_.default.footerText,theme:"plain"},S.default.supportsFeature(S.default.F.EPHEMERAL_24_H_DURATION)?T.default.t(628):T.default.t(627)," ",o.createElement(g.default,{href:(0,E.getEphemeralFaqUrl)()},T.default.t(848))),S.default.supportsFeature(S.default.F.EPHEMERAL_ALLOW_GROUP_MEMBERS)?o.createElement(A.TextParagraph,{className:_.default.footerText,theme:"muted"},this.props.chat.isGroup?T.default.t(634):T.default.t(633)):null)):null;return o.createElement(c.default,{theme:"gallery"},o.createElement(f.default,{title:T.default.t(755),onBack:this._handleBack,type:f.DRAWER_HEADER_TYPE.LARGE}),o.createElement(h.default,null,r,i))}}var w=(0,C.default)(N);t.default=w},56241:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return n.createElement("div",{className:o.default.nuxIllustration},n.createElement("div",{className:(0,s.default)(o.default.nuxIcon,o.default.chatIcon,o.default.chatIcon1)},n.createElement(l.default,{name:"chat-alt"})),n.createElement("div",{className:(0,s.default)(o.default.nuxIcon,o.default.chatIcon,o.default.chatIcon2)},n.createElement(l.default,{name:"chat-alt"})),n.createElement("div",{className:(0,s.default)(o.default.nuxIcon,o.default.chatIcon,o.default.chatIcon3)},n.createElement(l.default,{name:"chat-alt"})),n.createElement("div",{className:(0,s.default)(o.default.nuxIcon,o.default.chatIcon,o.default.chatIcon4)},n.createElement(l.default,{name:"chat-alt"})),n.createElement("div",{className:(0,s.default)(o.default.nuxIcon,o.default.chatIcon,o.default.chatIcon5)},n.createElement(l.default,{name:"chat-alt"})),n.createElement("div",{className:(0,s.default)(o.default.nuxIcon,o.default.chatIcon,o.default.chatIcon6)},n.createElement(l.default,{name:"chat-alt"})),n.createElement("div",{className:(0,s.default)(o.default.nuxIcon,o.default.bannerIcon)},n.createElement(l.default,{name:e.type})))};var s=i(a(72779)),n=r(a(2784)),o=i(a(84297)),l=i(a(82631))},24910:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(43334)),o=r(a(79711)),l=r(a(9386)),d=r(a(50935)),u=r(a(7470)),c=r(a(46478)),h=r(a(91581)),f=a(20485),p=a(19741),m=i(a(96452)),_=a(55600),v=r(a(57414)),g=r(a(27536)),E=r(a(17957)),y=a(41967),S=r(a(72259)),C=a(70574),T=0,M=1,b=2;class P extends s.Component{constructor(...e){super(...e),this.state={state:T,status:void 0,groupMetadata:void 0,subject:void 0},this.onViewGroup=e=>{var t;e?t=e:this.state.groupMetadata&&(t=this.state.groupMetadata.id),t&&o.default.openChatFromUnread(n.default.assertGet(t)),o.default.closeModal()},this.onJoinGroup=()=>{(0,_.joinGroupViaInvite)(this.props.groupCode).then((e=>{o.default.openChatFromUnread(e).then((t=>{t&&o.default.focusChatTextInput(e)})),o.default.closeModal()})).checkpoint(this.props.rejectOnUnmount()).catchType(m.Unmount,(()=>{})).catchType(p.ServerStatusCodeError,(e=>{this.setState({state:b,status:e.status})}))},this.onCancel=()=>{o.default.closeModal()}}componentDidMount(){(0,C.queryGroupInviteInfo)(this.props.groupCode).checkpoint(this.props.rejectOnUnmount()).then((e=>{var{status:t,subject:a,groupMetadata:r,inGroup:i}=e;i?this.onViewGroup(r.id):this.setState({status:t,groupMetadata:r,subject:a,state:M})})).catchType(p.ServerStatusCodeError,(e=>{this.setState({status:e.status,state:b})})).catchType(m.Unmount,(()=>{}))}render(){var e,t,{groupCode:a}=this.props,{state:r,status:i,groupMetadata:o,subject:p}=this.state,m={cancelText:E.default.t(733),onCancel:this.onCancel,onOK:void 0,okText:void 0};if(r===T)e=s.createElement(f.LoadingWithText,{text:E.default.t(734)});else if(r===M&&o){var _,S=o.participants,C=o.size||S.length,b=S.filter((e=>!!u.default.assertGet(e.id).name)),P=o.desc?s.createElement("div",{className:v.default.metadataDesc},o.desc):null;_=b.length?s.createElement("div",{className:v.default.participantList},s.createElement("div",{className:v.default.participantsTitle},E.default.t(740,{count:C,_plural:C})," ","•"," ",E.default.t(735,{count:b.length,_plural:b.length})),s.createElement("div",{className:v.default.participantsContainer},b.map((e=>s.createElement("div",{key:e.id.toString(),className:v.default.participantWrapper},s.createElement(c.default,{id:e.id}),s.createElement(h.default,{className:v.default.participantText,text:e.contact.formattedName})))))):s.createElement("div",{className:v.default.emptyContentContainer},s.createElement("span",{className:v.default.participantsText},E.default.t(740,{count:C,_plural:C})),s.createElement("span",{className:v.default.contactsText}," ","•"," ",E.default.t(735,{count:b.length,_plural:b.length})));var A="".concat(d.default.GROUP_INVITE_URL).concat(a);e=s.createElement("div",null,s.createElement("div",{className:v.default.metadataContainer},s.createElement(g.default,{fallbackSVG:"default-group",size:82,imgProps:{src:A}}),s.createElement("div",{className:v.default.metadataText},s.createElement(h.default,{className:v.default.metadataTitle,text:p}),P)),_);var I=n.default.get(o.id),O=!!I&&!I.isReadOnly;m.onOK=O?this.onViewGroup:this.onJoinGroup,m.okText=O?E.default.t(750):E.default.t(737),t=y.FlexModalType}else{var N;switch(i){case 401:N=E.default.t(728);break;case 404:N=E.default.t(729);break;case 410:N=E.default.t(730);break;case 419:N=E.default.t(731);break;default:N=E.default.t(732)}m.cancelText=E.default.t(1709),e=s.createElement("div",null,N)}return s.createElement(l.default,{cancelText:m.cancelText,onCancel:m.onCancel,onOK:m.onOK,okText:m.okText,type:t},e)}}var A=(0,S.default)(P);t.default=A},56823:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(19034)),n=r(a(2784)),o=i(a(43334)),l=i(a(79711)),d=i(a(9386)),u=i(a(50935)),c=i(a(7470)),h=i(a(46478)),f=i(a(91581)),p=a(20485),m=a(19741),_=r(a(96452)),v=a(95595),g=i(a(30440)),E=i(a(99922)),y=i(a(23226)),S=i(a(27536)),C=i(a(17957)),T=a(41967),M=i(a(81031)),b=i(a(72259)),P=i(a(40207)),A=i(a(82631)),I=r(a(75074)),O=i(a(76022)),N=a(75637),w=0,D=1,R=2;class L extends n.Component{constructor(...e){super(...e),this.state={state:w,status:void 0,groupMetadata:void 0,subject:void 0},this.onViewGroup=e=>{var t;e?t=e:this.state.groupMetadata&&(t=this.state.groupMetadata.id),t&&l.default.openChatFromUnread(o.default.assertGet(t)),l.default.closeModal()},this.revokeGrpV4Invite=()=>{var{msg:e}=this.props,{inviteGrp:t}=this.props.msg,a=o.default.assertGet((0,N.createWid)(t)).groupMetadata;l.default.openModal(n.createElement(d.default,{onOK:()=>{l.default.closeModal(),a.revokeGroupV4AddInvite([e.to.toString()]).then((()=>{l.default.openToast(n.createElement(I.default,{msg:C.default.t(1667),id:(0,I.genId)()}))}))},okText:C.default.t(1768),onCancel:()=>l.default.closeModal(),cancelText:C.default.t(1547)},n.createElement(f.default,{text:C.default.t(776,{participant:e.chat.contact.formattedName})})))},this.onJoinGroup=()=>{var{inviteCode:e,inviteCodeExp:t,inviteGrp:a,from:r}=this.props.msg;O.default.acceptGroupV4Invite(a,r.toString(),e,String(t),(0,v.getMaybeMeUser)().toString()).then((e=>200===e.status?o.default.find((0,N.createWid)(a)):Promise.reject(e.status))).then((e=>{l.default.openChatFromUnread(e).then((t=>{t&&l.default.focusChatTextInput(e)})),l.default.closeModal()})).checkpoint(this.props.rejectOnUnmount()).catchType(_.Unmount,(()=>{})).catch((e=>{this.setState({state:R,status:e})}))},this.onCancel=()=>{l.default.closeModal()}}componentDidMount(){var{inviteCode:e,inviteCodeExp:t,inviteGrp:a,isSentByMe:r}=this.props.msg;if(r){var i=o.default.assertGet((0,N.createWid)(a));i.groupMetadata&&E.default.find(i.id).catchTypes(m.WebdDrop,_.ProtoVersionUndefined,(()=>{})).finally((()=>{this.setState({status:200,groupMetadata:i.groupMetadata,subject:i.formattedTitle||i.name,state:D})}))}else O.default.groupV4InviteRequestMetadataFind((0,v.getMaybeMeUser)().toString(),this.props.msg.from.toString(),e,String(t),a).then((e=>{if(null!=e.status&&e.status>=400)this.setState({status:e.status,state:R});else if(e.id){var t=new g.default({id:e.id,owner:e.owner,creation:e.creation,desc:e.desc,descId:e.descId,descOwner:e.descOwner,descTime:e.descTime,restrict:e.restrict,announce:e.announce,participants:e.participants});this.setState({status:200,groupMetadata:t,subject:e.subject,state:D})}else this.setState({status:e.status,state:R})})).catchType(_.Unmount,(()=>{}))}render(){var e,t,{msg:a}=this.props,{inviteGrp:r,inviteCodeExp:i,inviteCode:l,isGroupsV4InviteExpired:m,from:_,isSentByMe:g}=a,{state:E,status:b,groupMetadata:P,subject:I}=this.state,O={cancelText:C.default.t(733),onCancel:this.onCancel,onOK:void 0,okText:void 0};if(E===w)e=n.createElement(p.Loading,null);else if(E===D&&P){var R,L=P.participants,x=P.size||L.length,F=L.filter((e=>!!c.default.assertGet(e.id).name)),G=P.desc?n.createElement("div",{className:y.default.metadataDesc},n.createElement(f.default,{text:P.desc})):null;R=F.length?n.createElement("div",{className:y.default.participantList},n.createElement("div",{className:y.default.participantsTitle},C.default.t(740,{count:x,_plural:x})," ","•"," ",C.default.t(735,{count:F.length,_plural:F.length})),n.createElement("div",{className:y.default.participantsContainer},F.map((e=>n.createElement("div",{key:e.id.toString(),className:y.default.participantWrapper},n.createElement(h.default,{id:e.id}),n.createElement(f.default,{className:y.default.participantText,text:e.contact.formattedName})))))):n.createElement("div",{className:y.default.emptyContentContainer},n.createElement("span",{className:y.default.participantsText},C.default.t(740,{count:x,_plural:x})),n.createElement("span",{className:y.default.contactsText}," ","•"," ",C.default.t(735,{count:F.length,_plural:F.length})));var U="w=".concat(encodeURIComponent((0,v.getMaybeMeUser)().toString()),"&g=").concat(encodeURIComponent(r),"&c=").concat(encodeURIComponent(l),"&e=").concat(encodeURIComponent(String(i)),"&a=").concat(encodeURIComponent(_.toString())),B="".concat(u.default.GROUP_V4_INVITE_ICON_URL,"?").concat(U);e=n.createElement("div",null,n.createElement("div",{className:y.default.metadataContainer},g?n.createElement(M.default,{size:82,wid:(0,N.createWid)(r)}):n.createElement(S.default,{fallbackSVG:"default-group",size:82,imgProps:{src:B}}),n.createElement("div",{className:y.default.metadataText},n.createElement(f.default,{className:y.default.metadataTitle,text:I}),G)),R);var j=o.default.get(P.id),V=!!j&&!j.isReadOnly;a.isSentByMe?(O.onOK=this.revokeGrpV4Invite,O.okText=C.default.t(1220)):V?(O.onOK=this.onViewGroup,O.okText=C.default.t(750)):m||(O.onOK=this.onJoinGroup,O.okText=C.default.t(737)),t=T.FlexModalType}else{var H;switch(b){case 401:H=C.default.t(728);break;case 404:H=C.default.t(729);break;case 410:H=C.default.t(730);break;case 419:H=C.default.t(731);break;default:H=C.default.t(732)}O.cancelText=C.default.t(1709),e=n.createElement("div",null,H)}var W,K,Y,q=E===D?n.createElement("div",{className:y.default.inviteExpiration},n.createElement(A.default,{name:"panel-recent",display:"inline",className:y.default.inviteExpirationIcon}),n.createElement("span",null,(W=parseInt(i,10),K=(0,s.default)(1e3*W).diff((0,s.default)()),Y=Math.floor(K/k),K<=0?C.default.t(832):Y<12?C.default.t(830,{time:(0,s.default)().local().format("LT")}):Y<24?C.default.t(831,{number:1,_plural:1}):Y<48?C.default.t(831,{number:2,_plural:2}):C.default.t(831,{number:3,_plural:3})))):null;return n.createElement(d.default,{cancelText:O.cancelText,onCancel:O.onCancel,onOK:O.onOK,okText:O.okText,type:t},e,q)}}L.CONCERNS={msg:["id","to","inviteCode","inviteCodeExp","inviteGrp","isGroupsV4InviteExpired","from","chat","isSentByMe"]};var k=36e5;var x=(0,P.default)((0,b.default)(L),L.CONCERNS);t.default=x},45356:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Messaging=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(64)),l=i(a(79711)),d=i(a(9386)),u=i(a(50935)),c=i(a(19914)),h=i(a(17957)),f=i(a(81524)),p=i(a(41967)),m=i(a(82631)),_=i(a(77626));t.Messaging={NOTIFICATIONS:"NOTIFICATIONS",CAMERA_FAIL:"CAMERA_FAIL",CAMERA_MISSING:"CAMERA_MISSING",MIC_FAIL:"MIC_FAIL",MIC_MISSING:"MIC_MISSING",CAMERA:"CAMERA",MIC:"MIC"};var v={GUIDE_ALLOW:"guide-allow",GUIDE_UNBLOCK:"guide-unblock",GUIDE_NONE:"guide-none"},g="chrome_media_error",E="firefox_lock",y="opera_media";class S extends n.Component{render(){var{type:e,onCancel:t,onConfirm:a,messaging:r}=this.props,i=n.createElement(T,{messaging:r});if(e===v.GUIDE_ALLOW){var l;switch(_.default.browser){case u.default.BROWSER_TYPE.CHROME:case u.default.BROWSER_TYPE.FIREFOX:l=c.default.topLeft;break;case u.default.BROWSER_TYPE.EDGE:l=c.default.bottomCenter;break;default:l=c.default.topCenter}return n.createElement(p.default,{type:"guide"},n.createElement("div",{className:(0,s.default)(c.default.containerAllow,l)},n.createElement("div",{className:c.default.icon},n.createElement(m.default,{name:"back",directional:!0})),n.createElement("div",{className:c.default.title},n.createElement(C,{messaging:r})),n.createElement("div",{className:c.default.description},i),n.createElement("div",{className:c.default.controls},n.createElement(o.default,{onClick:a,type:"primary"},h.default.t(1104)))))}return n.createElement(d.default,{title:n.createElement(C,{messaging:r}),onOK:a,okText:h.default.t(1104),onCancel:t,cancelText:t?h.default.t(848):void 0},n.createElement("div",{className:c.default.description},i))}}function C(e){var{messaging:t}=e;switch(t){case"NOTIFICATIONS":return n.createElement(f.default,{id:801});case"CAMERA_FAIL":return n.createElement(f.default,{id:786});case"CAMERA_MISSING":return n.createElement(f.default,{id:785});case"MIC_MISSING":return n.createElement(f.default,{id:795});case"CAMERA":return n.createElement(f.default,{id:786});case"MIC_FAIL":case"MIC":return n.createElement(f.default,{id:797});default:throw new Error("Invalid messaging: ".concat(t))}}function T(e){var{messaging:t}=e,{browser:a}=_.default,r={[g]:n.createElement("span",{className:"chrome-media-icon"}),[E]:n.createElement("span",{className:"firefox-lock-icon"}),[y]:n.createElement("span",{className:"opera-media-icon"})};switch(t){case"NOTIFICATIONS":return"edge"===a?n.createElement(f.default,{id:799,params:r}):"firefox"===a?n.createElement(f.default,{id:800,params:r}):n.createElement(f.default,{id:798,params:r});case"CAMERA_FAIL":return"edge"===a?n.createElement(f.default,{id:780,params:r}):"firefox"===a?n.createElement(f.default,{id:781,params:r}):"safari"===a?n.createElement(f.default,{id:783,params:r}):"opera"===a?n.createElement(f.default,{id:782,params:r}):n.createElement(f.default,{id:779,params:r});case"CAMERA_MISSING":return n.createElement(f.default,{id:784,params:r});case"MIC_FAIL":return"edge"===a?n.createElement(f.default,{id:790,params:r}):"firefox"===a?n.createElement(f.default,{id:791,params:r}):"safari"===a?n.createElement(f.default,{id:793,params:r}):"opera"===a?n.createElement(f.default,{id:792,params:r}):n.createElement(f.default,{id:789,params:r});case"MIC_MISSING":return n.createElement(f.default,{id:794,params:r});case"CAMERA":return"edge"===a?n.createElement(f.default,{id:778,params:r}):n.createElement(f.default,{id:777,params:r});case"MIC":return"edge"===a?n.createElement(f.default,{id:788,params:r}):n.createElement(f.default,{id:787,params:r});default:throw new Error("Invalid messaging type: ".concat(t))}}t.default=S,S.TYPE=v,S.defaultProps={type:v.GUIDE_NONE,onConfirm:()=>l.default.closeModal()}},84941:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(58527)),n=r(a(2784)),o=i(a(32960)),l=a(16211),d=i(a(50935)),u=i(a(18120)),c=i(a(5177)),h=i(a(17957)),f=i(a(2220)),p=i(a(91378)),m=i(a(77626)),_=a(82631).default;class v extends n.PureComponent{constructor(...e){super(...e),this.imgRef=n.createRef(),this._txtRef=n.createRef(),this._refContainer=n.createRef()}componentDidMount(){var e=this.imgRef.current,t=this._txtRef.current;this.props.animate?((0,p.default)(e,{scale:[1,0],opacity:[1,0]},{delay:1340,duration:180,easing:[.05,1.02,0,1.01]}),(0,p.default)(t,{translateY:[0,80],opacity:[1,0]},{delay:1300,duration:140,easing:[.05,1.02,0,1.01]})):(e&&(e.style.opacity="1"),t&&(t.style.opacity="1"))}animatePanel(e,t){var a,r,i=null===(a=this._refContainer)||void 0===a||null===(r=a.current)||void 0===r?void 0:r.clientWidth;return null!=i&&e!==t&&(0,l.animateConversationPanel)(this._refContainer.current,i/(e-t))}containsDOMNode(e){var t;return!!(null===(t=this._refContainer)||void 0===t?void 0:t.current)&&this._refContainer.current.contains(e)}render(){var e,t,a={["data-asset-intro-image-".concat(this.context.theme)]:!0};return u.default.supportsFeature(u.default.F.MD_BACKEND)||(e=n.createElement("div",(0,s.default)({ref:this.imgRef,className:c.default.image},a)),t=n.createElement(n.Fragment,null,n.createElement("h1",{"data-a8n":o.default.key("intro-title"),className:c.default.title},h.default.t(829)),n.createElement("div",{"data-a8n":o.default.key("intro-text"),className:c.default.text},h.default.t(823)))),n.createElement("div",{className:c.default.intro,ref:this._refContainer},n.createElement("div",{className:c.default.body},e,n.createElement("div",{ref:this._txtRef,className:c.default.textContainer},t,n.createElement(g,null))))}}v.contextType=f.default;var g=()=>{var e,t='<a href="https://www.whatsapp.com/download" target="_blank">'.concat(h.default.t(826),"</a>");switch(m.default.os){case d.default.OS_TYPE.MAC:e=h.default.t(827,{get_it_here:t});break;case d.default.OS_TYPE.WINDOWS:e=h.default.t(828,{get_it_here:t})}return e?n.createElement(E,null,n.createElement("span",{className:c.default.secondaryIcon},n.createElement(_,{name:"laptop"})),n.createElement("div",{dangerouslySetInnerHTML:{__html:e},className:c.default.secondaryTextBody})):null},E=({children:e})=>n.createElement("div",{className:c.default.secondary},n.createElement("div",{className:c.default.divider}),n.createElement("div",{className:c.default.secondaryText},e)),y=v;t.default=y},14949:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(15774)),o=r(a(79711)),l=r(a(9386)),d=r(a(50935)),u=r(a(38023)),c=r(a(17957)),h=a(41967),f=a(25250),p=a(40263),m=r(a(77626)),_=[[c.default.t(1015),(0,f.getShortcutKey)(n.default.TOGGLE_UNREAD)],[c.default.t(1066),(0,f.getShortcutKey)(n.default.TOGGLE_MUTE)],[c.default.t(1006),(0,f.getShortcutKey)(n.default.TOGGLE_ARCHIVE)],[c.default.t(1010),(0,f.getShortcutKey)(n.default.DELETE_OR_EXIT_CHAT)],[c.default.t(1069),(0,f.getShortcutKey)(n.default.TOGGLE_PIN)],[c.default.t(1037),(0,f.getShortcutKey)(n.default.SEARCH)],[c.default.t(1048),(0,f.getShortcutKey)(n.default.SEARCH_IN_CHAT)],[c.default.t(1067),(0,f.getShortcutKey)(n.default.OPEN_NEW_CHAT)],[c.default.t(1068),(0,f.getShortcutKey)(n.default.OPEN_NEW_GROUP)],[c.default.t(1070),(0,f.getShortcutKey)(n.default.OPEN_PROFILE)],[c.default.t(934),(0,f.getShortcutKey)(n.default.OPEN_SETTINGS)]],v="Shift+";class g extends s.Component{constructor(...e){super(...e),this.onClose=()=>{o.default.closeModal()},this._getModifiersToDisplay=()=>{var e=[m.default.os===d.default.OS_TYPE.MAC?"Cmd":"Ctrl"];return e.push(m.default.os===d.default.OS_TYPE.MAC?"Ctrl":"Alt"),e.map((e=>s.createElement("span",{key:e,className:u.default.key},e)))}}render(){var e=_.map((([e,t])=>{if(t){var a,r=1===t.length?"".concat(t.toLowerCase()!==t?v:"").concat(t.toUpperCase()):t;a=-1===r.indexOf(v)?s.createElement("span",{className:u.default.key},r):s.createElement(s.Fragment,null,s.createElement("span",{className:u.default.key},"Shift"),s.createElement("span",{className:u.default.key},r.substr(v.length)));var i=this._getModifiersToDisplay();return s.createElement("div",{key:"shortcut-".concat(r),className:u.default.section},s.createElement("div",{className:u.default.action,title:e},e),s.createElement("div",{className:u.default.shortcut},i,a))}}));return s.createElement(l.default,{onOK:this.onClose,okText:c.default.t(1709),type:h.FlexModalType},s.createElement("div",{className:u.default.container},s.createElement(p.TextSpan,{theme:"popup-title"},c.default.t(834)),s.createElement("div",{className:u.default.list},e)))}}t.default=g},12002:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(58701)),o=r(a(73023)),l=i(a(71311)),d=r(a(35598)),u=r(a(22004)),c=r(a(38147)),h=r(a(6660)),f=r(a(44343)),p=r(a(17957)),m=r(a(81610)),_=i(a(41967));class v extends s.Component{constructor(...e){super(...e),this.flatListController=new u.default,this._refList=s.createRef(),this._refSearch=s.createRef(),this.onNext=e=>{e.preventDefault(),e.stopPropagation();var t=this.props.selection;t&&t.setNext(!0)},this.onPrev=e=>{var t=this.props.selection;t&&(e.preventDefault(),e.stopPropagation(),t.prev()>-1?t.setPrev(!0):(t.unset(),c.default.shouldIndicateFocus(),h.default.focus(this._refSearch.current)))},this.onFocusList=e=>{this._refList.current&&(e.preventDefault(),e.stopPropagation(),c.default.shouldIndicateFocus(),this.props.selection.setFirst(!0))},this.onSelectFirst=e=>{e.preventDefault(),e.stopPropagation();var t=this.props.data[0];t&&this.props.onSelect(e,t)},this.onSearch=e=>{this.props.onSearch(e)},this._isFocusInContainer=e=>{var t=e.relatedTarget;return t instanceof HTMLElement&&e.currentTarget instanceof HTMLElement&&!e.currentTarget.contains(t)},this._onFocus=e=>{this._isFocusInContainer(e)&&this.props.selection.setFirst(!0)},this._onBlur=e=>{this._isFocusInContainer(e)&&this.props.selection.unset()}}componentDidMount(){h.default.focus(this._refSearch.current)}render(){var e,{title:t,onCancel:a,onSearch:r,onRef:i,searchPlaceholder:u,renderItem:c,data:h,emptyState:v}=this.props,g={down:this.onFocusList},E={down:this.onNext,up:this.onPrev};r&&(e=s.createElement(f.default,{handlers:g},s.createElement(m.default,{ref:this._refSearch,onSearch:this.onSearch,onEnter:this.onSelectFirst,placeholder:u||p.default.t(1225)})));var y=h.length?s.createElement(f.default,{handlers:E,onFocus:this._onFocus,onBlur:this._onBlur,tabIndex:0},s.createElement(d.default,{data:h,ref:this._refList,flatListController:this.flatListController,direction:"vertical",renderItem:c})):v;return s.createElement(_.default,{type:_.TowerModalType,onRef:i},s.createElement(n.default,{key:"contact-modal"},s.createElement(l.default,{title:t,type:l.DRAWER_HEADER_TYPE.POPUP,onCancel:a}),e,s.createElement(o.default,{flatListControllers:[this.flatListController]},y)))}}t.default=v},10979:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(79711)),o=r(a(9386)),l=r(a(91581)),d=r(a(17957)),u=r(a(40207));class c extends s.PureComponent{constructor(...e){super(...e),this._onStop=()=>{var{liveLocation:e}=this.props.chat;e&&e.stopMyLiveLocation(),n.default.closeModal()},this.onCancel=()=>{n.default.closeModal()}}render(){var{name:e,isGroup:t}=this.props.chat,a=t?d.default.t(131,{name:e}):d.default.t(132,{name:e});return s.createElement(o.default,{onOK:this._onStop,okText:d.default.t(879),onCancel:this.onCancel},s.createElement(l.default,{text:a}))}}c.CONCERNS={chat:["name","isGroup","liveLocation"]};var h=(0,u.default)(c,c.CONCERNS);t.default=h},69421:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.logSessionEvent=function(e,t,a){var r=new i.default.ContactUsSession({contactUsExitState:e,contactUsT:Math.ceil(performance.now()-t)});a&&(r.contactUsAutomaticEmail=!0,r.contactUsProblemDescription=a.subject,r.contactUsScreenshotC=a.numScreenshots);r.commit()};var i=r(a(40210))},69345:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(19976)),n=r(a(2784)),o=i(a(79711)),l=i(a(9386)),d=i(a(50935)),u=i(a(17957)),c=i(a(40207));function h(){var e=(0,s.default)(["type: ",""]);return h=function(){return e},e}class f extends n.PureComponent{render(){var e,t,{msg:a}=this.props,{type:r}=a;switch(r){case d.default.MSG_TYPE.VIDEO:this.props.msg.isGif?(e=u.default.t(978),t=u.default.t(977)):(e=u.default.t(985),t=u.default.t(984));break;case d.default.MSG_TYPE.AUDIO:e=u.default.t(972),t=u.default.t(971);break;case d.default.MSG_TYPE.IMAGE:e=u.default.t(981),t=u.default.t(980);break;case d.default.MSG_TYPE.DOCUMENT:if(a.isVcardOverMmsDocument){e=u.default.t(974),t=u.default.t(973);break}e=u.default.t(976),t=u.default.t(975);break;case d.default.MSG_TYPE.STICKER:e=u.default.t(983),t=u.default.t(982);break;default:e=u.default.t(979),__LOG__(4,void 0,new Error,!0)(h(),r),SEND_LOGS("MediaMissingModal: unexpected message type")}return n.createElement(l.default,{title:e,onOK:()=>{o.default.closeModal()},okText:u.default.t(1709)},t)}}f.CONCERNS={msg:["type","isGif","isVcardOverMmsDocument"]};var p=(0,c.default)(f,f.CONCERNS);t.default=p},32125:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(79711)),o=r(a(9386)),l=r(a(50935)),d=r(a(17957)),u=r(a(40207));class c extends s.PureComponent{render(){var e;switch(this.props.msg.type){case l.default.MSG_TYPE.VIDEO:this.props.msg.isGif||(e=d.default.t(1077))}return s.createElement(o.default,{onOK:()=>{n.default.closeModal()},okText:d.default.t(1709)},e)}}c.CONCERNS={msg:["type","isGif"]};var h=(0,u.default)(c,c.CONCERNS);t.default=h},10853:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(79711)),o=r(a(9386)),l=r(a(43396)),d=r(a(17957));class u extends s.Component{constructor(...e){super(...e),this.onDownload=()=>{n.default.closeModal(),l.default.initDownload(this.props.msg)}}render(){return s.createElement(o.default,{onCancel:()=>n.default.closeModal(),onOK:this.onDownload,okText:d.default.t(1543),cancelText:d.default.t(1547),title:d.default.t(575)},d.default.t(574))}}t.default=u},34854:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(67762)),o=a(70013),l=r(a(40207));class d extends s.PureComponent{constructor(...e){super(...e),this.stopPropagation=e=>{e.stopPropagation()}}render(){var{altText:e,mediaData:t}=this.props,a=t.preview&&t.preview.url(),r=(0,o.aspectRatioScaled)(t.aspectRatio,500);return s.createElement("div",{className:n.default.mediaViewerBlurCrop,style:r,onClick:this.stopPropagation},s.createElement("img",{className:n.default.mediaViewerBlurImg,src:a,alt:e}))}}d.CONCERNS={mediaData:["preview","aspectRatio"]};var u=(0,l.default)(d,d.CONCERNS);t.default=u},61195:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(43596)),l=i(a(34854)),d=i(a(50935)),u=i(a(53632)),c=i(a(79850)),h=a(96645),f=i(a(19125)),p=i(a(40210)),m=i(a(88352)),_=i(a(40207)),v=i(a(17693));class g extends n.PureComponent{constructor(...e){super(...e),this.state={zoomIn:null},this._refObjectFit=n.createRef(),this.getOutsideContainer=()=>{var e;return null===(e=this._refObjectFit.current)||void 0===e?void 0:e.outsideContainer},this.getInsideContainer=()=>{var e;return null===(e=this._refObjectFit.current)||void 0===e?void 0:e.insideContainer},this.onImageClick=e=>{e.stopPropagation(),this._onZoomIn(e.pageX,e.pageY)},this.onImageKeyboardZoom=e=>{e.stopPropagation(),this._onZoomIn(window.innerWidth/2,window.innerHeight/2)},this._onZoomIn=(e,t)=>{if(this.state.zoomIn)this._cancelZoomIn();else{var a=this.getInsideContainer(),r=this.getOutsideContainer();if(a instanceof HTMLElement&&r instanceof HTMLElement){this.heightOverflow=a.clientHeight*d.default.MEDIA_VIEWER.ZOOM_IN_FACTOR-r.clientHeight,this.widthOverflow=a.clientWidth*d.default.MEDIA_VIEWER.ZOOM_IN_FACTOR-r.clientWidth;var{translateX:i,translateY:s}=this.getTranslatePosition(r,e,t);this.props.onImgZoomIn(!0),this.setState({zoomIn:{factor:d.default.MEDIA_VIEWER.ZOOM_IN_FACTOR,translateX:i,translateY:s}})}}},this._cancelZoomIn=()=>{this.props.onImgZoomIn(!1),this.setState({zoomIn:null})},this.getTranslatePosition=(e,t,a)=>{var r=window.innerWidth/2-t,i=window.innerHeight/2-a;return{translateX:this.widthOverflow>0?Math.round(1.2*r*this.widthOverflow/e.clientWidth):0,translateY:this.heightOverflow>0?Math.round(1.2*i*this.heightOverflow/e.clientHeight):0}},this._renderBlurredImage=()=>n.createElement(l.default,{altText:"",mediaData:this.props.mediaData}),this._renderImage=e=>{var{zoomIn:t}=this.state,{preventDownload:a}=this.props;return n.createElement(u.default,{className:(0,s.default)(c.default.mediaViewerImg,{[c.default.cursorZoomIn]:!t,[c.default.isDownloadPrevented]:a}),draggable:!a,onClick:this.onImageClick,disableContextMenu:a,src:e})},this._renderDownloadPreventedImage=e=>{var{zoomIn:t}=this.state;return n.createElement("figure",{className:(0,s.default)(c.default.mediaViewerImg,{[c.default.cursorZoomIn]:!t}),draggable:"false",onClick:this.onImageClick,onContextMenu:e=>e.preventDefault()},this._renderImage(e))}}componentDidMount(){var e;null===(e=this.props.msg)||void 0===e||e.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:p.default.WEBC_RMR_REASON_CODE.MEDIA_VIEWER,isUserInitiated:!0})}componentWillUnmount(){this.props.msg&&this.props.msg.mediaObject&&this.props.msg.cancelDownload()}render(){var{mediaData:e,msg:t,preventDownload:a}=this.props;switch(e.mediaStage){case h.MEDIA_DATA_STAGE.DECRYPTING:if(null==e.progressiveStage)return this._renderBlurredImage();break;case h.MEDIA_DATA_STAGE.RESOLVED:case h.MEDIA_DATA_STAGE.PROGRESSIVE_READY:break;default:return this._renderBlurredImage()}var r={width:e.fullWidth,height:e.fullHeight},i=a?this._renderDownloadPreventedImage:this._renderImage,s=n.createElement("div",{className:c.default.mediaViewerImg},null!=t?n.createElement(n.Fragment,null,n.createElement(f.default,{mediaData:e,placeholderRenderer:this._renderBlurredImage,downloadMedia:()=>t.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:p.default.WEBC_RMR_REASON_CODE.MEDIA_VIEWER,isUserInitiated:!0}),renderProgressively:!0},i),t.interactiveAnnotations&&t.interactiveAnnotations.length>0&&n.createElement(o.default,{annotations:t.interactiveAnnotations,onTooltipDisplay:this.props.onAnnotationTooltipDisplay,onTooltipDismiss:this.props.onAnnotationTooltipDismiss})):i(e.renderableUrl));return this.state.zoomIn&&(s=n.createElement(v.default,{displayName:"ZoomInImage",escapable:!0,requestDismiss:this._cancelZoomIn},s)),n.createElement(m.default,{type:"zoomIn",size:r,position:"relative",objectPosition:"relative",zoomIn:this.state.zoomIn,onObjectLoad:this.props.onLoad,ref:this._refObjectFit},s)}}g.CONCERNS={mediaData:["mediaStage","fullWidth","fullHeight","renderableUrl","progressiveStage"]};var E=(0,_.default)(g,g.CONCERNS);t.default=class extends E{get heightOverflow(){return this.getComponent().heightOverflow}get widthOverflow(){return this.getComponent().widthOverflow}onImageClick(e){return this.getComponent().onImageClick(e)}onImageKeyboardZoom(e){return this.getComponent().onImageKeyboardZoom(e)}getTranslatePosition(e,t,a){return this.getComponent().getTranslatePosition(e,t,a)}getOutsideContainer(){return this.getComponent().getOutsideContainer()}getInsideContainer(){return this.getComponent().getInsideContainer()}}},13934:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(79711)),o=i(a(68084)),l=a(96645),d=r(a(10853)),u=r(a(40210)),c=r(a(40207)),h=a(64658);class f extends s.PureComponent{constructor(...e){super(...e),this._onUnsupportedDownloadClick=e=>{e.stopPropagation(),n.default.openModal(s.createElement(d.default,{msg:(0,h.unproxy)(this.props.msg)}))},this.downloadMedia=e=>{e.stopPropagation(),this.props.msg.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:u.default.WEBC_RMR_REASON_CODE.MEDIA_VIEWER,isUserInitiated:!0})},this._cancelDownload=e=>{e.stopPropagation(),this.props.msg.cancelDownload()},this.stopPropagation=e=>{e.stopPropagation()}}render(){var{mediaData:e}=this.props;if(e.streamable&&e.isStreamable())return null;switch(e.mediaStage){case l.MEDIA_DATA_STAGE.RESOLVED:case l.MEDIA_DATA_STAGE.ERROR_MISSING:return null;case l.MEDIA_DATA_STAGE.NEED_POKE:return s.createElement(o.Download,{filesize:e.size,onClick:this.downloadMedia});case l.MEDIA_DATA_STAGE.FETCHING:return s.createElement("div",{onClick:this._cancelDownload},s.createElement(o.PendingCancel,null));case l.MEDIA_DATA_STAGE.ERROR_UNSUPPORTED:return s.createElement(o.Download,{filesize:e.size,onClick:this._onUnsupportedDownloadClick});default:return s.createElement("div",{onClick:this.stopPropagation},s.createElement(o.Pending,null))}}}f.CONCERNS={mediaData:["mediaStage","size","streamable"]};var p=(0,c.default)(f,f.CONCERNS);t.default=p},91729:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(79711)),l=i(a(9386)),d=i(a(50935)),u=i(a(56117)),c=a(95595),h=i(a(17957)),f=i(a(20642)),p=a(53527),m=i(a(90237)),_=i(a(40210)),v=a(40263),g=i(a(2220)),E={light:{low:a(57765),high:a(53139)},dark:{low:a(58207),high:a(29098)}};class y extends n.PureComponent{constructor(e){super(e),this.onOK=()=>{(0,p.openMessengerRoomUrl)(this.props.chat),o.default.closeModal()},this.onCancel=()=>{var e=_.default.DESTINATION.CANCELLED,t=this.props.chat?_.default.ROOMS_ENTRY_POINT.ATTACHMENT:_.default.ROOMS_ENTRY_POINT.WEB_MENU;new _.default.RoomsCreationFlow({entryResult:e,roomsEntryPoint:t}).commit(),o.default.closeModal()},(0,c.getNUX)(d.default.NUX.MESSENGER_ROOM_DIALOG_NEW)||(0,c.setNUX)(d.default.NUX.MESSENGER_ROOM_DIALOG_NEW,{views:0,maxViews:1}),(0,c.getNUX)(d.default.NUX.MESSENGER_ROOM_DIALOG_RETURNING)||(0,c.setNUX)(d.default.NUX.MESSENGER_ROOM_DIALOG_RETURNING,{views:0,maxViews:5}),e.chat||(0,c.getNUX)(d.default.NUX.MESSENGER_ROOM_DIALOG_FROM_CHATLIST)||(0,c.setNUX)(d.default.NUX.MESSENGER_ROOM_DIALOG_FROM_CHATLIST,{views:0,maxViews:1}),e.chat&&!(0,c.getNUX)(d.default.NUX.MESSENGER_ROOM_DIALOG_FROM_ATTACH_DROPDOWN)&&(0,c.setNUX)(d.default.NUX.MESSENGER_ROOM_DIALOG_FROM_ATTACH_DROPDOWN,{views:0,maxViews:1})}componentDidMount(){(0,c.shouldShowNUX)(d.default.NUX.MESSENGER_ROOM_DIALOG_NEW)?((0,c.viewNUX)(d.default.NUX.MESSENGER_ROOM_DIALOG_NEW),this.props.listeners.add(window,"dpichange",(()=>{this.forceUpdate()}))):(0,c.viewNUX)(d.default.NUX.MESSENGER_ROOM_DIALOG_RETURNING),this.props.chat?(0,c.viewNUX)(d.default.NUX.MESSENGER_ROOM_DIALOG_FROM_ATTACH_DROPDOWN):(0,c.viewNUX)(d.default.NUX.MESSENGER_ROOM_DIALOG_FROM_CHATLIST)}render(){var e=(0,c.shouldShowNUX)(d.default.NUX.MESSENGER_ROOM_DIALOG_NEW),t=E[this.context.theme][u.default.currentRes],a=e?n.createElement(n.Fragment,null,n.createElement("img",{alt:"",src:t,className:m.default.illustration}),n.createElement(v.TextDiv,{theme:"popup-title",className:(0,s.default)(m.default.title,m.default.block)},h.default.t(966)),n.createElement(v.TextDiv,{theme:"plain",className:m.default.block},h.default.t(964)),n.createElement(v.TextDiv,{theme:"muted-small",className:m.default.block},h.default.t(965))):n.createElement(v.TextDiv,{theme:"plain"},h.default.t(967));return n.createElement(l.default,{okText:h.default.t(963),onOK:this.onOK,onCancel:this.onCancel},a)}}y.contextType=g.default;var S=(0,f.default)(y);t.default=S},76214:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(46774)),o=i(a(13886)),l=r(a(43334)),d=r(a(16348)),u=r(a(79711)),c=r(a(7470)),h=a(20485),f=i(a(35598)),p=r(a(6660)),m=r(a(17957)),_=r(a(53467)),v=r(a(46821)),g=r(a(73073)),E=r(a(72424)),y=i(a(75074)),S=r(a(97702)),C="SEC_FREQUENT_CONTACTS",T="SEC_CHATS",M="SEC_CONTACTS",b="ROW_FREQUENT_CONTACTS",P="ROW_CHATS",A="ROW_CONTACTS";class I extends s.Component{constructor(...e){super(...e),this.setSearch=e=>{this.search=e},this.setList=e=>{this.list=e},this.state={filteredData:this.calculateFilteredData(this.props.searchText)},this._handleRef=e=>{this._refHotKey=e},this.onCancelSelection=()=>{this.props.selections.unsetAll()},this._handleSelect=(e,t,a)=>{var{selections:r,maxChats:i,active:n,onSelectionChanged:o,hasFrequentlyForwarded:l}=this.props;if(t&&"number"==typeof i&&r.getSelected().length>=i){var d=E.default.hfmStringChanges?m.default.t(684,{count:i,_plural:i}):m.default.t(683,{count:i,_plural:i}),c=l?d:m.default.t(682,{count:i,_plural:i});u.default.openToast(s.createElement(y.default,{id:(0,y.genId)(),msg:c}))}else r.setVal(e,t,a),n.setVal(e,a),o&&o(e,t)},this._handleIndexChange=e=>{var t;null===(t=this.list)||void 0===t||t.scrollIntoViewIfNeeded(e)},this._renderItem=e=>{switch(e.type){case C:return s.createElement(g.default,{header:m.default.t(1594)});case T:return s.createElement(g.default,{header:m.default.t(1762)});case M:return s.createElement(g.default,{header:m.default.t(1710)});case b:case P:case A:var t,{data:a}=e,r=!1;this.props.hasFrequentlyForwarded&&a.groupMetadata&&a.groupMetadata.noFrequentlyForwarded&&(r=!0,t=m.default.t(689));var i=()=>this._onChatClick(a);return s.createElement(d.default,{key:a.id.toString(),model:a,selections:this.props.selections,tabIndex:-1},a instanceof n.default?s.createElement(o.default,{theme:r?"chat-checkbox-no-delete":"chat-checkbox",active:this.props.active,chat:a,mode:o.Mode.INFO,noContext:!0,onClick:i,secondary:t,showEphemeralIcon:this.props.showEphemeralIcon}):s.createElement(S.default,{contact:a,onSelect:i,customSecondaryText:t,active:this.props.active,showEphemeralIcon:this.props.showEphemeralIcon}));default:throw new f.UnknownDataError(e)}}}componentDidMount(){this.props.active.init(this._flattenData(this.state.filteredData)),this.props.getInitialItems&&this.props.getInitialItems().forEach((e=>this.props.selections.setVal(e,!0)))}componentDidUpdate(e){if(this.props.searchText!==e.searchText){var t=this.calculateFilteredData(this.props.searchText);this.setState({filteredData:t}),this.props.active.init(this._flattenData(t))}}calculateFrequentContacts(e){var{msgType:t,excludeChat:a}=this.props;return e?[]:c.default.frequentContacts(t,a)}_calculateFilteredChats(e){var t=e;if(t){t=m.default.accentFold(t);var a=(0,v.default)(t);return l.default.filter((function(e){return e.canSend&&e.shouldAppearInList&&e.contact.searchMatch(t,a)}))}return l.default.filter((function(e){return e.canSend&&e.shouldAppearInList}))}calculateFilteredContacts(e){var t=e,a=c.default.getFilteredContacts();if(!t)return a;t=m.default.accentFold(e);var r=(0,v.default)(t);return a.filter((function(e){return e.searchMatch(t,r)}))}calculateFilteredData(e){var t={};return{frequentContacts:this.calculateFrequentContacts(e).map((e=>{if(this.props.excludeBroadcast&&e.isBroadcast)return null;var a=e.isGroup||e.isBroadcast?l.default.get(e.id):e;return a&&(t[a.id]=!0),a})).filter(Boolean),chats:this._calculateFilteredChats(e).map((e=>{if(this.props.excludeBroadcast&&e.isBroadcast)return null;var a=e.isGroup||e.isBroadcast?e:e.contact;return t[a.id]?null:(t[a.id]=!0,a)})).filter(Boolean),contacts:this.calculateFilteredContacts(e).map((e=>t[e.id]?null:e)).filter(Boolean)}}_flattenData(e){var{frequentContacts:t,chats:a,contacts:r}=e;return t.concat(a,r)}_isEmpty(){var{frequentContacts:e,chats:t,contacts:a}=this.state.filteredData;return!e.length&&!t.length&&!a.length}_getData(){var e=[],{frequentContacts:t,chats:a,contacts:r}=this.state.filteredData;return t.length&&(e.push({itemKey:C,type:C}),e.push(...t.map((e=>({itemKey:e.id.toString(),type:b,data:e}))))),a.length&&(e.push({itemKey:T,type:T}),e.push(...a.map((e=>({itemKey:e.id.toString(),type:P,data:e}))))),r.length&&(e.push({itemKey:M,type:M}),e.push(...r.map((e=>({itemKey:e.id.toString(),type:A,data:e}))))),e}toggleFirst(e){var t,{frequentContacts:a,chats:r,contacts:i}=this.state.filteredData;if(a.length)t=a[0];else if(r.length)t=r[0];else{if(!i.length)return;t=i[0]}var s=!this.props.selections.isSelected(t);this._handleSelect(t,s,e)}focus(){this._refHotKey&&p.default.focus(this._refHotKey)}_onChatClick(e){var t=this.props.selections.isSelected(e);this._handleSelect(e,!t,!1)}_renderList(){return this._isEmpty()?this.props.searchText?s.createElement(h.Search,null):s.createElement(h.ListChats,null):s.createElement(f.default,{ref:this.setList,flatListController:this.props.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:this._getData(),renderItem:this._renderItem})}render(){return s.createElement(_.default,{active:this.props.active,onLeave:this.props.onLeaveList,onRef:this._handleRef,onIndexChange:this._handleIndexChange},this._renderList())}}t.default=I},78387:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(16348)),o=r(a(79711)),l=r(a(7470)),d=a(20485),u=i(a(35598)),c=r(a(6660)),h=r(a(17957)),f=r(a(53467)),p=r(a(46821)),m=r(a(73073)),_=i(a(75074)),v=r(a(97702)),g="SEC_CONTACTS",E="ROW_CONTACTS";class y extends s.Component{constructor(e){super(e),this.setList=e=>{this.list=e},this._handleRef=e=>{this._refHotKey=e},this._handleSelect=(e,t,a)=>{var{selections:r,maxContacts:i,active:n,onSelectionChanged:l}=this.props;t&&"number"==typeof i&&r.getSelected().length>=i?o.default.openToast(s.createElement(_.default,{id:(0,_.genId)(),msg:h.default.t(993,{count:i,_plural:i})})):(r.setVal(e,t,a),n.setVal(e,a),l&&l(e,t))},this._handleIndexChange=e=>{var t;null===(t=this.list)||void 0===t||t.scrollIntoViewIfNeeded(e)},this._renderItem=e=>{switch(e.type){case g:return s.createElement(m.default,{header:h.default.t(1564)});case E:var{data:t}=e,{isDisabled:a,customSecondaryText:r}=this.props;return s.createElement(n.default,{key:t.id.toString(),model:t,selections:this.props.selections,checked:!!this.props.isSelected&&this.props.isSelected(t.id)},s.createElement(v.default,{contact:t,disabled:a&&a(t.id),onSelect:()=>this._onContactClick(t),customSecondaryText:r&&r(t.id),active:this.props.active,allowBlockedContacts:this.props.allowBlockedContacts}));default:throw new u.UnknownDataError(e)}},this.state={filteredData:y.calculateFilteredData(e)}}static getDerivedStateFromProps(e){return{filteredData:y.calculateFilteredData(e)}}static calculateFilteredData(e){return{contacts:y.calculateFilteredContacts(e)}}static calculateFilteredContacts(e){var{filter:t,useAllContacts:a,searchText:r}=e,i=a?l.default.toArray():l.default.getFilteredContacts();if(t&&(i=i.filter((e=>t(e)))),!r)return i;var s=h.default.accentFold(r),n=(0,p.default)(s);return i.filter((e=>e.searchMatch(s,n)))}componentDidMount(){this.props.active.init(this._flattenData(this.state.filteredData)),this.props.getInitialItems&&this.props.getInitialItems().forEach((e=>this.props.selections.setVal(e,!0)))}componentDidUpdate(e){this.props.searchText!==e.searchText&&this.props.active.init(this._flattenData(this.state.filteredData))}_flattenData(e){return e.contacts}_isEmpty(){return!this.state.filteredData.contacts.length}_getData(){var e=[],{contacts:t}=this.state.filteredData;return t.length&&(e.push({itemKey:g,type:g}),e.push(...t.map((e=>({itemKey:e.id.toString(),type:E,data:e}))))),e}toggleFirst(e){if(this.state.filteredData.contacts.length){var t=this.state.filteredData.contacts[0],a=!this.props.selections.isSelected(t);this._handleSelect(t,a,e)}}focus(){this._refHotKey&&c.default.focus(this._refHotKey)}_clearActive(){this.props.active.unset()}_onContactClick(e){var{isDisabled:t}=this.props;if(!t||!t(e.id)){var a=this.props.selections.isSelected(e);this._handleSelect(e,!a,!1)}}_renderList(){return this._isEmpty()?this.props.searchText?s.createElement(d.Search,null):s.createElement(d.ListChats,null):s.createElement(u.default,{ref:this.setList,flatListController:this.props.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:this._getData(),renderItem:this._renderItem})}render(){return s.createElement(f.default,{active:this.props.active,onLeave:this.props.onLeaveList,onRef:this._handleRef,onIndexChange:this._handleIndexChange},this._renderList())}}t.default=y},53467:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(44343));class o extends s.Component{constructor(...e){super(...e),this._onNext=e=>{e.preventDefault(),e.stopPropagation(),this.props.active.setNext(!0),this.props.onIndexChange&&this.props.onIndexChange(this.props.active.index)},this._onPrev=e=>{e.stopPropagation(),e.preventDefault(),this.props.active.prev()>-1?(this.props.active.setPrev(!0),this.props.onIndexChange&&this.props.onIndexChange(this.props.active.index)):this.props.onLeave&&(this.props.onLeave(e),this.props.active.unset())},this._onEnter=e=>{this.props.onEnter&&this.props.onEnter(e)},this._isFocusInContainer=e=>{var t=e.relatedTarget;return t instanceof HTMLElement&&e.currentTarget instanceof HTMLElement&&!e.currentTarget.contains(t)},this._onFocus=e=>{this._isFocusInContainer(e)&&this.props.active.setFirst(!0)},this._onBlur=e=>{this._isFocusInContainer(e)&&this.props.active.unset()}}render(){var e={down:this._onNext,up:this._onPrev,enter:this._onEnter,space:this._onEnter};return s.createElement(n.default,{handlers:e,onRef:this.props.onRef,onFocus:this._onFocus,onBlur:this._onBlur,tabIndex:0},this.props.children)}}t.default=o},31629:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(65468)),o=r(a(50935)),l=a(20485),d=a(19741),u=r(a(35598)),c=r(a(89286)),h=r(a(6660)),f=a(95595),p=r(a(53467)),m=r(a(72259)),_=r(a(67257)),v=a(11419),g=a(75637);class E extends s.Component{constructor(...e){super(...e),this.setList=e=>{this.list=e},this.state={products:this._getCollectionProducts(),loadingMore:!1,loadedProducts:this._getCollectionProducts().length,canLoadMore:!0,hasCatalog:!0},this._handleRef=e=>{this._refHotKey=e},this.updateForScrollEvent=e=>{var t=e.currentTarget,{scrollTop:a,clientHeight:r,scrollHeight:i}=t;i-r-a<o.default.SCROLL_FUDGE&&!this.state.loadingMore&&this._loadMoreProducts()},this._onEnter=e=>{e.stopPropagation(),e.preventDefault();var{active:t}=this.props;t.value&&this._onProductClick(t.value)},this._handleSelect=(e,t,a)=>{var{selections:r,active:i,onSelectionChanged:s}=this.props;r.setVal(e,t,a),i.setVal(e,a),s&&s(e,t)},this._handleIndexChange=e=>{var t;null===(t=this.list)||void 0===t||t.scrollIntoViewIfNeeded(e)},this._renderItem=e=>{var{data:t}=e;return s.createElement(_.default,{key:t.id.toString(),product:t,selections:this.props.selections,onClick:()=>this._onProductClick(t),active:this.props.active})}}componentDidMount(){this.props.active.init(this.state.products),this._findProducts()}toggleFirst(e){var t=this.state.products;if(0!==t.length){var a=t[0],r=!this.props.selections.isSelected(a);this._handleSelect(a,r,e)}}focus(){this._refHotKey&&h.default.focus(this._refHotKey)}_findProducts(){this.setState({loadingMore:!0}),n.default.find((0,f.getMaybeMeUser)()).catchType(d.ServerStatusCodeError,(()=>this.setState({hasCatalog:!1,loadingMore:!1,canLoadMore:!1}))).then((()=>this._loadMoreProducts()))}_loadMoreProducts(){var e=this._getCatalog();if(e)if(e.afterCursor&&this.state.canLoadMore)this.setState({loadingMore:!0}),n.default.findNextProductPage(e.id).checkpoint(this.props.rejectOnUnmount()).then((e=>{var t=e.length;this.setState((({loadedProducts:a})=>({products:e,loadingMore:!1,loadedProducts:t,canLoadMore:a!==t})),(()=>{this.props.onProductsLoaded&&this.props.onProductsLoaded(e)})),this.props.active.init(e)})).catch((()=>{this.setState({loadingMore:!1,canLoadMore:!0})}));else{var t=e.productCollection.getProductModels();this.setState({products:t,loadingMore:!1,canLoadMore:!1}),this.props.onProductsLoaded&&this.props.onProductsLoaded(t)}}_getCollectionProducts(){var e=this._getCatalog();return null!=e?e.productCollection.getProductModels():[]}_getCatalog(){var e=(0,f.getMaybeMeUser)(),t=(0,v.isString)(e)?(0,g.createWid)(e):e;return n.default.get(t)}_onProductClick(e){var t=this.props.selections.isSelected(e);this._handleSelect(e,!t,!1)}_renderList(){if(0===this.state.products.length&&!this.state.loadingMore&&!this.state.canLoadMore)return s.createElement(l.ListProducts,{hasCatalog:this.state.hasCatalog});var e=this.state.products.map((e=>({itemKey:e.id.toString(),data:e})));return s.createElement(u.default,{ref:this.setList,direction:"vertical",forceConsistentRenderCount:!1,data:e,renderItem:this._renderItem,flatListController:this.props.flatListController,defaultItemHeight:o.default.PRODUCT_LIST_ITEM_HEIGHT})}render(){return s.createElement(p.default,{active:this.props.active,onEnter:this._onEnter,onLeave:this.props.onLeaveList,onRef:this._handleRef,onIndexChange:this._handleIndexChange},this._renderList(),this.state.loadingMore&&s.createElement(c.default,null))}}var y=(0,m.default)(E);t.default=class extends y{toggleFirst(e){this.getComponent().toggleFirst(e)}focus(){this.getComponent().focus()}updateForScrollEvent(e){this.getComponent().updateForScrollEvent(e)}}},7632:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(79711)),o=r(a(58701)),l=r(a(73023)),d=i(a(71311)),u=r(a(44343)),c=r(a(17957)),h=i(a(41967)),f=r(a(3614)),p=r(a(91735)),m=a(84990);class _ extends s.Component{render(){var{vcards:e}=this.props;return s.createElement(h.default,{type:h.BoxModalType},s.createElement(o.default,null,s.createElement(d.default,{title:c.default.t(992,{count:e.length,_plural:e.length}),type:d.DRAWER_HEADER_TYPE.POPUP,onCancel:()=>n.default.closeModal()}),s.createElement(l.default,null,s.createElement(u.default,null,s.createElement("div",{className:f.default.body},e.map(((e,t)=>e?s.createElement("div",{className:f.default.vcardWrapper,key:t},s.createElement(p.default,{parsedVcard:e,thumbnail:(0,m.vcardThumbnail)(e)})):null)))))))}}var v=_;t.default=v},87095:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(79711)),o=r(a(9386)),l=r(a(91581)),d=a(95595),u=r(a(17957)),c=a(43257),h=r(a(31003)),f=r(a(40207));function p(){n.default.closeModal()}class m extends s.PureComponent{constructor(...e){super(...e),this.state={},this.onChange=({target:e})=>{e instanceof HTMLInputElement&&this.setState({mute:parseFloat(e.value)})},this.onMute=()=>{n.default.closeModal();var e=this._getMuteDuration();(0,d.setLastChatMuteDuration)(e),this.props.onMute((0,c.calculateMuteExpiration)(e),e)}}componentDidUpdate(){0!==this.props.mute.expiration&&p()}_getMuteDuration(){return null!=this.state.mute&&0!==this.state.mute?this.state.mute:(0,d.getLastChatMuteDuration)()||(0,c.getDefaultMuteDuration)()}render(){var e=this.props.onCancel||p,t=this._getMuteDuration(),a=(0,c.getAllMuteDurations)().map((({label:e,duration:a})=>{var r="duration-".concat(a);return s.createElement("li",{key:"mute-"+a},s.createElement("input",{id:r,type:"radio",name:"duration",className:h.default.input,value:a,checked:t===a,onChange:this.onChange}),s.createElement("label",{htmlFor:r,className:h.default.label},e))}));return s.createElement(o.default,{title:s.createElement(l.default,{text:this.props.title}),okText:u.default.t(1690),onOK:this.onMute,onCancel:e},s.createElement("form",null,s.createElement("ol",null,a)))}}m.CONCERNS={mute:["id","expiration"]};var _=(0,f.default)(m,m.CONCERNS);t.default=_},50540:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(32960)),l=i(a(21403)),d=i(a(9386)),u=i(a(18120)),c=i(a(17957)),h=i(a(41069)),f=a(40263);class p extends n.Component{constructor(...e){super(...e),this.state={additionalActions:!0},this._onToggleAdditionalActions=()=>{this.setState({additionalActions:!this.state.additionalActions})},this.onReport=()=>{this.state.additionalActions?this.props.isGroupChat?this.props.onReportExitClear():this.props.onReportBlockClear():this.props.onReport()}}render(){var e,t,a;this.props.isGroupChat?(e=c.default.t(1199),t=c.default.t(1198),a=u.default.supportsFeature(u.default.F.MD_BACKEND)?c.default.t(1683):c.default.t(1207)):this.props.isBusiness?(e=c.default.t(1193),t=c.default.t(1192),a=u.default.supportsFeature(u.default.F.MD_BACKEND)?c.default.t(1685):c.default.t(1209)):(e=c.default.t(1196),t=c.default.t(1195),a=u.default.supportsFeature(u.default.F.MD_BACKEND)?c.default.t(1684):c.default.t(1208));var r=n.createElement("div",{"data-a8n":o.default.key("menu-icon-report-spam"),className:h.default.control},n.createElement(l.default,{onChange:this._onToggleAdditionalActions,checked:this.state.additionalActions,id:"menu-icon-report-spam"})),i=n.createElement("label",{htmlFor:"menu-icon-report-spam",className:h.default.label},t);return u.default.supportsFeature(u.default.F.MD_BACKEND)?n.createElement(d.default,{title:n.createElement(f.TextDiv,{theme:"title"}," ",e," "),onOK:this.onReport,okText:c.default.t(1189),onCancel:this.props.onCancel},n.createElement("div",{className:(0,s.default)(h.default.section,h.default.border)},r,i),n.createElement(f.TextParagraph,{className:h.default.mdMetaText,theme:"muted"},a)):n.createElement(d.default,{onOK:this.onReport,okText:c.default.t(1189),onCancel:this.props.onCancel},e,n.createElement(f.TextDiv,{className:h.default.metaText,theme:"muted"},a),n.createElement("div",{className:h.default.section},r,i))}}t.default=p},51079:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ListType=void 0;var s=i(a(2784)),n=r(a(43334)),o=r(a(60846)),l=r(a(79711)),d=r(a(40147)),u=r(a(37097)),c=r(a(58701)),h=r(a(73023)),f=i(a(71311)),p=r(a(22004)),m=r(a(38147)),_=r(a(6660)),v=i(a(41967)),g=r(a(76214)),E=r(a(78387)),y=r(a(31629)),S=r(a(42913)),C=r(a(89243)),T=r(a(73664)),M={CHAT_SELECT_MODAL:"CHAT_SELECT_MODAL",CONTACT_SELECT_MODAL:"CONTACT_SELECT_MODAL",PARTICIPANT_MANAGE_MODAL:"PARTICIPANT_MANAGE_MODAL",PRODUCT_SELECT_MODAL:"PRODUCT_SELECT_MODAL"};t.ListType=M;class b extends s.Component{constructor(...e){super(...e),this.state={searchText:""},this._setRefSearch=e=>{this._refSearch=e},this._setRefList=e=>{this._refList=e},this.active=new T.default([],(e=>e.id)),this.selections=new S.default([],(e=>e.id.toString())),this.flatListController=new p.default,this._setSearchText=e=>{this.setState({searchText:e})},this.onFocusList=e=>{e&&(e.preventDefault(),e.stopPropagation())},this.onDown=()=>{this.active.setFirst(!0)},this.onScroll=e=>{this._refList instanceof y.default&&this._refList.updateForScrollEvent&&this._refList.updateForScrollEvent(e)},this._indicateSearchFocus=()=>{var e;this.active.unset(),null===(e=this._refSearch)||void 0===e||e.getComponent().indicateFocus()},this.onLeaveList=()=>{m.default.shouldIndicateFocus(),_.default.focus(this._refSearch)},this.handleEnter=()=>{var e;null===(e=this._refList)||void 0===e||e.toggleFirst(!1)},this._handleForward=()=>{var{onConfirm:e,listType:t}=this.props,a=this.selections.getSelected();t===M.CONTACT_SELECT_MODAL||t===M.PARTICIPANT_MANAGE_MODAL||t===M.PRODUCT_SELECT_MODAL?e(a):Promise.map(a,(e=>e instanceof d.default?n.default.find(e.id):e)).then((t=>{e(t)}))},this._handleSelectionChanged=(e,t)=>{var a;null===(a=this._refSearch)||void 0===a||a.select();var{onSelectionChanged:r}=this.props;null!=r&&r(e,t,this.selections.getSelected())},this._onSelectedListDelete=(e,t)=>{this.selections.setVal(t,!1)},this.onCancel=this.props.onCancel?this.props.onCancel:()=>l.default.closeModal()}componentDidMount(){_.default.focus(this._refSearch)}_renderList(){switch(this.props.listType){case M.CHAT_SELECT_MODAL:var e=this.props.getInitialItems,t=this.selections;return s.createElement(g.default,{ref:this._setRefList,msgType:this.props.msgType,excludeChat:this.props.excludeChat,excludeBroadcast:this.props.excludeBroadcast,getInitialItems:e,searchText:this.state.searchText,active:this.active,selections:t,maxChats:this.props.maxItems,onLeaveList:this.onLeaveList,onSelectionChanged:this._handleSelectionChanged,hasFrequentlyForwarded:this.props.hasFrequentlyForwarded,flatListController:this.flatListController,showEphemeralIcon:this.props.showEphemeralIcon});case M.PARTICIPANT_MANAGE_MODAL:case M.CONTACT_SELECT_MODAL:var a=this.props.getInitialItems,r=this.selections;return s.createElement(E.default,{ref:this._setRefList,useAllContacts:this.props.useAllContacts,getInitialItems:a,searchText:this.state.searchText,active:this.active,selections:r,maxContacts:this.props.maxItems,onLeaveList:this.onLeaveList,onSelectionChanged:this._handleSelectionChanged,isDisabled:this.props.isDisabled,isSelected:this.props.isSelected,customSecondaryText:this.props.customSecondaryText,filter:this.props.filter,allowBlockedContacts:this.props.allowBlockedContacts,flatListController:this.flatListController});case M.PRODUCT_SELECT_MODAL:var i=this.selections;return s.createElement(y.default,{ref:this._setRefList,flatListController:this.flatListController,active:this.active,selections:i,onSelectionChanged:this._handleSelectionChanged,onProductsLoaded:this.props.onDataLoaded});default:throw new Error("Invalid list type: ".concat(this.props.listType))}}render(){var{listType:e,useShortName:t,singleSelectionFooterType:a,multipleSelectionFooterType:r}=this.props,i=!!this.props.getInitialItems&&0!==this.props.getInitialItems().length,n=e===M.PARTICIPANT_MANAGE_MODAL?s.createElement(u.default,{selections:this.selections,useShortName:t,onDelete:this._onSelectedListDelete,isDisabled:this.props.isDisabled}):null;return s.createElement(v.default,{type:v.TowerModalType},s.createElement(c.default,{key:"chat-modal"},s.createElement(f.default,{title:this.props.title,type:f.DRAWER_HEADER_TYPE.POPUP,onCancel:this.onCancel}),s.createElement(C.default,{searchRef:this._setRefSearch,setSearchText:this._setSearchText,onDown:this.onDown,onEnter:this.handleEnter,onFocus:this._indicateSearchFocus,enabled:this.props.enableSearchBox}),this.props.customHeader,n,s.createElement(h.default,{flatListControllers:[this.flatListController],onScroll:this.onScroll},this._renderList()),s.createElement(o.default,{singleSelectionType:a,multipleSelectionType:r,selections:this.selections,onForward:this._handleForward,startActive:i})))}}t.default=b},89243:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(44343)),o=r(a(17957)),l=r(a(81610)),d=r(a(67134));class u extends s.Component{constructor(...e){super(...e),this._onSearch=this.props.debounce((e=>{this.props.setSearchText(e)}),100)}componentWillUnmount(){this._onSearch.cancel()}render(){return this.props.enabled?s.createElement(n.default,{handlers:{down:this.props.onDown},onFocus:this.props.onFocus},s.createElement(l.default,{ref:this.props.searchRef,onSearch:this._onSearch,onEnter:this.props.onEnter,placeholder:o.default.t(1225)})):null}}u.defaultProps={enabled:!0};var c=(0,d.default)(u);t.default=c},59694:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(45455)),n=i(a(72779)),o=a(28721),l=r(a(2784)),d=a(3594),u=i(a(79711)),c=i(a(9386)),h=i(a(52737)),f=i(a(50935)),p=a(555),m=a(95595),_=i(a(44343)),v=i(a(17957)),g=r(a(90088)),E=i(a(57441)),y=i(a(82631)),S=i(a(52100)),C=r(a(75074)),{SEND_LOGS_MAX_EMAIL_LENGTH:T,SEND_LOGS_MAX_SUBJECT_LENGTH:M,SEND_LOGS_MIN_DESC_LENGTH:b,SEND_LOGS_MAX_DESC_LENGTH:P,SEND_LOGS_MAX_SCREENSHOTS:A,SEND_LOGS_MAX_SCREENSHOT_SIZE:I}=f.default;class O extends l.Component{constructor(...e){super(...e),this.state={email:"",emailError:void 0,confirmEmail:"",confirmEmailError:void 0,subject:h.default.isSMB?v.default.t(1279):v.default.t(1280),subjectError:void 0,description:"",descriptionError:void 0,screenshots:[],isDragging:!1},this._setAttachButton=e=>{this._attachButton=e},this._setEmailAddr=e=>{this._emailAddrInput=e},this.onSend=()=>{var e={},{email:t,confirmEmail:a,subject:r,description:i,screenshots:n}=this.state,c=t.trim(),h=a.trim();if(this._validateEmail(c)||(e.emailError=v.default.t(1266)),this._validateConfirmEmail(h)||(e.confirmEmailError=v.default.t(1267)),this.validateDescription(i)||(e.descriptionError=v.default.t(1278)),this._validateSubject(r)||(e.subjectError=v.default.t(1275)),(0,s.default)(e)){this.setState({email:c,confirmEmail:h,emailError:void 0,confirmEmailError:void 0,descriptionError:void 0,subjectError:void 0}),n.map((e=>{e.url&&(URL.revokeObjectURL(e.url),delete e.url)}));var f=(0,m.getMaybeMeUser)(),p=f?(0,o.formatPhone)(f.user):null,_=r.trim()||v.default.t(1263);(0,d.uploadUserReport)(p,c,_,i,n),this.props.onSend&&this.props.onSend({subject:_,description:i,numScreenshots:n.length}),u.default.closeModal(),u.default.openToast(l.createElement(C.default,{msg:v.default.t(1274),id:(0,C.genId)()}))}else e.email=c,e.confirmEmail=h,this.setState(e)},this.onCancel=()=>{this.props.onCancel&&this.props.onCancel(),u.default.closeModal()},this.onSubjectChange=e=>{var t={subject:e,subjectError:this.state.subjectError};this.state.subjectError&&this._validateSubject(t.subject)&&(t.subjectError=void 0),this.setState(t)},this._onSubjectBlur=()=>{var e;this._validateSubject(this.state.subject)||(e=v.default.t(1275)),this.state.subjectError!==e&&this.setState({subjectError:e})},this.onDescriptionChange=e=>{var t={description:e,descriptionError:this.state.descriptionError};this.state.descriptionError&&this.validateDescription(t.description)&&(t.descriptionError=void 0),this.setState(t)},this._onDescriptionBlur=()=>{var e;!this.state.description&&!this.state.descriptionError||this.validateDescription(this.state.description)||(e=v.default.t(1278)),this.state.descriptionError!==e&&this.setState({descriptionError:e})},this._onEmailChange=e=>{var t={email:e,emailError:this.state.emailError};this.state.emailError&&this._validateEmail(t.email)&&(t.emailError=void 0),this.setState(t)},this._onEmailBlur=()=>{var e,t=this.state.email.trim(),a={};!this.state.email&&!this.state.emailError||this._validateEmail(t)||(e=v.default.t(1266)),this.state.emailError!==e&&(a.emailError=e),this.state.email!==t&&(a.email=t),(0,s.default)(a)||this.setState(a)},this._onConfirmEmailChange=e=>{var t={confirmEmail:e,confirmEmailError:this.state.confirmEmailError};this.state.confirmEmailError&&this._validateConfirmEmail(t.confirmEmail)&&(t.confirmEmailError=void 0),this.setState(t)},this._onConfirmEmailBlur=()=>{var e,t=this.state.confirmEmail.trim(),a={};!this.state.confirmEmail&&!this.state.confirmEmailError||this._validateConfirmEmail(t)||(e=v.default.t(1267)),this.state.confirmEmailError!==e&&(a.confirmEmailError=e),this.state.confirmEmail!==t&&(a.confirmEmail=t),(0,s.default)(a)||this.setState(a)},this._validateEmail=e=>g.validateEmail(e),this._validateConfirmEmail=e=>this.state.email===e,this.validateDescription=e=>e.length>b,this._validateSubject=()=>!0,this.onFilePick=e=>{e.preventDefault(),e.stopPropagation(),this._reachMaxScreenshots()||(0,p.getFiles)(e,"image/*").then((e=>{this._attachButton&&(this._attachButton.value="");var t=e.filter((e=>e.size<=I));t.length<e.length&&u.default.openToast(l.createElement(C.default,{msg:v.default.t(1269),id:(0,C.genId)()}));var a=this.state.screenshots.concat(t).slice(0,A);a.map((e=>{e.url||(e.url=URL.createObjectURL(e))})),this.setState({screenshots:a})}))},this.onDragChange=e=>{this.setState({isDragging:e})},this._handleAttachClick=()=>{this._attachButton&&!this._reachMaxScreenshots()&&this._attachButton.click()},this.stopPropagation=e=>{e.stopPropagation()}}componentDidMount(){this._emailAddrInput&&this._emailAddrInput.restoreFocus()}componentWillUnmount(){this.state.screenshots.map((({url:e})=>e&&URL.revokeObjectURL(e)))}_reachMaxScreenshots(){return this.state.screenshots.length>=A}_deleteScreenshot(e){var t=this.state.screenshots.slice(),[a]=t.splice(e,1);a.url&&URL.revokeObjectURL(a.url),this.setState({screenshots:t})}_getScreenshotsList(){var e=this.state.screenshots.map(((e,t)=>{if(!e.url)return null;var a="url(".concat(e.url,")"),r="screenshot-".concat(t);return l.createElement("div",{key:r,className:E.default.screenshotsImg,style:{backgroundImage:a}},l.createElement("button",{className:E.default.btnDelete,onClick:()=>{this._deleteScreenshot(t)}},l.createElement(y.default,{name:"x-alt"})))}));return e.length?l.createElement("div",{className:E.default.screenshotPreview},e):null}_getScreenshotAction(){if(this._reachMaxScreenshots()){var e=A;return l.createElement("div",{className:(0,n.default)(E.default.action,E.default.disabled)},v.default.t(1277,{count:e,_plural:e}))}return this.state.isDragging?l.createElement("div",{className:E.default.action},v.default.t(1272)):l.createElement("div",{className:E.default.action,onClick:this._handleAttachClick},v.default.t(1273))}render(){var e={enter:this.stopPropagation},t=l.createElement("div",{className:E.default.screenshots},this._getScreenshotsList(),this._getScreenshotAction(),l.createElement("input",{accept:"image/*",type:"file",multiple:!0,onClick:this.stopPropagation,onChange:this.onFilePick,ref:this._setAttachButton,disabled:this._reachMaxScreenshots()}));return l.createElement(c.default,{title:v.default.t(1276),okText:v.default.t(1262),onOK:this.onSend,onCancel:this.onCancel,onDrop:this.onFilePick,onDragChange:this.onDragChange},l.createElement(_.default,{handlers:e},l.createElement(S.default,{ref:this._setEmailAddr,value:this.state.email,error:this.state.emailError,maxLength:T,onChange:this._onEmailChange,onBlur:this._onEmailBlur,placeholder:v.default.t(1264)}),l.createElement(S.default,{editable:!0,value:this.state.confirmEmail,error:this.state.confirmEmailError,maxLength:T,onChange:this._onConfirmEmailChange,onBlur:this._onConfirmEmailBlur,placeholder:v.default.t(1265)}),l.createElement(S.default,{value:this.state.subject,error:this.state.subjectError,maxLength:M,onChange:this.onSubjectChange,onBlur:this._onSubjectBlur,placeholder:v.default.t(1268)}),l.createElement(S.default,{value:this.state.description,error:this.state.descriptionError,maxLength:P,onChange:this.onDescriptionChange,onBlur:this._onDescriptionBlur,placeholder:v.default.t(547),multiline:!0}),t))}}t.default=O},18470:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(79711)),o=r(a(9386)),l=r(a(52737)),d=r(a(17957)),u=r(a(20642)),c=r(a(39401)),h=r(a(12767));class f extends s.Component{constructor(...e){super(...e),this.close=()=>{l.default.smbTos||n.default.closeModal()},this.logout=()=>{n.default.closeModal(),h.default.logout()}}componentDidMount(){this.props.listeners.add(l.default,"change:smbTos",this.close)}render(){var e=d.default.t(1786),t=d.default.t(927),a=this.logout;return s.createElement(o.default,{onOK:a,okText:t},e," ",s.createElement(c.default,null))}}var p=(0,u.default)(f);t.default=p},82338:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(79711)),o=r(a(9386)),l=i(a(35387)),d=a(95585),u=r(a(17957)),c=r(a(41276));class h extends s.PureComponent{constructor(...e){super(...e),this.onOK=()=>{n.default.closeModal()},this.onCancel=()=>{var{href:e}=this.props.link;(0,l.openExternalLink)(e),n.default.closeModal()}}_renderHostname(){var{suspiciousCharacters:e,domain:t}=this.props.link,a=t.split("."),r=[];return a.forEach(((t,i)=>{var n=!1,o=t.split("").map(((t,a)=>{var r=e&&e.has(t);n=r||n;var o=r?c.default.suspiciousCharacter:void 0;return s.createElement("span",{key:"".concat(i,"-").concat(a,"-").concat(t),className:o},t)})),l=n?c.default.suspiciousHostname:void 0,d=s.createElement("span",{key:"".concat(i,"-").concat(t),className:l},o);r.push(d),i+1!==a.length&&r.push(s.createElement("span",{key:"".concat(i)},"."))})),r}render(){var{href:e,domain:t}=this.props.link,[a,r]=e.split(t);return s.createElement(o.default,{title:u.default.t(1338),okText:u.default.t(1547),cancelText:u.default.t(1340),onOK:this.onOK,onCancel:this.onCancel},s.createElement("div",{className:c.default.explanation},u.default.t(1341)+" ",s.createElement(l.default,{href:(0,d.getSuspiciousLinkFaqUrl)()},u.default.t(848))),s.createElement("div",{className:c.default.url},a,this._renderHostname(),r))}}t.default=h},74391:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(79711)),o=r(a(9386)),l=r(a(52737)),d=r(a(17957)),u=r(a(20642)),c=r(a(12767));class h extends s.Component{constructor(...e){super(...e),this.close=()=>{0===l.default.tos&&n.default.closeModal()},this.logout=()=>{n.default.closeModal(),c.default.logout()}}componentDidMount(){this.props.listeners.add(l.default,"change:tos",this.close)}render(){var e,t,a;switch(l.default.tos){default:case 1:e=d.default.t(1812),t=d.default.t(1104),a=()=>n.default.closeModal();break;case 2:e=d.default.t(1813),t=d.default.t(927),a=this.logout}return s.createElement(o.default,{onOK:a,okText:t},e)}}var f=(0,u.default)(h);t.default=f},15549:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(64)),o=r(a(79711)),l=r(a(52737)),d=a(62436),u=a(90973),c=r(a(44343)),h=r(a(20642)),f=r(a(40210)),p=r(a(41967)),m=r(a(11680)),_=r(a(40207)),v=r(a(82631)),g=a(40263),E=r(a(2220)),y=r(a(56268)),S=r(a(12767)),C=()=>{};class T extends s.PureComponent{constructor(e){super(e),this._shouldShowModal=()=>null!=m.default.noticeId&&null!=m.default.blockingModal&&!0===m.default.blocking,this._handleNoticeBlockingModalChange=()=>{this._shouldShowModal()&&(this.state.blockingModalDisplayed||(new f.default.UserNotice({userNoticeId:m.default.noticeId,userNoticeContentVersion:m.default.policyVersion,userNoticeEvent:f.default.USER_NOTICE_EVENT.BLOCKING_MODAL_APPEAR}).commit(),this.setState({blockingModalDisplayed:!0})))},this.handleNoticeIdChange=()=>{this.setState({blockingModalDisplayed:!1})},this.close=()=>{m.default.blocking||o.default.closeModal()},this.logout=()=>{o.default.closeModal(),S.default.logout()},this.refresh=()=>{location.reload()},this.state={blockingModalDisplayed:!1}}componentDidMount(){this.props.listeners.add(m.default,"change:blocking",this.close),this.props.listeners.add(m.default,"change:noticeId",this.handleNoticeIdChange),this.props.listeners.add(m.default,"change:blockingModal change:blocking",this._handleNoticeBlockingModalChange),this._handleNoticeBlockingModalChange()}_getClickHandler(e){if(e){if("logout"===e.action)return this.logout;if("refresh"===e.action)return this.refresh}return C}_renderButton(e,t=!1){if(null==e)return null;var a="UserNoticeModalPopup-".concat(e.action,"Btn"),r="popup-controls-".concat(e.action);return s.createElement(n.default,{a8nText:r,type:t?"primary":"plain",onClick:this._getClickHandler(e),key:a},e.label)}render(){var{notice:e}=this.props,{blockingModal:t}=e;if(!t||!this._shouldShowModal())return null;var a,{iconSvg:r,iconDescription:i="",title:n,body:o,primaryButton:h,secondaryButton:f}=t;r&&(a="light"===this.context.theme?r.light:r.dark);var m=s.createElement(v.default,{name:"alert-notice","aria-label":i}),_=a&&(0,d.sanitizeNoticeSVG)(a),E=_?s.createElement("span",{"aria-label":i,dangerouslySetInnerHTML:{__html:_}}):m,S=this._renderButton(f),C=this._renderButton(h,!0),T={enter:this._getClickHandler(h)},M=n?(0,d.sanitizeNoticeText)(n):null,b=o?(0,d.sanitizeNoticeText)(o):null;return s.createElement(c.default,{handlers:T},s.createElement("div",{className:l.default.isSMB?y.default.noticeSmbContainer:y.default.noticeContainer},s.createElement(p.default,{actions:[S,C],type:"flex"},s.createElement("div",{className:y.default.noticeModalContentWrapper},s.createElement(u.FlexRow,{className:y.default.noticeSvgWrapper,align:"center",justify:"center"},E),s.createElement(g.TextDiv,{theme:"popup-title",className:y.default.headerText},s.createElement("div",{dangerouslySetInnerHTML:{__html:M}})),s.createElement(g.TextDiv,{theme:"plain",className:y.default.bodyText},s.createElement("div",{dangerouslySetInnerHTML:{__html:b}}))))))}}T.CONCERNS={notice:["noticeId","blocking","blockingModal"]},T.contextType=E.default;var M=(0,h.default)((0,_.default)(T,T.CONCERNS));t.default=M},91735:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(90882)),n=i(a(16760)),o=r(a(2784)),l=i(a(96066)),d=i(a(43334)),u=i(a(79711)),c=a(46478),h=i(a(15466)),f=i(a(91581)),p=a(35387),m=i(a(17957)),_=i(a(81031)),v=i(a(15118)),g=a(66615),E=i(a(82631)),y=i(a(5174)),S=i(a(55420)),C=a(84990),T=i(a(3111)),M=a(75637);class b extends o.Component{openChat(e){u.default.closeModal(),d.default.find((0,M.createUserWid)(e)).then((e=>{u.default.openChatFromUnread(e).then((t=>{t&&u.default.focusChatTextInput(e)}))}))}_sendEmail(e){var t="mailto:".concat(e);(0,p.openExternalLink)(t)}_openLocation(e){var t=(0,n.default)((0,s.default)(e),encodeURIComponent).join(", "),a="https://maps.google.com/maps/search/".concat(t,"?hl=").concat(m.default.getLocale());(0,p.openExternalLink)(a)}_getHeader(){var{parsedVcard:e}=this.props,t=(0,C.vcardWids)(e),a=o.createElement(f.default,{text:(0,C.vcardGetNameFromParsed)(e),direction:"auto",titlify:!0,ellipsify:!0,selectable:!0}),r=(0,C.vcardGetOrganizationString)(e),i=o.createElement(_.default,{thumb:this.props.thumbnail,size:c.DETAIL_IMAGE_SIZE.SMALL,wid:v.default.findThumbnailWid(t)});return o.createElement(l.default,{image:i,theme:"plain",primary:a,secondary:r})}render(){var e=this.props.parsedVcard,t=(0,s.default)(e.TEL,(e=>e.properties.waid)),a=(0,s.default)(e.TEL,(e=>!e.properties.waid)),r=(0,n.default)(t,(e=>{var t=e.properties.waid[0],a=o.createElement(y.default,{onClick:()=>this.openChat(t)},o.createElement(E.default,{name:"chat",className:S.default.icon})),r=o.createElement(g.SelectableSpan,{selectable:!0},(0,T.default)(t));return o.createElement(h.default,{title:r,icon:a,key:"vCard-".concat(String(e.index))},(0,C.vcardGetType)(e))})),i=(0,n.default)(e.EMAIL,(e=>o.createElement(h.default,{title:m.default.forceLTR(e.value),onClick:()=>this._sendEmail(e.value),key:"vCard-".concat(String(e.index))},(0,C.vcardGetType)(e)))),l=(0,n.default)(e.ADR,(e=>{var t=e.value.join(" ");return o.createElement(h.default,{title:t,onClick:()=>this._openLocation(e.value),key:"vCard-".concat(String(e.index))},(0,C.vcardGetType)(e))})),d=(0,n.default)(a,(e=>o.createElement(h.default,{title:m.default.forceLTR(e.value),key:"vCard-".concat(String(e.index))},(0,C.vcardGetType)(e)))),u=(0,n.default)(e.SERVICE,(e=>o.createElement(h.default,{title:e.value,key:"vCard-".concat(String(e.index))},(0,C.vcardGetType)(e)))),c=(0,n.default)(e.BDAY,(e=>o.createElement(h.default,{title:(0,C.vcardGetDate)(e.value),key:"vCard-".concat(String(e.index))},m.default.t(1398)))),f=(0,n.default)(e.NICKNAME,(e=>o.createElement(h.default,{title:e.value,key:"vCard-".concat(String(e.index))},m.default.t(1410)))),p=this._getHeader();return o.createElement("div",null,p,o.createElement("div",{className:S.default.content},r,i,l,d,c,f,u))}}t.default=b},44849:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(90882)),n=r(a(2784)),o=i(a(58701)),l=i(a(73023)),d=r(a(71311)),u=i(a(15466)),c=i(a(17957)),h=r(a(41967)),f=i(a(5174)),p=a(84990),m=i(a(11940)),_=i(a(3111)),v=a(75637);class g extends n.Component{constructor(...e){super(...e),this._handleIconClick=(e,t)=>{e.stopPropagation(),this.onSelect(t)}}_renderContacts(){return(0,s.default)(this.props.vcard.TEL,(e=>e.properties.waid)).map((e=>{var t=(0,v.createUserWid)(e.properties.waid[0]),a=this.props.icon;return a&&(a=n.createElement(f.default,{onClick:e=>{this._handleIconClick(e,t)}},a)),n.createElement("div",{className:m.default.container,key:"vCard-".concat(e.value)},n.createElement(u.default,{title:(0,_.default)(t),onClick:()=>this.onSelect(t),icon:a},(0,p.vcardGetType)(e)))}))}onSelect(e){this.props.onSelect(e)}render(){return n.createElement(h.default,{type:h.BoxModalType},n.createElement(o.default,null,n.createElement(d.default,{onCancel:this.props.onCancel,type:d.DRAWER_HEADER_TYPE.POPUP,title:c.default.t(478)}),n.createElement(l.default,null,this._renderContacts())))}}t.default=g,g.defaultProps={onCancel:()=>{},onSelect:()=>{}}},26203:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(79711)),o=r(a(9386)),l=a(35387),d=r(a(17957)),u=r(a(40210)),c=r(a(99911)),h=r(a(72424)),f=a(86145),p=r(a(74185));class m extends s.Component{constructor(...e){super(...e),this.onOK=()=>{var{messageText:e}=this.props,t=(0,f.firstNEncodedBytes)(e,2e3),a=5===h.default.frequentlyForwardedThreshold?"wa":"wa".concat(h.default.frequentlyForwardedThreshold),r=p.default.build("https://www.google.com/search",{ctx:a,q:t});(0,l.openExternalLink)(r),(new u.default.HfmTextSearchComplete).commit(),n.default.closeModal()},this.onClose=()=>{n.default.closeModal()}}render(){return c.default.online?s.createElement(o.default,{cancelText:d.default.t(1547),onCancel:this.onClose,okText:d.default.t(1240),onOK:this.onOK},d.default.t(1242)):s.createElement(o.default,{okText:d.default.t(1709),onOK:this.onClose},d.default.t(1241))}}t.default=m},63865:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.logOrderMessageClick=function({catalogSessionId:e,catalogOwnerJid:t,orderId:a}){(0,s.createCatalogViewEvent)({isOwner:(0,s.isCatalogOwner)({catalogOwnerJid:t}),catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_ORDER_MESSAGE_CLICK,catalogViewAction:i.default.CATALOG_VIEW_ACTION.ACTION_ORDER_MESSAGE_CLICK,catalogSessionId:e}).commit()},t.logOrderListImpression=function({catalogSessionId:e,catalogOwnerJid:t,orderId:a,productCount:r}){(0,s.createCatalogViewEvent)({isOwner:(0,s.isCatalogOwner)({catalogOwnerJid:t}),catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_ORDER_LIST_IMPRESSION,catalogViewAction:i.default.CATALOG_VIEW_ACTION.ACTION_ORDER_LIST_IMPRESSION,catalogSessionId:e,bizActionConfig:{orderId:a,productCount:r}}).commit()},t.logOrderListItemClick=function({catalogOwnerJid:e,catalogSessionId:t,orderId:a}){(0,s.createCatalogViewEvent)({isOwner:(0,s.isCatalogOwner)({catalogOwnerJid:e}),catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_ORDER_LIST_ITEM_CLICK,catalogViewAction:i.default.CATALOG_VIEW_ACTION.ACTION_ORDER_LIST_ITEM_CLICK,catalogSessionId:t,bizActionConfig:{orderId:a}}).commit()},t.logSendOrderMessage=function({orderId:e,catalogOwnerJid:t,catalogSessionId:a,isOrderMsgAttached:r,quantity:n}){(0,s.createCatalogViewEvent)({isOwner:(0,s.isCatalogOwner)({catalogOwnerJid:t}),catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_SEND_ORDER_MESSAGE,catalogViewAction:i.default.CATALOG_VIEW_ACTION.ACTION_SEND_ORDER_MESSAGE,isOrderMsgAttached:r,catalogSessionId:a,bizActionConfig:{orderId:e,quantity:n}}).commit()};var i=r(a(40210)),s=a(82431)},20174:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return n.createElement(u.default,{className:(0,s.default)(o.default.closeBtn,{[o.default.fullscreen]:e.isFullscreenMode}),onClick:e.onClick},n.createElement(d.default,{"aria-label":l.default.t(1558),name:"video-x"}))};var s=i(a(72779)),n=r(a(2784)),o=i(a(92431)),l=i(a(17957)),d=i(a(82631)),u=i(a(5174))},53616:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(39910)),l=i(a(82631));class d extends n.PureComponent{render(){return n.createElement("div",{className:(0,s.default)(o.default.button,{[o.default.fullscreen]:this.props.isFullscreenMode}),onClick:this.props.onClick},n.createElement(l.default,{name:this.props.isInstagram?"logo-instagram":"logo-facebook"}))}}t.default=d},40915:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return n.createElement(u.default,{className:(0,s.default)(o.default.button,{[o.default.fullscreen]:e.isFullscreenMode}),onClick:e.onClick},e.isFullscreenMode?n.createElement(d.default,{"aria-label":l.default.t(7),name:"video-exit-fullscreen"}):n.createElement(d.default,{"aria-label":l.default.t(6),name:"video-fullscreen"}))};var s=i(a(72779)),n=r(a(2784)),o=i(a(30404)),l=i(a(17957)),d=i(a(82631)),u=i(a(5174))},64857:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.PIP_BUTTON_THEME=void 0;var s=i(a(2784)),n=r(a(72779)),o=r(a(74515)),l=r(a(82631)),d={PLAYER:"PLAYER",PREVIEW:"PREVIEW"};t.PIP_BUTTON_THEME=d;class u extends s.PureComponent{render(){return s.createElement("div",{className:(0,n.default)(o.default.pipBtn,{[o.default.player]:this.props.theme===d.PLAYER,[o.default.preview]:this.props.theme===d.PREVIEW}),onClick:this.props.onClick},s.createElement(l.default,{name:"video-pip"}))}}t.default=u},57008:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.icon?s.createElement("div",{className:n.default.icon},e.icon):null;return s.createElement("div",{className:n.default.note},t,s.createElement("div",{className:n.default.noteBody},e.children))};var s=i(a(2784)),n=r(a(31159))},90975:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(72779)),n=r(a(2784)),o=i(a(12229));class l extends n.PureComponent{render(){var e=null;switch(this.props.theme){case"upper":e=n.createElement("div",{key:"upper-shade",className:(0,s.default)(o.default.fullWidthShade,o.default.stripHeightShade,o.default.upperShade)});break;case"lower":e=n.createElement("div",{key:"lower-shade",className:(0,s.default)(o.default.fullWidthShade,o.default.stripHeightShade,o.default.lowerShade)});break;case"full-rounded":e=n.createElement("div",{key:"full-rounded-shade",className:(0,s.default)(o.default.fullWidthShade,o.default.fullHeightShade,o.default.roundedCorners)});break;case"full-sharp":e=n.createElement("div",{key:"full-sharp-shade",className:(0,s.default)(o.default.fullWidthShade,o.default.fullHeightShade)})}return e}}t.default=l},72292:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.YOUTUBE_URL_TIME_PARAM_PATTERN=t.YOUTUBE_URL_TIME_PARAM_NAME=t.URL_PATTERNS=t.YOUTUBE_VIDEO_DEFAULT_ASPECT_RATIO=t.PLAYER_TYPE=void 0;var r=a(28103).Mirrored(["FLOATER","OG_FLOATER","MEDIA_VIEWER"]);t.PLAYER_TYPE=r;t.YOUTUBE_VIDEO_DEFAULT_ASPECT_RATIO=16/9;t.URL_PATTERNS={ONLINE_VIDEO_URL:{YOUTUBE:[/^https?:\/\/youtu\.be\/(.{11})/,/^https?:\/\/youtube\.com\/watch\?v=(.{11})/,/^https?:\/\/m\.youtube\.com\/watch\?v=(.{11})/]}};t.YOUTUBE_URL_TIME_PARAM_NAME="t";t.YOUTUBE_URL_TIME_PARAM_PATTERN=/^(\d+h)?(\d+m)?(\d+s)?(\d+)?$/},67381:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=a(72292),o=r(a(47025)),l=r(a(41885)),d=r(a(40207));class u extends s.Component{render(){var{msg:e,mediaData:t}=this.props,a=t.preview?"url(".concat(t.preview.url(),")"):void 0;return s.createElement(o.default,{aspectRatio:t.aspectRatio,previewUrl:a,animationStartStyle:this.props.animationStartStyle},s.createElement(l.default,{msg:e,mediaData:t,startTime:this.props.startTime,onClose:this.props.onClose,onError:this.props.onError,onOpenMediaViewer:this.props.onOpenMediaViewer,onMissingMedia:this.props.onMissingMedia,onUnsupportedMedia:this.props.onUnsupportedMedia,autoPlay:this.props.autoPlay,type:n.PLAYER_TYPE.FLOATER}))}}u.CONCERNS={mediaData:["preview","aspectRatio"]};var c=(0,d.default)(u,u.CONCERNS);t.default=c},75651:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(47025)),o=r(a(1236)),l=r(a(30850));class d extends s.Component{constructor(e){super(e),this._handleAspectRatio=e=>{((null==this.state.aspectRatio||0===this.state.aspectRatio)&&e||null!=this.state.aspectRatio&&0!==this.state.aspectRatio&&e&&Math.abs(e-this.state.aspectRatio)>.01)&&this.setState({aspectRatio:e})};var t=(0,o.default)(this.props.ogVideoInfo.previewUrl),a=t.width&&t.height?t.width/t.height:void 0;this.state={aspectRatio:a}}render(){return s.createElement(n.default,{aspectRatio:this.state.aspectRatio,previewUrl:this.props.ogVideoInfo.previewUrl,animationStartStyle:this.props.animationStartStyle},s.createElement(l.default,{ogVideoInfo:this.props.ogVideoInfo,startTime:this.props.startTime,onClose:this.props.onClose,onError:this.props.onError,onAspectRatio:this._handleAspectRatio,autoPlay:!0}))}}t.default=d},47025:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MAX_ASPECT_RATIO=t.MIN_ASPECT_RATIO=t.MIN_WIDTH=t.MIN_HEIGHT=t.LONGER_SIDE_DEFAULT_LENGTH=t.MARGIN_Y=t.MARGIN_X=void 0;var s=i(a(2784)),n=r(a(79711)),o=r(a(12904)),l=(r(a(8603)),r(a(85472)));t.MARGIN_X=10;t.MARGIN_Y=10;var d=330;t.LONGER_SIDE_DEFAULT_LENGTH=d;t.MIN_HEIGHT=145;var u=145;t.MIN_WIDTH=u;var c=.4393939393939394;t.MIN_ASPECT_RATIO=c;var h=2.2758620689655173;t.MAX_ASPECT_RATIO=h;class f extends s.Component{constructor(e){super(e),this.state=f.getInitialMediaStyle(e.aspectRatio,e.initialPiPStyle)}static getDerivedStateFromProps(e){return f.getInitialMediaStyle(e.aspectRatio,e.initialPiPStyle)}static getInitialMediaStyle(e,t){var a,r,i,s=function(e){var t=1;null!=e&&(t=e<c?c:e>h?h:e);return t}(e);return t?{initialPiPStyle:t,aspectRatio:s}:(n.default.getConversationHeaderOffset((e=>{a=e})),s>1?i=(r=d)/s:r=(i=d)*s,a||(a={right:window.innerWidth,bottom:0}),{initialPiPStyle:{width:r,left:a.right<window.innerWidth?a.right-r-10:window.innerWidth-r-10,bottom:window.innerHeight-10-i-a.bottom},aspectRatio:s})}render(){var e=this.state.aspectRatio;if(!e)return null;var t,a=145*e,r=u<a?a:u;if(null!=this.props.aspectRatio&&0!==this.props.aspectRatio&&e===c&&e>this.props.aspectRatio||null!=this.props.aspectRatio&&0!==this.props.aspectRatio&&e===h&&e<this.props.aspectRatio){var i;if(this.props.previewUrl){var n={backgroundImage:this.props.previewUrl};i=s.createElement("div",{className:o.default.bgImg,style:n})}t=s.createElement("div",{className:o.default.bottomLayer},i)}return s.createElement(l.default,{aspectRatio:e,margin:{x:10,y:10},minWidth:r,className:o.default.videoFloater,initialStyle:this.state.initialPiPStyle,animationStartStyle:this.props.animationStartStyle,escapeConversationHeader:!0},t,this.props.children)}}t.default=f},1236:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=document.createElement("img");return t.src=e,{width:t.naturalWidth,height:t.naturalHeight}}},12023:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.isParsableOnlineVideoURL=function(e,t,a){if(!o.default.supportsFeature(o.default.F.VIDEO_PLAYBACK_URL))return!1;if(a)return!1;if(e===n.ExtendedTextMessagePreviewType.VIDEO&&t){var r=l.default.withoutWww(l.default.hostname(t));if(r===s.default.HOSTNAME.INSTAGRAM||r===s.default.HOSTNAME.STREAMABLE||r===s.default.HOSTNAME.FACEBOOK||r===s.default.HOSTNAME.FBWATCH||r===s.default.HOSTNAME.FBWATCH_ALT||r===s.default.HOSTNAME.LASSOVIDEOS||r===s.default.HOSTNAME.LASSO_SHORTENED||r===s.default.HOSTNAME.SHARECHAT)return!0}if(t)for(var d in i.URL_PATTERNS.ONLINE_VIDEO_URL)for(var u=i.URL_PATTERNS.ONLINE_VIDEO_URL[d],c=0;c<u.length;c++)if(u[c].test(l.default.withoutWww(t)))return!0;return!1};var i=a(72292),s=r(a(50935)),n=a(28703),o=r(a(18120)),l=r(a(74185))},41885:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FULLSCREEN_CONTROLS_DISPLAY_TIMEOUT=void 0;var s=i(a(2784)),n=r(a(79711)),o=r(a(69345)),l=r(a(32125)),d=a(96645),u=r(a(10853)),c=r(a(84443)),h=r(a(24406)),f=r(a(40207)),p=a(64658);t.FULLSCREEN_CONTROLS_DISPLAY_TIMEOUT=3e3;class m extends s.Component{constructor(...e){super(...e),this._setRefVideoPlayer=e=>{this._refVideoPlayer=e},this._handleOpenMediaViewer=()=>{this.props.onOpenMediaViewer&&this.props.onOpenMediaViewer(),n.default.mediaViewerModal({msg:(0,p.unproxy)(this.props.msg),currentTime:this.getCurrentTimeFromVideo()})},this._handleOpenVideoFloater=()=>{this.props.onOpenVideoFloater&&this.props.onOpenVideoFloater(),c.default.openPiP((0,p.unproxy)(this.props.msg),this.getCurrentTimeFromVideo(),null)},this._handleMissingMedia=()=>{this.props.onMissingMedia&&this.props.onMissingMedia(),n.default.openModal(s.createElement(o.default,{msg:this.props.msg})),this.props.onClose()},this._handleUnsupportedMedia=()=>{this.props.onUnsupportedMedia&&this.props.onUnsupportedMedia(),n.default.openModal(s.createElement(u.default,{msg:this.props.msg})),this.props.onClose()},this._handleNeedPokeMedia=()=>{this.props.onNeedPokeMedia&&this.props.onNeedPokeMedia(),n.default.openModal(s.createElement(l.default,{msg:this.props.msg})),this.props.onClose()},this.handleLoadedMetadata=e=>{this.props.onLoadedMetadata&&this.props.onLoadedMetadata(e)}}getContainerElement(){var e;return null===(e=this._refVideoPlayer)||void 0===e?void 0:e.getContainerElement()}componentDidUpdate(){switch(this.props.mediaData.mediaStage){case d.MEDIA_DATA_STAGE.ERROR_MISSING:this._handleMissingMedia();break;case d.MEDIA_DATA_STAGE.ERROR_UNSUPPORTED:this._handleUnsupportedMedia();break;case d.MEDIA_DATA_STAGE.NEED_POKE:this._handleNeedPokeMedia()}}getCurrentTimeFromVideo(){return this._refVideoPlayer?this._refVideoPlayer.getCurrentTimeFromVideo():0}render(){var e={msg:this.props.msg,mediaData:this.props.mediaData};return s.createElement(h.default,{ref:this._setRefVideoPlayer,type:this.props.type,msgVideoInfo:e,startTime:this.props.startTime,onClose:this.props.onClose,onVideoEnded:this.props.onVideoEnded,onError:this.props.onError,onOpenMediaViewer:this._handleOpenMediaViewer,onOpenVideoFloater:this._handleOpenVideoFloater,onMissingMedia:this._handleMissingMedia,onUnsupportedMedia:this._handleUnsupportedMedia,onLoadedMetadata:this.handleLoadedMetadata,onFullscreenToggle:this.props.onFullscreenToggle,autoPlay:this.props.autoPlay,overlays:this.props.overlays,noPip:this.props.noPip})}}m.CONCERNS={msg:["id"],mediaData:["mediaStage","preview","streamable"]};var _=(0,f.default)(m,m.CONCERNS);t.default=class extends _{getContainerElement(){return this.getComponent.getContainerElement()}}},31461:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(50935)),o=a(95595),l=r(a(40207)),d=r(a(81470));class u extends s.PureComponent{constructor(...e){super(...e),this.mediaBlobWasDownloadedBeforeMount=Boolean(this.props.mediaData.mediaBlob),this.videoRef=null,this.setRefVideo=e=>{if(this.videoRef!==e&&(this.videoRef=e,e)){var t=(0,o.getVideoVolumeSettings)();t&&("number"==typeof t.volume&&e.setVolume(t.volume),"boolean"==typeof t.muted&&e.setMuted(t.muted))}},this.onLoadedMetadata=(e,t)=>{var a=this.props.mediaData.aspectRatio,r=0!==e.videoWidth&&0!==e.videoHeight?e.videoWidth/e.videoHeight:void 0;(!a&&null!=r&&0!==r||a&&null!=r&&0!==r&&Math.abs(r-a)>.01)&&this.props.mediaData.set({aspectRatio:r}),this.props.onLoadedMetadata(e,t)},this.play=()=>{var e=this.videoRef;e&&e.getPaused()&&e.play()},this.pause=()=>{var e=this.videoRef;e&&(e.getPaused()||e.pause())},this.getPaused=()=>!this.videoRef||this.videoRef.getPaused(),this.getCurrentTime=()=>this.videoRef?this.videoRef.getCurrentTime():0,this.setCurrentTime=e=>{this.videoRef&&this.videoRef.setCurrentTime(e)},this.getDuration=()=>this.videoRef?this.videoRef.getDuration():0,this.getVolume=()=>this.videoRef?this.videoRef.getVolume():0,this.setVolume=e=>{this.videoRef&&this.videoRef.setVolume(e)},this.getMuted=()=>!!this.videoRef&&this.videoRef.getMuted(),this.setMuted=e=>{this.videoRef&&this.videoRef.setMuted(e)}}render(){var e,t=this.props,{mediaData:a}=t,r=a.mediaBlob,i=a.streamable&&a.isStreamable();return e=!this.mediaBlobWasDownloadedBeforeMount&&i||!r?a.streamable&&a.isStreamable()?"".concat(n.default.VIDEO_STREAM_URL,"?key=").concat(this.props.msg.id.toString()):void 0:r.url(),s.createElement(d.default,{ref:this.setRefVideo,url:e,startTime:this.props.startTime,poster:this.props.poster,className:this.props.className,onVolumeChange:this.props.onVolumeChange,onEnded:this.props.onEnded,onError:this.props.onError,onPause:this.props.onPause,onPlaying:this.props.onPlaying,onProgress:this.props.onProgress,onTimeUpdate:this.props.onTimeUpdate,onLoadedMetadata:this.onLoadedMetadata,autoPlay:this.props.autoPlay},t.children)}}u.CONCERNS={msg:["id"],mediaData:["mediaBlob","streamable","aspectRatio"]};var c=(0,l.default)(u,u.CONCERNS);t.default=class extends c{constructor(...e){super(...e),this.play=()=>{this.getComponent().play()},this.pause=()=>{this.getComponent().pause()},this.getPaused=()=>this.getComponent().getPaused(),this.getCurrentTime=()=>this.getComponent().getCurrentTime(),this.setCurrentTime=e=>{this.getComponent().setCurrentTime(e)},this.getDuration=()=>this.getComponent().getDuration(),this.getVolume=()=>this.getComponent().getVolume(),this.setVolume=e=>{this.getComponent().setVolume(e)},this.getMuted=()=>this.getComponent().getMuted(),this.setMuted=e=>{this.getComponent().setMuted(e)}}}},30850:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=a(72292),o=r(a(24406));class l extends s.PureComponent{render(){return s.createElement(o.default,{type:n.PLAYER_TYPE.OG_FLOATER,ogVideoInfo:this.props.ogVideoInfo,startTime:this.props.startTime,onClose:this.props.onClose,onVideoEnded:this.props.onVideoEnded,onError:this.props.onError,onAspectRatio:this.props.onAspectRatio,autoPlay:this.props.autoPlay})}}t.default=l},84443:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(28267));class s extends i.default{constructor(){super(),this.openPiP=(e,t,a)=>{this.manager&&this.manager.openPiP(e,t,a)},this.closePiP=()=>{this.manager&&this.manager.closePiP()},this._pausePiP=()=>{this.manager&&this.manager.pausePiP()},this.openYoutubePiP=(e,t,a,r)=>{this.manager&&this.manager.openYoutubePiP(e,t,a,r)},this.closeYoutubePiP=()=>{this.manager&&this.manager.closeYoutubePiP()},this.openOgVideoPiP=(e,t,a,r,i)=>{this.manager&&this.manager.openOgVideoPiP(e,t,a,r,i)},this.closeOgVideoPiP=()=>{this.manager&&this.manager.closeOgVideoPiP()},this.isOpened=e=>!!this.manager&&this.manager.isOpened(e)}register(e){this.manager=e}unregister(){this.manager=null}didOpen(e){this.trigger("".concat(e.id.toString(),"_pip_did_open"))}didClose(e){this.trigger("".concat(e.id.toString(),"_pip_did_close"))}didError(e){this.trigger("".concat(e.id.toString(),"_pip_did_error"))}}var n=new s;t.default=n},67802:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.PiPManager=void 0;var s=i(a(2784)),n=r(a(79711)),o=a(72292),l=r(a(67381)),d=r(a(75651)),u=r(a(47025)),c=r(a(17957)),h=r(a(20642)),f=r(a(40210)),p=r(a(58885)),m=r(a(84443)),_=r(a(93285)),v=i(a(75074)),g=r(a(74824)),E=r(a(6974));class y extends s.Component{constructor(e){super(e),this._onMediaViewerModal=e=>{var{msg:t}=e;this.state.msg&&this.state.msg.id.equals(t.id)&&this.closePiP()},this._closePiPFromMsg=e=>{this.state.msg&&this.state.msg.id.equals(e.id)?this.closePiP():this.state.youtubeVideoInfo&&this.state.youtubeVideoInfo.videoMsg.id.equals(e.id)?this.closeYoutubePiP():this.state.ogVideoInfo&&this.state.ogVideoInfo.videoMsg.id.equals(e.id)&&this.closeOgVideoPiP()},this.openPiP=(e,t,a)=>{this._previousPiPDidClose(),m.default.didOpen(e),e.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:f.default.WEBC_RMR_REASON_CODE.PIP,isUserInitiated:!0}),this.setState({msg:e,youtubeVideoInfo:null,ogVideoInfo:null,startTime:t,zoomRect:a})},this.closePiP=()=>{this.state.msg&&m.default.didClose(this.state.msg),this.setState({msg:null,youtubeVideoInfo:null,ogVideoInfo:null,startTime:null,zoomRect:null})},this.pausePiP=()=>{},this.isOpened=e=>!(!this.state.msg||!e.id.equals(this.state.msg.id))||(!(!this.state.youtubeVideoInfo||!e.id.equals(this.state.youtubeVideoInfo.videoMsg.id))||!(!this.state.ogVideoInfo||!e.id.equals(this.state.ogVideoInfo.videoMsg.id))),this.openYoutubePiP=(e,t,a,r)=>{this._previousPiPDidClose(),m.default.didOpen(t),this.setState({msg:null,youtubeVideoInfo:{videoId:e,videoMsg:t},ogVideoInfo:null,startTime:a,zoomRect:r})},this.closeYoutubePiP=()=>{this.state.youtubeVideoInfo&&m.default.didClose(this.state.youtubeVideoInfo.videoMsg),this.setState({msg:null,youtubeVideoInfo:null,ogVideoInfo:null,startTime:null,zoomRect:null})},this.openOgVideoPiP=(e,t,a,r,i)=>{this._previousPiPDidClose(),m.default.didOpen(a);var s="data:image/jpeg;base64,".concat(t);this.setState({msg:null,youtubeVideoInfo:null,ogVideoInfo:{videoUrl:e,previewUrl:s,videoMsg:a},startTime:r,zoomRect:i})},this.closeOgVideoPiP=()=>{this.state.ogVideoInfo&&m.default.didClose(this.state.ogVideoInfo.videoMsg),this.setState({msg:null,youtubeVideoInfo:null,ogVideoInfo:null,startTime:null,zoomRect:null})},this._previousPiPDidClose=()=>{this.state.msg&&m.default.didClose(this.state.msg),this.state.youtubeVideoInfo&&m.default.didClose(this.state.youtubeVideoInfo.videoMsg),this.state.ogVideoInfo&&m.default.didClose(this.state.ogVideoInfo.videoMsg)},this.handleMsgVideoPiPError=()=>{this.state.msg&&m.default.didError(this.state.msg)},this._handleOgVideoPiPError=()=>{this.state.ogVideoInfo&&m.default.didError(this.state.ogVideoInfo.videoMsg)},this.state={msg:null,youtubeVideoInfo:null,ogVideoInfo:null,startTime:null,zoomRect:null}}componentDidMount(){m.default.register(this),this.props.listeners.add(n.default,"media_viewer_modal",this._onMediaViewerModal),this.props.listeners.add(p.default,"remove",(e=>{this._closePiPFromMsg(e)})),this.props.listeners.add(p.default,"change:asRevoked",(e=>{if(e.asRevoked){if(!e.isSentByMe){var t=this.state.msg&&this.state.msg.id.equals(e.id),a=this.state.youtubeVideoInfo&&this.state.youtubeVideoInfo.videoMsg.id.equals(e.id),r=this.state.ogVideoInfo&&this.state.ogVideoInfo.videoMsg.id.equals(e.id);(a||t||r)&&n.default.openToast(s.createElement(v.default,{id:(0,v.genId)(),msg:c.default.t(1137)}))}this._closePiPFromMsg(e)}}))}componentWillUnmount(){m.default.unregister()}_renderVideoPlayer(){var{msg:e,youtubeVideoInfo:t,ogVideoInfo:a}=this.state;return e?s.createElement(l.default,{key:e.id.toString(),msg:e,mediaData:e.mediaData,animationStartStyle:this._getAnimationStartStyle(),startTime:this.state.startTime,onClose:this.closePiP,onError:this._handleOgVideoPiPError,onOpenMediaViewer:this.closePiP,onMissingMedia:this.closePiP,onUnsupportedMedia:this.closePiP,autoPlay:!0}):t?s.createElement(u.default,{key:t.videoId,aspectRatio:o.YOUTUBE_VIDEO_DEFAULT_ASPECT_RATIO,animationStartStyle:this._getAnimationStartStyle()},s.createElement(E.default,{key:t.videoId,youtubeVideoId:t.videoId,startTime:this.state.startTime,onClose:this.closeYoutubePiP,autoPlay:!0})):a?s.createElement(d.default,{key:a.videoMsg.id.toString(),ogVideoInfo:a,startTime:this.state.startTime,onClose:this.closeOgVideoPiP,onError:this._handleOgVideoPiPError,animationStartStyle:this._getAnimationStartStyle(),autoPlay:!0}):null}_getAnimationStartStyle(){return this.state.zoomRect?{height:this.state.zoomRect.bottom-this.state.zoomRect.top,width:this.state.zoomRect.right-this.state.zoomRect.left,left:this.state.zoomRect.left,bottom:window.innerHeight-this.state.zoomRect.bottom}:null}render(){return s.createElement(g.default,{transitionName:"pip",className:_.default.playerWrapper,component:"div"},this._renderVideoPlayer())}}t.PiPManager=y;var S=(0,h.default)(y);t.default=S},24406:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FULLSCREEN_CONTROLS_DISPLAY_TIMEOUT=void 0;var s=i(a(70417)),n=i(a(54073)),o=i(a(72779)),l=r(a(2784)),d=i(a(20174)),u=a(72292),c=i(a(35387)),h=i(a(6016)),f=i(a(40915)),p=i(a(17957)),m=i(a(20642)),_=i(a(13934)),v=r(a(68084)),g=a(96645),E=i(a(31461)),y=r(a(64857)),S=i(a(57008)),C=i(a(90975)),T=i(a(41118)),M=i(a(82631)),b=i(a(77626)),P=i(a(81470)),A=i(a(74824)),I=i(a(1649));t.FULLSCREEN_CONTROLS_DISPLAY_TIMEOUT=3e3;class O extends l.Component{constructor(e){super(e),this._resetMouseMoveRecently=(0,n.default)((()=>{this.setState({mouseMoveRecently:!1})}),3e3),this.buffered=[],this.setRefVideo=e=>{this.refVideo=e},this.setRefContainer=e=>{this.refContainer=e,this.refContainer},this.handleLoadedMetadata=(e,t)=>{var a=null!=this.props.startTime?this.props.startTime:0;this.setState({videoMetadata:{duration:e.duration,currentTime:a,volume:e.volume,muted:e.muted,bufferedTime:0}}),this.props.onAspectRatio&&e.videoWidth&&e.videoHeight&&this.props.onAspectRatio(e.videoWidth/e.videoHeight),this.props.onLoadedMetadata&&this.props.onLoadedMetadata(t)},this.handleTimeUpdate=e=>{var t=null,a=this.state.videoMetadata;if(a){var r=this._getRelevantBufferedTime(this.buffered,e);t=(0,s.default)((0,s.default)({},a),{},{currentTime:e,bufferedTime:r})}this.setState({videoMetadata:t})},this._handleVolumeChange=e=>{var t=null;this.state.videoMetadata&&(t=(0,s.default)((0,s.default)({},this.state.videoMetadata),{},{volume:e.volume,muted:e.muted})),this.setState({videoMetadata:t})},this._handleEnded=()=>{this.props.onVideoEnded&&this.props.onVideoEnded(),this.setState({isVideoPlaying:!1})},this._handleError=e=>{20!==e?(this.setState({isVideoError:!0}),this.props.onError&&this.props.onError()):this.setState({isVideoPlaying:!1})},this.handlePause=()=>{this.setState({isVideoPlaying:!1})},this._handlePlaying=()=>{this.setState({isVideoPlaying:!0})},this.handleProgress=e=>{this.buffered=e;var t=this.state.videoMetadata;if(t){var a=t.currentTime,r=this._getRelevantBufferedTime(e,a),i=(0,s.default)((0,s.default)({},t),{},{bufferedTime:r});this.setState({videoMetadata:i})}},this.handleEnterFullscreen=e=>{e.stopPropagation(),h.default.requestFullscreen(this.refContainer)},this.handleExitFullscreen=e=>{e.stopPropagation(),h.default.exitFullscreen()},this.handleFullscreenToggleButtonClick=e=>{this.state.isFullscreenMode?this.handleExitFullscreen(e):this.handleEnterFullscreen(e)},this.state={videoMetadata:null,isVideoPlaying:!1,isVideoError:!1,isMouseOver:!1,mouseMoveRecently:!1,isFullscreenMode:h.default.isFullscreenMode}}getContainerElement(){return this.refContainer}componentDidMount(){this.props.listeners.add(h.default,"fullscreen_change",(()=>{h.default.isFullscreenMode&&h.default.fullscreenElement===this.refContainer?this.setState({isFullscreenMode:!0},(()=>{var e,t;null===(e=(t=this.props).onFullscreenToggle)||void 0===e||e.call(t,this.state.isFullscreenMode)})):h.default.isFullscreenMode||this.setState({isFullscreenMode:!1},(()=>{var e,t;null===(e=(t=this.props).onFullscreenToggle)||void 0===e||e.call(t,this.state.isFullscreenMode)}))}))}componentWillUnmount(){this._resetMouseMoveRecently.cancel()}getCurrentTimeFromVideo(){return this.refVideo?this.refVideo.getCurrentTime():0}getVolumeFromVideo(){return this.refVideo?this.refVideo.getVolume():0}getMutedFromVideo(){return!!this.refVideo&&this.refVideo.getMuted()}_getRelevantBufferedTime(e,t){for(var a=0,r=0;r<e.length;r++)if(t>=e[r][0]&&t<e[r][1]){a=e[r][1];break}return a}_renderMedia(){switch(this.props.type){case u.PLAYER_TYPE.FLOATER:case u.PLAYER_TYPE.MEDIA_VIEWER:return this._renderMsgMedia();case u.PLAYER_TYPE.OG_FLOATER:return this._renderOgMedia()}return null}_renderOgMedia(){var e=this.props.ogVideoInfo;if(!e)return null;var t={backgroundImage:"url(".concat(e.previewUrl,")")};return l.createElement(l.Fragment,null,this.state.isFullscreenMode?null:l.createElement("div",{className:T.default.preview,style:t}),""!==e.videoUrl?l.createElement(P.default,{ref:this.setRefVideo,key:"floating-media",url:e.videoUrl,startTime:this.props.startTime,onEnded:this._handleEnded,onError:this._handleError,onLoadedMetadata:this.handleLoadedMetadata,onPause:this.handlePause,onPlaying:this._handlePlaying,onProgress:this.handleProgress,onTimeUpdate:this.handleTimeUpdate,onVolumeChange:this._handleVolumeChange,autoPlay:this.props.autoPlay},p.default.t(1420)):null)}_renderMsgMedia(){var e=this.props.msgVideoInfo;if(!e)return null;var{preview:t}=e.mediaData;if(this._isMediaRenderable()){var a=t?{backgroundImage:"url(".concat(t.url(),")")}:void 0;return l.createElement(l.Fragment,null,this.state.isFullscreenMode||this.props.type!==u.PLAYER_TYPE.FLOATER?null:l.createElement("div",{className:T.default.preview,style:a}),l.createElement(E.default,{ref:this.setRefVideo,key:"floating-media",msg:e.msg,mediaData:e.mediaData,className:T.default.videoTag,startTime:this.props.startTime,onEnded:this._handleEnded,onError:this._handleError,onLoadedMetadata:this.handleLoadedMetadata,onPause:this.handlePause,onPlaying:this._handlePlaying,onProgress:this.handleProgress,onTimeUpdate:this.handleTimeUpdate,onVolumeChange:this._handleVolumeChange,autoPlay:this.props.autoPlay},p.default.t(1420)))}return t?l.createElement("img",{key:"floating-media",alt:p.default.t(1760),src:t.url(),draggable:"false"}):null}_isMediaRenderable(){switch(this.props.type){case u.PLAYER_TYPE.FLOATER:case u.PLAYER_TYPE.MEDIA_VIEWER:var e=this.props.msgVideoInfo;if(!e)return!1;var t=e.mediaData;return t.mediaStage===g.MEDIA_DATA_STAGE.RESOLVED||t.streamable&&t.isStreamable();case u.PLAYER_TYPE.OG_FLOATER:return!0}return!0}_renderMediaStage(){switch(this.props.type){case u.PLAYER_TYPE.FLOATER:case u.PLAYER_TYPE.MEDIA_VIEWER:var e=this.props.msgVideoInfo;return e?l.createElement("div",{className:T.default.mediaStageWrapper},l.createElement(_.default,{msg:e.msg,mediaData:e.mediaData})):null;case u.PLAYER_TYPE.OG_FLOATER:var t=this.props.ogVideoInfo;return t&&""===t.videoUrl?l.createElement("div",{className:T.default.mediaStageWrapper},l.createElement(v.Pending,null)):null}return null}_renderVideoControls(){var e,t;if(!this._isMediaRenderable())return null;var a=this.state.videoMetadata;return a?l.createElement(I.default,{refVideo:this.refVideo,videoMetadata:a,isFullscreenMode:this.state.isFullscreenMode,isVideoPlaying:this.state.isVideoPlaying,ctwaSourceUrl:null===(e=this.props.ogVideoInfo)||void 0===e||null===(t=e.videoMsg.ctwaContext)||void 0===t?void 0:t.sourceUrl}):null}renderErrorMessage(){return l.createElement(S.default,null,p.default.t(1134),this._renderErrorMessageLink())}_renderErrorMessageLink(){var e,t;if(this.props.type!==u.PLAYER_TYPE.OG_FLOATER)return null;if(!this.props.ogVideoInfo)return null;var a=null!==(e=null===(t=this.props.ogVideoInfo.videoMsg.ctwaContext)||void 0===t?void 0:t.sourceUrl)&&void 0!==e?e:this.props.ogVideoInfo.videoMsg.matchedText;return l.createElement(c.default,{className:T.default.errorLink,href:a},l.createElement("span",null,p.default.t(1135)),l.createElement(M.default,{directional:!0,display:"inline",name:"chevron-right-text",className:T.default.errorLinkChevron}))}render(){var e,t,a,r=this._isMediaRenderable();r&&(t=l.createElement(f.default,{isFullscreenMode:this.state.isFullscreenMode,onClick:this.handleFullscreenToggleButtonClick}));var i,s=l.createElement(d.default,{isFullscreenMode:this.state.isFullscreenMode,onClick:e=>{e.stopPropagation(),this.props.onClose()}});switch(this.props.type){case u.PLAYER_TYPE.OG_FLOATER:case u.PLAYER_TYPE.FLOATER:e=l.createElement(l.Fragment,null,b.default.isSafari?null:t,s);break;case u.PLAYER_TYPE.MEDIA_VIEWER:var n;n=this.state.isFullscreenMode?s:!this.props.noPip&&r?l.createElement(y.default,{onClick:e=>{e.stopPropagation(),this.props.onClose&&this.props.onClose(),this.props.onOpenVideoFloater&&this.props.onOpenVideoFloater()},theme:y.PIP_BUTTON_THEME.PLAYER}):null,e=l.createElement(l.Fragment,null,t,n),a=e=>{e.stopPropagation(),this.refVideo&&(this.state.isVideoPlaying?this.refVideo.pause():this.refVideo.play())}}i=this.state.isFullscreenMode?l.createElement(l.Fragment,null,l.createElement(C.default,{theme:"upper"}),l.createElement(C.default,{theme:"lower"})):this.props.type===u.PLAYER_TYPE.MEDIA_VIEWER?l.createElement(C.default,{theme:"full-sharp"}):l.createElement(C.default,{theme:"full-rounded"});var c=this.state.isVideoError?this.renderErrorMessage():null;return l.createElement("div",{ref:this.setRefContainer,key:"elementsWrapped",className:(0,o.default)(T.default.container,{[T.default.fullscreen]:this.state.isFullscreenMode}),onMouseEnter:()=>{this.setState({isMouseOver:!0})},onMouseLeave:()=>{this.setState({isMouseOver:!1})},onMouseDown:e=>{this.state.isFullscreenMode&&e.stopPropagation()},onMouseMove:()=>{this.state.isMouseOver||this.setState({isMouseOver:!0}),this.state.mouseMoveRecently||this.setState({mouseMoveRecently:!0}),this._resetMouseMoveRecently()},onClick:a},l.createElement("div",{className:T.default.videoFloaterMedia},this._renderMedia()),this._renderMediaStage(),c,this.props.overlays,l.createElement(A.default,{transitionName:"fade-fast"},this.state.isMouseOver&&this.state.mouseMoveRecently?l.createElement(l.Fragment,null,i,this._renderVideoControls(),e):null))}}var N=(0,m.default)(O);t.default=class extends N{constructor(...e){super(...e),this.getCurrentTimeFromVideo=()=>this.getComponent().getCurrentTimeFromVideo(),this.getContainerElement=()=>this.getComponent().getContainerElement()}}},81470:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(13888)),n=i(a(54073)),o=r(a(2784)),l=i(a(54374)),d=i(a(79711)),u=a(95595),c=i(a(20642)),h=(0,n.default)(((e,t)=>{(0,u.setVideoVolumeSettings)(e,t)}),500);class f extends o.PureComponent{constructor(...e){super(...e),this.videoRef=null,this.setRefVideo=e=>{if(this.videoRef!==e&&(this.videoRef=e,e)){var t=(0,u.getVideoVolumeSettings)();t&&("number"==typeof t.volume&&e.setVolume(t.volume),"boolean"==typeof t.muted&&e.setMuted(t.muted))}},this.onVolumeChange=()=>{var e=this.videoRef;if(e){var t=e.getVolume(),a=e.getMuted();h(t,a),this.props.onVolumeChange({volume:t,muted:a})}},this.onOtherPlaying=e=>{e!==this&&this.videoRef&&this.videoRef.pause()},this.onPlaying=()=>{d.default.mediaPlaying(this),this.props.onPlaying()},this.setStartTime=()=>{this.videoRef&&"number"==typeof this.props.startTime&&this.videoRef.setCurrentTime(this.props.startTime)},this.play=()=>{var e=this.videoRef;e&&e.getPaused()&&e.play()},this.pause=()=>{var e=this.videoRef;e&&(e.getPaused()||e.pause())},this.getPaused=()=>!this.videoRef||this.videoRef.getPaused(),this.onLoadedMetadata=e=>{null!=this.props.startTime&&this.setStartTime();var t=(0,s.default)(e.target,["duration","volume","muted","videoWidth","videoHeight"]);this.props.onLoadedMetadata(t,e)},this.getCurrentTime=()=>this.videoRef?this.videoRef.getCurrentTime():0,this.setCurrentTime=e=>{this.videoRef&&this.videoRef.setCurrentTime(e)},this.getDuration=()=>this.videoRef?this.videoRef.getDuration():0,this.getVolume=()=>this.videoRef?this.videoRef.getVolume():0,this.setVolume=e=>{this.videoRef&&this.videoRef.setVolume(e)},this.getMuted=()=>!!this.videoRef&&this.videoRef.getMuted(),this.setMuted=e=>{this.videoRef&&this.videoRef.setMuted(e)},this.onProgress=()=>{if(this.videoRef){var e=this.videoRef.getBuffered(),t=[];if(e)for(var a=0;a<e.length;a++)t.push([e.start(a),e.end(a)]);this.props.onProgress(t)}},this.onTimeUpdate=e=>{var t=e.target.currentTime;this.props.onTimeUpdate(t)},this.onError=e=>{var t=this.videoRef&&this.videoRef.refVideo&&this.videoRef.refVideo.error?this.videoRef.refVideo.error.code:null;null!=t||null==e.code?this.props.onError(t):this.props.onError(e.code)}}componentDidMount(){this.props.listeners.add(d.default,"mediaPlaying",this.onOtherPlaying),this.props.listeners.add(d.default,"pttRecording",this.pause)}componentWillUnmount(){h.flush()}componentDidUpdate(e){e.startTime!==this.props.startTime&&this.setStartTime()}render(){return o.createElement(l.default,{ref:this.setRefVideo,src:this.props.url,poster:this.props.poster,className:this.props.className,onVolumeChange:this.onVolumeChange,onEnded:this.props.onEnded,onError:this.onError,onPause:this.props.onPause,onPlaying:this.onPlaying,onProgress:this.onProgress,onTimeUpdate:this.onTimeUpdate,onLoadedMetadata:this.onLoadedMetadata,autoPlay:this.props.autoPlay},this.props.children)}}var p=(0,c.default)(f);t.default=class extends p{constructor(...e){super(...e),this.play=()=>{this.getComponent().play()},this.pause=()=>{this.getComponent().pause()},this.getPaused=()=>this.getComponent().getPaused(),this.getCurrentTime=()=>this.getComponent().getCurrentTime(),this.setCurrentTime=e=>{this.getComponent().setCurrentTime(e)},this.getDuration=()=>this.getComponent().getDuration(),this.getVolume=()=>this.getComponent().getVolume(),this.setVolume=e=>{this.getComponent().setVolume(e)},this.getMuted=()=>this.getComponent().getMuted(),this.setMuted=e=>{this.getComponent().setMuted(e)}}}},88030:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.THUMB_RADIUS_FULLSCREEN=t.THUMB_RADIUS_WINDOW=void 0;var s=i(a(21842)),n=i(a(72779)),o=r(a(2784)),l=i(a(19899)),d=i(a(50935)),u=i(a(53616)),c=a(35387),h=i(a(17957)),f=i(a(22948)),p=i(a(77626)),m=i(a(74185)),_=i(a(58226)),v=parseFloat(_.default["-thumb-radius-window"].replace(/px$/,""));t.THUMB_RADIUS_WINDOW=v;var g=parseFloat(_.default["-thumb-radius-fullscreen"].replace(/px$/,""));t.THUMB_RADIUS_FULLSCREEN=g;class E extends o.PureComponent{constructor(e){super(e),this.handlePause=()=>{this.props.onPause()},this._handlePlay=()=>{this.props.onPlay()},this._isVideoPlayingBeforeDrag=null,this._handleProgressChange=e=>{var t=parseFloat(e.target.value);this.props.onProgressChange(t);var a=Math.abs(this.state.bufferedTime-this.props.duration)<.1?this.state.bufferedTime:0;this.setState({progress:t,bufferedTime:a})},this._handleProgressMouseUp=()=>{this.setState({isDraggingProgress:!1}),null!=this._isVideoPlayingBeforeDrag&&(this._isVideoPlayingBeforeDrag&&this._handlePlay(),this._isVideoPlayingBeforeDrag=null)},this._handleProgressMouseDown=()=>{this.setState({isDraggingProgress:!0}),this._isVideoPlayingBeforeDrag=this.props.isVideoPlaying,this._isVideoPlayingBeforeDrag&&this.handlePause()},this._handleVolumeValueChange=e=>{var t=parseFloat(e.target.value);this.props.onVolumeValueChange(t),this.setState({volume:t})},this._handleMute=()=>{this.props.onMutedValueChange(!0),this.setState({muted:!0})},this._handleUnmute=()=>{this.props.onMutedValueChange(!1),this.setState({muted:!1})},this._stopEventPropagation=e=>{e.stopPropagation()},this._renderTooltip=()=>{var e=this.state.mouseOverProgressRatio;if(void 0===e)return o.createElement("div",{className:_.default.tooltipWrapper});var t=l.default.durationStr(e*this.props.duration);return o.createElement("div",{className:_.default.tooltipWrapper,style:{left:100*e+"%"}},o.createElement("div",{className:(0,n.default)(_.default.tooltipTextBoxGeneral,_.default.tooltipTextBoxPosAndSize)},t),o.createElement("div",{className:(0,n.default)(_.default.tooltipTailGeneral,_.default.tooltipTailPosAndSize)}))},this._renderVolume=()=>{var e;e=this.state.muted||0===this.state.volume?o.createElement(f.default,{"aria-label":h.default.t(11),name:"video-volume-muted",display:"inline",onClick:()=>{this._handleUnmute(),0===this.props.volume&&this.props.onVolumeValueChange(.25)}}):this.state.volume<.5?o.createElement(f.default,{"aria-label":h.default.t(8),name:"video-volume-1",display:"inline",onClick:this._handleMute}):this.state.volume>=.5&&this.state.volume<1?o.createElement(f.default,{"aria-label":h.default.t(8),name:"video-volume-2",display:"inline",onClick:this._handleMute}):o.createElement(f.default,{"aria-label":h.default.t(8),name:"video-volume",display:"inline",onClick:this._handleMute});var t={width:100*this.state.volume+"%"},a=this.state.isMouseOverVolumeControl&&!this.state.muted,r=a?o.createElement("div",{className:_.default.volumeBarContainer},o.createElement("div",{className:(0,n.default)(_.default.volumeLowerTrack,{[_.default.lowerTrackLongest]:1===this.state.volume,[_.default.firefoxFix]:p.default.isGecko}),style:t}),o.createElement("input",{className:_.default.volumeBar,dir:"ltr",onChange:this._handleVolumeValueChange,type:"range",min:"0",max:1,step:"any",value:this.state.volume})):o.createElement("div",{className:_.default.volumeBarContainer});return o.createElement("div",{className:(0,n.default)(_.default.volumeContainer,{[_.default.volumePadding]:a}),onClick:this._stopEventPropagation,onMouseEnter:()=>{this.setState({isMouseOverVolumeControl:!0})},onMouseLeave:()=>{this.setState({isMouseOverVolumeControl:!1}),0!==this.props.volume||this.state.muted||this._handleMute()},onMouseDown:this._stopEventPropagation},e,r)},this._renderProgress=()=>{var e=this.state.progress/this.props.duration;e>1&&(e=1);var t=100*e+"%",a=this.state.bufferedTime/this.props.duration;a>1&&(a=1);var r=100*a+"%";return o.createElement("div",{className:(0,n.default)(_.default.progressBarContainer),onClick:this._stopEventPropagation,onMouseDown:this._stopEventPropagation,onMouseEnter:()=>{this.setState({isMouseOverProgressBar:!0})},onMouseLeave:()=>{this.setState({isMouseOverProgressBar:!1,mouseOverProgressRatio:void 0})},onMouseMove:e=>{var t=this.props.isFullscreenMode?g:v,a=e.currentTarget.getBoundingClientRect().left,r=e.pageX,i=e.currentTarget.offsetWidth-2*t,s=(r-a-t)/i,n=i*(this.state.progress/this.props.duration),o=Math.abs(r-a-t-n)<=t;s<0?s=o?0:void 0:s>1&&(s=o?1:void 0),this.setState({mouseOverProgressRatio:s})}},o.createElement("input",{"data-testid":"progress",className:_.default.hiddenProgressBar,dir:"ltr",onChange:this._handleProgressChange,onMouseDown:this._handleProgressMouseDown,onMouseUp:this._handleProgressMouseUp,type:"range",min:"0",max:(0,s.default)(this.props.duration,2),step:"any",value:this.state.progress}),o.createElement("div",{className:_.default.displayedProgressBar},o.createElement("div",{className:_.default.displayedTrack}),o.createElement("div",{className:(0,n.default)(_.default.displayedBuffer,{[_.default.lowerTrackLongest]:1===a}),style:{width:r}}),o.createElement("div",{className:(0,n.default)(_.default.displayedProgress,{[_.default.lowerTrackLongest]:1===e}),style:{width:t}}),o.createElement("div",{className:(0,n.default)(_.default.thumb,{[_.default.hideThumb]:!this.state.isMouseOverProgressBar}),style:{left:t}}),this._renderTooltip()))},this.handleCtwaSourceButtonClick=e=>{e.preventDefault(),e.stopPropagation(),this.props.ctwaSourceUrl&&(0,c.openExternalLink)(this.props.ctwaSourceUrl)},this.state={progress:this.props.progress,volume:this.props.volume,muted:this.props.muted,bufferedTime:this.props.bufferedTime,isMouseOverVolumeControl:!1,isMouseOverProgressBar:!1,mouseOverProgressRatio:void 0,isDraggingProgress:!1,prevPropProgress:this.props.progress,prevPropVolume:this.props.volume,prevPropMuted:this.props.muted,prevPropBufferedTime:this.props.bufferedTime}}componentDidMount(){0!==this.props.volume||this.props.muted||this._handleMute()}static getDerivedStateFromProps(e,t){var a={};return t.prevPropProgress===e.progress||t.isDraggingProgress||(a.progress=e.progress,a.prevPropProgress=e.progress),t.prevPropVolume!==e.volume&&(a.volume=e.volume,a.prevPropVolume=e.volume),t.prevPropMuted!==e.muted&&(a.muted=e.muted,a.prevPropMuted=e.muted),t.prevPropBufferedTime!==e.bufferedTime&&(a.bufferedTime=e.bufferedTime,a.prevPropBufferedTime=e.bufferedTime),a}_renderCtwaSourceIcon(){if(!(this.state.isMouseOverVolumeControl&&!this.state.muted)&&this.props.ctwaSourceUrl){var e=m.default.withoutWww(m.default.hostname(this.props.ctwaSourceUrl));return o.createElement(u.default,{isFullscreenMode:this.props.isFullscreenMode,onClick:this.handleCtwaSourceButtonClick,isInstagram:e===d.default.HOSTNAME.INSTAGRAM})}return null}render(){var e=this.props.isFullscreenMode,t=e?o.createElement("div",{className:(0,n.default)(_.default.timeText,_.default.currentTime),onClick:this._stopEventPropagation},l.default.durationStr(this.state.progress)):null,a=e?o.createElement("div",{className:(0,n.default)(_.default.timeText,_.default.duration),onClick:this._stopEventPropagation},l.default.durationStr(this.props.duration)):null,r=this.props.className?this.props.className:_.default.controls;return o.createElement("div",{className:(0,n.default)(r,{[_.default.fullscreen]:e})},o.createElement("div",{className:_.default.playpauseBtnContainer,onClick:this._stopEventPropagation,onMouseDown:this._stopEventPropagation,onMouseUp:this._stopEventPropagation},o.createElement(f.default,{"aria-label":this.props.isVideoPlaying?h.default.t(9):h.default.t(10),name:this.props.isVideoPlaying?"video-pause":"video-play",display:"inline",onClick:this.props.isVideoPlaying?this.handlePause:this._handlePlay})),this._renderProgress(),this._renderVolume(),t,a,this._renderCtwaSourceIcon())}}t.default=E},1649:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(88030));class o extends s.PureComponent{constructor(...e){super(...e),this._handlePlayByControls=()=>{this.props.refVideo&&this.props.refVideo.play()},this._handlePauseByControls=()=>{this.props.refVideo&&this.props.refVideo.pause()},this._handleSetCurrentTimeByControls=e=>{this.props.refVideo&&this.props.refVideo.setCurrentTime(e)},this._handleSetVolumeByControls=e=>{this.props.refVideo&&this.props.refVideo.setVolume(e)},this._handleSetMutedByControls=e=>{this.props.refVideo&&this.props.refVideo.setMuted(e)}}render(){if(!this.props.refVideo)return null;var e=this.props.videoMetadata;return e?s.createElement(n.default,{duration:e.duration,progress:e.currentTime,volume:e.volume,muted:e.muted,bufferedTime:e.bufferedTime,onPlay:this._handlePlayByControls,onPause:this._handlePauseByControls,onProgressChange:this.props.handleSetCurrentTimeByControls?this.props.handleSetCurrentTimeByControls:this._handleSetCurrentTimeByControls,onVolumeValueChange:this._handleSetVolumeByControls,onMutedValueChange:this._handleSetMutedByControls,isVideoPlaying:this.props.isVideoPlaying,isFullscreenMode:this.props.isFullscreenMode,className:this.props.controlsClassName,ctwaSourceUrl:this.props.ctwaSourceUrl}):null}}t.default=o},6974:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(70417)),n=i(a(54073)),o=i(a(72779)),l=r(a(2784)),d=i(a(20174)),u=i(a(6016)),c=i(a(40915)),h=i(a(20642)),f=i(a(90975)),p=a(24406),m=i(a(77626)),_=i(a(74824)),v=i(a(1649)),g=i(a(85001)),E=i(a(12034));class y extends l.Component{constructor(e){super(e),this.setRefContainer=e=>{this.refContainer=e},this.setRefVideo=e=>{this.refVideo=e},this.resetMouseMoveRecently=(0,n.default)((()=>{this.setState({mouseMoveRecently:!1})}),p.FULLSCREEN_CONTROLS_DISPLAY_TIMEOUT),this.mouseDownCoor=null,this.handleEnded=()=>{this.props.onVideoEnded&&this.props.onVideoEnded();var e=this.refVideo;e&&(e.play(),e.pause()),this.setState({isVideoPlaying:!1})},this.handleError=()=>{this.props.onError&&this.props.onError()},this.handlePause=()=>{var e=this.refVideo?this.refVideo.getCurrentTime():null,t=null;this.state.videoMetadata&&null!=e&&(t=(0,s.default)((0,s.default)({},this.state.videoMetadata),{},{currentTime:e})),this.setState({isVideoPlaying:!1,videoMetadata:t}),this.blockTimeUpdateOnce=!0},this.handlePlaying=()=>{var e=this.refVideo?this.refVideo.getCurrentTime():null,t=null;this.state.videoMetadata&&null!=e&&(t=(0,s.default)((0,s.default)({},this.state.videoMetadata),{},{currentTime:e})),this.setState({isVideoPlaying:!0,videoMetadata:t}),this.blockTimeUpdateOnce=!0},this.handleLoadedMetadata=e=>{var t=null!=this.props.startTime?this.props.startTime:0;this.setState({videoMetadata:{duration:e.duration,currentTime:t,volume:e.volume,muted:e.muted,bufferedTime:0}})},this.handleVolumeChange=e=>{var t=null;this.state.videoMetadata&&(t=(0,s.default)((0,s.default)({},this.state.videoMetadata),{},{volume:e.volume,muted:e.muted})),this.setState({videoMetadata:t})},this.handleTimeUpdate=e=>{if(this.blockTimeUpdateOnce)this.blockTimeUpdateOnce=!1;else{var t=null;this.state.videoMetadata&&(t=(0,s.default)((0,s.default)({},this.state.videoMetadata),{},{currentTime:e})),this.setState({videoMetadata:t})}},this.handleSetCurrentTimeByControls=e=>{if(this.refVideo){var t=e;this.state.videoMetadata&&e>=this.state.videoMetadata.duration-1&&this.state.videoMetadata.duration>1&&(t=this.state.videoMetadata.duration-1),this.refVideo.setCurrentTime(t)}},this.handleProgress=e=>{var t=e[0][1],a=null;this.state.videoMetadata&&(a=(0,s.default)((0,s.default)({},this.state.videoMetadata),{},{bufferedTime:t})),this.setState({videoMetadata:a})},this.state={videoMetadata:void 0,isVideoPlaying:!1,isMouseOver:!1,mouseMoveRecently:!1,isFullscreenMode:!1,exposeIframeInPiP:!1}}componentDidMount(){this.props.listeners.add(u.default,"fullscreen_change",(()=>{u.default.isFullscreenMode&&u.default.fullscreenElement===this.refContainer?this.setState({isFullscreenMode:!0}):u.default.isFullscreenMode||this.setState({isFullscreenMode:!1})}))}componentWillUnmount(){this.resetMouseMoveRecently.cancel()}renderVideoControls(){var e=null,t=this.state.videoMetadata;if(t){var a=(0,o.default)(g.default.strippedVideoControls,g.default.opacityTransition,{[g.default.dimmed]:!this.state.mouseMoveRecently});e=l.createElement(v.default,{refVideo:this.refVideo,videoMetadata:t,isFullscreenMode:this.state.isFullscreenMode,isVideoPlaying:this.state.isVideoPlaying,handleSetCurrentTimeByControls:this.handleSetCurrentTimeByControls,controlsClassName:this.state.isFullscreenMode?a:void 0}),this.state.isFullscreenMode||(e=l.createElement("div",{className:g.default.videoControlsWrapper,onMouseDown:e=>{this.mouseDownCoor={x:e.clientX,y:e.clientY}},onMouseUp:e=>{var t=e.clientX,a=e.clientY,r=this.mouseDownCoor?this.mouseDownCoor.x:void 0,i=this.mouseDownCoor?this.mouseDownCoor.y:void 0;null!=r&&null!=i&&Math.abs(t-r)+Math.abs(a-i)<4&&this.setState({exposeIframeInPiP:!0})}},e))}return e}render(){var e,t=this.state.exposeIframeInPiP||this.state.isFullscreenMode?null:l.createElement("div",{className:g.default.blockYoutube}),a=l.createElement("div",{className:(0,o.default)(g.default.youtubeContainer,{[g.default.fullscreen]:this.state.isFullscreenMode})},t,l.createElement(E.default,{ref:this.setRefVideo,youtubeVideoId:this.props.youtubeVideoId,startTime:this.props.startTime,onEnded:this.handleEnded,onError:this.handleError,onLoadedMetadata:this.handleLoadedMetadata,onPause:this.handlePause,onPlaying:this.handlePlaying,onProgress:this.handleProgress,onTimeUpdate:this.handleTimeUpdate,onVolumeChange:this.handleVolumeChange,autoPlay:this.props.autoPlay})),r=this.renderVideoControls();m.default.isSafari||(e=l.createElement(c.default,{isFullscreenMode:this.state.isFullscreenMode,onClick:this.state.isFullscreenMode?e=>{e.stopPropagation(),u.default.exitFullscreen()}:e=>{e.stopPropagation(),u.default.requestFullscreen(this.refContainer)}}));var i=l.createElement(f.default,{theme:"full-rounded"}),s=this.state.isFullscreenMode?l.createElement(l.Fragment,null,a,r,l.createElement("div",{className:(0,o.default)(g.default.widgetsWrapper,g.default.opacityTransition,{[g.default.dimmed]:!this.state.mouseMoveRecently})},e,l.createElement(d.default,{isFullscreenMode:this.state.isFullscreenMode,onClick:e=>{e.stopPropagation(),this.props.onClose()}}))):l.createElement(l.Fragment,null,a,l.createElement(_.default,{transitionName:"fade-fast"},this.state.isMouseOver&&this.state.mouseMoveRecently&&!this.state.exposeIframeInPiP?l.createElement(l.Fragment,null,i,r,e,l.createElement(d.default,{isFullscreenMode:this.state.isFullscreenMode,onClick:e=>{e.stopPropagation(),this.props.onClose()}})):null));return l.createElement("div",{ref:this.setRefContainer,key:"elementsWrapped",className:(0,o.default)(g.default.container,{[g.default.fullscreen]:this.state.isFullscreenMode}),onMouseEnter:()=>{if(this.state.exposeIframeInPiP){if(m.default.isGecko&&this.state.isMouseOver)return;this.setState({exposeIframeInPiP:!1})}this.setState({isMouseOver:!0})},onMouseLeave:()=>{this.setState({isMouseOver:!1})},onMouseDown:e=>{this.state.isFullscreenMode&&e.stopPropagation()},onMouseMove:()=>{this.state.isMouseOver||this.setState({isMouseOver:!0}),this.state.mouseMoveRecently||this.setState({mouseMoveRecently:!0}),this.resetMouseMoveRecently()}},s)}}var S=(0,h.default)(y);t.default=S},12034:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(70417)),n=i(a(98537)),o=i(a(54073)),l=r(a(2784)),d=i(a(79711)),u=i(a(50935)),c=a(95595),h=i(a(20642)),f=i(a(86094)),p=(0,o.default)((e=>{(0,c.setVideoVolumeSetting)(e)}),500),m=(0,o.default)((e=>{(0,c.setVideoMutedSetting)(e)}),500),_=1,v={width:"100%",height:"100%",playerVars:{cc_load_policy:1,iv_load_policy:3,controls:0,playsinline:1,rel:0,modestbranding:0,autoplay:0}};class g extends l.PureComponent{constructor(...e){super(...e),this.updateInterval=null,this.player=void 0,this.currentTime=0,this.videoLoadedFraction=0,this.getPlayerState=()=>this.player?this.player.getPlayerState():void 0,this.setStartTime=()=>{this.player&&"number"==typeof this.props.startTime&&this.player.seekTo(this.props.startTime,!0)},this.onOtherPlaying=e=>{e!==this&&this.player&&this.player.pauseVideo()},this.onReady=e=>{this.player=e.target;var t,a,r=this.player,i=(0,c.getVideoVolumeSettings)();i&&("number"==typeof i.volume&&(t=i.volume),"boolean"==typeof i.muted&&(a=i.muted));var s=r.getDuration(),n=null!=t?t:.01*r.getVolume(),o=null!=a?a:r.isMuted(),l=r.getIframe().getBoundingClientRect(),d=l.width,u=l.height;this.videoTagMetadata={duration:s,volume:n,muted:o,videoWidth:d,videoHeight:u},this.props.onLoadedMetadata(this.videoTagMetadata),this.currentTime=r.getCurrentTime(),this.updateInterval=setInterval(this.update,250),null!=this.props.startTime&&this.setStartTime(),null!=t&&this.setVolume(t),null!=a&&this.setMuted(a)},this.update=()=>{var e=this.player;if(e){var t=e.getCurrentTime();t!==this.currentTime&&(this.currentTime=t,this.props.onTimeUpdate(t));var a=e.getVideoLoadedFraction();if(a!==this.videoLoadedFraction){this.videoLoadedFraction=a;var r=this.videoTagMetadata?this.videoTagMetadata.duration*a:0;this.props.onProgress([[0,r]])}var i=this.videoTagMetadata;if(i){var n=.01*e.getVolume(),o=e.isMuted();n===i.volume&&o===i.muted||(this.videoTagMetadata=(0,s.default)((0,s.default)({},i),{},{volume:n,muted:o}),this.props.onVolumeChange({volume:n,muted:o}))}}},this.onPlay=()=>{d.default.mediaPlaying(this),this.props.onPlaying()},this.onPause=()=>{this.props.onPause()},this.onEnd=()=>{this.props.onEnded();var e=this.player;e&&(e.playVideo(),e.pauseVideo())},this.onError=()=>{this.props.onError()},this.onStateChange=e=>{e.target.getPlayerState()!==_&&this.props.onPause()},this.play=()=>{this.player&&this.player.playVideo()},this.pause=()=>{this.player&&this.player.pauseVideo()},this.getPaused=()=>!this.player||this.getPlayerState()!==_,this.getCurrentTime=()=>this.player?this.player.getCurrentTime():0,this.setCurrentTime=e=>{this.player&&this.player.seekTo(e,!0)},this.getDuration=()=>this.player?this.player.getDuration():0,this.getVolume=()=>this.player?.01*this.player.getVolume():0,this.setVolume=e=>{this.player&&(this.player.setVolume(100*e),p(e))},this.getMuted=()=>!!this.player&&this.player.isMuted(),this.setMuted=e=>{var t=this.player;t&&(e?t.mute():t.unMute(),m(e))}}componentDidMount(){this.props.listeners.add(d.default,"mediaPlaying",this.onOtherPlaying),this.props.listeners.add(d.default,"pttRecording",this.pause)}componentWillUnmount(){this.updateInterval&&clearInterval(this.updateInterval)}componentDidUpdate(e){e.startTime!==this.props.startTime&&this.setStartTime()}render(){var e=(0,n.default)({},v,{playerVars:{autoplay:this.props.autoPlay?1:0,widget_referrer:u.default.WHATSAPP_ORIGIN,origin:window.location.origin}});return l.createElement(f.default,{videoId:this.props.youtubeVideoId,opts:e,onReady:this.onReady,onPlay:this.onPlay,onPause:this.onPause,onEnd:this.onEnd,onError:this.onError,onStateChange:this.onStateChange})}}var E=(0,h.default)(g);t.default=class extends E{constructor(...e){super(...e),this.play=()=>{this.getComponent().play()},this.pause=()=>{this.getComponent().pause()},this.getPaused=()=>this.getComponent().getPaused(),this.getCurrentTime=()=>this.getComponent().getCurrentTime(),this.setCurrentTime=e=>{this.getComponent().setCurrentTime(e)},this.getDuration=()=>this.getComponent().getDuration(),this.getVolume=()=>this.getComponent().getVolume(),this.setVolume=e=>{this.getComponent().setVolume(e)},this.getMuted=()=>this.getComponent().getMuted(),this.setMuted=e=>{this.getComponent().setMuted(e)}}}},52617:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({productId:e,businessOwnerJid:t,msgT:a}){var r=(0,s.createWid)(t);if(!r)return;var n=i.default.get(r);if(!n)return;var o=n.productCollection.get(e),l=n.msgProductCollection.get(e);if(l&&o){var d=null!=a?a:l.t;return o.t>=d?(n.msgProductCollection.remove(l),o):l}return o||l};var i=r(a(65468)),s=a(75637)},83974:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.logBusinessProfileCatalogView=function({catalogOwnerWid:e,catalogSessionId:t}){(0,n.createCatalogViewEvent)({isOwner:(0,n.isCatalogOwner)({catalogOwnerWid:e}),catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_CARD_IMPRESSION,catalogViewAction:s.default.CATALOG_VIEW_ACTION.ACTION_CARD_IMPRESSION,catalogSessionId:t,catalogEntryPoint:s.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_PROFILE}).commit()},t.logChatCatalogView=function({catalogOwnerWid:e,catalogSessionId:t}){new s.default.CatalogView({catalogViewAction:s.default.CATALOG_VIEW_ACTION.ACTION_CHAT_CATALOG_ICON_CLICK,catalogEntryPoint:s.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_CHAT,catalogSessionId:t}).commit()},t.logProfileProductClick=function({product:e,catalogSessionId:t}){(0,n.createCatalogViewEvent)({isOwner:(0,n.isCatalogOwner)({product:e}),catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_CARD_ITEM_CLICK,catalogViewAction:s.default.CATALOG_VIEW_ACTION.ACTION_CARD_ITEM_CLICK,catalogEntryPoint:s.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_PROFILE,catalogSessionId:t}).commit()},t.logCarouselViewMoreClick=function({catalogOwnerWid:e,catalogSessionId:t}){(0,n.createCatalogViewEvent)({isOwner:(0,n.isCatalogOwner)({catalogOwnerWid:e}),catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_CARD_MORE_CLICK,catalogViewAction:s.default.CATALOG_VIEW_ACTION.ACTION_CARD_MORE_CLICK,catalogSessionId:t}).commit()},t.logCatalogListView=function({catalogOwnerWid:e,catalogSessionId:t}){(0,n.createCatalogViewEvent)({isOwner:(0,n.isCatalogOwner)({catalogOwnerWid:e}),catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_LIST_IMPRESSION,catalogViewAction:s.default.CATALOG_VIEW_ACTION.ACTION_LIST_IMPRESSION,catalogSessionId:t}).commit()},t.logCatalogShareLinkClick=function({catalogOwnerWid:e,catalogSessionId:t}){var a=(0,n.isCatalogOwner)({catalogOwnerWid:e});(0,n.createCatalogViewEvent)({isOwner:a,catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_SHARE_CATALOG_LINK_CLICK,catalogViewAction:s.default.CATALOG_VIEW_ACTION.ACTION_SHARE_CATALOG_LINK_CLICK,catalogSessionId:t}).commit()},t.logCatalogListDetailClick=function({product:e,catalogSessionId:t}){(0,n.createCatalogViewEvent)({isOwner:(0,n.isCatalogOwner)({product:e}),catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_LIST_ITEM_CLICK,catalogViewAction:s.default.CATALOG_VIEW_ACTION.ACTION_LIST_ITEM_CLICK,catalogSessionId:t}).commit()},t.logDetailImageClick=function({product:e,catalogSessionId:t}){(0,n.createCatalogViewEvent)({isOwner:(0,n.isCatalogOwner)({product:e}),catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_DETAIL_IMAGE_CLICK,catalogViewAction:s.default.CATALOG_VIEW_ACTION.ACTION_DETAIL_IMAGE_CLICK,catalogSessionId:t}).commit()},t.logDetailLinkClick=function({product:e,catalogSessionId:t}){(0,n.createCatalogViewEvent)({isOwner:(0,n.isCatalogOwner)({product:e}),catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_DETAIL_LINK_CLICK,catalogViewAction:s.default.CATALOG_VIEW_ACTION.ACTION_DETAIL_LINK_CLICK,catalogSessionId:t}).commit()},t.logImageCarouselModalView=function({product:e,catalogSessionId:t}){(0,n.createCatalogViewEvent)({isOwner:(0,n.isCatalogOwner)({product:e}),catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_IMAGE_LIST_IMPRESSION,catalogViewAction:s.default.CATALOG_VIEW_ACTION.ACTION_IMAGE_LIST_IMPRESSION,catalogSessionId:t}).commit()},t.logImageListClick=function({product:e,catalogSessionId:t}){(0,n.createCatalogViewEvent)({isOwner:(0,n.isCatalogOwner)({product:e}),catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_IMAGE_LIST_CLICK,catalogViewAction:s.default.CATALOG_VIEW_ACTION.ACTION_IMAGE_LIST_CLICK,catalogSessionId:t}).commit()},t.logFullImageView=function({product:e,catalogSessionId:t}){(0,n.createCatalogViewEvent)({isOwner:(0,n.isCatalogOwner)({product:e}),catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_FULL_IMAGE_IMPRESSION,catalogViewAction:s.default.CATALOG_VIEW_ACTION.ACTION_FULL_IMAGE_IMPRESSION,catalogSessionId:t}).commit()},t.logImageNavigate=function({product:e,catalogSessionId:t}){(0,n.createCatalogViewEvent)({isOwner:(0,n.isCatalogOwner)({product:e}),catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_FULL_IMAGE_SWIPE,catalogViewAction:s.default.CATALOG_VIEW_ACTION.ACTION_FULL_IMAGE_SWIPE,catalogSessionId:t}).commit()},t.logProductDetailView=function({product:e,catalogSessionId:t}){(0,n.createCatalogViewEvent)({isOwner:(0,n.isCatalogOwner)({product:e}),catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_DETAIL_IMPRESSION,catalogViewAction:s.default.CATALOG_VIEW_ACTION.ACTION_DETAIL_IMPRESSION,catalogSessionId:t}).commit()},t.logReportProduct=function({product:e,catalogSessionId:t}){new s.default.CatalogView({catalogViewAction:s.default.CATALOG_VIEW_ACTION.ACTION_REPORT_PRODUCT,catalogSessionId:t}).commit()},t.logReportProductSuccess=function({product:e,catalogSessionId:t}){new s.default.CatalogView({catalogViewAction:s.default.CATALOG_VIEW_ACTION.ACTION_REPORT_PRODUCT_SUCCESS,catalogSessionId:t}).commit()},t.logReportProductFailure=function({product:e,catalogSessionId:t}){new s.default.CatalogView({catalogViewAction:s.default.CATALOG_VIEW_ACTION.ACTION_REPORT_PRODUCT_FAILURE,catalogSessionId:t}).commit()},t.logProductInquiryClick=function({product:e,catalogSessionId:t}){(0,n.createCatalogViewEvent)({isOwner:(0,n.isCatalogOwner)({product:e}),catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_QUOTED_PRODUCT_IN_CONVERSATION_CLICK,catalogViewAction:s.default.CATALOG_VIEW_ACTION.ACTION_QUOTED_PRODUCT_IN_CONVERSATION_CLICK,catalogEntryPoint:s.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_MESSAGE,catalogSessionId:t}).commit()},t.logProductMsgClick=function({product:e,catalogSessionId:t}){(0,n.createCatalogViewEvent)({isOwner:(0,n.isCatalogOwner)({product:e}),catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_IN_CONVERSATION_CLICK,catalogViewAction:s.default.CATALOG_VIEW_ACTION.ACTION_PRODUCT_IN_CONVERSATION_CLICK,catalogEntryPoint:s.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_MESSAGE,catalogSessionId:t}).commit()},t.logProductDeepLinkOpen=function({catalogOwnerJid:e,catalogSessionId:t}){(0,n.createCatalogViewEvent)({isOwner:(0,n.isCatalogOwner)({catalogOwnerJid:e}),catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_SHARE_PRODUCT_LINK_CLICK,catalogViewAction:s.default.CATALOG_VIEW_ACTION.ACTION_SHARE_PRODUCT_LINK_CLICK,catalogEntryPoint:s.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_DEEPLINK,catalogSessionId:t}).commit()},t.logProductMessageBusinessClick=function(e,t){(0,n.createCatalogViewEvent)({isOwner:(0,n.isCatalogOwner)({product:e}),catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_MESSAGE_BUSINESS_BUTTON_CLICK,catalogViewAction:s.default.CATALOG_VIEW_ACTION.ACTION_MESSAGE_BUSINESS_BUTTON_CLICK,catalogSessionId:t}).commit()},t.logProductMessageBusinessSend=function(e,t){var a=!1;if(null!=e.businessOwnerJid){var r=e.businessOwnerJid;a=(0,i.getMeUser)().equals((0,l.createWid)(r))}(0,n.createCatalogViewEvent)({isOwner:a,catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_QUOTED_PRODUCT_MESSAGE_SEND,catalogViewAction:s.default.CATALOG_VIEW_ACTION.ACTION_QUOTED_PRODUCT_MESSAGE_SEND,catalogSessionId:t||(new o.default).toString()}).commit()},t.logShareProductCopyLinkClick=function({product:e,catalogSessionId:t}){(0,n.createCatalogViewEvent)({isOwner:(0,n.isCatalogOwner)({product:e}),catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_SHARE_PRODUCT_COPY_LINK_CLICK,catalogViewAction:s.default.CATALOG_VIEW_ACTION.ACTION_SHARE_PRODUCT_COPY_LINK_CLICK,catalogSessionId:t,productId:e.id.toString()}).commit()},t.logShareProductViaWALinkClick=function({product:e,catalogSessionId:t}){(0,n.createCatalogViewEvent)({isOwner:(0,n.isCatalogOwner)({product:e}),catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_SHARE_PRODUCT_VIA_WA_LINK_CLICK,catalogViewAction:s.default.CATALOG_VIEW_ACTION.ACTION_SHARE_PRODUCT_VIA_WA_LINK_CLICK,catalogSessionId:t,productId:e.id.toString()}).commit()},t.logCatalogAttachmentButtonClick=function(e){new s.default.CatalogBiz({catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_CATALOG_IN_CONVERSATION_CLICK,catalogEntryPoint:s.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_ATTACHMENT_PANEL,catalogSessionId:e}).commit()},t.logProductMessageSent=function({product:e,catalogSessionId:t}){(0,n.createCatalogViewEvent)({isOwner:(0,n.isCatalogOwner)({product:e}),catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_SEND_PRODUCT_MESSAGE,catalogViewAction:s.default.CATALOG_VIEW_ACTION.ACTION_SEND_PRODUCT_MESSAGE,catalogSessionId:t,productId:e.id.toString()}).commit()},t.logSendCatalogClick=function({catalogOwnerWid:e,catalogSessionId:t}){new s.default.CatalogBiz({catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_SEND_CATALOG_CLICK,catalogSessionId:t}).commit()},t.logShareCatalogCopyLinkClick=function({catalogOwnerWid:e,catalogSessionId:t}){(0,n.createCatalogViewEvent)({isOwner:(0,n.isCatalogOwner)({catalogOwnerWid:e}),catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_SHARE_CATALOG_COPY_LINK_CLICK,catalogViewAction:s.default.CATALOG_VIEW_ACTION.ACTION_SHARE_CATALOG_COPY_LINK_CLICK,catalogSessionId:t}).commit()},t.logShareCatalogViaWALinkClick=function({catalogOwnerWid:e,catalogSessionId:t}){(0,n.createCatalogViewEvent)({isOwner:(0,n.isCatalogOwner)({catalogOwnerWid:e}),catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_SHARE_CATALOG_VIA_WA_LINK_CLICK,catalogViewAction:s.default.CATALOG_VIEW_ACTION.ACTION_SHARE_CATALOG_VIA_WA_LINK_CLICK,catalogSessionId:t}).commit()},t.logAddProductClick=function(e){new s.default.CatalogBiz({catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_ADD_CLICKED,catalogSessionId:e,catalogEntryPoint:s.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS}).commit()},t.logAddProductSuccess=function(e){new s.default.CatalogBiz({catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_ADD_SUCCESS,catalogEntryPoint:s.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,catalogSessionId:e}).commit()},t.logAddProductFailed=function(e){new s.default.CatalogBiz({catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_ADD_FAILED,catalogEntryPoint:s.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,catalogSessionId:e}).commit()},t.logEditProductClick=function(e,t){new s.default.CatalogBiz({catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_EDIT_CLICKED,productId:e.id.toString(),catalogEntryPoint:s.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,catalogSessionId:t}).commit()},t.logEditProductSuccess=function(e,t){new s.default.CatalogBiz({catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_EDIT_SUCCESS,catalogEntryPoint:s.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,productId:e.id.toString(),catalogSessionId:t}).commit()},t.logEditProductFailed=function(e,t,a){new s.default.CatalogBiz({catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_EDIT_FAILED,catalogEntryPoint:s.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,productId:e.id.toString(),errorCode:a,catalogSessionId:t}).commit()},t.logDeleteProductClick=function(e,t,a){new s.default.CatalogBiz({catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_DELETE_CLICKED,catalogEntryPoint:s.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,productId:e.id.toString(),productCount:t,catalogSessionId:a}).commit()},t.logDeleteProductSuccess=function(e,t,a){new s.default.CatalogBiz({catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_DELETE_SUCCESS,catalogEntryPoint:s.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,productId:e.id.toString(),productCount:t,catalogSessionId:a}).commit()},t.logDeleteProductFailed=function(e,t,a,r){new s.default.CatalogBiz({catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_DELETE_FAILED,catalogEntryPoint:s.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,productId:e.id.toString(),productCount:t,errorCode:r,catalogSessionId:a}).commit()},t.logCreateProductCatalogClick=function(e){new s.default.CatalogBiz({catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_CREATE_PRODUCT_CATALOG,catalogEntryPoint:s.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,catalogSessionId:e}).commit()},t.logCreateProductCatalogSuccess=function(e){new s.default.CatalogBiz({catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_CREATE_PRODUCT_CATALOG_SUCCESS,catalogEntryPoint:s.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,catalogSessionId:e}).commit()},t.logCreateProductCatalogFailed=function(e,t){new s.default.CatalogBiz({catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_CREATE_PRODUCT_CATALOG_FAILED,catalogEntryPoint:s.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,errorCode:t,catalogSessionId:e}).commit()},t.logAppealProductCatalogClick=function(e){new s.default.CatalogBiz({catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_APPEAL_PRODUCT_CLICKED,catalogEntryPoint:s.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,catalogSessionId:e}).commit()},t.logAppealProductCatalogSuccess=function(e){new s.default.CatalogBiz({catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_APPEAL_PRODUCT_SUCCESS,catalogEntryPoint:s.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,catalogSessionId:e}).commit()},t.logAppealProductCatalogFailed=function(e,t){new s.default.CatalogBiz({catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_APPEAL_PRODUCT_FAILED,catalogEntryPoint:s.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,errorCode:t,catalogSessionId:e}).commit()},t.logCatalogContextMenuClick=function(e,t){new s.default.CatalogBiz({catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_MENU_CLICK,catalogEntryPoint:s.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,catalogSessionId:t,productId:e}).commit()},t.logCatalogProductHideClick=function(e,t){new s.default.CatalogBiz({catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_HIDE_CLICKED,catalogEntryPoint:s.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,catalogSessionId:t,productId:e}).commit()},t.logCatalogProductHideSuccess=function(e,t){new s.default.CatalogBiz({catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_HIDE_SUCCESS,catalogEntryPoint:s.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,catalogSessionId:t,productId:e}).commit()},t.logCatalogProductHideCancelled=function(e,t){new s.default.CatalogBiz({catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_HIDE_CANCELLED,catalogEntryPoint:s.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,catalogSessionId:t,productId:e}).commit()},t.logCatalogProductHideFailed=function(e,t){new s.default.CatalogBiz({catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_HIDE_FAILED,catalogEntryPoint:s.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,catalogSessionId:t,productId:e}).commit()},t.logCatalogProductShowClick=function(e,t){new s.default.CatalogBiz({catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_UNHIDE_CLICKED,catalogEntryPoint:s.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,catalogSessionId:t,productId:e}).commit()},t.logCatalogProductShowSuccess=function(e,t){new s.default.CatalogBiz({catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_UNHIDE_SUCCESS,catalogEntryPoint:s.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,catalogSessionId:t,productId:e}).commit()},t.logCatalogProductShowCancelled=function(e,t){new s.default.CatalogBiz({catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_UNHIDE_CANCELLED,catalogEntryPoint:s.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,catalogSessionId:t,productId:e}).commit()},t.logCatalogProductShowFailed=function(e,t){new s.default.CatalogBiz({catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_UNHIDE_FAILED,catalogEntryPoint:s.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,catalogSessionId:t,productId:e}).commit()};var i=a(95595),s=r(a(40210)),n=a(82431),o=r(a(55043)),l=a(75637)},82431:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.createCatalogViewEvent=t.isCatalogOwner=void 0;var i=r(a(70417)),s=r(a(22220)),n=a(95595),o=r(a(40210)),l=r(a(68384)),d=a(75637);t.isCatalogOwner=e=>{var t,a=(0,n.getMeUser)();return e.catalogOwnerJid?t=(0,d.createWid)(e.catalogOwnerJid):e.catalogOwnerWid?t=e.catalogOwnerWid:e.product&&(t=e.product.catalogWid),l.default.equals(a,t)};t.createCatalogViewEvent=e=>{var{isOwner:t,catalogBizAction:a,catalogViewAction:r,bizActionConfig:n}=e,l=(0,s.default)(e,["isOwner","catalogBizAction","catalogViewAction","bizActionConfig"]);return t?new o.default.CatalogBiz((0,i.default)((0,i.default)({catalogBizAction:a},l),n)):new o.default.CatalogView((0,i.default)({catalogViewAction:r},l))}},55074:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(84767)),o=r(a(18392)),l=r(a(43903)),d=r(a(73549)),u=i(a(37356)),c=r(a(71201)),h=r(a(91581)),f=a(95595),p=r(a(17957)),m=r(a(20642)),_=a(83974),v=r(a(43889)),g=a(38350),E=r(a(92209)),y=r(a(72424)),S=r(a(40207)),C=a(64658),T=r(a(22948)),M=r(a(82631)),b=r(a(17693)),P=r(a(63498));class A extends s.Component{constructor(...e){super(...e),this.state={active:!1,contextMenu:null},this.onActiveChange=e=>{this.setState({active:!!e})},this.onAddToCart=e=>{var{product:t,sessionId:a}=this.props;null!=a&&((0,n.default)(t,a),e.preventDefault(),e.stopPropagation())},this.onProductHideShow=e=>{e.preventDefault(),e.stopPropagation(),this.props.onProductHideShow&&this.props.onProductHideShow(this.props.product)},this.onDeleteProduct=e=>{e.preventDefault(),e.stopPropagation(),this.props.onProductDelete&&this.props.onProductDelete(this.props.product)},this.removeContext=()=>{this.setState({contextMenu:null})},this.onContext=e=>{var t;if(this.state.contextMenu)this.setState({contextMenu:null});else{var a=[],{product:r,onProductShare:i,onCartOpen:n,sessionId:o}=this.props;(0,_.logCatalogContextMenuClick)(r.id.toString(),o),null!=i&&r.reviewStatus===g.PRODUCT_REVIEW_STATUS.APPROVED&&!1===r.isHidden&&a.push(s.createElement(c.default,{a8n:"mi-share-label",action:e=>{e.stopPropagation(),i((0,C.unproxy)(r))},key:"ShareLabel"},p.default.t(435)));var l=null===(t=(0,f.getMaybeMeUser)())||void 0===t?void 0:t.equals(r.catalogWid);l&&this.props.onProductHideShow&&(r.isHidden?a.push(s.createElement(c.default,{a8n:"mi-show-label",action:this.onProductHideShow,key:"ShowLabel"},p.default.t(436))):a.push(s.createElement(c.default,{a8n:"mi-hide-label",action:this.onProductHideShow,key:"HideLabel"},p.default.t(434)))),r.isHidden||r.reviewStatus!==g.PRODUCT_REVIEW_STATUS.APPROVED||null==n||a.push(s.createElement(c.default,{a8n:"mi-addcart-label",action:this.onAddToCart,key:"AddToCartLabel"},p.default.t(432))),l&&this.props.onProductDelete&&a.push(s.createElement(c.default,{a8n:"mi-edit-label",action:this.onDeleteProduct,key:"DeleteLabel"},p.default.t(433))),e.event&&e.event.persist(),this.setState({contextMenu:{menu:a,event:e.event,anchor:e.anchor}})}}}componentDidMount(){var{active:e,listeners:t,product:a}=this.props;e&&t.add(e,a.id.toString(),this.onActiveChange)}_getShareIcon(){var{product:e,onProductShare:t}=this.props;return null!=t&&e.reviewStatus===g.PRODUCT_REVIEW_STATUS.APPROVED?s.createElement(T.default,{"aria-label":"",className:v.default.shareButton,onClick:a=>{a.stopPropagation(),t((0,C.unproxy)(e))},name:"link"}):null}_getAddToCartIcon(){var{onCartOpen:e,product:t}=this.props;return null!=e&&t.reviewStatus===g.PRODUCT_REVIEW_STATUS.APPROVED?s.createElement(o.default,{onClick:this.onAddToCart}):null}_renderDetail(){return y.default.webCatalogProductsOnOff&&this.props.canManageCatalog?null:s.createElement("div",{className:v.default.detailContainer},this._getShareIcon(),this._getAddToCartIcon())}render(){var e,t,{product:a,onClick:r,theme:i,isMuted:n}=this.props,o=null===(e=a.getPreviewImage())||void 0===e?void 0:e.mediaData;switch(a.reviewStatus){case g.PRODUCT_REVIEW_STATUS.NO_REVIEW:case g.PRODUCT_REVIEW_STATUS.OUTDATED:case g.PRODUCT_REVIEW_STATUS.PENDING:t=s.createElement(l.default,{theme:"pending",svg:"business-hours"});break;case g.PRODUCT_REVIEW_STATUS.REJECTED:t=s.createElement(l.default,{theme:"warning",svg:"error"})}var c,f=y.default.webCatalogProductsOnOff&&a.isHidden?s.createElement(M.default,{name:"hide"}):null,p=o?s.createElement(E.default,{theme:"list",mediaData:o,badge:t,overlayContent:f}):s.createElement(s.Fragment,null),m=s.createElement(h.default,{text:a.name,ellipsify:!0,titlify:!0}),_=s.createElement("div",{className:v.default.description,key:"desc"},s.createElement(h.default,{text:a.description,ellipsify:!0})),S=a.currency&&null!=a.priceAmount1000?s.createElement("div",{className:v.default.price,key:"price"},s.createElement(h.default,{text:u.format(a.currency,a.priceAmount1000),ellipsify:!0})):null;return this.state.contextMenu&&(c=s.createElement(b.default,{displayName:"ChatContextMenu",escapable:!0,popable:!0,requestDismiss:this.removeContext},s.createElement(P.default,{contextMenu:this.state.contextMenu}))),s.createElement(s.Fragment,null,s.createElement(d.default,{key:a.id.toString(),customImage:!0,image:p,primary:m,onClick:r,secondary:[_,S],theme:i,active:this.state.active,idle:n,detail:this._renderDetail(),className:v.default.catalogListItem,contextEnabled:()=>y.default.webCatalogProductsOnOff&&!0===this.props.canManageCatalog,onContext:this.onContext}),c)}}A.CONCERNS={product:["id","name","description","url","retailerId","currency","priceAmount1000","reviewStatus","catalogWid","productImageCollection","imageHash","imageCdnUrl","isHidden"]},A.defaultProps={theme:"product",isMuted:!1};var I=(0,m.default)((0,S.default)(A,A.CONCERNS));t.default=I},55043:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=class{constructor(){this.initSessionId()}initSessionId(){this.sessionId=this.newSessionId()}newSessionId(){return this.sessionId=Math.floor(2147483648*Math.random()),this.sessionId}toString(){return"".concat(this.sessionId)}}},93714:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(79711)),o=r(a(20642)),l=a(83974),d=r(a(93317)),u=r(a(99965)),c=r(a(92209)),h=a(64658),f=r(a(91378)),p=r(a(74824));class m extends s.Component{constructor(e){super(e),this.onKeyDown=e=>{37===e.keyCode?this.onPrev(e):39===e.keyCode&&this.onNext(e)},this.onNext=e=>{if(e&&e.stopPropagation(),!this.state.imgZoomed){var{productImageCollection:t}=this.props,a=t.length,r=this.state.activeImgIndex;this.onSelectThumb((r+1)%a)}},this.onPrev=e=>{if(e&&e.stopPropagation(),!this.state.imgZoomed){var{productImageCollection:t}=this.props,a=t.length,r=this.state.activeImgIndex,i=r-1<0?a-1:(r-1)%a;this.onSelectThumb(i)}},this.onImgZoomIn=e=>{this.setState({imgZoomed:e})},this.endFlow=()=>{n.default.closeModalMedia()},this.willEndFlow=()=>{this._refThumbsContainer&&(0,f.default)(this._refThumbsContainer,{opacity:[0,1],translateY:["100%","0%"]},{duration:300,easing:[.1,.82,.25,1]})},this.onSelectThumb=e=>{if(e!==this.state.activeImgIndex){var{product:t,sessionId:a}=this.props;(0,l.logImageNavigate)({product:(0,h.unproxy)(t),catalogSessionId:a}),(0,l.logImageListClick)({product:(0,h.unproxy)(t),catalogSessionId:a})}this.setState({activeImgIndex:e})},this.scrollToActive=(e=!1)=>{var t,a,r=this._refThumbsContainer,i=null===(t=this._refScrollContainer)||void 0===t?void 0:t.firstChild,s=null===(a=this._refActiveThumb)||void 0===a?void 0:a.getComponent().getImageContainerElement();if(r&&i&&s){var n=0;s instanceof HTMLElement&&(n=s.clientWidth/2-r.clientWidth/2),(0,f.default)(s,"stop");var o=0;e&&(o=300),(0,f.default)(s,"scroll",{duration:o,container:i,offset:n,axis:"x",easing:[.1,.82,.25,1]})}},this._setRefActiveThumb=e=>this._refActiveThumb=e,this._setRefThumbsContainer=e=>this._refThumbsContainer=e,this._setRefScrollContainer=e=>{this._refScrollContainer=e},this.getThumbs=()=>{var{productImageCollection:e}=this.props,t=e.toArray().map(((e,t)=>{var a=t===this.state.activeImgIndex;return s.createElement(c.default,{theme:"viewerFlow",active:a,ref:a?this._setRefActiveThumb:null,key:"product-image-".concat(t),mediaData:e.mediaData,onClick:this.onSelectThumb.bind(this,t)})}));return[s.createElement("div",{className:d.default.thumbPadding,key:"padding-left"}),t,s.createElement("div",{className:d.default.thumbPadding,key:"padding-right"})]},this.zoomIn=!0;var{activeProductImage:t,productImageCollection:a}=this.props;this.state={activeImgIndex:a.toArray().indexOf(t),imgZoomed:!1}}componentDidMount(){this.zoomIn=!1,this.props.listeners.add(window,"keydown",this.onKeyDown),this.scrollToActive(),this._refThumbsContainer&&(0,f.default)(this._refThumbsContainer,{opacity:[1,0],translateY:["0%","100%"]},{duration:300,delay:100,easing:[.1,.82,.25,1]});var{product:e,sessionId:t}=this.props;(0,l.logFullImageView)({product:(0,h.unproxy)(e),catalogSessionId:t}),(0,l.logImageCarouselModalView)({product:(0,h.unproxy)(e),catalogSessionId:t})}componentDidUpdate(e,t){var{product:a,sessionId:r}=e;t.activeImgIndex!==this.state.activeImgIndex&&(this.scrollToActive(!0),(0,l.logFullImageView)({product:(0,h.unproxy)(a),catalogSessionId:r}))}render(){var e=this.getThumbs(),{product:t,productImageCollection:a}=this.props,r=a.length,i=this.state.activeImgIndex,n=i>0?this.onPrev:null,o=i+1<r?this.onNext:null;return s.createElement("div",{className:this.state.imgZoomed?"img-zoomed-in":null},s.createElement("div",{className:d.default.thumbsContainer,ref:this._setRefThumbsContainer},s.createElement("div",{ref:this._setRefScrollContainer,className:d.default.scrollContainer,dir:"ltr"},s.createElement(p.default,{className:d.default.viewerThumbs,transitionName:"thumb-scale"},e))),s.createElement(u.default,{mediaData:a.toArray()[this.state.activeImgIndex].mediaData,onBack:this.endFlow,onExitAnimation:this.willEndFlow,onNext:o,onPrev:n,onImgZoomIn:this.onImgZoomIn,getZoomNode:this.props.getZoomNode,zoomIn:this.zoomIn,product:t,sessionId:this.props.sessionId}))}}var _=(0,o.default)(m);t.default=_},58847:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(96066)),o=r(a(7470)),l=r(a(46478)),d=r(a(91581)),u=r(a(17957)),c=a(80898),h=r(a(60949)),f=r(a(14760)),p=r(a(40207)),m=r(a(82631)),_=a(40263);class v extends s.PureComponent{render(){var e,{product:t}=this.props,a=o.default.get(t.catalogWid);if(a){var r=s.createElement(h.default,{contact:a,selectable:!0,useVerifiedName:!0}),i=s.createElement(l.default,{id:a.id,size:40}),p=s.createElement("div",{className:f.default.productName},s.createElement(m.default,{className:f.default.productNameIcon,name:"business-description",display:"inline"}),s.createElement(d.default,{text:t.name,titlify:!0,ellipsify:!0}));e=s.createElement(n.default,{idle:!0,image:i,primary:r,secondary:p,theme:"media"})}else e=s.createElement(_.TextSpan,{theme:"large",className:f.default.infoName},s.createElement(d.default,{text:t.name,titlify:!0,ellipsify:!0}));return s.createElement("div",{className:f.default.mediaPanelHeader},s.createElement("div",{className:f.default.info},e),s.createElement("div",{className:f.default.mediaPanelTools},s.createElement(c.MenuBar,{key:"media-panel-header",theme:"strong"},s.createElement(c.MenuBarItem,{a8nText:"btn-close",icon:s.createElement(m.default,{name:"x-viewer"}),title:u.default.t(1558),onClick:this.props.onClose}))))}}v.CONCERNS={mediaData:["renderableUrl"],product:["name","catalogWid"]};var g=(0,p.default)(v,v.CONCERNS);t.default=g},99965:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(12436)),n=i(a(72779)),o=r(a(2784)),l=r(a(60519)),d=i(a(50935)),u=i(a(91581)),c=i(a(8603)),h=i(a(61195)),f=a(96645),p=i(a(61941)),m=i(a(58847)),_=i(a(44445)),v=i(a(40207)),g=a(11419),E=i(a(17693)),y=i(a(91378));class S extends o.PureComponent{constructor(e){super(e),this.setMediaImage=e=>this.mediaImage=e,this.onImageLoad=e=>{if(!this.zoomed){this.zoomed=!0;var t=this.state.zoomElement;t&&e&&this.props.zoomIn&&e instanceof HTMLElement&&this.animateZoom(t,e)}},this.animateZoom=(e,t)=>{var a=t.getBoundingClientRect(),r=e.getBoundingClientRect(),i=r.top-a.top,s=r.left-a.left,n=e.clientWidth/t.clientWidth;i-=(t.clientHeight-e.clientHeight)/2,s-=(t.clientWidth-e.clientWidth)/2,(0,y.default)(t,{opacity:[1,0],translateX:[0,s],translateY:[0,i],scale:[1,n]},{duration:d.default.MEDIA_VIEWER.ANIMATION_DURATION,easing:[.1,.82,.25,1]}),this._refCaption.current&&(0,y.default)(this._refCaption.current,{opacity:[1,0]},{duration:d.default.MEDIA_VIEWER.ANIMATION_DURATION})},this.onScroll=e=>{Math.abs(e.deltaY)>7&&this.onClose()},this.onImgZoomIn=e=>{var t=this.mediaImage;e&&t&&(this.listenToMouseMove=t.heightOverflow>0||t.widthOverflow>0),this.setState({imgZoomed:e}),this.props.onImgZoomIn(e)},this.onZoomOut=e=>{var t=this.mediaImage;t&&this.state.imgZoomed&&t.onImageClick(e)},this.onMouseMove=e=>{this.handleMouseMove(e.pageX,e.pageY)},this._handleMouseMove=(e,t)=>{var a=this.mediaImage;if(a){var r=a.getInsideContainer();if(r&&r instanceof HTMLElement){var i=a.getOutsideContainer();if(i&&i instanceof HTMLElement){var{translateX:s,translateY:n}=a.getTranslatePosition(i,e,t);(0,y.default)(r,"stop"),(0,y.default)(r,{translateX:s,translateY:n,scale:d.default.MEDIA_VIEWER.ZOOM_IN_FACTOR},{duration:0})}}}},this.onClose=()=>{var e;if(!this.closing){if(this.closing=!0,(0,g.isFunction)(this.props.onExitAnimation)&&this.props.onExitAnimation(),!this.props.getZoomNode)return this.props.onBack();var t=this.props.getZoomNode();if(!t)return this.props.onBack();var a=(0,p.default)(null===(e=this.mediaImage)||void 0===e?void 0:e.getInsideContainer(),"this.mediaImage?.getInsideContainer()"),r=a.getBoundingClientRect(),i=t.getBoundingClientRect(),s=i.top-r.top,n=i.left-r.left,o=t.clientWidth/a.clientWidth;s-=(a.clientHeight-t.clientHeight)/2,n-=(a.clientWidth-t.clientWidth)/2,(0,y.default)(a,{translateX:[n,0],translateY:[s,0],scale:[o,1]},{duration:200,easing:[.1,.82,.25,1]}).then((()=>{this.props.onBack()}))}},this.zoomed=!1,this.closing=!1,this._refCaption=o.createRef();var t=this.props.mediaData.mediaStage===f.MEDIA_DATA_STAGE.RESOLVED&&this.props.zoomIn&&this.props.getZoomNode?this.props.getZoomNode():null;this.state={imgZoomed:!1,zoomElement:t},this.handleMouseMove=(0,s.default)(this._handleMouseMove)}render(){var e,{mediaData:t,product:a}=this.props,r=o.createElement(h.default,{key:t.renderableUrl,mediaData:t,onLoad:this.onImageLoad,onImgZoomIn:this.onImgZoomIn,ref:this.setMediaImage});if(a.description){var i=this.props.zoomIn&&(t.isGif||t.type===c.default.TYPE.IMAGE);e=o.createElement("span",{className:{[_.default.captionHidden]:i},ref:this._refCaption},o.createElement(u.default,{text:a.description,className:_.default.mediaCaption}))}var s=(0,n.default)(_.default.media,{[_.default.mediaWithCaption]:!!e}),d=o.createElement("div",{className:(0,n.default)(_.default.btnMediaNext)},o.createElement(l.default,{type:l.ButtonType.Next,onClick:this.props.onNext||(e=>e.stopPropagation()),onKeyDown:this.props.onNext||(()=>{}),disabled:!this.props.onNext||this.state.imgZoomed})),f=o.createElement("div",{className:(0,n.default)(_.default.btnMediaPrev)},o.createElement(l.default,{type:l.ButtonType.Prev,onClick:this.props.onPrev||(e=>e.stopPropagation()),onKeyDown:this.props.onPrev||(()=>{}),disabled:!this.props.onPrev||this.state.imgZoomed})),p=(0,n.default)("overlay",_.default.mediaViewer,{[_.default.mediaViewerAnimate]:this.props.zoomIn,[_.default.cursorZoomOut]:this.state.imgZoomed}),v=this.state.imgZoomed?null:this.onScroll,g=this.state.imgZoomed?null:this.onClose,y=this.state.imgZoomed&&this.listenToMouseMove?this.onMouseMove:null,S=this.state.imgZoomed?this.onZoomOut:null;return o.createElement(E.default,{displayName:"ProductViewer",escapable:!0,requestDismiss:this.onClose},o.createElement("div",{className:p,"data-animate-media-viewer":!0,onClick:S,onMouseMove:y},o.createElement(m.default,{mediaData:t,onClose:this.onClose,product:this.props.product}),o.createElement("div",{className:_.default.mediaContent,dir:"ltr",onWheel:v,onClick:g},f,o.createElement("div",{className:s},o.createElement("div",{className:_.default.media},r),e),d)))}}S.CONCERNS={mediaData:["mediaStage","renderableUrl","isGif","type"],product:["description"]};var C=(0,v.default)(S,S.CONCERNS);t.default=C},92209:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.ProductThumbPlaceholder=h,t.default=void 0;var s=i(a(72779)),n=r(a(2784)),o=a(13414),l=a(96645),d=i(a(55080)),u=i(a(40207)),c=i(a(82631));function h({onClick:e,className:t}){return n.createElement("div",{className:(0,s.default)(t,d.default.mediaCanvas,d.default.placeholder),onClick:e},n.createElement(c.default,{name:"business-description"}))}class f extends n.Component{constructor(...e){super(...e),this._refImageContainer=n.createRef()}componentDidMount(){this.props.imgRef&&this.props.imgRef(this.img)}componentWillUnmount(){this.props.imgRef&&this.props.imgRef(null)}getImageContainerElement(){return this._refImageContainer.current}render(){var e,t,{mediaData:a,theme:r,active:i,onClick:u,badge:c,overlayContent:f}=this.props;a.mediaStage===l.MEDIA_DATA_STAGE.RESOLVED?(e=n.createElement("div",{className:d.default.mediaCanvas,style:{backgroundImage:"url(".concat(a.renderableUrl,")")},onClick:u,ref:(0,o.GetRef)((e=>{this.img=e}))}),null!=f&&(t=n.createElement("div",{className:d.default.overlay},f))):e=a.mediaStage===l.MEDIA_DATA_STAGE.PREPARING?n.createElement(h,{className:this.props.className,onClick:this.props.onClick}):a.mediaStage===l.MEDIA_DATA_STAGE.ERROR_MISSING?null:n.createElement("div",{className:d.default.mediaCanvas});var p=(0,s.default)(this.props.className,{[d.default.canvasSecondRow]:"hideableSecondRow"===r,[d.default.canvasComponent]:"list"!==r,[d.default.list]:"list"===r,[d.default.viewerFlow]:"viewerFlow"===r,[d.default.active]:!0===i});if(this.props.large)return n.createElement("div",{className:d.default.canvasComponentLarge},e);var m=n.createElement("div",{ref:this._refImageContainer,className:p},n.createElement("div",{className:d.default.canvasBody}),e,t,c);return"list"===r?n.createElement("div",{className:d.default.listWrapper},m):m}}f.CONCERNS={mediaData:["mediaStage","mediaBlob","renderableUrl","preview"]};var p=(0,u.default)(f,f.CONCERNS);t.default=p},67257:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a=null===(t=e.product.getPreviewImage())||void 0===t?void 0:t.mediaData;if(!a)return null;return n.createElement(h,(0,s.default)({mediaData:a},e))};var s=i(a(58527)),n=r(a(2784)),o=i(a(16348)),l=a(96645),d=i(a(55074)),u=i(a(40207));class c extends n.Component{render(){var{product:e,mediaData:t,selections:a,active:r,onClick:i}=this.props,s=t.mediaStage!==l.MEDIA_DATA_STAGE.RESOLVED,u=s?()=>{}:i;return n.createElement(o.default,{key:e.id.toString(),model:e,selections:a,disabled:s},n.createElement(d.default,{product:e,onClick:u,theme:"product-checkbox",active:r,isMuted:s}))}}c.CONCERNS={mediaData:["mediaStage"]};var h=(0,u.default)(c,c.CONCERNS)},15553:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(79711)),o=r(a(50935)),l=r(a(7470)),d=r(a(17957)),u=r(a(20642)),c=a(80898),h=r(a(57185)),f=r(a(89551)),p=r(a(82631));class m extends s.PureComponent{constructor(){super(...arguments),this._onUnreadChange=()=>{var e=h.default.getUnexpired(!0).some((e=>{var t=this._lastViewerTimestamps[e.id.toString()],a=!t||e.t>t;return!e.contact.statusMute&&e.unreadCount>0&&a}));e!==this.state.hasUnread&&this.setState({hasUnread:e})},this._updateViewerTimestamps=()=>{h.default.getUnexpired(!0).forEach((e=>{this._lastViewerTimestamps[e.id.toString()]=e.t}))},this.onFlowEnd=()=>{this._updateViewerTimestamps(),this.setState({hasUnread:!1})},this._onStatus=e=>{e.preventDefault(),n.default.openModalMedia(s.createElement(f.default,{onFlowEnd:this.onFlowEnd,removeTopDrawer:!1}),{transition:"status-v3-modal"})};var e=h.default.getUnexpired(!0).some((e=>e.unreadCount>0&&!e.contact.statusMute));this.state={hasUnread:e},this._lastViewerTimestamps={}}componentDidMount(){this.props.listeners.add(h.default,"add remove change:unreadCount change:t",this._onUnreadChange),this.props.listeners.add(l.default,o.default.COLLECTION_HAS_SYNCED,this._onUnreadChange)}render(){var e=this.state.hasUnread?s.createElement(p.default,{name:"status-v3-unread",directional:!0}):s.createElement(p.default,{name:"status-v3"});return s.createElement(c.MenuBarItem,{a8nText:"menu-bar-status",icon:e,title:d.default.t(1694),onClick:this._onStatus})}}m.CONCERNS={statusV3:["unreadCount"]};var _=(0,u.default)(m);t.default=_},28006:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(79711)),o=r(a(73499)),l=(r(a(8603)),r(a(85472)));class d extends s.Component{constructor(e){super(e),this.state=this.getInitialMediaStyle()}getInitialMediaStyle(){var e,t=.67;if(this.props.initialStyle)return{initialStyle:this.props.initialStyle,aspectRatio:t};n.default.getConversationHeaderOffset((t=>{e=t}));var a=330*t;return e||(e={right:window.innerWidth,bottom:0}),{initialStyle:{width:a,left:e.right<window.innerWidth?e.right-a-10:window.innerWidth-a-10,bottom:window.innerHeight-10-330-e.bottom},aspectRatio:t}}render(){return s.createElement(l.default,{aspectRatio:.67,margin:{x:10,y:10},minWidth:145,className:o.default.voipFloater,initialStyle:this.state.initialStyle,escapeConversationHeader:!0},this.props.children)}}t.default=d},74251:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(28267));class s extends i.default{constructor(){super(),this.openVoipWindow=()=>{this.manager&&this.manager.openVoipWindow()},this.closeVoipWindow=()=>{this.manager&&this.manager.closeVoipWindow()}}register(e){this.manager=e}unregister(){this.manager&&this.manager.closeVoipWindow(),this.manager=null}}var n=new s;t.default=n},68849:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(28006)),o=r(a(18120)),l=r(a(51269)),d=r(a(20642)),u=r(a(74824)),c=r(a(74251)),h=r(a(50236)),f=r(a(47441));class p extends s.Component{constructor(...e){super(...e),this.state={isOpen:!1},this.openVoipWindow=()=>{o.default.supportsFeature(o.default.F.WEB_VOIP_VOICE_CALL)&&this.setState({isOpen:!0})},this.closeVoipWindow=()=>{this.setState({isOpen:!1})},this.onCallAccept=()=>{},this.onCallReject=()=>{this.setState({isOpen:!1})},this.onCallEnd=()=>{this.setState({isOpen:!1})}}componentDidMount(){c.default.register(this)}componentWillUnmount(){c.default.unregister()}render(){return this.state.isOpen?s.createElement(u.default,{transitionName:"voip",className:h.default.wrapper,component:"div"},s.createElement(n.default,null,s.createElement(f.default,{callUi:l.default,onCallAccept:this.onCallAccept,onCallReject:this.onCallReject,onCallEnd:this.onCallEnd}))):null}}var m=(0,d.default)(p);t.default=m},47441:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(7470)),o=i(a(46478)),l=r(a(6016)),d=r(a(40915)),u=r(a(68476)),c=r(a(17957)),h=r(a(20642)),f=r(a(60949)),p=r(a(40207)),m=r(a(64786)),_=r(a(61266)),v=a(35205);class g extends s.PureComponent{constructor(...e){super(...e),this.state={isMouseOver:!1,isFullscreenMode:l.default.isFullscreenMode},this._toggleMute=()=>{this.props.callUi.muted=!this.props.callUi.muted,m.default.mute(this.props.callUi.muted)},this.setRefContainer=e=>{this.refContainer=e},this.handleFullscreenToggleButtonClick=e=>{this.state.isFullscreenMode?this.handleExitFullscreen(e):this.handleEnterFullscreen(e)},this.handleEnterFullscreen=e=>{e.stopPropagation(),l.default.requestFullscreen(this.refContainer)},this.handleExitFullscreen=e=>{e.stopPropagation(),l.default.exitFullscreen()},this._onWebrtcStop=()=>{m.default.endCall(),this.props.onCallEnd()},this._onWebrtcStart=()=>{var e=this.props.callUi.to,t=this.props.callUi.type;if(!e)throw new Error("Callee is null.");if(m.default.registerWebRTCCallback((e=>{"audio"===e.track.kind&&this._refAudioElement&&(this._refAudioElement.srcObject=e.streams[0]),"video"===e.track.kind&&this._refVideoElement&&"video"===t&&(this._refVideoElement.srcObject=e.streams[0])})),"video"===t){if(!u.default)throw new Error("VoipWindow:onWebrtcStart no video capability");(0,u.default)({audio:!1,video:!0}).then((e=>{this._refVideoPreviewElement&&(this._refVideoPreviewElement.srcObject=e)}))}m.default.callStart(e,"video"===t)}}componentDidMount(){this.props.listeners.add(l.default,"fullscreen_change",(()=>{l.default.isFullscreenMode&&l.default.fullscreenElement===this.refContainer?this.setState({isFullscreenMode:!0}):l.default.isFullscreenMode||this.setState({isFullscreenMode:!1})}))}render(){var e,t,{onCallAccept:r,onCallReject:i,onCallEnd:l}=this.props,{state:u,outgoing:h,from:p,to:m,type:g}=this.props.callUi,E=h?m:p,y=n.default.get(E||""),S=y?s.createElement("div",{className:_.default.participantName},s.createElement(f.default,{contact:y,titlify:!0,ellipsify:!0})):null,C=y?s.createElement(o.default,{id:y.id,size:82,quality:o.DETAIL_IMAGE_QUALITY.HIGH}):null,T=s.createElement("div",{className:_.default.actionRow},s.createElement("div",{className:_.default.btnGroup},s.createElement("button",{className:_.default.btnReject,onClick:i}),s.createElement("button",{className:_.default.btnAccept,onClick:r}))),M=s.createElement("div",{className:_.default.actionRow},s.createElement("div",{className:_.default.btnGroup},s.createElement("button",{className:_.default.btnMute,onClick:this._toggleMute}),s.createElement("button",{className:_.default.btnEnd,onClick:l}))),b=s.createElement("div",{className:_.default.actionRow},s.createElement("div",{className:_.default.btnGroup},s.createElement("button",{className:_.default.btnEnd,onClick:l}))),P=a(18120).default;if(P.supportsAnyFeature(P.F.WEB_VOIP_VOICE_CALL,P.F.WEB_VOIP_VIDEO_CALL)){b=s.createElement("div",{className:_.default.actionRow},s.createElement("div",{className:_.default.btnGroup},s.createElement("button",{className:_.default.btnEnd,onClick:this._onWebrtcStop}),s.createElement("button",{className:_.default.btnAccept,onClick:this._onWebrtcStart})));var A=P.supportsFeature(P.F.WEB_VOIP_VIDEO_CALL)&&"video"===g?s.createElement("video",{className:_.default.webrtcVideo,id:"webRtcVideo",autoPlay:!0,ref:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((e=>{this._refVideoElement=e}))}):null,I=P.supportsFeature(P.F.WEB_VOIP_VIDEO_CALL)&&"video"===g?s.createElement("video",{className:_.default.webrtcVideoPreview,id:"webRtcVideoPreview",autoPlay:!0,ref:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((e=>{this._refVideoPreviewElement=e}))}):null;e=s.createElement("div",{className:_.default.webrtcCanvas},A,I,s.createElement("audio",{className:_.default.webrtcAudio,id:"webRtcAudio",controls:!0,autoPlay:!0,ref:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((e=>{this._refAudioElement=e}))}))}switch(u){case v.CALL_STATES.INCOMING_RING:t=T;break;case v.CALL_STATES.ACTIVE:t=M;break;default:t=b}var O=s.createElement("div",{className:_.default.callTitle},c.default.t(1839)),N=s.createElement(d.default,{isFullscreenMode:this.state.isFullscreenMode,onClick:this.handleFullscreenToggleButtonClick});return s.createElement("div",{className:_.default.body,ref:this.setRefContainer,onMouseEnter:()=>{this.setState({isMouseOver:!0})},onMouseLeave:()=>{this.setState({isMouseOver:!1})}},O,S,C,e,this.state.isMouseOver&&N,t)}}g.CONCERNS={callUi:["state","muted","speaker","outgoing","from","to","type"]};var E=(0,h.default)((0,p.default)(g,g.CONCERNS));t.default=E},26360:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ATTACH_MEDIA_STATE=void 0;var s=i(a(19976)),n=i(a(70417)),o=r(a(61247)),l=r(a(96452)),d=a(99888),u=a(28278),c=i(a(97626)),h=i(a(40210)),f=a(27e3),p=i(a(25012));a(59420);function m(){var e=(0,s.default)(["AttachMedia:processFile convert unexpected error to InvalidMediaFileType:"]);return m=function(){return e},e}function _(){var e=(0,s.default)(["Invariant violated, processed file is not previewable"]);return _=function(){return e},e}var v={READY:"ready",PROCESSING:"processing",ERROR:"error"};t.ATTACH_MEDIA_STATE=v;class g extends o.default{constructor(...e){super(...e),this.id=(0,o.prop)(),this.file=(0,o.prop)(),this.uiProcessed=(0,o.prop)(!1),this.fileOrigin=(0,o.prop)(),this.isVcardOverMmsDocument=(0,o.prop)(!1),this.state=(0,o.session)(),this.mediaPrep=(0,o.session)(),this.mimetype=(0,o.session)(),this.originalMimetype=(0,o.session)(),this.processPromise=(0,o.session)(),this.exception=(0,o.session)(),this.caption=(0,o.session)(),this.type=(0,o.session)(f.TYPE.UNKNOWN),this.mediaEditorData=(0,o.session)(),this.editedFile=(0,o.session)(),this._mediaEditorUndoStack=(0,o.session)((()=>[])),this._mediaEditorRedoStack=(0,o.session)((()=>[])),this.preview=(0,o.session)(),this.fullPreview=(0,o.session)(),this.fullPreviewSize=(0,o.session)(),this.filename=(0,o.session)(),this.documentPageCount=(0,o.session)(),this.isGif=(0,o.session)(),this.gifAttribution=(0,o.session)(),this.previewable=(0,o.derived)(this._previewable,["preview","fullPreview","type","filename","fullPreviewSize","mimetype"]),this.filesize=(0,o.derived)(this._filesize,["file"]),this.fileExt=(0,o.derived)(this._fileExt,["filename"])}_previewable(){if(!this.type||!this.mimetype||!this.fullPreview)return!1;switch(this.type){case f.TYPE.DOCUMENT:return!!this.filename;case f.TYPE.IMAGE:case f.TYPE.VIDEO:return!(!this.fullPreviewSize||!this.preview);case f.TYPE.AUDIO:case f.TYPE.PTT:case f.TYPE.UNKNOWN:return!0;default:throw new Error("Unsupported attach media type ".concat(this.type))}}_filesize(){return this.file instanceof p.default?this.file.size():this.file instanceof Blob?this.file.size:null}_fileExt(){return this.filename?(0,d.getFileExtension)(this.filename):null}initialize(){if(super.initialize(),!(this.file instanceof Promise))throw new Error("cannot process non-promise file");this.processAttachment(this.file)}processAttachment(e){this.state=v.PROCESSING,this.processPromise=this._processAttachmentPromiseHelper(e).then((()=>{}))}_processAttachmentData(e){if(this.fileOrigin===h.default.MEDIA_PICKER_ORIGIN_TYPE.CHAT_PHOTO_LIBRARY){var t=e.file.name;return(0,d.copyFile)(e.file).then((a=>(0,n.default)((0,n.default)({},e),{},{filename:t,file:a})))}return Promise.resolve(e)}_processAttachmentPromiseHelper(e){return e.then((e=>this._processAttachmentData(e))).then((e=>{this.set(e);var t={},{file:a,filename:r,isGif:i,gifAttribution:s,isVcardOverMmsDocument:n,documentPageCount:o}=e;i?(t.asGif=!0,t.gifAttribution=s):e.type===d.FILETYPE.DOCUMENT&&(t.asDocument=!0,t.filename=r,t.isVcardOverMmsDocument=n,t.documentPageCount=o),t.precomputedFields={fullHeight:e.fullPreviewSize?e.fullPreviewSize.height:void 0,fullWidth:e.fullPreviewSize?e.fullPreviewSize.width:void 0,preview:e.preview,duration:e.duration};var l=p.default.createFromData(a,a.type),c=(0,u.prepRawMedia)(l,t);return this.set({mediaPrep:c}),c.waitForPrep().then((t=>{var a=t.documentPreview,r=t.mediaBlob instanceof p.default?window.URL.createObjectURL(t.mediaBlob.forceToBlob()):window.URL.createObjectURL(t.mediaBlob),i={file:t.mediaBlob,fullPreview:r,type:t.type,filename:t.filename,mimetype:t.mimetype,originalMimetype:e.mimetype,preview:t.preview,state:v.READY,isGif:t.isGif,fullPreviewSize:void 0,documentPageCount:o,isVcardOverMmsDocument:t.isVcardOverMmsDocument};t.fullWidth&&t.fullHeight&&(i.fullPreviewSize={height:t.fullHeight,width:t.fullWidth}),t.type===f.TYPE.IMAGE&&(i.preview=r),t.type===f.TYPE.DOCUMENT&&a&&(i.fullPreview=a.url,i.preview=a.thumbUrl,i.fullPreviewSize={height:a.height,width:a.width},i.documentPageCount=a.pdfPages),this.set(i),this.previewable||(__LOG__(4,void 0,new Error,!0)(_()),SEND_LOGS("AttachMedia processFile"))}))})).catchTypes(l.InvalidMediaFileType,l.InvalidImageFileType,(t=>{if(this.isGif||this.type===d.FILETYPE.DOCUMENT)throw t;return this._processAttachmentPromiseHelper(e.then((e=>(e.type=d.FILETYPE.DOCUMENT,e))))})).catchTypes3(c.default,l.MediaFileFailedLoad,l.MediaFileEmpty,(e=>(this.set({exception:e,state:v.ERROR}),this))).catch((()=>(__LOG__(3)(m()),this.set({exception:new l.InvalidMediaFileType,state:v.ERROR}),this)))}sendToChat(e,t){if(!this.mediaPrep)return Promise.reject(new Error("MediaPrep not available"));if(this.state===v.ERROR)return Promise.reject(new Error(this.exception));if(!(this.state!==v.PROCESSING||this.previewable&&t.addEvenWhilePreparing))return Promise.reject(new Error("Media still processing"));if(this.state===v.READY)return this.mediaPrep.sendToChat(e,t);var a={mimetype:this.mimetype};switch(this.type){case f.TYPE.VIDEO:a.isGif=this.isGif,a.gifAttribution=this.gifAttribution;case f.TYPE.IMAGE:a.width=this.fullPreviewSize.width,a.height=this.fullPreviewSize.height,a.body=this.preview,t.placeholderProps=a;break;case f.TYPE.DOCUMENT:a.pageCount=this.documentPageCount,a.filename=this.filename,a.body=this.preview,t.placeholderProps=a;break;case f.TYPE.AUDIO:case f.TYPE.PTT:}return this.mediaPrep.sendToChat(e,t)}getFileType(){if(!(this.file instanceof Blob||this.file instanceof File))throw new Error("expected file to be a Blob or File");return(0,d.typeFromMimetype)(this.file.type)}isViewableOnce(){return new Set([f.TYPE.IMAGE,f.TYPE.VIDEO]).has(this.type)&&!this.isGif}delete(){this.fullPreview&&window.URL.revokeObjectURL(this.fullPreview),super.delete()}updateMediaEditorData(e,t){return this.mediaEditorData===e||(t.undoable&&(this._mediaEditorUndoStack.push(this.mediaEditorData),this._mediaEditorRedoStack=[]),this.mediaEditorData=e),this.mediaEditorData}undoMediaEditorData(){this.canUndoMediaEditorData()&&(this._mediaEditorRedoStack.push(this.mediaEditorData),this.mediaEditorData=this._mediaEditorUndoStack.pop())}redoMediaEditorData(){this.canRedoMediaEditorData()&&(this._mediaEditorUndoStack.push(this.mediaEditorData),this.mediaEditorData=this._mediaEditorRedoStack.pop())}canUndoMediaEditorData(){return this._mediaEditorUndoStack.length>0}canRedoMediaEditorData(){return this._mediaEditorRedoStack.length>0}updateEditedFile(e){this.editedFile=e}updatePreview(e){window.URL.revokeObjectURL(this.preview),this.preview=e}updateFullPreview(e){window.URL.revokeObjectURL(this.fullPreview),this.fullPreview=e}updateCaption(e){this.caption=e}}g.Proxy="attachMedia";var E=(0,o.defineModel)(g);t.default=E},36543:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(26360)),n=r(a(54019)),o=r(a(50935)),l=i(a(96452)),d=a(99888),u=r(a(17957)),c=r(a(44422)),h=r(a(97626)),f=r(a(72424)),p=r(a(73664)),{IMAGE:m,VIDEO:_,DOCUMENT:v,AUDIO:g}=d.FILETYPE,{READY:E,ERROR:y,PROCESSING:S}=s.ATTACH_MEDIA_STATE,C=1;class T extends n.default{constructor({chatParticipantCount:e}){super(),this.errorMsgs=null,this.ignored=0,this.mediaPickerStatsLogger=new c.default,this.selection=new p.default([],(e=>e.id),"prev"),this.mediaPickerStatsLogger.chatRecipients=e,this.listenTo(this.selection,"all",this._handleSelectionEvents.bind(this))}_handleSelectionEvents(e,t){"focus"!==t&&!1!==t||this.trigger("active-change")}removeSingleton(e,t){e&&(t||this.mediaPickerStatsLogger.logDelete(e.id),e.url&&window.URL.revokeObjectURL(e.url),e.original&&e.original.url&&window.URL.revokeObjectURL(e.original.url))}remove(e,t){var a=super.remove(e,t);return a.forEach((e=>this.removeSingleton(e,t))),this.selection.init(this.getPreviewableMedias(),!0),a}delete(){super.delete(),this.forEach((e=>this.removeSingleton(e))),this.selection.init(this.getPreviewableMedias(),!0)}reorder(e,t){return this.reorderMutate(e,t),this.selection.init(this.getPreviewableMedias(),!0),this.getPreviewableMedias()}replace(e,t){var a=this.get(e);if(a){var r=this.indexOf(a),i=a.caption;this.remove(a,{silent:!0}),a.delete();var n=new s.default({id:e,caption:i,file:this._normalizeAttachment(t)});return this.add(n,r?{at:r}:{}),n.processPromise}}getValidMedias(){return this.filter((e=>e.state===E||e.state===S))}getPreviewableMedias(){return this.filter((e=>e.previewable))}getActive(){return this.selection.getVal()}setActive(e){this.selection.setVal(e)}unsetActive(){this.selection.unset()}setNextAsActive(){var e=this.selection.list.length-1;return-1===this.selection.index||this.selection.index===e||this.selection.setNext(),this.selection.getVal()}setPrevAsActive(){return-1===this.selection.index||0===this.selection.index||this.selection.setPrev(),this.selection.getVal()}processAttachments(e,t){var a=this.getPreviewableMedias().length,r=e.length+a>o.default.MAX_FILES?Math.max(o.default.MAX_FILES-a,0):e.length,i=e.length-r;0===r?i&&this.trigger("max_upload_limit",i):this.ignore(i);var n=e.slice(0,r).map((e=>new s.default({id:C++,file:this._normalizeAttachment(e),fileOrigin:t})));this.add(n);var l=this.getActive();return this.unsetActive(),Promise.all(e).then((()=>{this._attemptToSetNextActiveFromAdded(n,l)})),Promise.map(n,(e=>e.processPromise)).then((()=>(n.forEach((e=>this._logMediaAdd(e,t))),this._attemptToSetNextActiveFromAdded(n,l))))}_attemptToSetNextActiveFromAdded(e,t){if(!this.getActive()&&!this.getModelsArray().some((e=>e.state===S&&!e.previewable))){var a=e.find((e=>e.previewable));a||(a=t),this.selection.init(this.getPreviewableMedias()),a&&this.setActive(a)}}_logMediaAdd(e,t){if(null!=t){var a=e.isGif?"gif":e.type;this.mediaPickerStatsLogger.logAdd(e.id,a,t)}}_normalizeAttachment(e){return Promise.resolve(e).then((e=>(e.filename||(e.filename=e.file.name),e.mimetype||(e.mimetype=e.file.type),e.type||(e.type=(0,d.typeFromMimetype)(e.file.type)),!e.type&&e.mimetype&&(e.type=(0,d.typeFromMimetype)(e.mimetype)),e)))}ignore(e){e>0&&(this.ignored+=e)}uiProcessMsgs(){var e,t=[],a=0,r=0,i=0,s=0,n=0,d=0,c=0,p=0,E=0,C=0,T=0,M=!1,b=u.default.filesize(f.default.media),P=u.default.filesize(f.default.maxFileSize),A=u.default.filesize(1024*f.default.vcardMaxSizeKb);if(this.forEach((t=>{if(!t.uiProcessed&&(!e&&t.previewable&&(e=t),t.state!==S&&(t.uiProcessed=!0,t.state===y)))if(t.exception instanceof h.default)switch(t.getFileType()){case m:a+=1;break;case _:r+=1;break;case g:i+=1;break;case v:t.isVcardOverMmsDocument?n+=t.documentPageCount:s+=1}else if(t.exception instanceof l.MediaFileEmpty)switch(t.getFileType()){case m:d+=1;break;case _:c+=1;break;case g:p+=1;break;case v:t.isVcardOverMmsDocument?C+=t.documentPageCount:E+=1}else t.exception instanceof l.MediaFileFailedLoad?M=!0:T+=1})),a>0&&t.push(u.default.t(816,{number:a,_plural:a,maxSize:b})),r>0&&t.push(u.default.t(1421,{number:r,_plural:r,maxSize:b})),i>0&&t.push(u.default.t(244,{number:i,_plural:i,maxSize:b})),s>0&&t.push(u.default.t(566,{number:s,_plural:s,maxSize:P})),n>0&&t.push(u.default.t(523,{_plural:n,maxSize:A})),d>0&&t.push(u.default.t(808,{number:d,_plural:d})),c>0&&t.push(u.default.t(1419,{number:c,_plural:c})),p>0&&t.push(u.default.t(239,{number:p,_plural:p})),E>0&&t.push(u.default.t(565,{number:E,_plural:E})),C>0&&t.push(u.default.t(522,{number:C,_plural:C})),T>0&&t.push(u.default.t(674,{number:T,_plural:T})),M&&(t=[]).push(u.default.t(918)),t.length>1){t=[];var I=a+r+i+s,O=d+c+p+E,N=I+O+T;0===T?(0!==I&&t.push(u.default.t(675,{number:I,_plural:I,maxSize:P})),0!==O&&t.push(u.default.t(671,{number:O,_plural:O}))):t.push(u.default.t(673,{number:N,_plural:N}))}var w=t.join(" ");this.errorMsgs=w,this.ignore(this.getPreviewableMedias().length-o.default.MAX_FILES);var D=this.ignored;return this.ignored=0,D&&this.trigger("max_upload_limit",D),T>0&&this.trigger("files_not_supported"),{errorMsgs:w}}canSend(){return!this.getModelsArray().some((e=>e.state===S&&!e.previewable))}}t.default=T,T.model=s.default},44764:(e,t,a)=>{"use strict";var r=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(92436),s=r(a(61247));class n extends s.default{constructor(...e){super(...e),this.isMicrophoneAvailable=(0,s.prop)(!1),this.isSpeakerAvailable=(0,s.prop)(!1),this.isVideoAvailable=(0,s.prop)(!1)}initialize(){super.initialize()}refreshDeviceList(e){this._deviceList=e,this.isVideoAvailable=e.some((e=>e.deviceType===i.AVDeviceType.Video&&e.isConnected)),this.isMicrophoneAvailable=e.some((e=>e.deviceType===i.AVDeviceType.AudioInput&&e.isConnected)),this.isSpeakerAvailable=e.some((e=>e.deviceType===i.AVDeviceType.AudioOutput&&e.isConnected))}}var o=new((0,s.defineModel)(n));t.default=o},64329:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(61247)),n=r(a(68384));class o extends s.default{constructor(...e){super(...e),this.id=(0,s.prop)()}contact(){return a(7470).default.gadd(this.id)}getCollection(){return a(79148).default}}o.Proxy="blocklist",o.idClass=n.default;var l=(0,s.defineModel)(o);t.default=l},79148:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BlocklistCollection=void 0;var i=r(a(54019)),s=r(a(64329));class n extends i.default{constructor(){super(),this.listenTo(this,"add",this.blockContact),this.listenTo(this,"remove",this.unblockContact)}blockContact(e){e.contact().isContactBlocked=!0}unblockContact(e){e.contact().isContactBlocked=!1}}t.BlocklistCollection=n,n.model=s.default;var o=new n;t.default=o},95167:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BUSINESS_CATEGORY_EMPTY_STR_ID=void 0;var s=i(a(61247)),n=r(a(68384));t.BUSINESS_CATEGORY_EMPTY_STR_ID="__empty_query__";class o extends s.default{constructor(...e){super(...e),this.id=(0,s.prop)(),this.categories=(0,s.prop)()}getCollection(){return a(75472).default}}o.Proxy="BusinessCategoriesResult",o.idClass=n.default;var l=(0,s.defineModel)(o);t.default=l},75472:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BusinessCategoriesResultCollection=void 0;var i=r(a(54019)),s=r(a(95167)),n=a(99774);class o extends i.default{_find(e){return(0,n.queryBusinessCategories)(e).then((t=>new s.default({id:e,categories:t})))}}t.BusinessCategoriesResultCollection=o,o.model=s.default,o.staleCollection=!0;var l=new o;t.default=l},88137:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULTS=t.default=t.MAX_BUSINESS_CATEGORIES=void 0;var s=i(a(61247)),n=r(a(68384));t.MAX_BUSINESS_CATEGORIES=3;class o extends s.default{constructor(...e){super(...e),this.id=(0,s.prop)(),this.tag=(0,s.prop)(),this.description=(0,s.prop)(),this.categories=(0,s.prop)(),this.profileOptions=(0,s.prop)(),this.email=(0,s.prop)(),this.website=(0,s.prop)(),this.latitude=(0,s.prop)(),this.longitude=(0,s.prop)(),this.businessHours=(0,s.prop)(),this.catalogStatus=(0,s.prop)(),this.address=(0,s.prop)(),this.structuredAddress=(0,s.prop)(),this.stale=(0,s.session)(!0)}markStale(){this.stale=!0,this.hasObservers()&&this.getCollection().find(this.id)}getCollection(){return a(89216).default}isValid(){return Array.isArray(this.categories)}}o.Proxy="businessProfile",o.idClass=n.default;var l=(0,s.defineModel)(o);t.default=l;t.DEFAULTS={description:null,email:null,website:null}},89216:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BusinessProfileCollection=t.CATALOG_EXISTS=void 0;var i=r(a(70417)),s=r(a(19976)),n=r(a(54019)),o=r(a(88137)),l=a(99774),d=a(80814);function u(){var e=(0,s.default)(["Store:BusinessProfile:handle Received invalid update from server"]);return u=function(){return e},e}function c(){var e=(0,s.default)(["Store:BusinessProfile:find No businessProfile found for ",""]);return c=function(){return e},e}function h(){var e=(0,s.default)(["Received invalid business profile response"]);return h=function(){return e},e}t.CATALOG_EXISTS="catalog_exists";class f extends n.default{_find(e){return this._findAndParse(e,{queryCatalog:!0})}_update(e){return this._findAndParse(e,{queryCatalog:!1})}_findAndParse(e,{queryCatalog:t}){var a=this.gadd(e);return(0,l.queryBusinessProfile)([{wid:a.id,tag:a.tag}]).then((a=>{if(!Array.isArray(a))return __LOG__(3)(h()),null;if(0===a.length)return __LOG__(2)(c(),String(e)),{id:e};var r=a[0],{wid:s,tag:n}=r,o={id:s,tag:n},{profile:l}=r;return l?(0,i.default)((0,i.default)({},(0,d.parseBusinessProfile)({id:r.wid,profile:l,queryCatalog:t})),o):o}))}onResume(){this.filter((e=>e.stale&&e.hasObservers())).map((e=>this.find(e.id)))}handle([e]){e&&null!=e.tag||__LOG__(3)(u());var t=this.gadd(e.wid);e.tag!==t.tag&&t.markStale()}getValid(e){var t=this.get(e);if(null==t?void 0:t.isValid())return t}}t.BusinessProfileCollection=f,f.model=o.default,f.staleCollection=!0;var p=new f;t.default=p},25975:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.COMMERCE_EXPERIENCE_TYPES=t.BUSINESS_HOUR_MODES=t.DAYS_OF_WEEK=void 0;t.DAYS_OF_WEEK=["sun","mon","tue","wed","thu","fri","sat"];t.BUSINESS_HOUR_MODES={OPEN_24H:"open_24h",SPECIFIC_HOURS:"specific_hours",APPOINTMENT_ONLY:"appointment_only"};var r=a(28103)({CATALOG:"catalog",NONE:"none",SHOP:"shop"});t.COMMERCE_EXPERIENCE_TYPES=r},80814:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.parseBusinessProfile=t.CATALOG_EXISTS=void 0;var i=r(a(70417)),s=r(a(19976)),n=r(a(22220)),o=a(88137),l=a(25975),d=r(a(65468)),u=r(a(7470));function c(){var e=(0,s.default)(["Store:BusinessProfile:missing catalog"]);return c=function(){return e},e}var h="catalog_exists";t.CATALOG_EXISTS=h;t.parseBusinessProfile=({profile:e,id:t,queryCatalog:a})=>{var r;if(!e)return{id:t};var{business_hours:s,catalog_status:f,structured_address:p,profile_options:m,address:_}=e,v=(0,n.default)(e,["business_hours","catalog_status","structured_address","profile_options","address"]),g={};return g.businessHours=s?(({config:e})=>{var t={};return e.forEach((e=>{var{day_of_week:a,mode:r}=e;if(r===l.BUSINESS_HOUR_MODES.SPECIFIC_HOURS){var{open_time:i,close_time:s}=e;t[a]||(t[a]={mode:r,hours:[]}),null!=i&&null!=s&&t[a].hours&&t[a].hours.push([i,s])}else t[a]={mode:r}})),{config:t}})(s):null,m&&(g.profileOptions={commerceExperience:m.commerce_experience,cartEnabled:m.cart_enabled}),(f&&f===h||(null===(r=g.profileOptions)||void 0===r?void 0:r.commerceExperience)===l.COMMERCE_EXPERIENCE_TYPES.CATALOG)&&(g.catalogStatus=f,a&&d.default.findCarouselCatalog(t).then((e=>{var a=Array.isArray(e)?e[0]:e;u.default.assertGet(t).businessCatalog=a})).catch((()=>__LOG__(3)(c())))),p?g.structuredAddress={streetAddress:p.street_address,cityId:p.city_id,localizedCityName:p.localized_city_name,zipCode:p.zip_code}:g.address=_||null,(0,i.default)((0,i.default)((0,i.default)((0,i.default)({},o.DEFAULTS),v),g),{},{id:t})}},25764:(e,t,a)=>{"use strict";var r=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(61247));class s extends i.default{constructor(...e){super(...e),this.id=(0,i.prop)(),this.displayText=(0,i.prop)(),this.selected=(0,i.session)(!1)}}s.Proxy="replyButton";var n=(0,i.defineModel)(s);t.default=n},50760:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ButtonCollection=void 0;var i=r(a(54019)),s=r(a(25764));class n extends i.default{}t.ButtonCollection=n,n.model=s.default;var o=n;t.default=o},1085:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,n=i(a(61247)),o=r(a(29155)),l=r(a(79711)),d=r(a(52737)),u=r(a(72424)),c=r(a(43711)),h=a(35205);class f extends n.default{constructor(...e){super(...e),this.id=(0,n.prop)(),this.peerJid=(0,n.prop)(),this.offerTime=(0,n.prop)(),this.isVideo=(0,n.prop)(!1),this.isGroup=(0,n.prop)(!1),this.groupCallParticipants=(0,n.prop)(),this.canHandleLocally=(0,n.prop)(!1),this.outgoing=(0,n.prop)(!1),this.webClientShouldHandle=(0,n.prop)(!1),this.participants=(0,n.collection)(o.default),this.callInfo=(0,n.prop)(),this._state=(0,n.prop)(),this._ringTimeout=(0,n.prop)()}getState(){return this._state}setState(e){var t,r=e;(t=this._state,r in m[t||"EMPTY"])&&(this.webClientShouldHandle||r===h.CALL_STATES.INCOMING_RING||(r=h.CALL_STATES.HANDLED_REMOTELY,s||(s=a(64786).default),s.callEndByHandledRemotely(this.id)),this._state=r,this.handleNotification())}handleNotification(){var e=this.getState();!d.default.tosShowCallNotification||!this.peerJid||(c.default.isVoiceCallEnabled()||u.default.webVoip)&&!this.isVideo||(c.default.isVideoCallEnabled()||u.default.webVoip)&&this.isVideo||(e===h.CALL_STATES.INCOMING_RING?l.default.alertCall(this.peerJid,this.id,this.isVideo,this.canHandleLocally):l.default.cancelCall(this.peerJid))}getCollection(){return a(79504).default}}f.Proxy="call";var p=(0,n.defineModel)(f);t.default=p;var m={EMPTY:{[h.CALL_STATES.INCOMING_RING]:!0,[h.CALL_STATES.OUTGOING_CALLING]:!0,[h.CALL_STATES.CONNECTING]:!0,[h.CALL_STATES.REJECTED]:!0,[h.CALL_STATES.HANDLED_REMOTELY]:!0,[h.CALL_STATES.ENDED]:!0,[h.CALL_STATES.FAILED]:!0},INCOMING_RING:{[h.CALL_STATES.HANDLED_REMOTELY]:!0,[h.CALL_STATES.CONNECTING]:!0,[h.CALL_STATES.ACTIVE]:!0,[h.CALL_STATES.REJECTED]:!0,[h.CALL_STATES.ENDED]:!0,[h.CALL_STATES.REMOTE_CALL_IN_PROGRESS]:!0,[h.CALL_STATES.FAILED]:!0},OUTGOING_CALLING:{[h.CALL_STATES.OUTGOING_RING]:!0,[h.CALL_STATES.CONNECTING]:!0,[h.CALL_STATES.ENDED]:!0,[h.CALL_STATES.FAILED]:!0,[h.CALL_STATES.ACTIVE]:!0,[h.CALL_STATES.NOT_ANSWERED]:!0,[h.CALL_STATES.REMOTE_CALL_IN_PROGRESS]:!0},OUTGOING_RING:{[h.CALL_STATES.CONNECTING]:!0,[h.CALL_STATES.ACTIVE]:!0,[h.CALL_STATES.REJECTED]:!0,[h.CALL_STATES.ENDED]:!0,[h.CALL_STATES.FAILED]:!0,[h.CALL_STATES.NOT_ANSWERED]:!0},CONNECTING:{[h.CALL_STATES.ACTIVE]:!0,[h.CALL_STATES.ENDED]:!0,[h.CALL_STATES.REMOTE_CALL_IN_PROGRESS]:!0,[h.CALL_STATES.FAILED]:!0},CONNECTION_LOST:{[h.CALL_STATES.ACTIVE]:!0,[h.CALL_STATES.ENDED]:!0,[h.CALL_STATES.FAILED]:!0},ACTIVE:{[h.CALL_STATES.ENDED]:!0,[h.CALL_STATES.FAILED]:!0,[h.CALL_STATES.CONNECTION_LOST]:!0},HANDLED_REMOTELY:{},ENDED:{},REJECTED:{},REMOTE_CALL_IN_PROGRESS:{},FAILED:{},NOT_ANSWERED:{}}},79504:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CallCollection=void 0;var s=i(a(70417)),n=i(a(19976)),o=i(a(98537)),l=i(a(99686)),d=i(a(54019)),u=i(a(1085)),c=i(a(50935)),h=i(a(18120)),f=i(a(86091)),p=i(a(89819)),m=a(17483),_=i(a(72424)),v=i(a(43711)),g=r(a(5361)),E=a(31558),y=a(27998),S=a(35205);function C(){var e=(0,n.default)(["voip:processIncomingCall: Attempting to add existing call with call ID"]);return C=function(){return e},e}function T(){var e=(0,n.default)(["received offer_key: no pending offer"]);return T=function(){return e},e}function M(){var e=(0,n.default)(["voip:incoming_signaling(paired phone):",":"]);return M=function(){return e},e}function b(){var e=(0,n.default)(["CallCollection:handle: ignoring incoming call offer because do not disturb mode is enabled or screen is locked"]);return b=function(){return e},e}function P(){var e=(0,n.default)(["voip:incoming_signaling(peer):",":"]);return P=function(){return e},e}var{VOIP_LOG_COLOR:A}=c.default,I=null,O=null;class N extends d.default{constructor(...e){super(...e),this.pendingOffers={},this.pendingVoipCapChecks={}}handleQuery(){return Promise.resolve()}handle(e){I&&O||(I=a(64786).default,O=a(64786).checkVoipCapability);var t=e.shift();if(t.data&&t.data[0]){var r=g.default.parseCallSignalingMsg(t);if(!r)return;var i={};(h.default.supportsFeature(h.default.F.DESKTOP_VOIP_VOICE_CALL)||_.default.webVoip)&&(Array.isArray(t.data[0])&&(t.data=t.data[0]),(0,g.base64DecodeRecursively)(t.data),i={peer_jid:r.peer_jid,payload:t.data,peer_platform:r.peer_platform,peer_app_version:r.peer_version,epoch_msec:null!=r.t?String(1e3*r.t):void 0,elapsed_msec:null!=r.e?String(1e3*r.e):void 0,is_offline:t.data[1].offline});var n=r.call_id,o=null,l=null,d=null,u=JSON.parse(JSON.stringify(t)),c=u.data[2]&&u.data[2].find((e=>"enc"===e[0]));c&&(c[2]="xxx bytes"),__LOG__(2)(P(),JSON.stringify(r));var y=!1;switch(r.type){case E.TYPE.OFFER:if((0,m.getDoNotDisturb)()&&!p.default.isFocused)return void __LOG__(2)(b());if(y=!0,o=r.isVideoCall,l=r.isGroupCall_DEPRECATED,d=r.t,I.isInitialized()){this.pendingVoipCapChecks[n]=Promise.all([O((0,s.default)({},r)),(0,f.default)()]).then((([e,t])=>e&&t));var C=t.data[2]&&t.data[2].find((e=>"enc"===e[0]));this.pendingOffers[n]=Promise.sit("receivedKey",(e=>{g.default.receiveCallOfferKey(e,C)})).endWithControls("receivedKey")}}this.pendingVoipCapChecks[n]?this.pendingVoipCapChecks[n].then((e=>{var a,s;(a=!l&&(o?e&&(v.default.isVideoCallEnabled()||_.default.webVoip):e),this.processIncomingCall(n,t.from,{isVideo:o,isGroupCall:l,canHandleLocally:a,offerTime:d}),a&&this.pendingOffers[n]&&(v.default.isVoiceCallEnabled()||_.default.webVoip))?this.pendingOffers[n].then((()=>{var e;null===(e=I)||void 0===e||e.handleIncomingSignalingMessage(r,i)})):(this.cleanupPendingOffer(n),null===(s=I)||void 0===s||s.handleIncomingSignalingMessage(r,i))})).finally((()=>{delete this.pendingVoipCapChecks[n]})):this.pendingOffers[n]?(y&&this.processIncomingCall(n,t.from),(v.default.isVoiceCallEnabled()||_.default.webVoip)&&this.pendingOffers[n].then((()=>{var e;null===(e=I)||void 0===e||e.handleIncomingSignalingMessage(r,i)}))):(y&&this.processIncomingCall(n,t.from,{isVideo:o,isGroupCall:l,canHandleLocally:!1,offerTime:d}),I.handleIncomingSignalingMessage(r,i))}else switch(__LOG__(2)(M(),JSON.stringify(t)),t.type){case"offer_key":var A=this.pendingOffers[t.id];A?A.control.receivedKey(t.key):__LOG__(3)(T());break;case"accept":case"reject":case"terminate":var N=this.get(t.id);N&&N.setState(S.CALL_STATES.ENDED),this.cleanupPendingOffer(t.id)}}processIncomingCall(e,t,a){if(null==this.get(e)){var r=a,i={id:e};null!=t&&(i.peerJid=t),r&&(r=(0,l.default)(r,(e=>null==e)),(0,o.default)(i,r)),this.add(i,{merge:!0})}else __LOG__(2)(C())}cleanupPendingOffer(e){delete this.pendingOffers[e]}setActiveCall(e){var t,a=this.activeCall&&!e,r=null===(t=this.activeCall)||void 0===t?void 0:t.webClientShouldHandle;this.activeCall=e,this.trigger("change:activeCall",e),a&&r&&(0,y.playEndCallTone)()}}t.CallCollection=N,N.model=u.default;var w=new N;t.default=w},88195:(e,t,a)=>{"use strict";var r=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(61247));class s extends i.default{constructor(...e){super(...e),this.id=(0,i.prop)(),this.callId=(0,i.prop)(),this.isIncoming=(0,i.prop)(!1),this.isRinging=(0,i.prop)(!1),this.isInterrupted=(0,i.prop)(!1),this.isMuted=(0,i.prop)(!1),this.isTrafficStopped=(0,i.prop)(!1),this.isInvitingToGroupCall=(0,i.prop)(!1),this.isVideoStopped=(0,i.prop)(!1),this.isVideoPaused=(0,i.prop)(!1),this.isVideoDecodePaused=(0,i.prop)(!1),this.isVideoDecodeStarted=(0,i.prop)(!1),this.isOfferingVideoUpgrade=(0,i.prop)(!1)}}s.Proxy="callParticipant";var n=(0,i.defineModel)(s);t.default=n},29155:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(26834)),s=r(a(54019)),n=r(a(88195));class o extends s.default{}t.default=o,o.model=n.default,o.comparator=(e,t)=>e.id===t.id?0:(0,i.default)(e.id,t.id)?-1:1},6339:(e,t,a)=>{"use strict";var r=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CALL_TYPES=void 0;var i=r(a(61247)),s=a(35205);t.CALL_TYPES={VOICE:"VOICE",VIDEO:"VIDEO"};class n extends i.default{constructor(...e){super(...e),this.callId=(0,i.session)(),this.state=(0,i.session)(s.CALL_UI_STATES.NONE),this.from=(0,i.session)(),this.to=(0,i.session)(),this.type=(0,i.session)(),this.muted=(0,i.session)(),this.peerMuted=(0,i.session)(),this.speaker=(0,i.session)(),this.outgoing=(0,i.session)(),this.startTime=(0,i.session)(),this.showFullscreenCallView=(0,i.session)(!1),this.showCallStatusBar=(0,i.session)(!1),this.externalInputAvailable=(0,i.session)(),this.interrupted=(0,i.session)(),this.peerBusy=(0,i.session)(),this.peerVideoState=(0,i.session)(),this.voipWindowId=(0,i.session)(),this.isGroup=(0,i.session)(),this.groupCallParticipants=(0,i.session)()}onStateChange(){}onAudioOutputChange(){}overrideOutputRoute(){return Promise.resolve()}}t.default=n,n.Proxy="callUi"},51269:(e,t,a)=>{"use strict";var r=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"OUTPUT_DEVICES",{enumerable:!0,get:function(){return i.OUTPUT_DEVICES}}),Object.defineProperty(t,"CALL_TYPES",{enumerable:!0,get:function(){return s.CALL_TYPES}}),Object.defineProperty(t,"CALL_UI_STATES",{enumerable:!0,get:function(){return o.CALL_UI_STATES}}),t.default=void 0;var i=a(97844),s=r(a(6339)),n=a(61247),o=a(35205),l=new((0,n.defineModel)(s.default));t.default=l},39016:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(61247)),n=r(a(42134));class o extends s.default{constructor(...e){super(...e),this.id=(0,s.prop)(),this.products=(0,s.prop)(),this.itemCount=(0,s.prop)(),this.total=(0,s.prop)(),this.currency=(0,s.prop)(),this.message=(0,s.prop)()}countTotals(){var e=this.cartItemCollection.reduce(((e,t)=>(e.currency.add(t.currency),{itemCount:e.itemCount+t.quantity,total:e.total+t.quantity*t.priceAmount1000,currency:e.currency})),{itemCount:0,total:0,currency:new Set}),t=1===e.currency.size,a={itemCount:e.itemCount,total:t?e.total:null,currency:t?e.currency.values().next().value:null};this.set(a,{silent:!0})}initialize(){super.initialize(),this.cartItemCollection=new n.default,this.listenTo(this,"change:cartItemCollection",this.countTotals)}getCollection(){return a(99601).default}}o.Proxy="cart";var l=(0,s.defineModel)(o);t.default=l},99601:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CartCollection=void 0;var s=i(a(19976)),n=r(a(54019)),o=i(a(39016)),l=i(a(52737)),d=a(95595),u=i(a(18120));function c(){var e=(0,s.default)(["Error while restoring carts from cache, ",""]);return c=function(){return e},e}function h(){var e=(0,s.default)(["Error while saving carts to cache, ",""]);return h=function(){return e},e}class f extends n.default{constructor(e,t){super(),this.imageWidth=100,this.imageHeight=100,null!=e&&(this.imageWidth=e),null!=t&&(this.imageHeight=t)}saveToCache(){if(!u.default.supportsFeature(u.default.F.MD_BACKEND))try{if(!l.default.shouldSaveToCache())return;var e=f.cachePolicy.id,t=this.reduce(((e,t)=>{var{cartItemCollection:a,itemCount:r,total:i,currency:s,id:n,message:o}=t,l=a.map((e=>({id:e.id,priceAmount1000:e.priceAmount1000,currency:e.currency,name:e.name,quantity:e.quantity,imageHash:e.imageHash})));return l.length>0&&e.push({id:n,products:l,itemCount:r,total:i,currency:s,message:o}),e}),[]);(0,d.setCollection)(e,t,!1)}catch(e){__LOG__(3)(h(),String(e))}}initializeFromCache(e){try{(e||[]).forEach((e=>{var t=new o.default({id:e.id,itemCount:e.itemCount,total:e.total,currency:e.currency,message:e.message});null==t||t.cartItemCollection.add(e.products),this.add(t,{merge:!0})}))}catch(e){__LOG__(3)(c(),String(e))}}findCart(e){return this.gadd(e)}}t.CartCollection=f,f.model=o.default,f.cachePolicy={id:"cart_collection",policy:n.CACHE_POLICY.LOAD,delay:2e3};var p=new f;t.default=p},69160:(e,t,a)=>{"use strict";var r=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MAX_QUANTITY=void 0;var i=r(a(61247));t.MAX_QUANTITY=99;class s extends i.default{constructor(...e){super(...e),this.id=(0,i.prop)(),this.priceAmount1000=(0,i.prop)(),this.currency=(0,i.prop)(),this.name=(0,i.prop)(),this.quantity=(0,i.prop)(),this.imageHash=(0,i.prop)(),this.imageCdnUrl=(0,i.prop)()}getCollection(){return a(99601).default}}s.Proxy="cart-item";var n=(0,i.defineModel)(s);t.default=n},42134:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CartItemCollection=void 0;var i=r(a(54019)),s=r(a(69160));class n extends i.default{}t.CartItemCollection=n,n.model=s.default;var o=n;t.default=o},46774:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.getForwardedMessageFields=Re,t.default=t.CHAT_KIND=t.KIND=void 0;var s=i(a(52954)),n=i(a(19976)),o=i(a(17620)),l=i(a(67304)),d=i(a(15253)),u=i(a(17335)),c=i(a(34498)),h=i(a(54004)),f=i(a(45455)),p=i(a(54073)),m=a(91460),_=r(a(2784)),v=a(12073),g=i(a(25337)),E=a(96046),y=a(61247),S=i(a(53603)),C=i(a(5320)),T=i(a(45883)),M=i(a(55526)),b=i(a(90980)),P=i(a(56953)),A=i(a(7020)),I=i(a(19899)),O=i(a(79711)),N=i(a(52737)),w=i(a(50935)),D=i(a(64357)),R=i(a(7470)),L=i(a(19744)),k=a(19741),x=i(a(25353)),F=r(a(96452)),G=a(95595),U=i(a(18120)),B=a(421),j=i(a(22605)),V=i(a(17957)),H=a(28352),W=i(a(68560)),K=a(28278),Y=i(a(40210)),q=i(a(27e3)),z=i(a(58885)),Q=a(16199),J=i(a(77865)),X=a(57556),Z=i(a(85059)),$=a(86809),ee=i(a(61941)),te=a(207),ae=i(a(99098)),re=a(51897),ie=i(a(15118)),se=i(a(49213)),ne=a(74034),oe=a(55630),le=a(95721),de=(a(59420),a(89590)),ue=a(78475),ce=i(a(72424)),he=a(92816),fe=r(a(63095)),pe=i(a(73298)),me=r(a(82885)),_e=a(51803),ve=a(82373),ge=i(a(17744)),Ee=i(a(76022)),ye=i(a(68384)),Se=i(a(12767));function Ce(){var e=(0,n.default)(["chat:loadMsgs:error ",""]);return Ce=function(){return e},e}function Te(){var e=(0,n.default)(["chat:onEmptyMRM failed\n",""],["chat:onEmptyMRM failed\\n",""]);return Te=function(){return e},e}function Me(){var e=(0,n.default)(["models:Chat:removeMsg 0 messages left, querying..."]);return Me=function(){return e},e}function be(){var e=(0,n.default)(["chat:preload failed\n",""],["chat:preload failed\\n",""]);return be=function(){return e},e}function Pe(){var e=(0,n.default)(["models:chat:sendDismissChangeNumber dropped"]);return Pe=function(){return e},e}function Ae(){var e=(0,n.default)(["chat:onNewMsg failed\n",""],["chat:onNewMsg failed\\n",""]);return Ae=function(){return e},e}function Ie(){var e=(0,n.default)(["chat:onPendingActionUpdate pendingAction value is invalid"]);return Ie=function(){return e},e}function Oe(){var e=(0,n.default)(["chat:onPendingActionUpdate pendingAction value is invalid"]);return Oe=function(){return e},e}function Ne(){var e=(0,n.default)(["chat:unknown kind id:",""]);return Ne=function(){return e},e}var we={GROUP:"group",BROADCAST:"broadcast",CHAT:"chat"};t.CHAT_KIND=t.KIND=we;class De extends pe.default{constructor(...e){super(...e),this.id=(0,y.prop)(),this.t=(0,y.prop)(),this.unreadCount=(0,y.prop)(0),this.archive=(0,y.prop)(),this.isReadOnly=(0,y.prop)(),this.isAnnounceGrpRestrict=(0,y.prop)(),this.modifyTag=(0,y.prop)(),this.muteExpiration=(0,y.prop)(0),this.name=(0,y.prop)(),this.notSpam=(0,y.prop)(),this.pin=(0,y.prop)(),this.labels=(0,y.prop)(),this.changeNumberOldJid=(0,y.prop)(),this.changeNumberNewJid=(0,y.prop)(),this.lastReceivedKey=(0,y.prop)(),this.ephemeralDuration=(0,y.prop)(),this.ephemeralSettingTimestamp=(0,y.prop)(),this.createdLocally=(0,y.session)(),this.pendingAction=(0,y.session)(),this.formattedTitle=(0,y.session)(),this.active=(0,y.session)(),this.pausedTimerId=(0,y.session)(),this.presenceResendTimerId=(0,y.session)(),this.recording=(0,y.session)(),this.typing=(0,y.session)(),this.colors=(0,y.session)(),this.composeContents=(0,y.session)((()=>({}))),this.attachMediaContents=(0,y.session)(),this.squelch=(0,y.session)(),this.pendingSeenCount=(0,y.session)(0),this.unreadMsgAnchor=(0,y.session)(),this.markedUnread=(0,y.session)(),this.trusted=(0,y.session)(),this.canSend=(0,y.session)(),this.promises=(0,y.session)((()=>({}))),this.ftsCache=(0,y.session)((()=>({}))),this.composeQuotedMsg=(0,y.session)(),this.composeQuotedMsgRemoteJid=(0,y.session)(),this.quotedMsgAdminGroupJid=(0,y.session)(),this.groupMetadata=(0,y.session)(),this.presence=(0,y.session)(),this.mute=(0,y.session)(),this.contact=(0,y.session)(),this.liveLocation=(0,y.session)(),this.liveLocationQueried=(0,y.session)(!1),this.ackedProps=(0,y.session)((()=>({}))),this.mediaCount=(0,y.session)(0),this.linkCount=(0,y.session)(0),this.docCount=(0,y.session)(0),this.productCount=(0,y.session)(0),this.msgUnsyncedButtonReplyMsgs=(0,y.prop)(),this.vcardDismissed=(0,y.session)(!1),this.endOfHistoryTransfer=(0,y.session)(!1),this.endOfHistoryTransferType=(0,y.prop)(B.ConversationEndOfHistoryTransferType.COMPLETE_AND_NO_MORE_MESSAGE_REMAIN_ON_PRIMARY),this.kind=(0,y.derived)(this._kind),this.isUser=(0,y.derived)(this._isUser),this.isPSA=(0,y.derived)(this._isPSA),this.isGroup=(0,y.derived)(this._isGroup),this.isBroadcast=(0,y.derived)(this._isBroadcast),this.canUnread=(0,y.derived)(this._canUnread),this.hasUnread=(0,y.derived)(this._hasUnread,["unreadCount"]),this.optimisticUnreadCount=(0,y.derived)(this._optimisticUnreadCount,["unreadCount","pendingSeenCount"]),this.shouldShowUnreadDivider=(0,y.derived)(this._shouldShowUnreadDivider,["unreadCount","unreadMsgAnchor"]),this.shouldAppearInList=(0,y.derived)(this._shouldAppearInList,["createdLocally","msgs","msgsLength"]),this.previewMessage=(0,y.derived)(this._previewMessage,["msgs","msgsChanged"]),this.showChangeNumberNotification=(0,y.derived)(this._showChangeNumberNotification,["changeNumberOldJid","changeNumberNewJid","id","isUser"]),this.shouldShowUnreadInTitle=(0,y.derived)(this._shouldShowUnreadInTitle,["isGroup","archive","optimisticUnreadCount","muteExpiration"])}initialize(){super.initialize(),this.addQueue=new j.default,this.sendQueue=new j.default,this._ephemeralMessagesToDelete=new Set,this._ephemeralMessageTimerIds=new Map,this._promises=null,this.msgs.msgLoadState.contextLoaded=!0,this.addChild("presence",ae.default.gadd(this.id));var e=Z.default.get(this.id);if(e?this.addChild("mute",e):this.addChild("mute",Z.default.gadd({id:this.id,expiration:this.muteExpiration})),this.listenTo(this.mute,"change:expiration",this.updateMuteExpiration),this.addChild("contact",R.default.gadd(this.id)),this.name&&!this.contact.name){var t={name:this.name};this.isGroup?this.contact.set(t):(0,_e.updateLocal)(this.contact.id,t).then((()=>{this.contact.set(t)}))}if(this.listenTo(this.contact,"change:name",this.updateTitle),this.listenTo(this.contact,"change:isContactBlocked",this.updateCanSend),this.isGroup&&(this.trusted=!0),this.isGroup||this.isBroadcast){var a,r=this.getGroupMetadataCollection();this.isBroadcast&&!r.get(this.id)&&(a=!0),this.addChild("groupMetadata",r.gadd(this.id)),this.listenTo(this.groupMetadata,"change:stale change:announce",this.updateIsAnnounceGrpRestrict),this.listenTo(this.groupMetadata.participants,"change:isAdmin add remove",this.updateIsAnnounceGrpRestrict),this.listenTo(this.groupMetadata,"change:trusted change:stale",this.isTrusted),this.listenTo(this.groupMetadata,"change:participants change:stale",this.updateReadOnly),this.listenTo(this.groupMetadata.participants,"change:contact.formattedShortName",this.updateTitle),this.updateReadOnly(),this.updateIsAnnounceGrpRestrict();var i=this.id;this.listenTo(this,"change:isReadOnly",(function(){this.isTrusted(),this.updateCanSend(),ie.default.update(i).catchType(k.WebdDrop,(()=>{})),r.update(i).catchType(k.WebdDrop,(()=>{}))})),this.listenTo(this,"change:isAnnounceGrpRestrict",this.updateCanSend),this.listenTo(this,"change:archive",(()=>{!0===this.archive&&(0,E.shouldEnableArchiveV2)()&&(0,he.setArchiveEnabledSetting)(!0)})),a&&r.update(i).catchType(k.WebdDrop,(()=>{}))}else this.listenTo(this.presence,"change:isOnline",(()=>(0,te.presenceOnlineChanged)(this))),this.listenTo(this.contact,"change:isMyContact",this.isTrusted);var s=this.getCollection();s.notSpam[this.id]&&!this.notSpam&&(0,de.sendNotSpam)(this).catch((()=>{})),s.notSpam[this.id]=!!this.notSpam,this.notSpam||this.listenTo(this,"change:notSpam",this.onNotSpamChange),this.updateTitle(),this.isTrusted(),this.updateCanSend(),this.listenTo(this.msgs,"add",this.onNewMsg),this.listenTo(this.msgs,"update_sort_time",this.updateSortTime),this.listenTo(this.msgs,"bulk_add",this.addMediaMsgs),this.listenTo(this.msgs,"add remove change:ephemeralExpirationTimestamp",this._resetEphemeralMessageExpirationTimer),this.listenTo(this.msgs,"bulk_add",(e=>{e.forEach((e=>{this._resetEphemeralMessageExpirationTimer(e)}))})),this.listenTo(this,"change:msgs",this.resetMediaMsgs),this._saveAssignedColors=(0,p.default)(this.saveAssignedColors,1e3),this.listenTo(this,"change:active",this.onActiveUpdate),this.pendingAction=0,this.listenTo(this,"change:t change:modifyTag",this._clearFtsCache),this.listenTo(V.default,"locale_change",(()=>{this.updateTitle()})),N.default.isSMB&&(0,H.initializeLabels)(this)}_kind(){return ye.default.isGroup(this.id)?we.GROUP:ye.default.isBroadcast(this.id)?we.BROADCAST:ye.default.isUser(this.id)?we.CHAT:void __LOG__(2)(Ne(),this.id.toString())}_isUser(){return ye.default.isUser(this.id)}_isPSA(){return ye.default.isPSA(this.id)}_isGroup(){return ye.default.isGroup(this.id)}_isBroadcast(){return ye.default.isBroadcast(this.id)}isSupportGroup(){return this.isGroup&&this.groupMetadata.support}_canUnread(){return!this.isBroadcast}_hasUnread(){return 0!==this.unreadCount}_optimisticUnreadCount(){var{unreadCount:e,pendingSeenCount:t}=this;return e===w.default.MARKED_AS_UNREAD?e:Math.max(0,e-t)}_shouldShowUnreadDivider(){if(0===this.unreadCount)return!1;if(this.unreadMsgAnchor){var{msgChunk:e}=this.unreadMsgAnchor,t=e?e.getModelsArray():[];return this.unreadMsgAnchor!==t.find((e=>e.isUnreadType))}return!this.msgs.msgLoadState.noEarlierMsgs||this.msgs.filter((e=>e.isUnreadType)).length!==this.unreadCount}_shouldAppearInList(){if(this._shouldAppearInListLatched)return!0;if(ye.default.isStatusV3(this.id))return!1;var e=this.msgs.some((e=>{var t=e.type===w.default.MSG_TYPE.GROUPS_V4_INVITE&&e.from.equals((0,G.getMaybeMeUser)()),a=e.type===w.default.MSG_TYPE.E2E_NOTIFICATION&&"encrypt"===e.subtype;return!t&&!a&&e.type!==w.default.MSG_TYPE.CALL_LOG&&!e.isBizNotification&&"change_number"!==e.subtype}));return this._shouldAppearInListLatched=!this.createdLocally||e,this._shouldAppearInListLatched}_previewMessage(){for(var e=this.msgs.length-1;e>=0;e--){var t=this.msgs.at(e);if(t&&t.type!==w.default.MSG_TYPE.E2E_NOTIFICATION)return t}if(this.msgs.length>0)return this.msgs.last()}_showChangeNumberNotification(){if(!U.default.supportsFeature(U.default.F.CHANGE_NUMBER_V_2))return!1;var{changeNumberOldJid:e,changeNumberNewJid:t,id:a,isUser:r}=this;if(!r)return!1;if(!e&&!t)return!1;var i=R.default.get(t||a);return!i||!i.isMyContact}_shouldShowUnreadInTitle(){var e=!!this.muteExpiration;if(this.archive)return!1;if(this.optimisticUnreadCount<=0)return!1;if(!this.isGroup)return!e;if(!e)return!0;if(!this.msgs||0===this.msgs.length)return!1;for(var t=!1,a=this.msgs,r=this.optimisticUnreadCount,i=Math.max(0,a.length-r);i<a.length;i++){var s=this.msgs.at(i);if(s){var n=(0,G.getMaybeMeUser)();if(s.isMentioned(n)||s.isQuoted(n)){var o=this.getCollection().get(s.sender);if(!o||!o.muteExpiration){t=!0;break}}}}return t}set(e,t,a){return"string"==typeof e?"muteExpiration"===e&&this.mute&&this.mute.setMute(t):e.hasOwnProperty("muteExpiration")&&this.mute&&this.mute.setMute(e.muteExpiration),super.set(e,t,a)}addPendingAction(e){if(e.isPending()){var t=()=>{this.decPending()};e.then(t,t),this.pendingAction++}}decPending(){this.pendingAction>0?this.pendingAction--:(__LOG__(2)(Oe()),this.pendingAction=0)}onActiveUpdate(){this.isGroup&&this.active&&(this.squelch=-1),this.presence.chatActive=this.active,this.active||this._ephemeralMessagesToDelete.forEach((e=>{this._ephemeralMessagesToDelete.delete(e),e.delete({skipUpdatingSortTime:!0,doNotResetLastReceived:!0})}))}onPendingActionUpdate(){this.pendingAction<0&&(__LOG__(2)(Ie()),this.pendingAction=0)}onNotSpamChange(){this.getCollection().notSpam[this.id]=this.notSpam,this.isTrusted(),this.notSpam&&this.stopListening(this,"change:notSpam")}hasMaybeSentMsgToChat(){return this.getAllMsgs().some((e=>e.isSentByMe))}isTrusted(){var e=!1;return this.isGroup?e=this.isReadOnly||this.notSpam||this.groupMetadata.isTrusted():this.isBroadcast?e=!0:this.isUser&&(e=this.notSpam||this.contact.isMyContact),!e&&this.hasMaybeSentMsgToChat()&&(e=!0),this.trusted=e}updateMuteExpiration(){var e=Number(this.mute.expiration);(0,ve.updateLocal)(this.id,{muteExpiration:e}).then((()=>this.muteExpiration=e))}updateTitle(){this.isBroadcast?this.formattedTitle=this.contact.name||this.groupMetadata.participants.map((function(e){return e.contact.formattedShortName})).join(", "):this.isUser?this.formattedTitle=this.contact.getFormattedUser()||"":this.isGroup&&(this.formattedTitle=this.contact.name)}title(){return this.isGroup?this.formattedTitle||V.default.t(1365):this.formattedTitle}updateCanSend(){return this.isReadOnly||this.isAnnounceGrpRestrict?this.canSend=!1:this.isUser?this.canSend=!(this.contact.isContactBlocked||this.isPSA):this.canSend=!0}delete(){super.delete(),this.getCollection().remove(this.id),this.cancelPendingPromises(),this.presence.delete(),this.liveLocation&&this.liveLocation.delete(),O.default.clearChat(this),this.groupMetadata&&this.groupMetadata.delete(),this.mediaMsgs&&this.mediaMsgs.delete(),this.linkMsgs&&this.linkMsgs.delete(),this.docMsgs&&this.docMsgs.delete(),this.productMsgs&&this.productMsgs.delete();var e=this.starredMsgs;e&&(e.delete(),e.stopListening(),e.reset()),this.receivedVcardMsgs&&this.receivedVcardMsgs.delete(),(0,G.deleteComposeContents)(this.id)}isDirty(){return 0!==this.unreadCount}resetMediaMsgs(){var{mediaMsgs:e,linkMsgs:t,docMsgs:a,productMsgs:r}=this;e&&(e.delete(),e.queryMedia({chat:this})),t&&(t.delete(),t.queryLinks(this)),a&&(a.delete(),a.queryDocs(this)),r&&(r.delete(),r.queryProducts(this))}addMediaMsgs(e,t){if(e){var a=Array.isArray(e)?e:[e],r=[],i=[],s=[],n=[];a.forEach((e=>{e.isMedia&&r.push(e),e.asDoc&&s.push(e),e.linkPreview&&i.push(e),null!=e.asProduct&&n.push(e)})),this.mediaMsgs&&r.length&&this.mediaMsgs.add(r,t),this.linkMsgs&&i.length&&this.linkMsgs.add(i,t),this.docMsgs&&s.length&&this.docMsgs.add(s,t),this.productMsgs&&n.length&&this.productMsgs.add(n,t)}}onNewMsg(e){if(e){var t=Promise.resolve();e.isSentByMe&&!this.notSpam&&(t=(0,ve.updateLocal)(this.id,{notSpam:!0}).then((()=>this.notSpam=!0))),"i"!==e.eventType&&t.then((()=>{var t={};return t.t=e.t,this.promises.updateSortTime&&this.promises.updateSortTime.cancel(),this.updateMediasCountOnMsg(e),this.archive&&(0,E.shouldUnarchiveChat)()&&(t.archive=!1),this.promises.setArchive&&this.promises.setArchive.cancel(),e.isSentByMe?this.markedUnread=!1:((0,S.default)({id:this.id,participant:e.author,type:"paused"},!1),"a"!==e.eventType&&"d"!==e.eventType||(t.unreadCount=this.unreadCount+1||1)),(0,ve.updateLocal)(this.id,t).then((()=>t))})).then((t=>{e.isSentByMeFromWeb&&e.promises.sendPromise?this.setAndKeepPrevious(t,e.promises.sendPromise):this.set(t);var a=L.default.get(this.id);if(a&&(a.timestamp=I.default.globalUnixTime()),"gp2"!==e.type||"add"!==e.subtype&&"create"!==e.subtype||this.getGroupMetadataCollection().trigger("group_participant_change_".concat((0,G.getMaybeMeUser)().toString()),this.id),!e.isSentByMe){switch(e.eventType){case"d":case"a":"d"===e.eventType&&O.default.alertNewMsg(e),this.msgs.length<w.default.MSG_PRELOAD_THRESHOLD&&this.loadEarlierMsgs(void 0,Y.default.WEBC_QUERY_TRIGGER_TYPE.NEW_MESSAGE_PREFETCH).catchType(k.E404,(()=>{})).catch((e=>{__LOG__(2)(Ae(),e)}));break;case"n":e.type===w.default.MSG_TYPE.CALL_LOG&&O.default.alertNewMsg(e);break;case"s":if("gp2"===e.type&&"add"===e.subtype&&(0,G.getMaybeMeUser)().equals(e.recipients[0])&&!this.contact.name)return;O.default.alertNewMsg(e),this.getGroupMetadataCollection().trigger("group_participant_change_".concat((0,G.getMaybeMeUser)().toString()),this.id)}var r=e.mediaData;!r||"image"!==r.type&&"video"!==r.type||O.default.newMediaMsg(e)}}))}}canPin(){if(this.archive)return!1;var e=this.promises&&this.promises.setArchive;return!e||!e.archive}canArchive(){return!this.isBroadcast||U.default.supportsFeature(U.default.F.ARCHIVE_BROADCAST)}sendDismissChangeNumber(){if(this.promises.sendDismissChangeNumber)return this.promises.sendDismissChangeNumber;var e=U.default.supportsFeature(U.default.F.MD_BACKEND)?Promise.resolve({status:200,_duplicate:null}):Ee.default.sendConversationDismissChangeNumber(this.id);this.promises.sendDismissChangeNumber=e;var t=new v.ActionType(V.default.t(62)),a=e.then((e=>200===e.status?new v.ActionType(V.default.t(61)):e.status>=400?new v.ActionType(V.default.t(60)):void 0)).catch((()=>(__LOG__(3)(Pe()),new v.ActionType(V.default.t(60),{actionText:V.default.t(195),actionHandler:this.sendDismissChangeNumber.bind(this)}))));return O.default.openToast(_.createElement(v.ActionToast,{id:(0,v.genId)(),initialAction:t,pendingAction:a})),e.then((e=>{if(200===e.status&&!e._duplicate)return(0,ve.updateLocal)(this.id,{changeNumberNewJid:void 0,changeNumberOldJid:void 0}).then((()=>{this.changeNumberOldJid=this.changeNumberNewJid=void 0}))})).finally((()=>{this.promises.sendDismissChangeNumber=null}))}setComposeContents(e){this.composeContents=e}getSessionPersistedComposeContents(){return(0,G.getComposeContents)(this.id)}getComposeContents(){return(0,f.default)(this.composeContents)?this.getSessionPersistedComposeContents()||{}:this.composeContents}setAttachMediaContents(e){this.attachMediaContents=e}preload(){1===this.msgs.length&&this.loadEarlierMsgs().catchType(k.E404,(()=>{})).catch((e=>{__LOG__(2)(be(),e)}))}onEmptyMRM(){__LOG__(2)(Me()),this.loadEarlierMsgs().catchType(k.E404,(()=>{})).catch((e=>{__LOG__(2)(Te(),e)}))}loadEarlierMsgs(e,t){var a=e,r=null!=t?t:Y.default.WEBC_QUERY_TRIGGER_TYPE.USER_SCROLL;if(a||(a=this.msgs),a.msgLoadState.noEarlierMsgs)return Promise.resolve();if(a.msgLoadState.isLoadingEarlierMsgs)return a.loadEarlierPromise;var i=a?a.head():null;return this._loadMsgs("before",a,r).then((e=>{var t=i?i.msgChunk:a;return t&&Array.isArray(e)&&e.length<w.default.PAGE_SIZE&&(t.msgLoadState.noEarlierMsgs=!U.default.supportsFeature(U.default.F.MD_BACKEND)||null!=this.endOfHistoryTransferType),t&&this.isMostRecentCMC(t)&&this.trigger("msgs:loadEarlier"),e}))}isMostRecentCMC(e){return this.msgs===e}loadRecentMsgs(e){var t=e;return t||(t=this.msgs),this.isMostRecentCMC(t)?Promise.resolve():t.msgLoadState.isLoadingRecentMsgs?t.loadRecentPromise:this._loadMsgs("after",t,Y.default.WEBC_QUERY_TRIGGER_TYPE.USER_SCROLL)}_loadMsgs(e,t,a){var r,i={};(r="after"===e?t.last():t.head())?i=r.id.clone():i.remote=this.id,i.count=w.default.PAGE_SIZE,i.direction=e;var s=(0,Q.newMessageQueryEvent)(a);return this._loadMsgsPromiseLoop(r,t,z.default.findQuery.bind(z.default,i,{logOnSend:e=>{s.webcResponseBytes+=e.binarySize}}),e,s)}_updateMsgLoadState(e,t,a){var r=e&&e.msgChunk&&e.msgChunk!==t;t.msgLoadState.contextLoaded=!0,e&&r&&((0,ee.default)(e.msgChunk,"msg.msgChunk").msgLoadState.contextLoaded=!0),"after"===a?t.msgLoadState.isLoadingRecentMsgs=!1:"before"===a?t.msgLoadState.isLoadingEarlierMsgs=!1:"around"===a&&(t.msgLoadState.isLoadingAroundMsgs=!1)}_loadMsgsPromiseLoop(e,t,a,r,i,s=!0){var n=performance.now();"after"===r?(t.msgLoadState.isLoadingRecentMsgs=!0,i.webcMessageQueryType=Y.default.WEBC_MESSAGE_QUERY_DIRECTION.LOAD_NEXT):"before"===r?(t.msgLoadState.isLoadingEarlierMsgs=!0,i.webcMessageQueryType=Y.default.WEBC_MESSAGE_QUERY_DIRECTION.LOAD_PREV):"around"===r&&(t.msgLoadState.isLoadingAroundMsgs=!0,i.webcMessageQueryType=Y.default.WEBC_MESSAGE_QUERY_DIRECTION.LOAD_AROUND),i.webcBrowserNetworkType=(0,$.getEffectiveNetworkType)(),i.webcChatType=this.getWebcChatType(),"number"==typeof this.initialIndex&&(i.webcChatPosition=this.initialIndex);var o=Promise.loop(((s,o,l)=>{var d=(0,m.delayMs)(me.expBackoff(l,12e4,1e3,.1)),u=Promise.resolve();return U.default.supportsFeature(U.default.F.MD_BACKEND)||"CONNECTED"===Se.default.stream||(u=(0,ge.default)(Se.default,"change:stream",(()=>"CONNECTED"===Se.default.stream))),u.then((()=>this.regCancellablePromise(a()).then((a=>{var o;i.webcQueryT=Math.ceil(performance.now()-n),Array.isArray(a[0])?(o=a[0][0],a.forEach((e=>(0,Q.logMessageCounts)(i,e)))):(o=a[0],(0,Q.logMessageCounts)(i,a)),o&&(i.webcEarliestMessageT=o.t,o.msgChunk===this.msgs&&(i.webcEarliestMessageIndex=this.msgs.length-1)),(0,x.default)().then((e=>{e&&(i.webcBrowserStorageQuotaBytes=e.quota,i.webcBrowserStorageQuotaUsedBytes=e.usage)})).finally((()=>i.commit())),this._updateMsgLoadState(e,t,r),s(a)})))).catchConditional((e=>!(e instanceof Promise.CancellationError)),(a=>l>3||404===a?(this._updateMsgLoadState(e,t,r),__LOG__(3)(Ce(),String(a)),404===a?Promise.reject(new k.E404):Promise.reject(new F.GaveUpRetry("Gave up msg fetch after ".concat(l," tries")))):d))}),0).catchType(F.GaveUpRetry,(()=>[])).catchType(k.E404,(e=>{if(s)return[];throw e}));return"after"===r?t.loadRecentPromise=o:"before"===r?t.loadEarlierPromise=o:"around"===r&&(t.loadAroundPromise=o),o}getSearchContext(e,t){var a,r=null;e instanceof q.default?r=e:e instanceof J.default&&(a=e);var i=r?r.msgChunk:void 0,s=Math.trunc(w.default.PAGE_SIZE/3*2);if(!i||!i.msgLoadState.contextLoaded){i||(i=new b.default,this.msgChunks.push(i),r&&i.add(r));var n=r?r.id.clone():a.clone();n.count=s;var o=function(){if(r)return r.msgChunk;if(null!=a){var e=z.default.get(a);return e&&e.msgChunk?e.msgChunk:i}return i},l=(0,Q.newMessageQueryEvent)(Y.default.WEBC_QUERY_TRIGGER_TYPE.SEARCH_RESULT_CLICK);this._loadMsgsPromiseLoop(r,i,z.default.getContext.bind(z.default,n,o,(e=>{l.webcResponseBytes+=e.binarySize})),"around",l,null==t).then((e=>{var t=o();t&&i&&t!==i&&this.notifyMsgCollectionMerge(t,i,t);var n=e[0],l=a?z.default.get(a):r;l&&Array.isArray(n)&&n.length<s&&((0,ee.default)(l.msgChunk,"loadedMsg.msgChunk").msgLoadState.noEarlierMsgs=!U.default.supportsFeature(U.default.F.MD_BACKEND)||null!=this.endOfHistoryTransferType,i&&l.msgChunk!==i&&(i.msgLoadState.noEarlierMsgs=!U.default.supportsFeature(U.default.F.MD_BACKEND)||null!=this.endOfHistoryTransferType))})).catch((()=>{t&&(t.isQuotedMsgAvailable=!1)}))}return{collection:i,msg:r,key:a,highlightMsg:!0}}sendStarMsgs(e,t){return this.promises.sendStarMsgs?this.promises.sendStarMsgs:this.promises.sendStarMsgs=(0,ue.sendStarMsgs)(this.id,e,t).then((()=>{e.forEach((e=>{e.set("star",t)})),t?(0,fe.addStarredMsgs)(e):(0,fe.removeStarredMsgs)(e)})).finally((()=>{this.promises.sendStarMsgs=null}))}sendRevokeMsgs(e,t){return this.promises.sendRevokeMsgs?this.promises.sendRevokeMsgs:this.promises.sendRevokeMsgs=Promise.all(e.map((e=>(0,ne.sendRevoke)(e,t)))).finally((()=>{this.promises.sendRevokeMsgs=null}))}sendDeleteMsgs(e,t){return this.promises.sendDeleteMsgs||(this.promises.sendDeleteMsgs=(0,oe.sendDeleteMsgs)(e,t,this.id).then((()=>(e.forEach((e=>{e.delete()})),e.length))).catchType(k.ServerStatusCodeError,(()=>{var t=0;return e.forEach((e=>{(e.ack===w.default.ACK.FAILED||e.isExpired())&&(e.delete(),t++)})),t})).finally((()=>{this.promises.sendDeleteMsgs=null}))),this.promises.sendDeleteMsgs}deleteMsgs(e,t){this.deleteMsgsBeforeMsgInclusive(void 0,!e,t)}deleteMsgsOlderThan(e,t,a){var r=this.msgs,i=r.head();!i||i.t>=e||((i=r.last())&&i.t<e?this.deleteMsgs(t,a):this.deleteMsgsPartial((function(r){return r&&(a&&!(0,X.msgMatchesType)(r,a)||r.star&&!t||r.t>=e||r.isPersistent)})))}deleteMsgsBeforeMsgInclusive(e,t=!1,a){var r;if(e){if(!this.msgs.get(e.id))return;r=this.msgs.indexOf(e)}else r=this.msgs.length;this.deleteMsgsPartial((function(e,i){return a&&!(0,X.msgMatchesType)(e,a)||e.msgChunk===this.msgs&&i>r||t&&e.star||e.isPersistent&&t}),!0)}deleteMsgsPartial(e,t=!1){var a=this.unreadCount;if(this.getAllCMCs().forEach((a=>{var r=a.filter(((t,a,r)=>!e.apply(this,[t,a,r])));a.remove(r,void 0,t),r.forEach((e=>{e.delete()}))})),(0,h.default)(this.msgChunks).forEach((e=>{0===e.length&&this.removeMsgsCollection(e)})),this.msgs.length>0){var r=a>this.msgs.length?this.msgs.length:a;(0,ve.updateLocal)(this.id,{unreadCount:r}).then((()=>{this.unreadCount=r,this.msgs.msgLoadState.noEarlierMsgs=!U.default.supportsFeature(U.default.F.MD_BACKEND)||null!=this.endOfHistoryTransferType}))}}getFirstMsgWithStatus(){return this.msgs.getModelsArray().find((function(e){return!e.isNotification&&(e.isSentByMe||e.type===w.default.MSG_TYPE.PTT||e.isViewOnce||e.isEphemeral)}))}getLastReceivedMsg(){for(var e=this.msgs.length-1;e>=0;e--){var t=this.msgs.at(e);if(t&&(!t.local||t.ack>w.default.ACK.CLOCK))return t}}getLastReceivedNonExpiredMsg(e){for(var t=this.msgs.length-1;t>=0;t--){var a=this.msgs.at(t);if(a&&(!a.local||a.ack>w.default.ACK.CLOCK)&&(!a.isEphemeral||null!=a.ephemeralExpirationTimestamp&&a.ephemeralExpirationTimestamp>e))return a}}getLastMsgKeyForAction(){var e,t=this.msgs.last();return t&&(e=!this.lastReceivedKey||t.id.fromMe&&t.local&&t.ack===w.default.ACK.CLOCK?t.id:this.lastReceivedKey),e||void 0}getLastTimestampMsg(){for(var e=this.msgs.length-1;e>=0;e--){var t=this.msgs.at(e);if(t&&"i"!==(0,X.eventTypeFromMsgType)(t))return t}}getWebcChatType(){switch(this.kind){case we.CHAT:return Y.default.WEBC_CHAT_TYPE.INDIVIDUAL;case we.GROUP:return Y.default.WEBC_CHAT_TYPE.GROUP;case we.BROADCAST:return Y.default.WEBC_CHAT_TYPE.BROADCAST_LIST;default:throw new TypeError("Invalid Chat.kind ".concat(String(this.kind)))}}_resetEphemeralMessageExpirationTimer(e){if(ce.default.ephemeralMessages){g.default.clearTimeout(this._ephemeralMessageTimerIds.get(e)),this._ephemeralMessageTimerIds.delete(e),this._ephemeralMessagesToDelete.delete(e);var{ephemeralExpirationTimestamp:t}=e;if(null!=t&&this.msgs.includes(e)){var a=()=>{this._ephemeralMessageTimerIds.delete(e),this.active?this._ephemeralMessagesToDelete.add(e):e.delete({skipUpdatingSortTime:!0,doNotResetLastReceived:!0})};if(e.isExpired())a();else{var r=g.default.setGlobalTimeout(a,1e3*t);this._ephemeralMessageTimerIds.set(e,r)}}}}sendProductMessage(e,t){var a=this;return(0,s.default)((function*(){yield(0,re.sendProductMessage)(a,e,t)}))()}sendGroupInviteMessage(e,t,a,r,i,s){var n=(0,G.getMaybeMeUser)(),o={ack:w.default.ACK.CLOCK,from:n,id:new J.default({from:n,to:this.id,id:(0,se.default)(),participant:void 0,selfDir:"out"}),local:!0,self:"out",t:I.default.globalUnixTime(),to:this.id,type:"groups_v4_invite",isNewMsg:!0,inviteGrpJpegThum:s,inviteCode:a,inviteCodeExp:r,inviteGrp:e,inviteGrpName:t,comment:i};return(0,le.addAndSendMsgToChat)(this,o)[1]}forwardMessages(e,t=!1){var a=this.id,r=this.contact;if(r.isUser&&r.isBlocked())return Promise.reject(new D.default("Forwarded to contact is blocked",r));var i=[];return Promise.each(e,(e=>{if(e.asMms&&!e.ctwaContext)return(0,K.forwardMediaMsg)(e,this,t);var r=Re(e),i=(0,G.getMaybeMeUser)(),s=new J.default({from:i,to:a,id:(0,se.default)(),participant:void 0,selfDir:"out"});e.ctwaContext&&(r.body=e.ctwaContext.sourceUrl,r.type=w.default.MSG_TYPE.CHAT,r.mediaObject=void 0),ce.default.ephemeralMessages&&(this.isEphemeralSettingOn()&&(r.ephemeralDuration=this.getEphemeralSetting()),r.ephemeralSettingTimestamp=this.getEphemeralSettingTimestamp()),Object.assign(r,{id:s,from:i,t:I.default.globalUnixTime(),to:a,ack:w.default.ACK.CLOCK,participant:void 0,local:!0,self:"out",isNewMsg:!0,star:!1,isForwarded:e.isForwarded||!e.isSentByMe,forwardedFromWeb:!0,forwardingScore:e.getForwardingScoreWhenForwarded(),multicast:t}),(0,le.addAndSendMsgToChat)(this,r)})).then((()=>i))}updateReadOnly(){if(!this.isSupportGroup()||!this.isReadOnly){var e=Promise.resolve();if(this.isGroup&&!this.groupMetadata.stale){var t=!1;U.default.supportsFeature(U.default.F.MD_BACKEND)||(t=!this.groupMetadata.participants.get((0,G.getMaybeMeUser)())),e=(0,ve.updateLocal)(this.id,{isReadOnly:t}).then((()=>this.isReadOnly=t))}e.then((()=>{this.isBroadcast&&this.updateTitle()}))}}updateIsAnnounceGrpRestrict(){if(this.isGroup&&!this.groupMetadata.stale){var e=this.groupMetadata.participants.get((0,G.getMaybeMeUser)()),t=e&&!e.isAdmin&&this.groupMetadata.announce;(0,ve.updateLocal)(this.id,{isAnnounceGrpRestrict:t}).then((()=>this.isAnnounceGrpRestrict=t))}}sortMsgs(e){var t=e.map((e=>{var t=(0,ee.default)(e.msgChunk,"msg.msgChunk");return{msg:e,chunkT:(0,ee.default)(t.at(0),"chunk.at(0)").t,index:t.indexOf(e)}}));return(0,c.default)(t,["chunkT","index"]).map((e=>e.msg))}_updateAssignedColor(){if(this.colors){var e=this.groupMetadata.participants,t=this.colors,a=(0,u.default)(Object.keys(t),e.map((e=>e.id.toString())).map(W.default));a.forEach((function(e){delete t[e]})),a.length&&this._saveAssignedColors()}}loadAssignedColors(){return this.groupMetadata&&this.listenTo(this.groupMetadata.participants,"remove reset",this._updateAssignedColor),(0,G.getGroupParticipantAssignedColor)(this.id)||{}}saveAssignedColors(){var e=this.colors;e&&(0,G.setGroupParticipantAssignedColor)(this.id,e)}assignedColor(e){var t,a=this.colors||(this.colors=this.loadAssignedColors()),r=(0,W.default)(e.toString());if(t=a[r])return t;var i={};(0,d.default)(a,((e,t)=>{i[e]?i[e].push(t):i[e]=[t]}));for(var s=Number.POSITIVE_INFINITY,n=1;n<w.default.NUM_COLORS;n++){if(!i[n]){t=n;break}i[n].length<s&&(s=i[n].length,t=n)}return a[r]=t,this._saveAssignedColors(),t}unstarAll(){var e=this.getAllMsgs();e.forEach((e=>{e&&(e.star=!1)})),(0,fe.removeStarredMsgs)(e)}constructMediaMsgs(e){return e?e.isViewOnce?new M.default:(this.getMediaMsgs().includes(e)||e.msgChunk===this.msgs?(t=this.getMediaMsgs()).hasMediaAfter=!1:t=new M.default,t.includes(e)||(e.msgChunk?t.add(e.msgChunk.filter((e=>e.isMedia))):t.add(e)),t):this.getMediaMsgs();var t}fts(e,t=1,a){if(1===t){var r=this.ftsCache[e];if(r)return r;var i=z.default.search(e,t,a,this.id);this.ftsCache[e]=i;var s=()=>{this.ftsCache[e]=null};return setTimeout(s,3e5),i.catch(s),i}return z.default.search(e,t,a,this.id)}_clearFtsCache(){this.ftsCache={}}updateSortTime(){this.promises.updateSortTime||(this.promises.updateSortTime=this.regCancellablePromise((0,m.delayMs)(0)).then((()=>{var e=this.getLastTimestampMsg();return e?(this.t=e.t,Promise.resolve()):this.msgs.msgLoadState.noEarlierMsgs||this.pendingMsgs?Promise.resolve():this.loadEarlierMsgs()})).then((e=>{if(e){var t=this.getLastTimestampMsg();this.t=t?t.t:void 0}})).catch((()=>{})).finally((()=>{this.promises.updateSortTime=void 0})))}removeFromCollection(e){e.star&&(0,fe.removeStarredMsgs)([e]),e.isMedia&&this.mediaMsgs?this.mediaMsgs.remove(e):e.getLinks().length&&this.linkMsgs?this.linkMsgs.remove(e):e.asDoc&&this.docMsgs?this.docMsgs.remove(e):null!=e.asProduct&&this.productMsgs&&this.productMsgs.remove(e),this.updateMediasCountOnMsg(e,!0)}getMediaMsgs(){return this.mediaMsgs||(this.mediaMsgs=new M.default),this.mediaMsgs}getLinkMsgs(){return this.linkMsgs||(this.linkMsgs=new T.default),this.linkMsgs}getDocMsgs(){return this.docMsgs||(this.docMsgs=new C.default),this.docMsgs}getParticipantCount(){var e;return(null===(e=this.groupMetadata)||void 0===e?void 0:e.participants.length)||1}getProductMsgs(){return this.productMsgs||(this.productMsgs=new P.default),this.productMsgs}getReceivedVcardMsgs(){return this.contact.isMyContact||!this.contact.isUser?null:(this.receivedVcardMsgs||(this.receivedVcardMsgs=new A.default,this.receivedVcardMsgs.parent=this),this.receivedVcardMsgs)}dismissVcard(){this.vcardDismissed=!0}updateMediasCountOnMsg(e,t=!1){if(U.default.supportsFeature(U.default.F.MEDIAS_COUNT)){var a=t?-1:1;e.isMedia&&(this.mediaCount+=a);var r=e.getLinks().length;r&&(this.linkCount+=a*r),e.asDoc&&(this.docCount+=a)}}resetMediasCount(e){U.default.supportsFeature(U.default.F.MEDIAS_COUNT)&&(null!=e.mediaCount&&(this.mediaCount=e.mediaCount),null!=e.linkCount&&(this.linkCount=e.linkCount),null!=e.docCount&&(this.docCount=e.docCount))}getStarredMsgs(){var e=this.starredMsgs;return e||(this.starredMsgs=e=new fe.StarredMsgCollection,this.starredMsgs.add(fe.default.filter((e=>e.chat===this)))),e}setAndKeepPrevious(e,t){var a=Object.keys(e);a.forEach((e=>{e in this.ackedProps||(this.ackedProps[e]=this[e])})),t.finally((()=>{a.forEach((e=>{delete this.ackedProps[e]}))})),this.set(e)}getAckedPhoneProps(){return{wid:this.id,mute:this.mute.expiration,active:this.active,isReadOnly:this.isReadOnly,modifyTag:this.modifyTag,unreadCount:this.unreadCount,ephemeralDuration:this.ephemeralDuration,ephemeralSettingTimestamp:this.ephemeralSettingTimestamp,changeNumberOldJid:this.changeNumberOldJid,changeNumberNewJid:this.changeNumberNewJid,archive:"archive"in this.ackedProps?this.ackedProps.archive:this.archive,notSpam:"notSpam"in this.ackedProps?this.ackedProps.notSpam:this.notSpam,pin:"pin"in this.ackedProps?this.ackedProps.pin:this.pin}}regCancellablePromise(e){return this._promises||(this._promises=[]),this._promises.push(e),e.cancellable().finally((()=>{this._promises=(0,l.default)(this._promises,e),this._promises&&0===this._promises.length&&(this._promises=null)}))}cancelPendingPromises(){this._promises&&this._promises.length>0&&(this._promises.forEach((function(e){e.cancel()})),this._promises=null)}matchFilter(e={}){return!!(0,f.default)(e)||(e.label?this.labels&&this.labels.includes(e.label):e.kind===w.default.SMB_SEARCH_FILTERS.UNREAD?!!this.hasUnread:e.kind===this.kind)}getEphemeralSetting(){if(!ce.default.ephemeralMessages)return null;var e=this.isGroup?this.groupMetadata.ephemeralDuration:this.ephemeralDuration;return null==e||0===e?null:e}getEphemeralSettingTimestamp(){return ce.default.ephemeralMessages?this.isGroup||0===this.ephemeralSettingTimestamp?null:this.ephemeralSettingTimestamp:null}isEphemeralSettingOn(){if(!ce.default.ephemeralMessages)return!1;var e=this.getEphemeralSetting();return null!=e&&0!==e}shouldShowEphemeralSetting(){if(!ce.default.ephemeralMessages)return!1;if(!ce.default.ephemeralMessagesSetting)return!1;if(!U.default.supportsAnyFeature(U.default.F.EPHEMERAL_MESSAGES,U.default.F.MD_BACKEND))return!1;if(this.isGroup){var e=this.groupMetadata.participants.getSuperAdmin();if(e&&e.contact.isEnterprise)return!1;if(!this.groupMetadata.canSetEphemeralSetting()&&!this.isEphemeralSettingOn())return!1}return!this.isBroadcast&&!this.contact.isEnterprise}getCollection(){return a(43334).default}getGroupMetadataCollection(){return a(99922).default}}function Re(e){var t,a=["buttons","caption","broadcast","ephemeralDuration","ephemeralSettingTimestamp","ephemeralStartTimestamp","ephemeralOutOfSync","dynamicReplyButtons","replyButtons"];return!0===e.isDynamicReplyButtonsMsg&&e.type===w.default.MSG_TYPE.CHAT||(a=["footer",...a]),(null===(t=e.quotedMsg)||void 0===t?void 0:t.type)!==w.default.MSG_TYPE.PRODUCT&&(a=["quotedMsg","quotedParticipant","quotedRemoteJid","quotedStanzaID",...a]),(0,o.default)(e.toJSON(),a)}De.Proxy="chat",De.idClass=ye.default;var Le=(0,y.defineModel)(De);t.default=Le},84840:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(e,t)=>{var a=e.pin||0,r=t.pin||0;if(a||r)return a!==r?a>r?-1:1:e.id.toString()<t.id.toString()?-1:1;var i=e.t||0,s=t.t||0;return i!==s?i>s?-1:1:e.id.toString()<t.id.toString()?-1:1};t.default=a},43334:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ChatCollection=void 0;var s=i(a(19976)),n=i(a(52954)),o=i(a(42208)),l=i(a(60417)),d=i(a(90882)),u=i(a(16760)),c=i(a(45455)),h=i(a(54073)),f=a(91460),p=r(a(54019)),m=a(43322),_=i(a(46774)),v=i(a(84840)),g=r(a(52737)),E=i(a(50935)),y=i(a(7470)),S=a(15790),C=a(19741),T=a(12392),M=i(a(24)),b=i(a(22182)),P=a(95595),A=i(a(18120)),I=i(a(23539)),O=i(a(77865)),N=i(a(11680)),w=i(a(75537)),D=i(a(49569)),R=a(54371),L=a(17555),k=a(1767),x=i(a(2734)),F=i(a(47805)),G=i(a(23054)),U=a(51803),B=i(a(17744)),j=i(a(68384)),V=r(a(12767));function H(){var e=(0,s.default)(["ChatCollection:saveToCache save: ",""]);return H=function(){return e},e}function W(){var e=(0,s.default)(["ChatStore:resyncMessages resume dropped"]);return W=function(){return e},e}function K(){var e=(0,s.default)(["model:chat:resume error in processing checksum:",""]);return K=function(){return e},e}function Y(){var e=(0,s.default)(["model:chat:resume error in processing reply:",""]);return Y=function(){return e},e}function q(){var e=(0,s.default)(["model:chat:resume: deleted chat for ",""]);return q=function(){return e},e}function z(){var e=(0,s.default)(["model:chat:resume: cleared chat for ",""]);return z=function(){return e},e}function Q(){var e=(0,s.default)(["ChatStore:resyncMessages resume success"]);return Q=function(){return e},e}function J(){var e=(0,s.default)(["ChatStore:resyncMessages resume error ",""]);return J=function(){return e},e}function X(){var e=(0,s.default)(["ChatStore:resyncMessages"]);return X=function(){return e},e}class Z extends p.default{constructor(){super(),this.notSpam={},this.promises={sendUnstarAll:null},this._sortEnabled=!1,this.enableSortListener(),this.listenTo(V.default,"change:stream",(()=>{V.default.stream===V.STREAM.RESUMING&&this.forEach((e=>{e.pendingMsgs=!1}))})),this.listenToOnce(this,"sort",(0,h.default)(this.setIndexes,100))}enableSortListener(e){this._sortEnabled||(this.listenTo(this,"change:t change:pin change:shouldAppearInList",this.sort),e&&this.sort(),this._sortEnabled=!0)}disableSortListener(){this._sortEnabled&&(this.stopListening(null,null,this.sort),this._sortEnabled=!1)}setIndexes(){this.forEach(((e,t)=>{e.initialIndex=t}))}active(){var e=this.filter((e=>e.active))[0];return e||void 0}find(e){return A.default.supportsFeature(A.default.F.MD_BACKEND)?this._findMD(e):super.find(e)}_find(e){return Promise.resolve({id:e,createdLocally:!0})}_findQuery(e){var t=this,r={};return(0,T.find)(!!e.retry,r).then((function(e){if("preempted"===e)return Promise.reject("chats preempted");if(g.default.platform===g.PLATFORMS.IPHONE||g.default.platform===g.PLATFORMS.SMBI){var i=a(58885).default;(0,c.default)(e)?i.trigger(E.default.COLLECTION_HAS_SYNCED):setTimeout((()=>{i.trigger(E.default.COLLECTION_HAS_SYNCED)}),2500)}return t.trigger(E.default.COLLECTION_HAS_SYNCED,r),Promise.resolve(e)}))}_findMD(e){var t=()=>super.find,a=this;return(0,n.default)((function*(){var r=a.get(e);return r||((r=yield t().call(a,e))&&(yield(0,S.createLocal)(r.id,{id:r.id.toString(),t:r.t,unreadCount:r.unreadCount,archive:r.archive,isReadOnly:r.isReadOnly,modifyTag:r.modifyTag,notSpam:r.notSpam,pin:r.pin,changeNumberOldJid:null!=r.changeNumberOldJid?r.changeNumberOldJid.toString():void 0,changeNumberNewJid:null!=r.changeNumberNewJid?r.changeNumberNewJid.toString():void 0,muteExpiration:r.muteExpiration,endOfHistoryTransferType:r.endOfHistoryTransferType})),r)}))()}sync(){this.findQuery({}).catchType(C.WebdDrop,(()=>{}));var e=a(58885).default;return Promise.all([(0,B.default)(this,E.default.COLLECTION_HAS_SYNCED),e.hasSynced()])}getKeysForResyncMsgs(){return this.filter((function(e){return e.shouldAppearInList})).map((function(e){var t=e.getAckedPhoneProps(),a=e.lastReceivedKey;return a&&(t.id=a.id,t.fromMe=a.fromMe.toString(),t.participant=a.participant),t}))}resyncMessages(){__LOG__(2)(X());var e=this.getKeysForResyncMsgs();return(0,R.resyncMessages)(e).then((e=>{if(e.status>=400)return __LOG__(3)(J(),e.status),Promise.reject(new Error("ChatStore:resyncMessages resume error "+e.status));__LOG__(2)(Q());try{this.disableSortListener(),e.data.forEach((e=>{if(e.disableUnreadAnchor=!1,e.firstUnreadKey=void 0,e.keys&&1===e.keys.length){var t=e.keys[0];e.firstUnreadKey=new O.default({id:t[0],fromMe:t[1],participant:t[2],remote:e.id})}if("delete"!==e.type&&!j.default.isPSA(e.id)){var a=y.default.get(e.id);if(a){if(e.name){var r={name:e.name};(0,U.updateLocal)(a.id,r).then((()=>{a.set(r)}))}}else y.default.add({id:e.id,name:e.name})}var i=this.get(e.id);if(i)if("clear"===e.type){i.resetMediaMsgs();var s=[];i.msgs.forEach((e=>s.push(e))),i.msgChunks.length&&i.msgChunks.forEach((e=>{e.forEach((e=>s.push(e)))})),i.set({t:e.t,unreadCount:e.unreadCount,createdLocally:!1,archive:e.archive,isReadOnly:e.isReadOnly,modifyTag:e.modifyTag,msgs:[],notSpam:e.notSpam,unreadMsgAnchor:void 0,disableUnreadAnchor:e.disableUnreadAnchor,pendingMsgs:e.pendingMsgs,pin:e.pin,changeNumberOldJid:e.changeNumberOldJid,changeNumberNewJid:e.changeNumberNewJid,muteExpiration:e.muteExpiration,ephemeralDuration:e.ephemeralDuration,ephemeralSettingTimestamp:e.ephemeralSettingTimestamp}),s.forEach((e=>{e.delete()})),__LOG__(2)(z(),e.id)}else"delete"===e.type?(i.delete(),__LOG__(2)(q(),e.id)):i.set(e,{merge:!0});else this.add(e)})),this.enableSortListener(!0)}catch(e){__LOG__(3)(Y(),String(e))}(0,f.delayMs)(100).then((()=>{A.default.supportsFeature(A.default.F.USER_NOTICE)&&N.default.sync(!0),A.default.supportsFeature(A.default.F.SETTINGS_SYNC)&&x.default.sync(!0),e.checksum&&(0,L.resyncContacts)(e.checksum),e.statusChecksum&&a(57185).default.sync(e.statusChecksum),e.quickRepliesChecksum&&w.default.sync(e.quickRepliesChecksum),e.labelsChecksum&&I.default.sync(e.labelsChecksum),e.stickerPackChecksum&&G.default.sync(e.stickerPackChecksum),null!=e.recentStickersChecksum&&D.default.sync(e.recentStickersChecksum),null!=e.starredStickersChecksum&&F.default.sync(e.starredStickersChecksum)})).catch((e=>{__LOG__(3)(K(),String(e))}))})).catchType(C.WebdDrop,(function(e){return __LOG__(3)(W()),Promise.reject(e)}))}unstarAllMessages(e,t){return(0,k.unstarAllMessages)(e,t)}forwardMessagesToChats(e,t){var r=Promise.map(e,(e=>Promise.props({message:e,canForward:e.canForward()&&(null!=a(58885).default.get(e.id)||e.isEphemeral)})));return Promise.map(t.filter((e=>e.canSend)),(e=>{var t;return t=e.isUser&&e.contact.isBlocked()?(0,m.unblockContact)(e.contact):Promise.resolve(!0),Promise.all([r,t]).spread((t=>{var a=(0,u.default)((0,d.default)(t,{canForward:!0}),"message"),r=(0,u.default)((0,d.default)(t,{canForward:!1}),"message");return Promise.props({chat:e,undelivered:e.forwardMessages(a,!0),canForward:a,cannotForward:r})}))})).then((e=>{var t=(0,l.default)(e.map((({chat:e,undelivered:t,canForward:a,cannotForward:r})=>{var i=null;return(t.length||r.length)&&(i=(0,M.default)({chat:e,undelivered:t,canForward:a,cannotForward:r})),i?{chat:e,reason:i}:null})));if(t.length)throw new b.default(t);return!0}))}saveToCache(){if(g.default.shouldSaveToCache()){var{id:e}=Z.cachePolicy;__LOG__(2)(H(),String(e));var t=this.map(((e,t)=>{var a=e.toJSON(),r=t<20?Math.min(e.unreadCount+20,50):Math.min(Math.max(3,e.unreadCount),20);return a.msgs=e.msgs?e.msgs.slice(-r).map((e=>(0,o.default)(e.toJSON(),(e=>void 0!==e)))):[],a}));(0,P.setCollection)(e,t,!0)}}onResume(){var e=this.active();e&&e.presence.subscribe()}delete(){super.delete(),this.listenToOnce(this,"sort",(0,h.default)(this.setIndexes,100))}}t.ChatCollection=Z,Z.model=_.default,Z.comparator=v.default,Z.cachePolicy={id:"chat",policy:p.CACHE_POLICY.IMMEDIATE,trigger:"add sort remove reset change:id change:t change:unreadCount change:archive change:isReadOnly change:isAnnounceGrpRestrict change:modifyTag change:muteExpiration change:name change:notSpam change:pin change:changeNumberOldJid change:changeNumberNewJid change:lastReceivedKey change:msg:ack msgs:loadEarlier"};var $=new Z;t.default=$},5320:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(54019)),n=i(a(50935)),o=a(19741),l=r(a(96452)),d=i(a(27e3)),u=i(a(58885));class c extends s.default{constructor(...e){super(...e),this.hasDocBefore=!0}delete(){super.delete(),this.stopListening(),this.reset()}queryDocs(e,t){if(t)return this.queryDocBefore||(this.queryDocBefore=u.default.queryMedia(t.id.remote,n.default.MEDIA_QUERY_LIMIT,"before",t.id,"document").then((e=>((!e||e.length<n.default.MEDIA_QUERY_LIMIT)&&(this.hasDocBefore=!1),this.add(e.filter((e=>h(e))),{at:0}),{length:e.length}))).catchTypes(o.WebdDrop,l.ProtoVersionUndefined,(()=>{})).catchEqualTo(404,(()=>{})).finally((()=>{this.queryDocBefore=null,this.trigger("query_doc_before")})),this.trigger("query_doc_before")),this.queryDocBefore;var a=e.msgs;if(0===this.length){if(!a||0===a.length)return this.hasDocBefore=!1,new Promise((e=>{e({eof:!0})}));this.add(a.filter((e=>h(e))),{at:0})}if(e.msgs.msgLoadState.noEarlierMsgs)return this.hasDocBefore=!1,new Promise((e=>{e({eof:!0})}));if(this.length<=2*n.default.MEDIA_QUERY_LIMIT){var r=0===this.length?a.head():this.head();return this.queryDocs(e,r)}return new Promise((e=>{e({eof:!1})}))}}function h(e){return null!=e.asDoc&&!e.isVcardOverMmsDocument}t.default=c,c.model=d.default},45883:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(54019)),n=i(a(50935)),o=a(19741),l=r(a(96452)),d=i(a(27e3)),u=i(a(58885));class c extends s.default{constructor(...e){super(...e),this.hasLinkBefore=!0}delete(){super.delete(),this.stopListening(),this.reset()}queryLinks(e,t){if(t)return this.queryLinkBefore||(this.queryLinkBefore=u.default.queryMedia(t.id.remote,n.default.MEDIA_QUERY_LIMIT,"before",t.id,"url").then((e=>((!e||e.length<n.default.MEDIA_QUERY_LIMIT)&&(this.hasLinkBefore=!1),this.add(e,{at:0}),this.createLinksAndAddMsgs(e),{length:e.length}))).catchTypes(o.WebdDrop,l.ProtoVersionUndefined,(()=>{})).catchEqualTo(404,(()=>{})).finally((()=>{this.queryLinkBefore=null,this.trigger("query_link_before")})),this.trigger("query_link_before")),this.queryLinkBefore;var a=e.msgs.getModelsArray();if(0===this.length){if(!a||0===a.length)return this.hasLinkBefore=!1,new Promise((e=>{e({eof:!0})}));this.add(a.filter((e=>e.getLinks().length>0)),{at:0}),this.createLinksAndAddMsgs(a)}if(e.msgs.msgLoadState.noEarlierMsgs)return this.hasLinkBefore=!1,new Promise((e=>{e({eof:!0})}));if(this.length<=2*n.default.MEDIA_QUERY_LIMIT){var r=0===this.length?e.msgs.head():this.head();return this.queryLinks(e,r)}return new Promise((e=>{e({eof:!1})}))}createLinksAndAddMsgs(e){var t=[];Promise.loop(((a,r,i)=>{e.length===i&&a();var s=e[i];s.getLinks().length&&t.push(s)})).then((()=>{this.add(t),this.trigger("query_link_before")}))}}t.default=c,c.model=d.default,c.comparator=(e,t)=>e.t-t.t},55526:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(54019)),n=i(a(50935)),o=a(19741),l=r(a(96452)),d=i(a(27e3)),u=i(a(58885)),c="before",h="after";function f(e){return e.isMedia&&!e.isViewOnce}class p extends s.default{constructor(...e){super(...e),this.hasMediaBefore=!0,this.hasMediaAfter=!0}delete(){super.delete(),this.stopListening()}getAfter(e){var t=this.indexOf(e);return t<0||t===this.length-1?null:this.at(t+1)}getBefore(e){var t=this.indexOf(e);return t<=0?null:this.at(t-1)}loadEarlierMedias(){var e=this.head();e&&this.queryMedia({msg:e})}loadRecentMedias(){var e=this.last();e&&this.queryMedia({msg:e,direction:h})}loadMoreAroundIfNeeded(e){if(e&&!e.isViewOnce){var t=this.indexOf(e);t<20&&this.hasMediaBefore&&this.loadEarlierMedias(),this.length-t<20&&this.hasMediaAfter&&this.loadRecentMedias()}}queryMedia(e){var t,{chat:a,msg:r}=e,i=null!==(t=e.direction)&&void 0!==t?t:c;if(!r&&a){var s=a.msgs;if(!s||0===s.length)return this.hasMediaBefore=!1,new Promise((e=>{e({eof:!0})}));this.add(s.filter(f),{at:0});var d=this.toArray();if(a.msgs.msgLoadState.noEarlierMsgs)return this.hasMediaBefore=!1,new Promise((e=>{e({eof:!0})}));if(d.length<=2*n.default.MEDIA_QUERY_LIMIT){var p=0===d.length?s.head():d[0];return this.queryMedia({chat:a,msg:p})}return new Promise((e=>{e({eof:!1})}))}if(r&&i===c){if(this.queryMediaBefore)return this.queryMediaBefore;var m=0;return this.queryMediaBefore=u.default.queryMedia(r.id.remote,n.default.MEDIA_QUERY_LIMIT,i,r.isMedia?r.id:void 0).then((e=>{var t=e.messages;(!t||t.length<n.default.MEDIA_QUERY_LIMIT)&&(this.hasMediaBefore=!1);var r=[];t&&t.length>0&&(r=t.filter(f)),this.add(r,{at:0});var i={mediaCount:e.mediaCount,linkCount:e.linkCount,docCount:e.docCount};return a&&a.resetMediasCount(i),{length:m=r.length}})).catchTypes(o.WebdDrop,l.ProtoVersionUndefined,(()=>{})).catchEqualTo(404,(()=>{})).finally((()=>{this.queryMediaBefore=null,this.trigger("query_media_before",m)})),this.trigger("query_media_before",0),this.queryMediaBefore}if(r&&i===h)return this.queryMediaAfter?this.queryMediaAfter:this.queryMediaAfter=u.default.queryMedia(r.id.remote,n.default.MEDIA_QUERY_LIMIT,i,r.id).then((e=>{var t=e.messages;(!t||t.length<n.default.MEDIA_QUERY_LIMIT)&&(this.hasMediaAfter=!1);var r=[];t&&t.length>0&&(r=t.filter(f)),this.add(r);var i={mediaCount:e.mediaCount,linkCount:e.linkCount,docCount:e.docCount};return a&&a.resetMediasCount(i),{length:r.length}})).catchTypes(o.WebdDrop,l.ProtoVersionUndefined,(()=>{})).catchEqualTo(404,(()=>{})).finally((()=>{this.queryMediaAfter=null,this.trigger("query_media_after")}))}}t.default=p,p.model=d.default},90980:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MsgLoadState=void 0;var s=i(a(47677)),n=i(a(54019)),o=r(a(61247)),l=i(a(27e3));class d extends o.default{constructor(...e){super(...e),this.noEarlierMsgs=(0,o.prop)(),this.isLoadingEarlierMsgs=(0,o.prop)(),this.isLoadingRecentMsgs=(0,o.prop)(),this.isLoadingAroundMsgs=(0,o.prop)(),this.contextLoaded=(0,o.prop)()}}d.Proxy="msgLoad";var u=(0,o.defineModel)(d);t.MsgLoadState=u;class c extends n.default{constructor(){super(),this.msgLoadState=new u({noEarlierMsgs:!1,isLoadingEarlierMsgs:!1,isLoadingRecentMsgs:!1,isLoadingAroundMsgs:!1,contextLoaded:!1}),this.listenTo(this,"add remove reset sort",this.triggerChangeLast)}delete(){this.stopListening(),super.delete(),this.msgLoadState.delete()}triggerChangeLast(e,t,a){var r=this.last();if(this._last!==r){this._last=r;var i=!1;t&&t.includes(e)&&a&&a.add&&!a.remove&&(i=!0),this.trigger("change:last",r,i)}}add(e,t){var r=super.add(e,t);return a(58885).default.add(r,t).forEach((e=>{e&&this.isModel(e)&&(e.msgChunk=this)})),r&&this.trigger("bulk_add",r,t),r}remove(e,t={},a=!1){var r=super.remove(e,t),i=!!t&&t.silent,s=r.filter((e=>!!e));return s.length&&!i&&(this.trigger("remove_msgs",s,t),a||this.trigger("update_sort_time")),r}replace(e){this.msgLoadState=e.msgLoadState,this.loadRecentPromise=e.loadRecentPromise,this.loadEarlierPromise=e.loadEarlierPromise,this.loadAroundPromise=e.loadAroundPromise;var t=e.getModelsArray();this.set(t,{silent:!0,merge:!1}),t.forEach((e=>{this.isModel(e)&&(e.msgChunk=this)})),this.trigger("bulk_add",t)}onMsgLoadStateChange(e){var t,a=()=>{e()},r=()=>{(0,s.default)(null!=t,"prevMsgLoadState cannot be null after bulk_add"),t.off("change",a);var r=this.msgLoadState;r.on("change",a),t=r,e()};(t=this.msgLoadState).on("change",a),this.on("bulk_add",r);var i=()=>{(0,s.default)(null!=t,"prevMsgLoadState cannot be null when unsubscribing"),this.off("bulk_add",r),t.off("change",a)};return()=>{var e=i;e&&(i=null,e())}}}t.default=c,c.model=l.default},56953:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(54019)),s=r(a(27e3));class n extends i.default{constructor(...e){super(...e),this.hasProductBefore=!0}delete(){super.delete(),this.stopListening(),this.reset()}queryProducts(e){var t=e.msgs;return this.hasProductBefore=!1,this.add(t.filter((e=>null!=e.asProduct)),{at:0}),Promise.resolve()}}t.default=n,n.model=s.default,n.comparator=(e,t)=>e.t-t.t},7020:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(54019)),s=a(19741),n=r(a(18120)),o=r(a(27e3)),l=r(a(58885));class d extends i.default{constructor(...e){super(...e),this.syncPromise=null,this.isSynced=!1}onResume(){this.isSynced=!1,this.sync(this.parent)}sync(e){return n.default.supportsFeature(n.default.F.INDEX_RECEIVED_VCARD)?this.isSynced?Promise.resolve():(this.syncPromise||(this.syncPromise=l.default.queryVcard(e.id).then((e=>this.add(e))).catchType(s.E499,(()=>{})).catch((()=>{})).finally((()=>{this.isSynced=!0,this.syncPromise=null}))),this.syncPromise):(this.isSynced=!0,Promise.resolve())}}t.default=d,d.model=o.default,d.resumeOnAvailable=!0},9106:(e,t,a)=>{"use strict";var r=a(14859);t.Z=function(){!l.default.supportsFeature(l.default.F.MD_BACKEND)&&n.default.protoVersion&&E.default.clearBPQueue().catch((()=>{}));(0,c.clearAllMemoizeCache)(),n.default.delete(),h.default.delete(),p.default.delete(),f.default.delete(),v.default.delete(),y.default.delete(),E.default.delete(),S(i.default),S(m.default),_.default.forEach((e=>{S(e.stickers)})),S(_.default);var e=["Chat","StatusV3","StickerPack","Sticker"];Object.keys(s.default).forEach((t=>{e.includes(t)||S(s.default[t])})),(0,u.delistAndDeleteAllMedia)(),(0,o.clearAllTemporaryStorageData)(),d.default.clear(),n.default.blockStoreAdds=!0};var i=r(a(43334)),s=r(a(61029)),n=r(a(52737)),o=a(95595),l=r(a(18120)),d=r(a(54146)),u=a(53882),c=a(50041),h=r(a(11680)),f=r(a(72424)),p=r(a(2734)),m=r(a(57185)),_=r(a(23054)),v=r(a(17026)),g=a(11419),E=r(a(76022)),y=r(a(62325));function S(e){var t=[...e.models];e.reset(),t.forEach((e=>{(0,g.isFunction)(e.delete)&&e.delete()})),e.delete()}},42871:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.handle=function([e]){switch(e.type){case"const":l.default[e.key]=e.value;break;case"read":if(e.isStatus){m.default.handle([e]);break}case"unread":var t=n.default.get(e.jid);t&&("read"===e.type?(0,_.markSeen)(t):"unread"===e.type&&(0,_.markUnseen)(t));break;case"log":o.upload({reason:"server-requested",immediate:!0,force:!0,isHighPri:!0});break;case"privacy":if(e.jid){var a=h.default.get(e.jid);a&&a.reset(),f.default.update(e.jid).catchType(u.WebdDrop,(()=>{})),p.default.update(e.jid).catchType(u.WebdDrop,(()=>{}))}else __LOG__(3)(y());break;case"identity":if(e.jid){var r=d.default.get(e.jid);r?(0,c.updateIdentity)(r,e):__LOG__(3)(E())}else __LOG__(3)(g());break;default:__LOG__(3)(v(),e.type)}};var s=i(a(19976)),n=i(a(43334)),o=r(a(3594)),l=i(a(50935)),d=i(a(7470)),u=a(19741),c=a(33526),h=i(a(99098)),f=i(a(15118)),p=i(a(76019)),m=i(a(57185)),_=a(58269);function v(){var e=(0,s.default)(["Store:Cmd:handle:unknown ",""]);return v=function(){return e},e}function g(){var e=(0,s.default)(["Store:Cmd:handle:identity no jid"]);return g=function(){return e},e}function E(){var e=(0,s.default)(["Store:Cmd:handle:identity no contact"]);return E=function(){return e},e}function y(){var e=(0,s.default)(["Store:Cmd:handle:privacy no jid"]);return y=function(){return e},e}},61029:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(79148)),s=r(a(75472)),n=r(a(89216)),o=r(a(79504)),l=r(a(65468)),d=r(a(43334)),u=r(a(23109)),c=r(a(7470)),h=r(a(19744)),f=r(a(61311)),p=r(a(99922)),m=r(a(23539)),_=r(a(84383)),v=r(a(58885)),g=r(a(92313)),E=r(a(85059)),y=r(a(46937)),S=r(a(99098)),C=r(a(15118)),T=r(a(75537)),M=r(a(67110)),b=r(a(49569)),P=r(a(72852)),A=r(a(63095)),I=r(a(47805)),O=r(a(76019)),N=r(a(57185)),w=r(a(93771)),D=r(a(84517)),R={Blocklist:i.default,BusinessCategoryResult:s.default,BusinessProfile:n.default,Call:o.default,Catalog:l.default,Chat:d.default,ChatPreference:u.default,Contact:c.default,ConversionTuple:h.default,EmojiVariant:f.default,GroupMetadata:p.default,Label:m.default,LiveLocation:_.default,Msg:v.default,MsgInfo:g.default,Mute:E.default,Order:y.default,Presence:S.default,ProfilePicThumb:C.default,QuickReply:T.default,RecentEmoji:M.default,RecentSticker:b.default,StarredGifMsg:P.default,StarredMsg:A.default,StarredSticker:I.default,Status:O.default,StatusV3:N.default,Sticker:w.default,StickerSearch:D.default};t.default=R},16804:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(54019)),n=i(a(46774)),o=i(a(43334)),l=i(a(84840)),d=a(95595),u=i(a(99922)),c=r(a(12767));class h extends s.default{constructor(e,t){super(),this.stale=!1,this.add(e,{silent:!0}),this.contact=t,this.listenTo(u.default,"group_participant_change_".concat((0,d.getMaybeMeUser)().toString()),this.updateCommonGroups),this.listenTo(u.default,"group_participant_change_".concat(this.contact.toString()),this.updateCommonGroups),this.listenTo(c.default,"change:stream",(()=>{c.default.stream===c.STREAM.DISCONNECTED&&(this.stale=!0)}))}updateCommonGroups(e){var t=u.default.assertGet(e).participants,a=(0,d.getMaybeMeUser)();this.get(e)?t.get(this.contact)&&t.get(a)||this.remove(e):t.get(this.contact)&&t.get(a)&&this.add(o.default.assertGet(e))}}t.default=h,h.model=n.default,h.comparator=l.default},77690:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=new RegExp("[A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎↃↄⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〆〱-〵〻〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛥꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]");t.default=a},40147:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(19976)),n=i(a(77690)),o=r(a(61247)),l=i(a(79148)),d=a(28291),u=i(a(52737)),c=i(a(50935)),h=a(74460),f=a(95595),p=a(75459),m=i(a(17957)),_=a(28352),v=i(a(68560)),g=i(a(15118)),E=i(a(76019)),y=i(a(68384)),S=i(a(3111));function C(){var e=(0,s.default)(["contact:onPendingActionUpdate pendingAction value is invalid"]);return C=function(){return e},e}function T(){var e=(0,s.default)(["contact:getStatus for non-user ",""]);return T=function(){return e},e}var M=/^[^0-9]+$/;class b extends o.default{constructor(...e){super(...e),this.id=(0,o.prop)(),this.name=(0,o.prop)(),this.shortName=(0,o.prop)(),this.pushname=(0,o.prop)(),this.type=(0,o.prop)("in"),this.verifiedName=(0,o.prop)(),this.isBusiness=(0,o.prop)(),this.isEnterprise=(0,o.prop)(),this.verifiedLevel=(0,o.prop)(),this.actualActors=(0,o.prop)(),this.hostStorage=(0,o.prop)(),this.privacyModeTs=(0,o.prop)(),this.statusMute=(0,o.prop)(),this.sectionHeader=(0,o.prop)(),this.labels=(0,o.prop)(),this.isContactBlocked=(0,o.session)(!1),this.verificationString=(0,o.session)(),this.verificationBinary=(0,o.session)(),this.pendingAction=(0,o.session)(),this.promises=(0,o.session)((()=>({}))),this.status=(0,o.session)(),this.profilePicThumb=(0,o.session)(),this.businessProfile=(0,o.session)(),this.commonGroups=(0,o.session)(),this.liveLocations=(0,o.session)(),this.businessCatalog=(0,o.session)(),this.locale=(0,o.session)(),this.notifyName=(0,o.derived)(this._notifyNameFunction,["pushname","isBusiness","verifiedLevel","verifiedName"]),this.mentionName=(0,o.derived)(this._mentionName,["isMyContact","isBusiness","verifiedLevel","name","notifyName"]),this.displayName=(0,o.derived)(this._displayName,["id","mentionName","isMe"]),this.userid=(0,o.derived)(this._userid),this.userhash=(0,o.derived)(this._userhash),this.searchName=(0,o.derived)(this._searchName,["name","id","locale"]),this.searchVerifiedName=(0,o.derived)(this._searchVerifiedName,["verifiedLevel","verifiedName"]),this.header=(0,o.derived)(this._header,["name"]),this.isMe=(0,o.derived)(this._isMe),this.isUser=(0,o.derived)(this._isUser),this.isGroup=(0,o.derived)(this._isGroup),this.isBroadcast=(0,o.derived)(this._isBroadcast),this.isPSA=(0,o.derived)(this._isPSA),this.formattedShortNameWithNonBreakingSpaces=(0,o.derived)(this._formattedShortNameWithNonBreakingSpaces,["shortName","formattedName","id","locale"]),this.formattedShortName=(0,o.derived)(this._formattedShortName,["shortName","formattedName","id","locale"]),this.formattedName=(0,o.derived)(this._formattedName,["name","id","locale","verifiedLevel","verifiedName"]),this.formattedUser=(0,o.derived)(this._formattedUser,["name","id","locale","verifiedLevel","verifiedName"]),this.isWAContact=(0,o.derived)(this._isWAContact,["type"]),this.isMyContact=(0,o.derived)(this._isMyContact,["name"]),this.showBusinessCheckmarkAsPrimary=(0,o.derived)(this._showBusinessCheckmarkAsPrimary,["isBusiness","verifiedLevel","name","verifiedName"]),this.showBusinessCheckmarkAsSecondary=(0,o.derived)(this._showBusinessCheckmarkAsSecondary,["isBusiness","verifiedLevel","name","verifiedName"])}_notifyNameFunction(){return this.isBusiness&&this.verifiedLevel!==c.default.VERIFIED_LEVEL.HIGH?this.verifiedName:this.pushname}_mentionName(){return!this.isMyContact&&this.isBusiness&&this.verifiedLevel!==c.default.VERIFIED_LEVEL.HIGH?null:this.name||this.notifyName}_displayName(){return this.isMe&&u.default.pushname?u.default.pushname:this.mentionName||(0,S.default)(this.id)}_userid(){return this.isUser?y.default.user(this.id):null}_userhash(){return this.isUser?(0,v.default)((this.id.user||"")+"WA_ADD_NOTIF"):null}_searchName(){return y.default.isPSA(this.id)?m.default.accentFold(m.default.t(1854)):this.name?m.default.accentFold(this.name):null}_searchVerifiedName(){return this.verifiedLevel!==c.default.VERIFIED_LEVEL.HIGH?null:this.verifiedName?m.default.accentFold(this.verifiedName):null}_header(){if(this.name){var e=this.name.toLowerCase(),t=n.default.exec(e);if(t&&0===t.index||t&&M.test(e.slice(t.index))){var a=t[0],r=m.default.removeAccents(a);return(0,h.getCollator)().compare(r,a)?a:r}return"#"}}_isMe(){return this.id.equals((0,f.getMaybeMeUser)())}_isUser(){return y.default.isUser(this.id)}_isGroup(){return y.default.isGroup(this.id)}_isBroadcast(){return y.default.isBroadcast(this.id)}_isPSA(){return y.default.isPSA(this.id)}_formattedShortNameWithNonBreakingSpaces(){return this.id?this.isMe?m.default.t(1843):this.shortName||this.formattedName&&this.formattedName.replace(/\s/g," "):""}_formattedShortName(){return this.id?this.isMe?m.default.t(1843):this.shortName||this.formattedName:""}_formattedName(){return this.id?this.isMe?m.default.t(1843):y.default.isPSA(this.id)?m.default.t(1854):this.name?this.name:this.verifiedLevel===c.default.VERIFIED_LEVEL.HIGH&&this.verifiedName?this.verifiedName:this.isUser?(0,S.default)(this.id):"":""}_formattedUser(){return this.getFormattedUser()}_isWAContact(){return this.isUser&&"in"===this.type}_isMyContact(){return!!(this.isUser&&this.name&&this.name.length)}_showBusinessCheckmarkAsPrimary(){return this.isBusiness&&this.verifiedLevel===c.default.VERIFIED_LEVEL.HIGH&&(this.name===this.verifiedName||!this.name)}_showBusinessCheckmarkAsSecondary(){return this.isBusiness&&this.verifiedLevel===c.default.VERIFIED_LEVEL.HIGH&&Boolean(this.name)&&this.name!==this.verifiedName}initialize(){super.initialize(),this.id&&(this.isMe&&this.addChild("status",E.default.gadd(this.id)),this.isMe&&this.addChild("profilePicThumb",g.default.gadd(this.id)),this.isBusiness&&this.addChild("businessProfile",a(89216).default.gadd(this.id)),this.listenTo(this,"change:isBusiness",(()=>(0,d.onIsBusinessChange)(this))),this.listenTo(m.default,"locale_change",(()=>{this.locale=m.default.getLocale()})),this.listenTo(this,"change:name",this.updateShortName),this.isContactBlocked=!!l.default.get(this.id),this.pendingAction=0,u.default.isSMB&&(0,_.initializeLabels)(this))}updateShortName(){if(this.isUser&&this.name&&!this.shortName){var[e]=this.name.split(/\s/);n.default.exec(e)&&this.set("shortName",e)}}getStatus(){return y.default.user(this.id)||__LOG__(2)(T(),this.id.toString()),this.status=E.default.gadd(this.id)}getProfilePicThumb(){return this.profilePicThumb=g.default.gadd(this.id)}addPendingAction(e){if(e.isPending()){var t=()=>{this.decPending()};e.then(t,t),this.pendingAction++}return e}decPending(){this.pendingAction>0?this.pendingAction--:(__LOG__(2)(C()),this.pendingAction=0)}isBlocked(){return!!l.default.get(this.id)}searchMatch(e,t,a){var r;return(0,p.canDisplayLabel)()&&a?!(e&&this.searchName&&!this.searchName.includes(e))&&Boolean(null===(r=this.labels)||void 0===r?void 0:r.includes(a)):!!e&&(!(!this.searchName||!this.searchName.includes(e))||(!(!this.userid||!this.userid.includes(e))||(!!(t&&this.userid&&this.userid.includes(t))||(!(!this.searchVerifiedName||!this.searchVerifiedName.includes(e))||!(!this.pushname||!m.default.accentFold(this.pushname).includes(e))))))}getFormattedUser(){return this.id?y.default.isPSA(this.id)?m.default.t(1854):this.name?this.name:this.verifiedLevel===c.default.VERIFIED_LEVEL.HIGH&&this.verifiedName?this.verifiedName:(0,S.default)(this.id):""}set(e,t,a){var r=super.set(e,t,a);if("string"!=typeof e&&t&&t.merge&&r){if(r.isPSA)return r;!e.name&&r.name&&(r.unset("name"),r.unset("shortName")),!e.verifiedName&&r.verifiedName&&r.unset("verifiedName")}return r}getCollection(){return a(7470).default}setNotMyContact(){this.name&&this.set("name",void 0)}}b.Proxy="contact",b.idClass=y.default;var P=(0,o.defineModel)(b);t.default=P},7470:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ContactCollection=void 0;var s=i(a(19976)),n=i(a(54073)),o=r(a(54019)),l=a(36655),d=i(a(50935)),u=i(a(40147)),c=i(a(74460)),h=a(19741),f=a(70703),p=a(95402),m=a(95595),_=i(a(17957)),v=i(a(74125)),g=i(a(17744)),E=r(a(12767));function y(){var e=(0,s.default)(["Store:Contact init from cache"]);return y=function(){return e},e}class S extends o.default{constructor(){super(),this._contactHashes=new v.default,this.checksum=void 0,this._frequentContacts={},this._sort=(0,n.default)((()=>super.sort()),1e3),this._silentSort=(0,n.default)((()=>super.sort({silent:!0})),1e3),this.listenTo(_.default,"locale_change",this.sort),this.listenTo(this,"change:name",this.sort),this.listenTo(E.default,"change:stream",(()=>{E.default.stream===E.STREAM.RESUMING&&this.forEach((e=>{e.unset("verificationString"),e.unset("verificationBinary")}))})),this.listenTo(this,"add",this.contactAdded),this.listenTo(this,"remove",this.contactRemoved)}sort(e){return e&&e.silent?this._silentSort():this._sort()}ensureSorted(){this._sort.flush()}initializeFromCache(e){e&&(__LOG__(2)(y()),this.add(e,{silent:!0,merge:!0}))}contactAdded(e){this._contactHashes.put(e)}contactRemoved(e){this._contactHashes.remove(e)}contactHashLength(){return this._contactHashes.length}delete(){super.delete(),this.setChecksum(),delete this.checksum,this._frequentContacts={},(0,p.setFrequent)({}).catch((()=>{})),this._contactHashes.clear()}isFilteredContact(e){return!!e.name&&!e.isMe&&!e.isPSA&&e.isWAContact}getFilteredContacts(){return this.filter((function(e){return e.name&&!e.isMe&&!e.isPSA&&e.isWAContact}))}_find(e){var t=this.get(e);return t?Promise.resolve(t):Promise.resolve({id:e})}_findQuery(e){return(0,f.contactFindQuery)(e)}sync(){return this.findQuery({}).catchType(h.WebdDrop,(()=>{})),(0,g.default)(this,d.default.COLLECTION_HAS_SYNCED)}updateFrequentContacts(e){this._frequentContacts=e}frequentContacts(e,t){var a=e&&this._frequentContacts[e];if(a||(a=this._frequentContacts.message),!a)return[];var r=t&&t.id;return a.map((e=>this.get(e))).filter((e=>!!e&&!e.id.equals(r)))}getUserCount(){return this.map((e=>e.isUser?1:0)).reduce(((e,t)=>e+t),0)}setChecksum(e){this.checksum=e,(0,m.setContactChecksum)(this.checksum),(0,l.setChecksum)(e).catch((()=>{}))}resolveWidsFromHash(e){return this._contactHashes.get(e)}}t.ContactCollection=S,S.model=u.default,S.comparator=c.default,S.cachePolicy={id:"contact",policy:o.CACHE_POLICY.IMMEDIATE,trigger:"add\n        sort\n        remove\n        reset\n        change:id\n        change:name\n        change:shortName\n        change:pushname\n        change:type\n        change:verifiedName\n        change:isBusiness\n        change:isEnterprise\n        change:verifiedLevel\n        change:statusMute\n        change:sectionHeader\n        change:isContactBlocked\n        change:labels"};var C=new S;t.default=C},74460:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.getCollator=function(){return i},t.default=void 0;var i,s=r(a(79711)),n=r(a(50935)),o=a(95595);l(),s.default.on("set_locale",l);function l(e=n.default.L10N.DEFAULT){if(self.Intl&&self.Intl.Collator){var t=self.Intl.Collator([e],{sensitivity:"base"});i={compare(e,a){try{return t.compare(e,a)}catch(e){return 0}}}}else i={compare:(e,t)=>e.localeCompare(t)}}var d=(e,t)=>{var a=e.id.toString(),r=t.id.toString(),s=(0,o.getMaybeMeUser)(),n=s&&s.toString();if(a===n)return 1;if(r===n)return-1;var l=e.name,d=t.name;if(!l&&d)return 1;if(l&&!d)return-1;if(l&&d&&e.header&&t.header){var u=i.compare(e.header,t.header);return 0===u?i.compare(l,d):u}return a&&r?a.localeCompare(r):-1};t.default=d},74125:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(19976)),s=r(a(64116)),n=r(a(61941)),o=r(a(68384));function l(){var e=(0,i.default)(["Store:Contact can't call slice on contact.userhash"]);return l=function(){return e},e}class d{constructor(){this._map={},this.length=0}static getSidelistHash(e){return e.isUser?"string"==typeof e.userhash&&e.userhash.slice?e.userhash.slice(0,4):(__LOG__(3)(l()),null):null}put(e){var t=d.getSidelistHash(e);if(t&&!this._map[t]){if(this._map[t]){var a=this._map[t];a instanceof o.default?this._map[t]=[a,e.id]:a instanceof Array&&a.push(e.id)}else this._map[t]=e.id;this.length++}}remove(e){var t=d.getSidelistHash(e);if(t&&this._map[t]){var a=(0,n.default)(this._map[t],"this._map[hash]");a instanceof o.default?delete this._map[t]:a instanceof Array&&(0,s.default)(a,(t=>t.equals(e.id))),this.length++}}get(e){var t=this._map[e];return t instanceof o.default?[t]:t}clear(){this._map={},this.length=0}}t.default=d},40827:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.ConversionTupleExpiry=t.default=void 0;var s=i(a(19976)),n=a(46378),o=i(a(25337)),l=r(a(61247)),d=i(a(19899)),u=i(a(68384));function c(){var e=(0,s.default)(["Invalid conversionTuple timer"]);return c=function(){return e},e}var h=604800;t.ConversionTupleExpiry=h;class f extends l.default{constructor(...e){super(...e),this.id=(0,l.prop)(),this.conversionData=(0,l.prop)(),this.conversionSource=(0,l.prop)(),this.timestamp=(0,l.prop)((()=>d.default.globalUnixTime())),this.alarmId=(0,l.session)()}initialize(){super.initialize(),this.listenTo(this,"change:timestamp",this._setExpiryTimer),this._setExpiryTimer()}_setExpiryTimer(){var e=this.timestamp+h;if(e<0)return __LOG__(3)(c()),void this.delete();this.alarmId=o.default.setLocalTimeout((()=>{this.delete()}),1e3*e,this.alarmId)}_clearAlarm(){this.alarmId&&(o.default.clearTimeout(this.alarmId),this.alarmId=void 0)}elapsedSeconds(){return d.default.globalUnixTime()-this.timestamp}formatTuple(){var e={conversionDelaySeconds:this.elapsedSeconds()};return this.conversionData&&(e.conversionData=this.conversionData),this.conversionSource&&(e.conversionSource=this.conversionSource),e}toJSON(){var e=this.serialize(),t=e.conversionData;if(t instanceof ArrayBuffer){var a=new n.Binary(t);e.conversionData=a.readString(t.byteLength)}return e}delete(){super.delete(),this.getCollection().remove(this.id),this._clearAlarm()}getCollection(){return a(19744).default}}f.Proxy="conversionTuple",f.idClass=u.default;var p=(0,l.defineModel)(f);t.default=p},19744:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(54019)),n=r(a(19899)),o=i(a(40827)),l=a(27985);class d extends s.default{initializeFromCache(e){if(e){var t=n.default.globalUnixTime()-o.ConversionTupleExpiry,a=e.filter((e=>e.timestamp-t>0)).map((e=>{var t=(0,l.parseConversionData)(e.conversionData);return t?e.conversionData=t:delete e.conversionData,e}));this.add(a),this.saveToCache()}}}d.model=o.default,d.cachePolicy={id:"conversion_tuple",policy:s.CACHE_POLICY.LOAD,delay:1e3};var u=new d;t.default=u},55962:(e,t,a)=>{"use strict";var r=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(61247));class s extends i.default{constructor(...e){super(...e),this.id=(0,i.prop)(),this.variant=(0,i.prop)()}}s.Proxy="emojiVariant";var n=(0,i.defineModel)(s);t.default=n},61311:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.EmojiVariantCollection=void 0;var s=i(a(54019)),n=r(a(12396)),o=r(a(55962));class l extends s.default{setVariant(e,t){var a=n.default.getSkinToneBase(e);if(!a)throw new Error("attempt to store variantless emoji");this.gadd({id:a,variant:t})}getVariant(e){if(n.default.getSkinToneBase(e)){var t=this.get(e);return t?n.default.normalizeEmoji(t.variant):null}throw new Error("attempt to get variantless emoji")}getVariantIfExists(e){if(n.default.getSkinToneBase(e)){var t=this.get(e);return t?n.default.normalizeEmoji(t.variant):null}return null}}t.EmojiVariantCollection=l,l.model=o.default,l.cachePolicy={id:"emoji_variant_collection",policy:s.CACHE_POLICY.LOAD,delay:1e3};var d=new l;t.default=d},92803:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(54019)),s=r(a(43334)),n=a(19741),o=r(a(40210)),l=r(a(27e3)),d=r(a(58885));class u extends i.default{constructor(e){super(),this.hasMoreMsgs=!0,this.resultPage=0,this.searchPromise=null,this.searchTerm=null,this.searchLabel=null,this.updateFtsAfterMsgLabelUpdate=()=>{if(this.currentLabelSearch){var e=this.filter((e=>!e.labels||!e.labels.includes(this.currentLabelSearch)));this.remove(e,{silent:!0})}};var t=e?e.msgs:d.default;this.listenTo(t,"remove_msgs",(e=>{this.remove(e,{silent:!0}).filter((e=>!!e)).length&&this.trigger("bulk_remove")})),this.listenTo(s.default,"remove",(e=>{var t=[];this.forEach((a=>{a.chat===e&&t.push(a)})),this.remove(t,{silent:!0}).filter((e=>!!e)).length&&this.trigger("bulk_remove")}))}delete(e){e&&this.stopListening(),super.delete()}resetSearch(){this.hasMoreMsgs=!0,this.resultPage=0,this.searchTerm=null,this.searchPromise&&this.searchPromise.cancel()}search({chat:e,count:t,filter:a={},searchTerm:r}){var i="".concat(r,"__").concat(a.label||a.kind||"");this.currentLabelSearch=a.label;var s=!1;this.searchTerm!==i?(this.searchTerm&&0===r.indexOf(this.searchTerm)?s=!0:(this.searchTerm=i,this.delete()),this.resultPage=0,this.hasMoreMsgs=!0):s=!0;var l,u=new o.default.UiAction({uiActionType:o.default.UI_ACTION_TYPE.IMAGE_OPEN,uiActionPreloaded:s});if(this.searchPromise){if(this.searchTerm===i)return this.searchPromise;this.searchPromise.cancel()}return l=e?e.fts(r,++this.resultPage,t):d.default.search(r,++this.resultPage,t,void 0,a),this.searchPromise=l.cancellable().then((e=>(e.eof&&(this.hasMoreMsgs=!1),this.searchTerm!==i&&this.delete(),this.searchTerm=i,e.messages&&this.add(e.messages.filter((e=>!e.asRevoked))),u.markUiActionT(),u.commit(),e))).catchTypes(n.WebdDrop,Promise.CancellationError,(()=>{})).finally((()=>{this.searchPromise=null,this.trigger("searchPromise_update")})),this.trigger("searchPromise_update"),this.searchPromise}}t.default=u,u.model=l.default},30440:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(19976)),n=r(a(61247)),o=i(a(50935)),l=i(a(7470)),d=a(19741),u=a(95595),c=i(a(18120)),h=i(a(30788)),f=i(a(9094)),p=i(a(76022)),m=i(a(68384));function _(){var e=(0,s.default)(["models:groupMetadata:participantCollection:revokeGroupV4AddInvite failed"]);return _=function(){return e},e}class v extends n.default{constructor(...e){super(...e),this.participants=(0,n.collection)(h.default),this.pendingParticipants=(0,n.collection)(f.default),this.id=(0,n.prop)(),this.creation=(0,n.prop)(),this.owner=(0,n.prop)(),this.desc=(0,n.prop)(),this.descId=(0,n.prop)(),this.descTime=(0,n.prop)(),this.descOwner=(0,n.prop)(),this.restrict=(0,n.prop)(),this.announce=(0,n.prop)(),this.noFrequentlyForwarded=(0,n.prop)(),this.ephemeralDuration=(0,n.prop)(),this.size=(0,n.prop)(),this.support=(0,n.prop)(),this.stale=(0,n.session)(!0),this.trusted=(0,n.session)(!0),this.inviteCode=(0,n.session)(),this.groupInviteCodePromise=(0,n.session)(),this.revokeGroupInvitePromise=(0,n.session)(),this.revokeGroupV4AddInvitePromise=(0,n.session)(),this.groupInviteLink=(0,n.derived)(this._groupInviteLink,["inviteCode"])}_groupInviteLink(){return this.inviteCode?"".concat(o.default.GROUP_INVITE_LINK_URL).concat(this.inviteCode):null}delete(){super.delete(),this.getCollection().remove(this.id),this.participants.delete()}canSetSubject(){return!!this.participants.iAmMember()&&((this.participants.iAmAdmin()||!c.default.supportsFeature(c.default.F.GROUPS_V_3)||!0!==this.restrict)&&!this.support)}canSetDescription(){return!!c.default.supportsFeature(c.default.F.GROUPS_V_3)&&(!(!this.participants.iAmMember()||!this.participants.iAmAdmin()&&this.restrict)&&!this.support)}canSetGroupProperty(){return!!c.default.supportsFeature(c.default.F.GROUPS_V_3)&&(!!this.participants.iAmAdmin()&&!this.support)}canSetEphemeralSetting(){return c.default.supportsFeature(c.default.F.EPHEMERAL_ALLOW_GROUP_MEMBERS)?!(!this.participants.iAmMember()||!this.participants.iAmAdmin()&&this.restrict)&&!this.support:this.participants.iAmAdmin()&&!this.support}initialize(){n.default.prototype.initialize.call(this),this.listenTo(this.participants,"change:isAdmin change:isSuperAdmin change:contact.isMyContact sort remove reset",this.isTrusted),this.listenTo(this.participants,"add remove reset",this.triggerParticipantsChange),this.listenTo(this,"change:owner",this.isTrusted),this.isTrusted()}triggerParticipantsChange(){this.trigger("change:participants")}isTrusted(){if(this.stale)return this.trusted;if(!this.owner)return this.trusted=!1;if(this.support)return this.trusted=!0;var e=(0,u.getMaybeMeUser)();if(m.default.equals(this.owner,e))return this.trusted=!0;if(this.owner){var t=l.default.get(this.owner);if(t&&t.isMyContact)return this.trusted=!0}return this.trusted=!1}revokeGroupV4AddInvite(e){if(this.revokeGroupV4AddInvitePromise)return this.revokeGroupV4AddInvitePromise;var t=this.id.toString(),a=(0,u.getMaybeMeUser)().toString(),{pendingParticipants:r}=this;return this.revokeGroupV4AddInvitePromise=p.default.revokeGroupV4Invite(e,t,a).then((t=>(t.status>=200&&t.status<300&&r.remove(e),t.status))).catch((()=>{__LOG__(3)(_())})).finally((()=>{this.revokeGroupV4AddInvitePromise=null}))}queryGroupV4PendingInvite(){if(c.default.supportsFeature(c.default.F.MD_BACKEND))return Promise.resolve();var e=(0,u.getMaybeMeUser)().toString(),t=this.id.toString();return p.default.findGroupPendingInvitesFromPhone(e,t).then((e=>{this.collection&&this.collection.add({id:this.id,pendingParticipants:e.participants},{merge:!0})})).catchType(d.WebdDrop,(()=>{}))}getCollection(){return a(99922).default}}v.Proxy="groupMetadata",v.idClass=m.default;var g=(0,n.defineModel)(v);t.default=g},99922:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(19976)),n=i(a(26139)),o=i(a(54019)),l=i(a(43334)),d=a(19741),u=r(a(96452)),c=i(a(18120)),h=a(60156),f=i(a(30440)),p=a(70574),m=a(90401),_=i(a(76022)),v=i(a(68384)),g=a(75637);function E(){var e=(0,s.default)(["groupMetadata:find trying to fetch non-group/bclist wid ",""]);return E=function(){return e},e}function y(){var e=(0,s.default)(["models:GroupMetadataCollection:_find:bclist error: ",""]);return y=function(){return e},e}function S(){var e=(0,s.default)(["models:GroupMetadataCollection:_find:False broadcast list query"]);return S=function(){return e},e}function C(){var e=(0,s.default)(["contactFindBroadcast: not implemented for MD"]);return C=function(){return e},e}function T(){var e=(0,s.default)(["queryGroupFromPhone: not implemented for MD"]);return T=function(){return e},e}class M extends o.default{onResume(){(0,n.default)(l.default.where({active:!0}).filter((e=>e.isGroup||e.isBroadcast)),l.default.where({isBroadcast:!0})).forEach((e=>{this.find(e.id).catchTypes(d.WebdDrop,u.ProtoVersionUndefined,(()=>{}))}))}_find(e){if(v.default.isGroup(e)){var t=a(43334).default.get(e);return t&&t.isReadOnly?c.default.supportsFeature(c.default.F.MD_BACKEND)?(__LOG__(3)(T()),Promise.resolve({id:e})):(0,p.queryGroupFromPhone)(e):(0,h.getGroupMetadataFromStorage)(e).then((t=>t?Promise.resolve(t):(0,m.sendQueryGroup)(e)))}return v.default.isBroadcast(e)?c.default.supportsFeature(c.default.F.MD_BACKEND)?(__LOG__(3)(C()),Promise.resolve({id:e})):_.default.contactFindBroadcast(e).then((t=>{if(200===t.status){var a=this.get(e);return a&&!a.stale?Promise.resolve(a):{id:e,participants:t.recipients}}return 404===t.status?(__LOG__(3)(S()),{id:e}):(__LOG__(3)(y(),t.status),Promise.reject(new Error("models:GroupMetadataCollection:_find:bclist error: "+t.status)))})):(__LOG__(2)(E(),e.toString()),Promise.reject(new Error("groupMetadata:find trying to fetch non-group/bclist wid ".concat(e.toString()))))}_handle(e){return e}handlePendingInvite(e){var{gid:t,participants:a}=e;this.add({id:(0,g.createWid)(t),pendingParticipants:a},{merge:!0})}}M.model=f.default,M.staleCollection=!0;var b=new M;t.default=b},35954:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(61247)),n=r(a(7470)),o=r(a(68384));class l extends s.default{constructor(...e){super(...e),this.id=(0,s.prop)(),this.isAdmin=(0,s.prop)(),this.isSuperAdmin=(0,s.prop)(),this.contact=(0,s.session)(),this.hasSenderKey=(0,s.session)(!1)}initialize(){super.initialize(),this.addChild("contact",n.default.gadd(this.id))}}l.Proxy="participant",l.idClass=o.default;var d=(0,s.defineModel)(l);t.default=d},30788:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(54073)),s=r(a(43334)),n=r(a(95847)),o=a(23751),l=a(95595),d=r(a(18120)),u=r(a(17957)),c=r(a(35954)),h=r(a(38738));class f extends n.default{constructor(e,t={}){super(e,t),this._debouncedSort=(0,i.default)((()=>this.sort()),1e3),this.sendForNeededAddRequest=e=>{var t=this.parent.id,a=s.default.assertGet(t),r=a.groupMetadata.desc;(0,o.sendForNeededAddRequest)(e,a.formattedTitle||a.name,r,this.parent.id)},this.listenTo(this,"change:contact.name",this._debouncedSort),this.listenTo(u.default,"locale_change",this._debouncedSort)}delete(){this.forEach((function(e){e.delete()})),this.stopListening(),this.reset()}ensureSorted(){this._debouncedSort.flush()}set(e,t){var a=t||{};return a.isParticipantCollectionAdd||(a.remove=!0),super.set(e,a)}add(e,t){var a=t||{};return a.isParticipantCollectionAdd=!0,super.add(e,a)}canAdd(){return!!this.iAmAdmin()}canPromote(e){return!!e&&(!(0,l.getMaybeMeUser)().equals(e.id)&&(!!this.iAmAdmin()&&!e.isAdmin))}canDemote(e){return!!e&&(!!this.iAmAdmin()&&(!(0,l.getMaybeMeUser)().equals(e.id)&&(!(d.default.supportsFeature(d.default.F.GROUPS_V_3)&&e.isSuperAdmin)&&!!e.isAdmin)))}canRemove(e){return!!e&&(!(0,l.getMaybeMeUser)().equals(e.id)&&!!this.iAmAdmin())}canVerifyIdentity(e){return!!d.default.supportsFeature(d.default.F.QUERY_IDENTITY)&&(!!e&&!(0,l.getMaybeMeUser)().equals(e.id))}iAmMember(){return 1===this.filter((e=>e.id.equals((0,l.getMaybeMeUser)()))).length}iAmRestrictedMember(){var e=this.parent.id;return s.default.assertGet(e).groupMetadata.restrict&&!this.iAmAdmin()}iAmAdmin(){return 1===this.filter((e=>e.id.equals((0,l.getMaybeMeUser)())&&e.isAdmin)).length}iAmSuperAdmin(){return 1===this.filter((e=>e.id.equals((0,l.getMaybeMeUser)())&&e.isSuperAdmin)).length}getAdmins(){return this.where({isAdmin:!0})}getSuperAdmin(){return this.findFirst((e=>e.isSuperAdmin))}}t.default=f,f.model=c.default,f.comparator=h.default},38738:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(74460)),s=(e,t)=>(0,i.default)(e.contact,t.contact);t.default=s},9094:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(54073)),s=r(a(95847)),n=r(a(17957)),o=r(a(35954)),l=r(a(38738));class d extends s.default{constructor(e,t={}){super(e,t),this._debouncedSort=(0,i.default)((()=>this.sort()),1e3),this.listenTo(this,"change:contact.name",this._debouncedSort),this.listenTo(n.default,"locale_change",this._debouncedSort)}delete(){this.forEach((function(e){e.delete()})),this.stopListening(),this.reset()}ensureSorted(){this._debouncedSort.flush()}set(e,t={}){return t.isParticipantCollectionAdd||(t.remove=!0),super.set(e,t)}add(e,t={}){return t.isParticipantCollectionAdd=!0,super.add(e,t)}}t.default=d,d.model=o.default,d.comparator=l.default},51905:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.intColorToHex=h,t.default=void 0;var s=i(a(61247)),n=i(a(52737)),o=r(a(50935)),l=r(a(18120)),d=r(a(8286)),u=a(12824);class c extends s.default{constructor(...e){super(...e),this.id=(0,s.prop)(),this.name=(0,s.prop)(),this.colorIndex=(0,s.prop)(),this.color=(0,s.prop)(),this.count=(0,s.prop)(),this.stale=(0,s.session)(!0),this.hexColor=(0,s.derived)(this._hexColor,["color","colorIndex"])}initialize(){super.initialize(),this.labelItemCollection=new d.default,this._triggerLabelUpdate(),this.listenTo(this,"change:name",this._triggerLabelUpdate),this.listenTo(this,"change:color",this._triggerLabelUpdate),this.listenTo(this,"change:colorIndex",this._triggerLabelUpdate),this.listenTo(this,"change:count",this._triggerLabelUpdate),l.default.supportsFeature(l.default.F.MD_BACKEND)&&(this.listenTo(this.labelItemCollection,"add",this._handleLabelItemCollectionUpdate),this.listenTo(this.labelItemCollection,"remove",this._handleLabelItemCollectionUpdate))}_hexColor(){if(l.default.supportsFeature(l.default.F.MD_BACKEND)){var e=this.colorIndex;if(null==e)return;return n.default.platform===n.PLATFORMS.SMBI?o.default.IPHONE_LABEL_COLOR_PALETTE[e]:o.default.ANDROID_LABEL_COLOR_PALETTE[e]}if(this.color)return h(this.color)}_find(e){return Promise.resolve({id:e})}_triggerLabelUpdate(){this.name&&a(23539).default.trigger("label_updated_".concat(this.id))}_handleLabelItemCollectionUpdate(){var e=this.labelItemCollection.filter((e=>e.parentType!==u.LabelItemParentType.Contact)).length;this.count=String(e)}}function h(e){var t=parseInt(e,10);return"#".concat((t>>>0).toString(16).slice(-6))}c.Proxy="label";var f=(0,s.defineModel)(c);t.default=f},23539:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.LabelCollection=t.LABEL_PROPERTIES=void 0;var s=i(a(19976)),n=i(a(64116)),o=a(91460),l=r(a(2784)),d=a(12073),u=i(a(54019)),c=i(a(79711)),h=i(a(52737)),f=i(a(63504)),p=a(19741),m=r(a(96452)),_=a(95595),v=i(a(17957)),g=i(a(51905)),E=a(74282),y=a(12824),S=a(28352),C=i(a(40210)),T=i(a(17744)),M=r(a(82885)),b=i(a(76022)),P=i(a(12767));function A(){var e=(0,s.default)(["labels:loadLabelPalette:error ",""]);return A=function(){return e},e}function I(){var e=(0,s.default)(["updatingLabel dropped"]);return I=function(){return e},e}function O(){var e=(0,s.default)(["addingNewLabel dropped"]);return O=function(){return e},e}function N(){var e=(0,s.default)(["deleteLabel - label does not exist"]);return N=function(){return e},e}function w(){var e=(0,s.default)(["addingNewLabel dropped"]);return w=function(){return e},e}function D(){var e=(0,s.default)(["addingNewLabel dropped"]);return D=function(){return e},e}var R=Object.freeze({NAME:"name",COLOR:"color"});t.LABEL_PROPERTIES=R;var L=Object.freeze({UPDATING:"updating",SUCCEEDED:"succeeded",FAILED:"failed"});class k extends u.default{constructor(){super(),this.checksum=void 0,this.listenTo(this,"remove",this.handleRemove)}addNewLabel(e,t){(0,E.logLabelOperationEvent)(C.default.LABEL_OPERATIONS.ADD,1,C.default.LABEL_TARGETS.LABEL);var a=b.default.createLabel(e,t),r=new d.ActionType(v.default.t(36,{labelName:e})),i=(0,d.genId)(),s=a.then((({status:t})=>200===t?new d.ActionType(v.default.t(154,{labelName:e})):new d.ActionType(v.default.t(153,{labelName:e})))).catch((()=>(__LOG__(3)(D()),new d.ActionType(v.default.t(153,{labelName:e})))));return c.default.openToast(l.createElement(d.ActionToast,{id:i,initialAction:r,pendingAction:s})),a}addOrRemoveLabels(e,t){var a=(0,d.genId)(),r=new d.ActionType(v.default.t(33,{count:e.length,_plural:e.length})),i=(0,f.default)(e,t).then((()=>{})).then((()=>new d.ActionType(v.default.t(35,{count:e.length,_plural:e.length})))).catch((()=>(__LOG__(3)(w()),new d.ActionType(v.default.t(34)))));c.default.openToast(l.createElement(d.ActionToast,{id:a,initialAction:r,pendingAction:i}))}deleteLabel(e){(0,E.logLabelOperationEvent)(C.default.LABEL_OPERATIONS.DELETE,1,C.default.LABEL_TARGETS.LABEL);var t=b.default.deleteLabel(e),a=this.get(e);if(a){var{name:r}=a,i=new d.ActionType(v.default.t(88,{labelName:r})),s=(0,d.genId)(),n=t.then((({status:e})=>200===e?new d.ActionType(v.default.t(87,{labelName:r})):new d.ActionType(v.default.t(86,{labelName:r})))).catch((()=>(__LOG__(3)(O()),new d.ActionType(v.default.t(86,{labelName:r})))));return c.default.openToast(l.createElement(d.ActionToast,{id:s,initialAction:i,pendingAction:n})),t}__LOG__(2)(N())}_getActionLabelUpdateString(e,t){switch(e){case R.NAME:return t===L.UPDATING?v.default.t(127):t===L.SUCCEEDED?v.default.t(129):v.default.t(128);case R.COLOR:return t===L.UPDATING?v.default.t(124):t===L.SUCCEEDED?v.default.t(126):v.default.t(125)}return""}updateLabel(e,t){(0,E.logLabelOperationEvent)(C.default.LABEL_OPERATIONS.EDIT,1,C.default.LABEL_TARGETS.LABEL);var a=b.default.editLabel(e.id,e.name,e.color),r=new d.ActionType(this._getActionLabelUpdateString(t,L.UPDATING)),i=(0,d.genId)(),s=a.then((({status:e})=>200===e?new d.ActionType(this._getActionLabelUpdateString(t,L.SUCCEEDED)):new d.ActionType(this._getActionLabelUpdateString(t,L.FAILED)))).catch((()=>(__LOG__(3)(I()),new d.ActionType(this._getActionLabelUpdateString(t,L.FAILED)))));return c.default.openToast(l.createElement(d.ActionToast,{id:i,initialAction:r,pendingAction:s})),a}getNewLabelColor(){return b.default.queryNextLabelColor().then((e=>e.labelColors[0].color)).catch((()=>{}))}getLabelColorPalette(){return this.labelColorPalette=this.labelColorPalette||(0,_.getSmbLabelPalette)(),this.labelColorPalette&&this.labelColorPalette.waVersion===h.default.phone.wa_version?Promise.resolve(this.labelColorPalette.colors):this._getColorPaletteLoop().then((e=>{var t=e.labelColors.map((({color:e})=>e));return(0,_.setSmbLabelPalette)({colors:t,waVersion:h.default.phone.wa_version}),t})).catch((()=>{}))}_getColorPaletteLoop(){return Promise.loop(((e,t,a)=>{var r=(0,o.delayMs)(M.expBackoff(a,12e4,1e3,.1));return("CONNECTED"===P.default.stream?Promise.resolve():(0,T.default)(P.default,"change:stream",(()=>"CONNECTED"===P.default.stream))).then((()=>b.default.queryLabelPalette().then((t=>{e(t)})))).catchConditional((e=>!(e instanceof Promise.CancellationError)),(e=>a>3||404===e?(__LOG__(3)(A(),String(e)),404===e?Promise.reject(new p.E404):Promise.reject(new m.GaveUpRetry("Gave up loading label palette ".concat(a," tries")))):r))}),0)}handleRemove(e){var{labelItemCollection:t}=e;t.toArray().forEach((e=>{var{parentId:t,parentType:a,labelId:r}=e,i=(0,S.getParentCollection)(a).get(t);i&&(i.labels=(0,n.default)(i.labels,(e=>e!==r)))}))}onResume(){this.filter((e=>e.hasObservers())).forEach((e=>{this.find(e.id).catchType(p.WebdDrop,(()=>{}))}))}delete(){super.delete(),delete this.checksum}sync(e){if(!e||this.checksum!==e)return this.findQuery({}).catchTypes(p.WebdDrop,m.ProtoVersionUndefined,(()=>{}))}handle(e){var t;if(e.checksum&&this.updateChecksum(e.checksum),e.labels&&e.labels[0]&&e.labels[0].labelUpdates)return e.labels[0].labelUpdates.forEach((e=>{e.collection.forEach((a=>{a!==y.LabelItemParentType.Msg&&a!==y.LabelItemParentType.Chat||(t=!0);var r=e.id,i=(0,S.getParentCollection)(a).get(e.id);i&&(i.labels&&i.labels.forEach((t=>{e.labels.includes(t)||(0,S.removeLabelFromCollection)(r,t,a)})),i.labels=e.labels)}))})),void(t&&this.trigger("bulk_msg_chat_label_change"));var a=[],r=[];e.labels.forEach((e=>{"delete"===e.type?a.push(e.label):r.push(e.label)})),this.remove(a.map((({id:e})=>e))),this.add(r,{merge:!0})}_findQuery(){return b.default.queryLabels().then((e=>(e.checksum&&this.updateChecksum(e.checksum),e.labels)))}_find(){return this._findQuery()}updateChecksum(e){this.checksum=e}getLabelsForModel(e,t){return this.filter((a=>a.labelItemCollection.get((0,S.createLabelItemId)(e,a.id,t)))).map((e=>e.id))}}t.LabelCollection=k,k.model=g.default,k.staleCollection=!0,k.resumeOnAvailable=!0;var x=new k;t.default=x},79516:(e,t,a)=>{"use strict";var r=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(61247));a(12824);class s extends i.default{constructor(...e){super(...e),this.id=(0,i.prop)(),this.parentType=(0,i.prop)(),this.parentId=(0,i.prop)(),this.labelId=(0,i.prop)()}}s.Proxy="labelItem";var n=(0,i.defineModel)(s);t.default=n},8286:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.LabelItemCollection=void 0;var i=r(a(67304)),s=r(a(54019)),n=r(a(18120)),o=r(a(79516)),l=a(28352);class d extends s.default{constructor(){super(),n.default.supportsFeature(n.default.F.MD_BACKEND)&&(this.listenTo(this,"add",this._handleAdd),this.listenTo(this,"remove",this._handleRemove))}_handleAdd(e){this._handleChange(e,!0)}_handleRemove(e){this._handleChange(e,!1)}_handleChange(e,t){var a=(0,l.getParentCollection)(e.parentType).get(e.parentId);if(a){var r=a.labels||[];t?r.includes(e.labelId)||(a.labels=[e.labelId].concat(r)):a.labels=(0,i.default)(r,e.labelId)}}}t.LabelItemCollection=d,d.model=o.default;var u=d;t.default=u},44174:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(19976)),n=r(a(2784)),o=a(12073),l=r(a(61247)),d=i(a(43334)),u=i(a(79711)),c=a(19741),h=r(a(96452)),f=a(95595),p=i(a(17957)),m=i(a(21941)),_=i(a(76022)),v=i(a(68384));function g(){var e=(0,s.default)(["models:liveLocation:disableLiveLocation dropped"]);return g=function(){return e},e}class E extends l.default{constructor(...e){super(...e),this.id=(0,l.prop)(),this.duration=(0,l.prop)(),this.participants=(0,l.collection)(m.default),this.active=(0,l.session)(!1),this.keepAliveTimer=(0,l.session)(),this.stopPromise=(0,l.session)()}initialize(){super.initialize(),this.listenTo(this.participants,"remove reset",(()=>{this.hasParticipants()||this.delete()}));var e=d.default.get(this.id);e&&!e.liveLocation&&(e.liveLocation=this)}delete(){super.delete(),this.stopViewingMap(),this.participants.delete(),this.getCollection().remove(this.id);var e=d.default.get(this.id);e&&(e.liveLocation=void 0)}hasParticipants(){return this.participants.length>0}startViewingMap(){this.active||(this.active=!0,this._updateLiveLocations(),this._startKeepAlive())}stopViewingMap(){this.active&&(this.active=!1,this._pauseLiveLocations(),this._stopKeepAlive())}userHasLiveLocation(e){return!!this.participants.get(e)}iHaveLiveLocation(){return this.userHasLiveLocation((0,f.getMaybeMeUser)())}stopMyLiveLocation(e){if(!this.iHaveLiveLocation())return Promise.reject(new h.ActionError);if(this.stopPromise)return this.stopPromise;var t=this.stopPromise=_.default.disableLiveLocation(this.id),a=new o.ActionType(p.default.t(134)),r=e||(0,o.genId)(),i=t.then((e=>200===e.status?new o.ActionType(p.default.t(133)):e.status>=400?new o.ActionType(p.default.t(130)):void 0)).catch((()=>(__LOG__(3)(g()),new o.ActionType(p.default.t(130),{actionText:p.default.t(195),actionHandler:this.stopMyLiveLocation.bind(this,r)}))));return u.default.openToast(n.createElement(o.ActionToast,{id:r,initialAction:a,pendingAction:i})),t.then((e=>{if(200===e.status&&!e._duplicate){var t=this.participants.get((0,f.getMaybeMeUser)());t&&t.disable()}})).finally((()=>{this.stopPromise=null}))}_updateLiveLocations(){this.getCollection().update(this.id).catch((()=>{}))}_pauseLiveLocations(){_.default.unsubscribeLiveLocation(this.id).catchType(c.WebdDrop,(()=>{}))}_sendKeepAlive(){_.default.subscribeLiveLocation(this.id,!1).catchType(c.WebdDrop,(()=>{}))}_startKeepAlive(){if(null==this.keepAliveTimer){var e=this.duration;null!=e&&0!==e&&(this.keepAliveTimer=window.setInterval(this._sendKeepAlive.bind(this),1e3*e))}}_stopKeepAlive(){null!=this.keepAliveTimer&&(window.clearInterval(this.keepAliveTimer),this.keepAliveTimer=null)}getCollection(){return a(84383).default}}E.Proxy="liveLocation",E.idClass=v.default;var y=(0,l.defineModel)(E);t.default=y},84383:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.LiveLocationCollection=void 0;var i=r(a(70417)),s=r(a(19976)),n=r(a(54019)),o=r(a(19899)),l=r(a(50935)),d=r(a(7470)),u=a(19741),c=r(a(44174)),h=a(11419),f=r(a(76022)),p=r(a(68384));function m(){var e=(0,s.default)(["Assertion failed!"]);return m=function(){return e},e}function _(){var e=(0,s.default)(["Assertion failed!"]);return _=function(){return e},e}function v(){var e=(0,s.default)(["models:liveLocation:handle unrecognized payload"]);return v=function(){return e},e}function g(){var e=(0,s.default)(["models:liveLocation:handle unknown type: ",""]);return g=function(){return e},e}function E(){var e=(0,s.default)(["model:LiveLocation:getActive error ",""]);return E=function(){return e},e}function y(){var e=(0,s.default)(["liveLocation:participant query not implemented on the phone"]);return y=function(){return e},e}function S(){var e=(0,s.default)(["model:LiveLocation:_find error ",""]);return S=function(){return e},e}function C(){var e=(0,s.default)(["liveLocation:subscribe query not implemented on the phone"]);return C=function(){return e},e}class T extends n.default{_find(e){return p.default.isUser(e)||p.default.isGroup(e)?f.default.subscribeLiveLocation(e,!0).then((t=>{if(t.status&&t.status>=400)return 499===t.status?__LOG__(2)(C()):__LOG__(3)(S(),t.status),Promise.reject(t.status);var a=(0,h.isNumber)(t.duration)?t.duration:void 0,r=t.participants?t.participants.map((e=>(0,i.default)((0,i.default)({},this._extractLocationFields(e)),{},{id:e.id,expiration:0===e.expiration?1/0:e.expiration}))):[];return{id:e,duration:a,participants:r}})):Promise.reject(new Error("invalid wid for live location: "+e))}getActive(e){return p.default.isUser(e)||p.default.isGroup(e)?f.default.queryActiveLiveLocation(e).then((t=>{if(t.status&&t.status>=400)return 499===t.status?__LOG__(2)(y()):__LOG__(3)(E(),t.status),Promise.reject(t.status);if(t.participants&&t.participants.length){var a=t.participants.map((e=>({id:e.id,expiration:0===e.expiration?1/0:e.expiration})));this.add({id:e,participants:a},{merge:!0})}})).catchType(u.WebdDrop,(()=>{})):Promise.reject(new Error("invalid wid for live location: "+e))}onResume(){this.filter((e=>e.active&&e.hasParticipants())).forEach((e=>{this.update(e.id)}))}handle(e){Array.isArray(e)?e.forEach((e=>{switch(e.type){case"update":var t=this._extractLocationFields(e),a=d.default.get(e.jid);a&&a.liveLocations&&a.liveLocations.forEach((e=>e.set(t)));break;case"disable":var r=this.get(e.chat);if(r){var i=r.participants.get(e.jid);i&&(e.seq>i.sequence||-1===e.seq)&&i.disable()}break;default:__LOG__(3)(g(),e.type)}})):__LOG__(3)(v())}processMsg(e,t=!1){e.type===l.default.MSG_TYPE.LOCATION&&e.isLive||(__LOG__(4,void 0,new Error,!0)(_()),SEND_LOGS("collection:liveLocation trying to process non live-location msg"));var a=e.id.remote,{lat:r,lng:i,accuracy:s,speed:n,degrees:d,sequence:u,comment:c,shareDuration:h,t:f}=e;if(f&&h){var p=f+h;if(!(p<=o.default.globalUnixTime())){var m={id:e.sender,lat:r,lng:i,accuracy:s,speed:n,degrees:d,sequence:u,comment:c,expiration:p,lastUpdated:f,msg:e};-1===u&&delete m.sequence;var v=this.get(a);if(v){var g=v.participants.get(m.id);if(t)return void(g&&g.lastUpdated<=m.lastUpdated&&g.set(m));if(g&&v.participants.removeParticipant(g),v.hasParticipants())return void v.participants.add(m)}this.add({id:a,participants:[m]})}}}removeMsg(e){e.type===l.default.MSG_TYPE.LOCATION&&e.isLive||(__LOG__(4,void 0,new Error,!0)(m()),SEND_LOGS("collection:liveLocation trying to remove non live-location msg"));var t=e.id.remote,a=e.sender,r=this.get(t);r&&r.participants.remove(a)}_extractLocationFields(e){return void 0===e.lat||void 0===e.lng?{}:{lastUpdated:o.default.globalUnixTime()-e.elapsed,lat:e.lat,lng:e.lng,accuracy:e.accuracy,speed:e.speed,degrees:e.degrees,comment:e.comment}}}t.LiveLocationCollection=T,T.model=c.default,T.staleCollection=!0,T.resumeOnAvailable=!0;var M=new T;t.default=M},75492:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(25337)),n=r(a(61247)),o=i(a(19899)),l=i(a(7470)),d=a(95595),u=a(78054),c=a(11419),h=i(a(68384));class f extends n.default{constructor(...e){super(...e),this.id=(0,n.prop)(),this.msg=(0,n.prop)(),this.lat=(0,n.prop)(),this.lng=(0,n.prop)(),this.accuracy=(0,n.prop)(),this.speed=(0,n.prop)(),this.degrees=(0,n.prop)(),this.sequence=(0,n.prop)(),this.comment=(0,n.prop)(),this.expiration=(0,n.prop)(),this.lastUpdated=(0,n.prop)(),this.contact=(0,n.session)(),this.expireTimerId=(0,n.session)(),this.disabled=(0,n.session)(!1),this.isMe=(0,n.derived)(this._isMe,["id"]),this.valid=(0,n.derived)(this._valid,["lat","lng"])}_isMe(){return this.id.equals((0,d.getMaybeMeUser)())}_valid(){return t=this.lat,(0,c.isNumber)(t)&&t>=-90&&t<=90&&(e=this.lng,(0,c.isNumber)(e)&&e>=-180&&e<=180);var e,t}initialize(){super.initialize(),this.addChild("contact",l.default.gadd(this.id)),(0,u.addLiveLocation)(this.contact,this),this.listenTo(this,"change:expiration",this._setExpireTimer),this._setExpireTimer()}delete(){super.delete(),this._disableMsg(),(0,u.removeLiveLocation)(this.contact,this),this._clearExpireTimer()}remainingTime(){return this.expiration-o.default.globalUnixTime()}elapsedTime(){return o.default.globalUnixTime()-this.lastUpdated}disable(){this.disabled=!0}_disableMsg(){var e=this.msg;e&&(e.shareDuration=o.default.globalUnixTime()-e.t-1)}_setExpireTimer(){this.expiration&&(this.remainingTime()<=0?this._expire():this.expireTimerId=s.default.setGlobalTimeout(this._expire.bind(this),1e3*this.expiration,this.expireTimerId))}_clearExpireTimer(){s.default.clearTimeout(this.expireTimerId),this.expireTimerId=null}_expire(){this.disable()}}f.Proxy="liveLocationParticipant",f.idClass=h.default;var p=(0,n.defineModel)(f);t.default=p},21941:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(54019)),s=r(a(74460)),n=a(95595),o=r(a(75492));class l extends i.default{constructor(){super(),this.listenTo(this,"change:disabled",(e=>{e.disabled&&this.removeParticipant(e)}))}delete(){this.forEach((e=>this.removeParticipant(e)))}validLocations(){return this.filter((e=>e.valid))}removeParticipant(e){this.remove(e),e.delete()}}t.default=l,l.model=o.default,l.comparator=(e,t)=>{var a=(0,n.getMaybeMeUser)();return e.contact.id.equals(a)?-1:t.contact.id.equals(a)?1:(0,s.default)(e.contact,t.contact)}},89819:(e,t,a)=>{"use strict";var r=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(61247));class s extends i.default{constructor(...e){super(...e),this.isFocused=(0,i.session)(!0)}initialize(){super.initialize(),this._onFocus=this._onFocus.bind(this),this._onBlur=this._onBlur.bind(this)}delete(){super.delete()}_onFocus(){this.isFocused=!0}_onBlur(){this.isFocused=!1}}s.Proxy="mainWindowState";var n=new((0,i.defineModel)(s));t.default=n},27e3:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.createProductInquiry=function(e,t,a,r){var i=function(e){return new re(e)}({ack:v.default.ACK.CLOCK,id:new k.default({id:"product_inquiry",remote:t,fromMe:!0}),from:t,t:p.default.globalUnixTime(),type:te.PRODUCT,title:e.name,description:e.description,businessOwnerJid:t.toString({legacy:!0}),productId:e.id.toString(),url:e.url,productImageCount:e.productImageCollection.length,body:a.preview&&a.preview._b64,currencyCode:e.currency,priceAmount1000:e.priceAmount1000,sessionId:r});return i.mediaData.set(a),i},t.default=t.TYPE=void 0;var s=i(a(52954)),n=i(a(19976)),o=i(a(17620)),l=i(a(84636)),d=i(a(45455)),u=a(98970),c=r(a(61247)),h=r(a(91540)),f=a(98962),p=i(a(19899)),m=i(a(79711)),_=i(a(52737)),v=i(a(50935)),g=i(a(7470)),E=r(a(37356)),y=a(28703),S=i(a(12396)),C=a(74253),T=i(a(25353)),M=a(95595),b=a(27853),P=i(a(18120)),A=i(a(17957)),I=a(28352),O=a(57525),N=r(a(90088)),w=r(a(28278)),D=i(a(8603)),R=a(96645),L=i(a(40210)),k=i(a(77865)),x=r(a(57556)),F=a(86809),G=i(a(61941)),U=a(45591),B=a(59420),j=i(a(72424)),V=a(11419),H=a(86145),W=a(4526),K=a(84990),Y=i(a(17744)),q=i(a(68384)),z=i(a(3111));function Q(){var e=(0,n.default)(["error = ",""]);return Q=function(){return e},e}function J(){var e=(0,n.default)(["updated "," from "," to ",""]);return J=function(){return e},e}function X(){var e=(0,n.default)(["id: "," type: ",""]);return X=function(){return e},e}function Z(){var e=(0,n.default)(["resumeUpload called while state was ",""]);return Z=function(){return e},e}function $(){var e=(0,n.default)(["Msg:initialize updating msg with out of order ack"]);return $=function(){return e},e}function ee(){var e=(0,n.default)(["msg:msg with no sender id:",", from:",", author:",", type:",""]);return ee=function(){return e},e}var{MSG_TYPE:te}=v.default;t.TYPE=te;class ae extends c.default{constructor(...e){super(...e),this.id=(0,c.prop)(),this.body=(0,c.prop)(),this.type=(0,c.prop)(),this.subtype=(0,c.prop)(),this.t=(0,c.prop)(),this.notifyName=(0,c.prop)(),this.from=(0,c.prop)(),this.to=(0,c.prop)(),this.author=(0,c.prop)(),this.self=(0,c.prop)("in"),this.ack=(0,c.prop)(),this.invis=(0,c.prop)(),this.isNewMsg=(0,c.prop)(),this.star=(0,c.prop)(!1),this.recvFresh=(0,c.prop)(),this.caption=(0,c.prop)(),this.interactiveAnnotations=(0,c.prop)(),this.clientUrl=(0,c.prop)(),this.loc=(0,c.prop)(),this.lat=(0,c.prop)(),this.lng=(0,c.prop)(),this.isLive=(0,c.prop)(),this.accuracy=(0,c.prop)(),this.speed=(0,c.prop)(),this.degrees=(0,c.prop)(),this.comment=(0,c.prop)(),this.sequence=(0,c.prop)(),this.shareDuration=(0,c.prop)(),this.finalLat=(0,c.prop)(),this.finalLng=(0,c.prop)(),this.finalAccuracy=(0,c.prop)(),this.finalThumbnail=(0,c.prop)(),this.finalSpeed=(0,c.prop)(),this.finalDegrees=(0,c.prop)(),this.finalTimeOffset=(0,c.prop)(),this.deprecatedMms3Url=(0,c.prop)(),this.directPath=(0,c.prop)(),this.mimetype=(0,c.prop)(),this.duration=(0,c.prop)(),this.filehash=(0,c.prop)(),this.encFilehash=(0,c.prop)(),this.size=(0,c.prop)(),this.filename=(0,c.prop)(),this.streamingSidecar=(0,c.prop)(),this.mediaKey=(0,c.prop)(),this.mediaKeyTimestamp=(0,c.prop)(),this.pageCount=(0,c.prop)(),this.isGif=(0,c.prop)(),this.gifAttribution=(0,c.prop)(),this.isViewOnce=(0,c.prop)(),this.streamable=(0,c.prop)(),this.width=(0,c.prop)(),this.height=(0,c.prop)(),this.thumbnailDirectPath=(0,c.prop)(),this.thumbnailSha256=(0,c.prop)(),this.thumbnailEncSha256=(0,c.prop)(),this.thumbnailHeight=(0,c.prop)(),this.thumbnailWidth=(0,c.prop)(),this.scanLengths=(0,c.prop)(),this.scansSidecar=(0,c.prop)(),this.isFromTemplate=(0,c.prop)(!1),this.devicesAdded=(0,c.prop)(),this.devicesRemoved=(0,c.prop)(),this.isThisDeviceAdded=(0,c.prop)(),this.firstFrameLength=(0,c.prop)(),this.firstFrameSidecar=(0,c.prop)(),this.isAnimated=(0,c.prop)(),this.canonicalUrl=(0,c.prop)(),this.matchedText=(0,c.prop)(),this.thumbnail=(0,c.prop)(),this.richPreviewType=(0,c.prop)(),this.doNotPlayInline=(0,c.prop)(),this.title=(0,c.prop)(),this.description=(0,c.prop)(),this.businessOwnerJid=(0,c.prop)(),this.productId=(0,c.prop)(),this.currencyCode=(0,c.prop)(),this.priceAmount1000=(0,c.prop)(),this.retailerId=(0,c.prop)(),this.url=(0,c.prop)(),this.productImageCount=(0,c.prop)(),this.sessionId=(0,c.prop)(),this.recipients=(0,c.prop)(),this.broadcast=(0,c.prop)(),this.quotedMsg=(0,c.prop)(),this.quotedStanzaID=(0,c.prop)(),this.quotedRemoteJid=(0,c.prop)(),this.quotedParticipant=(0,c.prop)(),this.mentionedJidList=(0,c.prop)(),this.footer=(0,c.prop)(),this.hydratedButtons=(0,c.prop)(),this.buttons=(0,c.prop)(),this.selectedId=(0,c.prop)(),this.selectedIndex=(0,c.prop)(),this.multicast=(0,c.prop)(),this.urlText=(0,c.prop)(),this.urlNumber=(0,c.prop)(),this.clearMedia=(0,c.prop)(),this.isVcardOverMmsDocument=(0,c.prop)(!1),this.vcardList=(0,c.prop)(),this.vcardFormattedName=(0,c.prop)(),this.protocolMessageKey=(0,c.prop)(),this.templateParams=(0,c.prop)(),this.textColor=(0,c.prop)(),this.backgroundColor=(0,c.prop)(),this.font=(0,c.prop)(),this.isForwarded=(0,c.prop)(!1),this.forwardingScore=(0,c.prop)(),this.labels=(0,c.prop)(),this.paymentCurrency=(0,c.prop)(),this.paymentAmount1000=(0,c.prop)(),this.paymentMessageReceiverJid=(0,c.prop)(),this.paymentTransactionTimestamp=(0,c.prop)(),this.paymentStatus=(0,c.prop)(),this.paymentTxnStatus=(0,c.prop)(),this.paymentNoteMsg=(0,c.prop)(),this.paymentRequestMessageKey=(0,c.prop)(),this.paymentExpiryTimestamp=(0,c.prop)(),this.ephemeralStartTimestamp=(0,c.prop)(),this.ephemeralDuration=(0,c.prop)(),this.ephemeralSettingTimestamp=(0,c.prop)(),this.ephemeralOutOfSync=(0,c.prop)(),this.ephemeralSharedSecret=(0,c.prop)(),this.bizPrivacyStatus=(0,c.prop)(),this.verifiedBizName=(0,c.prop)(),this.inviteCode=(0,c.prop)(),this.inviteCodeExp=(0,c.prop)(),this.inviteGrp=(0,c.prop)(),this.inviteGrpName=(0,c.prop)(),this.inviteGrpJpegThum=(0,c.prop)(),this.sellerJid=(0,c.prop)(),this.message=(0,c.prop)(),this.orderTitle=(0,c.prop)(),this.itemCount=(0,c.prop)(),this.orderId=(0,c.prop)(),this.surface=(0,c.prop)(),this.status=(0,c.prop)(),this.token=(0,c.prop)(),this.totalAmount1000=(0,c.prop)(),this.totalCurrencyCode=(0,c.prop)(),this.historySyncMetaData=(0,c.prop)(),this.mdDowngrade=(0,c.prop)(),this.appStateSyncKeyShare=(0,c.prop)(),this.appStateSyncKeyRequest=(0,c.prop)(),this.broadcastParticipants=(0,c.prop)(),this.broadcastEphSettings=(0,c.prop)(),this.broadcastId=(0,c.prop)(),this.ctwaContext=(0,c.prop)(),this.list=(0,c.prop)(),this.listResponse=(0,c.prop)(),this.promises=(0,c.session)((()=>({}))),this.local=(0,c.session)(),this.search=(0,c.session)(),this.msgChunk=(0,c.session)(),this.phoneUploading=(0,c.session)(),this.startOfDay=(0,c.session)(),this.startOfDaySkew=(0,c.session)(),this._quotedMsgObj=(0,c.session)(),this.isQuotedMsgAvailable=(0,c.session)(!0),this.senderObj=(0,c.session)(),this.mediaData=(0,c.session)(),this.forwardedFromWeb=(0,c.session)(!1),this.isDynamicReplyButtonsMsg=(0,c.prop)(!1),this.dynamicReplyButtons=(0,c.prop)(),this.replyButtons=(0,c.prop)(),this.buttonsResponse=(0,c.prop)(),this.selectedButtonId=(0,c.prop)(),this._links=(0,c.session)((()=>[])),this._headerLinks=(0,c.session)((()=>[])),this._footerLinks=(0,c.session)((()=>[])),this.linksIndexParsed=(0,c.session)(0),this.chat=(0,c.derived)(this._chat),this.hasTemplateButtons=(0,c.derived)(this._hasTemplateButtons,["buttons"]),this.ephemeralExpirationTimestamp=(0,c.derived)(this._ephemeralExpirationTimestamp,["t","subtype","ephemeralStartTimestamp","ephemeralDuration"]),this.isEphemeral=(0,c.derived)(this._isEphemeral,["ephemeralDuration","type","subtype"]),this.isQuickReply=(0,c.derived)(this._isQuickReply,["buttons"]),this.isFutureproof=(0,c.derived)(this._isFutureproof,["type","subtype"]),this.isGroupMsg=(0,c.derived)(this._isGroupMsg),this.isStatusV3=(0,c.derived)(this._isStatusV3),this.isPSA=(0,c.derived)(this._isPSA),this.isRTL=(0,c.derived)(this._isRTL,["dir"]),this.asProductInquiry=(0,c.derived)(this._asProductInquiry),this.statusV3TextBg=(0,c.derived)(this._statusV3TextBg),this.isSentByMe=(0,c.derived)(this._isSentByMe),this.isSentByMeFromWeb=(0,c.derived)(this._isSentByMeFromWeb,["isUserCreatedType"]),this.isNotification=(0,c.derived)(this._isNotification,["type","subtype"]),this.asGroupNotification=(0,c.derived)(this._asGroupNotification,["type"]),this.asBroadcastNotification=(0,c.derived)(this._asBroadcastNotification,["type"]),this.isBizNotification=(0,c.derived)(this._isBizNotification,["type","subtype"]),this.asProduct=(0,c.derived)(this._asProduct,["type"]),this.asAlbumAsset=(0,c.derived)(this._asAlbumAsset,["type","isNotification","caption","isForwarded","asRevoked","isGif","quotedMsg","ctwaContext","isViewOnce"]),this.asGroupedSticker=(0,c.derived)(this._asGroupedSticker,["type","isNotification","asRevoked","quotedMsg","ctwaContext"]),this.isMedia=(0,c.derived)(this._isMedia,["type"]),this.asDoc=(0,c.derived)(this._asDoc,["type"]),this.asImage=(0,c.derived)(this._asImage,["type"]),this.asMms=(0,c.derived)(this._asMms,["type"]),this.asRevoked=(0,c.derived)(this._asRevoked,["type"]),this.asViewOnce=(0,c.derived)(this._asViewOnce,["type","isViewOnce"]),this.asVisualMedia=(0,c.derived)(this._asVisualMedia,["type"]),this.numTimesForwarded=(0,c.derived)(this._numTimesForwarded,["isForwarded","forwardingScore"]),this.isFrequentlyForwarded=(0,c.derived)(this._isFrequentlyForwarded,["numTimesForwarded"]),this.eventType=(0,c.derived)(this._eventType,["type","invis","isNewMsg"]),this.sender=(0,c.derived)(this._sender),this.text=(0,c.derived)(this._text,["type","body","caption","comment","isLive","paymentNoteMsg","subtype"]),this.containsEmoji=(0,c.derived)(this._containsEmoji,["text"]),this.isFailed=(0,c.derived)(this._isFailed,["isSentByMe","ack","mdDowngrade"]),this.vcard=(0,c.derived)(this._vcard,["type","body"]),this.isUnsentMedia=(0,c.derived)(this._isUnsentMedia,["ack","asMms","isSentByMe"]),this.dir=(0,c.derived)(this._dir,["type","text","subtype"]),this.rtl=(0,c.derived)(this._rtl,["type","text","subtype"]),this.linkPreview=(0,c.derived)(this._linkPreview,["matchedText","body","title","description"]),this.isGroupsV4InviteExpired=(0,c.derived)(this._isGroupsV4InviteExpired,["type","inviteCode","inviteCodeExp"]),this.isPersistent=(0,c.derived)(this._isPersistent),this.isUnreadType=(0,c.derived)(this._isUnreadType,["type"]),this.isUserCreatedType=(0,c.derived)(this._isUserCreatedType,["type"]),this.supportsMessageFooter=(0,c.derived)(this._supportsMessageFooter,["isDynamicReplyButtonsMsg","isFromTemplate"]),this.hasBodyOrFooter=(0,c.derived)(this._hasBodyOrFooter,["text","footer"]),this.initialPageSize=(0,c.derived)(this._initialPageSize,["isFrequentlyForwarded"])}_chat(){return this._getChatCollection().get(this.id.remote)}_hasTemplateButtons(){return this.isFromTemplate&&null!=this.buttons&&this.buttons.length>0}_ephemeralExpirationTimestamp(){var{ephemeralDuration:e,ephemeralStartTimestamp:t,t:a,subtype:r,id:{fromMe:i}}=this;return(0,b.getEphemeralExpirationTimestamp)(e,t,a,r,i)}_isEphemeral(){return(this.type!==te.PROTOCOL||"ephemeral_setting"!==this.subtype)&&(null!=this.ephemeralDuration&&0!==this.ephemeralDuration)}_isQuickReply(){if(!this.hasTemplateButtons)return!1;if(null==this.buttons)return!1;var e=this.buttons.at(0);return null!=e&&e.subtype===v.default.TEMPLATE_BUTTON_SUBTYPE.QUICK_REPLY}_isFutureproof(){return this.type===te.UNKNOWN||this.type===te.PAYMENT&&"futureproof"===this.subtype}_isGroupMsg(){return q.default.isGroup(this.from)||q.default.isGroup(this.to)}_isStatusV3(){return q.default.isStatusV3(this.id.remote)}_isPSA(){return q.default.isPSA(this.id.remote)}_isRTL(){return"rtl"===this.dir||void 0===this.dir&&A.default.isRTL()}_asProductInquiry(){var e=this.safe();return e.type===v.default.MSG_TYPE.PRODUCT&&e.id&&e.id.id===v.default.PRODUCT_INQUIRY_TYPE?e:null}_statusV3TextBg(){if(!this.isStatusV3)return null;var e=this.backgroundColor;return e?"rgba(".concat(e>>16&255,", ").concat(e>>8&255,", ").concat(255&e,", ").concat(e>>24&255,")"):null}_isSentByMe(){return"in"!==this.id.self&&!this.isNotification&&q.default.equals(this.from,(0,M.getMaybeMeUser)())}_isSentByMeFromWeb(){return this.id.fromMe&&this.local&&this.isUserCreatedType}_isNotification(){return x.isNotification(this.type,this.subtype)}_asGroupNotification(){var e=this.safe();switch(e.type){case te.GROUP_NOTIFICATION:case te.GP2:return e;default:return null}}_asBroadcastNotification(){var e=this.safe();return e.type===te.BROADCAST_NOTIFICATION?e:null}_isBizNotification(){if(this.type===te.NOTIFICATION_TEMPLATE){if(f.BIZ_SYSTEM_MSG_SUBTYPES.includes(this.subtype))return!0;switch(this.subtype){case"verified_initial_unknown":case"verified_initial_low":case"verified_initial_high":case"verified_transition_any_to_none":case"verified_transition_any_to_high":case"verified_transition_high_to_low":case"verified_transition_high_to_unknown":case"verified_transition_unknown_to_low":case"verified_transition_low_to_unknown":case"verified_transition_none_to_low":case"verified_transition_none_to_unknown":case"biz_verified_transition_top_to_bottom":case"biz_verified_transition_bottom_to_top":case"biz_intro_top":case"biz_intro_bottom":case"biz_name_change":case"biz_move_to_consumer_app":case"biz_two_tier_migration_top":case"biz_two_tier_migration_bottom":return!0;default:return!1}}return!1}_asProduct(){var e=this.safe();return"product"===e.type?e:null}_asAlbumAsset(){var e=this.safe();return e.type!==v.default.MSG_TYPE.IMAGE&&(e.type!==v.default.MSG_TYPE.VIDEO||!0===e.isGif)||e.isNotification||e.caption||e.asRevoked||e.quotedMsg||e.ctwaContext||e.isViewOnce?null:e}_asGroupedSticker(){var e=this.safe();return e.type!==v.default.MSG_TYPE.STICKER||e.isNotification||e.asRevoked||e.quotedMsg||e.ctwaContext?null:e}_isMedia(){return["image","video","audio"].includes(this.type)}_asDoc(){var e=this.safe();return e.type===v.default.MSG_TYPE.DOCUMENT?e:null}_asImage(){var e=this.safe();return e.type===v.default.MSG_TYPE.IMAGE?e:null}_asMms(){var e=this.safe();return(0,x.typeIsMms)(e)?e:null}_asRevoked(){var e=this.safe();return e.type===te.REVOKED?e:null}_asViewOnce(){var e=this.asVisualMedia;return(null==e?void 0:e.isViewOnce)?e:null}_asVisualMedia(){var e=this.safe();return e.type===v.default.MSG_TYPE.IMAGE||e.type===v.default.MSG_TYPE.VIDEO?e:null}_numTimesForwarded(){return this.forwardingScore?this.forwardingScore||0:this.isForwarded?1:0}_isFrequentlyForwarded(){return this.numTimesForwarded>=v.default.FREQUENTLY_FORWARDED_SENTINEL}_eventType(){if(!this.isNewMsg)return"i";var e=(0,x.eventTypeFromMsgType)(this);return this.invis?"i"===e?"i":"n":e}_sender(){return this.isSentByMe?this.from:this.isGroupMsg||this.isStatusV3?this.author:this.from}_text(){if(this.isFromTemplate||this.isDynamicReplyButtonsMsg)return this.type===te.CHAT?this.body:this.caption;switch(this.type){case te.CHAT:return this.body;case te.IMAGE:case te.VIDEO:return this.caption;case te.LOCATION:return this.isLive?this.comment:void 0;case te.PAYMENT:var{paymentNoteMsg:e}=this;return e?e.body:void 0;case te.GROUPS_V4_INVITE:return this.comment;case te.PRODUCT:return this.getProductInfoText();case te.HSM:case te.TEMPLATE_BUTTON_REPLY:return this.body;default:return}}_containsEmoji(){var{text:e}=this;return!!e&&S.default.containsEmoji(e)}_isFailed(){return this.isSentByMe&&this.ack<v.default.ACK.CLOCK}_vcard(){if(this.type===te.VCARD)try{return(0,K.parseVcard)(this.body)}catch(e){return}}_isUnsentMedia(){return this.ack<v.default.ACK.SENT&&null!=this.asMms&&this.isSentByMe}_dir(){return this.type===te.VCARD?this.subtype?h.dir(this.subtype):void 0:this.text?h.dir(this.text):void 0}_rtl(){return this.type===te.VCARD?!!this.subtype&&"rtl"===h.dir(this.subtype):!!this.text&&"rtl"===h.dir(this.text)}_linkPreview(){return(0,V.isString)(this.matchedText)&&(!(0,d.default)(this.title)||!(0,d.default)(this.description))&&this.body.includes(this.matchedText)}_isGroupsV4InviteExpired(){if(this.type!==v.default.MSG_TYPE.GROUPS_V4_INVITE)return!1;if(!this.inviteCode)return!0;var e=(new Date).getTime()/1e3;return parseInt(e,10)>=parseInt(this.inviteCodeExp,10)}_isPersistent(){return this.type===te.E2E_NOTIFICATION&&"encrypt"===this.subtype}_isUnreadType(){return[te.CHAT,te.IMAGE,te.VIDEO,te.AUDIO,te.PTT,te.DOCUMENT,te.VCARD,te.LOCATION,te.CIPHERTEXT,te.OVERSIZED,te.MULTI_VCARD,te.REVOKED,te.UNKNOWN,te.STICKER,te.PRODUCT,te.GROUPS_V4_INVITE].includes(this.type)}_isUserCreatedType(){return[te.PROTOCOL,te.CHAT,te.LOCATION,te.VCARD,te.MULTI_VCARD,te.IMAGE,te.VIDEO,te.AUDIO,te.PTT,te.DOCUMENT,te.STICKER,te.PRODUCT,te.GROUPS_V4_INVITE].includes(this.type)}_supportsMessageFooter(){return this.isFromTemplate||this.isDynamicReplyButtonsMsg}_hasBodyOrFooter(){return null!=this.text||null!=this.footer}_initialPageSize(){return this.isFrequentlyForwarded?v.default.FREQUENTLY_FORWARDED_INITIAL_PAGE_SIZE:v.default.INITIAL_PAGE_SIZE}initialize(){if(super.initialize(),this._pendingAckUpdate=new u.PromiseQueue,this.sender)this.addChild("senderObj",g.default.gadd(this.sender));else switch(this.type){case te.NOTIFICATION:case te.NOTIFICATION_TEMPLATE:case te.GROUP_NOTIFICATION:case te.GP2:case te.BROADCAST_NOTIFICATION:case te.E2E_NOTIFICATION:case te.CALL_LOG:case te.PROTOCOL:break;default:__LOG__(2)(ee(),this.id.toString(),this.from.toString(),this.author&&this.author.toString(),this.type)}var e;this.mentionedJidList=this.mentionedJidList||[],this.mentionedJidList.forEach((e=>g.default.gadd(e)));var t=this.getCollection();(e=t.preAck[this.id])&&(__LOG__(2)($()),this.updateAck(e.ack,e.t),delete t.preAck[this.id]),this.type===te.CIPHERTEXT&&this.listenToOnce(this,"change:type",this.onCiphertextDecrypted),this.mediaObject=void 0,x.typeIsMms(this)&&(this._createMediaDataChild(),w.registerMsg(this)),this.isSentByMeFromWeb&&(this.promises.sendPromise=Promise.sit("settled").finally((()=>{this.promises.sendPromise=null})).endWithControls("settled")),this.isLive&&a(84383).default.processMsg(this,!1),_.default.isSMB&&(0,I.initializeLabels)(this)}_getLinks(e,t=[],a=0,r=1/0){if(a>=r)return[t,r];var i=(0,H.firstNCodepoints)(e,r),s=N.findLinks(i,false,this.sender);if((0,H.numCodepoints)(e)>r&&s.length>0){var n=s[s.length-1];(0,H.numCodepoints)(i.slice(0,n.index))+(0,H.numCodepoints)(n.url)===r&&(s=N.findLinks(e,false,this.sender))}return[s,r]}getLinks(e=this.initialPageSize+1){var{text:t}=this;if(null==t)return this._links;var[a,r]=this._getLinks(t,this._links,this.linksIndexParsed,e);return this.linksIndexParsed=r,this._links=a}getHeaderLinks(){if(!1===this.isDynamicReplyButtonsMsg||null==this.title)return[];if(this._headerLinks.length>0)return this._headerLinks;var[e]=this._getLinks(this.title,this._headerLinks);return this._headerLinks=e}getFooterLinks(){if(!1===this.isDynamicReplyButtonsMsg||null==this.footer)return[];if(this._footerLinks.length>0)return this._footerLinks;var[e]=this._getLinks(this.footer,this._footerLinks);return this._footerLinks=e}getGalleryLinks(){return(0,l.default)(this.getLinks(),"href").filter((e=>e.isHttp))}getSuspiciousLinks(){return this.getLinks().filter((e=>e.suspiciousCharacters&&e.suspiciousCharacters.size))}_createMediaDataChild(){this.addChild("mediaData",new D.default)}hasSymbol(){return["image","video","audio","ptt","location","vcard","multi_vcard","document","ciphertext","oversized","unknown","call_log","revoked","sticker","payment","groups_v4_invite","product","order"].includes(this.type)}mayFail(){return this.isSentByMe&&this.ack<v.default.ACK.SENT}isUnsentPhoneMsg(){return!this.local&&this.isSentByMe&&this.ack<v.default.ACK.SENT}canReply(){return!(this.type===te.LIST&&!(0,x.listMsgCanRender)(this))&&(this.chat.canSend&&!this.mayFail()&&!this.isNotification&&this.type!==te.UNKNOWN&&this.type!==te.CIPHERTEXT&&this.type!==te.OVERSIZED&&this.type!==te.REVOKED&&this.interactiveButtonsReleased())}canPrivateReply(){return!this.mayFail()&&!this.isNotification&&this.type!==te.UNKNOWN&&this.type!==te.CIPHERTEXT&&this.type!==te.OVERSIZED&&this.type!==te.REVOKED&&!this.isSentByMe&&this.isGroupMsg&&this.interactiveButtonsReleased()}canPrivateReplyInRestrictedGrp(){return!!this.chat.isAnnounceGrpRestrict&&!this.chat.isReadOnly&&!this.mayFail()&&!this.isSentByMe&&!this.isNotification&&this.type!==te.UNKNOWN&&this.type!==te.CIPHERTEXT&&this.type!==te.OVERSIZED&&this.type!==te.REVOKED&&this.interactiveButtonsReleased()}canForward(){var e;if(this.type===te.CIPHERTEXT)return!1;if(this.type===te.OVERSIZED)return!1;if(this.type===te.REVOKED)return!1;if(this.type===te.UNKNOWN)return!1;if(this.type===te.PAYMENT)return!1;if(this.type===te.LIST)return(null===(e=this.list)||void 0===e?void 0:e.listType)===y.ListMessageListType.PRODUCT_LIST&&(0,x.listMsgCanRender)(this);if(this.type===te.GROUPS_V4_INVITE)return!1;if(this.type===te.LOCATION&&this.isLive)return!1;if(this.type===te.ORDER)return!1;if(!this.interactiveButtonsReleased())return!1;if(this.ack<v.default.ACK.SENT&&this.isSentByMe)return!1;if(this.asMms){var t=this.mediaData;if(t.mediaStage===R.MEDIA_DATA_STAGE.EXISTS)return!0;if(t.mediaStage===R.MEDIA_DATA_STAGE.ERROR_MISSING)return!1;if(t.mediaStage===R.MEDIA_DATA_STAGE.ERROR_UNSUPPORTED)return!1;if(t.mediaStage!==R.MEDIA_DATA_STAGE.RESOLVED&&(this.type===te.IMAGE||this.type===te.VIDEO||this.type===te.PTT))return!1;if(this.isViewOnce)return!1;if(this.isUnsentMedia)return!1}return!0}canQuickForward(){return!(!this.canForward()||this.isFrequentlyForwarded||0!==this.getSuspiciousLinks().length||this.type===v.default.MSG_TYPE.PTT||this.type===v.default.MSG_TYPE.STICKER||!this.interactiveButtonsReleased())&&(null!=this.asMms||this.linkPreview||this.type===v.default.MSG_TYPE.VCARD||this.type===v.default.MSG_TYPE.LOCATION||null!=this.ctwaContext)}canStar(){return!(this.type===te.LIST&&!(0,x.listMsgCanRender)(this))&&(!this.isNotification&&!this.isFutureproof&&!this.isViewOnce&&this.type!==te.REVOKED&&!(this.ack<v.default.ACK.SENT&&this.isSentByMe)&&this.interactiveButtonsReleased())}interactiveButtonsReleased(){return this.isFromTemplate||!this.hasTemplateButtons&&this.type!==v.default.MSG_TYPE.TEMPLATE_BUTTON_REPLY}isGroupLeave(){return"gp2"===this.type&&("leave"===this.subtype||"remove"===this.subtype)&&q.default.equals(this.recipients[0],(0,M.getMaybeMeUser)())}isTrusted(){return!!q.default.equals(this.sender,(0,M.getMaybeMeUser)())||(!(!this.senderObj||!this.senderObj.isMyContact)||(this.isGroupMsg?this.chat.isTrusted():this.chat.notSpam))}getVcardWids(){return this.type!==te.VCARD?null:(0,K.vcardWids)(this.vcard)}getLocObject(){var e=this.loc;if(e){var[t,a=null]=e.split("\n");return{name:t,addr:a}}return null}resumeRemoteUpload(){return this.isUnsentPhoneMsg()&&!this.phoneUploading&&((0,U.sendMsgRecord)(this).then((e=>{e!==B.SendMsgResult.OK&&(this.phoneUploading=!1)})),this.phoneUploading=!0),this.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:L.default.WEBC_RMR_REASON_CODE.MSG_CLICK,isUserInitiated:!0})}forceRMR(){return Promise.reject(new Error("unimplemented forceRMR"))}isForcingRMR(){return!1}cancelDownload(){w.cancelDownloadMsg(this)}resumeUpload(){return this.mediaData.mediaStage!==R.MEDIA_DATA_STAGE.NEED_UPLOAD&&(__LOG__(4,void 0,new Error,!0)(Z(),this.mediaData.mediaStage),SEND_LOGS("resume-non-need-upload")),w.resumeUploadMsg(this)}cancelUpload(){w.cancelUploadMsg(this)}logInitialRender(){if(this.asMms&&this.mediaData&&!this.isStatusV3&&!this._renderEvent){var e=this._renderEvent=new L.default.WebcMediaRender({messageMediaType:this.getWamMediaType(),webcChatType:this.chat.getWebcChatType(),webcChatPosition:this.chat.initialIndex,webcBrowserNetworkType:(0,F.getEffectiveNetworkType)(),webcMessageT:this.t}),{msgChunk:t}=this;t&&t===this.chat.msgs&&(e.webcMessageIndex=t.length-t.indexOf(this)-1);var a=()=>{switch(this.mediaData.mediaStage){case R.MEDIA_DATA_STAGE.INIT:case R.MEDIA_DATA_STAGE.PREPARING:case R.MEDIA_DATA_STAGE.FETCHING:case R.MEDIA_DATA_STAGE.DECRYPTING:case R.MEDIA_DATA_STAGE.REMOTE_UPLOADING:case R.MEDIA_DATA_STAGE.REUPLOADING:case R.MEDIA_DATA_STAGE.UPLOADING:case R.MEDIA_DATA_STAGE.SENDING:return;case R.MEDIA_DATA_STAGE.RESOLVED:e.webcMediaStage=L.default.WEBC_MEDIA_STAGE_TYPE.RESOLVED;break;case R.MEDIA_DATA_STAGE.NEED_POKE:e.webcMediaStage=L.default.WEBC_MEDIA_STAGE_TYPE.NEEDS_RMR;break;default:e.webcMediaStage=L.default.WEBC_MEDIA_STAGE_TYPE.OTHER}this._logStorageEstimate(e).finally((()=>{e.commit(),this.stopListening(this.mediaData,"change:mediaStage",a)}))};this.listenToAndRun(this.mediaData,"change:mediaStage",a)}}waitForPhoneUpload(){var e=this;return(0,s.default)((function*(){if(!Boolean(e.mediaData.filehash)||e.isUnsentPhoneMsg()){if(e.promises.waitForPhoneUploadPromise)return e.promises.waitForPhoneUploadPromise;e.promises.waitForPhoneUploadPromise=(0,Y.default)(e.mediaData,"change:mediaStage change:filehash",(()=>Boolean(e.mediaData.filehash)&&!e.isUnsentPhoneMsg())),yield e.promises.waitForPhoneUploadPromise,e.promises.waitForPhoneUploadPromise=null}}))()}downloadMedia(e){if(this.asRevoked)return Promise.resolve();var{downloadEvenIfExpensive:t,rmrReason:a,isUserInitiated:r}=e;if(this.asMms||(__LOG__(4,void 0,new Error,!0)(X(),this.id.toString(),this.type),SEND_LOGS("media-fault: downloadMedia msg is not mms type")),this.isUnsentPhoneMsg()){var i=this.promises.waitForPhoneUploadPromise;return i||(i=this.promises.waitForPhoneUploadPromise=(0,Y.default)(this.mediaData,"change:mediaStage change:filehash",(()=>!!this.mediaData.filehash&&!this.isUnsentPhoneMsg())).then((()=>{this.promises.waitForPhoneUploadPromise=null}))),i.then((()=>this.downloadMedia(e)))}return w.downloadMsg({msg:this,isUserClick:a===L.default.WEBC_RMR_REASON_CODE.MSG_CLICK,downloadEvenIfExpensive:t,rmrReason:a,rmrData:this._getRmrData(a),mode:r?"manual":"auto"})}_getRmrData(e){var t={webcRmrReason:e,webcMessageT:this.t},a=this.chat;if(a){t.webcChatType=a.getWebcChatType(),null!=a.initialIndex&&(t.webcChatPosition=a.initialIndex);var{msgChunk:r}=this;r&&r===a.msgs&&(t.webcMessageIndex=r.length-r.indexOf(this)-1)}return t}applyUpdate(e){return e.type&&this.type!==e.type&&x.typeIsMms(e)?(this.type!==te.CIPHERTEXT&&(__LOG__(4,void 0,new Error,!0)(J(),this.id.toString(),this.type,String(e.type)),SEND_LOGS("invalid-type-update")),this._createMediaDataChild(),w.registerMsgEarly(this,e),w.prepareMsg(this).then((()=>{this.set(e)})).catch((e=>{__LOG__(4,void 0,new Error,!0)(Q(),String(e)),SEND_LOGS("preregister-error")}))):(this.set(e),this.isLive&&a(84383).default.processMsg(this,!0),this.paymentTransactionTimestamp&&this.getCollection().updateLastTransactionTime(this.id.remote,this.paymentTransactionTimestamp),Promise.resolve())}waitForPrep(){return x.typeIsMms(this)?w.prepareMsg(this):Promise.resolve()}delete(e){super.delete(),a(63095).default.remove(this),this.isLive&&a(84383).default.removeMsg(this),this.getCollection().remove(this.id),this.msgChunk&&this.msgChunk.remove(this.id,{},Boolean(e&&e.skipUpdatingSortTime)),x.typeIsMms(this)&&w.deregisterMsg(this);var t=this._getChatCollection().get(this.id.remote);if(t){if(t.unreadMsgAnchor===this&&(t.unreadMsgAnchor=void 0),(!e||!e.doNotResetLastReceived)&&t.lastReceivedKey===this.id){var r=void 0,i=t.getLastReceivedMsg();i&&(r=i.id),(0,O.setLastReceivedKey)(t.id,r).then((()=>{t.lastReceivedKey=r}))}t.composeQuotedMsg===this&&(t.composeQuotedMsg=null)}}quotedMsgObj(){if(!this.quotedMsg&&!this.paymentRequestMessageKey)return null;if(this._quotedMsgObj){var e=this.getCollection();return x.getOriginalQuotedMsgIfPossible(this._quotedMsgObj,e)}if(this.quotedMsg)this._quotedMsgObj=this._getQuotedMsgObj();else{if(!this.paymentRequestMessageKey)return null;this._quotedMsgObj=this._getQuotedPaymentRequestMsg()}var t=this.getCollection();return x.getOriginalQuotedMsgIfPossible(this._quotedMsgObj,t)}_getQuotedMsgObj(){var e=(0,M.getMaybeMeUser)(),t=!this.quotedParticipant||q.default.equals(this.quotedParticipant,e),a=t?"out":"in",r=this.quotedRemoteJid?this.quotedRemoteJid:this.id.remote,i={id:this.quotedStanzaID,from:t?e:r,to:t?r:e,self:a,author:(0,G.default)(this.quotedParticipant,"this.quotedParticipant"),remote:r};return!(q.default.isGroup(i.from)||q.default.isGroup(i.to))&&!q.default.isStatusV3(r)||q.default.equals(e,this.quotedParticipant)&&!P.default.supportsFeature(P.default.F.MD_BACKEND)||(i.participant=(0,G.default)(this.quotedParticipant,"this.quotedParticipant")),Object.assign(i,this.quotedMsg),x.createQuotedMsg(i)}_getQuotedPaymentRequestMsg(){if(!this.paymentRequestMessageKey)return null;var e=this.paymentRequestMessageKey.remote?this.paymentRequestMessageKey.remote:this.id.remote,t=this.paymentRequestMessageKey.fromMe,a=null!=this.paymentRequestMessageKey.self?this.paymentRequestMessageKey.self:t?"out":"in",r=this.paymentRequestMessageKey.participant||this.paymentMessageReceiverJid,i={id:this.paymentRequestMessageKey.id,from:t?(0,M.getMaybeMeUser)():e,to:t?e:(0,M.getMaybeMeUser)(),self:a,participant:r,author:r,remote:e,amount1000:this.paymentAmount1000,currency:this.paymentCurrency,receiverJid:this.sender,type:this.type,subtype:"request"};return x.createQuotedMsg(i)}getQuotedMsgAdminGroupJid(){return null==this.quotedMsg?this.quotedRemoteJid:null}msgContextInfo(e){var t=(0,o.default)(this.toJSON(),["id","t","notifyName","from","to","author","self","ack","invis","isNewMsg","star","recvFresh","recipients","broadcast","quotedMsg","quotedStanzaID","quotedRemoteJid","quotedParticipant","senderObj","multicast","replyButtons"]),a=null;return e&&!this.id.remote.equals(e)&&(a=this.id.remote),{quotedMsg:t,quotedParticipant:this.sender,quotedStanzaID:this.id.id,quotedRemoteJid:a}}displayName(e,t){if(!this.sender)return"";if(this.sender.equals((0,M.getMaybeMeUser)()))return A.default.t(1843);var a=this.senderObj,r=e?a.shortName:void 0;if(r)return r;if(a.name)return a.name;var i=t&&this.notifyName?" ~"+this.notifyName:"";return(0,z.default)(this.sender)+i}isQuoted(e){var t=this.quotedMsgObj();return!!t&&t.sender.equals(e)}isMentioned(e){return!!this.mentionedJidList&&this.mentionedJidList.findIndex((t=>t.equals(e)))>-1}mentionMap(){if(!this.mentionedJidList)return null;if(!this.mentionedJidList.length)return null;var e={};return this.mentionedJidList.forEach((t=>{e["@".concat(q.default.user(t)||"")]=g.default.gadd(t)})),e}updateAck(e,t){if(P.default.supportsFeature(P.default.F.MD_BACKEND))this.updateAckMD(e,t);else{var a=this.ack;(0,V.isNumber)(e)&&(void 0===a||e>a||e===v.default.ACK.FAILED)?(this.ack=e,e>=1&&null!=t&&null==this.ephemeralStartTimestamp&&this.updateEphemeralStartTimestamp(t),"ephemeral_setting"===this.subtype&&1===e&&null!=t&&(0,C.updateEphemeralSettingTimestamp)(this.chat,t)):e===v.default.ACK.FAILED&&this.ack===v.default.ACK.CLOCK&&(this.ack=v.default.ACK.FAILED,this.phoneUploading=!1)}}updateAckMD(e,t){var a=this;this._pendingAckUpdate.enqueue((0,s.default)((function*(){var r=a.ack;(0,V.isNumber)(e)&&(void 0===r||e>r||e===v.default.ACK.FAILED)?(yield(0,W.updateLocal)(a.id,{ack:e}),a.ack=e,e>=1&&null!=t&&null==a.ephemeralStartTimestamp&&a.updateEphemeralStartTimestamp(t),"ephemeral_setting"===a.subtype&&1===e&&null!=t&&(0,C.updateEphemeralSettingTimestamp)(a.chat,t)):e===v.default.ACK.FAILED&&a.ack===v.default.ACK.CLOCK&&(yield(0,W.updateLocal)(a.id,{ack:v.default.ACK.FAILED}),a.ack=v.default.ACK.FAILED,a.phoneUploading=!1)})))}avParams(){return w.mediaMetadata(this)}resend(){return this.isFailed?(this._pendingAckUpdate.enqueue((()=>(0,W.updateLocal)(this.id,{ack:v.default.ACK.CLOCK}).then((()=>{this.ack=v.default.ACK.CLOCK})))),this.asMms?this.isSentByMeFromWeb?this.resumeUpload():this.resumeRemoteUpload():(0,U.sendMsgRecord)(this)):Promise.resolve()}onCiphertextDecrypted(){if(!this.isStatusV3){var e=this.chat,t=e.msgs.length,a=e.msgs.indexOf(this);-1!==a&&t-a<=10&&m.default.alertNewMsg(this)}}canRevoke(){return this.id.fromMe&&this.isUserCreatedType&&(!q.default.isBroadcast(this.id.remote)||"iphone"===_.default.platform)&&!this.broadcast&&Math.trunc(+new Date/1e3)-this.t<=v.default.REVOKE_WINDOW&&!this.isUnsentPhoneMsg()&&!this.isUnsentMedia}getWamMessageType(){return this.isStatusV3?L.default.MESSAGE_TYPE.STATUS:this.isGroupMsg?L.default.MESSAGE_TYPE.GROUP:q.default.isBroadcast(this.id.remote)?L.default.MESSAGE_TYPE.BROADCAST:L.default.MESSAGE_TYPE.INDIVIDUAL}getWamMediaType(){if(!0===this.isDynamicReplyButtonsMsg)return L.default.MEDIA_TYPE.BUTTON_MESSAGE;switch(this.type){case te.IMAGE:return L.default.MEDIA_TYPE.PHOTO;case te.VIDEO:return this.mediaData.isGif?L.default.MEDIA_TYPE.GIF:L.default.MEDIA_TYPE.VIDEO;case te.AUDIO:return L.default.MEDIA_TYPE.AUDIO;case te.PTT:return L.default.MEDIA_TYPE.PTT;case te.DOCUMENT:return L.default.MEDIA_TYPE.DOCUMENT;case te.UNKNOWN:return L.default.MEDIA_TYPE.FUTURE;case te.LOCATION:return this.isLive?L.default.MEDIA_TYPE.LIVE_LOCATION:L.default.MEDIA_TYPE.LOCATION;case te.VCARD:return L.default.MEDIA_TYPE.CONTACT;case te.MULTI_VCARD:return L.default.MEDIA_TYPE.CONTACT_ARRAY;case te.CHAT:return this.linkPreview?L.default.MEDIA_TYPE.URL:L.default.MEDIA_TYPE.NONE;case te.STICKER:return L.default.MEDIA_TYPE.STICKER;case te.PRODUCT:return L.default.MEDIA_TYPE.PRODUCT_IMAGE;case te.LIST:return L.default.MEDIA_TYPE.LIST;case te.LIST_RESPONSE:return L.default.MEDIA_TYPE.LIST_REPLY;case te.BUTTONS_RESPONSE:return L.default.MEDIA_TYPE.BUTTON_RESPONSE_MESSAGE;default:return L.default.MEDIA_TYPE.NONE}}getForwardingScoreWhenForwarded(){if(!j.default.frequentlyForwardedMessages)return this.numTimesForwarded;var e=this.numTimesForwarded+(this.id.fromMe?0:1);return e>=j.default.frequentlyForwardedThreshold?v.default.FREQUENTLY_FORWARDED_SENTINEL:e}getProductInfoText(){var{title:e,description:t,currencyCode:a,priceAmount1000:r}=this;e="*".concat(e,"*");var i,s=a&&null!=r?E.format(a,r):null;return e=e.length>v.default.MAX_REPLY_PRODUCT_TITLE_LENGTH?"".concat((0,H.firstNCodepoints)(e,v.default.MAX_REPLY_PRODUCT_TITLE_LENGTH),"..."):e,t=t&&t.length>v.default.MAX_REPLY_PRODUCT_DESC_LENGTH?"".concat((0,H.firstNCodepoints)(t,v.default.MAX_REPLY_PRODUCT_DESC_LENGTH),"..."):t,s?i=s:t&&(i=t),i?"".concat(e,"\n").concat(i):e}updateEphemeralStartTimestamp(e){return(0,W.updateLocal)(this.id,{ephemeralStartTimestamp:e}).then((()=>{this.ephemeralStartTimestamp=e}))}isExpired(){return null!=this.ephemeralExpirationTimestamp&&this.ephemeralExpirationTimestamp<=p.default.globalUnixTime()}_logStorageEstimate(e){return(0,T.default)().then((t=>{t&&(e.webcBrowserStorageQuotaBytes=t.quota,e.webcBrowserStorageQuotaUsedBytes=t.usage)}))}getCollection(){return a(58885).default}_getChatCollection(){return a(43334).default}isDownloadable(){var e;return!this.asRevoked&&(!this.isViewOnce&&(this.type===v.default.MSG_TYPE.VCARD||this.type===v.default.MSG_TYPE.MULTI_VCARD||!!(null===(e=this.mediaData)||void 0===e?void 0:e.isDownloadable())&&this.type!==v.default.MSG_TYPE.STICKER))}safe(){return this}unsafe(){return this}}ae.Proxy="msg",ae.idClass=k.default;var re=(0,c.defineModel)(ae),ie=re;t.default=ie},47340:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(61247)),n=r(a(77865));class o extends s.default{constructor(...e){super(...e),this.id=(0,s.prop)(),this.unsyncedButtonReplies=(0,s.prop)()}}o.Proxy="msgButtonReplyMsg",o.idClass=n.default;var l=(0,s.defineModel)(o);t.default=l},30797:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(54019)),s=r(a(47340));class n extends i.default{}t.default=n,n.model=s.default},58885:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MsgCollection=void 0;var s=i(a(70417)),n=i(a(19976)),o=i(a(54019)),l=i(a(50935)),d=a(28703),u=a(19741),c=a(44700),h=a(95595),f=i(a(27e3)),p=i(a(30797)),m=i(a(77865)),_=i(a(61941)),v=a(81233),g=i(a(76485)),E=a(11419),y=i(a(17744)),S=i(a(76022)),C=i(a(68384)),T=a(75637),M=r(a(12767));function b(){var e=(0,n.default)(["Msg:resyncReceipts dropped "," ",""]);return b=function(){return e},e}function P(){var e=(0,n.default)(["Msg:resyncReceipts error"]);return P=function(){return e},e}function A(){var e=(0,n.default)(["Msg:resyncReceipts invalid response: ",""]);return A=function(){return e},e}function I(){var e=(0,n.default)(["Msg:resyncReceipts success"]);return I=function(){return e},e}function O(){var e=(0,n.default)(["Msg:resyncReceipts"]);return O=function(){return e},e}function N(){var e=(0,n.default)(["Msg:resyncReceipts wid in lastReceivedReceipt, but no msg: ",""]);return N=function(){return e},e}function w(){var e=(0,n.default)(["model:msg:getContext:before ctx message mismatch"]);return w=function(){return e},e}function D(){var e=(0,n.default)(["model:msg:getContext:before fetch error"]);return D=function(){return e},e}function R(){var e=(0,n.default)(["model:msg:getContext:after fetch error"]);return R=function(){return e},e}function L(){var e=(0,n.default)(["model:msg:getContext fetch error"]);return L=function(){return e},e}function k(){var e=(0,n.default)(["model:Msg:media error ",""]);return k=function(){return e},e}function x(){var e=(0,n.default)(["model:Msg:search error ",""]);return x=function(){return e},e}function F(){var e=(0,n.default)(["model:Msg:queryVcard error 499 (unimplemented)"]);return F=function(){return e},e}function G(){var e=(0,n.default)(["model:Msg:getStarred error ",""]);return G=function(){return e},e}function U(){var e=(0,n.default)(["model:Msg:getStarred error 499 (unimplemented)"]);return U=function(){return e},e}function B(){var e=(0,n.default)(["model:Msg:findQuery:got:",":",""]);return B=function(){return e},e}function j(){var e=(0,n.default)(["model:Msg:findQuery error ",""]);return j=function(){return e},e}class V extends o.default{constructor(){super(),this.lastReceivedReceipt={},this.lastReceivedPaymentTransaction={},this.preAck={},this.pendingAdd={},this.ftsCache={},this.productListMessagesPrefetchChain=Promise.resolve([]),this.onSearchTag=e=>{this.pendingSearchTag=e},this.listenTo(M.default,"change:stream",(function(){M.default.stream===M.STREAM.DISCONNECTED&&(this.preAck={})})),this.listenTo(this,"remove",this.removeFromCollection)}removeFromCollection(e){e.chat&&e.chat.removeFromCollection(e)}_findQuery(e,t){var r,i=this;switch(e.direction){case"before":case"after":r=e.direction;break;default:r="before"}var s={add:r,isHistory:!0};return(0,c.msgFindQuery)(r,e,t,void 0).then((t=>t.status>=400?(__LOG__(3)(j(),t.status),Promise.reject(t.status)):(t.forEach((function(e){e.invis=!0})),__LOG__(2)(B(),t.length,e.direction),i.processMultipleMessages(e.remote,t,s,(function(){var t=i.get(e),r=a(43334).default.get(e.remote);return t?t.msgChunk:r?r.msgs:void 0})))))}add(e,t){var a=(Array.isArray(e)?e:[e]).filter((e=>null==e.ephemeralDuration||0===e.ephemeralDuration||!new f.default(e).isExpired())),r=super.add(a,t);return this._syncTemplateButtonClickState(r),this._syncQuickReplyButtonClickState(r),this._prefetchProductListMessages(r),r}_prefetchProductListMessages(e){var t=a(90567).default;e.filter((e=>{var t,a;return null!=e&&e.isNewMsg&&e.type===l.default.MSG_TYPE.LIST&&(null===(t=e.list)||void 0===t?void 0:t.listType)===d.ListMessageListType.PRODUCT_LIST&&null!=(null===(a=e.list)||void 0===a?void 0:a.productListInfo)})).reduce(((e,a)=>{var r;if(null==a)return e;var i=a.isForwarded?a.businessOwnerJid:a.from.toString({legacy:!0}),s=null===(r=a.list)||void 0===r?void 0:r.productListInfo;if(null==i||null==s)return e;var n=t.getOrAdd(a.id,s,i);return null==n||0!==n.productCollection.getModelsArray().length||n.isFetching()?e:e.then((()=>t.update(n.id)))}),this.productListMessagesPrefetchChain)}_syncTemplateButtonClickState(e){for(var t=this,a=function(a){var r=e[a];if(!r)return"continue";var i=r.chat;if(r.type===l.default.MSG_TYPE.TEMPLATE_BUTTON_REPLY&&null!=r.selectedIndex&&r.sender.equals((0,h.getMaybeMeUser)())){null==i.msgUnsyncedButtonReplyMsgs&&(i.msgUnsyncedButtonReplyMsgs=new p.default);var{msgUnsyncedButtonReplyMsgs:s}=i,n=r.quotedMsgObj();if(!n)return"continue";var o=s.get(n.id);o||(s.add({id:n.id,unsyncedButtonReplies:new g.default}),o=s.get(n.id));var{unsyncedButtonReplies:d}=(0,_.default)(o,"buttonReplyMsg");d.add(r);var u=t.get(n.id);if(u&&u.buttons){var c=u.buttons.get("".concat((0,_.default)(r.selectedIndex,"msg.selectedIndex")));c&&(c.selected=!0),d.remove(r)}}else if(r.isFromTemplate&&r.buttons){var{msgUnsyncedButtonReplyMsgs:f}=i;if(null==f)return"continue";var m=f.get(r.id);m&&(m.unsyncedButtonReplies.forEach((e=>{var t=(0,_.default)(r.buttons,"msg.buttons").get("".concat((0,_.default)(e.selectedIndex,"replyMsg.selectedIndex")));t&&(t.selected=!0)})),m.unsyncedButtonReplies.delete())}},r=0;r<e.length;r++)a(r)}_syncQuickReplyButtonClickState(e){for(var t=this,a=function(a){var r=e[a];if(!r)return"continue";if(r.type===l.default.MSG_TYPE.BUTTONS_RESPONSE&&null!=r.selectedButtonId&&r.sender.equals((0,h.getMaybeMeUser)())){var i=r.quotedMsgObj();if(!i)return"continue";var s=t.get(i.id);if(s&&s.replyButtons){var n=s.replyButtons.get(r.selectedButtonId);n&&(n.selected=!0)}}},r=0;r<e.length;r++)a(r)}getStarred(e,t,a,r){var i={count:"number"!=typeof t||isNaN(t)?l.default.PAGE_SIZE:t,chat:e||void 0,remote:a&&a.remote,id:a&&a.id,fromMe:a&&a.fromMe,participant:a&&a.participant,media:r?"gif":void 0},s={add:"search"};return(0,c.msgFindQuery)("star",i).then((e=>{var t=e.status;return e.status>=400?(499===t?__LOG__(2)(U()):__LOG__(3)(G(),t),Promise.reject(t)):this.processMultipleMessages(void 0,e,s)}))}getMessagesById(e){return(0,c.msgFindByIds)(e).then((e=>Promise.props({messages:this.processMultipleMessages(void 0,e,{add:"search"}),eof:!0,canceled:!1})))}queryVcard(e){return(0,c.queryVcard)(e).then((e=>499===e.status?(__LOG__(2)(F()),Promise.reject(new u.E499)):this.processMultipleMessages(void 0,e,{add:"search"})))}incrementalStarredUpdate(e){return this.processMultipleMessages(void 0,e,{add:"search"})}search(e,t=1,a,r,i={}){var s="".concat(e,"__").concat(i.label||i.kind||"");if(1!==t||r)return this._search(e,t,a,r,i.label,i.kind);var n=this.ftsCache[s];if(n)return n;var o=this._search(e,t,a,r,i.label,i.kind);this.ftsCache[s]=o;var d=()=>{this.ftsCache[s]=null};return setTimeout(d,l.default.FTS_TTL),o.catch(d),o}_search(e,t,a,r,i,s){var n={searchTerm:e,page:(0,E.isNumber)(t)&&0!==t?t:1,count:(0,E.isNumber)(a)&&0!==a?a:l.default.PAGE_SIZE,remote:r,tagToCancel:r?this.pendingSearchTag:void 0,label:i,kind:s},o={add:"search"};return(0,c.msgFindQuery)("search",n,void 0,this.onSearchTag).then((e=>{if(n.tagToCancel===this.pendingSearchTag&&(this.pendingSearchTag=void 0),499===e.status)return Promise.props({messages:Promise.resolve([]),eof:!1,canceled:!0});if(404===e.status)return Promise.reject(new u.E404);if(e.status>=400)return __LOG__(3)(x(),e.status),Promise.reject(e.status);var t=Array.isArray(e)?e:e.messages,a=!!Array.isArray(e)||e.eof;return Promise.props({messages:this.processMultipleMessages(void 0,t,o),eof:a,canceled:!1})}))}queryMedia(e,t,a,r,i){var s={remote:e,count:(0,E.isNumber)(t)&&0!==t?t:l.default.PAGE_SIZE,id:r&&r.id,fromMe:r&&r.fromMe,participant:r&&r.participant,direction:a||"before",media:i},n={add:"search"};return(0,c.msgFindQuery)("media",s).then((e=>e.status>=400?(__LOG__(3)(k(),e.status),Promise.reject(e.status)):i?this.processMultipleMessages(void 0,e,{add:"search"}):Promise.props({docCount:e.docCount,linkCount:e.linkCount,mediaCount:e.mediaCount,messages:this.processMultipleMessages(void 0,e.messages,n)})))}getContext(e,t,a){var r=this.get(e);if(r)return Promise.all([(0,c.msgFindQuery)("before",e,a),(0,c.msgFindQuery)("after",e,a)]).spread(((a,i)=>Array.isArray(a)&&Array.isArray(i)?(r.search=!1,Promise.all([this.processMultipleMessages(e.remote,a,{add:"before",isHistory:!0},t),this.processMultipleMessages(e.remote,i,{add:"after",isHistory:!0},t)])):(__LOG__(3)(L()),Promise.reject(a.status||i.status))));var i={add:"after",isHistory:!0};return(0,c.msgFindQuery)("after",e,a).then((a=>Array.isArray(a)?C.default.isStatusV3(a[0].id.remote)?Promise.reject("statusV3, stop querying before the msg"):this.processMultipleMessages(e.remote,a,i,t):(__LOG__(3)(R()),Promise.reject(a.status)))).then((t=>{var r=(0,_.default)(t[0],"after[0]"),i=r.id.clone();i.count=e.count+1;var s={add:"before",isHistory:!0};return Promise.all([(0,c.msgFindQuery)("before",i,a).then((t=>Array.isArray(t)?t[t.length-1].id.equals(e)?this.processMultipleMessages(e.remote,t,s,(function(){return r.msgChunk})):(__LOG__(3)(w()),Promise.reject(405)):(__LOG__(3)(D()),Promise.reject(t.status)))),Promise.resolve(t)])}))}hasSynced(){return(0,y.default)(this,l.default.COLLECTION_HAS_SYNCED)}delete(){super.delete(),this.lastReceivedReceipt={},this.lastReceivedPaymentTransaction={},this.preAck={}}getKeysForResyncReceipts(){var e=[],t=(0,s.default)((0,s.default)({},this.lastReceivedReceipt),this.lastReceivedPaymentTransaction);for(var r in t){var i=(0,T.createWid)(r),n=a(43334).default.get(i),o=void 0;if(n&&(o=n.getFirstMsgWithStatus()),o){var l=o.id;l.t=this.lastReceivedReceipt[i]||o.t||0,l.payT=this.lastReceivedPaymentTransaction[i],e.push(l)}else __LOG__(3)(N(),i.toString())}return e}resyncReceipts(){__LOG__(2)(O());var e=this.getKeysForResyncReceipts();return 0===e.length?Promise.resolve():S.default.resyncReceipts(e).then((e=>{Array.isArray(e)?(__LOG__(2)(I()),e.forEach((e=>{this.updateLastReceipt(e.id,e.t),this.updateLastTransactionTime(e.id,e.payT),e.acks.forEach((t=>{var{id:a,fromMe:r,participant:i,status:s,t:n}=t;if(null!=a&&null!=r&&null!=s){var o=new m.default({fromMe:r,remote:e.id,id:a,participant:i}),l=this.get(o);l&&(l.isEphemeral&&n?l.updateEphemeralStartTimestamp(n):l.updateAck(s))}else __LOG__(3)(A(),JSON.stringify(t))})),e.msgs.length>0&&this.processMultipleMessages(e.id,e.msgs,{update:!0,isHistory:!1}).catchType(u.LogoutDrop,(()=>{}))}))):__LOG__(3)(P())})).catchTypes3(u.LogoutDrop,u.EphemeralDrop,u.BrowserReplacedDrop,(()=>{})).catch((e=>{throw __LOG__(3)(b(),String(e),e?e.stack:"no stack"),new Error("Msg:resyncReceipts dropped")}))}updateLastReceipt(e,t){var a=this.lastReceivedReceipt[e];t&&(!a||t>a)&&(this.lastReceivedReceipt[e]=t)}updateLastTransactionTime(e,t){var a=this.lastReceivedPaymentTransaction[e];t&&(!a||t>a)&&(this.lastReceivedPaymentTransaction[e]=t)}processMultipleMessages(e,t,a,r){var i=()=>(0,v._processMultipleMessages)(e,t,a,r);if(e){var s,n=this.pendingAdd[e];return(s=n?n.then(i):i()).finally((()=>{e&&this.pendingAdd[e]===s&&(this.pendingAdd[e]=null)})).catch((()=>{})),this.pendingAdd[e]=s}return i()}markAllAsStale(){this.forEach((e=>e.unset("recvFresh")))}}t.MsgCollection=V,V.model=f.default;var H=new V;t.default=H},39035:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ParticipantCollection=t.MsgInfoParticipant=void 0;var s=i(a(61247)),n=r(a(95847)),o=r(a(7470)),l=r(a(74460)),d=r(a(77865)),u=r(a(68384));class c extends s.default{constructor(...e){super(...e),this.id=(0,s.prop)(),this.t=(0,s.prop)(),this.contact=(0,s.session)()}initialize(){super.initialize(),this.addChild("contact",o.default.gadd(this.id))}}c.Proxy="msgInfoParticipant",c.idClass=u.default;var h=(0,s.defineModel)(c);t.MsgInfoParticipant=h;class f extends n.default{}t.ParticipantCollection=f,f.model=h,f.comparator=(e,t)=>(0,l.default)(e.contact,t.contact);class p extends s.default{constructor(...e){super(...e),this.id=(0,s.prop)(),this.usePlayReceipt=(0,s.prop)(),this.playedRemaining=(0,s.prop)(0),this.readRemaining=(0,s.prop)(0),this.deliveryRemaining=(0,s.prop)(0),this.played=(0,s.collection)(f),this.read=(0,s.collection)(f),this.delivery=(0,s.collection)(f),this.settled=(0,s.derived)(this._settled,["usePlayReceipt","playedRemaining","readRemaining"])}_settled(){return this.usePlayReceipt?!this.playedRemaining:!this.readRemaining}getCollection(){return a(92313).default}}p.Proxy="msgInfo",p.idClass=d.default;var m=(0,s.defineModel)(p);t.default=m},92313:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MsgInfoCollection=void 0;var s=i(a(54019)),n=i(a(39035)),o=a(62885),l=a(22952),d=i(a(77865)),u=r(a(12767));class c extends s.default{_initializeStaleCollection(){this.listenTo(u.default,"change:stream",(()=>{u.default.stream===u.STREAM.DISCONNECTED&&this.forEach((e=>{e.settled||e.set("stale",!0)}))}))}_find(e){var t=a(58885).default.get(e);return t?t.isSentByMe?(0,o.sendQueryMsgInfo)(t):Promise.reject("message not sent by me"):Promise.reject("No message found for id: ".concat(e))}updateInfo(e,t,a,r,i,s){var n=new d.default({from:t,to:a,id:e,participant:i}),o=new d.default({from:t,to:a,id:e}),u=this.get(n)||this.get(o);if(u)return(0,l.updateMsgInfo)(u,r,i,s)}}t.MsgInfoCollection=c,c.model=n.default,c.staleCollection=!0;var h=new c;t.default=h},84962:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.createDeviceSentMessage=function(e,t){return{deviceSentMessage:{destinationJid:t.toString({legacy:!0}),message:e}}},t.populateMessageContextInfo=function(e,t,a){if(!t&&!a)return;e.messageContextInfo={deviceListMetadata:{senderKeyHash:null==t?void 0:t.keyHash,senderTimestamp:null==t?void 0:t.timestamp,recipientKeyHash:null==a?void 0:a.keyHash,recipientTimestamp:null==a?void 0:a.timestamp}}},t.createViewOnceFutureProofMessage=v,t.createMsgProtobuf=function(e,t){var a,r=function(e){var t=e.id,a=e.toJSON();delete a.status,delete a.mimetype,delete a.height,delete a.width,delete a.recipients,delete a.chat,delete a.broadcast,delete a.ack,delete a.invis,delete a.filehash,delete a.recvFresh,delete a.mediaData,u.default.isHttp(e.clientUrl)||delete a.clientUrl;u.default.isHttp(e.deprecatedMms3Url)||delete a.deprecatedMms3Url;for(var r in a)null==a[r]&&delete a[r];var i=n.default.get(t.remote);i&&(a.conversionTuple=i.serialize());return a}(e);if(r.quotedMsg){var i=r.quotedMsg.mentionedJidList,s=Array.isArray(i)&&i.length>0?{mentionedJid:i.map(E)}:void 0;a={stanzaId:r.quotedStanzaID,remoteJid:E(r.quotedRemoteJid),participant:E(r.quotedParticipant),quotedMessage:g(r.quotedMsg,{duration:r.quotedMsg.duration,directPath:r.quotedMsg.directPath,encFilehash:r.quotedMsg.encFilehash,filehash:r.quotedMsg.filehash,height:r.quotedMsg.height,mediaKey:r.quotedMsg.mediaKey,mediaKeyTimestamp:(0,d.isNumber)(r.quotedMsg.mediaKeyTimestamp)?r.quotedMsg.mediaKeyTimestamp:void 0,mimetype:r.quotedMsg.mimetype,url:r.quotedMsg.clientUrl||r.quotedMsg.deprecatedMms3Url,width:r.quotedMsg.width},s)}}else r.quotedRemoteJid&&(a={remoteJid:E(r.quotedRemoteJid)});if(r.mentionedJidList&&r.mentionedJidList.length>0){var o=r.mentionedJidList;(a=a||{}).mentionedJid=o.map(E)}r.conversionTuple&&(a=a||{},Object.assign(a,r.conversionTuple));r.isForwarded&&((a=a||{}).isForwarded=r.isForwarded);r.forwardingScore&&((a=a||{}).forwardingScore=r.forwardingScore);r.ephemeralDuration&&((a=a||{}).expiration=r.ephemeralDuration);r.ephemeralSettingTimestamp&&((a=a||{}).ephemeralSettingTimestamp=r.ephemeralSettingTimestamp);r.ctwaContext&&((a=a||{}).externalAdReply={sourceUrl:r.ctwaContext.sourceUrl,sourceId:r.ctwaContext.sourceId,sourceType:r.ctwaContext.sourceType,body:r.ctwaContext.description,title:r.ctwaContext.title,thumbnailUrl:r.ctwaContext.thumbnailUrl,thumbnail:r.ctwaContext.thumbnail?y(r.ctwaContext.thumbnail):void 0,mediaType:r.ctwaContext.mediaType,mediaUrl:r.ctwaContext.mediaUrl});return g(r,t,a)},t.createMessageKey=function(e){return{remoteJid:E(e.to),fromMe:!0,id:e.id.id}};var i=r(a(19976)),s=a(60339),n=r(a(19744)),o=a(28703),l=r(a(18120)),d=a(11419),u=r(a(74185)),c=r(a(68384));function h(){var e=(0,i.default)(["url(deprecatedMms3Url) missing from msg type ",""]);return h=function(){return e},e}function f(){var e=(0,i.default)(["fileEncSha256 missing from msg type ",""]);return f=function(){return e},e}function p(){var e=(0,i.default)(["fileSha256 missing from msg type ",""]);return p=function(){return e},e}function m(){var e=(0,i.default)(["directPath missing from msg type ",""]);return m=function(){return e},e}function _(){var e=(0,i.default)(["invalid sticker mimetype: ",""]);return _=function(){return e},e}function v(e){return{viewOnceMessage:{message:e}}}function g(e,t={},a,r){var i=r||{},s=e.mimetype||t.mimetype||void 0,n=t.duration;switch(e.type){case"chat":"url"===e.subtype||e.quotedMsg||e.quotedRemoteJid||Array.isArray(e.mentionedJidList)&&e.mentionedJidList.length>0||e.conversionTuple||e.isForwarded||e.forwardingScore||e._isPaymentNoteMsg||e.ephemeralDuration||e.ephemeralSettingTimestamp||e.ctwaContext?i.extendedTextMessage={text:e.body,matchedText:e.matchedText,canonicalUrl:e.canonicalUrl,description:e.description,title:e.title,jpegThumbnail:y(e.thumbnail),previewType:e.richPreviewType,contextInfo:a}:i.conversation=e.body;break;case"groups_v4_invite":i.groupInviteMessage={inviteCode:e.inviteCode,inviteExpiration:parseInt(e.inviteCodeExp,10),groupJid:e.inviteGrp,groupName:e.inviteGrpName,caption:e.comment,jpegThumbnail:y(e.inviteGrpJpegThum)};break;case"sticker":if("image/webp"!==t.mimetype)throw __LOG__(3)(_(),t.mimetype),new Error("invalid sticker mimetype");i.stickerMessage={url:t.url,mimetype:t.mimetype,directPath:t.directPath||void 0,fileSha256:y(t.filehash),fileEncSha256:y(t.encFilehash),mediaKey:y(t.mediaKey),mediaKeyTimestamp:(0,d.isNumber)(t.mediaKeyTimestamp)?t.mediaKeyTimestamp:void 0,fileLength:(0,d.isNumber)(e.size)?e.size:void 0,height:e.height,width:e.width,firstFrameLength:t.firstFrameLength||void 0,firstFrameSidecar:e.firstFrameSidecar||void 0,isAnimated:t.isAnimated,contextInfo:a},S(e.type,i.stickerMessage);break;case"location":var l={degreesLatitude:parseFloat(e.lat)||void 0,degreesLongitude:parseFloat(e.lng)||void 0,jpegThumbnail:y(e.body),contextInfo:a};if(e.loc&&(0,d.isString)(e.loc)){var u=e.loc.split("\n");l.name=u[0],l.address=u[1],l.url=e.clientUrl}i.locationMessage=l;break;case"vcard":i.contactMessage={displayName:e.vcardFormattedName,vcard:e.body,contextInfo:a};break;case"multi_vcard":i.contactsArrayMessage={displayName:e.subtype,contacts:e.vcardList.map((e=>e)),contextInfo:a};break;case"image":i.imageMessage={url:t.url,mimetype:s,caption:e.caption,directPath:t.directPath||void 0,fileSha256:y(t.filehash),fileEncSha256:y(t.encFilehash),height:t.height,width:t.width,fileLength:(0,d.isNumber)(e.size)?e.size:void 0,mediaKey:y(t.mediaKey),mediaKeyTimestamp:(0,d.isNumber)(t.mediaKeyTimestamp)?t.mediaKeyTimestamp:void 0,jpegThumbnail:y(e.body),contextInfo:a,viewOnce:e.isViewOnce},S(e.type,i.imageMessage);break;case"product":i.productMessage={product:{productImage:{url:t.url,mimetype:s,caption:e.caption,directPath:t.directPath||void 0,fileSha256:y(t.filehash),fileEncSha256:y(t.encFilehash),height:t.height,width:t.width,fileLength:(0,d.isNumber)(e.size)?e.size:void 0,mediaKey:y(t.mediaKey),mediaKeyTimestamp:(0,d.isNumber)(t.mediaKeyTimestamp)?t.mediaKeyTimestamp:void 0,jpegThumbnail:y(e.body)},productId:e.productId,title:e.title,description:e.description,currencyCode:e.currencyCode,priceAmount1000:e.priceAmount1000||void 0,retailerId:e.retailerId,url:e.url,productImageCount:e.productImageCount},businessOwnerJid:e.businessOwnerJid,contextInfo:a};break;case"document":var c={url:t.url,mimetype:s,title:e.caption,directPath:t.directPath||void 0,fileSha256:y(t.filehash),fileEncSha256:y(t.encFilehash),fileName:t.filename,fileLength:(0,d.isNumber)(e.size)?e.size:void 0,mediaKey:y(t.mediaKey),mediaKeyTimestamp:(0,d.isNumber)(t.mediaKeyTimestamp)?t.mediaKeyTimestamp:void 0,jpegThumbnail:y(e.body),contextInfo:a,contactVcard:e.isVcardOverMmsDocument,thumbnailDirectPath:t.thumbnailDirectPath,thumbnailSha256:y(t.thumbnailSha256),thumbnailEncSha256:y(t.thumbnailEncSha256),thumbnailHeight:t.thumbnailHeight,thumbnailWidth:t.thumbnailWidth};(0,d.isNumber)(e.pageCount)&&!isNaN(e.pageCount)&&(c.pageCount=e.pageCount),i.documentMessage=c;break;case"ptt":case"audio":n=(0,d.isString)(n)?parseInt(n,10):n,i.audioMessage={url:t.url,mimetype:s,directPath:t.directPath||void 0,fileSha256:y(t.filehash),fileEncSha256:y(t.encFilehash),seconds:n,ptt:"ptt"===e.type,fileLength:(0,d.isNumber)(e.size)?e.size:void 0,mediaKey:y(t.mediaKey),mediaKeyTimestamp:(0,d.isNumber)(t.mediaKeyTimestamp)?t.mediaKeyTimestamp:void 0,contextInfo:a,streamingSidecar:e.streamingSidecar},S(e.type?"ptt":"audio",i.audioMessage);break;case"video":n=(0,d.isString)(n)?parseInt(n,10):n,i.videoMessage={url:t.url,mimetype:s,directPath:t.directPath||void 0,fileSha256:y(t.filehash),fileEncSha256:y(t.encFilehash),height:t.height,width:t.width,seconds:n,caption:e.caption,fileLength:(0,d.isNumber)(e.size)?e.size:void 0,mediaKey:y(t.mediaKey),mediaKeyTimestamp:(0,d.isNumber)(t.mediaKeyTimestamp)?t.mediaKeyTimestamp:void 0,jpegThumbnail:y(e.body),gifPlayback:e.isGif,gifAttribution:e.gifAttribution,contextInfo:a,streamingSidecar:e.streamingSidecar,viewOnce:e.isViewOnce},S(e.type,i.videoMessage);break;case"protocol":var h;switch(e.subtype){case"revoke":var f=e.protocolMessageKey;h={key:{remoteJid:E(f.remote),fromMe:f.fromMe,id:f.id,participant:E(f.participant)},type:o.ProtocolMessageType.REVOKE};break;case"ephemeral_setting":h={type:o.ProtocolMessageType.EPHEMERAL_SETTING,ephemeralExpiration:e.ephemeralDuration};break;case"ephemeral_sync_response":h={type:o.ProtocolMessageType.EPHEMERAL_SYNC_RESPONSE,ephemeralExpiration:e.ephemeralDuration,ephemeralSettingTimestamp:e.ephemeralSettingTimestamp};break;case"app_state_sync_key_share":h={type:o.ProtocolMessageType.APP_STATE_SYNC_KEY_SHARE,appStateSyncKeyShare:e.appStateSyncKeyShare};break;case"app_state_sync_key_request":h={type:o.ProtocolMessageType.APP_STATE_SYNC_KEY_REQUEST,appStateSyncKeyRequest:e.appStateSyncKeyRequest};break;case"app_state_fatal_exception_notification":h={type:o.ProtocolMessageType.APP_STATE_FATAL_EXCEPTION_NOTIFICATION,appStateFatalExceptionNotification:e.appStateFatalExceptionNotification}}h&&(i.protocolMessage=h);break;case"payment":var p={};p.stanzaId=e.quotedStanzaID,p.mentionedJid=e.mentionedJidList&&e.mentionedJidList.map(E),p.isForwarded=e.isForwarded,p.forwardingScore=e.forwardingScore,p.participant=E(e.quotedParticipant),e.quotedMsg&&(p.quotedMessage=g(e.quotedMsg));var m=e.paymentNoteMsg?g(Object.assign(e.paymentNoteMsg,{_isPaymentNoteMsg:!0}),p):void 0;switch(e.subtype){case"send":var C=e.paymentRequestMessageKey?{fromMe:e.paymentRequestMessageKey.fromMe,remoteJid:E(e.paymentRequestMessageKey.remote),id:e.paymentRequestMessageKey.id,participant:E(e.paymentRequestMessageKey.participant)}:void 0;i.sendPaymentMessage={requestMessageKey:C,noteMessage:m};break;case"request":i.requestPaymentMessage={amount1000:e.amount1000,expiryTimestamp:e._paymentExpiryTimestamp,requestFrom:e._paymentRequestFrom,currencyCodeIso4217:e._currencyCodeIso4217,noteMessage:m}}break;case"template_button_reply":i.templateButtonReplyMessage={selectedId:e.selectedId,selectedIndex:e.selectedIndex,selectedDisplayText:e.body,contextInfo:a};break;case"template":return"text"===e.subtype?(e.type="chat",e.title&&(e.body="*"+e.title+"*\n"+e.body)):e.type=e.subtype,g(e,t,a,i);case"list":i.listMessage=e.list;break;case"list_response":i.listResponseMessage=e.listResponse,i.listResponseMessage.contextInfo=a;break;case"buttons_response":i.buttonsResponseMessage=e.buttonsResponse,i.buttonsResponseMessage.contextInfo=a;break;case"order":e.itemCount||e.message||e.orderId||e.orderTitle||e.sellerJid||e.status||e.surface||e.thumbnail||e.token||e.totalAmount1000||e.totalCurrencyCode?i.orderMessage={itemCount:e.itemCount,message:e.message,orderId:e.orderId,orderTitle:e.orderTitle,sellerJid:e.sellerJid,status:e.status,surface:e.surface,thumbnail:y(e.thumbnail),token:e.token,totalAmount1000:e.totalAmount1000,totalCurrencyCode:e.totalCurrencyCode}:i.conversation=e.body}return!0===e.isDynamicReplyButtonsMsg&&(i=function(e,t,a){var{documentMessage:r,imageMessage:i,locationMessage:s,videoMessage:n}=e;if(t.isForwarded&&(r||i||s||n))return e;var l={buttons:!0===t.isForwarded?void 0:t.dynamicReplyButtons,footerText:t.footer,contextInfo:a};return r?(l.documentMessage=r,l.headerType=o.ButtonsMessageHeaderType.DOCUMENT,l.contentText=t.caption):i?(l.imageMessage=i,l.headerType=o.ButtonsMessageHeaderType.IMAGE,l.contentText=t.caption):s?(l.locationMessage=s,l.headerType=o.ButtonsMessageHeaderType.LOCATION,l.contentText=t.caption):n?(l.videoMessage=n,l.headerType=o.ButtonsMessageHeaderType.VIDEO,l.contentText=t.caption):t.title?(l.text=t.title,l.headerType=o.ButtonsMessageHeaderType.TEXT,l.contentText=t.body):(l.contentText=t.body,l.headerType=o.ButtonsMessageHeaderType.EMPTY),{buttonsMessage:l}}(i,e,a)),e.isViewOnce&&(i=v(i)),i}function E(e){return e instanceof c.default?e.toString({legacy:!0}):(0,d.isString)(e)?e.replace(/@c.us$/,"@s.whatsapp.net"):void 0}function y(e){return e?(0,s.decodeB64)(e):void 0}function S(e,t){l.default.supportsFeature(l.default.F.LOG_MISSING_REQUIRED_PROPERTIES)&&(null==t.directPath&&(__LOG__(2,void 0,void 0,!0)(m(),e),SEND_LOGS("outgoing-media-message-missing-direct-path")),null==t.fileSha256&&(__LOG__(2,void 0,void 0,!0)(p(),e),SEND_LOGS("outgoing-media-message-missing-file-sha")),null==t.fileEncSha256&&(__LOG__(2,void 0,void 0,!0)(f(),e),SEND_LOGS("outgoing-media-message-missing-file-enc-sha")),null==t.url&&(__LOG__(2,void 0,void 0,!0)(h(),e),SEND_LOGS("outgoing-media-message-missing-mms3-url")))}},69338:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.convertToTextWithoutSpecialEmojis=x,t.default=void 0;var s=i(a(70417)),n=i(a(19976)),o=i(a(30733)),l=a(60339),d=a(46194),u=i(a(19899)),c=r(a(52737)),h=i(a(50935)),f=a(28703),p=i(a(12396)),m=i(a(18120)),_=a(75459),v=a(11824),g=r(a(90088)),E=i(a(77865)),y=i(a(72424)),S=a(11419),C=i(a(74185)),T=i(a(68384)),M=a(75637);function b(){var e=(0,n.default)(["url(deprecatedMms3Url) is missing from msg type ",""]);return b=function(){return e},e}function P(){var e=(0,n.default)(["fileEncSha256 missing from msg type ",""]);return P=function(){return e},e}function A(){var e=(0,n.default)(["directPath missing from msg type ",""]);return A=function(){return e},e}function I(){var e=(0,n.default)(["directPath and fileEncSha256 missing from msg type ",""]);return I=function(){return e},e}function O(){var e=(0,n.default)(["parseGroupInviteMessageProto: not supported"]);return O=function(){return e},e}function N(){var e=(0,n.default)(["parseRequestPaymentMessageProto: not supported"]);return N=function(){return e},e}function w(){var e=(0,n.default)(["parseSendPaymentMessageProto: not supported"]);return w=function(){return e},e}function D(){var e=(0,n.default)(["parseLiveLocationMessageProto: not supported"]);return D=function(){return e},e}function R(){var e=(0,n.default)(["parseContextInfoProto: payment not supported"]);return R=function(){return e},e}function L(){var e=(0,n.default)(["drop: not Message"]);return L=function(){return e},e}var k=(0,o.default)((function(e){if((0,v.isConnectedToPage)())return C.default.hostname(e);if(!e)return"";var t=C.default.isHttp(e)?e:"http://"+e;return new self.URL(t).hostname}));function x(e){return e?c.default.platform===c.PLATFORMS.ANDROID?e:p.default.convertToTextWithoutSpecialEmojis(e):e}function F(e,t){var a;m.default.supportsFeature(m.default.F.LOG_MISSING_REQUIRED_PROPERTIES)&&e.id&&("status"===(null===(a=e.id.remote)||void 0===a?void 0:a.user)&&T.default.isPSA(e.author)||e.id.fromMe||(null==t.directPath&&null==t.fileEncSha256?(__LOG__(2,void 0,void 0,!0)(I(),e.type),SEND_LOGS("media-message-missing-direct-path-and-file-enc")):null==t.directPath?(__LOG__(2,void 0,void 0,!0)(A(),e.type),SEND_LOGS("media-message-missing-direct-path")):null==t.fileEncSha256&&(__LOG__(2,void 0,void 0,!0)(P(),e.type),SEND_LOGS("media-message-missing-file-enc")),null==t.url&&(__LOG__(2,void 0,void 0,!0)(b(),e.type),SEND_LOGS("media-message-missing-mms3-url"))))}var G={parseMsgProto:function(e,t,a,r,i,s){if(!e)return __LOG__(4,void 0,new Error,!0)(L()),SEND_LOGS("null-message"),t;var{conversation:n,imageMessage:o,contactMessage:l,locationMessage:d,liveLocationMessage:u,extendedTextMessage:c,documentMessage:f,audioMessage:p,videoMessage:_,stickerMessage:v,contactsArrayMessage:g,protocolMessage:E,sendPaymentMessage:C,requestPaymentMessage:T,productMessage:M,groupInviteMessage:b,viewOnceMessage:P,ephemeralMessage:A,templateMessage:I,templateButtonReplyMessage:O,orderMessage:N,listMessage:w,listResponseMessage:D,buttonsResponseMessage:R,buttonsMessage:k}=e,x=void 0;return(0,S.isString)(n)&&this.parseConversationProto(t,n),b&&this.parseGroupInviteMessageProto(t,b),o&&(this.parseImageMessageProto(t,o),x=o.contextInfo),v&&(this.parseStickerMessageProto(t,v),x=v.contextInfo),l&&(this.parseContactMessageProto(t,l),x=l.contextInfo),g&&(this.parseContactsArrayMessageProto(t,g),x=g.contextInfo),d&&(this.parseLocationMessageProto(t,d),x=d.contextInfo),u&&(this.parseLiveLocationMessageProto(t,u,i),x=u.contextInfo),C&&(x=C&&C.noteMessage&&C.noteMessage.extendedTextMessage&&C.noteMessage.extendedTextMessage.contextInfo,this.parseSendPaymentMessageProto(t,C,r)),T&&(x=T&&T.noteMessage&&T.noteMessage.extendedTextMessage&&T.noteMessage.extendedTextMessage.contextInfo,this.parseRequestPaymentMessageProto(t,T,r)),c&&(this.parseExtendedTextMessageProto(t,c),x=c.contextInfo),f&&(this.parseDocumentMessageProto(t,f),x=f.contextInfo),p&&(this.parseAudioMessageProto(t,p),x=p.contextInfo),_&&(this.parseVideoMessageProto(t,_),x=_.contextInfo),E&&this.parseProtocolMessageProto(t,E,a),M&&(this.parseProductMessageProto(t,M),x=M.contextInfo),b&&this.parseGroupInviteMessageProto(t,b),N&&(this.parseOrderMessageProto(t,N),x=N.contextInfo),w&&this.parseListMessageProto(t,w),D&&(this.parseListResponseMessageProto(t,D),x=D.contextInfo),P&&this.parseViewOnceFutureProofMessageProto(t,P),A&&this.parseEphemeralFutureProofMessageProto(t,A),k&&this.parseButtonsMessageProto(t,k),R&&(this.parseButtonsResponseMessageProto(t,R),x=R.contextInfo),m.default.supportsFeature(m.default.F.MD_BACKEND),I&&(m.default.supportsFeature(m.default.F.MD_BACKEND)&&I.hydratedTemplate?this.parseTemplateMessage(t,I.hydratedTemplate):this.parseTemplateMessage(t,I.hydratedFourRowTemplate)),O&&(this.parseTemplateButtonReplyMessage(t,O),x=O.contextInfo,t.type=h.default.MSG_TYPE.TEMPLATE_BUTTON_REPLY),x&&(this.parseContextInfoProto(t,x,s),x.externalAdReply&&y.default.ctwaContextRender&&this.parseCtwaContextProto(t,x.externalAdReply)),t},parseConversationProto:function(e,t){e.type=h.default.MSG_TYPE.CHAT,e.body=x(t)},parseImageMessageProto:function(e,t){e.type=h.default.MSG_TYPE.IMAGE,e.deprecatedMms3Url=this.decodeUrl(t.url),e.directPath=t.directPath||"",e.mimetype=t.mimetype||"",e.caption=x(t.caption),e.filehash=this.decodeBytes(t.fileSha256),e.encFilehash=this.decodeBytes(t.fileEncSha256),e.size=t.fileLength||0,e.height=t.height||0,e.width=t.width||0,e.mediaKey=this.decodeBytes(t.mediaKey),e.mediaKeyTimestamp=null!=t.mediaKeyTimestamp?t.mediaKeyTimestamp:u.default.globalUnixTime(),e.body=this.decodeBytes(t.jpegThumbnail)||"",e.interactiveAnnotations=t.interactiveAnnotations,e.scanLengths=t.scanLengths,e.scansSidecar=t.scansSidecar,e.isViewOnce=!0===t.viewOnce,e.thumbnailDirectPath=t.thumbnailDirectPath,e.thumbnailSha256=this.decodeBytes(t.thumbnailSha256),e.thumbnailEncSha256=this.decodeBytes(t.thumbnailEncSha256),F(e,t)},parseStickerMessageProto:function(e,t){e.type=h.default.MSG_TYPE.STICKER,e.deprecatedMms3Url=this.decodeUrl(t.url),e.directPath=t.directPath||"",e.mimetype=t.mimetype||"",e.filehash=this.decodeBytes(t.fileSha256),e.encFilehash=this.decodeBytes(t.fileEncSha256),e.mediaKey=this.decodeBytes(t.mediaKey),e.mediaKeyTimestamp=null!=t.mediaKeyTimestamp?t.mediaKeyTimestamp:u.default.globalUnixTime(),e.height=t.height||0,e.width=t.width||0,e.firstFrameLength=t.firstFrameLength,e.firstFrameSidecar=t.firstFrameSidecar,e.isAnimated=t.isAnimated,F(e,t)},parseContactMessageProto:function(e,t){e.type=h.default.MSG_TYPE.VCARD,e.vcardFormattedName=t.displayName,e.body=t.vcard},parseContactsArrayMessageProto:function(e,t){var a=t.contacts;e.type=h.default.MSG_TYPE.MULTI_VCARD,e.vcardFormattedName=t.displayName,e.vcardList=Array.isArray(a)?a.map((e=>({displayName:e.displayName,vcard:e.vcard}))):[]},parseLocationMessageProto:function(e,t){var a=t.name&&t.address?"".concat(t.name,"\n").concat(t.address):t.name||t.address||"";e.type=h.default.MSG_TYPE.LOCATION,e.lat=void 0!==t.degreesLatitude?t.degreesLatitude:void 0,e.lng=void 0!==t.degreesLongitude?t.degreesLongitude:void 0,e.loc=a,e.body=this.decodeBytes(t.jpegThumbnail)||"",e.clientUrl=t.url},parseExtendedTextMessageProto:function(e,t){var a=t.matchedText||t.canonicalUrl||t.description||t.title;if(a){var r=k(t.canonicalUrl||""),i=k(t.matchedText||"");e.canonicalUrl=r===i||""===r?t.canonicalUrl:i}e.type=h.default.MSG_TYPE.CHAT,e.subtype=a?"url":void 0,e.body=x(t.text||""),e.matchedText=t.matchedText,e.description=t.description,e.title=t.title,e.thumbnail=this.decodeBytes(t.jpegThumbnail)||"",e.richPreviewType=t.previewType,e.doNotPlayInline=t.doNotPlayInline,e.textColor=t.textArgb,e.backgroundColor=t.backgroundArgb;var s=f.ExtendedTextMessageFontType;if(null!=t.font)switch(t.font){case s.SANS_SERIF:case s.SERIF:case s.NORICAN_REGULAR:case s.BRYNDAN_WRITE:case s.BEBASNEUE_REGULAR:case s.OSWALD_HEAVY:e.font=t.font}},parseDocumentMessageProto:function(e,t){e.type=h.default.MSG_TYPE.DOCUMENT,e.deprecatedMms3Url=this.decodeUrl(t.url),e.directPath=t.directPath,e.mimetype=t.mimetype,e.filehash=this.decodeBytes(t.fileSha256),e.encFilehash=this.decodeBytes(t.fileEncSha256),e.size=t.fileLength||0,e.pageCount=t.pageCount||0,e.mediaKey=this.decodeBytes(t.mediaKey),e.mediaKeyTimestamp=null!=t.mediaKeyTimestamp?t.mediaKeyTimestamp:u.default.globalUnixTime(),e.filename=(0,d.cleanIncomingFilename)(t.fileName||t.title),e.caption=e.filename,e.body=this.decodeBytes(t.jpegThumbnail)||"",e.isVcardOverMmsDocument=Boolean(t.contactVcard)&&e.size<=1024*y.default.vcardMaxSizeKb,e.thumbnailDirectPath=t.thumbnailDirectPath,e.thumbnailSha256=this.decodeBytes(t.thumbnailSha256),e.thumbnailEncSha256=this.decodeBytes(t.thumbnailEncSha256),e.thumbnailHeight=t.thumbnailHeight,e.thumbnailWidth=t.thumbnailWidth},parseAudioMessageProto:function(e,t){e.type=t.ptt?h.default.MSG_TYPE.PTT:h.default.MSG_TYPE.AUDIO,e.deprecatedMms3Url=this.decodeUrl(t.url),e.directPath=t.directPath,e.mimetype=t.mimetype,e.filehash=this.decodeBytes(t.fileSha256),e.encFilehash=this.decodeBytes(t.fileEncSha256),e.size=t.fileLength||0,e.duration="".concat(t.seconds||0),e.mediaKey=this.decodeBytes(t.mediaKey),e.mediaKeyTimestamp=null!=t.mediaKeyTimestamp?t.mediaKeyTimestamp:u.default.globalUnixTime(),e.streamingSidecar=t.streamingSidecar,F(e,t)},parseVideoMessageProto:function(e,t){e.type=h.default.MSG_TYPE.VIDEO,e.deprecatedMms3Url=this.decodeUrl(t.url),e.directPath=t.directPath,e.mimetype=t.mimetype,e.filehash=this.decodeBytes(t.fileSha256),e.encFilehash=this.decodeBytes(t.fileEncSha256),e.size=t.fileLength||0,e.height=t.height,e.width=t.width,e.duration="".concat(t.seconds||0),e.mediaKey=this.decodeBytes(t.mediaKey),e.mediaKeyTimestamp=null!=t.mediaKeyTimestamp?t.mediaKeyTimestamp:u.default.globalUnixTime(),e.caption=x(t.caption),e.body=this.decodeBytes(t.jpegThumbnail)||"",e.isGif=t.gifPlayback,e.gifAttribution=t.gifAttribution,e.streamingSidecar=t.streamingSidecar,e.interactiveAnnotations=t.interactiveAnnotations,e.isViewOnce=!0===t.viewOnce,e.thumbnailDirectPath=t.thumbnailDirectPath,e.thumbnailSha256=this.decodeBytes(t.thumbnailSha256),e.thumbnailEncSha256=this.decodeBytes(t.thumbnailEncSha256),F(e,t)},parseContextInfoProto:function(e,t,a){var r=t.quotedMessage,i=t.mentionedJid;e.quotedMsg=r&&this.parseMsgProto(r,{type:h.default.MSG_TYPE.UNKNOWN}),e.quotedMsg&&"payment"===e.quotedMsg.type&&a&&__LOG__(2)(R()),e.quotedStanzaID=t.stanzaId,e.quotedParticipant=this.decodeJid(t.participant),e.quotedRemoteJid=this.decodeJid(t.remoteJid),e.mentionedJidList=Array.isArray(i)?i.map(this.decodeJid):i,e.isForwarded=t.isForwarded,e.forwardingScore=t.forwardingScore,null!=t.expiration&&(e.ephemeralDuration=t.expiration),null!=t.ephemeralSettingTimestamp&&(e.ephemeralSettingTimestamp=t.ephemeralSettingTimestamp),null!=t.ephemeralSharedSecret&&(e.ephemeralSharedSecret=t.ephemeralSharedSecret)},parseCtwaContextProto:function(e,t){var a=g.findLink((null==t?void 0:t.sourceUrl)||"",!1,e.from);e.ctwaContext={sourceUrl:t.sourceUrl,description:t.body,title:null==t?void 0:t.title,thumbnail:t.thumbnail?this.decodeBytes(t.thumbnail):null,thumbnailUrl:t.thumbnailUrl,mediaType:t.mediaType,mediaUrl:t.mediaUrl,isSuspiciousLink:a&&a.suspiciousCharacters&&a.suspiciousCharacters.size>0}},_getMsgKey:function(e,t){if(!e)throw new Error("parseProtocolMessageProto: no message key is defined for protocol message");var{id:a}=e;if(!a)throw new Error("parseProtocolMessageProto: no message id is defined for protocol message");return m.default.supportsFeature(m.default.F.MD_BACKEND)?new E.default({id:a,fromMe:t.id.fromMe,remote:t.id.remote,participant:t.id.participant}):new E.default({id:a,fromMe:e.fromMe,remote:this.decodeJid(e.remoteJid),participant:this.decodeJid(e.participant)})},parseProtocolMessageProto:function(e,t,a){if("relay"===a||t.type===f.ProtocolMessageType.EPHEMERAL_SETTING){var{key:r,type:i}=t,s=null;if(e.type=h.default.MSG_TYPE.PROTOCOL,null!=i)switch(i){case f.ProtocolMessageType.REVOKE:s=this._getMsgKey(r,e),e.protocolMessageKey=s,e.subtype="revoke";break;case f.ProtocolMessageType.EPHEMERAL_SETTING:e.subtype="ephemeral_setting",e.ephemeralDuration=t.ephemeralExpiration;break;case f.ProtocolMessageType.EPHEMERAL_SYNC_RESPONSE:e.subtype="ephemeral_sync_response",e.ephemeralDuration=t.ephemeralExpiration,e.ephemeralSettingTimestamp=t.ephemeralSettingTimestamp;break;case f.ProtocolMessageType.HISTORY_SYNC_NOTIFICATION:e.subtype="history_sync_notification";var{historySyncNotification:n}=t;if(n){var o={directPath:n.directPath,encFilehash:this.decodeBytes(n.fileEncSha256),filehash:this.decodeBytes(n.fileSha256),mediaKey:this.decodeBytes(n.mediaKey),type:"md-msg-hist"};e.historySyncMetaData={historySyncNotification:t.historySyncNotification,downloadOptions:o}}break;case f.ProtocolMessageType.APP_STATE_SYNC_KEY_REQUEST:case f.ProtocolMessageType.APP_STATE_SYNC_KEY_SHARE:case f.ProtocolMessageType.MSG_FANOUT_BACKFILL_REQUEST:case f.ProtocolMessageType.INITIAL_SECURITY_NOTIFICATION_SETTING_SYNC:case f.ProtocolMessageType.APP_STATE_FATAL_EXCEPTION_NOTIFICATION:e.subtype="unknown"}}},decodeJid:function(e){return T.default.isWid(e)?(0,M.createWid)(e):e},decodeUrl:function(e){return e&&!e.includes("/u/")?e:void 0},decodeBytes:function(e){return e?(0,l.encodeB64)(e):void 0},parseTemplateMessage:function(e,t){var{documentMessage:a,imageMessage:r,locationMessage:i,videoMessage:s}=t;e.isFromTemplate=!0,a?this.parseDocumentMessageProto(e,a):r?this.parseImageMessageProto(e,r):i?this.parseLocationMessageProto(e,i):s?this.parseVideoMessageProto(e,s):(e.type=h.default.MSG_TYPE.CHAT,t.hydratedContentText&&(e.body=x(t.hydratedContentText))),t.hydratedButtons&&this.parseButtons(e,t),t.hydratedContentText&&(e.caption=x(t.hydratedContentText)),t.hydratedFooterText&&(e.footer=x(t.hydratedFooterText)),t.hydratedTitleText&&(e.title=x(t.hydratedTitleText))},parseButtons:function(e,t){var{hydratedButtons:a}=t;a.length&&(e.hydratedButtons=a)},parseTemplateButtonReplyMessage:function(e,t){e.body=x(t.selectedDisplayText),e.selectedIndex=t.selectedIndex,e.selectedId=t.selectedId},parseProductMessageProto:function(e,t){var{product:a}=t;a&&(a.productImage&&this.parseImageMessageProto(e,a.productImage),e.type=h.default.MSG_TYPE.PRODUCT,e.businessOwnerJid=t.businessOwnerJid,e.contextInfo=t.contextInfo,e.productId=a.productId,e.currencyCode=a.currencyCode,e.priceAmount1000=a.priceAmount1000,e.retailerId=a.retailerId,e.url=a.url,e.productImageCount=a.productImageCount,e.title=a.title,e.description=a.description)},parseLiveLocationMessageProto:function(){__LOG__(2)(D())},parseSendPaymentMessageProto:function(){__LOG__(2)(w())},parseRequestPaymentMessageProto:function(){__LOG__(2)(N())},parseGroupInviteMessageProto:function(){__LOG__(2)(O())},parseOrderMessageProto:function(e,t){e.type=h.default.MSG_TYPE.ORDER,e.thumbnail=this.decodeBytes(t.thumbnail),e.message=t.message||"",e.orderId=t.orderId,e.itemCount=t.itemCount||0,e.status=t.status,e.surface=t.surface,e.sellerJid=t.sellerJid,e.orderTitle=t.orderTitle||"",e.token=t.token||"",e.totalAmount1000=t.totalAmount1000,e.totalCurrencyCode=t.totalCurrencyCode,e.body=""},parseListMessageProto:function(e,t){var a;y.default.webListMessage&&t.listType===f.ListMessageListType.SINGLE_SELECT||(0,_.productListMessagesEnabled)()&&t.listType===f.ListMessageListType.PRODUCT_LIST?(e.type=h.default.MSG_TYPE.LIST,e.list=t,e.footer=t.footerText,t.listType===f.ListMessageListType.PRODUCT_LIST&&(e.businessOwnerJid=null===(a=t.productListInfo)||void 0===a?void 0:a.businessOwnerJid)):(t.listType===f.ListMessageListType.PRODUCT_LIST&&(0,_.productListMessageFallbackEnabled)()&&(e.subtype="phone_only_feature"),e.type=h.default.MSG_TYPE.UNKNOWN)},parseListResponseMessageProto:function(e,t){if(y.default.webListMessage&&t.listType===f.ListResponseMessageListType.SINGLE_SELECT){e.type=h.default.MSG_TYPE.LIST_RESPONSE,e.listResponse=t;var a=t.title||"";t.description&&(a+="\n"+t.description),e.body=x(a)}},parseButtonsResponseMessageProto:function(e,{selectedDisplayText:t,selectedButtonId:a,type:r}){(0,_.buttonsMessagesEnabled)()&&r===f.ButtonsResponseMessageType.DISPLAY_TEXT?(e.type=h.default.MSG_TYPE.BUTTONS_RESPONSE,e.selectedButtonId=a,e.body=x(t)):e.type=h.default.MSG_TYPE.UNKNOWN},parseViewOnceFutureProofMessageProto:function(e,t){y.default.viewOnceRead?this.parseMsgProto(t.message,e):(e.type=h.default.MSG_TYPE.UNKNOWN,e.subtype="phone")},parseEphemeralFutureProofMessageProto:function(e,t){y.default.ephemeralMessages?this.parseMsgProto(t.message,e):(e.type=h.default.MSG_TYPE.UNKNOWN,e.subtype="phone")},parseButtonsMessageProto:function(e,t){if((0,_.buttonsMessagesEnabled)()){var{documentMessage:a,imageMessage:r,locationMessage:i,videoMessage:n,contentText:o,footerText:l,text:d,buttons:u,headerType:c}=t;[f.ButtonsMessageHeaderType.EMPTY,f.ButtonsMessageHeaderType.TEXT,f.ButtonsMessageHeaderType.DOCUMENT,f.ButtonsMessageHeaderType.IMAGE,f.ButtonsMessageHeaderType.VIDEO,f.ButtonsMessageHeaderType.LOCATION].includes(c)?(r?this.parseImageMessageProto(e,r):a?this.parseDocumentMessageProto(e,a):i?this.parseLocationMessageProto(e,(0,s.default)((0,s.default)({},i),{},{name:void 0,address:void 0})):n?this.parseVideoMessageProto(e,n):(e.type=h.default.MSG_TYPE.CHAT,o&&(e.body=x(o)),d&&(e.title=x(d))),e.isDynamicReplyButtonsMsg=!0,null!=c&&(e.headerType=c),u&&(e.dynamicReplyButtons=u),o&&(e.caption=x(o)),l&&(e.footer=x(l))):e.type=h.default.MSG_TYPE.UNKNOWN}else e.type=h.default.MSG_TYPE.UNKNOWN}};t.default=G},57556:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.typeIsMms=function(e){return"image"===e.type||"video"===e.type||"audio"===e.type||"ptt"===e.type||"sticker"===e.type||"document"===e.type||"product"===e.type||"protocol"===e.type&&"history_sync_notification"===e.subtype},t.msgMatchesType=function(e,t){switch(t){case"text":return e.type===l.default.MSG_TYPE.CHAT&&"url"!==e.subtype;case"image":return e.type===l.default.MSG_TYPE.IMAGE;case"video":return e.type===l.default.MSG_TYPE.VIDEO&&!e.isGif;case"gif":return e.type===l.default.MSG_TYPE.VIDEO&&e.isGif;case"audio":return e.type===l.default.MSG_TYPE.AUDIO;case"ptt":return e.type===l.default.MSG_TYPE.PTT;case"document":return e.type===l.default.MSG_TYPE.DOCUMENT;case"location":return e.type===l.default.MSG_TYPE.LOCATION;case"vcard":return e.type===l.default.MSG_TYPE.VCARD||e.type===l.default.MSG_TYPE.MULTI_VCARD;case"url":return e.type===l.default.MSG_TYPE.CHAT&&"url"===e.subtype;case"sticker":return e.type===l.default.MSG_TYPE.STICKER;case void 0:default:return!1}},t.createQuotedMsg=function(e){if(!e)return null;var t=new m.default({from:e.from,to:e.to,id:e.id,participant:e.participant,selfDir:e.self});return e.id=t,new(0,a(27e3).default)(e).safe()},t.getOriginalQuotedMsgIfPossible=function(e,t){var a;if(!e)return e;var r=null===(a=t.get(e.id))||void 0===a?void 0:a.safe();return r&&!r.asRevoked?r:e},t.listMsgCanRender=function(e){var t;return(null===(t=e.list)||void 0===t?void 0:t.listType)!==d.ListMessageListType.PRODUCT_LIST||(0,h.productListMessagesEnabled)()&&!_.default.webProductListMessageRenderKillSwitch},t.getBroadcastFanoutKeys=C,t.broadcastFanout=function(e){var t;if(!e.invis){var r=C(e);r&&(t=r.map((e=>e.remote)),r.forEach((t=>{var r=a(58885).default;if(!r.some((0,n.default)({id:t}))){var i=P(e);i.to=t.remote,i.id=t,i.broadcast=!0;var s=r.add(i,{merge:!0});a(43334).default.find(t.remote).then((function(e){_.default.ephemeralMessages&&s.forEach((t=>{if(t.type!==l.default.MSG_TYPE.PROTOCOL){e.isEphemeralSettingOn()&&(t.ephemeralDuration=e.getEphemeralSetting());var a=e.getEphemeralSettingTimestamp();null!=a&&(t.ephemeralSettingTimestamp=a)}})),T(s,e,!0)}))}})))}return t},t.addRecordsToChat=T,t.isNotification=function(e,t){switch(e){case l.default.MSG_TYPE.GROUP_NOTIFICATION:case l.default.MSG_TYPE.GP2:case l.default.MSG_TYPE.BROADCAST_NOTIFICATION:case l.default.MSG_TYPE.NOTIFICATION:case l.default.MSG_TYPE.NOTIFICATION_TEMPLATE:case l.default.MSG_TYPE.E2E_NOTIFICATION:case l.default.MSG_TYPE.CALL_LOG:return!0;case l.default.MSG_TYPE.PROTOCOL:return"ephemeral_setting"===t;default:return!1}},t.eventTypeFromMsgType=function(e){var t,a,r=e.type,i=e.subtype,s=(0,c.getMaybeMeUser)();t=r===l.default.MSG_TYPE.GP2||r===l.default.MSG_TYPE.GROUP_NOTIFICATION?"subject"===i?"n":"add"===i||"invite"===i?e.recipients&&v.default.equals(a,s)?"s":"i":"remove"===i?e.recipients&&v.default.equals(a,s)?"n":"i":"create"===i?"n":"i":r===l.default.MSG_TYPE.BROADCAST_NOTIFICATION||r===l.default.MSG_TYPE.NOTIFICATION||r===l.default.MSG_TYPE.E2E_NOTIFICATION?"create"===i?"n":"i":r===l.default.MSG_TYPE.GROUPS_V4_INVITE&&e.from.equals(s)?"i":r===l.default.MSG_TYPE.CALL_LOG?"n":e.broadcast?v.default.isBroadcast(e.id.remote)?"n":"i":r===l.default.MSG_TYPE.REVOKED?"i":v.default.isPSA(e.id.remote)?e.ack===l.default.ACK.RECEIVED?"d":"a":r===l.default.MSG_TYPE.CIPHERTEXT||r===l.default.MSG_TYPE.OVERSIZED?"a":r===l.default.MSG_TYPE.NOTIFICATION_TEMPLATE||r===l.default.MSG_TYPE.PROTOCOL&&"ephemeral_setting"===i?"i":"d";return t};var i=r(a(19976)),s=r(a(72960)),n=r(a(45126)),o=r(a(16760)),l=r(a(50935)),d=a(28703),u=a(19741),c=a(95595),h=a(75459),f=r(a(80737)),p=a(57525),m=r(a(77865)),_=r(a(72424)),v=r(a(68384));function g(){var e=(0,i.default)(["setRecords LogoutDrop: ",""]);return g=function(){return e},e}function E(){var e=(0,i.default)(["models:msg:store:resetMostRecentMsgs .msgs === cmc !"]);return E=function(){return e},e}function y(){var e=(0,i.default)(["model:msgs:broadcastFanout no group_metadata rec for bclist, cant fanout: ",""]);return y=function(){return e},e}function S(){var e=(0,i.default)(["model:msgs:broadcastFanout: unknown msgOrKey: ",""]);return S=function(){return e},e}function C(e){var t,r,i;if(e instanceof a(27e3).default)r=e,i=e.id;else{if(!(e instanceof m.default))return void __LOG__(3)(S(),String(e));i=e}if(!v.default.isStatusV3(i.remote)){if(r&&r.recipients&&0!==r.recipients.length)t=r.recipients;else{var s=a(99922).default.get(i.remote);s?t=(0,o.default)(P(s.participants),"id"):__LOG__(2)(y(),i.remote.toString())}return t?t.map((e=>new m.default({fromMe:i.fromMe,remote:e,id:i.id}))):void 0}}function T(e,t,r,i,s,n){var o=i||t.msgs;if(0!==e.length){var l=o===t.msgs;if(n)if(l)__LOG__(2)(E()),M(t,o,e);else l=!0,M(t,o,e).then((()=>{var e=new(0,a(90980).default);e.replace(t.msgs),t.msgChunks.push(e),t.replaceMsgsCollection(o),t.msgs.trigger("change:last",t.msgs.last())}));else r?l?M(t,o,e):b(o,e):b(o,e,{at:0,silent:e.every(A)});var d=a(58885).default;if(r&&l||!d.lastReceivedReceipt[t.id])for(var u=e.length-1;u>=0;u--){var c=e[u],h=c.id;if(h.fromMe&&!c.isNotification){d.updateLastReceipt(h.remote,c.t);break}}if(r&&l||!d.lastReceivedPaymentTransaction[t.id])for(var f=e.length-1;f>=0;f--){var p=e[f],m=p.id;p.paymentTransactionTimestamp&&d.updateLastTransactionTime(m.remote,p.paymentTransactionTimestamp)}var _=s;_&&!t.unreadMsgAnchor&&(t.disableUnreadAnchor?t.disableUnreadAnchor=!1:t.unreadMsgAnchor=e.find((function(e){return e.id.toString()===_.toString()})))}}function M(e,t,a){var r=(0,s.default)(a,(e=>!!e));return r?(b(t,a),(0,p.setLastReceivedKey)(e.id,r.id).then((()=>{e.lastReceivedKey=r.id}))):Promise.resolve()}function b(e,t,a){try{e.add(t,a)}catch(e){if(!(e instanceof u.LogoutDrop))throw e;__LOG__(3)(g(),e.toString())}}function P(e){return null!=e&&"object"==typeof e?JSON.parse(JSON.stringify(e),f.default):e}function A(e){return"i"===e.eventType}},77861:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.GLOBAL_MUTE=void 0;var s=i(a(19976)),n=i(a(19034)),o=r(a(2784)),l=a(12073),d=i(a(25337)),u=r(a(61247)),c=i(a(79711)),h=r(a(96452)),f=i(a(17957)),p=a(37821),m=a(11419),_=i(a(68384));function v(){var e=(0,s.default)(["models:Mute:unmute dropped"]);return v=function(){return e},e}function g(){var e=(0,s.default)(["models:Mute:unmute ",""]);return g=function(){return e},e}function E(){var e=(0,s.default)(["models:Mute:mute dropped"]);return E=function(){return e},e}function y(){var e=(0,s.default)(["models:Mute:mute "," duration:",""]);return y=function(){return e},e}function S(){var e=(0,s.default)(["models:Mute:mute "," muted, no expiration"]);return S=function(){return e},e}function C(){var e=(0,s.default)(["models:Mute:mute called with wrong units?"," exp:",""]);return C=function(){return e},e}function T(){var e=(0,s.default)(["models:Mute:mute called with invalid expiration ",""]);return T=function(){return e},e}var M="global_mute";t.GLOBAL_MUTE=M;class b extends u.default{constructor(...e){super(...e),this.id=(0,u.prop)(),this.expiration=(0,u.prop)(0),this._unmuteTimer=(0,u.session)(),this.promises=(0,u.session)((function(){return{}})),this.isMuted=(0,u.derived)(this._isMuted,["expiration"])}_isMuted(){return!!this.expiration}initialize(){super.initialize(),null!=this.expiration&&0!==this.expiration&&this.mute(this.expiration)}setMute(e,t){(e||this.expiration)&&e!==this.expiration&&(e?this.mute(e,t):this.unmute(t))}mute(e,t,a){var r=e;if(!(0,m.isNumber)(r))return __LOG__(2)(T(),r),Promise.reject(new h.ActionError);(r=Math.round(r))>2e9&&__LOG__(2)(C(),this.id.toString(),r);var i=function(){if(this.isMuted&&(d.default.clearTimeout(this._unmuteTimer),this.unset("_unmuteTimer")),-1===r)__LOG__(2)(S(),this.id.toString());else{var e=r-(0,n.default)().unix();__LOG__(2)(y(),this.id.toString(),e),this._unmuteTimer=d.default.setGlobalTimeout(this.unmute.bind(this),1e3*r)}this.set({expiration:r})}.bind(this),s=_.default.isGroup(this.id);if(t){if(this.promises.mute)return this.promises.mute;var u=this.promises.mute=(0,p.sendConversationMute)(this.id,r,this.expiration),v=s?new l.ActionType(f.default.t(116)):new l.ActionType(f.default.t(71)),g=a||(0,l.genId)(),M=this.promises.mute.catch((()=>{__LOG__(3)(E());var e=s?f.default.t(114):f.default.t(69);throw new l.ActionType(e,{actionText:f.default.t(195),actionHandler:this.mute.bind(this,r,t,g)})})).then((e=>{if(200===e.status){var a=s?f.default.t(115):f.default.t(70);return new l.ActionType(a,{actionText:f.default.t(199),actionHandler:this.unmute.bind(this,t,g)})}if(e.status>=400)throw s?new l.ActionType(f.default.t(114)):new l.ActionType(f.default.t(69))}));return c.default.openToast(o.createElement(l.ActionToast,{id:g,initialAction:v,pendingAction:M})),u.then((function(e){200!==e.status||e._duplicate||i()})).finally((()=>{this.promises.mute=null}))}return i(),Promise.resolve()}canMute(){var e=!1;if(_.default.isGroup(this.id)){var t=a(99922).default.get(this.id);t&&(e=t.participants.iAmMember())}return e||_.default.isUser(this.id)}_clearUnmuteTimer(){d.default.clearTimeout(this._unmuteTimer),this.unset("_unmuteTimer"),this.expiration=0}unmute(e,t){var a=function(){__LOG__(2)(g(),this.id.toString()),this._clearUnmuteTimer()}.bind(this),r=_.default.isGroup(this.id);if(e){if(this.promises.unmute)return this.promises.unmute;var i=this.promises.unmute=(0,p.sendConversationMute)(this.id,0,this.expiration),s=r?new l.ActionType(f.default.t(123)):new l.ActionType(f.default.t(82)),n=t||(0,l.genId)(),d=this.promises.unmute.catch((()=>{__LOG__(3)(v());var t=r?f.default.t(121):f.default.t(80);return Promise.reject(new l.ActionType(t,{actionText:f.default.t(195),actionHandler:this.unmute.bind(this,e,n)}))})).then((e=>{if(200===e.status)return r?new l.ActionType(f.default.t(122)):new l.ActionType(f.default.t(81));if(e.status>=400)throw r?new l.ActionType(f.default.t(121)):new l.ActionType(f.default.t(80))}));return c.default.openToast(o.createElement(l.ActionToast,{id:n,initialAction:s,pendingAction:d})),i.then((function(e){200!==e.status||e._duplicate||a()})).finally((()=>{this.promises.unmute=null}))}return a(),Promise.resolve()}delete(){super.delete(),this.getCollection().remove(this.id),this._clearUnmuteTimer()}getCollection(){return a(85059).default}}b.Proxy="mute",b.idClass=_.default,b.allowedIds=[M];var P=(0,u.defineModel)(b);t.default=P},85059:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MuteCollection=void 0;var s=i(a(19976)),n=r(a(54019)),o=i(a(52737)),l=a(95595),d=r(a(77861));function u(){var e=(0,s.default)(["models:mute:cache-save: globalMuteModel does not exist"]);return u=function(){return e},e}function c(){var e=(0,s.default)(["models:mute:cache-save: ",""]);return c=function(){return e},e}var h=!0,f=!0,p=!0,m=!1,_=!1;class v extends n.default{initializeFromCache(e){this.add(e),this.setGlobalNotifications((0,l.getGlobalNotifications)()),this.setGlobalSounds((0,l.getGlobalSounds)()),this.setGlobalPreviews((0,l.getGlobalPreviews)()),this.setCollapseMuted((0,l.getCollapseMuted)()),this.setOutgoingMessageSound((0,l.getOutgoingMessageSound)())}saveToCache(){if(o.default.shouldSaveToCache()){var e=this.constructor.cachePolicy.id;__LOG__(2)(c(),String(e));var t=this.get(d.GLOBAL_MUTE);t?(0,l.setCollection)(e,t.toJSON()):__LOG__(3)(u())}}globalMute(){var e=this.get(d.GLOBAL_MUTE);return e||this.add({id:d.GLOBAL_MUTE})[0]}getGlobalSounds(){return h}setGlobalSounds(e){h=e,(0,l.setGlobalSounds)(e)}getGlobalNotifications(){return f}setGlobalNotifications(e){f=e,(0,l.setGlobalNotifications)(e)}getGlobalPreviews(){return p}setGlobalPreviews(e){p=e,(0,l.setGlobalPreviews)(e)}getCollapseMuted(){return m}setCollapseMuted(e){m=e,(0,l.setCollapseMuted)(e),this.trigger("change:collapseMuted",m)}getOutgoingMessageSound(){return _}setOutgoingMessageSound(e){_=e,(0,l.setOutgoingMessageSound)(e)}handle(e){e.forEach((e=>{var t=a(43334).default.get(e.id);t&&"mute"===e.type&&t.mute.setMute(e.muteExpiration)}))}}t.MuteCollection=v,v.model=d.default,v.cachePolicy={id:"mute",policy:n.CACHE_POLICY.LOAD,delay:1e3};var g=new v;t.default=g},74527:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(70417)),n=r(a(61247)),o=i(a(22632)),l=i(a(24762));class d extends n.default{constructor(...e){super(...e),this.id=(0,n.prop)(),this.products=(0,n.prop)(),this.itemCount=(0,n.prop)(),this.subtotal=(0,n.prop)(),this.tax=(0,n.prop)(),this.total=(0,n.prop)(),this.currency=(0,n.prop)(),this.createdAt=(0,n.prop)(),this.sellerJid=(0,n.prop)(),this.totalItemCount=(0,n.derived)(this._totalItemCount,["products"])}_totalItemCount(){return this.products.reduce(((e,t)=>e+t.quantity),0)}initialize(){super.initialize(),this.orderItemCollection=new l.default,this.listenTo(this,"change:cartItemCollection",this.triggerItemCollectionUpdate),this.triggerItemCollectionUpdate()}triggerItemCollectionUpdate(){this.orderItemCollection.add(this.products.map((e=>new o.default((0,s.default)({},e)))),{merge:!0})}getCollection(){return a(46937).default}}d.Proxy="order";var u=(0,n.defineModel)(d);t.default=u},46937:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.OrderCollection=void 0;var i=r(a(70417)),s=r(a(54019)),n=r(a(74527)),o=a(47296);class l extends s.default{constructor(e,t){super(),this.width=80,this.height=80,null!=e&&(this.width=e),null!=t&&(this.height=t)}findOrder(e,t,a){var r=this.get(e);return null!=r?Promise.resolve(r):this._queryOrder(e,t,a)}_queryOrder(e,t,a){return(0,o.queryOrder)(e,this.width,this.height,a).then((a=>{super.add((0,i.default)({id:e,fetchedFromServer:!0,sellerJid:t},a));var r=this.get(e);if(null!=r)return Promise.resolve(r)}))}}t.OrderCollection=l,l.model=n.default,l.staleCollection=!0;var d=new l;t.default=d},22632:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(61247)),n=r(a(8603)),o=a(96645);class l extends s.default{constructor(...e){super(...e),this.id=(0,s.prop)(),this.price=(0,s.prop)(),this.currency=(0,s.prop)(),this.name=(0,s.prop)(),this.quantity=(0,s.prop)(),this.thumbnailId=(0,s.prop)(),this.thumbnailUrl=(0,s.prop)(),this.mediaData=(0,s.derived)(this._mediaData,["thumbnailUrl"])}_mediaData(){return new n.default({mediaStage:null!=this.thumbnailUrl?o.MEDIA_DATA_STAGE.RESOLVED:o.MEDIA_DATA_STAGE.PREPARING,renderableUrl:null!=this.thumbnailUrl?"".concat(this.thumbnailUrl):null})}getCollection(){return a(46937).default}}l.Proxy="order-item";var d=(0,s.defineModel)(l);t.default=d},24762:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.OrderItemCollection=void 0;var i=r(a(54019)),s=r(a(22632));class n extends i.default{}t.OrderItemCollection=n,n.model=s.default;var o=n;t.default=o},33555:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.Chatstate=t.default=t.ChatstateCollection=void 0;var s=i(a(54073)),n=i(a(54019)),o=r(a(61247)),l=i(a(19899)),d=i(a(7470)),u=i(a(17957)),c=i(a(68384));class h extends o.default{constructor(...e){super(...e),this.id=(0,o.prop)(),this.type=(0,o.prop)(),this.t=(0,o.prop)(),this.deny=(0,o.prop)(),this.updateTime=(0,o.session)(),this.expireTimerId=(0,o.session)()}}h.Proxy="chatstate",h.idClass=c.default;var f=(0,o.defineModel)(h);t.Chatstate=f;class p extends n.default{}t.ChatstateCollection=p,p.model=f;class m extends o.default{constructor(...e){super(...e),this.id=(0,o.prop)(),this.isOnline=(0,o.session)(!1),this.stale=(0,o.session)(!0),this.hasData=(0,o.session)(!1),this.isSubscribed=(0,o.session)(!1),this.withholdDisplay=(0,o.session)(!0),this.forceDisplay=(0,o.session)(!1),this.chatActive=(0,o.session)(!1),this.withholdDisplayTimer=(0,o.session)(),this.forceDisplayTimer=(0,o.session)(),this.chatstate=(0,o.session)(),this.chatstates=(0,o.collection)(p),this.isGroup=(0,o.derived)(this._isGroup),this.isUser=(0,o.derived)(this._isUser)}_isGroup(){return c.default.isGroup(this.id)}_isUser(){return c.default.isUser(this.id)}initialize(){super.initialize();var e=this.isGroup?{id:"",type:"unavailable"}:{id:this.id};this.addChild("chatstate",new f(e)),this.isGroup?this.listenTo(this.chatstates,"add change",(0,s.default)((()=>{var e,t=!1;this.chatstates.forEach((a=>{"composing"!==a.type&&"recording"!==a.type||e&&!(e.updateTime<a.updateTime)||(e=a),t=t||"unavailable"!==a.type})),this.set({isOnline:t}),this.chatstate.set({id:e?e.id:"",type:e?e.type:"unavailable"})}))):this.listenTo(this.chatstate,"change:type",(()=>{this.isOnline="unavailable"!==this.chatstate.type})),this.listenTo(this,"change:chatActive",this.onChatActiveChange)}delete(){super.delete(),this.getCollection().remove(this.id),this.chatstate.delete(),this.chatstates.forEach((e=>e.delete()))}reset(){this.hasData=!1,this.isGroup?this.chatstates.forEach((e=>{e.type="unavailable"})):this.isUser&&(this.chatstate.unset("t"),this.chatstate.unset("deny")),this.chatstate.set({id:this.isGroup?"":this.id,type:"unavailable",t:void 0,deny:void 0})}isActive(){var e=this.chatstate.type;return this.hasData&&("composing"===e||"recording"===e)}getFormattedString(){if(!this.hasData)return null;if(this.isGroup){var e=this.chatstate.id;if(!e)return null;var t=d.default.get(e);if(!t)return null;var a=t.formattedShortName;return"composing"===this.chatstate.type?u.default.t(1572,{participant:a}):u.default.t(1573,{participant:a})}if(!this.isUser)return null;var r=this.chatstate;switch(r.type){case"available":return u.default.t(1565);case"composing":return u.default.t(1566);case"recording":return u.default.t(1567);case"unavailable":return r.deny||null==r.t?null:l.default.lastSeenStr(r.t)}}onChatActiveChange(){this.chatActive?(this.hasData?this.withholdDisplay=!1:this.withholdDisplayTimer=setTimeout((()=>{this.set({withholdDisplay:!1,withholdDisplayTimer:void 0})}),1500),this.forceDisplayTimer=setTimeout((()=>{this.set({forceDisplay:!0,forceDisplayTimer:void 0})}),2e3)):(this.withholdDisplayTimer&&(clearTimeout(this.withholdDisplayTimer),this.withholdDisplayTimer=void 0),this.forceDisplayTimer&&(clearTimeout(this.forceDisplayTimer),this.forceDisplayTimer=void 0))}subscribe(){return this.getCollection().find(this.id)}getCollection(){return a(99098).default}}m.Proxy="presence",m.idClass=c.default;var _=(0,o.defineModel)(m);t.default=_},99098:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.PresenceCollection=void 0;var i=r(a(54019)),s=r(a(33555)),n=a(7845),o=r(a(68384));class l extends i.default{_find(e){return!this.gadd(e).isUser||o.default.isServer(e)||o.default.isPSA(e)?Promise.resolve({id:e}):(0,n.subscribePresence)(e).then((()=>({id:e})))}clearAllPresence(){this.forEach((e=>{e.reset(),e.set({stale:!0,isSubscribed:!1})}))}}t.PresenceCollection=l,l.model=s.default,l.staleCollection=!0;var d=new l;t.default=d},54657:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(61247)),n=r(a(61941)),o=r(a(37163)),l=a(93649),d=a(8125),u=r(a(38350)),c=r(a(68384));class h extends s.default{constructor(...e){super(...e),this.id=(0,s.prop)(),this.afterCursor=(0,s.prop)(),this.index=(0,s.prop)(),this.fetchedFromServer=(0,s.session)(),this._products=(0,s.session)(),this._msgs=(0,s.session)()}initialize(){super.initialize(),this.productCollection=new u.default,this.msgProductCollection=new u.default,this.listenTo(this,"change:_products",this.triggerProductUpdate),this.listenTo(this,"change:_msgs",this.triggerMsgUpdate),this.triggerProductUpdate(),this.triggerMsgUpdate()}triggerProductUpdate(){this._products&&this.productCollection.add(this._products,{merge:!0}),this._products=void 0}triggerMsgUpdate(){this._msgs&&this.msgProductCollection.add(this._msgs,{merge:!0}),this._msgs=void 0}markProductCollectionOld(){this.productCollection.forEach((e=>e.markOld()))}addProduct(e){var{id:t}=this;return(0,l.addProduct)(e).then((e=>{var a=this.productCollection.at(0);e.catalogWid=t,e.index=a?a.index-1:0;var r=this.productCollection.add(e,{merge:!0,at:0})[0];return(0,n.default)(r,"addedProduct")}))}editProduct(e){return(0,l.editProduct)(e).then((e=>{var t=this.productCollection.add(e,{merge:!0})[0];return(0,n.default)(t,"editedProduct")}))}pullProduct(e){return(0,l.queryProduct)(this.id,e).then((e=>{var t=new o.default((0,d.mapProductResponseToModel)(e.data,this.id));this.updateProduct(t)}))}updateProduct(e){this.productCollection.add(e,{merge:!1})}getCollection(){return a(65468).default}}h.Proxy="catalog",h.idClass=c.default;var f=(0,s.defineModel)(h);t.default=f},65468:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CatalogCollection=t.STATIC_WHATSAPP_IMAGE_URI=void 0;var i=r(a(54019)),s=r(a(54657)),n=a(93649),o=a(8125),l=a(11419),d=a(75637),u="https://static.whatsapp.net";t.STATIC_WHATSAPP_IMAGE_URI=u;class c extends i.default{addMsgAsProduct(e){var t=e.businessOwnerJid&&(0,d.createWid)(e.businessOwnerJid);if(t){var a=this.get(t),r=a&&e.productId&&a.msgProductCollection.get(e.productId),i=a&&e.productId&&a.productCollection.get(e.productId);if(!(i&&i.t&&i.t>=e.t||r&&r.fetchedFromServer)){var s=(0,o.mapMsgToProductModel)(e);return super.add({id:t,afterCursor:void 0,_msgs:[s],stale:!0,fetchedFromServer:!!i},{merge:!0})}}}_queryProduct({catalogWid:e,productId:t,productMsgMediaData:a,width:r,height:i}){return(0,n.queryProduct)(e,t,r,i).then((t=>{if(!t.data)return super.add({id:e,afterCursor:void 0});var{data:r}=t;if(!r.image_cdn_urls||r.image_cdn_urls[0].value.includes(u))return Promise.reject(new Error("CatalogCollection:findProduct:_queryProduct ".concat(r.image_cdn_urls?"Product image contains static image":"Could not find image_cdn_urls for product")));var i=(0,o.mapProductResponseToModel)(r,e);i.productMsgMediaData=a;var s=[i];return super.add({id:e,afterCursor:void 0,_products:s,_msgs:s},{merge:!0})}))}findProduct({catalogWid:e,productId:t,productMsgMediaData:a}){return t?this._queryProduct({catalogWid:e,productId:t,productMsgMediaData:a}):Promise.reject(new Error("CatalogCollection:findProduct Received productId type ".concat(void 0===t?"undefined":"null")))}_queryCatalog(e,t,a){var r=e?e.index:0;return(0,n.queryCatalog)(t,a,10).then((e=>{if(!e.data.length)return{id:t,afterCursor:void 0};var a=[];return e.data.forEach((e=>{e.image_cdn_urls&&!e.image_cdn_urls[0].value.includes(u)&&a.push((0,o.mapProductResponseToModel)(e,t))})),{id:t,afterCursor:e.paging.cursors.after,_products:a,fetchedFromServer:!0,index:r+a.length}}))}_findQuery(e){var t=this.get(e),a=t&&!t.stale?t.afterCursor:void 0;return this._queryCatalog(t,e,a)}_find(e){return this._findQuery(e)}findCarouselCatalog(e){var t=this.get(e),a=(0,l.isString)(e)?(0,d.createWid)(e):e;return t&&t.set({index:0}),this._queryCatalog(t,a,void 0).then((e=>(t&&t.markProductCollectionOld(),super.add(e,{merge:!0}))))}findNextProductPage(e){return this.update(e).then((e=>(Array.isArray(e)?e[0]:e).productCollection.getProductModels()))}}t.CatalogCollection=c,c.model=s.default,c.staleCollection=!0;var h=new c;t.default=h},37163:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MAX_PRODUCT_IMAGES=t.MAX_PRICE=t.MIN_PRICE=void 0;var s=i(a(61247)),n=a(99888),o=r(a(8603)),l=a(96645),d=r(a(11318));t.MIN_PRICE=0;t.MAX_PRICE=4503599627370496;t.MAX_PRODUCT_IMAGES=10;class u extends s.default{constructor(...e){super(...e),this.old=(0,s.session)(!1),this.id=(0,s.prop)(),this.isHidden=(0,s.prop)(),this.catalogWid=(0,s.prop)(),this.url=(0,s.prop)(),this.name=(0,s.prop)(),this.description=(0,s.prop)(),this.reviewStatus=(0,s.prop)(),this.canAppeal=(0,s.prop)(),this.currency=(0,s.prop)(),this.priceAmount1000=(0,s.prop)(),this.retailerId=(0,s.prop)(),this.productImageCollection=(0,s.session)(),this.imageCount=(0,s.prop)(),this.index=(0,s.prop)(),this.additionalImageCdnUrl=(0,s.prop)(),this.additionalImageHashes=(0,s.prop)(),this.imageCdnUrl=(0,s.prop)(),this.imageHash=(0,s.prop)(),this.productMsgMediaData=(0,s.session)(),this.fetchedFromServer=(0,s.session)(),this.t=(0,s.prop)()}initialize(){super.initialize(),this.productImageCollection=new d.default,this.listenTo(this,"change:imageCdnUrl",this.triggerImageUpdate),this.listenTo(this,"change:additionalImageCdnUrl",this.triggerImageUpdate),this.triggerImageUpdate()}triggerImageUpdate(){if(this.markProductImagesOld(),this.fetchedFromServer||!this.productMsgMediaData)this.imageCdnUrl&&this.productImageCollection.gadd({id:"_0",mediaUrl:this.imageCdnUrl,fetchedFromServer:this.fetchedFromServer,old:!1},{merge:!0}),this.additionalImageCdnUrl&&this.additionalImageCdnUrl.forEach(((e,t)=>{this.productImageCollection.gadd({id:"_".concat(t+1),mediaUrl:e,fetchedFromServer:this.fetchedFromServer,old:!1},{merge:!0})}));else for(var e=0;e<this.imageCount;e++)this.productImageCollection.gadd({id:"_".concat(e),type:"product",mediaData:new o.default({mediaStage:l.MEDIA_DATA_STAGE.PREPARING}),fetchedFromServer:this.fetchedFromServer,old:!1},{merge:!0})}markOld(){this.old=!0}markProductImagesOld(){this.productImageCollection.forEach((e=>e.markOld()))}getHeadImageFile(){var e,{productImageCollection:t,name:a}=this,r=t.head();if(r&&(r.mediaData&&r.mediaData.mediaBlob&&r.mediaData.mediaBlob._blob&&(e=r.mediaData.mediaBlob._blob),e))return(0,n.createFile)([e],"".concat(a,".jpg"),{type:"image/jpeg"})}evictImagesFromCache(){this.productImageCollection.forEach((e=>e.evictFromCache()))}getPreviewImage(){return this.productImageCollection.head()}}u.Proxy="product";var c=(0,s.defineModel)(u);t.default=c},51897:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.sendProductMessage=function(){return v.apply(this,arguments)};var s=i(a(70417)),n=i(a(52954)),o=r(a(2784)),l=a(26360),d=i(a(36543)),u=i(a(79711)),c=i(a(50935)),h=i(a(17957)),f=i(a(40210)),p=i(a(61941)),m=r(a(75074));function _(e,t){var a=(0,p.default)(new d.default({chatParticipantCount:t}),"new AttachMediaCollection({\n  chatParticipantCount\n})");return a.processAttachments([{file:e}],f.default.MEDIA_PICKER_ORIGIN_TYPE.CHAT_PHOTO_LIBRARY).then((()=>{if(a.canSend()){var e=a.getPreviewableMedias();if(1===e.length){var[t]=e;return t.caption||(t.caption=void 0),t}}}))}function v(){return(v=(0,n.default)((function*(e,t,a){var r=t.getHeadImageFile();if(!r)throw u.default.openToast(o.createElement(m.default,{msg:h.default.t(1155),id:(0,m.genId)()})),new Error("Tried to send product message. Media file is not available.");var i=e.getParticipantCount(),n=yield _(r,i);if(!n)throw u.default.openToast(o.createElement(m.default,{msg:h.default.t(1155),id:(0,m.genId)()})),new Error("Tried to send product message. Media data is not available.");var d={quotedMsg:a,caption:n.caption,addEvenWhilePreparing:n.previewable&&n.state===l.ATTACH_MEDIA_STATE.PROCESSING,useBasePropsType:!0},f={businessOwnerJid:t.catalogWid.toString({legacy:!0}),productId:t.id.toString(),url:t.url,productImageCount:t.productImageCollection.length,title:t.name,description:t.description,currencyCode:t.currency,priceAmount1000:t.priceAmount1000,type:c.default.MSG_TYPE.PRODUCT};0===t.priceAmount1000&&(f.priceAmount1000=null,f.currencyCode=null),n.sendToChat(e,(0,s.default)((0,s.default)({},d),{},{productMsgOptions:f}))}))).apply(this,arguments)}},38350:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ProductCollection=t.PRODUCT_REVIEW_STATUS=void 0;var i=r(a(54019)),s=r(a(37163)),n=r(a(72424)),o={NO_REVIEW:"NO_REVIEW",PENDING:"PENDING",REJECTED:"REJECTED",APPROVED:"APPROVED",OUTDATED:"OUTDATED"};t.PRODUCT_REVIEW_STATUS=o;class l extends i.default{getProductModels(e=!1){var t=super.toArray();if(super.length<1)return t;var a=super.head();if(!(a&&a.catalogWid))return t;var r=e?new Set([o.OUTDATED,o.NO_REVIEW,o.APPROVED,o.REJECTED,o.PENDING]):new Set([o.APPROVED]),i=super.filter((e=>r.has(e.reviewStatus)&&!e.old));return n.default.webCatalogProductsOnOff&&!e?i.filter((e=>!e.isHidden)):i}add(e,t){var a=t?super.add(e,t):super.add(e);return this.sort(),a}evictImagesFromCache(e){var t=this.get(e);t&&t.evictImagesFromCache()}}t.ProductCollection=l,l.model=s.default,l.comparator=function(e,t){return e.index-t.index};var d=l;t.default=d},55316:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(19976)),n=i(a(52954)),o=i(a(70417)),l=a(26800),d=i(a(12489)),u=i(a(93282)),c=r(a(61247)),h=a(96452),f=a(28278),p=i(a(8603)),m=a(96645),_=a(82982),v=i(a(25012)),g=a(83286),E=i(a(90382));function y(){var e=(0,s.default)(["Failed to fetch ",""]);return y=function(){return e},e}var S=(0,l.createTimer)({algo:{type:"fibonacci",first:0,second:1},jitter:.25,max:9e5});function C(e){return"_productimage_"+new URL(e).pathname}class T extends c.default{constructor(...e){super(...e),this.id=(0,c.prop)(),this.type=(0,c.prop)(),this.mediaUrl=(0,c.prop)(),this.blobUrl=(0,c.session)(),this.mediaData=(0,c.session)(),this.fetchedFromServer=(0,c.prop)(),this.old=(0,c.session)(!1)}initialize(){super.initialize(),this.listenTo(this,"change:mediaUrl change:fetchedFromServer",this.triggerImageUpdate),this.triggerImageUpdate()}_processAndUpdateMediaData(e){var t={},a=v.default.createFromData(e,"image/jpeg");(0,f.prepRawMedia)(a,{}).waitForPrep().then((e=>(t=(0,o.default)((0,o.default)({},t),{},{mediaBlob:e.mediaBlob,type:e.type,mimetype:e.mimetype,fullWidth:e.fullWidth,fullHeight:e.fullHeight}),Promise.all([v.default.createFromBase64Jpeg(e.preview),v.default.createFromData(e.mediaBlob),(0,g.getHash)(e.mediaBlob)])))).then((e=>{var[a,r,i]=e;if(t=(0,o.default)((0,o.default)({},t),{},{preview:a,mediaBlob:r,renderableUrl:r.url(),mediaStage:m.MEDIA_DATA_STAGE.RESOLVED,filehash:i}),i===this.mediaData.filehash)return Promise.resolve();this.mediaData.set(t)}))}triggerImageUpdate(){var e=this;return(0,n.default)((function*(){if(e.fetchedFromServer&&e.mediaUrl){e.mediaData||e.addChild("mediaData",new p.default({mediaStage:m.MEDIA_DATA_STAGE.PREPARING}));var t=C(e.mediaUrl),a=yield E.default.get(t);if(a)return e._processAndUpdateMediaData(a);var r={delay:({taskDuration:e})=>{var t=1e3*S();return Math.max(t-e,0)},signal:(new d.default).signal,retries:10};return(0,u.default)(r,(t=>(0,_.fetchMedia)(e.mediaUrl).then((e=>e&&e.status>=200&&e.status<300?e:t(new h.CatalogImageDownloadError))))).then((a=>{var r=a.result;E.default.put(t,r),e._processAndUpdateMediaData(r)})).catch((()=>{__LOG__(3)(y(),e.mediaUrl),e.mediaData.set({mediaStage:m.MEDIA_DATA_STAGE.ERROR_MISSING})}))}}))()}markOld(){this.old=!0}evictFromCache(){if(this.mediaUrl){var e=C(this.mediaUrl);E.default.del(e)}}}T.Proxy="productImage";var M=(0,c.defineModel)(T);t.default=M},11318:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ProductImageCollection=void 0;var i=r(a(54019)),s=r(a(55316));class n extends i.default{toArray(){return super.filter((e=>e.old?(this.remove(e),!1):e))}}t.ProductImageCollection=n,n.model=s.default;var o=n;t.default=o},42809:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.INVALID_PRODUCT_TOKEN=void 0;var s=i(a(61247)),n=a(65468),o=r(a(77865)),l=a(8125),d=r(a(38350)),u=a(72571),c=r(a(72424)),h="DELETED";t.INVALID_PRODUCT_TOKEN=h;class f extends s.default{constructor(...e){super(...e),this.id=(0,s.prop)(),this.catalogId=(0,s.prop)(),this._productsLoadingStatus=(0,s.session)(),this._productList=(0,s.session)(),this._products=(0,s.session)()}initialize(){super.initialize(),this.productCollection=new d.default,this._productsLoadingStatus=new Map,this.listenTo(this,"change:_products",this.triggerProductUpdate),this.listenTo(this,"change:stale",this.resetProductLoadingStatus),this.triggerProductUpdate()}triggerProductUpdate(){null!=this._products&&(this._products.forEach((e=>{var t=this._getFetchStatus(e);this.setProductLoadingStatus(e.id,t),"DELETED"!==e.status&&"ERROR"!==t&&this.productCollection.add((0,l.mapProductResponseToModel)(e,this.catalogId),{merge:!0})})),this._products=void 0)}resetProductLoadingStatus(){this.stale&&(this._productsLoadingStatus=new Map)}getNextProductBatchToLoad(){var e=this.getPageSize(),t=this._productList.productSections.reduce(((e,{products:t})=>[...e,...t.map((({productId:e})=>e)).filter(Boolean).filter((e=>"NONE"===this.getProductLoadingStatus(e)))]),[]).slice(0,e);return t.forEach((e=>this.setProductLoadingStatus(e,"PENDING"))),t}getPageSize(){var e=c.default.webProductListMessagePageSize||u.PRODUCT_PAGE_SIZE,t=this.getProductSize();return t<3*e?t:2*e}getProductSize(){return this._productList.productSections.reduce(((e,{products:t})=>e+t.length),0)}setProductLoadingStatus(e,t){this._productsLoadingStatus.set(e,t)}getProductLoadingStatus(e){return this._productsLoadingStatus.get(e)||"NONE"}getProductList(){return this._productList}isFetching(){var e=!1;return this._productsLoadingStatus.forEach((t=>{"PENDING"===t&&(e=!0)})),e}_getFetchStatus(e){return e.status===h||!e.image_cdn_urls||e.image_cdn_urls[0].value.includes(n.STATIC_WHATSAPP_IMAGE_URI)?"ERROR":"SUCCESS"}}f.Proxy="product_list",f.idClass=o.default;var p=(0,s.defineModel)(f);t.default=p},90567:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ProductMessageListCollection=void 0;var i=r(a(54019)),s=a(93649),n=r(a(42809)),o=a(75637);class l extends i.default{_queryProductList(e){var t=e.catalogId;return(0,s.queryProductList)(t,e.getNextProductBatchToLoad()).then((t=>({id:e.id,_products:t,fetchedFromServer:!0})))}_findQuery(e){var t=this.get(e);return null==t?Promise.resolve({id:e}):this._queryProductList(t)}_find(e){return this._findQuery(e)}getOrAdd(e,t,a){var r=this.get(e);if(null!=r)return r;if(null==a)return null;var i=(0,o.createWid)(a);return null!=(r=this.add({id:e,catalogId:i,_productList:t})[0])?r:null}}t.ProductMessageListCollection=l,l.model=n.default,l.staleCollection=!0;var d=new l;t.default=d},27886:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PROFILE_PIC_COMMAND=void 0;var a=Object.freeze({REMOVE:"remove",SET:"set"});t.PROFILE_PIC_COMMAND=a},22315:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FALLBACK=void 0;var s=i(a(70417)),n=i(a(19976)),o=r(a(61247)),l=i(a(50935)),d=a(95595),u=i(a(18120)),c=i(a(74185)),h=i(a(68384)),f=i(a(58906));function p(){var e=(0,n.default)(["Assertion failed!"]);return p=function(){return e},e}var m={SINGLE:"SINGLE",GROUP:"GROUP"};t.FALLBACK=m;class _ extends o.default{constructor(...e){super(...e),this.id=(0,o.prop)(),this.token=(0,o.prop)(),this.tag=(0,o.prop)(),this.raw=(0,o.prop)(),this.eurl=(0,o.prop)(),this.stale=(0,o.session)(!0),this.eurlStale=(0,o.session)(!1),this.pendingPic=(0,o.session)(),this.img=(0,o.derived)(this._img,["tag","raw","stale","eurl","eurlStale"]),this.imgFull=(0,o.derived)(this._imgFull,["tag","raw","stale","eurl","eurlStale"]),this.fallbackType=(0,o.derived)(this._fallbackType,["id"])}_img(){return this.raw?"data:image/jpeg;base64,"+this.raw:!this.tag&&this.stale?null:this.tag?(u.default.supportsFeature(u.default.F.MD_BACKEND),this.generateUrl("s")):void 0}_imgFull(){return!this.raw&&this.tag||!this.stale?!this.raw&&this.tag?(u.default.supportsFeature(u.default.F.MD_BACKEND),this.generateUrl("l")):void 0:null}_fallbackType(){return h.default.isUser(this.id)?m.SINGLE:(h.default.isGroup(this.id),m.GROUP)}markStale(e){this.stale=!0,e&&e.eurl&&(this.eurlStale=!0)}validate(){if(this.stale||this.eurlStale)return this.getCollection().update(this.id)}generateUrl(e){var t={t:e,u:this.id.toString(),i:this.tag||"",n:this.token||""};return this.token||(__LOG__(4,void 0,new Error,!0)(p()),SEND_LOGS("profilePicThumb::generateUrl: empty token for profile pic")),f.default.alive&&this.eurl&&!this.eurlStale&&(t=(0,s.default)({e:this.eurl},t)),c.default.build(l.default.PP_URL,t)}canSet(){if(h.default.isGroup(this.id)){var e=a(43334).default.get(this.id);return!(e&&e.groupMetadata&&e.groupMetadata.participants.iAmRestrictedMember())}return!!this.id.equals((0,d.getMaybeMeUser)())}canDelete(){if(h.default.isGroup(this.id)&&this.tag){var e=a(43334).default.assertGet(this.id);return!(e&&e.groupMetadata&&e.groupMetadata.participants.iAmRestrictedMember())}return!(!this.id.equals((0,d.getMaybeMeUser)())||!this.tag)}getCollection(){return a(15118).default}}_.Proxy="profilePicThumb",_.idClass=h.default;var v=(0,o.defineModel)(_);t.default=v},15118:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ProfilePicThumbCollection=void 0;var s=i(a(19976)),n=i(a(45455)),o=r(a(54019)),l=i(a(52737)),d=a(19741),u=r(a(96452)),c=a(95595),h=i(a(18120)),f=i(a(68560)),p=a(27886),m=a(85619),_=i(a(22315)),v=a(84990),g=i(a(68384)),E=a(75637);function y(){var e=(0,s.default)(["ProfilePicThumbStore:resyncPictures dropped: ",""]);return y=function(){return e},e}function S(){var e=(0,s.default)(["ProfilePicThumbStore:resyncPictures dropped: ",""]);return S=function(){return e},e}function C(){var e=(0,s.default)(["ProfilePicThumbStore:resyncPictures blocked ",""]);return C=function(){return e},e}function T(){var e=(0,s.default)(["ProfilePicThumbStore:resyncPictures success"]);return T=function(){return e},e}function M(){var e=(0,s.default)(["models:profilePic:cache-save: ",""]);return M=function(){return e},e}class b extends o.default{get(e){var t=super.get(e);if(!this.modelClass.prototype.isIdType(e))return t;var a=super.get((0,f.default)(e.toString()));if(a){if(this.remove(a,{silent:!0}),t&&t.tag)return t;var r=a.toJSON();return r.id=e,this.add(r,{silent:!0,merge:!0})[0]}return t||void 0}saveToCache(){if(l.default.shouldSaveToCache()){var e=b.cachePolicy.id,t=this.filter((e=>g.default.isWid(e.id)&&!!e.eurl&&!!e.token));t=t.map((function(e){var t=e.toJSON();return t.id=(0,f.default)(t.id.toString()),t})),__LOG__(2)(M(),String(e)),(0,c.setCollection)(e,t)}}initializeFromCache(e){if(this.length&&e){var t=this.reduce(((e,t)=>(e[(0,f.default)(t.id.toString())]=t.id.toString(),e)),new Object);if(!(0,n.default)(t)){var a=e.reduce(((e,a)=>(t[a.id]&&(a.id=(0,E.createWid)(t[a.id]),a.stale=!0,a.token&&e.push(a)),e)),[]);this.add(a,{merge:!0})}}}onResume(){var e=this.filter((e=>{var t=a(43334).default.get(e.id);return e.hasObservers()&&e.stale&&(g.default.isUser(e.id)||g.default.isGroup(e.id))&&!(t&&t.isReadOnly)})).map((e=>(e.tag||e.unset("tag",{silent:!0}),e)));this.resyncPictures(e)}_find(e){var t=a(43334).default.get(e);if(t&&t.isReadOnly)return h.default.supportsFeature(h.default.F.MD_BACKEND)?Promise.resolve({id:e,stale:!0}):(0,m.profilePicFindThumbFromPhone)(e,this.get(e)).then((e=>(e.tag||e.raw||(e.eurl=null,e.tag=null,e.raw=null,e.eurlStale=!1),e))).catchType(u.ProtoVersionUndefined,(()=>({id:e,stale:!0})));if(g.default.isUser(e)||g.default.isGroup(e)){var r={id:e};return(0,m.profilePicFind)(e).then((e=>(r.tag=e.tag,r.raw=null,r.eurl=e.eurl,r.eurlStale=!1,r.token=e.token,h.default.supportsFeature(h.default.F.MD_BACKEND),r))).catchType(d.ServerStatusCodeError,(e=>{switch(e.status){case 401:r.tag="",r.raw=void 0;break;case 423:case 429:r.stale=!0;break;default:r.tag=null,r.eurl=null,r.eurlStale=!1}return Promise.resolve(r)})).catchType(d.WebdDrop,(function(){return{id:e,stale:!0}}))}return Promise.resolve({id:e,tag:null})}imageChanged(e,t){var a=this.get(e);a&&(t===p.PROFILE_PIC_COMMAND.REMOVE?a.set({tag:void 0,eurl:void 0}):t!==p.PROFILE_PIC_COMMAND.SET&&a.tag===t||this.update(a.id).catchType(d.WebdDrop,(()=>{})))}resyncPictures(e){return 0===e.length?Promise.resolve():(0,m.profilePicResync)(e.map((function(e){return{id:e.id,tag:e.tag}}))).then((t=>{__LOG__(2)(T()),t.forEach((t=>{var a=this.get(t.id);a&&a.set({tag:t.tag,token:t.token,raw:void 0,stale:!1,eurl:t.eurl,eurlStale:!1}),e.forEach((e=>{e.eurlStale&&this.update(e.id)})),e.forEach((e=>{e.stale=!1}))}))})).catchType(d.WebdDrop,(()=>{})).catchType(d.ServerStatusCodeError,(e=>{423===e.status||429===e.status?__LOG__(3)(C(),e.status):e.status>=400&&__LOG__(3)(S(),String(e))})).catch((function(e){__LOG__(3)(y(),String(e))}))}findThumbnailWid(e){return e.find((e=>{var t;return null===(t=this.get(e))||void 0===t?void 0:t.img}))}getThumbnailWidFromVcard(e){if(!e)return null;var t=(0,v.vcardWids)(e);if(t){var a=this.findThumbnailWid(t);return a||(t.length?t[0]:null)}}}t.ProfilePicThumbCollection=b,b.model=_.default,b.staleCollection=!0,b.resumeOnAvailable=!0,b.cachePolicy={id:"profile_pic_thumb",trigger:"change:tag change:raw",policy:o.CACHE_POLICY.LOAD,delay:5e3};var P=new b;t.default=P},50751:(e,t,a)=>{"use strict";var r=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.PttPrefs=void 0;var i=r(a(61247)),s=a(95595),n=[1,1.5,2];class o extends i.default{constructor(...e){super(...e),this.id=(0,i.prop)(),this.playbackRate=(0,i.prop)(1),this.lastPlayedMessageId=(0,i.prop)(null)}initialize(){i.default.prototype.initialize.call(this),this.playbackRate=(0,s.getPttPlaybackRate)(),this.listenTo(this,"change:playbackRate",((e,t)=>{(0,s.setPttPlaybackRate)(t)}))}advancePlaybackRate(){var e=(n.indexOf(this.playbackRate)+1)%n.length,t=n[e];this.playbackRate=t}}t.PttPrefs=o,o.Proxy="pttPrefs";var l=new((0,i.defineModel)(o))({id:"1"});t.default=l},89526:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.isUnviewed=function(e){return!o(e)&&!l(e)},t.isViewed=o,t.isExpired=l;var i=r(a(19899)),s=r(a(50935)),n=a(64658);function o(e){var t;return(null===(t=function(e){var t=(0,n.unproxy)(e);return null!=t?t.asViewOnce:null}(e))||void 0===t?void 0:t.ack)===s.default.ACK.PLAYED}function l(e){return!o(e)&&i.default.globalUnixTime()-(0,n.unproxy)(e).t>1209600}},62761:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showForwarded=function(e){var t=(0,r.unproxy)(e);return t.numTimesForwarded>0&&!t.asRevoked};var r=a(64658)},72852:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(19976)),n=i(a(74186)),o=i(a(29036)),l=i(a(90882)),d=i(a(54019)),u=i(a(18120)),c=i(a(27e3)),h=i(a(58885)),f=r(a(12767));function p(){var e=(0,s.default)(["starred gif msgs sync error: "]);return p=function(){return e},e}class m extends d.default{constructor(){super(),this.syncPromise=null,this.isSynced=!1,this.listenTo(f.default,"change:stream",(()=>{f.default.stream===f.STREAM.DISCONNECTED&&(this.isSynced=!1)}))}onResume(){this.isSynced=!1,this.sync()}maySync(){return u.default.supportsFeature(u.default.F.STARRED_GIFS)}sync(){return this.isSynced?Promise.resolve():this.syncPromise?this.syncPromise:this.maySync()?(this.syncPromise=h.default.getStarred(void 0,void 0,void 0,!0).then((e=>{var t=[];e&&e.length&&(t=(0,l.default)(e,(e=>e&&e.isGif&&!e.isUnsentMedia))),this.set(t)})).catch((e=>{499!==e&&__LOG__(3)(p())})).finally((()=>{this.syncPromise=null,this.isSynced=!0})),this.syncPromise):Promise.resolve()}add(e,t){if(!e||!this.maySync()||!this.isSynced)return[];var a=this.isModel(e)?[e]:e;return a=(0,o.default)((0,l.default)(a,(e=>e.isGif)),this.toArray(),((e,t)=>e.body===t.body)),super.add(a,t)}remove(e,t){if(!e||!this.maySync()||!this.isSynced)return[];var a=this.isModel(e)?[e]:e;return a=(0,n.default)((0,l.default)(a,(e=>e.isGif)),this.toArray(),((e,t)=>e.body===t.body)),super.remove(a,t)}}m.model=c.default,m.comparator=function(e,t){return t.t-e.t};var _=new m;t.default=_},63095:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.addStarredMsgs=function(e){s.add(e),e.forEach((e=>{e.chat.starredMsgs&&e.chat.starredMsgs.add(e)})),h.default.add(e)},t.removeStarredMsgs=v,t.default=t.StarredMsgCollection=void 0;var s,n=i(a(19976)),o=i(a(54019)),l=i(a(50935)),d=i(a(27e3)),u=i(a(58885)),c=i(a(61941)),h=i(a(72852)),f=r(a(12767));function p(){var e=(0,n.default)(["models:starred:update:error: "]);return p=function(){return e},e}function m(){var e=(0,n.default)(["starred msg sync error: "]);return m=function(){return e},e}class _ extends o.default{constructor(){super(),this.syncPromise=null,this.isSynced=!1,this.listenTo(f.default,"change:stream",(()=>{f.default.stream===f.STREAM.DISCONNECTED?this.isSynced=!1:f.default.stream===f.STREAM.CONNECTED&&this.delete()}))}process(e,t,a,r){r?this.delete():this.updateMsgs(e,t,a)}sync(e){if(this.isSynced)return Promise.resolve();if(null!=this.syncPromise)return this.syncPromise;var t,a=this,r=this.last();return r&&(t=r.id),this.syncPromise=u.default.getStarred(e,l.default.PAGE_SIZE,t).then((function(e){e.length&&a.add(e,{silent:!0}),e.length<l.default.PAGE_SIZE&&(a.isSynced=!0)})).catch((function(){__LOG__(3)(m())})).finally((()=>{a.syncPromise=null,a.trigger("sync")})),this.trigger("sync"),(0,c.default)(this.syncPromise,"syncPromise can not be null")}updateMsgs(e,t,a){var r=this.syncPromise||Promise.resolve();this.syncPromise=r.then((()=>e?(t.length>0?u.default.incrementalStarredUpdate(t):Promise.resolve([])).then((e=>{var t=e.concat(a);this.isSynced&&(this.add(t,{silent:!0}),h.default.add(e)),t.forEach((e=>{e.chat.starredMsgs&&e.chat.starredMsgs.add(e)})),this.trigger("sync")})).catch((()=>{__LOG__(3)(p())})):(v(t.concat(a).filter((e=>!e.star))),Promise.resolve()))).finally((()=>{this.syncPromise=null}))}delete(){this.isSynced=!1,super.delete()}}function v(e){s.remove(e),e.forEach((e=>{e.chat.starredMsgs&&e.chat.starredMsgs.remove(e)}))}t.StarredMsgCollection=_,_.model=d.default,_.comparator=(e,t)=>t.t-e.t;var g=s=new _;t.default=g},42382:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(61247)),n=r(a(68384));class o extends s.default{constructor(...e){super(...e),this.id=(0,s.prop)(),this.status=(0,s.prop)(),this.stale=(0,s.session)(!0)}getCollection(){return a(76019).default}}o.Proxy="status",o.idClass=n.default;var l=(0,s.defineModel)(o);t.default=l},76019:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.StatusCollection=void 0;var i=r(a(54019)),s=a(19741),n=r(a(42382)),o=a(96911),l=r(a(68384)),d=a(75637);class u extends i.default{onResume(){this.filter((e=>e.hasObservers())).forEach((e=>{this.find(e.id).catchType(s.WebdDrop,(()=>{}))}))}_find(e){var t=e instanceof l.default?e:(0,d.createWid)(e);return(0,o.getStatus)(t)}handle([e]){var t=this.get(e.id);t&&(t.status=e.status,t.stale=!1)}}t.StatusCollection=u,u.model=n.default,u.idClass=l.default,u.staleCollection=!0,u.resumeOnAvailable=!0;var c=new u;t.default=c},282:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(19976)),s=r(a(25337)),n=a(61247),o=r(a(19899)),l=r(a(50935)),d=r(a(7470)),u=a(6829),c=r(a(73298)),h=r(a(68384));function f(){var e=(0,i.default)(["Status V3 onEmptyMRM with total count: ",", noEarlierMsgs: ",""]);return f=function(){return e},e}function p(){var e=(0,i.default)(["Status v3 deleted with total count: ",""]);return p=function(){return e},e}function m(){var e=(0,i.default)(["Bad status v3 read count, ",", ",""]);return m=function(){return e},e}class _ extends c.default{constructor(...e){super(...e),this.id=(0,n.prop)(),this.t=(0,n.prop)(),this.unreadCount=(0,n.prop)(0),this.totalCount=(0,n.prop)(0),this.pic=(0,n.prop)(),this._msgs=(0,n.prop)((()=>[])),this.readKeys=(0,n.session)((()=>({}))),this.contact=(0,n.session)(),this.expireTimer=(0,n.session)(),this.expireTs=(0,n.session)(),this.hasUnread=(0,n.derived)(this._hasUnread,["unreadCount"]),this.readCount=(0,n.derived)(this._readCount,["unreadCount","totalCount"]),this.lastStatus=(0,n.derived)(this._lastStatus,["msgsChanged","totalCount"])}_hasUnread(){return this.unreadCount>0}_readCount(){var e=this.totalCount-this.unreadCount;return Number.isFinite(e)?e:(__LOG__(3)(m(),this.totalCount,this.unreadCount),0)}_lastStatus(){return this.msgs.last()}initialize(){super.initialize(),this.addChild("contact",d.default.gadd(this.id)),this.listenTo(this.msgs,"add bulk_add",(()=>{window.setTimeout((()=>{this.setupStatusExpiration()}))})),this.listenTo(this,"change:lastStatus",(()=>{this.lastStatus&&(this.t=this.lastStatus.t)}))}setupStatusExpiration(){var e=this.msgs.at(0);if(e&&!("number"==typeof this.expireTs&&this.expireTs<=e.t)){var t=e.t+86400+1;t<o.default.globalUnixTime()?window.setTimeout((()=>{this.expireMsg()})):(this.expireTimer=s.default.setGlobalTimeout(this.expireMsg.bind(this),1e3*t,this.expireTimer),this.expireTs=e.t)}}expireMsg(){for(var e=this.msgs;e.length>0;){var t=e.at(0);if(!t)break;if(t.t+86400>o.default.globalUnixTime())break;this.unreadCount>this.totalCount-1&&this.unreadCount--,this.totalCount--,e.remove(t),t.delete()}this.expireTs=void 0,this.expireTimer=void 0,0!==this.totalCount&&this.setupStatusExpiration()}delete(){__LOG__(2)(p(),this.totalCount),super.delete(),this.expireTimer&&s.default.clearTimeout(this.expireTimer),null!=this.expireTs&&(this.expireTs=void 0),this.getCollection().remove(this.id)}onEmptyMRM(){__LOG__(2)(f(),this.totalCount,this.msgs.msgLoadState.noEarlierMsgs?"true":"false"),this.msgs.msgLoadState.noEarlierMsgs&&0===this.totalCount?this.delete():this.totalCount>0&&this.loadMore().catch((()=>{})).finally((()=>{this.msgs.length||this.delete()}))}loadMore(e=l.default.PAGE_SIZE){if(this.msgs.msgLoadState.noEarlierMsgs)return Promise.resolve();if(this.msgs.msgLoadState.isLoadingEarlierMsgs)return this.msgs.loadEarlierPromise;var t=0!==e?e:l.default.PAGE_SIZE;return this.getCollection().loadMore(this.id,t,this.msgs.last()).then((e=>(Array.isArray(e)&&e.length<t&&(this.msgs.msgLoadState.noEarlierMsgs=!0),e))).catch((e=>(404===e&&this.delete(),Promise.reject(e))))}handleReadStatus(e){this.readKeys[e]||(this.readKeys[e]=!0,this.unreadCount>0&&this.unreadCount--)}sendReadStatus(e,t){return(0,u.sendReadStatus)(e,t).then((t=>{t&&this.handleReadStatus(e)}))}getCollection(){return a(57185).default}}_.Proxy="statusV3",_.idClass=h.default;var v=(0,n.defineModel)(_);t.default=v},57185:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.StatusV3Collection=void 0;var i=r(a(19976)),s=r(a(45455)),n=r(a(90882)),o=r(a(16760)),l=r(a(94030)),d=r(a(54019)),u=r(a(19899)),c=r(a(50935)),h=a(19741),f=a(95595),p=r(a(18120)),m=r(a(40210)),_=r(a(58885)),v=r(a(25012)),g=a(6829),E=r(a(282)),y=a(75637);function S(){var e=(0,i.default)(["models:statusV3:unknown:",""]);return S=function(){return e},e}function C(){var e=(0,i.default)(["models:statusV3:read:no_status:",""]);return C=function(){return e},e}function T(){var e=(0,i.default)(["models:statusV3:unexpected update"]);return T=function(){return e},e}function M(){var e=(0,i.default)(["models:statusV3:no_checksum"]);return M=function(){return e},e}function b(){var e=(0,i.default)(["Total count: ",", msgs length: ",""]);return b=function(){return e},e}function P(){var e=(0,i.default)(["model:statusv3:loadMore:",""]);return P=function(){return e},e}function A(){var e=(0,i.default)(["model:statusv3:findQuery error ",""]);return A=function(){return e},e}function I(){var e=(0,i.default)(["Received "," status V3 messages when total count is "," for ",""]);return I=function(){return e},e}class O extends d.default{delete(){super.delete(),delete this.checksum}_find(e){return Promise.resolve({id:e})}findQuery(e,t){return super.findQuery(e,t).then((e=>{var t=e||[];return Promise.all(t.map((e=>{if(e){var t=0;return e.msgs.forEach((a=>{t<e._msgs.length&&e._msgs[t].id.toString()===a.id.toString()?++t:a.delete()})),e._msgs.length>0?this.addStatusMessages(e.id,e._msgs):Promise.resolve()}}))).then((()=>t))}))}_findQuery(){return(0,g.queryStatusAll)().then((e=>(this.checksum=e.checksum,Promise.map(e.statuses,(e=>{e.totalCount!==e._msgs.length&&e.totalCount<=20&&__LOG__(3)(I(),e._msgs.length,e.totalCount,e.id);var t=e.pic;return t?v.default.createFromData(t,"image/jpeg").then((t=>(e.pic=t,e))):e})))))}loadMore(e,t,a){return(0,g.queryStatusUpdate)(e,t,a&&a.id).then((e=>e.status>=400?(__LOG__(3)(A(),e.status),Promise.reject(e.status)):(e.forEach((function(e){e.invis=!0})),__LOG__(2)(P(),e.length),_.default.processMultipleMessages((0,y.createWid)(c.default.STATUS_WID),e,{add:"after",isHistory:!0}))))}sync(e){var t=window.performance.now();return!e||this.checksum&&this.checksum!==e?this.findQuery({},{set:this.hasSynced()}).catchType(h.WebdDrop,(()=>{})).finally((()=>{this.trigger("sync")})).tap((()=>{var e=window.performance.now(),a=Math.round(e-t);this.logMetrics({type:"sync",syncTime:a}),this.forEach((e=>{e.msgs.length>e.totalCount&&__LOG__(2)(b(),e.totalCount,e.msgs.length)}))})):Promise.resolve(void 0)}logMetrics(e){var t;t="sync"===e.type?new m.default.WebcStatusSync({webcStatusSyncT:e.syncTime}):new m.default.WebcStatusSession({webcStatusSessionId:e.sessionId});var a=this.filter((e=>!e.contact.isMe)),r=a.filter((e=>!e.contact.statusMute)),i=r.filter((e=>e.hasUnread)),s=r.filter((e=>!e.hasUnread)),n=a.filter((e=>e.contact.statusMute)),o=(0,l.default)(r.map((e=>e.unreadCount))),d=(0,l.default)(r.map((e=>e.readCount))),u=(0,l.default)(n.map((e=>e.totalCount)));t.webcStatusRecentItemCount=o,t.webcStatusRecentRowCount=i.length,t.webcStatusViewedItemCount=d,t.webcStatusViewedRowCount=s.length,t.webcStatusMutedItemCount=u,t.webcStatusMutedRowCount=n.length,t.commit()}hasSynced(){return!!this.checksum}handleUpdate(e,t,a){var r=e.id.fromMe?(0,f.getMaybeMeUser)():e.author;if(this.updateChecksum(t),this.hasSynced()){if(a)return!0;var i=this.get(r);if(i){var s=p.default.supportsFeature(p.default.F.MD_BACKEND)||i.totalCount===i.msgs.length;if("revoke"===e.subtype){var n=i.msgs.toArray().slice(0,i.totalCount-i.unreadCount),l=(0,o.default)(n,(e=>e.id.toString())),d={totalCount:i.totalCount-1};l.find((t=>t===e.protocolMessageKey.toString()))||i.readKeys[e.protocolMessageKey.toString()]||(d.unreadCount=i.unreadCount-1),i.set(d)}else{var u={totalCount:i.totalCount+1};e.invis||(u.unreadCount=i.unreadCount+1),u.t=e.t,i.set(u)}return!s&&e.body&&v.default.createFromBase64Jpeg(e.body).then((e=>{i.pic=e})),s}return this.add({id:r,t:e.t,unreadCount:e.invis?0:1,totalCount:1}),!0}return!1}updateChecksum(e){e?this.hasSynced()&&(this.checksum=e):__LOG__(2)(M())}handle(e){var t=e.shift();if(Array.isArray(t))__LOG__(3)(T());else switch(t.type){case"read":this.updateChecksum(t.checksum);var a=this.get(t.chat);a?a.handleReadStatus(t.key):__LOG__(2)(C(),[t.chat,t.key].join());break;default:__LOG__(3)(S(),t.type)}}addStatusMessages(e,t){return _.default.processMultipleMessages((0,y.createWid)(c.default.STATUS_WID),t,{add:"after",isHistory:!0})}getUnexpired(e){var t=this.filter((e=>e.totalCount>0&&u.default.globalUnixTime()-e.t<=86400&&e.contact.isMyContact&&!e.contact.isMe&&!e.contact.isPSA));return e?(0,n.default)(t,(e=>e.unreadCount>0)):(0,n.default)(t,(e=>0===e.unreadCount))}getMyStatus(){var e=this.filter((e=>e.contact.isMe));if((0,s.default)(e));else if(!(u.default.globalUnixTime()-e[0].t>86400))return e[0]}}t.StatusV3Collection=O,O.model=E.default,O.comparator=(e,t)=>t.t-e.t;var N=new O;t.default=N},49569:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.RecentStickerCollection=t.RECENT_STICKERS_LIMIT=void 0;var s=i(a(19976)),n=i(a(70417)),o=i(a(22220)),l=i(a(54019)),d=r(a(52737)),u=i(a(18120)),c=i(a(61941)),h=i(a(86484)),f=i(a(76022));function p(){var e=(0,s.default)(["collection:recent_sticker:_sync error "]);return p=function(){return e},e}var m=32;t.RECENT_STICKERS_LIMIT=m;class _ extends l.default{constructor(...e){super(...e),this._checksum="",this._syncStatus="NONE",this._weightMap=new Map,this._sortTrimScale=()=>{var e=this.length;if(e){if(this.sort(),e>m){for(var t=m;t<e;t++)this._weightMap.delete((0,c.default)(this.at(t),"this.at(i)").id);this.remove(this.models.slice(m))}var a=this.head(),r=this.last();a&&r&&this._getWeight(a)<10&&this._getWeight(r)>.01||this.forEach(((t,a)=>{this._weightMap.set(t.id,1+(e-a)/e*3)}))}}}_comparator(e,t){return d.default.platform===d.PLATFORMS.ANDROID?this._getWeight(t)-this._getWeight(e):e.index>t.index?1:-1}_getWeight(e){return(0,c.default)(this._weightMap.get(e.id),"this._weightMap.get(sticker.id)")}_findQuery(){return u.default.isRecentStickersEnabled()?f.default.queryRecentStickers().then((({checksum:e,stickers:t})=>(this.setChecksum(e),d.default.platform===d.PLATFORMS.ANDROID&&(this._weightMap.clear(),t.forEach((({id:e,weight:t})=>{this._weightMap.set(e,t)}))),t.map(((e,t)=>{var{weight:a}=e,r=(0,o.default)(e,["weight"]);return(0,n.default)((0,n.default)({},r),{},{index:t})}))))):Promise.reject(new Error("gk recent sticker sync unsupported"))}enqueue(e){u.default.isRecentStickersEnabled()&&0!==e.length&&(d.default.platform===d.PLATFORMS.ANDROID?this._enqueueAndroid(e):this._enqueueiOS(e))}_enqueueAndroid(e){e.forEach((e=>{this.get(e.id)||(this._weightMap.set(e.id,0),this.add(e)),this.forEach((t=>{var a=this._getWeight(t);t.id===e.id?a+=1:a*=.9,this._weightMap.set(t.id,Math.round(1e3*a)/1e3)}))})),this._sortTrimScale()}_enqueueiOS(e){this.forEach(((e,t)=>{e.index=m+t}));var t=new Set(e.map((e=>e.id)));e.reduce(((e,a)=>t.has(a.id)?(t.delete(a.id),[a].concat(e)):e),[]).slice(0,m).forEach(((e,t)=>{var a=this.get(e.id);a?a.index=t:this.add({id:e.id,deprecatedMms3Url:e.deprecatedMms3Url,directPath:e.directPath,filehash:e.filehash,encFilehash:e.encFilehash,mediaKey:e.mediaKey,mediaKeyTimestamp:e.mediaKeyTimestamp,width:e.width,height:e.height,size:e.size,mimetype:e.mimetype,type:e.type,index:t})})),this.sort(),this.remove(this.slice(m))}setChecksum(e){this._checksum=e}sync(e){return u.default.isRecentStickersEnabled()&&(null==e||e!==this._checksum)?this._sync():Promise.resolve()}_sync(){return"INPROGRESS"===this._syncStatus?Promise.resolve():(this._syncStatus="INPROGRESS",this.findQuery({},{set:!0}).then((()=>{this.sort(),this._syncStatus="SUCCESS"})).catch((()=>{__LOG__(3)(p()),this._syncStatus="FAILURE"})))}isSynced(){return"SUCCESS"===this._syncStatus||"FAILURE"===this._syncStatus}reset(){return this._syncStatus="NONE",this._weightMap.clear(),super.reset()}}t.RecentStickerCollection=_,_.model=h.default;var v=new _;t.default=v},47805:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.StarredStickerCollection=t.STARRED_STICKERS_PAGE_SIZE=void 0;var i=r(a(19976)),s=r(a(70417)),n=r(a(54019)),o=r(a(18120)),l=r(a(86484)),d=r(a(76022));function u(){var e=(0,i.default)(["collection:starred_sticker:_sync error "]);return u=function(){return e},e}t.STARRED_STICKERS_PAGE_SIZE=24;class c extends n.default{constructor(...e){super(...e),this._checksum="",this._syncStatus="NONE",this._currentPage=0,this._total=0}_findQuery(){return o.default.isStarredStickersEnabled()?d.default.queryStarredStickers(this._currentPage+1,24).then((({checksum:e,total:t,stickers:a})=>(this._checksum=e,this._currentPage+=1,this._total=t,a.map(((e,t)=>(0,s.default)((0,s.default)({},e),{},{index:this.length+t})))))):Promise.reject(new Error("gk starred sticker sync unsupported"))}add(e,t,a){return a&&(this._total+=1),super.add(e,t)}remove(e,t={}){return this._total-=1,super.remove(e,t)}syncNextPage(){return this.canLoadMore()?this._sync(!1).then((()=>{this.trigger("next_page_sync")})):Promise.resolve()}sync(e){return o.default.isStarredStickersEnabled()&&(null==e||e!==this._checksum)?(this.reset(),this._sync(!0).then((()=>{this.trigger("sync")}))):Promise.resolve()}_sync(e){return"INPROGRESS"===this._syncStatus?Promise.resolve():(this._syncStatus="INPROGRESS",this.findQuery({},{set:e}).then((()=>{this._syncStatus="SUCCESS"})).catch((()=>{__LOG__(3)(u()),this._syncStatus="FAILURE"})))}isSynced(){return"SUCCESS"===this._syncStatus||"FAILURE"===this._syncStatus}canLoadMore(){return 0!==this._total&&this.length<this._total}getRemaining(){return this._total-this.length}reset(){return this._syncStatus="NONE",this._currentPage=0,this._checksum="",this._total=0,super.reset()}}t.StarredStickerCollection=c,c.model=l.default,c.comparator=(e,t)=>e.index>=t.index?1:-1;var h=new c;t.default=h},86484:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Sticker=void 0;var s=i(a(19976)),n=i(a(25291)),o=r(a(61247)),l=r(a(28278)),d=i(a(8603)),u=a(96645),c=i(a(40210)),h=a(47410);a(59420);function f(){var e=(0,s.default)(["id: ",", error: ",""]);return f=function(){return e},e}var p=(0,n.default)((()=>new _({id:"placeholder",isPlaceholder:!0})));class m extends o.default{constructor(...e){super(...e),this.id=(0,o.prop)(),this.mediaData=(0,o.session)(),this.mediaObject=(0,o.prop)(),this.deprecatedMms3Url=(0,o.prop)(),this.directPath=(0,o.prop)(),this.filehash=(0,o.prop)(),this.height=(0,o.prop)(),this.index=(0,o.prop)(),this.mediaKey=(0,o.prop)(),this.mediaKeyTimestamp=(0,o.prop)(),this.mimetype=(0,o.prop)(),this.size=(0,o.prop)(),this.type=(0,o.prop)(u.OUTWARD_TYPES.STICKER),this.encFilehash=(0,o.prop)(),this.width=(0,o.prop)(),this.isPlaceholder=(0,o.prop)()}initialize(){super.initialize(),this.addChild("mediaData",new d.default),this.isPlaceholder||l.registerSticker(this)}downloadMedia(){return l.downloadStickerOrStickerPackIcon(this,"STICKER").catch((e=>{__LOG__(4,void 0,new Error,!0)(f(),this.id,String(e.stack||e)),SEND_LOGS("sticker-panel:sticker download failed")}))}sendToChat(e,t){a(49569).default.enqueue([this]),this.mediaData&&this.mediaData.mediaBlob&&this.mediaData.mediaBlob.retain();var{ctwaContextLinkData:r,ctwaContext:i}=e.getComposeContents(),s={quotedMsg:e.composeQuotedMsg,ctwaContext:(0,h.prepareCtwaContextSend)(r,i)};return e.composeQuotedMsg=null,(0,l.prepSticker)(this).sendToChat(e,s).then((e=>{var a,r=new c.default.StickerSend({stickerSendOrigin:t.stickerSendOrigin,stickerIsAnimated:Boolean(null===(a=this.mediaData)||void 0===a?void 0:a.isAnimated)});return null!=t.stickerIsFirstParty&&(r.stickerIsFirstParty=t.stickerIsFirstParty),r.commit(),e}))}delete(){super.delete(),l.deregisterSticker(this)}}t.Sticker=m,m.Proxy="sticker",m.getPlaceholder=p;var _=(0,o.defineModel)(m);_.getPlaceholder=p;var v=_;t.default=v},93771:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.StickerCollection=t.FETCH_STATE=void 0;var i=r(a(54019)),s=r(a(86484));t.FETCH_STATE={PENDING:"PENDING",SUCCESS:"SUCCESS",ERROR:"ERROR"};class n extends i.default{fetch(){throw new Error("".concat(this.constructor.name,".fetch is not implemented"))}}t.StickerCollection=n,n.model=s.default;var o=new n;t.default=o},70275:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.StickerPack=t.PRE_PLACEHOLDER_ID=void 0;var s=i(a(19976)),n=r(a(61247)),o=i(a(8603)),l=a(96645),d=i(a(89664));function u(){var e=(0,s.default)(["id: ",", error: ",""]);return u=function(){return e},e}var c="placeholder:";t.PRE_PLACEHOLDER_ID=c;var h=({index:e,page:t})=>new p({id:"".concat(c).concat(e),index:e,page:t});class f extends n.default{constructor(...e){super(...e),this.id=(0,n.prop)(),this.index=(0,n.prop)(),this.name=(0,n.prop)(),this.page=(0,n.prop)(),this.url=(0,n.prop)(),this.mimetype=(0,n.prop)("image/png"),this.mediaData=(0,n.session)(),this.mediaObject=(0,n.prop)(),this.directPath=(0,n.prop)(),this.filehash=(0,n.prop)(),this.mediaKey=(0,n.prop)(),this.mediaKeyTimestamp=(0,n.prop)(),this.size=(0,n.prop)(),this.type=(0,n.prop)(l.OUTWARD_TYPES.IMAGE),this.encFilehash=(0,n.prop)(),this.deprecatedMms3Url=(0,n.derived)(this._deprecatedMms3Url,["url","isFirstParty"]),this.stickers=(0,n.derived)(this._getStickersCollection,["id"]),this.isPlaceholder=(0,n.derived)(this._isPlaceholder,["id"]),this.isFirstParty=(0,n.derived)(this._isFirstParty,["url","mediaKey"])}_deprecatedMms3Url(){return this.isFirstParty?"":this.url}_isPlaceholder(){return f.isPlaceholderId(this.id)}_isFirstParty(){return Boolean(this.url)&&!this.mediaKey}_getStickersCollection(){return this._stickers=this._stickers||new d.default(this.id.split("#")[0],this.isFirstParty),this._stickers}initialize(){super.initialize(),this.isPlaceholder||this.isFirstParty||(this.addChild("mediaData",new o.default({renderableUrl:""})),a(28278).registerStickerPackIcon(this))}downloadMedia(){return this.isPlaceholder||this.isFirstParty?Promise.resolve():a(28278).downloadStickerOrStickerPackIcon(this,"STICKER_PACK").catch((e=>{__LOG__(4,void 0,new Error,!0)(u(),this.id,String(e.stack||e)),SEND_LOGS("sticker-panel:sticker-pack download failed")}))}delete(){super.delete(),a(28278).deregisterStickerPackIcon(this)}}t.StickerPack=f,f.Proxy="stickerPack",f.createPlaceholder=h,f.isPlaceholderId=e=>new RegExp("^".concat(c)).test(e);var p=(0,n.defineModel)(f),m=p;t.default=m,p.createPlaceholder=h,p.isPlaceholderId=f.isPlaceholderId},23054:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.StickerPackCollection=t.PAGE_FETCH_STATE=t.PAGE_SIZE_POPUP=t.PAGE_SIZE_COMPOSE_BOX=void 0;var i=r(a(70417)),s=r(a(19976)),n=r(a(52954)),o=r(a(61258)),l=r(a(13888)),d=r(a(54019)),u=r(a(70275)),c=r(a(76022));function h(){var e=(0,s.default)(["StickerPack page fetch promise cancelled: ",""]);return h=function(){return e},e}t.PAGE_SIZE_COMPOSE_BOX=9;t.PAGE_SIZE_POPUP=6;var f={PENDING:"PENDING",SUCCESS:"SUCCESS",ERROR:"ERROR"};t.PAGE_FETCH_STATE=f;class p extends d.default{constructor(){super(),this.checksum=null,this._pageFetchPromises={},this.pageFetchStates={},this._handleChecksumChange=()=>{Object.keys(this.pageFetchStates).forEach((e=>this._resetFetchPageStateAndPromise(parseInt(e,10)))),this._resetRangeWithPlaceholders(0,this.length),this.fetchAt(0,!1,!0)},this.listenTo(this,"change:checksum",this._handleChecksumChange)}createPlaceholder(e){return p.createPlaceholder(e)}preFetch(){var e=this;return(0,n.default)((function*(){yield e.fetchAt(0).then((()=>Promise.all(e.filter((e=>e.isFirstParty)).map((e=>e.stickers.fetch())))))}))()}fetchAt(e,t,a){return this._fetchPageWithIndex(e,Boolean(t),Boolean(a))}hasFetchedData(){return Object.keys(this.pageFetchStates).some((e=>this.pageFetchStates[parseInt(e,10)]===f.SUCCESS))}isFetchingData(){return Object.keys(this.pageFetchStates).some((e=>this.pageFetchStates[parseInt(e,10)]===f.PENDING))}pageWithIndex(e){return p.pageWithIndex(e)}reset(){return this.setChecksum(null,{silent:!0}),Object.keys(this.pageFetchStates).forEach((e=>this._resetFetchPageStateAndPromise(parseInt(e,10)))),super.reset()}sync(e){this.setChecksum(e)}setChecksum(e,t){return this.checksum!==e&&(this.checksum=e,t&&t.silent||this.trigger("change:checksum",e),!0)}_fetchPageWithIndex(e,t,a){var r=this.pageWithIndex(e);return this._fetchPage(r,t,a)}_fetchPage(e,t,a){var r,i=this.pageFetchStates[e];if(t&&i!==f.PENDING&&(r=this._pageFetchPromises[e])&&(r.cancel(),delete this._pageFetchPromises[e]),r=this._pageFetchPromises[e])return r;var s=this.length;return this._insertPagePlaceholders(e),this._setFetchPageState(e,f.PENDING),this._pageFetchPromises[e]=c.default.queryStickerPacks(e,9).cancellable().then((t=>{var r=this._parseStickerPacksRes(e,t),i=a||this.setChecksum(t.checksum,{silent:!0}),n=9*(e-1),o=9*(e+0);this._resetRange(n,o,r),i&&(this._resetRangeWithPlaceholders(0,n),this._resetRangeWithPlaceholders(Math.min(n+r.length,o),t.count));var l=this.length;s!==l&&this.trigger("change:length",l),this._setFetchPageState(e,f.SUCCESS)})).catch((t=>{if(t instanceof Promise.CancellationError)return __LOG__(2)(h(),e),void this._unsetFetchPageStateAndPromise(e);this._setFetchPageState(e,f.ERROR)})),this._pageFetchPromises[e]}_insertPagePlaceholders(e){var t=e-1;this._resetRangeWithPlaceholders(9*t,9*(t+1))}_parseStickerPacksRes(e,t){if(200!==t.status||!t.data)throw new Error("sticker packs query error");return t.data.map(((t,a)=>(0,i.default)((0,i.default)({},(0,l.default)(t,["id","mimetype","name","url","mediaKey","filehash","directPath"])),{},{encFilehash:t.encFilehash,page:e,index:9*(e-1)+a})))}_resetRangeWithPlaceholders(e,t){this._resetRange(e,t,(0,o.default)(t-e,(t=>p.createPlaceholder(e+t))))}_resetRange(e,t,a){this._forEachInRange(e,t,((t,r)=>{var i=a[r-e];if(t)if(i)t.id===i.id?(this.remove(t,{silent:!0}),this.add(i)):(this.remove(t),this.add(i));else for(var s=t;s;)this.remove(s),s=this.at(r);else i&&this.add(i)}))}_forEachInRange(e,t,a){for(var r=e;r<t;r++){a(this.at(r),r)}}_resetFetchPageStateAndPromise(e){e in this.pageFetchStates&&(this.pageFetchStates[e]===f.PENDING?this._pageFetchPromises[e].cancel():this._unsetFetchPageStateAndPromise(e))}_setFetchPageState(e,t){this.pageFetchStates[e]!==t&&(this.pageFetchStates[e]=t,this.trigger("change:pageFetchStates",e,t))}_unsetFetchPageState(e){e in this.pageFetchStates&&(delete this.pageFetchStates[e],this.trigger("change:pageFetchStates",e))}_unsetFetchPageStateAndPromise(e){delete this._pageFetchPromises[e],this._unsetFetchPageState(e)}}t.StickerPackCollection=p,p.model=u.default,p.comparator=function(e,t){return e.index<t.index?-1:e.index>t.index?1:0},p.createPlaceholder=function(e){return u.default.createPlaceholder({index:e,page:this.pageWithIndex(e)})},p.pageWithIndex=function(e){return Math.floor(e/9)+1};var m=new p;t.default=m},89664:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"FETCH_STATE",{enumerable:!0,get:function(){return d.FETCH_STATE}}),t.default=void 0;var i=r(a(70417)),s=r(a(13888)),n=a(87951),o=a(93771),l=r(a(76022)),d=a(93771);class u extends o.StickerCollection{constructor(e,t){super(),this._parseStickersRes=e=>{if(200!==e.status||!e.data)throw new Error("sticker pack stickers query error");return e.data.map(((e,t)=>(0,i.default)((0,i.default)({},(0,s.default)(e,["directPath","mimetype","mediaKey","filehash","width","height"])),{},{index:t,id:e.filehash,deprecatedMms3Url:e.url,encFilehash:e.encFilehash,mediaKeyTimestamp:0})))},this.stickerPackId=e,this.isFirstParty=t;var a,r=u._cache[this.stickerPackId];if(r)return r;var n=this;Object.defineProperty(this,"fetchState",{get:()=>a,set(e){a!==e&&(a=e,n.trigger("change:fetchState",e))}})}fetch(e){return e&&this.fetchState!==o.FETCH_STATE.PENDING&&delete this._fetchPromise,this._fetchPromise?this._fetchPromise:(this.fetchState=o.FETCH_STATE.PENDING,a(70275).default.isPlaceholderId(this.stickerPackId)?(this._fetchPromise=new Promise((()=>{})),this._fetchPromise):(t=this.isFirstParty?(0,n.fetchFirstPartyStickers)(this.stickerPackId):l.default.queryStickersInStickerPack(this.stickerPackId).then(this._parseStickersRes),this._fetchPromise=t.then((e=>{var t=Math.max(this.length||e.length);this._resetRange(0,t,e),this.fetchState=o.FETCH_STATE.SUCCESS})).catch((()=>{this.fetchState=o.FETCH_STATE.ERROR})),this._fetchPromise));var t}_resetRange(e,t,a){this._forEachInRange(e,t,((t,r)=>{var i=a[r-e];t?i?t.id===i.id?t.set(i):(this.remove(t),this.add(i)):this.remove(t):i&&this.add(i)}))}_forEachInRange(e,t,a){for(var r=e;r<t;r++){a(this.at(r),r)}}}t.default=u,u._cache={},u.comparator=(e,t)=>e.index<t.index?-1:e.index>t.index?1:0},84517:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.StickerSearchCollection=void 0;var i=r(a(19976)),s=r(a(52954)),n=r(a(54019)),o=(a(12097),r(a(12396))),l=r(a(11632)),d=a(18920),u=r(a(86484));function c(){var e=(0,i.default)(["Sticker search request failed: error: ",""]);return c=function(){return e},e}function h(){var e=(0,i.default)(["StickerMoodCollection cache was invalid, re-searching."]);return h=function(){return e},e}var f={HAPPY:["😂","🤣","😀","😁","😆","🙂","😇","☺️","😄","😃"],LOVE:["😍","😘","❤️","💕","🥰","😗","😙","😻","👩‍❤️‍👩","💐","💌","💛","💚","💙","💜","💓","💘","💏","💑","🌹","🤟","🏩"],GREETINGS:["👋","😂","🤣","🙏","✋","🧕","🚶‍♀️","🚶","👠","🥾","🙈","🦛","🌺","⚡","🎯","🚄","🚅","💒","🛕","🛣️","🕉️","🔊"],SAD:["😭","😔","😢","😞","😟","😕","🙁","☹️","😖","😫","😩","🥺","😥","😓","😪","😿","💧","💔"],ANGRY:["😠","😡","😤","👺","💢","🗯️","👿"],CELEBRATE:["🥳","🥂","🎈","🎊","🎉"]};class p extends n.default{constructor(...e){super(...e),this._cache=new Map,this._hasFetched=!1,this._isFetching=!0}hasFetchedData(){return this._hasFetched||this._isFetching}search(e){var t=()=>super.delete,a=this;return(0,s.default)((function*(){a._lastQuery!==e&&a._hasFetched&&t().call(a);var r=e.trim().toUpperCase();if(a._cache.has(e)){var i=a._cache.get(e);if(null!=i)return a.add(i),void(a._lastQuery=e);__LOG__(2)(h())}var s=[];if(f.hasOwnProperty(r))s.push(...f[r]);else{var n=o.default.containsOnlyEmoji(r)?o.default.splitEmojis(r):(0,l.default)(e);if(null==n)return void t().call(a);s.push(...n)}a._isFetching=!0;var u=[];try{u=yield(0,d.searchFirstPartyStickers)(s)}catch(e){return __LOG__(3,void 0,void 0,!0)(c(),e),SEND_LOGS("sticker-search-request-failed"),void(a._isFetching=!1)}a._cache.set(e,u),a._isFetching=!1,a._hasFetched=!0,a._lastQuery=e,a.add(u)}))()}searchMood(e){return this.search(e)}delete(){super.delete(),this._cache={},this._hasFetched=!1,this._isFetching=!1}}t.StickerSearchCollection=p,p.model=u.default;var m=new p;t.default=m},73298:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(19976)),n=i(a(67304)),o=i(a(35676)),l=r(a(61247)),d=i(a(90980));function u(){var e=(0,s.default)(["model:Chat:replaceMsgsCollection:",""]);return u=function(){return e},e}function c(){var e=(0,s.default)(["models:Chat:removeMsg ",""]);return c=function(){return e},e}class h extends l.default{constructor(...e){super(...e),this.id=(0,l.prop)(),this.pendingMsgs=(0,l.prop)(),this.labels=(0,l.prop)(),this.msgChunks=(0,l.session)((()=>[])),this.lastReceivedKey=(0,l.session)(),this.unreadMsgAnchor=(0,l.session)(),this.disableUnreadAnchor=(0,l.session)(),this.msgsLength=(0,l.session)(),this.msgsChanged=(0,l.session)(0),this.msgs=(0,l.collection)(d.default)}initialize(){super.initialize(),this.listenTo(this.msgs,"change:last",(()=>{this.msgsChanged++})),this.listenTo(this.msgs,"add remove bulk_add",(()=>{this.msgsChanged++,this.msgsLength=this.msgs.length}))}onEmptyMRM(){throw new Error("onEmptyMRM not implemented")}delete(){super.delete(),this.getAllCMCs().forEach((e=>{e.forEach((e=>{e.delete()})),e.delete()}))}removeMsg(e){var t=e.msgChunk;t&&(t.indexOf(e)<0||(__LOG__(2)(c(),e.get("id")),t.remove(e),0===t.length&&(t===this.msgs?this.onEmptyMRM():this.removeMsgsCollection(t))))}getAllCMCs(){return this.msgChunks.concat([this.msgs])}getAllMsgs(){return(0,o.default)(this.getAllCMCs().map((e=>e.getModelsArray())))}replaceMsgsCollection(e){__LOG__(2)(u(),this.id.toString());var t={msg:e.last()};this.msgs.replace(e),this.notifyMsgCollectionMerge(e,this.msgs,this.msgs,t),this.msgChunks=(0,n.default)(this.msgChunks,e),e.delete()}removeMsgsCollection(e){this.msgChunks=(0,n.default)(this.msgChunks,e),e.delete()}notifyMsgCollectionMerge(e,t,a,r){this.trigger("change:cmc:merge",e,t,a,r)}}t.default=h},13274:(e,t,a)=>{"use strict";var r=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(61247));class s extends i.default{constructor(...e){super(...e),this.id=(0,i.prop)(),this.displayText=(0,i.prop)(),this.subtype=(0,i.prop)(),this.url=(0,i.prop)(),this.phoneNumber=(0,i.prop)(),this.selectionId=(0,i.prop)(),this.selected=(0,i.session)(!1)}}s.Proxy="templateButton";var n=(0,i.defineModel)(s);t.default=n},10750:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.TemplateButtonCollection=void 0;var i=r(a(54019)),s=r(a(13274));class n extends i.default{}t.TemplateButtonCollection=n,n.model=s.default,n.comparator=(e,t)=>e.id<t.id?-1:e.id>t.id?1:0;var o=n;t.default=o},76485:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(54019)),s=r(a(27e3));class n extends i.default{}t.default=n,n.model=s.default,n.comparator=function(e,t){return t.t-e.t}},60156:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.persistGroupMetadata=function(){i.default.supportsFeature(i.default.F.MD_BACKEND);return Promise.resolve()},t.getGroupMetadataFromStorage=function(){i.default.supportsFeature(i.default.F.MD_BACKEND);return Promise.resolve(null)};r(a(52954));var i=r(a(18120))},54074:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.removeMessagesFromHistory=function(){i.default.supportsFeature(i.default.F.MD_BACKEND);return Promise.resolve()};r(a(19976));var i=r(a(18120))},69627:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.msgFindQuery=function(e,t){if(null!=t.label)return Promise.resolve([]);if("before"===e)return function(e,t=20){s.default.supportsFeature(s.default.F.MD_BACKEND)&&n.default;return Promise.resolve([])}(0,t.count);if("after"===e)return function(e,t=20){s.default.supportsFeature(s.default.F.MD_BACKEND)&&n.default;return Promise.resolve([])}(0,t.count).catchType(d,(()=>({status:404})));if("star"===e){null==t.id||new n.default(t);return null!=t.chat?function(){s.default.supportsFeature(s.default.F.MD_BACKEND);return Promise.resolve([])}(t.chat,t.count):function(){s.default.supportsFeature(s.default.F.MD_BACKEND);return Promise.resolve([])}(t.count)}if("search"===e){var r={};t.remote&&(r.remote=t.remote.toString()),t.count&&t.page>=0&&(r.limit=t.count,r.page=t.page);var{default:i}=a(11809);return i.search(t.searchTerm,r)}if("media"===e){t.remote,null==t.id||new n.default(t);return"document"===t.media||"url"===t.media?u(t.count,t.direction).then((e=>e.map(o.hydrateMessage))):Promise.all([u(t.count,t.direction).then((e=>e.map(o.hydrateMessage))),u(t.count,t.direction).then((e=>e.map(o.hydrateMessage))),u(t.count,t.direction).then((e=>e.map(o.hydrateMessage)))]).then((([e,t,a])=>{var r=[e,a,t].flat();return{docCount:t.length,linkCount:a.length,mediaCount:e.length,messages:r}}))}return __LOG__(3)(l(),e),Promise.reject(new Error("Message query type ".concat(e," not implemented.")))},t.queryVcard=function(){s.default.supportsFeature(s.default.F.MD_BACKEND);return Promise.resolve()},t.getMsgByMsgKey=function(){s.default.supportsFeature(s.default.F.MD_BACKEND);return Promise.resolve(null)},t.getMsgsByMsgKey=function(){s.default.supportsFeature(s.default.F.MD_BACKEND);return Promise.resolve([])};var i=r(a(19976)),s=r(a(18120)),n=r(a(77865)),o=a(95197);function l(){var e=(0,i.default)(["Message query type "," not implemented."]);return l=function(){return e},e}class d extends Error{constructor(e){super("Anchor message ".concat(e," does not exist in message table")),this.name="NoAnchorMessageError"}}function u(){return s.default.supportsFeature(s.default.F.MD_BACKEND),Promise.resolve([])}},12425:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"storeMessages",{enumerable:!0,get:function(){return r.storeMessages}}),Object.defineProperty(t,"storeInitialSyncMessages",{enumerable:!0,get:function(){return r.storeInitialSyncMessages}}),Object.defineProperty(t,"starMessages",{enumerable:!0,get:function(){return r.starMessages}}),Object.defineProperty(t,"unstarMessages",{enumerable:!0,get:function(){return r.unstarMessages}}),Object.defineProperty(t,"updateMessage",{enumerable:!0,get:function(){return r.updateMessage}}),Object.defineProperty(t,"processRevokeMsg",{enumerable:!0,get:function(){return r.processRevokeMsg}}),Object.defineProperty(t,"storeRecentAndFullHistSyncMessages",{enumerable:!0,get:function(){return r.storeRecentAndFullHistSyncMessages}}),Object.defineProperty(t,"msgFindQuery",{enumerable:!0,get:function(){return i.msgFindQuery}}),Object.defineProperty(t,"getMsgByMsgKey",{enumerable:!0,get:function(){return i.getMsgByMsgKey}}),Object.defineProperty(t,"getMsgsByMsgKey",{enumerable:!0,get:function(){return i.getMsgsByMsgKey}}),Object.defineProperty(t,"queryVcard",{enumerable:!0,get:function(){return i.queryVcard}}),Object.defineProperty(t,"removeMessagesFromHistory",{enumerable:!0,get:function(){return s.removeMessagesFromHistory}});var r=a(96141),i=a(69627),s=a(54074)},96141:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.storeInitialSyncMessages=function(){return p.apply(this,arguments)},t.storeRecentAndFullHistSyncMessages=function(){return m.apply(this,arguments)},t.storeMessages=function(){return _.apply(this,arguments)},t.updateMessage=function(){l.default.supportsFeature(l.default.F.MD_BACKEND);return Promise.resolve()},t.starMessages=function(){l.default.supportsFeature(l.default.F.MD_BACKEND);return Promise.resolve()},t.unstarMessages=function(){l.default.supportsFeature(l.default.F.MD_BACKEND);return Promise.resolve()},t.storeMessageInTransaction=function(e,t,a=!1){var r=null==t?e[0].id.remote:t,o=(0,c.beginningOfChat)(r),l=(0,c.endOfChat)(r);return(0,u.getStorage)().lock(["message","fts-indexing-queue"],function(){var t=(0,s.default)((function*([t,s]){var u=t.all({reverse:!a,limit:1,index:["rowId"],returnKeyType:"keys"}).then((e=>0===e.length?f:e[0])),h=t.between(["internalId"],o,l,{limit:1,reverse:!a,returnKeyType:"keys"}).then((e=>0===e.length?f:(0,c.getInChatMsgId)(e[0]))),[p,m]=yield Promise.all([u,h]),_=a?p-e.length:p+1,E=a?m-e.length:m+1,y=e.map(((e,t)=>function(e,t,a,r,s){var o=[n.default.MSG_TYPE.IMAGE,n.default.MSG_TYPE.VIDEO,n.default.MSG_TYPE.AUDIO].includes(e.type),l=(0,i.default)((0,i.default)({},e),{},{vcardWAids:e.vcardWAids||v(e),id:e.id.toString(),isStarred:e.star?r:void 0,hasLink:"chat"===e.type&&a?r:void 0,isMediaMsg:o?r:void 0,isDocMsg:e.type===n.default.MSG_TYPE.DOCUMENT?r:void 0,expiredTimestamp:g(e)});null!=r&&(l.rowId=r,l.isOffline=null==e.offlineBuffer?void 0:r);null!=s&&(l.internalId=(0,c.craftInternalId)(t,s));null==e.offlineBuffer&&(l.isOffline=void 0,l.offline=void 0);return l}((0,c.convertToMessageRowType)(e),r.toString(),!!(0,d.findLink)(e.body,!0),_+t,E+t)));return Promise.all([t.bulkCreate(y),s.bulkCreate(y.map((e=>({id:e.id}))))]).then((()=>{}))}));return function(){return t.apply(this,arguments)}}())},t.processRevokeMsg=function(){l.default.supportsFeature(l.default.F.MD_BACKEND);return Promise.resolve()};var i=r(a(70417)),s=r(a(52954)),n=r(a(50935)),o=a(27853),l=r(a(18120)),d=a(90088),u=a(77993),c=a(95197),h=a(84990),f=1e9;function p(){return(p=(0,s.default)((function*(){return l.default.supportsFeature(l.default.F.MD_BACKEND),Promise.resolve()}))).apply(this,arguments)}function m(){return(m=(0,s.default)((function*(e=!1){return l.default.supportsFeature(l.default.F.MD_BACKEND),Promise.resolve()}))).apply(this,arguments)}function _(){return(_=(0,s.default)((function*(e=!1){return l.default.supportsFeature(l.default.F.MD_BACKEND),Promise.resolve()}))).apply(this,arguments)}function v(e){var t=[];if("vcard"===e.type)t=[e.body];else{if("multi_vcard"!==e.type)return;t=e.vcardList.map((e=>e.vcard))}return t.filter(Boolean).reduce(((e,t)=>{var a=(0,h.vcardWids)((0,h.parseVcard)(t));return e.concat(a.map((e=>e.toString())))}),[])}function g(e){var{ephemeralDuration:t,ephemeralStartTimestamp:a,t:r,subtype:i,id:{fromMe:s}}=e,n=(0,o.getEphemeralExpirationTimestamp)(t,a,r,i,s);return null!=n?n:void 0}},95197:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.convertToMessageRowType=function(e){var t=(0,s.default)({},e);t.id=e.id.toString(),e.protocolMessageKey&&(t.protocolMessageKey=e.protocolMessageKey.toString());e.paymentRequestMessageKey&&(t.paymentRequestMessageKey=e.paymentRequestMessageKey.toString());return delete t.notifyName,delete t.local,delete t.isNewMsg,delete t.clearMedia,delete t.multicast,delete t.urlNumber,delete t.urlText,delete t.linkPreview,delete t.star,delete t.forwardedFromWeb,t=function(e){var t,a,r,i={currentMsg:{},quotedMsg:{}};if(null===(t=e.paymentNoteMsg)||void 0===t?void 0:t.body){var s,n;i.currentMsg.paymentNoteMsgBody=null===(s=e.paymentNoteMsg)||void 0===s?void 0:s.body,null===(n=e.paymentNoteMsg)||void 0===n||delete n.body}if(null===(a=e.quotedMsg)||void 0===a||null===(r=a.paymentNoteMsg)||void 0===r?void 0:r.body){var l,d,c,h;i.quotedMsg.paymentNoteMsgBody=null===(l=e.quotedMsg)||void 0===l||null===(d=l.paymentNoteMsg)||void 0===d?void 0:d.body,null===(c=e.quotedMsg)||void 0===c||(null===(h=c.paymentNoteMsg)||void 0===h||delete h.body)}f.forEach((t=>{i.currentMsg[t]=e[t],delete e[t]})),e.quotedMsg&&f.forEach((t=>{i.quotedMsg[t]=e[t],delete e.quotedMsg[t]}));var p=(0,o.encodeProto)(u.MsgRowOpaqueDataSpec,i);return e.msgRowOpaqueData=p.readBuffer(),e}(t)},t.hydrateMessage=function(e){var t=(0,s.default)({},e),a=c.default.fromString(t.id),r=t.protocolMessageKey?c.default.fromString(t.protocolMessageKey):void 0,i=t.paymentRequestMessageKey?c.default.fromString(t.paymentRequestMessageKey):void 0,o=p(t);o.id=a,r&&(o.protocolMessageKey=r);i&&(o.paymentRequestMessageKey=i);return t.star=void 0!==t.isStarred,delete t.internalId,delete t.rowId,delete t.isStarred,delete t.count,delete t.offline,delete t.offlineBuffer,delete t.isOffline,delete t.hasLink,delete t.isMediaMsg,delete t.isDocMsg,delete t.expiredTimestamp,t=function(e){var t=(0,n.decodeProto)(u.MsgRowOpaqueDataSpec,e.msgRowOpaqueData);if(t.currentMsg){var a,r;if((null===(a=t.currentMsg)||void 0===a?void 0:a.paymentNoteMsgBody)&&e.paymentNoteMsg)e.paymentNoteMsg.body=null===(r=t.currentMsg)||void 0===r?void 0:r.paymentNoteMsgBody;f.forEach((a=>{var r;e[a]=null===(r=t.currentMsg)||void 0===r?void 0:r[a]}))}if(e.quotedMsg&&t.quotedMsg){var i,s;if(null==t||null===(i=t.quotedMsg)||void 0===i?void 0:i.paymentNoteMsgBody)e.quotedMsg.paymentNoteMsg.body=null===(s=t.quotedMsg)||void 0===s?void 0:s.paymentNoteMsgBody;f.forEach((a=>{var r;e.quotedMsg[a]=null===(r=t.quotedMsg)||void 0===r?void 0:r[a]}))}return e}(t)},t.hydrateWids=p,t.craftMessageRangeIndex=function(e,t,a,r){var i;i=a?m.SystemMessage:t?m.IncomingChatMessage:m.Outgoing;return"".concat(e,"_").concat(i,"_").concat(null!=r?_(r):"")},t.extractC2STimestampFromMessageRangeIndex=function(e){if(e){var t=e.split("_")[2];return t?v(t):null}return null},t.beginningOfMessageRange=function(e,t,a){var r=null!=a?_(a):"";return"".concat(e.toString(),"_").concat(t,"_").concat(r)},t.endOfMessageRange=function(e,t){return"".concat(e.toString(),"_").concat(t,"_g")},t.craftInternalId=function(e,t){var a=_(t);return"".concat(e,"_").concat(a,"_m")},t.getInChatMsgId=function(e){return v(e.split("_")[1])},t.beginningOfChat=function(e){return"".concat(e.toString(),"_/")},t.endOfChat=function(e){return"".concat(e.toString(),"_g")},t.queryChatMessageHelper=function(){return g.apply(this,arguments)},t.getKeyMsgsFromChatHistory=function(){l.default.supportsFeature(l.default.F.MD_BACKEND);return Promise.resolve({anchor:void 0,lastTsMsg:void 0,previewMsg:void 0,lastReceivedKey:void 0})},t.MessagePropertyType=t.MSG_OPAQUE_DATA_KEYS=void 0;var i=r(a(52954)),s=r(a(70417)),n=a(84139),o=a(68519),l=r(a(18120)),d=r(a(80737)),u=a(42451),c=r(a(77865)),h=a(75637),f=["body","caption","clientUrl","loc","lng","lat","paymentAmount1000","canonicalUrl","matchedText","title","description"];function p(e){if(Array.isArray(e))return e.map(((e,t)=>p((0,d.default)(t,e,h.isWidlike,h.createWidFromWidLike))));if(e&&"object"==typeof e){for(var t=Object.keys(e),a=0;a<t.length;a++){var r=t[a];e[r]=p((0,d.default)(r,e[r],h.isWidlike,h.createWidFromWidLike))}return e}return e}t.MSG_OPAQUE_DATA_KEYS=f;var m=a(28103)({IncomingChatMessage:"1",Outgoing:"2",SystemMessage:"3"});function _(e){var t=e.toString(16);return(t.length-1).toString(16)+t}function v(e){return parseInt(e.substring(1),16)}function g(){return(g=(0,i.default)((function*(){return l.default.supportsFeature(l.default.F.MD_BACKEND),Promise.resolve([])}))).apply(this,arguments)}t.MessagePropertyType=m},84066:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.hasBusinessNameVerificationChanged=function(){var e=Promise.resolve(!1);i.default.supportsFeature(i.default.F.MD_BACKEND)||(e=Promise.reject("hasBusinessNameVerificationChanged: not supported without md backend"));return e},t.getAllVerifiedNames=function(){var e=Promise.resolve([]);i.default.supportsFeature(i.default.F.MD_BACKEND)||(e=Promise.reject(new Error("getAllVerifiedNames: not supported without md backend")));return e},t.createOrUpdateVerifiedBusinessName=function(){var e;if(i.default.supportsFeature(i.default.F.MD_BACKEND)){if(!e)return Promise.reject(new Error("createOrUpdateVerifiedBusinessName: not supported for non MD"))}else e=Promise.reject("createOrUpdateVerifiedBusinessName: not supported without md backend");return e};var i=r(a(18120))},89083:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.canBeGroupedAsAlbum=function(e,t){return(e.isGroupMsg?s.default.equals(e.author,t.author):s.default.equals(e.from,t.from))&&e.isForwarded===t.isForwarded&&t.t-e.t<=i.default.ALBUM_DIFF_INTERVAL},t.canBeGroupedWithNext=function(e,t){if(e.isNotification||t.isNotification)return!1;return e.isGroupMsg?s.default.equals(e.author,t.author)&&e.isSentByMe===t.isSentByMe:s.default.equals(e.from,t.from)};var i=r(a(50935)),s=r(a(68384))},16211:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.animateConversationPanel=function(e,t){return(0,i.default)(e,{scaleX:[1,t]},{duration:300,easing:[.1,.82,.25,1]}),1!==t};var i=r(a(91378))},29233:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);t.Z=function({cmd:e,untypedData:t,isExternal:a}){var r=a?f.default.DEEP_LINK_OPEN_FROM.DEEP_LINK_EXTERNAL:f.default.DEEP_LINK_OPEN_FROM.DEEP_LINK_WA_LINK_CLICK;switch(e){case c.APICmd.GROUP_INVITE:return l.default.closeStatusViewer(),l.default.openModal(n.createElement(u.default,{groupCode:t.code})),new f.default.DeepLinkOpen({deepLinkOpenFrom:r,deepLinkType:f.default.DEEP_LINK_TYPE.DEEP_LINK_GROUP_INVITE}).commit(),!0;case c.APICmd.CATALOG:var{catalogOwnerJid:i}=t;return function(e){var t=(new m.default).toString();l.default.openModal(n.createElement(p.default,{chatId:(0,y.createWid)(e),onSuccess:a=>{window.setTimeout((()=>{l.default.openDrawerRight(n.createElement(_.default,{chat:a,sessionId:t,catalogOwnerJid:e}),"slide-left",E.default.Manager.top)}),100)},msgText:null}),{transition:"modal-flow"})}(i),new f.default.DeepLinkOpen({deepLinkOpenFrom:r,deepLinkType:f.default.DEEP_LINK_TYPE.DEEP_LINK_CATALOG}).commit(),!0;case c.APICmd.PRODUCT:var{businessOwnerJid:S,productId:C}=t;return function(e,t){var a=(new m.default).toString();(0,h.logProductDeepLinkOpen)({catalogOwnerJid:e,catalogSessionId:a}),l.default.openModal(n.createElement(p.default,{chatId:(0,y.createWid)(e),onSuccess:r=>{window.setTimeout((()=>{l.default.openDrawerRight(n.createElement(_.default,{chat:r,productInfo:{productId:t,businessOwnerJid:e},refreshCarousel:!0,sessionId:a}),"slide-left",E.default.Manager.top)}),100)},msgText:null}),{transition:"modal-flow"})}(S,C),new f.default.DeepLinkOpen({deepLinkOpenFrom:r,deepLinkType:f.default.DEEP_LINK_TYPE.DEEP_LINK_PRODUCT}).commit(),!0;case c.APICmd.MSG_SEND:l.default.closeStatusViewer();var T=t,{text:M,phone:b,conversionTuple:P}=T,A=g.default.ctwaContextCompose?T.ctwaContextLinkData:void 0;return b?(l.default.openModal(n.createElement(p.default,{chatId:(0,y.createWid)(b),msgText:M,onSuccess:e=>{P&&d.default.add((0,s.default)((0,s.default)({},P),{},{id:e.id,timestamp:o.default.globalUnixTime()}),{merge:!0}),M&&(e.urlText=!0),e.urlNumber=!0},ctwaContextLinkData:A}),{transition:"modal-flow"}),new f.default.DeepLinkOpen({deepLinkOpenFrom:r,deepLinkType:A?f.default.DEEP_LINK_TYPE.DEEP_LINK_CTWA:f.default.DEEP_LINK_TYPE.DEEP_LINK_CHAT}).commit()):(l.default.openModal(n.createElement(v.default,{msgText:M,urlText:!0}),{transition:"modal-flow"}),new f.default.DeepLinkOpen({deepLinkOpenFrom:r,deepLinkType:f.default.DEEP_LINK_TYPE.DEEP_LINK_MSG_FORWARD}).commit()),!0;default:return!1}};var s=i(a(70417)),n=r(a(2784)),o=i(a(19899)),l=i(a(79711)),d=i(a(19744)),u=i(a(24910)),c=a(25675),h=a(83974),f=i(a(40210)),p=i(a(33296)),m=i(a(55043)),_=i(a(13531)),v=i(a(20661)),g=i(a(72424)),E=i(a(20398)),y=a(75637)},96046:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.shouldUnarchiveChat=function(){if((0,i.archiveV2Supported)()){if(n.default.showArchiveV2)return!1;if(!n.default.archive.enabled)return(0,s.setArchiveEnabledSetting)(!0),!1}return!0},t.shouldEnableArchiveV2=function(){var e=a(43334).default.filter((e=>e.archive));return(0,i.archiveV2Supported)()&&!n.default.archive.enabled&&1===e.length};var i=a(75459),s=a(92816),n=r(a(2734))},50846:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(...e){var t=e.reduce(((e,t)=>e+t.byteLength),0),a=new Uint8Array(t),r=0;return e.forEach((e=>{a.set(new Uint8Array(e),r),r+=e.byteLength})),a.buffer}},38307:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(e.byteLength!==t.byteLength)return!1;for(var a=new DataView(e),r=new DataView(t),i=0;i<a.byteLength;i++)if(a.getUint8(i)!==r.getUint8(i))return!1;return!0}},81022:(e,t)=>{"use strict";function a(e,t){return e===t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r=a){if(e===t)return!0;if(e.length!==t.length)return!1;return e.every(((e,a)=>r(e,t[a])))}},86638:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a,r=!1;for(a=0;a<e.length;a++)if(e[a]===t){r=!0;break}if(r){var i=e[a];e.splice(a,1),e.unshift(i)}}},51107:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;return e.every(((e,a)=>e===t[a]))}},97844:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.AudioSession=t.OUTPUT_DEVICES=t.AUDIO_EVENTS=void 0;var i=r(a(28267));t.AUDIO_EVENTS={OUTPUT_ROUTES_CHANGED:"OUTPUT_ROUTES_CHANGED"};t.OUTPUT_DEVICES={UNKNOWN:0,LINE_OUT:1,HEADPHONES:2,BLUETOOTH:3,INTERNAL_RECEIVER:4,INTERAL_SPEAKER:5,HDMI:6,REMOTE:7,BLUETOOTH_LE:8,BLUETOOTH_HANDS_FREE:9,USB:10,CAR:11};t.AudioSession=class{constructor(){}startUse(){}endUse(){}};class s extends i.default{constructor(){super()}startAudioSession(){}isRoutingToOutput(){return!1}get isRoutingToSpeaker(){return null}get outputRoutes(){return[]}get isBluetoothInputAvailable(){return null}overrideOutputRoute(){return Promise.resolve()}}var n=new s;t.default=n},2505:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.b64Equal=function(e,t){var a=e.length,r=t.length;switch(a-r){case-2:return 61===t.charCodeAt(a)&&61===t.charCodeAt(a+1)&&t.substr(0,a)===e;case-1:return 61===t.charCodeAt(a)&&t.substr(0,a)===e;case 0:return e===t;case 1:return 61===e.charCodeAt(r)&&e.substr(0,r)===t;case 2:return 61===e.charCodeAt(r)&&61===e.charCodeAt(r+1)&&e.substr(0,r)===t;default:return!1}}},91612:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){for(var a=atob(e),r=0,i=0;i<a.length;i++){var s=a.charCodeAt(i);r=(((r=((r<<4)+(s>>4))%t)<<4)+(15&s))%t}return r}},76796:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.replace(/\//g,"_").replace(/\+/g,"-")}},91540:(e,t,a)=>{"use strict";var r,i;Object.defineProperty(t,"__esModule",{value:!0}),t.dir=function(e){!function(){if(r)return;var e=a(5172),t=e.length/2;r=new Int32Array(t),i=new Int32Array(t);for(var s=0,n=0;s<t;s++,n+=2)r[s]=e[n]+(0===s?0:r[s-1]),i[s]=e[n+1]}();for(var t=0;t<e.length;t++){var s=0|e.charCodeAt(t);if(55296<=s&&s<56320){if(++t===e.length)break;var n=e.charCodeAt(t);if(!(56320<=n&&n<57344))continue;s=65536+((1023&s)<<10|1023&n)}else if(56320<=s&&s<57344)continue;if(!(s<r[0])){for(var o=0|r.length,l=0,d=o-1|0;l<d;){var u=d+l>>1;if(r[u]>s)d=u-1|0;else{if(r[u+1]>s){d=u;break}l=u+1|0}}var c=i[d],h=r[d]+Math.abs(c)|0;if(s<h)return c<0?"rtl":"ltr"}}return}},14345:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.getBizPrivacyInfoString=function(e,t,a){switch(e){case s.WebMessageInfoBizPrivacyStatus.E2EE:return a?i.default.t(262,{businessName:t}):i.default.t(261,{businessName:t});case s.WebMessageInfoBizPrivacyStatus.FB:return i.default.t(263,{businessName:t});case s.WebMessageInfoBizPrivacyStatus.BSP:return i.default.t(259,{businessName:t});case s.WebMessageInfoBizPrivacyStatus.BSP_AND_FB:return i.default.t(260,{businessName:t})}};var i=r(a(17957)),s=a(21617)},98962:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BIZ_SYSTEM_MSG_SUBTYPES=void 0;t.BIZ_SYSTEM_MSG_SUBTYPES=["blue_msg_e2e_identity_unavailable","blue_msg_bsp_fb_to_bsp_premise","blue_msg_bsp_fb_to_self_fb","blue_msg_bsp_fb_to_self_premise","blue_msg_bsp_fb_unverified","blue_msg_bsp_fb_unverified_to_bsp_premise_verified","blue_msg_bsp_fb_unverified_to_self_fb_verified","blue_msg_bsp_fb_unverified_to_self_premise_verified","blue_msg_bsp_fb_verified","blue_msg_bsp_fb_verified_to_bsp_premise_unverified","blue_msg_bsp_fb_verified_to_self_fb_unverified","blue_msg_bsp_fb_verified_to_self_premise_unverified","blue_msg_bsp_premise_to_self_premise","blue_msg_bsp_premise_unverified","blue_msg_bsp_premise_unverified_to_self_premise_verified","blue_msg_bsp_premise_verified","blue_msg_bsp_premise_verified_to_self_premise_unverified","blue_msg_consumer_to_bsp_fb_unverified","blue_msg_consumer_to_bsp_premise_unverified","blue_msg_consumer_to_self_fb_unverified","blue_msg_consumer_to_self_premise_unverified","blue_msg_self_fb_to_bsp_premise","blue_msg_self_fb_to_self_premise","blue_msg_self_fb_unverified","blue_msg_self_fb_unverified_to_bsp_premise_verified","blue_msg_self_fb_unverified_to_self_premise_verified","blue_msg_self_fb_verified","blue_msg_self_fb_verified_to_bsp_premise_unverified","blue_msg_self_fb_verified_to_self_premise_unverified","blue_msg_self_premise_to_bsp_premise","blue_msg_self_premise_unverified","blue_msg_self_premise_verified","blue_msg_to_bsp_fb","blue_msg_to_consumer","blue_msg_to_self_fb","blue_msg_unverified_to_bsp_fb_verified","blue_msg_unverified_to_bsp_premise_verified","blue_msg_unverified_to_self_fb_verified","blue_msg_unverified_to_verified","blue_msg_verified_to_bsp_fb_unverified","blue_msg_verified_to_bsp_premise_unverified","blue_msg_verified_to_self_fb_unverified","blue_msg_verified_to_unverified"]},97990:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){if(!e)return;var r=[];r.push(e);for(;r.length;){var i=r.shift();if(a(i))return i;r=r.concat(t(i))}}},53388:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(50935)),s=window.matchMedia("\nonly screen and (max-width: ".concat(i.default.LAYOUT_2COLUMNS_MAX_WIDTH,"px)\n")),n={column:s.matches?2:3};s.addListener((function(e){var t=e.matches?2:3;if(n.column!==t){n.column=t;var a=document.createEvent("Event");a.initEvent("columnChange",!0,!0),window.dispatchEvent(a)}}));var o=n;t.default=o},64357:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(29351);class i extends((0,r.customError)("ContactBlocked")){constructor(e,t){super(e),this.contact=t}}t.default=i},17029:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=new class{init(){}get(){return{textsize:0}}set(){}};t.default=a},22885:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=3988292384;function i(e,t){var i=t;for(a||(a=function(){for(var e=new Uint32Array(256),t=0,a=0,i=0;t<256;a=++t){for(i=0;i<8;++i)a=1&a?a>>>1^r:a>>>1;e[t]=a}return e}());e.size();)i=a[255&(i^e.readUint8())]^i>>>8;return~i>>>0}t.default=(e,t=4294967295)=>e.peek(i,t)},38174:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.encryptAndMac=function(e,t,a){return(0,o.aesCbcEncrypt)(e,new Uint8Array(a)).then((e=>new d.default(t).sign(e).then((t=>s.Binary.build(t,e).readBuffer()))))},t.macAndDecrypt=function(e,t,a){return Promise.resolve(new Uint8Array(a)).then((a=>{var r=(0,n.encodeB64)(a.subarray(0,32)),i=a.subarray(32);return new d.default(t).sign(i).then((t=>{var a=(0,n.encodeB64)(t);if(r!==a)throw __LOG__(3)(u(),r,a),new Error("macAndDecrypt HMAC mismatch");return(0,o.aesCbcDecrypt)(e,i)}))}))},t.alignChunkSizeToMultipleAesBlockSize=c,t.alignChunkLengthsToMultipleOfAesBlockSize=function(e,t){for(var a=[],r=0,i=0,s=0,n=0;n<e.length;++n){if(r+=e[n],n===e.length-1&&null!=t){r>i?a.push(t-i):(a.pop(),a.push(t-s));break}if(r>i){var o=c(r-i);s=i,a.push(o),i+=o}}return a},t.removeEncryptedPadding=function(e,t){var a=e.slice(-t.byteLength);if((0,l.default)(a,t))return e.slice(0,e.byteLength-t.byteLength);return e};var i=r(a(19976)),s=a(46378),n=a(60339),o=a(9729),l=r(a(38307)),d=r(a(36398));function u(){var e=(0,i.default)(["crypto:macAndDecrypt HMAC don't match "," vs. ",""]);return u=function(){return e},e}function c(e){return 16*parseInt((e+15)/16,10)}},40571:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return Promise.resolve(s.default.digest({name:"SHA-256"},e).then(i.encodeB64))};var i=a(60339),s=r(a(84025))},37356:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.format=function(e,t){return d(o(),e,t)},t.formatToParts=function(e,t){var a=o(),r=l(a),i=u(a,e),s=d(a,e,t).replace(i,"").trim(),n=s.indexOf(r),c=-1===n?s:s.substring(0,n),h=-1===n?"":s.substring(n);return{symbol:i,integer:c,decimal:h}},t.formatLocalSymbol=function(e){return u(n[e],e)},t.valueFromString=c,t.parseValueFromString=h,t.validatePriceString=function(e,t,a,r){var s=o(),n=void 0!==i.CURRENCY_DIGITS[e]?i.CURRENCY_DIGITS[e]:i.DEFAULT_DIGITS,d=c(e,t),u=t.replace(/\D+$/g,""),h=l(s);if(null!=a&&d<a)return!1;if(null!=r&&d>r)return!1;if(isNaN(d)||u!==t||(t.split(h)[1]||"").length>n)return!1;return!0},t.currencyForCountryShortcode=function(e){var t=i.REGION_TO_CURRENCY[e.toUpperCase()];return(null==t?void 0:t.length)>0?t[0]:i.DEFAULT_CURRENCY};var i=a(43577),s=r(a(17957)),n={IDR:"in-ID",MXN:"es-MX",INR:"en-IN"},o=()=>[s.default.getFullLocale(),s.default.getLocale()].filter(Boolean);function l(e){return new Intl.NumberFormat(e).format(1.1).substring(1,2)}function d(e,t,a){return new Intl.NumberFormat(e,{style:"currency",currency:t}).format(a/1e3)}function u(e,t){return d(e,t,0).replace(/\d+([,.]\d+)?/g,"").trim()}function c(e,t){var a=o(),r=u(a,e),i=function(e){return new Intl.NumberFormat(e).format(1e4).substring(2,3)}(a);return h(t,r,l(a),i)}function h(e,t,a,r){var i=e.replace(t,"").trim().split(r).join(""),s=parseFloat(i.replace(a,".")||"0");return Math.round(1e3*s)}},43577:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.REGION_TO_CURRENCY=t.CURRENCY_DIGITS=t.DEFAULT_DIGITS=t.MAX_FRACTION_DIGITS=t.DEFAULT_CURRENCY=void 0;t.DEFAULT_CURRENCY="USD";t.MAX_FRACTION_DIGITS=4;t.DEFAULT_DIGITS=2;t.CURRENCY_DIGITS={ADP:0,AFN:0,ALL:0,BHD:3,BIF:0,BYR:0,CLF:4,CLP:0,DJF:0,ESP:0,GNF:0,IQD:0,IRR:0,ISK:0,ITL:0,JOD:3,JPY:0,KMF:0,KPW:0,KRW:0,KWD:3,LAK:0,LBP:0,LUF:0,LYD:3,MGA:0,MGF:0,MMK:0,MRO:0,OMR:3,PYG:0,RSD:0,RWF:0,SLL:0,SOS:0,STD:0,SYP:0,TMM:0,TND:3,TRL:0,UGX:0,UYI:0,UYW:4,VND:0,VUV:0,XAF:0,XOF:0,XPF:0,YER:0,ZMK:0,ZWD:0};t.REGION_TO_CURRENCY={AC:["SHP"],AD:["EUR"],AE:["AED"],AF:["AFN"],AG:["XCD"],AI:["XCD"],AL:["ALL"],AM:["AMD"],AO:["AOA"],AR:["ARS"],AS:["USD"],AT:["EUR"],AU:["AUD"],AW:["AWG"],AX:["EUR"],AZ:["AZN"],BA:["BAM"],BB:["BBD"],BD:["BDT"],BE:["EUR"],BF:["XOF"],BG:["BGN"],BH:["BHD"],BI:["BIF"],BJ:["XOF"],BL:["EUR"],BM:["BMD"],BN:["BND"],BO:["BOB"],BQ:["USD"],BR:["BRL"],BS:["BSD"],BT:["BTN","INR"],BV:["NOK"],BW:["BWP"],BY:["BYN"],BZ:["BZD"],CA:["CAD"],CC:["AUD"],CD:["CDF"],CF:["XAF"],CG:["XAF"],CH:["CHF"],CI:["XOF"],CK:["NZD"],CL:["CLP"],CM:["XAF"],CN:["CNY"],CO:["COP"],CR:["CRC"],CU:["CUP","CUC"],CV:["CVE"],CW:["ANG"],CX:["AUD"],CY:["EUR"],CZ:["CZK"],DE:["EUR"],DG:["USD"],DJ:["DJF"],DK:["DKK"],DM:["XCD"],DO:["DOP"],DZ:["DZD"],EA:["EUR"],EC:["USD"],EE:["EUR"],EG:["EGP"],EH:["MAD"],ER:["ERN"],ES:["EUR"],ET:["ETB"],EU:["EUR"],FI:["EUR"],FJ:["FJD"],FK:["FKP"],FM:["USD"],FO:["DKK"],FR:["EUR"],GA:["XAF"],GB:["GBP"],GD:["XCD"],GE:["GEL"],GF:["EUR"],GG:["GBP"],GH:["GHS"],GI:["GIP"],GL:["DKK"],GM:["GMD"],GN:["GNF"],GP:["EUR"],GQ:["XAF"],GR:["EUR"],GS:["GBP"],GT:["GTQ"],GU:["USD"],GW:["XOF"],GY:["GYD"],HK:["HKD"],HM:["AUD"],HN:["HNL"],HR:["HRK"],HT:["HTG","USD"],HU:["HUF"],IC:["EUR"],ID:["IDR"],IE:["EUR"],IL:["ILS"],IM:["GBP"],IN:["INR"],IO:["USD"],IQ:["IQD"],IR:["IRR"],IS:["ISK"],IT:["EUR"],JE:["GBP"],JM:["JMD"],JO:["JOD"],JP:["JPY"],KE:["KES"],KG:["KGS"],KH:["KHR"],KI:["AUD"],KM:["KMF"],KN:["XCD"],KP:["KPW"],KR:["KRW"],KW:["KWD"],KY:["KYD"],KZ:["KZT"],LA:["LAK"],LB:["LBP"],LC:["XCD"],LI:["CHF"],LK:["LKR"],LR:["LRD"],LS:["ZAR","LSL"],LT:["EUR"],LU:["EUR"],LV:["EUR"],LY:["LYD"],MA:["MAD"],MC:["EUR"],MD:["MDL"],ME:["EUR"],MF:["EUR"],MG:["MGA"],MH:["USD"],MK:["MKD"],ML:["XOF"],MM:["MMK"],MN:["MNT"],MO:["MOP"],MP:["USD"],MQ:["EUR"],MR:["MRU"],MS:["XCD"],MT:["EUR"],MU:["MUR"],MV:["MVR"],MW:["MWK"],MX:["MXN"],MY:["MYR"],MZ:["MZN"],NA:["NAD","ZAR"],NC:["XPF"],NE:["XOF"],NF:["AUD"],NG:["NGN"],NI:["NIO"],NL:["EUR"],NO:["NOK"],NP:["NPR"],NR:["AUD"],NU:["NZD"],NZ:["NZD"],OM:["OMR"],PA:["PAB","USD"],PE:["PEN"],PF:["XPF"],PG:["PGK"],PH:["PHP"],PK:["PKR"],PL:["PLN"],PM:["EUR"],PN:["NZD"],PR:["USD"],PS:["ILS","JOD"],PT:["EUR"],PW:["USD"],PY:["PYG"],QA:["QAR"],RE:["EUR"],RO:["RON"],RS:["RSD"],RU:["RUB"],RW:["RWF"],SA:["SAR"],SB:["SBD"],SC:["SCR"],SD:["SDG"],SE:["SEK"],SG:["SGD"],SH:["SHP"],SI:["EUR"],SJ:["NOK"],SK:["EUR"],SL:["SLL"],SM:["EUR"],SN:["XOF"],SO:["SOS"],SR:["SRD"],SS:["SSP"],ST:["STN"],SV:["USD"],SX:["ANG"],SY:["SYP"],SZ:["SZL"],TA:["GBP"],TC:["USD"],TD:["XAF"],TF:["EUR"],TG:["XOF"],TH:["THB"],TJ:["TJS"],TK:["NZD"],TL:["USD"],TM:["TMT"],TN:["TND"],TO:["TOP"],TR:["TRY"],TT:["TTD"],TV:["AUD"],TW:["TWD"],TZ:["TZS"],UA:["UAH"],UG:["UGX"],UM:["USD"],US:["USD"],UY:["UYU"],UZ:["UZS"],VA:["EUR"],VC:["XCD"],VE:["VES"],VG:["USD"],VI:["USD"],VN:["VND"],VU:["VUV"],WF:["XPF"],WS:["WST"],XK:["EUR"],YE:["YER"],YT:["EUR"],ZA:["ZAR"],ZM:["ZMW"],ZW:["USD"]}},26823:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Node=void 0;var i=r(a(19976)),s=r(a(12436)),n=r(a(47677));function o(){var e=(0,i.default)(["Blob size is larger than the limit of the whole store."]);return o=function(){return e},e}class l{constructor(e,t){this.key=e,this.value=t,this.prev=null,this.next=null}}t.Node=l;t.default=class{constructor(e){var t;this.schedulePurge=(0,s.default)((()=>{this.purgeNow()}),1e3,{leading:!1}),this._keyToNode={},this._sizeLimit=e.sizeLimit,this._getSize=e.getSize,this._onPurge=e.onPurge,this._shouldEvict=null!==(t=e.shouldEvict)&&void 0!==t?t:()=>!0,this._onEvict=e.onEvict,this._onAdd=e.onAdd,this._onDelete=e.onDelete,this._currentSize=0,this._dummyHead=new l("dummy-head",null),this._dummyTail=new l("dummy-tail",null),this._dummyHead.next=this._dummyTail,this._dummyTail.prev=this._dummyHead}get(e){if(!this._keyToNode.hasOwnProperty(e))return null;var t=this._keyToNode[e];if(null==t)return null;var a=t.prev,r=t.next;a&&(a.next=r),r&&(r.prev=a);var i=this._dummyHead.next;if(null==i)throw new Error("The linked list is not constructed properly.");return this._dummyHead.next=t,i.prev=t,t.prev=this._dummyHead,t.next=i,t.value}has(e){return this._keyToNode.hasOwnProperty(e)}touch(e){this.get(e)}put(e,t){0!==this._sizeLimit&&(this._getSize(t)>this._sizeLimit?__LOG__(3)(o()):(this.delete(e),this._add(e,t),this.schedulePurge()))}_add(e,t){var a=new l(e,t);this._keyToNode[e]=a;var r=this._dummyHead.next;if(null==r)throw new Error("The linked list is not constructed properly.");this._dummyHead.next=a,r.prev=a,a.prev=this._dummyHead,a.next=r,this._currentSize+=this._getSize(t),this._onAdd&&this._onAdd(e,t)}delete(e){if(this._keyToNode.hasOwnProperty(e)){var t=this._keyToNode[e];if(null!=t){this._currentSize-=this._getSize(t.value);var a=t.prev,r=t.next;a&&(a.next=r),r&&(r.prev=a),delete this._keyToNode[e],this._onDelete&&this._onDelete(e,t.value)}}}clear(){this._keyToNode={},this._currentSize=0,this._dummyHead.next=this._dummyTail,this._dummyTail.prev=this._dummyHead,this._onClear&&this._onClear()}purgeNow(){for(var e=this._dummyTail.prev;this._currentSize>this._sizeLimit&&e!==this._dummyHead;e=e?e.prev:null){(0,n.default)(null!=e,"The linked list is not constructed properly.");var{key:t,value:a}=e;this._shouldEvict(t,a)&&(this.delete(t),this._onEvict&&this._onEvict(t,a))}this._onPurge&&this._onPurge(this._keyToNode)}}},28515:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=/\r\n/g;t.default=class{constructor(e){this.hasText=()=>this.hasType("text/plain"),this.hasType=e=>this.types.includes(e),this.data=e,this.types=e.types?Array.isArray(e.types)?e.types:Object.keys(e.types).map((t=>e.types[t])):[]}getItems(){if(this.data.items)return Array.prototype.slice.call(this.data.items);var e=this._getFileTypes();return this.types.map((t=>({type:t,data:this.data.getData(t),kind:e.includes(t)?"string":"file"})))}_getFileTypes(){return Array.prototype.slice.call(this.data.files).map((({type:e})=>e))}getText(e){return this._getText(e).then((e=>e?e.replace(a,"\n"):null))}_getText(e){var t=e||[];0===t.length&&t.push("text/plain");var a,{data:r}=this;if(r.getData)return t.some((e=>{if(r.getData(e))return a=r.getData(e),!0})),Promise.resolve(a);var i,s,n,o=(i=this.data.items,s=t,n=Array.from(i),s.reduce(((e,t)=>{var a=n.find((e=>e.type===t));return a&&e.push(a),e}),[]));return o.length?Promise.all(o.map((e=>new Promise((t=>e.getAsString(t)))))).then((e=>e.find((e=>e.length)))):Promise.resolve()}getFiles(){return this.data.items?Array.prototype.slice.call(this.data.items).filter((({kind:e})=>"file"===e)).map((e=>e.getAsFile())).filter((e=>!!e)):Array.prototype.slice.call(this.data.files||[])}getData(e){return this.data.getData(e)}hasFiles(){return this.data.items?Array.prototype.slice.call(this.data.items).some((({kind:e})=>"file"===e)):!!Array.prototype.slice.call(this.data.files||[]).length}}},79186:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.startOfDaySkew;if(void 0!==t&&t>s.default.skew-30&&t<s.default.skew+30)return e.startOfDay;return e.startOfDaySkew=s.default.skew,e.startOfDay=i.default.unix(e.t+s.default.skew).startOf("day").unix()};var i=r(a(19034)),s=r(a(19899))},78711:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.enrich=function(e,t){var a;switch((0,s.previewType)(t)){case"pdf":a=l(e);break;case"msoffice":a=Promise.resolve();break;default:a=Promise.resolve()}return a.timeout(3e3,"Document enrichment timeout").catch((()=>null))},t.enrichPdf=l;var i=r(a(19976)),s=a(41501),n=r(a(75897));function o(){var e=(0,i.default)(["pdf preview generation failed"]);return o=function(){return e},e}function l(e){var t;return n.default.fileToPdf(e).then((e=>(t=e,n.default.pdfToImg(e,1)))).catch((()=>(__LOG__(2)(o()),null))).finally((()=>{t&&n.default.releasePdf(t)}))}},62436:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.scrollIntoViewIfNeeded=function(e,t=!0,a){if(e.scrollIntoViewIfNeeded&&(0,s.isFunction)(e.scrollIntoViewIfNeeded))return e.scrollIntoViewIfNeeded(t);var r=o(a||e.parentNode),i=window.getComputedStyle(r,null),n=parseInt(i.getPropertyValue("border-top-width"),10),l=e.offsetTop-r.offsetTop<r.scrollTop,d=e.offsetTop-r.offsetTop+e.clientHeight-n>r.scrollTop+r.clientHeight;(l||d)&&t&&(r.scrollTop=e.offsetTop-r.offsetTop-r.clientHeight/2-n+e.clientHeight/2);!l&&!d||t||e.scrollIntoView(l&&!d);return!(l||d)},t.scrollIntoView=function(e,t=!0,a){var r=o(a||e.parentNode),i=window.getComputedStyle(r,null),s=parseInt(i.getPropertyValue("border-top-width"),10),n=e.offsetTop-r.offsetTop<r.scrollTop,l=e.offsetTop-r.offsetTop+e.clientHeight-s>r.scrollTop+r.clientHeight;t?r.scrollTop=e.offsetTop-r.offsetTop-r.clientHeight/2-s+e.clientHeight/2:e.scrollIntoView(n&&!l);return!(n||l)},t.scrollAt=function(e,t,a={}){var r=o(t||e.offsetParent),i=a.pos||"center",s=null!=a.duration&&0!==a.duration?a.duration:1e3,l=a.offset||0;switch(i){case"top":return r.scrollTop=e.offsetTop+l,Promise.resolve();case"bottom":return r.scrollTop=e.offsetTop+e.clientHeight-r.clientHeight,Promise.resolve();case"center":return a.animate?((0,n.default)(e,"stop"),(0,n.default)(r,"stop"),(0,n.default)(e,"scroll",{duration:s,container:r,offset:(e.clientHeight-r.clientHeight)/2,easing:a.easing})):(r.scrollTop=e.offsetTop+e.clientHeight/2-r.clientHeight/2,Promise.resolve());case"offset":return a.animate?((0,n.default)(e,"stop"),(0,n.default)(r,"stop"),(0,n.default)(e,"scroll",{duration:s,container:r,offset:-l,easing:a.easing})):(r.scrollTop=e.offsetTop-l,Promise.resolve())}return Promise.resolve()},t.sanitizeNoticeText=function(e){return i.default.sanitize(e,{ALLOWED_TAGS:["b","i","a","#text"],ALLOWED_ATTR:["href"],KEEP_CONTENT:!1})},t.sanitizeNoticeSVG=function(e){return i.default.sanitize(e,{USE_PROFILES:{svg:!0,svgFilters:!0}})};var i=r(a(35368)),s=a(11419),n=r(a(91378));function o(e){if(e&&e instanceof HTMLElement)return e;throw new Error("utils:DOM parent not defined or is not a valid HTMLElement")}},6016:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(19976)),s=r(a(28267));function n(){var e=(0,i.default)(["Your browser does not support fullscreen API."]);return n=function(){return e},e}function o(){var e=(0,i.default)(["document object does not exist"]);return o=function(){return e},e}function l(){var e=(0,i.default)(["Your browser does not support fullscreen API."]);return l=function(){return e},e}function d(){var e=(0,i.default)(["document object does not exist"]);return d=function(){return e},e}function u(){var e=(0,i.default)(["Your browser does not support fullscreen API."]);return u=function(){return e},e}function c(){var e=(0,i.default)(["document object does not exist"]);return c=function(){return e},e}function h(){var e=(0,i.default)(["Your browser does not support fullscreen API."]);return h=function(){return e},e}function f(){var e=(0,i.default)(["document object does not exist"]);return f=function(){return e},e}function p(){var e=(0,i.default)(["Your browser does not support fullscreen API."]);return p=function(){return e},e}function m(){var e=(0,i.default)(["document object does not exist"]);return m=function(){return e},e}function _(){var e=(0,i.default)(["Your browser does not support fullscreen API."]);return _=function(){return e},e}function v(){var e=(0,i.default)(["The element requesting fullscreen is null or undefined."]);return v=function(){return e},e}var g,E,y={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5},S=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror"],C=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror"],T=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","msfullscreenchange","msfullscreenerror"];class M extends s.default{constructor(){if(super(),this.requestFullscreen=e=>{e?g?e[g[y.requestFullscreen]]():__LOG__(3)(_()):__LOG__(3)(v())},this._fullscreenChangeTrigger=e=>{this.trigger("fullscreen_change",e)},this._fullscreenErrorTrigger=e=>{this.trigger("fullscreen_error",e)},"object"==typeof window&&"object"==typeof window.document){var e=E=window.document;if("fullscreenEnabled"in E?g=Object.keys(y):S[y.fullscreenEnabled]in E?g=S:C[y.fullscreenEnabled]in E?g=C:T[y.fullscreenEnabled]in E&&(g=T),g){var t=g;e.addEventListener(t[y.fullscreenchange],this._fullscreenChangeTrigger),e.addEventListener(t[y.fullscreenerror],this._fullscreenErrorTrigger)}else __LOG__(3)(p())}else __LOG__(3)(m())}get exitFullscreen(){return E?g?E[g[y.exitFullscreen]].bind(E):(__LOG__(3)(h()),()=>{}):(__LOG__(3)(f()),()=>{})}get isFullscreenMode(){return E?g?!!E[g[y.fullscreenElement]]:(__LOG__(3)(u()),!1):(__LOG__(3)(c()),!1)}get fullscreenEnabled(){return E?g?Boolean(E[g[y.fullscreenEnabled]]):(__LOG__(3)(l()),!1):(__LOG__(3)(d()),!1)}get fullscreenElement(){if(E){if(g)return E[g[y.fullscreenElement]];__LOG__(3)(n())}else __LOG__(3)(o())}}var b=new M;t.default=b},76774:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=t.parentNode;if(!a)return;if(t.nextSibling)return void a.insertBefore(e,t.nextSibling);return a.appendChild(e),e}},64452:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(!t.parentNode)return;return t.parentNode.insertBefore(e,t),e}},52232:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(!e)return!1;var a=e.parentElement;if(!a)return!1;var r=t>=0?t:a.childNodes.length+t;return e===a.childNodes[r]}},78185:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return!!e&&(e.nodeType===Node.TEXT_NODE&&0===e.textContent.length)}},62139:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e.parentNode)return;e.parentNode.removeChild(e)}},19117:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e)return!1;var t=window.getSelection();if(1!==t.rangeCount)return!1;var a=t.getRangeAt(0);if(!a.collapsed)return!1;var r=a.endContainer;if(a.startOffset!==function(e){return(0,i.default)(e)?e.textContent.length:e.childNodes.length}(r))return!1;if(e===r)return!0;if(!e.contains(r))return!1;var s=r;do{if(s.nextSibling)return!1;s=s.parentNode}while(s!==e);return!0};var i=r(a(73745))},81857:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e)return!1;var t=window.getSelection();if(1!==t.rangeCount)return!1;var a=t.getRangeAt(0);if(!a.collapsed||0!==a.startOffset)return!1;var r=a.startContainer;if(e===r)return!0;if(!e.contains(r))return!1;var i=r;do{if(i.previousSibling)return!1;i=i.parentNode}while(i!==e);return!0}},8347:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=window.getSelection();if(1!==e.rangeCount)return!1;var t=e.getRangeAt(0);return!!t.collapsed&&(e.removeAllRanges(),e.addRange(t),!0)}},58390:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=e;if(!a)return;do{a=t===s.NEXT?a.nextSibling:a.previousSibling}while(a&&(0,i.default)(a));return a},t.DIR=void 0;var i=r(a(78185)),s={NEXT:"NEXT",PREV:"PREV"};t.DIR=s},58922:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(e.__playPromise)return e.__playPromise;var t=new Promise(((t,a)=>{function r(a){e.removeEventListener("playing",r),e.removeEventListener("error",i),e.videoHeight&&e.videoWidth||r(a),delete e.__playPromise,t(a)}function i(t){e.removeEventListener("playing",r),e.removeEventListener("error",i),delete e.__playPromise,a(t)}e.addEventListener("playing",r),e.addEventListener("error",i);var s,n=e.play();(s=n)&&"function"==typeof s.then&&(e.removeEventListener("playing",r),e.removeEventListener("error",i),n.then((()=>{delete e.__playPromise,t()})).catch((t=>{delete e.__playPromise,a(t)})))}));return e.__playPromise=t,t}},76533:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(e===i)return;i=e;var[t,r,o]=e===s.EMOJI_TYPE.APPLE?[a(29720).Z,a(46847).Z,a(63833).default]:[a(88877).Z,a(16426).Z,a(92840).Z];n.default.configure({emojiType:e,orderedEmojis:t,legacyToEmoji:r,categorizedEmojis:o})};var i,s=a(27703),n=r(a(12396))},63833:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={SMILEYS_PEOPLE:["😀","😃","😄","😁","😆","😅","😂","🤣","🥲","☺️","😊","😇","🙂","🙃","😉","😌","😍","🥰","😘","😗","😙","😚","😋","😛","😝","😜","🤪","🤨","🧐","🤓","😎","🥸","🤩","🥳","😏","😒","😞","😔","😟","😕","🙁","☹️","😣","😖","😫","😩","🥺","😢","😭","😤","😠","😡","🤬","🤯","😳","🥵","🥶","😱","😨","😰","😥","😓","🤗","🤔","🤭","🤫","🤥","😶","😐","😑","😬","🙄","😯","😦","😧","😮","😲","🥱","😴","🤤","😪","😵","🤐","🥴","🤢","🤮","🤧","😷","🤒","🤕","🤑","🤠","😈","👿","👹","👺","🤡","💩","👻","💀","☠️","👽","👾","🤖","🎃","😺","😸","😹","😻","😼","😽","🙀","😿","😾","🤲","👐","🙌","👏","🤝","👍","👎","👊","✊","🤛","🤜","🤞","✌️","🤟","🤘","👌","🤌","🤏","👈","👉","👆","👇","☝️","✋","🤚","🖐️","🖖","👋","🤙","💪","🦾","🖕","✍️","🙏","🦶","🦵","🦿","💄","💋","👄","🦷","👅","👂","🦻","👃","👣","👁️","👀","🫀","🫁","🧠","🗣️","👤","👥","🫂","👶","👧","🧒","👦","👩","🧑","👨","👩‍🦱","🧑‍🦱","👨‍🦱","👩‍🦰","🧑‍🦰","👨‍🦰","👱‍♀️","👱","👱‍♂️","👩‍🦳","🧑‍🦳","👨‍🦳","👩‍🦲","🧑‍🦲","👨‍🦲","🧔","👵","🧓","👴","👲","👳‍♀️","👳","👳‍♂️","🧕","👮‍♀️","👮","👮‍♂️","👷‍♀️","👷","👷‍♂️","💂‍♀️","💂","💂‍♂️","🕵️‍♀️","🕵️","🕵️‍♂️","👩‍⚕️","🧑‍⚕️","👨‍⚕️","👩‍🌾","🧑‍🌾","👨‍🌾","👩‍🍳","🧑‍🍳","👨‍🍳","👩‍🎓","🧑‍🎓","👨‍🎓","👩‍🎤","🧑‍🎤","👨‍🎤","👩‍🏫","🧑‍🏫","👨‍🏫","👩‍🏭","🧑‍🏭","👨‍🏭","👩‍💻","🧑‍💻","👨‍💻","👩‍💼","🧑‍💼","👨‍💼","👩‍🔧","🧑‍🔧","👨‍🔧","👩‍🔬","🧑‍🔬","👨‍🔬","👩‍🎨","🧑‍🎨","👨‍🎨","👩‍🚒","🧑‍🚒","👨‍🚒","👩‍✈️","🧑‍✈️","👨‍✈️","👩‍🚀","🧑‍🚀","👨‍🚀","👩‍⚖️","🧑‍⚖️","👨‍⚖️","👰‍♀️","👰","👰‍♂️","🤵‍♀️","🤵","🤵‍♂️","👸","🤴","🥷","🦸‍♀️","🦸","🦸‍♂️","🦹‍♀️","🦹","🦹‍♂️","🤶","🧑‍🎄","🎅","🧙‍♀️","🧙","🧙‍♂️","🧝‍♀️","🧝","🧝‍♂️","🧛‍♀️","🧛","🧛‍♂️","🧟‍♀️","🧟","🧟‍♂️","🧞‍♀️","🧞","🧞‍♂️","🧜‍♀️","🧜","🧜‍♂️","🧚‍♀️","🧚","🧚‍♂️","👼","🤰","🤱","👩‍🍼","🧑‍🍼","👨‍🍼","🙇‍♀️","🙇","🙇‍♂️","💁‍♀️","💁","💁‍♂️","🙅‍♀️","🙅","🙅‍♂️","🙆‍♀️","🙆","🙆‍♂️","🙋‍♀️","🙋","🙋‍♂️","🧏‍♀️","🧏","🧏‍♂️","🤦‍♀️","🤦","🤦‍♂️","🤷‍♀️","🤷","🤷‍♂️","🙎‍♀️","🙎","🙎‍♂️","🙍‍♀️","🙍","🙍‍♂️","💇‍♀️","💇","💇‍♂️","💆‍♀️","💆","💆‍♂️","🧖‍♀️","🧖","🧖‍♂️","💅","🤳","💃","🕺","👯‍♀️","👯","👯‍♂️","🕴️","👩‍🦽","🧑‍🦽","👨‍🦽","👩‍🦼","🧑‍🦼","👨‍🦼","🚶‍♀️","🚶","🚶‍♂️","👩‍🦯","🧑‍🦯","👨‍🦯","🧎‍♀️","🧎","🧎‍♂️","🏃‍♀️","🏃","🏃‍♂️","🧍‍♀️","🧍","🧍‍♂️","👫","👭","👬","👩‍❤️‍👨","👩‍❤️‍👩","👨‍❤️‍👨","👩‍❤️‍💋‍👨","👩‍❤️‍💋‍👩","👨‍❤️‍💋‍👨","👨‍👩‍👦","👨‍👩‍👧","👨‍👩‍👧‍👦","👨‍👩‍👦‍👦","👨‍👩‍👧‍👧","👩‍👩‍👦","👩‍👩‍👧","👩‍👩‍👧‍👦","👩‍👩‍👦‍👦","👩‍👩‍👧‍👧","👨‍👨‍👦","👨‍👨‍👧","👨‍👨‍👧‍👦","👨‍👨‍👦‍👦","👨‍👨‍👧‍👧","👩‍👦","👩‍👧","👩‍👧‍👦","👩‍👦‍👦","👩‍👧‍👧","👨‍👦","👨‍👧","👨‍👧‍👦","👨‍👦‍👦","👨‍👧‍👧","🪢","🧶","🧵","🪡","🧥","🥼","🦺","👚","👕","👖","🩲","🩳","👔","👗","👙","🩱","👘","🥻","🩴","🥿","👠","👡","👢","👞","👟","🥾","🧦","🧤","🧣","🎩","🧢","👒","🎓","⛑️","🪖","👑","💍","👝","👛","👜","💼","🎒","🧳","👓","🕶️","🥽","🌂"],ANIMALS_NATURE:["🐶","🐱","🐭","🐹","🐰","🦊","🐻","🐼","🐻‍❄️","🐨","🐯","🦁","🐮","🐷","🐽","🐸","🐵","🙈","🙉","🙊","🐒","🐔","🐧","🐦","🐤","🐣","🐥","🦆","🦅","🦉","🦇","🐺","🐗","🐴","🦄","🐝","🪱","🐛","🦋","🐌","🐞","🐜","🪰","🪲","🪳","🦟","🦗","🕷️","🕸️","🦂","🐢","🐍","🦎","🦖","🦕","🐙","🦑","🦐","🦞","🦀","🐡","🐠","🐟","🐬","🐳","🐋","🦈","🦭","🐊","🐅","🐆","🦓","🦍","🦧","🦣","🐘","🦛","🦏","🐪","🐫","🦒","🦘","🦬","🐃","🐂","🐄","🐎","🐖","🐏","🐑","🦙","🐐","🦌","🐕","🐩","🦮","🐕‍🦺","🐈","🐈‍⬛","🪶","🐓","🦃","🦤","🦚","🦜","🦢","🦩","🕊️","🐇","🦝","🦨","🦡","🦫","🦦","🦥","🐁","🐀","🐿️","🦔","🐾","🐉","🐲","🌵","🎄","🌲","🌳","🌴","🪵","🌱","🌿","☘️","🍀","🎍","🪴","🎋","🍃","🍂","🍁","🍄","🐚","🪨","🌾","💐","🌷","🌹","🥀","🌺","🌸","🌼","🌻","🌞","🌝","🌛","🌜","🌚","🌕","🌖","🌗","🌘","🌑","🌒","🌓","🌔","🌙","🌎","🌍","🌏","🪐","💫","⭐","🌟","✨","⚡","☄️","💥","🔥","🌪️","🌈","☀️","🌤️","⛅","🌥️","☁️","🌦️","🌧️","⛈️","🌩️","🌨️","❄️","☃️","⛄","🌬️","💨","💧","💦","☔","☂️","🌊","🌫️"],FOOD_DRINK:["🍏","🍎","🍐","🍊","🍋","🍌","🍉","🍇","🍓","🫐","🍈","🍒","🍑","🥭","🍍","🥥","🥝","🍅","🍆","🥑","🥦","🥬","🥒","🌶️","🫑","🌽","🥕","🫒","🧄","🧅","🥔","🍠","🥐","🥯","🍞","🥖","🥨","🧀","🥚","🍳","🧈","🥞","🧇","🥓","🥩","🍗","🍖","🦴","🌭","🍔","🍟","🍕","🫓","🥪","🥙","🧆","🌮","🌯","🫔","🥗","🥘","🫕","🥫","🍝","🍜","🍲","🍛","🍣","🍱","🥟","🦪","🍤","🍙","🍚","🍘","🍥","🥠","🥮","🍢","🍡","🍧","🍨","🍦","🥧","🧁","🍰","🎂","🍮","🍭","🍬","🍫","🍿","🍩","🍪","🌰","🥜","🍯","🥛","🍼","🫖","☕","🍵","🧃","🥤","🧋","🍶","🍺","🍻","🥂","🍷","🥃","🍸","🍹","🧉","🍾","🧊","🥄","🍴","🍽️","🥣","🥡","🥢","🧂"],ACTIVITY:["⚽","🏀","🏈","⚾","🥎","🎾","🏐","🏉","🥏","🎱","🪀","🏓","🏸","🏒","🏑","🥍","🏏","🪃","🥅","⛳","🪁","🏹","🎣","🤿","🥊","🥋","🎽","🛹","🛼","🛷","⛸️","🥌","🎿","⛷️","🏂","🪂","🏋️‍♀️","🏋️","🏋️‍♂️","🤼‍♀️","🤼‍♂️","🤸‍♀️","🤸","🤸‍♂️","⛹️‍♀️","⛹️","⛹️‍♂️","🤺","🤾‍♀️","🤾","🤾‍♂️","🏌️‍♀️","🏌️","🏌️‍♂️","🏇","🧘‍♀️","🧘","🧘‍♂️","🏄‍♀️","🏄","🏄‍♂️","🏊‍♀️","🏊","🏊‍♂️","🤽‍♀️","🤽","🤽‍♂️","🚣‍♀️","🚣","🚣‍♂️","🧗‍♀️","🧗","🧗‍♂️","🚵‍♀️","🚵","🚵‍♂️","🚴‍♀️","🚴","🚴‍♂️","🏆","🥇","🥈","🥉","🏅","🎖️","🏵️","🎗️","🎫","🎟️","🎪","🤹‍♀️","🤹","🤹‍♂️","🎭","🩰","🎨","🎬","🎤","🎧","🎼","🎹","🥁","🪘","🎷","🎺","🪗","🎸","🪕","🎻","🎲","♟️","🎯","🎳","🎮","🎰","🧩"],TRAVEL_PLACES:["🚗","🚕","🚙","🚌","🚎","🏎️","🚓","🚑","🚒","🚐","🛻","🚚","🚛","🚜","🦯","🦽","🦼","🛴","🚲","🛵","🏍️","🛺","🚨","🚔","🚍","🚘","🚖","🚡","🚠","🚟","🚃","🚋","🚞","🚝","🚄","🚅","🚈","🚂","🚆","🚇","🚊","🚉","✈️","🛫","🛬","🛩️","💺","🛰️","🚀","🛸","🚁","🛶","⛵","🚤","🛥️","🛳️","⛴️","🚢","⚓","🪝","⛽","🚧","🚦","🚥","🚏","🗺️","🗿","🗽","🗼","🏰","🏯","🏟️","🎡","🎢","🎠","⛲","⛱️","🏖️","🏝️","🏜️","🌋","⛰️","🏔️","🗻","🏕️","⛺","🛖","🏠","🏡","🏘️","🏚️","🏗️","🏭","🏢","🏬","🏣","🏤","🏥","🏦","🏨","🏪","🏫","🏩","💒","🏛️","⛪","🕌","🕍","🛕","🕋","⛩️","🛤️","🛣️","🗾","🎑","🏞️","🌅","🌄","🌠","🎇","🎆","🌇","🌆","🏙️","🌃","🌌","🌉","🌁"],OBJECTS:["⌚","📱","📲","💻","⌨️","🖥️","🖨️","🖱️","🖲️","🕹️","🗜️","💽","💾","💿","📀","📼","📷","📸","📹","🎥","📽️","🎞️","📞","☎️","📟","📠","📺","📻","🎙️","🎚️","🎛️","🧭","⏱️","⏲️","⏰","🕰️","⌛","⏳","📡","🔋","🔌","💡","🔦","🕯️","🪔","🧯","🛢️","💸","💵","💴","💶","💷","🪙","💰","💳","💎","⚖️","🪜","🧰","🪛","🔧","🔨","⚒️","🛠️","⛏️","🪚","🔩","⚙️","🪤","🧱","⛓️","🧲","🔫","💣","🧨","🪓","🔪","🗡️","⚔️","🛡️","🚬","⚰️","🪦","⚱️","🏺","🔮","📿","🧿","💈","⚗️","🔭","🔬","🕳️","🩹","🩺","💊","💉","🩸","🧬","🦠","🧫","🧪","🌡️","🧹","🪠","🧺","🧻","🚽","🚰","🚿","🛁","🛀","🧼","🪥","🪒","🧽","🪣","🧴","🛎️","🔑","🗝️","🚪","🪑","🛋️","🛏️","🛌","🧸","🪆","🖼️","🪞","🪟","🛍️","🛒","🎁","🎈","🎏","🎀","🪄","🪅","🎊","🎉","🎎","🏮","🎐","🧧","✉️","📩","📨","📧","💌","📥","📤","📦","🏷️","🪧","📪","📫","📬","📭","📮","📯","📜","📃","📄","📑","🧾","📊","📈","📉","🗒️","🗓️","📆","📅","🗑️","📇","🗃️","🗳️","🗄️","📋","📁","📂","🗂️","🗞️","📰","📓","📔","📒","📕","📗","📘","📙","📚","📖","🔖","🧷","🔗","📎","🖇️","📐","📏","🧮","📌","📍","✂️","🖊️","🖋️","✒️","🖌️","🖍️","📝","✏️","🔍","🔎","🔏","🔐","🔒","🔓"],SYMBOLS:["❤️","🧡","💛","💚","💙","💜","🖤","🤍","🤎","💔","❣️","💕","💞","💓","💗","💖","💘","💝","💟","☮️","✝️","☪️","🕉️","☸️","✡️","🔯","🕎","☯️","☦️","🛐","⛎","♈","♉","♊","♋","♌","♍","♎","♏","♐","♑","♒","♓","🆔","⚛️","🉑","☢️","☣️","📴","📳","🈶","🈚","🈸","🈺","🈷️","✴️","🆚","💮","🉐","㊙️","㊗️","🈴","🈵","🈹","🈲","🅰️","🅱️","🆎","🆑","🅾️","🆘","❌","⭕","🛑","⛔","📛","🚫","💯","💢","♨️","🚷","🚯","🚳","🚱","🔞","📵","🚭","❗","❕","❓","❔","‼️","⁉️","🔅","🔆","〽️","⚠️","🚸","🔱","⚜️","🔰","♻️","✅","🈯","💹","❇️","✳️","❎","🌐","💠","Ⓜ️","🌀","💤","🏧","🚾","♿","🅿️","🛗","🈳","🈂️","🛂","🛃","🛄","🛅","🚹","🚺","🚼","⚧️","🚻","🚮","🎦","📶","🈁","🔣","ℹ️","🔤","🔡","🔠","🆖","🆗","🆙","🆒","🆕","🆓","0️⃣","1️⃣","2️⃣","3️⃣","4️⃣","5️⃣","6️⃣","7️⃣","8️⃣","9️⃣","🔟","🔢","#️⃣","*️⃣","⏏️","▶️","⏸️","⏯️","⏹️","⏺️","⏭️","⏮️","⏩","⏪","⏫","⏬","◀️","🔼","🔽","➡️","⬅️","⬆️","⬇️","↗️","↘️","↙️","↖️","↕️","↔️","↪️","↩️","⤴️","⤵️","🔀","🔁","🔂","🔄","🔃","🎵","🎶","➕","➖","➗","✖️","♾️","💲","💱","™️","©️","®️","👁️‍🗨️","🔚","🔙","🔛","🔝","🔜","〰️","➰","➿","✔️","☑️","🔘","🔴","🟠","🟡","🟢","🔵","🟣","⚫","⚪","🟤","🔺","🔻","🔸","🔹","🔶","🔷","🔳","🔲","▪️","▫️","◾","◽","◼️","◻️","🟥","🟧","🟨","🟩","🟦","🟪","⬛","⬜","🟫","🔈","🔇","🔉","🔊","🔔","🔕","📣","📢","💬","💭","🗯️","♠️","♣️","♥️","♦️","🃏","🎴","🀄","🕐","🕑","🕒","🕓","🕔","🕕","🕖","🕗","🕘","🕙","🕚","🕛","🕜","🕝","🕞","🕟","🕠","🕡","🕢","🕣","🕤","🕥","🕦","🕧"],FLAGS:["🏳️","🏴","🏴‍☠️","🏁","🚩","🏳️‍🌈","🏳️‍⚧️","🇺🇳","🇦🇫","🇦🇽","🇦🇱","🇩🇿","🇦🇸","🇦🇩","🇦🇴","🇦🇮","🇦🇶","🇦🇬","🇦🇷","🇦🇲","🇦🇼","🇦🇺","🇦🇹","🇦🇿","🇧🇸","🇧🇭","🇧🇩","🇧🇧","🇧🇾","🇧🇪","🇧🇿","🇧🇯","🇧🇲","🇧🇹","🇧🇴","🇧🇦","🇧🇼","🇧🇷","🇮🇴","🇻🇬","🇧🇳","🇧🇬","🇧🇫","🇧🇮","🇰🇭","🇨🇲","🇨🇦","🇮🇨","🇨🇻","🇧🇶","🇰🇾","🇨🇫","🇹🇩","🇨🇱","🇨🇳","🇨🇽","🇨🇨","🇨🇴","🇰🇲","🇨🇬","🇨🇩","🇨🇰","🇨🇷","🇨🇮","🇭🇷","🇨🇺","🇨🇼","🇨🇾","🇨🇿","🇩🇰","🇩🇯","🇩🇲","🇩🇴","🇪🇨","🇪🇬","🇸🇻","🇬🇶","🇪🇷","🇪🇪","🇸🇿","🇪🇹","🇪🇺","🇫🇰","🇫🇴","🇫🇯","🇫🇮","🇫🇷","🇬🇫","🇵🇫","🇹🇫","🇬🇦","🇬🇲","🇬🇪","🇩🇪","🇬🇭","🇬🇮","🇬🇷","🇬🇱","🇬🇩","🇬🇵","🇬🇺","🇬🇹","🇬🇬","🇬🇳","🇬🇼","🇬🇾","🇭🇹","🇭🇳","🇭🇰","🇭🇺","🇮🇸","🇮🇳","🇮🇩","🇮🇷","🇮🇶","🇮🇪","🇮🇲","🇮🇱","🇮🇹","🇯🇲","🇯🇵","🎌","🇯🇪","🇯🇴","🇰🇿","🇰🇪","🇰🇮","🇽🇰","🇰🇼","🇰🇬","🇱🇦","🇱🇻","🇱🇧","🇱🇸","🇱🇷","🇱🇾","🇱🇮","🇱🇹","🇱🇺","🇲🇴","🇲🇬","🇲🇼","🇲🇾","🇲🇻","🇲🇱","🇲🇹","🇲🇭","🇲🇶","🇲🇷","🇲🇺","🇾🇹","🇲🇽","🇫🇲","🇲🇩","🇲🇨","🇲🇳","🇲🇪","🇲🇸","🇲🇦","🇲🇿","🇲🇲","🇳🇦","🇳🇷","🇳🇵","🇳🇱","🇳🇨","🇳🇿","🇳🇮","🇳🇪","🇳🇬","🇳🇺","🇳🇫","🇰🇵","🇲🇰","🇲🇵","🇳🇴","🇴🇲","🇵🇰","🇵🇼","🇵🇸","🇵🇦","🇵🇬","🇵🇾","🇵🇪","🇵🇭","🇵🇳","🇵🇱","🇵🇹","🇵🇷","🇶🇦","🇷🇪","🇷🇴","🇷🇺","🇷🇼","🇼🇸","🇸🇲","🇸🇹","🇸🇦","🇸🇳","🇷🇸","🇸🇨","🇸🇱","🇸🇬","🇸🇽","🇸🇰","🇸🇮","🇬🇸","🇸🇧","🇸🇴","🇿🇦","🇰🇷","🇸🇸","🇪🇸","🇱🇰","🇧🇱","🇸🇭","🇰🇳","🇱🇨","🇵🇲","🇻🇨","🇸🇩","🇸🇷","🇸🇪","🇨🇭","🇸🇾","🇹🇼","🇹🇯","🇹🇿","🇹🇭","🇹🇱","🇹🇬","🇹🇰","🇹🇴","🇹🇹","🇹🇳","🇹🇷","🇹🇲","🇹🇨","🇹🇻","🇻🇮","🇺🇬","🇺🇦","🇦🇪","🇬🇧","🏴󠁧󠁢󠁥󠁮󠁧󠁿","🏴󠁧󠁢󠁳󠁣󠁴󠁿","🏴󠁧󠁢󠁷󠁬󠁳󠁿","🇺🇸","🇺🇾","🇺🇿","🇻🇺","🇻🇦","🇻🇪","🇻🇳","🇼🇫","🇪🇭","🇾🇪","🇿🇲","🇿🇼"]}},11632:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,d.default)(e,(0,c.default)(_,"Emoji Trie expected to be loaded."))};var s=i(a(52954)),n=i(a(75652)),o=a(91460),l=i(a(81022)),d=r(a(35962)),u=i(a(17957)),c=i(a(61941)),h=r(a(17026)),f=r(a(82885)),p=i(a(17744)),m=new Set(["ar","bn","cs","de","en","es","fa","fr","gu","he","hi","hu","id","it","mr","ms","nl","pl","pt","pt-BR","ro","ru","sk","th","tr","uk","ur","zh-CN","zh-TW","zh-HK"]),_=null;var v=null,g=[];function E(){var e=(0,n.default)(["en",u.default.getLocale()]).filter((e=>m.has(e)));if(!(0,l.default)(g,e)){g=e;var t=Promise.map(e,(e=>function(e){return Promise.loop(function(){var t=(0,s.default)((function*(t,r,i){var s=(0,o.delayMs)(f.expBackoff(i,12e4,1e3,.1));return(yield a(48729)("./".concat(e))).default().then((([,e])=>t(e))).catch((()=>s))}));return function(){return t.apply(this,arguments)}}()).catch((()=>({})))}(e))).then((e=>{v===t&&(_=(0,d.emojiLocaleDictsToTrie)(e))})).catch((()=>{})).finally((()=>{v===t&&(v=null)}));v=t}}u.default.on("locale_change",(()=>{E()})),(0,p.default)(h.default,"change:mode",(()=>h.default.mode===h.StreamMode.MAIN)).then((()=>{E()}))},46847:(e,t)=>{"use strict";t.Z=void 0;t.Z={"#️⃣":1,"":1,"*️⃣":2,"0️⃣":3,"":3,"1️⃣":4,"":4,"2️⃣":5,"":5,"3️⃣":6,"":6,"4️⃣":7,"":7,"5️⃣":8,"":8,"6️⃣":9,"":9,"7️⃣":10,"":10,"8️⃣":11,"":11,"9️⃣":12,"":12,"":13,"":14,"":17,"":21,"":22,"":23,"":24,"":31,"":32,"":48,"":49,"":54,"":55,"":59,"":61,"":62,"":69,"":79,"":80,"":81,"":82,"":83,"":84,"":85,"":86,"":87,"":88,"":89,"":90,"":91,"":93,"":94,"":95,"":96,"":97,"":100,"":109,"":110,"":116,"":117,"":118,"":121,"":127,"":130,"":131,"":133,"":154,"":155,"":156,"":158,"":160,"":166,"":177,"":190,"":191,"":192,"":195,"":197,"":198,"":199,"":200,"":202,"":206,"":208,"":211,"":212,"":213,"":216,"":217,"":219,"":220,"":221,"":222,"":224,"":225,"":226,"":227,"":228,"":230,"":232,"":233,"":235,"":237,"":238,"":287,"":297,"":310,"":318,"":320,"":354,"":358,"":366,"":435,"":479,"🇺🇲":479,"":497,"":498,"":499,"":500,"":502,"":504,"":505,"":506,"":507,"":508,"":509,"":510,"":512,"":514,"":515,"":516,"":517,"":518,"":519,"":520,"":522,"":537,"":543,"":562,"":563,"":565,"":566,"":567,"":568,"":569,"":572,"":574,"":575,"":576,"":577,"":579,"":580,"":583,"":584,"":588,"":593,"":594,"":598,"":599,"":600,"":601,"":602,"":603,"":604,"":605,"":607,"":608,"":609,"":612,"":613,"":622,"":623,"":624,"":625,"":626,"":627,"":628,"":630,"":632,"":633,"":638,"":639,"":640,"":641,"":642,"":643,"":649,"":650,"":651,"":652,"":655,"":656,"":657,"":658,"":659,"":660,"":661,"":662,"":671,"":672,"":674,"":675,"":676,"":677,"":678,"":679,"":681,"":682,"":685,"":686,"":687,"":691,"":692,"":693,"":694,"":696,"":700,"":701,"":702,"":703,"":710,"":728,"":747,"":754,"":756,"":829,"":831,"":832,"":834,"":835,"":836,"":837,"":838,"":839,"":840,"":841,"":842,"":844,"":845,"🇽🇪":851,"🇽🇸":852,"🇽🇼":853,"":878,"":879,"":882,"":883,"":885,"":889,"":890,"":891,"":892,"":893,"":897,"":898,"":902,"":904,"":905,"":906,"":909,"":910,"":911,"":912,"":913,"":914,"":915,"":917,"":918,"":919,"":920,"":921,"":922,"":923,"":924,"":925,"":931,"":934,"":940,"":946,"":948,"":954,"":960,"":966,"":972,"":978,"":984,"":990,"":996,"":1002,"":1008,"":1014,"":1015,"":1017,"":1018,"":1020,"":1021,"":1022,"":1025,"":1028,"":1029,"":1030,"":1031,"":1032,"":1035,"":1041,"":1047,"":1234,"":1439,"":1457,"":1475,"":1496,"":1514,"":1520,"":1538,"":1544,"":1550,"":1556,"":1574,"":1582,"":1583,"":1589,"":1590,"":1591,"":1592,"":1593,"":1611,"":1629,"":1635,"":1636,"":1642,"":1660,"":1678,"":1679,"":1680,"":1681,"":1683,"":1684,"":1685,"":1686,"":1687,"":1688,"":1689,"":1690,"":1693,"":1694,"":1695,"":1696,"":1697,"":1698,"":1699,"":1701,"":1703,"":1704,"":1705,"":1706,"":1708,"":1710,"":1711,"":1712,"":1723,"":1724,"":1732,"":1733,"":1734,"":1735,"":1736,"":1738,"":1739,"":1761,"":1768,"":1771,"":1772,"":1773,"":1774,"":1780,"":1782,"":1785,"":1788,"":1789,"":1790,"":1791,"":1793,"":1794,"":1797,"":1798,"":1799,"":1812,"":1815,"":1819,"":1820,"":1821,"":1822,"":1831,"":1832,"":1839,"":1842,"":1845,"":1849,"":1850,"":1851,"":1852,"":1853,"":1854,"":1870,"":1871,"":1872,"":1873,"":1874,"":1875,"":1876,"":1877,"":1878,"":1879,"":1880,"":1881,"":1975,"":1976,"":1977,"":1981,"":1982,"":1983,"":1984,"":1989,"":1990,"":1992,"":1993,"":1995,"":1998,"":1999,"":2e3,"":2002,"":2004,"":2006,"":2008,"":2009,"":2010,"":2012,"":2013,"":2014,"":2015,"":2017,"":2020,"":2022,"":2025,"":2028,"":2029,"":2030,"":2031,"":2035,"":2049,"":2067,"":2085,"":2124,"":2166,"":2172,"":2175,"":2176,"":2177,"":2179,"":2181,"":2184,"":2187,"":2189,"":2190,"":2191,"":2193,"":2195,"":2197,"":2198,"":2206,"":2225,"":2226,"":2228,"":2233,"":2234,"":2239,"":2277,"":2297,"":2298,"":2299,"":2300,"":2301,"":2302,"":2304}},35962:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=[];if(e){var r=function(e,t){var a=function(e,t){if(!t)return[];if(e.length<=5)return t.getMatches(e);var a=e.substring(0,5).trim(),r=t.getMatches(a);return r=(0,u.default)(r,(t=>t.keyword.startsWith(e)))}(e,t),r=v((0,d.default)(a,(e=>e.value))),i=v((0,d.default)(a.filter((t=>t.keyword===e)),(e=>e.value))),s=(0,l.default)(v(f.default.map((e=>e.id))),r),n=(0,l.default)(v(m),r),c=(0,l.default)((0,o.default)(s,n),i);return(0,o.default)(c,E(i),s,n,E(r))}(e.toLowerCase(),t);a=(0,c.default)(r)}return a},t.emojiLocaleDictsToTrie=function(e){var t=e[0];e.length>1&&(t=(0,i.default)((0,i.default)({},t),e[1]));return function(e,t){var a=p.default.fromForwardsStrings(e.map((e=>e[t])),e);return{getMatches:e=>a.search(e)}}((0,s.default)(t,((e,t)=>{var a=t.toLowerCase(),r=a.substring(0,5);return{value:e,keyword:a,shortKeyword:r}})),"shortKeyword")};var i=r(a(70417)),s=r(a(16760)),n=r(a(25291)),o=r(a(26139)),l=r(a(30898)),d=r(a(35838)),u=r(a(90882)),c=r(a(75652)),h=r(a(12396)),f=r(a(67110)),p=r(a(75688)),m=["😂","😍","😘","🤣","😀","❤️","😉","😊","🤔","😭","😁","😜","👏","😎","👍","😬","😆","🙂","😇","😠","😅","☺️","🤗","😄","😒","😃","😏","😌","👌","😝","🙃","😋","🎂","😡","😱","🙏","😔","😢","😳","😞","🤤","👊","😛","😚","🙄","💕","✌️","💪","💞","🌹"],_=["SMILEYS_PEOPLE","ANIMALS_NATURE","FOOD_DRINK","ACTIVITY","TRAVEL_PLACES","OBJECTS","SYMBOLS","FLAGS","VARIATION"];function v(e){return e.map(h.default.normalizeEmoji).filter(Boolean)}var g=(0,n.default)((()=>{var e=new Map,t=0;for(var a of _){var r=h.default.getEmojisInCategory(a);for(var i of r)e.set(i,t),t++}return e}));function E(e){var t=g();return[...e].sort(((e,a)=>{var r,i;return(null!==(r=t.get(e))&&void 0!==r?r:Number.MAX_SAFE_INTEGER)-(null!==(i=t.get(a))&&void 0!==i?i:Number.MAX_SAFE_INTEGER)}))}},29720:(e,t)=>{"use strict";t.Z=void 0;t.Z=["","#️⃣","*️⃣","0️⃣","1️⃣","2️⃣","3️⃣","4️⃣","5️⃣","6️⃣","7️⃣","8️⃣","9️⃣","©️","®️","‼️","⁉️","™️","ℹ️","↔️","↕️","↖️","↗️","↘️","↙️","↩️","↪️","⌚","⌛","⌨️","⏏️","⏩","⏪","⏫","⏬","⏭️","⏮️","⏯️","⏰","⏱️","⏲️","⏳","⏸️","⏹️","⏺️","Ⓜ️","▪️","▫️","▶️","◀️","◻️","◼️","◽","◾","☀️","☁️","☂️","☃️","☄️","☎️","☑️","☔","☕","☘️","☝🏻","☝🏼","☝🏽","☝🏾","☝🏿","☝️","☠️","☢️","☣️","☦️","☪️","☮️","☯️","☸️","☹️","☺️","♈","♉","♊","♋","♌","♍","♎","♏","♐","♑","♒","♓","♟️","♠️","♣️","♥️","♦️","♨️","♻️","♾️","♿","⚒️","⚓","⚔️","⚖️","⚗️","⚙️","⚛️","⚜️","⚠️","⚡","⚧️","⚪","⚫","⚰️","⚱️","⚽","⚾","⛄","⛅","⛈️","⛎","⛏️","⛑️","⛓️","⛔","⛩️","⛪","⛰️","⛱️","⛲","⛳","⛴️","⛵","⛷️","⛸️","⛹🏻","⛹🏻‍♀️","⛹🏻‍♂️","⛹🏼","⛹🏼‍♀️","⛹🏼‍♂️","⛹🏽","⛹🏽‍♀️","⛹🏽‍♂️","⛹🏾","⛹🏾‍♀️","⛹🏾‍♂️","⛹🏿","⛹🏿‍♀️","⛹🏿‍♂️","⛹️","⛹️‍♀️","⛹️‍♂️","⛺","⛽","✂️","✅","✈️","✉️","✊","✊🏻","✊🏼","✊🏽","✊🏾","✊🏿","✋","✋🏻","✋🏼","✋🏽","✋🏾","✋🏿","✌🏻","✌🏼","✌🏽","✌🏾","✌🏿","✌️","✍🏻","✍🏼","✍🏽","✍🏾","✍🏿","✍️","✏️","✒️","✔️","✖️","✝️","✡️","✨","✳️","✴️","❄️","❇️","❌","❎","❓","❔","❕","❗","❣️","❤️","➕","➖","➗","➡️","➰","➿","⤴️","⤵️","⬅️","⬆️","⬇️","⬛","⬜","⭐","⭕","〰️","〽️","㊗️","㊙️","🀄","🃏","🅰️","🅱️","🅾️","🅿️","🆎","🆑","🆒","🆓","🆔","🆕","🆖","🆗","🆘","🆙","🆚","🇦🇨","🇦🇩","🇦🇪","🇦🇫","🇦🇬","🇦🇮","🇦🇱","🇦🇲","🇦🇴","🇦🇶","🇦🇷","🇦🇸","🇦🇹","🇦🇺","🇦🇼","🇦🇽","🇦🇿","🇧🇦","🇧🇧","🇧🇩","🇧🇪","🇧🇫","🇧🇬","🇧🇭","🇧🇮","🇧🇯","🇧🇱","🇧🇲","🇧🇳","🇧🇴","🇧🇶","🇧🇷","🇧🇸","🇧🇹","🇧🇻","🇧🇼","🇧🇾","🇧🇿","🇨🇦","🇨🇨","🇨🇩","🇨🇫","🇨🇬","🇨🇭","🇨🇮","🇨🇰","🇨🇱","🇨🇲","🇨🇳","🇨🇴","🇨🇵","🇨🇷","🇨🇺","🇨🇻","🇨🇼","🇨🇽","🇨🇾","🇨🇿","🇩🇪","🇩🇬","🇩🇯","🇩🇰","🇩🇲","🇩🇴","🇩🇿","🇪🇦","🇪🇨","🇪🇪","🇪🇬","🇪🇭","🇪🇷","🇪🇸","🇪🇹","🇪🇺","🇫🇮","🇫🇯","🇫🇰","🇫🇲","🇫🇴","🇫🇷","🇬🇦","🇬🇧","🇬🇩","🇬🇪","🇬🇫","🇬🇬","🇬🇭","🇬🇮","🇬🇱","🇬🇲","🇬🇳","🇬🇵","🇬🇶","🇬🇷","🇬🇸","🇬🇹","🇬🇺","🇬🇼","🇬🇾","🇭🇰","🇭🇲","🇭🇳","🇭🇷","🇭🇹","🇭🇺","🇮🇨","🇮🇩","🇮🇪","🇮🇱","🇮🇲","🇮🇳","🇮🇴","🇮🇶","🇮🇷","🇮🇸","🇮🇹","🇯🇪","🇯🇲","🇯🇴","🇯🇵","🇰🇪","🇰🇬","🇰🇭","🇰🇮","🇰🇲","🇰🇳","🇰🇵","🇰🇷","🇰🇼","🇰🇾","🇰🇿","🇱🇦","🇱🇧","🇱🇨","🇱🇮","🇱🇰","🇱🇷","🇱🇸","🇱🇹","🇱🇺","🇱🇻","🇱🇾","🇲🇦","🇲🇨","🇲🇩","🇲🇪","🇲🇫","🇲🇬","🇲🇭","🇲🇰","🇲🇱","🇲🇲","🇲🇳","🇲🇴","🇲🇵","🇲🇶","🇲🇷","🇲🇸","🇲🇹","🇲🇺","🇲🇻","🇲🇼","🇲🇽","🇲🇾","🇲🇿","🇳🇦","🇳🇨","🇳🇪","🇳🇫","🇳🇬","🇳🇮","🇳🇱","🇳🇴","🇳🇵","🇳🇷","🇳🇺","🇳🇿","🇴🇲","🇵🇦","🇵🇪","🇵🇫","🇵🇬","🇵🇭","🇵🇰","🇵🇱","🇵🇲","🇵🇳","🇵🇷","🇵🇸","🇵🇹","🇵🇼","🇵🇾","🇶🇦","🇷🇪","🇷🇴","🇷🇸","🇷🇺","🇷🇼","🇸🇦","🇸🇧","🇸🇨","🇸🇩","🇸🇪","🇸🇬","🇸🇭","🇸🇮","🇸🇯","🇸🇰","🇸🇱","🇸🇲","🇸🇳","🇸🇴","🇸🇷","🇸🇸","🇸🇹","🇸🇻","🇸🇽","🇸🇾","🇸🇿","🇹🇦","🇹🇨","🇹🇩","🇹🇫","🇹🇬","🇹🇭","🇹🇯","🇹🇰","🇹🇱","🇹🇲","🇹🇳","🇹🇴","🇹🇷","🇹🇹","🇹🇻","🇹🇼","🇹🇿","🇺🇦","🇺🇬","🇺🇲","🇺🇳","🇺🇸","🇺🇾","🇺🇿","🇻🇦","🇻🇨","🇻🇪","🇻🇬","🇻🇮","🇻🇳","🇻🇺","🇼🇫","🇼🇸","🇽🇰","🇾🇪","🇾🇹","🇿🇦","🇿🇲","🇿🇼","🈁","🈂️","🈚","🈯","🈲","🈳","🈴","🈵","🈶","🈷️","🈸","🈹","🈺","🉐","🉑","🌀","🌁","🌂","🌃","🌄","🌅","🌆","🌇","🌈","🌉","🌊","🌋","🌌","🌍","🌎","🌏","🌐","🌑","🌒","🌓","🌔","🌕","🌖","🌗","🌘","🌙","🌚","🌛","🌜","🌝","🌞","🌟","🌠","🌡️","🌤️","🌥️","🌦️","🌧️","🌨️","🌩️","🌪️","🌫️","🌬️","🌭","🌮","🌯","🌰","🌱","🌲","🌳","🌴","🌵","🌶️","🌷","🌸","🌹","🌺","🌻","🌼","🌽","🌾","🌿","🍀","🍁","🍂","🍃","🍄","🍅","🍆","🍇","🍈","🍉","🍊","🍋","🍌","🍍","🍎","🍏","🍐","🍑","🍒","🍓","🍔","🍕","🍖","🍗","🍘","🍙","🍚","🍛","🍜","🍝","🍞","🍟","🍠","🍡","🍢","🍣","🍤","🍥","🍦","🍧","🍨","🍩","🍪","🍫","🍬","🍭","🍮","🍯","🍰","🍱","🍲","🍳","🍴","🍵","🍶","🍷","🍸","🍹","🍺","🍻","🍼","🍽️","🍾","🍿","🎀","🎁","🎂","🎃","🎄","🎅","🎅🏻","🎅🏼","🎅🏽","🎅🏾","🎅🏿","🎆","🎇","🎈","🎉","🎊","🎋","🎌","🎍","🎎","🎏","🎐","🎑","🎒","🎓","🎖️","🎗️","🎙️","🎚️","🎛️","🎞️","🎟️","🎠","🎡","🎢","🎣","🎤","🎥","🎦","🎧","🎨","🎩","🎪","🎫","🎬","🎭","🎮","🎯","🎰","🎱","🎲","🎳","🎴","🎵","🎶","🎷","🎸","🎹","🎺","🎻","🎼","🎽","🎾","🎿","🏀","🏁","🏂","🏂🏻","🏂🏼","🏂🏽","🏂🏾","🏂🏿","🏃","🏃‍♀️","🏃‍♂️","🏃🏻","🏃🏻‍♀️","🏃🏻‍♂️","🏃🏼","🏃🏼‍♀️","🏃🏼‍♂️","🏃🏽","🏃🏽‍♀️","🏃🏽‍♂️","🏃🏾","🏃🏾‍♀️","🏃🏾‍♂️","🏃🏿","🏃🏿‍♀️","🏃🏿‍♂️","🏄","🏄‍♀️","🏄‍♂️","🏄🏻","🏄🏻‍♀️","🏄🏻‍♂️","🏄🏼","🏄🏼‍♀️","🏄🏼‍♂️","🏄🏽","🏄🏽‍♀️","🏄🏽‍♂️","🏄🏾","🏄🏾‍♀️","🏄🏾‍♂️","🏄🏿","🏄🏿‍♀️","🏄🏿‍♂️","🏅","🏆","🏇","🏇🏻","🏇🏼","🏇🏽","🏇🏾","🏇🏿","🏈","🏉","🏊","🏊‍♀️","🏊‍♂️","🏊🏻","🏊🏻‍♀️","🏊🏻‍♂️","🏊🏼","🏊🏼‍♀️","🏊🏼‍♂️","🏊🏽","🏊🏽‍♀️","🏊🏽‍♂️","🏊🏾","🏊🏾‍♀️","🏊🏾‍♂️","🏊🏿","🏊🏿‍♀️","🏊🏿‍♂️","🏋🏻","🏋🏻‍♀️","🏋🏻‍♂️","🏋🏼","🏋🏼‍♀️","🏋🏼‍♂️","🏋🏽","🏋🏽‍♀️","🏋🏽‍♂️","🏋🏾","🏋🏾‍♀️","🏋🏾‍♂️","🏋🏿","🏋🏿‍♀️","🏋🏿‍♂️","🏋️","🏋️‍♀️","🏋️‍♂️","🏌🏻","🏌🏻‍♀️","🏌🏻‍♂️","🏌🏼","🏌🏼‍♀️","🏌🏼‍♂️","🏌🏽","🏌🏽‍♀️","🏌🏽‍♂️","🏌🏾","🏌🏾‍♀️","🏌🏾‍♂️","🏌🏿","🏌🏿‍♀️","🏌🏿‍♂️","🏌️","🏌️‍♀️","🏌️‍♂️","🏍️","🏎️","🏏","🏐","🏑","🏒","🏓","🏔️","🏕️","🏖️","🏗️","🏘️","🏙️","🏚️","🏛️","🏜️","🏝️","🏞️","🏟️","🏠","🏡","🏢","🏣","🏤","🏥","🏦","🏧","🏨","🏩","🏪","🏫","🏬","🏭","🏮","🏯","🏰","🏳️","🏳️‍⚧️","🏳️‍🌈","🏴","🏴‍☠️","🏴󠁧󠁢󠁥󠁮󠁧󠁿","🏴󠁧󠁢󠁳󠁣󠁴󠁿","🏴󠁧󠁢󠁷󠁬󠁳󠁿","🏵️","🏷️","🏸","🏹","🏺","🏻","🏼","🏽","🏾","🏿","🐀","🐁","🐂","🐃","🐄","🐅","🐆","🐇","🐈","🐈‍⬛","🐉","🐊","🐋","🐌","🐍","🐎","🐏","🐐","🐑","🐒","🐓","🐔","🐕","🐕‍🦺","🐖","🐗","🐘","🐙","🐚","🐛","🐜","🐝","🐞","🐟","🐠","🐡","🐢","🐣","🐤","🐥","🐦","🐧","🐨","🐩","🐪","🐫","🐬","🐭","🐮","🐯","🐰","🐱","🐲","🐳","🐴","🐵","🐶","🐷","🐸","🐹","🐺","🐻","🐻‍❄️","🐼","🐽","🐾","🐿️","👀","👁️","👁️‍🗨️","👂","👂🏻","👂🏼","👂🏽","👂🏾","👂🏿","👃","👃🏻","👃🏼","👃🏽","👃🏾","👃🏿","👄","👅","👆","👆🏻","👆🏼","👆🏽","👆🏾","👆🏿","👇","👇🏻","👇🏼","👇🏽","👇🏾","👇🏿","👈","👈🏻","👈🏼","👈🏽","👈🏾","👈🏿","👉","👉🏻","👉🏼","👉🏽","👉🏾","👉🏿","👊","👊🏻","👊🏼","👊🏽","👊🏾","👊🏿","👋","👋🏻","👋🏼","👋🏽","👋🏾","👋🏿","👌","👌🏻","👌🏼","👌🏽","👌🏾","👌🏿","👍","👍🏻","👍🏼","👍🏽","👍🏾","👍🏿","👎","👎🏻","👎🏼","👎🏽","👎🏾","👎🏿","👏","👏🏻","👏🏼","👏🏽","👏🏾","👏🏿","👐","👐🏻","👐🏼","👐🏽","👐🏾","👐🏿","👑","👒","👓","👔","👕","👖","👗","👘","👙","👚","👛","👜","👝","👞","👟","👠","👡","👢","👣","👤","👥","👦","👦🏻","👦🏼","👦🏽","👦🏾","👦🏿","👧","👧🏻","👧🏼","👧🏽","👧🏾","👧🏿","👨","👨‍⚕️","👨‍⚖️","👨‍✈️","👨‍❤️‍👨","👨‍❤️‍💋‍👨","👨‍🌾","👨‍🍳","👨‍🍼","👨‍🎓","👨‍🎤","👨‍🎨","👨‍🏫","👨‍🏭","👨‍👦","👨‍👦‍👦","👨‍👧","👨‍👧‍👦","👨‍👧‍👧","👨‍👨‍👦","👨‍👨‍👦‍👦","👨‍👨‍👧","👨‍👨‍👧‍👦","👨‍👨‍👧‍👧","👨‍👩‍👦","👨‍👩‍👦‍👦","👨‍👩‍👧","👨‍👩‍👧‍👦","👨‍👩‍👧‍👧","👨‍💻","👨‍💼","👨‍🔧","👨‍🔬","👨‍🚀","👨‍🚒","👨‍🦯","👨‍🦰","👨‍🦱","👨‍🦲","👨‍🦳","👨‍🦼","👨‍🦽","👨🏻","👨🏻‍⚕️","👨🏻‍⚖️","👨🏻‍✈️","👨🏻‍🌾","👨🏻‍🍳","👨🏻‍🍼","👨🏻‍🎓","👨🏻‍🎤","👨🏻‍🎨","👨🏻‍🏫","👨🏻‍🏭","👨🏻‍💻","👨🏻‍💼","👨🏻‍🔧","👨🏻‍🔬","👨🏻‍🚀","👨🏻‍🚒","👨🏻‍🤝‍👨🏼","👨🏻‍🤝‍👨🏽","👨🏻‍🤝‍👨🏾","👨🏻‍🤝‍👨🏿","👨🏻‍🦯","👨🏻‍🦰","👨🏻‍🦱","👨🏻‍🦲","👨🏻‍🦳","👨🏻‍🦼","👨🏻‍🦽","👨🏼","👨🏼‍⚕️","👨🏼‍⚖️","👨🏼‍✈️","👨🏼‍🌾","👨🏼‍🍳","👨🏼‍🍼","👨🏼‍🎓","👨🏼‍🎤","👨🏼‍🎨","👨🏼‍🏫","👨🏼‍🏭","👨🏼‍💻","👨🏼‍💼","👨🏼‍🔧","👨🏼‍🔬","👨🏼‍🚀","👨🏼‍🚒","👨🏼‍🤝‍👨🏻","👨🏼‍🤝‍👨🏽","👨🏼‍🤝‍👨🏾","👨🏼‍🤝‍👨🏿","👨🏼‍🦯","👨🏼‍🦰","👨🏼‍🦱","👨🏼‍🦲","👨🏼‍🦳","👨🏼‍🦼","👨🏼‍🦽","👨🏽","👨🏽‍⚕️","👨🏽‍⚖️","👨🏽‍✈️","👨🏽‍🌾","👨🏽‍🍳","👨🏽‍🍼","👨🏽‍🎓","👨🏽‍🎤","👨🏽‍🎨","👨🏽‍🏫","👨🏽‍🏭","👨🏽‍💻","👨🏽‍💼","👨🏽‍🔧","👨🏽‍🔬","👨🏽‍🚀","👨🏽‍🚒","👨🏽‍🤝‍👨🏻","👨🏽‍🤝‍👨🏼","👨🏽‍🤝‍👨🏾","👨🏽‍🤝‍👨🏿","👨🏽‍🦯","👨🏽‍🦰","👨🏽‍🦱","👨🏽‍🦲","👨🏽‍🦳","👨🏽‍🦼","👨🏽‍🦽","👨🏾","👨🏾‍⚕️","👨🏾‍⚖️","👨🏾‍✈️","👨🏾‍🌾","👨🏾‍🍳","👨🏾‍🍼","👨🏾‍🎓","👨🏾‍🎤","👨🏾‍🎨","👨🏾‍🏫","👨🏾‍🏭","👨🏾‍💻","👨🏾‍💼","👨🏾‍🔧","👨🏾‍🔬","👨🏾‍🚀","👨🏾‍🚒","👨🏾‍🤝‍👨🏻","👨🏾‍🤝‍👨🏼","👨🏾‍🤝‍👨🏽","👨🏾‍🤝‍👨🏿","👨🏾‍🦯","👨🏾‍🦰","👨🏾‍🦱","👨🏾‍🦲","👨🏾‍🦳","👨🏾‍🦼","👨🏾‍🦽","👨🏿","👨🏿‍⚕️","👨🏿‍⚖️","👨🏿‍✈️","👨🏿‍🌾","👨🏿‍🍳","👨🏿‍🍼","👨🏿‍🎓","👨🏿‍🎤","👨🏿‍🎨","👨🏿‍🏫","👨🏿‍🏭","👨🏿‍💻","👨🏿‍💼","👨🏿‍🔧","👨🏿‍🔬","👨🏿‍🚀","👨🏿‍🚒","👨🏿‍🤝‍👨🏻","👨🏿‍🤝‍👨🏼","👨🏿‍🤝‍👨🏽","👨🏿‍🤝‍👨🏾","👨🏿‍🦯","👨🏿‍🦰","👨🏿‍🦱","👨🏿‍🦲","👨🏿‍🦳","👨🏿‍🦼","👨🏿‍🦽","👩","👩‍⚕️","👩‍⚖️","👩‍✈️","👩‍❤️‍👨","👩‍❤️‍👩","👩‍❤️‍💋‍👨","👩‍❤️‍💋‍👩","👩‍🌾","👩‍🍳","👩‍🍼","👩‍🎓","👩‍🎤","👩‍🎨","👩‍🏫","👩‍🏭","👩‍👦","👩‍👦‍👦","👩‍👧","👩‍👧‍👦","👩‍👧‍👧","👩‍👩‍👦","👩‍👩‍👦‍👦","👩‍👩‍👧","👩‍👩‍👧‍👦","👩‍👩‍👧‍👧","👩‍💻","👩‍💼","👩‍🔧","👩‍🔬","👩‍🚀","👩‍🚒","👩‍🦯","👩‍🦰","👩‍🦱","👩‍🦲","👩‍🦳","👩‍🦼","👩‍🦽","👩🏻","👩🏻‍⚕️","👩🏻‍⚖️","👩🏻‍✈️","👩🏻‍🌾","👩🏻‍🍳","👩🏻‍🍼","👩🏻‍🎓","👩🏻‍🎤","👩🏻‍🎨","👩🏻‍🏫","👩🏻‍🏭","👩🏻‍💻","👩🏻‍💼","👩🏻‍🔧","👩🏻‍🔬","👩🏻‍🚀","👩🏻‍🚒","👩🏻‍🤝‍👨🏼","👩🏻‍🤝‍👨🏽","👩🏻‍🤝‍👨🏾","👩🏻‍🤝‍👨🏿","👩🏻‍🤝‍👩🏼","👩🏻‍🤝‍👩🏽","👩🏻‍🤝‍👩🏾","👩🏻‍🤝‍👩🏿","👩🏻‍🦯","👩🏻‍🦰","👩🏻‍🦱","👩🏻‍🦲","👩🏻‍🦳","👩🏻‍🦼","👩🏻‍🦽","👩🏼","👩🏼‍⚕️","👩🏼‍⚖️","👩🏼‍✈️","👩🏼‍🌾","👩🏼‍🍳","👩🏼‍🍼","👩🏼‍🎓","👩🏼‍🎤","👩🏼‍🎨","👩🏼‍🏫","👩🏼‍🏭","👩🏼‍💻","👩🏼‍💼","👩🏼‍🔧","👩🏼‍🔬","👩🏼‍🚀","👩🏼‍🚒","👩🏼‍🤝‍👨🏻","👩🏼‍🤝‍👨🏽","👩🏼‍🤝‍👨🏾","👩🏼‍🤝‍👨🏿","👩🏼‍🤝‍👩🏻","👩🏼‍🤝‍👩🏽","👩🏼‍🤝‍👩🏾","👩🏼‍🤝‍👩🏿","👩🏼‍🦯","👩🏼‍🦰","👩🏼‍🦱","👩🏼‍🦲","👩🏼‍🦳","👩🏼‍🦼","👩🏼‍🦽","👩🏽","👩🏽‍⚕️","👩🏽‍⚖️","👩🏽‍✈️","👩🏽‍🌾","👩🏽‍🍳","👩🏽‍🍼","👩🏽‍🎓","👩🏽‍🎤","👩🏽‍🎨","👩🏽‍🏫","👩🏽‍🏭","👩🏽‍💻","👩🏽‍💼","👩🏽‍🔧","👩🏽‍🔬","👩🏽‍🚀","👩🏽‍🚒","👩🏽‍🤝‍👨🏻","👩🏽‍🤝‍👨🏼","👩🏽‍🤝‍👨🏾","👩🏽‍🤝‍👨🏿","👩🏽‍🤝‍👩🏻","👩🏽‍🤝‍👩🏼","👩🏽‍🤝‍👩🏾","👩🏽‍🤝‍👩🏿","👩🏽‍🦯","👩🏽‍🦰","👩🏽‍🦱","👩🏽‍🦲","👩🏽‍🦳","👩🏽‍🦼","👩🏽‍🦽","👩🏾","👩🏾‍⚕️","👩🏾‍⚖️","👩🏾‍✈️","👩🏾‍🌾","👩🏾‍🍳","👩🏾‍🍼","👩🏾‍🎓","👩🏾‍🎤","👩🏾‍🎨","👩🏾‍🏫","👩🏾‍🏭","👩🏾‍💻","👩🏾‍💼","👩🏾‍🔧","👩🏾‍🔬","👩🏾‍🚀","👩🏾‍🚒","👩🏾‍🤝‍👨🏻","👩🏾‍🤝‍👨🏼","👩🏾‍🤝‍👨🏽","👩🏾‍🤝‍👨🏿","👩🏾‍🤝‍👩🏻","👩🏾‍🤝‍👩🏼","👩🏾‍🤝‍👩🏽","👩🏾‍🤝‍👩🏿","👩🏾‍🦯","👩🏾‍🦰","👩🏾‍🦱","👩🏾‍🦲","👩🏾‍🦳","👩🏾‍🦼","👩🏾‍🦽","👩🏿","👩🏿‍⚕️","👩🏿‍⚖️","👩🏿‍✈️","👩🏿‍🌾","👩🏿‍🍳","👩🏿‍🍼","👩🏿‍🎓","👩🏿‍🎤","👩🏿‍🎨","👩🏿‍🏫","👩🏿‍🏭","👩🏿‍💻","👩🏿‍💼","👩🏿‍🔧","👩🏿‍🔬","👩🏿‍🚀","👩🏿‍🚒","👩🏿‍🤝‍👨🏻","👩🏿‍🤝‍👨🏼","👩🏿‍🤝‍👨🏽","👩🏿‍🤝‍👨🏾","👩🏿‍🤝‍👩🏻","👩🏿‍🤝‍👩🏼","👩🏿‍🤝‍👩🏽","👩🏿‍🤝‍👩🏾","👩🏿‍🦯","👩🏿‍🦰","👩🏿‍🦱","👩🏿‍🦲","👩🏿‍🦳","👩🏿‍🦼","👩🏿‍🦽","👪","👫","👫🏻","👫🏼","👫🏽","👫🏾","👫🏿","👬","👬🏻","👬🏼","👬🏽","👬🏾","👬🏿","👭","👭🏻","👭🏼","👭🏽","👭🏾","👭🏿","👮","👮‍♀️","👮‍♂️","👮🏻","👮🏻‍♀️","👮🏻‍♂️","👮🏼","👮🏼‍♀️","👮🏼‍♂️","👮🏽","👮🏽‍♀️","👮🏽‍♂️","👮🏾","👮🏾‍♀️","👮🏾‍♂️","👮🏿","👮🏿‍♀️","👮🏿‍♂️","👯","👯‍♀️","👯‍♂️","👰","👰‍♀️","👰‍♂️","👰🏻","👰🏻‍♀️","👰🏻‍♂️","👰🏼","👰🏼‍♀️","👰🏼‍♂️","👰🏽","👰🏽‍♀️","👰🏽‍♂️","👰🏾","👰🏾‍♀️","👰🏾‍♂️","👰🏿","👰🏿‍♀️","👰🏿‍♂️","👱","👱‍♀️","👱‍♂️","👱🏻","👱🏻‍♀️","👱🏻‍♂️","👱🏼","👱🏼‍♀️","👱🏼‍♂️","👱🏽","👱🏽‍♀️","👱🏽‍♂️","👱🏾","👱🏾‍♀️","👱🏾‍♂️","👱🏿","👱🏿‍♀️","👱🏿‍♂️","👲","👲🏻","👲🏼","👲🏽","👲🏾","👲🏿","👳","👳‍♀️","👳‍♂️","👳🏻","👳🏻‍♀️","👳🏻‍♂️","👳🏼","👳🏼‍♀️","👳🏼‍♂️","👳🏽","👳🏽‍♀️","👳🏽‍♂️","👳🏾","👳🏾‍♀️","👳🏾‍♂️","👳🏿","👳🏿‍♀️","👳🏿‍♂️","👴","👴🏻","👴🏼","👴🏽","👴🏾","👴🏿","👵","👵🏻","👵🏼","👵🏽","👵🏾","👵🏿","👶","👶🏻","👶🏼","👶🏽","👶🏾","👶🏿","👷","👷‍♀️","👷‍♂️","👷🏻","👷🏻‍♀️","👷🏻‍♂️","👷🏼","👷🏼‍♀️","👷🏼‍♂️","👷🏽","👷🏽‍♀️","👷🏽‍♂️","👷🏾","👷🏾‍♀️","👷🏾‍♂️","👷🏿","👷🏿‍♀️","👷🏿‍♂️","👸","👸🏻","👸🏼","👸🏽","👸🏾","👸🏿","👹","👺","👻","👼","👼🏻","👼🏼","👼🏽","👼🏾","👼🏿","👽","👾","👿","💀","💁","💁‍♀️","💁‍♂️","💁🏻","💁🏻‍♀️","💁🏻‍♂️","💁🏼","💁🏼‍♀️","💁🏼‍♂️","💁🏽","💁🏽‍♀️","💁🏽‍♂️","💁🏾","💁🏾‍♀️","💁🏾‍♂️","💁🏿","💁🏿‍♀️","💁🏿‍♂️","💂","💂‍♀️","💂‍♂️","💂🏻","💂🏻‍♀️","💂🏻‍♂️","💂🏼","💂🏼‍♀️","💂🏼‍♂️","💂🏽","💂🏽‍♀️","💂🏽‍♂️","💂🏾","💂🏾‍♀️","💂🏾‍♂️","💂🏿","💂🏿‍♀️","💂🏿‍♂️","💃","💃🏻","💃🏼","💃🏽","💃🏾","💃🏿","💄","💅","💅🏻","💅🏼","💅🏽","💅🏾","💅🏿","💆","💆‍♀️","💆‍♂️","💆🏻","💆🏻‍♀️","💆🏻‍♂️","💆🏼","💆🏼‍♀️","💆🏼‍♂️","💆🏽","💆🏽‍♀️","💆🏽‍♂️","💆🏾","💆🏾‍♀️","💆🏾‍♂️","💆🏿","💆🏿‍♀️","💆🏿‍♂️","💇","💇‍♀️","💇‍♂️","💇🏻","💇🏻‍♀️","💇🏻‍♂️","💇🏼","💇🏼‍♀️","💇🏼‍♂️","💇🏽","💇🏽‍♀️","💇🏽‍♂️","💇🏾","💇🏾‍♀️","💇🏾‍♂️","💇🏿","💇🏿‍♀️","💇🏿‍♂️","💈","💉","💊","💋","💌","💍","💎","💏","💐","💑","💒","💓","💔","💕","💖","💗","💘","💙","💚","💛","💜","💝","💞","💟","💠","💡","💢","💣","💤","💥","💦","💧","💨","💩","💪","💪🏻","💪🏼","💪🏽","💪🏾","💪🏿","💫","💬","💭","💮","💯","💰","💱","💲","💳","💴","💵","💶","💷","💸","💹","💺","💻","💼","💽","💾","💿","📀","📁","📂","📃","📄","📅","📆","📇","📈","📉","📊","📋","📌","📍","📎","📏","📐","📑","📒","📓","📔","📕","📖","📗","📘","📙","📚","📛","📜","📝","📞","📟","📠","📡","📢","📣","📤","📥","📦","📧","📨","📩","📪","📫","📬","📭","📮","📯","📰","📱","📲","📳","📴","📵","📶","📷","📸","📹","📺","📻","📼","📽️","📿","🔀","🔁","🔂","🔃","🔄","🔅","🔆","🔇","🔈","🔉","🔊","🔋","🔌","🔍","🔎","🔏","🔐","🔑","🔒","🔓","🔔","🔕","🔖","🔗","🔘","🔙","🔚","🔛","🔜","🔝","🔞","🔟","🔠","🔡","🔢","🔣","🔤","🔥","🔦","🔧","🔨","🔩","🔪","🔫","🔬","🔭","🔮","🔯","🔰","🔱","🔲","🔳","🔴","🔵","🔶","🔷","🔸","🔹","🔺","🔻","🔼","🔽","🕉️","🕊️","🕋","🕌","🕍","🕎","🕐","🕑","🕒","🕓","🕔","🕕","🕖","🕗","🕘","🕙","🕚","🕛","🕜","🕝","🕞","🕟","🕠","🕡","🕢","🕣","🕤","🕥","🕦","🕧","🕯️","🕰️","🕳️","🕴🏻","🕴🏼","🕴🏽","🕴🏾","🕴🏿","🕴️","🕵🏻","🕵🏻‍♀️","🕵🏻‍♂️","🕵🏼","🕵🏼‍♀️","🕵🏼‍♂️","🕵🏽","🕵🏽‍♀️","🕵🏽‍♂️","🕵🏾","🕵🏾‍♀️","🕵🏾‍♂️","🕵🏿","🕵🏿‍♀️","🕵🏿‍♂️","🕵️","🕵️‍♀️","🕵️‍♂️","🕶️","🕷️","🕸️","🕹️","🕺","🕺🏻","🕺🏼","🕺🏽","🕺🏾","🕺🏿","🖇️","🖊️","🖋️","🖌️","🖍️","🖐🏻","🖐🏼","🖐🏽","🖐🏾","🖐🏿","🖐️","🖕","🖕🏻","🖕🏼","🖕🏽","🖕🏾","🖕🏿","🖖","🖖🏻","🖖🏼","🖖🏽","🖖🏾","🖖🏿","🖤","🖥️","🖨️","🖱️","🖲️","🖼️","🗂️","🗃️","🗄️","🗑️","🗒️","🗓️","🗜️","🗝️","🗞️","🗡️","🗣️","🗨️","🗯️","🗳️","🗺️","🗻","🗼","🗽","🗾","🗿","😀","😁","😂","😃","😄","😅","😆","😇","😈","😉","😊","😋","😌","😍","😎","😏","😐","😑","😒","😓","😔","😕","😖","😗","😘","😙","😚","😛","😜","😝","😞","😟","😠","😡","😢","😣","😤","😥","😦","😧","😨","😩","😪","😫","😬","😭","😮","😯","😰","😱","😲","😳","😴","😵","😶","😷","😸","😹","😺","😻","😼","😽","😾","😿","🙀","🙁","🙂","🙃","🙄","🙅","🙅‍♀️","🙅‍♂️","🙅🏻","🙅🏻‍♀️","🙅🏻‍♂️","🙅🏼","🙅🏼‍♀️","🙅🏼‍♂️","🙅🏽","🙅🏽‍♀️","🙅🏽‍♂️","🙅🏾","🙅🏾‍♀️","🙅🏾‍♂️","🙅🏿","🙅🏿‍♀️","🙅🏿‍♂️","🙆","🙆‍♀️","🙆‍♂️","🙆🏻","🙆🏻‍♀️","🙆🏻‍♂️","🙆🏼","🙆🏼‍♀️","🙆🏼‍♂️","🙆🏽","🙆🏽‍♀️","🙆🏽‍♂️","🙆🏾","🙆🏾‍♀️","🙆🏾‍♂️","🙆🏿","🙆🏿‍♀️","🙆🏿‍♂️","🙇","🙇‍♀️","🙇‍♂️","🙇🏻","🙇🏻‍♀️","🙇🏻‍♂️","🙇🏼","🙇🏼‍♀️","🙇🏼‍♂️","🙇🏽","🙇🏽‍♀️","🙇🏽‍♂️","🙇🏾","🙇🏾‍♀️","🙇🏾‍♂️","🙇🏿","🙇🏿‍♀️","🙇🏿‍♂️","🙈","🙉","🙊","🙋","🙋‍♀️","🙋‍♂️","🙋🏻","🙋🏻‍♀️","🙋🏻‍♂️","🙋🏼","🙋🏼‍♀️","🙋🏼‍♂️","🙋🏽","🙋🏽‍♀️","🙋🏽‍♂️","🙋🏾","🙋🏾‍♀️","🙋🏾‍♂️","🙋🏿","🙋🏿‍♀️","🙋🏿‍♂️","🙌","🙌🏻","🙌🏼","🙌🏽","🙌🏾","🙌🏿","🙍","🙍‍♀️","🙍‍♂️","🙍🏻","🙍🏻‍♀️","🙍🏻‍♂️","🙍🏼","🙍🏼‍♀️","🙍🏼‍♂️","🙍🏽","🙍🏽‍♀️","🙍🏽‍♂️","🙍🏾","🙍🏾‍♀️","🙍🏾‍♂️","🙍🏿","🙍🏿‍♀️","🙍🏿‍♂️","🙎","🙎‍♀️","🙎‍♂️","🙎🏻","🙎🏻‍♀️","🙎🏻‍♂️","🙎🏼","🙎🏼‍♀️","🙎🏼‍♂️","🙎🏽","🙎🏽‍♀️","🙎🏽‍♂️","🙎🏾","🙎🏾‍♀️","🙎🏾‍♂️","🙎🏿","🙎🏿‍♀️","🙎🏿‍♂️","🙏","🙏🏻","🙏🏼","🙏🏽","🙏🏾","🙏🏿","🚀","🚁","🚂","🚃","🚄","🚅","🚆","🚇","🚈","🚉","🚊","🚋","🚌","🚍","🚎","🚏","🚐","🚑","🚒","🚓","🚔","🚕","🚖","🚗","🚘","🚙","🚚","🚛","🚜","🚝","🚞","🚟","🚠","🚡","🚢","🚣","🚣‍♀️","🚣‍♂️","🚣🏻","🚣🏻‍♀️","🚣🏻‍♂️","🚣🏼","🚣🏼‍♀️","🚣🏼‍♂️","🚣🏽","🚣🏽‍♀️","🚣🏽‍♂️","🚣🏾","🚣🏾‍♀️","🚣🏾‍♂️","🚣🏿","🚣🏿‍♀️","🚣🏿‍♂️","🚤","🚥","🚦","🚧","🚨","🚩","🚪","🚫","🚬","🚭","🚮","🚯","🚰","🚱","🚲","🚳","🚴","🚴‍♀️","🚴‍♂️","🚴🏻","🚴🏻‍♀️","🚴🏻‍♂️","🚴🏼","🚴🏼‍♀️","🚴🏼‍♂️","🚴🏽","🚴🏽‍♀️","🚴🏽‍♂️","🚴🏾","🚴🏾‍♀️","🚴🏾‍♂️","🚴🏿","🚴🏿‍♀️","🚴🏿‍♂️","🚵","🚵‍♀️","🚵‍♂️","🚵🏻","🚵🏻‍♀️","🚵🏻‍♂️","🚵🏼","🚵🏼‍♀️","🚵🏼‍♂️","🚵🏽","🚵🏽‍♀️","🚵🏽‍♂️","🚵🏾","🚵🏾‍♀️","🚵🏾‍♂️","🚵🏿","🚵🏿‍♀️","🚵🏿‍♂️","🚶","🚶‍♀️","🚶‍♂️","🚶🏻","🚶🏻‍♀️","🚶🏻‍♂️","🚶🏼","🚶🏼‍♀️","🚶🏼‍♂️","🚶🏽","🚶🏽‍♀️","🚶🏽‍♂️","🚶🏾","🚶🏾‍♀️","🚶🏾‍♂️","🚶🏿","🚶🏿‍♀️","🚶🏿‍♂️","🚷","🚸","🚹","🚺","🚻","🚼","🚽","🚾","🚿","🛀","🛀🏻","🛀🏼","🛀🏽","🛀🏾","🛀🏿","🛁","🛂","🛃","🛄","🛅","🛋️","🛌","🛌🏻","🛌🏼","🛌🏽","🛌🏾","🛌🏿","🛍️","🛎️","🛏️","🛐","🛑","🛒","🛕","🛖","🛗","🛠️","🛡️","🛢️","🛣️","🛤️","🛥️","🛩️","🛫","🛬","🛰️","🛳️","🛴","🛵","🛶","🛷","🛸","🛹","🛺","🛻","🛼","🟠","🟡","🟢","🟣","🟤","🟥","🟦","🟧","🟨","🟩","🟪","🟫","🤌","🤌🏻","🤌🏼","🤌🏽","🤌🏾","🤌🏿","🤍","🤎","🤏","🤏🏻","🤏🏼","🤏🏽","🤏🏾","🤏🏿","🤐","🤑","🤒","🤓","🤔","🤕","🤖","🤗","🤘","🤘🏻","🤘🏼","🤘🏽","🤘🏾","🤘🏿","🤙","🤙🏻","🤙🏼","🤙🏽","🤙🏾","🤙🏿","🤚","🤚🏻","🤚🏼","🤚🏽","🤚🏾","🤚🏿","🤛","🤛🏻","🤛🏼","🤛🏽","🤛🏾","🤛🏿","🤜","🤜🏻","🤜🏼","🤜🏽","🤜🏾","🤜🏿","🤝","🤞","🤞🏻","🤞🏼","🤞🏽","🤞🏾","🤞🏿","🤟","🤟🏻","🤟🏼","🤟🏽","🤟🏾","🤟🏿","🤠","🤡","🤢","🤣","🤤","🤥","🤦","🤦‍♀️","🤦‍♂️","🤦🏻","🤦🏻‍♀️","🤦🏻‍♂️","🤦🏼","🤦🏼‍♀️","🤦🏼‍♂️","🤦🏽","🤦🏽‍♀️","🤦🏽‍♂️","🤦🏾","🤦🏾‍♀️","🤦🏾‍♂️","🤦🏿","🤦🏿‍♀️","🤦🏿‍♂️","🤧","🤨","🤩","🤪","🤫","🤬","🤭","🤮","🤯","🤰","🤰🏻","🤰🏼","🤰🏽","🤰🏾","🤰🏿","🤱","🤱🏻","🤱🏼","🤱🏽","🤱🏾","🤱🏿","🤲","🤲🏻","🤲🏼","🤲🏽","🤲🏾","🤲🏿","🤳","🤳🏻","🤳🏼","🤳🏽","🤳🏾","🤳🏿","🤴","🤴🏻","🤴🏼","🤴🏽","🤴🏾","🤴🏿","🤵","🤵‍♀️","🤵‍♂️","🤵🏻","🤵🏻‍♀️","🤵🏻‍♂️","🤵🏼","🤵🏼‍♀️","🤵🏼‍♂️","🤵🏽","🤵🏽‍♀️","🤵🏽‍♂️","🤵🏾","🤵🏾‍♀️","🤵🏾‍♂️","🤵🏿","🤵🏿‍♀️","🤵🏿‍♂️","🤶","🤶🏻","🤶🏼","🤶🏽","🤶🏾","🤶🏿","🤷","🤷‍♀️","🤷‍♂️","🤷🏻","🤷🏻‍♀️","🤷🏻‍♂️","🤷🏼","🤷🏼‍♀️","🤷🏼‍♂️","🤷🏽","🤷🏽‍♀️","🤷🏽‍♂️","🤷🏾","🤷🏾‍♀️","🤷🏾‍♂️","🤷🏿","🤷🏿‍♀️","🤷🏿‍♂️","🤸","🤸‍♀️","🤸‍♂️","🤸🏻","🤸🏻‍♀️","🤸🏻‍♂️","🤸🏼","🤸🏼‍♀️","🤸🏼‍♂️","🤸🏽","🤸🏽‍♀️","🤸🏽‍♂️","🤸🏾","🤸🏾‍♀️","🤸🏾‍♂️","🤸🏿","🤸🏿‍♀️","🤸🏿‍♂️","🤹","🤹‍♀️","🤹‍♂️","🤹🏻","🤹🏻‍♀️","🤹🏻‍♂️","🤹🏼","🤹🏼‍♀️","🤹🏼‍♂️","🤹🏽","🤹🏽‍♀️","🤹🏽‍♂️","🤹🏾","🤹🏾‍♀️","🤹🏾‍♂️","🤹🏿","🤹🏿‍♀️","🤹🏿‍♂️","🤺","🤼","🤼‍♀️","🤼‍♂️","🤽","🤽‍♀️","🤽‍♂️","🤽🏻","🤽🏻‍♀️","🤽🏻‍♂️","🤽🏼","🤽🏼‍♀️","🤽🏼‍♂️","🤽🏽","🤽🏽‍♀️","🤽🏽‍♂️","🤽🏾","🤽🏾‍♀️","🤽🏾‍♂️","🤽🏿","🤽🏿‍♀️","🤽🏿‍♂️","🤾","🤾‍♀️","🤾‍♂️","🤾🏻","🤾🏻‍♀️","🤾🏻‍♂️","🤾🏼","🤾🏼‍♀️","🤾🏼‍♂️","🤾🏽","🤾🏽‍♀️","🤾🏽‍♂️","🤾🏾","🤾🏾‍♀️","🤾🏾‍♂️","🤾🏿","🤾🏿‍♀️","🤾🏿‍♂️","🤿","🥀","🥁","🥂","🥃","🥄","🥅","🥇","🥈","🥉","🥊","🥋","🥌","🥍","🥎","🥏","🥐","🥑","🥒","🥓","🥔","🥕","🥖","🥗","🥘","🥙","🥚","🥛","🥜","🥝","🥞","🥟","🥠","🥡","🥢","🥣","🥤","🥥","🥦","🥧","🥨","🥩","🥪","🥫","🥬","🥭","🥮","🥯","🥰","🥱","🥲","🥳","🥴","🥵","🥶","🥷","🥷🏻","🥷🏼","🥷🏽","🥷🏾","🥷🏿","🥸","🥺","🥻","🥼","🥽","🥾","🥿","🦀","🦁","🦂","🦃","🦄","🦅","🦆","🦇","🦈","🦉","🦊","🦋","🦌","🦍","🦎","🦏","🦐","🦑","🦒","🦓","🦔","🦕","🦖","🦗","🦘","🦙","🦚","🦛","🦜","🦝","🦞","🦟","🦠","🦡","🦢","🦣","🦤","🦥","🦦","🦧","🦨","🦩","🦪","🦫","🦬","🦭","🦮","🦯","🦰","🦱","🦲","🦳","🦴","🦵","🦵🏻","🦵🏼","🦵🏽","🦵🏾","🦵🏿","🦶","🦶🏻","🦶🏼","🦶🏽","🦶🏾","🦶🏿","🦷","🦸","🦸‍♀️","🦸‍♂️","🦸🏻","🦸🏻‍♀️","🦸🏻‍♂️","🦸🏼","🦸🏼‍♀️","🦸🏼‍♂️","🦸🏽","🦸🏽‍♀️","🦸🏽‍♂️","🦸🏾","🦸🏾‍♀️","🦸🏾‍♂️","🦸🏿","🦸🏿‍♀️","🦸🏿‍♂️","🦹","🦹‍♀️","🦹‍♂️","🦹🏻","🦹🏻‍♀️","🦹🏻‍♂️","🦹🏼","🦹🏼‍♀️","🦹🏼‍♂️","🦹🏽","🦹🏽‍♀️","🦹🏽‍♂️","🦹🏾","🦹🏾‍♀️","🦹🏾‍♂️","🦹🏿","🦹🏿‍♀️","🦹🏿‍♂️","🦺","🦻","🦻🏻","🦻🏼","🦻🏽","🦻🏾","🦻🏿","🦼","🦽","🦾","🦿","🧀","🧁","🧂","🧃","🧄","🧅","🧆","🧇","🧈","🧉","🧊","🧋","🧍","🧍‍♀️","🧍‍♂️","🧍🏻","🧍🏻‍♀️","🧍🏻‍♂️","🧍🏼","🧍🏼‍♀️","🧍🏼‍♂️","🧍🏽","🧍🏽‍♀️","🧍🏽‍♂️","🧍🏾","🧍🏾‍♀️","🧍🏾‍♂️","🧍🏿","🧍🏿‍♀️","🧍🏿‍♂️","🧎","🧎‍♀️","🧎‍♂️","🧎🏻","🧎🏻‍♀️","🧎🏻‍♂️","🧎🏼","🧎🏼‍♀️","🧎🏼‍♂️","🧎🏽","🧎🏽‍♀️","🧎🏽‍♂️","🧎🏾","🧎🏾‍♀️","🧎🏾‍♂️","🧎🏿","🧎🏿‍♀️","🧎🏿‍♂️","🧏","🧏‍♀️","🧏‍♂️","🧏🏻","🧏🏻‍♀️","🧏🏻‍♂️","🧏🏼","🧏🏼‍♀️","🧏🏼‍♂️","🧏🏽","🧏🏽‍♀️","🧏🏽‍♂️","🧏🏾","🧏🏾‍♀️","🧏🏾‍♂️","🧏🏿","🧏🏿‍♀️","🧏🏿‍♂️","🧐","🧑","🧑‍⚕️","🧑‍⚖️","🧑‍✈️","🧑‍🌾","🧑‍🍳","🧑‍🍼","🧑‍🎄","🧑‍🎓","🧑‍🎤","🧑‍🎨","🧑‍🏫","🧑‍🏭","🧑‍💻","🧑‍💼","🧑‍🔧","🧑‍🔬","🧑‍🚀","🧑‍🚒","🧑‍🤝‍🧑","🧑‍🦯","🧑‍🦰","🧑‍🦱","🧑‍🦲","🧑‍🦳","🧑‍🦼","🧑‍🦽","🧑🏻","🧑🏻‍⚕️","🧑🏻‍⚖️","🧑🏻‍✈️","🧑🏻‍🌾","🧑🏻‍🍳","🧑🏻‍🍼","🧑🏻‍🎄","🧑🏻‍🎓","🧑🏻‍🎤","🧑🏻‍🎨","🧑🏻‍🏫","🧑🏻‍🏭","🧑🏻‍💻","🧑🏻‍💼","🧑🏻‍🔧","🧑🏻‍🔬","🧑🏻‍🚀","🧑🏻‍🚒","🧑🏻‍🤝‍🧑🏻","🧑🏻‍🤝‍🧑🏼","🧑🏻‍🤝‍🧑🏽","🧑🏻‍🤝‍🧑🏾","🧑🏻‍🤝‍🧑🏿","🧑🏻‍🦯","🧑🏻‍🦰","🧑🏻‍🦱","🧑🏻‍🦲","🧑🏻‍🦳","🧑🏻‍🦼","🧑🏻‍🦽","🧑🏼","🧑🏼‍⚕️","🧑🏼‍⚖️","🧑🏼‍✈️","🧑🏼‍🌾","🧑🏼‍🍳","🧑🏼‍🍼","🧑🏼‍🎄","🧑🏼‍🎓","🧑🏼‍🎤","🧑🏼‍🎨","🧑🏼‍🏫","🧑🏼‍🏭","🧑🏼‍💻","🧑🏼‍💼","🧑🏼‍🔧","🧑🏼‍🔬","🧑🏼‍🚀","🧑🏼‍🚒","🧑🏼‍🤝‍🧑🏻","🧑🏼‍🤝‍🧑🏼","🧑🏼‍🤝‍🧑🏽","🧑🏼‍🤝‍🧑🏾","🧑🏼‍🤝‍🧑🏿","🧑🏼‍🦯","🧑🏼‍🦰","🧑🏼‍🦱","🧑🏼‍🦲","🧑🏼‍🦳","🧑🏼‍🦼","🧑🏼‍🦽","🧑🏽","🧑🏽‍⚕️","🧑🏽‍⚖️","🧑🏽‍✈️","🧑🏽‍🌾","🧑🏽‍🍳","🧑🏽‍🍼","🧑🏽‍🎄","🧑🏽‍🎓","🧑🏽‍🎤","🧑🏽‍🎨","🧑🏽‍🏫","🧑🏽‍🏭","🧑🏽‍💻","🧑🏽‍💼","🧑🏽‍🔧","🧑🏽‍🔬","🧑🏽‍🚀","🧑🏽‍🚒","🧑🏽‍🤝‍🧑🏻","🧑🏽‍🤝‍🧑🏼","🧑🏽‍🤝‍🧑🏽","🧑🏽‍🤝‍🧑🏾","🧑🏽‍🤝‍🧑🏿","🧑🏽‍🦯","🧑🏽‍🦰","🧑🏽‍🦱","🧑🏽‍🦲","🧑🏽‍🦳","🧑🏽‍🦼","🧑🏽‍🦽","🧑🏾","🧑🏾‍⚕️","🧑🏾‍⚖️","🧑🏾‍✈️","🧑🏾‍🌾","🧑🏾‍🍳","🧑🏾‍🍼","🧑🏾‍🎄","🧑🏾‍🎓","🧑🏾‍🎤","🧑🏾‍🎨","🧑🏾‍🏫","🧑🏾‍🏭","🧑🏾‍💻","🧑🏾‍💼","🧑🏾‍🔧","🧑🏾‍🔬","🧑🏾‍🚀","🧑🏾‍🚒","🧑🏾‍🤝‍🧑🏻","🧑🏾‍🤝‍🧑🏼","🧑🏾‍🤝‍🧑🏽","🧑🏾‍🤝‍🧑🏾","🧑🏾‍🤝‍🧑🏿","🧑🏾‍🦯","🧑🏾‍🦰","🧑🏾‍🦱","🧑🏾‍🦲","🧑🏾‍🦳","🧑🏾‍🦼","🧑🏾‍🦽","🧑🏿","🧑🏿‍⚕️","🧑🏿‍⚖️","🧑🏿‍✈️","🧑🏿‍🌾","🧑🏿‍🍳","🧑🏿‍🍼","🧑🏿‍🎄","🧑🏿‍🎓","🧑🏿‍🎤","🧑🏿‍🎨","🧑🏿‍🏫","🧑🏿‍🏭","🧑🏿‍💻","🧑🏿‍💼","🧑🏿‍🔧","🧑🏿‍🔬","🧑🏿‍🚀","🧑🏿‍🚒","🧑🏿‍🤝‍🧑🏻","🧑🏿‍🤝‍🧑🏼","🧑🏿‍🤝‍🧑🏽","🧑🏿‍🤝‍🧑🏾","🧑🏿‍🤝‍🧑🏿","🧑🏿‍🦯","🧑🏿‍🦰","🧑🏿‍🦱","🧑🏿‍🦲","🧑🏿‍🦳","🧑🏿‍🦼","🧑🏿‍🦽","🧒","🧒🏻","🧒🏼","🧒🏽","🧒🏾","🧒🏿","🧓","🧓🏻","🧓🏼","🧓🏽","🧓🏾","🧓🏿","🧔","🧔🏻","🧔🏼","🧔🏽","🧔🏾","🧔🏿","🧕","🧕🏻","🧕🏼","🧕🏽","🧕🏾","🧕🏿","🧖","🧖‍♀️","🧖‍♂️","🧖🏻","🧖🏻‍♀️","🧖🏻‍♂️","🧖🏼","🧖🏼‍♀️","🧖🏼‍♂️","🧖🏽","🧖🏽‍♀️","🧖🏽‍♂️","🧖🏾","🧖🏾‍♀️","🧖🏾‍♂️","🧖🏿","🧖🏿‍♀️","🧖🏿‍♂️","🧗","🧗‍♀️","🧗‍♂️","🧗🏻","🧗🏻‍♀️","🧗🏻‍♂️","🧗🏼","🧗🏼‍♀️","🧗🏼‍♂️","🧗🏽","🧗🏽‍♀️","🧗🏽‍♂️","🧗🏾","🧗🏾‍♀️","🧗🏾‍♂️","🧗🏿","🧗🏿‍♀️","🧗🏿‍♂️","🧘","🧘‍♀️","🧘‍♂️","🧘🏻","🧘🏻‍♀️","🧘🏻‍♂️","🧘🏼","🧘🏼‍♀️","🧘🏼‍♂️","🧘🏽","🧘🏽‍♀️","🧘🏽‍♂️","🧘🏾","🧘🏾‍♀️","🧘🏾‍♂️","🧘🏿","🧘🏿‍♀️","🧘🏿‍♂️","🧙","🧙‍♀️","🧙‍♂️","🧙🏻","🧙🏻‍♀️","🧙🏻‍♂️","🧙🏼","🧙🏼‍♀️","🧙🏼‍♂️","🧙🏽","🧙🏽‍♀️","🧙🏽‍♂️","🧙🏾","🧙🏾‍♀️","🧙🏾‍♂️","🧙🏿","🧙🏿‍♀️","🧙🏿‍♂️","🧚","🧚‍♀️","🧚‍♂️","🧚🏻","🧚🏻‍♀️","🧚🏻‍♂️","🧚🏼","🧚🏼‍♀️","🧚🏼‍♂️","🧚🏽","🧚🏽‍♀️","🧚🏽‍♂️","🧚🏾","🧚🏾‍♀️","🧚🏾‍♂️","🧚🏿","🧚🏿‍♀️","🧚🏿‍♂️","🧛","🧛‍♀️","🧛‍♂️","🧛🏻","🧛🏻‍♀️","🧛🏻‍♂️","🧛🏼","🧛🏼‍♀️","🧛🏼‍♂️","🧛🏽","🧛🏽‍♀️","🧛🏽‍♂️","🧛🏾","🧛🏾‍♀️","🧛🏾‍♂️","🧛🏿","🧛🏿‍♀️","🧛🏿‍♂️","🧜","🧜‍♀️","🧜‍♂️","🧜🏻","🧜🏻‍♀️","🧜🏻‍♂️","🧜🏼","🧜🏼‍♀️","🧜🏼‍♂️","🧜🏽","🧜🏽‍♀️","🧜🏽‍♂️","🧜🏾","🧜🏾‍♀️","🧜🏾‍♂️","🧜🏿","🧜🏿‍♀️","🧜🏿‍♂️","🧝","🧝‍♀️","🧝‍♂️","🧝🏻","🧝🏻‍♀️","🧝🏻‍♂️","🧝🏼","🧝🏼‍♀️","🧝🏼‍♂️","🧝🏽","🧝🏽‍♀️","🧝🏽‍♂️","🧝🏾","🧝🏾‍♀️","🧝🏾‍♂️","🧝🏿","🧝🏿‍♀️","🧝🏿‍♂️","🧞","🧞‍♀️","🧞‍♂️","🧟","🧟‍♀️","🧟‍♂️","🧠","🧡","🧢","🧣","🧤","🧥","🧦","🧧","🧨","🧩","🧪","🧫","🧬","🧭","🧮","🧯","🧰","🧱","🧲","🧳","🧴","🧵","🧶","🧷","🧸","🧹","🧺","🧻","🧼","🧽","🧾","🧿","🩰","🩱","🩲","🩳","🩴","🩸","🩹","🩺","🪀","🪁","🪂","🪃","🪄","🪅","🪆","🪐","🪑","🪒","🪓","🪔","🪕","🪖","🪗","🪘","🪙","🪚","🪛","🪜","🪝","🪞","🪟","🪠","🪡","🪢","🪣","🪤","🪥","🪦","🪧","🪨","🪰","🪱","🪲","🪳","🪴","🪵","🪶","🫀","🫁","🫂","🫐","🫑","🫒","🫓","🫔","🫕","🫖"]},74404:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.generateEphemeralSystemMessage=function(){i.default.supportsFeature(i.default.F.MD_BACKEND)};var i=r(a(18120))},27853:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEphemeralExpirationTimestamp=function(e,t,a,r,i){if("ephemeral_setting"===r)return null;if(null==e||0===e)return null;if(i&&null!=t)return t+e;return a+e}},38822:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.isEphemeralDurationAllowed=function(e){return!(e<0)&&(0===e||i.default.getEphemeralMessagesAllowedValues().includes(e))};var i=r(a(72424))},13735:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.getEphemeralSettingChangeByOthersString=function(e=0,t){return C(S.SettingChangeByOthers,e,t)},t.getEphemeralSettingChangeByYouString=function(e=0){return C(S.SettingChangeByYou,e)},t.getEphemeralSettingChangeByUnknownString=function(e=0){return C(S.SettingChangeByUnknown,e)},t.getEphemeralSettingChangeByOthersAsAdminString=function(e=0,t){return C(S.SettingChangeByOthersAsAdmin,e,t)},t.getEphemeralSettingChangeByYouAsAdminString=function(e=0){return C(S.SettingChangeByYouAsAdmin,e)},t.getEphemeralSettingChangeByUnknownAsAdminString=function(e=0){return C(S.SettingChangeByUnknownAsAdmin,e)},t.getEphemeralDurationString=function(e=0){return C(S.Duration,e)},t.getEphemeralOutOfSyncInfoString=function(e=0){return C(S.OutOfSyncInfo,e)},t.getEphemeralExplanationString=function(e=0){return C(S.Explanation,e)},t.EphemeralL10n=function(e){var{type:t,numSeconds:a=0,name:r}=e;if(a<0)return __LOG__(4,void 0,new Error,!0)(p(),t,a),SEND_LOGS("invalid-duration"),null;if(0===a)return function(e,t){return e===S.SettingChangeByOthers&&null!=t?n.createElement(l.default,{id:606,params:{name:t}}):e===S.SettingChangeByYou?n.createElement(l.default,{id:601}):e===S.SettingChangeByUnknown?n.createElement(l.default,{id:596}):e===S.SettingChangeByOthersAsAdmin&&null!=t?n.createElement(l.default,{id:622,params:{name:t}}):e===S.SettingChangeByYouAsAdmin?n.createElement(l.default,{id:617}):e===S.SettingChangeByUnknownAsAdmin?n.createElement(l.default,{id:612}):e===S.Duration?n.createElement(l.default,{id:649}):e===S.OutOfSyncInfo?n.createElement(l.default,{id:635}):(__LOG__(4,void 0,new Error,!0)(f(),e),SEND_LOGS("invalid-ephemeral-string-type"),null)}(t,r);if(a<=60)return function(e,t,a){return e===S.SettingChangeByOthers&&null!=a?n.createElement(l.default,{id:610,params:{name:a,number:t},plural:t}):e===S.SettingChangeByYou?n.createElement(l.default,{id:605,params:{number:t},plural:t}):e===S.SettingChangeByUnknown?n.createElement(l.default,{id:600,params:{number:t},plural:t}):e===S.SettingChangeByOthersAsAdmin&&null!=a?n.createElement(l.default,{id:626,params:{name:a,number:t},plural:t}):e===S.SettingChangeByYouAsAdmin?n.createElement(l.default,{id:621,params:{number:t},plural:t}):e===S.SettingChangeByUnknownAsAdmin?n.createElement(l.default,{id:616,params:{number:t},plural:t}):e===S.Duration?n.createElement(l.default,{id:654,params:{number:t},plural:t}):e===S.OutOfSyncInfo?n.createElement(l.default,{id:639,params:{number:t},plural:t}):e===S.Explanation?n.createElement(l.default,{id:632,params:{number:t},plural:t}):(__LOG__(4,void 0,new Error,!0)(h(),e,a),SEND_LOGS("invalid-ephemeral-string-type"),null)}(t,a,r);if(a<=3600){var i=Math.floor(a/60);return function(e,t,a){return e===S.SettingChangeByOthers&&null!=a?n.createElement(l.default,{id:609,params:{name:a,number:t},plural:t}):e===S.SettingChangeByYou?n.createElement(l.default,{id:604,params:{number:t},plural:t}):e===S.SettingChangeByUnknown?n.createElement(l.default,{id:599,params:{number:t},plural:t}):e===S.SettingChangeByOthersAsAdmin&&null!=a?n.createElement(l.default,{id:625,params:{name:a,number:t},plural:t}):e===S.SettingChangeByYouAsAdmin?n.createElement(l.default,{id:620,params:{number:t},plural:t}):e===S.SettingChangeByUnknownAsAdmin?n.createElement(l.default,{id:615,params:{number:t},plural:t}):e===S.Duration?n.createElement(l.default,{id:653,params:{number:t},plural:t}):e===S.OutOfSyncInfo?n.createElement(l.default,{id:638,params:{number:t},plural:t}):e===S.Explanation?n.createElement(l.default,{id:631,params:{number:t},plural:t}):(__LOG__(4,void 0,new Error,!0)(c(),e,a),SEND_LOGS("invalid-ephemeral-string-type"),null)}(t,i,r)}if(a<=86400){var s=Math.floor(a/60/60);return function(e,t,a){return e===S.SettingChangeByOthers&&null!=a?n.createElement(l.default,{id:608,params:{name:a,number:t},plural:t}):e===S.SettingChangeByYou?n.createElement(l.default,{id:603,params:{number:t},plural:t}):e===S.SettingChangeByUnknown?n.createElement(l.default,{id:598,params:{number:t},plural:t}):e===S.SettingChangeByOthersAsAdmin&&null!=a?n.createElement(l.default,{id:624,params:{name:a,number:t},plural:t}):e===S.SettingChangeByYouAsAdmin?n.createElement(l.default,{id:619,params:{number:t},plural:t}):e===S.SettingChangeByUnknownAsAdmin?n.createElement(l.default,{id:614,params:{number:t},plural:t}):e===S.Duration?n.createElement(l.default,{id:652,params:{number:t},plural:t}):e===S.OutOfSyncInfo?n.createElement(l.default,{id:637,params:{number:t},plural:t}):e===S.Explanation?n.createElement(l.default,{id:630,params:{number:t},plural:t}):(__LOG__(4,void 0,new Error,!0)(u(),e,a),SEND_LOGS("invalid-ephemeral-string-type"),null)}(t,s,r)}var o=Math.floor(a/24/60/60);return function(e,t,a){return e===S.SettingChangeByOthers&&null!=a?n.createElement(l.default,{id:607,params:{name:a,number:t},plural:t}):e===S.SettingChangeByYou?n.createElement(l.default,{id:602,params:{number:t},plural:t}):e===S.SettingChangeByUnknown?n.createElement(l.default,{id:597,params:{number:t},plural:t}):e===S.SettingChangeByOthersAsAdmin&&null!=a?n.createElement(l.default,{id:623,params:{name:a,number:t},plural:t}):e===S.SettingChangeByYouAsAdmin?n.createElement(l.default,{id:618,params:{number:t},plural:t}):e===S.SettingChangeByUnknownAsAdmin?n.createElement(l.default,{id:613,params:{number:t},plural:t}):e===S.Duration?n.createElement(l.default,{id:651,params:{number:t},plural:t}):e===S.OutOfSyncInfo?n.createElement(l.default,{id:636,params:{number:t},plural:t}):e===S.Explanation?n.createElement(l.default,{id:629,params:{number:t},plural:t}):(__LOG__(4,void 0,new Error,!0)(d(),e,a),SEND_LOGS("invalid-ephemeral-string-type"),null)}(t,o,r)},t.EphemeralStringType=void 0;var s=i(a(19976)),n=r(a(2784)),o=i(a(17957)),l=i(a(81524));function d(){var e=(0,s.default)(["getEphemeralOnDaysL10nComponent is given type "," and name ",""]);return d=function(){return e},e}function u(){var e=(0,s.default)(["getEphemeralOnHoursL10nComponent is given type "," and name ",""]);return u=function(){return e},e}function c(){var e=(0,s.default)(["getEphemeralOnMinutesL10nComponent is given type "," and name ",""]);return c=function(){return e},e}function h(){var e=(0,s.default)(["getEphemeralOnSecondsL10nComponent is given type "," and name ",""]);return h=function(){return e},e}function f(){var e=(0,s.default)(["getEphemeralOffL10nComponent is given invalid type ",""]);return f=function(){return e},e}function p(){var e=(0,s.default)(["getEphemeralL10nComponent "," is given invalid duration ",""]);return p=function(){return e},e}function m(){var e=(0,s.default)(["getEphemeralOnDaysString is given type "," and name ",""]);return m=function(){return e},e}function _(){var e=(0,s.default)(["getEphemeralOnHoursString is given type "," and name ",""]);return _=function(){return e},e}function v(){var e=(0,s.default)(["getEphemeralOnMinutesString is given type "," and name ",""]);return v=function(){return e},e}function g(){var e=(0,s.default)(["getEphemeralOnSecondsString is given type "," and name ",""]);return g=function(){return e},e}function E(){var e=(0,s.default)(["getEphemeralOffString is given invalid type ",""]);return E=function(){return e},e}function y(){var e=(0,s.default)(["getEphemeralString "," is given invalid duration ",""]);return y=function(){return e},e}var S=a(28103).Mirrored(["SettingChangeByOthers","SettingChangeByYou","SettingChangeByUnknown","SettingChangeByOthersAsAdmin","SettingChangeByYouAsAdmin","SettingChangeByUnknownAsAdmin","Duration","OutOfSyncInfo","Explanation"]);function C(e,t=0,a){return t<0?(__LOG__(4,void 0,new Error,!0)(y(),e,t),SEND_LOGS("invalid-duration"),""):0===t?function(e,t){return e===S.SettingChangeByOthers&&null!=t?o.default.t(606,{name:t}):e===S.SettingChangeByYou?o.default.t(601):e===S.SettingChangeByUnknown?o.default.t(596):e===S.SettingChangeByOthersAsAdmin&&null!=t?o.default.t(622,{name:t}):e===S.SettingChangeByYouAsAdmin?o.default.t(617):e===S.SettingChangeByUnknownAsAdmin?o.default.t(612):e===S.Duration?o.default.t(649):e===S.OutOfSyncInfo?o.default.t(635):(__LOG__(4,void 0,new Error,!0)(E(),e),SEND_LOGS("invalid-ephemeral-string-type"),"")}(e,a):t<=60?function(e,t,a){return e===S.SettingChangeByOthers&&null!=a?o.default.t(610,{name:a,number:t,_plural:t}):e===S.SettingChangeByYou?o.default.t(605,{number:t,_plural:t}):e===S.SettingChangeByUnknown?o.default.t(600,{number:t,_plural:t}):e===S.SettingChangeByOthersAsAdmin&&null!=a?o.default.t(626,{name:a,number:t,_plural:t}):e===S.SettingChangeByYouAsAdmin?o.default.t(621,{number:t,_plural:t}):e===S.SettingChangeByUnknownAsAdmin?o.default.t(616,{number:t,_plural:t}):e===S.Duration?o.default.t(654,{number:t,_plural:t}):e===S.OutOfSyncInfo?o.default.t(639,{number:t,_plural:t}):e===S.Explanation?o.default.t(632,{number:t,_plural:t}):(__LOG__(4,void 0,new Error,!0)(g(),e,a),SEND_LOGS("invalid-ephemeral-string-type"),"")}(e,t,a):t<=3600?function(e,t,a){return e===S.SettingChangeByOthers&&null!=a?o.default.t(609,{name:a,number:t,_plural:t}):e===S.SettingChangeByYou?o.default.t(604,{number:t,_plural:t}):e===S.SettingChangeByUnknown?o.default.t(599,{number:t,_plural:t}):e===S.SettingChangeByOthersAsAdmin&&null!=a?o.default.t(625,{name:a,number:t,_plural:t}):e===S.SettingChangeByYouAsAdmin?o.default.t(620,{number:t,_plural:t}):e===S.SettingChangeByUnknownAsAdmin?o.default.t(615,{number:t,_plural:t}):e===S.Duration?o.default.t(653,{number:t,_plural:t}):e===S.OutOfSyncInfo?o.default.t(638,{number:t,_plural:t}):e===S.Explanation?o.default.t(631,{number:t,_plural:t}):(__LOG__(4,void 0,new Error,!0)(v(),e,a),SEND_LOGS("invalid-ephemeral-string-type"),"")}(e,Math.floor(t/60),a):t<=86400?function(e,t,a){return e===S.SettingChangeByOthers&&null!=a?o.default.t(608,{name:a,number:t,_plural:t}):e===S.SettingChangeByYou?o.default.t(603,{number:t,_plural:t}):e===S.SettingChangeByUnknown?o.default.t(598,{number:t,_plural:t}):e===S.SettingChangeByOthersAsAdmin&&null!=a?o.default.t(624,{name:a,number:t,_plural:t}):e===S.SettingChangeByYouAsAdmin?o.default.t(619,{number:t,_plural:t}):e===S.SettingChangeByUnknownAsAdmin?o.default.t(614,{number:t,_plural:t}):e===S.Duration?o.default.t(652,{number:t,_plural:t}):e===S.OutOfSyncInfo?o.default.t(637,{number:t,_plural:t}):e===S.Explanation?o.default.t(630,{number:t,_plural:t}):(__LOG__(4,void 0,new Error,!0)(_(),e,a),SEND_LOGS("invalid-ephemeral-string-type"),"")}(e,Math.floor(t/60/60),a):function(e,t,a){return e===S.SettingChangeByOthers&&null!=a?o.default.t(607,{name:a,number:t,_plural:t}):e===S.SettingChangeByYou?o.default.t(602,{number:t,_plural:t}):e===S.SettingChangeByUnknown?o.default.t(597,{number:t,_plural:t}):e===S.SettingChangeByOthersAsAdmin&&null!=a?o.default.t(623,{name:a,number:t,_plural:t}):e===S.SettingChangeByYouAsAdmin?o.default.t(618,{number:t,_plural:t}):e===S.SettingChangeByUnknownAsAdmin?o.default.t(613,{number:t,_plural:t}):e===S.Duration?o.default.t(651,{number:t,_plural:t}):e===S.OutOfSyncInfo?o.default.t(636,{number:t,_plural:t}):e===S.Explanation?o.default.t(629,{number:t,_plural:t}):(__LOG__(4,void 0,new Error,!0)(m(),e,a),SEND_LOGS("invalid-ephemeral-string-type"),"")}(e,Math.floor(t/24/60/60),a)}t.EphemeralStringType=S},44989:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shouldUpdateEphemeralSetting=function(e){var{oldDuration:t,oldSettingTimestamp:a,newDuration:i,newSettingTimestamp:s,chatId:n}=e;return s>a||!(s<a)&&(t!==i&&!(0,r.getMaybeMeUser)().isLessThan(n))};var r=a(95595)},555:(e,t,a)=>{"use strict";var r=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.getFiles=function(e,t){var a=e.target.files||e.dataTransfer&&e.dataTransfer.files,r=a?Array.from(a):[];if(t){var o=("string"==typeof t?[t]:t).map((e=>new RegExp(e)));r=r.filter((e=>o.some((t=>e.type.match(t)))))}if(r.length)return Promise.resolve(r);var l=e.dataTransfer;if(l&&l.getData("text/uri-list"))return n.urlToFile(l.getData("text/uri-list")).then((e=>[(0,s.createFile)([e],"",{type:e.type})]));if(l&&l.getData("text/html")){var d=(new DOMParser).parseFromString(l.getData("text/html"),"text/html");if(d.createNodeIterator(d.childNodes[0],NodeFilter.SHOW_TEXT).nextNode()){if(l.getData("text/plain")){var u=new i.MediaDragDropError("dropped html has text nodes: ".concat(l.getData("text/plain")));return Promise.reject(u)}}else{var c=d.getElementsByTagName("img");if(c.length)return n.urlToFile(c[0].src).then((e=>[(0,s.createFile)([e],"",{type:e.type})]))}}return Promise.resolve([])};var i=r(a(96452)),s=a(99888),n=r(a(44202))},43396:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AllowedFileExtensions",{enumerable:!0,get:function(){return m.AllowedFileExtensions}}),t.default=void 0;var s=i(a(19976)),n=r(a(2784)),o=i(a(61867)),l=i(a(79711)),d=i(a(9386)),u=i(a(50935)),c=a(96268),h=i(a(14280)),f=i(a(17957)),p=i(a(14558)),m=a(19191);function _(){var e=(0,s.default)(["Download failed, error: ",""]);return _=function(){return e},e}function v(){var e=(0,s.default)(["Assertion failed! ",""]);return v=function(){return e},e}function g(){var e=(0,s.default)(["Assertion failed! ",""]);return g=function(){return e},e}function E(){var e=(0,s.default)(["Assertion failed!"]);return E=function(){return e},e}var y=new class{downloadData(e,t,a){var r=window.URL.createObjectURL(e),i=(0,c.createDataLink)(r);return i.style.display="none",i.download="".concat(t).concat(a),document.body&&document.body.appendChild(i),i.click(),document.body&&document.body.removeChild(i),(0,p.default)(100).then((()=>{window.URL.revokeObjectURL(i.href)})),Promise.resolve()}initDownload(e){var t=e;if(!window.Modernizr.adownload){var a=f.default.t(1856,{chrome_homepage:u.default.BROWSER_LINK.CHROME,firefox_homepage:u.default.BROWSER_LINK.FIREFOX,opera_homepage:u.default.BROWSER_LINK.OPERA});return l.default.openModal(n.createElement(d.default,{onOK:()=>l.default.closeModal(),okText:f.default.t(1709)},a)),__LOG__(4,void 0,new Error,!0)(E()),void SEND_LOGS("safari, adownload is false in download mgr")}o.default.startDownloading(),(0,h.default)(t).then((e=>{e.url||e.blob||(__LOG__(4,void 0,new Error,!0)(g(),Array.isArray(t)?"download a zip file":"download ".concat(t.id.toString()," type ").concat(t.type," with state ").concat(t.mediaData&&t.mediaData.mediaStage)),SEND_LOGS("download-url-creation-error"));var a=e.url||window.URL.createObjectURL(e.blob),r=(0,c.createDataLink)(a);r.download=e.name,r.style.display="none",Array.isArray(t)&&1===t.length&&(t=t[0]),r.href||(__LOG__(4,void 0,new Error,!0)(v(),Array.isArray(t)?"download a zip file":"download ".concat(t.id.toString()," type ").concat(t.type," with state ").concat(t.mediaData&&t.mediaData.mediaStage)),SEND_LOGS("no-download-url")),document.body&&document.body.appendChild(r),r.click(),document.body&&document.body.removeChild(r),e.url||(0,p.default)(100).then((()=>{window.URL.revokeObjectURL(r.href)}))})).catch((e=>{__LOG__(3)(_(),String(e))}))}};t.default=y},19191:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AllowedFileExtensions=void 0;var r=a(28103)({PNG:".png",TXT:".txt",ZIP:".zip"});t.AllowedFileExtensions=r},27011:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(82108)),s=r(a(19034)),n=r(a(19899)),o=r(a(50935)),l=r(a(17957)),d=a(41501),u=a(84990),c={getDefaultName(e){var t;if(e.type===o.default.MSG_TYPE.DOCUMENT){var a=(e.filename||"").trim();t=a||(e.caption||"").trim()||l.default.t(1385),a&&function(e){return/[\.].{1,4}$/.test(e)}(a)||(t=h(t,e))}else t=e.type===o.default.MSG_TYPE.VCARD?h(t=(e.vcardFormattedName||"").trim()||f(e),e):e.type===o.default.MSG_TYPE.MULTI_VCARD?h(t=e.vcardList?(0,u.getNameString)(e.vcardList):f(e),e):h(t=f(e),e);return t}};function h(e,t){var a=e,r=t.type===o.default.MSG_TYPE.VCARD||t.type===o.default.MSG_TYPE.MULTI_VCARD?"text/vcard":t.mimetype,i=(0,d.getExtension)(r);return a.endsWith(i)||(a+=i),a}function f(e){var t=s.default.unix(e.t).locale("en"),a="".concat(t.format("YYYY-MM-DD")," at ").concat(t.format(n.default.getIs24Hour()?"HH.mm.ss":"h.mm.ss A"));return"WhatsApp ".concat((0,i.default)(e.type)," ").concat(a)}t.default=c},18164:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BoldedContactName=t.HeaderAndFooter=t.UntrustedGroupDesc=t.TrustedGroupDesc=t.FormattedNotification=t.RawNotification=t.ComposeBox=t.QuotedMention=t.Format=t.QuickReply=t.FTSMessage=t.LastMessage=t.SearchName=t.Search=t.Conversation=t.Compatibility=t.StatusV3Caption=t.StatusV3Text=t.LargeEmojiOnly=t.EmojiOnly=void 0;var r=a(17275);t.EmojiOnly=({selectable:e}={})=>[[[r.Emoji,{selectable:e}]]];t.LargeEmojiOnly=({selectable:e}={})=>[[[r.Emoji,{selectable:e,size:"large"}]]];t.StatusV3Text=({links:e,selectable:t}={})=>[[[r.Code,{selectable:t}]],[[r.Link,{links:e,selectable:t}]],[[r.Bold,{selectable:t}],[r.Italic,{selectable:t}],[r.Strikethrough,{selectable:t}]],[[r.Emoji,{selectable:t,size:"xlarge"}]]];t.StatusV3Caption=({selectable:e}={})=>[[[r.Code,{selectable:e}]],[[r.Bold,{selectable:e}],[r.Italic,{selectable:e}],[r.Strikethrough,{selectable:e}]],[[r.Emoji,{selectable:e}]]];t.Compatibility=({selectable:e}={})=>[[[r.Emoji,{selectable:e}]]];t.Conversation=({mentions:e,links:t,selectable:a,trusted:i}={})=>[[[r.Code,{selectable:a}]],i?[[r.Link,{links:t,selectable:a}]]:null,e?[[r.Mention,{mentions:e,selectable:a}]]:null,[[r.Bold,{selectable:a}],[r.Italic,{selectable:a}],[r.Strikethrough,{selectable:a}]],[[r.Emoji,{selectable:a}]]].filter(Boolean);t.Search=({boundary:e,terms:t,selectable:a,mentions:i})=>[[[r.TextMention,{mentions:i,selectable:a}]],[[r.Bold,{selectable:a}],[r.Italic,{selectable:a}],[r.Strikethrough,{selectable:a}]],[[r.Highlight,{terms:t,boundary:e,selectable:a,ignoreDiacritics:!0}]],[[r.Emoji,{selectable:a}]]];t.SearchName=({terms:e})=>[[[r.Highlight,{terms:e,ignoreDiacritics:!0}]],[[r.Emoji,{selectable:!1}]]];t.LastMessage=({mentions:e,selectable:t}={})=>[[[r.Code,{selectable:t}]],e?[[r.TextMention,{mentions:e,selectable:t}]]:null,[[r.Bold,{selectable:t}],[r.Italic,{selectable:t}],[r.Strikethrough,{selectable:t}]],[[r.Emoji,{selectable:t}]]].filter(Boolean);t.FTSMessage=({boundary:e,mentions:t,terms:a,selectable:i})=>[[[r.Code,{selectable:i}]],[[r.TextMention,{mentions:t,selectable:i}]],[[r.Bold,{selectable:i}],[r.Italic,{selectable:i}],[r.Strikethrough,{selectable:i}]],[[r.Highlight,{terms:a,boundary:e,selectable:i}]],[[r.Emoji,{selectable:i}]]];t.QuickReply=({selectable:e}={})=>[[[r.Code,{selectable:e}]],[[r.Bold,{selectable:e}],[r.Italic,{selectable:e}],[r.Strikethrough,{selectable:e}]],[[r.Emoji,{selectable:e}]]];t.Format=({mentions:e,selectable:t})=>[[[r.Code,{selectable:t}]],[[r.TextMention,{mentions:e,selectable:t}]],[[r.Bold,{selectable:t}],[r.Italic,{selectable:t}],[r.Strikethrough,{selectable:t}]],[[r.Emoji,{selectable:t}]]];t.QuotedMention=({mentions:e,selectable:t})=>[[[r.Code,{selectable:t}]],[[r.TextMention,{mentions:e,selectable:t,theme:{quoted:!0}}]],[[r.Bold,{selectable:t}],[r.Italic,{selectable:t}],[r.Strikethrough,{selectable:t}]],[[r.Emoji,{selectable:t}]]];t.ComposeBox=({selectable:e}={})=>[[[r.Code,{selectable:e}]],[[r.Link,{selectable:e}]],[[r.Bold,{selectable:e}],[r.Italic,{selectable:e}],[r.Strikethrough,{selectable:e}]],[[r.Emoticon,{selectable:e}]]];t.RawNotification=({mentions:e,selectable:t})=>[[[r.RawMention,{mentions:e,selectable:t}]]];t.FormattedNotification=({mentions:e,selectable:t})=>[[[r.Code,{selectable:t}]],[[r.RawMention,{mentions:e,selectable:t}]],[[r.Bold,{selectable:t}],[r.Italic,{selectable:t}],[r.Strikethrough,{selectable:t}]]];t.TrustedGroupDesc=({links:e})=>{var t=!0;return[[[r.Code,{selectable:t}]],[[r.Link,{links:e,selectable:t}]],[[r.Bold,{selectable:t}],[r.Italic,{selectable:t}],[r.Strikethrough,{selectable:t}]],[[r.Emoji,{selectable:t}]]]};t.UntrustedGroupDesc=()=>{var e=!0;return[[[r.Code,{selectable:e}]],[[r.Bold,{selectable:e}],[r.Italic,{selectable:e}],[r.Strikethrough,{selectable:e}]],[[r.Emoji,{selectable:e}]]]};t.HeaderAndFooter=({links:e,selectable:t,trusted:a}={})=>[a?[[r.Link,{links:e,selectable:t}]]:null,[[r.Emoji,{selectable:t}]]].filter(Boolean);t.BoldedContactName=({selectable:e})=>[[[r.BoldFirstWord,{selectable:e}]],[[r.Emoji,{selectable:e}]]]},72034:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,r,n=1/0){return(0,s.default)(a,(0,i.default)(e,t,n),r)};var i=r(a(47028)),s=r(a(41222))},84097:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t,a){var r=2*e.length+t[1].length,i=t[0].length-r;return i>0&&(t.index+=i,t[0]=t[0].slice(i)),a.lastIndex--,t}}},38311:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enableHeaderAndFooterFormatting=function(e,t){return{formatters:(0,r.HeaderAndFooter)({links:e,selectable:!0,trusted:t}),selectable:!0}};var r=a(18164)},6981:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t=0,a){return class extends s.default{static match(r){return(0,i.default)(r,e,t,a)}}};var i=r(a(43018)),s=r(a(84188))},11965:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t=0){var{index:a}=e,[r]=e,i=a+r.length-1,s=[a,a,i,i,e];if(t){var n=e[t];s[1]=a+r.indexOf(n),s[2]=s[1]+n.length-1}return s}},43018:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a=0,r){var s,n=[];t.lastIndex=0;for(;(s=t.exec(e))&&t.lastIndex>0;)r&&(s=r(s,t)),s&&n.push((0,i.default)(s,a));return n};var i=r(a(11965))},62902:(e,t,a)=>{"use strict";var r=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.Configuration=void 0;var i=r(a(18164));t.Configuration=i},84188:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;class a{static match(){throw new Error("Subclasses of `Mutator` must override `match()`")}static mutate(e){return e}}t.default=a,a.nestable=()=>!0,a.format=!0,a.fragment=!1,a.compatibility=!1,a.mutates=!1},30209:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(84097)),o=r(a(88465)),l=r(a(6981)),d=(0,n.default)("*"),u=(0,l.default)(/(?:^|[\s\W_])\*([^\s\u20e3]|[^\s\u20e3][^\n]*?\S)\*(?=$|[[\s\W_])/g,1,d);t.default=class extends u{static jsx(e,t,{selectable:a=!1}){return s.createElement(o.default,{selectable:a},e)}}},29629:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(88465)),o=(0,r(a(6981)).default)(/^(\w*)\b/g);t.default=class extends o{static jsx(e,t,{selectable:a=!1}){return s.createElement(n.default,{selectable:a},e)}}},80073:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.removeCodeBlocks=t.isInsideCodeBlock=t.default=void 0;var s=i(a(2784)),n=r(a(56867)),o=r(a(6981)),l=/```([\s\S]*?\S[\s\S]*?)```/g,d=(0,o.default)(l,1),u=new Set(["ListItem","List"]);class c extends d{static jsx(e,t,{selectable:a=!1}){return s.createElement(n.default,{selectable:a},e)}}t.default=c,c.nestable=e=>u.has(e),c.format=!1;t.isInsideCodeBlock=e=>{var t=e.split(l).pop();return/```/.test(t)};t.removeCodeBlocks=e=>e.replace(l," ")},88465:(e,t,a)=>{"use strict";var r=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(2784)),s=a(66615);function n({children:e,selectable:t}){return i.createElement(s.SelectableStrong,{selectable:t,appTextTemplate:"*${appText}*"},e)}n.defaultProps={children:""};var o=n;t.default=o},56867:(e,t,a)=>{"use strict";var r=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({children:e="",selectable:t}){return i.createElement(s.SelectableCode,{selectable:t,appTextTemplate:"```${appText}```"},e)};var i=r(a(2784)),s=a(66615)},9254:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(44977)),o=i(a(21406));t.default=({emoji:e,selectable:t,size:a})=>"xlarge"===a?s.createElement(o.default,{emoji:e,size:o.SIZE.XLARGE,element:"span",selectable:t}):s.createElement(n.default,{emoji:e,selectable:t,size:a})},25843:(e,t,a)=>{"use strict";var r=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(2784)),s=a(66615);function n({children:e,selectable:t}){return i.createElement(s.SelectableSpan,{className:"matched-text",selectable:t},e)}n.defaultProps={children:""};var o=n;t.default=o},41090:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return s.createElement(n.default,e,e.children)};var s=i(a(2784)),n=r(a(42862))},8907:(e,t,a)=>{"use strict";var r=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(2784)),s=a(66615);function n({children:e,selectable:t}){return i.createElement(s.SelectableEm,{selectable:t,appTextTemplate:"_${appText}_"},e)}n.defaultProps={children:""};var o=n;t.default=o},42862:(e,t,a)=>{"use strict";var r=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(2784)),s=a(66615);function n({href:e,children:t,selectable:a}){return i.createElement(s.SelectableLink,{href:e,title:e,target:"_blank",rel:"noopener noreferrer",selectable:a},t)}n.defaultProps={children:""};var o=n;t.default=o},60710:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({children:e="",inline:t,isAtStart:a,selectable:r}){return n.createElement(n.Fragment,null,n.createElement(l.SelectableUl,{appTextTemplate:a?"${appText}":"\n${appText}",className:(0,s.default)({[o.default.inline]:t},o.default.ul),selectable:r},e))};var s=i(a(72779)),n=r(a(2784)),o=i(a(66564)),l=a(66615)},27823:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({children:e="",inline:t,selectable:a}){return n.createElement("li",{className:(0,s.default)({[o.default.inline]:t})},n.createElement(l.SelectableSpan,{selectable:a,appTextTemplate:"* ${appText}"},e))};var s=i(a(72779)),n=r(a(2784)),o=i(a(34145)),l=a(66615)},81861:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(43334)),o=r(a(79711)),l=r(a(40207)),d=r(a(16672));class u extends s.Component{constructor(...e){super(...e),this.onClick=()=>{var{contact:e}=this.props;n.default.find(e.id).then((e=>o.default.openChatBottom(e)))}}render(){var{contact:e,theme:t,selectable:a}=this.props,r=e.isMe?void 0:this.onClick;return s.createElement(d.default,{contact:e,theme:t,selectable:a,onClick:r})}}u.CONCERNS={contact:["id","isMe"]};var c=(0,l.default)(u,u.CONCERNS);t.default=c},8981:(e,t,a)=>{"use strict";var r=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(2784)),s=a(66615);function n({children:e,selectable:t}){return i.createElement(s.SelectableDel,{selectable:t,appTextTemplate:"~${appText}~"},e)}n.defaultProps={children:""};var o=n;t.default=o},75241:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(79711)),o=a(66615),l=r(a(82338));function d({link:e,children:t,selectable:a}){return s.createElement(o.SelectableLink,{onClick:()=>n.default.openModal(s.createElement(l.default,{link:e})),selectable:a,style:{cursor:"pointer"}},t)}d.defaultProps={children:""};var u=d;t.default=u},16672:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.TextMention=void 0;var s=i(a(72779)),n=r(a(2784)),o=a(91540),l=i(a(30508)),d=i(a(72034)),u=a(66615),c=a(89659),h=i(a(40207));class f extends n.Component{render(){var{contact:e,onClick:t,theme:a,selectable:r}=this.props,i=e.displayName,h=e.id,f=(0,o.dir)(i)||"auto",p=!!a&&a.quoted,m=(0,d.default)(i,[[[l.default,{selectable:r}]]],c.JSXSerializer,void 0,1/0);return n.createElement(u.SelectableSpan,{"data-jid":h.toString(),"data-display":i,className:(0,s.default)("matched-mention",{"quoted-mention":p,"inactive-mention":!t||p}),onClick:t,plainText:"@".concat(i),selectable:r,selectAll:!0,appTextTemplate:"​".concat(h.toString(),"​")},n.createElement("span",{className:"at-symbol"},"@"),n.createElement("span",{dir:f},m))}}t.TextMention=f,f.CONCERNS={contact:["id","displayName"]};var p=(0,h.default)(f,f.CONCERNS);t.default=p},30508:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(12396)),o=r(a(9254)),l=r(a(43018)),d=r(a(84188)),u=a(86145);class c extends d.default{static jsx(e,[t],{size:a,selectable:r=!1}){return s.createElement(o.default,{emoji:t,size:a,selectable:r})}static match(e,t,a){var r=null!=a&&0!==a?a:e.length,i=(0,u.firstNCodepoints)(e,r);return(0,l.default)(i,n.default.emojiRegex(),0,h)}}function h(e){return n.default.getGlyphId(e[0])?e:null}t.default=c,c.compatibility=!0},91883:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(89166)),s=r(a(6981)),n=r(a(12396)),o=r(a(61311)),l={"(y)":"👍","(n)":"👎",":-)":"🙂",":-(":"🙁",":-p":"😛",":-|":"😐",":-\\":"😕",":-d":"😀",":-*":"😘","<3":"❤","^_^":"😁",">_<":"😆",";-)":"😉"},d=Object.keys(l).map(i.default).join("|"),u="\\s|```|[*_~]",c=new RegExp("(^|".concat(u,")((?:").concat(d,")+)(?=$|").concat(u,")"),"ig"),h=new RegExp("(".concat(d,")"),"i"),f=(0,s.default)(c,2,(function(e){var[,t]=e;t&&(e.index+=t.length,e[0]=e[0].slice(t.length));return e}));class p extends f{static mutate(e){return e.split(h).map((e=>{var t=l[e.toLowerCase()];return t?n.default.getSkinToneBase(t)&&o.default.getVariant(t)||t:e})).join("")}}t.default=p,p.fragment=!0,p.mutates=!0},10587:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(89166)),n=r(a(2784)),o=i(a(43018)),l=i(a(25843)),d=i(a(17957)),u=i(a(84188));class c extends u.default{static match(e,t){if(!t)return[];var{terms:a,boundary:r=!1,ignoreDiacritics:i=!1}=t;if(!a.length)return[];var n=i&&d.default.isLatinAlphabetLanguage(e)&&a.every((e=>d.default.isLatinAlphabetLanguage(e)))&&!d.default.isRTL(),l=n?d.default.removeAccents(e):e;return(0,o.default)(l,function(e,t,a){var r=(a?e.map((e=>d.default.removeAccents(e))):e).map(s.default).join("|");if(d.default.isRTL())return new RegExp("".concat(t?"(?:^|\\b)":"","(\\S+)?(").concat(r,")(\\S+)?"),"ig");return new RegExp("".concat(t?"(?:^|\\b)":"","(").concat(r,")"),"ig")}(a,r,n))}}t.default=c,c.jsx=(e,t,{selectable:a})=>n.createElement(l.default,{selectable:a},e)},17275:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BoldFirstWord",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"Bold",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"Code",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"Emoji",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"Emoticon",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"Highlight",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"Intern",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"Italic",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"Link",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"List",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"ListItem",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"Mention",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(t,"RawMention",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(t,"Strikethrough",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(t,"TextMention",{enumerable:!0,get:function(){return g.default}});var i=r(a(29629)),s=r(a(30209)),n=r(a(80073)),o=r(a(30508)),l=r(a(91883)),d=r(a(10587)),u=r(a(59824)),c=r(a(36341)),h=r(a(67174)),f=r(a(78546)),p=r(a(4886)),m=r(a(98594)),_=r(a(73017)),v=r(a(82828)),g=r(a(36650))},59824:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(6981)),o=r(a(41090)),l=(0,n.default)(/(^|\b|\s)(((#|t|T|d|D|p|P|s|S)([0-9]{3,16}))|([0-9a-fA-F]{8,40}))(?=$|\b)/g,2,(function(e){var[,t,,,,,a]=e;if(a&&(!d.test(a)||!u.test(a)))return null;t&&(e.index+=t.length,e[0]=e[0].slice(t.length));return e}));t.default=class extends l{static jsx(e,t,{selectable:a=!1}){var r=function([,,,,e,t,a]){if(a)return"".concat(c).concat(a.toLowerCase());switch(e){case"T":case"t":case"#":return"".concat(h).concat(t);case"D":case"d":return"".concat(f).concat(t);case"P":case"p":return"".concat(p).concat(t);case"S":case"s":return"".concat(m).concat(t);default:return"".concat(_).concat(e).concat(t)}}(t);return s.createElement(o.default,{href:r,selectable:a},e)}};var d=/[a-fA-F]/,u=/[0-9]/;var c="https://internalfb.com/intern/bunny/?q=hash%20",h="https://internalfb.com/intern/tasks/?t=",f="https://internalfb.com/intern/diff/D",p="https://internalfb.com/intern/paste/P",m="https://internalfb.com/intern/sevmanager/view/s/",_="https://internalfb.com/intern/"},36341:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(84097)),o=r(a(6981)),l=r(a(8907)),d=(0,n.default)("_"),u=(0,o.default)(/(?:^|\s|_|[^\w\\])_(\S|\S[^\n]*?\S)_(?=$|[[\s\W_])/g,1,d);t.default=class extends u{static jsx(e,t,{selectable:a=!1}){return s.createElement(l.default,{selectable:a},e)}}},67174:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(30209)),o=r(a(36341)),l=r(a(42862)),d=r(a(84188)),u=r(a(82828)),c=r(a(75241));class h extends d.default{static jsx(e,t,{selectable:a=!1}){var{href:r,suspiciousCharacters:i}=t;return i&&i.size?s.createElement(c.default,{link:t,selectable:a},e):s.createElement(l.default,{href:r,selectable:a},e)}}function f(e){var{index:t,url:a}=e,r=t+a.length-1;return[t,t,r,r,e]}function p(e,t){for(var a=0,r=0;a<e.length&&r<t.length;){var i=t[r][3]-e[a][3];if(i>0)a++;else if(i<0)r++;else{e[a][2]--,e[a][3]--;var s=e[a][5];s.href=s.href.slice(0,-1),s.path=s.path&&s.path.slice(0,-1),s.url=s.url.slice(0,-1),r++,a++}}}t.default=h,h.format=!1,h.match=(e,t)=>{if(!t)return[];var{links:a=[]}=t;return a.map(f)},h.conflictResolvers=new Map([[n.default,p],[o.default,p],[u.default,p]])},78546:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(6981)),o=r(a(60710)),l=(0,n.default)(/((?:^)(?:\* (?:[^\n]+)(?:\n(?:\* [^\n]+)){0,})(?:\n|$))/gm,0);class d extends l{static jsx(e,t,{selectable:a=!1,inline:r}){var i=0===t.index;return s.createElement(o.default,{inline:r,isAtStart:i,selectable:a},e)}}t.default=d,d.nestable=()=>!1},4886:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.LAST_LIST_ITEM_REGEX=t.LIST_ITEM_DELIMITER=void 0;var s=i(a(2784)),n=r(a(6981)),o=r(a(27823));t.LIST_ITEM_DELIMITER="* ";t.LAST_LIST_ITEM_REGEX=/(?:^|\n)\* [^\n]+$/;var l=(0,n.default)(/(?:^)\* ([^\n]+(?:$))/gm,1),d=new Set(["List"]);class u extends l{static jsx(e,t,{selectable:a=!1,inline:r}){return s.createElement(o.default,{inline:r,selectable:a},e)}}t.default=u,u.nestable=e=>d.has(e),u.unformatDecorations={pre:"• "}},98594:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(89166)),n=i(a(45455)),o=r(a(2784)),l=i(a(43018)),d=i(a(81861)),u=i(a(84188));class c extends u.default{static match(e,t){if(!t)return[];var{mentions:a}=t;if(!a||(0,n.default)(a))return[];for(var r,i,o=(r=a,i=Object.keys(r).map(s.default).join("|"),new RegExp("(".concat(i,")"),"g")),d=(0,l.default)(e,o),u=0;u<d.length;++u)d[u][4]=a[d[u][4][0]];return d}static jsx(e,t,{selectable:a}){return o.createElement(d.default,{contact:t,selectable:a})}}t.default=c,c.format=!1},73017:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(98594));class s extends i.default{}t.default=s,s.mutates=!0,s.mutate=(e,t)=>"@".concat(t.displayName)},82828:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(84097)),o=r(a(6981)),l=r(a(8981)),d=(0,n.default)("_"),u=(0,o.default)(/(?:^|[\s\W_])~(\S|\S[^\n]*?\S)~(?=$|[[\s\W_])/g,1,d);t.default=class extends u{static jsx(e,t,{selectable:a}){return s.createElement(l.default,{selectable:a},e)}}},36650:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(98594)),o=r(a(16672));class l extends n.default{static jsx(e,t,{selectable:a,theme:r}){return s.createElement(o.default,{contact:t,selectable:a,theme:r})}}t.default=l},88980:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(1===e.length)return e;var a,r=[];for(;a=e.pop();){for(var[i,,,s,n]=a,[{nestable:o,compatibility:l},,d]=t[n],u=!0,{length:c}=r,h=c-1;h>=0;--h){var[,,f,p,m]=r[h];if(i>p)break;var[{mutates:_,format:v,compatibility:g,name:E},,y]=t[m];if(s>f){if(d<y&&r.splice(h,1))continue;u=!1;break}if(_&&!(u=!1))break;if(l)break;if((o(E)||g||!(d<y)||!r.splice(h,1))&&(!l&&!v)){u=!1;break}}u&&r.push(a)}return r}},60711:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=[],a=0;a<e.length;++a)for(var r=0;r<e[a].length;++r){var[i,s]=e[a][r];t.push([i,s,a])}return t}},47028:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a=1/0){return d(e,(0,s.default)(t),a)},t._parse=d;var i=r(a(88980)),s=r(a(60711)),n=r(a(16408)),o=r(a(18998)),l=a(86145);function d(e,t,a=1/0){var r=(0,n.default)(e,t,a),s=r.length?(0,o.default)(e,(0,i.default)(r,t),t):{children:[{type:"text",value:e}]};return a<(0,l.numCodepoints)(e)&&u(s,{limit:a}),s}function u(e,t){if(!(t.limit<=0))if(e.type&&"text"===e.type)if(e.value.length>=t.limit){var a=(0,l.toArray)(e.value);a.length>=t.limit&&(a=a.slice(0,t.limit)),e.value=a.join(""),t.limit=t.limit-a.length}else t.limit=t.limit-e.value.length;else if(!e.type||"delimiter"!==e.type){for(var r=0;r<e.children.length&&(u(e.children[r],t),!(t.limit<=0));)r++;e.children=e.children.slice(0,r+1)}}},16408:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a=1/0){for(var r=[],i=0;i<t.length;++i){for(var[s,n]=t[i],o=s.match(e,n,a),l=[],{length:d}=o,u=0,c=o[u];u<d;c=o[++u])l[u]=[c[0],c[1],c[2],c[3],i,c[4]];l.length&&r.push(l)}for(var h=0;h<r.length;h++){var{conflictResolvers:f}=t[r[h][0][4]][0];if(f)for(var p=0;p<r.length;p++){var m=t[r[p][0][4]][0],_=f.get(m);_&&_(r[h],r[p])}}for(var v=[],g=0;g<r.length;++g)v[g]=r[g].length-1;var E=[],y=0;for(;r.length;){for(var S=0,C=-1;S<r.length;++S)r[S][v[S]][0]>C&&(y=S,C=r[S][v[S]][0]);E.push(r[y][v[y]]),--v[y]<0&&(r.splice(y,1),v.splice(y,1))}return E}},18998:(e,t,a)=>{"use strict";function r({format:e},t,a){for(var r=[],i=function(e){var t=e,a=[];do{t.mutator&&a.push(t.mutator)}while(t.parent&&(t=t.parent));return a}(a),s=0;s<t.length;++s)(e||t[s][0].compatibility)&&(i.includes(t[s][0])||r.push(t[s]));return r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,i){for(var s={children:[]},n=0,o=s,l=0,d=0;d<t.length;++d){for(var u=t[d],[c,h]=u;o.parent&&c>(l=o.match[2]);){if(n<=l&&o.children.push({type:"text",value:e.substring(n,l+1)}),n=o.match[3]+1,o.mutator.fragment){var{children:f}=o.parent;f.pop(),f.push.apply(f,o.children)}l!==o.match[3]&&o.parent.children.push({type:"delimiter",value:e.substring(l+1,n)}),o=o.parent}n<c&&o.children.push({type:"text",value:e.substring(n,c)});var[p,m]=i[u[4]],{mutates:_}=p;n=h,c!==h&&o.children.push({type:"delimiter",value:e.substring(c,h)});var v={children:[],match:u,mutator:p,opts:m,parent:o};if(_){var g=e.substring(u[1],u[2]+1),E=p.mutate(g,u[5]),y=r(p,i,v),S=(0,a(47028)._parse)(E,y);v.children=S.children,n=u[2]+1}o.children.push(v),o=v}do{if(o.match){var[,,C,T]=o.match;if(n<=C&&o.children.push({type:"text",value:e.substring(n,C+1)}),n=T+1,o.mutator.fragment){var{children:M}=o.parent;M.pop(),M.push.apply(M,o.children)}C!==T&&o.parent.children.push({type:"delimiter",value:e.substring(C+1,n)})}}while(o.parent&&(o=o.parent)&&o.parent);n!==e.length&&o.children.push({type:"text",value:e.substring(n)});return s}},41222:(e,t)=>{"use strict";function a(e,t,r){return t.reduce(((t,i)=>(t.push(function(e,t,r){if(t.type){var{value:i}=t;switch(t.type){case"text":return e.onText(i,r);case"delimiter":return e.onDelimiter(i,r);default:throw new Error("Invalid node type")}}return e.onMutator(t.mutator,a(e,t.children,r),t.match[5],t.opts,r)}(e,i,r)),t)),[])}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){return e.onRoot(a(e,t.children,r),r)}},87952:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=class{static onMutator(){throw new Error("Subclasses of `Serializer` must override `onMutator()`")}static onRoot(){throw new Error("Subclasses of `Serializer` must override `onRoot()`")}static onText(){throw new Error("Subclasses of `Serializer` must override `onText()`")}static onDelimiter(){throw new Error("Subclasses of `Serializer` must override `onDelimiter()`")}}},89659:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"JSXSerializer",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"TextSerializer",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"UnformatSerializer",{enumerable:!0,get:function(){return n.default}});var i=r(a(78144)),s=r(a(48486)),n=r(a(2644))},78144:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(2784)),n=r(a(96784)),o=r(a(87952));class l extends o.default{}function d(e){for(var t=[],a=0;a<e.length;a++){var r=e[a];if(void 0!==r)if("string"!=typeof r){var i="jsx-child-".concat(a);t.push(s.cloneElement(r,{key:i}))}else t.push(r)}return t}t.default=l,l.onText=n.default,l.onDelimiter=()=>{},l.onRoot=e=>d(e),l.onMutator=(e,t,a,r)=>e.jsx(d(t),a,r)},96784:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=e=>e},48486:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(87952));class s extends i.default{}t.default=s,s.onDelimiter=e=>e,s.onMutator=(e,t)=>t.join(""),s.onRoot=e=>e.join(""),s.onText=e=>e},2644:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(87952));class s extends i.default{}function n(e){return e.filter(Boolean).join("")}t.default=s,s.onDelimiter=()=>{},s.onMutator=(e,t)=>null!=e.unformatDecorations?n([e.unformatDecorations.pre,...t,e.unformatDecorations.post]):n(t),s.onRoot=e=>n(e),s.onText=e=>e},24:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({chat:e,undelivered:t,canForward:a,cannotForward:r}){var n=a.length-t.length,o=r.length+t.length,l=e.isUser?{contact:e.formattedTitle}:{};if(n>0)return t.length?r.length?s.default.t(395,(0,i.default)({count:o,_plural:o},l)):s.default.t(394,{count:o,_plural:o}):s.default.t(392,{count:o,_plural:o,contact:e.formattedTitle});if(t.length)return r.length?s.default.t(396,l):s.default.t(397);return s.default.t(393,l)};var i=r(a(70417)),s=r(a(17957))},73540:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t=!0,a=!1){var r,i,o=e.safe();switch(o.type){case T.BUTTONS_RESPONSE:case T.TEMPLATE_BUTTON_REPLY:case T.HSM:return t?(0,y.default)(e,e.body):e.body;case T.CIPHERTEXT:return g.default.t(1139);case T.REVOKED:return e.isSentByMe?g.default.t(1223):g.default.t(1221);case T.CHAT:if(e.isFromTemplate)return e.title?t?(0,y.default)(e,e.title+" "+e.body):"*"+e.title+"* "+e.body:t?(0,y.default)(e,e.body):e.body;if(e.isDynamicReplyButtonsMsg&&e.title){var b=M(e.body,e);if(null!=b)return t?(0,y.default)(e,e.title+"\n"+b):"*".concat(e.title,"*\n").concat(b)}return t?(0,y.default)(e,e.body):e.body;case T.IMAGE:if(o.isViewOnce)return(0,C.isUnviewed)(o)?g.default.t(1428):(0,C.isExpired)(o)?g.default.t(1424):g.default.t(1434);var P=M(e.caption,e);return P?t?(0,y.default)(e,P):P:g.default.t(1578);case T.VIDEO:if(o.isViewOnce)return(0,C.isUnviewed)(o)?g.default.t(1431):(0,C.isExpired)(o)?g.default.t(1424):g.default.t(1434);var A=M(e.caption,e);return A?t?(0,y.default)(e,A):A:e.isGif?"GIF":g.default.t(1583);case T.STICKER:return g.default.t(1582);case T.PTT:var I=n.default.durationStr(e.duration);return I||g.default.t(1584);case T.AUDIO:return g.default.t(1574);case T.LOCATION:if(e.isFromTemplate||e.isDynamicReplyButtonsMsg){var O=M(e.caption,e);return O?t?(0,y.default)(e,O):O:e.loc||g.default.t(1580)}return e.isLive?e.comment||g.default.t(1579):e.loc||g.default.t(1580);case T.GROUP_NOTIFICATION:case T.GP2:return(0,f.default)(e,a);case T.BROADCAST_NOTIFICATION:return(0,d.default)(e);case T.NOTIFICATION:return e.body;case T.VCARD:return e.vcardFormattedName||g.default.t(1575);case T.GROUPS_V4_INVITE:return v.default.supportsFeature(v.default.F.GROUPS_V_4_JOIN_PERMISSION)?g.default.t(770):g.default.t(475);case T.MULTI_VCARD:return(0,S.getNameString)(e.vcardList);case T.DOCUMENT:if(e.isFromTemplate||e.isDynamicReplyButtonsMsg){var N=e.pageCount>0?g.default.t(1576,{count:e.pageCount+"",_plural:e.pageCount}):null,w=M(e.caption,e);return w?t?(0,y.default)(e,w):w:(0,s.default)([w||g.default.t(1577),N]).join(" • ")}if(e.isVcardOverMmsDocument&&e.mediaData.parsedVcards)return function(e){if(e.length>1){var t=e.map((e=>(0,S.vcardGetNameFromParsed)(e))).filter(Boolean);return(0,S.getNameStringFromNames)(t)}return(0,S.vcardGetNameFromParsed)(e[0])||g.default.t(238)}(e.mediaData.parsedVcards);var D=e.pageCount>0?g.default.t(1576,{count:e.pageCount+"",_plural:e.pageCount}):null;return(0,s.default)([e.mediaData.filename||g.default.t(1577),D]).join(" • ");case T.E2E_NOTIFICATION:return(0,c.default)(o);case T.CALL_LOG:return(0,u.default)(e,!1);case T.PRODUCT:return e.text?t?(0,y.default)(e,e.text):e.text:g.default.t(1581);case T.OVERSIZED:return(0,m.formatOversizedMsgText)(e);case T.UNKNOWN:return(0,_.formatUnknownMsgText)(e);case T.PAYMENT:return function(e){switch(e.subtype){case"ciphertext":return g.default.t(1721);case"futureproof":return g.default.t(1723);case"send":var t=e.paymentNoteMsg&&e.paymentNoteMsg.body?" - "+e.paymentNoteMsg.body:"";return(e.paymentCurrency&&e.paymentAmount1000?l.format(e.paymentCurrency,e.paymentAmount1000):g.default.t(1128))+t;case"request":var a=e.paymentNoteMsg&&e.paymentNoteMsg.body?" - "+e.paymentNoteMsg.body:"";return(e.paymentCurrency&&e.paymentAmount1000?l.format(e.paymentCurrency,e.paymentAmount1000):g.default.t(1128))+a;default:return g.default.t(477)}}(e);case T.NOTIFICATION_TEMPLATE:return(0,p.default)(e);case T.PROTOCOL:return"ephemeral_setting"===e.subtype?(0,h.default)(e.ephemeralDuration||0,e.from,e.id.remote):"";case T.ORDER:return e.message||"";case T.LIST:var R,L;return(0,E.listMsgCanRender)(e)?"".concat((null===(R=e.list)||void 0===R?void 0:R.title)||""," ").concat((null===(L=e.list)||void 0===L?void 0:L.description)||""):(0,_.formatUnknownMsgText)(e);case T.LIST_RESPONSE:return"".concat((null===(r=e.listResponse)||void 0===r?void 0:r.title)||""," ").concat((null===(i=e.listResponse)||void 0===i?void 0:i.description)||"");default:return""}};var s=i(a(60417)),n=i(a(19899)),o=i(a(50935)),l=r(a(37356)),d=i(a(55814)),u=i(a(2572)),c=i(a(72256)),h=i(a(66685)),f=i(a(63205)),p=i(a(30866)),m=a(69774),_=a(72649),v=i(a(18120)),g=i(a(17957)),E=a(57556),y=i(a(4105)),S=a(84990),C=a(89526),T=o.default.MSG_TYPE;function M(e,t){if(null==e)return null;var a=!0===t.isDynamicReplyButtonsMsg;return t.footer&&a?"".concat(e,"\n").concat(t.footer):e}},69774:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.formatOversizedMsgText=function(){return s.default.isElectron?i.default.t(1125):i.default.t(1126)},t.formatOversizedMsgNotification=function(){return i.default.t(1126)};var i=r(a(17957)),s=r(a(77626))},18097:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a,r,i,s,l,I="",O=e.dir,N=e.safe(),w=!(null===(t=N.asViewOnce)||void 0===t?void 0:t.isViewOnce)&&y.default.getGlobalPreviews();!(0,v.getMaybeMeUser)().equals(e.from)&&e.isGroupMsg&&(I=e.displayName());switch(N.type){case A.CHAT:if(w)i=(0,C.default)(e,e.body);else if(e.isGroupMsg)i=I?g.default.t(804,{author:I}):g.default.t(803),I="";else{var D=e.chat;i=g.default.t(805,{unreadCount:g.default.n(D.unreadCount),_plural:D.unreadCount})}break;case A.IMAGE:s="",S.default.hasEmoji&&(s=N.isViewOnce?"1️⃣ ":"📷 "),i=s+(w&&(0,C.default)(e,e.caption)||g.default.t(1578));break;case A.PRODUCT:s=S.default.hasEmoji?"🛒 ":"",i=s+(e.text&&(0,C.default)(e,e.text)||g.default.t(1581));break;case A.STICKER:s=S.default.hasEmoji?"💟 ":"",i=s+g.default.t(1582);break;case A.VIDEO:e.isGif?(s=S.default.hasEmoji?"👾 ":"",l=w&&(0,C.default)(e,e.caption)||"GIF"):(s="",S.default.hasEmoji&&(s=N.isViewOnce?"1️⃣ ":"🎥 "),l=w&&(0,C.default)(e,e.caption)||g.default.t(1583),N.isViewOnce||(l="".concat(l," (").concat(o.default.durationStr(e.duration),")"))),i="".concat(s).concat(l);break;case A.PTT:s=S.default.hasEmoji?"🎤 ":"",i="".concat(s," ").concat(g.default.t(1584)," (").concat(o.default.durationStr(e.duration),")");break;case A.AUDIO:s=S.default.hasEmoji?"🎵 ":"",i="".concat(s," ").concat(g.default.t(1574)," (").concat(o.default.durationStr(e.duration),")");break;case A.LOCATION:s=S.default.hasEmoji?"📍 ":"",l=e.isLive?w&&(0,C.default)(e,e.comment)||g.default.t(1579):w&&e.loc||g.default.t(1580),i="".concat(s," ").concat(l);break;case A.GROUPS_V4_INVITE:i=g.default.t(475);break;case A.GROUP_NOTIFICATION:case A.GP2:i=(0,p.default)(e,!0),I="";break;case A.BROADCAST_NOTIFICATION:i=(0,c.default)(e);break;case A.NOTIFICATION:i=e.body;break;case A.VCARD:s=S.default.hasEmoji?"👤 ":"",i=s+(e.subtype||g.default.t(1575));break;case A.MULTI_VCARD:s=S.default.hasEmoji?"👥 ":"",i=s+(0,T.getNameString)(e.vcardList);break;case A.DOCUMENT:if(e.isVcardOverMmsDocument){s=S.default.hasEmoji?"👤 ":"",i=s+(e.filename||g.default.t(992,{count:e.pageCount,_plural:e.pageCount}));break}s=S.default.hasEmoji?"📄 ":"",i=s+(e.subtype||g.default.t(1577));break;case A.E2E_NOTIFICATION:i=(0,f.default)(N);break;case A.CALL_LOG:i=(0,h.default)(e,!1);break;case A.CIPHERTEXT:i=g.default.t(1139);break;case A.REVOKED:i=e.isSentByMe?g.default.t(1223):g.default.t(1221);break;case A.PAYMENT:i=function(e){var t;if(!e.paymentCurrency||!e.paymentAmount1000)return g.default.t(1722);if("send"!==e.subtype&&"request"!==e.subtype)return g.default.t(477);var a=u.format(e.paymentCurrency,e.paymentAmount1000),r=(0,M.default)(e.sender),i=(0,M.default)(e.paymentMessageReceiverJid),s=d.default.get(e.paymentMessageReceiverJid),n={senderName:r,receiverName:i,amount:a,_plural:e.paymentAmount1000/1e3};t="send"===e.subtype?e.isGroupMsg?s&&s.isMe?g.default.t(1729,n):g.default.t(1730,n):g.default.t(1728,n):e.isGroupMsg?s&&s.isMe?g.default.t(1726,n):g.default.t(1727,n):g.default.t(1725,n);return t}(e);break;case A.OVERSIZED:i=(0,m.formatOversizedMsgNotification)(e);break;case A.UNKNOWN:i=(0,_.formatUnknownMsgNotification)(e);break;case A.LIST:var R,L;if((0,E.listMsgCanRender)(N))i="".concat((null===(R=e.list)||void 0===R?void 0:R.title)||""," ").concat((null===(L=e.list)||void 0===L?void 0:L.description)||"");return __LOG__(3)(P(),e.type),"";case A.LIST_RESPONSE:i="".concat((null===(a=e.listResponse)||void 0===a?void 0:a.title)||""," ").concat((null===(r=e.listResponse)||void 0===r?void 0:r.description)||"");break;default:return __LOG__(3)(b(),e.type),""}var k=g.default.isRTL()?"rtl":"ltr",x="";if(x=o.default.relativeStr(e.t),I){var F=n.dir(I);return"ltr"!==k||O&&"ltr"!==O||F&&"ltr"!==F?"ltr"!==k||O&&"ltr"!==O?"ltr"!==k||F&&"ltr"!==F?"ltr"===k?(x&&(x="- ‪".concat(x,"‬‬")),"‫".concat(I,"‏: ").concat(i,"‏").concat(x)):O&&"rtl"!==O||F&&"rtl"!==F?O&&"rtl"!==O?F&&"rtl"!==F?(x&&(x="- ‪".concat(x,"‬‬")),"‪".concat(I,"‎: ").concat(i,"‎").concat(x)):(x&&(x=" - ".concat(x)),"".concat(I,"‏: ‪").concat(i,"‬‏")):(x&&(x=" - ".concat(x)),"‏‪".concat(I,"‬: ").concat(i,"‏")):(x&&(x=" - ".concat(x)),"".concat(I,"‏: ").concat(i,"‏")):(x&&(x=" - ".concat(x)),"".concat(I,"‎: ‫").concat(i,"‬‎")):(x&&(x=" - ".concat(x)),"‎‫".concat(I,"‬: ").concat(i,"‎")):(x&&(x=" - ".concat(x)),"".concat(I,"‎: ").concat(i,"‎"))}return x?"ltr"===k?"".concat(i,"‎‏ - ‪").concat(x,"‬"):"".concat(i,"‏‎ - ‫").concat(x,"‬"):i};var s=i(a(19976)),n=r(a(91540)),o=i(a(19899)),l=i(a(50935)),d=i(a(7470)),u=r(a(37356)),c=i(a(55814)),h=i(a(2572)),f=i(a(72256)),p=i(a(63205)),m=a(69774),_=a(72649),v=a(95595),g=i(a(17957)),E=a(57556),y=i(a(85059)),S=i(a(77626)),C=i(a(4105)),T=a(84990),M=i(a(63237));function b(){var e=(0,s.default)(["asDesktopNotification: Unrecognized type ",""]);return b=function(){return e},e}function P(){var e=(0,s.default)(["asDesktopNotification: Unrecognized type ",""]);return P=function(){return e},e}var A=l.default.MSG_TYPE},37136:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=i.default.get(e),r=null==a?void 0:a.name;return!r||r===t};var i=r(a(7470))},55814:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{subtype:t,body:a,recipients:r}=e;if("create"===t){var n=parseInt(a,10);return s.default.t(1844,{_plural:n,count:n})}if("add"===t){var o=r.length;return s.default.t(1673,{_plural:o,name:(0,i.getFormattedNames)(r,!0)})}if("remove"===t){var l=r.length;return s.default.t(1674,{_plural:l,name:(0,i.getFormattedNames)(r,!0)})}return""};var i=a(45880),s=r(a(17957))},2572:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a="";switch(e.subtype){case"miss":a=t?s.default.t(1703,{time:i.default.timestampStr(e.t),_plural:i.default.timestampHour(e.t)}):s.default.t(1702);break;case"miss_video":a=t?s.default.t(1701,{time:i.default.timestampStr(e.t),_plural:i.default.timestampHour(e.t)}):s.default.t(1700);break;case"miss_group":a=t?s.default.t(1699,{time:i.default.timestampStr(e.t),_plural:i.default.timestampHour(e.t)}):s.default.t(1698);break;case"miss_group_video":a=t?s.default.t(1697,{time:i.default.timestampStr(e.t),_plural:i.default.timestampHour(e.t)}):s.default.t(1696)}return a};var i=r(a(19899)),s=r(a(17957))},72256:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a="";switch(e.subtype){case"identity":if((t=null==e.body?null:s.default.get(e.body))&&t.isMe){__LOG__(4,void 0,new Error,!0)(f()),SEND_LOGS("SelfIdentityNotificationError");var r=e.chat;if(r.isUser){var i=r.contact?r.contact.formattedName:(0,h.default)(r.id);a=d.default.t(1770,{contactName:i})}else r.isGroup?a=d.default.t(1661):r.isBroadcast&&(a=d.default.t(1539))}else{var p=t?t.formattedName:(0,h.default)(e.body);a=d.default.t(1770,{contactName:p})}break;case"device":a=(0,n.default)(e);break;case"encrypt":var m=e.id.remote;if(c.default.isGroup(m))a=e.chat.isSupportGroup()?d.default.t(1336):u.default.isGroupVoiceCallEnabled()||u.default.isGroupVideoCallEnabled()?d.default.t(1626):d.default.t(1623);else if(c.default.isBroadcast(m))a=d.default.t(1537);else if(c.default.isOfficialBizAccount(m))a=d.default.t(1708);else if((t=s.default.get(m))&&t.isEnterprise){var _=(0,o.default)(t);a=(0,l.bspUiEnabled)()?d.default.t(1560):d.default.t(1561,{businessName:_})}else a=d.default.t(1560);break;case"encrypt_now":a=d.default.t(721)}return a};var i=r(a(19976)),s=r(a(7470)),n=r(a(82785)),o=r(a(4357)),l=a(75459),d=r(a(17957)),u=r(a(43711)),c=r(a(68384)),h=r(a(3111));function f(){var e=(0,i.default)(["formatE2ENotification: receive identity notification of self"]);return f=function(){return e},e}},82785:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t=!1){(0,i.default)("device"===e.subtype,"Shouldn't call this function if msg is not a device notification msg");var a,r=e.body?s.default.get(e.body):null,l=1===e.devicesAdded&&0===e.devicesRemoved,d=0===e.devicesAdded&&1===e.devicesRemoved,u=!l&&!d;if(r&&r.isMe){var c=e.chat;if(c.isUser){var h=c.contact.formattedName;t?l?a=e.isThisDeviceAdded?n.default.t(1534,{contactName:h}):n.default.t(1532,{contactName:h}):d?a=n.default.t(1766,{contactName:h}):u&&(a=n.default.t(1552,{contactName:h})):a=n.default.t(1770,{contactName:h})}else c.isGroup?t?l?a=e.isThisDeviceAdded?n.default.t(1596):n.default.t(1533):d?a=n.default.t(1767):u&&(a=n.default.t(1553)):a=n.default.t(1661):c.isBroadcast&&(t?l?a=e.isThisDeviceAdded?n.default.t(1535):n.default.t(1531):d?a=n.default.t(1765):u&&(a=n.default.t(1551)):a=n.default.t(1539))}else{var f=e.body,p=null==f?null:s.default.get(f),m=p?p.formattedName:(0,o.default)(f);t?l?a=n.default.t(1529,{contactName:m}):d?a=n.default.t(1764,{contactName:m}):u&&(a=n.default.t(1550,{contactName:m})):a=n.default.t(1770,{contactName:m})}return(0,i.default)(null!=a,"text shouldn't be null in the end"),a};var i=r(a(47677)),s=r(a(7470)),n=r(a(17957)),o=r(a(3111))},4357:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.verifiedLevel===i.default.VERIFIED_LEVEL.HIGH?e.verifiedName:e.formattedName};var i=r(a(50935))},66685:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){var r,u=i.default.gadd(a),c=l.default.isUser(a)||(null==u||null===(r=u.groupMetadata)||void 0===r?void 0:r.canSetEphemeralSetting());if(!t)return c?(0,o.getEphemeralSettingChangeByUnknownAsAdminString)(e):(0,o.getEphemeralSettingChangeByUnknownString)(e);var h=s.default.gadd(t);if(l.default.equals(t,(0,n.getMaybeMeUser)()))return c?(0,o.getEphemeralSettingChangeByYouAsAdminString)(e):(0,o.getEphemeralSettingChangeByYouString)(e);var f=h&&h.isMyContact?h.formattedName:(0,d.default)(t);if(c)return(0,o.getEphemeralSettingChangeByOthersAsAdminString)(e,f);return(0,o.getEphemeralSettingChangeByOthersString)(e,f)};var i=r(a(43334)),s=r(a(7470)),n=a(95595),o=a(13735),l=r(a(68384)),d=r(a(3111))},63205:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a,r,i="",p=e.get("type"),m=e.get("subtype"),_=e.displayName(),v=e.get("author"),g=e.get("body"),E=""===_||null==_;if("group_notification"===p){var y=(0,o.getMaybeMeUser)();switch(m){case"add":i=u.default.equals(v,y)?d.default.t(1634):d.default.t(1633,{name:_});break;case"remove":i=u.default.equals(v,y)?d.default.t(1646):d.default.t(1645,{name:_});break;case"leave":i=u.default.equals(v,y)?d.default.t(1642):d.default.t(1641,{name:_});break;case"picture":i="remove"===g?u.default.equals(v,y)?d.default.t(1759):d.default.t(1758,{name:_}):u.default.equals(v,y)?d.default.t(1757):d.default.t(1756,{name:_});break;case"subject":i=u.default.equals(v,y)?d.default.t(1664,{subject:g}):E?d.default.t(1663,{subject:g}):d.default.t(1662,{name:_,subject:g});break;case"modify":a=(0,c.default)(e.get("author")),r=(0,c.default)(g),i=a===_?d.default.t(1636,{name:_,new_number:r}):d.default.t(1635,{name:_});break;default:__LOG__(2)(f(),m)}}else if("gp2"===p){var S,C=e.recipients,T=C?(0,l.getFormattedNames)(C,!0):"",M=C?C[0]:void 0,b=M?s.default.get(M):void 0,P=b?b.get("formattedName"):M?(0,c.default)(M):"",A=(0,o.getMaybeMeUser)();switch(m){case"add":i=v?u.default.equals(v,A)?d.default.t(1655,{participants:T}):u.default.equals(M,A)?E?d.default.t(1652):d.default.t(1648,{name:_}):E?d.default.t(1651,{participants:T}):d.default.t(1647,{name:_,participants:T}):u.default.equals(M,A)?d.default.t(1634):d.default.t(1633,{name:P});break;case"remove":i=!u.default.equals(M,A)||!u.default.equals(v,A)&&v?u.default.equals(M,A)&&v?E?d.default.t(1654):d.default.t(1650,{name:_}):u.default.equals(v,A)?d.default.t(1656,{participants:T}):v?E?d.default.t(1653,{participants:T}):d.default.t(1649,{name:_,participants:T}):d.default.t(1645,{name:P}):d.default.t(1646);break;case"leave":i=u.default.equals(M,A)?d.default.t(1642):d.default.t(1641,{name:T});break;case"picture":i="remove"===g?u.default.equals(v,A)?d.default.t(1759):d.default.t(1758,{name:_}):u.default.equals(v,A)?d.default.t(1757):d.default.t(1756,{name:_});break;case"subject":i=u.default.equals(v,A)?d.default.t(1664,{subject:g}):E?d.default.t(1663,{subject:g}):d.default.t(1662,{name:_,subject:g});break;case"modify":a=(0,c.default)(v),r=(0,c.default)(M),i=a===_?d.default.t(1636,{name:_,new_number:r}):d.default.t(1635,{name:_});break;case"create":i=u.default.equals(v,A)?g?d.default.t(1607,{subject:g}):d.default.t(1608):g?E?d.default.t(1606,{subject:g}):d.default.t(1604,{name:_,subject:g}):E?d.default.t(1603):d.default.t(1605,{name:_});break;case"delete":i=e.chat.isSupportGroup()?d.default.t(1325):d.default.t(1619);break;case"promote":S=C.length,i=1===S&&u.default.equals(M,A)?d.default.t(1644):d.default.t(1643,{participants:T,_plural:S});break;case"demote":S=C.length,i=1===S&&u.default.equals(M,A)?d.default.t(1638):d.default.t(1637,{participants:T,_plural:S});break;case"invite":i=u.default.equals(M,A)?d.default.t(1640):d.default.t(1639,{name:P});break;case"revoke_invite":i=u.default.equals(v,A)?d.default.t(1628):d.default.t(1627,{name:_});break;case"description":var I=t?E?d.default.t(1616):d.default.t(1614,{name:_}):E?d.default.t(1615):d.default.t(1613,{name:_});i=u.default.equals(v,A)?d.default.t(1617):I;break;case"announce":i="on"===g?u.default.equals(v,A)?d.default.t(1602):d.default.t(1601,{name:_}):u.default.equals(v,A)?d.default.t(1600):d.default.t(1599,{name:_});break;case"restrict":i="on"===g?u.default.equals(v,A)?d.default.t(1660):d.default.t(1659,{name:_}):u.default.equals(v,A)?d.default.t(1658):d.default.t(1657,{name:_});break;case"no_frequently_forwarded":i="on"===g?u.default.equals(v,A)?d.default.t(1632):d.default.t(1631,{name:_}):u.default.equals(v,A)?d.default.t(1630):d.default.t(1629,{name:_});break;case"announce_msg_bounce":i=d.default.t(1598);break;case"v4_add_invite_sent":i=d.default.t(1396,{participants:T,_plural:C.length});break;case"v4_add_invite_join":i=d.default.t(1395,{participants:T,_plural:C.length});break;case"ephemeral":var O=parseInt(e.templateParams[0],10)||0,N=e.templateParams[1],w=e.id.remote;return(0,n.default)(O,N,w);default:__LOG__(2)(h(),m)}}d.default.isRTL()&&(i=d.default.forceRTL(i));return i};var i=r(a(19976)),s=r(a(7470)),n=r(a(66685)),o=a(95595),l=a(45880),d=r(a(17957)),u=r(a(68384)),c=r(a(3111));function h(){var e=(0,i.default)(["wa:formatGroupNotification:unknown message subtype: ",""]);return h=function(){return e},e}function f(){var e=(0,i.default)(["wa:formatGroupNotification:unknown message subtype: ",""]);return f=function(){return e},e}},65308:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{id:t}=e;switch(e.subtype){case"non_verified_transition":return o.default.t(1705,{businessName:(0,s.default)(e)});case"unverified_transition":return o.default.t(1818,{businessName:(0,s.default)(e)});case"verified_transition":return o.default.t(1824,{businessName:(0,s.default)(e)});case"verified_low_unknown":return o.default.t(1822,{businessName:(0,s.default)(e)});case"verified_high":return o.default.t(1820,{businessName:(0,s.default)(e)});case"verified_initial_unknown":return o.default.t(1795,{businessName:e.displayName()});case"verified_initial_low":return o.default.t(1793);case"verified_initial_high":return o.default.t(1791);case"verified_transition_any_to_none":return o.default.t(1799);case"verified_transition_any_to_high":return o.default.t(1797);case"verified_transition_high_to_low":return o.default.t(1801,{businessName:(0,s.default)(e)});case"verified_transition_high_to_unknown":return o.default.t(1803,{businessName:(0,s.default)(e)});case"verified_transition_unknown_to_low":return o.default.t(1811);case"verified_transition_low_to_unknown":return o.default.t(1805,{businessName:(0,s.default)(e)});case"verified_transition_none_to_low":return o.default.t(1807,{businessName:(0,s.default)(e)});case"verified_transition_none_to_unknown":return o.default.t(1809,{businessName:e.displayName()});case"biz_verified_transition_top_to_bottom":return o.default.t(272,{businessName:(0,s.default)(e)});case"biz_verified_transition_bottom_to_top":return o.default.t(270,{businessName:(0,s.default)(e)});case"biz_intro_top":var a=(0,s.default)(e),r=l.default.isOfficialBizAccount(t.remote);return(0,i.default)(t.remote,a)?r?o.default.t(1101):o.default.t(253,{businessName:a}):r?o.default.t(1102):o.default.t(254,{businessName:a});case"biz_intro_bottom":return o.default.t(251,{businessName:(0,d.default)(t.remote)});case"biz_name_change":return o.default.t(258,{businessName:(0,s.default)(e)});case"biz_move_to_consumer_app":return o.default.t(256);case"biz_two_tier_migration_top":var u=(0,s.default)(e);return(0,i.default)(t.remote,u)?o.default.t(267,{businessName:u}):o.default.t(268,{businessName:u});case"biz_two_tier_migration_bottom":return o.default.t(265,{businessName:(0,d.default)(t.remote)});case"blue_msg_bsp_fb_to_bsp_premise":case"blue_msg_bsp_fb_unverified_to_bsp_premise_verified":case"blue_msg_bsp_fb_verified_to_bsp_premise_unverified":case"blue_msg_bsp_premise_unverified":case"blue_msg_bsp_premise_verified":case"blue_msg_consumer_to_bsp_premise_unverified":case"blue_msg_self_fb_to_bsp_premise":case"blue_msg_self_fb_unverified_to_bsp_premise_verified":case"blue_msg_self_fb_verified_to_bsp_premise_unverified":case"blue_msg_self_premise_to_bsp_premise":case"blue_msg_unverified_to_bsp_premise_verified":case"blue_msg_verified_to_bsp_premise_unverified":return o.default.t(279,{businessName:(0,s.default)(e)});case"blue_msg_consumer_to_self_premise_unverified":return o.default.t(280);case"blue_msg_bsp_fb_to_self_fb":case"blue_msg_bsp_fb_unverified":case"blue_msg_bsp_fb_unverified_to_self_fb_verified":case"blue_msg_bsp_fb_verified":case"blue_msg_bsp_fb_verified_to_self_fb_unverified":case"blue_msg_consumer_to_bsp_fb_unverified":case"blue_msg_consumer_to_self_fb_unverified":case"blue_msg_self_fb_unverified":case"blue_msg_to_bsp_fb":case"blue_msg_to_self_fb":case"blue_msg_unverified_to_bsp_fb_verified":case"blue_msg_unverified_to_self_fb_verified":case"blue_msg_verified_to_bsp_fb_unverified":case"blue_msg_verified_to_self_fb_unverified":return o.default.t(281,{businessName:(0,s.default)(e)});case"blue_msg_self_fb_verified":var c=(0,n.default)(e.chat.id.user),h=(0,s.default)(e);return c?o.default.t(282,{businessName:h}):o.default.t(281,{businessName:h});case"blue_msg_self_premise_unverified":return o.default.t(283,{businessName:(0,s.default)(e)});case"blue_msg_self_premise_verified":var f=(0,s.default)(e);return(0,i.default)(t.remote,f)?o.default.t(284,{businessName:f}):o.default.t(285,{businessName:f});case"blue_msg_bsp_fb_verified_to_self_premise_unverified":case"blue_msg_bsp_premise_verified_to_self_premise_unverified":case"blue_msg_self_fb_verified_to_self_premise_unverified":case"blue_msg_verified_to_unverified":return o.default.t(288,{businessName:(0,s.default)(e)});case"blue_msg_bsp_fb_unverified_to_self_premise_verified":case"blue_msg_bsp_premise_unverified_to_self_premise_verified":case"blue_msg_self_fb_unverified_to_self_premise_verified":case"blue_msg_unverified_to_verified":var p=(0,s.default)(e);return(0,i.default)(t.remote,p)?o.default.t(286,{businessName:p}):o.default.t(287,{businessName:p});default:return""}};var i=r(a(37136)),s=r(a(96244)),n=r(a(58688)),o=r(a(17957)),l=r(a(68384)),d=r(a(63237))},30866:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{templateParams:t,id:a}=e;switch(e.subtype){case"non_verified_transition":return h.default.t(1706);case"unverified_transition":return h.default.t(1819);case"verified_transition":return h.default.t(1825);case"verified_low_unknown":return h.default.t(1823);case"verified_high":return h.default.t(1821);case"verified_initial_unknown":return h.default.t(1794);case"verified_initial_low":return h.default.t(1792,{businessName:(0,u.default)(e)});case"verified_initial_high":return h.default.t(1790,{businessName:(0,u.default)(e)});case"verified_transition_any_to_none":return h.default.t(1798);case"verified_transition_any_to_high":return h.default.t(1796,{businessName:(0,u.default)(e)});case"verified_transition_high_to_low":return h.default.t(1800,{businessName:(0,u.default)(e)});case"verified_transition_high_to_unknown":return h.default.t(1802,{businessName:(0,u.default)(e)});case"verified_transition_unknown_to_low":return h.default.t(1810,{businessName:(0,u.default)(e)});case"verified_transition_low_to_unknown":return h.default.t(1804,{businessName:(0,u.default)(e)});case"verified_transition_none_to_low":return h.default.t(1806);case"verified_transition_none_to_unknown":return h.default.t(1808);case"change_number":var r=t[0],i=n.default.get(r),v=i&&i.isMyContact?i.formattedName:(0,m.default)(r);return p.default.equals(e.chat.id,r)?h.default.t(450,{name:v}):h.default.t(449,{name:v});case"payment_transaction_status_update_failed":return h.default.t(1745,{receiverName:(0,_.default)(t[0]),relativeTime:s.default.paymentTimestampStr(e.t)});case"payment_transaction_request_cancelled":var g=t[0],E=(0,_.default)(g),y=t[1],S=parseInt(t[2],10),C=o.format(y,S),T={contactName:E,currencyAndAmount:C,_plural:S/1e3};return e.id.fromMe?h.default.t(1714,T):h.default.t(1713,T);case"payment_transaction_status_update_refunded":return h.default.t(1747,{receiverName:(0,_.default)(t[0]),relativeTime:s.default.paymentTimestampStr(e.t)});case"payment_transaction_status_update_refund_failed":return h.default.t(1746,{receiverName:(0,_.default)(t[0]),relativeTime:s.default.paymentTimestampStr(e.t)});case"payment_transaction_status_receiver_pending_setup":var M=t[0],b=(0,_.default)(M),P=t[1],A=parseInt(t[2],10),I=o.format(P,A);return h.default.t(1742,{senderName:b,currencyAndAmount:I,_plural:A/1e3});case"payment_transaction_status_receiver_success_after_hiccup":return h.default.t(1743,{senderName:(0,_.default)(t[0]),relativeTime:s.default.paymentTimestampStr(e.t)});case"payment_action_account_setup_reminder":return h.default.t(1712,{senderName:(0,_.default)(t[0])});case"payment_action_send_payment_reminder":return h.default.t(1720,{receiverName:(0,_.default)(t[0])});case"payment_action_send_payment_invitation":return h.default.t(1719,{receiverName:(0,_.default)(t[0])});case"payment_action_request_declined":var O=t[0],N=(0,_.default)(O),w=t[1],D=parseInt(t[2],10),R=o.format(w,D),L={contactName:N,currencyAndAmount:R,_plural:D/1e3};return e.id.fromMe?h.default.t(1716,L):h.default.t(1715,L);case"payment_action_request_expired":var k=t[0],x=(0,_.default)(k),F=t[1],G=(0,_.default)(F),U=t[2],B=parseInt(t[3],10),j=o.format(U,B);return p.default.equals(k,(0,d.getMaybeMeUser)())?h.default.t(1718,{receiverName:G,currencyAndAmount:j,_plural:B/1e3}):h.default.t(1717,{senderName:x,currencyAndAmount:j,_plural:B/1e3});case"biz_verified_transition_top_to_bottom":return h.default.t(271,{businessName:(0,u.default)(e)});case"biz_verified_transition_bottom_to_top":return h.default.t(269,{businessName:(0,u.default)(e)});case"biz_intro_top":var V=e.id.remote;return p.default.isOfficialBizAccount(V)?h.default.t(1100):h.default.t(252,{businessName:(0,u.default)(e)});case"biz_intro_bottom":return h.default.t(250);case"biz_name_change":return h.default.t(257,{businessName:(0,u.default)(e)});case"biz_move_to_consumer_app":return h.default.t(255);case"biz_two_tier_migration_top":return h.default.t(266,{businessName:(0,u.default)(e)});case"biz_two_tier_migration_bottom":return h.default.t(264);case"blue_msg_e2e_identity_unavailable":return h.default.t(1246);case"blue_msg_bsp_fb_to_bsp_premise":return h.default.t(289,{businessName:(0,u.default)(e)});case"blue_msg_bsp_fb_to_self_fb":return h.default.t(290,{businessName:(0,u.default)(e)});case"blue_msg_bsp_fb_to_self_premise":return h.default.t(291,{businessName:(0,u.default)(e)});case"blue_msg_bsp_fb_unverified":return h.default.t(292);case"blue_msg_bsp_fb_unverified_to_bsp_premise_verified":var H=(0,u.default)(e);return(0,l.default)(a.remote,H)?h.default.t(293,{businessName:H}):h.default.t(294,{businessName:H});case"blue_msg_bsp_fb_unverified_to_self_fb_verified":var W=(0,u.default)(e);return(0,l.default)(a.remote,W)?h.default.t(295,{businessName:W}):h.default.t(296,{businessName:W});case"blue_msg_bsp_fb_unverified_to_self_premise_verified":return h.default.t(297,{businessName:(0,u.default)(e)});case"blue_msg_bsp_fb_verified":var K=(0,u.default)(e);return(0,l.default)(a.remote,K)?h.default.t(298,{businessName:K}):h.default.t(299,{businessName:K});case"blue_msg_bsp_fb_verified_to_bsp_premise_unverified":return h.default.t(300,{businessName:(0,u.default)(e)});case"blue_msg_bsp_fb_verified_to_self_fb_unverified":return h.default.t(301,{businessName:(0,u.default)(e)});case"blue_msg_bsp_fb_verified_to_self_premise_unverified":return h.default.t(302,{businessName:(0,u.default)(e)});case"blue_msg_bsp_premise_to_self_premise":return h.default.t(303,{businessName:(0,u.default)(e)});case"blue_msg_bsp_premise_unverified":return h.default.t(304);case"blue_msg_bsp_premise_unverified_to_self_premise_verified":return h.default.t(305,{businessName:(0,u.default)(e)});case"blue_msg_bsp_premise_verified":var Y=(0,u.default)(e);return(0,l.default)(a.remote,Y)?h.default.t(306,{businessName:Y}):h.default.t(307,{businessName:Y});case"blue_msg_bsp_premise_verified_to_self_premise_unverified":return h.default.t(308,{businessName:(0,u.default)(e)});case"blue_msg_consumer_to_bsp_fb_unverified":return h.default.t(309,{businessName:(0,u.default)(e)});case"blue_msg_consumer_to_bsp_premise_unverified":return h.default.t(310,{businessName:(0,u.default)(e)});case"blue_msg_consumer_to_self_fb_unverified":return h.default.t(311,{businessName:(0,u.default)(e)});case"blue_msg_consumer_to_self_premise_unverified":return h.default.t(312,{businessName:(0,u.default)(e)});case"blue_msg_self_fb_to_bsp_premise":return h.default.t(313,{businessName:(0,u.default)(e)});case"blue_msg_self_fb_to_self_premise":return h.default.t(314,{businessName:(0,u.default)(e)});case"blue_msg_self_fb_unverified":return h.default.t(315);case"blue_msg_self_fb_unverified_to_bsp_premise_verified":var q=(0,u.default)(e);return(0,l.default)(a.remote,q)?h.default.t(316,{businessName:q}):h.default.t(317,{businessName:q});case"blue_msg_self_fb_unverified_to_self_premise_verified":return h.default.t(318,{businessName:(0,u.default)(e)});case"blue_msg_self_fb_verified":var z=(0,u.default)(e),Q=(0,c.default)(e.chat.id.user);return(0,l.default)(a.remote,z)?Q?h.default.t(322,{businessName:z}):h.default.t(319,{businessName:z}):Q?h.default.t(321,{businessName:z}):h.default.t(320,{businessName:z});case"blue_msg_self_fb_verified_to_bsp_premise_unverified":return h.default.t(323,{businessName:(0,u.default)(e)});case"blue_msg_self_fb_verified_to_self_premise_unverified":return h.default.t(324,{businessName:(0,u.default)(e)});case"blue_msg_self_premise_to_bsp_premise":return h.default.t(325,{businessName:(0,u.default)(e)});case"blue_msg_self_premise_unverified":return h.default.t(326);case"blue_msg_self_premise_verified":return h.default.t(327,{businessName:(0,u.default)(e)});case"blue_msg_to_bsp_fb":return h.default.t(328,{businessName:(0,u.default)(e)});case"blue_msg_to_consumer":return h.default.t(329,{businessName:(0,u.default)(e)});case"blue_msg_to_self_fb":return h.default.t(330,{businessName:(0,u.default)(e)});case"blue_msg_unverified_to_bsp_fb_verified":var J=(0,u.default)(e);return(0,l.default)(a.remote,J)?h.default.t(331,{businessName:J}):h.default.t(332,{businessName:J});case"blue_msg_unverified_to_bsp_premise_verified":var X=(0,u.default)(e);return(0,l.default)(a.remote,X)?h.default.t(333,{businessName:X}):h.default.t(334,{businessName:X});case"blue_msg_unverified_to_self_fb_verified":var Z=(0,u.default)(e);return(0,l.default)(a.remote,Z)?h.default.t(335,{businessName:Z}):h.default.t(336,{businessName:Z});case"blue_msg_unverified_to_verified":return h.default.t(337,{businessName:(0,u.default)(e)});case"blue_msg_verified_to_bsp_fb_unverified":return h.default.t(338,{businessName:(0,u.default)(e)});case"blue_msg_verified_to_bsp_premise_unverified":return h.default.t(339,{businessName:(0,u.default)(e)});case"blue_msg_verified_to_self_fb_unverified":return h.default.t(340,{businessName:(0,u.default)(e)});case"blue_msg_verified_to_unverified":return h.default.t(341,{businessName:(0,u.default)(e)});default:return f.default.isElectron?h.default.t(1374):h.default.t(1378)}};var s=i(a(19899)),n=i(a(7470)),o=r(a(37356)),l=i(a(37136)),d=a(95595),u=i(a(96244)),c=i(a(58688)),h=i(a(17957)),f=i(a(77626)),p=i(a(68384)),m=i(a(3111)),_=i(a(63237))},96244:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.templateParams&&e.templateParams[0]?e.templateParams[0].toString():(0,i.default)(e.id.remote)};var i=r(a(63237))},56015:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){switch(e){case"non_verified_transition":return(0,r.getNonVerifiedTransitionFaqUrl)();case"unverified_transition":return(0,r.getUnverifiedTransitionFaqUrl)();case"verified_transition":return(0,r.getVerifiedTransitionFaqUrl)();case"verified_low_unknown":return(0,r.getVerifiedLowUnknownFaqUrl)();case"verified_high":return(0,r.getVerifiedHighFaqUrl)();case"biz_intro_top":case"biz_intro_bottom":case"biz_two_tier_migration_bottom":case"biz_name_change":case"biz_verified_transition_top_to_bottom":case"verified_initial_unknown":case"verified_initial_low":case"verified_initial_high":case"verified_transition_any_to_none":case"verified_transition_any_to_high":case"verified_transition_high_to_low":case"verified_transition_high_to_unknown":case"verified_transition_unknown_to_low":case"verified_transition_low_to_unknown":case"verified_transition_none_to_low":case"verified_transition_none_to_unknown":return(0,r.getBusinessFaqUrl)();case"blue_msg_bsp_fb_to_bsp_premise":case"blue_msg_bsp_fb_to_self_fb":case"blue_msg_bsp_fb_to_self_premise":case"blue_msg_bsp_fb_unverified":case"blue_msg_bsp_fb_unverified_to_bsp_premise_verified":case"blue_msg_bsp_fb_unverified_to_self_fb_verified":case"blue_msg_bsp_fb_unverified_to_self_premise_verified":case"blue_msg_bsp_fb_verified":case"blue_msg_bsp_fb_verified_to_bsp_premise_unverified":case"blue_msg_bsp_fb_verified_to_self_fb_unverified":case"blue_msg_bsp_fb_verified_to_self_premise_unverified":case"blue_msg_bsp_premise_to_self_premise":case"blue_msg_bsp_premise_unverified":case"blue_msg_bsp_premise_unverified_to_self_premise_verified":case"blue_msg_bsp_premise_verified":case"blue_msg_bsp_premise_verified_to_self_premise_unverified":case"blue_msg_consumer_to_bsp_fb_unverified":case"blue_msg_consumer_to_bsp_premise_unverified":case"blue_msg_consumer_to_self_fb_unverified":case"blue_msg_consumer_to_self_premise_unverified":case"blue_msg_self_fb_to_bsp_premise":case"blue_msg_self_fb_to_self_premise":case"blue_msg_self_fb_unverified":case"blue_msg_self_fb_unverified_to_bsp_premise_verified":case"blue_msg_self_fb_unverified_to_self_premise_verified":case"blue_msg_self_fb_verified":case"blue_msg_self_fb_verified_to_bsp_premise_unverified":case"blue_msg_self_fb_verified_to_self_premise_unverified":case"blue_msg_self_premise_to_bsp_premise":case"blue_msg_self_premise_unverified":case"blue_msg_self_premise_verified":case"blue_msg_to_bsp_fb":case"blue_msg_to_consumer":case"blue_msg_to_self_fb":case"blue_msg_unverified_to_bsp_fb_verified":case"blue_msg_unverified_to_bsp_premise_verified":case"blue_msg_unverified_to_self_fb_verified":case"blue_msg_unverified_to_verified":case"blue_msg_verified_to_bsp_fb_unverified":case"blue_msg_verified_to_bsp_premise_unverified":case"blue_msg_verified_to_self_fb_unverified":case"blue_msg_verified_to_unverified":return(0,r.getE2EEnterpriseFaqUrl)();default:return(0,r.getFaqUrl)()}};var r=a(95585)},4105:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=null!=t?t:"",r=e.mentionMap();if(!r)return function(e){return s.default.supportsFeature(s.default.F.RICH_TEXT)?(0,i.default)(e,l,o.UnformatSerializer):e}(a);var d=s.default.supportsFeature(s.default.F.RICH_TEXT)?n.Configuration.FormattedNotification({mentions:r}):n.Configuration.RawNotification({mentions:r});return(0,i.default)(a,d,o.UnformatSerializer)};var i=r(a(72034)),s=r(a(18120)),n=a(62902),o=a(89659),l=n.Configuration.Format({mentions:{}})},63237:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=i.default.get(e);return t?t.formattedName:(0,s.default)(e)};var i=r(a(7470)),s=r(a(3111))},72649:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.formatUnknownMsgText=function(e){if(e.isSentByMe)return i.default.t(1377);switch(e.subtype){case"phone":return i.default.t(1376);case"phone_only_feature":return s.default.isElectron?i.default.t(1375):i.default.t(1380);default:return s.default.isElectron?i.default.t(1374):i.default.t(1378)}},t.formatUnknownMsgNotification=function(e){switch(e.subtype){case"phone":return i.default.t(1376);case"phone_only_feature":return i.default.t(1380);default:return i.default.t(1378)}};var i=r(a(17957)),s=r(a(77626))},22182:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(29351);class i extends((0,r.customError)("ForwardError")){constructor(e){super(),this.reasons=e}}t.default=i},89952:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(20835);var i=new class{constructor(){this._trackers=[],this._currFPS=0,this._numSamples=0,this._totalTime=0,this._startTracking=()=>{this._frameId||(this._prevFrameTS=this._prevUpdateTS=window.performance.now(),this._frameId=requestAnimationFrame(this._handleFrame))},this._stopTracking=()=>{this._frameId&&(this._prevFrameTS=this._prevUpdateTS=void 0,cancelAnimationFrame(this._frameId),this._frameId=void 0)},this._handleFrame=()=>{if(this._trackers.length){var e=this._prevFrameTS,t=this._prevUpdateTS;if(null!=e&&null!=t){var a=window.performance.now();this._numSamples+=1,this._totalTime+=a-e,a-t>=500&&this._update(a),this._prevFrameTS=a,this._frameId=requestAnimationFrame(this._handleFrame)}}}}whenLessThan(e,t){if(e<0||e>60)throw new RangeError("fps must be between 0 and ".concat(60));return this._insertTracker([e,t]),()=>{this._removeTracker(t)}}_insertTracker(e){var t=e[0],a=function(e,t){var a=0,r=e.length-1,i=Math.floor((a+r)/2);for(;e[i]!==t&&a<r;)t<e[i]?r=i-1:a=i+1,i=Math.floor((a+r)/2);if(e[i]<t)return i+1;return i}(this._trackers.map((e=>e[0])),t);this._trackers.splice(a,0,e),1===this._trackers.length&&(this._addEventListeners(),this._startTracking())}_removeTracker(e){for(var t=this._trackers.length,a=0;a<t;a++)if(e===this._trackers[a][1]){this._trackers.splice(a,1),0===this._trackers.length&&(this._removeEventListeners(),this._stopTracking());break}}_update(e){var t=1e3/(this._totalTime/this._numSamples),a=Math.min(t,60);if(Math.abs(a-this._currFPS)>1){this._currFPS=a;var r=this._filterCallbacks();r.length&&this._triggerCallbacks(r,a)}this._numSamples=0,this._totalTime=0,this._prevUpdateTS=e}_filterCallbacks(){for(var e=[],t=this._trackers.length-1;t>=0;t--){var[a,r]=this._trackers[t];if(a<=this._currFPS)break;e.push(r)}return e}_triggerCallbacks(e,t){var a=window.performance.now();(0,r.requestIdleCallback)((()=>{e.forEach((e=>e(t,a)))}))}_addEventListeners(){window.addEventListener("focus",this._startTracking),window.addEventListener("blur",this._stopTracking)}_removeEventListeners(){window.removeEventListener("focus",this._startTracking),window.removeEventListener("blur",this._stopTracking)}};t.default=i},66026:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({msg:e,date:t,unread:a,album:r},d,u,c,h,f){var p,m=[],_=0;for(_=0;!p&&_<d.length;_++)p=d[_];_--;var v=!1,g=!1,E=p?(0,n.default)(p):0,y=0,S=_;for(;p;){var C=p;g||m.push(t(C,y++)),C===c&&a&&m.push(a(h));for(var T=void 0,M=_+1;!T&&M<d.length;M++)T=d[M];var b=void 0,P=void 0,A=void 0,I=[],O=!1,N=void 0,w=!1,D=null;if(C.asGroupedSticker&&!o(C,f)){I.push(C.asGroupedSticker),w=C===u,D=0;var R=d[S=_+1];R&&R.asGroupedSticker&&(0,i.canBeGroupedAsAlbum)(C,R)&&R!==c&&!o(R,f)&&(I.push(R.asGroupedSticker),T=d[S+1],O=!0,N=!0,R===u&&(w=!0,D=1))}if(C.asAlbumAsset&&!o(C,f)){I.push(C.asAlbumAsset);var L=p,k=void 0;for(w=p===u,S=_;S<d.length-1&&I.length<s.default.ALBUM_MAX_SIZE&&(L=d[S],(k=d[S+1])&&k.asAlbumAsset&&(0,i.canBeGroupedAsAlbum)(L,k)&&k!==c&&!o(k,f));S++)I.push(k.asAlbumAsset),k===u&&(w=!0);I.length>=s.default.ALBUM_MIN_SIZE&&(O=!0,N=!1,T=d[S+1])}if(T){var x=T;A=(0,n.default)(T),b=(P=A===E)&&(0,i.canBeGroupedWithNext)(C,x)&&T!==c}else b=!1,P=!1,A=0;if(O){var F=void 0;F=N?I.reduce(((e,t)=>"".concat(e,"-").concat(t.id.toString())),"grouped-sticker-"):l(I),m.push(r(I,F,v,b,w,D)),p=d[_=S+1],v=b,g=P,E=A}else m.push(e(C,C===u,v,b)),_++,v=b,g=P,E=A,p=T}return m};var i=a(89083),s=r(a(50935)),n=r(a(79186));function o(e,t){return null==t||e.t>t.t}function l(e){var t=e.length,a=e[0]?e[0].id.toString():"",r=e[t-1]?e[t-1].id.toString():"";return"album-".concat(a,"-").concat(r,"-").concat(t)}},70013:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.aspectRatioScaled=function(e,t){return"number"!=typeof e||e<0||e!=e?{width:t,height:t}:e>1?{width:t,height:Math.max(t/e,1)}:{width:Math.max(t*e,1),height:t}},t.boundHeightWidth=function(e,t,a){var r=null!=t?t:a,i=null!=e?e:a;r>i?r>a&&(i*=a/r,r=a):i>a&&(r*=a/i,i=a);return{width:Math.max(r,1),height:Math.max(i,1)}},t.rotatePoint=function(e,t,a){var r=a*Math.PI/180;return{x:Math.cos(r)*e+Math.sin(r)*t,y:-Math.sin(r)*e+Math.cos(r)*t}}},45880:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.getFormattedName=u,t.getFormattedNames=function(e,t=!1){if(!Array.isArray(e))return u(e,t);var a=e.map((e=>u(e,t)));return(0,d.default)(a,t)};var s=i(a(2784)),n=r(a(43334)),o=r(a(79711)),l=r(a(7470)),d=r(a(43486));function u(e,t=!1){var r,i=l.default.gadd(e,{silent:!0}),d=t?void 0:(r=e,e=>{e&&(e.preventDefault(),e.stopPropagation()),n.default.find(r).then((e=>{o.default.openChatFromUnread(e).then((t=>{t&&o.default.focusChatTextInput(e)}))}))}),u=a(60949).default;return t?i.formattedUser:s.createElement(u,{contact:i,onClick:d})}},58688:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return a.has(e)};var a=new Set(["16505434800","16503130062","16507885324","16508620604","16504228206","16505212669","447710173736","16507885280","19032707825","16505361212","16508129150","16315555102","0"])},14280:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return h.apply(this,arguments)},t.getMsgDownloadData=f;var i=r(a(19976)),s=r(a(52954)),n=r(a(50935)),o=r(a(27011)),l=r(a(54146)),d=r(a(40210)),u=r(a(59321));function c(){var e=(0,i.default)(["Failed to get msg download data: ",""]);return c=function(){return e},e}function h(){return(h=(0,s.default)((function*(e){var t=Array.isArray(e)?e:[e];try{var a=yield Promise.map(t,f);return a.length>1?{blob:yield(0,u.default)(a),name:o.default.getDefaultName({t:Math.round(Date.now()/1e3),type:"unknown",mimetype:"application/zip",isVcardOverMmsDocument:!1,filename:"",vcardList:[]})}:a[0]}catch(e){throw __LOG__(4,void 0,new Error,!0)(c(),e.message),SEND_LOGS("msg-download-data-failed"),e}}))).apply(this,arguments)}function f(){return p.apply(this,arguments)}function p(){return(p=(0,s.default)((function*(e){var t="text/vcard";if(e.type===n.default.MSG_TYPE.VCARD)return{name:o.default.getDefaultName(e),blob:new Blob([e.body],{type:t})};if(e.type===n.default.MSG_TYPE.MULTI_VCARD)return{name:o.default.getDefaultName(e),blob:new Blob([e.vcardList.map((e=>e.vcard)).join("\n")],{type:t})};var a=m(e);if(a)return a;yield e.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:d.default.WEBC_RMR_REASON_CODE.DOCUMENT_DOWNLOAD,isUserInitiated:!0});var r=m(e);if(r)return r;throw new Error("Unable to download because blob cannot be found")}))).apply(this,arguments)}function m(e){var{filehash:t,mediaBlob:a,renderableUrl:r}=e.mediaData;if(a)return{name:o.default.getDefaultName(e),url:r,blob:a.forceToBlob()};var i=l.default.get(t);return i?{blob:i,name:o.default.getDefaultName(e),url:l.default.getOrCreateURL(t)}:null}},97934:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=i.default.get(e);if(t)return Promise.resolve({wid:e,biz:t.isBusiness,bizInfo:t.isBusiness?{verifiedName:{level:(0,l.default)(t.verifiedLevel),serial:null,name:t.verifiedName,isApi:Boolean(t.isEnterprise),hostStorage:t.hostStorage,actualActors:t.actualActors,privacyModeTs:t.privacyModeTs}}:null});return(0,n.default)(e).then((t=>{if(t){var{biz:a,bizInfo:r}=t;return s.default.supportsFeature(s.default.F.QUERY_VNAME)&&a&&(0,o.default)(e,r),t}return Promise.reject(new Error("Invalid number"))}))};var i=r(a(7470)),s=r(a(18120)),n=r(a(55042)),o=r(a(75780)),l=r(a(42279))},79251:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return s};var i=r(a(54073)),s=window.innerHeight,n=(0,i.default)((()=>{s=window.innerHeight}),500);window.addEventListener("resize",n)},85350:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=0;if(!e)return t;e.quotedMsg&&(t+=54);e.caption&&(t+=31);switch(e.type){case l.NOTIFICATION:case l.GROUP_NOTIFICATION:case l.GP2:case l.BROADCAST_NOTIFICATION:case l.E2E_NOTIFICATION:case l.CALL_LOG:case l.CIPHERTEXT:case l.REVOKED:case l.CHAT:e.linkPreview&&(t+=53);var a=(0,o.numCodepoints)(e.body&&e.body.toString());return t+19*Math.ceil(a/100)+13;case l.IMAGE:return t+(e.mediaData&&e.mediaData.fullWidth&&e.mediaData.fullHeight||0)?Math.floor(Math.min(330/e.mediaData.fullWidth*e.mediaData.fullHeight,330)):330;case l.VIDEO:case l.AUDIO:return e.isGif?t+137:t+166;case l.LOCATION:return t+e.isLive?s.MSG_HEIGHT:n.PREVIEW_HEIGHT;case l.PTT:return t+67;case l.VCARD:return t+74;case l.DOCUMENT:return t+188;case l.STICKER:return t+125;case l.UNKNOWN:default:return t}};var i=r(a(50935)),s=a(18541),n=a(33788),o=a(86145),{MSG_TYPE:l}=i.default},44202:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.generateVideoThumbAndDuration=function(e,t){if(_.default.isBuggyVideoLoad){return p.video(e,!0).then((({video:e,fullWidth:a,fullHeight:r})=>(0,u.default)({minTimeout:50,maxTimeout:50,retries:100,signal:(new l.default).signal,factor:1},((i,s)=>{var n=document.createElement("canvas"),o=(0,h.boundHeightWidth)(r,a,t);n.width=o.width,n.height=o.height;var l=n.getContext("2d");l.drawImage(e,0,0,o.width,o.height);var d=l.getImageData(0,0,o.width,o.height);if(s<100&&(e=>{for(var t=e.width*e.height/4,a=0;a<=1;a+=.25){var r=4*Math.round(t*a);if(0!==e.data[r])return!1;if(0!==e.data[r+1])return!1;if(0!==e.data[r+2])return!1;var i=e.data[r+3];if(0!==i&&255!==i)return!1}return!0})(d))return s>0&&(__LOG__(2)(C()),e.currentTime=0),i(new Error("retry"));var u={duration:~~e.seekable.end(0),thumb:{url:n.toDataURL("image/jpeg"),width:o.width,height:o.height,fullWidth:a,fullHeight:r}};return p.disposeVideo(e),Promise.resolve(u)}))))}return p.video(e,!0).then((({video:e,fullWidth:a,fullHeight:r})=>{try{var i=document.createElement("canvas"),s=(0,h.boundHeightWidth)(r,a,t);return i.width=s.width,i.height=s.height,i.getContext("2d").drawImage(e,0,0,s.width,s.height),{duration:~~e.seekable.end(0),thumb:{url:i.toDataURL("image/jpeg"),width:s.width,height:s.height,fullWidth:a,fullHeight:r}}}finally{p.disposeVideo(e)}}))},t.crop=function(e,t,a,r,i,s,n,o=b){return(e instanceof HTMLCanvasElement?Promise.resolve(e):p.loadImage(e)).then((e=>{var l=document.createElement("canvas"),d=l.getContext("2d");null==s||null==n?(l.height=i,l.width=r,d.drawImage(e,t,a,r,i)):(l.height=n,l.width=s,d.drawImage(e,t,a,r,i,0,0,s,n));var u={};return N(u,l,o),Promise.props(u).then((e=>({images:e,width:r,height:i})))}))},t.toDataUrlWithRoundedCorners=function(e){return(e instanceof HTMLCanvasElement?Promise.resolve(e):p.loadImage(e)).then((e=>{var t=document.createElement("canvas"),a=t.getContext("2d");t.height=e.height,t.width=e.width;var r=Math.min(e.width,e.height);return a.beginPath(),a.arc(e.width/2,e.height/2,r/2,0,2*Math.PI,!0),a.clip(),a.closePath(),a.drawImage(e,0,0),t.toDataURL("image/png")}))},t.generateLinkPreview=function(e){return p.loadImage(e).then((e=>{var t=140;if(e.width<100||e.height<100)return __LOG__(2)(S()),null;var a=document.createElement("canvas"),r=a.getContext("2d");a.height=t,a.width=t;var i=Math.min(e.width,e.height),s=(e.width-i)/2,n=(e.height-i)/2;return r.drawImage(e,s,n,i,i,0,0,t,t),a.toDataURL("image/jpeg").replace(/^data:image\/jpeg;base64,/,"")})).catch((()=>(__LOG__(2)(y()),null)))},t.toDataUrl=function(e){return p.loadImage(e).then((e=>{var t=document.createElement("canvas"),a=t.getContext("2d");return t.height=e.height,t.width=e.width,a.drawImage(e,0,0),t.toDataURL("image/jpeg").replace(/^data:image\/jpeg;base64,/,"")})).catch((()=>(__LOG__(2)(E()),null)))},t.rotateAndResize=function(e,t,a){var r,i,s;e instanceof HTMLCanvasElement?(i=Promise.resolve(e),s=Promise.resolve(null)):(r=window.URL.createObjectURL(e),i=p.loadImage(r),s=(0,c.blobToArrayBuffer)(e).catch((e=>{__LOG__(3)(g(),e)})));return Promise.props({buffer:s,image:i}).then((({buffer:e,image:r})=>{var i={};try{i=(0,o.default)(e)}catch(e){}var s=0;switch(i.orientation||"UNKNOWN"){case"right-top":s=1;break;case"left-bottom":s=-1;break;case"bottom-right":s=2}var n=document.createElement("canvas"),l=r.naturalWidth||r.width,d=r.naturalHeight||r.height,u=n.getContext("2d"),c={};if(!s){var p,m,_=(0,h.boundHeightWidth)(d,l,t),g=a&P;if(e&&g&&l===_.width&&d===_.height)try{var E=(0,f.cleanJPEG)(e);c.blob=E,g=!1,p=l,m=d}catch(e){__LOG__(2)(v(),e.message)}return(g||a&~P)&&(n.width=_.width,n.height=_.height,p=n.width,m=n.height,D(n),u.drawImage(r,0,0,p,m),N(c,n,a)),Promise.props(c).then((e=>({width:p,height:m,images:e})))}switch(s){case 1:case-1:var y=Math.max(l,d),S=y/2;n.width=n.height=y,D(n),w(u,{x:S,y:S,degrees:90*s}),1===s?u.drawImage(r,0,y-d):u.drawImage(r,y-l,0),w(u,{x:S,y:S,degrees:-90*s}),function(e,t,a){var r=e.getContext("2d"),i=r.getImageData(0,0,t,a);e.width=t,e.height=a,r.putImageData(i,0,0)}(n,d,l);var C=function(e,t){var{width:a,height:r}=(0,h.boundHeightWidth)(e.height,e.width,t);if(a>e.width&&r>e.height)return e;var i=document.createElement("canvas"),s=i.getContext("2d");return i.width=a,i.height=r,s.drawImage(e,0,0,a,r),i}(n,t);return N(c,C,a),Promise.props(c).then((e=>({width:C.width,height:C.height,images:e})));case 2:var T=(0,h.boundHeightWidth)(d,l,t),M=n.width=T.width,b=n.height=T.height;return D(n),w(u,{x:M/2,y:b/2,degrees:90*s}),u.drawImage(r,0,0,M,b),w(u,{x:M/2,y:b/2,degrees:-90*s}),N(c,n,a),Promise.props(c).then((e=>({width:n.width,height:n.height,images:e})))}})).finally((()=>{r&&window.URL.revokeObjectURL(r)}))},t.canvasToBlob=I,t.urlToFile=function(e){return p.loadImage(e).then((e=>{var t=document.createElement("canvas");t.width=e.naturalWidth,t.height=e.naturalHeight;var a=t.getContext("2d");return D(t),a.drawImage(e,0,0),I(t)})).catch((()=>Promise.reject(new d.MediaDragDropError("unable to render image",e))))},t.isCached=function(e){if(!e)return!1;var t=new Image;return t.src=e,!!t.complete},t.getResizedDataUrl=function(e,t="image/jpeg",a){var r=e.toDataURL(t);if(window.dataURLtoBlob(r).size<=a)return e.toDataURL(t);for(var i=.9;i>=.1;i-=.1){var s=e.toDataURL(t,i);if(window.dataURLtoBlob(s).size<=a)return s}return null},t.generateMicroThumb=function(){return O.apply(this,arguments)},t.CANVAS=t.BLOB=t.DATA_URL=void 0;var s=i(a(52954)),n=i(a(19976)),o=i(a(86120)),l=i(a(12489)),d=r(a(96452)),u=i(a(82195)),c=a(99888),h=a(70013),f=a(60221),p=r(a(23765)),m=i(a(25012)),_=i(a(77626));function v(){var e=(0,n.default)(["Could not parse JPEG: ",""]);return v=function(){return e},e}function g(){var e=(0,n.default)(["ImageUtils::rotateAndResize error: ",""]);return g=function(){return e},e}function E(){var e=(0,n.default)(["data URL conversion failed: "]);return E=function(){return e},e}function y(){var e=(0,n.default)(["link preview image generation failed: "]);return y=function(){return e},e}function S(){var e=(0,n.default)(["Image size too small for link preview"]);return S=function(){return e},e}function C(){var e=(0,n.default)(["generateVideoThumbAndDuration: Setting video.currentTime to 0 to attempt to unblock the video"]);return C=function(){return e},e}var T=2,M=4,b=1;t.DATA_URL=b;var P=T;t.BLOB=P;var A=M;function I(e,t="image/jpeg"){return e.toBlob?new Promise((function(t){e.toBlob(t,"image/jpeg")})):Promise.resolve(window.dataURLtoBlob(e.toDataURL("image/jpeg")))}function O(){return(O=(0,s.default)((function*(e,t,a){for(var r,i,s=a||{},n=null!==(r=s.mimetype)&&void 0!==r?r:"image/jpeg",o=null!==(i=s.maxAttempts)&&void 0!==i?i:10,l=.5,d=e,u=yield I(d,n),c=0;c<o&&!(u.size<=t);c++){var h=Math.floor(e.width*l),f=Math.floor(e.height*l);(d=R(h,f)).getContext("2d").drawImage(e,0,0,h,f),u=yield I(d,n),l*=.5}return{opaqueData:yield m.default.createFromData(u,n),width:d.width,height:d.height,dataUrl:d.toDataURL("image/jpeg")}}))).apply(this,arguments)}function N(e,t,a){!e.blob&&a&P&&(e.blob=I(t)),!e.dataUrl&&a&b&&(e.dataUrl=Promise.resolve(t.toDataURL("image/jpeg"))),!e.canvas&&a&A&&(e.canvas=Promise.resolve(t))}function w(e,t){var a=t.x||0,r=t.y||0;t.degrees&&(t.radians=t.degrees*(Math.PI/180)),e.translate(a,r),e.rotate(t.radians),e.translate(-a,-r)}function D(e){var t=e.getContext("2d");t.fillStyle="rgb(247,247,247)",t.fillRect(0,0,e.width,e.height)}function R(e,t){var a=document.createElement("canvas");return a.width=e,a.height=t,a}t.CANVAS=A},15774:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(28103).Mirrored(["CONTACT_US","LICENSES","DELETE_OR_EXIT_CHAT","GO_TO_NEXT_CHAT","GO_TO_PREV_CHAT","LOGOUT","OPEN_NEW_CHAT","OPEN_NEW_GROUP","OPEN_PROFILE","OPEN_SETTINGS","SEARCH","SEARCH_IN_CHAT","TOGGLE_ARCHIVE","TOGGLE_MUTE","TOGGLE_PIN","TOGGLE_UNREAD","ZOOM_IN","ZOOM_OUT","ZOOM_RESET"]);t.default=r},75187:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(25211)),s=a(25250);var n=new class{constructor(){document.addEventListener("keydown",(e=>{var t=(0,s.getAction)(e);t&&(0,i.default)(t)}))}trigger(e,...t){}menuBatchRenderWith(){}};t.default=n},38203:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.LIST_FOCUSABLE_ITEM_CLASS_NAME=void 0;var s=i(a(70417)),n=i(a(19976)),o=i(a(52954)),l=r(a(2784)),d=i(a(6660)),u=i(a(44343)),c=i(a(50868)),h=i(a(17693));function f(){var e=(0,n.default)(["Focusable list items should have `tabIndex` attribute (that makes it programmatically focusable), but this element did not have it:"],["Focusable list items should have \\`tabIndex\\` attribute (that makes it programmatically focusable), but this element did not have it:"]);return f=function(){return e},e}var p="focusable-list-item";t.LIST_FOCUSABLE_ITEM_CLASS_NAME=p;class m extends l.Component{constructor(...e){var t;super(...e),t=this,this._focusedItem=null,this._listIsFocused=!1,this._listHasBeenFocused=!1,this._priorityItemHasBeenFocused=!1,this._setRef=e=>{this._ref=e},this._setRefUIE=e=>{this._refUIE=e},this._handleKeyUp=e=>{e.preventDefault(),this._shiftFocus(-1)},this._handleKeyDown=e=>{e.preventDefault(),this._shiftFocus(1)},this._handleKeyEnd=e=>{e.preventDefault(),this._asyncHandleKeyEnd()},this._asyncHandleKeyEnd=(0,o.default)((function*(){var e,a,{onBeforeEnd:r}=t.props;r&&(yield r());var i=t._getLastItem(),s=null===(e=(a=t.props).getPriorityFocusItem)||void 0===e?void 0:e.call(a);s&&!t._priorityItemHasBeenFocused?t._focusItem(s):i&&t._focusItem(i)})),this._handleFocusGain=e=>{if(this._ref===e.target){var t;if(this._isKeyboardUser()){var a,r,i=null===(a=(r=this.props).getPriorityFocusItem)||void 0===a?void 0:a.call(r);!this._listHasBeenFocused&&i?this._focusItem(i):this._focusCurrentItem()}null===(t=this._refUIE)||void 0===t||t.activate()}else e.target instanceof HTMLElement&&e.target.classList.contains(p)&&this._setFocusedItem(e.target);this._listIsFocused=!0,this._listHasBeenFocused=!0},this._handleBlur=()=>{this._listIsFocused=!1},this._handleFocusRequest=()=>{var e;this._ref&&!(null===(e=this._ref)||void 0===e?void 0:e.contains(document.activeElement))&&d.default.focus(this._ref)}}componentDidUpdate(){this._priorityItemHasBeenFocused=!1,this._listIsFocused&&this._focusedItem&&this._ref&&!this._ref.contains(this._focusedItem)&&d.default.focus(this._ref)}_setFocusedItem(e){e.setAttribute("tabIndex","0"),this._focusedItem&&this._focusedItem!==e&&this._focusedItem.setAttribute("tabIndex","-1"),this._focusedItem=e}_isKeyboardUser(){return this.context}_getItems(){return this._ref?Array.from(this._ref.getElementsByClassName(p)):[]}_getLastItem(){var e=this._getItems();return e.length>0?e[e.length-1]:null}_focusItem(e){var t,a,r=null===(t=(a=this.props).getPriorityFocusItem)||void 0===t?void 0:t.call(a);r&&r===e&&(this._priorityItemHasBeenFocused=!0),d.default.focus(e,{preventScroll:!1})}_focusCurrentItem(){this._shiftFocus(0)}_shiftFocus(e){var t=this._getItems();if(0!==t.length){var a;if(this._focusedItem){var r=t.indexOf(this._focusedItem);-1!==r&&(a=r+e<0?t[0]:t[r+e])}a||(a=t[t.length-1]);var i=a;i.hasAttribute("tabIndex")||(__LOG__(3)(f()),function(e){e.setAttribute("tabIndex","-1")}(i)),this._focusItem(i)}}render(){var{"aria-label":e,className:t,children:a,dataTab:r,handlers:i,role:n}=this.props,o=(0,s.default)((0,s.default)({},i),{},{up:this._handleKeyUp,down:this._handleKeyDown,end:this._handleKeyEnd,"command+down":this._handleKeyEnd});return l.createElement(h.default,{displayName:"ListHotKeys",ref:this._setRefUIE,uimState:h.default.State.PASSIVE,requestFocus:this._handleFocusRequest},l.createElement(u.default,{handlers:o,className:t,"data-tab":r,onFocus:this._handleFocusGain,onBlur:this._handleBlur,onRef:this._setRef,role:n,"aria-label":e},a))}}t.default=m,m.contextType=c.default},25211:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=function(e){switch(e){case o.default.CONTACT_US:return B;case o.default.LICENSES:return j;case o.default.DELETE_OR_EXIT_CHAT:return F;case o.default.GO_TO_NEXT_CHAT:return G;case o.default.GO_TO_PREV_CHAT:return U;case o.default.LOGOUT:return N;case o.default.OPEN_NEW_CHAT:return A;case o.default.OPEN_NEW_GROUP:return I;case o.default.OPEN_PROFILE:return O;case o.default.OPEN_SETTINGS:return P;case o.default.SEARCH:return w;case o.default.SEARCH_IN_CHAT:return x;case o.default.TOGGLE_ARCHIVE:return D;case o.default.TOGGLE_MUTE:return R;case o.default.TOGGLE_PIN:return L;case o.default.TOGGLE_UNREAD:return k;case o.default.ZOOM_IN:return V;case o.default.ZOOM_OUT:return H;case o.default.ZOOM_RESET:return W}}(e);if(!t)return;try{t()}catch(t){__LOG__(3)(b(),e)}};var s=i(a(19976)),n=r(a(2784)),o=i(a(15774)),l=i(a(43334)),d=i(a(79711)),u=i(a(9386)),c=i(a(52737)),h=i(a(50935)),f=a(95595),p=i(a(17957)),m=i(a(65829)),_=i(a(58885)),v=i(a(57557)),g=i(a(82476)),E=i(a(35194)),y=i(a(15118)),S=i(a(40773)),C=i(a(92062)),T=i(a(76019)),M=i(a(12767));function b(){var e=(0,s.default)(["keyboard:error occurred running action ","."]);return b=function(){return e},e}function P(){d.default.existsDrawerLeft((e=>{e&&d.default.closeDrawerLeft(),d.default.openDrawerLeft(n.createElement(C.default,null))}))}function A(){d.default.existsDrawerLeft((e=>{e&&d.default.closeDrawerLeft(),d.default.openDrawerLeft(n.createElement(v.default,null))}))}function I(){d.default.existsDrawerLeft((e=>{e&&d.default.closeDrawerLeft(),d.default.openDrawerLeft(n.createElement(g.default,null))}))}function O(){d.default.existsDrawerLeft((e=>{e&&d.default.closeDrawerLeft();var t=(0,f.getMaybeMeUser)(),a=T.default.assertGet(t),r=y.default.assertGet(t);d.default.openDrawerLeft(n.createElement(E.default,{status:a,profilePicThumb:r,conn:c.default}))}))}function N(){if(!_.default.some((e=>e.ack===h.default.ACK.CLOCK&&e.local&&e.isSentByMe)))return M.default.logout();d.default.openModal(n.createElement(u.default,{title:p.default.t(501),onOK:()=>M.default.logout(),okText:p.default.t(927),onCancel:()=>d.default.closeModal(),cancelText:p.default.t(1547)},p.default.t(1294)))}function w(){d.default.focusChatSearch()}function D(){var e=K();if(e&&e.canArchive()){var t=e.archive;d.default.archiveChat(e,!t)}}function R(){var e=K();if(e&&e.mute.canMute()){var t=e.mute.isMuted;d.default.muteChat(e,!t)}}function L(){var e=K();if(e&&(null!=e.pin||l.default.filter((e=>e.pin)).length<3)){var t=Boolean(e.pin);d.default.pinChat(e,!t)}}function k(){var e=K();if(e){var t=e.markedUnread;d.default.markChatUnread(e,!t)}}function x(){var e=K();e&&d.default.chatSearch(e)}function F(){var e=K();e&&d.default.deleteOrExitChat(e)}function G(){d.default.focusNextChat(!0)}function U(){d.default.focusPrevChat(!0)}function B(){d.default.openModal(n.createElement(S.default,null))}function j(){d.default.openModal(n.createElement(m.default,null))}function V(){}function H(){}function W(){}function K(){var e=l.default.filter((e=>e.active));return e.length?e[0]:void 0}},25250:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.getAction=function(e){var{key:t,ctrlKey:a,metaKey:r,altKey:i,shiftKey:s}=e;if("Control"===t||"Meta"===t||"Alt"===t||"Shift"===t)return;return a&&r||a&&i?l[function(e,t){if(t&&("Tab"===e||"Enter"===e||"Backspace"===e||" "===e))return"Shift+".concat(e);return e}(t,s)]:void 0},t.getKey=function(e){var t=n(e);if(!t.length)return;var{key:a,nativeKey:r,nativeModifier:i}=t[0],s=r||a;return s?d(s,i):void 0},t.getAdditionalShortcuts=function(){var e={};return[...s.default.members()].forEach((t=>{var a=n(t);a.length<=1||a.slice(1).forEach((({key:a,nativeKey:r,nativeModifier:i})=>{var s=r||a;s&&(e[d(s,i)]=t)}))})),e},t.getShortcutKey=function(e){var t=n(e);if(t.length){var{key:a,nativeKey:r,webKey:i}=t[0];return i||a}return};var i=r(a(23779)),s=r(a(15774));function n(e){switch(e){case s.default.CONTACT_US:return[{key:"H"}];case s.default.DELETE_OR_EXIT_CHAT:return[{key:"Backspace",nativeKey:"D"}];case s.default.GO_TO_NEXT_CHAT:return[{key:"Tab",nativeModifier:"Ctrl"},{key:"}"}];case s.default.GO_TO_PREV_CHAT:return[{key:"Shift+Tab",nativeModifier:"Ctrl"},{key:"{"}];case s.default.LOGOUT:return[];case s.default.OPEN_NEW_CHAT:return[{key:"n"}];case s.default.OPEN_NEW_GROUP:return[{key:"N"}];case s.default.OPEN_PROFILE:return[{key:"p"}];case s.default.OPEN_SETTINGS:return[{key:","}];case s.default.SEARCH:return[{webKey:"/",nativeKey:"f"}];case s.default.SEARCH_IN_CHAT:return[{key:"F"}];case s.default.TOGGLE_ARCHIVE:return[{key:"e"}];case s.default.TOGGLE_MUTE:return[{key:"M"}];case s.default.TOGGLE_PIN:return[{key:"P"}];case s.default.TOGGLE_UNREAD:return[{key:"U"}];case s.default.ZOOM_IN:return[{key:"+"},{key:"="}];case s.default.ZOOM_OUT:return[{key:"-"}];case s.default.ZOOM_RESET:return[{key:"0"}];default:return[]}}var o,l=(o={},[...s.default.members()].forEach((e=>{n(e).forEach((({key:t,webKey:a})=>{var r=a||t;r&&(o[r]=e)}))})),o);function d(e,t="CmdOrCtrl"){var a="+"!==e?e:"Plus";return 1===a.length&&a.match(/[a-z]/i)?a.match(/[a-z]/)?"".concat(t,"+").concat((0,i.default)(a)):"Shift+".concat(t,"+").concat(a):"".concat(t,"+").concat((0,i.default)(a))}},54794:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(829)),n=r(a(2784)),o=i(a(38147)),l=i(a(6660)),d=i(a(44343)),u=i(a(68340));class c extends n.Component{constructor(...e){super(...e),this._setRef=e=>{this._ref=e,this.props.onRef(e)},this.getElement=()=>this._ref,this._rotateFocus=e=>{if(this._ref){var t=1;e&&(e.preventDefault(),t=e.shiftKey?-1:1,o.default.shouldIndicateFocus());var a=Array.from(this._ref.querySelectorAll("[data-tab]"));if((a=this.props.getVisibleDOMNodes(a)).length){a=(0,s.default)(a,(e=>parseInt(e.getAttribute("data-tab"),10)||0));var r=0,i=document.activeElement;i&&(r=(0,u.default)(a,a.findIndex((e=>e.contains(i)))+t));var n=a[r];o.default.shouldIndicateFocus(),n.restoreFocus?n.restoreFocus():l.default.focus(n)}}}}componentDidMount(){l.default.focus(this._ref)}render(){var{className:e,children:t,onBlur:a}=this.props,r={tab:this._rotateFocus,"shift+tab":this._rotateFocus,"shift+?":this.props.onShowKeyboardShortcuts};return n.createElement(d.default,{handlers:r,className:e,onBlur:a,onRef:this._setRef},t)}}t.default=c},8430:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCountryShortcodeByPhone=function(e){if(null==e||0===e.length)return"";var t=function(e,t){if(null!=e&&e.length>0&&null!=t)for(var a=t[e[0]],r=e;r.length>0&&a;){if(a.c)return a.c;a=a[(r=r.substr(1,r.length-1))[0]]}return""}(e,a);return""===t&&"1"===e[0]?"US":"RU"===t&&["6","7"].includes(e[1])?"KZ":t};var a={1:{2:{0:{4:{c:"CA"}},2:{6:{c:"CA"}},3:{6:{c:"CA"}},4:{2:{c:"BS"},9:{c:"CA"}},5:{0:{c:"CA"}},6:{4:{c:"AI"},8:{c:"AG"}},8:{4:{c:"VG"},9:{c:"CA"}}},3:{0:{6:{c:"CA"}},4:{0:{c:"VI"},3:{c:"CA"},5:{c:"KY"}},6:{5:{c:"CA"},7:{c:"CA"}}},4:{0:{3:{c:"CA"}},1:{6:{c:"CA"},8:{c:"CA"}},3:{1:{c:"CA"},7:{c:"CA"},8:{c:"CA"}},4:{1:{c:"BM"}},5:{0:{c:"CA"}},7:{3:{c:"GD"}}},5:{0:{6:{c:"CA"}},1:{4:{c:"CA"},9:{c:"CA"}},4:{8:{c:"CA"}},7:{9:{c:"CA"}},8:{1:{c:"CA"},7:{c:"CA"}}},6:{0:{4:{c:"CA"}},1:{3:{c:"CA"}},3:{9:{c:"CA"}},4:{7:{c:"CA"},9:{c:"TC"}},5:{8:{c:"JM"}},6:{4:{c:"MS"}},7:{0:{c:"MP"},1:{c:"GU"},2:{c:"CA"}},8:{4:{c:"AS"}}},7:{0:{5:{c:"CA"},9:{c:"CA"}},2:{1:{c:"MF"}},5:{8:{c:"LC"}},6:{7:{c:"DM"}},7:{8:{c:"CA"}},8:{0:{c:"CA"},2:{c:"CA"},4:{c:"VC"},7:{c:"PR"}}},8:{0:{7:{c:"CA"},9:{c:"DO"}},1:{9:{c:"CA"}},2:{5:{c:"CA"},9:{c:"DO"}},4:{9:{c:"DO"}},6:{7:{c:"CA"},8:{c:"TT"},9:{c:"KN"}},7:{3:{c:"CA"},6:{c:"JM"}}},9:{0:{2:{c:"CA"},5:{c:"CA"}},3:{9:{c:"PR"}}}},2:{0:{c:"EG"},1:{1:{c:"SS"},2:{c:"MA"},3:{c:"DZ"},6:{c:"TN"},8:{c:"LY"}},2:{0:{c:"GM"},1:{c:"SN"},2:{c:"MR"},3:{c:"ML"},4:{c:"GN"},5:{c:"CI"},6:{c:"BF"},7:{c:"NE"},8:{c:"TG"},9:{c:"BJ"}},3:{0:{c:"MU"},1:{c:"LR"},2:{c:"SL"},3:{c:"GH"},4:{c:"NG"},5:{c:"TD"},6:{c:"CF"},7:{c:"CM"},8:{c:"CV"},9:{c:"ST"}},4:{0:{c:"GQ"},1:{c:"GA"},2:{c:"CG"},3:{c:"CD"},4:{c:"AO"},5:{c:"GW"},6:{c:"IO"},7:{c:"AC"},8:{c:"SC"},9:{c:"SD"}},5:{0:{c:"RW"},1:{c:"ET"},2:{c:"SO"},3:{c:"DJ"},4:{c:"KE"},5:{c:"TZ"},6:{c:"UG"},7:{c:"BI"},8:{c:"MZ"}},6:{0:{c:"ZM"},1:{c:"MG"},2:{c:"RE"},3:{c:"ZW"},4:{c:"NA"},5:{c:"MW"},6:{c:"LS"},7:{c:"BW"},8:{c:"SZ"},9:{c:"KM"}},7:{c:"ZA"},9:{0:{c:"SH"},1:{c:"ER"},7:{c:"AW"},8:{c:"FO"},9:{c:"GL"}}},3:{0:{c:"GR"},1:{c:"NL"},2:{c:"BE"},3:{c:"FR"},4:{c:"ES"},5:{0:{c:"GI"},1:{c:"PT"},2:{c:"LU"},3:{c:"IE"},4:{c:"IS"},5:{c:"AL"},6:{c:"MT"},7:{c:"CY"},8:{c:"FI"},9:{c:"BG"}},6:{c:"HU"},7:{0:{c:"LT"},1:{c:"LV"},2:{c:"EE"},3:{c:"MD"},4:{c:"AM"},5:{c:"BY"},6:{c:"AD"},7:{c:"MC"},8:{c:"SM"}},8:{0:{c:"UA"},1:{c:"RS"},2:{c:"ME"},3:{c:"XK"},5:{c:"HR"},6:{c:"SI"},7:{c:"BA"},9:{c:"MK"}},9:{c:"IT"}},4:{0:{c:"RO"},1:{c:"CH"},2:{0:{c:"CZ"},1:{c:"SK"},3:{c:"LI"}},3:{c:"AT"},4:{c:"GB"},5:{c:"DK"},6:{c:"SE"},7:{c:"NO"},8:{c:"PL"},9:{c:"DE"}},5:{0:{0:{c:"FK"},1:{c:"BZ"},2:{c:"GT"},3:{c:"SV"},4:{c:"HN"},5:{c:"NI"},6:{c:"CR"},7:{c:"PA"},8:{c:"PM"},9:{c:"HT"}},1:{c:"PE"},2:{c:"MX"},3:{c:"CU"},4:{c:"AR"},5:{c:"BR"},6:{c:"CL"},7:{c:"CO"},8:{c:"VE"},9:{0:{c:"GP"},1:{c:"BO"},2:{c:"GY"},3:{c:"EC"},4:{c:"GF"},5:{c:"PY"},6:{c:"MQ"},7:{c:"SR"},8:{c:"UY"},9:{c:"CW"}}},6:{0:{c:"MY"},1:{c:"AU"},2:{c:"ID"},3:{c:"PH"},4:{c:"NZ"},5:{c:"SG"},6:{c:"TH"},7:{0:{c:"TL"},2:{c:"NF"},3:{c:"BN"},4:{c:"NR"},5:{c:"PG"},6:{c:"TO"},7:{c:"SB"},8:{c:"VU"},9:{c:"FJ"}},8:{0:{c:"PW"},1:{c:"WF"},2:{c:"CK"},3:{c:"NU"},5:{c:"WS"},6:{c:"KI"},7:{c:"NC"},8:{c:"TV"},9:{c:"PF"}},9:{0:{c:"TK"},1:{c:"FM"},2:{c:"MH"}}},7:{c:"RU"},8:{1:{c:"JP"},2:{c:"KR"},4:{c:"VN"},5:{0:{c:"KP"},2:{c:"HK"},3:{c:"MO"},5:{c:"KH"},6:{c:"LA"}},6:{c:"CN"},8:{0:{c:"BD"},6:{c:"TW"}}},9:{0:{c:"TR"},1:{c:"IN"},2:{c:"PK"},3:{c:"AF"},4:{c:"LK"},5:{c:"MM"},6:{0:{c:"MV"},1:{c:"LB"},2:{c:"JO"},3:{c:"SY"},4:{c:"IQ"},5:{c:"KW"},6:{c:"SA"},7:{c:"YE"},8:{c:"OM"}},7:{0:{c:"PS"},1:{c:"AE"},2:{c:"IL"},3:{c:"BH"},4:{c:"QA"},5:{c:"BT"},6:{c:"MN"},7:{c:"NP"}},8:{c:"IR"},9:{2:{c:"TJ"},3:{c:"TM"},4:{c:"AZ"},5:{c:"GE"},6:{c:"KG"},8:{c:"UZ"}}}}},12824:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LabelItemParentType=void 0;var r=a(28103).Mirrored(["Chat","Contact","Msg"]);t.LabelItemParentType=r},28352:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.initializeLabels=function(e){var t=d(e);if(s.default.supportsFeature(s.default.F.MD_BACKEND))e.labels=a(23539).default.getLabelsForModel(e.id.toString(),t);else{var r=()=>{l(e.id.toString(),e.labels,t)};r(),e.listenTo(e,"change:labels",r)}},t.addToLabelCollection=l,t.removeLabelFromCollection=function(e,t,r){var i=a(23539).default.get(t),l=null==i?void 0:i.labelItemCollection;if(!l)return void __LOG__(3)(o(),t);l.remove(u(e,t,r)),s.default.supportsFeature(s.default.F.MD_BACKEND)&&r===n.LabelItemParentType.Chat&&l.remove(u(e,t,n.LabelItemParentType.Contact))},t.getParentCollection=function(e){switch(e){case n.LabelItemParentType.Chat:return a(43334).default;case n.LabelItemParentType.Contact:return a(7470).default;case n.LabelItemParentType.Msg:return a(58885).default}},t.getParentTypeFromModel=d,t.createLabelItemId=u;var i=r(a(19976)),s=r(a(18120)),n=a(12824);function o(){var e=(0,i.default)(["labelItemCollection does not exist for lableId ",""]);return o=function(){return e},e}function l(e,t,r){if(t&&t.length>0){var i=a(23539).default;t.forEach((t=>{var a=i.gadd({id:t});a.labelItemCollection.gadd({id:u(e,t,r),labelId:t,parentId:e,parentType:r}),s.default.supportsFeature(s.default.F.MD_BACKEND)&&r===n.LabelItemParentType.Chat&&a.labelItemCollection.gadd({id:u(e,t,n.LabelItemParentType.Contact),labelId:t,parentId:e,parentType:n.LabelItemParentType.Contact})}))}}function d(e){if(e instanceof a(46774).default)return n.LabelItemParentType.Chat;if(e instanceof a(40147).default)return n.LabelItemParentType.Contact;if(e instanceof a(27e3).default)return n.LabelItemParentType.Msg;throw new Error("getParentTypeFromModel: model is invalid")}function u(e,t,a){return"".concat(e,"_").concat(t,"_").concat(a)}},89423:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(52954)),s=r(a(30733)),n=a(25675),o=a(28703),l=r(a(18120)),d=a(12496),u=a(27985),c=r(a(76022));function h(){return(h=(0,i.default)((function*(e){if(l.default.supportsFeature(l.default.F.MD_BACKEND)){var t=(0,u.parseAPICmd)(e);return t.resultType===n.APICmd.CATALOG?(0,d.getProductOrCatalogLinkPreview)(e,t.data.catalogOwnerJid):t.resultType===n.APICmd.PRODUCT?(0,d.getProductOrCatalogLinkPreview)(e,t.data.businessOwnerJid,t.data.productId):null}var{title:a,description:r,canonicalUrl:i,matchedText:s,preview:h,thumbnail:f,doNotPlayInline:p}=yield c.default.queryLinkPreview(e);return s&&(a||r)?{url:e,data:{title:a||void 0,description:r||void 0,canonicalUrl:i||void 0,matchedText:s,richPreviewType:"video"===h?o.ExtendedTextMessagePreviewType.VIDEO:o.ExtendedTextMessagePreviewType.NONE,thumbnail:f||void 0,doNotPlayInline:p}}:null}))).apply(this,arguments)}var f=(0,s.default)((function(){return h.apply(this,arguments)}));t.default=f},12496:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.getProductOrCatalogLinkPreview=function(){return _.apply(this,arguments)};var i=r(a(52954)),s=r(a(65468)),n=r(a(7470)),o=a(37356),l=a(28703),d=a(95595),u=r(a(97934)),c=r(a(17957)),h=a(82982),f=r(a(68384)),p=a(75637),m=100;function _(){return(_=(0,i.default)((function*(e,t,a){var r;if(!f.default.isWid(t))return null;var i,_=(0,p.createWid)(t);try{i=yield s.default.find(_)}catch(e){return null}var v=a?i.productCollection.get(a):i.productCollection.getProductModels().find((e=>"APPROVED"===e.reviewStatus&&!e.isHidden));if(null==v||"APPROVED"!==v.reviewStatus||v.isHidden)return null;var g,E,y,S,C=v.getPreviewImage();if(C&&(g=(g=yield(0,h.getResizedThumbData)(C.mediaUrl,m,m,"image/jpeg",.75)).replace("data:image/jpeg;base64,","")),null===(r=(0,d.getMaybeMeUser)())||void 0===r?void 0:r.equals(_)){var T=yield n.default.get(_);if(null==T)return null;E=T.displayName}else{var M;E=null===(M=(yield(0,u.default)(_)).bizInfo)||void 0===M?void 0:M.verifiedName.name}return a?(y=c.default.t(443,{productName:v.name,catalogOwnerName:E}),(null==v?void 0:v.description)&&null!=v.priceAmount1000&&v.currency?S="".concat(v.description," · ").concat((0,o.format)(v.currency,v.priceAmount1000)):v.description?S=v.description:null!=v.priceAmount1000&&v.currency&&(S=(0,o.format)(v.currency,v.priceAmount1000))):(y=c.default.t(442,{catalogOwnerName:E}),S=c.default.t(441)),{url:e,data:{title:y,description:S||void 0,canonicalUrl:e,matchedText:e,richPreviewType:l.ExtendedTextMessagePreviewType.NONE,thumbnail:g,doNotPlayInline:!0}}}))).apply(this,arguments)}},90088:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.findLinks=function(e,t=!1,a){if(!O.test(e))return[];I.lastIndex=0;var r,i=[];for(;r=N(e);){var s=D(r,t,a);s&&i.push(s)}return i},t.findLink=w,t.validateEmail=function(e){var t=w(e);return t&&t.url===e&&"mailto:"===t.scheme&&t.username&&!t.params&&!t.anchor?t:null};var i=r(a(19976)),s=a(41263),n=a(24569),o=r(a(52737)),l=a(95595),d=a(25270);function u(){var e=(0,i.default)(["text size: ",", error: ",""]);return u=function(){return e},e}var c=/^https?:\/\/$/gi,h="\\w|[^\\s\0-«»‘’“”]|%[0-9a-f][0-9a-f]",f="(?:".concat(h,")|(?:").concat(h,")(?:").concat(h,"|-)*(?:").concat(h,")"),p="(?!_)(?:(?:".concat(f,")\\.)+(?:").concat(d.TLD,")(?!\\.").concat(f,")"),m="(?:".concat(h,"|[^\\s%])"),_="/".concat(m,"*?"),v="[".concat("+@!.?,(\\[{<«‘“:","]*(?!").concat(m,"|#)"),g="\\?(?!".concat(v,")").concat(m,"*?"),E="#".concat(m,"*?"),y="0-9a-z!#$%&'*+/=?^_`{|}~\\-",S="\\b\\w[".concat(y,"]*(?:\\.[").concat(y,"]+)*"),C="(".concat("^|\\W\\.|[^/\\w.]|_",")(").concat("(?:http|https)://|mailto:",")?(").concat(S,"@)?(").concat(p,")(?:(?!").concat(f,")|(?=_))(?:(?=[^:/?#])|(").concat(":\\d{1,5}",")?(").concat(_,")?(").concat(g,")?(").concat(E,")?(?=").concat(v,"))"),T=6,M=7,b=8,P=new Map([[34,34],[41,40],[62,60],[93,91],[125,123],[187,171],[8217,8216],[8221,8220]]),A=new Map([[34,34],[40,41],[60,62],[91,93],[123,125],[171,187],[8216,8217],[8220,8221]]),I=new RegExp("".concat(C),"ig"),O=new RegExp("\\.(?:".concat(d.TLD,")"),"i");function N(e){try{return I.exec(e)}catch(t){return __LOG__(4,void 0,new Error,!0)(u(),e.length,String(t)),SEND_LOGS("linkify-regex-error"),null}}function w(e,t=!1,a){return I.lastIndex=0,D(N(e),t,a)}function D(e,t=!1,a){if(!e)return null;var r=e[1].length,i=e[0],d=e.index+r,{index:u}=e;if("_"===e[1]&&u-1&&/\S/.test(e.input[u-1]))return null;if(e[5]){var h=parseInt(e[5].slice(1),10);if("0"===e[5][1]||!(0<h&&h<65536))return null}var f=[b,M,T].find((t=>e&&e[t]))||0;if(f){var p=[],m=e[f];"_"===m.slice(-1)&&"_"===i[d-1]&&(i=i.slice(0,-1),e[f]=m=m.slice(0,-1));for(var _=0,v=0,g=0;g<m.length;g++){var E=m.charCodeAt(g);E===v?0===(v=p.pop()||0)&&(_=g):A.has(E)?(0!==v&&p.push(v),v=A.get(E)):P.has(E)||0===v&&(_=g)}for(;0!==p.length;)p.pop();_!==m.length-1?(i=e.slice(2,f).filter((e=>e)).join("")+m.slice(0,_+1),I.lastIndex=d+i.length):i=i.slice(r)}else i=i.slice(r);var y=i,S=e[2],C=Boolean(S&&S.match(c));if(t&&!C)return null;S?S=S.toLowerCase():(S=0===y.toLowerCase().indexOf("irc.")?"irc://":0===y.toLowerCase().indexOf("ftp.")?"ftp://":e[3]?"mailto:":"http://",y=S+y);var O=e[4],N=(0,l.getMaybeMeUser)();return{href:y,url:i,index:d,input:e.input,scheme:S,username:e[3],domain:O,port:e[5],path:e[T],params:e[M],anchor:e[b],isHttp:C,suspiciousCharacters:a&&N?(0,n.findSuspiciousCharacters)(O,(0,s.toJid)(a.user),(0,s.toJid)(N.user),o.default.allLanguages):void 0}}},65935:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.getDirectionUrl=function(e,t){var a=s.default.getLocale(),r="".concat(e,",").concat(t);return"".concat(o,"/").concat("","/").concat(r,"?hl=").concat(a)},t.getSearchUrl=function(e){var t=s.default.getLocale();return"".concat(l,"/").concat(encodeURIComponent(e),"/z?hl=").concat(t)},t.getMapUrl=function(e,t,a){var r=s.default.getLocale();return a?"".concat(l,"/").concat(encodeURIComponent(a),"/@").concat(e,",").concat(t,",").concat(u,"z?hl=").concat(r):n.default.build(d,{q:"".concat(e,",").concat(t),z:u,hl:r})};var i=r(a(50935)),s=r(a(17957)),n=r(a(74185)),{G_MAPS_DIR_URL:o,G_MAPS_SEARCH_URL:l,G_MAPS_URL:d,SEARCH_ZOOM:u}=i.default},16622:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.start=function(e,t){if(!d.default)return __LOG__(2)(f()),Promise.reject(new l.GUM.GUMError);var a=0,r=!1;function i(){a&&clearTimeout(a),a=setTimeout((()=>{t?t():(!function(e){"camera"===e?o.default.openModal(n.createElement(u.default,{messaging:u.Messaging.CAMERA,type:u.default.TYPE.GUIDE_ALLOW})):o.default.openModal(n.createElement(u.default,{messaging:u.Messaging.MIC,type:u.default.TYPE.GUIDE_ALLOW}))}(e),r=!0)}),1e3)}return(0,c.default)((({retry:t,failCount:a})=>new Promise(((r,s)=>{i(),(0,d.default)(m[e][a]).then(r).catch((r=>{"NotReadableError"===r.name&&m[e][a+1]?t():s(r)}))})))).catch((e=>{var t=e&&e.name||e,a=l.GUM[t]||l.GUM.GUMError;return Promise.reject(new a)})).finally((()=>{r&&o.default.closeModal(),a&&clearTimeout(a)}))},t.stop=function(e){if("function"==typeof e.stop)e.stop();else for(var t=e.getTracks(),a=0;a<t.length;a++)t[a].stop()},t.isSrcObjectInVideoElement=function(){void 0===p&&(p="srcObject"in document.createElement("video"));return p};var s=i(a(19976)),n=r(a(2784)),o=i(a(79711)),l=a(96452),d=i(a(68476)),u=r(a(45356)),c=i(a(58768)),h=i(a(72424));function f(){var e=(0,s.default)(["MediaCapture:start() no ability to capture media"]);return f=function(){return e},e}var p,m={camera:[{video:{width:h.default.imageMaxEdge,height:h.default.imageMaxEdge}},{video:{width:Math.min(1280,h.default.imageMaxEdge),height:Math.min(720,h.default.imageMaxEdge)}},{video:!0}],microphone:[{audio:!0}]}},97626:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(29351),i=a(96452);class s extends((0,r.customError)("MediaFileTooLarge",!0,i.MediaFileError)){constructor(e){super("File (".concat(e.type(),") size = ").concat(e.size())),this.opaqueData=e}}t.default=s},23765:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.getMediaTagErrorReason=P,t.loadImage=A,t.image=function(e){return A(e).then((e=>e&&e.naturalWidth>0?{img:e,fullWidth:e.naturalWidth,fullHeight:e.naturalHeight}:Promise.reject(new l.MediaLoadError("image loaded with zero width")))).catch((()=>Promise.reject(new l.MediaLoadError("unable to render image"))))},t.video=I,t.videoWidthHeightDuration=function(e){return I(e,!0).then((({video:e,fullWidth:t,fullHeight:a,duration:r})=>(O(e),{width:t,height:a,duration:r})))},t.disposeVideo=O,t.audio=function(e){var t;return new Promise((function(a,r){(t=document.createElement("audio")).volume=0,t.autoplay=!0,t.onplay=function(){t.pause(),a({audio:t})},t.onerror=()=>{r(new l.MediaLoadError("unable to play audio"))},t.src=e})).finally((()=>{t&&(t.onplay=t.onerror=null)}))},t.transcode=function(e,t){var a=t||e.type;return a&&a.includes(o.default.MIMETYPE_OGG)&&!T?e.size<=3e5?new c.default(e).generateBlob():Promise.reject(new l.TranscodeBlobTooLargeError):Promise.resolve(e)},t.canPlayOgg=void 0;var s=i(a(19976)),n=a(91460),o=i(a(50935)),l=r(a(96452)),d=i(a(31600)),u=i(a(40210)),c=i(a(39592)),h=i(a(77626));function f(){var e=(0,s.default)(["Error: ",""]);return f=function(){return e},e}function p(){var e=(0,s.default)(["MediaLoad:video #"," dimensions are not defined. Video readyState: ",". Video width: ",""]);return p=function(){return e},e}function m(){var e=(0,s.default)(["MediaLoad:video #"," successful"]);return m=function(){return e},e}function _(){var e=(0,s.default)(["unable to load video #"," ("," bytes)"]);return _=function(){return e},e}function v(){var e=(0,s.default)(["MediaLoad:video.onerror #",": ","\n Blob info -> size:",", type: ",""],["MediaLoad:video.onerror #",": ","\\n Blob info -> size:",", type: ",""]);return v=function(){return e},e}function g(){var e=(0,s.default)(["MediaLoad:video.oncanplay #",". Metadata loaded: ",". Video width: ",""]);return g=function(){return e},e}function E(){var e=(0,s.default)(["MediaLoad:video.onprogress #",""]);return E=function(){return e},e}function y(){var e=(0,s.default)(["MediaLoad:video.onloadeddata #",""]);return y=function(){return e},e}function S(){var e=(0,s.default)(["MediaLoad:video.onloadedmetadata #",". Video ready: ",". Video width: ",""]);return S=function(){return e},e}function C(){var e=(0,s.default)(["MediaLoad:video called (#","). Should wait for a first frame: ",""]);return C=function(){return e},e}var T=(new Audio).canPlayType("audio/ogg");t.canPlayOgg=T;var M=0,b=Promise.resolve();function P(e){if(!e||!e.error)return null;var t=e.error,a=Object.keys(d.default).find((e=>d.default[e]===t.code));a=a||"UNKNOWN CODE ".concat(t.code);var r=t.message&&~t.message.indexOf(":")?t.message.split(":")[0]:"";return r?"".concat(a,": ").concat(r):a}function A(e,t=!0){var a;return new Promise((function(r,i){a=new Image;var s=/^(?:data|blob):/.test(e);t&&!s&&a.setAttribute("crossOrigin","anonymous"),a.onload=r,a.onabort=()=>{i(new Error("loadImage onabort"))},a.onerror=()=>{i(new l.InvalidImageFileType("Image tag load error"))},a.src=e})).then((()=>a))}function I(e,t=!1){var a=b.then((()=>function(e,t=!1){var a,r,i=new u.default.WebcMediaLoad,s=null,o=++M;function d(){a&&s&&(document.body&&document.body.removeChild(s),s=null)}var c=new Promise((function(i,n){__LOG__(2)(C(),o,t);var d=!1,u=!1;if((a=document.createElement("video")).volume=0,a.muted=!0,a.playsinline=!0,a.onloadedmetadata=()=>{__LOG__(2)(S(),o,u,a.videoWidth),d=!0,!u&&t||i()},a.onloadeddata=()=>{__LOG__(2)(y(),o)},a.onprogress=()=>{__LOG__(2)(E(),o)},a.oncanplay=()=>{__LOG__(2)(g(),o,d,a.videoWidth),u=!0,d&&t&&i()},a.onerror=()=>{var t=a.error?a.error.message:"no error message";__LOG__(3)(v(),o,String(t),e.size,e.type);var r=P(a);n(new l.UnableToPlayVideoError(r))},a.src=r=window.URL.createObjectURL(e),h.default.isSafari||h.default.isBuggyVideoLoad){var c=s=document.createElement("div");c.style="opacity: 0.004",c.appendChild(a),document.body&&document.body.appendChild(c)}a.load()}));setTimeout((()=>{d(),c.isPending()&&(__LOG__(3)(_(),o,e.size),new u.default.WebcMediaLoad({webcMediaLoadResult:u.default.WEBC_MEDIA_LOAD_RESULT_CODE.SILENCE}).commit())}),8e3);var f=c.then((()=>(0,n.delayMs)(10))).then((()=>{if(i.markWebcMediaLoadT(),__LOG__(2)(m(),o),a.pause(),a.videoWidth>0)return i.webcMediaLoadResult=u.default.WEBC_MEDIA_LOAD_RESULT_CODE.SUCCESS,i.commit(),{video:a,fullWidth:a.videoWidth,fullHeight:a.videoHeight,duration:a.duration};throw a.duration>0?(__LOG__(3)(p(),o,a.readyState,a.videoWidth),new l.MediaUnsupportedError("video loaded with duration but no dims")):(i.webcMediaLoadResult=u.default.WEBC_MEDIA_LOAD_RESULT_CODE.ZEROWIDTH,i.commit(),new l.MediaLoadError("video loaded with zero width"))})).finally((()=>{d(),a&&(a.onloadedmetadata=null,a.onloadeddata=null,a.onplay=null,a.onerror=null),r&&window.URL.revokeObjectURL(r)}));return f.catch((()=>{O(a)})),f}(e,t)));return b=a.timeout(1e3).then((()=>{}),(()=>{})),a}function O(e){try{e.pause(),e.src="",e.load()}catch(e){__LOG__(4,void 0,new Error,!0)(f(),String(e)),SEND_LOGS("dispose-video-error")}}},81063:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);t.yj=function(){if(!h())return;setInterval((()=>{new o.default.WebcMemoryStat((0,s.default)((0,s.default)({},(0,d.default)(h(),"getMemoryInfo()")),{},{hasVerifiedNumber:u.default.mode===u.StreamMode.MAIN,numMessages:l.default.length})).commit()}),n.default.MEMORY_METRIC_INTERVAL)};var s=i(a(70417)),n=i(a(50935)),o=i(a(40210)),l=i(a(58885)),d=i(a(61941)),u=r(a(17026)),c=Date.now();function h(){var e=performance&&performance.memory;if(e)return{uptime:(Date.now()-c)/1e3,jsHeapSizeLimit:e.jsHeapSizeLimit,totalJsHeapSize:e.totalJSHeapSize,usedJsHeapSize:e.usedJSHeapSize}}},40881:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getResults=function(e,t){var a=t.map((({contact:e})=>e)),r=(e||"").toLowerCase();return a.filter((e=>function(e,t){if(t.isMe)return!1;var a=[t.searchName||t.formattedName];!t.isMyContact&&t.notifyName&&a.push(t.notifyName.toLowerCase());return a.some((t=>function(e,t){var a=-1;do{if(t.indexOf(e,a+1)===a+1)return!0}while(-1!==(a=t.indexOf(" ",a+1)));return!1}(e,t)))}(r,e)))}},53527:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.openMessengerRoomUrl=function(e){var t={source:"whatsapp",ep:e?3:4},a=n.default.build("https://messenger.com/groupcall/create",t);(0,i.openExternalLink)(a);var r=s.default.DESTINATION.BROWSER,o=e?s.default.ROOMS_ENTRY_POINT.ATTACHMENT:s.default.ROOMS_ENTRY_POINT.WEB_MENU;new s.default.RoomsCreationFlow({entryResult:r,roomsEntryPoint:o}).commit()};var i=a(35387),s=r(a(40210)),n=r(a(74185))},77865:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(19976)),s=a(95595),n=r(a(18120)),o=r(a(41699)),l=r(a(68384)),d=a(75637);function u(){var e=(0,i.default)(["Incorrect Wid MsgKey: remote:"," p:",""]);return u=function(){return e},e}function c(){var e=(0,i.default)(["MsgKey case error: ",""]);return c=function(){return e},e}function h(){var e=(0,i.default)(["Incorrect Wid MsgKey: from:"," to:"," p:",""]);return h=function(){return e},e}function f(){var e=(0,i.default)(["No matching constructor MsgKey: ",""]);return f=function(){return e},e}function p(){var e=(0,i.default)(["Unclear constructor MsgKey: ",""]);return p=function(){return e},e}function m(){var e=(0,i.default)(["MsgKey error: id is already a MsgKey"]);return m=function(){return e},e}class _{constructor(e){var t=e;if(!t)throw new Error("MsgKey error: obj is null/undefined");t.id instanceof _&&(t=t.id,__LOG__(3)(m()));var a,r,i,o,d,v,g,E=t.from&&t.to&&t.id,y=void 0!==t.fromMe&&t.remote&&t.id,S=(0,s.getMaybeMeUser)();if(!S)throw new Error("MsgKey error: me is undefined");if(E&&y)throw __LOG__(3)(p(),JSON.stringify(t)),new Error("MsgKey error: unclear which constructor to use");if(!E&&!y)throw __LOG__(3)(f(),JSON.stringify(t)),new Error("MsgKey error: don't have a matching constructor");if(E){if(({from:a,to:r,id:i,participant:o,selfDir:d}=t),!(a instanceof l.default)||!(r instanceof l.default)||o&&!(o instanceof l.default))throw __LOG__(3)(h(),String(a),String(r),String(o)),new Error("MsgKey error: something is not a wid");d=l.default.equals(a,r)?d:void 0,l.default.equals(a,r)&&l.default.equals(a,S)?(v="out"===d,g=S):l.default.equals(a,S)?(v=!0,g=r):l.default.equals(r,S)?(v=!1,g=a):l.default.equals(a,r)&&(l.default.isGroup(a)||l.default.isBroadcast(a))?(v=!0,g=a):__LOG__(3)(c(),[a,r,i,S].join()),void 0!==v&&(this.fromMe=v),g&&(this.remote=g),i&&(this.id=i)}else if(y){if(({fromMe:v,remote:g,id:i,participant:o}=t),!(g instanceof l.default)||o&&!(o instanceof l.default))throw __LOG__(3)(u(),String(g),String(o)),new Error("MsgKey error: something is not a wid");l.default.equals(S,g)&&(d=v?"out":"in"),void 0!==v&&(this.fromMe=v),g&&(this.remote=g),i&&(this.id=i)}var C=[this.fromMe,this.remote,this.id];void 0!==d&&(this.self=d,C.push(this.self)),n.default.supportsAnyFeature(n.default.F.KEY_PARTICIPANT,n.default.F.MD_BACKEND)&&void 0!==o&&(this.participant=o,C.push(this.participant)),this._serialized=C.join("_")}toString(){return this._serialized}clone(){return new _({fromMe:this.fromMe,remote:this.remote,id:this.id,participant:this.participant})}equals(e){return e instanceof _&&this.toString()===e.toString()}static fromString(e){var{fromMe:t,remote:a,id:r,participant:i}=(0,o.default)(e);return new _({fromMe:t,remote:(0,d.createWid)(a),id:r,participant:i?(0,d.createWid)(i):void 0})}}t.default=_},41699:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e||!(0,s.isString)(e))throw new Error("MsgKey fromString error: str is null or not a string");var t=e.split("_"),a=void 0;t.length<3?__LOG__(3)(n(),e):4===t.length?"out"!==t[3]&&"in"!==t[3]&&(a=t[3]):5===t.length&&(a=t[4]);return{fromMe:"true"===t[0],remote:t[1],id:t[2],participant:a}};var i=r(a(19976)),s=a(11419);function n(){var e=(0,i.default)(["MsgKey error: cannot create MsgKey from ",""]);return n=function(){return e},e}},42913:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(15253)),s=r(a(45455)),n=r(a(28267));class o extends n.default{constructor(e,t){super(),this.list=e,this.selected=e.reduce(((e,t,a)=>(e[a]=!1,e)),{}),this.getter=t}init(e=[]){(0,s.default)(this.selected)||((0,s.default)(e)?this.unsetAll():(this.selected=e.reduce(((e,t,a)=>{var r=this.list.indexOf(t);return e[a]=r>-1&&this.selected[r],e}),{}),this.list=e))}unsetAll(){(0,i.default)(this.selected,((e,t)=>{e&&this.set(t,!1)}))}reset(e=!0){(0,i.default)(this.selected,((t,a)=>{t&&this.trigger(this.getter(this.list[a]),!0,!0,e)}))}set(e,t=!0,a=!0){if(this.list.length){var r=Math.min(Math.max(e,-1),this.list.length-1),i=r>-1?this.list[r]:void 0;i&&(this.selected[r]&&!t||!this.selected[r]&&t)&&(this.selected[r]=t,this.trigger(this.getter(i),t,a))}}setVal(e,t=!0,a=!0){var r=this.list.indexOf(e);-1===r&&(r=this.list.length,this.list.push(e),this.selected[r]=!1),this.set(r,t,a)}setFirst(e=!0){(0,s.default)(this.list)||this.set(0,!0,e)}setLast(e=!0){(0,s.default)(this.list)||this.set(this.list.length-1,!0,e)}getSelected(){return this.list.reduce(((e,t,a)=>(this.selected[a]&&e.push(t),e)),[])}isSelected(e){return!!this.selected[this.list.indexOf(e)]}}t.default=o},43257:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.getAllMuteDurations=l,t.getDefaultMuteDuration=function(){return l()[0].duration},t.calculateMuteExpiration=function(e){if(e===Number.POSITIVE_INFINITY)return s.default.MUTE_ALWAYS_EXPIRATION_SENTINEL;return 60*e*60+(0,i.default)().unix()};var i=r(a(19034)),s=r(a(50935)),n=r(a(17957)),o=r(a(72424));function l(e){return e?[{label:n.default.t(996),duration:1},{label:n.default.t(999),duration:8},{label:n.default.t(995),duration:24},{label:n.default.t(997),duration:168}]:[{label:n.default.t(999),duration:8},{label:n.default.t(997),duration:168},o.default.muteAlways?{label:n.default.t(1e3),duration:Number.POSITIVE_INFINITY}:{label:n.default.t(998),duration:8760}]}},86809:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEffectiveNetworkType=function(){return navigator.connection&&"string"==typeof navigator.connection.effectiveType?navigator.connection.effectiveType:null}},32523:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(19976)),s=r(a(70417)),n=r(a(22220)),o=r(a(79504)),l=r(a(43334)),d=r(a(79711)),u=r(a(50935)),c=r(a(17957)),h=r(a(58885)),f=a(11419);function p(){var e=(0,i.default)(["Failed to create notification: ",":",""]);return p=function(){return e},e}t.default=class{constructor(e,t,a){this.close=()=>{this.notification&&this._waitForInteractionStop().then((()=>{this.notification&&(0,f.isFunction)(this.notification.close)&&this.notification.close()})).catch((()=>{}))},this._onClose=()=>{this.waitingPromise.resolver(),window.removeEventListener("beforeunload",this.close),this.notification&&(this.notification.removeEventListener("click",this._onClick),this.notification.removeEventListener("close",this._onClose),this.notification.removeEventListener("show",this._onShow)),window.clearTimeout(this._onShowTimeout),this.msg&&this.msg.off("change:type",this._onRevoke)},this._onClick=()=>{window.focus(),this.onClick();var e=this.chat,t=this.msg;if(e){var a=t&&t!==e.msgs.last()?e.getSearchContext(t):void 0;d.default.openChatAt(e,a).then((t=>{t&&d.default.focusChatTextInput(e)})),d.default.closeModalMedia(),this.close()}},this._onShow=()=>{this.msg&&this.msg.on("change:type",this._onRevoke)},this._onRevoke=()=>{this.msg&&this.msg.type===u.default.MSG_TYPE.REVOKED&&this.close()},this.msg=h.default.get(t),this.chat=l.default.get(e);var r=!!o.default.get(t);this._timeoutDuration=r?u.default.CALL_NOTIFICATION_TIMEOUT:u.default.NOTIFICATION_TIMEOUT;var i=new Promise((e=>{this.waitingPromise={resolver:e}}));this.waitingPromise.promise=i;var{title:m,notification:_}=a,v=(0,n.default)(a,["title","notification"]);try{this.notification=new _(m,(0,s.default)({tag:r?t:e.toString(),renotify:!0,dir:"auto",lang:c.default.lng(),silent:!0},v)),this.notification.addEventListener("click",this._onClick),this.notification.addEventListener("close",this._onClose),this.notification.addEventListener("show",this._onShow),window.addEventListener("beforeunload",this.close)}catch(e){__LOG__(2)(p(),e.name,e.message),this.waitingPromise.resolver()}}onClick(){}_waitForInteractionStop(){return Promise.resolve()}waitForClose(){return this.waitingPromise.promise}detach(){this._onClose()}}},4651:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.shutdownAsNeeded=function(){S.forEach(((e,t)=>{P(S,t)})),C.forEach(((e,t)=>{P(C,t)}))},t.showCallNotification=function(e,t,a){if(!e||!t||p.default.globalMute().isMuted)return;if(window.Notification&&window.Notification.permission===o.default.PERMISSION_ALLOWED&&p.default.getGlobalNotifications()){var r=l.default.get(e),i=r?r.formattedName:(0,E.default)(e),s=a?f.default.t(818,{name:i}):f.default.t(819,{name:i}),n=f.default.t(817);M(C,e,t,s,n,o.default.USER_DEFAULT_ICON)}p.default.getGlobalSounds()&&(C.get(e.toString())||Promise.resolve()).then(m.playNotification).catch((()=>{}))},t.showMsgNotification=function(e){var t=e.chat;if(document.hasFocus()&&t.active)return;if(p.default.globalMute().isMuted)return;if(function(e){var t=e.chat;if(!t.mute.isMuted)return!1;if(!t.isGroup)return!0;var a=(0,u.getMaybeMeUser)();if(e.isMentioned(a)||e.isQuoted(a)){var r=n.default.get(e.sender);return!0===(null==r?void 0:r.mute.isMuted)}return!0}(e))return;if(T(e))return;if(function(e){if(!e.isGroup)return!1;if(e.isGroup&&e.isReadOnly)return!1;var t=Date.now(),a=e.squelch||0;if(t>a)return h.default.find(e.id).then((()=>{var t=h.default.get(e.id);if(t){var a=t.participants.length,r=1e3*Math.min(120,30+5*a);e.squelch=Date.now()+r}})).catchType(d.WebdDrop,(function(){e.squelch=Date.now()+6e4})),!1;return!0}(e.chat))return;if(window.Notification&&window.Notification.permission===o.default.PERMISSION_ALLOWED&&p.default.getGlobalNotifications()){var a=(0,s.default)(e);a&&a.charCodeAt(0)>=128&&(a=" "+a);var r=t.isGroup?o.default.GROUP_DEFAULT_ICON:o.default.USER_DEFAULT_ICON,i=t.isGroup?f.default.t(536):f.default.t(535),l=t.contact.formattedName||i;M(S,t.id,e.id.toString(),l,a,r,t.canSend)}p.default.getGlobalSounds()&&(t.id&&S.get(t.id.toString())||Promise.resolve()).then(m.playNotification).catch((()=>{}))},t.cancelCallNotification=function(e){e&&P(C,e.toString())},t.closeNotifications=function(e){if(!e||!e.id)return;P(S,e.id.toString()),P(C,e.id.toString())},t.isArchivedAndNotMentioned=T;var i=r(a(19976)),s=r(a(18097)),n=r(a(43334)),o=r(a(50935)),l=r(a(7470)),d=a(19741),u=a(95595),c=a(75459),h=r(a(99922)),f=r(a(17957)),p=r(a(85059)),m=a(2951),_=r(a(49202)),v=r(a(15118)),g=r(a(2734)),E=r(a(3111));function y(){var e=(0,i.default)(["NotificationBackend:IconLoadTimeoutError:",""]);return y=function(){return e},e}var S=new Map,C=new Map;function T(e){var t=e.chat;if(!(0,c.archiveV2Supported)())return!1;if(!g.default.showArchiveV2)return!1;if(!t.archive)return!1;if(!t.isGroup)return!0;var a=(0,u.getMaybeMeUser)();if(e.isMentioned(a)||e.isQuoted(a)){var r=n.default.get(e.sender);return!0===(null==r?void 0:r.mute.isMuted)}return!0}function M(e,t,a,r,i,s,n){var l=v.default.find(t).cancellable().timeout(1500,"showNotificationTimeout").then((function(e){var t=e&&e.img?e.img:s;return(0,m.cachePath)(t)})).catchTypes(d.WebdDrop,Promise.TimeoutError,(function(){return __LOG__(2)(y(),t.toString()),(0,m.cachePath)(s)})).then((s=>{if(window.Notification.permission!==o.default.PERMISSION_ALLOWED)return Promise.reject(new Promise.CancellationError("Permission Denied"));var l=new _.default(t,a,r,i,s,n);return l.waitForClose().then((()=>{b(e,t,l)})),l}));return l.catchType(Promise.CancellationError,(function(){b(e,t)})),e.set(t.toString(),l),l}function b(e,t,a){var r=e.get(t.toString());if(r){if(a){if(r.isFulfilled()&&a!==r.value())return;if(r.isPending())return}e.delete(t.toString())}}function P(e,t){var a=e.get(t);if(a){if(a.isFulfilled())a.value().close();else a.cancel();e.delete(t)}}},2951:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.playNotification=function(){s.play().catch((()=>{}))},t.cachePath=function(e){return Promise.resolve(e)};var i=r(a(50935)),s=new window.Audio(i.default.NOTIFICATION_TONE_PATH)},49202:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(32523)),s=r(a(12396)),n=r(a(74185));class o extends i.default{constructor(e,t,a,r,i){super(e,t,{title:s.default.normalizeAllEmojis(a),notification:window.Notification,body:s.default.normalizeAllEmojis(r),icon:n.default.relToAbs(i)})}}t.default=o},46821:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return a.test(e)?e.replace(/[^0-9]/g,""):null};var a=/^[0-9+()\- ]+$/},39592:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(19976)),s=a(46378),n=a(99888),o=r(a(64957));function l(){var e=(0,i.default)(["Player::oggBlobToWAVBlob error: ",""]);return l=function(){return e},e}var d,u=0;t.default=class{constructor(e){this.oggBlob=e}generateBlob(){return this.oggBlobToWAVBlob(this.oggBlob,1)}oggBlobToWAVBlob(e,t=2){var a=t;return new Promise((t=>{var r=new o.default,i=[],s=[],c=(u++,d||new window.AudioContext),h={outputBufferSampleRate:c.sampleRate,bufferLength:4096};r.onmessage=e=>{if(null==e.data){for(var r=function(e){i.forEach((t=>{for(var a=t[e]||t[0],r=0;r<a.length;r++)s.push(a[r])}))},n=0;n<a;n++)r(n);var o=this.encodeWAV(s,c,a),l=new Blob([o.readByteArray()],{type:"audio/wav"});0==--u&&d&&(d.close&&d.close(),d=void 0),t(l)}else i.push(e.data),a=i[0].length},r.postMessage({command:"decode-init",config:h}),(0,n.blobToArrayBuffer)(e).then((e=>{r.postMessage({command:"decode",pages:new Uint8Array(e)}),r.postMessage({command:"decode-done"})})).catch((e=>{__LOG__(3)(l(),e)}))}))}encodeWAV(e,t,a){var r=new s.Binary(void 0,!0);r.ensureCapacity(44+2*e.length),r.writeString("RIFF"),r.writeUint32(36+2*e.length),r.writeString("WAVE"),r.writeString("fmt "),r.writeUint32(16),r.writeUint16(1),r.writeUint16(a),r.writeUint32(t.sampleRate),r.writeUint32(t.sampleRate*a*2),r.writeUint16(2*a),r.writeUint16(16),r.writeString("data"),r.writeUint32(2*e.length);for(var i=0;i<e.length;i++){var n=Math.max(-1,Math.min(e[i],1));n*=n>0?32767:32768,r.writeInt16(Math.floor(n))}return r}}},82170:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(68476)),s=r(a(64957)),n=function(e){var t=e;if(!n.isRecordingSupported())throw new Error("Recording is not supported in this browser");this.audioContext=new window.AudioContext,this.config=t=t||{},this.config.bufferLength=t.bufferLength||4096,this.config.monitorGain=t.monitorGain||0,this.config.numberOfChannels=t.numberOfChannels||1,this.config.originalSampleRate=this.audioContext.sampleRate,this.config.encoderSampleRate=t.encoderSampleRate||48e3,this.config.streamPages=t.streamPages||!1,this.config.leaveStreamOpen=t.leaveStreamOpen||!1,this.config.maxBuffersPerPage=t.maxBuffersPerPage||40,this.config.encoderApplication=t.encoderApplication||2049,this.config.encoderFrameSize=t.encoderFrameSize||20,this.config.streamOptions=t.streamOptions||{optional:[],mandatory:{googEchoCancellation:!1,googAutoGainControl:!1,googNoiseSuppression:!1,googHighpassFilter:!1}},this.storePage=this._storePage.bind(this),this.streamPage=this._streamPage.bind(this),this.state="inactive",this.eventTarget=document.createDocumentFragment(),this.createAudioNodes()};n.isRecordingSupported=function(){return Boolean(window.AudioContext&&i.default)},n.prototype.addEventListener=function(e,t,a){this.eventTarget.addEventListener(e,t,a)},n.prototype.clearStream=function(){this.stream&&(this.stream.getTracks().forEach((function(e){e.stop()})),delete this.stream)},n.prototype.createAudioNodes=function(){var e=this;this.scriptProcessorNode=this.audioContext.createScriptProcessor(this.config.bufferLength,this.config.numberOfChannels,this.config.numberOfChannels),this.scriptProcessorNode.onaudioprocess=function(t){e.encodeBuffers(t.inputBuffer)},this.monitorNode=this.audioContext.createGain(),this.setMonitorGain(this.config.monitorGain),this.config.sampleRate<this.audioContext.sampleRate&&this.createButterworthFilter()},n.prototype.createButterworthFilter=function(){this.filterNode=this.audioContext.createBiquadFilter(),this.filterNode2=this.audioContext.createBiquadFilter(),this.filterNode3=this.audioContext.createBiquadFilter(),this.filterNode.type=this.filterNode2.type=this.filterNode3.type="lowpass";var e=this.config.sampleRate/2;this.filterNode.frequency.value=this.filterNode2.frequency.value=this.filterNode3.frequency.value=e-e/3.5355,this.filterNode.Q.value=.51764,this.filterNode2.Q.value=.70711,this.filterNode3.Q.value=1.93184,this.filterNode.connect(this.filterNode2),this.filterNode2.connect(this.filterNode3),this.filterNode3.connect(this.scriptProcessorNode)},n.prototype.encodeBuffers=function(e){if("recording"===this.state){for(var t=[],a=0;a<e.numberOfChannels;a++)t[a]=e.getChannelData(a);this.encoder.postMessage({command:"encode",buffers:t}),this.duration+=e.duration,this.eventTarget.dispatchEvent(new CustomEvent("duration",{detail:this.duration}))}},n.prototype.initStream=function(e){if(this.stream)this.eventTarget.dispatchEvent(new Event("streamReady"));else{if(e)return this.stream=e,this.sourceNode=this.audioContext.createMediaStreamSource(e),this.sourceNode.connect(this.filterNode||this.scriptProcessorNode),this.sourceNode.connect(this.monitorNode),void this.eventTarget.dispatchEvent(new Event("streamReady"));if(!i.default)throw new Error("Recorder:initStream no audio capability");var t=this;(0,i.default)({audio:this.config.streamOptions}).then((e=>{t.stream=e,t.sourceNode=t.audioContext.createMediaStreamSource(e),t.sourceNode.connect(t.filterNode||t.scriptProcessorNode),t.sourceNode.connect(t.monitorNode),t.eventTarget.dispatchEvent(new Event("streamReady"))})).catch((e=>{t.eventTarget.dispatchEvent(new ErrorEvent("streamError",{error:e}))}))}},n.prototype.pause=function(){"recording"===this.state&&(this.state="paused",this.eventTarget.dispatchEvent(new Event("pause")))},n.prototype.removeEventListener=function(e,t,a){this.eventTarget.removeEventListener(e,t,a)},n.prototype.resume=function(){"paused"===this.state&&(this.state="recording",this.eventTarget.dispatchEvent(new Event("resume")))},n.prototype.setMonitorGain=function(e){this.monitorNode.gain.value=e},n.prototype.start=function(){"inactive"===this.state&&this.stream&&(this.encoder=new s.default,this.config.streamPages?this.encoder.addEventListener("message",this.streamPage):(this.recordedPages=[],this.totalLength=0,this.encoder.addEventListener("message",this.storePage)),this.encodeBuffers=function(){delete this.encodeBuffers},this.duration=0,this.state="recording",this.monitorNode.connect(this.audioContext.destination),this.scriptProcessorNode.connect(this.audioContext.destination),this.eventTarget.dispatchEvent(new Event("start")),this.eventTarget.dispatchEvent(new CustomEvent("duration",{detail:this.duration})),this.encoder.postMessage({command:"encode-init",config:this.config}))},n.prototype.stop=function(){"inactive"!==this.state&&(this.state="inactive",this.audioContext.close&&this.audioContext.close(),this.monitorNode.disconnect(),this.scriptProcessorNode.disconnect(),this.config.leaveStreamOpen||this.clearStream(),this.encoder.postMessage({command:"encode-done"}))},n.prototype._storePage=function({data:e}){if(this.recordedPages.push(e),this.totalLength+=e.length,4&e[5]){this.encoder.removeEventListener("message",this.storePage);for(var t=new Uint8Array(this.totalLength),a=0,r=0;r<this.recordedPages.length;r++)t.set(this.recordedPages[r],a),a+=this.recordedPages[r].length;this.eventTarget.dispatchEvent(new CustomEvent("dataAvailable",{detail:new Blob([t],{type:"audio/ogg; codecs=opus"})})),this.recordedPages=[],this.eventTarget.dispatchEvent(new Event("stop"))}},n.prototype._streamPage=function({data:e}){this.eventTarget.dispatchEvent(new CustomEvent("dataAvailable",{detail:new Blob([e],{type:"audio/ogg; codecs=opus"})})),4&e[5]&&(this.encoder.removeEventListener("message",this.streamPage),this.eventTarget.dispatchEvent(new Event("stop")))};var o=n;t.default=o},75897:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(52954)),n=a(91460),o=i(a(28421)),l=i(a(50935)),d=i(a(18120)),u=r(a(44202)),c=i(a(25012)),h=r(a(82885));t.default=class{static fileToPdf(e){var t=URL.createObjectURL(e);return Promise.loop((function(e,t,r){var i=(0,n.delayMs)(h.expBackoff(r,12e4,0,0));return a.e(2974).then(a.t.bind(a,38664,23)).then((t=>{t.GlobalWorkerOptions.workerSrc=o.default,e(t.default)})).catch((()=>i))})).then((e=>e.getDocument(t).promise))}static releasePdf(e){return e.destroy()}static pdfToImg(e,t){var a=document.createElement("canvas");return e.getPage(t).then((e=>{var t=e.getViewport({scale:1}),r=a.getContext("2d");return a.height=t.height,a.width=t.width,e.render({canvasContext:r,viewport:t}).promise})).then((()=>Promise.props({blob:u.canvasToBlob(a),thumbnail:u.rotateAndResize(a,l.default.DOC_THUMB_MAX_EDGE,u.DATA_URL|u.CANVAS|u.BLOB),microThumbnail:d.default.supportsFeature(d.default.F.UPLOAD_DOCUMENT_THUMB_MMS)?u.generateMicroThumb(a,1300,{mimetype:"image/jpeg",maxAttempts:10}):Promise.resolve(null)}))).then(function(){var t=(0,s.default)((function*({blob:t,thumbnail:a,microThumbnail:r}){return{url:URL.createObjectURL(t),thumbUrl:a.images.dataUrl,width:a.images.canvas.width,height:a.images.canvas.height,fullPreviewData:yield c.default.createFromData(a.images.blob,"image/jpeg"),fullPreviewSize:{width:a.images.canvas.width,height:a.images.canvas.height},pdfPages:e.numPages,microThumbnail:r}}));return function(){return t.apply(this,arguments)}}())}}},57052:(e,t,a)=>{"use strict";var r=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.liveLocationIcon=function(e){var t="live-location";e&&(t+="-active");var a=function(){switch(i.default.platform){case i.PLATFORMS.ANDROID:case i.PLATFORMS.SMBA:return"android";case i.PLATFORMS.IPHONE:case i.PLATFORMS.SMBI:case i.PLATFORMS.IPAD:case i.PLATFORMS.IPOD:return"iphone";case i.PLATFORMS.WP7:return"wp";default:return""}}();a&&(t+="-"+a);return t};var i=r(a(52737))},68476:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(77626));["webkitGetUserMedia"].forEach((function(e){var t=Object.getPrototypeOf(navigator)[e];t&&navigator[e]!==t&&(navigator[e]=t)}));var s=function(){var e;if(i.default.isBrokenGetUserMedia)return null;var t=null===(e=navigator.mediaDevices)||void 0===e?void 0:e.getUserMedia;if(t)return t.bind(navigator.mediaDevices);var a=navigator.getUserMedia||navigator.mozGetUserMedia||navigator.webkitGetUserMedia;return a?function(e){return new Promise((function(t,r){a.call(navigator,e,t,r)}))}:null}();t.default=s},31600:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=window.MediaError||{MEDIA_ERR_ABORTED:1,MEDIA_ERR_NETWORK:2,MEDIA_ERR_DECODE:3,MEDIA_ERR_SRC_NOT_SUPPORTED:4};t.default=a},47410:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.prepareCtwaContextSend=function(e,t){if(t)return(0,s.default)({},t);if(e&&e.sourceUrl){var a=null==e?void 0:e.sourceUrl;if(null==a||""===a)return;var r=l.findLink(e.sourceUrl,!1,(0,o.getMaybeMeUser)());return{sourceUrl:a,sourceType:"",sourceId:"",mediaType:n.ExternalAdReplyInfoMediaType.NONE,isSuspiciousLink:!!(r&&r.suspiciousCharacters&&r.suspiciousCharacters.size>0)}}return};var s=i(a(70417)),n=a(28703),o=a(95595),l=r(a(90088))},43856:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){return(0,s.default)(e,(function(r){if(r.signal.aborted)throw new i.default;var s=e(r);return t.get(s,r).then((e=>{if(r.signal.aborted)throw new i.default;return null!=e?e:a(r).then((e=>{if(r.signal.aborted)throw new i.default;return t.set(s,e,r).then((()=>e))}))}))}))};var i=r(a(8701)),s=r(a(10111))},92087:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a,r=new i.default;if(e.some((e=>e.aborted)))r.abort();else{a=()=>{for(var t of e)t.removeEventListener("abort",s);a=null};var s=()=>{var e;null===(e=a)||void 0===e||e(),r.abort()};for(var n of e)n.addEventListener("abort",s)}return t(r.signal).finally((()=>{var e;null===(e=a)||void 0===e||e()}))};var i=r(a(12489))},87713:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;class a{constructor(e){this.promise=e,this.lastUsedTime=this.createdTime=+Date.now()}}t.default=class{constructor(e,{maxCached:t=10,maxAge:a=1/0,shouldCache:r}){this._cache={},this._maxCached=t,this._maxAge=a,this._createPromiseFunc=e,this._shouldCacheFunc=r}getOrRun(e,...t){var r=this._cache;if(this._maxAge!==1/0)for(var i=Date.now()-this._maxAge,s=Object.keys(r),n=0;n<s.length;n++){var o=s[n];r[o].createdTime<i&&delete r[o]}var l=r[e];if(l)return l.lastUsedTime=+Date.now(),l.promise;var d=Object.keys(r);if(d.length>=this._maxCached){for(var u,c,h=0;h<d.length;h++){var f=d[h],p=r[f];(null==c||p.lastUsedTime<c)&&(c=p.lastUsedTime,u=f)}u&&delete r[u]}var m=this._createPromiseFunc.apply(void 0,[e,...t]);return r[e]=new a(m),m.then((t=>{var a=this._shouldCacheFunc;a&&this._cache[e]===m&&!a(t)&&delete this._cache[e]})).catch((()=>{this._cache[e]===m&&delete this._cache[e]})),m}}},36533:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(70417)),s=r(a(19976)),n=a(89083),o=r(a(50935)),l=a(95595),d=r(a(79251)),u=r(a(85350));function c(){var e=(0,s.default)(["Invalid cursor at ",", array.length = ",", element = ",""]);return c=function(){return e},e}var h="before",f="after";function p(e,t,a){var r=t,i=e.toArray(),s=a===h?-1:1;return{hasNext:()=>r>=0&&r<i.length,next(){var e=i[r];return e||__LOG__(3)(c(),r,i.length,e),r+=s,e}}}function m(e,t,a,r=1,i){for(var s,l=(0,d.default)()*r,c=p(e,t,a),h=0,f=0;c.hasNext();){var m=c.next(),_=(0,u.default)(m),v=2*(m.isNotification?1:0)+m.isSentByMe;if(f++,(h+=_+(v&&v===s?2:12))>l)break;if(f>=i)break;var g=m.asGroupedSticker,E=null!=m.asAlbumAsset;if(g||E){var y=[],S=!1,C=1;if(g){var T=void 0;if(c.hasNext()){if(T=c.next(),y.push(T),++f>=i)break;(0,n.canBeGroupedAsAlbum)(m.safe(),T.safe())&&T.asGroupedSticker&&(S=!0)}}if(E)for(var M=m,b=void 0;c.hasNext()&&C<o.default.ALBUM_MAX_SIZE&&(b=c.next(),y.push(b),!(++f>=i))&&(0,n.canBeGroupedAsAlbum)(M.safe(),b.safe())&&b.asAlbumAsset;)C++,M=b;if(g&&!S||E&&C<o.default.ALBUM_MIN_SIZE)if((h+=y.reduce(((e,t)=>e+(0,u.default)(t)),0))>l)break}s=v}return f}function _(e,t,a,r=1,i){for(var s,c=(0,d.default)()*r,h=p(e,t,a),f=0,m=0;h.hasNext();){var _=h.next(),v=(0,u.default)(_),g=_.author||(_.isSentByMe?(0,l.getMaybeMeUser)():void 0);if(m++,(f+=v+(g&&!_.isSentByMe&&g!==s?19:0)+(g&&g===s?2:12))>c)break;if(m>=i)break;var E=_.asGroupedSticker,y=null!=_.asAlbumAsset;if(E||y){var S=[],C=!1,T=1;if(E){var M=void 0;if(h.hasNext()){if(M=h.next(),S.push(M),++m>=i)break;(0,n.canBeGroupedAsAlbum)(_.safe(),M.safe())&&M.asGroupedSticker&&(C=!0)}}if(y)for(var b=_,P=void 0;h.hasNext()&&T<o.default.ALBUM_MAX_SIZE&&(P=h.next(),S.push(P),!(++m>=i))&&(0,n.canBeGroupedAsAlbum)(b.safe(),P.safe())&&null!=P.asAlbumAsset;)T++,b=P;if(E&&!C||y&&T<o.default.ALBUM_MIN_SIZE)if((f+=S.reduce(((e,t)=>e+(0,u.default)(t)),0))>c)break}s=g}return m}function v(e,t,a,r=1,i){for(var s=(0,d.default)()*r,n=p(e,t,a),o=0,l=0;n.hasNext();){var c=n.next();if(l++,(o+=(0,u.default)(c)+65)>s)break;if(l>=i)break}return l}function g(e,t,a=f){for(var r=2*(0,d.default)(),i=p(e,t,a),[s,n,o]=[0,!0,null];i.hasNext();){var l=i.next(),c=(0,u.default)(l),h=2*(l.isNotification?1:0)+l.isSentByMe;if((s+=c+(h&&h===o?2:12))>r){n=!1;break}o=h}return n}class E{static create(e){var{msgCollection:t,focusedMsgKey:a,type:r,maxInitialCount:i=Number.MAX_SAFE_INTEGER}=e;return new E({type:r}).init(a,t,i)}constructor(e){var{type:t,before:a,after:r,focusedMsgKey:i,prevFocusedMsgKey:s}=e;this._type=t,this._focusedMsgKey=i,this._prevFocusedMsgKey=s,this.before=a||0,this.after=r||0}_cloneWith(e){return new E((0,i.default)({type:this._type,before:this.before,after:this.after,focusedMsgKey:this._focusedMsgKey,prevFocusedMsgKey:this._prevFocusedMsgKey},e))}_getCursorSize(e,t,a,r,i){return function(e){switch(e){case o.default.RENDER_CURSOR.CONVERSATION:return m;case o.default.RENDER_CURSOR.GROUP_CONVERSATION:return _;case o.default.RENDER_CURSOR.STARRED_DRAWER:return v;default:return m}}(this._type)(e,t,a,r,i)}getStart(e){return Math.max(y(this._focusedMsgKey,e,this._type)-this.before,0)}getEnd(e){return Math.min(y(this._focusedMsgKey,e,this._type)+this.after+1,e.length)}hasBefore(e){return y(this._focusedMsgKey,e,this._type)-this.before>0}hasAfter(e){return y(this._focusedMsgKey,e,this._type)+this.after<e.length-1}init(e,t,a=Number.MAX_SAFE_INTEGER){return new E({type:this._type,before:0,after:0,focusedMsgKey:e}).loadBefore(t,{factor:1,maxCount:a}).loadAfter(t,{factor:1,maxCount:a})}setFocusedMsgKey(e,t){var a,r,i=y(this._focusedMsgKey,e,this._type),s=y(t,e,this._type);return t?(r=this.after-(s-i),a=this.before+(s-i)):(a=this.before+this.after,r=0),this._cloneWith({focusedMsgKey:t,before:a,after:r})._updatePrev(e)}ensureValidFocus(e){var t=null!=this._prevFocusedMsgKey&&null==e.get(this._prevFocusedMsgKey),a=null!=this._focusedMsgKey&&null==e.get(this._focusedMsgKey),r=this;return t&&(r=r._updatePrev(e)),a&&(r=r.focusBefore(e)),r}_updatePrev(e){var t=y(this._focusedMsgKey,e,this._type);return this._cloneWith({prevFocusedMsgKey:t>0?e.at(t-1).id:void 0})}focusBefore(e){return this._cloneWith({focusedMsgKey:this._prevFocusedMsgKey})._updatePrev(e)}loadBefore(e,t){var{count:a,maxCount:r=Number.MAX_SAFE_INTEGER,factor:i=2}=t||{},s=null!=a&&0!==a?a:this._getCursorSize(e,Math.max(0,this.getStart(e)-1),h,i,r);return this._cloneWith({before:this.before+s})}loadAfter(e,t){var{count:a,maxCount:r=Number.MAX_SAFE_INTEGER,factor:i=2}=t||{},s=null!=a&&0!==a?a:this._getCursorSize(e,this.getEnd(e),f,i,r);return this._cloneWith({after:this.after+s})}loadBeforeCapped(e,t){var{count:a,factor:r=2}=t||{};return g(e,this.getStart(e),f)?this.loadBefore(e,{count:a,factor:r}):this}resetBeforeCursor(e,t=Number.MAX_SAFE_INTEGER){if(!g(e,this.getStart(e),f)){var a=Math.max(0,this.getEnd(e)-1),r=this._getCursorSize(e,a,h,2,t);return this._cloneWith({before:Math.min(this.before,r)})}return this}}function y(e,t,a){if(e){var r=t.get(e),i=t.indexOf(r);if(-1!==i)return i}return function(e){switch(e){case o.default.RENDER_CURSOR.CONVERSATION:case o.default.RENDER_CURSOR.GROUP_CONVERSATION:return o.default.RENDER_CURSOR.RECENT_AT_BOTTOM;case o.default.RENDER_CURSOR.STARRED_DRAWER:return o.default.RENDER_CURSOR.RECENT_AT_TOP;default:return o.default.RENDER_CURSOR.RECENT_AT_BOTTOM}}(a)===o.default.RENDER_CURSOR.RECENT_AT_TOP?0:t.length-1}t.default=E},10385:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return/\s\s+/.test(e)?e.replace(/\s\s+/g,(e=>{for(var a="",r=0;r<e.length;r++)a+=t&&"\n"===e[r]?"\n":" ";return a})):e}},38362:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(28267));class s extends i.default{constructor(e){super(),this.isSelectable=e}setSelectable(e){return this.isSelectable=e,this.trigger("update-selectable",e),this.isSelectable}}t.default=s},73664:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(45455)),s=r(a(28267));class n extends s.default{constructor(e=[],t,a="next"){super(),this.list=e,this.index=-1,this.value=void 0,this.getter=t||(e=>e),this.deleteDir=a}init(e=[],t=!1){var a,r,s=t;if(this.list=e,this.value)if((0,i.default)(e))this.unset();else{if((a=e.indexOf(this.value))>-1){if(a===this.index)return;r=!0,s=!1}else if(!s||this.index<0)a=-1;else{var n="prev"===this.deleteDir?-1:0;a=this.index+n,a=Math.max(a,0),r=(a=Math.min(a,e.length-1))>-1}this.set(a,s,r)}}unset(){var e=this.value;this.value=void 0,this.index=-1,e&&this.trigger(this.getter(e),!1)}reset(e=!0){this.index<0||this.value&&this.trigger(this.getter(this.value),"focus",e)}set(e,t=!0,a=!0){if(this.list.length){var r=Math.min(Math.max(e,-1),this.list.length-1),i=this.value,s=r>-1?this.list[r]:void 0;s?(this.value=s,this.trigger(this.getter(s),t?"focus":"select")):a&&(this.value=void 0),a&&i&&i!==s&&this.trigger(this.getter(i),!1),this.index=r}}getVal(){return this.value}setVal(e,t=!0){var a=this.list.indexOf(e);a>-1?this.set(a,t):(this.unset(),this.value=e)}setFirst(e=!0){(0,i.default)(this.list)||this.set(0,e,!0)}setLast(e=!0){(0,i.default)(this.list)||this.set(this.list.length-1,e,!0)}setPrev(e=!0){(0,i.default)(this.list)||this.set(this.prev(),e,!0)}setNext(e=!0){(0,i.default)(this.list)||this.set(this.next(),e,!0)}prev(){return(0,i.default)(this.list)||-1===this.index?-1:this.index-1}next(){return(0,i.default)(this.list)?-1:Math.min(this.index+1,this.list.length-1)}}var o=n;t.default=o},79953:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=class{constructor(){this.initSessionId()}initSessionId(){this.sessionId=this.newSessionId()}newSessionId(){return this.sessionId=Math.floor(2147483648*Math.random()),this.sessionId}}},74556:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.reconnect=void 0;var s=i(a(17026)),n=r(a(12767));var o=(new class{constructor(){this.isReconnecting=!1,this.reconnectIfDisconnected=()=>{this.isReconnecting||s.default.displayInfo!==s.StreamInfo.OFFLINE||(this.isReconnecting=!0,n.default.poke(),n.default.summary(),setTimeout((()=>this.isReconnecting=!1),3e3))}}}).reconnectIfDisconnected;t.reconnect=o},38727:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.securityUrl=function(){return n.default.build(i.default.SECURITY_LINK,{lg:s.default.getLocale()})};var i=r(a(50935)),s=r(a(17957)),n=r(a(74185))},18388:(e,t)=>{"use strict";function a(e,t){return e[t]}Object.defineProperty(t,"__esModule",{value:!0}),t.getValueFromStylesProp=a,t.getIntFromStylesProp=function(e,t){return parseInt(a(e,t),10)},t.getFloatFromStylesProp=function(e,t){return parseFloat(a(e,t))}},83286:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.getHash=function(e){return(e instanceof m.default?(0,h.opaqueDataToArrayBuffer)(e):(0,u.blobToArrayBuffer)(e)).then((e=>(0,_.default)(e))).catch((t=>{var a={error:"".concat(t),blobSize:e.size,isOpaqueData:e instanceof m.default};__LOG__(3,void 0,void 0,!0)(v(),JSON.stringify(a,null,2)),SEND_LOGS("subtle-crypto-get-hash-error")}))},t.decrypt=g,t.decryptE2EMedia=function(e,t,a,r){var i,s=Promise.resolve().then((()=>{if(!e)throw new d.MediaEncryptionError('decrypt async, missing "type"');if(!(t instanceof ArrayBuffer))throw new d.MediaEncryptionError('decrypt async, missing "payload"');if(!a)throw new d.MediaEncryptionError('decrypt async, missing "mediaKey"');if(i=new f.default.WebcCryptoMedia({webcCryptoType:f.default.WEBC_CRYPTO_TYPE_CODE.DECRYPT,webcCryptoLibrary:f.default.WEBC_CRYPTO_LIBRARY_CODE.WEBCRYPTO,webcCryptoFileSize:t.byteLength}),t.byteLength<10)throw new d.MediaEncryptionError("ciphertext too short: ".concat(t.byteLength));return(0,l.default)(e,a).then((({iv:a,encKey:i,macKey:s})=>{var n=t.byteLength-10,o=new Uint8Array(t,n),l=new Uint8Array(t,0,n);return g(new Uint8Array(i),new Uint8Array(a),l,new Uint8Array(s),o,r||(t=>(0,p.getMediaMimeType)(e,t)))}))})).tap((e=>{e.autoreleaseWhenPromiseCompletes(s),i.markWebcCryptoElapsedT(),i.commit()})).catchConditional((e=>!(e instanceof d.MediaEncryptionError)),(e=>{var t=e instanceof Error?"encryption error: ".concat(String(e),"; stack: ").concat(e.stack):"encryption error: ".concat(String(e),";");throw new d.MediaEncryptionError(t)}));return s};var s=i(a(19976)),n=a(46378),o=a(9729),l=i(a(6698)),d=r(a(96452)),u=a(99888),c=i(a(36398)),h=a(82982),f=i(a(40210)),p=a(41501),m=i(a(25012)),_=i(a(40571));function v(){var e=(0,s.default)(["SubtleCrypto::getHash error. Debug:\n",""],["SubtleCrypto::getHash error. Debug:\\n",""]);return v=function(){return e},e}function g(e,t,a,r,i,s){return Promise.resolve().then((()=>{if(!(10<=i.length&&i.length<=32))throw new d.MediaEncryptionError("Given bad expected hmac");var s=n.Binary.build(t,a).readByteArray();return new c.default(r).sign(s).then((t=>{for(var a=new Uint8Array(t,0,i.length),r=!1,n=0;n<a.length;n++)a[n]!==i[n]&&(r=!0);if(r)throw new d.MediaEncryptionError("hmac check failure");return(0,o.aesCbcDecrypt)(e,s)}))})).then((e=>{var t="string"==typeof s?s:s(new Uint8Array(e));return m.default.createFromData(e,t)}))}},25270:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TLD=void 0;t.TLD="abb|abbott|abc|abudhabi|ac|academy|accountants|actor|ad|adult|ae|aero|af|afl|africa|ag|agency|ai|aig|al|am|anz|ao|app|apple|ar|archi|army|art|as|asia|associates|at|attorney|au|auction|audio|auto|aw|aws|ax|az|ba|baby|band|bank|bar|barcelona|barclays|bargains|basketball|bayern|bb|bd|be|beauty|beer|berlin|best|bet|bf|bg|bh|bi|bible|bid|bike|bingo|bio|biz|bj|black|blog|blue|bm|bn|bnpparibas|bo|bond|bot|boutique|box|br|bradesco|brother|brussels|bs|bt|bugatti|build|builders|business|buzz|bw|by|bz|bzh|ca|cab|cafe|cam|camera|camp|canon|capetown|capital|car|cards|care|careers|cars|casa|cash|casino|cat|catering|cba|cbs|cc|cd|center|ceo|cern|cf|cfa|cg|ch|charity|chat|cheap|chrome|church|ci|city|cl|claims|cleaning|click|clinic|clothing|cloud|club|cm|cn|co|coach|codes|coffee|college|com|community|company|computer|construction|consulting|cooking|cool|coop|country|coupons|courses|cpa|cr|credit|cricket|crs|cu|cv|cw|cx|cy|cymru|cyou|cz|dance|date|dating|de|deals|delivery|democrat|dental|desi|design|dev|dhl|diamonds|diet|digital|direct|directory|discount|dj|dk|dm|do|doctor|dog|domains|download|dz|earth|ec|eco|edeka|edu|education|ee|eg|email|energy|engineering|enterprises|es|estate|et|eu|eus|events|exchange|expert|exposed|express|fail|faith|family|fan|fans|farm|fashion|fi|film|finance|financial|fish|fit|fitness|fj|flowers|fm|fo|football|forex|forsale|foundation|fox|fr|fun|fund|furniture|futbol|fyi|ga|gal|gallery|game|games|garden|gb|gd|gdn|ge|gf|gg|gh|gi|gift|gifts|gives|gl|glass|gle|global|gm|gmbh|gn|gold|golf|goog|google|gov|gq|gr|graphics|gratis|green|group|gs|gt|guide|guru|gw|gy|haus|health|healthcare|help|hitachi|hk|hn|hockey|holdings|holiday|homes|honda|horse|hospital|host|hosting|hot|house|how|hr|ht|hu|icu|id|ie|il|im|immo|in|inc|industries|info|ink|institute|insure|int|international|investments|io|iq|ir|irish|is|ismaili|ist|istanbul|it|je|jewelry|jll|jm|jo|jobs|joburg|jp|ke|kg|kh|ki|kim|kitchen|kiwi|kn|kp|kpmg|kr|krd|kred|kw|ky|kz|la|land|lat|law|lawyer|lb|lc|leclerc|legal|lgbt|li|life|lighting|limited|link|live|lk|llc|loan|loans|lol|london|love|lr|ls|lt|ltd|ltda|lu|lundbeck|luxe|luxury|lv|ly|ma|madrid|management|market|marketing|markets|mba|mc|md|me|med|media|melbourne|men|menu|mg|miami|mil|mk|ml|mm|mn|mo|mobi|moda|moe|mom|monash|money|monster|mortgage|moscow|movie|mp|mr|ms|mt|mu|museum|mv|mw|mx|my|mz|na|name|nc|ne|net|network|neustar|news|nf|ng|ngo|ni|nico|ninja|nl|no|np|nr|nrw|ntt|nu|nyc|nz|observer|okinawa|om|one|ong|onl|online|ooo|orange|org|organic|ovh|pa|page|paris|partners|parts|party|pe|pet|pf|pg|ph|pharmacy|photo|photography|photos|physio|pics|pictures|pink|pizza|pk|pl|place|plus|pm|pn|poker|porn|post|pr|press|pro|productions|promo|properties|ps|pt|pub|pw|py|qa|quebec|racing|radio|re|realestate|realtor|recipes|red|rehab|ren|rent|rentals|repair|report|rest|restaurant|review|reviews|rich|rip|ro|rocks|rodeo|rs|ru|rugby|run|rw|rwe|sa|sale|salon|sandvik|sap|saxo|sb|sbi|sc|scb|schmidt|school|science|scot|sd|se|security|sener|services|ses|sex|sexy|sg|sh|sharp|shell|shiksha|shoes|shop|shopping|show|si|singles|site|sk|ski|sl|sm|smart|sn|sncf|so|social|software|solar|solutions|sony|soy|space|sport|spot|sr|ss|st|statebank|stockholm|storage|store|stream|studio|study|style|su|sucks|supply|support|surf|sv|swiss|sx|sy|sydney|systems|sz|taipei|tatar|tattoo|tax|taxi|tc|td|team|tech|technology|tel|tennis|tf|tg|th|tips|tj|tk|tl|tm|tn|to|today|tokyo|tools|top|total|tours|town|toyota|toys|tr|trade|trading|training|travel|tt|tube|tv|tw|tz|ua|ug|uk|university|uno|us|uy|uz|va|vanguard|vc|ve|vegas|ventures|vet|vg|vi|viajes|video|villas|vin|vip|vision|vn|vote|voyage|vu|wales|wang|watch|webcam|website|wedding|weir|wf|wiki|win|wine|work|works|world|ws|wtf|xyz|yandex|ye|yoga|youtube|yt|za|zip|zm|zone|zw|бел|дети|москва|онлайн|орг|рус|рф|сайт|укр|קום|भारत|বাংলা|コム|한국"},84990:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.vcardGetDate=function(e){var t=e;return(0,l.default)([/-([^-]*)-([^-]*)-([^-]*)/,/([^-]*)-([^-]*)-([^-]*)/],(a=>{var r=e.match(a);if(r){var i=!r[1].length||"1604"===r[1],s=i?"0000":r[1];return t=(0,c.default)("".concat(s,"-").concat(r[2],"-").concat(r[3])).format("l"),i&&(t=t.replace(/[.,-\/\s]*0000[.,-\/\s]*/,"")),!1}})),t},t.vcardGetOrganizationString=function(e){var t=e.ORG&&e.ORG[0],a=e.TITLE&&e.TITLE[0];if(t&&Array.isArray(t.value)&&t.value.length>0){var r=null;a&&a.value&&(r="".concat(a.value).trim());var[i,...s]=t.value;s.push(i);var n=s.map((e=>(0,p.isString)(e)?e.trim():"")).filter((e=>e.length)).join(h.default.t(594));return(r||"")+(r&&r.length&&n.length?" - ":"")+n}return""},t.vcardGetType=function(e){var t={jabber:h.default.t(1407),"skype-username":h.default.t(1412),skype:h.default.t(1412),msn:h.default.t(1409),aim:h.default.t(1397),yahoo:h.default.t(1415),icq:h.default.t(1405),"wa-biz-description":h.default.t(1399),[C]:h.default.t(1400)},a=e.properties["X-ABLabel"]||t[e.type.toLowerCase()];if(a)return function(e){if(!e)return;return e.replace(/^_\$!<([^>]*)>!\$_$/,"$1").replace(/\\,/,",").replace(/\\;/,";").replace(/\\\\/,"\\")}(a);var r={TEL:[[["cell"],h.default.t(1401)],[["iphone"],h.default.t(1406)],[["main"],h.default.t(1408)],[["home","fax"],h.default.t(1404)],[["work","fax"],h.default.t(1414)],[["home"],h.default.t(1403)],[["work"],h.default.t(1413)],[["pager"],h.default.t(1411)],[[],h.default.t(1403)]],EMAIL:[[["home"],h.default.t(1403)],[["work"],h.default.t(1413)],[["internet"],h.default.t(1402)]],URL:[[["home"],h.default.t(1403)],[["work"],h.default.t(1413)]],ADR:[[["home"],h.default.t(1403)],[["work"],h.default.t(1413)]]};return a=e.type,(0,u.default)(r,(t=>{if(t){var[r,i]=t;if(0===(0,o.default)(r,(0,n.default)(e.properties.type,(e=>e.toLowerCase()))).length)return a=i,!1}})),a},t.vcardWids=function(e){var t=[];e&&e.TEL&&e.TEL.forEach((e=>{e.properties&&e.properties.waid&&e.properties.waid.length>0&&(t=t.concat((0,n.default)(e.properties.waid,v.createUserWid)))}));return t},t.parseVcard=A,t.vcardSerialize=function(e){return e.map((function(e){return e.line.replace(/(.{75,75})/g,"$1\n ").replace(/\n^-$/gm,"")})).join("\n")},t.vcardThumbnail=function(e){if(!e)return;var{PHOTO:t}=e;if(t&&t[0]&&m.default.isData(t[0].value))return t[0].value},t.vcardGetName=I,t.vcardGetNameFromParsed=function(e){var t=null,{FN:a,NICKNAME:r,TEL:i}=e;if(a&&a[0])t=a[0].value;else if(r&&r[0])t=r[0].value;else if(i&&i[0]){var s,n=i[0],o=null===(s=n.properties.waid)||void 0===s?void 0:s[0];t=o?(0,_.default)(o):n.value}return t},t.vcardFromContactModel=function(e){var t,a=P(e.formattedName),r=["BEGIN:VCARD","VERSION:3.0","N:".concat(I(e)),"FN:".concat(a),"TEL;type=CELL;waid=".concat(String(e.userid),":").concat((0,_.default)(e.userid)),e.isBusiness?"X-WA-BIZ-NAME:".concat(a):null,(null===(t=e.businessProfile)||void 0===t?void 0:t.description)?"X-WA-BIZ-DESCRIPTION:".concat(P(e.businessProfile.description)):null,"END:VCARD"].filter(Boolean);return{displayName:a,vcard:r.join("\n"),isMultiVcard:!1}},t.getNameString=O,t.getNameStringFromNames=N,t.mergeVcards=function(e){if(0===e.length)throw new Error("No vcards provided");return 1===e.length?e[0]:{displayName:O(e),vcard:e.map((e=>e.vcard)).join("\n"),isMultiVcard:!0}},t.parseMultiVcard=function(e){var t=e.match(/BEGIN:VCARD([\s\S]*?)END:VCARD/g);return t?t.map((e=>A(e))).filter(Boolean):[]},t.vcardIsBiz=function(e){return(e.SERVICE||[]).some((e=>e.type.toLowerCase()===C&&e.value))},t.Field=void 0;var i=r(a(19976)),s=r(a(90882)),n=r(a(16760)),o=r(a(17335)),l=r(a(59756)),d=r(a(829)),u=r(a(15253)),c=r(a(19034)),h=r(a(17957)),f=r(a(61941)),p=a(11419),m=r(a(74185)),_=r(a(3111)),v=a(75637);function g(){var e=(0,i.default)(["vcard:parse failed because the vCard is not formatted as expected:\nHeader as expected? ","\nVersion as expected? ","\nFooter as expected? ","\nLines: ",""]);return g=function(){return e},e}var E=/X-([^;:]+)(?:;[^:]+)*:(.+)/,y={"X-ABLabel":[/X-ABLabel(?:;([^:]+))*:(.+)/,1],ADR:[/ADR(?:;([^:]+))*:;;(.*);(.*);(.*);(.*);(.*)/,5],"X-ABADR":[/X-ABADR(?:;([^:]+))*:(.*)/,1],URL:[/URL(?:;([^:]+))*:(.*)/,1],EMAIL:[/EMAIL(?:;([^:]+))*:(.+)/,1],TEL:[/TEL(?:;([^:]+))*:(.+)/,1]},S={N:[/N(?:;([^:]+))*:([^;]*);([^;]*);([^;]*);([^;]*);(.*)/,5],FN:[/FN(?:;([^:]+))*:(.*)/,1],NICKNAME:[/NICKNAME(?:;([^:]+))*:(.*)/,1],"X-PHONETIC-FIRST-NAME":[/X-PHONETIC-FIRST-NAME(?:;([^:]+))*:(.*)/,1],"X-PHONETIC-LAST-NAME":[/X-PHONETIC-LAST-NAME(?:;([^:]+))*:(.*)/,1],ORG:[/ORG(?:;([^:]+))*:([^;]*)(?:;(.*))*/,2],TITLE:[/TITLE(?:;([^:]+))*:(.*)/,1],TEL:[/TEL(?:;([^:]+))*:(.*)/,1],PHOTO:[/PHOTO(?:;([^:]+))*:(.*)/,1],BDAY:[/BDAY(?:;([^:]+))*:(.*)/,1],URL:[/URL(?:;([^:]+))*:(.+)/,1],EMAIL:[/EMAIL(?:;([^:]+))*:(.+)/,1]},C="wa-biz-name";class T{constructor(e,t,a,r){this.type=e,this.index=t,this.properties=a||{},this.value=r}}function M(e,t,a){e[t]||(e[t]=[]),e[t].push(a)}function b(e){var t={};return e?(e.split(";").forEach((e=>{var a=e.split(/=/);if(1===a.length){var r=a[0];M(t,r.toLowerCase(),!0)}else if(2===a.length){var[i,s]=a;M(t,i.toLowerCase(),s.toLowerCase())}})),t):t}function P(e){return e?e.replace(/\\/g,"\\\\").replace(/;/g,"\\;").replace(/,/g,"\\,"):""}function A(e){var t=e.replace(/\r?\n|\r/g,"\n").replace(/\n^[ \t]/gm,"").split("\n").filter((e=>0!==e.trim().length)),a={},r={};if(!(t.length<3)){var i=t[0].trim().toUpperCase(),s=t[1].trim().toUpperCase(),n=t[t.length-1].trim().toUpperCase(),o="VERSION:2.1"===s||"VERSION:3.0"===s||"VERSION:4.0"===s;if("BEGIN:VCARD"!==i||!o||"END:VCARD"!==n)return __LOG__(4,void 0,new Error,!0)(g(),String("BEGIN:VCARD"===i),String(o),String("END:VCARD"===n),t.length),void SEND_LOGS("vcard-fault");for(var l=2;l<t.length-1;l++){var c=t[l],h=c.match(/item(\d+)\.(.*)/),m=h?h[2]:c,_=(0,f.default)(m.match(/([^:;]*)[:;].*/),"field.match(/([^:;]*)[:;].*/)")[1],v=h?y:S,C=_,P=_,A=void 0,I=void 0;if(v[C]){var[O,N]=v[C],w=m.match(O);w&&(A=b(w[1]),I=1===N?I=w[2]:w.slice(2,2+N))}else{var D=m.match(E);D&&(P="SERVICE",C=D[1],I=D[2],A={})}if((Array.isArray(I)?I:[I]).some((e=>e&&(0,p.isString)(e)&&e.trim())))if(h){var R=h[1];r[R]?r[R].fields.push(new T(C,null,A,I)):r[R]={type:C,index:l,key:P,properties:A,value:I,fields:[]}}else M(a,P,new T(C,l,A,I))}return Object.keys(r).forEach((e=>{var{key:t,index:i,type:s,value:n,properties:o,fields:l}=r[e];l.forEach((e=>{o[e.type]=e.value})),M(a,t,new T(s,i,o,n))})),function(e){var t={};return(0,u.default)(e,((e,a)=>{t[a]=(0,d.default)(e,(e=>e.index))})),t}(a)}}function I(e){var t=(0,s.default)(e.formattedName.split(e.formattedShortName)),a=t.length?t[0].trim():void 0,r=a?e.formattedShortName:e.formattedName;return"".concat(P(a),";").concat(P(r),";;;")}function O(e){return N(e.map((e=>e.displayName)))}function N(e){var t=e.find((e=>!!e));return e.length?t?1===e.length?t:h.default.t(990,{contactName:t,count:e.length-1,_plural:e.length-1}):h.default.t(992,{count:e.length,_plural:e.length}):h.default.t(991)}t.Field=T},42279:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){switch(e){case i.default.VERIFIED_LEVEL.HIGH:return"high";case i.default.VERIFIED_LEVEL.LOW:return"low";case i.default.VERIFIED_LEVEL.UNKNOWN:default:return"unknown"}};var i=r(a(50935))},91658:(e,t,a)=>{"use strict";var r=a(14859);t.D=function({action:e,message:t}){switch(e){case n.default.REQUEST_STREAMING_INFO:return function(e){var t=d.default.get(e);return t?(0,o.videoStreamingInfo)(t):null}(t.key);case n.default.EXP_BACKOFF:return a(82885).expDelaySec(t.generation,60).then((()=>u.default.waitIfOffline({signal:(new s.default).signal})));case n.default.REQUEST_RMR:return function(e){var t=d.default.get(e.key);return t?t.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:l.default.WEBC_RMR_REASON_CODE.VIDEO_STREAMING,isUserInitiated:!0}).then((()=>Promise.reject("downloaded media instead of streaming"))):null}(t);case n.default.SEND_STREAMING_CHUNK:var r,i=t.msgKey,c=d.default.get(i);if(!c)return void delete f[i.toString()];f.hasOwnProperty(i)?r=f[i.toString()]:f[i.toString()]=r=new h(c.size),r.push(t.data),r.isComplete()&&((0,o.manuallySetMedia)({msg:c,media:r.serialize(),rmrReason:l.default.WEBC_RMR_REASON_CODE.VIDEO_STREAMING}),delete f[i.toString()]);break;default:return Promise.reject("Invalid Video Streaming Action")}};var i=r(a(19976)),s=r(a(12489)),n=r(a(99215)),o=a(28278),l=r(a(40210)),d=r(a(58885)),u=r(a(99911));function c(){var e=(0,i.default)(["video buffer falsy size: ",""]);return c=function(){return e},e}class h{constructor(e){this.ranges=[],this.buffer=[],this.size=e,e||__LOG__(3)(c(),e)}push(e){this.buffer.push(e),this.add(e.start,e.end)}add(e,t){for(var a=e,r=this.ranges,i=0;i<r.length;i++){var[s,n]=r[i];if(!(a>n+1)){if(t+1<s)return r.splice(i,0,[a,t]);for(;i+1<r.length;){var[o,l]=r[i+1];if(t+1<o)break;a=Math.min(a,s),r.splice(i,1),s=o,n=l}return void(r[i]=[Math.min(a,s),Math.max(t,n)])}}return r.push([a,t])}isComplete(){var e=this.ranges,t=this.size;return!!t&&(1===e.length&&0===e[0][0]&&e[0][1]===t-1)}serialize(){for(var e=new Uint8Array(this.size),t=this.buffer,a=0;a<t.length;a++){var{start:r,buffer:i}=t[a];e.set(new Uint8Array(i),r)}return e}}var f={}},92840:(e,t)=>{"use strict";t.Z=void 0;t.Z={SMILEYS_PEOPLE:["😀","😃","😄","😁","😆","😅","😂","🤣","🥲","☺️","😊","😇","🙂","🙃","😉","😌","😍","🥰","😘","😗","😙","😚","😋","😛","😝","😜","🤪","🤨","🧐","🤓","😎","🥸","🤩","🥳","😏","😒","😞","😔","😟","😕","🙁","☹️","😣","😖","😫","😩","🥺","😢","😭","😤","😠","😡","🤬","🤯","😳","🥵","🥶","😱","😨","😰","😥","😓","🤗","🤔","🤭","🤫","🤥","😶","😐","😑","😬","🙄","😯","😦","😧","😮","😲","🥱","😴","🤤","😪","😵","🤐","🥴","🤢","🤮","🤧","😷","🤒","🤕","🤑","🤠","😈","👿","👹","👺","🤡","💩","👻","💀","☠️","👽","👾","🤖","🎃","😺","😸","😹","😻","😼","😽","🙀","😿","😾","🤲","👐","🙌","👏","🤝","👍","👎","👊","✊","🤛","🤜","🤞","✌️","🤟","🤘","👌","🤌","🤏","👈","👉","👆","👇","☝️","✋","🤚","🖐️","🖖","👋","🤙","💪","🦾","🖕","✍️","🙏","🦶","🦵","🦿","💄","💋","👄","🦷","👅","👂","🦻","👃","👣","👁️","👀","🫀","🫁","🧠","🗣️","👤","👥","🫂","👶","👧","🧒","👦","👩","🧑","👨","👩‍🦱","🧑‍🦱","👨‍🦱","👩‍🦰","🧑‍🦰","👨‍🦰","👱‍♀️","👱‍♂️","👩‍🦳","🧑‍🦳","👨‍🦳","👩‍🦲","🧑‍🦲","👨‍🦲","🧔","👵","🧓","👴","👲","👳‍♀️","👳‍♂️","🧕","👮‍♀️","👮‍♂️","👷‍♀️","👷‍♂️","💂‍♀️","💂‍♂️","🕵️‍♀️","🕵️‍♂️","👩‍⚕️","🧑‍⚕️","👨‍⚕️","👩‍🌾","🧑‍🌾","👨‍🌾","👩‍🍳","🧑‍🍳","👨‍🍳","👩‍🎓","🧑‍🎓","👨‍🎓","👩‍🎤","🧑‍🎤","👨‍🎤","👩‍🏫","🧑‍🏫","👨‍🏫","👩‍🏭","🧑‍🏭","👨‍🏭","👩‍💻","🧑‍💻","👨‍💻","👩‍💼","🧑‍💼","👨‍💼","👩‍🔧","🧑‍🔧","👨‍🔧","👩‍🔬","🧑‍🔬","👨‍🔬","👩‍🎨","🧑‍🎨","👨‍🎨","👩‍🚒","🧑‍🚒","👨‍🚒","👩‍✈️","🧑‍✈️","👨‍✈️","👩‍🚀","🧑‍🚀","👨‍🚀","👩‍⚖️","🧑‍⚖️","👨‍⚖️","👰‍♀️","👰","👰‍♂️","🤵‍♀️","🤵","🤵‍♂️","👸","🤴","🥷","🦸‍♀️","🦸‍♂️","🦹‍♀️","🦹‍♂️","🤶","🧑‍🎄","🎅","🧙‍♀️","🧙‍♂️","🧝‍♀️","🧝‍♂️","🧛‍♀️","🧛‍♂️","🧟‍♀️","🧟‍♂️","🧞‍♀️","🧞‍♂️","🧜‍♀️","🧜‍♂️","🧚‍♀️","🧚‍♂️","👼","🤰","🤱","👩‍🍼","🧑‍🍼","👨‍🍼","🙇‍♀️","🙇‍♂️","💁‍♀️","💁‍♂️","🙅‍♀️","🙅‍♂️","🙆‍♀️","🙆‍♂️","🙋‍♀️","🙋‍♂️","🧏‍♀️","🧏","🧏‍♂️","🤦‍♀️","🤦‍♂️","🤷‍♀️","🤷‍♂️","🙎‍♀️","🙎‍♂️","🙍‍♀️","🙍‍♂️","💇‍♀️","💇‍♂️","💆‍♀️","💆‍♂️","🧖‍♀️","🧖","🧖‍♂️","💅","🤳","💃","🕺","👯‍♀️","👯‍♂️","🕴️","👩‍🦽","🧑‍🦽","👨‍🦽","👩‍🦼","🧑‍🦼","👨‍🦼","🚶‍♀️","🚶","🚶‍♂️","👩‍🦯","🧑‍🦯","👨‍🦯","🧎‍♀️","🧎","🧎‍♂️","🏃‍♀️","🏃","🏃‍♂️","🧍‍♀️","🧍","🧍‍♂️","👫","👭","👬","👩‍❤️‍👨","👩‍❤️‍👩","👨‍❤️‍👨","👩‍❤️‍💋‍👨","👩‍❤️‍💋‍👩","👨‍❤️‍💋‍👨","👨‍👩‍👦","👨‍👩‍👧","👨‍👩‍👧‍👦","👨‍👩‍👦‍👦","👨‍👩‍👧‍👧","👩‍👩‍👦","👩‍👩‍👧","👩‍👩‍👧‍👦","👩‍👩‍👦‍👦","👩‍👩‍👧‍👧","👨‍👨‍👦","👨‍👨‍👧","👨‍👨‍👧‍👦","👨‍👨‍👦‍👦","👨‍👨‍👧‍👧","👩‍👦","👩‍👧","👩‍👧‍👦","👩‍👦‍👦","👩‍👧‍👧","👨‍👦","👨‍👧","👨‍👧‍👦","👨‍👦‍👦","👨‍👧‍👧","🪢","🧶","🧵","🪡","🧥","🥼","🦺","👚","👕","👖","🩲","🩳","👔","👗","👙","🩱","👘","🥻","🩴","🥿","👠","👡","👢","👞","👟","🥾","🧦","🧤","🧣","🎩","🧢","👒","🎓","⛑️","🪖","👑","💍","👝","👛","👜","💼","🎒","🧳","👓","🕶️","🥽","🌂"],ANIMALS_NATURE:["🐶","🐱","🐭","🐹","🐰","🦊","🐻","🐼","🐻‍❄️","🐨","🐯","🦁","🐮","🐷","🐽","🐸","🐵","🙈","🙉","🙊","🐒","🐔","🐧","🐦","🐤","🐣","🐥","🦆","🦅","🦉","🦇","🐺","🐗","🐴","🦄","🐝","🪱","🐛","🦋","🐌","🐞","🐜","🪰","🪲","🪳","🦟","🦗","🕷️","🕸️","🦂","🐢","🐍","🦎","🦖","🦕","🐙","🦑","🦐","🦞","🦀","🐡","🐠","🐟","🐬","🐳","🐋","🦈","🦭","🐊","🐅","🐆","🦓","🦍","🦧","🦣","🐘","🦛","🦏","🐪","🐫","🦒","🦘","🦬","🐃","🐂","🐄","🐎","🐖","🐏","🐑","🦙","🐐","🦌","🐕","🐩","🦮","🐕‍🦺","🐈","🐈‍⬛","🪶","🐓","🦃","🦤","🦚","🦜","🦢","🦩","🕊️","🐇","🦝","🦨","🦡","🦫","🦦","🦥","🐁","🐀","🐿️","🦔","🐾","🐉","🐲","🌵","🎄","🌲","🌳","🌴","🪵","🌱","🌿","☘️","🍀","🎍","🪴","🎋","🍃","🍂","🍁","🍄","🐚","🪨","🌾","💐","🌷","🌹","🥀","🌺","🌸","🌼","🌻","🌞","🌝","🌛","🌜","🌚","🌕","🌖","🌗","🌘","🌑","🌒","🌓","🌔","🌙","🌎","🌍","🌏","🪐","💫","⭐","🌟","✨","⚡","☄️","💥","🔥","🌪️","🌈","☀️","🌤️","⛅","🌥️","☁️","🌦️","🌧️","⛈️","🌩️","🌨️","❄️","☃️","⛄","🌬️","💨","💧","💦","☔","☂️","🌊","🌫️"],FOOD_DRINK:["🍏","🍎","🍐","🍊","🍋","🍌","🍉","🍇","🍓","🫐","🍈","🍒","🍑","🥭","🍍","🥥","🥝","🍅","🍆","🥑","🥦","🥬","🥒","🌶️","🫑","🌽","🥕","🫒","🧄","🧅","🥔","🍠","🥐","🥯","🍞","🥖","🥨","🧀","🥚","🍳","🧈","🥞","🧇","🥓","🥩","🍗","🍖","🦴","🌭","🍔","🍟","🍕","🫓","🥪","🥙","🧆","🌮","🌯","🫔","🥗","🥘","🫕","🥫","🍝","🍜","🍲","🍛","🍣","🍱","🥟","🦪","🍤","🍙","🍚","🍘","🍥","🥠","🥮","🍢","🍡","🍧","🍨","🍦","🥧","🧁","🍰","🎂","🍮","🍭","🍬","🍫","🍿","🍩","🍪","🌰","🥜","🍯","🥛","🍼","🫖","☕","🍵","🧃","🥤","🧋","🍶","🍺","🍻","🥂","🍷","🥃","🍸","🍹","🧉","🍾","🧊","🥄","🍴","🍽️","🥣","🥡","🥢","🧂"],ACTIVITY:["⚽","🏀","🏈","⚾","🥎","🎾","🏐","🏉","🥏","🎱","🪀","🏓","🏸","🏒","🏑","🥍","🏏","🪃","🥅","⛳","🪁","🏹","🎣","🤿","🥊","🥋","🎽","🛹","🛼","🛷","⛸️","🥌","🎿","⛷️","🏂","🪂","🏋️‍♀️","🏋️‍♂️","🤼‍♀️","🤼‍♂️","🤸‍♀️","🤸","🤸‍♂️","⛹️‍♀️","⛹️","⛹️‍♂️","🤺","🤾‍♀️","🤾","🤾‍♂️","🏌️‍♀️","🏌️","🏌️‍♂️","🏇","🧘‍♀️","🧘","🧘‍♂️","🏄‍♀️","🏄","🏄‍♂️","🏊‍♀️","🏊","🏊‍♂️","🤽‍♀️","🤽","🤽‍♂️","🚣‍♀️","🚣","🚣‍♂️","🧗‍♀️","🧗","🧗‍♂️","🚵‍♀️","🚵","🚵‍♂️","🚴‍♀️","🚴","🚴‍♂️","🏆","🥇","🥈","🥉","🏅","🎖️","🏵️","🎗️","🎫","🎟️","🎪","🤹‍♀️","🤹‍♂️","🎭","🩰","🎨","🎬","🎤","🎧","🎼","🎹","🥁","🪘","🎷","🎺","🪗","🎸","🪕","🎻","🎲","♟️","🎯","🎳","🎮","🎰","🧩"],TRAVEL_PLACES:["🚗","🚕","🚙","🚌","🚎","🏎️","🚓","🚑","🚒","🚐","🛻","🚚","🚛","🚜","🦯","🦽","🦼","🛴","🚲","🛵","🏍️","🛺","🚨","🚔","🚍","🚘","🚖","🚡","🚠","🚟","🚃","🚋","🚞","🚝","🚄","🚅","🚈","🚂","🚆","🚇","🚊","🚉","✈️","🛫","🛬","🛩️","💺","🛰️","🚀","🛸","🚁","🛶","⛵","🚤","🛥️","🛳️","⛴️","🚢","⚓","🪝","⛽","🚧","🚦","🚥","🚏","🗺️","🗿","🗽","🗼","🏰","🏯","🏟️","🎡","🎢","🎠","⛲","⛱️","🏖️","🏝️","🏜️","🌋","⛰️","🏔️","🗻","🏕️","⛺","🛖","🏠","🏡","🏘️","🏚️","🏗️","🏭","🏢","🏬","🏣","🏤","🏥","🏦","🏨","🏪","🏫","🏩","💒","🏛️","⛪","🕌","🕍","🛕","🕋","⛩️","🛤️","🛣️","🗾","🎑","🏞️","🌅","🌄","🌠","🎇","🎆","🌇","🌆","🏙️","🌃","🌌","🌉","🌁"],OBJECTS:["⌚","📱","📲","💻","⌨️","🖥️","🖨️","🖱️","🖲️","🕹️","🗜️","💽","💾","💿","📀","📼","📷","📸","📹","🎥","📽️","🎞️","📞","☎️","📟","📠","📺","📻","🎙️","🎚️","🎛️","🧭","⏱️","⏲️","⏰","🕰️","⌛","⏳","📡","🔋","🔌","💡","🔦","🕯️","🪔","🧯","🛢️","💸","💵","💴","💶","💷","🪙","💰","💳","💎","⚖️","🪜","🧰","🪛","🔧","🔨","⚒️","🛠️","⛏️","🪚","🔩","⚙️","🪤","🧱","⛓️","🧲","🔫","💣","🧨","🪓","🔪","🗡️","⚔️","🛡️","🚬","⚰️","🪦","⚱️","🏺","🔮","📿","🧿","💈","⚗️","🔭","🔬","🕳️","🩹","🩺","💊","💉","🩸","🧬","🦠","🧫","🧪","🌡️","🧹","🪠","🧺","🧻","🚽","🚰","🚿","🛁","🛀","🧼","🪥","🪒","🧽","🪣","🧴","🛎️","🔑","🗝️","🚪","🪑","🛋️","🛏️","🛌","🧸","🪆","🖼️","🪞","🪟","🛍️","🛒","🎁","🎈","🎏","🎀","🪄","🪅","🎊","🎉","🎎","🏮","🎐","🧧","✉️","📩","📨","📧","💌","📥","📤","📦","🏷️","🪧","📪","📫","📬","📭","📮","📯","📜","📃","📄","📑","🧾","📊","📈","📉","🗒️","🗓️","📆","📅","🗑️","📇","🗃️","🗳️","🗄️","📋","📁","📂","🗂️","🗞️","📰","📓","📔","📒","📕","📗","📘","📙","📚","📖","🔖","🧷","🔗","📎","🖇️","📐","📏","🧮","📌","📍","✂️","🖊️","🖋️","✒️","🖌️","🖍️","📝","✏️","🔍","🔎","🔏","🔐","🔒","🔓"],SYMBOLS:["❤️","🧡","💛","💚","💙","💜","🖤","🤍","🤎","💔","❣️","💕","💞","💓","💗","💖","💘","💝","💟","☮️","✝️","☪️","🕉️","☸️","✡️","🔯","🕎","☯️","☦️","🛐","⛎","♈","♉","♊","♋","♌","♍","♎","♏","♐","♑","♒","♓","🆔","⚛️","🉑","☢️","☣️","📴","📳","🈶","🈚","🈸","🈺","🈷️","✴️","🆚","💮","🉐","㊙️","㊗️","🈴","🈵","🈹","🈲","🅰️","🅱️","🆎","🆑","🅾️","🆘","❌","⭕","🛑","⛔","📛","🚫","💯","💢","♨️","🚷","🚯","🚳","🚱","🔞","📵","🚭","❗","❕","❓","❔","‼️","⁉️","🔅","🔆","〽️","⚠️","🚸","🔱","⚜️","🔰","♻️","✅","🈯","💹","❇️","✳️","❎","🌐","💠","Ⓜ️","🌀","💤","🏧","🚾","♿","🅿️","🛗","🈳","🈂️","🛂","🛃","🛄","🛅","🚹","🚺","🚼","⚧️","🚻","🚮","🎦","📶","🈁","🔣","ℹ️","🔤","🔡","🔠","🆖","🆗","🆙","🆒","🆕","🆓","0️⃣","1️⃣","2️⃣","3️⃣","4️⃣","5️⃣","6️⃣","7️⃣","8️⃣","9️⃣","🔟","🔢","#️⃣","*️⃣","⏏️","▶️","⏸️","⏯️","⏹️","⏺️","⏭️","⏮️","⏩","⏪","⏫","⏬","◀️","🔼","🔽","➡️","⬅️","⬆️","⬇️","↗️","↘️","↙️","↖️","↕️","↔️","↪️","↩️","⤴️","⤵️","🔀","🔁","🔂","🔄","🔃","🎵","🎶","➕","➖","➗","✖️","♾️","💲","💱","™️","©️","®️","👁️‍🗨️","🔚","🔙","🔛","🔝","🔜","〰️","➰","➿","✔️","☑️","🔘","🔴","🟠","🟡","🟢","🔵","🟣","⚫","⚪","🟤","🔺","🔻","🔸","🔹","🔶","🔷","🔳","🔲","▪️","▫️","◾","◽","◼️","◻️","🟥","🟧","🟨","🟩","🟦","🟪","⬛","⬜","🟫","🔈","🔇","🔉","🔊","🔔","🔕","📣","📢","💬","💭","🗯️","♠️","♣️","♥️","♦️","🃏","🎴","🀄","🕐","🕑","🕒","🕓","🕔","🕕","🕖","🕗","🕘","🕙","🕚","🕛","🕜","🕝","🕞","🕟","🕠","🕡","🕢","🕣","🕤","🕥","🕦","🕧"],FLAGS:["🏳️","🏴","🏴‍☠️","🏁","🚩","🏳️‍🌈","🏳️‍⚧️","🇺🇳","🇦🇫","🇦🇽","🇦🇱","🇩🇿","🇦🇸","🇦🇩","🇦🇴","🇦🇮","🇦🇶","🇦🇬","🇦🇷","🇦🇲","🇦🇼","🇦🇺","🇦🇹","🇦🇿","🇧🇸","🇧🇭","🇧🇩","🇧🇧","🇧🇾","🇧🇪","🇧🇿","🇧🇯","🇧🇲","🇧🇹","🇧🇴","🇧🇦","🇧🇼","🇧🇷","🇮🇴","🇻🇬","🇧🇳","🇧🇬","🇧🇫","🇧🇮","🇰🇭","🇨🇲","🇨🇦","🇮🇨","🇨🇻","🇧🇶","🇰🇾","🇨🇫","🇹🇩","🇨🇱","🇨🇳","🇨🇽","🇨🇨","🇨🇴","🇰🇲","🇨🇬","🇨🇩","🇨🇰","🇨🇷","🇨🇮","🇭🇷","🇨🇺","🇨🇼","🇨🇾","🇨🇿","🇩🇰","🇩🇯","🇩🇲","🇩🇴","🇪🇨","🇪🇬","🇸🇻","🇬🇶","🇪🇷","🇪🇪","🇸🇿","🇪🇹","🇪🇺","🇫🇰","🇫🇴","🇫🇯","🇫🇮","🇫🇷","🇬🇫","🇵🇫","🇹🇫","🇬🇦","🇬🇲","🇬🇪","🇩🇪","🇬🇭","🇬🇮","🇬🇷","🇬🇱","🇬🇩","🇬🇵","🇬🇺","🇬🇹","🇬🇬","🇬🇳","🇬🇼","🇬🇾","🇭🇹","🇭🇳","🇭🇰","🇭🇺","🇮🇸","🇮🇳","🇮🇩","🇮🇷","🇮🇶","🇮🇪","🇮🇲","🇮🇱","🇮🇹","🇯🇲","🇯🇵","🎌","🇯🇪","🇯🇴","🇰🇿","🇰🇪","🇰🇮","🇽🇰","🇰🇼","🇰🇬","🇱🇦","🇱🇻","🇱🇧","🇱🇸","🇱🇷","🇱🇾","🇱🇮","🇱🇹","🇱🇺","🇲🇴","🇲🇬","🇲🇼","🇲🇾","🇲🇻","🇲🇱","🇲🇹","🇲🇭","🇲🇶","🇲🇷","🇲🇺","🇾🇹","🇲🇽","🇫🇲","🇲🇩","🇲🇨","🇲🇳","🇲🇪","🇲🇸","🇲🇦","🇲🇿","🇲🇲","🇳🇦","🇳🇷","🇳🇵","🇳🇱","🇳🇨","🇳🇿","🇳🇮","🇳🇪","🇳🇬","🇳🇺","🇳🇫","🇰🇵","🇲🇰","🇲🇵","🇳🇴","🇴🇲","🇵🇰","🇵🇼","🇵🇸","🇵🇦","🇵🇬","🇵🇾","🇵🇪","🇵🇭","🇵🇳","🇵🇱","🇵🇹","🇵🇷","🇶🇦","🇷🇪","🇷🇴","🇷🇺","🇷🇼","🇼🇸","🇸🇲","🇸🇹","🇸🇦","🇸🇳","🇷🇸","🇸🇨","🇸🇱","🇸🇬","🇸🇽","🇸🇰","🇸🇮","🇬🇸","🇸🇧","🇸🇴","🇿🇦","🇰🇷","🇸🇸","🇪🇸","🇱🇰","🇧🇱","🇸🇭","🇰🇳","🇱🇨","🇵🇲","🇻🇨","🇸🇩","🇸🇷","🇸🇪","🇨🇭","🇸🇾","🇹🇼","🇹🇯","🇹🇿","🇹🇭","🇹🇱","🇹🇬","🇹🇰","🇹🇴","🇹🇹","🇹🇳","🇹🇷","🇹🇲","🇹🇨","🇹🇻","🇻🇮","🇺🇬","🇺🇦","🇦🇪","🇬🇧","🏴󠁧󠁢󠁥󠁮󠁧󠁿","🏴󠁧󠁢󠁳󠁣󠁴󠁿","🏴󠁧󠁢󠁷󠁬󠁳󠁿","🇺🇸","🏴󠁵󠁳󠁴󠁸󠁿","🇺🇾","🇺🇿","🇻🇺","🇻🇦","🇻🇪","🇻🇳","🇼🇫","🇪🇭","🇾🇪","🇿🇲","🇿🇼"]}},16426:(e,t)=>{"use strict";t.Z=void 0;t.Z={"#️⃣":1,"":1,"*️⃣":2,"0️⃣":3,"":3,"1️⃣":4,"":4,"2️⃣":5,"":5,"3️⃣":6,"":6,"4️⃣":7,"":7,"5️⃣":8,"":8,"6️⃣":9,"":9,"7️⃣":10,"":10,"8️⃣":11,"":11,"9️⃣":12,"":12,"":13,"":14,"":17,"":21,"":22,"":23,"":24,"":31,"":32,"":48,"":49,"":54,"":55,"":59,"":61,"":62,"":69,"":79,"":82,"":83,"":84,"":85,"":86,"":87,"":88,"":89,"":90,"":91,"":92,"":93,"":95,"":96,"":97,"":98,"":99,"":102,"":112,"":113,"":119,"":120,"":121,"":124,"":130,"":133,"":134,"":136,"":152,"":153,"":154,"":156,"":158,"":164,"":175,"":188,"":189,"":190,"":193,"":195,"":196,"":197,"":198,"":200,"":204,"":206,"":209,"":210,"":211,"":214,"":215,"":217,"":218,"":219,"":220,"":222,"":223,"":224,"":225,"":226,"":228,"":230,"":231,"":233,"":235,"":236,"":285,"":295,"":308,"":316,"":318,"":352,"":356,"":364,"":433,"":477,"🇺🇲":477,"":495,"":496,"":497,"":498,"":500,"":502,"":503,"":504,"":505,"":506,"":507,"":508,"":510,"":512,"":513,"":514,"":515,"":516,"":517,"":518,"":520,"":535,"":541,"":560,"":561,"":563,"":564,"":565,"":566,"":567,"":570,"":572,"":573,"":574,"":575,"":577,"":578,"":581,"":582,"":586,"":591,"":592,"":596,"":597,"":598,"":599,"":600,"":601,"":602,"":603,"":605,"":606,"":607,"":610,"":611,"":620,"":621,"":622,"":623,"":624,"":625,"":626,"":628,"":630,"":631,"":636,"":637,"":638,"":639,"":640,"":641,"":647,"":648,"":649,"":650,"":653,"":654,"":655,"":656,"":657,"":658,"":659,"":660,"":669,"":670,"":672,"":673,"":674,"":675,"":676,"":677,"":679,"":680,"":683,"":684,"":685,"":689,"":690,"":691,"":692,"":694,"":698,"":699,"":700,"":701,"":703,"":716,"":730,"":737,"":739,"":796,"":798,"":799,"":801,"":802,"":803,"":804,"":805,"":806,"":807,"":808,"":809,"":811,"":812,"🇽🇪":818,"🇽🇸":819,"🇽🇼":820,"🇽🇹":821,"":846,"":847,"":850,"":851,"":853,"":857,"":858,"":859,"":860,"":861,"":865,"":866,"":870,"":872,"":873,"":874,"":877,"":878,"":879,"":880,"":881,"":882,"":883,"":885,"":886,"":887,"":888,"":889,"":890,"":891,"":892,"":893,"":899,"":902,"":908,"":914,"":916,"":922,"":928,"":934,"":940,"":946,"":952,"":958,"":964,"":970,"":976,"":982,"":983,"":985,"":986,"":988,"":989,"":990,"":993,"":996,"":997,"":998,"":999,"":1e3,"":1003,"":1009,"":1015,"":1192,"":1387,"":1459,"":1477,"":1483,"":1489,"":1507,"":1515,"":1516,"":1522,"":1523,"":1524,"":1525,"":1550,"":1556,"":1557,"":1587,"":1588,"":1589,"":1590,"":1592,"":1593,"":1594,"":1595,"":1596,"":1597,"":1598,"":1599,"":1602,"":1603,"":1604,"":1605,"":1606,"":1607,"":1608,"":1610,"":1612,"":1613,"":1614,"":1615,"":1617,"":1619,"":1620,"":1621,"":1632,"":1633,"":1641,"":1642,"":1643,"":1644,"":1645,"":1647,"":1648,"":1670,"":1677,"":1680,"":1681,"":1682,"":1683,"":1689,"":1691,"":1694,"":1697,"":1698,"":1699,"":1700,"":1702,"":1703,"":1706,"":1707,"":1708,"":1721,"":1724,"":1728,"":1729,"":1730,"":1731,"":1740,"":1741,"":1748,"":1751,"":1754,"":1758,"":1759,"":1760,"":1761,"":1762,"":1763,"":1779,"":1780,"":1781,"":1782,"":1783,"":1784,"":1785,"":1786,"":1787,"":1788,"":1789,"":1790,"":1878,"":1879,"":1880,"":1884,"":1885,"":1886,"":1887,"":1892,"":1893,"":1895,"":1896,"":1898,"":1901,"":1902,"":1903,"":1905,"":1907,"":1909,"":1911,"":1912,"":1913,"":1915,"":1916,"":1917,"":1918,"":1920,"":1923,"":1925,"":1928,"":1931,"":1932,"":1933,"":1934,"":1938,"":2003,"":2033,"":2039,"":2042,"":2043,"":2044,"":2046,"":2048,"":2051,"":2054,"":2056,"":2057,"":2058,"":2060,"":2062,"":2064,"":2065,"":2073,"":2087,"":2088,"":2090,"":2095,"":2096,"":2101,"":2129,"":2144,"":2145,"":2146,"":2147,"":2148,"":2149,"":2151,"":1406,"":1417,"":1448,"":1466,"":1496,"":1526,"":1539,"":1563,"":1575,"":1952,"":1964,"":1977}},88877:(e,t)=>{"use strict";t.Z=void 0;t.Z=["","#️⃣","*️⃣","0️⃣","1️⃣","2️⃣","3️⃣","4️⃣","5️⃣","6️⃣","7️⃣","8️⃣","9️⃣","©️","®️","‼️","⁉️","™️","ℹ️","↔️","↕️","↖️","↗️","↘️","↙️","↩️","↪️","⌚","⌛","⌨️","⏏️","⏩","⏪","⏫","⏬","⏭️","⏮️","⏯️","⏰","⏱️","⏲️","⏳","⏸️","⏹️","⏺️","Ⓜ️","▪️","▫️","▶️","◀️","◻️","◼️","◽","◾","☀️","☁️","☂️","☃️","☄️","☎️","☑️","☔","☕","☘️","☝🏻","☝🏼","☝🏽","☝🏾","☝🏿","☝️","☠️","☢️","☣️","☦️","☪️","☮️","☯️","☸️","☹️","☺️","♀️","♂️","♈","♉","♊","♋","♌","♍","♎","♏","♐","♑","♒","♓","♟️","♠️","♣️","♥️","♦️","♨️","♻️","♾️","♿","⚒️","⚓","⚔️","⚕️","⚖️","⚗️","⚙️","⚛️","⚜️","⚠️","⚡","⚧️","⚪","⚫","⚰️","⚱️","⚽","⚾","⛄","⛅","⛈️","⛎","⛏️","⛑️","⛓️","⛔","⛩️","⛪","⛰️","⛱️","⛲","⛳","⛴️","⛵","⛷️","⛸️","⛹🏻‍♀️",["⛹🏻‍♂️","⛹🏻"],"⛹🏼‍♀️",["⛹🏼‍♂️","⛹🏼"],"⛹🏽‍♀️",["⛹🏽‍♂️","⛹🏽"],"⛹🏾‍♀️",["⛹🏾‍♂️","⛹🏾"],"⛹🏿‍♀️",["⛹🏿‍♂️","⛹🏿"],"⛹️","⛹️‍♀️","⛹️‍♂️","⛺","⛽","✂️","✅","✈️","✉️","✊","✊🏻","✊🏼","✊🏽","✊🏾","✊🏿","✋","✋🏻","✋🏼","✋🏽","✋🏾","✋🏿","✌🏻","✌🏼","✌🏽","✌🏾","✌🏿","✌️","✍🏻","✍🏼","✍🏽","✍🏾","✍🏿","✍️","✏️","✒️","✔️","✖️","✝️","✡️","✨","✳️","✴️","❄️","❇️","❌","❎","❓","❔","❕","❗","❣️","❤️","➕","➖","➗","➡️","➰","➿","⤴️","⤵️","⬅️","⬆️","⬇️","⬛","⬜","⭐","⭕","〰️","〽️","㊗️","㊙️","🀄","🃏","🅰️","🅱️","🅾️","🅿️","🆎","🆑","🆒","🆓","🆔","🆕","🆖","🆗","🆘","🆙","🆚","🇦🇨","🇦🇩","🇦🇪","🇦🇫","🇦🇬","🇦🇮","🇦🇱","🇦🇲","🇦🇴","🇦🇶","🇦🇷","🇦🇸","🇦🇹","🇦🇺","🇦🇼","🇦🇽","🇦🇿","🇧🇦","🇧🇧","🇧🇩","🇧🇪","🇧🇫","🇧🇬","🇧🇭","🇧🇮","🇧🇯","🇧🇱","🇧🇲","🇧🇳","🇧🇴","🇧🇶","🇧🇷","🇧🇸","🇧🇹","🇧🇻","🇧🇼","🇧🇾","🇧🇿","🇨🇦","🇨🇨","🇨🇩","🇨🇫","🇨🇬","🇨🇭","🇨🇮","🇨🇰","🇨🇱","🇨🇲","🇨🇳","🇨🇴","🇨🇵","🇨🇷","🇨🇺","🇨🇻","🇨🇼","🇨🇽","🇨🇾","🇨🇿","🇩🇪","🇩🇬","🇩🇯","🇩🇰","🇩🇲","🇩🇴","🇩🇿","🇪🇦","🇪🇨","🇪🇪","🇪🇬","🇪🇭","🇪🇷","🇪🇸","🇪🇹","🇪🇺","🇫🇮","🇫🇯","🇫🇰","🇫🇲","🇫🇴","🇫🇷","🇬🇦","🇬🇧","🇬🇩","🇬🇪","🇬🇫","🇬🇬","🇬🇭","🇬🇮","🇬🇱","🇬🇲","🇬🇳","🇬🇵","🇬🇶","🇬🇷","🇬🇸","🇬🇹","🇬🇺","🇬🇼","🇬🇾","🇭🇰","🇭🇲","🇭🇳","🇭🇷","🇭🇹","🇭🇺","🇮🇨","🇮🇩","🇮🇪","🇮🇱","🇮🇲","🇮🇳","🇮🇴","🇮🇶","🇮🇷","🇮🇸","🇮🇹","🇯🇪","🇯🇲","🇯🇴","🇯🇵","🇰🇪","🇰🇬","🇰🇭","🇰🇮","🇰🇲","🇰🇳","🇰🇵","🇰🇷","🇰🇼","🇰🇾","🇰🇿","🇱🇦","🇱🇧","🇱🇨","🇱🇮","🇱🇰","🇱🇷","🇱🇸","🇱🇹","🇱🇺","🇱🇻","🇱🇾","🇲🇦","🇲🇨","🇲🇩","🇲🇪","🇲🇫","🇲🇬","🇲🇭","🇲🇰","🇲🇱","🇲🇲","🇲🇳","🇲🇴","🇲🇵","🇲🇶","🇲🇷","🇲🇸","🇲🇹","🇲🇺","🇲🇻","🇲🇼","🇲🇽","🇲🇾","🇲🇿","🇳🇦","🇳🇨","🇳🇪","🇳🇫","🇳🇬","🇳🇮","🇳🇱","🇳🇴","🇳🇵","🇳🇷","🇳🇺","🇳🇿","🇴🇲","🇵🇦","🇵🇪","🇵🇫","🇵🇬","🇵🇭","🇵🇰","🇵🇱","🇵🇲","🇵🇳","🇵🇷","🇵🇸","🇵🇹","🇵🇼","🇵🇾","🇶🇦","🇷🇪","🇷🇴","🇷🇸","🇷🇺","🇷🇼","🇸🇦","🇸🇧","🇸🇨","🇸🇩","🇸🇪","🇸🇬","🇸🇭","🇸🇮","🇸🇯","🇸🇰","🇸🇱","🇸🇲","🇸🇳","🇸🇴","🇸🇷","🇸🇸","🇸🇹","🇸🇻","🇸🇽","🇸🇾","🇸🇿","🇹🇦","🇹🇨","🇹🇩","🇹🇫","🇹🇬","🇹🇭","🇹🇯","🇹🇰","🇹🇱","🇹🇲","🇹🇳","🇹🇴","🇹🇷","🇹🇹","🇹🇻","🇹🇼","🇹🇿","🇺🇦","🇺🇬","🇺🇲","🇺🇳","🇺🇸","🇺🇾","🇺🇿","🇻🇦","🇻🇨","🇻🇪","🇻🇬","🇻🇮","🇻🇳","🇻🇺","🇼🇫","🇼🇸","🇽🇰","🇾🇪","🇾🇹","🇿🇦","🇿🇲","🇿🇼","🈁","🈂️","🈚","🈯","🈲","🈳","🈴","🈵","🈶","🈷️","🈸","🈹","🈺","🉐","🉑","🌀","🌁","🌂","🌃","🌄","🌅","🌆","🌇","🌈","🌉","🌊","🌋","🌌","🌍","🌎","🌏","🌐","🌑","🌒","🌓","🌔","🌕","🌖","🌗","🌘","🌙","🌚","🌛","🌜","🌝","🌞","🌟","🌠","🌡️","🌤️","🌥️","🌦️","🌧️","🌨️","🌩️","🌪️","🌫️","🌬️","🌭","🌮","🌯","🌰","🌱","🌲","🌳","🌴","🌵","🌶️","🌷","🌸","🌹","🌺","🌻","🌼","🌽","🌾","🌿","🍀","🍁","🍂","🍃","🍄","🍅","🍆","🍇","🍈","🍉","🍊","🍋","🍌","🍍","🍎","🍏","🍐","🍑","🍒","🍓","🍔","🍕","🍖","🍗","🍘","🍙","🍚","🍛","🍜","🍝","🍞","🍟","🍠","🍡","🍢","🍣","🍤","🍥","🍦","🍧","🍨","🍩","🍪","🍫","🍬","🍭","🍮","🍯","🍰","🍱","🍲","🍳","🍴","🍵","🍶","🍷","🍸","🍹","🍺","🍻","🍼","🍽️","🍾","🍿","🎀","🎁","🎂","🎃","🎄","🎅","🎅🏻","🎅🏼","🎅🏽","🎅🏾","🎅🏿","🎆","🎇","🎈","🎉","🎊","🎋","🎌","🎍","🎎","🎏","🎐","🎑","🎒","🎓","🎖️","🎗️","🎙️","🎚️","🎛️","🎞️","🎟️","🎠","🎡","🎢","🎣","🎤","🎥","🎦","🎧","🎨","🎩","🎪","🎫","🎬","🎭","🎮","🎯","🎰","🎱","🎲","🎳","🎴","🎵","🎶","🎷","🎸","🎹","🎺","🎻","🎼","🎽","🎾","🎿","🏀","🏁","🏂","🏃","🏃‍♀️","🏃‍♂️","🏃🏻‍♀️",["🏃🏻‍♂️","🏃🏻"],"🏃🏼‍♀️",["🏃🏼‍♂️","🏃🏼"],"🏃🏽‍♀️",["🏃🏽‍♂️","🏃🏽"],"🏃🏾‍♀️",["🏃🏾‍♂️","🏃🏾"],"🏃🏿‍♀️",["🏃🏿‍♂️","🏃🏿"],"🏄","🏄‍♀️","🏄‍♂️","🏄🏻‍♀️",["🏄🏻‍♂️","🏄🏻"],"🏄🏼‍♀️",["🏄🏼‍♂️","🏄🏼"],"🏄🏽‍♀️",["🏄🏽‍♂️","🏄🏽"],"🏄🏾‍♀️",["🏄🏾‍♂️","🏄🏾"],"🏄🏿‍♀️",["🏄🏿‍♂️","🏄🏿"],"🏅","🏆","🏇","🏇🏻","🏇🏼","🏇🏽","🏇🏾","🏇🏿","🏈","🏉","🏊","🏊‍♀️","🏊‍♂️","🏊🏻‍♀️",["🏊🏻‍♂️","🏊🏻"],"🏊🏼‍♀️",["🏊🏼‍♂️","🏊🏼"],"🏊🏽‍♀️",["🏊🏽‍♂️","🏊🏽"],"🏊🏾‍♀️",["🏊🏾‍♂️","🏊🏾"],"🏊🏿‍♀️",["🏊🏿‍♂️","🏊🏿"],"🏋🏻‍♀️",["🏋🏻‍♂️","🏋🏻"],"🏋🏼‍♀️",["🏋🏼‍♂️","🏋🏼"],"🏋🏽‍♀️",["🏋🏽‍♂️","🏋🏽"],"🏋🏾‍♀️",["🏋🏾‍♂️","🏋🏾"],"🏋🏿‍♀️",["🏋🏿‍♂️","🏋🏿"],"🏋️‍♀️",["🏋️‍♂️","🏋️"],"🏌🏻‍♀️",["🏌🏻‍♂️","🏌🏻"],"🏌🏼‍♀️",["🏌🏼‍♂️","🏌🏼"],"🏌🏽‍♀️",["🏌🏽‍♂️","🏌🏽"],"🏌🏾‍♀️",["🏌🏾‍♂️","🏌🏾"],"🏌🏿‍♀️",["🏌🏿‍♂️","🏌🏿"],"🏌️","🏌️‍♀️","🏌️‍♂️","🏍️","🏎️","🏏","🏐","🏑","🏒","🏓","🏔️","🏕️","🏖️","🏗️","🏘️","🏙️","🏚️","🏛️","🏜️","🏝️","🏞️","🏟️","🏠","🏡","🏢","🏣","🏤","🏥","🏦","🏧","🏨","🏩","🏪","🏫","🏬","🏭","🏮","🏯","🏰","🏳️","🏳️‍⚧️","🏳️‍🌈","🏴","🏴‍☠️","🏴󠁧󠁢󠁥󠁮󠁧󠁿","🏴󠁧󠁢󠁳󠁣󠁴󠁿","🏴󠁧󠁢󠁷󠁬󠁳󠁿","🏴󠁵󠁳󠁴󠁸󠁿","🏵️","🏷️","🏸","🏹","🏺","🏻","🏼","🏽","🏾","🏿","🐀","🐁","🐂","🐃","🐄","🐅","🐆","🐇","🐈","🐈‍⬛","🐉","🐊","🐋","🐌","🐍","🐎","🐏","🐐","🐑","🐒","🐓","🐔","🐕","🐕‍🦺","🐖","🐗","🐘","🐙","🐚","🐛","🐜","🐝","🐞","🐟","🐠","🐡","🐢","🐣","🐤","🐥","🐦","🐧","🐨","🐩","🐪","🐫","🐬","🐭","🐮","🐯","🐰","🐱","🐲","🐳","🐴","🐵","🐶","🐷","🐸","🐹","🐺","🐻","🐻‍❄️","🐼","🐽","🐾","🐿️","👀","👁️","👁️‍🗨️","👂","👂🏻","👂🏼","👂🏽","👂🏾","👂🏿","👃","👃🏻","👃🏼","👃🏽","👃🏾","👃🏿","👄","👅","👆","👆🏻","👆🏼","👆🏽","👆🏾","👆🏿","👇","👇🏻","👇🏼","👇🏽","👇🏾","👇🏿","👈","👈🏻","👈🏼","👈🏽","👈🏾","👈🏿","👉","👉🏻","👉🏼","👉🏽","👉🏾","👉🏿","👊","👊🏻","👊🏼","👊🏽","👊🏾","👊🏿","👋","👋🏻","👋🏼","👋🏽","👋🏾","👋🏿","👌","👌🏻","👌🏼","👌🏽","👌🏾","👌🏿","👍","👍🏻","👍🏼","👍🏽","👍🏾","👍🏿","👎","👎🏻","👎🏼","👎🏽","👎🏾","👎🏿","👏","👏🏻","👏🏼","👏🏽","👏🏾","👏🏿","👐","👐🏻","👐🏼","👐🏽","👐🏾","👐🏿","👑","👒","👓","👔","👕","👖","👗","👘","👙","👚","👛","👜","👝","👞","👟","👠","👡","👢","👣","👤","👥","👦","👦🏻","👦🏼","👦🏽","👦🏾","👦🏿","👧","👧🏻","👧🏼","👧🏽","👧🏾","👧🏿","👨","👨‍⚕️","👨‍⚖️","👨‍✈️","👨‍❤️‍👨","👨‍❤️‍💋‍👨","👨‍🌾","👨‍🍳","👨‍🍼","👨‍🎓","👨‍🎤","👨‍🎨","👨‍🏫","👨‍🏭","👨‍👦","👨‍👦‍👦","👨‍👧","👨‍👧‍👦","👨‍👧‍👧","👨‍👨‍👦","👨‍👨‍👦‍👦","👨‍👨‍👧","👨‍👨‍👧‍👦","👨‍👨‍👧‍👧","👨‍👩‍👦","👨‍👩‍👦‍👦","👨‍👩‍👧","👨‍👩‍👧‍👦","👨‍👩‍👧‍👧","👨‍💻","👨‍💼","👨‍🔧","👨‍🔬","👨‍🚀","👨‍🚒","👨‍🦯","👨‍🦰","👨‍🦱","👨‍🦲","👨‍🦳","👨‍🦼","👨‍🦽","👨🏻","👨🏻‍⚕️","👨🏻‍⚖️","👨🏻‍✈️","👨🏻‍🌾","👨🏻‍🍳","👨🏻‍🍼","👨🏻‍🎓","👨🏻‍🎤","👨🏻‍🎨","👨🏻‍🏫","👨🏻‍🏭","👨🏻‍💻","👨🏻‍💼","👨🏻‍🔧","👨🏻‍🔬","👨🏻‍🚀","👨🏻‍🚒","👨🏻‍🦯","👨🏻‍🦰","👨🏻‍🦱","👨🏻‍🦲","👨🏻‍🦳","👨🏻‍🦼","👨🏻‍🦽","👨🏼","👨🏼‍⚕️","👨🏼‍⚖️","👨🏼‍✈️","👨🏼‍🌾","👨🏼‍🍳","👨🏼‍🍼","👨🏼‍🎓","👨🏼‍🎤","👨🏼‍🎨","👨🏼‍🏫","👨🏼‍🏭","👨🏼‍💻","👨🏼‍💼","👨🏼‍🔧","👨🏼‍🔬","👨🏼‍🚀","👨🏼‍🚒","👨🏼‍🤝‍👨🏻","👨🏼‍🦯","👨🏼‍🦰","👨🏼‍🦱","👨🏼‍🦲","👨🏼‍🦳","👨🏼‍🦼","👨🏼‍🦽","👨🏽","👨🏽‍⚕️","👨🏽‍⚖️","👨🏽‍✈️","👨🏽‍🌾","👨🏽‍🍳","👨🏽‍🍼","👨🏽‍🎓","👨🏽‍🎤","👨🏽‍🎨","👨🏽‍🏫","👨🏽‍🏭","👨🏽‍💻","👨🏽‍💼","👨🏽‍🔧","👨🏽‍🔬","👨🏽‍🚀","👨🏽‍🚒","👨🏽‍🤝‍👨🏻","👨🏽‍🤝‍👨🏼","👨🏽‍🦯","👨🏽‍🦰","👨🏽‍🦱","👨🏽‍🦲","👨🏽‍🦳","👨🏽‍🦼","👨🏽‍🦽","👨🏾","👨🏾‍⚕️","👨🏾‍⚖️","👨🏾‍✈️","👨🏾‍🌾","👨🏾‍🍳","👨🏾‍🍼","👨🏾‍🎓","👨🏾‍🎤","👨🏾‍🎨","👨🏾‍🏫","👨🏾‍🏭","👨🏾‍💻","👨🏾‍💼","👨🏾‍🔧","👨🏾‍🔬","👨🏾‍🚀","👨🏾‍🚒","👨🏾‍🤝‍👨🏻","👨🏾‍🤝‍👨🏼","👨🏾‍🤝‍👨🏽","👨🏾‍🦯","👨🏾‍🦰","👨🏾‍🦱","👨🏾‍🦲","👨🏾‍🦳","👨🏾‍🦼","👨🏾‍🦽","👨🏿","👨🏿‍⚕️","👨🏿‍⚖️","👨🏿‍✈️","👨🏿‍🌾","👨🏿‍🍳","👨🏿‍🍼","👨🏿‍🎓","👨🏿‍🎤","👨🏿‍🎨","👨🏿‍🏫","👨🏿‍🏭","👨🏿‍💻","👨🏿‍💼","👨🏿‍🔧","👨🏿‍🔬","👨🏿‍🚀","👨🏿‍🚒","👨🏿‍🤝‍👨🏻","👨🏿‍🤝‍👨🏼","👨🏿‍🤝‍👨🏽","👨🏿‍🤝‍👨🏾","👨🏿‍🦯","👨🏿‍🦰","👨🏿‍🦱","👨🏿‍🦲","👨🏿‍🦳","👨🏿‍🦼","👨🏿‍🦽","👩","👩‍⚕️","👩‍⚖️","👩‍✈️","👩‍❤️‍👨","👩‍❤️‍👩","👩‍❤️‍💋‍👨","👩‍❤️‍💋‍👩","👩‍🌾","👩‍🍳","👩‍🍼","👩‍🎓","👩‍🎤","👩‍🎨","👩‍🏫","👩‍🏭","👩‍👦","👩‍👦‍👦","👩‍👧","👩‍👧‍👦","👩‍👧‍👧","👩‍👩‍👦","👩‍👩‍👦‍👦","👩‍👩‍👧","👩‍👩‍👧‍👦","👩‍👩‍👧‍👧","👩‍💻","👩‍💼","👩‍🔧","👩‍🔬","👩‍🚀","👩‍🚒","👩‍🦯","👩‍🦰","👩‍🦱","👩‍🦲","👩‍🦳","👩‍🦼","👩‍🦽","👩🏻","👩🏻‍⚕️","👩🏻‍⚖️","👩🏻‍✈️","👩🏻‍🌾","👩🏻‍🍳","👩🏻‍🍼","👩🏻‍🎓","👩🏻‍🎤","👩🏻‍🎨","👩🏻‍🏫","👩🏻‍🏭","👩🏻‍💻","👩🏻‍💼","👩🏻‍🔧","👩🏻‍🔬","👩🏻‍🚀","👩🏻‍🚒","👩🏻‍🤝‍👨🏼","👩🏻‍🤝‍👨🏽","👩🏻‍🤝‍👨🏾","👩🏻‍🤝‍👨🏿","👩🏻‍🦯","👩🏻‍🦰","👩🏻‍🦱","👩🏻‍🦲","👩🏻‍🦳","👩🏻‍🦼","👩🏻‍🦽","👩🏼","👩🏼‍⚕️","👩🏼‍⚖️","👩🏼‍✈️","👩🏼‍🌾","👩🏼‍🍳","👩🏼‍🍼","👩🏼‍🎓","👩🏼‍🎤","👩🏼‍🎨","👩🏼‍🏫","👩🏼‍🏭","👩🏼‍💻","👩🏼‍💼","👩🏼‍🔧","👩🏼‍🔬","👩🏼‍🚀","👩🏼‍🚒","👩🏼‍🤝‍👨🏻","👩🏼‍🤝‍👨🏽","👩🏼‍🤝‍👨🏾","👩🏼‍🤝‍👨🏿","👩🏼‍🤝‍👩🏻","👩🏼‍🦯","👩🏼‍🦰","👩🏼‍🦱","👩🏼‍🦲","👩🏼‍🦳","👩🏼‍🦼","👩🏼‍🦽","👩🏽","👩🏽‍⚕️","👩🏽‍⚖️","👩🏽‍✈️","👩🏽‍🌾","👩🏽‍🍳","👩🏽‍🍼","👩🏽‍🎓","👩🏽‍🎤","👩🏽‍🎨","👩🏽‍🏫","👩🏽‍🏭","👩🏽‍💻","👩🏽‍💼","👩🏽‍🔧","👩🏽‍🔬","👩🏽‍🚀","👩🏽‍🚒","👩🏽‍🤝‍👨🏻","👩🏽‍🤝‍👨🏼","👩🏽‍🤝‍👨🏾","👩🏽‍🤝‍👨🏿","👩🏽‍🤝‍👩🏻","👩🏽‍🤝‍👩🏼","👩🏽‍🦯","👩🏽‍🦰","👩🏽‍🦱","👩🏽‍🦲","👩🏽‍🦳","👩🏽‍🦼","👩🏽‍🦽","👩🏾","👩🏾‍⚕️","👩🏾‍⚖️","👩🏾‍✈️","👩🏾‍🌾","👩🏾‍🍳","👩🏾‍🍼","👩🏾‍🎓","👩🏾‍🎤","👩🏾‍🎨","👩🏾‍🏫","👩🏾‍🏭","👩🏾‍💻","👩🏾‍💼","👩🏾‍🔧","👩🏾‍🔬","👩🏾‍🚀","👩🏾‍🚒","👩🏾‍🤝‍👨🏻","👩🏾‍🤝‍👨🏼","👩🏾‍🤝‍👨🏽","👩🏾‍🤝‍👨🏿","👩🏾‍🤝‍👩🏻","👩🏾‍🤝‍👩🏼","👩🏾‍🤝‍👩🏽","👩🏾‍🦯","👩🏾‍🦰","👩🏾‍🦱","👩🏾‍🦲","👩🏾‍🦳","👩🏾‍🦼","👩🏾‍🦽","👩🏿","👩🏿‍⚕️","👩🏿‍⚖️","👩🏿‍✈️","👩🏿‍🌾","👩🏿‍🍳","👩🏿‍🍼","👩🏿‍🎓","👩🏿‍🎤","👩🏿‍🎨","👩🏿‍🏫","👩🏿‍🏭","👩🏿‍💻","👩🏿‍💼","👩🏿‍🔧","👩🏿‍🔬","👩🏿‍🚀","👩🏿‍🚒","👩🏿‍🤝‍👨🏻","👩🏿‍🤝‍👨🏼","👩🏿‍🤝‍👨🏽","👩🏿‍🤝‍👨🏾","👩🏿‍🤝‍👩🏻","👩🏿‍🤝‍👩🏼","👩🏿‍🤝‍👩🏽","👩🏿‍🤝‍👩🏾","👩🏿‍🦯","👩🏿‍🦰","👩🏿‍🦱","👩🏿‍🦲","👩🏿‍🦳","👩🏿‍🦼","👩🏿‍🦽","👪","👫","👫🏻","👫🏼","👫🏽","👫🏾","👫🏿","👬","👬🏻","👬🏼","👬🏽","👬🏾","👬🏿","👭","👭🏻","👭🏼","👭🏽","👭🏾","👭🏿","👮‍♀️",["👮‍♂️","👮"],"👮🏻‍♀️",["👮🏻‍♂️","👮🏻"],"👮🏼‍♀️",["👮🏼‍♂️","👮🏼"],"👮🏽‍♀️",["👮🏽‍♂️","👮🏽"],"👮🏾‍♀️",["👮🏾‍♂️","👮🏾"],"👮🏿‍♀️",["👮🏿‍♂️","👮🏿"],["👯‍♀️","👯"],"👯‍♂️","👯🏻‍♀️","👯🏻‍♂️","👯🏼‍♀️","👯🏼‍♂️","👯🏽‍♀️","👯🏽‍♂️","👯🏾‍♀️","👯🏾‍♂️","👯🏿‍♀️","👯🏿‍♂️","👰","👰‍♀️","👰‍♂️","👰🏻","👰🏻‍♀️","👰🏻‍♂️","👰🏼","👰🏼‍♀️","👰🏼‍♂️","👰🏽","👰🏽‍♀️","👰🏽‍♂️","👰🏾","👰🏾‍♀️","👰🏾‍♂️","👰🏿","👰🏿‍♀️","👰🏿‍♂️","👱‍♀️",["👱‍♂️","👱"],"👱🏻‍♀️",["👱🏻‍♂️","👱🏻"],"👱🏼‍♀️",["👱🏼‍♂️","👱🏼"],"👱🏽‍♀️",["👱🏽‍♂️","👱🏽"],"👱🏾‍♀️",["👱🏾‍♂️","👱🏾"],"👱🏿‍♀️",["👱🏿‍♂️","👱🏿"],"👲","👲🏻","👲🏼","👲🏽","👲🏾","👲🏿","👳‍♀️",["👳‍♂️","👳"],"👳🏻‍♀️",["👳🏻‍♂️","👳🏻"],"👳🏼‍♀️",["👳🏼‍♂️","👳🏼"],"👳🏽‍♀️",["👳🏽‍♂️","👳🏽"],"👳🏾‍♀️",["👳🏾‍♂️","👳🏾"],"👳🏿‍♀️",["👳🏿‍♂️","👳🏿"],"👴","👴🏻","👴🏼","👴🏽","👴🏾","👴🏿","👵","👵🏻","👵🏼","👵🏽","👵🏾","👵🏿","👶","👶🏻","👶🏼","👶🏽","👶🏾","👶🏿","👷‍♀️",["👷‍♂️","👷"],"👷🏻‍♀️",["👷🏻‍♂️","👷🏻"],"👷🏼‍♀️",["👷🏼‍♂️","👷🏼"],"👷🏽‍♀️",["👷🏽‍♂️","👷🏽"],"👷🏾‍♀️",["👷🏾‍♂️","👷🏾"],"👷🏿‍♀️",["👷🏿‍♂️","👷🏿"],"👸","👸🏻","👸🏼","👸🏽","👸🏾","👸🏿","👹","👺","👻","👼","👼🏻","👼🏼","👼🏽","👼🏾","👼🏿","👽","👾","👿","💀",["💁‍♀️","💁"],"💁‍♂️",["💁🏻‍♀️","💁🏻"],"💁🏻‍♂️",["💁🏼‍♀️","💁🏼"],"💁🏼‍♂️",["💁🏽‍♀️","💁🏽"],"💁🏽‍♂️",["💁🏾‍♀️","💁🏾"],"💁🏾‍♂️",["💁🏿‍♀️","💁🏿"],"💁🏿‍♂️","💂‍♀️",["💂‍♂️","💂"],"💂🏻‍♀️",["💂🏻‍♂️","💂🏻"],"💂🏼‍♀️",["💂🏼‍♂️","💂🏼"],"💂🏽‍♀️",["💂🏽‍♂️","💂🏽"],"💂🏾‍♀️",["💂🏾‍♂️","💂🏾"],"💂🏿‍♀️",["💂🏿‍♂️","💂🏿"],"💃","💃🏻","💃🏼","💃🏽","💃🏾","💃🏿","💄","💅","💅🏻","💅🏼","💅🏽","💅🏾","💅🏿",["💆‍♀️","💆"],"💆‍♂️",["💆🏻‍♀️","💆🏻"],"💆🏻‍♂️",["💆🏼‍♀️","💆🏼"],"💆🏼‍♂️",["💆🏽‍♀️","💆🏽"],"💆🏽‍♂️",["💆🏾‍♀️","💆🏾"],"💆🏾‍♂️",["💆🏿‍♀️","💆🏿"],"💆🏿‍♂️",["💇‍♀️","💇"],"💇‍♂️",["💇🏻‍♀️","💇🏻"],"💇🏻‍♂️",["💇🏼‍♀️","💇🏼"],"💇🏼‍♂️",["💇🏽‍♀️","💇🏽"],"💇🏽‍♂️",["💇🏾‍♀️","💇🏾"],"💇🏾‍♂️",["💇🏿‍♀️","💇🏿"],"💇🏿‍♂️","💈","💉","💊","💋","💌","💍","💎","💏","💐","💑","💒","💓","💔","💕","💖","💗","💘","💙","💚","💛","💜","💝","💞","💟","💠","💡","💢","💣","💤","💥","💦","💧","💨","💩","💪","💪🏻","💪🏼","💪🏽","💪🏾","💪🏿","💫","💬","💭","💮","💯","💰","💱","💲","💳","💴","💵","💶","💷","💸","💹","💺","💻","💼","💽","💾","💿","📀","📁","📂","📃","📄","📅","📆","📇","📈","📉","📊","📋","📌","📍","📎","📏","📐","📑","📒","📓","📔","📕","📖","📗","📘","📙","📚","📛","📜","📝","📞","📟","📠","📡","📢","📣","📤","📥","📦","📧","📨","📩","📪","📫","📬","📭","📮","📯","📰","📱","📲","📳","📴","📵","📶","📷","📸","📹","📺","📻","📼","📽️","📿","🔀","🔁","🔂","🔃","🔄","🔅","🔆","🔇","🔈","🔉","🔊","🔋","🔌","🔍","🔎","🔏","🔐","🔑","🔒","🔓","🔔","🔕","🔖","🔗","🔘","🔙","🔚","🔛","🔜","🔝","🔞","🔟","🔠","🔡","🔢","🔣","🔤","🔥","🔦","🔧","🔨","🔩","🔪","🔫","🔬","🔭","🔮","🔯","🔰","🔱","🔲","🔳","🔴","🔵","🔶","🔷","🔸","🔹","🔺","🔻","🔼","🔽","🕉️","🕊️","🕋","🕌","🕍","🕎","🕐","🕑","🕒","🕓","🕔","🕕","🕖","🕗","🕘","🕙","🕚","🕛","🕜","🕝","🕞","🕟","🕠","🕡","🕢","🕣","🕤","🕥","🕦","🕧","🕯️","🕰️","🕳️","🕴🏻","🕴🏼","🕴🏽","🕴🏾","🕴🏿","🕴️","🕵🏻‍♀️",["🕵🏻‍♂️","🕵🏻"],"🕵🏼‍♀️",["🕵🏼‍♂️","🕵🏼"],"🕵🏽‍♀️",["🕵🏽‍♂️","🕵🏽"],"🕵🏾‍♀️",["🕵🏾‍♂️","🕵🏾"],"🕵🏿‍♀️",["🕵🏿‍♂️","🕵🏿"],"🕵️‍♀️",["🕵️‍♂️","🕵️"],"🕶️","🕷️","🕸️","🕹️","🕺","🕺🏻","🕺🏼","🕺🏽","🕺🏾","🕺🏿","🖇️","🖊️","🖋️","🖌️","🖍️","🖐🏻","🖐🏼","🖐🏽","🖐🏾","🖐🏿","🖐️","🖕","🖕🏻","🖕🏼","🖕🏽","🖕🏾","🖕🏿","🖖","🖖🏻","🖖🏼","🖖🏽","🖖🏾","🖖🏿","🖤","🖥️","🖨️","🖱️","🖲️","🖼️","🗂️","🗃️","🗄️","🗑️","🗒️","🗓️","🗜️","🗝️","🗞️","🗡️","🗣️","🗨️","🗯️","🗳️","🗺️","🗻","🗼","🗽","🗾","🗿","😀","😁","😂","😃","😄","😅","😆","😇","😈","😉","😊","😋","😌","😍","😎","😏","😐","😑","😒","😓","😔","😕","😖","😗","😘","😙","😚","😛","😜","😝","😞","😟","😠","😡","😢","😣","😤","😥","😦","😧","😨","😩","😪","😫","😬","😭","😮","😯","😰","😱","😲","😳","😴","😵","😶","😷","😸","😹","😺","😻","😼","😽","😾","😿","🙀","🙁","🙂","🙃","🙄",["🙅‍♀️","🙅"],"🙅‍♂️",["🙅🏻‍♀️","🙅🏻"],"🙅🏻‍♂️",["🙅🏼‍♀️","🙅🏼"],"🙅🏼‍♂️",["🙅🏽‍♀️","🙅🏽"],"🙅🏽‍♂️",["🙅🏾‍♀️","🙅🏾"],"🙅🏾‍♂️",["🙅🏿‍♀️","🙅🏿"],"🙅🏿‍♂️",["🙆‍♀️","🙆"],"🙆‍♂️",["🙆🏻‍♀️","🙆🏻"],"🙆🏻‍♂️",["🙆🏼‍♀️","🙆🏼"],"🙆🏼‍♂️",["🙆🏽‍♀️","🙆🏽"],"🙆🏽‍♂️",["🙆🏾‍♀️","🙆🏾"],"🙆🏾‍♂️",["🙆🏿‍♀️","🙆🏿"],"🙆🏿‍♂️","🙇‍♀️",["🙇‍♂️","🙇"],"🙇🏻‍♀️",["🙇🏻‍♂️","🙇🏻"],"🙇🏼‍♀️",["🙇🏼‍♂️","🙇🏼"],"🙇🏽‍♀️",["🙇🏽‍♂️","🙇🏽"],"🙇🏾‍♀️",["🙇🏾‍♂️","🙇🏾"],"🙇🏿‍♀️",["🙇🏿‍♂️","🙇🏿"],"🙈","🙉","🙊",["🙋‍♀️","🙋"],"🙋‍♂️",["🙋🏻‍♀️","🙋🏻"],"🙋🏻‍♂️",["🙋🏼‍♀️","🙋🏼"],"🙋🏼‍♂️",["🙋🏽‍♀️","🙋🏽"],"🙋🏽‍♂️",["🙋🏾‍♀️","🙋🏾"],"🙋🏾‍♂️",["🙋🏿‍♀️","🙋🏿"],"🙋🏿‍♂️","🙌","🙌🏻","🙌🏼","🙌🏽","🙌🏾","🙌🏿",["🙍‍♀️","🙍"],"🙍‍♂️",["🙍🏻‍♀️","🙍🏻"],"🙍🏻‍♂️",["🙍🏼‍♀️","🙍🏼"],"🙍🏼‍♂️",["🙍🏽‍♀️","🙍🏽"],"🙍🏽‍♂️",["🙍🏾‍♀️","🙍🏾"],"🙍🏾‍♂️",["🙍🏿‍♀️","🙍🏿"],"🙍🏿‍♂️",["🙎‍♀️","🙎"],"🙎‍♂️",["🙎🏻‍♀️","🙎🏻"],"🙎🏻‍♂️",["🙎🏼‍♀️","🙎🏼"],"🙎🏼‍♂️",["🙎🏽‍♀️","🙎🏽"],"🙎🏽‍♂️",["🙎🏾‍♀️","🙎🏾"],"🙎🏾‍♂️",["🙎🏿‍♀️","🙎🏿"],"🙎🏿‍♂️","🙏","🙏🏻","🙏🏼","🙏🏽","🙏🏾","🙏🏿","🚀","🚁","🚂","🚃","🚄","🚅","🚆","🚇","🚈","🚉","🚊","🚋","🚌","🚍","🚎","🚏","🚐","🚑","🚒","🚓","🚔","🚕","🚖","🚗","🚘","🚙","🚚","🚛","🚜","🚝","🚞","🚟","🚠","🚡","🚢","🚣","🚣‍♀️","🚣‍♂️","🚣🏻‍♀️",["🚣🏻‍♂️","🚣🏻"],"🚣🏼‍♀️",["🚣🏼‍♂️","🚣🏼"],"🚣🏽‍♀️",["🚣🏽‍♂️","🚣🏽"],"🚣🏾‍♀️",["🚣🏾‍♂️","🚣🏾"],"🚣🏿‍♀️",["🚣🏿‍♂️","🚣🏿"],"🚤","🚥","🚦","🚧","🚨","🚩","🚪","🚫","🚬","🚭","🚮","🚯","🚰","🚱","🚲","🚳","🚴","🚴‍♀️","🚴‍♂️","🚴🏻‍♀️",["🚴🏻‍♂️","🚴🏻"],"🚴🏼‍♀️",["🚴🏼‍♂️","🚴🏼"],"🚴🏽‍♀️",["🚴🏽‍♂️","🚴🏽"],"🚴🏾‍♀️",["🚴🏾‍♂️","🚴🏾"],"🚴🏿‍♀️",["🚴🏿‍♂️","🚴🏿"],"🚵","🚵‍♀️","🚵‍♂️","🚵🏻‍♀️",["🚵🏻‍♂️","🚵🏻"],"🚵🏼‍♀️",["🚵🏼‍♂️","🚵🏼"],"🚵🏽‍♀️",["🚵🏽‍♂️","🚵🏽"],"🚵🏾‍♀️",["🚵🏾‍♂️","🚵🏾"],"🚵🏿‍♀️",["🚵🏿‍♂️","🚵🏿"],"🚶","🚶‍♀️","🚶‍♂️","🚶🏻‍♀️",["🚶🏻‍♂️","🚶🏻"],"🚶🏼‍♀️",["🚶🏼‍♂️","🚶🏼"],"🚶🏽‍♀️",["🚶🏽‍♂️","🚶🏽"],"🚶🏾‍♀️",["🚶🏾‍♂️","🚶🏾"],"🚶🏿‍♀️",["🚶🏿‍♂️","🚶🏿"],"🚷","🚸","🚹","🚺","🚻","🚼","🚽","🚾","🚿","🛀","🛀🏻","🛀🏼","🛀🏽","🛀🏾","🛀🏿","🛁","🛂","🛃","🛄","🛅","🛋️","🛌","🛌🏻","🛌🏼","🛌🏽","🛌🏾","🛌🏿","🛍️","🛎️","🛏️","🛐","🛑","🛒","🛕","🛖","🛗","🛠️","🛡️","🛢️","🛣️","🛤️","🛥️","🛩️","🛫","🛬","🛰️","🛳️","🛴","🛵","🛶","🛷","🛸","🛹","🛺","🛻","🛼","🟠","🟡","🟢","🟣","🟤","🟥","🟦","🟧","🟨","🟩","🟪","🟫","🤌","🤌🏻","🤌🏼","🤌🏽","🤌🏾","🤌🏿","🤍","🤎","🤏","🤏🏻","🤏🏼","🤏🏽","🤏🏾","🤏🏿","🤐","🤑","🤒","🤓","🤔","🤕","🤖","🤗","🤘","🤘🏻","🤘🏼","🤘🏽","🤘🏾","🤘🏿","🤙","🤙🏻","🤙🏼","🤙🏽","🤙🏾","🤙🏿","🤚","🤚🏻","🤚🏼","🤚🏽","🤚🏾","🤚🏿","🤛","🤛🏻","🤛🏼","🤛🏽","🤛🏾","🤛🏿","🤜","🤜🏻","🤜🏼","🤜🏽","🤜🏾","🤜🏿","🤝","🤝🏻","🤝🏼","🤝🏽","🤝🏾","🤝🏿","🤞","🤞🏻","🤞🏼","🤞🏽","🤞🏾","🤞🏿","🤟","🤟🏻","🤟🏼","🤟🏽","🤟🏾","🤟🏿","🤠","🤡","🤢","🤣","🤤","🤥","🤦‍♀️",["🤦‍♂️","🤦"],"🤦🏻‍♀️",["🤦🏻‍♂️","🤦🏻"],"🤦🏼‍♀️",["🤦🏼‍♂️","🤦🏼"],"🤦🏽‍♀️",["🤦🏽‍♂️","🤦🏽"],"🤦🏾‍♀️",["🤦🏾‍♂️","🤦🏾"],"🤦🏿‍♀️",["🤦🏿‍♂️","🤦🏿"],"🤧","🤨","🤩","🤪","🤫","🤬","🤭","🤮","🤯","🤰","🤰🏻","🤰🏼","🤰🏽","🤰🏾","🤰🏿","🤱","🤱🏻","🤱🏼","🤱🏽","🤱🏾","🤱🏿","🤲","🤲🏻","🤲🏼","🤲🏽","🤲🏾","🤲🏿","🤳","🤳🏻","🤳🏼","🤳🏽","🤳🏾","🤳🏿","🤴","🤴🏻","🤴🏼","🤴🏽","🤴🏾","🤴🏿","🤵","🤵‍♀️","🤵‍♂️","🤵🏻","🤵🏻‍♀️","🤵🏻‍♂️","🤵🏼","🤵🏼‍♀️","🤵🏼‍♂️","🤵🏽","🤵🏽‍♀️","🤵🏽‍♂️","🤵🏾","🤵🏾‍♀️","🤵🏾‍♂️","🤵🏿","🤵🏿‍♀️","🤵🏿‍♂️","🤶","🤶🏻","🤶🏼","🤶🏽","🤶🏾","🤶🏿",["🤷‍♀️","🤷"],"🤷‍♂️",["🤷🏻‍♀️","🤷🏻"],"🤷🏻‍♂️",["🤷🏼‍♀️","🤷🏼"],"🤷🏼‍♂️",["🤷🏽‍♀️","🤷🏽"],"🤷🏽‍♂️",["🤷🏾‍♀️","🤷🏾"],"🤷🏾‍♂️",["🤷🏿‍♀️","🤷🏿"],"🤷🏿‍♂️","🤸","🤸‍♀️","🤸‍♂️","🤸🏻‍♀️",["🤸🏻‍♂️","🤸🏻"],"🤸🏼‍♀️",["🤸🏼‍♂️","🤸🏼"],"🤸🏽‍♀️",["🤸🏽‍♂️","🤸🏽"],"🤸🏾‍♀️",["🤸🏾‍♂️","🤸🏾"],"🤸🏿‍♀️",["🤸🏿‍♂️","🤸🏿"],"🤹‍♀️",["🤹‍♂️","🤹"],"🤹🏻‍♀️",["🤹🏻‍♂️","🤹🏻"],"🤹🏼‍♀️",["🤹🏼‍♂️","🤹🏼"],"🤹🏽‍♀️",["🤹🏽‍♂️","🤹🏽"],"🤹🏾‍♀️",["🤹🏾‍♂️","🤹🏾"],"🤹🏿‍♀️",["🤹🏿‍♂️","🤹🏿"],"🤺","🤼","🤼‍♀️","🤼‍♂️","🤽","🤽‍♀️","🤽‍♂️","🤽🏻‍♀️",["🤽🏻‍♂️","🤽🏻"],"🤽🏼‍♀️",["🤽🏼‍♂️","🤽🏼"],"🤽🏽‍♀️",["🤽🏽‍♂️","🤽🏽"],"🤽🏾‍♀️",["🤽🏾‍♂️","🤽🏾"],"🤽🏿‍♀️",["🤽🏿‍♂️","🤽🏿"],"🤾","🤾‍♀️","🤾‍♂️",["🤾🏻‍♀️","🤾🏻"],"🤾🏻‍♂️",["🤾🏼‍♀️","🤾🏼"],"🤾🏼‍♂️",["🤾🏽‍♀️","🤾🏽"],"🤾🏽‍♂️",["🤾🏾‍♀️","🤾🏾"],"🤾🏾‍♂️",["🤾🏿‍♀️","🤾🏿"],"🤾🏿‍♂️","🤿","🥀","🥁","🥂","🥃","🥄","🥅","🥇","🥈","🥉","🥊","🥋","🥌","🥍","🥎","🥏","🥐","🥑","🥒","🥓","🥔","🥕","🥖","🥗","🥘","🥙","🥚","🥛","🥜","🥝","🥞","🥟","🥠","🥡","🥢","🥣","🥤","🥥","🥦","🥧","🥨","🥩","🥪","🥫","🥬","🥭","🥮","🥯","🥰","🥱","🥲","🥳","🥴","🥵","🥶","🥷","🥷🏻","🥷🏼","🥷🏽","🥷🏾","🥷🏿","🥸","🥺","🥻","🥼","🥽","🥾","🥿","🦀","🦁","🦂","🦃","🦄","🦅","🦆","🦇","🦈","🦉","🦊","🦋","🦌","🦍","🦎","🦏","🦐","🦑","🦒","🦓","🦔","🦕","🦖","🦗","🦘","🦙","🦚","🦛","🦜","🦝","🦞","🦟","🦠","🦡","🦢","🦣","🦤","🦥","🦦","🦧","🦨","🦩","🦪","🦫","🦬","🦭","🦮","🦯","🦴","🦵","🦵🏻","🦵🏼","🦵🏽","🦵🏾","🦵🏿","🦶","🦶🏻","🦶🏼","🦶🏽","🦶🏾","🦶🏿","🦷","🦸‍♀️","🦸‍♂️","🦸🏻‍♀️","🦸🏻‍♂️","🦸🏼‍♀️","🦸🏼‍♂️","🦸🏽‍♀️","🦸🏽‍♂️","🦸🏾‍♀️","🦸🏾‍♂️","🦸🏿‍♀️","🦸🏿‍♂️","🦹‍♀️","🦹‍♂️","🦹🏻‍♀️","🦹🏻‍♂️","🦹🏼‍♀️","🦹🏼‍♂️","🦹🏽‍♀️","🦹🏽‍♂️","🦹🏾‍♀️","🦹🏾‍♂️","🦹🏿‍♀️","🦹🏿‍♂️","🦺","🦻","🦻🏻","🦻🏼","🦻🏽","🦻🏾","🦻🏿","🦼","🦽","🦾","🦿","🧀","🧁","🧂","🧃","🧄","🧅","🧆","🧇","🧈","🧉","🧊","🧋","🧍","🧍‍♀️","🧍‍♂️","🧍🏻","🧍🏻‍♀️","🧍🏻‍♂️","🧍🏼","🧍🏼‍♀️","🧍🏼‍♂️","🧍🏽","🧍🏽‍♀️","🧍🏽‍♂️","🧍🏾","🧍🏾‍♀️","🧍🏾‍♂️","🧍🏿","🧍🏿‍♀️","🧍🏿‍♂️","🧎","🧎‍♀️","🧎‍♂️","🧎🏻","🧎🏻‍♀️","🧎🏻‍♂️","🧎🏼","🧎🏼‍♀️","🧎🏼‍♂️","🧎🏽","🧎🏽‍♀️","🧎🏽‍♂️","🧎🏾","🧎🏾‍♀️","🧎🏾‍♂️","🧎🏿","🧎🏿‍♀️","🧎🏿‍♂️","🧏","🧏‍♀️","🧏‍♂️","🧏🏻","🧏🏻‍♀️","🧏🏻‍♂️","🧏🏼","🧏🏼‍♀️","🧏🏼‍♂️","🧏🏽","🧏🏽‍♀️","🧏🏽‍♂️","🧏🏾","🧏🏾‍♀️","🧏🏾‍♂️","🧏🏿","🧏🏿‍♀️","🧏🏿‍♂️","🧐","🧑","🧑‍⚕️","🧑‍⚖️","🧑‍✈️","🧑‍🌾","🧑‍🍳","🧑‍🍼","🧑‍🎄","🧑‍🎓","🧑‍🎤","🧑‍🎨","🧑‍🏫","🧑‍🏭","🧑‍💻","🧑‍💼","🧑‍🔧","🧑‍🔬","🧑‍🚀","🧑‍🚒","🧑‍🤝‍🧑","🧑‍🦯","🧑‍🦰","🧑‍🦱","🧑‍🦲","🧑‍🦳","🧑‍🦼","🧑‍🦽","🧑🏻","🧑🏻‍⚕️","🧑🏻‍⚖️","🧑🏻‍✈️","🧑🏻‍🌾","🧑🏻‍🍳","🧑🏻‍🍼","🧑🏻‍🎄","🧑🏻‍🎓","🧑🏻‍🎤","🧑🏻‍🎨","🧑🏻‍🏫","🧑🏻‍🏭","🧑🏻‍💻","🧑🏻‍💼","🧑🏻‍🔧","🧑🏻‍🔬","🧑🏻‍🚀","🧑🏻‍🚒","🧑🏻‍🤝‍🧑🏻","🧑🏻‍🦯","🧑🏻‍🦰","🧑🏻‍🦱","🧑🏻‍🦲","🧑🏻‍🦳","🧑🏻‍🦼","🧑🏻‍🦽","🧑🏼","🧑🏼‍⚕️","🧑🏼‍⚖️","🧑🏼‍✈️","🧑🏼‍🌾","🧑🏼‍🍳","🧑🏼‍🍼","🧑🏼‍🎄","🧑🏼‍🎓","🧑🏼‍🎤","🧑🏼‍🎨","🧑🏼‍🏫","🧑🏼‍🏭","🧑🏼‍💻","🧑🏼‍💼","🧑🏼‍🔧","🧑🏼‍🔬","🧑🏼‍🚀","🧑🏼‍🚒","🧑🏼‍🤝‍🧑🏻","🧑🏼‍🤝‍🧑🏼","🧑🏼‍🦯","🧑🏼‍🦰","🧑🏼‍🦱","🧑🏼‍🦲","🧑🏼‍🦳","🧑🏼‍🦼","🧑🏼‍🦽","🧑🏽","🧑🏽‍⚕️","🧑🏽‍⚖️","🧑🏽‍✈️","🧑🏽‍🌾","🧑🏽‍🍳","🧑🏽‍🍼","🧑🏽‍🎄","🧑🏽‍🎓","🧑🏽‍🎤","🧑🏽‍🎨","🧑🏽‍🏫","🧑🏽‍🏭","🧑🏽‍💻","🧑🏽‍💼","🧑🏽‍🔧","🧑🏽‍🔬","🧑🏽‍🚀","🧑🏽‍🚒","🧑🏽‍🤝‍🧑🏻","🧑🏽‍🤝‍🧑🏼","🧑🏽‍🤝‍🧑🏽","🧑🏽‍🦯","🧑🏽‍🦰","🧑🏽‍🦱","🧑🏽‍🦲","🧑🏽‍🦳","🧑🏽‍🦼","🧑🏽‍🦽","🧑🏾","🧑🏾‍⚕️","🧑🏾‍⚖️","🧑🏾‍✈️","🧑🏾‍🌾","🧑🏾‍🍳","🧑🏾‍🍼","🧑🏾‍🎄","🧑🏾‍🎓","🧑🏾‍🎤","🧑🏾‍🎨","🧑🏾‍🏫","🧑🏾‍🏭","🧑🏾‍💻","🧑🏾‍💼","🧑🏾‍🔧","🧑🏾‍🔬","🧑🏾‍🚀","🧑🏾‍🚒","🧑🏾‍🤝‍🧑🏻","🧑🏾‍🤝‍🧑🏼","🧑🏾‍🤝‍🧑🏽","🧑🏾‍🤝‍🧑🏾","🧑🏾‍🦯","🧑🏾‍🦰","🧑🏾‍🦱","🧑🏾‍🦲","🧑🏾‍🦳","🧑🏾‍🦼","🧑🏾‍🦽","🧑🏿","🧑🏿‍⚕️","🧑🏿‍⚖️","🧑🏿‍✈️","🧑🏿‍🌾","🧑🏿‍🍳","🧑🏿‍🍼","🧑🏿‍🎄","🧑🏿‍🎓","🧑🏿‍🎤","🧑🏿‍🎨","🧑🏿‍🏫","🧑🏿‍🏭","🧑🏿‍💻","🧑🏿‍💼","🧑🏿‍🔧","🧑🏿‍🔬","🧑🏿‍🚀","🧑🏿‍🚒","🧑🏿‍🤝‍🧑🏻","🧑🏿‍🤝‍🧑🏼","🧑🏿‍🤝‍🧑🏽","🧑🏿‍🤝‍🧑🏾","🧑🏿‍🤝‍🧑🏿","🧑🏿‍🦯","🧑🏿‍🦰","🧑🏿‍🦱","🧑🏿‍🦲","🧑🏿‍🦳","🧑🏿‍🦼","🧑🏿‍🦽","🧒","🧒🏻","🧒🏼","🧒🏽","🧒🏾","🧒🏿","🧓","🧓🏻","🧓🏼","🧓🏽","🧓🏾","🧓🏿","🧔","🧔🏻","🧔🏼","🧔🏽","🧔🏾","🧔🏿","🧕","🧕🏻","🧕🏼","🧕🏽","🧕🏾","🧕🏿","🧖","🧖‍♀️","🧖‍♂️","🧖🏻‍♀️",["🧖🏻‍♂️","🧖🏻"],"🧖🏼‍♀️",["🧖🏼‍♂️","🧖🏼"],"🧖🏽‍♀️",["🧖🏽‍♂️","🧖🏽"],"🧖🏾‍♀️",["🧖🏾‍♂️","🧖🏾"],"🧖🏿‍♀️",["🧖🏿‍♂️","🧖🏿"],"🧗","🧗‍♀️","🧗‍♂️",["🧗🏻‍♀️","🧗🏻"],"🧗🏻‍♂️",["🧗🏼‍♀️","🧗🏼"],"🧗🏼‍♂️",["🧗🏽‍♀️","🧗🏽"],"🧗🏽‍♂️",["🧗🏾‍♀️","🧗🏾"],"🧗🏾‍♂️",["🧗🏿‍♀️","🧗🏿"],"🧗🏿‍♂️","🧘","🧘‍♀️","🧘‍♂️",["🧘🏻‍♀️","🧘🏻"],"🧘🏻‍♂️",["🧘🏼‍♀️","🧘🏼"],"🧘🏼‍♂️",["🧘🏽‍♀️","🧘🏽"],"🧘🏽‍♂️",["🧘🏾‍♀️","🧘🏾"],"🧘🏾‍♂️",["🧘🏿‍♀️","🧘🏿"],"🧘🏿‍♂️",["🧙‍♀️","🧙"],"🧙‍♂️",["🧙🏻‍♀️","🧙🏻"],"🧙🏻‍♂️",["🧙🏼‍♀️","🧙🏼"],"🧙🏼‍♂️",["🧙🏽‍♀️","🧙🏽"],"🧙🏽‍♂️",["🧙🏾‍♀️","🧙🏾"],"🧙🏾‍♂️",["🧙🏿‍♀️","🧙🏿"],"🧙🏿‍♂️",["🧚‍♀️","🧚"],"🧚‍♂️",["🧚🏻‍♀️","🧚🏻"],"🧚🏻‍♂️",["🧚🏼‍♀️","🧚🏼"],"🧚🏼‍♂️",["🧚🏽‍♀️","🧚🏽"],"🧚🏽‍♂️",["🧚🏾‍♀️","🧚🏾"],"🧚🏾‍♂️",["🧚🏿‍♀️","🧚🏿"],"🧚🏿‍♂️",["🧛‍♀️","🧛"],"🧛‍♂️",["🧛🏻‍♀️","🧛🏻"],"🧛🏻‍♂️",["🧛🏼‍♀️","🧛🏼"],"🧛🏼‍♂️",["🧛🏽‍♀️","🧛🏽"],"🧛🏽‍♂️",["🧛🏾‍♀️","🧛🏾"],"🧛🏾‍♂️",["🧛🏿‍♀️","🧛🏿"],"🧛🏿‍♂️",["🧜‍♀️","🧜"],"🧜‍♂️",["🧜🏻‍♀️","🧜🏻"],"🧜🏻‍♂️",["🧜🏼‍♀️","🧜🏼"],"🧜🏼‍♂️",["🧜🏽‍♀️","🧜🏽"],"🧜🏽‍♂️",["🧜🏾‍♀️","🧜🏾"],"🧜🏾‍♂️",["🧜🏿‍♀️","🧜🏿"],"🧜🏿‍♂️","🧝‍♀️",["🧝‍♂️","🧝"],"🧝🏻‍♀️",["🧝🏻‍♂️","🧝🏻"],"🧝🏼‍♀️",["🧝🏼‍♂️","🧝🏼"],"🧝🏽‍♀️",["🧝🏽‍♂️","🧝🏽"],"🧝🏾‍♀️",["🧝🏾‍♂️","🧝🏾"],"🧝🏿‍♀️",["🧝🏿‍♂️","🧝🏿"],["🧞‍♀️","🧞"],"🧞‍♂️",["🧟‍♀️","🧟"],"🧟‍♂️","🧠","🧡","🧢","🧣","🧤","🧥","🧦","🧧","🧨","🧩","🧪","🧫","🧬","🧭","🧮","🧯","🧰","🧱","🧲","🧳","🧴","🧵","🧶","🧷","🧸","🧹","🧺","🧻","🧼","🧽","🧾","🧿","🩰","🩱","🩲","🩳","🩴","🩸","🩹","🩺","🪀","🪁","🪂","🪃","🪄","🪅","🪆","🪐","🪑","🪒","🪓","🪔","🪕","🪖","🪗","🪘","🪙","🪚","🪛","🪜","🪝","🪞","🪟","🪠","🪡","🪢","🪣","🪤","🪥","🪦","🪧","🪨","🪰","🪱","🪲","🪳","🪴","🪵","🪶","🫀","🫁","🫂","🫐","🫑","🫒","🫓","🫔","🫕","🫖"]},36334:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return new Promise(((t,a)=>{var r=new s.default;r.onerror=function(e){r.terminate(),a(new n.DecodeWebpResultsError("worker error",e))},r.onmessageerror=function(e){r.terminate(),a(new n.DecodeWebpResultsError("worker message error",e))},r.onmessage=e=>{r.terminate();var a=e.data;t(a)},r.postMessage({webpBuffer:e},[e])}))};var s=i(a(80967)),n=r(a(96452))},38579:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.getTotalAnimationDuration=u,t.default=function(e){var t=new Uint8Array(e);if(!_(t))return __LOG__(2)(d()),p;if(!v(t))return(0,i.default)((0,i.default)({},p),{},{emojis:m(t)});var a,r=0,s=44;for(;(0,n.default)(t.slice(s,s+4),f);){var o=s+20,l=t.slice(o,o+3);if(3!==l.length)return p;r+=c(l);var h=s+4,g=t.slice(h,h+4);if(4!==g.length)return p;s+=8+c(g),null==a&&(a=s)}var E=u(r),y=m(t);return{animationDuration:E,firstFrameLength:a,singleLoopDuration:r,emojis:y}},t.getCorrespondingEmojis=m,t.isExtendedFile=_,t.isAnimatedWebp=v,t.MAX_DURATION=t.MAX_LOOPS=void 0;var i=r(a(70417)),s=r(a(19976)),n=r(a(51107));function o(){var e=(0,s.default)(["Failed to parse emojis out of sticker, returning array."]);return o=function(){return e},e}function l(){var e=(0,s.default)(["JSON not found in sticker file"]);return l=function(){return e},e}function d(){var e=(0,s.default)(["Sticker file not extended format."]);return d=function(){return e},e}t.MAX_LOOPS=3;function u(e){if(0===e)return 0;var t=Math.min(Math.floor(5e3/e),3);return Math.max(t,1)*e}function c(e){return e.reduce(((e,t,a)=>e+(t<<8*a)),0)}t.MAX_DURATION=5e3;var h=new Uint8Array([86,80,56,88]),f=new Uint8Array([65,78,77,70]),p={animationDuration:0,singleLoopDuration:0,emojis:[]};function m(e){if(null==TextDecoder)return[];var t=String.fromCharCode(0),a=new TextDecoder,r=0;for(r+=12;r<e.byteLength;){var i=a.decode(e.slice(r,r+4)),s=c(e.slice(r+4,r+4+4));if(s%2!=0&&(s+=1),"EXIF"===i||"XMP"===i){for(var n=e.slice(r,e.byteLength),d=a.decode(n),u=void 0,h=void 0,f=d.length;f>0;--f)if(null==h&&"}"===d[f])h=f;else if(null!=h&&d[f]===t){u=f+1;break}if(null==u||null==h)return __LOG__(3)(l()),[];var p=d.substring(u,h+1);try{var m=JSON.parse(p);return Array.isArray(m.emojis)?m.emojis:[]}catch(e){return __LOG__(2)(o()),[]}}r+=8+s}return[]}function _(e){var t=e.slice(12,16);return(0,n.default)(t,h)}function v(e){var t=new Uint8Array(e);return _(t)&&0!=(2&t[20])}},72049:(e,t,a)=>{"use strict";var r=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return new Promise(((t,a)=>{var r=new s.default;r.onerror=function(e){r.terminate(),a(new n.DecodeWebpResultsError("worker error",e))},r.onmessageerror=function(e){r.terminate(),a(new n.DecodeWebpResultsError("worker message error",e))},r.onmessage=e=>{r.terminate();var a=e.data;t(a)},r.postMessage({webpBuffer:e},[e])}))};var s=i(a(66665)),n=r(a(96452))},3111:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(e){var t;if(e instanceof l.default?t=e.user:(0,o.isString)(e)&&(t=e.split("@")[0]),t){var a=t;return n.default.isRTL()?n.default.isolateLTR(d(a)):d(a)}}return""};var i=r(a(30733)),s=a(28721),n=r(a(17957)),o=a(11419),l=r(a(68384)),d=(0,i.default)((e=>"Server"===e?e:(0,s.formatPhone)(e)))},24996:(e,t,a)=>{"use strict";var r=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.MediaListener=t.SelectionListener=t.WhileFocusedListener=void 0;var s=i(a(2784)),n=r(a(79711)),o=r(a(20642)),l=r(a(40207));class d extends s.PureComponent{constructor(...e){super(...e),this.scrollMsg=(e,t)=>{this.props.parent.scrollMsg(e,t)},this.flashFocusedMsg=()=>{this.props.parent.highlight()}}componentDidMount(){this.props.listeners.add(n.default,"scroll_to_focused_msg",this.scrollMsg),this.props.listeners.add(n.default,"flash_focused_msg",this.flashFocusedMsg)}render(){return null}}var u=(0,o.default)(d);t.WhileFocusedListener=u;class c extends s.PureComponent{constructor(...e){super(...e),this.onSelectChange=e=>{this.props.parent.onSelectChange(e)}}componentDidMount(){var{listeners:e,msgId:t,selectedMessages:a}=this.props;e.add(a,t,this.onSelectChange)}componentDidUpdate(e){var{listeners:t,msgId:a,selectedMessages:r}=this.props;e.selectedMessages!==r&&(t.remove(e.selectedMessages,a,this.onSelectChange),t.add(r,a,this.onSelectChange))}render(){return null}}var h=(0,o.default)(c);t.SelectionListener=h;class f extends s.PureComponent{componentDidUpdate(){this.props.parent.forceUpdate()}render(){return null}}f.CONCERNS={mediaData:["isGif"]};var p=(0,l.default)(f,f.CONCERNS);t.MediaListener=p},88446:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(46378),s=r(a(22885));function n(e){return(e.getHours()<<6|e.getMinutes())<<5|e.getSeconds()/2}function o(e){return(e.getFullYear()-1980<<4|e.getMonth()+1)<<5|e.getDate()}var l=/[^\x00-\x7F]/g;t.default=class{constructor(){this.files=[],this.filenameCount={}}add(e,t,a=new Date){var r=function(e){return e.replace(/\\/,"/").replace(l,"")}(t);this.filenameCount[r]>=0?(this.filenameCount[r]+=1,r=r.replace(/\.(\w+)$/," ("+this.filenameCount[r]+").$1")):this.filenameCount[r]=0,this.files.push([e,{crc:(0,s.default)(e),path:r,date:a}])}create(){var e=0,t=0,a=0,r=[],s=[];this.files.forEach((l=>{var[d]=l,u=d.size(),c=function([e,{path:t,crc:a,date:r}]){var s=new i.Binary(void 0,!0);return s.ensureCapacity(30+t.length),s.writeUint32(67324752),s.writeUint8(10),s.writeUint8(0),s.writeUint16(0),s.writeUint16(0),s.writeUint16(n(r)),s.writeUint16(o(r)),s.writeUint32(a),s.writeUint32(e.size()),s.writeUint32(e.size()),s.writeUint16(t.length),s.writeUint16(0),s.writeString(t),s}(l),h=function([e,{path:t,crc:a,date:r}],s){var l=new i.Binary(void 0,!0);return l.ensureCapacity(46+t.length),l.writeUint32(33639248),l.writeUint8(10),l.writeUint8(0),l.writeUint8(10),l.writeUint8(0),l.writeUint16(0),l.writeUint16(0),l.writeUint16(n(r)),l.writeUint16(o(r)),l.writeUint32(a),l.writeUint32(e.size()),l.writeUint32(e.size()),l.writeUint16(t.length),l.writeUint16(0),l.writeUint16(0),l.writeUint16(0),l.writeUint16(0),l.writeUint32(0),l.writeUint32(s),l.writeString(t),l}(l,a),f=c.size()+u;a+=f,e+=f+h.size(),t+=h.size(),s.push(c,d),r.push(h)}));var l,d,u,c,h=(l=this.files.length,d=t,u=a,(c=new i.Binary(void 0,!0)).ensureCapacity(22),c.writeUint32(101010256),c.writeUint16(0),c.writeUint16(0),c.writeUint16(l),c.writeUint16(l),c.writeUint32(d),c.writeUint32(u),c.writeUint16(0),c),f=new i.Binary(void 0,!0);return f.ensureCapacity(e+h.size()),f.write(...s,...r,h),f}}},59321:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return Promise.all(e.map((({blob:e})=>function(e){var t;return new Promise(((a,r)=>{(t=new FileReader).addEventListener("loadend",(()=>{a(i.Binary.build(t.result))})),t.addEventListener("error",(e=>r(e))),t.readAsArrayBuffer(e)}))}(e)))).then((t=>{var a,r=new s.default;return t.forEach(((t,a)=>r.add(t,e[a].name))),a=r.create(),new Blob([a.readByteArray()],{type:"application/zip"})}))};var i=a(46378),s=r(a(88446))},53139:(e,t,a)=>{e.exports=a.p+"img/rooms-2x_909204b15b49fc2ef16b123e8afc3bf0.jpg"},29098:(e,t,a)=>{e.exports=a.p+"img/rooms-dark-2x_e4f7bea856269e5e75cef04bbbf104a4.jpg"},58207:(e,t,a)=>{e.exports=a.p+"img/rooms-dark_88f4fbf81adf3532145c6eb491776f06.jpg"},57765:(e,t,a)=>{e.exports=a.p+"img/rooms_ddca60c97a36e2b80c29bce69502c93b.jpg"},59984:(e,t,a)=>{e.exports=a.p+"img/sticker-empty_9d7feb47a66ef5b59cc731acafd02266.png"},94883:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_1VwF0",child:"_2p30Q"}},78714:(e,t,a)=>{"use strict";a.r(t),t.default={addToCartIcon:"_2suEa"}},30950:(e,t,a)=>{"use strict";a.r(t),t.default={archivedIcon:"_3lAfe",unreadArchivedCount:"oyuPj"}},39594:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_25tHC"}},84621:(e,t,a)=>{"use strict";a.r(t),t.default={actionLink:"GLTDs",chevron:"_1__M6",actionText:"lHWcP"}},51421:(e,t,a)=>{"use strict";a.r(t),t.default={action:"_1fl3S",wrapper:"_18NVz",butterbar:"_1ADuG",icon:"ns-Tk",body:"_2awml",controls:"rHV-e",controlsIcon:"_3XuJO",title:"_1wQdF",text:"_21weU",notification:"_1Lctt",update:"G9o7j",computer:"_2cSPm",phone:"G3yfJ",battery:"QzGkw",notice:"_5Z5dG",noticeSmb:"_3KPPe",noticeSvgWrapper:"_1uGGF",fatalSvgWrapper:"_2CU1B",fatal:"_4d09T"}},19475:(e,t,a)=>{"use strict";a.r(t),t.default={btnContext:"dNJHX",focusAnimation:"_25T1J",focusAnimationKeyframes:"_2EF3V",product:"rvH9x"}},48880:(e,t,a)=>{"use strict";a.r(t),t.default={chatstateTyping:"_1JCRe"}},28714:(e,t,a)=>{"use strict";a.r(t),t.default={markerAdmin:"_33IQJ",markerInvited:"_2E2sG",chatControls:"_1zL23",screenName:"ekBrd",contactSmall:"_2WBxE"}},51758:(e,t,a)=>{"use strict";a.r(t),t.default={icon:"_2TiQe",iconPinned:"_3EhXO",archived:"_2SDbp"}},33359:(e,t,a)=>{"use strict";a.r(t),t.default={italic:"_2MgHs",product:"_33Hg2",last:"_1DB2K"}},40722:(e,t,a)=>{"use strict";a.r(t),t.default={ack:"_1Tnge",ackBlue:"qfllr"}},39399:(e,t,a)=>{"use strict";a.r(t),t.default={symbol:"DcZKr",margin:"_2L4Uz",miss:"_19Ppi",pttBlue:"_3fLTW",pttGreen:"_3Bzv0"}},58362:(e,t,a)=>{"use strict";a.r(t),t.default={statusLoading:"_2RfNG"}},99165:(e,t,a)=>{"use strict";a.r(t),t.default={count:"_38M1B"}},46394:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_3IGMG",btnActive:"_27svr",btnAction:"_3aW7G",controlsSummary:"_3JBJ3",confirm:"_2iXXq",summaryText:"_2jeJx",item:"nHv68"}},28080:(e,t,a)=>{"use strict";a.r(t),t.default={listUser:"_1KBFI",listUserBeta:"_1kiSe",betaIcon:"_3q-bb",betaIconText:"_25ZmH",header:"_1R3Un",listControls:"_2XP8p"}},97838:(e,t,a)=>{"use strict";a.r(t),t.default={chatListPanel:"_3U29Q",panelBody:"F-0gY",panelSearch:"SgIJV",spinner:"f04W5",unreadContainer:"_28XyA",unread:"k1drS",unreadBody:"_2xrLr",unreadIcon:"_15PEz"}},74269:(e,t,a)=>{"use strict";a.r(t),t.default={checkboxChatWrapper:"_21xgG",checkboxChatControl:"_1YJLZ",labelSelection:"_3Fvmx"}},17110:(e,t,a)=>{"use strict";a.r(t),t.default={selectedListContainer:"_1cr8H"}},46526:(e,t,a)=>{"use strict";a.r(t),t.default={iconSpinner:"_2FQDl",iconCloseSearch:"_1QWS8",iconLabelSelect:"_3xzAH",iconMorph:"_1rPZq",inputPlaceholder:"_2MwRD",labelSearchPlaceholder:"_2Wk2O",listSearch:"_3LX7r",contInputSearch:"RPX_m",active:"_1brJQ",iconSearchMorph:"_1Ek-U",iconMorphSearch:"_2w7RB",iconMorphBack:"_1-jFy",kind:"_3H1Lp",labels:"_2wW5w",kindName:"_3el0F",filterTitle:"_1qp5u"}},20838:(e,t,a)=>{"use strict";a.r(t),t.default={annotation:"_1Iw92",tooltip:"_16Vox"}},61104:(e,t,a)=>{"use strict";a.r(t),t.default={container:"JRQje"}},90631:(e,t,a)=>{"use strict";a.r(t),t.default={badge:"_3mt1A",icon:"-w2cT",pending:"_3yP6N",warning:"_1zUiE"}},48290:(e,t,a)=>{"use strict";a.r(t),t.default={border:"RJQTy"}},58520:(e,t,a)=>{"use strict";a.r(t),t.default={chat:"_2Z4DV",chatAvatar:"_2GAT7",chatBody:"TbtXF",chatDetails:"_1vts9",chatMain:"_2pkLM",noDelete:"_2Gis3",chatSecondary:"_1SjZ2",chatTitle:"_3Dr46",chatStatus:"_2vfYK",chatMeta:"_15smv",unread:"_1V5O7",active:"_2GVnY",chatDrag:"_157ZL",idle:"_3lDa2",isMuted:"_2yGV5",themeMessage:"_3mMG5",themeSearch:"_1yWgH",themeDrawerList:"_25uA8",themeStatus:"_2v36_",themeCheckbox:"gAmmU",themeIdentity:"_1lyeT",themePlain:"_3nJaS",themeAddItem:"umq9U",themeAddItemPlaceholder:"_1sfOJ",themeListNames:"_1D_0o",member:"_9cawA",themeLabel:"_38kdg",groupV4Invite:"_3bAWs",cartProduct:"_31oBd",orderProduct:"V2o6Z",product:"_7W2oc",media:"_3UX25",listButton:"_3RCKI",listMsg:"_16bJ1",archivePanel:"_2yCbQ"}},95122:(e,t,a)=>{"use strict";a.r(t),t.default={chatSubtitle:"YmixP",chatSubtitleHeader:"fKfSX",chatSubtitleText:"_7yrSq"}},35905:(e,t,a)=>{"use strict";a.r(t),t.default={checkboxContainer:"_11nSm",containerDisabled:"_3MAli",checkbox:"_1PhzV",checkmark:"_1o8v1",partialCheckMark:"_2rbom",checkedCheckbox:"_3OPbH",checkedCheckmark:"_7cIil","checkmark-expand":"Jbtvt",checkmarkExpand:"Jbtvt",uncheckedCheckmark:"_2bXoJ",disabled:"_3i-t4",a11yHidden:"D5KxD",a11YHidden:"D5KxD"}},66692:(e,t,a)=>{"use strict";a.r(t),t.default={container:"WAOGU",roundIcon:"cZUDv",unchecked:"_3imqP",passive:"_35A8B",uncheckedSystemColor:"WYga3"}},77095:(e,t,a)=>{"use strict";a.r(t),t.default={btn:"_3LLJf",overMedia:"_1v8Vs",btnMediaPrev:"_2Op2j",btnMediaNext:"_1tT0K",disabledBtn:"_1033h"}},23695:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_1RP96",defaultWallpaper:"_1qfDM",icon:"_1dstd",body:"_39KUa",main:"_1gsAf",secondary:"-sOEK",inConversation:"Y_Tzl",inList:"_1gveV"}},13303:(e,t,a)=>{"use strict";a.r(t),t.default={avatar:"-y4n1",avatarDefault:"_27MZN",avatarImage:"_18-9u",isLoaded:"_1bvi5",avatarSquare:"_2YW02",avatarBorder:"_10EGY",status_v3:"_37wPk",statusV3:"_37wPk",wrapper:"_3xDaM",badge:"_2jC5S",badgeIcon:"_1Crzo"}},32514:(e,t,a)=>{"use strict";a.r(t),t.default={docState:"MYzfD",spinner:"_2Mrqr"}},56061:(e,t,a)=>{"use strict";a.r(t),t.default={item:"_2iavx",text:"_3UHfW",hover:"H774S",action:"_2xxet",compact:"_3lsW-",icon:"_3pa6w",emoji:"zlxY1",emojiGrid:"_1V0Of",ellipsify:"_11srW",disabled:"XsEXg",shortcut:"_2CDB7"}},89170:(e,t,a)=>{"use strict";a.r(t),t.default={ellipsify:"_35k-1",inlineblock:"_1adfa",dirMismatch:"_3mEJQ",clickable:"eHxwV",multiline:"_2X0v8"}},81226:(e,t,a)=>{"use strict";a.r(t),t.default={empty:"_2jXbt",emptyTop:"_1Bl8T",compact:"_32hsN",icon:"XcGMi",title:"_3aOS0",text:"_1Z51l",spinner:"_3w8dk",action:"_2D4nl",iconRetry:"_2Y7hF"}},65633:(e,t,a)=>{"use strict";a.r(t),t.default={tooltip:"_1ZBYg","tooltip-left-ltr":"_32muP",tooltipLeftLtr:"_32muP","tooltip-left-rtl":"UZXPg",tooltipLeftRtl:"UZXPg"}},73823:(e,t,a)=>{"use strict";a.r(t),t.default={read_more:"_3WiqP",readMore:"_3WiqP"}},8196:(e,t,a)=>{"use strict";a.r(t),t.default={avatar:"_18F7-",roundBorder:"fglKy",avatarWrapper:"_3VFyD",avatarSvgWrapper:"_2n7Fn",avatarImageWrapper:"_3le87",transition:"xfXHb",isLoaded:"JDx73",centerChild:"_2O4MY",avatarImage:"_2zrad"}},25610:(e,t,a)=>{"use strict";a.r(t),t.default={viewport:"JnmQF",verticalListViewport:"_3QmOg",horizontalListViewport:"_1RGKC"}},31547:(e,t,a)=>{"use strict";a.r(t),t.default={loadingSpinner:"_2u_cJ"}},28787:(e,t,a)=>{"use strict";a.r(t),t.default={item:"_2aBzC"}},26327:(e,t,a)=>{"use strict";a.r(t),t.default={hidden:"S4f3Y",container:"_3Y-Yn"}},43406:(e,t,a)=>{"use strict";a.r(t),t.default={controls:"_1DzQ6","progress-container":"_1Tajs",progressContainer:"_1Tajs",spinner:"_1vKld",btnMeta:"FgdlY",button:"_1yOQ-",icon:"_3Zxpe",cancel:"_2gwhV",disabled:"JY9-s",cursorPointer:"_2j_hL",play:"_3MSVi",iconMeta:"_1Z2Bl"}},25997:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_1UQjI",child:"_1TKV3"}},44417:(e,t,a)=>{"use strict";a.r(t),t.default={menu:"_1ljzS",menuDefault:"pnYZD",menuStrong:"_2Ryya",menuInverse:"_13CXK",item:"_2n-zq",menuNarrow:"_2rVVT",active:"_3zHcq",selected:"_1Ctiz",disabled:"_32Z1T",itemText:"_2OQU5"}},94660:(e,t,a)=>{"use strict";a.r(t),t.default={multiControls:"_2rwxZ",chatListPanel:"_29mYj",drawerHeader:"_1g25a",multiselectIcon:"mAgFx",multiCount:"_2yoUA",mediaGalleryTheme:"d7ZrF"}},43050:(e,t,a)=>{"use strict";a.r(t),t.default={moveResizeComponentContainer:"_1Rm6W",resizer:"_27rcN",topResizer:"_3BEmS",bottomResizer:"_2-Yyg",leftResizer:"_2n2JM",rightResizer:"_2I8VO",topRightResizer:"_3_9e6",topLeftResizer:"_1Mgib",bottomRightResizer:"_3RZ4L",bottomLeftResizer:"_3ZzP2",moveable:"_1Ctyg",defaultCursor:"_38RQM"}},4018:(e,t,a)=>{"use strict";a.r(t),t.default={multiControls:"_2ngbn",multiselectIcon:"_1toeX",multiCount:"vE--2",mediaGalleryTheme:"_2qjeQ"}},26079:(e,t,a)=>{"use strict";a.r(t),t.default={verified:"_33jgC",psa:"_2597b",icon:"_3OWTC",hasLabels:"N2dUK",labels:"IGI1I"}},50525:(e,t,a)=>{"use strict";a.r(t),t.default={fit:"_1Ivg7",fitRelative:"VCsxv",fitScaledown:"_1K2-v",fitZoomin:"_31unk",nativeCover:"h5LiH",nativeScaleDown:"_2NzCI"}},29516:(e,t,a)=>{"use strict";a.r(t),t.default={body:"_28-ha",container:"_2gXlr",imageContainer:"_1PTSV",lazyLoadRetry:"_1NHIU",defaultIcon:"_1Gyz6"}},62969:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_1C2Q3"}},89678:(e,t,a)=>{"use strict";a.r(t),t.default={sensor:"_3q7pL"}},63353:(e,t,a)=>{"use strict";a.r(t),t.default={gridContainer:"_2VLfg",baseEmoji:"_2UopN",options:"_3vyLk"}},6047:(e,t,a)=>{"use strict";a.r(t),t.default={button:"_3MWau",buttonIcon:"cprpJ",nextButton:"_3acHA",prevButton:"_39Ia_",resizeContainer:"_3bFQ0"}},15301:(e,t,a)=>{"use strict";a.r(t),t.default={"-emoji-width":"44px",emojiWidth:"44px","-emoji-height":"44px",emojiHeight:"44px","-side-margin":"12px",sideMargin:"12px",panel:"_22szd",section:"_2hI6B"}},57656:(e,t,a)=>{"use strict";a.r(t),t.default={bodyContainer:"_1BMu5",list:"_2Tbce",search:"_1krs_",hidden:"_2184C"}},94782:(e,t,a)=>{"use strict";a.r(t),t.default={"-total-search-height":"62px",totalSearchHeight:"62px","-scrollbar-width":"6px",scrollbarWidth:"6px","-windows-scrollbar-width":"8px",windowsScrollbarWidth:"8px","-section-bottom-margin":"12px",sectionBottomMargin:"12px","-title-height":"27px",titleHeight:"27px",container:"_1jQGs",title:"_3rlWr"}},4212:(e,t,a)=>{"use strict";a.r(t),t.default={"-emoji-width":"44px",emojiWidth:"44px",panel:"_1o8ls"}},60585:(e,t,a)=>{"use strict";a.r(t),t.default={emojiPanel:"_12FEz",panelBody:"_2iqca",panelDropdown:"_3DP3Y"}},87180:(e,t,a)=>{"use strict";a.r(t),t.default={text:"_2VYT9"}},67703:(e,t,a)=>{"use strict";a.r(t),t.default={body:"_1qWwG",icon:"_2HJXt",wrapper:"_2Nxcd",container:"_1U-gB",focusBorder:"_3H-tn",preview:"_1clXy"}},87276:(e,t,a)=>{"use strict";a.r(t),t.default={searchContainer:"Rc3nQ",section:"_1jptU",blank:"_3V3jB",row:"_31NZU",noResults:"_1JKx5"}},408:(e,t,a)=>{"use strict";a.r(t),t.default={bodyContainer:"_1IqI5",gifPanel:"_3zt2r",panelBody:"_2ThFr",panelBodyError:"_9Rp1H"}},47577:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_1Q75d",wrapper:"_1Zj0y",innerWrapper:"_1TO8K",starIcon:"_3Y5kH",thumb:"nEDHC",blur:"_1AXvF"}},19893:(e,t,a)=>{"use strict";a.r(t),t.default={pager:"_2JS3V",pagerLeft:"_3sISx",pagerRight:"_26XEv",pagerDisabled:"n_Glb",body:"ZR43g",section:"_18YNn",searchRow:"_38pDI"}},45484:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_3ob6-"}},66049:(e,t,a)=>{"use strict";a.r(t),t.default={tab:"YAIhH",highlightOnFocus:"_1-_ei",menu:"_3XLiO",carousel:"_1eeWL",carouselEnd:"_8CwZN",selected:"_2ON8c"}},66881:(e,t,a)=>{"use strict";a.r(t),t.default={menuTabsMarker:"_1io3J",animate:"_1SzfV",hide:"sqtpU"}},73527:(e,t,a)=>{"use strict";a.r(t),t.default={cancelIcon:"_1hIjJ",inputContainer:"L6jO-",inputEmojiSearch:"_5o68e",searchRow:"_215cl",ffFix:"_1W-H5",rowShadow:"_1T8sW",rowInput:"_2oimd"}},25416:(e,t,a)=>{"use strict";a.r(t),t.default={panelContainer:"_1k55R",panelDropdown:"_1DT3G"}},72874:(e,t,a)=>{"use strict";a.r(t),t.default={tabText:"_1foy2"}},15727:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_1NQpW",containerSearch:"_2ZY-D",panelHeight:"_3sxJO",contentContainer:"_3EY1G",contentContainerSearch:"_2HZEy",bodyContainer:"_3NBUs",emptyContainer:"DZSqe",emptySticker:"WD06l",emptyText:"_2b04F"}},94034:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_133hl",border:"_2PBOM"}},16473:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_2oJE3",retryButton:"_1Hdxn"}},7915:(e,t,a)=>{"use strict";a.r(t),t.default={emptyContainer:"_2kJah",emptySticker:"JrH_m",emptyText:"_3JwNx"}},11992:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_22rlP"}},20932:(e,t,a)=>{"use strict";a.r(t),t.default={unscrollable:"_9b1IR"}},92603:(e,t,a)=>{"use strict";a.r(t),t.default={shadow:"_2HnGZ"}},58881:(e,t,a)=>{"use strict";a.r(t),t.default={container:"cR0ai",stickerPackContainer:"_1SjLi",stickerPackIconWrapper:"_2Ye92"}},21193:(e,t,a)=>{"use strict";a.r(t),t.default={input:"_1JAUF",placeholder:"OTBsx",body:"_2_1wd",default:"_3to_-",compose:"_2x4bz",large:"YOG23",status:"_1aAu5",media:"_3Foy4",invite:"_1kfmw",small:"_3jIJ4","list-search":"_1d1OL",listSearch:"_1d1OL",textInput:"_14P30"}},54359:(e,t,a)=>{"use strict";a.r(t),t.default={emojiSearch:"umIIs",searchBody:"_2ezuB",positioningContainer:"_1xPrU",overlayContainer:"_2gK-X",resultsContainer:"_3yJm7",mediaCaption:"_34E3t",emojiInput:"_1-xnj"}},97580:(e,t,a)=>{"use strict";a.r(t),t.default={mentionsResult:"_2zNFv",selected:"_8RmSF",mediaCaption:"yjMP1",textContact:"_1xqS9",textPushname:"_3btZA",resultImage:"_30ZB_"}},31033:(e,t,a)=>{"use strict";a.r(t),t.default={positioningContainer:"_1p9lF",resultsContainer:"_1tHn5",overlayContainer:"_2vCjo",mediaCaption:"EFTGp"}},86249:(e,t,a)=>{"use strict";a.r(t),t.default={result:"_3I64T",selected:"_3C3JQ",slash:"_3M000",shortcutPrefix:"_3W1V-",shortcutSuffix:"_3DjWg",message:"_1zLRP"}},85682:(e,t,a)=>{"use strict";a.r(t),t.default={positioningContainer:"_33jUX",resultsContainer:"_29bwE",overlayContainer:"_2LMj5"}},52748:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_1bLaw"}},23830:(e,t,a)=>{"use strict";a.r(t),t.default={btn:"SncVf",disabled:"S6srh",large:"_3doiV",small:"_1cglN"}},9140:(e,t,a)=>{"use strict";a.r(t),t.default={clickable:"vzSqE",body:"_1Row8",main:"kia3R",mainEllipsify:"_2wzbH",side:"_3TVPy"}},95969:(e,t,a)=>{"use strict";a.r(t),t.default={container:"-lcoh"}},7765:(e,t,a)=>{"use strict";a.r(t),t.default={hide:"_3ribb"}},3023:(e,t,a)=>{"use strict";a.r(t),t.default={conversation:"_1guNH",placeholder:"_3nWnE",composeBoxQuoted:"_1VmII",quoted:"Jc_g2",stickerPanel:"_30rbI",clickable:"E42C1",showSticker:"_3cs02",fadeIn:"_2Xs6t"}},32455:(e,t,a)=>{"use strict";a.r(t),t.default={"color-accent":"yeBCZ",colorAccent:"yeBCZ","color-danger":"_2xgD1",colorDanger:"_2xgD1","color-dark":"vCuIB",colorDark:"vCuIB","color-secondary":"cpeB8",colorSecondary:"cpeB8","color-muted":"lXktD",colorMuted:"lXktD","color-success":"_21bUp",colorSuccess:"_21bUp","weight-light":"_3-Or1",weightLight:"_3-Or1","weight-normal":"_29Iga",weightNormal:"_29Iga","weight-medium":"_4Jchm",weightMedium:"_4Jchm","weight-semibold":"_391r4",weightSemibold:"_391r4","weight-bold":"jPHDz",weightBold:"jPHDz","size-8":"VLT8j",size8:"VLT8j","size-9":"_4992K",size9:"_4992K","size-10":"_1DyoB",size10:"_1DyoB","size-11":"_3y9sF",size11:"_3y9sF","size-12":"_2KWXe",size12:"_2KWXe","size-13":"qsTJT",size13:"qsTJT","size-14":"_1AJnI",size14:"_1AJnI","size-15":"_3ja-N",size15:"_3ja-N","size-16":"_3EsAO",size16:"_3EsAO","size-17":"rOUL-",size17:"rOUL-","size-18":"u_30I",size18:"u_30I","size-19":"_1TtmI",size19:"_1TtmI","size-20":"_1q4r_",size20:"_1q4r_","size-22":"_18JQV",size22:"_18JQV","size-24":"_1p6Pw",size24:"_1p6Pw","size-26":"_1I9yQ",size26:"_1I9yQ","size-28":"BKJMV",size28:"BKJMV","size-30":"_2NHuO",size30:"_2NHuO","size-32":"_3Q2nA",size32:"_3Q2nA","size-36":"_2Asix",size36:"_2Asix","size-48":"_2VwSE",size48:"_2VwSE","size-60":"_3VzdB",size60:"_3VzdB",title:"_1Kn3o",large:"qpqWq","section-title":"_3weD7",sectionTitle:"_3weD7","section-title-larger":"_3HZiZ",sectionTitleLarger:"_3HZiZ",small:"_201BQ",muted:"_37Hn4","muted-small":"_3iU5s",mutedSmall:"_3iU5s",plain:"_3yN28","popup-title":"_5Z9lA",popupTitle:"_5Z9lA"}},16661:(e,t,a)=>{"use strict";a.r(t),t.default={textInput:"_2O6GW",labelText:"gqrht",hideFloatingLabel:"_1tX37",float:"_2eIqJ",spacer:"jDADV",noPlaceholder:"_1lemF",wrapper:"_3rhi1",locked:"_1nQew",errorText:"_2HC6A",textError:"V8lcE",textActive:"e1K_H",iconMainContainer:"_2zDdK",iconsEditContainer:"_3tDug",invite:"_26uSD",emojiBtn:"_3xyJi",charCounter:"_3aHpZ",iconMain:"_2x6Ym",iconSpinner:"BuoQI",noErrorInfo:"_3tv9H",infoStrip:"Y0dFn",inputLarge:"_3Ihuv",active:"_1fB8E",emptyValPlaceholder:"TVlZg",more:"_1oQqb",emojiText:"_1oORQ",groupInfoName:"_3Ss_B",small:"_3r0ZT",desaturated:"_25Mjf"}},65549:(e,t,a)=>{"use strict";a.r(t),t.default={tooltip:"_3u6fL","menu-tooltip":"_2Ss2P",menuTooltip:"_2Ss2P",left:"_3wxDj"}},72864:(e,t,a)=>{"use strict";a.r(t),t.default={button:"_1UTQ6"}},13004:(e,t,a)=>{"use strict";a.r(t),t.default={wrapper:"_27NpB",icon:"_3VEm6",verifiedText:"V0Isi",divider:"_24k22"}},2694:(e,t,a)=>{"use strict";a.r(t),t.default={video:"_2oX7m"}},51383:(e,t,a)=>{"use strict";a.r(t),t.default={adminBtn:"_17SvR"}},92338:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_3Urun",text:"_3VBtA",messageNewNumberButton:"_3bbsI"}},36329:(e,t,a)=>{"use strict";a.r(t),t.default={"-overlay-border-right":"1px",overlayBorderRight:"1px","-overlay-border-left":"1px",overlayBorderLeft:"1px",footer:"_3uxr9",positioningContainer:"_1gNA1",overlayContainer:"-fxbk",blockCompose:"vR1LG",inputContainer:"_2A8P4",boxPanelWrapper:"_23e-h",attachButtonContainer:"_2C9f1",childPadding:"EBaI7",disabled:"_1NxrT",btnSend:"_1E0Oz",focusAnimation:"_2A1WX",focusAnimationKeyframes:"_2uvhV"}},37264:(e,t,a)=>{"use strict";a.r(t),t.default={"-open-menu-width":"110px",openMenuWidth:"110px",menu:"_291Eb",button:"_2zMTD",open:"_2mQrI",full:"_2MeuX",closeButton:"_3js56",firstButton:"_2NHIO",secondButton:"igz8o",thirdButton:"kwzXH"}},56951:(e,t,a)=>{"use strict";a.r(t),t.default={"-item-spacing":"16px",itemSpacing:"16px","-item-width":"26px",itemWidth:"26px",container:"_3k0dC",active:"_3Flx8",square24:"rjHB8",square26:"VRn4o",top:"_15ScS",padding:"_3KT4J"}},69327:(e,t,a)=>{"use strict";a.r(t),t.default={panel:"_3_5OP",body:"B3rjP",cancelButton:"UUcHl"}},73554:(e,t,a)=>{"use strict";a.r(t),t.default={tile:"IeYBo"}},12893:(e,t,a)=>{"use strict";a.r(t),t.default={pane:"_1gL0z",selectable:"_2p49L",empty:"_2VvGi",incoming:"_2wFt8",iconDown:"_3P-mY",ffFix:"_2VTX2",unread:"_3qWWi"}},51971:(e,t,a)=>{"use strict";a.r(t),t.default={footer:"_3SUQR",body:"_2wjK5",filler:"_2sw49",footerMessage:"gaV0P",subheader:"_1C6f8"}},88995:(e,t,a)=>{"use strict";a.r(t),t.default={pane:"_3AUV4",previewPane:"_3VoEp",header:"w54d5",title:"oGu7t"}},90136:(e,t,a)=>{"use strict";a.r(t),t.default={subheader:"mn_vp",main:"AEx1p",closeBtn:"_1p8Wa"}},59867:(e,t,a)=>{"use strict";a.r(t),t.default={body:"_1r11a",text:"q9OPd",hidden:"_2CxtW",desc:"fQ7q0",more:"_1yUfw"}},1374:(e,t,a)=>{"use strict";a.r(t),t.default={attachMenuContainer:"_1ld-u",iconsItem:"_1pLAS",iconImage:"_1SWzr"}},70477:(e,t,a)=>{"use strict";a.r(t),t.default={chatControls:"_1IeOz",chatAvatar:"fBf_N",divider:"_1Ut1f",chatHeader:"_1-qgF",chatBody:"_2uaUb",chatMain:"z4t2k",chatTitle:"_2KQyF"}},96115:(e,t,a)=>{"use strict";a.r(t),t.default={preview:"_1m1gD",bubbleIn:"_1_T8o",bubbleOut:"_1pwLR",noThumbContainer:"_3inup",noThumbIcon:"_3979X",media:"u4d-M",iconStar:"_1tPI1",isInvite:"_3C0sS",title:"_2QCcV",description:"_1LQD0",source:"_204wf",body:"_1D54Q",isCompose:"_2vA32",extended:"_3IP2x"}},25461:(e,t,a)=>{"use strict";a.r(t),t.default={wrapper:"_2hDby",button:"_3M4BR"}},2182:(e,t,a)=>{"use strict";a.r(t),t.default={albumGridClass:"_2IsiC",albumTopLeft:"_2aWG9",albumTopRight:"_1z91p",albumBottomLeft:"_2hTWW",albumBottomRight:"_29rD6",numberText:"_1Yoli"}},59517:(e,t,a)=>{"use strict";a.r(t),t.default={icon:"_1b-yo"}},9275:(e,t,a)=>{"use strict";a.r(t),t.default={bubble:"_1RXxK",hasAuthor:"_33A8G",forwardedIndicator:"_2FbRO",hasQuote:"gfZUN",meta:"hZMQb",bubbleOut:"_3MHVj",bubbleIn:"_3aoAS",body:"_2rB2Y",player:"Hei0U",avatarContainer:"cZj1z",playbackRateButtonContainer:"_2mui8",playbackRateButtonContainerVisible:"_3QU33",avatar:"_23QsC",avatarVisible:"_2qfjB",status:"_1S-g9",author:"LGz0y",isForwarded:"Axxlt",quote:"_2Zrq9",isGallery:"_1XYyT",ctwaContext:"_2KauZ"}},13098:(e,t,a)=>{"use strict";a.r(t),t.default={author:"_26iqs",name:"_1Lc2C",number:"ZJv7X",screenName:"_2F1Ns",verifiedIcon:"_2tbuI",hoverable:"UxSU9"}},84221:(e,t,a)=>{"use strict";a.r(t),t.default={actions:"_3LobI",actionsBtn:"_34JD_",noDivider:"_1d5Yq"}},3535:(e,t,a)=>{"use strict";a.r(t),t.default={buttonContainer:"WkAc6",withLargeButtonsSpace:"K74C8",buttonWrapper:"Xc0DA",disabled:"aZeWO",stacked:"_52r6l",buttonLabel:"OHYcl"}},39012:(e,t,a)=>{"use strict";a.r(t),t.default={action:"_2MFDE"}},58353:(e,t,a)=>{"use strict";a.r(t),t.default={preview:"_1RPRP",bubbleIn:"_2_i96",bubbleOut:"AF1dH",isCompose:"_3ykTv",noThumbContainer:"_3hqfs",noThumbIcon:"_3ty0l",media:"_2jtnw",title:"bkf8p",description:"_2HyDI",source:"_2bcVi",body:"_1P4HL"}},426:(e,t,a)=>{"use strict";a.r(t),t.default={clickable:"_8TE_E"}},66007:(e,t,a)=>{"use strict";a.r(t),t.default={wrapper:"_3wD43",wrapperIn:"_30YSI",wrapperOut:"_3HmHK",posBottom:"jWjEh",posTop:"_1lddU"}},48508:(e,t,a)=>{"use strict";a.r(t),t.default={bubble:"_3KIS4",templateBubble:"_10rvA",isPreview:"_2kZMf",isGallery:"_3yEbM",buttonContainer:"_1s_fV",deepContainerContent:"_25XuB",docMeta:"_1-Yga",metaValue:"_1YeeQ",text:"_3tOOP",icon:"uno4I",filetypeIcon:"_2FqtA",thumbContainer:"bXxhb",thumb:"_1VkQG",ctwaContext:"_3kMUY"}},71582:(e,t,a)=>{"use strict";a.r(t),t.default={container:"hsnOd",error:"_17dGQ",compact:"zJfMP"}},51092:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_2xq9W",icon:"Sqh9W",iconHighlyForwarded:"_1lehT",text:"_3SReC"}},39815:(e,t,a)=>{"use strict";a.r(t),t.default={msg:"_1-D-8",hover:"_3kRTS",current:"jf2u-",active:"_1nsAh",focusAnimation:"_2qa4_",focusAnimationKeyframes:"_1ELYG"}},43429:(e,t,a)=>{"use strict";a.r(t),t.default={"-width-picture-bubble-inner":"330px",widthPictureBubbleInner:"330px","-padding-picture-bubble":"3px",paddingPictureBubble:"3px",bubble:"_2kMYF",vendor:"_1Y3bg",meta:"_2ZluI",hasCaption:"_1EJVi",author:"sbt0O",forwarded:"_2xZSm",forwardedIndicator:"_1eAVR",hasAuthor:"_2XKOX",quote:"a4AKM",thumb:"_2I8rV",caption:"_2smyh",isPSA:"_3tIEf",isPsa:"_3tIEf",thumbVideo:"_2B7z_",thumbImage:"_2vPDe",isGallery:"_2qaex",isInfo:"_3xqh_",ctwaContext:"_1AyjL"}},24510:(e,t,a)=>{"use strict";a.r(t),t.default={notification:"_1grL7",icon:"t5BOS"}},3837:(e,t,a)=>{"use strict";a.r(t),t.default={stickerItem:"_3Q9-P",stickerMenu:"_1Sr3-"}},91276:(e,t,a)=>{"use strict";a.r(t),t.default={outerContainer:"_3JzhZ",innerContainer:"_3ACAI"}},7341:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_1wYA-",status:"_3MspY",caption:"_3FDho",linkPreview:"_159zr",expired:"_2po2q",noCaption:"_3njyH",meta:"qsKu5"}},3564:(e,t,a)=>{"use strict";a.r(t),t.default={highRes:"fYhHq",wrapper:"gejrB",large:"_1aKag",lowRes:"_31ufm",medium:"_2wpkI",xlarge:"_3QdNb",animation:"_2jtOK",invisible:"_3h93R",heartbeat:"_1PtOP"}},33545:(e,t,a)=>{"use strict";a.r(t),t.default={bubble:"_2hOBa",container:"_125fz",title:"_1QQsz",meta:"_2p3sf",footer:"_1nvOK",actionContainer:"_26i65",action:"Fwry-",icon:"_2Ff6M"}},59354:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_3sKkW",clickable:"_3pUPq",caption:"_1Y98A",author:"_2Rot7",meta:"_1PYeE",hasCaption:"jKEDP",actionButton:"_3Kc6o",thumb:"_2zgTa",avatar:"TCm8O",map:"_2Siph",overlay:"_3yELo",expired:"_2ZnxN",thumbBody:"H73KR",quote:"_3QHS3",status:"_3emoq",statusIcon:"_3qB6O",statusText:"_3T-8d",stopLocation:"_3R2V5",viewLocation:"_3GQ8t",hidden:"_1q6I2"}},39002:(e,t,a)=>{"use strict";a.r(t),t.default={hasText:"_3e5Ly",noText:"A-ltU",quote:"_2Hd8x",forwarded:"_1XQWP",hasAuthor:"mr4tO"}},25085:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_12-qh",link:"_1LxjU",title:"_1LNd2",address:"_1DmeC",hasURL:"_1WQjV",hasUrl:"_1WQjV",text:"_3L4wF",author:"_2cXTZ",forwarded:"fBklU",forwardedIndicator:"_3ZbC1",hasAuthor:"QZBm2",meta:"QvIkP",thumb:"YPXVj",thumbBody:"_2E5cJ",quote:"ygNlT",hasCaption:"_1i_Mu",caption:"_1FC6e",ctwaContext:"f05lR",ctwaContainerWidth:"_1-L1I"}},6982:(e,t,a)=>{"use strict";a.r(t),t.default={bubble:"l7zgr",hasCaption:"_3yIjn",meta:"_3BpEX",isPSA:"nawsf",isPsa:"nawsf",author:"_2XPsE",forwarded:"_17-wi",forwardedIndicator:"_3csgL",hasAuthor:"_1tMaT",quote:"_2C0XZ"}},48726:(e,t,a)=>{"use strict";a.r(t),t.default={preview:"_3e0Yi"}},66676:(e,t,a)=>{"use strict";a.r(t),t.default={context:"_3qSKL",contextIn:"_3dGJA",contextOut:"_39Lm1",contextIcon:"QhSbI",contextSpecial:"_3Pflj",contextInverse:"_73HXo",contextMedia:"_3_UDv",contextMediaLtr:"_36H8K",contextMediaRtl:"_3b-99",contextMediaDocument:"_1OWwa",contextIconMedia:"_3Y9uf",contextDoc:"jOXGr",contextPtt:"Xnxsp",contextPttFix:"_3R5rJ",contextMultiVcard:"ie5Hj",contextStickerAuthor:"_1Y0H0",contextStickerTransparent:"_3mmP7",badge:"_1c5In",contextStickerInverse:"_1h2Dg"}},55168:(e,t,a)=>{"use strict";a.r(t),t.default={author:"_2l6Ej",hasForwarded:"_3lFXV",caption:"_320oW",forwardedIndicator:"_2gW-v",hasAuthor:"dyoEH",meta:"I3xuS",hasCaption:"_2WDNO",quote:"_3dmX1"}},3456:(e,t,a)=>{"use strict";a.r(t),t.default={text:"_3ExzF",template:"_1wF3I",placeholder:"_1ePMJ",spacer:"_1Bd9o",icons1:"_2ScdV",icons2:"_3thlD",icons3:"_3PSrh",icons4:"_3ro77"}},77602:(e,t,a)=>{"use strict";a.r(t),t.default={meta:"UFTvj",chromeFix:"_89eWV",metaLight:"nszPL",timestamp:"_17Osw",icon:"_2IyWz",status:"_2nWgr",labels:"OXRx_"}},96515:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_2Qg8V",isChecked:"_3GtSJ",gallery:"_27vJa"}},8408:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_1vepZ",icon:"BLU6C",text:"_1we7F",containerSmallIcon:"_3dT2h"}},60240:(e,t,a)=>{"use strict";a.r(t),t.default={wrapper:"_9leQM"}},21206:(e,t,a)=>{"use strict";a.r(t),t.default={bubble:"_18kCM",isGallery:"_3sp6l",isPreview:"_304y-",quote:"_24ZN-",hasAuthor:"_178Vm",vcard:"_1dJ-b",author:"_2m6tY",hasQuote:"_2E8CQ",body:"_1tv-I",avatar:"_2YORQ",meta:"_2cI32",name:"JpOli",image:"_2UNii"}},78419:(e,t,a)=>{"use strict";a.r(t),t.default={icon:"_3RxeN",bizInfo:"_3J_bY",iconE2E:"_2tZna",iconSupportGroup:"_1H1wC",iconMiss:"_3S8Aw"}},85152:(e,t,a)=>{"use strict";a.r(t),t.default={orderPreview:"_3Yk7i",meta:"_1Hz6A",messageText:"_3v99V"}},85673:(e,t,a)=>{"use strict";a.r(t),t.default={icon:"_2UYfD",text:"_7Qr5E"}},74569:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_18zOU",thumb:"_3cG5B",amount:"_3BDFt",amountCurrency:"_3s9ee",amountInteger:"_1O30q",amountDecimal:"_1A-xX",isQuoted:"_12zgV",isQuotedInComposeBox:"_3s--w"}},77509:(e,t,a)=>{"use strict";a.r(t),t.default={icon:"_3pWxf",success:"ECFcz",failed:"_1G2Xo",pending:"_3x171",iconSymbol:"_2eqxN",compact:"_2k85i"}},64270:(e,t,a)=>{"use strict";a.r(t),t.default={body:"U1Ljm",bubbleIn:"_3SImt",bubbleOut:"_2uZBn",bodyIcon:"ab4lU",bodyIconMultiline:"Yt7uf",bodyText:"_2tYZr"}},37270:(e,t,a)=>{"use strict";a.r(t),t.default={status:"_1OU_N",failed:"_8ztqd",pending:"_19LNy",success:"_2NUej"}},76884:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_7pLro",isQuoted:"_2sOqR",name:"_3Y_LK"}},56892:(e,t,a)=>{"use strict";a.r(t),t.default={hasText:"_2r9Nu",noText:"_3QzbI",quote:"_2xxtd",forwarded:"o4Lv2",hasAuthor:"_kOmZ"}},10667:(e,t,a)=>{"use strict";a.r(t),t.default={bubble:"_2Ro1i",portrait:"_1s1cU",isPreview:"_1MU5C",author:"_3Uvwo",forwarded:"_2SRHP",forwardedIndicator:"lVh2G",hasAuthor:"i2mgx",meta:"_28Ddf",hasCaption:"WrZZn",caption:"_3_qeO",isPSA:"_2Uii8",isPsa:"_2Uii8",quote:"UTVGx",thumb:"_2MfUK",isAlbum:"_3RDut",thumbBody:"_1-59F",thumbBodyLores:"_3Oxpo",isGallery:"_2YBLj",overlay:"_2IRpb",overlayAlbumText:"_2X_ix",ctwaContext:"vEuFm"}},94842:(e,t,a)=>{"use strict";a.r(t),t.default={wrapper:"_18LV9",badge:"_2Bciv",badgeIncoming:"_300tO",badgePlayed:"_1Qcn0",badgeOutgoing:"QBevk"}},92512:(e,t,a)=>{"use strict";a.r(t),t.default={bubble:"RvNLp",productInfo:"_9UqEG",author:"_1QGD8",title:"_1EV80",subtitle:"_34AgG",thumb:"_21mq3",productContainer:"tz2dS",bubbleIn:"_2Iesw",bubbleOut:"g1JaU",productCta:"_2kJWh"}},93579:(e,t,a)=>{"use strict";a.r(t),t.default={image:"zuR_e",default:"_3qrn5",container:"_2Tj59",hasBorder:"_3h5jH",dimmed:"_2phop",hasInnerBorder:"_2U5Rb",hasLargeInnerBorder:"_yEfI",square:"_18V0W"}},89516:(e,t,a)=>{"use strict";a.r(t),t.default={audio:"GrwLb",controls:"E2qvM",body:"_23Fho",scrollPositionDetector:"apLsl",button:"_28Dfr",spinner:"_27nSM",metadata:"_2O_ZT",isGallery:"_3hqae"}},10078:(e,t,a)=>{"use strict";a.r(t),t.default={icon:"_31cTF",incoming:"_1Ah3d",outgoing:"_1Kn3J",blue:"_3at-l",gray:"_1-95w",green:"_1osRV",wrapper:"_27-_U"}},8584:(e,t,a)=>{"use strict";a.r(t),t.default={imageWrapper:"r-S76",msgImage:"_16BuV",composeBox:"_2Apkh",statusV3:"_3xGd9",isPayment:"_1Yrvm",image:"_2wzt8"}},40675:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_2w_1z",quotedMsg:"_3Ppzm",statusV3QuotedMsg:"_2I7QC",composeBoxQuotedMsg:"_3OUXw",hover:"_2nrNO",colorBar:"_3eu_9",msgBody:"_2mGGI",msgText:"_3Xmdf"}},77837:(e,t,a)=>{"use strict";a.r(t),t.default={messageText:"_31DtU",dimmed:"_2tzPY",composeBoxQuotedMsg:"_1WWEK",listMessageQuote:"_2o_fP"}},28670:(e,t,a)=>{"use strict";a.r(t),t.default={hover:"_1kGvv",quotedMsg:"yzlU_",msg:"_FMsy",colorBar:"_3Fjb_",msgBody:"_2C8rl",composeBoxQuotedMsg:"isU9W"}},87472:(e,t,a)=>{"use strict";a.r(t),t.default={icon:"q1nW8"}},65857:(e,t,a)=>{"use strict";a.r(t),t.default={caption:"Q7F9l",meta:"_3tGmI"}},5593:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_20WAH",track:"_3hTRQ",containerIncomingPlayed:"_194ns",containerIncomingUnplayed:"_3diCI",containerOutgoingPlayed:"_3TtsT",containerOutgoingUnplayed:"_3nruq",thumbTravelContainer:"_14KWR",thumbContainer:"_2Sbsq",thumb:"_1Mizi",containerDisabled:"_2sj7z",progress:"_4aYDG"}},51549:(e,t,a)=>{"use strict";a.r(t),t.default={title:"Oc_IQ",titleMain:"_1gbaa",meta:"_10ebg",chat:"_1ba5G",divider:"_39CDt",chevron:"_9KpMb",avatar:"_2nys0",author:"_3wG7U"}},59495:(e,t,a)=>{"use strict";a.r(t),t.default={light:"wDGIu",ackBlue:"_1RD_6"}},64061:(e,t,a)=>{"use strict";a.r(t),t.default={hasAuthor:"TC9NX",quote:"_2ZZ7M",bubble:"_3rlNI",meta:"_3ogTW",isTransparent:"_2DGdv",body:"_3wSPP",author:"_2JMjO",isFirst:"_2Q_wE",ctwaContext:"DXk6a"}},96410:(e,t,a)=>{"use strict";a.r(t),t.default={cursorAuto:"_18P7y"}},33492:(e,t,a)=>{"use strict";a.r(t),t.default={sticky:"_2CpTm"}},60769:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_1eyRp",isLinkMsg:"_1U67t",icon:"FFC3m",text:"_1lacC",ctwaContainer:"kncAq"}},4353:(e,t,a)=>{"use strict";a.r(t),t.default={actionButton:"_2aTjy",actionText:"_232Vs",disabled:"_13WJZ",buttonContainer:"_7muqI",firstButton:"_1h0qF",quickReply:"qttER",callUrl:"_JAbc",icon:"_1PvZd"}},52283:(e,t,a)=>{"use strict";a.r(t),t.default={footer:"_1jUmV",isMedia:"_9FgZd",dirMismatch:"D2nLo"}},25528:(e,t,a)=>{"use strict";a.r(t),t.default={quote:"_3lWN8",forwarded:"JtB6T",hasAuthor:"xkqQM",hasSuspiciousLinks:"zPIFY",linkPreview:"_2dayw",meta:"_1BACO",title:"_2oao5"}},87413:(e,t,a)=>{"use strict";a.r(t),t.default={bubble:"_1bR5a",meta:"_2zWo9",isPSA:"UcO-V",isPsa:"UcO-V"}},45167:(e,t,a)=>{"use strict";a.r(t),t.default={shade:"_2iL1d"}},33040:(e,t,a)=>{"use strict";a.r(t),t.default={msgUnread:"_2WwJ0",msgUnreadBody:"_1sPn5"}},62714:(e,t,a)=>{"use strict";a.r(t),t.default={action:"_3gdWY"}},90660:(e,t,a)=>{"use strict";a.r(t),t.default={bubble:"_24mt0",isGallery:"_3-g6A",isPreview:"_15PlA",quote:"_1TKQD",hasAuthor:"_3IAJp",vcard:"_1I1xx",author:"_2sfxu",hasQuote:"DtWWq",body:"_3Dqzq",avatar:"Z3pNs",meta:"_1foJt",name:"_2Zme9",ctwaContext:"IWK3Z",placeholder:"_2W_8P",placeholderAnimation:"jGZJF","gradient-ltr":"_1mIq4",gradientLtr:"_1mIq4","gradient-rtl":"_2jlqo",gradientRtl:"_2jlqo",placeholderImage:"_1d1FY",placeholderText:"_2Vvie",vcardDownloadStageIcon:"_26NSr",icon:"_1k6oU"}},8106:(e,t,a)=>{"use strict";a.r(t),t.default={bubble:"_16D7a",portrait:"_1aHvR",nonAlbumBubble:"kd7WL",author:"_2q2Hm",forwarded:"_1RiM-",forwardedIndicator:"_22kJC",hasAuthor:"XPG6Z",meta:"_1tn-N",hasCaption:"_3U0fg",caption:"_1dyNM",isPSA:"_18wjx",isPsa:"_18wjx",quote:"_6OUHB",thumb:"hS6U_",inAlbum:"_3Xl4P",cursorPointer:"_2W4vP",thumbBody:"_17Nt7",thumbBodyLowQuality:"_53w2c",duration:"_2yOzJ",icon:"_1vPFm",pipBtn:"GqrIo",isHover:"_2uqQl",overlay:"_3TR7B",overlayAlbumText:"_10t7B",ctwaContext:"_1aepL",ctwaContainerWidth:"_39IRG",ctwaThumbWidth:"_3_zbw"}},10252:(e,t,a)=>{"use strict";a.r(t),t.default={preview:"_17oaQ",bubbleIn:"_7Bw2S",bubbleOut:"bT1qf",title:"_2wWFt",description:"_1Zw9c",source:"_39eDa",body:"_13H0g",noThumb:"_1NJe5",thumbnailWrapper:"_2FGsy",thumbnail:"_38D8S",thumbnailPlaceholder:"_3EDgE",youtubeThumbnail:"_3L8ed",mediaStateControlsWrapper:"_6X3mJ",attribution:"_1acg5"}},47566:(e,t,a)=>{"use strict";a.r(t),t.default={unviewedBubble:"_3WTa-",buttonContainer:"_3KP-K",deepContainerContent:"_1wl63",statusIcon:"_3yLP5",statusDone:"_12xKD",accentIcon:"_2-4F7",nonSpinnerIcon:"_1CV5k",content:"_3sqWV",contentMeta:"_2iAx1",labelActive:"_2qRup",labelInactive:"_3YCWe",labelRetry:"_1aoFJ",quote:"_2MfdI"}},79577:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_2uIfQ",icon:"_2IbVI",spinner:"_1LUdJ"}},50103:(e,t,a)=>{"use strict";a.r(t),t.default={msg:"GDTQm",msgContinuation:"_2iwLX",msgSystem:"_397qe",sticky:"kVGCQ",message:"_24wtQ",hasTail:"_1-U5A",messageBackground:"_3XpKm",tail:"_1bUzr",tailHighlight:"_2jiTt",messageTransparent:"_3nuWB",tailOverrideHide:"_3EGGu",messageSystem:"_2kR4B",messageChat:"_2W7I-",messageCode:"_3R9d9",messageDebugNotification:"_1bVnw",messageE2ENotification:"_1KcEQ",messageBizNotification:"_3nwTJ",messagePlaceholder:"Q42FN",msgGallery:"_12ynY",messageAudio:"_2Ye7z",messageDocument:"Hrc6x",messageMultiVcard:"_1wWEY",messageProduct:"_1JXbp",messagePTT:"_1uDmw",messagePtt:"_1uDmw",messageSticker:"_1t6Cb",messageVcard:"i29yA",messageGif:"_3UH4z",messageImage:"gZ4ft",messageLiveLocation:"_37Pvz",messageLocation:"_2KgTl",messageVideo:"_117Hx",msgInfo:"_22yXp",msgWithQuickAction:"_1B_Jc",messageHidden:"_15gfz",msgContainer:"_3WxGg",quickActionButton:"_3nHC-",msgPSA:"_1QmyI",msgPsa:"_1QmyI",messageVideoLinkPreview:"_3Lst1",placeholder:"_1yEtm",gridContainer:"_11G8i",author:"_2nE7S",forwarded:"_7tMmP",albumBubbleContainer:"_3ua1j",forwardedIndicator:"VqWI8",hasAuthor:"_3pUNA",authorForward:"okgTJ",groupStickerContainer:"_36H1f",singleGroupedStickerContainer:"_234QI",groupStickerAuthor:"_3veZM",transparent:"_3ci8c",hasBorderBox:"_20zqk",hasUrlCallButtons:"_2sBT6",stickerWrapperContainer:"_1KEs5",highlightAnimation:"bd-rx",highlightAnimationDarkIn:"yy12x",highlightAnimationDark:"vEKIQ"}},79575:(e,t,a)=>{"use strict";a.r(t),t.default={messageList:"_11liR",messageListSelectable:"_1fxaZ"}},48294:(e,t,a)=>{"use strict";a.r(t),t.default={preview:"_3O6xD",media:"_1ZYuS",bubbleIn:"_1-cOJ",bubbleOut:"_1xuCY",title:"_1ofix",description:"_1eJr5",body:"LkGlX",descriptionIcon:"_2AFDF",titleIcon:"mC8-b",quoted:"_1fOuo"}},86753:(e,t,a)=>{"use strict";a.r(t),t.default={recording:"_13Es4",btnBorder:"_1LPa8",btnSend:"_19f0J",btnCancel:"_3DaI4",isHover:"_1eZnK",btnStateDefault:"_1Rk4d",btnStateHover:"_3lX0Z",pttCounter:"_1U3X8","ptt-indicator":"_2Qeik",pttIndicator:"_2Qeik",btnBorderIcon:"_3Zxr_",btnPtt:"dNn0f",container:"_2qMTj",active:"_31l5v"}},53175:(e,t,a)=>{"use strict";a.r(t),t.default={spam:"_2MVf7",text:"_222Ot",controls:"_3p_sC",button:"_2FWnU"}},84974:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_3CMaP",image:"_1-cXq",body:"P5ccE",badge:"_24uyS",name:"_1ah5I",address:"OxJwu",description:"Rwz6q"}},59600:(e,t,a)=>{"use strict";a.r(t),t.default={vcard:"_1djmb",controls:"p_rhW"}},60127:(e,t,a)=>{"use strict";a.r(t),t.default={spinner:"t-1Gm"}},95972:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_1t1U-"}},50023:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_2fJ1x",containerFull:"u5BWJ",icon:"_1pATD",containerCircleIconFull:"_2yBck",name:"_34fhS",labelFilter:"_2aKGK",iconContainer:"_3uthS",drawerTitle:"_3zoJf",circleIcon:"_24QRF"}},7034:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_3ORvc",circle:"_39CjK",text:"_3fmQc"}},67211:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_3Z6cE"}},78837:(e,t,a)=>{"use strict";a.r(t),t.default={closeButton:"B_xm0"}},69991:(e,t,a)=>{"use strict";a.r(t),t.default={controlsSummary:"_1NLzp",container:"_2CU0o",btnActive:"FE1P8"}},32593:(e,t,a)=>{"use strict";a.r(t),t.default={app:"_3QfZd","app-enter":"dA9DG",appEnter:"dA9DG",noAnimation:"_39_0H",drawerManager:"Akuo4",pane:"_1Flk2",paneTwo:"_1sFTb",paneThree:"_3xysY",paneOne:"_2DPZK"}},94470:(e,t,a)=>{"use strict";a.r(t),t.default={"-color-bg-light":"#f7f7f7",colorBgLight:"#f7f7f7",panelBody:"_2OcmB",searchSpinner:"_2BFrM",panelSearch:"_22H_a"}},22788:(e,t,a)=>{"use strict";a.r(t),t.default={checkboxSelectableWrapper:"_1VR-Y",checkboxSelectableControl:"_2StzW"}},72503:(e,t,a)=>{"use strict";a.r(t),t.default={section:"_1ekOy",control:"JVX6a",label:"_2Y6N1",border:"Euz4z",note:"_1bqfF"}},20673:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_1z6wq",control:"w7yUt",label:"hCCIs",buttons:"_1GDSS",button:"_3QMTy"}},79430:(e,t,a)=>{"use strict";a.r(t),t.default={drawer:"OMoBQ",white:"_2uJIN",drawerGallery:"_1dTlu",drawerCapture:"GCokO",drawerEdit:"_3WNg8",drawerMedia:"_2cjxz",drawerCatalog:"_32u5Q",striped:"_2W4mF",belowHeader:"_1nC9E"}},12351:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_36Jt6",noscroll:"tEF8N",centerItem:"_3Vmu0",padding:"_2SK3b",centerColumn:"EqE1M"}},5315:(e,t,a)=>{"use strict";a.r(t),t.default={drawerHeader:"_2heqZ",drawerTitle:"_2fGIm",drawerTitleBody:"_1XrsE",side:"_2WvUi",drawerTitleAction:"_215wZ",multiMediaGallery:"_3y4PG",drawerHeaderSmall:"_2oUye",drawerHeaderOffset:"VMhw8",drawerHeaderPopup:"_3JMNf",btnCloseDrawer:"_27F2N",paneListControls:"_6lLuA",labels:"_18BPD"}},39886:(e,t,a)=>{"use strict";a.r(t),t.default={item:"GZMMq",itemBody:"_34gEE",row:"GG5FQ",main:"_2TFlm",side:"_2nP3d",primary:"grnZt",secondary:"_3cGPJ"}},59753:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_2zn9Y"}},33322:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_3ZEdX",title:"-ZdaK","padding-large":"bRenh",paddingLarge:"bRenh","padding-small":"_6A7X1",paddingSmall:"_6A7X1",refresh:"zlRcf",padding:"_1yHba","group-desc-padding":"_82zXh",groupDescPadding:"_82zXh","no-padding":"_3tfxz",noPadding:"_3tfxz","padding-product":"_7vRvU",paddingProduct:"_7vRvU","center-column-fixed-width":"_2JR1K",centerColumnFixedWidth:"_2JR1K",animate:"_3hiFt","well-animation2":"_3ILVe",wellAnimation2:"_3ILVe","list-section":"_2siG4",listSection:"_2siG4"}},81850:(e,t,a)=>{"use strict";a.r(t),t.default={option:"_3si6l",label:"_ndFl",input:"lor46",footer:"_2mKWC",footerText:"y8j_w",nuxHeader:"_3LCG3",nuxContent:"i1Abl",nuxText:"_3VZkg",nuxAction:"BeQC8"}},84297:(e,t,a)=>{"use strict";a.r(t),t.default={nuxIllustration:"ezMrn",nuxIcon:"_15sWb",chatIcon:"pdlOn",chatIcon1:"daPcA",chatIcon2:"_70_GW",chatIcon3:"_2W2PV",chatIcon4:"_1pZDQ",chatIcon5:"_2vSQ5",chatIcon6:"_3wLwj",bannerIcon:"_2UK8O"}},57414:(e,t,a)=>{"use strict";a.r(t),t.default={metadataContainer:"PP0C7",metadataText:"_1w1_Q",metadataTitle:"ccAXr",metadataDesc:"HKV2n",participantList:"_3v9Is",participantsTitle:"_1FBLO",participantsContainer:"rQ_1l",participantWrapper:"_1vZ9F",emptyContentContainer:"_91dTc",participantsText:"_11O1o",contactsText:"zOe-t",participantText:"_2rYUf"}},23226:(e,t,a)=>{"use strict";a.r(t),t.default={metadataContainer:"R0B7g",metadataText:"_2mj9Q",metadataTitle:"_2kLvp",metadataDesc:"_13lhh",participantList:"_2s-i_",participantsTitle:"_2Irb6",participantsContainer:"q023r",participantWrapper:"_2DVz7",emptyContentContainer:"OFq4w",participantsText:"W5Eu3",contactsText:"_3ri8K",participantText:"_33YaX",inviteExpiration:"_12S8X",inviteExpirationIcon:"_2diCv"}},19914:(e,t,a)=>{"use strict";a.r(t),t.default={description:"QEaO_",containerAllow:"_2NjIw",icon:"__lh3",title:"_2mcf_",controls:"_3yCsK",topCenter:"_3-_kX",topLeft:"_2rqT7",bottomCenter:"_2wvpp"}},5177:(e,t,a)=>{"use strict";a.r(t),t.default={intro:"_2zkCi",body:"g5RCg",title:"Ui--U",text:"_1dJY8",betaTitle:"_1Zduv",betaText:"_27T7E",betaIcon:"_2ZBIv",betaIconText:"fYNRo",image:"G8bNp",textContainer:"WG7wG",mdImageWrapper:"_3fmcK",mdBetaImage:"_28pgc",mdImage:"_33HXz",secondary:"_25fKV",divider:"_1P9Pk",secondaryText:"_2VIc6",secondaryTextBody:"_1xaVK",secondaryIcon:"YFvIG"}},38023:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_28ytR",list:"_1Jylt",section:"_10oK3",action:"_3XpT8",shortcut:"_3bYCS",key:"_1lnx-"}},67762:(e,t,a)=>{"use strict";a.r(t),t.default={mediaViewerBlurCrop:"_1YLaY",mediaViewerBlurImg:"LnLxo"}},79850:(e,t,a)=>{"use strict";a.r(t),t.default={mediaViewerImg:"_3WrZo",cursorZoomIn:"_1SkhZ",isDownloadPrevented:"_2aygJ"}},20434:(e,t,a)=>{"use strict";a.r(t),t.default={mediaPanelHeader:"_1qa3m",mediaPanelTools:"_2JKZr",info:"_1VzXi"}},45864:(e,t,a)=>{"use strict";a.r(t),t.default={mediaViewerAnimate:"_386bg","media-viewer-animate":"_386bg",cursorZoomOut:"_3WqnR",mediaViewer:"_26Bcu",viewOnce:"KN2uV",mediaContent:"atk6d",btnMediaNext:"fkj95",btnMediaPrev:"_1Xhzp",media:"_1XpQN",mediaWithCaption:"_1U9lZ",mediaCaption:"_1ZtrG",captionHidden:"_33vFG"}},90237:(e,t,a)=>{"use strict";a.r(t),t.default={title:"_2w38b",block:"cKnfu",illustration:"_2f9uY"}},3614:(e,t,a)=>{"use strict";a.r(t),t.default={body:"_2QvWt",vcardWrapper:"_3Ylsn"}},31003:(e,t,a)=>{"use strict";a.r(t),t.default={label:"piKUK",input:"_3sTp-"}},41069:(e,t,a)=>{"use strict";a.r(t),t.default={section:"_1pA4x",control:"_2U8Aq",label:"_25u9k",metaText:"_4NoWX",border:"_1dbQM",mdMetaText:"_2G3Z0"}},57441:(e,t,a)=>{"use strict";a.r(t),t.default={screenshots:"uucJR",action:"_2PWa5",disabled:"_2AF4S",screenshotPreview:"_2BMoJ",screenshotsImg:"_3jJfs",btnDelete:"LxhA9"}},93866:(e,t,a)=>{"use strict";a.r(t),t.default={listPanel:"Y90D8",listBody:"_2dG3C",listSectionSep:"_2evuG",listSectionText:"oJ0Vi",listSectionAction:"_3PKVF",panelHeader:"_13YvY",headerText:"_2ycik",primaryHeaderText:"_29GPi",secondaryHeaderText:"_3vAfZ",headerButtonsPrimary:"_3KV3v",headerButtonsSecondary:"_21jyR"}},41837:(e,t,a)=>{"use strict";a.r(t),t.default={mainWrapper:"_21wDF",v3_x:"_2qNF9",v3X:"_2qNF9",v3_x_mac:"_3w39D",v3XMac:"_3w39D",modalBackground:"_1a3Oi"}},95578:(e,t,a)=>{"use strict";a.r(t),t.default={updateWrapper:"_20E-9",updateTitle:"_1MRvR",uploadButtons:"_3t_jf",buttonContainer:"_1wVk5",buttonIcon:"f2wBs",outStatusPanel:"_2ngWC",outDetail:"_1ko0M",seen:"_3HRUU",timestamp:"Src62",placeholderIcon:"aTSba",placeholderText:"_3vftx",viewWrapper:"_1IlPa",viewTitle:"_2g-DV",viewUpdates:"_39025",statusImage:"_29lXQ",iconSeen:"X0WsZ",seenCount:"_2mbB_"}},38157:(e,t,a)=>{"use strict";a.r(t),t.default={chevronLeftBg:"_2INaw",chevronRightBg:"_1817s",chevronLeft:"_3TV4f",chevronRight:"_2TCMC",playerContainer:"_3t_My",mediaStateControls:"Ko2Gg",viewer:"_355RO",v3X:"_3nNtq",v3X_mac:"_1hGgD",v3XMac:"_1hGgD",backIcon:"_1xeCZ",backIcon_mac:"_2_9z_",backIconMac:"_2_9z_"}},41276:(e,t,a)=>{"use strict";a.r(t),t.default={suspiciousHostname:"_3shcp",suspiciousCharacter:"_3Ozps",explanation:"_1vfRc",url:"_2hMVn"}},56268:(e,t,a)=>{"use strict";a.r(t),t.default={headerText:"_2GZMr",bodyText:"_2LD6E",noticeSvgWrapper:"_3uhWB",noticeModalContentWrapper:"_1n2P1",noticeSmbContainer:"_2B7QC",noticeContainer:"_13eJw"}},55420:(e,t,a)=>{"use strict";a.r(t),t.default={content:"_2Gx3Y",icon:"_2XO7i"}},11940:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_33dyw"}},92431:(e,t,a)=>{"use strict";a.r(t),t.default={closeBtn:"_2ljm4",fullscreen:"_19CFw"}},39910:(e,t,a)=>{"use strict";a.r(t),t.default={button:"_3wrJu",fullscreen:"MmwG5"}},30404:(e,t,a)=>{"use strict";a.r(t),t.default={button:"_2udG8",fullscreen:"_2hEqA"}},74515:(e,t,a)=>{"use strict";a.r(t),t.default={pipBtn:"_3oZ_A",player:"_3I3T1",preview:"_1C2_w"}},31159:(e,t,a)=>{"use strict";a.r(t),t.default={note:"X0YoC",icon:"_13E65",noteBody:"_3BvP8"}},12229:(e,t,a)=>{"use strict";a.r(t),t.default={fullWidthShade:"_1XIAu",stripHeightShade:"_2MWKo",lowerShade:"_2njxo",upperShade:"nDbhJ",fullHeightShade:"_2mxfO",roundedCorners:"_3SwH5"}},12904:(e,t,a)=>{"use strict";a.r(t),t.default={videoFloater:"_3f6Nh",bgImg:"_3kAe8",bottomLayer:"tAu_b"}},93285:(e,t,a)=>{"use strict";a.r(t),t.default={playerWrapper:"_3-dtC"}},41118:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_3C6Us",fullscreen:"_2aDnQ",videoFloaterMedia:"_3eWdk",videoTag:"_29ubQ",mediaStageWrapper:"_19v64",preview:"_18DAr",errorLink:"_1X41z",errorLinkChevron:"_1-9C4"}},58226:(e,t,a)=>{"use strict";a.r(t),t.default={"-thumb-radius-window":"4.5px",thumbRadiusWindow:"4.5px","-thumb-radius-fullscreen":"5px",thumbRadiusFullscreen:"5px",controls:"_1r44f",playpauseBtnContainer:"_3Ax45",fullscreen:"_3L284",currentTime:"_3bT3U",duration:"_2HyXV",timeText:"nh-fs",progressBarContainer:"_2li6N",hiddenProgressBar:"_3ulDS",displayedProgressBar:"_1B31I",displayedProgress:"_2I7Hv",displayedBuffer:"_3I3-p",displayedTrack:"_1fgNx",thumb:"_22fNe",hideThumb:"wK-rh",volumeContainer:"_2ONsu",volumeBarContainer:"_1AGx4",volumeLowerTrack:"_2NoV5",firefoxFix:"ey6xY",lowerTrackLongest:"_2Zrbf",volumeBar:"_3vkC_",volumePadding:"HdejZ",tooltipWrapper:"_2DY39",tooltipTextBoxPosAndSize:"_1Jm8H",tooltipTextBoxGeneral:"OdlyR",tooltipTailGeneral:"_1G3v7",tooltipTailPosAndSize:"_3easU"}},85001:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_2f9yD",fullscreen:"Ezmqi",youtubeContainer:"_1OqLi",blockYoutube:"_1mxPs",videoControlsWrapper:"_2Sh-l",strippedVideoControls:"_2pz4k",opacityTransition:"_1SPcW",widgetsWrapper:"_1xY5P",dimmed:"lk43-"}},43889:(e,t,a)=>{"use strict";a.r(t),t.default={description:"EVy2y",price:"_1UFfr",shareButton:"_3En8b",detailContainer:"_12WS6",catalogListItem:"_2Tk1N"}},93317:(e,t,a)=>{"use strict";a.r(t),t.default={thumbsContainer:"_2Al5q",scrollContainer:"_1NFpu",viewerThumbs:"_19Ssm",thumbPadding:"_3rZd0"}},14760:(e,t,a)=>{"use strict";a.r(t),t.default={mediaPanelHeader:"_3CorU",info:"_17JMe",productNameIcon:"_2D17p",productName:"_3h7S7",mediaPanelTools:"_3zlt4",infoName:"_1jHty"}},44445:(e,t,a)=>{"use strict";a.r(t),t.default={mediaViewerAnimate:"_36n_Q","media-viewer-animate":"_36n_Q",cursorZoomOut:"AXinh",mediaViewer:"-BmSy",mediaContent:"_1Si6A",btnMediaNext:"_1cZF1",btnMediaPrev:"_2acnM",media:"_1Jh5p",mediaWithCaption:"_2C6o9",mediaCaption:"_2F3an",captionHidden:"_16Xdz"}},55080:(e,t,a)=>{"use strict";a.r(t),t.default={mediaCanvas:"Xh_zm",canvasBody:"lvJ_X",list:"_2iZVY",listWrapper:"_3VH5y",canvasComponent:"_2iWRa",canvasComponentLarge:"_2uCvh",canvasSecondRow:"lW4qb",viewerFlow:"_17VSI",active:"UGN0B",overlay:"h6ff_",placeholder:"_3JWxq",gradient:"_35av2"}},73499:(e,t,a)=>{"use strict";a.r(t),t.default={voipFloater:"_3IZWl"}},50236:(e,t,a)=>{"use strict";a.r(t),t.default={wrapper:"i0da_"}},61266:(e,t,a)=>{"use strict";a.r(t),t.default={body:"_3YdKC",callTitle:"fFBUY",participantName:"_1oV9F",actionRow:"_2w-cI",btnGroup:"_15Y23",btnAccept:"_1e-OZ",btnReject:"_3eGxE",btnEnd:"_2w2od",btnMute:"_2ltYR",webrtcCanvas:"MMbCj",webrtcVideo:"VYfys",webrtcVideoPreview:"_2yw6J",webrtcAudio:"_3voCO"}},66564:(e,t,a)=>{"use strict";a.r(t),t.default={ul:"_30r76",inline:"mYhl2"}},34145:(e,t,a)=>{"use strict";a.r(t),t.default={inline:"_3r0Js"}},77012:(e,t,a)=>{"use strict";function r(){return new Worker(a.p+"milan.15945715b6297cd8d242.worker.js")}a.r(t),a.d(t,{default:()=>r})},64957:(e,t,a)=>{"use strict";function r(){return new Worker(a.p+"opus.fb9ff9597f98345adf05.worker.js")}a.r(t),a.d(t,{default:()=>r})},66665:(e,t,a)=>{"use strict";function r(){return new Worker(a.p+"webp_to_animation_frames.worker.14e13d6f3324e4bcf864.worker.js")}a.r(t),a.d(t,{default:()=>r})},80967:(e,t,a)=>{"use strict";function r(){return new Worker(a.p+"webp_to_rgba.worker.4ba00e67e4034206534d.worker.js")}a.r(t),a.d(t,{default:()=>r})}}]);