/*! Copyright (c) 2023 WhatsApp Inc. All Rights Reserved. */
(self.webpackChunkwhatsapp_web_client=self.webpackChunkwhatsapp_web_client||[]).push([[7205],{621733:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){let n;if(e.size!==t.size)return!1;for(const[a,l]of e)if(n=t.get(a),n!==l||void 0===n&&!t.has(a))return!1;return!0}},600145:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GroupProfilePictureWamEvent=void 0;var a=n(901032),l=n(130756);const{BOOLEAN:r,STRING:o}=a.TYPES,i=(0,a.defineEvents)({GroupProfilePicture:[3652,{groupCreationDs:[1,o],groupProfileAction:[7,l.GROUP_PROFILE_ACTION_TYPE],hasProfilePicture:[3,r],isAdmin:[4,r],preciseGroupSizeBucket:[5,l.PRECISE_SIZE_BUCKET],profilePictureType:[6,l.PROFILE_PICTURE_TYPE]},[1,1,1],"regular"]});t.GroupProfilePictureWamEvent=i},894629:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,m.useModelValues)(e.chat,["id","isNewsletter","newsletterMetadata"]),n=(0,m.useOptionalModelValues)(t.newsletterMetadata,["description","creationTime","membershipType"]),a=(0,p.default)(n,["change:description"],(()=>(null==n?void 0:n.description)||"")),r=(0,f.useCallback)(function(){var e=(0,l.default)((function*(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";yield g(t,e)}));return function(){return e.apply(this,arguments)}}(),[t]);if(null==n)return null;const u=d.fbt._("Add channel description",null,{hk:"4cBfrw"}),{creationTime:s}=n,h=null!=s?i.Clock.createdStr(n.creationTime):null;return f.default.createElement(o.default,{description:a,bulletPointsEnabled:!1,chat:e.chat,showFullDescription:!1,testid:"newsletter-info-drawer-description-title-input",containerTestId:"newsletter-info-drawer-description-container",emptyValuePlaceholder:u,creationString:h,canSetDescription:(0,c.iAmOwner)(n),setDescriptionAction:r})};var l=a(n(348926)),r=n(328620),o=a(n(711367)),i=n(63014),u=n(172365),c=n(751460),s=n(390737),d=n(548360),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(a,r,o):a[r]=e[r]}a.default=e,n&&n.set(e,a);return a}(n(667294)),p=a(n(524578)),m=n(655241);function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function g(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,r.genId)();const l=(0,u.editNewsletterMetadataAction)(e,{editDescription:!0},{description:n}),o=null===(t=e.newsletterMetadata)||void 0===t?void 0:t.description,i=new r.ActionType(d.fbt._("Changing channel description",null,{hk:"3QNpiW"})),c=l.then((()=>new r.ActionType(d.fbt._("Channel description changed",null,{hk:"ATEd7"}),{actionText:d.fbt._("Undo",null,{hk:"3r3mP7"}),actionHandler:()=>g(e,o,a)}))).catch((()=>(__LOG__(3)`channel:handleEditDescription dropped`,new r.ActionType(d.fbt._("Channel description changed failed",null,{hk:"1We4xJ"}),{actionText:d.fbt._("Try again",null,{hk:"3qJDe7"}),actionHandler:()=>g(e,n,a)}))));return s.ToastManager.open(f.default.createElement(r.ActionToast,{id:a,initialAction:i,pendingAction:c})),l}},751046:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(36409),r=a(n(306007)),o=n(464659),i=n(949359),u=n(136858),c=a(n(908081)),s=a(n(324093)),d=n(626194),f=n(114850),p=a(n(832897)),m=n(558173),h=a(n(894629)),g=n(73225),E=a(n(683023)),b=a(n(664531)),v=n(751460),y=n(620973),M=n(349372),C=n(617058),k=n(126671),P=a(n(634152)),_=n(163139),w=n(220584),S=n(382117),O=n(676345),I=n(130756),T=n(818674),A=n(609392),N=n(851488),x=n(548360),D=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=G(t);if(n&&n.has(e))return n.get(e);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(a,r,o):a[r]=e[r]}a.default=e,n&&n.set(e,a);return a}(n(667294)),R=a(n(156720)),j=a(n(524578)),L=a(n(637660)),B=a(n(321201));function G(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(G=function(e){return e?n:t})(e)}const W={flexShrink:"oq44ahr5",flexGrow:"tvf2evcx",flexBasis:"lb5m6g5c",paddingBottom:"s9fl9ege"};function F(e,t){var n;const{chat:a,newsletterMetadata:G,onClose:F,onDeleteNewsletter:V,onAdminCenter:H,onSettings:U}=e,q=(0,B.default)(),z=(0,j.default)(G,["change:suspended"],(()=>!0===(null==G?void 0:G.suspended))),Y=(0,j.default)(G,["change:canBeMuted"],(()=>Boolean(null==G?void 0:G.canBeMuted)&&!z)),K=(null!==(n=(0,m.useNewsletterMessageDeliveryUpdates)(a))&&void 0!==n?n:[]).length>0,X=(0,L.default)((()=>new S.UiActionWamEvent({uiActionType:I.UI_ACTION_TYPE.CHANNEL_INFO_OPEN,uiActionPreloaded:!0}))),Z=z?null:D.default.createElement(h.default,{chat:a}),Q=(0,v.iAmAdminOrOwner)(G),$=Y&&!Q?D.default.createElement(o.ChatInfoDrawerSection,{xstyle:O.uiMargin.top10},D.default.createElement(p.default,{chat:a,mute:a.mute,settings:P.default})):null,J=(0,D.useCallback)((()=>{f.ModalManager.open(D.default.createElement(y.NewsletterPhoneNumberNux,null))}),[]),ee=(0,D.useCallback)((()=>{f.ModalManager.open(D.default.createElement(C.NewsletterPublicChannelPrivacyNux,{chat:a}))}),[a]),te=z?null:D.default.createElement(o.ChatInfoDrawerSection,{xstyle:O.uiMargin.top10},D.default.createElement(M.NewsletterPrivacyRow,{onClick:Q?ee:null,title:x.fbt._("Public channel",null,{hk:"1a60HF"}),text:Q?x.fbt._("What you share is visible to anyone, but your phone number isn't. Click to learn more.",null,{hk:"4auNa3"}):x.fbt._("Anyone can find this channel and see what's been shared.",null,{hk:"1T1Xsg"}),icon:D.default.createElement(l.BusinessWebsiteIcon,{color:w.SvgColorProp.SECONDARY,height:20})}),!Q&&D.default.createElement(M.NewsletterPrivacyRow,{onClick:J,title:x.fbt._("Profile privacy",null,{hk:"fHnmE"}),text:(0,i.getNewsletterProfilePrivacyText)(),icon:D.default.createElement(u.DialpadIcon,{color:w.SvgColorProp.SECONDARY,height:20})})),ne=D.default.createElement(b.default,{xstyle:O.uiMargin.top10,chat:e.chat,onDeleteNewsletter:V}),ae=K?D.default.createElement(o.ChatInfoDrawerSection,{xstyle:O.uiMargin.top10},D.default.createElement(r.default,{testid:"newsletter-info-admin-center-row",icon:D.default.createElement(A.WarningIcon,{color:w.SvgColorProp.SECONDARY,height:16}),onClick:H,title:D.default.createElement(N.WDSTextTitle,null,x.fbt._("Channel Alerts",null,{hk:"1NYThG"}))})):null,le=Q&&(0,g.isNewsletterReactionSettingsEnabled)()?D.default.createElement(o.ChatInfoDrawerSection,{xstyle:O.uiMargin.top10},D.default.createElement(r.default,{testid:"newsletter-info-channel-settings",title:D.default.createElement(N.WDSTextTitle,null,x.fbt._("Channel settings",null,{hk:"4xHSt"})),icon:D.default.createElement(k.SettingsIcon,{color:w.SvgColorProp.SECONDARY,height:20}),onClick:U,side:"chevron"})):null;return(0,D.useEffect)((()=>{const e=X.current;e&&(e.markUiActionT(),e.commit(),X.current=void 0),(0,T.logUiActionShadowPrivateStatsTestEvents)()}),[]),D.default.createElement(c.default,{ref:t,key:"newsletter-info-modal",theme:"striped",testid:"chat-info-drawer"},D.default.createElement(d.DrawerHeader,{title:x.fbt._("Channel info",null,{hk:"2MU3nu"}),type:d.DRAWER_HEADER_TYPE.SMALL,rtlFixIfOnDarwin:!0,onCancel:()=>{F?F():null==q||q.requestDismiss()},testid:"newsletter-info-header"}),D.default.createElement(s.default,null,D.default.createElement("section",{className:(0,R.default)(W),"data-testid":"group-info-drawer-body"},D.default.createElement(E.default,{chat:(0,_.unproxy)(a)}),Z,ae,le,$,te,ne,undefined)))}var V=(0,D.forwardRef)(F);t.default=V},501624:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{chat:t,xstyle:n,readOnly:a}=e,[l,r]=(0,s.useState)(!1),u=(0,f.useModelValues)(t.contact,["id","profilePicThumb"]),c=(0,f.useModelValues)(t.contact.profilePicThumb,["imgFull"]),p=(0,s.useCallback)(((e,n)=>{r(!0),m(t,n).finally((()=>{r(!1)}))}),[t]);return s.default.createElement("div",{className:(0,d.default)(n)},s.default.createElement(i.PhotoPickerLoadable,{type:o.PhotoPickerType.NEWSLETTER,id:u.id,attachToChat:!0,startImage:c.imgFull,readOnly:a,onImageSet:p,pending:l}))};var l=n(328620),r=n(172365),o=n(588792),i=n(511696),u=n(390737),c=n(548360),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(a,r,o):a[r]=e[r]}a.default=e,n&&n.set(e,a);return a}(n(667294)),d=a(n(156720)),f=n(655241);function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function m(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,l.genId)();const a=(0,r.editNewsletterMetadataAction)(e,{editPicture:!0},{picture:null!=t?t:null}),o=new l.ActionType(null!=t?c.fbt._("Setting channel icon",null,{hk:"3qGzgv"}):c.fbt._("Removing channel icon",null,{hk:"3KXsMC"})),i=a.then((()=>new l.ActionType(null!=t?c.fbt._("Channel icon set",null,{hk:"M0iEh"}):c.fbt._("Channel icon removed",null,{hk:"31cA0l"})))).catch((()=>(__LOG__(3)`newsletter:handleEditPhoto dropped`,new l.ActionType(null!=t?c.fbt._("Couldn't set channel icon",null,{hk:"GsVmy"}):c.fbt._("Couldn't remove channel icon",null,{hk:"2pGDJs"}),{actionText:c.fbt._("Try again",null,{hk:"3qJDe7"}),actionHandler:()=>m(e,t,n)}))));return u.ToastManager.open(s.default.createElement(l.ActionToast,{id:n,initialAction:o,pendingAction:i})),a}},988149:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{chat:t}=e;const n=(0,b.useOptionalModelValues)(t.newsletterMetadata,["name","membershipType","isSuspendedOrTerminated"]),a=(0,g.useCallback)(function(){var e=(0,l.default)((function*(e){e!==t.formattedTitle&&(yield y(t,e))}));return function(){return e.apply(this,arguments)}}(),[t]);if(null==n)return null;if(!0===n.isSuspendedOrTerminated||!(0,d.iAmOwner)(n))return g.default.createElement(f.TextHeader,{className:(0,E.default)(m.uiMargin.vert6),level:"2",theme:"large"},g.default.createElement(s.Name,{chat:t,breakWord:!0}));return g.default.createElement(u.default,{subject:t.formattedTitle,onSave:a,editRestrictionInfo:()=>{c.ModalManager.open(g.default.createElement(o.ConfirmPopup,{onOK:()=>c.ModalManager.close(),okText:h.fbt._("OK",null,{hk:"4oTrfy"})},h.fbt._("Only admins can edit this channel's info",null,{hk:"Z6ACg"})))},editable:!0,emptyErrorMessage:h.fbt._("Channel name can't be empty",null,{hk:"2ep6gS"})})};var l=a(n(348926)),r=n(328620),o=n(103440),i=n(172365),u=a(n(559719)),c=n(114850),s=n(21645),d=n(751460),f=n(180519),p=n(390737),m=n(676345),h=n(548360),g=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(a,r,o):a[r]=e[r]}a.default=e,n&&n.set(e,a);return a}(n(667294)),E=a(n(156720)),b=n(655241);function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function y(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,r.genId)();const a=(0,i.editNewsletterMetadataAction)(e,{editName:!0},{name:t}),l=e.name,o=new r.ActionType(h.fbt._("Renaming channel",null,{hk:"3xRXjW"})),u=a.then((()=>new r.ActionType(h.fbt._("Channel renamed to {name}",[h.fbt._param("name",t)],{hk:"JAzRN"}),{actionText:h.fbt._("Undo",null,{hk:"3r3mP7"}),actionHandler:()=>y(e,l,n)}))).catch((()=>(__LOG__(3)`newsletter:handleEditSubject dropped`,new r.ActionType(h.fbt._("Couldn't rename channel",null,{hk:"3OWiwP"}),{actionText:h.fbt._("Try again",null,{hk:"3qJDe7"}),actionHandler:()=>y(e,t,n)}))));return p.ToastManager.open(g.default.createElement(r.ActionToast,{id:n,initialAction:o,pendingAction:u})),a}},683023:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,x.useOptionalModelValues)(e.chat.newsletterMetadata,["size","privacy","terminated","isSuspendedOrTerminated","membershipType","inviteCode"]);let n=(null==t?void 0:t.privacy)===o.NewsletterPrivacy.Private?T.fbt._("Private Channel",null,{hk:"4eaPAs"}):T.fbt._("Channel",null,{hk:"26BY5U"});(null==t?void 0:t.terminated)&&(n=T.fbt._("Deleted channel",null,{hk:"3S2eSl"}));const a=null!=(null==t?void 0:t.size)?(0,i.getNewsletterFollowersText)(t.size):null;return A.default.createElement(s.default,{theme:"padding-large"},A.default.createElement(d.FlexColumn,{align:"center"},A.default.createElement(g.default,{chat:e.chat,xstyle:S.uiMargin.bottom7,readOnly:!0===(null==t?void 0:t.isSuspendedOrTerminated)||!(0,b.iAmOwner)(t)}),A.default.createElement(E.default,{chat:e.chat}),A.default.createElement("div",{"data-testid":"newsletter-info-top-card-subtitle",className:(0,N.default)(R.newsletterSecondary)},A.default.createElement(u.SelectableSpan,{dir:"auto",selectable:!0},A.default.createElement(P.TextSpan,{size:"16",color:"secondary"},n,(null==t?void 0:t.isSuspendedOrTerminated)?null:A.default.createElement(A.default.Fragment,null,p.default.isRTL()?" - ":" · ",a))))),(null==t?void 0:t.isSuspendedOrTerminated)?null:A.default.createElement(j,{chat:e.chat}))};var l=a(n(348926)),r=n(969579),o=n(927531),i=n(949359),u=n(306703),c=n(985714),s=a(n(969358)),d=n(690495),f=n(525110),p=a(n(932325)),m=n(972989),h=n(114850),g=a(n(501624)),E=a(n(988149)),b=n(751460),v=n(405473),y=n(792625),M=a(n(210002)),C=n(956113),k=n(163139),P=n(180519),_=n(625786),w=n(390737),S=n(676345),O=n(106645),I=a(n(625903)),T=n(548360),A=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=D(t);if(n&&n.has(e))return n.get(e);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(a,r,o):a[r]=e[r]}a.default=e,n&&n.set(e,a);return a}(n(667294)),N=a(n(156720)),x=n(655241);function D(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(D=function(e){return e?n:t})(e)}const R={newsletterSecondary:{lineHeight:"a4ywakfo",marginTop:"ma4rpf0l",textAlign:"qfejxiq4"},actionIcon:{color:"fsk8o631"},infoAction:{flexGrow:"ggj6brxn",color:"fsk8o631",fontWeight:"hnx8ox4h"},spinner:{stroke:"mqe5ufcr"},infoActionBtn:{fontSize:"ovllcyds",minWidth:"pwaghgrf"}};function j(e){let{chat:t}=e;const[n,a]=(0,A.useState)(!1),o=(0,x.useOptionalModelValues)(t.newsletterMetadata,["membershipType","inviteCode"]),i=t.formattedTitle,{inviteCode:u}=o||{},s=null!=u?`https://whatsapp.com/channel/${u}`:null,p=(0,A.useCallback)((()=>{if(null==s)return;const e=T.fbt._("Follow the {newsletter_name} channel on WhatsApp: {link}",[T.fbt._param("newsletter_name",i),T.fbt._param("link",s)],{hk:"2JUBPH"}),t=T.fbt._("",null,{hk:"rzrsn"});h.ModalManager.open(A.default.createElement(M.default,{title:t.toString(),text:e.toString()}),{transition:"modal-flow"})}),[i,s]),g=(0,A.useCallback)((()=>{if(null==s)return;(0,c.copyTextToClipboard)(s)?w.ToastManager.open(A.default.createElement(_.Toast,{msg:T.fbt._("Link copied to clipboard.",null,{hk:"24K2ka"})})):w.ToastManager.open(A.default.createElement(_.Toast,{msg:T.fbt._("Couldn't copy to clipboard.",null,{hk:"2JI7CO"})}))}),[s]),E=(0,A.useCallback)((0,l.default)((function*(){a(!0),yield(0,v.subscribeToNewsletter)((0,k.unproxy)(t)),a(!1)})),[t]),P=(0,A.useCallback)((()=>{h.ModalManager.open(A.default.createElement(O.UnfollowNewsletterConfirmationModal,{chat:t}))}),[t]),N=[];return(0,b.iAmGuest)(o)?N.push({Icon:y.PlusLargeIcon,onClick:E,testid:"newsletter-info-follow-action",title:T.fbt._("Follow",null,{hk:"1MHfKq"}),isLoading:n}):(0,b.iAmSubscriber)(o)&&N.push({Icon:r.CheckmarkIcon,onClick:P,testid:"newsletter-info-unfollow-action",title:T.fbt._("Following",null,{hk:"4pSME4"}),isLoading:!1}),null!=u&&(N.push({Icon:f.ForwardIcon,onClick:p,testid:"newsletter-info-invite-action",title:T.fbt._("Forward",null,{hk:"46L1pk"}),isLoading:!1}),document.queryCommandSupported("copy")&&N.push({Icon:m.LinkIcon,onClick:g,testid:"newsletter-info-copy-link-action",title:T.fbt._("Copy link",null,{hk:"3jv6Pn"}),isLoading:!1})),A.default.createElement(d.FlexRow,{justify:"center",align:"center",xstyle:[S.uiMargin.top25,S.uiMargin.bottom10]},N.map(((e,t)=>{let{testid:a,Icon:l,onClick:r,title:o,isLoading:i}=e;return A.default.createElement(I.default,{key:t,"aria-label":o,testid:a,onClick:r,xstyle:R.infoActionBtn,disabled:n},A.default.createElement(d.FlexColumn,{align:"center",xstyle:[R.infoAction,S.uiPadding.horiz15]},i?A.default.createElement(C.Spinner,{color:R.spinner,size:32,xstyle:S.uiMargin.bottom15}):A.default.createElement(l,{xstyle:[R.actionIcon,S.uiMargin.bottom15],width:24,height:24}),o))})))}},664531:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{chat:t,xstyle:n,onDeleteNewsletter:a}=e;const r=g.default.createElement(y,{chat:t}),o=g.default.createElement(v,{chat:t}),i=g.default.createElement(M,{chat:t,onDeleteNewsletter:a});return g.default.createElement(l.ChatInfoDrawerButtonsSection,{xstyle:n},r,o,i)};var l=n(464659),r=n(419e3),o=n(36045),i=n(90989),u=n(114850),c=n(73225),s=n(751460),d=a(n(726619)),f=n(453603),p=n(21698),m=n(106645),h=n(548360),g=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(a,r,o):a[r]=e[r]}a.default=e,n&&n.set(e,a);return a}(n(667294)),E=n(655241);function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}function v(e){let{chat:t}=e;const n=(0,E.useOptionalModelValues)(t.newsletterMetadata,["membershipType","suspended","terminated","isSuspendedOrTerminated"]);if((null==n?void 0:n.isSuspendedOrTerminated)||(0,s.iAmOwner)(n)||(0,s.iAmAdmin)(n)||!(0,c.isNewsletterReportingEnabled)())return null;const a=h.fbt._("Report Channel",null,{hk:"3DYeSq"});return g.default.createElement(o.DrawerButton,{testid:"newsletter-integrity-report-button",icon:g.default.createElement(p.ThumbsDownIcon,{directional:!0}),color:"danger",theme:"chat-info",onClick:()=>{u.ModalManager.open(g.default.createElement(d.default,{chat:t,spamFlow:f.SpamFlow.NewsletterInfoReport}))}},a)}function y(e){let{chat:t}=e;const n=(0,E.useOptionalModelValues)(t.newsletterMetadata,["membershipType"]),a=h.fbt._("Unfollow",null,{hk:"3NYOtp"}),l=(0,g.useCallback)((()=>{u.ModalManager.open(g.default.createElement(m.UnfollowNewsletterConfirmationModal,{chat:t}))}),[t]);return(0,s.iAmSubscriber)(n)?g.default.createElement(o.DrawerButton,{testid:"li-unfollow-newsletter",icon:g.default.createElement(i.ExitIcon,{directional:!0}),color:"danger",theme:"chat-info",onClick:l},a):null}function M(e){let{chat:t,onDeleteNewsletter:n}=e;const a=(0,E.useOptionalModelValues)(t.newsletterMetadata,["membershipType"]),l=h.fbt._("Delete channel",null,{hk:"2PQtz4"});return(0,s.iAmOwner)(a)?g.default.createElement(o.DrawerButton,{testid:"li-delete-newsletter",icon:g.default.createElement(r.DeleteIcon,{directional:!0}),color:"danger",theme:"chat-info",onClick:n},l):null}},172365:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.editNewsletterMetadataAction=function(){return c.apply(this,arguments)};var l=a(n(348926)),r=n(418987),o=n(787671),i=n(14291),u=n(126592);function c(){return(c=(0,l.default)((function*(e,t,n){if(!e.isNewsletter)return __LOG__(4,void 0,new Error,!0,["newsletter"])`[newsletters][editNewsletterMetadataAction] called with a non-newsletter chat`,void SEND_LOGS("edit-metadata-action-not-a-newsletter",1,"newsletter");const a=(0,r.toNewsletterJid)(e.id.toJid());try{const e=yield(0,o.editNewsletterMetadata)(a,t,n);if(null==e)return;const{chat:l,metadata:r,pic:c}=(0,i.mapNewsletterToModels)(e);yield(0,u.updateCollections)({chats:[l],metadata:[r],pics:[c]})}catch(e){throw __LOG__(4,void 0,new Error,!0,["newsletter"])`[newsletter][editNewsletterMetadataAction] Failed to edit newsletter metadata`,SEND_LOGS("edit-metadata-action-failed",1,"newsletter"),e}}))).apply(this,arguments)}},933655:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.NewsletterEmojiSettings=function(){const[e,t]=(0,s.useState)("default");return s.default.createElement(s.default.Fragment,null,h.map((n=>s.default.createElement(o.RadioWithLabel,{theme:o.RadioWithLabelThemeEnum.LARGE,key:n.value,name:"duration",value:n.value,label:n.label,checked:n.value===e,onChange:()=>t(n.value),xstyle:p.radioLabel}))))};var l=n(70354),r=a(n(225148)),o=n(695431),i=n(348538),u=n(676345),c=n(548360),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(a,r,o):a[r]=e[r]}a.default=e,n&&n.set(e,a);return a}(n(667294)),d=a(n(156720));function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}const p={radioLabel:{color:"b40j3n3c"}};function m(){return s.default.createElement("span",null,i.REACTIONS_DEFAULT_SENDING_TRAY.map(((e,t)=>{const n=l.EmojiUtil.normalizeEmojiFromString(e),a=t+1===i.REACTIONS_DEFAULT_SENDING_TRAY.length?u.uiMargin.end0:u.uiMargin.end4;return null!=n?s.default.createElement("span",{className:(0,d.default)(a),key:`newsletter-emoji-container-${t}`},s.default.createElement(r.default,{key:`newsletter-emoji-${t}`,emoji:n,size:"small",element:"span"})):null})))}const h=[{label:c.fbt._("Any emoji",null,{hk:"PwBNc"}),value:"any"},{label:c.fbt._("Default only ({reaction-emojis})",[c.fbt._param("reaction-emojis",s.default.createElement(m,null))],{hk:"YnzVd"}),value:"default"},{label:c.fbt._("None",null,{hk:"vlKK9"}),value:"none"}]},245272:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=a(n(908081)),r=a(n(324093)),o=n(626194),i=n(933655),u=n(676345),c=n(548360),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(a,r,o):a[r]=e[r]}a.default=e,n&&n.set(e,a);return a}(n(667294)),d=a(n(156720));function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}const p={body:{flexShrink:"oq44ahr5",flexGrow:"ggj6brxn",flexBasis:"lb5m6g5c",paddingBottom:"s9fl9ege"},drawer:{backgroundColor:"lkjmyc96"},title:{color:"i8b0kslj"}},m=(0,s.forwardRef)(((e,t)=>{const n=s.default.createElement("div",{className:(0,d.default)([p.title,u.uiMargin.bottom15])},c.fbt._("Which reactions can followers send",null,{hk:"4fwuWS"}));return s.default.createElement(l.default,{ref:t,theme:"striped",testid:"newsletter-settings-drawer",xstyle:p.drawer},s.default.createElement(o.DrawerHeader,{title:c.fbt._("Channel settings",null,{hk:"2bWwDX"}),type:o.DRAWER_HEADER_TYPE.SMALL,onBack:e.onBack,rtlFixIfOnDarwin:!0,testid:"newsletter-settings-drawer-header"}),s.default.createElement(r.default,null,s.default.createElement("section",{className:(0,d.default)([p.body,u.uiMargin.horiz30,u.uiMargin.vert30]),"data-testid":"newsletter-settings-drawer-body"},n,s.default.createElement(i.NewsletterEmojiSettings,null))))}));m.displayName="NewsletterSettingsDrawer";var h=m;t.default=h},371125:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{stickerPackId:t,onStickerPackView:n,stickerPackViewDelay:a,sticker:h}=e,g=function(e){(0,p.useEffect)((()=>{e&&d.StickerPackCollectionMd.fetchStickerPack(e)}),[e]);return(0,m.default)(d.StickerPackCollectionMd,"add remove reset",(()=>null!=e?d.StickerPackCollectionMd.get(e):null))}(t);let E;if(t){const e=e=>{e.stopPropagation(),n&&n(),null!=a?self.setTimeout((()=>r.Cmd.openStickerPack(t)),a+150):r.Cmd.openStickerPack(t)};(0,c.isFavoriteStickersEnabled)()?null!=h&&(E=p.default.createElement(u.FlexRow,null,p.default.createElement(l.default,{onClick:e,type:"secondary"},f.fbt._("View Pack",null,{hk:"tAlU3"})),i.default.get(h.filehash)?p.default.createElement(l.default,{onClick:()=>(0,o.removeStickerFromFavorites)(h),type:"secondary"},f.fbt._("Remove From Favorites",null,{hk:"3YoUkP"})):p.default.createElement(l.default,{onClick:()=>(0,o.addStickerToFavorites)(h),type:"secondary"},f.fbt._("Add to Favorites",null,{hk:"3x4EBo"})))):E=p.default.createElement(l.default,{onClick:e,type:"secondary"},f.fbt._("View Pack",null,{hk:"tAlU3"}))}return p.default.createElement(p.default.Fragment,null,p.default.createElement(s.StickerDetailsStickerPackInfo,{name:null==g?void 0:g.name,publisher:null==g?void 0:g.publisher,theme:s.Theme.MediaViewer}),E)};var l=a(n(692629)),r=n(780549),o=n(225446),i=a(n(788788)),u=n(690495),c=n(97858),s=n(438543),d=n(425192),f=n(548360),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(a,r,o):a[r]=e[r]}a.default=e,n&&n.set(e,a);return a}(n(667294)),m=a(n(524578));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}},120236:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=a(n(348926)),r=n(637842),o=n(778945),i=n(87630),u=a(n(908081)),c=a(n(324093)),s=n(626194),d=a(n(329982)),f=n(548360),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(a,r,o):a[r]=e[r]}a.default=e,n&&n.set(e,a);return a}(n(667294));function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}class h extends d.default{componentDidMount(){this.push(p.default.createElement(g,{contactId:this.props.contactId,onClose:this.pop}))}}t.default=h;const g=(0,p.forwardRef)(((e,t)=>{const{contactId:n}=e,[a,d]=(0,p.useState)(void 0),[m,h]=(0,p.useState)(!0);(0,p.useEffect)((()=>{(function(){var e=(0,l.default)((function*(){const e=yield o.BusinessProfileCollection.update(n,{getMerchantCompliance:!0}),t=(Array.isArray(e)?e[0]:e).serialize();t?(d(t.legalEntityDetails||void 0),h(!1)):__LOG__(3)`compliance: cannot fetch business details (${n.toString()})`}));return function(){return e.apply(this,arguments)}})()()}),[]);const{entityName:g,customerCareDetails:E,grievanceOfficerDetails:b}=null!=a?a:{},v=(0,r.getEntityTypeText)(a);return p.default.createElement(u.default,{ref:t,key:"merchant-details-modal",theme:"striped"},p.default.createElement(s.DrawerHeader,{title:f.fbt._("Business details",null,{hk:"m9xzp"}),type:s.DRAWER_HEADER_TYPE.SMALL,onCancel:e.onClose}),p.default.createElement(c.default,{theme:m?"center-content":void 0},m?p.default.createElement(i.ComplianceInfoLoading,null):p.default.createElement(p.default.Fragment,null,p.default.createElement(i.ComplianceInfoGroup,null,p.default.createElement(i.ComplianceInfoPrimitiveField,{value:g,label:f.fbt._("Legal Name of Business",null,{hk:"2s9jD"})}),p.default.createElement(i.ComplianceInfoPrimitiveField,{value:v,label:f.fbt._("Business Type",null,{hk:"48J73B"})})),p.default.createElement(i.ComplianceInfoGroup,{title:f.fbt._("Customer Care Information",null,{hk:"qlYos"})},p.default.createElement(i.ComplianceInfoPrimitiveField,{value:null==E?void 0:E.mobileNumber,label:f.fbt._("Mobile Phone Number",null,{hk:"PMTTg"}),forceLTR:!0}),p.default.createElement(i.ComplianceInfoPrimitiveField,{value:null==E?void 0:E.landlineNumber,label:f.fbt._("Landline Phone Number",null,{hk:"tXYaf"}),forceLTR:!0}),p.default.createElement(i.ComplianceInfoPrimitiveField,{value:null==E?void 0:E.email,label:f.fbt._("Email Address",null,{hk:"2jYxR1"})})),p.default.createElement(i.ComplianceInfoGroup,{title:f.fbt._("Grievance Officer Information",null,{hk:"3emd7I"})},p.default.createElement(i.ComplianceInfoPrimitiveField,{value:null==b?void 0:b.name,label:f.fbt._("Name",null,{hk:"2vEs6r"})}),p.default.createElement(i.ComplianceInfoPrimitiveField,{value:null==b?void 0:b.mobileNumber,label:f.fbt._("Mobile Phone Number",null,{hk:"3kk5I"}),forceLTR:!0}),p.default.createElement(i.ComplianceInfoPrimitiveField,{value:null==b?void 0:b.landlineNumber,label:f.fbt._("Landline Phone Number",null,{hk:"4GBzF0"})}),p.default.createElement(i.ComplianceInfoPrimitiveField,{value:null==b?void 0:b.email,label:f.fbt._("Email Address",null,{hk:"3SvbLl"})})))))}));g.displayName="MerchantDetails"},517729:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{contact:t}=e;const[n,a]=(0,M.useContactValues)(t.id,[c.getVerifiedLevel,c.getVerifiedName]),C=(0,f.getBusinessFaqUrl)(),k=!u.Conn.isSMB;(0,y.useEffect)((()=>{k&&new l.BannerEventWamEvent({bannerType:E.BANNER_TYPES.CROSS_SELL_PROFILE_INTERSTITIAL,bannerOperation:E.BANNER_OPERATIONS.SHOWN}).commit()}),[k]);const P=n===r.VERIFIED_LEVEL.HIGH?p.default.t(777,{businessName:a}):v.fbt._("This business uses WhatsApp Business, which allows them to add their opening hours, address, website and catalog of products or services.",null,{hk:"82W5f"});return y.default.createElement(i.ConfirmPopup,{title:v.fbt._("About WhatsApp Business",null,{hk:"3XF5gx"}),onOK:()=>{m.ModalManager.close(),k&&new l.BannerEventWamEvent({bannerType:E.BANNER_TYPES.CROSS_SELL_PROFILE_INTERSTITIAL,bannerOperation:E.BANNER_OPERATIONS.DISMISS}).commit()},okText:v.fbt._("OK",null,{hk:"4oTrfy"})},y.default.createElement(s.EmojiText,{text:P})," ",y.default.createElement(o.default,{href:C,onClick:e=>{e.preventDefault(),m.ModalManager.close(),self.setTimeout((()=>(0,d.openExternalLink)(C)),10)}},p.default.t(393)),k&&y.default.createElement("div",{className:b.default.footerNote},y.default.createElement(g.TextSpan,{theme:"muted",size:"13"},v.fbt._("If you're a business, the free WhatsApp Business app can help.",null,{hk:"14W7ur"}),y.default.createElement("br",null),y.default.createElement(o.default,{onClick:e=>{e.preventDefault(),m.ModalManager.close(),new l.BannerEventWamEvent({bannerType:E.BANNER_TYPES.CROSS_SELL_PROFILE_INTERSTITIAL,bannerOperation:E.BANNER_OPERATIONS.CLICK}).commit(),self.setTimeout((()=>m.ModalManager.open(y.default.createElement(h.SmbAppUpsellModal,null))),200)},className:b.default.getTheAppLink},v.fbt._("Learn about getting the app",null,{hk:"3ncguo"})))))};var l=n(240045),r=n(817649),o=a(n(196554)),i=n(103440),u=n(445729),c=n(660666),s=n(305521),d=n(753233),f=n(258105),p=a(n(932325)),m=n(114850),h=n(945270),g=n(180519),E=n(130756),b=a(n(986458)),v=n(548360),y=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=C(t);if(n&&n.has(e))return n.get(e);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(a,r,o):a[r]=e[r]}a.default=e,n&&n.set(e,a);return a}(n(667294)),M=n(379811);function C(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(C=function(e){return e?n:t})(e)}},945270:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.SmbAppUpsellModal=function(){return m.default.createElement(o.ConfirmPopup,{title:p.fbt._("WhatsApp Business app",null,{hk:"4BfvOl"}),onOK:()=>{new l.BannerEventWamEvent({bannerType:f.BANNER_TYPES.CROSS_SELL_PROFILE_INTERSTITIAL,bannerOperation:f.BANNER_OPERATIONS.DISMISS}).commit(),s.ModalManager.close()},okText:p.fbt._("Close",null,{hk:"19Jpec"})},m.default.createElement(d.default,null),m.default.createElement("p",null,m.default.createElement(i.EmojiText,{text:p.fbt._("If you're a business, you can benefit from switching to the free WhatsApp Business app. It has tools to connect with customers and manage messages.",null,{hk:"2SAIXH"})})),m.default.createElement("br",null),m.default.createElement("p",null,m.default.createElement(i.EmojiText,{text:p.fbt._("Scan this code to get the WhatsApp Business App. Or, you can install it from the App Store or Google Play Store.",null,{hk:"2840mD"})})," ",m.default.createElement(r.default,{href:h,onClick:e=>{e.preventDefault(),s.ModalManager.close(),self.setTimeout((()=>(0,u.openExternalLink)(h)),10)}},c.default.t(393))))},t.WHATSAPP_BUSINESS_URL=void 0;var l=n(240045),r=a(n(196554)),o=n(103440),i=n(305521),u=n(753233),c=a(n(932325)),s=n(114850),d=a(n(345257)),f=n(130756),p=n(548360),m=a(n(667294));const h="https://www.whatsapp.com/business";t.WHATSAPP_BUSINESS_URL=h},345257:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const e=(0,c.useRef)(null),t=(0,c.useRef)(null),{theme:n}=(0,c.useContext)(i.ThemeContext),a="dark"===n;return(0,c.useEffect)((()=>(null!=e.current&&(t.current=new l.default(e.current,{text:"https://www.whatsapp.com/business/download",colorDark:"#122e31",colorLight:"#ffffff",width:o.QR_EDGE/2,height:o.QR_EDGE/2,typeNumber:4,correctLevel:l.default.CorrectLevel.H})),()=>{null!=t.current&&(t.current.clear(),t.current=null,e.current=null)})),[a]),c.default.createElement("div",{className:u.default.wrapper},c.default.createElement("div",{ref:e,className:(0,r.cx)({[u.default.codeDarkMode]:a,[u.default.code]:!0})},c.default.createElement(d,{theme:n})))};var l=a(n(478e3)),r=n(752253),o=n(914368),i=n(667738),u=a(n(750478)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(a,r,o):a[r]=e[r]}a.default=e,n&&n.set(e,a);return a}(n(667294));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function d(){return c.default.createElement("div",{className:u.default.codeLogo},c.default.createElement("svg",{width:"100%",viewBox:"0 0 50 50",xmlns:"http://www.w3.org/2000/svg"},c.default.createElement("path",{d:"M42.6776 42.6779C37.9558 47.3997 31.6777 50.0001 24.9999 50.0001C21.0047 50.0001 17.0541 49.0389 13.5244 47.2141L0.601068 49.3339L2.72832 36.3645C0.941278 32.8647 0 28.9525 0 25.0001C0 18.3223 2.60042 12.0443 7.32229 7.32237C12.0442 2.6005 18.3221 0 24.9999 0C31.6777 0 37.9558 2.6005 42.6776 7.32237C47.3995 12.0443 50 18.3223 50 25.0001C50 31.678 47.3995 37.9558 42.6776 42.6779ZM24.9999 4.33778C13.6067 4.33778 4.33772 13.607 4.33772 25.0001C4.33772 28.4792 5.21935 31.9192 6.8868 34.9487L7.24853 35.6054L5.85915 44.0756L14.2959 42.6918L14.9565 43.0601C18.0107 44.7624 21.4837 45.6622 24.9999 45.6622C36.3932 45.6622 45.6622 36.3933 45.6622 25.0001C45.6622 13.607 36.3932 4.33778 24.9999 4.33778ZM31.1133 24.3614C32.4522 24.9804 34.1536 26.3725 34.1208 29.3117C34.0749 33.4266 31.2191 35.6542 27.2744 35.6542H19.4594H18.3042C17.5079 35.6542 16.8645 35.0053 16.8713 34.2092L17.0344 15.0573C17.041 14.2714 17.6794 13.6377 18.4652 13.6366L27.1493 13.6256C31.4651 13.6256 33.9598 16.039 33.9177 19.8134C33.8903 22.2579 32.2484 23.8355 31.1133 24.3614ZM26.766 17.4622H21.3643L21.3076 22.5361H26.7093C28.5347 22.5361 29.5672 21.5152 29.584 19.9992C29.6009 18.4831 28.5915 17.4622 26.766 17.4622ZM26.9444 26.4035H21.2643L21.2038 31.8178H26.884C28.8333 31.8178 29.7752 30.5802 29.792 29.0952C29.8085 27.6101 28.8939 26.4035 26.9444 26.4035Z",fill:"currentColor"})))}},314810:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{active:t,contact:n,onClick:a,contextMenu:i,isPendingParticipant:u=!1,contextEnabled:c,onContext:s,theme:d,showStatusRingAroundProfilePhoto:f,participantCollection:p,elevatedPushNamesEnabled:m}=e,h=(0,o.useModelValues)(e.participant,["isAdmin"]);return r.default.createElement(l.Contact,{active:t,contact:n,admin:h.isAdmin,onClick:u?s:a,theme:d||"drawer-list",contextEnabled:()=>null!=c&&c(n),contextMenu:i,onContext:e=>null==s?void 0:s(e,n),isPendingParticipant:u,showNotifyName:!0,elevatedPushNamesEnabled:m,waitIdle:!0,showStatusRingAroundProfilePhoto:f,participantCollection:p})};var l=n(822652),r=a(n(667294)),o=n(655241)},321574:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{docMsgs:t,chat:n,isFilterEnabled:a=!1,filterText:g}=e,E=(0,r.default)(e,h),b=(0,m.default)(),v=(0,f.default)((()=>new s.default((e=>{const t=[],n=(0,o.getText)(e);null!=n&&t.push(n);const a=e.mediaData.filename;return t.push(a),t.join(" ")}))));(0,p.useListener)(t,"add",(e=>{a&&v.current.cacheMessageTokens(e)})),(0,p.useListener)(t,"remove",(e=>{a&&v.current.removeMessageTokensFromCache(e)})),(0,p.useListener)(t,"reset",(()=>{a&&v.current.clearTokensCache()})),(0,d.useEffect)((()=>{a&&t.forEach((e=>{v.current.cacheMessageTokens(e)}))}),[t,v,a]);const y=a?(e,t)=>v.current.filter(e,g,t):void 0;return d.default.createElement(d.default.Fragment,null,d.default.createElement(c.default,(0,l.default)({testid:"doc-gallery",msgsCollection:t,msgsCollectionUpdateEvents:["add","remove","reset","query_doc_before"],queryCollection:e=>{t.hasDocBefore&&b((()=>{t.queryDocs(n,e)}))},getHasBefore:()=>t.hasDocBefore,getQueryBefore:()=>t.queryDocBefore,emptyText:u.default.t(497),chat:n,filterMessages:y},E)),d.default.createElement(i.HistorySyncGalleryPlaceholder,{chat:n}))};var l=a(n(967154)),r=a(n(506479)),o=n(163755),i=n(217714),u=a(n(932325)),c=a(n(101760)),s=a(n(443461)),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(a,r,o):a[r]=e[r]}a.default=e,n&&n.set(e,a);return a}(n(667294)),f=a(n(637660)),p=n(808446),m=a(n(940630));const h=["docMsgs","chat","isFilterEnabled","filterText"];function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}},671597:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{linkMsgs:t,chat:n,selectedMessages:a,selectable:M,onMessageSelect:C,isFilterEnabled:k=!1,filterText:P}=e,_=(0,v.default)(),w=(0,E.default)((()=>new m.default((e=>(0,i.getText)(e)))));(0,b.useListener)(t,"add",(e=>{k&&w.current.cacheMessageTokens(e)})),(0,b.useListener)(t,"remove",(e=>{w.current.removeMessageTokensFromCache(e)})),(0,b.useListener)(t,"reset",(()=>{k&&w.current.clearTokensCache()})),(0,g.useEffect)((()=>{k&&t.forEach((e=>{w.current.cacheMessageTokens(e)}))}),[t,w,k]),(0,b.useListener)(n.msgs,"add bulk_add",(e=>{if(!e)return;const n=[],a=Array.isArray(e)?e:[e];Promise.all(a.map((e=>((0,p.getLinksFromMsg)(e).length&&n.push(e),Promise.resolve())))).then((()=>{n.length&&t.add(n)}))}));const S=k?(e,t)=>w.current.filter(e,P,t):void 0,{linkMsgs:O,chat:I,filterText:T,isFilterEnabled:A}=e,N=(0,r.default)(e,y);return g.default.createElement(g.default.Fragment,null,g.default.createElement(d.default,(0,l.default)({testid:"link-gallery",msgsCollection:t,msgsCollectionUpdateEvents:["add","remove","reset","query_doc_before"],queryCollection:e=>{t.hasLinkBefore&&_((()=>{t.queryLinks(n,e)}))},getHasBefore:()=>t.hasLinkBefore,getQueryBefore:()=>t.queryLinkBefore,messageElements:(e,t)=>((e,t,n,a,l)=>{const r=[];return e.forEach((e=>{const i=!(0,f.getIsSentByMe)(e)&&(0,f.getIsGroupMsg)(e);let u=null;(0,f.getLinkPreview)(e)&&(u=g.default.createElement(h.default,{testid:"link-gallery-msg",key:e.id.toString(),msg:e,selectable:n,selectedMessages:l,onMessageSelect:a,displayType:o.DISPLAY_TYPE.GALLERY_LINKS,onClickMsg:t})),(0,p.getGalleryLinks)(e).forEach(((o,c)=>{o.href===e.matchedText&&null!=u||r.push(g.default.createElement(s.default,{testid:"link-gallery-msg",key:`${e.id.toString()}-${c}`,msg:e.safe(),link:o,displayAuthor:i,selectable:n,selectedMessages:l,onMessageSelect:a,onClickMsg:t}))})),null!=u&&r.push(u)})),r.reverse(),r})(e,t,M,C,a),emptyText:c.default.t(499),chat:n,filterMessages:S},N)),g.default.createElement(u.HistorySyncGalleryPlaceholder,{chat:e.chat}))};var l=a(n(967154)),r=a(n(506479)),o=n(356097),i=n(163755),u=n(217714),c=a(n(932325)),s=a(n(318787)),d=a(n(101760)),f=n(787742),p=n(44118),m=a(n(443461)),h=a(n(565644)),g=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=M(t);if(n&&n.has(e))return n.get(e);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(a,r,o):a[r]=e[r]}a.default=e,n&&n.set(e,a);return a}(n(667294)),E=a(n(637660)),b=n(808446),v=a(n(940630));const y=["linkMsgs","chat","filterText","isFilterEnabled"];function M(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(M=function(e){return e?n:t})(e)}},318787:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{msg:t,link:n,displayAuthor:a,selectedMessages:_,onMessageSelect:w,onClickMsg:S,testid:O}=e,[I,T,A,N,x,D,R,j,L,B,G,W]=(0,P.useMsgValues)(e.msg.id,[h.getBody,h.getCaption,c.getDir,h.getId,h.getIsSentByMe,c.getMediaData,h.getType,c.getRtl,c.getSenderObj,h.getStar,c.getAsRevoked,h.getIsKept]),[F,V]=(0,C.useState)(!1),[H,U]=(0,C.useState)((()=>_.isSelected(t.unsafe())));(0,k.useListener)(_,N.toString(),(e=>{H!==e&&U(e)}));const q=e.selectable||F?C.default.createElement(m.default,{checked:H,onClick:e=>{e&&e.stopPropagation(),w(t.unsafe(),!H)},msgTheme:"gallery"}):null,z=(0,u.Conversation)({mentions:t.mentionMap(),groupMentions:t.groupMentionMap(),links:(0,g.getLinksFromMsg)(t.unsafe()),phoneNumbers:(0,b.getPhoneNumbersFromMsg)(t.unsafe()),selectable:true,trusted:(0,E.isTrusted)(t.unsafe()),fromMe:N.fromMe}),Y=I&&I.includes(n.url)?I:T,K=a?C.default.createElement("div",{className:M.default.author},C.default.createElement(p.default,{msg:t,contact:L})):null,X=(0,g.getSuspiciousLinks)(t.unsafe()).length>0;return C.default.createElement(s.default,{hover:F,onClick:()=>{S(t.unsafe(),!H)},onMouseEnter:F?null:()=>{F||V(!0)},onMouseOver:F?null:()=>{F||V(!0)},onMouseLeave:F?()=>{F&&V(!1)}:null,testid:O},C.default.createElement("div",{className:M.default.msg,"data-testid":"link-msg"},C.default.createElement(v.default,{transitionName:"delay-leave"},q),C.default.createElement(y.MessageContainer,{isSentByMe:x},C.default.createElement("div",{className:(0,r.cx)({[M.default.hasAuthor]:a,[M.default.hasSuspiciousLinks]:X,[M.default.bubble]:!0})},K,C.default.createElement(l.SuspiciousLabel,{link:n,displayType:o.DISPLAY_TYPE.GALLERY}),C.default.createElement(f.default,{title:n.url,isSentByMe:x,canonicalUrl:n.domain,displayType:o.DISPLAY_TYPE.GALLERY,star:B,kept:W,isLoading:!1}),C.default.createElement(i.EmojiText,{text:Y,selectable:true,className:M.default.text,dirMismatch:j!==d.default.isRTL(),direction:A,formatters:z})))))};var l=n(751349),r=n(752253),o=n(356097),i=n(305521),u=n(675886),c=n(163755),s=a(n(296518)),d=a(n(932325)),f=a(n(428543)),p=a(n(599664)),m=a(n(6323)),h=n(787742),g=n(44118),E=n(435711),b=n(527530),v=a(n(844453)),y=n(512873),M=a(n(663945)),C=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=_(t);if(n&&n.has(e))return n.get(e);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(a,r,o):a[r]=e[r]}a.default=e,n&&n.set(e,a);return a}(n(667294)),k=n(808446),P=n(871210);function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(_=function(e){return e?n:t})(e)}},101760:(e,t,n)=>{"use strict";var a=n(170315).default,l=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{getHasBefore:t,getQueryBefore:n,msgsCollection:l,msgsCollectionUpdateEvents:P,emptyText:w,scrollOffset:S=0,selectable:O,onMessageSelect:I,queryCollection:T,selectedMessages:A,messageElements:N,onProductDetail:x,setScrollOffset:D,filterMessages:R,testid:j}=e,L=t(),B=n(),G=(0,g.useRef)(null),W=(0,k.default)(),F=(0,C.default)((e=>{L&&T(e)}),100),[V,H]=(0,g.useState)((()=>l.toArray())),U=(0,C.default)((e=>{const t=e.scrollHeight-e.clientHeight-e.scrollTop;L&&t<f.SCROLL_FUDGE&&F(l.head()),D&&D(e.scrollTop)}),100);(0,g.useEffect)((()=>{L&&F();const e=G.current;return e&&(e.scrollTop=S),()=>{U.cancel()}}),[]);const q=(e,t)=>{const n=(0,h.unproxy)(e);O&&void 0!==t?I(n,t):u.Cmd.openChatAt((0,p.getChat)(n),(0,i.getSearchContext)((0,p.getChat)(n),n))},z=(0,g.useRef)(),Y=(0,b.default)(),K=(0,g.useCallback)(function(){var e=(0,r.default)((function*(e){var t;if(null===(t=z.current)||void 0===t||t.abort(),null==e)return H(l.toArray()),void Y();z.current=new a;const n=z.current.signal;try{const t=yield e(l,n);n.aborted||W.aborted||(H(t),Y())}catch(e){if(e.name!==o.ABORT_ERROR)throw e}}));return function(){return e.apply(this,arguments)}}(),[l,Y,W]);(0,v.useListener)(l,P,(()=>K(R))),(0,g.useEffect)((()=>(K(R),()=>{var e;return null===(e=z.current)||void 0===e?void 0:e.abort()})),[K,R]);const[X,{height:Z}]=(0,y.default)(),Q=(0,M.default)(X,G);(0,g.useEffect)((()=>{null!=R&&t()&&!n()&&null!=G.current&&G.current.scrollHeight<Z+f.SCROLL_FUDGE&&F(l.head())}));let $=null;$=N?N(V,q):V.map(((e,t)=>g.default.createElement(m.default,{key:`${e.id.toString()}_${t}`,msg:e,selectable:O,selectedMessages:A,onMessageSelect:I,displayType:c.DISPLAY_TYPE.GALLERY,onClickMsg:q,onProductClick:x}))).reverse();if(B){if(0===$.length)return g.default.createElement(s.Loading,null);$.push(g.default.createElement(d.default,{key:-1}))}if(0===$.length&&!B&&!L)return g.default.createElement(s.Empty,{text:w,testid:"no-elements"});return g.default.createElement("div",{"data-testid":j,ref:Q,onScroll:e=>{U(e.target)},className:(0,E.default)(_)},$)};var r=l(n(348926)),o=n(898817),i=n(713105),u=n(780549),c=n(356097),s=n(811720),d=l(n(495012)),f=n(914368),p=n(163755),m=l(n(565644)),h=n(163139),g=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=P(t);if(n&&n.has(e))return n.get(e);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(a,r,o):a[r]=e[r]}a.default=e,n&&n.set(e,a);return a}(n(667294)),E=l(n(156720)),b=l(n(969651)),v=n(808446),y=l(n(695841)),M=l(n(38085)),C=l(n(286481)),k=l(n(895851));function P(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(P=function(e){return e?n:t})(e)}const _={display:"p357zi0d",flexDirection:"f8m0rgwh",overflowX:"gfz4du6o",overflowY:"rpvcun8f",flexGrow:"ggj6brxn"}},285192:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{productMsgs:t,chat:n}=e,a=(0,r.default)(e,d),f=(0,s.default)();return c.default.createElement(c.default.Fragment,null,c.default.createElement(i.default,(0,l.default)({msgsCollection:t,msgsCollectionUpdateEvents:["add","remove","reset","products_loaded"],queryCollection:e=>f((()=>{t.queryProducts(n,e)})),getHasBefore:()=>t.hasProductBefore,getQueryBefore:()=>t.hasProductBefore?Promise.resolve():null,emptyText:u.fbt._("No products",null,{hk:"8o7dB"}),chat:n},a)),c.default.createElement(o.HistorySyncGalleryPlaceholder,{chat:n}))};var l=a(n(967154)),r=a(n(506479)),o=n(217714),i=a(n(101760)),u=n(548360),c=a(n(667294)),s=a(n(940630));const d=["productMsgs","chat"]},268167:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.BubbleIcon=function(e){const{iconXstyle:t,height:n,width:a,viewBox:s}=e,d=(0,r.default)(e,c);let f;if(s){const{x:e=0,y:t=0,width:n=0,height:a=0}=s;f=[e,t,n,a].join(" ")}{var p;let e=24,r=24;return null==n&&null==a||(e=n,r=a),u.default.createElement(o.BaseSvgSpan,(0,l.default)({name:"bubble"},d),u.default.createElement("svg",{viewBox:null!==(p=f)&&void 0!==p?p:"0 0 24 24",height:e,width:r,preserveAspectRatio:"xMidYMid meet",className:(0,i.default)(t),version:"1.1",x:"0px",y:"0px",enableBackground:"new 0 0 24 24",xmlSpace:"preserve"},u.default.createElement("path",{fill:"currentColor",d:"M19.2,4H4.8C3.8,4,3,4.8,3,5.8V22l3.6-3.6h12.6c1,0,1.8-0.8,1.8-1.8V5.8C21,4.8,20.2,4,19.2,4z M19.2,16.6 H6.6l-1.8,1.8V5.8h14.4V16.6z"})))}};var l=a(n(967154)),r=a(n(506479)),o=n(220584),i=a(n(156720)),u=a(n(667294));const c=["iconXstyle","height","width","viewBox"]},230255:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.ChatInfoVideoIcon=function(e){var t;const{iconXstyle:n,height:a,width:s,viewBox:d}=e,f=(0,r.default)(e,c);let p;if(d){const{x:e=0,y:t=0,width:n=0,height:a=0}=d;p=[e,t,n,a].join(" ")}let m=13,h=21;null==a&&null==s||(m=a,h=s);return u.default.createElement(o.BaseSvgSpan,(0,l.default)({name:"chat-info-video"},f),u.default.createElement("svg",{viewBox:null!==(t=p)&&void 0!==t?t:"0 0 21 13",height:m,width:h,preserveAspectRatio:"xMidYMid meet",className:(0,i.default)(n),fill:"none"},u.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.17.5c1.11 0 2.009.9 2.009 2.009v8.482c0 1.11-.9 2.009-2.01 2.009H2.01C.899 13 0 12.1 0 10.991V2.51C0 1.399.9.5 2.009.5h11.16Zm7.17 1.746a.893.893 0 0 1 .196.558v7.892a.893.893 0 0 1-1.45.697l-3.015-2.41V4.517l3.014-2.411a.893.893 0 0 1 1.255.14Z",fill:"#00A884"})))};var l=a(n(967154)),r=a(n(506479)),o=n(220584),i=a(n(156720)),u=a(n(667294));const c=["iconXstyle","height","width","viewBox"]},672185:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.ForwardFilledIcon=function(e){var t;const{iconXstyle:n,height:a,width:s,viewBox:d}=e,f=(0,r.default)(e,c);let p;if(d){const{x:e=0,y:t=0,width:n=0,height:a=0}=d;p=[e,t,n,a].join(" ")}let m=16,h=21;null==a&&null==s||(m=a,h=s);return u.default.createElement(o.BaseSvgSpan,(0,l.default)({name:"forward-filled"},f),u.default.createElement("svg",{viewBox:null!==(t=p)&&void 0!==t?t:"0 0 21 16",height:m,width:h,preserveAspectRatio:"xMidYMid meet",className:(0,i.default)(n),fill:"none"},u.default.createElement("path",{d:"M12.778 1.31318C12.778 0.590175 13.651 0.228175 14.161 0.739175L20.206 6.79017C20.2813 6.8654 20.341 6.95472 20.3817 7.05304C20.4225 7.15136 20.4435 7.25675 20.4435 7.36317C20.4435 7.4696 20.4225 7.57499 20.3817 7.67331C20.341 7.77163 20.2813 7.86095 20.206 7.93617L14.161 13.9872C14.0476 14.1006 13.9032 14.1779 13.7459 14.2091C13.5886 14.2404 13.4256 14.2243 13.2775 14.1628C13.1294 14.1013 13.0028 13.9973 12.9139 13.8638C12.825 13.7304 12.7777 13.5735 12.778 13.4132V10.6812C7.68197 10.6812 3.94897 12.1362 1.17397 15.2922C0.927967 15.5712 0.471967 15.3342 0.571967 14.9762C2.00197 9.80317 5.49697 4.97218 12.778 3.93118V1.31318Z",fill:"currentColor"})))};var l=a(n(967154)),r=a(n(506479)),o=n(220584),i=a(n(156720)),u=a(n(667294));const c=["iconXstyle","height","width","viewBox"]},328150:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.KeepInChatMediaIcon=function(e){const{iconXstyle:t,height:n,width:a,viewBox:s}=e,d=(0,r.default)(e,c);let f;if(s){const{x:e=0,y:t=0,width:n=0,height:a=0}=s;f=[e,t,n,a].join(" ")}{var p;let e=24,r=24;return null==n&&null==a||(e=n,r=a),u.default.createElement(o.BaseSvgSpan,(0,l.default)({name:"keep-in-chat-media"},d),u.default.createElement("svg",{viewBox:null!==(p=f)&&void 0!==p?p:"0 0 24 24",height:e,width:r,preserveAspectRatio:"xMidYMid meet",className:(0,i.default)(t),fill:"none"},u.default.createElement("path",{d:"m17 3h-10c-1.1 0-1.99.9-1.99 2l-.01 16 7-3 7 3v-16c0-1.1-.9-2-2-2z",fill:"currentColor"})))}};var l=a(n(967154)),r=a(n(506479)),o=n(220584),i=a(n(156720)),u=a(n(667294));const c=["iconXstyle","height","width","viewBox"]},247442:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.ReactionsMediaIcon=function(e){const{iconXstyle:t,height:n,width:a,viewBox:s}=e,d=(0,r.default)(e,c);let f;if(s){const{x:e=0,y:t=0,width:n=0,height:a=0}=s;f=[e,t,n,a].join(" ")}{var p;let e=15,r=15;return null==n&&null==a||(e=n,r=a),u.default.createElement(o.BaseSvgSpan,(0,l.default)({name:"reactions-media"},d),u.default.createElement("svg",{viewBox:null!==(p=f)&&void 0!==p?p:"0 0 15 15",height:e,width:r,preserveAspectRatio:"xMidYMid meet",className:(0,i.default)(t),fill:"none"},u.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 7.5C0 11.6305 3.36946 15 7.5 15C11.6527 15 15 11.6305 15 7.5C15 3.36946 11.6305 0 7.5 0C3.36946 0 0 3.36946 0 7.5ZM10.995 8.69333C11.1128 8.67863 11.2219 8.66503 11.3211 8.65309C11.61 8.63028 11.8076 8.91918 11.6784 9.13965C10.8573 10.6374 9.29116 11.793 7.50455 11.793C5.71794 11.793 4.15181 10.6602 3.33072 9.16246C3.18628 8.91918 3.37634 8.63028 3.66524 8.65309C3.79123 8.66749 3.93521 8.68511 4.09426 8.70457C4.94292 8.80842 6.22074 8.96479 7.48174 8.96479C8.81855 8.96479 10.1378 8.80025 10.995 8.69333ZM5.41405 7.37207C6.05761 7.37207 6.60923 6.72851 6.60923 6.02978C6.60923 5.30348 6.05761 4.6875 5.41405 4.6875C4.77048 4.6875 4.21886 5.33106 4.21886 6.02978C4.20967 6.75609 4.77048 7.37207 5.41405 7.37207ZM10.7807 6.05619C10.7807 6.74114 10.24 7.37201 9.60912 7.37201C8.97825 7.37201 8.4375 6.76818 8.4375 6.05619C8.4375 5.37124 8.97825 4.74037 9.60912 4.74037C10.24 4.74037 10.7807 5.34421 10.7807 6.05619Z",fill:"currentColor"})))}};var l=a(n(967154)),r=a(n(506479)),o=n(220584),i=a(n(156720)),u=a(n(667294));const c=["iconXstyle","height","width","viewBox"]},604668:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.ReplyIcon=function(e){const{iconXstyle:t,height:n,width:a,viewBox:s}=e,d=(0,r.default)(e,c);let f;if(s){const{x:e=0,y:t=0,width:n=0,height:a=0}=s;f=[e,t,n,a].join(" ")}{var p;let e=24,r=24;return null==n&&null==a||(e=n,r=a),u.default.createElement(o.BaseSvgSpan,(0,l.default)({name:"reply"},d),u.default.createElement("svg",{viewBox:null!==(p=f)&&void 0!==p?p:"0 0 24 24",height:e,width:r,preserveAspectRatio:"xMidYMid meet",className:(0,i.default)(t),version:"1.1",x:"0px",y:"0px",xmlSpace:"preserve"},u.default.createElement("path",{fill:"currentColor",d:"M9.72,7.43C17,8.47,20.5,13.3,21.93,18.48 c0.1,0.36-0.36,0.59-0.6,0.32c-2.77-3.16-6.51-4.61-11.6-4.61v2.73c0,0.72-0.87,1.08-1.38,0.57l-6.05-6.05 c-0.32-0.32-0.32-0.83,0-1.15l6.05-6.05c0.51-0.51,1.38-0.15,1.38,0.57V7.43z"})))}};var l=a(n(967154)),r=a(n(506479)),o=n(220584),i=a(n(156720)),u=a(n(667294));const c=["iconXstyle","height","width","viewBox"]},220279:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.UndoKeepInChatMediaIcon=function(e){const{iconXstyle:t,height:n,width:a,viewBox:s}=e,d=(0,r.default)(e,c);let f;if(s){const{x:e=0,y:t=0,width:n=0,height:a=0}=s;f=[e,t,n,a].join(" ")}{var p;let e=24,r=24;return null==n&&null==a||(e=n,r=a),u.default.createElement(o.BaseSvgSpan,(0,l.default)({name:"undo-keep-in-chat-media"},d),u.default.createElement("svg",{viewBox:null!==(p=f)&&void 0!==p?p:"0 0 25 24",height:e,width:r,preserveAspectRatio:"xMidYMid meet",className:(0,i.default)(t),fill:"none"},u.default.createElement("path",{clipRule:"evenodd",d:"m18 3h-10.00003c-1.1 0-1.99.9-1.99 2l-.0005.79529 13.99053 8.04121v-8.8365c0-1.1-.9-2-2-2zm2 14.9115 3.8749 2.2272.9967-1.734-22.97977-13.20787-.996627 1.73399 5.111727 2.93802-.00696 11.13116 7.00003-3 7 3z",fill:"currentColor",fillRule:"evenodd"})))}};var l=a(n(967154)),r=a(n(506479)),o=n(220584),i=a(n(156720)),u=a(n(667294));const c=["iconXstyle","height","width","viewBox"]},677658:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.UnpinnedIcon=function(e){var t;const{iconXstyle:n,height:a,width:s,viewBox:d}=e,f=(0,r.default)(e,c);let p;if(d){const{x:e=0,y:t=0,width:n=0,height:a=0}=d;p=[e,t,n,a].join(" ")}let m=24,h=24;null==a&&null==s||(m=a,h=s);return u.default.createElement(o.BaseSvgSpan,(0,l.default)({name:"unpinned"},f),u.default.createElement("svg",{viewBox:null!==(t=p)&&void 0!==t?t:"0 0 24 24",height:m,width:h,preserveAspectRatio:"xMidYMid meet",className:(0,i.default)(n),fill:"none"},u.default.createElement("path",{d:"M15.9984 10.6491V4.28906H16.9984V2.28906H7.64844L15.9984 10.6491Z",fill:"currentColor"}),u.default.createElement("path",{d:"M16 11.7291V4.28906H17V2.28906H7V2.71906L16 11.7291Z",fill:"currentColor"}),u.default.createElement("path",{d:"M21.21 19.7395L4.23 2.73945C4.03 2.53945 3.79 2.43945 3.52 2.43945C3.25 2.43945 3.01 2.53945 2.81 2.73945C2.61 2.93945 2.51 3.17945 2.5 3.44945C2.5 3.71945 2.59 3.95945 2.79 4.15945L8.01 9.36945V11.2795L6.00999 13.2795V15.2795H11.01V21.2795L12.01 22.2795L13.01 21.2795V15.2795H13.93L19.79 21.1295C19.99 21.3295 20.23 21.4295 20.5 21.4295C20.77 21.4295 21.01 21.3295 21.21 21.1295C21.41 20.9295 21.51 20.6995 21.51 20.4295C21.51 20.1595 21.41 19.9295 21.21 19.7295V19.7395Z",fill:"currentColor"}),u.default.createElement("path",{d:"M21.21 19.7395L4.23 2.73945C4.03 2.53945 3.79 2.43945 3.52 2.43945C3.25 2.43945 3.01 2.53945 2.81 2.73945C2.61 2.93945 2.51 3.17945 2.5 3.44945C2.5 3.71945 2.59 3.95945 2.79 4.15945L8.01 9.36945V11.2795L6.00999 13.2795V15.2795H11.01V21.2795L12.01 22.2795L13.01 21.2795V15.2795H13.93L19.79 21.1295C19.99 21.3295 20.23 21.4295 20.5 21.4295C20.77 21.4295 21.01 21.3295 21.21 21.1295C21.41 20.9295 21.51 20.6995 21.51 20.4295C21.51 20.1595 21.41 19.9295 21.21 19.7295V19.7395Z",fill:"currentColor"})))};var l=a(n(967154)),r=a(n(506479)),o=n(220584),i=a(n(156720)),u=a(n(667294));const c=["iconXstyle","height","width","viewBox"]},190848:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceCallFilledIcon=function(e){var t;const{iconXstyle:n,height:a,width:s,viewBox:d}=e,f=(0,r.default)(e,c);let p;if(d){const{x:e=0,y:t=0,width:n=0,height:a=0}=d;p=[e,t,n,a].join(" ")}let m=22,h=22;null==a&&null==s||(m=a,h=s);return u.default.createElement(o.BaseSvgSpan,(0,l.default)({name:"voice-call-filled"},f),u.default.createElement("svg",{viewBox:null!==(t=p)&&void 0!==t?t:"0 0 22 22",height:m,width:h,preserveAspectRatio:"xMidYMid meet",className:(0,i.default)(n),fill:"none"},u.default.createElement("path",{d:"M19.685 14.3869L16.7217 14.0486C16.0101 13.9669 15.3101 14.2119 14.8084 14.7136L12.6617 16.8602C9.36005 15.1802 6.65338 12.4852 4.97338 9.17188L7.13172 7.01355C7.63338 6.51188 7.87838 5.81188 7.79672 5.10022L7.45838 2.16022C7.31838 0.981882 6.32672 0.0952148 5.13672 0.0952148H3.11838C1.80005 0.0952148 0.703381 1.19188 0.785047 2.51022C1.40338 12.4736 9.37172 20.4302 19.3234 21.0486C20.6417 21.1302 21.7384 20.0336 21.7384 18.7152V16.6969C21.75 15.5186 20.8634 14.5269 19.685 14.3869Z",fill:"currentColor"})))};var l=a(n(967154)),r=a(n(506479)),o=n(220584),i=a(n(156720)),u=a(n(667294));const c=["iconXstyle","height","width","viewBox"]},495346:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{onEnd:t}=e;const[n,a]=(0,i.useFlow)(u.Chats,{transitions:i.FlowTransitions.DrawerLeft,onEnd:t});if(null==a.step)return null;let c;switch(a.step){case u.Chats:c=o.default.createElement(l.default,{settings:r.default,onClose:()=>{a.pop()}})}return o.default.createElement(n,{flow:a},c)};var l=a(n(854534)),r=a(n(634152)),o=a(n(667294)),i=n(839062);const u=n(76672).Mirrored(["Chats"])},339257:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.InfoFlow=void 0;var l=a(n(348926)),r=a(n(81109)),o=n(898817),i=n(418987),u=a(n(670983)),c=a(n(229922)),s=n(72696),d=a(n(55423)),f=a(n(791865)),p=n(374660),m=n(780549),h=n(473735),g=n(260854),E=n(174834),b=n(355734),v=n(355351),y=n(103440),M=a(n(655237)),C=n(834110),k=a(n(41493)),P=n(568550),_=n(900316),w=a(n(365889)),S=a(n(649391)),O=a(n(941943)),I=n(408256),T=n(393609),A=a(n(596090)),N=n(113269),x=a(n(422325)),D=n(147550),R=a(n(302112)),j=n(306472),L=n(114850),B=a(n(550506)),G=a(n(506072)),W=a(n(58880)),F=n(73225),V=a(n(751046)),H=a(n(245272)),U=n(95589),q=a(n(386067)),z=n(932523),Y=n(77548),K=a(n(614058)),X=a(n(632289)),Z=n(559016),Q=a(n(898707)),$=n(242677),J=a(n(559893)),ee=n(977575),te=n(316348),ne=n(555622),ae=n(126592),le=a(n(979588)),re=n(470824),oe=n(111971),ie=n(238669),ue=n(377773),ce=n(804477),se=n(130756),de=a(n(556869)),fe=n(548360),pe=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=Ee(t);if(n&&n.has(e))return n.get(e);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(a,r,o):a[r]=e[r]}a.default=e,n&&n.set(e,a);return a}(n(667294)),me=n(839062),he=a(n(17533)),ge=a(n(895851));function Ee(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(Ee=function(e){return e?n:t})(e)}const be=D.InfoFlowStep,ve=e=>{var t;if(e.isGroup)return be.GroupInfo;if(e.isBroadcast)return be.BroadcastInfo;if(e.isUser)return be.ContactInfo;if(e.isNewsletter)return be.NewsletterInfo;const n=null!==(t=e.kind)&&void 0!==t?t:"undefined";throw(0,de.default)(`Invalid chat provided of kind ${n}`)},ye=(0,pe.forwardRef)(((e,t)=>{const{chat:n,initialStep:a=ve(n),showFullGroupDescription:D,scrollToParticipantList:de,profileEntryPoint:Ee,onEnd:ye,displayName:Me,sourceGroupChat:Ce}=e,ke=(0,pe.useRef)(0),Pe=(0,he.default)((e=>{ke.current=e})),_e=(0,pe.useRef)(void 0),we=(0,pe.useContext)(P.DrawerContext),[Se,Oe]=(0,me.useFlow)(a,{transitions:me.FlowTransitions.DrawerRight,onEnd:ye}),[Ie,Te]=(0,pe.useState)(null),[Ae,Ne]=(0,pe.useState)(void 0),[xe,De]=(0,pe.useState)(null),[Re,je]=(0,pe.useState)(null),[Le,Be]=(0,pe.useState)(null),[Ge,We]=(0,pe.useState)(null),[Fe,Ve]=(0,pe.useState)(null);(0,pe.useEffect)((()=>{if(n.isGroup)(0,N.queryAndUpdateGroupMetadataById)(n.id,"interactive");else if(n.isUser)n.contact.isBusiness&&(0,s.canSeeBizProfileV3)()&&_.DrawerManager.setDrawerContext("right",(0,z.buildProductCatalogContext)(new $.ProductCatalogSession,(0,C.getMaybeBizPlatformForLogging)(n.contact.id.toString()),se.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_PROFILE));else if(n.isNewsletter){var e;(0,ae.queryAndUpdateNewsletterMetadataAction)((0,i.toNewsletterJid)(n.id.toString()),{fields:(0,r.default)({name:!0,picture:!0,description:!0,inviteLink:!0,handle:!0,subscribers:!0,privacy:!0,verification:!0,state:!0},!(null===(e=n.newsletterMetadata)||void 0===e?void 0:e.isPreview)&&{muted:!0,membership:!0})})}}),[]);const He=(e,t)=>{Te(e),Ne(t),Oe.push(be.ProductDetail)},Ue=e=>{De(e),Oe.push(be.ProductCollection)},qe=e=>{Te(e),Oe.push(be.ProductLink)},ze=e=>{Te(e),Oe.push(be.ProductInfo)},Ye=(e,t)=>{je(e),Be(t),Oe.push(be.CatalogLink)},Ke=e=>{const t=(0,z.getProductCatalogContext)(we);(0,d.default)(e,n,t)&&(We(e),Oe.push(be.Cart))},Xe=(e,t)=>{const a=n.id;ne.QPL.markerStart(te.QuickLogMarkerId.WHATSAPP_CATALOG_COLLECTIONS_VIEW,{annotations:{string:{EntryPoint:t}}}),(0,Y.logCarouselViewMoreClick)({catalogOwnerWid:a,catalogContext:e}),Oe.push(be.Catalog)},Ze=()=>{L.ModalManager.open(pe.default.createElement(y.ConfirmPopup,{onOK:()=>L.ModalManager.close(),okText:fe.fbt._("OK",null,{hk:"4oTrfy"})},fe.fbt._("Only admins can edit this group's info",null,{hk:"1a2ztg"})))},Qe=(0,ge.default)(),$e=function(){var t=(0,l.default)((function*(t){yield(0,c.default)((0,re.setGroupSubject)(e.chat,t),Qe).catch((0,o.catchAbort)((()=>{}))).catch((()=>{__LOG__(3)`name_group_modal:onSetSubject failed`})),L.ModalManager.close(),Oe.push(be.GroupInviteLink)}));return function(){return t.apply(this,arguments)}}(),Je=()=>{var e;if((0,p.isInviteGrowthLockedGroup)(n)){var t;const e=!!(null===(t=n.groupMetadata)||void 0===t?void 0:t.participants.iAmAdmin());(0,T.openGrowthLockedModal)(e,!0)}else if(null===(e=n.groupMetadata)||void 0===e?void 0:e.isUnnamed){var a,l;const e=fe.fbt._("This group was created without a name. Give it a name to share the group link.",null,{hk:"1uQedr"});L.ModalManager.open(pe.default.createElement(B.default,{chat:n,subtext:e,onCancel:()=>L.ModalManager.close(),onOK:$e,editable:null===(a=n.groupMetadata)||void 0===a?void 0:a.canSetSubject(),editRestrictionInfo:(null===(l=n.groupMetadata)||void 0===l?void 0:l.restrict)?Ze:void 0}))}else Oe.push(be.GroupInviteLink)},et=e=>{Be(e||n.contact),Oe.push(be.Verification)},tt=()=>{(0,ue.shouldShowNUX)(U.NUX.EPHEMERAL)?L.ModalManager.open(pe.default.createElement(S.default,{chat:n,fromMe:!0,onOk:()=>Oe.push(be.Ephemeral)})):Oe.push(be.Ephemeral)},nt=()=>{var e;const t=null===(e=n.groupMetadata)||void 0===e?void 0:e.parentGroup;t&&m.Cmd.openCommunityHome(t,!0)},at=()=>{Oe.end(ie.DismissReason.LIFECYCLE)},lt=()=>{_e.current=void 0,ke.current=0,Oe.push(be.MediaGallery)},rt=()=>{_e.current=j.TABS.PRODUCTS,Oe.pop()};if(!Oe.step)return null;const ot=null!=Ce?Ce:n;let it;switch(Oe.step){case be.GroupInfo:if((0,p.isCommunityAnnouncementGroup)(ot)&&!(0,p.isDeactivatedCommunityAnnouncementGroup)(ot)&&(0,E.communityTabbedInfoEnabled)()){var ut;const e=null===(ut=ot.groupMetadata)||void 0===ut?void 0:ut.parentGroup;it=pe.default.createElement(g.CommunityFlowLoadable,{homeTheme:b.CommunityHomeTheme.TabbedInfo,initialStep:h.CommunityFlowStep.CommunityHome,initialTab:v.CommunityInfoTabs.Announcements,jid:e,onBack:()=>Oe.pop()})}else it=pe.default.createElement(O.default,{chat:ot,showFullGroupDescription:D,scrollToParticipantList:de,groupMetadata:ot.groupMetadata,contact:ot.contact,profilePicThumb:ot.contact.getProfilePicThumb(),onVerification:et,onStarred:()=>Oe.push(be.Starred),onKept:()=>Oe.push(be.Kept),onSentForAdminReview:()=>Oe.push(be.SentForAdminReview),onMediaGallery:lt,onAdminSetting:()=>Oe.push(be.GroupSettings),onGroupInviteLink:Je,onPendingParticipants:()=>Oe.push(be.PendingParticipants),onEphemeral:tt,onCommunityClick:nt,onClose:()=>{Ce?Oe.end():Oe.pop()}});break;case be.SentForAdminReview:it=pe.default.createElement(le.default,{chat:n,ref:t,onClose:()=>Oe.pop()});break;case be.BroadcastInfo:it=pe.default.createElement(f.default,{chat:n,contact:n.contact,onStarred:()=>Oe.push(be.Starred),onMediaGallery:lt,onClose:()=>Oe.pop()});break;case be.ContactInfo:it=pe.default.createElement(M.default,{contact:n.contact,onVerification:et,onStarred:()=>Oe.push(be.Starred),onKept:()=>Oe.push(be.Kept),onMediaGallery:lt,onProductCatalog:Xe,onProductDetail:He,onEphemeral:tt,onClose:()=>Oe.pop(),profileEntryPoint:Ee,onBack:Ce?()=>{Oe.push(be.GroupInfo)}:null});break;case be.NewsletterInfo:(0,F.isNewsletterEnabled)()&&(it=pe.default.createElement(V.default,{chat:n,newsletterMetadata:n.newsletterMetadata,profilePicThumb:n.contact.getProfilePicThumb(),onClose:()=>Oe.pop(),onDeleteNewsletter:()=>Oe.push(be.DeleteNewsletter),onAdminCenter:()=>Oe.push(be.NewsletterAdminCenter),onSettings:()=>Oe.push(be.NewsletterSettings)}));break;case be.NewsletterSettings:it=pe.default.createElement(H.default,{onBack:()=>Oe.pop()});break;case be.DeleteNewsletter:it=pe.default.createElement(W.default,{chat:n,onBack:()=>Oe.pop()});break;case be.NewsletterAdminCenter:it=pe.default.createElement(G.default,{chat:n,onBack:()=>Oe.pop()});break;case be.ProductDetail:it=pe.default.createElement(K.default,{chat:n,collectionId:Ae,product:(0,u.default)(Ie,"product"),onEnd:at,onBack:rt,refreshCarousel:!1,onProductLinkClick:qe,onProductMoreInformation:ze,onCartClick:Ke});break;case be.ProductCollection:{const e=n.id;it=pe.default.createElement(ee.CollectionContentDrawer,{contact:n.contact,onProductDetail:He,catalogId:e,onBack:()=>Oe.pop(),onCatalogLinkClick:Ye,onCartClick:Ke,collection:(0,u.default)(xe,"collection")});break}case be.ProductLink:it=pe.default.createElement(X.default,{product:(0,u.default)(Ie,"product"),onBack:()=>Oe.pop()});break;case be.ProductInfo:it=pe.default.createElement(Q.default,{product:(0,u.default)(Ie,"product"),onBack:rt});break;case be.CatalogLink:it=pe.default.createElement(q.default,{catalog:(0,u.default)(Re,"catalog"),contact:(0,u.default)(Le,"contact"),onBack:()=>Oe.pop()});break;case be.Cart:{const e=(0,z.getProductCatalogContext)(we),t=(0,d.default)((0,u.default)(Ge,"cartId"),n,e);it=(0,u.default)(t,"cartFlow");break}case be.Catalog:it=pe.default.createElement(J.default,{contact:n.contact,onProductDetail:He,catalogId:n.id,onBack:()=>Oe.pop(),businessProfile:n.contact.businessProfile,onCatalogLinkClick:Ye,onCartClick:Ke,onCollectionSeeAll:Ue});break;case be.ProductList:it=pe.default.createElement(Z.ProductListDrawer,{contact:n.contact,onProductDetail:He,catalogId:n.id,onBack:()=>Oe.pop(),businessProfile:n.contact.businessProfile,onCatalogLinkClick:Ye,onCartClick:Ke});break;case be.Starred:it=pe.default.createElement(oe.StarredDrawerLoadable,{chat:n,starredMsgs:n.getStarredMsgs(),onClose:()=>Oe.pop()});break;case be.Kept:it=pe.default.createElement(R.default,{chat:n,keptMsgs:n.getKeptMsgs(),onClose:()=>Oe.pop()});break;case be.GroupSettings:it=pe.default.createElement(x.default,{chat:n,groupMetadata:n.groupMetadata,onClose:()=>Oe.pop()});break;case be.MediaGallery:it=pe.default.createElement(j.MediaGalleryDrawer,{chat:n,onBack:()=>Oe.pop(),onProductDetail:He,setProductsScrollOffset:Pe,initialTab:_e.current,productsScrollOffset:ke.current});break;case be.GroupInviteLink:it=pe.default.createElement(I.GroupInviteLinkDrawerLoadable,{chat:n,groupMetadata:(0,u.default)(n.groupMetadata,"chat.groupMetadata"),onBack:()=>Oe.pop(),onGroupSettings:()=>Oe.push(be.GroupSettings)});break;case be.PendingParticipants:it=pe.default.createElement(A.default,{chat:n,onBack:()=>Oe.pop()});break;case be.Verification:it=pe.default.createElement(ce.VerificationDrawerLoadable,{contact:(0,u.default)(Le,"contact"),onClose:()=>Oe.pop(),isFirstLevel:!1});break;case be.DefaultEphemerality:it=pe.default.createElement(k.default,{onClose:()=>Oe.pop(),entryPoint:(0,u.default)(Fe,"defaultEphemeralityEntryPoint")});break;case be.Ephemeral:{const e=n.isGroup?se.DISAPPEARING_MODE_ENTRY_POINT_TYPE.GROUP_CHAT_DISAPPEARING_MESSAGES_SETTING:se.DISAPPEARING_MODE_ENTRY_POINT_TYPE.INDIVIDUAL_CHAT_DISAPPEARING_MESSAGES_SETTING;it=pe.default.createElement(w.default,{chat:n,showNux:(0,ue.shouldShowNUX)(U.NUX.EPHEMERAL),entryPoint:se.EPHEMERAL_SETTING_ENTRY_POINT_TYPE.CHAT_INFO,onClose:()=>Oe.pop(),onCloseNux:()=>Oe.push(be.Ephemeral),onDDMSettingsClick:()=>(Ve(e),void Oe.push(be.DefaultEphemerality))});break}}return pe.default.createElement(Se,{ref:t,flow:Oe,displayName:Me},it)}));t.InfoFlow=ye,ye.displayName="InfoFlow"},600788:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const{msg:n,highlightedMsgIds:a}=e,N=(0,A.default)(),x=(0,T.default)(),D=(0,P.default)(),R=(0,_.default)((()=>n.type===h.MSG_TYPE.IMAGE?new b.UiActionWamEvent({uiActionType:y.UI_ACTION_TYPE.IMAGE_OPEN,uiActionPreloaded:n.mediaData.mediaStage===s.MEDIA_DATA_STAGE.RESOLVED}):null)),j=(0,_.default)((()=>(0,o.constructMediaMsgs)((0,u.getChat)(n),n))),L=j.current.length,B=(0,S.default)(L),G=(0,k.useRef)(null),W=(0,k.useRef)(),F=(0,k.useRef)(),V=(0,k.useRef)(null),H=(0,k.useRef)(null),U=(0,k.useRef)(null),[q,z]=(0,k.useState)(n),[Y,K]=(0,k.useState)(!1),[X,Z]=(0,k.useState)(!0),Q=(0,S.default)(q),$=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=H.current,n=U.current,a=V.current;if(!t||!n||!a)return;let l=0;a instanceof HTMLElement&&(l=a.clientWidth/2-t.clientWidth/2),(0,v.default)(n,"stop");let r=0;e&&(r=300),(0,v.default)(a,"scroll",{duration:r,container:n,offset:l,axis:"x",easing:[.1,.82,.25,1]})},J=e=>{if(!e)return!0;const{isViewOnce:t}=e,n=(0,m.getIsStickerMsg)(e);return!t&&!n};(0,k.useEffect)((()=>{var e;$(),J(n)&&(e=H.current)&&(0,v.default)(e,{opacity:[1,0],translateY:["0%","100%"]},{duration:300,delay:100,easing:[.1,.82,.25,1]}).then((()=>{N.aborted||Z(!1)}))}),[]),(0,k.useEffect)((()=>{L>(null!=B?B:0)&&$()}));const ee=e=>{x((()=>{j.current.loadMoreAroundIfNeeded(e)})),z(e)},te=e=>{if(e&&e.stopPropagation(),Y)return;const t=q;if(!t)return;let a=null;a=j.current.getAfter(t),a?ee(a):j.current.hasMediaAfter&&(W.current||(W.current=j.current.queryMedia({chat:(0,u.getChat)(n),msg:n,direction:"after"}).then((e=>{N.aborted||"number"==typeof e.length&&e.length>0&&q===n&&te()})).catch((()=>{__LOG__(3)`query media msgs error: `})).finally((()=>{W.current=null}))))},ne=e=>{if(e&&e.stopPropagation(),Y)return;const t=q;if(!t)return;let a=null;a=j.current.getBefore(t),a?ee(a):j.current.hasMediaBefore&&(F.current||(F.current=j.current.queryMedia({chat:(0,u.getChat)(n),msg:n,direction:"before"}).then((e=>{N.aborted||"number"==typeof e.length&&e.length>0&&q===n&&ne()})).catch((()=>{__LOG__(3)`query media msgs error: `})).finally((()=>{F.current=null}))))};let ae=null;n.type===h.MSG_TYPE.IMAGE&&(ae=()=>{const e=R.current;var t;e&&(Object.assign(e,(0,M.getGroupCountMetricsFromChatWid)(null===(t=(0,u.getChat)(n))||void 0===t?void 0:t.id)),e.markUiActionT(),e.commit(),R.current=null);(0,C.logUiActionShadowPrivateStatsTestEvents)()});const le=()=>{p.ModalManager.closeMedia()},re=(0,O.default)((()=>{z(null),le()})),oe=(null==q?void 0:q.isViewOnce)||q&&(0,m.getIsStickerMsg)(q);(0,w.useListener)(oe?q:null,"revoked",re);const ie=oe?null:j.current;(0,w.useListener)(ie,"remove",((e,t,a)=>{const l=j.current,o=q;if(l.includes(n)||null!=o&&null!=o.id&&o.id.toString()!==e.id.toString())return void D();const i=a.index;0===l.length?le():l.length===i?ee((0,r.default)(l.at(i-1),"mediaMsgs.at(index - 1)")):ee((0,r.default)(l.at(i),"mediaMsgs.at(index)"))})),(0,w.useListener)(ie,"reset",(()=>{le()})),(0,w.useListener)(ie,"query_media_after",(()=>{D()})),(0,w.useListener)(ie,"query_media_before",(()=>{const e=U.current;e&&(G.current=e.scrollWidth,e instanceof HTMLElement&&D())})),(0,w.useListener)(window,"keydown",(e=>{if(e.defaultPrevented)return;const t=c.default.isRTL();e.keyCode===l.default.LEFT?t?te():ne():e.keyCode===l.default.RIGHT&&(t?ne():te())})),(0,k.useEffect)((()=>{x((()=>{q&&j.current.loadMoreAroundIfNeeded(q)}))}),[q,j,x]),(0,k.useEffect)((()=>{if(Q!==q)$(!0);else{const e=U.current;if(!e||null==G.current||0===G.current)return;e instanceof HTMLElement&&(e.scrollLeft+=e.scrollWidth-G.current),G.current=null}}),[q,Q]);const ue=(0,I.default)(((e,t,n)=>{if(0!==t.length&&null!=n){if(t.hasMediaBefore&&n<e.clientWidth){const e=(0,r.default)(t.head(),"mediaMsgs.head()");x((()=>{t.queryMedia({chat:(0,u.getChat)(e),msg:e}),D()}))}if(t.hasMediaAfter&&n+i.SCROLL_FUDGE>e.scrollWidth-2*e.clientWidth){const e=(0,r.default)(t.last(),"mediaMsgs.last()");x((()=>{t.queryMedia({chat:(0,u.getChat)(e),msg:e,direction:"after"}),D()}))}}}),100);if(!q)return null;if((0,u.getChat)(n).isSuspendedOrTerminated()&&(0,f.isGroupSuspendV2Enabled)())return void(0,g.openSuspendedGroupMediaDownloadFailureModal)();const ce=j.current,se=ce.last(),de=ce.hasMediaAfter||q!==se?te:null,fe=ce.head();let pe=null;return pe=ce.hasMediaBefore||q!==fe?ne:null,pe=ce.hasMediaBefore||q!==fe?ne:null,k.default.createElement("div",{className:Y?"img-zoomed-in":null},J(q)&&k.default.createElement(E.default,{activeMsg:q,mediaMsgs:j.current,highlightedMsgIds:e.highlightedMsgIds,onSelectThumb:ee,onSetActiveThumb:e=>{V.current=e},onScroll:e=>{ue(e.currentTarget,j.current,e.currentTarget.scrollLeft)},setRefThumbsContainer:e=>{H.current=e},setRefThumbs:e=>{U.current=e}}),k.default.createElement(d.default,{msg:q,mediaData:q.mediaData,onBack:le,onExitAnimation:()=>{var e;J(n)&&(e=H.current)&&(0,v.default)(e,{opacity:[0,1],translateY:["100%","0%"]},{duration:300,easing:[.1,.82,.25,1]})},onNext:de,onPrev:pe,onImgZoomIn:e=>{K(e)},getZoomNode:e.getZoomNode,startTime:e.startTime,isAnimatingIn:X,onImageLoad:ae,msgIndexInAlbum:(()=>{let e=-1;if(!a||!q)return e;const t=q.id.toString();if(!a.has(t))return e;let n=0;return a.forEach((a=>{a===t&&(e=n),n++})),e})(),albumSize:(null===(t=e.highlightedMsgIds)||void 0===t?void 0:t.size)||0}))};var l=a(n(953268)),r=a(n(670983)),o=n(78810),i=n(914368),u=n(163755),c=a(n(932325)),s=n(172259),d=a(n(933147)),f=n(97858),p=n(114850),m=n(787742),h=n(373070),g=n(983271),E=a(n(266648)),b=n(382117),v=a(n(330619)),y=n(130756),M=n(531737),C=n(818674),k=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=N(t);if(n&&n.has(e))return n.get(e);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(a,r,o):a[r]=e[r]}a.default=e,n&&n.set(e,a);return a}(n(667294)),P=a(n(969651)),_=a(n(637660)),w=n(808446),S=a(n(49710)),O=a(n(17533)),I=a(n(286481)),T=a(n(940630)),A=a(n(895851));function N(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(N=function(e){return e?n:t})(e)}},340576:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.requireBundle=t.SendContactsModalLoadable=void 0;var l=a(n(348926)),r=a(n(114945)),o=a(n(97359)),i=a(n(205106)),u=a(n(261724)),c=n(548360),s=a(n(667294));const d=(0,i.default)((0,l.default)((function*(){const e=yield Promise.all([n.e(8295),n.e(1702),n.e(9488),n.e(2790),n.e(275)]).then(n.bind(n,915132));return(0,o.default)(e)})),"SendContactsModal");t.requireBundle=d;const f=(0,r.default)({loader:d,loading:e=>s.default.createElement(u.default,{title:c.fbt._("Send contacts",null,{hk:"9ZMyz"}),error:Boolean(e.error)})});t.SendContactsModalLoadable=f},854534:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(35234),r=n(700071),o=n(351053),i=n(394164),u=n(780549),c=n(174834),s=n(877171),d=a(n(908081)),f=a(n(324093)),p=n(626194),m=n(811720),h=n(512938),g=a(n(570834)),E=a(n(335540)),b=n(81644),v=a(n(932325)),y=n(97858),M=a(n(237889)),C=n(180519),k=n(548360),P=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=I(t);if(n&&n.has(e))return n.get(e);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(a,r,o):a[r]=e[r]}a.default=e,n&&n.set(e,a);return a}(n(667294)),_=a(n(156720)),w=a(n(637660)),S=n(808446),O=n(655241);function I(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(I=function(e){return e?n:t})(e)}const T={borderBottom:"qmxv8cnq",backgroundColor:"s9raicp8"},A={paddingTop:"n1yiu2zv",paddingEnd:"f9ovudaz",paddingBottom:"eb4rp10x",paddingStart:"gx1rr48f"},N={paddingTop:"n1yiu2zv",paddingEnd:"h5uqwbaf",paddingBottom:"eb4rp10x",paddingStart:"kjjye8e3",textAlign:"ljrqcn24"},x={overflowX:"gfz4du6o",overflowY:"r7fjleex"};function D(e,t){const{onClose:n}=e,a=()=>o.ChatCollection.filter((e=>e.archive&&e.shouldAppearInList)),I=(0,O.useModelValues)(e.settings,["showArchiveV2","archive"]),D=(0,w.default)((()=>new g.default)),R=(0,w.default)((()=>new M.default([],(e=>e.id.toString())))),j=(0,P.useRef)(null),[L,B]=(0,P.useState)(a),G=()=>(0,y.archiveV2Supported)()&&I.showArchiveV2;(0,S.useListener)(o.ChatCollection,[G()?"sort":null,"change:archive","add","remove"].filter(Boolean),(()=>{B(a())}));const W=e=>{R.current.setVal(e,!1)};(0,S.useListener)(u.Cmd,"close_chat",(e=>{e===R.current.getVal()&&R.current.unset()})),(0,S.useListener)(u.Cmd,"update_chatlist_selection",W);(0,P.useEffect)((()=>{if(G()){const e=a(),t=new Map;e.forEach((e=>{e.archiveAtMentionViewedInDrawer=!0,t.set(e.id.toString(),!0)})),(0,l.updateChatArchiveDrawer)(t)}j.current&&E.default.focus(j.current);const e=o.ChatCollection.toArray().find((e=>e.active&&e.archive));e&&W(e)}),[]);const F=()=>{n()},V=(e,t)=>{u.Cmd.openChatFromUnread(t).then((e=>{e&&s.ComposeBoxActions.focus(t)})),(0,y.archiveV2Supported)()&&I.archive.enabled||F()},H=e=>{e.preventDefault(),e.stopPropagation(),R.current.setNext(!0)},U=e=>{e.preventDefault(),e.stopPropagation(),R.current.setPrev(!0)};let q,z;if(R.current.init(L,!0),(()=>{const e=o.ChatCollection.some((e=>e.archive));return(0,y.archiveV2Supported)()&&e})()){const e=k.fbt._("These chats stay archived when new messages are received. To change this experience, go to Settings > Chats on your phone.",null,{hk:"2GTpJ"}),t=k.fbt._("These chats are unarchived when new messages are received. To change this experience, go to Settings > Chats on your phone.",null,{hk:"2QaWm0"});q=P.default.createElement("div",{className:(0,_.default)(T)},P.default.createElement("div",{className:(0,_.default)(A)},P.default.createElement("div",{className:(0,_.default)(N)},P.default.createElement(C.WDSTextMuted,{as:"p"},I.showArchiveV2?e:t))))}z=L.length>0?P.default.createElement(b.HotKeys,{ref:j,handlers:{down:H,up:U}},q,P.default.createElement(h.FlatList,{className:(0,_.default)(x),data:L.map((e=>({itemKey:e.id.toString(),chat:e,height:(0,c.shouldShowNewSubgroupIdentity)(e.groupMetadata)?i.SUBGROUP_V2_CHAT_CELL_HEIGHT:void 0}))),flatListController:D.current,direction:"vertical",renderItem:e=>P.default.createElement(r.Chat,{chat:e.chat,mode:r.Mode.LAST,active:R.current,onClick:V,hideArchivedIcon:(0,y.archiveV2Supported)()&&I.archive.enabled,hideMuteIcon:G(),hideMuteOption:G(),ephemeralIcon:"chat-list",showCommunityInfo:!0})})):P.default.createElement(m.Archived,null);const Y=(0,y.archiveV2Supported)()&&I.archive.enabled?k.fbt._("Archived",null,{hk:"3HjzQg"}):v.default.t(136);return P.default.createElement(d.default,{ref:t,theme:"archived"},P.default.createElement(p.DrawerHeader,{title:Y,onBack:F,type:p.DRAWER_HEADER_TYPE.LARGE,menu:null}),P.default.createElement(f.default,{flatListControllers:[D.current]},z))}var R=(0,P.forwardRef)(D);t.default=R},302112:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=a(n(348926)),r=n(698867),o=n(751461),i=n(356097),u=n(811720),c=n(978752),s=a(n(75531)),d=n(130756),f=n(548360),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(a,r,o):a[r]=e[r]}a.default=e,n&&n.set(e,a);return a}(n(667294)),m=a(n(156720));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}const g={paddingTop:"s7fqlky6",paddingEnd:"iffbo4e8",paddingBottom:"q1tx93la",paddingStart:"e8k79tju",fontSize:"ovllcyds",lineHeight:"durt31hz",color:"amgz1mtg"};function E(e,t){const{keptMsgs:n,onClose:a,chat:h}=e,[E,b]=(0,c.useKicNux)(h);(0,p.useEffect)((()=>{E&&b(d.TRIGGER_TYPE.KEPT_FOLDER_TAP_FIRST_TIME)}),[]),(0,p.useEffect)((()=>{(0,l.default)((function*(){const e=new o.DisappearingMessageKeepInChatWamEvent({kicActionName:d.KIC_ACTION_NAME_TYPE.VIEW_KEPT_MESSAGES,kicEntryPoint:d.KIC_ENTRY_POINT_TYPE.CHAT_INFO,messagesInFolder:n.length,isAGroup:null==h?void 0:h.isGroup});var t;(null==h?void 0:h.isGroup)&&e.set({isAdmin:null==h||null===(t=h.groupMetadata)||void 0===t?void 0:t.participants.iAmAdmin()});if(h){const t=yield(0,r.getChatThreadID)(null==h?void 0:h.id.toJid());null!=t&&e.set({threadId:t})}e.commit()}))()}),[]);const v=f.fbt._("Kept messages",null,{hk:"iGco8"}),y=p.default.createElement(u.KeptMsgs,null);let M=null;var C;(null==h?void 0:h.isGroup)?M=(null===(C=h.groupMetadata)||void 0===C?void 0:C.restrict)?p.default.createElement("div",{className:(0,m.default)(g)},f.fbt._("These messages are kept in the chat for everyone. Only admins can keep or unkeep messages in this group.",null,{hk:"2P8fIj"})):p.default.createElement("div",{className:(0,m.default)(g)},f.fbt._("These messages are kept in the chat for everyone. Everyone can keep or unkeep a message. Group admins can limit this.",null,{hk:"3VYBCh"})):M=p.default.createElement("div",{className:(0,m.default)(g)},f.fbt._("These messages are kept in the chat for everyone. Everyone can keep or unkeep a message.",null,{hk:"3sFKOP"}));return p.default.createElement(s.default,{testid:"kept-drawer",ref:t,msgCollection:n,onClose:a,chat:h,title:v,emptyListText:y,descriptionSection:M,displayType:i.DISPLAY_TYPE.KEPT_MSGS})}var b=(0,p.forwardRef)(E);t.default=b},306472:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.TABS=t.MediaGalleryDrawer=void 0;var l=a(n(252628)),r=n(328620),o=a(n(638938)),i=n(409623),u=a(n(321574)),c=a(n(908081)),s=a(n(324093)),d=n(626194),f=a(n(932325)),p=a(n(671597)),m=a(n(482530)),h=n(97858),g=n(913257),E=a(n(930440)),b=a(n(285192)),v=a(n(434377)),y=n(392632),M=a(n(844453)),C=n(548360),k=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=S(t);if(n&&n.has(e))return n.get(e);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(a,r,o):a[r]=e[r]}a.default=e,n&&n.set(e,a);return a}(n(667294)),P=a(n(156720)),_=a(n(261716)),w=a(n(637660));function S(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(S=function(e){return e?n:t})(e)}const O={display:"p357zi0d",flexGrow:"ggj6brxn",flexShrink:"m0h2a7mj",flexBasis:"rjo8vgbg",flexDirection:"f8m0rgwh",height:"ppled2lx"},I={position:"lhggkp7q",top:"qq0sjtgm",start:"tkdu00h0",width:"ln8gz9je",height:"ppled2lx"},T=n(76672)({MEDIA:"media",DOCS:"docs",LINKS:"links",PRODUCTS:"products"});t.TABS=T;const A=e=>{const{selected:t,onSearch:n}=e;switch(t){case T.MEDIA:case T.LINKS:case T.DOCS:return k.default.createElement(i.ListSearch,{onSearch:n,loading:!1,listFilterEnabled:!1,chatlistFilterEnabled:!1,mode:o.default.Chatlist,placeholder:C.fbt._("Search",null,{hk:"418EDN"})});default:return null}},N=e=>{switch(e.selectedTab){case T.MEDIA:return k.default.createElement(m.default,{chat:e.chat,mediaMsgs:e.chat.getMediaMsgs(),selectable:e.selectable,onMessageSelect:e.onMessageSelect,selectedMessages:e.selectedMessages,fullCollection:!0,isFilterEnabled:e.isFilterEnabled,filterText:e.filterText});case T.LINKS:return k.default.createElement(p.default,{chat:e.chat,linkMsgs:e.chat.getLinkMsgs(),selectable:e.selectable,onMessageSelect:e.onMessageSelect,selectedMessages:e.selectedMessages,isFilterEnabled:e.isFilterEnabled,filterText:e.filterText});case T.DOCS:return k.default.createElement(u.default,{chat:e.chat,docMsgs:e.chat.getDocMsgs(),selectable:e.selectable,onMessageSelect:e.onMessageSelect,selectedMessages:e.selectedMessages,isFilterEnabled:e.isFilterEnabled,filterText:e.filterText});case T.PRODUCTS:return k.default.createElement(b.default,{chat:e.chat,productMsgs:e.chat.getProductMsgs(),selectable:e.selectable,onMessageSelect:e.onMessageSelect,selectedMessages:e.selectedMessages,onProductDetail:e.onProductDetail,setScrollOffset:e.setScrollOffset,scrollOffset:e.scrollOffset})}};const x=(0,k.forwardRef)(((e,t)=>{const{chat:n,onProductDetail:a,setProductsScrollOffset:o,initialTab:i=T.MEDIA,productsScrollOffset:u=0}=e,[p,m]=(0,k.useState)(i),[b,S]=(0,k.useState)(null),[x,D]=(0,k.useState)(!1),[R,j]=(0,_.default)(),L=(0,h.mediaLinksDocsFilteringEnabled)(),B=(0,w.default)((()=>new E.default([],(e=>e.id.toString())))),G=()=>{x&&(B.current.unsetAll(),D(!1))},W=(0,k.useCallback)((e=>{const t=T.cast(e);if(null==t)return;const n=(0,l.default)(T).indexOf(p),a=(0,l.default)(T).indexOf(t);n!==a&&B.current.unsetAll(),m(t),S(a>n?"right":"left"),D(!1)}),[B,p]),F=(0,k.useMemo)((()=>{const e=[{id:T.MEDIA,title:f.default.t(416)},{id:T.DOCS,title:f.default.t(243)},{id:T.LINKS,title:f.default.t(394)}];return e.push({id:T.PRODUCTS,title:C.fbt._("Products",null,{hk:"3Ky71N"})}),k.default.createElement(v.default,{tabConfigs:e,selectedId:p,onSelect:W,testIdPrefix:"gallery-tab"})}),[p,W]),V=function(e){switch(e){case T.MEDIA:return g.MultiSelectBarEntryPoint.MEDIA;case T.DOCS:return g.MultiSelectBarEntryPoint.DOCS;case T.LINKS:return g.MultiSelectBarEntryPoint.LINKS;case T.PRODUCTS:return g.MultiSelectBarEntryPoint.PRODUCTS}}(p),H=[T.MEDIA,T.DOCS].includes(p),U=x?k.default.createElement(y.UIE,{displayName:"MediaMultiSelect",escapable:!0,requestDismiss:G},k.default.createElement(g.MultiSelectBar,{chat:n,noSortOnForward:!0,theme:"mediaGallery",toastPosition:r.ToastPosition.RIGHT,downloadButton:H,selectedMessages:B.current,onCancel:G,entryPoint:V})):null,q="right"===b?"slide-forward":"slide-back";return k.default.createElement(c.default,{ref:t,theme:"gallery",testid:"media-gallery-drawer"},k.default.createElement(d.DrawerHeader,{title:" ",onBack:e.onBack,rtlFixIfOnDarwin:!0,type:d.DRAWER_HEADER_TYPE.MULTI_MEDIA_GALLERY,focusBackOrCancel:!0}),U,F,L?k.default.createElement(A,{selected:p,onSearch:j}):null,k.default.createElement(s.default,{"data-list-scroll-container":!0},k.default.createElement(M.default,{transitionName:q,className:(0,P.default)(O)},k.default.createElement("div",{className:(0,P.default)(I),key:p},k.default.createElement("div",{className:(0,P.default)(O)},k.default.createElement(N,{chat:n,selectable:x,onMessageSelect:(e,t)=>{x||D(!0),B.current.setVal(e,t),0===B.current.getSelected().length&&G()},selectedMessages:B.current,fullCollection:!0,isFilterEnabled:L,filterText:R,onProductDetail:a,setScrollOffset:o,scrollOffset:u,selectedTab:p,mediaMsgs:n.getMediaMsgs(),linkMsgs:n.getLinkMsgs(),docMsgs:n.getDocMsgs(),productMsgs:n.getProductMsgs()}))))))}));t.MediaGalleryDrawer=x,x.displayName="MediaGalleryDrawer"},266466:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const[t,n]=(0,c.useState)(!1);let a,d;e.isBusiness?(a=u.fbt._("This message will be forwarded to WhatsApp. This business will not be notified.",null,{hk:"1N7YEc"}),d=u.fbt._("Block business",null,{hk:"3hFIF3"})):(a=u.fbt._("This message will be forwarded to WhatsApp. This contact will not be notified.",null,{hk:"2qS1tP"}),d=u.fbt._("Block contact",null,{hk:"41X9mL"}));return c.default.createElement(r.ConfirmPopup,{onOK:function(){e.onReport(t)},okText:u.fbt._("Report",null,{hk:"18ssTb"}),onCancel:e.onCancel,title:e.title},c.default.createElement("div",{className:(0,s.default)(f.section,i.uiMargin.top12,i.uiMargin.end0,f.border)},c.default.createElement(l.CheckBox,{onChange:()=>n((e=>!e)),checked:t,id:"menu-icon-report-spam"}),c.default.createElement(o.TextLabel,{xstyle:f.checkboxLabel,htmlFor:"menu-icon-report-spam"},d)),c.default.createElement(o.TextParagraph,{xstyle:f.section,color:"muted"},a))};var l=n(468926),r=n(103440),o=n(180519),i=n(676345),u=n(548360),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(a,r,o):a[r]=e[r]}a.default=e,n&&n.set(e,a);return a}(n(667294)),s=a(n(156720));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}const f={section:{marginBottom:"t4zgqcuo"},checkboxLabel:{marginStart:"fooq7fky"},border:{paddingBottom:"dledyozo",borderBottom:"j4zbmt6h"}}},755140:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=a.ChatCollection.getActive();(0,d.useEffect)((()=>{e.entryPoint&&(0,r.logPnhRequestRevealActionHelper)(c.PNH_CHAT_TYPE_TYPE.CTWA,c.PNH_MESSAGE_CHAT_PARTY.BIZ,c.PNH_ACTION_TYPE.REQUEST_DIALOG_APPEAR,e.entryPoint)}),[e.entryPoint]);const n=s.fbt._("Request phone number?",null,{hk:"1BOtdo"}),f=s.fbt._("This person's phone number is not shared in this chat. You can request for their phone number if you'd like to save them to your contacts.",null,{hk:"3SHZ6I"}),p=s.fbt._("Send Request",null,{hk:"4tsuDY"}),m=s.fbt._("Cancel",null,{hk:"37A1CY"});return d.default.createElement(l.ConfirmPopup,{onOK:()=>{t&&((0,i.sendRequestPhoneNumber)((0,u.unproxy)(t)),null!=e.entryPoint&&(0,r.logPnhRequestRevealActionHelper)(c.PNH_CHAT_TYPE_TYPE.CTWA,c.PNH_MESSAGE_CHAT_PARTY.BIZ,c.PNH_ACTION_TYPE.SEND_REQUEST,e.entryPoint)),o.ModalManager.close()},okText:p,onCancel:()=>o.ModalManager.close(),cancelText:m,title:n},f)};var a=n(351053),l=n(103440),r=n(543081),o=n(114850),i=n(942319),u=n(163139),c=n(130756),s=n(548360),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(a,r,o):a[r]=e[r]}a.default=e,n&&n.set(e,a);return a}(n(667294));function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}},9729:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{isVoiceCallEnabled:!1,isVideoCallEnabled:!1,canStartVoiceCall:!1,canStartVideoCall:!1,startVoiceCall:()=>{},startVideoCall:()=>{}}};n(445729),n(660666),n(667294),n(808446)},791865:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=a(n(896322)),r=a(n(35644)),o=(a(n(306007)),n(464659)),i=a(n(740681)),u=n(63014),c=n(780549),s=n(419e3),d=a(n(908081)),f=a(n(324093)),p=n(36045),m=n(626194),h=a(n(209064)),g=n(673509),E=a(n(409558)),b=n(258105),v=a(n(570834)),y=a(n(932325)),M=n(97858),C=n(114850),k=n(111367),P=(n(227341),n(163139)),_=(n(220584),n(180519)),w=n(130756),S=n(548360),O=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=R(t);if(n&&n.has(e))return n.get(e);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(a,r,o):a[r]=e[r]}a.default=e,n&&n.set(e,a);return a}(n(667294)),I=a(n(156720)),T=a(n(969651)),A=a(n(637660)),N=n(808446),x=n(655241),D=a(n(321201));function R(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(R=function(e){return e?n:t})(e)}const j={flexGrow:"tvf2evcx",flexShrink:"oq44ahr5",flexBasis:"lb5m6g5c",paddingBottom:"s9fl9ege"};function L(e,t){var n,a;const{onClose:R,onMediaGallery:L}=e,B=(0,T.default)(),G=(0,D.default)(),W=(0,A.default)((()=>new v.default)),F=(0,x.useModelValues)(e.chat,["id","groupMetadata"]);(0,N.useListener)(null===(n=F.groupMetadata)||void 0===n?void 0:n.participants,["add","remove","sort","reset"],B);let V=null;L&&(V=O.default.createElement(i.default,{onMediaGallery:L,chat:(0,P.unproxy)(F)}));const H=O.default.createElement(o.ChatInfoDrawerButtonsSection,null,O.default.createElement(p.DrawerButton,{testid:"li-delete-broadcast",icon:O.default.createElement(s.DeleteIcon,null),color:"danger",theme:"chat-info",onClick:()=>{c.Cmd.deleteOrExitChat((0,P.unproxy)(F))}},y.default.t(692)));let U;(null===(a=F.groupMetadata)||void 0===a?void 0:a.creation)?(U=u.Clock.createdStr(F.groupMetadata.creation),U=O.default.createElement(_.TextDiv,{theme:"small"},U)):U=null;let q=null;q=O.default.createElement(E.default,{highlightSurface:w.PRIVACY_HIGHLIGHT_SURFACE_ENUM.INFO_SCREEN_BROADCAST,onClick:()=>{if((0,M.isPrivacyNarrativeV1Enabled)()&&(0,k.shouldShowNewE2eInfoModal)((0,P.unproxy)(F))){const e=(0,b.getE2EFaqUrl)();C.ModalManager.open(O.default.createElement(g.E2eInfoModalV2,{highlightSurface:w.PRIVACY_HIGHLIGHT_SURFACE_ENUM.INFO_SCREEN_BROADCAST,url:e}))}else C.ModalManager.open(O.default.createElement(h.default,{highlightSurface:w.PRIVACY_HIGHLIGHT_SURFACE_ENUM.INFO_SCREEN_BROADCAST,chatId:F.id,e2eSubtype:"info_encrypted"}))},text:S.fbt._("Messages are end-to-end encrypted. Click to learn more.",null,{hk:"1iarlI"})});let z=null;return q&&(z=O.default.createElement(o.ChatInfoDrawerSection,null,null,q)),O.default.createElement(d.default,{ref:t,key:"contact-info-modal",theme:"striped"},O.default.createElement(m.DrawerHeader,{type:m.DRAWER_HEADER_TYPE.SMALL,rtlFixIfOnDarwin:!0,onCancel:()=>{R?R():null==G||G.requestDismiss()}},O.default.createElement(_.TextDiv,{theme:"title"},S.fbt._("Broadcast list info",null,{hk:"3S4EgV"})),U),O.default.createElement(f.default,{flatListControllers:[W.current]},O.default.createElement("div",{className:(0,I.default)(j)},O.default.createElement(r.default,{chat:(0,P.unproxy)(F)}),V,undefined,z,O.default.createElement(l.default,{chat:(0,P.unproxy)(F),flatListController:W.current}),H)))}var B=(0,O.forwardRef)(L);t.default=B},896322:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n;const a=(0,m.default)(),g=null===(t=e.chat.groupMetadata)||void 0===t?void 0:t.participants;(0,h.useListener)(g,"add remove reset",a);const E=(0,p.useMemo)((()=>g?g.map((e=>({itemKey:e.id.toString(),participant:e,height:68}))):[]),[g]),b=(e,t)=>{(0,f.isMePrimary)(t.id)||(0,c.findChat)(t.id,"broadcastInfoRecipients").then((function(e){o.Cmd.openChatFromUnread(e).then((t=>{t&&i.ComposeBoxActions.focus(e)}))}))},v=null!==(n=null==g?void 0:g.length)&&void 0!==n?n:0,y=d.default.t(770,{count:v,_plural:v});return p.default.createElement(r.ChatInfoDrawerListSection,{title:y},p.default.createElement(s.FlatList,{flatListController:e.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:E,renderItem:e=>{const{participant:t}=e,n=u.ContactCollection.gadd(t.id);return p.default.createElement(l.Contact,{contact:n,theme:"chat-info",admin:!!t.isAdmin,onClick:b,key:t.id.toString(),waitIdle:!0})}}))};var l=n(822652),r=n(464659),o=n(780549),i=n(877171),u=n(177938),c=n(581354),s=n(512938),d=a(n(932325)),f=n(459857),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(a,r,o):a[r]=e[r]}a.default=e,n&&n.set(e,a);return a}(n(667294)),m=a(n(969651)),h=n(808446);function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}},35644:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n;const a=null===(t=e.chat.groupMetadata)||void 0===t?void 0:t.participants,v=(0,g.useModelValues)(e.chat.contact,["name"]),y=(0,m.default)();(0,h.useListener)(a,"add remove reset",y);const M=null!==(n=null==a?void 0:a.length)&&void 0!==n?n:0,C=d.fbt._("Broadcast List",null,{hk:"46AT9o"}).toString()+" · "+u.default.t(770,{count:M,_plural:M}),k=v.name?f.default.createElement(c.Name,{contact:e.chat.contact,selectable:!0}):d.fbt._("Untitled List",null,{hk:"fYALp"});return f.default.createElement(o.default,{theme:"padding-large"},f.default.createElement("div",{className:(0,p.default)(E)},f.default.createElement(r.DetailImage,{id:e.chat.id,size:r.DetailImageSize.Large})),f.default.createElement(i.FlexColumn,{align:"center"},f.default.createElement(s.TextHeader,{level:"2",size:"24"},k),f.default.createElement("div",{className:(0,p.default)(b)},f.default.createElement(l.SelectableSpan,{dir:"auto",selectable:!0},f.default.createElement(s.TextSpan,{size:"16",color:"secondary"},C)))))};var l=n(306703),r=n(23641),o=a(n(969358)),i=n(690495),u=a(n(932325)),c=n(21645),s=n(180519),d=n(548360),f=a(n(667294)),p=a(n(156720)),m=a(n(969651)),h=n(808446),g=n(655241);const E={display:"p357zi0d",justifyContent:"ac2vgrno",marginBottom:"du8bjn1j"},b={lineHeight:"a4ywakfo",marginTop:"g1eqewly"}},988808:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{contact:t}=e;const{status:n}=(0,d.useModelValues)(t.getStatus(),["status"]);if(u.default.isPSA(t.id))return s.default.createElement(l.ChatInfoDrawerSection,{titleTestId:"section-about",title:""},s.default.createElement(i.TextSpan,{theme:"title",size:"16"},c.fbt._("Hi! Welcome to this official WhatsApp chat.",null,{hk:"1fpFwJ"}).toString(),s.default.createElement("br",null),c.fbt._("This is where you can get tips, see announcements, and hear about the newest features. Straight from us.",null,{hk:"4gcJHK"}).toString(),s.default.createElement("br",null),c.fbt._('Official chats from WhatsApp will always have a green "verified" checkmark. And we\'ll never ask for your personal information.',null,{hk:"8bwzI"}).toString()),s.default.createElement("br",null),s.default.createElement("br",null),s.default.createElement(o.ExternalLink,{href:"https://whatsapp.com/",xstyle:f.whatsapp_url},"https://whatsapp.com/"));if(""===n)return null;return s.default.createElement(l.ChatInfoDrawerSection,{titleTestId:"section-about",title:c.fbt._("About",null,{hk:"4qoAfH"})},s.default.createElement(i.TextSpan,{theme:"title",size:"16"},s.default.createElement(r.default,{id:t.id})))};var l=n(464659),r=a(n(203528)),o=n(753233),i=n(180519),u=a(n(124928)),c=n(548360),s=a(n(667294)),d=(a(n(156720)),n(655241));const f={whatsapp_url:{color:"hafg4y3t"}}},876588:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const[t]=(0,E.useContactValues)(e.contact.id,[p.getCommonGroups]),[n,a]=(0,g.useState)(!0);(0,g.useEffect)((()=>{(0,d.findCommonGroups)(e.contact).catch((e=>{throw __LOG__(4,!0,new Error,!0)`get from participants table failed`,SEND_LOGS("get from participants table failed when finding common groups: "+e),(0,m.default)("get from participants table failed")}))}),[]);const v=(0,b.default)(t,["add","remove"],(()=>{if(!t)return[];let e=t;return e.length>o.INFO_DRAWER_MAX_ROWS&&n&&(e=e.slice(0,o.INFO_DRAWER_MAX_ROWS)),e.map((e=>({itemKey:e.id.toString(),chat:e,height:(0,c.shouldShowNewSubgroupIdentity)(e.groupMetadata)?r.SUBGROUP_V2_CHAT_CELL_HEIGHT:68})))}),[n]),y=()=>{a(!1)},M=(t,n)=>{u.Cmd.openChatFromUnread(n).then((e=>{e&&s.ComposeBoxActions.focus(n)})),e.onClose()};if(!t||0===t.length)return null;let C;if(t.length>o.INFO_DRAWER_MAX_ROWS&&n){const e=t.length-o.INFO_DRAWER_MAX_ROWS;C=g.default.createElement(i.default,{numMore:e,onClick:y})}const k=h.fbt._({"*":"{number} groups in common",_1:"1 group in common"},[h.fbt._plural(t.length,"number")],{hk:"2bl4a5"});return g.default.createElement(o.ChatInfoDrawerListSection,{titleTestId:"section-common-groups",title:k},g.default.createElement(f.FlatList,{flatListController:e.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:v,renderItem:e=>{const{chat:t}=e;return g.default.createElement(l.Chat,{chat:t,theme:"chat-info",mode:l.Mode.INFO,onClick:M,key:t.id.toString(),showCommunityInfo:!0})}}),C)};var l=n(700071),r=n(394164),o=n(464659),i=a(n(831584)),u=n(780549),c=n(174834),s=n(877171),d=n(701777),f=n(512938),p=n(714574),m=a(n(556869)),h=n(548360),g=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(a,r,o):a[r]=e[r]}a.default=e,n&&n.set(e,a);return a}(n(667294)),E=n(379811),b=a(n(524578));function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}},655237:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=a(n(967154)),r=a(n(81109)),o=n(122583),i=n(15842),u=n(632157),c=n(984330),s=n(72696),d=a(n(983345)),f=a(n(463954)),p=a(n(906015)),m=n(815651),h=n(745309),g=n(542358),E=a(n(718796)),b=n(713464),v=n(351053),y=n(738501),M=a(n(306007)),C=n(464659),k=a(n(740681)),P=n(998123),_=n(698867),w=n(780549),S=n(660666),O=a(n(988808)),I=a(n(876588)),T=a(n(700829)),A=a(n(109007)),N=a(n(366773)),x=a(n(305122)),D=a(n(704714)),R=a(n(928008)),j=n(834110),L=n(419e3),B=a(n(908081)),G=a(n(324093)),W=n(36045),F=n(568550),V=n(626194),H=n(900316),U=a(n(969358)),q=n(71957),z=a(n(570834)),Y=n(714574),K=n(95576),X=a(n(932325)),Z=a(n(344460)),Q=n(917504),$=n(609181),J=n(114850),ee=a(n(832897)),te=a(n(499717)),ne=a(n(213393)),ae=n(932523),le=n(242677),re=a(n(335748)),oe=n(10586),ie=a(n(634152)),ue=n(163139),ce=n(220584),se=n(180519),de=n(625786),fe=n(390737),pe=n(459857),me=n(887222),he=n(130756),ge=a(n(124928)),Ee=n(548360),be=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=Pe(t);if(n&&n.has(e))return n.get(e);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(a,r,o):a[r]=e[r]}a.default=e,n&&n.set(e,a);return a}(n(667294)),ve=a(n(156720)),ye=n(379811),Me=a(n(637660)),Ce=a(n(558532)),ke=a(n(321201));function Pe(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(Pe=function(e){return e?n:t})(e)}const _e={body:{flexGrow:"tvf2evcx",flexShrink:"oq44ahr5",flexBasis:"lb5m6g5c",paddingBottom:"s9fl9ege"},lastSectionRow:{marginBottom:"brac1wpa"}};function we(e){let{contact:t,catalogContext:n,onProductDetail:a,onProductCatalog:l}=e;const r=b.CatalogCollection.get(t.id);if(!r)return null;let o="",i=!1;(0,s.canSeeBizProfileV3)()&&(o=Ee.fbt._("See all",null,{hk:"3dTwyT"}),i=!0);const{session:u}=n;return u.isAccidental()?null:(0,g.hasShop)(t.businessProfile)?(0,s.bannedShopsEnabled)()&&(0,g.isShopBanned)(t.businessProfile)?null:be.default.createElement(re.default,{businessProfile:t.businessProfile,catalog:r,subtitle:o,hideIncompleteRows:i}):be.default.createElement(ne.default,{onProductDetail:a,onProductCatalog:l,catalog:r,subtitle:o,hideIncompleteRows:i,shouldLog:!0})}function Se(e,t){const{contact:n,onVerification:a,onClose:g,onBack:ne,onProductDetail:re,onProductCatalog:Pe,canLogQpl:Se=!0}=e,Oe=(0,ke.default)(),Ie=(0,be.useContext)(F.DrawerContext),[Te,Ae,Ne,xe,De,Re,je,Le,Be,Ge,We,Fe,Ve,He,Ue,qe,ze]=(0,ye.useContactValues)(e.contact.id,[S.getId,Y.getFormattedName,Y.getFormattedUser,Y.getFormattedShortName,S.getIsBusiness,S.getIsEnterprise,S.getIsMyContact,Y.getCommonGroups,Y.getBusinessProfile,S.getShowBusinessCheckmarkAsPrimary,S.getShowBusinessCheckmarkAsSecondary,S.getVerifiedName,S.getVerifiedLevel,S.getName,S.getNotifyName,S.getLabels,Y.getPhoneNumber]),[Ye,Ke,Xe,Ze,Qe,$e,Je,et,tt]=(0,ye.useContactValues)(e.contact.id,[Y.getBusinessCatalog,S.getIsMe,S.getStatusMute,Y.getDisplayName,Y.getShareOwnPn,S.getRequestedPnTimestamp,S.getCanRequestPhoneNumber,S.getIsIAS,S.getIsCAPISupportAccount]),nt=(0,Me.default)((()=>new z.default)),at=(0,be.useRef)(!1),[lt,rt]=(0,be.useState)(100),ot=(0,be.useMemo)((()=>v.ChatCollection.get(Te)),[Te]),it=Ke;(0,be.useEffect)((()=>{Be&&!Be.stale&&Ye&&b.CatalogCollection.findCarouselCatalog(Te).catch((0,o.filteredCatch)(c.ServerStatusCodeError,(()=>{__LOG__(3)`Failed to fetch product catalog in contact drawer from server`}))),(0,oe.getFanOutListJob)([Te,(0,pe.assertGetMe)()]).then((e=>{(0,Q.ensureE2ESessions)(e)}));const{session:t}=(0,ae.getProductCatalogContext)(Ie);if(t.isAccidental())H.DrawerManager.setDrawerContext("right",(0,ae.buildProductCatalogContext)(new le.ProductCatalogSession,(0,j.getMaybeBizPlatformForLogging)(Te.toString()),he.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_PROFILE));else if(De&&(0,s.canSeeBizProfileV3)()){const t=Te===(0,pe.getMaybeMeUser)(),{profileEntryPoint:n}=e;!t&&n&&(0,m.logProfileImpression)((0,ae.getProductCatalogSessionId)(Ie),n,!!(null==Be?void 0:Be.isProfileLinked),!!(null==Be?void 0:Be.coverPhoto))}Se&&Be&&(0,$.qplEndProfileView)(i.QuickLogActionType.SUCCESS)}),[]),(0,be.useEffect)((()=>{if((0,s.btmThreadsLoggingEnabled)()){var e;const t=null===(e=(0,pe.getMaybeMeUser)())||void 0===e?void 0:e.equals(Te),{session:n}=(0,ae.getProductCatalogContext)(Ie);n.isAccidental()||t||!(null==ot?void 0:ot.id)||(0,_.handleActivitiesForChatThreadLogging)([{activityType:"profileViews",ts:(0,u.unixTime)(),chatId:ot.id}])}}),[]),(0,Ce.default)((()=>{const{session:e}=(0,ae.getProductCatalogContext)(Ie);e.isAccidental()||De&&(0,s.canSeeBizProfileV3)()&&(0,m.logProfileExit)((0,ae.getProductCatalogSessionId)(Ie),lt,null==Be?void 0:Be.isProfileLinked,!!(null==Be?void 0:Be.coverPhoto))}));const ut=()=>{g?g():null==Oe||Oe.requestDismiss()},ct=()=>{ne&&ne()},st=e=>{if(!at.current&&!ge.default.isPSA(Te))return void fe.ToastManager.open(be.default.createElement(de.Toast,{msg:Ee.fbt._("No profile photo",null,{hk:"2bdeTO"})}));const t=e.target;J.ModalManager.openMedia(be.default.createElement(te.default,{contact:n,profilePicThumb:n.getProfilePicThumb(),animateBorderRadius:!0,getZoomNode:e=>{e(t)}}),{transition:"profile-viewer",uim:Oe})},dt=()=>{at.current=!0},ft=e=>{(0,me.qplStartProductView)("ContactInfo"),re(e)},pt=e=>{const t=Math.floor(100*(1+e.currentTarget.scrollTop/e.currentTarget.offsetHeight));t>lt&&rt(t)},mt=Re?null:be.default.createElement(I.default,{contact:n,onClose:ut,flatListController:nt.current});let ht=null;e.onMediaGallery&&ot&&(ht=be.default.createElement(k.default,{chat:ot,onMediaGallery:e.onMediaGallery}));let gt=null,Et=null;if(n&&De&&Be&&Ye){const e=be.default.createElement(we,{contact:n,catalogContext:(0,ae.getProductCatalogContext)(Ie),onProductDetail:ft,onProductCatalog:Pe});(0,s.canSeeBizProfileV3)()?Et=e:gt=e}const bt=ot&&ot.mute.canMute()?be.default.createElement(ee.default,{chat:ot,mute:ot.mute,settings:ie.default}):null;let vt,yt;if(e.onStarred&&(vt=be.default.createElement(x.default,{onStarred:e.onStarred})),ot&&(ot.hasKeptMsgs()||(0,y.isEphemeralSettingOn)(ot))){const t=be.default.createElement(se.TextSpan,{theme:"title",size:"16"},Ee.fbt._("Kept Messages",null,{hk:"w8m3u"})),n=be.default.createElement(K.KeepInChatIcon,{color:ce.SvgColorProp.SECONDARY,height:20});yt=be.default.createElement(C.ChatInfoDrawerSection,{titleTestId:"section-kept-messages",xstyle:_e.lastSectionRow},be.default.createElement(M.default,{testid:"block-kept-messages",side:"chevron",icon:n,onClick:e.onKept,title:t}))}const Mt=ot&&(0,y.shouldShowEphemeralSetting)(ot)?be.default.createElement(q.EphemeralSettingRow,{onClick:e.onEphemeral,chat:ot,testid:"contact-info-dm-setting-row"}):null,Ct=ge.default.isPSA(Te)?be.default.createElement(R.default,null):be.default.createElement(T.default,{contact:(0,ue.unproxy)(n),onVerificationClick:()=>{a()}}),kt=Te.isLid()&&null==ze,Pt=Te.isLid(),_t=be.default.createElement(C.ChatInfoDrawerSection,null,bt,Mt,Ct,ot&&Pt?be.default.createElement(P.PhoneNumberVisibilityIndicator1On1,{chat:ot}):null),wt=!De,St=wt||et||tt||Te.isBot()?null:be.default.createElement(d.default,{contact:(0,ue.unproxy)(n)}),Ot=wt?be.default.createElement(O.default,{contact:(0,ue.unproxy)(n)}):null,It=(0,s.canSeeBizProfileV3)()&&De&&Be?be.default.createElement(E.default,{contact:n,onProfilePicLoad:dt,onProfilePicClick:st,onOpenStatus:()=>{(0,m.logStatusClick)((0,ae.getProductCatalogSessionId)(Ie),null==Be?void 0:Be.isProfileLinked,!!(null==Be?void 0:Be.coverPhoto))},businessProfile:Be,onProductCatalog:Pe,isMessageYourselfChat:it,isPhoneNumberHidden:kt}):be.default.createElement(D.default,{contact:n,onDetailImageLoad:dt,onDetailImageClick:st,isMessageYourselfChat:it,isPhoneNumberHidden:kt});let Tt,At,Nt,xt=null;var Dt;De&&Be&&((0,s.canSeeBizProfileV3)()&&Be?(xt=be.default.createElement(p.default,{businessProfile:Be}),Tt=et||tt?null:be.default.createElement(f.default,{contact:n}),(null!==(Dt=null==qe?void 0:qe.length)&&void 0!==Dt?Dt:0)>0&&(At=be.default.createElement(U.default,{theme:"padding"},be.default.createElement(Z.default,{labels:qe,theme:"standalone"}))),Nt=pt):Be&&(xt=be.default.createElement(h.BusinessProfile,{contact:n,businessProfile:Be})));const Rt={title:Ee.fbt._("Contact info",null,{hk:"LUJtH"}),type:V.DRAWER_HEADER_TYPE.SMALL,rtlFixIfOnDarwin:!0,focusBackOrCancel:!0};let jt,Lt={};return Lt=ne?(0,r.default)({onBack:ct},Rt):(0,r.default)({onCancel:ut},Rt),Be&&!0===Be.isProfileLinked&&(0,s.bizLinkedAccountsEnabled)()&&(0,s.canViewBizLinkedAccounts)()&&(jt=be.default.createElement(N.default,{businessProfile:Be,rowTheme:"linked-account-consumer"})),be.default.createElement(B.default,{ref:t,key:"contact-info-modal",theme:"striped",testid:"chat-info-drawer",tsNavigationData:{surface:"contact-info-drawer"}},be.default.createElement(V.DrawerHeader,(0,l.default)({},Lt,{testid:"contact-info-header"})),be.default.createElement(G.default,{flatListControllers:[nt.current],onScroll:Nt},be.default.createElement("section",{className:(0,ve.default)(_e.body)},It,Tt,At,Et,xt,jt,gt,Ot,ht,vt,yt,_t,St,undefined,!it&&mt,!it&&be.default.createElement(A.default,{contact:n}),be.default.createElement(C.ChatInfoDrawerButtonsSection,null,ot?be.default.createElement(W.DrawerButton,{testid:"li-delete-chat",icon:be.default.createElement(L.DeleteIcon,null),color:"danger",onClick:()=>{const e=v.ChatCollection.assertGet(Te);w.Cmd.deleteOrExitChatFromEntryPoint(e,12)},theme:"chat-info"},X.default.t(221)):null))))}var Oe=(0,be.forwardRef)(Se);t.default=Oe},700829:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onVerificationClick:t}=e,[n,a]=(0,h.useContactValues)(e.contact.id,[r.getId,r.getPrivacyMode]),g=function(e,t){if((0,l.default)(t.user))return{text:p.fbt._("Click to learn how messages and calls are secured.",null,{hk:"1UxhjE"}),title:p.fbt._("Security",null,{hk:"3j3j0a"}),onClick:()=>{(0,c.default)(p.fbt._("WhatsApp secures your messages and calls with this account.",null,{hk:"18Ci1q"}),(0,i.getSupportChatSafetyFaqUrl)(),p.fbt._("Learn more about chats with WhatsApp Support.",null,{hk:"1an25A"}))}};switch(e){case s.ReducedPrivacyMode.E2EE:return null;case s.ReducedPrivacyMode.BSP:return{text:p.fbt._("This business works with other companies to manage this chat. Click to learn more.",null,{hk:"VbOOZ"}),title:p.fbt._("Security",null,{hk:"3j3j0a"}),onClick:()=>{(0,c.default)((0,u.formatBspModalText)(),(0,i.getE2EEnterpriseFaqUrl)())}};case s.ReducedPrivacyMode.FB:{let e;return e=t.isIAS()?p.fbt._("WhatsApp Surveys uses a secure service from Meta to manage this chat. Click to learn more.",null,{hk:"49GQ04"}):p.fbt._("This business uses a secure service from Meta to manage this chat. Click to learn more.",null,{hk:"3wvGOC"}),{text:e,title:p.fbt._("Security",null,{hk:"3j3j0a"}),onClick:()=>{(0,c.default)((0,u.formatFbModalText)(t.isIAS()),(0,i.getE2EEnterpriseFaqUrl)())}}}}}((0,s.getReducedPrivacyMode)(a),n);if(g)return m.default.createElement(o.default,{highlightSurface:f.PRIVACY_HIGHLIGHT_SURFACE_ENUM.INFO_SCREEN_CONTACT,title:g.title,text:g.text,onClick:g.onClick});const E=(0,d.isVoiceCallEnabled)()||(0,d.isVideoCallEnabled)()?p.fbt._("Messages and calls are end-to-end encrypted. Click to verify.",null,{hk:"GtGQH"}):p.fbt._("Messages are end-to-end encrypted. Click to verify.",null,{hk:"1AqhWR"});return m.default.createElement(o.default,{highlightSurface:f.PRIVACY_HIGHLIGHT_SURFACE_ENUM.INFO_SCREEN_CONTACT,onClick:t,text:E})};var l=a(n(143589)),r=n(660666),o=a(n(409558)),i=n(258105),u=n(729763),c=a(n(606037)),s=n(35109),d=n(571256),f=n(130756),p=n(548360),m=a(n(667294)),h=n(379811)},109007:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{contact:t}=e,[n,a,S,O,I,T,A]=(0,w.useContactValues)(e.contact.id,[d.getId,p.getDisplayName,d.getIsBusiness,p.getIsContactBlocked,d.getIsIAS,d.getIsMyContact,d.getIsCAPISupportAccount]),N=_.default.createElement(h.Name,{contact:e.contact,skipCheckMark:!0});let x=null;n.isBot()||(x=O?_.default.createElement(f.DrawerButton,{testid:"li-unblock",color:"success",icon:_.default.createElement(v.SettingsBlockedIcon,{directional:!0}),onClick:()=>(0,o.handleUnblock)(e.contact,i.BlockEntryPoint.Profile),theme:"chat-info"},P.fbt._("Unblock {contact_name}",[P.fbt._param("contact_name",N)],{hk:"1fZZEx"})):_.default.createElement(f.DrawerButton,{testid:"li-block",color:"danger",icon:_.default.createElement(v.SettingsBlockedIcon,{directional:!0}),onClick:()=>{const a=()=>{const t=u.ChatCollection.get(n);if(null==t?void 0:t.isPSA){const e=t.msgs.last();(0,C.logChatPSARemove)(e,1,1)}(0,r.blockContact)({contact:e.contact,blockEntryPoint:i.BlockEntryPoint.Profile}),m.ModalManager.close()};let o=_.default.createElement(s.ConfirmPopup,{onOK:a,okText:P.fbt._("Block",null,{hk:"9s17C"}),onCancel:()=>m.ModalManager.close(),title:P.fbt._("Block {contact_name}?",[P.fbt._param("contact_name",N)],{hk:"26yDKy"})},P.fbt._("Blocked contacts will no longer be able to call you or send you messages.",null,{hk:"3ioCkx"}));k.default.isPSA(n)?o=_.default.createElement(g.default,{onBlock:a,onCancel:()=>m.ModalManager.close()}):S&&(o=_.default.createElement(l.default,{contact:t,blockEntryPoint:i.BlockEntryPoint.Profile,withReport:!1})),m.ModalManager.open(o)},theme:"chat-info"},P.fbt._("Block {contact_name}",[P.fbt._param("contact_name",N)],{hk:"laDqJ"})));let D=I||A?P.fbt._("Report",null,{hk:"2SQkZ4"}):P.fbt._("Report business",null,{hk:"2Tvnn8"});S||(D=P.fbt._("Report {contact_name}",[P.fbt._param("contact_name",N)],{hk:"3Dqyjo"}));const R=k.default.isPSA(n)||n.isBot()?null:_.default.createElement(f.DrawerButton,{testid:"li-report-spam",color:"danger",icon:_.default.createElement(M.ThumbsDownIcon,null),onClick:()=>{m.ModalManager.open(_.default.createElement(E.default,{isMessage:!1,isBusiness:e.contact.isBusiness,isGroupChat:!1,onReport:()=>{const t=u.ChatCollection.get(e.contact.id);t&&(0,b.sendReport)({chat:t,spamFlow:y.SpamFlow.AccountInfoReport}),m.ModalManager.close()},onReportBlockClear:()=>{const t=u.ChatCollection.get(e.contact.id);t&&(0,b.sendSpamBlockClear)(t,y.SpamFlow.AccountInfoReport),m.ModalManager.close()},onCancel:()=>m.ModalManager.close()}))},theme:"chat-info"},D);return _.default.createElement(c.ChatInfoDrawerButtonsSection,null,x,R)};var l=a(n(208423)),r=n(547979),o=n(923092),i=n(400436),u=n(351053),c=n(464659),s=n(103440),d=n(660666),f=n(36045),p=n(714574),m=n(114850),h=n(21645),g=a(n(179197)),E=a(n(338695)),b=n(383296),v=n(226017),y=n(453603),M=n(21698),C=n(369084),k=a(n(124928)),P=n(548360),_=a(n(667294)),w=n(379811)},305122:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{onStarred:t}=e;const n=s.default.createElement(u.TextSpan,{theme:"title",size:"16"},c.fbt._("Starred messages",null,{hk:"4wVbNG"})),a=s.default.createElement(o.StarIcon,{color:i.SvgColorProp.SECONDARY,height:20});return s.default.createElement(r.ChatInfoDrawerSection,{titleTestId:"section-starred-messages"},s.default.createElement(l.default,{testid:"block-starred-messages",side:"chevron",icon:a,onClick:t,title:n}))};var l=a(n(306007)),r=n(464659),o=n(227341),i=n(220584),u=n(180519),c=n(548360),s=a(n(667294))},836513:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return f.default.createElement(u.FlexRow,{xstyle:h.container},f.default.createElement(u.FlexColumn,{xstyle:[h.item]},p),f.default.createElement(u.FlexColumn,{xstyle:[h.text,h.item]},f.default.createElement(s.TextSpan,{testid:"contact-info-pnh-info"},d.fbt._("This person's phone number is not shared in this chat. {=m2}",[d.fbt._implicitParam("=m2",f.default.createElement(l.default,{testid:"contact-info-pnh-learn-more",onClick:m},d.fbt._("Learn more",null,{hk:"t6HJf"})))],{hk:"3CEKuh"}))))};var l=a(n(196554)),r=n(136858),o=n(753233),i=n(258105),u=n(690495),c=n(220584),s=n(180519),d=n(548360),f=a(n(667294));a(n(156720));const p=f.default.createElement(r.DialpadIcon,{directional:!0,color:c.SvgColorProp.SECONDARY}),m=()=>{const e=(0,i.getPhoneNumberHidingFaqUrl)();(0,o.openExternalLink)(e)},h={container:{alignItems:"gndfcl4n",backgroundColor:"f6ipylw5",borderTopStartRadius:"bbr44loe",borderTopEndRadius:"ooj5yc5b",borderBottomEndRadius:"m8i16etx",borderBottomStartRadius:"cw0ivh8j",display:"p357zi0d",marginTop:"fgtikrv0",marginEnd:"k1jo73ug",marginBottom:"iyjcf3gk",marginStart:"isfiuinm",width:"c0boj6n4",height:"q1n4p668",maxWidth:"l2o74p5l",paddingStart:"nu34rnf1",paddingEnd:"ft2m32mm",lineHeight:"erpdyial"},text:{color:"pm5hny62",marginTop:"m3ct2rho",marginEnd:"k1jo73ug",marginBottom:"ec1z5skj",marginStart:"isfiuinm",wordBreak:"cw3vfol9",overflowWrap:"fd365im1"},item:{marginStart:"p3lsiedt",marginEnd:"q471nw87",paddingTop:"qomlamqu",paddingEnd:"lnjlmjd6",paddingBottom:"bxcbqipq",paddingStart:"mc6o24uu"}}},704714:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let t,{contact:n,onDetailImageLoad:a,onDetailImageClick:l,isMessageYourselfChat:r,isPhoneNumberHidden:o}=e;const i=D.fbt._("Official WhatsApp Account",null,{hk:"2cEUzF"}),u=null!=n.phoneNumber?f.ContactCollection.get(n.phoneNumber):null;if(N.default.isPSA(n.id))t=i;else if((0,p.getIsMyContact)(n))t=(0,x.widToFormattedUser)(n.id);else if(n.id.isLid()&&null!=u&&(0,p.getIsMyContact)(u))t=(0,x.widToFormattedUser)(n.phoneNumber);else{const e=(0,p.getNotifyName)(n);null!=e&&(t=`~${e}`)}return R.default.createElement(b.default,{theme:"padding-large"},R.default.createElement("div",{className:(0,j.default)(L.avatar)},R.default.createElement(g.DetailImage,{id:n.id,size:g.DetailImageSize.Large,loader:!0,onLoad:a,onClick:l,quality:g.DetailImageQuality.High})),R.default.createElement(y.FlexColumn,{align:"center"},R.default.createElement(S.TextHeader,{level:"2",size:"24",xstyle:L.contactName},R.default.createElement(k.Name,{testid:"contact-info-subtitle",contact:n,showMessageYourselfName:r,selectable:!0,breakWord:!0})),null!=t&&R.default.createElement("div",{className:(0,j.default)(L.secondaryWrapper)},R.default.createElement(h.SelectableSpan,{dir:"auto",selectable:!0},R.default.createElement(S.TextSpan,{size:"16",color:"secondary"},t)))),o&&R.default.createElement(m.default,null),!r&&R.default.createElement(B,{contact:n,displayRequestPnButton:o}),R.default.createElement(M.default,{labels:n.labels}))};var l=n(287461),r=n(351053),o=n(164777),i=a(n(983098)),u=a(n(9729)),c=n(230255),s=n(780549),d=n(877171),f=n(177938),p=n(660666),m=a(n(836513)),h=n(306703),g=n(23641),E=n(521332),b=a(n(969358)),v=n(581354),y=n(690495),M=a(n(344460)),C=n(114850),k=n(21645),P=n(417016),_=a(n(755140)),w=n(163139),S=n(180519),O=n(676345),I=n(190848),T=n(961745),A=n(130756),N=a(n(124928)),x=n(931019),D=n(548360),R=a(n(667294)),j=a(n(156720));const L={avatar:{display:"p357zi0d",justifyContent:"ac2vgrno",marginBottom:"pz0xruzv"},secondaryWrapper:{lineHeight:"a4ywakfo",marginTop:"qt60bha0"},contactName:{textAlign:"qfejxiq4"}};function B(e){let{contact:t,displayRequestPnButton:n}=e;const a=(0,u.default)((0,w.unproxy)(t)),f=()=>{(0,v.findChat)(t.id,"chatInfoTopCard").then((e=>{s.Cmd.openChatFromUnread(e).then((t=>{t&&d.ComposeBoxActions.focus(e)}))}))},m=!(!a.isVideoCallEnabled&&!a.isVoiceCallEnabled||N.default.isPSA(t.id))&&R.default.createElement(R.default.Fragment,null,R.default.createElement(i.default,{Icon:I.VoiceCallFilledIcon,iconWidth:19,label:D.fbt._("Audio",null,{hk:"1b375N"}),testid:"contact-action voice-call-button",xstyle:[O.uiMargin.start16,O.uiMargin.end16],disabled:!a.canStartVoiceCall,onClick:()=>{const e=t.id.isLid()?t.phoneNumber:t.id;(0,P.shouldDisplayPhoneNumberHidingModal)(t)?(0,P.displayPhoneNumberHidingModal)(t,!1):null!=e&&(null===T.Voip||void 0===T.Voip||T.Voip.callStart(e,!1))}}),R.default.createElement(i.default,{Icon:c.ChatInfoVideoIcon,label:D.fbt._("Video",null,{hk:"3zMUsJ"}),testid:"contact-action video-call-button",xstyle:[O.uiMargin.start16,O.uiMargin.end16],disabled:!a.canStartVideoCall,onClick:()=>{const e=t.id.isLid()?t.phoneNumber:t.id;(0,P.shouldDisplayPhoneNumberHidingModal)(t)?(0,P.displayPhoneNumberHidingModal)(t,!0):null!=e&&(null===T.Voip||void 0===T.Voip||T.Voip.callStart(e,!0))}})),h=D.fbt._("Request",null,{hk:"1Qh451"}),g=D.fbt._("Requested",null,{hk:"3GgAXn"}),b=(0,p.getCanRequestPhoneNumber)(t)?h:g,M=n&&R.default.createElement(i.default,{Icon:E.DialpadSmallIcon,iconWidth:19,label:b,xstyle:[O.uiMargin.start16,O.uiMargin.end16],disabled:!(0,p.getCanRequestPhoneNumber)(t),onClick:()=>{C.ModalManager.open(R.default.createElement(_.default,{entryPoint:A.PNH_ENTRY_POINT_TYPE.CHAT_INFO_REQUEST}))},testid:"request-phone-number-button-consumer"});let k=null;if((0,l.getABPropConfigValue)("unified_user_profile_navigation_enabled")){const e=r.ChatCollection.getActive();k=!(null==e?void 0:e.id.equals(t.id))&&R.default.createElement(i.default,{Icon:o.ChatIcon,iconWidth:19,label:D.fbt._("Message",null,{hk:"4gkjcu"}),testid:"contact-action chat-button",xstyle:[O.uiMargin.start16,O.uiMargin.end16],disabled:!1,onClick:f})}return R.default.createElement(y.FlexRow,{justify:"center",xstyle:[O.uiMargin.top8,O.uiMargin.bottom4]},M,k,m)}},928008:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const e={text:c.fbt._("This is an official account of WhatsApp",null,{hk:"2Av1mT"}),title:c.fbt._("Security",null,{hk:"2jDPpv"}),onClick:()=>{(0,i.default)((0,o.formatWaChatSecurityModalText)(),(0,r.getWAChatFaqUrl)())}};return s.default.createElement(l.default,{highlightSurface:u.PRIVACY_HIGHLIGHT_SURFACE_ENUM.INFO_SCREEN_CONTACT,title:e.title,text:e.text,onClick:e.onClick})};var l=a(n(409558)),r=n(258105),o=n(729763),i=a(n(606037)),u=n(130756),c=n(548360),s=a(n(667294))},983345:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=e.contact.getStatus(),[n,a]=(0,m.useContactValues)(e.contact.id,[i.getId,c.getPhoneNumber]),{status:E}=(0,h.useModelValues)(t,["status"]),b=""===E?null:p.default.createElement(l.default,{multiline:!0},p.default.createElement(d.TextSpan,{theme:"title"},p.default.createElement(o.default,{id:n})));let v;n.isLid()?null!=a&&(v=a):v=n;const y=v?p.default.createElement(l.default,{separator:!0},p.default.createElement(u.SelectableSpan,{dir:"auto",selectable:!0},p.default.createElement(d.TextSpan,{theme:"title"},(0,f.widToFormattedUser)(v)))):null;return p.default.createElement(r.ChatInfoDrawerSection,{xstyle:g.container,titleTestId:"section-about-and-phone-number",title:s.default.t(211)},b,y)};var l=a(n(355858)),r=n(464659),o=a(n(203528)),i=n(660666),u=n(306703),c=n(714574),s=a(n(932325)),d=n(180519),f=n(931019),p=a(n(667294)),m=(a(n(156720)),n(379811)),h=n(655241);const g={container:{paddingBottom:"przvwfww"}}},463954:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{contact:t}=e,n=f.default.createElement(m,{contact:t,onClick:function(){c.ModalManager.open(f.default.createElement(s.default,{contact:t}))}});return f.default.createElement(i.default,{xstyle:p.businessAccount},n)};var l=n(354458),r=n(660666),o=a(n(831269)),i=a(n(969358)),u=n(731085),c=n(114850),s=a(n(517729)),d=n(548360),f=a(n(667294));a(n(156720));const p={businessAccount:{borderTop:"mug5vpb7",fontSize:"f8jlpxt4"},businessTitleWithSMBUpsell:{lineHeight:"hzeshm6i"},bannerSvgContainer:{marginTop:"b9l0eqez",marginEnd:"jnwc1y2a",marginBottom:"mpdn4nr2",marginStart:"svoq16ka"},bannerSvg:{color:"jq3rn4u7",width:"dh5rsm73"}};function m(e){let{onClick:t,contact:n}=e;return f.default.createElement(o.default,{testid:"business-title",xstyle:p.businessTitleWithSMBUpsell,onClick:t,side:f.default.createElement(u.InfoIcon,{xstyle:p.bannerSvgContainer,iconXstyle:p.bannerSvg,displayInline:!0})},function(e){return(0,l.isBotEnabled)()&&(0,r.getId)(e).isBot()?d.fbt._("",null,{hk:"1SN9QF"}):d.fbt._("This is a business account.",null,{hk:"2x8QUJ"})}(n))}},520228:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n;const{contact:a,onProductCatalog:W}=e,V=(0,G.useContext)(C.DrawerContext),H=(0,I.getProductCatalogSessionId)(V),U=(0,h.default)((0,x.unproxy)(e.contact));function q(){return(q=(0,l.default)((function*(){const e=yield(0,P.findChat)(a.id,"businessActions");(yield b.Cmd.openChatFromUnread(e))&&(k.DrawerManager.closeDrawerRight(),(0,i.btmThreadsLoggingEnabled)()&&v.ComposeBoxActions.addMsgSendingLogAttributes(e,{handleMultiple(){(0,E.handleActivitiesForChatThreadLogging)([{activityType:"profileReplies",ts:(0,r.unixTime)(),chatId:e.id}])}}))}))).apply(this,arguments)}let z;const Y=f.ChatCollection.getActive();if(!(null==Y?void 0:Y.id.equals(a.id))){var K,X;(0,u.logMessageClick)(H,null===(K=a.businessProfile)||void 0===K?void 0:K.isProfileLinked,!!(null===(X=a.businessProfile)||void 0===X?void 0:X.coverPhoto)),z=G.default.createElement(m.default,{xstyle:[D.uiMargin.horiz12],Icon:(0,o.getABPropConfigValue)("unified_user_profile_navigation_enabled")?p.ChatIcon:g.ChatMsgIcon,label:B.fbt._("Message",null,{hk:"mZ5DE"}),onClick:()=>{!function(){q.apply(this,arguments)}()},testid:"business-action chat"})}let Z,Q,$;U.isVoiceCallEnabled&&(Z=G.default.createElement(m.default,{xstyle:[D.uiMargin.horiz12],Icon:R.VoiceCallFilledIcon,label:B.fbt._("Audio",null,{hk:"rWU8D"}),disabled:!U.canStartVoiceCall,onClick:()=>{var e,t;(0,u.logVoiceCallClick)(H,null===(e=a.businessProfile)||void 0===e?void 0:e.isProfileLinked,!!(null===(t=a.businessProfile)||void 0===t?void 0:t.coverPhoto));const n=a.id.isLid()?a.phoneNumber:a.id;(0,O.shouldDisplayPhoneNumberHidingModal)(a)?(0,O.displayPhoneNumberHidingModal)(a,!1):null!=n&&(null===j.Voip||void 0===j.Voip||j.Voip.callStart(n,!1))},testid:"business-action voice-call"}));(null===(t=a.businessProfile)||void 0===t||null===(n=t.profileOptions)||void 0===n?void 0:n.commerceExperience)===c.COMMERCE_EXPERIENCE_TYPES.CATALOG&&(Q=G.default.createElement(m.default,{xstyle:[D.uiMargin.horiz12],Icon:d.CatalogFilledIcon,label:B.fbt._("Catalog",null,{hk:"3QDkTE"}),onClick:()=>{var e,t;(0,u.logCatalogClick)(H,null===(e=a.businessProfile)||void 0===e?void 0:e.isProfileLinked,!!(null===(t=a.businessProfile)||void 0===t?void 0:t.coverPhoto)),W((0,I.getProductCatalogContext)(V),"ContactInfo")},testid:"business-action catalog"}));if((0,s.hasShop)(a.businessProfile)){(0,i.bannedShopsEnabled)()&&(0,s.isShopBanned)(a.businessProfile)||($=G.default.createElement(m.default,{xstyle:[D.uiMargin.horiz12],Icon:N.ShopFilledIcon,label:B.fbt._("Shop",null,{hk:"3KsdlE"}),onClick:function(){var e,t;(0,u.logShopsClick)(H,null===(e=a.businessProfile)||void 0===e?void 0:e.isProfileLinked,!!(null===(t=a.businessProfile)||void 0===t?void 0:t.coverPhoto)),(0,s.goToShop)(a.businessProfile)},testid:"business-action shop"}))}const J=!(0,y.getIsIAS)(a)&&!(0,y.getId)(a).isBot()&&!(0,y.getIsCAPISupportAccount)(a)&&G.default.createElement(m.default,{xstyle:[D.uiMargin.horiz12],Icon:w.ForwardFilledIcon,label:B.fbt._("Share",null,{hk:"4F3c6E"}).toString(),onClick:function(){var e,t;(0,u.logForwardClick)(H,null===(e=a.businessProfile)||void 0===e?void 0:e.isProfileLinked,!!(null===(t=a.businessProfile)||void 0===t?void 0:t.coverPhoto)),S.ModalManager.open(G.default.createElement(A.SendContactsModalLoadable,{contacts:[(0,x.unproxy)(a)],onContactsSent:e=>{b.Cmd.openChatFromUnread(e).then((()=>{}))}}))},testid:"business-action forward"}),ee=B.fbt._("Request",null,{hk:"1Qh451"}),te=B.fbt._("Requested",null,{hk:"3GgAXn"}),ne=(0,y.getCanRequestPhoneNumber)(a)?ee:te,ae=e.displayRequestPnButton&&G.default.createElement(m.default,{Icon:M.DialpadSmallIcon,xstyle:[D.uiMargin.horiz12],iconWidth:19,label:ne,disabled:!(0,y.getCanRequestPhoneNumber)(a),onClick:()=>{S.ModalManager.open(G.default.createElement(T.default,{entryPoint:L.PNH_ENTRY_POINT_TYPE.CHAT_INFO_REQUEST}))},testid:"request-phone-number-button-business"});return G.default.createElement(_.FlexRow,{xstyle:F.actionsRow,justify:"center"},ae,z,Z,Q,$,J)};var l=a(n(348926)),r=n(632157),o=n(287461),i=n(72696),u=n(815651),c=n(817649),s=n(542358),d=n(623282),f=n(351053),p=n(164777),m=a(n(983098)),h=a(n(9729)),g=n(174571),E=n(698867),b=n(780549),v=n(877171),y=n(660666),M=n(521332),C=n(568550),k=n(900316),P=n(581354),_=n(690495),w=n(672185),S=n(114850),O=n(417016),I=n(932523),T=a(n(755140)),A=n(340576),N=n(76104),x=n(163139),D=n(676345),R=n(190848),j=n(961745),L=n(130756),B=n(548360),G=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=W(t);if(n&&n.has(e))return n.get(e);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(a,r,o):a[r]=e[r]}a.default=e,n&&n.set(e,a);return a}(n(667294));a(n(156720));function W(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(W=function(e){return e?n:t})(e)}const F={actionsRow:{marginTop:"c46o30wg",marginEnd:"bsg2wrd4",marginBottom:"brac1wpa",marginStart:"f459d30t","@media (min-width: 1300px)":{marginStart:"hfp8519b",marginEnd:"acdu7ris"}}}},450715:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{businessHours:t,isProfileLinked:n,hasCoverPhoto:a}=e,o=(0,s.getProductCatalogSessionId)((0,h.useContext)(u.DrawerContext)),i=(0,r.getBusinessOpenState)(t),[c,p]=(0,h.useState)(!0);if(null==t)return null;const g=(0,d.getBusinessHours)(t).map((e=>{const{day:t,hours:n,first:a}=e;let l=t,o=n,u=!1;if(a)switch(i.status){case r.BUSINESS_OPEN_STATUS.OPEN_24H:l=m.fbt._("Open now",null,{hk:"28hpHy"}),o=m.fbt._("Open 24 hours",null,{hk:"1AlfF5"}),u=!0;break;case r.BUSINESS_OPEN_STATUS.OPEN_APPOINTMENT:l=m.fbt._("Open now",null,{hk:"28hpHy"}),o=m.fbt._("Open by appointment only",null,{hk:"1nxH9v"}),u=!0;break;case r.BUSINESS_OPEN_STATUS.OPEN:l=m.fbt._("Open now",null,{hk:"28hpHy"}),u=!0;break;case r.BUSINESS_OPEN_STATUS.CLOSED_TODAY:o=m.fbt._("Closed",null,{hk:"3IRgct"})}return!a&&c?null:h.default.createElement(b,{day:l,dayIsOpen:u,key:t,hours:o,first:a,collapsed:c})}));return h.default.createElement(f.default,{xstyle:E.businessHours,onClick:()=>{(0,l.logHoursClick)(o,n,!!a),p(!c)},testid:"business-hours-expand"},g)};var l=n(815651),r=n(542358),o=n(592362),i=n(752253),u=n(568550),c=n(305521),s=n(932523),d=n(341463),f=a(n(625903)),p=a(n(363467)),m=n(548360),h=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(a,r,o):a[r]=e[r]}a.default=e,n&&n.set(e,a);return a}(n(667294));a(n(156720));function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}const E={businessHours:{display:"f804f6gw",width:"ln8gz9je",textAlign:"ml4r5409"}};function b(e){if(e.first){const t=h.default.createElement("div",{className:p.default.businessHoursChevron,role:"button"},h.default.createElement(o.ChevronDownAltIcon,{className:e.collapsed?"":p.default.flipSvg,displayInline:!0}));return h.default.createElement("div",{className:(0,i.cx)({[p.default.firstRow]:e.first,[p.default.businessHoursRow]:!0})},h.default.createElement("div",{className:(0,i.cx)({[p.default.dayIsOpen]:e.dayIsOpen,[p.default.businessHoursDay]:!0})},h.default.createElement(c.EmojiText,{direction:"auto",text:e.day})),h.default.createElement("div",{className:p.default.businessHoursHours},h.default.createElement(c.EmojiText,{direction:"auto",text:e.hours})),t)}return h.default.createElement("div",{className:p.default.businessHoursRow},h.default.createElement("div",{className:p.default.businessHoursDay},h.default.createElement(c.EmojiText,{direction:"auto",text:e.day})),h.default.createElement("div",{className:p.default.businessHoursHours},h.default.createElement(c.EmojiText,{direction:"auto",text:e.hours})))}},906015:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{businessProfile:t}=e,{description:n,address:a,latitude:v,longitude:M,website:C,email:k,businessHours:P,isProfileLinked:_,coverPhoto:w}=(0,b.useModelValues)(t,["description","address","latitude","longitude","website","email","businessHours","isProfileLinked","coverPhoto"]),S=(0,E.useContext)(u.DrawerContext),O=(0,p.getProductCatalogSessionId)(S);let I,T,A,N,x,D;null!=n&&(I=E.default.createElement("div",{className:h.default.section},E.default.createElement(s.ExpandableText,{text:n,textLimit:i.default.BUSINESS_DESCRIPTION_INFO_PANEL_TRUNC_LENGTH},(e=>{let{textLimit:t}=e;return E.default.createElement(c.EmojiText,{className:h.default.description,selectable:!0,direction:"auto",text:n,textLimit:t,breakWord:!0})}))));null!=P&&(T=E.default.createElement("div",{className:h.default.section},E.default.createElement(l.default,{businessHours:P,isProfileLinked:_,hasCoverPhoto:!!w})));null!=a&&(A=E.default.createElement("div",{className:h.default.section},E.default.createElement(c.EmojiText,{selectable:!0,direction:"auto",text:a})));null!=v&&null!=M&&(N=E.default.createElement("div",{style:{height:132},className:(0,g.default)(h.default.section,h.default.map)},E.default.createElement(f.default,{lat:v,lng:M,name:a||"",width:590,height:132,onClick:()=>(0,r.logLocationClick)(O,_,!!w),testid:"business-info-map"})));null!=k&&(x=E.default.createElement("div",{className:h.default.section},E.default.createElement(d.ExternalLink,{href:`mailto:${k}`,onClick:()=>(0,r.logEmailClick)(O,_,!!w),testid:"business-info-email"},k)));null!=C&&C.length>0&&(D=E.default.createElement("div",{className:h.default.section},C.map((e=>E.default.createElement("div",{key:e},E.default.createElement(d.ExternalLink,{href:m.default.toMaliciousSiteRedirect(e),onClick:()=>(0,r.logWebsiteClick)(O,_,!!w),testid:"business-info-website"},e))))));if(null==I&&null==T&&null==A&&null==N&&null==x&&null==D)return null;return E.default.createElement(o.ChatInfoDrawerSection,{xstyle:y.container},I,T,A,N,x,D)};var l=a(n(450715)),r=n(815651),o=n(464659),i=a(n(846870)),u=n(568550),c=n(305521),s=n(999649),d=n(753233),f=a(n(459510)),p=n(932523),m=a(n(79291)),h=a(n(850858)),g=a(n(261294)),E=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(a,r,o):a[r]=e[r]}a.default=e,n&&n.set(e,a);return a}(n(667294)),b=(a(n(156720)),n(655241));function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}const y={container:{paddingTop:"i4pc7asj",paddingBottom:"q1nnjopg"}}},766491:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const{contact:n,isMessageYourselfChat:a}=e;let y,M,C;var k;null!=(null===(t=n.businessProfile)||void 0===t?void 0:t.customUrl)&&(C=d.default.createElement("div",{className:(0,f.default)(h)},d.default.createElement(o.EmojiText,{text:null===(k=n.businessProfile)||void 0===k?void 0:k.customUrl,direction:"auto",titlify:!0,breakWord:!0,inlineblock:!0})));if((0,r.getIsMe)(n))if(a)y=d.default.createElement(i.Name,{contact:n,showBusinessCheckmark:(0,r.getShowBusinessCheckmarkAsPrimary)(n),showMessageYourselfName:!0,useVerifiedName:!0,breakWord:!0,selectable:!0}),M=d.default.createElement(i.Name,{contact:n,showBusinessCheckmark:(0,r.getShowBusinessCheckmarkAsPrimary)(n),selectable:!0});else if(n.name!==n.verifiedName){let e;(0,r.getShowBusinessCheckmarkAsSecondary)(n)&&(e=d.default.createElement("div",{className:(0,f.default)(m)},d.default.createElement(u.PsaVerifiedIcon,null))),y=d.default.createElement(i.Name,{contact:n,breakWord:!0,selectable:!0}),M=d.default.createElement("div",{className:(0,f.default)(h)},d.default.createElement("div",{className:(0,f.default)(v)},d.default.createElement(o.EmojiText,{text:`~${n.verifiedName}`,className:(0,f.default)(b),direction:"auto",ellipsify:!0,titlify:!0,selectable:!0}),e))}else y=d.default.createElement(i.Name,{contact:n,showBusinessCheckmark:(0,r.getShowBusinessCheckmarkAsPrimary)(n),breakWord:!0,selectable:!0});else y=(0,r.getIsIAS)(n)||(0,r.getIsCAPISupportAccount)(n)?d.default.createElement("span",null,d.default.createElement(i.Name,{contact:n})):d.default.createElement(o.EmojiText,{text:n.verifiedName,direction:"auto",ellipsify:!0,titlify:!0,breakWord:!0,selectable:!0}),M=(0,r.getIsIAS)(n)?d.default.createElement("div",{className:(0,f.default)(h)},d.default.createElement(o.EmojiText,{text:s.fbt._("Official WhatsApp Account",null,{hk:"4oZMU1"}),direction:"auto",ellipsify:!0,titlify:!0,breakWord:!0,selectable:!0})):(0,r.getIsCAPISupportAccount)(n)?d.default.createElement("div",{className:(0,f.default)(h)},d.default.createElement(o.EmojiText,{text:(0,c.SupportChatSubtitle)(),direction:"auto",ellipsify:!0,titlify:!0,breakWord:!0,selectable:!0})):(0,l.isBotEnabled)()&&(0,r.getId)(n).isBot()?d.default.createElement("div",{className:(0,f.default)(g)},d.default.createElement(o.EmojiText,{text:s.fbt._("",null,{hk:"3wsfuo"}),direction:"auto",ellipsify:!0,titlify:!0,breakWord:!0,selectable:!0})):d.default.createElement("div",{className:(0,f.default)(h)},d.default.createElement(i.Name,{testid:"contact-info-subtitle",contact:n,showBusinessCheckmark:(0,r.getShowBusinessCheckmarkAsPrimary)(n),selectable:!0}));return d.default.createElement("div",{className:(0,f.default)(p)},d.default.createElement("div",{className:(0,f.default)(E)},y),M,C)};var l=n(354458),r=n(660666),o=n(305521),i=n(21645),u=n(376355),c=n(666836),s=n(548360),d=a(n(667294)),f=a(n(156720));const p={marginTop:"tt8xd2xn",marginEnd:"jnwc1y2a",marginBottom:"ngycyvoj",marginStart:"svoq16ka"},m={display:"ew8mgplc",marginTop:"o9i7y497",marginEnd:"jnwc1y2a",marginBottom:"mpdn4nr2",marginStart:"k6y3xtnu"},h={color:"p6nhtbpp",fontSize:"enbbiyaj",lineHeight:"tkq7s68q",marginTop:"tt8xd2xn",marginEnd:"jnwc1y2a",marginBottom:"inww9tbj",marginStart:"svoq16ka"},g={display:"l7jjieqr",color:"eruf1vka",backgroundColor:"mfl62aol",borderTopStartRadius:"l147y7tb",borderTopEndRadius:"mjscftrx",borderBottomEndRadius:"fqwk616h",borderBottomStartRadius:"pkud3j3x",fontSize:"f8jlpxt4",paddingTop:"ocd2b0bc",paddingEnd:"i8go5xc4",paddingBottom:"aa0kojfi",paddingStart:"e1yunedv",lineHeight:"tkq7s68q",marginTop:"tt8xd2xn",marginEnd:"jnwc1y2a",marginBottom:"inww9tbj",marginStart:"svoq16ka"},E={fontSize:"iqrewfee",fontWeight:"sy6s5v3r",marginTop:"tt8xd2xn",marginEnd:"jnwc1y2a",marginBottom:"or9x5nie",marginStart:"svoq16ka"},b={flexGrow:"tvf2evcx"},v={display:"p357zi0d",justifyContent:"ac2vgrno"}},449397:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.BusinessOpenHours=function(e){const{hours:t}=e,n=function(e){switch(e.status){case r.BUSINESS_OPEN_STATUS.OPEN_24H:return i.fbt._("{open} 24 hours",[i.fbt._param("open",`<span class="${(0,c.default)(d)}">${i.fbt._("Open",null,{hk:"187rvw"}).toString()}</span>`)],{hk:"1aA6f9"});case r.BUSINESS_OPEN_STATUS.OPEN_APPOINTMENT:return i.fbt._("{open} by appointment only",[i.fbt._param("open",`<span class="${(0,c.default)(d)}">${i.fbt._("Open",null,{hk:"187rvw"}).toString()}</span>`)],{hk:"z8CGT"});case r.BUSINESS_OPEN_STATUS.OPEN:if(e.openUntil&&e.additionalOpen&&e.additionalClose)return i.fbt._("{open} until {time}, {additionalOpenTime} - {additionalCloseTime}",[i.fbt._param("open",`<span class="${(0,c.default)(d)}">${i.fbt._("Open",null,{hk:"187rvw"}).toString()}</span>`),i.fbt._param("time",p(e.openUntil)),i.fbt._param("additionalOpenTime",p(e.additionalOpen)),i.fbt._param("additionalCloseTime",p(e.additionalClose))],{hk:"2dJgLQ"});if(e.openUntil)return i.fbt._("{open} until {time}",[i.fbt._param("open",`<span class="${(0,c.default)(d)}">${i.fbt._("Open",null,{hk:"187rvw"}).toString()}</span>`),i.fbt._param("time",p(e.openUntil))],{hk:"3Dd8an"});break;case r.BUSINESS_OPEN_STATUS.CLOSED:return e.opensAt?i.fbt._("{closed}, opens at {time}",[i.fbt._param("closed",`<span class="${(0,c.default)(s)}">${i.fbt._("Closed now",null,{hk:"2oDK4r"}).toString()}</span>`),i.fbt._param("time",p(e.opensAt))],{hk:"LvVmY"}):`<span class="${(0,c.default)(s)}">${i.fbt._("Closed now",null,{hk:"2oDK4r"}).toString()}</span>`;case r.BUSINESS_OPEN_STATUS.CLOSED_TODAY:return`<span class="${(0,c.default)(s)}">${i.fbt._("Closed today",null,{hk:"3uCCvH"}).toString()}</span>`}return null}((0,r.getBusinessOpenState)(t));if(null==n)return null;const a=l.default.sanitize(n.toString());return u.default.createElement("div",{className:(0,c.default)(f),dangerouslySetInnerHTML:{__html:a}})};var l=a(n(724843)),r=n(542358),o=a(n(932325)),i=n(548360),u=a(n(667294)),c=a(n(156720));const s={color:"mvxzr2tb"},d={color:"j5au4wul"},f={color:"sbs3osm6",fontSize:"f8jlpxt4",marginTop:"tt8xd2xn",marginEnd:"jnwc1y2a",marginBottom:"g105fvfm",marginStart:"svoq16ka"};function p(e){return null==e?"":e.toLocaleTimeString(o.default.getLocale(),{hour:"numeric",minute:"2-digit"})}},745309:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.BusinessProfile=function(e){const{contact:t}=e,[n,a,l,u]=(0,x.useContactValues)(e.contact.id,[p.getId,p.getVerifiedLevel,p.getName,p.getVerifiedName]),c=(0,D.useModelValues)(e.businessProfile,["description","categories","website","email","stale","latitude","longitude","businessHours","structuredAddress"]);(0,N.useEffect)((()=>{new S.ViewBusinessProfileWamEvent({viewBusinessProfileAction:O.VIEW_BUSINESS_PROFILE_ACTION.ACTION_IMPRESSION}).commit()}),[]);const d=N.default.createElement(j,{contact:t});let m,v,M,C,k,P;const T=c;if(T.stale)m=N.default.createElement("div",{className:I.default.contactBusinessInfoSpinner},N.default.createElement(w.Spinner,{size:20,stroke:5}));else{var A;v=(null===(A=T.categories)||void 0===A?void 0:A.length)?N.default.createElement(W,{icon:N.default.createElement(r.BusinessCategoryIcon,null)},N.default.createElement(g.EmojiText,{selectable:!0,direction:"auto",text:T.categories.map((e=>e.localized_display_name)).join(y.default.t(253))})):null,M=T.description?N.default.createElement(W,{icon:N.default.createElement(o.BusinessDescriptionIcon,null)},N.default.createElement(E.ExpandableText,{text:T.description,textLimit:f.default.BUSINESS_DESCRIPTION_INFO_PANEL_TRUNC_LENGTH},(e=>{let{textLimit:t}=e;return N.default.createElement(g.EmojiText,{selectable:!0,direction:"auto",breakWord:!0,text:T.description,textLimit:t})}))):null,T.website&&Array.isArray(T.website)&&T.website.length&&(C=T.website.map(((e,t)=>{const n=(0,_.getWebsiteLink)(e),a=N.default.createElement(g.EmojiText,{selectable:!0,direction:"auto",text:e}),l=N.default.createElement(b.ExternalLink,{className:I.default.link,href:n},a);return N.default.createElement(W,{icon:N.default.createElement(s.BusinessWebsiteIcon,null),key:t},l)}))),T.businessHours&&(k=N.default.createElement(L,{businessHours:T.businessHours}));const e=T.email;if(e){const t=N.default.createElement(g.EmojiText,{selectable:!0,direction:"auto",text:e}),n=N.default.createElement(b.ExternalLink,{className:I.default.link,href:`mailto:${e}`},t);P=N.default.createElement(W,{icon:N.default.createElement(i.BusinessEmailIcon,null),dir:"auto"},n)}}const R=void 0!==T.latitude&&void 0!==T.longitude||T.structuredAddress;let B;(m||R||v||M||null!=k||P||C)&&(B=N.default.createElement(h.default,{theme:"padding"},N.default.createElement("div",{className:I.default.contactBusinessInfo},m,N.default.createElement(G,{contactName:l,latitude:T.latitude,longitude:T.longitude,structuredAddress:T.structuredAddress}),v,M,k,P,C)));return N.default.createElement(N.default.Fragment,null,N.default.createElement(h.default,null,d),B)};var l=n(115888),r=n(624573),o=n(718620),i=n(423082),u=n(675305),c=n(817649),s=n(36409),d=n(592362),f=a(n(846870)),p=n(660666),m=a(n(831269)),h=a(n(969358)),g=n(305521),E=n(999649),b=n(753233),v=n(731085),y=a(n(932325)),M=a(n(459510)),C=n(300987),k=n(114850),P=a(n(517729)),_=n(341463),w=n(956113),S=n(875302),O=n(130756),I=a(n(161160)),T=n(548360),A=a(n(261294)),N=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=R(t);if(n&&n.has(e))return n.get(e);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(a,r,o):a[r]=e[r]}a.default=e,n&&n.set(e,a);return a}(n(667294)),x=n(379811),D=n(655241);function R(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(R=function(e){return e?n:t})(e)}function j(e){let{contact:t}=e;const n=t.verifiedLevel===c.VERIFIED_LEVEL.HIGH?T.fbt._("Official business account",null,{hk:"1KruJ"}):T.fbt._("Business account",null,{hk:"2lzdAg"});return N.default.createElement(m.default,{testid:"business-title",onClick:k.ModalManager.open(N.default.createElement(P.default,{contact:t})),side:N.default.createElement(v.InfoIcon,{className:I.default.infoIcon,displayInline:!0})},n)}function L(e){let{businessHours:t}=e;const[n,a]=(0,N.useState)(!0),l=(0,_.getBusinessHours)(t).map((e=>{const{day:t,hours:a,first:l}=e;return!l&&n?null:N.default.createElement(B,{day:t,key:t,hours:a,first:l,collapsed:n})}));return N.default.createElement(W,{icon:N.default.createElement(u.BusinessHoursIcon,null),onClick:()=>a(!n)},l)}const B=e=>{const t=e.first?N.default.createElement("div",{className:I.default.businessHoursChevron,role:"button"},N.default.createElement(d.ChevronDownAltIcon,{className:e.collapsed?"":I.default.flipSvg,displayInline:!0})):null;return N.default.createElement("div",{className:I.default.businessHoursRow},N.default.createElement("div",{className:I.default.businessHoursDay},N.default.createElement(g.EmojiText,{direction:"auto",text:e.day})),N.default.createElement("div",{className:I.default.businessHoursHours},N.default.createElement(g.EmojiText,{direction:"auto",text:e.hours})),t)};const G=e=>{let{contactName:t,latitude:n,longitude:a,structuredAddress:r}=e;const o=r?function(e){const{streetAddress:t,localizedCityName:n,zipCode:a}=e;return t&&n&&a?T.fbt._("{streetAddress}, {city} {zipCode}",[T.fbt._param("streetAddress",t),T.fbt._param("city",n),T.fbt._param("zipCode",a)],{hk:"1McVXv"}).toString():t&&n?T.fbt._("{streetAddress}, {city}",[T.fbt._param("streetAddress",t),T.fbt._param("city",n)],{hk:"1zyKhk"}).toString():t}(r):null;let i,u;if(null!=n&&null!=a&&(i=N.default.createElement("div",{style:{height:150},className:I.default.businessMap},N.default.createElement(M.default,{lat:n,lng:a,name:o||t,width:565,height:150}))),o){let e;e=null!=n&&null!=a?(0,C.getMapUrl)(n,a,o):(0,C.getSearchUrl)(o),u=N.default.createElement("div",{className:I.default.address},N.default.createElement(b.ExternalLink,{href:e},N.default.createElement(g.EmojiText,{selectable:!0,direction:"auto",text:o})))}return u||i?N.default.createElement(W,{icon:N.default.createElement(l.BusinessAddressIcon,null)},u,i):null},W=e=>N.default.createElement("div",{className:(0,A.default)(I.default.dataRow,e.className),onClick:e.onClick},N.default.createElement("div",{className:I.default.dataRowIcon},e.icon),N.default.createElement("div",{className:I.default.dataRowText},e.children))},718796:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{contact:t,businessProfile:n,onOpenStatus:a,onProductCatalog:E,onProfilePicLoad:b,onProfilePicClick:v,isMessageYourselfChat:y,isPhoneNumberHidden:M}=e;const{businessHours:C,categories:k}=(0,m.useModelValues)(n,["businessHours","categories"]),P=f.default.createElement(r.default,{contact:t,isMessageYourselfChat:y});let _;!(0,u.getIsIAS)(t)&&!(0,u.getIsCAPISupportAccount)(t)&&!(0,u.getId)(t).isBot()&&null!=k&&k.length>0&&(_=f.default.createElement("div",{className:(0,p.default)(g)},k.map((e=>e.localized_display_name)).join(d.default.t(252))));const w=C?f.default.createElement(o.BusinessOpenHours,{hours:C}):null,S=t.businessProfile?f.default.createElement(i.default,{contact:t,businessProfile:t.businessProfile,onClick:v,onOpenStatus:a,onLoad:b}):null;return f.default.createElement(s.default,{theme:"padding-no-margin"},S,f.default.createElement("div",{className:(0,p.default)(h)},P,M&&f.default.createElement(c.default,null),_,w,f.default.createElement(l.default,{contact:t,onProductCatalog:E,displayRequestPnButton:M})))};var l=a(n(520228)),r=a(n(766491)),o=n(449397),i=a(n(411019)),u=n(660666),c=a(n(836513)),s=a(n(969358)),d=a(n(932325)),f=a(n(667294)),p=a(n(156720)),m=n(655241);const h={textAlign:"qfejxiq4"},g={marginTop:"tt8xd2xn",marginEnd:"jnwc1y2a",marginBottom:"brac1wpa",marginStart:"svoq16ka",fontSize:"f8jlpxt4",color:"sbs3osm6",lineHeight:"jgi8eev7"}},466488:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{onClick:t,parentGroupMetadata:n,parentGroupChat:a}=e;const{subgroupCount:b}=(0,g.default)(n),{name:v}=(0,E.useModelValues)(a.contact,["name"]),y=(0,r.isIntegritySuspendedCommunity)(a);(0,h.useEffect)((()=>{(0,d.queryAndUpdateSubgroupsMetadata)(n.id,n.joinedSubgroups)}),[]);const M=m.fbt._("Community",null,{hk:"2P4Qwb"});return h.default.createElement(u.default,{theme:"no-padding"},h.default.createElement(l.default,{testid:"group-info-community-section",image:h.default.createElement(i.DetailImage,{id:n.id,shape:i.DetailImageShape.Squircle,size:60}),primary:h.default.createElement(c.EmojiText,{text:v,ellipsify:!0}),onClick:t,theme:"community-home",secondary:h.default.createElement(p.TextSpan,{size:"16",color:"secondary"},M,y?null:h.default.createElement(h.default.Fragment,null,s.default.isRTL()?" - ":" · ",m.fbt._({"*":"{count} Groups",_1:"1 Group"},[m.fbt._plural(b,"count")],{hk:"38FdVG"}))),detail:h.default.createElement(o.ChevronRightAltIcon,{color:f.SvgColorProp.SECONDARY,directional:!0}),focusable:!0}))};var l=a(n(170206)),r=n(394164),o=n(647276),i=n(23641),u=a(n(969358)),c=n(305521),s=a(n(932325)),d=n(510900),f=n(220584),p=n(180519),m=n(548360),h=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(a,r,o):a[r]=e[r]}a.default=e,n&&n.set(e,a);return a}(n(667294)),g=a(n(847116)),E=n(655241);function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}},483828:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{chat:t,groupMetadata:n}=e;const{id:a,parentGroup:T,isUnnamed:A}=(0,S.useModelValues)(n,["id","parentGroup","isUnnamed"]),N=(0,w.default)(n.participants,"change:isAdmin",(()=>n.participants.iAmAdmin())),x=(0,w.default)(n.participants,["bulk_add","bulk_remove","reset"],(()=>n.participants.length)),D=(0,i.getABPropConfigValue)("parent_group_min_participants_for_group_entry_point"),R=(0,O.default)();if(!(0,d.communitiesEnabled)()||!N||null!=T||x<D)return null;const j=()=>{m.DrawerManager.openDrawerLeft(_.default.createElement(v.NewCommunityFlowLoadable,{existingGroups:[a]}),{focusType:g.FocusType.TABBABLE}),s.UiCommunityCreationAction.startSession(k.COMMUNITY_CREATION_ENTRYPOINT_TYPE.GROUP_INFO),s.UiCommunityCreationAction.enter(k.COMMUNITY_CREATION_CURRENT_SCREEN_TYPE.GROUP_INFO)},L=function(){var e=(0,l.default)((function*(e){yield(0,o.default)((0,y.setGroupSubject)(t,e),R).catch((0,r.catchAbort)((()=>{}))).catch((()=>{__LOG__(3)`name_group_modal:onSetSubject failed`})),E.ModalManager.close(),j()}));return function(){return e.apply(this,arguments)}}(),B=()=>{E.ModalManager.open(_.default.createElement(p.ConfirmPopup,{onOK:()=>E.ModalManager.close(),okText:P.fbt._("OK",null,{hk:"4oTrfy"})},P.fbt._("Only admins can edit this group's info",null,{hk:"1a2ztg"})))};return _.default.createElement(h.default,{theme:"no-padding"},_.default.createElement(u.default,{testid:"group-info-create-community-section",image:_.default.createElement(f.CommunitySquircleIcon,{iconXstyle:I.communitySquircle,width:40,height:40}),primary:_.default.createElement(C.TextSpan,{size:"16"},P.fbt._("Start a community",null,{hk:"2hSyE2"})),onClick:()=>{if(A){var e,n;const a=P.fbt._("This group was created without a name. Give it a name to create a community.",null,{hk:"2BkS8"});E.ModalManager.open(_.default.createElement(b.default,{chat:t,subtext:a,onCancel:()=>E.ModalManager.close(),onOK:L,editable:null===(e=t.groupMetadata)||void 0===e?void 0:e.canSetSubject(),editRestrictionInfo:(null===(n=t.groupMetadata)||void 0===n?void 0:n.restrict)?B:void 0}))}else j()},theme:"community-create",secondary:_.default.createElement(C.TextSpan,{size:"14",color:"secondary"},P.fbt._("Bring members together in topic-based groups",null,{hk:"4mplI5"})),detail:_.default.createElement(c.ChevronRightAltIcon,{color:M.SvgColorProp.SECONDARY,directional:!0}),focusable:!0}))};var l=a(n(348926)),r=n(898817),o=a(n(229922)),i=n(287461),u=a(n(170206)),c=n(647276),s=n(198933),d=n(174834),f=n(247365),p=n(103440),m=n(900316),h=a(n(969358)),g=n(299950),E=n(114850),b=a(n(550506)),v=n(219548),y=n(470824),M=n(220584),C=n(180519),k=n(130756),P=n(548360),_=a(n(667294)),w=(a(n(156720)),a(n(524578))),S=n(655241),O=a(n(895851));const I={communitySquircle:{color:"fsk8o631"}}},20864:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{chat:t}=e,n=(0,s.useOptionalModelValues)(t.groupMetadata,["groupType"]);let a;a=(0,r.communitiesEnabled)()&&(null==n?void 0:n.groupType)===o.GroupType.DEFAULT_ANNOUNCEMENT_GROUP?u.default.createElement("div",{className:(0,c.default)(d)},i.fbt._("",null,{hk:"4kc4Kr"})):i.fbt._("Add group description",null,{hk:"BVsoQ"});return u.default.createElement(l.default,{chat:e.chat,showFullDescription:e.showFullDescription,editRestrictionText:i.fbt._("Only admins can edit this group's info",null,{hk:"1a2ztg"}),testid:"group-info-drawer-description-title-input",containerTestId:"group-info-drawer-description-container",emptyValuePlaceholder:a})};var l=a(n(707655)),r=n(174834),o=n(862159),i=n(548360),u=a(n(667294)),c=a(n(156720)),s=n(655241);const d={color:"tviruh8d",fontSize:"enbbiyaj"}},941943:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(287461),r=a(n(775025)),o=n(738501),i=n(374660),u=a(n(306007)),c=n(464659),s=a(n(740681)),d=n(998123),f=n(174834),p=n(660666),m=a(n(908081)),h=a(n(324093)),g=n(626194),E=a(n(969358)),b=a(n(209064)),v=a(n(409558)),y=n(71957),M=a(n(570834)),C=n(714574),k=a(n(466488)),P=a(n(483828)),_=a(n(20864)),w=a(n(299723)),S=n(767140),O=n(951688),I=a(n(453090)),T=n(503028),A=a(n(483447)),N=n(862159),x=n(95576),D=a(n(932325)),R=n(97858),j=n(114850),L=a(n(832897)),B=n(111367),G=n(962647),W=n(126671),F=a(n(634152)),V=n(227341),H=n(163139),U=n(428991),q=n(983271),z=n(220584),Y=n(180519),K=n(625786),X=n(390737),Z=n(382117),Q=n(676345),$=n(571256),J=n(130756),ee=n(869513),te=n(818674),ne=n(609392),ae=n(548360),le=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=pe(t);if(n&&n.has(e))return n.get(e);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(a,r,o):a[r]=e[r]}a.default=e,n&&n.set(e,a);return a}(n(667294)),re=a(n(156720)),oe=n(379811),ie=a(n(401715)),ue=a(n(969651)),ce=a(n(637660)),se=n(808446),de=n(655241),fe=a(n(321201));function pe(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(pe=function(e){return e?n:t})(e)}const me={body:{flexShrink:"oq44ahr5",flexGrow:"tvf2evcx",flexBasis:"lb5m6g5c",paddingBottom:"s9fl9ege"},announcementGroupDisclaimer:{textAlign:"ljrqcn24",paddingTop:"n1yiu2zv",paddingBottom:"jd93c9cp",paddingEnd:"bcymb0na",paddingStart:"e8k79tju",lineHeight:"jgi8eev7",wordBreak:"cw3vfol9"},lastSectionRow:{marginBottom:"brac1wpa"}},he=(0,K.genId)("max_participant_toast");function ge(e,t){var n,a,pe;const{contact:ge,onVerification:Ee,onClose:be}=e,ve=(0,fe.default)(),ye=(0,ue.default)(),Me=(0,ie.default)(),Ce=(0,de.useModelValues)(e.chat,["mute","id","pendingAction","groupMetadata"]),ke=(0,de.useModelValues)(e.groupMetadata,["id","reportToAdminMode","cachedDeviceCount","cachedDeviceSizeBucket","participants","parentGroup","pendingParticipants","announce","support","incognito","groupType","restrict","isIncognitoCag","defaultSubgroup"]),[Pe,_e,we]=(0,oe.useContactValues)(e.contact.id,[p.getName,p.getId,C.getPendingAction]),Se=ke.groupType===N.GroupType.DEFAULT_ANNOUNCEMENT_GROUP,Oe=(0,ce.default)((()=>new Z.UiActionWamEvent({uiActionType:Se?J.UI_ACTION_TYPE.DEFAULT_SUBGROUP_INFO_OPEN:J.UI_ACTION_TYPE.GROUP_INFO_OPEN,uiActionPreloaded:!0,isLid:ke.isIncognitoCag}))),Ie=(0,ce.default)((()=>new M.default)),Te=(0,ce.default)((()=>new M.default)),Ae=(0,le.useRef)(null);(0,se.useListener)(ke.participants,["bulk_add","bulk_remove","reset","sort","change:isAdmin","change:isSuperAdmin"],ye),(0,se.useListener)(ke.pendingParticipants,["add","remove","reset"],ye);const Ne=()=>{var e;const t=(0,R.getGroupSizeLimit)(ke.groupType),n=null===(e=ke.getParentGroupChat())||void 0===e?void 0:e.formattedTitle;if(ke.participants.length>=t){const e=D.default.t(48,{max:t});X.ToastManager.open(le.default.createElement(K.Toast,{msg:e,id:he}))}else{const e=le.default.createElement(r.default,{chat:(0,H.unproxy)(Ce),pushTransition:"none",popTransition:"none",communityName:n});j.ModalManager.open(e,{transition:"modal-flow"})}},xe=()=>{j.ModalManager.open(le.default.createElement(b.default,{chat:Ce,chatId:Ce.id,e2eSubtype:"info_encrypted"}))};let De;if((0,le.useEffect)((()=>{(0,i.isIntegritySuspendedDefaultSubgroup)(Ce)?(0,U.openTerminatedCommunityModal)():(0,i.isTerminatedGroupOrNotMember)(Ce)?(0,i.isSupportGroup)(Ce)||((0,R.isGroupSuspendV2Enabled)()?(0,q.openSuspendedGroupModalV2)(Ce):(0,q.openTerminatedGroupOrNotMemberModal)()):(0,i.isSuspendedGroup)(Ce)&&((0,R.isGroupSuspendV2Enabled)()?(0,q.openSuspendedGroupModalV2)(Ce):(0,q.openSuspendedGroupModal)(!0===(0,i.shouldIncludeEntityIdInAppealRequest)()?ke.id.user.toString():null))}),[]),(0,le.useEffect)((()=>{ke.participants.ensureSorted();ke.pendingParticipants.ensureSorted()})),(0,le.useEffect)((()=>{const e=Oe.current;if(e){const t=ke.cachedDeviceSizeBucket;null!=t&&(e.sizeBucket=t),Object.assign(e,(0,ee.getGroupCountMetricsFromGroupMetadata)((0,H.unproxy)(ke))),e.markUiActionT(),e.commit(),Oe.current=void 0}(0,te.logUiActionShadowPrivateStatsTestEvents)()}),[]),ke.canSetGroupProperty()){const t=le.default.createElement(Y.TextSpan,{theme:"title"},ae.fbt._("Group settings",null,{hk:"3sS0Vl"})),n=le.default.createElement(W.SettingsIcon,{color:z.SvgColorProp.SECONDARY,height:17});De=le.default.createElement(u.default,{testid:"group-settings-row",side:"chevron",icon:n,onClick:e.onAdminSetting,title:t,spaced:!0})}let Re=null;e.onMediaGallery&&(Re=le.default.createElement(s.default,{onMediaGallery:e.onMediaGallery,chat:(0,H.unproxy)(Ce)}));const je=Ce&&(0,o.shouldShowEphemeralSetting)(Ce)?le.default.createElement(y.EphemeralSettingRow,{onClick:e.onEphemeral,chat:Ce,groupMetadata:ke,testid:"contact-info-dm-setting-row"}):null;let Le=null;if((0,f.communitiesEnabled)()&&Ce&&ke.parentGroup&&ke.participants.iAmMember()){const t=ke.getParentGroupChat();(null==t?void 0:t.groupMetadata)&&(Le=le.default.createElement(k.default,{onClick:()=>{var t;null===(t=e.onCommunityClick)||void 0===t||t.call(e)},parentGroupMetadata:t.groupMetadata,parentGroupChat:t}))}let Be=null;Be=le.default.createElement(v.default,{highlightSurface:J.PRIVACY_HIGHLIGHT_SURFACE_ENUM.INFO_SCREEN_GROUP,onClick:()=>(0,B.showEncryptionInfoPopup)(Ce),text:(0,$.isGroupCallEnabled)()?ae.fbt._("Messages and calls are end-to-end encrypted. Click to learn more.",null,{hk:"1l9pwW"}):ae.fbt._("Messages are end-to-end encrypted. Click to learn more.",null,{hk:"2MtPh9"}),spaced:!0}),(0,i.isSupportGroup)(Ce)&&(Be=le.default.createElement(A.default,{onClick:xe,spaced:!0}));const Ge=Ce.mute.canMute()?le.default.createElement(L.default,{chat:Ce,mute:Ce.mute,settings:F.default}):null;let We,Fe=null;if(e.onStarred){const t=le.default.createElement(Y.TextSpan,{theme:"title",size:"16"},ae.fbt._("Starred messages",null,{hk:"4wVbNG"})),n=le.default.createElement(V.StarIcon,{color:z.SvgColorProp.SECONDARY,height:20});Fe=le.default.createElement(c.ChatInfoDrawerSection,{titleTestId:"section-starred-messages",xstyle:Q.uiPadding.horiz0},le.default.createElement(u.default,{testid:"block-starred-messages",side:"chevron",icon:n,onClick:e.onStarred,title:t,spaced:!0}))}if(Ce.hasKeptMsgs()||(0,o.isEphemeralSettingOn)(Ce)){const t=le.default.createElement(Y.TextSpan,{theme:"title",size:"16"},ae.fbt._("Kept Messages",null,{hk:"41CBIy"})),n=ke.restrict?le.default.createElement(Y.TextDiv,{theme:"muted"},ae.fbt._("Only admins can keep or unkeep messages in this group.",null,{hk:"2Uhjiy"})):null,a=le.default.createElement(x.KeepInChatIcon,{color:z.SvgColorProp.SECONDARY,height:20});We=le.default.createElement(c.ChatInfoDrawerSection,{titleTestId:"section-kept-messages",xstyle:[me.lastSectionRow,Q.uiPadding.horiz0]},le.default.createElement(u.default,{testid:"block-kept-messages",side:"chevron",icon:a,onClick:e.onKept,title:t,secondaryTitle:n,spaced:!0}))}const Ve=(0,G.isReactionsEnabledInCAG)(Ce)?le.default.createElement(d.PhoneNumberVisibilityIndicatorCag,{chat:Ce}):null,He=(0,l.getABPropConfigValue)("report_to_admin_kill_switch")&&ke.reportToAdminMode&&ke.canSetGroupProperty()?le.default.createElement(u.default,{testid:"block-rta-messages",side:"chevron",icon:le.default.createElement(ne.WarningIcon,{color:z.SvgColorProp.SECONDARY,height:16}),onClick:e.onSentForAdminReview,title:le.default.createElement(Y.TextSpan,{theme:"title",size:"16"},ae.fbt._("Sent for admin review",null,{hk:"2gzsHo"})),spaced:!0}):null;let Ue=null;(Ge||Be||je)&&(Ue=le.default.createElement(c.ChatInfoDrawerSection,{xstyle:[me.lastSectionRow,Q.uiPadding.horiz0]},Ge,je,He,Be,De,Ve));const qe=le.default.createElement(w.default,{chat:(0,H.unproxy)(Ce)}),ze={surface:"group-info-drawer",extras:{groupSize:ke.participants.length,typeOfGroup:(0,N.groupTypeToWamEnum)((0,N.getGroupTypeFromGroupMetadata)((0,H.unproxy)(ke)))}},Ye=Boolean(null===(n=Ce.groupMetadata)||void 0===n?void 0:n.isIncognitoCag)&&!(null===(a=Ce.groupMetadata)||void 0===a||null===(pe=a.participants)||void 0===pe?void 0:pe.iAmAdmin())?le.default.createElement(E.default,{theme:"transparent",shadow:!1},le.default.createElement(Y.TextParagraph,{xstyle:me.announcementGroupDisclaimer,color:"secondary"},ae.fbt._("Only admins can see all participants in this group",null,{hk:"39jP44"}))):null;return le.default.createElement("div",{role:"complementary",ref:Me,tabIndex:"-1","aria-label":ae.fbt._("Group Info",null,{hk:"3P80cG"})},le.default.createElement(m.default,{ref:t,key:"contact-info-modal",theme:"striped",testid:"chat-info-drawer",tsNavigationData:ze},le.default.createElement(g.DrawerHeader,{title:ae.fbt._("Group info",null,{hk:"2SfTUZ"}),type:g.DRAWER_HEADER_TYPE.SMALL,rtlFixIfOnDarwin:!0,onCancel:()=>{be?be():null==ve||ve.requestDismiss()},testid:"group-info-header"}),le.default.createElement(h.default,null,le.default.createElement("section",{className:(0,re.default)(me.body),"data-testid":"group-info-drawer-body"},le.default.createElement(I.default,{chat:(0,H.unproxy)(Ce),onAdminSetting:e.onAdminSetting,onAddParticipant:Ne,onClickParticipantsCount:()=>{var e;null===(e=Ae.current)||void 0===e||e.scrollIntoView()}}),Le,le.default.createElement(_.default,{chat:(0,H.unproxy)(Ce),showFullDescription:e.showFullGroupDescription}),Re,Fe,We,Ue,undefined,le.default.createElement(P.default,{chat:Ce,groupMetadata:ke}),le.default.createElement(S.GroupInfoParticipantsSection,{ref:Ae,chat:(0,H.unproxy)(Ce),scrollToParticipantList:e.scrollToParticipantList,flatListController:Ie.current,onAddParticipant:Ne,onOpenParticipantSearch:e=>{j.ModalManager.open(le.default.createElement(T.GroupParticipantsFlow,{chat:(0,H.unproxy)(Ce),onVerification:Ee,initialStep:e}),{transition:"modal-flow"})},onGroupInviteLink:e.onGroupInviteLink,onPendingParticipants:e.onPendingParticipants,onVerification:e.onVerification}),Ye,le.default.createElement(O.GroupInfoPendingParticipantsSection,{chat:(0,H.unproxy)(Ce),flatListController:Te.current}),qe))))}var Ee=(0,le.forwardRef)(ge);t.default=Ee},299723:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;let{chat:n}=e;const{participants:a,parentGroup:o}=null!==(t=(0,P.useOptionalModelValues)(n.groupMetadata,["parentGroup","participants"]))&&void 0!==t?t:{},u=(null==a?void 0:a.iAmAdmin())&&(0,l.isCommunityAnnouncementGroup)(n),c=M.default.createElement(O,{chat:n}),s=(0,l.isTerminatedGroup)(n)?null:M.default.createElement(S,{chat:n,showAdditionalAction:!u}),d=!(0,i.communitiesEnabled)()||(0,l.isCommunityAnnouncementGroup)(n)||null==o?null:M.default.createElement(I,{chat:n,parentGroup:o});return M.default.createElement(r.ChatInfoDrawerButtonsSection,null,d,c,s)};var l=n(374660),r=n(464659),o=n(780549),i=n(174834),u=n(493678),c=n(36045),s=n(90989),d=a(n(667845)),f=n(736371),p=n(97858),m=n(114850),h=a(n(338695)),g=n(383296),E=n(453603),b=n(983271),v=n(21698),y=n(548360),M=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=w(t);if(n&&n.has(e))return n.get(e);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(a,r,o):a[r]=e[r]}a.default=e,n&&n.set(e,a);return a}(n(667294)),C=a(n(847116)),k=a(n(524578)),P=n(655241),_=a(n(895851));function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(w=function(e){return e?n:t})(e)}function S(e){let{chat:t,showAdditionalAction:n}=e;return M.default.createElement(c.DrawerButton,{testid:"li-report-spam",color:"danger",icon:M.default.createElement(v.ThumbsDownIcon,null),theme:"chat-info",onClick:()=>{m.ModalManager.open(M.default.createElement(h.default,{isMessage:!1,isGroupChat:!0,showAdditionalActionCheckbox:n,onReport:()=>{(0,g.sendReport)({chat:t,spamFlow:E.SpamFlow.GroupInfoReport}),m.ModalManager.close()},onReportExitClear:()=>{(0,g.sendSpamExitClear)(t,E.SpamFlow.GroupInfoReport),m.ModalManager.close()},onCancel:()=>m.ModalManager.close()}))}},y.fbt._("Report group",null,{hk:"23NLqw"}))}function O(e){const t=()=>{(0,b.openExitAndDeleteGroupModal)(e.chat)},n=(0,P.useModelValues)(e.chat,["isReadOnly"]);let a,r=()=>{var t;const n=null===(t=e.chat.groupMetadata)||void 0===t?void 0:t.getParentGroupChat();null!=n&&(0,l.isCommunityAnnouncementGroup)(e.chat)&&(0,i.communityAnnouncementImprovementM3Enabled)()?m.ModalManager.open(M.default.createElement(f.LeaveCommunityModal,{chat:n})):o.Cmd.deleteOrExitChat(e.chat)};return n.isReadOnly?a=y.fbt._("Delete group",null,{hk:"2MKJYs"}):!(0,l.isCommunityAnnouncementGroup)(n)&&(0,l.isSuspendedGroup)(n)&&(0,p.isGroupSuspendV2Enabled)()?(a=y.fbt._("Exit group and delete",null,{hk:"1Szubg"}),r=t):a=(0,l.isCommunityAnnouncementGroup)(n)&&(0,i.communityAnnouncementImprovementM3Enabled)()?y.fbt._("Exit community",null,{hk:"3KaKZa"}):y.fbt._("Exit group",null,{hk:"3EOkxm"}),M.default.createElement(c.DrawerButton,{testid:"li-delete-group",icon:M.default.createElement(s.ExitIcon,{directional:!0}),color:"danger",theme:"chat-info",onClick:r},a)}function I(e){let{chat:t,parentGroup:n}=e;const a=(0,_.default)(),{groupMetadata:l,isReadOnly:r,id:o,formattedTitle:i}=(0,P.useModelValues)(t,["groupMetadata","isReadOnly","id","formattedTitle"]),f=d.default.get(n.toString()),p=Boolean((0,k.default)(null==f?void 0:f.participants,["bulk_add","bulk_remove"],(()=>null==f?void 0:f.participants.iAmAdmin()))),m=Boolean((0,k.default)(null==l?void 0:l.participants,["bulk_add","bulk_remove"],(()=>null==l?void 0:l.participants.iAmAdmin()))),{joinedSubgroups:h,unjoinedSubgroups:g,subgroupCount:E}=(0,C.default)(f),[b,v]=(0,M.useState)(!1);if(r||null==h||null==g||!p&&!m)return null;return M.default.createElement(c.DrawerButton,{testid:"li-remove-group-from-community",icon:M.default.createElement(s.ExitIcon,{directional:!0}),disabled:b,color:"danger",theme:"chat-info",onClick:()=>{b||a.aborted||((0,u.handleRemoveSubgroup)({parentId:n,currentSubgroupCount:E,removedSubgroupWid:o,removedSubgroupTitle:i,setLoading:v,iAmCommunityAdmin:p}),a.aborted)}},y.fbt._("Remove from community",null,{hk:"3xZmj5"}))}},767140:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.GroupInfoParticipantsSection=void 0;var l=a(n(670983)),r=n(632157),o=n(287461),i=n(414268),u=n(72696),c=a(n(170206)),s=n(374660),d=n(464659),f=a(n(831584)),p=a(n(314810)),m=n(698867),h=n(780549),g=n(474103),E=n(174834),b=n(877171),v=n(103440),y=n(660666),M=n(465113),C=n(675085),k=n(235630),P=n(305521),_=n(581354),w=n(512938),S=n(714574),O=n(503028),I=n(862159),T=a(n(932325)),A=n(972989),N=n(963950),x=n(114850),D=n(33014),R=n(164406),j=n(197988),L=n(507877),B=n(12792),G=a(n(671401)),W=a(n(802211)),F=n(46351),V=a(n(237889)),H=n(163139),U=n(220584),q=n(533426),z=n(392632),Y=a(n(37875)),K=n(459857),X=n(788271),Z=a(n(124928)),Q=n(548360),$=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=le(t);if(n&&n.has(e))return n.get(e);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(a,r,o):a[r]=e[r]}a.default=e,n&&n.set(e,a);return a}(n(667294)),J=(a(n(156720)),a(n(524578))),ee=a(n(969651)),te=a(n(637660)),ne=n(808446),ae=n(655241);function le(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(le=function(e){return e?n:t})(e)}const re={pendingParticipantsIcon:{backgroundColor:"k6px2m13",color:"cwwc04gk"}};function oe(e){let{data:t,participants:n,handleParticipantClick:a,menuEnabled:l,handleParticipantMenu:r,contextMenu:o,active:i,elevatedPushNamesEnabled:u=!1}=e;const{id:c}=t,s=n.get(c);if(!s)throw new w.UnknownDataError(t);const d=s.contact,f=!!o&&Z.default.equals(d.id,o.contactId);return $.default.createElement(p.default,{active:i,contact:d,participant:s,key:s.id.toString(),onClick:a,contextEnabled:()=>l(d),contextMenu:f,onContext:e=>r(e,d),theme:"chat-info",showNotifyName:!0,waitIdle:!0,showStatusRingAroundProfilePhoto:!0,participantCollection:n,elevatedPushNamesEnabled:u})}const ie=(0,$.forwardRef)(((e,t)=>{var n;const a=(0,ae.useModelValues)((0,l.default)(e.chat.groupMetadata,"props.chat.groupMetadata"),["support","size","id","membershipApprovalMode","membershipApprovalRequests","isUnnamed","isLidAddressingMode","participants"]),{membershipApprovalMode:p,membershipApprovalRequests:w}=a,Z=(0,te.default)((()=>new V.default([],(e=>e.id.toString())))),le=(0,l.default)(e.chat.groupMetadata,"props.chat.groupMetadata").participants;let ie=le.toArray();(0,g.hideCagMaskedParticipants)()&&!0!==a.isLidAddressingMode&&(ie=le.filter((e=>{let{id:t}=e;return(0,K.isMeAccount)(t)||!t.isLid()})));const ce=(0,s.getGroupParticipantsCount)(a),se=(0,ee.default)();(0,ne.useListener)(le,"bulk_add bulk_remove reset sort change:isAdmin change:isSuperAdmin",se);const[de,fe]=(0,$.useState)(!0),pe=(0,$.useRef)(),[me,he]=(0,$.useState)(),ge=(0,s.isCommunityAnnouncementGroup)(e.chat);(0,$.useEffect)((()=>{e.scrollToParticipantList&&pe.current&&(0,M.scrollIntoViewIfNeeded)(pe.current,!1)}),[e.scrollToParticipantList]),(0,$.useImperativeHandle)(t,(()=>({scrollIntoView(){var e;null===(e=pe.current)||void 0===e||e.scrollIntoView()}})));const Ee=(0,J.default)(w,["add","remove","reset"],(()=>w.length)),be=(0,X.useShowPastParticipants)(e.chat),ve=(0,$.useMemo)((()=>{let e;const t=[],n=[];ie.forEach((a=>{(0,y.getIsMe)(a.contact)?e=a:a.isAdmin?t.push(a):n.push(a)}));let a=[];return e&&a.push(e),a=a.concat(t,n),ue(ie)&&de&&(a=a.slice(0,d.INFO_DRAWER_MAX_ROWS)),Z.current.init(a.map((e=>e.contact))),a.map((e=>({itemKey:e.id.toString(),id:e.id,height:68})))}),[de,ie]);if(a.isSuspendedOrTerminated())return null;const ye=$.default.createElement(F.SearchIcon,{color:U.SvgColorProp.SECONDARY});let Me,Ce,ke,Pe;if(le.canAdd()&&!a.support){const t=$.default.createElement(W.default,{theme:"compact"},$.default.createElement(i.AddUserIcon,{directional:!0}));Me=$.default.createElement(c.default,{testid:"add-user",image:t,theme:"chat-info",primary:Q.fbt._("Add participant",null,{hk:"48ECfz"}),onClick:e.onAddParticipant,focusable:!0})}if(le.iAmAdmin()&&e.onGroupInviteLink&&!a.support){const t=$.default.createElement(W.default,{theme:"compact"},$.default.createElement(A.LinkIcon,null));Ce=$.default.createElement(c.default,{image:t,theme:"chat-info",primary:Q.fbt._("Invite to group via link",null,{hk:"3vDtFL"}),onClick:e.onGroupInviteLink,focusable:!0})}if(le.iAmAdmin()&&p&&Ee>0&&(0,o.getABPropConfigValue)("group_join_request_m2")&&(ke=$.default.createElement(c.default,{image:$.default.createElement(W.default,{xstyle:re.pendingParticipantsIcon,theme:"compact"},$.default.createElement(B.PendingParticipantsIcon,null)),theme:"chat-info",primary:(0,o.getABPropConfigValue)("group_join_request_m3")?Q.fbt._("Pending requests",null,{hk:"1Q1Qwz"}):Q.fbt._("Pending participants",null,{hk:"3aWcdI"}),primaryDetail:$.default.createElement(q.Tag,{round:!0},Ee),onClick:e.onPendingParticipants,focusable:!0})),ue(ie)&&de){const t=ie.length<=20,n=ie.length-d.INFO_DRAWER_MAX_ROWS;Pe=$.default.createElement(f.default,{numMore:n,onClick:()=>{t?fe(!1):e.onOpenParticipantSearch(O.ParticipantsFlowStep.Participants)},viewAll:!t})}else be&&(Pe=$.default.createElement(N.ListButton,{onClick:()=>{e.onOpenParticipantSearch(O.ParticipantsFlowStep.PastParticipants)},testid:"row-past-participants"},Q.fbt._("View past participants",null,{hk:"fYGd4"})));const _e=e=>{const t=le.get(e.id);return!!t&&(le.canPromote(t)||le.canDemote(t)||le.canRemove(t)||le.canVerifyIdentity(t))},we=(t,n)=>{const a=le.assertGet(n.id);if(!_e(n))return;const l=[];if(le.canPromote(a)){const t=()=>{const t=T.default.t(198,{participant:(0,S.getFormattedName)(a.contact),subject:e.chat.contact.name});x.ModalManager.open($.default.createElement(v.ConfirmPopup,{onOK:()=>{return t=!0,a.isAdmin||(a.contact.pendingAction++,(0,D.promoteParticipants)(e.chat,[a]).finally((()=>{a.contact.pendingAction--}))),void(t&&x.ModalManager.close());var t},okText:T.default.t(423),onCancel:()=>x.ModalManager.close(),cancelText:Q.fbt._("Cancel",null,{hk:"H0gNq"})},$.default.createElement(P.EmojiText,{text:t})))};let n;if(ge){var r;n=Q.fbt._("Make admin",null,{hk:"1cHVQ6"});const t=null===(r=e.chat.groupMetadata)||void 0===r?void 0:r.getParentGroupChat();l.push($.default.createElement(C.DropdownItem,{testid:"mi-grp-promote-community-admin",key:"promote",action:()=>{(0,L.openCommunityParticipantPromoteConfirmation)(t,a,le,a.contact)}},n))}else n=Q.fbt._("Make group admin",null,{hk:"oCC4C"}),l.push($.default.createElement(C.DropdownItem,{testid:"mi-grp-promote-admin",key:"promote",action:t},n))}if(le.canRemove(a)){let t;t=!0===ge&&(0,E.communityAnnouncementImprovementM3Enabled)()?Q.fbt._("Remove from community",null,{hk:"WikVd"}):T.default.t(427),l.push($.default.createElement(C.DropdownItem,{testid:"mi-grp-remove-participant",key:"remove",action:()=>{var t;const l=null===(t=e.chat.groupMetadata)||void 0===t?void 0:t.getParentGroupChat();if(!0===ge&&null!=l&&(0,E.communityAnnouncementImprovementM3Enabled)())return void x.ModalManager.open($.default.createElement(G.default,{contact:n,parentGroupChat:l}));const r=T.default.t(199,{participant:(0,S.getFormattedName)(a.contact),subject:e.chat.contact.name});x.ModalManager.open($.default.createElement(v.ConfirmPopup,{onOK:()=>{return t=!0,a.contact.pendingAction++,(0,D.removeParticipants)(e.chat,[a]).finally((()=>{a.contact.pendingAction--})),void(t&&x.ModalManager.close());var t},okText:T.default.t(531),onCancel:()=>x.ModalManager.close(),cancelText:Q.fbt._("Cancel",null,{hk:"H0gNq"})},$.default.createElement(P.EmojiText,{text:r})))}},t))}if(le.canDemote(a)){const t=()=>{a.isAdmin&&(a.contact.pendingAction++,(0,D.demoteParticipants)(e.chat,[a]).finally((()=>{a.contact.pendingAction--})))},n=Q.fbt._("Dismiss as admin",null,{hk:"2YfmwL"});if(ge){var o;const t=null===(o=e.chat.groupMetadata)||void 0===o?void 0:o.getParentGroupChat();l.push($.default.createElement(C.DropdownItem,{testid:"mi-grp-community-demote",key:"demote-admin",action:()=>(0,j.openCommunityParticipantDemoteConfirmation)(a,t)},n))}else l.push($.default.createElement(C.DropdownItem,{testid:"mi-grp-demote",key:"demote-admin",action:t},n))}if(le.canVerifyIdentity(a)){const t=Q.fbt._("Verify Security Code",null,{hk:"1vTVgt"});l.push($.default.createElement(C.DropdownItem,{testid:"mi-grp-verify-identify",key:"verify-identity",action:()=>{e.onVerification&&e.onVerification(a.contact)}},t))}he({contactId:n.id,menu:l,anchor:t.anchor,event:t.event})},Se=(t,n)=>{const a=(0,s.getOneToOneContactFromGroupContact)(n.id);(0,_.findChat)(a,"groupInfoParticipants").then((t=>{(0,o.getABPropConfigValue)("unified_user_profile_navigation_enabled")?h.Cmd.chatInfoDrawer(t,!1,!1,(0,H.unproxy)(e.chat)):h.Cmd.openChatFromUnread(t).then((e=>{e&&((0,u.btmThreadsLoggingEnabled)()&&b.ComposeBoxActions.addMsgSendingLogAttributes(t,{handleMultiple(){(0,m.handleActivitiesForChatThreadLogging)([{activityType:"groupMembershipReplies",ts:(0,r.unixTime)(),chatId:t.id}])}}),b.ComposeBoxActions.focus(t))}))}))},Oe=(0,k.elevatedPushNamesM2Enabled)(e.chat),Ie=(null===(n=e.chat.groupMetadata)||void 0===n?void 0:n.groupType)===I.GroupType.DEFAULT_ANNOUNCEMENT_GROUP?ce:le.length,Te=Q.fbt._({"*":"Participants list: {group-participants} participants",_1:"Participants list: 1 participant"},[Q.fbt._plural(Ie,"group-participants")],{hk:"3CCjNY"}),Ae=le.length?$.default.createElement(d.ChatInfoDrawerListSection,{ref:pe,titleTestId:"section-participants",testid:"group-info-participants-section",title:Q.fbt._({"*":"{number} participants",_1:"1 participant"},[Q.fbt._plural(Ie,"number")],{hk:"bcYCT"}),titleOnClick:()=>{e.onOpenParticipantSearch(O.ParticipantsFlowStep.Participants)},subtitle:ye},Me,Ce,ke,$.default.createElement(R.NavigableFlatList,{ariaLabel:Te,flatListController:e.flatListController,listData:ve,onRenderItem:e=>$.default.createElement(oe,{active:Z.current,data:e,participants:le,handleParticipantClick:Se,menuEnabled:_e,handleParticipantMenu:we,contextMenu:me,elevatedPushNamesEnabled:Oe}),selection:Z.current,rotateList:!0}),Pe):null,Ne=()=>{he(null)};let xe;return me&&(xe=$.default.createElement(z.UIE,{displayName:"ChatContextMenu",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:Ne},$.default.createElement(Y.default,{contextMenu:me}))),$.default.createElement($.default.Fragment,null,Ae,xe)}));function ue(e){return e.length>d.INFO_DRAWER_MAX_ROWS_IN_COLLAPSED_LIST}t.GroupInfoParticipantsSection=ie,ie.displayName="GroupInfoParticipantsSection"},951688:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.GroupInfoPendingParticipantsSection=function(e){var t,n;const a=(0,r.default)(e.chat.groupMetadata,"props.chat.groupMetadata"),u=(0,r.default)(null===(t=e.chat.groupMetadata)||void 0===t?void 0:t.participants,"props.chat.groupMetadata?.participants"),c=(0,r.default)(null===(n=e.chat.groupMetadata)||void 0===n?void 0:n.pendingParticipants,"props.chat.groupMetadata?.pendingParticipants"),s=c.toArray(),d=(0,_.default)();(0,S.useListener)(u,"change:isAdmin change:isSuperAdmin",d),(0,S.useListener)(c,"add remove reset",d);const[f,p]=(0,k.useState)(T(c)),h=(0,w.default)((()=>new E.default([],(e=>e.id.toString())))),[b,v]=(0,k.useState)();(0,P.default)((0,l.default)((function*(){yield a.queryGroupsV4PendingInvite(),p(T(a.pendingParticipants))})),[a]);const O=(0,k.useMemo)((()=>{let e=s;return T(s)&&f&&(e=e.slice(0,o.INFO_DRAWER_MAX_ROWS)),h.current.init(e.map((e=>e.contact))),e.map((e=>({itemKey:e.id.toString(),id:e.id,height:68})))}),[f,s]);if(a.isSuspendedOrTerminated())return k.default.createElement(k.default.Fragment,null);const A=(e,t,n)=>{const a="click"===t.type?void 0:t.target;v({contactId:n.id,menu:e,anchor:a,event:t.anchor?void 0:t})},N=C.fbt._({"*":"Invited participants list: {group-participants} participants",_1:"Invited participants list: 1 participant"},[C.fbt._plural(c.length,"group-participants")],{hk:"3ebe4q"});let x,D,R;c.length>0&&(x=k.default.createElement(g.NavigableFlatList,{ariaLabel:N,flatListController:e.flatListController,listData:O,onRenderItem:e=>k.default.createElement(I,{active:h.current,data:e,onContextMenu:A,pendingParticipants:c,groupMetadata:a}),selection:h.current,rotateList:!0}));if(T(c)&&f){const e=c.length-o.INFO_DRAWER_MAX_ROWS;D=k.default.createElement(i.default,{numMore:e,onClick:()=>{p(!1)}})}u.iAmAdmin()&&c.length>0&&(R=k.default.createElement(o.ChatInfoDrawerListSection,{titleTestId:"section-participants",title:m.default.t(357,{number:c.length})},x,D));const j=()=>{v(null)};let L;b&&(L=k.default.createElement(y.UIE,{displayName:"ChatContextMenu",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:j},k.default.createElement(M.default,{contextMenu:b})));return k.default.createElement(k.default.Fragment,null,R,L)},t.PendingParticipantItem=I;var l=a(n(348926)),r=a(n(670983)),o=n(464659),i=a(n(831584)),u=a(n(314810)),c=n(103440),s=n(675085),d=n(305521),f=n(512938),p=n(714574),m=a(n(932325)),h=n(114850),g=n(164406),E=a(n(237889)),b=n(625786),v=n(390737),y=n(392632),M=a(n(37875)),C=n(548360),k=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=O(t);if(n&&n.has(e))return n.get(e);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(a,r,o):a[r]=e[r]}a.default=e,n&&n.set(e,a);return a}(n(667294)),P=a(n(802145)),_=a(n(969651)),w=a(n(637660)),S=n(808446);function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(O=function(e){return e?n:t})(e)}function I(e){let{data:t,active:n,pendingParticipants:a,groupMetadata:l,onContextMenu:r}=e;const{id:o}=t,i=a.get(o);if(!i)throw new f.UnknownDataError(t);return k.default.createElement(u.default,{active:n,contact:i.contact,participant:i,key:i.id.toString(),contextEnabled:()=>!1,contextMenu:!0,onContext:e=>(e=>{const t=[k.default.createElement(s.DropdownItem,{testid:"mi-grp-promote-admin",key:"promote",action:()=>{h.ModalManager.open(k.default.createElement(c.ConfirmPopup,{onOK:()=>{h.ModalManager.close(),l.revokeGroupsV4AddInvite([i.id]).then((()=>{v.ToastManager.open(k.default.createElement(b.Toast,{msg:C.fbt._("Invite reset",null,{hk:"MgErr"})}))}))},okText:C.fbt._("Reset link",null,{hk:"2Zb3R4"}),onCancel:()=>h.ModalManager.close(),cancelText:C.fbt._("Cancel",null,{hk:"H0gNq"})},k.default.createElement(d.EmojiText,{text:m.default.t(359,{participant:(0,p.getFormattedName)(i.contact)})})))}},C.fbt._("Revoke invite",null,{hk:"4on28q"}))];r(t,e,i.contact)})(e),theme:"chat-info",showNotifyName:!0,isPendingParticipant:!0,waitIdle:!0,showStatusRingAroundProfilePhoto:!0})}function T(e){return e.length>o.INFO_DRAWER_MAX_ROWS_IN_COLLAPSED_LIST}},453090:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n,a,l;const r=(0,L.useModelValues)(e.chat,["labels"]),o=(0,L.useOptionalModelValues)(e.chat.groupMetadata,["size","creation"]),i=null===(t=e.chat.groupMetadata)||void 0===t?void 0:t.groupType,u=null===(n=e.chat.groupMetadata)||void 0===n?void 0:n.participants,c=(0,R.default)();(0,j.useListener)(u,"bulk_add bulk_remove reset sort change:isAdmin change:isSuperAdmin",c);const s=null!==(a=null==u?void 0:u.length)&&void 0!==a?a:0,d=null!==(l=null==o?void 0:o.size)&&void 0!==l?l:0,f=(null==u?void 0:u.iAmAdmin())?s:d;let g=N.fbt._("Group",null,{hk:"DNiv2"});i===b.GroupType.DEFAULT_ANNOUNCEMENT_GROUP&&(g=N.fbt._("Announcements",null,{hk:"GNIKa"}));const M=N.fbt._({"*":"{number} participants",_1:"1 participant"},[N.fbt._plural(i===b.GroupType.DEFAULT_ANNOUNCEMENT_GROUP?f:s,"number")],{hk:"bcYCT"});return x.default.createElement(m.default,{theme:"padding-large"},x.default.createElement(h.FlexColumn,{align:"center"},x.default.createElement(V,{chat:e.chat,xstyle:F.photo,sendGroupProfilePictureLoggingEvent:(t,n,a)=>{var l,r,o;const i=null===(l=e.chat)||void 0===l||null===(r=l.groupMetadata)||void 0===r?void 0:r.creation,c=new Date(1e3*(null!=i?i:0)),s=new Intl.DateTimeFormat("en",{year:"numeric"}).format(c),d=new Intl.DateTimeFormat("en",{month:"2-digit"}).format(c),p=new Intl.DateTimeFormat("en",{day:"2-digit"}).format(c),m=null!=i?`${s}-${d}-${p}`:"",h=(0,A.numberToPreciseSizeBucket)(f),g=null!==(o=null==u?void 0:u.iAmAdmin())&&void 0!==o&&o;new E.GroupProfilePictureWamEvent({groupCreationDs:m,groupProfileAction:t,preciseGroupSizeBucket:h,isAdmin:g,hasProfilePicture:n,profilePictureType:a}).commit()}}),x.default.createElement(U,{chat:e.chat}),x.default.createElement("div",{"data-testid":"group-info-top-card-subtitle",className:(0,D.default)(F.groupSecondary)},x.default.createElement(p.SelectableSpan,{dir:"auto",selectable:!0},x.default.createElement(I.TextSpan,{size:"16",color:"secondary"},g,(null==o?void 0:o.isSuspendedOrTerminated())?null:x.default.createElement(x.default.Fragment,null,v.default.isRTL()?" - ":" · ",x.default.createElement(T.default,{onClick:e.onClickParticipantsCount},M))))),x.default.createElement(y.default,{labels:r.labels})))};var l=a(n(348926)),r=n(898817),o=n(122583),i=a(n(670983)),u=a(n(229922)),c=n(287461),s=n(374660),d=n(174834),f=n(103440),p=n(306703),m=a(n(969358)),h=n(690495),g=a(n(559719)),E=n(600145),b=n(862159),v=a(n(932325)),y=a(n(344460)),M=W(n(288057)),C=n(114850),k=n(21645),P=n(843337),_=n(588792),w=n(511696),S=n(115948),O=n(470824),I=n(180519),T=a(n(625903)),A=n(802027),N=n(548360),x=W(n(667294)),D=a(n(156720)),R=a(n(969651)),j=n(808446),L=n(655241),B=a(n(895851));function G(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(G=function(e){return e?n:t})(e)}function W(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=G(t);if(n&&n.has(e))return n.get(e);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(a,r,o):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}const F={photo:{marginBottom:"njub1g37"},groupSecondary:{lineHeight:"a4ywakfo",marginTop:"ma4rpf0l",textAlign:"qfejxiq4"}};function V(e){const t=(0,L.useModelValues)(e.chat,["isReadOnly"]),n=(0,L.useModelValues)(e.chat.contact,["id","profilePicThumb"]),a=(0,L.useModelValues)(e.chat.contact.profilePicThumb,["imgFull"]),l=(0,L.useModelValues)((0,i.default)(e.chat.groupMetadata,"props.chat.groupMetadata"),["groupType"]),[c,f]=(0,x.useState)(!1),[p,m]=(0,x.useState)(!1),h=(0,B.default)(),g=l.groupType===b.GroupType.DEFAULT_ANNOUNCEMENT_GROUP,E=(0,d.communitiesEnabled)()&&g?_.PhotoPickerType.DEFAULT_ANNOUNCEMENT_GROUP:_.PhotoPickerType.GROUP,v=t.isReadOnly||!a.canDelete()&&!a.canSet()||(0,s.isSupportGroup)(t)||g||l.isSuspendedOrTerminated();return x.default.createElement("div",{className:(0,D.default)(e.xstyle)},x.default.createElement(w.PhotoPickerLoadable,{key:String(c),type:E,id:n.id,attachToChat:!0,pending:p,startImage:a.imgFull,readOnly:v,onImageSet:(e,t)=>{let n;m(!0),n=e&&t?(0,S.setProfilePic)(a,e,t):(0,S.deleteProfilePic)(a),(0,u.default)(n,h).catch((0,r.catchAbort)((()=>{}))).catch((0,o.filteredCatch)(M.ActionError,(()=>{__LOG__(3)`GroupInfoDrawer: failed to set/delete group image`,f(!c)}))).finally((()=>{m(!1)}))},sendGroupProfilePictureLoggingEvent:e.sendGroupProfilePictureLoggingEvent}))}const H={marginTop:"hymafltn",marginEnd:"jnwc1y2a",marginBottom:"ngycyvoj",marginStart:"svoq16ka"};function U(e){const t=(0,L.useModelValues)(e.chat.contact,["name"]),n=(0,L.useModelValues)((0,i.default)(e.chat.groupMetadata,"props.chat.groupMetadata"),["creation","restrict","support","isUnnamed","participants"]),a=(0,B.default)(),o=function(){var n=(0,l.default)((function*(n){const l=n;l!==t.name&&(yield(0,u.default)((0,O.setGroupSubject)(e.chat,l),a).catch((0,r.catchAbort)((()=>{}))).catch((()=>{__LOG__(3)`group_info_drawer:onSetSubject failed`})))}));return function(){return n.apply(this,arguments)}}(),s=()=>{C.ModalManager.open(x.default.createElement(f.ConfirmPopup,{onOK:()=>C.ModalManager.close(),okText:N.fbt._("OK",null,{hk:"4oTrfy"})},N.fbt._("Only admins can edit this group's info",null,{hk:"1a2ztg"})))};return n.support?x.default.createElement(I.TextHeader,{className:(0,D.default)(H),level:"2",theme:"large"},x.default.createElement(k.GroupName,{chat:e.chat,groupMetadata:n,breakWord:!0})):n.isUnnamed&&(0,c.getABPropConfigValue)("ugr_enabled")?x.default.createElement(g.default,{subject:(0,P.calculateUnnamedGroupParticipantsList)(n).toLocaleString(),onSave:o,editable:n.canSetSubject(),editRestrictionInfo:n.restrict?s:void 0}):x.default.createElement(g.default,{subject:t.name||e.chat.formattedTitle,onSave:o,editable:n.canSetSubject(),editRestrictionInfo:n.restrict?s:void 0})}},795767:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=a(n(670983)),r=n(374660),o=n(780549),i=n(474103),u=a(n(402085)),c=n(675085),s=n(235630),d=n(305521),f=n(581354),p=n(714574),m=a(n(932325)),h=n(114850),g=n(33014),E=n(197988),b=n(507877),v=n(392632),y=a(n(37875)),M=n(459857),C=n(788271),k=n(548360),P=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=S(t);if(n&&n.has(e))return n.get(e);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(a,r,o):a[r]=e[r]}a.default=e,n&&n.set(e,a);return a}(n(667294)),_=(a(n(156720)),a(n(969651))),w=n(808446);function S(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(S=function(e){return e?n:t})(e)}const O={dropdownText:{display:"p357zi0d",alignItems:"gndfcl4n"}};function I(e,t){var n;const{chat:a,onVerification:o,onPastParticipants:f}=e,[S,I]=function(e,t){const[n,a]=(0,P.useState)(null),o=(t,n)=>{t.isAdmin||(t.contact.pendingAction++,(0,g.promoteParticipants)(e,[t]).finally((()=>{t.contact.pendingAction--}))),n&&h.ModalManager.close()},i=(t,n)=>{t.contact.pendingAction++,(0,g.removeParticipants)(e,[t]).finally((()=>{t.contact.pendingAction--})),n&&h.ModalManager.close()},u=t=>{t.isAdmin&&(t.contact.pendingAction++,(0,g.demoteParticipants)(e,[t]).finally((()=>{t.contact.pendingAction--})))},s=()=>{a(null)};let f;n&&(f=P.default.createElement(v.UIE,{displayName:"ChatContextMenu",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:s},P.default.createElement(y.default,{contextMenu:n})));return[f,(n,s)=>{const f=(0,l.default)(e.groupMetadata,"chat.groupMetadata").participants,g=f.assertGet(s.id.toString()),v=[],y=(0,r.isCommunityAnnouncementGroup)(e);if(f.canPromote(g)){let t;if(y){var C;t=k.fbt._("Make admin",null,{hk:"1cHVQ6"});const n=null===(C=e.groupMetadata)||void 0===C?void 0:C.getParentGroupChat();v.push(P.default.createElement(c.DropdownItem,{testid:"mi-grp-promote-community-admin",key:"promote",action:()=>{(0,b.openCommunityParticipantPromoteConfirmation)(n,g,f,g.contact)}},t))}else t=m.default.t(423),v.push(P.default.createElement(c.DropdownItem,{testid:"mi-grp-promote-admin",key:"promote",action:()=>o(g,!1)},t))}if(f.canRemove(g)){const e=m.default.t(427);v.push(P.default.createElement(c.DropdownItem,{testid:"mi-grp-remove-participant",key:"remove",action:()=>i(g,!1)},e))}if(f.canDemote(g)){const t=()=>u(g),n=k.fbt._("Dismiss as admin",null,{hk:"243sNl"});if(y){var _;const t=null===(_=e.groupMetadata)||void 0===_?void 0:_.getParentGroupChat();v.push(P.default.createElement(c.DropdownItem,{testid:"mi-grp-community-demote",key:"demote-admin",action:()=>(0,E.openCommunityParticipantDemoteConfirmation)(g,t)},n))}else v.push(P.default.createElement(c.DropdownItem,{testid:"mi-grp-demote",key:"demote-admin",action:t},n))}if(f.canVerifyIdentity(g)){const e=k.fbt._("Verify Security Code",null,{hk:"1vTVgt"});v.push(P.default.createElement(c.DropdownItem,{testid:"mi-grp-verify-identify",key:"verify-identity",action:()=>{h.ModalManager.close(),null==t||t(g.contact)}},e))}const w=(0,M.isMeAccount)(g.contact.id)?k.fbt._("Message yourself",null,{hk:"LDbjA"}):k.fbt._("Message {author}",[k.fbt._param("author",(0,p.getFormattedShortName)(g.contact))],{hk:"1kM7Cg"});v.push(P.default.createElement(c.DropdownItem,{key:"message author",ariaLabel:w,action:T.bind(null,g.contact.id),addSpacing:!0},P.default.createElement(d.EmojiText,{text:w,xstyle:O.dropdownText})));const S="click"===n.type?void 0:n.target;a({contactId:s.id,menu:v,anchor:S,event:n.anchor?void 0:n})}]}(a,o),A=(0,_.default)(),N=null===(n=a.groupMetadata)||void 0===n?void 0:n.participants;(0,w.useListener)(N,["bulk_add","bulk_remove","reset"],A);const x=(0,C.useShowPastParticipants)(a),D=(0,i.hideCagMaskedParticipants)(),R=null==N?void 0:N.map((e=>e.contact));let j;return x&&(j={text:k.fbt._("View past participants",null,{hk:"fYGd4"}),onClick:f}),P.default.createElement(P.default.Fragment,null,P.default.createElement(u.default,{ref:t,title:k.fbt._("Search Participants",null,{hk:"M6lxB"}),filter:e=>{var t;const n=null==N?void 0:N.get(e.id.toString());return null!=n&&(!D||!1!==(null===(t=a.groupMetadata)||void 0===t?void 0:t.isLidAddressingMode)||((0,M.isMeAccount)(n.id)||!n.id.isLid()))},onCancel:()=>{h.ModalManager.close()},openContextOnClick:!0,contextEnabled:()=>!1,contextMenu:e=>!(0,M.isMeAccount)(e),onContext:I,showNotifyName:!0,elevatedPushNamesEnabled:(0,s.elevatedPushNamesM2Enabled)(a),listenForAdminChange:!0,participantCollection:(0,l.default)(N,"participants"),contacts:R,button:j,showStatusRingAroundProfilePhoto:!0}),S)}const T=e=>{const t=(0,r.getOneToOneContactFromGroupContact)(e);(0,f.findChat)(t,"groupParticipantSearch").then((e=>{h.ModalManager.close(),o.Cmd.openChatFromUnread(e)}))};var A=(0,P.forwardRef)(I);t.default=A},503028:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.GroupParticipantsFlow=function(e){const{chat:t,onVerification:n,initialStep:a}=e,[c,s]=(0,i.useFlow)(a);if(!s.step)return null;let d;switch(s.step){case u.Participants:d=o.default.createElement(l.default,{chat:t,onVerification:n,onPastParticipants:()=>s.push(u.PastParticipants)});break;case u.PastParticipants:{const e=s.stackSize()>1,n=()=>s.pop();d=e?o.default.createElement(r.default,{chat:t,onBack:n}):o.default.createElement(r.default,{chat:t,onClose:n});break}}return o.default.createElement(c,{flow:s},d)},t.ParticipantsFlowStep=void 0;var l=a(n(795767)),r=a(n(795367)),o=a(n(667294)),i=n(839062);const u=n(76672).Mirrored(["Participants","PastParticipants"]);t.ParticipantsFlowStep=u},176809:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{participant:t,elevatedPushNamesEnabled:n=!1}=e,{contact:a}=t,[g,E,b,v,y,M,C]=(0,h.useContactValues)(a.id,[o.getId,o.getShowBusinessCheckmarkAsPrimary,o.getName,o.getPushname,o.getNotifyName,c.getFormattedName,c.getFormattedPhone]),k=m.default.createElement(d.Name,{contact:a,showBusinessCheckmark:E,showLabel:!0,titlify:!0,ellipsify:!0,you:!0,showNotifyName:n,elevatedPushNamesEnabled:n}),P=r.Clock.pastParticipantOnDateAtTime(t.leaveTs,function(e){const t=e.id.equals((0,f.getMeUser)());if(e.leaveReason===s.LeaveReason.Left)return t?p.fbt._("Left",null,{hk:"3R2igg"}):p.fbt._("Left",null,{hk:"3kbdqU"});return t?p.fbt._("Removed",null,{hk:"4vPnHl"}):p.fbt._("Removed",null,{hk:"3LiTU6"})}(t)),_=(0,u.pushNameCanBeUsed)(a)&&n?C:null;return m.default.createElement(l.default,{image:m.default.createElement(i.DetailImage,{id:g}),primary:k,secondary:P,secondaryDetail:_})};var l=a(n(170206)),r=n(63014),o=n(660666),i=n(23641),u=n(235630),c=n(714574),s=n(687352),d=n(21645),f=n(459857),p=n(548360),m=a(n(667294)),h=n(379811)},795367:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(474103),r=n(235630),o=n(753233),i=n(258105),u=n(512938),c=n(690495),s=a(n(176809)),d=a(n(932325)),f=a(n(417696)),p=n(608456),m=a(n(772549)),h=n(676345),g=n(459857),E=n(548360),b=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=M(t);if(n&&n.has(e))return n.get(e);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(a,r,o):a[r]=e[r]}a.default=e,n&&n.set(e,a);return a}(n(667294)),v=(a(n(156720)),a(n(261716))),y=a(n(524578));function M(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(M=function(e){return e?n:t})(e)}const C="HEADER",k="ROW",P="DISCLAIMER";function _(e,t){var n;const{chat:a,onBack:o,onClose:i}=e,u=null===(n=a.groupMetadata)||void 0===n?void 0:n.pastParticipants,[c,s]=(0,v.default)(),m=(0,y.default)(u,["buld_add","bulk_remove","reset"],(()=>{var e;const t=d.default.accentFold(c),n=(0,p.numberSearch)(t),a=null!==(e=null==u?void 0:u.getValidRecords().filter((e=>{const a=!t||e.contact.searchMatch(t,n);return(0,l.hideCagMaskedParticipants)()?((0,g.isMeAccount)(e.id)||!e.id.isLid())&&a:a})))&&void 0!==e?e:[];if(!a.length)return[];const r=[];return r.push({type:C,header:E.fbt._("Past participants",null,{hk:"2k91Dw"}),itemKey:"list_header"}),a.forEach(((e,t)=>r.push({type:k,participant:e,itemKey:`${e.id.toString()}_${t}`}))),r.push({type:P}),r}),[c]);return b.default.createElement(f.default,{ref:t,title:E.fbt._("Search past participants",null,{hk:"1d6pYh"}),data:m,renderItem:e=>b.default.createElement(w,{data:e,elevatedPushNamesEnabled:(0,r.elevatedPushNamesM2Enabled)(a)}),emptyState:b.default.createElement(I,null),onSearch:s,searchPlaceholder:d.default.t(545),onBack:o,onCancel:i})}function w(e){var t;let{data:n,elevatedPushNamesEnabled:a}=e;switch(n.type){case C:return b.default.createElement(m.default,{header:null!==(t=n.header)&&void 0!==t?t:"",uppercase:!1});case k:return b.default.createElement(s.default,{participant:n.participant,elevatedPushNamesEnabled:a});case P:return b.default.createElement(O,null);default:throw new u.UnknownDataError(n)}}const S={row:{height:"graaj7av",backgroundColor:"ihvf49ua"},disclaimer:{fontSize:"f8jlpxt4",color:"pm5hny62"},empty:{fontSize:"enbbiyaj",color:"eruf1vka"}};function O(){return b.default.createElement(c.FlexRow,{xstyle:[S.row,S.disclaimer,h.uiPadding.horiz15],align:"center",justify:"center"},b.default.createElement("span",null,E.fbt._("People who left or were removed in the last 60 days. {=m2}",[E.fbt._implicitParam("=m2",b.default.createElement(o.ExternalLink,{href:(0,i.getHowToExitAndDeleteGroupsFaq)()},E.fbt._("Learn More",null,{hk:"44tT41"})))],{hk:"gdXOy"})))}function I(){return b.default.createElement(b.default.Fragment,null,b.default.createElement(m.default,{header:E.fbt._("Past participants",null,{hk:"2k91Dw"}),uppercase:!1}),b.default.createElement(c.FlexRow,{xstyle:[S.row,S.empty],align:"center",justify:"center"},b.default.createElement("span",null,E.fbt._("No results found",null,{hk:"1Wo2fc"}))),b.default.createElement(O,null))}var T=(0,b.forwardRef)(_);t.default=T},483447:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onClick:t,spaced:n}=e,a=c.default.createElement(i.TextSpan,{theme:"title"},u.fbt._("Security",null,{hk:"2BYJDI"})),s=c.default.createElement(i.TextDiv,{theme:"muted"},u.fbt._("Click to learn how messages and calls are secured.",null,{hk:"1UxhjE"})),d=c.default.createElement(r.LockIcon,{color:o.SvgColorProp.SECONDARY,height:20});return c.default.createElement(l.default,{icon:d,onClick:t,title:a,secondaryTitle:s,spaced:n})};var l=a(n(306007)),r=n(341462),o=n(220584),i=n(180519),u=n(548360),c=a(n(667294))},788271:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.useShowPastParticipants=function(e){const t=(0,o.useOptionalModelValues)(e.groupMetadata,["participants","pastParticipants","groupType"]),n=null==t?void 0:t.pastParticipants;if(!(0,r.default)(n,["bulk_add","bulk_remove","reset"],(()=>Boolean(null==n?void 0:n.getValidRecords().length))))return!1;if((null==t?void 0:t.groupType)===l.GroupType.DEFAULT_ANNOUNCEMENT_GROUP)return Boolean(null==t?void 0:t.participants.iAmAdmin());return!0};var l=n(862159),r=a(n(524578)),o=n(655241)},883537:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,s.useModelValues)(e.mediaData,["mediaStage","renderableUrl"]);return c.default.createElement(r.default,{mediaData:t,placeholderRenderer:p},(t=>c.default.createElement(f,{url:t,msg:e.msg})))};var l=a(n(932325)),r=a(n(674465)),o=n(782173),i=a(n(936027)),u=a(n(261294)),c=a(n(667294)),s=n(655241);const d=e=>{e.stopPropagation()};function f(e){let{url:t,msg:n}=e;return c.default.createElement(o.AudioTag,{url:t,className:i.default.mediaViewerAudio,onClick:d,autoPlay:!0,msg:n,controls:!0,testId:"media-audio"},l.default.t(141))}function p(){return c.default.createElement("div",{className:(0,u.default)(i.default.imageAudio,i.default.mediaViewerPlaceholder),onClick:d})}},548290:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const{msg:n,onHightlightCloseEnd:a,msgIndexInAlbum:l,onViewOnceInfoClick:r,onClose:i}=e,c=(0,be.useRef)(null),[s,d,f,p,m,g,E,v,M,k,P,w,S,O,T]=(0,Ce.useMsgValues)(e.msg.id,[B.getId,B.getStar,B.getIsGroupMsg,B.getType,B.getIsGif,B.getIsViewOnce,B.getSender,_.getSenderObj,B.getT,B.getIsSentByMe,B.getIsStickerMsg,B.getBroadcastId,_.getIsUnsentMedia,B.getIsKept,B.getMessageSecret]),A=(0,F.useWAWebLocalizedViewCount)(n.id),x=(0,_.getChat)(n),R=(0,Me.useModelValues)(e.mediaData,["filehash","mediaStage","renderableUrl"]),[j,G]=(0,be.useState)(null),[W,H]=(0,be.useState)(null),U=(0,be.useRef)(null),q=()=>{G(null)},z=()=>{H(null)},X=(0,ke.default)((e=>{(0,K.canReactToMessage)(e)&&H({dirY:b.DirY.BOTTOM,dirX:b.DirX.CENTER,type:b.MenuType.ReactionPicker,menu:be.default.createElement(Y.ReactionsPanel,{msgId:e.id.toString(),onSelection:t=>{(0,te.sendReactionToMsg)(e,t).catch((()=>{})),z()}}),flipOnRTL:!0,anchor:U.current})}));(0,ye.useListener)(c.current,"animationend",(()=>{a()}));let Z=n.displayName({showShortName:!0,withPushName:!0});f&&(Z+=" @ "+x.title());const Q=be.default.createElement(he.XViewerIcon,{className:e.isHighlightClose?ge.default.highlightClose:null,containerRef:c});let $;j?$=be.default.createElement(ue.UIE,{displayName:"MsgReaction",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:q},be.default.createElement(ce.default,{contextMenu:j})):W&&($=be.default.createElement(ue.UIE,{displayName:"MsgReactionPicker",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:z},be.default.createElement(ce.default,{contextMenu:W})));const J=(0,V.isNewsletterViewCountEnabled)(null==x||null===(t=x.newsletterMetadata)||void 0===t?void 0:t.membershipType)&&null!=A?be.default.createElement(C.FlexRow,{className:ge.default.viewCount},u.Clock.relativeDateAndTimeStr(M),be.default.createElement(D.MetaBullet,null),be.default.createElement("span",null,A)):be.default.createElement(be.default.Fragment,null,u.Clock.relativeDateAndTimeStr(M));return be.default.createElement("div",{className:ge.default.mediaPanelHeader},be.default.createElement("div",{className:ge.default.info},be.default.createElement(o.default,{idle:!0,image:be.default.createElement(h.DetailImage,{id:E,size:40}),primary:be.default.createElement(y.EmojiText,{ellipsify:!0,text:Z}),secondary:J,theme:"media"})),be.default.createElement("div",{className:ge.default.mediaPanelTools},be.default.createElement(N.MenuBar,{key:"media-panel-header",theme:"strong"},be.default.createElement(Ve,{isMediaDownloadable:()=>!g&&(!!(0,L.canDownloadMsg)(n)&&(!!R.renderableUrl||R.mediaStage===I.MEDIA_DATA_STAGE.RESOLVED)),msg:n,msgIndexInAlbum:l,onClose:i,onViewOnceInfoClick:r,openReactionTray:()=>{if(!(0,K.canReactToMessage)(n))return;const e={dirY:b.DirY.BOTTOM,dirX:b.DirX.CENTER,type:b.MenuType.ReactionSendTray,menu:be.default.createElement(ae.SendReactionsTrayContainer,{msg:n,selectedCallback:e=>{e!==ne.MORE_REACTIONS?(0,te.sendReactionToMsg)(n,e).catch((()=>{})):self.setTimeout((()=>{X(n)}),150),q()}}),flipOnRTL:!1,anchor:U.current};G(e)},sendReactionButtonRef:U}),be.default.createElement(N.MenuBarItem,{testid:"btn-close",icon:Q,title:Ee.fbt._("Close",null,{hk:"19Jpec"}),onClick:e.onClose}))),$)};var l=n(8304),r=n(268167),o=a(n(170206)),i=n(713105),u=n(63014),c=n(780549),s=n(385798),d=n(877171),f=n(103440),p=n(419e3),m=a(n(804418)),h=n(23641),g=n(126333),E=n(900316),b=n(664149),v=n(675085),y=n(305521),M=n(821130),C=n(690495),k=n(525110),P=n(361483),_=n(163755),w=n(501532),S=n(328150),O=a(n(932325)),I=n(172259),T=n(69315),A=a(n(266466)),N=n(526795),x=n(784424),D=n(789955),R=n(97858),j=n(114850),L=n(939716),B=n(787742),G=n(722119),W=n(373070),F=n(905797),V=n(73225),H=n(352740),U=n(990625),q=n(533494),z=n(247442),Y=n(400874),K=n(962647),X=n(604668),Z=a(n(313014)),Q=a(n(467201)),$=n(774401),J=a(n(774396)),ee=n(923743),te=n(594149),ne=n(948101),ae=n(708127),le=n(383296),re=n(453603),oe=n(995946),ie=n(163139),ue=n(392632),ce=a(n(37875)),se=n(220279),de=n(677658),fe=n(241572),pe=n(923655),me=n(130756),he=n(356722),ge=a(n(423359)),Ee=n(548360),be=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=Pe(t);if(n&&n.has(e))return n.get(e);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(a,r,o):a[r]=e[r]}a.default=e,n&&n.set(e,a);return a}(n(667294)),ve=a(n(135179)),ye=n(808446),Me=n(655241),Ce=n(871210),ke=a(n(17533));function Pe(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(Pe=function(e){return e?n:t})(e)}const _e=n(76672).Mirrored(["MenuBar","Dropdown"]);function we(e){const t=(0,_.getChat)(e);t.composeQuotedMsg=e,d.ComposeBoxActions.focus(t)}function Se(e){return Ee.fbt._("Report {contact_name}",[Ee.fbt._param("contact_name",e.displayName())],{hk:"3Dqyjo"})}function Oe(e){let{isMediaDownloadable:t,msg:n,onClose:a,openReactionTray:l,sendReactionButtonRef:r}=e;return be.default.createElement(be.default.Fragment,null,(0,G.canReplyMsg)(n)?be.default.createElement(Ae,{msg:n,onClose:a}):null,(0,L.canStarMsg)(n)?be.default.createElement(je,{msg:n}):null,n.canShowKeepOrUnkeepOption()?be.default.createElement(Re,{msg:n}):null,(0,L.canPinMsg)(n)?be.default.createElement(Le,{msg:n}):null,(0,K.canReactToMessage)(n)?be.default.createElement(De,{msg:n,openReactionTray:l,sendReactionButtonRef:r}):null,be.default.createElement(Ne,{msg:n,onClose:a}),(0,L.canForwardMsg)(n)?be.default.createElement(Be,{msg:n}):null,be.default.createElement(He,{isMediaDownloadable:t,isAlbumMedia:!0,msg:n,onClose:a}))}function Ie(e){let{isMediaDownloadable:t,msg:n,onClose:a,openReactionTray:l,sendReactionButtonRef:r}=e;return be.default.createElement(be.default.Fragment,null,(0,B.getIsStickerMsg)(n)?null:be.default.createElement(Te,{msg:n,type:_e.MenuBar,onClose:a}),(0,B.getIsStickerMsg)(n)?be.default.createElement(Ae,{msg:n,onClose:a}):null,(0,L.canStarMsg)(n)?be.default.createElement(je,{msg:n}):null,(0,L.canPinMsg)(n)?be.default.createElement(Le,{msg:n}):null,n.canShowKeepOrUnkeepOption()?be.default.createElement(Re,{msg:n}):null,(0,B.getIsStickerMsg)(n)?be.default.createElement(Ne,{msg:n,onClose:a}):null,(0,K.canReactToMessage)(n)?be.default.createElement(De,{msg:n,openReactionTray:l,sendReactionButtonRef:r}):null,(0,L.canForwardMsg)(n)?be.default.createElement(Be,{msg:n}):null,(0,B.getIsStickerMsg)(n)?null:be.default.createElement(xe,{isMediaDownloadable:t,msg:n,type:_e.MenuBar}),(0,L.canReportMsg)(n)&&(0,R.messageLevelReportingEnabled)()?be.default.createElement(He,{isMediaDownloadable:t,isAlbumMedia:!1,msg:n,onClose:a}):null)}function Te(e){let{msg:t,type:n,onClose:a}=e;const l=e=>{e.stopPropagation(),a(),E.DrawerManager.existsDrawerRight((e=>{e&&2===s.Column.column&&E.DrawerManager.closeDrawerRight()}));const n=(0,i.getSearchContext)((0,_.getChat)(t),(0,ie.unproxy)(t));c.Cmd.openChatAt((0,_.getChat)(t),n).then((e=>{e&&d.ComposeBoxActions.focus((0,_.getChat)(t))}))};return n===_e.Dropdown?be.default.createElement(v.DropdownItem,{action:l},Ee.fbt._("Go to message",null,{hk:"B1anG"})):be.default.createElement(N.MenuBarItem,{icon:be.default.createElement(r.BubbleIcon,null),title:Ee.fbt._("Go to message",null,{hk:"B1anG"}),onClick:l})}function Ae(e){let{msg:t,onClose:n}=e;return be.default.createElement(N.MenuBarItem,{icon:be.default.createElement(X.ReplyIcon,null),title:Ee.fbt._("Reply",null,{hk:"1C7DPa"}),onClick:()=>{n(),(0,l.delayMs)(T.CLOSE_ANIMATION_DURATION).then(we.bind(null,(0,ie.unproxy)(t)))}})}function Ne(e){let{msg:t,onClose:n}=e;return be.default.createElement(N.MenuBarItem,{icon:be.default.createElement(p.DeleteIcon,null),title:Ee.fbt._("Delete",null,{hk:"2KhPUX"}),onClick:()=>{j.ModalManager.open(be.default.createElement(m.default,{chat:(0,_.getChat)(t),msgList:[(0,ie.unproxy)(t)],onDelete:n})),$.UiRevokeActionHelper.startSession(),$.UiRevokeActionHelper.messageSelected()}})}function xe(e){let{msg:t,type:n,isMediaDownloadable:a}=e;const l=e=>{e.stopPropagation(),M.FileSaver.initDownload((0,ie.unproxy)(t))};return a()?n===_e.Dropdown?be.default.createElement(v.DropdownItem,{action:l,disabled:!a()},Ee.fbt._("Download",null,{hk:"1g5Jix"})):be.default.createElement(N.MenuBarItem,{icon:be.default.createElement(g.DownloadIcon,null),title:Ee.fbt._("Download",null,{hk:"1g5Jix"}),disabled:!a(),onClick:l}):null}function De(e){let{msg:t,openReactionTray:n,sendReactionButtonRef:a}=e;return t.type===W.MSG_TYPE.STICKER?null:be.default.createElement(N.MenuBarItem,{testid:"reaction-entry-point",icon:be.default.createElement(z.ReactionsMediaIcon,{containerRef:a,width:20}),title:Ee.fbt._("React",null,{hk:"1mI4Nl"}),onClick:()=>{n()}})}const Re=e=>{let t,n,a,{msg:l}=e;const r=e=>{e.stopPropagation(),(0,w.runKeepInChatUX)((0,ie.unproxy)(l),me.KIC_ENTRY_POINT_TYPE.MEDIA)},o=e=>{e.stopPropagation(),(0,w.runUndoKeepInChatUX)((0,ie.unproxy)(l),me.KIC_ENTRY_POINT_TYPE.MEDIA)};if((0,B.getIsKept)(l)&&l.canShowUnkeepOption())t=be.default.createElement(se.UndoKeepInChatMediaIcon,null),n=o,a=Ee.fbt._("Unkeep",null,{hk:"1eGZng"});else{if((0,B.getIsKept)(l)||!l.canShowKeepOption())return null;t=be.default.createElement(S.KeepInChatMediaIcon,null),n=r,a=Ee.fbt._("Keep",null,{hk:"1a48ae"})}return be.default.createElement(N.MenuBarItem,{key:t,icon:t,title:a,onClick:n})};function je(e){let t,n,a,{msg:l}=e;return l.star?(t=e=>{e.stopPropagation(),c.Cmd.sendUnstarMsgs((0,_.getChat)(l),[(0,ie.unproxy)(l)])},n=be.default.createElement(fe.UnstarBtnIcon,null),a=O.default.t(607)):(t=e=>{e.stopPropagation(),c.Cmd.sendStarMsgs((0,_.getChat)(l),[(0,ie.unproxy)(l)])},n=be.default.createElement(oe.StarBtnIcon,null),a=O.default.t(585)),be.default.createElement(N.MenuBarItem,{key:a,icon:n,title:a,onClick:t})}function Le(e){let t,n,a,{msg:l}=e;return(0,ve.default)(l.id)?(t=e=>{e.stopPropagation(),(0,ee.sendPinInChatMsg)(l,q.Message$PinInChatMessage$Type.UNPIN_FOR_ALL).catch((e=>{__LOG__(4,void 0,new Error)`Error while unpinning a message: ${e}`}))},n=be.default.createElement(de.UnpinnedIcon,null),a=Ee.fbt._("Unpin",null,{hk:"3oWx14"})):(t=e=>{e.stopPropagation(),j.ModalManager.open(be.default.createElement(H.PinMessageModal,{msg:l}))},n=be.default.createElement(U.Pinned3Icon,null),a=Ee.fbt._("Pin",null,{hk:"23jUX3"})),be.default.createElement(N.MenuBarItem,{key:a,icon:n,title:a,onClick:t})}function Be(e){let{msg:t}=e;return be.default.createElement(N.MenuBarItem,{icon:be.default.createElement(k.ForwardIcon,null),title:O.default.t(311),onClick:e=>{e.stopPropagation(),(0,_.getIsUnsentMedia)(t)?j.ModalManager.open(be.default.createElement(f.ConfirmPopup,{title:O.default.t(301),onOK:()=>j.ModalManager.close(),okText:Ee.fbt._("OK",null,{hk:"4oTrfy"})},O.default.t(298))):j.ModalManager.open(be.default.createElement(P.ForwardMessageModalLoadable,{msgs:[(0,ie.unproxy)(t)],onClose:()=>j.ModalManager.close()}),{transition:"modal-flow"})}})}function Ge(e){let{msg:t}=e;return be.default.createElement(v.DropdownItem,{testid:"mi-msg-reply",action:()=>{(0,Z.default)(t)}},Ee.fbt._("Reply privately",null,{hk:"1XQeK2"}))}function We(e){let{msg:t}=e;const n=e=>{e?(0,le.sendMessageReportBlock)(t,re.SpamFlow.MediaViewer):(0,le.sendMessageReport)(t,re.SpamFlow.MediaViewer),j.ModalManager.close()};return be.default.createElement(v.DropdownItem,{action:()=>{j.ModalManager.open(be.default.createElement(A.default,{isBusiness:t.senderObj.isBusiness,isGroup:(0,_.getChat)(t).isGroup,onReport:n,onCancel:()=>j.ModalManager.close(),title:Se(t)}))}},Se(t))}function Fe(e){let{msg:t,onClose:n}=e;return be.default.createElement(v.DropdownItem,{action:()=>{n(),(0,l.delayMs)(T.CLOSE_ANIMATION_DURATION+250).then(c.Cmd.msgInfoDrawer.bind(c.Cmd,(0,ie.unproxy)(t)))}},O.default.t(435))}function Ve(e){let{isMediaDownloadable:t,msg:n,msgIndexInAlbum:a,onClose:l,onViewOnceInfoClick:r,openReactionTray:o,sendReactionButtonRef:i}=e;return n.isViewOnce?be.default.createElement(Ue,{isMediaDownloadable:t,msg:n,onClose:l,onViewOnceInfoClick:r}):a>=0?be.default.createElement(Oe,{isMediaDownloadable:t,msg:n,onClose:l,openReactionTray:o,sendReactionButtonRef:i}):be.default.createElement(Ie,{isMediaDownloadable:t,msg:n,onClose:l,openReactionTray:o,sendReactionButtonRef:i})}function He(e){let{isMediaDownloadable:t,isAlbumMedia:n,msg:a,onClose:l}=e;const r=[],o=(0,_.getChat)(a);((0,G.canPrivateReply)(a)||(0,G.canPrivateReplyInRestrictedGrp)(a))&&r.push(be.default.createElement(Ge,{key:"private_reply",msg:a})),n&&((0,B.getIsSentByMe)(a)&&r.push(be.default.createElement(Fe,{key:"dropdownMsgInfo",msg:a,onClose:l})),r.push(be.default.createElement(Te,{key:"dropdownGoToMsg",msg:a,type:_e.Dropdown,onClose:l}),be.default.createElement(xe,{key:"dropdownDownload",isMediaDownloadable:t,msg:a,type:_e.Dropdown})));const i=!o.isNewsletter&&(a.isViewOnce||(0,L.canReportMsg)(a)&&(0,R.messageLevelReportingEnabled)());return o.isNewsletter&&(0,L.canReportMsg)(a)&&(0,V.isNewsletterReportingEnabled)()?r.push(be.default.createElement(Q.default,{key:"reportSpam",msg:a})):i&&r.push(be.default.createElement(We,{key:"reportSpam",msg:a})),(0,L.canReportToAdmin)(a)&&r.push(be.default.createElement(J.default,{key:"report_to_admin",msg:a})),be.default.createElement(N.MenuBarItem,{icon:be.default.createElement(x.MenuIcon,null),title:O.default.t(430)},be.default.createElement(b.Dropdown,{type:b.MenuType.DropdownMenu,flipOnRTL:!0,dirX:b.DirX.LEFT},r))}function Ue(e){let{isMediaDownloadable:t,msg:n,onClose:a,onViewOnceInfoClick:l}=e;return be.default.createElement(be.default.Fragment,null,be.default.createElement(N.MenuBarItem,{icon:be.default.createElement(pe.ViewOnceIcon,{className:ge.default.voIcon}),title:Ee.fbt._("View once info",null,{hk:"47XkZ4"}),onClick:l}),be.default.createElement(He,{isMediaDownloadable:t,isAlbumMedia:!1,msg:n,onClose:a}))}},777361:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=a(n(371125)),r=n(690495),o=a(n(488922)),i=a(n(674465)),u=a(n(996513)),c=a(n(708126)),s=n(438543),d=a(n(529727)),f=n(164832),p=n(130756),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(a,r,o):a[r]=e[r]}a.default=e,n&&n.set(e,a);return a}(n(667294)),h=a(n(156720)),g=a(n(38085)),E=n(655241);function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}const v={container:{width:"ln8gz9je",height:"ppled2lx"},stickerContainer:{maxWidth:"mx6rw3sv",maxHeight:"trnfqnf9",marginBottom:"r2u2pyhj",zIndex:"thghmljt"}},y=(e,t)=>{const{msg:n}=e,a=(0,E.useModelValues)(e.mediaData,["encFilehash","directPath","filehash","mediaKey","mediaKeyTimestamp","mediaStage","mimetype","fullWidth","fullHeight","isFirstParty","stickerPackId","stickerPackName","stickerPackPublisher"]),b=(0,m.useRef)(null),y=(0,g.default)(t,b),M=e=>{var t;null===(t=b.current)||void 0===t||t.onClick(e)},C=a.isFirstParty?m.default.createElement(l.default,{stickerPackId:a.stickerPackId,onStickerPackView:e.onStickerPackView,stickerPackViewDelay:e.stickerPackViewDelay,sticker:new f.StickerModel({id:a.filehash,mimetype:a.mimetype,width:a.fullWidth,height:a.fullHeight,filehash:a.filehash,encFilehash:a.encFilehash,directPath:a.directPath,mediaKey:a.mediaKey,mediaKeyTimestamp:a.mediaKeyTimestamp})}):m.default.createElement(s.StickerDetailsStickerPackInfo,{name:a.stickerPackName,publisher:a.stickerPackPublisher,theme:s.Theme.MediaViewer,sticker:new f.StickerModel({id:a.filehash,mimetype:a.mimetype,width:a.fullWidth,height:a.fullHeight,filehash:a.filehash,encFilehash:a.encFilehash,directPath:a.directPath,mediaKey:a.mediaKey,mediaKeyTimestamp:a.mediaKeyTimestamp})});return m.default.createElement(r.FlexColumn,{align:"center",justify:"center",xstyle:v.container},m.default.createElement("div",{className:(0,h.default)(v.container,v.stickerContainer),"data-testid":"media-sticker"},m.default.createElement(c.default,{ref:y,width:a.fullWidth,height:a.fullHeight,onZoomIn:e.onImgZoomIn,msg:n},m.default.createElement(i.default,{mediaData:a,placeholderRenderer:()=>m.default.createElement(d.default,{size:376}),downloadMedia:()=>null==n?void 0:n.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:p.WEBC_RMR_REASON_CODE.MEDIA_VIEWER,isUserInitiated:!1})},(t=>m.default.createElement(o.default,{className:(0,h.default)(u.default.content),onClick:M,src:t,onLoad:e.onLoad}))))),C)};var M=(0,m.forwardRef)(y);t.default=M},177046:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=a(n(66985)),r=a(n(49677)),o=a(n(932325)),i=n(172259),u=a(n(996513)),c=a(n(821384)),s=n(728),d=n(31900),f=n(277037),p=n(541345),m=n(244186),h=n(962647),g=a(n(439114)),E=n(130756),b=n(113189),v=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=C(t);if(n&&n.has(e))return n.get(e);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(a,r,o):a[r]=e[r]}a.default=e,n&&n.set(e,a);return a}(n(667294)),y=a(n(156720)),M=n(655241);function C(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(C=function(e){return e?n:t})(e)}function k(e,t){var n;const{autoPlay:a,msg:C,onLoad:k,onClose:P,onLoadedData:w,startTime:S=0}=e,O=(0,M.useModelValues)(e.mediaData,["mediaStage","fullWidth","fullHeight","isGif","isViewOnce","preview","renderableUrl","streamable"]),[I,T]=(0,v.useState)(!1),[A,N]=(0,v.useState)(!0),x=(0,v.useRef)(),D=(0,v.useMemo)((()=>(O.mediaStage===i.MEDIA_DATA_STAGE.RESOLVED||O.streamable&&O.isStreamable())&&(0,b.isNonZeroNumber)(O.fullWidth)&&(0,b.isNonZeroNumber)(O.fullHeight)?function(e){if(e.isGif){const t=330;return e.fullWidth>=t?{width:e.fullWidth,height:e.fullHeight}:{width:t,height:e.fullHeight*t/e.fullWidth}}if(e.fullWidth>=d.MIN_WIDTH)return{width:e.fullWidth,height:e.fullHeight};return{width:d.MIN_WIDTH,height:e.fullHeight}}(O):{width:0,height:0}),[O]);(0,v.useEffect)((()=>{if(!O.isStreamable())return C.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:E.WEBC_RMR_REASON_CODE.MEDIA_VIEWER,isUserInitiated:!0}),()=>{C.mediaObject&&C.cancelDownload()}}),[]);const R=e=>{T(e)};(0,v.useImperativeHandle)(t,(()=>({getContainerElement:()=>x.current,closingMedia(){N(!1)}})));const j=O.isGif;let L=O.mediaStage===i.MEDIA_DATA_STAGE.RESOLVED||O.streamable&&O.isStreamable();L=L||C.isForcingRMR();let B=null;const G=m.ReactionBubbleType.MEDIA_ITEM;if(C&&(0,h.shouldShowReactionBubble)(C,G)&&(B=v.default.createElement(p.ReactionBubbleContainer,{msgIds:[C.id.toString()],reactionBubbleType:G,reactionBubbleVisible:A})),L){const e=o.default.t(628);let t,n;return!I&&(null==C?void 0:C.interactiveAnnotations)&&C.interactiveAnnotations.length>0&&(t=v.default.createElement(l.default,{annotations:C.interactiveAnnotations})),n=j?v.default.createElement("div",{className:(0,y.default)(u.default.content),ref:x,"data-testid":"media-gif"},v.default.createElement(g.default,{src:O.renderableUrl,onClick:_,autoPlay:!0,loop:!0,onLoadedData:w},e),t):v.default.createElement("div",{ref:x,className:(0,y.default)(u.default.content),onClick:_,"data-testid":"media-video"},v.default.createElement(f.WrappedMsgVideoPlayer,{msg:C,mediaData:O,startTime:S,onClose:P,onError:()=>{},onFullscreenToggle:R,autoPlay:a,type:s.PLAYER_TYPE.MEDIA_VIEWER,overlays:t,noPip:C.isViewOnce,onLoadedData:w})),v.default.createElement(c.default,{type:"scaleDown",position:"relative",objectPosition:"relative",size:D,onObjectLoad:k},n,B)}return v.default.createElement(c.default,{type:"scaleDown",position:"relative",objectPosition:"relative",size:{width:O.fullWidth,height:O.fullHeight}},v.default.createElement(r.default,{altText:null!==(n=C.caption)&&void 0!==n?n:"",mediaData:O}),B)}var P=(0,v.forwardRef)(k);function _(e){e.stopPropagation()}t.default=P},933147:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{msg:t,onImageLoad:n,isAnimatingIn:a,onImgZoomIn:r,onExitAnimation:I,onBack:U}=e,[q,Y,X,Z,Q,$,J,ee,te]=(0,W.useMsgValues)(e.msg.id,[_.getId,_.getStar,s.getIsUnsentMedia,_.getIsViewOnce,_.getIsStickerMsg,_.getCaption,_.getInteractiveAnnotations,_.getType,_.getMessageSecret]),ne=(0,s.getChat)(t),ae=(0,G.useModelValues)(e.mediaData,["mediaStage","type","isGif"]),le=(0,V.default)(a),re=(0,B.useRef)(null),oe=(0,B.useRef)(null),ie=(0,B.useRef)(null),ue=(0,B.useRef)(null),ce=(0,B.useRef)(),se=(0,B.useRef)(!1),de=(0,B.useRef)(!1),fe=(0,B.useRef)(!1),[pe,me]=(0,F.default)(O.NUX.EPHEMERAL_VIEW_ONCE_RECEIVER),he=Z&&pe,[ge]=(0,B.useState)((()=>ae.mediaStage===M.MEDIA_DATA_STAGE.RESOLVED&&e.isAnimatingIn&&e.getZoomNode?e.getZoomNode(q):null)),[Ee,be]=(0,B.useState)(!1),[ve,ye]=(0,B.useState)(!1),[Me,Ce]=(0,B.useState)(!e.isAnimatingIn),[ke,Pe]=(0,B.useState)(!1),[_e,we]=(0,B.useState)(!1),Se=()=>{const e=B.default.createElement(D.default,{isPhoto:ae.type===g.default.TYPE.IMAGE,onOkClick:()=>{me(),P.ModalManager.close()}});P.ModalManager.open(e)},Oe=(0,H.default)(((e,t)=>{if(ve)return;const n=re.current;if(!n)return;const a=n.getInsideContainer();if(!(a&&a instanceof HTMLElement))return;const l=n.getOutsideContainer();if(!(l&&l instanceof HTMLElement))return;const{translateX:r,translateY:o}=n.getTranslatePosition(l,e,t);(0,x.default)(a,"stop"),(0,x.default)(a,{translateX:r,translateY:o,scale:C.ZOOM_IN_FACTOR},{duration:0})}));(0,B.useEffect)((()=>(__LOG__(2)`MediaViewerModal: Opened`,he&&Se(),u.default.focus(ue.current),()=>{__LOG__(2)`MediaViewerModal: Closed`,Oe.cancel()})),[]);const Ie=()=>{Z&&(0,m.canMarkPlayed)(t)&&(0,m.markPlayed)(t)},Te=e=>{Ie(),n&&n();const t=ge,l=e.target;t&&l&&a&&l instanceof HTMLElement&&(fe.current||(fe.current=!0,((e,t)=>{var n;const a=t.getBoundingClientRect(),l=e.getBoundingClientRect();let r=l.top-a.top,o=l.left-a.left;const i=e.clientWidth/t.clientWidth;r-=(t.clientHeight-e.clientHeight)/2,o-=(t.clientWidth-e.clientWidth)/2,(0,x.default)(t,{opacity:[1,0],translateX:[0,o],translateY:[0,r],scale:[1,i]},{duration:C.ANIMATION_DURATION,easing:[.1,.82,.25,1]});const u=null===(n=ie.current)||void 0===n?void 0:n.getElement();u&&(0,x.default)(u,{opacity:[1,0]},{duration:C.ANIMATION_DURATION})})(t,l)))},Ae=()=>{var t;if(se.current)return;se.current=!0,(0,l.isFunction)(I)&&I();const n=e.getZoomNode&&e.getZoomNode(q);if(!n)return U();let a;var r;if([g.default.TYPE.IMAGE,g.default.TYPE.STICKER].includes(ae.type)&&re.current)a=re.current.getInsideContainer(),null===(r=re.current)||void 0===r||r.closingMediaZoomable();else if(ae.isGif&&oe.current){var o;a=oe.current.getContainerElement(),null===(o=oe.current)||void 0===o||o.closingMedia()}if(!a)return U();const i=a,u=a.getBoundingClientRect(),c=n.getBoundingClientRect();let s=c.top-u.top,d=c.left-u.left;const f=n.clientWidth/i.clientWidth;s-=(i.clientHeight-n.clientHeight)/2,d-=(i.clientWidth-n.clientWidth)/2,(0,x.default)(a,{translateX:[d,0],translateY:[s,0],scale:[f,1]},{duration:C.CLOSE_ANIMATION_DURATION,easing:[.1,.82,.25,1]}).then((()=>{U()}));const p=null===(t=ie.current)||void 0===t?void 0:t.getElement();p&&(0,x.default)(p,{opacity:[0,1]},{duration:C.CLOSE_ANIMATION_DURATION,easing:[.1,.82,.25,1]})},Ne=e=>{const t=re.current;e&&t&&(de.current=t.getHeightOverflow()>0||t.getWidthOverflow()>0),be(e),r(e)},xe=e=>{var t;const n=null===(t=re.current)||void 0===t?void 0:t.getInsideContainer(),l=Boolean(null==n?void 0:n.contains(document.activeElement));if(a||!l)return;Oe.cancel();const r=re.current;null!=r&&r.onKeyboardZoom(e)},De=()=>{we(!0)},Re=()=>{ye(!0)},je=()=>{ye(!1)},Le=e=>{e.stopPropagation(),Pe(!ke)};let Be,Ge;switch((0,B.useEffect)((()=>{a||Me||!le||Ce(!0)}),[a,Me,le]),ae.type){case g.default.TYPE.IMAGE:Be=B.default.createElement(E.default,{key:q.toString(),msg:t,mediaData:ae,onLoad:Te,onImgZoomIn:Ne,onAnnotationTooltipDisplay:Re,onAnnotationTooltipDismiss:je,preventDownload:Z,ref:re});break;case g.default.TYPE.STICKER:Be=B.default.createElement(y.default,{key:q.toString(),msg:t,mediaData:ae,onLoad:Te,onImgZoomIn:Ne,onStickerPackView:Ae,stickerPackViewDelay:C.CLOSE_ANIMATION_DURATION,ref:re});break;case g.default.TYPE.VIDEO:Be=B.default.createElement(k.default,{key:q.toString(),autoPlay:!he,msg:t,mediaData:ae,onLoadedData:ae.isGif?Te:Ie,startTime:e.startTime,onClose:Ae,ref:oe});break;case g.default.TYPE.AUDIO:Be=B.default.createElement(h.default,{mediaData:ae,key:q.toString(),msg:t});break;default:__LOG__(4,void 0,new Error,!0)`type: ${ae.type}`,SEND_LOGS("MediaViewerModal: unexpected media type")}const We=e.msgIndexInAlbum>=0&&e.albumSize>=0;if($||We){let n;We&&(n=p.default.t(505,{number:e.msgIndexInAlbum+1,totalNumber:e.albumSize}));const a=c.Conversation({mentions:t.mentionMap(),groupMentions:t.groupMentionMap(),phoneNumbers:(0,S.getPhoneNumbersFromMsg)(t),links:(0,w.getLinksFromMsg)(t),trusted:!0,fromMe:q.fromMe}),l=ae.type===g.default.TYPE.IMAGE&&!Z,r=!Me&&(ae.isGif||l);Ge=B.default.createElement(B.default.Fragment,null,B.default.createElement("p",{className:(0,o.cx)({[R.default.captionWrapperExpandable]:!0===ce.current,[R.default.captionWrapper]:!0}),onClick:ce.current?Le:void 0,title:ce.current?j.fbt._("Read more",null,{hk:"2DvSvh"}):void 0,"aria-hidden":ke||void 0},B.default.createElement(i.EmojiText,{className:(0,o.cx)({[R.default.captionHidden]:r,[R.default.expanded]:ke,[R.default.mediaCaption]:!0}),formatters:a,ref:e=>{ie.current=e},text:$||n}),ce.current&&B.default.createElement(N.default,{xstyle:[z.captionReadMoreBtn,ke&&z.captionReadMoreBtnExpanded,Ee&&z.captionReadMoreBtnZoomed],onClick:Le},B.default.createElement(T.TextSpan,null,j.fbt._("Read more",null,{hk:"2DvSvh"})))),ke&&B.default.createElement("p",{className:(0,L.default)(R.default.captionWrapper,R.default.captionWrapperExpandable,R.default.captionExpanded),onClick:Le},B.default.createElement(i.EmojiText,{className:(0,L.default)(R.default.mediaCaption,R.default.mediaCaptionExpanded),formatters:a,text:$})))}const Fe=(0,o.cx)({[R.default.mediaWithCaption]:!!Ge,[R.default.media]:!0}),Ve=(0,o.cx)({[R.default.noThumbnails]:Z||Q,[R.default.mediaViewerAnimate]:e.isAnimatingIn,[R.default.cursorZoomOut]:Ee,overlay:!0,[R.default.mediaViewer]:!0}),He=Ee&&de.current?e=>{Oe(e.pageX,e.pageY)}:null,Ue=Ee?e=>{Oe.cancel();const t=re.current;t&&Ee&&t.onClick(e)}:null;let qe=Ee?null:Ae;null!=qe&&Z&&(qe=De);return B.default.createElement(A.UIE,{displayName:"MediaViewer",escapable:!0,requestDismiss:Ae},B.default.createElement(f.HotKeys,{handlers:{space:xe,enter:xe},ref:ue},B.default.createElement("div",{className:Ve,"data-animate-media-viewer":!0,"data-testid":"media-viewer-modal",onClick:Ue,onMouseMove:He},B.default.createElement(b.default,{isHighlightClose:_e,msg:t,mediaData:ae,onClose:Ae,onHightlightCloseEnd:()=>{we(!1)},onViewOnceInfoClick:()=>{Se()},msgIndexInAlbum:e.msgIndexInAlbum}),B.default.createElement("div",{className:(0,o.cx)({[R.default.sticker]:Q,[R.default.mediaContent]:!0}),onClick:qe},B.default.createElement(K,{hasNavigationButtons:!Z&&!Q,onNext:e.onNext,onPrev:e.onPrev,imgZoomed:Ee},B.default.createElement("div",{className:Fe},B.default.createElement(v.default,{msg:t,mediaData:ae}),Be,B.default.createElement(d.default.Provider,{value:ne.groupMetadata},Ge)))))))};var l=n(724976),r=n(305989),o=n(752253),i=n(305521),u=a(n(335540)),c=q(n(675886)),s=n(163755),d=a(n(462824)),f=n(81644),p=a(n(932325)),m=n(711735),h=a(n(883537)),g=a(n(116253)),E=a(n(142958)),b=a(n(548290)),v=a(n(36886)),y=a(n(777361)),M=n(172259),C=n(69315),k=a(n(177046)),P=n(114850),_=n(787742),w=n(44118),S=n(527530),O=n(95589),I=n(435595),T=n(180519),A=n(392632),N=a(n(625903)),x=a(n(330619)),D=a(n(25683)),R=a(n(192639)),j=n(548360),L=a(n(261294)),B=q(n(667294)),G=(a(n(156720)),n(655241)),W=n(871210),F=a(n(157558)),V=a(n(49710)),H=a(n(286481));function U(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(U=function(e){return e?n:t})(e)}function q(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=U(t);if(n&&n.has(e))return n.get(e);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(a,r,o):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}const z={captionReadMoreBtn:{position:"lhggkp7q",end:"h223g3sc",bottom:"jxacihee",paddingTop:"ppypbuwx",paddingEnd:"f9ovudaz",paddingBottom:"przvwfww",paddingStart:"nu34rnf1",backgroundColor:"idmi9oma",borderTopStartRadius:"ho9ovbg7",borderTopEndRadius:"tcg15ap9",borderBottomEndRadius:"c5wy1lv0",borderBottomStartRadius:"bqysl6j9",boxShadow:"a95fzlb5"},captionReadMoreBtnExpanded:{visibility:"kojwoqec"},captionReadMoreBtnZoomed:{visibility:"kqpkm0zi",opacity:"lxctpz5v"}};function Y(e){null==e||e.stopPropagation()}function K(e){var t,n,a,l;return B.default.createElement(B.default.Fragment,null,e.hasNavigationButtons&&B.default.createElement("div",{className:(0,L.default)(R.default.btnMediaPrev)},B.default.createElement("div",{onClick:e.onPrev?null:Y},B.default.createElement(r.ChevronButton,{type:r.ButtonType.Prev,onClick:null!==(t=e.onPrev)&&void 0!==t?t:void 0,onKeyDown:null!==(n=e.onPrev)&&void 0!==n?n:void 0,disabled:!e.onPrev||e.imgZoomed,theme:I.RoundTheme.Default}))),e.children,e.hasNavigationButtons&&B.default.createElement("div",{className:(0,L.default)(R.default.btnMediaNext)},B.default.createElement("div",{onClick:e.onPrev?null:Y},B.default.createElement(r.ChevronButton,{type:r.ButtonType.Next,onClick:null!==(a=e.onNext)&&void 0!==a?a:void 0,onKeyDown:null!==(l=e.onNext)&&void 0!==l?l:void 0,disabled:!e.onNext||e.imgZoomed,theme:I.RoundTheme.Default}))))}},467201:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{msg:t}=e,n=(0,r.getChat)(t);return s.default.createElement(l.DropdownItem,{action:()=>{o.ModalManager.open(s.default.createElement(i.default,{chat:n,msg:t,spamFlow:u.SpamFlow.MediaViewer}))}},c.fbt._("Report",null,{hk:"GPSDP"}))};var l=n(675085),r=n(163755),o=n(114850),i=a(n(207511)),u=n(453603),c=n(548360),s=a(n(667294))},774396:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{msg:t}=e;return d.default.createElement(l.DropdownItem,{action:()=>{(0,i.logRTAReportingEvent)({reportToAdminInteraction:c.REPORT_TO_ADMIN_INTERACTION.CLICK_SEND_FOR_ADMIN_REVIEW,groupId:(0,r.getChat)(t).id.user}),o.ModalManager.open(d.default.createElement(u.default,{msg:t}))}},s.fbt._("Send for admin review",null,{hk:"4ouSa6"}))};var l=n(675085),r=n(163755),o=n(114850),i=n(626163),u=a(n(286391)),c=n(130756),s=n(548360),d=a(n(667294))},266648:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{mediaMsgs:t,onScroll:n,activeMsg:a}=e,r=(0,d.useRef)({}),o=(0,d.useRef)(null),i=(0,d.useRef)(null),u=(0,f.default)(a.id),m=()=>{var e;null===(e=o.current)||void 0===e||e.focusOnActive()};(0,d.useEffect)((()=>{var e;(null===(e=i.current)||void 0===e?void 0:e.contains(document.activeElement))&&!a.id.equals(u)&&m()}),[a,u]);const h=()=>{const e=new Map;return t.forEach((t=>{const n=t.id.toString();e.set(n,(e=>{const t=r.current[e];if(!t)return!1;const n=t.getBoundingClientRect(),a=(n.left+n.right)/2;return!(a>-1*window.innerWidth&&a<2*window.innerWidth)})(n))})),e},[E,b]=(0,d.useState)(h),v=(0,p.default)((()=>{const e=h();(0,l.default)(E,e)||b(e)}),100);return d.default.createElement("div",{className:c.default.thumbsContainer,ref:e.setRefThumbsContainer},d.default.createElement("div",{ref:i,className:c.default.scrollContainer,dir:"ltr"},d.default.createElement("div",{role:"list","aria-label":s.fbt._("Media List",null,{hk:"3dsEfq"}),tabIndex:1,onFocus:()=>{m()},onScroll:e=>{v(),n(e)},className:c.default.viewerThumbs,ref:e.setRefThumbs},d.default.createElement(g,{ref:o,mediaMsgs:t,highlightedMsgIds:e.highlightedMsgIds,activeMsg:e.activeMsg,onSetActiveThumb:e.onSetActiveThumb,onSelectThumb:e.onSelectThumb,msgIdToPreferPreview:E}))))};var l=a(n(621733)),r=a(n(335540)),o=n(125922),i=n(787742),u=n(956113),c=a(n(572028)),s=n(548360),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(a,r,o):a[r]=e[r]}a.default=e,n&&n.set(e,a);return a}(n(667294)),f=a(n(49710)),p=a(n(286481));function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function h(e,t){let{mediaMsgs:n,highlightedMsgIds:a,activeMsg:l,onSetActiveThumb:s,onSelectThumb:f,msgIdToPreferPreview:p}=e;const m=(0,d.useRef)({}),h=()=>{const e=l.id.toString(),t=m.current[e];t&&r.default.focus(t)};(0,d.useImperativeHandle)(t,(()=>({focusOnActive:h})));const g=a&&a.size>0&&a.has(l.id.toString()),E=[];return n.forEach((e=>{if(null==e.mediaData){const t=l;return void __LOG__(3,!0)`MediaViewerFlow: attempted to render a msg without mediaData: ${JSON.stringify({type:e.type,isMedia:(0,i.getIsMedia)(e),startMsgType:t.type,startMsgIsMedia:(0,i.getIsMedia)(t)})}`}const t=g&&a&&!a.has(e.id.toString())?"viewerFlowTransparent":"viewerFlow";E.push(d.default.createElement(o.MediaThumb,{theme:t,active:e===l,msg:e,containerRef:t=>{((e,t)=>{m.current[t]=e})(t,e.id.toString()),e===l&&s(t)},key:`media-${e.id.id}`,onClick:()=>{f(e)},preferPreview:!!p.get(e.id.toString()),showTooltip:(0,i.getIsGroupMsg)(e)}))})),E.push(d.default.createElement("div",{className:c.default.mediaThumb,key:"spinner-right"},n.queryMediaAfter?d.default.createElement(u.Spinner,{stroke:6,size:24}):null)),E.unshift(d.default.createElement("div",{className:c.default.mediaThumb,key:"spinner-left"},n.queryMediaBefore?d.default.createElement(u.Spinner,{stroke:6,size:24}):null)),E.push(d.default.createElement("div",{className:c.default.thumbPadding,key:"padding-right"})),E.unshift(d.default.createElement("div",{className:c.default.thumbPadding,key:"padding-left"})),d.default.createElement(d.default.Fragment,null,E)}const g=(0,d.forwardRef)(h);g.displayName="MediaThumbs"},25683:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onOkClick:t}=e;return p.default.createElement(l.ConfirmPopup,{onOK:t,cancelText:c.default.t(393),onCancel:()=>{(0,r.openExternalLink)((0,o.getViewOnceFaqUrl)())}},p.default.createElement(i.FlexColumn,null,p.default.createElement(u.default,{xstyle:m.graphic,align:"center"},p.default.createElement(d.ViewOnceSenderNuxIcon,{width:195,height:177})),p.default.createElement(s.WDSTextLarge,null,e.isPhoto?f.fbt._("This photo is set to view once",null,{hk:"2H7aHc"}):f.fbt._("This video is set to view once",null,{hk:"1w8WFf"})),p.default.createElement(s.WDSTextMuted,null,e.isPhoto?f.fbt._("For more privacy, this photo will disappear after you close it.",null,{hk:"1XZPqi"}):f.fbt._("For more privacy, this video will disappear after you close it.",null,{hk:"3YgUHE"}))))};var l=n(103440),r=n(753233),o=n(258105),i=n(690495),u=a(n(469733)),c=a(n(932325)),s=n(180519),d=n(875602),f=n(548360),p=a(n(667294));a(n(156720));const m={graphic:{marginBottom:"t4zgqcuo"}}},986458:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={footerNote:"_3Ii0U",getTheAppLink:"_2uO1h"}},750478:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={wrapper:"_1HfA2",code:"_25NCw",codeDarkMode:"_3p_Xc",codeLogo:"_3cy64"}},663945:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={msg:"_7Upvn",text:"_3Q6VG",bubble:"_3cupO",author:"LldYr",hasSuspiciousLinks:"_1BEFs",hasAuthor:"_28v58",suspiciousLabel:"_1kBNA"}},363467:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={businessHoursRow:"_3sfEB",firstRow:"_2sBkJ",businessHoursDay:"_2pvvT",businessHoursHours:"_3kLLJ",dayIsOpen:"_29-HA",businessHoursChevron:"_2XvVc",flipSvg:"_3fNaY"}},850858:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={section:"_1we7x",description:"_2JSHQ",map:"mSpzh"}},161160:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={contactBusinessInfo:"vXoia",contactBusinessInfoSpinner:"_3sbaB",dataRow:"_2hU95",businessHoursRow:"_229jY",businessHoursDay:"_2Ue47",businessHoursHours:"_150zM",businessHoursChevron:"_1Biw6",flipSvg:"_2McRc",dataRowIcon:"XiT7h",dataRowText:"_1jydV",businessMap:"_2WOiM",address:"_2LXal",link:"_3mxhI",infoIcon:"_3TfXM"}},936027:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={mediaViewerPlaceholder:"_2qUle",imageAudio:"_1leJw",mediaViewerAudio:"_17zHt"}},572028:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={thumbsContainer:"_3GUJh",scrollContainer:"_27n9o",viewerThumbs:"_1P0Vh",mediaThumb:"_2nI8K",thumbPadding:"_1s0h2"}}}]);
//# sourceMappingURL=https://web.whatsapp.com/lazy_loaded_high_priority_components.54df0172a72edc42ff71.js.map
