/*! Copyright (c) 2022 WhatsApp Inc. All Rights Reserved. */
(self.webpackChunkwhatsapp_web_client=self.webpackChunkwhatsapp_web_client||[]).push([[7205],{31351:e=>{var t=Array.prototype.reverse;e.exports=function(e){return null==e?e:t.call(e)}},67598:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){let a;if(e.size!==t.size)return!1;for(const[n,i]of e)if(a=t.get(n),a!==i||void 0===a&&!t.has(n))return!1;return!0}},83770:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.queryAndUpdateSubGroupMetadataById=function(e){if(i.GK.supportsFeature(i.GK.F.MD_BACKEND))return(0,o.queryAllSubGroups)(e).then((t=>{!function(e,t){const a=s.default.get(e),n=t.map((e=>e.id));a&&a.set({subgroups:n})}(e,t)}));return Promise.resolve()};var i=a(37268),s=n(a(20029)),o=a(10349)},19955:(e,t,a)=>{"use strict";var n=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.setGroupDesc=function(e,t=""){return x((0,h.unproxy)(e),t)};var s=a(73583),o=i(a(48360)),l=a(89911),r=a(2751),d=n(a(22628)),c=i(a(79276)),u=a(66365),f=a(2753),h=a(83040),p=a(25512),m=a(85893);function x(e,t="",a=(0,l.genId)()){var n,i,h;let g=t&&t.trim();if(g===(null===(n=e.groupMetadata)||void 0===n?void 0:n.desc))return Promise.reject(new d.ActionError);""===g&&(g=null);const C=(0,u.sendSetGroupDescription)(e.id,g,(0,f.newTag)(),null===(i=e.groupMetadata)||void 0===i?void 0:i.descId),v=null===(h=e.groupMetadata)||void 0===h?void 0:h.desc,_=new l.ActionType(o.default._("Changing group description",null,{hk:"3KCi4Y"})),j=C.then((()=>new l.ActionType(o.default._("Group description changed",null,{hk:"44gagH"}),{actionText:c.default.t(144),actionHandler:()=>x(e,v,a)}))).catch((0,s.filteredCatch)(p.ServerStatusCodeError,(e=>{if(e.status>=400)return new l.ActionType(o.default._("Group description change failed",null,{hk:"eSNfo"}))}))).catch((()=>(__LOG__(3)`models:chat:setGroupDesc dropped`,new l.ActionType(o.default._("Group description change failed",null,{hk:"eSNfo"}),{actionText:c.default.t(140),actionHandler:()=>x(e,g,a)}))));return r.Cmd.openToast((0,m.jsx)(l.ActionToast,{id:a,initialAction:_,pendingAction:j})),C.then((t=>{var a;t._duplicate||(null===(a=e.groupMetadata)||void 0===a||a.set({desc:g||""}))})).catch((0,s.filteredCatch)(p.ServerStatusCodeError,(()=>{})))}},25379:(e,t,a)=>{"use strict";var n=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.setGroupSubject=function(e,t=""){return m((0,u.unproxy)(e),t)};var s=a(73583),o=a(89911),l=a(2751),r=i(a(22628)),d=n(a(79276)),c=a(66365),u=a(83040),f=a(41361),h=a(25512),p=a(85893);function m(e,t,a=(0,o.genId)()){const n=t.trim();if(!n)return Promise.reject(new r.ActionError);if(n===e.contact.name)return Promise.reject(new r.ActionError);const i=(0,c.sendSetGroupSubject)(e.id,n),u=e.contact.name,x=new o.ActionType(d.default.t(80)),g=i.then((()=>new o.ActionType(d.default.t(79,{subject:n}),{actionText:d.default.t(144),actionHandler:()=>m(e,u,a)}))).catch((0,s.filteredCatch)(h.ServerStatusCodeError,(e=>{if(e.status>=400)return new o.ActionType(d.default.t(78))}))).catch((()=>(__LOG__(3)`models:chat:setSubject dropped`,new o.ActionType(d.default.t(78),{actionText:d.default.t(140),actionHandler:()=>m(e,n,a)}))));return l.Cmd.openToast((0,p.jsx)(o.ActionToast,{id:a,initialAction:x,pendingAction:g})),i.then((t=>{if(!t._duplicate){const t={name:n};return(0,f.updateLocal)(e.contact.id,t).then((()=>{e.contact.set(t)}))}})).catch((0,s.filteredCatch)(h.ServerStatusCodeError,(()=>{})))}},10349:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.queryAllSubGroups=function(){return h.apply(this,arguments)},t.querySubGroup=function(){return p.apply(this,arguments)};var i=n(a(48926)),s=a(22283),o=a(68132),l=a(12555),r=a(60903),d=a(6351),c=a(25512);const u=new o.WapParser("queryAllSubGroupsParser",(e=>e.child("sub_groups").mapChildren(r.parseSubGroupNode))),f=new o.WapParser("querySubGroupParser",(e=>e.child("linked_group").mapChildren(r.parseSubGroupInfoNode)));function h(){return(h=(0,i.default)((function*(e,t=(0,s.generateId)()){const a=(0,s.wap)("iq",{to:(0,d.GROUP_JID)(e),type:"get",xmlns:"w:g2",id:t},(0,s.wap)("sub_groups",null)),n=yield(0,l.sendIq)(a,u);return n.success?n.result:(__LOG__(2)`queryAllSubGroups failed: ${n.errorCode}:${n.errorType}`,Promise.reject(new c.ServerStatusCodeError(n.errorCode,n.errorText)))}))).apply(this,arguments)}function p(){return(p=(0,i.default)((function*(e,t,a=(0,s.generateId)()){const n=(0,s.wap)("iq",{to:(0,d.GROUP_JID)(e),type:"get",xmlns:"w:g2",id:a},(0,s.wap)("query_linked",{type:"sub_group",jid:(0,d.GROUP_JID)(t)})),i=yield(0,l.sendIq)(n,f);return i.success?i.result:(__LOG__(2)`queryAllSubGroups failed: ${i.errorCode}:${i.errorType}`,Promise.reject(new c.ServerStatusCodeError(i.errorCode,i.errorText)))}))).apply(this,arguments)}},60903:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.parseSubGroupNode=function(e){var t;let a;try{a=(0,r.createWid)(`${e.attrString("id")}@g.us`)}catch(e){__LOG__(2)`parseSubGroupNode failed: ${e}`}if(!(null===(t=a)||void 0===t?void 0:t.isGroup))throw Error("parseSubGroupNode: invalid group id");return{id:a,subject:e.attrString("subject"),subjectTime:e.hasAttr("s_t")?e.attrTime("s_t"):void 0}},t.parseSubGroupInfoNode=function(e){var t;let a;try{a=(0,r.createWid)(`${e.attrString("id")}@g.us`)}catch(e){__LOG__(2)`parseSubGroupNode failed: ${e}`}if(!(null===(t=a)||void 0===t?void 0:t.isGroup))throw Error("parseSubGroupNode: invalid group id");const n=(0,l.extractDescription)(e),d=e.mapChildrenWithTag("participant",(e=>{const t=e.attrEnumOrDefault("type",s.GROUP_PARTICIPANT_TYPES,s.GROUP_PARTICIPANT_TYPES.participant);return{id:(0,o.userJidToUserWid)(e.attrUserJid("jid")),isSuperAdmin:t===s.GROUP_PARTICIPANT_TYPES.superadmin,isAdmin:t===s.GROUP_PARTICIPANT_TYPES.admin||t===s.GROUP_PARTICIPANT_TYPES.superadmin}}));return(0,i.default)({id:a,owner:e.hasAttr("creator")?(0,o.userJidToUserWid)(e.attrUserJid("creator")):void 0,creation:e.attrTime("creation"),subject:e.attrString("subject"),subjectTime:e.hasAttr("s_t")?e.attrTime("s_t"):void 0,participants:d,size:e.hasAttr("size")?e.attrInt("size"):void 0},n)};var i=n(a(81109)),s=a(20640),o=a(92205),l=a(98001),r=a(31517)},55121:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{contact:t,onClick:a,contextMenu:o,isPendingParticipant:l,contextEnabled:r,onContext:d,theme:c}=e,u=(0,i.useModelValues)(e.participant,["isAdmin"]);return(0,s.jsx)(n.Contact,{contact:t,admin:u.isAdmin,onClick:a,theme:c||"drawer-list",contextEnabled:()=>null!=r&&r(t),contextMenu:o,onContext:e=>d&&d(e,t),isPendingParticipant:l,showNotifyName:!0,waitIdle:!0})};var n=a(83387),i=a(90370),s=a(85893)},62346:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(58721)),s=a(67294),o=a(27703),l=n(a(24613)),r=n(a(66452)),d=a(38428),c=n(a(86027)),u=a(95706),f=a(98592),h=n(a(4851)),p=a(26088),m=a(37441),x=a(85893);class g extends s.Component{constructor(...e){super(...e),this.startCheckForSuccess=()=>{this.checkIteration=0,this.checkForSuccessInterval=this.props.setInterval(this.checkForSuccess,250)},this.clearCheckForSuccess=()=>{this.checkForSuccessInterval&&(this.props.clearInterval(this.checkForSuccessInterval),this.checkForSuccessInterval=0,this.checkIteration=0)},this.checkForSuccess=()=>{if(m.Socket.state!==m.STATE.CONNECTED)return;this.checkIteration++;const e=this.props.url;if(this.checkIteration>40)return void this.handlePlayerError({target:{src:e,error:{code:window.MediaError.MEDIA_ERR_NETWORK}}});const t=(0,i.default)(this._audioElement,"this._audioElement").buffered;t.length&&t.end(0)>0&&this.handlePlaying()},this.handlePlayerError=e=>{this.clearCheckForSuccess(),this.props.onError&&this.props.onError(e.target.src)},this.handlePlaying=()=>{this.clearCheckForSuccess(),o.MainAudioChannel.claim(this,(()=>{this.pause()}))},this._setRefAudio=e=>{this._audioElement=e,null!=this.props.setRefAudio&&this.props.setRefAudio(e)}}componentDidMount(){const{listeners:e}=this.props,t=(0,i.default)(this._audioElement,"this._audioElement");this._updatePlaybackRate(),e.add(t,"error",this.handlePlayerError,{capture:!0}),e.add(t,"playing",this.handlePlaying),(p.UA.isGecko||p.UA.isSafari)&&(this.props.autoPlay?(this.checkIteration=0,this.checkForSuccessInterval=this.props.setInterval(this.checkForSuccess,250)):this.props.autoPlay?this.startCheckForSuccess():e.add(t,"play",this.startCheckForSuccess))}componentWillUnmount(){p.UA.isBlink&&(0,r.default)((0,i.default)(this._audioElement,"this._audioElement"))}componentDidUpdate(){this._updatePlaybackRate()}_updatePlaybackRate(){const e=(0,i.default)(this._audioElement,"this._audioElement"),{playbackRate:t}=this.props;e.defaultPlaybackRate===t&&e.playbackRate===t||(e.defaultPlaybackRate=e.playbackRate=null!=t?t:1)}pause(){var e;null===(e=this._audioElement)||void 0===e||e.pause()}render(){const e=u.ReactionBubbleType.MEDIA_ITEM,{msg:t}=this.props;return(0,x.jsxs)("div",{className:this.props.className,children:[(0,x.jsx)("audio",{ref:this._setRefAudio,className:l.default.audioTag,src:this.props.url,onClick:this.props.onClick,controls:this.props.controls,preload:this.props.preload,autoPlay:this.props.autoPlay,children:this.props.children}),t&&(0,f.shouldShowReactionBubble)(t,e)&&(0,x.jsx)(c.default,{msgIds:[t.id.toString()],reactionBubbleType:e})]})}}g.displayName="AudioTag";var C=(0,d.ListenerHOC)((0,h.default)(g));t.default=C},70001:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{docMsgs:t,chat:a}=e,n=(0,s.default)(e,["docMsgs","chat"]),x=(0,p.default)(),g=(0,o.useRef)(null);let C;(0,h.useListener)(t,"add remove reset query_doc_before",(()=>{var e;null===(e=g.current)||void 0===e||e.forceUpdate()})),d.GK.supportsFeature(d.GK.F.MD_BACKEND)&&a.endOfHistoryTransferType===l.ConversationEndOfHistoryTransferModelPropType.COMPLETE_BUT_MORE_MESSAGES_REMAIN_ON_PRIMARY&&(C=(0,m.jsx)(r.default,{icon:(0,m.jsx)(f.default,{name:"content-chat"}),theme:"list",secondary:c.default.t(680),children:c.default.t(681)}));return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(u.default,(0,i.default)({ref:g,msgsCollection:t,queryCollection:(e,n)=>{x((()=>{t.queryDocs(a,n)}))},hasBefore:t.hasDocBefore,queryBefore:t.queryDocBefore,emptyText:c.default.t(1346),chat:a},n)),C]})};var i=n(a(81109)),s=n(a(6479)),o=a(67294),l=a(8853),r=n(a(57135)),d=a(37268),c=n(a(79276)),u=n(a(74422)),f=n(a(15817)),h=a(64514),p=n(a(2014)),m=a(85893)},60618:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.EphemeralSettingRow=function(e){const{chat:t,groupMetadata:a,onClick:n,theme:i}=e;return a?(0,x.jsx)(C,{groupMetadata:a,onClick:n,theme:i}):(0,x.jsx)(g,{chat:t,onClick:n,theme:i})},t.BaseEphemeralSettingRow=v;var i=a(93671),s=n(a(24033)),o=a(2751),l=n(a(72021)),r=n(a(9598)),d=n(a(35346)),c=a(53785),u=n(a(79276)),f=a(10913),h=n(a(15817)),p=a(51183),m=a(90370),x=a(85893);const g=function(e){const{onClick:t}=e,a=(0,m.useModelValues)(e.chat,["contact","ephemeralDuration"]),n=()=>{var e;return null!==(e=a.ephemeralDuration)&&void 0!==e?e:0},s=()=>{a.contact.addPendingAction((0,i.unblockContact)(a.contact)).then((()=>{t(),o.Cmd.closeModal()})).catch((()=>{}))},r=()=>{o.Cmd.closeModal()};return(0,x.jsx)(v,{ephemeralDuration:n(),canChange:!0,onClick:()=>{a.contact.isContactBlocked?o.Cmd.openModal((0,x.jsx)(l.default,{onOK:s,okText:u.default.t(1764),onCancel:r,cancelText:u.default.t(1974),children:n()?u.default.t(832):u.default.t(833)})):t()},theme:e.theme})};const C=function(e){var t;const{onClick:a}=e,n=(0,m.useModelValues)(e.groupMetadata,["ephemeralDuration","participants"]),i=()=>{o.Cmd.closeModal()};return(0,x.jsx)(v,{ephemeralDuration:null!==(t=n.ephemeralDuration)&&void 0!==t?t:0,canChange:n.canSetEphemeralSetting(),onClick:()=>{n.canSetEphemeralSetting()?a():o.Cmd.openModal((0,x.jsx)(l.default,{onOK:i,okText:u.default.t(2167),children:u.default.t(772)}))},theme:e.theme})};function v(e){const{ephemeralDuration:t,canChange:a,onClick:n}=e;let i;i=t>0?a?(0,f.isEphemeral24HDurationEnabled)()?(0,c.getDisappearingMessageDurationString)(t):u.default.t(827):(0,c.getDisappearingMessageExplanationString)(t):u.default.t(826);const o=(0,x.jsx)(h.default,{className:a?d.default.chevronIcon:d.default.ephemeralIcon,name:a?"chevron-right-alt":"disappearing",directional:!0});if("new-chat-info"===e.theme){const e=(0,x.jsx)(p.TextSpan,{theme:"title",children:u.default.t(971)}),t=(0,x.jsx)(p.TextDiv,{theme:"muted",children:i});return(0,x.jsx)(s.default,{side:"chevron",icon:"disappearing",onClick:n,title:e,secondaryTitle:t})}return(0,x.jsxs)(r.default,{onClick:n,side:o,multiline:!0,children:[(0,x.jsx)("div",{className:d.default.header,children:(0,x.jsx)(p.TextSpan,{theme:"title",children:u.default.t(971)})}),(0,x.jsx)(p.TextDiv,{theme:"muted",children:i})]})}},90799:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{linkMsgs:t,chat:a,selectedMessages:n,selectable:v,onMessageSelect:_}=e,j=(0,g.default)(),S=(0,o.useRef)(null);let E;(0,x.useListener)(t,"add remove reset",(()=>{var e;null===(e=S.current)||void 0===e||e.forceUpdate()})),(0,x.useListener)(t,"query_doc_before",(()=>{var e;null===(e=S.current)||void 0===e||e.forceUpdate()})),(0,x.useListener)(a.msgs,"add bulk_add",(e=>{if(!e)return;const a=[],n=Array.isArray(e)?e:[e];Promise.all(n.map((e=>(e.getLinks().length&&a.push(e),Promise.resolve())))).then((()=>{a.length&&t.add(a)}))})),c.GK.supportsFeature(c.GK.F.MD_BACKEND)&&a.endOfHistoryTransferType===l.ConversationEndOfHistoryTransferModelPropType.COMPLETE_BUT_MORE_MESSAGES_REMAIN_ON_PRIMARY&&(E=(0,C.jsx)(d.default,{icon:(0,C.jsx)(m.default,{name:"content-chat"}),theme:"list",secondary:u.default.t(680),children:u.default.t(683)}));const{linkMsgs:I,chat:M}=e,T=(0,s.default)(e,["linkMsgs","chat"]);return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(h.default,(0,i.default)({ref:S,msgsCollection:t,queryCollection:(e,n)=>{j((()=>{t.queryLinks(a,n)}))},hasBefore:t.hasLinkBefore,queryBefore:t.queryLinkBefore,renderElements:e=>{const a=[];return t.forEach((t=>{const i=!t.isSentByMe&&t.isGroupMsg;t.getGalleryLinks().forEach(((s,o)=>{s.href!==t.matchedText&&a.push((0,C.jsx)(f.default,{msg:t.safe(),link:s,displayAuthor:i,selectable:v,selectedMessages:n,onMessageSelect:_,onClickMsg:e},`${t.id.toString()}-${o}`))})),t.linkPreview&&a.push((0,C.jsx)(p.default,{msg:t,selectable:v,selectedMessages:n,onMessageSelect:_,displayType:r.default.DISP_TYPE.GALLERY,onClickMsg:e},t.id.toString()))})),a.reverse(),a},emptyText:u.default.t(1348),chat:a},T)),E]})};var i=n(a(81109)),s=n(a(6479)),o=a(67294),l=a(8853),r=n(a(11547)),d=n(a(57135)),c=a(37268),u=n(a(79276)),f=n(a(23084)),h=n(a(74422)),p=n(a(30826)),m=n(a(15817)),x=a(64514),g=n(a(2014)),C=a(85893)},23084:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{link:t,displayAuthor:a,selectedMessages:n,onMessageSelect:j,onClickMsg:S}=e,E=(0,g.useModelValues)(e.msg,["body","caption","dir","id","isSentByMe","mediaData","type","rtl","senderObj","star","mediaData","asRevoked"]),[I,M]=(0,s.useState)(!1),[T,b]=(0,s.useState)((()=>n.isSelected(E.unsafe())));(0,x.useListener)(n,E.id.toString(),(e=>{T!==e&&b(e)}));const y=e.selectable||I?(0,_.jsx)(p.default,{checked:T,onClick:e=>{e&&e.stopPropagation(),j(E.unsafe(),!T)},msgTheme:"gallery"}):null,w=(0,l.Conversation)({mentions:E.mentionMap(),links:E.getLinks(),selectable:true,trusted:E.isTrusted()}),P=E.body&&E.body.includes(t.url)?E.body:E.caption,N=a?(0,_.jsx)("div",{className:f.default.author,children:(0,_.jsx)(o.default,{msg:E,contact:E.senderObj})}):null,k=E.getSuspiciousLinks().length>0;return(0,_.jsx)(c.default,{hover:I,onClick:()=>{S(E.unsafe(),!T)},onMouseEnter:I?null:()=>{I||M(!0)},onMouseOver:I?null:()=>{I||M(!0)},onMouseLeave:I?()=>{I&&M(!1)}:null,children:(0,_.jsxs)("div",{className:f.default.msg,children:[(0,_.jsx)(C.default,{transitionName:"delay-leave",children:y}),(0,_.jsx)(v.MessageContainer,{isSentByMe:E.isSentByMe,children:(0,_.jsxs)("div",{className:(0,i.default)(f.default.bubble,{[f.default.hasAuthor]:a,[f.default.hasSuspiciousLinks]:k}),children:[N,(0,_.jsx)(m.SuspiciousLabel,{link:t,displayType:r.default.DISP_TYPE.GALLERY}),(0,_.jsx)(h.default,{title:t.url,isSentByMe:E.isSentByMe,canonicalUrl:t.domain,displayType:r.default.DISP_TYPE.GALLERY,star:E.star}),(0,_.jsx)(d.EmojiText,{text:P,selectable:true,className:f.default.text,dirMismatch:E.rtl!==u.default.isRTL(),direction:E.dir,formatters:w})]})})]})})};var i=n(a(94184)),s=a(67294),o=n(a(66069)),l=a(78260),r=n(a(11547)),d=a(86757),c=n(a(50954)),u=n(a(79276)),f=n(a(4949)),h=n(a(59926)),p=n(a(32966)),m=a(55774),x=a(64514),g=a(90370),C=n(a(58727)),v=a(44779),_=a(85893)},56028:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{fullCollection:t,selectedMessages:a,mediaMsgs:n,selectable:C,onMessageSelect:y,theme:w}=e,P=(0,E.useModelValues)(e.chat,["linkCount","docCount","productCount","endOfHistoryTransferType"]),N=(0,j.default)(),k=(0,M.default)();(0,S.useListener)(n,"add query_media_before",(()=>{N()})),(0,S.useListener)(n,"remove",(e=>{a&&a.isSelected(e)&&a.setVal(e,!1),N()})),(0,S.useListener)(n,"reset",(()=>{a&&a.unsetAll(),N()}));const A=function(e,t,a,n,l,r){let c=null;const u=(0,o.default)(e).filter(b).slice(0,!0===t?e.length:6);return(0,s.default)(u,((e,s)=>{const o=!0!==t&&s>=3&&s<=5?"hideableSecondRow":void 0,u=(0,T.jsx)(p.default,{className:r?m.default.roundedThumb:"",aspectRatio:r?1.1:1,msg:e,hoverEvent:t,selectable:a,selectedMessages:n,onMessageSelect:l,theme:o},e.id.toString());if(!0!==t)return[u];const f=d.Clock.monthStr(e.t);if(f!==c){c=f;const t=(0,T.jsx)(x.default,{children:f},`header-${e.t}`);return[...(0,i.default)(6,(t=>(0,T.jsx)(g.EmptyCanvas,{},`padding-${e.t}-${t}`))),t,u]}return[u]}))}(n.toArray(),t,C,a,y,"new-chat-info"===w),O=e=>{n.hasMediaBefore&&k((()=>{n.queryMedia({chat:(0,v.unproxy)(P),msg:e})}))},D=(0,I.default)((e=>{n.hasMediaBefore&&e.scrollTop+c.default.SCROLL_FUDGE>e.scrollHeight-e.clientHeight&&O(n.head())}),100);let R;if((0,l.useEffect)((()=>{n.hasMediaBefore&&O()}),[]),f.GK.supportsFeature(f.GK.F.MD_BACKEND)&&P.endOfHistoryTransferType===r.ConversationEndOfHistoryTransferModelPropType.COMPLETE_BUT_MORE_MESSAGES_REMAIN_ON_PRIMARY){let e;!0===t?e=h.default.t(684):0===n.length&&0===P.docCount&&0===P.linkCount&&0===P.productCount&&(e=h.default.t(682)),R="new-chat-info"===w?(0,T.jsx)(u.default,{theme:"new-chat-info",secondary:h.default.t(680),children:e}):(0,T.jsx)(u.default,{icon:(0,T.jsx)(_.default,{name:"content-chat"}),theme:"list",secondary:h.default.t(680),children:e})}return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(g.MediaGalleryView,{medias:A,mediaCollection:n,fullCollection:t,chat:(0,v.unproxy)(P),onScroll:e=>{D(e.currentTarget)},theme:w}),R]})};var i=n(a(98913)),s=n(a(94654)),o=n(a(31351)),l=a(67294),r=a(8853),d=a(21810),c=n(a(11547)),u=n(a(57135)),f=a(37268),h=n(a(79276)),p=n(a(76452)),m=n(a(81030)),x=n(a(14248)),g=a(74575),C=a(16248),v=a(83040),_=n(a(15817)),j=n(a(79830)),S=a(64514),E=a(90370),I=n(a(21797)),M=n(a(2014)),T=a(85893);function b(e){return!f.GK.supportsFeature(f.GK.F.MD_BACKEND)||(0,C.hasThumbnail)(e.mediaData)}},76452:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{msg:t,hoverEvent:a,selectable:n,onMessageSelect:p,theme:m,className:x,selectedMessages:g}=e,[C,v]=(0,s.useState)((()=>!(!g||!g.isSelected(t)))),_=(0,s.useRef)(null);(0,f.useListener)(g,t.id.toString(),(e=>{g&&C!==e&&v(e)}));const j=t.mediaData,S=j.type===l.default.TYPE.IMAGE&&j.renderableUrl?e=>{e.nativeEvent.dataTransfer.setData("text/uri-list",t.mediaData.renderableUrl)}:null,E=(0,i.default)(x);return(0,h.jsx)(d.MediaThumb,{classes:E,onClick:e=>{if(n&&p)return void p(t,!C);if(j.mediaStage===c.MEDIA_DATA_STAGE.ERROR_MISSING)return void o.Cmd.openModal((0,h.jsx)(r.default,{msg:t}));let a;e&&e.stopPropagation();const i=t.id;if(j.isGif||j.type===l.default.TYPE.IMAGE){const e=_.current;a=t=>i.equals(t)&&e?e:null}o.Cmd.mediaViewerModal({msg:(0,u.unproxy)(t),getZoomNode:a})},hoverEvent:a,selectable:n,selected:C,onMessageSelect:p,onDragStart:S,msg:t,theme:m,imgRef:e=>{_.current=e},aspectRatio:e.aspectRatio})};var i=n(a(94184)),s=a(67294),o=a(2751),l=n(a(58446)),r=n(a(14178)),d=a(16248),c=a(56341),u=a(83040),f=a(64514),h=a(85893)},14248:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,s.jsx)("div",{className:i.default.container,children:e.children})};var i=n(a(14040)),s=a(85893)},16248:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.MediaThumb=function(e){var t;const{msg:a,selectable:n,theme:r,active:m,imgRef:M,containerRef:T,onMessageSelect:b,selected:y=!1,onClick:w,onDragStart:P,preferPreview:N}=e,k=(0,_.default)(),A=(0,s.useRef)(null),O=(0,s.useRef)(null),D=(0,s.useRef)(null),[R,L]=(0,s.useState)(!1),[G,B]=(0,s.useState)(null);(0,j.useListener)(a.mediaData,"change:preview",k);(0,s.useEffect)((()=>(null==M||M(A.current),null==T||T(O.current),null==a.mediaData.preview&&null==a.mediaData.fullPreviewData&&(a.mediaData.type!==d.default.TYPE.IMAGE&&a.mediaData.type!==d.default.TYPE.VIDEO||a.downloadMedia({downloadEvenIfExpensive:!1,isUserInitiated:!1,rmrReason:x.default.WEBC_RMR_REASON_CODE.MEDIA_VIEWER})),()=>{null==M||M(null),null==T||T(null)})),[]),(0,s.useEffect)((()=>{null==M||M(A.current),null==T||T(O.current)}),[M,T,A,O]);const F=()=>{b&&b(a,!y)},V=t=>{if(!0!==e.showTooltip||"viewerFlowTransparent"===r||!(t instanceof HTMLElement))return null;const n=t.offsetWidth;return{menu:(0,E.jsx)(p.default,{msg:a}),anchor:t,dirY:l.DirY.TOP,dirX:l.DirX.CENTER,offsetX:!0===m?.5*-n*.13:0,type:l.MenuType.tooltip}},[U,H]=(0,S.useTimeout)((()=>{var e;D.current&&(e=D.current,B(V(e)))}),500);let W;(!0===n||R&&e.hoverEvent)&&(W=(0,E.jsxs)("div",{className:u.default.mediaSelect,children:[(0,E.jsx)("div",{className:u.default.shadeTop,onClick:e.onClick}),(0,E.jsx)(o.default,{onChange:F,hover:R,checked:y})]}));const K=(0,i.default)(e.classes,u.default.canvasComponent,{[u.default.canvasSelected]:y,[u.default.canvasSecondRow]:"hideableSecondRow"===r,[u.default.viewerFlow]:"viewerFlow"===r||"viewerFlowTransparent"===r,[u.default.viewerFlowTransparent]:"viewerFlowTransparent"===r,[u.default.active]:m}),q=a.star?(0,E.jsx)("div",{className:u.default.iconStar,children:(0,E.jsx)(g.default,{name:"star"})}):null,z=I(a.mediaData),Y=G?(0,E.jsx)(C.UIE,{displayName:"MediaThumbTitle",popable:!0,escapable:!0,requestDismiss:()=>{B(null)},requestRecentFocusOnUnmount:!1,children:(0,E.jsx)(v.default,{tooltip:G})}):null,X={paddingTop:1/(null!==(t=e.aspectRatio)&&void 0!==t?t:1)*100+"%"};return z?(0,E.jsxs)("div",{ref:O,className:K,"data-testid":"media-canvas",onMouseOver:()=>{R||L(!0)},onMouseEnter:e=>{var t;R||(e.persist(),L(!0),t=e.target,D.current=t,U())},onMouseLeave:()=>{R&&(H(),L(!1),B(null))},children:[W,(0,E.jsxs)("div",{className:u.default.canvasBody,children:[(0,E.jsx)(h.default,{mediaData:a.mediaData}),(0,E.jsx)(f.default,{mediaData:a.mediaData,selected:y}),q]}),(0,E.jsx)(c.default,{downloadMedia:()=>{a.downloadMedia({downloadEvenIfExpensive:!1,isUserInitiated:!1,rmrReason:x.default.WEBC_RMR_REASON_CODE.MEDIA_VIEWER})},onClick:w,onDragStart:P,preferPreview:N,ref:A,msg:a}),Y,(0,E.jsx)("div",{style:X})]}):null},t.hasThumbnail=I;var i=n(a(94184)),s=a(67294),o=n(a(28020)),l=a(45875),r=a(21289),d=n(a(58446)),c=n(a(39998)),u=n(a(80768)),f=n(a(81958)),h=n(a(91350)),p=n(a(28340)),m=a(56341),x=n(a(4040)),g=n(a(15817)),C=a(17714),v=n(a(76643)),_=n(a(79830)),j=a(64514),S=a(14343),E=a(85893);function I(e){switch(e.type){case d.default.TYPE.VIDEO:case d.default.TYPE.IMAGE:if(null!=e.preview||null!=e.fullPreviewData||e.mediaStage===m.MEDIA_DATA_STAGE.RESOLVED)return!0;if(r.MediaBlobCache.has(e.filehash)){try{r.MediaBlobCache.getOrCreateURL(e.filehash)}catch(e){return!1}return!0}return!1;default:return!0}}},39998:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(81109)),s=n(a(94184)),o=a(67294),l=n(a(58446)),r=n(a(1001)),d=n(a(9435)),c=n(a(45138)),u=a(85893);const f=(0,o.forwardRef)((({children:e,className:t,shade:a,url:n,onClick:i,onDragStart:s},o)=>{const l=!0===a?(0,u.jsx)("div",{className:r.default.shade}):null,d=null!=n&&""!==n?{backgroundImage:`url(${n})`}:null;return(0,u.jsxs)("div",{className:t,"data-testid":"media-canvas-img",style:d,onClick:i,ref:o,onDragStart:s,draggable:null!=s||null,children:[e,l]})}));var h=(0,o.forwardRef)((({downloadMedia:e,msg:t,onClick:a,onDragStart:n,preferPreview:o},h)=>{const{mediaData:p}=t,m={onClick:a,onDragStart:n,ref:h};switch(p.type){case l.default.TYPE.AUDIO:return(0,u.jsx)(f,(0,i.default)((0,i.default)({},m),{},{className:`${r.default.mediaCanvas} attach-media-audio-thumb`}));case l.default.TYPE.VIDEO:return(0,u.jsx)(f,(0,i.default)((0,i.default)({},m),{},{className:(0,s.default)(r.default.mediaCanvas,{"media-video-thumb":p.isGif&&!p.preview}),shade:!0,url:p.preview instanceof c.default?p.preview.url():null}));case l.default.TYPE.IMAGE:const a=e=>(0,u.jsx)(f,(0,i.default)((0,i.default)({},m),{},{className:r.default.mediaCanvas,shade:t.star,url:p.preview instanceof c.default?p.preview.url():null,children:null!=e?(0,u.jsx)("div",{className:r.default.mediaCanvas,style:{backgroundImage:`url(${e})`}}):null})),n=()=>null!=p.preview?a(null):(0,u.jsx)(f,(0,i.default)((0,i.default)({},m),{},{className:r.default.mediaCanvas,shade:t.star}));return!0===o?n():(0,u.jsx)("div",{className:r.default.mediaCanvas,children:(0,u.jsx)(d.default,{mediaData:p,placeholderRenderer:n,renderProgressively:!0,downloadMedia:e,children:a})});default:return(0,u.jsx)(f,(0,i.default)((0,i.default)({},m),{},{shade:t.star}))}}));t.default=h},81958:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{selected:t,mediaData:a}=e;switch(a.type){case o.default.TYPE.AUDIO:return(0,r.jsx)(d,{duration:a.duration,selected:t});case o.default.TYPE.VIDEO:return a.isGif?null:(0,r.jsx)(d,{duration:a.duration,selected:t});default:return null}};var i=n(a(94184)),s=a(21810),o=n(a(58446)),l=n(a(61639)),r=a(85893);function d({duration:e,selected:t}){const a=s.Clock.durationStr(e);return a?(0,r.jsx)("span",{className:(0,i.default)(l.default.container,{[l.default.selected]:t}),children:a}):null}},91350:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{mediaData:t}=e;if(!t)return null;const a=function(e){switch(e.type){case i.default.TYPE.AUDIO:return"msg-audio";case i.default.TYPE.VIDEO:return e.isGif?"msg-gif":"msg-video";default:return null}}(t);return null==a?null:(0,l.jsx)("div",{className:s.default.iconType,children:(0,l.jsx)(o.default,{name:a})})};var i=n(a(58446)),s=n(a(22745)),o=n(a(15817)),l=a(85893)},28340:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{msg:{senderObj:{formattedShortName:t}}}=e;return(0,i.jsx)(n.TextSpan,{children:t})};var n=a(51183),i=a(85893)},74422:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(67294),s=a(2751),o=n(a(11547)),l=a(21050),r=n(a(11597)),d=n(a(79011)),c=n(a(30826)),u=a(83040),f=n(a(79830)),h=n(a(21797)),p=a(85893);function m(e,t){const{queryBefore:a,hasBefore:n,msgsCollection:m,emptyText:x,scrollOffset:g=0,selectable:C,onMessageSelect:v,queryCollection:_,selectedMessages:j,renderElements:S,onProductDetail:E,setScrollOffset:I}=e,M=(0,f.default)();(0,i.useImperativeHandle)(t,(()=>({forceUpdate:M})));const T=(0,i.useRef)(null),b=e=>{n&&_(e)},y=(0,h.default)((e=>{const t=e.scrollHeight-e.clientHeight-e.scrollTop<o.default.SCROLL_FUDGE;n&&t&&b(m.head()),I&&I(e.scrollTop)}),100);(0,i.useEffect)((()=>{n&&b();const e=T.current;return e&&(e.scrollTop=g),()=>{y.cancel()}}),[]);const w=(e,t)=>{const a=(0,u.unproxy)(e);C&&void 0!==t?v(a,t):s.Cmd.openChatAt(a.chat,a.chat.getSearchContext(a))},P=S?S(w):m.map(((e,t)=>(0,p.jsx)(c.default,{msg:e,selectable:C,selectedMessages:j,onMessageSelect:v,displayType:o.default.DISP_TYPE.GALLERY,onClickMsg:w,onProductClick:E},`${e.id.toString()}_${t}`))).reverse();if(a){if(0===P.length)return(0,p.jsx)(l.Loading,{});P.push((0,p.jsx)(r.default,{}))}return 0!==m.length||a||n?(0,p.jsx)("div",{ref:T,onScroll:e=>{y(e.target)},className:d.default.wrapper,children:P}):(0,p.jsx)(l.Empty,{text:x,a8nText:"no-elements"})}var x=(0,i.forwardRef)(m);t.default=x},79444:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,x.useModelValues)(e.chat,["isGroup","muteExpiration","archive"]),a=(0,x.useModelValues)(e.mute,["isMuted"]),n=(0,x.useModelValues)(e.settings,["showArchiveV2"]),C=e=>{r.Cmd.muteChat((0,h.unproxy)(t),e)},v=()=>{C(!1),r.Cmd.closeModal()},_=a.isMuted,j=t.muteExpiration;if(t.archive&&(0,u.archiveV2Supported)()&&n.showArchiveV2)return(0,g.jsx)(c.default,{children:(0,g.jsx)(m.TextSpan,{theme:"muted",size:"16",children:f.default.t(177)})});const S=_?()=>{const e=t.isGroup?f.default.t(659):f.default.t(656);r.Cmd.openModal((0,g.jsx)(d.default,{onOK:v,okText:f.default.t(47),onCancel:()=>r.Cmd.closeModal(),cancelText:f.default.t(1974),children:e}))}:()=>{C(!0)},E=(0,g.jsx)(o.CheckBox,{checked:_,onChange:S}),I=_?f.default.t(1983):f.default.t(2148),M="new-chat-info"===e.theme;let T;if(_&&j){const e=l.Clock.untilStr(j);T=(0,g.jsx)(m.TextDiv,{theme:"muted",children:e})}if(M){const e=(0,g.jsx)(p.default,{checked:_,onChange:S}),t=(0,g.jsx)(m.TextSpan,{theme:"title",children:I});return(0,g.jsx)(s.default,{icon:"settings-notifications",a8nText:i.default.key("block-mute"),side:e,onClick:S,title:t,secondaryTitle:T})}return(0,g.jsxs)(c.default,{a8nText:i.default.key("block-mute"),side:E,onClick:S,multiline:!(!_||!j),children:[(0,g.jsx)(m.TextSpan,{theme:"title",children:I}),T]})};var i=n(a(2119)),s=n(a(24033)),o=a(38974),l=a(21810),r=a(2751),d=n(a(72021)),c=n(a(9598)),u=a(18675),f=n(a(79276)),h=a(83040),p=n(a(27477)),m=a(51183),x=a(90370),g=a(85893)},62026:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{productMsgs:t,chat:a}=e,n=(0,s.default)(e,["productMsgs","chat"]),x=(0,o.useRef)(null);(0,h.useListener)(t,"add remove reset",(()=>{var e;null===(e=x.current)||void 0===e||e.forceUpdate()}));const g=(0,p.default)();let C;d.GK.supportsFeature(d.GK.F.MD_BACKEND)&&a.endOfHistoryTransferType===l.ConversationEndOfHistoryTransferModelPropType.COMPLETE_BUT_MORE_MESSAGES_REMAIN_ON_PRIMARY&&(C=(0,m.jsx)(r.default,{icon:(0,m.jsx)(f.default,{name:"content-chat"}),theme:"list",secondary:c.default.t(680),children:c.default.t(686)}));return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(u.default,(0,i.default)({ref:x,msgsCollection:t,queryCollection:e=>g((()=>{t.queryProducts(a,e)})),hasBefore:t.hasProductBefore,queryBefore:t.hasProductBefore?Promise.resolve():null,emptyText:c.default.t(1352),chat:a},n)),C]})};var i=n(a(81109)),s=n(a(6479)),o=a(67294),l=a(8853),r=n(a(57135)),d=a(37268),c=n(a(79276)),u=n(a(74422)),f=n(a(15817)),h=a(64514),p=n(a(2014)),m=a(85893)},87633:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{stickerPackId:t,onStickerPackView:a,stickerPackViewDelay:n}=e,p=function(e){(0,i.useEffect)((()=>{e&&u.StickerPackCollectionMd.fetchStickerPack(e)}),[e]);return(0,f.default)(u.StickerPackCollectionMd,"add remove reset",(()=>null!=e?u.StickerPackCollectionMd.get(e):null))}(t);let m;l.GK.supportsFeature(l.GK.F.MD_BACKEND)&&(0,r.default)()&&t&&(m=(0,h.jsx)(s.default,{onClick:e=>{e.stopPropagation(),a&&a(),null!=n?setTimeout((()=>o.Cmd.openStickerPack(t)),n+150):o.Cmd.openStickerPack(t)},type:"secondary",children:d.default.t(1855)}));return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(c.StickerDetailsStickerPackInfo,{name:null==p?void 0:p.name,publisher:null==p?void 0:p.publisher,theme:c.Theme.MediaViewer}),m]})};var i=a(67294),s=n(a(80450)),o=a(2751),l=a(37268),r=n(a(60537)),d=n(a(79276)),c=a(41234),u=a(70134),f=n(a(13780)),h=a(85893)},27477:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({checked:e,onChange:t,tabIndex:a,id:n}){const c=(0,i.useRef)(null),[u,f]=(0,o.default)(),h=(0,l.default)(c,u);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("input",{ref:h,className:(0,s.default)(d.hiddenInput),checked:e,onChange:function(e){e.stopPropagation();const a=c.current;null!=a&&a.focus(),t(e)},type:"checkbox",tabIndex:null!=a?a:0,id:n}),(0,r.jsxs)("div",{className:(0,s.default)(d.container),onClick:function(){const e=c.current;null!=e&&e.click()},tabIndex:-1,"aria-hidden":"true","data-testid":"visual-switch",children:[(0,r.jsx)("div",{className:(0,s.default)(d.button,e&&d.buttonChecked,f&&d.buttonFocused)}),(0,r.jsx)("div",{className:(0,s.default)(d.track,e&&d.trackChecked)})]})]})};var i=a(67294),s=n(a(56720)),o=n(a(77118)),l=n(a(92135)),r=a(85893);const d={container:{display:"i86elurf",justifyContent:"ac2vgrno",alignItems:"gndfcl4n",width:"tknnhhou",height:"jdwybkuq",marginTop:"g1eqewly",marginEnd:"kjemk6od",marginBottom:"kzyzudjh",marginStart:"k6y3xtnu",position:"g0rxnol2",cursor:"ajgl1lbb"},button:{height:"jdwybkuq",width:"m0s4cjtr",borderTopStartRadius:"ikqdvm1y",borderTopEndRadius:"m3qqxsiz",borderBottomEndRadius:"r1ncx0sg",borderBottomStartRadius:"mmj7r7ye",backgroundColor:"lbj9vhti",position:"lhggkp7q",left:"tukmaf4q",transitionProperty:"bo8jc6qi",transitionDuration:"nbciif1m",transitionTimingFunction:"oa9ii99z",boxShadow:"hjje1qk3"},buttonChecked:{transform:"e95mh68g",backgroundColor:"my8w5w2u"},buttonFocused:{boxShadow:"r6unq4of"},track:{width:"tknnhhou",height:"icj6mcig",backgroundColor:"masnrobp",borderTopStartRadius:"i3rsbmdh",borderTopEndRadius:"d6h2ibm4",borderBottomEndRadius:"rh5xaqwm",borderBottomStartRadius:"e6tbvuqx"},trackChecked:{backgroundColor:"hza3nq4c"},hiddenInput:{position:"lhggkp7q",width:"cxec7x23",height:"kanlod6e",overflowX:"gfz4du6o",overflowY:"r7fjleex",clip:"nmeg1xfo",clipPath:"okm7a8wg",whiteSpace:"le5p0ye3"}}},68386:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useNewChatInfoColors=function(){return a};const a={"--text-title-color":"var(--text-primary-strong)","--text-section-title-color":"var(--text-secondary-lighter)","--cell-chat-title-color":"var(--text-primary-strong)","--cell-chat-secondary-color":"var(--text-secondary-lighter)","--primary-strong":"var(--text-primary-strong)","--primary":"var(--text-primary)","--primary-muted":"var(--text-secondary-lighter)","--teal":"var(--icon-high-emphasis)","--secondary":"var(--text-secondary-lighter)","--secondary-lighter":"var(--text-secondary-lighter)","--button-alternative":"var(--icon-high-emphasis)","--link-alt":"var(--icon-high-emphasis)"}},29586:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(48360)),s=a(2751),o=n(a(72021)),l=a(49798),r=n(a(48722)),d=a(86757),c=n(a(3998)),u=n(a(79276)),f=a(27251),h=a(85893);class p extends c.default{constructor(...e){super(...e),this.contactFilter=e=>{const t=this.props.chat.groupMetadata;return!!l.ContactCollection.isFilteredContact(e)&&(!(null==t?void 0:t.participants.get(e.id))||u.default.t(163))},this.confirmAddParticipant=e=>{const t=this.onAddParticipant.bind(this,e),a=u.default.t(640,{participant:e.formattedName,subject:this.props.chat.contact.name});this.push((0,h.jsx)(o.default,{onOK:t,okText:i.default._("Add participant",null,{hk:"48ECfz"}),onCancel:this._pop,cancelText:u.default.t(1974),children:(0,h.jsx)(d.EmojiText,{text:a})}))},this.onAddParticipant=e=>{(0,f.addParticipants)(this.props.chat,[e]).catch((()=>{})),s.Cmd.closeModal()},this._pop=()=>{this.pop()}}componentDidMount(){this.push((0,h.jsx)(r.default,{title:i.default._("Add participant",null,{hk:"48ECfz"}),filter:this.contactFilter,onCancel:this._pop,onSelect:this.confirmAddParticipant}))}}t.default=p},21706:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(48360)),s=a(2751),o=n(a(72021)),l=a(49798),r=a(86757),d=n(a(3998)),c=n(a(79276)),u=a(27251),f=a(31347),h=a(74807),p=a(85893);class m extends d.default{constructor(...e){super(...e),this._isGroupParticipant=e=>{var t;const{chat:a}=this.props;return!!(null===(t=a.groupMetadata)||void 0===t?void 0:t.participants.get(e))},this.customSecondaryText=e=>{var t;const{chat:a}=this.props;return(null===(t=a.groupMetadata)||void 0===t?void 0:t.participants.get(e))?c.default.t(163):null},this.contactFilter=e=>{const t=this.props.chat.groupMetadata;return!!l.ContactCollection.isFilteredContact(e)&&(!(null==t?void 0:t.participants.get(e.id))||c.default.t(163))},this.confirmAddParticipant=e=>{const{chat:t}=this.props;this.push((0,p.jsx)(o.default,{onOK:this.onAddParticipant.bind(this,e),okText:i.default._({"*":"Add participants",_1:"Add participant"},[i.default._plural(e.length)],{hk:"4pSXvk"}),onCancel:this._pop,cancelText:c.default.t(1974),children:(0,p.jsx)(r.EmojiText,{text:this._makeNameEnumeration(e,t.contact.name)})}))},this._makeNameEnumeration=(e,t)=>{const a=e.map((e=>e.formattedShortName||e.shortName)).reduce(((t,a,n)=>[...t,a,n!==e.length-1&&c.default.t(771)||""]),[]);return c.default.t(641,{participants:a.join(""),subject:t})},this.onAddParticipant=e=>{(0,u.addParticipants)(this.props.chat,e).catch((()=>{})),s.Cmd.closeModal()},this._pop=()=>{this.pop()}}componentDidMount(){this.push((0,p.jsx)(f.SelectModal,{onConfirm:this.confirmAddParticipant,filter:this.contactFilter,title:i.default._("Add participant",null,{hk:"48ECfz"}),isDisabled:this._isGroupParticipant,isSelected:this._isGroupParticipant,customSecondaryText:this.customSecondaryText,listType:f.ListType.PARTICIPANT_MANAGE_MODAL,singleSelectionFooterType:h.FooterType.CONFIRM,multipleSelectionFooterType:h.FooterType.CONFIRM,shouldShowSelectionSummary:!1}))}}t.default=m},78158:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(8298)),s=n(a(82108)),o=n(a(3998)),l=n(a(3439)),r=a(85893);class d extends o.default{constructor(...e){super(...e),this._showArchiveSettingsDrawer=()=>{this.push((0,r.jsx)(i.default,{settings:l.default,onClose:this._pop}))},this._pop=()=>{this.pop()}}componentDidMount(){this.push((0,r.jsx)(s.default,{showSettings:this._showArchiveSettingsDrawer,onClose:this._pop,settings:l.default}))}}t.default=d},52717:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(48926)),s=a(67294),o=a(45209),l=a(84140),r=a(13073),d=n(a(39178)),c=n(a(72543)),u=a(27001),f=n(a(3998)),h=n(a(79276)),p=a(85893);class m extends f.default{componentDidMount(){this.push((0,p.jsx)(x,{contactId:this.props.contactId,onClose:this.pop}))}}function x(e){const{contactId:t}=e,[a,n]=(0,s.useState)(void 0),[f,m]=(0,s.useState)(!0);(0,s.useEffect)((()=>{(function(){var e=(0,i.default)((function*(){const e=yield o.BusinessProfileCollection.update(t,{getMerchantCompliance:!0}),a=(Array.isArray(e)?e[0]:e).serialize();a?(n(a.legalEntityDetails||void 0),m(!1)):__LOG__(3)`compliance: cannot fetch business details (${t.toString()})`}));return function(){return e.apply(this,arguments)}})()()}),[]);const{entityName:x,customerCareDetails:g,grievanceOfficerDetails:C}=null!=a?a:{},v=(0,r.getEntityTypeText)(a);return(0,p.jsxs)(d.default,{theme:"striped",children:[(0,p.jsx)(u.DrawerHeader,{title:h.default.t(321),type:u.DRAWER_HEADER_TYPE.SMALL,onCancel:e.onClose}),(0,p.jsx)(c.default,{theme:f?"center-content":void 0,children:f?(0,p.jsx)(l.ComplianceInfoLoading,{}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(l.ComplianceInfoGroup,{children:[(0,p.jsx)(l.ComplianceInfoPrimitiveField,{value:x,label:h.default.t(336)}),(0,p.jsx)(l.ComplianceInfoPrimitiveField,{value:v,label:h.default.t(337)})]}),(0,p.jsxs)(l.ComplianceInfoGroup,{title:h.default.t(316),children:[(0,p.jsx)(l.ComplianceInfoPrimitiveField,{value:null==g?void 0:g.mobileNumber,label:h.default.t(319),forceLTR:!0}),(0,p.jsx)(l.ComplianceInfoPrimitiveField,{value:null==g?void 0:g.landlineNumber,label:h.default.t(318),forceLTR:!0}),(0,p.jsx)(l.ComplianceInfoPrimitiveField,{value:null==g?void 0:g.email,label:h.default.t(317)})]}),(0,p.jsxs)(l.ComplianceInfoGroup,{title:h.default.t(328),children:[(0,p.jsx)(l.ComplianceInfoPrimitiveField,{value:null==C?void 0:C.name,label:h.default.t(332)}),(0,p.jsx)(l.ComplianceInfoPrimitiveField,{value:null==C?void 0:C.mobileNumber,label:h.default.t(331),forceLTR:!0}),(0,p.jsx)(l.ComplianceInfoPrimitiveField,{value:null==C?void 0:C.landlineNumber,label:h.default.t(330)}),(0,p.jsx)(l.ComplianceInfoPrimitiveField,{value:null==C?void 0:C.email,label:h.default.t(329)})]})]})})]},"merchant-details-modal")}t.default=m},60245:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(81109)),s=n(a(17473)),o=n(a(88289)),l=n(a(22542)),r=a(2751),d=a(57629),c=n(a(17497)),u=n(a(10389)),f=a(24160),h=n(a(28415)),p=a(76769),m=n(a(87656)),x=n(a(3998)),g=a(37268),C=a(18675),v=n(a(86295)),_=a(78319),j=a(7040),S=n(a(10676)),E=a(29566),I=a(461),M=a(69104),T=a(34052),b=n(a(4040)),y=a(91546),w=a(23773),P=n(a(99056)),N=a(88697),k=n(a(56103)),A=a(71959),O=n(a(16097)),D=a(19081),R=a(83770),L=a(99343),G=a(8604),B=n(a(23625)),F=a(90100),V=a(75906),U=a(85893);class H extends x.default{constructor(...e){super(...e),this._scrollOffset=0,this._setScrollOffset=e=>{this._scrollOffset=e},this.onProductDetail=(e,t)=>{const{chat:a}=this.props,n=(0,U.jsx)(P.default,{chat:a,collectionId:t,product:e,onEnd:this._end,onBack:this._popAndUpdate,refreshCarousel:!1,onProductLinkClick:this._onProductLinkClick,onProductMoreInformation:this.onProductMoreInformation,onCartClick:this._onCartClick});this.push(n)},this.onProductDetailFromInfo=e=>{const t=(0,U.jsx)(N.ProductDetailsWithDeepLink,{chat:this.props.chat,productInfo:e,onEnd:this._end,onBack:this._pop,onProductDetail:this.onProductDetail,onProductCatalog:this.onProductCatalogHeaderClick,onProductLinkClick:this._onProductLinkClick,onProductMoreInformation:this.onProductMoreInformation,onCartClick:this._onCartClick});this.push(t)},this.onCollectionSeeAll=e=>{const t=this.props.chat.id;this.push((0,U.jsx)(d.CollectionContentDrawer,{contact:this.props.chat.contact,onProductDetail:this.onProductDetail,catalogId:t,onBack:this._pop,onCatalogLinkClick:this._onCatalogLinkClick,onCartClick:this._onCartClick,collection:e}))},this._onProductLinkClick=e=>{this.push((0,U.jsx)(k.default,{product:e,onBack:this._pop}))},this.onProductMoreInformation=e=>{const t=(0,U.jsx)(O.default,{product:e,onBack:this._popAndUpdate});this.push(t)},this._onCatalogLinkClick=(e,t)=>{this.push((0,U.jsx)(o.default,{catalog:e,contact:t,onBack:this._pop}))},this._onCartClick=e=>{const t=(0,y.getProductCatalogContext)(this.props.context),a=(0,B.default)(e,this.props.chat,t);a&&this.push(a)},this.pushProductCatalog=()=>{const{chat:e}=this.props,t=(0,C.canViewCollections)()?(0,U.jsx)(l.default,{contact:e.contact,onProductDetail:this.onProductDetail,catalogId:e.id,onBack:this._pop,businessProfile:e.contact.businessProfile,onCatalogLinkClick:this._onCatalogLinkClick,onCartClick:this._onCartClick,onCollectionSeeAll:this.onCollectionSeeAll}):(0,U.jsx)(A.ProductListDrawer,{contact:e.contact,onProductDetail:this.onProductDetail,catalogId:e.id,onBack:this._pop,businessProfile:e.contact.businessProfile,onCatalogLinkClick:this._onCatalogLinkClick,onCartClick:this._onCartClick});this.push(t)},this.onProductCatalog=(e,t)=>{const a=this.props.chat.id;(0,C.canViewCollections)()&&L.QPL.markerStart(G.QuickLogMarkerId.WHATSAPP_CATALOG_COLLECTIONS_VIEW,{string:{EntryPoint:t}}),(0,M.logCarouselViewMoreClick)({catalogOwnerWid:a,catalogContext:e}),this.pushProductCatalog(a)},this.onProductCatalogHeaderClick=(e,t)=>{(0,M.logCarouselViewMoreClick)({catalogOwnerWid:e,catalogContext:t}),this.onProductCatalog(t,"ProductCatalogHeader")},this.onStarred=()=>{const e=(0,U.jsx)(F.StarredDrawerLoadable,{chat:this.props.chat,starredMsgs:this.props.chat.getStarredMsgs(),onClose:this._pop});this.push(e)},this.onAdminSetting=()=>{const{chat:e}=this.props,t=(0,U.jsx)(S.default,{chat:e,groupMetadata:e.groupMetadata,onClose:this._pop});this.push(t)},this.onContactCard=()=>{this.push((0,U.jsx)(c.default,{chat:this.props.chat,onClose:this._pop}))},this.onMediaGallery=()=>{const e=(0,U.jsx)(T.MediaGalleryDrawer,{chat:this.props.chat,onBack:this._pop,onProductDetail:this.onProductDetail,setProductsScrollOffset:this._setScrollOffset});this.push(e)},this.onGroupInviteLink=()=>{const{chat:e}=this.props;if(e.isInviteGrowthLockedGroup()){var t;const a=!!(null===(t=e.groupMetadata)||void 0===t?void 0:t.participants.iAmAdmin());return void(0,j.openGrowthLockedModal)(a,!0)}const a=(0,U.jsx)(_.GroupInviteLinkDrawerLoadable,{chat:this.props.chat,groupMetadata:e.groupMetadata,onBack:this._pop});this.push(a)},this._pop=()=>{this.pop()},this._popAndUpdate=()=>{this.popAndUpdate({initialTab:T.TABS.PRODUCTS,productsScrollOffset:this._scrollOffset})},this._end=()=>{this.end(!0)},this.onVerification=e=>{const t=e||this.props.chat.contact,a=(0,U.jsx)(V.VerificationDrawerLoadable,{contact:t,onClose:this._pop,isFirstLevel:!1});this.push(a)},this.onLiveLocation=()=>{const e=(0,U.jsx)(I.LiveLocationDrawerLoadable,{chat:this.props.chat,onClose:this._pop});this.push(e)},this._handleDDMSettingsClick=()=>{this.push((0,U.jsx)(h.default,{onClose:this._pop}))},this.onEphemeral=()=>{const{chat:e}=this.props,t=(0,U.jsx)(m.default,{chat:e,showNux:!1,entryPoint:b.default.EPHEMERAL_SETTING_ENTRY_POINT_TYPE.CHAT_INFO,onClose:this._pop,onDDMSettingsClick:this._handleDDMSettingsClick});this.push(t)}}componentDidMount(){const e=this.onStarred,t=this.onMediaGallery,a=this.props.chat;if(a.isGroup){var n;if(g.GK.supportsFeature(g.GK.F.MD_BACKEND))(0,D.queryAndUpdateGroupMetadataById)(a.id),(0,C.communitiesEnabled)()&&(null===(n=a.groupMetadata)||void 0===n?void 0:n.groupType)===E.GroupType.COMMUNITY&&(0,R.queryAndUpdateSubGroupMetadataById)(a.id);this.push((0,U.jsx)(v.default,{chat:a,showFullGroupDescription:this.props.showFullGroupDescription,scrollToParticipantList:this.props.scrollToParticipantList,groupMetadata:a.groupMetadata,contact:a.contact,profilePicThumb:a.contact.getProfilePicThumb(),onVerification:this.onVerification,onStarred:e,onMediaGallery:t,onAdminSetting:this.onAdminSetting,onGroupInviteLink:this.onGroupInviteLink,onLiveLocation:this.onLiveLocation,onEphemeral:this.onEphemeral,onClose:this._pop}))}else a.isBroadcast?this.push((0,U.jsx)(s.default,{chat:a,contact:a.contact,onStarred:e,onMediaGallery:t,onClose:this._pop})):a.isUser&&(a.contact.isBusiness&&(0,C.canSeeBizProfileV3)()&&r.Cmd.setDrawerContext("right",(0,y.buildProductCatalogContext)(new w.ProductCatalogSession,(0,f.getMaybeBizPlatformForLogging)(a.contact.id.toString()),b.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_PROFILE)),this.push((0,U.jsx)(u.default,{contact:a.contact,onVerification:this.onVerification,onStarred:e,onContactCard:this.onContactCard,onMediaGallery:t,onProductCatalog:this.onProductCatalog,onProductDetail:this.onProductDetail,onLiveLocation:this.onLiveLocation,onEphemeral:this.onEphemeral,onClose:this._pop,profileEntryPoint:this.props.profileEntryPoint})))}}t.default=e=>(0,U.jsx)(p.DrawerContext.Consumer,{children:t=>(0,U.jsx)(H,(0,i.default)({context:t},e))})},1927:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const{msg:a,highlightedMsgIds:n}=e,M=(0,S.default)(),T=(0,j.default)(),b=(0,m.default)(),y=(0,x.default)((()=>a.chat.constructMediaMsgs(a))),w=(0,x.default)((()=>a.type===l.default.MSG_TYPE.IMAGE?new p.default.UiAction({uiActionType:p.default.UI_ACTION_TYPE.IMAGE_OPEN,uiActionPreloaded:a.mediaData.mediaStage===u.MEDIA_DATA_STAGE.RESOLVED}):null)),P=(0,s.useRef)(null),N=(0,s.useRef)(),k=(0,s.useRef)(),A=(0,s.useRef)(null),O=(0,s.useRef)(null),D=(0,s.useRef)(null),[R,L]=(0,s.useState)(a),[G,B]=(0,s.useState)(!1),[F,V]=(0,s.useState)(!0),U=(0,C.default)(R),H=(e=!1)=>{const t=O.current,a=D.current,n=A.current;if(!t||!a||!n)return;let i=0;n instanceof HTMLElement&&(i=n.clientWidth/2-t.clientWidth/2),(0,E.default)(a,"stop");let s=0;e&&(s=300),(0,E.default)(n,"scroll",{duration:s,container:a,offset:i,axis:"x",easing:[.1,.82,.25,1]})},W=e=>{if(!e)return!0;const{isViewOnce:t,isStickerMsg:a}=e;return!t&&!a};(0,s.useEffect)((()=>{var e;H(),W(a)&&(e=O.current)&&(0,E.default)(e,{opacity:[1,0],translateY:["0%","100%"]},{duration:300,delay:100,easing:[.1,.82,.25,1]}).then((()=>{M.aborted||V(!1)}))}),[]);const K=e=>{T((()=>{y.current.loadMoreAroundIfNeeded(e)})),L(e)},q=e=>{if(e&&e.stopPropagation(),G)return;const t=R;if(!t)return;let n=null;for(n=y.current.getAfter(t);(null===(i=n)||void 0===i?void 0:i.mediaData)&&!(0,c.hasThumbnail)(n.mediaData);){var i;n=y.current.getAfter(n)}n?K(n):y.current.hasMediaAfter&&(N.current||(N.current=y.current.queryMedia({chat:a.chat,msg:a,direction:"after"}).then((e=>{M.aborted||"number"==typeof e.length&&e.length>0&&R===a&&q()})).catch((()=>{__LOG__(3)`query media msgs error: `})).finally((()=>{N.current=null}))))},z=e=>{if(e&&e.stopPropagation(),G)return;const t=R;if(!t)return;let n=null;for(n=y.current.getBefore(t);(null===(i=n)||void 0===i?void 0:i.mediaData)&&!(0,c.hasThumbnail)(n.mediaData);){var i;n=y.current.getBefore(n)}n?K(n):y.current.hasMediaBefore&&(k.current||(k.current=y.current.queryMedia({chat:a.chat,msg:a,direction:"before"}).then((e=>{M.aborted||"number"==typeof e.length&&e.length>0&&R===a&&z()})).catch((()=>{__LOG__(3)`query media msgs error: `})).finally((()=>{k.current=null}))))},Y=()=>{o.Cmd.closeModalMedia()},X=(0,v.default)((()=>{L(null),Y()})),$=(null==R?void 0:R.isViewOnce)||(null==R?void 0:R.isStickerMsg);(0,g.useListener)($?R:null,"revoked",X),(0,s.useEffect)((()=>{if($&&(null==R?void 0:R.isEphemeral)){const e=R.timeUntilExpiration();null!=e&&setTimeout(X,1e3*e)}}),[R,X,$]);const Z=$?null:y.current;(0,g.useListener)(Z,"remove",((e,t,n)=>{const s=y.current,o=R;if(s.includes(a)||null!=o&&null!=o.id&&o.id.toString()!==e.id.toString())return void b();const l=n.index;0===s.length?Y():s.length===l?K((0,i.default)(s.at(l-1),"mediaMsgs.at(index - 1)")):K((0,i.default)(s.at(l),"mediaMsgs.at(index)"))})),(0,g.useListener)(Z,"reset",(()=>{Y()})),(0,g.useListener)(Z,"query_media_after",(()=>{b()})),(0,g.useListener)(Z,"query_media_before",(()=>{const e=D.current;e&&(P.current=e.scrollWidth,e instanceof HTMLElement&&b())})),(0,g.useListener)(window,"keydown",(e=>{const t=d.default.isRTL();37===e.keyCode?t?q():z():39===e.keyCode&&(t?z():q())})),(0,s.useEffect)((()=>{T((()=>{R&&y.current.loadMoreAroundIfNeeded(R)}))}),[R,y,T]),(0,s.useEffect)((()=>{if(U!==R)H(!0);else{const e=D.current;if(!e||null==P.current||0===P.current)return;e instanceof HTMLElement&&(e.scrollLeft+=e.scrollWidth-P.current),P.current=null}}),[R,U]);const Q=(0,_.default)(((e,t,a)=>{if(0!==t.length&&null!=a){if(t.hasMediaBefore&&a<e.clientWidth){const e=(0,i.default)(t.head(),"mediaMsgs.head()");T((()=>{t.queryMedia({chat:e.chat,msg:e}),b()}))}if(t.hasMediaAfter&&a+l.default.SCROLL_FUDGE>e.scrollWidth-2*e.clientWidth){const e=(0,i.default)(t.last(),"mediaMsgs.last()");T((()=>{t.queryMedia({chat:e.chat,msg:e,direction:"after"}),b()}))}}}),100);if(!R)return null;const J=y.current,ee=J.last(),te=J.hasMediaAfter||R!==ee?q:null,ae=J.head();let ne=null;ne=J.hasMediaBefore||R!==ae?z:null,r.GK.supportsFeature(r.GK.F.MD_BACKEND)&&(ne=(J.hasMediaBefore||R!==ae)&&(()=>{if(!R)return!1;for(let e=y.current.indexOf(R)-1;e>0;e--){const t=y.current.at(e);if(t&&(0,c.hasThumbnail)(t.mediaData))return!0}return!1})()?z:null);return(0,I.jsxs)("div",{className:G?"img-zoomed-in":null,children:[W(R)&&(0,I.jsx)(h.default,{activeMsg:R,mediaMsgs:y.current,highlightedMsgIds:e.highlightedMsgIds,onSelectThumb:K,onSetActiveThumb:e=>{A.current=e},onScroll:e=>{Q(e.currentTarget,y.current,e.currentTarget.scrollLeft)},setRefThumbsContainer:e=>{O.current=e},setRefThumbs:e=>{D.current=e}}),(0,I.jsx)(f.default,{msg:R,mediaData:R.mediaData,onBack:Y,onExitAnimation:()=>{var e;W(a)&&(e=O.current)&&(0,E.default)(e,{opacity:[0,1],translateY:["100%","0%"]},{duration:300,easing:[.1,.82,.25,1]})},onNext:te,onPrev:ne,onImgZoomIn:e=>{B(e)},getZoomNode:e.getZoomNode,startTime:e.startTime,isAnimatingIn:F,onImageLoad:w.current?()=>{const e=w.current;e&&(e.markUiActionT(),e.commit(),w.current=null)}:null,msgIndexInAlbum:(()=>{let e=-1;if(!n||!R)return e;const t=R.id.toString();if(!n.has(t))return e;let a=0;return n.forEach((n=>{n===t&&(e=a),a++})),e})(),albumSize:(null===(t=e.highlightedMsgIds)||void 0===t?void 0:t.size)||0})]})};var i=n(a(58721)),s=a(67294),o=a(2751),l=n(a(11547)),r=a(37268),d=n(a(79276)),c=a(16248),u=a(56341),f=n(a(78281)),h=n(a(63256)),p=n(a(4040)),m=n(a(79830)),x=n(a(28905)),g=a(64514),C=n(a(31220)),v=n(a(16765)),_=n(a(21797)),j=n(a(2014)),S=n(a(6232)),E=n(a(81762)),I=a(85893)},90731:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.SendContactFlowLoadable=t.requireBundle=void 0;var i=n(a(48926)),s=n(a(68356)),o=n(a(11547)),l=n(a(79276)),r=n(a(29545)),d=n(a(11694)),c=a(85893);const u=(0,d.default)((0,i.default)((function*(){return(yield Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,2790))).default})),"SendContactFlow");t.requireBundle=u;const f=(0,s.default)({loader:u,loading:e=>(0,c.jsx)(r.default,{title:l.default.t(1629),error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.SendContactFlowLoadable=f},82108:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onClose:t}=e,a=()=>r.ChatCollection.filter((e=>e.archive&&e.shouldAppearInList)),n=(0,A.useModelValues)(e.settings,["showArchiveV2","archive"]),R=(0,N.default)((()=>new C.default)),L=(0,N.default)((()=>new y.default([],(e=>e.id.toString())))),G=(0,i.useRef)(null),[B,F]=(0,i.useState)(!1),[V,U]=(0,i.useState)(a),H=()=>(0,E.archiveV2Supported)()&&n.showArchiveV2;(0,k.useListener)(r.ChatCollection,[H()?"sort":null,"change:archive","add","remove"].filter(Boolean),(()=>{U(a())}));const W=e=>{L.current.setVal(e,!1)};(0,k.useListener)(d.Cmd,"close_chat",(e=>{e===L.current.getVal()&&L.current.unset()})),(0,k.useListener)(d.Cmd,"update_chatlist_selection",W);const K=()=>{const e=r.ChatCollection.some((e=>e.archive));return H()&&e&&(0,j.shouldShowNUX)(c.default.NUX.ARCHIVE)&&!B};(0,i.useEffect)((()=>{if(H()&&!(0,j.getNUX)(c.default.NUX.ARCHIVE)&&(0,j.setNUX)(c.default.NUX.ARCHIVE,{views:0,maxViews:c.default.ARCHIVE_NUX_MAX_VIEWS}),K()&&(0,j.viewNUX)(c.default.NUX.ARCHIVE),H()&&(0,T.isElevatedImportantMessageEnabled)()){const e=a(),t=new Map;e.forEach((e=>{e.archiveAtMentionViewedInDrawer=!0,t.set(e.id.toString(),!0)})),(0,l.updateChatArchiveDrawer)(t)}G.current&&_.default.focus(G.current);const e=r.ChatCollection.toArray().find((e=>e.active&&e.archive));e&&W(e)}),[]);const q=()=>{t()},z=(e,t)=>{d.Cmd.openChatFromUnread(t).then((e=>{e&&d.Cmd.focusChatTextInput(t)})),(0,E.archiveV2Supported)()&&n.archive.enabled||q()},Y=e=>{e.preventDefault(),e.stopPropagation(),L.current.setNext(!0)},X=e=>{e.preventDefault(),e.stopPropagation(),L.current.setPrev(!0)},$=e=>(0,D.jsx)(o.Chat,{chat:e.chat,mode:o.Mode.LAST,active:L.current,onClick:z,hideArchivedIcon:(0,E.archiveV2Supported)()&&n.archive.enabled,hideMuteIcon:H(),hideMuteOption:H(),ephemeralIcon:"chat-list"}),Z=e=>{G.current=e},Q=()=>{(0,j.setNUX)(c.default.NUX.ARCHIVE,{views:c.default.ARCHIVE_NUX_MAX_VIEWS,maxViews:c.default.ARCHIVE_NUX_MAX_VIEWS}),F(!0)};let J,ee;L.current.init(V,!0),K()&&(J=(0,D.jsxs)("div",{className:s.default.nuxContainer,children:[(0,D.jsxs)(v.FlexColumn,{align:"center",children:[(0,D.jsx)("span",{className:s.default.nuxIcon,children:(0,D.jsx)(w.default,{name:"archive-nux"})}),(0,D.jsx)("div",{className:s.default.nuxHeader,children:(0,D.jsx)(P.Text,{theme:"large",as:"h1",children:M.default.t(172)})}),(0,D.jsx)("div",{className:s.default.nuxContent,children:(0,D.jsx)("div",{className:s.default.nuxText,children:(0,D.jsx)(P.Text,{theme:"plain",as:"p",children:S.GK.supportsFeature(S.GK.F.MD_BACKEND)?M.default.t(171):M.default.t(170)})})})]}),(0,D.jsx)("button",{onClick:Q,className:s.default.btnClose,children:(0,D.jsx)(w.default,{name:"x-alt"})})]}));ee=V.length>0?(0,D.jsxs)(I.HotKeys,{onRef:Z,handlers:{down:Y,up:X},children:[(0,D.jsx)(O.default,{transitionName:"slide",children:J}),(0,D.jsx)(g.FlatList,{className:s.default.flatListContainer,data:V.map((e=>({itemKey:e.id.toString(),chat:e}))),flatListController:R.current,direction:"vertical",renderItem:$})]}):(0,D.jsx)(x.Archived,{});const te=!S.GK.supportsFeature(S.GK.F.MD_BACKEND)&&(0,E.archiveV2Supported)()&&n.archive.enabled?(0,D.jsx)(b.MenuBarItem,{a8nText:"archived-menu",icon:(0,D.jsx)(w.default,{name:"menu"}),title:M.default.t(1222),children:(0,D.jsx)(p.Dropdown,{type:"dropdown_menu",flipOnRTL:!0,dirX:p.DirX.LEFT,children:(0,D.jsx)(m.DropdownItem,{a8n:"open-archive-settings menu-item",action:e.showSettings,children:M.default.t(173)})},"ArchivedDrawerHeader")}):null,ae=(0,E.archiveV2Supported)()&&n.archive.enabled?M.default.t(176):M.default.t(175);return(0,D.jsxs)(u.default,{theme:"archived",children:[(0,D.jsx)(h.DrawerHeader,{title:ae,onBack:q,type:h.DRAWER_HEADER_TYPE.LARGE,menu:te}),(0,D.jsx)(f.default,{flatListControllers:[R.current],children:ee})]})};var i=a(67294),s=n(a(82338)),o=a(12725),l=a(67418),r=a(91129),d=a(2751),c=n(a(11547)),u=n(a(39178)),f=n(a(72543)),h=a(27001),p=a(45875),m=a(63810),x=a(21050),g=a(80680),C=n(a(54612)),v=a(71092),_=n(a(95573)),j=a(26205),S=a(37268),E=a(18675),I=a(82735),M=n(a(79276)),T=a(10913),b=a(40370),y=n(a(79702)),w=n(a(15817)),P=a(51183),N=n(a(28905)),k=a(64514),A=a(90370),O=n(a(58727)),D=a(85893)},44070:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,h.useModelValues)(e.contact,["name","verifiedLevel","verifiedName","formattedName"]);let a;a=u.GK.supportsFeature(u.GK.F.VNAME_V_2)?(()=>{switch(t.verifiedLevel){case l.default.VERIFIED_LEVEL.HIGH:return t.name===t.verifiedName?f.default.t(1965,{businessName:t.verifiedName}):f.default.t(1966,{businessName:t.verifiedName});case l.default.VERIFIED_LEVEL.LOW:case l.default.VERIFIED_LEVEL.UNKNOWN:return f.default.t(1967)}})():(()=>{switch(t.verifiedLevel){case l.default.VERIFIED_LEVEL.HIGH:return f.default.t(2253);case l.default.VERIFIED_LEVEL.LOW:return f.default.t(2255);case l.default.VERIFIED_LEVEL.UNKNOWN:return f.default.t(2257,{businessName:t.formattedName})}})();const n=(0,p.jsx)(i.default,{href:(0,c.getBusinessFaqUrl)(),onClick:x,children:f.default.t(1090)});return(0,p.jsxs)(o.default,{onOK:m,okText:f.default.t(1377),children:[(0,p.jsx)(r.EmojiText,{text:a}),"",n]})};var i=n(a(68708)),s=a(2751),o=n(a(72021)),l=n(a(11547)),r=a(86757),d=a(90701),c=a(9730),u=a(37268),f=n(a(79276)),h=a(90370),p=a(85893);const m=()=>{s.Cmd.closeModal()},x=e=>{e.preventDefault(),s.Cmd.closeModal("none"),setTimeout((()=>(0,d.openExternalLink)((0,c.getBusinessFaqUrl)())),10)}},4856:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({contact:e}){const{verifiedLevel:t,verifiedName:a}=(0,C.useModelValues)(e,["verifiedLevel","verifiedName"]),n=(0,h.getBusinessFaqUrl)(),_=!d.Conn.isSMB;(0,i.useEffect)((()=>{_&&new m.default.BannerEvent({bannerType:m.default.BANNER_TYPES.CROSS_SELL_PROFILE_INTERSTITIAL,bannerOperation:m.default.BANNER_OPERATIONS.SHOWN}).commit()}),[_]);const j=t===c.default.VERIFIED_LEVEL.HIGH?p.default.t(2241,{businessName:a}):p.default.t(2240);return(0,v.jsxs)(r.default,{title:p.default.t(2243),onOK:()=>{l.Cmd.closeModal(),_&&new m.default.BannerEvent({bannerType:m.default.BANNER_TYPES.CROSS_SELL_PROFILE_INTERSTITIAL,bannerOperation:m.default.BANNER_OPERATIONS.DISMISS}).commit()},okText:p.default.t(2167),children:[(0,v.jsx)(u.EmojiText,{text:j}),"",(0,v.jsx)(o.default,{href:n,onClick:e=>{e.preventDefault(),l.Cmd.closeModal(),setTimeout((()=>(0,f.openExternalLink)(n)),10)},children:p.default.t(1090)}),_&&(0,v.jsx)("div",{className:s.default.footerNote,children:(0,v.jsxs)(g.TextSpan,{theme:"muted",size:"13",children:[p.default.t(2244),(0,v.jsx)("br",{}),(0,v.jsx)(o.default,{onClick:e=>{e.preventDefault(),l.Cmd.closeModal(),new m.default.BannerEvent({bannerType:m.default.BANNER_TYPES.CROSS_SELL_PROFILE_INTERSTITIAL,bannerOperation:m.default.BANNER_OPERATIONS.CLICK}).commit(),setTimeout((()=>l.Cmd.openModal((0,v.jsx)(x.SmbAppUpsellModal,{}))),200)},className:s.default.getTheAppLink,children:p.default.t(2242)})]})})]})};var i=a(67294),s=n(a(19713)),o=n(a(68708)),l=a(2751),r=n(a(72021)),d=a(13798),c=n(a(11547)),u=a(86757),f=a(90701),h=a(9730),p=n(a(79276)),m=n(a(4040)),x=a(49612),g=a(51183),C=a(90370),v=a(85893)},49612:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.SmbAppUpsellModal=function(){return(0,f.jsxs)(o.default,{title:d.default.t(2247),onOK:()=>{new c.default.BannerEvent({bannerType:c.default.BANNER_TYPES.CROSS_SELL_PROFILE_INTERSTITIAL,bannerOperation:c.default.BANNER_OPERATIONS.DISMISS}).commit(),s.Cmd.closeModal()},okText:d.default.t(1985),children:[(0,f.jsx)(u.default,{}),(0,f.jsx)("p",{children:(0,f.jsx)(l.EmojiText,{text:d.default.t(2245)})}),(0,f.jsx)("br",{}),(0,f.jsxs)("p",{children:[(0,f.jsx)(l.EmojiText,{text:d.default.t(2246)}),"",(0,f.jsx)(i.default,{href:h,onClick:e=>{e.preventDefault(),s.Cmd.closeModal(),setTimeout((()=>(0,r.openExternalLink)(h)),10)},children:d.default.t(1090)})]})]})},t.WHATSAPP_BUSINESS_URL=void 0;var i=n(a(68708)),s=a(2751),o=n(a(72021)),l=a(86757),r=a(90701),d=n(a(79276)),c=n(a(4040)),u=n(a(64601)),f=a(85893);const h="https://www.whatsapp.com/business";t.WHATSAPP_BUSINESS_URL=h},64601:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const e=(0,s.useRef)(null),t=(0,s.useRef)(null),{theme:a}=(0,s.useContext)(d.ThemeContext),n="dark"===a;return(0,s.useEffect)((()=>(null!=e.current&&(t.current=new l.default(e.current,{text:"https://www.whatsapp.com/business/download",colorDark:"#122e31",colorLight:"#ffffff",width:o.default.QR_EDGE/2,height:o.default.QR_EDGE/2,typeNumber:4,correctLevel:l.default.CorrectLevel.H})),()=>{null!=t.current&&(t.current.clear(),t.current=null,e.current=null)})),[n]),(0,c.jsx)("div",{className:r.default.wrapper,children:(0,c.jsx)("div",{ref:e,className:(0,i.default)(r.default.code,{[r.default.codeDarkMode]:n}),children:(0,c.jsx)(u,{theme:a})})})};var i=n(a(94184)),s=a(67294),o=n(a(11547)),l=n(a(37360)),r=n(a(37154)),d=a(43775),c=a(85893);function u(){return(0,c.jsx)("div",{className:r.default.codeLogo,children:(0,c.jsx)("svg",{width:"100%",viewBox:"0 0 50 50",xmlns:"http://www.w3.org/2000/svg",children:(0,c.jsx)("path",{d:"M42.6776 42.6779C37.9558 47.3997 31.6777 50.0001 24.9999 50.0001C21.0047 50.0001 17.0541 49.0389 13.5244 47.2141L0.601068 49.3339L2.72832 36.3645C0.941278 32.8647 0 28.9525 0 25.0001C0 18.3223 2.60042 12.0443 7.32229 7.32237C12.0442 2.6005 18.3221 0 24.9999 0C31.6777 0 37.9558 2.6005 42.6776 7.32237C47.3995 12.0443 50 18.3223 50 25.0001C50 31.678 47.3995 37.9558 42.6776 42.6779ZM24.9999 4.33778C13.6067 4.33778 4.33772 13.607 4.33772 25.0001C4.33772 28.4792 5.21935 31.9192 6.8868 34.9487L7.24853 35.6054L5.85915 44.0756L14.2959 42.6918L14.9565 43.0601C18.0107 44.7624 21.4837 45.6622 24.9999 45.6622C36.3932 45.6622 45.6622 36.3933 45.6622 25.0001C45.6622 13.607 36.3932 4.33778 24.9999 4.33778ZM31.1133 24.3614C32.4522 24.9804 34.1536 26.3725 34.1208 29.3117C34.0749 33.4266 31.2191 35.6542 27.2744 35.6542H19.4594H18.3042C17.5079 35.6542 16.8645 35.0053 16.8713 34.2092L17.0344 15.0573C17.041 14.2714 17.6794 13.6377 18.4652 13.6366L27.1493 13.6256C31.4651 13.6256 33.9598 16.039 33.9177 19.8134C33.8903 22.2579 32.2484 23.8355 31.1133 24.3614ZM26.766 17.4622H21.3643L21.3076 22.5361H26.7093C28.5347 22.5361 29.5672 21.5152 29.584 19.9992C29.6009 18.4831 28.5915 17.4622 26.766 17.4622ZM26.9444 26.4035H21.2643L21.2038 31.8178H26.884C28.8333 31.8178 29.7752 30.5802 29.792 29.0952C29.8085 27.6101 28.8939 26.4035 26.9444 26.4035Z",fill:"currentColor"})})})}},17473:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,y.default)(),a=(0,w.useNewChatInfoColors)();return(0,P.jsx)(A,(0,i.default)((0,i.default)({},e),{},{newChatInfo:t,style:t?a:null}))};var i=n(a(81109)),s=a(67294),o=n(a(56720)),l=n(a(89735)),r=n(a(43148)),d=(n(a(24033)),a(39140)),c=n(a(46693)),u=a(21810),f=a(2751),h=n(a(39178)),p=(n(a(9598)),n(a(72543))),m=n(a(62125)),x=a(27001),g=n(a(72578)),C=n(a(63308)),v=n(a(54612)),_=a(37268),j=n(a(30268)),S=n(a(79276)),E=a(38428),I=n(a(23080)),M=a(83040),T=n(a(15817)),b=a(51183),y=n(a(43113)),w=a(68386),P=a(85893);const N={flexGrow:"tvf2evcx",flexShrink:"oq44ahr5",flexBasis:"lb5m6g5c",paddingBottom:"s9fl9ege"};class k extends s.Component{constructor(...e){super(...e),this.flatListController=new v.default,this.handleClose=()=>{this.props.onClose?this.props.onClose():this.props.uim.uie.requestDismiss()},this.handleDelete=()=>{f.Cmd.deleteOrExitChat((0,M.unproxy)(this.props.chat))},this.showEncryptionInfoPopup=()=>{f.Cmd.openModal((0,P.jsx)(g.default,{chatId:this.props.chat.id,e2eSubtype:"info_encrypted"}))}}componentDidMount(){const e=this.props.chat.groupMetadata;null!=e&&this.props.listeners.add(e.participants,"add remove sort reset",(()=>{this.forceUpdate()}))}render(){var e;const t=this.props.chat;let a=null;this.props.onMediaGallery&&(a=(0,P.jsx)(c.default,{onMediaGallery:this.props.onMediaGallery,chat:(0,M.unproxy)(t)}));const n=(0,P.jsx)(d.ChatInfoDrawerButtonsSection,{newChatInfo:this.props.newChatInfo,children:(0,P.jsx)(m.default,{a8nText:"li-delete-broadcast",icon:(0,P.jsx)(T.default,{name:"delete"}),color:"danger",theme:this.props.newChatInfo?"new-chat-info":"list-aligned",onClick:this.handleDelete,children:S.default.t(2018)})});let i;(null===(e=t.groupMetadata)||void 0===e?void 0:e.creation)?(i=u.Clock.createdStr(t.groupMetadata.creation),i=(0,P.jsx)(b.TextDiv,{theme:"small",children:i})):i=null;let s=null;_.GK.supportsFeature(_.GK.F.MD_BACKEND)&&(s=(0,P.jsx)(C.default,{onClick:this.showEncryptionInfoPopup,text:S.default.t(1961),theme:this.props.newChatInfo?"new-chat-info":null}));let f=null;return s&&(f=(0,P.jsxs)(d.ChatInfoDrawerSection,{newChatInfo:this.props.newChatInfo,children:[null,s]})),(0,P.jsxs)(h.default,{theme:"striped",style:this.props.style,children:[(0,P.jsxs)(x.DrawerHeader,{type:x.DRAWER_HEADER_TYPE.SMALL,onCancel:this.handleClose,children:[(0,P.jsx)(b.TextDiv,{theme:"title",children:S.default.t(307)}),i]}),(0,P.jsx)(p.default,{flatListControllers:[this.flatListController],children:(0,P.jsxs)("div",{className:(0,o.default)(N),children:[(0,P.jsx)(r.default,{chat:(0,M.unproxy)(t)}),a,undefined,f,(0,P.jsx)(l.default,{chat:(0,M.unproxy)(t),flatListController:this.flatListController}),n]})})]},"contact-info-modal")}}k.CONCERNS={chat:["id","groupMetadata"]},k.displayName="BroadcastInfoDrawerBase";const A=(0,j.default)((0,E.ListenerHOC)((0,I.default)(k,k.CONCERNS)))},89735:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a;const n=(0,x.default)(),v=(0,p.default)(),_=null===(t=e.chat.groupMetadata)||void 0===t?void 0:t.participants;(0,m.useListener)(_,"add remove reset",v);const j=(0,i.useMemo)((()=>_?_.map((e=>({itemKey:e.id.toString(),participant:e,height:68}))):[]),[_]),S=(e,t)=>{g.default.equals((0,u.getMaybeMeUser)(),t.id)||(0,d.findChat)(t.id).then((function(e){o.Cmd.openChatFromUnread(e).then((t=>{t&&o.Cmd.focusChatTextInput(e)}))}))},E=null!==(a=null==_?void 0:_.length)&&void 0!==a?a:0,I=n?f.default.t(2225,{count:E,_plural:E}):f.default.t(2224),M=n?null:(0,C.jsx)(h.TextSpan,{theme:"section-title",children:f.default.n(E)});return(0,C.jsx)(s.ChatInfoDrawerListSection,{newChatInfo:n,title:I,subtitle:M,children:(0,C.jsx)(c.FlatList,{flatListController:e.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:j,renderItem:e=>{const{participant:t}=e,a=r.ContactCollection.gadd(t.id);return(0,C.jsx)(l.Contact,{contact:a,theme:n?"new-chat-info":"drawer-list",admin:!!t.isAdmin,onClick:S,waitIdle:!0},t.id.toString())}})})};var i=a(67294),s=a(39140),o=a(2751),l=a(83387),r=a(49798),d=a(42423),c=a(80680),u=a(26205),f=n(a(79276)),h=a(51183),p=n(a(79830)),m=a(64514),x=n(a(43113)),g=n(a(69678)),C=a(85893)},43148:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a;const n=(0,m.default)(),_=null===(t=e.chat.groupMetadata)||void 0===t?void 0:t.participants,j=(0,p.useModelValues)(e.chat.contact,["name"]),S=(0,f.default)();(0,h.useListener)(_,"add remove reset",S);const E=null!==(a=null==_?void 0:_.length)&&void 0!==a?a:0,I=`${r.default.t(305)} ${r.default.t(2225,{count:E,_plural:E})}`,M=j.name?(0,x.jsx)(d.Name,{contact:e.chat.contact,selectable:!0}):r.default.t(306);if(n)return(0,x.jsxs)(o.default,{theme:"padding-large",children:[(0,x.jsx)("div",{className:(0,i.default)(g),children:(0,x.jsx)(s.DetailImage,{id:e.chat.id,size:s.DETAIL_IMAGE_SIZE.LARGE})}),(0,x.jsxs)(l.FlexColumn,{align:"center",children:[(0,x.jsx)(u.TextHeader,{level:"2",size:"24",children:M}),(0,x.jsx)("div",{className:(0,i.default)(C),children:(0,x.jsx)(c.SelectableSpan,{dir:"auto",selectable:!0,children:(0,x.jsx)(u.TextSpan,{size:"16",color:"secondary",children:I})})})]})]});return(0,x.jsx)("div",{className:(0,i.default)(v),children:(0,x.jsx)(s.DetailImage,{id:e.chat.id,size:s.DETAIL_IMAGE_SIZE.LARGE})})};var i=n(a(56720)),s=a(49046),o=n(a(66799)),l=a(71092),r=n(a(79276)),d=a(88594),c=a(11273),u=a(51183),f=n(a(79830)),h=a(64514),p=a(90370),m=n(a(43113)),x=a(85893);const g={display:"p357zi0d",justifyContent:"ac2vgrno",marginBottom:"du8bjn1j"},C={lineHeight:"a4ywakfo",marginTop:"g1eqewly"},v={display:"p357zi0d",flexDirection:"f8m0rgwh",alignItems:"gndfcl4n",marginTop:"ignnouf6",marginBottom:"bibl1e27"}},46530:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const{newChatInfo:a}=e,n=(0,s.default)(e,["newChatInfo"]);return(0,l.jsx)(o.default,(0,i.default)((0,i.default)({},n),{},{separator:null!==(t=n.separator)&&void 0!==t?t:!a,xstyle:[n.xstyle,a&&r.container],blockXstyle:[n.blockXstyle,a&&r.block]}))};var i=n(a(81109)),s=n(a(6479)),o=(n(a(56720)),n(a(9598))),l=a(85893);const r={container:{paddingStart:"gx1rr48f"},block:{paddingEnd:"f9ovudaz",borderTop:"cc8mgx9x"}}},24033:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;let{icon:a,title:n,secondaryTitle:h,side:p}=e,m=(0,s.default)(e,["icon","title","secondaryTitle","side"]);const x=null!==(t=f[a])&&void 0!==t?t:20,g=(0,c.jsx)(r.FlexRow,{xstyle:u.iconContainer,align:"center",justify:"center",children:(0,c.jsx)(d.default,{color:"secondary",name:a,height:x})});let C=null!=p?p:"";"chevron"===C&&(C=(0,c.jsx)(d.default,{color:"secondary",name:"chevron-right-alt",directional:!0}));return(0,c.jsxs)(l.default,(0,i.default)((0,i.default)({newChatInfo:!0},m),{},{multiline:!0,children:[(0,c.jsxs)(r.FlexRow,{align:"center",justify:"start",children:[g,(0,c.jsx)("div",{className:(0,o.default)(u.content),children:n}),(0,c.jsx)(r.FlexRow,{align:"center",justify:"end",xstyle:u.drawerSide,children:C})]}),(0,c.jsx)("div",{className:(0,o.default)(u.secondaryTitleContainer),children:h})]}))};var i=n(a(81109)),s=n(a(6479)),o=n(a(56720)),l=n(a(46530)),r=a(71092),d=n(a(15817)),c=a(85893);const u={iconContainer:{marginEnd:"bugiwsl0",width:"qssinsw9",height:"bmot90v7",flexGrow:"tvf2evcx",flexShrink:"oq44ahr5"},content:{flexGrow:"ggj6brxn",flexShrink:"m0h2a7mj",minWidth:"ktfrpxia"},drawerSide:{flexGrow:"tvf2evcx",flexShrink:"oq44ahr5",width:"baeo9xnf"},secondaryTitleContainer:{marginStart:"oybqnh0n",marginEnd:"lfum0007"}},f={settings:17}},39140:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ChatInfoDrawerSection=c,t.ChatInfoDrawerListSection=function(e){return(0,r.jsx)(c,(0,i.default)((0,i.default)({},e),{},{xstyle:e.newChatInfo&&u.drawerSectionContainer,children:(0,r.jsx)("div",{className:(0,o.default)(e.newChatInfo&&u.contentContainer),children:e.children})}))},t.ChatInfoDrawerButtonsSection=function(e){return(0,r.jsx)(c,(0,i.default)((0,i.default)({},e),{},{xstyle:e.newChatInfo&&f.drawerSectionContainer,children:e.children}))};var i=n(a(81109)),s=n(a(6479)),o=n(a(56720)),l=n(a(66799)),r=a(85893);const d={title:{paddingTop:"i5tg98hk",paddingEnd:"f9ovudaz",paddingBottom:"przvwfww",paddingStart:"gx1rr48f",marginBottom:"or9x5nie"},titleText:{fontSize:"bze30y65",lineHeight:"a4ywakfo"},container:{paddingTop:"i4pc7asj",paddingEnd:"bcymb0na",paddingBottom:"myel2vfb",paddingStart:"e8k79tju"},containerWithoutTitle:{paddingTop:"i5tg98hk",paddingEnd:"bcymb0na",paddingBottom:"przvwfww",paddingStart:"e8k79tju",marginBottom:"mpdn4nr2"}};function c(e){let{newChatInfo:t}=e,a=(0,s.default)(e,["newChatInfo"]);return t?(0,r.jsx)(l.default,(0,i.default)((0,i.default)({},a),{},{xstyle:[d.container,null==a.title&&d.containerWithoutTitle,a.xstyle],titleXStyle:d.title,titleTextXStyle:d.titleText,children:a.children})):(0,r.jsx)(l.default,(0,i.default)((0,i.default)({},a),{},{children:a.children}))}const u={drawerSectionContainer:{paddingBottom:"przvwfww"},contentContainer:{marginTop:"tt8xd2xn",marginEnd:"dl6j7rsh",marginBottom:"mpdn4nr2",marginStart:"avk8rzj1"}};const f={drawerSectionContainer:{paddingTop:"i5tg98hk",paddingEnd:"f9ovudaz",paddingBottom:"przvwfww",paddingStart:"gx1rr48f"}}},46693:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({chat:e,onMediaGallery:t}){const a=c.default.t(1201),n=(0,x.default)(),i=(0,C.jsx)(h.default,{color:"secondary",name:"chevron-right-alt",directional:!0}),s=(0,C.jsxs)(r.FlexRow,{align:"center",children:[n&&(0,C.jsx)(_,{chat:e}),(0,C.jsx)("div",{children:i})]});return(0,C.jsx)(l.ChatInfoDrawerSection,{newChatInfo:n,a8nText:"section-media",title:a,titleOnClick:t,subtitle:s,theme:n?void 0:"padding",xstyle:n&&v.drawerSection,children:(0,C.jsx)(u.default,{chat:e,mediaMsgs:e.getMediaMsgs(),theme:n?"new-chat-info":null})})};var i=n(a(48926)),s=a(67294),o=n(a(56720)),l=a(39140),r=a(71092),d=a(37268),c=n(a(79276)),u=n(a(56028)),f=a(16248),h=n(a(15817)),p=n(a(79830)),m=a(64514),x=n(a(43113)),g=n(a(2014)),C=a(85893);const v={mediaCount:{marginEnd:"bugiwsl0",fontSize:"bze30y65",color:"g01nkquw"},drawerSection:{paddingBottom:"aiput80m"}};function _({chat:e}){const t=function(e){const t=e.getMediaMsgs(),a=e.getDocMsgs(),n=e.getLinkMsgs(),o=(0,p.default)();(0,m.useListener)(t,"add remove reset query_media_before",o),(0,m.useListener)(a,"add remove reset query_doc_before",o),(0,m.useListener)(n,"add remove reset query_link_before",o);const l=(0,g.default)();(0,s.useEffect)((()=>{l((0,i.default)((function*(){const i=[];t.hasMediaBefore&&i.push(t.queryMedia({chat:e})),a.hasDocBefore&&i.push(a.queryDocs(e)),n.hasLinkBefore&&i.push(n.queryLinks(e)),yield Promise.all(i),o()})))}),[e,a,o,n,t,l]);let r=null;if(!t.hasMediaBefore&&!a.hasDocBefore&&!n.hasLinkBefore){let e=t.length;d.GK.supportsFeature(d.GK.F.MD_BACKEND)&&(e=t.filter((e=>(0,f.hasThumbnail)(e.mediaData))).length),r=e+a.length+n.length}return r}(e);return(0,C.jsx)("div",{className:(0,o.default)(v.mediaCount),children:t})}},25562:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{contact:t}=e,a=(0,c.default)(),n=(0,f.jsx)(i.default,{multiline:!0,newChatInfo:a,children:(0,f.jsx)(d.TextSpan,{theme:"title",children:(0,f.jsx)(r.default,{id:t.id})})}),p=(0,f.jsx)(i.default,{newChatInfo:a,separator:!0,children:(0,f.jsx)(l.SelectableSpan,{dir:"auto",selectable:!0,children:(0,f.jsx)(d.TextSpan,{theme:"title",children:(0,u.default)(t.id)})})});return(0,f.jsxs)(s.ChatInfoDrawerSection,{newChatInfo:a,xstyle:a&&h.container,a8nText:"section-about-and-phone-number",title:o.default.t(669),children:[n,p]})};n(a(56720));var i=n(a(46530)),s=a(39140),o=n(a(79276)),l=a(11273),r=n(a(77821)),d=a(51183),c=n(a(43113)),u=n(a(33856)),f=a(85893);const h={container:{paddingBottom:"przvwfww"}}},77936:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{contact:t}=e,a=f.default.t(401);function n(){l.Cmd.openModal((0,p.jsx)(s.default,{contact:t}))}function m(){l.Cmd.openModal((0,p.jsx)(o.default,{contact:t}))}let x;x=(0,u.canSeeSMBUpsell)()?(0,p.jsx)(r.default,{a8nText:"business-title",className:i.default.businessTitleWithSMBUpsell,onClick:m,side:(0,p.jsx)(h.default,{display:"inline",name:"info"}),children:a}):(0,p.jsx)(d.default,{a8nText:"business-title",className:i.default.businessTitleText,onClick:n,children:a});return(0,p.jsx)(c.default,{className:i.default.businessAccount,children:x})};var i=n(a(25022)),s=n(a(44070)),o=n(a(4856)),l=a(2751),r=n(a(9598)),d=n(a(62125)),c=n(a(66799)),u=a(18675),f=n(a(79276)),h=n(a(15817)),p=a(85893)},2439:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a;const{contact:n,onProductCatalog:E}=e,I=(0,i.useContext)(u.DrawerContext),M=(0,x.getProductCatalogSessionId)(I),T=(0,_.default)((0,C.unproxy)(e.contact)),b=(0,v.default)();let y;const w=d.ChatCollection.getActive();(null==w?void 0:w.id.equals(n.id))||((0,o.logMessageClick)(M),y=(0,j.jsx)(s.default,{icon:"chat-msg",label:m.default.t(1223),onClick:function(){(0,f.findChat)(n.id).then((function(e){c.Cmd.openChatFromUnread(e).then((()=>{c.Cmd.closeDrawerRight()}))}))},a8nText:"business-action chat",theme:b?"new-chat-info":void 0}));let P,N,k;T.isVoiceCallEnabled&&(P=(0,j.jsx)(s.default,{icon:"voice-call-filled",label:m.default.t(1858),disabled:!T.canStartVoiceCall,onClick:()=>{(0,o.logVoiceCallClick)(M),T.startVoiceCall()},a8nText:"business-action voice-call",theme:b?"new-chat-info":void 0}));(null===(t=n.businessProfile)||void 0===t||null===(a=t.profileOptions)||void 0===a?void 0:a.commerceExperience)===l.COMMERCE_EXPERIENCE_TYPES.CATALOG&&(N=(0,j.jsx)(s.default,{icon:"catalog-filled",label:m.default.t(1075),onClick:()=>{(0,o.logCatalogClick)(M),E((0,x.getProductCatalogContext)(I),"ContactInfo")},a8nText:"business-action catalog",theme:b?"new-chat-info":void 0}));if((0,r.hasShop)(n.businessProfile)){(0,p.bannedShopsEnabled)()&&(0,r.isShopBanned)(n.businessProfile)||(k=(0,j.jsx)(s.default,{icon:"shop-filled",label:m.default.t(1658),onClick:function(){(0,o.logShopsClick)(M),(0,r.goToShop)(n.businessProfile)},a8nText:"business-action shop",theme:b?"new-chat-info":void 0}))}const A=(0,j.jsx)(s.default,{icon:"forward-filled",label:m.default.t(865),onClick:function(){(0,o.logForwardClick)(M),c.Cmd.openModal((0,j.jsx)(g.SendContactFlowLoadable,{contacts:[(0,C.unproxy)(n)],onContactsSent:e=>{c.Cmd.openChatFromUnread(e).then((()=>{}))}}))},a8nText:"business-action forward",theme:b?"new-chat-info":void 0});return(0,j.jsxs)(h.FlexRow,{xstyle:S.actionsRow,justify:"evenly",children:[y,P,N,k,A]})};var i=a(67294),s=(n(a(56720)),n(a(82216))),o=a(35814),l=a(90653),r=a(98169),d=a(91129),c=a(2751),u=a(76769),f=a(42423),h=a(71092),p=a(18675),m=n(a(79276)),x=a(91546),g=a(90731),C=a(83040),v=n(a(43113)),_=n(a(21336)),j=a(85893);const S={actionsRow:{marginTop:"c46o30wg",marginEnd:"bsg2wrd4",marginBottom:"brac1wpa",marginStart:"f459d30t","@media (min-width: 1300px)":{marginStart:"hfp8519b",marginEnd:"acdu7ris"}}}},46624:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{businessHours:t}=e,a=(0,f.getProductCatalogSessionId)((0,s.useContext)(d.DrawerContext)),n=(0,r.getBusinessOpenState)(t),[i,o]=(0,s.useState)(!0);if(null==t)return null;const c=(0,h.getBusinessHours)(t).map((e=>{const{day:t,hours:a,first:s}=e;let o=t,l=a,d=!1;if(s)switch(n.status){case r.BUSINESS_OPEN_STATUS.OPEN_24H:o=u.default.t(368),l=u.default.t(363),d=!0;break;case r.BUSINESS_OPEN_STATUS.OPEN_APPOINTMENT:o=u.default.t(368),l=u.default.t(367),d=!0;break;case r.BUSINESS_OPEN_STATUS.OPEN:o=u.default.t(368),d=!0;break;case r.BUSINESS_OPEN_STATUS.CLOSED_TODAY:l=u.default.t(350)}return!s&&i?null:(0,x.jsx)(C,{day:o,dayIsOpen:d,hours:l,first:s,collapsed:i},t)}));return(0,x.jsx)(m.default,{xstyle:g.businessHours,onClick:()=>{(0,l.logHoursClick)(a),o(!i)},a8nText:"business-hours-expand",children:c})};var i=n(a(94184)),s=a(67294),o=(n(a(56720)),n(a(5579))),l=a(35814),r=a(98169),d=a(76769),c=a(86757),u=n(a(79276)),f=a(91546),h=a(24097),p=n(a(15817)),m=n(a(43997)),x=a(85893);const g={businessHours:{display:"f804f6gw",width:"ln8gz9je",textAlign:"ml4r5409"}};function C(e){if(e.first){const t=(0,x.jsx)("div",{className:o.default.businessHoursChevron,role:"button",children:(0,x.jsx)(p.default,{className:e.collapsed?"":o.default.flipSvg,display:"inline",name:"chevron-down-alt"})});return(0,x.jsxs)("div",{className:(0,i.default)(o.default.businessHoursRow,{[o.default.firstRow]:e.first}),children:[(0,x.jsx)("div",{className:(0,i.default)(o.default.businessHoursDay,{[o.default.dayIsOpen]:e.dayIsOpen}),children:(0,x.jsx)(c.EmojiText,{direction:"auto",text:e.day})}),(0,x.jsx)("div",{className:o.default.businessHoursHours,children:(0,x.jsx)(c.EmojiText,{direction:"auto",text:e.hours})}),t]})}return(0,x.jsxs)("div",{className:o.default.businessHoursRow,children:[(0,x.jsx)("div",{className:o.default.businessHoursDay,children:(0,x.jsx)(c.EmojiText,{direction:"auto",text:e.day})}),(0,x.jsx)("div",{className:o.default.businessHoursHours,children:(0,x.jsx)(c.EmojiText,{direction:"auto",text:e.hours})})]})}},96048:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{businessProfile:t}=e,{description:a,address:n,latitude:S,longitude:E,website:I,email:M,businessHours:T}=(0,C.useModelValues)(t,["description","address","latitude","longitude","website","email","businessHours"]),b=(0,s.useContext)(u.DrawerContext),y=(0,x.getProductCatalogSessionId)(b),w=(0,v.default)();let P,N,k,A,O,D;null!=a&&(P=(0,_.jsx)("div",{className:l.default.section,children:(0,_.jsx)(h.default,{text:a,textLimit:c.default.BUSINESS_DESCRIPTION_INFO_PANEL_TRUNC_LENGTH,children:({textLimit:e})=>(0,_.jsx)(f.EmojiText,{className:l.default.description,selectable:!0,direction:"auto",text:a,textLimit:e})})}));null!=T&&(N=(0,_.jsx)("div",{className:l.default.section,children:(0,_.jsx)(o.default,{businessHours:T})}));null!=n&&(k=(0,_.jsx)("div",{className:l.default.section,children:(0,_.jsx)(f.EmojiText,{selectable:!0,direction:"auto",text:n})}));null!=S&&null!=E&&(A=(0,_.jsx)("div",{style:{height:132},className:(0,i.default)(l.default.section,l.default.map),children:(0,_.jsx)(m.default,{lat:S,lng:E,name:n||"",width:590,height:132,onClick:()=>(0,r.logLocationClick)(y),a8nText:"business-info-map"})}));null!=M&&(O=(0,_.jsx)("div",{className:l.default.section,children:(0,_.jsx)(p.ExternalLink,{href:`mailto:${M}`,onClick:()=>(0,r.logEmailClick)(y),a8nText:"business-info-email",children:M})}));null!=I&&I.length>0&&(D=(0,_.jsx)("div",{className:l.default.section,children:I.map((e=>(0,_.jsx)("div",{children:(0,_.jsx)(p.ExternalLink,{href:g.URL.toMaliciousSiteRedirect(e),onClick:()=>(0,r.logWebsiteClick)(y),a8nText:"business-info-website",children:e})},e)))}));return null==P&&null==N&&null==k&&null==A&&null==O&&null==D?null:(0,_.jsxs)(d.ChatInfoDrawerSection,{newChatInfo:w,xstyle:w&&j.container,theme:w?void 0:"padding",children:[P,N,k,A,O,D]})};var i=n(a(94184)),s=a(67294),o=(n(a(56720)),n(a(46624))),l=n(a(79953)),r=a(35814),d=a(39140),c=n(a(11547)),u=a(76769),f=a(86757),h=n(a(56071)),p=a(90701),m=n(a(30914)),x=a(91546),g=a(23005),C=a(90370),v=n(a(43113)),_=a(85893);const j={container:{paddingTop:"i4pc7asj",paddingBottom:"q1nnjopg"}}},35814:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.logProfileImpression=function(e,t,a){(0,i.smbBizProfileLoggingEnabled)()?new s.default.ViewBusinessProfile({viewBusinessProfileAction:s.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_IMPRESSION,catalogSessionId:e,profileEntryPoint:t,isSelfView:a}).commit():new s.default.ViewBusinessProfile({viewBusinessProfileAction:s.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_IMPRESSION,catalogSessionId:e}).commit()},t.logProfileExit=function(e,t){o({viewBusinessProfileAction:s.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_EXIT,catalogSessionId:e,scrollDepth:t})},t.logMessageClick=function(e){o({viewBusinessProfileAction:s.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_MESSAGE,catalogSessionId:e})},t.logVoiceCallClick=function(e){o({viewBusinessProfileAction:s.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_VOICE_CALL,catalogSessionId:e})},t.logShopsClick=function(e){o({viewBusinessProfileAction:s.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_SHOPS_ICON,catalogSessionId:e})},t.logCatalogClick=function(e){o({viewBusinessProfileAction:s.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_CATALOG_ICON,catalogSessionId:e})},t.logForwardClick=function(e){o({viewBusinessProfileAction:s.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_FORWARD,catalogSessionId:e})},t.logEmailClick=function(e){o({viewBusinessProfileAction:s.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_EMAIL,catalogSessionId:e})},t.logWebsiteClick=function(e){o({viewBusinessProfileAction:s.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_WEBSITE,catalogSessionId:e})},t.logLocationClick=function(e){o({viewBusinessProfileAction:s.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_LOCATION,catalogSessionId:e})},t.logHoursClick=function(e){o({viewBusinessProfileAction:s.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_HOURS,catalogSessionId:e})},t.logStatusClick=function(e){o({viewBusinessProfileAction:s.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_STATUS,catalogSessionId:e})};var i=a(18675),s=n(a(4040));function o(e){const t=new s.default.ViewBusinessProfile(e);t&&t.commit()}},58523:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{contact:t}=e;let a,n;if(t.isMyContact)if(t.name!==t.verifiedName){let e;t.showBusinessCheckmarkAsSecondary&&(e=(0,r.jsx)("div",{className:i.default.icon,children:(0,r.jsx)(l.default,{name:"psa-verified"})})),a=(0,r.jsx)(o.Name,{contact:t}),n=(0,r.jsxs)("div",{className:i.default.wrapper,children:[(0,r.jsx)(s.EmojiText,{text:`~${t.verifiedName}`,className:i.default.verifiedText,direction:"auto",ellipsify:!0,titlify:!0}),e]})}else a=(0,r.jsx)(o.Name,{contact:t,showBusinessCheckmark:t.showBusinessCheckmarkAsPrimary});else a=(0,r.jsx)(s.EmojiText,{text:t.verifiedName,direction:"auto",ellipsify:!0,titlify:!0}),n=(0,r.jsx)(o.Name,{contact:t,showBusinessCheckmark:t.showBusinessCheckmarkAsPrimary});return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:i.default.title,children:a}),(0,r.jsx)("div",{className:i.default.subtitle,children:n})]})};var i=n(a(80746)),s=a(86757),o=a(88594),l=n(a(15817)),r=a(85893)},17479:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.BusinessOpenHours=function(e){const{hours:t}=e,a=c((0,o.getBusinessOpenState)(t));if(null==a)return null;const n=i.default.sanitize(a);return(0,r.jsx)("div",{className:s.default.openStatus,dangerouslySetInnerHTML:{__html:n}})},t.getBusinessOpenStr=c;var i=n(a(27856)),s=n(a(63937)),o=a(98169),l=n(a(79276)),r=a(85893);function d(e){return null==e?"":e.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})}function c(e){switch(e.status){case o.BUSINESS_OPEN_STATUS.OPEN_24H:return l.default.t(364,{open:`<span class="${s.default.open}">${l.default.t(362)}</span>`});case o.BUSINESS_OPEN_STATUS.OPEN_APPOINTMENT:return l.default.t(366,{open:`<span class="${s.default.open}">${l.default.t(362)}</span>`});case o.BUSINESS_OPEN_STATUS.OPEN:if(e.openUntil&&e.additionalOpen&&e.additionalClose)return l.default.t(370,{open:`<span class="${s.default.open}">${l.default.t(362)}</span>`,time:d(e.openUntil),additionalOpenTime:d(e.additionalOpen),additionalCloseTime:d(e.additionalClose)});if(e.openUntil)return l.default.t(369,{open:`<span class="${s.default.open}">${l.default.t(362)}</span>`,time:d(e.openUntil)});break;case o.BUSINESS_OPEN_STATUS.CLOSED:return e.opensAt?l.default.t(352,{closed:`<span class="${s.default.closed}">${l.default.t(351)}</span>`,time:d(e.opensAt)}):`<span class="${s.default.closed}">${l.default.t(351)}</span>`;case o.BUSINESS_OPEN_STATUS.CLOSED_TODAY:return`<span class="${s.default.closed}">${l.default.t(353)}</span>`}return null}},49832:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.BusinessProfile=function(e){let t;const a=(0,b.useModelValues)(e.contact,["id","verifiedLevel","name","verifiedName"]),n=(0,b.useModelValues)(e.businessProfile,["description","categories","website","email","stale","latitude","longitude","businessHours","structuredAddress"]),[i,k]=(0,s.useState)(!0);(0,s.useEffect)((()=>{new E.default.ViewBusinessProfile({viewBusinessProfileAction:E.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_IMPRESSION}).commit()}),[]);const A=()=>{k(!i)},O=()=>{d.Cmd.openModal((0,y.jsx)(o.default,{contact:a}))},D=()=>{d.Cmd.openModal((0,y.jsx)(l.default,{contact:a}))},R=(e,t,a,n)=>{const i=n?(e=>{const{streetAddress:t,localizedCityName:a,zipCode:n}=e;return t&&a&&n?v.default.t(375,{streetAddress:t,city:a,zipCode:n}):t&&a?v.default.t(374,{streetAddress:t,city:a}):t})(n):null;let s,o;if(null!=t&&null!=a&&(s=(0,y.jsx)("div",{style:{height:150},className:r.default.businessMap,children:(0,y.jsx)(j.default,{lat:t,lng:a,name:i||e,width:565,height:150})})),i){let e;e=null!=t&&null!=a?(0,S.getMapUrl)(t,a,i):(0,S.getSearchUrl)(i),o=(0,y.jsx)("div",{className:r.default.address,children:(0,y.jsx)(x.ExternalLink,{href:e,children:(0,y.jsx)(p.EmojiText,{selectable:!0,direction:"auto",text:i})})})}return o||s?(0,y.jsxs)(N,{icon:"business-address",children:[o,s]}):null};t=(0,C.canSeeSMBUpsell)()?(()=>{const e=a.verifiedLevel===w.HIGH?v.default.t(399):v.default.t(376);return(0,y.jsx)(u.default,{a8nText:"business-title",onClick:D,side:(0,y.jsx)(T.default,{className:r.default.infoIcon,display:"inline",name:"info"}),children:e})})():g.GK.supportsFeature(g.GK.F.VNAME_V_2)?(()=>{let e;switch(a.verifiedLevel){case w.HIGH:e=v.default.t(399);break;case w.LOW:case w.UNKNOWN:e=v.default.t(376)}return(0,y.jsx)(f.default,{a8nText:"business-title",className:r.default.businessTitleText,onClick:O,children:e})})():(()=>{const e=a,t=!e.name||e.name===e.verifiedName;let n,i="psa-unverified";switch(e.verifiedLevel){case w.HIGH:i="psa-verified",t?n=(0,y.jsx)(p.EmojiText,{className:r.default.verifiedLabel,text:v.default.t(404)}):(n=(0,y.jsx)(p.EmojiText,{className:r.default.verifiedLabel,text:v.default.t(402)}),n=(0,y.jsx)(_.default,{id:403,params:{verified:n,businessName:e.verifiedName}}));break;case w.LOW:n=t?(0,y.jsx)(p.EmojiText,{text:v.default.t(381)}):v.default.t(380,{businessName:e.verifiedName});break;case w.UNKNOWN:n=v.default.t(376)}return(0,y.jsx)(N,{icon:i,className:r.default.businessMarker,onClick:O,children:n})})();let L,G,B,F,V,U,H;const W=n;if(W.stale)L=(0,y.jsx)("div",{className:r.default.contactBusinessInfoSpinner,children:(0,y.jsx)(M.Spinner,{size:20,stroke:5})});else{var K;if(G=(null===(K=W.categories)||void 0===K?void 0:K.length)?(0,y.jsx)(N,{icon:"business-category",children:(0,y.jsx)(p.EmojiText,{selectable:!0,direction:"auto",text:W.categories.map((e=>e.localized_display_name)).join(v.default.t(771))})}):null,B=W.description?(0,y.jsx)(N,{icon:"business-description",children:(0,y.jsx)(m.default,{text:W.description,textLimit:c.default.BUSINESS_DESCRIPTION_INFO_PANEL_TRUNC_LENGTH,children:({textLimit:e})=>(0,y.jsx)(p.EmojiText,{selectable:!0,direction:"auto",breakWord:!0,text:W.description,textLimit:e})})}):null,F=R(a.name,W.latitude,W.longitude,W.structuredAddress),W.website&&Array.isArray(W.website)&&W.website.length&&(V=W.website.map(((e,t)=>{const a=(0,I.getWebsiteLink)(e),n=(0,y.jsx)(p.EmojiText,{selectable:!0,direction:"auto",text:e}),i=(0,y.jsx)(x.ExternalLink,{className:r.default.link,href:a,children:n});return(0,y.jsx)(N,{icon:"business-website",children:i},t)}))),W.businessHours&&(U=(e=>{const t=(0,I.getBusinessHours)(e).map((e=>{const{day:t,hours:a,first:n}=e;return!n&&i?null:(0,y.jsx)(P,{day:t,hours:a,first:n,collapsed:i},t)}));return(0,y.jsx)(N,{icon:"business-hours",onClick:A,children:t})})(W.businessHours)),W.email){const e=(0,y.jsx)(p.EmojiText,{selectable:!0,direction:"auto",text:W.email}),t=(0,y.jsx)(x.ExternalLink,{className:r.default.link,href:`mailto:${W.email}`,children:e});H=(0,y.jsx)(N,{icon:"business-email",dir:"auto",children:t})}}let q;(L||null!=F||G||B||null!=U||H||V)&&(q=(0,y.jsx)(h.default,{theme:"padding",children:(0,y.jsxs)("div",{className:r.default.contactBusinessInfo,children:[L,F,G,B,U,H,V]})}));return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(h.default,{children:t}),q]})};var i=n(a(94184)),s=a(67294),o=n(a(44070)),l=n(a(4856)),r=n(a(10824)),d=a(2751),c=n(a(11547)),u=n(a(9598)),f=n(a(62125)),h=n(a(66799)),p=a(86757),m=n(a(56071)),x=a(90701),g=a(37268),C=a(18675),v=n(a(79276)),_=n(a(9782)),j=n(a(30914)),S=a(27585),E=n(a(4040)),I=a(24097),M=a(15282),T=n(a(15817)),b=a(90370),y=a(85893);const{VERIFIED_LEVEL:w}=c.default;const P=e=>{const t=e.first?(0,y.jsx)("div",{className:r.default.businessHoursChevron,role:"button",children:(0,y.jsx)(T.default,{className:e.collapsed?"":r.default.flipSvg,display:"inline",name:"chevron-down-alt"})}):null;return(0,y.jsxs)("div",{className:r.default.businessHoursRow,children:[(0,y.jsx)("div",{className:r.default.businessHoursDay,children:(0,y.jsx)(p.EmojiText,{direction:"auto",text:e.day})}),(0,y.jsx)("div",{className:r.default.businessHoursHours,children:(0,y.jsx)(p.EmojiText,{direction:"auto",text:e.hours})}),t]})},N=e=>(0,y.jsxs)("div",{className:(0,i.default)(r.default.dataRow,e.className),onClick:e.onClick,children:[(0,y.jsx)("div",{className:r.default.dataRowIcon,children:(0,y.jsx)(T.default,{name:e.icon})}),(0,y.jsx)("div",{className:r.default.dataRowText,children:e.children})]})},69626:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({contact:e,businessProfile:t,onOpenStatus:a,onProductCatalog:n,onProfilePicLoad:h,onProfilePicClick:p}){const{businessHours:m,categories:x}=(0,u.useModelValues)(t,["businessHours","categories"]),g=(0,f.jsx)(s.default,{contact:e});let C;null!=x&&x.length>0&&(C=(0,f.jsx)("div",{className:l.default.categories,children:x.map((e=>e.localized_display_name)).join(c.default.t(770))}));const v=m?(0,f.jsx)(o.BusinessOpenHours,{hours:m}):null;return(0,f.jsxs)(d.default,{className:l.default.noPaddingBottom,theme:"padding",children:[(0,f.jsx)(r.default,{contact:e,onClick:p,onOpenStatus:a,onLoad:h}),(0,f.jsxs)("div",{className:l.default.info,children:[g,C,v,(0,f.jsx)(i.default,{contact:e,onProductCatalog:n})]})]})};var i=n(a(2439)),s=n(a(58523)),o=a(17479),l=n(a(12603)),r=n(a(48363)),d=n(a(66799)),c=n(a(79276)),u=a(90370),f=a(85893)},98920:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({contact:e}){return(0,r.jsx)(i.ChatInfoDrawerSection,{newChatInfo:!0,a8nText:"section-about",title:s.default.t(666),children:(0,r.jsx)(l.TextSpan,{theme:"title",size:"16",children:(0,r.jsx)(o.default,{id:e.id})})})};var i=a(39140),s=n(a(79276)),o=n(a(77821)),l=a(51183),r=a(85893)},23085:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,g.default)();return(0,C.jsx)(_,(0,i.default)((0,i.default)({},e),{},{newChatInfo:t}))};var i=n(a(81109)),s=a(67294),o=a(12725),l=a(39140),r=a(2751),d=n(a(11547)),c=n(a(36736)),u=a(17013),f=a(80680),h=n(a(79276)),p=a(38428),m=n(a(23080)),x=a(51183),g=n(a(43113)),C=a(85893);class v extends s.Component{constructor(...e){super(...e),this._commonGroupInitialized=!1,this.state={collapsed:!1,numGroups:0},this.rerender=()=>{this.forceUpdate()},this.handleClick=(e,t)=>{r.Cmd.openChatFromUnread(t).then((e=>{e&&r.Cmd.focusChatTextInput(t)})),this.props.onClose()},this.handleShowMore=()=>{this.setState({collapsed:!1})},this.renderItem=e=>{const{chat:t,showNewChatInfo:a}=e;return(0,C.jsx)(o.Chat,{chat:t,theme:a?"new-chat-info":"drawer-list",contact:t.contact,mode:o.Mode.INFO,onClick:this.handleClick},t.id.toString())}}static getDerivedStateFromProps(e,t){const{commonGroups:a}=e.contact,n=a?a.length:0;return t.numGroups<=d.default.INFO_DRAWER_MAX_ROWS&&n>d.default.INFO_DRAWER_MAX_ROWS?{numGroups:n,collapsed:!0}:{numGroups:n}}componentDidMount(){const{commonGroups:e}=this.props.contact;e&&(this.props.listeners.add(e,"add remove",this.rerender),this._commonGroupInitialized=!0),(0,u.findCommonGroups)(this.props.contact).catch((e=>{throw __LOG__(4,!0,new Error,!0)`get from participants table failed`,SEND_LOGS("get from participants table failed when finding common groups: "+e),new Error("get from participants table failed")}))}componentDidUpdate(e){if(e.contact!==this.props.contact){const t=e.contact.commonGroups;t&&e.listeners.remove(t,"add remove",this.rerender),this._commonGroupInitialized=!1}const{commonGroups:t}=this.props.contact;t&&(this._commonGroupInitialized||(this.props.listeners.add(t,"add remove",this.rerender),this._commonGroupInitialized=!0))}componentWillUnmount(){const{commonGroups:e}=this.props.contact;e&&this._commonGroupInitialized&&(this.props.listeners.remove(e,"add remove",this.rerender),this._commonGroupInitialized=!1)}getData(){let e=this.props.contact.commonGroups;return e.length>d.default.INFO_DRAWER_MAX_ROWS&&this.state.collapsed&&(e=e.slice(0,d.default.INFO_DRAWER_MAX_ROWS)),e.map((e=>({itemKey:e.id.toString(),chat:e,showNewChatInfo:this.props.newChatInfo,height:68})))}render(){const e=this.props.contact.commonGroups,t=this.props.newChatInfo;if(!(null==e?void 0:e.length))return null;let a;if(e.length>d.default.INFO_DRAWER_MAX_ROWS&&this.state.collapsed){const t=e.length-d.default.INFO_DRAWER_MAX_ROWS;a=(0,C.jsx)(c.default,{numMore:t,onClick:this.handleShowMore,newChatInfo:this.props.newChatInfo})}const n=t?h.default.t(668,{number:h.default.n(e.length),_plural:e.length}):h.default.t(2111),i=t?null:(0,C.jsx)(x.TextSpan,{theme:"section-title",children:h.default.n(e.length)});return(0,C.jsxs)(l.ChatInfoDrawerListSection,{newChatInfo:t,a8nText:"section-common-groups",title:n,subtitle:i,children:[(0,C.jsx)(f.FlatList,{flatListController:this.props.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:this.getData(),renderItem:this.renderItem}),a]})}}v.CONCERNS={contact:["commonGroups","isBusiness"]},v.displayName="ContactInfoCommonGroupsBase";const _=(0,p.ListenerHOC)((0,m.default)(v,v.CONCERNS))},10389:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,de.default)(),a=(0,ce.useNewChatInfoColors)();return(0,fe.jsx)(me,(0,i.default)((0,i.default)({},e),{},{newChatInfo:t,style:t?a:null}))};var i=n(a(81109)),s=a(73583),o=a(67294),l=n(a(56720)),r=n(a(25562)),d=n(a(77936)),c=n(a(96048)),u=a(35814),f=a(49832),h=a(98169),p=n(a(69626)),m=a(39985),x=n(a(28019)),g=a(91129),C=a(39140),v=n(a(46693)),_=a(2751),j=n(a(98920)),S=n(a(23085)),E=n(a(76676)),I=n(a(59325)),M=n(a(38718)),T=n(a(20055)),b=a(24160),y=a(41771),w=n(a(39178)),P=n(a(9598)),N=n(a(72543)),k=n(a(62125)),A=a(76769),O=a(27001),D=n(a(66799)),R=a(60618),L=n(a(54612)),G=a(26205),B=a(37268),F=a(18675),V=n(a(30268)),U=n(a(31849)),H=n(a(79276)),W=a(38428),K=n(a(16630)),q=a(58481),z=a(433),Y=a(82501),X=n(a(4040)),$=n(a(79444)),Z=n(a(69787)),Q=a(91546),J=a(23773),ee=n(a(73282)),te=a(99343),ae=n(a(3439)),ne=n(a(92611)),ie=n(a(23080)),se=a(83040),oe=n(a(15817)),le=a(51183),re=a(37014),de=n(a(43113)),ce=a(68386),ue=a(25512),fe=a(85893);const he={body:{flexGrow:"tvf2evcx",flexShrink:"oq44ahr5",flexBasis:"lb5m6g5c",paddingBottom:"s9fl9ege"},chevron:{color:"cs9t9or5"}};class pe extends o.Component{constructor(e){super(e),this.flatListController=new L.default,this.handleVerificationClick=()=>{this.props.onVerification()},this._handleDeleteChat=()=>{const e=g.ChatCollection.assertGet(this.props.contact.id);_.Cmd.deleteOrExitChat(e)},this.handleClose=()=>{this.props.onClose?this.props.onClose():this.props.uim.uie.requestDismiss()},this._handleViewPicture=e=>{if(!this._canViewPicture)return void _.Cmd.openToast((0,fe.jsx)(re.Toast,{id:(0,re.genId)(),msg:H.default.t(1353)}));const t=e.target;_.Cmd.openModalMedia((0,fe.jsx)(Z.default,{contact:this.props.contact,profilePicThumb:this.props.contact.getProfilePicThumb(),animateBorderRadius:!0,getZoomNode:e=>{e(t)}}),{transition:"profile-viewer",uim:this.props.uim})},this._handleOpenStatus=()=>{(0,u.logStatusClick)((0,Q.getProductCatalogSessionId)(this.context))},this._handleDetailImageLoad=()=>{this._canViewPicture=!0},this._handleProductDetail=e=>{const{onProductDetail:t}=this.props;(0,z.qplStartProductView)("ContactInfo"),t(e)},this._canViewPicture=!1,this.state={scrollDepth:100}}componentDidMount(){const{contact:e,isPushed:t=!0}=this.props;e.businessProfile&&!e.businessProfile.stale&&e.businessCatalog&&m.CatalogCollection.findCarouselCatalog(e.id).catch((0,s.filteredCatch)(ue.ServerStatusCodeError,(()=>{__LOG__(3)`Failed to fetch product catalog in contact drawer from server`}))),B.GK.supportsFeature(B.GK.F.MD_BACKEND)&&(0,y.getFanOutListJob)([e.id,(0,G.assertGetMe)()]).then((e=>{(0,Y.ensureE2ESessions)(e)}));const{session:a}=(0,Q.getProductCatalogContext)(this.context);if(a.isAccidental())_.Cmd.setDrawerContext("right",(0,Q.buildProductCatalogContext)(new J.ProductCatalogSession,(0,b.getMaybeBizPlatformForLogging)(e.id.toString()),X.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_PROFILE));else if(e.isBusiness&&(0,F.canSeeBizProfileV3)()){const t=e.id===(0,G.getMaybeMeUser)();(0,u.logProfileImpression)((0,Q.getProductCatalogSessionId)(this.context),this.props.profileEntryPoint,t)}t&&e.businessProfile&&(0,q.qplEndProfileView)(te.QuickLogActionType.SUCCESS)}componentWillUnmount(){const{contact:e}=this.props,{session:t}=(0,Q.getProductCatalogContext)(this.context);t.isAccidental()||e.isBusiness&&(0,F.canSeeBizProfileV3)()&&(0,u.logProfileExit)((0,Q.getProductCatalogSessionId)(this.context),this.state.scrollDepth)}_shouldRenderCatalog(){const{contact:e}=this.props;return!!(e&&e.isBusiness&&e.businessProfile)&&!!e.businessCatalog}_renderBusinessProfileTopCard(){return this.props.contact.businessProfile?(0,fe.jsx)(p.default,{contact:this.props.contact,onProfilePicLoad:this._handleDetailImageLoad,onProfilePicClick:this._handleViewPicture,onOpenStatus:this._handleOpenStatus,businessProfile:this.props.contact.businessProfile,onProductCatalog:this.props.onProductCatalog}):null}_renderTopCard(){const{contact:e}=this.props;return(0,F.canSeeBizProfileV3)()&&e.isBusiness?this._renderBusinessProfileTopCard():(0,fe.jsx)(T.default,{contact:e,onDetailImageLoad:this._handleDetailImageLoad,onDetailImageClick:this._handleViewPicture})}_handleScroll(e){const t=Math.floor(100*(1+e.currentTarget.scrollTop/e.currentTarget.offsetHeight));t>this.state.scrollDepth&&this.setState({scrollDepth:t})}renderProductCatalogSection(){if(!this._shouldRenderCatalog())return null;const{contact:e,onProductCatalog:t}=this.props,a=m.CatalogCollection.get(e.id);if(!a)return null;let n="",i=!1;(0,F.canSeeBizProfileV3)()&&(n=H.default.t(489),i=!0);const{session:s}=(0,Q.getProductCatalogContext)(this.context);return s.isAccidental()?null:(0,h.hasShop)(e.businessProfile)?(0,F.bannedShopsEnabled)()&&(0,h.isShopBanned)(e.businessProfile)?null:(0,fe.jsx)(ne.default,{businessProfile:e.businessProfile,catalog:a,subtitle:n,hideIncompleteRows:i}):(0,fe.jsx)(x.default,{onProductDetail:e=>{this._handleProductDetail(e)},onProductCatalog:t,catalog:a,subtitle:n,hideIncompleteRows:i,shouldLog:!0})}renderButtons(){const e=this.props.contact;let t;return g.ChatCollection.get(e.id)&&(t=(0,fe.jsx)(k.default,{a8nText:"li-delete-chat",icon:(0,fe.jsx)(oe.default,{name:"delete"}),color:"danger",onClick:this._handleDeleteChat,theme:this.props.newChatInfo?"new-chat-info":null,children:H.default.t(702)})),(0,fe.jsxs)(fe.Fragment,{children:[(0,fe.jsx)(I.default,{contact:e}),(0,fe.jsx)(C.ChatInfoDrawerButtonsSection,{newChatInfo:this.props.newChatInfo,children:t})]})}render(){const e=this.props.contact,t=(0,fe.jsx)(S.default,{contact:this.props.contact,onClose:this.handleClose,flatListController:this.flatListController}),a=g.ChatCollection.get(e.id);let n=null;this.props.onMediaGallery&&a&&(n=(0,fe.jsx)(v.default,{chat:a,onMediaGallery:this.props.onMediaGallery}));let s=null;B.GK.supportsFeature(B.GK.F.LIVE_LOCATIONS)&&a&&(s=(0,fe.jsx)(K.default,{chat:a,onClick:this.props.onLiveLocation}));let o=null,u=null;(0,F.canSeeBizProfileV3)()?u=this.renderProductCatalogSection():o=this.renderProductCatalogSection();const h=a&&a.mute.canMute()?(0,fe.jsx)($.default,{chat:a,mute:a.mute,settings:ae.default,theme:this.props.newChatInfo?"new-chat-info":null}):null;let p,m=null;if(this.props.onStarred&&!this.props.newChatInfo){const e=(0,fe.jsx)(oe.default,{xstyle:he.chevron,name:"chevron-right-alt",directional:!0});m=(0,fe.jsx)(P.default,{a8nText:"block-starred-messages",side:e,onClick:this.props.onStarred,children:(0,fe.jsx)(le.TextSpan,{theme:"title",children:H.default.t(533)})})}this.props.onStarred&&this.props.newChatInfo&&(p=(0,fe.jsx)(M.default,{chat:a,onStarred:this.props.onStarred,onContactCard:this.props.onContactCard}));const x=a&&a.shouldShowEphemeralSetting()?(0,fe.jsx)(R.EphemeralSettingRow,{onClick:this.props.onEphemeral,chat:a,theme:this.props.newChatInfo?"new-chat-info":null}):null;let _=null;const I=a&&a.getReceivedVcardMsgs();if(B.GK.supportsFeature(B.GK.F.INDEX_RECEIVED_VCARD)&&(null==I?void 0:I.length)&&!this.props.newChatInfo){const e=(0,fe.jsx)(oe.default,{xstyle:he.chevron,name:"chevron-right-alt",directional:!0});_=(0,fe.jsx)(P.default,{a8nText:"block-contact-card",side:e,onClick:this.props.onContactCard,children:(0,fe.jsx)(le.TextSpan,{theme:"title",children:H.default.t(665,{_plural:I.length})})})}const T=B.GK.supportsFeature(B.GK.F.MD_BACKEND)?(0,fe.jsx)(E.default,{contact:(0,se.unproxy)(e),onVerificationClick:this.handleVerificationClick}):null;let b=null;(h||m||x||_||T)&&(b=this.props.newChatInfo?(0,fe.jsxs)(C.ChatInfoDrawerSection,{newChatInfo:!0,children:[h,x,T]}):(0,fe.jsxs)(C.ChatInfoDrawerSection,{newChatInfo:!1,children:[h,m,x,_,T]}));const y=this.props.newChatInfo&&!e.isBusiness,k=y?null:(0,fe.jsx)(r.default,{contact:(0,se.unproxy)(e)}),A=y?(0,fe.jsx)(j.default,{contact:(0,se.unproxy)(e)}):null,L=this._renderTopCard();let G,V,W,q=null;e.isBusiness&&e.businessProfile&&((0,F.canSeeBizProfileV3)()&&e.businessProfile?(q=(0,fe.jsx)(c.default,{businessProfile:e.businessProfile}),G=(0,fe.jsx)(d.default,{contact:e}),e.labels&&e.labels.length>0&&(V=(0,fe.jsx)(D.default,{theme:"padding",children:(0,fe.jsx)(U.default,{labels:e.labels,theme:"standalone"})})),W=this._handleScroll.bind(this)):e.businessProfile&&(q=(0,fe.jsx)(f.BusinessProfile,{contact:e,businessProfile:e.businessProfile})));const z=(0,i.default)((0,i.default)({title:H.default.t(1986),type:O.DRAWER_HEADER_TYPE.SMALL},!1),{},{onCancel:this.handleClose});return(0,fe.jsxs)(w.default,{theme:"striped",style:this.props.style,children:[(0,fe.jsx)(O.DrawerHeader,(0,i.default)({},z)),(0,fe.jsx)(N.default,{flatListControllers:[this.flatListController],onScroll:W,children:(0,fe.jsxs)("section",{className:(0,l.default)(he.body),children:[L,G,V,u,q,s,o,A,n,p,b,k,undefined,t,this.renderButtons()]})})]},"contact-info-modal")}}pe.contextType=A.DrawerContext,pe.CONCERNS={contact:["id","formattedName","formattedUser","formattedShortName","isBusiness","isEnterprise","isMyContact","commonGroups","businessProfile","showBusinessCheckmarkAsPrimary","showBusinessCheckmarkAsSecondary","verifiedName","verifiedLevel","name","notifyName","labels","businessCatalog","isMe","statusMute","displayName"]},pe.displayName="ContactInfoDrawerBase";const me=(0,V.default)((0,ee.default)((0,W.ListenerHOC)((0,ie.default)(pe,pe.CONCERNS))))},76676:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onVerificationClick:t}=e,a=(0,f.useModelValues)(e.contact,["id","privacyMode"]),n=(0,h.default)();if(u.ServerProps.bspSystemMessageEnabled){const e=function(e,t){if((0,l.default)(t.user))return{text:r.default.t(1722),title:r.default.t(672),onClick:()=>{(0,d.default)(r.default.t(1720),(0,s.getSupportChatSafetyFaqUrl)(),r.default.t(1721))}};switch(e){case c.ReducedPrivacyMode.E2EE:return null;case c.ReducedPrivacyMode.BSP:return{text:r.default.t(216),title:r.default.t(672),onClick:()=>{(0,d.default)((0,o.formatBspModalText)(),(0,s.getE2EEnterpriseFaqUrl)())}};case c.ReducedPrivacyMode.FB:return{text:r.default.t(217),title:r.default.t(672),onClick:()=>{(0,d.default)((0,o.formatFbModalText)(),(0,s.getE2EEnterpriseFaqUrl)())}}}}((0,c.getReducedPrivacyMode)(a.privacyMode),a.id);if(e)return(0,m.jsx)(i.default,{title:e.title,text:e.text,onClick:e.onClick,theme:n?"new-chat-info":void 0})}const x=p.default.isVoiceCallEnabled()||p.default.isVideoCallEnabled()?r.default.t(1990):r.default.t(1989);return(0,m.jsx)(i.default,{onClick:t,text:x,theme:n?"new-chat-info":void 0})};var i=n(a(63308)),s=a(9730),o=a(24265),l=n(a(47504)),r=n(a(79276)),d=n(a(32249)),c=a(47701),u=a(48402),f=a(90370),h=n(a(43113)),p=n(a(26910)),m=a(85893)},59325:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,C.default)(),a=t?"new-chat-info":null,n=(0,g.useModelValues)(e.contact,["displayName","isBusiness","isContactBlocked"]);let _=null;if(n.isContactBlocked){const s=t?c.default.t(670,{contact:n.displayName}):c.default.t(1764);_=(0,v.jsx)(d.default,{a8nText:"li-unblock",color:"success",icon:(0,v.jsx)(x.default,{name:"settings-blocked",directional:!0}),onClick:()=>{l.Cmd.openModal((0,v.jsx)(r.default,{okText:c.default.t(1764),onOK:()=>{(0,i.unblockContact)(e.contact),l.Cmd.closeModal()},cancelText:c.default.t(1974),onCancel:()=>l.Cmd.closeModal(),children:(0,v.jsx)(u.default,{id:1765,params:{contact:(0,v.jsx)(f.Name,{contact:e.contact})}})}))},theme:a,children:s})}else{const s=t?c.default.t(667,{contact:n.displayName}):c.default.t(233);_=(0,v.jsx)(d.default,{a8nText:"li-block",color:"danger",icon:(0,v.jsx)(x.default,{name:"settings-blocked",directional:!0}),onClick:()=>{l.Cmd.openModal((0,v.jsx)(r.default,{onOK:()=>{(0,i.blockContact)(e.contact),l.Cmd.closeModal()},okText:c.default.t(233),onCancel:()=>l.Cmd.closeModal(),cancelText:c.default.t(1974),children:(0,v.jsx)(u.default,{id:235,params:{contact:(0,v.jsx)(f.Name,{contact:e.contact})}})}))},theme:a,children:s})}let j=c.default.t(1548);n.isBusiness||(j=t?c.default.t(1554,{contactInfo:n.displayName}):c.default.t(1551));const S=(0,v.jsx)(d.default,{a8nText:"li-report-spam",color:"danger",icon:(0,v.jsx)(x.default,{name:"thumbs-down",directional:!0}),onClick:()=>{l.Cmd.openModal((0,v.jsx)(h.default,{isBusiness:e.contact.isBusiness,isGroupChat:!1,onReport:()=>{const t=s.ChatCollection.get(e.contact.id);t&&(0,p.sendSpamReport)(t,m.SpamFlow.Account),l.Cmd.closeModal()},onReportBlockClear:()=>{const t=s.ChatCollection.get(e.contact.id);t&&(0,p.sendSpamBlockClear)(t,m.SpamFlow.Block),l.Cmd.closeModal()},onCancel:()=>l.Cmd.closeModal()}))},theme:a,children:j});return t?(0,v.jsxs)(o.ChatInfoDrawerButtonsSection,{newChatInfo:!0,children:[_,S]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(o.ChatInfoDrawerButtonsSection,{newChatInfo:!1,children:_}),(0,v.jsx)(o.ChatInfoDrawerButtonsSection,{newChatInfo:!1,children:S})]})};var i=a(93671),s=a(91129),o=a(39140),l=a(2751),r=n(a(72021)),d=n(a(62125)),c=n(a(79276)),u=n(a(9782)),f=a(88594),h=n(a(77901)),p=a(49091),m=a(1797),x=n(a(15817)),g=a(90370),C=n(a(43113)),v=a(85893)},38718:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({chat:e,onStarred:t,onContactCard:a}){let n=null;const c=e&&e.getReceivedVcardMsgs();if(o.GK.supportsFeature(o.GK.F.INDEX_RECEIVED_VCARD)&&(null==c?void 0:c.length)){const e=(0,d.jsx)(r.TextSpan,{theme:"title",children:l.default.t(665,{_plural:c.length})});n=(0,d.jsx)(i.default,{a8nText:"block-starred-messages",side:"chevron",icon:"account-box",onClick:a,title:e})}const u=(0,d.jsx)(r.TextSpan,{theme:"title",size:"16",children:l.default.t(533)});return(0,d.jsxs)(s.ChatInfoDrawerSection,{a8nText:"section-starred-messages",newChatInfo:!0,children:[(0,d.jsx)(i.default,{a8nText:"block-starred-messages",side:"chevron",icon:"star",onClick:t,title:u}),n]})};var i=n(a(24033)),s=a(39140),o=a(37268),l=n(a(79276)),r=a(51183),d=a(85893)},20055:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,_.default)()?(0,I.jsx)(N,(0,i.default)({},e)):(0,I.jsx)(w,(0,i.default)({},e))};var i=n(a(81109)),s=n(a(56720)),o=n(a(82216)),l=a(91129),r=a(49046),d=n(a(66799)),c=a(86757),u=a(71092),f=a(37268),h=n(a(31849)),p=n(a(79276)),m=a(88594),x=a(11273),g=a(83040),C=n(a(15817)),v=a(51183),_=n(a(43113)),j=n(a(21336)),S=n(a(12899)),E=n(a(33856)),I=a(85893);const M={display:"p357zi0d",justifyContent:"ac2vgrno",marginBottom:"du8bjn1j"},T={minHeight:"g4oj0cdv",marginTop:"g1eqewly",overflowX:"gfz4du6o",overflowY:"r7fjleex",color:"hp667wtd",textOverflow:"lhj4utae",whiteSpace:"le5p0ye3"},b={display:"p357zi0d",flexDirection:"sap93d0t"},y={display:"l7jjieqr",flexShrink:"oq44ahr5",flexGrow:"tvf2evcx",flexBasis:"lb5m6g5c",marginTop:"b9l0eqez",marginStart:"k6y3xtnu"};function w({contact:e,onDetailImageLoad:t,onDetailImageClick:a}){const n=!e.name&&e.notifyName?(0,I.jsx)("div",{className:(0,s.default)(T),children:(0,I.jsxs)(v.TextSpan,{theme:"muted",children:["~",(0,I.jsx)(c.EmojiText,{direction:"auto",text:e.notifyName,selectable:!0})]})}):null,i=e.showBusinessCheckmarkAsSecondary&&f.GK.supportsFeature(f.GK.F.VNAME_V_2)?(0,I.jsxs)("div",{className:(0,s.default)(b),children:[(0,I.jsx)(c.EmojiText,{text:e.verifiedName,direction:"auto"}),(0,I.jsx)("div",{className:(0,s.default)(y),children:(0,I.jsx)(C.default,{name:"psa-verified"})})]}):null,o=l.ChatCollection.get(e.id),u=(null==o?void 0:o.presence)?(0,I.jsx)(S.default,{contact:e,presence:o.presence,chatstate:o.presence.chatstate,location:"info"}):null;return(0,I.jsxs)(d.default,{theme:"padding-large",children:[(0,I.jsx)("div",{className:(0,s.default)(M),children:(0,I.jsx)(r.DetailImage,{id:e.id,size:r.DETAIL_IMAGE_SIZE.LARGE,loader:!0,onLoad:t,onClick:a,quality:r.DETAIL_IMAGE_QUALITY.HIGH})}),(0,I.jsx)(v.TextHeader,{level:"2",theme:"large",children:(0,I.jsx)(m.Name,{contact:e,selectable:!0,showBusinessCheckmark:e.showBusinessCheckmarkAsPrimary})}),n,(0,I.jsxs)("div",{className:(0,s.default)(T),children:[(0,I.jsx)(v.TextSpan,{theme:"muted",children:i}),(0,I.jsx)(v.TextSpan,{theme:"muted",children:u})]}),(0,I.jsx)(h.default,{labels:e.labels})]})}const P={avatar:{display:"p357zi0d",justifyContent:"ac2vgrno",marginBottom:"pz0xruzv"},secondaryWrapper:{lineHeight:"a4ywakfo",marginTop:"qt60bha0"},contactName:{wordBreak:"cw3vfol9",textAlign:"qfejxiq4"}};function N({contact:e,onDetailImageLoad:t,onDetailImageClick:a}){let n;if(e.isMyContact)n=(0,E.default)(e.id);else{const t=e.notifyName;null!=t&&(n=`~${t}`)}return(0,I.jsxs)(d.default,{theme:"padding-large",children:[(0,I.jsx)("div",{className:(0,s.default)(P.avatar),children:(0,I.jsx)(r.DetailImage,{id:e.id,size:r.DETAIL_IMAGE_SIZE.LARGE,loader:!0,onLoad:t,onClick:a,quality:r.DETAIL_IMAGE_QUALITY.HIGH})}),(0,I.jsxs)(u.FlexColumn,{align:"center",children:[(0,I.jsx)(v.TextHeader,{level:"2",size:"24",xstyle:P.contactName,children:(0,I.jsx)(m.Name,{contact:e,selectable:!0})}),null!=n&&(0,I.jsx)("div",{className:(0,s.default)(P.secondaryWrapper),children:(0,I.jsx)(x.SelectableSpan,{dir:"auto",selectable:!0,children:(0,I.jsx)(v.TextSpan,{size:"16",color:"secondary",children:n})})})]}),(0,I.jsx)(A,{contact:e}),(0,I.jsx)(h.default,{labels:e.labels})]})}const k={container:{marginTop:"a4rz4n5c",marginBottom:"inww9tbj"},button:{marginStart:"nzcjdldu",marginEnd:"gqi0zhd6"}};function A({contact:e}){const t=(0,j.default)((0,g.unproxy)(e));return t.isVideoCallEnabled||t.isVoiceCallEnabled?(0,I.jsxs)(u.FlexRow,{justify:"center",xstyle:k.container,children:[(0,I.jsx)(o.default,{icon:"voice-call-filled",iconWidth:19,label:p.default.t(529),a8nText:"contact-action voice-call-button",xstyle:k.button,theme:"new-chat-info",disabled:!t.canStartVoiceCall,onClick:t.startVoiceCall}),(0,I.jsx)(o.default,{icon:"chat-info-video",label:p.default.t(530),a8nText:"contact-action video-call-button",xstyle:k.button,theme:"new-chat-info",disabled:!t.canStartVideoCall,onClick:t.startVideoCall})]}):null}},36736:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({numMore:e,newChatInfo:t,viewAll:a,onClick:n}){if(!t){const t=(0,u.jsx)(r.default,{theme:"transparent",children:(0,u.jsx)(d.default,{name:"down"})});return(0,u.jsx)(s.default,{image:t,theme:"new-chat-info",primary:l.default.t(982,{count:e,_plural:e}),onClick:n})}const h=(0,u.jsx)(o.FlexRow,{align:"center",justify:"center",xstyle:f.iconWrapper,children:a?null:(0,u.jsx)(r.default,{theme:"transparent",children:(0,u.jsx)(d.default,{name:"down",color:"secondary"})})});let p=l.default.t(982,{count:e,_plural:e});a&&(p=l.default.t(981,{more:p}));return(0,u.jsxs)(c.default,{xstyle:f.container,onClick:n,children:[h,(0,u.jsx)("div",{className:(0,i.default)(f.text,a&&f.textAlt),children:p})]})};var i=n(a(56720)),s=n(a(57469)),o=a(71092),l=n(a(79276)),r=n(a(35963)),d=n(a(15817)),c=n(a(43997)),u=a(85893);const f={container:{height:"q1n4p668",width:"ln8gz9je",paddingStart:"ddw6s8x9",display:"p357zi0d",alignItems:"gndfcl4n",color:"pm5hny62",":hover":{backgroundColor:"os03hap6"}},iconWrapper:{width:"fujhy7ri"},text:{flexGrow:"ggj6brxn",textAlign:"ljrqcn24"},textAlt:{color:"dmdq60dq"}}},48436:(e,t,a)=>{"use strict";var n=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,M.useModelValues)(e.chat,["groupMetadata"]),a=(0,M.useModelValues)((0,o.default)(t.groupMetadata,"chat.groupMetadata"),["desc","owner","creation","restrict","participants"]),[n,i]=(0,l.useState)(a.desc),[P,N]=(0,l.useState)(!1),[k,A]=(0,l.useState)(e.showFullDescription||!(n&&n.length>30)),O=(0,T.default)(),D=(0,b.default)();if((0,I.useListener)(a,"change:desc",(()=>{i(a.desc)})),!(m.GK.supportsFeature(m.GK.F.GROUPS_V_3)&&_.ServerProps.groupDescLength>0))return null;const R={textLimit:k?1/0:h.default.GROUP_DESCRIPTION_INFO_PANEL_TRUNC_LENGTH,readMoreText:g.default.t(1536),onReadMore:()=>{A(!0)},formatters:t.isTrusted()?x.Configuration.TrustedGroupDesc({links:C.findLinks(n)}):x.Configuration.UntrustedGroupDesc()},L=O?[E.TextInputCustomStyleThemes.groupInfoName,E.TextInputCustomStyleThemes.newChatInfoDefaultText]:[E.TextInputCustomStyleThemes.groupInfoName];let G=(0,y.jsx)("div",{className:(0,r.default)(w.inputWrapper),children:(0,y.jsx)(E.TextInput,{a8n:"group-info-drawer-description-title-input",value:n,emptyValuePlaceholder:g.default.t(150),renderEmojiTextInLockMode:R,editable:a.canSetDescription(),pending:P,showRemaining:!0,maxLength:_.ServerProps.groupDescLength,onChange:e=>{i(e)},onSave:()=>{if(!a.canSetDescription())return;let e=n||"";const o=e.match(/\r\n/gm)?"\r\n":"\n",l=new RegExp(`^(${o}{2,})([^\n])`,"gm");e=e.replace(l,`${o}$2`);const r=(0,p.default)(e||"");if(r===a.desc)return i(r);N(!0),(0,v.default)((0,j.setGroupDesc)(t,r),D).catch((0,s.catchAbort)((()=>{}))).catch((()=>{__LOG__(3)`group_info_drawer:onSetDescription failed`})).finally((()=>{i(a.desc),N(!1)}))},onCancel:()=>{i(a.desc)},multiline:!0,editRestrictionInfo:a.restrict?()=>{u.Cmd.openModal((0,y.jsx)(f.default,{onOK:()=>u.Cmd.closeModal(),okText:g.default.t(2167),children:g.default.t(1378)}))}:void 0,supportsEmoji:!0,lockable:!0,lowProfile:!0,customStyleThemes:L,theme:"small",showEditOnHover:O,constrainedWidth:!0})});O&&!n&&a.restrict&&(G=null);if(O){var B;let e;const t=a.owner&&(null===(B=a.participants.get(a.owner))||void 0===B?void 0:B.contact);return t&&(e=(0,y.jsx)(S.TextDiv,{theme:"muted",children:c.Clock.createdByStr(a.creation,t.formattedName,t.isMe)})),G||e?(0,y.jsxs)(d.ChatInfoDrawerSection,{xstyle:w.chatInfoSection,newChatInfo:!0,children:[G,e]}):null}return(0,y.jsx)(d.ChatInfoDrawerSection,{newChatInfo:!1,theme:"group-desc-padding",title:g.default.t(918),children:G})};var s=a(66591),o=i(a(58721)),l=a(67294),r=i(a(56720)),d=a(39140),c=a(21810),u=a(2751),f=i(a(72021)),h=i(a(11547)),p=i(a(75839)),m=a(37268),x=a(29320),g=i(a(79276)),C=n(a(33583)),v=i(a(43990)),_=a(48402),j=a(19955),S=a(51183),E=a(30817),I=a(64514),M=a(90370),T=i(a(43113)),b=i(a(6232)),y=a(85893);const w={chatInfoSection:{paddingTop:"nlnf8xo7",paddingBottom:"r219jyu0"},inputWrapper:{whiteSpace:"bbv8nyr4"}}},86295:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,$.default)(),a=(0,Z.useNewChatInfoColors)();return(0,J.jsx)(ne,(0,i.default)((0,i.default)({},e),{},{newChatInfo:t,style:t?a:null}))};var i=n(a(81109)),s=n(a(2119)),o=a(67294),l=n(a(56720)),r=n(a(29586)),d=n(a(21706)),c=n(a(24033)),u=a(39140),f=n(a(46693)),h=a(2751),p=n(a(72021)),m=n(a(39178)),x=n(a(9598)),g=n(a(72543)),C=a(27001),v=n(a(72578)),_=a(86757),j=n(a(63308)),S=a(60618),E=n(a(54612)),I=a(37268),M=a(18675),T=n(a(48436)),b=n(a(38438)),y=a(79709),w=n(a(63943)),P=n(a(46835)),N=n(a(82418)),k=n(a(87538)),A=n(a(30268)),O=n(a(79276)),D=a(38428),R=n(a(16630)),L=n(a(4040)),G=a(27251),B=n(a(79444)),F=n(a(73282)),V=a(48402),U=n(a(3439)),H=n(a(23080)),W=a(83040),K=n(a(9707)),q=n(a(61546)),z=n(a(15817)),Y=a(51183),X=a(37014),$=n(a(43113)),Z=a(68386),Q=n(a(26910)),J=a(85893);const ee={body:{flexShrink:"oq44ahr5",flexGrow:"tvf2evcx",flexBasis:"lb5m6g5c",paddingBottom:"s9fl9ege"},chevron:{color:"cs9t9or5"}},te=(0,X.genId)("max_participant_toast");class ae extends o.Component{constructor(e){super(e),this._participantFlatListController=new E.default,this._pendingParticipantFlatListController=new E.default,this._subGroupsFlatListController=new E.default,this._setRefContainer=e=>{this._refContainer=e},this._refParticipantsSection=(0,o.createRef)(),this.handleDemoteAdmin=e=>{e.contact.pendingAction++,(0,G.demoteParticipants)(this.props.chat,[e]).then((()=>{e.contact.pendingAction--}))},this._confirmParticipantRemove=e=>{const t=this.handleParticipantRemove.bind(this,e,!0),a=O.default.t(649,{participant:e.contact.formattedName,subject:this.props.contact.name});h.Cmd.openModal((0,J.jsx)(p.default,{onOK:t,okText:O.default.t(1538),onCancel:()=>h.Cmd.closeModal(),cancelText:O.default.t(1974),children:(0,J.jsx)(_.EmojiText,{text:a})}))},this.handleParticipantRemove=(e,t)=>{e.contact.pendingAction++,(0,G.removeParticipants)(this.props.chat,[e]).then((()=>{e.contact.pendingAction--})),t&&h.Cmd.closeModal()},this._confirmParticipantPromote=e=>{const t=this.handleParticipantPromote.bind(this,e,!0),a=O.default.t(648,{participant:e.contact.formattedName,subject:this.props.contact.name});h.Cmd.openModal((0,J.jsx)(p.default,{onOK:t,okText:O.default.t(1209),onCancel:()=>h.Cmd.closeModal(),cancelText:O.default.t(1974),children:(0,J.jsx)(_.EmojiText,{text:a})}))},this.handleParticipantPromote=(e,t)=>{e.contact.pendingAction++,(0,G.promoteParticipants)(this.props.chat,[e]).then((()=>{e.contact.pendingAction--})),t&&h.Cmd.closeModal()},this._openAddGroupParticipantFlow=()=>{const{chat:e}=this.props;if(this.props.groupMetadata.participants.length>=V.ServerProps.maxParticipants){const e=O.default.t(60,{max:V.ServerProps.maxParticipants});h.Cmd.openToast((0,J.jsx)(X.Toast,{msg:e,id:te}))}else{const t=I.GK.supportsFeature(I.GK.F.GROUPS_V_3)?(0,J.jsx)(d.default,{chat:(0,W.unproxy)(e),pushTransition:"none",popTransition:"none"}):(0,J.jsx)(r.default,{chat:(0,W.unproxy)(e),pushTransition:"none",popTransition:"none"});h.Cmd.openModal(t,{transition:"modal-flow"})}},this._openParticpantSearch=()=>{h.Cmd.openModal((0,J.jsx)(k.default,{chat:(0,W.unproxy)(this.props.chat),onParticipantPromote:this.handleParticipantPromote,onParticipantRemove:this.handleParticipantRemove,onDemoteAdmin:this.handleDemoteAdmin,onVerification:this.props.onVerification}),{transition:"modal-flow"})},this.handleClose=()=>{this.props.onClose?this.props.onClose():this.props.uim.uie.requestDismiss()},this._handleClickParticipantsCount=()=>{var e;null===(e=this._refParticipantsSection.current)||void 0===e||e.scrollIntoView()},this.showEncryptionInfoPopup=()=>{h.Cmd.openModal((0,J.jsx)(v.default,{chatId:this.props.chat.id,e2eSubtype:"info_encrypted"}))},this._showSecurityInfoPopup=()=>{h.Cmd.openModal((0,J.jsx)(v.default,{chat:this.props.chat,chatId:this.props.chat.id,e2eSubtype:"info_encrypted"}))},this._uiActionEvent=new L.default.UiAction({uiActionType:L.default.UI_ACTION_TYPE.GROUP_INFO_OPEN,uiActionPreloaded:!0})}componentDidMount(){const e=this.props.groupMetadata;this.props.listeners.add(e.participants,"add remove reset sort change:isAdmin change:isSuperAdmin",(()=>{this.forceUpdate()})),this.props.listeners.add(e.pendingParticipants,"add remove reset",(()=>{this.forceUpdate()})),this.ensureParticipantsSorted();const t=this._uiActionEvent;if(t){const e=this.props.groupMetadata.cachedDeviceSizeBucket;null!=e&&(t.sizeBucket=e),t.markUiActionT(),t.commit(),this._uiActionEvent=void 0}this.props.chat.isSuspendedGroup()&&q.default.openModal()}componentDidUpdate(){this.ensureParticipantsSorted()}ensureParticipantsSorted(){this.props.groupMetadata.participants.ensureSorted();this.props.groupMetadata.pendingParticipants.ensureSorted()}_getTitle(){return V.ServerProps.productMediaAttachments?O.default.t(1202):O.default.t(1201)}render(){const{chat:e,groupMetadata:t}=this.props;let a;if(t.participants.iAmAdmin()&&I.GK.supportsFeature(I.GK.F.GROUPS_V_3)&&!t.support)if(this.props.newChatInfo){const e=(0,J.jsx)(Y.TextSpan,{theme:"title",children:O.default.t(979)});a=(0,J.jsx)(c.default,{side:"chevron",icon:"settings",onClick:this.props.onAdminSetting,title:e})}else{const e=(0,J.jsx)(z.default,{xstyle:ee.chevron,name:"chevron-right-alt",directional:!0});a=(0,J.jsx)(x.default,{onClick:this.props.onAdminSetting,side:e,children:(0,J.jsx)(Y.TextSpan,{theme:"title",children:O.default.t(979)})})}let n=null;this.props.onMediaGallery&&(n=(0,J.jsx)(f.default,{onMediaGallery:this.props.onMediaGallery,chat:(0,W.unproxy)(e)}));let i=null;I.GK.supportsFeature(I.GK.F.LIVE_LOCATIONS)&&(i=(0,J.jsx)(R.default,{chat:e,onClick:this.props.onLiveLocation}));const o=e&&e.shouldShowEphemeralSetting()?(0,J.jsx)(S.EphemeralSettingRow,{onClick:this.props.onEphemeral,chat:e,groupMetadata:t,theme:this.props.newChatInfo?"new-chat-info":null}):null;let r=null;I.GK.supportsFeature(I.GK.F.MD_BACKEND)&&(r=(0,J.jsx)(j.default,{onClick:this.showEncryptionInfoPopup,theme:this.props.newChatInfo?"new-chat-info":null,text:Q.default.isGroupCallEnabled()?O.default.t(2063):O.default.t(2062)})),this.props.chat.isSupportGroup()&&(r=(0,J.jsx)(K.default,{onClick:this._showSecurityInfoPopup,theme:this.props.newChatInfo?"new-chat-info":null}));const d=e.mute.canMute()?(0,J.jsx)(B.default,{chat:e,mute:e.mute,settings:U.default,theme:this.props.newChatInfo?"new-chat-info":null}):null;let h=null,p=null;if(this.props.onStarred)if(this.props.newChatInfo){const e=(0,J.jsx)(Y.TextSpan,{theme:"title",size:"16",children:O.default.t(533)});p=(0,J.jsx)(u.ChatInfoDrawerSection,{a8nText:"section-starred-messages",newChatInfo:!0,children:(0,J.jsx)(c.default,{a8nText:"block-starred-messages",side:"chevron",icon:"star",onClick:this.props.onStarred,title:e})})}else{const e=(0,J.jsx)(z.default,{xstyle:ee.chevron,name:"chevron-right-alt",directional:!0});h=(0,J.jsx)(x.default,{side:e,onClick:this.props.onStarred,children:(0,J.jsx)(Y.TextSpan,{theme:"title",children:O.default.t(533)})})}let v=null;(d||h||r||o)&&(v=(0,J.jsxs)(u.ChatInfoDrawerSection,{newChatInfo:this.props.newChatInfo,children:[d,h,o,r,a]}));const _=I.GK.supportsFeature(I.GK.F.MD_BACKEND)&&this.props.scrollToParticipantList;return(0,J.jsxs)(m.default,{theme:"striped",style:this.props.style,children:[(0,J.jsx)(C.DrawerHeader,{title:O.default.t(2061),type:C.DRAWER_HEADER_TYPE.SMALL,onCancel:this.handleClose}),(0,J.jsx)(g.default,{flatListControllers:[this._pendingParticipantFlatListController,this._participantFlatListController],children:(0,J.jsxs)("section",{className:(0,l.default)(ee.body),"data-a8n":s.default.key("group-info-drawer-body"),children:[(0,J.jsx)(N.default,{chat:(0,W.unproxy)(e),onAdminSetting:this.props.onAdminSetting,onAddParticipant:this._openAddGroupParticipantFlow,onClickParticpantsCount:this._handleClickParticipantsCount}),(0,J.jsx)(T.default,{chat:(0,W.unproxy)(e),showFullDescription:this.props.showFullGroupDescription}),i,n,p,v,undefined,(0,M.communitiesEnabled)()?(0,J.jsx)(P.default,{flatListController:this._subGroupsFlatListController}):null,(0,J.jsx)(y.GroupInfoParticipantsSection,{ref:this._refParticipantsSection,chat:(0,W.unproxy)(e),scrollToParticipantList:_,flatListController:this._participantFlatListController,onAddParticipant:this._openAddGroupParticipantFlow,onOpenParticpantSearch:this._openParticpantSearch,onGroupInviteLink:this.props.onGroupInviteLink,onVerification:this.props.onVerification}),(0,J.jsx)(w.default,{chat:(0,W.unproxy)(e),flatListController:this._pendingParticipantFlatListController}),(0,J.jsx)(b.default,{chat:(0,W.unproxy)(e)})]})})]},"contact-info-modal")}}ae.CONCERNS={chat:["mute","id","pendingAction","liveLocation"],groupMetadata:["id","cachedDeviceSizeBucket","participants","pendingParticipants","announce","support"],contact:["name","id","pendingAction"]},ae.displayName="GroupInfoDrawerBase";const ne=(0,A.default)((0,F.default)((0,D.ListenerHOC)((0,H.default)(ae,ae.CONCERNS))))},38438:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({chat:e}){const t=(0,f.default)(),a=(0,h.jsx)(m,{chat:e,showNewChatInfo:t}),n=(0,h.jsx)(p,{chat:e,showNewChatInfo:t});return t?(0,h.jsxs)(i.ChatInfoDrawerButtonsSection,{newChatInfo:!0,children:[a,n]}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(i.ChatInfoDrawerButtonsSection,{newChatInfo:!1,children:a}),(0,h.jsx)(i.ChatInfoDrawerButtonsSection,{newChatInfo:!1,children:n})]})};var i=a(39140),s=a(2751),o=n(a(62125)),l=n(a(79276)),r=n(a(77901)),d=a(49091),c=a(1797),u=n(a(15817)),f=n(a(43113)),h=a(85893);function p({chat:e,showNewChatInfo:t}){return(0,h.jsx)(o.default,{a8nText:"li-report-spam",color:"danger",icon:(0,h.jsx)(u.default,{name:"thumbs-down",directional:!0}),theme:t?"new-chat-info":null,onClick:()=>{s.Cmd.openModal((0,h.jsx)(r.default,{isGroupChat:!0,onReport:()=>{(0,d.sendSpamReport)(e,c.SpamFlow.Group),s.Cmd.closeModal()},onReportExitClear:()=>{(0,d.sendSpamExitClear)(e,c.SpamFlow.Block),s.Cmd.closeModal()},onCancel:()=>s.Cmd.closeModal()}))},children:l.default.t(1555)})}function m({chat:e,showNewChatInfo:t}){return(0,h.jsx)(o.default,{a8nText:"li-delete-group",icon:(0,h.jsx)(u.default,{name:"exit",directional:!0}),color:"danger",theme:t?"new-chat-info":null,onClick:()=>{s.Cmd.deleteOrExitChat(e)},children:e.isReadOnly?l.default.t(2017):l.default.t(2022)})}},79709:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.GroupInfoParticipantsSection=void 0;var i=n(a(58721)),s=n(a(48360)),o=a(67294),l=n(a(56720)),r=n(a(57469)),d=a(39140),c=a(2751),u=n(a(72021)),f=n(a(11547)),h=a(8670),p=a(63810),m=a(86757),x=n(a(36736)),g=a(42423),C=a(80680),v=a(26205),_=a(37268),j=n(a(79276)),S=a(27251),E=n(a(55121)),I=n(a(35963)),M=n(a(15817)),T=a(17714),b=n(a(23332)),y=n(a(79830)),w=a(64514),P=a(90370),N=n(a(43113)),k=n(a(69678)),A=a(85893);const O={iconSearch:{color:"s4k44ver"}},D=(0,o.forwardRef)(((e,t)=>{var a;const n=(0,N.default)(),D=(0,P.useModelValues)((0,i.default)(e.chat.groupMetadata,"props.chat.groupMetadata"),["support"]),L=(0,i.default)(null===(a=e.chat.groupMetadata)||void 0===a?void 0:a.participants,"props.chat.groupMetadata?.participants"),G=(0,y.default)();(0,w.useListener)(L,"add remove reset sort change:isAdmin change:isSuperAdmin",G);const[B,F]=(0,o.useState)(R(L)),V=(0,o.useRef)(),[U,H]=(0,o.useState)();(0,o.useEffect)((()=>{_.GK.supportsFeature(_.GK.F.MD_BACKEND)&&e.scrollToParticipantList&&V.current&&(0,h.scrollIntoViewIfNeeded)(V.current,!1)}),[e.scrollToParticipantList]),(0,o.useImperativeHandle)(t,(()=>({scrollIntoView(){var e;null===(e=V.current)||void 0===e||e.scrollIntoView()}})));const W=n?"secondary":null,K=n?"new-chat-info":"drawer-list",q=n?"compact":void 0,z=(0,A.jsx)(M.default,{name:"search",className:(0,l.default)(!n&&O.iconSearch),color:W});let Y,X,$;if(L.canAdd()&&!D.support){const t=(0,A.jsx)(I.default,{theme:q,children:(0,A.jsx)(M.default,{name:"add-user",directional:!0})});Y=(0,A.jsx)(r.default,{image:t,theme:K,primary:s.default._("Add participant",null,{hk:"48ECfz"}),onClick:e.onAddParticipant})}if(L.iAmAdmin()&&e.onGroupInviteLink&&!D.support){const t=(0,A.jsx)(I.default,{theme:q,children:(0,A.jsx)(M.default,{name:"link"})});X=(0,A.jsx)(r.default,{image:t,theme:K,primary:j.default.t(932),onClick:e.onGroupInviteLink})}if(R(L)&&B){const t=!n||L.length<=20,a=L.length-f.default.INFO_DRAWER_MAX_ROWS;$=(0,A.jsx)(x.default,{numMore:a,newChatInfo:n,onClick:()=>{t?F(!1):e.onOpenParticpantSearch()},viewAll:!t})}const Z=e=>{const t=L.get(e.id);return!!t&&(L.canPromote(t)||L.canRemove(t)||L.canVerifyIdentity(t))},Q=(t,a)=>{const n=L.assertGet(a.id);if(!Z(a))return;const i=[];L.canPromote(n)&&i.push((0,A.jsx)(p.DropdownItem,{a8n:"mi-grp-promote-admin",action:()=>{const t=j.default.t(648,{participant:n.contact.formattedName,subject:e.chat.contact.name});c.Cmd.openModal((0,A.jsx)(u.default,{onOK:()=>{return t=!0,n.contact.pendingAction++,(0,S.promoteParticipants)(e.chat,[n]).then((()=>{n.contact.pendingAction--})),void(t&&c.Cmd.closeModal());var t},okText:j.default.t(1209),onCancel:()=>c.Cmd.closeModal(),cancelText:j.default.t(1974),children:(0,A.jsx)(m.EmojiText,{text:t})}))},children:j.default.t(1209)},"promote")),L.canRemove(n)&&i.push((0,A.jsx)(p.DropdownItem,{a8n:"mi-grp-remove-participant",action:()=>{const t=j.default.t(649,{participant:n.contact.formattedName,subject:e.chat.contact.name});c.Cmd.openModal((0,A.jsx)(u.default,{onOK:()=>{return t=!0,n.contact.pendingAction++,(0,S.removeParticipants)(e.chat,[n]).then((()=>{n.contact.pendingAction--})),void(t&&c.Cmd.closeModal());var t},okText:j.default.t(1538),onCancel:()=>c.Cmd.closeModal(),cancelText:j.default.t(1974),children:(0,A.jsx)(m.EmojiText,{text:t})}))},children:j.default.t(1215)},"remove")),_.GK.supportsFeature(_.GK.F.GROUPS_V_3)&&L.canDemote(n)&&i.push((0,A.jsx)(p.DropdownItem,{a8n:"mi-grp-verify-identify",action:()=>{n.contact.pendingAction++,(0,S.demoteParticipants)(e.chat,[n]).then((()=>{n.contact.pendingAction--})),c.Cmd.closeModal()},children:j.default.t(734)},"demote-admin")),_.GK.supportsFeature(_.GK.F.MD_BACKEND)&&L.canVerifyIdentity(n)&&i.push((0,A.jsx)(p.DropdownItem,{a8n:"mi-grp-verify-identify",action:()=>{e.onVerification&&e.onVerification(n.contact)},children:j.default.t(2303)},"verify-identity")),H({contactId:a.id,menu:i,anchor:t.anchor,event:t.event})},J=(e,t)=>{k.default.equals((0,v.getMaybeMeUser)(),t.id)||(0,g.findChat)(t.id).then((e=>{c.Cmd.openChatFromUnread(e).then((t=>{t&&c.Cmd.focusChatTextInput(e)}))}))},ee=L.length?(0,A.jsxs)(d.ChatInfoDrawerListSection,{newChatInfo:n,onRef:e=>{V.current=e},a8nText:"section-participants",title:j.default.t(2169,{count:L.length,_plural:L.length}),titleOnClick:_.GK.supportsFeature(_.GK.F.GROUPS_V_3)?e.onOpenParticpantSearch:void 0,subtitle:_.GK.supportsFeature(_.GK.F.GROUPS_V_3)?z:void 0,children:[Y,X,(0,A.jsx)(C.FlatList,{flatListController:e.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:(()=>{let e;const t=[],a=[];L.forEach((n=>{n.contact.isMe?e=n:n.isAdmin?t.push(n):a.push(n)}));let n=[];return e&&n.push(e),n=n.concat(t,a),R(L)&&B&&(n=n.slice(0,f.default.INFO_DRAWER_MAX_ROWS)),n.map((e=>({itemKey:e.id.toString(),id:e.id,height:68})))})(),renderItem:e=>{const{id:t}=e,a=L.get(t);if(!a)throw new C.UnknownDataError(e);const i=a.contact,s=!!U&&k.default.equals(i.id,U.contactId);return(0,A.jsx)(E.default,{contact:i,participant:a,onClick:J,contextEnabled:()=>Z(i),contextMenu:s,onContext:e=>Q(e,i),theme:n?"new-chat-info":null,showNotifyName:!0,waitIdle:!0},a.id.toString())}}),$]}):null,te=()=>{H(null)};let ae;return U&&(ae=(0,A.jsx)(T.UIE,{displayName:"ChatContextMenu",escapable:!0,popable:!0,requestDismiss:te,children:(0,A.jsx)(b.default,{contextMenu:U})})),(0,A.jsxs)(A.Fragment,{children:[ee,ae]})}));function R(e){return e.length>f.default.INFO_DRAWER_MAX_ROWS_IN_COLLAPSED_LIST}t.GroupInfoParticipantsSection=D,D.displayName="GroupInfoParticipantsSection"},63943:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a;const n=(0,S.default)(),M=(0,i.default)(e.chat.groupMetadata,"props.chat.groupMetadata"),T=(0,i.default)(null===(t=e.chat.groupMetadata)||void 0===t?void 0:t.participants,"props.chat.groupMetadata?.participants"),b=(0,i.default)(null===(a=e.chat.groupMetadata)||void 0===a?void 0:a.pendingParticipants,"props.chat.groupMetadata?.pendingParticipants"),y=(0,_.default)();(0,j.useListener)(T,"change:isAdmin change:isSuperAdmin",y),(0,j.useListener)(b,"add remove reset",y);const[w,P]=(0,s.useState)(I(b)),[N,k]=(0,s.useState)();(0,s.useEffect)((()=>{p.GK.supportsFeature(p.GK.F.GROUPS_V_4_JOIN_PERMISSION)&&M.queryGroupV4PendingInvite().then((()=>{P(I(M.pendingParticipants))}))}),[M]);const A=()=>{let e=b.toArray();return I(b)&&w&&(e=e.slice(0,d.default.INFO_DRAWER_MAX_ROWS)),e.map((e=>({itemKey:e.id.toString(),id:e.id,height:68})))},O=e=>{const{id:t}=e,a=b.get(t);if(!a)throw new h.UnknownDataError(e);const i=a.contact;return(0,E.jsx)(x.default,{contact:i,participant:a,contextEnabled:()=>!0,contextMenu:!0,onContext:e=>(e=>{const t=[(0,E.jsx)(c.DropdownItem,{a8n:"mi-grp-promote-admin",action:()=>{l.Cmd.openModal((0,E.jsx)(r.default,{onOK:()=>{l.Cmd.closeModal(),M.revokeGroupV4AddInvite([a.id.toString()]).then((()=>{l.Cmd.openToast((0,E.jsx)(g.Toast,{msg:m.default.t(2109),id:(0,g.genId)()}))}))},okText:m.default.t(2230),onCancel:()=>l.Cmd.closeModal(),cancelText:m.default.t(1974),children:(0,E.jsx)(u.EmojiText,{text:m.default.t(994,{participant:a.contact.formattedName})})}))},children:m.default.t(1587)},"promote")];k({contactId:i.id,menu:t,anchor:e.anchor,event:e.event})})(e),theme:n?"new-chat-info":null,showNotifyName:!0,isPendingParticipant:!0,waitIdle:!0},a.id.toString())};let D,R,L;b.length>0&&(D=(0,E.jsx)(h.FlatList,{flatListController:e.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:A(),renderItem:O}));if(I(b)&&w){const e=b.length-d.default.INFO_DRAWER_MAX_ROWS;R=(0,E.jsx)(f.default,{numMore:e,newChatInfo:n,onClick:()=>{P(!1)}})}T.iAmAdmin()&&b.length>0&&(L=(0,E.jsxs)(o.ChatInfoDrawerListSection,{newChatInfo:n,a8nText:"section-participants",title:m.default.t(986,{number:b.length}),children:[D,R]}));const G=()=>{k(null)};let B;N&&(B=(0,E.jsx)(C.UIE,{displayName:"ChatContextMenu",escapable:!0,popable:!0,requestDismiss:G,children:(0,E.jsx)(v.default,{contextMenu:N})}));return(0,E.jsxs)(E.Fragment,{children:[L,B]})};var i=n(a(58721)),s=a(67294),o=a(39140),l=a(2751),r=n(a(72021)),d=n(a(11547)),c=a(63810),u=a(86757),f=n(a(36736)),h=a(80680),p=a(37268),m=n(a(79276)),x=n(a(55121)),g=a(37014),C=a(17714),v=n(a(23332)),_=n(a(79830)),j=a(64514),S=n(a(43113)),E=a(85893);function I(e){return e.length>d.default.INFO_DRAWER_MAX_ROWS_IN_COLLAPSED_LIST}},46835:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,p.default)(),a=e=>{(0,c.findChat)(e).then((e=>{l.Cmd.openChatFromUnread(e).then((t=>{t&&l.Cmd.focusChatTextInput(e)}))}))},n=e=>{a(e.id),l.Cmd.closeModal()};return g.length>0?(0,x.jsx)(o.ChatInfoDrawerListSection,{newChatInfo:t,title:"[INTERNAL ONLY] - Related groups",children:(0,x.jsx)(u.FlatList,{flatListController:e.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:g.map((e=>({itemKey:e.id.toString(),id:e.id,subject:e.desc,participants:e.participants}))),renderItem:e=>{var o;if(!e)throw new u.UnknownDataError(e);const c=null!==(o=e.participants.length)&&void 0!==o?o:0;return(0,x.jsx)(h.HotKeys,{children:(0,x.jsx)(s.default,{onClick:()=>(e=>{if((e=>e.participants.iAmMember())(e))a(e.id);else{const t=e.participants.getAdmins();if(1===t.length)return void a(t[0].id);l.Cmd.openModal((0,x.jsx)(r.default,{title:i.default._("Message Admin",null,{hk:"3eI9yU"}),filter:e=>t.includes(e.id),onCancel:()=>l.Cmd.closeModal(),onSelect:n}))}})(e),theme:t?"new-chat-info":null,primary:e.subject,secondary:i.default._({"*":"{count} participants",_1:"1 participant"},[i.default._plural(c,"count")],{hk:"3P3iII"}),contextEnabled:()=>!1,image:(0,x.jsx)(d.DetailImage,{id:e.id,size:40})})})}})}):null};var i=n(a(48360)),s=n(a(8416)),o=a(39140),l=a(2751),r=n(a(48722)),d=a(49046),c=a(42423),u=a(80680),f=n(a(78688)),h=a(82735),p=n(a(43113)),m=a(31517),x=a(85893);const g=[new f.default({id:(0,m.createWid)("19085551011-1630632713@g.us"),desc:"linked_group_3_1",subjectTime:1630632713,participants:[{id:(0,m.createWid)("19085551012-1631040278@g.us"),isAdmin:!0},{id:(0,m.createWid)("19185551012-1631040278@g.us")},{id:(0,m.createWid)("19285551012-1631040278@g.us")}]}),new f.default({id:(0,m.createWid)("19085551012-1631040278@g.us"),desc:"linked_group_3_5",subjectTime:1631040278}),new f.default({id:(0,m.createWid)("19085551014-1630632782@g.us"),desc:"linked_group_3_2",subjectTime:1630632782}),new f.default({id:(0,m.createWid)("19085551015-1630632817@g.us"),desc:"linked_group_3_3",subjectTime:1630632817}),new f.default({id:(0,m.createWid)("19085551029-1630632871@g.us"),desc:"linked_group_3_4",subjectTime:1630632871,participants:[{id:(0,m.createWid)("19085551024@c.us"),isAdmin:!0},{id:(0,m.createWid)("19185551012-1631040278@g.us")},{id:(0,m.createWid)("19285551012-1631040278@g.us")}]})]},82418:(e,t,a)=>{"use strict";var n=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,R.default)()?(0,G.jsx)(U,(0,o.default)({},e)):(0,G.jsx)(F,(0,o.default)({},e))};var s=i(a(48926)),o=i(a(81109)),l=a(66591),r=a(73583),d=i(a(58721)),c=i(a(2119)),u=a(67294),f=i(a(56720)),h=a(21810),p=a(2751),m=i(a(72021)),x=i(a(66799)),g=i(a(75839)),C=n(a(22628)),v=a(71092),_=i(a(31849)),j=i(a(79276)),S=a(88594),E=a(52551),I=i(a(64406)),M=a(49069),T=i(a(43990)),b=a(11273),y=a(48402),w=a(25379),P=a(51183),N=a(30817),k=i(a(43997)),A=i(a(79830)),O=a(64514),D=a(90370),R=i(a(43113)),L=i(a(6232)),G=a(85893);const B={nameSecondary:{minHeight:"g4oj0cdv",marginTop:"sy4xt5vv"},photo:{marginBottom:"njub1g37"}};function F(e){const t=(0,D.useModelValues)(e.chat,["labels"]),a=(0,D.useModelValues)((0,d.default)(e.chat.groupMetadata,"props.chat.groupMetadata"),["creation"]);let n=null;return a.creation&&(n=(0,G.jsx)("div",{"data-a8n":c.default.key("group-created-time"),className:(0,f.default)(B.nameSecondary),children:(0,G.jsx)(P.TextSpan,{theme:"muted",children:h.Clock.createdStr(a.creation,t.isSupportGroup())})})),(0,G.jsxs)(x.default,{theme:"padding-large",children:[(0,G.jsx)(H,{chat:e.chat,xstyle:B.photo}),(0,G.jsx)(K,{chat:e.chat}),n,(0,G.jsx)(_.default,{labels:t.labels})]})}const V={lineHeight:"a4ywakfo",marginTop:"ma4rpf0l"};function U(e){var t,a;const n=(0,D.useModelValues)(e.chat,["labels"]),i=null===(t=e.chat.groupMetadata)||void 0===t?void 0:t.participants,s=(0,A.default)();(0,O.useListener)(i,"add remove reset sort change:isAdmin change:isSuperAdmin",s);const o=null!==(a=null==i?void 0:i.length)&&void 0!==a?a:0,l=j.default.t(2169,{count:o,_plural:o});return(0,G.jsx)(x.default,{theme:"padding-large",children:(0,G.jsxs)(v.FlexColumn,{align:"center",children:[(0,G.jsx)(H,{chat:e.chat,xstyle:B.photo}),(0,G.jsx)(K,{chat:e.chat,newChatInfo:!0}),(0,G.jsx)("div",{className:(0,f.default)(V),children:(0,G.jsx)(b.SelectableSpan,{dir:"auto",selectable:!0,children:(0,G.jsxs)(P.TextSpan,{size:"16",color:"secondary",children:[j.default.t(915)," ",(0,G.jsx)(k.default,{onClick:e.onClickParticpantsCount,children:l})]})})}),undefined,(0,G.jsx)(_.default,{labels:n.labels})]})})}function H(e){const t=(0,D.useModelValues)(e.chat,["isReadOnly"]),a=(0,D.useModelValues)(e.chat.contact,["id","profilePicThumb"]),n=(0,D.useModelValues)(e.chat.contact.profilePicThumb,["imgFull"]),[i,s]=(0,u.useState)(!1),[o,d]=(0,u.useState)(!1),c=(0,L.default)(),h=I.default.GROUP,p=t.isReadOnly||!n.canDelete()&&!n.canSet()||t.isSupportGroup();return(0,G.jsx)("div",{className:(0,f.default)(e.xstyle),children:(0,G.jsx)(E.PhotoPickerLoadable,{type:h,id:a.id,attachToChat:!0,pending:o,startImage:n.imgFull,readOnly:p,onImageSet:(e,t)=>{let a;d(!0),a=e&&t?(0,M.setProfilePic)(n,e,t):(0,M.deleteProfilePic)(n),(0,T.default)(a,c).catch((0,l.catchAbort)((()=>{}))).catch((0,r.filteredCatch)(C.ActionError,(()=>{__LOG__(3)`GroupInfoDrawer: failed to set/delete group image`,s(!i)}))).finally((()=>{d(!1)}))}},String(i))})}const W={marginTop:"hymafltn",marginEnd:"jnwc1y2a",marginBottom:"ngycyvoj",marginStart:"svoq16ka"};function K(e){const t=(0,D.useModelValues)(e.chat.contact,["name"]),a=(0,D.useModelValues)((0,d.default)(e.chat.groupMetadata,"props.chat.groupMetadata"),["creation","restrict","support"]),n=(0,L.default)(),i=function(){var a=(0,s.default)((function*(a){const i=(0,g.default)(a);i!==t.name&&(yield(0,T.default)((0,w.setGroupSubject)(e.chat,i),n).catch((0,l.catchAbort)((()=>{}))).catch((()=>{__LOG__(3)`group_info_drawer:onSetSubject failed`})))}));return function(){return a.apply(this,arguments)}}();return a.support?(0,G.jsx)(P.TextHeader,{className:(0,f.default)(W),level:"2",theme:"large",children:(0,G.jsx)(S.GroupName,{chat:e.chat,groupMetadata:a})}):(0,G.jsx)(z,{subject:t.name,onSave:i,newChatInfo:e.newChatInfo,textInputProps:{editable:a.canSetSubject(),editRestrictionInfo:a.restrict?()=>{p.Cmd.openModal((0,G.jsx)(m.default,{onOK:()=>p.Cmd.closeModal(),okText:j.default.t(2167),children:j.default.t(1378)}))}:void 0}})}const q={container:{textAlign:"qfejxiq4"},editing:{width:"ln8gz9je",textAlign:"ljrqcn24"}};function z(e){const{newChatInfo:t}=e,[a,n]=(0,u.useState)(null),[i,l]=(0,u.useState)(!1),[r,d]=(0,u.useState)(!1),c=function(){var t=(0,s.default)((function*(){if(d(!1),a&&a!==e.subject){l(!0);try{yield e.onSave(a)}finally{l(!1),n(null)}}else n(null)}));return function(){return t.apply(this,arguments)}}(),h=t?[N.TextInputCustomStyleThemes.groupInfoName,N.TextInputCustomStyleThemes.newChatInfoLargeText]:[N.TextInputCustomStyleThemes.groupInfoName];return(0,G.jsx)("div",{className:(0,f.default)(t&&q.container,t&&r&&q.editing),children:(0,G.jsx)(N.TextInput,(0,o.default)({a8n:"group-info-drawer-subject-input",value:null!=a?a:e.subject,pending:i,showRemaining:!0,validate:e=>!(!e||!e.trim()),maxLength:y.ServerProps.maxSubject,onBeginEdit:()=>{d(!0)},onChange:e=>{r&&n(e)},onSave:c,onError:()=>{p.Cmd.openModal((0,G.jsx)(m.default,{onOK:()=>p.Cmd.closeModal(),okText:j.default.t(2167),children:j.default.t(81)}))},onCancel:()=>{d(!1),n(null)},supportsEmoji:!0,lockable:!0,lowProfile:!0,theme:"large",customStyleThemes:h,showEditOnHover:t,showHighlightOnHover:t},e.textInputProps))})}},87538:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const{chat:a,onParticipantPromote:n,onParticipantRemove:v,onDemoteAdmin:_,onVerification:j}=e,S=(0,m.default)(),E=null===(t=a.groupMetadata)||void 0===t?void 0:t.participants;(0,x.useListener)(E,"add remove reset",(()=>{null!=E&&S()}));const[I,M]=(0,s.useState)(null),T=()=>{M(null)},b=e=>{(0,d.findChat)(e).then((e=>{o.Cmd.closeModal(),o.Cmd.openChatFromUnread(e)}))};let y;I&&(y=(0,C.jsx)(h.UIE,{displayName:"ChatContextMenu",escapable:!0,popable:!0,requestDismiss:T,children:(0,C.jsx)(p.default,{contextMenu:I})}));return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(l.default,{title:f.default.t(1603),filter:e=>{const t=a.groupMetadata;return!(null==t||!t.participants.get(e.id.toString()))},onCancel:()=>{o.Cmd.closeModal()},openContextOnClick:!0,contextEnabled:()=>!1,contextMenu:e=>!g.default.equals((0,c.getMaybeMeUser)(),e),onContext:(e,t)=>{const s=(0,i.default)(a.groupMetadata,"chat.groupMetadata").participants,l=s.assertGet(t.id.toString()),d=[];if(s.canPromote(l)){const e=n.bind(null,l,!1);d.push((0,C.jsx)(r.DropdownItem,{a8n:"mi-grp-promote-admin",action:e,children:f.default.t(1209)},"promote"))}if(s.canRemove(l)){const e=v.bind(null,l,!1);d.push((0,C.jsx)(r.DropdownItem,{a8n:"mi-grp-remove-participant",action:e,children:f.default.t(1215)},"remove"))}u.GK.supportsFeature(u.GK.F.GROUPS_V_3)&&s.canDemote(l)&&d.push((0,C.jsx)(r.DropdownItem,{a8n:"mi-grp-verify-identify",action:()=>_(l),children:f.default.t(734)},"demote-admin")),u.GK.supportsFeature(u.GK.F.MD_BACKEND)&&s.canVerifyIdentity(l)&&d.push((0,C.jsx)(r.DropdownItem,{a8n:"mi-grp-verify-identify",action:()=>{o.Cmd.closeModal(),null==j||j(l.contact)},children:f.default.t(2303)},"verify-identity")),g.default.equals((0,c.getMaybeMeUser)(),l.id)||d.push((0,C.jsx)(r.DropdownItem,{action:b.bind(null,l.contact.id),children:f.default.t(1226,{author:l.contact.formattedName})},"message author")),M({contactId:t.id,menu:d,anchor:e.anchor,event:e.anchor?void 0:e})},showNotifyName:!0,listenForAdminChange:!0,participantCollection:(0,i.default)(e.chat.groupMetadata,"props.chat.groupMetadata").participants}),y]})};var i=n(a(58721)),s=a(67294),o=a(2751),l=n(a(48722)),r=a(63810),d=a(42423),c=a(26205),u=a(37268),f=n(a(79276)),h=a(17714),p=n(a(23332)),m=n(a(79830)),x=a(64514),g=n(a(69678)),C=a(85893)},9707:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onClick:t}=e;if("new-chat-info"===e.theme){const e=(0,c.jsx)(d.TextSpan,{theme:"title",children:l.default.t(1723)}),a=(0,c.jsx)(d.TextDiv,{theme:"muted",children:l.default.t(1722)});return(0,c.jsx)(s.default,{icon:"lock",onClick:t,title:e,secondaryTitle:a})}return(0,c.jsxs)(o.default,{onClick:t,side:(0,c.jsx)(r.default,{name:"lock",className:(0,i.default)(f)}),multiline:!0,children:[(0,c.jsx)("div",{className:(0,i.default)(u),children:(0,c.jsx)(d.TextSpan,{theme:"title",children:l.default.t(1723)})}),(0,c.jsx)(d.TextDiv,{theme:"muted",children:l.default.t(1722)})]})};var i=n(a(56720)),s=n(a(24033)),o=n(a(9598)),l=n(a(79276)),r=n(a(15817)),d=a(51183),c=a(85893);const u={marginBottom:"brac1wpa"},f={color:"jq3rn4u7"}},43113:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const[e,t]=(0,n.useState)((0,i.getNewChatInfo)());return(0,s.useListener)(i.UserPrefsEvent,i.UserPrefsEvent.NEW_CHAT_INFO_CHANGE,(e=>{t(e)})),e};var n=a(67294),i=a(26205),s=a(64514)},21336:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{isVoiceCallEnabled:!1,isVideoCallEnabled:!1,canStartVoiceCall:!1,canStartVideoCall:!1,startVoiceCall:()=>{},startVideoCall:()=>{}}};a(67294),a(13798),a(64514)},63308:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(l.GK.supportsFeature(l.GK.F.MD_BACKEND)){var t;const{onClick:n,text:l}=e,f=(0,u.jsx)(d.default,{name:"lock",className:o.default.icon});if("new-chat-info"===e.theme){var a;const t=(0,u.jsx)(c.TextSpan,{theme:"title",children:null!==(a=e.title)&&void 0!==a?a:r.default.t(2020)}),s=(0,u.jsx)(c.TextDiv,{theme:"muted",children:l});return(0,u.jsx)(i.default,{onClick:n,icon:"lock",title:t,secondaryTitle:s})}return(0,u.jsxs)(s.default,{onClick:n,side:f,multiline:!0,children:[(0,u.jsx)("div",{className:o.default.header,children:(0,u.jsx)(c.TextSpan,{theme:"title",children:null!==(t=e.title)&&void 0!==t?t:r.default.t(2020)})}),(0,u.jsx)(c.TextDiv,{theme:"muted",children:l})]})}return null};var i=n(a(24033)),s=n(a(9598)),o=n(a(13474)),l=a(37268),r=n(a(79276)),d=n(a(15817)),c=a(51183),u=a(85893)},10676:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(29521)),s=a(67294),o=a(2751),l=n(a(11547)),r=n(a(39178)),d=n(a(9598)),c=n(a(72543)),u=a(27001),f=n(a(66799)),h=a(26205),p=n(a(33019)),m=n(a(55666)),x=n(a(30268)),g=n(a(79276)),C=a(10913),v=a(38428),_=a(27251),j=a(31347),S=a(74807),E=a(48402),I=n(a(23080)),M=a(51183),T=n(a(69678)),b=a(85893);const y=({isRestricted:e,onClick:t})=>(0,b.jsxs)(d.default,{onClick:t,multiline:!0,children:[(0,b.jsx)("div",{className:p.default.header,children:(0,b.jsx)(M.TextSpan,{theme:"title",children:g.default.t(970)})}),(0,b.jsx)(M.TextDiv,{theme:"muted",children:e?g.default.t(977):g.default.t(969)})]}),w=({isAnnouncement:e,onClick:t})=>(0,b.jsxs)(d.default,{onClick:t,multiline:!0,children:[(0,b.jsx)("div",{className:p.default.header,children:(0,b.jsx)(M.TextSpan,{theme:"title",children:g.default.t(978)})}),(0,b.jsx)(M.TextDiv,{theme:"muted",children:e?g.default.t(977):g.default.t(969)})]}),P=({isNoFrequentlyForwarded:e,onClick:t})=>{const a=E.ServerProps.hfmStringChanges?g.default.t(974):g.default.t(973);return(0,b.jsxs)(d.default,{onClick:t,multiline:!0,children:[(0,b.jsx)("div",{className:p.default.header,children:(0,b.jsx)(M.TextSpan,{theme:"title",children:a})}),(0,b.jsx)(M.TextDiv,{theme:"muted",children:e?g.default.t(975):g.default.t(972)})]})};class N extends s.Component{constructor(...e){super(...e),this._openSettingModal=e=>{const{chat:t,groupMetadata:a}=this.props;o.Cmd.openModal((0,b.jsx)(m.default,{settingType:e,chat:t,groupMetadata:a}),{transition:"modal",uim:this.props.uim})},this._openAnnouncementSettingModal=()=>{this._openSettingModal(l.default.GROUP_SETTING_TYPE.ANNOUNCEMENT)},this._openRestrictedSettingModal=()=>{this._openSettingModal(l.default.GROUP_SETTING_TYPE.RESTRICT)},this._openNoFrequentlyForwardedSettingModal=()=>{this._openSettingModal(l.default.GROUP_SETTING_TYPE.NO_FREQUENTLY_FORWARDED)},this._getCurrentAdmins=()=>{const{groupMetadata:e}=this.props;return e.participants.filter((e=>e.isAdmin)).map((e=>e.contact))},this._filterParticipants=e=>{const{groupMetadata:t}=this.props;return!!t.participants.get(e.id)},this.isDisabled=e=>{const{groupMetadata:t}=this.props;return T.default.equals(e,t.owner)||(0,h.getMaybeMeUser)().equals(e)},this._openManageAdminModal=()=>{o.Cmd.openModal((0,b.jsx)(j.SelectModal,{onConfirm:this._updateAdmins,getInitialItems:this._getCurrentAdmins,isDisabled:this.isDisabled,isSelected:this.isDisabled,filter:this._filterParticipants,title:g.default.t(1153),useShortName:!0,useAllContacts:!0,listType:j.ListType.PARTICIPANT_MANAGE_MODAL,singleSelectionFooterType:S.FooterType.CONFIRM,multipleSelectionFooterType:S.FooterType.CONFIRM,shouldShowSelectionSummary:!1}))},this._updateAdmins=e=>{const{chat:t,groupMetadata:a}=this.props,n=a.participants,s=n.filter((e=>e.isAdmin)),l=(0,i.default)(e,s,((e,t)=>e.id.equals(t.id))).map((e=>n.assertGet(e.id))),r=(0,i.default)(s,e,((e,t)=>e.id.equals(t.id)));l.length>0&&(l.forEach((e=>{e.contact.pendingAction++})),(0,_.promoteParticipants)(t,l).finally((()=>{l.forEach((e=>{e.contact.pendingAction--}))}))),r.length>0&&(r.forEach((e=>{e.contact.pendingAction++})),(0,_.demoteParticipants)(t,r).finally((()=>{r.forEach((e=>{e.contact.pendingAction--}))}))),o.Cmd.closeModal()}}render(){const{groupMetadata:e}=this.props;return(0,b.jsxs)(r.default,{theme:"striped",children:[(0,b.jsx)(u.DrawerHeader,{title:g.default.t(979),type:u.DRAWER_HEADER_TYPE.SMALL,onBack:this.props.onClose}),(0,b.jsxs)(c.default,{children:[(0,b.jsx)(f.default,{animation:!1,children:(0,b.jsx)(y,{onClick:this._openRestrictedSettingModal,isRestricted:e.restrict})}),(0,b.jsx)("div",{className:p.default.restrictText,children:(0,b.jsx)(M.TextSpan,{theme:"muted",children:g.default.t(755)})}),(0,b.jsxs)(f.default,{animation:!1,children:[(0,b.jsx)(w,{onClick:this._openAnnouncementSettingModal,isAnnouncement:e.announce}),(0,C.isAdminHfmToggleEnabled)()?(0,b.jsx)(P,{onClick:this._openNoFrequentlyForwardedSettingModal,isNoFrequentlyForwarded:e.noFrequentlyForwarded}):null]}),(0,b.jsx)(f.default,{animation:!1,children:(0,b.jsx)(d.default,{onClick:this._openManageAdminModal,multiline:!0,children:(0,b.jsx)("div",{className:p.default.header,children:(0,b.jsx)(M.TextSpan,{theme:"title",children:g.default.t(1153)})})})})]})]})}}N.CONCERNS={chat:["id"],groupMetadata:["restrict","announce","noFrequentlyForwarded","participants","owner"]},N.displayName="GroupAdminSetting";var k=(0,x.default)((0,v.ListenerHOC)((0,I.default)(N,N.CONCERNS)));t.default=k},55666:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{settingType:t}=e,a=(0,h.useModelValues)(e.chat,["id"]),n=(0,h.useModelValues)(e.groupMetadata,["restrict","announce","noFrequentlyForwarded"]),m=(0,i.useMemo)((()=>{switch(t){case s.default.GROUP_SETTING_TYPE.ANNOUNCEMENT:case s.default.GROUP_SETTING_TYPE.RESTRICT:return[{label:r.default.t(969),value:0},{label:r.default.t(977),value:1}];case s.default.GROUP_SETTING_TYPE.NO_FREQUENTLY_FORWARDED:return[{label:r.default.t(972),value:0},{label:r.default.t(975),value:1}];default:return[]}}),[t]),x=(0,i.useMemo)((()=>{const{restrict:e,announce:a,noFrequentlyForwarded:i}=n;switch(t){case s.default.GROUP_SETTING_TYPE.ANNOUNCEMENT:return a?1:0;case s.default.GROUP_SETTING_TYPE.RESTRICT:return e?1:0;case s.default.GROUP_SETTING_TYPE.NO_FREQUENTLY_FORWARDED:return i?1:0;default:return 0}}),[t,n]),g=(0,i.useMemo)((()=>{switch(t){case s.default.GROUP_SETTING_TYPE.ANNOUNCEMENT:return r.default.t(978);case s.default.GROUP_SETTING_TYPE.RESTRICT:return r.default.t(970);case s.default.GROUP_SETTING_TYPE.NO_FREQUENTLY_FORWARDED:return c.ServerProps.hfmStringChanges?r.default.t(974):r.default.t(973);default:return""}}),[t]),C=(0,i.useMemo)((()=>t===s.default.GROUP_SETTING_TYPE.RESTRICT?r.default.t(755):t===s.default.GROUP_SETTING_TYPE.NO_FREQUENTLY_FORWARDED&&(0,d.isAdminHfmToggleEnabled)()?(0,p.jsxs)(p.Fragment,{children:[r.default.t(976)," ",(0,p.jsx)(o.ExternalLink,{href:(0,l.getFrequentlyForwardedFaqUrl)(),children:r.default.t(1090)})]}):null),[t]);return(0,p.jsx)(f.default,{options:m,initialValue:x,title:g,onSelect:e=>{e!==x&&(0,u.setGroupProperty)(a,t,e).catch((()=>()=>{}))},explanation:C})};var i=a(67294),s=n(a(11547)),o=a(90701),l=a(9730),r=n(a(79276)),d=a(10913),c=a(48402),u=a(87706),f=n(a(33695)),h=a(90370),p=a(85893)},16630:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(67294),s=n(a(66799)),o=n(a(79276)),l=a(38428),r=a(28920),d=a(18005),c=n(a(48928)),u=n(a(23080)),f=a(83040),h=n(a(15817)),p=a(51183),m=a(85893);class x extends i.Component{constructor(e){super(e),this._updateParticipants=()=>{this.setState({participants:this.getParticipants(this.props.chat)})},this.state={participants:this.getParticipants(e.chat)}}componentDidMount(){const{chat:e}=this.props;e.liveLocationQueried||r.LiveLocationCollection.getActive(e.id.toString()).then((()=>{e.liveLocationQueried=!0})).catch((()=>{})),this.props.listeners.add((0,f.unproxy)(e),"change:liveLocation",(()=>{const{liveLocation:t}=e;t&&(this._removeParticipantListener(t),this._addParticipantListener(t),this._updateParticipants())}));const{liveLocation:t}=e;t&&this._addParticipantListener(t)}_addParticipantListener(e){this.props.listeners.add(e.participants,"add remove",this._updateParticipants)}_removeParticipantListener(e){this.props.listeners.remove(e.participants,"add remove",this._updateParticipants)}getParticipants(e){const{liveLocation:t}=e;return t?t.participants.toArray():[]}getText(){const{chat:e}=this.props,{participants:t}=this.state;let a,n,i=0;if(t.forEach((e=>{e.isMe?a=!0:(n||(n=e.contact),i++)})),e.isGroup)return a?1===t.length?o.default.t(1121):o.default.t(1120,{count:i,_plural:i}):o.default.t(1117,{count:i,_plural:i});if(a){if(1===t.length)return o.default.t(1121);if(n)return o.default.t(1119,{name:n.formattedShortNameWithNonBreakingSpaces})}else if(n)return o.default.t(1116,{name:n.formattedShortNameWithNonBreakingSpaces});return""}render(){const{onClick:e}=this.props;if(!this.state.participants.length)return null;const t=(0,m.jsx)(h.default,{name:(0,d.liveLocationIcon)(!0)});return(0,m.jsx)(s.default,{a8nText:"section-live-location",theme:"padding",title:o.default.t(1124),titleOnClick:e,children:(0,m.jsx)(c.default,{side:t,onClick:e,children:(0,m.jsx)(p.TextSpan,{theme:"title",children:this.getText()})})})}}x.CONCERNS={chat:["id","isGroup","liveLocation","liveLocationQueried"]},x.displayName="LiveLocationRow";var g=(0,l.ListenerHOC)((0,u.default)(x,x.CONCERNS));t.default=g},34052:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.MediaGalleryDrawer=M,t.TABS=void 0;var i=n(a(52628)),s=n(a(94184)),o=a(67294),l=a(89911),r=n(a(70001)),d=n(a(39178)),c=n(a(72543)),u=a(27001),f=n(a(79276)),h=n(a(90799)),p=n(a(56028)),m=n(a(27356)),x=n(a(97078)),g=n(a(65201)),C=n(a(62026)),v=a(48402),_=a(17714),j=n(a(28905)),S=n(a(58727)),E=a(85893);const I={MEDIA:"media",DOCS:"docs",LINKS:"links",PRODUCTS:"products"};function M(e){const{chat:t,onProductDetail:a,setProductsScrollOffset:n,productsScrollOffset:M}=e,[T,b]=(0,o.useState)(e.initialTab),[y,w]=(0,o.useState)(null),[P,N]=(0,o.useState)(!1),k=(0,j.default)((()=>new g.default([],(e=>e.id.toString())))),A=()=>{P&&(k.current.unsetAll(),N(!1))},O=(e,t)=>{P||N(!0),k.current.setVal(e,t),0===k.current.getSelected().length&&A()},D=(0,o.useCallback)((e=>{const t=(0,i.default)(I).indexOf(T),a=(0,i.default)(I).indexOf(e);t!==a&&k.current.unsetAll(),b(e),w(a>t?"right":"left"),N(!1)}),[k,T]),R=(0,o.useMemo)((()=>{const e=[{tab:I.MEDIA,title:f.default.t(1172)},{tab:I.DOCS,title:f.default.t(735)},{tab:I.LINKS,title:f.default.t(1094)}];v.ServerProps.productMediaAttachments&&e.push({tab:I.PRODUCTS,title:f.default.t(1520)});const t=e.map((e=>{const t=(0,s.default)(m.default.menuItem,{[m.default.active]:T===e.tab});return(0,E.jsx)("button",{className:t,onClick:()=>D(e.tab),title:e.title,children:e.title},e.tab)})),a=(0,s.default)(m.default.menuTabsLists,v.ServerProps.productMediaAttachments?m.default.fourTabs:m.default.threeTabs);return(0,E.jsx)("div",{className:a,"data-active-tab":T,children:t})}),[T,D]),L=(()=>{let e;switch(T){case I.MEDIA:e=(0,E.jsx)(p.default,{chat:t,mediaMsgs:t.getMediaMsgs(),selectable:P,onMessageSelect:O,selectedMessages:k.current,fullCollection:!0});break;case I.LINKS:e=(0,E.jsx)(h.default,{chat:t,linkMsgs:t.getLinkMsgs(),selectable:P,onMessageSelect:O,selectedMessages:k.current});break;case I.DOCS:e=(0,E.jsx)(r.default,{chat:t,docMsgs:t.getDocMsgs(),selectable:P,onMessageSelect:O,selectedMessages:k.current});break;case I.PRODUCTS:e=(0,E.jsx)(C.default,{chat:t,productMsgs:t.getProductMsgs(),selectable:P,onMessageSelect:O,selectedMessages:k.current,onProductDetail:a,setScrollOffset:n,scrollOffset:M})}return e})(),G=[I.MEDIA,I.DOCS].includes(T),B=P?(0,E.jsx)(_.UIE,{displayName:"MediaMultiSelect",escapable:!0,requestDismiss:A,children:(0,E.jsx)(x.default,{chat:t,noSortOnForward:!0,theme:"mediaGallery",toastPosition:l.ToastPosition.RIGHT,downloadButton:G,selectedMessages:k.current,onCancel:A})}):null,F="right"===y?"slide-forward":"slide-back";return(0,E.jsxs)(d.default,{theme:"gallery",children:[(0,E.jsx)(u.DrawerHeader,{title:" ",onBack:e.onBack,type:u.DRAWER_HEADER_TYPE.MULTI_MEDIA_GALLERY}),B,R,(0,E.jsx)(c.default,{"data-list-scroll-container":!0,children:(0,E.jsx)(S.default,{transitionName:F,className:m.default.column,children:(0,E.jsx)("div",{className:m.default.multimediaGallery,children:(0,E.jsx)("div",{className:m.default.column,children:L})},T)})})]})}t.TABS=I,M.defaultProps={initialTab:I.MEDIA,productsScrollOffset:0}},31218:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,d.useModelValues)(e.mediaData,["mediaStage","renderableUrl"]);return(0,c.jsx)(r.default,{mediaData:t,placeholderRenderer:h,children:t=>(0,c.jsx)(f,{url:t,msg:e.msg})})};var i=n(a(94184)),s=n(a(62346)),o=n(a(79276)),l=n(a(8752)),r=n(a(9435)),d=a(90370),c=a(85893);const u=e=>{e.stopPropagation()};function f({url:e,msg:t}){return(0,c.jsx)(s.default,{url:e,className:l.default.mediaViewerAudio,onClick:u,autoPlay:!0,msg:t,controls:!0,children:o.default.t(188)})}function h(){return(0,c.jsx)("div",{className:(0,i.default)(l.default.imageAudio,l.default.mediaViewerPlaceholder),onClick:u})}},83985:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onHightlightCloseEnd:t,msgIndexInAlbum:a,onViewOnceInfoClick:n,onGoToMsgClick:M,onDownloadClick:T,onReplyClick:b,onDeleteClick:y,onUnstarClick:w,onStarClick:P,openForwardFlow:N,onMsgInfoClick:k}=e,A=(0,s.useRef)(null),O=(0,S.useModelValues)(e.msg,["star","isGroupMsg","chat","type","isGif","isViewOnce","sender","senderObj","t","isSentByMe","isStickerMsg"]),D=(0,S.useModelValues)(e.mediaData,["filehash","mediaStage","renderableUrl"]);(0,j.useListener)(A.current,"animationend",(()=>{t()}));let R=O.displayName(!0,!0);O.isGroupMsg&&(R+=" @ "+O.chat.title());const L=()=>O.chat.isGroup?h.default.t(1555):h.default.t(1554,{contactInfo:O.senderObj.displayName}),G=e=>{const{chat:t}=O;t&&(e?t.isGroup?(0,C.sendSpamExitClear)(t,v.SpamFlow.MediaViewer):(0,C.sendSpamBlockClear)(t,v.SpamFlow.MediaViewer):(0,C.sendSpamReport)(t,v.SpamFlow.MediaViewer)),r.Cmd.closeModal()},B=()=>{r.Cmd.openModal((0,I.jsx)(E.default,{isBusiness:O.senderObj.isBusiness,isGroup:O.chat.isGroup,onReport:G,onCancel:()=>r.Cmd.closeModal(),title:L()}))},F=()=>{(0,g.default)(O)},V=()=>!O.isViewOnce&&(!!D.renderableUrl||D.mediaStage===m.MEDIA_DATA_STAGE.RESOLVED),U=()=>{const e=[];return(O.canPrivateReply()||O.canPrivateReplyInRestrictedGrp())&&e.push((0,I.jsx)(u.DropdownItem,{a8n:"mi-msg-reply",action:F,children:h.default.t(1465)},"private_reply")),O.isViewOnce?e.push((0,I.jsx)(u.DropdownItem,{action:B,children:L()},"dropdownMsgInfo")):(O.isSentByMe&&e.push((0,I.jsx)(u.DropdownItem,{action:k,children:h.default.t(1230)},"dropdownMsgInfo")),e.push((0,I.jsx)(u.DropdownItem,{action:M,children:h.default.t(911)},"dropdownGoToMsg"),(0,I.jsx)(u.DropdownItem,{action:T,disabled:!V(),children:h.default.t(1968)},"dropdownDownload"))),(0,I.jsx)(x.MenuBarItem,{icon:(0,I.jsx)(_.default,{name:"menu"}),title:h.default.t(1222),children:(0,I.jsx)(c.Dropdown,{type:"dropdown_menu",flipOnRTL:!0,dirX:c.DirX.LEFT,children:e},"MediaPanelHeaderDropdown")},"btnMenu")},H=()=>{let e,t,a;return O.star?(e=w,t="unstar-btn",a=h.default.t(1777)):(e=P,t="star-btn",a=h.default.t(1676)),(0,I.jsx)(x.MenuBarItem,{icon:(0,I.jsx)(_.default,{name:t}),title:a,onClick:e},t)},W=()=>(0,I.jsx)(x.MenuBarItem,{icon:(0,I.jsx)(_.default,{name:"forward"}),title:h.default.t(865),onClick:N},"btnForward");return(0,I.jsxs)("div",{className:p.default.mediaPanelHeader,children:[(0,I.jsx)("div",{className:p.default.info,children:(0,I.jsx)(o.default,{idle:!0,image:(0,I.jsx)(d.DetailImage,{id:O.sender,size:40}),primary:(0,I.jsx)(f.EmojiText,{ellipsify:!0,text:R}),secondary:l.Clock.relativeDateAndTimeStr(O.t),theme:"media"})}),(0,I.jsx)("div",{className:p.default.mediaPanelTools,children:(0,I.jsxs)(x.MenuBar,{theme:"strong",children:[O.isViewOnce?[(0,I.jsx)(x.MenuBarItem,{icon:(0,I.jsx)(_.default,{name:"view-once",className:p.default.voIcon}),title:i.default._("View once info",null,{hk:"47XkZ4"}),onClick:n},"btnViewOnceInfo"),U()]:a>=0?[O.canReply()?(0,I.jsx)(x.MenuBarItem,{icon:(0,I.jsx)(_.default,{name:"reply"}),title:h.default.t(1545),onClick:b},"btnReply"):null,O.canStar()?H():null,(0,I.jsx)(x.MenuBarItem,{icon:(0,I.jsx)(_.default,{name:"delete"}),title:h.default.t(2016),onClick:y},"btnDelete"),O.canForward()?W():null,U()].filter(Boolean):(()=>{const e=[];return O.isStickerMsg||e.push((0,I.jsx)(x.MenuBarItem,{icon:(0,I.jsx)(_.default,{name:"bubble"}),title:h.default.t(911),onClick:M},"btnGoToMsg")),O.isStickerMsg&&e.push((0,I.jsx)(x.MenuBarItem,{icon:(0,I.jsx)(_.default,{name:"reply"}),title:h.default.t(1545),onClick:b},"btnReplyToMsg")),O.canStar()&&e.push(H()),O.isStickerMsg&&e.push((0,I.jsx)(x.MenuBarItem,{icon:(0,I.jsx)(_.default,{name:"delete"}),title:h.default.t(2016),onClick:y},"btnDelete")),O.canForward()&&e.push(W()),O.isStickerMsg||e.push((0,I.jsx)(x.MenuBarItem,{icon:(0,I.jsx)(_.default,{name:"download"}),title:h.default.t(1968),disabled:!V(),onClick:T},"btnDownload")),e.filter(Boolean)})(),(0,I.jsx)(x.MenuBarItem,{a8nText:"btn-close",icon:(0,I.jsx)(_.default,{className:e.isHighlightClose?p.default.highlightClose:null,containerRef:A,name:"x-viewer"}),title:h.default.t(1985),onClick:e.onClose})]},"media-panel-header")})]})};var i=n(a(48360)),s=a(67294),o=n(a(57469)),l=a(21810),r=a(2751),d=a(49046),c=a(45875),u=a(63810),f=a(86757),h=n(a(79276)),p=n(a(42784)),m=a(56341),x=a(40370),g=n(a(837)),C=a(49091),v=a(1797),_=n(a(15817)),j=a(64514),S=a(90370),E=n(a(72796)),I=a(85893)},63471:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(67294),s=n(a(56720)),o=n(a(87633)),l=a(71092),r=n(a(94472)),d=n(a(9435)),c=n(a(33935)),u=n(a(81194)),f=n(a(4040)),h=n(a(1197)),p=a(41234),m=n(a(92135)),x=a(90370),g=a(85893);const C={container:{width:"ln8gz9je",height:"ppled2lx"},stickerContainer:{maxWidth:"mx6rw3sv",maxHeight:"trnfqnf9",marginBottom:"r2u2pyhj",zIndex:"thghmljt"}},v=(e,t)=>{const{msg:a}=e,n=(0,x.useModelValues)(e.mediaData,["mediaStage","fullWidth","fullHeight","isFirstParty","stickerPackId","stickerPackName","stickerPackPublisher"]),v=(0,i.useRef)(),_=(0,m.default)(t,v),j=e=>{var t;null===(t=v.current)||void 0===t||t.onClick(e)},S=n.isFirstParty?(0,g.jsx)(o.default,{stickerPackId:n.stickerPackId,onStickerPackView:e.onStickerPackView,stickerPackViewDelay:e.stickerPackViewDelay}):(0,g.jsx)(p.StickerDetailsStickerPackInfo,{name:n.stickerPackName,publisher:n.stickerPackPublisher,theme:p.Theme.MediaViewer});return(0,g.jsxs)(l.FlexColumn,{align:"center",justify:"center",xstyle:C.container,children:[(0,g.jsx)("div",{className:(0,s.default)(C.container,C.stickerContainer),children:(0,g.jsx)(u.default,{ref:_,width:n.fullWidth,height:n.fullHeight,onZoomIn:e.onImgZoomIn,onLoad:e.onLoad,msg:a,children:(0,g.jsx)(d.default,{mediaData:n,placeholderRenderer:()=>(0,g.jsx)(h.default,{size:376}),downloadMedia:()=>null==a?void 0:a.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:f.default.WEBC_RMR_REASON_CODE.MEDIA_VIEWER,isUserInitiated:!1}),children:e=>(0,g.jsx)(r.default,{className:(0,s.default)(c.default.content),onClick:j,src:e})})})}),S]})};var _=(0,i.forwardRef)(v);t.default=_},29351:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(25932),s=a(67294),o=n(a(56720)),l=n(a(52262)),r=n(a(11332)),d=a(72813),c=a(85409),u=n(a(79276)),f=a(56341),h=n(a(33935)),p=n(a(4040)),m=a(16565),x=n(a(61657)),g=n(a(86027)),C=a(95706),v=a(98592),_=n(a(23080)),j=n(a(58309)),S=a(85893);class E extends s.PureComponent{constructor(...e){super(...e),this.state={played:!1,size:{width:0,height:0},isFullscreenMode:!1,displayReactionBubble:!0},this._setRefContainer=e=>{this.refContainer=e},this.stopPropagation=e=>{e.stopPropagation()},this._handleFullscreenToggle=e=>{this.setState({isFullscreenMode:e})}}static getDerivedStateFromProps(e){const{mediaData:t}=e;return(t.mediaStage===f.MEDIA_DATA_STAGE.RESOLVED||t.streamable&&t.isStreamable())&&(0,i.isNonZeroNumber)(t.fullWidth)&&(0,i.isNonZeroNumber)(t.fullHeight)?{size:E.getSize(t)}:null}static getSize(e){if(e.isGif){const t=330;return e.fullWidth>=t?{width:e.fullWidth,height:e.fullHeight}:{width:t,height:e.fullHeight*t/e.fullWidth}}return e.fullWidth>=c.MIN_WIDTH?{width:e.fullWidth,height:e.fullHeight}:{width:c.MIN_WIDTH,height:e.fullHeight}}componentDidMount(){this.props.mediaData.isStreamable()||this.props.msg.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:p.default.WEBC_RMR_REASON_CODE.MEDIA_VIEWER,isUserInitiated:!0})}componentWillUnmount(){this.props.msg.mediaObject&&this.props.msg.cancelDownload()}closingMedia(){this.setState({displayReactionBubble:!1})}render(){var e;const{msg:t,mediaData:a}=this.props,n=a.isGif;let i=a.mediaStage===f.MEDIA_DATA_STAGE.RESOLVED||a.streamable&&a.isStreamable();i=i||t.isForcingRMR();let s=null;const c=C.ReactionBubbleType.MEDIA_ITEM;if(t&&(0,v.shouldShowReactionBubble)(t,c)&&(s=(0,S.jsx)(g.default,{msgIds:[t.id.toString()],reactionBubbleType:c,reactionBubbleVisible:this.state.displayReactionBubble})),i){const e=u.default.t(1832);let i,r;return!this.state.isFullscreenMode&&(null==t?void 0:t.interactiveAnnotations)&&t.interactiveAnnotations.length>0&&(i=(0,S.jsx)(l.default,{annotations:t.interactiveAnnotations})),r=n?(0,S.jsxs)("div",{className:(0,o.default)(h.default.content),ref:this._setRefContainer,children:[(0,S.jsx)(j.default,{src:a.renderableUrl,onClick:this.stopPropagation,autoPlay:!0,loop:!0,children:e}),i]}):(0,S.jsx)("div",{ref:this._setRefContainer,className:(0,o.default)(h.default.content),onClick:this.stopPropagation,children:(0,S.jsx)(m.WrappedMsgVideoPlayer,{msg:t,mediaData:a,startTime:this.props.startTime,onClose:this.props.onClose,onError:()=>{},onFullscreenToggle:this._handleFullscreenToggle,autoPlay:this.props.autoPlay,type:d.PLAYER_TYPE.MEDIA_VIEWER,overlays:i,noPip:t.isViewOnce})}),(0,S.jsxs)(x.default,{type:"scaleDown",position:"relative",objectPosition:"relative",size:this.state.size,onObjectLoad:this.props.onLoad,children:[r,s]})}return(0,S.jsxs)(x.default,{type:"scaleDown",position:"relative",objectPosition:"relative",size:{width:this.props.mediaData.fullWidth,height:this.props.mediaData.fullHeight},children:[(0,S.jsx)(r.default,{altText:null!==(e=t.caption)&&void 0!==e?e:"",mediaData:a}),s]})}}E.CONCERNS={mediaData:["mediaStage","fullWidth","fullHeight","isGif","isViewOnce","preview","renderableUrl","streamable"]},E.defaultProps={startTime:0},E.displayName="MediaVideo";const I=(0,_.default)(E,E.CONCERNS);t.default=class extends I{getContainerElement(){return this.getComponent().refContainer}closingMedia(){this.getComponent().closingMedia()}}},78281:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a,n,X;const{onImageLoad:$,isAnimatingIn:Z,onImgZoomIn:Q,onExitAnimation:J,onBack:ee}=e,te=(0,V.useModelValues)(e.msg,["id","star","isUnsentMedia","isViewOnce","isStickerMsg","chat","caption","interactiveAnnotations","type"]),ae=(0,V.useModelValues)(e.mediaData,["mediaStage","type","isGif"]),ne=(0,U.default)(Z),ie=(0,o.useRef)(null),se=(0,o.useRef)(null),oe=(0,o.useRef)(null),le=(0,o.useRef)(null),re=(0,o.useRef)(),de=(0,o.useRef)(!1),ce=(0,o.useRef)(!1),ue=(0,o.useRef)(!1),fe=(0,F.default)((()=>te.isViewOnce&&(0,C.shouldShowNUX)(u.default.NUX.EPHEMERAL_VIEW_ONCE_RECEIVER))),[he]=(0,o.useState)((()=>ae.mediaStage===P.MEDIA_DATA_STAGE.RESOLVED&&e.isAnimatingIn&&e.getZoomNode?e.getZoomNode(te.id):null)),[pe,me]=(0,o.useState)(!1),[xe,ge]=(0,o.useState)(!1),[Ce,ve]=(0,o.useState)(!e.isAnimatingIn),[_e,je]=(0,o.useState)(!1),[Se,Ee]=(0,o.useState)(!1),Ie=()=>{const e=(0,K.jsx)(A.default,{isPhoto:ae.type===M.default.TYPE.IMAGE,onOkClick:()=>{r.Cmd.closeModal()}});r.Cmd.openModal(e)},Me=(0,H.default)(((e,t)=>{if(xe)return;const a=ie.current;if(!a)return;const n=a.getInsideContainer();if(!(n&&n instanceof HTMLElement))return;const i=a.getOutsideContainer();if(!(i&&i instanceof HTMLElement))return;const{translateX:s,translateY:o}=a.getTranslatePosition(i,e,t);(0,W.default)(n,"stop"),(0,W.default)(n,{translateX:s,translateY:o,scale:u.default.MEDIA_VIEWER.ZOOM_IN_FACTOR},{duration:0})}));(0,o.useEffect)((()=>(__LOG__(2)`MediaViewerModal: Opened`,te.isViewOnce&&(0,E.canMarkPlayed)(te)&&(0,E.markPlayed)(te),fe.current&&Ie(),x.default.focus(le.current),()=>{__LOG__(2)`MediaViewerModal: Closed`,Me.cancel()})),[]);const Te=e=>{$&&$();const t=he;t&&e&&Z&&e instanceof HTMLElement&&(ue.current||(ue.current=!0,((e,t)=>{var a;const n=t.getBoundingClientRect(),i=e.getBoundingClientRect();let s=i.top-n.top,o=i.left-n.left;const l=e.clientWidth/t.clientWidth;s-=(t.clientHeight-e.clientHeight)/2,o-=(t.clientWidth-e.clientWidth)/2,(0,W.default)(t,{opacity:[1,0],translateX:[0,o],translateY:[0,s],scale:[1,l]},{duration:u.default.MEDIA_VIEWER.ANIMATION_DURATION,easing:[.1,.82,.25,1]});const r=null===(a=oe.current)||void 0===a?void 0:a.getContainerElement();r&&(0,W.default)(r,{opacity:[1,0]},{duration:u.default.MEDIA_VIEWER.ANIMATION_DURATION})})(t,e)))},be=()=>{if(de.current)return;de.current=!0,(0,L.isFunction)(J)&&J();const t=e.getZoomNode&&e.getZoomNode(te.id);if(!t)return ee();let a;const n=ae.type;var i;if([M.default.TYPE.IMAGE,M.default.TYPE.STICKER].includes(n)&&ie.current)a=ie.current.getInsideContainer(),null===(i=ie.current)||void 0===i||i.closingMediaZoomable();else if(ae.isGif&&se.current){var s;a=se.current.getContainerElement(),null===(s=se.current)||void 0===s||s.closingMedia()}if(!a)return ee();{var o;const e=a,n=a.getBoundingClientRect(),i=t.getBoundingClientRect();let s=i.top-n.top,l=i.left-n.left;const r=t.clientWidth/e.clientWidth,d=(e.clientHeight-t.clientHeight)/2,c=(e.clientWidth-t.clientWidth)/2;s-=d,l-=c,(0,W.default)(a,{translateX:[l,0],translateY:[s,0],scale:[r,1]},{duration:u.default.MEDIA_VIEWER.CLOSE_ANIMATION_DURATION,easing:[.1,.82,.25,1]}).then((()=>{ee()}));const f=null===(o=oe.current)||void 0===o?void 0:o.getContainerElement();f&&(0,W.default)(f,{opacity:[0,1]},{duration:u.default.MEDIA_VIEWER.CLOSE_ANIMATION_DURATION,easing:[.1,.82,.25,1]})}},ye=e=>{const t=ie.current;e&&t&&(ce.current=t.heightOverflow>0||t.widthOverflow>0),me(e),Q(e)},we=()=>{Ee(!0)},Pe=()=>{ge(!0)},Ne=()=>{ge(!1)},ke=e=>{e.stopPropagation(),je(!_e)};let Ae,Oe;switch((0,o.useEffect)((()=>{Z||Ce||!ne||ve(!0)}),[Z,Ce,ne]),ae.type){case M.default.TYPE.IMAGE:Ae=(0,K.jsx)(T.default,{msg:te,mediaData:ae,onLoad:Te,onImgZoomIn:ye,onAnnotationTooltipDisplay:Pe,onAnnotationTooltipDismiss:Ne,preventDownload:te.isViewOnce,ref:ie},te.id.toString());break;case M.default.TYPE.STICKER:Ae=(0,K.jsx)(w.default,{msg:te,mediaData:ae,onLoad:Te,onImgZoomIn:ye,onStickerPackView:be,stickerPackViewDelay:u.default.MEDIA_VIEWER.CLOSE_ANIMATION_DURATION,ref:ie},te.id.toString());break;case M.default.TYPE.VIDEO:Ae=(0,K.jsx)(N.default,{autoPlay:!fe.current,msg:te,mediaData:ae,onLoad:ae.isGif?Te:null,startTime:e.startTime,onClose:be,ref:se},te.id.toString());break;case M.default.TYPE.AUDIO:Ae=(0,K.jsx)(I.default,{mediaData:ae,msg:te},te.id.toString());break;default:__LOG__(4,void 0,new Error,!0)`type: ${ae.type}`,SEND_LOGS("MediaViewerModal: unexpected media type")}const De=e.msgIndexInAlbum>=0&&e.albumSize>=0;if(te.caption||De){let t;if(De){const a={number:e.msgIndexInAlbum+1,totalNumber:e.albumSize};t=S.default.t(1362,a)}const a=j.Configuration.Conversation({mentions:te.mentionMap(),links:te.getLinks(),trusted:!0}),n=!Ce&&(ae.isGif||ae.type===M.default.TYPE.IMAGE);Oe=(0,K.jsxs)(K.Fragment,{children:[(0,K.jsxs)("p",{className:(0,s.default)(k.default.captionWrapper,re.current&&k.default.captionWrapperExpandable),onClick:re.current?ke:void 0,title:re.current?S.default.t(1536):void 0,"aria-hidden":_e||void 0,children:[(0,K.jsx)(p.EmojiText,{className:(0,s.default)(k.default.mediaCaption,{[k.default.captionHidden]:n,[k.default.expanded]:_e}),formatters:a,ref:e=>{oe.current=e},text:te.caption||t}),re.current&&(0,K.jsx)(B.default,{xstyle:[q.captionReadMoreBtn,_e&&q.captionReadMoreBtnExpanded,pe&&q.captionReadMoreBtnZoomed],onClick:ke,children:(0,K.jsx)(R.TextSpan,{children:S.default.t(1536)})})]}),_e&&(0,K.jsx)("p",{className:(0,s.default)(k.default.captionWrapper,k.default.captionWrapperExpandable,k.default.captionExpanded),onClick:ke,children:(0,K.jsx)(p.EmojiText,{className:(0,s.default)(k.default.mediaCaption,k.default.mediaCaptionExpanded),formatters:a,text:te.caption})})]})}const Re=(0,s.default)(k.default.media,{[k.default.mediaWithCaption]:!!Oe}),Le=(0,s.default)("overlay",k.default.mediaViewer,{[k.default.noThumbnails]:te.isViewOnce||te.isStickerMsg,[k.default.mediaViewerAnimate]:e.isAnimatingIn,[k.default.cursorZoomOut]:pe}),Ge=pe&&ce.current?e=>{Me(e.pageX,e.pageY)}:null,Be=pe?e=>{Me.cancel();const t=ie.current;t&&pe&&t.onClick(e)}:null;let Fe=pe?null:be;null!=Fe&&te.isViewOnce&&(Fe=we);const Ve=!te.isViewOnce&&!te.isStickerMsg;return(0,K.jsx)(G.UIE,{displayName:"MediaViewer",escapable:!0,requestDismiss:be,children:(0,K.jsx)(_.HotKeys,{handlers:{space:e=>{if(Z)return;Me.cancel();const t=ie.current;null!=t&&t.onKeyboardZoom(e)}},onRef:e=>{le.current=e},children:(0,K.jsxs)("div",{className:Le,"data-animate-media-viewer":!0,"data-testid":"media-viewer-modal",onClick:Be,onMouseMove:Ge,children:[(0,K.jsx)(b.default,{isHighlightClose:Se,msg:te,mediaData:ae,onClose:be,onGoToMsgClick:e=>{e.stopPropagation(),be(),r.Cmd.existsDrawerRight((e=>{e&&2===d.default.column&&r.Cmd.closeDrawerRight()}));const t=te.chat.getSearchContext((0,D.unproxy)(te));r.Cmd.openChatAt(te.chat,t).then((e=>{e&&r.Cmd.focusChatTextInput(te.chat)}))},onHightlightCloseEnd:()=>{Ee(!1)},onReplyClick:()=>{be(),(0,i.delayMs)(u.default.MEDIA_VIEWER.CLOSE_ANIMATION_DURATION).then(Y.bind(null,(0,D.unproxy)(te)))},onUnstarClick:e=>{e.stopPropagation(),r.Cmd.sendUnstarMsgs(te.chat,[(0,D.unproxy)(te)])},onStarClick:e=>{e.stopPropagation(),r.Cmd.sendStarMsgs(te.chat,[(0,D.unproxy)(te)])},onDeleteClick:()=>{let e;te.canSenderRevoke()?e=h.RevokePrompt.Sender:te.canAdminRevoke()&&(e=h.RevokePrompt.Admin),r.Cmd.openModal((0,K.jsx)(f.default,{chat:te.chat,msgList:[(0,D.unproxy)(te)],deletePrompt:!0,revokePrompt:e,onDelete:be}))},openForwardFlow:e=>{e.stopPropagation(),te.isUnsentMedia?r.Cmd.openModal((0,K.jsx)(c.default,{title:S.default.t(844),onOK:()=>r.Cmd.closeModal(),okText:S.default.t(2167),children:S.default.t(841)})):r.Cmd.openModal((0,K.jsx)(g.ForwardMessageFlowLoadable,{msgs:[(0,D.unproxy)(te)]}),{transition:"modal-flow"})},onDownloadClick:e=>{e.stopPropagation(),m.FileSaver.initDownload((0,D.unproxy)(te))},onMsgInfoClick:()=>{be(),(0,i.delayMs)(u.default.MEDIA_VIEWER.CLOSE_ANIMATION_DURATION+250).then(r.Cmd.msgInfoDrawer.bind(r.Cmd,(0,D.unproxy)(te)))},onViewOnceInfoClick:()=>{Ie()},msgIndexInAlbum:e.msgIndexInAlbum}),(0,K.jsxs)("div",{className:(0,s.default)(k.default.mediaContent,{[k.default.sticker]:te.isStickerMsg}),onClick:Fe,children:[Ve&&(0,K.jsx)("div",{className:(0,s.default)(k.default.btnMediaPrev),children:(0,K.jsx)(l.ChevronButton,{type:l.ButtonType.Prev,onClick:null!==(t=e.onPrev)&&void 0!==t?t:z,onKeyDown:null!==(a=e.onPrev)&&void 0!==a?a:z,disabled:!e.onPrev||pe,theme:O.RoundTheme.Default})}),(0,K.jsxs)("div",{className:Re,children:[(0,K.jsx)(y.default,{msg:te,mediaData:ae}),Ae,(0,K.jsx)(v.default.Provider,{value:te.chat.groupMetadata,children:Oe})]}),Ve&&(0,K.jsx)("div",{className:(0,s.default)(k.default.btnMediaNext),children:(0,K.jsx)(l.ChevronButton,{type:l.ButtonType.Next,onClick:null!==(n=e.onNext)&&void 0!==n?n:z,onKeyDown:null!==(X=e.onNext)&&void 0!==X?X:z,disabled:!e.onNext||pe,theme:O.RoundTheme.Default})})]})]})})})};var i=a(65266),s=n(a(94184)),o=a(67294),l=(n(a(56720)),a(39064)),r=a(2751),d=n(a(2470)),c=n(a(72021)),u=n(a(11547)),f=n(a(39629)),h=a(57280),p=a(86757),m=a(84837),x=n(a(95573)),g=a(4994),C=a(26205),v=n(a(73503)),_=a(82735),j=a(29320),S=n(a(79276)),E=a(12785),I=n(a(31218)),M=n(a(58446)),T=n(a(26201)),b=n(a(83985)),y=n(a(44999)),w=n(a(63471)),P=a(56341),N=n(a(29351)),k=n(a(7674)),A=n(a(56971)),O=a(68123),D=a(83040),R=a(51183),L=a(97469),G=a(17714),B=n(a(43997)),F=n(a(28905)),V=a(90370),U=n(a(31220)),H=n(a(21797)),W=n(a(81762)),K=a(85893);const q={captionReadMoreBtn:{position:"lhggkp7q",end:"h223g3sc",bottom:"jxacihee",paddingTop:"ppypbuwx",paddingEnd:"f9ovudaz",paddingBottom:"przvwfww",paddingStart:"nu34rnf1",backgroundColor:"idmi9oma",borderTopStartRadius:"ho9ovbg7",borderTopEndRadius:"tcg15ap9",borderBottomEndRadius:"c5wy1lv0",borderBottomStartRadius:"bqysl6j9",boxShadow:"a95fzlb5"},captionReadMoreBtnExpanded:{visibility:"kojwoqec"},captionReadMoreBtnZoomed:{visibility:"kqpkm0zi",opacity:"lxctpz5v"}};function z(e){null==e||e.stopPropagation()}function Y(e){const t=e.chat;t.composeQuotedMsg=e,r.Cmd.focusChatTextInput(t)}},63256:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{mediaMsgs:t,onScroll:a,highlightedMsgIds:n,activeMsg:u,onSetActiveThumb:f,onSelectThumb:h}=e,p=(0,s.useRef)({}),m=()=>{const e=new Map;return t.forEach((t=>{const a=t.id.toString();e.set(a,(e=>{const t=p.current[e];if(!t)return!1;const a=t.getBoundingClientRect(),n=(a.left+a.right)/2;return!(n>-1*window.innerWidth&&n<2*window.innerWidth)})(a))})),e},[x,g]=(0,s.useState)(m),C=(0,d.default)((()=>{const e=m();(0,i.default)(x,e)||g(e)}),100),v=(()=>{const e=n&&n.size>0&&n.has(u.id.toString()),a=[];return t.forEach((t=>{if(null==t.mediaData){const e=u;return void __LOG__(3,!0)`MediaViewerFlow: attempted to render a msg without mediaData: ${JSON.stringify({type:t.type,isMedia:t.isMedia,startMsgType:e.type,startMsgIsMedia:e.isMedia})}`}const i=e&&n&&!n.has(t.id.toString())?"viewerFlowTransparent":"viewerFlow";a.push((0,c.jsx)(o.MediaThumb,{theme:i,active:t===u,msg:t,containerRef:e=>{((e,t)=>{p.current[t]=e})(e,t.id.toString()),t===u&&f(e)},onClick:()=>{h(t)},preferPreview:!!x.get(t.id.toString()),showTooltip:t.isGroupMsg},`media-${t.id.id}`))})),a.push((0,c.jsx)("div",{className:l.default.mediaThumb,children:t.queryMediaAfter?(0,c.jsx)(r.Spinner,{stroke:6,size:24}):null},"spinner-right")),a.unshift((0,c.jsx)("div",{className:l.default.mediaThumb,children:t.queryMediaBefore?(0,c.jsx)(r.Spinner,{stroke:6,size:24}):null},"spinner-left")),a.push((0,c.jsx)("div",{className:l.default.thumbPadding},"padding-right")),a.unshift((0,c.jsx)("div",{className:l.default.thumbPadding},"padding-left")),a})();return(0,c.jsx)("div",{className:l.default.thumbsContainer,ref:e.setRefThumbsContainer,children:(0,c.jsx)("div",{className:l.default.scrollContainer,dir:"ltr",children:(0,c.jsx)("div",{onScroll:e=>{C(),a(e)},className:l.default.viewerThumbs,ref:e.setRefThumbs,children:v})})})};var i=n(a(67598)),s=a(67294),o=a(16248),l=n(a(77030)),r=a(15282),d=n(a(21797)),c=a(85893)},56971:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onOkClick:t}=e;return(0,i.useEffect)((()=>{(0,u.setNUX)(l.default.NUX.EPHEMERAL_VIEW_ONCE_RECEIVER,{views:1,maxViews:1})}),[]),(0,m.jsx)(o.default,{onOK:t,cancelText:f.default.t(1090),onCancel:()=>{(0,r.openExternalLink)((0,d.getViewOnceFaqUrl)())},children:(0,m.jsxs)(c.FlexColumn,{children:[(0,m.jsx)(c.FlexItem,{xstyle:x.graphic,align:"center",children:(0,m.jsx)(h.default,{name:"view-once-sender-nux",width:195,height:177})}),(0,m.jsx)(p.TextHeader,{className:(0,s.default)(x.text),theme:"popup-title",children:e.isPhoto?f.default.t(1846):f.default.t(1849)}),(0,m.jsx)(p.TextParagraph,{className:(0,s.default)(x.text),children:e.isPhoto?f.default.t(1845):f.default.t(1848)})]})})};var i=a(67294),s=n(a(56720)),o=n(a(72021)),l=n(a(11547)),r=a(90701),d=a(9730),c=a(71092),u=a(26205),f=n(a(79276)),h=n(a(15817)),p=a(51183),m=a(85893);const x={text:{marginBottom:"or9x5nie"},graphic:{marginBottom:"t4zgqcuo"}}},33695:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{options:t,explanation:a,onSelect:n}=e,[u,f]=(0,i.useState)(e.initialValue),h=()=>{s.Cmd.closeModal()},p=e=>{const{target:t}=e;t instanceof HTMLInputElement&&f(parseInt(t.value,10))},m=t.map((({value:e,label:t})=>(0,c.jsx)("li",{children:(0,c.jsxs)("label",{className:r.default.label,children:[(0,c.jsx)("input",{type:"radio",className:r.default.input,value:String(e),checked:e===u,onChange:p}),t]})},`setting-${e}`)));return(0,c.jsxs)(o.default,{title:e.title,okText:l.default.t(642),onOK:()=>{null!=u&&n(u),h()},onCancel:h,children:[null!=a?(0,c.jsx)(d.TextDiv,{theme:"muted",className:r.default.explanation,children:a}):null,(0,c.jsx)("form",{children:(0,c.jsx)("ol",{children:m})})]})};var i=a(67294),s=a(2751),o=n(a(72021)),l=n(a(79276)),r=n(a(89732)),d=a(51183),c=a(85893)},72796:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const[t,a]=(0,i.useState)(!1);let n,f,h;e.isGroup?(n=r.default.t(1567),f=r.default.t(1570),h=r.default.t(2022)):e.isBusiness?(n=r.default.t(1565),f=r.default.t(1568),h=r.default.t(234)):(n=r.default.t(1566),f=r.default.t(1569),h=r.default.t(236));return(0,c.jsxs)(o.default,{onOK:function(){e.onReport(t)},okText:r.default.t(1546),onCancel:e.onCancel,title:e.title,children:[(0,c.jsx)(d.TextParagraph,{xstyle:u.section,color:"muted",children:n}),(0,c.jsx)(d.TextParagraph,{xstyle:u.section,color:"muted",children:f}),(0,c.jsxs)(l.FlexRow,{align:"center",justify:"start",children:[(0,c.jsx)(s.CheckBox,{onChange:()=>a((e=>!e)),checked:t,id:"menu-icon-report-spam"}),(0,c.jsx)(d.TextLabel,{xstyle:u.checkboxLabel,htmlFor:"menu-icon-report-spam",color:"muted",children:h})]})]})};var i=a(67294),s=(n(a(56720)),a(38974)),o=n(a(72021)),l=a(71092),r=n(a(79276)),d=a(51183),c=a(85893);const u={section:{marginBottom:"t4zgqcuo"},checkboxLabel:{marginStart:"fooq7fky"}}},24613:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={audioTag:"_1ichq"}},35346:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={header:"_2J_Rg",chevronIcon:"_3grvf",ephemeralIcon:"_36-dp"}},4949:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={msg:"_3YiZC",text:"RmpKn",bubble:"_2z0p1",author:"XntIB",hasSuspiciousLinks:"_3bU-2",hasAuthor:"_2cFHu",suspiciousLabel:"_2tYTz"}},81030:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={roundedThumb:"_2rpgh"}},14040:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={container:"_3go1_"}},1001:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={mediaCanvas:"GfgP-",shade:"_31TVj",canvasSelected:"xEnhc"}},80768:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={iconStar:"_1Dvi_",shadeTop:"_2GZwK",canvasBody:"_10gTM",canvasSelected:"_28Wzy",mediaSelect:"_3fXE6",canvasComponent:"zm1kZ",canvasSecondRow:"_2GObI",viewerFlow:"_8KUDv",active:"_2w4lr",viewerFlowTransparent:"_3UuHq"}},61639:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={container:"_Wzeb",selected:"_2v6Lf"}},22745:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={iconType:"_3sWXp"}},79011:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={wrapper:"_11tTr"}},82338:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={nuxContainer:"_2MN2b",flatListContainer:"_3P67r",btnClose:"_1rNId",nuxHeader:"_1fDhw",nuxContent:"_3CSup",nuxIcon:"wZmgd",nuxText:"_23F3I"}},19713:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={footerNote:"_2v7h3",getTheAppLink:"f20SI"}},37154:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={wrapper:"_3KBDs",code:"_2ZlC0",codeDarkMode:"_2LUvK",codeLogo:"_3TIEq"}},25022:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={businessAccount:"_3WoOY",businessTitleText:"_1b76N",businessTitleWithSMBUpsell:"_3o5KS",businessTitleWithSmbUpsell:"_3o5KS"}},5579:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={businessHoursRow:"_2438e",firstRow:"_2aGH7",businessHoursDay:"Wb7rm",businessHoursHours:"_1Mczx",dayIsOpen:"_1kitz",businessHoursChevron:"_3rrGE",flipSvg:"mqqNO"}},79953:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={section:"h_jr2",description:"_2q04R",map:"_1I-_B"}},80746:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={wrapper:"_1KYpA",title:"_3vc4r",subtitle:"_3QsTT",verifiedText:"U1NnE",icon:"_3g_j1"}},63937:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={open:"_30zzj",closed:"_3wZZK",openStatus:"_1domD"}},10824:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={contactBusinessInfo:"_3ghG_",contactBusinessInfoSpinner:"_4L7V_",dataRow:"_1V82a",businessHoursRow:"qatFJ",businessHoursDay:"ipOxZ",businessHoursHours:"_24gSh",businessHoursChevron:"_3WwUb",flipSvg:"_3rTVf",dataRowIcon:"_19MbK",dataRowText:"_2w4yz",businessTitleText:"_2ojGG",businessMarker:"Ok_wk",verifiedLabel:"_8Jv4k",businessMap:"_2AET6",address:"_3hYRV",link:"Lmend",infoIcon:"_3MsDj"}},12603:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={info:"_1TZy1",categories:"_1IRxm",noPaddingBottom:"_2JmH_"}},13474:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={header:"_2zyOo",icon:"_4aKqp"}},33019:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={header:"_3AwRc",restrictText:"_1fFgT"}},27356:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={multimediaGallery:"_3M644",column:"_3nvje",menuItem:"OJuvv",active:"_KRg9",menuTabsLists:"_3CC5A",threeTabs:"_1KRHF",fourTabs:"rLX29"}},8752:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={mediaViewerPlaceholder:"nehFG",imageAudio:"_2OreO",mediaViewerAudio:"_1alR8"}},77030:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={thumbsContainer:"_1XWMx",scrollContainer:"_1MhXb",viewerThumbs:"_1FS45",mediaThumb:"_52crR",thumbPadding:"_1833d"}},89732:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={label:"QzWWL",input:"_1LOWN",explanation:"_37J_Y"}}}]);
//# sourceMappingURL=https://web.whatsapp.com/lazy_loaded_high_priority_components.c354695a8020fce66235.js.map
