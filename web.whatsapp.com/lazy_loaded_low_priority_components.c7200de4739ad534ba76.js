/*! Copyright (c) 2022 WhatsApp Inc. All Rights Reserved. */
(self.webpackChunkwhatsapp_web_client=self.webpackChunkwhatsapp_web_client||[]).push([[275],{74220:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.cartItemCollection.reset(),e.set("message",void 0),e.trigger("change:cartItemCollection"),(0,r.default)(e)};var r=a(n(38260))},72921:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const n=r.CartCollection.findCart(e);return n.cartItemCollection.remove(t),n.trigger("change:cartItemCollection"),(0,o.default)(n),n.itemCount};var r=n(12392),o=a(n(38260))},79495:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.createProductFromRefreshCartItem=C,t.isPriceMatch=_,t.matchCartItemsToProducts=function(e,t){const n=d.CatalogCollection.get((0,l.createWid)(e.id)),a=[],r=[];let f=!0;n&&e.cartItemCollection.forEach((i=>{const l=n.productCollection.get(i.id);let s=t&&t.products.find((e=>e.id===i.id));if(s=function(e,t){if(e&&"deleted"===e.status)return void t.productCollection.remove(e.id);return e}(s,n),!t&&l){const e=function(e,t){const n=function(e,t){return e.priceAmount1000===(0,p.getActivePrice)(t)&&e.currency===t.currency&&e.name===t.name&&e.imageHash===t.imageHash}(e,t);n||e.set({priceAmount1000:(0,p.getActivePrice)(t),currency:t.currency,name:t.name,imageHash:t.imageHash},{silent:!0});return n}(i,l);f=f&&e,a.push({product:l,cartItem:i})}else if(s){const t=function(e,t){const n=!t||function(e,t){var n,a;const r=(0,p.getActivePrice)(v(t));return _(e.priceAmount1000,r)&&(!(0,o.isString)(e.currency)&&!(0,o.isString)(t.currency)||e.currency===t.currency)&&e.name===t.name&&e.imageHash===(null===(n=t.media)||void 0===n||null===(a=n.image)||void 0===a?void 0:a.id)}(e,t);if(!n&&t){const n=v(t);e.set({priceAmount1000:(0,p.getActivePrice)(n),currency:n.currency,name:n.name,imageHash:n.imageHash},{silent:!0})}return n}(i,s);f=f&&t,a.push({product:C(s,e.id),cartItem:i})}else f=!1,r.push(i.id)})),n||(0,u.default)(e);f||(r.length&&e.cartItemCollection.remove(r),e.trigger("change:cartItemCollection"),i.ModalManager.open((0,g.jsx)(c.default,{onOK:()=>{i.ModalManager.close()},children:s.fbt._("One or more items in your cart have been updated",null,{hk:"1jr9xE"})})));return(0,m.default)(e),a},t.parsePrice=x;var r=a(n(81109)),o=n(51737),i=n(14597),l=n(45454),s=n(48360),d=n(99989),u=a(n(74220)),c=a(n(52665)),f=n(9468),h=n(21374),p=n(13151),m=a(n(38260)),g=n(85893);function v(e){var t,n,a,r,o,i,l,s;return{id:e.id,name:null!==(t=e.name)&&void 0!==t?t:"",imageCdnUrl:null===(n=e.media)||void 0===n||null===(a=n.image)||void 0===a?void 0:a.request_image_url,imageHash:null===(r=e.media)||void 0===r||null===(o=r.image)||void 0===o?void 0:o.id,currency:e.currency,priceAmount1000:x(e.price),salePriceAmount1000:x(null===(i=e.sale_price)||void 0===i?void 0:i.price),salePriceStartDate:(0,h.parseDateValue)(null===(l=e.sale_price)||void 0===l?void 0:l.start_date),salePriceEndDate:(0,h.parseDateValue)(null===(s=e.sale_price)||void 0===s?void 0:s.end_date)}}function x(e){return"string"==typeof e?e.length>0?parseInt(e,10):null:e}function _(e,t){const n=x(e),a=x(t);return(0,o.isNumber)(n)&&(0,o.isNumber)(a)?n===a:!(0,o.isNumber)(n)&&!(0,o.isNumber)(a)}function C(e,t){return new f.Product((0,r.default)((0,r.default)({},v(e)),{},{catalogWid:(0,l.createWid)(t),productMsgMediaData:null,imageCount:1,fetchedFromServer:!0,t:Date.now()/1e3,old:!1}))}},9186:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(0===e.cartItemCollection.length)return Promise.resolve({products:[],price:{}});const n=e.cartItemCollection.map((e=>e.id));return(0,r.refreshCart)((0,a.createWid)(e.id),n,o.CartCollection.imageWidth,o.CartCollection.imageHeight,t)};var a=n(45454),r=n(6878),o=n(12392)},53109:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return f.apply(this,arguments)};var r=a(n(48926)),o=n(45454),i=n(99989),l=a(n(34949)),s=n(9538),d=a(n(76533)),u=a(n(38260));function c(e){var t,n;const a=e.cartItemCollection.at(0);if(null==a)return"";const r=i.CatalogCollection.get((0,o.createWid)(e.id)),s=null==r?void 0:r.productCollection.get(a.id),d=null==s||null===(t=s.getProductImageCollectionHead())||void 0===t?void 0:t.mediaData;return null==d?"":d.preview instanceof l.default&&null!==(n=d.preview.getBase64())&&void 0!==n?n:""}function f(){return(f=(0,r.default)((function*(e,t){const n=yield(0,s.createOrder)(t.id,e.cartItemCollection.toArray());return yield(0,d.default)(t,n,e.itemCount,c(e),e.message),(0,u.default)(e),n.id}))).apply(this,arguments)}},51383:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){e.set("message",t),(0,r.default)(e)};var r=a(n(38260))},85566:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){const a=r.CartCollection.findCart(e),i=a.cartItemCollection.get(t.id);null==i||i.set("quantity",n),a.trigger("change:cartItemCollection"),(0,o.default)(a)};var r=n(12392),o=a(n(38260))},76533:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return c.apply(this,arguments)};var r=a(n(48926)),o=n(35470),i=n(40234),l=a(n(65212)),s=n(78820),d=n(75887),u=n(13705);function c(){return(c=(0,r.default)((function*(e,t,n,a,r){const o=f(e,t,n,a,r);if((0,s.isMeAccount)(e.id))return(0,d.addAndSendMsgToChat)(e,o)[0].then((()=>{})).catch((e=>{throw __LOG__(3)`Order message send to chat failure: ${e}`,e}));try{const t=yield(0,d.addAndSendMsgToChat)(e,o)[1];if(!t||t!==u.SendMsgResult.OK)throw new Error("Order message SendMsgResult failure status")}catch(e){throw __LOG__(3)`Order message send to chat failure: ${e}`,e}}))).apply(this,arguments)}function f(e,t,n,a,r){const d=(0,s.getMaybeMeUser)(),u={type:"order",ack:o.ACK.CLOCK,from:d,id:new l.default({from:d,to:e.id,id:l.default.newId(),participant:void 0,selfDir:"out"}),local:!0,isNewMsg:!0,self:"out",t:i.Clock.globalUnixTime(),to:e.id,orderId:t.id,token:t.token,orderTitle:e.name||e.formattedTitle,sellerJid:e.id.toString({legacy:!0}),thumbnail:a,itemCount:n,message:r},c=t.price.total;return c&&c.length>0&&(u.totalAmount1000=parseInt(c,10)),t.price.currency&&t.price.currency.length>0&&(u.totalCurrencyCode=t.price.currency),u}},12224:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return C.apply(this,arguments)};var r=a(n(48926)),o=n(89385),i=n(50796),l=n(92574),s=n(14597),d=n(94816),u=n(48360),c=n(45454),f=n(46331),h=n(62251),p=n(56489),m=n(53849),g=n(71517),v=n(82039),x=n(50452),_=n(85893);function C(){return(C=(0,r.default)((function*(e){let{name:t,desc:n,icon:a,existingGroups:C,newGroups:y}=e;const b=(0,h.sendCreateCommunity)({name:t,desc:n}),j=(0,r.default)((function*(){try{return yield b,new f.ActionType(u.fbt._("Community created",null,{hk:"xIcPS"}))}catch(e){throw __LOG__(3,!0,void 0,!0)`Community creation failed`,SEND_LOGS("community-creation-failed"),new o.AbortError}}))(),S=new f.ActionType(u.fbt._("Creating community",null,{hk:"riXxC"}));d.ToastManager.open((0,_.jsx)(f.ActionToast,{id:(0,f.genId)(),initialAction:S,pendingAction:j}));try{const e=(yield b).wid;if(null!=a){const t=v.ProfilePicThumbCollection.gadd(e);yield(0,g.setProfilePic)(t,a,a)}let t=[];if(y.length>0&&(t=y.map((t=>{let{subject:n,icon:a,ephemeralDuration:r}=t;return(0,p.createGroup)(n,a,a,[],r,e)}))),yield Promise.all(t),C.length){const t=yield(0,h.sendLinkSubgroups)({parentGroupId:e,subgroupIds:C.map((e=>e.id))});t.failedGroups.length>0&&s.ModalManager.open((0,_.jsx)(m.LinkingFailedModal,{parentGroupId:e,failedGroups:t.failedGroups.map((e=>(0,c.createWid)(e.jid)))}))}}catch(e){d.ToastManager.open((0,_.jsx)(x.Toast,{id:(0,f.genId)(),msg:u.fbt._("Community could not be created. Check your internet connection and try again.",null,{hk:"2qApNs"})})),(0,i.filteredCatch)(l.ServerStatusCodeError,(()=>{}))(e)}}))).apply(this,arguments)}},68705:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return f.apply(this,arguments)};var r=a(n(48926)),o=n(50796),i=n(92574),l=n(94816),s=n(48360),d=n(46331),u=n(62251),c=n(85893);function f(){return(f=(0,r.default)((function*(e,t){const n=(0,u.sendLinkSubgroups)({parentGroupId:e,subgroupIds:t}),a=(0,r.default)((function*(){return yield n,new d.ActionType(s.fbt._({"*":"Groups linked",_1:"Group linked"},[s.fbt._plural(t.length)],{hk:"2NDR70"}))}))(),f=new d.ActionType(s.fbt._({"*":"Linking groups",_1:"Linking group"},[s.fbt._plural(t.length)],{hk:"3sVN59"}));l.ToastManager.open((0,c.jsx)(d.ActionToast,{id:(0,d.genId)(),initialAction:f,pendingAction:a}));try{yield n}catch(e){(0,o.filteredCatch)(i.ServerStatusCodeError,(()=>{}))(e)}}))).apply(this,arguments)}},97060:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.acknowledgeCommunityAdminPromotion=function(){return i.apply(this,arguments)};var r=a(n(48926)),o=n(86791);function i(){return(i=(0,r.default)((function*(e){try{yield(0,o.persistGroupMetadata)(e.id,{displayCadminPromotion:!1}),e.set({displayCadminPromotion:!1})}catch(e){__LOG__(3)`actions:community:acknowledgeCommunityAdminPromotion persistGroupMetadata failed`}}))).apply(this,arguments)}},55326:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.setPushname=function(e){return p(e)};var r=a(n(48926)),o=n(50796),i=n(92574),l=n(94816),s=n(46331),d=n(17239),u=a(n(14296)),c=a(n(54947)),f=n(53006),h=n(85893);function p(){return m.apply(this,arguments)}function m(){return(m=(0,r.default)((function*(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,s.genId)(),n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a=(0,c.default)(e),r=new s.ActionType(u.default.t(114)),m=d.Conn.pushname,g=a.then((()=>{const e=n?void 0:{actionText:u.default.t(126),actionHandler:()=>p(m,t,!0)};return new s.ActionType(u.default.t(112),e)})).catch((0,o.filteredCatch)(i.ServerStatusCodeError,(e=>{if(e.status>=400)return new s.ActionType(u.default.t(113))}))).catch((()=>{throw __LOG__(3)`models:conn:setPushname dropped`,new s.ActionType(u.default.t(113),{actionText:u.default.t(122),actionHandler:()=>p(status,t)})}));l.ToastManager.open((0,h.jsx)(s.ActionToast,{id:t,initialAction:r,pendingAction:g}));const v=yield a;v._duplicate||(0,f.setPushnameLocally)(e)}))).apply(this,arguments)}},50247:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){a.ToastManager.open((0,i.jsx)(o.Toast,{msg:r.fbt._("Something went wrong",null,{hk:"2TMztB"}),duration:6e3,id:(0,o.genId)()}))};var a=n(94816),r=n(48360),o=n(50452),i=n(85893)},28602:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useGdprDelete=function(){return(0,r.useSendIq)((0,a.wap)("iq",{xmlns:"urn:xmpp:whatsapp:account",to:a.S_WHATSAPP_NET,type:"get",id:(0,a.generateId)()},(0,a.wap)("gdpr",{action:"delete"})),o.GdprStatusWapParser)};var a=n(31914),r=n(22246),o=n(23218)},60768:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.useGdprDownload=function(){const[e,t]=(0,s.useState)(!1);return[e,e=>{t(!0),(0,d.gdprDownloadMedia)(e).then((e=>o.FileSaver.downloadData((0,r.default)(e.mediaBlob,"mediaObject.mediaBlob").formData(),String(l.fbt._("My Account Info",null,{hk:"IqRu3"})),i.AllowedFileExtensions.ZIP))).finally((()=>t(!1)))}]};var r=a(n(45095)),o=n(21634),i=n(11586),l=n(48360),s=n(67294),d=n(61647)},98753:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useGdprRequest=function(){return(0,r.useSendIq)((0,a.wap)("iq",{xmlns:"urn:xmpp:whatsapp:account",to:a.S_WHATSAPP_NET,type:"get",id:(0,a.generateId)()},(0,a.wap)("gdpr",{action:"request"})),o.GdprStatusWapParser)};var a=n(31914),r=n(22246),o=n(23218)},23218:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.GdprStatusWapParser=void 0,t.useGdprStatus=function(){const[e,t]=function(e){(0,d.default)((()=>{h=(0,o.generateId)()}));const[t,n]=(0,s.useState)(h),a=(0,s.useMemo)((()=>e(t)),[e,t]);return[(0,c.sendSuspensefulIq)(a,f),()=>n((0,o.generateId)())]}((e=>(0,o.wap)("iq",{xmlns:"urn:xmpp:whatsapp:account",to:o.S_WHATSAPP_NET,type:"get",id:e},(0,o.wap)("gdpr",{action:"status"}))));return[e.result,t]};var r=a(n(45095)),o=n(31914),i=n(71914),l=n(84902),s=n(67294),d=a(n(55010)),u=n(24808),c=n(53663);const f=new i.WapParser("parseStatus",(e=>{if(!e.hasChild("gdpr"))return null;const t=e.child("gdpr");if(t.hasChild("document")){const e=t.child("document");return{creation:e.attrTime("creation"),documentMessage:(0,r.default)((0,l.decodeProtobuf)(u.MessageSpec,e.contentBytes()).documentMessage,"decodeProtobuf(MessageSpec, document.contentBytes()).documentMessage"),expiration:e.attrTime("expiration"),type:"GdprAvailableStatusResponse"}}return{timestamp:t.attrTime("timestamp"),type:"GdprPendingStatusResponse"}}));t.GdprStatusWapParser=f;let h=(0,o.generateId)()},42681:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.syncAllSubgroups=void 0,t.syncAndGetAdminedGroups=function(){return d.apply(this,arguments)};var r=a(n(48926)),o=n(69951),i=n(19380),l=n(36163);const s=l.restoreGroupParticipants;function d(){return(d=(0,r.default)((function*(){try{yield(0,l.restoreGroupParticipants)();const e=i.ContactCollection.getGroupContacts();return e.filter((e=>{var t,n;const a=null===(t=o.ChatCollection.get(e.id.toString()))||void 0===t||null===(n=t.groupMetadata)||void 0===n?void 0:n.participants;return null!=a&&a.iAmAdmin()}))}catch(e){return __LOG__(3)`Failed to sync group metadata`,[]}}))).apply(this,arguments)}t.syncAllSubgroups=s},36350:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendPollCreation=function(){return p.apply(this,arguments)};var r=a(n(48926)),o=n(35470),i=n(40234),l=n(8139),s=a(n(65212)),d=n(15461),u=n(78820),c=n(45454),f=a(n(41143)),h=n(75887);n(13705);function p(){return(p=(0,r.default)((function*(e,t){(0,f.default)((0,l.isPollsCreationEnabled)(),"Poll creation is disabled"),(0,f.default)(t.isGroup,"Polls can only be sent to groups");const n=t.id,a=(0,u.getMaybeMeUser)(),[,r]=(0,h.addAndSendMsgToChat)(t,{id:new s.default({from:a,to:n,id:s.default.newId(),participant:(0,c.toUserWid)(a),selfDir:"out"}),type:d.MSG_TYPE.POLL_CREATION,t:i.Clock.globalUnixTime(),from:a,to:n,self:"out",isNewMsg:!0,local:!0,ack:o.ACK.CLOCK,pollName:e.name,pollOptions:e.options.map(((e,t)=>{let{name:n}=e;return{name:n,localId:t}})),pollEncKey:self.crypto.getRandomValues(new Uint8Array(32)),pollSelectableOptionsCount:0});return r}))).apply(this,arguments)}},1673:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getTwoFactor=function(){return l.apply(this,arguments)},t.setTwoFactor=function(){return s.apply(this,arguments)};var r=a(n(48926)),o=n(1618),i=a(n(81044));function l(){return(l=(0,r.default)((function*(){try{var e,t;const n=yield(0,o.getTwoFactor)();return{code:null!==(e=null==n?void 0:n.code)&&void 0!==e&&e,email:null!==(t=null==n?void 0:n.email)&&void 0!==t&&t}}catch(e){return __LOG__(3,!0,void 0,!0)`get2FA failed - ${e}`,SEND_LOGS("get-2FA-failed"),{code:!1,email:!1}}}))).apply(this,arguments)}function s(){return(s=(0,r.default)((function*(e,t){try{yield(0,i.default)(e,t)}catch(e){throw __LOG__(3,!0,void 0,!0)`set2FA failed -${e}`,SEND_LOGS("set-2FA-failed"),e}}))).apply(this,arguments)}},53663:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendSuspensefulIq=function(e,t){const n=e.attrs.id;if(r.has(n)){const e=r.get(n);if(e instanceof Promise)throw e;return e}const o=(0,a.sendIq)(e,t);throw r.set(n,o),o.then((e=>r.set(n,e))),o};var a=n(24747);const r=new Map},1618:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getTwoFactor=function(){return c.apply(this,arguments)};var r=a(n(48926)),o=n(8584),i=n(31914),l=n(71914),s=n(92574),d=n(24747);const u=new l.WapParser("getTwoFactor",(e=>{if(e.hasChild("2fa"))return{code:e.child("2fa").hasChild("code"),email:e.child("2fa").hasChild("email")}}));function c(){return(c=(0,r.default)((function*(e){const t=yield(0,d.sendIq)(f(e),u);if(!t.success)throw new s.ServerStatusCodeError(t.errorCode,t.errorText);return t.result}))).apply(this,arguments)}function f(e){const t=[];return null!=e&&t.push(new i.WapNode("code",void 0,o.Binary.build(e).readByteArray())),(0,i.wap)("iq",{to:i.S_WHATSAPP_NET,type:"get",xmlns:"urn:xmpp:whatsapp:account",id:(0,i.generateId)()},new i.WapNode("2fa",void 0,t))}},15161:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getIdentityVerificationDataJob=function(e){return(0,o.NonPersistJob)("getIdentityVerificationData",(e=>(0,r.getIdentityVerificationData)(e)),{priority:a.JOB_PRIORITY.SKIP}).waitUntilCompleted({jid:e})};var a=n(24674),r=n(35723),o=n(29731)},81044:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return c.apply(this,arguments)};var r=a(n(48926)),o=n(8584),i=n(31914),l=n(71914),s=n(92574),d=n(24747);const u=new l.WapParser("set2FA",(e=>({stanzaId:e.attrString("id")})));function c(){return(c=(0,r.default)((function*(e,t){const n=[new i.WapNode("code",void 0,o.Binary.build(e).readByteArray())];null!=t&&n.push(new i.WapNode("email",void 0,o.Binary.build(t).readByteArray()));const a=yield(0,d.sendIq)((0,i.wap)("iq",{to:i.S_WHATSAPP_NET,type:"set",xmlns:"urn:xmpp:whatsapp:account",id:(0,i.generateId)()},new i.WapNode("2fa",void 0,n)),u);if(!a.success)throw new s.ServerStatusCodeError(a.errorCode,a.errorText)}))).apply(this,arguments)}},15194:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendSupportRequest=function(){return h.apply(this,arguments)};var r=a(n(48926)),o=n(31914),i=n(71914),l=n(86374),s=n(78820),d=n(24747),u=n(39410);function c(e,t){__LOG__(3,void 0,void 0,!0)`supportRequest error: code=${e} message=${null!=t?t:""}`,SEND_LOGS("supportRequest")}const f=new i.WapParser("supportResponse",(e=>{const t=e.child("response");if(t.hasAttr("error_code")){return{type:"error",errorCode:t.attrInt("error_code",0,1e3)}}t.assertAttr("status","ok");return{type:"success",message:t.child("message").contentString(),ticketId:t.child("ticket_id").contentString()}}));function h(){return(h=(0,r.default)((function*(e,t){const n=(0,o.wap)("iq",{from:(0,u.USER_JID)((0,s.getMeUser)()),id:(0,o.generateId)(),smax_id:"3",to:o.S_WHATSAPP_NET,type:"set",xmlns:"fb:thrift_iq"},(0,o.wap)("description",null,e),null!=t?(0,o.wap)("debug_information_json",null,t):null),a=yield(0,d.sendIq)(n,f);let r;if(a.success){var i;const{result:e}=a;return"success"===e.type?(null!=t&&(__LOG__(2)`InAppSupport: Uploading logs for ticketId=${e.ticketId}`,(0,l.upload)({reason:"user-report",immediate:!0,force:!0,persist:!0,ticketId:e.ticketId}).then((t=>{__LOG__(2)`InAppSupport: Logs upload complete for ticketId=${e.ticketId}, logsId=${t}`}))),{type:"success",message:e.message,ticketId:e.ticketId}):(r=null!==(i=e.errorCode)&&void 0!==i?i:400,c(r),{type:"error",errorCode:r})}return c(a.errorCode,a.errorText),{type:"error",errorCode:a.errorCode}}))).apply(this,arguments)}},35723:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getIdentityVerificationData=function(){return y.apply(this,arguments)};var r=a(n(48926)),o=n(8584),i=n(78820),l=n(60980),s=n(26409),d=n(80498),u=n(97398),c=a(n(76883)),f=n(56592);const h=/^([17]|2[07]|3[0123469]|4[013456789]|5[12345678]|6[0123456]|8[1246]|9[0123458]|\d{3})\d*?(\d{4,6})$/;function p(e){const t=h.exec(function(e){return e.user.split("@")[0]}(e));return o.Binary.build(t?t[1]+t[2]:e.toString()).readByteArray()}function m(e,t){return`00000${256*e.getUint32(t,!1)+e.getUint8(t+4)}`.slice(-5)}function g(){return v.apply(this,arguments)}function v(){return(v=(0,r.default)((function*(e,t){let n=Promise.resolve(o.Binary.build(0,0,t,e).readByteArray());for(let e=0;e<5200;e++)n=n.then((e=>self.crypto.subtle.digest({name:"SHA-512"},o.Binary.build(e,t).readByteArray())));const a=yield n,r=new DataView(a instanceof ArrayBuffer?a.slice(0,30):a.slice(0,30).buffer);return[m(r,0),m(r,5),m(r,10),m(r,15),m(r,20),m(r,25)].join("")}))).apply(this,arguments)}function x(){return _.apply(this,arguments)}function _(){return(_=(0,r.default)((function*(e,t,n,a){return(yield Promise.all([g(e,t),g(n,a)])).sort().join("")}))).apply(this,arguments)}function C(e,t,n,a){const r=new o.Binary;return(0,l.encodeProtobuf)(d.CombinedFingerprintSpec,{version:0,localFingerprint:{publicKey:t,identifier:e},remoteFingerprint:{publicKey:a,identifier:n}},r),r.readBuffer()}function y(){return(y=(0,r.default)((function*(e){let{jid:t}=e;const n=(0,i.assertGetMe)(),a=yield(0,s.getFanOutListJob)([t,n]);try{yield(0,u.ensureE2ESessions)(a)}catch(e){__LOG__(4,void 0,new Error)`ensureE2ESessions with error`}const r=[],o=[];a.forEach((e=>{e.user===n.user?o.push(e):r.push(e)}));try{const e=yield(0,f.getAllIdentityKeysBytesOrThrow)(r),n=yield(0,f.getAllIdentityKeysBytesOrThrow)(o),a=yield c.default.getIdentityKeyPair();if(!a)return __LOG__(3)`getIdentityVerificationData: missing identity for device verification`,null;n.push(new Uint8Array(a.pubKey));const l=(0,f.identityKeysToBinary)(n),s=(0,f.identityKeysToBinary)(e),d=p((0,i.getMeUser)()),u=p(t),h=yield Promise.all([x(d,l,u,s),C(d,l,u,s)]);if(null==h)return null;const[m,g]=h;return{binary:g,string:m}}catch(e){return __LOG__(3)`getIdentityVerificationData: error ${e} when trying to generate identtiy QR code`,null}}))).apply(this,arguments)}},33866:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.editBusinessProfile=t.editBusinessCompliance=void 0;var r=n(88555),o=n(8021),i=n(90166),l=n(63442),s=n(46277),d=a(n(56891));t.editBusinessProfile=e=>{let t;return(0,i.qplPointProfileSave)("datasource_start"),t=(0,r.isMDBackend)()?(0,o.editBusinessProfile)(e):(0,s.editBusinessProfile)(e),t.then((()=>{(0,i.qplPointProfileSave)("datasource_end")})),t};t.editBusinessCompliance=e=>{let t;return(0,r.isMDBackend)()?(t=(0,l.setMerchantCompliance)(e),t||(t=Promise.reject(new Error("md business compliance profile called from a non-md build")))):t=d.default.editBusinessComplianceWebd(e),t}},46277:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.editBusinessProfile=t.convertProfileToRequestData=void 0;var r=a(n(81109)),o=a(n(48926)),i=n(92574),l=a(n(70740)),s=n(65044);function d(e){if(!e)return;return{category:e.map((e=>{let{id:t}=e;return{id:t}}))}}function u(e){if(!e)return;const{note:t,timezone:n,config:a}=e,r=[];for(const e in a){const t=a[e],{mode:n,hours:o}=t;if(o)for(const[t,a]of o)r.push({day_of_week:e,mode:n,open_time:t,close_time:a});else r.push({day_of_week:e,mode:n})}return{timezone:n,business_hours_note:t,business_hours_config:r}}const c=e=>{let{address:t,description:n,email:a,website:r,businessHours:o,categories:i}=e;const s=(0,l.default)({address:t,description:n,email:a,website:r,business_hours:u(o),categories:d(i)});return Object.keys(s).length>0?s:void 0};t.convertProfileToRequestData=c;const f=function(){var e=(0,o.default)((function*(e){const t=c(e);if(!t)return void __LOG__(3)`empty profile received, ignoring save`;const n=(0,r.default)({v:2},t);try{const e=yield s.Socket.send2({data:["action","editBusinessProfile",n],retryOn5xx:!0}),{status:t}=e;if((e=>e>=200&&e<=299)(t))return;throw __LOG__(3)`error editing business profile webd: ${t}`,new i.ServerStatusCodeError(t,"edit business profile")}catch(e){const t=e;throw __LOG__(3)`error editing business profile: ${t}`,t}}));return function(){return e.apply(this,arguments)}}();t.editBusinessProfile=f},54947:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return f.apply(this,arguments)};var r=a(n(48926)),o=n(92844),i=n(92574),l=n(88555),s=a(n(42339)),d=a(n(45723)),u=n(38804),c=a(n(56891));function f(){return(f=(0,r.default)((function*(e){if((0,l.isMDBackend)()&&e){const t=(0,o.unixTimeMs)(),n=s.default.getPushnameMutation(t,e);return(0,d.default)(e),(0,u.lockForSync)([],[n],(()=>Promise.resolve())).then((()=>({_duplicate:null})))}const t=yield c.default.setPushname(e);if(t.status&&200!==t.status)throw new i.ServerStatusCodeError(t.status);return{_duplicate:t._duplicate}}))).apply(this,arguments)}},61647:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.gdprDownloadMedia=function(e){const t=(0,s.getOrCreateMediaObject)((0,o.encodeB64)((0,i.default)(e.fileSha256,"documentMessage.fileSha256"))),n={debugHint:"setMediaObjectValues",deprecatedMms3Url:(0,i.default)(e.directPath,"documentMessage.directPath"),encFilehash:(0,o.encodeB64)((0,i.default)(e.fileEncSha256,"documentMessage.fileEncSha256")),mediaKey:(0,o.encodeB64)((0,i.default)(e.mediaKey,"documentMessage.mediaKey")),mediaKeyTimestamp:(0,l.unixTime)(),type:u.MEDIA_TYPES.DOCUMENT};return t.entries.addEntry(n),t.consolidate((0,r.default)((0,r.default)({},n),{},{filehash:(0,o.encodeB64)((0,i.default)(e.fileSha256,"documentMessage.fileSha256")),type:d.TYPE.DOCUMENT})),(0,f.downloadMedia)({downloadEvenIfExpensive:!0,downloadOrigin:c.default.DOWNLOAD_ORIGIN_TYPE.GDPR,mediaObject:t,mediaType:u.MEDIA_TYPES.DOCUMENT,mimetype:"application/zip",rmrReason:c.default.WEBC_RMR_REASON_CODE.DOCUMENT_DOWNLOAD}).then((()=>t))};var r=a(n(81109)),o=n(15688),i=a(n(45095)),l=n(92844),s=(n(21009),n(88297)),d=n(58668),u=n(61596),c=a(n(11339)),f=n(9329)},80498:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FingerprintDataSpec=t.CombinedFingerprintSpec=void 0;var a=n(1390);const r={};t.FingerprintDataSpec=r;const o={};t.CombinedFingerprintSpec=o,r.internalSpec={publicKey:[1,a.TYPES.BYTES],identifier:[2,a.TYPES.BYTES]},o.internalSpec={version:[1,a.TYPES.UINT32],localFingerprint:[2,a.TYPES.MESSAGE,r],remoteFingerprint:[3,a.TYPES.MESSAGE,r]}},75169:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OrderStatusLabels=void 0;var a=n(48360),r=n(88998);const o={[String(r.OrderStatus.Pending)]:a.fbt._("Pending",null,{hk:"4GysRv"}),[String(r.OrderStatus.Processing)]:a.fbt._("Processing",null,{hk:"42EV23"}),[String(r.OrderStatus.PartiallyShipped)]:a.fbt._("Partially shipped",null,{hk:"2GgHwQ"}),[String(r.OrderStatus.Shipped)]:a.fbt._("Shipped",null,{hk:"30IDPY"}),[String(r.OrderStatus.Complete)]:a.fbt._("Completed",null,{hk:"1e4PVy"}),[String(r.OrderStatus.Canceled)]:a.fbt._("Canceled",null,{hk:"TK9cs"})};t.OrderStatusLabels=o},70490:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.validateURL=t.validateEmail=t.EMAIL_REGEX=void 0;var r=a(n(76139));const o=new RegExp(/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/);t.EMAIL_REGEX=o;t.validateEmail=e=>!e||o.test(e);t.validateURL=e=>!e||r.default.URL_REGEX.test(e)},79686:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.BusinessAddressField=function(e){let{businessProfile:t,activeField:n,rawBusinessProfile:a,sessionId:o,value:s,validate:c,error:f,lowProfile:h=!0,onActive:m,onChange:g,onSaveBusinessProfile:v,onError:x,onCancel:_}=e;const C=(0,u.jsx)(i.BusinessProfileFormField,{activeField:n,fieldKey:"address",fieldMetric:d.default.BUSINESS_PROFILE_FIELD.ADDRESS,formatForSave:()=>({address:s}),lowProfile:h,originalValue:t.address,placeholder:r.fbt._("Business Address",null,{hk:"HF4CB"}),rawBusinessProfile:a,sessionId:o,textFieldConfig:{maxLength:l.BUSINESS_PROFILE_FIELDS_LENGTH.ADDRESS},value:s,validate:c,error:f,onActive:m,onChange:g,onSaveBusinessProfile:v,onError:x,onCancel:_}),{latitude:y,longitude:b}=t,j=null!=y&&null!=b?(0,u.jsx)(p,{activeField:n,value:s,latitude:y,longitude:b}):null;return(0,u.jsxs)(u.Fragment,{children:[C,j]})};var r=n(48360),o=a(n(56720)),i=n(57597),l=n(93170),s=a(n(83452)),d=a(n(11339)),u=n(85893);const c={position:"g0rxnol2",display:"p357zi0d",alignItems:"gndfcl4n",justifyContent:"ac2vgrno",paddingTop:"ppypbuwx",paddingEnd:"fhfm09ip",paddingBottom:"s8gyl5p1",paddingStart:"mjn2akup",marginTop:"c6axuxzh",marginEnd:"jnwc1y2a",marginBottom:"mpdn4nr2",marginStart:"svoq16ka"},f={position:"lhggkp7q",top:"qq0sjtgm",right:"grt5ktjy",bottom:"jxacihee",left:"tukmaf4q",display:"p357zi0d",alignItems:"gndfcl4n",justifyContent:"ac2vgrno"},h={paddingTop:"fbgy3m38",paddingEnd:"bcymb0na",paddingBottom:"oq31bsqd",paddingStart:"e8k79tju",fontSize:"f8jlpxt4",color:"o4oavg8t",textTransform:"ofejerhi",backgroundColor:"o8fg3bdd",borderTop:"dl47i6rc",borderEnd:"pdo9fnbd",borderBottom:"n8n2xqzm",borderStart:"hqx4twni",borderTopStartRadius:"g1jn521u",borderTopEndRadius:"mrnekr2l",borderBottomEndRadius:"wu0i2wpa",borderBottomStartRadius:"bbs9k8l5"};function p(e){let{activeField:t,latitude:n,longitude:a,value:i}=e;const l="address"===(null==t?void 0:t.fieldKey)?(0,u.jsx)("div",{className:(0,o.default)(f),children:(0,u.jsx)("div",{className:(0,o.default)(h),children:r.fbt._("Edit map on mobile",null,{hk:"3AK8Fa"})})}):null;return(0,u.jsxs)("div",{style:{height:96},className:(0,o.default)(c),children:[l,(0,u.jsx)(s.default,{lat:n,lng:a,name:i,width:312,height:96})]})}},14124:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{businessHours:{note:t,timezone:n}}=e,[a,u]=(0,l.useState)(e.businessHours.mode||b),[c,f]=(0,l.useState)((()=>{const{days:t}=e.businessHours,n={};for(const{dayKey:e,closed:a,hours:r,dayName:o}of t)n[e]={closed:a,hours:r||[j()],dayKey:e,dayName:o};return n})),m=(e,t)=>{const n=c[e];f((0,o.default)((0,o.default)({},c),{},{[e]:(0,o.default)((0,o.default)({},n),t)}))},g=(e,t,n,a)=>{const r=[...e],o=n===y.START?0:1,i=[...r[a]];return i[o]=t,r[a]=i,r},M=(e,t,n,a)=>{const r=(0,_.isValidTime)(t)?null:" ";return(0,C.jsx)("div",{className:s.default.timeWrapper,children:(0,C.jsx)(v.TextInput,{managed:!0,value:t,theme:"small",maxLength:15,customStyleThemes:["desaturated","noErrorInfo"],error:r,onChange:t=>{const r=c[e],{hours:o}=r;m(e,{hours:g(o,t,n,a)})},onBlur:()=>{((e,t,n)=>{const a=c[e],{hours:r}=a,o=t===y.START?0:1,i=r[n][o],l=(0,x.timeStringToMinutes)(i);void 0!==l&&m(e,{hours:g(r,(0,x.minutesToTime)(l),t,n)})})(e,n,a)}})},`${e}-${n}-${a}`)},P=e=>{let{dayKey:t,hours:n}=e;const a=[],r=n.length>=2?(0,C.jsx)(k,{onClick:()=>{(e=>{const t=c[e],{hours:n}=t,a=[...n];a.pop(),m(e,{hours:a})})(t)}}):(0,C.jsx)(w,{onClick:()=>{(e=>{const t=c[e],{hours:n}=t;m(e,{hours:[...n,j()]})})(t)}});return n.forEach(((e,n)=>{let[r,o]=e;n>0&&a.push((0,C.jsx)("div",{className:s.default.hoursAnd,children:i.fbt._("and",null,{hk:"280Z25"})})),a.push(M(t,r,y.START,n),M(t,o,y.END,n))})),(0,C.jsxs)("div",{className:s.default.hoursMain,children:[a,r]})},I=e=>{const{closed:t}=e;let n;return t?n=i.fbt._("Closed",null,{hk:"3IRgct"}):a===d.BUSINESS_HOUR_MODES.APPOINTMENT_ONLY?n=i.fbt._("By appointment only",null,{hk:"e1vew"}):a===d.BUSINESS_HOUR_MODES.OPEN_24H&&(n=i.fbt._("Open 24 hours",null,{hk:"1AlfF5"})),n?(0,C.jsx)("div",{className:s.default.dayInfoText,children:n}):d.BUSINESS_HOUR_MODES.SPECIFIC_HOURS&&!e.closed?P(e):null},O=e=>{const{dayName:t}=e,n=S(e);return(0,C.jsxs)("div",{className:s.default.dayInfo,children:[(0,C.jsx)("label",{htmlFor:n,children:t}),I(e)]})},L=(()=>{const{businessHours:{days:t}}=e;return(0,C.jsxs)("div",{children:[(0,C.jsx)(T,{selectedMode:a,onSelect:e=>{u(e);const t={};if(a===d.BUSINESS_HOUR_MODES.OPEN_24H){for(const e of d.DAYS_OF_WEEK)t[e]=(0,o.default)((0,o.default)({},c[e]),{},{closed:!1});f(t)}}}),(0,C.jsx)("div",{className:s.default.editMain,children:t.map((e=>{let{dayKey:t}=e;const n=c[t];return a=n,(0,C.jsxs)("div",{className:s.default.dayMain,children:[(0,C.jsx)(E,{day:a,onChange:()=>{const{dayKey:e}=a,t=c[e];m(e,{closed:!t.closed})}}),O(a)]},`day-${a.dayKey}`);var a}))})]})})();return(0,C.jsx)(p.default,{title:i.fbt._("Edit Business Hours",null,{hk:"2zl0Ai"}),isValid:(0,_.isValidBusinessHours)(a,c),doSave:(0,r.default)((function*(){(0,h.qplStartProfileSave)("bizHours"),yield e.saveBusinessProfile((0,_.convertToRawBusinessProfile)({mode:a,dayValues:c,note:t,timezone:n}))})),afterSave:e.afterSave,onCancel:e.onCancel,children:L})};var r=a(n(48926)),o=a(n(81109)),i=n(48360),l=n(67294),s=a(n(56246)),d=n(93170),u=n(16593),c=a(n(72332)),f=a(n(14296)),h=n(82145),p=a(n(34544)),m=a(n(38932)),g=a(n(38801)),v=n(90011),x=n(78600),_=n(33572),C=n(85893);const y=n(76672).Mirrored(["START","END"]),b=d.BUSINESS_HOUR_MODES.SPECIFIC_HOURS,j=()=>[(0,x.minutesToTime)(540),(0,x.minutesToTime)(1080)],S=e=>{let{dayKey:t}=e;return`${t}_business_hours`};function E(e){let{day:t,onChange:n}=e;const{closed:a}=t,r=S(t);return(0,C.jsx)("div",{className:s.default.dayCheckbox,children:(0,C.jsx)(u.CheckBox,{id:r,checked:!a,onChange:n})})}function k(e){let{onClick:t}=e;return(0,C.jsx)("div",{className:s.default.timeWrapper,children:(0,C.jsx)(m.default,{title:f.default.t(555),"aria-label":f.default.t(555),name:"x-alt",onClick:t})})}function w(e){let{onClick:t}=e;return(0,C.jsx)("div",{className:s.default.timeWrapper,children:(0,C.jsx)(c.default,{"aria-label":i.fbt._("Add additional hours",null,{hk:"1RUQxq"}),label:i.fbt._("Add set of hours",null,{hk:"XYa8r"}),onClick:t,prefixIcon:"status-clock",iconTheme:"padded-svg"})})}function T(e){let{selectedMode:t,onSelect:n}=e;return(0,C.jsx)(g.default,{onSelect:n,selectedId:t,tabConfigs:[{title:i.fbt._("Selected Hours",null,{hk:"1EI8CI"}),id:d.BUSINESS_HOUR_MODES.SPECIFIC_HOURS},{title:i.fbt._("Always Open",null,{hk:"W2gxH"}),id:d.BUSINESS_HOUR_MODES.OPEN_24H},{title:i.fbt._("By Appointment",null,{hk:"nN1q9"}),id:d.BUSINESS_HOUR_MODES.APPOINTMENT_ONLY}]})}},33572:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isValidTime=t.isValidBusinessHours=t.convertToRawBusinessProfile=void 0;var a=n(93170),r=n(78600);const o=e=>void 0!==(0,r.timeStringToMinutes)(e);t.isValidTime=o;t.isValidBusinessHours=(e,t)=>{if(e===a.BUSINESS_HOUR_MODES.SPECIFIC_HOURS)for(const e in t){const n=t[e],{closed:a,hours:r}=n;if(!a)for(const[e,t]of r)if(!o(e)||!o(t))return!1}return!0};t.convertToRawBusinessProfile=e=>{let{mode:t,dayValues:n,note:o,timezone:i}=e;const l={};for(const e in n){const o=n[e],{closed:i,hours:s}=o;if(!i){const n={mode:t};t===a.BUSINESS_HOUR_MODES.SPECIFIC_HOURS&&(n.hours=s.map((e=>{let[t,n]=e;return[(0,r.timeStringToMinutes)(t)||0,(0,r.timeStringToMinutes)(n)||0]}))),l[e]=n}}return{businessHours:{config:l,note:o,timezone:i||Intl.DateTimeFormat().resolvedOptions().timeZone}}}},57597:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.BusinessProfileFormField=function(e){let{activeField:t,error:n,fieldKey:a,fieldMetric:u,formatForSave:c,lowProfile:f,originalValue:h,placeholder:p,rawBusinessProfile:m,sessionId:g,startActive:v,textFieldConfig:x,validate:_,value:C,onActive:y,onChange:b,onError:j,onSaveBusinessProfile:S,onCancel:E}=e;const k=(null==t?void 0:t.fieldKey)===a,w=C?void 0:p;return(0,d.jsx)(s.TextInput,(0,r.default)({value:C,editable:!t||k,pending:k&&(null==t?void 0:t.editType)===o.EditType.PENDING,showRemaining:!0,onBeginEdit:()=>{null!=g&&(0,i.logProfileFieldOpen)(u,m,g),y({fieldKey:a,editType:o.EditType.EDITING})},onChange:b,onSave:()=>{(0,l.qplStartProfileSave)(a),null!=g&&(0,i.logProfileFieldSave)(u,m,g),y({fieldKey:a,editType:o.EditType.PENDING}),S(c()).then((()=>{y()}),(()=>{y()}))},onCancel:()=>{null!=g&&(0,i.logProfileFieldDiscard)(u,m,g),b(h),y(),null==E||E()},lockable:!0,lowProfile:f,multiline:!0,inputPlaceholder:w,theme:"text-input",validate:_,onError:j,error:n,a8n:`biz-profile-${a}-input`,fieldName:p,startActive:v},x))};var r=a(n(81109)),o=n(26777),i=n(30426),l=n(82145),s=(a(n(11339)),n(90011)),d=n(85893)},70656:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const[t,n]=(0,u.useState)(e.initialCategories),[a,r]=(0,u.useState)(!1),[i,s]=(0,u.useState)(!1),[c,m]=(0,u.useState)([]),[v,x]=(0,u.useState)(""),_=()=>{l.ToastManager.open((0,k.jsx)(E.Toast,{id:(0,E.genId)(),msg:d.fbt._('You cannot select categories when you have selected "Not a Business"',null,{hk:"12A4L0"})}))},S=e=>{for(let n=0;n<t.length;n++)if(t[n].id===e)return!0;return!1},w=e=>{const a=t.find((e=>e.id===v));let r=t;t.length>0&&(e.not_a_biz&&!a?(r=[],_()):!e.not_a_biz&&a&&(r=t.filter((e=>e.id!==a.id)),_())),S(e.id)?n(r.filter((t=>t.id!==e.id))):n([...r,e])},T=t=>{s(!0),e.searchCategories(t||f.BUSINESS_CATEGORY_EMPTY_STR_ID).then((e=>{let n=e.categories;""!==t&&(n=n.filter((e=>!e.not_a_biz))),s(!1),m(n),x(e.notABizId),(0,y.qplAnnotateProfileCatsView)(n.length),(0,y.qplEndProfileCatsView)(b.QuickLogActionType.SUCCESS)})).catch((()=>{l.ToastManager.open((0,k.jsx)(E.Toast,{id:(0,E.genId)(),msg:d.fbt._("Something went wrong.",null,{hk:"2Cx5Nt"})})),s(!1),m([]),x(""),(0,y.qplEndProfileCatsView)(b.QuickLogActionType.FAIL)}))};return(0,u.useEffect)((()=>{T("")}),[]),(0,k.jsxs)(j.default,{title:d.fbt._("Choose up to three categories",null,{hk:"17Tmht"}),isValid:t.length>0,doSave:(0,o.default)((function*(){(0,y.qplStartProfileSave)("categories"),yield e.saveBusinessProfile({categories:t})})),afterSave:()=>{r(!0),e.afterSave()},onCancel:()=>{r(!0),e.onCancel()},children:[(0,k.jsx)("div",{className:p.default.searchBackground,children:(0,k.jsx)(C.default,{onSearch:e=>{i||a||((0,y.qplStartProfileCatsView)("Search"),T(e))},placeholder:d.fbt._("Search categories",null,{hk:"4zfNoj"})})}),(0,k.jsxs)("div",{className:p.default.editMain,children:[(0,k.jsx)("div",{className:p.default.list,children:(0,k.jsx)(M,{isLoading:i,results:c,isSelected:S,isDisabled:e=>!e.not_a_biz&&!S(e.id)&&t.length>=h.MAX_BUSINESS_CATEGORIES,toggleResultById:e=>{const t=c.filter((t=>t.id===e))[0];t&&w(t)}})}),t&&(0,k.jsx)(g.default,{categories:t,onRemoveItem:e=>{const n=t.filter((t=>t.id===e))[0];n&&w(n)}})]})]})};var r=a(n(81109)),o=a(n(48926)),i=a(n(99964)),l=n(94816),s=a(n(94184)),d=n(48360),u=n(67294),c=a(n(16223)),f=n(32742),h=n(48018),p=a(n(4830)),m=n(16593),g=a(n(98001)),v=n(47915),x=a(n(44942)),_=a(n(30855)),C=a(n(48837)),y=n(82145),b=n(48870),j=a(n(34544)),S=n(11054),E=n(50452),k=n(85893);function w(e){let{category:t,toggleResultById:n}=e;return(0,k.jsxs)("div",{className:p.default.rowMain,children:[(0,k.jsx)("div",{className:p.default.rowCheckbox,children:(0,k.jsx)(m.CheckBox,{id:`${t.id}`,onChange:()=>{!t.disabled&&n(t.id)},checked:t.selected,disabled:t.disabled})}),(0,k.jsx)("label",{"data-a8n":i.default.key("category-list-item"),className:(0,s.default)(p.default.rowLabel,{[p.default.disabled]:t.disabled}),htmlFor:t.id,children:t.localized_display_name})]})}function T(e){let{label:t}=e;return(0,k.jsxs)("div",{className:p.default.rowMain,children:[(0,k.jsx)("div",{className:p.default.rowCheckbox}),t]})}function M(e){let{isLoading:t,results:n,isSelected:a,isDisabled:o,toggleResultById:i}=e;const l=(0,c.default)((()=>new _.default));if(t)return(0,k.jsx)("div",{className:p.default.loadingSpinner,children:(0,k.jsx)(S.Spinner,{color:"highlight",size:44,stroke:6})});if(!n||0===n.length)return(0,k.jsx)(T,{label:d.fbt._("No categories found",null,{hk:"2xfbJX"})});const s=n.map((e=>(0,r.default)((0,r.default)({},e),{},{id:e.id,itemKey:e.id.toString(),disabled:o(e),selected:a(e.id)})));return(0,k.jsx)(x.default,{flatListControllers:[l.current],children:(0,k.jsx)(v.FlatList,{data:s,flatListController:l.current,direction:"vertical",renderItem:e=>(0,k.jsx)(w,{category:e,toggleResultById:i}),defaultItemHeight:48})})}},30923:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{businessProfile:t,saveBusinessProfile:n,sessionId:a}=e;const[r,o]=(0,h.useState)(),[s,m]=(0,h.useState)(),[E,k]=(0,h.useState)(),[P,B]=(0,h.useState)(),[z,W]=(0,h.useState)(),[q,V]=(0,h.useState)(),[Y,K]=(0,h.useState)(),[Q,X]=(0,h.useState)(),[Z,J]=(0,h.useState)(),[$,ee]=(0,h.useState)(!1),te=(0,u.getMeUser)(),ne=(0,i.canSeeECommerceComplianceIndiaHardEnforcementBusinessJourney)(te.user),[ae,re]=(0,h.useState)();(0,h.useEffect)((()=>{const e=(0,A.convertRawBusinessProfile)(t);o(e.description),k(e.email),m(e.address),B(e.primaryWebsite),W(e.secondaryWebsite),V(Boolean(e.primaryWebsite&&!e.secondaryWebsite))}),[t]),(0,h.useEffect)((()=>{(0,c.validateEmail)(E)&&K(null)}),[E]),(0,h.useEffect)((()=>{(0,c.validateURL)(P)&&X(null)}),[P]),(0,h.useEffect)((()=>{(0,c.validateURL)(z)&&J(null)}),[z]);const oe=()=>{const e=[];return P&&e.push(P),z&&e.push(z),{website:e.map(((e,t)=>{if(!d.default.isHttps(e)&&!d.default.isHttp(e)){const n=`https://${e}`;return 0===t?B(n):W(n),n}return e}))}},ie=(0,h.useCallback)((()=>ne?(0,x.default)():void 0),[ne]),le=(0,A.convertRawBusinessProfile)(t);let se,de,ue=f.fbt._("Business Information",null,{hk:"36RGyI"});(0,i.canSeeBizProfileV3)()&&(ue=null,se=T.default.noPaddingTop);null!=t.customUrlPaths&&t.customUrlPaths.length>0&&(0,i.isSmbMelonDisplayEnabled)()&&(de=(0,D.jsx)(H,{url:`${C.BUSINESS_URL_DOMAIN}${t.customUrlPaths[0]}`,activeField:ae}));return(0,D.jsxs)(w.default,{title:ue,theme:"refresh",className:se,children:[(0,D.jsx)(G,{activeField:ae}),de,(0,D.jsx)(U,{config:{icon:"business-description",content:(0,D.jsx)(y.BusinessProfileFormField,{activeField:ae,fieldKey:"description",fieldMetric:L.default.BUSINESS_PROFILE_FIELD.DESCRIPTION,formatForSave:()=>({description:r}),lowProfile:!0,originalValue:le.description,placeholder:f.fbt._("Business Description",null,{hk:"2Q2DP8"}),rawBusinessProfile:t,sessionId:a,textFieldConfig:{maxLength:b.BUSINESS_PROFILE_FIELDS_LENGTH.DESCRIPTION,supportsEmoji:!0},value:r,onActive:re,onChange:o,onSaveBusinessProfile:n})},activeField:ae}),(0,D.jsx)(U,{config:{icon:"business-category",type:"container",emptyText:f.fbt._("Categories",null,{hk:"2YgYDL"}),content:0===le.categories.length?null:(0,D.jsx)(F,{categories:le.categories}),fieldName:f.fbt._("Categories",null,{hk:"2YgYDL"}),onEdit:()=>{(0,O.qplStartProfileCatsView)("Profile"),(0,I.logProfileFieldOpen)(L.default.BUSINESS_PROFILE_FIELD.CATEGORY,t,a),l.ModalManager.open((0,D.jsx)(j.default,{initialCategories:le.categories,saveBusinessProfile:n,searchCategories:e=>v.BusinessCategoriesResultCollection.find(e),afterSave:()=>(0,I.logProfileFieldSave)(L.default.BUSINESS_PROFILE_FIELD.CATEGORY,t,a),onCancel:()=>{(0,I.logProfileFieldDiscard)(L.default.BUSINESS_PROFILE_FIELD.CATEGORY,t,a)}}))}},activeField:ae}),(0,D.jsx)(U,{config:{icon:"business-address",content:(0,D.jsx)(g.BusinessAddressField,{businessProfile:le,activeField:ae,rawBusinessProfile:t,sessionId:a,value:s,onActive:re,onChange:m,onSaveBusinessProfile:n,validate:e=>(0,S.existsField)(e,te),onError:ie})},activeField:ae}),(0,D.jsx)(U,{config:{icon:"business-hours",type:"container",emptyText:f.fbt._("Business Hours",null,{hk:"1bV20v"}),content:null==le.hours.mode?null:(0,D.jsx)(N,{hours:le.hours}),fieldName:f.fbt._("Business Hours",null,{hk:"1bV20v"}),onEdit:()=>{(0,I.logProfileFieldOpen)(L.default.BUSINESS_PROFILE_FIELD.HOURS,t,a),l.ModalManager.open((0,D.jsx)(_.default,{businessHours:le.hours,saveBusinessProfile:n,onCancel:()=>{(0,I.logProfileFieldDiscard)(L.default.BUSINESS_PROFILE_FIELD.HOURS,t,a)},afterSave:()=>(0,I.logProfileFieldSave)(L.default.BUSINESS_PROFILE_FIELD.HOURS,t,a)}))}},activeField:ae}),(0,D.jsx)(U,{config:{icon:"business-email",content:(0,D.jsx)(y.BusinessProfileFormField,{activeField:ae,error:Y,fieldKey:"email",fieldMetric:L.default.BUSINESS_PROFILE_FIELD.EMAIL,formatForSave:()=>({email:E}),lowProfile:!1,originalValue:le.email,placeholder:f.fbt._("Email Address",null,{hk:"5tSKT"}),rawBusinessProfile:t,sessionId:a,textFieldConfig:{maxLength:b.BUSINESS_PROFILE_FIELDS_LENGTH.EMAIL},validate:e=>(0,c.validateEmail)(e),value:E,onActive:re,onChange:k,onError:()=>{K(f.fbt._("Incorrect email address format",null,{hk:"1KuwvT"}))},onSaveBusinessProfile:n})},activeField:ae}),(e=>{const r=(0,D.jsx)(y.BusinessProfileFormField,{activeField:ae,error:Q,fieldKey:"primaryWebsite",fieldMetric:L.default.BUSINESS_PROFILE_FIELD.WEBSITE,formatForSave:oe,lowProfile:!1,originalValue:e.primaryWebsite,placeholder:f.fbt._("Website",null,{hk:"2HRvqj"}),rawBusinessProfile:t,sessionId:a,textFieldConfig:{maxLength:b.BUSINESS_PROFILE_FIELDS_LENGTH.WEBSITE},validate:c.validateURL,value:P,onActive:re,onChange:B,onError:()=>{X(f.fbt._("URL is incorrect",null,{hk:"xiOtm"}))},onSaveBusinessProfile:n});return(0,D.jsx)(U,{config:{icon:"business-website",theme:M.IconSectionTheme.SmallMargin,content:(0,D.jsx)("div",{children:r})},activeField:ae})})(le),(e=>{if(!e.primaryWebsite)return null;if(z||!q){const r=(0,D.jsx)(y.BusinessProfileFormField,{activeField:ae,error:Z,fieldKey:"secondaryWebsite",fieldMetric:L.default.BUSINESS_PROFILE_FIELD.WEBSITE,formatForSave:oe,lowProfile:!1,originalValue:e.secondaryWebsite,placeholder:f.fbt._("Website",null,{hk:"2HRvqj"}),rawBusinessProfile:t,sessionId:a,startActive:$,textFieldConfig:{maxLength:b.BUSINESS_PROFILE_FIELDS_LENGTH.WEBSITE},validate:c.validateURL,value:z,onActive:re,onChange:W,onError:()=>{J(f.fbt._("URL is incorrect",null,{hk:"xiOtm"}))},onSaveBusinessProfile:n});return(0,D.jsx)(U,{config:{icon:"business-website",theme:M.IconSectionTheme.NoMargin,content:(0,D.jsx)("div",{children:r})},activeField:ae})}const r=(0,D.jsx)("button",{className:(0,p.default)(R.addAnotherWebsite),onClick:()=>{V(!1),ee(!0)},children:f.fbt._("Add another website",null,{hk:"1HOyZt"})});return(0,D.jsx)(U,{config:{theme:M.IconSectionTheme.NoMargin,content:(0,D.jsx)("div",{children:r})},activeField:ae})})(le)]})};var r=a(n(81109)),o=a(n(99964)),i=n(8139),l=n(14597),s=n(28298),d=a(n(76139)),u=n(78820),c=n(70490),f=n(48360),h=n(67294),p=a(n(56720)),m=n(35461),g=n(79686),v=n(3754),x=a(n(22635)),_=a(n(14124)),C=n(48018),y=n(57597),b=n(93170),j=a(n(70656)),S=n(83657),E=a(n(52665)),k=n(17239),w=a(n(33308)),T=a(n(73308)),M=n(84287),P=a(n(14296)),I=n(30426),O=n(82145),L=a(n(11339)),A=n(28826),D=n(85893);const R={addAnotherWebsite:{color:"ky3f94nk",fontSize:"f8jlpxt4",textTransform:"ofejerhi"},businessHoursDayColumn:{flexGrow:"gj6qtt9u",flexShrink:"m0h2a7mj",flexBasis:"rjo8vgbg",textTransform:"aprpv14t"},businessHoursSection:{display:"p357zi0d"},businessHoursTimeColumn:{flexGrow:"a6lcuizr",flexShrink:"m0h2a7mj",flexBasis:"rjo8vgbg"},infoText:{color:"t35qvd06",fontSize:"dsh4tgtl",lineHeight:"jgi8eev7",marginTop:"dkeqio29"},bizUrl:{wordBreak:"m1c2hokz"}};function N(e){let{hours:{mode:t,days:n}}=e;return null==t?null:(0,D.jsx)("div",{children:n.map(((e,n)=>{let{dayName:a,dayKey:r,closed:i,hours:l}=e;return(0,D.jsxs)("div",{className:(0,p.default)(R.businessHoursSection,0!==n&&s.uiMargin.top28),"data-a8n":o.default.key("business-hours-section-row"),children:[(0,D.jsx)("div",{className:(0,p.default)(R.businessHoursDayColumn),children:a}),(0,D.jsx)("div",{className:(0,p.default)(R.businessHoursTimeColumn),children:(0,D.jsx)(B,{mode:t,closed:i,hours:l})})]},r)}))})}function B(e){let{mode:t,closed:n,hours:a}=e;if(n)return f.fbt._("Closed",null,{hk:"3IRgct"});switch(t){case b.BUSINESS_HOUR_MODES.SPECIFIC_HOURS:return(0,D.jsx)(D.Fragment,{children:a&&a.map(((e,t)=>{let[n,a]=e;return(0,D.jsxs)("div",{className:(0,p.default)(0!==t&&s.uiMargin.top16),"data-a8n":o.default.key("business-hours-time"),children:[n," - ",a]},t)}))});case b.BUSINESS_HOUR_MODES.APPOINTMENT_ONLY:return f.fbt._("By appointment only",null,{hk:"e1vew"});case b.BUSINESS_HOUR_MODES.OPEN_24H:return f.fbt._("Open 24 hours",null,{hk:"1AlfF5"});default:return null}}function F(e){let{categories:t}=e;return 0===t.length?null:(0,D.jsx)("div",{"data-a8n":o.default.key("biz-profile-category-input"),children:t.map((e=>e.localized_display_name)).join(P.default.t(257))})}function U(e){let{config:t,activeField:n}=e;return(0,D.jsx)(M.IconSection,(0,r.default)((0,r.default)({},t),{},{hideEditIcon:Boolean(n)}))}function G(e){let{activeField:t}=e;const{pushname:n}=(0,m.useModelValues)(k.Conn,["pushname"]);if(null==n)return null;const a=(0,i.canSeeBizProfileV3)()?M.IconSectionTheme.NoMargin:void 0;return(0,D.jsx)(U,{config:{theme:a,icon:"account-box",iconClass:T.default.verifiedNameIcon,content:(0,D.jsxs)("div",{children:[(0,D.jsx)("div",{children:n}),(0,D.jsx)("div",{className:(0,p.default)(R.infoText),children:f.fbt._("This name will be visible to your WhatsApp customers and can be edited from the app on your mobile device.",null,{hk:"1y9lc"})})]})},activeField:t})}function H(e){let{url:t,activeField:n}=e;return null==t?null:(0,D.jsx)(U,{config:{icon:"business-website",iconClass:T.default.verifiedNameIcon,onEdit:()=>{l.ModalManager.open((0,D.jsx)(E.default,{okText:f.fbt._("OK",null,{hk:"2KEeHb"}),onOK:()=>l.ModalManager.close(),children:f.fbt._("This url will be visible to your WhatsApp customers and can be edited from the app on your mobile device.",null,{hk:"rhTNH"})}))},content:(0,D.jsx)("div",{className:R.bizUrl,children:t}),fieldName:f.fbt._("Custom URL",null,{hk:"FmWY1"})},activeField:n})}},26777:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoadType=t.EditType=void 0;const a=n(76672).Mirrored(["EDITING","PENDING","DONE","ERROR"]);t.EditType=a;const r=n(76672).Mirrored(["PENDING","DONE","ERROR"]);t.LoadType=r},44281:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const[e,t]=(0,l.useState)(p.LoadType.PENDING),[n,a]=(0,l.useState)(),o=(0,l.useRef)(Math.floor(2147483648*Math.random()).toString()),d=function(){var e=(0,r.default)((function*(){t(p.LoadType.PENDING);try{const e=yield E();a(e),t(p.LoadType.DONE),(0,x.logProfileOpen)(e,o.current)}catch(e){t(p.LoadType.ERROR)}}));return function(){return e.apply(this,arguments)}}();if((0,l.useEffect)((()=>{d()}),[]),e===p.LoadType.PENDING)return(0,j.jsx)("div",{className:(0,s.default)(S.loadingSpinner),children:(0,j.jsx)(y.Spinner,{color:"default",size:24,stroke:6})});if(e===p.LoadType.ERROR)return(0,j.jsx)(f.default,{title:i.fbt._("Business Information",null,{hk:"36RGyI"}),theme:"refresh",children:(0,j.jsxs)(m.FlexRow,{align:"center",justify:"center",children:[(0,j.jsx)(g.default,{children:v.default.t(160)}),(0,j.jsx)(g.default,{xstyle:S.retryButton,children:(0,j.jsx)(c.default,{onClick:()=>{d()},type:"simplified",children:i.fbt._("Retry",null,{hk:"2jS9Tg"})})})]})});if(e===p.LoadType.DONE&&n)return(0,j.jsx)(h.default,{sessionId:o.current,businessProfile:n,saveBusinessProfile:function(){var e=(0,r.default)((function*(e){try{yield(0,u.editBusinessProfile)(e)}catch(e){throw(0,b.showError)(v.default.t(161)),(0,_.qplEndProfileSave)(C.QuickLogActionType.FAIL),__LOG__(3,void 0,void 0,!0)`business_profile:edit_form save failed`,SEND_LOGS(`businessProfile edit handled server error - ${e.status}`),e}try{const e=yield k();return a(e),(0,_.qplEndProfileSave)(C.QuickLogActionType.SUCCESS),e}catch(e){throw(0,b.showError)(v.default.t(160)),(0,_.qplEndProfileSave)(C.QuickLogActionType.FAIL),e}}));return function(){return e.apply(this,arguments)}}()});return null};var r=a(n(48926)),o=n(78820),i=n(48360),l=n(67294),s=a(n(56720)),d=n(93581),u=n(33866),c=a(n(39770)),f=a(n(33308)),h=a(n(30923)),p=n(26777),m=n(29623),g=a(n(48846)),v=a(n(14296)),x=n(30426),_=n(82145),C=n(48870),y=n(11054),b=n(29283),j=n(85893);const S={retryButton:{height:"epwkujcx",marginStart:"nzcjdldu"},loadingSpinner:{display:"p357zi0d",alignItems:"gndfcl4n",justifyContent:"ac2vgrno",height:"ppled2lx",paddingTop:"i5tg98hk",paddingEnd:"f9ovudaz",paddingBottom:"przvwfww",paddingStart:"gx1rr48f"}},E=function(){var e=(0,r.default)((function*(){const e=(0,o.getMeUser)(),t=d.BusinessProfileCollection.get(e);t&&t.markStale();return(yield d.BusinessProfileCollection.find(e)).serialize()}));return function(){return e.apply(this,arguments)}}(),k=function(){var e=(0,r.default)((function*(){const e=(0,o.getMeUser)(),t=yield d.BusinessProfileCollection.update(e);return(Array.isArray(t)?t[0]:t).serialize()}));return function(){return e.apply(this,arguments)}}()},28826:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertRawBusinessProfile=void 0;var a=n(26316);t.convertRawBusinessProfile=e=>{const{description:t,email:n,address:r,website:o,categories:i,businessHours:l,latitude:s,longitude:d}=e,[u,c]=o||[];return{description:t,email:n,address:r,primaryWebsite:u,secondaryWebsite:c,hours:(0,a.getBusinessHoursForEdit)(l),categories:i||[],latitude:s,longitude:d}}},29283:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showError=void 0;var a=n(94816),r=n(50452),o=n(85893);t.showError=e=>{a.ToastManager.open((0,o.jsx)(r.Toast,{msg:e,duration:6e3,id:(0,r.genId)()}))}},44189:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.CartDetailDrawer=function(e){const{onBack:t,sellerJid:n,chat:a,closeDrawerRightOnSend:l,onProductCatalog:s,onProductDetail:f,isPushed:b=!0}=e,k=(0,p.useContext)(M.DrawerContext),{theme:O}=(0,p.useContext)(Y.ThemeContext),L=(0,p.useMemo)((()=>y.CartCollection.findCart(n)),[n]),B=(0,p.useRef)(null),H=(0,p.useRef)(null),X=(0,g.default)((()=>new o.PromiseQueue)),$=(0,g.default)((()=>new I.default)),[ee,te]=(0,p.useState)(!0),[ne,ae]=(0,p.useState)(void 0),[re,oe]=(0,p.useState)([]),[ie,le]=(0,p.useState)(L.message),se=function(){var e=(0,r.default)((function*(e){const[t,n]=yield Promise.all([e?(0,U.default)(L,b):Promise.resolve(),x.BusinessProfileCollection.find(a.id)]);t&&(H.current=t);const r=(0,N.matchCartItemsToProducts)(L,H.current);te(!1),ae(n),oe(r)}));return function(){return e.apply(this,arguments)}}();(0,v.useListener)(L,"change:cartItemCollection",(()=>{X.current.enqueue((()=>se()))})),(0,p.useEffect)((()=>{let e=!0;b&&(0,R.qplAnnotateCartView)(L.id.toString()!==n,L.itemCount),se(!0,b).then((()=>{e=!1,b&&(0,R.qplEndCartView)(G.QuickLogActionType.SUCCESS),(0,D.logCartListImpression)(L.id.toString(),(0,F.getProductCatalogContext)(k))})).catch((()=>{__LOG__(4,!0,new Error,!0)`Unable to open the cart`,SEND_LOGS("openCart: failed to open the cart"),(0,z.default)(),(0,S.default)(L)})).finally((()=>{e&&b&&(0,R.qplEndCartView)(G.QuickLogActionType.FAIL),te(!1)}))}),[]);return(0,Q.jsxs)(w.default,{onDrop:t,theme:"striped",children:[(0,Q.jsx)(P.DrawerHeader,{title:h.fbt._("Your cart",null,{hk:"Sn66V"}),type:P.DRAWER_HEADER_TYPE.SMALL,onBack:t}),(0,Q.jsx)(T.default,{flatListControllers:[$.current],children:(0,Q.jsx)(J,{isLoading:ee,cart:L,messageInputRef:B,chat:a,onSend:()=>{te(!0),(0,R.qplStartOrderCreate)(re.length),(0,W.default)(L,a).then((e=>{const n=Boolean(L.message);(0,A.logSendOrderMessage)({orderId:e,catalogOwnerJid:L.id,catalogContext:(0,F.getProductCatalogContext)(k),isOrderMsgAttached:n,quantity:L.itemCount}),(0,u.commerceThreadsLoggingEnabled)()&&(0,j.addChatThreadLoggingActivities)([{activityType:"ordersSent",ts:(0,i.unixTime)(),chatId:a.id}]),t(),(0,S.default)(L),L.message=void 0,l&&d.DrawerManager.existsDrawerRight((e=>{e&&d.DrawerManager.closeDrawerRight()})),(0,R.qplEndOrderCreate)(G.QuickLogActionType.SUCCESS)})).catch((()=>{__LOG__(4,!0,new Error,!0)`Unable to create catalog order`,SEND_LOGS("submitOrder: order creation or order message send error"),(0,z.default)(),se(!0),(0,R.qplEndOrderCreate)(G.QuickLogActionType.FAIL)})).finally((()=>{te(!1)}))},onChange:e=>{le(e),(0,K.default)(L,e)},onMaxPasteExceeded:()=>{c.ModalManager.open((0,Q.jsx)(E.default,{title:h.fbt._("Message Too Long",null,{hk:"3CMbLA"}),onOK:()=>{c.ModalManager.close()},okText:h.fbt._("OK",null,{hk:"2KEeHb"}),children:h.fbt._("The message youre pasting is too long. Try shortening it or sending it as a separate message.",null,{hk:"9VR0L"})}))},cartMessage:ie,emptyCartContent:()=>(0,Q.jsxs)("div",{className:(0,m.default)(Z.emptyCartContainer),children:[(0,Q.jsx)(q.default,{name:"shopping-cart-empty"}),(0,Q.jsx)(V.TextDiv,{xstyle:Z.emptyCardHeader,theme:"large",children:h.fbt._("Add items to your cart",null,{hk:"411bLF"})}),(0,Q.jsx)(V.TextDiv,{xstyle:Z.emptyCardText,theme:"plain",children:h.fbt._("Collect all the items you're interested in here and then send them to the business. Use your cart to ask about buying, customizing, delivery, or anything you want.",null,{hk:"2L1JTk"})}),(0,_.hasCatalog)(ne)&&(0,Q.jsx)(C.default,{onClick:s,type:"primary",children:h.fbt._("View catalog",null,{hk:"1bDXja"})})]}),cartFlatListControllerRef:$,onProductDetail:f,sellerJid:n,cartProductItems:re,isDarkTheme:"dark"===O})})]})};var r=a(n(48926)),o=n(27870),i=n(92844),l=a(n(99964)),s=a(n(64369)),d=n(41455),u=n(8139),c=n(14597),f=a(n(40436)),h=n(48360),p=n(67294),m=a(n(56720)),g=a(n(16223)),v=n(87550),x=n(93581),_=n(94010),C=a(n(39770)),y=n(12392),b=a(n(38778)),j=n(32107),S=a(n(74220)),E=a(n(52665)),k=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=X(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(n(39519)),w=a(n(60453)),T=a(n(69637)),M=n(27394),P=n(94790),I=a(n(30855)),O=a(n(29796)),L=a(n(14296)),A=n(79544),D=n(41868),R=n(82145),N=n(79495),B=a(n(3028)),F=n(97567),U=a(n(9186)),G=n(48870),H=n(82857),z=a(n(50247)),W=a(n(53109)),q=a(n(23217)),V=n(13923),Y=n(97628),K=a(n(51383)),Q=n(85893);function X(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(X=function(e){return e?n:t})(e)}const Z={emptyCartContainer:{display:"p357zi0d",flexDirection:"f8m0rgwh",alignItems:"gndfcl4n",height:"ppled2lx",paddingTop:"gq7nj7y3",paddingEnd:"td5bf8pq",paddingBottom:"eynyaxvo",paddingStart:"l3k7h4x6",backgroundColor:"ihvf49ua"},emptyCardHeader:{marginTop:"nylzjxre",marginEnd:"jnwc1y2a",marginBottom:"pz0xruzv",marginStart:"svoq16ka"},emptyCardText:{marginBottom:"bvhm1occ",textAlign:"qfejxiq4"},cartMessage:{zIndex:"mb8var44",display:"p357zi0d",flexDirection:"f8m0rgwh",width:"ln8gz9je",marginBottom:"mggyuyyy"},btnSend:{position:"lhggkp7q",end:"h223g3sc",bottom:"kyr91zaj",zIndex:"b9fczbqn",paddingTop:"i5tg98hk",paddingEnd:"f9ovudaz",paddingBottom:"przvwfww",paddingStart:"gx1rr48f",marginTop:"tt8xd2xn",marginEnd:"jnwc1y2a",marginBottom:"mpdn4nr2",marginStart:"svoq16ka",color:"svlsagor",textAlign:"qfejxiq4",opacity:"axi1ht8l"},info:{paddingTop:"a71rq12o",paddingEnd:"tcyu26xv",paddingBottom:"pcbmd69e",paddingStart:"i8b31kl9",backgroundColor:"ihvf49ua"},footer:{position:"g0rxnol2",zIndex:"b9fczbqn",boxSizing:"cm280p3y",display:"p357zi0d",alignItems:"gndfcl4n",justifyContent:"ac2vgrno",paddingTop:"n1yiu2zv",paddingEnd:"iffbo4e8",paddingBottom:"eb4rp10x",paddingStart:"khscay3k",backgroundColor:"ihvf49ua"},footerDark:{backgroundColor:"emqjox7q"}};function J(e){const{isLoading:t,cart:n,messageInputRef:a,chat:r,onSend:o,onChange:i,onMaxPasteExceeded:d,cartMessage:u,emptyCartContent:c,cartFlatListControllerRef:p,onProductDetail:g,sellerJid:v,cartProductItems:x,isDarkTheme:_}=e;if(t)return(0,Q.jsx)(O.default,{});const C=n.itemCount,y=C>0;let j,S;if(y){const e=L.default.t(395,{count:C,_plural:C});j=(0,Q.jsx)(V.TextDiv,{theme:"title",children:e})}null!=n.total&&null!=n.currency?S=(0,Q.jsx)(V.TextDiv,{theme:"muted-small",children:L.default.t(535,{subtotal:k.formatAmount1000(n.currency,n.total)})}):C>0&&(S=(0,Q.jsx)(V.TextDiv,{theme:"muted-small",children:h.fbt._("Ask for total",null,{hk:"3qm9mR"})}));const E=(0,Q.jsx)(f.default,{transitionName:"media-caption",className:(0,m.default)(Z.cartMessage),children:(0,Q.jsx)(B.default,{ref:a,chat:r,maxLength:s.default.MAX_CART_MESSAGE_LENGTH,multiline:!0,onEnter:o,onChange:i,onMaxPasteExceeded:d,placeholder:h.fbt._("Add a message",null,{hk:"4drJT1"}),showRemaining:!0,spellCheck:!0,supportsEmoji:!0,value:u})}),w=(0,Q.jsx)("button",{"data-a8n":l.default.key("cart-send-button"),className:(0,m.default)(Z.btnSend),tabIndex:"-1",onClick:o,title:h.fbt._("Send a cart",null,{hk:"37qP8u"}),children:(0,Q.jsx)(H.Round,{large:!0,children:(0,Q.jsx)(q.default,{name:"send",directional:!0})})});return(0,Q.jsxs)(Q.Fragment,{children:[!y&&c(),(0,Q.jsxs)("div",{className:(0,m.default)(Z.info),children:[j,S]}),(0,Q.jsx)(b.default,{flatListController:p.current,onProductDetail:g,cart:n,sellerJid:v,cartProductItems:x}),y&&(0,Q.jsxs)("div",{className:(0,m.default)(Z.footer,_&&Z.footerDark),children:[E,(0,Q.jsx)(f.default,{transitionAppear:!0,transitionName:"btn",children:w})]})]})}},38778:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{cartProductItems:t,onProductDetail:n,sellerJid:a}=e;return(0,d.jsx)(s.default,{flatListControllers:[e.flatListController],children:(0,d.jsx)(l.FlatList,{flatListController:e.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:t.map((e=>({itemKey:e.cartItem.id,contentKey:(0,r.default)("cartItem"),product:e.product,cartItem:e.cartItem}))),renderItem:e=>(0,d.jsx)(o.default,{cartId:a,product:e.product,quantity:e.cartItem.quantity,onClick:()=>n({productId:e.cartItem.id,businessOwnerJid:a})}),defaultItemHeight:i.PRODUCT_LIST_ITEM_HEIGHT})})};var r=a(n(73955)),o=a(n(30068)),i=n(64481),l=n(47915),s=a(n(44942)),d=n(85893)},30068:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const{cartId:n,product:a,quantity:i,onClick:s}=e,d=(0,v.jsx)(c.EmojiText,{text:a.name,ellipsify:!0,titlify:!0}),u=null===(t=a.getPreviewImage())||void 0===t?void 0:t.mediaData;let f;f=u?(0,v.jsx)(m.ProductThumb,{theme:"list",mediaData:u}):(0,v.jsx)(v.Fragment,{});const h=(0,v.jsx)(p.default,{className:o.default.price,product:a,fallback:r.fbt._("Ask for price",null,{hk:"2Rtbeg"})});return(0,v.jsx)(l.default,{image:f,customImage:!0,primary:d,secondary:h,theme:"cart-product",onClick:s,detail:(0,v.jsx)(x,{cartId:n,cartProduct:a,quantity:i}),className:o.default.cartListItem},a.id.toString())};var r=n(48360),o=a(n(10476)),i=a(n(39864)),l=a(n(44356)),s=a(n(52814)),d=a(n(72921)),u=n(27394),c=n(65417),f=n(41868),h=n(97567),p=a(n(62089)),m=n(3013),g=a(n(85566)),v=n(85893);function x(e){let{cartId:t,cartProduct:n,quantity:a}=e;return(0,v.jsx)(u.DrawerContext.Consumer,{children:e=>(0,v.jsxs)("div",{className:o.default.actions,children:[(0,v.jsx)(i.default,{quantity:a,onChange:a=>function(e,a){(0,g.default)(t,n,e),(0,f.logEditProduct)(n,a,e)}(a,(0,h.getProductCatalogContext)(e))}),(0,v.jsx)("div",{className:o.default.deleteIcon,children:(0,v.jsx)(s.default,{onClick:a=>function(e,a){const r=(0,d.default)(t,n.id.toString());(0,d.default)(t,n.id.toString()),(0,f.logDeleteProduct)(n,a),0===r&&(0,f.logCartAbandon)(n.catalogWid.toString(),a),function(e){e.preventDefault(),e.stopPropagation()}(e)}(a,(0,h.getProductCatalogContext)(e))})})]})})}},26383:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{label:t,label:n}=e,a=(0,o.default)();(0,i.useListener)(u.LabelCollection,`label_updated_${n}`,(()=>{a()}));const h=u.LabelCollection.get(t);if(!h||!h.name)return null;if("label-list"===e.theme){const n=(0,f.jsx)(c.Labels,{renderAsCircle:"label-list"===e.theme,theme:e.theme,labels:[t]}),a=(0,f.jsx)(s.EmojiText,{text:h.name,ellipsify:!0,titlify:!0});return(0,f.jsx)(l.default,{theme:(0,r.canEditLabel)()?"chat-checkbox":void 0,image:n,primary:a,secondary:d.default.t(395,{count:parseInt(h.count||0,10),_plural:parseInt(h.count||0,10)})})}const p=(0,c.renderLabelSvg)(h.hexColor),m=(0,f.jsx)(s.EmojiText,{text:h.name,ellipsify:!0,titlify:!0});return(0,f.jsx)(l.default,{theme:"label-selection",image:p,primary:m})};var r=n(8139),o=a(n(59312)),i=n(87550),l=a(n(44356)),s=n(65417),d=a(n(14296)),u=n(16770),c=n(84543),f=n(85893)},67901:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{shouldScrollIntoViewAndSelect:t,selectedLabels:n,onMultiSelect:a,renderContext:o,onLabelClick:s,initialLabelState:u={}}=e,[p,m]=(0,i.useState)((()=>d.LabelCollection.toArray())),g=(0,i.useRef)(null),v=(e,t,r)=>{null==n||n.setVal(e,t,r),null==a||a(e.id)};(0,l.useListener)(d.LabelCollection,"add remove",((e,n,a)=>{if(m(d.LabelCollection.toArray()),a.add&&t){var r;const{shouldScrollIntoView:n,shouldSelect:a}=t(e.name);n&&(null===(r=g.current)||void 0===r||r.scrollIntoView({behavior:"smooth"})),a&&v(e,!0,!1)}}));const x=(0,i.useMemo)((()=>(0,r.isMDBackend)()?[...p].sort(((e,t)=>{const n=parseInt(e.id,10),a=parseInt(t.id,10);return isNaN(n)||isNaN(a)?0:n-a})):p),[p]);return(0,f.jsx)("div",{children:x.map(((t,a)=>(0,f.jsx)(h,{selectedLabels:n,renderContext:o,onLabelClick:s,initialLabelState:u,onMultiSelect:v,label:t,selectableState:e.SelectableState||new c.default(!0),ref:e=>{a===p.length-1&&(g.current=e)}},t.id)))})};var r=n(88555),o=n(8139),i=n(67294),l=n(87550),s=a(n(61837)),d=n(16770),u=a(n(26383)),c=a(n(86365)),f=n(85893);const h=(0,i.forwardRef)(((e,t)=>{let{label:n,selectedLabels:a,renderContext:r,onLabelClick:i,initialLabelState:l,onMultiSelect:c,selectableState:h}=e;if(!n.name)return null;const p=d.LabelCollection.assertGet(n.id),m="label-selection"===r||(0,o.canEditLabel)()?(0,f.jsx)(s.default,{theme:r,model:p,initialSelection:l[n.id]||0,multiSelection:a,selectableState:h,onSelect:c,children:(0,f.jsx)(u.default,{label:n.id})}):(0,f.jsx)(u.default,{label:n.id,theme:r});return(0,f.jsx)("div",{ref:t,onClick:i?i.bind(null,n.id):void 0,children:m},`label_item_${n.id}`)}));h.displayName="LabelRow"},77338:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(50796),o=a(n(45095)),i=n(92574),l=n(40234),s=n(81572),d=n(41455),u=n(8139),c=n(14597),f=n(28298),h=n(78820),p=n(45454),m=n(48360),g=n(67294),v=a(n(56720)),x=a(n(16223)),_=a(n(52665)),C=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=B(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(n(39519)),y=a(n(60453)),b=a(n(69637)),j=a(n(64738)),S=n(94790),E=a(n(33308)),k=a(n(61055)),w=a(n(30855)),T=a(n(14296)),M=n(82145),P=n(17304),I=n(84312),O=a(n(96152)),L=a(n(33865)),A=n(48870),D=n(5524),R=n(13923),N=n(85893);function B(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(B=function(e){return e?n:t})(e)}const F={backgroundColor:"ihvf49ua"};function U(e){let{chat:t,value:n,onSubmit:a,onChange:r}=e;return(0,N.jsx)("div",{className:(0,v.default)(f.uiPadding.vert0,f.uiPadding.horiz18),children:(0,N.jsx)(O.default,{chat:t,onChange:r,onSubmit:a,value:n,placeholder:m.fbt._("Add a cancelation note",null,{hk:"22DPGj"})})})}function G(e){let{sellerJid:t,order:n,onCreateOrderClick:a,onDeclineOrderClick:r}=e;return(0,p.createUserWid)(t).equals((0,h.getMaybeMeUser)())?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(E.default,{children:(0,N.jsx)(j.default,{a8nText:"order-create",color:"dark",onClick:a,children:m.fbt._("Create order",null,{hk:"1S0Pla"})})}),(0,N.jsx)(E.default,{children:(0,N.jsx)(j.default,{a8nText:"order-decline",color:"dark",onClick:r,children:m.fbt._("Decline order",null,{hk:"1YQsHY"})})})]}):null}function H(e,t){const{userIsCartOwner:n,orderId:a,token:h,sellerJid:p,onProductDetail:j,onOrderCreate:O,ownerHasReviewed:B,chat:H,orderMessage:z,onOrderCancel:W,isPushed:q=!0}=e,[V,Y]=(0,g.useState)(!0),[K,Q]=(0,g.useState)("PENDING"),[X,Z]=(0,g.useState)(null),[J,$]=(0,g.useState)(""),ee=(0,x.default)((()=>new w.default));(0,g.useEffect)((()=>{I.OrderCollection.findOrder(a,p,h).then((e=>{Y(!1),Q("SUCCESS"),Z(e),q&&((0,M.qplAnnotateOrderView)((null==e?void 0:e.products.length)||0),(0,M.qplEndOrderView)(A.QuickLogActionType.SUCCESS))})).catch((0,r.filteredCatch)(i.E404,(()=>{c.ModalManager.open((0,N.jsx)(_.default,{onOK:()=>{c.ModalManager.close()},okText:m.fbt._("OK",null,{hk:"12cb4U"}),children:m.fbt._("The seller has deleted your sent cart. Contact the seller for more information.",null,{hk:"1bBDJ6"})})),Y(!1),Q("ERROR"),(0,M.qplDropOrderView)()}))).catch((()=>{Y(!1),Q("ERROR"),__LOG__(4,!0,new Error,!0)`Catalog Order Display failed`,SEND_LOGS("OrderDetails: failed to display"),q&&(0,M.qplEndOrderView)(A.QuickLogActionType.FAIL)}))}),[]);const te=()=>{d.DrawerManager.closeDrawerRight()},ne=()=>{if(te(),null!=z){const e=m.fbt._("We have canceled your order.",null,{hk:"3cbQBD"}).toString()+"\n"+J;(0,D.sendTextMsgToChat)(H,e,{quotedMsg:new P.Msg(z)})}s.Cmd.openChatFromUnread(H)};return(0,N.jsxs)(y.default,{ref:t,theme:"striped",onDrop:te,children:[(0,N.jsx)(S.DrawerHeader,{title:n?m.fbt._("Your sent cart",null,{hk:"2rB2j3"}):T.default.t(170),type:S.DRAWER_HEADER_TYPE.SMALL,onBack:te}),(0,N.jsx)(b.default,{flatListControllers:[ee.current],children:(()=>{if(V||null==X)return(0,N.jsx)(k.default,{fetchState:K});let e="";e=X.products.length>0?T.default.t(395,{count:X.totalItemCount||0,_plural:X.totalItemCount||0}):m.fbt._("No Items",null,{hk:"3x8YcR"});const t=(0,N.jsx)(R.TextDiv,{theme:"title",children:e});let n=null;const a=X.products.reduce(((e,t)=>null==t.price?e:(e||0)+t.price*t.quantity),null),r=X.products.reduce(((e,t)=>null==t.currency?e:t.currency),null);n=null!=a&&null!=r?T.default.t(535,{subtotal:C.formatAmount1000(r,a)}):m.fbt._("No price entered",null,{hk:"1vzCQg"});const i=(0,N.jsx)(R.TextDiv,{theme:"muted-small",children:n});let s=null;if(null!=X.createdAt){const e=l.Clock.timeStr(X.createdAt);s=(0,N.jsx)(R.TextSpan,{theme:"muted-small",children:`${e}`})}return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(E.default,{children:[(0,N.jsx)(k.default,{fetchState:K}),(0,N.jsxs)("div",{className:(0,v.default)(F,f.uiPadding.all18),children:[t,i]}),(0,N.jsx)(L.default,{flatListController:ee.current,onProductDetail:j,order:X,sellerJid:p}),(0,N.jsx)("div",{className:(0,v.default)(F,f.uiPadding.all18),children:s}),B?(0,N.jsx)(U,{chat:H,value:J,onSubmit:ne,onChange:$}):null]}),(0,u.orderDetailsFromCartEnabled)()&&!B?(0,N.jsx)(G,{sellerJid:p,order:X,onCreateOrderClick:()=>O((0,o.default)(X,"order")),onDeclineOrderClick:W}):null]})})()})]})}var z=(0,g.forwardRef)(H);t.default=z},44049:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.useLazyOrders=void 0;var r=n(41906),o=n(67294),i=a(n(90886));t.useLazyOrders=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;const[a,l]=(0,o.useState)(0),s=(0,o.useMemo)((()=>e.slice(0,a)),[e,a]),d=(0,o.useCallback)((t=>{l((n=>{const a=t(n)||n;return a>-1&&a<e.length?a:e.length}))}),[e]),u=e=>e.scrollTop+r.SCROLL_FUDGE>=e.scrollHeight-e.clientHeight,c=(0,i.default)((e=>{u(e)&&d((e=>e+2))}),100),f=(0,o.useCallback)((e=>{c(e.currentTarget)}),[c]),h=(0,o.useCallback)((e=>{if(e){const n=Math.round(e.clientHeight/t)+2;t>0&&a<n&&d((()=>n))}}),[d,t,a]);return(0,o.useEffect)((()=>{const e=n.current;return e&&(e.addEventListener("scroll",f),h(e)),()=>{null==e||e.removeEventListener("scroll",f)}}),[n,h,f]),{ordersLazylist:s,scrollToTop:()=>{var e;null===(e=n.current)||void 0===e||e.scroll({top:0,behavior:"smooth"})}}}},18085:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.useGetOrders=function(e,t){const[n,a]=(0,i.useState)({contactAndOrderInfoMap:{},orderStatusInfoMap:{}}),[c,f]=(0,i.useState)(!0),h=(0,i.useCallback)((e=>{a((t=>{const{contactAndOrderInfoMap:n,orderStatusInfoMap:a}=t,{contactsAndOrdersInfo:r,ordersStatusInfo:o}=e;return{contactAndOrderInfoMap:(0,d.getMergedContactAndOrderInfoMap)(n,r),orderStatusInfoMap:(0,d.getMergedOrderStatusInfoMap)(a,o)}}))}),[]),p=(0,i.useCallback)(function(){var e=(0,o.default)((function*(e,t){const{fetcher:n}=(0,d.getCachedOrdersInfoFromChat)(t),o=yield n;a((t=>(0,r.default)((0,r.default)({},t),{},{orderStatusInfoMap:(0,d.removeOrderStatusInfoFromMap)(o,e,t)})))}));return function(){return e.apply(this,arguments)}}(),[]),m=(0,i.useCallback)((e=>{a((t=>{const{contactAndOrderInfoMap:n}=t,{contactsAndOrdersInfo:a}=e;return(0,r.default)((0,r.default)({},t),{},{contactAndOrderInfoMap:(0,d.removeContactAndOrdersInfoFromMap)(n,a)})}))}),[]);(0,i.useEffect)((()=>{const e=[],t=[];return s.ChatCollection.toArray().forEach((n=>{const a=n.msgs.msgLoadState.noEarlierMsgs?d.getCachedOrdersInfoFromChat:d.getNotCachedOrdersInfoFromChat,{fetcher:r,unsubscribe:o}=a(n);r.then(h),e.push(r),t.push(o)})),Promise.all(e).finally((()=>f(!1))),()=>{t.forEach((e=>e()))}}),[h]);const{contactAndOrderInfoMap:g}=n,v=(0,i.useMemo)((()=>[...Object.keys(g).sort(((e,t)=>g[t].timestamp-g[e].timestamp))]),[g]),{ordersLazylist:x,scrollToTop:_}=(0,u.useLazyOrders)(v,t,e);return(0,l.useListener)(s.ChatCollection,"add",function(){var e=(0,o.default)((function*(e){const{fetcher:t}=(0,d.getCachedOrdersInfoFromChat)(e),n=yield t;h(n),n.contactsAndOrdersInfo.length&&_()}));return function(){return e.apply(this,arguments)}}()),(0,l.useListeners)(s.ChatCollection.toArray().map((e=>({source:e.msgs,eventOrEvents:"remove",callback:t=>{const n=(0,d.getOrdersInfoFromMsgs)([t],e.contact);n.contactsAndOrdersInfo.length?m(n):n.ordersStatusInfo.length&&p(n,t.chat)}})))),(0,l.useListeners)(s.ChatCollection.toArray().map((e=>({source:e.msgs,eventOrEvents:"add",callback:t=>{const n=(0,d.getOrdersInfoFromMsgs)([t],e.contact);h(n),n.contactsAndOrdersInfo.length&&_()}})))),{ordersInfoMap:n,isLoading:c,ordersLazylist:x}};var r=a(n(81109)),o=a(n(48926)),i=n(67294),l=n(87550),s=n(69951),d=n(18878),u=n(44049)},80456:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(28298),o=n(78820),i=n(48360),l=n(67294),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=T(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(n(39519)),d=a(n(60453)),u=a(n(69637)),c=a(n(64738)),f=n(94790),h=a(n(33308)),p=n(29623),m=a(n(48846)),g=a(n(79550)),v=n(59789),x=a(n(18985)),_=a(n(42116)),C=a(n(82240)),y=n(88998),b=n(52604),j=n(11054),S=a(n(23217)),E=n(13923),k=a(n(8135)),w=n(85893);function T(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(T=function(e){return e?n:t})(e)}function M(e,t){const n=(0,o.getMeUser)(),{chat:a,orderInfo:m,sellerWid:j}=e,{referenceId:T,discount:M,tax:I,shipping:O,subtotal:L,totalAmount:A}=m,{orderItems:D,isLoading:R}=(0,k.default)(m,j),N=(0,l.useMemo)((()=>(0,y.findOrderStatus)(a,T)),[a,T]);return null==L?null:(0,w.jsxs)(d.default,{onDrop:e.onBack,ref:t,children:[(0,w.jsx)(f.DrawerHeader,{title:i.fbt._("Order details",null,{hk:"2HeBLz"}),onBack:e.onBack,type:f.DRAWER_HEADER_TYPE.SMALL}),(0,w.jsx)(u.default,{theme:R?"center-content":void 0,children:R?(0,w.jsx)(P,{}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(h.default,{xstyle:[r.uiPadding.top20,r.uiPadding.bottom15],children:(0,w.jsxs)(x.default,{children:[(0,w.jsx)(_.default,{a8nText:"order-status-container",orderId:m.referenceId,sellerWid:j,orderStatus:(0,w.jsx)(C.default,{orderStatus:N})}),(0,w.jsx)(g.default,{details:!0,currency:m.currency,items:D}),(0,w.jsx)(b.OrderValues,{tax:null!=I?I*v.DEFAULT_OFFSET:null,discount:null!=M?M*v.DEFAULT_OFFSET:null,shipping:null!=O?O*v.DEFAULT_OFFSET:null,subtotal:L*v.DEFAULT_OFFSET,currency:m.currency,canDisplayAdditionalCharges:!0}),(0,w.jsxs)(p.FlexRow,{justify:"all",xstyle:r.uiPadding.horiz16,a8nText:"order-details-total-row",children:[(0,w.jsx)(E.TextSpan,{theme:"title",children:i.fbt._("Total",null,{hk:"7xRrT"})}),(0,w.jsx)(E.TextSpan,{theme:"title",children:s.formatAmount(m.currency,A)})]})]})}),[y.OrderStatus.Canceled,y.OrderStatus.Complete].every((e=>N!==e))&&n.user===j.user&&(0,w.jsx)(h.default,{children:(0,w.jsx)(c.default,{icon:(0,w.jsx)(S.default,{color:"teal",width:20,name:"status-clock"}),a8nText:"order-status-update",color:"dark",onClick:()=>{var t;null===(t=e.onOrderStatusUpdateClick)||void 0===t||t.call(e)},children:i.fbt._("Update order status",null,{hk:"4j4YaZ"})})})]})})]})}function P(){return(0,w.jsx)(p.FlexRow,{align:"center",justify:"center",a8nText:"order-detail-drawer-loading",children:(0,w.jsx)(m.default,{children:(0,w.jsx)(j.Spinner,{})})})}var I=(0,l.forwardRef)(M);t.default=I},39049:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{productItems:t}=e,n=t.map((e=>({itemKey:e.id.toString(),product:e})));return(0,l.jsx)(o.default,{flatListControllers:[e.flatListController],children:(0,l.jsx)(r.FlatList,{a8nKey:"order-detail-product-list",flatListController:e.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:n,renderItem:e=>{let{product:t}=e;return(0,l.jsx)(i.default,{product:t})},defaultItemHeight:60})})};var r=n(47915),o=a(n(44942)),i=a(n(20329)),l=n(85893)},32488:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(48360),o=n(67294),i=(a(n(56720)),a(n(16223))),l=a(n(60453)),s=a(n(69637)),d=n(94790),u=a(n(33308)),c=a(n(30855)),f=a(n(39049)),h=n(85893);const p={container:{paddingTop:"emrlamx0",paddingEnd:"folpon7g",paddingBottom:"aiput80m",paddingStart:"lyvj5e2u"}};function m(e,t){const{productItems:n}=e,a=(0,i.default)((()=>new c.default));return(0,h.jsxs)(l.default,{onDrop:e.onBack,ref:t,children:[(0,h.jsx)(d.DrawerHeader,{title:r.fbt._("Items",null,{hk:"3B8pMI"}),onBack:e.onBack,type:d.DRAWER_HEADER_TYPE.SMALL}),(0,h.jsx)(s.default,{flatListControllers:[a.current],children:(0,h.jsx)(u.default,{xstyle:p.container,theme:"refresh-padding-title",children:(0,h.jsx)(f.default,{flatListController:a.current,productItems:n})})})]})}var g=(0,o.forwardRef)(m);t.default=g},20329:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const{product:n}=e,a=(0,f.jsx)(s.EmojiText,{text:n.name,ellipsify:!0,titlify:!0}),h=(0,f.jsx)(u.OrderItemIcon,{useCustomIcon:!1===Boolean(n.mediaData),mediaData:null!==(t=n.mediaData)&&void 0!==t?t:null});let p=null;if(n.quantity){const e=d.default.t(536,{quantity:n.quantity.toString()});p=(0,f.jsx)(c.TextSpan,{children:e})}let m=null;m=(0,o.isNonZeroNumber)(n.price)?l.formatAmount1000(n.currency,n.price):r.fbt._("Ask for price",null,{hk:"3t7lv2"});const g=(0,f.jsx)(c.TextSpan,{children:m});return(0,f.jsx)(i.default,{image:h,customImage:!0,primary:a,secondary:p,detail:g,theme:"media"})};var r=n(48360),o=n(29984),i=a(n(44356)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(n(39519)),s=n(65417),d=a(n(14296)),u=n(45395),c=n(13923),f=n(85893);function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}},59322:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{a8nText:t,label:n,isCanceled:a,checked:u,onClick:c}=e;return(0,s.jsx)(l.default,{onClick:c,a8nText:t,children:(0,s.jsxs)(i.FlexRow,{children:[(0,s.jsx)(i.FlexColumn,{xstyle:d.checkboxContainer,children:(0,s.jsx)(o.default,{checked:u,radio:!0,hover:!1,systemUncheckedColor:!0,onChange:()=>{c()}})}),(0,s.jsx)("div",{className:a?(0,r.default)(d.canceledStyle):null,children:n})]})})};var r=a(n(56720)),o=a(n(9275)),i=n(29623),l=a(n(1784)),s=n(85893);const d={canceledStyle:{color:"mvxzr2tb"},checkboxContainer:{paddingStart:"nqtxkp62",paddingEnd:"h1a80dm5"}}},96152:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(i.default,{transitionName:"media-caption",className:(0,l.default)(f),children:(0,c.jsx)(s.default,{chat:e.chat,maxLength:o.default.MAX_CART_MESSAGE_LENGTH,placeholder:e.placeholder,value:e.value,onEnter:()=>{!0!==e.disabled&&e.onSubmit()},onChange:t=>{e.onChange(t)},multiline:!0,showRemaining:!0,spellCheck:!0,supportsEmoji:!0})}),(0,c.jsx)(i.default,{transitionAppear:!0,transitionName:"btn",children:(0,c.jsx)("button",{disabled:e.disabled,"data-a8n":r.default.key(e.a8nTextButton),className:(0,l.default)(h),tabIndex:"-1",onClick:()=>e.onSubmit(),title:e.buttonTitle,children:(0,c.jsx)(d.Round,{disabled:e.disabled,children:(0,c.jsx)(u.default,{width:18,name:"send",directional:!0})})})})]})};var r=a(n(99964)),o=a(n(64369)),i=a(n(40436)),l=a(n(56720)),s=a(n(3028)),d=n(82857),u=a(n(23217)),c=n(85893);const f={display:"p357zi0d",flexDirection:"f8m0rgwh",width:"ln8gz9je",zIndex:"mb8var44",position:"g0rxnol2",marginBottom:"mggyuyyy"},h={color:"svlsagor",marginTop:"tt8xd2xn",marginEnd:"jnwc1y2a",marginBottom:"mpdn4nr2",marginStart:"svoq16ka",opacity:"axi1ht8l",paddingTop:"i5tg98hk",paddingEnd:"f9ovudaz",paddingBottom:"przvwfww",paddingStart:"gx1rr48f",position:"lhggkp7q",right:"q82cfhbg",bottom:"efio351b",textAlign:"qfejxiq4"}},33865:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{order:t,onProductDetail:n,sellerJid:a}=e,h=e=>{const n=t.orderItemCollection.toArray();return(0,s.logOrderListImpression)({catalogContext:e,orderId:t.id,productCount:n.length,catalogOwnerJid:a}),n.map((e=>({itemKey:e.id.toString(),product:e})))};return(0,f.jsx)(o.DrawerContext.Consumer,{children:t=>{const o=(0,c.getProductCatalogContext)(t);return(0,f.jsx)(l.default,{flatListControllers:[e.flatListController],children:(0,f.jsx)(i.FlatList,{a8nKey:"order-product-list",flatListController:e.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:h(o),renderItem:t=>(0,f.jsx)(u.default,{product:t.product,onClick:()=>((t,r)=>{const o={productId:t.product.id,businessOwnerJid:a};(0,d.qplStartProductView)("Order"),(0,s.logOrderListItemClick)({catalogContext:r,orderId:e.order.id,catalogOwnerJid:a}),n(o)})(t,o)}),defaultItemHeight:r.PRODUCT_LIST_ITEM_HEIGHT})})}})};var r=n(64481),o=n(27394),i=n(47915),l=a(n(44942)),s=n(79544),d=n(82145),u=a(n(7714)),c=n(97567),f=n(85893)},7714:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{product:t,onClick:n}=e,a=(0,h.jsx)(u.EmojiText,{text:t.name,ellipsify:!0,titlify:!0}),p=(0,h.jsx)(c.ProductThumb,{mediaData:t.mediaData,theme:"list"}),m=o.fbt._("Quantity {item-quantity}",[o.fbt._param("item-quantity",t.quantity)],{hk:"102wGk"});let g=null;t.quantity&&(g=(0,h.jsx)(f.TextSpan,{className:(0,l.default)(r.uiMargin.vert0,r.uiMargin.start0,r.uiMargin.end6),children:m}));let v=null;(0,i.isNonZeroNumber)(t.price)&&(v=(0,h.jsx)(f.TextSpan,{className:(0,l.default)(r.uiMargin.vert0,r.uiMargin.start0,r.uiMargin.end6),children:d.formatAmount1000(t.currency,t.price)}));let x=null;null!=v&&(x=(0,h.jsx)("span",{className:(0,l.default)(r.uiMargin.vert0,r.uiMargin.start0,r.uiMargin.end6),children:""}));const _=(0,h.jsxs)("div",{children:[v,x,g]});return(0,h.jsx)(s.default,{image:p,customImage:!0,primary:a,secondary:_,theme:"order-product",onClick:n},t.id.toString())};var r=n(28298),o=n(48360),i=n(29984),l=a(n(56720)),s=a(n(44356)),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(n(39519)),u=n(65417),c=n(3013),f=n(13923),h=n(85893);function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}},3607:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(81572),o=n(41455),i=n(14597),l=n(28298),s=n(48360),d=n(67294),u=(a(n(56720)),a(n(52665))),c=a(n(60453)),f=a(n(69637)),h=n(94790),p=a(n(33308)),m=n(29623),g=n(59789),v=a(n(59322)),x=a(n(96152)),_=n(88998),C=n(75169),y=n(73150),b=n(85893);const j=[_.OrderStatus.Processing,_.OrderStatus.Shipped,_.OrderStatus.Complete,_.OrderStatus.Canceled],S={checkboxContainer:{gap:"n8lfltvd"}};function E(e,t){const[n,a]=(0,d.useState)(""),E=(0,d.useMemo)((()=>(0,_.findOrderStatus)(e.chat,e.orderInfo.referenceId)),[e.chat,e.orderInfo.referenceId]),[k,w]=(0,d.useState)(E),{chat:T,sellerJid:M,orderInfo:P}=e;function I(){o.DrawerManager.closeDrawerRight(),(0,y.sendOrderStatusMessageAsMerchant)({chat:T,sellerJid:M,orderInfo:P,orderNote:n,orderStatus:k,offset:g.DEFAULT_OFFSET}),r.Cmd.openChatFromUnread(T)}function O(e){return j.findIndex((t=>t===e))}const L=s.fbt._("Add a note",null,{hk:"37dHqT"});return(0,b.jsxs)(c.default,{onDrop:e.onBack,ref:t,children:[(0,b.jsx)(h.DrawerHeader,{title:s.fbt._("Update order status",null,{hk:"2pK0VF"}),onBack:e.onBack,type:h.DRAWER_HEADER_TYPE.SMALL}),(0,b.jsxs)(f.default,{children:[(0,b.jsx)(p.default,{xstyle:[l.uiPadding.vert20,l.uiPadding.horiz16],theme:"refresh-padding-title",children:(0,b.jsx)(m.FlexColumn,{xstyle:S.checkboxContainer,children:j.map((e=>(0,b.jsx)(v.default,{a8nText:"order-status-select-option",label:C.OrderStatusLabels[e],isCanceled:e===_.OrderStatus.Canceled,checked:k===e,onClick:()=>{w(e)}},e)))})}),(0,b.jsx)(p.default,{xstyle:[l.uiPadding.top8,l.uiPadding.horiz16],theme:"refresh-padding-title",children:(0,b.jsx)(x.default,{chat:e.chat,placeholder:L,value:n,onChange:a,onSubmit:function(){const e=O(k),t=O(E);e===t?i.ModalManager.open((0,b.jsx)(u.default,{title:s.fbt._("Status already sent",null,{hk:"3GmLDK"}),okText:s.fbt._("OK",null,{hk:"4oTrfy"}),onOK:()=>{i.ModalManager.close()},children:s.fbt._("Your have already updated this order to {originalOrderStatus}",[s.fbt._param("originalOrderStatus",C.OrderStatusLabels[E])],{hk:"1C6myK"})})):e<t?i.ModalManager.open((0,b.jsx)(u.default,{title:s.fbt._("Update sent status?",null,{hk:"Vz57T"}),okText:s.fbt._("Update",null,{hk:"1b5vbz"}),onOK:()=>{I(),i.ModalManager.close()},cancelText:s.fbt._("Cancel",null,{hk:"9jDpn"}),onCancel:()=>{i.ModalManager.close()},children:s.fbt._("Your customer has already seen this order marked as {originalOrderStatus}. Do you want update it to {orderStatus}?",[s.fbt._param("originalOrderStatus",C.OrderStatusLabels[E]),s.fbt._param("orderStatus",C.OrderStatusLabels[k])],{hk:"3MuiJd"})})):I()},buttonTitle:L,a8nTextButton:"order-status-update-button"})})]})]})}var k=(0,d.forwardRef)(E);t.default=k},8135:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const n=(0,c.default)(t),[a,f]=(0,i.useState)([]),[h,p]=(0,i.useState)(!0),m=(0,l.default)(),g=(0,i.useCallback)((()=>null==n?new Map:n.productCollection.getProductModels().reduce(((e,t)=>{var n;return e.set(t.id.toString(),null===(n=t.getPreviewImage())||void 0===n?void 0:n.mediaUrl)}),new Map)),[n]),v=(0,i.useCallback)((t=>{if(null==n)return Promise.resolve([]);const a=e.items.reduce(((e,a)=>{if(a.isCustomItem||null!=t.get(a.id))return e;const r=s.CatalogCollection.findProduct({catalogWid:n.id,productId:a.id});return e.concat(r)}),[]);return Promise.all(a)}),[n,e.items]),x=(0,i.useCallback)(((t,n)=>{var a;return new u.default((0,o.default)((0,o.default)({},t),{},{price:(null!==(a=t.amount)&&void 0!==a?a:0)*d.DEFAULT_OFFSET,currency:e.currency,thumbnailUrl:n.get(t.id)}))}),[e.currency]),_=(0,i.useCallback)((t=>e.items.map((e=>x(e,t)))),[e.items,x]);return(0,i.useEffect)((()=>{(0,r.default)((function*(){const e=g();if(p(!0),yield v(e),m.aborted)return;p(!1);const t=g();f(_(t))}))()}),[n,m,v,g,_]),{orderItems:a,isLoading:h}};var r=a(n(48926)),o=a(n(81109)),i=n(67294),l=a(n(3409)),s=n(99989),d=n(59789),u=a(n(52822)),c=(n(9468),a(n(27968)))},14710:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.CatalogSettingsDrawer=void 0;var r=n(89385),o=a(n(47259)),i=n(21310),l=n(94816),s=n(78820),d=n(48360),u=n(67294),c=a(n(3409)),f=n(46977),h=n(93581),p=a(n(48608)),m=a(n(99360)),g=a(n(60453)),v=a(n(69637)),x=n(94790),_=a(n(33308)),C=n(12591),y=a(n(14296)),b=a(n(25421)),j=n(11054),S=n(13923),E=n(50452),k=n(85893);function w(e){let{cartEnabled:t,setCartEnabled:n}=e;const a=e=>{n(e),(0,f.updateCartEnabled)(e).catch((()=>{__LOG__(4,!0,new Error,!0)`Failed to update cartEnabled value`,SEND_LOGS("updateCartEnabled: cartEnabled toggle error"),l.ToastManager.open((0,k.jsx)(E.Toast,{msg:d.fbt._("Failed to update the setting.",null,{hk:"RZBg9"}),duration:6e3,id:(0,E.genId)()})),n(t)}))},r=(0,i.getCatalogCartOnOffFaqUrl)(),o=(0,k.jsx)(m.default,{href:r,onClick:e=>{e.preventDefault(),(0,C.openExternalLink)(r)},children:y.default.t(397)}),s=d.fbt._("Turn this on to let customers add items to a cart when shopping in your catalog. Turning this off won't affect carts you've already received. {learn_more_link}",[d.fbt._param("learn_more_link",o)],{hk:"iTzgD"});return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(_.default,{title:d.fbt._("Add to cart",null,{hk:"1mbCt1"}),theme:"title-larger",animation:!1,children:[(0,k.jsx)(b.default,{isChosen:t,onChoose:()=>{a(!0)},choiceText:d.fbt._("On",null,{hk:"2m7e5W"})}),(0,k.jsx)(b.default,{isChosen:!t,onChoose:()=>{a(!1)},choiceText:d.fbt._("Off",null,{hk:"1l0P5X"})})]}),(0,k.jsx)(S.TextDiv,{theme:"plain",className:p.default.descriptionText,children:s})]})}const T=(0,u.forwardRef)(((e,t)=>{const{onBack:n}=e,[a,i]=(0,u.useState)(!0),[f,m]=(0,u.useState)(!1),_=(0,c.default)();return(0,u.useEffect)((()=>{(0,o.default)(h.BusinessProfileCollection.fetchBizProfile((0,s.getMeUser)()),_).then((e=>{const t=e.profileOptions;i(!1),m(null!=t&&t.cartEnabled)})).catch((0,r.catchAbort)((()=>{}))).catch((()=>{__LOG__(4,!0,new Error)`Error fetching the business profile.`,l.ToastManager.open((0,k.jsx)(E.Toast,{msg:d.fbt._("Failed to load catalog settings.",null,{hk:"2UxoQh"}),duration:6e3,id:(0,E.genId)()})),n()}))}),[]),(0,k.jsxs)(g.default,{ref:t,theme:"catalog",onDrop:e.onBack,children:[(0,k.jsx)(x.DrawerHeader,{title:d.fbt._("Settings",null,{hk:"2RmHUB"}),type:x.DRAWER_HEADER_TYPE.LARGE,onBack:e.onBack}),(0,k.jsx)(v.default,{children:a?(0,k.jsx)("div",{className:p.default.loadingSpinner,children:(0,k.jsx)(j.Spinner,{})}):(0,k.jsx)(w,{cartEnabled:f,setCartEnabled:e=>{m(e)}})})]})}));t.CatalogSettingsDrawer=T},27968:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const[t,n]=(0,o.useState)((()=>l.CatalogCollection.get(e))),a=(0,i.default)();return(0,o.useEffect)((()=>{const o=l.CatalogCollection.get(e);o!==t&&(null!=o?n(o):(0,r.default)((function*(){const t=yield l.CatalogCollection.find(e);a.aborted||n(t)}))())}),[e,t,a]),t};var r=a(n(48926)),o=n(67294),i=a(n(3409)),l=n(99989)},65656:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{selections:t,active:n,onSelectionChanged:a,catalog:d}=e,u=e=>{((e,r,o)=>{t.setVal(e,r,o),n.setVal(e,o),a()})(e,!t.isSelected(e),!1)};return(0,s.jsx)(i.default,{flatListControllers:[e.flatListController],children:(0,s.jsx)(o.FlatList,{flatListController:e.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:d.productCollection.getProductModels(!0).map((e=>({itemKey:e.id.toString(),product:e}))),renderItem:e=>{let{product:a}=e;return(0,s.jsx)(l.default,{product:a,selections:t,onClick:()=>u(a),active:n},a.id.toString())},defaultItemHeight:r.PRODUCT_LIST_ITEM_HEIGHT})})};var r=n(64481),o=n(47915),i=a(n(44942)),l=a(n(60809)),s=n(85893)},93870:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(48926)),o=n(89385),i=a(n(78931)),l=a(n(94184)),s=n(48360),d=n(67294),u=a(n(59312)),c=a(n(16223)),f=a(n(90886)),h=a(n(3409)),p=n(47217),m=n(64481),g=n(10448),v=a(n(65656)),x=a(n(60453)),_=a(n(69637)),C=n(27394),y=n(94790),b=a(n(24514)),j=a(n(30855)),S=a(n(29796)),E=a(n(14296)),k=n(35054),w=n(97567),T=n(48870),M=n(27798),P=n(82857),I=a(n(88406)),O=n(11054),L=a(n(23217)),A=n(90011),D=n(85893);function R(e){let{value:t,errorName:n,onChange:a}=e;return(0,D.jsx)(A.TextInput,{editable:!0,focusOnMount:!0,showRemaining:!0,value:t,onChange:a,inputPlaceholder:s.fbt._("New collection",null,{hk:"2NAI33"}),theme:"text-input",error:n,maxLength:30})}function N(e){let{onClick:t,updated:n}=e;const a=E.default.t(171,{updated:n,_plural:n});return(0,D.jsxs)("div",{className:b.default.footer,children:[a,(0,D.jsx)("div",{className:b.default.saveButton,children:(0,D.jsx)(P.Round,{large:!0,onClick:t,children:(0,D.jsx)(L.default,{name:"checkmark-medium"})})})]})}function B(e,t){var n;const{catalog:a,collection:E,onBack:P}=e,A=(0,c.default)((()=>new I.default([],(e=>e.id.toString())))),B=(0,c.default)((()=>new i.default([],(e=>e.id.toString())))),F=(0,c.default)((()=>new j.default)),U=(0,u.default)(),G=(0,h.default)(),[H,z]=(0,d.useState)(null),[W,q]=(0,d.useState)(null),[V,Y]=(0,d.useState)(null==E?void 0:E.name),[K,Q]=(0,d.useState)(null==E?void 0:E.name),[X,Z]=(0,d.useState)(null),[J,$]=(0,d.useState)(!1),[ee,te]=(0,d.useState)(!0);(0,d.useEffect)((()=>{(()=>{const e=new g.CollectionsContentDataSource(a,m.PRODUCT_LIST_ITEM_HEIGHT,null==E?void 0:E.id),t=new g.CatalogListItemScrollHelper(e);z(e),q(t),e.loadInitialItems().then((()=>{if(G.aborted)throw new o.AbortError;te(!1),U()})).catch((0,o.catchAbort)((()=>{})))})()}),[]);const ne=e=>{Y(e),Z(X&&e?null:X)},ae=(0,f.default)((e=>{const t=e.currentTarget;(null==W?void 0:W.willLoadMore(t))&&te(!0),null==W||W.onScroll(e,t).then((e=>{te(!1),e&&te(!1)})).catch((e=>{throw te(!1),e}))}),100),re=function(){var e=(0,r.default)((function*(e){const t=(0,w.getProductCatalogContext)(e);if(V&&""!==V.trim()){T.QPL.markerStart(M.QuickLogMarkerId.WHATSAPP_COLLECTION_EDIT),$(!0);const{added:e,removed:n}=(()=>{const e=a.productCollection.getProductModels(!0),t=[],n=[];return e.forEach((e=>{const a=B.current.isSelected(e);e.checkmark!==a&&(a?n.push(e):t.push(e))})),{added:n,removed:t}})(),r=V!==K;T.QPL.markerAnnotate(M.QuickLogMarkerId.WHATSAPP_COLLECTION_EDIT,{bool:{IsNew:!E},int:{ProductsAdded:e.length}}),E&&T.QPL.markerAnnotate(M.QuickLogMarkerId.WHATSAPP_COLLECTION_EDIT,{bool:{Renamed:r},int:{ProductsDeleted:n.length}});try{if(yield(0,p.handleCollectionSave)(a,E,V||"",e,n,t)){P();const a=null==E?void 0:E.id;a&&r&&((0,k.logCollectionRenamed)({catalogContext:t,collectionId:a}),Q(V)),E&&(0,k.logCollectionItemsAssignment)({collectionId:E.id,addedCount:e.length,removedCount:n.length,catalogContext:t}),T.QPL.markerEnd(M.QuickLogMarkerId.WHATSAPP_COLLECTION_EDIT,T.QuickLogActionType.SUCCESS)}else $(!1),T.QPL.markerDrop(M.QuickLogMarkerId.WHATSAPP_COLLECTION_EDIT)}catch(e){$(!1),T.QPL.markerEnd(M.QuickLogMarkerId.WHATSAPP_COLLECTION_EDIT,T.QuickLogActionType.FAIL)}}else Z(s.fbt._("Name required",null,{hk:"1pvj2p"}))}));return function(){return e.apply(this,arguments)}}(),oe=(0,l.default)(b.default.container,{[b.default.isSending]:J}),ie=(null===(n=e.collection)||void 0===n?void 0:n.name)||s.fbt._("New collection",null,{hk:"4dusPd"});return(0,D.jsxs)(x.default,{ref:t,theme:"products",onDrop:e.onBack,children:[(0,D.jsx)(y.DrawerHeader,{title:ie,type:y.DRAWER_HEADER_TYPE.LARGE,onBack:e.onBack,menu:(0,D.jsx)(D.Fragment,{})}),(0,D.jsx)(_.default,{className:oe,flatListControllers:[F.current],onScroll:ae,children:(()=>{const e=J?(0,D.jsx)("div",{className:b.default.spinner,children:(0,D.jsx)(O.Spinner,{size:50,stroke:3})}):null,t=(()=>{const e=a.productCollection.getProductModels(!0);let t=0;return e.forEach((e=>{B.current.isInList(e)?e.checkmark!==B.current.isSelected(e)&&t++:B.current.setVal(e,e.checkmark)})),t})();return(0,D.jsx)(C.DrawerContext.Consumer,{children:n=>{const r=(0,w.getProductCatalogContext)(n);return(0,D.jsxs)(D.Fragment,{children:[e,(0,D.jsxs)("div",{className:b.default.nameContainer,children:[(0,D.jsx)("span",{className:b.default.nameIcon,children:(0,D.jsx)(L.default,{name:"collections_folder"})}),(0,D.jsx)("span",{className:b.default.nameEdit,children:(0,D.jsx)(R,{onChange:ne,value:V,errorName:X})})]}),(0,D.jsx)("div",{className:b.default.operation,children:E?s.fbt._("Update Items",null,{hk:"2dT3Pu"}):s.fbt._("Add Items",null,{hk:"3NRr27"})}),(0,D.jsxs)("div",{className:b.default.listContainer,children:[(0,D.jsx)(v.default,{catalog:a,flatListController:F.current,active:A.current,selections:B.current,onSelectionChanged:()=>U()}),ee&&(0,D.jsx)("div",{className:b.default.loadingSpinner,children:(0,D.jsx)(S.default,{})})]}),t>0||E&&V!==E.name?(0,D.jsx)(N,{updated:t,onClick:()=>{re(r)}}):null]})}})})()})]})}var F=(0,d.forwardRef)(B);t.default=F},65303:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ComplianceInfoFields=ee,t.EditProductDrawer=function(e){const{catalog:t,onBack:n,onCancel:a,newProduct:u,onDelete:w,onEditSuccess:B,onCreate:F}=e,J=(0,x.useContext)(D.DrawerContext),$=(0,x.useRef)(null),te=(0,C.useModelValues)(e.product,["id","additionalImageCdnUrl","name","priceAmount1000","description","productImageCollection","reviewStatus","url","imageCdnUrl","retailerId","currency","isHidden","complianceInfo"]),ne=e=>!(0,f.hideUnsupportedCurrency)()||I.isSupportedCurrency(e),ae=null!=te.currency?te.currency:I.currencyForCountryShortcode((0,P.getCountryShortcodeByPhone)((0,m.getMeUser)().user)),re=ne(ae),[oe,ie]=(0,x.useState)(te.name||""),[le,se]=(0,x.useState)(re?te.priceAmount1000:null),[de,ue]=(0,x.useState)(te.description||""),[ce,fe]=(0,x.useState)(te.url||""),[he,pe]=(0,x.useState)(te.retailerId||""),[me,ge]=(0,x.useState)((()=>{if(null!=te.priceAmount1000&&null!=ae&&re){const e=I.formatAmount1000ToParts(ae,te.priceAmount1000);return`${e.integer}${e.decimal}`}return""})),ve=re?ae:"",[xe,_e]=(0,x.useState)(!1),[Ce,ye]=(0,x.useState)(""),[be,je]=(0,x.useState)(""),[Se,Ee]=(0,x.useState)(""),[ke,we]=(0,x.useState)(""),[Te,Me]=(0,x.useState)(""),[Pe,Ie]=(0,x.useState)(!!te.imageCdnUrl),[Oe,Le]=(0,x.useState)(!1),[Ae,De]=(0,x.useState)(te.isHidden),[Re,Ne]=(0,x.useState)(!!re),[Be,Fe]=(0,x.useState)(!1),[Ue,Ge]=(0,x.useState)(void 0);(0,_.useListener)(te,"change:isHidden",(()=>{De(te.isHidden)}));const He=function(){var e=(0,o.default)((function*(){if(u)Fe(!0);else{yield S.CatalogCollection.findProduct({catalogWid:t.id,productId:te.id.toString(),shouldFetchComplianceFields:!0});const e=(0,l.default)(t,"catalog").productCollection.get(te.id),{countryCodeOrigin:n,importerName:a,importerAddress:r}=(null==e?void 0:e.complianceInfo)||{},o=n===String(M.SyntheticCountryCode.NotApplicable)?v.fbt._("Not Applicable",null,{hk:"2k1klN"}).toString():n&&(yield(0,M.getCountryName)(n)),i=(null==r?void 0:r.countryCode)&&(yield(0,M.getCountryName)(r.countryCode));Fe(!0),Ge({countryCodeOrigin:n,countryNameOrigin:o,countryCodeOriginError:"",importerName:a,importerNameError:"",importerAddress:{street1:null==r?void 0:r.street1,street1Error:"",street2:null==r?void 0:r.street2,postalCode:null==r?void 0:r.postalCode,city:null==r?void 0:r.city,cityError:"",region:null==r?void 0:r.region,countryCode:null==r?void 0:r.countryCode,countryName:i,countryCodeError:""}})}}));return function(){return e.apply(this,arguments)}}();(0,x.useEffect)((()=>{(0,f.canSeeECommerceComplianceIndiaSoftEnforcement)(t.id.user)&&He()}),[]);const ze=(e,t,n)=>{const{importerAddress:a}=Ue||{};return t===e?n:a[e]},We=()=>{const e=null==Ue?void 0:Ue.countryCodeOrigin;return!!e&&![k.COMPLIANCE_INFO_CODES.INDIA,M.SyntheticCountryCode.NotApplicable].includes(e)},qe=()=>(0,f.canSeeECommerceComplianceIndiaHardEnforcementBusinessJourney)(t.id.user),Ve=(e,t)=>{u?(0,U.logAddProductFailed)((0,z.getProductCatalogContext)(J)):(0,U.logEditProductFailed)(te,(0,z.getProductCatalogContext)(J),e.statusCode);let n=v.fbt._("Failed to save changes",null,{hk:"1rgjJH"});null!=e.errors&&(e.errors.filter((e=>"duplicate"===e.reason)).length>0?q.QPL.markerDrop(t):q.QPL.markerEnd(t,q.QuickLogActionType.FAIL),e.errors.map((e=>{"media"===e.name&&"duplicate"===e.reason&&Me(v.fbt._("Two or more images are the same. Delete any duplicates and try again.",null,{hk:"3qIMS6"})),"retailer_id"!==e.name&&"retailer-id"!==e.name||"duplicate"!==e.reason||we(v.fbt._("Item code must be unique.",null,{hk:"2T0KbL"})),(0,f.hideUnsupportedCurrency)()&&"currency"===e.name&&"invalid-data"===e.reason&&(n=v.fbt._("Price cant be shown in your country. Delete the price you entered.",null,{hk:"3qXNEI"}))}))),h.ToastManager.open((0,Z.jsx)(X.Toast,{msg:n,id:(0,X.genId)("catalog_save_item_failed")}))},Ye=e=>{t.productCollection.add(e,{merge:!0}),u?(0,U.logAddProductSuccess)((0,z.getProductCatalogContext)(J)):(0,U.logEditProductSuccess)(te,(0,z.getProductCatalogContext)(J)),h.ToastManager.open((0,Z.jsx)(X.Toast,{msg:v.fbt._("Changes saved",null,{hk:"fmK60"}),id:(0,X.genId)("catalog_item_saved")})),B(e),null!=u&&(null==F||F())},Ke=function(){var e=(0,o.default)((function*(e,t){const n=ze("street1",e,t),a=ze("street2",e,t),o=ze("postalCode",e,t),i=ze("city",e,t),l=ze("region",e,t),s=ze("countryCode",e,t),d=[n,a,o,i,l,s].some((e=>e))||qe(),u=(0,r.default)((0,r.default)({},Ue),{},{importerAddress:(0,r.default)({},null==Ue?void 0:Ue.importerAddress)});"countryCode"===e&&(u.importerAddress.countryName=(yield(0,M.getCountryName)(t))||void 0),u.importerAddress[e]=t||void 0,u.importerAddress.street1Error=d&&!(0,T.existsFieldIgnoreHardEnforcement)(n)?v.fbt._("Add an importer address line 1",null,{hk:"3HSMmN"}):"",u.importerAddress.cityError=d&&!(0,T.existsFieldIgnoreHardEnforcement)(i)?v.fbt._("Add an importer city",null,{hk:"1nq7dA"}):"",u.importerAddress.countryCodeError=d&&!(0,T.existsFieldIgnoreHardEnforcement)(s)?v.fbt._("Add an importer country",null,{hk:"3VmDTh"}):"",Ne(!0),Ge(u)}));return function(){return e.apply(this,arguments)}}(),Qe=function(){var e=(0,o.default)((function*(e,t){let n;const a=(0,r.default)((0,r.default)({},Ue),{},{importerAddress:(0,r.default)({},null==Ue?void 0:Ue.importerAddress)});"countryCodeOrigin"===e&&(n=t===String(M.SyntheticCountryCode.NotApplicable)?v.fbt._("Not Applicable",null,{hk:"2k1klN"}).toString():yield(0,M.getCountryName)(t),a.countryNameOrigin=n,a.countryCodeOriginError=""),"importerName"===e&&(a.importerNameError=(0,T.existsField)(t,(0,m.getMeUser)())||!qe()?"":v.fbt._("Add an importer name",null,{hk:"3UwP1T"})),a[e]=t||void 0,Ne(!0),Ge(a)}));return function(){return e.apply(this,arguments)}}(),Xe=(0,Z.jsx)(j.default,{type:"primary",onClick:()=>{let e=!0;const n=new G.Product({id:te.id,priceAmount1000:le,currency:ve,description:de||"",imageCdnUrl:te.imageCdnUrl,additionalImageCdnUrl:te.additionalImageCdnUrl,name:oe,retailerId:he,url:ce,isHidden:Ae,complianceInfo:(0,f.canSeeECommerceComplianceIndiaSoftEnforcement)(t.id.user)?{countryCodeOrigin:null==Ue?void 0:Ue.countryCodeOrigin,importerName:null==Ue?void 0:Ue.importerName,importerAddress:{street1:null==Ue?void 0:Ue.importerAddress.street1,street2:null==Ue?void 0:Ue.importerAddress.street2,postalCode:null==Ue?void 0:Ue.importerAddress.postalCode,city:null==Ue?void 0:Ue.importerAddress.city,region:null==Ue?void 0:Ue.importerAddress.region,countryCode:null==Ue?void 0:Ue.importerAddress.countryCode}}:void 0});var a;(()=>{const e=(0,m.getMeUser)();if(!qe()||!Be)return!1;const t=(0,r.default)((0,r.default)({},Ue),{},{importerAddress:(0,r.default)({},null==Ue?void 0:Ue.importerAddress)});if(!(0,T.existsField)(t.countryCodeOrigin,e))return t.countryCodeOriginError=v.fbt._("Add a country of origin",null,{hk:"3WA7X9"}),Ge(t),!0;if(!We())return!1;const{importerName:n,importerAddress:{street1:a,city:o,countryCode:i}}=t;let l=!1;return(0,T.existsField)(n,e)||(t.importerNameError=v.fbt._("Add an importer name",null,{hk:"3UwP1T"}),l=!0),(0,T.existsFieldIgnoreHardEnforcement)(a)||(t.importerAddress.street1Error=v.fbt._("Add an importer address line 1",null,{hk:"3HSMmN"}),l=!0),(0,T.existsFieldIgnoreHardEnforcement)(o)||(t.importerAddress.cityError=v.fbt._("Add an importer city",null,{hk:"1nq7dA"}),l=!0),(0,T.existsFieldIgnoreHardEnforcement)(i)||(t.importerAddress.countryCodeError=v.fbt._("Add an importer country",null,{hk:"3VmDTh"}),l=!0),!!l&&(Ge(t),!0)})()||(u?(0,U.logAddProductClick)((0,z.getProductCatalogContext)(J)):(0,U.logEditProductClick)(te,(0,z.getProductCatalogContext)(J)),_e(!0),u||Re?(q.QPL.markerStart(V.QuickLogMarkerId.WHATSAPP_PRODUCT_SAVE,{annotations:{bool:{IsNewProduct:!!u}}}),null===(a=$.current)||void 0===a||a.uploadImages().then((a=>{n.imageCdnUrl=a[0],n.additionalImageCdnUrl=a.slice(1);(u?t.addProduct:t.editProduct).call(t,n).then((t=>{Ye(t),e=!1,q.QPL.markerEnd(V.QuickLogMarkerId.WHATSAPP_PRODUCT_SAVE,q.QuickLogActionType.SUCCESS)})).catch((0,i.filteredCatch)(s.CatalogEditServerError,(t=>{e=!1,Ve(t,V.QuickLogMarkerId.WHATSAPP_PRODUCT_SAVE)}))).finally((()=>{e&&q.QPL.markerEnd(V.QuickLogMarkerId.WHATSAPP_PRODUCT_SAVE,q.QuickLogActionType.FAIL),_e(!1)}))})).catch((e=>{throw q.QPL.markerEnd(V.QuickLogMarkerId.WHATSAPP_PRODUCT_SAVE,q.QuickLogActionType.FAIL),_e(!1),e}))):(q.QPL.markerStart(V.QuickLogMarkerId.WHATSAPP_PRODUCT_SET_VISIBLE,{annotations:{string:{EntryPoint:"Product"}}}),(0,H.productVisibilitySet)([{productId:te.id.toString(),isHidden:n.isHidden}]).then((()=>{te.isHidden=n.isHidden,Ye(te),e=!1,q.QPL.markerEnd(V.QuickLogMarkerId.WHATSAPP_PRODUCT_SET_VISIBLE,q.QuickLogActionType.SUCCESS)})).catch((0,i.filteredCatch)(s.CatalogEditServerError,(t=>{e=!1,Ve(t,V.QuickLogMarkerId.WHATSAPP_PRODUCT_SET_VISIBLE)}))).finally((()=>{e&&q.QPL.markerEnd(V.QuickLogMarkerId.WHATSAPP_PRODUCT_SET_VISIBLE,q.QuickLogActionType.FAIL),_e(!1)}))))},disabled:!(()=>{if(""===oe.trim()||!1===Pe)return!1;const e=[Ce,be,Se,ke,Te];return We()&&e.push(null==Ue?void 0:Ue.importerNameError,null==Ue?void 0:Ue.importerAddress.street1Error,null==Ue?void 0:Ue.importerAddress.cityError,null==Ue?void 0:Ue.importerAddress.countryCodeError),qe()&&e.push(null==Ue?void 0:Ue.countryCodeOriginError),e.every((e=>!e))})(),a8nText:"product-edit-drawer-save-button",children:u?v.fbt._("Add to catalog",null,{hk:"3Dku2o"}):v.fbt._("Save",null,{hk:"44asBM"})}),Ze=(0,Z.jsxs)("div",{className:N.default.drawerHeader,children:[(0,Z.jsx)(K.TextHeader,{level:"2",weight:"normal",customSize:"inherit",children:u?v.fbt._("Add new item",null,{hk:"3DqBBM"}):v.fbt._("Edit item",null,{hk:"2qzKLB"})}),(0,Z.jsx)("div",{className:N.default.drawerHeaderButtonContainer,children:Xe})]}),Je=u?null:(0,Z.jsx)("div",{className:N.default.deleteButtonContainer,children:(0,Z.jsx)(j.default,{type:"warning",onClick:()=>{(0,b.handleProductDelete)(t,te,(0,z.getProductCatalogContext)(J),"Product").then((e=>{e&&(c.DrawerManager.closeDrawerMid(),null==w||w(te))}))},a8nText:"product-edit-drawer-delete-button",children:v.fbt._("Delete Item",null,{hk:"Frzv9"})})}),$e=(0,g.default)(N.default.productWrapper,{[N.default.isSending]:xe}),et=Oe?(0,Z.jsx)(O.default,{}):null,tt=xe?(0,Z.jsx)("div",{className:N.default.spinner,children:(0,Z.jsx)(Y.Spinner,{size:50,stroke:3})}):null,nt=(0,Z.jsxs)("div",{className:N.default.hiddenContainer,children:[(0,Z.jsx)(E.CheckBox,{id:"product-hidden-check",onChange:()=>{De((e=>!e))},checked:Ae,disabled:!1}),(0,Z.jsx)("label",{className:N.default.hiddenLabel,htmlFor:"product-hidden-check",children:v.fbt._("Hide item",null,{hk:"GjLlA"})}),(0,Z.jsx)("div",{className:N.default.hiddenDescr,children:v.fbt._("When you hide an item, customers wont see it in your catalog.",null,{hk:"1crP8q"})})]});return(0,Z.jsxs)(L.default,{theme:"catalog",onDrop:e=>{var t;null===(t=$.current)||void 0===t||t.handleFilePick(e)},onDragChange:e=>{Le(e)},children:[et,(0,Z.jsx)(R.DrawerHeader,{a8n:"catalog-link-title",title:Ze,type:R.DRAWER_HEADER_TYPE.SMALL,onBack:n,onCancel:a,focusBackOrCancel:!0}),(0,Z.jsx)(A.default,{children:(0,Z.jsxs)("div",{className:$e,children:[tt,(0,Z.jsx)(W.default,{product:te,maxImageCount:G.MAX_PRODUCT_IMAGES,onChange:e=>{let t="";0===e.length&&(t=v.fbt._("Add at least one image",null,{hk:"4tbVYS"})),Me(t),Ie(e.length>0),Ne(!0)},ref:$,error:Te}),(0,Z.jsx)(Q.TextInput,{a8n:"product-edit-drawer-name-input",value:oe,placeholder:v.fbt._("Name",null,{hk:"46mqET"}),onChange:e=>{ie(e),ye(""===e.trim()?v.fbt._("Add a title",null,{hk:"3QauyV"}):""),Ne(!0)},theme:"small",customStyleThemes:["desaturated"],maxLength:150,error:Ce,title:v.fbt._("Name",null,{hk:"47pzCN"})}),ne(ve)&&(0,Z.jsx)(Q.TextInput,{a8n:"product-edit-drawer-price-input",value:me,placeholder:(()=>{const e=I.formatAmount1000ToParts(ve,0).symbol,t=null!=te.priceAmount1000,n=v.fbt._("Price {currencySymbol} (Optional)",[v.fbt._param("currencySymbol",e)],{hk:"3ag5UF"});if((0,d.isLegacyWebdBackend)()||t)return n;const a=(0,y.getABPropConfigValue)("smb_product_price_label");return"test_recommended"===a?v.fbt._("Price {currencySymbol} (Recommended)",[v.fbt._param("currencySymbol",e)],{hk:"3kOjhT"}):"test_empty"===a?v.fbt._("Price {currencySymbol}",[v.fbt._param("currencySymbol",e)],{hk:"2XAKA0"}):n})(),onChange:e=>{const t=I.valueFromString(ve,e);let n="";""===e||I.validatePriceString(ve,e,G.MIN_PRICE,G.MAX_PRICE)||(n=v.fbt._("Enter a valid price",null,{hk:"3JgcXg"})),se(""===e?null:t),ge(`${e}`),je(n),Ne(!0)},theme:"small",maxLength:30,customStyleThemes:["desaturated"],error:be,title:v.fbt._("Price",null,{hk:"1q6KRK"})}),(0,Z.jsx)(Q.TextInput,{a8n:"product-edit-drawer-description-input",value:de,placeholder:v.fbt._("Description (Optional)",null,{hk:"38PzGH"}),onChange:e=>{ue(e),Ne(!0)},theme:"small",maxLength:5e3,customStyleThemes:["desaturated"],multiline:!0,title:v.fbt._("Description",null,{hk:"2sGitZ"})}),(0,Z.jsx)(Q.TextInput,{a8n:"product-edit-drawer-link-input",value:ce,placeholder:v.fbt._("Link (Optional)",null,{hk:"18F36s"}),onChange:e=>{let t="";""===e||p.default.isValid(e)||(t=v.fbt._("URL is incorrect",null,{hk:"xiOtm"})),fe(e),Ee(t),Ne(!0)},onBlur:()=>{""===ce||p.default.isHttps(ce)||p.default.isHttp(ce)||fe(`https://${ce}`)},theme:"small",customStyleThemes:["desaturated"],maxLength:75,error:Se,managed:!0,title:v.fbt._("Link",null,{hk:"1yLSRM"})}),(0,Z.jsx)(Q.TextInput,{a8n:"product-edit-drawer-retailer-id-input",value:he,placeholder:v.fbt._("Item Code (Optional)",null,{hk:"MWG64"}),onChange:e=>{pe(e),we(""),Ne(!0)},theme:"small",customStyleThemes:["desaturated"],maxLength:100,error:ke,title:v.fbt._("Item code",null,{hk:"6trPE"})}),(0,f.canSeeECommerceComplianceIndiaSoftEnforcement)(t.id.user)?(0,Z.jsx)(ee,{isComplianceHardEnforced:qe(),isComplianceInfoAvailable:Be,showComplianceInfoImporterAddress:We(),complianceInfo:Ue,onComplianceInfoChange:Qe,onComplianceInfoImporterAddressChange:Ke}):null,nt,Je]})})]},"catalog-link-drawer")};var r=a(n(81109)),o=a(n(48926)),i=n(50796),l=a(n(45095)),s=n(92574),d=n(88555),u=n(81572),c=n(41455),f=n(8139),h=n(94816),p=a(n(76139)),m=n(78820),g=a(n(94184)),v=n(48360),x=n(67294),_=(a(n(56720)),n(87550)),C=n(35461),y=n(57849),b=n(47217),j=a(n(39770)),S=n(99989),E=n(16593),k=n(33049),w=n(27105),T=n(83657),M=n(9978),P=n(92059),I=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=J(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(n(39519)),O=a(n(54896)),L=a(n(60453)),A=a(n(69637)),D=n(27394),R=n(94790),N=a(n(18829)),B=n(29623),F=a(n(48846)),U=n(77975),G=n(9468),H=n(21374),z=n(97567),W=a(n(30327)),q=n(48870),V=n(27798),Y=n(11054),K=n(13923),Q=n(90011),X=n(50452),Z=n(85893);function J(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(J=function(e){return e?n:t})(e)}const $={complianceInfoHelpCenterBanner:{paddingTop:"nlnf8xo7",paddingEnd:"f9ovudaz",paddingBottom:"jzp2c175",paddingStart:"gx1rr48f"}};function ee(e){let{isComplianceInfoAvailable:t,isComplianceHardEnforced:n,showComplianceInfoImporterAddress:a,complianceInfo:r,onComplianceInfoChange:i,onComplianceInfoImporterAddressChange:l}=e;const[s,d]=(0,x.useState)([]),c=(0,x.useMemo)((()=>{const e=(0,m.getMeUser)().user;return s.length>0&&(0,f.canSeeECommerceComplianceIndiaCountryOriginExemptBusinessJourney)(e)?(0,M.bubbleCountryOnListOfCountries)(s,k.COMPLIANCE_INFO_CODES.INDIA,!0):s}),[s]),h=(0,x.useMemo)((()=>{const e=(0,m.getMeUser)().user;if(s.length>0&&(0,f.canSeeECommerceComplianceIndiaCountryOriginExemptBusinessJourney)(e)){let e=k.COMPLIANCE_INFO_CODES.INDIA;return"string"==typeof(null==r?void 0:r.countryCodeOrigin)&&""!==r.countryCodeOrigin&&(e=r.countryCodeOrigin),(0,M.formatCountriesOfOrigin)(s,e)}return s}),[s,null==r?void 0:r.countryCodeOrigin]),p=e=>`${e.toString()} (${v.fbt._("Optional",null,{hk:"4vf9yI"}).toString()})`,g=e=>!r||Object.values(r.importerAddress).every((e=>!e))?p(e):e;return(0,x.useEffect)((()=>{let e=!0;return(0,o.default)((function*(){const t=(0,m.getMeUser)().user;if((0,f.canSeeECommerceComplianceIndiaSoftEnforcement)(t)){const t=yield(0,M.getCountries)();e&&d(t)}}))(),()=>{e=!1}}),[]),t&&s.length?(0,Z.jsxs)("div",{a8n:"product-edit-drawer-compliance",children:[(0,Z.jsx)(Q.TextInput,{a8n:"product-edit-drawer-compliance-country-of-origin-input",value:null==r?void 0:r.countryNameOrigin,placeholder:v.fbt._("Country of Origin",null,{hk:"2yl0F7"}),onChange:()=>{},theme:"small",customStyleThemes:["desaturated"],managed:!0,onFocus:()=>u.Cmd.showCountrySelector(v.fbt._("Country of Origin",null,{hk:"2yl0F7"}),null==r?void 0:r.countryCodeOrigin,h,(e=>{i("countryCodeOrigin",e)})),error:null==r?void 0:r.countryCodeOriginError}),a&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(Q.TextInput,{a8n:"product-edit-drawer-compliance-importer-name-input",value:null==r?void 0:r.importerName,placeholder:g(v.fbt._("Importer Name",null,{hk:"3DW3Nn"})),onChange:e=>{i("importerName",e)},theme:"small",customStyleThemes:["desaturated"],maxLength:k.COMPLIANCE_INFO_LENGTH.IMPORTER_NAME,error:null==r?void 0:r.importerNameError}),(0,Z.jsx)(Q.TextInput,{a8n:"product-edit-drawer-compliance-importer-address-street-1-input",value:null==r?void 0:r.importerAddress.street1,placeholder:g(v.fbt._("Importer Address Line 1",null,{hk:"1ORfyh"})),onChange:e=>{l("street1",e)},theme:"small",customStyleThemes:["desaturated"],maxLength:k.COMPLIANCE_INFO_LENGTH.STREET1,error:null==r?void 0:r.importerAddress.street1Error}),(0,Z.jsx)(Q.TextInput,{a8n:"product-edit-drawer-compliance-importer-address-street-2-input",value:null==r?void 0:r.importerAddress.street2,placeholder:p(v.fbt._("Importer Address Line 2",null,{hk:"2pYt7Y"})),onChange:e=>{l("street2",e)},theme:"small",customStyleThemes:["desaturated"],maxLength:k.COMPLIANCE_INFO_LENGTH.STREET2}),(0,Z.jsx)(Q.TextInput,{a8n:"product-edit-drawer-compliance-importer-address-city-input",value:null==r?void 0:r.importerAddress.city,placeholder:g(v.fbt._("Importer City",null,{hk:"4c06Q3"})),onChange:e=>{l("city",e)},theme:"small",customStyleThemes:["desaturated"],maxLength:k.COMPLIANCE_INFO_LENGTH.CITY,error:null==r?void 0:r.importerAddress.cityError}),(0,Z.jsx)(Q.TextInput,{a8n:"product-edit-drawer-compliance-importer-address-region-input",value:null==r?void 0:r.importerAddress.region,placeholder:p(v.fbt._("Importer Region",null,{hk:"3MkbQD"})),onChange:e=>{l("region",e)},theme:"small",customStyleThemes:["desaturated"],maxLength:k.COMPLIANCE_INFO_LENGTH.REGION}),(0,Z.jsx)(Q.TextInput,{a8n:"product-edit-drawer-compliance-importer-address-country-code-input",value:null==r?void 0:r.importerAddress.countryName,placeholder:g(v.fbt._("Importer Country",null,{hk:"3ar6sr"})),onChange:()=>{},theme:"small",customStyleThemes:["desaturated"],managed:!0,onFocus:()=>u.Cmd.showCountrySelector(v.fbt._("Importer Country",null,{hk:"3ar6sr"}),null==r?void 0:r.importerAddress.countryCode,c,(e=>{l("countryCode",e)})),error:null==r?void 0:r.importerAddress.countryCodeError}),(0,Z.jsx)(Q.TextInput,{a8n:"product-edit-drawer-compliance-importer-address-postal-code-input",value:null==r?void 0:r.importerAddress.postalCode,placeholder:p(v.fbt._("Importer Zip/Postal Code",null,{hk:"Bbhqf"})),onChange:e=>{l("postalCode",e)},theme:"small",customStyleThemes:["desaturated"],maxLength:k.COMPLIANCE_INFO_LENGTH.POSTAL_CODE}),(0,Z.jsx)(w.ComplianceInfoHelpCenterBanner,{xstyle:$.complianceInfoHelpCenterBanner})]})]}):(0,Z.jsx)(B.FlexRow,{align:"center",justify:"center",children:(0,Z.jsx)(F.default,{children:(0,Z.jsx)(Y.Spinner,{})})})}},63935:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(64369)),o=a(n(94184)),i=n(48360),l=n(67294),s=a(n(33889)),d=a(n(44356)),u=a(n(99360)),c=a(n(60453)),f=a(n(69637)),h=n(27394),p=n(94790),m=a(n(33308)),g=n(12591),v=a(n(3840)),x=n(11054),_=n(13923),C=n(85893);const y="https://www.facebook.com/legal/terms",b="https://www.facebook.com/policies/commerce";function j(e,t){const{onBack:n,onAddProductClick:a,isCreatingCatalogFn:l}=e,j=l(),S=(0,C.jsx)("div",{className:v.default.placeholderIcon}),E=(0,C.jsx)(u.default,{href:y,onClick:e=>{e.preventDefault(),(0,g.openExternalLink)(y)},children:i.fbt._("Facebook Product",null,{hk:"3JyFEa"})}),k=(0,C.jsx)(u.default,{href:b,onClick:e=>{e.preventDefault(),(0,g.openExternalLink)(b)},children:i.fbt._("Facebook Commercial Terms",null,{hk:"3LS54M"})}),w=(0,C.jsx)(u.default,{href:r.default.WA_COMMERCE_POLICY_URL,onClick:e=>{e.preventDefault(),(0,g.openExternalLink)(r.default.WA_COMMERCE_POLICY_URL)},children:i.fbt._("WhatsApp Commerce Policies",null,{hk:"2wf95I"})}),T=i.fbt._("By using this feature, you're using a {fb_product_link} and agree that the {fb_commerce_link} and {wa_commerce_policy_link} apply.",[i.fbt._param("fb_product_link",E),i.fbt._param("fb_commerce_link",k),i.fbt._param("wa_commerce_policy_link",w)],{hk:"14xbJv"}),M=(0,o.default)({[v.default.isLoading]:j}),P=j?(0,C.jsx)("div",{className:v.default.spinner,children:(0,C.jsx)(x.Spinner,{size:50,stroke:3})}):null,I=j?(0,C.jsx)(s.default,{onClick:()=>{},theme:"default",idle:!!j,a8nText:"add-item"}):(0,C.jsx)(h.DrawerContext.Consumer,{children:()=>(0,C.jsx)(s.default,{onClick:()=>{a()},theme:"default",idle:!1,a8nText:"add-item"})});return(0,C.jsxs)(c.default,{ref:t,children:[(0,C.jsx)(p.DrawerHeader,{title:i.fbt._("Catalog",null,{hk:"3YVOSV"}),type:p.DRAWER_HEADER_TYPE.LARGE,onBack:n}),(0,C.jsx)(f.default,{className:M,children:(0,C.jsxs)(m.default,{theme:"padding-small",animation:!1,children:[P,(0,C.jsx)(_.TextDiv,{theme:"title",children:i.fbt._("Add items to your catalog so customers can see what you're offering",null,{hk:"3z35i1"})}),I,(0,C.jsx)(_.TextDiv,{theme:"plain",children:T}),(0,C.jsxs)("div",{className:v.default.placeholderContainer,children:[(0,C.jsx)(d.default,{theme:"add-item-placeholder",image:S,customImage:!0,className:v.default.addItemPlaceholder,primary:"",secondary:"",idle:!0}),(0,C.jsx)("div",{className:v.default.divider}),(0,C.jsx)(d.default,{theme:"add-item-placeholder",image:S,customImage:!0,className:v.default.addItemPlaceholder,primary:"",secondary:"",idle:!0}),(0,C.jsx)("div",{className:v.default.divider})]})]})})]},"catalog-link-drawer")}var S=(0,l.forwardRef)(j);t.default=S},14746:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ProductInfoDrawer=function(e){const{onCancel:t,collectionId:n,catalog:a,onEditProduct:I,onShareProduct:O,isPushed:L=!0}=e,A=(0,l.useContext)(h.DrawerContext),D=(0,d.useModelValues)(e.product,["id","catalogWid","name","priceAmount1000","description","productImageCollection","reviewStatus","url","canAppeal","imageCdnUrl","retailerId","currency","isHidden"]),[R,N]=(0,l.useState)(!0);(0,l.useEffect)((()=>{const e=(0,o.getMaybeMeUser)();L&&(0,x.qplAnnotateProductView)(!(null==e?void 0:e.equals(D.catalogWid))),a.pullProduct(D.id.toString(),L).then((()=>{L&&(0,x.qplEndProductView)(k.QuickLogActionType.SUCCESS)})).catch((()=>{L&&(0,x.qplEndProductView)(k.QuickLogActionType.FAIL)})).finally((()=>{N(!1)})),(0,v.logProductDetailView)({product:D,catalogContext:(0,C.getProductCatalogContext)(A),collectionId:n})}),[]);const B=(0,o.getMaybeMeUser)(),F=w.StatusCollection.get(B),U=(0,M.jsx)(T.TextDiv,{theme:"muted",xstyle:[P.businessInfoTitle,r.uiPadding.vert10,r.uiPadding.horiz20],children:i.fbt._("Business Info",null,{hk:"20HLtr"})}),G=D.reviewStatus!==y.PRODUCT_REVIEW_STATUS.APPROVED||D.isHidden,H=(0,M.jsxs)("div",{children:[(0,M.jsx)("div",{className:(0,s.default)(P.buttonSeparator,r.uiPadding.all0,r.uiPadding.top3,r.uiMargin.end32),children:(0,M.jsx)(u.default,{type:"strong",onClick:()=>{I&&I(D)},a8nText:"product-info-drawer edit-button",children:i.fbt._("Edit",null,{hk:"4aIVNd"})})}),(0,M.jsx)(u.default,{type:"strong-primary",onClick:()=>{O&&O(D)},disabled:G,a8nText:"product-info-drawer share-button",children:i.fbt._("Share",null,{hk:"3RmUA"})})]}),z=(0,M.jsxs)("div",{className:(0,s.default)(P.drawerHeader),children:[(0,M.jsx)("div",{className:(0,s.default)(P.productName),children:D.name}),(0,M.jsx)("div",{className:(0,s.default)(P.drawerHeaderButtonContainer,r.uiPadding.all0,r.uiPadding.end10),children:H})]}),W=F?(0,M.jsx)(m.default,{title:U,theme:"no-padding",children:(0,M.jsx)(E.default,{status:F})}):null,q=R?(0,M.jsx)(g.default,{}):(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(S.default,{product:D,isAvailable:!0,fetching:!1}),(0,M.jsx)(j.default,{product:D}),(0,M.jsx)(b.default,{product:D,collectionId:n,onSendChat:()=>{t(),(0,_.sendProductToChat)(D,a),(0,v.logProductMessageBusinessClick)(D,(0,C.getProductCatalogContext)(A))},isAvailable:!0})]});return(0,M.jsxs)(c.default,{theme:"catalog",children:[(0,M.jsx)(p.DrawerHeader,{a8n:"catalog-product-title",title:z,type:p.DRAWER_HEADER_TYPE.SMALL,onCancel:t,headingLevel:"2",focusBackOrCancel:!0}),(0,M.jsxs)(f.default,{children:[(0,M.jsx)(m.default,{theme:"center-column-fixed-width",children:q}),(0,M.jsx)("div",{className:(0,s.default)(P.productWrapper),children:W})]})]},"catalog-link-drawer")};var r=n(28298),o=n(78820),i=n(48360),l=n(67294),s=a(n(56720)),d=n(35461),u=a(n(39770)),c=a(n(60453)),f=a(n(69637)),h=n(27394),p=n(94790),m=a(n(33308)),g=a(n(29796)),v=n(77975),x=n(82145),_=n(96519),C=n(97567),y=n(5641),b=a(n(16481)),j=a(n(11956)),S=a(n(33382)),E=a(n(37867)),k=n(48870),w=n(46133),T=n(13923),M=n(85893);const P={drawerHeader:{display:"p357zi0d",alignItems:"gndfcl4n"},productName:{overflowX:"gfz4du6o",overflowY:"r7fjleex",fontSize:"cqiun4t2",fontWeight:"hnx8ox4h",textOverflow:"lhj4utae"},buttonSeparator:{display:"l7jjieqr"},drawerHeaderButtonContainer:{marginStart:"isfiuinm"},productWrapper:{width:"tcisnlar",marginTop:"tt8xd2xn",marginEnd:"k1jo73ug",marginBottom:"mpdn4nr2",marginStart:"isfiuinm"},businessInfoTitle:{color:"izlvswng"}}},11956:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{product:t}=e;const n=(0,x.jsx)(u.default,{href:o.default.WA_COMMERCE_POLICY_URL,onClick:e=>{e.preventDefault(),(0,f.openExternalLink)(o.default.WA_COMMERCE_POLICY_URL)},children:h.default.t(397)});if(t.reviewStatus===m.PRODUCT_REVIEW_STATUS.APPROVED)return t.isHidden?(0,x.jsxs)("div",{className:(0,s.default)(_),children:[(0,x.jsx)("div",{className:(0,s.default)(C),children:(0,x.jsx)(g.default,{name:"hide"})}),(0,x.jsx)("div",{className:(0,s.default)(y),children:(0,x.jsx)(v.TextDiv,{children:l.fbt._("You hid this item. Your customers can't see it in your catalog",null,{hk:"28Rw4y"})})})]}):null;if(t.reviewStatus===m.PRODUCT_REVIEW_STATUS.REJECTED){if(!0===t.canAppeal){const e=l.fbt._("This item wasn't approved because it doesn't follow our product or service guidelines. {learn_more_link}.",[l.fbt._param("learn_more_link",n)],{hk:"3r1bOw"}),a=(0,x.jsx)(u.default,{onClick:function(){i.ModalManager.open((0,x.jsx)(c.DrawerContext.Consumer,{children:e=>(0,x.jsx)(d.default,{product:t,sessionId:(0,p.getProductCatalogSessionId)(e)})}))},a8n:"product-appeal-button",children:l.fbt._("request another review",null,{hk:"1edAPz"})}),o=(0,x.jsx)("span",{className:(0,s.default)(b),tabIndex:"0",children:l.fbt._("If you feel this is not correct, you can {request_review_link}.",[l.fbt._param("request_review_link",a)],{hk:"2Vozbp"})});return(0,x.jsxs)("div",{className:(0,s.default)(_),"data-a8n":r.default.key("product-appeal-rejected-initial-review"),children:[(0,x.jsx)("div",{className:(0,s.default)(C),children:(0,x.jsx)(g.default,{name:"info"})}),(0,x.jsxs)("div",{className:(0,s.default)(y),children:[e,o]})]})}const e=l.fbt._("We reviewed this item again and found it didn't follow product or service guidelines. {learn_more_link}.",[l.fbt._param("learn_more_link",n)],{hk:"4yu8I0"});return(0,x.jsx)("div",{className:(0,s.default)(_),"data-a8n":r.default.key("product-appeal-rejected-final"),children:e})}if(t.reviewStatus===m.PRODUCT_REVIEW_STATUS.NO_REVIEW||t.reviewStatus===m.PRODUCT_REVIEW_STATUS.OUTDATED){const e=t.isHidden?l.fbt._("This item is being reviewed. You hid it, so customers wont see it in your catalog when its approved. {learn_more_link}.",[l.fbt._param("learn_more_link",n)],{hk:"mqMRu"}):l.fbt._("This item is being reviewed. If its been approved, your customers will be able to see it on your profile. {learn_more_link}.",[l.fbt._param("learn_more_link",n)],{hk:"1sk3Z"});return(0,x.jsx)("div",{className:(0,s.default)(_),"data-a8n":r.default.key("product-appeal-pending-initial-review"),children:e})}if(!1===t.canAppeal){const e=l.fbt._("Your appeal was submitted. If its approved, your item will be added to your catalog. If its not approved, youll be notified.",null,{hk:"4aNdXt"});return(0,x.jsx)("div",{className:(0,s.default)(_),"data-a8n":r.default.key("product-appeal-pending-appeal"),children:e})}return null};var r=a(n(99964)),o=a(n(64369)),i=n(14597),l=n(48360),s=a(n(56720)),d=a(n(43318)),u=a(n(99360)),c=n(27394),f=n(12591),h=a(n(14296)),p=n(97567),m=n(5641),g=a(n(23217)),v=n(13923),x=n(85893);const _={display:"p357zi0d",paddingTop:"a71rq12o",paddingEnd:"bcymb0na",paddingBottom:"pcbmd69e",paddingStart:"e8k79tju",marginBottom:"mpdn4nr2",lineHeight:"r5qsrrlp",backgroundColor:"ronsgs3n"},C={display:"p357zi0d",flex:"n5hs2j7m",alignItems:"gndfcl4n"},y={marginStart:"r6x3u63k"},b={display:"l7jjieqr",marginTop:"a4rz4n5c",fontSize:"f8jlpxt4"}},37867:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,o.useModelValues)(e.status,["status"]);return(0,d.jsx)(i.default,{image:(0,d.jsx)(s.DetailImage,{id:(0,r.getMaybeMeUser)()}),primary:l.Conn.pushname,secondary:t.status,idle:!0})};var r=n(78820),o=n(35461),i=a(n(44356)),l=n(17239),s=n(88984),d=n(85893)},87728:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{businessProfile:t,catalog:n,openCatalog:a=m}=e;const s=(0,i.hasShop)(t),g=Boolean(s&&f.ServerProps.shopsProductGrid);if((0,o.useEffect)((()=>{(0,u.logShopsManagementEvent)(c.default.SHOPS_MANAGEMENT_ACTION.ACTION_SHOPS_PRODUCT_PREVIEW_VISIBLE,{shouldLogJid:!1,isShopsProductPreviewVisible:g})}),[g]),s)return g?(0,p.jsx)(h.default,{isEditMode:!0,subtitle:d.default.t(434),businessProfile:t,catalog:n,productsToShow:3}):null;return(0,p.jsx)(l.default,{catalog:n,onProductDetail:a,onProductCatalog:()=>{a()},productsToShow:3,catalogEntryLabel:null==n?r.fbt._("Add catalog",null,{hk:"2iihM5"}):r.fbt._("View or edit catalog",null,{hk:"354QjL"}),showProductPlaceholders:!0,seeMoreOverlay:!0,sectionTheme:"refresh"})};var r=n(48360),o=n(67294),i=n(94010),l=a(n(42953)),s=n(87912),d=a(n(14296)),u=n(67883),c=a(n(11339)),f=n(64551),h=a(n(96222)),p=n(85893);function m(e){(0,s.openCatalogManagementFlow)(e,c.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_PROFILE)}},75260:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(48360),o=n(67294),i=a(n(56720)),l=a(n(49107)),s=n(71174),d=n(65417),u=a(n(23217)),c=n(18644),f=a(n(24717)),h=n(85893);const p={zIndex:"thghmljt",display:"p357zi0d",alignItems:"gndfcl4n",justifyContent:"ac2vgrno",width:"h4dw90qs",marginTop:"dj1c3cmq",marginEnd:"ds60debm",marginBottom:"or9x5nie",marginStart:"svoq16ka",color:"bot80yxp",pointerEvents:"m62443ks",backgroundColor:"ddl5anf2",borderTopStartRadius:"r18xjin9",borderTopEndRadius:"pz6oj2k2",borderBottomEndRadius:"sa2xs5zj",borderBottomStartRadius:"n58sa971"},m={transform:"t21h2yns"};function g(e){const{collection:t,theme:n,onDelete:a,onEdit:g,onSeeCollection:v,canManage:x}=e,[_]=(0,o.useState)(!1),[C,y]=(0,o.useState)(null),b=e=>{e.preventDefault(),e.stopPropagation(),a&&a(t)},j=e=>{e.preventDefault(),e.stopPropagation(),g&&g(t)},S=()=>{y(null)},E=(0,h.jsx)("div",{className:(0,i.default)(p),children:(0,h.jsx)("div",{className:(0,i.default)(m),children:(0,h.jsx)(u.default,{name:"collections_folder"})})}),k=(0,h.jsx)(d.EmojiText,{text:t.name,ellipsify:!0,titlify:!0});let w;return C&&(w=(0,h.jsx)(c.UIE,{displayName:"CollectionContextMenu",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:S,children:(0,h.jsx)(f.default,{contextMenu:C})})),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(l.default,{customImage:!0,image:E,primary:k,theme:n,active:_,contextEnabled:()=>e.canManage,onContext:e=>{if(C)return void y(null);const t=[];x&&(t.push((0,h.jsx)(s.DropdownItem,{a8n:"mi-edit-collection",action:j,children:r.fbt._("Edit",null,{hk:"Xow6E"})},"EditLabel")),t.push((0,h.jsx)(s.DropdownItem,{a8n:"mi-delete-collection",action:b,children:r.fbt._("Delete",null,{hk:"1rLhBB"})},"DeleteLabel"))),y({menu:t,event:e.event,anchor:e.anchor})},onClick:e=>{e.preventDefault(),e.stopPropagation(),v&&v(t)}},t.id.toString()),w]})}g.defaultProps={theme:"collection-edit",isMuted:!1};var v=g;t.default=v},92625:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{data:t,canManage:n,onEditCollection:a,onSeeCollection:m}=e,g=(0,o.useModelValues)(e.catalog,["collections"]),v=(0,r.useMemo)((()=>t.map((e=>e.collection?{itemKey:e.collection.id,collection:e.collection}:null)).filter(Boolean)),[t]);return(0,p.jsx)(c.default,{flatListControllers:[e.flatListController],children:(0,p.jsx)(u.FlatList,{flatListController:e.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:v,renderItem:e=>{let{collection:t}=e;return(0,p.jsx)(d.DrawerContext.Consumer,{children:e=>(0,p.jsx)(s.default,{collection:t,canManage:n,onDelete:()=>((e,t)=>{(0,i.handleCollectionDelete)((0,h.unproxy)(g),e,t)})(t,(0,f.getProductCatalogContext)(e)),onEdit:a,onSeeCollection:m})})},defaultItemHeight:l.PRODUCT_LIST_ITEM_HEIGHT})})};var r=n(67294),o=n(35461),i=n(47217),l=n(64481),s=a(n(75260)),d=n(27394),u=n(47915),c=a(n(44942)),f=n(97567),h=n(18146),p=n(85893)},95416:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(78820),o=n(48360),i=n(67294),l=a(n(56720)),s=a(n(51799)),d=a(n(59312)),u=a(n(16223)),c=a(n(90886)),f=a(n(33889)),h=n(99989),p=n(64481),m=n(10448),g=a(n(92625)),v=a(n(60453)),x=a(n(69637)),_=n(94790),C=a(n(30855)),y=a(n(29796)),b=n(48870),j=n(27798),S=n(85893);const E={display:"btb1m7bk",justifyContent:"ac2vgrno",height:"jdwybkuq"};function k(e,t){const{setScrollOffset:n,editCollection:a,onSeeCollection:k}=e,w=(0,d.default)(),T=(0,s.default)((()=>w()),100),M=(0,u.default)((()=>new C.default)),[P,I]=(0,i.useState)(!0),[O,L]=(0,i.useState)(null),[A,D]=(0,i.useState)(null),R=(0,i.useMemo)((()=>{const e=(0,r.getMeUser)();return h.CatalogCollection.get(e)}),[]);(0,i.useEffect)((()=>{const{isPushed:t=!0}=e;if(R){const e=new m.CollectionsDataSource(R,!0,p.PRODUCT_LIST_ITEM_HEIGHT,t);R.collections.on("add remove",T);const n=new m.CatalogListItemScrollHelper(e);L(e),D(n),e.loadInitialItems().then((()=>{I(!1),t&&b.QPL.markerEnd(j.QuickLogMarkerId.WHATSAPP_COLLECTIONS_MANAGEMENT_VIEW,b.QuickLogActionType.SUCCESS)})).catch((()=>{t&&b.QPL.markerEnd(j.QuickLogMarkerId.WHATSAPP_COLLECTIONS_MANAGEMENT_VIEW,b.QuickLogActionType.FAIL)}))}}),[]);const N=(0,c.default)(((e,t)=>{null==n||n(t.scrollTop),(null==A?void 0:A.willLoadMore(t))&&I(!0),null==A||A.onScroll(e,t).then((e=>{e&&I(!1)})).catch((e=>{throw I(!1),e}))}),100);return(0,S.jsxs)(v.default,{ref:t,theme:"products",onDrop:e.onBack,children:[(0,S.jsx)(_.DrawerHeader,{title:o.fbt._("Collections",null,{hk:"I9pEH"}),type:_.DRAWER_HEADER_TYPE.LARGE,onBack:e.onBack,menu:(0,S.jsx)(S.Fragment,{})}),(0,S.jsx)(x.default,{onScroll:e=>{e.currentTarget&&N(e,e.currentTarget)},flatListControllers:[M.current],scrollOffset:e.scrollOffset,children:R&&O?(0,S.jsxs)("div",{children:[(0,S.jsx)(f.default,{onClick:()=>{a(null)},theme:"collections",title:o.fbt._("New collection",null,{hk:"2Q4UnS"})}),(0,S.jsx)(g.default,{canManage:!0,catalog:R,onEditCollection:a,data:O.getData(),flatListController:M.current,onSeeCollection:k}),P&&(0,S.jsx)("div",{className:(0,l.default)(E),children:(0,S.jsx)(y.default,{})})]}):null})]})}var w=(0,i.forwardRef)(k);t.default=w},30327:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(72312),o=n(15461),i=n(94816),l=a(n(40436)),s=n(48360),d=n(67294),u=(a(n(56720)),n(80666)),c=n(78986),f=n(58668),h=n(43257),p=a(n(34949)),m=a(n(39658)),g=n(3013),v=n(48870),x=n(27798),_=a(n(23217)),C=n(50452),y=a(n(1784)),b=n(85893);const j={btnDelete:{position:"lhggkp7q",top:"hdpg1tjz",end:"ltcz4qz9",zIndex:"mb8var44",color:"k17s6i4e",filter:"rhe1kc9j"},btnAdd:{display:"p357zi0d",flexDirection:"f8m0rgwh",alignItems:"gndfcl4n",justifyContent:"ac2vgrno",width:"jkv2xdwy",height:"sptw4ec9",fontSize:"lak21jic",fontWeight:"hnx8ox4h",lineHeight:"gz7w46tb",letterSpacing:"hql59cr1"}};function S(e){let{images:t,deleteImage:n}=e;return t.filter((e=>e.mediaData)).map(((e,t)=>(0,b.jsxs)("div",{className:m.default.imageTile,children:[(0,b.jsx)(y.default,{xstyle:j.btnDelete,"aria-label":s.fbt._("Remove image number {imageNumber}",[s.fbt._param("imageNumber",t+1)],{hk:"11vQtK"}),a8nText:"delete-image",onClick:()=>n(e),children:(0,b.jsx)(_.default,{className:m.default.deleteIcon,name:"x-alt"})}),(0,b.jsx)(g.ProductThumb,{mediaData:e.mediaData,className:m.default.imageThumb})]},e.mediaData.filehash)))}function E(e){let{inputRef:t,handleFilePick:n}=e;return(0,b.jsx)("input",{ref:t,type:"file",accept:h.IMAGE_MIMES,style:{display:"none"},onChange:n,multiple:!0})}function k(e){let{onAddFileClick:t}=e;return(0,b.jsx)("div",{className:m.default.btnAddContainer,children:(0,b.jsxs)(y.default,{xstyle:j.btnAdd,"aria-label":s.fbt._("Add additional image",null,{hk:"1zIuu3"}),onClick:t,a8nText:"add-image",children:[(0,b.jsx)(_.default,{name:"camera"}),(0,b.jsx)("div",{className:m.default.btnAddText,children:s.fbt._("Add Images",null,{hk:"3yrGBr"})})]})})}function w(e){let{error:t}=e;return(0,b.jsx)("div",{className:m.default.errorMessage,role:"alert",children:t})}function T(e,t){const{maxImageCount:n,onChange:a,error:g,product:_}=e,y=(0,d.useRef)(null),[j,T]=(0,d.useState)((()=>_.productImageCollection.filter((e=>!e.old)).map((e=>({url:e.mediaUrl,mediaData:e.mediaData}))))),M=e=>{e.mediaPrep.waitForPrep().then((t=>{if(!(e=>!(j.filter((t=>t.mediaData.filehash===e.filehash)).length>0&&(i.ToastManager.open((0,b.jsx)(C.Toast,{id:(0,C.genId)(),msg:s.fbt._("Two or more images are the same. Delete any duplicates and try again.",null,{hk:"3qIMS6"})})),1)))(t))return;t.mediaStage=f.MEDIA_DATA_STAGE.RESOLVED,t.renderableUrl=e.fullPreview;const n=t.mediaBlob;!n||n instanceof p.default||p.default.createFromData(n,n.type).then((e=>{t.mediaBlob=e}));const r=[...j,{url:null,mediaData:t}];T(r),null==a||a(r)}))},P=e=>{(0,r.getFiles)(e,h.IMAGE_MIMES).then((e=>{const t=n-j.length;e.length>t&&i.ToastManager.open((0,b.jsx)(C.Toast,{msg:s.fbt._("You've reached the maximum number of images to add.",null,{hk:"2ra3Nx"}),duration:6e3,action:{onAction:()=>{},actionText:s.fbt._("GOT IT",null,{hk:"175geM"}),dismiss:!0,theme:"success"},id:(0,C.genId)()})),e.slice(0,n-j.length).map((e=>({file:e,filename:e.name,mimetype:e.type,type:o.MSG_TYPE.PRODUCT}))).map((e=>{var t;const n=new u.AttachMedia({file:Promise.resolve(e)});return null===(t=n.processPromise)||void 0===t?void 0:t.then((()=>{M(n)}))}))})),e.target.value&&(e.target.value="")},I=()=>{const e=j.filter((e=>null==e.url)).length;v.QPL.markerAnnotate(x.QuickLogMarkerId.WHATSAPP_PRODUCT_SAVE,{int:{ImagesCount:e}}),v.QPL.markerPoint(x.QuickLogMarkerId.WHATSAPP_PRODUCT_SAVE,"images_upload_start");const t=j.filter((e=>null==e.url)).map((e=>{const{mediaData:{mediaBlob:t,filehash:n}}=e;return t instanceof p.default?(0,c.uploadProductImage)(t,n).then((t=>{e.url=t})):null})).filter(Boolean);return Promise.all(t).then((()=>(v.QPL.markerPoint(x.QuickLogMarkerId.WHATSAPP_PRODUCT_SAVE,"images_upload_end"),j.map((e=>e.url||"")))))};return(0,d.useImperativeHandle)(t,(()=>({uploadImages:I,handleFilePick:P}))),(0,b.jsxs)("div",{className:m.default.panel,children:[(0,b.jsxs)("div",{className:m.default.tileContainer,children:[(0,b.jsxs)(l.default,{transitionAppear:!0,transitionName:"thumb-scale-flex",children:[(0,b.jsx)(S,{images:j,deleteImage:e=>{const t=j.filter((t=>t!==e));T(t),null==a||a(t)}}),j.length<n?(0,b.jsx)(k,{onAddFileClick:()=>{if(y.current){y.current.click()}}}):null]}),(0,b.jsx)(E,{inputRef:y,handleFilePick:P})]}),(0,b.jsx)(w,{error:g})]})}var M=(0,d.forwardRef)(T);t.default=M},46767:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{flatListController:t,onProductDetail:n,productMessageList:a}=e;const d=a.productCollection.getProductModels(),f=a.getSections(),h=a.getSectionsCount()>0,p=a.getTotalProductsFetchedOrFailed(),m=a.getProductSize()===p&&0===d.length,x=[];return f.forEach(((e,t)=>{let{title:n,products:a}=e;const r=[];a.forEach((e=>{let{productId:n}=e;const a=d.find((e=>e.id===n));null!=a&&r.push({itemKey:`section-${t}-${a.id.toString()}`,product:a,type:"product",height:s.PRODUCT_LIST_ITEM_HEIGHT})})),r.length>0&&(null!=n&&""!==n&&x.push({itemKey:`header-${t}-${n}`,label:n,type:"section",height:72}),x.push(...r))})),(0,l.useEffect)((()=>{m&&o.ModalManager.open((0,C.jsx)(v.default,{onConfirm:()=>{r.DrawerManager.closeDrawerRight(),o.ModalManager.close()}}))}),[m]),(0,C.jsx)("div",{className:(0,i.default)({[g.default.list]:!0,[g.default.noSections]:!h}),children:(0,C.jsx)(c.default,{flatListControllers:[t],children:(0,C.jsx)(u.FlatList,{flatListController:t,direction:"vertical",forceConsistentRenderCount:!1,data:x,renderItem:e=>(0,C.jsx)(y,{item:e,onProductDetail:n}),itemEnterAnimationsEnabled:!0})})})};var r=n(41455),o=n(14597),i=a(n(94184)),l=n(67294),s=n(64481),d=n(27394),u=n(47915),c=a(n(44942)),f=n(77975),h=n(82145),p=n(97567),m=a(n(88990)),g=a(n(31516)),v=a(n(8714)),x=a(n(11497)),_=n(18146),C=n(85893);function y(e){let{item:t,onProductDetail:n}=e;const a=(0,l.useCallback)(((e,t)=>((0,f.logCatalogListDetailClick)({product:(0,_.unproxy)(e),catalogContext:t}),(0,h.qplStartProductView)("PLM"),n(e))),[n]);let r=null;switch(t.type){case"section":const{label:e}=t;r=(0,C.jsx)(x.default,{header:e});break;case"product":const{product:n}=t;r=(0,C.jsx)(d.DrawerContext.Consumer,{children:e=>(0,C.jsx)(m.default,{product:n,onClick:()=>a(n,(0,p.getProductCatalogContext)(e)),canManageCatalog:!1})})}return r}},91695:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ProductMessageListDrawer=void 0;var r=a(n(48926)),o=n(51737),i=n(41906),l=n(48360),s=n(67294),d=a(n(56720)),u=a(n(16223)),c=n(87550),f=n(35461),h=a(n(3409)),p=n(12392),m=a(n(51070)),g=n(64481),v=a(n(17986)),x=a(n(60453)),_=a(n(69637)),C=n(27394),y=n(94790),b=n(65417),j=n(14375),S=a(n(61055)),E=a(n(30855)),k=a(n(29796)),w=n(41868),T=n(82145),M=n(46346),P=n(97567),I=a(n(46767)),O=n(18952),L=n(48870),A=n(27798),D=n(85893);const R={display:"p357zi0d"};function N(e){let{cartCount:t,contact:n,onClick:a}=e;const r=(0,o.isNumber)(t)&&t>0?t.toString():void 0,i=(0,s.useContext)(C.DrawerContext);return(0,D.jsx)(M.MenuBarItem,{a8nText:"menu-bar-cart-link",icon:(0,D.jsx)(m.default,{theme:"inherit-color"}),text:r,title:l.fbt._("Your cart",null,{hk:"Sn66V"}),onClick:(0,w.getOnCartClickWithLog)(a,n.id.toString(),(0,P.getProductCatalogContext)(i))})}const B=(0,s.forwardRef)(((e,t)=>{const{productListId:n,setScrollOffset:a,onCartClick:o,onProductDetail:l}=e,m=(0,h.default)(),C=(0,u.default)((()=>new E.default)),w=(0,f.useModelValues)(e.contact,["id"]),[M,P]=(0,s.useState)(!1),[B,F]=(0,s.useState)(0),[U,G]=(0,s.useState)(!1),[H,z]=(0,s.useState)((()=>O.ProductMessageListCollection.get(n))),[W]=(0,s.useState)((()=>p.CartCollection.findCart(w.id.toString()))),[q,V]=(0,s.useState)(W.itemCount),[Y,K]=(0,s.useState)(!1),[Q,X]=(0,s.useState)(H?"SUCCESS":"NONE"),Z=t=>{const{isPushed:a=!0}=e,r=a&&!0===t,o=O.ProductMessageListCollection.assertGet(n),i=o.getTotalProductsFetchedOrFailed(),l=o.getProductSize();if(U||i===l)return r&&(L.QPL.markerAnnotate(A.QuickLogMarkerId.WHATSAPP_PLM_DETAILS_VIEW,{int:{ProductsCount:i}}),L.QPL.markerEnd(A.QuickLogMarkerId.WHATSAPP_PLM_DETAILS_VIEW,L.QuickLogActionType.SUCCESS)),void G(!0);P(!0),F(i);const s=r?A.QuickLogMarkerId.WHATSAPP_PLM_DETAILS_VIEW:void 0;O.ProductMessageListCollection.update(n,{markerId:s}).then((e=>{if(m.aborted)return void(r&&L.QPL.markerDrop(A.QuickLogMarkerId.WHATSAPP_PLM_DETAILS_VIEW));P(!1);const t=(Array.isArray(e)?e[0]:e).getTotalProductsFetchedOrFailed();t===B&&G(!0),r&&(L.QPL.markerAnnotate(A.QuickLogMarkerId.WHATSAPP_PLM_DETAILS_VIEW,{int:{ProductsCount:t}}),L.QPL.markerEnd(A.QuickLogMarkerId.WHATSAPP_PLM_DETAILS_VIEW,L.QuickLogActionType.SUCCESS)),i*g.PRODUCT_LIST_ITEM_HEIGHT<window.innerHeight&&Z()})).catch((()=>{P(!1),G(!0),r&&L.QPL.markerEnd(A.QuickLogMarkerId.WHATSAPP_PLM_DETAILS_VIEW,L.QuickLogActionType.FAIL)}))},J=function(){var t=(0,r.default)((function*(){const{isPushed:t=!0}=e;try{const e=yield O.ProductMessageListCollection.find(n);if(m.aborted)return void(t&&L.QPL.markerDrop(A.QuickLogMarkerId.WHATSAPP_PLM_DETAILS_VIEW));z(e),X("SUCCESS"),Z(!0)}catch(e){(0,j.parseErrorState)(e,(e=>X(e))),t&&L.QPL.markerEnd(A.QuickLogMarkerId.WHATSAPP_PLM_DETAILS_VIEW,L.QuickLogActionType.FAIL)}}));return function(){return t.apply(this,arguments)}}();(0,s.useEffect)((()=>{H?Z():J(),(0,v.default)(w.id).then((e=>{m.aborted||K(e)}))}),[]),(0,c.useListener)(W,"all",(()=>{V(W.itemCount)}));return(0,D.jsxs)(x.default,{ref:t,theme:"products",onDrop:e.onBack,children:[(0,D.jsx)(y.DrawerHeader,{title:(0,D.jsx)("div",{className:(0,d.default)(R),children:(0,D.jsx)(b.EmojiText,{text:null==H?void 0:H.title,ellipsify:!0})}),type:y.DRAWER_HEADER_TYPE.SMALL,onBack:e.onBack,menu:null!=o&&Y?(0,D.jsx)(N,{cartCount:q,contact:w,onClick:()=>{(0,T.qplStartCartView)("PLM"),null==o||o(w.id.toString())}}):null}),(0,D.jsx)(_.default,{onScroll:e=>{var t;t=e.currentTarget,M||t.scrollTop+i.SCROLL_FUDGE>t.scrollHeight-t.clientHeight&&Z(),null==a||a(e.currentTarget.scrollTop)},flatListControllers:[C.current],scrollOffset:e.scrollOffset,children:H?(0,D.jsx)(D.Fragment,{children:(0,D.jsxs)("div",{children:[(0,D.jsx)(I.default,{productMessageList:H,flatListController:C.current,onProductDetail:l}),M&&(0,D.jsx)(k.default,{})]})}):(0,D.jsx)(S.default,{fetchState:Q})})]})}));t.ProductMessageListDrawer=B,B.displayName="ProductMessageListDrawer"},8714:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{onConfirm:t}=e;return(0,l.jsx)(o.default,{onOK:t,okText:r.fbt._("OK",null,{hk:"2KEeHb"}),children:(0,l.jsx)(i.EmojiText,{text:r.fbt._("Items in this message are no longer available",null,{hk:"1MclQl"})})})};var r=n(48360),o=a(n(52665)),i=n(65417),l=n(85893)},5537:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(45095)),o=n(48360),i=n(67294),l=n(99989),s=n(56728),d=a(n(25329)),u=n(85893);const c=(e,t)=>{const[n,a]=(0,i.useState)(!1),[c,f]=(0,i.useState)([]),h=(0,u.jsx)(d.default,{disabled:!n,onClick:()=>{var t;const n=(0,r.default)(null===(t=c[0])||void 0===t?void 0:t.catalogWid,"products[0]?.catalogWid"),a=(0,r.default)(l.CatalogCollection.get(n),"CatalogCollection.get(catalogWid)");e.onShare(a)}});return(0,u.jsx)(s.SelectModal,{ref:t,title:o.fbt._("Send products",null,{hk:"3C7pQj"}),onCancel:e.onCancel,onConfirm:e.onConfirm,listType:s.ListType.PRODUCT_SELECT_MODAL,enableSearchBox:!1,customHeader:h,onSelectionChanged:(e,t,n)=>{a(0===n.length)},onDataLoaded:e=>{const t=e;f(t),a(t.length>0)}})};var f=(0,i.forwardRef)(c);t.default=f},25329:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=e.disabled?l.default.disabled:"",n=e.disabled?null:e.onClick,a=(0,d.jsx)("span",{className:l.default.title,children:r.fbt._("Send catalog",null,{hk:"BiYcl"})}),u=(0,d.jsx)(i.default,{theme:"compact",disabled:e.disabled,children:(0,d.jsx)(s.default,{name:"catalog"})});return(0,d.jsx)(o.default,{image:u,onClick:n,primary:a,theme:"list-button-compact",className:t})};var r=n(48360),o=a(n(44356)),i=a(n(52711)),l=a(n(47514)),s=a(n(23217)),d=n(85893)},32074:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,i.useModelValues)(e.msg,["from","t"]),n=r.Clock.relativeDateAndTimeStr(t.t),a=(0,s.getSize)(s.DetailImageSize.Small);return(0,u.jsx)(l.default,{contextEnabled:()=>!1,image:(0,u.jsx)("div",{className:(0,o.default)(c),style:{height:a,width:a},children:(0,s.getDefaultIcon)(t.from)}),primary:(0,u.jsx)(d.EmojiText,{direction:"auto",text:e.agentName,titlify:!0,ellipsify:!0}),secondary:(0,u.jsx)("span",{title:n,children:n}),className:(0,o.default)(f),theme:e.theme,idle:!0})};var r=n(40234),o=a(n(56720)),i=n(35461),l=a(n(49107)),s=n(88984),d=n(65417),u=n(85893);const c={position:"g0rxnol2"},f={cursor:"okw0zzku",boxShadow:"tio0brup"}},56790:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{title:t,icon:n,t:a}=e;const u=null!=a?o.Clock.relativeDateAndTimeStr(a):"-",c=(0,d.jsxs)("div",{className:l.default.title,"data-a8n":r.default.key("msg-info-title"),children:[n,(0,d.jsx)(s.EmojiText,{direction:"auto",text:t,titlify:!0,ellipsify:!0})]});return(0,d.jsx)(i.default,{primary:c,secondary:u,theme:"plain",idle:!0})};var r=a(n(99964)),o=n(40234),i=a(n(44356)),l=a(n(4389)),s=n(65417),d=n(85893)},82678:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,r.useModelValues)(e.msg,["numTimesForwarded","isFrequentlyForwarded"]),{numTimesForwarded:n,isFrequentlyForwarded:a}=t;if(n<=0||a)return null;const u=(0,d.jsx)(l.default,{name:"forwarded",display:"inline",className:i.default.icon}),c=o.default.t(320,{count:n,_plural:n});return(0,d.jsxs)("div",{className:i.default.title,children:[u,(0,d.jsx)(s.TextSpan,{theme:"title",className:i.default.text,children:c})]})};var r=n(35461),o=a(n(14296)),i=a(n(70180)),l=a(n(23217)),s=n(13923),d=n(85893)},35487:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(55715),o=n(48360),i=n(67294),l=a(n(56720)),s=a(n(16223)),d=a(n(89113)),u=a(n(22245)),c=n(65511),f=n(69951),h=n(2732),p=n(47915),m=n(29424),g=a(n(14296)),v=a(n(11497)),x=a(n(88406)),_=n(85893);const C={height:"ttegvvei",overflowX:"gfz4du6o",overflowY:"r7fjleex",backgroundColor:"ihvf49ua"};function y(e,t){const{contacts:n,frequentContacts:a,onFocusSearch:l,onClick:u,showPersonGroupDivisionHeader:c,disabled:g}=e,v=(0,i.useRef)(null),C=(0,s.default)((()=>new x.default([],(e=>e.id.toString())))),y=()=>{C.current.setFirst(!0)};(0,i.useImperativeHandle)(t,(()=>({focusFirst:y})));const b=(e,t)=>{const n=(t?h.FREQUENT_PREFIX:"")+e.id.toString();if(e.isGroup){const a=f.ChatCollection.get(e.id);return a?{itemKey:n,data:a,type:3,frequent:t}:null}return{itemKey:n,data:e,type:2,frequent:t}},S=(0,i.useMemo)((()=>{const e=[];return null==a||a.forEach((t=>{const n=b(t,!0);n&&e.push(n)})),e}),[a]),E=(0,d.default)((e=>{if(0===e.length)return[];const t=e[0].isGroup?"group":"contact",n=[],a=e.length>10;let r="XXX";for(let o=0;o<e.length;o++){const i=e[o];if(a&&i.header){const a=i.header;if(a!==r){const i=o<e.length-1&&a!==e[o+1].header;n.push({itemKey:`header-${t}-${a}`,data:a,separator:i,type:1}),r=a}}const l=b(i);l&&n.push(l)}return n})),k=(0,i.useMemo)((()=>{const t=[],a=[],r=[];S.length&&(t.push({itemKey:"frequent-contacts-header",type:0}),t.push(...S)),n.forEach((e=>{e.isGroup?r.push(e):a.push(e)}));const i=E(a),l=E(r);if(c&&i.length>0){const e=o.fbt._("Contacts",null,{hk:"2jWpt9"});t.push({itemKey:`header-${e.toString()}`,data:e.toString(),separator:!0,type:1})}if(t.push(...i),c&&l.length>0){let n;n=!0===e.isCommunityCreation?o.fbt._("Groups you're an admin of",null,{hk:"YrVyI"}).toString():o.fbt._("Groups",null,{hk:"4bUoVs"}).toString(),t.push({itemKey:`header-${n}`,data:n,separator:!0,type:1})}return t.push(...l),t}),[n,S,E,c,e.isCommunityCreation]);return C.current.init((()=>{const e=[],t=[];return n.forEach((n=>{if(n.isGroup){const e=f.ChatCollection.get(n.id);e&&t.push(e)}else e.push(n)})),(a||[]).concat(e).concat(t)})()),(0,_.jsx)(m.HotKeys,{ref:v,handlers:{down:e=>{e.preventDefault(),e.stopPropagation(),C.current.setNext(!0)},up:e=>{e.preventDefault(),e.stopPropagation();const t=C.current;t.prev()>-1?t.setPrev(!0):(t.unset(),l(e))}},onFocus:e=>{if(e.target!==v.current)return;const t=C.current;t.index<0?y():t.reset(!0)},"data-tab":r.TAB_ORDER.CHAT_CONTACT_LIST,"data-testid":"contact-list-key",children:(0,_.jsx)(p.FlatList,{data:k,renderItem:e=>(0,_.jsx)(j,{data:e,disabled:g,active:C.current,onClick:u}),flatListController:e.flatListController,direction:"vertical"})})}var b=(0,i.forwardRef)(y);function j(e){let{data:t,disabled:n,active:a,onClick:r}=e;switch(t.type){case 0:return(0,_.jsx)(v.default,{header:g.default.t(722)},"frequent-contacts-header");case 3:const{data:e,frequent:i}=t;return!0===n?(0,_.jsx)(c.Chat,{chat:e,mode:c.Mode.INFO,noContext:!0,frequent:i,theme:"disabled"}):(0,_.jsx)(c.Chat,{active:a,chat:e,mode:c.Mode.INFO,noContext:!0,onClick:r,frequent:i});case 2:const{data:s,frequent:d}=t;return(0,_.jsx)(h.Contact,{active:a,contact:s,onClick:r,secondary:s.isBlocked()?o.fbt._("Contact is blocked",null,{hk:"284Coh"}):void 0,frequent:d,waitIdle:!0});case 1:const{data:f,separator:m}=t;return(0,_.jsxs)("div",{className:(0,l.default)(C),children:[m?(0,_.jsx)(u.default,{},`separator-${f}`):null,(0,_.jsx)(v.default,{header:f})]});default:throw new p.UnknownDataError(t)}}t.default=b},53153:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(35161)),o=n(67294),i=a(n(16223)),l=n(2732),s=n(29424),d=a(n(14296)),u=a(n(88406)),c=n(85893);function f(e,t){const{contacts:n,onFocusSearch:a,onDelete:f}=e,h=(0,i.default)((()=>new u.default(n,(e=>e.id.toString())))),p=()=>{(null==n?void 0:n.length)&&h.current.setLast(!0)},m=e=>{e.preventDefault(),e.stopPropagation();h.current.prev()>-1&&h.current.setPrev(!0)},g=e=>{e.preventDefault(),e.stopPropagation();const t=h.current.next();h.current.index===t?(h.current.unset(),null==a||a(e)):h.current.setNext(!0)},v=e=>{e.preventDefault(),e.stopPropagation();const t=h.current.getVal();if(t){const a=n.find((e=>e===t));a&&f&&f(e,a)}},x=(e,t)=>{h.current.setVal(t)};if((0,o.useEffect)((()=>{h.current.init(n,!0)}),[n,h]),(0,o.useImperativeHandle)(t,(()=>({focusLast:p}))),!n)return null;const _=n.length?(0,r.default)(n,(t=>(0,c.jsx)(l.Contact,{contact:t,active:h.current,onDelete:e.onDelete,onClick:x,type:l.Type.SMALL,theme:e.theme,waitIdle:!0},t.id.toString()))):null,C={up:m,down:g};e.onDelete&&(C[d.default.LR("left","right")]=m,C[d.default.LR("right","left")]=g,C.backspace=v);const y=(0,c.jsx)("ul",{children:_});return(0,c.jsx)(s.HotKeys,{handlers:C,children:y})}var h=(0,o.forwardRef)(f);t.default=h},57850:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{ids:t,size:n,onClick:a,showCount:s,shape:d,border:u}=e,c=t.length;if(0===c)return null;if(1===c)return(0,l.jsx)(i.DetailImage,{id:t[0],size:40,onClick:a,border:u});const f=t.slice(0,4).map(((e,t)=>(0,l.jsx)("div",{className:(0,r.default)(o.default.avatar,{[o.default.first]:0===t,[o.default.second]:1===t,[o.default.third]:2===t,[o.default.fourth]:3===t}),children:(0,l.jsx)(i.DetailImage,{id:e,size:n,shape:d})},`avatar-combo-image-${t}`))),h=(0,r.default)(o.default.container,{[o.default.square]:d===i.DetailImageShape.Square,[o.default.border]:u},{[o.default.two]:2===c,[o.default.three]:3===c,[o.default.four]:c>=4}),p=(0,i.getSize)(n),m={height:p,width:p,cursor:a?"pointer":void 0},g=s?(0,l.jsx)("div",{className:o.default.count,style:m,children:t.length}):null;return(0,l.jsxs)("div",{className:h,style:m,onClick:a,children:[f,g]})};var r=a(n(94184)),o=a(n(87240)),i=n(88984),l=n(85893)},50514:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.AvatarOverlay=function(e){return(0,i.jsxs)("div",{className:(0,o.default)([s.overlay,e.theme===l.COMMUNITY&&s.noBorderRadius]),children:[(0,i.jsx)("div",{className:(0,o.default)(s.icon),children:e.icon}),(0,i.jsx)("div",{"data-a8n":r.default.key("avatar-text"),className:(0,o.default)(s.text),children:e.text})]},"avatar-overlay")},t.AvatarOverlayTheme=void 0;var r=a(n(99964)),o=a(n(56720)),i=n(85893);const l=n(76672).Mirrored(["DEFAULT","COMMUNITY"]);t.AvatarOverlayTheme=l;const s={overlay:{position:"lhggkp7q",top:"qq0sjtgm",start:"tkdu00h0",zIndex:"ercejckq",boxSizing:"cm280p3y",display:"p357zi0d",flexDirection:"f8m0rgwh",alignItems:"gndfcl4n",justifyContent:"ac2vgrno",width:"ln8gz9je",height:"ppled2lx",paddingTop:"pxvlsfnc",fontSize:"ovllcyds",lineHeight:"tkq7s68q",color:"k239c91b",textTransform:"ofejerhi",backgroundColor:"epdck8xl",borderTopStartRadius:"g9p5wyxn",borderTopEndRadius:"i0tg5vk9",borderBottomEndRadius:"aoogvgrq",borderBottomStartRadius:"o2zu3hjb"},noBorderRadius:{borderTopStartRadius:"bi2mdrpt",borderTopEndRadius:"hsk1pqkj",borderBottomEndRadius:"e3yfz9gx",borderBottomStartRadius:"a0vc5f8u"},icon:{color:"k17s6i4e"},text:{width:"gbtdc75f",marginTop:"opp68qpq",textAlign:"qfejxiq4",overflowWrap:"fd365im1"}}},8334:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(81109)),o=a(n(6479)),i=n(67294),l=a(n(56720)),s=n(85893);const d=["breakpoint","inverseToContainer","maxWidth","minWidth","xstyle"],u={boxSizing:"cm280p3y",flexShrink:"oq44ahr5",position:"g0rxnol2"};function c(e,t){let{breakpoint:n,inverseToContainer:a=!1,maxWidth:i,minWidth:c,xstyle:f}=e,h=(0,o.default)(e,d);return(0,s.jsx)("div",(0,r.default)((0,r.default)({},h),{},{className:(0,l.default)(u,f),ref:t,style:{maxWidth:i,minWidth:c,width:a?`calc((${n}px - 100%) * 9999)`:`calc((100% - ${n-.1}px) * 9999)`}}))}var f=(0,i.forwardRef)(c);t.default=f},16194:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{children:t,download:n,file:a,extension:s}=e;return(0,i.jsx)(o.default,{xstyle:l.button,onClick:()=>{null!=a&&r.FileSaver.downloadData(a,n,s)},children:t})};var r=n(21634),o=(n(11586),a(n(56720)),a(n(1784))),i=n(85893);const l={button:{display:"f804f6gw"}}},31469:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(35161)),o=a(n(45095)),i=a(n(45120)),l=a(n(52013)),s=n(41906),d=n(55715),u=a(n(94184)),c=n(48360),f=n(67294),h=a(n(16223)),p=a(n(90886)),m=n(29424),g=a(n(34531)),v=n(78756),x=a(n(9294)),_=a(n(88406)),C=n(11054),y=a(n(1784)),b=n(85893);function j(e,t){const{onImageClick:n,isLoadingMore:a,canLoadMore:j,onRequestMoreImages:S,onFocusPrev:E,thumbnails:k}=e,w=(0,f.useRef)(null),T=(0,h.default)((()=>new Map)),M=(0,f.useRef)(null),P=(0,h.default)((()=>new _.default(k,(e=>e.id)))),[I,O]=(0,f.useState)(null),L=(0,f.useCallback)((function(){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const t=P.current,n=t.getVal();if(n&&I!==n&&(O(n),t.index>-1)){const n=T.current.get(`${t.index}`);l.default.focus(n),e&&n&&(0,v.scrollIntoViewIfNeeded)(n,!1)}}),[T,I,P]),A=new x.default(((e,t)=>{t?T.current.set(e,t):T.current.delete(e)})),D=e=>{const t=e.target;n&&1===t.nodeType&&"IMG"===t.tagName&&n(t.src)},R=(0,f.useCallback)((()=>{if(!a&&j&&S){if(!w.current)throw new Error("Requesting more images when body not rendered");w.current.scrollTop+s.SCROLL_FUDGE>w.current.scrollHeight-w.current.clientHeight&&S()}}),[j,a,S]),N=(0,p.default)(R,100),B=()=>{P.current.unset(),O(void 0)};(0,f.useEffect)((()=>{R(),P.current.init(k,!1),L()}),[R,P,k,L]);const F=()=>{M.current&&M.current.focus()};(0,f.useImperativeHandle)(t,(()=>({focus:F,handleRequestDismiss:B})));const U=(0,r.default)(e.thumbnails,((e,t)=>{let{id:n,name:a,thumbUrl:r}=e;const o=!!I&&I.id===n,i=(0,u.default)(g.default.imageGalleryItem,{[g.default.selected]:o}),l=(0,b.jsx)("div",{className:g.default.imageGalleryItemOverlay});return(0,b.jsxs)("div",{ref:A.getRefSetter(`${t}`),className:i,tabIndex:-1,children:[l,(0,b.jsx)(y.default,{onClick:D,children:(0,b.jsx)("img",{alt:c.fbt._("Result: {name}",[c.fbt._param("name",a)],{hk:"1u9YJJ"}),className:g.default.imageGalleryItemImage,src:r})})]},n)})),G=e.isLoadingMore?(0,b.jsx)("div",{tabIndex:-1,className:g.default.imageGalleryFooter,children:(0,b.jsx)(C.Spinner,{stroke:6,size:24})}):null;return(0,b.jsx)(m.HotKeys,{className:g.default.imageGallery,"data-tab":d.TAB_ORDER.CHAT_IMAGE_GALLERY,handlers:{down:e=>{e.preventDefault(),e.stopPropagation(),P.current.set(P.current.index+3,!1,!1),L(!0,!0)},enter:()=>{const e=P.current.getVal();e||(__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("No value selected, but enter clicked")),n&&e&&n(e.thumbUrl)},left:e=>{e.preventDefault(),e.stopPropagation(),P.current.setPrev(!1),L(!0,!0)},right:e=>{e.preventDefault(),e.stopPropagation(),P.current.setNext(!1),L(!0,!0)},up:e=>{if(e.preventDefault(),e.stopPropagation(),0===P.current.index&&E)E();else{const e=Math.max(P.current.index-3,0);P.current.set(e,!1,!1),L(!0,!0)}}},onFocus:e=>{e.stopPropagation(),e.preventDefault(),(null==P.current.index||P.current.index<0)&&P.current.setFirst(!1),L(!0,!1);const t=(0,o.default)(T.current.get(`${P.current.index}`),"imagesRef.current.get(`${selectionRef.current.index}`)").getElementsByClassName(g.default.imageGalleryItemOverlay);if(1!==t.length)throw new Error(`Unexpected number of overlay elements ${t.length}`);i.default.maybeIndicateFocus(t[0],g.default.focusAnimation)},onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},ref:M,children:(0,b.jsxs)("div",{ref:w,className:g.default.imageGalleryList,onScroll:N,children:[U,(0,b.jsx)("div",{tabIndex:-1,className:g.default.imageGalleryItemSpacer}),(0,b.jsx)("div",{tabIndex:-1,className:g.default.imageGalleryItemSpacer}),(0,b.jsx)("div",{tabIndex:-1,className:g.default.imageGalleryItemSpacer}),G]})})}var S=(0,f.forwardRef)(j);t.default=S},60195:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(67294),r=n(14330);const o=(e,t)=>{const[n,o]=(0,r.useLottie)(e);return(0,a.useImperativeHandle)(t,(()=>o)),n};var i=(0,a.forwardRef)(o);t.default=i},14330:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.Renderer=void 0,t.useLottie=function(e){let{autoplay:t=!1,data:n,direction:a=1,fallback:u=null,loop:c=!1,path:f,placeholder:h=null,renderer:p=d.SVG,speed:m=1,xstyle:g}=e;(0,r.default)(null==n&&null!=f||null!=n&&null==f,"These opts are mutually exclusive");const v=(0,i.useRef)(),x=(0,i.useRef)(),[_,C]=(0,i.useState)(!0),[y,b]=(0,i.useState)(!1),j=(0,i.useCallback)((()=>{var e;null===(e=v.current)||void 0===e||e.play()}),[]),S=(0,i.useCallback)((()=>{var e;null===(e=v.current)||void 0===e||e.stop()}),[]),E=(0,i.useCallback)((()=>{var e;null===(e=v.current)||void 0===e||e.pause()}),[]),k=(0,i.useCallback)(((e,t)=>{var n;null===(n=v.current)||void 0===n||n.goToAndPlay(e,t)}),[]),w=(0,i.useCallback)(((e,t)=>{var n;null===(n=v.current)||void 0===n||n.goToAndStop(e,t)}),[]),T=(0,i.useCallback)((e=>{var t;null===(t=v.current)||void 0===t||t.getDuration(e)}),[]);(0,i.useEffect)((()=>{const e=o.default.loadAnimation({container:x.current,animationData:n,path:f,renderer:p,loop:c,autoplay:t});v.current=e;const a=[{name:"data_ready",handler:()=>C(!1)},{name:"data_failed",handler:()=>b(!0)}].map((t=>(e.addEventListener(t.name,t.handler),()=>e.removeEventListener(t.name,t.handler))));return()=>{a.forEach((e=>e())),e.destroy()}}),[n,f,p,c,t]),(0,i.useEffect)((()=>{var e;null===(e=v.current)||void 0===e||e.setSpeed(m)}),[m]),(0,i.useEffect)((()=>{var e;null===(e=v.current)||void 0===e||e.setDirection(a)}),[a]);return[(0,s.jsxs)("div",{className:(0,l.default)(g),ref:x,children:[_&&!y?h:null,y?u:null]}),{play:j,stop:S,pause:E,goToAndPlay:k,goToAndStop:w,getDuration:T}]};var r=a(n(41143)),o=a(n(11248)),i=n(67294),l=a(n(56720)),s=n(85893);const d=n(76672)({SVG:"svg",Canvas:"canvas"});t.Renderer=d},3028:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(64331),o=n(14597),i=n(28298),l=a(n(40436)),s=n(48360),d=n(67294),u=a(n(56720)),c=a(n(52665)),f=n(60811),h=n(30424),p=n(18609),m=n(29424),g=a(n(14296)),v=a(n(43698)),x=n(16477),_=a(n(23217)),C=n(18644),y=a(n(24717)),b=n(85893);const j=()=>{o.ModalManager.open((0,b.jsx)(c.default,{title:s.fbt._("Caption Too Long",null,{hk:"2GOVgN"}),onOK:()=>{o.ModalManager.close()},okText:s.fbt._("OK",null,{hk:"2KEeHb"}),children:s.fbt._("The caption youre pasting is too long. Try shortening it or sending it as a separate message.",null,{hk:"4Br93m"})}))},S={wrapper:{display:"p357zi0d",alignItems:"r15c9g6i",borderBottom:"tf4adjai"},activeWrapper:{borderBottom:"ggdspdaz"},inputControls:{position:"g0rxnol2",flexGrow:"tvf2evcx",flexShrink:"oq44ahr5",flexBasis:"rjo8vgbg",marginTop:"b9l0eqez"},buttonContainer:{position:"g0rxnol2",display:"l7jjieqr",float:"ivui8b66",width:"r0at9tra"},suggestionsPositioner:{position:"lhggkp7q",bottom:"c5zpj14d",start:"dkaqw61n",width:"ln8gz9je",height:"smvc51u0",overflowX:"gfz4du6o",overflowY:"r7fjleex",pointerEvents:"m62443ks"},spacer:{position:"g0rxnol2",height:"bmot90v7"},noPlaceholderSpacer:{position:"g0rxnol2",height:"bbl9m3t3"},textInput:{position:"g0rxnol2",flexGrow:"ggj6brxn",wordWrap:"b6f1x6w7"},charCounter:{position:"lhggkp7q",top:"jgz0asyo",width:"cxkis295",fontSize:"bze30y65",lineHeight:"iv396pab",color:"t3rh7lfs",textAlign:"e65innqk"},charCounterWithClearBtn:{top:"qq0sjtgm",end:"rezueyon"},labelText:{position:"lhggkp7q",width:"ln8gz9je",fontSize:"enbbiyaj",lineHeight:"q6wg26sa",color:"hp667wtd",transitionDuration:"p4t1lx4y",transform:"e79a4tva"},labelTextFloat:{fontSize:"dsh4tgtl",lineHeight:"jgi8eev7",transform:"qdd0en2n"},inputEmoji:{position:"lhggkp7q",top:"jgz0asyo",end:"ebjesfe0",color:"cs9t9or5"},clearInput:{position:"lhggkp7q",top:"mvf5n2qr",end:"ia5k4ep2",color:"s4k44ver"},suggestionsContainer:{position:"lhggkp7q",end:"citmgm7b",bottom:"jxacihee",start:"cheugonp"}};function E(e,t){const{value:n,focusOnMount:a,onBlur:o,onFocus:c,maxLength:E=25,onMaxPasteExceeded:k=j}=e,w=(0,d.useRef)(null),T=(0,d.useRef)(null),M=(0,d.useRef)(null),[P,I]=(0,d.useState)(!1),[O,L]=(0,d.useState)(null),A=(0,r.numCodepoints)(e.value||""),D=()=>{var e;null===(e=w.current)||void 0===e||e.focus()};(0,d.useEffect)((()=>{!0===a&&D()}),[]);const R=()=>{L(null)},N=e=>{const t=w.current;t&&(t.focus(!1),t.replaceSelection(e)),R()},B=()=>{var e;null===(e=M.current)||void 0===e||e.restoreFocus()},F=e=>{P&&I(!1),o&&o(e)},U=e=>{e.stopPropagation(),P||I(!0),c&&c(e)};(0,d.useImperativeHandle)(t,(()=>({handleBlur:F,handleFocus:U,refInput:w.current})));const G=e.supportsEmoji?(0,b.jsx)("button",{className:(0,u.default)(S.inputEmoji),onClick:e=>{e&&(e.preventDefault(),e.stopPropagation());const t=(0,b.jsx)(h.EmojiPanel,{ref:M,onEmoji:N,onFocusNext:D,onFocusPrev:D});L({menu:t,dirY:f.DirY.TOP,type:f.MenuType.EmojiPicker,anchor:e.target}),D()},children:(0,b.jsx)(_.default,{"aria-label":s.fbt._("Open emojis panel",null,{hk:"3IEMY6"}),name:"emoji-input"})}):void 0;let H=null;H=null!=n&&""!==n?(0,b.jsx)("button",{className:(0,u.default)(S.clearInput),onClick:()=>{var e;null===(e=w.current)||void 0===e||e.reset()},children:(0,b.jsx)(_.default,{name:"x-alt"})}):null;const z=!0===e.showRemaining?(0,b.jsx)("div",{className:(0,u.default)(S.buttonContainer,i.uiMargin.horiz4,i.uiPadding.bottom20,S.charCounter,i.uiPadding.bottom0,null!=H&&S.charCounterWithClearBtn),children:(0,b.jsx)("div",{className:(0,u.default)(S.charCounter,i.uiPadding.bottom0),children:E-A<50?g.default.n(E-A):null})}):null;let W;O&&(W=(0,b.jsx)(C.UIE,{displayName:"EmojiPicker",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:R,requestFocus:B,children:(0,b.jsx)(y.default,{contextMenu:O})}));const q=(0,u.default)(S.textInput),V=(0,u.default)(S.labelText,i.uiPadding.top8,null!=e.value&&""!==e.value&&S.labelTextFloat);return(0,b.jsxs)(m.HotKeys,{className:q,onFocus:D,children:[(0,b.jsx)("span",{className:V,children:e.placeholder}),(0,b.jsx)("div",{className:(0,u.default)(""===e.placeholder?S.noPlaceholderSpacer:S.spacer)}),(0,b.jsx)("div",{className:(0,u.default)(!g.default.isRTL()&&[S.suggestionsPositioner,i.uiPadding.horiz10]),children:(0,b.jsxs)("div",{className:(0,u.default)(!g.default.isRTL()&&S.suggestionsContainer),children:[(0,b.jsx)(v.default.MentionSuggestions,{chat:e.chat,theme:x.ThemeOptions.MEDIA_CAPTION}),(0,b.jsx)(v.default.EmojiSuggestions,{chat:e.chat,theme:p.ThemeOptions.MEDIA_CAPTION})]})}),(0,b.jsxs)("div",{className:(0,u.default)(S.wrapper,S.activeWrapper,P&&i.uiPadding.bottom0),children:[(0,b.jsx)(v.default,{ref:w,initialValue:e.value,initialSelection:T.current,readOnly:!1,spellCheck:e.spellCheck,multiline:e.multiline,maxLength:e.maxLength,onEnter:e.onEnter,onMaxPasteExceeded:k,onFiles:e.onFiles,onChange:e.onChange,onSelect:e=>{T.current=e},theme:"media-caption"}),(0,b.jsxs)("div",{className:(0,u.default)(S.inputControls),children:[(0,b.jsxs)(l.default,{transitionName:"pop",component:"div",className:(0,u.default)(S.buttonContainer,i.uiMargin.horiz4,i.uiPadding.bottom20),children:[H,G]}),z]})]}),W]})}var k=(0,d.forwardRef)(E);t.default=k},1697:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(67294),o=a(n(56720)),i=n(35461),l=a(n(91050)),s=n(78123),d=n(85893);const u={maxHeight:"gixhl6f9",overflowX:"gfz4du6o",overflowY:"ag5g9lrv"},c={position:"g0rxnol2",paddingTop:"nlnf8xo7",paddingEnd:"h1a80dm5",paddingBottom:"r219jyu0",paddingStart:"hxjsrjta",backgroundColor:"gmjkez2w",transitionProperty:"ariinwu3",transitionDuration:"p4t1lx4y",transitionTimingFunction:"pu4k07i0"};function f(e,t){const n=(0,r.useRef)(null),a=(0,i.useModelValues)(e.chatPreference,["wallpaperColor","showDoodle"]);(0,r.useImperativeHandle)(t,(()=>({getContainer:()=>n.current})));const{wallpaperColor:f,showDoodle:h}=a;let p={};return f!==s.DEFAULT_CHAT_WALLPAPER&&(p={backgroundColor:f}),(0,d.jsx)("div",{className:(0,o.default)(u),ref:n,children:(0,d.jsxs)("div",{className:(0,o.default)(c),style:p,children:[(0,d.jsx)(l.default,{wallpaperColor:f,showDoodle:h}),e.children]})})}var h=(0,r.forwardRef)(f);t.default=h},82541:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(63105)),o=a(n(99964)),i=n(65885),l=a(n(52013)),s=n(14597),d=n(26741),u=a(n(40436)),c=a(n(94184)),f=n(48360),h=n(67294),p=a(n(56720)),m=n(50514),g=a(n(46918)),v=a(n(52665)),x=n(19380),_=a(n(92726)),C=n(71174),y=a(n(40241)),b=a(n(56624)),j=a(n(3222)),S=n(29424),E=a(n(89936)),k=a(n(47065)),w=a(n(14296)),T=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=H(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(n(16737)),M=n(57224),P=a(n(11791)),I=a(n(40134)),O=a(n(43556)),L=a(n(71528)),A=n(558),D=n(13510),R=n(11054),N=a(n(23217)),B=a(n(81499)),F=n(18644),U=a(n(24717)),G=n(85893);function H(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(H=function(e){return e?n:t})(e)}const z={position:"lhggkp7q",start:"qo25nl7o",top:"bqmxb3s7",zIndex:"lqxtw3mz",pointerEvents:"m62443ks"},W={position:"lhggkp7q",top:"qq0sjtgm",start:"tkdu00h0",end:"ebjesfe0",bottom:"jxacihee",backgroundColor:"s9lgn3x7",zIndex:"jnl3jror"};class q extends h.Component{constructor(){super(...arguments),this.state={img:this.props.startImage,hover:!1,imageSize:null},this._setRefImageContainer=e=>{this._refImageContainer=e},this._setRefImageInput=e=>{this._refImageInput=e},this._handleUpload=()=>{const e=this._refImageInput;if(e)return e.click(),!0},this.closeContextMenu=()=>{this.setState({contextMenu:null})},this._handleLoad=e=>{const t=e.currentTarget.clientWidth,n=e.currentTarget.clientHeight;this.setState({imageSize:{width:t,height:n}})},this._handleMouseLeave=()=>{this.state.hover&&this.setState({hover:!1})},this._handleMouseEnter=()=>{this.state.hover||this.setState({hover:!0})},this._handleMouseOver=()=>{this.state.hover||this.setState({hover:!0})},this._handleImageReceived=(e,t)=>{e?T.loadImage(e).then((()=>{this.setState({img:e}),this.props.onImageSet(e,t)})).catch((e=>{let t;switch(__LOG__(3)`PhotoPicker:onImageReceived failed to load image: ${String(e)}`,this.props.type){case O.default.GROUP:t=w.default.t(61);break;case O.default.COMMUNITY:t=f.fbt._("Couldn't set community icon.",null,{hk:"4bEr1Y"});break;case O.default.PROFILE:t=w.default.t(109);break;case O.default.DEFAULT_ANNOUNCEMENT_GROUP:case O.default.COVER_PHOTO:}s.ModalManager.open((0,G.jsx)(v.default,{onOK:()=>s.ModalManager.close(),children:t}))})):this.setState({img:null,imageSize:null})},this._handleImagePick=e=>{const t=URL.createObjectURL(e);T.loadImage(t).then((t=>{if(t&&(t.width<A.PROF_PIC_MIN_SIDE||t.height<A.PROF_PIC_MIN_SIDE))s.ModalManager.open((0,G.jsx)(v.default,{onOK:()=>s.ModalManager.close(),children:w.default.t(547,{size:A.PROF_PIC_MIN_SIDE,_plural:A.PROF_PIC_MIN_SIDE})}));else{const t=this.props.type===O.default.COVER_PHOTO?M.ModalTheme.BoxLarge:M.ModalTheme.Box,n=this.props.type===O.default.COVER_PHOTO?D.CropShapeType.RECT:D.CropShapeType.CIRCLE;s.ModalManager.open((0,G.jsx)(y.default,{img:e,onFinished:this._handleImageReceived,onRetake:this._handleUpload,cropShape:n,theme:t}))}})).catch((()=>{let e;switch(this.props.type){case O.default.GROUP:e=w.default.t(61);break;case O.default.COMMUNITY:e=f.fbt._("Couldn't set community icon.",null,{hk:"4bEr1Y"});break;case O.default.PROFILE:e=w.default.t(109);break;case O.default.DEFAULT_ANNOUNCEMENT_GROUP:case O.default.COVER_PHOTO:}s.ModalManager.open((0,G.jsx)(v.default,{onOK:()=>s.ModalManager.close(),children:e}))})).finally((()=>{URL.revokeObjectURL(t)}))},this._handleImageSelected=e=>{this.closeContextMenu();const t=e.target.files[0];if(!t)return!1;this._handleImagePick(t),e.target.value="",this._refImageContainer&&l.default.focus(this._refImageContainer)},this._handlePaste=e=>{if(!this.state.contextMenu)return;const t=new _.default(e.clipboardData),n=(0,r.default)(t.getFiles(),(e=>"image"===(0,i.typeFromMimetype)(e.type)));if(!n.length)return;e.preventDefault(),e.stopPropagation(),this.closeContextMenu();const a=n[0];this._handleImagePick(a)},this._handleSearch=()=>{s.ModalManager.open((0,G.jsx)(M.Modal,{type:M.ModalTheme.Box,children:(0,G.jsx)(E.default,{onFinished:this._handleImageReceived})}))},this._handleView=()=>{const e=this._refImageContainer,{id:t,attachToChat:n,type:a}=this.props;if(!e||!t)return;const r=x.ContactCollection.assertGet(t),o={transition:"profile-viewer"};n&&(o.uim=this.props.uim),s.ModalManager.openMedia((0,G.jsx)(L.default,{contact:r,profilePicThumb:r.getProfilePicThumb(),animateBorderRadius:a!==O.default.COMMUNITY,getZoomNode:t=>{t(e)}}),o)},this._removeImage=()=>{this.props.onImageSet(),s.ModalManager.close()},this._handleRemove=()=>{let e;switch(this.props.type){case O.default.GROUP:e=w.default.t(556);break;case O.default.COMMUNITY:e=f.fbt._("Remove this community's icon?",null,{hk:"3ejOXd"});break;case O.default.PROFILE:e=w.default.t(559);break;case O.default.DEFAULT_ANNOUNCEMENT_GROUP:break;case O.default.COVER_PHOTO:e=f.fbt._("Remove your cover photo?",null,{hk:"1XkdPH"})}s.ModalManager.open((0,G.jsx)(v.default,{onOK:this._removeImage,okText:w.default.t(555),onCancel:()=>s.ModalManager.close(),cancelText:f.fbt._("Cancel",null,{hk:"H0gNq"}),children:e}))},this._createMenu=()=>{const e=[];return this.props.id&&this.state.img&&e.push((0,G.jsx)(C.DropdownItem,{a8n:"mi-view-photo",action:this._handleView,children:w.default.t(659)},"view")),b.default&&e.push((0,G.jsx)(B.default,{onImageTake:this._handleImageReceived},"take")),e.push((0,G.jsx)(C.DropdownItem,{a8n:"mi-upload-photo",action:this._handleUpload,children:w.default.t(649)},"upload")),d.UA.isElectron&&(this.props.type!==O.default.GROUP&&this.props.type!==O.default.COMMUNITY||e.push((0,G.jsx)(C.DropdownItem,{a8n:"mi-search-photo",action:this._handleSearch,children:f.fbt._("Web Search",null,{hk:"3otQk8"})},"search"))),this.state.img&&e.push((0,G.jsx)(C.DropdownItem,{a8n:"mi-remove-photo",action:this._handleRemove,children:w.default.t(558)},"remove")),e},this._handleImageClick=e=>{if(this.props.readOnly)return void(this.state.img&&this._handleView());e.stopPropagation(),e.preventDefault();const t=this._createMenu();this.setState({contextMenu:{menu:t,event:e}})},this._handleImageKeypress=()=>{const e=this._createMenu();this.setState({contextMenu:{menu:e,anchor:this._refImageContainer}})}}static getDerivedStateFromProps(e){return e.startImage?{img:e.startImage}:{img:e.startImage,imageSize:null}}_getContainerStyle(){return null!=this.props.size?{width:this.props.size,height:this.props.size}:void 0}render(){let e,t;this.state.img&&(e=(0,G.jsx)(P.default,{type:"cover",size:this.state.imageSize,children:(0,G.jsx)(k.default,{src:this.state.img,crossOrigin:!1,style:{height:"100%",width:"100%"},onLoad:this._handleLoad})})),(this.props.pending||this.state.img&&!this.state.imageSize)&&(t=this.props.type===O.default.COVER_PHOTO?(0,G.jsx)("div",{className:(0,p.default)(W),children:(0,G.jsx)("div",{className:(0,p.default)(z),children:(0,G.jsx)(R.Spinner,{size:24,stroke:3,color:"solidwhite"})})}):(0,G.jsx)(g.default,{}));let n=null;if(!this.props.pending&&!this.props.readOnly&&(!this.state.img||this.state.imageSize)&&(!this.state.img||this.state.contextMenu||this.state.hover)){let e="";switch(this.props.type){case O.default.GROUP:e=this.state.img?w.default.t(173):w.default.t(131);break;case O.default.COMMUNITY:e=this.state.img?f.fbt._("Change community icon",null,{hk:"pg4UZ"}):f.fbt._("Add community icon",null,{hk:"3djWDS"});break;case O.default.PROFILE:e=this.state.img?w.default.t(174):w.default.t(132);break;case O.default.DEFAULT_ANNOUNCEMENT_GROUP:case O.default.COVER_PHOTO:}this.props.type!==O.default.COVER_PHOTO&&(n=(0,G.jsx)(m.AvatarOverlay,{icon:(0,G.jsx)(N.default,{name:"camera"}),text:e,theme:this.props.type===O.default.COMMUNITY?m.AvatarOverlayTheme.COMMUNITY:m.AvatarOverlayTheme.DEFAULT}))}const a=!0!==this.props.pending&&(null!=this.state.imageSize||null==this.state.img&&!this.props.readOnly),r=a?this._handleImageClick:()=>{};let i,l;if(this.state.contextMenu&&(i=(0,G.jsx)(F.UIE,{displayName:"PhotoPickerContextMenu",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:this.closeContextMenu,children:(0,G.jsx)(U.default,{contextMenu:this.state.contextMenu})})),this.props.pending||!this.state.img||this.state.img&&!this.state.imageSize){let e;switch(this.props.type){case O.default.PROFILE:e="default-user";break;case O.default.COMMUNITY:e="community-squircle";break;case O.default.DEFAULT_ANNOUNCEMENT_GROUP:e="announcement-speaker";break;case O.default.COVER_PHOTO:e=null;break;default:e="default-group"}null!=e&&(l=(0,G.jsx)("div",{className:(0,c.default)(I.default.defaultIcon,{[I.default.defaultAnnouncementGroupIcon]:this.props.type===O.default.DEFAULT_ANNOUNCEMENT_GROUP}),children:(0,G.jsx)(N.default,{name:e})}))}return(0,G.jsxs)(S.HotKeys,{className:(0,c.default)(I.default.container,{[I.default.coverPhoto]:"coverPhoto"===this.props.theme}),style:this._getContainerStyle(),handlers:{space:this._handleImageKeypress,enter:this._handleImageKeypress},children:[(0,G.jsxs)("div",{className:(0,c.default)(I.default.body,{[I.default.squircleBackground]:this.props.type===O.default.COMMUNITY,[I.default.clickable]:a}),onClick:r,onMouseOver:this._handleMouseOver,onMouseEnter:this._handleMouseEnter,onMouseLeave:this._handleMouseLeave,onPaste:this._handlePaste,onFocus:this._handleMouseEnter,onBlur:this._handleMouseLeave,ref:this._setRefImageContainer,title:f.fbt._("Photo Picker",null,{hk:"3TURye"}),dir:"ltr",tabIndex:a?0:-1,role:a?"button":"none","data-a8n":o.default.key(this.props.a8nText),children:[(0,G.jsxs)("div",{className:I.default.imageContainer,children:[e,l]}),(0,G.jsxs)(u.default,{transitionName:"fade",children:[t,n]})]}),(0,G.jsx)("input",{ref:this._setRefImageInput,type:"file",accept:"image/gif,image/jpeg,image/jpg,image/png",style:{display:"none"},onChange:this._handleImageSelected}),i]})}}q.displayName="PhotoPicker";var V=(0,j.default)(q);t.default=V},43698:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(1769)),o=n(52835),i=n(18609),l=a(n(70527)),s=n(72761),d=a(n(8103)),u=n(16477),c=a(n(68662));const f=new l.default,h=new r.default;class p extends((0,s.PluggableInput)([o.EmojiPlugin,h,f,d.default])){}t.default=p,p.MentionSuggestions=(0,c.default)(u.Suggestions,{plugin:f}),p.EmojiSuggestions=(0,c.default)(i.EmojiSuggestions,{plugin:h})},25324:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(94184)),o=n(82857),i=a(n(85747)),l=n(85893);var s=e=>{let{ariaLabel:t,large:n,a8nText:a,onClick:s,icon:d,count:u,disabled:c}=e;return(0,l.jsxs)("div",{className:(0,r.default)(i.default.container,{[i.default.disabled]:c}),children:[(0,l.jsx)(o.Round,{label:t,large:n,a8nText:a,onClick:s,disabled:c,children:d}),null!=u&&(0,l.jsx)("div",{className:(0,r.default)(i.default.count,{[i.default.large]:n}),children:(0,l.jsx)("span",{children:u})})]})};t.default=s},34544:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(81109)),o=n(14597),i=n(67294),l=a(n(52665)),s=n(94790),d=n(26777),u=a(n(14296)),c=n(57224),f=n(85893);t.default=e=>{let{doSave:t,afterSave:n,isValid:a,children:h,modalConfig:p,onError:m,title:g,onCancel:v}=e;const[x,_]=(0,i.useState)(d.EditType.EDITING),C=(0,f.jsx)(s.DrawerHeader,{title:g,type:s.DRAWER_HEADER_TYPE.POPUP,onCancel:()=>{o.ModalManager.close(),null==v||v()}});return(0,f.jsx)(l.default,(0,r.default)({children:h,okText:u.default.t(567),type:c.ModalTheme.Auto,onOK:()=>{_(d.EditType.PENDING),t().then((()=>{_(d.EditType.DONE),n&&n(),o.ModalManager.close()}),(e=>{_(d.EditType.ERROR),m&&m(e)}))},okSpinner:x===d.EditType.PENDING,okDisabled:x===d.EditType.PENDING||!a,title:C},p))}},38801:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(67294),o=a(n(56720)),i=a(n(85647)),l=a(n(78506)),s=n(29424),d=n(85893);const u={tabContainer:{display:"p357zi0d",backgroundColor:"rv6u8h8g"},tab:{boxSizing:"cm280p3y",display:"p357zi0d",flexGrow:"ggj6brxn",flexDirection:"f8m0rgwh",alignItems:"gndfcl4n",justifyContent:"ac2vgrno",height:"qmp0wt83",color:"a633jkfz",textTransform:"ofejerhi"},focused:{boxShadow:"lgn58c33"},selected:{paddingTop:"eujn52yf",color:"ky3f94nk",borderBottom:"qldwl5fi"}};var c=e=>{let{tabConfigs:t,selectedId:n,onSelect:a,tabXstyle:i,xstyle:l}=e;const c=(0,r.useRef)(n),h=(0,r.useRef)([]),p=t.map((e=>{let{id:t}=e;return t})),m=p.length-1;return(0,d.jsx)(s.HotKeys,{handlers:{right:()=>{const e=p.indexOf(c.current),t=e===m?0:e+1,n=h.current[t];n&&n.focus()},left:()=>{const e=p.indexOf(c.current),t=0===e?m:e-1,n=h.current[t];n&&n.focus()}},children:(0,d.jsx)("div",{role:"tablist",className:(0,o.default)(u.tabContainer,l),children:t.map(((e,t)=>{let{title:r,id:o}=e;return(0,d.jsx)(f,{ref:e=>{h.current[t]=e},selected:o===n,onSelect:()=>a(o),onFocus:()=>{c.current=o},xstyle:i,children:r},r)}))})})};t.default=c;const f=(0,r.forwardRef)(((e,t)=>{let{selected:n,onSelect:a,onFocus:r,children:s,xstyle:c}=e;const[f,h]=(0,i.default)(),p=(0,l.default)(t,f);return(0,d.jsx)("button",{ref:p,role:"tab",tabIndex:n?0:-1,"aria-selected":Boolean(n),title:s,className:(0,o.default)(u.tab,h&&u.focused,n&&u.selected,c),onClick:()=>{n||a()},onFocus:r,children:s})}))},81499:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onImageTake:t}=e;return(0,s.jsx)(o.DropdownItem,{action:()=>{r.ModalManager.open((0,s.jsx)(i.EditCaptureFlowLoadable,{onFinished:t}))},a8n:"mi-take-photo",disabled:e.disabled,children:l.default.t(617)})};var r=n(14597),o=n(71174),i=n(70174),l=a(n(14296)),s=n(85893)},3222:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n;return(t=class extends l.WrappedComponent{render(){return this.state.hasError?null:(0,d.jsx)(s.default.Consumer,{children:t=>(0,d.jsx)(e,(0,r.default)((0,r.default)({ref:this.setComponent},this.props),{},{uim:(0,o.default)(t,"uim")}))})}}).defaultProps=null!==(n=e.defaultProps)&&void 0!==n?n:void 0,t.displayName=`UIM(${(0,i.default)(e)})`,t.wrappedComponent=e,t};var r=a(n(81109)),o=a(n(45095)),i=a(n(38701)),l=n(7128),s=a(n(2773)),d=n(85893)},56204:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return(0,s.jsxs)(l.SelectableDiv,{"data-a8n":r.default.key("version"),className:(0,o.default)(d),selectable:!0,children:[i.default.t(652,{version:""}),(0,s.jsx)("span",{dir:"LTR",children:"2.2220.8"}),null,null]})};var r=a(n(99964)),o=(a(n(30381)),a(n(56720))),i=(n(12591),a(n(14442)),a(n(14296))),l=n(52596),s=n(85893);const d={alignSelf:"o2es7gts",fontSize:"f8jlpxt4",lineHeight:"r5qsrrlp",color:"pm5hny62",textAlign:"qfejxiq4"}},83192:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const[t,n]=(0,d.useFlow)(x.SelectGroup,{pushTransition:"none",popTransition:"none"}),[a,_]=(0,s.useState)(),C=t=>{const n=t.groupMetadata;return!(!t.isGroup||t.isGroup&&!(null==n?void 0:n.participants.iAmMember()))&&((null==n?void 0:n.participants.get(e.contact.id))?l.fbt._("Already added to group",null,{hk:"4hdDHF"}).toString():!!(null==n?void 0:n.participants.iAmAdmin())||m.default.t(177))},y=(0,s.useRef)(null),b=e=>{(()=>{if(!y.current)return;const e=y.current.getNode();e&&!e.contains(document.activeElement)&&i.default.focus(e)})(),_(e),n.push(x.Confirm)};if(null==n.step)return null;let j=null;switch(n.step){case x.SelectGroup:j=(0,v.jsx)(p.default,{chats:u.ChatCollection.filter((e=>e.isGroup)),filter:C,onCancel:()=>n.pop(),onGroup:b});break;case x.Confirm:j=(0,v.jsx)(f.default,{cancelText:l.fbt._("Cancel",null,{hk:"H0gNq"}),okText:l.fbt._("Add participant",null,{hk:"48ECfz"}),onOK:()=>{return t=(0,r.default)(a,"group"),(0,g.addParticipants)(t,[e.contact]).then((()=>{o.Cmd.openChatFromUnread(t).then((e=>{e&&c.ComposeBoxActions.focus(t)}))})).catch((()=>{})),void n.end();var t},onCancel:()=>n.pop(),children:(0,v.jsx)(h.EmojiText,{text:m.default.t(192,{participant:e.contact.formattedName,subject:(0,r.default)(a,"group").contact.name})})})}return(0,v.jsx)(t,{ref:y,flow:n,children:j})};var r=a(n(45095)),o=n(81572),i=a(n(52013)),l=n(48360),s=n(67294),d=n(59083),u=n(69951),c=n(88172),f=a(n(52665)),h=n(65417),p=a(n(19317)),m=a(n(14296)),g=n(89389),v=n(85893);const x=n(76672).Mirrored(["SelectGroup","Confirm"])},93259:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(81629)),o=a(n(51463)),i=n(88555),l=n(81572),s=n(26741),d=n(80666),u=n(88172),c=n(65100),f=a(n(32973)),h=a(n(14500)),p=n(77853),m=n(85893);class g extends f.default{constructor(){var e;super(...arguments),e=this,this._setRefMediaEditor=e=>{this._refMediaEditor=e},this._handleCancel=()=>{this.props.onComplete&&this.props.onComplete(!1),this._clearAttachMedia(),this.props.mediaCollection.mediaPickerStatsLogger.logCancel(),this.end()},this._handleFailedMedias=e=>{const t=e.filter((e=>e.isGif));if(t.length>0){const e=t.map((e=>e.filename));l.Cmd.once("ui_idle",(()=>{u.ComposeBoxActions.paste(this.props.chat,e.join(" "))})),this.props.onComplete&&this.props.onComplete(!1),this._clearAttachMedia(),this.props.mediaCollection.mediaPickerStatsLogger.logCancel(),this.end()}},this._sendMediaWithMentions=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{initCaptionUsed:a,isViewOnce:r}=n,{chat:o}=e.props;l.Cmd.once("ui_idle",(()=>{t.forEach(((t,n)=>{var a;const i=t.media,l={};if(0===n&&(l.quotedMsg=o.composeQuotedMsg,o.composeQuotedMsg=null),l.isViewOnce=r,l.mentionedJidList=t.mentionedJidList,l.caption=i.caption,l.addEvenWhilePreparing=i.previewable&&i.state===d.ATTACH_MEDIA_STATE.PROCESSING,null===(a=e.props.initCaption)||void 0===a?void 0:a.ctwaContextLinkData){const{ctwaContextLinkData:t,ctwaContext:n}=e.props.initCaption;l.ctwaContext=(0,p.prepareCtwaContextSend)(t,n)}i.sendToChat(o,l)})),e._clearAttachMedia()})),e.props.onComplete&&e.props.onComplete(!0,{initCaptionUsed:a}),e.props.mediaCollection.mediaPickerStatsLogger.logSend({isViewOnce:r}),e.end()},this.setText=e=>{null!=e&&l.Cmd.once("ui_idle",(()=>{u.ComposeBoxActions.paste(this.props.chat,e)})),this.end()},this._clearAttachMedia=()=>{this.props.chat&&this.props.chat.setAttachMediaContents(null)},this.handleRequestDismiss=e=>{var t;(null===(t=this._refMediaEditor)||void 0===t?void 0:t.handleRequestDismiss())&&(!1===e&&this._handleCancel(),super.handleRequestDismiss())}}componentDidMount(){l.Cmd.closeContextMenu(),l.Cmd.closeTooltip(),this.push((0,m.jsx)(h.default,{theme:"attach",ref:this._setRefMediaEditor,chat:this.props.chat,onClose:this._handleCancel,initCaption:this.props.initCaption,onSendMedia:(0,o.default)(this._sendMediaWithMentions),mediaCollection:this.props.mediaCollection,onDropText:(0,o.default)(this.setText),sendAsSticker:this.props.sendAsSticker})),(0,i.isMDBackend)()&&(0,c.eagerlyEstablishE2EESessionForMedia)(this.props.chat)}componentWillUnmount(){s.UA.isGecko?(0,r.default)((()=>u.ComposeBoxActions.focus(this.props.chat))):u.ComposeBoxActions.focus(this.props.chat)}}t.default=g},91037:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const[t,n]=(0,i.useFlow)(f.Select,{pushTransition:"none",popTransition:"none"}),a=(0,o.useRef)([]);if(null==n.step)return null;let h;switch(n.step){case f.Select:const t=d.ServerProps.maxParticipants;h=(0,c.jsx)(l.SelectModal,{title:r.fbt._("Send contacts",null,{hk:"9ZMyz"}),onCancel:()=>{n.pop()},onConfirm:e=>{n.push(f.Confirm),a.current=e},getInitialItems:()=>a.current,listType:l.ListType.CONTACT_SELECT_MODAL,maxItems:t,allowBlockedContacts:!0});break;case f.Confirm:const o=t=>{const{chat:a}=e,r=a.composeQuotedMsg,o=a.getComposeContents().ctwaContext||void 0;(0,s.default)(t,a,r,o),a.composeQuotedMsg=null,e.onContactsSent(),n.end()};h=(0,c.jsx)(u.default,{contactList:a.current,onSend:()=>o(a.current),onBack:()=>{n.pop()},chat:e.chat})}return(0,c.jsx)(t,{flow:n,children:h})};var r=n(48360),o=n(67294),i=n(59083),l=n(56728),s=a(n(60356)),d=n(64551),u=a(n(93110)),c=n(85893);const f=n(76672).Mirrored(["Select","Confirm"])},92246:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(41455),o=n(8139),i=n(44189),l=n(27394),s=a(n(32973)),d=n(82145),u=a(n(11339)),c=n(97567),f=n(67455),h=n(48870),p=n(27798),m=n(85893);class g extends s.default{constructor(){super(...arguments),this._handleProductCatalog=()=>{const{sellerJid:e,chat:t}=this.props;(0,o.canViewCollections)()&&h.QPL.markerStart(p.QuickLogMarkerId.WHATSAPP_CATALOG_COLLECTIONS_VIEW,{annotations:{string:{EntryPoint:"Cart"}}}),this.push((0,m.jsx)(f.ProductDetailsFlowLoadable,{chat:t,catalogOwnerJid:e}))},this._handleProductDetail=e=>{const{chat:t}=this.props;(0,d.qplStartProductView)("Cart"),this.push((0,m.jsx)(f.ProductDetailsFlowLoadable,{refreshCarousel:!0,chat:t,productInfo:e,onEnd:this._pop}))},this._end=()=>{this.end(!0)},this._pop=()=>{this.pop()}}componentDidMount(){const{sellerJid:e,chat:t}=this.props;this.push((0,m.jsx)(l.DrawerContext.Consumer,{children:n=>{const{entryPoint:a}=(0,c.getProductCatalogContext)(n),{isPushed:r}=this.state;return(0,m.jsx)(i.CartDetailDrawer,{chat:t,sellerJid:e,onProductDetail:this._handleProductDetail,onProductCatalog:this._handleProductCatalog,onBack:this._end,closeDrawerRightOnSend:a===u.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_PRODUCT_LIST_MESSAGE,isPushed:r})}})),r.DrawerManager.existsDrawerLeft((e=>{e&&r.DrawerManager.closeDrawerLeft()})),r.DrawerManager.existsDrawerMid((e=>{e&&r.DrawerManager.closeDrawerMid()}))}}t.default=g},86704:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=Q;var r=a(n(81109)),o=a(n(48926)),i=n(50796),l=n(92574),s=n(41455),d=n(8139),u=n(94816),c=n(78820),f=n(48360),h=n(67294),p=n(93581),m=n(99989),g=a(n(7532)),v=n(14710),x=a(n(54414)),_=n(19829),C=a(n(95416)),y=n(27105),b=n(83657),j=n(19380),S=a(n(60453)),E=a(n(69637)),k=n(27394),w=n(94790),T=a(n(93870)),M=a(n(12290)),P=a(n(32973)),I=n(77975),O=n(35054),L=n(82145),A=n(92557),D=a(n(63935)),R=n(9468),N=n(21374),B=n(97567),F=a(n(54050)),U=n(11395),G=n(48870),H=n(27798),z=n(87956),W=a(n(56829)),q=n(50452),V=n(85893);const Y=n(76672).Mirrored(["YES","NO","PENDING"]);class K extends P.default{constructor(){var e;super(...arguments),e=this,this._isComplianceFormVisible=!1,this._isProductListVisible=!1,this._blockCartInterstitial=()=>this.props.mustCompleteCompliance!==Y.NO,this._isCreatingCatalog=()=>this.props.isCreatingCatalog,this._showProductList=e=>{const t=(0,d.canManageCollections)()?(0,V.jsx)(x.default,{contact:this.props.contact,onCatalogLinkClick:this._handleCatalogShare,onProductShare:this._handleProductShare,onProductDetail:this._handleEditProduct,onAddProduct:this._handleAddProduct,onRemoveProduct:this._handleRemoveProduct,catalogId:this.props.catalogId,onBack:this._end,onCartClick:this._handleCartClick,businessProfile:null,headerType:w.DRAWER_HEADER_TYPE.LARGE,onCollectionSeeAll:this._handleCollectionSeeAll,canManageCatalog:!0,autoUpdate:!0,onOpenCollections:this._handleOpenCollections,onOpenMerchantDetailsForm:this._handleOpenMerchantDetailsForm,onEditCollection:this._handleEditCollection,onOpenSettings:this._handleOpenSettings,blockCartInterstitialFn:this._blockCartInterstitial,canLogQpl:e}):(0,V.jsx)(U.ProductListDrawer,{contact:this.props.contact,onCatalogLinkClick:this._handleCatalogShare,onProductShare:this._handleProductShare,onProductDetail:this._handleEditProduct,onAddProduct:this._handleAddProduct,onRemoveProduct:this._handleRemoveProduct,catalogId:this.props.catalogId,onBack:this._end,onCartClick:this._handleCartClick,businessProfile:null,headerType:w.DRAWER_HEADER_TYPE.LARGE,canManageCatalog:!0,autoUpdate:!0,onOpenSettings:this._handleOpenSettings,blockCartInterstitialFn:this._blockCartInterstitial});this.push(t)},this._handleOpenMerchantDetailsForm=()=>{const e=(0,c.getMeUser)();this.push((0,V.jsx)(A.MerchantDetailsFormFlowLoadable,{contactId:e,onBack:this.pop}))},this._handleEditProduct=e=>{const t=m.CatalogCollection.assertGet(this.props.catalogId);s.DrawerManager.openDrawerMid((0,V.jsx)(M.default,{catalog:t,product:e}),"slide-left",void 0,void 0,this.props.context,z.FocusType.TABBABLE)},this._handleCartClick=e=>{(0,W.default)(e,void 0,this.props.context)},this._handleCollectionSeeAll=e=>{this.push((0,V.jsx)(_.CollectionContentDrawer,{contact:this.props.contact,onProductDetail:this._handleEditProduct,onProductShare:this._handleProductShare,catalogId:this.props.catalogId,onBack:this._pop,onCatalogLinkClick:this._handleCatalogShare,onCartClick:this._handleCartClick,collection:e,canManageCatalog:!0,headerType:w.DRAWER_HEADER_TYPE.LARGE,onEditCollection:this._handleEditCollection}))},this._handleEditCollection=e=>{const t=m.CatalogCollection.get(this.props.catalogId);e||(0,O.logCollectionCreateClicked)((0,B.getProductCatalogContext)(this.props.context)),t&&this.push((0,V.jsx)(T.default,{onBack:this._pop,collection:e,catalog:t}))},this._handleCatalogShare=(e,t)=>{s.DrawerManager.openDrawerMid((0,V.jsx)(g.default,{onCancel:()=>{s.DrawerManager.closeDrawerMid()},catalog:e,contact:t,prompt:f.fbt._("Anyone with WhatsApp can follow this link to browse catalog",null,{hk:"1Lofnu"}),onSend:()=>s.DrawerManager.closeDrawerMid(),centerDrawer:!0}),"slide-left",void 0,void 0,this.props.context,z.FocusType.TABBABLE)},this._handleProductShare=e=>{s.DrawerManager.openDrawerMid((0,V.jsx)(F.default,{onCancel:()=>{s.DrawerManager.closeDrawerMid()},product:e,prompt:f.fbt._("Anyone with WhatsApp can follow this link to browse catalog",null,{hk:"1Lofnu"}),onSend:()=>s.DrawerManager.closeDrawerMid(),centerDrawer:!0,sendProductMsg:!0}),"slide-left",void 0,void 0,this.props.context,z.FocusType.TABBABLE)},this._handleOpenCollections=()=>{G.QPL.markerStart(H.QuickLogMarkerId.WHATSAPP_COLLECTIONS_MANAGEMENT_VIEW),this.push((0,V.jsx)(C.default,{onBack:this._pop,editCollection:this.editCollection,onSeeCollection:this._handleSeeCollection})),(0,O.logCollectionMenuClicked)((0,B.getProductCatalogContext)(this.props.context))},this._handleSeeCollection=e=>{(0,L.qplStartCollectionViewAll)("Collection"),this.push((0,V.jsx)(Q,{catalogId:this.props.catalogId,collection:e,product:null}))},this.editCollection=e=>{const t=m.CatalogCollection.get(this.props.catalogId);e||(0,O.logCollectionCreateClicked)((0,B.getProductCatalogContext)(this.props.context)),t&&this.push((0,V.jsx)(T.default,{onBack:this._pop,collection:e,catalog:t}))},this._handleOpenSettings=()=>{this.push((0,V.jsx)(v.CatalogSettingsDrawer,{onBack:this._pop}))},this._handleAddProduct=()=>this.props.onAddProduct(),this._handleAddFirstProduct=()=>this.props.onAddFirstProduct(),this._handleRemoveProduct=()=>this.props.onRemoveProduct(),this._handleAddProductFromBusinessDetails=(0,o.default)((function*(){e._pop(),e._isComplianceFormVisible=!1,yield e.props.onComplianceFormClosed();m.CatalogCollection.get(e.props.catalogId)?e._handleAddProduct():e._handleAddFirstProduct()})),this._pop=()=>{this.pop(),s.DrawerManager.closeDrawerMid()},this._end=()=>{this.end(!0),s.DrawerManager.closeDrawerMid()}}componentDidMount(){null!=this.props.collection?this._handleCollectionSeeAll(this.props.collection):null!=this.props.catalog?(this._showProductList(!0),null!=this.props.product&&this._handleEditProduct(this.props.product)):(G.QPL.markerDrop(H.QuickLogMarkerId.WHATSAPP_CATALOG_COLLECTIONS_VIEW),this._showNewCatalog())}componentDidUpdate(){this.props.showComplianceForm&&!this._isComplianceFormVisible?(this._isComplianceFormVisible=!0,this._showComplianceForm()):this.props.showProductList&&!this._isProductListVisible&&(this._isProductListVisible=!0,this._showProductList(!1))}_showNewCatalog(){this.push((0,V.jsx)(D.default,{isCreatingCatalogFn:this._isCreatingCatalog,onBack:this._pop,onAddProductClick:this._handleAddFirstProduct}))}_showComplianceForm(){this.push((0,V.jsx)(A.MerchantDetailsFormFlowLoadable,{contactId:this.props.contact.id,enableCatalogCreationContext:!0,enableBusinessProfileAddress:!0,onAddProduct:this._handleAddProductFromBusinessDetails,onBack:()=>{this._pop(),this._isComplianceFormVisible=!1,this.props.onComplianceFormClosed()},onUnmount:()=>{this._isComplianceFormVisible=!1,this.props.onComplianceFormClosed()}}))}}function Q(e){const t=(0,h.useContext)(k.DrawerContext),[n,a]=(0,h.useState)(Y.PENDING),c=j.ContactCollection.get(e.catalogId),[g,v]=(0,h.useState)(!1),[x,_]=(0,h.useState)(!1),[C,T]=(0,h.useState)(!1),[P,O]=(0,h.useState)(!1),L=(0,h.useCallback)((()=>m.CatalogCollection.get(e.catalogId)),[e.catalogId]),A=(0,h.useCallback)((0,o.default)((function*(){var e;if(!c)return __LOG__(4,void 0,new Error,!0)`Cannot update compliance for non existing user`,void SEND_LOGS("catalog-management-flow-compliance-no-contact-error");a(Y.PENDING);const t=null===(e=p.BusinessProfileCollection.get(c.id))||void 0===e?void 0:e.address;let n=Y.NO;const r=L();!(0,d.canSeeECommerceComplianceIndiaHardEnforcementBusinessJourney)(c.id.user)||r&&r.productCollection.length||(0,b.isBusinessCompliant)(t,yield(0,y.getLegalEntityDetails)(c.id),c.id)||(n=Y.YES),a(n)})),[c,L]),D=(0,h.useCallback)((()=>{const e=L();if(n===Y.YES)v(!0);else if(n===Y.PENDING)T(!0);else if(e){const n=new R.Product({catalogWid:e.id,additionalImageCdnUrl:[]});s.DrawerManager.openDrawerMid((0,V.jsx)(M.default,{catalog:e,product:n,onCreate:n=>{s.DrawerManager.openDrawerMid((0,V.jsx)(M.default,{catalog:e,product:n}),"slide-left",void 0,void 0,t,z.FocusType.TABBABLE)},newProduct:!0}),"slide-left",void 0,void 0,t,z.FocusType.TABBABLE)}}),[n,t,L]),F=(0,h.useCallback)((0,o.default)((function*(){O(!0);const n=(0,B.getProductCatalogContext)(t);(0,I.logCreateProductCatalogClick)(n),G.QPL.markerStart(H.QuickLogMarkerId.WHATSAPP_CATALOG_CREATE);let a=!0;try{yield(0,N.createCatalog)(),(0,I.logCreateProductCatalogSuccess)(n),a=!1,G.QPL.markerEnd(H.QuickLogMarkerId.WHATSAPP_CATALOG_CREATE,G.QuickLogActionType.SUCCESS);try{yield m.CatalogCollection.find(e.catalogId),_(!0),D()}catch(e){(0,i.filteredCatch)(l.ServerStatusCodeError,(()=>{__LOG__(3)`Failed to fetch product catalog from server`}))}}catch(e){(0,i.filteredCatch)(l.ServerStatusCodeError,(e=>{(0,I.logCreateProductCatalogFailed)(n,e.statusCode),u.ToastManager.open((0,V.jsx)(q.Toast,{msg:f.fbt._("Catalog already created.",null,{hk:"1s2DFD"}),id:(0,q.genId)("err_catalog_already_created")})),_(!0)}))}finally{a&&G.QPL.markerEnd(H.QuickLogMarkerId.WHATSAPP_CATALOG_CREATE,G.QuickLogActionType.FAIL)}O(!1)})),[e.catalogId,t,D]),U=(0,h.useCallback)((0,o.default)((function*(){n===Y.YES?v(!0):n===Y.PENDING?T(!0):yield F()})),[n,F]),W=(0,h.useCallback)((0,o.default)((function*(){yield A()})),[A]);return(0,h.useEffect)((()=>{A()}),[]),(0,h.useEffect)((()=>{const e=L();C&&n!==Y.PENDING&&(T(!1),n===Y.YES?v(!0):e?D():F()),n===Y.YES&&s.DrawerManager.closeDrawerMid()}),[C,n,L,F,D]),c?C?(0,V.jsxs)(S.default,{children:[(0,V.jsx)(w.DrawerHeader,{title:f.fbt._("Add new item",null,{hk:"2Tc6p3"}),onCancel:()=>{v(!1),T(!1)},type:w.DRAWER_HEADER_TYPE.LARGE}),(0,V.jsx)(E.default,{theme:"center-content",children:(0,V.jsx)(y.ComplianceInfoLoading,{})})]}):(0,V.jsx)(k.DrawerContext.Consumer,{children:t=>(0,V.jsx)(K,(0,r.default)({contact:c,context:t,mustCompleteCompliance:n,showComplianceForm:g,showProductList:x,isCreatingCatalog:P,onAddProduct:D,onAddFirstProduct:U,onRemoveProduct:W,onComplianceFormClosed:()=>(v(!1),A())},e))}):null}},12290:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(41455),o=n(48360),i=n(65303),l=a(n(32973)),s=n(82145),d=n(14746),u=a(n(54050)),c=n(85893);class f extends l.default{constructor(){super(...arguments),this._handleEditSuccess=e=>{(0,s.qplStartProductView)("EditProduct"),this._showInfoDrawer(e)},this._showInfoDrawer=e=>{const{catalog:t}=this.props;this.push((0,c.jsx)(d.ProductInfoDrawer,{catalog:t,product:e,onCancel:this.end,onEditProduct:this._handleProductEdit,onShareProduct:this._handleShareProduct}))},this._handleShareProduct=e=>{this.push((0,c.jsx)(u.default,{onBack:this._pop,product:e,prompt:(0,c.jsx)("div",{children:o.fbt._("Anyone with WhatsApp can follow this link to browse catalog",null,{hk:"1Lofnu"})}),onSend:()=>r.DrawerManager.closeDrawerMid(),centerDrawer:!0,sendProductMsg:!0}))},this._handleProductEdit=e=>{this.push((0,c.jsx)(i.EditProductDrawer,{catalog:this.props.catalog,onBack:this._pop,onEditSuccess:this._handleEditSuccess,product:e,onDelete:this._handleDelete}))},this._handleDelete=e=>{var t,n;const{product:a}=this.props;a.id===e.id&&r.DrawerManager.closeDrawerMid(),null===(t=(n=this.props).onDelete)||void 0===t||t.call(n)},this._pop=()=>{this.pop()},this._end=()=>{this.end(!0)}}componentDidMount(){const{catalog:e,product:t,onCreate:n,newProduct:a}=this.props;e.productCollection.on("remove",this._handleDelete),a?this.push((0,c.jsx)(i.EditProductDrawer,{onCancel:this._pop,onEditSuccess:e=>n?n(e):this._handleEditSuccess(t),catalog:e,product:t,newProduct:!0})):this._showInfoDrawer(t)}componentWillUnmount(){this.props.catalog.productCollection.off("remove",this._handleDelete)}}t.default=f},77467:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(64369)),o=n(14597),i=a(n(10403)),l=a(n(52665)),s=a(n(32973)),d=a(n(14296)),u=n(16770),c=a(n(76419)),f=a(n(19446)),h=n(47809),p=n(85893);class m extends s.default{constructor(){super(...arguments),this._handleDeleteLabel=e=>{e.forEach((e=>{let{id:t}=e;u.LabelCollection.deleteLabel(t)}))},this._handleManageLabels=e=>{o.ModalManager.open((0,p.jsx)(h.ManageLabelFlowLoadable,{modelsToUpdate:e}))},this._handleEditLabel=e=>{o.ModalManager.open((0,p.jsx)(i.default,{labelId:e,onUpdateLabel:this._handleUpdateLabel,onCancel:o.ModalManager.close()}))},this._handleLabelClick=e=>{const t=n(41885).Z;this.push((0,p.jsx)(t,{openLabelColorDrawer:this.openLabelColorDrawer,labelId:e,onManageLabels:this._handleManageLabels,onClose:this._pop,onRemoveLabel:this._handleRemoveLabel,onEditLabel:this._handleEditLabel}))},this.openAddLabel=()=>{u.LabelCollection.toArray().length>=r.default.MAX_SMB_LABEL_COUNT?o.ModalManager.open((0,p.jsx)(l.default,{okText:d.default.t(531),onOK:()=>o.ModalManager.close(),children:d.default.t(881,{count:r.default.MAX_SMB_LABEL_COUNT})})):o.ModalManager.open((0,p.jsx)(i.default,{onAddLabel:this._handleAddLabel,onCancel:o.ModalManager.close()}))},this._handleUpdateLabel=(e,t)=>{u.LabelCollection.updateLabel(e,t)},this.openLabelColorDrawer=(e,t)=>{this.push((0,p.jsx)(c.default,{labelId:e,onClose:this._pop,onUpdateColor:this._handleUpdateLabel,currentColor:t}))},this._pop=()=>{this.pop()}}componentDidMount(){this.push((0,p.jsx)(f.default,{onDeleteLabel:this._handleDeleteLabel,onLabelClick:this._handleLabelClick,onClose:this._pop,openAddLabel:this.openAddLabel}))}_handleAddLabel(e,t){u.LabelCollection.addNewLabel(e,t)}_handleRemoveLabel(e,t){u.LabelCollection.addOrRemoveLabels([{id:e,type:"remove"}],t)}}t.default=m},51095:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(64369)),o=n(14597),i=a(n(10403)),l=n(63183),s=a(n(52665)),d=a(n(32973)),u=a(n(14296)),c=n(16770),f=n(50047),h=a(n(94981)),p=a(n(11339)),m=n(85893);class g extends d.default{constructor(){super(...arguments),this._newlyAddedLabels=new Set,this._logWamEvent=()=>{const e=this.props.modelsToUpdate.length;this._labelViewType=1===e?this.props.modelsToUpdate[0]instanceof l.Chat?p.default.LABEL_TARGETS.LABEL_CHAT_DIALOG:p.default.LABEL_TARGETS.LABEL_MESSAGE_DIALOG:p.default.LABEL_TARGETS.LABEL_COMBINED_DIALOG,(0,f.logLabelOperationEvent)(p.default.LABEL_OPERATIONS.VIEW,e,this._labelViewType)},this._handleLabelUpdateComplete=()=>{this.props.onLabelUpdateComplete&&this.props.onLabelUpdateComplete(),this._pop()},this._handleAddLabel=(e,t)=>{c.LabelCollection.addNewLabel(e,t).then((()=>{this._newlyAddedLabels.add(e)}))},this.shouldScrollIntoViewAndSelect=e=>this._newlyAddedLabels.has(e)?(this._newlyAddedLabels.delete(e),{shouldScrollIntoView:!0,shouldSelect:!0}):{shouldScrollIntoView:!1,shouldSelect:!1},this._handleAddNewLabel=()=>{c.LabelCollection.toArray().length>=r.default.MAX_SMB_LABEL_COUNT?o.ModalManager.open((0,m.jsx)(s.default,{okText:u.default.t(531),onOK:()=>o.ModalManager.close(),children:u.default.t(881,{count:r.default.MAX_SMB_LABEL_COUNT})})):this.push((0,m.jsx)(i.default,{onAddLabel:this._handleAddLabel,onCancel:this._pop}))},this._popAndLogEvent=()=>{this._labelViewType&&(0,f.logLabelOperationEvent)(p.default.LABEL_OPERATIONS.CLICK_NEGATIVE,this.props.modelsToUpdate.length,this._labelViewType),this.pop()},this._pop=()=>{this.pop()}}componentDidMount(){this._logWamEvent(),this.push((0,m.jsx)(h.default,{shouldScrollIntoViewAndSelect:this.shouldScrollIntoViewAndSelect,onAddNewLabel:this._handleAddNewLabel,onLabelUpdateComplete:this._handleLabelUpdateComplete,onCancel:this._popAndLogEvent,modelsToUpdate:this.props.modelsToUpdate}))}}t.default=g,g.defaultProps={removeTopDrawer:!0,pushTransition:"none",popTransition:"none"}},11753:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(81109)),o=a(n(48926)),i=n(40277),l=n(81572),s=n(8139),d=n(78820),u=n(70490),c=n(48360),f=n(67294),h=(a(n(56720)),n(79686)),p=a(n(48517)),m=n(93581),g=n(33866),v=n(33049),x=n(27105),_=n(83657),C=a(n(60453)),y=a(n(69637)),b=n(94790),j=a(n(33308)),S=a(n(82624)),E=a(n(32973)),k=n(84287),w=n(13923),T=n(90011),M=n(85893);const P={complianceInfoHelpCenterBanner:{color:"hp667wtd",paddingTop:"nlnf8xo7",paddingEnd:"bcymb0na",paddingBottom:"r219jyu0",paddingStart:"e8k79tju"},formContainer:{paddingTop:"a4bywxmn",paddingEnd:"bcymb0na",paddingBottom:"ekpn4oxx",paddingStart:"e8k79tju",marginBottom:"brac1wpa"},formTitle:{paddingTop:"i5tg98hk",paddingEnd:"f9ovudaz",paddingBottom:"przvwfww",paddingStart:"gx1rr48f",marginBottom:"oqp0d33z"},formTitleWithSubtitle:{paddingTop:"i5tg98hk",paddingEnd:"f9ovudaz",paddingBottom:"przvwfww",paddingStart:"gx1rr48f",marginBottom:"inww9tbj"},subtitle:{color:"hp667wtd",marginBottom:"oqp0d33z"},containingBlock:{transform:"cgi16xlc"}};class I extends E.default{componentDidMount(){this.push((0,M.jsx)(F,{contactId:this.props.contactId,enableCatalogCreationContext:this.props.enableCatalogCreationContext,enableBusinessProfileAddress:this.props.enableBusinessProfileAddress,onBack:()=>{this.props.onBack()},onAddProduct:this.props.onAddProduct}))}componentWillUnmount(){var e,t;null===(e=(t=this.props).onUnmount)||void 0===e||e.call(t)}}t.default=I;const O=e=>e?P.formTitleWithSubtitle:P.formTitle,L=()=>c.fbt._("Add a legal name of business",null,{hk:"1Dgk4f"}),A=()=>c.fbt._("Add a business address",null,{hk:"2x7w3h"}),D=e=>e?c.fbt._("Incorrect email address format",null,{hk:"1KuwvT"}):c.fbt._("Add an email address",null,{hk:"KeJaU"}),R=()=>c.fbt._("Add a grievance officer name",null,{hk:"29OUSc"}),N=e=>!e||(0,i.isPotentiallyPhoneNumber)(e),B=(0,d.getMeUser)(),F=(0,f.forwardRef)(((e,t)=>{let{contactId:n,onBack:a,enableCatalogCreationContext:i,enableBusinessProfileAddress:d,onAddProduct:h}=e;const[E,k]=(0,f.useState)({}),[T,I]=(0,f.useState)({}),[F,G]=(0,f.useState)(!0),[z,W]=(0,f.useState)(!1),[q,V]=(0,f.useState)(),[Y,K]=(0,f.useState)(!1);(0,f.useEffect)((()=>{let e=!0;return(0,o.default)((function*(){const[t,a]=yield Promise.all([(0,x.getLegalEntityDetails)(n),m.BusinessProfileCollection.find(n)]);e&&(k(t),V(a.serialize()),G(!1))}))(),()=>{e=!1}}),[n]),(0,f.useEffect)((()=>{K(!Object.keys(T).length&&(0,_.isBusinessCompliant)(null==q?void 0:q.address,E,n))}),[E,T,null==q?void 0:q.address,n]);const Q=function(){var e=(0,o.default)((function*(e){yield(0,g.editBusinessCompliance)(e);const t=yield m.BusinessProfileCollection.update(B,{getMerchantCompliance:!0});return(Array.isArray(t)?t[0]:t).serialize().legalEntityDetails}));return function(){return e.apply(this,arguments)}}(),X=(0,f.useCallback)(function(){var e=(0,o.default)((function*(e,t){const n={[e]:t,isRegistered:null==E?void 0:E.isRegistered};k((0,r.default)((0,r.default)({},E),n));const a=yield Q(n);k(a)}));return function(){return e.apply(this,arguments)}}(),[E]),Z=(0,f.useCallback)(((e,t)=>{I((n=>(0,r.default)((0,r.default)({},n),{},{[`${e}.${t}`]:!0})))}),[]),J=(0,f.useCallback)(((e,t)=>{I((n=>{const a=(0,r.default)({},n);return delete a[`${e}.${t}`],a}))}),[]),$=(0,f.useCallback)(function(){var e=(0,o.default)((function*(e,t,n){const a={[e]:{[t]:n},isRegistered:null==E?void 0:E.isRegistered};k((0,r.default)((0,r.default)({},E),{},{[e]:(0,r.default)((0,r.default)({},null==E?void 0:E[e]),a[e])}));try{Z(e,t);const n=yield Q(a);k(n),J(e,t)}catch(e){throw new Error(e)}}));return function(){return e.apply(this,arguments)}}(),[E,Z,J]),ee=(0,f.useCallback)(function(){var e=(0,o.default)((function*(e){V(e),yield m.BusinessProfileCollection.update(B)}));return function(){return e.apply(this,arguments)}}(),[]),te=(0,f.useCallback)(function(){var e=(0,o.default)((function*(e,t){k(yield(0,x.getLegalEntityDetails)(n)),J(e,t)}));return function(){return e.apply(this,arguments)}}(),[n,J]),ne=(0,f.useCallback)(function(){var e=(0,o.default)((function*(e,t,n){if(e||t){W(!0);const a=yield Q({entityType:e,entityTypeCustom:t,isRegistered:n});W(!1),k(a)}}));return function(){return e.apply(this,arguments)}}(),[]),{entityName:ae,customerCareDetails:re,grievanceOfficerDetails:oe}=E||{},ie=(0,f.useMemo)((()=>(0,_.getEntityTypeText)(E)),[E]),le=(0,f.useCallback)((e=>(0,_.existsField)(e,n)),[n]),se=(0,f.useRef)(null),de=(0,s.canSeeECommerceComplianceIndiaHardEnforcementBusinessJourney)(B.user);return(0,M.jsx)("div",{ref:t,children:(0,M.jsxs)(C.default,{xstyle:P.containingBlock,children:[(0,M.jsx)(b.DrawerHeader,{title:c.fbt._("Business details",null,{hk:"m9xzp"}),onBack:a,type:b.DRAWER_HEADER_TYPE.LARGE}),(0,M.jsx)(y.default,{theme:F?"center-content":void 0,ref:se,children:F?(0,M.jsx)(x.ComplianceInfoLoading,{}):(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(x.ComplianceInfoHelpCenterBanner,{xstyle:P.complianceInfoHelpCenterBanner}),(0,M.jsxs)(j.default,{titleXStyle:P.formTitle,xstyle:[P.formContainer],children:[(0,M.jsx)(U,{value:ae,maxLength:v.COMPLIANCE_INFO_LENGTH.ENTITY_NAME,placeholder:c.fbt._("Legal Name of Business",null,{hk:"2s9jD"}),icon:"info",validate:le,errorFn:L,onSave:e=>X("entityName",e)}),(0,M.jsx)(U,{value:ie,placeholder:c.fbt._("Business Type",null,{hk:"48J73B"}),icon:"account-balance",onFocus:()=>l.Cmd.showMerchantDetailsEntityTypePopup(E,ne),isLoading:z}),de?(0,M.jsx)(H,{rawBusinessProfile:q,validate:le,onAfterSave:ee,errorFn:A}):null]}),(0,M.jsxs)(j.default,{title:c.fbt._("Customer Care Information",null,{hk:"qlYos"}),titleXStyle:O(de),xstyle:[P.formContainer],children:[de?(0,M.jsx)(w.TextDiv,{xstyle:P.subtitle,children:c.fbt._("Provide at least one phone number and email address",null,{hk:"IKXYK"})}):null,(0,M.jsx)(U,{value:null==re?void 0:re.mobileNumber,maxLength:v.COMPLIANCE_INFO_LENGTH.MOBILE_NUMBER,placeholder:c.fbt._("Mobile Phone Number",null,{hk:"PMTTg"}),icon:"phone",validate:e=>(0,_.existsCustomerCareDetailsContact)(re,n,"mobileNumber",e)&&N(e),onSave:e=>$("customerCareDetails","mobileNumber",e),onCancel:()=>te("customerCareDetails","mobileNumber"),onError:e=>(0,x.handleCustomerCareDetailsError)(re,n,"mobileNumber",e),errorFn:e=>(0,_.getCustomerCareDetailsError)(re,"mobileNumber",e,c.fbt._("Incorrect phone number format",null,{hk:"3lFQ1f"}),n)}),(0,M.jsx)(U,{value:null==re?void 0:re.landlineNumber,maxLength:v.COMPLIANCE_INFO_LENGTH.LANDLINE_NUMBER,placeholder:c.fbt._("Landline Phone Number",null,{hk:"tXYaf"}),icon:"phone",validate:e=>(0,_.existsCustomerCareDetailsContact)(re,n,"landlineNumber",e)&&N(e),onSave:e=>$("customerCareDetails","landlineNumber",e),onCancel:()=>te("customerCareDetails","landlineNumber"),onError:e=>(0,x.handleCustomerCareDetailsError)(re,n,"landlineNumber",e),errorFn:e=>(0,_.getCustomerCareDetailsError)(re,"landlineNumber",e,c.fbt._("Incorrect landline phone number format",null,{hk:"4zXlsw"}),n)}),(0,M.jsx)(U,{value:null==re?void 0:re.email,maxLength:v.COMPLIANCE_INFO_LENGTH.EMAIL,placeholder:c.fbt._("Email Address",null,{hk:"2jYxR1"}),icon:"business-email",validate:e=>le(e)&&(0,u.validateEmail)(e),onSave:e=>$("customerCareDetails","email",e),errorFn:D})]}),(0,M.jsxs)(j.default,{title:c.fbt._("Grievance Officer Information",null,{hk:"3emd7I"}),titleXStyle:O(de),xstyle:[P.formContainer],children:[de?(0,M.jsx)(w.TextDiv,{xstyle:P.subtitle,children:c.fbt._("Provide name and at least one contact method",null,{hk:"2Fjw3Y"})}):null,(0,M.jsx)(U,{value:null==oe?void 0:oe.name,maxLength:v.COMPLIANCE_INFO_LENGTH.GRIEVANCE_OFFICER_NAME,placeholder:c.fbt._("Name",null,{hk:"2vEs6r"}),validate:le,icon:"assignment-ind",onSave:e=>$("grievanceOfficerDetails","name",e),errorFn:R}),(0,M.jsx)(U,{value:null==oe?void 0:oe.mobileNumber,maxLength:v.COMPLIANCE_INFO_LENGTH.MOBILE_NUMBER,placeholder:c.fbt._("Mobile Phone Number",null,{hk:"3kk5I"}),icon:"phone",validate:e=>(0,_.existsGrievanceOfficerDetailsContact)(oe,n,"mobileNumber",e)&&N(e),onSave:e=>$("grievanceOfficerDetails","mobileNumber",e),onCancel:()=>te("grievanceOfficerDetails","mobileNumber"),onError:e=>(0,x.handleGrievanceOfficerDetailsError)(oe,n,"mobileNumber",e),errorFn:e=>(0,_.getGrievanceOfficerDetailsError)(oe,"mobileNumber",e,c.fbt._("Incorrect phone number format",null,{hk:"3lFQ1f"}),n)}),(0,M.jsx)(U,{value:null==oe?void 0:oe.landlineNumber,maxLength:v.COMPLIANCE_INFO_LENGTH.LANDLINE_NUMBER,placeholder:c.fbt._("Landline Phone Number",null,{hk:"4GBzF0"}),icon:"phone",validate:e=>(0,_.existsGrievanceOfficerDetailsContact)(oe,n,"landlineNumber",e)&&N(e),onSave:e=>$("grievanceOfficerDetails","landlineNumber",e),onCancel:()=>te("grievanceOfficerDetails","landlineNumber"),onError:e=>(0,x.handleGrievanceOfficerDetailsError)(oe,n,"landlineNumber",e),errorFn:e=>(0,_.getGrievanceOfficerDetailsError)(oe,"landlineNumber",e,c.fbt._("Incorrect landline phone number format",null,{hk:"4zXlsw"}),n)}),(0,M.jsx)(U,{value:null==oe?void 0:oe.email,maxLength:v.COMPLIANCE_INFO_LENGTH.EMAIL,placeholder:c.fbt._("Email Address",null,{hk:"3SvbLl"}),icon:"business-email",validate:e=>(0,_.existsGrievanceOfficerDetailsContact)(oe,n,"email",e)&&(0,u.validateEmail)(e),onSave:e=>$("grievanceOfficerDetails","email",e),onError:e=>(0,x.handleGrievanceOfficerDetailsError)(oe,n,"email",e),errorFn:e=>(0,_.getGrievanceOfficerDetailsError)(oe,"email",e,c.fbt._("Incorrect email address format",null,{hk:"1KuwvT"}),n)})]}),null!=i&&null!=h?(0,M.jsx)(S.default,{disabled:!Y,rootRef:se.current,onClick:()=>(0,p.default)(h),children:c.fbt._("Next: Add Items",null,{hk:"4gxzId"})}):null]})})]})})}));function U(e){let{value:t="",maxLength:n,placeholder:a,icon:r,isLoading:i=!1,validate:l,errorFn:s,onChange:d,onSave:u,onCancel:c,onError:h,onFocus:p}=e;const[m,g]=(0,f.useState)(t),[v,x]=(0,f.useState)(),[_,C]=(0,f.useState)(i);return(0,f.useEffect)((()=>{g(t)}),[t]),(0,f.useEffect)((()=>{(null==l?void 0:l(m))&&x(null)}),[m,l,s]),(0,f.useEffect)((()=>{C(i)}),[i]),(0,M.jsx)(k.IconSection,{icon:r,theme:k.IconSectionTheme.NoMargin,content:(0,M.jsx)(T.TextInput,{value:m,editable:!0,maxLength:n,pending:_,inputPlaceholder:a,showRemaining:!0,managedError:!0,validate:l,error:v,onChange:g,onSave:(0,o.default)((function*(){C(!0);try{yield null==u?void 0:u(m)}catch(e){s&&x(s(m))}C(!1)})),onCancel:()=>{g(t),x(null),null==c||c()},onError:()=>{s&&x(s(m)),null==h||h(m)},theme:"text-input",onFocus:p,blockFocusOnLock:!!p,lockable:!0})})}function G(e,t,n){return{address:e,categories:[],hours:{days:[]},longitude:t,latitude:n}}function H(e){let{rawBusinessProfile:t,validate:n,onAfterSave:a,errorFn:i}=e;const[l,s]=(0,f.useState)(),[d,u]=(0,f.useState)(null==t?void 0:t.address),[c,p]=(0,f.useState)(),{longitude:m,latitude:v}=t||{},[x,_]=(0,f.useState)(G(d,m,v));return(0,f.useEffect)((()=>_(G(d,m,v))),[d,m,v]),(0,f.useEffect)((()=>{n(d)&&p(null)}),[d,n]),null==t||null==x?null:(0,M.jsx)(k.IconSection,{icon:"business-address",theme:k.IconSectionTheme.NoMargin,content:(0,M.jsx)(h.BusinessAddressField,{businessProfile:x,activeField:l,rawBusinessProfile:t,value:d,validate:n,error:c,lowProfile:!1,onActive:s,onChange:u,onCancel:()=>{u(t.address)},onSaveBusinessProfile:(0,o.default)((function*(){yield(0,g.editBusinessProfile)({address:d}),yield a((0,r.default)((0,r.default)({},t),{},{address:d}))})),onError:()=>{i&&p(i(d))}})})}},62643:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(99964)),o=n(81572),i=n(28298),l=n(48360),s=n(67294),d=a(n(56720)),u=a(n(95402)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=w(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(n(39519)),f=n(88984),h=a(n(60453)),p=a(n(69637)),m=n(94790),g=n(29623),v=a(n(32973)),x=n(12176),_=n(96866),C=n(18878),y=n(88998),b=n(75169),j=n(11054),S=a(n(23217)),E=n(18085),k=n(85893);function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(w=function(e){return e?n:t})(e)}class T extends v.default{componentDidMount(){this.push((0,k.jsx)(L,{onBack:this.end}))}}t.default=T;const M={orderButton:{display:"p357zi0d",alignItems:"gndfcl4n",textAlign:"ljrqcn24",height:"b82nm36r",width:"ln8gz9je"},orderManagementDrawerBody:{backgroundColor:"ihvf49ua",overflowX:"i44ccddp",overflowY:"ag5g9lrv",height:"ppled2lx"},orderInfo:{borderBottom:"qmxv8cnq",flexGrow:"ggj6brxn",overflowX:"gfz4du6o",overflowY:"r7fjleex"},flexGrow:{flexGrow:"ggj6brxn"},orderSubDetails:{color:"re3l9645",fontSize:"f8jlpxt4",lineHeight:"jgi8eev7"},canceled:{color:"mvxzr2tb"},completed:{color:"jq3rn4u7"},infoRow:{color:"re3l9645",fontWeight:"hnx8ox4h",fontSize:"f8jlpxt4",lineHeight:"t4tp0euv"},orderStatusLabel:{fontWeight:"hnx8ox4h"},title:{color:"edisrohx",lineHeight:"a4ywakfo",fontSize:"enbbiyaj"},subTitle:{color:"re3l9645"},orderItemLabel:{whiteSpace:"le5p0ye3",overflowX:"gfz4du6o",overflowY:"r7fjleex",textOverflow:"lhj4utae"}},P=e=>{let{orderStatusInfo:t=(0,y.getDefaultOrderStatus)()}=e;const n=b.OrderStatusLabels[t];return(0,k.jsx)("span",{className:(0,d.default)(M.orderStatusLabel,M[String(t)]),children:n})},I=e=>{let{items:t=[]}=e;if(0===t.length)return null;const[n,...a]=t,r=String(l.fbt._({"*":"{number_of_items} items",_1:"1 item"},[l.fbt._plural(a.length,"number_of_items")],{hk:"4kR0HP"})),o=a.length>0?`${String(l.fbt._("and",null,{hk:"1nijDn"}))} ${1===a.length?a[0].name:r}`:"",i=`${n.name} ${o}`;return(0,k.jsx)("span",{title:i,className:(0,d.default)(M.orderItemLabel,M.flexGrow),children:i})},O=()=>(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{className:(0,d.default)(M.infoRow,i.uiPadding.horiz16,i.uiPadding.vert10),children:l.fbt._("History",null,{hk:"YpPUW"})}),(0,k.jsxs)(g.FlexColumn,{align:"center",xstyle:i.uiPadding.top9,children:[(0,k.jsx)(S.default,{name:"payment-history-empty"}),(0,k.jsx)("div",{className:(0,d.default)(M.subTitle,i.uiPadding.all16),children:l.fbt._("No order history",null,{hk:"38B6xg"})})]})]}),L=(0,s.forwardRef)((e=>{const t=(0,s.useRef)(null),{ordersInfoMap:{contactAndOrderInfoMap:n,orderStatusInfoMap:a},isLoading:r,ordersLazylist:o}=(0,E.useGetOrders)(t,65);return(0,k.jsxs)(h.default,{children:[(0,k.jsx)(m.DrawerHeader,{title:l.fbt._("Orders",null,{hk:"lWP2b"}),type:m.DRAWER_HEADER_TYPE.LARGE,onBack:e.onBack}),(0,k.jsxs)(p.default,{ref:t,className:(0,d.default)(M.orderManagementDrawerBody),children:[o.map(((e,t)=>(0,k.jsxs)(s.Fragment,{children:[(0,k.jsx)(D,{date:(0,C.getOrderDisplayDate)(n,o,t)}),(0,k.jsx)(A,{contactAndOrderInfo:n[e],orderStatusInfo:a[e]?a[e].status:(0,y.getDefaultOrderStatus)()})]},e))),r&&(0,k.jsx)(g.FlexRow,{justify:"center",xstyle:i.uiPadding.all16,children:(0,k.jsx)(j.Spinner,{color:"default",size:24,stroke:6})}),!r&&!o.length&&(0,k.jsx)(O,{})]})]})})),A=e=>{var t;let{contactAndOrderInfo:n,orderStatusInfo:a}=e;const l=(0,u.default)();return(0,k.jsxs)("button",{"data-a8n":r.default.key("order-management-order-button"),onClick:()=>{const{interactiveMsg:e}=n;e&&(o.Cmd.openChatFromUnread(e.chat),(0,_.openOrderDetailDrawer)(e,l))},className:(0,d.default)(M.orderButton),children:[(0,k.jsx)("div",{className:(0,d.default)(i.uiPadding.vert12,i.uiPadding.horiz16),children:(0,k.jsx)(f.DetailImage,{id:n.contact.id,size:40})}),(0,k.jsxs)("div",{className:(0,d.default)(M.orderInfo,i.uiPadding.vert10,i.uiPadding.end16),children:[(0,k.jsxs)(g.FlexRow,{xstyle:M.title,children:[(0,k.jsx)(x.Name,{titlify:!0,ellipsify:!0,className:(0,d.default)(M.flexGrow),contact:n.contact}),(0,k.jsx)("span",{children:c.formatAmount(n.orderInfo.currency,null!==(t=n.orderInfo.totalAmount)&&void 0!==t?t:0)})]}),(0,k.jsxs)(g.FlexRow,{xstyle:M.orderSubDetails,children:[(0,k.jsx)(I,{items:n.orderInfo.items}),(0,k.jsx)(P,{orderStatusInfo:a})]})]})]})},D=e=>{let{date:t=""}=e;return t&&(0,k.jsx)("div",{className:(0,d.default)(M.infoRow,i.uiPadding.horiz16,i.uiPadding.vert10),children:t.toUpperCase()})}},82554:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(81109)),o=a(n(48926)),i=n(92844),l=n(8139),s=n(14597),d=n(45454),u=n(48360),c=n(67294),f=n(93581),h=a(n(77338)),p=a(n(7532)),m=a(n(54414)),g=n(32107),v=n(19829),x=a(n(52665)),_=n(19380),C=n(27394),y=a(n(32973)),b=n(77975),j=a(n(67700)),S=a(n(80456)),E=a(n(32488)),k=a(n(3607)),w=n(97567),T=a(n(70107)),M=n(79188),P=a(n(54050)),I=n(11395),O=n(91695),L=a(n(77776)),A=a(n(56829)),D=n(85893);class R extends y.default{constructor(){var e;super(...arguments),e=this,this.scrollOffset=0,this.setScrollOffset=e=>{this.scrollOffset=e},this._handleCollectionSeeAll=e=>{const{catalogOwnerJid:t,chat:n,product:a,productInfo:r,sellerJid:o}=this.props,i=t||(null==a?void 0:a.catalogWid.toString())||(null==r?void 0:r.businessOwnerJid)||o;this.push((0,D.jsx)(N,{chat:n,catalogOwnerJid:i,collection:e,isAllItems:!e}))},this._pushProductDetails=(e,t)=>{const{chat:n,refreshCarousel:a}=this.props,r=(0,D.jsx)(T.default,{chat:n,product:e,onEnd:this._end,onBack:this._popAndUpdate,onProductDetail:this._handleProductDetail,onProductCatalog:this._handleProductCatalogHeaderClick,onProductLinkClick:this._handleProductLinkClick,onProductMoreInformation:this._handleProductMoreInformation,refreshCarousel:a,onCartClick:this._handleCartClick,collectionId:t});this.push(r)},this._pushProductMoreInformation=e=>{const t=(0,D.jsx)(L.default,{product:e,onBack:this._popAndUpdate});this.push(t)},this._pushProductDetailsWithDeepLink=e=>{const t=(0,D.jsx)(M.ProductDetailsWithDeepLink,{chat:this.props.chat,productInfo:e,onEnd:this._end,onBack:this._pop,onProductDetail:this._handleProductDetail,onProductCatalog:this._handleProductCatalogHeaderClick,onProductLinkClick:this._handleProductLinkClick,onProductMoreInformation:this._handleProductMoreInformation,onCartClick:this._handleCartClick});this.push(t)},this.pushProductCatalog=function(){var t=(0,o.default)((function*(t){const n=_.ContactCollection.gadd(t),a=yield f.BusinessProfileCollection.find(t),r=(0,l.canViewCollections)()?(0,D.jsx)(m.default,{contact:n,onProductDetail:e._handleProductDetail,catalogId:t,onBack:e._pop,businessProfile:a,scrollOffset:e.scrollOffset,setScrollOffset:e.setScrollOffset,onCatalogLinkClick:e._handleCatalogLinkClick,onCartClick:e._handleCartClick,onCollectionSeeAll:e._handleCollectionSeeAll}):(0,D.jsx)(I.ProductListDrawer,{contact:n,onProductDetail:e._handleProductDetail,catalogId:t,onBack:e._pop,businessProfile:a,setScrollOffset:e.setScrollOffset,onCatalogLinkClick:e._handleCatalogLinkClick,onCartClick:e._handleCartClick});e.push(r)}));return function(){return t.apply(this,arguments)}}(),this._pushCartOrderDetail=(e,t,n,a,r,o,i)=>{const l=(0,D.jsx)(h.default,{orderId:e,token:t,sellerJid:n,userIsCartOwner:a,onProductDetail:this._handleProductDetailFromInfo,onOrderCreate:this._handleOrderCreate,onOrderCancel:this._handleOrderCancel,ownerHasReviewed:r,orderMessage:o,chat:i});this.push(l)},this._pushProductList=(e,t)=>{const n=_.ContactCollection.gadd(t),a=(0,D.jsx)(O.ProductMessageListDrawer,{contact:n,productListId:e,onProductDetail:this._handleProductDetail,onCartClick:this._handleCartClick,onBack:this._pop,onEnd:this._end,setScrollOffset:this.setScrollOffset});this.push(a)},this._handleProductSummaryClick=e=>{this._pushOrderDetailProductList(e)},this._handleOrderStatusUpdateClick=()=>{this._pushOrderStatusUpdate()},this._handleOrderCreate=e=>{this._pushOrderCreate(e)},this.cancelOrder=()=>{const{orderId:e,token:t,sellerJid:n,userIsCartOwner:a,orderMessage:r,chat:o}=this.props;null!=e&&null!=t&&null!=n&&null!=a&&this._pushCartOrderDetail(e,t,n,a,!0,r,o),s.ModalManager.close()},this._handleOrderCancel=()=>{s.ModalManager.open((0,D.jsx)(x.default,{onCancel:()=>{s.ModalManager.close()},cancelText:u.fbt._("Do not decline",null,{hk:"1GLBjf"}),onOK:this.cancelOrder,okText:u.fbt._("Decline",null,{hk:"thsKi"}),title:u.fbt._("Decline this order?",null,{hk:"2hlAzX"}),children:u.fbt._("You can include a note with the cancelation message.",null,{hk:"3M6G2k"})}))},this._handleProductDetail=(e,t)=>{this._pushProductDetails(e,t)},this._handleProductMoreInformation=e=>{this._pushProductMoreInformation(e)},this._handleProductDetailFromInfo=e=>{this._pushProductDetailsWithDeepLink(e)},this._handleProductCatalogHeaderClick=(e,t)=>{(0,b.logCarouselViewMoreClick)({catalogOwnerWid:e,catalogContext:t}),this.pushProductCatalog(e)},this._handleProductLinkClick=e=>{this.push((0,D.jsx)(P.default,{product:e,onBack:this._pop}))},this._handleCatalogLinkClick=(e,t)=>{this.push((0,D.jsx)(p.default,{catalog:e,contact:t,onBack:this._pop}))},this._handleCartClick=e=>{const t=(0,w.getProductCatalogContext)(this.props.context),n=(0,A.default)(e,this.props.chat,t);n&&this.push(n)},this._pop=()=>{this.pop()},this._end=()=>{this.end(!0)},this._popAndUpdate=()=>{this.popAndUpdate({scrollOffset:this.scrollOffset})}}componentDidMount(){const{catalogOwnerJid:e,orderId:t,product:n,productInfo:a,productListId:r,collection:o,collectionId:s,isAllItems:u,token:c,sellerJid:f,userIsCartOwner:h,orderMessage:p,chat:m,orderInfo:v}=this.props;if((0,l.commerceThreadsLoggingEnabled)()&&(0,g.addChatThreadLoggingActivities)([{activityType:"isCommerceViewed",ts:(0,i.unixTime)(),chatId:m.id}]),e)o||u?this.pushCollectionContent((0,d.createWid)(e)):null!=r?this._pushProductList(r,(0,d.createWid)(e)):this.pushProductCatalog((0,d.createWid)(e));else if(n)this._pushProductDetails(n,s);else if(a)this._pushProductDetailsWithDeepLink(a);else if(t)null!=c&&null!=f&&null!=h&&this._pushCartOrderDetail(t,c,f,h,!1,p,m);else{if(null==v||null==f)throw new Error("ProductDetailsFlow:no-product");this._pushOrderDetail(m,v,(0,d.createWid)(f))}}pushCollectionContent(e){const t=_.ContactCollection.gadd(e);this.push((0,D.jsx)(v.CollectionContentDrawer,{contact:t,onProductDetail:this._handleProductDetail,catalogId:e,onBack:this._pop,onCatalogLinkClick:this._handleCatalogLinkClick,onCartClick:this._handleCartClick,scrollOffset:this.scrollOffset,setScrollOffset:this.setScrollOffset,collection:this.props.collection}))}_pushOrderCreate(e){this.push((0,D.jsx)(j.default,{onBack:this._pop,order:e,chat:this.props.chat}))}_pushOrderDetailProductList(e){this.push((0,D.jsx)(E.default,{onBack:this._pop,productItems:e}))}_pushOrderDetail(e,t,n){this.push((0,D.jsx)(S.default,{onBack:this._pop,orderInfo:t,sellerWid:n,chat:e,onProductSummaryClick:this._handleProductSummaryClick,onOrderStatusUpdateClick:this._handleOrderStatusUpdateClick}))}_pushOrderStatusUpdate(){const{orderInfo:e,sellerJid:t}=this.props;null!=e&&null!=t&&this.push((0,D.jsx)(k.default,{chat:this.props.chat,onBack:this._pop,orderInfo:e,sellerJid:t}))}}const N=(0,c.forwardRef)(((e,t)=>{const n=(0,c.useContext)(C.DrawerContext);return(0,D.jsx)(R,(0,r.default)({ref:t,context:n},e))}));var B=N;t.default=B},66123:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,u.useEffect)((()=>{o.Cmd.closeContextMenu(),o.Cmd.closeTooltip()}),[]);return(0,m.jsx)(h.SelectModal,{onConfirm:t=>{var n;(0,f.qplStartProductSendMessage)("Forward",void 0,t.length);const a=t.map(function(){var t=(0,r.default)((function*(t){return t.isUser&&t.contact.isBlocked()&&(yield(0,c.unblockContact)(t.contact)),(t=>{const{product:n}=e;return new Promise(((e,a)=>{o.Cmd.once("ui_idle",(()=>{t.sendProductMessage(n).then((()=>e())).catch((e=>a(e)))}))}))})(t)}));return function(){return t.apply(this,arguments)}}());(0,f.qplEndProductMessageSend)(Promise.all(a)),s.ModalManager.close(),1===t.length&&(o.Cmd.openChatFromUnread(t[0]),window.innerWidth<=l.LAYOUT_2COLUMNS_MAX_WIDTH&&i.DrawerManager.closeDrawerRight()),null===(n=e.onSend)||void 0===n||n.call(e)},maxItems:p.ServerProps.multicastLimitGlobal,title:d.fbt._("Send message to",null,{hk:"2kkuQs"}),listType:h.ListType.CHAT_SELECT_MODAL,onCancel:()=>{s.ModalManager.close()}})};var r=a(n(48926)),o=n(81572),i=n(41455),l=n(41906),s=n(14597),d=n(48360),u=n(67294),c=n(80140),f=n(24064),h=n(56728),p=n(64551),m=n(85893)},32387:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const[t,n]=(0,o.useFlow)(u.PromotionNotification,{pushTransition:"none",popTransition:"none"});if(null==n.step)return null;const{communityMetadata:a}=e;let c;switch(n.step){case u.PromotionNotification:c=(0,d.jsx)(s.default,{onDemote:()=>{n.push(u.Demote)},onContinue:()=>{n.end(),(0,i.acknowledgeCommunityAdminPromotion)(a)}});break;case u.Demote:var f;c=(0,d.jsx)(l.default,{isCommunityOwner:null===(f=a.owner)||void 0===f?void 0:f.equals((0,r.getMaybeMeUser)()),onDemote:()=>{n.end(),(0,i.acknowledgeCommunityAdminPromotion)(a)},onCancel:()=>{n.pop()}})}return(0,d.jsx)(t,{flow:n,children:c})};var r=n(78820),o=n(59083),i=n(97060),l=a(n(63980)),s=a(n(75329)),d=n(85893);const u=n(76672).Mirrored(["PromotionNotification","Demote"])},94070:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const[n,a]=(0,d.useState)(!0),[w,T]=(0,d.useState)(E.COMMUNITY_TAB),M=(0,c.default)(_.default,["add","remove","change"],(()=>_.default.filter((e=>e.isParentGroup)))),[P,I]=(0,d.useState)(null===(t=M[0])||void 0===t?void 0:t.id),O=(0,f.default)(),L=(0,u.default)((()=>{e.onBack?e.onBack():l.DrawerManager.closeDrawerLeft()}));function A(){return D.apply(this,arguments)}function D(){return(D=(0,r.default)((function*(e){const t=yield e;N(E.A_COMMUNITY_HOME),null==t||O.aborted||(0,v.findChat)(t).then((e=>{i.Cmd.openChatBottom(e).then((t=>{t&&g.ComposeBoxActions.focus(e)}))}))}))).apply(this,arguments)}function R(e){a(!0),T(e)}function N(e){a(!1),T(e)}const B=k.indexOf(w),F=function(e){switch(e){case E.COMMUNITY_TAB:return(0,S.jsx)(m.default,{parentGroups:M,onBack:L,onNewCommunity:()=>R(E.NEW_COMMUNITY_FLOW),onCommunityHome:e=>{I(e),R(E.A_COMMUNITY_HOME)}});case E.A_COMMUNITY_HOME:{const e=(0,o.default)(P,"selectedCommunity");return(0,S.jsx)(p.CommunityHome,{jid:e,callbacks:{onBack:()=>N(E.COMMUNITY_TAB),onManageCommunityGroupsClick:()=>R(E.MANAGE_GROUPS_FLOW),onInviteMembersClick:()=>R(E.INVITE_MEMBERS_FLOW),onAddNewGroupClick:()=>R(E.NEW_GROUP_FLOW)}})}case E.NEW_COMMUNITY_FLOW:return(0,S.jsx)(y.NewCommunityFlowLoadable,{onBack:()=>N(E.COMMUNITY_TAB)});case E.MANAGE_GROUPS_FLOW:{const e=(0,o.default)(P,"selectedCommunity"),t=_.default.assertGet(e);return(0,S.jsx)(C.ManageCommunityGroupsFlowLoadable,{parentGroupMetadata:t,onBack:()=>N(E.A_COMMUNITY_HOME)})}case E.INVITE_MEMBERS_FLOW:{const e=(0,o.default)(P,"selectedCommunity"),t=h.ChatCollection.assertGet(e);return(0,S.jsx)(x.GroupInviteLinkDrawerLoadable,{chat:t,groupMetadata:t.groupMetadata,onBack:()=>N(E.A_COMMUNITY_HOME),useLargeHeader:!0})}case E.NEW_GROUP_FLOW:{const e=(0,o.default)(P,"selectedCommunity");return(0,S.jsx)(b.NewGroupFlowLoadable,{onCreateGroup:A,parentGroupWid:e,onBack:()=>N(E.A_COMMUNITY_HOME)})}}}(w);return(0,S.jsx)(s.default,{transitionName:n?"flow-transition-drawer-push":"flow-transition-drawer-pop",children:(0,S.jsx)(j.UIE,{displayName:`FlowDrawer${B}`,escapable:!0,requestDismiss:e=>{!1===e&&L()},children:F},B)})};var r=a(n(48926)),o=a(n(45095)),i=n(81572),l=n(41455),s=a(n(40436)),d=n(67294),u=a(n(16031)),c=a(n(96570)),f=a(n(3409)),h=n(69951),p=n(4903),m=a(n(89309)),g=n(88172),v=n(50101),x=n(88280),_=a(n(63928)),C=n(94205),y=n(23620),b=n(26489),j=n(18644),S=n(85893);const E=n(76672).Mirrored(["COMMUNITY_TAB","A_COMMUNITY_HOME","NEW_COMMUNITY_FLOW","MANAGE_GROUPS_FLOW","INVITE_MEMBERS_FLOW","NEW_GROUP_FLOW"]),k=Array.from(E.members())},87971:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(67873)),o=a(n(32973)),i=n(67455),l=n(85893);class s extends o.default{constructor(){super(...arguments),this._handleProductClick=e=>{this.push((0,l.jsx)(i.ProductDetailsFlowLoadable,{refreshCarousel:!0,chat:this.props.msg.chat,product:e,onEnd:this._pop}))},this._pop=()=>{this.pop()}}componentDidMount(){this.push((0,l.jsx)(r.default,{msg:this.props.msg,onProductClick:this._handleProductClick}))}}t.default=s},53135:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const[t,n]=(0,s.useState)(null),a=(0,s.useRef)(null),g=(0,s.useRef)(),[v,_]=(0,d.useFlow)(x.Capture),C=()=>{var e;null===(e=g.current)||void 0===e||e.call(g);const{asyncStream:t,disposeStream:n}=h.start("camera",(()=>_.push(x.Guide,"modal")));g.current=n,t.then((e=>{a.current||_.pop("modal"),e&&a.current&&a.current.loadNewStream(e,n)})).catch((0,r.filteredCatch)(o.GUM.NotAllowedError,(()=>{_.end(),l.ModalManager.open((0,m.jsx)(f.GuidePopup,{messaging:f.Messaging.CAMERA_FAIL,type:f.TYPE.GUIDE_UNBLOCK}))}))).catch((0,r.filteredCatch)(o.GUM.GUMError,(()=>{_.end(),l.ModalManager.open((0,m.jsx)(f.GuidePopup,{messaging:f.Messaging.CAMERA_MISSING,type:f.TYPE.GUIDE_NONE}))})))};if((0,s.useEffect)((()=>(C(),()=>{var e;null===(e=g.current)||void 0===e||e.call(g)})),[]),null==_.step)return null;let y;switch(_.step){case x.Capture:y=(0,m.jsx)(p.Modal,{type:p.ModalTheme.Box,children:(0,m.jsx)(u.default,{ref:a,stream:void 0,disposeStream:void 0,caption:!1,theme:"capture-cover",onBack:()=>_.end(),onSend:null,onCaptured:e=>{n(e),_.push(x.EditImage,"flow-transition-box-size-drawer-push")},chat:void 0})});break;case x.Guide:y=(0,m.jsx)(f.GuidePopup,{messaging:f.Messaging.CAMERA,type:f.TYPE.GUIDE_ALLOW,onConfirm:()=>_.pop("modal")});break;case x.EditImage:y=(0,m.jsx)(p.Modal,{type:p.ModalTheme.Box,children:(0,m.jsx)(c.EditImageDrawer,{onRetake:()=>{_.pop("flow-transition-box-size-drawer-pop"),C()},retryText:c.RETRY_OPTIONS.RETAKE,onFinished:(t,n)=>{e.onFinished(t,n),_.end()},onCancel:()=>_.end(),img:(0,i.default)(t,"blob")})})}return(0,m.jsx)(v,{flow:_,children:y})};var r=n(50796),o=v(n(35232)),i=a(n(45095)),l=n(14597),s=n(67294),d=n(59083),u=a(n(37409)),c=n(50025),f=n(18671),h=v(n(61849)),p=n(57224),m=n(85893);function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function v(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}const x=n(76672).Mirrored(["Capture","Guide","EditImage"])},22587:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(50796),o=n(81572),i=a(n(64369)),l=n(14597),s=n(48360),d=n(69951),u=a(n(52665)),c=a(n(32973)),f=a(n(82058)),h=a(n(84034)),p=a(n(14296)),m=n(56728),g=n(64551),v=n(85893);class x extends c.default{constructor(){super(...arguments),this.requestFocus=()=>{var e;const t=null===(e=this.refUIE)||void 0===e?void 0:e.getRef();null!=t&&(t instanceof HTMLElement||"function"!=typeof t.onFocusList||t.onFocusList())},this._handleForwardConfirmed=e=>{const{msgs:t,onForward:n}=this.props;d.ChatCollection.forwardMessagesToChats(t,e).catch((0,r.filteredCatch)(f.default,(e=>{this._showMediaSendError(e.reasons)}))),this.end(),n&&n(t),o.Cmd.openChatFromUnread(e[0])},this._showMediaSendError=e=>{const t=e.map((e=>{let{chat:t,reason:n}=e;return(0,v.jsxs)("p",{children:[t.formattedTitle," : ",n]},t.id.toString())}));l.ModalManager.open((0,v.jsx)(u.default,{onOK:()=>l.ModalManager.close(),okText:s.fbt._("OK",null,{hk:"2KEeHb"}),children:t}),void 0)}}componentDidMount(){const{msgs:e}=this.props,t=p.default.t(319,{_plural:e.length||1}),n=e[0],a=n.chat;let r;r="video"!==n.type&&"image"!==n.type?"message":n.type;const o=e.some((e=>e.isFrequentlyForwarded)),l=e.some((e=>e.isForwarded)),s=e.filter((e=>!e.isFrequentlyForwarded&&e.getForwardingScoreWhenForwarded()===i.default.FREQUENTLY_FORWARDED_SENTINEL));let d;s.length&&(d=(0,v.jsx)(h.default,{frequentlyForwardedCount:s.length,totalCount:e.length}));const u=o?g.ServerProps.frequentlyForwardedMax:g.ServerProps.multicastLimitGlobal;this.push((0,v.jsx)(m.SelectModal,{onConfirm:this._handleForwardConfirmed,maxItems:u,excludeChat:a,excludeBroadcast:!0,msgType:r,title:t,listType:m.ListType.CHAT_SELECT_MODAL,customHeader:d,hasFrequentlyForwarded:o,hasForwarded:l,ephemeralIcon:"chat-list"}))}}t.default=x},21649:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(32973)),o=a(n(1686)),i=n(85893);class l extends r.default{componentDidMount(){this.push((0,i.jsx)(o.default,{chat:this.props.chat,onConfirm:this.props.onConfirm}))}}t.default=l},85916:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(32973)),o=a(n(21024)),i=n(67455),l=n(85893);class s extends r.default{constructor(){super(...arguments),this._handleProductClick=e=>{this.push((0,l.jsx)(i.ProductDetailsFlowLoadable,{refreshCarousel:!0,chat:this.props.msg.chat,product:e,onEnd:this._pop}))},this._pop=()=>{this.pop()}}componentDidMount(){this.push((0,l.jsx)(o.default,{msg:this.props.msg,onProductClick:this._handleProductClick}))}}t.default=s},7335:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(48926)),o=n(54907),i=n(14597),l=n(94816),s=n(48360),d=a(n(52665)),u=n(50101),c=a(n(32973)),f=a(n(63928)),h=a(n(72696)),p=a(n(14296)),m=a(n(88793)),g=n(12176),v=n(13705),x=n(50452),_=n(85893);class C extends c.default{constructor(){var e;super(...arguments),e=this,this._handleSendInvite=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;i.ModalManager.close(),Promise.all(e.props.participantNeedInvite.map(function(){var a=(0,r.default)((function*(a){const{contact:r,invite_code:i,invite_code_exp:l}=a,s=yield(0,u.findChat)(r.id),d=e.props.groupGid.toString(),c=f.default.assertGet(d);return(yield(0,o.sendGroupInviteMessage)(s,d,e.props.subject,i||"",l,t,n))===v.SendMsgResult.OK&&(c.pendingParticipants.add({id:r.id}),!0)}));return function(){return a.apply(this,arguments)}}())).then((e=>{const t=e.filter(Boolean).length;l.ToastManager.open((0,_.jsx)(x.Toast,{msg:p.default.t(771,{num:t,_plural:t}),id:(0,x.genId)()}))}))},this._addInviteCommment=e=>{this.push((0,_.jsx)(h.default,{participants:e,gid:this.props.groupGid,subject:this.props.subject,groupDesc:this.props.groupDesc,onClose:this._pop,onSend:this._handleSendInvite}))},this._pop=()=>{this.pop()}}componentDidMount(){const{participantNeedInvite:e}=this.props,t=this._getFormattedNames(e.map((e=>e.contact)),!0),n=p.default.t(362,{participant:t,_plural:e.length});this.push((0,_.jsx)(d.default,{onOK:this._addInviteCommment.bind(this,e),okText:s.fbt._("Invite to group",null,{hk:"FbMSO"}),onCancel:this._pop,cancelText:s.fbt._("Cancel",null,{hk:"H0gNq"}),children:n}))}_getFormattedName(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?e.formattedUser:(0,_.jsx)(g.Name,{contact:e})}_getFormattedNames(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!Array.isArray(e))return this._getFormattedName(e,t);const n=e.map((e=>this._getFormattedName(e,t)));return(0,m.default)(n,t)}}t.default=C,C.defaultProps={removeTopDrawer:!0,pushTransition:"none",popTransition:"none"}},89936:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const[t,n]=(0,o.useFlow)(d.ImageSearch),[a,u]=(0,r.useState)(),[c,f]=(0,r.useState)();if(null==n.step)return null;let h;switch(n.step){case d.ImageSearch:h=(0,s.jsx)(l.default,{onCancel:()=>n.pop(),onImageSelected:(e,t)=>{u(e),f(t),n.push(d.ImageEdit)}});break;case d.ImageEdit:a&&null!=c&&(h=(0,s.jsx)(i.EditImageDrawer,{onCancel:()=>n.end(),attributionUrl:c,onFinished:(t,a)=>{e.onFinished(t,a),n.end()},onRetake:()=>n.pop(),retryText:i.RETRY_OPTIONS.NONE,img:a}))}return(0,s.jsx)(t,{flow:n,children:h})};var r=n(67294),o=n(59083),i=n(50025),l=a(n(90312)),s=n(85893);const d=n(76672).Mirrored(["ImageSearch","ImageEdit"])},24064:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.qplEndProductMessageSend=function(e){const t=r.QuickLogMarkerId.WHATSAPP_PRODUCT_MESSAGE_SEND;e.then((()=>{a.QPL.markerEnd(t,a.QuickLogActionType.SUCCESS)})).catch((()=>{a.QPL.markerEnd(t,a.QuickLogActionType.FAIL)}))},t.qplStartProductSendMessage=function(e,t,n){const o=r.QuickLogMarkerId.WHATSAPP_PRODUCT_MESSAGE_SEND;a.QPL.markerStart(o,{annotations:{string:{EntryPoint:e}}}),void 0!==t&&a.QPL.markerAnnotate(o,{int:{ProductCount:t}}),void 0!==n&&a.QPL.markerAnnotate(o,{int:{ContactCount:n}})};var a=n(48870),r=n(27798)},37926:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{id:t,joinedSubgroups:n=[],unjoinedSubgroups:a=[]}=(0,c.useOptionalModelValues)(e.parentGroupMetadata,["id","joinedSubgroups","unjoinedSubgroups"])||{},[E,k]=(0,s.useState)(b.GROUPS_MANAGER),[w,T]=(0,s.useState)(!0),M=(0,f.default)();(0,s.useEffect)((()=>{(0,_.syncAllSubgroups)()}),[]);const P=(0,u.default)((()=>{e.onBack?e.onBack():i.DrawerManager.closeDrawerRight()}));function I(e){T(!0),k(e)}function O(e){T(!1),k(e)}function L(){return A.apply(this,arguments)}function A(){return(A=(0,r.default)((function*(e){const t=yield e;O(b.GROUPS_MANAGER),null==t||M.aborted||(0,g.findChat)(t).then((e=>{o.Cmd.openChatBottom(e).then((t=>{t&&m.ComposeBoxActions.focus(e)}))}))}))).apply(this,arguments)}function D(e){const r=new Set([...a,...n]),o=e.filter((e=>!r.has(e.id)));o.length&&(0,v.default)(t,o.map((e=>e.id))),O(b.GROUPS_MANAGER)}const R=function(e){switch(e){case b.GROUPS_MANAGER:return(0,y.jsx)(p.default,{joinedSubgroups:n,unjoinedSubgroups:a,onBack:P,onNewGroupFlow:()=>I(b.NEW_GROUP),onExistingGroupFlow:()=>I(b.EXISTING_GROUP),parentId:t});case b.NEW_GROUP:return(0,y.jsx)(x.NewGroupFlowLoadable,{onCreateGroup:L,parentGroupWid:t,onBack:()=>O(b.GROUPS_MANAGER)});case b.EXISTING_GROUP:return(0,y.jsx)(h.default,{onBack:()=>O(b.GROUPS_MANAGER),onSubmit:D,onCreateNewGroup:()=>I(b.NEW_GROUP),currentSubgroupCount:n.length+a.length-1})}}(E),N=j.indexOf(E);return(0,y.jsx)(l.default,{transitionName:w?"flow-transition-drawer-push":"flow-transition-drawer-pop",transitionAppear:!0,transitionLeave:!0,children:(0,y.jsx)(C.UIE,{displayName:`FlowDrawer${N}`,escapable:!0,requestDismiss:function(){P()},children:(0,y.jsx)("div",{className:(0,d.default)(S),children:R})},N)})};var r=a(n(48926)),o=n(81572),i=n(41455),l=a(n(40436)),s=n(67294),d=a(n(56720)),u=a(n(16031)),c=n(35461),f=a(n(3409)),h=a(n(82187)),p=a(n(68122)),m=n(88172),g=n(50101),v=a(n(68705)),x=n(26489),_=n(42681),C=n(18644),y=n(85893);const b=n(76672).Mirrored(["GROUPS_MANAGER","NEW_GROUP","EXISTING_GROUP"]),j=Array.from(b.members()),S={position:"lhggkp7q",top:"qq0sjtgm",start:"tkdu00h0",width:"ln8gz9je",height:"ppled2lx",overflowX:"gfz4du6o",overflowY:"r7fjleex"}},3884:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(81572),o=n(19380),i=a(n(81411)),l=n(56489),s=n(50101),d=a(n(32973)),u=a(n(14296)),c=n(23620),f=a(n(87679)),h=a(n(85201)),p=n(85893);class m extends d.default{constructor(){var e;super(...arguments),e=this,this._handleClick=(e,t)=>{(0,s.findChat)(t.id).then(r.Cmd.openChatFromUnread.bind(r.Cmd)),this.end()},this._handleNewGroup=()=>{this.push((0,p.jsx)(h.default,{onBack:this.pop,onContinue:this._handleSetGroupInfo}))},this._handleNewCommunity=()=>{this.push((0,p.jsx)(c.NewCommunityFlowLoadable,{onBack:this.pop.bind(this)}))},this._handleSubmit=function(t,n,a,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];(0,l.createGroup)(t,n,a,o,r),e.end()},this._handleSetGroupInfo=e=>{this.push((0,p.jsx)(f.default,{participants:e,onBack:()=>{this.popAndUpdate({participants:e})},onSubmit:this._handleSubmit}))}}componentDidMount(){o.ContactCollection.ensureSorted(),this.push((0,p.jsx)(i.default,{title:u.default.t(517),onBack:this.end,onClick:this._handleClick,onNewGroup:this._handleNewGroup,onNewCommunity:this._handleNewCommunity}))}}t.default=m},81971:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const[t,n]=(0,d.useState)(""),[a,b]=(0,d.useState)(),[j,S]=(0,d.useState)(),[E,k]=(0,f.default)(s.NUX.COMMUNITY),[w,T]=(0,d.useState)([]),[M,P]=(0,d.useState)([]),I=(0,u.default)((()=>{e.onBack?e.onBack():l.DrawerManager.closeDrawerLeft()})),[O,L]=(0,c.useFlow)(y.Info,{onEnd:I});if(E)return(0,C.jsx)(m.default,{onContinue:k,onBack:I});function A(){return(A=(0,r.default)((function*(){yield(0,g.default)({name:t,desc:a,icon:j,existingGroups:w,newGroups:M}),l.DrawerManager.closeDrawerLeft()}))).apply(this,arguments)}if(null==L.step)return null;let D=null;switch(L.step){case y.Info:D=(0,C.jsx)(x.default,{name:t,description:a,imgBlob:j,onBack:I,onContinue:(e,t,a)=>{n(e),b(t),S(a),L.push(y.GroupsManager)}});break;case y.GroupsManager:D=(0,C.jsx)(v.default,{name:t,description:a,imgBlob:j,onBack:()=>L.pop(),onNewGroupFlow:()=>L.push(y.NewGroup),onExistingGroupFlow:()=>L.push(y.ExistingGroup),onRemoveGroup:function(e){const t=M.filter((t=>t.tempId!==e)),n=w.filter((t=>t.id.toString()!==e));M.length!==t&&P(t),w.length!==n&&T(n)},onCreateCommunity:function(){return A.apply(this,arguments)},groups:[...w,...M]});break;case y.NewGroup:D=(0,C.jsx)(_.default,{onBack:()=>L.pop(),onSubmit:function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const r=(0,o.randomHex)(8);P((t=>[{tempId:r,subject:e,icon:n,ephemeralDuration:a},...t])),L.pop()},isCommunityCreation:!0});break;case y.ExistingGroup:D=(0,C.jsx)(p.default,{onBack:()=>L.pop(),onSubmit:function(e){const t=e.map((e=>{var t;const n=(0,i.default)(h.ChatCollection.get(e.id.toString()),"ChatCollection.get(contact.id.toString())");return{id:e.id,subject:n.title(),participants:null===(t=n.groupMetadata)||void 0===t?void 0:t.participants,contact:e}}));T(t),L.pop()},currentSubgroupCount:w.length+M.length,onCreateNewGroup:()=>L.push(y.NewGroup)})}return(0,C.jsx)(O,{flow:L,requestDismiss:function(){I()},children:D})};var r=a(n(48926)),o=n(87614),i=a(n(45095)),l=n(41455),s=n(71579),d=n(67294),u=a(n(16031)),c=n(59083),f=a(n(59732)),h=n(69951),p=a(n(82187)),m=a(n(30730)),g=a(n(12224)),v=a(n(63232)),x=a(n(98600)),_=a(n(87679)),C=n(85893);const y=n(76672).Mirrored(["Info","GroupsManager","NewGroup","ExistingGroup"])},66960:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(41455),o=a(n(40436)),i=n(67294),l=a(n(56720)),s=a(n(16031)),d=n(19380),u=n(56489),c=a(n(87679)),f=a(n(85201)),h=n(18644),p=n(85893);const m=n(76672).Mirrored(["ADD_PARTICIPANTS_DRAWER","SET_GROUP_INFO_DRAWER"]),g=Array.from(m.members()),v={position:"lhggkp7q",top:"qq0sjtgm",start:"tkdu00h0",width:"ln8gz9je",height:"ppled2lx",overflowX:"gfz4du6o",overflowY:"r7fjleex"};var x=(0,i.forwardRef)(((e,t)=>{const[n,a]=(0,i.useState)(m.ADD_PARTICIPANTS_DRAWER),[x,_]=(0,i.useState)(!0),[C,y]=(0,i.useState)([]),b=(0,i.useRef)(null),j=g.indexOf(n);(0,i.useEffect)((()=>{d.ContactCollection.ensureSorted()}),[]),(0,i.useImperativeHandle)(t,(()=>({getElement:()=>b.current,restoreFocus:()=>{var e;return null===(e=b.current)||void 0===e?void 0:e.focus()}})));const S=(0,s.default)((()=>{e.onBack?e.onBack():r.DrawerManager.closeDrawerLeft()})),E=function(t,n,a,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];const i=(0,u.createGroup)(t,n,a,o,r,e.parentGroupWid);e.onCreateGroup&&e.onCreateGroup(i),S()},k=e=>{var t;y(e),t=m.SET_GROUP_INFO_DRAWER,_(!0),a(t)},w=function(e){switch(e){case m.SET_GROUP_INFO_DRAWER:return(0,p.jsx)(c.default,{participants:C,onBack:()=>{return e=m.ADD_PARTICIPANTS_DRAWER,_(!1),void a(e);var e},onSubmit:E});case m.ADD_PARTICIPANTS_DRAWER:return(0,p.jsx)(f.default,{onBack:S,onContinue:k,participants:C})}}(n);return(0,p.jsx)(o.default,{transitionName:x?"flow-transition-drawer-push":"flow-transition-drawer-pop",transitionAppear:!0,children:(0,p.jsx)(h.UIE,{displayName:`FlowDrawer${j}`,escapable:!0,requestDismiss:function(){S()},children:(0,p.jsx)("div",{className:(0,l.default)(v),ref:b,children:w})},j)})}));t.default=x},89495:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const{chat:n}=e,a=(0,r.default)(null===(t=n.groupMetadata)||void 0===t?void 0:t.groupInviteLink,"chat.groupMetadata?.groupInviteLink"),d=`${o.fbt._("Follow this link to join my WhatsApp group:",null,{hk:"4FZHrC"}).toString()} ${a}`;return(0,s.jsx)(l.default,{title:i.default.t(344),text:d})};var r=a(n(45095)),o=n(48360),i=a(n(14296)),l=a(n(24158)),s=n(85893)},77248:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const[e,t]=(0,c.useFlow)(z.Settings),[n,a]=(0,u.useState)(null),H=(0,f.useModelValues)(P.default,["archive"]);if(null==t.step)return null;const W=()=>{t.pop()};let q;switch(t.step){case z.Settings:const e=[{a8nText:"li-notifications",children:C.default.t(448),key:z.Notifications,icon:(0,G.jsx)(L.default,{name:"settings-notifications"}),onClick:()=>{t.push(z.Notifications)}},(0,i.privacySettingsEnabled)()?{a8nText:"li-privacy",children:d.fbt._("Privacy",null,{hk:"3Cq6XQ"}),icon:(0,G.jsx)(L.default,{name:"security-lock",width:24,height:24}),key:z.PrivacySettings,onClick:()=>{t.push(z.PrivacySettings)},testid:"settings-drawer-item-privacy"}:null,(0,r.isMDBackend)()?{a8nText:"li-security",children:d.fbt._("Security",null,{hk:"49DQ09"}),icon:(0,G.jsx)(L.default,{name:"settings-security"}),key:z.Security,onClick:()=>{t.push(z.Security)}}:null,(0,i.web2FAEnabled)()?{a8nText:"li-two-factor",children:d.fbt._("Two-Step Verification",null,{hk:"1ZYq8m"}),icon:(0,G.jsx)(L.default,{name:"settings-pin"}),key:z.TwoFactorAuthentication,onClick:()=>{t.push(z.TwoFactorAuthentication)}}:null,{children:d.fbt._("Theme",null,{hk:"4zgi0L"}),icon:(0,G.jsx)(L.default,{name:"settings-theme"}),key:"ThemePopup",onClick:()=>{l.ModalManager.open((0,G.jsx)(A.default,{}))}},{children:d.fbt._("Chat wallpaper",null,{hk:"2LOVd6"}),icon:(0,G.jsx)(L.default,{name:"settings-wallpaper"}),key:z.Wallpaper,onClick:()=>{t.push(z.Wallpaper)}},(0,r.isLegacyWebdBackend)()&&(0,i.archiveV2Supported)()&&H.archive.enabled?{children:d.fbt._("Archived chats",null,{hk:"3bOfr5"}),icon:(0,G.jsx)(L.default,{name:"archived"}),key:z.ArchiveSettings,onClick:()=>{t.push(z.ArchiveSettings)}}:null,(0,i.privacySettingsEnabled)()?null:{a8nText:"li-blocked",children:C.default.t(443),icon:(0,G.jsx)(L.default,{name:"settings-blocked"}),key:z.Blocked,onClick:()=>{t.push(z.Blocked)}},(0,i.webMediaAutoDownloadEnabled)()?{a8nText:"li-media-auto-download",children:d.fbt._("Media auto-download",null,{hk:"9NKKi"}),icon:(0,G.jsx)(L.default,{name:"media-download"}),key:z.MediaAutoDownload,onClick:()=>{t.push(z.MediaAutoDownload)}}:null,{children:d.fbt._("Request Account Info",null,{hk:"4fUjWZ"}),icon:(0,G.jsx)(L.default,{name:"settings-document",width:24,height:24}),key:z.RequestAccountInfoSettings,onClick:()=>{t.push(z.RequestAccountInfoSettings)}},null,{a8nText:"li-keyboard-shortcuts",children:d.fbt._("Keyboard shortcuts",null,{hk:"1uFFXP"}),icon:(0,G.jsx)(L.default,{name:"settings-keyboard"}),key:"KeyboardShortcuts",onClick:()=>{l.ModalManager.open((0,G.jsx)(_.default,{}))}},{a8nText:"li-help",children:C.default.t(444),icon:(0,G.jsx)(L.default,{name:"settings-help"}),key:"Help",onClick:()=>{o.upload({reason:"help-page-opened",isHighPri:!0}),t.push(z.Help)}}].filter(Boolean);q=(0,G.jsx)(I.default,{items:e,profileId:(0,s.getMaybeMeUser)(),onProfile:()=>{t.push(z.Profile)},onClose:W});break;case z.Wallpaper:q=(0,G.jsx)(U.default,{onClose:W});break;case z.ArchiveSettings:q=(0,G.jsx)(h.default,{settings:P.default,onClose:W});break;case z.RequestAccountInfoSettings:q=(0,G.jsx)(T.default,{settings:P.default,onClose:W});break;case z.Blocked:q=(0,G.jsx)(p.default,{onClose:W});break;case z.Profile:const u=(0,s.getMaybeMeUser)(),c=O.StatusCollection.assertGet(u),f=w.ProfilePicThumbCollection.assertGet(u),V=g.ContactCollection.assertGet(u);q=(0,G.jsx)(k.ProfileDrawerFlowLoadable,{status:c,profilePicThumb:f,contact:V,conn:m.Conn,onClose:W});break;case z.Notifications:q=(0,G.jsx)(j.default,{onClose:W});break;case z.TwoFactorAuthentication:q=(0,G.jsx)(D.default,{onClose:W,onOpenUpdateEmailDrawer:()=>{t.push(z.TwoFactorUpdateEmail)},onOpenUpdatePinDrawer:()=>{t.push(z.TwoFactorUpdatePin)},onOpenRegistrationDrawer:()=>{t.push(z.TwoFactorRegistration)},onOpenDisableDrawer:()=>{t.push(z.TwoFactorDisable)}});break;case z.TwoFactorUpdateEmail:q=(0,G.jsx)(B.default,{onClose:W});break;case z.TwoFactorUpdatePin:q=(0,G.jsx)(F.default,{onClose:W});break;case z.TwoFactorRegistration:q=(0,G.jsx)(N.default,{onClose:W});break;case z.TwoFactorDisable:q=(0,G.jsx)(R.default,{onClose:W});break;case z.MediaAutoDownload:q=(0,G.jsx)(y.default,{onClose:W});break;case z.Security:q=(0,G.jsx)(M.default,{onClose:W});break;case z.PrivacyVisiblityEdit:q=null!=n?(0,G.jsx)(E.PrivacyVisibilityEditDrawer,{onClose:W,category:n}):null;break;case z.PrivacySettings:q=(0,G.jsx)(S.default,{onClose:W,onOpenVisibilityEditDrawer:e=>{a(e),t.push(z.PrivacyVisiblityEdit)},onOpenBlockedContacts:()=>{t.push(z.Blocked)},onOpenEphemeralityDrawer:()=>{t.push(z.DefaultEphemerality)}});break;case z.DefaultEphemerality:q=(0,G.jsx)(v.default,{onClose:W,entryPoint:b.default.DISAPPEARING_MODE_ENTRY_POINT_TYPE.ACCOUNT_SETTINGS});break;case z.DesktopSettings:q=(0,G.jsx)(DesktopSettingsDrawer,{onClose:W});break;case z.Help:q=(0,G.jsx)(x.default,{onClose:W})}return(0,G.jsx)(e,{flow:t,children:q})};var r=n(88555),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=H(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(n(86374)),i=n(8139),l=n(14597),s=n(78820),d=n(48360),u=n(67294),c=n(59083),f=n(35461),h=a(n(62921)),p=a(n(51731)),m=n(17239),g=n(19380),v=a(n(43250)),x=a(n(15048)),_=a(n(57302)),C=a(n(14296)),y=a(n(31839)),b=a(n(11339)),j=a(n(46385)),S=a(n(22082)),E=n(39828),k=n(77117),w=n(82039),T=a(n(52468)),M=a(n(98863)),P=a(n(68132)),I=a(n(74265)),O=n(46133),L=a(n(23217)),A=a(n(7693)),D=a(n(87023)),R=a(n(36486)),N=a(n(92857)),B=a(n(89932)),F=a(n(24098)),U=a(n(14551)),G=n(85893);function H(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(H=function(e){return e?n:t})(e)}const z=n(76672).Mirrored(["Settings","Wallpaper","ArchiveSettings","RequestAccountInfoSettings","Blocked","Profile","Notifications","TwoFactorAuthentication","TwoFactorUpdateEmail","TwoFactorUpdatePin","TwoFactorRegistration","TwoFactorDisable","MediaAutoDownload","Security","PrivacyVisiblityEdit","PrivacySettings","DefaultEphemerality","DesktopSettings","Help"])},540:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(81572),o=a(n(32973)),i=n(84387),l=a(n(78985)),s=a(n(61752)),d=n(85893);class u extends o.default{constructor(){super(...arguments),this.sessionId=Math.round(1e9*Math.random()),this._openStatusViewer=(e,t,n)=>{this.push((0,d.jsx)(s.default,{initialStatusV3:e,initialStatusMsg:t,closeStatusViewer:this.closeStatusViewer,sessionId:this.sessionId,rowIdx:n,continuousPlay:!0}),"none")},this.closeStatusViewer=e=>{e?this.end():this.pop("none")}}componentDidMount(){this.push((0,d.jsx)(l.default,{onOpenStatus:this._openStatusViewer,closeStatusViewer:this.closeStatusViewer,sessionId:this.sessionId}),"status-v3-modal"),this.props.listeners.add(r.Cmd,"close_status_viewer",(()=>{this.closeStatusViewer(!0)}))}componentWillUnmount(){this.props.onFlowEnd()}}var c=(0,i.ListenerHOC)(u);t.default=c},86245:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const[t,n]=(0,i.useFlow)(null==e.stickerPackId?f.StickerStore:f.StickerPackDetails),[a,h]=(0,o.useState)(null),[p,m]=(0,o.useState)(null),g=(0,o.useRef)(0),v=e=>{g.current=e},x=e=>{h(e),n.push(f.StickerPackDetails)},_=(e,t)=>{m(e),t&&h(t),n.push(f.StickerDetails)},C=()=>{n.pop()},y=()=>{n.pop(),p&&r.Cmd.once("ui_idle",(()=>{e.onSticker(p,l.default.STICKER_SEND_ORIGIN_TYPE.STICKER_STORE)}))};if(null==n.step)return null;let b=null;switch(n.step){case f.StickerStore:b=(0,c.jsx)(u.default,{onStickerPackDetails:x,onClose:()=>n.pop(),onScrollOffsetChange:v,scrollOffset:g.current});break;case f.StickerPackDetails:b=null==e.stickerPackId?null!=a?(0,c.jsx)(d.default,{stickerPack:a,onStickerClick:_,onStickerEnter:_,onBack:C}):null:(0,c.jsx)(d.default,{stickerPackId:e.stickerPackId,onStickerClick:_,onStickerEnter:_,onClose:()=>n.end(!0)});break;case f.StickerDetails:b=null!=p&&null!=a?(0,c.jsx)(s.default,{sticker:p,stickerPack:a,onSend:y,onBack:()=>n.pop()}):null}return(0,c.jsx)(t,{flow:n,children:b})};var r=n(81572),o=n(67294),i=n(59083),l=a(n(11339)),s=a(n(39822)),d=a(n(41966)),u=a(n(37968)),c=n(85893);const f=n(76672).Mirrored(["StickerStore","StickerPackDetails","StickerDetails"])},55098:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;const n=(0,a.useRef)(null);(0,r.useListener)(t,"mousedown",(()=>{n.current=performance.now()})),(0,r.useListener)(t,"mouseup",(()=>{n.current=null}));const o=(0,a.useCallback)((()=>{const t=n.current;return null!=t&&performance.now()-t>=e}),[e]);return o};var a=n(67294),r=n(87550)},1770:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,a.useRef)(null),n=(0,a.useRef)(!1);return(0,a.useEffect)((()=>{if(null==e)return;function a(e){const n=t.current;return!!n&&(e instanceof Node&&!n.contains(e))}function r(e){if(e.isPrimary){const t=a(e.target);n.current=t}}function o(e){"touch"!==e.pointerType&&"pen"!==e.pointerType||(n.current=!1)}function i(t){const r=a(t.target);n.current&&r&&t.isPrimary&&e(t),n.current=!1}function l(t){a(t.target)&&e(t)}const s="PointerEvent"in window;return s?(document.addEventListener("pointerdown",r),document.addEventListener("pointermove",o),document.addEventListener("pointerup",i)):document.addEventListener("click",l),()=>{s?(document.removeEventListener("pointerdown",r),document.removeEventListener("pointermove",o),document.removeEventListener("pointerup",i)):document.removeEventListener("click",l)}}),[e]),t};var a=n(67294)},22246:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useSendIq=function(e,t){const[n,o]=(0,a.useState)(!1);return[n,()=>(o(!0),(0,r.sendIq)(e,t).finally((()=>o(!1))))]};var a=n(67294),r=n(24747)},92557:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.MerchantDetailsFormFlowLoadable=void 0;var r=a(n(48926)),o=a(n(68356)),i=a(n(16866)),l=a(n(15334)),s=n(85893);const d=(0,l.default)((0,r.default)((function*(){return(yield Promise.all([n.e(8295),n.e(1702),n.e(9488),n.e(2790),n.e(275)]).then(n.bind(n,11753))).default})),"MerchantDetailsFormFlow"),u=(0,o.default)({loader:d,loading:e=>(0,s.jsx)(i.default,{error:Boolean(e.error)})});t.MerchantDetailsFormFlowLoadable=u},85905:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ExpiredLocationDrawer",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"LiveLocationDrawer",{enumerable:!0,get:function(){return r.default}});var r=a(n(11399)),o=a(n(74717))},72443:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(85582),o=n(67294),i=a(n(9996)),l=n(33262),s=n(99282),d=n(90669),u=n(85893);function c(e,t){let{layer:n,outlineLayer:a,dimension:c,removeBackground:f,scale:h,visible:p}=e;const m=(0,o.useRef)(),g=(0,o.useRef)();if((0,o.useImperativeHandle)(t,(()=>({toCanvas(){var e;const t=null===(e=g.current)||void 0===e?void 0:e.getBoundingRect(),n=m.current;if(!t||!n||t.size.isEmpty())return;const{x:a,y:o,width:i,height:l}=t;var s;null===(s=g.current)||void 0===s||s.show();const u=n.toCanvas({x:a,y:o,width:i,height:l,pixelRatio:1/h});var c;null===(c=g.current)||void 0===c||c.hide();const f=Math.max(u.width,u.height),p=Math.max(Math.ceil(d.STICKER_BORDER_WIDTH*(f/d.STICKER_DIMENSION)),2),v=(0,r.addBorder)(u,p);return(0,r.trim)(v)}}))),!n||!a)return null;const v=n.frame.getCenter();return(0,u.jsxs)(s.Group,{ref:m,visible:p,children:[(0,u.jsx)(s.Group,{x:v.x,y:v.y,offsetX:n.width/2,offsetY:n.height/2,width:n.width,height:n.height,rotation:n.rotation,scaleX:n.scale,scaleY:n.scale,children:(0,u.jsx)(i.default,{layer:n})}),(0,u.jsx)(l.Outline,{ref:g,layer:a,dimension:c})]})}var f=(0,o.forwardRef)(c);t.default=f},39239:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasContext=void 0;const a={transforming:!1,dragging:!1,editing:!1},r=(0,n(67294).createContext)(a);t.CanvasContext=r},89797:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasLayer=function(e){let{layer:t,scale:n,editing:a,selected:_,editable:C,hidden:y,textBackgroundShadow:b,dimension:j,selectedGroupRef:S,transformerRef:E,stageWidth:k,stageHeight:w,onSelect:T,onDoubleClick:M,onDragStart:P,onDragEnd:I,onDragMove:O,onTransformStart:L,onTransformEnd:A}=e;const[D,R]=(0,r.useState)(!1),N=(0,r.useContext)(o.CanvasContext);let B,F,U,G;C&&_&&!a&&(F=(0,v.jsx)(p.default,{layer:t}),G=(0,v.jsx)(h.Transformer,{ref:E,anchorStroke:"blue",anchorFill:"white",anchorSize:8,anchorCornerRadius:4,borderEnabled:!1,centeredScaling:!0,enabledAnchors:["bottom-right"],resizeEnabled:!0,rotateAnchorOffset:12,rotateEnabled:!0,rotationSnaps:x,ignoreStroke:!0,rotationSnapTolerance:10,boundBoxFunc:(e,a)=>{const r=a.width/n,o=a.height/n;return t instanceof g.TextLayer&&(r<=18||o<=18)||r<=36||o<=36?e:a}},"transformer"));C&&D&&!_&&(U=(0,v.jsx)(l.default,{layer:t}));t instanceof d.ImageLayer?B=(0,v.jsx)(s.default,{layer:t}):t instanceof i.DrawLayer?t.type===i.DrawLayerType.Paint?B=(0,v.jsx)(f.default,{layer:t}):t.type===i.DrawLayerType.Outline&&(B=(0,v.jsx)(c.Outline,{layer:t,dimension:j})):t instanceof g.TextLayer&&!a&&(B=(0,v.jsx)(m.default,{layer:t,shadow:b}));y&&(B=(0,v.jsx)(h.Rect,{width:t.width,height:t.height}));(0,r.useEffect)((()=>{a&&R(!1)}),[a,R]);const H=t.frame.getCenter();return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(h.Group,{ref:_?S:null,x:H.x,y:H.y,offsetX:t.width/2,offsetY:t.height/2,width:t.width,height:t.height,rotation:t.rotation,scaleX:t.scale,scaleY:t.scale,draggable:C,dragBoundFunc:e=>{let{x:t,y:n}=e;return t<0?t=0:t>k&&(t=k),n<0?n=0:n>w&&(n=w),{x:t,y:n}},onMouseEnter:e=>{!t.editable||N.dragging||N.transforming||(e.cancelBubble=!0,R(!0))},onMouseLeave:e=>{t.editable&&(e.cancelBubble=!0,R(!1))},onMouseDown:e=>{t.editable&&(e.cancelBubble=!0,T(t))},onDblClick:()=>M(t),onDragStart:()=>P(t),onDragEnd:e=>{const n=(0,u.getPointFromGroup)(e);I(t,n)},onDragMove:e=>O(t,e),onTransformStart:()=>L(t),onTransformEnd:e=>{if(!_)return;const n=(0,u.getRotationFromGroup)(e),a=(0,u.getScaleFromGroup)(e);A(t,n,a)},children:[B,F,U]}),G]})};var r=n(67294),o=n(39239),i=n(50833),l=a(n(67101)),s=a(n(9996)),d=n(39989),u=n(91788),c=n(33262),f=a(n(9226)),h=n(99282),p=a(n(74554)),m=a(n(63933)),g=n(81829),v=n(85893);const x=[0,45,90,135,180,225,270,315]},6067:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.EditableText=void 0;var r=a(n(81109)),o=a(n(18446)),i=n(48360),l=n(67294),s=a(n(1770)),d=a(n(37453)),u=a(n(34470)),c=n(60811),f=a(n(52144)),h=a(n(18888)),p=n(30424),m=n(39581),g=a(n(23217)),v=n(51234),x=n(18644),_=a(n(24717)),C=n(85893);const y=(0,h.default)(),b=(0,l.forwardRef)(((e,t)=>{let{text:n,layer:a,layerCenter:h,scale:v,onSave:b,onUnselect:E,onOutsideClick:k}=e;const[w,T]=(0,l.useState)(n),[M,P]=(0,l.useState)(),I=(0,l.useRef)(),O=(0,l.useCallback)((()=>{b(w.replace(/^\n+/,"").replace(/\n+$/,""))}),[b,w]);(0,l.useImperativeHandle)(t,(()=>({save:()=>{O(),E()}})),[O,E]);const L=(0,s.default)((e=>{M||!1===(null==k?void 0:k(e))||(O(),E())})),A=e=>{const t=I.current;t&&t.replaceSelection(e)},D=()=>{P(null)},[R,N]=(0,u.default)((e=>{P({menu:(0,C.jsx)(p.EmojiPanel,{onEmoji:A,onFocusNext:D,onFocusPrev:D}),anchor:e.target})}));(0,l.useEffect)((()=>{var e,t;null===(e=I.current)||void 0===e||null===(t=e.refInput)||void 0===t||t.focus()}),[]);const B=Math.max(a.scale*v,1.2),F={borderWidth:2/B,padding:a.styles.layerPadding-2,transform:`scale(${B})`},U={left:h.x*v,top:h.y*v},G={color:a.textColor.toHex(),fontFamily:(0,m.getFontStyle)(a.font).fontFamily,fontSize:a.fontSize,lineHeight:`${a.lineHeight+2*a.styles.lineVerticalPadding}px`,textAlign:j(a.alignment),paddingLeft:a.styles.lineHorizontalPadding+1,paddingRight:a.styles.lineHorizontalPadding+1,paddingTop:1,paddingBottom:1,borderWidth:0,borderRadius:6,margin:0,boxSizing:"border-box",backgroundColor:a.textBackground?a.textBackgroundColor.toHex():void 0},H=a.styles.backgroundShadow,z={boxShadow:a.textBackground?`${H.offsetX}px ${H.offsetY}px ${H.radius}px ${H.spread}px ${H.color.toRgbaString()}`:void 0},W=function(e){const t=(0,d.default)(e),n=(0,l.useRef)(0);t&&!(0,o.default)(t,e)&&(n.current+=1);return n.current}(G),q=(0,r.default)((0,r.default)({},G),{},{fontSize:15,paddingRight:8,fontFamily:void 0}),V=20-a.fontSize,Y=a.styles.lineVerticalPadding-V,K=`\n    .${f.default.inputContainer} .emoji.emoji.emoji {\n      margin: ${Y}px ${-V/2}px 0 ${-V/2}px;\n      transform: scale(${a.fontSize/20});\n    }\n  `;return(0,C.jsxs)("div",{className:f.default.positioner,style:U,children:[(0,C.jsxs)("div",{className:f.default.container,style:F,children:[(0,C.jsx)("style",{children:K}),(0,C.jsxs)("div",{className:f.default.resizableInput,ref:L,children:[(0,C.jsx)("div",(0,r.default)((0,r.default)({className:f.default.emojiButton},N),{},{ref:R,style:{transform:`scale(${1/B}) translateX(-${50*B}%)`,top:28*(1-1/B)/2-40},children:(0,C.jsx)("div",{className:f.default.buttonIconWrapper,children:(0,C.jsx)(g.default,{name:"smiley"})})})),(0,C.jsx)("div",{className:f.default.inputContainer,style:z,children:(0,C.jsx)(y,{style:G,ref:I,initialValue:w,onChange:e=>{let t=e;t=e.match(/\n\n$/)?t.replace(/\n\n$/,"\n"):t.replace(/\n$/,""),T(t)},onEnter:O,multiline:!0,theme:"media-editor-text-input",placeholder:i.fbt._("Type something",null,{hk:"15NglL"})},W)}),(0,C.jsx)(S,{layer:a,text:w||i.fbt._("Type something",null,{hk:"15NglL"}).toString(),style:w?G:q})]})]}),M&&(0,C.jsx)(x.UIE,{displayName:"EmojiPicker",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:D,children:(0,C.jsx)(_.default,{contextMenu:(0,r.default)({dirY:c.DirY.TOP,type:c.MenuType.EmojiPicker},M)})})]})}));function j(e){switch(e){case m.TextAlignment.LEFT:return"left";case m.TextAlignment.CENTER:return"center";case m.TextAlignment.RIGHT:return"right"}}function S(e){let{text:t,style:n,layer:a}=e;return(0,C.jsx)("div",{className:f.default.hiddenText,style:n,children:(0,v.getLines)(t,a.font,a.fontSize,0).map(((e,t)=>(0,C.jsx)("div",{className:f.default.hiddenTextLine,children:0===e.words.length?" ":e.words.map(((e,t)=>e.emojiPath?(0,C.jsx)("span",{className:f.default.emojiPlaceholder},t):e.text))},t)))})}t.EditableText=b},67101:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{layer:t}=e;const n=t instanceof r.ImageLayer&&(t.isSticker()||t.isBackground());return(0,i.jsx)(o.Rect,{width:t.width,height:t.height,stroke:l.toRgbaString(),strokeWidth:2,cornerRadius:n?40:5,strokeScaleEnabled:!1})};var a=n(16241),r=n(39989),o=n(99282),i=n(85893);const l=new a.Color(82,248,24,1)},9996:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{layer:t}=e;return(0,r.jsx)(a.Image,{width:t.width,height:t.height,image:t.image})};var a=n(99282),r=n(85893)},35344:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(81109)),o=a(n(18446)),i=n(67294),l=a(n(72443)),s=n(39239),d=n(89797),u=n(16241),c=n(6067),f=n(91788),h=a(n(88564)),p=a(n(60541)),m=n(99282),g=n(81829),v=n(54274),x=a(n(71328)),_=n(85893);const C="#52F818";function y(e){let{canEditBackground:t,data:n,scale:a,canvasContextRef:r,isEditingBackground:o,canEditLayer:i,dragging:l,inPaintMode:s,inOutlineMode:d,currentlyEditingTextLayer:u,selectedGroupRef:c,transformerRef:f,onSelect:h,onDoubleClick:p,onDragMove:m,onDragStart:g,onDragEnd:v,onTransformStart:x,onTransformEnd:C}=e;const y=!1;return(0,_.jsxs)(_.Fragment,{children:[n.paintLayer&&!r.current.dragging&&(0,_.jsx)(j,{layer:n.paintLayer,hidden:y,data:n,scale:a,dragging:l,canEditLayer:i,inPaintMode:s,inOutlineMode:d,currentlyEditingTextLayer:u,selectedGroupRef:c,transformerRef:f,onSelect:h,onDoubleClick:p,onDragMove:m,onDragStart:g,onDragEnd:v,onTransformStart:x,onTransformEnd:C}),t&&n.background&&(0,_.jsx)(j,{layer:n.background,hidden:!o(),data:n,scale:a,dragging:l,canEditLayer:i,inPaintMode:s,inOutlineMode:d,currentlyEditingTextLayer:u,selectedGroupRef:c,transformerRef:f,onSelect:h,onDoubleClick:p,onDragMove:m,onDragStart:g,onDragEnd:v,onTransformStart:x,onTransformEnd:C}),n.paintLayer&&r.current.dragging&&(0,_.jsx)(j,{layer:n.paintLayer,hidden:y,data:n,scale:a,dragging:l,canEditLayer:i,inPaintMode:s,inOutlineMode:d,currentlyEditingTextLayer:u,selectedGroupRef:c,transformerRef:f,onSelect:h,onDoubleClick:p,onDragMove:m,onDragStart:g,onDragEnd:v,onTransformStart:x,onTransformEnd:C}),n.layers.map((e=>(0,_.jsx)(j,{layer:e,hidden:y,data:n,scale:a,dragging:l,canEditLayer:i,inPaintMode:s,inOutlineMode:d,currentlyEditingTextLayer:u,selectedGroupRef:c,transformerRef:f,onSelect:h,onDoubleClick:p,onDragMove:m,onDragStart:g,onDragEnd:v,onTransformStart:x,onTransformEnd:C},String(e.id))))]})}function b(e){let{guides:t,scale:n,guidesLayerRef:a,getStage:r}=e;const{vertical:o,horizontal:i}=t;if(!o&&!i)return null;const l=r();return(0,_.jsxs)(m.Layer,{ref:a,children:[o&&(0,_.jsx)(m.Line,{x:o.position/n,y:0,points:[0,0,0,l.height()/n],stroke:C,strokeWidth:1,strokeScaleEnabled:!1},"vertical"),i&&(0,_.jsx)(m.Line,{x:0,y:i.position/n,points:[0,0,l.width()/n,0],stroke:C,strokeWidth:1,strokeScaleEnabled:!1},"horizontal")]},"guides")}function j(e){let{layer:t,hidden:n,data:a,scale:r,dragging:o,canEditLayer:i,inPaintMode:l,inOutlineMode:s,currentlyEditingTextLayer:u,selectedGroupRef:c,transformerRef:f,onSelect:h,onDoubleClick:p,onDragMove:m,onDragStart:g,onDragEnd:v,onTransformStart:x,onTransformEnd:C}=e;const y=a.selectedLayer===t&&u!==t,b=a.screenWidth*r,j=a.screenHeight*r,S=a.cropSize.dimension,E=t.editable&&i&&!l&&!s&&!u;return(0,_.jsx)(d.CanvasLayer,{layer:t,scale:r,textBackgroundShadow:!o,dimension:S,editing:u===t,selected:y,editable:E,stageHeight:j,stageWidth:b,selectedGroupRef:e=>{c.current=e},transformerRef:e=>{f.current=e},onSelect:h,onDoubleClick:p,onDragMove:m,onDragStart:g,onDragEnd:v,onTransformStart:x,onTransformEnd:C,hidden:n},String(t.id))}function S(e){let{draftTextLayer:t,data:n,editableTextRef:a,scale:r,onTextSave:o,onLayerUnselect:i,onTextInputOutsideClick:l}=e;if(!t)return null;const s=n.toScreenPoint(t.frame.getCenter());return(0,_.jsx)(c.EditableText,{ref:a,layer:t,layerCenter:s,text:t.text,scale:r,onSave:o,onUnselect:i,onOutsideClick:l})}function E(e,t){var n;const{inPaintMode:a=!1,inOutlineMode:d=!1,paintColor:c=u.Color.White,paintThickness:C=v.THICKNESS.MEDIUM,outlineSmoothing:j=!0,canEditLayer:E=!0,canEditBackground:k=!1,outlineEnabled:w=!1,currentlyEditingTextLayer:T=null,draftTextLayer:M=null,onLayerSelect:P=(()=>{}),onLayerUnselect:I=(()=>{}),onLayerTranslate:O=(()=>{}),onLayerTransform:L=(()=>{}),onTextEditingStart:A=(()=>{}),onTextEditingEnd:D=(()=>{}),onTextInputOutsideClick:R=(()=>!0),onPaintDrawEnd:N=(()=>{}),onOutlineDrawEnd:B=(()=>{}),onOutlineDone:F=(()=>{}),scale:U,data:G}=e,H=(0,i.useRef)(null),z=(0,i.useRef)(null),W=(0,i.useRef)(null),q=(0,i.useRef)(null),V=(0,i.useRef)(null),Y=(0,i.useRef)(null),K=(0,i.useRef)(null),Q=(0,i.useRef)(null),X=(0,i.useRef)(null),Z=(0,i.useRef)({dragging:!1,transforming:!1,editing:!1}),[J,$]=(0,i.useState)({horizontal:null,vertical:null}),[ee,te]=(0,i.useState)(!1),[ne,ae]=(0,i.useState)(!1),[re,oe]=(0,i.useState)("crosshair"),ie=()=>{if(!H.current)throw new Error("MediaEditorCanvas:stage is not initialized");return H.current.getStage()};(0,i.useEffect)((()=>{var e,t,n;z.current&&(null===(e=W.current)||void 0===e||e.nodes([z.current]),null===(t=W.current)||void 0===t||null===(n=t.getLayer())||void 0===n||n.batchDraw())}));const le=()=>{var e,t,n,a,r,o,i,l,s,d,u;null===(e=W.current)||void 0===e||e.hide(),null===(t=z.current)||void 0===t||null===(n=t.getChildren()[1])||void 0===n||n.hide(),null===(a=z.current)||void 0===a||null===(r=a.getChildren()[2])||void 0===r||r.hide(),null===(o=q.current)||void 0===o||o.hide(),null===(i=Y.current)||void 0===i||i.toggleCursor(!1),null===(l=K.current)||void 0===l||l.hide(),null===(s=W.current)||void 0===s||null===(d=s.getLayer())||void 0===d||d.batchDraw(),null===(u=V.current)||void 0===u||u.hide();const c=ie().toDataURL({mimetype:"image/png",quality:1,pixelRatio:1/U});var f,h,p,m,g,v,x,_,C,y,b;return null===(f=W.current)||void 0===f||f.show(),null===(h=z.current)||void 0===h||null===(p=h.getChildren()[1])||void 0===p||p.show(),null===(m=z.current)||void 0===m||null===(g=m.getChildren()[2])||void 0===g||g.show(),null===(v=q.current)||void 0===v||v.show(),null===(x=Y.current)||void 0===x||x.toggleCursor(!0),null===(_=K.current)||void 0===_||_.show(),null===(C=W.current)||void 0===C||null===(y=C.getLayer())||void 0===y||y.batchDraw(),null===(b=V.current)||void 0===b||b.show(),c},se=()=>{var e;return null===(e=X.current)||void 0===e?void 0:e.toCanvas()},de=()=>{var e;null===(e=Q.current)||void 0===e||e.save()},ue=()=>(ee||ne)&&G.selectedLayer===G.background;(0,i.useImperativeHandle)(t,(()=>({getStage:ie,getDataUrl:le,endTextEditing:de,getBackground:se})));const ce=G.screenWidth/2,fe=G.screenHeight/2,he=G.toScreenPoint(G.cropCenter),pe=G.toScreenPoint(G.canvasCenter),me=ce-(he.x-pe.x),ge=fe-(he.y-pe.y),ve=G.cropSize.dimension;return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(m.Stage,{ref:H,width:G.screenWidth*U,height:G.screenHeight*U,onMouseDown:e=>{T||(0,f.isEventOnAnchor)(e)||I()},scaleX:U,scaleY:U,style:(0,r.default)({cursor:a?"none":d?re:"default"},null!==(n=e.style)&&void 0!==n?n:{}),children:(0,_.jsxs)(s.CanvasContext.Provider,{value:Z.current,children:[w&&(0,_.jsx)(m.Layer,{x:me,y:ge,offsetX:G.width/2,offsetY:G.height/2,rotation:G.rotation,children:(0,_.jsx)(x.default,{ref:V,width:G.width,height:G.height})},"transparent"),(0,_.jsx)(m.Layer,{x:me,y:ge,offsetX:G.width/2,offsetY:G.height/2,rotation:G.rotation,children:(0,_.jsx)(l.default,{ref:X,layer:G.background,outlineLayer:G.outlineLayer,dimension:ve,removeBackground:w&&!d,scale:U,visible:!ue()})},"background"),(0,_.jsx)(m.Layer,{x:me,y:ge,offsetX:G.width/2,offsetY:G.height/2,rotation:G.rotation,children:(0,_.jsx)(y,{canEditBackground:k,data:G,scale:U,canvasContextRef:Z,isEditingBackground:ue,canEditLayer:E,dragging:ee,inPaintMode:a,inOutlineMode:d,currentlyEditingTextLayer:T,selectedGroupRef:z,transformerRef:W,onSelect:e=>{P(e)},onDoubleClick:e=>{e instanceof g.TextLayer&&A(e)},onDragMove:(e,t)=>{var n,a,r,i;const l=[{position:ie().width()/2,orientation:"v"},{position:ie().height()/2,orientation:"h"}],s=t.target,d=s.absolutePosition(),u=[{position:d.y,orientation:"h"},{position:d.x,orientation:"v"}],c=[];for(const e of u)for(const t of l){if(e.orientation!==t.orientation)continue;const n=Math.abs(t.position-e.position);n<=15&&c.push({guide:t,distance:n})}c.sort(((e,t)=>e.distance-t.distance));let f=null,h=null;for(const{guide:e}of c)"v"!==e.orientation||f?"h"!==e.orientation||h||(h=e):f=e;s.absolutePosition({x:null!==(n=null===(a=f)||void 0===a?void 0:a.position)&&void 0!==n?n:d.x,y:null!==(r=null===(i=h)||void 0===i?void 0:i.position)&&void 0!==r?r:d.y});const p={horizontal:h,vertical:f};(0,o.default)(J,p)||$(p)},onDragStart:()=>{Z.current.dragging=!0,te(!0)},onDragEnd:(e,t)=>{Z.current.dragging=!1,O(e,t),$({vertical:null,horizontal:null}),te(!1)},onTransformStart:()=>{Z.current.transforming=!0,ae(!0)},onTransformEnd:(e,t,n)=>{Z.current.transforming=!1,L(e,t,n),ae(!1)}})},"edits"),(0,_.jsx)(b,{guides:J,scale:U,guidesLayerRef:q,getStage:ie}),a&&(0,_.jsx)(p.default,{ref:Y,width:G.screenWidth,height:G.screenHeight,scale:U,pathStyle:{color:c,thickness:(0,v.getThicknessValue)(C),smoothing:!1},data:G,onDrawEnd:N}),d&&(0,_.jsx)(h.default,{ref:K,width:G.screenWidth,height:G.screenHeight,scale:U,data:G,smoothing:j,onDrawEnd:B,onDone:F,onCursorChange:e=>{oe(e)}})]})}),(0,_.jsx)(S,{draftTextLayer:M,data:G,editableTextRef:Q,scale:U,onTextSave:e=>{M&&D(M,e)},onLayerUnselect:I,onTextInputOutsideClick:R})]})}var k=(0,i.forwardRef)(E);t.default=k},33262:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.Outline=void 0;var r=a(n(94654)),o=a(n(64369)),i=n(67294),l=n(99282),s=a(n(24055)),d=n(85893);function u(e,t){let{layer:n,dimension:a}=e;const u=(0,i.useRef)(),c=(0,i.useRef)();(0,i.useImperativeHandle)(t,(()=>({show(){var e;null===(e=u.current)||void 0===e||e.show()},hide(){var e;null===(e=u.current)||void 0===e||e.hide()},getBoundingRect(){const e=c.current;if(!e)return;const{x:t,y:a,width:r,height:o}=e.getClientRect();return s.default.create({x:t,y:a,width:r,height:o,rotation:n.rotation,scale:n.scale})}})));const f=(0,r.default)(n.getAllPoints(),(e=>[e.x,e.y]));return(0,d.jsx)(l.Group,{ref:u,width:n.width,height:n.height,visible:!1,children:(0,d.jsx)(l.Line,{ref:c,points:f,closed:!0,fill:"white",lineCap:"round",lineJoin:"round",tension:o.default.MEDIA_EDITOR_OUTLINE_TENSION,globalCompositeOperation:"destination-in"})})}const c=(0,i.forwardRef)(u);t.Outline=c},88564:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(81109)),o=a(n(94654)),i=a(n(64369)),l=n(67294),s=n(16241),d=n(99282),u=a(n(85313)),c=n(85893);const f="dot-first",h="dot-last";function p(e,t){var n;let{width:a,height:p,scale:m,data:v,smoothing:x,onDrawEnd:_,onDone:C,onCursorChange:y}=e;const b=(0,l.useRef)(),j=(0,l.useRef)(!1),S=(0,l.useRef)("crosshair");(0,l.useEffect)((()=>{y("crosshair")}),[]),(0,l.useImperativeHandle)(t,(()=>({show(){var e;null===(e=b.current)||void 0===e||e.show()},hide(){var e;null===(e=b.current)||void 0===e||e.hide()}})));const{cursorPosition:E,points:k,handlers:w}=(0,u.default)({onDrawStart:()=>{j.current=!0},onDrawEnd:e=>{j.current=!1,_(e)},onDone:C,onMouseMove:e=>{const t=e.target.name()===f,n=j.current,a=t&&!n?"pointer":"crosshair";a!==S.current&&(S.current=a,y(a))},data:v,stage:null===(n=b.current)||void 0===n?void 0:n.getStage(),minPointDistance:12/m,clickThreshold:200,boundToStage:!0,doneTargets:{mousedown:[f,h],mouseup:[f]},pathStyle:{color:s.Color.White,thickness:0,smoothing:x}}),T=v.outlineLayer.getAllPoints().map((e=>v.toScreenPoint(e)));!x&&T.length&&T.push(T[T.length-1]);Boolean(k.length)&&T.push(k[0]),T.push(...k);const M=[...T];!x&&M.length&&M.push(M[M.length-1]),E&&M.push(E);const P=(0,o.default)(M,(e=>[e.x,e.y]));return(0,c.jsxs)(d.Layer,(0,r.default)((0,r.default)({ref:b},w),{},{width:a,height:p,children:[(0,c.jsx)(d.Rect,{x:0,y:0,width:a,height:p,fill:"rgba(0,0,0,0)"}),(0,c.jsx)(d.Line,{points:P,lineCap:"round",lineJoin:"round",stroke:"#FA6533",strokeWidth:3/m,dash:[12/m,6/m],tension:i.default.MEDIA_EDITOR_OUTLINE_TENSION}),(0,c.jsx)(g,{points:T,scale:m})]}),"paintCursor")}var m=(0,l.forwardRef)(p);function g(e){let{points:t,scale:n}=e;if(!t.length)return null;const a=t[0],r=t[t.length-1],o=3/n;return(0,c.jsxs)(c.Fragment,{children:[undefined,(0,c.jsx)(d.Circle,{name:h,x:r.x,y:r.y,radius:o}),(0,c.jsx)(d.Circle,{x:a.x,y:a.y,radius:o,stroke:"white"}),(0,c.jsx)(d.Circle,{name:f,x:a.x,y:a.y,radius:4*o})]})}t.default=m},9226:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{layer:t}=e;const n=(0,a.useMemo)((()=>{const e=document.createElement("canvas");return e.width=Math.max(t.width,1),e.height=Math.max(t.height,1),e}),[t.width,t.height]),i=(0,a.useRef)();return(0,a.useEffect)((()=>{var e,a;n.getContext("2d").clearRect(0,0,n.width,n.height),t.paths.forEach((e=>function(e,t){const{points:n}=t;if(!n.length)return;const a=e.getContext("2d"),r={color:t.color,thickness:t.thickness,smoothing:!1};(function(e,t){e.lineCap="round",e.lineJoin="round",e.lineWidth=t.thickness,e.strokeStyle=t.color.toHex()})(a,r),a.beginPath(),a.moveTo(n[0].x,n[0].y),n.forEach((e=>a.lineTo(e.x,e.y))),a.stroke()}(n,e))),null===(e=i.current)||void 0===e||null===(a=e.getLayer())||void 0===a||a.batchDraw()}),[t.paths,n]),(0,o.jsx)(r.Image,{ref:i,width:t.width,height:t.height,image:n})};var a=n(67294),r=n(99282),o=n(85893)},60541:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(81109)),o=a(n(94654)),i=n(67294),l=n(99282),s=a(n(85313)),d=n(85893);const u=(e,t)=>{var n;let{width:a,height:u,scale:c,pathStyle:f,data:h,onDrawEnd:p}=e;const m=(0,i.useRef)(),g=(0,i.useRef)();(0,i.useImperativeHandle)(t,(()=>({toggleCursor(e){const t=g.current;t&&(e?t.show():t.hide())}})));const{cursorPosition:v,points:x,handlers:_}=(0,s.default)({onDrawEnd:p,data:h,pathStyle:f,stage:null===(n=m.current)||void 0===n?void 0:n.getStage()}),C=(0,o.default)(x,(e=>[e.x,e.y]));return(0,d.jsxs)(l.Layer,(0,r.default)((0,r.default)({ref:m},_),{},{width:a,height:u,children:[(0,d.jsx)(l.Rect,{width:a,height:u,fill:"rgba(0, 0, 0, 0)"}),v&&(0,d.jsx)(l.Circle,{ref:g,x:v.x,y:v.y,radius:f.thickness/2,fill:f.color.toRgbaString()}),(0,d.jsx)(l.Line,{points:C,lineCap:"round",lineJoin:"round",stroke:f.color.toRgbaString(),strokeWidth:f.thickness})]}),"paintCursor")};var c=(0,i.forwardRef)(u);t.default=c},74554:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{layer:t}=e;const n=t instanceof r.ImageLayer&&(t.isSticker()||t.isBackground());return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(o.Rect,{width:t.width,height:t.height,fill:s.toRgbaString(),stroke:l.toRgbaString(),strokeWidth:2,cornerRadius:n?40:5,strokeScaleEnabled:!1})})};var a=n(16241),r=n(39989),o=n(99282),i=n(85893);const l=new a.Color(82,248,24,1),s=new a.Color(82,248,24,.1)},63933:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{layer:t,shadow:n}=e;const r=function(e){const t=[];for(const n of e)for(const{emojiPath:e}of n.words)e&&t.push(e);return function(e){const t=Array.from(new Set(e)),n=t.join(""),r=(0,a.useRef)({}),[,o]=(0,a.useState)(0);return(0,a.useEffect)((()=>{r.current={},o(0),t.forEach((e=>{const t=new Image;t.onload=()=>{r.current[e]=t,o(Object.keys(r.current).length)},t.src=e}))}),[o,n]),r.current}(t)}(t.lines),i=t.lines.map(((e,n)=>{const a=e.width+2*t.styles.lineHorizontalPadding,i=t.lineHeight+2*t.styles.lineVerticalPadding;return(0,l.jsx)(o.Group,{width:a,height:i,y:n*i,children:(0,l.jsx)(s,{line:e,layer:t,emojiImages:r})},n)})),{backgroundShadow:d}=t.styles;return(0,l.jsx)(o.Group,{visible:0!==t.width,width:t.width,height:t.height,children:(0,l.jsxs)(o.Group,{x:t.styles.layerPadding,y:t.styles.layerPadding,children:[t.textBackground&&(n?(0,l.jsx)(o.Path,{data:t.backgroundPath,stroke:t.textBackgroundColor.toHex(),fill:t.textBackgroundColor.toHex(),shadowColor:d.color.toHex(),shadowBlur:d.radius,shadowOffset:{x:d.offsetX,y:d.offsetY},shadowOpacity:d.color.alpha},"1"):(0,l.jsx)(o.Path,{data:t.backgroundPath,stroke:t.textBackgroundColor.toHex(),fill:t.textBackgroundColor.toHex()},"2")),i]})})};var a=n(67294),r=n(39581),o=n(99282),i=n(51234),l=n(85893);function s(e){let{line:t,layer:n,emojiImages:a}=e;const s=Math.max(...n.lineWidths);let d=0;switch(n.alignment){case r.TextAlignment.LEFT:d=0;break;case r.TextAlignment.CENTER:d=(s-t.width)/2;break;case r.TextAlignment.RIGHT:d=s-t.width}let u=0;return t.words.map(((e,t)=>{let{text:s,emojiPath:c,width:f}=e;const h=d+n.styles.lineHorizontalPadding+u,p=n.styles.lineVerticalPadding;let m;if(c){const e=a[c];m=e?(0,l.jsx)(o.Image,{x:h,y:p,width:n.lineHeight,height:n.lineHeight,image:e},t):(0,l.jsx)(o.Rect,{x:h,y:p,width:n.lineHeight,height:n.lineHeight,fill:"rgba(0,0,0,0)"},t)}else{const e=(0,i.getTextBounds)(n.font,n.fontSize);m=(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(o.Text,{x:h,y:p-e.top+(e.top+e.bottom)/2,width:f,height:n.lineHeight,text:s,fill:n.textColor.toHex(),fontFamily:(0,r.getFontStyle)(n.font).fontFamily,fontSize:n.fontSize},t)})}return u+=f,m}))}},71328:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(67294),r=n(16241),o=n(99282),i=n(85893);const l=new r.Color(230,230,230).toRgbString(),s=new r.Color(255,255,255).toRgbString();function d(e,t){let{width:n,height:r}=e;const d=(0,a.useRef)();(0,a.useImperativeHandle)(t,(()=>({hide(){var e;null===(e=d.current)||void 0===e||e.hide()},show(){var e;null===(e=d.current)||void 0===e||e.show()}})));const u=(0,a.useMemo)((()=>{const e=document.createElement("canvas");return e.width=Math.max(n,1),e.height=Math.max(r,1),e}),[n,r]);return(0,a.useEffect)((()=>{var e,t;const a=u.getContext("2d");a.clearRect(0,0,u.width,u.height);const o=20,i=Math.ceil(n/o),c=Math.ceil(r/o);for(let e=0;e<c;e++)for(let t=0;t<i;t++){const n=(e+t)%2==0?s:l;a.beginPath(),a.rect(t*o,e*o,o,o),a.fillStyle=n,a.fill()}null===(e=d.current)||void 0===e||null===(t=e.getLayer())||void 0===t||t.batchDraw()}),[u,n,r]),(0,i.jsx)(o.Image,{ref:d,width:n,height:r,image:u})}var u=(0,a.forwardRef)(d);t.default=u},85313:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{onDrawStart:t,onDrawEnd:n,onDone:a,onMouseMove:u,data:c,endOnMouseLeave:f=!0,minPointDistance:h=0,clickThreshold:p=0,boundToStage:m=!1,pathStyle:g={},stage:v,doneTargets:x={}}=e;const[_,C]=(0,o.useState)(),y=(0,o.useRef)([]),b=(0,o.useRef)(!1),j=(0,i.default)(),S=(0,l.default)(p),E=(0,o.useRef)(!1);return(0,s.useListener)(window,"mouseup",(()=>{if(b.current=!1,0!==y.current.length){const e=y.current.map((e=>c.toCanvasPoint(e)));n((0,r.default)({points:e},g)),y.current=[],j()}})),(0,s.useListener)(window,"mousemove",(e=>{const t=(0,d.getPointFromStage)(e,v,m),n=m&&b.current;if(C(n?(0,d.getPointFromStage)(e,v,!0):t),b.current){const e=y.current,n=e[e.length-1];(!n||n.distance(t)>=h&&S()||(0,d.isStageCorner)(t,v))&&e.push(t)}})),(0,o.useEffect)((()=>{E.current&&(null==a||a(),E.current=!1)})),{cursorPosition:_,points:y.current,handlers:{onMouseDown:e=>{var n;if(null==t||t(),null===(n=x.mousedown)||void 0===n?void 0:n.includes(e.target.name()))return void(null==a||a());const r=(0,d.getPointFromStage)(e.evt,v,m);y.current.push(r),b.current=!0,j()},onMouseUp:e=>{var t;const n=null===(t=x.mouseup)||void 0===t?void 0:t.includes(e.target.name()),a=1===y.current.length;n&&!a&&(E.current=!0)},onMouseMove:e=>{null==u||u(e)}}}};var r=a(n(81109)),o=n(67294),i=a(n(59312)),l=a(n(55098)),s=n(87550),d=n(91788)},69613:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{caption:t,setCaptionInputRef:n,onEnter:a}=e,y=(0,s.useRef)(null),b=(0,s.useRef)(null),[j,S]=(0,s.useState)(null),E=()=>{var e;null===(e=y.current)||void 0===e||e.focus()};(0,s.useEffect)((()=>{E()}),[]);const k=()=>{S(null)},w=e=>{const t=y.current;t&&(t.focus(!1),t.replaceSelection(e))},T=(0,r.numCodepoints)(e.caption||""),M=o.default.MAX_CAPTION_LENGTH-T<50,P=(0,C.jsx)("div",{role:"button",className:h.default.inputEmoji,onClick:e=>{e.preventDefault(),e.stopPropagation();const t=(0,C.jsx)(c.EmojiPanel,{onEmoji:w,onFocusNext:E,onFocusPrev:E});S({menu:t,dirY:u.DirY.TOP,type:u.MenuType.EmojiPicker,anchor:e.target}),E()},children:(0,C.jsx)(v.default,{name:"emoji-input"})}),I=t&&""!==t?(0,C.jsx)("div",{role:"button",className:h.default.clearBtn,onClick:()=>{var e;null===(e=y.current)||void 0===e||e.reset(),E()},children:(0,C.jsx)(v.default,{name:"x-alt"})}):null,O=M&&(0,C.jsx)("div",{className:h.default.charCounter,children:p.default.n(o.default.MAX_CAPTION_LENGTH-T)});let L=null;j&&(L=(0,C.jsx)(x.UIE,{displayName:"EmojiPicker",escapable:!0,popable:!0,dismissOnWindowResize:!0,ref:b,requestDismiss:k,children:(0,C.jsx)(_.default,{contextMenu:j})}));const A=(0,C.jsx)("div",{className:h.default.secondaryButtonContainer,children:(0,C.jsx)(d.default,{disabled:e.viewOnceDisabled,isOn:Boolean(e.viewOnce),mediaType:e.msgType,onChange:e.onToggleViewOnce,noMargin:!0})});return(0,C.jsxs)(f.FlexRow,{className:(0,i.default)(h.default.container,{[h.default.videoCaption]:"video"===e.theme}),align:"center",justify:"center",children:[(0,C.jsx)("div",{className:h.default.suggestionsPositioner,children:(0,C.jsxs)("div",{className:h.default.suggestionsContainer,children:[(0,C.jsx)(m.default.MentionSuggestions,{chat:e.chat,theme:g.ThemeOptions.MEDIA_CAPTION}),(0,C.jsx)(m.default.EmojiSuggestions,{chat:e.chat,theme:g.ThemeOptions.MEDIA_CAPTION})]})}),(0,C.jsxs)(f.FlexRow,{align:"start",className:h.default.inputContainer,children:[(0,C.jsx)(m.default,{ref:e=>{y.current=e,n(e)},initialValue:t,placeholder:l.fbt._("Type a message",null,{hk:"3h5KZB"}),onChange:e.onChange,onEnter:e=>{var t;(null===(t=y.current)||void 0===t?void 0:t.isFocused())&&a(e)},onFiles:e.onFiles,theme:"media-caption",maxLength:o.default.MAX_CAPTION_LENGTH,multiline:!0,spellCheck:!0}),(0,C.jsxs)(f.FlexRow,{className:h.default.buttonContainer,align:"center",children:[O,I,P]})]}),A,L]})};var r=n(64331),o=a(n(64369)),i=a(n(94184)),l=n(48360),s=n(67294),d=a(n(75680)),u=n(60811),c=n(30424),f=n(29623),h=a(n(50907)),p=a(n(14296)),m=a(n(43698)),g=n(16477),v=a(n(23217)),x=n(18644),_=a(n(24717)),C=n(85893)},54274:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.THICKNESS=void 0,t.getAllThicknesses=function(){return Object.keys(n)},t.getThicknessValue=function(e){return a[e]};const n=Object.freeze({SMALL:"SMALL",MEDIUM:"MEDIUM",LARGE:"LARGE",XLARGE:"XLARGE"});t.THICKNESS=n;const a={[n.SMALL]:8,[n.MEDIUM]:12,[n.LARGE]:18,[n.XLARGE]:24}},77890:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(35937)),o=n(15461),i=a(n(94184)),l=n(67294),s=n(35461),d=a(n(30635)),u=a(n(14296)),c=n(43257),f=n(18146),h=a(n(23217)),p=n(85893);const{IMAGE:m,VIDEO:g}=o.MSG_TYPE,v=(0,r.default)(c.MIMETYPES,(e=>"document"===(null==e?void 0:e.msgType)));function x(e){const t=(0,s.useModelValues)(e.attachMedia,["mimetype","preview","type","fullPreview","fullPreviewSize","documentPageCount"]);let n;if(t.type===m)n=t.preview;else if(t.type===g)n=`data:image/jpeg;base64,${t.preview}`;else if("pdf"===(0,c.previewType)(t.mimetype)){t.fullPreview&&t.fullPreviewSize&&null!=t.documentPageCount&&t.documentPageCount>0&&(n=t.fullPreview)}if(n)return(0,p.jsx)("div",{className:d.default.body,children:(0,p.jsx)("img",{src:n,alt:u.default.t(825)})});const a=(0,i.default)(d.default.body,d.default.bodyIcon,v[t.mimetype]?v[t.mimetype].icon:"icon-doc-generic");return(0,p.jsx)("div",{className:a})}function _(e,t){const{attachMedia:n,onClick:a,onClose:r}=e;return(0,p.jsxs)("div",{className:(0,i.default)(d.default.thumb,{[d.default.active]:e.active}),onClick:e=>{a((0,f.unproxy)(n),e)},tabIndex:"-1",ref:t,children:[(0,p.jsx)("div",{className:d.default.btnDelete,onClick:e=>{r((0,f.unproxy)(n),e)},role:"button",children:(0,p.jsx)(h.default,{name:"x-alt"})}),(0,p.jsx)("div",{className:d.default.bodyWrapper,children:(0,p.jsx)(x,{attachMedia:n})})]})}var C=(0,l.forwardRef)(_);t.default=C},63727:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(15461),o=n(67294),i=n(99420),l=a(n(77890)),s=n(85893);const d=(0,i.SortableElement)((e=>{let{children:t}=e;return t})),u=(0,i.SortableContainer)((e=>{let{children:t}=e;return t}));class c extends o.Component{constructor(e){super(e),this._handleSortEnd=e=>{let{oldIndex:t,newIndex:n}=e;const{mediaCollection:a}=this.props,r=a.reorder(t,n);this.setState({medias:r})},this.state={medias:this.props.mediaCollection.getPreviewableMedias()}}static getDerivedStateFromProps(e){return{medias:e.mediaCollection.getPreviewableMedias()}}render(){const{mediaCollection:e,className:t,onElementRef:n}=this.props,a=this.state.medias;return(0,s.jsx)(u,{onSortEnd:this._handleSortEnd,axis:"x",helperClass:"SortableHelper",distance:10,children:(0,s.jsx)("div",{className:t,children:a.map(((t,a)=>{var o;return(0,s.jsx)(d,{index:a,children:(0,s.jsx)(l.default,{attachMedia:t,active:t===e.getActive(),previewMode:(null===(o=e.getActive())||void 0===o?void 0:o.type)!==r.MSG_TYPE.IMAGE,onClick:this.props.onClick,onClose:this.props.onClose,ref:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((e=>n(t.id,e)))})},t.id)}))})})}}t.default=c,c.displayName="DragAndDrop"},6327:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ImageBody=void 0;var r=n(15461),o=a(n(76139)),i=a(n(94184)),l=n(48360),s=n(67294),d=a(n(51799)),u=n(87550),c=n(35461),f=n(80666),h=a(n(88262)),p=a(n(35344)),m=a(n(69613)),g=a(n(66430)),v=n(92320),x=n(30383),_=a(n(13057)),C=n(29623),y=n(66747),b=n(39581),j=n(90466),S=a(n(90388)),E=n(39989),k=a(n(54277)),w=n(5807),T=a(n(16186)),M=a(n(46668)),P=n(79230),I=a(n(23217)),O=n(81829),L=a(n(77268)),A=a(n(9165)),D=n(54274),R=n(85893);const N=new M.default({width:200,height:200}),B=(0,s.forwardRef)((function(e,t){const{paintColor:n,paintThickness:a,outlineSmoothing:B,onLayerDelete:F,onTextEditingStart:U,onTextEditingEnd:G,onOutlineDone:H,draftTextLayer:z,onLayerUnselect:W,onPaintSelect:q,onCropRotateCanvas:V,onOutlineSelect:Y}=e,K=(0,c.useModelValues)(e.attachMedia,["mediaEditorData","caption","id"]),Q=(0,s.useRef)(null),X=(0,s.useRef)(null),Z=(0,s.useRef)(null),J=(0,s.useRef)(null),$=(0,s.useRef)(null),ee=(0,s.useRef)(null),te=(0,s.useRef)(null),ne=(0,s.useRef)(null),[ae,re]=(0,s.useState)(M.default.empty()),[oe,ie]=(0,s.useState)(!1),[le,se]=(0,s.useState)(!1),[de,ue]=(0,s.useState)(!1),[ce,fe]=(0,s.useState)(!1),[he,pe]=(0,s.useState)(!1),[me,ge]=(0,s.useState)(!1),ve=()=>{se((e=>!e))},xe=()=>K.mediaEditorData,_e=()=>{if(!Q.current)return;const e=Q.current.getBoundingClientRect(),t=new M.default({width:e.width-40,height:e.height-40});re(t)},Ce=()=>{!de&&xe().selectedLayer&&W(),ue((e=>!e)),_e()},ye=()=>ce,be=()=>{fe((e=>!e))},je=()=>{if(le)ve();else if(de)Ce();else if(ye())H(),be();else{if(!K.mediaEditorData.selectedLayer||z)return!1;W()}return!0};(0,u.useListener)(window,"mousedown",(e=>{ne.current=e.target})),(0,u.useListener)(window,"click",(()=>{const e=ne.current;e!==Q.current&&e!==Z.current&&e!==X.current||je()}));const Se=()=>{const{selectedLayer:e}=K.mediaEditorData;e&&F(e)},Ee=e=>{"Backspace"!==e.code||e.target instanceof HTMLInputElement||e.target instanceof HTMLDivElement&&"true"===e.target.contentEditable||de||Se()},ke=()=>{const e=(()=>{if(!J.current)throw new Error("MediaEditor:canvas is not initialized");return J.current.getDataUrl()})();return o.default.dataURLtoFile(e)},we=()=>{if(null!=J.current){const{width:e,height:t}=J.current.getStage().attrs;if(0!==e&&0!==t){const e=ke(),t=window.URL.createObjectURL(e);K.updateEditedFile(e),K.updatePreview(t),K.updateFullPreview(t)}}},Te=(0,d.default)((()=>{te.current&&((0,j.cancelIdleCallback)(te.current),te.current=null),te.current=(0,j.requestIdleCallback)(we)}),1e3),Me=e=>{(null==e?void 0:e.immediately)?we():Te()};(0,s.useEffect)((()=>(window.addEventListener("resize",_e),window.addEventListener("keydown",Ee),_e(),()=>{window.removeEventListener("resize",_e),window.removeEventListener("keydown",Ee),Me({immediately:!0})})),[]);const Pe=()=>{if(de)Ce();else if(le)ve();else if(ce)H(),be();else if(z){var e;null===(e=J.current)||void 0===e||e.endTextEditing()}else xe().selectedLayer&&W()},Ie=e=>{V(xe().rotation+e,xe().cropOrigin,xe().cropSize)},Oe=()=>{V(0,new T.default({x:0,y:0}),xe().size)},Le=(e,t)=>{V(xe().rotation,e,t)},Ae=(e,t)=>{e===f.MediaEditorAction.OutlineDone?(je(),be()):e===f.MediaEditorAction.Outline?(ye()&&be(),t===f.MediaEditorAction.Outline&&be()):e===f.MediaEditorAction.CropRotateCanvas&&(je(),t===f.MediaEditorAction.CropRotateCanvas&&Ce())},De=(e,t)=>{e===f.MediaEditorAction.OutlineDone?je():e===f.MediaEditorAction.Outline?ye()||be():e===f.MediaEditorAction.CropRotateCanvas?(je(),Ce()):t===f.MediaEditorAction.CropRotateCanvas&&e!==f.MediaEditorAction.CropRotateCanvas&&je()},Re=()=>{const e=K.mediaEditorData;return(0,P.calculateContainScale)(e.screenWidth,e.screenHeight,ae,N)},Ne=()=>{var e;return null===(e=J.current)||void 0===e?void 0:e.getBackground()};(0,s.useImperativeHandle)(t,(()=>({updatePreview:Me,undoAction:Ae,redoAction:De,getCanvasScale:Re,resetUIState:je,getBackground:Ne})));const Be=K.mediaEditorData,Fe=e.draftTextLayer||Be.selectedLayer;let Ue;if(de)Ue=(0,R.jsx)(x.CropRotateToolbar,{canReset:Be.isRotated()||Be.isCropped(),onRotateCanvas:Ie,onReset:Oe});else if(ce)Ue=(0,R.jsx)(w.OutlineToolbar,{smoothing:e.outlineSmoothing,onSmoothingToggle:e.onOutlineSmoothingToggle,canReset:Be.isOutlined(),onReset:e.onOutlineReset});else if(Fe){const t=Fe instanceof E.ImageLayer&&Fe.isBackground();if(Fe instanceof O.TextLayer){const t=(0,v.getAllColors)().map((e=>{const t=(0,v.getColorValue)(e),n=(0,v.getColorValue)(t.isLight()?v.COLORS.BLACK:v.COLORS.WHITE);return{primaryColor:t,secondaryColor:n}}));Ue=(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(g.default,{ref:$,colors:t,onColorSelect:e.onTextColorSelect,selectedColor:Fe.textColor}),(0,R.jsx)(y.Font,{ref:ee,fonts:(0,b.getAllFonts)(),selectedFont:Fe.font,selectedAlignment:Fe.alignment,onFontSelect:e.onFontSelect,onAlignmentSelect:e.onAlignmentSelect}),(0,R.jsx)(L.default,{checked:Fe.textBackground,onBackgroundToggle:e.onTextBackgroundToggle}),(0,R.jsx)(h.default,{icon:"delete",title:l.fbt._("Delete",null,{hk:"1XGJJN"}),onClick:Se})]})}else t||(Ue=(0,R.jsx)(R.Fragment,{children:(0,R.jsx)(h.default,{icon:"delete",title:l.fbt._("Delete",null,{hk:"1XGJJN"}),onClick:Se})}))}else le&&(Ue=(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(g.default,{colors:(0,v.getAllColors)().map((e=>({primaryColor:(0,v.getColorValue)(e)}))),onColorSelect:e.onPaintColorSelect,selectedColor:n}),(0,R.jsx)(A.default,{thicknesses:(0,D.getAllThicknesses)(),onThicknessSelect:e.onPaintThicknessSelect,selectedThickness:a})]}));const Ge=!Ue&&!e.draftTextLayer&&!e.sendAsSticker,He=(0,R.jsx)(C.FlexRow,{className:(0,i.default)(S.default.captionInputContainer,{[S.default.captionInputHidden]:!Ge}),justify:"center",children:(0,R.jsx)(m.default,{chat:e.chat,caption:K.caption,viewOnce:e.viewOnce,viewOnceDisabled:e.viewOnceDisabled,msgType:r.MSG_TYPE.IMAGE,theme:"image",onToggleViewOnce:e.onToggleViewOnce,onChange:e.onCaptionChange,onEnter:e.onEnter,onFiles:e.onFiles,setCaptionInputRef:t=>{e.setCaptionInputRef(K.id,t)}},K.id)}),ze=(0,R.jsxs)(C.FlexRow,{justify:"center",align:"center",className:S.default.footer,ref:Z,children:[Ue&&(0,R.jsx)(C.FlexRow,{justify:"center",align:"center",className:S.default.bottomToolbar,children:Ue}),He]});let We=null;de&&(We=(0,R.jsx)(_.default,{data:Be,rotation:xe().rotation,cropOrigin:xe().cropOrigin,cropSize:xe().cropSize,onCropChange:Le,containerSize:ae,keepRatio:e.sendAsSticker,sendAsSticker:e.sendAsSticker}));const qe=de||le||ce||he||me||Boolean(e.draftTextLayer)||Boolean(xe().selectedLayer);return(0,R.jsxs)("div",{className:S.default.container,children:[(0,R.jsxs)(C.FlexRow,{className:S.default.header,ref:X,children:[e.onClose?(0,R.jsx)("div",{onClick:e.onClose,className:S.default.closeButton,children:(0,R.jsx)(I.default,{name:"x"})}):(0,R.jsx)("div",{className:S.default.closeButtonPlaceholder}),(0,R.jsx)(k.default,{selectedLayer:Fe,inPaintMode:le,inCropRotateMode:de,inTextEditingMode:Boolean(e.draftTextLayer),inOutlineMode:ce,canUndo:e.canUndo,canRedo:e.canRedo,onPaintSelect:()=>{ve(),q()},onCropRotateSelect:()=>{Ce()},onOutlineSelect:()=>{be(),Y()},onTextSelect:e.onTextSelect,onEmojiSelect:e.onEmojiSelect,onStickerSelect:e.onStickerSelect,onToggleEmojiPanel:e=>{pe(e)},onToggleStickerPanel:e=>{ge(e)},onUndo:e.onUndo,onRedo:e.onRedo,showOutline:e.sendAsSticker}),(0,R.jsx)(C.FlexRow,{className:S.default.headerRight,justify:"end",children:qe&&(0,R.jsx)(h.default,{onClick:Pe,children:l.fbt._("Done",null,{hk:"2nVR7W"})})})]}),(0,R.jsxs)("div",{ref:Q,className:(0,i.default)(S.default.canvasContainer,{[S.default.cropRotateContainer]:de}),children:[(0,R.jsx)("div",{className:S.default.canvas,style:{display:de?"none":"unset"},children:(0,R.jsx)(p.default,{ref:J,data:Be,inPaintMode:le,inOutlineMode:ce,paintColor:n,paintThickness:a,outlineSmoothing:B,currentlyEditingTextLayer:e.currentlyEditingTextLayer,draftTextLayer:e.draftTextLayer,scale:Re(),onLayerSelect:e.onLayerSelect,onLayerUnselect:e.onLayerUnselect,onLayerTranslate:e.onLayerTranslate,onLayerTransform:e.onLayerTransform,onTextEditingStart:e=>{ie(!0),U(e)},onTextEditingEnd:(e,t)=>{ie(!1),G(e,t)},onTextInputOutsideClick:e=>{var t,n;const a=e.target;return!(a instanceof HTMLElement&&a.closest(`.${S.default.footer}`)&&a!==Z.current||(null===(t=$.current)||void 0===t?void 0:t.isPanelVisible())||(null===(n=ee.current)||void 0===n?void 0:n.isMenuVisible()))},onPaintDrawEnd:e.onPaintDrawEnd,onOutlineDrawEnd:e.onOutlineDrawEnd,onOutlineDone:Pe,canEditBackground:e.sendAsSticker,outlineEnabled:e.sendAsSticker})}),We]}),ze]})}));t.ImageBody=B},14500:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(48926)),o=n(50796),i=a(n(45095)),l=n(81572),s=a(n(64369)),d=n(72312),u=n(65885),c=a(n(52013)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=$(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(n(35232)),h=n(15461),p=n(94816),m=a(n(94184)),g=n(61498),v=n(48360),x=n(67294),_=n(80666),C=a(n(37793)),y=n(92320),b=a(n(65273)),j=a(n(92726)),S=a(n(63727)),E=a(n(60453)),k=a(n(69637)),w=n(67247),T=a(n(50580)),M=n(29623),P=n(39581),I=n(29424),O=n(6327),L=n(39989),A=a(n(79334)),D=n(84387),R=n(84866),N=a(n(11339)),B=n(43257),F=a(n(87618)),U=a(n(16186)),G=a(n(25324)),H=n(11054),z=n(90669),W=a(n(38932)),q=a(n(23217)),V=n(81829),Y=n(54274),K=n(50452),Q=a(n(90012)),X=a(n(65235)),Z=a(n(95190)),J=n(85893);function $(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return($=function(e){return e?n:t})(e)}const{IMAGE:ee,VIDEO:te,AUDIO:ne,STICKER:ae}=h.MSG_TYPE,re=3*V.DEFAULT_FONT_SIZE;class oe extends x.Component{constructor(e){var t,n;super(e),t=this,this._setRefCanvasContainer=e=>{this._refCanvasContainer=e},this._setRefCanvas=e=>{this._refCanvas=e},this._setRefImageBody=e=>{this._refImageBody=e},this._setRefFileInput=e=>{this._refFileInput=e},this._setRefSendButton=e=>{this._refSendButton=e},this._mediaThumbRefMap=new Map,this._setRefMediaThumb=(e,t)=>{this._mediaThumbRefMap.set(e,t)},this._captionInputRefMap=new Map,this._setRefCaptionInput=(e,t)=>{this.props.mediaCollection.getActive()&&!t||this._captionInputRefMap.set(e,t)},this._setRefHotKeys=e=>{this._refHotKeys=e},this._update=(e,t)=>{if(e===this._getData())return;const n=this.state.activeMedia;var a,r,o;n&&(n.updateMediaEditorData(e,{undoable:null!==(a=null==t?void 0:t.undoable)&&void 0!==a&&a,lastAction:null!==(r=null==t?void 0:t.lastAction)&&void 0!==r?r:null}),this._updateUndoRedoState());(null==t?void 0:t.updatePreview)&&(null===(o=this._refImageBody)||void 0===o||o.updatePreview());__LOG__(2)`MediaEditor: Updated MediaEditorData`},this._getData=()=>{const{activeMedia:e}=this.state;return null==e?b.default.create():e.mediaEditorData},this._getBackground=()=>{var e;return null===(e=this._refImageBody)||void 0===e?void 0:e.getBackground()},this._handleUndo=()=>{const{activeMedia:e}=this.state;if(e&&e.canUndoMediaEditorData()){var t,n;const a=e.lastMediaEditorAction;e.undoMediaEditorData();const r=e.lastMediaEditorAction;this._updateUndoRedoState(),null===(t=this._refImageBody)||void 0===t||t.updatePreview(),null===(n=this._refImageBody)||void 0===n||n.undoAction(a,r)}},this._handleRedo=()=>{const{activeMedia:e}=this.state;if(e&&e.canRedoMediaEditorData()){var t,n;const a=e.lastMediaEditorAction;e.redoMediaEditorData();const r=e.lastMediaEditorAction;this._updateUndoRedoState(),null===(t=this._refImageBody)||void 0===t||t.updatePreview(),null===(n=this._refImageBody)||void 0===n||n.redoAction(r,a)}},this._updateUndoRedoState=()=>{this.setState((e=>{var t,n,a,r;const o=null!==(t=null===(n=this.state.activeMedia)||void 0===n?void 0:n.canUndoMediaEditorData())&&void 0!==t&&t,i=null!==(a=null===(r=this.state.activeMedia)||void 0===r?void 0:r.canRedoMediaEditorData())&&void 0!==a&&a;return e.canUndo!==o||e.canRedo!==i?{canUndo:o,canRedo:i}:null}))},this._addImageLayer=(e,t,n,a,r)=>{const o=(0,i.default)(this._refImageBody,"this._refImageBody").getCanvasScale(),l=t.width*o,s=t.width*o,d=Math.min(r/l,r/s),u=this._getData().addImageLayerToCenter({type:e,image:t,editable:!0,scale:d});this._update(u,{updatePreview:!0,undoable:!0})},this._handleEmojiSelect=function(){var e=(0,r.default)((function*(e){try{const n=w.EmojiUtil.getGlyphId(e);if(null==n)return;const a=w.EmojiUtil.getGlyphPath(n,"xlarge").high,r=yield le(a),o=t.state.sendAsSticker?128:64;t._addImageLayer(L.ImageLayerType.Emoji,r,r.width,r.height,o),t.state.sendAsSticker&&new N.default.WebcStickerMakerEvents({stickerMakerEventName:N.default.WEBC_STICKER_MAKER_EVENT_NAME_TYPE.EMOJI_ADDED}).commit()}catch(e){p.ToastManager.open((0,J.jsx)(K.Toast,{msg:v.fbt._("Failed to add image",null,{hk:"1e7nnp"}),id:(0,K.genId)()}))}}));return function(){return e.apply(this,arguments)}}(),this._handleStickerSelect=function(){var e=(0,r.default)((function*(e){try{let n;const a=e.mediaData.fullWidth,r=e.mediaData.fullHeight;if(yield(0,g.detectWebpSupport)()){const t=e.mediaData.filehash,a=R.MediaBlobCache.getOrCreateURL(t);n=yield le(a)}else n=yield function(){return se.apply(this,arguments)}(e.mediaData);t._addImageLayer(L.ImageLayerType.Sticker,n,a,r,128),t.state.sendAsSticker&&new N.default.WebcStickerMakerEvents({stickerMakerEventName:N.default.WEBC_STICKER_MAKER_EVENT_NAME_TYPE.STICKER_ADDED}).commit()}catch(e){p.ToastManager.open((0,J.jsx)(K.Toast,{msg:v.fbt._("Failed to add image",null,{hk:"1e7nnp"}),id:(0,K.genId)()}))}}));return function(){return e.apply(this,arguments)}}(),this._handlePaintSelect=()=>{const e=this._getData().clearSelectedLayer();this._update(e)},this._handleOutlineSelect=()=>{const e=this._getData().clearSelectedLayer();this._update(e)},this._handleOutlineDone=()=>{const e=this._getBackground(),t=this._getData();if(!e||t.outlineLayer.isEmpty())return;const n=t.cropCenter,{width:a,height:r}=e,o=new U.default({x:n.x-a/2,y:n.y-r/2}),i=-t.rotation,l=Math.max(a,r),s=t.cropSize.dimension,d=t.updateBackground(e,o,i,s*((z.STICKER_DIMENSION-2*z.STICKER_PADDING)/z.STICKER_DIMENSION)/l).clearOutlinePaths();this._update(d,{undoable:!0,updatePreview:!0,lastAction:_.MediaEditorAction.OutlineDone}),this.state.sendAsSticker&&new N.default.WebcStickerMakerEvents({stickerMakerEventName:N.default.WEBC_STICKER_MAKER_EVENT_NAME_TYPE.IMAGE_OUTLINED}).commit()},this._handleOutlineReset=()=>{const e=this._getData().clearOutlinePaths();this._update(e,{undoable:!0,updatePreview:!0})},this._handleCropRotateCanvas=(e,t,n)=>{const a=this._getData().setRotation(e).setCrop(t,n);this._update(a,{undoable:!0,updatePreview:!0,lastAction:_.MediaEditorAction.CropRotateCanvas}),this.state.sendAsSticker&&new N.default.WebcStickerMakerEvents({stickerMakerEventName:N.default.WEBC_STICKER_MAKER_EVENT_NAME_TYPE.IMAGE_CROPPED}).commit()},this._handlePaintColorSelect=e=>{this.setState({paintColor:e})},this._handlePaintThicknessSelect=e=>{this.setState({paintThickness:e})},this._handleOutlineSmoothingToggle=e=>{this.setState({outlineSmoothing:e})},this._handleTextSelect=()=>{if(this.state.currentlyEditingTextLayer)return;this._handleLayerUnselect();let e=1.2/(0,i.default)(this._refImageBody,"this._refImageBody").getCanvasScale();if(this.state.sendAsSticker){const t=this._getData().cropSize.dimension;e=re*t/z.STICKER_DIMENSION/V.DEFAULT_FONT_SIZE}const t={origin:this._getData().cropCenter,text:"",textColor:this.state.textColor,textBackground:this.state.textBackground,alignment:this.state.alignment,font:this.state.font,scale:e},n=this._getData().addTextLayer(t),a=(0,i.default)(n.lastTextLayer,"data.lastTextLayer");this.setState({draftTextLayer:a,currentlyEditingTextLayer:null})},this._handleFontSelect=e=>{this.setState({font:e});const{selectedLayer:t}=this._getData(),{draftTextLayer:n}=this.state;if(n)this.setState({draftTextLayer:n.setFont(e)});else if(t&&t instanceof V.TextLayer){const n=this._getData().setFont(t,e);this._update(n,{updatePreview:!0,undoable:!0})}},this._handleAlignmentSelect=e=>{this.setState({alignment:e});const{selectedLayer:t}=this._getData(),{draftTextLayer:n}=this.state;if(n)this.setState({draftTextLayer:n.setAlignment(e)});else if(t&&t instanceof V.TextLayer){const n=this._getData().setAlignment(t,e);this._update(n,{updatePreview:!0,undoable:!0})}},this._handleTextColorSelect=e=>{this.setState({textColor:e});const{selectedLayer:t}=this._getData(),{draftTextLayer:n}=this.state;if(n)this.setState({draftTextLayer:n.setTextColor(e)});else if(t&&t instanceof V.TextLayer){const n=this._getData().setTextColor(t,e);this._update(n,{updatePreview:!0,undoable:!0})}},this._handleTextBackgroundToggle=()=>{const e=!this.state.textBackground;this.setState({textBackground:e});const{selectedLayer:t}=this._getData(),{draftTextLayer:n}=this.state;if(n)this.setState({draftTextLayer:n.setTextBackground(e)});else if(t&&t instanceof V.TextLayer){const n=this._getData().setTextBackground(t,e);this._update(n,{updatePreview:!0,undoable:!0})}},this._handleTextEditingStart=e=>{this.setState({draftTextLayer:e,currentlyEditingTextLayer:e})},this._handleTextEditingEnd=(e,t)=>{var n;if(t){let e=this._getData();const n=(0,i.default)(this.state.draftTextLayer,"this.state.draftTextLayer").setText(t);this.state.currentlyEditingTextLayer?e=e.updateLayer((0,i.default)(this.state.currentlyEditingTextLayer,"this.state.currentlyEditingTextLayer"),n):(e=e.addTextLayer(n),this.state.sendAsSticker&&new N.default.WebcStickerMakerEvents({stickerMakerEventName:N.default.WEBC_STICKER_MAKER_EVENT_NAME_TYPE.TEXT_ADDED}).commit()),this._update(e,{updatePreview:!0,undoable:!0})}else{const{currentlyEditingTextLayer:t}=this.state;t&&this._update(this._getData().deleteLayer(t),{updatePreview:!0,undoable:Boolean(e.text)})}setTimeout((()=>{this.setState({draftTextLayer:null,currentlyEditingTextLayer:null})}),0),null===(n=this._refHotKeys)||void 0===n||n.focus()},this._handlePaintDrawEnd=e=>{this._update(this._getData().addPaintPath(e),{undoable:!0,updatePreview:!0})},this._handleOutlineDrawEnd=e=>{this._update(this._getData().addOutlinePath(e),{undoable:!0,updatePreview:!0,lastAction:_.MediaEditorAction.Outline})},this._handleLayerUnselect=()=>{this._update(this._getData().clearSelectedLayer())},this._handleLayerSelect=e=>{if(!e.editable)return;const t=this._getData().setSelectedLayer(e);this._update(t),e instanceof V.TextLayer&&this.setState({textColor:e.textColor,textBackground:e.textBackground,font:e.font})},this._handleLayerTranslate=(e,t)=>{e instanceof L.ImageLayer&&e.isBackground()?this._update(this._getData().translateBackground(t),{updatePreview:!0,undoable:!0}):this._update(this._getData().translateLayer(e,t),{updatePreview:!0,undoable:!0})},this._handleLayerTransform=(e,t,n)=>{e instanceof L.ImageLayer&&e.isBackground()?this._update(this._getData().transformBackground(t,n),{updatePreview:!0,undoable:!0}):this._update(this._getData().transformLayer(e,t,n),{updatePreview:!0,undoable:!0})},this._handleLayerDelete=e=>{const t=this._getData().deleteLayer(e);this._update(t,{updatePreview:!0,undoable:!0})},this._handleMediaProcessUpdate=()=>{const{mediaCollection:e}=this.props;if(!e.canSend())return;const{errorMsgs:t}=e.uiProcessMsgs();t&&(p.ToastManager.open((0,J.jsx)(K.Toast,{msg:t,id:(0,K.genId)()})),0===e.getPreviewableMedias().length&&this.props.onClose()),this.forceUpdate()},this._handleDrop=e=>{this.state.viewOnce||this.state.sendAsSticker||this._handleFilePick(e)},this._handleDragChange=(e,t)=>{this.state.viewOnce||this.state.sendAsSticker||(this.setState({isDragging:e}),e||t||this.props.mediaCollection.length||this.props.onClose())},this._handleCaptionChange=e=>{const{activeMedia:t,isInitCaptionUsed:n}=this.state;if(!t)return;const a=this.props.mediaCollection.indexOf(t);t.updateCaption(e),0===a&&""===e&&n&&this.setState({isInitCaptionUsed:!1})},this._handlePaste=e=>{e.preventDefault(),e.stopPropagation();const t=new j.default(e.clipboardData);t.hasFiles()&&this._handleFiles(t)},this._handleFiles=e=>{const t=e.getFiles().filter((e=>{const t=(0,u.typeFromMimetype)(e.type);return"image"===t||"video"===t})).map((e=>({file:e})));this.props.mediaCollection.processAttachments(t,N.default.MEDIA_PICKER_ORIGIN_TYPE.PASTE)},this._handleAddFileClick=()=>{if(this._refFileInput){this._refFileInput.click()}},this._handleFilePick=e=>{const t=this.props.getUnmountSignal();(0,d.getFiles)(e).then((n=>{if(t.aborted)return;let a;return e.shiftKey&&e.altKey&&1===n.length&&(this.setState({sendAsSticker:!0,paintThickness:Y.THICKNESS.XLARGE}),a=!0),this.props.mediaCollection.processAttachments(n.map((e=>({file:e,stickerMaker:a}))),N.default.MEDIA_PICKER_ORIGIN_TYPE.CHAT_PHOTO_LIBRARY)})).catch((0,o.filteredCatch)(f.MediaDragDropError,(e=>{this.props.mediaCollection.length||this.props.onDropText(e.src)}))),e.target.value&&(e.target.value="")},this._handleEnter=e=>{var t;if(!this.state.activeMedia)return;if(e.repeat)return;if(e.shiftKey)return;if(this.state.draftTextLayer)return;const{selectedLayer:n}=this._getData();if(n instanceof V.TextLayer)return e.preventDefault(),e.stopPropagation(),void this._handleTextEditingStart(n);(null===(t=this._refImageBody)||void 0===t?void 0:t.resetUIState())||this._handleSendFromMediaEditor()},this._handleArrowKey=(e,t)=>{if(!this.state.activeMedia||t.repeat||this.state.draftTextLayer)return;const{activeMedia:n}=this.state,a=n&&!n.caption,r=this._captionInputRefMap.get(n.id);(a||r&&!r.isFocused()||r&&r.cursorIsAtStart())&&("left"===e?this._handlePrev():this._handleNext())},this._handlePrev=()=>{this.props.mediaCollection.setPrevAsActive()&&(this._refSendButton&&!this.state.draftTextLayer&&c.default.focus(this._refSendButton),this._scrollIntoView())},this._handleNext=()=>{this.props.mediaCollection.setNextAsActive()&&(this._refSendButton&&!this.state.draftTextLayer&&c.default.focus(this._refSendButton),this._scrollIntoView())},this._scrollIntoView=()=>{const{activeMedia:e}=this.state;if(!e)return;const t=this._mediaThumbRefMap.get(e.id);t&&t.scrollIntoView()},this._handleSelectThumb=e=>{this.props.mediaCollection.setActive(e)},this._handleRemoveThumb=(e,t)=>{t.stopPropagation(),t.preventDefault(),this.props.mediaCollection.remove(e),0===this.props.mediaCollection.getValidMedias().length?this._delayedClose=setTimeout((()=>{this.props.onClose()}),200):this._refSendButton&&c.default.focus(this._refSendButton)},this._handleSendFromMediaEditor=e=>{var t;null==e||e.preventDefault(),null==e||e.stopPropagation();const{mediaCollection:n}=this.props;if(!n.canSend())return;const a=n.getPreviewableMedias();if(0===a.length)return void this.props.onClose();var r;((null===(t=this.state.activeMedia)||void 0===t?void 0:t.mediaEditorData.hasEdits())||this.state.sendAsSticker)&&(null===(r=this._refImageBody)||void 0===r||r.updatePreview({immediately:!0}));const o=new Map,i=[];a.forEach((e=>{const t=e.caption,a=this._captionInputRefMap.get(e.id);if(t&&a){const n=a.serialize(t);o.set(e.id,n)}if(e.editedFile&&(e.mediaEditorData.hasEdits()||this.state.sendAsSticker)){const t=n.replace(e.id,{file:e.editedFile,asSticker:this.state.sendAsSticker});i.push(t)}})),Promise.all(i).then((()=>{const e=n.getPreviewableMedias();if(0===e.length)return;const t=e.map((e=>{var t;let n=e.caption,a=[];const r=o.get(e.id);if(r){const[e,t]=[r[0].trim(),r[1]];e.length&&(n=e,a=t.mentionedJidList||[])}return e.caption=null!==(t=n)&&void 0!==t?t:void 0,{media:e,mentionedJidList:a}}));this.props.onSendMedia(t,{initCaptionUsed:this.state.isInitCaptionUsed,isViewOnce:this._canViewOnce()&&this.state.viewOnce}),this._commitMediaEditorSendMetric(a)}))},this._handleToggleViewOnce=e=>{this.setState({viewOnce:e})},this._handleToggleStickerMaker=()=>{const e=!this.state.sendAsSticker&&this._canSendAsSticker();this.setState({sendAsSticker:e,paintThickness:e?Y.THICKNESS.XLARGE:Y.THICKNESS.SMALL})},this._canViewOnce=()=>{var e;const{chat:t,mediaCollection:n}=this.props,a=t.contact.isEnterprise;return 1===n.length&&!0===(null===(e=n.at(0))||void 0===e?void 0:e.isViewableOnce())&&!a&&!this.props.sendAsSticker},this._canSendAsSticker=()=>{var e;const{mediaCollection:t}=this.props;return 1===t.length&&(null===(e=t.at(0))||void 0===e?void 0:e.type)===ee},this._getMediaBody=e=>{let t=null;const{paintColor:n,viewOnce:a,paintThickness:r,outlineSmoothing:o,canUndo:i,canRedo:l}=this.state;switch(e.type){case ae:case ee:t=(0,J.jsx)(O.ImageBody,{ref:this._setRefImageBody,attachMedia:e,chat:this.props.chat,onCaptionChange:this._handleCaptionChange,onClose:"capture"===this.props.theme?null:this.props.onClose,onEnter:this._handleSendFromMediaEditor,setCaptionInputRef:this._setRefCaptionInput,paintColor:n,paintThickness:r,outlineSmoothing:o,canUndo:i,canRedo:l,currentlyEditingTextLayer:this.state.currentlyEditingTextLayer,draftTextLayer:this.state.draftTextLayer,viewOnce:a,viewOnceDisabled:!this._canViewOnce(),sendAsSticker:this.state.sendAsSticker,onPaintSelect:this._handlePaintSelect,onOutlineSelect:this._handleOutlineSelect,onOutlineDone:this._handleOutlineDone,onOutlineReset:this._handleOutlineReset,onTextSelect:this._handleTextSelect,onTextBackgroundToggle:this._handleTextBackgroundToggle,onEmojiSelect:this._handleEmojiSelect,onStickerSelect:this._handleStickerSelect,onLayerSelect:this._handleLayerSelect,onLayerUnselect:this._handleLayerUnselect,onLayerDelete:this._handleLayerDelete,onLayerTranslate:this._handleLayerTranslate,onLayerTransform:this._handleLayerTransform,onTextEditingStart:this._handleTextEditingStart,onTextEditingEnd:this._handleTextEditingEnd,onTextColorSelect:this._handleTextColorSelect,onFontSelect:this._handleFontSelect,onAlignmentSelect:this._handleAlignmentSelect,onPaintColorSelect:this._handlePaintColorSelect,onPaintThicknessSelect:this._handlePaintThicknessSelect,onOutlineSmoothingToggle:this._handleOutlineSmoothingToggle,onCropRotateCanvas:this._handleCropRotateCanvas,onUndo:this._handleUndo,onRedo:this._handleRedo,onPaintDrawEnd:this._handlePaintDrawEnd,onOutlineDrawEnd:this._handleOutlineDrawEnd,onToggleViewOnce:this._handleToggleViewOnce,onFiles:this._handleFiles},e.mediaEditorData.id);break;case te:t=(0,J.jsx)(X.default,{attachMedia:e,chat:this.props.chat,viewOnce:a,viewOnceDisabled:!this._canViewOnce(),setCaptionInputRef:this._setRefCaptionInput,onCaptionChange:this._handleCaptionChange,onClose:this.props.onClose,onEnter:this._handleSendFromMediaEditor,onToggleViewOnce:this._handleToggleViewOnce,onFiles:this._handleFiles},e.id);break;case ne:t=(0,J.jsx)(C.default,{item:e,onClose:this.props.onClose},e.id);break;default:t="pdf"===(0,B.previewType)(e.mimetype)?(0,J.jsx)(F.default,{item:e,onClose:this.props.onClose},e.id):(0,J.jsx)(T.default,{mimeType:e.mimetype,filesize:e.filesize,filename:e.filename,fileExt:e.fileExt,onClose:this.props.onClose},e.id)}return t},this.getThumbs=()=>{const{mediaCollection:e}=this.props;return(0,J.jsx)(S.default,{className:A.default.thumbs,mediaCollection:e,onClick:this._handleSelectThumb,onClose:this._handleRemoveThumb,onElementRef:this._setRefMediaThumb})},this.state={paintColor:(0,y.getColorValue)(y.COLORS.BLUE),paintThickness:e.sendAsSticker?Y.THICKNESS.XLARGE:Y.THICKNESS.SMALL,outlineSmoothing:!0,textColor:(0,y.getColorValue)(y.COLORS.BLACK),font:P.FONTS.SANS_SERIF,textBackground:!0,alignment:P.TextAlignment.CENTER,isDragging:!1,canUndo:!1,canRedo:!1,activeMedia:null,prevActiveMedia:null,isInitCaptionUsed:!1,initCaption:null===(n=this.props.initCaption)||void 0===n?void 0:n.text,currentlyEditingTextLayer:null,draftTextLayer:null,viewOnce:!1,sendAsSticker:e.sendAsSticker}}static getDerivedStateFromProps(e,t){var n,a;const r=e.mediaCollection.getActive(),o=t.initCaption;let i=t.isInitCaptionUsed;return i||t.activeMedia||!o||!r||r.type!==ee&&r.type!==te||(r.caption=o,i=!0),{prevActiveMedia:r,activeMedia:r,canUndo:null!==(n=null==r?void 0:r.canUndoMediaEditorData())&&void 0!==n&&n,canRedo:null!==(a=null==r?void 0:r.canRedoMediaEditorData())&&void 0!==a&&a,isInitCaptionUsed:i}}componentDidMount(){var e;const{mediaCollection:t,listeners:n}=this.props;t.isStickerMaker=this.state.sendAsSticker,n.add(t,"add remove reset",(()=>{this.forceUpdate()})),n.add(t,"active-change change:state change:previewable",this._handleMediaProcessUpdate),n.add(l.Cmd,"toggle_sticker_maker",this._handleToggleStickerMaker),null===(e=this._refHotKeys)||void 0===e||e.focus()}componentDidUpdate(){this.props.mediaCollection.isStickerMaker=this.state.sendAsSticker}componentWillUnmount(){this._delayedClose&&clearTimeout(this._delayedClose)}handleRequestDismiss(){var e;return!(null===(e=this._refImageBody)||void 0===e?void 0:e.resetUIState())&&(!this.state.draftTextLayer||(this.setState({currentlyEditingTextLayer:null,draftTextLayer:null}),!1))}_commitMediaEditorSendMetric(e){if(this.state.sendAsSticker)return new N.default.StickerSend({stickerSendOrigin:N.default.STICKER_SEND_ORIGIN_TYPE.STICKER_MAKER,stickerIsAnimated:!1,stickerIsFirstParty:!1,stickerIsFromStickerMaker:!0}).commit(),void new N.default.WebcStickerMakerEvents({stickerMakerEventName:N.default.WEBC_STICKER_MAKER_EVENT_NAME_TYPE.SEND_STICKER}).commit();let t=0,n=0,a=0,r=0,o=0,i=0;e.forEach((e=>{const l=e.mediaEditorData;e.type===ee&&(t++,l.hasEdits()&&n++,l.paintLayer.paths.length>0&&a++),l.layers.forEach((e=>{e instanceof L.ImageLayer?(e.isEmoji()&&r++,e.isSticker()&&o++):e instanceof V.TextLayer&&i++}))})),new N.default.WebcMediaEditorSend({imageCount:t,editedImageCount:n,paintedImageCount:a,emojiLayerCount:r,stickerLayerCount:o,textLayerCount:i}).commit()}render(){const{mediaCollection:e}=this.props,{activeMedia:t}=this.state;let n,a=e.getPreviewableMedias();a.length>s.default.MAX_FILES&&(a=a.slice(0,s.default.MAX_FILES)),e.canSend()?t&&(n=this._getMediaBody(t)):n=(0,J.jsx)("div",{className:A.default.spinner,children:(0,J.jsx)(H.Spinner,{color:"highlight"},"processing")});const r=this.state.isDragging?(0,J.jsx)("div",{className:A.default.dropOverlay,children:(0,J.jsx)("div",{className:A.default.dropOverlayOutline,children:v.fbt._("Drag file here",null,{hk:"y9aHs"})})},"container"):null,o={enter:this._handleEnter,left:e=>this._handleArrowKey("left",e),right:e=>this._handleArrowKey("right",e)},i="*"===B.DOC_MIMES?"*":[B.IMAGE_MIMES].join();let l;if(null!=n){let t;if(a.length>0&&(t=(0,J.jsx)("div",{className:A.default.sendButton,tabIndex:"-1",ref:this._setRefSendButton,onKeyPress:e=>e.preventDefault(),children:(0,J.jsx)(G.default,{ariaLabel:v.fbt._("Send",null,{hk:"2JJUaP"}),large:!0,icon:(0,J.jsx)(q.default,{name:"send",directional:!0}),count:1===a.length?null:a.length,onClick:this._handleSendFromMediaEditor,disabled:!e.canSend()})})),"capture"===this.props.theme)l=(0,J.jsx)("div",{className:A.default.captureFooter,children:t});else{const e=!this.state.viewOnce&&!this.state.sendAsSticker&&a.length<s.default.MAX_FILES,n="add-alt",r=this.state.sendAsSticker?null:(0,J.jsx)(W.default,{className:(0,m.default)(A.default.addMediaButton,{[A.default.addMediaButtonDisabled]:!e}),disabled:!e,name:n,title:v.fbt._("Add file",null,{hk:"4Gvj3D"}),onClick:this._handleAddFileClick,"aria-label":v.fbt._("Add file",null,{hk:"4Gvj3D"})},"media-more");let o;a.length>0&&(o=(0,J.jsxs)(M.FlexRow,{className:A.default.filmstripContainer,justify:"center",align:"start",children:[this.getThumbs(),r]})),l=(0,J.jsxs)("div",{className:A.default.footer,children:[o,t]})}}const d=(0,m.default)(A.default.container,{[A.default.previewOnly]:t&&t.type!==ee});let u=(0,J.jsxs)(M.FlexColumn,{className:d,align:"stretch",children:[r,n,l,(0,J.jsx)("input",{ref:this._setRefFileInput,type:"file",accept:i,style:{display:"none"},onChange:this._handleFilePick,multiple:!0})]});return"attach"===this.props.theme&&(u=(0,J.jsx)(E.default,{theme:"media",onDrop:this._handleDrop,onDragChange:this._handleDragChange,children:(0,J.jsx)(k.default,{tabIndex:"-1",overflow:"hidden",onPaste:this._handlePaste,children:u})},"attach-image-modal")),(0,J.jsx)(I.HotKeys,{handlers:o,ref:this._setRefHotKeys,children:u})}}oe.defaultProps={onClose:()=>{},theme:"attach",sendAsSticker:!1},oe.displayName="MediaEditor";const ie=(0,Q.default)((0,D.ListenerHOC)(oe));function le(e){return new Promise(((t,n)=>{const a=new Image;a.onload=()=>{t(a)},a.onerror=n,a.src=e}))}function se(){return(se=(0,r.default)((function*(e){let t=e.rgbaBuffer;if(!t){const n=R.MediaBlobCache.get(e.filehash);if(!n)throw new Error("Failed to get media blob");const a=yield(0,u.blobToArrayBuffer)(n),r=(yield(0,Z.default)(a)).frames[0];if(!r)throw new Error("Failed to get sticker first frame.");t=r.rgbaBuffer}const n=e.fullWidth,a=e.fullHeight,r=document.createElement("canvas");r.width=n,r.height=a;const o=r.getContext("2d"),i=o.createImageData(n,a);return i.data.set(new Uint8Array(t)),o.putImageData(i,0,0),r}))).apply(this,arguments)}t.default=class extends ie{handleRequestDismiss(){return this.getComponent().handleRequestDismiss()}}},37793:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{onClose:t,item:n}=e;const{mimetype:a,fullPreview:s}=n;return(0,l.jsxs)("div",{className:i.default.container,children:[(0,l.jsx)(o.default,{onClose:t}),(0,l.jsx)(r.default,{mimeType:a,url:s})]})};var r=a(n(74252)),o=a(n(21454)),i=a(n(58099)),l=n(85893)},13057:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{data:t,rotation:n,cropOrigin:a,cropSize:g,containerSize:v,keepRatio:x,onCropChange:_,sendAsSticker:C}=e;const y=t.resetCropRotate().setRotation(n),b=(0,r.useRef)(),j=(0,r.useRef)(),{width:S,height:E}=g,{x:k,y:w}=a,T=(0,r.useRef)(g),M=S/T.current.width,P=E/T.current.height,I=t.width,O=t.height,{width:L,height:A}=p(I,O,n),D=new d.default({width:v.width-20,height:v.height-20}),R=(0,u.calculateContainScale)(n%180?O:I,n%180?I:O,D,f),N=h/R,B=new d.default({width:I+2*N,height:O+2*N}),{width:F,height:U}=p(B.width,B.height,n),G=B.width/2,H=B.height/2;(0,r.useEffect)((()=>{const e=b.current,t=j.current;var n;e&&t&&0===e.nodes().length&&(e.nodes([t]),null===(n=t.getLayer())||void 0===n||n.batchDraw())}));const z=e=>{const{target:t}=e,n=Math.round(t.x()),a=Math.round(t.y()),r=Math.min(Math.round(t.width()*t.scaleX()),I-n),o=Math.min(Math.round(t.height()*t.scaleY()),O-a);_(new l.default({x:n,y:a}),new d.default({width:r,height:o}))},W=["top-left","top-right","bottom-left","bottom-right"];x||W.push("top-center","middle-right","middle-left","bottom-center");return(0,c.jsxs)("div",{className:i.default.container,children:[(0,c.jsx)(o.default,{data:y,scale:R,canEditLayer:!1,style:{padding:h},outlineEnabled:C}),(0,c.jsx)(s.Stage,{className:i.default.cropperContainer,width:Math.round(F*R),height:Math.round(U*R),scaleX:R,scaleY:R,children:(0,c.jsx)(s.Layer,{rotation:n,offsetX:G,offsetY:H,x:F/2,y:U/2,children:(0,c.jsxs)(s.Group,{x:N,y:N,children:[(0,c.jsx)(s.Rect,{x:0,y:0,width:I,height:O,fill:"black",opacity:.6}),(0,c.jsx)(s.Rect,{ref:j,fill:"red",x:k,y:w,width:T.current.width,height:T.current.height,scaleX:M,scaleY:P,draggable:!0,dragBoundFunc:e=>{const{width:t,height:a}=p(S,E,n);let{x:r,y:o}=function(e,t,n,a,r){switch((r%360+360)%360){case 0:return{x:e,y:t};case 90:return{x:e-n,y:t};case 180:return{y:t-a,x:e-n};case 270:return{x:e,y:t-a};default:throw new Error("Unsupported angle")}}(e.x,e.y,t*R,a*R,n);r<h?r=h:(r-h)/R+t>L&&(r=Math.round(L-t+N)*R),o<h?o=h:(o-h)/R+a>A&&(o=Math.round(A-a+N)*R);return function(e,t,n,a,r){switch((r%360+360)%360){case 0:return{x:e,y:t};case 90:return{x:e+n,y:t};case 180:return{y:t+a,x:e+n};case 270:return{x:e,y:t+a};default:throw new Error("Unsupported angle")}}(r,o,t*R,a*R,n)},onTransformEnd:z,onDragEnd:z,globalCompositeOperation:"destination-out"}),(0,c.jsx)(s.Transformer,{ref:b,anchorStroke:"blue",anchorFill:"white",anchorSize:10,anchorCornerRadius:5,borderEnabled:!1,centeredScaling:!1,resizeEnabled:!0,rotateEnabled:!1,ignoreStroke:!0,boundBoxFunc:(e,t)=>{const a=I*R+20,r=O*R+20,o=m(e,a,r,n,-n),i=m(t,a,r,n,-n);return Math.round(i.x)<h?(i.x=h,i.width=o.width+(o.x-h)):Math.round(i.width)<20?(i.x=o.x,i.width=o.width):Math.round(i.x+i.width)>Math.round(a)-h&&(i.width=a-i.x-h),Math.round(i.y)<h?(i.y=h,i.height=o.height+(o.y-h)):Math.round(i.height)<20?(i.y=o.y,i.height=o.height):Math.round(i.y+i.height)>Math.round(r)-h&&(i.height=r-i.y-h),m(i,a,r,0,n)},keepRatio:x,enabledAnchors:W},"transformer")]})},"cropper")})]})};var r=n(67294),o=a(n(35344)),i=a(n(10706)),l=a(n(16186)),s=n(99282),d=a(n(46668)),u=n(79230),c=n(85893);const f=new d.default({width:200,height:200}),h=10;function p(e,t,n){return{width:n%180==0?e:t,height:n%180==0?t:e}}function m(e,t,n,a,r){const o=Math.max(t,n),i=p(t,n,a),s=(o-i.width)/2,d=(o-i.height)/2,u=new l.default({x:e.x+s,y:e.y+d}),c=new l.default({x:o/2,y:o/2}),f=u.rotate(c,r),h=p(t,n,a+r),m=(o-h.width)/2,g=(o-h.height)/2;return{x:f.x-m,y:f.y-g,width:e.width,height:e.height,rotation:e.rotation}}},50580:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;let{onClose:n,filename:a,filesize:h,fileExt:p,mimeType:m}=e;const g=null!=h?d.default.filesize(h):"",v=null!==(t=f.get(m))&&void 0!==t?t:"preview-generic";return(0,c.jsxs)("div",{className:s.default.container,children:[(0,c.jsx)(l.default,{onClose:n,filename:a}),(0,c.jsx)(i.FlexColumn,{className:o.default.body,align:"center",justify:"center",children:(0,c.jsxs)(i.FlexColumn,{className:o.default.previewContainer,align:"center",justify:"center",children:[(0,c.jsx)("div",{className:o.default.previewIcon,children:(0,c.jsx)(u.default,{name:v})}),(0,c.jsx)("div",{className:o.default.header,children:r.fbt._("No preview available",null,{hk:"3NAVbb"})}),(0,c.jsxs)("div",{className:o.default.metadata,children:[g,null!=p&&""!==p?` - ${p.toUpperCase()}`:null]})]})})]})};var r=n(48360),o=a(n(45134)),i=n(29623),l=a(n(21454)),s=a(n(58099)),d=a(n(14296)),u=a(n(23217)),c=n(85893);const f=new Map([["text/plain","preview-txt"],["text/rtf","preview-doc"],["application/msword","preview-doc"],["application/vnd.openxmlformats-officedocument.wordprocessingml.document","preview-doc"],["text/csv","preview-sheet"],["application/vnd.ms-excel","preview-sheet"],["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","preview-sheet"],["application/vnd.ms-powerpoint","preview-slides"],["application/vnd.openxmlformats-officedocument.presentationml.presentation","preview-slides"],["audio/aac","preview-audio"],["audio/mp4","preview-audio"],["audio/amr","preview-audio"],["audio/mpeg","preview-audio"],["audio/ogg; codecs=opus","preview-audio"],["audio/wav","preview-audio"],["application/zip","preview-compressed"]])},21454:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{filename:t,pageCount:n}=e;let a=null;null!=n&&n>0&&(a=i.default.t(138,{count:n,_plural:n}));return(0,s.jsxs)("div",{className:(0,o.default)(d),children:[(0,s.jsx)("button",{"aria-label":r.fbt._("Close",null,{hk:"17RE2w"}),onClick:e.onClose,className:(0,o.default)(h),children:(0,s.jsx)(l.default,{"aria-hidden":!0,color:"secondary",name:"x"})}),(0,s.jsxs)("div",{className:(0,o.default)(u),children:[t&&(0,s.jsx)("span",{className:(0,o.default)(c),children:t}),null!=a&&(0,s.jsx)("span",{className:(0,o.default)(f),children:a})]})]})};var r=n(48360),o=a(n(56720)),i=a(n(14296)),l=a(n(23217)),s=n(85893);const d={display:"p357zi0d",alignItems:"gndfcl4n",justifyContent:"o4u7okr9",minHeight:"cl7oiv0o",paddingTop:"fbgy3m38",paddingEnd:"l9g3jx6n",paddingBottom:"oq31bsqd",paddingStart:"lyvj5e2u",backgroundColor:"ej3x2ktq"},u={display:"p357zi0d",flexGrow:"ggj6brxn",flexShrink:"m0h2a7mj",flexBasis:"rjo8vgbg",flexDirection:"f8m0rgwh",alignItems:"gndfcl4n"},c={fontSize:"f8jlpxt4",color:"tl2vja3b"},f={marginTop:"hymafltn",fontSize:"dsh4tgtl",color:"pm5hny62"},h={cursor:"ajgl1lbb"}},87618:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{onClose:t,item:n}=e;const{mimetype:a,fullPreview:d,fullPreviewSize:u,documentPageCount:c,filename:f}=n;if(!(d&&u&&null!=c&&c>0))return(0,s.jsx)(o.default,{mimeType:n.mimetype,filesize:n.filesize,filename:n.filename,fileExt:n.fileExt,onClose:t});return(0,s.jsxs)("div",{className:l.default.container,children:[(0,s.jsx)(i.default,{onClose:t,filename:f,pageCount:c}),(0,s.jsx)(r.default,{fullPreview:d,fullPreviewSize:u,pageCount:c,showPageCount:!1,showBorder:!0,mimeType:a,filename:f})]})};var r=a(n(35137)),o=a(n(50580)),i=a(n(21454)),l=a(n(58099)),s=n(85893)},65235:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{attachMedia:t,onClose:n,chat:a,viewOnce:i,viewOnceDisabled:h,onCaptionChange:p,onEnter:m,setCaptionInputRef:g,onToggleViewOnce:v,onFiles:x}=e;const{caption:_}=(0,o.useModelValues)(t,["caption"]);return(0,c.jsxs)("div",{className:u.default.container,children:[(0,c.jsx)(d.default,{onClose:n}),(0,c.jsx)(l.default,{mimeType:t.mimetype,url:t.fullPreview,isGif:t.isGif,size:t.fullPreviewSize,processing:t.state===f,preview:t.preview}),(0,c.jsx)("div",{className:u.default.footer,children:(0,c.jsx)(s.default,{chat:a,caption:_,viewOnce:i,viewOnceDisabled:h,msgType:r.MSG_TYPE.VIDEO,theme:"video",onToggleViewOnce:v,onChange:p,onEnter:m,onFiles:x,setCaptionInputRef:e=>{g(t.id,e)}},t.id)})]})};var r=n(15461),o=n(35461),i=n(80666),l=a(n(84124)),s=a(n(69613)),d=a(n(21454)),u=a(n(91976)),c=n(85893);const{PROCESSING:f}=i.ATTACH_MEDIA_STATE},88262:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{children:t,onClick:n,icon:a,caret:d,disabled:u,title:c,selected:f}=e;let h,p;if("string"==typeof a)switch(a){case"sans-serif":h=(0,s.jsx)(l.default,{name:"panel-emoji-flags",display:"inline"});break;case"checked":h=(0,s.jsx)(l.default,{name:"checkmark",display:"inline"});break;case"unchecked":h=(0,s.jsx)(l.default,{name:"x",display:"inline"});break;default:a&&(h=(0,s.jsx)(l.default,{name:a,display:"inline"}))}else a&&(h=a);if(d)switch(d){case"up":p=(0,s.jsx)(l.default,{name:"chevron-down-alt",display:"inline",className:o.default.rotate});break;case"down":p=(0,s.jsx)(l.default,{name:"chevron-down-alt",display:"inline"})}return(0,s.jsxs)("div",{role:"button",tabIndex:"-1",onClick:n,className:(0,r.default)(o.default.container,e.className,{[o.default.disabled]:u,[o.default.selected]:f}),title:c,children:[h&&(0,s.jsx)(i.FlexRow,{align:"center",justify:"center",className:o.default.icon,children:h}),t&&(0,s.jsx)("span",{className:o.default.body,children:t}),p&&(0,s.jsx)("span",{className:o.default.caret,children:p})]})};var r=a(n(94184)),o=a(n(86382)),i=n(29623),l=a(n(23217)),s=n(85893)},66430:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(67294),o=a(n(88262)),i=a(n(76994)),l=a(n(31488)),s=a(n(29598)),d=n(60811),u=n(29623),c=a(n(14296)),f=n(18644),h=a(n(24717)),p=n(85893);function m(e,t){const{colors:n,onColorSelect:a,selectedColor:m}=e,[g,v]=(0,r.useState)(null),x=()=>{v(null)},_=()=>Boolean(g);(0,r.useImperativeHandle)(t,(()=>({isPanelVisible:_})));const C=n.map((e=>{let{primaryColor:t,secondaryColor:n}=e;return(0,p.jsx)(l.default,{primaryColor:t,onSelect:()=>a(t),selected:Boolean(m&&m.equals(t))},t.toString())}));let y=null;return g&&(y=(0,p.jsx)(f.UIE,{displayName:"ColorPicker",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:x,children:(0,p.jsx)(h.default,{contextMenu:g})})),(0,p.jsxs)("div",{className:i.default.container,children:[(0,p.jsx)(u.FlexRow,{className:i.default.colorChipsContainer,children:C}),(0,p.jsx)(o.default,{onClick:e=>{e.preventDefault(),e.stopPropagation();const t={menu:(0,p.jsx)(s.default,{onColorSelect:a,selectedColor:m,onColorPickerClose:x}),dirX:c.default.isRTL()?d.DirX.RIGHT:d.DirX.LEFT,dirY:d.DirY.BOTTOM,type:d.MenuType.ColorPicker,anchor:e.target};v(t)},caret:g?"down":"up"}),y]})}var g=(0,r.forwardRef)(m);t.default=g},31488:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{primaryColor:t,secondaryColor:n,onSelect:a,selected:s,withBorder:d}=e,[u,c]=(0,o.useState)(!1),[f,h]=(0,o.useState)(!1);return(0,l.jsx)("div",{onClick:a,onMouseEnter:()=>{c(!0)},onMouseLeave:()=>{c(!1)},onMouseDown:()=>{h(!0)},onMouseUp:()=>{h(!1)},className:(0,r.default)(i.default.colorButton,{[i.default.selected]:s,[i.default.hover]:u,[i.default.active]:f}),style:{backgroundColor:f&&!s?t.withAlpha(.2).toRgbaString():"transparent"},children:(0,l.jsx)("div",{className:(0,r.default)(i.default.primaryColorChip,{[i.default.colorChipWithBorder]:d&&t.isWhite(),[i.default.primaryColorChipMedium]:"medium"===e.theme}),style:{backgroundColor:t.toRgbaString()},children:n&&s&&(0,l.jsx)("div",{className:i.default.secondaryColorChip,style:{backgroundColor:n.toRgbaString()}})})})};var r=a(n(94184)),o=n(67294),i=a(n(88501)),l=n(85893)},60753:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{color:t,onColorPickerClose:n,onChangeColor:a}=e,p=(0,r.useRef)(null),[m,g]=(0,r.useState)(t.toHex());return(0,c.jsxs)("div",{className:(0,o.default)(f),style:{width:s.CONTAINER_WIDTH,height:s.INPUT_HEIGHT},children:[(0,c.jsx)(l.default,{withBorder:!0,primaryColor:t,selected:!1,theme:"medium"}),(0,c.jsx)(d.HotKeys,{handlers:{enter:n},children:(0,c.jsx)(u.SelectableDiv,{selectable:!0,children:(0,c.jsx)("input",{type:"text",ref:p,className:(0,o.default)(h),value:m,onChange:e=>{const t=e.target.value;if(g(t),!t||!(0,i.isValidHex)(t))return;const n=i.Color.fromHex(t);a(n)}})})})]})};var r=n(67294),o=a(n(56720)),i=n(16241),l=a(n(31488)),s=n(98254),d=n(29424),u=n(52596),c=n(85893);const f={alignItems:"gndfcl4n",boxSizing:"cm280p3y",display:"p357zi0d",justifyContent:"fhf7t426",minHeight:"t2ljgofx",paddingTop:"i5tg98hk",paddingEnd:"ft2m32mm",paddingBottom:"przvwfww",paddingStart:"nu34rnf1"},h={backgroundColor:"thr4l2wc",borderTop:"q4zabkcz",borderEnd:"jkanexlp",borderBottom:"thn59n0e",borderStart:"nsmrnv0a",color:"tviruh8d",fontSize:"bze30y65",lineHeight:"r5qsrrlp",outline:"gk6igrwd",paddingTop:"emrlamx0",paddingEnd:"ft2m32mm",paddingBottom:"aiput80m",paddingStart:"nu34rnf1"}},26162:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{color:t,onChangeSelectedColor:n,onChangeCanvasColor:a}=e,h=(0,r.useRef)(null),[p,m]=(0,r.useState)(!1);(0,r.useEffect)((()=>{const e=h.current;if(!e)return;const t=e.getContext("2d");let n=t.createLinearGradient(0,0,e.width,0);n.addColorStop(0,"#ff0000"),n.addColorStop(1/6,"#ffff00"),n.addColorStop(1/6*2,"#00ff00"),n.addColorStop(.5,"#00ffff"),n.addColorStop(1/6*4,"#0000ff"),n.addColorStop(1/6*5,"#ff00ff"),n.addColorStop(1,"#ff0000"),t.fillStyle=n,t.fillRect(0,0,e.width,e.height),n=t.createLinearGradient(0,0,0,e.height),n.addColorStop(0,"rgba(255, 255, 255, 1)"),n.addColorStop(.5,"rgba(255, 255, 255, 0)"),n.addColorStop(1,"rgba(255, 255, 255, 0)"),t.fillStyle=n,t.fillRect(0,0,e.width,e.height),n=t.createLinearGradient(0,0,0,e.height),n.addColorStop(0,"rgba(0, 0, 0, 0)"),n.addColorStop(.5,"rgba(0, 0, 0, 0)"),n.addColorStop(1,"rgba(0, 0, 0, 1)"),t.fillStyle=n,t.fillRect(0,0,e.width,e.height)}),[]);const g=(0,d.getPositionFromColor)(t),v=(0,i.default)(n,s.THROTTLE_WAIT_TIME),x=(e,t)=>{null!=t&&m(t);const{x:n,y:r}=(e=>{const t=h.current;if(!t)return{x:0,y:0};const n=t.getBoundingClientRect();let a=e.clientX-n.left,r=e.clientY-n.top;return a>n.width&&(a=n.width-.1),a<0&&(a=0),r>n.height&&(r=n.height),r<0&&(r=.1),a-=s.CURSOR_SIZE/2,r-=s.CURSOR_SIZE/2,{x:a,y:r}})(e),o=(e=>{const t=h.current;if(!t)return new l.Color(0,0,0);const n=e.x+s.CURSOR_SIZE/2,a=e.y+s.CURSOR_SIZE/2,r=t.getContext("2d").getImageData(n,a,1,1).data;return new l.Color(r[0],r[1],r[2])})({x:n,y:r});v(o),a(o)};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("canvas",{width:s.CONTAINER_WIDTH,height:s.CANVAS_HEIGHT,className:(0,o.default)(c),ref:h,onMouseDown:e=>{x(e,!0)},onMouseMove:e=>{p&&(e.stopPropagation(),e.preventDefault(),x(e))},onMouseUp:e=>{x(e,!1)}}),(0,u.jsx)("div",{className:(0,o.default)(f),style:{width:s.CURSOR_SIZE,height:s.CURSOR_SIZE,left:g.x,top:g.y,backgroundColor:t.toRgbaString()}})]})};var r=n(67294),o=a(n(56720)),i=a(n(90886)),l=n(16241),s=n(98254),d=n(73473),u=n(85893);const c={borderTopStartRadius:"llnowng2",borderTopEndRadius:"ap6veyk2",boxSizing:"cm280p3y",paddingTop:"i5tg98hk",paddingEnd:"f9ovudaz",paddingBottom:"przvwfww",paddingStart:"gx1rr48f",position:"g0rxnol2"},f={borderTop:"omlynucm",borderEnd:"a0tvyxpe",borderBottom:"se50n2qd",borderStart:"o8ek0a1j",borderTopStartRadius:"pap8jtso",borderTopEndRadius:"fptqv7l3",borderBottomEndRadius:"gygahxu2",borderBottomStartRadius:"hm7f711o",boxShadow:"aejjokna",boxSizing:"cm280p3y",cursor:"bx7g2weo",pointerEvents:"m62443ks",position:"lhggkp7q"}},98254:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.THROTTLE_WAIT_TIME=t.INPUT_HEIGHT=t.DEFAULT_COLOR=t.CURSOR_SIZE=t.CONTAINER_WIDTH=t.CONTAINER_HEIGHT=t.CANVAS_HEIGHT=void 0;var a=n(16241);t.CONTAINER_WIDTH=334;t.CONTAINER_HEIGHT=203;const r=150.22;t.CANVAS_HEIGHT=r;t.INPUT_HEIGHT=52.78;t.CURSOR_SIZE=20;const o=new a.Color(210,252,86);t.DEFAULT_COLOR=o;t.THROTTLE_WAIT_TIME=900},29598:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{selectedColor:t,onColorSelect:n}=e,[a,c]=(0,r.useState)(null!=t?t:s.DEFAULT_COLOR),f=e=>{c(e)},h=e=>{n(e)};return(0,d.jsxs)("div",{className:(0,o.default)(u),style:{width:s.CONTAINER_WIDTH,height:s.CONTAINER_HEIGHT},children:[(0,d.jsx)(l.default,{color:a,onChangeCanvasColor:f,onChangeSelectedColor:h}),(0,d.jsx)(i.default,{color:a,onChangeColor:e=>{f(e),h(e)},onColorPickerClose:e.onColorPickerClose})]})};var r=n(67294),o=a(n(56720)),i=a(n(60753)),l=a(n(26162)),s=n(98254),d=n(85893);const u={position:"g0rxnol2"}},30383:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.CropRotateToolbar=function(e){let{canReset:t,onRotateCanvas:n,onReset:a}=e;return(0,s.jsxs)(l.FlexRow,{className:i.default.container,children:[(0,s.jsx)(o.default,{className:i.default.rotateLeftButton,icon:"media-editor-rotate-left",title:r.fbt._("Rotate left",null,{hk:"2t86bC"}),onClick:()=>n(-90)}),(0,s.jsx)(o.default,{icon:"media-editor-rotate-right",title:r.fbt._("Rotate right",null,{hk:"XqQCf"}),onClick:()=>n(90)}),(0,s.jsx)(o.default,{onClick:a,disabled:!t,children:r.fbt._("Reset",null,{hk:"1aUuOP"})})]})};var r=n(48360),o=a(n(88262)),i=a(n(52418)),l=n(29623),s=n(85893)},66747:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.Font=void 0;var r=a(n(81109)),o=a(n(40436)),i=n(67294),l=a(n(88262)),s=n(29623),d=a(n(43384)),u=a(n(79563)),c=n(39581),f=n(18644),h=a(n(24717)),p=n(85893);function m(e,t){const{selectedFont:n,fonts:a,onFontSelect:r,onAlignmentSelect:s,selectedAlignment:m}=e,g=(0,i.useRef)(null),[x,_]=(0,i.useState)(null),C=()=>{_(null)},y=()=>Boolean(x);(0,i.useImperativeHandle)(t,(()=>({isMenuVisible:y})));const b=Boolean(x);let j;return x&&(j=(0,p.jsx)(f.UIE,{displayName:"MediaEditorFontDropdown",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:C,children:(0,p.jsx)(h.default,{contextMenu:x})})),(0,p.jsxs)("div",{ref:g,className:d.default.container,children:[(0,p.jsx)(l.default,{onClick:()=>{if(x)return;if(!g.current)return;const e=(0,p.jsx)(u.default,{fonts:a,selectedFont:n,selectedAlignment:m,onFontSelect:r,onAlignmentSelect:s});_({menu:e,anchor:g.current})},icon:(0,p.jsx)(v,{font:n}),selected:b,caret:b?"down":"up",children:(0,p.jsx)("span",{className:d.default.fontLabel,children:(0,c.getFontTranslation)(n)})}),(0,p.jsx)(o.default,{transitionName:"dropdown",children:j})]})}const g=(0,i.forwardRef)(m);function v(e){let{font:t}=e;return(0,p.jsx)(s.FlexRow,{className:d.default.icon,style:(0,r.default)({},(0,c.getFontStyle)(t)),justify:"center",align:"center",children:(0,p.jsx)("div",{"aria-hidden":"true",children:"A"})})}t.Font=g},79563:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onFontSelect:t,onAlignmentSelect:n,selectedFont:a,selectedAlignment:r}=e;(0,o.useEffect)((()=>{u.default.loadAllFonts()}),[]);const i=(e,n)=>{e.stopPropagation(),t(n)};return(0,h.jsxs)("div",{children:[e.fonts.map((e=>(0,h.jsx)(m,{font:e,isSelectedFont:a===e,onAction:i},e))),(0,h.jsx)(g,{selectedAlignment:r,onAction:(e,t)=>{e.stopPropagation(),n(t)}},"alignment")]})};var r=a(n(94184)),o=n(67294),i=n(71174),l=n(29623),s=a(n(48846)),d=a(n(16702)),u=a(n(99267)),c=n(39581),f=a(n(23217)),h=n(85893);const p=[{alignment:c.TextAlignment.LEFT,icon:"align-left"},{alignment:c.TextAlignment.CENTER,icon:"align-center"},{alignment:c.TextAlignment.RIGHT,icon:"align-right"}];function m(e){let t,{isSelectedFont:n,font:a,onAction:r}=e;n&&(t=(0,h.jsx)("span",{className:d.default.selected,children:(0,h.jsx)(f.default,{name:"checkmark",display:"inline"})}));const o=(0,c.getFontTranslation)(a);let l;switch(a){case c.FONTS.SANS_SERIF:l=d.default.sansSerif;break;case c.FONTS.SERIF:l=d.default.serif;break;case c.FONTS.NORICAN_REGULAR:l=d.default.noricanRegular;break;case c.FONTS.BRYNDAN_WRITE:l=d.default.bryndanWrite;break;case c.FONTS.OSWALD_HEAVY:l=d.default.oswaldHeavy}return(0,h.jsx)(i.DropdownItem,{action:e=>r(e,a),children:(0,h.jsxs)("div",{role:"button",className:d.default.item,style:(0,c.getFontStyle)(a),children:[(0,h.jsx)("span",{className:l,children:o}),t]})})}function g(e){let{selectedAlignment:t,onAction:n}=e;return(0,h.jsx)(l.FlexRow,{className:d.default.alignmentContainer,justify:"around",align:"center",children:p.map((e=>{let{alignment:a,icon:o}=e;return(0,h.jsx)(s.default,{children:(0,h.jsx)(i.DropdownItem,{action:e=>n(e,a),children:(0,h.jsx)(f.default,{name:o,className:(0,r.default)(d.default.alignmentIcon,{[d.default.alignmentIconSelected]:t})})})},o)}))})}},54277:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{selectedLayer:t,inPaintMode:n,inCropRotateMode:a,inTextEditingMode:_,inOutlineMode:C,canUndo:y,canRedo:b,onPaintSelect:j,onCropRotateSelect:S,onTextSelect:E,onEmojiSelect:k,onToggleEmojiPanel:w,onStickerSelect:T,onToggleStickerPanel:M,onOutlineSelect:P,onUndo:I,onRedo:O,showOutline:L}=e;const[A,D]=(0,i.useState)(),[R,N]=(0,i.useState)(),B=(0,i.useRef)({});B.current={inPaintMode:n,onEmojiSelect:k,onStickerSelect:T,onPaintSelect:j};const F=()=>{a?S():n?j():C&&P()},U=()=>{D(null),w(!1)},G=()=>{N(null),M(!1)};return(0,x.jsxs)(c.MenuBar,{theme:"media-editor",children:[L&&(0,x.jsx)(c.MenuBarItem,{icon:(0,x.jsx)(p.default,{name:"scissors"}),a8nText:"outline-button",title:o.fbt._("Outline",null,{hk:"47JwiV"}),onClick:e=>{e.preventDefault(),C||F(),P()},selected:C},"outline"),(0,x.jsx)(c.MenuBarItem,{icon:(0,x.jsx)(p.default,{name:"media-editor-emoji"}),a8nText:"emoji-button",title:o.fbt._("Emoji",null,{hk:"3f1gtD"}),onClick:e=>{e.preventDefault(),e.stopPropagation(),F();const t=(0,x.jsx)(s.EmojiPanel,{onEmoji:e=>{B.current.inPaintMode&&B.current.onPaintSelect(),B.current.onEmojiSelect(e),U()},onFocusNext:U,onFocusPrev:U});D({menu:t,dirY:l.DirY.TOP,type:l.MenuType.EmojiPicker,anchor:e.target}),w(!0)},selected:Boolean(A)||t instanceof d.ImageLayer&&t.isEmoji()},"emoji"),(0,x.jsx)(c.MenuBarItem,{icon:(0,x.jsx)(p.default,{name:"media-editor-sticker"}),a8nText:"sticker-button",title:o.fbt._("Sticker",null,{hk:"4342bb"}),onClick:e=>{e.preventDefault(),e.stopPropagation(),F();const t=e=>{B.current.inPaintMode&&B.current.onPaintSelect(),B.current.onStickerSelect(e),G()};let n;(0,r.isMDBackend)()?f.ServerProps.webServerStickerPanel&&(n=(0,x.jsx)(u.default,{onSticker:t,onFocusNext:G,onFocusPrev:G})):n=(0,x.jsx)(h.default,{onSticker:t,onFocusNext:G,onFocusPrev:G}),n&&(N({menu:n,dirY:l.DirY.TOP,type:l.MenuType.StickerPicker,anchor:e.target}),M(!0))},selected:Boolean(R)||t instanceof d.ImageLayer&&t.isSticker()},"sticker"),(0,x.jsx)(c.MenuBarItem,{icon:(0,x.jsx)(p.default,{name:"media-editor-text"}),a8nText:"text-button",title:o.fbt._("Text",null,{hk:"12XnGO"}),onClick:e=>{e.preventDefault(),F(),E()},selected:_||t instanceof m.TextLayer},"text"),(0,x.jsx)(c.MenuBarItem,{icon:(0,x.jsx)(p.default,{name:"media-editor-drawing"}),a8nText:"paint-button",title:o.fbt._("Paint",null,{hk:"U5v5P"}),onClick:e=>{e.preventDefault(),n||F(),j()},selected:n},"paint"),(0,x.jsx)(c.MenuBarItem,{icon:(0,x.jsx)(p.default,{name:"media-editor-crop-rotate"}),a8nText:"crop-rotate-button",title:o.fbt._("Crop & Rotate",null,{hk:"3WqVhk"}),onClick:e=>{e.preventDefault(),a||F(),S()},selected:a},"crop-rotate"),(0,x.jsx)(c.MenuBarItem,{icon:(0,x.jsx)(p.default,{name:"media-editor-undo"}),a8nText:"undo-button",title:o.fbt._("Undo",null,{hk:"12qsD9"}),disabled:!y,onClick:I},"undo"),(0,x.jsx)(c.MenuBarItem,{icon:(0,x.jsx)(p.default,{name:"media-editor-redo"}),a8nText:"redo-button",title:o.fbt._("Redo",null,{hk:"39SiUc"}),disabled:!b,onClick:O},"redo"),R&&(0,x.jsx)(g.UIE,{displayName:"StickerPicker",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:G,children:(0,x.jsx)(v.default,{contextMenu:R})}),A&&(0,x.jsx)(g.UIE,{displayName:"EmojiPicker",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:U,children:(0,x.jsx)(v.default,{contextMenu:A})})]})};var r=n(88555),o=n(48360),i=n(67294),l=n(60811),s=n(30424),d=n(39989),u=a(n(7380)),c=n(46346),f=n(64551),h=a(n(64894)),p=a(n(23217)),m=n(81829),g=n(18644),v=a(n(24717)),x=n(85893)},5807:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.OutlineToolbar=function(e){let{smoothing:t,onSmoothingToggle:n,canReset:a,onReset:u}=e;return(0,s.jsxs)(l.FlexRow,{children:[(0,s.jsx)(i.default,{className:(0,o.default)(d),icon:"outline-smooth",title:r.fbt._("Smooth",null,{hk:"4vwxxi"}),selected:t,onClick:()=>n(!0)}),(0,s.jsx)(i.default,{className:(0,o.default)(d),icon:"outline-straight",title:r.fbt._("Straight",null,{hk:"3KyC8d"}),selected:!t,onClick:()=>n(!1)}),(0,s.jsx)(i.default,{className:(0,o.default)(d),onClick:u,disabled:!a,children:r.fbt._("Reset",null,{hk:"1aUuOP"})})]})};var r=n(48360),o=a(n(56720)),i=a(n(88262)),l=n(29623),s=n(85893);const d={marginTop:"tt8xd2xn",marginEnd:"bugiwsl0",marginBottom:"mpdn4nr2",marginStart:"fooq7fky"}},77268:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{checked:t,onBackgroundToggle:n}=e;const a=(0,d.jsx)("div",{className:(0,r.default)(s.default.cirle,{[s.default.circleFilled]:t}),children:t?(0,d.jsx)("div",{className:s.default.checked,children:(0,d.jsx)(l.default,{name:"checkmark"})}):(0,d.jsx)("div",{className:s.default.unchecked})});return(0,d.jsx)(i.default,{icon:a,onClick:n,children:o.fbt._("Background",null,{hk:"3Y8odq"})})};var r=a(n(94184)),o=n(48360),i=a(n(88262)),l=a(n(23217)),s=a(n(89046)),d=n(85893)},9165:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=e.thicknesses.map(((t,n)=>(0,l.jsx)(s,{thickness:t,onThicknessSelect:e.onThicknessSelect,selectedThickness:e.selectedThickness},n)));return(0,l.jsx)("div",{className:o.default.container,children:t})};var r=a(n(94184)),o=a(n(60349)),i=n(54274),l=n(85893);function s(e){return(0,l.jsx)("div",{onClick:()=>e.onThicknessSelect(e.thickness),className:(0,r.default)(o.default.thicknessButton,{[o.default.selected]:e.selectedThickness&&e.selectedThickness===e.thickness}),children:(0,l.jsx)("div",{className:o.default.thicknessChip,style:{height:(0,i.getThicknessValue)(e.thickness),width:(0,i.getThicknessValue)(e.thickness)}})},e.thickness.toString())}},73473:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPositionFromColor=function(e){const t=e.toHsl(),n=a.CONTAINER_WIDTH*t.hue-a.CURSOR_SIZE/2,r=a.CANVAS_HEIGHT*(1-t.lightness)-a.CURSOR_SIZE/2;return{x:n,y:r}};var a=n(98254)},91788:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getPointFromGroup=function(e){return new r.default({x:e.target.x()-e.target.offsetX(),y:e.target.y()-e.target.offsetY()})},t.getPointFromStage=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!t)return new r.default({x:0,y:0});const{x:a,y:o}=t.getAbsoluteScale(),i=t.content.getBoundingClientRect();let l=e.clientX-i.left,s=e.clientY-i.top;n&&(l=Math.min(Math.max(0,l),i.width),s=Math.min(Math.max(0,s),i.height));return new r.default({x:l/a,y:s/o})},t.getRotationFromGroup=function(e){return e.target.rotation()},t.getScaleFromGroup=function(e){return e.target.scaleX()},t.isEventOnAnchor=function(e){var t,n;return null!==(t=null===(n=e.target.attrs.name)||void 0===n?void 0:n.includes("anchor"))&&void 0!==t&&t},t.isStageCorner=function(e,t){if(!t)return!1;const{x:n,y:a}=t.getAbsoluteScale(),{width:r,height:o}=t.content.getBoundingClientRect();return 0===e.x&&0===e.y||0===e.x&&e.y===o/a||e.x===r/n&&0===e.y||e.x===r/n&&e.y===o/a};var r=a(n(16186))},99282:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Circle",{enumerable:!0,get:function(){return a.Circle}}),Object.defineProperty(t,"Group",{enumerable:!0,get:function(){return a.Group}}),Object.defineProperty(t,"Image",{enumerable:!0,get:function(){return a.Image}}),Object.defineProperty(t,"Layer",{enumerable:!0,get:function(){return a.Layer}}),Object.defineProperty(t,"Line",{enumerable:!0,get:function(){return a.Line}}),Object.defineProperty(t,"Path",{enumerable:!0,get:function(){return a.Path}}),Object.defineProperty(t,"Rect",{enumerable:!0,get:function(){return a.Rect}}),Object.defineProperty(t,"Stage",{enumerable:!0,get:function(){return a.Stage}}),Object.defineProperty(t,"Text",{enumerable:!0,get:function(){return a.Text}}),Object.defineProperty(t,"Transformer",{enumerable:!0,get:function(){return a.Transformer}});var a=n(77201);n(7643),n(71298),n(27149),n(87339),n(75244),n(23787),n(29516)},79230:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateContainScale=function(e,t,n,a){if(0===e||0===t)return 1;if(!n.isEmpty()&&(e>n.width||t>n.height))return Math.min(n.width/e,n.height/t);if(!a.isEmpty()&&e<a.width&&t<a.height)return Math.min(a.width/e,a.height/t);return 1}},74252:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{mimeType:t,url:n}=e;return(0,o.jsx)("div",{className:r.default.container,"data-animate-attach-media":!0,children:(0,o.jsx)("div",{className:r.default.media,children:(0,o.jsx)("audio",{controls:!0,type:t,src:n})})})};var r=a(n(77046)),o=n(85893)},39414:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n;let{mimeType:a,filename:s}=e;const d=(0,r.default)(o.default.icon,null!==(t=null===(n=i.DOCUMENT_MIMETYPES[a])||void 0===n?void 0:n.icon)&&void 0!==t?t:"icon-doc-generic");return(0,l.jsx)("div",{className:o.default.container,"data-animate-attach-media":!0,children:(0,l.jsx)("div",{className:o.default.media,children:(0,l.jsxs)("div",{className:o.default.document,children:[(0,l.jsx)("div",{className:d}),(0,l.jsx)("div",{className:o.default.text,children:s})]})})})};var r=a(n(94184)),o=a(n(71003)),i=n(43257),l=n(85893)},84124:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let t,{mimeType:n,url:a,isGif:o,size:d,processing:m,preview:g}=e;switch(p[n].msgType){case"image":t=(0,h.jsx)("img",{alt:s.default.t(825),src:a,className:l.default.img});break;case"video":const e=o?{loop:!m,autoPlay:!m,muted:!1,controls:!1}:{},d=m?(0,h.jsx)("div",{className:l.default.spinner,children:(0,h.jsx)(c.Spinner,{color:c.colorOptions.white,size:50,stroke:3})}):null,u=g?(0,h.jsx)("img",{alt:s.default.t(825),className:l.default.staticPreview,src:`data:image/jpeg;base64,${g}`}):null,p=m?null:(0,h.jsx)(f.default,(0,r.default)((0,r.default)({controls:!0,controlsList:"nodownload nofullscreen",className:l.default.video},e),{},{src:a}));t=(0,h.jsxs)("div",{className:(0,i.default)(l.default.img,l.default.videoContainer),children:[d,p,u]});break;case"audio":t=(0,h.jsx)("audio",{controls:!0,className:l.default.audio,type:n,src:a})}return(0,h.jsx)("div",{className:l.default.container,"data-animate-attach-media":!0,children:(0,h.jsx)("div",{className:l.default.media,children:(0,h.jsx)(u.default,{type:"scaleDown",size:d,children:t})})})};var r=a(n(81109)),o=a(n(35937)),i=a(n(94184)),l=a(n(58523)),s=a(n(14296)),d=n(43257),u=a(n(11791)),c=n(11054),f=a(n(23425)),h=n(85893);const p=(0,o.default)(d.MIMETYPES,(e=>"image"===(null==e?void 0:e.msgType)||"video"===(null==e?void 0:e.msgType)))},35137:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{fullPreview:t,fullPreviewSize:n,pageCount:a,mimeType:u,filename:c,showPageCount:f=!0,showBorder:h=!1}=e;if(t&&n&&null!=a&&a>0){const e=l.default.t(138,{count:a,_plural:a});return(0,d.jsxs)("div",{className:i.default.container,"data-js-attach-preview":!0,children:[(0,d.jsx)("div",{className:i.default.preview,children:(0,d.jsx)(s.default,{type:"scaleDown",size:n,children:(0,d.jsx)("img",{alt:l.default.t(825),src:t,className:(0,r.default)(i.default.img,{[i.default.imgBorder]:h})})})}),f&&(0,d.jsx)("div",{className:i.default.caption,children:e})]})}return(0,d.jsx)(o.default,{mimeType:u,filename:c})};var r=a(n(94184)),o=a(n(39414)),i=a(n(53519)),l=a(n(14296)),s=a(n(11791)),d=n(85893)},75680:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{disabled:t,isOn:n,mediaType:a,onChange:x,noMargin:_}=e;const[C,y]=(0,c.default)(l.NUX.EPHEMERAL_VIEW_ONCE);return(0,u.useEffect)((()=>{if(!n)return;if(C){const e=(0,g.jsx)(f.default,{onOkClick:()=>{y(),o.ModalManager.close()}});return void o.ModalManager.open(e)}const e=a===i.MSG_TYPE.VIDEO?d.fbt._("Video set to view once",null,{hk:"2L7ZJW"}):d.fbt._("Photo set to view once",null,{hk:"1jN7IR"}),t=(0,p.genId)("view-once-toast"),r=(0,g.jsx)(p.Toast,{msg:e,id:t});return s.ToastManager.open(r),()=>{s.ToastManager.close(t)}}),[C,y,a,n]),(0,g.jsx)(m.default,{a8nText:r.default.key("view-once-toggle"),xstyle:[v.btnViewOnce,_&&v.btnNoMargin,t&&v.btnDisabled],disabled:t,onClick:()=>x(!n),"aria-pressed":n,children:(0,g.jsx)(h.default,{"aria-label":n?d.fbt._("Turn off view once",null,{hk:"3cl8Dn"}):d.fbt._("Turn on view once",null,{hk:"3pd2lD"}),name:n?"view-once-media-select-on":"view-once-media-select",height:26,width:26})})};var r=a(n(99964)),o=n(14597),i=n(15461),l=n(71579),s=n(94816),d=n(48360),u=n(67294),c=(a(n(56720)),a(n(59732))),f=a(n(22594)),h=a(n(23217)),p=n(50452),m=a(n(1784)),g=n(85893);const v={btnViewOnce:{display:"f804f6gw",marginTop:"c46o30wg",marginEnd:"bugiwsl0",marginStart:"eab7llgz",color:"svlsagor"},btnNoMargin:{marginTop:"tt8xd2xn",marginEnd:"jnwc1y2a",marginBottom:"mpdn4nr2",marginStart:"svoq16ka"},btnDisabled:{cursor:"h2qzpyga",opacity:"notw83rv"}}},22594:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onOkClick:t}=e;return(0,p.jsx)(l.default,{onOK:t,cancelText:c.default.t(397),onCancel:()=>{(0,s.openExternalLink)((0,r.getViewOnceFaqUrl)())},children:(0,p.jsxs)(d.FlexColumn,{children:[(0,p.jsx)(u.default,{xstyle:m.graphic,align:"center",children:(0,p.jsx)(f.default,{name:"view-once-sender-nux",width:195,height:177})}),(0,p.jsx)(h.TextHeader,{className:(0,i.default)(m.text),theme:"popup-title",children:o.fbt._("Send photos and videos that can be viewed only once",null,{hk:"t5MUO"})}),(0,p.jsx)(h.TextParagraph,{className:(0,i.default)(m.text),color:"secondary",children:o.fbt._("For more privacy, your photo or video will disappear from the chat after the recipient opens it once. Remember, people can always take screenshots.",null,{hk:"Y4e8s"})})]})})};var r=n(21310),o=n(48360),i=a(n(56720)),l=a(n(52665)),s=n(12591),d=n(29623),u=a(n(48846)),c=a(n(14296)),f=a(n(23217)),h=n(13923),p=n(85893);const m={text:{marginBottom:"or9x5nie"},graphic:{marginBottom:"t4zgqcuo"}}},9237:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{chat:t}=e;const[n,a]=(0,d.useState)(""),[j,k]=(0,d.useState)([{name:"",key:S()},{name:"",key:S()}]),w=(0,d.useRef)(new Map),T=(0,i.getMaxPollOptionCount)(),M=e=>{var t;const n=j[e];n&&(null===(t=w.current.get(n.key))||void 0===t||t.restoreFocus())};return(0,y.jsx)(v.Modal,{type:v.ModalTheme.Tower,children:(0,y.jsxs)(p.default,{children:[(0,y.jsx)(g.DrawerHeader,{title:s.fbt._("Create Poll",null,{hk:"2ScJhR"}),type:g.DRAWER_HEADER_TYPE.POPUP,onCancel:()=>l.ModalManager.close()}),(0,y.jsx)(m.default,{children:(0,y.jsx)(u.DndProvider,{backend:c.HTML5Backend,children:(0,y.jsxs)("div",{className:(0,f.default)(b.bodyContainer),children:[(0,y.jsx)("h2",{className:(0,f.default)(b.sectionTitle),children:s.fbt._("Question",null,{hk:"rWgSd"})}),(0,y.jsx)(C.TextInput,{a8n:"poll-question-input",focusOnMount:!0,hideFloatingLabel:!0,showRemaining:!0,supportsEmoji:!0,value:n,error:"",maxLength:(0,i.getMaxPollNameLength)(),onChange:e=>{a(e)},onEnter:()=>{},placeholder:s.fbt._("Type your poll question",null,{hk:"2eDguE"})}),(0,y.jsx)("h2",{className:(0,f.default)(b.sectionTitle,b.optionsSection),children:s.fbt._("Options",null,{hk:"x7mkv"})}),(0,y.jsx)("div",{className:(0,f.default)(b.optionsContainer),children:j.map(((e,t)=>(0,y.jsx)(x.PollOptionInput,{option:e,index:t,onTextInputRef:t=>{t?w.current.set(e.key,t):w.current.delete(e.key)},onChange:n=>{const a=[...j];a[t]=(0,r.default)((0,r.default)({},e),{},{name:n}),k(function(e,t){if(e.length<2||e.length<t&&""!==e[e.length-1].name)return[...e,{name:"",key:S()}];return e}(a,T))},onKeyDown:n=>{if(""!==e.name)return!1;switch(n.key){case o.KEYBOARD_EVENT_KEY_VALUE.BACKSPACE:M(t-1),k(E(j,e));break;case o.KEYBOARD_EVENT_KEY_VALUE.DELETE:M(t+1),k(E(j,e))}return!1},onBlur:()=>{k(E(j,e))},onMoveOption:(e,t)=>{const n=j[e],a=j[t],r=[...j];r[e]=a,r[t]=n,k(r)}},e.key)))}),(0,y.jsx)("h3",{className:(0,f.default)(b.maxOptionsHint,j.length>=T&&b.maxOptionsHintHidden),style:{visibility:j.length>=T?"initial":"hidden"},children:s.fbt._({"*":"You can add up to {option} options.",_1:"You can add up to 1 option."},[s.fbt._plural(T,"option")],{hk:"3le0rL"})}),(0,y.jsx)("div",{className:(0,f.default)(b.createPollButtonContainer),children:(0,y.jsx)(h.default,{onClick:()=>{(0,_.sendPollCreation)({name:n,options:j.filter((e=>""!==e.name.trim())).map((e=>{let{name:t}=e;return{name:t}}))},t),l.ModalManager.close()},type:"primary",children:s.fbt._("Create Poll",null,{hk:"2WVyUA"})})})]})})})]})})};var r=a(n(81109)),o=n(38069),i=n(8139),l=n(14597),s=n(48360),d=n(67294),u=n(55480),c=n(45418),f=a(n(56720)),h=a(n(39770)),p=a(n(60453)),m=a(n(69637)),g=n(94790),v=n(57224),x=n(36947),_=n(36350),C=n(90011),y=n(85893);const b={bodyContainer:{boxSizing:"cm280p3y",width:"nhajnb67",minHeight:"ns2zzj6h",paddingTop:"byg5ndfj",paddingStart:"lyvj5e2u",paddingEnd:"l9g3jx6n"},sectionTitle:{fontSize:"iqrewfee",fontWeight:"nbipi2bn"},optionsSection:{marginTop:"bddvio20"},maxOptionsHint:{fontSize:"ovllcyds"},maxOptionsHintHidden:{visibility:"kojwoqec"},createPollButtonContainer:{width:"ln8gz9je",marginTop:"ignnouf6",display:"p357zi0d",justifyContent:"kcgo1i74"},optionsContainer:{maxHeight:"ml3td4pu",overflowX:"i44ccddp",overflowY:"ag5g9lrv",marginTop:"kiiy14zj"}};let j=0;function S(){const e=j.toString();return j++,e}function E(e,t){return""!==t.name?e:e.filter(((n,a)=>n!==t||a===e.length-1))}},72758:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const[e,t]=(0,i.default)(r.getAutoDownloadPhotos,r.setAutoDownloadPhotos),[n,a]=(0,i.default)(r.getAutoDownloadAudio,r.setAutoDownloadAudio),[u,c]=(0,i.default)(r.getAutoDownloadVideos,r.setAutoDownloadVideos),[f,h]=(0,i.default)(r.getAutoDownloadDocuments,r.setAutoDownloadDocuments);return(0,d.jsxs)(l.SettingsCheckList,{children:[(0,d.jsx)(l.SettingsCheckListItem,{a8nText:"option-photos",id:"photos",checked:e,onChange:t,children:o.fbt._("Photos",null,{hk:"4wPArA"})}),(0,d.jsx)(l.SettingsCheckListItem,{a8nText:"option-audio",id:"audio",checked:n,onChange:a,children:o.fbt._("Audio",null,{hk:"eXaYA"})}),(0,d.jsx)(l.SettingsCheckListItem,{a8nText:"option-videos",id:"videos",checked:u,onChange:c,children:o.fbt._("Videos",null,{hk:"4yB3QY"})}),(0,d.jsx)(l.SettingsCheckListItem,{a8nText:"option-documents",id:"documents",checked:f,onChange:h,children:o.fbt._("Documents",null,{hk:"1UBrPi"})}),(0,d.jsx)(l.SettingsCheckListSection,{children:(0,d.jsx)(s.TextDiv,{theme:"muted",children:o.fbt._("Voice Messages are always automatically downloaded for the best communication experience",null,{hk:"jmuCZ"})})})]})};var r=n(55452),o=n(48360),i=a(n(27698)),l=n(40015),s=n(13923),d=n(85893)},10403:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{labelId:t,onAddLabel:n,onUpdateLabel:a,onCancel:_}=e,C=(0,l.default)((()=>t?c.LabelCollection.assertGet(t):void 0)),[y,b]=(0,i.useState)((()=>{var e;return(null===(e=C.current)||void 0===e?void 0:e.color)||void 0})),[j,S]=(0,i.useState)((()=>{var e;return(null===(e=C.current)||void 0===e?void 0:e.name)||""})),[E,k]=(0,i.useState)(void 0),w=e=>{let t=!0,n=null;return e&&""!==e.trim()||(t=!1),C.current&&C.current.name===e||0===c.LabelCollection.where({name:e}).length||(t=!1,n=o.fbt._("Label name already exists",null,{hk:"3du3mm"})),{passed:t,error:n}};(0,i.useEffect)((()=>{n?(c.LabelCollection.getNewLabelColor().then((e=>{b(e||"#d6d7d7")})),(0,h.logLabelOperationEvent)(m.default.LABEL_OPERATIONS.VIEW,1,m.default.LABEL_TARGETS.ADD_LABEL_DIALOG)):a&&(0,h.logLabelOperationEvent)(m.default.LABEL_OPERATIONS.VIEW,1,m.default.LABEL_TARGETS.EDIT_LABEL_DIALOG)}),[]);const T=()=>{if(E)return;(0,h.logLabelOperationEvent)(m.default.LABEL_OPERATIONS.CLICK_POSITIVE,1,n?m.default.LABEL_TARGETS.ADD_LABEL_DIALOG:m.default.LABEL_TARGETS.EDIT_LABEL_DIALOG);const e=j&&j.trim(),o=w(e||"");o.passed?(t&&a?a({id:t,color:y,name:j},f.LABEL_PROPERTIES.NAME):null==n||n(j||"",y),_?_():r.ModalManager.close()):k(o.error)},M=!w(j.trim()).passed;return(0,x.jsx)(d.default,{title:e.onUpdateLabel?o.fbt._("Edit label",null,{hk:"3QX44B"}):o.fbt._("Add new label",null,{hk:"2JFfTv"}),okText:o.fbt._("OK",null,{hk:"2KEeHb"}),onOK:T,okDisabled:M,onCancel:()=>{(0,h.logLabelOperationEvent)(m.default.LABEL_OPERATIONS.CLICK_NEGATIVE,1,n?m.default.LABEL_TARGETS.ADD_LABEL_DIALOG:m.default.LABEL_TARGETS.EDIT_LABEL_DIALOG),_?_():r.ModalManager.close()},children:(0,x.jsxs)("div",{className:s.default.inputContainer,children:[(0,x.jsx)("div",{className:s.default.label,children:y?(0,p.renderLabelSvg)((0,u.intColorToHex)(y)):(0,x.jsx)(g.Spinner,{stroke:5,size:20})}),(0,x.jsx)("div",{className:s.default.input,children:(0,x.jsx)(v.TextInput,{a8n:"add-new-label-name-input",focusOnMount:!0,hideFloatingLabel:!0,showRemaining:!0,supportsEmoji:!0,value:j,error:E,maxLength:100,onChange:e=>{const t=w(e);S(e),k(t.passed?void 0:t.error)},onEnter:e=>{e.stopPropagation(),T()},placeholder:o.fbt._("New label",null,{hk:"33ueym"})})})]})})};var r=n(14597),o=n(48360),i=n(67294),l=a(n(16223)),s=a(n(10160)),d=a(n(52665)),u=n(8803),c=n(16770),f=n(59846),h=n(50047),p=n(84543),m=a(n(11339)),g=n(11054),v=n(90011),x=n(85893)},43318:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{product:t,sessionId:n}=e,[a,b]=(0,u.useState)(!1),[j,S]=(0,u.useState)(!1),[E,k]=(0,u.useState)(""),w=()=>{l.ModalManager.close()};if(j)return(0,y.jsx)(c.default,{title:d.fbt._("Request review",null,{hk:"1Rp2pL"}),onOK:w,children:(0,y.jsx)(x.TextDiv,{children:d.fbt._("We will review the item and if it meets our guidelines, it will be added to your catalog.",null,{hk:"4tmhbu"})})});const T=E.length<1||a;return(0,y.jsx)(c.default,{title:d.fbt._("Request review",null,{hk:"1Rp2pL"}),onOK:()=>{(0,h.logAppealProductCatalogClick)(n),b(!0);let e=!0;g.QPL.markerStart(v.QuickLogMarkerId.WHATSAPP_PRODUCT_APPEAL),(0,p.appealProduct)(t.id.toString(),E).then((()=>{t.canAppeal=!1,t.reviewStatus=m.PRODUCT_REVIEW_STATUS.PENDING,(0,h.logAppealProductCatalogSuccess)(n),b(!1),S(!0),e=!1,g.QPL.markerEnd(v.QuickLogMarkerId.WHATSAPP_PRODUCT_APPEAL,g.QuickLogActionType.SUCCESS)})).catch((0,r.filteredCatch)(o.ServerStatusCodeError,(e=>{s.ToastManager.open((0,y.jsx)(C.Toast,{msg:d.fbt._("Failed to send review request.",null,{hk:"1MNBtG"}),id:(0,C.genId)("catalog_appeal_submission_failed")})),(0,h.logAppealProductCatalogFailed)(n,e.status),b(!1)}))).finally((()=>{e&&g.QPL.markerEnd(v.QuickLogMarkerId.WHATSAPP_PRODUCT_APPEAL,g.QuickLogActionType.FAIL)}))},onCancel:w,okDisabled:T,children:(0,y.jsxs)("form",{children:[(0,y.jsx)(_.TextInput,{a8n:"confirm-popup-text-input",placeholder:d.fbt._("Enter reason for this request...",null,{hk:"49sHMz"}),onChange:e=>{k(e)},value:E,maxLength:1e3}),(0,y.jsx)(f.ExternalLink,{href:i.default.WA_COMMERCE_POLICY_URL,children:d.fbt._("Learn more",null,{hk:"2S4fxr"})})]})})};var r=n(50796),o=n(92574),i=a(n(64369)),l=n(14597),s=n(94816),d=n(48360),u=n(67294),c=a(n(52665)),f=n(12591),h=n(77975),p=n(96519),m=n(5641),g=n(48870),v=n(27798),x=n(13923),_=n(90011),C=n(50452),y=n(85893)},44090:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,c.jsx)(d.default,{onCancel:()=>r.ModalManager.close(),onConfirm:t=>{const{chat:n,sessionId:a}=e;(0,s.qplStartProductSendMessage)("Attachment",t.length);const o=t.map(((e,t)=>{const r=0===t?n.composeQuotedMsg:null;return n.sendProductMessage(e,r).then((()=>{(0,l.logProductMessageSent)({product:e,catalogSessionId:a})}))}));(0,s.qplEndProductMessageSend)(Promise.all(o)),n.composeQuotedMsg=null,r.ModalManager.close()},onShare:t=>{const{chat:n,sessionId:a}=e,s=(0,u.createCatalogLink)(t.id.user),d=o.fbt._("Follow this link to view our catalog on WhatsApp: {catalogUrl}",[o.fbt._param("catalogUrl",s)],{hk:"2XU3Oe"}).toString();i.ComposeBoxActions.paste(n,d),(0,l.logSendCatalogClick)({catalogOwnerWid:t.id,catalogSessionId:a}),r.ModalManager.close()}})};var r=n(14597),o=n(48360),i=n(88172),l=n(77975),s=n(24064),d=a(n(5537)),u=n(82482),c=n(85893)},22635:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(14597),o=n(48360),i=n(27105),l=a(n(52665)),s=n(85893);var d=()=>{r.ModalManager.open((0,s.jsx)(l.default,{okText:o.fbt._("OK",null,{hk:"2KEeHb"}),onOK:()=>r.ModalManager.close(),children:(0,s.jsx)(i.ComplianceInfoHelpCenterBanner,{})}))};t.default=d},48517:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(14597),o=n(48360),i=a(n(52665)),l=n(85893);var s=e=>{r.ModalManager.open((0,l.jsx)(i.default,{title:o.fbt._("Information accuracy",null,{hk:"1IkKdC"}),okText:o.fbt._("OK",null,{hk:"2KEeHb"}),onOK:()=>{null==e||e(),r.ModalManager.close()},cancelText:o.fbt._("Go back",null,{hk:"3k17TN"}),onCancel:()=>r.ModalManager.close(),children:(0,l.jsxs)(l.Fragment,{children:[o.fbt._("By continuing, you confirm that all information you have provided is correct and current.",null,{hk:"3VB7Ib"}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),o.fbt._("You are required by law to update this info on WhatsApp if it ever changes.",null,{hk:"3FF6ZU"})]})}))};t.default=s},76419:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const n=(0,d.default)(),[a,i]=(0,s.useState)(null===(t=p.LabelCollection.labelColorPalette)||void 0===t?void 0:t.colors);(0,s.useEffect)((()=>{(0,o.default)(p.LabelCollection.getLabelColorPalette(),n).then((e=>{i(e)})).catch((0,r.catchAbort)((()=>{})))}),[]);let h=(0,_.jsx)(v.Spinner,{stroke:6,size:24});a&&(h=(0,_.jsx)(y,{labelId:e.labelId,onBack:e.onClose,onUpdateColor:e.onUpdateColor,colors:a,currentColor:e.currentColor}));return(0,_.jsxs)(u.default,{children:[(0,_.jsx)(f.DrawerHeader,{title:l.fbt._("Choose color",null,{hk:"16haXO"}),onBack:e.onClose,type:f.DRAWER_HEADER_TYPE.LARGE}),(0,_.jsx)(c.default,{children:(0,_.jsx)("div",{className:m.default.container,children:h})})]})};var r=n(89385),o=a(n(47259)),i=a(n(94184)),l=n(48360),s=n(67294),d=a(n(3409)),u=a(n(60453)),c=a(n(69637)),f=n(94790),h=n(8803),p=n(16770),m=a(n(56126)),g=n(59846),v=n(11054),x=a(n(23217)),_=n(85893);function C(e){const{onUpdateColor:t,labelId:n,colorInt:a,onBack:r}=e,[o,l]=(0,s.useState)(!1),d=e.isSelected?(0,_.jsx)(x.default,{name:"checkmark-medium"}):null,u=()=>{o||l(!0)},c=(0,i.default)(m.default.wallpaperColorCanvas,{[m.default.canvasHover]:o,[m.default.canvasActive]:e.isSelected});return(0,_.jsx)("span",{className:c,style:{backgroundColor:(0,h.intColorToHex)(e.colorInt)},onMouseOver:u,onMouseEnter:u,onMouseLeave:()=>{o&&l(!1)},onClick:()=>{t({id:n,color:a},g.LABEL_PROPERTIES.COLOR),r()},children:d})}function y(e){const{currentColor:t,colors:n}=e,a=n.map((n=>(0,_.jsx)(C,{onUpdateColor:e.onUpdateColor,colorInt:n,onBack:e.onBack,labelId:e.labelId,isSelected:t===n},n)));for(let e=0;e<2;e++)a.push((0,_.jsx)("div",{className:m.default.wallpaperColorEmpty},"emptyEl"+e));return a}},19446:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onDeleteLabel:t}=e,[n,a]=(0,s.useState)(0),j=(0,d.default)((()=>new i.default([],(e=>e.id))));(0,s.useEffect)((()=>{(0,g.logLabelOperationEvent)(v.default.LABEL_OPERATIONS.VIEW,void 0,v.default.LABEL_TARGETS.LABELS_SCREEN)}),[]);const S=()=>{const e=j.current.getSelected();(0,g.logLabelOperationEvent)(v.default.LABEL_OPERATIONS.VIEW,e.length,v.default.LABEL_TARGETS.DELETE_LABEL_DIALOG),o.ModalManager.open((0,b.jsx)(u.default,{okText:l.fbt._("Yes",null,{hk:"12b9aE"}),cancelText:l.fbt._("No",null,{hk:"4G38V6"}),onCancel:()=>{(0,g.logLabelOperationEvent)(v.default.LABEL_OPERATIONS.CLICK_NEGATIVE,1,v.default.LABEL_TARGETS.DELETE_LABEL_DIALOG),o.ModalManager.close()},onOK:()=>{(0,g.logLabelOperationEvent)(v.default.LABEL_OPERATIONS.CLICK_POSITIVE,1,v.default.LABEL_TARGETS.DELETE_LABEL_DIALOG),(e=>{o.ModalManager.close(),j.current.unsetAll(),t(e)})(e)},children:p.default.t(226,{_plural:e.length})}))},E=()=>{j.current.unsetAll(),a(0)};let k=null;k=n>0?(0,b.jsx)(x.default,{selectedModels:j.current,onCancel:E,onDelete:S,theme:"drawer-header"}):(0,b.jsx)(h.DrawerHeader,{title:l.fbt._("Labels",null,{hk:"t1hII"}),onBack:e.onClose,type:h.DRAWER_HEADER_TYPE.LARGE});const w=(0,r.canEditLabel)()&&(0,b.jsx)("div",{className:m.default.addLabelBtContainer,children:(0,b.jsx)(C.Round,{large:!0,onClick:e.openAddLabel,children:(0,b.jsx)(y.default,{name:"plus-large"})})});return(0,b.jsxs)(c.default,{theme:"settings",children:[k,(0,b.jsx)(f.default,{children:(0,b.jsx)(_.default,{shouldScrollIntoViewAndSelect:()=>({shouldScrollIntoView:!0,shouldSelect:!1}),selectedLabels:j.current,renderContext:"label-list",onMultiSelect:()=>{const e=j.current.getSelected().length;a(e)},onLabelClick:e.onLabelClick})}),w]})};var r=n(8139),o=n(14597),i=a(n(78931)),l=n(48360),s=n(67294),d=a(n(16223)),u=a(n(52665)),c=a(n(60453)),f=a(n(69637)),h=n(94790),p=a(n(14296)),m=a(n(32976)),g=n(50047),v=a(n(11339)),x=a(n(63538)),_=a(n(67901)),C=n(82857),y=a(n(23217)),b=n(85893)},41885:(e,t,n)=>{"use strict";var a=n(95318);t.Z=function(e){const{labelId:t,openLabelColorDrawer:n,onEditLabel:a,onRemoveLabel:r}=e,v=(0,d.default)(),x=(0,u.default)((()=>new i.default([],(e=>e.id.toString())))).current;(0,c.useListener)(x,"all",(()=>v())),(0,s.useEffect)((()=>{(0,y.logLabelOperationEvent)(S.default.LABEL_OPERATIONS.VIEW,void 0,S.default.LABEL_TARGETS.LABEL_DETAILS_SCREEN)}),[]);const j=()=>{x.unsetAll()},T=()=>{const e=x.getSelected();(0,y.logLabelOperationEvent)(S.default.LABEL_OPERATIONS.CLICK_NEGATIVE,e.length,S.default.LABEL_TARGETS.BULK_UNLABEL_DIALOG),o.ModalManager.close()},I=(e=>{let t,n;for(let a=0;a<e.length;a++){if(e[a]instanceof k.Msg?n=!0:t=!0,t&&n)return!0}return!1})(x.getSelected()),O=x.getSelected().length>0?(0,M.jsx)(E.default,{labelEditEnabled:!I,onRemoveLabel:()=>{const e=x.getSelected();if(!r)return;const n=C.LabelCollection.assertGet(t);(0,y.logLabelOperationEvent)(S.default.LABEL_OPERATIONS.VIEW,e.length,S.default.LABEL_TARGETS.BULK_UNLABEL_DIALOG),o.ModalManager.open((0,M.jsx)(h.default,{title:_.default.t(557,{count:e.length,labelName:n.name,_plural:e.length}),okText:l.fbt._("OK",null,{hk:"2KEeHb"}),cancelText:l.fbt._("Cancel",null,{hk:"H0gNq"}),onCancel:T,onOK:()=>((e,t)=>{o.ModalManager.close(),j(),r(e,t),(0,y.logLabelOperationEvent)(S.default.LABEL_OPERATIONS.CLICK_POSITIVE,t.length,S.default.LABEL_TARGETS.BULK_UNLABEL_DIALOG)})(t,e)}))},selectedModels:x,onCancel:j,theme:"drawer-header"}):(0,M.jsx)(g.DrawerHeader,{onBack:e.onClose,menu:(0,M.jsx)(P,{openColorPicker:()=>{const e=C.LabelCollection.assertGet(t);n(t,e.color)},openEditLabel:()=>{null==a||a(t)}}),type:g.DRAWER_HEADER_TYPE.LABELS,children:(0,M.jsx)(b.Labels,{labels:[e.labelId],renderAsCircle:!0,showName:!0,theme:"drawer-title"})});return(0,M.jsxs)(p.default,{theme:"settings",children:[O,(0,M.jsx)(m.default,{children:(0,M.jsx)(f.default,{hideMultiSelectBar:!0,multiSelection:x,labelFilter:e.labelId,settings:w.default,selectable:!0})})]})};var r=n(8139),o=n(14597),i=a(n(78931)),l=n(48360),s=n(67294),d=a(n(59312)),u=a(n(16223)),c=n(87550),f=a(n(47488)),h=a(n(52665)),p=a(n(60453)),m=a(n(69637)),g=n(94790),v=n(60811),x=n(71174),_=a(n(14296)),C=n(16770),y=n(50047),b=n(84543),j=n(46346),S=a(n(11339)),E=a(n(63538)),k=n(17304),w=a(n(68132)),T=a(n(23217)),M=n(85893);function P(e){let{openColorPicker:t,openEditLabel:n}=e;return(0,r.canEditLabel)()?(0,M.jsx)(j.MenuBarItem,{a8nText:"starred-menu",icon:(0,M.jsx)(T.default,{name:"menu"}),title:_.default.t(454),children:(0,M.jsxs)(v.Dropdown,{type:v.MenuType.DropdownMenu,flipOnRTL:!0,dirX:v.DirX.LEFT,children:[(0,M.jsx)(x.DropdownItem,{a8n:"menu-item",action:t,children:l.fbt._("Choose color",null,{hk:"16haXO"})}),(0,M.jsx)(x.DropdownItem,{a8n:"menu-item",action:n,children:l.fbt._("Edit label",null,{hk:"3QX44B"})})]},"labelChooseColor")}):null}},94981:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{modelsToUpdate:t,onLabelUpdateComplete:n}=e,a=(0,u.default)((()=>new i.default([],(e=>e.id)))),T=(0,s.useRef)(new Set),M=a.current,P=T.current,I=(0,d.default)(),O=(0,s.useMemo)((()=>{const e=(()=>{const e={};return t.forEach((t=>{const n=(0,b.unproxy)(t);n.labels&&n.labels.forEach((t=>{e[t]=e[t]?++e[t]:1}))})),e})();return(0,r.default)(e,(e=>e===t.length?k:e>0?w:E))}),[]),L=(0,S.jsx)(c.default,{a8nText:"popup-controls-ok",type:"primary",disabled:0===P.size,onClick:()=>{(0,v.logLabelOperationEvent)(_.default.LABEL_OPERATIONS.CLICK_POSITIVE,t.length,_.default.LABEL_TARGETS.LABEL_COMBINED_DIALOG);const e=M.list,a=M.selected,r=e.map(((e,t)=>({id:e.id,type:a[t]?"add":"remove"})));g.LabelCollection.addOrRemoveLabels(r,t),n()},children:m.default.t(567)},1),A=(0,S.jsx)(c.default,{a8nText:"popup-controls-cancel",type:"secondary",onClick:e.onCancel,children:l.fbt._("Cancel",null,{hk:"H0gNq"})},0),D=(0,o.canEditLabel)()&&(0,S.jsx)("div",{className:x.default.newLabelBtn,children:(0,S.jsxs)(c.default,{a8nText:"popup-controls-cancel",type:"simplified",onClick:e.onAddNewLabel,children:[(0,S.jsx)(j.default,{name:"plus-large",className:x.default.plus,display:"inline"}),l.fbt._("NEW LABEL",null,{hk:"4xjp4I"})]},2)});return(0,S.jsx)(C.Modal,{type:C.ModalTheme.Tower,children:(0,S.jsxs)(f.default,{theme:"labels",children:[(0,S.jsx)(p.DrawerHeader,{title:l.fbt._("Label items",null,{hk:"2xOVMD"}),type:p.DRAWER_HEADER_TYPE.POPUP,onCancel:e.onCancel}),(0,S.jsx)(h.default,{"data-list-scroll-container":!0,theme:"padding",children:(0,S.jsx)(y.default,{shouldScrollIntoViewAndSelect:e.shouldScrollIntoViewAndSelect,initialLabelState:O,selectedLabels:M,renderContext:"label-selection",onLabelClick:e.onLabelClick,onMultiSelect:e=>{e&&(O[e]===w?P.add("{labelId}_changed"):P.has(e)?P.delete(e):P.add(e),I())}})}),D,(0,S.jsxs)("div",{className:x.default.actionBtns,children:[A,L]})]},"mange_label_modal")})};var r=a(n(66604)),o=n(8139),i=a(n(78931)),l=n(48360),s=n(67294),d=a(n(59312)),u=a(n(16223)),c=a(n(39770)),f=a(n(60453)),h=a(n(69637)),p=n(94790),m=a(n(14296)),g=n(16770),v=n(50047),x=a(n(20705)),_=a(n(11339)),C=n(57224),y=a(n(67901)),b=n(18146),j=a(n(23217)),S=n(85893);const E=0,k=1,w=2},51731:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(99964)),o=n(14597),i=n(48360),l=n(67294),s=a(n(56720)),d=a(n(59312)),u=a(n(16223)),c=n(87550),f=n(80140),h=n(32826),p=a(n(52665)),m=n(2732),g=n(19380),v=a(n(29234)),x=a(n(60453)),_=a(n(69637)),C=a(n(64738)),y=n(94790),b=n(85600),j=n(47915),S=a(n(44942)),E=a(n(30855)),k=a(n(14296)),w=a(n(23217)),T=n(85893);const M={overflowX:"gfz4du6o",overflowY:"ag5g9lrv"},P={flex:"kk3akd72",paddingTop:"a71rq12o",paddingEnd:"iffbo4e8",paddingBottom:"s9fl9ege",paddingStart:"iy3dfvyp",fontSize:"f8jlpxt4",lineHeight:"r5qsrrlp",color:"hp667wtd"},I={borderBottom:"daad4uqs"};function O(e){let{data:t,onClick:n,onDelete:a}=e;const{blocklist:r}=t,o=r.contact();return(0,T.jsx)(m.Contact,{contact:o,onClick:n,onDelete:a,waitIdle:!0},o.id.toString())}function L(e){const t=(0,l.useRef)(null),n=(0,d.default)();(0,c.useListener)(h.BlocklistCollection,["add","remove"],n);const a=(0,u.default)((()=>new E.default)),m=()=>{o.ModalManager.close()},L=(e,t)=>{o.ModalManager.open((0,T.jsx)(p.default,{okText:k.default.t(626),onOK:()=>{(e=>{(0,f.unblockContact)(e).catch((()=>{})),o.ModalManager.close()})(t)},cancelText:i.fbt._("Cancel",null,{hk:"H0gNq"}),onCancel:m,children:k.default.t(627,{contact:t.formattedName})}))},A=e=>{(0,f.blockContact)(e).catch((()=>{})),o.ModalManager.close()},D=h.BlocklistCollection.length>0?(0,T.jsx)(S.default,{flatListControllers:[a.current],className:(0,s.default)(M),children:(0,T.jsx)(j.FlatList,{flatListController:a.current,direction:"vertical",data:h.BlocklistCollection.map((e=>({itemKey:e.id.toString(),blocklist:e}))),renderItem:e=>(0,T.jsx)(O,{data:e,onClick:L,onDelete:L})})}):(0,T.jsx)(b.Blocked,{}),R=h.BlocklistCollection.length>0?(0,T.jsx)("div",{"data-a8n":r.default.key("blocked-description"),className:(0,s.default)(P),children:k.default.t(128)}):null;return(0,T.jsxs)(x.default,{ref:t,children:[(0,T.jsx)(y.DrawerHeader,{title:k.default.t(151),onBack:e.onClose,type:y.DRAWER_HEADER_TYPE.LARGE}),(0,T.jsx)("div",{className:(0,s.default)(I),children:(0,T.jsx)(C.default,{a8nText:"li-add-blocked",onClick:()=>{o.ModalManager.open((0,T.jsx)(v.default,{title:k.default.t(129),filter:function(e){return!!g.ContactCollection.isFilteredContact(e)&&(!h.BlocklistCollection.get(e.id)||k.default.t(538))},onCancel:()=>o.ModalManager.close(),onSelect:A}))},icon:(0,T.jsx)(w.default,{name:"add-user",directional:!0}),children:k.default.t(129)})}),(0,T.jsxs)(_.default,{children:[D,R]})]})}var A=(0,l.forwardRef)(L);t.default=A},37409:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(50796),o=a(n(45095)),i=n(57319),l=n(85582),s=a(n(64369)),d=n(41931),u=n(65885),c=U(n(35232)),f=n(14597),h=a(n(76139)),p=a(n(40436)),m=a(n(94184)),g=n(48360),v=n(67294),x=a(n(16223)),_=a(n(14075)),C=a(n(75680)),y=a(n(26616)),b=a(n(60453)),j=a(n(69637)),S=n(94790),E=n(18671),k=a(n(14296)),w=n(90535),T=a(n(3028)),M=U(n(61849)),P=a(n(14500)),I=a(n(11339)),O=a(n(11791)),L=a(n(34949)),A=n(82857),D=n(11054),R=a(n(23217)),N=a(n(23425)),B=n(85893);function F(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(F=function(e){return e?n:t})(e)}function U(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=F(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}const G="ANIMATING",H="LOADING",z="RECORDING",W="SENDING";function q(e,t){const{chat:n,disposeStream:a,onCaptured:F,onBack:U,onSend:q}=e,V=(0,v.useRef)(null),Y=(0,v.useRef)(null),K=(0,v.useRef)(null),Q=(0,v.useRef)(null),X=(0,v.useRef)(null),[Z,J]=(0,v.useState)(void 0),[$,ee]=(0,v.useState)(void 0),[te,ne]=(0,v.useState)(!1),[ae,re]=(0,v.useState)(void 0),[oe,ie]=(0,v.useState)(G),[le,se]=(0,v.useState)(void 0),de=(e,t)=>{var n;e?(null===(n=Y.current)||void 0===n||n.call(Y),Y.current=t,ie(H),se(e),(0,M.isSrcObjectInVideoElement)()||(e?(window.URL.revokeObjectURL(K.current),K.current=window.URL.createObjectURL(e)):(window.URL.revokeObjectURL(K.current),K.current=void 0))):oe===G&&ie(H)},ue=(0,x.default)((()=>new i.ShiftTimer((e=>{let{stream:t,disposeStream:n}=e;de(t,n)})))),ce=(0,x.default)((()=>new i.ShiftTimer((e=>{let{stream:t,disposeStream:n}=e;var a;t&&n&&(null===(a=Y.current)||void 0===a||a.call(Y));(0,M.isSrcObjectInVideoElement)()||(K.current=window.URL.revokeObjectURL(K.current))})))),fe=()=>{n&&n.setAttachMediaContents(null)};(0,v.useEffect)((()=>(ue.current.onOrBefore(300,{stream:e.stream,disposeStream:e.disposeStream}),()=>{ue.current.cancel(),K.current&&window.URL.revokeObjectURL(K.current),null==a||a(),V.current&&V.current.logCancel(),fe()})),[]);const he=(e,t)=>{ue.current.forceRunNow({stream:e,disposeStream:t})};(0,v.useImperativeHandle)(t,(()=>({loadNewStreamTimerUpdate:he,loadNewStream:de})));const pe=()=>{var e;const t=null===(e=X.current)||void 0===e?void 0:e.underlyingVideo();if(!t)return;const r=document.createElement("canvas");r.height=t.videoHeight,r.width=t.videoWidth;const i=r.getContext("2d");if(i)if(i.translate(r.width,0),i.scale(-1,1),i.drawImage(t,0,0,t.videoWidth,t.videoHeight),F)(0,l.canvasToBlob)(r).then((e=>{F(e)}));else{ce.current.onOrBefore(500,{stream:le,disposeStream:a});const e=new w.MediaPickerStatsLogger;e.logAdd("CAPTURE_MEDIA","image",I.default.MEDIA_PICKER_ORIGIN_TYPE.MENU_CAMERA_CAPTURE),e.chatRecipients=(null==n?void 0:n.groupMetadata)?n.groupMetadata.participants.length:1,V.current=e;const t=r.toDataURL("image/jpeg"),i=(0,d.dataURLtoBlob)(t);if(n){n.attachMediaContents||n.setAttachMediaContents(new _.default({chatParticipantCount:n.getParticipantCount()}));(0,o.default)(n.attachMediaContents,"chat.attachMediaContents").processAttachments([{file:(0,u.createFile)([i],"",{type:"image/jpeg"})}])}ee(t),ie(W),se(void 0)}else __LOG__(3)`CaptureDrawer:onCapture can not get 2d context`},me=e=>{ie(z),re({width:e.videoWidth,height:e.videoHeight})},ge=()=>{J(void 0),ie(H),fe();const{asyncStream:e,disposeStream:t}=M.start("camera");Y.current=t,e.then((e=>{e&&((0,M.isSrcObjectInVideoElement)()||(K.current=window.URL.createObjectURL(e)),se(e))})).catch((0,r.filteredCatch)(c.GUM.NotAllowedError,(()=>{U(),f.ModalManager.open((0,B.jsx)(E.GuidePopup,{messaging:E.Messaging.CAMERA_FAIL,type:E.TYPE.GUIDE_UNBLOCK}))}))).catch((0,r.filteredCatch)(c.GUM.GUMError,(()=>{U(),f.ModalManager.open((0,B.jsx)(E.GuidePopup,{messaging:E.Messaging.CAMERA_MISSING,type:E.TYPE.GUIDE_NONE}))})))},ve=()=>{let e=Z;if(q)if($){var t,n;const a=null===(t=Q.current)||void 0===t?void 0:t.refInput;let r=[];if(Z&&a){const t=a.serialize(Z),[n,o]=[t[0].trim(),t[1]];n.length&&(e=n,r=o.mentionedJidList||[])}q({caption:e,getImg:L.default.createFromBase64Jpeg(h.default.parseDataURL($).data),isViewOnce:te,mentionedJidList:r}),null===(n=V.current)||void 0===n||n.logSend({isViewOnce:te})}else __LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("capture-drawer-no-img");else __LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("capture-drawer-no-onSend")},xe=e=>{J(e)},_e=e=>{ne(e)},Ce=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{isViewOnce:n}=t;if(q)if(0===e.length)__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("capture-drawer-no-img");else{const{media:t,mentionedJidList:i}=(0,o.default)(e[0],"medias[0]"),l=t.file;var a,r;if(l instanceof Blob)q({getImg:L.default.createFromData(l,l.type),caption:null!==(a=t.caption)&&void 0!==a?a:void 0,isViewOnce:n,mentionedJidList:i}),null===(r=V.current)||void 0===r||r.logSend({isViewOnce:n});fe()}else __LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("capture-drawer-no-onSend")};let ye,be,je,Se,Ee;const ke="capture-cover"===e.theme?"cover":"contain";switch(oe){case G:case H:if(Ee=(0,B.jsx)(D.Spinner,{stroke:4,size:50}),oe===G)break;case z:const t=(0,m.default)(y.default.video,{[y.default.videoInactive]:le&&oe===H}),a=le?(0,B.jsx)(N.default,{autoPlay:!0,ref:X,onPlay:me,src:K.current?K.current:void 0,srcObject:K.current?void 0:le}):null;je=le?(0,B.jsx)("div",{children:(0,B.jsx)(O.default,{type:ke,size:ae,children:(0,B.jsx)("div",{className:t,"data-animage-capture-webcam":!0,children:a})})},"webcam"):null,ye=oe===z?(0,B.jsx)("div",{className:y.default.btn,children:(0,B.jsx)(A.Round,{large:!0,onClick:pe,children:(0,B.jsx)(R.default,{name:"camera"})})},"btn-capture"):null;break;case W:if(je=(0,B.jsx)(O.default,{type:ke,size:ae,children:(0,B.jsx)("img",{alt:"",className:y.default.image,"data-animate-capture-snapshot":!0,src:$})}),n){const e=(0,o.default)(n.attachMediaContents,"chat.attachMediaContents");je=(0,B.jsx)(P.default,{theme:"capture",chat:n,initCaption:null,mediaCollection:e,onDropText:()=>{},onSendMedia:Ce})}ye=(0,B.jsx)("div",{className:(0,m.default)(y.default.btn,y.default.btnSend),children:(0,B.jsx)(A.Round,{large:!0,onClick:ve,children:(0,B.jsx)(R.default,{name:"send",directional:!0})})},"btn-send"),be=(0,B.jsxs)("div",{className:y.default.retakeBtn,onClick:ge,children:[(0,B.jsx)("div",{className:y.default.retakeIcon,children:(0,B.jsx)(R.default,{name:"return"})}),g.fbt._("Retake",null,{hk:"tGeQz"})]}),Se=e.chat?(0,B.jsxs)("div",{className:y.default.captionInput,children:[(0,B.jsx)(T.default,{ref:Q,chat:e.chat,maxLength:s.default.MAX_CAPTION_LENGTH,multiline:!0,onEnter:ve,onChange:xe,placeholder:k.default.t(127),showRemaining:!0,spellCheck:!0,supportsEmoji:!0,value:Z}),(0,B.jsx)(C.default,{disabled:!!(null==n?void 0:n.contact.isEnterprise),isOn:te,mediaType:"image",onChange:_e})]}):null;break;default:__LOG__(2)`captureDrawer:render Unhandled video capture state ${oe}`}const we=!0===e.caption?(0,B.jsx)(p.default,{transitionName:"media-caption",className:y.default.caption,children:Se}):null;let Te=(0,B.jsxs)("div",{className:y.default.footer,children:[we,(0,B.jsx)(p.default,{transitionName:"pop_delay",children:ye})]});return oe===W&&(Te=null),(0,B.jsxs)(b.default,{theme:e.theme,children:[(0,B.jsx)(S.DrawerHeader,{title:k.default.t(617),type:S.DRAWER_HEADER_TYPE.OFFSET,onCancel:e.onBack,children:be}),(0,B.jsxs)(j.default,{overflow:"hidden",children:[(0,B.jsxs)("div",{className:y.default.container,children:[Ee,(0,B.jsx)("div",{className:y.default.body,children:(0,B.jsx)(p.default,{transitionName:"capture",className:y.default.videoContainer,children:je})})]}),Te]})]},"attach-capture-modal")}var V=(0,v.forwardRef)(q);t.default=V},33704:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.jsx)(r.default,{onBack:()=>{e.onClose()},chat:e.chat,caption:!0,theme:"capture-contain",onSend:t=>{let{getImg:n,caption:a,isViewOnce:r,mentionedJidList:i}=t;const l=e.chat,s=l.composeQuotedMsg;l.composeQuotedMsg=null;const d=l.getComposeContents().ctwaContext||void 0;(0,o.prepRawMedia)(n,{}).sendToChat(l,{caption:a,mentionedJidList:i,quotedMsg:s,ctwaContext:d,isViewOnce:r}),e.onCaptureSent(),e.onClose()},stream:e.stream,disposeStream:e.disposeStream})};var r=a(n(37409)),o=n(78986),i=n(85893)},5969:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=null==e.maxItems?s.ServerProps.maxParticipants:e.maxItems;return(0,d.jsx)(i.SelectModal,{onConfirm:t=>{0===t.length&&r.ModalManager.close(),(t=>{for(const n of t)(0,l.default)(e.contacts,n),n.composeQuotedMsg=null;e.onContactsSent(t[0]),r.ModalManager.close()})(t)},maxItems:t,title:o.fbt._("Send contacts",null,{hk:"9ZMyz"}),listType:i.ListType.CHAT_SELECT_MODAL,onCancel:()=>{r.ModalManager.close()}})};var r=n(14597),o=n(48360),i=n(56728),l=a(n(60356)),s=n(64551),d=n(85893)},98001:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=s.default.isRTL();return(0,d.jsx)("div",{className:(0,r.default)(u.container),children:(0,d.jsx)(l.FlexRow,{align:"start",justify:"start",wrap:"wrap",children:e.categories.map((n=>(0,d.jsx)(i.default,{"aria-label":o.fbt._("Unselect category",null,{hk:"2Swokr"}),onClick:()=>e.onRemoveItem(n.id),label:n.localized_display_name,postfixIcon:t?void 0:"round-x-inv",prefixIcon:t?"round-x-inv":void 0,xstyle:u.chip},n.id.toString())))})})};var r=a(n(94184)),o=n(48360),i=(a(n(56720)),a(n(72332))),l=n(29623),s=a(n(14296)),d=n(85893);const u={container:{paddingTop:"b7n2qyd4",paddingEnd:"iffbo4e8",paddingBottom:"s8gyl5p1",paddingStart:"khscay3k",backgroundColor:"sjyhwr5o",borderTop:"dl47i6rc"},chip:{marginTop:"dj1c3cmq",marginEnd:"bugiwsl0",marginBottom:"mpdn4nr2",marginStart:"svoq16ka"}}},63980:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(48360),o=n(67294),i=a(n(56720)),l=a(n(52665)),s=n(85893);const d={fontSize:"enbbiyaj",lineHeight:"l85iiqla"},u=(0,o.forwardRef)(((e,t)=>{const n=r.fbt._("Remove yourself as an admin?",null,{hk:"48SyzN"}),a=r.fbt._("You wont be able to message the announcement group, manage community admins or edit community information.",null,{hk:"sW8gP"});return(0,s.jsx)(l.default,{ref:t,title:n,onOK:e.onDemote,onCancel:e.onCancel,children:(0,s.jsx)("div",{className:(0,i.default)(d),children:a})})})),c=(0,o.forwardRef)(((e,t)=>(0,s.jsx)(l.default,{ref:t,onOK:e.onOK,children:(0,s.jsx)("div",{className:(0,i.default)(d),children:r.fbt._("You cannot remove yourself as an admin because you created this community. You can deactivate this community instead through community info.",null,{hk:"1RNm8A"})})})));function f(e,t){const{isCommunityOwner:n=!1}=e;return n?(0,s.jsx)(c,{ref:t,onOK:e.onCancel}):(0,s.jsx)(u,{ref:t,onDemote:e.onDemote,onCancel:e.onCancel})}var h=(0,o.forwardRef)(f);t.default=h},75329:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(21310),o=n(48360),i=n(67294),l=a(n(56720)),s=a(n(39770)),d=n(65417),u=n(12591),c=n(29424),f=n(57224),h=a(n(23217)),p=n(85893);const m={display:"p357zi0d",flexDirection:"f8m0rgwh",alignItems:"gndfcl4n",backgroundColor:"b19fvycv"},g={marginBottom:"dblt22a0"},v={marginBottom:"dblt22a0"},x={fontSize:"p9fp32ui",lineHeight:"tkq7s68q",fontWeight:"hnx8ox4h"},_={marginBottom:"mdtr2l4m"},C={fontSize:"f8jlpxt4"};function y(e,t){const n=t=>{t.stopPropagation(),t.preventDefault(),e.onContinue()},a=(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(s.default,{a8nText:"popup-controls-demote",type:"secondary",onClick:t=>{t.stopPropagation(),t.preventDefault(),e.onDemote()},children:o.fbt._("Remove as admin",null,{hk:"4ctAvd"})},"popup-controls-demote"),(0,p.jsx)(s.default,{a8nText:"popup-controls-continue",type:"primary",onClick:n,children:o.fbt._("Continue",null,{hk:"tefLH"})},"popup-controls-continue")]});return(0,p.jsx)(c.HotKeys,{ref:t,handlers:{enter:n,escape:n},children:(0,p.jsx)(f.Modal,{type:f.ModalTheme.Promote,actions:a,children:(0,p.jsxs)("div",{className:(0,l.default)(m),children:[(0,p.jsx)("div",{className:(0,l.default)(g),children:(0,p.jsx)(h.default,{name:"admin",width:130})}),(0,p.jsx)("div",{className:(0,l.default)(v),children:(0,p.jsx)(d.EmojiText,{className:(0,l.default)(x),text:o.fbt._("You are now a community admin",null,{hk:"18FUPM"})})}),(0,p.jsxs)("div",{className:(0,l.default)(_),children:[(0,p.jsx)(d.EmojiText,{className:(0,l.default)(C),text:o.fbt._("You can send announcements, manage groups, edit community information and use new admin tools to help keep the community safe.",null,{hk:"CgVFI"})})," ",(0,p.jsx)(u.ExternalLink,{href:(0,r.getCommunityAdminFaqUrl)(),children:o.fbt._("Learn more",null,{hk:"4ys1Kk"})})]})]})})})}var b=(0,i.forwardRef)(y);t.default=b},82187:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(48926)),o=a(n(29521)),i=a(n(99964)),l=a(n(45120)),s=a(n(52013)),d=a(n(97039)),u=n(94816),c=a(n(40436)),f=a(n(94184)),h=n(48360),p=n(67294),m=a(n(56720)),g=n(57849),v=a(n(35487)),x=a(n(60453)),_=a(n(69637)),C=n(94790),y=n(85600),b=a(n(44942)),j=a(n(30855)),S=a(n(63928)),E=n(55981),k=a(n(14296)),w=a(n(53153)),T=n(82857),M=n(52596),P=n(11054),I=a(n(23217)),O=n(42681),L=n(13923),A=n(50452),D=a(n(1784)),R=n(85893);const N={search:{paddingTop:"mw9hwy0h",paddingEnd:"ixsqo53d",paddingBottom:"ekpn4oxx",paddingStart:"iy3dfvyp",marginTop:"s15egc35",marginEnd:"r67mms0c",marginBottom:"pel5o5rz",marginStart:"m0ig7u5t",backgroundColor:"ihvf49ua"},inputArea:{display:"l7jjieqr",width:"ln8gz9je",height:"bvcnfjzh",paddingTop:"ppypbuwx",paddingEnd:"f9ovudaz",paddingBottom:"s8gyl5p1",paddingStart:"gx1rr48f",marginTop:"tt8xd2xn",marginEnd:"jnwc1y2a",marginBottom:"mpdn4nr2",marginStart:"svoq16ka",fontSize:"bze30y65",lineHeight:"jgi8eev7",color:"mfzfak1c",verticalAlign:"fewfhwl7",backgroundColor:"thr4l2wc",borderTop:"q4zabkcz",borderEnd:"jkanexlp",borderBottom:"thn59n0e",borderStart:"nsmrnv0a",outline:"gk6igrwd"},inputLine:{position:"g0rxnol2",width:"ln8gz9je",minHeight:"g4oj0cdv",maxHeight:"f0mh0h6e",paddingTop:"n1yiu2zv",paddingEnd:"f9ovudaz",paddingBottom:"przvwfww",paddingStart:"mjn2akup",overflowY:"ag5g9lrv",fontSize:"bze30y65",fontWeight:"e1gr2w1z",lineHeight:"htjsae3x",backgroundColor:"thr4l2wc",borderTop:"q4zabkcz",borderEnd:"jkanexlp",borderStart:"nsmrnv0a",borderBottom:"ob9ouq0z",outline:"gk6igrwd",transition:"qbtd8e50"},drawerSection:{zIndex:"b9fczbqn",display:"p357zi0d",justifyContent:"j1p1mz06",paddingBottom:"hjz8m82x",marginTop:"ignnouf6",textAlign:"qfejxiq4"},inputAreaSizer:{position:"snyj76hw",visibility:"kojwoqec"},contacts:{position:"g0rxnol2",flexGrow:"ggj6brxn",flexShrink:"m0h2a7mj",flexBasis:"l07amlnk",overflowX:"gfz4du6o",overflowY:"ag5g9lrv",backgroundColor:"ihvf49ua"},paragraph:{paddingTop:"b8cdf3jl",paddingEnd:"h5uqwbaf",paddingBottom:"q1tx93la",paddingStart:"kjjye8e3",fontSize:"f8jlpxt4",lineHeight:"jgi8eev7",textAlign:"qfejxiq4",color:"pm5hny62",backgroundColor:"ihvf49ua",borderBottom:"daad4uqs"},spinner:{backgroundColor:"ihvf49ua",display:"p357zi0d",justifyContent:"ac2vgrno",paddingTop:"gzqlv4l6",paddingEnd:"f9ovudaz",paddingBottom:"lhcgb2gc",paddingStart:"gx1rr48f"},createNewGroupText:{color:"a8xe1e7a"}};var B=(0,p.forwardRef)((e=>{const t=(0,A.genId)("max_subgroup_toast"),n=(0,g.getABPropConfigValue)("parent_group_link_limit")-e.currentSubgroupCount,[a,B]=(0,p.useState)(""),[F,U]=(0,p.useState)([]),[G,H]=(0,p.useState)([]),[z,W]=(0,p.useState)(!0),q=(0,p.useRef)(new j.default),V=(0,p.useRef)(),Y=(0,p.useRef)();(0,p.useEffect)((()=>{s.default.focus(Y.current)}));const K=function(){var e=(0,r.default)((function*(){W(!0);const e=(yield(0,O.syncAndGetAdminedGroups)()).filter((e=>{const t=S.default.get(e.id.toString());return(null==t?void 0:t.groupType)===E.GroupType.DEFAULT}));H(e),W(!1)}));return function(){return e.apply(this,arguments)}}();(0,p.useEffect)((()=>{K()}),[]);const Q=()=>{l.default.shouldIndicateFocus(),s.default.focus(Y.current)},X=()=>{e.onSubmit(F)},Z=(e,a)=>{(e=>{if(F.length>=n){const e=h.fbt._({"*":"Can't add more than {max_subgroup_count} subgroups",_1:"Can't add more than 1 subgroup"},[h.fbt._plural(n,"max_subgroup_count")],{hk:"Uat9P"});u.ToastManager.open((0,R.jsx)(A.Toast,{msg:e,id:t}))}else U([...F,e]),B("")})(a)};let J;F.length>0&&(J=(0,R.jsx)(T.Round,{a8nText:"group-participants-btn",onClick:X,children:(0,R.jsx)(I.default,{name:"checkmark"})}));const $=(()=>{const e=(0,o.default)(G,F,((e,t)=>e.id===t.id));if(!a)return e;const t=k.default.accentFold(a),n=(0,d.default)(t);return e.filter((e=>e.searchMatch(t,n)))})();let ee;ee=0===$.length?(0,R.jsx)(y.SearchGroups,{}):(0,R.jsx)(v.default,{ref:V,flatListController:q.current,contacts:$,onClick:Z,onFocusSearch:Q,showPersonGroupDivisionHeader:!0,isCommunityCreation:!0,disabled:F.length>=n});const te=G.length>0?h.fbt._("When you add a group youre an admin of, everyone in that group will be added to the community",null,{hk:"4eN0TQ"}):(0,R.jsxs)(R.Fragment,{children:[h.fbt._("All groups you're an admin of have already been added to other communities.",null,{hk:"23m9Tz"})," ",(0,R.jsx)(D.default,{xstyle:N.createNewGroupText,onClick:e.onCreateNewGroup,children:h.fbt._("Create new group",null,{hk:"2j5qDf"})})]});return(0,R.jsxs)(x.default,{children:[(0,R.jsx)(C.DrawerHeader,{title:h.fbt._("Add existing groups {groupcount}",[h.fbt._param("groupcount",`(${k.default.n(F.length)}/${k.default.n(n)})`)],{hk:"4al3R9"}).toString(),type:C.DRAWER_HEADER_TYPE.LARGE,onBack:e.onBack}),(0,R.jsxs)(_.default,{children:[(0,R.jsx)(L.TextParagraph,{xstyle:N.paragraph,children:te}),z?(0,R.jsx)("div",{className:(0,m.default)(N.spinner),children:(0,R.jsx)(P.Spinner,{})}):(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("div",{className:(0,m.default)(N.search),children:(0,R.jsxs)("div",{className:(0,m.default)(N.inputLine),children:[(0,R.jsx)("div",{"data-list-scroll-container":!0,children:(0,R.jsx)(w.default,{theme:"list-names",contacts:F,onDelete:(e,t)=>{(e=>{U(F.filter((t=>!e.id.equals(t.id))))})(t)},onFocusSearch:Q})}),(0,R.jsx)("input",{"data-a8n":i.default.key("inputarea"),className:(0,f.default)((0,m.default)(N.inputArea),M.SELECTABLE_INPUT_CSS_CLASS),ref:Y,placeholder:h.fbt._("Type group name",null,{hk:"4EQeB2"}),onChange:e=>B(e.target.value),value:a,type:"text"}),(0,R.jsx)("span",{className:(0,m.default)(N.inputAreaSizer),children:a})]})}),(0,R.jsx)(b.default,{className:(0,m.default)(N.contacts),flatListControllers:[q.current],children:ee})]}),(0,R.jsx)(c.default,{transitionName:"btn",className:(0,m.default)(N.drawerSection),children:J})]})]})}));t.default=B},68122:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(48926)),o=a(n(45095)),i=a(n(99964)),l=n(14597),s=n(48360),d=n(67294),u=a(n(56720)),c=n(35461),f=a(n(40436)),h=n(57849),p=a(n(44356)),m=n(69951),g=a(n(52665)),v=n(88984),x=a(n(60453)),_=a(n(69637)),C=n(94790),y=a(n(33308)),b=n(47915),j=a(n(44942)),S=a(n(30855)),E=a(n(61684)),k=a(n(14296)),w=n(62664),T=a(n(52711)),M=n(11054),P=n(73093),I=a(n(23217)),O=n(85893);const L={panelBody:{zIndex:"jnl3jror",display:"p357zi0d",flexDirection:"f8m0rgwh",flexGrow:"ggj6brxn",overflowY:"ag5g9lrv",backgroundColor:"ihvf49ua"},roundIcon:{height:"brqbuz94",width:"nfc7olq2",overflowX:"gfz4du6o",overflowY:"r7fjleex"},announcementIcon:{backgroundColor:"se52eggw"},announcementSpeaker:{color:"q3u0wlip"},btnRemove:{color:"s4k44ver",verticalAlign:"fewfhwl7",cursor:"ajgl1lbb"},xColor:{color:"hp667wtd"}},A=(0,O.jsx)(T.default,{children:(0,O.jsx)(I.default,{name:"plus",directional:!0})}),D=(0,O.jsx)(T.default,{children:(0,O.jsx)(I.default,{name:"link"})}),R=(0,O.jsx)(T.default,{xstyle:[L.roundIcon,L.announcementIcon],theme:"transparent",children:(0,O.jsx)(I.default,{name:"announcement-speaker",directional:!0,height:32,width:32,iconXstyle:L.announcementSpeaker})});function N(e){let{onClick:t}=e;return(0,O.jsx)("button",{className:(0,u.default)(L.btnRemove),"data-a8n":i.default.key("btn-remove-group"),onClick:t,"aria-label":s.fbt._("Remove group",null,{hk:"2Tr8uh"}),children:(0,O.jsx)(I.default,{name:"x",iconXstyle:L.xColor})})}function B(e){let{data:t}=e;const[n,a]=(0,d.useState)(!1),o=m.ChatCollection.assertGet(t.itemKey),{formattedTitle:i}=(0,c.useModelValues)(o,["formattedTitle"]),l=function(){var e=(0,r.default)((function*(){var e;a(!0),yield null===(e=t.handleRemove)||void 0===e?void 0:e.call(t,t.subgroupWid,i),a(!1)}));return function(){return e.apply(this,arguments)}}();return(0,O.jsx)(p.default,{primary:null!=i?i:t.name,image:t.icon,secondary:t.secondary,detail:t.showRemove&&(n?(0,O.jsx)(f.default,{transitionName:"fade",children:(0,O.jsx)(M.Spinner,{size:18,stroke:6,color:"highlight"})}):(0,O.jsx)(f.default,{transitionName:"fade",children:(0,O.jsx)(N,{onClick:()=>{l()}})}))})}var F=(0,d.forwardRef)(((e,t)=>{const{joinedSubgroups:n,unjoinedSubgroups:a,onNewGroupFlow:i,onExistingGroupFlow:c,onBack:f,parentId:M}=e,I=(0,h.getABPropConfigValue)("parent_group_link_limit"),N=(0,d.useRef)(null),F=(0,d.useRef)(new S.default),U=n.length+a.length-1,G=()=>{l.ModalManager.open((0,O.jsx)(g.default,{onOK:()=>l.ModalManager.close(),children:s.fbt._("Limit of {max_subgroups} groups reached.",[s.fbt._param("max_subgroups",k.default.n(I))],{hk:"4WHDl"})}))},H=function(){var e=(0,r.default)((function*(e,t){yield(0,w.handleRemoveGroup)(M,U,e,t)}));return function(){return e.apply(this,arguments)}}(),z=[...n,...a].map((e=>{const t=m.ChatCollection.assertGet(e.toString()),n=(0,o.default)(t.groupMetadata,"groupChat.groupMetadata"),a=t.title();if(!0===n.defaultSubgroup)return{itemKey:e.toString(),subgroupWid:e,parentId:M,name:a,icon:R,secondary:s.fbt._("Admin announcements",null,{hk:"1OY88o"}),announcementGroup:!0,showRemove:!1};const r=(0,O.jsx)(v.DetailImage,{id:e});let i;return i=null!=n.participants?(0,E.default)(n.participants):s.fbt._("You created group {subject}",[s.fbt._param("subject",a)],{hk:"2nJMx9"}),{name:a,subgroupWid:e,parentId:M,itemKey:e.toString(),icon:(0,O.jsx)(T.default,{xstyle:L.roundIcon,theme:"transparent",children:r}),secondary:i,announcementGroup:!1,showRemove:!0,handleRemove:H}})).sort(P.SubgroupComparator);return(0,d.useImperativeHandle)(t,(()=>({restoreFocus:()=>{var e;return null===(e=N.current)||void 0===e?void 0:e.focus()},getElement:()=>N.current}))),(0,O.jsxs)(x.default,{children:[(0,O.jsx)(C.DrawerHeader,{title:s.fbt._("Manage groups {groupcount}",[s.fbt._param("groupcount",`(${k.default.n(U)}/${k.default.n(I)})`)],{hk:"2T0hT7"}),type:C.DRAWER_HEADER_TYPE.LARGE,onBack:f}),(0,O.jsxs)(_.default,{children:[(0,O.jsxs)(y.default,{children:[(0,O.jsx)("div",{"data-list-scroll-offset":!0,ref:N,children:(0,O.jsx)(p.default,{image:A,primary:s.fbt._("Create new group",null,{hk:"4hNxJp"}),onClick:()=>{U>=I?G():i()}})}),(0,O.jsx)("div",{"data-list-scroll-offset":!0,children:(0,O.jsx)(p.default,{image:D,primary:s.fbt._("Add existing group",null,{hk:"zy8Cr"}),onClick:()=>{U>=I?G():c()}})})]}),(0,O.jsx)(y.default,{title:s.fbt._("GROUPS IN THIS COMMUNITY",null,{hk:"1kTWJn"}),children:(0,O.jsx)(j.default,{flatListControllers:[F.current],className:(0,u.default)(L.panelBody),id:"pane-side",children:(0,O.jsx)(b.FlatList,{flatListController:F.current,direction:"vertical",data:z,renderItem:e=>(0,O.jsx)(B,{data:e})})})})]})]})}));t.default=F},53849:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.LinkingFailedModal=function(e){let{parentGroupId:t,failedGroups:n}=e;const a=(0,c.jsx)(s.default,{type:"primary",onClick:()=>{r.Cmd.communityHomeManageGroups(t),i.ModalManager.close()},children:o.fbt._("Add Groups",null,{hk:"fDoqm"})}),f=(0,c.jsx)(s.default,{type:"secondary",onClick:()=>i.ModalManager.close(),children:o.fbt._("Cancel",null,{hk:"2g51G7"})}),h=(0,d.getFormattedGroupListForCommunity)((0,l.flattenPairList)(n.map((e=>[e,""]))));return(0,c.jsx)(u.Modal,{actions:[f,a],children:(0,c.jsx)("div",{children:o.fbt._({"*":"{groups} could not be added to the community. Try adding them again.",_1:"{groups} could not be added to the community. Try adding it again."},[o.fbt._plural(n.length),o.fbt._param("groups",h)],{hk:"1jqcZt"})})})};var r=n(81572),o=n(48360),i=n(14597),l=n(56952),s=a(n(39770)),d=n(16961),u=n(57224),c=n(85893)},30730:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,i.default)(e.onContinue),n=r.fbt._("WhatsApp Communities",null,{hk:"1TjTMm"}),a=(0,g.jsx)(p.default,{name:"communities-nux"}),x=r.fbt._("Bring your groups together",null,{hk:"1StU8B"}),_=(0,g.jsx)(p.default,{name:"triple-dots",width:30,height:30,iconXstyle:v.iconColor}),C=r.fbt._("Add the groups you manage to one place for easy access",null,{hk:"1zHY6X"}),y=r.fbt._("Reach everyone at once",null,{hk:"210Ytz"}),b=r.fbt._("Send announcements to all members and keep them updated",null,{hk:"gqAFR"}),j=(0,g.jsx)(p.default,{name:"announcement-speaker",width:30,height:30,iconXstyle:v.iconColor});return(0,g.jsxs)(l.default,{children:[(0,g.jsx)(d.DrawerHeader,{title:r.fbt._("New community",null,{hk:"2fzGYI"}),type:d.DRAWER_HEADER_TYPE.LARGE,onBack:e.onBack}),(0,g.jsxs)(s.default,{children:[(0,g.jsxs)(u.default,{animation:!1,className:(0,o.default)(v.main),children:[(0,g.jsx)(c.FlexRow,{align:"center",justify:"center",children:(0,g.jsx)(f.default,{xstyle:v.badge,children:a})}),(0,g.jsx)(c.FlexRow,{align:"center",justify:"center",children:(0,g.jsx)(m.TextHeader,{xstyle:v.header,size:"24",color:"dark",weight:"bold",children:n})}),(0,g.jsxs)("div",{className:(0,o.default)(v.infoArea),children:[(0,g.jsx)(c.FlexColumn,{xstyle:v.iconColumn,children:_}),(0,g.jsxs)(c.FlexColumn,{xstyle:v.textArea,children:[(0,g.jsx)(m.TextHeader,{theme:"title",children:x}),(0,g.jsx)(m.TextParagraph,{theme:"muted",xstyle:v.subText,children:C})]})]}),(0,g.jsxs)("div",{className:(0,o.default)(v.infoArea),children:[(0,g.jsx)(c.FlexColumn,{xstyle:v.iconColumn,children:j}),(0,g.jsxs)(c.FlexColumn,{xstyle:v.textArea,children:[(0,g.jsx)(m.TextHeader,{theme:"title",children:y}),(0,g.jsx)(m.TextParagraph,{theme:"muted",xstyle:v.subText,children:b})]})]})]}),(0,g.jsx)("div",{className:(0,o.default)(v.nextButton),children:(0,g.jsx)(h.Round,{a8nText:"create-group-btn",onClick:t,children:(0,g.jsx)(p.default,{name:"arrow-forward",directional:!0})})})]})]})};var r=n(48360),o=a(n(56720)),i=a(n(16031)),l=a(n(60453)),s=a(n(69637)),d=n(94790),u=a(n(33308)),c=n(29623),f=a(n(48846)),h=n(82857),p=a(n(23217)),m=n(13923),g=n(85893);const v={main:{paddingBottom:"lnhl94cj"},nextButton:{zIndex:"b9fczbqn",display:"p357zi0d",justifyContent:"j1p1mz06",paddingBottom:"fwm24tzf",marginTop:"mnhq3yws",textAlign:"qfejxiq4"},badge:{borderTopStartRadius:"boajuire",borderTopEndRadius:"o93wvyfv",borderBottomEndRadius:"i5w8n1e6",borderBottomStartRadius:"cnpay6qi",color:"qiqvuef5",fontSize:"rwfn434h",marginTop:"rek1qe2c",paddingTop:"eujn52yf",paddingEnd:"abxuf49s",paddingBottom:"ckm995li",paddingStart:"mhcwslh8",textTransform:"ofejerhi"},header:{marginTop:"rek1qe2c",marginEnd:"k1jo73ug",marginBottom:"mpdn4nr2",marginStart:"isfiuinm",width:"gha8fw27",textAlign:"qfejxiq4",lineHeight:"a4ywakfo"},infoArea:{display:"p357zi0d",marginTop:"mnhq3yws",marginEnd:"k1jo73ug",marginBottom:"mpdn4nr2",marginStart:"isfiuinm",maxWidth:"dknb6df3"},textArea:{paddingStart:"bmj4fdax"},subText:{paddingTop:"jvpa774f"},iconColumn:{paddingTop:"tspiaou6"},iconColor:{color:"hp667wtd"}}},26778:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const n=(0,u.useModelValues)(e.parentGroupMetadata,["joinedSubgroups","id"]),a=null!==(t=n.joinedSubgroups)&&void 0!==t?t:[],o=h.ChatCollection.assertGet(n.id),i=(0,s.default)(),l=a.map((e=>h.ChatCollection.assertGet(e)));if((0,d.useListeners)(l.map((e=>({source:e,eventOrEvents:"change:unreadCount",callback:i})))),0===l.length)return null;const c=l.filter((e=>e.hasUnread)),f=c.sort(((e,t)=>{var n,a,o,i;return(null!==(n=null===(a=(0,r.getLastTimestampMsg)(t))||void 0===a?void 0:a.t)&&void 0!==n?n:Number.MAX_SAFE_INTEGER)-(null!==(o=null===(i=(0,r.getLastTimestampMsg)(e))||void 0===i?void 0:i.t)&&void 0!==o?o:Number.MAX_SAFE_INTEGER)})),p=f.slice(0,3);let m=Number.MAX_SAFE_INTEGER;if(f.length){var v,j;const e=null!==(v=null===(j=(0,r.getLastTimestampMsg)(f[0]))||void 0===j?void 0:j.t)&&void 0!==v?v:Number.MAX_SAFE_INTEGER;m=-e}else if(l.length){const e=l.reduce(((e,t)=>{var n,a;const o=null!==(n=null===(a=(0,r.getLastTimestampMsg)(t))||void 0===a?void 0:a.t)&&void 0!==n?n:0;return o>e?o:e}),0);if(0!==e){const t=e.toString().slice(2);m=-Number.parseInt(t,10)}}return(0,x.jsx)("div",{style:{order:m},children:(0,x.jsxs)(g.default,{xstyle:_.drawerSection,children:[(0,x.jsx)(C,{parentGroupMetadata:n,parentGroupChat:o,onClick:()=>e.onCommunityHome(o.id)}),p.map((e=>(0,x.jsx)(y,{subgroup:e},e.id))),c.length>0&&(0,x.jsx)(b,{onClick:()=>e.onCommunityHome(o.id)})]})})};var r=n(33852),o=n(81572),i=n(48360),l=a(n(56720)),s=a(n(59312)),d=n(87550),u=n(35461),c=a(n(49107)),f=n(65511),h=n(69951),p=n(88172),m=n(88984),g=a(n(33308)),v=a(n(23217)),x=n(85893);const _={drawerSection:{boxShadow:"ayenx209"},communityHomeCell:{borderBottom:"qmxv8cnq"},seeAll:{paddingStart:"jl1nm5p1",color:"hp667wtd",fontWeight:"bcr6az0x"}};function C(e){let{parentGroupMetadata:t,parentGroupChat:n,onClick:a}=e;return(0,x.jsx)(c.default,{image:(0,x.jsx)(m.DetailImage,{id:t.id,shape:m.DetailImageShape.Squircle}),primary:n.contact.name,contextEnabled:()=>!1,onClick:a,className:(0,l.default)(_.communityHomeCell),theme:"community-tab-home"})}function y(e){let{subgroup:t}=e;return(0,x.jsx)(f.Chat,{onClick:()=>{o.Cmd.openChatFromUnread(t).then((e=>(e&&p.ComposeBoxActions.focus(t),t)))},chat:t,theme:"community-tab-subgroup",noContext:!0,smallUnread:!0})}function b(e){let{onClick:t}=e;return(0,x.jsx)(c.default,{image:(0,x.jsx)(v.default,{name:"chevron-right",directional:!0}),primary:i.fbt._("See All",null,{hk:"10jRg4"}),contextEnabled:()=>!1,onClick:t,theme:"community-tab-see-all",className:(0,l.default)(_.seeAll)})}},89309:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(48360),o=n(67294),i=a(n(56720)),l=a(n(16031)),s=a(n(44356)),d=a(n(71878)),u=a(n(26778)),c=a(n(60453)),f=a(n(69637)),h=n(94790),p=a(n(33308)),m=a(n(52711)),g=a(n(23217)),v=n(13923),x=n(85893);const _={newCommunityButton:{paddingEnd:"iqx13udk",marginTop:"o9i7y497"},facepile:{height:"lniyxyh2",marginTop:"pq2y7wr0",display:"p357zi0d",width:"ln8gz9je",justifyContent:"ac2vgrno"},facepile1:{borderTop:"te2w76pw",borderEnd:"lf2f5g3m",borderBottom:"im448w36",borderStart:"ou0nhrxb",borderTopStartRadius:"g9p5wyxn",borderTopEndRadius:"i0tg5vk9",borderBottomEndRadius:"aoogvgrq",borderBottomStartRadius:"o2zu3hjb",transform:"d6vyh9el",zIndex:"g2bpp9au"},facepile2:{borderTop:"te2w76pw",borderEnd:"lf2f5g3m",borderBottom:"im448w36",borderStart:"ou0nhrxb",borderTopStartRadius:"g9p5wyxn",borderTopEndRadius:"i0tg5vk9",borderBottomEndRadius:"aoogvgrq",borderBottomStartRadius:"o2zu3hjb",zIndex:"qtm54r9o"},facepile3:{borderTop:"te2w76pw",borderEnd:"lf2f5g3m",borderBottom:"im448w36",borderStart:"ou0nhrxb",borderTopStartRadius:"g9p5wyxn",borderTopEndRadius:"i0tg5vk9",borderBottomEndRadius:"aoogvgrq",borderBottomStartRadius:"o2zu3hjb",transform:"fldfk6rh",zIndex:"irr3c58b"},emptyTabDescription:{marginTop:"qgwjkyig",marginBottom:"n63znv6n",color:"i8b0kslj",lineHeight:"a4ywakfo",textAlign:"qfejxiq4"}},C=()=>(0,x.jsxs)(p.default,{theme:"padding-no-vertical",children:[(0,x.jsxs)("div",{className:(0,i.default)(_.facepile),children:[(0,x.jsx)(g.default,{name:"default-group",xstyle:_.facepile1,className:d.default.defaultGroupIcon}),(0,x.jsx)(g.default,{name:"default-group",xstyle:_.facepile2,className:d.default.defaultGroupIcon}),(0,x.jsx)(g.default,{name:"default-group",xstyle:_.facepile3,className:d.default.defaultGroupIcon})]}),(0,x.jsx)(v.TextParagraph,{xstyle:_.emptyTabDescription,children:r.fbt._("Communities bring related groups together. Any community you create or get added to will appear here.",null,{hk:"1Daj4n"})})]});var y=(0,o.forwardRef)(((e,t)=>{const n=(0,l.default)((t=>{e.onCommunityHome(t)})),a=e.parentGroups.length?e.parentGroups.map((e=>(0,x.jsx)(u.default,{parentGroupMetadata:e,onCommunityHome:n},e.id))):(0,x.jsx)(C,{});return(0,x.jsxs)(c.default,{ref:t,children:[(0,x.jsx)(h.DrawerHeader,{title:r.fbt._("Communities",null,{hk:"2zqZTi"}),type:h.DRAWER_HEADER_TYPE.LARGE,onBack:e.onBack}),(0,x.jsxs)(f.default,{children:[(0,x.jsx)("div",{className:(0,i.default)(_.newCommunityButton),style:{order:-Number.MAX_SAFE_INTEGER},children:(0,x.jsx)(p.default,{children:(0,x.jsx)(s.default,{image:(0,x.jsx)(m.default,{children:(0,x.jsx)(g.default,{name:"community-group",directional:!0})}),primary:r.fbt._("New community",null,{hk:"2fzGYI"}),onClick:e.onNewCommunity,theme:"no-border"})})}),a]})]})}));t.default=y},63232:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(45095)),o=n(14597),i=n(48360),l=n(67294),s=a(n(56720)),d=a(n(16031)),u=n(57849),c=a(n(39770)),f=a(n(44356)),h=a(n(71878)),p=a(n(52665)),m=n(88984),g=a(n(60453)),v=a(n(69637)),x=n(94790),_=a(n(33308)),C=n(47915),y=a(n(44942)),b=a(n(30855)),j=a(n(61684)),S=a(n(63928)),E=a(n(14296)),k=n(57224),w=n(82857),T=a(n(52711)),M=n(11054),P=n(73093),I=a(n(23217)),O=a(n(1784)),L=n(85893);const A={addGroupButton:{paddingBottom:"a15vwmim",marginTop:"o9i7y497"},panelBody:{zIndex:"jnl3jror",display:"p357zi0d",flexDirection:"f8m0rgwh",flexGrow:"ggj6brxn",overflowY:"ag5g9lrv",backgroundColor:"ihvf49ua"},nextButton:{zIndex:"b9fczbqn",display:"p357zi0d",justifyContent:"j1p1mz06",paddingBottom:"hjz8m82x",marginTop:"ignnouf6",textAlign:"qfejxiq4",animationName:"s0bejz76",animationDuration:"oauresqk",animationTimingFunction:"pqvv99ib"},roundIcon:{height:"brqbuz94",width:"nfc7olq2",overflowX:"gfz4du6o",overflowY:"r7fjleex"},announcementIcon:{backgroundColor:"se52eggw"},announcementSpeaker:{color:"q3u0wlip"},groupIcon:{height:"ppled2lx",width:"ln8gz9je"},xColor:{color:"hp667wtd"}},D=(0,L.jsx)(T.default,{children:(0,L.jsx)(I.default,{name:"plus"})}),R=(0,L.jsx)(T.default,{children:(0,L.jsx)(I.default,{name:"link"})}),N=(0,L.jsx)(T.default,{xstyle:[A.roundIcon,A.announcementIcon],theme:"transparent",children:(0,L.jsx)(I.default,{name:"announcement-speaker",directional:!0,height:40,width:40,iconXstyle:A.announcementSpeaker})});function B(e){let{data:t,isAnnouncementGroup:n,onRemoveGroup:a}=e;return n?(0,L.jsx)(f.default,{primary:t.name,image:t.icon,secondary:t.secondary}):(0,L.jsx)(f.default,{primary:t.name,image:t.icon,secondary:t.secondary,detail:(0,L.jsx)(O.default,{onClick:()=>a(t.itemKey),children:(0,L.jsx)(I.default,{name:"x",iconXstyle:A.xColor})})})}var F=(0,l.forwardRef)(((e,t)=>{const n=(0,u.getABPropConfigValue)("parent_group_link_limit"),a=(0,l.useRef)(null),O=(0,l.useRef)(new b.default),[F,U]=(0,l.useState)(!1),G=(0,d.default)((()=>{U(!0),e.onCreateCommunity()})),H=e.groups.map((e=>{const{subject:t,icon:n=null,id:a=null,tempId:o=null,participants:l=null}=e;let d,u;null!=a?(d=(0,L.jsx)(m.DetailImage,{id:a}),null!=l&&(u=(0,j.default)(l))):(d=null!=n?(0,L.jsx)("img",{src:n,alt:"Group icon",className:(0,s.default)(A.groupIcon)}):(0,L.jsx)(I.default,{name:"default-group",xstyle:A.groupIcon,className:h.default.defaultGroupIcon}),u=i.fbt._("You created group {subject}",[i.fbt._param("subject",t)],{hk:"2nJMx9"}));return{itemKey:(0,r.default)(null!=o?o:null==a?void 0:a.toString(),"tempId ?? id?.toString()"),name:e.subject,icon:(0,L.jsx)(T.default,{xstyle:A.roundIcon,theme:"transparent",children:d}),secondary:u,announcementGroup:!1}})).sort(P.SubgroupComparator);H.unshift({itemKey:e.name,name:e.name,icon:N,announcementGroup:!0,secondary:i.fbt._("Admin announcements",null,{hk:"1OY88o"})});const z=()=>{o.ModalManager.open((0,L.jsx)(p.default,{onOK:()=>o.ModalManager.close(),children:i.fbt._("Limit of {max_subgroups} groups reached.",[i.fbt._param("max_subgroups",E.default.n(n))],{hk:"4WHDl"})}))};let W;return(0,l.useImperativeHandle)(t,(()=>({restoreFocus:()=>{var e;return null===(e=a.current)||void 0===e?void 0:e.focus()},getElement:()=>a.current}))),e.groups.length>0&&(W=(0,L.jsx)(w.Round,{a8nText:"create-group-btn",onClick:G,children:F?(0,L.jsx)(M.Spinner,{color:M.colorOptions.white,size:30}):(0,L.jsx)(I.default,{name:"checkmark"})})),(0,L.jsxs)(g.default,{children:[(0,L.jsx)(x.DrawerHeader,{title:i.fbt._("Add groups {groupcount}",[i.fbt._param("groupcount",`(${E.default.n(e.groups.length)}/${E.default.n(n)})`)],{hk:"1n7sgf"}),type:x.DRAWER_HEADER_TYPE.LARGE,onBack:e.onBack}),(0,L.jsxs)(v.default,{children:[(0,L.jsxs)(_.default,{children:[(0,L.jsx)("div",{"data-list-scroll-offset":!0,children:(0,L.jsx)("div",{className:(0,s.default)(A.addGroupButton),ref:a,children:(0,L.jsx)(f.default,{image:D,primary:i.fbt._("Create new group",null,{hk:"4hNxJp"}),onClick:()=>{e.groups.length>=n?z():e.onNewGroupFlow()}})})}),(0,L.jsx)("div",{"data-list-scroll-offset":!0,children:(0,L.jsx)("div",{className:(0,s.default)(A.addGroupButton),children:(0,L.jsx)(f.default,{image:R,primary:i.fbt._("Add existing group",null,{hk:"zy8Cr"}),onClick:()=>{if(e.groups.length>=n)z();else{if(null!=S.default.findFirst((e=>e.participants.iAmAdmin())))e.onExistingGroupFlow();else{const t=(0,L.jsx)(c.default,{type:"secondary",onClick:()=>o.ModalManager.close(),children:i.fbt._("Cancel",null,{hk:"w74ws"})},0),n=(0,L.jsx)(c.default,{type:"primary",onClick:()=>{o.ModalManager.close(),e.onNewGroupFlow()},children:i.fbt._("Create group",null,{hk:"3UOEZN"})},1);o.ModalManager.open((0,L.jsx)(k.Modal,{actions:[t,n],children:(0,L.jsx)("div",{children:i.fbt._("You can only add existing groups youre an admin of. Youre not currently an admin of any groups, but you can create a new group.",null,{hk:"38qliv"})})}))}}}})})})]}),(0,L.jsx)(_.default,{title:i.fbt._("GROUPS IN THIS COMMUNITY",null,{hk:"1kTWJn"}),children:(0,L.jsx)(y.default,{flatListControllers:[O.current],className:(0,s.default)(A.panelBody),id:"pane-side",children:(0,L.jsx)(C.FlatList,{flatListController:O.current,direction:"vertical",data:H,renderItem:t=>(0,L.jsx)(B,{data:t,isAnnouncementGroup:t.itemKey===e.name,onRemoveGroup:e.onRemoveGroup})})})}),(0,L.jsx)("div",{className:(0,s.default)(A.nextButton),children:W})]})]})}));t.default=F},98600:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(99964)),o=a(n(40436)),i=n(48360),l=n(67294),s=a(n(56720)),d=a(n(16031)),u=a(n(60453)),c=a(n(69637)),f=n(94790),h=a(n(33308)),p=a(n(13699)),m=n(33646),g=a(n(43556)),v=n(82857),x=n(64551),_=a(n(23217)),C=n(90011),y=n(85893);const b={marginTop:"ignnouf6",marginEnd:"bcfko8ch",marginBottom:"bibl1e27",marginStart:"dl2ettod"},j={zIndex:"b9fczbqn",display:"p357zi0d",justifyContent:"j1p1mz06",paddingBottom:"hjz8m82x",marginTop:"ignnouf6",textAlign:"qfejxiq4"};var S=(0,l.forwardRef)(((e,t)=>{var n,a;const S=(0,l.useRef)(null),E=(0,l.useRef)(null),[k,w]=(0,l.useState)(null!==(n=e.name)&&void 0!==n?n:""),[T,M]=(0,l.useState)(null!==(a=e.description)&&void 0!==a?a:""),[P,I]=(0,l.useState)(e.imgBlob);(0,l.useEffect)((()=>{var e;null===(e=S.current)||void 0===e||e.restoreFocus()}),[]);const O=(0,d.default)((()=>{const t=(0,p.default)(k.trim());e.onContinue(t,T,P)}));(0,l.useImperativeHandle)(t,(()=>({restoreFocus:()=>{var e;return null===(e=S.current)||void 0===e?void 0:e.restoreFocus()},getElement:()=>E.current})));const L=k.trim().length>0,A=L?(0,y.jsx)("div",{className:(0,s.default)(j),children:(0,y.jsx)(v.Round,{a8nText:"create-group-btn",onClick:O,children:(0,y.jsx)(_.default,{name:"arrow-forward",directional:!0})})}):null;return(0,y.jsxs)(u.default,{children:[(0,y.jsx)(f.DrawerHeader,{title:i.fbt._("New community",null,{hk:"2fzGYI"}),type:f.DRAWER_HEADER_TYPE.LARGE,onBack:e.onBack}),(0,y.jsxs)(c.default,{children:[(0,y.jsxs)(h.default,{animation:!1,children:[(0,y.jsx)("div",{className:(0,s.default)(b),children:(0,y.jsx)(m.PhotoPickerLoadable,{type:g.default.COMMUNITY,attachToChat:!1,startImage:P,onImageSet:(e,t)=>{I(t)}})}),(0,y.jsx)("div",{"data-a8n":r.default.key("community-subject"),className:(0,s.default)(b),ref:E,children:(0,y.jsx)(C.TextInput,{ref:e=>{S.current=e},value:k,maxLength:25,showRemaining:!0,onChange:e=>{w(e)},placeholder:i.fbt._("Community Name",null,{hk:"3x2rYq"}),onEnter:L?O:()=>{},supportsEmoji:!0})}),(0,y.jsx)("div",{"data-a8n":r.default.key("community-description"),className:(0,s.default)(b),children:(0,y.jsx)(C.TextInput,{value:T,maxLength:x.ServerProps.groupDescLength,showRemaining:!0,onChange:e=>{M(e)},placeholder:i.fbt._("Community Description",null,{hk:"2aBgnf"}),onEnter:L?O:()=>{},supportsEmoji:!0})})]}),(0,y.jsx)(o.default,{transitionName:"btn",children:A})]})]})}));t.default=S},61684:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=e.filter((e=>!e.contact.isMe&&e.contact.shortName)).slice(0,3).map((e=>e.contact.shortName)),n=e.length-t.length-1;let a=r.default.t(859);t.length+n<3?t.forEach(((e,n)=>{n===t.length-1?a+=` ${r.default.t(255)}${e}`:a+=`${r.default.t(257)}${e}`})):a+=r.default.t(257)+t.join(r.default.t(257));n>0&&(a+=" "+r.default.t(255)+r.default.t(357,{count:n,_plural:n}));return a};var r=a(n(14296))},73093:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SubgroupComparator=function(e,t){return!0===e.announcementGroup?-1:!0===t.announcementGroup?1:e.name.toLowerCase().localeCompare(t.name.toLowerCase())}},81411:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(45120)),o=a(n(52013)),i=n(8139),l=a(n(97039)),s=n(48360),d=n(67294),u=a(n(51799)),c=a(n(22245)),f=a(n(44356)),h=n(19380),p=a(n(33621)),m=a(n(35487)),g=a(n(60453)),v=a(n(69637)),x=n(94790),_=n(85600),C=a(n(30855)),y=n(29424),b=a(n(14296)),j=a(n(48837)),S=a(n(52711)),E=a(n(23217)),k=n(85893);var w=(0,d.forwardRef)(((e,t)=>{const{title:n,onBack:a,onClick:w,onNewGroup:T,onNewCommunity:M}=e,[P,I]=(0,d.useState)(""),O=(0,d.useRef)(),L=(0,d.useRef)(),A=(0,d.useRef)(),D=(0,d.useMemo)((()=>h.ContactCollection.frequentContacts("message")),[h.ContactCollection.length]),R=Boolean(P),N=(0,d.useMemo)((()=>R?[]:D),[R,D]),[B]=(0,d.useState)((()=>new C.default)),F=(0,d.useCallback)((e=>{h.ContactCollection.ensureSorted();const t="string"==typeof e?e:P;if(!t)return h.ContactCollection.getFilteredContacts();const n=h.ContactCollection.getFilteredContacts().concat(h.ContactCollection.filter((e=>e.name&&!e.isMe&&!e.isPSA&&!e.isWAContact))),a=b.default.accentFold(t),r=(0,l.default)(a);return n.filter((function(e){return e.searchMatch(a,r)}))}),[P]);(0,d.useEffect)((()=>{o.default.focus(O.current)}),[]);const U=(0,d.useCallback)((()=>{r.default.shouldIndicateFocus(),o.default.focus(O.current)}),[]),G=(0,d.useCallback)((e=>{const t=L.current;null!=t&&(e.preventDefault(),e.stopPropagation(),r.default.shouldIndicateFocus(),t.focusFirst())}),[]),H=(0,u.default)((e=>I(e)),100),z=(0,d.useCallback)((e=>{A.current=e,H(e)}),[H]),W=(0,d.useCallback)((e=>{e.preventDefault(),e.stopPropagation();const t=N[0];if(t)return r.default.shouldIndicateFocus(),void w(e,t);const n=F(A.current)[0];n&&(r.default.shouldIndicateFocus(),w(e,n))}),[w,F,N]);let q,V,Y;const K=F();if(q=0===K.length?P?(0,_.SearchWithKeyword)(P):(0,_.SearchWithoutKeyword)():(0,k.jsx)(m.default,{ref:L,contacts:K,flatListController:B,frequentContacts:N,onClick:w,onFocusSearch:U,showPersonGroupDivisionHeader:!!P}),!P){const e=(0,k.jsx)(S.default,{children:(0,k.jsx)(E.default,{name:"default-group",height:36,width:36,directional:!0,className:p.default.defaultGroupIcon})}),t=(0,k.jsx)(S.default,{children:(0,k.jsx)(E.default,{name:"community-group",directional:!0})});V=(0,k.jsx)("div",{"data-list-scroll-offset":!0,children:(0,k.jsxs)("div",{className:p.default.newChatButton,children:[(0,k.jsx)(f.default,{image:e,primary:s.fbt._("New group",null,{hk:"43A4qP"}),onClick:T}),!(0,i.communityCreationEnabled)()&&(0,k.jsx)(c.default,{})]})}),Y=(0,i.communityCreationEnabled)()?(0,k.jsx)("div",{"data-list-scroll-offset":!0,children:(0,k.jsxs)("div",{className:p.default.newChatButton,children:[(0,k.jsx)(f.default,{image:t,primary:s.fbt._("New community",null,{hk:"2fzGYI"}),onClick:M}),(0,k.jsx)(c.default,{})]})}):null}return(0,k.jsxs)(g.default,{ref:t,children:[(0,k.jsx)(x.DrawerHeader,{title:n,type:x.DRAWER_HEADER_TYPE.LARGE,onBack:a}),(0,k.jsx)(y.HotKeys,{handlers:{down:G},children:(0,k.jsx)(j.default,{ref:O,onSearch:z,onEnter:W,placeholder:b.default.t(570)})}),(0,k.jsxs)(v.default,{flatListControllers:[B],children:[V,Y,q]})]},"contact-modal")}));t.default=w},67873:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,f.useModelValues)(e.msg,["id","star","type","isGif","isViewOnce","labels","numTimesForwarded","isFrequentlyForwarded","chat","agentId","t","isMdHistoryMsg"]),n=(0,h.default)(),a=(0,p.default)(),U=(0,d.useRef)(null),G=(0,d.useRef)(null),[H,z]=(0,d.useState)(void 0),[W,q]=(0,d.useState)(!1),V=(0,u.default)();(0,c.useListener)(null==H?void 0:H.played,["add","remove"],V),(0,c.useListener)(null==H?void 0:H.read,["add","remove"],V),(0,c.useListener)(null==H?void 0:H.delivery,["add","remove"],V),(0,c.useListener)(t,["remove"],((e,t)=>{t===T.MsgCollection&&(null==n||n.requestDismiss())})),(0,d.useEffect)((()=>{var e,n;M.MsgInfoCollection.find(t.id).then((e=>{a.aborted||z(e)})).catch((()=>{q(!0),l.ToastManager.open((0,F.jsx)(R.Toast,{msg:s.fbt._("Couldn't display message info. Try again later.",null,{hk:"mRFf6"}),id:(0,R.genId)("msg_info_failed")}))}));const r=null===(e=U.current)||void 0===e?void 0:e.getContainer();t.type===i.MSG_TYPE.IMAGE&&r&&(r.scrollTop=r.scrollHeight);const o=new w.default.UiAction({uiActionType:w.default.UI_ACTION_TYPE.MSG_INFO_OPEN,uiActionPreloaded:!0});o.markUiActionT(),Object.assign(o,(0,j.getGroupMetricsFromChatWid)(null===(n=t.chat)||void 0===n?void 0:n.id)),o.commit(),(0,O.logUiActionShadowPrivateStatsTestEvents)(),(0,m.logMessageInfo)(t.agentId)}),[]);const Y=()=>{var e;return null===(e=G.current)||void 0===e?void 0:e.getMsgComponentRef()};let K,Q,X;if(H){const e=[];if(!t.isMdHistoryMsg){var Z;const n=t.type===i.MSG_TYPE.PTT;if(n||t.isViewOnce){Q=n?s.fbt._("Seen",null,{hk:"2XnbT5"}):s.fbt._("Seen",null,{hk:"3wXIG4"});const t=H.played.head(),a=null==t?void 0:t.t,r=(0,F.jsx)("span",{className:x.default.icon,children:(0,F.jsx)(D.default,{name:n?"status-ptt":"view-once-viewed",className:x.default.statusBlue})});e.push((0,F.jsx)(v.default,{title:n?E.default.t(462):s.fbt._("Opened",null,{hk:"WuYIF"}),t:a,icon:r},"played"))}const a=H.read.head(),r=null==a?void 0:a.t,o=(0,F.jsx)("span",{className:x.default.icon,children:(0,F.jsx)(D.default,{name:"status-dblcheck",className:x.default.ack})});Q=null!==(Z=Q)&&void 0!==Z?Z:E.default.t(464),e.push((0,F.jsx)(v.default,{title:Q,t:r,icon:o},"read"));const l=H.delivery.head(),d=null==l?void 0:l.t,u=(0,F.jsx)("span",{className:x.default.icon,children:(0,F.jsx)(D.default,{name:"status-dblcheck"})});e.push((0,F.jsx)(v.default,{title:E.default.t(460),t:d,icon:u},"delivery"))}if((0,o.isMultiDeviceAgentsEnabled)()){const n=(0,N.getAgentName)(t.agentId),a=t.t;e.push((0,F.jsx)(v.default,{title:n,t:a,icon:(0,F.jsx)("span",{className:x.default.icon,children:(0,F.jsx)(D.default,{name:"md-opt-in"})})},"agent"))}!L.ServerProps.hfmStringChanges&&t.numTimesForwarded>0&&!t.isFrequentlyForwarded&&e.push((0,F.jsx)(P.default,{msg:t},"forward")),K=(0,F.jsx)(b.default,{theme:"padding",children:e})}H||W||(X=(0,F.jsx)("div",{className:x.default.spinner,children:(0,F.jsx)(A.Spinner,{size:50,stroke:4})},"spinner"));let J=null;t.labels&&t.labels.length>0&&(0,o.canDisplayLabel)()&&(J=(0,F.jsx)(b.default,{theme:"padding",children:(0,F.jsx)(S.default,{labels:t.labels})}));return(0,F.jsxs)(_.default,{theme:"striped",children:[(0,F.jsx)(y.DrawerHeader,{title:E.default.t(459),type:y.DRAWER_HEADER_TYPE.SMALL,rtlFixIfOnDarwin:!0,onCancel:()=>{null==n||n.requestDismiss()}}),(0,F.jsx)(I.default,{ref:U,chatPreference:g.default.assertGet("defaultPreference"),children:(0,F.jsx)(B.Wrapper,{msg:t,ref:G,displayType:r.DISPLAY_TYPE.MSG_INFO,isMsgVisible:function(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e===t.id&&(!!n||Y())},position:k.MsgPosition.END,onProductClick:e.onProductClick})}),(0,F.jsxs)(C.default,{children:[J,(0,F.jsxs)("div",{className:x.default.body,children:[X,K]})]})]},"message-info-modal")};var r=n(5177),o=n(8139),i=n(15461),l=n(94816),s=n(48360),d=n(67294),u=a(n(59312)),c=n(87550),f=n(35461),h=a(n(95402)),p=a(n(3409)),m=n(98706),g=a(n(66034)),v=a(n(56790)),x=a(n(40261)),_=a(n(60453)),C=a(n(69637)),y=n(94790),b=a(n(33308)),j=n(42515),S=a(n(77577)),E=a(n(14296)),k=n(87931),w=a(n(11339)),T=n(59871),M=n(17972),P=a(n(82678)),I=a(n(1697)),O=n(7595),L=n(64551),A=n(11054),D=a(n(23217)),R=n(50452),N=n(61126),B=n(58827),F=n(85893)},42769:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{supportTag:t,onSend:n,onFailure:a,onCancel:T,onEmail:M}=e,P=(0,h.default)(),[I,O]=(0,f.useState)(""),[L,A]=(0,f.useState)(null),[D,R]=(0,f.useState)(!0),[N,B]=(0,f.useState)(!1),F=(0,f.useRef)(null);(0,f.useEffect)((()=>{var e;null===(e=F.current)||void 0===e||e.restoreFocus()}),[]);const U=e=>e.length>=10,G=()=>{if(U(I)){const e=(0,s.getDebugInfo)({supportTag:t,convertFields:!0,addUserAgentDetails:!0}),i=D?JSON.stringify(e):void 0;B(!0),null==n||n({description:I}),__LOG__(2)`InAppSupport: Sending support request with deviceInfo=${D}:${null!=i?i:"n/a"}`,(0,o.default)((0,b.sendSupportRequest)(I,i),P).then((e=>{null!=e.message?(d.ModalManager.close(),u.ToastManager.open((0,k.jsx)(E.Toast,{msg:c.fbt._("Your question has been sent to WhatsApp Support. We'll respond in a WhatsApp chat shortly.",null,{hk:"2wt947"}),id:(0,E.genId)()}))):a&&a({description:I})})).catch((0,r.catchAbort)((()=>{}))).finally((()=>{B(!1)}))}else A(y.default.t(601))},H=()=>{null==T||T(),d.ModalManager.close()},z=()=>{M&&(d.ModalManager.close(),M({description:I}))},W=e=>{O(e)},q=()=>{R(!D)},V=e=>{e.stopPropagation()},Y={enter:V};N&&(Y.esc=V);if((0,i.isMDBackend)()){const e="contact-us-include-device";return(0,k.jsx)(g.default,{title:c.fbt._("Contact us",null,{hk:"1FJ2cU"}),okDisabled:!U(I)||N,okSpinner:N,okText:y.default.t(590),onOK:G,onCancel:N?void 0:H,children:(0,k.jsx)(C.HotKeys,{handlers:Y,children:(0,k.jsxs)(x.FlexColumn,{align:"stretch",children:[(0,k.jsx)(S.TextInput,{error:L,maxLength:5e3,onChange:W,placeholder:c.fbt._("Tell us how we can help",null,{hk:"1R8W3F"}),ref:F,value:I}),(0,k.jsx)(_.default,{xstyle:w.deviceInfo,grow:1,children:(0,k.jsx)(j.TextParagraph,{theme:"muted-small",children:c.fbt._("Include device information? (optional)",null,{hk:"1nGqHl"})})}),(0,k.jsxs)(x.FlexRow,{children:[(0,k.jsx)(_.default,{xstyle:w.deviceInfoLabel,grow:1,children:(0,k.jsx)("label",{htmlFor:e,children:(0,k.jsxs)(j.TextParagraph,{theme:"plain",children:[c.fbt._("Technical details like your model and settings can help us answer your question.",null,{hk:"1Edwn1"})," ",(0,k.jsx)(v.ExternalLink,{href:(0,l.getSupportChatFaqUrl)(),children:y.default.t(397)})]})})}),(0,k.jsx)(_.default,{xstyle:w.deviceInfoCheckbox,grow:0,children:(0,k.jsx)(p.CheckBox,{checked:D,id:e,onChange:q})})]}),(0,k.jsx)(x.FlexRow,{children:(0,k.jsx)(_.default,{xstyle:w.emailLink,grow:1,children:(0,k.jsx)(m.default,{onClick:z,children:c.fbt._("Get support via email",null,{hk:"3vajRd"})})})})]})})})}return(0,k.jsx)(g.default,{okText:c.fbt._("OK",null,{hk:"2KEeHb"}),onOK:()=>d.ModalManager.close(),title:c.fbt._("Contact us",null,{hk:"1FJ2cU"}),children:(0,k.jsx)(j.TextParagraph,{theme:"plain",children:c.fbt._("The support request form is not yet available for desktop. Use your phone to submit it.",null,{hk:"2Jk5Da"})})})};var r=n(89385),o=a(n(47259)),i=n(88555),l=n(21310),s=n(53658),d=n(14597),u=n(94816),c=n(48360),f=n(67294),h=(a(n(56720)),a(n(3409))),p=n(16593),m=a(n(99360)),g=a(n(52665)),v=n(12591),x=n(29623),_=a(n(48846)),C=n(29424),y=a(n(14296)),b=n(15194),j=n(13923),S=n(90011),E=n(50452),k=n(85893);const w={deviceInfo:{marginBottom:"t4zgqcuo",marginTop:"opp68qpq"},deviceInfoCheckbox:{minWidth:"r7yn1a4o"},deviceInfoLabel:{paddingEnd:"l9g3jx6n"},emailLink:{marginTop:"opp68qpq"}}},38322:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(40234),o=n(81572),i=n(8139),l=n(48360),s=(a(n(56720)),n(35461)),d=a(n(27698)),u=n(57849),c=a(n(33308)),f=n(72472),h=n(40015),p=n(18146),m=n(13923),g=n(85893);const v={drawerTitle:{paddingTop:"hc2u0oym",paddingEnd:"f9ovudaz",paddingBottom:"myel2vfb",paddingStart:"gx1rr48f"}};var x=e=>{const t=(0,u.getABPropConfigValue)("web_notification_settings_v2"),n=(0,s.useModelValues)(e.mute,["isMuted","expiration","isCallMuted","callExpiration"]),a=(0,s.useModelValues)(e.reactionsMute,["isMuted","expiration","isCallMuted","callExpiration"]),[x,_]=(0,d.default)((()=>f.MuteCollection.getGlobalNotifications()),(e=>f.MuteCollection.setGlobalNotifications(e))),[C,y]=(0,d.default)((()=>f.MuteCollection.getGlobalOfflineNotifications()),(e=>f.MuteCollection.setGlobalOfflineNotifications(e))),[b,j]=(0,d.default)((()=>f.MuteCollection.getOutgoingMessageSound()),(e=>f.MuteCollection.setOutgoingMessageSound(e))),[S,E]=(0,d.default)((()=>f.MuteCollection.getGlobalSounds()),(e=>f.MuteCollection.setGlobalSounds(e))),[k,w]=(0,d.default)((()=>f.MuteCollection.getGlobalCallRingtone()),(e=>f.MuteCollection.setGlobalCallRingtone(e))),[T,M]=(0,d.default)((()=>f.MuteCollection.getGlobalPreviews()),(e=>f.MuteCollection.setGlobalPreviews(e))),[P,I]=(0,d.default)((()=>f.MuteCollection.getCollapseMuted()),(e=>f.MuteCollection.setCollapseMuted(e))),O=()=>{o.Cmd.muteAll((0,p.unproxy)(a),!a.isMuted,!0)},L=[];window.Notification&&(L.push((0,g.jsx)(h.SettingsCheckListItem,{a8nText:"option-desktop-notifications",id:"desktop-notifications",checked:x,onChange:_,children:l.fbt._("Desktop alerts",null,{hk:"4tAp3q"})},0)),L.push((0,g.jsxs)(h.SettingsCheckListItem,{a8nText:"options-msg-previews",disabled:!x,id:"msg-previews",checked:T,onChange:M,children:[l.fbt._("Message previews",null,{hk:"2KMQAg"}),(0,g.jsx)(m.TextDiv,{theme:"muted",children:l.fbt._("Show message text in desktop alerts",null,{hk:"12TkTA"})})]},1)));const A=(0,g.jsxs)(h.SettingsCheckListItem,{a8nText:"option-desktop-notifications",id:"desktop-notifications",checked:x,checkboxRightAligned:t,onChange:_,children:[l.fbt._("",null,{hk:"3qNC9i"}),(0,g.jsx)(m.TextDiv,{theme:"muted",children:l.fbt._("",null,{hk:"1prbfG"})})]}),D=(0,g.jsxs)(h.SettingsCheckListItem,{a8nText:"options-msg-previews",disabled:!x,id:"msg-previews",checked:T,onChange:M,checkboxRightAligned:t,children:[l.fbt._("Message previews",null,{hk:"2KMQAg"}),(0,g.jsx)(m.TextDiv,{theme:"muted",children:l.fbt._("",null,{hk:"3CSIAK"})})]});let R,N,B,F;const{expiration:U,callExpiration:G,isMuted:H,isCallMuted:z}=n;let W,q;if((0,i.receiveReactionsEnabled)()){const{expiration:e,isMuted:n}=a;W=(0,g.jsxs)(h.SettingsCheckListItem,{a8nText:"option-reactions-mute-desktop-notifications",id:"reactions-mute-desktop-notifications",checked:n,checkboxRightAligned:t,onChange:O,children:[l.fbt._("Mute reaction notifications",null,{hk:"4tJdje"}),n&&null!=e?(0,g.jsx)(m.TextDiv,{theme:"muted",children:r.Clock.untilStr(e)}):null]}),q=(0,g.jsxs)(h.SettingsCheckListItem,{a8nText:"option-reactions-mute-desktop-notifications",id:"reactions-mute-desktop-notifications",checked:!n,checkboxRightAligned:t,onChange:O,children:[l.fbt._("",null,{hk:"17GMpp"}),(0,g.jsx)(m.TextDiv,{theme:"muted",children:l.fbt._("",null,{hk:"2tZvuJ"})})]})}const V=(0,g.jsxs)(h.SettingsCheckListItem,{a8nText:"option-sounds",id:"sounds",checked:S,checkboxRightAligned:t,onChange:E,children:[l.fbt._("Sounds",null,{hk:"2ncGop"}),t?(0,g.jsx)(m.TextDiv,{theme:"muted",children:l.fbt._("",null,{hk:"2Pjnsy"})}):null]}),Y=(0,g.jsxs)(h.SettingsCheckListItem,{a8nText:"option-mute-desktop-notifications",id:"mute-desktop-notifications",checked:H,checkboxRightAligned:t,onChange:()=>{o.Cmd.muteAll((0,p.unproxy)(n),!n.isMuted,!1)},children:[l.fbt._("Mute all notifications",null,{hk:"4rwvUI"}),H&&null!=U?(0,g.jsx)(m.TextDiv,{theme:"muted",children:r.Clock.untilStr(U)}):null]});return t?(0,g.jsxs)("div",{children:[(0,g.jsxs)(c.default,{theme:"padding-no-vertical",title:"MESSAGES",titleXStyle:v.drawerTitle,children:[A,D,q]}),(0,g.jsxs)(c.default,{theme:"padding",children:[V,null,null]}),(0,g.jsxs)(c.default,{theme:"padding",children:[R,B,F,N]})]}):(0,g.jsxs)(h.SettingsCheckList,{children:[Y,V,B,F,L,R,N,W,null,null]})};t.default=x},54896:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return(0,i.jsx)("div",{className:(0,o.default)(l),children:(0,i.jsx)("div",{className:(0,o.default)(s),children:r.fbt._("Drag file here",null,{hk:"y9aHs"})})},"container")};var r=n(48360),o=a(n(56720)),i=n(85893);const l={position:"lhggkp7q",zIndex:"q297boen",width:"ln8gz9je",height:"ppled2lx",backgroundColor:"ipp30ku8"},s={boxSizing:"cm280p3y",display:"p357zi0d",alignItems:"gndfcl4n",justifyContent:"ac2vgrno",height:"nioqejvd",marginTop:"nylzjxre",marginEnd:"lfum0007",marginBottom:"bvhm1occ",marginStart:"r6x3u63k",fontSize:"kuk548i2",color:"hn08p73j",borderTop:"joyebr9p",borderEnd:"jradjnc8",borderBottom:"opq9nt8f",borderStart:"ikkoynhc"}},82624:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{rootRef:t,disabled:n,onClick:a,children:c}=e;const[f,h,p]=function(e){const[t,n]=(0,r.useState)(),[a,o]=(0,r.useState)(),[l,{isIntersecting:s}]=(0,i.default)({root:e,rootMargin:null!=t?`-${t.offsetHeight}px`:void 0});return(0,r.useEffect)((()=>{if(null!=e&&null!=t&&null!=a){if(s)t.style.removeProperty("right");else{const n=e.offsetWidth-(e.clientWidth+2*e.clientLeft);t.style.setProperty("right",`${n}px`)}a.style.setProperty("min-height",`${t.offsetHeight}px`)}}),[s,e,t,a]),[s,e=>{l(e),o(e)},n]}(t);return(0,d.jsx)("div",{ref:h,className:(0,o.default)(u.ctaPlaceholder),children:(0,d.jsx)(s.default,{ref:p,xstyle:[f?null:u.ctaContainerSticky],theme:"sticky-button-section",children:(0,d.jsx)(l.default,{type:"primary",onClick:a,disabled:n,className:(0,o.default)(u.ctaButton),children:c})})})};var r=n(67294),o=a(n(56720)),i=a(n(44692)),l=a(n(39770)),s=a(n(33308)),d=n(85893);const u={ctaContainerSticky:{position:"ly2gu7o9",bottom:"jxacihee",left:"tukmaf4q",boxShadow:"th8ck7tu"},ctaButton:{display:"f804f6gw",marginBottom:"pel5o5rz"},ctaPlaceholder:{marginBottom:"brac1wpa"}}},21976:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.E2eChangeModal=function(e){const t=(0,i.useModelValues)(e.contact,["formattedShortName"]),n=o.fbt._("OK",null,{hk:"2KEeHb"}),a=t.formattedShortName,u=s.default.t(780,{contactName:a}),c=s.default.t(779,{contactName:a});return(0,d.jsx)(l.default,{title:u,onOK:()=>r.ModalManager.close(),okText:n,children:c})};var r=n(14597),o=n(48360),i=n(35461),l=a(n(52665)),s=a(n(14296)),d=n(85893)},50025:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.EditImageDrawer=function(e){var t;const{attributionUrl:n,onRetake:a,retryText:w,onFinished:T,cropShape:M}=e,P=(0,s.default)(),I=(0,l.useRef)(),O=(0,l.useRef)(null),L=(0,d.default)((()=>new _.default)),[A,D]=(0,l.useState)(!1),[R,N]=(0,l.useState)({width:500,height:361}),[B]=(0,l.useState)((()=>new m.default(e.img)));(0,u.useListener)(L.current,"change:isInitialized",(()=>{P()}));const F=(e,t)=>{var n;null===(n=I.current)||void 0===n||n.drawCanvas(e,t)},U=A?(0,E.jsx)("div",{className:p.default.btnSend,children:(0,E.jsx)(b.Round,{large:!0,onClick:()=>{var e,t;null===(t=I.current)||void 0===t||t.saveCanvas(),null===(e=O.current)||void 0===e||e.crop().then((e=>{let{thumb:t,full:n}=e;T(t,n),B.cleanUp()}))},label:i.fbt._("Submit image",null,{hk:"2x0Z1K"}),children:(0,E.jsx)(j.default,{name:"checkmark-large"})})},"btn-send"):null;let G;L.current.isInitialized&&(G=(0,E.jsx)(y.WrappedProfileCropTool,{editedMedia:B,stage:L.current.stage,cropOverlay:L.current.cropOverlay,mediaContainer:L.current.mediaContainer,drawCanvas:F,ref:O,cropShape:M||y.CropShapeType.CIRCLE}));const H=(0,E.jsx)(x.default,{className:p.default.mediaElement,editedMedia:B,mediaEditController:L.current,fitType:"cover",ref:I});let z;if(a){let e;switch(w){case k.NONE:e=null;break;case k.RETAKE:e=i.fbt._("Retake",null,{hk:"tGeQz"});break;case k.RESTART:default:e=i.fbt._("Upload",null,{hk:"3FMQvb"})}z=(0,E.jsxs)("button",{className:p.default.retake,onClick:a,children:[(0,E.jsx)("div",{className:p.default.retakeIcon,children:(0,E.jsx)(j.default,{name:"return"})}),e]})}const W=n?(0,E.jsxs)("div",{className:p.default.attribution,children:[(0,E.jsx)(g.ExternalLink,{className:p.default.attributionLink,href:n,children:r.default.hostname(n)}),(0,E.jsxs)("span",{children:[i.fbt._("Image may be subject to copyright.",null,{hk:"XoHv1"}),(0,E.jsx)(g.ExternalLink,{href:(0,S.getTosUrl)(),children:i.fbt._("Terms of Service",null,{hk:"1Lpm6J"})})]})]}):null,q=M===y.CropShapeType.RECT?(0,E.jsx)("div",{className:p.default.hintText,children:i.fbt._("Hint: Use 16:9 ratio images (eg. 1920 x 1020 or its multiples)",null,{hk:"Lt5na"})}):void 0,V=(0,E.jsxs)("div",{className:p.default.footer,children:[(0,E.jsx)(o.default,{transitionName:"btn",children:U}),W,q]}),Y=null!==(t=e.imageSize)&&void 0!==t?t:{width:500,height:361};return(0,E.jsxs)(c.default,{theme:"edit",children:[(0,E.jsx)(h.DrawerHeader,{title:v.default.t(133),type:"offset",onCancel:e.onCancel,focusBackOrCancel:!0,children:z}),(0,E.jsxs)(f.default,{overflow:"hidden",children:[(0,E.jsxs)("div",{className:p.default.mediaBody,children:[G,(0,E.jsx)("div",{className:p.default.containerBackground,children:(0,E.jsx)(o.default,{transitionName:"capture",children:(0,E.jsx)(C.default,{type:"cover",size:Y,onObjectLoad:e=>{null!=e&&e instanceof HTMLElement&&(!R||R.width===e.clientWidth&&R.height===e.clientHeight||N({width:e.clientWidth,height:e.clientHeight}),A||D(!0))},children:H})})})]}),V]})]},"attach-edit-modal")},t.RETRY_OPTIONS=void 0;var r=a(n(76139)),o=a(n(40436)),i=n(48360),l=n(67294),s=a(n(59312)),d=a(n(16223)),u=n(87550),c=a(n(60453)),f=a(n(69637)),h=n(94790),p=a(n(63881)),m=a(n(12199)),g=n(12591),v=a(n(14296)),x=a(n(16144)),_=a(n(47739)),C=a(n(11791)),y=n(13510),b=n(82857),j=a(n(23217)),S=n(73953),E=n(85893);const k={NONE:"none",RETAKE:"retake",RESTART:"restart"};t.RETRY_OPTIONS=k},12199:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(82492)),o=n(65885),i=a(n(76139));class l{constructor(e,t,n,a){this.updateEditData=e=>{this.saveEdits(),this.editData=(0,r.default)({},this.editData,e)},this.updateEditItems=(e,t)=>{this.saveEdits();const n=[];this.editData.items&&this.editData.items.forEach((e=>{e!==t&&n.push(e)})),n.push(e),this.editData.items=n},this.saveEdits=()=>{const e=new l(this.media,this.originalImage,this.editData,this.previous);this.previous=e},this.revertEdit=()=>{this.previous&&(this.editData=this.previous.editData,this.previous=this.previous.previous)},this.saveEditsFromCanvas=e=>{const t=e.toDataURL();this.editedImage||(this.editedImage=new Image),this.editedImage.src=t},this.exportEditedMedia=()=>{if(this.hasEdits()&&this.editedImage){const e=this.editedImage.src;return i.default.dataURLtoFile(e)}return this.media instanceof File?this.media:(0,o.createFile)([this.media],"",{type:this.media.type})},this.hasEdits=()=>!!this.previous&&this.editedImage,this.cleanUp=()=>{window.URL.revokeObjectURL(this.originalImage.src)},this.media=e,t?this.originalImage=t:(this.originalImage=new Image,this.originalImage.src=window.URL.createObjectURL(e)),this.previous=a,this.editData={height:0,width:0,offsetX:0,offsetY:0,rotation:0,scale:1,items:[],baseItem:null},(0,r.default)(this.editData,n)}}t.default=l},16144:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(76304),o=n(29984),i=n(67294),l=a(n(55010)),s=a(n(214)),d=a(n(11791)),u=a(n(76557)),c=n(85893);function f(e,t){const{mediaEditController:n,editedMedia:a,mediaPickerStatsLogger:f,activeMediaId:h}=e,p=(0,i.useRef)(null),m=(0,i.useRef)(null),g=(0,i.useRef)(null),v=(0,i.useRef)(null),[x,_]=(0,i.useState)({height:1,width:1}),[C,y]=(0,i.useState)(null),[b,j]=(0,i.useState)(null),S=(e,t)=>{if(!p.current)return;const i=p.current;t&&f&&f.logChange(h||-1,t);const l=a.editData,s=(e=>{let t;return C?t=C:(t=new r.Easel.Stage(e),t.enableMouseOver()),n.stage=t,t})(i);e&&(i.width=l.width,i.height=l.height),s.removeAllChildren(),null!=l.baseItem&&s.addChild(l.baseItem),l.items&&s.addChild(...l.items);const d=a.originalImage.naturalWidth,u=a.originalImage.naturalHeight;s.regX=d/2,s.regY=u/2,s.rotation=l.rotation,(0,o.isNonZeroNumber)(l.width)&&(0,o.isNonZeroNumber)(l.height)&&(s.x=l.width/2+l.scale*l.offsetX,s.y=l.height/2+l.scale*l.offsetY),s.scaleX=l.scale,s.scaleY=l.scale,s.update(),_({width:i.width,height:i.height}),y(s)},E=()=>{const e=a.editData;a.editedImage=null;const t=a.originalImage;if(e.width||e.height||(e.width=t.naturalWidth,e.height=t.naturalHeight),!e.baseItem){const n=new r.Easel.Bitmap(t);e.baseItem=n}S(!0)},k=()=>{S(!0);const e=p.current;e&&a.saveEditsFromCanvas(e)},w=e=>{e&&(e.children.forEach((e=>{e.removeAllEventListeners()})),e.removeAllEventListeners(),e.removeAllChildren(),e.enableMouseOver(0),e.clear())};(0,i.useEffect)((()=>{(()=>{const e=a.originalImage;e.complete?E():e.onload=E})(),j(m.current),v.current=new r.Easel.Stage(g.current),v.current.autoClear=!1,v.current.enableMouseOver(),m.current&&(n.mediaContainer=m.current),n.cropOverlay=v.current}),[]),(0,l.default)((()=>{const e=a.originalImage;e.complete||(e.onload=void 0),k(),w(C),w(v.current)}));const T=(e,t)=>{_({width:e,height:t})};(0,i.useImperativeHandle)(t,(()=>({saveCanvas:k,drawCanvas:S,updateCanvasSize:T})));const M=(0,c.jsx)("canvas",{ref:g,className:s.default.cropOverlay});return(0,c.jsx)("div",{className:e.className,ref:m,children:(0,c.jsxs)(d.default,{type:e.fitType||"scaleDown",size:x,children:[M,(0,c.jsx)(u.default,{ref:p,className:s.default.mediaViewerImg})]})})}var h=(0,i.forwardRef)(f);t.default=h},47739:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(11290);class r extends a.BaseModel{constructor(){super(...arguments),this.stage=(0,a.prop)(),this.cropOverlay=(0,a.prop)(),this.mediaContainer=(0,a.prop)(),this.isInitialized=(0,a.derived)((function(){return!!this.stage&&!!this.cropOverlay&&!!this.mediaContainer}),["stage","cropOverlay","mediaContainer"])}clearStage(e){e&&(e.children.forEach((e=>{e.removeAllEventListeners()})),e.removeAllEventListeners(),e.removeAllChildren(),e.clear())}}var o=(0,a.defineModel)(r);t.default=o},558:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PROF_PIC_THUMB_SIDE=t.PROF_PIC_MIN_SIDE=t.PROF_PIC_MAX_SIDE=void 0;t.PROF_PIC_MIN_SIDE=192;t.PROF_PIC_MAX_SIDE=640;t.PROF_PIC_THUMB_SIDE=96},13510:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.WrappedProfileCropTool=t.CropShapeType=void 0;var r=a(n(48926)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(n(51428)),i=n(76304),l=n(48360),s=n(67294),d=n(87550),u=n(29424),c=n(558),f=a(n(50922)),h=a(n(23217)),p=a(n(1784)),m=n(85893);function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}const v=1.1,x=9/16,_=2.5625,C=n(76672).Mirrored(["CIRCLE","RECT"]);function y(e,t){const{editedMedia:n,cropOverlay:a,drawCanvas:g}=e,y=(0,s.useRef)(0),b=(e,t)=>{const a=n.editData,r=y.current*_,o=(e-a.width/2)*a.scale,i=(e+a.width/2)*a.scale,l=(t+a.height/2)*a.scale,s=(t-a.height/2)*a.scale,d=r/2,u=r/2*x;return{overlapLeft:Math.min(0,-d-o)/a.scale,overlapRight:Math.min(0,i-d)/a.scale,overlapTop:Math.min(0,-u-s)/a.scale,overlapBottom:Math.min(0,l-u)/a.scale,x:o<-d&&i>d,y:s<-u&&l>u}},j=(t,a)=>{const r=n.editData,o=r.offsetX+t/r.scale,i=r.offsetY+a/r.scale,l=e.cropShape===C.RECT?b(o,i):((e,t)=>{const a=n.editData,r=y.current,o=(e-a.width/2)*a.scale,i=(e+a.width/2)*a.scale,l=(t+a.height/2)*a.scale;return{x:o<-r&&i>r,y:(t-a.height/2)*a.scale<-r&&l>r}})(o,i);l.x&&(r.offsetX=o),l.y&&(r.offsetY=i),g()},S=(e,t)=>{const n=e.stageX-t.x,a=e.stageY-t.y;j(n,a),t.x=e.stageX,t.y=e.stageY},E=t=>e.cropShape===C.RECT?(e=>{const t=y.current,a=n.editData,r=Math.max(e,t*_/a.width),o=Math.max(e,r);a.scale=o;const i=b(a.offsetX,a.offsetY);return{scale:a.scale,offsetX:a.offsetX+i.overlapLeft-i.overlapRight,offsetY:a.offsetY+i.overlapTop-i.overlapBottom}})(t):(e=>{const t=y.current,a=n.editData,r=Math.max(2*t/a.width,2*t/a.height),o=Math.max(e,r);if(a.width*e<t||a.height*e<t)return!1;const i=-t/o+a.width/2,l=t/o-a.width/2,s=-t/o+a.height/2,d=t/o-a.height/2;return{scale:o,offsetX:Math.min(Math.max(a.offsetX,l),i),offsetY:Math.min(Math.max(a.offsetY,d),s)}})(t),k=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v;const t=n.editData,a=0!==e?e:v,r=E(t.scale*a);r&&(t.scale=r.scale,t.offsetX=r.offsetX,t.offsetY=r.offsetY,g())},w=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v;const t=n.editData,a=0!==e?e:v,r=E(t.scale/a);r&&(t.scale=r.scale,t.offsetX=r.offsetX,t.offsetY=r.offsetY,g())};(0,d.useListener)(a.canvas,"mousewheel",(e=>{e.deltaY>0?k(1.02):w(1.02)})),(0,s.useEffect)((()=>{n.saveEdits();const t=n.editData,r=a.canvas;let o;o=t.baseItem?t.baseItem.getBounds():{width:0,height:0},r.style.display="block",r.width=o.width,r.height=o.height;const l=new i.Easel.Shape;l.graphics.beginFill("rgba(0, 0, 0, 0.1)"),l.graphics.drawRect(0,0,o.width,o.height),l.regX=o.width/2,l.regY=o.height/2,l.x=o.width/2,l.y=o.height/2,l.on("mousedown",(e=>{const t={x:e.stageX,y:e.stageY},n=l.on("pressmove",S,null,!1,t);l.on("pressup",(()=>{l.off("pressmove",n)}),null,!0)})),l.cursor="move";const s=r.getContext("2d"),d=r.width,u=r.height,c=d/u>500/361?u/361:d/500;y.current=Math.min(361,500)/2*.9*c;const f=y.current;if(s.fillStyle="rgba(0, 0, 0, 0.5)",s.fillRect(0,0,d,u),s.globalCompositeOperation="destination-out",s.beginPath(),e.cropShape===C.CIRCLE)s.arc(d/2,u/2,f,0,2*Math.PI,!0);else if(e.cropShape===C.RECT){const e=f*_,t=f*_*x;s.fillRect(d/2-e/2,u/2-t/2,e,t)}s.fillStyle="#ffffff",s.fill(),a.addChild(l),a.update()}),[]);const T=function(){var e=(0,r.default)((function*(){var e;const t=n.editData,a=null===(e=n.editedImage)||void 0===e?void 0:e.src,r=y.current;if(!a)throw new Error("empty image");const i=2*r;let l=i;i>c.PROF_PIC_MAX_SIDE?l=c.PROF_PIC_MAX_SIDE:i<c.PROF_PIC_MIN_SIDE&&(l=c.PROF_PIC_MIN_SIDE);const s=r*_,d=r*_*x,u=yield o.crop(a,t.width/2-s/2,t.height/2-d/2,s,d,l,l*x,o.DATA_URL|o.CANVAS),f=u.images.dataUrl;return{thumb:u.images.dataUrl,full:f}}));return function(){return e.apply(this,arguments)}}(),M=function(){var e=(0,r.default)((function*(){var e;const t=n.editData,a=null===(e=n.editedImage)||void 0===e?void 0:e.src,r=y.current;if(!a)throw new Error("empty image");const i=2*r;let l=i;i>c.PROF_PIC_MAX_SIDE?l=c.PROF_PIC_MAX_SIDE:i<c.PROF_PIC_MIN_SIDE&&(l=c.PROF_PIC_MIN_SIDE);const s=yield o.crop(a,(t.width-2*r)/2,(t.height-2*r)/2,2*r,2*r,l,l,o.DATA_URL|o.CANVAS),d=yield o.crop(s.images.canvas,0,0,c.PROF_PIC_THUMB_SIDE,c.PROF_PIC_THUMB_SIDE),u=s.images.dataUrl;return{thumb:d.images.dataUrl,full:u}}));return function(){return e.apply(this,arguments)}}(),P=()=>e.cropShape===C.RECT?T():M();(0,s.useImperativeHandle)(t,(()=>({crop:P})));const I=(0,s.useRef)(null);return(0,m.jsxs)("div",{className:f.default.scaler,children:[(0,m.jsx)(u.HotKeys,{handlers:{pageup:()=>k(),pagedown:()=>w(),down:()=>j(0,-10),up:()=>j(0,10),left:()=>j(10,0),right:()=>j(-10,0)},onFocus:e=>{if(!I.current)return;e?e.target:document.activeElement;I.current},ref:I,"aria-label":l.fbt._("Photo editor canvas widget: arrow keys move crop window, Page Up and Page Down enlarge or shrink the crop area",null,{hk:"1iV0bf"}),tabIndex:0}),(0,m.jsx)(p.default,{className:f.default.scalerButton,onClick:()=>k(),"aria-label":l.fbt._("Zoom in or shrink area of photo to be cropped",null,{hk:"20MetM"}),a8nText:"crop-tool-zoom-in",children:(0,m.jsx)(h.default,{name:"plus"})}),(0,m.jsx)(p.default,{className:f.default.scalerButton,onClick:()=>w(),"aria-label":l.fbt._("Zoom out or enlarge area of photo to be cropped",null,{hk:"445oiP"}),a8nText:"crop-tool-zoom-out",children:(0,m.jsx)(h.default,{name:"minus"})})]})}t.CropShapeType=C;const b=(0,s.forwardRef)(y);t.WrappedProfileCropTool=b},76557:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(67294),r=n(85893);function o(e,t){return(0,r.jsx)("canvas",{className:e.className,ref:t})}function i(e,t){return e.className===t.className}var l=(0,a.memo)((0,a.forwardRef)(o),i);t.default=l},40241:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.jsx)(o.Modal,{type:e.theme,children:(0,i.jsx)(r.EditImageDrawer,{onCancel:()=>{a.ModalManager.close()},onFinished:(t,n)=>{e.onFinished(t,n),a.ModalManager.close()},onRetake:e.onRetake,retryText:r.RETRY_OPTIONS.RESTART,img:e.img,cropShape:e.cropShape||void 0})})};var a=n(14597),r=n(50025),o=n(57224),i=(n(13510),n(85893))},56318:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const[t,n]=(0,s.useState)(e.initialDuration),[a,_]=(0,u.default)(i.NUX.EPHEMERAL),C=e=>n(parseInt(e.currentTarget.value,10));let y;y=a?(0,v.jsx)(f.default,{fromMe:!0}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(g.TextParagraph,{xstyle:x.explanation,children:l.fbt._("All new messages in this chat will disappear after the selected duration.",null,{hk:"4lToiN"})}),(0,p.getAllDurations)().map((e=>{let{value:n,label:a}=e;return(0,v.jsx)("div",{className:(0,d.default)(x.option),children:(0,v.jsxs)("label",{className:(0,d.default)(x.label),children:[(0,v.jsx)("input",{type:"radio",className:(0,d.default)(x.input),value:String(n),checked:n===t,onChange:C}),a]})},`option-${n}`)}))]});return(0,v.jsx)(c.default,{title:a?void 0:l.fbt._("Disappearing messages",null,{hk:"384ocn"}),onOK:a?()=>{_()}:()=>{e.onDurationSelected(t),o.ModalManager.close()},onCancel:a?()=>{(0,h.openExternalLink)((0,r.getEphemeralFaqUrl)())}:()=>{o.ModalManager.close()},cancelText:a?m.default.t(397):l.fbt._("Cancel",null,{hk:"H0gNq"}),children:y})};var r=n(21310),o=n(14597),i=n(71579),l=n(48360),s=n(67294),d=a(n(56720)),u=a(n(59732)),c=a(n(52665)),f=a(n(70263)),h=n(12591),p=n(71206),m=a(n(14296)),g=n(13923),v=n(85893);const x={option:{display:"p357zi0d",alignItems:"gndfcl4n",height:"sai7fuui"},label:{display:"f804f6gw",cursor:"ajgl1lbb"},input:{marginEnd:"claouzo6",verticalAlign:"neme6l2y"},explanation:{marginBottom:"t4zgqcuo"}}},84034:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{frequentlyForwardedCount:t,totalCount:n}=e;const a=(0,c.jsxs)("span",{className:s.default.text,children:[1===t&&1===n?o.fbt._("This message will be marked as forwarded many times.",null,{hk:"37i1m9"}):o.fbt._("One or more messages will be marked as forwarded many times.",null,{hk:"1Z8wFQ"})," ",(0,c.jsx)(l.ExternalLink,{href:(0,r.getFrequentlyForwardedFaqUrl)(),children:d.default.t(397)})]});return(0,c.jsxs)("div",{className:s.default.wrapper,children:[(0,c.jsx)("div",{className:s.default.icon,children:(0,c.jsx)(u.default,{name:"highly-forwarded"})}),(0,c.jsx)(i.default,{theme:"plain",primary:a,idle:!0})]})};var r=n(21310),o=n(48360),i=a(n(44356)),l=n(12591),s=a(n(83123)),d=a(n(14296)),u=a(n(23217)),c=n(85893)},52468:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(48360),o=n(67294),i=(a(n(56720)),a(n(60453))),l=a(n(69637)),s=n(94790),d=a(n(33308)),u=n(12591),c=n(29623),f=a(n(48846)),h=n(33210),p=n(85449),m=n(11054),g=a(n(23217)),v=n(13923),x=n(85893);const _={drawerSection:{paddingTop:"msavwer2",paddingBottom:"slgfab0f"},description:{paddingTop:"msavwer2",paddingEnd:"bcymb0na",paddingBottom:"slgfab0f",paddingStart:"e8k79tju",lineHeight:"a4ywakfo"}};function C(e,t){let{settings:n,onClose:a}=e;return(0,x.jsxs)(i.default,{ref:t,children:[(0,x.jsx)(s.DrawerHeader,{title:r.fbt._("Request Account Info",null,{hk:"2VisVV"}),onBack:a,type:s.DRAWER_HEADER_TYPE.LARGE}),(0,x.jsx)(l.default,{children:(0,x.jsxs)(d.default,{animation:!1,xstyle:_.drawerSection,children:[(0,x.jsx)(c.FlexRow,{align:"center",justify:"center",children:(0,x.jsx)(c.FlexRow,{align:"center",justify:"center",children:(0,x.jsx)(f.default,{children:(0,x.jsx)(g.default,{name:"document"})})})}),(0,x.jsxs)(v.TextDiv,{color:"secondary",size:"14",xstyle:_.description,children:[r.fbt._("Create a report of your WhatsApp account information and settings, which you can access or port to another app. This report does not include your messages.",null,{hk:"13xpse"})," ",(0,x.jsx)(u.ExternalLink,{href:(0,h.requestAccountInfoUrl)(),children:r.fbt._("Learn More",null,{hk:"bPizH"})})]}),(0,x.jsx)(o.Suspense,{fallback:(0,x.jsx)(c.FlexRow,{align:"center",justify:"center",children:(0,x.jsx)(c.FlexRow,{align:"center",justify:"center",children:(0,x.jsx)(f.default,{children:(0,x.jsx)(m.Spinner,{size:50,stroke:4})})})}),children:(0,x.jsx)(p.RequestAccountInfoSettingsDrawerBodyContent,{})})]})})]})}var y=(0,o.forwardRef)(C);t.default=y},13145:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.RequestAccountInfoSettingsDrawerAvailable=function(e){let{gdprStatus:{creation:t,documentMessage:n,expiration:a},onDeleteSuccess:x}=e;const _=(0,r.maybeNumberOrThrowIfTooLarge)(n.fileLength),[C,y]=(0,m.useGdprDownload)(),[b,j]=(0,p.useGdprDelete)();return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:(0,s.default)(v.settingsShare),children:(0,g.jsxs)(d.default,{color:"dark",disabled:C,icon:(0,g.jsx)(f.default,{name:"download"}),onClick:()=>y(n),children:[(0,g.jsx)(h.TextDiv,{children:i.fbt._("Download report",null,{hk:"24wJjF"})}),(0,g.jsx)(h.TextDiv,{theme:"muted",children:null!=_?i.fbt._("{availability_date}  {file_size}",[i.fbt._param("availability_date",l.default.unix(t).format("MMMM D, YYYY")),i.fbt._param("file_size",u.default.filesize(_))],{hk:"24AFfI"}):i.fbt._("{availability_date}",[i.fbt._param("availability_date",l.default.unix(t).format("MMMM D, YYYY"))],{hk:"1flGQw"})})]})}),(0,g.jsx)("div",{className:(0,s.default)(v.delete),children:(0,g.jsx)(d.default,{color:"dark",disabled:b,icon:(0,g.jsx)(f.default,{name:"delete"}),onClick:()=>{o.ModalManager.open((0,g.jsx)(c.RequestAccountInfoSettingsDrawerDeleteConfirmPopup,{okDisabled:b,okSpinner:b,onCancel:()=>o.ModalManager.close(),onOK:()=>j().then((e=>{e.success&&(o.ModalManager.close(),x())}))}))},children:(0,g.jsx)(h.TextDiv,{children:i.fbt._("Delete and request new report",null,{hk:"4g8Hdm"})})})}),(0,g.jsx)(h.TextDiv,{theme:"muted",xstyle:v.availability,children:i.fbt._("Your report is available to download until {availability_date}",[i.fbt._param("availability_date",l.default.unix(a).format("MMMM D, YYYY"))],{hk:"4prRdU"})})]})};var r=n(8243),o=n(14597),i=n(48360),l=a(n(30381)),s=(n(67294),a(n(56720))),d=a(n(64738)),u=a(n(14296)),c=n(39394),f=a(n(23217)),h=n(13923),p=n(28602),m=n(60768),g=n(85893);const v={availability:{marginTop:"nylzjxre",marginStart:"r6x3u63k",marginEnd:"lfum0007"},delete:{borderBottom:"n8n2xqzm"},settingsShare:{borderTop:"dl47i6rc",borderBottom:"n8n2xqzm"}}},85449:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RequestAccountInfoSettingsDrawerBodyContent=function(){const[e,t]=(0,i.useGdprStatus)();switch(null==e?void 0:e.type){case"GdprAvailableStatusResponse":return(0,l.jsx)(a.RequestAccountInfoSettingsDrawerAvailable,{gdprStatus:e,onDeleteSuccess:t});case"GdprPendingStatusResponse":return(0,l.jsx)(o.RequestAccountInfoSettingsDrawerPending,{gdprStatus:e});default:return(0,l.jsx)(r.RequestAccountInfoSettingsDrawerInitial,{onRequestSuccess:t})}};var a=n(13145),r=n(79587),o=n(82148),i=n(23218),l=n(85893)},39394:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.RequestAccountInfoSettingsDrawerDeleteConfirmPopup=function(e){let{okDisabled:t,okSpinner:n,onCancel:a,onOK:l}=e;return(0,i.jsx)(o.default,{okDisabled:t,okSpinner:n,okText:r.fbt._("Delete",null,{hk:"S1p2c"}),onCancel:a,onOK:l,children:r.fbt._("Delete report? Deleting the report will not delete any data from your account.",null,{hk:"1w4a4h"})})};var r=n(48360),o=a(n(52665)),i=n(85893)},79587:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.RequestAccountInfoSettingsDrawerInitial=function(e){let{onRequestSuccess:t}=e;const[n,a]=(0,d.useGdprRequest)();return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(i.default,{className:(0,o.default)(c),color:"dark",disabled:n,icon:(0,u.jsx)(s.default,{name:"settings-document"}),onClick:()=>{a().then((e=>{e.success&&t()}))},children:r.fbt._("Request Report",null,{hk:"2HyjPn"})}),(0,u.jsx)(l.RequestAccountInfoSettingsFooterNotice,{})]})};var r=n(48360),o=(n(67294),a(n(56720))),i=a(n(64738)),l=n(39264),s=a(n(23217)),d=n(98753),u=n(85893);const c={borderTop:"dl47i6rc",borderBottom:"n8n2xqzm"}},82148:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.RequestAccountInfoSettingsDrawerPending=function(e){let{gdprStatus:{timestamp:t}}=e;const n=r.Clock.daysDelta(r.Clock.globalUnixTime(),t);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(s.default,{color:"dark",className:(0,l.default)(h),icon:(0,f.jsx)(u.default,{name:"business-hours"}),onClick:()=>{},children:[(0,f.jsx)(c.TextDiv,{children:o.fbt._("Request sent",null,{hk:"3HaEMW"})}),(0,f.jsx)(c.TextDiv,{theme:"muted",children:o.fbt._("Ready by {availability_date}",[o.fbt._param("availability_date",i.default.unix(t).format("MMMM D, YYYY"))],{hk:"3zr2Aw"})})]}),(0,f.jsx)(d.RequestAccountInfoSettingsFooterNotice,{daysDelta:n})]})};var r=n(40234),o=n(48360),i=a(n(30381)),l=(n(67294),a(n(56720))),s=a(n(64738)),d=n(39264),u=a(n(23217)),c=n(13923),f=n(85893);const h={cursor:"bx7g2weo",borderTop:"dl47i6rc",borderBottom:"n8n2xqzm"}},39264:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.RequestAccountInfoSettingsFooterNotice=function(e){let{daysDelta:t=3}=e;return(0,l.jsxs)("div",{className:(0,o.default)(s.footer),children:[(0,l.jsx)(i.TextDiv,{theme:"muted",xstyle:s.availability,children:r.fbt._({"*":"Your report will be ready in about {number} days. You'll have a few weeks to download your report after it's available.",_1:"Your report will be ready in about 1 day. You'll have a few weeks to download your report after it's available."},[r.fbt._plural(t,"number",t)],{hk:"124kzp"})}),(0,l.jsx)(i.TextDiv,{theme:"muted",children:r.fbt._("Your request will be canceled if you make changes to your account such as changing your number or deleting your account.",null,{hk:"2OLjoV"})})]})};var r=n(48360),o=a(n(56720)),i=n(13923),l=n(85893);const s={availability:{marginBottom:"or9x5nie"},footer:{paddingTop:"msavwer2",paddingStart:"e8k79tju",paddingEnd:"bcymb0na"}}},61703:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(89385),o=n(50796),i=n(13959),l=a(n(47259)),s=n(92574),d=n(88555),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=F(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(n(35232)),c=n(14597),f=n(94816),h=n(48360),p=n(67294),m=n(35461),g=a(n(3409)),v=a(n(44356)),x=a(n(26609)),_=n(88984),C=a(n(60453)),y=a(n(69637)),b=a(n(64738)),j=n(94790),S=n(65417),E=n(85600),k=n(73058),w=a(n(73333)),T=a(n(21649)),M=n(55800),P=n(55981),I=a(n(14296)),O=n(74028),L=n(52596),A=n(11234),D=a(n(51628)),R=a(n(23217)),N=n(50452),B=n(85893);function F(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(F=function(e){return e?n:t})(e)}const U="group-invite-link-anchor",G=0,H=1,z=2;function W(e){let t,{state:n,chat:a,groupMetadata:r,onRevokeGroupInviteClick:o,onSendLinkButtonClick:i}=e;if(n===G)t=(0,B.jsx)(E.LoadingWithText,{text:I.default.t(335)});else if(n===H)t=(0,B.jsx)(E.LoadingWithText,{text:I.default.t(343,{groupName:a.contact.name})});else{const e=r.groupInviteLink;let n=null;document.queryCommandSupported("copy")&&(n=(0,B.jsx)(x.default,{elementId:U}));const l=r.groupType===P.GroupType.COMMUNITY,s=(0,B.jsx)(_.DetailImage,{id:a.id,size:82,quality:_.DetailImageQuality.High,shape:l?_.DetailImageShape.Squircle:_.DetailImageShape.Circle}),d=(0,B.jsx)("span",{className:w.default.linkContainer,children:(0,B.jsx)(L.SelectableLink,{id:U,href:e,selectable:!0,children:e})});t=(0,B.jsxs)(y.default,{children:[(0,B.jsx)(v.default,{image:s,primary:(0,B.jsx)(S.EmojiText,{text:a.contact.name,direction:"auto"}),theme:"identity",secondary:d}),(0,B.jsx)("div",{className:w.default.descContainer,children:I.default.t(338)}),(0,B.jsx)(D.default,{onClick:i}),n,(0,B.jsx)(b.default,{a8nText:"li-revoke-link",icon:(0,B.jsx)(R.default,{name:"revoke",className:w.default.icon}),onClick:o,children:h.fbt._("Reset link",null,{hk:"37cdK4"})})]})}return t}function q(e,t){const{onBack:n,chat:a,useLargeHeader:v}=e,[x,_]=(0,p.useState)(G),y=(0,g.default)(),b=(0,m.useModelValues)(e.groupMetadata,["inviteCode","groupInviteLink","groupType"]),S=e=>{switch(e){case 401:return I.default.t(340);case 403:return h.fbt._("You can't view this group's invite link because you're no longer a participant.",null,{hk:"4fEfyY"});case 404:return h.fbt._("You can't view this group's invite link because this group has ended.",null,{hk:"2fhpj0"});case 436:return h.fbt._("Invite via link is temporarily unavailable for this group.",null,{hk:"11ALNM"});default:return I.default.t(341)}};(0,p.useEffect)((()=>{(0,l.default)((0,k.queryGroupInviteCode)(b),y).then((()=>{_(z)})).catch((0,o.filteredCatch)(s.ServerStatusCodeError,(e=>{(e=>{const t=S(e);n(),436===e&&((0,d.isMDBackend)()&&(0,O.queryAndUpdateGroupMetadataById)(a.id),(0,M.openGrowthLockedModal)(!0)),f.ToastManager.open((0,B.jsx)(N.Toast,{msg:t,id:(0,N.genId)()}))})(e.statusCode)}))).catch((0,r.catchAbort)((()=>{})))}),[]);const E=()=>{_(H);const e=(0,k.revokeGroupInvite)(b);(0,i.delayMs)(500).then((()=>e)).then((()=>{f.ToastManager.open((0,B.jsx)(N.Toast,{msg:h.fbt._("The previous invite link is now reset and a new invite link has been created.",null,{hk:"2RPI3K"}),id:(0,N.genId)()})),_(z)})).catch((0,o.filteredCatch)(s.ServerStatusCodeError,(e=>{(e=>{const t=S(e);n(),f.ToastManager.open((0,B.jsx)(N.Toast,{msg:t,id:(0,N.genId)()}))})(e.statusCode)}))).catch((0,o.filteredCatch)(u.Unmount,(()=>{})))};return(0,B.jsxs)(C.default,{ref:t,children:[(0,B.jsx)(j.DrawerHeader,{title:h.fbt._("Invite to group via link",null,{hk:"3vDtFL"}),onBack:e.onBack,rtlFixIfOnDarwin:!0,type:!0===v?j.DRAWER_HEADER_TYPE.LARGE:j.DRAWER_HEADER_TYPE.SMALL}),(0,B.jsx)(W,{state:x,chat:a,groupMetadata:b,onRevokeGroupInviteClick:()=>{c.ModalManager.open((0,B.jsx)(T.default,{pushTransition:"none",popTransition:"none",chat:a,onConfirm:E}),{transition:"modal-flow"})},onSendLinkButtonClick:()=>{c.ModalManager.open((0,B.jsx)(A.SendGroupInviteFlowLoadable,{chat:a}),{transition:"modal-flow"})}})]})}var V=(0,p.forwardRef)(q);t.default=V},1686:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onConfirm:t}=e;return(0,d.jsx)(i.default,{title:o.fbt._("Reset link",null,{hk:"37cdK4"}),onOK:()=>{t(),r.ModalManager.close()},okText:o.fbt._("Reset link",null,{hk:"37cdK4"}),onCancel:()=>{r.ModalManager.close()},cancelText:o.fbt._("Cancel",null,{hk:"H0gNq"}),children:(0,d.jsx)("div",{className:l.default.confirmationText,children:s.default.t(342,{groupName:e.chat.contact.name})})})};var r=n(14597),o=n(48360),i=a(n(52665)),l=a(n(3254)),s=a(n(14296)),d=n(85893)},21024:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,m.useModelValues)(e.msg,["id","star","type","isGif","isViewOnce","labels","numTimesForwarded","isFrequentlyForwarded","chat","agentId"]),n=(0,v.default)(),a=(0,g.default)(),r=(0,h.default)((()=>new k.default)),o=(0,c.useRef)(null),_=(0,c.useRef)(null),[M,I]=(0,c.useState)(void 0),[F,H]=(0,c.useState)(!1);(0,c.useEffect)((()=>{var e;B.MsgInfoCollection.find(t.id).then((e=>{n.aborted||I(e)})).catch((()=>{H(!0),d.ToastManager.open((0,X.jsx)(Y.Toast,{msg:u.fbt._("Couldn't display message info. Try again later.",null,{hk:"mRFf6"}),id:(0,Y.genId)("msg_info_failed")}))}));const a=null===(e=o.current)||void 0===e?void 0:e.getContainer();t.type===s.MSG_TYPE.IMAGE&&a&&(a.scrollTop=a.scrollHeight);const r=new R.default.UiAction({uiActionType:R.default.UI_ACTION_TYPE.MSG_INFO_OPEN,uiActionPreloaded:!0}),i=w.default.get(t.chat.id),l=null==i?void 0:i.cachedDeviceSizeBucket;null!=l&&(r.sizeBucket=l),Object.assign(r,(0,T.getGroupMetricsFromChatWid)(t.chat.id)),r.markUiActionT(),r.commit(),(0,G.logUiActionShadowPrivateStatsTestEvents)(),(0,x.logMessageInfo)(t.agentId)}),[]);const z=()=>{var e;return null===(e=_.current)||void 0===e?void 0:e.getMsgComponentRef()},q=(0,f.default)();let V;(0,p.useListener)(null==M?void 0:M.played,["add","remove"],q),(0,p.useListener)(null==M?void 0:M.read,["add","remove"],q),(0,p.useListener)(null==M?void 0:M.delivery,["add","remove"],q),(0,p.useListener)(t,"remove",((e,t)=>{t===N.MsgCollection&&(null==a||a.requestDismiss())})),M||F||(V=(0,X.jsx)("div",{className:P.default.spinner,children:(0,X.jsx)(W.Spinner,{size:50,stroke:4})}));const J=(()=>{const e=[];if((0,l.isMultiDeviceAgentsEnabled)()){const n=(0,K.getAgentName)(t.agentId);e.push({kind:"section",type:O.SECTIONS.AGENT_HEADER,itemKey:O.SECTIONS.AGENT_HEADER,height:50}),e.push({kind:"agent-row",agentName:n,itemKey:"agent-"+n.toString(),height:Z})}const n=t.type===s.MSG_TYPE.PTT,a=n||t.isViewOnce;if(M&&a){let t=n?O.SECTIONS.PLAYED_HEADER:O.SECTIONS.VIEWED_HEADER;e.push({kind:"section",type:t,itemKey:t,height:50}),e.push(...M.played.map((e=>({participant:e,kind:"contact-row",itemKey:e.id.toString(),height:E.DEFAULT_ITEM_HEIGHT})))),M.playedRemaining>0&&(t=n?O.SECTIONS.PLAYED_FOOTER:O.SECTIONS.VIEWED_FOOTER,e.push({kind:"section",type:t,itemKey:t,height:50}))}return M&&(M.read.length>0||M.playedRemaining>0)&&(e.push({kind:"section",type:a?O.SECTIONS.SEEN_HEADER:O.SECTIONS.READ_HEADER,itemKey:O.SECTIONS.READ_HEADER,height:50}),e.push(...M.read.map((e=>({participant:e,kind:"contact-row",itemKey:e.id.toString(),height:E.DEFAULT_ITEM_HEIGHT})))),M.readRemaining>0&&e.push({kind:"section",type:O.SECTIONS.READ_FOOTER,itemKey:a?O.SECTIONS.SEEN_FOOTER:O.SECTIONS.READ_FOOTER,height:50})),M&&(M.delivery.length>0||M.deliveryRemaining>0)&&(e.push({kind:"section",type:O.SECTIONS.DELIVERED_HEADER,itemKey:O.SECTIONS.DELIVERED_HEADER,height:50}),e.push(...M.delivery.map((e=>({participant:e,kind:"contact-row",itemKey:e.id.toString(),height:E.DEFAULT_ITEM_HEIGHT})))),M.deliveryRemaining>0&&e.push({kind:"section",type:O.SECTIONS.DELIVERED_FOOTER,itemKey:O.SECTIONS.DELIVERED_FOOTER,height:50})),t.numTimesForwarded>0&&!t.isFrequentlyForwarded&&e.push({kind:"section",type:O.SECTIONS.FORWARD_COUNT,itemKey:O.SECTIONS.FORWARD_COUNT,height:60}),e})(),$=J.length?(0,X.jsx)(E.FlatList,{flatListController:r.current,direction:"vertical",forceConsistentRenderCount:!1,data:J,renderItem:e=>(0,X.jsx)(ne,{data:e,msg:t,msgInfo:M})}):null;let ee=null;t.labels&&t.labels.length>0&&(0,l.canDisplayLabel)()&&(ee=(0,X.jsx)(S.default,{theme:"padding",children:(0,X.jsx)(L.default,{labels:t.labels})}));return(0,X.jsxs)(y.default,{theme:"striped",children:[(0,X.jsx)(j.DrawerHeader,{title:A.default.t(459),type:j.DRAWER_HEADER_TYPE.SMALL,rtlFixIfOnDarwin:!0,onCancel:()=>{null==a||a.requestDismiss()}}),(0,X.jsx)(U.default,{ref:o,chatPreference:C.default.assertGet("defaultPreference"),children:(0,X.jsx)(Q.Wrapper,{msg:t,ref:_,displayType:i.DISPLAY_TYPE.MSG_INFO,isMsgVisible:function(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e===t.id&&(!!n||z())},position:D.MsgPosition.END,onProductClick:e.onProductClick})}),(0,X.jsxs)(b.default,{flatListControllers:[r.current],children:[ee,V,(0,X.jsx)("div",{className:P.default.list,children:$})]})]})};var r=a(n(45095)),o=a(n(99964)),i=n(5177),l=n(8139),s=n(15461),d=n(94816),u=n(48360),c=n(67294),f=a(n(59312)),h=a(n(16223)),p=n(87550),m=n(35461),g=a(n(95402)),v=a(n(3409)),x=n(98706),_=a(n(32074)),C=a(n(66034)),y=a(n(60453)),b=a(n(69637)),j=n(94790),S=a(n(33308)),E=n(47915),k=a(n(30855)),w=a(n(63928)),T=n(42515),M=a(n(47834)),P=a(n(49818)),I=a(n(76231)),O=n(26551),L=a(n(77577)),A=a(n(14296)),D=n(87931),R=a(n(11339)),N=n(59871),B=n(17972),F=a(n(82678)),U=a(n(1697)),G=n(7595),H=a(n(53145)),z=n(64551),W=n(11054),q=a(n(23217)),V=n(13923),Y=n(50452),K=n(61126),Q=n(58827),X=n(85893);const Z=E.DEFAULT_ITEM_HEIGHT+10;function J(e){let{msg:t}=e;return z.ServerProps.hfmStringChanges?null:(0,X.jsx)("div",{className:P.default.forwardCount,children:(0,X.jsx)(F.default,{msg:t})})}function $(e){let{participant:t}=e;return(0,X.jsx)(M.default,{msgInfoParticipant:t,contact:t.contact,theme:"drawer-list"})}function ee(e){let{msg:t,agentName:n}=e;return(0,X.jsx)(_.default,{msg:t,agentName:n,theme:"drawer-list"})}function te(e){let t,n,{section:a,msg:r}=e;switch(a){case O.SECTIONS.PLAYED_HEADER:n=(0,X.jsx)(q.default,{name:"status-ptt",className:P.default.statusBlue}),t=A.default.t(463);break;case O.SECTIONS.READ_HEADER:n=(0,X.jsx)(q.default,{name:"status-dblcheck",className:P.default.ack}),t=A.default.t(465);break;case O.SECTIONS.SEEN_HEADER:n=(0,X.jsx)(q.default,{name:"status-dblcheck",className:P.default.ack}),t=r.isViewOnce?u.fbt._("Seen by",null,{hk:"4Bzrhu"}):u.fbt._("Seen by",null,{hk:"3vzp0U"});break;case O.SECTIONS.DELIVERED_HEADER:n=(0,X.jsx)(q.default,{name:"status-dblcheck"}),t=A.default.t(461);break;case O.SECTIONS.VIEWED_HEADER:n=(0,X.jsx)(q.default,{name:"view-once-viewed",className:P.default.statusBlue}),t=u.fbt._("Opened by",null,{hk:"1F48Ey"});break;case O.SECTIONS.AGENT_HEADER:n=(0,X.jsx)(q.default,{name:"md-opt-in"}),t=u.fbt._("Sent from",null,{hk:"2AvZI7"});break;default:return __LOG__(4,void 0,new Error)`Invalid SECTION for group message info section header`,null}return n=(0,X.jsx)("div",{className:P.default.titleIcon,children:n}),(0,X.jsx)("div",{"data-a8n":o.default.key("msg-info-title"),className:P.default.title,children:(0,X.jsx)(H.default,{side:n,ellipsify:!0,children:(0,X.jsx)(V.TextSpan,{theme:"section-title",children:t})})})}function ne(e){let{data:t,msg:n,msgInfo:a}=e;if("contact-row"===t.kind)return(0,X.jsx)($,{participant:t.participant});if("agent-row"===t.kind)return(0,X.jsx)(ee,{msg:n,agentName:t.agentName});if(t.type===O.SECTIONS.FORWARD_COUNT)return(0,X.jsx)(J,{msg:n});switch(t.type){case O.SECTIONS.PLAYED_HEADER:case O.SECTIONS.READ_HEADER:case O.SECTIONS.SEEN_HEADER:case O.SECTIONS.DELIVERED_HEADER:case O.SECTIONS.VIEWED_HEADER:case O.SECTIONS.AGENT_HEADER:return(0,X.jsx)(te,{msg:n,section:t.type});default:return(0,X.jsx)(I.default,{section:t.type,msgInfo:(0,r.default)(a,"msgInfo")})}}},76231:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,o.useModelValues)(e.msgInfo,["playedRemaining","readRemaining","deliveryRemaining"]);let n,a,c;switch(e.section){case l.SECTIONS.PLAYED_FOOTER:case l.SECTIONS.VIEWED_FOOTER:n=t.playedRemaining,a=t.playedRemaining;break;case l.SECTIONS.READ_FOOTER:case l.SECTIONS.SEEN_FOOTER:n=t.readRemaining,a=t.readRemaining;break;case l.SECTIONS.DELIVERED_FOOTER:n=t.deliveryRemaining,a=t.deliveryRemaining;break;default:return __LOG__(4,void 0,new Error)`Invalid SECTION for group message info section footer`,null}if(null==n||0===n)return null;c={count:n,_plural:a};const f=s.default.t(466,c);return(0,u.jsx)("div",{"data-a8n":r.default.key("msg-info-remaining"),className:i.default.footer,children:(0,u.jsx)(d.TextSpan,{theme:"muted",children:f})})};var r=a(n(99964)),o=n(35461),i=a(n(49818)),l=n(26551),s=a(n(14296)),d=n(13923),u=n(85893)},26551:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SECTIONS=void 0;const a=n(76672).Mirrored(["DELIVERED_FOOTER","DELIVERED_HEADER","FORWARD_COUNT","PLAYED_FOOTER","PLAYED_HEADER","READ_FOOTER","READ_HEADER","SEEN_FOOTER","SEEN_HEADER","VIEWED_FOOTER","VIEWED_HEADER","AGENT_HEADER"]);t.SECTIONS=a},72696:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onClose:t,gid:n,onSend:a}=e,j=(0,l.useRef)(null),S=(0,l.useRef)(null),[E,k]=(0,l.useState)(i.fbt._("Invitation to join my WhatsApp group",null,{hk:"2WNS77"}).toString()),w=(0,b.jsx)(_.Round,{a8nText:"group-participants-btn",large:!0,onClick:()=>{(()=>{const e=x.ProfilePicThumbCollection.get(n);return new Promise((t=>{e&&e.img?(0,p.default)(e.img).then((e=>{if(e.ok)return e.blob();t(void 0)})).then((e=>{if(!e)return;const n=new FileReader;n.onloadend=function(){const e=n.result;if(null==e)return void t(void 0);const a=e.toString().split(",")[1];t(a)},n.readAsDataURL(e)})).catch((()=>t(void 0))):t(void 0)}))})().then((e=>{a(E,e)}))},children:(0,b.jsx)(C.default,{name:"send",directional:!0})}),T=(0,b.jsx)(d.DetailImage,{id:e.gid}),M=(0,b.jsx)(h.EmojiText,{text:e.subject});return(0,b.jsx)(g.Modal,{type:g.ModalTheme.Invite,children:(0,b.jsxs)(u.default,{theme:"invite",children:[(0,b.jsx)(f.DrawerHeader,{type:f.DRAWER_HEADER_TYPE.POPUP,title:i.fbt._("Send invite to...",null,{hk:"2Yaa3P"}),onCancel:()=>{t()}}),(0,b.jsxs)(c.default,{children:[(0,b.jsx)("div",{className:m.default.search,children:(0,b.jsx)("div",{"data-list-scroll-container":!0,children:(0,b.jsx)(v.default,{ref:j,theme:"list-names",contacts:e.participants.map((e=>e.contact))})})}),(0,b.jsx)("div",{className:m.default.commentInput,children:(0,b.jsx)(y.TextInput,{a8n:"groups-v4-invite-add-comment-input",ref:S,value:E,showRemaining:!0,maxLength:r.default.MAX_CAPTION_LENGTH,onChange:e=>{k(e)},theme:"v4-invite-caption",supportsEmoji:!0})}),(0,b.jsx)(o.default,{transitionName:"btn",className:m.default.onSendInvite,children:w}),(0,b.jsx)("div",{className:m.default.groupInfo,children:(0,b.jsx)(s.default,{idle:!0,image:T,primary:M,secondary:i.fbt._("WhatsApp group invite",null,{hk:"Yox1t"}),theme:"group_v4_invite"})})]})]})})};var r=a(n(64369)),o=a(n(40436)),i=n(48360),l=n(67294),s=a(n(44356)),d=n(88984),u=a(n(60453)),c=a(n(69637)),f=n(94790),h=n(65417),p=a(n(26847)),m=a(n(95418)),g=n(57224),v=a(n(53153)),x=n(82039),_=n(82857),C=a(n(23217)),y=n(90011),b=n(85893)},19317:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(63105)),o=a(n(35161)),i=n(13959),l=a(n(97039)),s=n(67294),d=a(n(51799)),u=a(n(16223)),c=n(65511),f=n(85600),h=a(n(14296)),p=a(n(67568)),m=a(n(88406)),g=n(85893);function v(e){let t,n,{subtitle:a,active:r,chat:o,onClick:i}=e;const l="boolean"!=typeof a;return l&&(t=a,n="group-modal"),(0,g.jsx)(c.Chat,{chat:o,mode:c.Mode.INFO,active:r,secondary:t,noContext:!0,theme:n,onClick:l?void 0:i.bind(null,o)})}function x(e,t){const{onCancel:a,chats:x,filter:_=(()=>!0),onGroup:C}=e,y=(0,u.default)((()=>new m.default([],(e=>e)))),[b,j]=(0,s.useState)(!0),[S,E]=(0,s.useState)(void 0);(0,s.useEffect)((()=>{(0,i.delayMs)(300).then((()=>Promise.all((0,o.default)((0,r.default)(x,(e=>{var t;return null===(t=e.groupMetadata)||void 0===t?void 0:t.stale})),(e=>{var t;return n(63928).default.update(null===(t=e.groupMetadata)||void 0===t?void 0:t.id).catch((()=>{}))}))))).then((()=>j(!1)))}),[]);const k=(0,d.default)(E,100),w=b?(0,g.jsx)(f.Loading,{}):(0,g.jsx)(f.SearchGroups,{});return(0,g.jsx)(p.default,{title:h.default.t(772),data:(()=>{if(b)return[];const e=h.default.accentFold(S),t=(0,l.default)(e),n=x.filter((n=>_(n)&&(!e||e&&n.contact.searchMatch(e,t))));return y.current.init(n.filter((e=>!0===_(e))).map((e=>e.id))),n.map((e=>({chat:e,itemKey:e.id.toString()})))})(),renderItem:e=>{let{chat:t}=e;return(0,g.jsx)(v,{chat:t,subtitle:_(t),active:y.current,onClick:C})},emptyState:w,selection:y.current,onCancel:a,onSearch:k,onSelect:(e,t)=>{if(!(t instanceof c.Mode))return;const n=t.props.chat;!0===_(n)&&C(t.props.chat)},ref:t,searchPlaceholder:h.default.t(573)})}var _=(0,s.forwardRef)(x);t.default=_},87679:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(99964)),o=n(14597),i=n(78820),l=a(n(40436)),s=n(48360),d=n(67294),u=a(n(56720)),c=a(n(16031)),f=a(n(60453)),h=a(n(35721)),p=a(n(69637)),m=n(94790),g=a(n(33308)),v=a(n(13699)),x=a(n(56318)),_=n(28307),C=n(79259),y=a(n(14296)),b=n(41566),j=n(33646),S=a(n(43556)),E=n(82857),k=a(n(23217)),w=n(13923),T=n(90011),M=n(85893);const P={nextButton:{zIndex:"b9fczbqn",display:"p357zi0d",justifyContent:"j1p1mz06",paddingBottom:"gpgqxepn",marginTop:"th20vg8r",textAlign:"qfejxiq4"},section:{marginTop:"th20vg8r",marginEnd:"ramqyho6",marginBottom:"nym7wvdi",marginStart:"m51t5hoj"},header:{marginBottom:"j4enbv94"},chevronIcon:{color:"cs9t9or5"},labelDescription:{paddingTop:"jqo0jpsc",paddingEnd:"lr0bazt3",paddingBottom:"pxqbdkc7",paddingStart:"djc9pm98",lineHeight:"htjsae3x",color:"i8b0kslj"}};function I(e){let t,{ephemeralDuration:n,handleEphemeralDurationClick:a}=e;if(!(0,b.isDisappearingModeEnabled)())return null;t=n>0?(0,b.isEphemeral24HDurationEnabled)()?(0,C.getDisappearingMessageDurationString)(n):y.default.t(297):y.default.t(296);const r=(0,M.jsx)(k.default,{xstyle:P.chevronIcon,name:"chevron-right-alt",directional:!0});return(0,M.jsx)(g.default,{children:(0,M.jsxs)(h.default,{onClick:a,side:r,multiline:!0,children:[(0,M.jsx)("div",{className:(0,u.default)(P.header),children:(0,M.jsx)(w.TextHeader,{level:"3",theme:"title",children:s.fbt._("Disappearing messages",null,{hk:"384ocn"})})}),(0,M.jsx)(w.TextParagraph,{theme:"muted",children:t})]})})}var O=(0,d.forwardRef)(((e,t)=>{const{participants:n=[],onSubmit:a}=e,h=(0,d.useRef)(null),C=(0,d.useRef)(null),[O,L]=(0,d.useState)(e.subject||""),[A,D]=(0,d.useState)(e.thumb),[R,N]=(0,d.useState)(e.full),[B,F]=(0,d.useState)((()=>{var e,t;let n;if((0,b.isDisappearingModeEnabled)()){const e=(0,i.getMaybeMeUser)();e&&(n=(0,_.getDisappearingModeSettingForUser)(e))}return null!==(e=null===(t=n)||void 0===t?void 0:t.duration)&&void 0!==e?e:0}));(0,d.useEffect)((()=>{var e;null===(e=h.current)||void 0===e||e.restoreFocus()}),[]);const U=(0,c.default)((()=>{const e=(0,v.default)(O.trim());a(e,A,R,B,n)})),G=O.trim().length>0;return(0,d.useImperativeHandle)(t,(()=>({restoreFocus:()=>{var e;return null===(e=h.current)||void 0===e?void 0:e.restoreFocus()},getElement:()=>C.current}))),(0,M.jsxs)(f.default,{children:[(0,M.jsx)(m.DrawerHeader,{title:y.default.t(518),type:m.DRAWER_HEADER_TYPE.LARGE,onBack:e.onBack}),(0,M.jsxs)(p.default,{children:[(0,M.jsxs)(g.default,{children:[(0,M.jsx)("div",{className:(0,u.default)(P.section),children:(0,M.jsx)(j.PhotoPickerLoadable,{type:S.default.GROUP,attachToChat:!1,startImage:R,onImageSet:(e,t)=>{D(e),N(t)}})}),(0,M.jsx)("div",{"data-a8n":r.default.key("group-subject"),className:(0,u.default)(P.section),ref:C,children:(0,M.jsx)(T.TextInput,{ref:h,value:O,maxLength:25,showRemaining:!0,onChange:e=>{L(e)},placeholder:y.default.t(360),onEnter:G?U:()=>{},supportsEmoji:!0})})]}),(0,M.jsx)(I,{ephemeralDuration:B,handleEphemeralDurationClick:()=>{o.ModalManager.open((0,M.jsx)(x.default,{initialDuration:B,onDurationSelected:F}))}}),!0===e.isCommunityCreation&&(0,M.jsx)(w.TextSpan,{xstyle:P.labelDescription,children:s.fbt._("You can add people to this group after the community is created",null,{hk:"2Zn9R5"})}),(0,M.jsx)(l.default,{transitionName:"btn",children:!0===G&&(0,M.jsx)("div",{className:(0,u.default)(P.nextButton),children:(0,M.jsx)(E.Round,{a8nText:"create-group-btn",onClick:U,children:(0,M.jsx)(k.default,{name:"checkmark-medium"})})})})]})]})}));t.default=O},85201:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{participants:t=[],onBack:n,onContinue:a}=e,G=(0,_.default)(),H=(0,x.default)((()=>new M.default)),z=(0,v.useRef)(null),W=(0,v.useRef)(null),q=(0,v.useRef)(null),V=(0,v.useRef)(null),[Y,K]=(0,v.useState)(""),[Q,X]=(0,v.useState)(t),[Z,J]=(0,v.useState)(!0),[$,ee]=(0,v.useState)(!1),te=()=>{s.default.shouldIndicateFocus(),d.default.focus(q.current)},ne=e=>{var t,n;e.repeat||0!==(null===(t=q.current)||void 0===t?void 0:t.selectionStart)||z.current&&(e.preventDefault(),e.stopPropagation(),null===(n=z.current)||void 0===n||n.focusLast())},ae=()=>{a(Q)},re=e=>{const t=(0,u.getGroupSizeLimit)();if(Q.length>=t){const e=I.default.t(48,{max:t});h.ToastManager.open((0,F.jsx)(B.Toast,{msg:e,id:U}))}else K(""),X(Q.concat(e)),J(!0)},oe=()=>{const e=(0,r.default)(b.ContactCollection.getFilteredContacts(),Q);let t=Y;if(!t)return e;t=I.default.accentFold(t);const n=(0,f.default)(t);return e.filter((e=>e.searchMatch(t,n)))},ie=(e,t)=>{Q.find((e=>e.id.equals(t.id)))?(e=>{X((0,i.default)(Q,(t=>!e.id.equals(t.id)))),J(!0)})(t):t.isBlocked()?c.ModalManager.open((0,F.jsx)(y.default,{title:I.default.t(129),onOK:()=>{(e=>{ee(!0),(0,C.unblockContact)(e).then((()=>{G.aborted||(re(e),ee(!1))})).catch((()=>{ee(!1)}))})(t),c.ModalManager.close()},onCancel:()=>c.ModalManager.close(),okText:g.fbt._("Yes",null,{hk:"12b9aE"}),cancelText:g.fbt._("No",null,{hk:"4G38V6"}),children:g.fbt._("The contact you have selected is blocked. Would you like to unblock them and add them to the group?",null,{hk:"3i4hjJ"})})):re(t)};let le;(0,v.useEffect)((()=>{if(q.current){const e=q.current.offsetParent.offsetWidth-10,t=V.current.offsetWidth,n=t>e?e:t;let a;q.current.style.width=n+"px",a=e-q.current.offsetLeft-n>0?e-q.current.offsetLeft:e,q.current.style.width=a+"px",Z&&d.default.focus(q.current)}})),$?le=(0,F.jsx)("div",{className:O.default.spinner,children:(0,F.jsx)(R.Spinner,{stroke:6,size:24})}):Q.length&&(le=(0,F.jsx)(A.Round,{a8nText:"group-participants-btn",onClick:ae,children:(0,F.jsx)(N.default,{name:"arrow-forward",directional:!0})}));const se=Q.length?" ":I.default.t(356),de={down:e=>{var t;W.current&&(e.preventDefault(),e.stopPropagation(),s.default.shouldIndicateFocus(),null===(t=W.current)||void 0===t||t.focusFirst())},enter:Y?e=>{e.preventDefault(),e.stopPropagation();const t=oe()[0];t&&ie(0,t)}:(null==Q?void 0:Q.length)?ae:()=>{},up:ne};de[I.default.LR("left","right")]=ne;const ue=oe();let ce;ce=0===ue.length?(0,F.jsx)(w.SearchContacts,{}):(0,F.jsx)(j.default,{ref:W,flatListController:H.current,contacts:ue,onClick:ie,onFocusSearch:te,showPersonGroupDivisionHeader:!1});return(0,F.jsxs)(S.default,{children:[(0,F.jsx)(k.DrawerHeader,{title:g.fbt._("Add group participants",null,{hk:"24QOhm"}),type:k.DRAWER_HEADER_TYPE.LARGE,onBack:()=>{n()}}),(0,F.jsxs)(E.default,{children:[(0,F.jsx)("div",{className:O.default.search,children:(0,F.jsx)("div",{children:(0,F.jsxs)(P.HotKeys,{handlers:de,className:O.default.inputLine,children:[(0,F.jsx)("div",{"data-list-scroll-container":!0,children:(0,F.jsx)(L.default,{ref:z,theme:"list-names",contacts:Q,onDelete:(e,t)=>{const n=(0,i.default)(Q,(e=>!e.id.equals(t.id)));X(n),J(!n.length)},onFocusSearch:te})}),(0,F.jsx)("input",{"data-a8n":l.default.key("inputarea"),className:(0,m.default)(O.default.inputarea,D.SELECTABLE_INPUT_CSS_CLASS),ref:q,placeholder:se,onKeyDown:e=>{"Backspace"!==e.key||Y||(0,o.default)(Q)||(e.preventDefault(),X(Q.slice(0,Q.length-1)),J(!0))},onChange:e=>{K(e.target.value)},value:Y,type:"text"}),(0,F.jsx)("span",{className:O.default.inputareaSizer,ref:V,children:Y})]})})}),(0,F.jsx)(T.default,{className:O.default.contacts,flatListControllers:[H.current],children:ce}),(0,F.jsx)(p.default,{transitionName:"btn",className:O.default.drawerSection,children:le})]})]})};var r=a(n(91966)),o=a(n(41609)),i=a(n(63105)),l=a(n(99964)),s=a(n(45120)),d=a(n(52013)),u=n(8139),c=n(14597),f=a(n(97039)),h=n(94816),p=a(n(40436)),m=a(n(94184)),g=n(48360),v=n(67294),x=a(n(16223)),_=a(n(3409)),C=n(80140),y=a(n(52665)),b=n(19380),j=a(n(35487)),S=a(n(60453)),E=a(n(69637)),k=n(94790),w=n(85600),T=a(n(44942)),M=a(n(30855)),P=n(29424),I=a(n(14296)),O=a(n(83127)),L=a(n(53153)),A=n(82857),D=n(52596),R=n(11054),N=a(n(23217)),B=n(50452),F=n(85893);const U=(0,B.genId)("max_participant_toast")},15048:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;n(81572);var r=n(21310),o=n(14597),i=n(26741),l=n(48360),s=n(67294),d=a(n(9349)),u=n(89721),c=n(17239),f=a(n(50485)),h=a(n(60453)),p=a(n(69637)),m=a(n(64738)),g=n(94790),v=n(12591),x=a(n(77798)),_=a(n(14296)),C=n(88240),y=n(93045),b=a(n(11339)),j=a(n(23217)),S=n(73953),E=a(n(56204)),k=n(85893);const w={id:"animated-doodle",selectors:[`.${x.default.animation}`],low:{default:d.default},high:{default:d.default}};function T(e,t){const n=(0,s.useRef)(-1),a=(0,s.useRef)(!1),d=(e,t)=>{(0,y.logSessionEvent)(e,n.current,t),a.current=!0};(0,s.useEffect)((()=>(n.current=performance.now(),u.AssetLoader.loadAsset(w,u.LOAD_PRIORITY.HELP_ANIMATED_DOODLE),()=>{a.current||d(b.default.CONTACT_US_EXIT_STATE.CANCELLED)})),[]);const T=()=>{d(b.default.CONTACT_US_EXIT_STATE.PROBLEM_DESCRIPTION)},M=e=>{d(b.default.CONTACT_US_EXIT_STATE.EMAIL_SEND,e)},P=()=>{},I=()=>{o.ModalManager.open((0,k.jsx)(C.LicensesPopupLoadable,{onOk:P}))};let O;i.UA.isElectron&&(O=(0,k.jsx)(m.default,{a8nText:"li-licenses",onClick:I,icon:(0,k.jsx)(j.default,{name:"settings-document",height:24}),children:l.fbt._("Licenses",null,{hk:"39PWhp"})}));const L=c.Conn.isSMB?l.fbt._("Terms",null,{hk:"4ciB0D"}):l.fbt._("Terms and Privacy Policy",null,{hk:"3DVAn0"});return(0,k.jsxs)(h.default,{ref:t,children:[(0,k.jsx)(g.DrawerHeader,{a8n:"drawer-title-help",title:_.default.t(370),onBack:e.onClose,type:g.DRAWER_HEADER_TYPE.LARGE}),(0,k.jsxs)(p.default,{children:[(0,k.jsx)("div",{className:x.default.animation}),(0,k.jsx)("div",{className:x.default.versionInfo,children:(0,k.jsx)(E.default,{})}),(0,k.jsx)(m.default,{a8nText:"li-faq",icon:(0,k.jsx)(j.default,{name:"settings-help"}),onClick:()=>{(0,v.openExternalLink)((0,r.getFaqUrl)()),d(b.default.CONTACT_US_EXIT_STATE.FAQ)},children:l.fbt._("Help Center",null,{hk:"22rPCE"})}),(0,k.jsx)(m.default,{a8nText:"li-contact-us",icon:(0,k.jsx)(j.default,{name:"group"}),onClick:()=>{o.ModalManager.open((0,k.jsx)(f.default,{onCancel:T,onSend:M}))},children:_.default.t(599)}),O,(0,k.jsx)(m.default,{a8nText:"li-tos",icon:(0,k.jsx)(j.default,{name:"settings-document",height:24}),onClick:()=>{a.current=!0;const e=c.Conn.isSMB?(0,S.getBizTosUrl)():(0,S.getTosUrl)();(0,v.openExternalLink)(e)},children:L}),undefined,undefined]})]})}var M=(0,s.forwardRef)(T);t.default=M},99413:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.search=function(){return m.apply(this,arguments)};var r=a(n(48926)),o=a(n(76139)),i=a(n(11854)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(n(35232)),s=a(n(14296));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}const u="https://www.bingapis.com/api/v6/images/search",c="D41D8CD98F00B204E9800998ECF8427E4F4A7492",f="Square",h="Medium",p={ar:"ar-SA",da:"da-DK",de:"de-DE",en:"en-US",es:"es-US",fi:"fi-FI",fr:"fr-FR",it:"it-IT",ko:"ko-KR",nl:"nl-NL",pl:"pl-PL","pt-BR":"pt-BR",ru:"ru-RU",sv:"sv-SE",tr:"tr-TR","zh-CN":"zh-CN","zh-TW":"zh-TW","zh-HK":"zh-HK"};function m(){return(m=(0,r.default)((function*(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30;const a={q:e,SafeSearch:"Strict",appid:c,mkt:p[s.default.getLocale()]||p.en,size:h,aspect:f,count:n,offset:t},r=o.default.build(u,a),d=yield i.default.get(r,i.default.RESP_TYPE.JSON);if(!d.response.hasOwnProperty("_type"))throw new l.InvalidServerResponseError(r,status,`Not a valid Bing response: ${JSON.stringify(d.response)}`);if("ErrorResponse"===d.response._type){const t=d.response;throw new l.BingServerError(e,d.status,t)}if("Images"!==d.response._type)throw new l.InvalidServerResponseError(r,status,`Did not receive an image search response, potentially malformed query ${JSON.stringify(d.response)}`);return d.response}))).apply(this,arguments)}},90312:(e,t,n)=>{"use strict";var a=n(59182).default,r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onImageSelected:t}=e,n=(0,_.default)(),r=(0,v.useRef)(null),A=(0,v.useRef)(null),D=(0,v.useRef)(null),R=(0,v.useRef)(!1),N=(0,v.useRef)(null),[B,F]=(0,v.useState)({}),[U,G]=(0,v.useState)(!1),[H,z]=(0,v.useState)(0),[W,q]=(0,v.useState)(""),[V,Y]=(0,v.useState)([]),[K,Q]=(0,v.useState)(0),X=(0,x.default)(((e,t)=>{R.current=!1;const n=new a,r=C.search(e,t).then((t=>{var a;if(n.signal.aborted)throw new s.AbortError;r===(null===(a=N.current)||void 0===a?void 0:a.promise)&&(((e,t)=>{const n=(0,l.default)(t.value,(e=>e.thumbnailUrl)),a=(0,i.default)(t.value,(e=>({id:e.imageId,name:e.name,thumbUrl:e.thumbnailUrl}))),r=t.value.length;var s,d;W===e?(z(t.nextOffset?t.nextOffset:H+r),Y((0,o.default)(V,a)),Q(null!==(s=t.totalEstimatedMatches)&&void 0!==s?s:0),F(Object.assign(n,B))):(F(n),z(t.nextOffset?t.nextOffset:H+r),q(W),Y(a),Q(null!==(d=t.totalEstimatedMatches)&&void 0!==d?d:0))})(e,t),G(!1))})).catch((0,s.catchAbort)((()=>{}))).catch((()=>{var e;__LOG__(3,!0)`Image search failed`,p.ToastManager.open((0,L.jsx)(I.Toast,{msg:g.fbt._("Image search failed",null,{hk:"9pHyN"}),id:(0,I.genId)()})),r===(null===(e=N.current)||void 0===e?void 0:e.promise)&&G(!1)})).finally((()=>{var e;r===(null===(e=N.current)||void 0===e?void 0:e.promise)&&(N.current=null)}));N.current={promise:r,controller:n},G(!0)}),750),Z=()=>{X.cancel(),R.current&&(R.current=!1),N.current&&N.current.controller.abort()},J=()=>{F({}),G(!1),z(0),q(""),Y([]),Q(0)},$=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;R.current=!0,X(e,t)},ee=()=>{R.current||N.current||!K||H>=K||$(W,H)},te=e=>{const a=B[e];if(!a)return;const r=a.contentUrl;let o;if(m.UA.isElectron)o=(0,P.default)((()=>(0,E.default)(r))).then((e=>{if(200!==e.status)throw new h.ServerStatusError(null,r,e.status);return e.blob()}));else{if((0,u.isMDBackend)())throw new Error("This call is only supported in non-MD mode");o=O.default.downloadImage(r)}o.then((e=>{if(!n.aborted){if(!(e instanceof Blob))throw new h.ImageError("Server did not respond with image bytes",r);t(e,a.hostPageUrl)}})).catch((()=>{__LOG__(3,!0)`Image search failed`,p.ToastManager.open((0,L.jsx)(I.Toast,{msg:g.fbt._("Failed to load image",null,{hk:"1k5xX"}),id:(0,I.genId)()}))}))},ne=()=>{c.default.shouldIndicateFocus(),f.default.focus(r.current)},ae=j.DRAWER_HEADER_TYPE.POPUP;let re;re=0===V.length?U?(0,L.jsx)(S.SearchingImages,{}):W?(0,L.jsx)(S.ImageSearchEmpty,{}):(0,L.jsx)(S.BeforeImageSearch,{}):(0,L.jsx)(T.default,{ref:D,canLoadMore:H<K,isLoadingMore:U,thumbnails:V,onFocusPrev:ne,onImageClick:te,onRequestMoreImages:ee});return(0,L.jsxs)(y.default,{children:[(0,L.jsx)(j.DrawerHeader,{title:g.fbt._("Image Search",null,{hk:"p4JUz"}),type:ae,onBack:e.onBack,onCancel:e.onCancel}),(0,L.jsxs)(b.default,{children:[(0,L.jsx)(w.HotKeys,{ref:A,handlers:{down:e=>{e.repeat||D.current&&r.current&&r.current.cursorIsAtEnd()&&(e.preventDefault(),e.stopPropagation(),c.default.shouldIndicateFocus(),null!=D.current&&f.default.focus(D.current))}},onFocus:()=>{c.default.maybeIndicateFocus(A.current)},children:(0,L.jsx)(M.default,{ref:r,placeholder:g.fbt._("Enter search term here",null,{hk:"sgCKx"}),onSearch:e=>{const t=(e||"").trim();if(!t)return Z(),void J();(0,d.numCodepoints)(t)<k.FTS_MIN_CHARS||t!==W&&(Z(),J(),$(t))},loading:U})}),re]})]})};var o=r(n(57043)),i=r(n(35161)),l=r(n(24350)),s=n(89385),d=n(64331),u=n(88555),c=r(n(45120)),f=r(n(52013)),h=D(n(35232)),p=n(94816),m=n(26741),g=n(48360),v=n(67294),x=r(n(51799)),_=r(n(3409)),C=D(n(99413)),y=r(n(60453)),b=r(n(69637)),j=n(94790),S=n(85600),E=r(n(26847)),k=n(80872),w=n(29424),T=r(n(31469)),M=r(n(48837)),P=r(n(70047)),I=n(50452),O=r(n(56891)),L=n(85893);function A(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(A=function(e){return e?n:t})(e)}function D(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=A(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}},70047:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,s.promiseLoop)(function(){var t=(0,r.default)((function*(t,n,a){const r=(0,l.delayMs)((0,i.expBackoff)(a,6e4,void 0,.1));try{yield function(){if(c.Socket.state===d.SOCKET_STATE.CONNECTED)return Promise.resolve();return(0,u.default)(c.Socket,"change:state",(0,o.default)({state:d.SOCKET_STATE.CONNECTED}))}();const n=yield e();if(n.status>=500&&n.status<600)return r;t(n)}catch(e){return r}}));return function(){return t.apply(this,arguments)}}())};var r=a(n(48926)),o=a(n(6410)),i=n(80284),l=n(13959),s=n(4352),d=n(62583),u=a(n(35609)),c=n(65044)},87027:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onOk:t}=e,[n,a]=(0,i.useState)(void 0);let h,p;(0,i.useEffect)((()=>{}),[]),n||(h=(0,f.jsx)("div",{className:s.default.spinner,children:(0,f.jsx)(u.Spinner,{size:50,stroke:4})},"spinner"));n&&(p=(0,f.jsx)("div",{className:s.default.textContainer,children:n}));return(0,f.jsx)(l.default,{okText:o.fbt._("OK",null,{hk:"2KEeHb"}),onOK:()=>{null==t||t(),r.ModalManager.close()},type:d.ModalTheme.Flex,children:(0,f.jsxs)("div",{className:s.default.container,children:[(0,f.jsx)(c.TextSpan,{theme:"popup-title",children:o.fbt._("Licenses",null,{hk:"39PWhp"})}),p,h]})})};var r=n(14597),o=n(48360),i=n(67294),l=a(n(52665)),s=a(n(23918)),d=n(57224),u=n(11054),c=n(13923),f=n(85893)},39301:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ID_SEPARATOR=t.Cluster=void 0;var r=a(n(33861)),o=n(53462);t.ID_SEPARATOR=",";t.Cluster=class{constructor(){this.participants=new r.default;for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach((e=>this.add(e)))}get id(){return this.participants.map((e=>{let{id:t}=e;return t.toString()})).join(",")}get center(){const e=this.participants.map((e=>{let{lat:t}=e;return t})),t=this.participants.map((e=>{let{lng:t}=e;return t}));return{lat:(Math.min(...e)+Math.max(...e))/2,lng:(Math.min(...t)+Math.max(...t))/2}}get lat(){return this.center.lat}get lng(){return this.center.lng}get length(){return this.participants.length}get northeast(){const e=this.participants.map((e=>{let{lat:t}=e;return t})),t=this.participants.map((e=>{let{lng:t}=e;return t}));return{lat:Math.max(...e),lng:Math.max(...t)}}get southwest(){const e=this.participants.map((e=>{let{lat:t}=e;return t})),t=this.participants.map((e=>{let{lng:t}=e;return t}));return{lat:Math.min(...e),lng:Math.min(...t)}}add(e){this.participants.add(e)}hasSingleParticipant(){return 1===this.length}fits(e,t,n){const{lat:a,lng:r}=this.center,{lat:i,lng:l}=e,s=(0,o.getMetersBetweenLatLngs)(a,r,a,l),d=(0,o.getMetersBetweenLatLngs)(a,r,i,r),u=(0,o.getMetersPerPixel)(a,t);return s/u<=n&&d/u<=n}}},51654:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onParticipantSelected:t,participants:n}=e,a=(0,r.default)((()=>new u.default));return(0,m.jsxs)("div",{className:o.default.container,children:[(0,m.jsxs)("div",{className:o.default.header,children:[(0,m.jsx)("div",{className:o.default.left,children:(0,m.jsx)("span",{className:o.default.close,onClick:e.onClearSelected,children:(0,m.jsx)(h.default,{name:"x"})})}),(0,m.jsx)("div",{className:o.default.right,children:c.default.t(401,{count:e.participants.length,_plural:e.participants.length})})]}),(0,m.jsx)(d.default,{className:o.default.list,flatListControllers:[a.current],children:(0,m.jsx)(s.FlatList,{data:n.map((e=>({itemKey:e.id.toString(),participant:e}))),flatListController:a.current,direction:"vertical",defaultItemHeight:48,renderItem:e=>{let{participant:n}=e;return(0,m.jsx)(g,{participant:n,onClick:()=>t(n.contact.id.toString())})}})})]})};var r=a(n(16223)),o=a(n(50521)),i=n(88984),l=a(n(51099)),s=n(47915),d=a(n(44942)),u=a(n(30855)),c=a(n(14296)),f=n(12176),h=a(n(23217)),p=a(n(61804)),m=n(85893);function g(e){let{onClick:t,participant:n}=e;const a=n.isMe?(0,m.jsx)("div",{className:o.default.time,children:(0,m.jsx)(l.default,{reason:"live-location-time",children:(0,m.jsx)(p.default,{participant:n})})}):null;return(0,m.jsxs)("div",{className:o.default.item,onClick:t,children:[(0,m.jsx)("div",{className:o.default.left,children:(0,m.jsx)(i.DetailImage,{id:n.contact.id,size:28})}),(0,m.jsxs)("div",{className:o.default.right,children:[(0,m.jsx)("div",{className:o.default.name,children:(0,m.jsx)(f.Name,{contact:n.contact,titlify:!0,ellipsify:!0,you:!0})}),a]})]})}},16641:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.cluster=function(e,t,n,a){const i=new Map;if(!e.length)return i;const l=e.filter((e=>e!==n)).sort(((e,t)=>e.lat-t.lat));for(let e=0;e<l.length;e++){const n=l[e];let s;if(i.forEach((e=>{!s&&e.fits(n,t,a)&&(s=e)})),s){const e=s,t=s.id;i.delete(t),e.add(n)}else s=new o.Cluster(n);i.set((0,r.default)(s,"clusterToAdd").id,(0,r.default)(s,"clusterToAdd"))}if(n&&e.length!==l.length){const e=new o.Cluster(n);i.set(e.id,e)}return i},t.findClusterForParticipant=function(e,t){let n;const a=e.values();for(;(n=a.next())&&!n.done;){const e=n.value;if(e.participants.get(t))return e}return null},t.participantInCluster=function(e,t){return e.split(o.ID_SEPARATOR).includes(t.toString())},t.singleParticipantClusterId=function(e){return!e.includes(o.ID_SEPARATOR)};var r=a(n(45095)),o=n(39301)},9903:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.STALE_THRESHOLD=t.PIN_SIZE=t.MARKER_SIZE=t.IMAGE_SIZE=t.IMAGE_BORDER_SIZE=t.GLOW_SIZE=t.AVATAR_SIZE=void 0,t.getSmallestElapsedTime=n,t.isStale=function(e){return n(e)>=600};t.STALE_THRESHOLD=600;t.IMAGE_SIZE=40;t.IMAGE_BORDER_SIZE=2;t.GLOW_SIZE=4;t.PIN_SIZE=4;t.AVATAR_SIZE=44;function n(e){const t=e.participants.map((e=>e.elapsedTime()));return Math.min(...t)}t.MARKER_SIZE=52},74717:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onClose:t}=e,n=(0,d.useModelValues)(e.msg,["finalLat","finalLng","finalTimeOffset","lat","lng","senderObj","t"]),[a,C]=(0,l.useState)(g.MapType.ROADMAP),[y,b]=(0,l.useState)(!1),[j,S]=(0,l.useState)(!1),E=(0,s.default)(o.default,"change:online",(()=>o.default.online)),k=(0,u.default)(),w=e=>{S(e)},T=(0,_.jsx)(v.default,{onRoadmapSelected:()=>{C(g.MapType.ROADMAP)},onSatelliteSelected:()=>{C(g.MapType.SATELLITE)},onTerrainSelected:()=>{C(g.MapType.TERRAIN)},onTrafficToggled:()=>{b((e=>!e))},showTraffic:y}),{finalLat:M,finalLng:P,finalTimeOffset:I,lat:O,lng:L,senderObj:A,t:D}=n;let R,N,B,F;void 0===M||void 0===P||void 0===I?(R=O,N=L,B=D):(R=M,N=P,B=D+I);F=E?(0,_.jsxs)("div",{className:p.default.wrapper,children:[(0,_.jsx)(m.default,{contact:A,lat:R,lng:N,mapType:a,showTraffic:y,markerSelected:j,onMarkerSelected:w}),(0,_.jsxs)("div",{className:p.default.notification,children:[(0,_.jsx)("div",{className:p.default.ended,children:i.fbt._("Live location ended",null,{hk:"1qhVqb"})}),(0,_.jsx)("div",{className:p.default.lastUpdated,children:r.Clock.liveLocationLastUpdatedStr(B)})]})]}):(0,_.jsx)("div",{className:p.default.offline,children:(0,_.jsxs)("div",{children:[(0,_.jsx)("div",{className:p.default.circle,children:(0,_.jsx)(x.default,{name:"live-location-disconnected"})}),(0,_.jsx)("div",{className:p.default.text,children:i.fbt._("Make sure your computer has an active Internet connection.",null,{hk:"49ekhp"})})]})});return(0,_.jsxs)(c.default,{children:[(0,_.jsx)(h.DrawerHeader,{title:i.fbt._("Expired Location",null,{hk:"2bVGaN"}),type:h.DRAWER_HEADER_TYPE.SMALL,menu:T,onCancel:()=>{t?t():null==k||k.requestDismiss()}}),(0,_.jsx)(f.default,{children:F})]})};var r=n(40234),o=a(n(81602)),i=n(48360),l=n(67294),s=a(n(96570)),d=n(35461),u=a(n(95402)),c=a(n(60453)),f=a(n(69637)),h=n(94790),p=a(n(94692)),m=a(n(49314)),g=n(73098),v=a(n(27766)),x=a(n(23217)),_=n(85893)},49314:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(57319),o=n(67294),i=n(33458),l=n(73098),s=a(n(48037)),d=n(85893);class u extends o.Component{constructor(e){super(e),this.setMap=e=>this.map=e,this.mapOnClick=()=>{this.dismissMarkerTimer.debounceAndCap(50,100)},this.markerOnClick=()=>{this.dismissMarkerTimer.isScheduled()&&this.dismissMarkerTimer.cancel(),this.props.onMarkerSelected(!0)},this.getPixelPositionOffset=(e,t)=>({x:-e/2,y:-t}),this.dismissMarkerTimer=new r.ShiftTimer((()=>{this.props.markerSelected&&this.props.onMarkerSelected(!1)}))}componentWillUnmount(){this.dismissMarkerTimer.isScheduled()&&this.dismissMarkerTimer.cancel()}getMapPaneName(){return i.OverlayView.OVERLAY_MOUSE_TARGET}getMarkers(){const{lat:e,lng:t,contact:n,markerSelected:a}=this.props;return(0,d.jsx)(s.default,{marker:{isLive:!1,contact:n,lat:e,lng:t,selected:a,onClick:e=>this.markerOnClick(e)}})}getTrafficLayer(){return this.props.showTraffic?(0,d.jsx)(i.TrafficLayer,{autoRefresh:!0}):null}render(){const{lat:e,lng:t}=this.props;return(0,d.jsxs)(i.GoogleMap,{ref:this.setMap,defaultCenter:{lat:e,lng:t},defaultOptions:this.props.getMapOptions(),defaultZoom:l.INITIAL_ZOOM,mapTypeId:this.props.mapType,onClick:this.mapOnClick,children:[this.getMarkers(),this.getTrafficLayer()]})}}u.displayName="ExpiredLocationMap";var c=(0,l.withConfig)((0,i.withScriptjs)((0,i.withGoogleMap)(u)));t.default=c},11399:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(41609)),o=a(n(23493)),i=n(14597),l=a(n(81602)),s=n(94816),d=a(n(89867)),u=n(45454),c=a(n(94184)),f=n(48360),h=n(67294),p=a(n(51654)),m=n(16641),g=n(9903),v=a(n(60453)),x=a(n(69637)),_=n(94790),C=a(n(3222)),y=a(n(26658)),b=a(n(14296)),j=n(84387),S=a(n(79834)),E=a(n(22163)),k=n(73098),w=a(n(27766)),T=a(n(32213)),M=a(n(86058)),P=a(n(65932)),I=n(18146),O=a(n(23217)),L=a(n(4478)),A=n(50452),D=n(85893);const R=["click","mousedown","mousemove","scroll"],N="ACTIVE",B="INACTIVE",F="OFFLINE";class U extends h.PureComponent{constructor(e){super(e),this._handleParticipantAdd=()=>{const{zoomLevel:e,selectedParticipantId:t}=this.state;this._updateMinZoomClusters(),this.setState({clusters:this._getClusters(e,t)})},this._handleParticipantRemove=e=>{const{selectedClusterId:t,selectedParticipantId:n,zoomLevel:a}=this.state;this._updateMinZoomClusters();let r=t,o=n;t&&(0,m.participantInCluster)(t,e.id)&&(r=null),d.default.equals(n,e.id)&&(o=null),this.setState({selectedClusterId:r,selectedParticipantId:o,clusters:this._getClusters(a,o)})},this._handleParticipantDisable=e=>{if(!e.isMe){const t=e.contact.formattedName;s.ToastManager.open((0,D.jsx)(A.Toast,{msg:b.default.t(416,{name:t}),id:(0,A.genId)()}))}},this._handleLocationChanged=()=>{const{zoomLevel:e,selectedParticipantId:t}=this.state;this._updateMinZoomClusters(),this.setState({clusters:this._getClusters(e,t)})},this._handleIdle=()=>{const{liveLocation:e}=this.props.chat;e&&(e.stopViewingMap(),this.setState({status:B}))},this.onActivity=(0,o.default)((()=>{this._removeIdleTimeout(),this._addIdleTimeout()}),250),this._handleRefresh=()=>{const{liveLocation:e}=this.props.chat;e&&(e.startViewingMap(),this.setState({status:N}))},this._handleClose=()=>{this.props.onClose?this.props.onClose():this.props.uim.requestDismiss()},this._handleMarkerSelected=e=>{e?(0,m.singleParticipantClusterId)(e)?this._handleParticipantSelected(e):this._handleClusterSelected(e):this._handleClearSelected()},this._handleClearSelected=()=>{const{selectedParticipantId:e,selectedClusterId:t,zoomLevel:n}=this.state;(e||t)&&this.setState({selectedParticipantId:null,selectedClusterId:null,clusters:this._getClusters(n)})},this._handleClusterSelected=e=>{this.state.selectedClusterId!==e&&this.setState({selectedParticipantId:null,selectedClusterId:e})},this._handleParticipantSelected=e=>{const{selectedParticipantId:t,zoomLevel:n}=this.state,a=(0,u.createWid)(e);d.default.equals(t,a)||this.setState({selectedParticipantId:a,selectedClusterId:null,clusters:this._getClusters(n,a)})},this._handleStopSharing=e=>{e.preventDefault(),e.stopPropagation();const{chat:t}=this.props;i.ModalManager.open((0,D.jsx)(S.default,{chat:t}))},this._handleRoadmapSelected=()=>{this.setState({mapType:k.MapType.ROADMAP})},this._handleSatelliteSelected=()=>{this.setState({mapType:k.MapType.SATELLITE})},this._handleTerrainSelected=()=>{this.setState({mapType:k.MapType.TERRAIN})},this._handleTrafficToggled=()=>{this.setState((e=>({showTraffic:!e.showTraffic})))},this._handleBackToCenter=()=>{this.setState({selectedParticipantId:null,selectedClusterId:null,atCenter:!0,clusters:this._getClusters(this.state.zoomLevel)})},this._handleMapMoved=(e,t)=>{this.setState((n=>{const a={};if(n.zoomLevel!==e){const t=this._getClusters(e,n.selectedParticipantId);Object.assign(a,{zoomLevel:e,clusters:t})}return this._hasValidParticipants()&&n.atCenter!==t&&Object.assign(a,{atCenter:t}),(0,r.default)(a)?null:a}))},this._updateMinZoomClusters(),this.state={clusters:this._getClusters(k.INITIAL_ZOOM),selectedClusterId:null,selectedParticipantId:null,mapType:k.MapType.ROADMAP,showTraffic:!1,zoomLevel:k.INITIAL_ZOOM,atCenter:!0,status:l.default.online?N:F}}componentDidMount(){this._listenToModelChange(),this._listenToNetworkChange(),this._startCheckingForIdle();const{liveLocation:e}=this.props.chat;e&&(e.startViewingMap(),this._addParticipantListeners(e))}componentWillUnmount(){this.onActivity.cancel();const{liveLocation:e}=this.props.chat;e&&e.stopViewingMap()}_addParticipantListeners(e){this.props.listeners.add(e.participants,"add",this._handleParticipantAdd),this.props.listeners.add(e.participants,"remove",this._handleParticipantRemove),this.props.listeners.add(e.participants,"change:disabled",this._handleParticipantDisable),this.props.listeners.add(e.participants,"change:valid",this._handleLocationChanged)}_removeParticipantListeners(e){this.props.listeners.remove(e.participants,"add",this._handleParticipantAdd),this.props.listeners.remove(e.participants,"remove",this._handleParticipantRemove),this.props.listeners.remove(e.participants,"change:disabled",this._handleParticipantDisable),this.props.listeners.remove(e.participants,"change:valid",this._handleLocationChanged)}_listenToModelChange(){const{chat:e}=this.props;this.props.listeners.add((0,I.unproxy)(e),"change:liveLocation",(()=>{const{liveLocation:t}=e;t&&(this._removeParticipantListeners(t),this._addParticipantListeners(t));const{zoomLevel:n}=this.state;this.setState({clusters:this._getClusters(n)})}))}_listenToNetworkChange(){this.props.listeners.add(l.default,"change:online",(()=>{l.default.online||this._stopCheckingForIdle(),this.setState({status:l.default.online?N:F})}))}_startCheckingForIdle(){this._addIdleTimeout(),this._addActivityListeners()}_stopCheckingForIdle(){this._removeIdleTimeout(),this._removeActivityListeners()}_addIdleTimeout(){this._idleTimeoutId=this.props.setTimeout(this._handleIdle,18e4)}_removeIdleTimeout(){null!=this._idleTimeoutId&&this.props.clearTimeout(this._idleTimeoutId),this._idleTimeoutId=null}_addActivityListeners(){R.forEach((e=>{this.props.listeners.add(document,e,this.onActivity)}))}_removeActivityListeners(){R.forEach((e=>{this.props.listeners.remove(document,e,this.onActivity)}))}_updateMinZoomClusters(){const e=this.getParticipants(),t=e?e.validLocations():[];this._minZoomClusters=(0,m.cluster)(t,k.MIN_ZOOM,null,g.MARKER_SIZE)}getParticipants(){const{liveLocation:e}=this.props.chat;return e?e.participants:null}_hasValidParticipants(){const e=this.getParticipants();return!!e&&!!e.validLocations().length}_getOpenFromCluster(){const e=this.getParticipants();if(!e||0===e.length)return null;const{openFrom:t}=this.props;let n=null;if(t)n=t;else{const t=e.at(0);t&&(n=t.id)}return n?(0,m.findClusterForParticipant)(this._minZoomClusters,n):null}_getClusters(e,t){const n=this.getParticipants();let a=null,r=[];n&&(t&&(a=n.get(t)),r=n.validLocations());let o=r,i=[];if(this._minZoomClusters.size>1){const e=this._getOpenFromCluster();if(e){const t=e.participants;o=t.validLocations(),i=r.filter((e=>{let{id:n}=e;return!t.get(n)}))}}return{primary:(0,m.cluster)(o,e,a,g.MARKER_SIZE),secondary:(0,m.cluster)(i,e,a,g.MARKER_SIZE)}}_getList(){const{clusters:e,selectedClusterId:t}=this.state,n=this.getParticipants();let a;if(null==n?void 0:n.length){if(t){const n=e.primary.get(t)||e.secondary.get(t);if(n){const e=n.participants;a=(0,D.jsx)(p.default,{participants:e,onParticipantSelected:this._handleParticipantSelected,onClearSelected:this._handleClearSelected})}}a||(a=(0,D.jsx)(T.default,{participants:n,onParticipantSelected:this._handleParticipantSelected,onStopSharing:this._handleStopSharing}))}return a}render(){let e,t;this.props.isFirstLevel?e=this._handleClose:t=this._handleClose;const{selectedParticipantId:n,selectedClusterId:a,mapType:r,showTraffic:o,atCenter:i,status:l}=this.state,s=l===N?(0,D.jsx)(w.default,{onRoadmapSelected:this._handleRoadmapSelected,onSatelliteSelected:this._handleSatelliteSelected,onTerrainSelected:this._handleTerrainSelected,onTrafficToggled:this._handleTrafficToggled,showTraffic:o}):null;let d,u;if(l===N||l===B){const e=n&&n.toString()||a;d=(0,D.jsxs)("div",{className:y.default.wrapper,children:[(0,D.jsx)("div",{className:(0,c.default)(y.default.backToCenter,{[y.default.visible]:!i}),onClick:this._handleBackToCenter,children:(0,D.jsx)(O.default,{name:"return"})}),(0,D.jsx)(E.default,{clusters:this.state.clusters.primary,secondaryClusters:this.state.clusters.secondary,selectedMarkerId:e,openFrom:this.props.openFrom,mapType:r,showTraffic:o,atCenter:i,onMarkerSelected:this._handleMarkerSelected,onClearSelected:this._handleClearSelected,onLocationChanged:this._handleLocationChanged,onMapMoved:this._handleMapMoved}),this._getList()]})}if(l===B||l===F){const e=l===B,t=e?"live-location-refresh":"live-location-disconnected",n=e?f.fbt._("Click to continue viewing live location",null,{hk:"4j5wQx"}):b.default.t(433);u=(0,D.jsx)(M.default,{inactive:e,svgName:t,text:n,onClick:e?this._handleRefresh:void 0})}return(0,D.jsxs)(v.default,{children:[(0,D.jsx)(_.DrawerHeader,{title:f.fbt._("Live Location",null,{hk:"1LvIwY"}),type:_.DRAWER_HEADER_TYPE.SMALL,menu:s,onBack:t,onCancel:e}),(0,D.jsxs)(x.default,{children:[d,u]})]})}}U.CONCERNS={chat:["id","liveLocation"]},U.displayName="LiveLocationDrawer";var G=(0,C.default)((0,L.default)((0,j.ListenerHOC)((0,P.default)(U,U.CONCERNS))));t.default=G},22163:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(23279)),o=n(57319),i=n(67294),l=n(33458),s=n(73098),d=a(n(48037)),u=n(53462),c=n(85893);const f=1e-4;class h extends i.Component{constructor(e){super(e),this.setMap=e=>this.map=e,this._handleLocationChanged=e=>{const{clusters:t,atCenter:n,selectedMarkerId:a}=this.props;if(this.props.onLocationChanged(),!a&&n)this._viewAllClusters();else if(a&&a===e){const e=t.get(a);e&&this._viewSingleCluster(e)}},this.handleIdle=(0,r.default)((()=>{const e=this.map;if(!e)return;const t=e.getZoom();if(this._zoomingToAllClusters){this._defaultZoomLevel=t,this._zoomingToAllClusters=!1;const e=this._zoomHistory;if(e.prev.preZoom===e.curr.postZoom&&e.prev.postZoom===e.curr.preZoom)return}this.props.onMapMoved(t,this.atCenter())}),100),this._handleDragStart=()=>{const e=this.map;if(!e)return;const t=e.getZoom();this.props.onMapMoved(t,!1)},this.handleResize=(0,r.default)((()=>{this._setMapLatLngDiff()}),250),this.mapOnClick=()=>{this.dismissMarkerTimer.debounceAndCap(50,100)},this.markerOnClick=(e,t)=>{this.dismissMarkerTimer.isScheduled()&&this.dismissMarkerTimer.cancel(),this.props.onMarkerSelected(t)},this.dismissMarkerTimer=new o.ShiftTimer((()=>{this.props.selectedMarkerId&&this.props.onClearSelected()})),this._defaultLatDiff=this._defaultLngDiff=.01,this._defaultZoomLevel=-1,this._zoomingToAllClusters=!1,this._zoomHistory={prev:{preZoom:-1,postZoom:-1},curr:{preZoom:-1,postZoom:-1}}}componentWillUnmount(){this.handleIdle.cancel(),this.handleResize.cancel(),window.removeEventListener("resize",this.handleResize),this.dismissMarkerTimer.isScheduled()&&this.dismissMarkerTimer.cancel()}componentDidMount(){window.addEventListener("resize",this.handleResize),this._setMapLatLngDiff(),this._viewAllClusters()}componentDidUpdate(e){const{clusters:t,secondaryClusters:n,selectedMarkerId:a,atCenter:r}=this.props,{selectedMarkerId:o}=e;if(this._setMapLatLngDiff(),t.size&&(!o||a||r))if(a&&o!==a){const e=t.get(a)||n.get(a);e&&this._viewSingleCluster(e)}else!a&&r&&this._viewAllClusters()}_viewAllClusters(){const{clusters:e}=this.props;0===e.size||this.atCenter()||(this._zoomToFitAllClusters(e),this._centerAllClusters(e))}_viewSingleCluster(e){this._zoomToFitSingleCluster(e),this._centerSingleCluster(e)}_zoomToFitAllClusters(e){const t=this.map;if(!t)return;this._zoomingToAllClusters=!0,this._zoomHistory.prev.preZoom=this._zoomHistory.curr.preZoom,this._zoomHistory.curr.preZoom=t.getZoom();const n=this.getBounds(e),a=e.entries().next();if(1!==e.size||a.done)this._boundsTooSmall(n)?t.fitBounds(this._getDefaultBounds(n.getCenter())):t.fitBounds(n);else{const[,e]=a.value;this._zoomToFitSingleCluster(e,!1)}this._zoomHistory.prev.postZoom=this._zoomHistory.curr.postZoom,this._zoomHistory.curr.postZoom=t.getZoom()}_zoomToFitSingleCluster(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.map;if(!n)return;if(t&&this._boundsTooSmall(n.getBounds()))return;const a=e.northeast,r=e.southwest,o=new google.maps.LatLng(a.lat,a.lng),i=new google.maps.LatLng(r.lat,r.lng),l=new google.maps.LatLngBounds(i,o);this._boundsTooSmall(l)?n.fitBounds(this._getDefaultBounds(l.getCenter())):n.fitBounds(l)}_centerAllClusters(e){const t=this.getBounds(e).getCenter();this._centerMap(t)}_centerSingleCluster(e){const t=new google.maps.LatLng(e.center);this._centerMap(t)}_centerMap(e){const t=this.map;t&&(t.getCenter().equals(e)||t.panTo(e))}_getInitialCenter(){return this.getBounds(this.props.clusters).getCenter()}getBounds(e){const t=new google.maps.LatLngBounds;return e.forEach((e=>{t.extend({lat:e.lat,lng:e.lng})})),t}_boundsTooSmall(e){const t=e.getNorthEast(),n=e.getSouthWest(),a=t.lat()-n.lat(),r=t.lng()-n.lng(),o=Math.abs(a)<this._defaultLatDiff,i=Math.abs(r)<this._defaultLngDiff;return o||i}_getDefaultBounds(e){const t=new google.maps.LatLng(e.lat()-this._defaultLatDiff/2,e.lng()-this._defaultLngDiff/2),n=new google.maps.LatLng(e.lat()+this._defaultLatDiff/2,e.lng()+this._defaultLngDiff/2);return new google.maps.LatLngBounds(t,n)}atCenter(){const e=this.map;if(!e)return!0;const t=e.getCenter(),n=this._getInitialCenter(),a=t.lat()-n.lat(),r=t.lng()-n.lng();return Math.abs(a)<f&&Math.abs(r)<f&&this._defaultZoomLevel===e.getZoom()}_setMapLatLngDiff(){const e=this.map;if(!e)return;const t=e.getCenter(),n=e.getDiv(),a=(0,u.getMetersPerPixel)(t.lat(),s.INITIAL_ZOOM),r=n.offsetWidth*a,o=n.offsetHeight*a;this._defaultLatDiff=(0,u.getLatDiff)(o),this._defaultLngDiff=(0,u.getLngDiff)(r,t.lat())}getMarkers(){const{clusters:e,secondaryClusters:t,selectedMarkerId:n}=this.props,a=[],r=(e,t)=>{a.push((0,c.jsx)(d.default,{marker:{isLive:!0,cluster:e,onLocationChanged:()=>this._handleLocationChanged(t),selected:n===t,onClick:e=>this.markerOnClick(e,t)}},t))};return e.forEach(r),t.forEach(r),a}getTrafficLayer(){return this.props.showTraffic?(0,c.jsx)(l.TrafficLayer,{autoRefresh:!0}):null}render(){return(0,c.jsxs)(l.GoogleMap,{ref:this.setMap,defaultCenter:this._getInitialCenter(),defaultOptions:this.props.getMapOptions(),defaultZoom:s.INITIAL_ZOOM,mapTypeId:this.props.mapType,onClick:this.mapOnClick,onDragStart:this._handleDragStart,onIdle:this.handleIdle,children:[this.getMarkers(),this.getTrafficLayer()]})}}h.displayName="LiveLocationMap";var p=(0,s.withConfig)((0,l.withScriptjs)((0,l.withGoogleMap)(h)));t.default=p},73098:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.MapType=t.MIN_ZOOM=t.INITIAL_ZOOM=void 0,t.withConfig=function(e){return class extends l.Component{constructor(){super(...arguments),this.state={authFailed:!0===window.gm_authFailed},this._onAuthFailed=()=>{window.gm_authFailed=!0,this.setState({authFailed:!0});const e=this._getUrl();__LOG__(4,void 0,new Error,!0)`url: ${e}\ntarget: ${"web"}`,SEND_LOGS("google-map-auth-failed")}}componentDidMount(){window.gm_authFailure=this._onAuthFailed}componentWillUnmount(){window.gm_authFailure=void 0}_getUrl(){const e={client:"gme-whatsappinc",v:"3",libraries:"geometry,drawing,places",t:Math.floor(Date.now()/864e5)};return o.default.build("https://maps.googleapis.com/maps/api/js",e)}getMapOptions(){return{clickableIcons:!1,fullscreenControl:!1,keyboardShortcuts:!1,mapTypeControl:!1,minZoom:3,streetViewControl:!1,zoomControl:!0,zoomControlOptions:{position:google.maps.ControlPosition.TOP_RIGHT}}}render(){if(this.state.authFailed)return(0,u.jsx)("div",{className:s.default.authFailed,children:i.fbt._("Failed to load Google Maps",null,{hk:"2k0Pgj"})});const t=this._getUrl(),n=(0,u.jsx)("div",{className:s.default.loading,children:(0,u.jsx)(d.Spinner,{color:"highlight"})}),a=(0,u.jsx)("div",{className:s.default.container}),o=(0,u.jsx)("div",{className:s.default.map});return(0,u.jsx)(e,(0,r.default)({googleMapURL:t,loadingElement:n,containerElement:a,mapElement:o,getMapOptions:this.getMapOptions},this.props))}}};var r=a(n(81109)),o=a(n(76139)),i=n(48360),l=n(67294),s=a(n(89332)),d=n(11054),u=n(85893);const c=n(76672)({ROADMAP:"roadmap",SATELLITE:"satellite",TERRAIN:"terrain"});t.MapType=c;t.INITIAL_ZOOM=15;t.MIN_ZOOM=3},48037:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(94184)),o=n(67294),i=n(33458),l=a(n(57850)),s=n(9903),d=n(84387),u=a(n(92018)),c=a(n(68050)),f=a(n(4478)),h=a(n(2773)),p=n(85893);class m extends o.Component{constructor(e){super(e),this._setOverlay=e=>{this.overlay=e},this._handleLocationChanged=()=>{this.props.marker.isLive&&this.props.marker.onLocationChanged()},this._handleLastUpdatedTimeChanged=()=>{if(!this.props.marker.isLive)return;null!=this.timeoutId&&(this.props.clearTimeout(this.timeoutId),this.timeoutId=null);const e=(0,s.isStale)(this.props.marker.cluster);this.state.stale!==e&&this.setState({stale:e}),e||this._setStaleTimeout()},this._getPixelPositionOffset=(e,t)=>({x:-e/2,y:-t}),this.state={stale:!e.marker.isLive||(0,s.isStale)(e.marker.cluster)}}_setStaleTimeout(){if(!this.props.marker.isLive)return;const{cluster:e}=this.props.marker,t=s.STALE_THRESHOLD-(0,s.getSmallestElapsedTime)(e);t<=0||(this.timeoutId=this.props.setTimeout((()=>this.setState({stale:!0})),1e3*t))}componentDidMount(){if(!this.props.marker.isLive)return;const{cluster:e}=this.props.marker;(0,s.isStale)(e)||this._setStaleTimeout();e.participants.forEach((e=>{this.props.listeners.add(e,"change:lat change:lng",this._handleLocationChanged),this.props.listeners.add(e,"change:lastUpdated",this._handleLastUpdatedTimeChanged)}))}_getMapPaneName(){return this.props.marker.onClick?i.OverlayView.OVERLAY_MOUSE_TARGET:i.OverlayView.OVERLAY_LAYER}render(){let e,t,n,a;const{onClick:o,selected:d}=this.props.marker,{stale:f}=this.state;if(this.props.marker.isLive){const{cluster:a}=this.props.marker;e=a.lat,t=a.lng,n=a.participants.map((e=>{let{id:t}=e;return t}))}else e=this.props.marker.lat,t=this.props.marker.lng,n=[this.props.marker.contact.id];if(d){let n,r,o;if(this.props.marker.isLive){const{cluster:e}=this.props.marker,t=e.participants,a=e.hasSingleParticipant()?t.at(0):null;a&&(n=a.id,r=a.accuracy,o=a.isMe)}else{const{contact:e}=this.props.marker;n=e.id,o=e.isMe}n&&(a=(0,p.jsx)(c.default,{id:n,lat:e,lng:t,accuracy:r,isMe:o||!1,markerSize:s.MARKER_SIZE}))}return(0,p.jsx)(i.OverlayView,{ref:this._setOverlay,position:{lat:e,lng:t},mapPaneName:this._getMapPaneName(),getPixelPositionOffset:this._getPixelPositionOffset,children:(0,p.jsx)(h.default.Provider,{value:this.context,children:(0,p.jsxs)("div",{className:(0,r.default)(u.default.container,{[u.default.selected]:d}),onClick:o,children:[a,(0,p.jsx)("div",{className:(0,r.default)(u.default.glow,{[u.default.stale]:f,[u.default.expired]:!this.props.marker.isLive}),style:{height:s.AVATAR_SIZE,width:s.AVATAR_SIZE,padding:s.GLOW_SIZE},children:(0,p.jsx)("div",{children:(0,p.jsx)(l.default,{ids:n,size:s.IMAGE_SIZE,border:!0,showCount:!0})})}),(0,p.jsx)("div",{className:(0,r.default)(u.default.pin,{[u.default.selected]:d}),style:{height:s.PIN_SIZE,width:s.PIN_SIZE,marginLeft:(s.MARKER_SIZE-s.PIN_SIZE)/2}})]})})})}}m.contextType=h.default,m.displayName="LiveLocationMarker";var g=(0,f.default)((0,d.ListenerHOC)(m));t.default=g},27766:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,u.jsx)(s.MenuBarItem,{a8nText:"live-location-map-menu",icon:(0,u.jsx)(d.default,{name:"menu"}),title:l.default.t(454),children:(0,u.jsxs)(o.Dropdown,{type:o.MenuType.DropdownMenu,flipOnRTL:!0,dirX:o.DirX.LEFT,dirY:o.DirY.BOTTOM,children:[(0,u.jsx)(i.DropdownItem,{a8n:"mi-roadmap-view menu-item",action:e.onRoadmapSelected,children:r.fbt._("Map view",null,{hk:"2d2FOv"})}),(0,u.jsx)(i.DropdownItem,{a8n:"mi-satellite-view menu-item",action:e.onSatelliteSelected,children:r.fbt._("Satellite view",null,{hk:"QnsuG"})}),(0,u.jsx)(i.DropdownItem,{a8n:"mi-terrain-view menu-item",action:e.onTerrainSelected,children:r.fbt._("Terrain view",null,{hk:"3LpQsK"})}),(0,u.jsx)(i.DropdownItem,{a8n:"mi-traffic menu-item",action:e.onTrafficToggled,children:e.showTraffic?r.fbt._("Hide traffic",null,{hk:"1GfpvE"}):r.fbt._("Show traffic",null,{hk:"21KWWk"})})]})})};var r=n(48360),o=n(60811),i=n(71174),l=a(n(14296)),s=n(46346),d=a(n(23217)),u=n(85893)},32213:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onParticipantSelected:t,onStopSharing:n,participants:a}=e,r=(0,i.default)((()=>new c.default)),l=(0,o.useMemo)((()=>a.map((e=>({itemKey:e.id.toString(),contentKey:e.valid?"valid":"invalid",participant:e})))),[a]);return(0,m.jsx)(u.default,{className:h.default.list,flatListControllers:[r.current],children:(0,m.jsx)(d.FlatList,{data:l,renderItem:e=>{let{participant:a}=e;return(0,m.jsx)(g,{participant:a,onStopSharing:n,onParticipantSelected:t})},flatListController:r.current,direction:"vertical"})})};var r=n(48360),o=n(67294),i=a(n(16223)),l=n(2732),s=a(n(51099)),d=n(47915),u=a(n(44942)),c=a(n(30855)),f=a(n(14296)),h=a(n(6304)),p=a(n(61804)),m=n(85893);function g(e){let{onParticipantSelected:t,onStopSharing:n,participant:a}=e;const o=a.valid?(0,m.jsx)(s.default,{reason:"live-location-time",children:(0,m.jsx)(p.default,{participant:a})}):f.default.t(422),i=a.valid?()=>t(a.contact.id.toString()):null,d=a.isMe?(0,m.jsx)("div",{onClick:n,className:h.default.stopSharingButton,children:r.fbt._("Stop Sharing",null,{hk:"14LWdj"})}):null;return(0,m.jsx)(l.Contact,{contact:a.contact,secondary:o,onClick:i,detail:d})}},68050:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{id:t,accuracy:n,isMe:a,markerSize:r,lat:o,lng:l}=e,[d,u]=(0,s.useState)(!1),[f,h]=(0,s.useState)(!1),p=()=>{d&&u(!1)},g=()=>{d||u(!0)},S=c.ContactCollection.assertGet(t),E=(0,b.jsx)("div",{className:x.default.name,children:(0,b.jsx)(v.Name,{ellipsify:!0,you:!0,contact:S})}),k=null!=n?(0,b.jsx)("div",{className:x.default.status,children:m.default.t(400,{accuracy:n,_plural:n})}):null,w=a?null:(0,b.jsx)("div",{onClick:e=>{const n=null==e?void 0:e.target;h({menu:j({id:t,lat:o,lng:l}),anchor:n})},className:x.default.menuButton,children:(0,b.jsx)(_.default,{name:"down"})}),T=(0,b.jsx)("div",{className:x.default.triangle}),M=!a&&f?(0,b.jsx)(C.UIE,{displayName:"LiveLocationPopupContextMenu",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:()=>{h(!1)},children:(0,b.jsx)(y.default,{contextMenu:f})}):null;return(0,b.jsxs)("div",{className:(0,i.default)(x.default.container,{[x.default.twoLines]:!!k}),style:{transform:`translateX(calc(-50% + ${r/2}px))`},children:[(0,b.jsxs)("div",{className:x.default.popup,onMouseOver:g,onMouseEnter:g,onMouseDown:p,onMouseUp:g,onMouseLeave:p,children:[E,k,w]}),T,M]})};var r=n(81572),o=n(41455),i=a(n(94184)),l=n(48360),s=n(67294),d=n(72439),u=n(88172),c=n(19380),f=n(71174),h=n(12591),p=n(50101),m=a(n(14296)),g=n(8384),v=n(12176),x=a(n(22828)),_=a(n(23217)),C=n(18644),y=a(n(24717)),b=n(85893);function j(e){let{id:t,lat:n,lng:a}=e;const i=[];return i.push((0,b.jsx)(f.DropdownItem,{a8n:"get-directions",action:()=>{(0,h.openExternalLink)((0,g.getDirectionUrl)(n,a))},children:l.fbt._("Get directions",null,{hk:"MwnzW"})},"direction")),i.push((0,b.jsx)(f.DropdownItem,{a8n:"send-message",action:()=>{(0,p.findChat)(t).then((e=>{e.active&&o.DrawerManager.existsDrawerRight((e=>{e&&2===d.Column.column&&o.DrawerManager.closeDrawerRight()})),r.Cmd.openChatFromUnread(e).then((t=>{t&&u.ComposeBoxActions.focus(e)}))}))},children:l.fbt._("Message",null,{hk:"mZ5DE"})},"message")),i}},86058:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.jsx)("div",{className:e.inactive?r.default.inactive:r.default.offline,onClick:e.onClick,children:(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:r.default.circle,children:(0,i.jsx)(o.default,{name:e.svgName})}),(0,i.jsx)("div",{className:r.default.text,children:e.text})]})})};var r=a(n(26658)),o=a(n(23217)),i=n(85893)},61804:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(48360),o=n(67294),i=a(n(70393)),l=n(87550),s=n(46428),d=a(n(14296)),u=n(85893);const c=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e;t&&(n+=59);const a=3600,r=Math.floor(n/a),o=n%a,i=Math.floor(o/60);return{hours:r,minutes:i}},f=e=>e.isMe?(e=>{const{hours:t,minutes:n}=c(e,!0);return t>0?n>0?d.default.t(408,{hours:t,minutes:n}):d.default.t(407,{hours:t,_plural:t}):d.default.t(409,{minutes:n,_plural:n})})(e.remainingTime()):(e=>{const{hours:t,minutes:n}=c(e);return t>0?n>0?d.default.t(418,{hours:t,minutes:n}):d.default.t(417,{hours:t,_plural:t}):n>0?d.default.t(419,{minutes:n,_plural:n}):r.fbt._("Updated just now",null,{hk:"29EIVi"})})(e.elapsedTime());var h=e=>{let{participant:t}=e;const[n,a]=(0,o.useState)((()=>f(t)));(0,l.useListener)(t,t.isMe?"change:expiration":"change:lastUpdated",(e=>a(f(e))));const[r,d]=(0,i.default)((()=>a(f(t))),6e4),[c]=(0,s.useManualTimeout)((()=>{a(f(t)),r()})),{expiration:h,lastUpdated:p}=t;return(0,o.useEffect)((()=>{const e=(e=>e.isMe?e.remainingTime():e.elapsedTime())(t)%60;d(),c(1e3*e)}),[h,p]),(0,u.jsx)("span",{children:n})};t.default=h},53462:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLatDiff=function(e){return r(e/n)},t.getLngDiff=function(e,t){const o=n*Math.cos(a(t));return r(e/o)},t.getMetersBetweenLatLngs=function(e,t,r,o){const i=a(r-e),l=a(o-t),s=Math.sin(i/2)*Math.sin(i/2)+Math.cos(a(e))*Math.cos(a(r))*Math.sin(l/2)*Math.sin(l/2),d=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));return n*d},t.getMetersPerPixel=function(e,t){return 156543.03392*Math.cos(e*Math.PI/180)*(1/2**t)};const n=6371e3;function a(e){return e*(Math.PI/180)}function r(e){return e*(180/Math.PI)}},31839:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(48360),o=n(67294),i=a(n(72758)),l=a(n(60453)),s=a(n(69637)),d=n(94790),u=n(85893);var c=(0,o.forwardRef)(((e,t)=>(0,u.jsxs)(l.default,{ref:t,children:[(0,u.jsx)(d.DrawerHeader,{a8n:"drawer-title-auto-download",title:r.fbt._("Media Auto-Download",null,{hk:"2iFTSV"}),onBack:e.onClose,type:d.DRAWER_HEADER_TYPE.LARGE}),(0,u.jsx)(s.default,{children:(0,u.jsx)(i.default,{},"auto-download")})]})));t.default=c},46385:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(67294),o=a(n(38322)),i=a(n(60453)),l=a(n(69637)),s=n(94790),d=a(n(14296)),u=n(72472),c=n(85893);var f=(0,r.forwardRef)(((e,t)=>(0,c.jsxs)(i.default,{ref:t,children:[(0,c.jsx)(s.DrawerHeader,{a8n:"drawer-title-notifications",title:d.default.t(528),onBack:e.onClose,type:s.DRAWER_HEADER_TYPE.LARGE}),(0,c.jsx)(l.default,{children:(0,c.jsx)(o.default,{mute:u.MuteCollection.globalMute(),reactionsMute:u.MuteCollection.globalReactionsMute()},"notifications")})]})));t.default=f},36947:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.PollOptionInput=function(e){let{option:t,index:n,onChange:a,onKeyDown:h,onBlur:p,onTextInputRef:m,onMoveOption:g}=e;const v=(0,i.useRef)(null),[{handlerId:x},_]=(0,l.useDrop)({accept:f,collect:e=>({handlerId:e.getHandlerId()}),hover(e,t){var a;if(!v.current)return;const r=e.index,o=n;if(r===o)return;const i=null===(a=v.current)||void 0===a?void 0:a.getBoundingClientRect(),l=(i.bottom-i.top)/2,s=t.getClientOffset().y-i.top;r<o&&s<l||r>o&&s>l||(g(r,o),e.index=o)}}),[{isDragging:C},y]=(0,l.useDrag)({type:f,item:()=>({id:t.key,index:n}),collect:e=>({isDragging:e.isDragging()})});return y(_(v)),(0,u.jsx)("div",{ref:e=>{v.current=e},className:(0,s.default)(c.draggableDiv,C&&c.dragging),"data-handler-id":x,children:(0,u.jsx)(d.TextInput,{ref:e=>{m(e)},a8n:"poll-question-input",hideFloatingLabel:!0,showRemaining:!0,supportsEmoji:!0,value:t.name,error:"",maxLength:(0,r.getMaxPollOptionLength)(),onChange:a,onKeyDown:h,onBlur:p,onEnter:()=>{},placeholder:o.fbt._("Add an option",null,{hk:"1RcNxe"})})})};var r=n(8139),o=n(48360),i=n(67294),l=n(55480),s=a(n(56720)),d=n(90011),u=n(85893);const c={draggableDiv:{cursor:"n25td99q"},dragging:{opacity:"axi1ht8l"}},f="option"},22082:(e,t,n)=>{"use strict";var a=n(59182).default,r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(81109)),i=r(n(48926)),l=r(n(45095)),s=n(81572),d=n(68387),u=n(94816),c=n(55452),f=n(78820),h=n(48360),p=n(67294),m=r(n(56720)),g=n(87550),v=n(35461),x=n(41075),_=n(32826),C=n(16593),y=n(19380),b=r(n(60453)),j=r(n(69637)),S=n(94790),E=r(n(70835)),k=r(n(33308)),w=n(71206),T=r(n(14296)),M=n(41566),P=r(n(16866)),I=n(75861),O=n(39434),L=r(n(23217)),A=n(50452),D=n(85893);const R={drawerTitle:{paddingTop:"hc2u0oym",paddingEnd:"f9ovudaz",paddingBottom:"myel2vfb",paddingStart:"gx1rr48f"},chevronRightIcon:{color:"g4ti3y4y",height:"qgpfrw6h"},readReceiptsCheckBoxWrapper:{width:"jswlwoyz",display:"p357zi0d",justifyContent:"ac2vgrno"}};function N(e){const t=(0,w.getAllDurations)().find((t=>t.value===e));return void 0===t&&"number"==typeof e?(__LOG__(4,void 0,new Error,!0)`Could not find matching duration label for duration: "${e}"`,SEND_LOGS("No matching duration label"),h.fbt._("On",null,{hk:"1HkDTU"})):void 0===t?h.fbt._("Off",null,{hk:"1ueKlZ"}):t.label}function B(e,t){var n,r,o,w;const[T,O]=(0,p.useState)((()=>U((0,c.getUserPrivacySettings)()))),[L,B]=(0,p.useState)({status:null,groupadd:null,last:null,profile:null}),z=(0,l.default)(y.ContactCollection.get((0,f.getMaybeMeUser)()),"ContactCollection.get(getMaybeMeUser())"),W=(0,v.useModelValues)(z,["disappearingModeDuration"]).disappearingModeDuration;function q(e){const t=U(e.privacySettings);if(null==t)throw new Error(`Incomplete privacy settings: ${Object.keys((0,c.getUserPrivacySettings)()).join(", ")}`);O(t),B((0,I.disallowedRowsToLists)(e.privacyDisallowedRows))}(0,p.useEffect)((()=>{const t=new a;return null==T&&(0,i.default)((function*(){try{const e=yield(0,x.updatePrivacySettings)();if(t.signal.aborted)return;q(e)}catch(t){__LOG__(4,void 0,new Error,!0)`privacy_settings_drawer: get privacy settings failed ${t.stack}`,SEND_LOGS("privacy_settings_drawer: get privacy settings failed"),e.onClose(),u.ToastManager.open((0,D.jsx)(A.Toast,{id:(0,A.genId)(),msg:h.fbt._("Failed to get privacy settings, please try again.",null,{hk:"2UOq9J"})}))}}))(),()=>t.abort()}),[]),(0,p.useEffect)((()=>{const e=new a;return(0,i.default)((function*(){const t=yield(0,I.queryDisallowedLists)();e.signal.aborted||B(t)}))(),()=>e.abort()}),[]),(0,g.useListener)(s.Cmd,"account_sync_for_privacy",(e=>{q(e)}));const V=h.fbt._("Privacy",null,{hk:"WHXuP"});if(!T)return(0,D.jsx)(P.default,{title:V,error:!1});const Y=(0,M.isDefaultDisappearingMessagesEnabled)(),{lastSeen:K,profilePicture:Q,about:X,groupAdd:Z,readReceipts:J}=T;return(0,D.jsxs)(b.default,{ref:t,theme:"striped",testid:"privacy-settings-drawer",children:[(0,D.jsx)(S.DrawerHeader,{a8n:"drawer-title-privacy",title:V,onBack:e.onClose,type:S.DRAWER_HEADER_TYPE.LARGE}),(0,D.jsxs)(j.default,{children:[(0,D.jsxs)(k.default,{title:h.fbt._("Who can see my personal info",null,{hk:"2dUwwx"}),titleXStyle:R.drawerTitle,theme:"padding-no-vertical",animation:!1,ellipsify:!1,children:[(0,D.jsx)(F,{title:h.fbt._("Last seen",null,{hk:"4GuTlB"}),onClick:()=>{e.onOpenVisibilityEditDrawer("lastSeen")},children:(0,D.jsx)("span",{children:G(K,null===(n=L.last)||void 0===n?void 0:n.disallowedList.length)})}),(0,D.jsx)(F,{title:h.fbt._("Profile photo",null,{hk:"rs5RE"}),onClick:()=>{e.onOpenVisibilityEditDrawer("profilePicture")},children:(0,D.jsx)("span",{children:G(Q,null===(r=L.profile)||void 0===r?void 0:r.disallowedList.length)})}),(0,D.jsx)(F,{title:h.fbt._("About",null,{hk:"3PhlvU"}),onClick:()=>{e.onOpenVisibilityEditDrawer("about")},children:(0,D.jsx)("span",{children:G(X,null===(o=L.status)||void 0===o?void 0:o.disallowedList.length)})}),(0,D.jsx)(E.default,{title:h.fbt._("Read receipts",null,{hk:"4p0OAK"}),icon:(0,D.jsx)("div",{className:(0,m.default)(R.readReceiptsCheckBoxWrapper),children:(0,D.jsx)(C.CheckBox,{checked:J===d.ALL_NONE.all,onChange:()=>{}})}),theme:"privacy",isLastItem:!0,onClick:()=>{!function(){H.apply(this,arguments)}(T,O,J)},children:(0,D.jsx)("span",{children:h.fbt._("If turned off, you won't send or receive Read receipts. Read receipts are always sent for group chats.",null,{hk:"1N51oN"})})})]}),Y&&(0,D.jsx)(k.default,{theme:"padding-no-vertical",title:h.fbt._("Disappearing messages",null,{hk:"1u7uAT"}),titleXStyle:R.drawerTitle,animation:!1,children:(0,D.jsx)(F,{title:h.fbt._("Default message timer",null,{hk:"2tVUXb"}),onClick:e.onOpenEphemeralityDrawer,isLastItem:!0,testid:"ddm-settings-item",children:(0,D.jsx)("span",{"data-testid":"ddm-settings-item-value",children:N(W)})})}),(0,D.jsxs)(k.default,{theme:Y?"padding":"padding-no-vertical",animation:!1,children:[(0,D.jsx)(F,{title:h.fbt._("Groups",null,{hk:"3ajQWI"}),onClick:()=>{e.onOpenVisibilityEditDrawer("groupAdd")},children:(0,D.jsx)("span",{children:G(Z,null===(w=L.groupadd)||void 0===w?void 0:w.disallowedList.length)})}),(0,D.jsx)(F,{title:h.fbt._("Blocked contacts",null,{hk:"YxQ5T"}),isLastItem:!0,onClick:e.onOpenBlockedContacts,children:(0,D.jsx)("span",{children:0===_.BlocklistCollection.length?h.fbt._("None",null,{hk:"3cviAo"}):_.BlocklistCollection.length})})]})]})]})}function F(e){let{title:t,onClick:n,isLastItem:a,children:r,testid:o}=e;return(0,D.jsx)(E.default,{title:t,theme:"privacy",icon:(0,D.jsx)(L.default,{name:T.default.isRTL()?"chevron-left":"chevron-right",iconXstyle:R.chevronRightIcon}),onClick:n,isLastItem:a,testid:o,children:r})}function U(e){const{about:t,groupAdd:n,lastSeen:a,profilePicture:r,readReceipts:o}=e;if(null!=t&&null!=n&&null!=a&&null!=r&&null!=o)return{about:t,groupAdd:n,lastSeen:a,profilePicture:r,readReceipts:o}}function G(e,t){switch(e){case d.VISIBILITY.all:return h.fbt._("Everyone",null,{hk:"3oWv8q"});case d.VISIBILITY.contacts:return h.fbt._("My contacts",null,{hk:"3jgOvC"});case d.VISIBILITY.contact_blacklist:return null==t?"":T.default.t(545,{count:t,_plural:t});case d.VISIBILITY.none:return h.fbt._("Nobody",null,{hk:"ghOKj"});default:return""}}function H(){return(H=(0,i.default)((function*(e,t,n){const a=n===d.ALL_NONE.all?d.ALL_NONE.none:d.ALL_NONE.all;t((0,o.default)((0,o.default)({},e),{},{readReceipts:a}));try{a===d.ALL_NONE.none?yield(0,O.setPrivacyForOneCategory)({name:"readreceipts",value:"none"}):yield(0,O.setPrivacyForOneCategory)({name:"readreceipts",value:"all"})}catch(e){__LOG__(3,void 0,void 0,!0)`privacy_settings_drawer: set readreceipts failed ${e.stack}`,SEND_LOGS("privacy_settings_drawer: set readreceipts failed"),u.ToastManager.open((0,D.jsx)(A.Toast,{id:(0,A.genId)(),msg:h.fbt._("Failed to update Read receipts, please try again.",null,{hk:"3xUfMr"})}))}}))).apply(this,arguments)}var z=(0,p.forwardRef)(B);t.default=z},30579:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(99964)),o=a(n(64369)),i=n(41455),l=n(8139),s=n(14597),d=n(78820),u=n(62054),c=n(48360),f=n(67294),h=(a(n(56720)),n(35461)),p=a(n(95402)),m=a(n(3409)),g=n(94010),v=a(n(39770)),x=n(99989),_=n(87912),C=a(n(52665)),y=n(17239),b=a(n(24697)),j=a(n(60453)),S=a(n(69637)),E=n(27394),k=n(94790),w=a(n(33308)),T=a(n(44281)),M=a(n(13699)),P=n(29623),I=a(n(48846)),O=a(n(32973)),L=n(84287),A=a(n(14296)),D=a(n(35580)),R=n(92557),N=a(n(11339)),B=n(97567),F=a(n(87728)),U=n(9153),G=a(n(35456)),H=a(n(79876)),z=n(48870),W=n(27798),q=n(52596),V=n(55326),Y=n(44334),K=a(n(23217)),Q=n(13923),X=n(90011),Z=n(85893);class J extends O.default{constructor(){super(...arguments),this.openMerchantDetailsForm=()=>{const e=(0,d.getMeUser)();this.push((0,Z.jsx)(R.MerchantDetailsFormFlowLoadable,{contactId:e,onBack:this.pop}))},this.openCatalogDetailsForm=e=>{(0,l.canManageCollections)()&&z.QPL.markerStart(W.QuickLogMarkerId.WHATSAPP_CATALOG_COLLECTIONS_VIEW,{annotations:{string:{EntryPoint:"Profile"}}}),(0,_.createCatalogManagementFlowObject)(((t,n)=>{this.push((0,Z.jsx)(_.CatalogManagementFlowLoadable,{catalog:n,catalogId:t,product:e,onBack:this.pop}))}))}}componentDidMount(){this.push((0,Z.jsx)(le,{openMerchantDetailsForm:this.openMerchantDetailsForm,openCatalogDetailsForm:this.openCatalogDetailsForm,conn:this.props.conn,contact:this.props.contact,profilePicThumb:this.props.profilePicThumb,status:this.props.status,onClose:this.pop}))}}t.default=J;const $=e=>{const{businessProfile:t,catalog:n,openCatalogDetailsForm:a}=e;return(0,l.bannedShopsEnabled)()&&(0,g.hasShop)(t)&&(0,g.isShopBanned)(t)?(0,Z.jsx)(w.default,{theme:"padding-large",children:(0,Z.jsxs)("div",{className:G.default.content,children:[(0,Z.jsx)("div",{className:G.default.bannedShopInfoText,children:c.fbt._("This shop has been disabled for not complying with our Business or Commerce policies.",null,{hk:"39dpXJ"})}),(0,Z.jsx)(v.default,{type:"primary",onClick:function(){(0,l.bannedShopsEnabled)()&&(0,g.goToCommerceManager)(t)},children:c.fbt._("Commerce Manager",null,{hk:"2ZKedl"})})]})}):(0,Z.jsx)(F.default,{businessProfile:t,catalog:n,openCatalog:a})},ee=e=>{const{unmountSignal:t,aboutInput:n}=e,a=(0,f.useRef)(!1),i=(0,h.useModelValues)(e.conn,["pushname"]),[l,d]=(0,f.useState)(i.pushname),[u,p]=(0,f.useState)(!1),m=a.current||u?l:i.pushname,g=y.Conn.isSMB?c.fbt._("This is your business name. It will be visible to your WhatsApp customers.",null,{hk:"AABda"}):A.default.t(550),v=(0,Z.jsx)(w.default,{a8nText:"col-main-profile",title:c.fbt._("About",null,{hk:"7nIJP"}),theme:"padding",children:n});return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(w.default,{a8nText:"col-main-profile",title:c.fbt._("Your name",null,{hk:"VtujB"}),theme:"padding",children:(0,Z.jsx)(X.TextInput,{a8n:"col-main-profile-input",value:m,editable:y.Conn.canSetMyPushname(),pending:u,showRemaining:!0,validate:()=>{let e,t=l;return t=(t||"").trim(),t?/[\u2714\u2705\u2611]/g.test(t)&&(e=c.fbt._("That emoji isn't allowed in your name",null,{hk:"1JrVVd"})):e=A.default.t(111),!e||(n=e,s.ModalManager.open((0,Z.jsx)(C.default,{onOK:()=>s.ModalManager.close(),okText:c.fbt._("OK",null,{hk:"2KEeHb"}),children:n})),!1);var n},maxLength:o.default.MAX_PUSHNAME_LENGTH,onBeginEdit:()=>{a.current=!0},onChange:e=>{d(e)},onSave:()=>{if(a.current=!1,!y.Conn.canSetMyPushname())return;let e=l;e=(0,M.default)((e||"").trim());e!==i.pushname&&(p(!0),(0,V.setPushname)(e).then((()=>{t.aborted||p(!1)})))},onCancel:()=>{a.current=!1,d(i.pushname)},supportsEmoji:!0,lockable:!0,lowProfile:!0,constrainedWidth:!0})}),(0,Z.jsx)("div",{"data-a8n":r.default.key("pushname-description"),className:G.default.nameWrapper,children:(0,Z.jsx)(Q.TextSpan,{theme:"muted",children:g})}),v]})},te=e=>{const{contact:t,openMerchantDetailsForm:n,businessProfile:a,openCatalogDetailsForm:r,catalog:o,aboutInput:i}=e,s=(0,Z.jsx)(L.IconSection,{icon:"info",content:i}),f=(0,Z.jsx)(L.IconSection,{icon:"call-phone",iconClass:G.default.phoneIcon,content:(0,Z.jsxs)("div",{children:[(0,Z.jsx)(q.SelectableDiv,{className:G.default.phoneField,selectable:!0,children:(0,u.widToFormattedUser)((0,d.assertGetMe)())}),(0,Z.jsx)("div",{className:G.default.infoText,children:c.fbt._("Your phone number can be edited from the app on your mobile device.",null,{hk:"2FXNXR"})})]})}),h=(0,Z.jsxs)(w.default,{title:c.fbt._("About and Phone Number",null,{hk:"3lw6jL"}),theme:"refresh",children:[s,f]});return(0,Z.jsxs)("div",{children:[(0,Z.jsx)(T.default,{}),(0,l.canSeeECommerceComplianceIndiaSoftEnforcement)(t.id.user)&&(0,Z.jsx)(oe,{onTitleClick:n}),(0,l.blockCatalogCreationECommerceComplianceIndia)(t.businessProfile)?null:(0,Z.jsx)($,{businessProfile:a,openCatalogDetailsForm:r,catalog:o}),(0,Z.jsx)(ie,{contact:t}),h]})},ne={businessComplianceIconWrapper:{paddingEnd:"htg54gjl",color:"s4k44ver"},businessComplianceText:{flexGrow:"ggj6brxn",color:"tviruh8d"},businessComplianceRightAltIcon:{color:"cs9t9or5"}};function ae(e){let{contact:t,profilePicThumb:n}=e;const a=t.businessProfile?(0,Z.jsx)(b.default,{contact:t,businessProfile:t.businessProfile,editable:!0,profilePicThumb:n,hideStatusV3:!0}):null;return(0,Z.jsx)(w.default,{theme:"padding-no-margin",children:a})}function re(e){let{profilePicThumb:t}=e;return(0,Z.jsx)("div",{className:G.default.photoPickerWrapper,children:(0,Z.jsx)(H.default,{profilePicThumb:t})})}function oe(e){let{onTitleClick:t}=e;return(0,Z.jsx)(w.default,{title:(0,Z.jsxs)(P.FlexRow,{align:"center",children:[(0,Z.jsx)(I.default,{xstyle:ne.businessComplianceIconWrapper,children:(0,Z.jsx)(K.default,{name:"business"})}),(0,Z.jsx)(I.default,{xstyle:ne.businessComplianceText,children:c.fbt._("Business details",null,{hk:"m9xzp"})}),(0,Z.jsx)(I.default,{children:(0,Z.jsx)(K.default,{xstyle:ne.businessComplianceRightAltIcon,name:"chevron-right-alt",directional:!0})})]}),theme:"refresh-padding-title",titleOnClick:t})}function ie(e){let{contact:t}=e;return(0,l.bizLinkedAccountsEnabled)()&&t.businessProfile?(0,Z.jsx)(D.default,{businessProfile:t.businessProfile,sectionTheme:"refresh-padding-title",showEditHint:!0}):null}const le=(0,f.forwardRef)(((e,t)=>{const{onClose:n,openCatalogDetailsForm:a,openMerchantDetailsForm:r}=e,o=(0,p.default)(),u=(0,h.useModelValues)(e.status,["status"]),[g,v]=(0,f.useState)(u.status),[_,b]=(0,f.useState)(!1),w=(0,f.useRef)(!1),T=(0,f.useContext)(E.DrawerContext),P=(0,m.default)(),I=(0,h.useModelValues)(e.contact,["businessProfile","id","statusMute"]),O=(0,h.useModelValues)(e.profilePicThumb,["imgFull","id"]),[L,D]=(0,f.useState)(null),{businessProfile:R}=I,{session:F}=y.Conn.isSMB?(0,B.getProductCatalogContext)(T):{};if((0,f.useEffect)((()=>{y.Conn.isSMB&&(x.CatalogCollection.findCarouselCatalog((0,d.getMeUser)()).then((e=>{const t=Array.isArray(e)?e[0]:e;D(t)})).catch((()=>{})),F.isAccidental()&&i.DrawerManager.setDrawerContext("left",(0,B.buildProductCatalogContext)(new U.ProductCatalogSession,N.default.BIZ_PLATFORM.SMB,N.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS)))}),[]),y.Conn.isSMB&&F.isAccidental())return null;const G=()=>{w.current=!1,v(u.status)},H=w.current||_?g:u.status,z=(0,Z.jsx)(X.TextInput,{a8n:"col-main-profile-input",value:H,editable:!0,pending:_,showRemaining:!0,validate:e=>!!(e||"").trim(),maxLength:139,onBeginEdit:()=>{w.current=!0},onChange:e=>{v(e)},onSave:()=>{if(null==g)return void G();w.current=!1;const e=u.status;(0,M.default)(g)!==e&&(b(!0),(0,Y.setMyStatus)((0,M.default)(g)).then((()=>{P.aborted||b(!1)})))},onError:()=>{s.ModalManager.open((0,Z.jsx)(C.default,{onOK:()=>s.ModalManager.close(),okText:c.fbt._("OK",null,{hk:"2KEeHb"}),children:A.default.t(118)}))},onCancel:G,theme:"text-input",fieldName:c.fbt._("About",null,{hk:"2FinUX"}),supportsEmoji:!0,lockable:!0,lowProfile:!0,constrainedWidth:!0}),W=(0,l.canSeeBizProfileV3)()&&y.Conn.isSMB?(0,Z.jsx)(ae,{contact:I,profilePicThumb:O}):(0,Z.jsx)(re,{profilePicThumb:O}),q=y.Conn.isSMB?(0,Z.jsx)(te,{contact:I,openMerchantDetailsForm:r,businessProfile:R,openCatalogDetailsForm:a,catalog:L,aboutInput:z}):(0,Z.jsx)(ee,{conn:e.conn,aboutInput:z,unmountSignal:P}),V=A.default.t(450);return(0,Z.jsxs)(j.default,{ref:t,children:[(0,Z.jsx)(k.DrawerHeader,{a8n:"drawer-title-profile",title:V,onBack:()=>{n?n():null==o||o.requestDismiss()},type:k.DRAWER_HEADER_TYPE.LARGE}),(0,Z.jsxs)(S.default,{children:[W,q]})]})}))},25421:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.jsx)(r.default,{primary:e.choiceText,onClick:e.onChoose,theme:"radio-button-row",image:(0,i.jsx)(o.default,{checked:e.isChosen,hover:!1,radio:!0,onChange:e.onChoose,systemUncheckedColor:!0})})};var r=a(n(44356)),o=a(n(9275)),i=n(85893)},98863:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(21310),o=n(55452),i=n(48360),l=n(67294),s=a(n(56720)),d=a(n(27698)),u=n(57849),c=n(16593),f=a(n(60453)),h=a(n(69637)),p=n(94790),m=a(n(33308)),g=n(62657),v=n(12591),x=n(29623),_=a(n(48846)),C=a(n(14296)),y=n(41566),b=n(33210),j=a(n(83968)),S=a(n(23217)),E=n(13923),k=n(85893);const w={icon:{position:"g0rxnol2",boxSizing:"cm280p3y",width:"cnprk2g9",height:"j74n1y92",paddingTop:"n1yiu2zv",marginTop:"tt8xd2xn",marginEnd:"k1jo73ug",marginBottom:"mpdn4nr2",marginStart:"isfiuinm",color:"t63vcusb",backgroundColor:"je90h8md",borderTopStartRadius:"g9p5wyxn",borderTopEndRadius:"i0tg5vk9",borderBottomEndRadius:"aoogvgrq",borderBottomStartRadius:"o2zu3hjb"},iconLock:{position:"lhggkp7q",start:"tkdu00h0",end:"ebjesfe0",top:"qq0sjtgm",bottom:"lrw9n60e",color:"ml33x45x"},controls:{paddingBottom:"sq87qsu4",marginTop:"ignnouf6"},e2eSummaryContainer:{borderBottom:"daad4uqs",paddingBottom:"r219jyu0"}};function T(){return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(x.FlexColumn,{xstyle:w.icon,align:"center",justify:"center",children:[(0,k.jsx)(_.default,{children:(0,k.jsx)(S.default,{name:"security-shield"})}),(0,k.jsx)(x.FlexColumn,{xstyle:w.iconLock,align:"center",justify:"center",children:(0,k.jsx)(_.default,{children:(0,k.jsx)(S.default,{name:"security-lock"})})})]}),(0,k.jsxs)("div",{className:j.default.text,children:[i.fbt._("Messages and calls in end-to-end encrypted chats stay between you and the people you choose. Not even WhatsApp can read or listen to them.",null,{hk:"1MCVPM"})," ",(0,k.jsx)(v.ExternalLink,{href:(0,b.securityUrl)(),children:C.default.t(397)})]})]})}function M(e,t){const[n,a]=(0,d.default)(o.getGlobalSecurityNotifications,o.setGlobalSecurityNotifications);let l=i.fbt._("Get notified when your security code changes for a contact in an end-to-end encrypted chat. If you have multiple devices, this setting must be enabled on each device where you want to get notifications.",null,{hk:"1ByD6u"});return(0,u.getABPropConfigValue)("adv_v2_m6")&&(l=i.fbt._("Get notified when your security code changes for a contacts phone. If you have multiple devices, this setting must be enabled on each device where you want to get notifications.",null,{hk:"JvjfY"})),(0,k.jsxs)(f.default,{ref:t,children:[(0,k.jsx)(p.DrawerHeader,{a8n:"drawer-title-security",title:i.fbt._("Security",null,{hk:"2nir1E"}),onBack:e.onClose,type:p.DRAWER_HEADER_TYPE.LARGE}),(0,k.jsx)(h.default,{children:(0,k.jsxs)(m.default,{theme:"padding-large",animation:!1,children:[(0,y.isPrivacyNarrativeV1Enabled)()?(0,k.jsx)("div",{className:(0,s.default)(w.e2eSummaryContainer),children:(0,k.jsx)(g.E2eSummarySecurityDrawer,{})}):(0,k.jsx)(T,{}),(0,k.jsxs)(x.FlexRow,{xstyle:w.controls,children:[(0,k.jsx)("div",{className:j.default.checkbox,children:(0,k.jsx)(c.CheckBox,{onChange:a,checked:n})}),(0,k.jsxs)(_.default,{children:[(0,k.jsx)("div",{className:j.default.header,children:(0,k.jsx)(E.TextSpan,{theme:"title",children:i.fbt._("Show security notifications on this computer",null,{hk:"3QRZVR"})})}),(0,k.jsxs)(E.TextDiv,{theme:"muted",children:[l," ",(0,k.jsx)(v.ExternalLink,{href:(0,r.getCodeChangeFaqUrl)(),children:C.default.t(397)})]})]})]})]})})]})}var P=(0,l.forwardRef)(M);t.default=P},39524:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,h.jsx)(u.SelectModal,{onConfirm:t=>{const n=e.msgText;if(1===t.length){let a;const i=t[0];a=i.isUser&&i.contact.isBlocked()?(0,s.unblockContact)(i.contact):Promise.resolve(!0),a.then(function(){var t=(0,r.default)((function*(){if(n){if(i.urlText=e.urlText,i.active)return void d.ComposeBoxActions.paste(i,n);i.setComposeContents({text:n})}(yield o.Cmd.openChatFromUnread(i))&&d.ComposeBoxActions.focus(i)}));return function(){return t.apply(this,arguments)}}())}else Promise.all(t.map((t=>{let a;a=t.isUser&&t.contact.isBlocked()?(0,s.unblockContact)(t.contact):Promise.resolve(!0),a.then((()=>{t.urlText=e.urlText,(0,c.sendTextMsgToChat)(t,n)}))}))),o.Cmd.openChatFromUnread(t[0]);i.ModalManager.close()},maxItems:f.ServerProps.multicastLimitGlobal,title:l.fbt._("Send message to",null,{hk:"2kkuQs"}),listType:u.ListType.CHAT_SELECT_MODAL})};var r=a(n(48926)),o=n(81572),i=n(14597),l=n(48360),s=n(80140),d=n(88172),u=n(56728),c=n(5524),f=n(64551),h=n(85893)},726:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onOK:t}=e,n=e.name||o.fbt._("Contact",null,{hk:"xBh6i"}),a=s.default.t(602,{name:n});return(0,d.jsx)(i.default,{onOK:()=>{r.ModalManager.close(),t()},okText:o.fbt._("OK",null,{hk:"2KEeHb"}),children:(0,d.jsx)("div",{children:(0,d.jsx)(l.EmojiText,{text:a})})})};var r=n(14597),o=n(48360),i=a(n(52665)),l=n(65417),s=a(n(14296)),d=n(85893)},40015:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsCheckList=function(e){return(0,s.jsx)("div",{className:l.default.container,children:e.children})},t.SettingsCheckListItem=function(e){if(!0===e.checkboxRightAligned)return(0,s.jsxs)(d,{disabled:e.disabled,checkboxRightAligned:e.checkboxRightAligned,children:[(0,s.jsx)("label",{className:l.default.label,htmlFor:e.id,children:e.children}),(0,s.jsx)("div",{"data-a8n":r.default.key(e.a8nText),className:l.default.controlRightAligned,children:(0,s.jsx)(i.CheckBox,{id:e.id,onChange:e.onChange,checked:e.checked,disabled:e.disabled})})]});return(0,s.jsxs)(d,{disabled:e.disabled,children:[(0,s.jsx)("div",{"data-a8n":r.default.key(e.a8nText),className:l.default.control,children:(0,s.jsx)(i.CheckBox,{id:e.id,onChange:e.onChange,checked:e.checked,disabled:e.disabled})}),(0,s.jsx)("label",{className:l.default.label,htmlFor:e.id,children:e.children})]})},t.SettingsCheckListSection=d;var r=a(n(99964)),o=a(n(94184)),i=n(16593),l=a(n(50717)),s=n(85893);function d(e){return(0,s.jsx)("div",{className:(0,o.default)(!0===e.checkboxRightAligned?l.default.sectionControlRightAligned:l.default.section,{[l.default.disabled]:e.disabled}),children:e.children})}},74265:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(81109)),o=a(n(6479)),i=(n(88555),n(14597),n(78820)),l=n(67294),s=a(n(44356)),d=n(17239),u=n(88984),c=a(n(60453)),f=a(n(69637)),h=a(n(64738)),p=n(94790),m=n(65417),g=a(n(14296)),v=a(n(73561)),x=(a(n(23217)),n(85893));const _=["items"],C=["key"];function y(e,t){let{items:n}=e,a=(0,o.default)(e,_);const l=(0,x.jsx)(v.default,{id:a.profileId}),y=(0,x.jsx)(u.DetailImage,{id:(0,i.getMaybeMeUser)(),size:82,quality:u.DetailImageQuality.High}),b=(0,x.jsx)(m.EmojiText,{text:d.Conn.pushname,ellipsify:!0,titlify:!0});return(0,x.jsxs)(c.default,{ref:t,theme:"settings",testid:"settings-drawer",children:[(0,x.jsx)(p.DrawerHeader,{title:g.default.t(604),onBack:a.onClose,type:p.DRAWER_HEADER_TYPE.LARGE}),(0,x.jsxs)(f.default,{children:[(0,x.jsx)(s.default,{onClick:a.onProfile,image:y,primary:b,theme:"identity",secondary:l}),n.map((e=>{let{key:t}=e,n=(0,o.default)(e,C);return(0,x.jsx)(h.default,(0,r.default)({},n),t)})),undefined,undefined,undefined,undefined,undefined,undefined,undefined]})]})}var b=(0,l.forwardRef)(y);t.default=b},50517:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(48360),o=n(67294),i=n(85600),l=n(46346),s=a(n(25653)),d=a(n(20606)),u=a(n(23217)),c=n(85893);function f(e){const{starredMsgs:t,onClose:n,chat:a}=e,o=r.fbt._("Starred messages",null,{hk:"kjDwF"}),f=(0,c.jsx)(i.StarredMsgs,{}),h=r.fbt._("Use WhatsApp on your phone to see older starred messages.",null,{hk:"1hya4S"}),p=(0,c.jsx)(l.MenuBarItem,{a8nText:"starred-menu",icon:(0,c.jsx)(u.default,{name:"menu"}),title:r.fbt._("Menu",null,{hk:"1Kc9Wl"}),children:(0,c.jsx)(d.default,{chat:a,msgs:t.toArray()})});return(0,c.jsx)(s.default,{msgCollection:t,onClose:n,chat:a,title:o,emptyListText:f,footerText:h,headerMenu:p})}var h=(0,o.forwardRef)(f);t.default=h},20606:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(14597),o=n(48360),i=n(67294),l=n(60811),s=n(71174),d=a(n(84470)),u=n(85893);function c(e,t){const{msgs:n,chat:a}=e;return(0,u.jsx)(l.Dropdown,{ref:t,type:l.MenuType.DropdownMenu,flipOnRTL:!0,dirX:l.DirX.LEFT,children:(0,u.jsx)(s.DropdownItem,{a8n:"mi-unstar-all menu-item",action:()=>{r.ModalManager.open((0,u.jsx)(d.default,{msgs:n,chat:a}))},disabled:0===n.length,children:o.fbt._("Unstar all",null,{hk:"34KaRh"})})},"StarredDrawerHeader")}var f=(0,i.forwardRef)(c);t.default=f},44606:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onOpenStatus:t}=e,n=(0,c.default)((()=>new _.default)),a=()=>{const e=b.StatusV3Collection.getUnexpired(!0),t=b.StatusV3Collection.getUnexpired(!1);return{unread:e,read:t,muted:[...e,...t].filter((e=>e.contact.statusMute))}},{unread:r,read:o,muted:i}=(0,u.useMemo)(a,[]),[l,s]=(0,u.useState)((()=>r.filter((e=>!e.contact.statusMute)))),[d,p]=(0,u.useState)((()=>o.filter((e=>!e.contact.statusMute)))),[m,y]=(0,u.useState)(i),[S,E]=(0,u.useState)((()=>b.StatusV3Collection.getMyStatus())),[A,D]=(0,u.useState)(!1);(0,f.useListener)(b.StatusV3Collection,"add remove bulk_add sort change:msgsChanged change:hasUnread",(()=>{const{unread:e,read:t,muted:n}=a();s(e.filter((e=>!e.contact.statusMute))),p(t.filter((e=>!e.contact.statusMute))),y(n),E(b.StatusV3Collection.getMyStatus())})),(0,f.useListener)(h.ContactCollection,"change:statusMute",(()=>{const{unread:e,read:t,muted:n}=a();s(e.filter((e=>!e.contact.statusMute))),p(t.filter((e=>!e.contact.statusMute))),y(n),E(b.StatusV3Collection.getMyStatus())}));const R=()=>{D(!A)},N=(0,u.useMemo)((()=>{const e=[];return l.length>0&&(e.push({type:w,itemKey:"section-unread",height:48}),e.push(...l.map(((e,t)=>({type:I,itemKey:e.id.toString(),height:64,status:e,index:t}))))),d.length>0&&(e.push({type:T,itemKey:"section-read",height:48}),e.push(...d.map(((e,t)=>({type:I,itemKey:e.id.toString(),height:64,status:e,index:t}))))),m.length>0&&(e.push({type:M,itemKey:"section-muted",height:48,expanded:A}),A&&e.push(...m.map(((e,t)=>({type:I,itemKey:e.id.toString(),height:64,status:e,index:t}))))),(0,C.isPrivacyNarrativeV1Enabled)()&&e.push({type:P,itemKey:"section-e2e-message"}),e}),[l,d,m,A]);let B;B=b.StatusV3Collection.hasSynced()&&N.length>0?(0,k.jsx)(v.FlatList,{className:"statusList",itemEnterAnimationsEnabled:!0,flatListController:n.current,direction:"vertical",data:N,renderItem:e=>(0,k.jsx)(O,{data:e,onOpenStatus:t,onToggleMute:R})}):(0,k.jsx)(g.ListStatus,{});return(0,k.jsxs)("div",{className:j.default.listPanel,children:[(0,k.jsx)(L,{statusV3:S,onOpenStatus:e.onOpenStatus}),(0,k.jsx)(x.default,{className:j.default.listBody,flatListControllers:[n.current],children:B})]})};var r=a(n(45095)),o=a(n(99964)),i=n(40234),l=n(38184),s=n(78820),d=n(48360),u=n(67294),c=a(n(16223)),f=n(87550),h=n(19380),p=n(88984),m=n(48256),g=n(85600),v=n(47915),x=a(n(44942)),_=a(n(30855)),C=n(41566),y=a(n(74410)),b=n(59387),j=a(n(26185)),S=a(n(15265)),E=a(n(23217)),k=n(85893);const w="SEC_UNREAD",T="SEC_READ",M="SEC_MUTED",P="SEC_E2E_MESSAGE",I="ROW_STATUS";function O(e){let{data:t,onOpenStatus:n,onToggleMute:a}=e;switch(t.type){case w:return(0,k.jsxs)("div",{className:j.default.listSectionSep,children:[(0,k.jsx)("hr",{}),(0,k.jsx)("div",{className:j.default.listSectionText,children:(0,k.jsx)("span",{children:d.fbt._("RECENT",null,{hk:"vPbQs"})})})]});case T:return(0,k.jsxs)("div",{className:j.default.listSectionSep,children:[(0,k.jsx)("hr",{}),(0,k.jsx)("div",{className:j.default.listSectionText,children:(0,k.jsx)("span",{children:d.fbt._("VIEWED",null,{hk:"17DrUs"})})})]});case M:return(0,k.jsxs)("div",{className:j.default.listSectionSep,children:[(0,k.jsx)("hr",{}),(0,k.jsxs)("div",{className:j.default.listSectionText,children:[(0,k.jsx)("span",{children:d.fbt._("MUTED",null,{hk:"31XgZG"})}),(0,k.jsx)("button",{className:j.default.listSectionAction,onClick:a,children:t.expanded?d.fbt._("HIDE",null,{hk:"3n6J18"}):d.fbt._("SHOW",null,{hk:"1KKhJ5"})})]})]});case I:return(0,k.jsx)(y.default,{statusV3:t.status,onClick:()=>n(t.status,void 0,t.index),contact:t.status.contact});case P:return(0,k.jsx)(m.E2eMessageStatusV3List,{});default:throw new v.UnknownDataError(t)}}function L(e){var t;let n;const a=e.statusV3;let u,c;a&&(c=a.msgs);const f=()=>{const t=null==a?void 0:a.msgs;a&&(null==t?void 0:t.length)&&e.onOpenStatus(a,t.head(),0)};let h,m,g,v;if(a&&(null===(t=c)||void 0===t?void 0:t.length)){n=(0,k.jsx)(S.default,{statusV3:a,contact:a.contact,onClick:f});const e=(0,r.default)(c.last(),"myMsgs.last()").t;u=(0,k.jsx)("span",{className:j.default.secondaryHeaderText,children:i.Clock.relativeDateAndTimeStr(e)}),m={cursor:"pointer"},h=f}else n=(0,k.jsx)(p.DetailImage,{id:(0,s.getMaybeMeUser)(),theme:"status_v3",size:40}),u=(0,k.jsx)("span",{"data-a8n":o.default.key("status-no-updates"),className:j.default.secondaryHeaderText,children:d.fbt._("No updates",null,{hk:"2Fcs7d"})});l.LegacyPhoneFeatures.supportsFeature(l.LegacyPhoneFeatures.F.STATUS_V3_UI_SENDING)&&(g=(0,k.jsx)(E.default,{name:"menu"}),v=(0,k.jsx)(E.default,{name:"status-v3-create"}));const x=(0,k.jsx)("span",{"data-a8n":o.default.key("my-status"),className:j.default.primaryHeaderText,children:d.fbt._("My Status",null,{hk:"225G1q"})});return(0,k.jsxs)("div",{className:j.default.panelHeader,style:m,onClick:h,children:[(0,k.jsx)("div",{className:j.default.headerButtonsPrimary,children:n}),(0,k.jsxs)("div",{className:j.default.headerText,children:[x,u]}),(0,k.jsxs)("div",{className:j.default.headerButtonsSecondary,children:[v,g]})]})}},78985:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onOpenStatus:t,sessionId:n,closeStatusViewer:a}=e,[m,g]=(0,l.useState)((()=>d.StatusV3Collection.getMyStatus()));(0,l.useEffect)((()=>{(0,o.setLastStatusUsage)(),null!=n&&d.StatusV3Collection.logMetrics({type:"session",sessionId:n}),r.Cmd.onStatusViewerOpen()}),[]);const v=(0,i.default)(c.default.v3_x,{});return(0,s.useListener)(d.StatusV3Collection,["add","remove"],(()=>{g(d.StatusV3Collection.getMyStatus())})),(0,s.useListener)(r.Cmd,["dismiss_status_v3_viewer"],(()=>{a(!0)})),(0,p.jsx)("div",{className:c.default.modalBackground,"data-animate-status-v3-modal-background":!0,children:(0,p.jsxs)("div",{className:c.default.mainWrapper,children:[(0,p.jsx)(u.default,{onOpenStatus:t}),(0,p.jsx)(f.default,{status:m,onOpenStatus:t}),(0,p.jsx)("button",{className:v,onClick:()=>e.closeStatusViewer(!0),children:(0,p.jsx)(h.default,{name:"x-viewer"})})]})})};var r=n(81572),o=n(55452),i=a(n(94184)),l=n(67294),s=n(87550),d=n(59387),u=a(n(44606)),c=a(n(18442)),f=a(n(78662)),h=a(n(23217)),p=n(85893)},78662:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,C.jsx)(y,{statusV3:e.status,onOpenStatus:e.onOpenStatus});let n,a;s.LegacyPhoneFeatures.supportsFeature(s.LegacyPhoneFeatures.F.STATUS_V3_UI_SENDING)&&(n=(0,C.jsxs)("div",{className:g.default.updateWrapper,children:[(0,C.jsx)("div",{className:g.default.updateTitle,children:d.fbt._("Update your status",null,{hk:"43mqpz"})}),(0,C.jsxs)("div",{className:g.default.uploadButtons,children:[(0,C.jsxs)("div",{className:g.default.buttonContainer,children:[(0,C.jsx)(_.default,{name:"status-v3-upload",className:g.default.buttonIcon}),d.fbt._("Upload",null,{hk:"2EkSQz"})]}),(0,C.jsxs)("div",{className:g.default.buttonContainer,children:[(0,C.jsx)(_.default,{name:"status-v3-camera",className:g.default.buttonIcon}),d.fbt._("Camera",null,{hk:"1QXPXc"})]})]})]}),a=(0,C.jsx)("hr",{}));return(0,C.jsxs)("div",{className:g.default.outStatusPanel,children:[n,a,t]})};var r=n(50796),o=a(n(99964)),i=n(92574),l=n(40234),s=n(38184),d=n(48360),u=n(67294),c=a(n(59312)),f=n(87550),h=a(n(3409)),p=n(88984),m=(n(54311),n(17972)),g=a(n(89683)),v=a(n(21029)),x=a(n(15265)),_=a(n(23217)),C=n(85893);function y(e){const{statusV3:t}=e,n=(0,c.default)();(0,u.useEffect)((()=>{null==t||t.loadMore(t.totalCount).catch((e=>{__LOG__(3)`error while loading all out status: ${String(e)}`}))}),[]),(0,f.useListener)(t,"change:msgsChanged",n);const a=e.statusV3;if(a&&a.msgs.length>0){const t=a.msgs.map((t=>(0,C.jsx)(b,{msg:t,status:a,onOpenStatus:e.onOpenStatus},t.id.toString())));return(0,C.jsxs)("div",{className:g.default.viewWrapper,children:[(0,C.jsx)("div",{className:g.default.viewTitle,children:d.fbt._("View your updates",null,{hk:"1DTRQt"})}),(0,C.jsx)("div",{className:g.default.viewUpdates,children:t})]})}return(0,C.jsxs)("div",{className:g.default.viewWrapper,children:[(0,C.jsx)("div",{className:g.default.placeholderIcon,children:(0,C.jsx)(_.default,{name:"status-v3-placeholder"})}),(0,C.jsx)("div",{"data-a8n":o.default.key("status-placeholder"),className:g.default.placeholderText,children:d.fbt._("Click on a contact to view their status updates",null,{hk:"d6xUd"})})]})}function b(e){const{msg:t,status:n}=e,a=(0,h.default)(),[o,s]=(0,u.useState)(null),[d,c]=(0,u.useState)(null);(0,u.useEffect)((()=>{m.MsgInfoCollection.find(t.id).then((e=>{a.aborted||(c(e),s(e.read.length))})).catch((0,r.filteredCatch)(i.EphemeralDrop,(()=>{})))}),[]),(0,f.useListener)(null==d?void 0:d.read,["add","remove"],(()=>{s(null==d?void 0:d.read.length)}));const _=(0,C.jsx)(p.DetailImage,{id:t.sender,theme:"status_v3",size:80});return(0,C.jsxs)("div",{className:g.default.outDetail,children:[(0,C.jsx)(x.default,{statusV3:n,msg:t,onClick:()=>e.onOpenStatus(n,t),contact:n.contact,role:"button",theme:"status-panel",thumbnailPlaceholder:_}),(0,C.jsx)("div",{className:g.default.seen,children:(0,C.jsx)(v.default,{seenCount:o})}),(0,C.jsx)("div",{className:g.default.timestamp,children:l.Clock.relativeDateAndTimeStr(t.t)})]})}},39822:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(48360),o=n(67294),i=a(n(56720)),l=a(n(16223)),s=a(n(39902)),d=a(n(60453)),u=a(n(69637)),c=n(94790),f=a(n(33308)),h=a(n(30855)),p=n(10595),m=a(n(52146)),g=n(85893);const v={stickerContainer:{display:"p357zi0d",justifyContent:"ac2vgrno",marginTop:"hv5pdlef",marginBottom:"gdaqao4w",width:"ln8gz9je"},controlsContainer:{display:"p357zi0d",justifyContent:"ac2vgrno",marginBottom:"fhelu9n7"},controlsButton:{marginStart:"nzcjdldu",marginEnd:"gqi0zhd6"}};function x(e,t){const n=(0,l.default)((()=>new h.default)),{sticker:a,stickerPack:o,onSend:x,onBack:_}=e;return(0,g.jsxs)(d.default,{theme:"sticker-store",ref:t,children:[(0,g.jsx)(c.DrawerHeader,{title:r.fbt._("Sticker Details",null,{hk:"44A1rH"}),type:c.DRAWER_HEADER_TYPE.SMALL,onBack:_}),(0,g.jsx)(u.default,{flatListControllers:[n.current],children:(0,g.jsxs)(f.default,{animation:!1,theme:"padding-no-margin",shadow:!1,children:[(0,g.jsx)("div",{className:(0,i.default)(v.stickerContainer),children:(0,g.jsx)(m.default,{sticker:a,theme:"stickerDetails"},a.id)}),(0,g.jsx)(p.StickerDetailsStickerPackInfo,{name:o.name,publisher:o.publisher,theme:p.Theme.StickerStore}),(0,g.jsx)("div",{className:(0,i.default)(v.controlsContainer),children:(0,g.jsx)(s.default,{icon:"send",label:r.fbt._("Send to this chat",null,{hk:"3uG4Tr"}),a8nText:"sticker-action send-button",xstyle:v.controlsButton,onClick:()=>{x(a)}})})]})})]},"sticker-details-modal")}var _=(0,o.forwardRef)(x);t.default=_},41966:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(48360),o=n(67294),i=a(n(56720)),l=a(n(96570)),s=a(n(16223)),d=a(n(74570)),u=a(n(60453)),c=a(n(69637)),f=n(94790),h=a(n(33308)),p=n(65417),m=a(n(30855)),g=a(n(14296)),v=n(11054),x=a(n(10093)),_=a(n(52146)),C=n(44333),y=a(n(23217)),b=n(13923),j=n(85893);const S={titleContainer:{display:"p357zi0d",alignItems:"gndfcl4n",marginBottom:"or9x5nie"},title:{flexGrow:"tvf2evcx"},spinner:{display:"p357zi0d",alignItems:"gndfcl4n",justifyContent:"ac2vgrno",minHeight:"h2zl7k75"},animatedIcon:{marginStart:"oz0g9ue8",color:"kw851w1p"},contentContainer:{marginBottom:"dblt22a0",color:"hp667wtd",fontSize:"f8jlpxt4",lineHeight:"jgi8eev7"},stickersContainer:{display:"btb1m7bk",gridTemplateColumns:"dr6m1ylk",gridTemplateRows:"kenirpp9",gridColumnGap:"zqptfkjs",gridRowGap:"lhjw8glk",justifyContent:"o4u7okr9",width:"ln8gz9je",height:"ppled2lx"},emptyContainer:{display:"p357zi0d",justifyContent:"ac2vgrno",marginTop:"hv5pdlef",marginBottom:"gdaqao4w",width:"ln8gz9je"},emptySticker:{width:"sr23wnuw",height:"rjxfi64q",marginBottom:"dblt22a0",backgroundRepeat:"sxl192xd",backgroundSize:"hbhfgwk1"},emptyText:{textAlign:"qfejxiq4",marginBottom:"fhelu9n7"}};function E(e,t){const n=(0,s.default)((()=>new m.default)),{stickerPack:a,stickerPackId:E,onStickerClick:k,onStickerEnter:w,onBack:T,onClose:M}=e,P=function(e,t){return(0,l.default)(C.StickerPackCollectionMd,"add remove reset",(()=>e||(t?C.StickerPackCollectionMd.get(t):null)))||(null==t?null:void C.StickerPackCollectionMd.fetchStickerPack(t))}(a,E),I=function(e){return(0,l.default)(null==e?void 0:e.stickers,"add remove reset",(()=>null==e?void 0:e.stickers.toArray()))}(P),O=function(e){return(0,l.default)(C.StickerPackCollectionMd,"change:packFetchState",(()=>e?C.StickerPackCollectionMd.packFetchState.get(e):null))}(E),L=(0,d.default)();(0,o.useEffect)((()=>{L((()=>{null==P||P.stickers.fetch()}))}),[null==P?void 0:P.stickers,L]);const A=(e,t)=>{P&&k(e,P,t)},D=(e,t)=>{P&&w(e,P,t)};let R;return(E&&O===C.FETCH_STATE.PENDING||0===(null==I?void 0:I.length))&&(R=(0,j.jsx)(b.TextDiv,{theme:"plain",xstyle:S.spinner,children:(0,j.jsx)(v.Spinner,{size:50,stroke:4})})),(0,j.jsxs)(u.default,{theme:"sticker-store",ref:t,children:[(0,j.jsx)(f.DrawerHeader,{title:r.fbt._("Sticker Details",null,{hk:"44A1rH"}),type:f.DRAWER_HEADER_TYPE.SMALL,onBack:T,onCancel:M}),(0,j.jsx)(c.default,{flatListControllers:[n.current],children:(0,j.jsxs)(h.default,{animation:!1,theme:"padding-no-margin",shadow:!1,children:[P?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(b.TextDiv,{theme:"title",xstyle:S.titleContainer,children:[(0,j.jsx)(p.EmojiText,{xstyle:S.title,text:P.name,ellipsify:!0,titlify:!0}),P.animated?(0,j.jsx)(y.default,{name:"round-play",className:(0,i.default)(S.animatedIcon),width:16,height:16}):null]}),P.publisher&&(0,j.jsx)(b.TextDiv,{theme:"plain",xstyle:S.contentContainer,children:(0,j.jsx)(p.EmojiText,{text:g.default.t(613,{name:P.publisher})})}),P.description&&(0,j.jsx)(b.TextDiv,{theme:"plain",xstyle:S.contentContainer,children:(0,j.jsx)(p.EmojiText,{text:P.description})}),R,(0,j.jsx)("div",{className:(0,i.default)(S.stickersContainer),children:null==I?void 0:I.map((e=>(0,j.jsx)(_.default,{sticker:e,theme:"stickerStore",onClick:A,onEnter:D,dontShowViewPack:!0},e.id)))})]}):null,!P&&E&&O===C.FETCH_STATE.PENDING?R:null,P||E&&O===C.FETCH_STATE.PENDING?null:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:(0,i.default)(S.emptyContainer),children:(0,j.jsx)("div",{className:(0,i.default)(S.emptySticker),style:{backgroundImage:`url(${x.default})`}})}),(0,j.jsx)(b.TextDiv,{theme:"plain",xstyle:[S.contentContainer,S.emptyText],children:(0,j.jsx)(p.EmojiText,{text:r.fbt._("Unable to find sticker pack",null,{hk:"3aIIxP"})})})]})]})})]},"sticker-pack-details-modal")}var k=(0,o.forwardRef)(E);t.default=k},37968:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(48360),o=n(67294),i=(a(n(56720)),a(n(96570))),l=a(n(16223)),s=a(n(60453)),d=a(n(69637)),u=n(94790),c=a(n(33308)),f=a(n(30855)),h=n(11054),p=n(44333),m=a(n(63822)),g=n(13923),v=n(85893);const x={spinner:{display:"p357zi0d",alignItems:"gndfcl4n",justifyContent:"ac2vgrno",minHeight:"h2zl7k75"}};function _(e,t){const n=(0,i.default)(p.StickerPackCollectionMd,"add remove reset",(()=>p.StickerPackCollectionMd.filter((e=>null!=e.index)))),a=(0,l.default)((()=>new f.default));let o;return 0===n.length&&(o=(0,v.jsx)(g.TextDiv,{theme:"plain",xstyle:x.spinner,children:(0,v.jsx)(h.Spinner,{size:50,stroke:4})})),(0,v.jsxs)(s.default,{theme:"sticker-store",ref:t,children:[(0,v.jsx)(u.DrawerHeader,{title:r.fbt._("WhatsApp Sticker Store",null,{hk:"nicpq"}),type:u.DRAWER_HEADER_TYPE.SMALL,onCancel:e.onClose}),(0,v.jsx)(d.default,{flatListControllers:[a.current],onScroll:t=>{var n;null===(n=e.onScrollOffsetChange)||void 0===n||n.call(e,t.currentTarget.scrollTop)},scrollOffset:e.scrollOffset,children:(0,v.jsxs)(c.default,{animation:!1,theme:"no-padding",shadow:!1,children:[o,(0,v.jsx)(m.default,{stickerPacks:n,onStickerPackDetails:e.onStickerPackDetails})]})})]},"sticker-store-modal")}var C=(0,o.forwardRef)(_);t.default=C},7693:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const e=(0,i.useContext)(u.ThemeContext),[t,n]=(0,i.useState)(e.systemThemeMode?"system":e.theme),a=e=>{const t=e.target.value;"light"!==t&&"dark"!==t&&"system"!==t||n(t)};return(0,c.jsx)(s.default,{title:o.fbt._("Choose theme",null,{hk:"3cnXtb"}),onOK:()=>{"system"===t?(e.setSystemThemeMode(!0),e.setTheme(d.default.getCurrentTheme())):(e.setSystemThemeMode(!1),e.setTheme(t)),r.ModalManager.close()},onCancel:()=>{r.ModalManager.close()},children:(0,c.jsx)("form",{children:(0,c.jsxs)("ol",{children:[(0,c.jsx)("li",{children:(0,c.jsxs)("label",{className:(0,l.default)(f),children:[(0,c.jsx)("input",{type:"radio",name:"theme",value:"light",className:(0,l.default)(h),checked:"light"===t,onChange:a}),o.fbt._("Light",null,{hk:"2EcNH1"})]})},"light"),(0,c.jsx)("li",{children:(0,c.jsxs)("label",{className:(0,l.default)(f),children:[(0,c.jsx)("input",{type:"radio",name:"theme",value:"dark",className:(0,l.default)(h),checked:"dark"===t,onChange:a}),o.fbt._("Dark",null,{hk:"2GGBbH"})]})},"dark"),(0,c.jsx)("li",{children:(0,c.jsxs)("label",{className:(0,l.default)(f),children:[(0,c.jsx)("input",{type:"radio",name:"theme",value:"system",className:(0,l.default)(h),checked:"system"===t,onChange:a}),o.fbt._("System default",null,{hk:"2lMytc"})]})},"system")]})})})};var r=n(14597),o=n(48360),i=n(67294),l=a(n(56720)),s=a(n(52665)),d=a(n(3137)),u=n(97628),c=n(85893);const f={display:"l7jjieqr",height:"hpdpob1j",paddingTop:"n1yiu2zv",paddingEnd:"f9ovudaz",paddingBottom:"eb4rp10x",paddingStart:"gx1rr48f",cursor:"ajgl1lbb"},h={marginEnd:"claouzo6"}},73953:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.TOS_BASE_URL=t.BIZ_TOS_BASE_URL=void 0,t.getBizTosUrl=function(){return`${i}?lg=${r.default.getLocale()}`},t.getTosUrl=function(){return`${o}?lg=${r.default.getLocale()}`};var r=a(n(14296));const o="https://www.whatsapp.com/legal/";t.TOS_BASE_URL=o;const i="https://www.whatsapp.com/legal/business-terms";t.BIZ_TOS_BASE_URL=i},87023:(e,t,n)=>{"use strict";var a=n(59182).default,r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(48926)),i=n(48360),l=n(67294),s=(r(n(56720)),r(n(60453))),d=r(n(69637)),u=r(n(64738)),c=n(94790),f=r(n(33308)),h=n(29623),p=r(n(48846)),m=r(n(14296)),g=n(11054),v=r(n(23217)),x=n(13923),_=n(1673),C=n(85893);const y={drawerSection:{paddingTop:"msavwer2"},description:{paddingTop:"msavwer2",paddingEnd:"bcymb0na",paddingBottom:"slgfab0f",paddingStart:"e8k79tju"}};function b(e,t){const[n,r]=(0,l.useState)(null),[d,u]=(0,l.useState)(!1);if((0,l.useEffect)((()=>{const e=new a;return(0,o.default)((function*(){if(e.signal.aborted)return;const t=yield(0,_.getTwoFactor)();r(t.code),u(t.email)}))(),()=>e.abort()}),[]),null==n)return(0,C.jsx)(s.default,{ref:t,children:(0,C.jsx)(S,{onClose:e.onClose,children:(0,C.jsx)(h.FlexRow,{align:"center",justify:"center",children:(0,C.jsx)(h.FlexRow,{align:"center",justify:"center",children:(0,C.jsx)(p.default,{children:(0,C.jsx)(g.Spinner,{size:50,stroke:4})})})})})});let c,f,b;return!0===n?(c=i.fbt._("Two-step verification is enabled. You'll need to enter your PIN when registering your phone number with WhatsApp again.",null,{hk:"3YBvN9"}),f=(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(j,{onClick:e.onOpenDisableDrawer,icon:(0,C.jsx)(v.default,{name:"round-x-inv",height:24}),children:i.fbt._("Disable",null,{hk:"2NQsJG"})}),(0,C.jsx)(j,{onClick:e.onOpenUpdatePinDrawer,icon:(0,C.jsx)(v.default,{name:"settings-pin"}),children:i.fbt._("Change PIN",null,{hk:"4jxHA2"})}),(0,C.jsx)(j,{onClick:e.onOpenUpdateEmailDrawer,icon:(0,C.jsx)(v.default,{name:"business-email"}),children:!0===d?i.fbt._("Change email address",null,{hk:"2eLVB7"}):i.fbt._("Add email address",null,{hk:"K0UsJ"})})]}),b=m.default.isRTL()?"settings_2fa_done_rtl":"settings_2fa_done"):(c=i.fbt._("For added security, enable two-step verification, which will require a PIN when registering your phone number with WhatsApp again.",null,{hk:"1w6wcg"}),f=(0,C.jsx)(j,{onClick:e.onOpenRegistrationDrawer,children:i.fbt._("Enable",null,{hk:"lOVum"})}),b="settings_2fa"),(0,C.jsx)(s.default,{ref:t,children:(0,C.jsxs)(S,{onClose:e.onClose,children:[(0,C.jsx)(h.FlexRow,{align:"center",justify:"center",children:(0,C.jsx)(p.default,{children:(0,C.jsx)(v.default,{name:b})})}),(0,C.jsx)(x.TextDiv,{xstyle:y.description,children:c}),f]})})}function j(e){let{children:t,onClick:n,isLastItem:a,icon:r}=e;return(0,C.jsx)(u.default,{icon:r,onClick:n,children:t})}function S(e){let{children:t,onClose:n}=e;return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(c.DrawerHeader,{title:i.fbt._("Two-Step Verification",null,{hk:"371hOo"}),onBack:n,type:c.DRAWER_HEADER_TYPE.LARGE}),(0,C.jsx)(d.default,{children:(0,C.jsx)(f.default,{animation:!1,ellipsify:!1,xstyle:y.drawerSection,children:t})})]})}var E=(0,l.forwardRef)(b);t.default=E},96626:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.TwoFactorCurrentPinItem=function(e){return(0,s.jsx)(o.default,{title:r.fbt._("Enter your existing PIN Code",null,{hk:"2fSm6a"}),children:(0,s.jsx)(i.TextInput,{onChange:e.setCurrentPin,value:e.currentPin,placeholder:r.fbt._("******",null,{hk:"12vsOT"}),hideFloatingLabel:!0,maxLength:l.PIN_LENGTH,managed:!0,managedError:!0,onKeyDown:l.isKeyFiniteAndAllowed})})};var r=n(48360),o=a(n(70835)),i=n(90011),l=n(12348),s=n(85893)},36486:(e,t,n)=>{"use strict";var a=n(59182).default,r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(48926)),i=n(94816),l=r(n(40436)),s=n(48360),d=n(67294),u=r(n(56720)),c=r(n(39770)),f=r(n(60453)),h=r(n(69637)),p=n(94790),m=r(n(33308)),g=n(50452),v=n(12348),x=n(1673),_=n(96626),C=n(85893);const y={display:"p357zi0d",justifyContent:"j1p1mz06",paddingBottom:"hjz8m82x",marginTop:"ignnouf6",textAlign:"qfejxiq4"};function b(e){const[t,n]=(0,d.useState)(""),r=t.length===v.PIN_LENGTH,b=function(){var t=(0,o.default)((function*(){if(!(new a).signal.aborted)try{yield(0,x.setTwoFactor)(),e.onClose()}catch(e){(()=>{const e=(0,g.genId)();i.ToastManager.open((0,C.jsx)(g.Toast,{msg:s.fbt._("Error disabling two factor authentication. Please try again later",null,{hk:"1YwEW0"}),id:e}))})()}}));return function(){return t.apply(this,arguments)}}();return(0,C.jsxs)(f.default,{children:[(0,C.jsx)(p.DrawerHeader,{title:s.fbt._("Two-Step Verification",null,{hk:"4byi3k"}),onBack:e.onClose,type:p.DRAWER_HEADER_TYPE.LARGE}),(0,C.jsx)(h.default,{children:(0,C.jsxs)("form",{children:[(0,C.jsx)(m.default,{theme:"padding",children:(0,C.jsx)(_.TwoFactorCurrentPinItem,{currentPin:t,setCurrentPin:n})}),(0,C.jsx)(l.default,{transitionName:"btn",className:(0,u.default)(y),children:(0,C.jsx)(c.default,{onClick:()=>b(),disabled:!r,type:"primary",children:s.fbt._("Disable",null,{hk:"47dvb3"})})})]})})]})}var j=(0,d.forwardRef)(b);t.default=j},42072:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{email:t,onEmailChange:n,emailConfirmation:a,onEmailConfirmationChange:u}=e;const[c,f]=(0,i.useState)(!1),[h,p]=(0,i.useState)(!1);return(0,i.useEffect)((()=>{t===a&&p(!1)}),[t,a]),(0,i.useEffect)((()=>{(0,r.validateEmail)(t)&&f(!1)}),[t]),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(l.default,{title:o.fbt._("Add an email address to your account which will be used to reset your PIN if you forget it and safeguard your account.",null,{hk:"hOoLZ"}),children:(0,d.jsx)(s.TextInput,{onChange:n,value:t,placeholder:o.fbt._("Email",null,{hk:"X6Ecg"}),onBlur:()=>{(0,r.validateEmail)(t)||f(!0)},error:c?o.fbt._("Incorrect email address format",null,{hk:"31SbGe"}):null})}),(0,d.jsx)(l.default,{title:o.fbt._("Confirm your email address",null,{hk:"3JG3wt"}),children:(0,d.jsx)(s.TextInput,{onChange:u,value:a,placeholder:o.fbt._("Email",null,{hk:"X6Ecg"}),onBlur:()=>{t!==a&&p(!0)},error:h?o.fbt._("Email addresses don't match. Try again.",null,{hk:"1aIhRJ"}):null})})]})};var r=n(70490),o=n(48360),i=n(67294),l=a(n(70835)),s=n(90011),d=n(85893)},5084:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.TwoFactorPinItem=function(e){const t=e.pinConfirmation.length===l.PIN_LENGTH&&e.pin!==e.pinConfirmation;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.default,{title:r.fbt._("Enter a six-digit PIN which you'll be asked for when you register your phone number with WhatsApp",null,{hk:"1mIPNN"}),children:(0,s.jsx)(i.TextInput,{onChange:e.setPin,value:e.pin,placeholder:r.fbt._("******",null,{hk:"12vsOT"}),hideFloatingLabel:!0,maxLength:l.PIN_LENGTH,managed:!0,managedError:!0,onKeyDown:l.isKeyFiniteAndAllowed})}),(0,s.jsx)(o.default,{title:r.fbt._("Confirm your PIN",null,{hk:"481hoK"}),children:(0,s.jsx)(i.TextInput,{onChange:e.setPinConfirmation,value:e.pinConfirmation,placeholder:r.fbt._("******",null,{hk:"12vsOT"}),hideFloatingLabel:!0,maxLength:l.PIN_LENGTH,managed:!0,managedError:!0,error:t?r.fbt._("PINs don't match. Try again.",null,{hk:"3SLhII"}):null,onKeyDown:l.isKeyFiniteAndAllowed})})]})};var r=n(48360),o=a(n(70835)),i=n(90011),l=n(12348),s=n(85893)},92857:(e,t,n)=>{"use strict";var a=n(59182).default,r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(48926)),i=n(94816),l=r(n(40436)),s=n(48360),d=n(67294),u=r(n(56720)),c=r(n(39770)),f=r(n(60453)),h=r(n(69637)),p=n(94790),m=r(n(33308)),g=n(50452),v=n(12348),x=n(1673),_=r(n(42072)),C=n(5084),y=n(85893);const b={zIndex:"b9fczbqn",display:"p357zi0d",justifyContent:"j1p1mz06",paddingBottom:"hjz8m82x",marginTop:"ignnouf6",textAlign:"qfejxiq4"},j=n(76672)({SET_PIN_NUMBER:"set_pin_number",SET_EMAIL:"set_email"});function S(e,t){const[n,r]=(0,d.useState)(""),[l,u]=(0,d.useState)(""),[c,f]=(0,d.useState)(""),[h,p]=(0,d.useState)(""),[m,v]=(0,d.useState)(j.SET_PIN_NUMBER),_=function(){var t=(0,o.default)((function*(){const t=new a;if(c===h&&n===l&&!t.signal.aborted)try{yield(0,x.setTwoFactor)(n,c),e.onClose()}catch(e){const t=(0,g.genId)();i.ToastManager.open((0,y.jsx)(g.Toast,{msg:s.fbt._("Error changing two factor authentication email. Please try again later",null,{hk:"yc6Vh"}),id:t}))}}));return function(){return t.apply(this,arguments)}}();return m===j.SET_PIN_NUMBER?(0,y.jsx)(k,{ref:t,pin:n,setPin:r,pinConfirmation:l,setPinConfirmation:u,onClose:e.onClose,setStep:v}):(0,y.jsx)(w,{ref:t,email:c,setEmail:f,emailConfirmation:h,setEmailConfirmation:p,setStep:v,onRegisterButton:_})}const E=(0,d.forwardRef)(((e,t)=>{let{children:n,submitButton:a,onClose:r}=e;return(0,y.jsxs)(f.default,{ref:t,children:[(0,y.jsx)(p.DrawerHeader,{a8n:"drawer-title-2fa",title:s.fbt._("Two-Step Verification",null,{hk:"V5WvQ"}),onBack:r,type:p.DRAWER_HEADER_TYPE.LARGE}),(0,y.jsx)(h.default,{children:(0,y.jsxs)("form",{children:[(0,y.jsx)(m.default,{theme:"padding",children:n}),(0,y.jsx)(l.default,{transitionName:"btn",className:(0,u.default)(b),children:a})]})})]})})),k=(0,d.forwardRef)(((e,t)=>{let{pin:n,setPin:a,pinConfirmation:r,setPinConfirmation:o,onClose:i,setStep:l}=e;const d=n.length===v.PIN_LENGTH&&n===r,u=(0,y.jsx)(c.default,{onClick:()=>l(j.SET_EMAIL),disabled:!d,type:"primary",children:s.fbt._("Continue",null,{hk:"1tKb7K"})});return(0,y.jsx)(E,{ref:t,onClose:i,submitButton:u,children:(0,y.jsx)(C.TwoFactorPinItem,{pin:n,setPin:a,pinConfirmation:r,setPinConfirmation:o})})})),w=(0,d.forwardRef)(((e,t)=>{let{email:n,setEmail:a,emailConfirmation:r,setEmailConfirmation:o,setStep:i,onRegisterButton:l}=e;const d=(0,y.jsx)(c.default,{onClick:l,type:"primary",children:s.fbt._("Register",null,{hk:"41O09c"})});return(0,y.jsx)(E,{ref:t,onClose:()=>i(j.SET_PIN_NUMBER),submitButton:d,children:(0,y.jsx)(_.default,{email:n,onEmailChange:a,emailConfirmation:r,onEmailConfirmationChange:o})})}));var T=(0,d.forwardRef)(S);t.default=T},89932:(e,t,n)=>{"use strict";var a=n(59182).default,r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(48926)),i=n(94816),l=r(n(40436)),s=n(48360),d=n(67294),u=r(n(56720)),c=r(n(39770)),f=r(n(60453)),h=r(n(69637)),p=n(94790),m=r(n(33308)),g=n(50452),v=n(12348),x=n(1673),_=n(96626),C=r(n(42072)),y=n(85893);const b={display:"p357zi0d",justifyContent:"j1p1mz06",paddingBottom:"hjz8m82x",marginTop:"ignnouf6",textAlign:"qfejxiq4"};function j(e,t){const[n,r]=(0,d.useState)(""),[j,S]=(0,d.useState)(""),[E,k]=(0,d.useState)(""),[w,T]=(0,d.useState)(!1),M=n.length===v.PIN_LENGTH&&j===E&&!w,P=function(){var t=(0,o.default)((function*(){T(!0);if(!(new a).signal.aborted)try{yield(0,x.setTwoFactor)(n,j),e.onClose(),T(!1)}catch(e){T(!1);const t=(0,g.genId)();i.ToastManager.open((0,y.jsx)(g.Toast,{msg:s.fbt._("Error changing two factor authentication email. Please try again later",null,{hk:"yc6Vh"}),id:t}))}}));return function(){return t.apply(this,arguments)}}();return(0,y.jsxs)(f.default,{ref:t,children:[(0,y.jsx)(p.DrawerHeader,{title:s.fbt._("Two-Step Verification",null,{hk:"4byi3k"}),onBack:e.onClose,type:p.DRAWER_HEADER_TYPE.LARGE}),(0,y.jsx)(h.default,{children:(0,y.jsxs)("form",{children:[(0,y.jsxs)(m.default,{theme:"padding",children:[(0,y.jsx)(_.TwoFactorCurrentPinItem,{currentPin:n,setCurrentPin:r}),(0,y.jsx)(C.default,{email:j,onEmailChange:S,emailConfirmation:E,onEmailConfirmationChange:k})]}),(0,y.jsx)(l.default,{transitionName:"btn",className:(0,u.default)(b),children:(0,y.jsx)(c.default,{onClick:P,disabled:!M,type:"primary",children:s.fbt._("Update Email",null,{hk:"MepRa"})})})]})})]})}var S=(0,d.forwardRef)(j);t.default=S},24098:(e,t,n)=>{"use strict";var a=n(59182).default,r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(48926)),i=n(94816),l=r(n(40436)),s=n(48360),d=n(67294),u=r(n(56720)),c=r(n(39770)),f=r(n(60453)),h=r(n(69637)),p=n(94790),m=r(n(33308)),g=n(50452),v=n(12348),x=n(1673),_=n(96626),C=n(5084),y=n(85893);const b={display:"p357zi0d",justifyContent:"j1p1mz06",paddingBottom:"hjz8m82x",marginTop:"ignnouf6",textAlign:"qfejxiq4"};function j(e,t){const[n,r]=(0,d.useState)(""),[j,S]=(0,d.useState)(""),[E,k]=(0,d.useState)(""),[w,T]=(0,d.useState)(!1),M=n.length===v.PIN_LENGTH&&n===j&&!w,P=function(){var t=(0,o.default)((function*(){T(!0);if(!(new a).signal.aborted)try{yield(0,x.setTwoFactor)(n),T(!1),e.onClose()}catch(e){T(!1);const t=(0,g.genId)();i.ToastManager.open((0,y.jsx)(g.Toast,{msg:s.fbt._("Error changing two factor authentication pin. Please try again later",null,{hk:"1l139k"}),id:t}))}}));return function(){return t.apply(this,arguments)}}();return(0,y.jsxs)(f.default,{ref:t,children:[(0,y.jsx)(p.DrawerHeader,{title:s.fbt._("Two-Step Verification",null,{hk:"371hOo"}),onBack:e.onClose,type:p.DRAWER_HEADER_TYPE.LARGE}),(0,y.jsx)(h.default,{children:(0,y.jsxs)("form",{children:[(0,y.jsxs)(m.default,{theme:"padding",children:[(0,y.jsx)(_.TwoFactorCurrentPinItem,{currentPin:E,setCurrentPin:k}),(0,y.jsx)(C.TwoFactorPinItem,{pin:n,setPin:r,pinConfirmation:j,setPinConfirmation:S})]}),(0,y.jsx)(l.default,{transitionName:"btn",className:(0,u.default)(b),children:(0,y.jsx)(c.default,{onClick:P,disabled:!M,type:"primary",children:s.fbt._("Save",null,{hk:"3Plca1"})})})]})})]})}var S=(0,d.forwardRef)(j);t.default=S},84470:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{chat:t,msgs:n}=e;return(0,d.jsx)(i.default,{onOK:()=>{t&&t.pendingAction++,o.ChatCollection.unstarAllMessages(n,t).finally((()=>{t&&t.pendingAction--})),r.ModalManager.close()},okText:s.default.t(632),onCancel:u,children:(0,d.jsx)("div",{children:(0,d.jsx)(l.EmojiText,{text:s.default.t(633)})})})};var r=n(14597),o=n(69951),i=a(n(52665)),l=n(65417),s=a(n(14296)),d=n(85893);const u=()=>{r.ModalManager.close()}},93110:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(61957),o=n(93778),i=n(67294),l=a(n(60453)),s=a(n(69637)),d=n(94790),u=n(65417),c=n(29424),f=a(n(14296)),h=n(57224),p=n(82857),m=a(n(23217)),g=a(n(55771)),v=a(n(11976)),x=n(85893);function _(e){let{contact:t}=e;const n=(0,o.parseVcard)(t.vcard);return n?(0,x.jsx)("div",{className:g.default.vcardWrapper,children:(0,x.jsx)(v.default,{parsedVcard:n,thumbnail:(0,o.vcardThumbnail)(n)})}):null}function C(e,t){const{contactList:n,onSend:a,onBack:i,chat:v}=e;let C;switch(v.kind){case r.CHAT_KIND.CHAT:C=f.default.t(202,{chat:v.title(),count:f.default.n(n.length),_plural:n.length});break;case r.CHAT_KIND.GROUP:C=f.default.t(203,{chat:v.title(),count:f.default.n(n.length),_plural:n.length});break;case r.CHAT_KIND.BROADCAST:C=f.default.t(201,{chat:v.title(),count:f.default.n(n.length),_plural:n.length})}const y=C?(0,x.jsx)(u.EmojiText,{text:C,direction:"auto",titlify:!0,ellipsify:!0}):null;return(0,x.jsx)(h.Modal,{ref:t,type:h.ModalTheme.Box,children:(0,x.jsxs)(l.default,{children:[(0,x.jsx)(d.DrawerHeader,{type:d.DRAWER_HEADER_TYPE.POPUP,onBack:i,children:y}),(0,x.jsx)(s.default,{children:(0,x.jsx)(c.HotKeys,{children:(0,x.jsx)("div",{className:g.default.body,children:n.map(((e,t)=>(0,x.jsx)(_,{contact:(0,o.vcardFromContactModel)(e)},t.toString())))})})}),(0,x.jsx)("div",{className:g.default.btnContainer,children:(0,x.jsx)("div",{className:g.default.btnPosition,children:(0,x.jsx)(p.Round,{large:!0,onClick:a,children:(0,x.jsx)(m.default,{name:"send",directional:!0})})})})]})})}var y=(0,i.forwardRef)(C);t.default=y},45925:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onClose:t}=e,n=(0,y.default)(),a=(0,b.default)(),l=(0,_.useModelValues)(e.contact,["verificationBinary","verificationString","formattedUser","formattedShortName","id"]),s=(0,g.useRef)(null),c=(0,g.useRef)(null),f=(0,g.useRef)(null),[v,x]=(0,g.useState)(!0),[S,w]=(0,g.useState)(!1),[T,H]=(0,g.useState)(!1),[z,q]=(0,g.useState)(!1),[V,X]=(0,g.useState)(!1),[J,$]=(0,g.useState)(null),[ee,te]=(0,g.useState)(null),[ne,ae]=(0,g.useState)(!1),[re,ie]=(0,g.useState)(null),[_e,Ce]=(0,g.useState)(null),[ye,be]=(0,g.useState)(null),je=()=>{(0,K.getIdentityVerificationDataJob)(l.id).then((e=>{a.aborted||(e?(xe(re,e.binary)&&!e.string!==_e||(null!=re&&u.ModalManager.open((0,Z.jsx)(O.E2eChangeModal,{contact:l})),ie(e.binary),Ce(e.string)),ke()):(we(),u.ModalManager.open((0,Z.jsx)(W.default,{name:l.formattedUser,onOK:()=>{t?t():null==n||n.requestDismiss()}}))))}))},[Se]=(0,C.useTimeout)((()=>{X(!1)}),5e3),Ee=e=>{x(!0),w(!1),H(!1),X(!0),$(e),Se()},[ke,we]=(0,C.useTimeout)(je,1e3),[Te]=(0,C.useTimeout)((()=>{w(!1)}),3e3),[Me]=(0,C.useTimeout)((()=>{H(!1)}),3e3),[Pe]=(0,C.useTimeout)((()=>{z&&!V&&Ee(p.fbt._("Please try increasing the brightness or reducing light reflection.",null,{hk:"2uEW7v"}))}),7e3);const Ie=()=>{q(!1),X(!1),te(null),s.current=null},Oe=e=>{const t=(e=>{let t;const n=l.formattedShortName;switch(e){case pe:t=B.default.t(857,{contact:n});break;case me:case ge:t=B.default.t(856,{contact:n});break;case ve:default:t=p.fbt._("The image does not contain a valid identity verification QR code.",null,{hk:"4q3XzO"})}return t})(e);Ee(t)},Le=(e,t)=>{(e=>new Promise(((t,n)=>{m.default.callback=(e,a)=>{if(a)n(a);else if(e.length<1)n(new Error("QR decoder did not return decoded binary"));else{const n=new Uint8Array(e[0]);t(n)}},m.default.decode(e)})))(e).then((e=>(0,h.decodeProtobuf)(A.CombinedFingerprintSpec,e))).then((e=>{const n=(e=>{var t,n,a,r,i,s,d,u,c,f,p,m;if(!e||0===!e.version||!e.localFingerprint||!e.remoteFingerprint)return ve;let g=new ArrayBuffer(0);g=(0,o.isMDBackend)()?re:l.verificationBinary;const v=(0,h.decodeProtobuf)(A.CombinedFingerprintSpec,g);if(xe(null===(t=e.localFingerprint)||void 0===t?void 0:t.identifier,null===(n=v.localFingerprint)||void 0===n?void 0:n.identifier)&&xe(null===(a=e.remoteFingerprint)||void 0===a?void 0:a.identifier,null===(r=v.remoteFingerprint)||void 0===r?void 0:r.identifier))return fe;const x=xe(null===(i=e.remoteFingerprint)||void 0===i?void 0:i.identifier,null===(s=v.localFingerprint)||void 0===s?void 0:s.identifier),_=xe(null===(d=e.localFingerprint)||void 0===d?void 0:d.identifier,null===(u=v.remoteFingerprint)||void 0===u?void 0:u.identifier);if(!x&&!_)return ge;if(!x)return pe;if(!_)return me;const C=xe(null===(c=e.remoteFingerprint)||void 0===c?void 0:c.publicKey,null===(f=v.localFingerprint)||void 0===f?void 0:f.publicKey),y=xe(null===(p=e.localFingerprint)||void 0===p?void 0:p.publicKey,null===(m=v.remoteFingerprint)||void 0===m?void 0:m.publicKey);return C&&y?fe:he})(e);n?t&&ye===ve||(be(n),ye===he?(Ie(),x(!1),w(!1),H(!0),X(!1),Me()):Oe(n)):(Ie(),x(!1),w(!0),H(!1),X(!1),Te())})).catch((()=>{t||(be(ve),Oe(ve))})).finally((()=>{window.URL.revokeObjectURL(e)}))},Ae=e=>{e.stopPropagation();const t=e.target.files||e.dataTransfer.files;if(!t||!t[0])return;const n=t[0],a=URL.createObjectURL(n);Le(a,!1);const r=c.current;r&&r.reset()},De=()=>{const{asyncStream:e,disposeStream:t}=U.start("camera");s.current=t,e.then((e=>(e=>{x(!0),w(!1),H(!1),q(!0),te(e),Pe()})(e))).catch((0,r.filteredCatch)(d.GUM.NotAllowedError,(()=>{u.ModalManager.open((0,Z.jsx)(R.GuidePopup,{messaging:R.Messaging.CAMERA_FAIL,type:R.TYPE.GUIDE_UNBLOCK}))}))).catch((0,r.filteredCatch)(d.GUM.GUMError,(()=>{u.ModalManager.open((0,Z.jsx)(R.GuidePopup,{messaging:R.Messaging.CAMERA_MISSING,type:R.TYPE.GUIDE_NONE}))})))},Re=e=>{Le(e,!0)},Ne=()=>{const e=f.current;null==e||e.click()};(0,g.useEffect)((()=>{(0,o.isLegacyWebdBackend)()&&(0,N.queryIdentity)(l)}),[l]),(0,g.useEffect)((()=>((0,o.isMDBackend)()?je():(0,N.queryIdentity)(l),(0,F.isPrivacyNarrativeV1Enabled)()&&new G.default.PrivacyHighlight({highlightCategory:"e2ee",highlightSurface:G.default.HIGHLIGHT_SURFACE.INFO_SCREEN_CONTACT,userActionType:G.default.USER_ACTION_TYPE.DIALOG_APPEAR}).commit(),()=>{var e;null===(e=s.current)||void 0===e||e.call(s)})),[]);let Be=null,Fe=null,Ue=null,Ge=null,He=null,ze=null,We=new ArrayBuffer(0),qe="";(0,o.isMDBackend)()?(We=re,qe=_e,ze=(0,j.getABPropConfigValue)("adv_v2_m6")?B.default.t(782,{contactName:l.formattedShortName}):B.default.t(781,{contactName:l.formattedShortName})):(We=l.verificationBinary,qe=l.verificationString,ze=p.fbt._("Scan the code on your contact's phone, or ask them to scan your code, to verify your messages and calls to them are end-to-end encrypted. You can also compare the number above to verify. This is optional.",null,{hk:"1Vypk2"}));We&&(D.default&&(Be=(0,Z.jsx)("div",{className:Q.default.section,children:(0,Z.jsx)(E.default,{type:"primary",onClick:z?Ie:De,children:z?p.fbt._("Turn Off Camera",null,{hk:"3OyAHl"}):p.fbt._("Scan Code",null,{hk:"170pLA"})})})),Fe=(0,Z.jsxs)("div",{className:Q.default.section,children:[(0,Z.jsx)(E.default,{type:"primary",onClick:Ne,children:p.fbt._("Upload Code",null,{hk:"2aJIAo"})}),(0,Z.jsx)("p",{className:Q.default.dragAndDropExplanation,children:ne?p.fbt._("Release to verify",null,{hk:"2K08kb"}):null})]}),Ue=(0,Z.jsx)("form",{ref:c,children:(0,Z.jsx)("input",{ref:f,accept:"image/*",type:"file",style:{display:"none"},onChange:Ae,onClick:e=>e.stopPropagation()})}));z&&ee&&(Ge=(0,Z.jsx)(ce,{stream:ee,disposeStream:s.current,onCapture:Re,onClose:Ie}));V&&(He=(0,Z.jsx)(ue,{children:J}));return(0,Z.jsxs)(M.default,{onDrop:e=>{l.verificationBinary&&l.verificationString&&Ae(e)},onDragChange:e=>{ae(e)},children:[(0,Z.jsxs)(I.DrawerHeader,{type:I.DRAWER_HEADER_TYPE.SMALL,rtlFixIfOnDarwin:!0,onBack:()=>{t?t():null==n||n.requestDismiss()},children:[(0,Z.jsx)(Y.TextDiv,{theme:"title",children:p.fbt._("Verify Security Code",null,{hk:"1vTVgt"})}),(0,Z.jsxs)(Y.TextDiv,{theme:"small",children:[B.default.t(859),B.default.t(257),l.formattedUser]})]}),Ge,He,(0,Z.jsx)(P.default,{children:(0,Z.jsxs)("div",{className:Q.default.form,children:[(0,Z.jsxs)("div",{className:Q.default.photo,children:[(0,Z.jsx)(oe,{binary:We,contact:l,visible:v}),(0,Z.jsx)(se,{visible:S}),(0,Z.jsx)(de,{visible:T})]}),(0,Z.jsx)("div",{className:Q.default.section,children:(0,Z.jsx)("div",{className:Q.default.code,dir:"ltr",children:(0,Z.jsx)(le,{string:qe})})}),(0,Z.jsx)("div",{className:Q.default.section,children:(0,Z.jsxs)("p",{className:Q.default.explanation,children:[(0,Z.jsxs)("span",{children:[ze,""]}),(0,Z.jsx)(k.default,{onClick:()=>{(0,F.isPrivacyNarrativeV1Enabled)()&&new G.default.PrivacyHighlight({highlightCategory:"e2ee",highlightSurface:G.default.HIGHLIGHT_SURFACE.INFO_SCREEN_CONTACT,userActionType:G.default.USER_ACTION_TYPE.DIALOG_SELECT}).commit(),(0,L.openExternalLink)((0,i.getE2EFaqUrl)())},children:B.default.t(397)})]})}),Be,Fe,Ue]})})]})};var r=n(50796),o=n(88555),i=n(21310),l=n(11586),s=n(41906),d=$(n(35232)),u=n(14597),c=n(78820),f=a(n(94184)),h=n(84902),p=n(48360),m=a(n(31339)),g=n(67294),v=a(n(70393)),x=n(87550),_=n(35461),C=n(46428),y=a(n(95402)),b=a(n(3409)),j=n(57849),S=n(50514),E=a(n(39770)),k=a(n(99360)),w=n(19380),T=a(n(16194)),M=a(n(60453)),P=a(n(69637)),I=n(94790),O=n(21976),L=n(12591),A=n(80498),D=a(n(56624)),R=n(18671),N=n(84765),B=a(n(14296)),F=n(41566),U=$(n(61849)),G=a(n(11339)),H=a(n(37360)),z=n(52596),W=a(n(726)),q=n(11054),V=a(n(23217)),Y=n(13923),K=n(15161),Q=a(n(42037)),X=a(n(23425)),Z=n(85893);function J(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(J=function(e){return e?n:t})(e)}function $(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=J(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}const ee=(e,t)=>!!e&&!!t&&xe(e.publicKey,t.publicKey)&&xe(e.identifier,t.identifier),te=(e,t)=>{if(!e&&!t)return!0;const n=(0,h.decodeProtobuf)(A.CombinedFingerprintSpec,e),a=(0,h.decodeProtobuf)(A.CombinedFingerprintSpec,t);if(!n&&!a)return!0;if(!(null!=n.version||null!=a.version||n.localFingerprint||a.localFingerprint||n.remoteFingerprint||a.remoteFingerprint))return!0;if(n.version!==a.version)return!1;const r=ee(n.localFingerprint,a.localFingerprint),o=ee(n.remoteFingerprint,a.remoteFingerprint);return r&&o};function ne(e){const{binary:t=null,visible:n}=e,a=(0,g.useRef)(null),r=(0,g.useRef)(null),[o,i]=(0,g.useState)(!1),[d,u]=(0,g.useState)(null),[f,h]=(0,g.useState)(null),m=()=>{o||i(!0)},v=()=>{o||i(!0)},x=()=>{o&&i(!1)};(0,g.useEffect)((()=>{if(t){const e=a.current;if(!e||!t)return u(null),void h(null);if(te(d,t))return;for(r.current&&(r.current=null);e.firstChild;)e.removeChild(e.firstChild);r.current=new H.default(e,{text:t,width:s.QR_EDGE/2,height:s.QR_EDGE/2,correctLevel:H.default.CorrectLevel.L}),u(t);const n=e.getElementsByTagName("canvas")[0];if(!n)return void h(null);(e=>{const t=document.createElement("canvas");t.width=e.width+10,t.height=e.height+10;const n=t.getContext("2d");n.fillStyle="white",n.fillRect(0,0,t.width,t.height),n.drawImage(e,5,5),t.toBlob((e=>h(e)),"image/png")})(n)}}),[t,d]);let _=null;if(n){let t=null;if(o&&f){const n=e.contact.formattedUser||"",a=w.ContactCollection.assertGet((0,c.getMaybeMeUser)()).formattedUser;t=(0,Z.jsx)(T.default,{file:f,download:"Verification Code between "+a+" and "+n,extension:l.AllowedFileExtensions.PNG,children:(0,Z.jsx)(S.AvatarOverlay,{text:p.fbt._("Download code",null,{hk:"uiMxK"})})})}_=(0,Z.jsxs)("div",{onMouseOver:m,onMouseEnter:v,onMouseLeave:x,children:[t,(0,Z.jsx)("div",{className:Q.default.circle,ref:a})]})}return _}const ae=(0,g.memo)(ne,((e,t)=>te(t.binary,e.binary)&&t.visible===e.visible));function re(e){let{visible:t}=e,n=null;return t&&(n=(0,Z.jsx)("div",{className:Q.default.circle,children:(0,Z.jsx)("div",{className:Q.default.spinner,children:(0,Z.jsx)(q.Spinner,{size:52,stroke:4})})})),n}function oe(e){let{binary:t,contact:n,visible:a}=e,r=null;return a&&(r=(0,Z.jsxs)("div",{className:(0,f.default)(Q.default.container,Q.default.circleContainer),children:[(0,Z.jsx)(ae,{visible:!!t,binary:t,contact:n}),(0,Z.jsx)(re,{visible:!t})]})),r}function ie(e){if(!e.string)return(0,Z.jsx)("div",{children:B.default.t(422)});const t=e.string;if(60!==t.length)return __LOG__(3)`verificationString:render props.string should be ${60} characters long instead of ${t.length}.`,(0,Z.jsx)("div",{children:p.fbt._("Couldn't display security code. You can verify using the QR code instead.",null,{hk:"3yMFFL"})});const n=[];for(let e=0;e<3;e++){const a=[];for(let n=0;n<4;n++){const r=[];for(let a=0;a<5;a++){const o=t.charAt(5*e*4+5*n+a);r.push((0,Z.jsx)("span",{className:Q.default.digit,children:o},a))}a.push((0,Z.jsx)("span",{className:Q.default.block,children:r},n))}n.push((0,Z.jsx)(z.SelectableDiv,{className:Q.default.row,selectable:!0,children:a},e))}return(0,Z.jsx)(z.SelectableDiv,{selectable:!0,children:n})}const le=(0,g.memo)(ie,((e,t)=>t.string===e.string));function se(e){let{visible:t}=e,n=null;return t&&(n=(0,Z.jsx)("div",{className:(0,f.default)(Q.default.container,Q.default.checkmarkContainer),children:(0,Z.jsx)("div",{className:Q.default.checkmark,children:" "})})),n}function de(e){let{visible:t}=e,n=null;return t&&(n=(0,Z.jsx)("div",{className:(0,f.default)(Q.default.container,Q.default.errorContainer),children:(0,Z.jsx)("div",{className:Q.default.error,children:"!"})})),n}function ue(e){let{children:t}=e;return(0,Z.jsx)("div",{className:Q.default.errorBanner,children:t})}function ce(e){const{stream:t,onCapture:n,disposeStream:a}=e,r=(0,g.useRef)(null),o=(0,g.useRef)(!1),i=(0,g.useRef)(null),l=(0,g.useRef)(null),[s]=(0,v.default)((()=>{var e;const t=null===(e=i.current)||void 0===e?void 0:e.underlyingVideo();if(!t)return;const a=document.createElement("canvas");a.width=t.videoWidth/2,a.height=t.videoHeight/2;a.getContext("2d").drawImage(t,a.width/2,a.height/2,a.width,a.height,0,0,a.width,a.height),a.toBlob((e=>{const t=window.URL.createObjectURL(e);__LOG__(2)`objectURL: ${t}`,n(t)}),"image/jpeg",1)}),200);(0,g.useEffect)((()=>((0,U.isSrcObjectInVideoElement)()||(r.current=window.URL.createObjectURL(t)),()=>{t&&(null==a||a(),r.current&&window.URL.revokeObjectURL(r.current))})),[]);const d=()=>{var e;const t=null===(e=i.current)||void 0===e?void 0:e.underlyingVideo(),n=l.current;if(!t||!n)return;const a=t.offsetHeight,r=t.offsetWidth,o=r/3,s=o;n.style.width=o+"px",n.style.height=s+"px",n.style.margin=(a-s)/2+"px "+(r-o)/2+"px"},u=()=>{!0!==o.current&&(d(),s())};(0,x.useListener)(window,"resize",d);let c=null;var f;e.stream&&(c=(0,Z.jsxs)("div",{className:Q.default.webcam,children:[(0,Z.jsx)("div",{className:Q.default.webcamVideo,children:(0,Z.jsx)(X.default,{autoPlay:!0,ref:i,onPlay:u,src:null!==(f=r.current)&&void 0!==f?f:void 0,srcObject:r.current?void 0:e.stream,width:"100%"})}),(0,Z.jsx)("div",{className:Q.default.overlay,ref:l}),(0,Z.jsx)("button",{onClick:e.onClose,className:Q.default.btnClose,children:(0,Z.jsx)(V.default,{name:"x-alt"})})]}));return c}const fe=0,he=1,pe=2,me=3,ge=4,ve=5;function xe(e,t){if(!e||!t)return!1;const n=new Uint8Array(e),a=new Uint8Array(t),r=n.length;if(r!==a.length)return!1;for(let e=0;e<r;e++)if(n[e]!==a[e])return!1;return!0}},14551:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(99964)),o=n(94816),i=a(n(94184)),l=n(48360),s=n(67294),d=n(35461),u=a(n(66034)),c=n(16593),f=a(n(60453)),h=a(n(69637)),p=n(94790),m=a(n(14296)),g=n(64551),v=n(13923),x=n(97628),_=n(50452),C=n(78123),y=a(n(98129)),b=n(85893);function j(e){const{colorHex:t,isDefault:n}=e,[a,l]=(0,s.useState)(!1),d=()=>n?C.DEFAULT_CHAT_WALLPAPER:t,c=e.isDefault?(0,b.jsx)("span",{className:y.default.wallpaperDefaultTitle,"data-a8n":r.default.key("wallpaper-default-title"),children:m.default.t(224)}):null,f=(0,i.default)(y.default.wallpaperColorCanvas,{[y.default.canvasHover]:a,[y.default.canvasActive]:e.isSelected,[y.default.canvasDefault]:e.isDefault});return(0,b.jsx)("span",{className:f,style:{backgroundColor:e.colorHex},onMouseOver:()=>{a||(l(!0),u.default.trigger("wallpaper_color_preview",d()))},onMouseEnter:()=>{a||(l(!0),u.default.trigger("wallpaper_color_preview",d()))},onMouseLeave:()=>{a&&(l(!1),u.default.trigger("wallpaper_color_preview"))},onClick:()=>{const e=d(),t=u.default.get("defaultPreference");t&&e!==t.wallpaperColor&&(t.set("wallpaperColor",e),o.ToastManager.open((0,b.jsx)(_.Toast,{msg:m.default.t(687),id:(0,_.genId)()})))},title:e.isDefault?m.default.t(224):null,children:c})}function S(e){let t;const{colors:n}=e,a=(0,d.useOptionalModelValues)(e.chatPreference,["wallpaperColor","showDoodle"]),r=null==a?void 0:a.wallpaperColor,i=()=>{if(a){const e=!a.showDoodle;a.set("showDoodle",e),o.ToastManager.open((0,b.jsx)(_.Toast,{msg:e?l.fbt._("Chat wallpaper doodles added",null,{hk:"4wtFSD"}):l.fbt._("Chat wallpaper doodles removed",null,{hk:"3cppZY"}),id:(0,_.genId)()}))}},s=null==a?void 0:a.showDoodle,u=n.map((e=>(0,b.jsx)(j,{colorHex:e,isSelected:r===e,isDefault:!1},e))),f=(0,b.jsx)(j,{isSelected:r===C.DEFAULT_CHAT_WALLPAPER,isDefault:!0},C.DEFAULT_CHAT_WALLPAPER);u.unshift(f);for(let e=0;e<2;e++)u.push((0,b.jsx)("div",{className:y.default.wallpaperColorEmpty},"emptyEl"+e));return g.ServerProps.wallpapersV2&&(t=(0,b.jsxs)("div",{className:y.default.wallpaperApplyDoodle,children:[(0,b.jsx)(c.CheckBox,{onChange:i,checked:!!s}),(0,b.jsx)(v.TextSpan,{className:y.default.checkboxLabel,theme:"small",children:l.fbt._("Add WhatsApp Doodles",null,{hk:"4rcSeh"})})]})),(0,b.jsxs)(b.Fragment,{children:[t,(0,b.jsx)("div",{className:y.default.wallpaperColorGrid,children:u})]})}function E(e,t){const n=(0,s.useContext)(x.ThemeContext);return(0,s.useEffect)((()=>(g.ServerProps.wallpapersV2&&u.default.trigger("wallpaper_drawer_open"),()=>{u.default.trigger("wallpaper_color_preview"),g.ServerProps.wallpapersV2&&u.default.trigger("wallpaper_drawer_close")})),[]),(0,b.jsxs)(f.default,{ref:t,children:[(0,b.jsx)(p.DrawerHeader,{title:m.default.t(688),onBack:e.onClose,type:p.DRAWER_HEADER_TYPE.LARGE}),(0,b.jsx)(h.default,{children:(0,b.jsx)(S,{colors:(0,C.getWallpaperColors)(n.theme),chatPreference:u.default.get("defaultPreference")})})]})}var k=(0,s.forwardRef)(E);t.default=k},74410:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,i.useModelValues)(e.statusV3,["id","t","hasUnread","unreadCount","totalCount","contact"]),n=(0,i.useModelValues)(e.contact,["formattedName","statusMute","isPSA"]),a=(0,o.default)({[s.default.dimmed]:n.statusMute}),f=n.isPSA?null:r.Clock.relativeDateAndTimeStr(t.t),h=n.isPSA?(0,c.jsxs)("span",{className:s.default.verified,children:[n.formattedName,(0,c.jsx)("div",{className:s.default.icon,children:(0,c.jsx)(u.default,{name:"psa-verified"})})]}):n.formattedName;return(0,c.jsx)(l.default,{className:a,customImage:!0,theme:"status-list",image:(0,c.jsx)(d.default,{statusV3:t,contact:n,onClick:e.onClick}),primary:h,secondary:f,onClick:e.onClick,contextEnabled:()=>!1},t.id.toString())};var r=n(40234),o=a(n(94184)),i=n(35461),l=a(n(49107)),s=a(n(49787)),d=a(n(15265)),u=a(n(23217)),c=n(85893)},15265:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{theme:t,thumbnailPlaceholder:n,msg:a}=e,o=(0,s.useModelValues)(e.statusV3,["lastStatus"]),i=(0,s.useModelValues)(e.contact,["statusMute"]),u=null!=a?a:o.lastStatus,f=m(t);let g;g=null!=n?n:u?(0,p.jsx)(d.DetailImage,{id:u.sender,theme:"status_v3",size:40}):null;const x=!(0,r.isStatusV3ProfilePhotoRingEnabled)();return(0,p.jsxs)("div",{className:(0,l.default)(h.default.container,f),role:e.role||"",onContextMenu:null,onClickCapture:t=>{var n;null===(n=e.onClick)||void 0===n||n.call(e),t.stopPropagation(),t.preventDefault()},children:[i.statusMute||"status-panel"===t?null:(0,p.jsx)(c.StatusV3ImageRing,{statusV3:o,breakRing:x}),(0,p.jsx)(v,{msg:u,theme:t,thumbnailPlaceholder:g})]})};var r=n(8139),o=n(15461),i=a(n(89867)),l=a(n(94184)),s=n(35461),d=n(88984),u=a(n(4293)),c=(n(18146),n(24391)),f=n(47786),h=a(n(39756)),p=n(85893);function m(e){return"status-panel"===e?h.default.thumbSizeLarge:h.default.thumbSizeSmall}function g(e){const{msg:t,theme:n}=e;return(0,p.jsx)("div",{className:(0,l.default)(h.default.statusImage,m(n)),style:{backgroundColor:t.statusV3TextBg},children:(0,p.jsx)("div",{className:(0,l.default)(h.default.textThumb,m(n)),children:(0,p.jsx)(f.StatusV3Text,{msg:t,theme:null!=n?n:"status-thumbnail"})})})}function v(e){const{msg:t,theme:n,thumbnailPlaceholder:a}=e,r=m(n),s=h.default.statusImage;return t?i.default.isPSA(t.sender)?(0,p.jsx)("div",{className:(0,l.default)(h.default.thumbContainer,r,h.default.statusImageFallbackBackground),children:a}):t.type===o.MSG_TYPE.CHAT?(0,p.jsx)(g,{msg:t,theme:n}):(0,p.jsx)(u.default,{containerClassName:(0,l.default)(h.default.thumbContainer,r,h.default.statusImageFallbackBackground),childClassName:(0,l.default)(s,r),msg:t,thumbnailPlaceholder:a}):(0,p.jsx)("div",{className:(0,l.default)(s,r,h.default.statusImageFallbackBackground)})}},9425:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.StickerIcon=function(e){let{url:t,xstyle:n}=e;const[a,{isIntersecting:c}]=(0,i.default)({root:null,rootMargin:"0px",threshold:0}),f=(0,r.useRef)(c);return f.current=f.current||c,(0,s.jsx)("div",{ref:a,className:(0,o.default)(d,n),children:f.current&&(0,s.jsx)(l.ImgWithFallback,{fallbackSVG:"sticker",wrapOptions:{centerWrapperChild:!0,wrapperClassName:""},className:(0,o.default)(u),size:"NONE",roundContainer:!1,imgProps:{src:t,draggable:!1},theme:l.Theme.Transparent})})};var r=n(67294),o=a(n(56720)),i=a(n(44692)),l=n(50981),s=n(85893);const d={boxSizing:"cm280p3y",height:"graaj7av",width:"jgly3g7g",minHeight:"lignnmtc",minWidth:"j3e9rhaw",position:"g0rxnol2"},u={width:"ln8gz9je",height:"ppled2lx"}},63822:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{stickerPacks:t,onStickerPackDetails:n}=e,a=(0,o.default)((()=>new s.default)),h=(0,r.useMemo)((()=>t.map((e=>({itemKey:e.id,stickerPack:e})))),[t]);return(0,f.jsx)(l.default,{flatListControllers:[a.current],children:(0,f.jsx)(i.FlatList,{flatListController:a.current,direction:"vertical",forceConsistentRenderCount:!1,data:h,renderItem:e=>(0,f.jsx)(c.default,{data:e,onClick:n}),defaultItemHeight:u.STICKER_LIST_ITEM_HEIGHT,keyOrder:d.KeyOrder.INVERSE})})};var r=n(67294),o=a(n(16223)),i=n(47915),l=a(n(44942)),s=a(n(30855)),d=n(43882),u=n(90669),c=a(n(73966)),f=n(85893)},73966:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{stickerPack:t}=e.data,n=(0,c.jsxs)("div",{className:(0,o.default)(f.title),children:[(0,c.jsx)(s.EmojiText,{text:t.name,ellipsify:!0,titlify:!0}),t.animated?(0,c.jsx)(u.default,{name:"round-play",className:(0,o.default)(f.animatedIcon),width:16,height:16}):null]}),a=[],h=Math.min(6,t.previewImageIds.length);for(let e=0;e<h;e++){const n=t.previewImageIds[e];a.push((0,c.jsxs)(r.Fragment,{children:[(0,c.jsx)(i.default,{breakpoint:94*(e+1)-22,inverseToContainer:!0,maxWidth:"100%",minWidth:0}),(0,c.jsx)(d.StickerIcon,{url:`https://static.whatsapp.net/sticker?cat=sticker_preview_png&id=${n}`,xstyle:f.stickerIcon})]},n))}const p=(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(s.EmojiText,{text:t.publisher,ellipsify:!0}),(0,c.jsx)("div",{className:(0,o.default)(f.stickerIconsContainer),children:a})]});return(0,c.jsx)(l.default,{a8n:"sticker-pack-list-item",theme:"sticker-pack",primary:n,secondary:p,onClick:()=>{e.onClick(t)},className:(0,o.default)(f.stickerPack),contextEnabled:()=>!1},t.id)};var r=n(67294),o=a(n(56720)),i=a(n(8334)),l=a(n(49107)),s=n(65417),d=n(9425),u=a(n(23217)),c=n(85893);const f={stickerPack:{paddingStart:"lyvj5e2u",color:"h15s16sg"},title:{display:"p357zi0d",alignItems:"gndfcl4n"},animatedIcon:{marginStart:"oz0g9ue8",color:"kw851w1p"},stickerIconsContainer:{display:"p357zi0d",flexDirection:"sap93d0t",flexWrap:"dnb887gk",marginTop:"dj1c3cmq"},stickerIcon:{marginEnd:"gwq3iy2m"}}},11586:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AllowedFileExtensions=void 0;const a=n(76672)({PNG:".png",TXT:".txt",ZIP:".zip"});t.AllowedFileExtensions=a},12348:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isKeyFiniteAndAllowed=t.PIN_LENGTH=void 0;t.PIN_LENGTH=6;const n=["Backspace","Tab"];t.isKeyFiniteAndAllowed=function(e){return!Number.isFinite(parseInt(e.key,10))&&!n.includes(e.key)}},61126:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAgentName=function(e){var t;const n=null!=e?r.AgentCollection.get(e):null;return null!==(t=null==n?void 0:n.name)&&void 0!==t?t:a.fbt._("{business-name} (Admin)",[a.fbt._param("business-name",o.Conn.pushname)],{hk:"3KT4id"})};var a=n(48360),r=n(72894),o=n(17239)},18878:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getCachedOrdersInfoFromChat=function(e){return{fetcher:Promise.resolve(h(e)),unsubscribe:()=>{}}},t.getMergedContactAndOrderInfoMap=function(e,t){return(0,r.default)((0,r.default)({},e),t.reduce(((e,t)=>(e[t.orderInfo.referenceId]=t,e)),{}))},t.getMergedOrderStatusInfoMap=f,t.getNotCachedOrdersInfoFromChat=function(e){let t,n;const a=()=>{n(),clearInterval(t)};return{fetcher:new Promise((r=>{t=setInterval((()=>{(0,o.loadEarlierMsgs)(e,e.msgs)}),200),n=e.msgs.onMsgLoadStateChange((()=>{e.msgs.msgLoadState.noEarlierMsgs&&(r(h(e)),a())}))})),unsubscribe:a}},t.getOrderDisplayDate=void 0,t.getOrdersInfoFromMsgs=p,t.removeContactAndOrdersInfoFromMap=function(e,t){const n=(0,r.default)({},e);return t.forEach((e=>{delete n[e.orderInfo.referenceId]})),n},t.removeOrderStatusInfoFromMap=function(e,t,n){const{ordersStatusInfo:a}=e,{ordersStatusInfo:[{refId:r}]}=t,{orderStatusInfoMap:o}=n;return delete o[r],f(o,a)};var r=a(n(81109)),o=n(22911),i=n(40234),l=n(15461),s=n(78820),d=(n(17304),a(n(5165))),u=n(34841),c=n(88998);function f(e,t){return(0,r.default)((0,r.default)({},e),t.reduce(((e,t)=>(e[t.refId]=t,e)),{}))}function h(e){const{contact:t,msgs:n}=e;return p(n.toArray(),t)}function p(e,t){return e.reduce(((e,n)=>{var a;const[{name:r,buttonParamsJson:o}]=(null===(a=n.interactivePayload)||void 0===a?void 0:a.buttons)||[{}];return n.from.equals((0,s.getMeUser)())&&(n.nativeFlowName===d.default.ORDER_DETAILS?function(e,t,n,a,r){const o=t.t,i=(0,u.paramsJsonToOrderInfo)(a,r);i&&e.contactsAndOrdersInfo.push({contact:n,orderInfo:i,timestamp:o,interactiveMsg:m(t)})}(e,n,t,r,o):n.nativeFlowName===d.default.ORDER_STATUS&&function(e,t,n){const a=(0,c.paramsJsonToOrderStatusInfo)(t,n);a&&e.ordersStatusInfo.push(a)}(e,r,o)),e}),{contactsAndOrdersInfo:[],ordersStatusInfo:[]})}function m(e){const t=e.safe();return t.type===l.MSG_TYPE.INTERACTIVE?t:null}t.getOrderDisplayDate=(e,t,n)=>{const a=i.Clock.relativeDateStr(e[t[n]].timestamp).toString();return a===(n>0?i.Clock.relativeDateStr(e[t[n-1]].timestamp).toString():"")?"":a}},9349:(e,t,n)=>{e.exports=n.p+"img/animated-doodle_600127bdb5f7627ede5cd4ef320f55b0.png"},10093:(e,t,n)=>{e.exports=n.p+"img/sticker-pack-empty_9f0c66fc3aec33b2f78f0ae1721e053b.png"},56246:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={editMain:"_3xeOe",dayMain:"elIXU",timeWrapper:"_3u7Nx",hoursAnd:"VtTvE",hoursMain:"_1t1ZU",dayCheckbox:"_1_yf5",dayInfo:"_2ycHc",dayInfoText:"_2RSsg"}},4830:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={editMain:"_1GBQ2",list:"_2ORz2",rowMain:"_1DFmp",rowCheckbox:"_2pPkR",rowLabel:"_1NGCs",disabled:"YVobU",loadingSpinner:"_2-B6b",searchBackground:"_1Fb5R"}},73308:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={verifiedNameIcon:"_3PMWi",noPaddingTop:"_23GE5"}},10476:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={price:"_2TWGj",actions:"_3qMz1",deleteIcon:"X73p1",cartListItem:"_22OLH"}},48608:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={descriptionText:"_3cn-t",loadingSpinner:"_39T3a"}},24514:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={nameContainer:"_2ZSfJ",nameIcon:"_2c2YS",nameEdit:"_3z09E",listContainer:"_3qa_s",footer:"_mlI_",saveButton:"_1Ah-d",operation:"hCFEO",spinner:"_2GKPh",isSending:"_29OTP",container:"_20LKm",loadingSpinner:"_1oYzh"}},18829:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={productWrapper:"rJvJe",drawerHeader:"_1FOnF",drawerHeaderButtonContainer:"_31Lzw",deleteButtonContainer:"_3ACRw",isSending:"PH_zP",spinner:"_2uvSh",hiddenLabel:"_1iq2E",hiddenDescr:"_2CpMK",hiddenContainer:"_3CZ_C"}},3840:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={addItemPlaceholder:"_1qJg-",placeholderIcon:"_36m_1",placeholderContainer:"_1G1TN",divider:"Ba9cd",isLoading:"_1GbNE",spinner:"_2K6GK"}},39658:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={panel:"_1TOgh",tileContainer:"_1vfS7",imageTile:"_2a_Q7",imageThumb:"Cbc-m",deleteIcon:"_2WYev",btnAddContainer:"_1ar7j",btnAddText:"RAMrK",errorMessage:"_3E49Y"}},31516:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={list:"_2V4Ys",noSections:"_82KlQ"}},47514:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={disabled:"_1W_mm",title:"_2jAho"}},4389:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={title:"_3Q5hz"}},70180:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={title:"_13MJe",text:"hM3sj",icon:"_1p9YY"}},87240:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={container:"_2RE0a",border:"_3t6bN",square:"_36Gk7",avatar:"_1b8fw",count:"_1gLP4",two:"_1EzI5",first:"JOgRb",second:"_3Q0g1",three:"_33l2L",third:"_1MivT",four:"_18BoY",fourth:"_1P7KC"}},34531:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={imageGallery:"_3uMAp",imageGalleryList:"_1WX5F",imageGalleryItem:"MkTEt",imageGalleryItemSpacer:"_2ppZW",imageGalleryItemImage:"_6CxGV",imageGalleryItemOverlay:"_7mUkD",selected:"_1KnO5",imageGalleryFooter:"PYlBE",focusAnimation:"_30mp5",focusAnimationKeyframes:"_3i50e"}},85747:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={container:"_1w1m1",disabled:"_3Sg2g",count:"ItnCt",large:"_3OTTU"}},52144:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={positioner:"_388vZ",container:"ewANj",resizableInput:"_1L8rJ",emojiButton:"_3tKNQ",buttonIconWrapper:"_1F5dF",inputContainer:"_3DCJ3",hiddenText:"_269u7",hiddenTextLine:"_3F7_-",emojiPlaceholder:"_39TQD"}},50907:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={container:"_2nStn",inputContainer:"_1VmmK",videoCaption:"_2M4pc",buttonContainer:"_26J91",clearBtn:"_3EUIt",inputEmoji:"I1HlI",charCounter:"_3HWI2",suggestionsPositioner:"_3-qS1",suggestionsContainer:"_1Uy4i",secondaryButtonContainer:"_3g507"}},30635:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={thumb:"_2AkjL",active:"_31gut",bodyWrapper:"_1iECW",body:"_1hZLd",bodyIcon:"_299B_",btnDelete:"_1By33"}},90388:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={container:"_34aQy",header:"qAj2u",headerRight:"_3PqRX",canvasContainer:"_1PFn9",cropRotateContainer:"_3zRbB",closeButton:"_1gvdP",closeButtonPlaceholder:"_1Ao72",canvas:"_153i9",footer:"_1nPzf",bottomToolbar:"_1nNuD",captionInputContainer:"_1iQr1",captionInputHidden:"_6dYhh"}},79334:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={container:"_1Mcu-",previewOnly:"_2NB7f",dropOverlay:"_1PdGl",dropOverlayOutline:"_2HexZ",spinner:"pzFG8",footer:"_1HI4Y",addMediaButton:"_1xotB",addMediaButtonDisabled:"WAMhx",filmstripContainer:"_1vAZI",thumbs:"_7Tfhi",sendButton:"_33pCO",captureFooter:"_1z1Aw"}},10706:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={container:"_3gx1m",cropperContainer:"_2mSFk"}},45134:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={body:"_25wph",previewContainer:"OW_mU",previewIcon:"_4FGL4",header:"_1Xi6x",metadata:"_3QpE7"}},58099:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={container:"jcXC6"}},91976:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={container:"_2SXhH",footer:"UJ-0N"}},86382:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={container:"_2wtUo",selected:"_3z23o",disabled:"wZyqj",icon:"ZZ0GN",rotate:"_2X1cd",body:"_2O4Bw",caret:"_104hn"}},76994:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={container:"_3eK79",colorChipsContainer:"_1E-L7"}},88501:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={colorButton:"_2J8i-",primaryColorChip:"fteqj",primaryColorChipMedium:"_1Rjww",secondaryColorChip:"_1H9V5",active:"_3Jsf_",hover:"_1jiBu",selected:"_1lanH",colorChipWithBorder:"_2WYx6"}},52418:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={container:"_1LRKO",rotateLeftButton:"_3dKFO"}},43384:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={container:"QUfeO",fontLabel:"_3OMGG",icon:"_3SJCV"}},16702:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={item:"_1j1xr",selected:"_2DKLD",sansSerif:"_106wS",serif:"_1yqqW",noricanRegular:"bzq8z",bryndanWrite:"_3Pj9c",oswaldHeavy:"ah3iR",alignmentContainer:"_2lKFu",alignmentIcon:"mi3vs",alignmentIconSelected:"_1KlZW"}},89046:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={cirle:"_10ZsU",circleFilled:"_1ZATr",unchecked:"_1B4g5",checked:"_3s-4-"}},60349:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={container:"_1_bv-",thicknessButton:"_3bAiP",thicknessChip:"_3iRrK",selected:"_32C9L"}},77046:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={container:"JKr_m",media:"_3R3yC"}},71003:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={container:"_3fFxj",media:"_3lqv9",document:"hH6sl",text:"eAWMI",icon:"fDWKK"}},58523:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={container:"_1ULgK",media:"_2gN82",img:"OunMM",audio:"_3ZDt1",videoContainer:"_33jN5",spinner:"_1-L7X",video:"_2Vd8_",staticPreview:"sWhPU"}},53519:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={container:"_2nVq-",preview:"_1K_xd",caption:"_3xLDc",img:"_2zsdh",imgBorder:"_2Cuay"}},10160:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={inputContainer:"_hcHx",label:"_2Nd6M",input:"_3qFYS"}},56126:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={container:"_3XAt1",wallpaperColorCanvas:"_2IV17",wallpaperColorEmpty:"ZxOfr",canvasActive:"_3ts_T",canvasHover:"_1zeZ4"}},32976:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={addLabelBtContainer:"_2RW7t"}},20705:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={actionBtns:"_1NODy",newLabelBtn:"_3_CYW",plus:"_3vPCO"}},26616:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={container:"_3zKdl",body:"Sy3TC",captionInput:"_32AUO",footer:"_11gZr",retakeBtn:"rKFEM",retakeIcon:"_2rZzC",caption:"_1sxcB",videoContainer:"_2xIhM",video:"_2jZjN",btn:"_2kkeT",videoInactive:"_2eCp4",btnSend:"_1103Z",image:"_288ya",snapshot:"_3sE1m"}},33621:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={newChatButton:"jeo8v",defaultGroupIcon:"bSJ6w"}},40261:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={icon:"_2WtuC",body:"_3TCJd",spinner:"_1PKms",ack:"YYcY9",statusBlue:"_13UwK"}},63881:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={btnSend:"_1WEiG",attributionLink:"_4yicW",mediaBody:"_1YZ48",attribution:"_1nd00",footer:"iajo1",containerBackground:"_3rPvK",retake:"_3r-Fa",retakeIcon:"_3SS26",mediaElementBase:"_3ULIF",mediaElement:"_38bBM _3ULIF",hintText:"_1TwXp"}},214:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={mediaViewerImg:"_2rSfC",cropOverlay:"pKKiG"}},50922:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={scaler:"_3QxRj",scalerButton:"P6r3N"}},83123:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={wrapper:"fvxZ_",icon:"_3kxe5",text:"sfUBV"}},73333:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={linkContainer:"LajIA",descContainer:"rkoI-",icon:"_2-h3w"}},3254:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={confirmationText:"_2C3iK"}},49818:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={title:"_2MKwk",titleIcon:"_1LGlv",ack:"_1Atx0",statusBlue:"Gik4G",forwardCount:"_3417c",spinner:"_1n0XS",list:"_2U3s4",footer:"_2Pd5I"}},95418:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={commentInput:"_2aObt",search:"_5ZD79",groupInfo:"_1JXjM",onSendInvite:"eEIm8"}},83127:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={spinner:"_3Xk1M",search:"YnLeD",inputarea:"_2PZbe",inputLine:"h9ICN",contacts:"_1u38f",drawerSection:"_2Eef4",inputareaSizer:"_3-hK-"}},77798:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={animation:"o43XS","play-ltr":"_1-zyO",playLtr:"_1-zyO","play-rtl":"_27Hce",playRtl:"_27Hce",versionInfo:"_1hWGI"}},23918:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={container:"_2BtE_",textContainer:"_2Tvyf",spinner:"HYKvS"}},50521:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={container:"_2136P",list:"C1Dd9",header:"K1c_P",item:"_16f8P",right:"DMk3i",left:"_1mO8w",close:"_38Gu8",name:"_2z4ea",time:"_4VLPt"}},94692:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={wrapper:"_9Gs_R",offline:"_3rEcJ",circle:"_2Xn1u",text:"_1nFpn",notification:"p9CjV",ended:"_2OrJW",lastUpdated:"_3VPfk"}},26658:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={wrapper:"_26J0I",inactive:"_2ZG5x",offline:"Pc7bU",circle:"_1487t",text:"_2WNWn",backToCenter:"_3LWZ9",visible:"_2Ozk7"}},89332:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={container:"_2BPRJ",map:"_312iE",authFailed:"xgGDH",loading:"L5P7F"}},92018:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={container:"_3rs7K",selected:"_10G_J",glow:"h5TUN",stale:"_3WyhQ",expired:"_1HO_K",pin:"_2JeQm"}},6304:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={list:"D0Q5P",stopSharingButton:"_8wYL"}},22828:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={popup:"_1O7kH",container:"_1qWAL",twoLines:"_2dn9y",name:"_2UN5N",status:"_1fM0V",menuButton:"_2UenO",triangle:"_1NoUg"}},35456:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={photoPickerWrapper:"_1Mc0y",scale:"_55HVY",nameWrapper:"_2LTDQ","well-animation":"_1EgwP",wellAnimation:"_1EgwP",phoneIcon:"_9P72S",phoneField:"_1zywm",infoText:"_3FDYs",bannedShopInfoText:"_1EFZ5",content:"_3XR9y"}},83968:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={text:"_2QEzO",checkbox:"_3xbR9",header:"_1_8IZ"}},50717:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={container:"_1J075",section:"_2BZQN",sectionControlRightAligned:"_2dxvk",control:"_1iSYt",controlRightAligned:"_2NZKl",label:"_3AXj8",disabled:"_1Aj3d"}},55771:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={body:"nWPOn",vcardWrapper:"j80SY",btnContainer:"_386ov",btnPosition:"_3o41r"}},42037:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={form:"_1_psp",section:"S4s9L","well-animation2":"_3PdLd",wellAnimation2:"_3PdLd",circle:"_1C64q",spinner:"_3Ea-7",container:"xvgoq",show:"_2FUyH",circleContainer:"_28mPV",checkmarkContainer:"_1TMgk",errorContainer:"_1ScAm",checkmark:"qlZ5I",error:"_3Fr6b",errorBanner:"_3PYWJ",code:"xYqL-",row:"hsOn4",block:"_3WPv2",digit:"_3Muc-",explanation:"_37tSc",dragAndDropExplanation:"Lbmtf",photo:"_1Ua6g","drawer-scale":"_2OqK6",drawerScale:"_2OqK6",webcam:"_17NcY",webcamVideo:"PKLd7",btnClose:"_35Nbq",overlay:"_3APck"}},98129:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={wallpaperApplyDoodle:"_1aWJq",checkboxLabel:"XvSmy",wallpaperColorGrid:"KzJy3",wallpaperColorCanvas:"Iwkc0",wallpaperDefaultTitle:"_2jzUd",wallpaperColorEmpty:"_1qqLM",canvasHover:"_3Mp8z",canvasActive:"_2MCR7",canvasDefault:"GRVkn"}},49787:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={dimmed:"khEuM",verified:"_3e7DF",icon:"_3OVY5"}},39756:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={textThumb:"qgEhU",thumbSizeSmall:"_14N8a",thumbSizeLarge:"_2dKet",statusImage:"_37ckN",statusImageFallbackBackground:"_14MS9",container:"_3xFA4",thumbContainer:"_1cDhn"}}}]);
//# sourceMappingURL=https://web.whatsapp.com/lazy_loaded_low_priority_components.c7200de4739ad534ba76.js.map
