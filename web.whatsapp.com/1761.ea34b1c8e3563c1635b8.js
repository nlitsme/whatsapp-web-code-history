/*! Copyright (c) 2023 WhatsApp Inc. All Rights Reserved. */
(self.webpackChunkwhatsapp_web_client=self.webpackChunkwhatsapp_web_client||[]).push([[1761],{493041:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ENUM_FALSE_TRUE=t.ENUM_FALSE_NOTSET_TRUE=void 0;t.ENUM_FALSE_NOTSET_TRUE={false:"false",notset:"notset",true:"true"};t.ENUM_FALSE_TRUE={false:"false",true:"true"}},31761:(e,t,r)=>{"use strict";var n=r(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(r(348926)),o=n(r(81109)),a=n(r(288306)),i=(r(493041),r(72696)),u=n(r(873969)),s=r(919175),d=r(778945),c=r(542358),f=r(713464),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=U(t);if(r&&r.has(e))return r.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=l?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(27578)),m=r(900316),h=r(486392),g=r(114850),y=n(r(930440)),b=r(411597),_=r(25968),v=r(699411),S=r(100149),x=r(973176),C=r(238977),M=n(r(94530)),T=r(665195),O=n(r(454903)),A=r(832545),j=(r(625786),r(390737),r(392632)),E=r(459857),P=n(r(844453)),I=n(r(571834)),R=r(931678),D=n(r(774845)),w=(r(548360),r(667294)),k=n(r(923099)),N=n(r(470649)),L=n(r(189957)),F=r(785893);function U(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(U=function(e){return e?r:t})(e)}const q=r(76672).Mirrored(["LOADING","DATA_SHARING_CONSENT_FORM","CATALOG_PRODUCTS_FORM","CUSTOM_ITEM_FORM","ORDER_SUMMARY","ADDITIONAL_CHARGES_FORM"]),B=Array.from(q.members()),H=(0,a.default)((()=>p.currencyForCountryShortcode((0,h.getCountryShortcodeByPhone)((0,E.getMeUser)().user))));function G(e,t){let{entryPoint:r,order:n,chat:a,onBack:p,onSend:h,onCancel:U}=e;const G=(0,L.default)(),[Y,W]=(0,w.useState)(q.ORDER_SUMMARY),[z,Q]=(0,w.useState)(null),[V,K]=(0,w.useState)(!1),[X,$]=(0,w.useState)((()=>function(e){if(!e)return[];const t={isCustomItem:!1,isQuantitySet:!0},r=e.products.map((e=>new O.default((0,o.default)((0,o.default)({},t),e))));return(0,T.notifyIfAnyProductMissesPrice)(r,{}),r}(n))),[Z,J]=(0,w.useState)({}),[ee,te]=(0,w.useState)(null),re=(0,N.default)((()=>new y.default([],(e=>e.id.toString())))).current,ne=f.CatalogCollection.get((0,E.getMeUser)()),le=(e,t)=>{J((r=>(0,o.default)((0,o.default)({},r),{},{[t]:e})))},oe=(0,w.useMemo)((()=>X.reduce(((e,t)=>{var r,n;return e+(null!==(r=null!==(n=t.price)&&void 0!==n?n:Z[t.id])&&void 0!==r?r:0)*t.quantity}),0)),[X,Z]),ae=(0,C.calculateFlatAmounts)({orderSubtotal:oe/C.DEFAULT_OFFSET,discountType:(null==ee?void 0:ee.discountType)||"",discountText:(null==ee?void 0:ee.discountText)||"",taxType:(null==ee?void 0:ee.taxType)||"",taxText:(null==ee?void 0:ee.taxText)||"",shippingText:(null==ee?void 0:ee.shippingText)||""}),ie=(0,c.hasCatalog)(d.BusinessProfileCollection.get((0,E.getMaybeMeUser)())),ue=H(),se=()=>{const e=X.some((e=>Z[e.id]));new I.default.OrderDetailsActionsSmb({orderDetailsCreationAction:I.default.ORDER_DETAILS_CREATION_ACTION.SEND_ORDER_DETAILS,actionCategory:String(M.default.ORDER_DETAILS_CREATION),hasCatalog:ie,hasAddedPrice:e,orderDetailEntryPoint:String(r)}).commit();const t=null!=n?n:v.OrderCollection.addOrder();t.products=X.map((e=>{var t;return e.price=null!==(t=e.price)&&void 0!==t?t:Z[e.id],e.currency=ue,e})),t.currency=ue,t.subtotal=oe,t.triggerItemCollectionUpdate(),(0,s.sendOrderDetailsMessageAsMerchant)({order:t,chat:a,orderNote:"",offset:C.DEFAULT_OFFSET,total:ae.total,discount:ae.discount,shipping:ae.shipping,tax:ae.tax}),null==h||h(),m.DrawerManager.closeDrawerRight()},de=(0,k.default)((()=>{p?p():(m.DrawerManager.closeDrawerRight(),null==U||U())})),ce=()=>{!function(e,t,r){return e?t.length!==e.products.length||t.some(((t,n)=>{var l,o;return t.id!==e.products[n].id||t.quantity!==e.products[n].quantity||(null!==(l=null!==(o=t.price)&&void 0!==o?o:r[t.id])&&void 0!==l?l:null)!==e.products[n].price})):t.length>0}(n,X,Z)?de():g.ModalManager.open((0,F.jsx)(S.ConfirmDiscardModal,{onOK:de}))},fe=e=>{G.aborted||(!0!==e&&(0,T.notifyIfAnyProductMissesPrice)(X,Z),W(q.ORDER_SUMMARY))},pe=()=>{W(q.CATALOG_PRODUCTS_FORM)},me=(e,t)=>{const r=Number.isInteger(e)?e:null;Q(r),K(!0===t),W(null==r||X[r].isCustomItem?q.CUSTOM_ITEM_FORM:q.CATALOG_PRODUCTS_FORM)},he=()=>{W(q.ADDITIONAL_CHARGES_FORM)},ge=(e,t)=>{const r=e.length,n=e.reduce(((e,t,r)=>e.set(t.id,r)),new Map);return[...t].sort(((e,t)=>{var l,o;return(null!==(l=n.get(e.id))&&void 0!==l?l:r)-(null!==(o=n.get(t.id))&&void 0!==o?o:r)}))},ye=e=>e.map((e=>{var t;return new O.default({id:e.id,name:e.name,price:e.priceAmount1000,thumbnailUrl:null===(t=e.getPreviewImage())||void 0===t?void 0:t.mediaUrl,quantity:Number(re.getVal(e)),isCustomItem:!1,isQuantitySet:!0})})),be=(e,t,r)=>{const n=null==ne?void 0:ne.productCollection.getProductModels(),l=new Set(t.map((e=>{let{id:t}=e;return t}))),o=new Set(null==n?void 0:n.map((e=>{let{id:t}=e;return t})));return r.reduce(((e,t)=>{const r=l.has(t.id),n=o.has(t.id);return r||n?e:e.concat(t)}),e)},_e=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];ie&&$((t=>{const r=re.getSelected(),n=ye(r),l=be(n,r,t);return e&&(0,T.notifyIfAnyProductMissesPrice)(l,Z),ge(t,l)}))},ve=e=>re.getSelected().find((t=>{let{id:r}=t;return r===e.id})),Se=(e,t)=>{re.setVal(e,t)},xe=e=>{if(!X[e].isCustomItem){const t=ve(X[e]);t&&Se(t,0)}$((t=>[...t.slice(0,e),...t.slice(e+1)]))},Ce=(e,t)=>{if(X[e].isCustomItem)((e,t)=>{t?$((r=>{const n=[...r];return n[e].quantity=t,n[e].isQuantitySet=!0,n})):xe(e)})(e,t);else{const r=ve(X[e]);r&&Se(r,t),_e(!1)}},Me=function(){var e=(0,l.default)((function*(e){var t;let r,n=null==ne?void 0:ne.productCollection.getProductModels(),l=(null===(t=n)||void 0===t?void 0:t.length)||0,o=0;for(;(!r||!re.isSelected(r))&&o<l;){var a,i;yield f.CatalogCollection.update((0,E.getMaybeMeUser)()),o=l,n=null==ne?void 0:ne.productCollection.getProductModels(),r=null===(a=n)||void 0===a?void 0:a.find((t=>t.id===e.id)),r&&Se(r,e.quantity),l=null===(i=n)||void 0===i?void 0:i.length}}));return function(){return e.apply(this,arguments)}}();(0,w.useEffect)((()=>{(()=>{if(!n)return[];const e=null==ne?void 0:ne.productCollection.getProductModels();for(const t of n.products){const r=null==e?void 0:e.find((e=>e.id===t.id));r?Se(r,t.quantity):Me(t)}})()}),[]);const Te=B.indexOf(Y);return Y?(0,F.jsx)(P.default,{ref:t,children:(0,F.jsx)(j.UIE,{displayName:`FlowDrawer${Te}`,escapable:!0,children:(0,F.jsx)("div",{children:(e=>{switch(e){case q.CATALOG_PRODUCTS_FORM:return(0,F.jsx)(_.OrderCatalogFormDrawer,{currency:ue,productsSelection:re,orderItems:X,priceMap:Z,onBack:fe,onAddProducts:()=>{_e(),fe(!0)},onAddCustomItem:()=>{me(null,!0)},onProductSelectionChange:Se});case q.LOADING:return(0,F.jsx)(D.default,{onClose:fe});case q.DATA_SHARING_CONSENT_FORM:break;case q.CUSTOM_ITEM_FORM:return(0,F.jsx)(x.CustomItemFormDrawer,{currency:ue,onBack:V?pe:fe,onSaveCustomItem:e=>{_e(),(e=>{let{name:t,priceAmount1000:r,quantity:n,isQuantitySet:l}=e;const o=`${(0,R.getCustomItemIdPrefix)()}-${(0,u.default)()}`;$((e=>ge(e,[...e,new O.default({id:o,name:t,price:r,quantity:null!=n?n:1,isCustomItem:!0,isQuantitySet:l})])))})(e),fe()},customItem:X[Number.isInteger(z)?Number(z):-1]});case q.ORDER_SUMMARY:return(0,F.jsx)(A.OrderSummaryDrawer,{chat:a,currency:ue,priceMap:Z,orderItems:X,orderSubtotal:oe,additionalCharges:ee,flatAmounts:ae,onPriceChange:le,onBack:ce,onSubmit:se,onAddItem:ie&&(0,i.orderDetailsFromCatalogEnabled)()?pe:me,onAdditionalCharges:he,onDeleteItem:xe,onItemQuantityChange:Ce});case q.ADDITIONAL_CHARGES_FORM:return(0,F.jsx)(b.AdditionalChargesFormDrawer,{currency:ue,additionalCharges:ee,subtotal:oe,onBack:fe,onApply:e=>{te((t=>(0,o.default)((0,o.default)({},t),e))),fe()}})}})(Y)})},Te)}):null}var Y=(0,w.forwardRef)(G);t.default=Y},411597:(e,t,r)=>{"use strict";var n=r(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.AdditionalChargesFormDrawer=function(e){let{currency:t,subtotal:r,additionalCharges:n,onBack:s,onApply:x}=e;const C=(null==n?void 0:n.discountText)||"",[M,T]=(0,y.useState)(C),O=(null==n?void 0:n.taxText)||"",[A,j]=(0,y.useState)(O),E=(null==n?void 0:n.shippingText)||"",[P,I]=(0,y.useState)(E),R=(null==n?void 0:n.discountType)||v,[D,w]=(0,y.useState)(R),k=(null==n?void 0:n.taxType)||S,[N,L]=(0,y.useState)(k),[F,U]=(0,y.useState)(!1),[q,B]=(0,y.useState)(!1),H=(0,y.useMemo)((()=>(0,u.additionalChargeErrorHandler)({currency:t,value:P})),[t,P]),G=[F,q,H].some((e=>e));return(0,_.jsxs)(p.default,{children:[(0,_.jsx)(m.DrawerHeader,{title:g.fbt._("Add discount, shipping or tax",null,{hk:"nPDUK"}),type:m.DRAWER_HEADER_TYPE.SMALL,onBack:C!==M||O!==A||E!==P||R!==D||k!==N?()=>{o.ModalManager.open((0,_.jsx)(i.ConfirmDiscardModal,{onOK:s}))}:s,focusBackOrCancel:!0}),(0,_.jsxs)(h.default,{className:(0,b.default)(f.uiPadding.all16),children:[(0,_.jsx)(a.AdditionalChargesTextInput,{text:M,testid:"additional-charges-discount-input",label:g.fbt._("Discount",null,{hk:"3acZrp"}),symbol:D,currency:t,priceValue:r,setText:T,setError:U,setSymbol:w}),(0,_.jsx)(c.RichTextField,{legacyImplementation:!0,value:P,testid:"additional-charges-shipping-input",placeholder:g.fbt._("Shipping ({currency_symbol})",[g.fbt._param("currency_symbol",(0,l.formatAmount1000ToParts)(t,0).symbol)],{hk:"H2WDY"}),onChange:I,theme:"small",maxLength:10,customStyleThemes:["desaturated"],error:H}),(0,_.jsx)(a.AdditionalChargesTextInput,{text:A,testid:"additional-charges-tax-input",label:g.fbt._("Tax",null,{hk:"2r5wzT"}),symbol:N,currency:t,priceValue:r,setText:j,setError:B,setSymbol:L}),(0,_.jsx)(d.OrderApplyChangesButton,{disabled:G,testid:"apply-additional-costs-button",title:g.fbt._("Apply",null,{hk:"3E5Tq7"}),onClick:()=>x({discountText:M,taxText:A,shippingText:P,discountType:D,taxType:N})})]})]})};var l=r(27578),o=r(114850),a=r(633571),i=r(100149),u=r(353950),s=r(238977),d=r(208160),c=r(202391),f=r(676345),p=n(r(168625)),m=r(940237),h=n(r(337090)),g=r(548360),y=r(667294),b=n(r(156720)),_=r(785893);const v=s.PERCENTAGE_SYMBOL,S=s.PERCENTAGE_SYMBOL},633571:(e,t,r)=>{"use strict";var n=r(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.AdditionalChargesTextInput=function(e){let{text:t,label:r,symbol:n,testid:m,currency:h,priceValue:g,setText:y,setError:b,setSymbol:_}=e;const v=(0,s.useMemo)((()=>{const e=(0,o.additionalChargeErrorHandler)({label:r,currency:h,fieldType:n,maxFlatValue:g/a.DEFAULT_OFFSET,enablePercentValueCheck:!0,value:t});return b(Boolean(e)),e}),[t,r,n,h,b,g]);return(0,c.jsxs)("div",{className:(0,d.default)(f),children:[(0,c.jsx)(i.RichTextField,{legacyImplementation:!0,value:t,testid:m,placeholder:u.fbt._("{input_label} ({currency_or_percentage})",[u.fbt._param("input_label",r),u.fbt._param("currency_or_percentage",n)],{hk:"vf1Ko"}),onChange:e=>y(e),theme:"small",maxLength:10,customStyleThemes:["desaturated"],error:v}),(0,c.jsx)("div",{className:(0,d.default)(p),children:(0,c.jsx)(l.OrderDetailAmountTypeSelector,{currency:h,value:n,onChange:e=>{let{value:t}=e;return _(t)}})})]})};var l=r(660516),o=r(353950),a=r(238977),i=r(202391),u=r(548360),s=r(667294),d=n(r(156720)),c=r(785893);const f={position:"g0rxnol2"},p={position:"lhggkp7q",end:"ebjesfe0",zIndex:"mb8var44",top:"agjvi7sf"}},25968:(e,t,r)=>{"use strict";var n=r(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.OrderCatalogFormDrawer=function(e){let{currency:t,productsSelection:r,orderItems:n,priceMap:M,onBack:T,onAddProducts:O,onAddCustomItem:A,onProductSelectionChange:j}=e;const[E,P]=(0,b.useState)(!1),I=(0,v.default)(),R=(0,S.default)((()=>new a.default)),D=r.getSelected().reduce(((e,t)=>{var n,l;return e+(null!==(n=null!==(l=t.priceAmount1000)&&void 0!==l?l:M[t.id.toString()])&&void 0!==n?n:0)*Number(r.getVal(t))}),0),w=n.filter((e=>e.isCustomItem)).reduce(((e,t)=>e+t.price*t.quantity),0);return(0,x.jsxs)(p.default,{children:[(0,x.jsx)(h.DrawerHeader,{title:y.fbt._("Add items",null,{hk:"2U1Vru"}),type:h.DRAWER_HEADER_TYPE.SMALL,onBack:E?()=>{i.ModalManager.open((0,x.jsx)(d.ConfirmDiscardModal,{onOK:T}))}:T,focusBackOrCancel:!0}),(0,x.jsxs)(m.default,{children:[(0,x.jsxs)(g.default,{theme:"expand-height",xstyle:C.drawerSection,children:[(0,l.orderDetailsCustomItemEnabled)()&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(u.AddOrderItem,{title:y.fbt._("Create new item",null,{hk:"2GmSAs"}),onClick:A}),(0,x.jsx)("hr",{className:(0,_.default)(C.catalogBar,f.uiMargin.vert0)})]}),(0,x.jsx)("p",{className:(0,_.default)(C.catalogTitleText,f.uiPadding.start16,f.uiPadding.vert10),children:y.fbt._("Catalog items",null,{hk:"4chzUe"})}),(0,x.jsx)(s.default,{className:(0,_.default)(C.catalogProductsList),productsSelection:r,orderItems:n,flatListController:R.current,onProductSelectChange:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];j(e,t),r||E||P(!0),I()}})]}),(0,x.jsx)(c.OrderTotalPrice,{xstyle:[f.uiPadding.all16,f.uiMargin.top10],visible:!0,disabled:!E,totalPrice:(0,o.formatAmount1000)(t,D+w),testid:"save-products-button",onConfirm:O,title:y.fbt._("Subtotal",null,{hk:"4ciFet"}),confirmTitle:y.fbt._("Add to Order",null,{hk:"2SYeoP"})})]})]})};var l=r(72696),o=r(27578),a=n(r(570834)),i=r(114850),u=r(359162),s=n(r(881238)),d=r(100149),c=r(208160),f=r(676345),p=n(r(168625)),m=n(r(531633)),h=r(940237),g=n(r(337090)),y=r(548360),b=r(667294),_=n(r(156720)),v=n(r(229439)),S=n(r(470649)),x=r(785893);const C={catalogTitleText:{fontWeight:"m1e7cby3",lineHeight:"tkq7s68q",fontSize:"ovllcyds",color:"q70jrbp7"},catalogBar:{width:"ln8gz9je",borderEnd:"eta5aym1",borderBottom:"d9802myq",borderStart:"e4xiuwjv",borderTop:"gq6acybq"},catalogProductsList:{overflowX:"i44ccddp",overflowY:"ag5g9lrv",flexGrow:"ggj6brxn",flexShrink:"m0h2a7mj",flexBasis:"l07amlnk"},drawerSection:{display:"p357zi0d",overflowX:"i44ccddp",overflowY:"ag5g9lrv",flexDirection:"f8m0rgwh"}}},504234:(e,t,r)=>{"use strict";var n=r(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.CatalogFormProduct=function(e){let{product:t,productsSelection:r,onProductSelectChange:n}=e;const s=Number(r.getVal(t))||0,[d,c]=(0,i.useState)(!1);return(0,u.jsx)("div",{onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),children:(0,u.jsx)(o.default,{product:t,detail:(d||r.isSelected(t))&&(0,u.jsx)(l.default,{quantity:s,quantityTitle:a.fbt._("Items in order",null,{hk:"35Mpfd"}),isCollapsed:!d,onAddOneClick:()=>n(t,s+1),onRemoveOneClick:()=>n(t,s-1)}),managedFocus:!0,theme:"product-add-to-order"})})};var l=n(r(763879)),o=n(r(698690)),a=r(548360),i=r(667294),u=r(785893)},881238:(e,t,r)=>{"use strict";var n=r(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{className:t,productsSelection:r,orderItems:n,flatListController:v,onProductSelectChange:S}=e;const x=(0,b.default)(),C=(0,h.default)(),M=(0,m.default)(C,100),T=o.CatalogCollection.assertGet((0,f.getMaybeMeUser)()),[O,A]=(0,p.useState)(!1),[j,E]=(0,p.useState)(0),[P,I]=(0,p.useState)(!1),R=()=>{const e=new Set(n.map((e=>{let{id:t}=e;return t})));return T.productCollection.getProductModels().filter((t=>!e.has(t.id))).map((e=>({itemKey:e.id.toString(),product:e})))},D=e=>{e.forEach((e=>{const t=n.find((t=>{let{id:r}=t;return r===e.product.id}));void 0!==t&&S(e.product,Number(t.quantity),!0)}))},w=function(){var e=(0,l.default)((function*(){if(P)return;if(!T.afterCursor)return;const e=T.productCollection.getProductModels().length;A(!0),E(e);try{const t=yield o.CatalogCollection.update((0,f.getMaybeMeUser)());if(x.aborted)return;A(!1);const r=(Array.isArray(t)?t[0]:t).productCollection.getProductModels().length;if(D(R().slice(e)),r===j&&I(!0),e*c.PRODUCT_LIST_ITEM_HEIGHT<window.innerHeight)return w()}catch(e){A(!1),I(!0)}}));return function(){return e.apply(this,arguments)}}();(0,p.useEffect)((()=>{D(R()),w()}),[]),(0,g.useListener)(T.productCollection,"add",M);const k=(0,y.default)((e=>{O||e.scrollTop+s.SCROLL_FUDGE>e.scrollHeight-e.clientHeight&&w()}),100);return(0,_.jsxs)(i.default,{className:t,flatListControllers:[v],onScroll:e=>{e.currentTarget&&k(e.currentTarget)},children:[(0,_.jsx)(a.FlatList,{flatListController:v,direction:"vertical",forceConsistentRenderCount:!1,data:R(),renderItem:e=>{let{product:t}=e;return(0,_.jsx)(d.CatalogFormProduct,{product:t,productsSelection:r,onProductSelectChange:S})},defaultItemHeight:c.PRODUCT_LIST_ITEM_HEIGHT}),O&&(0,_.jsx)(u.default,{})]})};var l=n(r(348926)),o=r(713464),a=r(512938),i=n(r(964223)),u=n(r(495012)),s=r(914368),d=r(504234),c=r(899841),f=r(459857),p=r(667294),m=n(r(461993)),h=n(r(229439)),g=r(148725),y=n(r(38751)),b=n(r(189957)),_=r(785893)},100149:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConfirmDiscardModal=function(e){let{onOK:t}=e;return(0,i.jsx)(o.ConfirmPopup,{title:a.fbt._("Discard changes?",null,{hk:"1SaEaC"}),onOK:()=>{n.ModalManager.close(),t()},okText:a.fbt._("Discard",null,{hk:"3etb6C"}),onCancel:()=>n.ModalManager.close(),children:(0,i.jsx)(l.TextDiv,{theme:"muted",children:a.fbt._("If you close this, your draft will be discarded.",null,{hk:"4G5DVj"})})})};var n=r(114850),l=r(180519),o=r(744259),a=r(548360),i=r(785893)},973176:(e,t,r)=>{"use strict";var n=r(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.CustomItemFormDrawer=function(e){let{currency:t,customItem:r,onBack:n,onSaveCustomItem:l}=e;const[S,x]=(0,y.useState)(null==r?void 0:r.name),[C,M]=(0,y.useState)(Number.isInteger(null==r?void 0:r.price)?String(Number(null==r?void 0:r.price)/1e3):null),[T,O]=(0,y.useState)(null==r?void 0:r.price),[A,j]=(0,y.useState)((null==r?void 0:r.isQuantitySet)?r.quantity:null),[E,P]=(0,y.useState)((null==r?void 0:r.isQuantitySet)?String(r.quantity):null),I=(0,y.useMemo)((()=>function(e){if(null==e)return"";const t=String(g.fbt._("Add a title",null,{hk:"7Lm6B"}));return""===e.trim()?t:""}(S)),[S]),R=(0,y.useMemo)((()=>function(e,t){if(null==t)return"";const r=String(g.fbt._("Enter a valid price",null,{hk:"4yb1Sg"}));return""!==t.trim()&&(0,o.validatePriceString)(e,t,s.MIN_PRICE,s.MAX_PRICE)?"":r}(t,C)),[t,C]),D=(0,y.useMemo)((()=>function(e){if(null==e)return"";const t=String(g.fbt._("Enter a valid quantity",null,{hk:"u6SoG"}));return v(Number(e))?"":t}(E)),[E]),w=function(e,t,r,n){const l=(null==e?void 0:e.isQuantitySet)?Number(n)!==e.quantity:null!=n;return(null==e?void 0:e.name)!==t||(null==e?void 0:e.price)!==r||l}(r,S,T,E);return(0,_.jsxs)(f.default,{children:[(0,_.jsx)(m.DrawerHeader,{title:r?g.fbt._("Update item",null,{hk:"1TL07p"}):g.fbt._("Create new item",null,{hk:"4xRwlm"}),type:m.DRAWER_HEADER_TYPE.SMALL,onBack:w?()=>{a.ModalManager.open((0,_.jsx)(i.ConfirmDiscardModal,{onOK:n}))}:n,focusBackOrCancel:!0}),(0,_.jsx)(p.default,{children:(0,_.jsxs)(h.default,{className:(0,b.default)(c.uiPadding.all16),children:[(0,_.jsx)(d.RichTextField,{legacyImplementation:!0,testid:"custom-item-edit-name-input",value:S,placeholder:g.fbt._("Item name",null,{hk:"1TMRR7"}),onChange:e=>{x(e)},theme:"small",customStyleThemes:["desaturated"],maxLength:150,error:I}),(0,_.jsx)(d.RichTextField,{legacyImplementation:!0,testid:"custom-item-edit-price-input",value:C,placeholder:g.fbt._("Price {symbol}",[g.fbt._param("symbol",(0,o.formatAmount1000ToParts)(t,0).symbol)],{hk:"3jcGcb"}),onChange:e=>{const r=(0,o.valueFromString)(t,e);O(r),M(e)},theme:"small",maxLength:30,customStyleThemes:["desaturated"],error:R}),(0,_.jsx)(d.RichTextField,{legacyImplementation:!0,testid:"custom-item-edit-quantity-input",value:E,placeholder:g.fbt._("Quantity (Optional)",null,{hk:"4swiuO"}),onChange:e=>{let t=""===e?null:Number(e);v(t)||(t=null),j(t),P(""===e?null:e)},theme:"small",maxLength:30,customStyleThemes:["desaturated"],error:D}),(0,_.jsx)(u.OrderApplyChangesButton,{title:r?g.fbt._("Update Order",null,{hk:"HjU1X"}):g.fbt._("Add to Order",null,{hk:"3p1U18"}),disabled:null==S||null==C||!(!r||w)||[I,R,D].some((e=>e)),onClick:()=>{const e={name:S,priceAmount1000:+T,quantity:A,isQuantitySet:Number.isInteger(A)};l(e)},testid:"save-custom-item-button"})]})})]})};var l=r(753958),o=r(27578),a=r(114850),i=r(100149),u=r(208160),s=r(517086),d=r(202391),c=r(676345),f=n(r(168625)),p=n(r(531633)),m=r(940237),h=n(r(337090)),g=r(548360),y=r(667294),b=n(r(156720)),_=r(785893);function v(e){return Number.isInteger(e)&&+e>0&&+e<=l.CART_ITEM_MAX_QUANTITY}},660516:(e,t,r)=>{"use strict";var n=r(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.OrderDetailAmountTypeSelector=function(e){let{value:t,onChange:r,currency:n}=e;const d=l.formatLocalSymbol(n),c=i.fbt._("Select amount type",null,{hk:"1xddkG"}),f=[{id:"percentage",label:i.fbt._("by Percentage ({percentage-symbol})",[i.fbt._param("percentage-symbol",o.PERCENTAGE_SYMBOL)],{hk:"3fQwM3"}),value:o.PERCENTAGE_SYMBOL},{id:"flat-amount",label:i.fbt._("by Flat amount ({currency-symbol})",[i.fbt._param("currency-symbol",d)],{hk:"duPhj"}),value:d}],p=(0,u.useMemo)((()=>f.findIndex((e=>e.value===t))),[]);return(0,s.jsx)(a.default,{"aria-label":c,options:f,defaultIndex:p,onChange:r})};var l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=l?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(27578)),o=r(238977),a=n(r(754493)),i=r(548360),u=r(667294),s=r(785893);function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}},754493:(e,t,r)=>{"use strict";var n=r(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{defaultIndex:t=0,options:r,onChange:n,"aria-label":m}=e;const h=(0,d.useRef)(null),[g,y]=(0,d.useState)(!1),[b,_]=(0,d.useState)(t),v=r.map(((e,t)=>{const{id:r,label:l}=e;return(0,f.jsx)(a.DropdownItem,{testid:`mi-${r}`,action:()=>{n(e),_(t)},children:(0,f.jsx)("div",{className:(0,c.default)(p),role:"button","aria-label":l,children:t===b?(0,f.jsx)(i.TextSpan,{weight:"bold",children:l}):l})},r)}));return(0,f.jsxs)("div",{ref:h,children:[(0,f.jsx)(l.default,{"aria-label":m,PostfixIcon:o.DownIcon,label:r[b].value,onClick:()=>y((e=>!e))}),g&&h.current&&(0,f.jsx)(u.UIE,{displayName:"ValuePicker",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:()=>y(!1),children:(0,f.jsx)(s.default,{contextMenu:{menu:v,anchor:h.current}})})]})};var l=n(r(407284)),o=r(820765),a=r(675085),i=r(180519),u=r(392632),s=n(r(37875)),d=r(667294),c=n(r(156720)),f=r(785893);const p={boxSizing:"cm280p3y",color:"tviruh8d",cursor:"ajgl1lbb",fontSize:"f8jlpxt4",height:"lniyxyh2",lineHeight:"gz7w46tb",overflowX:"gfz4du6o",overflowY:"r7fjleex",paddingStart:"sta02ykp",paddingEnd:"pnfw7ual",paddingTop:"lqdozo90",textOverflow:"lhj4utae",whiteSpace:"le5p0ye3",position:"g0rxnol2"}},665195:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getErrorMsgFromProducts=i,t.notifyIfAnyProductMissesPrice=void 0;var n=r(625786),l=r(390737),o=r(548360),a=r(785893);function i(e){const t=e.length;return 0===t?"":1===t?o.fbt._("Enter a price for {first-product-name}",[o.fbt._param("first-product-name",e[0])],{hk:"Lf39K"}):2===t?o.fbt._("Enter prices for {first-product-name} and {second-product-name}",[o.fbt._param("first-product-name",e[0]),o.fbt._param("second-product-name",e[1])],{hk:"1uLet0"}):o.fbt._({"*":"Enter prices for {first-product-name}, {second-product-name} and {other-items} other items",_1:"Enter prices for {first-product-name}, {second-product-name} and 1 other item"},[o.fbt._plural(t-2,"other-items"),o.fbt._param("first-product-name",e[0]),o.fbt._param("second-product-name",e[1])],{hk:"1Crsuq"})}t.notifyIfAnyProductMissesPrice=(e,t)=>{const r=i(e.reduce(((e,r)=>{var n;const l=null!==(n=r.price)&&void 0!==n?n:t[r.id];return Number.isInteger(l)||e.push(r.name||""),e}),[]));r&&l.ToastManager.open((0,a.jsx)(n.Toast,{duration:1e4,msg:r,action:{actionText:o.fbt._("OKAY",null,{hk:"3RIrWh"}),dismiss:!0,theme:"success"}}))}},774845:(e,t,r)=>{"use strict";var n=r(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(690495),o=r(956113),a=n(r(168625)),i=n(r(531633)),u=r(940237),s=r(548360),d=r(667294),c=(n(r(156720)),r(785893));const f={spinnerWrapper:{height:"ppled2lx"}},p=s.fbt._("Loading",null,{hk:"2jCIXy"});function m(e,t){const{title:r=p,onClose:n=(()=>{})}=e;return(0,c.jsxs)(a.default,{ref:t,testid:"loading-drawer",children:[(0,c.jsx)(u.DrawerHeader,{title:r,type:u.DRAWER_HEADER_TYPE.LARGE,onCancel:n}),(0,c.jsx)(i.default,{children:(0,c.jsx)(l.FlexColumn,{align:"center",justify:"center",xstyle:f.spinnerWrapper,children:(0,c.jsx)(o.Spinner,{color:"default",size:48,stroke:6})})})]})}var h=(0,d.forwardRef)(m);t.default=h}}]);
//# sourceMappingURL=https://web.whatsapp.com/1761.ea34b1c8e3563c1635b8.js.map
