/*! Copyright (c) 2021 WhatsApp Inc. All Rights Reserved. */!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s="bhdadechej")}({bcdgbaaibb:function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,i,a,o,u,s=1,c={},l=!1,f=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick((function(){v(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((a=new MessageChannel).port1.onmessage=function(e){v(e.data)},r=function(e){a.port2.postMessage(e)}):f&&"onreadystatechange"in f.createElement("script")?(i=f.documentElement,r=function(e){var t=f.createElement("script");t.onreadystatechange=function(){v(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):r=function(e){setTimeout(v,0,e)}:(o="setImmediate$"+Math.random()+"$",u=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(o)&&v(+t.data.slice(o.length))},e.addEventListener?e.addEventListener("message",u,!1):e.attachEvent("onmessage",u),r=function(t){e.postMessage(o+t,"*")}),d.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return c[s]=i,r(s),s++},d.clearImmediate=h}function h(e){delete c[e]}function v(e){if(l)setTimeout(v,0,e);else{var t=c[e];if(t){l=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{h(e),l=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n("bgdiiijdd"),n("ddghcccjbh"))},bchejfgdg:function(e,t,n){"use strict";var r=n("cfjecfhbfg");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("dfadhaifh")),a=r(n("ffedgcdgj")),o=r(n("ccddaicfff")),u=r(n("cgeeeeddea")),s=(n("dhdjjbcibj"),r(n("cahfddcdga"))),c=n("bfagiaicdd");function l(){var e=(0,i.default)(["Operation "," failed with args: "]);return l=function(){return e},e}function f(){var e=(0,i.default)(["idb faild to do Operation: "," on Table: ",". Failed with error"]);return f=function(){return e},e}var d=n("geadgcffe").default;function h(){return(h=(0,a.default)((function*(){throw new Error("feature is not yet implemented")}))).apply(this,arguments)}function v(){return(v=(0,a.default)((function*(){throw new Error("feature is not yet implemented")}))).apply(this,arguments)}class p{constructor(e,t,n,r,i){this.table=e,this.view=n,this.db=t,this.propFilter=r,this.tableEncryptedColumns=new Map(Object.keys(i).map(e=>[e,i[e]]))}asyncView(e){var t=this;return(0,a.default)((function*(){if(!t._hasEncryptedColumn())return t.view(e);var n=yield t._decryptColumns(e);return t.view(n)}))()}_decryptColumns(e){var t=this;return(0,a.default)((function*(){(0,u.default)("object"==typeof e,"Called `_decryptColumns` with primitive value");var n=Array.from(t.tableEncryptedColumns.entries()).map(([t,n])=>{var r=e[t];return(null==r?void 0:r._data)&&(null==r?void 0:r.iv)?function(){return v.apply(this,arguments)}(r,t,n).then(n=>{e[t]=n}):r});return yield Promise.all(n),e}))()}_encryptColumns(e){var t=Array.from(this.tableEncryptedColumns.entries()).map(([t,n])=>{var r=e[t];return null==r?r:function(){return h.apply(this,arguments)}(r,t,n).then(n=>{e[t]=n})});return Promise.all(t).then(()=>e)}_addAndEncrypt(e){var t=this;return(0,a.default)((function*(){if(!t._hasEncryptedColumn())return t.table.add(e);var n=yield t._encryptSingleUpdate(e);return t.table.add(n)}))()}_putAndEncrypt(e){var t=this;return(0,a.default)((function*(){if(!t._hasEncryptedColumn())return t.table.put(e);var n=yield t._encryptColumns(e);return t.table.put(n)}))()}_bulkAddAndEncrypt(e){return this._hasEncryptedColumn()?this._encryptBulkUpdates(e).then(e=>this.table.bulkAdd(e)):this.table.bulkAdd(e)}_bulkPutAndEncrypt(e){return this._hasEncryptedColumn()?o.default.waitFor(this._encryptBulkUpdates(e)).then(e=>this.table.bulkPut(e)):this.table.bulkPut(e)}_encryptBulkUpdates(e){if(!this._hasEncryptedColumn())return d.resolve(e);var t=[],n=e.map((e,n)=>this._encryptColumns(e).then(e=>{t[n]=e}));return Promise.all(n).then(()=>t)}_encryptSingleUpdate(e){var t=this;return(0,a.default)((function*(){return t._hasEncryptedColumn()?yield t._encryptColumns(e):e}))()}asyncViewMap(e){if(!this._hasEncryptedColumn())return Promise.resolve(e.map(e=>e?this.view(e):null));var t=e.map(e=>null!=e?this.asyncView(e):d.resolve(null));return d.resolve(o.default.waitFor(Promise.all(t)))}create(e){var t=this.propFilter(e);return d.resolve(this._addAndEncrypt(t)).catch(t=>{throw w(t,"create",this.table.name,e),t})}createOrReplace(e){var t=this.propFilter(e);return d.resolve(this._putAndEncrypt(t)).catch(t=>{throw w(t,"createOrReplace",this.table.name,e),t})}createOrMerge(e,t){var n=this;return(0,a.default)((function*(){var r=n.propFilter(t),i=yield n._encryptColumns(r);return d.resolve(n.db.transaction("rw",n.table,()=>{n.table.where(":id").equals(e).modify(e=>{Object.assign(e,i)}).then(e=>{if(1!==e)return n.table.add(i)})}).then(()=>{})).catch(r=>{throw w(r,"createOrMerge",n.table.name,e,t),r})}))()}get(e){return d.resolve(this.table.get(e)).then(e=>e?this.asyncView(e):null).catch(t=>{throw w(t,"get",this.table.name,e),t})}merge(e,t){var n=this;return(0,a.default)((function*(){var r=n.propFilter(t),i=yield n._encryptSingleUpdate(r);return d.resolve(n.table.update(e,i)).catch(r=>{throw w(r,"merge",n.table.name,e,t),r})}))()}remove(e){return d.resolve(this.table.delete(e)).catch(t=>{throw w(t,"remove",this.table.name,e),t})}bulkCreate(e){var t=e.map(e=>this.propFilter(e));return d.resolve(this.db.transaction("rw",this.table,()=>this._bulkAddAndEncrypt(t))).catch(t=>{throw w(t,"bulkCreate",this.table.name,e),t})}bulkCreateOrReplace(e){var t=e.map(e=>this.propFilter(e));return d.resolve(this.db.transaction("rw",this.table,()=>this._bulkPutAndEncrypt(t))).catch(t=>{throw w(t,"bulkCreateOrReplace",this.table.name,e),t})}bulkCreateOrMerge(e){var t=this;return(0,a.default)((function*(){var n=new Map,r=t._primaryKey();function i(){return(i=(0,a.default)((function*(e){var n=t.table.where(":id").anyOf(Array.from(e.keys()));return yield n.modify(t=>{Object.assign(t,e.get(t[r])),e.delete(t[r])}),Array.from(e.values())}))).apply(this,arguments)}return(yield t._encryptBulkUpdates(e)).forEach(e=>{var i=t.propFilter(e);(0,u.default)(r in i,"Called `bulkCreateOrMerge` with item(s) not including the primary key"),n.set(i[r],i)}),d.resolve(t.db.transaction("rw",t.table,()=>function(){return i.apply(this,arguments)}(n).then(e=>0===e.length?d.resolve():t.table.bulkPut(e)))).catch(n=>{throw w(n,"bulkCreateOrMerge",t.table.name,e),n})}))()}bulkGet(e){return d.resolve(this.db.transaction("r",this.table,()=>{var t=e.map(e=>this.table.get(e));return o.default.Promise.all(t)})).then(e=>this.asyncViewMap(e)).catch(t=>{throw w(t,"bulkGet",this.table.name,e),t})}bulkRemove(e){return d.resolve(this.db.transaction("rw",this.table,()=>this.table.bulkDelete(e))).catch(t=>{throw w(t,"bulkRemove",this.table.name,e),t})}all(e){var t=b(this.table.orderBy(e&&e.index?y(e.index):":id"),e),n=null;switch(null==e?void 0:e.returnKeyType){case"keys":n=d.resolve(t.keys());break;case"primary_key":n=d.resolve(t.primaryKeys());break;default:n=d.resolve(t.toArray()).then(e=>this.asyncViewMap(e))}return n.catch(t=>{throw w(t,"all",this.table.name,e),t})}count(){return d.resolve(this.table.count()).catch(e=>{throw w(e,"count",this.table.name),e})}equals(e,t,n){return d.resolve(b(this.table.where(y(e)).equals(t),n).toArray()).then(e=>this.asyncViewMap(e)).catch(r=>{throw w(r,"equals",this.table.name,e,t,n),r})}anyOf(e,t,n){return d.resolve(b(this.table.where(y(e)).anyOf(t),n).toArray()).then(e=>this.asyncViewMap(e)).catch(r=>{throw w(r,"anyOf",this.table.name,e,t,n),r})}greaterThan(e,t,n){var r=n&&n.inclusive?this.table.where(y(e)).aboveOrEqual(t):this.table.where(y(e)).above(t);return d.resolve(b(r,n).toArray()).then(e=>this.asyncViewMap(e)).catch(r=>{throw w(r,"greaterThan",this.table.name,e,t,n),r})}lessThan(e,t,n){var r=n&&n.inclusive?this.table.where(y(e)).belowOrEqual(t):this.table.where(y(e)).below(t);return d.resolve(b(r,n).toArray()).then(e=>this.asyncViewMap(e)).catch(r=>{throw w(r,"lessThan",this.table.name,e,t,n),r})}between(e,t,n,r,i){var a=b(this.table.where(y(e)).between(t,n,!(!r||!r.lowerInclusive),!(!r||!r.upperInclusive)),r),o=null;switch(null==r?void 0:r.returnKeyType){case"keys":o=d.resolve(a.keys());break;case"primary_key":o=d.resolve(a.primaryKeys());break;default:o=i?d.resolve(a.until(i).toArray()).then(()=>[]):d.resolve(a.toArray()).then(e=>this.asyncViewMap(e))}return o.catch(i=>{throw w(i,"between",this.table.name,e,t,n,r),i})}forEachSortedBy(e,t){var n=this;return this.table.orderBy(e).each(function(){var e=(0,a.default)((function*(e){var r=yield n._decryptColumns(e);return t(r)}));return function(){return e.apply(this,arguments)}}()).catch(n=>{throw w(n,"forEachSortedBy",this.table.name,e,t),n})}forEach(e){var t=this;return this.table.each(function(){var n=(0,a.default)((function*(n){var r=yield t._decryptColumns(n);return e(r)}));return function(){return n.apply(this,arguments)}}()).catch(t=>{throw w(t,"forEach",this.table.name,e),t})}clear(){return d.resolve(this.table.clear()).catch(e=>{throw w(e,"clear",this.table.name),e})}_primaryKey(){return this.table.schema.primKey.name}_hasEncryptedColumn(){return this.tableEncryptedColumns.size>0}}function m(e){if(e.length>1)return e.forEach(e=>{(0,u.default)(e.primaryKey&&e.primaryKey===c.PRIMARY_KEY_TYPE.COMPOSITE,"Invalid column passed to `formatPrimaryKey`")}),"[".concat(e.map(e=>e.name).join("+"),"]");var t=e[0];return(0,u.default)(t.primaryKey&&t.primaryKey!==c.PRIMARY_KEY_TYPE.COMPOSITE,"Invalid column passed to `formatPrimaryKey`"),t.primaryKey===c.PRIMARY_KEY_TYPE.AUTO_INCREMENT?"".concat(t.name,"++"):t.name}function g(e){switch(e.type){case c.INDEX_TYPE.SIMPLE:return e.column;case c.INDEX_TYPE.COMPOSITE:return"[".concat(e.columns.join("+"),"]");case c.INDEX_TYPE.ARRAY:return"*".concat(e.column);case c.INDEX_TYPE.UNIQUE:return"&".concat(e.column)}throw new Error('Cannot format index of type "'.concat(e.type,'"'))}function y(e){return 1===e.length?e[0]:"[".concat(e.join("+"),"]")}function b(e,t){var n=e;return t&&t.reverse&&(n=n.reverse()),t&&null!=t.offset&&(n=n.offset(t.offset)),t&&null!=t.limit&&0!==t.limit&&(n=n.limit(t.limit)),n}function _(e){return d.resolve(e)}function w(e,t,n,...r){__LOG__(3,!0)(f(),t,n),__LOG__(2)(l(),t)}t.default=class{constructor(e,t=_){this.tableNames=new Map,this.tableColumns=new Map,this.tableEncryptedColumns=new Map,this.name=e,this.db=new o.default(this.name),this.transformSchema=t}initialize(e,t,n){return function(e,t,n,r,i){return Promise.reduce(e,(e,a)=>i((0,c.cloneSchema)(a)).then(i=>{if((0,u.default)(!(i.name in e),"Multiple tables resulted in the same transformed name"),i.deleted)return e[i.name]=null,e;t.set(a.name,i.name),n.set(a.name,i.columns.map(e=>e.name)),r.set(a.name,i.encryptedColumns||{});var o=i.columns.filter(e=>e.primaryKey);(0,u.default)(o.length>=1,'No primary key was defined for "'.concat(a.name,'"'));var s=[m(o)].concat(i.indexes.map(g)).join(", ");return e[i.name]=s,e}),{})}(t,this.tableNames,this.tableColumns,this.tableEncryptedColumns,this.transformSchema).then(t=>{this.db.version(e+1).stores(t).upgrade(e=>{var t;if(n)return null===(t=e[n.name])||void 0===t?void 0:t.toCollection().modify(n.callback)})})}open(){return d.resolve(this.db.open())}transact(e,t,n="rw"){return d.resolve(this.db.transaction(n,e,()=>t()))}close(){return this.db.close(),d.resolve()}view(e,t,n){(0,u.default)(this.tableNames.has(e),'Attemped to get view for uninitialized table "'.concat(e,'"')),(0,u.default)(this.tableColumns.has(e),'Attemped to get columns for uninitialized table "'.concat(e,'"'));var r=n?function(e){if(!e)return e=>e;return t=>{var n={};return e.forEach(e=>{t.hasOwnProperty(e)&&(n[e]=t[e])}),n}}(this.tableColumns.get(e)):e=>e;return new p(this.db.table(this.tableNames.get(e)),this.db,t,r,(0,s.default)(this.tableEncryptedColumns.get(e),"this.tableEncryptedColumns.get(table)"))}available(){return d.resolve(!0)}reset(){return this.tableNames=new Map,d.resolve(this.db.delete()).finally(()=>{this.db=new o.default(this.name)})}}},bdbhhedcfi:function(e,t,n){"use strict";function r(e,t){var n=function(...r){var i=t?t.apply(this,r):r[0];if(!i)return e.apply(this,r);var a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(r.Cache||Map),n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r.Cache=Map;var i=r;t.default=i},bdhhdbcefi:function(e,t,n){"use strict";var r=n("cfjecfhbfg");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("cgeeeeddea")),a=r(n("chejdieege")),o=n("bfagiaicdd");class u extends a.default{constructor(e){super(),this.column=e}validate(e){var t=e.columns.find(e=>e.name===this.column);(0,i.default)(t,'Attempted to add index on non-existent column "'.concat(this.column,'" in "').concat(e.name,'"')),(0,i.default)(t&&(!t.primaryKey||t.primaryKey===o.PRIMARY_KEY_TYPE.COMPOSITE),'Cannot add index on primary key on table "'.concat(e.name,'"')),(0,i.default)(!e.indexes.some(e=>(e.type===o.INDEX_TYPE.ARRAY||e.type===o.INDEX_TYPE.SIMPLE||e.type===o.INDEX_TYPE.UNIQUE)&&(0,o.indexContainsColumn)(e,this.column)),'Attempted to add index "'.concat(this.column,'" which already exists in "').concat(e.name,'"'))}apply(e){var t=(0,o.cloneSchema)(e);return t.indexes.push(this._getIndex()),t}_getIndex(){return{type:o.INDEX_TYPE.ARRAY,column:this.column}}}t.default=u},bfagiaicdd:function(e,t,n){"use strict";var r=n("cfjecfhbfg");Object.defineProperty(t,"__esModule",{value:!0}),t.emptySchema=function(e){return{name:e,columns:[],indexes:[],encryptedColumns:{}}},t.cloneSchema=function(e){return{name:e.name,columns:e.columns.map(e=>(0,i.default)({},e)),indexes:e.indexes.map(c),encryptedColumns:(0,i.default)({},e.encryptedColumns||{}),deleted:e.deleted}},t.freezeSchema=function(e){return Object.freeze({name:e.name,columns:Object.freeze(e.columns.map(Object.freeze)),indexes:Object.freeze(e.indexes.map(s)),encryptedColumns:Object.freeze((0,i.default)({},e.encryptedColumns||{})),deleted:e.deleted})},t.findIndex=function(e,t){return e.indexes.findIndex(e=>function(e,t){if(e.type!==t.type)return!1;switch(e.type){case u.SIMPLE:case u.ARRAY:case u.UNIQUE:return(0,a.default)(t.type===e.type,"Index types are not equal"),e.column===t.column;case u.COMPOSITE:return(0,a.default)(t.type===e.type,"Index types are not equal"),e.columns.length===t.columns.length&&!e.columns.some(e=>!t.columns.includes(e))}throw new Error("cannot compare unknown indexes of types: ".concat(e.type,", ").concat(t.type))}(t,e))},t.indexContainsColumn=function(e,t){switch(e.type){case u.SIMPLE:case u.ARRAY:case u.UNIQUE:return e.column===t;case u.COMPOSITE:return!!e.columns.find(e=>e===t)}throw new Error("cannot check indexes of unknown index type: ".concat(e.type))},t.INDEX_TYPE=t.PRIMARY_KEY_TYPE=void 0;var i=r(n("cdfdfciehj")),a=r(n("cgeeeeddea")),o=Object.freeze({AUTO_INCREMENT:"auto-increment",USER_DEFINED:"user-defined",COMPOSITE:"composite"});t.PRIMARY_KEY_TYPE=o;var u=Object.freeze({SIMPLE:"simple",COMPOSITE:"composite",ARRAY:"array",UNIQUE:"unique"});function s(e){switch(e.type){case u.SIMPLE:return Object.freeze({type:u.SIMPLE,column:e.column});case u.ARRAY:return Object.freeze({type:u.ARRAY,column:e.column});case u.COMPOSITE:return Object.freeze({type:u.COMPOSITE,columns:Object.freeze(e.columns.map(Object.freeze))});case u.UNIQUE:return Object.freeze({type:u.UNIQUE,column:e.column})}throw new Error("cannot freeze index of unknown type: ".concat(e.type))}function c(e){switch(e.type){case u.SIMPLE:return{type:u.SIMPLE,column:e.column};case u.UNIQUE:return{type:u.UNIQUE,column:e.column};case u.COMPOSITE:return{type:u.COMPOSITE,columns:e.columns.map(e=>e)};case u.ARRAY:return{type:u.ARRAY,column:e.column}}throw new Error("cannot clone unknown index type: ".concat(e.type))}t.INDEX_TYPE=u},bfcgiihhaf:function(e,t,n){"use strict";var r=n("cfjecfhbfg");Object.defineProperty(t,"__esModule",{value:!0}),t.initializeWithoutGKs=function(){null==d&&((0,c.createStorage)(),(0,s.addTable)(),(0,u.addTable)(),(0,l.addTable)(),d=(0,c.getStorage)().initialize().then(()=>{null!=v&&null!=p||(v=new a.PromiseQueue(5e3),p=new a.PromiseQueueMap(5e3))}).catch(e=>{throw __LOG__(4,!0,new Error)(f()),SEND_LOGS("Failed to initialize model storage"),e}));return d},t.destroy=function(){return(0,c.destroyStorage)().catch(()=>h.resolve(new o.default(c.DATABASE_NAME).delete())).finally(()=>{d=null,v=null,p=null})},t.clearInitializePromise=function(){d=null},t.onMsgProcessingThread=function(e,t){if(null==v||null==p)return Promise.reject(new Error("Storage not initialized yet."));return v.enqueue(()=>p.enqueue(e,t))},t.waitForMsgThread=function(e){if(null==v||null==p)return Promise.resolve();return e?p.wait(e):v.wait()};var i=r(n("dfadhaifh")),a=n("dgcdhiachd"),o=r(n("ccddaicfff")),u=n("eafdicgcb"),s=n("cfaiaedcf"),c=n("ffjiicch"),l=n("ecjageddib");function f(){var e=(0,i.default)(["Assertion failed!"]);return f=function(){return e},e}var d,h=n("geadgcffe").default,v=null,p=null},bfefjaegfe:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.numUtf8Bytes=c,t.longFitsInDouble=l,t.parseInt64OrThrow=b,t.parseUint64OrThrow=_,t.Binary=void 0;var r=n("cdiijcehcb"),i=new Uint8Array(10),a=new Uint8Array(0);class o{constructor(e=a,t=!1){e instanceof ArrayBuffer?(this._buffer=new Uint8Array(e),this._readEndIndex=this._writeIndex=e.byteLength):e instanceof Uint8Array&&(this._buffer=e,this._readEndIndex=this._writeIndex=e.length),this._bytesTrashed=0,this._earliestIndex=this._readIndex=0,this._view=null,this._littleEndian=t,this._hiddenReads=0,this._hiddenWrites=0}size(){return this._readEndIndex-this._readIndex}peek(e,t){this._hiddenReads++;var n=this._readIndex,r=this._bytesTrashed;try{return e(this,t)}finally{this._hiddenReads--,this._readIndex=n-(this._bytesTrashed-r)}}advance(e){h(this,e)}readUint8(){return this._buffer[h(this,1)]}readInt8(){var e=h(this,1);return d(this).getInt8(e)}readUint16(e=this._littleEndian){var t=h(this,2);return d(this).getUint16(t,e)}readInt32(e=this._littleEndian){var t=h(this,4);return d(this).getInt32(t,e)}readUint32(e=this._littleEndian){var t=h(this,4);return d(this).getUint32(t,e)}readInt64(e=this._littleEndian){return m(b,e,this)}readUint64(e=this._littleEndian){return m(_,e,this)}readLong(e,t=this._littleEndian){return m(e,t,this)}readFloat32(e=this._littleEndian){var t=h(this,4);return d(this).getFloat32(t,e)}readFloat64(e=this._littleEndian){var t=h(this,8);return d(this).getFloat64(t,e)}readVarInt(e){var t,n=this._readIndex,r=this._readEndIndex-n,i=this._buffer;r<=0&&h(this,1);var a=i[n];for(t=1;t<r&&t<10&&128&a;t++)a=i[n+t];var o=t;if(o>10||10===o&&a>1)throw new Error("ParseError: varint exceeds 64 bits");128&a&&h(this,o+1),h(this,o);var u=0,s=0;for(t=0;t<3&&t<o;t++,s+=7)u|=(127&i[n+t])<<s;if(o<4)return e(0,u);var c=0;for(s=0,t=3;t<6&&t<o;t++,s+=7)c|=(127&i[n+t])<<s;if(o<5)return e(0,c<<21|u);if(o<7)return e(c>>11,c<<21|u);var l=0;for(s=0,t=6;t<9&&t<o;t++,s+=7)l|=(127&i[n+t])<<s;return 10===o&&(l|=(1&i[n+9])<<21),e(l<<10|c>>11,c<<21|u)}readVarIntToHex(){var e,t=this._readIndex,n=this._buffer,i=t,a=0,o=0,u=[];do{if(h(this,1),e=n[i++],0===a)u.push(r.HEX_LOWER[15&e]),a=3,o=(127&e)>>4;else{var s=(e&15>>a)<<a|o;u.push(r.HEX_LOWER[s]);var c=e>>4-a&15;o=(127&e)>>7-(a-=1),(c>0||o>0||128&e)&&u.push(r.HEX_LOWER[c])}}while(128&e);return o>0&&u.push(r.HEX_LOWER[o]),String.fromCharCode.apply(String,u.reverse())}readBuffer(e=this.size()){if(0===e)return new ArrayBuffer(0);var t=h(this,e),n=this._buffer,r=t+n.byteOffset,i=n.buffer;return 0===r&&this._readIndex===i.byteLength?i:i.slice(r,r+e)}readByteArray(e=this.size()){if(0===e)return new Uint8Array(0);var t=h(this,e);return this._buffer.subarray(t,t+e)}readBinary(e=this.size(),t=this._littleEndian){if(0===e)return new o(void 0,t);var n=h(this,e),r=this._buffer.subarray(n,n+e);return new o(r,t)}indexOf(e){if(0===e.length)return 0;for(var t=this._buffer,n=this._readEndIndex,r=this._readIndex,i=0,a=r,o=r;o<n;o++)if(t[o]===e[i]){if(0===i&&(a=o),++i===e.byteLength)return o-r-e.byteLength+1}else i>0&&(i=0,o=a);return-1}readString(e){for(var t,n=h(this,e),r=n+e,i=this._buffer,a=[],o=n;o<r;o++){a.length>5e3&&(t||(t=[]),t.push(String.fromCharCode.apply(String,a)),a=[]);var u=0|i[o];if(0==(128&u))a.push(u);else if(192==(224&u)){var s=w(i,o+1,r);if(s){o++;var c=(31&u)<<6|63&s;c>=128?a.push(c):a.push(65533)}else a.push(65533)}else if(224==(240&u)){var l=w(i,o+1,r),f=w(i,o+2,r);if(l&&f){o+=2;var d=(15&u)<<12|(63&l)<<6|63&f;d>=2048&&!(55296<=d&&d<57344)?a.push(d):a.push(65533)}else l?(o++,a.push(65533)):a.push(65533)}else if(240==(248&u)){var v=w(i,o+1,r),p=w(i,o+2,r),m=w(i,o+3,r);if(v&&p&&m){o+=3;var g=(7&u)<<18|(63&v)<<12|(63&p)<<6|63&m;if(g>=65536&&g<=1114111){var y=g-65536;a.push(55296|y>>10,56320|1023&y)}else a.push(65533)}else v&&p?(o+=2,a.push(65533)):v?(o++,a.push(65533)):a.push(65533)}else a.push(65533)}var b=String.fromCharCode.apply(String,a);return t?(t.push(b),t.join("")):b}ensureCapacity(e){p(this,this._readIndex+e)}ensureAdditionalCapacity(e){p(this,this._writeIndex+e)}write(...e){for(var t=0;t<e.length;t++){var n=e[t];"string"==typeof n?this.writeString(n):"number"==typeof n?this.writeUint8(n):n instanceof o?this.writeBinary(n):n instanceof ArrayBuffer?this.writeBuffer(n):n instanceof Uint8Array&&this.writeByteArray(n)}}writeUint8(e){f(e,0,256,"uint8");var t=v(this,1);this._buffer[t]=e}writeInt8(e){f(e,-128,128,"signed int8");var t=v(this,1);this._buffer[t]=e}writeUint16(e,t=this._littleEndian){f(e,0,65536,"uint16");var n=v(this,2);d(this).setUint16(n,e,t)}writeInt16(e,t=this._littleEndian){f(e,-32768,32768,"signed int16");var n=v(this,2);d(this).setInt16(n,e,t)}writeUint32(e,t=this._littleEndian){f(e,0,4294967296,"uint32");var n=v(this,4);d(this).setUint32(n,e,t)}writeInt32(e,t=this._littleEndian){f(e,-2147483648,2147483648,"signed int32");var n=v(this,4);d(this).setInt32(n,e,t)}writeUint64(e,t=this._littleEndian){f(e,0,0x10000000000000000,"uint64"),g(e,t,this)}writeInt64(e,t=this._littleEndian){f(e,-0x8000000000000000,0x8000000000000000,"signed int64"),g(e,t,this)}writeFloat32(e,t=this._littleEndian){var n=v(this,4);d(this).setFloat32(n,e,t)}writeFloat64(e,t=this._littleEndian){var n=v(this,8);d(this).setFloat64(n,e,t)}writeVarInt(e){var t=e;f(t,-0x8000000000000000,0x8000000000000000,"varint (signed int64)");var n=t<0;n&&(t=-t);for(var r=(t<128?1:t<16384&&2)||t<2097152&&3||t<268435456&&4||t<34359738368&&5||t<4398046511104&&6||t<562949953421312&&7||t<72057594037927940&&8||9,i=v(this,n?10:r),a=this._buffer,o=t,u=i,s=r;s>4;s--){var c=Math.floor(o/128),l=o-128*c;a[u++]=128|127&l,o=c}for(;s>1;s--)a[u++]=128|127&o,o>>=7;a[u++]=o,n&&j(a,i,u)}writeVarIntFromHexLong(e){for(var t=(0,r.hexLongIsNegative)(e),n=t?(0,r.negateHexLong)(e):e,i=(n<"0x0000000000000080"?1:n<"0x0000000000004000"&&2)||n<"0x0000000000200000"&&3||n<"0x0000000010000000"&&4||n<"0x0000000800000000"&&5||n<"0x0000040000000000"&&6||n<"0x0002000000000000"&&7||n<"0x0100000000000000"&&8||n<"0x8000000000000000"&&9||10,a=(0,r.hexLongToHex)(n),o=v(this,t?10:i),u=this._buffer,s=0,c=0,l=0;l<r.NUM_HEX_IN_LONG;l++)s=s<<4|c>>>28,c=c<<4|(0,r.hexAt)(a,l);for(var f=0;f<i;f++){var d=127&c;c=s<<25|c>>>7,s>>>=7,(c||s)&&(d|=128),u[o+f]=d}t&&j(u,o,o+i)}writeBinary(e){var t=e._readIndex,n=e._readEndIndex;if(t!==n){var r=v(this,n-t);this._buffer.set(e._buffer.subarray(t,n),r)}}writeBuffer(e){this.writeByteArray(new Uint8Array(e))}writeByteArray(e){var t=v(this,e.length);this._buffer.set(e,t)}writeBufferView(e){this.writeByteArray(new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}writeString(e){for(var t=v(this,c(e)),n=this._buffer,r=e.length,i=0;i<r;i++){var a=e.charCodeAt(i);if(a<128)n[t++]=a;else if(a<2048)n[t++]=192|a>>6,n[t++]=128|63&a;else if(a<55296||57344<=a)n[t++]=224|a>>12,n[t++]=128|a>>6&63,n[t++]=128|63&a;else if(55296<=a&&a<56320&&i+1!==r){var o=e.charCodeAt(i+1);if(56320<=o&&o<57344){i++;var u=65536+((1023&a)<<10|1023&o);n[t++]=240|u>>18,n[t++]=128|u>>12&63,n[t++]=128|u>>6&63,n[t++]=128|63&u}else n[t++]=239,n[t++]=191,n[t++]=189}else n[t++]=239,n[t++]=191,n[t++]=189}}writeHexLong(e,t=this._littleEndian){var n=(0,r.hexLongIsNegative)(e),i=(0,r.hexLongToHex)(e),a=v(this,8),o=this._buffer;if(t)for(var u=15,s=0;u>0;u-=2,s++)o[a+s]=(0,r.hexAt)(i,u-1)<<4|(0,r.hexAt)(i,u);else for(var c=0,l=0;c<15;c+=2,l++)o[a+l]=(0,r.hexAt)(i,c)<<4|(0,r.hexAt)(i,c+1);n&&E(o,a,t)}writeBytes(...e){for(var t=0;t<e.length;t++)f(e[t],0,256,"byte");for(var n=v(this,e.length),r=this._buffer,i=0;i<e.length;i++)r[n+i]=arguments[i]}writeWithVarIntLength(e,t){var n=this._writeIndex;!function(e,t,n){e._hiddenWrites++;var r=e._writeIndex,i=e._bytesTrashed;try{t(e,n),r=e._writeIndex,i=e._bytesTrashed}finally{e._hiddenWrites--,e._writeIndex=r-(e._bytesTrashed-i)}}(this,e,t);var r=this._writeIndex;this.writeVarInt(r-n);for(var a=this._writeIndex-r,o=this._buffer,u=0;u<a;u++)i[u]=o[r+u];for(var s=r-1;s>=n;s--)o[s+a]=o[s];for(var c=0;c<a;c++)o[n+c]=i[c]}static build(...e){for(var t=0,n=0;n<e.length;n++){var r=e[n];"string"==typeof r?t+=c(r):"number"==typeof r?t++:r instanceof o?t+=r.size():r instanceof ArrayBuffer?t+=r.byteLength:r instanceof Uint8Array&&(t+=r.length)}var i=new o;return i.ensureCapacity(t),i.write.apply(i,arguments),i}}t.Binary=o;var u="",s=0;function c(e){if(e===u)return s;for(var t=e.length,n=0,r=0;r<t;r++){var i=e.charCodeAt(r);if(i<128)n++;else if(i<2048)n+=2;else if(i<55296||57344<=i&&i<=65535)n+=3;else if(55296<=i&&i<56320&&r+1!==t){var a=e.charCodeAt(r+1);56320<=a&&a<57344?(r++,n+=4):n+=3}else n+=3}return u=e,s=n}function l(e,t,n){var r=t>>21;if(e){var i=Boolean(2097151&t||n);return 0===r||-1===r&&i}return 0===r}function f(e,t,n,r){if("number"!=typeof e||e!=e||Math.floor(e)!==e||e<t||e>=n)throw new TypeError("string"==typeof e?'WriteError: string "'.concat(e,'" is not a valid ').concat(r):"WriteError: ".concat(String(e)," is not a valid ").concat(r))}function d(e){return e._view||(e._view=new DataView(e._buffer.buffer,e._buffer.byteOffset))}function h(e,t){if(t<0)throw new Error("ReadError: given negative number of bytes to read");var n=e._readIndex,r=n+t;if(r>e._readEndIndex)throw new Error(n===e._readEndIndex?"ReadError: tried to read from depleted binary":"ReadError: tried to read beyond end of binary");return e._readIndex=r,e._hiddenReads||(e._earliestIndex=r),n}function v(e,t){var n=p(e,e._writeIndex+t),r=e._writeIndex;return e._writeIndex=n,e._hiddenWrites||(e._readEndIndex=n),r}function p(e,t){var n=e._buffer;if(t<=n.length)return t;var r=e._earliestIndex,i=t-r,a=Math.max(i,2*(n.length-r),64),o=new Uint8Array(a);return r?(o.set(n.subarray(r)),e._bytesTrashed+=r,e._readIndex-=r,e._readEndIndex-=r,e._writeIndex-=r,e._earliestIndex=0):o.set(n),e._buffer=o,e._view=null,i}function m(e,t,n){var r=h(n,8),i=d(n);return e(i.getInt32(t?r+4:r,t),i.getInt32(t?r:r+4,t))}function g(e,t,n){var r=v(n,8),i=e<0,a=i?-e:e,o=Math.floor(a/4294967296),u=d(n);u.setUint32(t?r+4:r,o,t),u.setUint32(t?r:r+4,a-4294967296*o,t),i&&E(n._buffer,r,t)}function y(e,t,n){var r=4294967296*(t>=0||e?t:4294967296+t)+(n>=0?n:4294967296+n);if(!l(e,t,n))throw new Error("ReadError: integer exceeded 53 bits (".concat(r,")"));return r}function b(e,t){return y(!0,e,t)}function _(e,t){return y(!1,e,t)}function w(e,t,n){if(t>=n)return 0;var r=0|e[t];return 128==(192&r)?r:0}function j(e,t,n){for(var r=t;r<n;r++)e[r]=128|127&~e[r];for(var i=t+10-1,a=n;a<i;a++)e[a]=255;e[i]=1;for(var o=255,u=t;u<i&&255===o;u++)o=e[u],e[u]=255===o?128:o+1}function E(e,t,n){for(var r=t;r<t+8;r++)e[r]=255&~e[r];var i=255;if(n)for(var a=t;a<t+8&&255===i;a++)i=e[a],e[a]=255===i?0:i+1;else for(var o=t+7;o>=t&&255===i;o--)i=e[o],e[o]=255===i?0:i+1}},bfejgijfbh:function(e,t,n){var r=n("deaafaigjj");function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}e.exports=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var u=a?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}},bfffgggjic:function(e,t,n){"use strict";var r=n("cfjecfhbfg");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("cgeeeeddea")),a=r(n("ciefddeegi")),o=n("bfagiaicdd");class u extends a.default{validate(e){super.validate(e),(0,i.default)(this.columns&&1===this.columns.length,"Attempted to add UserDefinedPrimaryKey over wrong number of columns")}apply(e){var t=(0,o.cloneSchema)(e);return t.columns.unshift({name:this.columns[0],primaryKey:o.PRIMARY_KEY_TYPE.AUTO_INCREMENT}),t}}t.default=u},bgdiiijdd:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},bgjhiaabcf:function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function a(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new a(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new a(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n("bcdgbaaibb"),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n("bgdiiijdd"))},bhabhhjdch:function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},bhabjiggjj:function(e,t,n){"use strict";var r=n("cfjecfhbfg");Object.defineProperty(t,"__esModule",{value:!0}),t.buildHandshakePayload=function(e){return{__command:a.HANDSHAKE_COMMAND,__port:e}},t.extractPortFromHandshakePayload=function(e){if(null!=e&&null!=e.__command&&e.__command===a.HANDSHAKE_COMMAND){if(null!=e.__port)return(0,i.default)(e.__port instanceof MessagePort,"Malformed connection payload"),e.__port}};var i=r(n("cgeeeeddea")),a=n("cggbhfdifh")},bhdadechej:function(e,t,n){self.Promise=n("geadgcffe").default;var{log:r,sendLogs:i}=n("jfbhhdedh");self.__LOG__=r,self.SEND_LOGS=i;(0,n("dijbahidec").default)().then(()=>{self.addEventListener("message",()=>{})})},bhjiahgdac:function(e,t,n){"use strict";var r=n("cfjecfhbfg");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("cgeeeeddea")),a=r(n("chejdieege")),o=n("bfagiaicdd");class u extends a.default{constructor(e){super(),this.keyPath=e,this.column=e.split(".")[0]}validate(e){var t=e.columns.find(e=>e.name===this.column);(0,i.default)(t,'Attempted to add index on non-existent column "'.concat(this.column,'" in "').concat(e.name,'"')),(0,i.default)(t&&(!t.primaryKey||t.primaryKey===o.PRIMARY_KEY_TYPE.COMPOSITE),'Cannot add index on primary key on table "'.concat(e.name,'"')),(0,i.default)(!e.indexes.some(e=>(e.type===o.INDEX_TYPE.ARRAY||e.type===o.INDEX_TYPE.SIMPLE||e.type===o.INDEX_TYPE.UNIQUE)&&(0,o.indexContainsColumn)(e,this.column)),'Attempted to add index "'.concat(this.column,'" which already exists in "').concat(e.name,'"'))}apply(e){var t=(0,o.cloneSchema)(e);return t.indexes.push(this._getIndex()),t}_getIndex(){return{type:o.INDEX_TYPE.SIMPLE,column:this.keyPath}}}t.default=u},bjcfcciaea:function(e,t,n){"use strict";var r=n("cfjecfhbfg");Object.defineProperty(t,"__esModule",{value:!0}),t.sortMutations=function(e){return[...e].sort(b)};var i=r(n("cgeeeeddea")),a=r(n("bdhhdbcefi")),o=r(n("diaiajeedf")),u=r(n("djfjgifhj")),s=r(n("dhdjjbcibj")),c=r(n("bhjiahgdac")),l=r(n("dighidfgbc")),f=r(n("bfffgggjic")),d=r(n("cfagigdiib")),h=r(n("dgjadadgcb")),v=r(n("caiahabcfd")),p=r(n("ceccbdjfci")),m=r(n("dfbiiieiig")),g=r(n("ebhdfjjdeb")),y=[p.default,h.default,m.default,v.default,f.default,g.default,d.default,o.default,c.default,a.default,u.default,l.default,s.default];function b(e,t){var n=y.indexOf(e.constructor),r=y.indexOf(t.constructor);return(0,i.default)(-1!==n,"Mutation ".concat(e.constructor.name," is not a known mutation type")),(0,i.default)(-1!==r,"Mutation ".concat(e.constructor.name," is not a known mutation type")),n-r}},cabjcaaibi:function(e,t,n){"use strict";var r=n("cfjecfhbfg");Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,a.getStorage)().add("chat").version((0,u.chatCreateTable)(),[new o.default("id"),new i.default("t"),new i.default("unreadCount"),new i.default("archive"),new i.default("isReadOnly"),new i.default("isAnnounceGrpRestrict"),new i.default("modifyTag"),new i.default("muteExpiration"),new i.default("name"),new i.default("notSpam"),new i.default("pin"),new i.default("changeNumberOldJid"),new i.default("changeNumberNewJid"),new i.default("lastReceivedKey"),new i.default("endOfHistoryTransfer"),new i.default("ephemeralDuration"),new i.default("ephemeralSettingTimestamp")]).view(e=>({id:e.id,t:e.t,unreadCount:e.unreadCount,archive:e.archive,isReadOnly:e.isReadOnly,isAnnounceGrpRestrict:e.isAnnounceGrpRestrict,modifyTag:e.modifyTag,muteExpiration:e.muteExpiration,name:e.name,notSpam:e.notSpam,pin:e.pin,changeNumberOldJid:e.changeNumberOldJid,changeNumberNewJid:e.changeNumberNewJid,lastReceivedKey:e.lastReceivedKey,endOfHistoryTransfer:e.endOfHistoryTransfer,ephemeralDuration:e.ephemeralDuration,ephemeralSettingTimestamp:e.ephemeralSettingTimestamp}))},t.getTable=function(){return(0,a.getStorage)().table("chat")};var i=r(n("diaiajeedf")),a=n("ffjiicch"),o=r(n("ebhdfjjdeb")),u=n("dijiihaecd")},cahfddcdga:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t="?"){if(null==e)throw new Error("Unexpected null or undefined: ".concat(t));return e}},caiahabcfd:function(e,t,n){"use strict";var r=n("cfjecfhbfg");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("cgeeeeddea")),a=r(n("chejdieege")),o=n("bfagiaicdd");class u extends a.default{constructor(e){super(),this.name=e}validate(e){var t=e.columns.find(e=>e.name===this.name);(0,i.default)(t,'Attempted to remove column "'.concat(this.name,'" from "').concat(e.name,"\" but it doesn't exist")),(0,i.default)(!t.primaryKey,'Attempted to remove primary key column "'.concat(this.name,'". Removing primary keys is not supported.')),(0,i.default)(!e.indexes.some(e=>(0,o.indexContainsColumn)(e,this.name)),'Attempted to remove column "'.concat(this.name,'" from "').concat(e.name,'" but an index exists with the column'))}apply(e){var t=(0,o.cloneSchema)(e);return t.columns.splice(t.columns.findIndex(e=>e.name===this.name),1),t}}t.default=u},cbefiijcca:function(e,t,n){"use strict";var r=n("cfjecfhbfg");Object.defineProperty(t,"__esModule",{value:!0}),t.buildInvocationPayload=function({invocationId:e,method:t,args:n}){return{__id:e,__command:o.INVOCATION_COMMAND,__method:t,__args:n}},t.unwrapInvocationPayload=function(e){if(null!=e&&e.__command===o.INVOCATION_COMMAND){(0,i.default)(e.__id,"Invocation ID missing");var t=(0,a.extractInvocationId)(e.__id);(0,i.default)(null!=t&&e.__method&&"string"==typeof e.__method&&e.__id&&e.__args&&Array.isArray(e.__args),"Malformed invocation message");var n=e,r=n.__method,u=n.__args;return{method:r,args:u,invocationId:t}}};var i=r(n("cgeeeeddea")),a=n("cgcccbajji"),o=n("cggbhfdifh")},ccddaicfff:function(e,t,n){"use strict";n.r(t),function(e,n){var r=Object.keys,i=Array.isArray,a="undefined"!=typeof self?self:"undefined"!=typeof window?window:e;function o(e,t){return"object"!=typeof t||r(t).forEach((function(n){e[n]=t[n]})),e}var u=Object.getPrototypeOf,s={}.hasOwnProperty;function c(e,t){return s.call(e,t)}function l(e,t){"function"==typeof t&&(t=t(u(e))),r(t).forEach((function(n){d(e,n,t[n])}))}var f=Object.defineProperty;function d(e,t,n,r){f(e,t,o(n&&c(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function h(e){return{from:function(t){return e.prototype=Object.create(t.prototype),d(e.prototype,"constructor",e),{extend:l.bind(null,e.prototype)}}}}var v=Object.getOwnPropertyDescriptor;var p=[].slice;function m(e,t,n){return p.call(e,t,n)}function g(e,t){return t(e)}function y(e){if(!e)throw new Error("Assertion Failed")}function b(e){a.setImmediate?n(e):setTimeout(e,0)}function _(e,t){return e.reduce((function(e,n,r){var i=t(n,r);return i&&(e[i[0]]=i[1]),e}),{})}function w(e,t){return function(){try{e.apply(this,arguments)}catch(e){t(e)}}}function j(e,t,n){try{e.apply(null,n)}catch(e){t&&t(e)}}function E(e,t){if(c(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],r=0,i=t.length;r<i;++r){var a=E(e,t[r]);n.push(a)}return n}var o=t.indexOf(".");if(-1!==o){var u=e[t.substr(0,o)];return void 0===u?void 0:E(u,t.substr(o+1))}}function x(e,t,n){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){y("string"!=typeof n&&"length"in n);for(var r=0,i=t.length;r<i;++r)x(e,t[r],n[r])}else{var a=t.indexOf(".");if(-1!==a){var o=t.substr(0,a),u=t.substr(a+1);if(""===u)void 0===n?delete e[o]:e[o]=n;else{var s=e[o];s||(s=e[o]={}),x(s,u,n)}}else void 0===n?delete e[t]:e[t]=n}}function I(e){var t={};for(var n in e)c(e,n)&&(t[n]=e[n]);return t}var O=[].concat;function P(e){return O.apply([],e)}var A="Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer,DataView,Uint8ClampedArray,ImageData,Map,Set".split(",").concat(P([8,16,32,64].map((function(e){return["Int","Uint","Float"].map((function(t){return t+e+"Array"}))})))).filter((function(e){return a[e]})).map((function(e){return a[e]}));function S(e){if(!e||"object"!=typeof e)return e;var t;if(i(e)){t=[];for(var n=0,r=e.length;n<r;++n)t.push(S(e[n]))}else if(A.indexOf(e.constructor)>=0)t=e;else for(var a in t=e.constructor?Object.create(e.constructor.prototype):{},e)c(e,a)&&(t[a]=S(e[a]));return t}function T(e,t,n,i){return n=n||{},i=i||"",r(e).forEach((function(r){if(c(t,r)){var a=e[r],o=t[r];"object"==typeof a&&"object"==typeof o&&a&&o&&""+a.constructor==""+o.constructor?T(a,o,n,i+r+"."):a!==o&&(n[i+r]=t[r])}else n[i+r]=void 0})),r(t).forEach((function(r){c(e,r)||(n[i+r]=t[r])})),n}var M="undefined"!=typeof Symbol&&Symbol.iterator,k=M?function(e){var t;return null!=e&&(t=e[M])&&t.apply(e)}:function(){return null},C={};function R(e){var t,n,r,a;if(1===arguments.length){if(i(e))return e.slice();if(this===C&&"string"==typeof e)return[e];if(a=k(e)){for(n=[];!(r=a.next()).done;)n.push(r.value);return n}if(null==e)return[e];if("number"==typeof(t=e.length)){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var N="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function D(e,t){N=e,F=t}var F=function(){return!0},U=!new Error("").stack;function K(){if(U)try{throw K.arguments,new Error}catch(e){return e}return new Error}function B(e,t){var n=e.stack;return n?(t=t||0,0===n.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),n.split("\n").slice(t).filter(F).map((function(e){return"\n"+e})).join("")):""}var L=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Y=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(L),V={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};function z(e,t){this._e=K(),this.name=e,this.message=t}function H(e,t,n,r){this._e=K(),this.failures=t,this.failedKeys=r,this.successCount=n}function q(e,t){this._e=K(),this.name="BulkError",this.failures=t,this.message=function(e,t){return e+". Errors: "+t.map((function(e){return e.toString()})).filter((function(e,t,n){return n.indexOf(e)===t})).join("\n")}(e,t)}h(z).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+B(this._e,2))}},toString:function(){return this.name+": "+this.message}}),h(H).from(z),h(q).from(z);var W=Y.reduce((function(e,t){return e[t]=t+"Error",e}),{}),X=z,G=Y.reduce((function(e,t){var n=t+"Error";function r(e,r){this._e=K(),this.name=n,e?"string"==typeof e?(this.message=e,this.inner=r||null):"object"==typeof e&&(this.message=e.name+" "+e.message,this.inner=e):(this.message=V[t]||n,this.inner=null)}return h(r).from(X),e[t]=r,e}),{});G.Syntax=SyntaxError,G.Type=TypeError,G.Range=RangeError;var Q=L.reduce((function(e,t){return e[t+"Error"]=G[t],e}),{});var J=Y.reduce((function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=G[t]),e}),{});function Z(){}function $(e){return e}function ee(e,t){return null==e||e===$?t:function(n){return t(e(n))}}function te(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function ne(e,t){return e===Z?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?te(r,this.onsuccess):r),i&&(this.onerror=this.onerror?te(i,this.onerror):i),void 0!==a?a:n}}function re(e,t){return e===Z?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?te(n,this.onsuccess):n),r&&(this.onerror=this.onerror?te(r,this.onerror):r)}}function ie(e,t){return e===Z?t:function(n){var r=e.apply(this,arguments);o(n,r);var i=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var u=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?te(i,this.onsuccess):i),a&&(this.onerror=this.onerror?te(a,this.onerror):a),void 0===r?void 0===u?void 0:u:o(r,u)}}function ae(e,t){return e===Z?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function oe(e,t){return e===Z?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,i=arguments.length,a=new Array(i);i--;)a[i]=arguments[i];return n.then((function(){return t.apply(r,a)}))}return t.apply(this,arguments)}}J.ModifyError=H,J.DexieError=z,J.BulkError=q;var ue={},se=function(){try{return new Function("let F=async ()=>{},p=F();return [p,Object.getPrototypeOf(p),Promise.resolve(),F.constructor];")()}catch(t){var e=a.Promise;return e?[e.resolve(),e.prototype,e.resolve()]:[]}}(),ce=se[0],le=se[1],fe=se[2],de=le&&le.then,he=ce&&ce.constructor,ve=se[3],pe=!!fe,me=!1,ge=fe?function(){fe.then(Ke)}:a.setImmediate?n.bind(null,Ke):a.MutationObserver?function(){var e=document.createElement("div");new MutationObserver((function(){Ke(),e=null})).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(Ke,0)},ye=function(e,t){Pe.push([e,t]),_e&&(ge(),_e=!1)},be=!0,_e=!0,we=[],je=[],Ee=null,xe=$,Ie={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:st,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((function(e){try{st(e[0],e[1])}catch(e){}}))}},Oe=Ie,Pe=[],Ae=0,Se=[];function Te(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=Z,this._lib=!1;var t=this._PSD=Oe;if(N&&(this._stackHolder=K(),this._prev=null,this._numPrev=0),"function"!=typeof e){if(e!==ue)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Re(this,this._value))}this._state=null,this._value=null,++t.ref,Ce(this,e)}var Me={get:function(){var e=Oe,t=Ge;function n(n,r){var i=this,a=!e.global&&(e!==Oe||t!==Ge);a&&$e();var o=new Te((function(t,o){De(i,new ke(ot(n,e,a),ot(r,e,a),t,o,e))}));return N&&Ue(o,this),o}return n.prototype=ue,n},set:function(e){d(this,"then",e&&e.prototype===ue?Me:{get:function(){return e},set:Me.set})}};function ke(e,t,n,r,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=i}function Ce(e,t){try{t((function(t){if(null===e._state){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&Be();t&&"function"==typeof t.then?Ce(e,(function(e,n){t instanceof Te?t._then(e,n):t.then(e,n)})):(e._state=!0,e._value=t,Ne(e)),n&&Le()}}),Re.bind(null,e))}catch(t){Re(e,t)}}function Re(e,t){if(je.push(t),null===e._state){var n=e._lib&&Be();t=xe(t),e._state=!1,e._value=t,N&&null!==t&&"object"==typeof t&&!t._promise&&j((function(){var n=function e(t,n){var r;return v(t,n)||(r=u(t))&&e(r,n)}(t,"stack");t._promise=e,d(t,"stack",{get:function(){return me?n&&(n.get?n.get.apply(t):n.value):e.stack}})})),function(e){we.some((function(t){return t._value===e._value}))||we.push(e)}(e),Ne(e),n&&Le()}}function Ne(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)De(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),0===Ae&&(++Ae,ye((function(){0==--Ae&&Ye()}),[]))}function De(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Ae,ye(Fe,[n,e,t])}else e._listeners.push(t)}function Fe(e,t,n){try{Ee=t;var r,i=t._value;t._state?r=e(i):(je.length&&(je=[]),r=e(i),-1===je.indexOf(i)&&function(e){var t=we.length;for(;t;)if(we[--t]._value===e._value)return void we.splice(t,1)}(t)),n.resolve(r)}catch(e){n.reject(e)}finally{Ee=null,0==--Ae&&Ye(),--n.psd.ref||n.psd.finalize()}}function Ue(e,t){var n=t?t._numPrev+1:0;n<100&&(e._prev=t,e._numPrev=n)}function Ke(){Be()&&Le()}function Be(){var e=be;return be=!1,_e=!1,e}function Le(){var e,t,n;do{for(;Pe.length>0;)for(e=Pe,Pe=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(Pe.length>0);be=!0,_e=!0}function Ye(){var e=we;we=[],e.forEach((function(e){e._PSD.onunhandled.call(null,e._value,e)}));for(var t=Se.slice(0),n=t.length;n;)t[--n]()}function Ve(e){return new Te(ue,!1,e)}function ze(e,t){var n=Oe;return function(){var r=Be(),i=Oe;try{return rt(n,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{rt(i,!1),r&&Le()}}}l(Te.prototype,{then:Me,_then:function(e,t){De(this,new ke(null,null,e,t,Oe))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],n=arguments[1];return"function"==typeof t?this.then(null,(function(e){return e instanceof t?n(e):Ve(e)})):this.then(null,(function(e){return e&&e.name===t?n(e):Ve(e)}))},finally:function(e){return this.then((function(t){return e(),t}),(function(t){return e(),Ve(t)}))},stack:{get:function(){if(this._stack)return this._stack;try{me=!0;var e=function e(t,n,r){if(n.length===r)return n;var i="";if(!1===t._state){var a,o,u=t._value;null!=u?(a=u.name||"Error",o=u.message||u,i=B(u,0)):(a=u,o=""),n.push(a+(o?": "+o:"")+i)}N&&((i=B(t._stackHolder,2))&&-1===n.indexOf(i)&&n.push(i),t._prev&&e(t._prev,n,r));return n}(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=e),e}finally{me=!1}}},timeout:function(e,t){var n=this;return e<1/0?new Te((function(r,i){var a=setTimeout((function(){return i(new G.Timeout(t))}),e);n.then(r,i).finally(clearTimeout.bind(null,a))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&d(Te.prototype,Symbol.toStringTag,"Promise"),Ie.env=it(),l(Te,{all:function(){var e=R.apply(null,arguments).map(et);return new Te((function(t,n){0===e.length&&t([]);var r=e.length;e.forEach((function(i,a){return Te.resolve(i).then((function(n){e[a]=n,--r||t(e)}),n)}))}))},resolve:function(e){if(e instanceof Te)return e;if(e&&"function"==typeof e.then)return new Te((function(t,n){e.then(t,n)}));var t=new Te(ue,!0,e);return Ue(t,Ee),t},reject:Ve,race:function(){var e=R.apply(null,arguments).map(et);return new Te((function(t,n){e.map((function(e){return Te.resolve(e).then(t,n)}))}))},PSD:{get:function(){return Oe},set:function(e){return Oe=e}},newPSD:Je,usePSD:at,scheduler:{get:function(){return ye},set:function(e){ye=e}},rejectionMapper:{get:function(){return xe},set:function(e){xe=e}},follow:function(e,t){return new Te((function(n,r){return Je((function(t,n){var r=Oe;r.unhandleds=[],r.onunhandled=n,r.finalize=te((function(){var e=this;!function(e){Se.push((function t(){e(),Se.splice(Se.indexOf(t),1)})),++Ae,ye((function(){0==--Ae&&Ye()}),[])}((function(){0===e.unhandleds.length?t():n(e.unhandleds[0])}))}),r.finalize),e()}),t,n,r)}))}});var He={awaits:0,echoes:0,id:0},qe=0,We=[],Xe=0,Ge=0,Qe=0;function Je(e,t,n,r){var i=Oe,a=Object.create(i);a.parent=i,a.ref=0,a.global=!1,a.id=++Qe;var u=Ie.env;a.env=pe?{Promise:Te,PromiseProp:{value:Te,configurable:!0,writable:!0},all:Te.all,race:Te.race,resolve:Te.resolve,reject:Te.reject,nthen:ut(u.nthen,a),gthen:ut(u.gthen,a)}:{},t&&o(a,t),++i.ref,a.finalize=function(){--this.parent.ref||this.parent.finalize()};var s=at(a,e,n,r);return 0===a.ref&&a.finalize(),s}function Ze(){return He.id||(He.id=++qe),++He.awaits,He.echoes+=7,He.id}function $e(e){!He.awaits||e&&e!==He.id||(0==--He.awaits&&(He.id=0),He.echoes=7*He.awaits)}function et(e){return He.echoes&&e&&e.constructor===he?(Ze(),e.then((function(e){return $e(),e}),(function(e){return $e(),ct(e)}))):e}function tt(e){++Ge,He.echoes&&0!=--He.echoes||(He.echoes=He.id=0),We.push(Oe),rt(e,!0)}function nt(){var e=We[We.length-1];We.pop(),rt(e,!1)}function rt(e,t){var n,r=Oe;if((t?!He.echoes||Xe++&&e===Oe:!Xe||--Xe&&e===Oe)||(n=t?tt.bind(null,e):nt,de.call(ce,n)),e!==Oe&&(Oe=e,r===Ie&&(Ie.env=it()),pe)){var i=Ie.env.Promise,o=e.env;le.then=o.nthen,i.prototype.then=o.gthen,(r.global||e.global)&&(Object.defineProperty(a,"Promise",o.PromiseProp),i.all=o.all,i.race=o.race,i.resolve=o.resolve,i.reject=o.reject)}}function it(){var e=a.Promise;return pe?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(a,"Promise"),all:e.all,race:e.race,resolve:e.resolve,reject:e.reject,nthen:le.then,gthen:e.prototype.then}:{}}function at(e,t,n,r,i){var a=Oe;try{return rt(e,!0),t(n,r,i)}finally{rt(a,!1)}}function ot(e,t,n){return"function"!=typeof e?e:function(){var r=Oe;n&&Ze(),rt(t,!0);try{return e.apply(this,arguments)}finally{rt(r,!1)}}}function ut(e,t){return function(n,r){return e.call(this,ot(n,t,!1),ot(r,t,!1))}}function st(e,t){var n;try{n=t.onuncatched(e)}catch(e){}if(!1!==n)try{var r,i={promise:t,reason:e};if(a.document&&document.createEvent?((r=document.createEvent("Event")).initEvent("unhandledrejection",!0,!0),o(r,i)):a.CustomEvent&&o(r=new CustomEvent("unhandledrejection",{detail:i}),i),r&&a.dispatchEvent&&(dispatchEvent(r),!a.PromiseRejectionEvent&&a.onunhandledrejection))try{a.onunhandledrejection(r)}catch(e){}r.defaultPrevented||console.warn("Unhandled rejection: "+(e.stack||e))}catch(e){}}var ct=Te.reject;function lt(e){var t={},n=function(n,r){if(r){for(var i=arguments.length,a=new Array(i-1);--i;)a[i-1]=arguments[i];return t[n].subscribe.apply(null,a),e}if("string"==typeof n)return t[n]};n.addEventType=u;for(var a=1,o=arguments.length;a<o;++a)u(arguments[a]);return n;function u(e,r,i){if("object"==typeof e)return s(e);r||(r=ae),i||(i=Z);var a={subscribers:[],fire:i,subscribe:function(e){-1===a.subscribers.indexOf(e)&&(a.subscribers.push(e),a.fire=r(a.fire,e))},unsubscribe:function(e){a.subscribers=a.subscribers.filter((function(t){return t!==e})),a.fire=a.subscribers.reduce(r,i)}};return t[e]=n[e]=a,a}function s(e){r(e).forEach((function(t){var n=e[t];if(i(n))u(t,e[t][0],e[t][1]);else{if("asap"!==n)throw new G.InvalidArgument("Invalid event config");var r=u(t,$,(function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];r.subscribers.forEach((function(e){b((function(){e.apply(null,t)}))}))}))}}))}}var ft,dt=String.fromCharCode(65535),ht=function(){try{return IDBKeyRange.only([[]]),[[]]}catch(e){return dt}}(),vt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",pt=[],mt="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),gt=mt,yt=mt,bt=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)};function _t(e,t){var n,u,s,f,h,v=_t.dependencies,p=o({addons:_t.addons,autoOpen:!0,indexedDB:v.indexedDB,IDBKeyRange:v.IDBKeyRange},t),b=p.addons,O=p.autoOpen,A=p.indexedDB,M=p.IDBKeyRange,k=this._dbSchema={},D=[],F=[],U={},L=null,Y=null,V=!1,z=null,W=!1,X="readwrite",Q=this,J=new Te((function(e){n=e})),te=new Te((function(e,t){u=t})),ae=!0,ue=!!Mt(A);function se(e){this._cfg={version:e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null},this.stores({})}function ce(e,t,n){var i=Q._createTransaction(X,F,k);i.create(t),i._completion.catch(n);var a=i._reject.bind(i);Je((function(){Oe.trans=i,0===e?(r(k).forEach((function(e){le(t,e,k[e].primKey,k[e].indexes)})),Te.follow((function(){return Q.on.populate.fire(i)})).catch(a)):function(e,t,n){var i=[],a=D.filter((function(t){return t._cfg.version===e}))[0];if(!a)throw new G.Upgrade("Dexie specification of currently installed DB version is missing");k=Q._dbSchema=a._cfg.dbschema;var o=!1;function u(){return i.length?Te.resolve(i.shift()(t.idbtrans)).then(u):Te.resolve()}return D.filter((function(t){return t._cfg.version>e})).forEach((function(e){i.push((function(){var r=k,i=e._cfg.dbschema;Re(r,n),Re(i,n),k=Q._dbSchema=i;var a=function(e,t){var n={del:[],add:[],change:[]};for(var r in e)t[r]||n.del.push(r);for(r in t){var i=e[r],a=t[r];if(i){var o={name:r,def:a,recreate:!1,del:[],add:[],change:[]};if(i.primKey.src!==a.primKey.src)o.recreate=!0,n.change.push(o);else{var u=i.idxByName,s=a.idxByName;for(var c in u)s[c]||o.del.push(c);for(c in s){var l=u[c],f=s[c];l?l.src!==f.src&&o.change.push(f):o.add.push(f)}(o.del.length>0||o.add.length>0||o.change.length>0)&&n.change.push(o)}}else n.add.push([r,a])}return n}(r,i);if(a.add.forEach((function(e){le(n,e[0],e[1].primKey,e[1].indexes)})),a.change.forEach((function(e){if(e.recreate)throw new G.Upgrade("Not yet support for changing primary key");var t=n.objectStore(e.name);e.add.forEach((function(e){fe(t,e)})),e.change.forEach((function(e){t.deleteIndex(e.name),fe(t,e)})),e.del.forEach((function(e){t.deleteIndex(e)}))})),e._cfg.contentUpgrade)return o=!0,Te.follow((function(){e._cfg.contentUpgrade(t)}))})),i.push((function(t){o&&gt||function(e,t){for(var n=0;n<t.db.objectStoreNames.length;++n){var r=t.db.objectStoreNames[n];null==e[r]&&t.db.deleteObjectStore(r)}}(e._cfg.dbschema,t)}))})),u().then((function(){!function(e,t){r(e).forEach((function(n){t.db.objectStoreNames.contains(n)||le(t,n,e[n].primKey,e[n].indexes)}))}(k,n)}))}(e,i,t).catch(a)}))}function le(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach((function(e){fe(i,e)})),i}function fe(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function de(e,t,n){var r=arguments.length;if(r<2)throw new G.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var a=P(i);return[e,a,n]}function pe(e,t,n){this.name=e,this.schema=t,this._tx=n,this.hook=U[e]?U[e].hook:lt(null,{creating:[ne,Z],reading:[ee,$],updating:[ie,Z],deleting:[re,Z]})}function me(e,t,n){return(n?It:Et)((function(n){e.push(n),t&&t()}))}function ge(e,t,n,r,i){return new Te((function(a,o){var u=n.length,s=u-1;if(0===u)return a();if(r){var c,l=It(o),f=jt(null);j((function(){for(var r=0;r<u;++r){c={onsuccess:null,onerror:null};var o=n[r];i.call(c,o[0],o[1],t);var d=e.delete(o[0]);d._hookCtx=c,d.onerror=l,d.onsuccess=r===s?jt(a):f}}),(function(e){throw c.onerror&&c.onerror(e),e}))}else for(var d=0;d<u;++d){var h=e.delete(n[d]);h.onerror=Et(o),d===s&&(h.onsuccess=ze((function(){return a()})))}}))}function ye(e,t,n,r){var i=this;this.db=Q,this.mode=e,this.storeNames=t,this.idbtrans=null,this.on=lt(this,"complete","error","abort"),this.parent=r||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Te((function(e,t){i._resolve=e,i._reject=t})),this._completion.then((function(){i.active=!1,i.on.complete.fire()}),(function(e){var t=i.active;return i.active=!1,i.on.error.fire(e),i.parent?i.parent._reject(e):t&&i.idbtrans&&i.idbtrans.abort(),ct(e)}))}function be(e,t,n){this._ctx={table:e,index:":id"===t?null:t,or:n}}function _e(e,t){var n=null,r=null;if(t)try{n=t()}catch(e){r=e}var i=e._ctx,a=i.table;this._ctx={table:a,index:i.index,isPrimKey:!i.index||a.schema.primKey.keyPath&&i.index===a.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:i.or,valueMapper:a.hook.reading.fire}}function we(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function je(e,t){return e._cfg.version-t._cfg.version}function Ee(e,t,n){t.forEach((function(t){var r=n[t];e.forEach((function(e){t in e||(e===ye.prototype||e instanceof ye?d(e,t,{get:function(){return this.table(t)}}):e[t]=new pe(t,r))}))}))}function xe(e,t,n,r,i,a){var o=ze(a?function(e,t,r){return n(a(e),t,r)}:n,i);e.onerror||(e.onerror=Et(i)),e.onsuccess=w(t?function(){var n=e.result;if(n){var a=function(){n.continue()};t(n,(function(e){a=e}),r,i)&&o(n.value,n,(function(e){a=e})),a()}else r()}:function(){var t=e.result;if(t){var n=function(){t.continue()};o(t.value,t,(function(e){n=e})),n()}else r()},i)}function Ie(e,t){return A.cmp(e,t)}function Pe(e,t){return Ie(e,t)>0?e:t}function Ae(e,t){return A.cmp(e,t)}function Se(e,t){return A.cmp(t,e)}function Me(e,t){return e<t?-1:e===t?0:1}function ke(e,t){return e>t?-1:e===t?0:1}function Ce(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}function Re(e,t){for(var n=t.db.objectStoreNames,r=0;r<n.length;++r){var i=n[r],o=t.objectStore(i);s="getAll"in o;for(var u=0;u<o.indexNames.length;++u){var c=o.indexNames[u],l=o.index(c).keyPath,f="string"==typeof l?l:"["+m(l).join("+")+"]";if(e[i]){var d=e[i].idxByName[f];d&&(d.name=c)}}}/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&a.WorkerGlobalScope&&a instanceof a.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(s=!1)}function Ne(e){Q.on("blocked").fire(e),pt.filter((function(e){return e.name===Q.name&&e!==Q&&!e._vcFired})).map((function(t){return t.on("versionchange").fire(e)}))}this.version=function(e){if(L||V)throw new G.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=D.filter((function(t){return t._cfg.version===e}))[0];return t||(t=new se(e),D.push(t),D.sort(je),ae=!1,t)},o(se.prototype,{stores:function(e){this._cfg.storesSource=this._cfg.storesSource?o(this._cfg.storesSource,e):e;var t={};D.forEach((function(e){o(t,e._cfg.storesSource)}));var n=this._cfg.dbschema={};return this._parseStoresSpec(t,n),k=Q._dbSchema=n,[U,Q,ye.prototype].forEach((function(e){for(var t in e)e[t]instanceof pe&&delete e[t]})),Ee([U,Q,ye.prototype,this._cfg.tables],r(n),n),F=r(n),this},upgrade:function(e){return this._cfg.contentUpgrade=e,this},_parseStoresSpec:function(e,t){r(e).forEach((function(n){if(null!==e[n]){var r={},a=function(e){var t=[];return e.split(",").forEach((function(e){var n=(e=e.trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;t.push(new At(n,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),i(r),/\./.test(e)))})),t}(e[n]),o=a.shift();if(o.multi)throw new G.Schema("Primary key cannot be multi-valued");o.keyPath&&x(r,o.keyPath,o.auto?0:o.keyPath),a.forEach((function(e){if(e.auto)throw new G.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new G.Schema("Index must have a name and cannot be an empty string");x(r,e.keyPath,e.compound?e.keyPath.map((function(){return""})):"")})),t[n]=new St(n,o,a,r)}}))}}),this._allTables=U,this._createTransaction=function(e,t,n,r){return new ye(e,t,n,r)},this._whenReady=function(e){return W||Oe.letThrough?e():new Te((function(e,t){if(!V){if(!O)return void t(new G.DatabaseClosed);Q.open().catch(Z)}J.then(e,t)})).then(e)},this.verno=0,this.open=function(){if(V||L)return J.then((function(){return Y?ct(Y):Q}));N&&(te._stackHolder=K()),V=!0,Y=null,W=!1;var t=n,i=null;return Te.race([te,new Te((function(t,n){if(!A)throw new G.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var a=ae?A.open(e):A.open(e,Math.round(10*Q.verno));if(!a)throw new G.MissingAPI("IndexedDB API not available");a.onerror=Et(n),a.onblocked=ze(Ne),a.onupgradeneeded=ze((function(t){if(i=a.transaction,ae&&!Q._allowEmptyDB){a.onerror=Ot,i.abort(),a.result.close();var r=A.deleteDatabase(e);r.onsuccess=r.onerror=ze((function(){n(new G.NoSuchDatabase("Database "+e+" doesnt exist"))}))}else{i.onerror=Et(n),ce((t.oldVersion>Math.pow(2,62)?0:t.oldVersion)/10,i,n)}}),n),a.onsuccess=ze((function(){if(i=null,L=a.result,pt.push(Q),ae)!function(){if(Q.verno=L.version/10,Q._dbSchema=k={},0===(F=m(L.objectStoreNames,0)).length)return;var e=L.transaction(Tt(F),"readonly");F.forEach((function(t){for(var n=e.objectStore(t),r=n.keyPath,i=r&&"string"==typeof r&&-1!==r.indexOf("."),a=new At(r,r||"",!1,!1,!!n.autoIncrement,r&&"string"!=typeof r,i),o=[],u=0;u<n.indexNames.length;++u){var s=n.index(n.indexNames[u]);i=(r=s.keyPath)&&"string"==typeof r&&-1!==r.indexOf(".");var c=new At(s.name,r,!!s.unique,!!s.multiEntry,!1,r&&"string"!=typeof r,i);o.push(c)}k[t]=new St(t,a,o,{})})),Ee([U],r(k),k)}();else if(L.objectStoreNames.length>0)try{Re(k,L.transaction(Tt(L.objectStoreNames),"readonly"))}catch(e){}L.onversionchange=ze((function(e){Q._vcFired=!0,Q.on("versionchange").fire(e)})),ue||"__dbnames"===e||ft.dbnames.put({name:e}).catch(Z),t()}),n)}))]).then((function(){return z=[],Te.resolve(_t.vip(Q.on.ready.fire)).then((function e(){if(z.length>0){var t=z.reduce(oe,Z);return z=[],Te.resolve(_t.vip(t)).then(e)}}))})).finally((function(){z=null})).then((function(){return V=!1,Q})).catch((function(e){try{i&&i.abort()}catch(e){}return V=!1,Q.close(),ct(Y=e)})).finally((function(){W=!0,t()}))},this.close=function(){var e=pt.indexOf(Q);if(e>=0&&pt.splice(e,1),L){try{L.close()}catch(e){}L=null}O=!1,Y=new G.DatabaseClosed,V&&u(Y),J=new Te((function(e){n=e})),te=new Te((function(e,t){u=t}))},this.delete=function(){var t=arguments.length>0;return new Te((function(n,r){if(t)throw new G.InvalidArgument("Arguments not allowed in db.delete()");function i(){Q.close();var t=A.deleteDatabase(e);t.onsuccess=ze((function(){ue||ft.dbnames.delete(e).catch(Z),n()})),t.onerror=Et(r),t.onblocked=Ne}V?J.then(i):i()}))},this.backendDB=function(){return L},this.isOpen=function(){return null!==L},this.hasBeenClosed=function(){return Y&&Y instanceof G.DatabaseClosed},this.hasFailed=function(){return null!==Y},this.dynamicallyOpened=function(){return ae},this.name=e,l(this,{tables:{get:function(){return r(U).map((function(e){return U[e]}))}}}),this.on=lt(this,"populate","blocked","versionchange",{ready:[oe,Z]}),this.on.ready.subscribe=g(this.on.ready.subscribe,(function(e){return function(t,n){_t.vip((function(){W?(Y||Te.resolve().then(t),n&&e(t)):z?(z.push(t),n&&e(t)):(e(t),n||e((function e(){Q.on.ready.unsubscribe(t),Q.on.ready.unsubscribe(e)})))}))}})),this.transaction=function(){var e=de.apply(this,arguments);return this._transaction.apply(this,e)},this._transaction=function(e,t,n){var r=Oe.trans;r&&r.db===Q&&-1===e.indexOf("!")||(r=null);var i=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{var a=t.map((function(e){var t=e instanceof pe?e.name:e;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t}));if("r"==e||"readonly"==e)e="readonly";else{if("rw"!=e&&e!=X)throw new G.InvalidArgument("Invalid transaction mode: "+e);e=X}if(r){if("readonly"===r.mode&&e===X){if(!i)throw new G.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");r=null}r&&a.forEach((function(e){if(r&&-1===r.storeNames.indexOf(e)){if(!i)throw new G.SubTransaction("Table "+e+" not included in parent transaction.");r=null}})),i&&r&&!r.active&&(r=null)}}catch(e){return r?r._promise(null,(function(t,n){n(e)})):ct(e)}return r?r._promise(e,o,"lock"):Oe.trans?at(Oe.transless,(function(){return Q._whenReady(o)})):Q._whenReady(o);function o(){return Te.resolve().then((function(){var t,i=Oe.transless||Oe,o=Q._createTransaction(e,a,k,r),u={trans:o,transless:i};r?o.idbtrans=r.idbtrans:o.create(),n.constructor===ve&&Ze();var s=Te.follow((function(){if(t=n.call(o,o))if(t.constructor===he){var e=$e.bind(null,null);t.then(e,e)}else"function"==typeof t.next&&"function"==typeof t.throw&&(t=Pt(t))}),u);return(t&&"function"==typeof t.then?Te.resolve(t).then((function(e){return o.active?e:ct(new G.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))})):s.then((function(){return t}))).then((function(e){return r&&o._resolve(),o._completion.then((function(){return e}))})).catch((function(e){return o._reject(e),ct(e)}))}))}},this.table=function(e){if(!c(U,e))throw new G.InvalidTable("Table "+e+" does not exist");return U[e]},l(pe.prototype,{_trans:function(e,t,n){var r=this._tx||Oe.trans;return r&&r.db===Q?r===Oe.trans?r._promise(e,t,n):Je((function(){return r._promise(e,t,n)}),{trans:r,transless:Oe.transless||Oe}):function e(t,n,r){if(W||Oe.letThrough){var i=Q._createTransaction(t,n,k);try{i.create()}catch(e){return ct(e)}return i._promise(t,(function(e,t){return Je((function(){return Oe.trans=i,r(e,t,i)}))})).then((function(e){return i._completion.then((function(){return e}))}))}if(!V){if(!O)return ct(new G.DatabaseClosed);Q.open().catch(Z)}return J.then((function(){return e(t,n,r)}))}(e,[this.name],t)},_idbstore:function(e,t,n){var r=this.name;return this._trans(e,(function(e,n,i){if(-1===i.storeNames.indexOf(r))throw new G.NotFound("Table"+r+" not part of transaction");return t(e,n,i.idbtrans.objectStore(r),i)}),n)},get:function(e,t){if(e&&e.constructor===Object)return this.where(e).first(t);var n=this;return this._idbstore("readonly",(function(t,r,i){var a=i.get(e);a.onerror=Et(r),a.onsuccess=ze((function(){t(n.hook.reading.fire(a.result))}),r)})).then(t)},where:function(e){if("string"==typeof e)return new be(this,e);if(i(e))return new be(this,"["+e.join("+")+"]");var t=r(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter((function(e){return e.compound&&t.every((function(t){return e.keyPath.indexOf(t)>=0}))&&e.keyPath.every((function(e){return t.indexOf(e)>=0}))}))[0];if(n&&ht!==dt)return this.where(n.name).equals(n.keyPath.map((function(t){return e[t]})));n||console.warn("The query "+JSON.stringify(e)+" on "+this.name+" would benefit of a compound index ["+t.join("+")+"]");var a=this.schema.idxByName,o=t.reduce((function(t,n){return[t[0]||a[n],t[0]||!a[n]?Ce(t[1],(function(t){return""+E(t,n)==""+e[n]})):t[1]]}),[null,null]),u=o[0];return u?this.where(u.name).equals(e[u.keyPath]).filter(o[1]):n?this.filter(o[1]):this.where(t).equals("")},count:function(e){return this.toCollection().count(e)},offset:function(e){return this.toCollection().offset(e)},limit:function(e){return this.toCollection().limit(e)},reverse:function(){return this.toCollection().reverse()},filter:function(e){return this.toCollection().and(e)},each:function(e){return this.toCollection().each(e)},toArray:function(e){return this.toCollection().toArray(e)},orderBy:function(e){return new _e(new be(this,i(e)?"["+e.join("+")+"]":e))},toCollection:function(){return new _e(new be(this))},mapToClass:function(e,t){this.schema.mappedClass=e;var n=Object.create(e.prototype);t&&wt(n,t),this.schema.instanceTemplate=n;var r=function(t){if(!t)return t;var n=Object.create(e.prototype);for(var r in t)if(c(t,r))try{n[r]=t[r]}catch(e){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=r,this.hook("reading",r),e},defineClass:function(e){return this.mapToClass(_t.defineClass(e),e)},bulkDelete:function(e){return this.hook.deleting.fire===Z?this._idbstore(X,(function(t,n,r,i){t(ge(r,i,e,!1,Z))})):this.where(":id").anyOf(e).delete().then((function(){}))},bulkPut:function(e,t){var n=this;return this._idbstore(X,(function(r,i,a){if(!a.keyPath&&!n.schema.primKey.auto&&!t)throw new G.InvalidArgument("bulkPut() with non-inbound keys requires keys array in second argument");if(a.keyPath&&t)throw new G.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(t&&t.length!==e.length)throw new G.InvalidArgument("Arguments objects and keys must have the same length");if(0===e.length)return r();var o,u,s=function(e){0===c.length?r(e):i(new q(n.name+".bulkPut(): "+c.length+" of "+l+" operations failed",c))},c=[],l=e.length,f=n;if(n.hook.creating.fire===Z&&n.hook.updating.fire===Z){u=me(c);for(var d=0,h=e.length;d<h;++d)(o=t?a.put(e[d],t[d]):a.put(e[d])).onerror=u;o.onerror=me(c,s),o.onsuccess=xt(s)}else{var v=t||a.keyPath&&e.map((function(e){return E(e,a.keyPath)})),p=v&&_(v,(function(t,n){return null!=t&&[t,e[n]]}));(v?f.where(":id").anyOf(v.filter((function(e){return null!=e}))).modify((function(){this.value=p[this.primKey],p[this.primKey]=null})).catch(H,(function(e){c=e.failures})).then((function(){for(var n=[],r=t&&[],i=v.length-1;i>=0;--i){var a=v[i];(null==a||p[a])&&(n.push(e[i]),t&&r.push(a),null!=a&&(p[a]=null))}return n.reverse(),t&&r.reverse(),f.bulkAdd(n,r)})).then((function(e){var t=v[v.length-1];return null!=t?t:e})):f.bulkAdd(e)).then(s).catch(q,(function(e){c=c.concat(e.failures),s()})).catch(i)}}),"locked")},bulkAdd:function(e,t){var n=this,r=this.hook.creating.fire;return this._idbstore(X,(function(i,a,o,u){if(!o.keyPath&&!n.schema.primKey.auto&&!t)throw new G.InvalidArgument("bulkAdd() with non-inbound keys requires keys array in second argument");if(o.keyPath&&t)throw new G.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(t&&t.length!==e.length)throw new G.InvalidArgument("Arguments objects and keys must have the same length");if(0===e.length)return i();function s(e){0===d.length?i(e):a(new q(n.name+".bulkAdd(): "+d.length+" of "+h+" operations failed",d))}var c,l,f,d=[],h=e.length;if(r!==Z){var v,p=o.keyPath;l=me(d,null,!0),f=jt(null),j((function(){for(var n=0,i=e.length;n<i;++n){v={onerror:null,onsuccess:null};var a=t&&t[n],s=e[n],d=t?a:p?E(s,p):void 0,h=r.call(v,d,s,u);null==d&&null!=h&&(p?x(s=S(s),p,h):a=h),(c=null!=a?o.add(s,a):o.add(s))._hookCtx=v,n<i-1&&(c.onerror=l,v.onsuccess&&(c.onsuccess=f))}}),(function(e){throw v.onerror&&v.onerror(e),e})),c.onerror=me(d,s,!0),c.onsuccess=jt(s)}else{l=me(d);for(var m=0,g=e.length;m<g;++m)(c=t?o.add(e[m],t[m]):o.add(e[m])).onerror=l;c.onerror=me(d,s),c.onsuccess=xt(s)}}))},add:function(e,t){var n=this.hook.creating.fire;return this._idbstore(X,(function(r,i,a,o){var u={onsuccess:null,onerror:null};if(n!==Z){var s=null!=t?t:a.keyPath?E(e,a.keyPath):void 0,c=n.call(u,s,e,o);null==s&&null!=c&&(a.keyPath?x(e,a.keyPath,c):t=c)}try{var l=null!=t?a.add(e,t):a.add(e);l._hookCtx=u,l.onerror=It(i),l.onsuccess=jt((function(t){var n=a.keyPath;n&&x(e,n,t),r(t)}))}catch(e){throw u.onerror&&u.onerror(e),e}}))},put:function(e,t){var n=this,r=this.hook.creating.fire,i=this.hook.updating.fire;if(r!==Z||i!==Z){var a=this.schema.primKey.keyPath,o=void 0!==t?t:a&&E(e,a);return null==o?this.add(e):(e=S(e),this._trans(X,(function(){return n.where(":id").equals(o).modify((function(){this.value=e})).then((function(r){return 0===r?n.add(e,t):o}))}),"locked"))}return this._idbstore(X,(function(n,r,i){var a=void 0!==t?i.put(e,t):i.put(e);a.onerror=Et(r),a.onsuccess=ze((function(t){var r=i.keyPath;r&&x(e,r,t.target.result),n(a.result)}))}))},delete:function(e){return this.hook.deleting.subscribers.length?this.where(":id").equals(e).delete():this._idbstore(X,(function(t,n,r){var i=r.delete(e);i.onerror=Et(n),i.onsuccess=ze((function(){t(i.result)}))}))},clear:function(){return this.hook.deleting.subscribers.length?this.toCollection().delete():this._idbstore(X,(function(e,t,n){var r=n.clear();r.onerror=Et(t),r.onsuccess=ze((function(){e(r.result)}))}))},update:function(e,t){if("object"!=typeof t||i(t))throw new G.InvalidArgument("Modifications must be an object.");if("object"!=typeof e||i(e))return this.where(":id").equals(e).modify(t);r(t).forEach((function(n){x(e,n,t[n])}));var n=E(e,this.schema.primKey.keyPath);return void 0===n?ct(new G.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(n).modify(t)}}),l(ye.prototype,{_lock:function(){return y(!Oe.global),++this._reculock,1!==this._reculock||Oe.global||(Oe.lockOwnerFor=this),this},_unlock:function(){if(y(!Oe.global),0==--this._reculock)for(Oe.global||(Oe.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{at(e[1],e[0])}catch(e){}}return this},_locked:function(){return this._reculock&&Oe.lockOwnerFor!==this},create:function(e){var t=this;if(!this.mode)return this;if(y(!this.idbtrans),!e&&!L)switch(Y&&Y.name){case"DatabaseClosedError":throw new G.DatabaseClosed(Y);case"MissingAPIError":throw new G.MissingAPI(Y.message,Y);default:throw new G.OpenFailed(Y)}if(!this.active)throw new G.TransactionInactive;return y(null===this._completion._state),(e=this.idbtrans=e||L.transaction(Tt(this.storeNames),this.mode)).onerror=ze((function(n){Ot(n),t._reject(e.error)})),e.onabort=ze((function(n){Ot(n),t.active&&t._reject(new G.Abort(e.error)),t.active=!1,t.on("abort").fire(n)})),e.oncomplete=ze((function(){t.active=!1,t._resolve()})),this},_promise:function(e,t,n){var r=this;if(e===X&&this.mode!==X)return ct(new G.ReadOnly("Transaction is readonly"));if(!this.active)return ct(new G.TransactionInactive);if(this._locked())return new Te((function(i,a){r._blockedFuncs.push([function(){r._promise(e,t,n).then(i,a)},Oe])}));if(n)return Je((function(){var e=new Te((function(e,n){r._lock();var i=t(e,n,r);i&&i.then&&i.then(e,n)}));return e.finally((function(){return r._unlock()})),e._lib=!0,e}));var i=new Te((function(e,n){var i=t(e,n,r);i&&i.then&&i.then(e,n)}));return i._lib=!0,i},_root:function(){return this.parent?this.parent._root():this},waitFor:function(e){var t=this._root();if(e=Te.resolve(e),t._waitingFor)t._waitingFor=t._waitingFor.then((function(){return e}));else{t._waitingFor=e,t._waitingQueue=[];var n=t.idbtrans.objectStore(t.storeNames[0]);!function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(n.get(-1/0).onsuccess=e)}()}var r=t._waitingFor;return new Te((function(n,i){e.then((function(e){return t._waitingQueue.push(ze(n.bind(null,e)))}),(function(e){return t._waitingQueue.push(ze(i.bind(null,e)))})).finally((function(){t._waitingFor===r&&(t._waitingFor=null)}))}))},abort:function(){this.active&&this._reject(new G.Abort),this.active=!1},tables:{get:(f="Transaction.tables",h=function(){return U},function(){return console.warn(f+" is deprecated. See https://github.com/dfahlander/Dexie.js/wiki/Deprecations. "+B(K(),1)),h.apply(this,arguments)})},table:function(e){return new pe(e,Q.table(e).schema,this)}}),l(be.prototype,(function(){function e(e,t,n){var r=e instanceof be?new _e(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function t(e){return new _e(e,(function(){return M.only("")})).limit(0)}function n(e,t,n,r,i,a){for(var o=Math.min(e.length,r.length),u=-1,s=0;s<o;++s){var c=t[s];if(c!==r[s])return i(e[s],n[s])<0?e.substr(0,s)+n[s]+n.substr(s+1):i(e[s],r[s])<0?e.substr(0,s)+r[s]+n.substr(s+1):u>=0?e.substr(0,u)+t[u]+n.substr(u+1):null;i(e[s],c)<0&&(u=s)}return o<r.length&&"next"===a?e+n.substr(e.length):o<e.length&&"prev"===a?e.substr(0,n.length):u<0?null:e.substr(0,u)+r[u]+n.substr(u+1)}function r(t,r,i,a){var o,u,s,c,l,f,d,h=i.length;if(!i.every((function(e){return"string"==typeof e})))return e(t,"String expected.");function v(e){o=function(e){return"next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}(e),u=function(e){return"next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}(e),s="next"===e?Me:ke;var t=i.map((function(e){return{lower:u(e),upper:o(e)}})).sort((function(e,t){return s(e.lower,t.lower)}));c=t.map((function(e){return e.upper})),l=t.map((function(e){return e.lower})),f=e,d="next"===e?"":a}v("next");var p=new _e(t,(function(){return M.bound(c[0],l[h-1]+a)}));p._ondirectionchange=function(e){v(e)};var m=0;return p._addAlgorithm((function(e,t,i){var a=e.key;if("string"!=typeof a)return!1;var o=u(a);if(r(o,l,m))return!0;for(var v=null,p=m;p<h;++p){var g=n(a,o,c[p],l[p],s,f);null===g&&null===v?m=p+1:(null===v||s(v,g)>0)&&(v=g)}return t(null!==v?function(){e.continue(v+d)}:i),!1})),p}return{between:function(n,r,i,a){i=!1!==i,a=!0===a;try{return Ie(n,r)>0||0===Ie(n,r)&&(i||a)&&(!i||!a)?t(this):new _e(this,(function(){return M.bound(n,r,!i,!a)}))}catch(t){return e(this,vt)}},equals:function(e){return new _e(this,(function(){return M.only(e)}))},above:function(e){return new _e(this,(function(){return M.lowerBound(e,!0)}))},aboveOrEqual:function(e){return new _e(this,(function(){return M.lowerBound(e)}))},below:function(e){return new _e(this,(function(){return M.upperBound(e,!0)}))},belowOrEqual:function(e){return new _e(this,(function(){return M.upperBound(e)}))},startsWith:function(t){return"string"!=typeof t?e(this,"String expected."):this.between(t,t+dt,!0,!0)},startsWithIgnoreCase:function(e){return""===e?this.startsWith(e):r(this,(function(e,t){return 0===e.indexOf(t[0])}),[e],dt)},equalsIgnoreCase:function(e){return r(this,(function(e,t){return e===t[0]}),[e],"")},anyOfIgnoreCase:function(){var e=R.apply(C,arguments);return 0===e.length?t(this):r(this,(function(e,t){return-1!==t.indexOf(e)}),e,"")},startsWithAnyOfIgnoreCase:function(){var e=R.apply(C,arguments);return 0===e.length?t(this):r(this,(function(e,t){return t.some((function(t){return 0===e.indexOf(t)}))}),e,dt)},anyOf:function(){var n=R.apply(C,arguments),r=Ae;try{n.sort(r)}catch(t){return e(this,vt)}if(0===n.length)return t(this);var i=new _e(this,(function(){return M.bound(n[0],n[n.length-1])}));i._ondirectionchange=function(e){r="next"===e?Ae:Se,n.sort(r)};var a=0;return i._addAlgorithm((function(e,t,i){for(var o=e.key;r(o,n[a])>0;)if(++a===n.length)return t(i),!1;return 0===r(o,n[a])||(t((function(){e.continue(n[a])})),!1)})),i},notEqual:function(e){return this.inAnyRange([[-1/0,e],[e,ht]],{includeLowers:!1,includeUppers:!1})},noneOf:function(){var t=R.apply(C,arguments);if(0===t.length)return new _e(this);try{t.sort(Ae)}catch(t){return e(this,vt)}var n=t.reduce((function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[-1/0,t]]}),null);return n.push([t[t.length-1],ht]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},inAnyRange:function(n,r){if(0===n.length)return t(this);if(!n.every((function(e){return void 0!==e[0]&&void 0!==e[1]&&Ae(e[0],e[1])<=0})))return e(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",G.InvalidArgument);var i=!r||!1!==r.includeLowers,a=r&&!0===r.includeUppers;var o,u=Ae;function s(e,t){return u(e[0],t[0])}try{(o=n.reduce((function(e,t){for(var n=0,r=e.length;n<r;++n){var i=e[n];if(Ie(t[0],i[1])<0&&Ie(t[1],i[0])>0){i[0]=(a=i[0],o=t[0],Ie(a,o)<0?a:o),i[1]=Pe(i[1],t[1]);break}}var a,o;return n===r&&e.push(t),e}),[])).sort(s)}catch(t){return e(this,vt)}var c=0,l=a?function(e){return Ae(e,o[c][1])>0}:function(e){return Ae(e,o[c][1])>=0},f=i?function(e){return Se(e,o[c][0])>0}:function(e){return Se(e,o[c][0])>=0};var d=l,h=new _e(this,(function(){return M.bound(o[0][0],o[o.length-1][1],!i,!a)}));return h._ondirectionchange=function(e){"next"===e?(d=l,u=Ae):(d=f,u=Se),o.sort(s)},h._addAlgorithm((function(e,t,n){for(var r=e.key;d(r);)if(++c===o.length)return t(n),!1;return!!function(e){return!l(e)&&!f(e)}(r)||(0===Ie(r,o[c][1])||0===Ie(r,o[c][0])||t((function(){u===Ae?e.continue(o[c][0]):e.continue(o[c][1])})),!1)})),h},startsWithAnyOf:function(){var n=R.apply(C,arguments);return n.every((function(e){return"string"==typeof e}))?0===n.length?t(this):this.inAnyRange(n.map((function(e){return[e,e+dt]}))):e(this,"startsWithAnyOf() only works with strings")}}})),l(_e.prototype,(function(){function e(e,t){e.filter=Ce(e.filter,t)}function t(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return Ce(r(),t())}:t,e.justLimit=n&&!r}function n(e,t){if(e.isPrimKey)return t;var n=e.table.schema.idxByName[e.index];if(!n)throw new G.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return t.index(n.name)}function i(e,t){var r=n(e,t);return e.keysOnly&&"openKeyCursor"in r?r.openKeyCursor(e.range||null,e.dir+e.unique):r.openCursor(e.range||null,e.dir+e.unique)}function a(e,t,n,r,a){var o=e.replayFilter?Ce(e.filter,e.replayFilter()):e.filter;e.or?function(){var u={},s=0;function l(){2==++s&&n()}function f(e,n,i){if(!o||o(n,i,l,r)){var a=n.primaryKey,s=""+a;"[object ArrayBuffer]"===s&&(s=""+new Uint8Array(a)),c(u,s)||(u[s]=!0,t(e,n,i))}}e.or._iterate(f,l,r,a),xe(i(e,a),e.algorithm,f,l,r,!e.keysOnly&&e.valueMapper)}():xe(i(e,a),Ce(e.algorithm,o),t,n,r,!e.keysOnly&&e.valueMapper)}return{_read:function(e,t){var n=this._ctx;return n.error?n.table._trans(null,ct.bind(null,n.error)):n.table._idbstore("readonly",e).then(t)},_write:function(e){var t=this._ctx;return t.error?t.table._trans(null,ct.bind(null,t.error)):t.table._idbstore(X,e,"locked")},_addAlgorithm:function(e){var t=this._ctx;t.algorithm=Ce(t.algorithm,e)},_iterate:function(e,t,n,r){return a(this._ctx,e,t,n,r)},clone:function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&o(n,e),t._ctx=n,t},raw:function(){return this._ctx.valueMapper=null,this},each:function(e){var t=this._ctx;return this._read((function(n,r,i){a(t,e,n,r,i)}))},count:function(e){var t=this._ctx;if(we(t,!0))return this._read((function(e,r,i){var a=n(t,i),o=t.range?a.count(t.range):a.count();o.onerror=Et(r),o.onsuccess=function(n){e(Math.min(n.target.result,t.limit))}}),e);var r=0;return this._read((function(e,n,i){a(t,(function(){return++r,!1}),(function(){e(r)}),n,i)}),e)},sortBy:function(e,t){var n=e.split(".").reverse(),r=n[0],i=n.length-1;function a(e,t){return t?a(e[n[t]],t-1):e[r]}var o="next"===this._ctx.dir?1:-1;function u(e,t){var n=a(e,i),r=a(t,i);return n<r?-o:n>r?o:0}return this.toArray((function(e){return e.sort(u)})).then(t)},toArray:function(e){var t=this._ctx;return this._read((function(e,r,i){if(s&&"next"===t.dir&&we(t,!0)&&t.limit>0){var o=t.table.hook.reading.fire,u=n(t,i),c=t.limit<1/0?u.getAll(t.range,t.limit):u.getAll(t.range);c.onerror=Et(r),c.onsuccess=xt(o===$?e:function(t){try{e(t.map(o))}catch(e){r(e)}})}else{var l=[];a(t,(function(e){l.push(e)}),(function(){e(l)}),r,i)}}),e)},offset:function(e){var n=this._ctx;return e<=0||(n.offset+=e,we(n)?t(n,(function(){var t=e;return function(e,n){return 0===t||(1===t?(--t,!1):(n((function(){e.advance(t),t=0})),!1))}})):t(n,(function(){var t=e;return function(){return--t<0}}))),this},limit:function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),t(this._ctx,(function(){var t=e;return function(e,n,r){return--t<=0&&n(r),t>=0}}),!0),this},until:function(t,n){return e(this._ctx,(function(e,r,i){return!t(e.value)||(r(i),n)})),this},first:function(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)},last:function(e){return this.reverse().first(e)},filter:function(t){return e(this._ctx,(function(e){return t(e.value)})),function(e,t){e.isMatch=Ce(e.isMatch,t)}(this._ctx,t),this},and:function(e){return this.filter(e)},or:function(e){return new be(this._ctx.table,e,this)},reverse:function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},desc:function(){return this.reverse()},eachKey:function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.key,n)}))},eachUniqueKey:function(e){return this._ctx.unique="unique",this.eachKey(e)},eachPrimaryKey:function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.primaryKey,n)}))},keys:function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.key)})).then((function(){return n})).then(e)},primaryKeys:function(e){var t=this._ctx;if(s&&"next"===t.dir&&we(t,!0)&&t.limit>0)return this._read((function(e,r,i){var a=n(t,i),o=t.limit<1/0?a.getAllKeys(t.range,t.limit):a.getAllKeys(t.range);o.onerror=Et(r),o.onsuccess=xt(e)})).then(e);t.keysOnly=!t.isMatch;var r=[];return this.each((function(e,t){r.push(t.primaryKey)})).then((function(){return r})).then(e)},uniqueKeys:function(e){return this._ctx.unique="unique",this.keys(e)},firstKey:function(e){return this.limit(1).keys((function(e){return e[0]})).then(e)},lastKey:function(e){return this.reverse().firstKey(e)},distinct:function(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var r={};return e(this._ctx,(function(e){var t=e.primaryKey.toString(),n=c(r,t);return r[t]=!0,!n})),this},modify:function(e){var t=this,n=this._ctx.table.hook,i=n.updating.fire,a=n.deleting.fire;return this._write((function(n,u,s,l){var f;if("function"==typeof e)f=i===Z&&a===Z?e:function(t){var n=S(t);if(!1===e.call(this,t,this))return!1;if(c(this,"value")){var o=T(n,this.value),u=i.call(this,o,this.primKey,n,l);u&&(t=this.value,r(u).forEach((function(e){x(t,e,u[e])})))}else a.call(this,this.primKey,t,l)};else if(i===Z){var d=r(e),h=d.length;f=function(t){for(var n=!1,r=0;r<h;++r){var i=d[r],a=e[i];E(t,i)!==a&&(x(t,i,a),n=!0)}return n}}else{var v=e;e=I(v),f=function(t){var n=!1,a=i.call(this,e,this.primKey,S(t),l);return a&&o(e,a),r(e).forEach((function(r){var i=e[r];E(t,r)!==i&&(x(t,r,i),n=!0)})),a&&(e=I(v)),n}}var p=0,m=0,g=!1,y=[],b=[],_=null;function w(e){return e&&(y.push(e),b.push(_)),u(new H("Error modifying one or more objects",y,m,b))}function O(){g&&m+y.length===p&&(y.length>0?w():n(m))}t.clone().raw()._iterate((function(e,t){_=t.primaryKey;var n={primKey:t.primaryKey,value:e,onsuccess:null,onerror:null};function r(e){return y.push(e),b.push(n.primKey),O(),!0}if(!1!==f.call(n,e,n)){var i=!c(n,"value");++p,j((function(){var e=i?t.delete():t.update(n.value);e._hookCtx=n,e.onerror=It(r),e.onsuccess=jt((function(){++m,O()}))}),r)}else n.onsuccess&&n.onsuccess(n.value)}),(function(){g=!0,O()}),w,s)}))},delete:function(){var e=this,t=this._ctx,n=t.range,r=t.table.hook.deleting.fire,i=r!==Z;if(!i&&we(t)&&(t.isPrimKey&&!yt||!n))return this._write((function(e,t,r){var i=Et(t),a=n?r.count(n):r.count();a.onerror=i,a.onsuccess=function(){var o=a.result;j((function(){var t=n?r.delete(n):r.clear();t.onerror=i,t.onsuccess=function(){return e(o)}}),(function(e){return t(e)}))}}));var a=i?2e3:1e4;return this._write((function(n,o,u,s){var c=0,l=e.clone({keysOnly:!t.isMatch&&!i}).distinct().limit(a).raw(),f=[],d=function(){return l.each(i?function(e,t){f.push([t.primaryKey,t.value])}:function(e,t){f.push(t.primaryKey)}).then((function(){return i?f.sort((function(e,t){return Ae(e[0],t[0])})):f.sort(Ae),ge(u,s,f,i,r)})).then((function(){var e=f.length;return c+=e,f=[],e<a?c:d()}))};n(d())}))}}})),o(this,{Collection:_e,Table:pe,Transaction:ye,Version:se,WhereClause:be}),Q.on("versionchange",(function(e){e.newVersion>0?console.warn("Another connection wants to upgrade database '"+Q.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+Q.name+"'. Closing db now to resume the delete request."),Q.close()})),Q.on("blocked",(function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('"+Q.name+"') was blocked"):console.warn("Upgrade '"+Q.name+"' blocked by other connection holding version "+e.oldVersion/10)})),b.forEach((function(e){e(Q)}))}function wt(e,t){return r(t).forEach((function(n){var r=function e(t){if("function"==typeof t)return new t;if(i(t))return[e(t[0])];if(t&&"object"==typeof t){var n={};return wt(n,t),n}return t}(t[n]);e[n]=r})),e}function jt(e){return ze((function(t){var n=t.target,r=n._hookCtx,i=r.value||n.result,a=r&&r.onsuccess;a&&a(i),e&&e(i)}),e)}function Et(e){return ze((function(t){return Ot(t),e(t.target.error),!1}))}function xt(e){return ze((function(t){e(t.target.result)}))}function It(e){return ze((function(t){var n=t.target,r=n.error,i=n._hookCtx,a=i&&i.onerror;return a&&a(r),Ot(t),e(r),!1}))}function Ot(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}function Pt(e){var t=function(t){return e.next(t)},n=a(t),r=a((function(t){return e.throw(t)}));function a(e){return function(t){var a=e(t),o=a.value;return a.done?o:o&&"function"==typeof o.then?o.then(n,r):i(o)?Te.all(o).then(n,r):n(o)}}return a(t)()}function At(e,t,n,r,i,a,o){this.name=e,this.keyPath=t,this.unique=n,this.multi=r,this.auto=i,this.compound=a,this.dotted=o;var u="string"==typeof t?t:t&&"["+[].join.call(t,"+")+"]";this.src=(n?"&":"")+(r?"*":"")+(i?"++":"")+u}function St(e,t,n,r){this.name=e,this.primKey=t||new At,this.indexes=n||[new At],this.instanceTemplate=r,this.mappedClass=null,this.idxByName=_(n,(function(e){return[e.name,e]}))}function Tt(e){return 1===e.length?e[0]:e}function Mt(e){var t=e&&(e.getDatabaseNames||e.webkitGetDatabaseNames);return t&&t.bind(e)}D(N,bt),l(_t,J),l(_t,{delete:function(e){var t=new _t(e),n=t.delete();return n.onblocked=function(e){return t.on("blocked",e),this},n},exists:function(e){return new _t(e).open().then((function(e){return e.close(),!0})).catch(_t.NoSuchDatabaseError,(function(){return!1}))},getDatabaseNames:function(e){var t=Mt(_t.dependencies.indexedDB);return t?new Te((function(e,n){var r=t();r.onsuccess=function(t){e(m(t.target.result,0))},r.onerror=Et(n)})).then(e):ft.dbnames.toCollection().primaryKeys(e)},defineClass:function(){return function(e){e&&o(this,e)}},applyStructure:wt,ignoreTransaction:function(e){return Oe.trans?at(Oe.transless,e):e()},vip:function(e){return Je((function(){return Oe.letThrough=!0,e()}))},async:function(e){return function(){try{var t=Pt(e.apply(this,arguments));return t&&"function"==typeof t.then?t:Te.resolve(t)}catch(e){return ct(e)}}},spawn:function(e,t,n){try{var r=Pt(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:Te.resolve(r)}catch(e){return ct(e)}},currentTransaction:{get:function(){return Oe.trans||null}},waitFor:function(e,t){var n=Te.resolve("function"==typeof e?_t.ignoreTransaction(e):e).timeout(t||6e4);return Oe.trans?Oe.trans.waitFor(n):n},Promise:Te,debug:{get:function(){return N},set:function(e){D(e,"dexie"===e?function(){return!0}:bt)}},derive:h,extend:o,props:l,override:g,Events:lt,getByKeyPath:E,setByKeyPath:x,delByKeyPath:function(e,t){"string"==typeof t?x(e,t,void 0):"length"in t&&[].map.call(t,(function(t){x(e,t,void 0)}))},shallowClone:I,deepClone:S,getObjectDiff:T,asap:b,maxKey:ht,minKey:-1/0,addons:[],connections:pt,MultiModifyError:G.Modify,errnames:W,IndexSpec:At,TableSchema:St,dependencies:function(){try{return{indexedDB:a.indexedDB||a.mozIndexedDB||a.webkitIndexedDB||a.msIndexedDB,IDBKeyRange:a.IDBKeyRange||a.webkitIDBKeyRange}}catch(e){return{indexedDB:null,IDBKeyRange:null}}}(),semVer:"{version}",version:"{version}".split(".").map((function(e){return parseInt(e)})).reduce((function(e,t,n){return e+t/Math.pow(10,2*n)})),default:_t,Dexie:_t}),Te.rejectionMapper=function(e,t){if(!e||e instanceof z||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Q[e.name])return e;var n=new Q[e.name](t||e.message,e);return"stack"in e&&d(n,"stack",{get:function(){return this.inner.stack}}),n},(ft=new _t("__dbnames")).version(1).stores({dbnames:"name"}),function(){try{void 0!==typeof localStorage&&void 0!==a.document&&(JSON.parse(localStorage.getItem("Dexie.DatabaseNames")||"[]").forEach((function(e){return ft.dbnames.put({name:e}).catch(Z)})),localStorage.removeItem("Dexie.DatabaseNames"))}catch(e){}}(),t.default=_t}.call(this,n("bgdiiijdd"),n("bgjhiaabcf").setImmediate)},cdfdfciehj:function(e,t,n){var r=n("bhabhhjdch");function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},cdiffgjfcb:function(e,t,n){"use strict";var r=n("cfjecfhbfg");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.NotInitializedError=t.NoSuchTableError=t.NoSuchDatabaseError=t.NoFallbackError=t.DuplicateTableError=t.DuplicateDatabaseError=t.AlreadyInitializedError=void 0;var i=r(n("dhciggahgi")),a=r(n("dfagheagjg")),o=r(n("chcbgfgiji"));class u extends Error{}t.AlreadyInitializedError=u;class s extends Error{}t.DuplicateDatabaseError=s;class c extends Error{}t.DuplicateTableError=c;class l extends Error{}t.NoFallbackError=l;class f extends Error{}t.NoSuchDatabaseError=f;class d extends Error{}t.NoSuchTableError=d;class h extends Error{}t.NotInitializedError=h;t.default=class{constructor(e){this.tables=new Map,this.views=new Map,this.state=1,this.versions=new a.default,this._database=e}add(e){if(this.tables.has(e))throw new c('Table "'.concat(e,'" already added. Reuse the definition.'));var t=new o.default(e,this.versions);return this.tables.set(e,t),t}_getBackingDB(){return this._database}_unsafeGetOrCreateView(e){if(this.views.has(e))return this.views.get(e);var t=this._database.view(e.name,e.rowview,e.shouldEnablePropFilter);return this.views.set(e,t),t}_guardInitializedThunk(e){return()=>{if(3&this.state)throw new h("Storage must be initialized before accessing a table!");return e()}}table(e){var t=this.tables.get(e);if(!t)throw new d("Unknown table ".concat(e," requested, ensure table is defined!"));if(!this._getBackingDB())throw new f('Unable to find associated database with table "'.concat(e,'"'));return new i.default(this._guardInitializedThunk(()=>this._unsafeGetOrCreateView(t)))}lock(e,t){if(3&this.state)throw new h("Initialize storage before attempting to lock tables!");for(var n=0;n<e.length;++n)if(!this.tables.has(e[n]))throw new d('Requested lock of unknown table "'.concat(e[n],'"'));var r=e.map(e=>{var t=this.tables.get(e);if(t)return t;throw new d('Requested lock of unknown table "'.concat(e,'"'))}).map(e=>this._unsafeGetOrCreateView(e));return this._getBackingDB().transact(e,()=>t(r))}_getUpgraderForCurrentVersion(e,t){for(var n=0;n<e.length;n++)if(e[n].maxVersion===t){var r=e[n].upgraders.get(t);if(r)return{name:e[n].name,callback:r}}}initialize(){if(4&this.state)throw new u("Storage instance has already been initialized");return this.versions.validate(),(this._database?this._database.available():Promise.reject(new f('"'.concat(this._database.constructor.name,'" failed availability check!')))).then(()=>{var e=Array.from(this.tables.values()),t=this._getBackingDB();if(e&&t){var n=new Array(this.versions.max+1);return Promise.each(n,(n,r)=>{var i=r,a=e.map(e=>e.schema(i)).filter(Boolean);return t.initialize(r,a,this._getUpgraderForCurrentVersion(e,i))}).then(()=>t.open())}}).then(()=>this.state=4).then(()=>{})}purge(){return this.state=2,this.views=new Map,this._getBackingDB().reset().then(()=>{})}}},cdiijcehcb:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randomHex=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),a(t)},t.toHex=a,t.toLowerCaseHex=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(i[r>>4],i[15&r])}return String.fromCharCode.apply(String,t)},t.parseHex=function(e){var t=u(e);if(t.length%2!=0)throw new Error('parseHex given hex "'.concat(t,'" which is not a multiple of 8-bits.'));for(var n=new Uint8Array(t.length>>1),r=0,i=0;r<t.length;r+=2,i++)n[i]=o(t,r)<<4|o(t,r+1);return n.buffer},t.hexAt=o,t.hexOrThrow=u,t.bytesToBuffer=function(e){var t=e.buffer;return 0===e.byteOffset&&e.length===t.byteLength?t:t.slice(e.byteOffset,e.byteOffset+e.length)},t.bytesToDebugString=function(e){var t=!0,n=e.length;for(;t&&n;){var r=e[--n];t=32<=r&&r<127}return t?JSON.stringify(String.fromCharCode.apply(String,e)):a(e)},t.createHexLong=function(e,t=!1){var n=u(e);return function(e,t){if(e.length>t)throw new Error('"'.concat(e,'" is longer than ').concat(4*t," bits."))}(n,16),"".concat(t?"-":"","0x").concat(s(n,16))},t.createHexLongFrom32Bits=function(e,t,n=!1){var r=l(e),i=l(t);return"".concat(n?"-":"","0x").concat(r).concat(i)},t.hexLongToHex=function(e){return e.substring(e.indexOf("0x")+2)},t.hexLongIsNegative=c,t.negateHexLong=function(e){return c(e)?e.slice(1):"-"+e},t.HEX_LOWER=t.NUM_HEX_IN_LONG=void 0;t.NUM_HEX_IN_LONG=16;var r=[48,49,50,51,52,53,54,55,56,57,65,66,67,68,69,70],i=[48,49,50,51,52,53,54,55,56,57,97,98,99,100,101,102];function a(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];t.push(r[i>>4],r[15&i])}return String.fromCharCode.apply(String,t)}function o(e,t){var n=e.charCodeAt(t);return n<=57?n-48:n<=70?10+n-65:10+n-97}function u(e){if(/[^0-9a-fA-F]/.test(e))throw new Error('"'.concat(e,'" is not a valid hex'));return e}function s(e,t){for(var n=t-e.length,r=e,i=0;i<n;i++)r="0"+r;return r}function c(e){return"-"===e[0]}function l(e){if(e>4294967295||e<-4294967296)throw new Error("uint32ToLowerCaseHex given number over 32 bits");return s((e>=0?e:4294967296+e).toString(16),8)}t.HEX_LOWER=i},ceccbdjfci:function(e,t,n){"use strict";var r=n("cfjecfhbfg");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("cgeeeeddea")),a=r(n("chejdieege")),o=n("bfagiaicdd");class u extends a.default{constructor(e){super(),this.columns=[...e].sort()}validate(e){(0,i.default)(-1!==(0,o.findIndex)(e,this._getIndex()),"Attempted to remove non-existent index [".concat(String(this.columns),'] on "').concat(e.name,'"'))}apply(e){var t=(0,o.cloneSchema)(e),n=(0,o.findIndex)(e,this._getIndex());return t.indexes.splice(n,1),t}_getIndex(){return{type:o.INDEX_TYPE.COMPOSITE,columns:this.columns}}}t.default=u},cfagigdiib:function(e,t,n){"use strict";var r=n("cfjecfhbfg");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("cgeeeeddea")),a=r(n("ciefddeegi")),o=n("bfagiaicdd");class u extends a.default{validate(e){super.validate(e),(0,i.default)(this.columns&&this.columns.length>1,"Attempted to add composite primary key for only 1 column")}apply(e){var t=(0,o.cloneSchema)(e);return this.columns.forEach(e=>{t.columns.push({name:e,primaryKey:o.PRIMARY_KEY_TYPE.COMPOSITE})}),t}}t.default=u},cfaiaedcf:function(e,t,n){"use strict";var r=n("cfjecfhbfg");Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,s.getStorage)().add("pending-mutations").version((0,c.pendingMutationsCreateTable)(),[new o.default("id"),new i.default("collection"),new i.default("index"),new i.default("value"),new i.default("type"),new i.default("timestamp"),new a.default("collection"),new i.default("version")]).version((0,c.pendingMutationsAddIndexForIndex)(),[new a.default("index")]).version((0,c.pendingMutationsAddKeyId)(),[new i.default("_keyId")]).version((0,c.pendingMutationsAddMac)(),[new i.default("_indexMac"),new i.default("_valueMac")]).version((0,c.pendingMutationsRenameOperation)(),[new u.default("type"),new i.default("operation")]).view(e=>e)},t.getTable=function(){return(0,s.getStorage)().table("pending-mutations")};var i=r(n("diaiajeedf")),a=r(n("bhjiahgdac")),o=r(n("bfffgggjic")),u=r(n("caiahabcfd")),s=n("ffjiicch"),c=n("dijiihaecd")},cfjecfhbfg:function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},cgcccbajji:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.genInvocationId=function(){return r++},t.extractInvocationId=function(e){if(null!=e&&"number"==typeof e)return e};var r=1},cgeeeeddea:function(e,t,n){"use strict";e.exports=function(e,t,n,r,i,a,o,u){if(!e){var s;if(void 0===t)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,a,o,u],l=0;(s=new Error(t.replace(/%s/g,(function(){return c[l++]})))).name="Invariant Violation"}throw s.framesToPop=1,s}}},cggbhfdifh:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RESPONSE_COMMAND=t.INVOCATION_COMMAND=t.HANDSHAKE_COMMAND=void 0;t.HANDSHAKE_COMMAND="@@handshake";t.INVOCATION_COMMAND="@@invoke";t.RESPONSE_COMMAND="@@response"},chcbgfgiji:function(e,t,n){"use strict";var r=n("cfjecfhbfg");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("cdfdfciehj")),a=r(n("cgeeeeddea")),o=n("bfagiaicdd"),u=n("bjcfcciaea");function s(e){return e}t.default=class{constructor(e,t){this.maxVersion=-1,this.versions=new Map,this.upgraders=new Map,this.shouldEnablePropFilter=!0,this.name=e,this.versionManager=t}version(e,t,n){this.versionManager.claim(e),(0,a.default)(!this.versions.has(e),'Table "'.concat(this.name,'" already has version #').concat(+e," defined!")),(0,a.default)(e>this.maxVersion,"Versions for table ".concat(this.name," must be defined in order")),this.maxVersion=e;var r=this.schema(e)||(0,o.emptySchema)(this.name),i=(0,u.sortMutations)(t).reduce((e,t)=>(t.validate(e),t.apply(e)),(0,o.cloneSchema)(r));return this.versions.set(e,(0,o.freezeSchema)(i)),this.upgraders.set(e,n),this}delete(e){this.versionManager.claim(e),(0,a.default)(!this.versions.has(e),'Table "'.concat(this.name,'" already has version #').concat(+e," defined!")),(0,a.default)(e>this.maxVersion,"Versions for table ".concat(this.name," must be defined in order")),this.maxVersion=e;var t=this.schema(e)||(0,o.emptySchema)(this.name),n=(0,i.default)((0,i.default)({},t),{},{deleted:!0});return this.versions.set(e,(0,o.freezeSchema)(n)),this}view(e){return this.rowview=e,this}enablePropFilter(e){return this.shouldEnablePropFilter=e,this}schema(e){var t=this.versions.get(e);if(t)return t;var n=Array.from(this.versions.keys()).map(s).sort((e,t)=>e-t).filter(t=>t<e).pop();return n||0===n?this.versions.get(n)||(0,o.emptySchema)(this.name):null}}},chejdieege:function(e,t,n){"use strict";var r=n("cfjecfhbfg");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("cgeeeeddea"));t.default=class{constructor(){(0,i.default)("Mutation"!==this.constructor.name,"Cannot instantiate abstract class Mutation")}validate(){throw new Error("Subclasses of Mutaton must implement `validate`")}apply(){throw new Error("Subclasses of Mutaton must implement `apply`")}}},chjdedjjda:function(e,t,n){"use strict";var r=n("cfjecfhbfg");Object.defineProperty(t,"__esModule",{value:!0}),t.buildResponsePayload=function(e,t){return{__id:e,__command:o.RESPONSE_COMMAND,__result:t}},t.unwrapResponsePayload=function(e){if(null!=e&&e.__command===o.RESPONSE_COMMAND){(0,i.default)(null!=e.__id,"Invocation ID missing");var t=(0,a.extractInvocationId)(e.__id);return(0,i.default)(null!=t&&e.hasOwnProperty("__result"),"Malformed response message"),{result:e.__result,invocationId:t}}};var i=r(n("cgeeeeddea")),a=n("cgcccbajji"),o=n("cggbhfdifh")},ciefddeegi:function(e,t,n){"use strict";var r=n("cfjecfhbfg");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("cgeeeeddea")),a=r(n("chejdieege"));class o extends a.default{constructor(e){super(),(0,i.default)("AbstractPrimaryKey"!==this.constructor.name,"Cannot instantiate abstract class AbstractPrimaryKey"),Array.isArray(e)?this.columns=[...e]:this.columns=[e]}validate(e){(0,i.default)(0===e.columns.length,"Attempted to add primary key after other columns")}apply(){throw new Error("Subclass of `AbstractPrimaryKey` must implement `apply` method")}}t.default=o},cjhficgjgc:function(e,t,n){"use strict";var r=n("bfejgijfbh"),i=n("cfjecfhbfg");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return Promise.resolve(e)};i(n("cdfdfciehj")),n("bfefjaegfe"),n("dibgccbbif"),r(n("jfbhhdedh")),i(n("dfeaddeccc"))},dbeffhcjcb:function(e,t,n){"use strict";var r=n("bfejgijfbh");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n("cbefiijcca"),a=r(n("jfbhhdedh")),o=n("chjdedjjda");var u=new class{constructor(){this._onMessage=(e,t)=>{var n=t.data,r=(0,i.unwrapInvocationPayload)(n);if(null!=r){var{method:u,args:s,invocationId:c}=r;a.get()[u](...s).then(t=>{e.postMessage((0,o.buildResponsePayload)(c,t))})}}}respondTo(e){e.addEventListener("message",t=>this._onMessage(e,t)),e.start()}};t.default=u},dcafdgcbbh:function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,i="function"==typeof WeakMap?new WeakMap:new Map;function a(e){var t=i.get(e);if(void 0!==t)return t;var n=Object.getOwnPropertyNames(e),r=new Set(n.map(t=>e[t]));return i.set(e,r),r}var o=Object.freeze(Object.defineProperties(Object.create(null),{isValid:{value:function(e){return a(this).has(e)}},cast:{value:function(e){return this.isValid(e)?e:void 0}},members:{value:function(){return a(this).values()}}}));function u(e){var t=Object.create(o);for(var n in e)r.call(e,n)&&Object.defineProperty(t,n,{value:e[n]});return Object.freeze(t)}var s=Object.freeze(Object.defineProperties(Object.create(null),{isValid:{value:function(e){return"string"==typeof e&&r.call(this,e)}},cast:{value:o.cast},members:{value:function(){return Object.getOwnPropertyNames(this)}}}));u.Mirrored=function(e){for(var t=Object.create(s),n=0,r=e.length;n<r;++n)Object.defineProperty(t,e[n],{value:e[n]});return Object.freeze(t)},Object.freeze(u.Mirrored),e.exports=Object.freeze(u)},ddghcccjbh:function(e,t){var n,r,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function u(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var s,c=[],l=!1,f=-1;function d(){l&&s&&(l=!1,s.length?c=s.concat(c):f=-1,c.length&&h())}function h(){if(!l){var e=u(d);l=!0;for(var t=c.length;t;){for(s=c,c=[];++f<t;)s&&s[f].run();f=-1,t=c.length}s=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function v(e,t){this.fun=e,this.array=t}function p(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new v(e,t)),1!==c.length||l||u(h)},v.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=p,i.addListener=p,i.once=p,i.off=p,i.removeListener=p,i.removeAllListeners=p,i.emit=p,i.prependListener=p,i.prependOnceListener=p,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},deaafaigjj:function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=n=function(e){return typeof e}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n},dfadhaifh:function(e,t){e.exports=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}},dfagheagjg:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MissingVersionError=t.InvalidVersionError=t.DuplicateVersionError=void 0;class r extends Error{}t.DuplicateVersionError=r;class i extends Error{}t.InvalidVersionError=i;class a extends Error{}t.MissingVersionError=a;t.default=class{constructor(){this.versions=new Set,this._max=-1}claim(e){if(e<0)throw new i("Versions must by greater than or equal to zero!");if(this.versions.has(e))throw new r("Version #".concat(e," has already been claimed!"));this.versions.add(e),this._max=Math.max(this.max,e)}version(e){if(e<0)throw new i("Versions must by greater than or equal to zero!");return e}validate(){for(var e=0;e<=this.max;++e)if(!this.versions.has(e))throw new a("Schema version #".concat(e," is missing!"))}get max(){return this._max}}},dfbiiieiig:function(e,t,n){"use strict";var r=n("cfjecfhbfg");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("cgeeeeddea")),a=r(n("chejdieege")),o=n("bfagiaicdd");class u extends a.default{constructor(e){super(),this.column=e}validate(e){(0,i.default)(-1!==(0,o.findIndex)(e,this._getIndex()),'Attempted to remove non-existent index "'.concat(this.column,'" on "').concat(e.name,'"'))}apply(e){var t=(0,o.cloneSchema)(e),n=(0,o.findIndex)(e,this._getIndex());return t.indexes.splice(n,1),t}_getIndex(){return{type:o.INDEX_TYPE.SIMPLE,column:this.column}}}t.default=u},dfeaddeccc:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=self.crypto,i=r&&(r.subtle||r.webkitSubtle||r.subtle);t.default=i},dgcdhiachd:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseQueueMap=t.PromiseQueue=void 0;t.PromiseQueue=class{constructor(e=-1){this._promise=Promise.resolve(),this._maxDelay=e}wait(){return this._promise}enqueueHandlers(e,t,n){var i=this._promise.then(()=>e).then(t,n),a=i.then();return this._promise=r(i,this._maxDelay),a}enqueue(e){var t=this._promise.then(e),n=t.then();return this._promise=r(t,this._maxDelay),n}};function r(e,t){return t>=0?new Promise(n=>{var r=()=>{n()};e.then(r,r),setTimeout(r,t)}):e.then(i,i)}function i(){}t.PromiseQueueMap=class{constructor(e=-1){this._map=new Map,this._maxDelay=e}waitIfPending(e){return this._map.get(e)}wait(e){return this._map.get(e)||Promise.resolve()}enqueueHandlers(e,t,n,r){var i=this.wait(e).then(()=>t).then(n,r);return this._addToMap(e,i)}enqueue(e,t){var n=this.wait(e).then(t);return this._addToMap(e,n)}_addToMap(e,t){var n,i=t.then(),a=()=>{this._map.get(e)===n&&this._map.delete(e)};return n=r(t,this._maxDelay).then(a,a),this._map.set(e,n),i}}},dgcjhgajfb:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SyncModelType=t.SyncActionState=t.Namespace=t.CollectionSyncState=t.CollectionState=t.CollectionName=t.Actions=t.MAX_PATCH_SIZE=t.MIN_PATCH_SIZE=t.MAX_INLINE_MUTATIONS=t.MIN_INLINE_MUTATIONS=t.FINITE_FAILURE_EXPIRY_DURATION=t.BACKOFF_BASE=t.BACKOFF_MAX_TIMEOUT=t.BACKOFF_MIN_TIMEOUT=void 0;t.BACKOFF_MIN_TIMEOUT=1e3;t.BACKOFF_MAX_TIMEOUT=36e5;t.BACKOFF_BASE=2;t.FINITE_FAILURE_EXPIRY_DURATION=6048e5;t.MIN_INLINE_MUTATIONS=100;t.MAX_INLINE_MUTATIONS=2e3;t.MIN_PATCH_SIZE=10;t.MAX_PATCH_SIZE=100;var r=n("dcafdgcbbh")({Star:"star",Contact:"contact",Mute:"mute",Pin:"pin",SettingPushName:"setting_pushName",LabelEdit:"label_edit",LabelMessage:"label_message",LabelJid:"label_jid",QuickReply:"quick_reply",LocaleSetting:"setting_locale",Archive:"archive",MarkChatAsRead:"markChatAsRead",ClearChat:"clearChat"});t.Actions=r;var i=n("dcafdgcbbh")({Generic:"generic",Regular:"regular",RegularLow:"regular_low",RegularHigh:"regular_high",CriticalBlock:"critical_block",CriticalUnblockLow:"critical_unblock_low"});t.CollectionName=i;var a=n("dcafdgcbbh").Mirrored(["Success","SuccessHasMore","Conflict","ErrorRetry","ErrorFatal","Blocked"]);t.CollectionState=a;var o=n("dcafdgcbbh").Mirrored(["UpToDate","Dirty","FailingFiniteRetry","Fatal","Blocked"]);t.CollectionSyncState=o;var u=n("dcafdgcbbh")({R1:1,DevDogfooding:2});t.Namespace=u;var s=n("dcafdgcbbh").Mirrored(["Success","Failed","Orphan","Unsupported","Skipped"]);t.SyncActionState=s;var c=n("dcafdgcbbh").Mirrored(["Msg","Chat"]);t.SyncModelType=c},dgehfbdejh:function(e,t,n){"use strict";var r=n("cfjecfhbfg");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n("diedefahjf"),a=r(n("iciefchfa")),o={whoAmI:()=>a.default.invoke("whoAmI",[]),logImpl:(e,t,n)=>a.default.invoke("logImpl",[e,t,n]),initFromStorage:()=>(0,i.init)()};t.default=o},dgiiciaafc:function(e,t,n){"use strict";var r=n("cfjecfhbfg");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r=String){var a=(0,i.default)(e,t.map(r)).join(""),o=n?4e3:Number.POSITIVE_INFINITY;a.length>o&&(a=a.slice(0,o).replace(/\s+$/," [truncated]"));return a};var i=r(n("edaidbcjh"))},dgjadadgcb:function(e,t,n){"use strict";var r=n("cfjecfhbfg");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("cgeeeeddea")),a=r(n("chejdieege")),o=n("bfagiaicdd");class u extends a.default{constructor(e){super(),this.column=e}validate(e){(0,i.default)(-1!==(0,o.findIndex)(e,this._getIndex()),'Attempted to remove non-existent index "'.concat(this.column,'" on "').concat(e.name,'"'))}apply(e){var t=(0,o.cloneSchema)(e),n=(0,o.findIndex)(e,this._getIndex());return t.indexes.splice(n,1),t}_getIndex(){return{type:o.INDEX_TYPE.ARRAY,column:this.column}}}t.default=u},dhciggahgi:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=class{constructor(e){this._view=e}_read(e){return e(this._view())}_write(e){return e(this._view())}create(e){return this._write(t=>t.create(e))}createOrReplace(e){return this._write(t=>t.createOrReplace(e))}createOrMerge(e,t){return this._write(n=>n.createOrMerge(e,t))}get(e){return this._read(t=>t.get(e))}merge(e,t){return this._write(n=>n.merge(e,t))}remove(e){return this._write(t=>t.remove(e))}bulkCreate(e){return this._write(t=>t.bulkCreate(e))}bulkCreateOrReplace(e){return this._write(t=>t.bulkCreateOrReplace(e))}bulkCreateOrMerge(e){return this._write(t=>t.bulkCreateOrMerge(e))}bulkGet(e){return this._read(t=>t.bulkGet(e))}bulkRemove(e){return this._write(t=>t.bulkRemove(e))}all(e){return this._read(t=>t.all(e))}count(){return this._read(e=>e.count())}equals(e,t,n){return this._read(r=>r.equals(e,t,n))}anyOf(e,t,n){return this._read(r=>r.anyOf(e,t,n))}greaterThan(e,t,n){return this._read(r=>r.greaterThan(e,t,n))}lessThan(e,t,n){return this._read(r=>r.lessThan(e,t,n))}between(e,t,n,r,i){return this._read(a=>a.between(e,t,n,r,i))}forEachSortedBy(e,t){return this._read(n=>n.forEachSortedBy(e,t))}forEach(e){return this._read(t=>t.forEach(e))}clear(){return this._write(e=>e.clear())}}},dhdjjbcibj:function(e,t,n){"use strict";var r=n("cfjecfhbfg");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ENCRYPTED_VALUE_TYPE=void 0;var i=r(n("cgeeeeddea")),a=r(n("chejdieege")),o=n("bfagiaicdd"),u=Object.freeze({STRING:"String",ARRAY_BUFFER:"ArrayBuffer"});t.ENCRYPTED_VALUE_TYPE=u;class s extends a.default{constructor(e,t){super(),this.name=e,this.dataType=t}validate(e){(0,i.default)(!e.columns.find(e=>e.name===this.name),'Attempted to add encrypted column "'.concat(this.name,'" to "').concat(e.name,'" but it already exists'))}apply(e){var t=(0,o.cloneSchema)(e);return t.columns.push({name:this.name}),t.encryptedColumns[this.name]=this.dataType,t}}t.default=s},diaiajeedf:function(e,t,n){"use strict";var r=n("cfjecfhbfg");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("cgeeeeddea")),a=r(n("chejdieege")),o=n("bfagiaicdd");class u extends a.default{constructor(e){super(),this.name=e}validate(e){(0,i.default)(!e.columns.find(e=>e.name===this.name),'Attempted to add column "'.concat(this.name,'" to "').concat(e.name,'" but it already exists'))}apply(e){var t=(0,o.cloneSchema)(e);return t.columns.push({name:this.name}),t}}t.default=u},dibgccbbif:function(e,t,n){"use strict";var r=n("ebjighhbai");Object.defineProperty(t,"__esModule",{value:!0}),t.encodeB64=function(e){return o(e,43,47,!0)},t.encodeB64UrlSafe=function(e){return o(e,45,95,!1)},t.decodeB64=function(e){var t=s(e,43,47,61);if(t)return t.buffer;throw new Error("Base64.decode given invalid string")},t.decodeB64UrlSafe=function(e){var t=s(e,45,95,-1);if(t)return t.buffer;throw new Error("Base64.decode given invalid string")},t.decodeB64ToJsArray=function(e){var t=e instanceof ArrayBuffer?new Uint8Array(e):s(e,43,47,61);return t&&Array.prototype.slice.call(t)},t.sizeWhenB64Decoded=function(e){return Math.floor(3*e.length/4)},t.BASE64_DATA_URL_SCHEME=void 0;var i=r(n("fecdihjci"));function a(){var e=(0,i.default)(["Found unexpected character code while decoding B64 at index ",", length ",": ",""]);return a=function(){return e},e}function o(e,t,n,r){var i=Array.isArray(e)||e instanceof ArrayBuffer?new Uint8Array(e):e;if(i.length<=3e3)return u(i,t,n,r);for(var a=[],o=0;o<i.length;o+=3e3)a.push(u(i.subarray(o,o+3e3),t,n,r));return a.join("")}function u(e,t,n,r){for(var i=Math.ceil(4*e.length/3),a=4*Math.ceil(e.length/3),o=new Array(a),u=0,s=0;u<a;u+=4,s+=3){var c=e[s]<<16|e[s+1]<<8|e[s+2];o[u]=c>>18,o[u+1]=c>>12&63,o[u+2]=c>>6&63,o[u+3]=63&c}for(var l=0;l<i;l++){var f=o[l];o[l]=f<26?65+f:f<52?71+f:f<62?f-4:62===f?t:n}for(var d=i;d<a;d++)o[d]=61;var h=String.fromCharCode.apply(String,o);return r?h:h.substring(0,i)}function s(e,t,n,r){for(var i=e.length,o=new Int32Array(i+i%4),u=0;u<i;u++){var s=e.charCodeAt(u);if(65<=s&&s<=90)o[u]=s-65;else if(97<=s&&s<=122)o[u]=s-71;else if(48<=s&&s<=57)o[u]=s+4;else if(s===t)o[u]=62;else{if(s!==n){if(s===r){i=u;break}return null!=self.ERROR&&__LOG__(4,!1,new Error)(a(),u,i,s),null}o[u]=63}}for(var c=o.length/4,l=0,f=0;l<c;l++,f+=4)o[l]=o[f]<<18|o[f+1]<<12|o[f+2]<<6|o[f+3];for(var d=Math.floor(3*i/4),h=new Uint8Array(d),v=0,p=0;p+3<=d;v++,p+=3){var m=o[v];h[p]=m>>16,h[p+1]=m>>8&255,h[p+2]=255&m}switch(d-p){case 2:h[p]=o[v]>>16,h[p+1]=o[v]>>8&255;break;case 1:h[p]=o[v]>>16}return h}t.BASE64_DATA_URL_SCHEME="data:image/jpeg;base64,"},diedefahjf:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=function(){return(0,i.initializeWithoutGKs)().then(()=>(0,r.getTable)().all().then(e=>Promise.all(e.map(e=>{var t=e.id||"";return(0,a.getTable)().between(["internalId"],"".concat(e.id,"_/"),"".concat(e.id,"_g"),{reverse:!0,limit:20}).then(e=>e.length>0&&null!=e[0].isOffline?{chatId:t,messages:[e[0]]}:{chatId:t,messages:e.reverse()})})).then(t=>[e,t])))};var r=n("cabjcaaibi"),i=n("bfcgiihhaf"),a=n("djebbjdaej");self.Promise=n("geadgcffe").default},dighidfgbc:function(e,t,n){"use strict";var r=n("cfjecfhbfg");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("cgeeeeddea")),a=r(n("chejdieege")),o=n("bfagiaicdd");class u extends a.default{constructor(e){super(),this.column=e}validate(e){var t=e.columns.find(e=>e.name===this.column);(0,i.default)(t,'Attempted to add index on non-existent column "'.concat(this.column,'" in "').concat(e.name,'"')),(0,i.default)(t&&(!t.primaryKey||t.primaryKey===o.PRIMARY_KEY_TYPE.COMPOSITE),'Cannot add index on primary key on table "'.concat(e.name,'"')),(0,i.default)(!e.indexes.some(e=>(e.type===o.INDEX_TYPE.ARRAY||e.type===o.INDEX_TYPE.SIMPLE||e.type===o.INDEX_TYPE.UNIQUE)&&(0,o.indexContainsColumn)(e,this.column)),'Attempted to add index "'.concat(this.column,'" which already exists in "').concat(e.name,'"'))}apply(e){var t=(0,o.cloneSchema)(e);return t.indexes.push(this._getIndex()),t}_getIndex(){return{type:o.INDEX_TYPE.UNIQUE,column:this.column}}}t.default=u},dijbahidec:function(e,t,n){"use strict";var r=n("bfejgijfbh"),i=n("cfjecfhbfg");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){a||((0,o.default)("undefined"!=typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope,"Connect can only be called in WebWorker scope"),self.addEventListener("message",p),a=Promise.resolve(u.default.init()),l.default.setConnectionManager(u.default),d.set(s.default));return a};var a,o=i(n("cgeeeeddea")),u=i(n("eacbeadej")),s=i(n("dgehfbdejh")),c=n("bhabjiggjj"),l=i(n("iciefchfa")),f=i(n("dbeffhcjcb")),d=r(n("jfbhhdedh")),h=i(n("cahfddcdga")),v=[];function p(e){var t=e.data;if(!u.default.isConnected()){var n=(0,c.extractPortFromHandshakePayload)(t);if(null!=n)return u.default.connectVia(n),e.stopImmediatePropagation(),f.default.respondTo(n),void(0,h.default)(a,"connection").then(()=>{(0,o.default)("undefined"!=typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope,"Connect can only be called in WebWorker scope"),self.removeEventListener("message",p),v.forEach(e=>{self.dispatchEvent(e)})})}v.push(e)}},dijiihaecd:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pendingMutationsCreateTable=function(){return(0,r.getStorage)().versions.version(0)},t.collectionVersionCreateTable=function(){return(0,r.getStorage)().versions.version(1)},t.syncActionsCreateTable=function(){return(0,r.getStorage)().versions.version(2)},t.contactCreateTable=function(){return(0,r.getStorage)().versions.version(3)},t.blocklistCreateTable=function(){return(0,r.getStorage)().versions.version(4)},t.profilePicThumbCreateTable=function(){return(0,r.getStorage)().versions.version(5)},t.chatCreateTable=function(){return(0,r.getStorage)().versions.version(6)},t.messageCreateTable=function(){return(0,r.getStorage)().versions.version(7)},t.messageInfoCreateTable=function(){return(0,r.getStorage)().versions.version(8)},t.participantCreateTable=function(){return(0,r.getStorage)().versions.version(9)},t.orphanReceiptCreateTable=function(){return(0,r.getStorage)().versions.version(10)},t.deviceListCreateTable=function(){return(0,r.getStorage)().versions.version(11)},t.inactiveReceiptCreateTable=function(){return(0,r.getStorage)().versions.version(12)},t.verifiedBusinessNameCreateTable=function(){return(0,r.getStorage)().versions.version(13)},t.historySyncNotificationsCreateTable=function(){return(0,r.getStorage)().versions.version(14)},t.encryptedMutationsCreateTable=function(){return(0,r.getStorage)().versions.version(15)},t.labelCreateTable=function(){return(0,r.getStorage)().versions.version(16)},t.labelAssociationCreateTable=function(){return(0,r.getStorage)().versions.version(17)},t.quickReplyCreateTable=function(){return(0,r.getStorage)().versions.version(18)},t.abpropsCreateConfigTable=function(){return(0,r.getStorage)().versions.version(19)},t.messageAddMessageRangeProperties=function(){return(0,r.getStorage)().versions.version(20)},t.groupMetadataCreateTable=function(){return(0,r.getStorage)().versions.version(21)},t.syncKeysCreateTable=function(){return(0,r.getStorage)().versions.version(22)},t.pendingMutationsAddIndexForIndex=function(){return(0,r.getStorage)().versions.version(23)},t.tasksScheduledTimeCreateTable=function(){return(0,r.getStorage)().versions.version(24)},t.pendingMutationsAddKeyId=function(){return(0,r.getStorage)().versions.version(25)},t.activeMessageRangesCreateTable=function(){return(0,r.getStorage)().versions.version(26)},t.collectionVersionAddLtHash=function(){return(0,r.getStorage)().versions.version(27)},t.syncActionsAddMac=function(){return(0,r.getStorage)().versions.version(28)},t.pendingMutationsAddMac=function(){return(0,r.getStorage)().versions.version(29)},t.pendingMutationsRenameOperation=function(){return(0,r.getStorage)().versions.version(30)},t.syncActionsRenameOperation=function(){return(0,r.getStorage)().versions.version(31)},t.encryptedMutationsRenameIndexMac=function(){return(0,r.getStorage)().versions.version(32)},t.messageAddVcardList=function(){return(0,r.getStorage)().versions.version(33)},t.collectionVersionAddMissingKeys=function(){return(0,r.getStorage)().versions.version(34)},t.deviceListRemoveUsyncColumn=function(){return(0,r.getStorage)().versions.version(35)},t.verifiedBusinessNameAddActualActorsAndHostStorage=function(){return(0,r.getStorage)().versions.version(36)},t.contactAddIsAddressBookContact=function(){return(0,r.getStorage)().versions.version(37)},t.verifiedBusinessNameAddPrivacyModeTs=function(){return(0,r.getStorage)().versions.version(38)};var r=n("ffjiicch")},djebbjdaej:function(e,t,n){"use strict";var r=n("bfejgijfbh"),i=n("cfjecfhbfg");Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,h.getStorage)().add("message").version((0,p.messageCreateTable)(),[new v.default("id"),new o.default("internalId"),new l.default("internalId"),new o.default("rowId"),new l.default("rowId"),new s.default("body",s.ENCRYPTED_VALUE_TYPE.STRING),new o.default("type"),new o.default("subtype"),new o.default("t"),new o.default("notifyName"),new o.default("from"),new o.default("to"),new o.default("author"),new o.default("self"),new o.default("ack"),new o.default("invis"),new o.default("isStarred"),new c.default("isStarred"),new o.default("mentionedJidList"),new o.default("count"),new o.default("devicesAdded"),new o.default("devicesRemoved"),new o.default("isThisDeviceAdded"),new o.default("recipients"),new o.default("protocolMessageKey"),new o.default("templateParams"),new u.default(["internalId","isStarred"]),new o.default("vcardWAids"),new a.default("vcardWAids"),new o.default("hasLink"),new o.default("isMediaMsg"),new o.default("isDocMsg"),new u.default(["internalId","isMediaMsg"]),new u.default(["internalId","isDocMsg"]),new u.default(["internalId","hasLink"]),new o.default("offline"),new o.default("isOffline"),new s.default("offlineBuffer",s.ENCRYPTED_VALUE_TYPE.ARRAY_BUFFER),new l.default("isOffline"),new o.default("ephemeralStartTimestamp"),new o.default("ephemeralDuration"),new o.default("ephemeralSettingTimestamp"),new o.default("ephemeralOutOfSync"),new o.default("expiredTimestamp"),new c.default("expiredTimestamp"),new o.default("clientUrl"),new o.default("loc"),new o.default("lat"),new o.default("lng"),new o.default("directPath"),new o.default("mimetype"),new o.default("duration"),new o.default("filehash"),new o.default("uploadhash"),new o.default("size"),new o.default("filename"),new o.default("streamingSidecar"),new o.default("mediaKey"),new o.default("mediaKeyTimestamp"),new o.default("pageCount"),new o.default("isGif"),new o.default("gifAttribution"),new o.default("isViewOnce"),new o.default("width"),new o.default("height"),new o.default("scanLengths"),new o.default("scansSidecar"),new o.default("caption"),new o.default("interactiveAnnotations"),new o.default("firstFrameLength"),new o.default("firstFrameSidecar"),new o.default("isAnimated"),new o.default("canonicalUrl"),new o.default("matchedText"),new o.default("thumbnail"),new o.default("richPreviewType"),new o.default("doNotPlayInline"),new o.default("title"),new o.default("description"),new o.default("broadcast"),new o.default("broadcastParticipants"),new o.default("broadcastId"),new o.default("quotedMsg"),new o.default("quotedStanzaID"),new o.default("quotedRemoteJid"),new o.default("quotedParticipant"),new o.default("footer"),new o.default("hydratedButtons"),new o.default("selectedId"),new o.default("selectedIndex"),new o.default("vcardFormattedName"),new o.default("isVcardOverMmsDocument"),new o.default("businessOwnerJid"),new o.default("productId"),new o.default("currencyCode"),new o.default("priceAmount1000"),new o.default("retailerId"),new o.default("url"),new o.default("productImageCount"),new o.default("paymentCurrency"),new o.default("paymentAmount1000"),new o.default("paymentMessageReceiverJid"),new o.default("paymentTransactionTimestamp"),new o.default("paymentStatus"),new o.default("paymentNoteMsg"),new o.default("paymentRequestMessageKey"),new o.default("paymentExpiryTimestamp"),new o.default("message"),new o.default("orderTitle"),new o.default("itemCount"),new o.default("orderId"),new o.default("surface"),new o.default("status"),new o.default("token"),new o.default("textColor"),new o.default("backgroundColor"),new o.default("font"),new o.default("isForwarded"),new o.default("forwardingScore"),new o.default("ctwaContext"),new o.default("c2sTimestamp"),new c.default("c2sTimestamp"),new o.default("mdDowngrade")]).version((0,p.messageAddMessageRangeProperties)(),[new f.default("c2sTimestamp"),new d.default("c2sTimestamp"),new o.default("messageRangeIndex"),new c.default("messageRangeIndex")]).version((0,p.messageAddVcardList)(),[new o.default("vcardList")]).view(e=>e).enablePropFilter(!0)},t.getTable=function(){return(0,h.getStorage)().table("message")};var a=i(n("bdhhdbcefi")),o=i(n("diaiajeedf")),u=i(n("djfjgifhj")),s=r(n("dhdjjbcibj")),c=i(n("bhjiahgdac")),l=i(n("dighidfgbc")),f=i(n("caiahabcfd")),d=i(n("dfbiiieiig")),h=n("ffjiicch"),v=i(n("ebhdfjjdeb")),p=n("dijiihaecd")},djfjgifhj:function(e,t,n){"use strict";var r=n("cfjecfhbfg");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("cgeeeeddea")),a=r(n("chejdieege")),o=n("bfagiaicdd");class u extends a.default{constructor(e){super(),this.columns=[...e]}validate(e){this.columns.forEach(t=>{(0,i.default)(e.columns.find(e=>e.name===t),'Attempted to add index on non-existent column "'.concat(t,'" in "').concat(e.name,'"'))}),(0,i.default)(this.columns.length>1,"Attempted to add composite index for only 1 column"),(0,i.default)(-1===(0,o.findIndex)(e,this._getIndex()),"Attempted to add index [".concat(String(this.columns),'], which already exists in "').concat(e.name,'"'));var t=e.columns.filter(e=>e.primaryKey&&e.primaryKey===o.PRIMARY_KEY_TYPE.COMPOSITE).map(e=>e.name);(0,i.default)(t.length!==this.columns.length||t.some(e=>!this.columns.includes(e)),"Attempted to add index [".concat(String(this.columns),'], which already is the primary key in "').concat(e.name,'"'))}apply(e){var t=(0,o.cloneSchema)(e);return t.indexes.push(this._getIndex()),t}_getIndex(){return{type:o.INDEX_TYPE.COMPOSITE,columns:this.columns}}}t.default=u},eacbeadej:function(e,t,n){"use strict";var r=n("cfjecfhbfg");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("cgeeeeddea")),a=r(n("cahfddcdga"));var o=new class{init(){return this._promise||(this._promise=new Promise(e=>{this._resolver=e}).timeout(5e3)),this._promise}isConnected(){return null!=this._port}getPort(){return this._port}waitForConnection(){return(0,a.default)(this._promise,"ConnectionManager Initialization Promise")}connectVia(e){if(this.isConnected())throw new Error("Connection already established");(0,i.default)(this._resolver,"ConnectionManager not initialized"),this._port=e,this._resolver()}};t.default=o},eafdicgcb:function(e,t,n){"use strict";var r=n("cfjecfhbfg");Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,a.getStorage)().add("collection-version").version((0,u.collectionVersionCreateTable)(),[new o.default("collection"),new i.default("version"),new i.default("state"),new i.default("finiteFailureStartTime")]).version((0,u.collectionVersionAddLtHash)(),[new i.default("ltHash")]).version((0,u.collectionVersionAddMissingKeys)(),[new i.default("missingKeys")]).view(e=>e)},t.getTable=function(){return(0,a.getStorage)().table("collection-version")};var i=r(n("diaiajeedf")),a=n("ffjiicch"),o=r(n("ebhdfjjdeb")),u=n("dijiihaecd")},ebhdfjjdeb:function(e,t,n){"use strict";var r=n("cfjecfhbfg");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("cgeeeeddea")),a=r(n("ciefddeegi")),o=n("bfagiaicdd");class u extends a.default{validate(e){super.validate(e),(0,i.default)(this.columns&&1===this.columns.length,"Attempted to add UserDefinedPrimaryKey over wrong number of columns")}apply(e){var t=(0,o.cloneSchema)(e);return t.columns.unshift({name:this.columns[0],primaryKey:o.PRIMARY_KEY_TYPE.USER_DEFINED}),t}}t.default=u},ebjighhbai:function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},ecjageddib:function(e,t,n){"use strict";var r=n("cfjecfhbfg");Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,s.getStorage)().add("sync-actions").version((0,l.syncActionsCreateTable)(),[new c.default("index"),new i.default("value"),new i.default("actionState"),new i.default("keyId"),new o.default("actionState"),new i.default("type"),new i.default("version"),new i.default("modelId"),new i.default("modelType"),new a.default(["modelId","modelType","actionState"])]).version((0,l.syncActionsAddMac)(),[new i.default("valueMac"),new i.default("indexMac"),new o.default("indexMac")]).version((0,l.syncActionsRenameOperation)(),[new u.default("type"),new i.default("operation")]).view(e=>e)},t.getTable=function(){return(0,s.getStorage)().table("sync-actions")};var i=r(n("diaiajeedf")),a=r(n("djfjgifhj")),o=r(n("bhjiahgdac")),u=(n("dgcjhgajfb"),r(n("caiahabcfd"))),s=n("ffjiicch"),c=r(n("ebhdfjjdeb")),l=n("dijiihaecd")},edaidbcjh:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){for(var n=[],r=e.length,i=t.length,a=Math.max(r,i),o=0;o<a;o++)o<r&&n.push(e[o]),o<i&&n.push(t[o]);return n}},fecdihjci:function(e,t){e.exports=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}},ffedgcdgj:function(e,t){function n(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,i)}e.exports=function(e){return function(){var t=this,r=arguments;return new Promise((function(i,a){var o=e.apply(t,r);function u(e){n(o,i,a,u,s,"next",e)}function s(e){n(o,i,a,u,s,"throw",e)}u(void 0)}))}}},ffjiicch:function(e,t,n){"use strict";var r=n("cfjecfhbfg");Object.defineProperty(t,"__esModule",{value:!0}),t.createStorage=function(){var e=new o.default("model-storage",a.default);s=new u.default(e)},t.getStorage=function(){return(0,i.default)(null!=s,"[model-storage] Storage should be created first before being accessed"),s},t.destroyStorage=function(){if(null==s)return Promise.reject(new Error("[model-storage] Storage should be created first before being destroyed"));return s.purge().then(()=>{s=null}).catch(e=>{throw s=null,e})},t.DATABASE_NAME=void 0;var i=r(n("cgeeeeddea")),a=r(n("cjhficgjgc")),o=r(n("bchejfgdg")),u=r(n("cdiffgjfcb"));t.DATABASE_NAME="model-storage";var s=null},geadgcffe:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=v;var n,r="undefined"!=typeof Promise?Promise:null,i=0,a=[],o=[],u=[],s={sentinel:"CONTINUE_AS_IF_NO_HANDLER"},c={sentinel:"RETRY_ASYNCHRONOUSLY"},l={sentinel:"TO_STRING"},f={sentinel:"DID_ERROR"},d=null,h=[];function v(e,t){this._flags=0,this._value=void 0,this._onFulfilled=void 0,this._onRejected=void 0,this._context=void 0,this._resolveLevel=0,this._control=void 0,this.x=void 0,this._thenableParent=null,this._parent=void 0,this._child=void 0,this._children=void 0,this.control=void 0,t&&(this._context=t.this),"function"==typeof e&&(this._onFulfilled=e,this._flags|=4,this._flags|=256,z(e,this._context,e=>N(this,0,!0,!1,e),e=>N(this,0,!1,!1,e)))}function p(e){if(void 0===e)return n;if(C(e))return e;var t=new v;return N(t,0,!0,!1,e),W(t,512),t}function m(e){var t=new v;return t._value=e,W(t,514),h.push(t),t}function g(e){var t=arguments.length-1;if(0===t)return this.then(void 0,e);for(var n=new Array(t),r=0;r<t;r++)n[r]=U(arguments[r]);var i=K(n,arguments[t]),a=R(this,void 0,i);return a._onRejected&&W(a,128),a}function y(e){return new v((function(t,n){var r=e.length;if(0!==r)for(var i=new Array(e.length),a=0;a<e.length;a++)i[a]=R(e[a],o,n);else t([]);function o(e){if(0==--r){for(var n=[],a=0;a<i.length;a++){var o=i[a];n.push(o&&3&o._flags?o._value:e)}t(n)}return e}}))}function b(e,t){this.errors=e||[],this.message=t||"".concat(this.errors.length," errors")}function _(e){var t="";if(128&e._flags)t=(e._onFulfilled||e._onRejected).call(e._context,l);else if(e._control)t=".addRawControl(".concat(e._control.name,", ").concat(e._control.foo,")");else if(16&e._flags)t=".endWithControls(".concat(Object.keys(e.control),")");else if(512&e._flags)t=1&e._flags?"Promise.resolve(".concat(void 0===e._value?"":e._value,")"):"Promise.reject(".concat(void 0===e._value?"":e._value,")");else if(256&e._flags)switch(3&e._flags){case 2:case 0:case 1:t="new Promise(".concat(e._onFulfilled,")")}else e._onFulfilled&&e._onRejected?t=".then(".concat(e._onFulfilled,", ").concat(e._onRejected,")"):e._onFulfilled?t=".then(".concat(e._onFulfilled,")"):e._onRejected&&(t=".catch(".concat(e._onRejected,")"));return t}function w(e,t){return new v((function(n){var r=k(t);C(r)&&W(r,8),setTimeout(n,e,r)}))}function j(e){this.message=e||"StackPromise timed out"}function E(e,t,n,r){this.name=e,this.foo=t,this.lightning=!!n,this.canRunMultipleTimes=!!r}function x(e,t){return function(){for(var n,r,i=e._parent;i&&!(3&i._flags)&&!(16&i._flags);i=i._parent)!i._control||i._control.name!==t||4&i._flags||(n=i);if(!n)return v.NO_ACTIVE_CONTROL;if(n._control.canRunMultipleTimes||W(n,4),arguments.length>0){r=new Array(arguments.length);for(var a=0;a<arguments.length;a++)r[a]=arguments[a]}return n._control.foo.call(n._context,e=>D(n,n._resolveLevel,!0,!1,e),e=>D(n,n._resolveLevel,!1,!1,e),n._parent,r)}}function I(e){this.message=e,this.stack=new Error(e||this.name).stack}v.resolve=p,v.reject=m,v.prototype.then=function(e,t){"function"!=typeof e&&(e=void 0),"function"!=typeof t&&(t=void 0);var n=new v;n._onFulfilled=e,n._onRejected=t,n._context=this._context,64&this._flags&&W(n,64);var r=3&this._flags;return 0===r?T(this,n):(W(this,8),(1===r?e:t)?(n._parent=this,o.push(n),A()):(n._parent=this,W(n,r),n._value=this._value,2===r&&h.push(n))),n},v.prototype.catch=g,v.prototype.catchType=g,v.prototype.catchTypes=g,v.prototype.catchTypes3=g,v.prototype.catchEqualTo=g,v.prototype.catchConditional=g,v.prototype.end=function(e){var t=this.then();if(W(t,16),t.control={},t._context=void 0,e){var n=e.controls;if(n)for(var r=0;r<n.length;r++){var i=n[r];t.control[i]=x(t,i)}return t}},v.prototype.endWithControls=function(){var e=this.then();W(e,16),e.control={},e._context=void 0;for(var t=0;t<arguments.length;t++){var n=arguments[t];e.control[n]=x(e,n)}return e},v.all=y,v.allSettled=function(e){return new v((function(t){var n=Array.from(e),r=n.length;if(0!==r)for(var i=new Array(n.length),a=s(!1),o=s(!0),u=0;u<n.length;u++)i[u]=R(n[u],a,o);else t([]);function s(e){return function(n){var a=e?{status:"rejected",reason:n}:{status:"fulfilled",value:n};if(0==--r){for(var o=[],u=0;u<i.length;u++){var s=i[u];o.push(s&&3&s._flags?s._value:a)}t(o)}return a}}}))},v.any=function(e){return new v((function(t,n){var r=e.length;0===r&&n(new b([],"StackPromise.any called with []"));var i=new Array(e.length);function a(e){if(0==--r){for(var t=[],a=0;a<i.length;a++){var o=i[a];t.push(o&&3&o._flags?o._value:e)}n(new b(t))}return e}for(var o=0;o<e.length;o++)i[o]=R(e[o],t,a)}))},v.props=function(e){var t=Object.keys(e),n=v.all(t.map(t=>e[t]));function r(e){for(var n={},r=0;r<e.length;r++)n[t[r]]=e[r];return n}switch(3&n._flags){case 2:return n;case 0:return W(n.then(r),32);case 1:return n._value=r(n._value),n}},v.map=function(e,t){var n=!0;var r=y(e.map((function(e,r){return p(e).then(function(e){return function(r){return n&&t(r,e)}}(r))})));switch(3&r._flags){case 2:n=!1;break;case 0:W(r=r.catch((function(){return n=!1,s})),32)}return r},v.reduce=function(e,t,n){return p(e).reduce(t,n)},v.prototype.reduce=function(e,t){return t=k(t),R(this,(function(n,r){if(0===n.length)return t;if(r)return c;for(var i=new Array(n.length),a=0;a<n.length;a++){var o=i[a]=k(n[a]);C(o)&&W(o,8)}var u=this,s=0;return function n(){for(var r=i.length;;){var a=s,o=i[a];if(C(o))switch(3&o._flags){case 2:return o;case 0:return o.then(n);case 1:o=o._value}if(C(t))switch(3&t._flags){case 2:return t;case 0:return t.then(n);case 1:t=t._value}var c=e.call(u,t,o,a,r);if(++s===r)return c;if(C(c=k(c)))switch(3&c._flags){case 2:return c;case 0:return t=c,c.then(n);case 1:W(c,8),t=c._value}else t=c}}()}))},v.each=function(e,t){return p(e).each(t)},v.prototype.each=function(e){var t=[];return this.reduce((function(n,r,i,a){return t.push(r),e.call(this,r,i,a)})).then(()=>t)},v.mapSeries=function(e,t){return p(e).mapSeries(t)},v.prototype.mapSeries=function(e){return this.reduce((function(t,n,r,i){var a=k(e.call(this,n,r,i));return C(a)?a.then(e=>(t.push(e),t)):(t.push(a),t)}),[])},v.race=function(e){var t=k(e);if(C(t)){var n=t.then(e=>v.race(e));return n._context=void 0,n._flags&=-65,n}return new v((function(e,n){for(var r=0;r<t.length;r++){var i=k(t[r]);if(!C(i)||3&i._flags)for(e(i),r++;r<t.length;r++){var a=t[r];C(a)&&W(a,8)}else i.then(e,n)}}))},b.prototype=Object.create(Error.prototype,{name:{value:"AggregateError"}}),v.AggregateError=b,v.onPossiblyUnhandledRejection=function(e,t){console.error("StackPromise did not catch ".concat(e),t,e)},v.prototype.toString=function(){for(var e,t=[],n=this,r=!1;n;n=n._parent){e=n,!r&&3&n._flags&&(r=!0,512&n._flags||(1&n._flags?t.push("[resolved value: ".concat(n._value,"]")):t.push("[rejected reason: ".concat(n._value,"]"))));var i=_(n);1024&n._flags&&(i="~".concat(i)),t.push(i)}return t.reverse(),768&e._flags||(t[0]="[Promise]".concat(t[0])),t.join("\n")},v.delay=w,v.prototype.delay=function(e){return this.then(t=>w(e,t))},v.prototype.timeout=function(e,t){if(0!=(3&this._flags))return this.then();var n;function r(r){return r===l?".timeout(".concat(e,", ").concat(t,")"):(clearTimeout(n),s)}var i=this.then(r,r);return W(i,160),n=setTimeout((function(e,t){3&e._flags||D(e,0,!1,!1,t instanceof Error?t:new j(t))}),e,i,t),i},j.prototype=Object.create(Error.prototype,{name:{value:"TimeoutError"}}),v.TimeoutError=j,v.prototype.isFulfilled=function(){return!!(1&this._flags)},v.prototype.isRejected=function(){return!!(2&this._flags)},v.prototype.isPending=function(){return!(3&this._flags)},v.prototype.value=function(){if(1&this._flags)return this._value;throw new Error(2&this._flags?"value() called on StackPromise that was rejected":"value() called on StackPromise that is pending")},v.prototype.reason=function(){if(2&this._flags)return this._value;throw new Error(1&this._flags?"reason() called on StackPromise that was fulfilled, not rejected":"reason() called on StackPromise that is pending")},v.loop=function(e,t){return p(t).loop(e)},v.prototype.loop=function(e){var t=R(this.then((function(n){var r=this,i=0,a=e=>D(t,0,!0,!1,e);return function n(o){return new v((function(t){t(e.call(r,a,o,i++))})).then((function(e){if(!(3&t._flags))return n(e)}))}(n)})),(function(t){return t===l?".loop(".concat(e,")"):s}));return W(t,128),t},v.prototype.checkpoint=function(e){function t(t){return t===l?".checkpoint(".concat(e,")"):2&e._flags?e:s}e=p(e);var n=this.then(t,t);return W(n,128),n},v.prototype.finally=function(e){function t(t){return t===l?".finally(".concat(e,")"):(e.call(this,t),s)}return W(this.then(t,t),128)},v.prototype.get=function(e){var t=this.then((function(t){return t===l?".get('".concat(e,"')"):t[e]}));return W(t,128),t},v.prototype.tap=function(e){return W("function"!=typeof e?this.then(S):this.then((function(t){return t===l?".tap(".concat(e,")"):(e.call(this,t),s)})),128)},v.prototype.spread=function(e){var t=this.then((function(t){return t===l?".spread(".concat(e,")"):e.apply(this,t)}));return W(t,128),t},v.prototype.throw=function(e){return this.then(()=>m(e))},v.Control=E,v.NO_ACTIVE_CONTROL=new Error("No active control was found."),v.prototype.addControl=function(e){if(!(e instanceof E))throw new Error("addControl must be given Control, but got ".concat(e));var t=this.then(e.lightning?void 0:S);return t._control=e,t},v.prototype.addRawControl=function(e,t,n,r){return this.addControl(new E(e,t,n,r))},v.prototype.addResolveControl=function(e,t,n,r){return this.addControl(new E(e,(function(e,n,r,i){try{e(t.apply(this,i))}catch(e){n(e)}}),n,r))},v.prototype.addRejectControl=function(e,t,n,r){return this.addControl(new E(e,(function(e,n,r,i){try{n(t.apply(this,i))}catch(e){n(e)}}),n,r))},I.prototype=Object.create(Error.prototype,{name:{value:"CancellationError"}}),v.CancellationError=I;var O,P=new E("cancel",(function(e,t,n,r){t(new I(r&&r[0]))}),!1,!1);function A(){var t,n;0===i&&(o.length||h.length)&&(i=1,O||(n=0,O="undefined"==typeof MutationObserver||self&&self.navigator&&self.navigator.standalone?r?function(){r.resolve().then(V)}:"function"==typeof e?function(){e(V)}:function(){setTimeout(V,0)}:(t=document.createTextNode(""),new MutationObserver(V).observe(t,{characterData:!0}),function(){t.data=n=1-n})),O())}function S(e){return e===l?".tap()":s}function T(e,t){W(e,8),t._parent=e,e._children?e._children.push(t):e._child?(e._children=[e._child,t],e._child=void 0):e._child=t}function M(e){if(e&&("object"==typeof e||"function"==typeof e)){var t;try{t=e.then}catch(e){return d=e,f}if("function"==typeof t)return t}}function k(e){if(!e||C(e))return e;var t=M(e);if(t===f)return m(d);if(t){var n=new v((function(n,r){t.call(e,n,r)}));return n._thenableParent=e,n}return e}function C(e){return e instanceof v}function R(e,t,n){var r,i,a,o,u=C(e=k(e)),l=!1;if(u){if(!(3&e._flags))return W(e.then(t,n),32);W(e,8),l=!!(64&e._flags),a=e._context,r=1&e._flags?t:n,i=e._value}else r=t,i=e;if(!r)return p(e).then();if((i=q(r,a,i,!0))===f)o=m(d);else{if(i===c)return p(e).then(t,n);if(i===s)return u?e.then():p(e);o=p(i)}return l&&(o=o.cancellable()),void 0!==a&&((o=o.then())._context=a),o}function N(e,t,n,r,i){if(t===e._resolveLevel){var a=++e._resolveLevel;if(W(e,4),e._thenableParent=null,n)if(i===e)e._parent=void 0,B(e,!1,r,new TypeError("promise resolved to itself"));else if(C(i)){var o=3&i._flags;0===o?T(i,e):(e._parent=i,W(e,1024),W(i,8),B(e,1===o,r,i._value))}else{var u=M(i);u===f?(e._parent=void 0,B(e,!1,r,d)):u?(e._parent=void 0,e._thenableParent=i,z(u,i,t=>N(e,a,!0,!1,t),t=>N(e,a,!1,!1,t))):B(e,!0,r,i)}else B(e,!1,r,i)}}function D(e,t,n,r,i){t===e._resolveLevel&&(F(e),N(e,t,n,r,i))}function F(e){if(e._parent){var t=e._parent;if(e._parent=void 0,t._child===e)t._child=void 0;else if(t._children){for(var n=t._children,r=0;r<n.length;r++)if(n[r]===e){n.splice(r,1);break}0===n.length&&(t._children=void 0)}}}function U(e){if(null==e)throw new Error("Invalid .catch guard ".concat(e));if("function"==typeof e)return e;if("object"==typeof e)throw new Error("Object guards in .catch are currently unsupported");return function(t){return t===e}}function K(e,t){return function(n,r){return n===l?".catch(..., ".concat(t,")"):e&&!function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r===Error||r.prototype instanceof Error){if(t instanceof r)return!0}else if(r(t))return!0}return!1}(e,n)?s:r?c:t.call(this,n)}}function B(e,t,n,r){if(W(e,4|(t?1:2)),e._value=r,e._child)L(e._child,t,n,r),e._child=void 0;else if(e._children){var i=e._children;e._children=void 0;for(var a=0;a<i.length;a++)L(i[a],t,n,r)}else t||8&e._flags||h.push(e)}function L(e,t,n,r){e._resolveLevel++;var i=H(e,t);if(i&&32&e._flags){W(e,4);var a=q(i,e._context,r,!0);if(a!==c)return void(a===f?(e._parent=void 0,B(e,!1,n,d)):a===s?B(e,t,n,r):(e._parent=void 0,N(e,e._resolveLevel,!0,n,a)));e._flags&=-5}i?((n?u:o).push(e),A()):B(e,t,n,r)}function Y(e,t){for(;0!==e.length;)t.push(e.pop())}function V(){for(;0!==a.length||0!==o.length;){0===a.length&&Y(o,a);var e=a.pop(),t=e._parent,n=!!(t&&1&t._flags),r=t&&t._value,l=H(e,n);if(W(e,4),l){var p=void 0;do{p=q(l,e._context,r,!1)}while(p===c);p===f?(r=d,n=!1,e._parent=void 0):p!==s&&(r=p,n=!0,e._parent=void 0)}3&e._flags||(N(e,e._resolveLevel,n,!0,r),Y(u,a))}for(i--;0!==h.length;){var m=h.pop();8&m._flags||v.onPossiblyUnhandledRejection(m._value,m)}}function z(e,t,n,r){try{e.call(t,n,r)}catch(e){r(e)}}function H(e,t){if(!(4&e._flags))return t?e._onFulfilled:e._onRejected}function q(e,t,n,r){try{return r?e.call(t,n,!0):e.call(t,n)}catch(e){return d=e,f}}function W(e,t){return e._flags|=t,e}v.prototype.addCancelControl=function(){return W(this.addControl(P),64)},v.sit=function(e,t){var n=new v;return n._control=new E(e,(function(e,n,r,i){e(t?t.apply(void 0,i):i&&i[0])})),n},v.prototype.cancellable=function(){return W(this.then(),64)},v.prototype.uncancellable=function(){var e=this.then();return e._flags&=-65,e},v.prototype.cancel=function(e){for(var t,n=this;n&&!(3&n._flags);n=n._parent)64&n._flags&&(t=n);if(t)if(void 0===e&&(e=new I),H(t,!1)){var r=new v;F(t),T(r,t),D(r,0,!1,!1,e)}else D(t,t._resolveLevel,!1,!1,e)},N(n=new v,0,!0,!1,void 0)}).call(this,n("bgjhiaabcf").setImmediate)},iciefchfa:function(e,t,n){"use strict";var r=n("cfjecfhbfg");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("cgeeeeddea")),a=n("cbefiijcca"),o=n("cgcccbajji"),u=r(n("cahfddcdga")),s=n("chjdedjjda");var c=new class{constructor(){this._pending=new Map,this._onResponseReceipt=e=>{var t=(0,s.unwrapResponsePayload)(e.data);if(null!=t){var{invocationId:n,result:r}=t;if(this._pending.has(n)){var{resolve:i}=(0,u.default)(this._pending.get(n),"this._pending.get(invocationId)");i(r),this._pending.delete(n)}}}}setConnectionManager(e){this._conn=e,e.waitForConnection().then(()=>{var t=(0,u.default)(e.getPort(),"Port obtained from ConnectionManager after connection");t.addEventListener("message",this._onResponseReceipt),t.start()})}invoke(e,t){return(0,i.default)(this._conn,"Connection has not been inited"),this._conn.waitForConnection().then(()=>{(0,i.default)(this._conn,"Connection has not been inited");var n=(0,u.default)(this._conn.getPort(),"Port obtained from ConnectionManager after connection"),r=(0,o.genInvocationId)();return n.postMessage((0,a.buildInvocationPayload)({invocationId:r,method:e,args:t})),new Promise((e,t)=>{this._pending.set(r,{resolve:e,reject:t})})})}};t.default=c},jfbhhdedh:function(e,t,n){"use strict";var r=n("cfjecfhbfg");Object.defineProperty(t,"__esModule",{value:!0}),t.set=function(e){i=e},t.get=s,t.sendLogs=function(){throw new Error("Not yet implemented")},t.log=void 0;var i,a=r(n("dgiiciaafc")),o=r(n("bdbhhedcfi")),u=r(n("cahfddcdga"));function s(){return(0,u.default)(i,"InvocationInterface was not inited")}var c=(0,o.default)((e,t=!1,n)=>(r,...i)=>{var o,u=(0,a.default)(r,i,!t);return n&&(o={name:n.name,stack:n.stack}),s().logImpl(e,u,o),u},(e,t,n)=>n?null:"".concat(e).concat(t?"Verbose":""));t.log=c}});