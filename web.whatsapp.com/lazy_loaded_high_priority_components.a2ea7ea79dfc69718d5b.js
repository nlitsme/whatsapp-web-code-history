/*! Copyright (c) 2022 WhatsApp Inc. All Rights Reserved. */
(self.webpackChunkwhatsapp_web_client=self.webpackChunkwhatsapp_web_client||[]).push([[7205],{31789:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){let n;if(e.size!==t.size)return!1;for(const[a,i]of e)if(n=t.get(a),n!==i||void 0===n&&!t.has(a))return!1;return!0}},16419:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{contact:t,onClick:n,contextMenu:l,isPendingParticipant:o,contextEnabled:r,onContext:d,theme:c}=e,u=(0,a.useModelValues)(e.participant,["isAdmin"]);return(0,s.jsx)(i.Contact,{contact:t,admin:u.isAdmin,onClick:n,theme:c||"drawer-list",contextEnabled:()=>null!=r&&r(t),contextMenu:l,onContext:e=>d&&d(e,t),isPendingParticipant:o,showNotifyName:!0,waitIdle:!0})};var a=n(35461),i=n(2732),s=n(85893)},45863:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(45095)),s=n(22712),l=n(67811),o=n(26741),r=n(67294),d=a(n(59828)),c=a(n(58528)),u=n(84387),h=a(n(52500)),f=n(94270),p=n(62583),m=a(n(4478)),g=n(65044),x=n(85893);class v extends r.Component{constructor(){super(...arguments),this._setRefAudio=e=>{var t;this._audioElement=e,null===(t=this._unregisterFromAudioChannel)||void 0===t||t.call(this),this._unregisterFromAudioChannel=null==e?null:s.MainAudioChannel.registerMedia(e),null!=this.props.setRefAudio&&this.props.setRefAudio(e)},this.clearCheckForSuccess=()=>{this.checkForSuccessInterval&&(this.props.clearInterval(this.checkForSuccessInterval),this.checkForSuccessInterval=0,this.checkIteration=0)},this._handlePlaying=()=>{this.clearCheckForSuccess()},this._handlePlayerError=e=>{this.clearCheckForSuccess(),this.props.onError&&this.props.onError(e.target.src)},this.checkForSuccess=()=>{if(g.Socket.state!==p.SOCKET_STATE.CONNECTED)return;this.checkIteration++;const e=this.props.url;if(this.checkIteration>40)return void this._handlePlayerError({target:{src:e,error:{code:window.MediaError.MEDIA_ERR_NETWORK}}});const t=(0,i.default)(this._audioElement,"this._audioElement").buffered;t.length&&t.end(0)>0&&this._handlePlaying()},this.startCheckForSuccess=()=>{this.checkIteration=0,this.checkForSuccessInterval=this.props.setInterval(this.checkForSuccess,250)}}pause(){var e;null===(e=this._audioElement)||void 0===e||e.pause()}componentWillUnmount(){var e;null===(e=this._unregisterFromAudioChannel)||void 0===e||e.call(this),o.UA.isBlink&&(0,c.default)((0,i.default)(this._audioElement,"this._audioElement"))}_updatePlaybackRate(){const e=(0,i.default)(this._audioElement,"this._audioElement"),{playbackRate:t}=this.props;e.defaultPlaybackRate===t&&e.playbackRate===t||(e.defaultPlaybackRate=e.playbackRate=null!=t?t:1)}componentDidUpdate(){this._updatePlaybackRate()}componentDidMount(){const{listeners:e}=this.props,t=(0,i.default)(this._audioElement,"this._audioElement");this._updatePlaybackRate(),e.add(t,"error",this._handlePlayerError,{capture:!0}),e.add(t,"playing",this._handlePlaying),(o.UA.isGecko||o.UA.isSafari)&&(this.props.autoPlay?(this.checkIteration=0,this.checkForSuccessInterval=this.props.setInterval(this.checkForSuccess,250)):this.props.autoPlay?this.startCheckForSuccess():e.add(t,"play",this.startCheckForSuccess))}render(){const e=f.ReactionBubbleType.MEDIA_ITEM,{msg:t}=this.props;return(0,x.jsxs)("div",{className:this.props.className,children:[(0,x.jsx)("audio",{ref:this._setRefAudio,className:d.default.audioTag,src:this.props.url,onClick:this.props.onClick,controls:this.props.controls,preload:this.props.preload,autoPlay:this.props.autoPlay,children:this.props.children}),t&&(0,l.shouldShowReactionBubble)(t,e)&&(0,x.jsx)(h.default,{msgIds:[t.id.toString()],reactionBubbleType:e})]})}}v.displayName="AudioTag";var C=(0,u.ListenerHOC)((0,m.default)(v));t.default=C},5577:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{docMsgs:t,chat:n}=e,a=(0,s.default)(e,x),v=(0,c.default)(),C=(0,r.useRef)(null);let _;(0,d.useListener)(t,"add remove reset query_doc_before",(()=>{var e;null===(e=C.current)||void 0===e||e.forceUpdate()})),((0,l.isMDBackend)()&&n.endOfHistoryTransferType===u.ConversationEndOfHistoryTransferModelPropType.COMPLETE_BUT_MORE_MESSAGES_REMAIN_ON_PRIMARY||n.endOfHistoryTransferType===u.ConversationEndOfHistoryTransferModelPropType.NOT_INCLUDED_IN_HIST_SYNC)&&(_=(0,g.jsx)(h.default,{icon:(0,g.jsx)(m.default,{name:"content-chat"}),theme:"list",secondary:o.fbt._("Use WhatsApp on your phone to see the complete message history.",null,{hk:"2qbSkX"}),children:o.fbt._("Older documents may be available",null,{hk:"3q5iPh"})}));return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(p.default,(0,i.default)({ref:C,msgsCollection:t,queryCollection:(e,a)=>{v((()=>{t.queryDocs(n,a)}))},hasBefore:t.hasDocBefore,queryBefore:t.queryDocBefore,emptyText:f.default.t(671),chat:n},a)),_]})};var i=a(n(81109)),s=a(n(6479)),l=n(88555),o=n(48360),r=n(67294),d=n(87550),c=a(n(74570)),u=n(63183),h=a(n(58654)),f=a(n(14296)),p=a(n(19593)),m=a(n(23217)),g=n(85893);const x=["docMsgs","chat"]},61086:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.BaseEphemeralSettingRow=x,t.EphemeralSettingRow=function(e){const{chat:t,groupMetadata:n,onClick:a,testid:i}=e;if(n)return(0,p.jsx)(g,{groupMetadata:n,onClick:a,testid:i});return(0,p.jsx)(m,{chat:t,onClick:a,testid:i})};var i=n(48360),s=n(35461),l=n(80140),o=a(n(75116)),r=n(88102),d=a(n(52665)),c=n(79259),u=a(n(14296)),h=n(41566),f=n(13923),p=n(85893);const m=function(e){const{onClick:t,testid:n}=e,a=(0,s.useModelValues)(e.chat,["contact","ephemeralDuration"]),o=()=>{var e;return null!==(e=a.ephemeralDuration)&&void 0!==e?e:0},c=()=>{a.contact.addPendingAction((0,l.unblockContact)(a.contact)).then((()=>{t(),r.Cmd.closeModal()})).catch((()=>{}))},h=()=>{r.Cmd.closeModal()};return(0,p.jsx)(x,{ephemeralDuration:o(),canChange:!0,onClick:()=>{a.contact.isContactBlocked?r.Cmd.openModal((0,p.jsx)(d.default,{onOK:c,okText:u.default.t(780),onCancel:h,cancelText:i.fbt._("Cancel",null,{hk:"H0gNq"}),children:o()?i.fbt._("You can't turn off disappearing messages for this chat unless you unblock this contact.",null,{hk:"o3zdA"}):i.fbt._("You can't turn on disappearing messages for this chat unless you unblock this contact.",null,{hk:"1uAyoI"})})):t()},testid:n})};const g=function(e){var t;const{onClick:n,testid:a}=e,l=(0,s.useModelValues)(e.groupMetadata,["ephemeralDuration","participants"]),o=()=>{r.Cmd.closeModal()};return(0,p.jsx)(x,{ephemeralDuration:null!==(t=l.ephemeralDuration)&&void 0!==t?t:0,canChange:l.canSetEphemeralSetting(),onClick:()=>{l.canSetEphemeralSetting()?n():r.Cmd.openModal((0,p.jsx)(d.default,{onOK:o,okText:i.fbt._("OK",null,{hk:"2KEeHb"}),children:i.fbt._("Only admins can change this setting.",null,{hk:"1NF1gS"})}))},testid:a})};function x(e){const{ephemeralDuration:t,canChange:n,onClick:a,testid:s}=e;let l;l=t>0?n?(0,h.isEphemeral24HDurationEnabled)()?(0,c.getDisappearingMessageDurationString)(t):u.default.t(446):(0,c.getDisappearingMessageExplanationString)(t):u.default.t(445);const r=(0,p.jsx)(f.TextSpan,{theme:"title",children:i.fbt._("Disappearing messages",null,{hk:"384ocn"})}),d=(0,p.jsx)(f.TextDiv,{theme:"muted",testid:"chat-dm-settings-item-value",children:l});return(0,p.jsx)(o.default,{side:"chevron",icon:"disappearing",onClick:a,title:r,secondaryTitle:d,testid:s})}},93528:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{linkMsgs:t,chat:n,selectedMessages:a,selectable:b,onMessageSelect:j}=e,k=(0,u.default)(),S=(0,d.useRef)(null);let M;(0,c.useListener)(t,"add remove reset",(()=>{var e;null===(e=S.current)||void 0===e||e.forceUpdate()})),(0,c.useListener)(t,"query_doc_before",(()=>{var e;null===(e=S.current)||void 0===e||e.forceUpdate()})),(0,c.useListener)(n.msgs,"add bulk_add",(e=>{if(!e)return;const n=[],a=Array.isArray(e)?e:[e];Promise.all(a.map((e=>(e.getLinks().length&&n.push(e),Promise.resolve())))).then((()=>{n.length&&t.add(n)}))})),((0,l.isMDBackend)()&&n.endOfHistoryTransferType===h.ConversationEndOfHistoryTransferModelPropType.COMPLETE_BUT_MORE_MESSAGES_REMAIN_ON_PRIMARY||n.endOfHistoryTransferType===h.ConversationEndOfHistoryTransferModelPropType.NOT_INCLUDED_IN_HIST_SYNC)&&(M=(0,C.jsx)(f.default,{icon:(0,C.jsx)(v.default,{name:"content-chat"}),theme:"list",secondary:r.fbt._("Use WhatsApp on your phone to see the complete message history.",null,{hk:"2qbSkX"}),children:r.fbt._("Older links may be available",null,{hk:"1Hs22g"})}));const{linkMsgs:T,chat:E}=e,y=(0,s.default)(e,_);return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(g.default,(0,i.default)({ref:S,msgsCollection:t,queryCollection:(e,a)=>{k((()=>{t.queryLinks(n,a)}))},hasBefore:t.hasLinkBefore,queryBefore:t.queryLinkBefore,renderElements:e=>{const n=[];return t.forEach((t=>{const i=!t.isSentByMe&&t.isGroupMsg;t.getGalleryLinks().forEach(((s,l)=>{s.href!==t.matchedText&&n.push((0,C.jsx)(m.default,{msg:t.safe(),link:s,displayAuthor:i,selectable:b,selectedMessages:a,onMessageSelect:j,onClickMsg:e},`${t.id.toString()}-${l}`))})),t.linkPreview&&n.push((0,C.jsx)(x.default,{msg:t,selectable:b,selectedMessages:a,onMessageSelect:j,displayType:o.DISPLAY_TYPE.GALLERY,onClickMsg:e},t.id.toString()))})),n.reverse(),n},emptyText:p.default.t(673),chat:n},y)),M]})};var i=a(n(81109)),s=a(n(6479)),l=n(88555),o=n(5177),r=n(48360),d=n(67294),c=n(87550),u=a(n(74570)),h=n(63183),f=a(n(58654)),p=a(n(14296)),m=a(n(36576)),g=a(n(19593)),x=a(n(35563)),v=a(n(23217)),C=n(85893);const _=["linkMsgs","chat"]},36576:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{link:t,displayAuthor:n,selectedMessages:a,onMessageSelect:b,onClickMsg:j}=e,k=(0,d.useModelValues)(e.msg,["body","caption","dir","id","isSentByMe","mediaData","type","rtl","senderObj","star","mediaData","asRevoked"]),[S,M]=(0,o.useState)(!1),[T,E]=(0,o.useState)((()=>a.isSelected(k.unsafe())));(0,r.useListener)(a,k.id.toString(),(e=>{T!==e&&E(e)}));const y=e.selectable||S?(0,_.jsx)(x.default,{checked:T,onClick:e=>{e&&e.stopPropagation(),b(k.unsafe(),!T)},msgTheme:"gallery"}):null,P=(0,u.Conversation)({mentions:k.mentionMap(),links:k.getLinks(),phoneNumbers:k.getPhoneNumbers(),selectable:true,trusted:k.isTrusted()}),I=k.body&&k.body.includes(t.url)?k.body:k.caption,w=n?(0,_.jsx)("div",{className:m.default.author,children:(0,_.jsx)(c.default,{msg:k,contact:k.senderObj})}):null,A=k.getSuspiciousLinks().length>0;return(0,_.jsx)(f.default,{hover:S,onClick:()=>{j(k.unsafe(),!T)},onMouseEnter:S?null:()=>{S||M(!0)},onMouseOver:S?null:()=>{S||M(!0)},onMouseLeave:S?()=>{S&&M(!1)}:null,children:(0,_.jsxs)("div",{className:m.default.msg,children:[(0,_.jsx)(s.default,{transitionName:"delay-leave",children:y}),(0,_.jsx)(C.MessageContainer,{isSentByMe:k.isSentByMe,children:(0,_.jsxs)("div",{className:(0,l.default)(m.default.bubble,{[m.default.hasAuthor]:n,[m.default.hasSuspiciousLinks]:A}),children:[w,(0,_.jsx)(v.SuspiciousLabel,{link:t,displayType:i.DISPLAY_TYPE.GALLERY}),(0,_.jsx)(g.default,{title:t.url,isSentByMe:k.isSentByMe,canonicalUrl:t.domain,displayType:i.DISPLAY_TYPE.GALLERY,star:k.star}),(0,_.jsx)(h.EmojiText,{text:I,selectable:true,className:m.default.text,dirMismatch:k.rtl!==p.default.isRTL(),direction:k.dir,formatters:P})]})})]})})};var i=n(5177),s=a(n(40436)),l=a(n(94184)),o=n(67294),r=n(87550),d=n(35461),c=a(n(72655)),u=n(74331),h=n(65417),f=a(n(23296)),p=a(n(14296)),m=a(n(8767)),g=a(n(51845)),x=a(n(20485)),v=n(7538),C=n(58827),_=n(85893)},88224:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{fullCollection:t,selectedMessages:n,mediaMsgs:a,selectable:_,onMessageSelect:S,theme:I}=e,w=(0,m.useModelValues)(e.chat,["linkCount","docCount","productCount","endOfHistoryTransferType"]),A=(0,f.default)(),N=(0,x.default)();(0,p.useListener)(a,"add query_media_before",(()=>{A()})),(0,p.useListener)(a,"remove",(e=>{n&&n.isSelected(e)&&n.setVal(e,!1),A()})),(0,p.useListener)(a,"reset",(()=>{n&&n.unsetAll(),A()}));const D=function(e,t,n,a,o,d){let c=null;const u=(0,l.default)(e,(e=>-e.t)).filter(P).slice(0,!0===t?e.length:6);return(0,s.default)(u,((e,s)=>{const l=!0!==t&&s>=3&&s<=5?"hideableSecondRow":void 0,u=(0,E.jsx)(b.default,{className:(0,h.default)(d&&y.roundedThumb),aspectRatio:d?1.1:1,msg:e,hoverEvent:t,selectable:n,selectedMessages:a,onMessageSelect:o,theme:l},e.id.toString());if(!0!==t)return[u];const f=r.Clock.monthStr(e.t);if(f!==c){c=f;const t=(0,E.jsx)(j.default,{children:f},`header-${e.t}`);return[...(0,i.default)(6,(t=>(0,E.jsx)(k.EmptyCanvas,{},`padding-${e.t}-${t}`))),t,u]}return[u]}))}(a.toArray(),t,_,n,S,"chat-info"===I),O=e=>{a.hasMediaBefore&&N((()=>{a.queryMedia({chat:(0,M.unproxy)(w),msg:e})}))},R=(0,g.default)((e=>{a.hasMediaBefore&&e.scrollTop+d.SCROLL_FUDGE>e.scrollHeight-e.clientHeight&&O(a.head())}),100);let L;if((0,u.useEffect)((()=>{a.hasMediaBefore&&O()}),[]),(0,o.isMDBackend)()&&w.endOfHistoryTransferType===v.ConversationEndOfHistoryTransferModelPropType.COMPLETE_BUT_MORE_MESSAGES_REMAIN_ON_PRIMARY||w.endOfHistoryTransferType===v.ConversationEndOfHistoryTransferModelPropType.NOT_INCLUDED_IN_HIST_SYNC){let e;!0===t?e=c.fbt._("Older media may be available",null,{hk:"1ml0rh"}):0===a.length&&0===w.docCount&&0===w.linkCount&&0===w.productCount&&(e=c.fbt._("Older files may be available",null,{hk:"2BvwwV"})),L="chat-info"===I?(0,E.jsx)(C.default,{theme:"chat-info",secondary:c.fbt._("Use WhatsApp on your phone to see the complete message history.",null,{hk:"2qbSkX"}),children:e}):(0,E.jsx)(C.default,{icon:(0,E.jsx)(T.default,{name:"content-chat"}),theme:"list",secondary:c.fbt._("Use WhatsApp on your phone to see the complete message history.",null,{hk:"2qbSkX"}),children:e})}return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(k.MediaGalleryView,{medias:D,mediaCollection:a,fullCollection:t,chat:(0,M.unproxy)(w),onScroll:e=>{R(e.currentTarget)},theme:I}),L]})};var i=a(n(98913)),s=a(n(94654)),l=a(n(89734)),o=n(88555),r=n(40234),d=n(41906),c=n(48360),u=n(67294),h=a(n(56720)),f=a(n(59312)),p=n(87550),m=n(35461),g=a(n(90886)),x=a(n(74570)),v=n(63183),C=a(n(58654)),_=n(57701),b=a(n(11858)),j=a(n(73307)),k=n(60263),S=n(41908),M=n(31019),T=a(n(23217)),E=n(85893);const y={roundedThumb:{marginEnd:"bugiwsl0",overflowX:"gfz4du6o",overflowY:"r7fjleex",borderTopStartRadius:"bbr44loe",borderTopEndRadius:"ooj5yc5b",borderBottomEndRadius:"m8i16etx",borderBottomStartRadius:"cw0ivh8j"}};function P(e){return!!(0,_.isMediaGalleryFixEnabled)()||(!(0,o.isMDBackend)()||(0,S.hasThumbnail)(e.mediaData))}},11858:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{msg:t,hoverEvent:n,selectable:a,onMessageSelect:p,theme:m,className:g,selectedMessages:x}=e,[v,C]=(0,s.useState)((()=>!(!x||!x.isSelected(t)))),_=(0,s.useRef)(null);(0,l.useListener)(x,t.id.toString(),(e=>{x&&v!==e&&C(e)}));const b=t.mediaData,j=b.type===r.default.TYPE.IMAGE&&b.renderableUrl?e=>{e.nativeEvent.dataTransfer.setData("text/uri-list",t.mediaData.renderableUrl)}:null,k=(0,i.default)(g);return(0,f.jsx)(c.MediaThumb,{classes:k,onClick:e=>{if(a&&p)return void p(t,!v);if(b.mediaStage===u.MEDIA_DATA_STAGE.ERROR_MISSING)return void o.Cmd.openModal((0,f.jsx)(d.default,{msg:t}));let n;e&&e.stopPropagation();const i=t.id;if(b.isGif||b.type===r.default.TYPE.IMAGE){const e=_.current;n=t=>i.equals(t)&&e?e:null}o.Cmd.mediaViewerModal({msg:(0,h.unproxy)(t),getZoomNode:n})},hoverEvent:n,selectable:a,selected:v,onMessageSelect:p,onDragStart:j,msg:t,theme:m,imgRef:e=>{_.current=e},aspectRatio:e.aspectRatio})};var i=a(n(94184)),s=n(67294),l=n(87550),o=n(88102),r=a(n(2320)),d=a(n(20668)),c=n(41908),u=n(58668),h=n(31019),f=n(85893)},73307:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,s.jsx)("div",{className:i.default.container,children:e.children})};var i=a(n(11354)),s=n(85893)},41908:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.MediaThumb=function(e){var t;const{msg:n,selectable:a,theme:h,active:y,imgRef:P,containerRef:I,onMessageSelect:w,selected:A=!1,onClick:N,onDragStart:D,preferPreview:O}=e,R=(0,l.default)(),L=(0,s.useRef)(null),B=(0,s.useRef)(null),G=(0,s.useRef)(null),[F,V]=(0,s.useState)(!1),[U,H]=(0,s.useState)(null);(0,o.useListener)(n.mediaData,["change:preview","change:mediaStage"],R);(0,s.useEffect)((()=>(null==P||P(L.current),null==I||I(B.current),null==n.mediaData.preview&&null==n.mediaData.fullPreviewData&&(n.mediaData.type!==f.default.TYPE.IMAGE&&n.mediaData.type!==f.default.TYPE.VIDEO||n.downloadMedia({downloadEvenIfExpensive:!1,isUserInitiated:!1,rmrReason:b.default.WEBC_RMR_REASON_CODE.MEDIA_VIEWER})),()=>{null==P||P(null),null==I||I(null)})),[]),(0,s.useEffect)((()=>{null==P||P(L.current),null==I||I(B.current)}),[P,I,L,B]);const q=()=>{w&&w(n,!A)},W=()=>{F||V(!0)},Y=t=>{if(!0!==e.showTooltip||"viewerFlowTransparent"===h||!(t instanceof HTMLElement))return null;const a=t.offsetWidth;return{menu:(0,M.jsx)(C.default,{msg:n}),anchor:t,dirY:c.DirY.TOP,dirX:c.DirX.CENTER,offsetX:!0===y?.5*-a*.13:0,type:c.MenuType.Tooltip}},[z,K]=(0,r.useTimeout)((()=>{var e;G.current&&(e=G.current,H(Y(e)))}),500),X=e=>{var t;F||(e.persist(),V(!0),t=e.target,G.current=t,z())},Z=()=>{F&&(K(),V(!1),H(null))},$=function(e){const{mediaStage:t,preview:n,fullPreviewData:a}=e;switch(t){case _.MEDIA_DATA_STAGE.RESOLVED:case _.MEDIA_DATA_STAGE.PROGRESSIVE_READY:case _.MEDIA_DATA_STAGE.EXISTS:return T.Ready;case _.MEDIA_DATA_STAGE.INIT:return null!=n||null!=a?T.Ready:T.Loading;case _.MEDIA_DATA_STAGE.REMOTE_NEED_UPLOAD:case _.MEDIA_DATA_STAGE.NEED_UPLOAD:return T.NeedsUpload;case _.MEDIA_DATA_STAGE.FETCHING:case _.MEDIA_DATA_STAGE.DECRYPTING:case _.MEDIA_DATA_STAGE.PREPARING:case _.MEDIA_DATA_STAGE.UPLOADING:case _.MEDIA_DATA_STAGE.SENDING:case _.MEDIA_DATA_STAGE.REMOTE_UPLOADING:case _.MEDIA_DATA_STAGE.FINALIZING:case _.MEDIA_DATA_STAGE.REUPLOADING:return T.Loading;case _.MEDIA_DATA_STAGE.NEED_POKE:return T.NeedsPoke;case _.MEDIA_DATA_STAGE.ERROR_FILE_NOT_READABLE:case _.MEDIA_DATA_STAGE.ERROR_MISSING:case _.MEDIA_DATA_STAGE.ERROR_TOO_LARGE:case _.MEDIA_DATA_STAGE.ERROR_UNSUPPORTED:return T.Error}}(n.mediaData);let Q;(!0===a||F&&e.hoverEvent)&&(Q=(0,M.jsxs)("div",{className:m.default.mediaSelect,children:[(0,M.jsx)("div",{className:(0,i.default)(m.default.shadeTop,{[m.default.noPointerEvents]:$!==T.Ready}),onClick:e.onClick}),(0,M.jsx)(d.default,{onChange:q,hover:F,checked:A})]}));const J=(0,i.default)(e.classes,m.default.canvasComponent,{[m.default.canvasSelected]:A,[m.default.mediaGalleryThumbnail]:"hideableSecondRow"!==h,[m.default.chatInfoDrawerThumbnail]:"hideableSecondRow"===h,[m.default.canvasSecondRow]:"hideableSecondRow"===h,[m.default.viewerFlow]:"viewerFlow"===h||"viewerFlowTransparent"===h,[m.default.viewerFlowTransparent]:"viewerFlowTransparent"===h,[m.default.active]:y}),ee=n.star?(0,M.jsx)("div",{className:m.default.iconStar,children:(0,M.jsx)(j.default,{name:"star"})}):null,te=E(n.mediaData),ne=U?(0,M.jsx)(k.UIE,{displayName:"MediaThumbTitle",popable:!0,escapable:!0,requestDismiss:()=>{H(null)},requestRecentFocusOnUnmount:!1,children:(0,M.jsx)(S.default,{tooltip:U})}):null,ae={paddingTop:1/(null!==(t=e.aspectRatio)&&void 0!==t?t:1)*100+"%"},ie=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];n.downloadMedia({downloadEvenIfExpensive:e,isUserInitiated:!1,rmrReason:b.default.WEBC_RMR_REASON_CODE.MEDIA_VIEWER})};if((0,u.isMediaGalleryFixEnabled)()){let t;switch($){case T.Loading:t=(0,M.jsx)(v.MediaThumbLoading,{mediaType:n.mediaData.type});break;case T.NeedsPoke:t=(0,M.jsx)(v.MediaThumbNeedsPoke,{onClick:()=>ie(!0)});break;case T.Error:t=(0,M.jsx)(v.MediaThumbError,{onClick:e.onClick,mediaType:n.mediaData.type});break;case T.NeedsUpload:case T.Ready:t=null}return(0,M.jsxs)("div",{ref:B,className:J,"data-testid":"media-canvas",onMouseOver:W,onMouseEnter:X,onMouseLeave:Z,children:[Q,(0,M.jsxs)("div",{className:m.default.canvasBody,children:[(0,M.jsx)(x.default,{mediaData:n.mediaData}),(0,M.jsx)(g.default,{mediaData:n.mediaData,selected:A}),ee]}),(0,M.jsx)(p.default,{downloadMedia:ie,onClick:N,onDragStart:D,preferPreview:O,ref:L,msg:n}),ne,t,(0,M.jsx)("div",{style:ae})]})}return te?(0,M.jsxs)("div",{ref:B,className:J,"data-testid":"media-canvas",onMouseOver:W,onMouseEnter:X,onMouseLeave:Z,children:[Q,(0,M.jsxs)("div",{className:m.default.canvasBody,children:[(0,M.jsx)(x.default,{mediaData:n.mediaData}),(0,M.jsx)(g.default,{mediaData:n.mediaData,selected:A}),ee]}),(0,M.jsx)(p.default,{downloadMedia:ie,onClick:N,onDragStart:D,preferPreview:O,ref:L,msg:n}),ne,(0,M.jsx)("div",{style:ae})]}):null},t.hasThumbnail=E;var i=a(n(94184)),s=n(67294),l=a(n(59312)),o=n(87550),r=n(46428),d=a(n(9275)),c=n(60811),u=n(57701),h=n(84866),f=a(n(2320)),p=a(n(97665)),m=a(n(52901)),g=a(n(5471)),x=a(n(19395)),v=n(90423),C=a(n(8488)),_=n(58668),b=a(n(11339)),j=a(n(23217)),k=n(18644),S=a(n(46780)),M=n(85893);const T=n(76672).Mirrored(["Loading","Ready","Error","NeedsPoke","NeedsUpload"]);function E(e){if((0,u.isMediaGalleryFixEnabled)())return!0;switch(e.type){case f.default.TYPE.VIDEO:case f.default.TYPE.IMAGE:if(null!=e.preview||null!=e.fullPreviewData||e.mediaStage===_.MEDIA_DATA_STAGE.RESOLVED)return!0;if(h.MediaBlobCache.has(e.filehash)){try{h.MediaBlobCache.getOrCreateURL(e.filehash)}catch(e){return!1}return!0}return!1;default:return!0}}},97665:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(81109)),s=a(n(94184)),l=n(67294),o=a(n(2320)),r=a(n(65383)),d=n(58668),c=a(n(20553)),u=a(n(34949)),h=n(85893);const f=(0,l.forwardRef)(((e,t)=>{let{children:n,className:a,shade:i,url:s,onClick:l,onDragStart:o}=e;const d=!0===i?(0,h.jsx)("div",{className:r.default.shade}):null,c=null!=s&&""!==s?{backgroundImage:`url(${s})`}:null;return(0,h.jsxs)("div",{className:a,"data-testid":"media-canvas-img",style:c,onClick:l,ref:t,onDragStart:o,draggable:null!=o||null,children:[n,d]})})),p=(0,l.forwardRef)(((e,t)=>{let{mediaData:n,onClick:a,onDragStart:i,shade:l,shouldApplyBlur:o,url:d}=e;return(0,h.jsx)(f,{ref:t,onClick:a,onDragStart:i,className:(0,s.default)(r.default.mediaCanvas,{[r.default.blur]:o}),shade:l,url:n.preview instanceof u.default?n.preview.url():null,children:null!=d?(0,h.jsx)("div",{className:r.default.mediaCanvas,style:{backgroundImage:`url(${d})`}}):null})}));p.displayName="ImageThumb";const m=(0,l.forwardRef)(((e,t)=>{let{mediaData:n,onClick:a,onDragStart:i,shade:s,shouldApplyBlur:l,url:o}=e;return null!=n.preview?(0,h.jsx)(p,{ref:t,onClick:a,onDragStart:i,mediaData:n}):(0,h.jsx)(f,{ref:t,onClick:a,onDragStart:i,className:r.default.mediaCanvas,shade:s})}));m.displayName="Placeholder";var g=(0,l.forwardRef)(((e,t)=>{let{downloadMedia:n,msg:a,onClick:l,onDragStart:g,preferPreview:x}=e;const{mediaData:v}=a,C={onClick:l,onDragStart:g,ref:t};switch(v.type){case o.default.TYPE.AUDIO:return(0,h.jsx)(f,(0,i.default)((0,i.default)({},C),{},{className:`${r.default.mediaCanvas} attach-media-audio-thumb`}));case o.default.TYPE.VIDEO:{var _;const e=null==v.fullPreviewData,t=null!==(_=v.fullPreviewData)&&void 0!==_?_:v.preview;return(0,h.jsx)(f,(0,i.default)((0,i.default)({},C),{},{className:(0,s.default)(r.default.mediaCanvas,{"media-video-thumb":v.isGif&&!v.preview,[r.default.blur]:e}),shade:!0,url:t instanceof u.default?t.url():null}))}case o.default.TYPE.IMAGE:const e=null!=v.preview&&v.mediaStage===d.MEDIA_DATA_STAGE.NEED_POKE;return!0===x?(0,h.jsx)(m,(0,i.default)((0,i.default)({},C),{},{mediaData:v,shade:a.star,shouldApplyBlur:e})):(0,h.jsx)("div",{className:r.default.mediaCanvas,children:(0,h.jsx)(c.default,{mediaData:v,placeholderRenderer:()=>(0,h.jsx)(m,(0,i.default)((0,i.default)({},C),{},{mediaData:v,shade:a.star,shouldApplyBlur:e})),renderProgressively:!0,downloadMedia:n,children:t=>(0,h.jsx)(p,(0,i.default)((0,i.default)({},C),{},{mediaData:v,shade:a.star,shouldApplyBlur:e,url:t}))})});default:return(0,h.jsx)(f,(0,i.default)((0,i.default)({},C),{},{shade:a.star}))}}));t.default=g},5471:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{selected:t,mediaData:n}=e;switch(n.type){case l.default.TYPE.AUDIO:return(0,r.jsx)(d,{duration:n.duration,selected:t});case l.default.TYPE.VIDEO:return n.isGif?null:(0,r.jsx)(d,{duration:n.duration,selected:t});default:return null}};var i=n(40234),s=a(n(94184)),l=a(n(2320)),o=a(n(54963)),r=n(85893);function d(e){let{duration:t,selected:n}=e;const a=i.Clock.durationStr(t);return a?(0,r.jsx)("span",{className:(0,s.default)(o.default.container,{[o.default.selected]:n}),children:a}):null}},19395:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{mediaData:t}=e;if(!t)return null;const n=function(e){switch(e.type){case i.default.TYPE.AUDIO:return"msg-audio";case i.default.TYPE.VIDEO:return e.isGif?"msg-gif":"msg-video";default:return null}}(t);return null==n?null:(0,o.jsx)("div",{className:s.default.iconType,children:(0,o.jsx)(l.default,{name:n})})};var i=a(n(2320)),s=a(n(17429)),l=a(n(23217)),o=n(85893)},90423:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.MediaThumbError=function(e){return(0,o.jsx)("button",{className:(0,i.default)(r),onClick:e.onClick,children:(0,o.jsx)(c,{mediaType:e.mediaType})})},t.MediaThumbLoading=function(e){return(0,o.jsx)("div",{className:(0,i.default)(r),children:(0,o.jsx)(c,{mediaType:e.mediaType})})},t.MediaThumbNeedsPoke=function(e){return(0,o.jsx)("div",{className:(0,i.default)(r),children:(0,o.jsx)(s.Download,{onClick:e.onClick})})};var i=a(n(56720)),s=n(41124),l=a(n(23217)),o=n(85893);const r={position:"lhggkp7q",top:"qq0sjtgm",start:"tkdu00h0",zIndex:"jnl3jror",boxSizing:"cm280p3y",display:"p357zi0d",alignItems:"gndfcl4n",justifyContent:"ac2vgrno",width:"ln8gz9je",height:"ppled2lx"},d={color:"cyi0n1nm"};function c(e){const t="video"===e.mediaType?"video-placeholder":"img-placeholder";return(0,o.jsx)(l.default,{name:t,className:(0,i.default)(d)})}},8488:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{msg:{senderObj:{formattedShortName:t}}}=e;return(0,i.jsx)(a.TextSpan,{children:t})};var a=n(13923),i=n(85893)},19593:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(5177),s=n(41906),l=n(67294),o=a(n(59312)),r=a(n(90886)),d=n(88102),c=n(85600),u=a(n(29796)),h=a(n(68198)),f=a(n(35563)),p=n(31019),m=n(85893);function g(e,t){const{queryBefore:n,hasBefore:a,msgsCollection:g,emptyText:x,scrollOffset:v=0,selectable:C,onMessageSelect:_,queryCollection:b,selectedMessages:j,renderElements:k,onProductDetail:S,setScrollOffset:M}=e,T=(0,o.default)();(0,l.useImperativeHandle)(t,(()=>({forceUpdate:T})));const E=(0,l.useRef)(null),y=e=>{a&&b(e)},P=(0,r.default)((e=>{const t=e.scrollHeight-e.clientHeight-e.scrollTop;a&&t<s.SCROLL_FUDGE&&y(g.head()),M&&M(e.scrollTop)}),100);(0,l.useEffect)((()=>{a&&y();const e=E.current;return e&&(e.scrollTop=v),()=>{P.cancel()}}),[]);const I=(e,t)=>{const n=(0,p.unproxy)(e);C&&void 0!==t?_(n,t):d.Cmd.openChatAt(n.chat,n.chat.getSearchContext(n))},w=k?k(I):g.map(((e,t)=>(0,m.jsx)(f.default,{msg:e,selectable:C,selectedMessages:j,onMessageSelect:_,displayType:i.DISPLAY_TYPE.GALLERY,onClickMsg:I,onProductClick:S},`${e.id.toString()}_${t}`))).reverse();if(n){if(0===w.length)return(0,m.jsx)(c.Loading,{});w.push((0,m.jsx)(u.default,{}))}return 0!==g.length||n||a?(0,m.jsx)("div",{ref:E,onScroll:e=>{P(e.target)},className:h.default.wrapper,children:w}):(0,m.jsx)(c.Empty,{text:x,a8nText:"no-elements"})}var x=(0,l.forwardRef)(g);t.default=x},3721:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,o.useModelValues)(e.chat,["isGroup","muteExpiration","archive"]),n=(0,o.useModelValues)(e.mute,["isMuted"]),a=(0,o.useModelValues)(e.settings,["showArchiveV2"]),v=e=>{d.Cmd.muteChat((0,p.unproxy)(t),e)},C=()=>{v(!1),d.Cmd.closeModal()},_=n.isMuted,b=t.muteExpiration;if(t.archive&&(0,h.archiveV2Supported)()&&a.showArchiveV2)return(0,x.jsx)(u.default,{children:(0,x.jsx)(g.TextSpan,{theme:"muted",size:"16",children:l.fbt._("Archived chats are muted",null,{hk:"31ZVD"})})});const j=_?()=>{const e=t.isGroup?f.default.t(356):f.default.t(355);d.Cmd.openModal((0,x.jsx)(c.default,{onOK:C,okText:f.default.t(39),onCancel:()=>d.Cmd.closeModal(),cancelText:l.fbt._("Cancel",null,{hk:"H0gNq"}),children:e}))}:()=>{v(!0)},k=_?f.default.t(854):l.fbt._("Mute notifications",null,{hk:"2Fm15X"});let S;if(_&&b){const e=s.Clock.untilStr(b);S=(0,x.jsx)(g.TextDiv,{theme:"muted",children:e})}const M=(0,x.jsx)(m.default,{checked:_,onChange:j}),T=(0,x.jsx)(g.TextSpan,{theme:"title",children:k});return(0,x.jsx)(r.default,{icon:"settings-notifications",a8nText:i.default.key("block-mute"),side:M,onClick:j,title:T,secondaryTitle:S})};var i=a(n(99964)),s=n(40234),l=n(48360),o=n(35461),r=a(n(75116)),d=n(88102),c=a(n(52665)),u=a(n(35721)),h=n(57701),f=a(n(14296)),p=n(31019),m=a(n(3271)),g=n(13923),x=n(85893)},99108:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{productMsgs:t,chat:n}=e,a=(0,s.default)(e,g),x=(0,r.useRef)(null);(0,d.useListener)(t,"add remove reset",(()=>{var e;null===(e=x.current)||void 0===e||e.forceUpdate()}));const v=(0,c.default)();let C;((0,l.isMDBackend)()&&n.endOfHistoryTransferType===u.ConversationEndOfHistoryTransferModelPropType.COMPLETE_BUT_MORE_MESSAGES_REMAIN_ON_PRIMARY||n.endOfHistoryTransferType===u.ConversationEndOfHistoryTransferModelPropType.NOT_INCLUDED_IN_HIST_SYNC)&&(C=(0,m.jsx)(h.default,{icon:(0,m.jsx)(p.default,{name:"content-chat"}),theme:"list",secondary:o.fbt._("Use WhatsApp on your phone to see the complete message history.",null,{hk:"2qbSkX"}),children:o.fbt._("Older products may be available",null,{hk:"3RBDLB"})}));return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(f.default,(0,i.default)({ref:x,msgsCollection:t,queryCollection:e=>v((()=>{t.queryProducts(n,e)})),hasBefore:t.hasProductBefore,queryBefore:t.hasProductBefore?Promise.resolve():null,emptyText:o.fbt._("No products",null,{hk:"8o7dB"}),chat:n},a)),C]})};var i=a(n(81109)),s=a(n(6479)),l=n(88555),o=n(48360),r=n(67294),d=n(87550),c=a(n(74570)),u=n(63183),h=a(n(58654)),f=a(n(19593)),p=a(n(23217)),m=n(85893);const g=["productMsgs","chat"]},38261:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{stickerPackId:t,onStickerPackView:n,stickerPackViewDelay:a}=e,f=function(e){(0,l.useEffect)((()=>{e&&u.StickerPackCollectionMd.fetchStickerPack(e)}),[e]);return(0,o.default)(u.StickerPackCollectionMd,"add remove reset",(()=>null!=e?u.StickerPackCollectionMd.get(e):null))}(t);let p;(0,i.isMDBackend)()&&t&&(p=(0,h.jsx)(r.default,{onClick:e=>{e.stopPropagation(),n&&n(),null!=a?setTimeout((()=>d.Cmd.openStickerPack(t)),a+150):d.Cmd.openStickerPack(t)},type:"secondary",children:s.fbt._("View Pack",null,{hk:"tAlU3"})}));return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(c.StickerDetailsStickerPackInfo,{name:null==f?void 0:f.name,publisher:null==f?void 0:f.publisher,theme:c.Theme.MediaViewer}),p]})};var i=n(88555),s=n(48360),l=n(67294),o=a(n(96570)),r=a(n(39770)),d=n(88102),c=n(10595),u=n(44333),h=n(85893)},3271:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{checked:t,onChange:n,tabIndex:a,id:c}=e;const u=(0,i.useRef)(null),[h,f]=(0,l.default)(),p=(0,o.default)(u,h);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("input",{ref:p,className:(0,s.default)(d.hiddenInput),checked:t,onChange:function(e){e.stopPropagation();const t=u.current;null!=t&&t.focus(),n(e)},type:"checkbox",tabIndex:null!=a?a:0,id:c}),(0,r.jsxs)("div",{className:(0,s.default)(d.container),onClick:function(){const e=u.current;null!=e&&e.click()},tabIndex:-1,"aria-hidden":"true","data-testid":"visual-switch",children:[(0,r.jsx)("div",{className:(0,s.default)(d.button,t&&d.buttonChecked,f&&d.buttonFocused)}),(0,r.jsx)("div",{className:(0,s.default)(d.track,t&&d.trackChecked)})]})]})};var i=n(67294),s=a(n(56720)),l=a(n(85647)),o=a(n(78506)),r=n(85893);const d={container:{display:"i86elurf",justifyContent:"ac2vgrno",alignItems:"gndfcl4n",width:"tknnhhou",height:"jdwybkuq",marginTop:"g1eqewly",marginEnd:"kjemk6od",marginBottom:"kzyzudjh",marginStart:"k6y3xtnu",position:"g0rxnol2",cursor:"ajgl1lbb"},button:{height:"jdwybkuq",width:"m0s4cjtr",borderTopStartRadius:"ikqdvm1y",borderTopEndRadius:"m3qqxsiz",borderBottomEndRadius:"r1ncx0sg",borderBottomStartRadius:"mmj7r7ye",backgroundColor:"lbj9vhti",position:"lhggkp7q",left:"tukmaf4q",transitionProperty:"bo8jc6qi",transitionDuration:"nbciif1m",transitionTimingFunction:"oa9ii99z",boxShadow:"hjje1qk3"},buttonChecked:{transform:"e95mh68g",backgroundColor:"my8w5w2u"},buttonFocused:{boxShadow:"r6unq4of"},track:{width:"tknnhhou",height:"icj6mcig",backgroundColor:"masnrobp",borderTopStartRadius:"i3rsbmdh",borderTopEndRadius:"d6h2ibm4",borderBottomEndRadius:"rh5xaqwm",borderBottomStartRadius:"e6tbvuqx"},trackChecked:{backgroundColor:"hza3nq4c"},hiddenInput:{position:"lhggkp7q",width:"cxec7x23",height:"kanlod6e",overflowX:"gfz4du6o",overflowY:"r7fjleex",clip:"nmeg1xfo",clipPath:"okm7a8wg",whiteSpace:"le5p0ye3"}}},16947:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(48360),s=n(88102),l=a(n(52665)),o=n(19380),r=n(65417),d=a(n(32973)),c=a(n(14296)),u=n(89389),h=n(56728),f=n(18963),p=n(85893);class m extends d.default{constructor(){super(...arguments),this._isGroupParticipant=e=>{var t;const{chat:n}=this.props;return!!(null===(t=n.groupMetadata)||void 0===t?void 0:t.participants.get(e))},this.customSecondaryText=e=>{var t;const{chat:n}=this.props;return(null===(t=n.groupMetadata)||void 0===t?void 0:t.participants.get(e))?i.fbt._("Already added to group",null,{hk:"4hdDHF"}).toString():null},this.contactFilter=e=>{const t=this.props.chat.groupMetadata;return!!o.ContactCollection.isFilteredContact(e)&&(!(null==t?void 0:t.participants.get(e.id))||i.fbt._("Already added to group",null,{hk:"4hdDHF"}).toString())},this.confirmAddParticipant=e=>{const{chat:t}=this.props;this.push((0,p.jsx)(l.default,{onOK:this._handleAddParticipant.bind(this,e),okText:i.fbt._({"*":"Add participants",_1:"Add participant"},[i.fbt._plural(e.length)],{hk:"4pSXvk"}),onCancel:this._pop,cancelText:i.fbt._("Cancel",null,{hk:"H0gNq"}),children:(0,p.jsx)(r.EmojiText,{text:this._makeNameEnumeration(e,t.contact.name)})}))},this._makeNameEnumeration=(e,t)=>{const n=e.map((e=>e.formattedShortName||e.shortName)).reduce(((t,n,a)=>[...t,n,a!==e.length-1&&c.default.t(406)||""]),[]);return c.default.t(342,{participants:n.join(""),subject:t})},this._handleAddParticipant=e=>{(0,u.addParticipants)(this.props.chat,e).catch((()=>{})),s.Cmd.closeModal()},this._pop=()=>{this.pop()}}componentDidMount(){this.push((0,p.jsx)(h.SelectModal,{onConfirm:this.confirmAddParticipant,filter:this.contactFilter,title:i.fbt._("Add participant",null,{hk:"48ECfz"}),isDisabled:this._isGroupParticipant,isSelected:this._isGroupParticipant,customSecondaryText:this.customSecondaryText,listType:h.ListType.PARTICIPANT_MANAGE_MODAL,singleSelectionFooterType:f.FooterType.CONFIRM,multipleSelectionFooterType:f.FooterType.CONFIRM,shouldShowSelectionSummary:!1}))}}t.default=m},42237:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(62921)),s=a(n(23297)),l=a(n(32973)),o=a(n(68132)),r=n(85893);class d extends l.default{constructor(){super(...arguments),this._showArchiveSettingsDrawer=()=>{this.push((0,r.jsx)(i.default,{settings:o.default,onClose:this._pop}))},this._pop=()=>{this.pop()}}componentDidMount(){this.push((0,r.jsx)(s.default,{showSettings:this._showArchiveSettingsDrawer,onClose:this._pop,settings:o.default}))}}t.default=d},90727:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(48926)),s=n(48360),l=n(67294),o=n(93581),r=n(27105),d=n(83657),c=a(n(60453)),u=a(n(69637)),h=n(94790),f=a(n(32973)),p=n(85893);class m extends f.default{componentDidMount(){this.push((0,p.jsx)(g,{contactId:this.props.contactId,onClose:this.pop}))}}function g(e){const{contactId:t}=e,[n,a]=(0,l.useState)(void 0),[f,m]=(0,l.useState)(!0);(0,l.useEffect)((()=>{(function(){var e=(0,i.default)((function*(){const e=yield o.BusinessProfileCollection.update(t,{getMerchantCompliance:!0}),n=(Array.isArray(e)?e[0]:e).serialize();n?(a(n.legalEntityDetails||void 0),m(!1)):__LOG__(3)`compliance: cannot fetch business details (${t.toString()})`}));return function(){return e.apply(this,arguments)}})()()}),[]);const{entityName:g,customerCareDetails:x,grievanceOfficerDetails:v}=null!=n?n:{},C=(0,d.getEntityTypeText)(n);return(0,p.jsxs)(c.default,{theme:"striped",children:[(0,p.jsx)(h.DrawerHeader,{title:s.fbt._("Business details",null,{hk:"m9xzp"}),type:h.DRAWER_HEADER_TYPE.SMALL,onCancel:e.onClose}),(0,p.jsx)(u.default,{theme:f?"center-content":void 0,children:f?(0,p.jsx)(r.ComplianceInfoLoading,{}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(r.ComplianceInfoGroup,{children:[(0,p.jsx)(r.ComplianceInfoPrimitiveField,{value:g,label:s.fbt._("Legal Name of Business",null,{hk:"2s9jD"})}),(0,p.jsx)(r.ComplianceInfoPrimitiveField,{value:C,label:s.fbt._("Business Type",null,{hk:"48J73B"})})]}),(0,p.jsxs)(r.ComplianceInfoGroup,{title:s.fbt._("Customer Care Information",null,{hk:"qlYos"}),children:[(0,p.jsx)(r.ComplianceInfoPrimitiveField,{value:null==x?void 0:x.mobileNumber,label:s.fbt._("Mobile Phone Number",null,{hk:"PMTTg"}),forceLTR:!0}),(0,p.jsx)(r.ComplianceInfoPrimitiveField,{value:null==x?void 0:x.landlineNumber,label:s.fbt._("Landline Phone Number",null,{hk:"tXYaf"}),forceLTR:!0}),(0,p.jsx)(r.ComplianceInfoPrimitiveField,{value:null==x?void 0:x.email,label:s.fbt._("Email Address",null,{hk:"2jYxR1"})})]}),(0,p.jsxs)(r.ComplianceInfoGroup,{title:s.fbt._("Grievance Officer Information",null,{hk:"3emd7I"}),children:[(0,p.jsx)(r.ComplianceInfoPrimitiveField,{value:null==v?void 0:v.name,label:s.fbt._("Name",null,{hk:"2vEs6r"})}),(0,p.jsx)(r.ComplianceInfoPrimitiveField,{value:null==v?void 0:v.mobileNumber,label:s.fbt._("Mobile Phone Number",null,{hk:"3kk5I"}),forceLTR:!0}),(0,p.jsx)(r.ComplianceInfoPrimitiveField,{value:null==v?void 0:v.landlineNumber,label:s.fbt._("Landline Phone Number",null,{hk:"4GBzF0"})}),(0,p.jsx)(r.ComplianceInfoPrimitiveField,{value:null==v?void 0:v.email,label:s.fbt._("Email Address",null,{hk:"3SvbLl"})})]})]})})]},"merchant-details-modal")}t.default=m},4782:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(81109)),s=n(88555),l=a(n(74328)),o=a(n(7532)),r=a(n(54414)),d=n(88102),c=n(19829),u=n(4903),h=a(n(96464)),f=a(n(37380)),p=n(62632),m=a(n(43250)),g=n(27394),x=a(n(30305)),v=a(n(32973)),C=n(57701),_=a(n(48204)),b=n(88280),j=n(55800),k=a(n(69824)),S=n(74429),M=n(77975),T=n(94205),E=n(8059),y=a(n(11339)),P=n(97567),I=n(9153),w=a(n(70107)),A=n(79188),N=a(n(54050)),D=n(11395),O=a(n(77776)),R=n(74028),L=n(48870),B=n(27798),G=a(n(56829)),F=n(82364),V=n(49376),U=n(85893);class H extends v.default{constructor(){super(...arguments),this._scrollOffset=0,this._setScrollOffset=e=>{this._scrollOffset=e},this._handleProductDetail=(e,t)=>{const{chat:n}=this.props,a=(0,U.jsx)(w.default,{chat:n,collectionId:t,product:e,onEnd:this._end,onBack:this._popAndUpdate,refreshCarousel:!1,onProductLinkClick:this._handleProductLinkClick,onProductMoreInformation:this._handleProductMoreInformation,onCartClick:this._handleCartClick});this.push(a)},this._handleProductDetailFromInfo=e=>{const t=(0,U.jsx)(A.ProductDetailsWithDeepLink,{chat:this.props.chat,productInfo:e,onEnd:this._end,onBack:this._pop,onProductDetail:this._handleProductDetail,onProductCatalog:this._handleProductCatalogHeaderClick,onProductLinkClick:this._handleProductLinkClick,onProductMoreInformation:this._handleProductMoreInformation,onCartClick:this._handleCartClick});this.push(t)},this._handleCollectionSeeAll=e=>{const t=this.props.chat.id;this.push((0,U.jsx)(c.CollectionContentDrawer,{contact:this.props.chat.contact,onProductDetail:this._handleProductDetail,catalogId:t,onBack:this._pop,onCatalogLinkClick:this._handleCatalogLinkClick,onCartClick:this._handleCartClick,collection:e}))},this._handleProductLinkClick=e=>{this.push((0,U.jsx)(N.default,{product:e,onBack:this._pop}))},this._handleProductMoreInformation=e=>{const t=(0,U.jsx)(O.default,{product:e,onBack:this._popAndUpdate});this.push(t)},this._handleCatalogLinkClick=(e,t)=>{this.push((0,U.jsx)(o.default,{catalog:e,contact:t,onBack:this._pop}))},this._handleCartClick=e=>{const t=(0,P.getProductCatalogContext)(this.props.context),n=(0,G.default)(e,this.props.chat,t);n&&this.push(n)},this.pushProductCatalog=()=>{const{chat:e}=this.props,t=(0,C.canViewCollections)()?(0,U.jsx)(r.default,{contact:e.contact,onProductDetail:this._handleProductDetail,catalogId:e.id,onBack:this._pop,businessProfile:e.contact.businessProfile,onCatalogLinkClick:this._handleCatalogLinkClick,onCartClick:this._handleCartClick,onCollectionSeeAll:this._handleCollectionSeeAll}):(0,U.jsx)(D.ProductListDrawer,{contact:e.contact,onProductDetail:this._handleProductDetail,catalogId:e.id,onBack:this._pop,businessProfile:e.contact.businessProfile,onCatalogLinkClick:this._handleCatalogLinkClick,onCartClick:this._handleCartClick});this.push(t)},this._handleProductCatalog=(e,t)=>{const n=this.props.chat.id;(0,C.canViewCollections)()&&L.QPL.markerStart(B.QuickLogMarkerId.WHATSAPP_CATALOG_COLLECTIONS_VIEW,{annotations:{string:{EntryPoint:t}}}),(0,M.logCarouselViewMoreClick)({catalogOwnerWid:n,catalogContext:e}),this.pushProductCatalog(n)},this._handleProductCatalogHeaderClick=(e,t)=>{(0,M.logCarouselViewMoreClick)({catalogOwnerWid:e,catalogContext:t}),this._handleProductCatalog(t,"ProductCatalogHeader")},this._handleStarred=()=>{const e=(0,U.jsx)(F.StarredDrawerLoadable,{chat:this.props.chat,starredMsgs:this.props.chat.getStarredMsgs(),onClose:this._pop});this.push(e)},this._handleAdminSetting=()=>{const{chat:e}=this.props,t=(0,U.jsx)(k.default,{chat:e,groupMetadata:e.groupMetadata,onClose:this._pop});this.push(t)},this._handleContactCard=()=>{this.push((0,U.jsx)(h.default,{chat:this.props.chat,onClose:this._pop}))},this._handleMediaGallery=()=>{const e=(0,U.jsx)(E.MediaGalleryDrawer,{chat:this.props.chat,onBack:this._pop,onProductDetail:this._handleProductDetail,setProductsScrollOffset:this._setScrollOffset});this.push(e)},this._handleGroupInviteLink=()=>{const{chat:e}=this.props;if(e.isInviteGrowthLockedGroup()){var t;const n=!!(null===(t=e.groupMetadata)||void 0===t?void 0:t.participants.iAmAdmin());return void(0,j.openGrowthLockedModal)(n,!0)}const n=(0,U.jsx)(b.GroupInviteLinkDrawerLoadable,{chat:this.props.chat,groupMetadata:e.groupMetadata,onBack:this._pop});this.push(n)},this._pop=()=>{this.pop()},this._popAndUpdate=()=>{this.popAndUpdate({initialTab:E.TABS.PRODUCTS,productsScrollOffset:this._scrollOffset})},this._end=()=>{this.end(!0)},this._handleVerification=e=>{const t=e||this.props.chat.contact,n=(0,U.jsx)(V.VerificationDrawerLoadable,{contact:t,onClose:this._pop,isFirstLevel:!1});this.push(n)},this._handleLiveLocation=()=>{const e=(0,U.jsx)(S.LiveLocationDrawerLoadable,{chat:this.props.chat,onClose:this._pop});this.push(e)},this._handleDDMSettingsClick=e=>{this.push((0,U.jsx)(m.default,{onClose:this._pop,entryPoint:e}))},this._handleEphemeral=()=>{const{chat:e}=this.props,t=e.isGroup?y.default.DISAPPEARING_MODE_ENTRY_POINT_TYPE.GROUP_CHAT_DISAPPEARING_MESSAGES_SETTING:y.default.DISAPPEARING_MODE_ENTRY_POINT_TYPE.INDIVIDUAL_CHAT_DISAPPEARING_MESSAGES_SETTING,n=(0,U.jsx)(x.default,{chat:e,showNux:!1,entryPoint:y.default.EPHEMERAL_SETTING_ENTRY_POINT_TYPE.CHAT_INFO,onClose:this._pop,onDDMSettingsClick:()=>this._handleDDMSettingsClick(t)});this.push(n)},this._handleManageCommunityGroupsClick=e=>{const t=(0,U.jsx)(T.ManageCommunityGroupsFlowLoadable,{parentGroup:e,onBack:this._pop});this.push(t)},this._handleCommunityClick=()=>{var e;const t=null===(e=this.props.chat.groupMetadata)||void 0===e?void 0:e.parentGroup;if(!t)return;const n=(0,U.jsx)(u.CommunityHome,{jid:t,callbacks:{onBack:this._pop,onManageCommunityGroupsClick:this._handleManageCommunityGroupsClick}});this.push(n)}}componentDidMount(){const e=this._handleStarred,t=this._handleMediaGallery,n=this.props.chat;n.isGroup?((0,s.isMDBackend)()&&(0,R.queryAndUpdateGroupMetadataById)(n.id),this.push((0,U.jsx)(_.default,{chat:n,showFullGroupDescription:this.props.showFullGroupDescription,scrollToParticipantList:this.props.scrollToParticipantList,groupMetadata:n.groupMetadata,contact:n.contact,profilePicThumb:n.contact.getProfilePicThumb(),onVerification:this._handleVerification,onStarred:e,onMediaGallery:t,onAdminSetting:this._handleAdminSetting,onGroupInviteLink:this._handleGroupInviteLink,onLiveLocation:this._handleLiveLocation,onEphemeral:this._handleEphemeral,onCommunityClick:this._handleCommunityClick,onClose:this._pop}))):n.isBroadcast?this.push((0,U.jsx)(l.default,{chat:n,contact:n.contact,onStarred:e,onMediaGallery:t,onClose:this._pop})):n.isUser&&(n.contact.isBusiness&&(0,C.canSeeBizProfileV3)()&&d.Cmd.setDrawerContext("right",(0,P.buildProductCatalogContext)(new I.ProductCatalogSession,(0,p.getMaybeBizPlatformForLogging)(n.contact.id.toString()),y.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_PROFILE)),this.push((0,U.jsx)(f.default,{contact:n.contact,onVerification:this._handleVerification,onStarred:e,onContactCard:this._handleContactCard,onMediaGallery:t,onProductCatalog:this._handleProductCatalog,onProductDetail:this._handleProductDetail,onLiveLocation:this._handleLiveLocation,onEphemeral:this._handleEphemeral,onClose:this._pop,profileEntryPoint:this.props.profileEntryPoint})))}}t.default=e=>(0,U.jsx)(g.DrawerContext.Consumer,{children:t=>(0,U.jsx)(H,(0,i.default)({context:t},e))})},12642:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const{msg:n,highlightedMsgIds:a}=e,I=(0,v.default)(),w=(0,x.default)(),A=(0,u.default)(),N=(0,h.default)((()=>n.chat.constructMediaMsgs(n))),D=N.current.length,O=(0,p.default)(D),R=(0,h.default)((()=>n.type===r.MSG_TYPE.IMAGE?new E.default.UiAction({uiActionType:E.default.UI_ACTION_TYPE.IMAGE_OPEN,uiActionPreloaded:n.mediaData.mediaStage===S.MEDIA_DATA_STAGE.RESOLVED}):null)),L=(0,c.useRef)(null),B=(0,c.useRef)(),G=(0,c.useRef)(),F=(0,c.useRef)(null),V=(0,c.useRef)(null),U=(0,c.useRef)(null),[H,q]=(0,c.useState)(n),[W,Y]=(0,c.useState)(!1),[z,K]=(0,c.useState)(!0),X=(0,p.default)(H),Z=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=V.current,n=U.current,a=F.current;if(!t||!n||!a)return;let i=0;a instanceof HTMLElement&&(i=a.clientWidth/2-t.clientWidth/2),(0,d.default)(n,"stop");let s=0;e&&(s=300),(0,d.default)(a,"scroll",{duration:s,container:n,offset:i,axis:"x",easing:[.1,.82,.25,1]})},$=e=>{if(!e)return!0;const{isViewOnce:t,isStickerMsg:n}=e;return!t&&!n};(0,c.useEffect)((()=>{var e;Z(),$(n)&&(e=V.current)&&(0,d.default)(e,{opacity:[1,0],translateY:["0%","100%"]},{duration:300,delay:100,easing:[.1,.82,.25,1]}).then((()=>{I.aborted||K(!1)}))}),[]),(0,c.useEffect)((()=>{(0,_.isMediaGalleryFixEnabled)()&&D>(null!=O?O:0)&&Z()}));const Q=e=>{w((()=>{N.current.loadMoreAroundIfNeeded(e)})),q(e)},J=e=>{if(e&&e.stopPropagation(),W)return;const t=H;if(!t)return;let a=null;for(a=N.current.getAfter(t);(null===(i=a)||void 0===i?void 0:i.mediaData)&&!(0,k.hasThumbnail)(a.mediaData);){var i;a=N.current.getAfter(a)}a?Q(a):N.current.hasMediaAfter&&(B.current||(B.current=N.current.queryMedia({chat:n.chat,msg:n,direction:"after"}).then((e=>{I.aborted||"number"==typeof e.length&&e.length>0&&H===n&&J()})).catch((()=>{__LOG__(3)`query media msgs error: `})).finally((()=>{B.current=null}))))},ee=e=>{if(e&&e.stopPropagation(),W)return;const t=H;if(!t)return;let a=null;for(a=N.current.getBefore(t);(null===(i=a)||void 0===i?void 0:i.mediaData)&&!(0,k.hasThumbnail)(a.mediaData);){var i;a=N.current.getBefore(a)}a?Q(a):N.current.hasMediaBefore&&(G.current||(G.current=N.current.queryMedia({chat:n.chat,msg:n,direction:"before"}).then((e=>{I.aborted||"number"==typeof e.length&&e.length>0&&H===n&&ee()})).catch((()=>{__LOG__(3)`query media msgs error: `})).finally((()=>{G.current=null}))))},te=()=>{C.Cmd.closeModalMedia()},ne=(0,m.default)((()=>{q(null),te()})),ae=(null==H?void 0:H.isViewOnce)||(null==H?void 0:H.isStickerMsg);(0,f.useListener)(ae?H:null,"revoked",ne);const ie=ae?null:N.current;(0,f.useListener)(ie,"remove",((e,t,a)=>{const i=N.current,l=H;if(i.includes(n)||null!=l&&null!=l.id&&l.id.toString()!==e.id.toString())return void A();const o=a.index;0===i.length?te():i.length===o?Q((0,s.default)(i.at(o-1),"mediaMsgs.at(index - 1)")):Q((0,s.default)(i.at(o),"mediaMsgs.at(index)"))})),(0,f.useListener)(ie,"reset",(()=>{te()})),(0,f.useListener)(ie,"query_media_after",(()=>{A()})),(0,f.useListener)(ie,"query_media_before",(()=>{const e=U.current;e&&(L.current=e.scrollWidth,e instanceof HTMLElement&&A())})),(0,f.useListener)(window,"keydown",(e=>{const t=j.default.isRTL();e.keyCode===i.default.LEFT?t?J():ee():e.keyCode===i.default.RIGHT&&(t?ee():J())})),(0,c.useEffect)((()=>{w((()=>{H&&N.current.loadMoreAroundIfNeeded(H)}))}),[H,N,w]),(0,c.useEffect)((()=>{if(X!==H)Z(!0);else{const e=U.current;if(!e||null==L.current||0===L.current)return;e instanceof HTMLElement&&(e.scrollLeft+=e.scrollWidth-L.current),L.current=null}}),[H,X]);const se=(0,g.default)(((e,t,n)=>{if(0!==t.length&&null!=n){if(t.hasMediaBefore&&n<e.clientWidth){const e=(0,s.default)(t.head(),"mediaMsgs.head()");w((()=>{t.queryMedia({chat:e.chat,msg:e}),A()}))}if(t.hasMediaAfter&&n+o.SCROLL_FUDGE>e.scrollWidth-2*e.clientWidth){const e=(0,s.default)(t.last(),"mediaMsgs.last()");w((()=>{t.queryMedia({chat:e.chat,msg:e,direction:"after"}),A()}))}}}),100);if(!H)return null;const le=N.current,oe=le.last(),re=le.hasMediaAfter||H!==oe?J:null,de=le.head();let ce=null;ce=le.hasMediaBefore||H!==de?ee:null,(0,l.isMDBackend)()&&(ce=(le.hasMediaBefore||H!==de)&&(()=>{if(!H)return!1;for(let e=N.current.indexOf(H)-1;e>0;e--){const t=N.current.at(e);if(t&&(0,k.hasThumbnail)(t.mediaData))return!0}return!1})()?ee:null);return(0,P.jsxs)("div",{className:W?"img-zoomed-in":null,children:[$(H)&&(0,P.jsx)(T.default,{activeMsg:H,mediaMsgs:N.current,highlightedMsgIds:e.highlightedMsgIds,onSelectThumb:Q,onSetActiveThumb:e=>{F.current=e},onScroll:e=>{se(e.currentTarget,N.current,e.currentTarget.scrollLeft)},setRefThumbsContainer:e=>{V.current=e},setRefThumbs:e=>{U.current=e}}),(0,P.jsx)(M.default,{msg:H,mediaData:H.mediaData,onBack:te,onExitAnimation:()=>{var e;$(n)&&(e=V.current)&&(0,d.default)(e,{opacity:[0,1],translateY:["100%","0%"]},{duration:300,easing:[.1,.82,.25,1]})},onNext:re,onPrev:ce,onImgZoomIn:e=>{Y(e)},getZoomNode:e.getZoomNode,startTime:e.startTime,isAnimatingIn:z,onImageLoad:R.current?()=>{const e=R.current;e&&(e.markUiActionT(),Object.assign(e,(0,b.getGroupMetricsFromChatWid)(n.chat.id)),e.commit(),(0,y.logUiActionShadowPrivateStatsTestEvents)(),R.current=null)}:null,msgIndexInAlbum:(()=>{let e=-1;if(!a||!H)return e;const t=H.id.toString();if(!a.has(t))return e;let n=0;return a.forEach((a=>{a===t&&(e=n),n++})),e})(),albumSize:(null===(t=e.highlightedMsgIds)||void 0===t?void 0:t.size)||0})]})};var i=a(n(57538)),s=a(n(45095)),l=n(88555),o=n(41906),r=n(15461),d=a(n(62831)),c=n(67294),u=a(n(59312)),h=a(n(16223)),f=n(87550),p=a(n(37453)),m=a(n(89113)),g=a(n(90886)),x=a(n(74570)),v=a(n(3409)),C=n(88102),_=n(57701),b=n(42515),j=a(n(14296)),k=n(41908),S=n(58668),M=a(n(47186)),T=a(n(38781)),E=a(n(11339)),y=n(7595),P=n(85893)},3362:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.requireBundle=t.SendContactFlowLoadable=void 0;var i=a(n(48926)),s=a(n(68356)),l=a(n(14296)),o=a(n(50860)),r=a(n(15334)),d=n(85893);const c=(0,r.default)((0,i.default)((function*(){return(yield Promise.all([n.e(8295),n.e(1702),n.e(9488),n.e(2790),n.e(275)]).then(n.bind(n,99344))).default})),"SendContactFlow");t.requireBundle=c;const u=(0,s.default)({loader:c,loading:e=>(0,d.jsx)(o.default,{title:l.default.t(743),error:Boolean(e.error)})});t.SendContactFlowLoadable=u},23297:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onClose:t}=e,n=()=>g.ChatCollection.filter((e=>e.archive&&e.shouldAppearInList)),a=(0,u.useModelValues)(e.settings,["showArchiveV2","archive"]),L=(0,d.default)((()=>new M.default)),B=(0,d.default)((()=>new N.default([],(e=>e.id.toString())))),G=(0,r.useRef)(null),[F,V]=(0,r.useState)(!1),[U,H]=(0,r.useState)(n),q=()=>(0,E.archiveV2Supported)()&&a.showArchiveV2;(0,c.useListener)(g.ChatCollection,[q()?"sort":null,"change:archive","add","remove"].filter(Boolean),(()=>{H(n())}));const W=e=>{B.current.setVal(e,!1)};(0,c.useListener)(x.Cmd,"close_chat",(e=>{e===B.current.getVal()&&B.current.unset()})),(0,c.useListener)(x.Cmd,"update_chatlist_selection",W);const[Y,z,K]=(0,h.default)(A.NUX.ARCHIVE,3),X=()=>{const e=g.ChatCollection.some((e=>e.archive));return q()&&e&&Y&&!F};(0,r.useEffect)((()=>{if(X()&&z(),q()&&(0,I.isElevatedImportantMessageEnabled)()){const e=n(),t=new Map;e.forEach((e=>{e.archiveAtMentionViewedInDrawer=!0,t.set(e.id.toString(),!0)})),(0,m.updateChatArchiveDrawer)(t)}G.current&&s.default.focus(G.current);const e=g.ChatCollection.toArray().find((e=>e.active&&e.archive));e&&W(e)}),[]);const Z=()=>{t()},$=(e,t)=>{x.Cmd.openChatFromUnread(t).then((e=>{e&&x.Cmd.focusChatTextInput(t)})),(0,E.archiveV2Supported)()&&a.archive.enabled||Z()},Q=e=>{e.preventDefault(),e.stopPropagation(),B.current.setNext(!0)},J=e=>{e.preventDefault(),e.stopPropagation(),B.current.setPrev(!0)},ee=()=>{K(),V(!0)};let te,ne;B.current.init(U,!0),X()&&(te=(0,R.jsxs)("div",{className:f.default.nuxContainer,children:[(0,R.jsxs)(T.FlexColumn,{align:"center",children:[(0,R.jsx)("span",{className:f.default.nuxIcon,children:(0,R.jsx)(D.default,{name:"archive-nux"})}),(0,R.jsx)("div",{className:f.default.nuxHeader,children:(0,R.jsx)(O.Text,{theme:"large",as:"h1",children:o.fbt._("Archived chats will stay archived",null,{hk:"3dEGG"})})}),(0,R.jsx)("div",{className:f.default.nuxContent,children:(0,R.jsx)("div",{className:f.default.nuxText,children:(0,R.jsx)(O.Text,{theme:"plain",as:"p",children:(0,i.isMDBackend)()?o.fbt._("To reduce interruptions, archived chats will stay here with notifications turned off. To change this experience, go to Settings > Chats on your phone.",null,{hk:"1VSdJQ"}):o.fbt._("To reduce interruptions, archived chats will stay here with notifications turned off. To change this experience, go to Settings > Archived Chats.",null,{hk:"1gz2m1"})})})})]}),(0,R.jsx)("button",{onClick:ee,className:f.default.btnClose,children:(0,R.jsx)(D.default,{name:"x-alt"})})]}));ne=U.length>0?(0,R.jsxs)(y.HotKeys,{ref:G,handlers:{down:Q,up:J},children:[(0,R.jsx)(l.default,{transitionName:"slide",children:te}),(0,R.jsx)(S.FlatList,{className:f.default.flatListContainer,data:U.map((e=>({itemKey:e.id.toString(),chat:e}))),flatListController:L.current,direction:"vertical",renderItem:e=>(0,R.jsx)(p.Chat,{chat:e.chat,mode:p.Mode.LAST,active:B.current,onClick:$,hideArchivedIcon:(0,E.archiveV2Supported)()&&a.archive.enabled,hideMuteIcon:q(),hideMuteOption:q(),ephemeralIcon:"chat-list"})})]}):(0,R.jsx)(k.Archived,{});const ae=(0,i.isLegacyWebdBackend)()&&(0,E.archiveV2Supported)()&&a.archive.enabled?(0,R.jsx)(w.MenuBarItem,{a8nText:"archived-menu",icon:(0,R.jsx)(D.default,{name:"menu"}),title:P.default.t(603),children:(0,R.jsx)(b.Dropdown,{type:b.MenuType.DropdownMenu,flipOnRTL:!0,dirX:b.DirX.LEFT,children:(0,R.jsx)(j.DropdownItem,{a8n:"open-archive-settings menu-item",action:e.showSettings,children:o.fbt._("Archive settings",null,{hk:"1YI0jC"})})},"ArchivedDrawerHeader")}):null,ie=(0,E.archiveV2Supported)()&&a.archive.enabled?o.fbt._("Archived",null,{hk:"3HjzQg"}):P.default.t(144);return(0,R.jsxs)(v.default,{theme:"archived",children:[(0,R.jsx)(_.DrawerHeader,{title:ie,onBack:Z,type:_.DRAWER_HEADER_TYPE.LARGE,menu:ae}),(0,R.jsx)(C.default,{flatListControllers:[L.current],children:ne})]})};var i=n(88555),s=a(n(52013)),l=a(n(40436)),o=n(48360),r=n(67294),d=a(n(16223)),c=n(87550),u=n(35461),h=a(n(59732)),f=a(n(85967)),p=n(65511),m=n(48285),g=n(69951),x=n(88102),v=a(n(60453)),C=a(n(69637)),_=n(94790),b=n(60811),j=n(71174),k=n(85600),S=n(47915),M=a(n(30855)),T=n(29623),E=n(57701),y=n(29424),P=a(n(14296)),I=n(41566),w=n(46346),A=n(61653),N=a(n(88406)),D=a(n(23217)),O=n(13923),R=n(85893)},62138:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=function(e){switch(e.verifiedLevel){case o.VERIFIED_LEVEL.HIGH:return e.name===e.verifiedName?f.default.t(846,{businessName:e.verifiedName}):f.default.t(847,{businessName:e.verifiedName});case o.VERIFIED_LEVEL.LOW:case o.VERIFIED_LEVEL.UNKNOWN:return s.fbt._("This may be a business. WhatsApp hasn't verified their name yet.",null,{hk:"404mUL"})}}((0,l.useModelValues)(e.contact,["name","verifiedLevel","verifiedName","formattedName"])),n=(0,p.jsx)(r.default,{href:(0,i.getBusinessFaqUrl)(),onClick:g,children:f.default.t(546)});return(0,p.jsxs)(c.default,{onOK:m,okText:f.default.t(681),children:[(0,p.jsx)(u.EmojiText,{text:t})," ",n]})};var i=n(21310),s=n(48360),l=n(35461),o=n(93170),r=a(n(99360)),d=n(88102),c=a(n(52665)),u=n(65417),h=n(12591),f=a(n(14296)),p=n(85893);const m=()=>{d.Cmd.closeModal()},g=e=>{e.preventDefault(),d.Cmd.closeModal("none"),setTimeout((()=>(0,h.openExternalLink)((0,i.getBusinessFaqUrl)())),10)}},955:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{contact:t}=e;const{verifiedLevel:n,verifiedName:a}=(0,o.useModelValues)(t,["verifiedLevel","verifiedName"]),b=(0,i.getBusinessFaqUrl)(),j=!f.Conn.isSMB;(0,l.useEffect)((()=>{j&&new x.default.BannerEvent({bannerType:x.default.BANNER_TYPES.CROSS_SELL_PROFILE_INTERSTITIAL,bannerOperation:x.default.BANNER_OPERATIONS.SHOWN}).commit()}),[j]);const k=n===d.VERIFIED_LEVEL.HIGH?g.default.t(988,{businessName:a}):s.fbt._("This business uses WhatsApp Business, which allows them to add their opening hours, address, website and catalog of products or services.",null,{hk:"82W5f"});return(0,_.jsxs)(h.default,{title:s.fbt._("About WhatsApp Business",null,{hk:"3XF5gx"}),onOK:()=>{u.Cmd.closeModal(),j&&new x.default.BannerEvent({bannerType:x.default.BANNER_TYPES.CROSS_SELL_PROFILE_INTERSTITIAL,bannerOperation:x.default.BANNER_OPERATIONS.DISMISS}).commit()},okText:s.fbt._("OK",null,{hk:"2KEeHb"}),children:[(0,_.jsx)(p.EmojiText,{text:k})," ",(0,_.jsx)(c.default,{href:b,onClick:e=>{e.preventDefault(),u.Cmd.closeModal(),setTimeout((()=>(0,m.openExternalLink)(b)),10)},children:g.default.t(546)}),j&&(0,_.jsx)("div",{className:r.default.footerNote,children:(0,_.jsxs)(C.TextSpan,{theme:"muted",size:"13",children:[s.fbt._("If you’re a business, the free WhatsApp Business app can help.",null,{hk:"3gfQun"}),(0,_.jsx)("br",{}),(0,_.jsx)(c.default,{onClick:e=>{e.preventDefault(),u.Cmd.closeModal(),new x.default.BannerEvent({bannerType:x.default.BANNER_TYPES.CROSS_SELL_PROFILE_INTERSTITIAL,bannerOperation:x.default.BANNER_OPERATIONS.CLICK}).commit(),setTimeout((()=>u.Cmd.openModal((0,_.jsx)(v.SmbAppUpsellModal,{}))),200)},className:r.default.getTheAppLink,children:s.fbt._("Learn about getting the app",null,{hk:"3ncguo"})})]})})]})};var i=n(21310),s=n(48360),l=n(67294),o=n(35461),r=a(n(85845)),d=n(93170),c=a(n(99360)),u=n(88102),h=a(n(52665)),f=n(17239),p=n(65417),m=n(12591),g=a(n(14296)),x=a(n(11339)),v=n(70593),C=n(13923),_=n(85893)},70593:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.SmbAppUpsellModal=function(){return(0,f.jsxs)(o.default,{title:i.fbt._("WhatsApp Business app",null,{hk:"4BfvOl"}),onOK:()=>{new u.default.BannerEvent({bannerType:u.default.BANNER_TYPES.CROSS_SELL_PROFILE_INTERSTITIAL,bannerOperation:u.default.BANNER_OPERATIONS.DISMISS}).commit(),l.Cmd.closeModal()},okText:i.fbt._("Close",null,{hk:"19Jpec"}),children:[(0,f.jsx)(h.default,{}),(0,f.jsx)("p",{children:(0,f.jsx)(r.EmojiText,{text:i.fbt._("If you’re a business, you can benefit from switching to the free WhatsApp Business app. It has tools to connect with customers and manage messages.",null,{hk:"40fyU7"})})}),(0,f.jsx)("br",{}),(0,f.jsxs)("p",{children:[(0,f.jsx)(r.EmojiText,{text:i.fbt._("Scan this code to get the WhatsApp Business App. Or, you can install it from the App Store or Google Play Store.",null,{hk:"2840mD"})})," ",(0,f.jsx)(s.default,{href:p,onClick:e=>{e.preventDefault(),l.Cmd.closeModal(),setTimeout((()=>(0,d.openExternalLink)(p)),10)},children:c.default.t(546)})]})]})},t.WHATSAPP_BUSINESS_URL=void 0;var i=n(48360),s=a(n(99360)),l=n(88102),o=a(n(52665)),r=n(65417),d=n(12591),c=a(n(14296)),u=a(n(11339)),h=a(n(5242)),f=n(85893);const p="https://www.whatsapp.com/business";t.WHATSAPP_BUSINESS_URL=p},5242:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const e=(0,l.useRef)(null),t=(0,l.useRef)(null),{theme:n}=(0,l.useContext)(d.ThemeContext),a="dark"===n;return(0,l.useEffect)((()=>(null!=e.current&&(t.current=new o.default(e.current,{text:"https://www.whatsapp.com/business/download",colorDark:"#122e31",colorLight:"#ffffff",width:i.QR_EDGE/2,height:i.QR_EDGE/2,typeNumber:4,correctLevel:o.default.CorrectLevel.H})),()=>{null!=t.current&&(t.current.clear(),t.current=null,e.current=null)})),[a]),(0,c.jsx)("div",{className:r.default.wrapper,children:(0,c.jsx)("div",{ref:e,className:(0,s.default)(r.default.code,{[r.default.codeDarkMode]:a}),children:(0,c.jsx)(u,{theme:n})})})};var i=n(41906),s=a(n(94184)),l=n(67294),o=a(n(37360)),r=a(n(2256)),d=n(97628),c=n(85893);function u(){return(0,c.jsx)("div",{className:r.default.codeLogo,children:(0,c.jsx)("svg",{width:"100%",viewBox:"0 0 50 50",xmlns:"http://www.w3.org/2000/svg",children:(0,c.jsx)("path",{d:"M42.6776 42.6779C37.9558 47.3997 31.6777 50.0001 24.9999 50.0001C21.0047 50.0001 17.0541 49.0389 13.5244 47.2141L0.601068 49.3339L2.72832 36.3645C0.941278 32.8647 0 28.9525 0 25.0001C0 18.3223 2.60042 12.0443 7.32229 7.32237C12.0442 2.6005 18.3221 0 24.9999 0C31.6777 0 37.9558 2.6005 42.6776 7.32237C47.3995 12.0443 50 18.3223 50 25.0001C50 31.678 47.3995 37.9558 42.6776 42.6779ZM24.9999 4.33778C13.6067 4.33778 4.33772 13.607 4.33772 25.0001C4.33772 28.4792 5.21935 31.9192 6.8868 34.9487L7.24853 35.6054L5.85915 44.0756L14.2959 42.6918L14.9565 43.0601C18.0107 44.7624 21.4837 45.6622 24.9999 45.6622C36.3932 45.6622 45.6622 36.3933 45.6622 25.0001C45.6622 13.607 36.3932 4.33778 24.9999 4.33778ZM31.1133 24.3614C32.4522 24.9804 34.1536 26.3725 34.1208 29.3117C34.0749 33.4266 31.2191 35.6542 27.2744 35.6542H19.4594H18.3042C17.5079 35.6542 16.8645 35.0053 16.8713 34.2092L17.0344 15.0573C17.041 14.2714 17.6794 13.6377 18.4652 13.6366L27.1493 13.6256C31.4651 13.6256 33.9598 16.039 33.9177 19.8134C33.8903 22.2579 32.2484 23.8355 31.1133 24.3614ZM26.766 17.4622H21.3643L21.3076 22.5361H26.7093C28.5347 22.5361 29.5672 21.5152 29.584 19.9992C29.6009 18.4831 28.5915 17.4622 26.766 17.4622ZM26.9444 26.4035H21.2643L21.2038 31.8178H26.884C28.8333 31.8178 29.7752 30.5802 29.792 29.0952C29.8085 27.6101 28.8939 26.4035 26.9444 26.4035Z",fill:"currentColor"})})})}},74328:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(88555),s=n(40234),l=n(48360),o=n(67294),r=a(n(56720)),d=a(n(59312)),c=a(n(16223)),u=n(87550),h=n(35461),f=a(n(95402)),p=a(n(50747)),m=a(n(54231)),g=(a(n(75116)),n(98792)),x=a(n(5406)),v=n(88102),C=a(n(60453)),_=a(n(69637)),b=a(n(64738)),j=n(94790),k=a(n(4061)),S=a(n(4584)),M=a(n(30855)),T=a(n(14296)),E=n(31019),y=a(n(23217)),P=n(13923),I=n(85893);const w={flexGrow:"tvf2evcx",flexShrink:"oq44ahr5",flexBasis:"lb5m6g5c",paddingBottom:"s9fl9ege"};function A(e,t){var n,a;const{onClose:o,onMediaGallery:A}=e,N=(0,d.default)(),D=(0,f.default)(),O=(0,c.default)((()=>new M.default)),R=(0,h.useModelValues)(e.chat,["id","groupMetadata"]),L=()=>{v.Cmd.openModal((0,I.jsx)(k.default,{chatId:R.id,e2eSubtype:"info_encrypted"}))};(0,u.useListener)(null===(n=R.groupMetadata)||void 0===n?void 0:n.participants,["add","remove","sort","reset"],N);let B=null;A&&(B=(0,I.jsx)(x.default,{onMediaGallery:A,chat:(0,E.unproxy)(R)}));const G=(0,I.jsx)(g.ChatInfoDrawerButtonsSection,{children:(0,I.jsx)(b.default,{a8nText:"li-delete-broadcast",icon:(0,I.jsx)(y.default,{name:"delete"}),color:"danger",theme:"chat-info",onClick:()=>{v.Cmd.deleteOrExitChat((0,E.unproxy)(R))},children:T.default.t(872)})});let F;(null===(a=R.groupMetadata)||void 0===a?void 0:a.creation)?(F=s.Clock.createdStr(R.groupMetadata.creation),F=(0,I.jsx)(P.TextDiv,{theme:"small",children:F})):F=null;let V=null;(0,i.isMDBackend)()&&(V=(0,I.jsx)(S.default,{onClick:L,text:l.fbt._("Messages are end-to-end encrypted. Click to learn more.",null,{hk:"1iarlI"})}));let U=null;return V&&(U=(0,I.jsxs)(g.ChatInfoDrawerSection,{children:[null,V]})),(0,I.jsxs)(C.default,{ref:t,theme:"striped",children:[(0,I.jsxs)(j.DrawerHeader,{type:j.DRAWER_HEADER_TYPE.SMALL,rtlFixIfOnDarwin:!0,onCancel:()=>{o?o():null==D||D.uie.requestDismiss()},children:[(0,I.jsx)(P.TextDiv,{theme:"title",children:l.fbt._("Broadcast list info",null,{hk:"3S4EgV"})}),F]}),(0,I.jsx)(_.default,{flatListControllers:[O.current],children:(0,I.jsxs)("div",{className:(0,r.default)(w),children:[(0,I.jsx)(m.default,{chat:(0,E.unproxy)(R)}),B,undefined,U,(0,I.jsx)(p.default,{chat:(0,E.unproxy)(R),flatListController:O.current}),G]})})]},"contact-info-modal")}var N=(0,o.forwardRef)(A);t.default=N},50747:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n;const a=(0,l.default)(),x=null===(t=e.chat.groupMetadata)||void 0===t?void 0:t.participants;(0,o.useListener)(x,"add remove reset",a);const v=(0,s.useMemo)((()=>x?x.map((e=>({itemKey:e.id.toString(),participant:e,height:68}))):[]),[x]),C=(e,t)=>{i.default.equals((0,p.getMaybeMeUser)(),t.id)||(0,h.findChat)(t.id).then((function(e){d.Cmd.openChatFromUnread(e).then((t=>{t&&d.Cmd.focusChatTextInput(e)}))}))},_=null!==(n=null==x?void 0:x.length)&&void 0!==n?n:0,b=m.default.t(981,{count:_,_plural:_});return(0,g.jsx)(r.ChatInfoDrawerListSection,{title:b,children:(0,g.jsx)(f.FlatList,{flatListController:e.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:v,renderItem:e=>{const{participant:t}=e,n=u.ContactCollection.gadd(t.id);return(0,g.jsx)(c.Contact,{contact:n,theme:"chat-info",admin:!!t.isAdmin,onClick:C,waitIdle:!0},t.id.toString())}})})};var i=a(n(89867)),s=n(67294),l=a(n(59312)),o=n(87550),r=n(98792),d=n(88102),c=n(2732),u=n(19380),h=n(50101),f=n(47915),p=n(99234),m=a(n(14296)),g=n(85893)},54231:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n;const a=null===(t=e.chat.groupMetadata)||void 0===t?void 0:t.participants,C=(0,r.useModelValues)(e.chat.contact,["name"]),_=(0,l.default)();(0,o.useListener)(a,"add remove reset",_);const b=null!==(n=null==a?void 0:a.length)&&void 0!==n?n:0,j=i.fbt._("Broadcast List",null,{hk:"46AT9o"}).toString()+" · "+h.default.t(981,{count:b,_plural:b}),k=C.name?(0,g.jsx)(f.Name,{contact:e.chat.contact,selectable:!0}):i.fbt._("Untitled List",null,{hk:"fYALp"});return(0,g.jsxs)(c.default,{theme:"padding-large",children:[(0,g.jsx)("div",{className:(0,s.default)(x),children:(0,g.jsx)(d.DetailImage,{id:e.chat.id,size:d.DetailImageSize.Large})}),(0,g.jsxs)(u.FlexColumn,{align:"center",children:[(0,g.jsx)(m.TextHeader,{level:"2",size:"24",children:k}),(0,g.jsx)("div",{className:(0,s.default)(v),children:(0,g.jsx)(p.SelectableSpan,{dir:"auto",selectable:!0,children:(0,g.jsx)(m.TextSpan,{size:"16",color:"secondary",children:j})})})]})]})};var i=n(48360),s=a(n(56720)),l=a(n(59312)),o=n(87550),r=n(35461),d=n(88984),c=a(n(33308)),u=n(29623),h=a(n(14296)),f=n(12176),p=n(52596),m=n(13923),g=n(85893);const x={display:"p357zi0d",justifyContent:"ac2vgrno",marginBottom:"du8bjn1j"},v={lineHeight:"a4ywakfo",marginTop:"g1eqewly"}},44296:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;return(0,l.jsx)(s.default,(0,i.default)((0,i.default)({},e),{},{separator:null!==(t=e.separator)&&void 0!==t&&t,xstyle:[e.xstyle,o.container],blockXstyle:[e.blockXstyle,o.block]}))};var i=a(n(81109)),s=(a(n(56720)),a(n(35721))),l=n(85893);const o={container:{paddingStart:"gx1rr48f"},block:{paddingEnd:"f9ovudaz",borderTop:"cc8mgx9x"}}},75116:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;let{icon:n,title:a,secondaryTitle:p,side:m}=e,g=(0,s.default)(e,u);const x=null!==(t=f[n])&&void 0!==t?t:20,v=(0,c.jsx)(r.FlexRow,{xstyle:h.iconContainer,align:"center",justify:"center",children:(0,c.jsx)(d.default,{color:"secondary",name:n,height:x})});let C=null!=m?m:"";"chevron"===C&&(C=(0,c.jsx)(d.default,{color:"secondary",name:"chevron-right-alt",directional:!0}));return(0,c.jsxs)(o.default,(0,i.default)((0,i.default)({},g),{},{multiline:!0,children:[(0,c.jsxs)(r.FlexRow,{align:"center",justify:"start",children:[v,(0,c.jsx)("div",{className:(0,l.default)(h.content),children:a}),(0,c.jsx)(r.FlexRow,{align:"center",justify:"end",xstyle:h.drawerSide,children:C})]}),(0,c.jsx)("div",{className:(0,l.default)(h.secondaryTitleContainer),children:p})]}))};var i=a(n(81109)),s=a(n(6479)),l=a(n(56720)),o=a(n(44296)),r=n(29623),d=a(n(23217)),c=n(85893);const u=["icon","title","secondaryTitle","side"],h={iconContainer:{marginEnd:"bugiwsl0",width:"qssinsw9",height:"bmot90v7",flexGrow:"tvf2evcx",flexShrink:"oq44ahr5"},content:{flexGrow:"ggj6brxn",flexShrink:"m0h2a7mj",minWidth:"ktfrpxia"},drawerSide:{flexGrow:"tvf2evcx",flexShrink:"oq44ahr5",width:"baeo9xnf"},secondaryTitleContainer:{marginStart:"oybqnh0n",marginEnd:"lfum0007"}},f={settings:17}},5406:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{chat:t,onMediaGallery:n}=e;const a=l.fbt._("Media, links and docs",null,{hk:"3D4fAZ"}),i=(0,C.jsx)(v.default,{color:"secondary",name:"chevron-right-alt",directional:!0}),s=(0,C.jsxs)(p.FlexRow,{align:"center",children:[(0,m.isMediaGalleryFixEnabled)()?(0,C.jsx)(b,{chat:t}):(0,C.jsx)(j,{chat:t}),(0,C.jsx)("div",{children:i})]});return(0,C.jsx)(f.ChatInfoDrawerSection,{a8nText:"section-media",title:a,titleOnClick:n,subtitle:s,xstyle:_.drawerSection,children:(0,C.jsx)(g.default,{chat:t,mediaMsgs:t.getMediaMsgs(),theme:"chat-info"})})};var i=a(n(48926)),s=n(88555),l=n(48360),o=n(67294),r=a(n(56720)),d=a(n(59312)),c=n(87550),u=a(n(74570)),h=a(n(3409)),f=n(98792),p=n(29623),m=n(57701),g=a(n(88224)),x=n(41908),v=a(n(23217)),C=n(85893);const _={mediaCount:{marginEnd:"bugiwsl0",fontSize:"bze30y65",color:"g01nkquw"},drawerSection:{paddingBottom:"aiput80m"}};function b(e){let{chat:t}=e;const n=function(e){const[t,n]=(0,o.useState)(null),a=(0,h.default)(),i=(0,o.useCallback)((()=>{e.countAllMedia().then((e=>{a.aborted||n(e)}))}),[e,a]);return(0,o.useEffect)(i,[i]),(0,c.useListener)(e.getMediaMsgs(),["add","remove"],i),(0,c.useListener)(e.getDocMsgs(),["add","remove"],i),(0,c.useListener)(e.getLinkMsgs(),["add","remove"],i),t}(t);return(0,C.jsx)("div",{className:(0,r.default)(_.mediaCount),children:n})}function j(e){let{chat:t}=e;const n=function(e){const t=e.getMediaMsgs(),n=e.getDocMsgs(),a=e.getLinkMsgs(),l=(0,d.default)();(0,c.useListener)(t,"add remove reset query_media_before",l),(0,c.useListener)(n,"add remove reset query_doc_before",l),(0,c.useListener)(a,"add remove reset query_link_before",l);const r=(0,u.default)();(0,o.useEffect)((()=>{r((0,i.default)((function*(){const i=[];t.hasMediaBefore&&i.push(t.queryMedia({chat:e})),n.hasDocBefore&&i.push(n.queryDocs(e)),a.hasLinkBefore&&i.push(a.queryLinks(e)),yield Promise.all(i),l()})))}),[e,n,l,a,t,r]);let h=null;if(!t.hasMediaBefore&&!n.hasDocBefore&&!a.hasLinkBefore){let e=t.length;(0,s.isMDBackend)()&&(e=t.filter((e=>(0,x.hasThumbnail)(e.mediaData))).length),h=e+n.length+a.length}return h}(t);return(0,C.jsx)("div",{className:(0,r.default)(_.mediaCount),children:n})}},2389:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{contact:t}=e,n=(0,u.jsx)(s.default,{multiline:!0,children:(0,u.jsx)(c.TextSpan,{theme:"title",children:(0,u.jsx)(d.default,{id:t.id})})}),a=(0,u.jsx)(s.default,{separator:!0,children:(0,u.jsx)(r.SelectableSpan,{dir:"auto",selectable:!0,children:(0,u.jsx)(c.TextSpan,{theme:"title",children:(0,i.widToFormattedUser)(t.id)})})});return(0,u.jsxs)(l.ChatInfoDrawerSection,{xstyle:h.container,a8nText:"section-about-and-phone-number",title:o.default.t(362),children:[n,a]})};var i=n(62054),s=(a(n(56720)),a(n(44296))),l=n(98792),o=a(n(14296)),r=n(52596),d=a(n(73561)),c=n(13923),u=n(85893);const h={container:{paddingBottom:"przvwfww"}}},12242:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{contact:t}=e;let n;n=(0,h.canSeeSMBUpsell)()?(0,p.jsx)(x,{onClick:function(){r.Cmd.openModal((0,p.jsx)(o.default,{contact:t}))}}):(0,p.jsx)(g,{onClick:function(){r.Cmd.openModal((0,p.jsx)(l.default,{contact:t}))}});return(0,p.jsx)(u.default,{className:s.default.businessAccount,children:n})};var i=n(48360),s=a(n(57450)),l=a(n(62138)),o=a(n(955)),r=n(88102),d=a(n(35721)),c=a(n(64738)),u=a(n(33308)),h=n(57701),f=a(n(23217)),p=n(85893);const m=i.fbt._("This is a business account.",null,{hk:"2x8QUJ"});function g(e){let{onClick:t}=e;return(0,p.jsx)(c.default,{a8nText:"business-title",className:s.default.businessTitleText,onClick:t,children:m})}function x(e){let{onClick:t}=e;return(0,p.jsx)(d.default,{a8nText:"business-title",className:s.default.businessTitleWithSMBUpsell,onClick:t,side:(0,p.jsx)(f.default,{display:"inline",name:"info"}),children:m})}},82192:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n;const{contact:a,onProductCatalog:M}=e,T=(0,r.useContext)(m.DrawerContext),E=(0,C.getProductCatalogSessionId)(T),y=(0,j.default)((0,b.unproxy)(e.contact));function P(){return(P=(0,i.default)((function*(){const e=yield(0,g.findChat)(a.id);(yield p.Cmd.openChatFromUnread(e))&&(p.Cmd.closeDrawerRight(),(0,v.btmThreadsLoggingEnabled)()&&p.Cmd.addChatMsgSentLogAttributes(e,{handleMultiple(){(0,l.handleActivitiesForChatThreadLogging)([{activityType:"profileReplies",ts:(0,s.unixTime)(),chatId:e.id}])}}))}))).apply(this,arguments)}let I;const w=f.ChatCollection.getActive();if(!(null==w?void 0:w.id.equals(a.id))){var A;(0,c.logMessageClick)(E,null===(A=a.businessProfile)||void 0===A?void 0:A.isProfileLinked),I=(0,k.jsx)(d.default,{icon:"chat-msg",label:o.fbt._("Message",null,{hk:"mZ5DE"}),onClick:()=>{!function(){P.apply(this,arguments)}()},a8nText:"business-action chat"})}let N,D,O;y.isVoiceCallEnabled&&(N=(0,k.jsx)(d.default,{icon:"voice-call-filled",label:o.fbt._("Voice call",null,{hk:"393mz4"}),disabled:!y.canStartVoiceCall,onClick:()=>{var e;(0,c.logVoiceCallClick)(E,null===(e=a.businessProfile)||void 0===e?void 0:e.isProfileLinked),y.startVoiceCall()},a8nText:"business-action voice-call"}));(null===(t=a.businessProfile)||void 0===t||null===(n=t.profileOptions)||void 0===n?void 0:n.commerceExperience)===u.COMMERCE_EXPERIENCE_TYPES.CATALOG&&(D=(0,k.jsx)(d.default,{icon:"catalog-filled",label:o.fbt._("Catalog",null,{hk:"3QDkTE"}),onClick:()=>{var e;(0,c.logCatalogClick)(E,null===(e=a.businessProfile)||void 0===e?void 0:e.isProfileLinked),M((0,C.getProductCatalogContext)(T),"ContactInfo")},a8nText:"business-action catalog"}));if((0,h.hasShop)(a.businessProfile)){(0,v.bannedShopsEnabled)()&&(0,h.isShopBanned)(a.businessProfile)||(O=(0,k.jsx)(d.default,{icon:"shop-filled",label:o.fbt._("Shop",null,{hk:"3KsdlE"}),onClick:function(){var e;(0,c.logShopsClick)(E,null===(e=a.businessProfile)||void 0===e?void 0:e.isProfileLinked),(0,h.goToShop)(a.businessProfile)},a8nText:"business-action shop"}))}const R=(0,k.jsx)(d.default,{icon:"forward-filled",label:o.fbt._("Share",null,{hk:"4F3c6E"}).toString(),onClick:function(){var e;(0,c.logForwardClick)(E,null===(e=a.businessProfile)||void 0===e?void 0:e.isProfileLinked),p.Cmd.openModal((0,k.jsx)(_.SendContactFlowLoadable,{contacts:[(0,b.unproxy)(a)],onContactsSent:e=>{p.Cmd.openChatFromUnread(e).then((()=>{}))}}))},a8nText:"business-action forward"});return(0,k.jsxs)(x.FlexRow,{xstyle:S.actionsRow,justify:"evenly",children:[I,N,D,O,R]})};var i=a(n(48926)),s=n(92844),l=n(16116),o=n(48360),r=n(67294),d=(a(n(56720)),a(n(39902))),c=n(13062),u=n(93170),h=n(94010),f=n(69951),p=n(88102),m=n(27394),g=n(50101),x=n(29623),v=n(57701),C=n(97567),_=n(3362),b=n(31019),j=a(n(9582)),k=n(85893);const S={actionsRow:{marginTop:"c46o30wg",marginEnd:"bsg2wrd4",marginBottom:"brac1wpa",marginStart:"f459d30t","@media (min-width: 1300px)":{marginStart:"hfp8519b",marginEnd:"acdu7ris"}}}},82739:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{businessHours:t,isProfileLinked:n}=e,a=(0,h.getProductCatalogSessionId)((0,l.useContext)(c.DrawerContext)),i=(0,d.getBusinessOpenState)(t),[o,u]=(0,l.useState)(!0);if(null==t)return null;const p=(0,f.getBusinessHours)(t).map((e=>{const{day:t,hours:n,first:a}=e;let l=t,r=n,c=!1;if(a)switch(i.status){case d.BUSINESS_OPEN_STATUS.OPEN_24H:l=s.fbt._("Open now",null,{hk:"28hpHy"}),r=s.fbt._("Open 24 hours",null,{hk:"1AlfF5"}),c=!0;break;case d.BUSINESS_OPEN_STATUS.OPEN_APPOINTMENT:l=s.fbt._("Open now",null,{hk:"28hpHy"}),r=s.fbt._("Open by appointment only",null,{hk:"1nxH9v"}),c=!0;break;case d.BUSINESS_OPEN_STATUS.OPEN:l=s.fbt._("Open now",null,{hk:"28hpHy"}),c=!0;break;case d.BUSINESS_OPEN_STATUS.CLOSED_TODAY:r=s.fbt._("Closed",null,{hk:"3IRgct"})}return!a&&o?null:(0,g.jsx)(v,{day:l,dayIsOpen:c,hours:r,first:a,collapsed:o},t)}));return(0,g.jsx)(m.default,{xstyle:x.businessHours,onClick:()=>{(0,r.logHoursClick)(a,n),u(!o)},a8nText:"business-hours-expand",children:p})};var i=a(n(94184)),s=n(48360),l=n(67294),o=(a(n(56720)),a(n(33463))),r=n(13062),d=n(94010),c=n(27394),u=n(65417),h=n(97567),f=n(26316),p=a(n(23217)),m=a(n(1784)),g=n(85893);const x={businessHours:{display:"f804f6gw",width:"ln8gz9je",textAlign:"ml4r5409"}};function v(e){if(e.first){const t=(0,g.jsx)("div",{className:o.default.businessHoursChevron,role:"button",children:(0,g.jsx)(p.default,{className:e.collapsed?"":o.default.flipSvg,display:"inline",name:"chevron-down-alt"})});return(0,g.jsxs)("div",{className:(0,i.default)(o.default.businessHoursRow,{[o.default.firstRow]:e.first}),children:[(0,g.jsx)("div",{className:(0,i.default)(o.default.businessHoursDay,{[o.default.dayIsOpen]:e.dayIsOpen}),children:(0,g.jsx)(u.EmojiText,{direction:"auto",text:e.day})}),(0,g.jsx)("div",{className:o.default.businessHoursHours,children:(0,g.jsx)(u.EmojiText,{direction:"auto",text:e.hours})}),t]})}return(0,g.jsxs)("div",{className:o.default.businessHoursRow,children:[(0,g.jsx)("div",{className:o.default.businessHoursDay,children:(0,g.jsx)(u.EmojiText,{direction:"auto",text:e.day})}),(0,g.jsx)("div",{className:o.default.businessHoursHours,children:(0,g.jsx)(u.EmojiText,{direction:"auto",text:e.hours})})]})}},71322:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{businessProfile:t}=e,{description:n,address:a,latitude:b,longitude:j,website:k,email:S,businessHours:M,isProfileLinked:T}=(0,r.useModelValues)(t,["description","address","latitude","longitude","website","email","businessHours","isProfileLinked"]),E=(0,o.useContext)(f.DrawerContext),y=(0,v.getProductCatalogSessionId)(E);let P,I,w,A,N,D;null!=n&&(P=(0,C.jsx)("div",{className:c.default.section,children:(0,C.jsx)(m.default,{text:n,textLimit:i.default.BUSINESS_DESCRIPTION_INFO_PANEL_TRUNC_LENGTH,children:e=>{let{textLimit:t}=e;return(0,C.jsx)(p.EmojiText,{className:c.default.description,selectable:!0,direction:"auto",text:n,textLimit:t})}})}));null!=M&&(I=(0,C.jsx)("div",{className:c.default.section,children:(0,C.jsx)(d.default,{businessHours:M,isProfileLinked:T})}));null!=a&&(w=(0,C.jsx)("div",{className:c.default.section,children:(0,C.jsx)(p.EmojiText,{selectable:!0,direction:"auto",text:a})}));null!=b&&null!=j&&(A=(0,C.jsx)("div",{style:{height:132},className:(0,l.default)(c.default.section,c.default.map),children:(0,C.jsx)(x.default,{lat:b,lng:j,name:a||"",width:590,height:132,onClick:()=>(0,u.logLocationClick)(y,T),a8nText:"business-info-map"})}));null!=S&&(N=(0,C.jsx)("div",{className:c.default.section,children:(0,C.jsx)(g.ExternalLink,{href:`mailto:${S}`,onClick:()=>(0,u.logEmailClick)(y),a8nText:"business-info-email",children:S})}));null!=k&&k.length>0&&(D=(0,C.jsx)("div",{className:c.default.section,children:k.map((e=>(0,C.jsx)("div",{children:(0,C.jsx)(g.ExternalLink,{href:s.default.toMaliciousSiteRedirect(e),onClick:()=>(0,u.logWebsiteClick)(y),a8nText:"business-info-website",children:e})},e)))}));return null==P&&null==I&&null==w&&null==A&&null==N&&null==D?null:(0,C.jsxs)(h.ChatInfoDrawerSection,{xstyle:_.container,children:[P,I,w,A,N,D]})};var i=a(n(64369)),s=a(n(76139)),l=a(n(94184)),o=n(67294),r=(a(n(56720)),n(35461)),d=a(n(82739)),c=a(n(85938)),u=n(13062),h=n(98792),f=n(27394),p=n(65417),m=a(n(17080)),g=n(12591),x=a(n(83452)),v=n(97567),C=n(85893);const _={container:{paddingTop:"i4pc7asj",paddingBottom:"q1nnjopg"}}},11197:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{contact:t}=e;let n,a;if(t.isMyContact)if(t.name!==t.verifiedName){let e;t.showBusinessCheckmarkAsSecondary&&(e=(0,r.jsx)("div",{className:i.default.icon,children:(0,r.jsx)(o.default,{name:"psa-verified"})})),n=(0,r.jsx)(l.Name,{contact:t,breakWord:!0}),a=(0,r.jsxs)("div",{className:i.default.wrapper,children:[(0,r.jsx)(s.EmojiText,{text:`~${t.verifiedName}`,className:i.default.verifiedText,direction:"auto",ellipsify:!0,titlify:!0}),e]})}else n=(0,r.jsx)(l.Name,{contact:t,showBusinessCheckmark:t.showBusinessCheckmarkAsPrimary,breakWord:!0});else n=(0,r.jsx)(s.EmojiText,{text:t.verifiedName,direction:"auto",ellipsify:!0,titlify:!0,breakWord:!0}),a=(0,r.jsx)(l.Name,{contact:t,showBusinessCheckmark:t.showBusinessCheckmarkAsPrimary});return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:i.default.title,children:n}),(0,r.jsx)("div",{className:i.default.subtitle,children:a})]})};var i=a(n(90123)),s=n(65417),l=n(12176),o=a(n(23217)),r=n(85893)},90435:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.BusinessOpenHours=function(e){const{hours:t}=e,n=u((0,o.getBusinessOpenState)(t));if(null==n)return null;const a=i.default.sanitize(n);return(0,d.jsx)("div",{className:l.default.openStatus,dangerouslySetInnerHTML:{__html:a}})},t.getBusinessOpenStr=u;var i=a(n(77482)),s=n(48360),l=a(n(44920)),o=n(94010),r=a(n(14296)),d=n(85893);function c(e){return null==e?"":e.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})}function u(e){switch(e.status){case o.BUSINESS_OPEN_STATUS.OPEN_24H:return r.default.t(239,{open:`<span class="${l.default.open}">${s.fbt._("Open",null,{hk:"187rvw"}).toString()}</span>`});case o.BUSINESS_OPEN_STATUS.OPEN_APPOINTMENT:return r.default.t(241,{open:`<span class="${l.default.open}">${s.fbt._("Open",null,{hk:"187rvw"}).toString()}</span>`});case o.BUSINESS_OPEN_STATUS.OPEN:if(e.openUntil&&e.additionalOpen&&e.additionalClose)return r.default.t(243,{open:`<span class="${l.default.open}">${s.fbt._("Open",null,{hk:"187rvw"}).toString()}</span>`,time:c(e.openUntil),additionalOpenTime:c(e.additionalOpen),additionalCloseTime:c(e.additionalClose)});if(e.openUntil)return r.default.t(242,{open:`<span class="${l.default.open}">${s.fbt._("Open",null,{hk:"187rvw"}).toString()}</span>`,time:c(e.openUntil)});break;case o.BUSINESS_OPEN_STATUS.CLOSED:return e.opensAt?r.default.t(236,{closed:`<span class="${l.default.closed}">${s.fbt._("Closed now",null,{hk:"2oDK4r"}).toString()}</span>`,time:c(e.opensAt)}):`<span class="${l.default.closed}">${s.fbt._("Closed now",null,{hk:"2oDK4r"}).toString()}</span>`;case o.BUSINESS_OPEN_STATUS.CLOSED_TODAY:return`<span class="${l.default.closed}">${s.fbt._("Closed today",null,{hk:"3uCCvH"}).toString()}</span>`}return null}},32145:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.BusinessProfile=function(e){let t;const n=(0,r.useModelValues)(e.contact,["id","verifiedLevel","name","verifiedName"]),a=(0,r.useModelValues)(e.businessProfile,["description","categories","website","email","stale","latitude","longitude","businessHours","structuredAddress"]);(0,o.useEffect)((()=>{new S.default.ViewBusinessProfile({viewBusinessProfileAction:S.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_IMPRESSION}).commit()}),[]);const s=(e,t,n,a)=>{const i=a?(e=>{const{streetAddress:t,localizedCityName:n,zipCode:a}=e;return t&&n&&a?b.default.t(246,{streetAddress:t,city:n,zipCode:a}):t&&n?b.default.t(245,{streetAddress:t,city:n}):t})(a):null;let s,l;if(null!=t&&null!=n&&(s=(0,y.jsx)("div",{style:{height:150},className:u.default.businessMap,children:(0,y.jsx)(j.default,{lat:t,lng:n,name:i||e,width:565,height:150})})),i){let e;e=null!=t&&null!=n?(0,k.getMapUrl)(t,n,i):(0,k.getSearchUrl)(i),l=(0,y.jsx)("div",{className:u.default.address,children:(0,y.jsx)(C.ExternalLink,{href:e,children:(0,y.jsx)(x.EmojiText,{selectable:!0,direction:"auto",text:i})})})}return l||s?(0,y.jsxs)(N,{icon:"business-address",children:[l,s]}):null};t=(0,_.canSeeSMBUpsell)()?(0,y.jsx)(P,{contact:n}):(0,y.jsx)(w,{contact:n});let l,d,c,h,f,p,m;const E=a;if(E.stale)l=(0,y.jsx)("div",{className:u.default.contactBusinessInfoSpinner,children:(0,y.jsx)(T.Spinner,{size:20,stroke:5})});else{var A;if(d=(null===(A=E.categories)||void 0===A?void 0:A.length)?(0,y.jsx)(N,{icon:"business-category",children:(0,y.jsx)(x.EmojiText,{selectable:!0,direction:"auto",text:E.categories.map((e=>e.localized_display_name)).join(b.default.t(406))})}):null,c=E.description?(0,y.jsx)(N,{icon:"business-description",children:(0,y.jsx)(v.default,{text:E.description,textLimit:i.default.BUSINESS_DESCRIPTION_INFO_PANEL_TRUNC_LENGTH,children:e=>{let{textLimit:t}=e;return(0,y.jsx)(x.EmojiText,{selectable:!0,direction:"auto",breakWord:!0,text:E.description,textLimit:t})}})}):null,h=s(n.name,E.latitude,E.longitude,E.structuredAddress),E.website&&Array.isArray(E.website)&&E.website.length&&(f=E.website.map(((e,t)=>{const n=(0,M.getWebsiteLink)(e),a=(0,y.jsx)(x.EmojiText,{selectable:!0,direction:"auto",text:e}),i=(0,y.jsx)(C.ExternalLink,{className:u.default.link,href:n,children:a});return(0,y.jsx)(N,{icon:"business-website",children:i},t)}))),E.businessHours&&(p=(0,y.jsx)(I,{businessHours:E.businessHours})),E.email){const e=(0,y.jsx)(x.EmojiText,{selectable:!0,direction:"auto",text:E.email}),t=(0,y.jsx)(C.ExternalLink,{className:u.default.link,href:`mailto:${E.email}`,children:e});m=(0,y.jsx)(N,{icon:"business-email",dir:"auto",children:t})}}let D;(l||null!=h||d||c||null!=p||m||f)&&(D=(0,y.jsx)(g.default,{theme:"padding",children:(0,y.jsxs)("div",{className:u.default.contactBusinessInfo,children:[l,h,d,c,p,m,f]})}));return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(g.default,{children:t}),D]})};var i=a(n(64369)),s=a(n(94184)),l=n(48360),o=n(67294),r=n(35461),d=a(n(62138)),c=a(n(955)),u=a(n(35100)),h=n(93170),f=n(88102),p=a(n(35721)),m=a(n(64738)),g=a(n(33308)),x=n(65417),v=a(n(17080)),C=n(12591),_=n(57701),b=a(n(14296)),j=a(n(83452)),k=n(8384),S=a(n(11339)),M=n(26316),T=n(11054),E=a(n(23217)),y=n(85893);function P(e){let{contact:t}=e;const n=t.verifiedLevel===h.VERIFIED_LEVEL.HIGH?l.fbt._("Official business account",null,{hk:"1KruJ"}):l.fbt._("Business account",null,{hk:"2lzdAg"});return(0,y.jsx)(p.default,{a8nText:"business-title",onClick:f.Cmd.openModal((0,y.jsx)(c.default,{contact:t})),side:(0,y.jsx)(E.default,{className:u.default.infoIcon,display:"inline",name:"info"}),children:n})}function I(e){let{businessHours:t}=e;const[n,a]=(0,o.useState)(!0),i=(0,M.getBusinessHours)(t).map((e=>{const{day:t,hours:a,first:i}=e;return!i&&n?null:(0,y.jsx)(A,{day:t,hours:a,first:i,collapsed:n},t)}));return(0,y.jsx)(N,{icon:"business-hours",onClick:()=>a(!n),children:i})}function w(e){let t,{contact:n}=e;switch(n.verifiedLevel){case h.VERIFIED_LEVEL.HIGH:t=l.fbt._("Official business account",null,{hk:"1KruJ"});break;case h.VERIFIED_LEVEL.LOW:case h.VERIFIED_LEVEL.UNKNOWN:t=l.fbt._("Business account",null,{hk:"2lzdAg"})}return(0,y.jsx)(m.default,{a8nText:"business-title",className:u.default.businessTitleText,onClick:()=>{f.Cmd.openModal((0,y.jsx)(d.default,{contact:n}))},children:t})}const A=e=>{const t=e.first?(0,y.jsx)("div",{className:u.default.businessHoursChevron,role:"button",children:(0,y.jsx)(E.default,{className:e.collapsed?"":u.default.flipSvg,display:"inline",name:"chevron-down-alt"})}):null;return(0,y.jsxs)("div",{className:u.default.businessHoursRow,children:[(0,y.jsx)("div",{className:u.default.businessHoursDay,children:(0,y.jsx)(x.EmojiText,{direction:"auto",text:e.day})}),(0,y.jsx)("div",{className:u.default.businessHoursHours,children:(0,y.jsx)(x.EmojiText,{direction:"auto",text:e.hours})}),t]})},N=e=>(0,y.jsxs)("div",{className:(0,s.default)(u.default.dataRow,e.className),onClick:e.onClick,children:[(0,y.jsx)("div",{className:u.default.dataRowIcon,children:(0,y.jsx)(E.default,{name:e.icon})}),(0,y.jsx)("div",{className:u.default.dataRowText,children:e.children})]})},64368:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{contact:t,businessProfile:n,onOpenStatus:a,onProductCatalog:f,onProfilePicLoad:p,onProfilePicClick:m}=e;const{businessHours:g,categories:x}=(0,i.useModelValues)(n,["businessHours","categories"]),v=(0,h.jsx)(l.default,{contact:t});let C;null!=x&&x.length>0&&(C=(0,h.jsx)("div",{className:r.default.categories,children:x.map((e=>e.localized_display_name)).join(u.default.t(405))}));const _=g?(0,h.jsx)(o.BusinessOpenHours,{hours:g}):null;return(0,h.jsxs)(c.default,{className:r.default.noPaddingBottom,theme:"padding",children:[(0,h.jsx)(d.default,{contact:t,onClick:m,onOpenStatus:a,onLoad:p}),(0,h.jsxs)("div",{className:r.default.info,children:[v,C,_,(0,h.jsx)(s.default,{contact:t,onProductCatalog:f})]})]})};var i=n(35461),s=a(n(82192)),l=a(n(11197)),o=n(90435),r=a(n(8342)),d=a(n(24697)),c=a(n(33308)),u=a(n(14296)),h=n(85893)},23073:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{contact:t}=e;return(0,r.jsx)(s.ChatInfoDrawerSection,{a8nText:"section-about",title:i.fbt._("About",null,{hk:"4qoAfH"}),children:(0,r.jsx)(o.TextSpan,{theme:"title",size:"16",children:(0,r.jsx)(l.default,{id:t.id})})})};var i=n(48360),s=n(98792),l=a(n(73561)),o=n(13923),r=n(85893)},93861:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(67294),s=n(65511),l=n(98792),o=n(88102),r=a(n(31808)),d=n(44663),c=n(47915),u=a(n(14296)),h=n(84387),f=a(n(65932)),p=n(85893);class m extends i.Component{constructor(){super(...arguments),this._commonGroupInitialized=!1,this.state={collapsed:!1,numGroups:0},this._handleShowMore=()=>{this.setState({collapsed:!1})},this.rerender=()=>{this.forceUpdate()},this._handleClick=(e,t)=>{o.Cmd.openChatFromUnread(t).then((e=>{e&&o.Cmd.focusChatTextInput(t)})),this.props.onClose()},this.renderItem=e=>{const{chat:t}=e;return(0,p.jsx)(s.Chat,{chat:t,theme:"chat-info",contact:t.contact,mode:s.Mode.INFO,onClick:this._handleClick},t.id.toString())}}static getDerivedStateFromProps(e,t){const{commonGroups:n}=e.contact,a=n?n.length:0;return t.numGroups<=l.INFO_DRAWER_MAX_ROWS&&a>l.INFO_DRAWER_MAX_ROWS?{numGroups:a,collapsed:!0}:{numGroups:a}}getData(){let e=this.props.contact.commonGroups;return e.length>l.INFO_DRAWER_MAX_ROWS&&this.state.collapsed&&(e=e.slice(0,l.INFO_DRAWER_MAX_ROWS)),e.map((e=>({itemKey:e.id.toString(),chat:e,height:68})))}componentWillUnmount(){const{commonGroups:e}=this.props.contact;e&&this._commonGroupInitialized&&(this.props.listeners.remove(e,"add remove",this.rerender),this._commonGroupInitialized=!1)}componentDidUpdate(e){if(e.contact!==this.props.contact){const t=e.contact.commonGroups;t&&e.listeners.remove(t,"add remove",this.rerender),this._commonGroupInitialized=!1}const{commonGroups:t}=this.props.contact;t&&(this._commonGroupInitialized||(this.props.listeners.add(t,"add remove",this.rerender),this._commonGroupInitialized=!0))}componentDidMount(){const{commonGroups:e}=this.props.contact;e&&(this.props.listeners.add(e,"add remove",this.rerender),this._commonGroupInitialized=!0),(0,d.findCommonGroups)(this.props.contact).catch((e=>{throw __LOG__(4,!0,new Error,!0)`get from participants table failed`,SEND_LOGS("get from participants table failed when finding common groups: "+e),new Error("get from participants table failed")}))}render(){const e=this.props.contact.commonGroups;if(!(null==e?void 0:e.length))return null;let t;if(e.length>l.INFO_DRAWER_MAX_ROWS&&this.state.collapsed){const n=e.length-l.INFO_DRAWER_MAX_ROWS;t=(0,p.jsx)(r.default,{numMore:n,onClick:this._handleShowMore})}const n=u.default.t(361,{number:u.default.n(e.length),_plural:e.length});return(0,p.jsxs)(l.ChatInfoDrawerListSection,{a8nText:"section-common-groups",title:n,children:[(0,p.jsx)(c.FlatList,{flatListController:this.props.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:this.getData(),renderItem:this.renderItem}),t]})}}m.CONCERNS={contact:["commonGroups","isBusiness"]},m.displayName="ContactInfoCommonGroupsBase";var g=(0,h.ListenerHOC)((0,f.default)(m,m.CONCERNS));t.default=g},37380:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(81109)),s=n(50796),l=n(92844),o=n(92574),r=n(88555),d=n(16116),c=n(48360),u=n(67294),h=a(n(56720)),f=a(n(16223)),p=n(35461),m=a(n(55010)),g=a(n(95402)),x=a(n(2389)),v=a(n(12242)),C=a(n(71322)),_=n(13062),b=n(32145),j=n(94010),k=a(n(64368)),S=n(99989),M=a(n(42953)),T=n(69951),E=n(98792),y=a(n(5406)),P=n(88102),I=a(n(23073)),w=a(n(93861)),A=a(n(87624)),N=a(n(97140)),D=a(n(72891)),O=a(n(47091)),R=n(62632),L=n(26409),B=a(n(60453)),G=a(n(69637)),F=a(n(64738)),V=n(27394),U=n(94790),H=a(n(33308)),q=n(61086),W=a(n(30855)),Y=n(99234),z=n(57701),K=a(n(77577)),X=a(n(14296)),Z=a(n(35580)),$=a(n(43895)),Q=n(56057),J=n(82145),ee=n(97398),te=a(n(11339)),ne=a(n(3721)),ae=a(n(71528)),ie=n(97567),se=n(9153),le=n(48870),oe=a(n(68132)),re=a(n(96222)),de=n(31019),ce=a(n(23217)),ue=n(50452),he=n(85893);const fe={flexGrow:"tvf2evcx",flexShrink:"oq44ahr5",flexBasis:"lb5m6g5c",paddingBottom:"s9fl9ege"};function pe(e){let{contact:t,catalogContext:n,onProductDetail:a,onProductCatalog:i}=e;const s=S.CatalogCollection.get(t.id);if(!s)return null;let l="",o=!1;(0,z.canSeeBizProfileV3)()&&(l=c.fbt._("See all",null,{hk:"3dTwyT"}),o=!0);const{session:r}=n;return r.isAccidental()?null:(0,j.hasShop)(t.businessProfile)?(0,z.bannedShopsEnabled)()&&(0,j.isShopBanned)(t.businessProfile)?null:(0,he.jsx)(re.default,{businessProfile:t.businessProfile,catalog:s,subtitle:l,hideIncompleteRows:o}):(0,he.jsx)(M.default,{onProductDetail:a,onProductCatalog:i,catalog:s,subtitle:l,hideIncompleteRows:o,shouldLog:!0})}function me(e,t){const{onVerification:n,onClose:a,onProductDetail:j,onProductCatalog:M,canLogQpl:re=!0}=e,me=(0,g.default)(),ge=(0,u.useContext)(V.DrawerContext),xe=(0,p.useModelValues)(e.contact,["id","formattedName","formattedUser","formattedShortName","isBusiness","isEnterprise","isMyContact","commonGroups","businessProfile","showBusinessCheckmarkAsPrimary","showBusinessCheckmarkAsSecondary","verifiedName","verifiedLevel","name","notifyName","labels","businessCatalog","isMe","statusMute","displayName"]),ve=(0,f.default)((()=>new W.default)),Ce=(0,u.useRef)(!1),[_e,be]=(0,u.useState)(100),je=(0,u.useMemo)((()=>T.ChatCollection.get(xe.id)),[xe.id]);(0,u.useEffect)((()=>{xe.businessProfile&&!xe.businessProfile.stale&&xe.businessCatalog&&S.CatalogCollection.findCarouselCatalog(xe.id).catch((0,s.filteredCatch)(o.ServerStatusCodeError,(()=>{__LOG__(3)`Failed to fetch product catalog in contact drawer from server`}))),(0,r.isMDBackend)()&&(0,L.getFanOutListJob)([xe.id,(0,Y.assertGetMe)()]).then((e=>{(0,ee.ensureE2ESessions)(e)}));const{session:t}=(0,ie.getProductCatalogContext)(ge);if(t.isAccidental())P.Cmd.setDrawerContext("right",(0,ie.buildProductCatalogContext)(new se.ProductCatalogSession,(0,R.getMaybeBizPlatformForLogging)(xe.id.toString()),te.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_PROFILE));else if(xe.isBusiness&&(0,z.canSeeBizProfileV3)()){var n;if(!(xe.id===(0,Y.getMaybeMeUser)()))(0,_.logProfileImpression)((0,ie.getProductCatalogSessionId)(ge),e.profileEntryPoint,null===(n=xe.businessProfile)||void 0===n?void 0:n.isProfileLinked)}re&&xe.businessProfile&&(0,Q.qplEndProfileView)(le.QuickLogActionType.SUCCESS)}),[]),(0,u.useEffect)((()=>{if((0,z.btmThreadsLoggingEnabled)()){var e;const t=null===(e=(0,Y.getMaybeMeUser)())||void 0===e?void 0:e.equals(xe.id),{session:n}=(0,ie.getProductCatalogContext)(ge);n.isAccidental()||t||!(null==je?void 0:je.id)||(0,d.handleActivitiesForChatThreadLogging)([{activityType:"profileViews",ts:(0,l.unixTime)(),chatId:je.id}])}}),[]),(0,m.default)((()=>{const{session:e}=(0,ie.getProductCatalogContext)(ge);var t;e.isAccidental()||xe.isBusiness&&(0,z.canSeeBizProfileV3)()&&(0,_.logProfileExit)((0,ie.getProductCatalogSessionId)(ge),_e,null===(t=xe.businessProfile)||void 0===t?void 0:t.isProfileLinked)}));const ke=()=>{a?a():null==me||me.uie.requestDismiss()},Se=e=>{if(!Ce.current)return void P.Cmd.openToast((0,he.jsx)(ue.Toast,{id:(0,ue.genId)(),msg:c.fbt._("No profile photo",null,{hk:"2bdeTO"})}));const t=e.target;P.Cmd.openModalMedia((0,he.jsx)(ae.default,{contact:xe,profilePicThumb:xe.getProfilePicThumb(),animateBorderRadius:!0,getZoomNode:e=>{e(t)}}),{transition:"profile-viewer",uim:me})},Me=()=>{Ce.current=!0},Te=e=>{(0,J.qplStartProductView)("ContactInfo"),j(e)},Ee=e=>{const t=Math.floor(100*(1+e.currentTarget.scrollTop/e.currentTarget.offsetHeight));t>_e&&be(t)},ye=(0,he.jsx)(w.default,{contact:xe,onClose:ke,flatListController:ve.current});let Pe=null;e.onMediaGallery&&je&&(Pe=(0,he.jsx)(y.default,{chat:je,onMediaGallery:e.onMediaGallery}));let Ie=null;je&&(Ie=(0,he.jsx)($.default,{chat:je,onClick:e.onLiveLocation}));let we=null,Ae=null;if(xe&&xe.isBusiness&&xe.businessProfile&&xe.businessCatalog){const e=(0,he.jsx)(pe,{contact:xe,catalogContext:(0,ie.getProductCatalogContext)(ge),onProductDetail:Te,onProductCatalog:M});(0,z.canSeeBizProfileV3)()?Ae=e:we=e}const Ne=je&&je.mute.canMute()?(0,he.jsx)(ne.default,{chat:je,mute:je.mute,settings:oe.default}):null;let De;e.onStarred&&(De=(0,he.jsx)(D.default,{chat:je,onStarred:e.onStarred,onContactCard:e.onContactCard}));const Oe=je&&je.shouldShowEphemeralSetting()?(0,he.jsx)(q.EphemeralSettingRow,{onClick:e.onEphemeral,chat:je,testid:"contact-info-dm-setting-row"}):null,Re=(0,r.isMDBackend)()?(0,he.jsx)(A.default,{contact:(0,de.unproxy)(xe),onVerificationClick:()=>{n()}}):null;let Le=null;(Ne||Oe||Re)&&(Le=(0,he.jsxs)(E.ChatInfoDrawerSection,{children:[Ne,Oe,Re]}));const Be=!xe.isBusiness,Ge=Be?null:(0,he.jsx)(x.default,{contact:(0,de.unproxy)(xe)}),Fe=Be?(0,he.jsx)(I.default,{contact:(0,de.unproxy)(xe)}):null,Ve=(0,z.canSeeBizProfileV3)()&&xe.isBusiness&&xe.businessProfile?(0,he.jsx)(k.default,{contact:xe,onProfilePicLoad:Me,onProfilePicClick:Se,onOpenStatus:()=>{var e;(0,_.logStatusClick)((0,ie.getProductCatalogSessionId)(ge),null===(e=xe.businessProfile)||void 0===e?void 0:e.isProfileLinked)},businessProfile:xe.businessProfile,onProductCatalog:M}):(0,he.jsx)(O.default,{contact:xe,onDetailImageLoad:Me,onDetailImageClick:Se});let Ue,He,qe,We=null;var Ye,ze;xe.isBusiness&&xe.businessProfile&&((0,z.canSeeBizProfileV3)()&&xe.businessProfile?(We=(0,he.jsx)(C.default,{businessProfile:xe.businessProfile}),Ue=(0,he.jsx)(v.default,{contact:xe}),(null!==(Ye=null===(ze=xe.labels)||void 0===ze?void 0:ze.length)&&void 0!==Ye?Ye:0)>0&&(He=(0,he.jsx)(H.default,{theme:"padding",children:(0,he.jsx)(K.default,{labels:xe.labels,theme:"standalone"})})),qe=Ee):xe.businessProfile&&(We=(0,he.jsx)(b.BusinessProfile,{contact:xe,businessProfile:xe.businessProfile})));const Ke={title:c.fbt._("Contact info",null,{hk:"LUJtH"}),type:U.DRAWER_HEADER_TYPE.SMALL,rtlFixIfOnDarwin:!0,onCancel:ke};let Xe;return xe.businessProfile&&(0,z.bizLinkedAccountsEnabled)()&&(Xe=(0,he.jsx)(Z.default,{businessProfile:xe.businessProfile,rowTheme:"linked-account-consumer"})),(0,he.jsxs)(B.default,{ref:t,theme:"striped",testid:"contact-info-drawer",children:[(0,he.jsx)(U.DrawerHeader,(0,i.default)({},Ke)),(0,he.jsx)(G.default,{flatListControllers:[ve.current],onScroll:qe,children:(0,he.jsxs)("section",{className:(0,h.default)(fe),children:[Ve,Ue,He,Ae,We,Xe,Ie,we,Fe,Pe,De,Le,Ge,undefined,ye,(0,he.jsx)(N.default,{contact:xe}),(0,he.jsx)(E.ChatInfoDrawerButtonsSection,{children:je?(0,he.jsx)(F.default,{a8nText:"li-delete-chat",icon:(0,he.jsx)(ce.default,{name:"delete"}),color:"danger",onClick:()=>{const e=T.ChatCollection.assertGet(xe.id);P.Cmd.deleteOrExitChat(e)},theme:"chat-info",children:X.default.t(374)}):null})]})})]},"contact-info-modal")}var ge=(0,u.forwardRef)(me);t.default=ge},87624:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onVerificationClick:t}=e,n=(0,o.useModelValues)(e.contact,["id","privacyMode"]),a=function(e,t){if((0,c.default)(t.user))return{text:l.fbt._("Click to learn how messages and calls are secured.",null,{hk:"1UxhjE"}),title:l.fbt._("Security",null,{hk:"3j3j0a"}),onClick:()=>{(0,u.default)(l.fbt._("WhatsApp secures your messages and calls with this account.",null,{hk:"18Ci1q"}),(0,i.getSupportChatSafetyFaqUrl)(),l.fbt._("Learn more about chats with WhatsApp Support.",null,{hk:"1an25A"}))}};switch(e){case s.ReducedPrivacyMode.E2EE:return null;case s.ReducedPrivacyMode.BSP:return{text:l.fbt._("This business works with other companies to manage this chat. Click to learn more.",null,{hk:"VbOOZ"}),title:l.fbt._("Security",null,{hk:"3j3j0a"}),onClick:()=>{(0,u.default)((0,d.formatBspModalText)(),(0,i.getE2EEnterpriseFaqUrl)())}};case s.ReducedPrivacyMode.FB:return{text:l.fbt._("This business uses a secure service from the Facebook company to manage this chat. Click to learn more.",null,{hk:"1kUjsv"}),title:l.fbt._("Security",null,{hk:"3j3j0a"}),onClick:()=>{(0,u.default)((0,d.formatFbModalText)(),(0,i.getE2EEnterpriseFaqUrl)())}}}}((0,s.getReducedPrivacyMode)(n.privacyMode),n.id);if(a)return(0,f.jsx)(r.default,{title:a.title,text:a.text,onClick:a.onClick});const p=(0,h.isVoiceCallEnabled)()||(0,h.isVideoCallEnabled)()?l.fbt._("Messages and calls are end-to-end encrypted. Click to verify.",null,{hk:"GtGQH"}):l.fbt._("Messages are end-to-end encrypted. Click to verify.",null,{hk:"1AqhWR"});return(0,f.jsx)(r.default,{onClick:t,text:p})};var i=n(21310),s=n(8197),l=n(48360),o=n(35461),r=a(n(4584)),d=n(26722),c=a(n(78542)),u=a(n(32162)),h=n(69594),f=n(85893)},97140:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,s.useModelValues)(e.contact,["displayName","isBusiness","isContactBlocked"]);let n=null;if(t.isContactBlocked){const a=h.default.t(363,{contact:t.displayName});n=(0,C.jsx)(u.default,{a8nText:"li-unblock",color:"success",icon:(0,C.jsx)(v.default,{name:"settings-blocked",directional:!0}),onClick:()=>{d.Cmd.openModal((0,C.jsx)(c.default,{okText:h.default.t(780),onOK:()=>{(0,l.unblockContact)(e.contact),d.Cmd.closeModal()},cancelText:i.fbt._("Cancel",null,{hk:"H0gNq"}),onCancel:()=>d.Cmd.closeModal(),children:(0,C.jsx)(f.default,{id:781,params:{contact:(0,C.jsx)(p.Name,{contact:e.contact})}})}))},theme:"chat-info",children:a})}else{const a=h.default.t(360,{contact:t.displayName});n=(0,C.jsx)(u.default,{a8nText:"li-block",color:"danger",icon:(0,C.jsx)(v.default,{name:"settings-blocked",directional:!0}),onClick:()=>{d.Cmd.openModal((0,C.jsx)(c.default,{onOK:()=>{(0,l.blockContact)(e.contact),d.Cmd.closeModal()},okText:h.default.t(171),onCancel:()=>d.Cmd.closeModal(),cancelText:i.fbt._("Cancel",null,{hk:"H0gNq"}),children:(0,C.jsx)(f.default,{id:172,params:{contact:(0,C.jsx)(p.Name,{contact:e.contact})}})}))},theme:"chat-info",children:a})}let a=i.fbt._("Report business",null,{hk:"2Tvnn8"});t.isBusiness||(a=h.default.t(714,{contactInfo:t.displayName}));const _=(0,C.jsx)(u.default,{a8nText:"li-report-spam",color:"danger",icon:(0,C.jsx)(v.default,{name:"thumbs-down",directional:!0}),onClick:()=>{d.Cmd.openModal((0,C.jsx)(m.default,{isBusiness:e.contact.isBusiness,isGroupChat:!1,onReport:()=>{const t=o.ChatCollection.get(e.contact.id);t&&(0,g.sendSpamReport)(t,x.SpamFlow.Account),d.Cmd.closeModal()},onReportBlockClear:()=>{const t=o.ChatCollection.get(e.contact.id);t&&(0,g.sendSpamBlockClear)(t,x.SpamFlow.Block),d.Cmd.closeModal()},onCancel:()=>d.Cmd.closeModal()}))},theme:"chat-info",children:a});return(0,C.jsxs)(r.ChatInfoDrawerButtonsSection,{children:[n,_]})};var i=n(48360),s=n(35461),l=n(80140),o=n(69951),r=n(98792),d=n(88102),c=a(n(52665)),u=a(n(64738)),h=a(n(14296)),f=a(n(56074)),p=n(12176),m=a(n(30934)),g=n(19569),x=n(38839),v=a(n(23217)),C=n(85893)},72891:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{chat:t,onStarred:n,onContactCard:a}=e,u=null;const h=t&&t.getReceivedVcardMsgs();if(r.GK.supportsFeature(r.GK.F.INDEX_RECEIVED_VCARD)&&(null==h?void 0:h.length)){const e=(0,c.jsx)(d.TextSpan,{theme:"title",children:(0,c.jsx)(o.default,{count:h.length})});u=(0,c.jsx)(s.default,{a8nText:"block-starred-messages",side:"chevron",icon:"account-box",onClick:a,title:e})}const f=(0,c.jsx)(d.TextSpan,{theme:"title",size:"16",children:i.fbt._("Starred messages",null,{hk:"4wVbNG"})});return(0,c.jsxs)(l.ChatInfoDrawerSection,{a8nText:"section-starred-messages",children:[(0,c.jsx)(s.default,{a8nText:"block-starred-messages",side:"chevron",icon:"star",onClick:n,title:f}),u]})};var i=n(48360),s=a(n(75116)),l=n(98792),o=a(n(55944)),r=n(7293),d=n(13923),c=n(85893)},47091:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let t,{contact:n,onDetailImageLoad:a,onDetailImageClick:s}=e;if(n.isMyContact)t=(0,i.widToFormattedUser)(n.id);else{const e=n.notifyName;null!=e&&(t=`~${e}`)}return(0,x.jsxs)(d.default,{theme:"padding-large",children:[(0,x.jsx)("div",{className:(0,l.default)(v.avatar),children:(0,x.jsx)(r.DetailImage,{id:n.id,size:r.DetailImageSize.Large,loader:!0,onLoad:a,onClick:s,quality:r.DetailImageQuality.High})}),(0,x.jsxs)(c.FlexColumn,{align:"center",children:[(0,x.jsx)(m.TextHeader,{level:"2",size:"24",xstyle:v.contactName,children:(0,x.jsx)(h.Name,{contact:n,selectable:!0,breakWord:!0})}),null!=t&&(0,x.jsx)("div",{className:(0,l.default)(v.secondaryWrapper),children:(0,x.jsx)(f.SelectableSpan,{dir:"auto",selectable:!0,children:(0,x.jsx)(m.TextSpan,{size:"16",color:"secondary",children:t})})})]}),(0,x.jsx)(_,{contact:n}),(0,x.jsx)(u.default,{labels:n.labels})]})};var i=n(62054),s=n(48360),l=a(n(56720)),o=a(n(39902)),r=n(88984),d=a(n(33308)),c=n(29623),u=a(n(77577)),h=n(12176),f=n(52596),p=n(31019),m=n(13923),g=a(n(9582)),x=n(85893);const v={avatar:{display:"p357zi0d",justifyContent:"ac2vgrno",marginBottom:"pz0xruzv"},secondaryWrapper:{lineHeight:"a4ywakfo",marginTop:"qt60bha0"},contactName:{textAlign:"qfejxiq4"}};const C={container:{marginTop:"a4rz4n5c",marginBottom:"inww9tbj"},button:{marginStart:"nzcjdldu",marginEnd:"gqi0zhd6"}};function _(e){let{contact:t}=e;const n=(0,g.default)((0,p.unproxy)(t));return n.isVideoCallEnabled||n.isVoiceCallEnabled?(0,x.jsxs)(c.FlexRow,{justify:"center",xstyle:C.container,children:[(0,x.jsx)(o.default,{icon:"voice-call-filled",iconWidth:19,label:s.fbt._("Audio",null,{hk:"1b375N"}),a8nText:"contact-action voice-call-button",xstyle:C.button,disabled:!n.canStartVoiceCall,onClick:n.startVoiceCall}),(0,x.jsx)(o.default,{icon:"chat-info-video",label:s.fbt._("Video",null,{hk:"3zMUsJ"}),a8nText:"contact-action video-call-button",xstyle:C.button,disabled:!n.canStartVideoCall,onClick:n.startVideoCall})]}):null}},31808:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{numMore:t,viewAll:n,onClick:a}=e;const h=(0,c.jsx)(s.FlexRow,{align:"center",justify:"center",xstyle:u.iconWrapper,children:n?null:(0,c.jsx)(o.default,{theme:"transparent",children:(0,c.jsx)(r.default,{name:"down",color:"secondary"})})});let f=l.default.t(508,{count:t,_plural:t});n&&(f=l.default.t(507,{more:f}));return(0,c.jsxs)(d.default,{xstyle:u.container,onClick:a,children:[h,(0,c.jsx)("div",{className:(0,i.default)(u.text,n&&u.textAlt),children:f})]})};var i=a(n(56720)),s=n(29623),l=a(n(14296)),o=a(n(52711)),r=a(n(23217)),d=a(n(1784)),c=n(85893);const u={container:{height:"q1n4p668",width:"ln8gz9je",paddingStart:"ddw6s8x9",display:"p357zi0d",alignItems:"gndfcl4n",color:"pm5hny62",":hover":{backgroundColor:"os03hap6"}},iconWrapper:{width:"fujhy7ri"},text:{flexGrow:"ggj6brxn",textAlign:"ljrqcn24"},textAlt:{color:"dmdq60dq"}}},50890:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{onClick:t,parentGroupMetadata:n,parentGroupChat:a}=e;const{joinedSubgroups:p,unjoinedSubgroups:m,id:g}=(0,l.useModelValues)(n,["joinedSubgroups","unjoinedSubgroups","id"]),{name:x}=(0,l.useModelValues)(a.contact,["name"]);(0,s.useEffect)((()=>{(0,c.queryAndUpdateSubgroupsMetadata)(g)}),[g]),m.length,p.length;const v=i.fbt._("",null,{hk:"4a7vBg"});return(0,f.jsx)(d.default,{theme:"no-padding",children:(0,f.jsx)(o.default,{image:(0,f.jsx)(r.DetailImage,{id:g,shape:r.DetailImageShape.Squircle,size:60}),primary:x,onClick:t,theme:"community-home",secondary:(0,f.jsxs)(h.TextSpan,{size:"16",color:"secondary",children:[v," · ",i.fbt._("",null,{hk:"3OY1QN"})]}),detail:(0,f.jsx)(u.default,{color:"secondary",name:"chevron-right-alt",directional:!0})})})};var i=n(48360),s=n(67294),l=n(35461),o=a(n(44356)),r=n(88984),d=a(n(33308)),c=n(42906),u=a(n(23217)),h=n(13923),f=n(85893)},60236:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,l.jsx)(s.default,{chat:e.chat,showFullDescription:e.showFullDescription,editRestrictionText:i.fbt._("Only admins can edit this group's info",null,{hk:"1a2ztg"}),a8n:"group-info-drawer-description-title-input",emptyValuePlaceholder:i.fbt._("Add group description",null,{hk:"BVsoQ"})})};var i=n(48360),s=a(n(81681)),l=n(85893)},48204:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onVerification:t,onClose:n}=e,a=(0,f.default)(),Q=(0,d.default)(),J=(0,h.useModelValues)(e.chat,["mute","id","pendingAction","liveLocation"]),ee=(0,h.useModelValues)(e.groupMetadata,["id","cachedDeviceCount","cachedDeviceSizeBucket","participants","pendingParticipants","announce","support","parentGroup"]);(0,h.useModelValues)(e.contact,["name","id","pendingAction"]);const te=(0,c.default)((()=>new T.default)),ne=(0,c.default)((()=>new T.default)),ae=(0,c.default)((()=>new B.default.UiAction({uiActionType:B.default.UI_ACTION_TYPE.GROUP_INFO_OPEN,uiActionPreloaded:!0}))),ie=(0,o.useRef)(null);(0,u.useListener)(ee.participants,["add","remove","reset","sort","change:isAdmin","change:isSuperAdmin"],Q),(0,u.useListener)(ee.pendingParticipants,["add","remove","reset"],Q);const se=e=>{e.contact.pendingAction++,(0,G.demoteParticipants)(J,[e]).then((()=>{e.contact.pendingAction--}))},le=(e,t)=>{e.contact.pendingAction++,(0,G.removeParticipants)(J,[e]).then((()=>{e.contact.pendingAction--})),t&&C.Cmd.closeModal()},oe=(e,t)=>{e.contact.pendingAction++,(0,G.promoteParticipants)(J,[e]).then((()=>{e.contact.pendingAction--})),t&&C.Cmd.closeModal()},re=()=>{const e=(0,E.getGroupSizeLimit)();if(ee.participants.length>=e){const t=R.default.t(49,{max:e});C.Cmd.openToast((0,X.jsx)(z.Toast,{msg:t,id:$}))}else{const e=(0,X.jsx)(p.default,{chat:(0,H.unproxy)(J),pushTransition:"none",popTransition:"none"});C.Cmd.openModal(e,{transition:"modal-flow"})}},de=()=>{C.Cmd.openModal((0,X.jsx)(k.default,{chatId:J.id,e2eSubtype:"info_encrypted"}))},ce=()=>{C.Cmd.openModal((0,X.jsx)(k.default,{chat:J,chatId:J.id,e2eSubtype:"info_encrypted"}))};let ue;if((0,o.useEffect)((()=>{const e=ae.current;if(e){const t=ee.cachedDeviceSizeBucket;null!=t&&(e.sizeBucket=t),Object.assign(e,(0,D.getGroupMetricsFromGroupMetadata)((0,H.unproxy)(ee))),e.markUiActionT(),e.commit(),(0,V.logUiActionShadowPrivateStatsTestEvents)(),ae.current=void 0}J.isSuspendedGroup()&&(0,W.openSuspendedGroupModal)()}),[]),(0,o.useEffect)((()=>{ee.participants.ensureSorted();ee.pendingParticipants.ensureSorted()})),ee.participants.iAmAdmin()&&!ee.support){const t=(0,X.jsx)(Y.TextSpan,{theme:"title",children:l.fbt._("Group settings",null,{hk:"3sS0Vl"})});ue=(0,X.jsx)(g.default,{side:"chevron",icon:"settings",onClick:e.onAdminSetting,title:t})}let he=null;e.onMediaGallery&&(he=(0,X.jsx)(v.default,{onMediaGallery:e.onMediaGallery,chat:(0,H.unproxy)(J)}));const fe=(0,X.jsx)(L.default,{chat:J,onClick:e.onLiveLocation}),pe=J&&J.shouldShowEphemeralSetting()?(0,X.jsx)(M.EphemeralSettingRow,{onClick:e.onEphemeral,chat:J,groupMetadata:ee,testid:"contact-info-dm-setting-row"}):null;let me=null;if((0,E.communitiesEnabled)()&&J&&ee.parentGroup){const t=m.ChatCollection.get(ee.parentGroup.toString());(null==t?void 0:t.groupMetadata)&&(me=(0,X.jsx)(y.default,{onClick:()=>{var t;null===(t=e.onCommunityClick)||void 0===t||t.call(e)},parentGroupMetadata:t.groupMetadata,parentGroupChat:t}))}let ge=null;(0,s.isMDBackend)()&&(ge=(0,X.jsx)(S.default,{onClick:de,text:(0,K.isGroupCallEnabled)()?l.fbt._("Messages and calls are end-to-end encrypted. Click to learn more.",null,{hk:"1l9pwW"}):l.fbt._("Messages are end-to-end encrypted. Click to learn more.",null,{hk:"2MtPh9"})}));J.isSupportGroup()&&(ge=(0,X.jsx)(q.default,{onClick:ce}));const xe=J.mute.canMute()?(0,X.jsx)(F.default,{chat:J,mute:J.mute,settings:U.default}):null;let ve=null;if(e.onStarred){const t=(0,X.jsx)(Y.TextSpan,{theme:"title",size:"16",children:l.fbt._("Starred messages",null,{hk:"4wVbNG"})});ve=(0,X.jsx)(x.ChatInfoDrawerSection,{a8nText:"section-starred-messages",children:(0,X.jsx)(g.default,{a8nText:"block-starred-messages",side:"chevron",icon:"star",onClick:e.onStarred,title:t})})}let Ce=null;(xe||ge||pe)&&(Ce=(0,X.jsxs)(x.ChatInfoDrawerSection,{children:[xe,pe,ge,ue]}));const _e=(0,s.isMDBackend)()&&e.scrollToParticipantList;return(0,X.jsxs)(_.default,{theme:"striped",children:[(0,X.jsx)(j.DrawerHeader,{title:l.fbt._("Group info",null,{hk:"2SfTUZ"}),type:j.DRAWER_HEADER_TYPE.SMALL,rtlFixIfOnDarwin:!0,onCancel:()=>{n?n():null==a||a.uie.requestDismiss()}}),(0,X.jsx)(b.default,{flatListControllers:[ne.current,te.current],children:(0,X.jsxs)("section",{className:(0,r.default)(Z),"data-a8n":i.default.key("group-info-drawer-body"),children:[(0,X.jsx)(N.default,{chat:(0,H.unproxy)(J),onAdminSetting:e.onAdminSetting,onAddParticipant:re,onClickParticpantsCount:()=>{var e;null===(e=ie.current)||void 0===e||e.scrollIntoView()}}),me,(0,X.jsx)(P.default,{chat:(0,H.unproxy)(J),showFullDescription:e.showFullGroupDescription}),fe,he,ve,Ce,undefined,(0,X.jsx)(w.GroupInfoParticipantsSection,{ref:ie,chat:(0,H.unproxy)(J),scrollToParticipantList:_e,flatListController:te.current,onAddParticipant:re,onOpenParticpantSearch:()=>{C.Cmd.openModal((0,X.jsx)(O.default,{chat:(0,H.unproxy)(J),onParticipantPromote:oe,onParticipantRemove:le,onDemoteAdmin:se,onVerification:t}),{transition:"modal-flow"})},onGroupInviteLink:e.onGroupInviteLink,onVerification:e.onVerification}),(0,X.jsx)(A.default,{chat:(0,H.unproxy)(J),flatListController:ne.current}),(0,X.jsx)(I.default,{chat:(0,H.unproxy)(J)})]})})]},"contact-info-modal")};var i=a(n(99964)),s=n(88555),l=n(48360),o=n(67294),r=a(n(56720)),d=a(n(59312)),c=a(n(16223)),u=n(87550),h=n(35461),f=a(n(95402)),p=a(n(16947)),m=n(69951),g=a(n(75116)),x=n(98792),v=a(n(5406)),C=n(88102),_=a(n(60453)),b=a(n(69637)),j=n(94790),k=a(n(4061)),S=a(n(4584)),M=n(61086),T=a(n(30855)),E=n(57701),y=a(n(50890)),P=a(n(60236)),I=a(n(12158)),w=n(44783),A=a(n(70354)),N=a(n(60890)),D=n(42515),O=a(n(20982)),R=a(n(14296)),L=a(n(43895)),B=a(n(11339)),G=n(89389),F=a(n(3721)),V=n(7595),U=a(n(68132)),H=n(31019),q=a(n(34778)),W=n(43745),Y=n(13923),z=n(50452),K=n(69594),X=n(85893);const Z={flexShrink:"oq44ahr5",flexGrow:"tvf2evcx",flexBasis:"lb5m6g5c",paddingBottom:"s9fl9ege"},$=(0,z.genId)("max_participant_toast")},12158:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{chat:t}=e;const n=(0,f.jsx)(m,{chat:t}),a=(0,f.jsx)(p,{chat:t});return(0,f.jsxs)(s.ChatInfoDrawerButtonsSection,{children:[n,a]})};var i=n(48360),s=n(98792),l=n(88102),o=a(n(64738)),r=a(n(14296)),d=a(n(30934)),c=n(19569),u=n(38839),h=a(n(23217)),f=n(85893);function p(e){let{chat:t}=e;return(0,f.jsx)(o.default,{a8nText:"li-report-spam",color:"danger",icon:(0,f.jsx)(h.default,{name:"thumbs-down",directional:!0}),theme:"chat-info",onClick:()=>{l.Cmd.openModal((0,f.jsx)(d.default,{isGroupChat:!0,onReport:()=>{(0,c.sendSpamReport)(t,u.SpamFlow.Group),l.Cmd.closeModal()},onReportExitClear:()=>{(0,c.sendSpamExitClear)(t,u.SpamFlow.Block),l.Cmd.closeModal()},onCancel:()=>l.Cmd.closeModal()}))},children:i.fbt._("Report group",null,{hk:"23NLqw"})})}function m(e){let{chat:t}=e;return(0,f.jsx)(o.default,{a8nText:"li-delete-group",icon:(0,f.jsx)(h.default,{name:"exit",directional:!0}),color:"danger",theme:"chat-info",onClick:()=>{l.Cmd.deleteOrExitChat(t)},children:t.isReadOnly?r.default.t(871):i.fbt._("Exit group",null,{hk:"4BkPNr"})})}},44783:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.GroupInfoParticipantsSection=void 0;var i=a(n(45095)),s=n(92844),l=n(88555),o=a(n(89867)),r=n(16116),d=n(48360),c=n(67294),u=a(n(59312)),h=n(87550),f=n(35461),p=a(n(44356)),m=n(98792),g=n(88102),x=a(n(52665)),v=n(71174),C=n(65417),_=a(n(31808)),b=n(50101),j=n(47915),k=n(99234),S=n(57701),M=a(n(14296)),T=n(89389),E=a(n(16419)),y=a(n(52711)),P=n(78756),I=a(n(23217)),w=n(18644),A=a(n(24717)),N=n(85893);const D=(0,c.forwardRef)(((e,t)=>{var n;const a=(0,f.useModelValues)((0,i.default)(e.chat.groupMetadata,"props.chat.groupMetadata"),["support"]),D=(0,i.default)(null===(n=e.chat.groupMetadata)||void 0===n?void 0:n.participants,"props.chat.groupMetadata?.participants"),R=(0,u.default)();(0,h.useListener)(D,"add remove reset sort change:isAdmin change:isSuperAdmin",R);const[L,B]=(0,c.useState)(O(D)),G=(0,c.useRef)(),[F,V]=(0,c.useState)();if((0,c.useEffect)((()=>{(0,l.isMDBackend)()&&e.scrollToParticipantList&&G.current&&(0,P.scrollIntoViewIfNeeded)(G.current,!1)}),[e.scrollToParticipantList]),(0,c.useImperativeHandle)(t,(()=>({scrollIntoView(){var e;null===(e=G.current)||void 0===e||e.scrollIntoView()}}))),e.chat.shouldHideParticipants())return null;const U=(0,N.jsx)(I.default,{name:"search",color:"secondary"});let H,q,W;if(D.canAdd()&&!a.support){const t=(0,N.jsx)(y.default,{theme:"compact",children:(0,N.jsx)(I.default,{name:"add-user",directional:!0})});H=(0,N.jsx)(p.default,{image:t,theme:"chat-info",primary:d.fbt._("Add participant",null,{hk:"48ECfz"}),onClick:e.onAddParticipant})}if(D.iAmAdmin()&&e.onGroupInviteLink&&!a.support){const t=(0,N.jsx)(y.default,{theme:"compact",children:(0,N.jsx)(I.default,{name:"link"})});q=(0,N.jsx)(p.default,{image:t,theme:"chat-info",primary:d.fbt._("Invite to group via link",null,{hk:"3vDtFL"}),onClick:e.onGroupInviteLink})}if(O(D)&&L){const t=D.length<=20,n=D.length-m.INFO_DRAWER_MAX_ROWS;W=(0,N.jsx)(_.default,{numMore:n,onClick:()=>{t?B(!1):e.onOpenParticpantSearch()},viewAll:!t})}const Y=e=>{const t=D.get(e.id);return!!t&&(D.canPromote(t)||D.canDemote(t)||D.canRemove(t)||D.canVerifyIdentity(t))},z=(t,n)=>{const a=D.assertGet(n.id);if(!Y(n))return;const i=[];D.canPromote(a)&&i.push((0,N.jsx)(v.DropdownItem,{a8n:"mi-grp-promote-admin",action:()=>{const t=M.default.t(348,{participant:a.contact.formattedName,subject:e.chat.contact.name});g.Cmd.openModal((0,N.jsx)(x.default,{onOK:()=>{return t=!0,a.contact.pendingAction++,(0,T.promoteParticipants)(e.chat,[a]).then((()=>{a.contact.pendingAction--})),void(t&&g.Cmd.closeModal());var t},okText:M.default.t(596),onCancel:()=>g.Cmd.closeModal(),cancelText:d.fbt._("Cancel",null,{hk:"H0gNq"}),children:(0,N.jsx)(C.EmojiText,{text:t})}))},children:M.default.t(596)},"promote")),D.canRemove(a)&&i.push((0,N.jsx)(v.DropdownItem,{a8n:"mi-grp-remove-participant",action:()=>{const t=M.default.t(349,{participant:a.contact.formattedName,subject:e.chat.contact.name});g.Cmd.openModal((0,N.jsx)(x.default,{onOK:()=>{return t=!0,a.contact.pendingAction++,(0,T.removeParticipants)(e.chat,[a]).then((()=>{a.contact.pendingAction--})),void(t&&g.Cmd.closeModal());var t},okText:M.default.t(709),onCancel:()=>g.Cmd.closeModal(),cancelText:d.fbt._("Cancel",null,{hk:"H0gNq"}),children:(0,N.jsx)(C.EmojiText,{text:t})}))},children:M.default.t(600)},"remove")),D.canDemote(a)&&i.push((0,N.jsx)(v.DropdownItem,{a8n:"mi-grp-verify-identify",action:()=>{a.contact.pendingAction++,(0,T.demoteParticipants)(e.chat,[a]).then((()=>{a.contact.pendingAction--})),g.Cmd.closeModal()},children:d.fbt._("Dismiss as admin",null,{hk:"243sNl"})},"demote-admin")),(0,l.isMDBackend)()&&D.canVerifyIdentity(a)&&i.push((0,N.jsx)(v.DropdownItem,{a8n:"mi-grp-verify-identify",action:()=>{e.onVerification&&e.onVerification(a.contact)},children:d.fbt._("Verify Security Code",null,{hk:"1vTVgt"})},"verify-identity")),V({contactId:n.id,menu:i,anchor:t.anchor,event:t.event})},K=(e,t)=>{o.default.equals((0,k.getMaybeMeUser)(),t.id)||(0,b.findChat)(t.id).then((e=>{g.Cmd.openChatFromUnread(e).then((t=>{t&&((0,S.btmThreadsLoggingEnabled)()&&g.Cmd.addChatMsgSentLogAttributes(e,{handleMultiple(){(0,r.handleActivitiesForChatThreadLogging)([{activityType:"groupMembershipReplies",ts:(0,s.unixTime)(),chatId:e.id}])}}),g.Cmd.focusChatTextInput(e))}))}))},X=D.length?(0,N.jsxs)(m.ChatInfoDrawerListSection,{ref:G,a8nText:"section-participants",title:M.default.t(946,{count:D.length,_plural:D.length}),titleOnClick:e.onOpenParticpantSearch,subtitle:U,children:[H,q,(0,N.jsx)(j.FlatList,{flatListController:e.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:(()=>{let e;const t=[],n=[];D.forEach((a=>{a.contact.isMe?e=a:a.isAdmin?t.push(a):n.push(a)}));let a=[];return e&&a.push(e),a=a.concat(t,n),O(D)&&L&&(a=a.slice(0,m.INFO_DRAWER_MAX_ROWS)),a.map((e=>({itemKey:e.id.toString(),id:e.id,height:68})))})(),renderItem:e=>{const{id:t}=e,n=D.get(t);if(!n)throw new j.UnknownDataError(e);const a=n.contact,i=!!F&&o.default.equals(a.id,F.contactId);return(0,N.jsx)(E.default,{contact:a,participant:n,onClick:K,contextEnabled:()=>Y(a),contextMenu:i,onContext:e=>z(e,a),theme:"chat-info",showNotifyName:!0,waitIdle:!0},n.id.toString())}}),W]}):null,Z=()=>{V(null)};let $;return F&&($=(0,N.jsx)(w.UIE,{displayName:"ChatContextMenu",escapable:!0,popable:!0,requestDismiss:Z,children:(0,N.jsx)(A.default,{contextMenu:F})})),(0,N.jsxs)(N.Fragment,{children:[X,$]})}));function O(e){return e.length>m.INFO_DRAWER_MAX_ROWS_IN_COLLAPSED_LIST}t.GroupInfoParticipantsSection=D,D.displayName="GroupInfoParticipantsSection"},70354:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n;const a=(0,i.default)(e.chat.groupMetadata,"props.chat.groupMetadata"),k=(0,i.default)(null===(t=e.chat.groupMetadata)||void 0===t?void 0:t.participants,"props.chat.groupMetadata?.participants"),S=(0,i.default)(null===(n=e.chat.groupMetadata)||void 0===n?void 0:n.pendingParticipants,"props.chat.groupMetadata?.pendingParticipants"),M=(0,o.default)();(0,r.useListener)(k,"change:isAdmin change:isSuperAdmin",M),(0,r.useListener)(S,"add remove reset",M);const[T,E]=(0,l.useState)(j(S)),[y,P]=(0,l.useState)();(0,l.useEffect)((()=>{a.queryGroupV4PendingInvite().then((()=>{E(j(a.pendingParticipants))}))}),[a]);const I=()=>{let e=S.toArray();return j(S)&&T&&(e=e.slice(0,d.INFO_DRAWER_MAX_ROWS)),e.map((e=>({itemKey:e.id.toString(),id:e.id,height:68})))},w=e=>{const{id:t}=e,n=S.get(t);if(!n)throw new m.UnknownDataError(e);const i=n.contact;return(0,b.jsx)(x.default,{contact:i,participant:n,contextEnabled:()=>!0,contextMenu:!0,onContext:e=>(e=>{const t=[(0,b.jsx)(h.DropdownItem,{a8n:"mi-grp-promote-admin",action:()=>{c.Cmd.openModal((0,b.jsx)(u.default,{onOK:()=>{c.Cmd.closeModal(),a.revokeGroupV4AddInvite([n.id.toString()]).then((()=>{c.Cmd.openToast((0,b.jsx)(v.Toast,{msg:s.fbt._("Invite reset",null,{hk:"MgErr"}),id:(0,v.genId)()}))}))},okText:s.fbt._("Reset link",null,{hk:"2Zb3R4"}),onCancel:()=>c.Cmd.closeModal(),cancelText:s.fbt._("Cancel",null,{hk:"H0gNq"}),children:(0,b.jsx)(f.EmojiText,{text:g.default.t(512,{participant:n.contact.formattedName})})}))},children:s.fbt._("Revoke invite",null,{hk:"4on28q"})},"promote")];P({contactId:i.id,menu:t,anchor:e.anchor,event:e.event})})(e),theme:"chat-info",showNotifyName:!0,isPendingParticipant:!0,waitIdle:!0},n.id.toString())};let A,N,D;S.length>0&&(A=(0,b.jsx)(m.FlatList,{flatListController:e.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:I(),renderItem:w}));if(j(S)&&T){const e=S.length-d.INFO_DRAWER_MAX_ROWS;N=(0,b.jsx)(p.default,{numMore:e,onClick:()=>{E(!1)}})}k.iAmAdmin()&&S.length>0&&(D=(0,b.jsxs)(d.ChatInfoDrawerListSection,{a8nText:"section-participants",title:g.default.t(510,{number:S.length}),children:[A,N]}));const O=()=>{P(null)};let R;y&&(R=(0,b.jsx)(C.UIE,{displayName:"ChatContextMenu",escapable:!0,popable:!0,requestDismiss:O,children:(0,b.jsx)(_.default,{contextMenu:y})}));return(0,b.jsxs)(b.Fragment,{children:[D,R]})};var i=a(n(45095)),s=n(48360),l=n(67294),o=a(n(59312)),r=n(87550),d=n(98792),c=n(88102),u=a(n(52665)),h=n(71174),f=n(65417),p=a(n(31808)),m=n(47915),g=a(n(14296)),x=a(n(16419)),v=n(50452),C=n(18644),_=a(n(24717)),b=n(85893);function j(e){return e.length>d.INFO_DRAWER_MAX_ROWS_IN_COLLAPSED_LIST}},60890:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n;const a=(0,m.useModelValues)(e.chat,["labels"]),i=null===(t=e.chat.groupMetadata)||void 0===t?void 0:t.participants,s=(0,f.default)();(0,p.useListener)(i,"add remove reset sort change:isAdmin change:isSuperAdmin",s);const l=null!==(n=null==i?void 0:i.length)&&void 0!==n?n:0,o=T.default.t(946,{count:l,_plural:l});return(0,O.jsx)(C.default,{theme:"padding-large",children:(0,O.jsxs)(b.FlexColumn,{align:"center",children:[(0,O.jsx)(B,{chat:e.chat,xstyle:L.photo}),(0,O.jsx)(F,{chat:e.chat}),(0,O.jsx)("div",{className:(0,h.default)(L.groupSecondary),children:(0,O.jsx)(w.SelectableSpan,{dir:"auto",selectable:!0,children:(0,O.jsxs)(N.TextSpan,{size:"16",color:"secondary",children:[c.fbt._("Group",null,{hk:"DNiv2"})," · ",(0,O.jsx)(D.default,{onClick:e.onClickParticpantsCount,children:o})]})})}),(0,O.jsx)(M.default,{labels:a.labels})]})})};var i=a(n(48926)),s=n(89385),l=n(50796),o=a(n(45095)),r=a(n(47259)),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=R(t);if(n&&n.has(e))return n.get(e);var a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var l=i?Object.getOwnPropertyDescriptor(e,s):null;l&&(l.get||l.set)?Object.defineProperty(a,s,l):a[s]=e[s]}a.default=e,n&&n.set(e,a);return a}(n(35232)),c=n(48360),u=n(67294),h=a(n(56720)),f=a(n(59312)),p=n(87550),m=n(35461),g=a(n(3409)),x=n(88102),v=a(n(52665)),C=a(n(33308)),_=a(n(13699)),b=n(29623),j=n(57701),k=a(n(15908)),S=n(55981),M=a(n(77577)),T=a(n(14296)),E=n(12176),y=n(33646),P=a(n(43556)),I=n(71517),w=n(52596),A=n(50760),N=n(13923),D=a(n(1784)),O=n(85893);function R(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(R=function(e){return e?n:t})(e)}const L={photo:{marginBottom:"njub1g37"},groupSecondary:{lineHeight:"a4ywakfo",marginTop:"ma4rpf0l"}};function B(e){const t=(0,m.useModelValues)(e.chat,["isReadOnly"]),n=(0,m.useModelValues)(e.chat.contact,["id","profilePicThumb"]),a=(0,m.useModelValues)(e.chat.contact.profilePicThumb,["imgFull"]),i=(0,m.useModelValues)((0,o.default)(e.chat.groupMetadata,"props.chat.groupMetadata"),["groupType"]),[c,f]=(0,u.useState)(!1),[p,x]=(0,u.useState)(!1),v=(0,g.default)(),C=i.groupType===S.GroupType.DEFAULT_ANNOUNCEMENT_GROUP,_=(0,j.communitiesEnabled)()&&C?P.default.DEFAULT_ANNOUNCEMENT_GROUP:P.default.GROUP,b=t.isReadOnly||!a.canDelete()&&!a.canSet()||t.isSupportGroup()||C;return(0,O.jsx)("div",{className:(0,h.default)(e.xstyle),children:(0,O.jsx)(y.PhotoPickerLoadable,{type:_,id:n.id,attachToChat:!0,pending:p,startImage:a.imgFull,readOnly:b,onImageSet:(e,t)=>{let n;x(!0),n=e&&t?(0,I.setProfilePic)(a,e,t):(0,I.deleteProfilePic)(a),(0,r.default)(n,v).catch((0,s.catchAbort)((()=>{}))).catch((0,l.filteredCatch)(d.ActionError,(()=>{__LOG__(3)`GroupInfoDrawer: failed to set/delete group image`,f(!c)}))).finally((()=>{x(!1)}))}},String(c))})}const G={marginTop:"hymafltn",marginEnd:"jnwc1y2a",marginBottom:"ngycyvoj",marginStart:"svoq16ka"};function F(e){const t=(0,m.useModelValues)(e.chat.contact,["name"]),n=(0,m.useModelValues)((0,o.default)(e.chat.groupMetadata,"props.chat.groupMetadata"),["creation","restrict","support"]),a=(0,g.default)(),l=function(){var n=(0,i.default)((function*(n){const i=(0,_.default)(n);i!==t.name&&(yield(0,r.default)((0,A.setGroupSubject)(e.chat,i),a).catch((0,s.catchAbort)((()=>{}))).catch((()=>{__LOG__(3)`group_info_drawer:onSetSubject failed`})))}));return function(){return n.apply(this,arguments)}}();return n.support?(0,O.jsx)(N.TextHeader,{className:(0,h.default)(G),level:"2",theme:"large",children:(0,O.jsx)(E.GroupName,{chat:e.chat,groupMetadata:n,breakWord:!0})}):(0,O.jsx)(k.default,{subject:t.name,onSave:l,textInputProps:{editable:n.canSetSubject(),editRestrictionInfo:n.restrict?()=>{x.Cmd.openModal((0,O.jsx)(v.default,{onOK:()=>x.Cmd.closeModal(),okText:c.fbt._("OK",null,{hk:"2KEeHb"}),children:c.fbt._("Only admins can edit this group's info",null,{hk:"1a2ztg"})}))}:void 0}})}},20982:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const{chat:n,onParticipantPromote:a,onParticipantRemove:_,onDemoteAdmin:b,onVerification:j}=e,k=(0,d.default)(),S=null===(t=n.groupMetadata)||void 0===t?void 0:t.participants;(0,c.useListener)(S,"add remove reset",(()=>{null!=S&&k()}));const[M,T]=(0,r.useState)(null),E=()=>{T(null)},y=e=>{(0,p.findChat)(e).then((e=>{u.Cmd.closeModal(),u.Cmd.openChatFromUnread(e)}))};let P;M&&(P=(0,C.jsx)(x.UIE,{displayName:"ChatContextMenu",escapable:!0,popable:!0,requestDismiss:E,children:(0,C.jsx)(v.default,{contextMenu:M})}));return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(h.default,{title:o.fbt._("Search Participants",null,{hk:"M6lxB"}),filter:e=>{const t=n.groupMetadata;return!(null==t||!t.participants.get(e.id.toString()))},onCancel:()=>{u.Cmd.closeModal()},openContextOnClick:!0,contextEnabled:()=>!1,contextMenu:e=>!l.default.equals((0,m.getMaybeMeUser)(),e),onContext:(e,t)=>{const r=(0,i.default)(n.groupMetadata,"chat.groupMetadata").participants,d=r.assertGet(t.id.toString()),c=[];if(r.canPromote(d)){const e=a.bind(null,d,!1);c.push((0,C.jsx)(f.DropdownItem,{a8n:"mi-grp-promote-admin",action:e,children:g.default.t(596)},"promote"))}if(r.canRemove(d)){const e=_.bind(null,d,!1);c.push((0,C.jsx)(f.DropdownItem,{a8n:"mi-grp-remove-participant",action:e,children:g.default.t(600)},"remove"))}r.canDemote(d)&&c.push((0,C.jsx)(f.DropdownItem,{a8n:"mi-grp-verify-identify",action:()=>b(d),children:o.fbt._("Dismiss as admin",null,{hk:"243sNl"})},"demote-admin")),(0,s.isMDBackend)()&&r.canVerifyIdentity(d)&&c.push((0,C.jsx)(f.DropdownItem,{a8n:"mi-grp-verify-identify",action:()=>{u.Cmd.closeModal(),null==j||j(d.contact)},children:o.fbt._("Verify Security Code",null,{hk:"1vTVgt"})},"verify-identity")),l.default.equals((0,m.getMaybeMeUser)(),d.id)||c.push((0,C.jsx)(f.DropdownItem,{action:y.bind(null,d.contact.id),children:g.default.t(605,{author:d.contact.formattedName})},"message author")),T({contactId:t.id,menu:c,anchor:e.anchor,event:e.anchor?void 0:e})},showNotifyName:!0,listenForAdminChange:!0,participantCollection:(0,i.default)(e.chat.groupMetadata,"props.chat.groupMetadata").participants}),P]})};var i=a(n(45095)),s=n(88555),l=a(n(89867)),o=n(48360),r=n(67294),d=a(n(59312)),c=n(87550),u=n(88102),h=a(n(29234)),f=n(71174),p=n(50101),m=n(99234),g=a(n(14296)),x=n(18644),v=a(n(24717)),C=n(85893)},34778:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onClick:t}=e,n=(0,o.jsx)(l.TextSpan,{theme:"title",children:i.fbt._("Security",null,{hk:"2BYJDI"})}),a=(0,o.jsx)(l.TextDiv,{theme:"muted",children:i.fbt._("Click to learn how messages and calls are secured.",null,{hk:"1UxhjE"})});return(0,o.jsx)(s.default,{icon:"lock",onClick:t,title:n,secondaryTitle:a})};var i=n(48360),s=a(n(75116)),l=n(13923),o=n(85893)},9582:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{isVoiceCallEnabled:!1,isVideoCallEnabled:!1,canStartVoiceCall:!1,canStartVideoCall:!1,startVoiceCall:()=>{},startVideoCall:()=>{}}};n(67294),n(87550),n(17239)},4584:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if((0,i.isMDBackend)()){var t;const{onClick:n,text:a}=e,i=(0,r.jsx)(o.TextSpan,{theme:"title",children:null!==(t=e.title)&&void 0!==t?t:s.fbt._("Encryption",null,{hk:"a7CfR"})}),d=(0,r.jsx)(o.TextDiv,{theme:"muted",children:a});return(0,r.jsx)(l.default,{onClick:n,icon:"lock",title:i,secondaryTitle:d})}return null};var i=n(88555),s=n(48360),l=a(n(75116)),o=n(13923),r=n(85893)},69824:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(29521)),s=n(12380),l=a(n(89867)),o=n(48360),r=n(67294),d=n(35461),c=a(n(95402)),u=n(88102),h=a(n(60453)),f=a(n(35721)),p=a(n(69637)),m=n(94790),g=a(n(33308)),x=n(99234),v=n(57701),C=a(n(33095)),_=a(n(94913)),b=n(55981),j=n(41566),k=n(89389),S=n(56728),M=n(18963),T=n(64551),E=n(13923),y=n(85893);const P=e=>{let{isRestricted:t,onClick:n}=e;return(0,y.jsxs)(f.default,{onClick:n,multiline:!0,children:[(0,y.jsx)("div",{className:C.default.header,children:(0,y.jsx)(E.TextSpan,{theme:"title",children:o.fbt._("Edit group info",null,{hk:"2rhyLl"})})}),(0,y.jsx)(E.TextDiv,{theme:"muted",children:t?o.fbt._("Only admins",null,{hk:"1shXeT"}):o.fbt._("All participants",null,{hk:"2YNQNN"})})]})},I=e=>{let{isAnnouncement:t,onClick:n}=e;return(0,y.jsxs)(f.default,{onClick:n,multiline:!0,children:[(0,y.jsx)("div",{className:C.default.header,children:(0,y.jsx)(E.TextSpan,{theme:"title",children:o.fbt._("Send messages",null,{hk:"2zKwxL"})})}),(0,y.jsx)(E.TextDiv,{theme:"muted",children:t?o.fbt._("Only admins",null,{hk:"1shXeT"}):o.fbt._("All participants",null,{hk:"2YNQNN"})})]})},w=e=>{let{isNoFrequentlyForwarded:t,onClick:n}=e;const a=T.ServerProps.hfmStringChanges?o.fbt._("Messages forwarded many times",null,{hk:"2Neytn"}):o.fbt._("Frequently forwarded messages",null,{hk:"1OxFLx"});return(0,y.jsxs)(f.default,{onClick:n,multiline:!0,children:[(0,y.jsx)("div",{className:C.default.header,children:(0,y.jsx)(E.TextSpan,{theme:"title",children:a})}),(0,y.jsx)(E.TextDiv,{theme:"muted",children:t?o.fbt._("Don't allow",null,{hk:"3uBuwQ"}):o.fbt._("Allow",null,{hk:"2pdVOn"})})]})};function A(e,t){const n=(0,d.useModelValues)(e.chat,["id"]),a=(0,d.useModelValues)(e.groupMetadata,["restrict","announce","noFrequentlyForwarded","participants","owner","groupType","isParentGroup"]),r=(0,c.default)(),T=e=>{u.Cmd.openModal((0,y.jsx)(_.default,{settingType:e,chat:n,groupMetadata:a}),{transition:"modal",uim:r})},A=()=>a.participants.filter((e=>e.isAdmin)).map((e=>e.contact)),N=e=>!!a.participants.get(e.id),D=e=>{const t=l.default.equals(e,a.owner),n=(0,x.getMaybeMeUser)().equals(e),i=!0===a.isParentGroup&&(0,v.cadminSelfDemoteEnabled)();return t||n&&!i},O=e=>{const t=a.participants,s=t.filter((e=>e.isAdmin)),l=(0,i.default)(e,s,((e,t)=>e.id.equals(t.id))).map((e=>t.assertGet(e.id))),o=(0,i.default)(s,e,((e,t)=>e.id.equals(t.id)));l.length>0&&(l.forEach((e=>{e.contact.pendingAction++})),(0,k.promoteParticipants)(n,l).finally((()=>{l.forEach((e=>{e.contact.pendingAction--}))}))),o.length>0&&(o.forEach((e=>{e.contact.pendingAction++})),(0,k.demoteParticipants)(n,o).finally((()=>{o.forEach((e=>{e.contact.pendingAction--}))}))),u.Cmd.closeModal()};return(0,y.jsxs)(h.default,{ref:t,theme:"striped",children:[(0,y.jsx)(m.DrawerHeader,{title:o.fbt._("Group settings",null,{hk:"3sS0Vl"}),type:m.DRAWER_HEADER_TYPE.SMALL,onBack:e.onClose}),(0,y.jsxs)(p.default,{children:[(0,y.jsx)(g.default,{animation:!1,children:(0,y.jsx)(P,{onClick:()=>{T(s.GROUP_SETTING_TYPE.RESTRICT)},isRestricted:a.restrict})}),(0,y.jsx)("div",{className:C.default.restrictText,children:(0,y.jsx)(E.TextSpan,{theme:"muted",children:o.fbt._("Choose who can change this group’s subject, icon, description and disappearing messages setting.",null,{hk:"1cqpzS"})})}),(0,y.jsxs)(g.default,{animation:!1,children:[(0,v.communitiesEnabled)()&&a.groupType===b.GroupType.DEFAULT_ANNOUNCEMENT_GROUP?null:(0,y.jsx)(I,{onClick:()=>{T(s.GROUP_SETTING_TYPE.ANNOUNCEMENT)},isAnnouncement:a.announce}),(0,j.isAdminHfmToggleEnabled)()?(0,y.jsx)(w,{onClick:()=>{T(s.GROUP_SETTING_TYPE.NO_FREQUENTLY_FORWARDED)},isNoFrequentlyForwarded:a.noFrequentlyForwarded}):null]}),(0,y.jsx)(g.default,{animation:!1,children:(0,y.jsx)(f.default,{onClick:()=>{u.Cmd.openModal((0,y.jsx)(S.SelectModal,{onConfirm:O,getInitialItems:A,isDisabled:D,isSelected:D,filter:N,title:o.fbt._("Edit group admins",null,{hk:"1BOEkM"}),useShortName:!0,useAllContacts:!0,listType:S.ListType.PARTICIPANT_MANAGE_MODAL,singleSelectionFooterType:M.FooterType.CONFIRM,multipleSelectionFooterType:M.FooterType.CONFIRM,shouldShowSelectionSummary:!1}))},multiline:!0,children:(0,y.jsx)("div",{className:C.default.header,children:(0,y.jsx)(E.TextSpan,{theme:"title",children:o.fbt._("Edit group admins",null,{hk:"1BOEkM"})})})})})]})]})}var N=(0,r.forwardRef)(A);t.default=N},94913:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{settingType:t}=e,n=(0,r.useModelValues)(e.chat,["id"]),a=(0,r.useModelValues)(e.groupMetadata,["restrict","announce","noFrequentlyForwarded"]),g=(0,o.useMemo)((()=>{switch(t){case s.GROUP_SETTING_TYPE.ANNOUNCEMENT:case s.GROUP_SETTING_TYPE.RESTRICT:return[{label:l.fbt._("All participants",null,{hk:"2YNQNN"}),value:0},{label:l.fbt._("Only admins",null,{hk:"1shXeT"}),value:1}];case s.GROUP_SETTING_TYPE.NO_FREQUENTLY_FORWARDED:return[{label:l.fbt._("Allow",null,{hk:"2pdVOn"}),value:0},{label:l.fbt._("Don't allow",null,{hk:"3uBuwQ"}),value:1}];default:return[]}}),[t]),x=(0,o.useMemo)((()=>{const{restrict:e,announce:n,noFrequentlyForwarded:i}=a;switch(t){case s.GROUP_SETTING_TYPE.ANNOUNCEMENT:return n?1:0;case s.GROUP_SETTING_TYPE.RESTRICT:return e?1:0;case s.GROUP_SETTING_TYPE.NO_FREQUENTLY_FORWARDED:return i?1:0;default:return 0}}),[t,a]),v=(0,o.useMemo)((()=>{switch(t){case s.GROUP_SETTING_TYPE.ANNOUNCEMENT:return l.fbt._("Send messages",null,{hk:"2zKwxL"});case s.GROUP_SETTING_TYPE.RESTRICT:return l.fbt._("Edit group info",null,{hk:"2rhyLl"});case s.GROUP_SETTING_TYPE.NO_FREQUENTLY_FORWARDED:return h.ServerProps.hfmStringChanges?l.fbt._("Messages forwarded many times",null,{hk:"2Neytn"}):l.fbt._("Frequently forwarded messages",null,{hk:"1OxFLx"});default:return""}}),[t]),C=(0,o.useMemo)((()=>t===s.GROUP_SETTING_TYPE.RESTRICT?l.fbt._("Choose who can change this group’s subject, icon, description and disappearing messages setting.",null,{hk:"1cqpzS"}):t===s.GROUP_SETTING_TYPE.NO_FREQUENTLY_FORWARDED&&(0,u.isAdminHfmToggleEnabled)()?(0,m.jsxs)(m.Fragment,{children:[l.fbt._("Choose to allow participants to send messages to the group that have been forwarded many times.",null,{hk:"1PP9Ge"})," ",(0,m.jsx)(d.ExternalLink,{href:(0,i.getFrequentlyForwardedFaqUrl)(),children:c.default.t(546)})]}):null),[t]);return(0,m.jsx)(p.default,{options:g,initialValue:x,title:v,onSelect:e=>{e!==x&&(0,f.setGroupProperty)(n,t,e).catch((()=>()=>{}))},explanation:C})};var i=n(21310),s=n(12380),l=n(48360),o=n(67294),r=n(35461),d=n(12591),c=a(n(14296)),u=n(41566),h=n(64551),f=n(54646),p=a(n(37881)),m=n(85893)},43895:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(48360),s=n(67294),l=a(n(33308)),o=a(n(14296)),r=n(84387),d=n(85865),c=n(87699),u=a(n(53145)),h=a(n(65932)),f=n(31019),p=a(n(23217)),m=n(13923),g=n(85893);class x extends s.Component{getParticipants(e){const{liveLocation:t}=e;return t?t.participants.toArray():[]}constructor(e){super(e),this._updateParticipants=()=>{this.setState({participants:this.getParticipants(this.props.chat)})},this.state={participants:this.getParticipants(e.chat)}}_removeParticipantListener(e){this.props.listeners.remove(e.participants,"add remove",this._updateParticipants)}_addParticipantListener(e){this.props.listeners.add(e.participants,"add remove",this._updateParticipants)}componentDidMount(){const{chat:e}=this.props;e.liveLocationQueried||d.LiveLocationCollection.getActive(e.id.toString()).then((()=>{e.liveLocationQueried=!0})).catch((()=>{})),this.props.listeners.add((0,f.unproxy)(e),"change:liveLocation",(()=>{const{liveLocation:t}=e;t&&(this._removeParticipantListener(t),this._addParticipantListener(t),this._updateParticipants())}));const{liveLocation:t}=e;t&&this._addParticipantListener(t)}getText(){const{chat:e}=this.props,{participants:t}=this.state;let n,a,s=0;if(t.forEach((e=>{e.isMe?n=!0:(a||(a=e.contact),s++)})),e.isGroup)return n?1===t.length?i.fbt._("You are sharing live location",null,{hk:"4DvZgE"}):o.default.t(564,{count:s,_plural:s}):o.default.t(561,{count:s,_plural:s});if(n){if(1===t.length)return i.fbt._("You are sharing live location",null,{hk:"4DvZgE"});if(a)return o.default.t(563,{name:a.formattedShortNameWithNonBreakingSpaces})}else if(a)return o.default.t(560,{name:a.formattedShortNameWithNonBreakingSpaces});return""}render(){const{onClick:e}=this.props;if(!this.state.participants.length)return null;const t=(0,g.jsx)(p.default,{name:(0,c.liveLocationIcon)(!0)});return(0,g.jsx)(l.default,{a8nText:"section-live-location",theme:"padding",title:i.fbt._("Live Location",null,{hk:"1LvIwY"}),titleOnClick:e,children:(0,g.jsx)(u.default,{side:t,onClick:e,children:(0,g.jsx)(m.TextSpan,{theme:"title",children:this.getText()})})})}}x.CONCERNS={chat:["id","isGroup","liveLocation","liveLocationQueried"]},x.displayName="LiveLocationRow";var v=(0,r.ListenerHOC)((0,h.default)(x,x.CONCERNS));t.default=v},8059:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.MediaGalleryDrawer=T,t.TABS=void 0;var i=a(n(52628)),s=a(n(78931)),l=a(n(40436)),o=a(n(94184)),r=n(48360),d=n(67294),c=a(n(16223)),u=n(46331),h=a(n(5577)),f=a(n(60453)),p=a(n(69637)),m=n(94790),g=a(n(14296)),x=a(n(93528)),v=a(n(88224)),C=a(n(65636)),_=a(n(16351)),b=a(n(99108)),j=n(64551),k=n(18644),S=n(85893);const M={MEDIA:"media",DOCS:"docs",LINKS:"links",PRODUCTS:"products"};function T(e){const{chat:t,onProductDetail:n,setProductsScrollOffset:a,productsScrollOffset:T}=e,[E,y]=(0,d.useState)(e.initialTab),[P,I]=(0,d.useState)(null),[w,A]=(0,d.useState)(!1),N=(0,c.default)((()=>new s.default([],(e=>e.id.toString())))),D=()=>{w&&(N.current.unsetAll(),A(!1))},O=(e,t)=>{w||A(!0),N.current.setVal(e,t),0===N.current.getSelected().length&&D()},R=(0,d.useCallback)((e=>{const t=(0,i.default)(M).indexOf(E),n=(0,i.default)(M).indexOf(e);t!==n&&N.current.unsetAll(),y(e),I(n>t?"right":"left"),A(!1)}),[N,E]),L=(0,d.useMemo)((()=>{const e=[{tab:M.MEDIA,title:g.default.t(589)},{tab:M.DOCS,title:g.default.t(396)},{tab:M.LINKS,title:g.default.t(547)}];j.ServerProps.productMediaAttachments&&e.push({tab:M.PRODUCTS,title:r.fbt._("Products",null,{hk:"3Ky71N"})});const t=e.map((e=>{const t=(0,o.default)(C.default.menuItem,{[C.default.active]:E===e.tab});return(0,S.jsx)("button",{className:t,onClick:()=>R(e.tab),title:e.title,children:e.title},e.tab)})),n=(0,o.default)(C.default.menuTabsLists,j.ServerProps.productMediaAttachments?C.default.fourTabs:C.default.threeTabs);return(0,S.jsx)("div",{className:n,"data-active-tab":E,children:t})}),[E,R]),B=(()=>{let e;switch(E){case M.MEDIA:e=(0,S.jsx)(v.default,{chat:t,mediaMsgs:t.getMediaMsgs(),selectable:w,onMessageSelect:O,selectedMessages:N.current,fullCollection:!0});break;case M.LINKS:e=(0,S.jsx)(x.default,{chat:t,linkMsgs:t.getLinkMsgs(),selectable:w,onMessageSelect:O,selectedMessages:N.current});break;case M.DOCS:e=(0,S.jsx)(h.default,{chat:t,docMsgs:t.getDocMsgs(),selectable:w,onMessageSelect:O,selectedMessages:N.current});break;case M.PRODUCTS:e=(0,S.jsx)(b.default,{chat:t,productMsgs:t.getProductMsgs(),selectable:w,onMessageSelect:O,selectedMessages:N.current,onProductDetail:n,setScrollOffset:a,scrollOffset:T})}return e})(),G=[M.MEDIA,M.DOCS].includes(E),F=w?(0,S.jsx)(k.UIE,{displayName:"MediaMultiSelect",escapable:!0,requestDismiss:D,children:(0,S.jsx)(_.default,{chat:t,noSortOnForward:!0,theme:"mediaGallery",toastPosition:u.ToastPosition.RIGHT,downloadButton:G,selectedMessages:N.current,onCancel:D})}):null,V="right"===P?"slide-forward":"slide-back";return(0,S.jsxs)(f.default,{theme:"gallery",children:[(0,S.jsx)(m.DrawerHeader,{title:" ",onBack:e.onBack,rtlFixIfOnDarwin:!0,type:m.DRAWER_HEADER_TYPE.MULTI_MEDIA_GALLERY}),F,L,(0,S.jsx)(p.default,{"data-list-scroll-container":!0,children:(0,S.jsx)(l.default,{transitionName:V,className:C.default.column,children:(0,S.jsx)("div",{className:C.default.multimediaGallery,children:(0,S.jsx)("div",{className:C.default.column,children:B})},E)})})]})}t.TABS=M,T.defaultProps={initialTab:M.MEDIA,productsScrollOffset:0}},14425:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,s.useModelValues)(e.mediaData,["mediaStage","renderableUrl"]);return(0,c.jsx)(d.default,{mediaData:t,placeholderRenderer:f,children:t=>(0,c.jsx)(h,{url:t,msg:e.msg})})};var i=a(n(94184)),s=n(35461),l=a(n(45863)),o=a(n(14296)),r=a(n(79741)),d=a(n(20553)),c=n(85893);const u=e=>{e.stopPropagation()};function h(e){let{url:t,msg:n}=e;return(0,c.jsx)(l.default,{url:t,className:r.default.mediaViewerAudio,onClick:u,autoPlay:!0,msg:n,controls:!0,children:o.default.t(149)})}function f(){return(0,c.jsx)("div",{className:(0,i.default)(r.default.imageAudio,r.default.mediaViewerPlaceholder),onClick:u})}},65768:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onHightlightCloseEnd:t,msgIndexInAlbum:n,onViewOnceInfoClick:a,onGoToMsgClick:A,onDownloadClick:N,onReplyClick:D,onDeleteClick:O,onUnstarClick:R,onStarClick:L,openForwardFlow:B,onMsgInfoClick:G}=e,F=(0,r.useRef)(null),V=(0,c.useModelValues)(e.msg,["id","star","isGroupMsg","chat","type","isGif","isViewOnce","sender","senderObj","t","isSentByMe","isStickerMsg","broadcastId"]),U=(0,c.useModelValues)(e.mediaData,["filehash","mediaStage","renderableUrl"]),[H,q]=(0,r.useState)(null),W=(0,r.useRef)(null),Y=()=>{q(null)};(0,d.useListener)(F.current,"animationend",(()=>{t()}));let z=V.displayName(!0,!0);V.isGroupMsg&&(z+=" @ "+V.chat.title());const K=()=>V.chat.isGroup?o.fbt._("Report group",null,{hk:"23NLqw"}):x.default.t(714,{contactInfo:V.senderObj.displayName}),X=e=>{const{chat:t}=V;t&&(e?t.isGroup?(0,M.sendSpamExitClear)(t,T.SpamFlow.MediaViewer):(0,M.sendSpamBlockClear)(t,T.SpamFlow.MediaViewer):(0,M.sendSpamReport)(t,T.SpamFlow.MediaViewer)),h.Cmd.closeModal()},Z=()=>{h.Cmd.openModal((0,w.jsx)(I.default,{isBusiness:V.senderObj.isBusiness,isGroup:V.chat.isGroup,onReport:X,onCancel:()=>h.Cmd.closeModal(),title:K()}))},$=()=>{(0,b.default)(V)},Q=()=>!V.isViewOnce&&(!!U.renderableUrl||U.mediaStage===C.MEDIA_DATA_STAGE.RESOLVED),J=()=>{const e=[];return(V.canPrivateReply()||V.canPrivateReplyInRestrictedGrp())&&e.push((0,w.jsx)(m.DropdownItem,{a8n:"mi-msg-reply",action:$,children:o.fbt._("Reply privately",null,{hk:"1XQeK2"})},"private_reply")),V.isViewOnce?e.push((0,w.jsx)(m.DropdownItem,{action:Z,children:K()},"dropdownMsgInfo")):(V.isSentByMe&&e.push((0,w.jsx)(m.DropdownItem,{action:G,children:x.default.t(609)},"dropdownMsgInfo")),e.push((0,w.jsx)(m.DropdownItem,{action:A,children:o.fbt._("Go to message",null,{hk:"B1anG"})},"dropdownGoToMsg"),(0,w.jsx)(m.DropdownItem,{action:N,disabled:!Q(),children:o.fbt._("Download",null,{hk:"1g5Jix"})},"dropdownDownload"))),(0,w.jsx)(_.MenuBarItem,{icon:(0,w.jsx)(E.default,{name:"menu"}),title:x.default.t(603),children:(0,w.jsx)(p.Dropdown,{type:p.MenuType.DropdownMenu,flipOnRTL:!0,dirX:p.DirX.LEFT,children:e},"MediaPanelHeaderDropdown")},"btnMenu")},ee=()=>{let e,t,n;return V.star?(e=R,t="unstar-btn",n=x.default.t(788)):(e=L,t="star-btn",n=x.default.t(764)),(0,w.jsx)(_.MenuBarItem,{icon:(0,w.jsx)(E.default,{name:t}),title:n,onClick:e},t)},te=()=>V.type===s.MSG_TYPE.STICKER?null:(0,w.jsx)(_.MenuBarItem,{icon:(0,w.jsx)(E.default,{containerRef:W,name:"reactions-media",width:20}),title:o.fbt._("React to message",null,{hk:"1MagBh"}),onClick:()=>{(()=>{if(!(0,l.canReactToMessage)(V))return;const e={dirY:p.DirY.BOTTOM,dirX:p.DirX.CENTER,type:p.MenuType.ReactionSendTray,menu:(0,w.jsx)(S.SendReactionsTrayContainer,{msg:V,selectedCallback:e=>{e!==k.MORE_REACTIONS&&(0,j.sendReactionToMsg)(V,e).catch((()=>{})),Y()}}),flipOnRTL:!1,anchor:W.current};q(e)})()}},"btnAddReaction"),ne=()=>(0,w.jsx)(_.MenuBarItem,{icon:(0,w.jsx)(E.default,{name:"forward"}),title:x.default.t(464),onClick:B},"btnForward");let ae;H&&(ae=(0,w.jsx)(y.UIE,{displayName:"MsgReaction",escapable:!0,popable:!0,requestDismiss:Y,children:(0,w.jsx)(P.default,{contextMenu:H})}));return(0,w.jsxs)("div",{className:v.default.mediaPanelHeader,children:[(0,w.jsx)("div",{className:v.default.info,children:(0,w.jsx)(u.default,{idle:!0,image:(0,w.jsx)(f.DetailImage,{id:V.sender,size:40}),primary:(0,w.jsx)(g.EmojiText,{ellipsify:!0,text:z}),secondary:i.Clock.relativeDateAndTimeStr(V.t),theme:"media"})}),(0,w.jsx)("div",{className:v.default.mediaPanelTools,children:(0,w.jsxs)(_.MenuBar,{theme:"strong",children:[V.isViewOnce?[(0,w.jsx)(_.MenuBarItem,{icon:(0,w.jsx)(E.default,{name:"view-once",className:v.default.voIcon}),title:o.fbt._("View once info",null,{hk:"47XkZ4"}),onClick:a},"btnViewOnceInfo"),J()]:n>=0?[V.canReply()?(0,w.jsx)(_.MenuBarItem,{icon:(0,w.jsx)(E.default,{name:"reply"}),title:o.fbt._("Reply",null,{hk:"1C7DPa"}),onClick:D},"btnReply"):null,V.canStar()?ee():null,(0,l.canReactToMessage)(V)?te():null,(0,w.jsx)(_.MenuBarItem,{icon:(0,w.jsx)(E.default,{name:"delete"}),title:o.fbt._("Delete",null,{hk:"2KhPUX"}),onClick:O},"btnDelete"),V.canForward()?ne():null,J()].filter(Boolean):(()=>{const e=[];return V.isStickerMsg||e.push((0,w.jsx)(_.MenuBarItem,{icon:(0,w.jsx)(E.default,{name:"bubble"}),title:o.fbt._("Go to message",null,{hk:"B1anG"}),onClick:A},"btnGoToMsg")),V.isStickerMsg&&e.push((0,w.jsx)(_.MenuBarItem,{icon:(0,w.jsx)(E.default,{name:"reply"}),title:o.fbt._("Reply",null,{hk:"1C7DPa"}),onClick:D},"btnReplyToMsg")),V.canStar()&&e.push(ee()),V.isStickerMsg&&e.push((0,w.jsx)(_.MenuBarItem,{icon:(0,w.jsx)(E.default,{name:"delete"}),title:o.fbt._("Delete",null,{hk:"2KhPUX"}),onClick:O},"btnDelete")),(0,l.canReactToMessage)(V)&&e.push(te()),V.canForward()&&e.push(ne()),V.isStickerMsg||e.push((0,w.jsx)(_.MenuBarItem,{icon:(0,w.jsx)(E.default,{name:"download"}),title:o.fbt._("Download",null,{hk:"1g5Jix"}),disabled:!Q(),onClick:N},"btnDownload")),e.filter(Boolean)})(),(0,w.jsx)(_.MenuBarItem,{a8nText:"btn-close",icon:(0,w.jsx)(E.default,{className:e.isHighlightClose?v.default.highlightClose:null,containerRef:F,name:"x-viewer"}),title:o.fbt._("Close",null,{hk:"19Jpec"}),onClick:e.onClose})]},"media-panel-header")}),ae]})};var i=n(40234),s=n(15461),l=n(67811),o=n(48360),r=n(67294),d=n(87550),c=n(35461),u=a(n(44356)),h=n(88102),f=n(88984),p=n(60811),m=n(71174),g=n(65417),x=a(n(14296)),v=a(n(77375)),C=n(58668),_=n(46346),b=a(n(32231)),j=n(21357),k=n(61761),S=n(13228),M=n(19569),T=n(38839),E=a(n(23217)),y=n(18644),P=a(n(24717)),I=a(n(93187)),w=n(85893)},2959:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(67294),s=a(n(56720)),l=a(n(78506)),o=n(35461),r=a(n(38261)),d=n(29623),c=a(n(47065)),u=a(n(20553)),h=a(n(39040)),f=a(n(37015)),p=a(n(11339)),m=a(n(72625)),g=n(10595),x=n(85893);const v={container:{width:"ln8gz9je",height:"ppled2lx"},stickerContainer:{maxWidth:"mx6rw3sv",maxHeight:"trnfqnf9",marginBottom:"r2u2pyhj",zIndex:"thghmljt"}},C=(e,t)=>{const{msg:n}=e,a=(0,o.useModelValues)(e.mediaData,["mediaStage","fullWidth","fullHeight","isFirstParty","stickerPackId","stickerPackName","stickerPackPublisher"]),C=(0,i.useRef)(),_=(0,l.default)(t,C),b=e=>{var t;null===(t=C.current)||void 0===t||t.onClick(e)},j=a.isFirstParty?(0,x.jsx)(r.default,{stickerPackId:a.stickerPackId,onStickerPackView:e.onStickerPackView,stickerPackViewDelay:e.stickerPackViewDelay}):(0,x.jsx)(g.StickerDetailsStickerPackInfo,{name:a.stickerPackName,publisher:a.stickerPackPublisher,theme:g.Theme.MediaViewer});return(0,x.jsxs)(d.FlexColumn,{align:"center",justify:"center",xstyle:v.container,children:[(0,x.jsx)("div",{className:(0,s.default)(v.container,v.stickerContainer),children:(0,x.jsx)(f.default,{ref:_,width:a.fullWidth,height:a.fullHeight,onZoomIn:e.onImgZoomIn,msg:n,children:(0,x.jsx)(u.default,{mediaData:a,placeholderRenderer:()=>(0,x.jsx)(m.default,{size:376}),downloadMedia:()=>null==n?void 0:n.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:p.default.WEBC_RMR_REASON_CODE.MEDIA_VIEWER,isUserInitiated:!1}),children:t=>(0,x.jsx)(c.default,{className:(0,s.default)(h.default.content),onClick:b,src:t,onLoad:e.onLoad})})})}),j]})};var _=(0,i.forwardRef)(C);t.default=_},26646:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(67811),s=n(29984),l=n(67294),o=a(n(56720)),r=a(n(62190)),d=a(n(15407)),c=n(40875),u=n(4522),h=a(n(14296)),f=n(58668),p=a(n(39040)),m=a(n(11339)),g=n(99875),x=a(n(11791)),v=a(n(52500)),C=n(94270),_=a(n(65932)),b=a(n(23425)),j=n(85893);class k extends l.PureComponent{constructor(){super(...arguments),this.state={played:!1,size:{width:0,height:0},isFullscreenMode:!1,displayReactionBubble:!0},this._setRefContainer=e=>{this.refContainer=e},this.stopPropagation=e=>{e.stopPropagation()},this._handleFullscreenToggle=e=>{this.setState({isFullscreenMode:e})}}static getDerivedStateFromProps(e){const{mediaData:t}=e;return(t.mediaStage===f.MEDIA_DATA_STAGE.RESOLVED||t.streamable&&t.isStreamable())&&(0,s.isNonZeroNumber)(t.fullWidth)&&(0,s.isNonZeroNumber)(t.fullHeight)?{size:k.getSize(t)}:null}static getSize(e){if(e.isGif){const t=330;return e.fullWidth>=t?{width:e.fullWidth,height:e.fullHeight}:{width:t,height:e.fullHeight*t/e.fullWidth}}return e.fullWidth>=u.MIN_WIDTH?{width:e.fullWidth,height:e.fullHeight}:{width:u.MIN_WIDTH,height:e.fullHeight}}componentDidMount(){this.props.mediaData.isStreamable()||this.props.msg.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:m.default.WEBC_RMR_REASON_CODE.MEDIA_VIEWER,isUserInitiated:!0})}componentWillUnmount(){this.props.msg.mediaObject&&this.props.msg.cancelDownload()}closingMedia(){this.setState({displayReactionBubble:!1})}render(){var e;const{msg:t,mediaData:n,onLoadedData:a}=this.props,s=n.isGif;let l=n.mediaStage===f.MEDIA_DATA_STAGE.RESOLVED||n.streamable&&n.isStreamable();l=l||t.isForcingRMR();let u=null;const m=C.ReactionBubbleType.MEDIA_ITEM;if(t&&(0,i.shouldShowReactionBubble)(t,m)&&(u=(0,j.jsx)(v.default,{msgIds:[t.id.toString()],reactionBubbleType:m,reactionBubbleVisible:this.state.displayReactionBubble})),l){const e=h.default.t(807);let i,l;return!this.state.isFullscreenMode&&(null==t?void 0:t.interactiveAnnotations)&&t.interactiveAnnotations.length>0&&(i=(0,j.jsx)(r.default,{annotations:t.interactiveAnnotations})),l=s?(0,j.jsxs)("div",{className:(0,o.default)(p.default.content),ref:this._setRefContainer,children:[(0,j.jsx)(b.default,{src:n.renderableUrl,onClick:this.stopPropagation,autoPlay:!0,loop:!0,onLoadedData:a,children:e}),i]}):(0,j.jsx)("div",{ref:this._setRefContainer,className:(0,o.default)(p.default.content),onClick:this.stopPropagation,children:(0,j.jsx)(g.WrappedMsgVideoPlayer,{msg:t,mediaData:n,startTime:this.props.startTime,onClose:this.props.onClose,onError:()=>{},onFullscreenToggle:this._handleFullscreenToggle,autoPlay:this.props.autoPlay,type:c.PLAYER_TYPE.MEDIA_VIEWER,overlays:i,noPip:t.isViewOnce,onLoadedData:a})}),(0,j.jsxs)(x.default,{type:"scaleDown",position:"relative",objectPosition:"relative",size:this.state.size,onObjectLoad:this.props.onLoad,children:[l,u]})}return(0,j.jsxs)(x.default,{type:"scaleDown",position:"relative",objectPosition:"relative",size:{width:this.props.mediaData.fullWidth,height:this.props.mediaData.fullHeight},children:[(0,j.jsx)(d.default,{altText:null!==(e=t.caption)&&void 0!==e?e:"",mediaData:n}),u]})}}k.CONCERNS={mediaData:["mediaStage","fullWidth","fullHeight","isGif","isViewOnce","preview","renderableUrl","streamable"]},k.defaultProps={startTime:0},k.displayName="MediaVideo";const S=(0,_.default)(k,k.CONCERNS);t.default=class extends S{getContainerElement(){return this.getComponent().refContainer}closingMedia(){this.getComponent().closingMedia()}}},47186:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onImageLoad:t,isAnimatingIn:n,onImgZoomIn:a,onExitAnimation:g,onBack:F}=e,z=(0,h.useModelValues)(e.msg,["id","star","isUnsentMedia","isViewOnce","isStickerMsg","chat","caption","interactiveAnnotations","type"]),Z=(0,h.useModelValues)(e.mediaData,["mediaStage","type","isGif"]),$=(0,p.default)(n),Q=(0,u.useRef)(null),J=(0,u.useRef)(null),ee=(0,u.useRef)(null),te=(0,u.useRef)(null),ne=(0,u.useRef)(),ae=(0,u.useRef)(!1),ie=(0,u.useRef)(!1),se=(0,u.useRef)(!1),[le,oe]=(0,f.default)(G.NUX.EPHEMERAL_VIEW_ONCE_RECEIVER),re=z.isViewOnce&&le,[de]=(0,u.useState)((()=>Z.mediaStage===D.MEDIA_DATA_STAGE.RESOLVED&&e.isAnimatingIn&&e.getZoomNode?e.getZoomNode(z.id):null)),[ce,ue]=(0,u.useState)(!1),[he,fe]=(0,u.useState)(!1),[pe,me]=(0,u.useState)(!e.isAnimatingIn),[ge,xe]=(0,u.useState)(!1),[ve,Ce]=(0,u.useState)(!1),_e=()=>{const e=(0,W.jsx)(B.default,{isPhoto:Z.type===P.default.TYPE.IMAGE,onOkClick:()=>{oe(),x.Cmd.closeModal()}});x.Cmd.openModal(e)},be=(0,m.default)(((e,t)=>{if(he)return;const n=Q.current;if(!n)return;const a=n.getInsideContainer();if(!(a&&a instanceof HTMLElement))return;const i=n.getOutsideContainer();if(!(i&&i instanceof HTMLElement))return;const{translateX:s,translateY:l}=n.getTranslatePosition(i,e,t);(0,r.default)(a,"stop"),(0,r.default)(a,{translateX:s,translateY:l,scale:R.ZOOM_IN_FACTOR},{duration:0})}));(0,u.useEffect)((()=>(__LOG__(2)`MediaViewerModal: Opened`,re&&_e(),o.default.focus(te.current),()=>{__LOG__(2)`MediaViewerModal: Closed`,be.cancel()})),[]);const je=()=>{z.isViewOnce&&(0,E.canMarkPlayed)(z)&&(0,E.markPlayed)(z)},ke=e=>{je(),t&&t();const a=de,i=e.target;a&&i&&n&&i instanceof HTMLElement&&(se.current||(se.current=!0,((e,t)=>{var n;const a=t.getBoundingClientRect(),i=e.getBoundingClientRect();let s=i.top-a.top,l=i.left-a.left;const o=e.clientWidth/t.clientWidth;s-=(t.clientHeight-e.clientHeight)/2,l-=(t.clientWidth-e.clientWidth)/2,(0,r.default)(t,{opacity:[1,0],translateX:[0,l],translateY:[0,s],scale:[1,o]},{duration:R.ANIMATION_DURATION,easing:[.1,.82,.25,1]});const d=null===(n=ee.current)||void 0===n?void 0:n.getContainerElement();d&&(0,r.default)(d,{opacity:[1,0]},{duration:R.ANIMATION_DURATION})})(a,i)))},Se=()=>{var t;if(ae.current)return;ae.current=!0,(0,s.isFunction)(g)&&g();const n=e.getZoomNode&&e.getZoomNode(z.id);if(!n)return F();let a;const i=Z.type;var l;if([P.default.TYPE.IMAGE,P.default.TYPE.STICKER].includes(i)&&Q.current)a=Q.current.getInsideContainer(),null===(l=Q.current)||void 0===l||l.closingMediaZoomable();else if(Z.isGif&&J.current){var o;a=J.current.getContainerElement(),null===(o=J.current)||void 0===o||o.closingMedia()}if(!a)return F();const d=a,c=a.getBoundingClientRect(),u=n.getBoundingClientRect();let h=u.top-c.top,f=u.left-c.left;const p=n.clientWidth/d.clientWidth;h-=(d.clientHeight-n.clientHeight)/2,f-=(d.clientWidth-n.clientWidth)/2,(0,r.default)(a,{translateX:[f,0],translateY:[h,0],scale:[p,1]},{duration:R.CLOSE_ANIMATION_DURATION,easing:[.1,.82,.25,1]}).then((()=>{F()}));const m=null===(t=ee.current)||void 0===t?void 0:t.getContainerElement();m&&(0,r.default)(m,{opacity:[0,1]},{duration:R.CLOSE_ANIMATION_DURATION,easing:[.1,.82,.25,1]})},Me=e=>{const t=Q.current;e&&t&&(ie.current=t.heightOverflow>0||t.widthOverflow>0),ue(e),a(e)},Te=()=>{Ce(!0)},Ee=()=>{fe(!0)},ye=()=>{fe(!1)},Pe=e=>{e.stopPropagation(),xe(!ge)};let Ie,we;switch((0,u.useEffect)((()=>{n||pe||!$||me(!0)}),[n,pe,$]),Z.type){case P.default.TYPE.IMAGE:Ie=(0,W.jsx)(I.default,{msg:z,mediaData:Z,onLoad:ke,onImgZoomIn:Me,onAnnotationTooltipDisplay:Ee,onAnnotationTooltipDismiss:ye,preventDownload:z.isViewOnce,ref:Q},z.id.toString());break;case P.default.TYPE.STICKER:Ie=(0,W.jsx)(N.default,{msg:z,mediaData:Z,onLoad:ke,onImgZoomIn:Me,onStickerPackView:Se,stickerPackViewDelay:R.CLOSE_ANIMATION_DURATION,ref:Q},z.id.toString());break;case P.default.TYPE.VIDEO:Ie=(0,W.jsx)(O.default,{autoPlay:!re,msg:z,mediaData:Z,onLoadedData:Z.isGif?ke:je,startTime:e.startTime,onClose:Se,ref:J},z.id.toString());break;case P.default.TYPE.AUDIO:Ie=(0,W.jsx)(y.default,{mediaData:Z,msg:z},z.id.toString());break;default:__LOG__(4,void 0,new Error,!0)`type: ${Z.type}`,SEND_LOGS("MediaViewerModal: unexpected media type")}const Ae=e.msgIndexInAlbum>=0&&e.albumSize>=0;if(z.caption||Ae){let t;Ae&&(t=T.default.t(679,{number:e.msgIndexInAlbum+1,totalNumber:e.albumSize}));const n=j.Configuration.Conversation({mentions:z.mentionMap(),phoneNumbers:z.getPhoneNumbers(),links:z.getLinks(),trusted:!0}),a=!pe&&(Z.isGif||Z.type===P.default.TYPE.IMAGE);we=(0,W.jsxs)(W.Fragment,{children:[(0,W.jsxs)("p",{className:(0,d.default)(L.default.captionWrapper,ne.current&&L.default.captionWrapperExpandable),onClick:ne.current?Pe:void 0,title:ne.current?c.fbt._("Read more",null,{hk:"2DvSvh"}):void 0,"aria-hidden":ge||void 0,children:[(0,W.jsx)(b.EmojiText,{className:(0,d.default)(L.default.mediaCaption,{[L.default.captionHidden]:a,[L.default.expanded]:ge}),formatters:n,ref:e=>{ee.current=e},text:z.caption||t}),ne.current&&(0,W.jsx)(q.default,{xstyle:[Y.captionReadMoreBtn,ge&&Y.captionReadMoreBtnExpanded,ce&&Y.captionReadMoreBtnZoomed],onClick:Pe,children:(0,W.jsx)(U.TextSpan,{children:c.fbt._("Read more",null,{hk:"2DvSvh"})})})]}),ge&&(0,W.jsx)("p",{className:(0,d.default)(L.default.captionWrapper,L.default.captionWrapperExpandable,L.default.captionExpanded),onClick:Pe,children:(0,W.jsx)(b.EmojiText,{className:(0,d.default)(L.default.mediaCaption,L.default.mediaCaptionExpanded),formatters:n,text:z.caption})})]})}const Ne=(0,d.default)(L.default.media,{[L.default.mediaWithCaption]:!!we}),De=(0,d.default)("overlay",L.default.mediaViewer,{[L.default.noThumbnails]:z.isViewOnce||z.isStickerMsg,[L.default.mediaViewerAnimate]:e.isAnimatingIn,[L.default.cursorZoomOut]:ce}),Oe=ce&&ie.current?e=>{be(e.pageX,e.pageY)}:null,Re=ce?e=>{be.cancel();const t=Q.current;t&&ce&&t.onClick(e)}:null;let Le=ce?null:Se;null!=Le&&z.isViewOnce&&(Le=Te);const Be=!z.isViewOnce&&!z.isStickerMsg;return(0,W.jsx)(H.UIE,{displayName:"MediaViewer",escapable:!0,requestDismiss:Se,children:(0,W.jsx)(M.HotKeys,{handlers:{space:e=>{if(n)return;be.cancel();const t=Q.current;null!=t&&t.onKeyboardZoom(e)}},ref:te,children:(0,W.jsxs)("div",{className:De,"data-animate-media-viewer":!0,"data-testid":"media-viewer-modal",onClick:Re,onMouseMove:Oe,children:[(0,W.jsx)(w.default,{isHighlightClose:ve,msg:z,mediaData:Z,onClose:Se,onGoToMsgClick:e=>{e.stopPropagation(),Se(),x.Cmd.existsDrawerRight((e=>{e&&2===v.Column.column&&x.Cmd.closeDrawerRight()}));const t=z.chat.getSearchContext((0,V.unproxy)(z));x.Cmd.openChatAt(z.chat,t).then((e=>{e&&x.Cmd.focusChatTextInput(z.chat)}))},onHightlightCloseEnd:()=>{Ce(!1)},onReplyClick:()=>{Se(),(0,i.delayMs)(R.CLOSE_ANIMATION_DURATION).then(K.bind(null,(0,V.unproxy)(z)))},onUnstarClick:e=>{e.stopPropagation(),x.Cmd.sendUnstarMsgs(z.chat,[(0,V.unproxy)(z)])},onStarClick:e=>{e.stopPropagation(),x.Cmd.sendStarMsgs(z.chat,[(0,V.unproxy)(z)])},onDeleteClick:()=>{x.Cmd.openModal((0,W.jsx)(_.default,{chat:z.chat,msgList:[(0,V.unproxy)(z)],onDelete:Se}))},openForwardFlow:e=>{e.stopPropagation(),z.isUnsentMedia?x.Cmd.openModal((0,W.jsx)(C.default,{title:T.default.t(454),onOK:()=>x.Cmd.closeModal(),okText:c.fbt._("OK",null,{hk:"2KEeHb"}),children:T.default.t(451)})):x.Cmd.openModal((0,W.jsx)(k.ForwardMessageFlowLoadable,{msgs:[(0,V.unproxy)(z)]}),{transition:"modal-flow"})},onDownloadClick:e=>{e.stopPropagation(),l.FileSaver.initDownload((0,V.unproxy)(z))},onMsgInfoClick:()=>{Se(),(0,i.delayMs)(R.CLOSE_ANIMATION_DURATION+250).then(x.Cmd.msgInfoDrawer.bind(x.Cmd,(0,V.unproxy)(z)))},onViewOnceInfoClick:()=>{_e()},msgIndexInAlbum:e.msgIndexInAlbum}),(0,W.jsx)("div",{className:(0,d.default)(L.default.mediaContent,{[L.default.sticker]:z.isStickerMsg}),onClick:Le,children:(0,W.jsx)(X,{hasNavigationButtons:Be,onNext:e.onNext,onPrev:e.onPrev,imgZoomed:ce,children:(0,W.jsxs)("div",{className:Ne,children:[(0,W.jsx)(A.default,{msg:z,mediaData:Z}),Ie,(0,W.jsx)(S.default.Provider,{value:z.chat.groupMetadata,children:we})]})})})]})})})};var i=n(13959),s=n(51737),l=n(21634),o=a(n(52013)),r=a(n(62831)),d=a(n(94184)),c=n(48360),u=n(67294),h=(a(n(56720)),n(35461)),f=a(n(59732)),p=a(n(37453)),m=a(n(90886)),g=n(61991),x=n(88102),v=n(72439),C=a(n(52665)),_=a(n(99131)),b=n(65417),j=n(30695),k=n(75362),S=a(n(45152)),M=n(29424),T=a(n(14296)),E=n(30734),y=a(n(14425)),P=a(n(2320)),I=a(n(76530)),w=a(n(65768)),A=a(n(81136)),N=a(n(2959)),D=n(58668),O=a(n(26646)),R=n(8969),L=a(n(80674)),B=a(n(64815)),G=n(61653),F=n(82857),V=n(31019),U=n(13923),H=n(18644),q=a(n(1784)),W=n(85893);const Y={captionReadMoreBtn:{position:"lhggkp7q",end:"h223g3sc",bottom:"jxacihee",paddingTop:"ppypbuwx",paddingEnd:"f9ovudaz",paddingBottom:"przvwfww",paddingStart:"nu34rnf1",backgroundColor:"idmi9oma",borderTopStartRadius:"ho9ovbg7",borderTopEndRadius:"tcg15ap9",borderBottomEndRadius:"c5wy1lv0",borderBottomStartRadius:"bqysl6j9",boxShadow:"a95fzlb5"},captionReadMoreBtnExpanded:{visibility:"kojwoqec"},captionReadMoreBtnZoomed:{visibility:"kqpkm0zi",opacity:"lxctpz5v"}};function z(e){null==e||e.stopPropagation()}function K(e){const t=e.chat;t.composeQuotedMsg=e,x.Cmd.focusChatTextInput(t)}function X(e){var t,n,a,i;return(0,W.jsxs)(W.Fragment,{children:[e.hasNavigationButtons&&(0,W.jsx)("div",{className:(0,d.default)(L.default.btnMediaPrev),children:(0,W.jsx)("div",{onClick:e.onPrev?null:z,children:(0,W.jsx)(g.ChevronButton,{type:g.ButtonType.Prev,onClick:null!==(t=e.onPrev)&&void 0!==t?t:void 0,onKeyDown:null!==(n=e.onPrev)&&void 0!==n?n:void 0,disabled:!e.onPrev||e.imgZoomed,theme:F.RoundTheme.Default})})}),e.children,e.hasNavigationButtons&&(0,W.jsx)("div",{className:(0,d.default)(L.default.btnMediaNext),children:(0,W.jsx)("div",{onClick:e.onPrev?null:z,children:(0,W.jsx)(g.ChevronButton,{type:g.ButtonType.Next,onClick:null!==(a=e.onNext)&&void 0!==a?a:void 0,onKeyDown:null!==(i=e.onNext)&&void 0!==i?i:void 0,disabled:!e.onNext||e.imgZoomed,theme:F.RoundTheme.Default})})})]})}},38781:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{mediaMsgs:t,onScroll:n,highlightedMsgIds:a,activeMsg:u,onSetActiveThumb:h,onSelectThumb:f}=e,p=(0,s.useRef)({}),m=()=>{const e=new Map;return t.forEach((t=>{const n=t.id.toString();e.set(n,(e=>{const t=p.current[e];if(!t)return!1;const n=t.getBoundingClientRect(),a=(n.left+n.right)/2;return!(a>-1*window.innerWidth&&a<2*window.innerWidth)})(n))})),e},[g,x]=(0,s.useState)(m),v=(0,l.default)((()=>{const e=m();(0,i.default)(g,e)||x(e)}),100),C=(()=>{const e=a&&a.size>0&&a.has(u.id.toString()),n=[];return t.forEach((t=>{if(null==t.mediaData){const e=u;return void __LOG__(3,!0)`MediaViewerFlow: attempted to render a msg without mediaData: ${JSON.stringify({type:t.type,isMedia:t.isMedia,startMsgType:e.type,startMsgIsMedia:e.isMedia})}`}const i=e&&a&&!a.has(t.id.toString())?"viewerFlowTransparent":"viewerFlow";n.push((0,c.jsx)(o.MediaThumb,{theme:i,active:t===u,msg:t,containerRef:e=>{((e,t)=>{p.current[t]=e})(e,t.id.toString()),t===u&&h(e)},onClick:()=>{f(t)},preferPreview:!!g.get(t.id.toString()),showTooltip:t.isGroupMsg},`media-${t.id.id}`))})),n.push((0,c.jsx)("div",{className:r.default.mediaThumb,children:t.queryMediaAfter?(0,c.jsx)(d.Spinner,{stroke:6,size:24}):null},"spinner-right")),n.unshift((0,c.jsx)("div",{className:r.default.mediaThumb,children:t.queryMediaBefore?(0,c.jsx)(d.Spinner,{stroke:6,size:24}):null},"spinner-left")),n.push((0,c.jsx)("div",{className:r.default.thumbPadding},"padding-right")),n.unshift((0,c.jsx)("div",{className:r.default.thumbPadding},"padding-left")),n})();return(0,c.jsx)("div",{className:r.default.thumbsContainer,ref:e.setRefThumbsContainer,children:(0,c.jsx)("div",{className:r.default.scrollContainer,dir:"ltr",children:(0,c.jsx)("div",{onScroll:e=>{v(),n(e)},className:r.default.viewerThumbs,ref:e.setRefThumbs,children:C})})})};var i=a(n(31789)),s=n(67294),l=a(n(90886)),o=n(41908),r=a(n(76479)),d=n(11054),c=n(85893)},64815:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onOkClick:t}=e;return(0,p.jsx)(o.default,{onOK:t,cancelText:u.default.t(546),onCancel:()=>{(0,r.openExternalLink)((0,i.getViewOnceFaqUrl)())},children:(0,p.jsxs)(d.FlexColumn,{children:[(0,p.jsx)(c.default,{xstyle:m.graphic,align:"center",children:(0,p.jsx)(h.default,{name:"view-once-sender-nux",width:195,height:177})}),(0,p.jsx)(f.TextHeader,{className:(0,l.default)(m.text),theme:"popup-title",children:e.isPhoto?s.fbt._("This photo is set to view once",null,{hk:"2H7aHc"}):s.fbt._("This video is set to view once",null,{hk:"1w8WFf"})}),(0,p.jsx)(f.TextParagraph,{className:(0,l.default)(m.text),children:e.isPhoto?s.fbt._("For more privacy, this photo will disappear after you close it.",null,{hk:"1XZPqi"}):s.fbt._("For more privacy, this video will disappear after you close it.",null,{hk:"3YgUHE"})})]})})};var i=n(21310),s=n(48360),l=a(n(56720)),o=a(n(52665)),r=n(12591),d=n(29623),c=a(n(48846)),u=a(n(14296)),h=a(n(23217)),f=n(13923),p=n(85893);const m={text:{marginBottom:"or9x5nie"},graphic:{marginBottom:"t4zgqcuo"}}},37881:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{options:t,explanation:n,onSelect:a}=e,[u,h]=(0,s.useState)(e.initialValue),f=()=>{l.Cmd.closeModal()},p=e=>{const{target:t}=e;t instanceof HTMLInputElement&&h(parseInt(t.value,10))},m=t.map((e=>{let{value:t,label:n}=e;return(0,c.jsx)("li",{children:(0,c.jsxs)("label",{className:r.default.label,children:[(0,c.jsx)("input",{type:"radio",className:r.default.input,value:String(t),checked:t===u,onChange:p}),n]})},`setting-${t}`)}));return(0,c.jsxs)(o.default,{title:e.title,okText:i.fbt._("Confirm",null,{hk:"3tmGp3"}),onOK:()=>{null!=u&&a(u),f()},onCancel:f,children:[null!=n?(0,c.jsx)(d.TextDiv,{theme:"muted",className:r.default.explanation,children:n}):null,(0,c.jsx)("form",{children:(0,c.jsx)("ol",{children:m})})]})};var i=n(48360),s=n(67294),l=n(88102),o=a(n(52665)),r=a(n(17391)),d=n(13923),c=n(85893)},93187:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const[t,n]=(0,s.useState)(!1);let a,h,f;e.isGroup?(a=i.fbt._("The last 5 messages from this group will be forwarded to WhatsApp.",null,{hk:"40tFfL"}),h=i.fbt._("No one in this group will be notified.",null,{hk:"1qLvih"}),f=i.fbt._("Exit group",null,{hk:"4BkPNr"})):e.isBusiness?(a=i.fbt._("The last 5 messages from this business will be forwarded to WhatsApp.",null,{hk:"1Xa0bG"}),h=i.fbt._("This business will not be notified.",null,{hk:"2Lbwbg"}),f=i.fbt._("Block business",null,{hk:"3hFIF3"})):(a=i.fbt._("The last 5 messages from this contact will be forwarded to WhatsApp.",null,{hk:"2YNTpM"}),h=i.fbt._("This contact will not be notified.",null,{hk:"172yrT"}),f=i.fbt._("Block contact",null,{hk:"41X9mL"}));return(0,c.jsxs)(o.default,{onOK:function(){e.onReport(t)},okText:i.fbt._("Report",null,{hk:"18ssTb"}),onCancel:e.onCancel,title:e.title,children:[(0,c.jsx)(d.TextParagraph,{xstyle:u.section,color:"muted",children:a}),(0,c.jsx)(d.TextParagraph,{xstyle:u.section,color:"muted",children:h}),(0,c.jsxs)(r.FlexRow,{align:"center",justify:"start",children:[(0,c.jsx)(l.CheckBox,{onChange:()=>n((e=>!e)),checked:t,id:"menu-icon-report-spam"}),(0,c.jsx)(d.TextLabel,{xstyle:u.checkboxLabel,htmlFor:"menu-icon-report-spam",color:"muted",children:f})]})]})};var i=n(48360),s=n(67294),l=(a(n(56720)),n(16593)),o=a(n(52665)),r=n(29623),d=n(13923),c=n(85893);const u={section:{marginBottom:"t4zgqcuo"},checkboxLabel:{marginStart:"fooq7fky"}}},59828:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={audioTag:"_1ichq"}},8767:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={msg:"_3YiZC",text:"RmpKn",bubble:"_2z0p1",author:"XntIB",hasSuspiciousLinks:"_3bU-2",hasAuthor:"_2cFHu",suspiciousLabel:"_2tYTz"}},11354:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={container:"_3go1_"}},65383:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={mediaCanvas:"GfgP-",shade:"_31TVj",blur:"_3SKsu",canvasSelected:"xEnhc"}},52901:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={iconStar:"_1Dvi_",shadeTop:"_2GZwK",canvasBody:"_10gTM",noPointerEvents:"_2_6x8",mediaGalleryThumbnail:"_1uBVh",chatInfoDrawerThumbnail:"_1t-UP",canvasSelected:"_28Wzy",mediaSelect:"_3fXE6",canvasComponent:"zm1kZ",canvasSecondRow:"_2GObI",viewerFlow:"_8KUDv",active:"_2w4lr",viewerFlowTransparent:"_3UuHq"}},54963:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={container:"_Wzeb",selected:"_2v6Lf"}},17429:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={iconType:"_3sWXp"}},68198:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={wrapper:"_11tTr"}},85967:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={nuxContainer:"_2MN2b",flatListContainer:"_3P67r",btnClose:"_1rNId",nuxHeader:"_1fDhw",nuxContent:"_3CSup",nuxIcon:"wZmgd",nuxText:"_23F3I"}},85845:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={footerNote:"_2v7h3",getTheAppLink:"f20SI"}},2256:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={wrapper:"_3KBDs",code:"_2ZlC0",codeDarkMode:"_2LUvK",codeLogo:"_3TIEq"}},57450:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={businessAccount:"_3WoOY",businessTitleText:"_1b76N",businessTitleWithSMBUpsell:"_3o5KS",businessTitleWithSmbUpsell:"_3o5KS"}},33463:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={businessHoursRow:"_2438e",firstRow:"_2aGH7",businessHoursDay:"Wb7rm",businessHoursHours:"_1Mczx",dayIsOpen:"_1kitz",businessHoursChevron:"_3rrGE",flipSvg:"mqqNO"}},85938:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={section:"h_jr2",description:"_2q04R",map:"_1I-_B"}},90123:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={wrapper:"_1KYpA",title:"_3vc4r",subtitle:"_3QsTT",verifiedText:"U1NnE",icon:"_3g_j1"}},44920:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={open:"_30zzj",closed:"_3wZZK",openStatus:"_1domD"}},35100:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={contactBusinessInfo:"_3ghG_",contactBusinessInfoSpinner:"_4L7V_",dataRow:"_1V82a",businessHoursRow:"qatFJ",businessHoursDay:"ipOxZ",businessHoursHours:"_24gSh",businessHoursChevron:"_3WwUb",flipSvg:"_3rTVf",dataRowIcon:"_19MbK",dataRowText:"_2w4yz",businessTitleText:"_2ojGG",businessMap:"_2AET6",address:"_3hYRV",link:"Lmend",infoIcon:"_3MsDj"}},8342:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={info:"_1TZy1",categories:"_1IRxm",noPaddingBottom:"_2JmH_"}},33095:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={header:"uEYm5",restrictText:"_28g3v"}},65636:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={multimediaGallery:"_3M644",column:"_3nvje",menuItem:"OJuvv",active:"_KRg9",menuTabsLists:"_3CC5A",threeTabs:"_1KRHF",fourTabs:"rLX29"}},79741:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={mediaViewerPlaceholder:"nehFG",imageAudio:"_2OreO",mediaViewerAudio:"_1alR8"}},76479:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={thumbsContainer:"_1XWMx",scrollContainer:"_1MhXb",viewerThumbs:"_1FS45",mediaThumb:"_52crR",thumbPadding:"_1833d"}},17391:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={label:"QzWWL",input:"_1LOWN",explanation:"_37J_Y"}}}]);
//# sourceMappingURL=https://web.whatsapp.com/lazy_loaded_high_priority_components.a2ea7ea79dfc69718d5b.js.map
