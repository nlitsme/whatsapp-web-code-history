/*! Copyright (c) 2021 WhatsApp Inc. All Rights Reserved. */
(self.webpackChunkwhatsapp_web_client=self.webpackChunkwhatsapp_web_client||[]).push([[7205],{78091:(e,t,a)=>{"use strict";var l=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.setGroupDesc=function(e,t=""){return p((0,h.unproxy)(e),t)};var s=i(a(67294)),n=a(96440),r=i(a(97420)),o=a(66274),d=l(a(92246)),u=i(a(66761)),c=a(5401),f=i(a(51459)),h=a(79665);function p(e,t="",a=(0,n.genId)()){var l,i,h,m=t&&t.trim();if(m===(null===(l=e.groupMetadata)||void 0===l?void 0:l.desc))return Promise.reject(new d.ActionError);""===m&&(m=null);var E=(0,c.sendSetGroupDescription)(e.id,m,(0,f.default)(),null===(i=e.groupMetadata)||void 0===i?void 0:i.descId),g=null===(h=e.groupMetadata)||void 0===h?void 0:h.desc,v=new n.ActionType(u.default.t(107)),_=E.then((()=>new n.ActionType(u.default.t(109),{actionText:u.default.t(207),actionHandler:()=>p(e,g,a)}))).catchType(o.ServerStatusCodeError,(e=>{if(e.status>=400)return new n.ActionType(u.default.t(108))})).catch((()=>(__LOG__(3)`models:chat:setGroupDesc dropped`,new n.ActionType(u.default.t(108),{actionText:u.default.t(203),actionHandler:()=>p(e,m,a)}))));return r.default.openToast(s.default.createElement(n.ActionToast,{id:a,initialAction:v,pendingAction:_})),E.then((t=>{var a;t._duplicate||(null===(a=e.groupMetadata)||void 0===a||a.set({desc:m||""}))})).catchType(o.ServerStatusCodeError,(()=>{}))}},86689:(e,t,a)=>{"use strict";var l=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.setGroupSubject=function(e,t=""){return p((0,f.unproxy)(e),t)};var s=i(a(67294)),n=a(96440),r=i(a(97420)),o=a(66274),d=l(a(92246)),u=i(a(66761)),c=a(5401),f=a(79665),h=a(25238);function p(e,t,a=(0,n.genId)()){var l=t.trim();if(!l)return Promise.reject(new d.ActionError);if(l===e.contact.name)return Promise.reject(new d.ActionError);var i=(0,c.sendSetGroupSubject)(e.id,l),f=e.contact.name,m=new n.ActionType(u.default.t(127)),E=i.then((()=>new n.ActionType(u.default.t(126,{subject:l}),{actionText:u.default.t(207),actionHandler:()=>p(e,f,a)}))).catchType(o.ServerStatusCodeError,(e=>{if(e.status>=400)return new n.ActionType(u.default.t(125))})).catch((()=>(__LOG__(3)`models:chat:setSubject dropped`,new n.ActionType(u.default.t(125),{actionText:u.default.t(203),actionHandler:()=>p(e,l,a)}))));return r.default.openToast(s.default.createElement(n.ActionToast,{id:a,initialAction:m,pendingAction:E})),i.then((t=>{if(!t._duplicate){var a={name:l};return(0,h.updateLocal)(e.contact.id,a).then((()=>{e.contact.set(a)}))}})).catchType(o.ServerStatusCodeError,(()=>{}))}},46790:(e,t,a)=>{"use strict";var l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{contact:t,onClick:a,contextMenu:l,isPendingParticipant:r,contextEnabled:o,onContext:d}=e,u=(0,n.default)(e.participant,["isAdmin"]);return i.default.createElement(s.default,{contact:t,admin:u.isAdmin,onClick:a,theme:"drawer-list",contextEnabled:()=>null!=o&&o(t),contextMenu:l,onContext:e=>d&&d(e,t),isPendingParticipant:r,showNotifyName:!0,waitIdle:!0})};var i=l(a(67294)),s=l(a(84051)),n=l(a(53233))},87369:(e,t,a)=>{"use strict";var l=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67154)),n=i(a(6479)),r=l(a(67294)),o=a(6653),d=i(a(25508)),u=i(a(60246)),c=i(a(66761)),f=i(a(48878)),h=i(a(44667)),p=i(a(62745));class m extends r.Component{constructor(...e){super(...e),this._setGallery=e=>{this._gallery=e},this._queryCollection=(e,t)=>{var{docMsgs:a,chat:l}=this.props;this.props.listeners.uiIdle((()=>{a.queryDocs(l,t)}))}}componentDidMount(){this.props.listeners.add(this.props.docMsgs,"add remove reset",(()=>{var e;null===(e=this._gallery)||void 0===e||e.forceUpdate()})),this.props.listeners.add(this.props.docMsgs,"query_doc_before",(()=>{var e;null===(e=this._gallery)||void 0===e||e.forceUpdate()}))}render(){var e,t=this.props,{docMsgs:a,listeners:l,chat:i}=t,f=(0,n.default)(t,["docMsgs","listeners","chat"]);return u.default.supportsFeature(u.default.F.MD_BACKEND)&&i.endOfHistoryTransferType===o.ConversationEndOfHistoryTransferModelPropType.COMPLETE_BUT_MORE_MESSAGES_REMAIN_ON_PRIMARY&&(e=r.default.createElement(d.default,{icon:r.default.createElement(p.default,{name:"content-chat"}),theme:"list",secondary:c.default.t(587)},c.default.t(588))),r.default.createElement(r.default.Fragment,null,r.default.createElement(h.default,(0,s.default)({ref:this._setGallery,msgsCollection:a,queryCollection:this._queryCollection,hasBefore:a.hasDocBefore,queryBefore:a.queryDocBefore,emptyText:c.default.t(1194),chat:i},f)),e)}}m.displayName="DocGallery";var E=(0,f.default)(m);t.default=E},16998:(e,t,a)=>{"use strict";var l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=null!=e.side?s.default.createElement("div",{className:r.default.side},e.side):null,a=(0,i.default)(r.default.container,{[r.default.multiline]:e.multiline});return s.default.createElement("div",{"data-a8n":n.default.key(e.a8nText),className:a,role:e.onClick?"button":null,onClick:e.onClick},s.default.createElement("div",{className:r.default.block},s.default.createElement("div",{className:r.default.main},e.children),t))};var i=l(a(94184)),s=l(a(67294)),n=l(a(62067)),r=l(a(61388))},13666:(e,t,a)=>{"use strict";var l=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{chat:t,groupMetadata:a,onClick:l}=e;return a?s.default.createElement(C,{groupMetadata:a,onClick:l}):s.default.createElement(v,{chat:t,onClick:l})},t.BaseEphemeralSettingRow=M;var s=i(a(67294)),n=a(87577),r=l(a(97420)),o=l(a(58743)),d=l(a(16998)),u=l(a(35346)),c=l(a(60246)),f=a(91720),h=l(a(66761)),p=l(a(82286)),m=l(a(62745)),E=a(45739);class g extends s.PureComponent{constructor(...e){super(...e),this._getEphemeralDuration=()=>{var e;return null!==(e=this.props.chat.ephemeralDuration)&&void 0!==e?e:0},this._unblockContact=()=>{var{chat:e,onClick:t}=this.props;e.contact.addPendingAction((0,n.unblockContact)(e.contact)).then((()=>{t(),r.default.closeModal()})).catch((()=>{}))},this._closeModal=()=>{r.default.closeModal()},this._openUnblockContactModal=()=>{r.default.openModal(s.default.createElement(o.default,{onOK:this._unblockContact,okText:h.default.t(1500),onCancel:this._closeModal,cancelText:h.default.t(1694)},this._getEphemeralDuration()?h.default.t(733):h.default.t(734)))},this._handleClick=()=>{var{chat:e,onClick:t}=this.props;e.contact.isContactBlocked?this._openUnblockContactModal():t()}}render(){return s.default.createElement(M,{ephemeralDuration:this._getEphemeralDuration(),canChange:!0,onClick:this._handleClick})}}g.CONCERNS={chat:["contact","ephemeralDuration"]},g.displayName="ContactEphemeralSettingRow";var v=(0,p.default)(g,g.CONCERNS);class _ extends s.PureComponent{constructor(...e){super(...e),this._closeModal=()=>{r.default.closeModal()},this._openNonAdminModal=()=>{r.default.openModal(s.default.createElement(o.default,{onOK:this._closeModal,okText:h.default.t(1865)},h.default.t(673)))},this._handleClick=()=>{var{onClick:e,groupMetadata:t}=this.props;t.canSetEphemeralSetting()?e():this._openNonAdminModal()}}render(){var e,{groupMetadata:t}=this.props;return s.default.createElement(M,{ephemeralDuration:null!==(e=t.ephemeralDuration)&&void 0!==e?e:0,canChange:t.canSetEphemeralSetting(),onClick:this._handleClick})}}_.CONCERNS={groupMetadata:["ephemeralDuration","participants"]},_.displayName="GroupEphemeralSettingRow";var C=(0,p.default)(_,_.CONCERNS);function M(e){var t,{ephemeralDuration:a,canChange:l,onClick:i}=e;t=a>0?l?c.default.isEphemeral24HDurationEnabled()?(0,f.getDisappearingMessageDurationString)(a):h.default.t(728):(0,f.getDisappearingMessageExplanationString)(a):h.default.t(727);var n=s.default.createElement(m.default,{className:l?u.default.chevronIcon:u.default.ephemeralIcon,name:l?"chevron-right-alt":"disappearing",directional:!0});return s.default.createElement(d.default,{onClick:i,side:n,multiline:!0},s.default.createElement("div",{className:u.default.header},s.default.createElement(E.TextSpan,{theme:"title"},h.default.t(836))),s.default.createElement(E.TextDiv,{theme:"muted"},t))}},87329:(e,t,a)=>{"use strict";var l=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67154)),n=i(a(6479)),r=l(a(67294)),o=a(6653),d=i(a(46274)),u=i(a(25508)),c=i(a(60246)),f=i(a(66761)),h=i(a(42715)),p=i(a(48878)),m=i(a(44667)),E=i(a(22221)),g=i(a(62745));class v extends r.Component{constructor(...e){super(...e),this._setGallery=e=>{this._gallery=e},this._handleNewMsgs=e=>{if(e){var t=[],a=Array.isArray(e)?e:[e];Promise.all(a.map((e=>(e.getLinks().length&&t.push(e),Promise.resolve())))).then((()=>{t.length&&this.props.linkMsgs.add(t)}))}},this._queryCollection=(e,t)=>{var{linkMsgs:a,chat:l}=this.props;this.props.listeners.uiIdle((()=>{a.queryLinks(l,t)}))},this._renderLinks=e=>{var{linkMsgs:t,selectedMessages:a}=this.props,l=[];return t.forEach((t=>{var i=!t.isSentByMe&&t.isGroupMsg;t.getGalleryLinks().forEach(((s,n)=>{s.href!==t.matchedText&&l.push(r.default.createElement(h.default,{key:`${t.id.toString()}-${n}`,msg:t.safe(),link:s,displayAuthor:i,selectable:this.props.selectable,selectedMessages:a,onMessageSelect:this.props.onMessageSelect,onClickMsg:e}))})),t.linkPreview&&l.push(r.default.createElement(E.default,{key:t.id.toString(),msg:t,selectable:this.props.selectable,selectedMessages:a,onMessageSelect:this.props.onMessageSelect,displayType:d.default.DISP_TYPE.GALLERY,onClickMsg:e}))})),l.reverse(),l}}componentDidMount(){this.props.listeners.add(this.props.linkMsgs,"add remove reset",(()=>{var e;null===(e=this._gallery)||void 0===e||e.forceUpdate()})),this.props.listeners.add(this.props.linkMsgs,"query_link_before",(()=>{var e;null===(e=this._gallery)||void 0===e||e.forceUpdate()})),this.props.listeners.add(this.props.chat.msgs,"add bulk_add",this._handleNewMsgs)}render(){var e,t=this.props,{linkMsgs:a,listeners:l,chat:i}=t,d=(0,n.default)(t,["linkMsgs","listeners","chat"]);return c.default.supportsFeature(c.default.F.MD_BACKEND)&&i.endOfHistoryTransferType===o.ConversationEndOfHistoryTransferModelPropType.COMPLETE_BUT_MORE_MESSAGES_REMAIN_ON_PRIMARY&&(e=r.default.createElement(u.default,{icon:r.default.createElement(g.default,{name:"content-chat"}),theme:"list",secondary:f.default.t(587)},f.default.t(590))),r.default.createElement(r.default.Fragment,null,r.default.createElement(m.default,(0,s.default)({ref:this._setGallery,msgsCollection:a,queryCollection:this._queryCollection,hasBefore:a.hasLinkBefore,queryBefore:a.queryLinkBefore,renderElements:this._renderLinks,emptyText:f.default.t(1196),chat:i},d)),e)}}v.displayName="LinkGallery";var _=(0,p.default)(v);t.default=_},42715:(e,t,a)=>{"use strict";var l=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(94184)),n=l(a(67294)),r=i(a(76230)),o=a(92090),d=i(a(46274)),u=i(a(98712)),c=i(a(61587)),f=i(a(66761)),h=i(a(4949)),p=i(a(98880)),m=i(a(48878)),E=i(a(64731)),g=i(a(82286)),v=i(a(78781)),_=i(a(77923)),C=a(63572);class M extends n.Component{constructor(e){super(e),this.mouseOver=()=>{this.state.hover||this.setState({hover:!0})},this.mouseEnter=()=>{this.state.hover||this.setState({hover:!0})},this.mouseLeave=()=>{this.state.hover&&this.setState({hover:!1})},this.handleSelectChange=e=>{this.state.selected!==e&&this.setState({selected:e})},this.handleSelectClick=e=>{e&&e.stopPropagation(),this.props.onMessageSelect(this.props.msg.unsafe(),!this.state.selected)},this.handleClick=()=>{this.props.onClickMsg(this.props.msg.unsafe(),!this.state.selected)};var{msg:t,selectedMessages:a}=e;this.state={hover:!1,selected:a.isSelected(t.unsafe())}}componentDidMount(){this.props.listeners.add(this.props.selectedMessages,this.props.msg.id.toString(),this.handleSelectChange)}render(){var{msg:e,link:t,displayAuthor:a}=this.props,l=this.props.selectable||this.state.hover?n.default.createElement(E.default,{checked:this.state.selected,onClick:this.handleSelectClick,msgTheme:"gallery"}):null,i=(0,o.Conversation)({mentions:e.mentionMap(),links:e.getLinks(),selectable:true,trusted:e.isTrusted()}),m=e.body&&e.body.includes(t.url)?e.body:e.caption,g=a?n.default.createElement("div",{className:h.default.author},n.default.createElement(r.default,{msg:e,contact:e.senderObj})):null,M=e.getSuspiciousLinks().length>0;return n.default.createElement(c.default,{hover:this.state.hover,onClick:this.handleClick,onMouseEnter:this.state.hover?null:this.mouseEnter,onMouseOver:this.state.hover?null:this.mouseOver,onMouseLeave:this.state.hover?this.mouseLeave:null},n.default.createElement("div",{className:h.default.msg},n.default.createElement(_.default,{transitionName:"delay-leave"},l),n.default.createElement(C.MessageContainer,{isSentByMe:e.isSentByMe},n.default.createElement("div",{className:(0,s.default)(h.default.bubble,{[h.default.hasAuthor]:a,[h.default.hasSuspiciousLinks]:M})},g,n.default.createElement(v.default,{link:t,displayType:d.default.DISP_TYPE.GALLERY}),n.default.createElement(p.default,{title:t.url,isSentByMe:e.isSentByMe,canonicalUrl:t.domain,displayType:d.default.DISP_TYPE.GALLERY,star:e.star}),n.default.createElement(u.default,{text:m,selectable:true,className:h.default.text,dirMismatch:e.rtl!==f.default.isRTL(),direction:e.dir,formatters:i})))))}}M.CONCERNS={msg:["body","caption","dir","id","isSentByMe","mediaData","type","rtl","senderObj","star","mediaData","asRevoked"]},M.displayName="LinkMsg";var S=(0,m.default)((0,g.default)(M,M.CONCERNS));t.default=S},44667:(e,t,a)=>{"use strict";var l=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),n=l(a(97420)),r=l(a(46274)),o=a(4404),d=l(a(98607)),u=l(a(79011)),c=l(a(22221)),f=a(79665),h=l(a(67230)),p=l(a(32456));function m(e,t){var{queryBefore:a,hasBefore:l,msgsCollection:i,emptyText:m,scrollOffset:E=0,selectable:g,onMessageSelect:v,queryCollection:_,selectedMessages:C,renderElements:M,onProductDetail:S,setScrollOffset:P}=e,T=(0,h.default)();(0,s.useImperativeHandle)(t,(()=>({forceUpdate:T})));var N=(0,s.useRef)(null),I=e=>{l&&_(e)},b=(0,p.default)((e=>{var t=e.scrollHeight-e.clientHeight-e.scrollTop<r.default.SCROLL_FUDGE;l&&t&&I(i.head()),P&&P(e.scrollTop)}),100);(0,s.useEffect)((()=>{l&&I();var e=N.current;return e&&(e.scrollTop=E),()=>{b.cancel()}}),[]);var y=(e,t)=>{var a=(0,f.unproxy)(e);g&&void 0!==t?v(a,t):n.default.openChatAt(a.chat,a.chat.getSearchContext(a))},k=M?M(y):i.map(((e,t)=>s.default.createElement(c.default,{key:`${e.id.toString()}_${t}`,msg:e,selectable:g,selectedMessages:C,onMessageSelect:v,displayType:r.default.DISP_TYPE.GALLERY,onClickMsg:y,onProductClick:S}))).reverse();if(a){if(0===k.length)return s.default.createElement(o.Loading,null);k.push(s.default.createElement(d.default,null))}return 0!==i.length||a||l?s.default.createElement("div",{ref:N,onScroll:e=>{b(e.target)},className:u.default.wrapper},k):s.default.createElement(o.Empty,{text:m,a8nText:"no-elements"})}var E=(0,s.forwardRef)(m);t.default=E},72823:(e,t,a)=>{"use strict";var l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,m.default)(e.chat,["isGroup","muteExpiration","archive"]),a=(0,m.default)(e.mute,["isMuted"]),l=(0,m.default)(e.settings,["showArchiveV2"]),E=e=>{o.default.muteChat((0,h.unproxy)(t),e)},g=()=>{E(!1),o.default.closeModal()},v=a.isMuted,_=t.muteExpiration;if(t.archive&&(0,c.archiveV2Supported)()&&l.showArchiveV2)return i.default.createElement(u.default,null,i.default.createElement(p.TextSpan,{theme:"muted",size:"16"},f.default.t(241)));var C,M=v?()=>{var e=t.isGroup?f.default.t(572):f.default.t(570);o.default.openModal(i.default.createElement(d.default,{onOK:g,okText:f.default.t(87),onCancel:()=>o.default.closeModal(),cancelText:f.default.t(1694)},e))}:()=>{E(!0)},S=i.default.createElement(n.default,{checked:v,onChange:M}),P=v?f.default.t(1703):f.default.t(1844);if(v&&_){var T=r.default.untilStr(_);C=i.default.createElement(p.TextDiv,{theme:"muted"},T)}return i.default.createElement(u.default,{a8nText:s.default.key("block-mute"),side:S,onClick:M,multiline:!(!v||!_)},i.default.createElement(p.TextSpan,{theme:"title"},P),C)};var i=l(a(67294)),s=l(a(62067)),n=l(a(73132)),r=l(a(56656)),o=l(a(97420)),d=l(a(58743)),u=l(a(16998)),c=a(53615),f=l(a(66761)),h=a(79665),p=a(45739),m=l(a(53233))},27471:(e,t,a)=>{"use strict";var l=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67154)),n=i(a(6479)),r=l(a(67294)),o=a(6653),d=i(a(25508)),u=i(a(60246)),c=i(a(66761)),f=i(a(48878)),h=i(a(44667)),p=i(a(62745));class m extends r.Component{constructor(...e){super(...e),this._setGallery=e=>{this._gallery=e},this._queryCollection=(e,t)=>{var{productMsgs:a,chat:l}=this.props;this.props.listeners.uiIdle((()=>{a.queryProducts(l,t)}))}}componentDidMount(){this.props.listeners.add(this.props.productMsgs,"add remove reset",(()=>{var e;null===(e=this._gallery)||void 0===e||e.forceUpdate()}))}render(){var e,t=this.props,{productMsgs:a,listeners:l,chat:i}=t,f=(0,n.default)(t,["productMsgs","listeners","chat"]);return u.default.supportsFeature(u.default.F.MD_BACKEND)&&i.endOfHistoryTransferType===o.ConversationEndOfHistoryTransferModelPropType.COMPLETE_BUT_MORE_MESSAGES_REMAIN_ON_PRIMARY&&(e=r.default.createElement(d.default,{icon:r.default.createElement(p.default,{name:"content-chat"}),theme:"list",secondary:c.default.t(587)},c.default.t(593))),r.default.createElement(r.default.Fragment,null,r.default.createElement(h.default,(0,s.default)({ref:this._setGallery,msgsCollection:a,queryCollection:this._queryCollection,hasBefore:a.hasProductBefore,queryBefore:a.hasProductBefore?Promise.resolve():null,emptyText:c.default.t(1200),chat:i},f)),e)}}m.displayName="ProductGallery";var E=(0,f.default)(m);t.default=E},96651:(e,t,a)=>{"use strict";var l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=l(a(67294)),s=l(a(97420)),n=l(a(58743)),r=l(a(69107)),o=l(a(49890)),d=l(a(98712)),u=l(a(21681)),c=l(a(66761)),f=a(47494);class h extends u.default{constructor(...e){super(...e),this.contactFilter=e=>{var t=this.props.chat.groupMetadata;return!!r.default.isFilteredContact(e)&&(!(null==t?void 0:t.participants.get(e.id))||c.default.t(228))},this.confirmAddParticipant=e=>{var t=this.onAddParticipant.bind(this,e),a=c.default.t(554,{participant:e.formattedName,subject:this.props.chat.contact.name});this.push(i.default.createElement(n.default,{onOK:t,okText:c.default.t(217),onCancel:this._pop,cancelText:c.default.t(1694)},i.default.createElement(d.default,{text:a})))},this.onAddParticipant=e=>{(0,f.addParticipants)(this.props.chat,[e]).catch((()=>{})),s.default.closeModal()},this._pop=()=>{this.pop()}}componentDidMount(){this.push(i.default.createElement(o.default,{title:c.default.t(217),filter:this.contactFilter,onCancel:this._pop,onSelect:this.confirmAddParticipant}))}}t.default=h},54718:(e,t,a)=>{"use strict";var l=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),n=a(65627),r=i(a(97420)),o=i(a(58743)),d=i(a(69107)),u=i(a(98712)),c=i(a(21681)),f=i(a(66761)),h=a(47494),p=l(a(30399));class m extends c.default{constructor(...e){super(...e),this._isGroupParticipant=e=>{var t,{chat:a}=this.props;return!!(null===(t=a.groupMetadata)||void 0===t?void 0:t.participants.get(e))},this.customSecondaryText=e=>{var t,{chat:a}=this.props;return(null===(t=a.groupMetadata)||void 0===t?void 0:t.participants.get(e))?f.default.t(228):null},this.contactFilter=e=>{var t=this.props.chat.groupMetadata;return!!d.default.isFilteredContact(e)&&(!(null==t?void 0:t.participants.get(e.id))||f.default.t(228))},this.confirmAddParticipant=e=>{var{chat:t}=this.props;this.push(s.default.createElement(o.default,{onOK:this.onAddParticipant.bind(this,e),okText:f.default.t(217,{_plural:e.length}),onCancel:this._pop,cancelText:f.default.t(1694)},s.default.createElement(u.default,{text:this._makeNameEnumeration(e,t.contact.name)})))},this._makeNameEnumeration=(e,t)=>{var a=e.map((e=>e.formattedShortName||e.shortName)).reduce(((t,a,l)=>[...t,a,l!==e.length-1&&f.default.t(672)||""]),[]);return f.default.t(555,{participants:a.join(""),subject:t})},this.onAddParticipant=e=>{(0,h.addParticipants)(this.props.chat,e).catch((()=>{})),r.default.closeModal()},this._pop=()=>{this.pop()}}componentDidMount(){this.push(s.default.createElement(p.default,{onConfirm:this.confirmAddParticipant,filter:this.contactFilter,title:f.default.t(217),isDisabled:this._isGroupParticipant,isSelected:this._isGroupParticipant,customSecondaryText:this.customSecondaryText,listType:p.ListType.PARTICIPANT_MANAGE_MODAL,singleSelectionFooterType:n.FooterType.CONFIRM,multipleSelectionFooterType:n.FooterType.CONFIRM}))}}t.default=m},35339:(e,t,a)=>{"use strict";var l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=l(a(67294)),s=l(a(73636)),n=l(a(32612)),r=l(a(21681)),o=l(a(87642));class d extends r.default{constructor(...e){super(...e),this._showArchiveSettingsDrawer=()=>{this.push(i.default.createElement(s.default,{settings:o.default,onClose:this._pop}))},this._pop=()=>{this.pop()}}componentDidMount(){this.push(i.default.createElement(n.default,{showSettings:this._showArchiveSettingsDrawer,onClose:this._pop,settings:o.default}))}}t.default=d},36251:(e,t,a)=>{"use strict";var l=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67154)),n=i(a(67294)),r=i(a(28041)),o=i(a(9506)),d=i(a(3504)),u=i(a(97420)),c=i(a(10303)),f=i(a(37352)),h=i(a(69910)),p=a(28377),m=i(a(31763)),E=i(a(73469)),g=i(a(21681)),v=a(53615),_=i(a(91571)),C=i(a(82246)),M=i(a(10766)),S=a(2152),P=a(58635),T=l(a(60823)),N=i(a(5148)),I=a(66248),b=i(a(34498)),y=i(a(77453)),k=i(a(64349)),A=i(a(37091)),O=i(a(28187)),w=i(a(43866)),x=i(a(71050)),R=i(a(27812));class D extends g.default{constructor(...e){super(...e),this._scrollOffset=0,this._setScrollOffset=e=>{this._scrollOffset=e},this.onProductDetail=(e,t)=>{var{chat:a}=this.props,l=n.default.createElement(y.default,{chat:a,collectionId:t,product:e,onEnd:this._end,onBack:this._popAndUpdate,refreshCarousel:!1,onProductLinkClick:this._onProductLinkClick,onCartClick:this._onCartClick});this.push(l)},this.onProductDetailFromInfo=e=>{var t=n.default.createElement(k.default,{chat:this.props.chat,productInfo:e,onEnd:this._end,onBack:this._pop,onProductDetail:this.onProductDetail,onProductCatalog:this.onProductCatalogHeaderClick,onProductLinkClick:this._onProductLinkClick,onCartClick:this._onCartClick});this.push(t)},this.onCollectionSeeAll=e=>{var t=this.props.chat.id;this.push(n.default.createElement(c.default,{contact:this.props.chat.contact,onProductDetail:this.onProductDetail,catalogId:t,onBack:this._pop,onCatalogLinkClick:this._onCatalogLinkClick,onCartClick:this._onCartClick,collection:e}))},this._onProductLinkClick=e=>{this.push(n.default.createElement(A.default,{product:e,onBack:this._pop}))},this._onCatalogLinkClick=(e,t)=>{this.push(n.default.createElement(o.default,{catalog:e,contact:t,onBack:this._pop}))},this._onCartClick=e=>{var t=(0,I.getProductCatalogContext)(this.props.context),a=(0,w.default)(e,this.props.chat,t);a&&this.push(a)},this.pushProductCatalog=()=>{var{chat:e}=this.props,t=(0,v.canViewCollections)()?n.default.createElement(d.default,{contact:e.contact,onProductDetail:this.onProductDetail,catalogId:e.id,onBack:this._pop,businessProfile:e.contact.businessProfile,onCatalogLinkClick:this._onCatalogLinkClick,onCartClick:this._onCartClick,onCollectionSeeAll:this.onCollectionSeeAll}):n.default.createElement(O.default,{contact:e.contact,onProductDetail:this.onProductDetail,catalogId:e.id,onBack:this._pop,businessProfile:e.contact.businessProfile,onCatalogLinkClick:this._onCatalogLinkClick,onCartClick:this._onCartClick});this.push(t)},this.onProductCatalog=e=>{var t=this.props.chat.id;(0,P.logCarouselViewMoreClick)({catalogOwnerWid:t,catalogContext:e}),this.pushProductCatalog(t)},this.onProductCatalogHeaderClick=(e,t)=>{(0,P.logCarouselViewMoreClick)({catalogOwnerWid:e,catalogContext:t}),this.onProductCatalog(t)},this.onStarred=()=>{var e=n.default.createElement(x.default,{chat:this.props.chat,starredMsgs:this.props.chat.getStarredMsgs(),onClose:this._pop});this.push(e)},this.onAdminSetting=()=>{var{chat:e}=this.props,t=n.default.createElement(M.default,{chat:e,groupMetadata:e.groupMetadata,onClose:this._pop});this.push(t)},this.onContactCard=()=>{this.push(n.default.createElement(f.default,{chat:this.props.chat,onClose:this._pop}))},this.onMediaGallery=()=>{var e=n.default.createElement(T.default,{chat:this.props.chat,onBack:this._pop,onProductDetail:this.onProductDetail,setProductsScrollOffset:this._setScrollOffset});this.push(e)},this.onGroupInviteLink=()=>{var{chat:e}=this.props,t=n.default.createElement(C.default,{chat:this.props.chat,groupMetadata:e.groupMetadata,onBack:this._pop});this.push(t)},this._pop=()=>{this.pop()},this._popAndUpdate=()=>{this.popAndUpdate({initialTab:T.TABS.PRODUCTS,productsScrollOffset:this._scrollOffset})},this._end=()=>{this.end(!0)},this.onVerification=e=>{var t=e||this.props.chat.contact,a=n.default.createElement(R.default,{contact:t,onClose:this._pop,isFirstLevel:!1});this.push(a)},this.onLiveLocation=()=>{var e=n.default.createElement(S.LiveLocationDrawerLoadable,{chat:this.props.chat,onClose:this._pop});this.push(e)},this.onEphemeral=()=>{var{chat:e}=this.props,t=n.default.createElement(E.default,{chat:e,fromInfoFlow:!0,onClose:this._pop});this.push(t)}}componentDidMount(){var e=this.onStarred,t=this.onMediaGallery,a=this.props.chat;this.props.chat.isGroup?this.push(n.default.createElement(_.default,{chat:a,showFullGroupDescription:this.props.showFullGroupDescription,scrollToParticipantList:this.props.scrollToParticipantList,groupMetadata:a.groupMetadata,contact:a.contact,profilePicThumb:a.contact.getProfilePicThumb(),onVerification:this.onVerification,onStarred:e,onMediaGallery:t,onAdminSetting:this.onAdminSetting,onGroupInviteLink:this.onGroupInviteLink,onLiveLocation:this.onLiveLocation,onEphemeral:this.onEphemeral,onClose:this._pop})):a.isBroadcast?this.push(n.default.createElement(r.default,{chat:a,contact:a.contact,onStarred:e,onMediaGallery:t,onClose:this._pop})):a.isUser&&(a.contact.isBusiness&&(0,v.canSeeBizProfileV3)()&&u.default.setDrawerContext("right",(0,I.buildProductCatalogContext)(new b.default,(0,p.getMaybeBizPlatformForLogging)(a.contact.id.toString()),N.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_PROFILE)),this.push(n.default.createElement(h.default,{contact:a.contact,onVerification:this.onVerification,onStarred:e,onContactCard:this.onContactCard,onMediaGallery:t,onProductCatalog:this.onProductCatalog,onProductDetail:this.onProductDetail,onLiveLocation:this.onLiveLocation,onEphemeral:this.onEphemeral,onClose:this._pop})))}}t.default=e=>n.default.createElement(m.default.Consumer,null,(t=>n.default.createElement(D,(0,s.default)({context:t},e))))},18826:(e,t,a)=>{"use strict";var l=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(23493)),n=i(a(96391)),r=l(a(67294)),o=i(a(97420)),d=i(a(46274)),u=l(a(92246)),c=i(a(60246)),f=i(a(66761)),h=i(a(48878)),p=a(46072),m=i(a(61740)),E=i(a(56450)),g=i(a(5148)),v=i(a(52206)),_=i(a(36708)),C=a(63284);class M extends r.Component{constructor(e){super(e),this._unmounted=!1,this._addListeners=()=>{var e=()=>this.state.activeMsg,{mediaMsgs:t}=this,{listeners:a}=this.props;a.uiIdle((()=>{var a=e();a&&t.loadMoreAroundIfNeeded(a)}));var l=e();(null==l?void 0:l.isViewOnce)?a.add(l,"revoked",(()=>{this.setState({activeMsg:null}),this.endFlow()})):(a.add(t,"remove",((a,l,i)=>{var s=e();if(t.includes(a)||null!=s&&null!=s.id&&s.id.toString()!==a.id.toString())this.forceUpdate();else{var r=i.index;0===t.length?this.endFlow():t.length===r?this.handleSelectThumb((0,n.default)(t.at(r-1),"mediaMsgs.at(index - 1)")):this.handleSelectThumb((0,n.default)(t.at(r),"mediaMsgs.at(index)"))}})),a.add(t,"reset",(()=>{this.endFlow()})),a.add(t,"query_media_after",(()=>{this.forceUpdate()})),a.add(t,"query_media_before",(()=>{var e=this._refThumbs;e&&(this._prevScrollWidth=e.scrollWidth,e instanceof HTMLElement&&this.forceUpdate())})))},this.handleKeyDown=e=>{var t=f.default.isRTL();37===e.keyCode?t?this.handleNext():this.handlePrev():39===e.keyCode&&(t?this.handlePrev():this.handleNext())},this.handleImageLoad=()=>{var{uiActionEvent:e}=this;e&&(e.markUiActionT(),e.commit(),delete this.uiActionEvent)},this.handleScroll=e=>{this._handleScrollThrottled(e.currentTarget,this.mediaMsgs,e.currentTarget.scrollLeft,this.props.listeners)},this.handleNext=e=>{if(e&&e.stopPropagation(),!this.state.imgZoomed){var t=this.state.activeMsg;if(t){var a=null;for(a=this.mediaMsgs.getAfter(t);a&&a.mediaData&&!(0,C.hasThumbnail)(a.mediaData);)a=this.mediaMsgs.getAfter(a);a?this.handleSelectThumb(a):this.mediaMsgs.hasMediaAfter&&(this._queryMediaAfter||(this._queryMediaAfter=this.mediaMsgs.queryMedia({chat:t.chat,msg:t,direction:"after"}).checkpoint(this.props.rejectOnUnmount()).then((e=>{"number"==typeof e.length&&e.length>0&&this.state.activeMsg===t&&this.handleNext()})).catchType(u.Unmount,(()=>{})).catch((()=>{__LOG__(3)`query media msgs error: `})).finally((()=>{this._queryMediaAfter=null}))))}}},this.handlePrev=e=>{if(e&&e.stopPropagation(),!this.state.imgZoomed){var t=this.state.activeMsg;if(t){var a=null;for(a=this.mediaMsgs.getBefore(t);a&&a.mediaData&&!(0,C.hasThumbnail)(a.mediaData);)a=this.mediaMsgs.getBefore(a);a?this.handleSelectThumb(a):this.mediaMsgs.hasMediaBefore&&(this._queryMediaBefore||(this._queryMediaBefore=this.mediaMsgs.queryMedia({chat:t.chat,msg:t,direction:"before"}).checkpoint(this.props.rejectOnUnmount()).then((e=>{"number"==typeof e.length&&e.length>0&&this.state.activeMsg===t&&this.handlePrev()})).catchType(u.Unmount,(()=>{})).catch((()=>{__LOG__(3)`query media msgs error: `})).finally((()=>{this._queryMediaBefore=null}))))}}},this.handleImgZoomIn=e=>{this.setState({imgZoomed:e})},this.endFlow=()=>{o.default.closeModalMedia()},this.willEndFlow=()=>{var e;(e=this._refThumbsContainer)&&(0,_.default)(e,{opacity:[0,1],translateY:["100%","0%"]},{duration:300,easing:[.1,.82,.25,1]})},this.handleSelectThumb=e=>{this.props.listeners.uiIdle((()=>{this.mediaMsgs.loadMoreAroundIfNeeded(e)})),this.setState({activeMsg:e})},this.scrollToActive=(e=!1)=>{var t=this._refThumbsContainer,a=this._refThumbs,l=this._refActiveThumb;if(t&&a&&l){var i=0;l instanceof HTMLElement&&(i=l.clientWidth/2-t.clientWidth/2),(0,_.default)(a,"stop");var s=0;e&&(s=300),(0,_.default)(l,"scroll",{duration:s,container:a,offset:i,axis:"x",easing:[.1,.82,.25,1]})}},this._setRefActiveThumb=e=>{this._refActiveThumb=e},this.setRefThumbsContainer=e=>{this._refThumbsContainer=e},this.setRefThumbs=e=>{this._refThumbs=e},this._getActiveMsgIndexInAlbum=()=>{var e=-1,{highlightedMsgIds:t}=this.props;if(!t||!this.state.activeMsg)return e;var a=this.state.activeMsg.id.toString();if(!t.has(a))return e;var l=0;return t.forEach((t=>{t===a&&(e=l),l++})),e},this._previousMediaHasThumb=()=>{var e=this.state.activeMsg;if(!e)return!1;for(var t=this.mediaMsgs.indexOf(e)-1;t>0;t--){var a=this.mediaMsgs.at(t);if(a&&(0,C.hasThumbnail)(a.mediaData))return!0}return!1},this._prevScrollWidth=null;var t=this.props.msg;this.mediaMsgs=t.chat.constructMediaMsgs(t),this._handleScrollThrottled=(0,s.default)(this._handleScroll.bind(this),100),t.type===d.default.MSG_TYPE.IMAGE&&(this.uiActionEvent=new g.default.UiAction({uiActionType:g.default.UI_ACTION_TYPE.IMAGE_OPEN,uiActionPreloaded:t.mediaData.mediaStage===p.MEDIA_DATA_STAGE.RESOLVED})),this.state={activeMsg:t,imgZoomed:!1,animatingThumbs:this._hasThumbList(t)}}componentDidMount(){this.props.listeners.add(window,"keydown",this.handleKeyDown),this._addListeners(),this.scrollToActive(),(e=>{e&&(0,_.default)(e,{opacity:[1,0],translateY:["0%","100%"]},{duration:300,delay:100,easing:[.1,.82,.25,1]}).then((()=>{this._unmounted||this.setState({animatingThumbs:!1})}))})(this._refThumbsContainer)}componentDidUpdate(e,t){if(t.activeMsg!==this.state.activeMsg)this.scrollToActive(!0);else{var a=this._refThumbs;if(!a||null==this._prevScrollWidth||0===this._prevScrollWidth)return;a instanceof HTMLElement&&(a.scrollLeft+=a.scrollWidth-this._prevScrollWidth),this._prevScrollWidth=null}}componentWillUnmount(){this._handleScrollThrottled.cancel(),this._unmounted=!0}_hasThumbList(e){return!(null==e?void 0:e.isViewOnce)}_handleScroll(e,t,a,l){if(0!==t.length&&null!=a){if(t.hasMediaBefore&&a<e.clientWidth){var i=(0,n.default)(t.head(),"mediaMsgs.head()");l.uiIdle((()=>{t.queryMedia({chat:i.chat,msg:i}),this.forceUpdate()}))}if(t.hasMediaAfter&&a+d.default.SCROLL_FUDGE>e.scrollWidth-2*e.clientWidth){var s=(0,n.default)(t.last(),"mediaMsgs.last()");l.uiIdle((()=>{t.queryMedia({chat:s.chat,msg:s,direction:"after"}),this.forceUpdate()}))}}}render(){var e,t=this.state.activeMsg;if(!t)return null;var a=this.mediaMsgs.last(),l=this.mediaMsgs.hasMediaAfter||this.state.activeMsg!==a?this.handleNext:null,i=this.mediaMsgs.head(),s=null;return s=this.mediaMsgs.hasMediaBefore||this.state.activeMsg!==i?this.handlePrev:null,c.default.supportsFeature(c.default.F.MD_BACKEND)&&(s=(this.mediaMsgs.hasMediaBefore||this.state.activeMsg!==i)&&this._previousMediaHasThumb()?this.handlePrev:null),r.default.createElement("div",{className:this.state.imgZoomed?"img-zoomed-in":null},this._hasThumbList(t)&&r.default.createElement(E.default,{activeMsg:t,mediaMsgs:this.mediaMsgs,highlightedMsgIds:this.props.highlightedMsgIds,onSelectThumb:this.handleSelectThumb,onSetActiveThumb:this._setRefActiveThumb,onScroll:this.handleScroll,setRefThumbsContainer:this.setRefThumbsContainer,setRefThumbs:this.setRefThumbs}),r.default.createElement(m.default,{msg:t,mediaData:t.mediaData,onBack:this.endFlow,onExitAnimation:this.willEndFlow,onNext:l,onPrev:s,onImgZoomIn:this.handleImgZoomIn,getZoomNode:this.props.getZoomNode,startTime:this.props.startTime,isAnimatingIn:this.state.animatingThumbs,onImageLoad:this.uiActionEvent?this.handleImageLoad:null,msgIndexInAlbum:this._getActiveMsgIndexInAlbum(),albumSize:(null===(e=this.props.highlightedMsgIds)||void 0===e?void 0:e.size)||0}))}}M.displayName="MediaViewerFlow";var S=(0,v.default)((0,h.default)(M));t.default=S},68455:(e,t,a)=>{"use strict";var l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=l(a(67294)),s=l(a(68356)),n=l(a(46274)),r=l(a(66761)),o=l(a(31376)),d=(0,l(a(83179)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,39583)).then((e=>e.default))),"SendContactFlow");t.requireBundle=d;var u=(0,s.default)({loader:d,loading:e=>i.default.createElement(o.default,{title:r.default.t(1394),error:Boolean(e.error)}),delay:n.default.LOADABLE_DELAY});t.default=u},32612:(e,t,a)=>{"use strict";var l=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),n=l(a(82338)),r=i(a(2078)),o=l(a(18917)),d=l(a(97420)),u=l(a(46274)),c=l(a(3395)),f=l(a(34727)),h=i(a(85002)),p=l(a(68770)),m=l(a(59474)),E=a(4404),g=l(a(47060)),v=l(a(12063)),_=a(67052),C=l(a(47312)),M=a(56726),S=a(53615),P=l(a(79766)),T=l(a(66761)),N=l(a(48878)),I=a(3875),b=l(a(24927)),y=l(a(82286)),k=l(a(62745)),A=l(a(45739)),O=l(a(77923));class w extends s.Component{constructor(...e){super(...e),this.flatListController=new v.default,this.selection=new b.default([],(e=>e.id.toString())),this.state={forceHideNux:!1,chats:this._getArchivedChats()},this.handleClick=(e,t)=>{d.default.openChatFromUnread(t).then((e=>{e&&d.default.focusChatTextInput(t)})),(0,S.archiveV2Supported)()&&this.props.settings.archive.enabled||this.handleClose()},this._updateSelected=e=>{this.selection.setVal(e,!1)},this.handleClose=()=>{this.props.onClose()},this.handleNextChat=e=>{e.preventDefault(),e.stopPropagation(),this.selection.setNext(!0)},this.handlePrevChat=e=>{e.preventDefault(),e.stopPropagation(),this.selection.setPrev(!0)},this.shouldShowArchiveV2=()=>(0,S.archiveV2Supported)()&&this.props.settings.showArchiveV2,this._handleCloseChat=e=>{e===this.selection.getVal()&&this.selection.unset()},this.renderItem=e=>s.default.createElement(r.default,{chat:e.chat,mode:r.Mode.LAST,active:this.selection,onClick:this.handleClick,hideArchivedIcon:(0,S.archiveV2Supported)()&&this.props.settings.archive.enabled,hideMuteIcon:this.shouldShowArchiveV2(),hideMuteOption:this.shouldShowArchiveV2(),showEphemeralIcon:!0}),this.setRefHotKeys=e=>{this.refList=e},this._handleCloseNux=()=>{(0,M.setNUX)(u.default.NUX.ARCHIVE,{views:u.default.ARCHIVE_NUX_MAX_VIEWS,maxViews:u.default.ARCHIVE_NUX_MAX_VIEWS}),this.setState({forceHideNux:!0})},this._showNux=()=>{var e=o.default.some((e=>e.archive));return this.shouldShowArchiveV2()&&e&&(0,M.shouldShowNUX)(u.default.NUX.ARCHIVE)&&!this.state.forceHideNux}}componentDidMount(){this.shouldShowArchiveV2()&&!(0,M.getNUX)(u.default.NUX.ARCHIVE)&&(0,M.setNUX)(u.default.NUX.ARCHIVE,{views:0,maxViews:u.default.ARCHIVE_NUX_MAX_VIEWS}),this._showNux()&&(0,M.viewNUX)(u.default.NUX.ARCHIVE),this.shouldShowArchiveV2()?this.props.listeners.add(o.default,"sort change:archive add remove",(()=>{this.setState({chats:this._getArchivedChats()})})):this.props.listeners.add(o.default,"change:archive add remove",(()=>{this.setState({chats:this._getArchivedChats()})})),this.refList&&C.default.focus(this.refList),this.props.listeners.add(d.default,"update_chatlist_selection",this._updateSelected),this.props.listeners.add(d.default,"close_chat",this._handleCloseChat);var e=this._getActiveArchiveChat();e&&this._updateSelected(e)}_getActiveArchiveChat(){return o.default.toArray().find((e=>e.active&&e.archive))}_getArchivedChats(){return o.default.filter((e=>e.archive))}getData(){return this.state.chats.map((e=>({itemKey:e.id.toString(),chat:e})))}render(){var e,t;if(this.selection.init(this.state.chats,!0),this._showNux()&&(t=s.default.createElement("div",{className:n.default.nuxContainer},s.default.createElement(_.FlexColumn,{align:"center"},s.default.createElement("span",{className:n.default.nuxIcon},s.default.createElement(k.default,{name:"archive-nux"})),s.default.createElement("div",{className:n.default.nuxHeader},s.default.createElement(A.default,{theme:"large",as:"h1"},T.default.t(236))),s.default.createElement("div",{className:n.default.nuxContent},s.default.createElement("div",{className:n.default.nuxText},s.default.createElement(A.default,{theme:"plain",as:"p"},T.default.t(235))))),s.default.createElement("button",{onClick:this._handleCloseNux,className:n.default.btnClose},s.default.createElement(k.default,{name:"x-alt"})))),this.state.chats.length>0){var a={down:this.handleNextChat,up:this.handlePrevChat};e=s.default.createElement(P.default,{onRef:this.setRefHotKeys,handlers:a},s.default.createElement(O.default,{transitionName:"slide"},t),s.default.createElement(g.default,{className:n.default.flatListContainer,data:this.getData(),flatListController:this.flatListController,direction:"vertical",renderItem:this.renderItem}))}else e=s.default.createElement(E.Archived,null);var l=(0,S.archiveV2Supported)()&&this.props.settings.archive.enabled?s.default.createElement(I.MenuBarItem,{a8nText:"archived-menu",icon:s.default.createElement(k.default,{name:"menu"}),title:T.default.t(1046)},s.default.createElement(p.default,{type:"dropdown_menu",flipOnRTL:!0,key:"ArchivedDrawerHeader",dirX:"LEFT"},s.default.createElement(m.default,{a8n:"open-archive-settings menu-item",action:this.props.showSettings},T.default.t(237)))):null,i=(0,S.archiveV2Supported)()&&this.props.settings.archive.enabled?T.default.t(240):T.default.t(239);return s.default.createElement(c.default,{theme:"archived"},s.default.createElement(h.default,{title:i,onBack:this.handleClose,type:h.DRAWER_HEADER_TYPE.LARGE,menu:l}),s.default.createElement(f.default,{flatListControllers:[this.flatListController]},e))}}w.CONCERNS={settings:["showArchiveV2","archive"]},w.displayName="ArchivedDrawer";var x=(0,N.default)((0,y.default)(w,w.CONCERNS));t.default=x},28041:(e,t,a)=>{"use strict";var l=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),n=l(a(31777)),r=l(a(18917)),o=l(a(56656)),d=l(a(97420)),u=l(a(84051)),c=l(a(69107)),f=i(a(27890)),h=l(a(3395)),p=l(a(34727)),m=l(a(61376)),E=i(a(85002)),g=l(a(25404)),v=l(a(47060)),_=l(a(12063)),C=a(56726),M=l(a(28204)),S=l(a(66761)),P=l(a(48878)),T=l(a(39950)),N=l(a(82286)),I=a(79665),b=l(a(62745)),y=a(45739),k=l(a(43501)),A=l(a(60246)),O=l(a(3859)),w=l(a(4319));class x extends s.Component{constructor(...e){super(...e),this.flatListController=new _.default,this.handleParticipantClick=(e,t)=>{k.default.equals((0,C.getMaybeMeUser)(),t.id)||r.default.find(t.id).then((function(e){d.default.openChatFromUnread(e).then((t=>{t&&d.default.focusChatTextInput(e)}))}))},this.handleClose=()=>{this.props.onClose?this.props.onClose():this.props.uim.uie.requestDismiss()},this.handleDelete=()=>{d.default.deleteOrExitChat((0,I.unproxy)(this.props.chat))},this.showEncryptionInfoPopup=()=>{d.default.openModal(s.default.createElement(w.default,{chatId:this.props.chat.id,e2eSubtype:"info_encrypted"}))},this.renderItem=e=>{var{participant:t}=e,a=c.default.gadd(t.id);return s.default.createElement(u.default,{contact:a,theme:"drawer-list",admin:!!t.isAdmin,onClick:this.handleParticipantClick,key:t.id.toString(),waitIdle:!0})}}componentDidMount(){var e=this.props.chat.groupMetadata;null!=e&&this.props.listeners.add(e.participants,"add remove sort reset",(()=>{this.forceUpdate()}))}getData(){var e,t;return(null!==(e=null===(t=this.props.chat.groupMetadata)||void 0===t?void 0:t.participants)&&void 0!==e?e:[]).map((e=>({itemKey:e.id.toString(),participant:e})))}render(){var e,t,a,l=this.props.chat,i=null;if(this.props.onMediaGallery){var r=s.default.createElement(b.default,{className:n.default.chevron,name:"chevron-right-alt",directional:!0}),d=S.default.t(1026);i=s.default.createElement(g.default,{title:d,titleOnClick:this.props.onMediaGallery||(()=>{}),subtitle:r,theme:"padding"},s.default.createElement(T.default,{chat:(0,I.unproxy)(l),mediaMsgs:l.getMediaMsgs()}))}var u,c=null!==(e=null===(t=this.props.chat.groupMetadata)||void 0===t?void 0:t.participants)&&void 0!==e?e:[],_=s.default.createElement(y.TextSpan,{theme:"section-title"},S.default.n(c.length)),C=c.length?s.default.createElement(g.default,{title:S.default.t(1919),subtitle:_},s.default.createElement(v.default,{flatListController:this.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:this.getData(),renderItem:this.renderItem})):null,M=s.default.createElement(g.default,null,s.default.createElement(m.default,{a8nText:"li-delete-broadcast",icon:s.default.createElement(b.default,{name:"delete"}),color:"danger",theme:"list-aligned",onClick:this.handleDelete},S.default.t(1735)));(null===(a=l.groupMetadata)||void 0===a?void 0:a.creation)?(u=o.default.createdStr(l.groupMetadata.creation),u=s.default.createElement(y.TextDiv,{theme:"small"},u)):u=null;var P=null;A.default.supportsFeature(A.default.F.MD_BACKEND)&&(P=s.default.createElement(O.default,{onClick:this.showEncryptionInfoPopup,text:S.default.t(1683)}));var N=null;return P&&(N=s.default.createElement(g.default,null,null,P)),s.default.createElement(h.default,{key:"contact-info-modal",theme:"striped"},s.default.createElement(E.default,{type:E.DRAWER_HEADER_TYPE.SMALL,onCancel:this.handleClose},s.default.createElement(y.TextDiv,{theme:"title"},S.default.t(355)),u),s.default.createElement(p.default,{flatListControllers:[this.flatListController]},s.default.createElement("div",{className:n.default.body},s.default.createElement("div",{className:n.default.photo},s.default.createElement(f.default,{id:l.id,size:f.DETAIL_IMAGE_SIZE.LARGE})),i,N,C,M)))}}x.CONCERNS={chat:["id","groupMetadata"]},x.displayName="BroadcastInfoDrawer";var R=(0,M.default)((0,P.default)((0,N.default)(x,x.CONCERNS)));t.default=R},62787:(e,t,a)=>{"use strict";var l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a=(0,p.default)(e.contact,["name","verifiedLevel","verifiedName","formattedName"]);t=f.default.supportsFeature(f.default.F.VNAME_V_2)?(()=>{var e=a;switch(e.verifiedLevel){case o.default.VERIFIED_LEVEL.HIGH:return e.name===e.verifiedName?h.default.t(1687,{businessName:e.verifiedName}):h.default.t(1688,{businessName:e.verifiedName});case o.default.VERIFIED_LEVEL.LOW:case o.default.VERIFIED_LEVEL.UNKNOWN:return h.default.t(1689)}})():(()=>{var e=a;switch(e.verifiedLevel){case o.default.VERIFIED_LEVEL.HIGH:return h.default.t(1947);case o.default.VERIFIED_LEVEL.LOW:return h.default.t(1949);case o.default.VERIFIED_LEVEL.UNKNOWN:return h.default.t(1951,{businessName:e.formattedName})}})();var l=i.default.createElement(s.default,{href:(0,c.getBusinessFaqUrl)(),onClick:e=>{e.preventDefault(),n.default.closeModal("none"),setTimeout((()=>(0,u.openExternalLink)((0,c.getBusinessFaqUrl)())),10)}},h.default.t(936));return i.default.createElement(r.default,{onOK:()=>{n.default.closeModal()},okText:h.default.t(1221)},i.default.createElement(d.default,{text:t})," ",l)};var i=l(a(67294)),s=l(a(53318)),n=l(a(97420)),r=l(a(58743)),o=l(a(46274)),d=l(a(98712)),u=a(91072),c=a(78572),f=l(a(60246)),h=l(a(66761)),p=l(a(53233))},63731:(e,t,a)=>{"use strict";var l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,{contact:a}=e,l=h.default.t(407);function m(){o.default.openModal(i.default.createElement(n.default,{contact:a}))}function E(){o.default.openModal(i.default.createElement(r.default,{contact:a}))}t=(0,f.canSeeSMBUpsell)()?i.default.createElement(d.default,{a8nText:"business-title",onClick:E,side:i.default.createElement(p.default,{display:"inline",name:"info"})},l):i.default.createElement(u.default,{a8nText:"business-title",className:s.default.businessTitleText,onClick:m},l);return i.default.createElement(c.default,{className:s.default.businessAccount},t)};var i=l(a(67294)),s=l(a(92447)),n=l(a(62787)),r=l(a(39632)),o=l(a(97420)),d=l(a(16998)),u=l(a(61376)),c=l(a(25404)),f=a(53615),h=l(a(66761)),p=l(a(62745))},50345:(e,t,a)=>{"use strict";var l=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a,l,{contact:i,onProductCatalog:s}=e,g=S(h.default),C=(0,E.getProductCatalogSessionId)(g);var P,T,N=c.default.toArray().find((e=>e.active));(null==N?void 0:N.id.equals(i.id))||((0,o.logMessageClick)(i.id,C),l=n.default.createElement(M,{icon:"chat-msg",label:m.default.t(1047),onClick:function(){c.default.find(i.id).then((function(e){f.default.openChatFromUnread(e).then((()=>{f.default.closeDrawerRight()}))}))},a8nText:"business-action chat"}));(null===(t=i.businessProfile)||void 0===t||null===(a=t.profileOptions)||void 0===a?void 0:a.commerceExperience)===d.COMMERCE_EXPERIENCE_TYPES.CATALOG&&(P=n.default.createElement(M,{icon:"catalog-filled",label:m.default.t(922),onClick:()=>{(0,o.logCatalogClick)(i.id,C),s((0,E.getProductCatalogContext)(g))},a8nText:"business-action catalog"}));(0,u.hasShop)(i.businessProfile)&&(T=n.default.createElement(M,{icon:"shop-filled",label:m.default.t(1423),onClick:function(){(0,o.logShopsClick)(i.id,C),(0,u.goToShop)(i.businessProfile)},a8nText:"business-action shop"}));var I=n.default.createElement(M,{icon:"forward-filled",label:m.default.t(761),onClick:function(){(0,o.logForwardClick)(i.id,C),f.default.openModal(n.default.createElement(v.default,{contacts:[(0,_.unproxy)(i)],onContactsSent:e=>{f.default.openChatFromUnread(e).then((()=>{}))}}))},a8nText:"business-action forward"});return n.default.createElement(p.FlexRow,{className:r.default.actionsRow,justify:"evenly"},l,undefined,P,T,I)};var s=i(a(94184)),n=l(a(67294)),r=i(a(89628)),o=a(21984),d=a(72203),u=a(84442),c=i(a(18917)),f=i(a(97420)),h=(i(a(3243)),i(a(31763))),p=a(67052),m=i(a(66761)),E=a(66248),g=i(a(92120)),v=i(a(68455)),_=a(79665),C=i(a(62745));a(89840),a(99160).default,a(81938).Z;function M({a8nText:e,icon:t,label:a,disabled:l,onClick:i}){return n.default.createElement("div",{className:(0,s.default)(r.default.actionButton,{[r.default.actionDisabled]:l})},n.default.createElement(g.default,{inverted:!0,onClick:i,disabled:l,a8nText:e},n.default.createElement(C.default,{name:t,directional:!0})),n.default.createElement("div",{className:r.default.actionLabel},a))}var{useContext:S}=n.default},40432:(e,t,a)=>{"use strict";var l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{businessHours:t,contact:a}=e,l=(0,c.getProductCatalogSessionId)(E(o.default)),i=(0,m.getBusinessOpenState)(t),[d,h]=g(!0);if(null==t)return null;var _=(0,f.getBusinessHours)(t).map((e=>{var{day:t,hours:a,first:l}=e,n=t,r=a,o=!1;if(l)switch(i.status){case m.BUSINESS_OPEN_STATUS.OPEN_24H:n=u.default.t(374),r=u.default.t(370),o=!0;break;case m.BUSINESS_OPEN_STATUS.OPEN_APPOINTMENT:n=u.default.t(374),r=u.default.t(373),o=!0;break;case m.BUSINESS_OPEN_STATUS.OPEN:n=u.default.t(374),o=!0;break;case m.BUSINESS_OPEN_STATUS.CLOSED_TODAY:r=u.default.t(359)}return!l&&d?null:s.default.createElement(v,{day:n,dayIsOpen:o,key:t,hours:r,first:l,collapsed:d})}));return s.default.createElement(p.default,{className:n.default.businessHours,onClick:()=>{(0,r.logHoursClick)(a.id,l),h(!d)},a8nText:"business-hours-expand"},_)};var i=l(a(94184)),s=l(a(67294)),n=l(a(33596)),r=a(21984),o=l(a(31763)),d=l(a(98712)),u=l(a(66761)),c=a(66248),f=a(46822),h=l(a(62745)),p=l(a(87120)),m=a(30449),{useContext:E,useState:g}=s.default;function v(e){if(e.first){var t=s.default.createElement("div",{className:n.default.businessHoursChevron,role:"button"},s.default.createElement(h.default,{className:e.collapsed?"":n.default.flipSvg,display:"inline",name:"chevron-down-alt"}));return s.default.createElement("div",{className:(0,i.default)(n.default.businessHoursRow,{[n.default.firstRow]:e.first})},s.default.createElement("div",{className:(0,i.default)(n.default.businessHoursDay,{[n.default.dayIsOpen]:e.dayIsOpen})},s.default.createElement(d.default,{direction:"auto",text:e.day})),s.default.createElement("div",{className:n.default.businessHoursHours},s.default.createElement(d.default,{direction:"auto",text:e.hours})),t)}return s.default.createElement("div",{className:n.default.businessHoursRow},s.default.createElement("div",{className:n.default.businessHoursDay},s.default.createElement(d.default,{direction:"auto",text:e.day})),s.default.createElement("div",{className:n.default.businessHoursHours},s.default.createElement(d.default,{direction:"auto",text:e.hours})))}},60937:(e,t,a)=>{"use strict";var l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a,l,_,C,M,{businessProfile:S,contact:P}=e,{description:T,address:N,latitude:I,longitude:b,website:y,email:k,businessHours:A}=(0,g.default)(S,["description","address","latitude","longitude","website","email","businessHours"]),O=v(u.default),w=(0,E.getProductCatalogSessionId)(O);null!=T&&(t=s.default.createElement("div",{className:r.default.section},s.default.createElement(h.default,{text:T,textLimit:d.default.BUSINESS_DESCRIPTION_INFO_PANEL_TRUNC_LENGTH},(({textLimit:e})=>s.default.createElement(f.default,{className:r.default.description,selectable:!0,direction:"auto",text:T,textLimit:e})))));null!=A&&(a=s.default.createElement("div",{className:r.default.section},s.default.createElement(n.default,{businessHours:A,contact:P})));null!=N&&(l=s.default.createElement("div",{className:r.default.section},s.default.createElement(f.default,{selectable:!0,direction:"auto",text:N})));null!=I&&null!=b&&(_=s.default.createElement("div",{style:{height:132},className:(0,i.default)(r.default.section,r.default.map)},s.default.createElement(m.default,{lat:I,lng:b,name:N||"",width:590,height:132,onClick:()=>(0,o.logLocationClick)(P.id,w),a8nText:"business-info-map"})));null!=k&&(C=s.default.createElement("div",{className:r.default.section},s.default.createElement(p.default,{href:`mailto:${k}`,onClick:()=>(0,o.logEmailClick)(P.id,w),a8nText:"business-info-email"},k)));null!=y&&y.length>0&&(M=s.default.createElement("div",{className:r.default.section},y.map((e=>s.default.createElement("div",{key:e},s.default.createElement(p.default,{href:e,onClick:()=>(0,o.logWebsiteClick)(P.id,w),a8nText:"business-info-website"},e))))));return null==t&&null==a&&null==l&&null==_&&null==C&&null==M?null:s.default.createElement(c.default,{theme:"padding"},t,a,l,_,C,M)};var i=l(a(94184)),s=l(a(67294)),n=l(a(40432)),r=l(a(88274)),o=a(21984),d=l(a(46274)),u=l(a(31763)),c=l(a(25404)),f=l(a(98712)),h=l(a(35587)),p=l(a(91072)),m=l(a(57736)),E=a(66248),g=l(a(53233)),{useContext:v}=s.default},21984:(e,t,a)=>{"use strict";var l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.logProfileImpression=function(e,t){var a=new i.default.ViewBusinessProfile({businessProfileJid:e.toString(),viewBusinessProfileAction:i.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_IMPRESSION,catalogSessionId:t});a&&a.commit()},t.logProfileExit=function(e,t,a){var l=new i.default.ViewBusinessProfile({businessProfileJid:e.toString(),viewBusinessProfileAction:i.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_EXIT,catalogSessionId:t,scrollDepth:a});l&&l.commit()},t.logMessageClick=function(e,t){var a=new i.default.ViewBusinessProfile({businessProfileJid:e.toString(),viewBusinessProfileAction:i.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_MESSAGE,catalogSessionId:t});a&&a.commit()},t.logVoiceCallClick=function(e,t){var a=new i.default.ViewBusinessProfile({businessProfileJid:e.toString(),viewBusinessProfileAction:i.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_VOICE_CALL,catalogSessionId:t});a&&a.commit()},t.logShopsClick=function(e,t){var a=new i.default.ViewBusinessProfile({businessProfileJid:e.toString(),viewBusinessProfileAction:i.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_SHOPS_ICON,catalogSessionId:t});a&&a.commit()},t.logCatalogClick=function(e,t){var a=new i.default.ViewBusinessProfile({businessProfileJid:e.toString(),viewBusinessProfileAction:i.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_CATALOG_ICON,catalogSessionId:t});a&&a.commit()},t.logForwardClick=function(e,t){var a=new i.default.ViewBusinessProfile({businessProfileJid:e.toString(),viewBusinessProfileAction:i.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_FORWARD,catalogSessionId:t});a&&a.commit()},t.logEmailClick=function(e,t){var a=new i.default.ViewBusinessProfile({businessProfileJid:e.toString(),viewBusinessProfileAction:i.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_EMAIL,catalogSessionId:t});a&&a.commit()},t.logWebsiteClick=function(e,t){var a=new i.default.ViewBusinessProfile({businessProfileJid:e.toString(),viewBusinessProfileAction:i.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_WEBSITE,catalogSessionId:t});a&&a.commit()},t.logLocationClick=function(e,t){var a=new i.default.ViewBusinessProfile({businessProfileJid:e.toString(),viewBusinessProfileAction:i.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_LOCATION,catalogSessionId:t});a&&a.commit()},t.logHoursClick=function(e,t){var a=new i.default.ViewBusinessProfile({businessProfileJid:e.toString(),viewBusinessProfileAction:i.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_HOURS,catalogSessionId:t});a&&a.commit()},t.logStatusClick=function(e,t){var a=new i.default.ViewBusinessProfile({businessProfileJid:e.toString(),viewBusinessProfileAction:i.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_STATUS,catalogSessionId:t});a&&a.commit()};var i=l(a(5148))},90900:(e,t,a)=>{"use strict";var l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a,{contact:l}=e;if(l.isMyContact)if(l.name!==l.verifiedName){var d;l.showBusinessCheckmarkAsSecondary&&(d=i.default.createElement("div",{className:s.default.icon},i.default.createElement(o.default,{name:"psa-verified"}))),t=i.default.createElement(r.default,{contact:l}),a=i.default.createElement("div",{className:s.default.wrapper},i.default.createElement(n.default,{text:`~${l.verifiedName}`,className:s.default.verifiedText,direction:"auto",ellipsify:!0,titlify:!0}),d)}else t=i.default.createElement(r.default,{contact:l,showBusinessCheckmark:l.showBusinessCheckmarkAsPrimary});else t=i.default.createElement(n.default,{text:l.verifiedName,direction:"auto",ellipsify:!0,titlify:!0}),a=i.default.createElement(r.default,{contact:l,showBusinessCheckmark:l.showBusinessCheckmarkAsPrimary});return i.default.createElement("div",null,i.default.createElement("div",{className:s.default.title},t),i.default.createElement("div",{className:s.default.subtitle},a))};var i=l(a(67294)),s=l(a(23653)),n=l(a(98712)),r=l(a(23045)),o=l(a(62745))},87714:(e,t,a)=>{"use strict";var l=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BusinessProfile=void 0;var s=i(a(94184)),n=l(a(67294)),r=i(a(62787)),o=i(a(39632)),d=i(a(15525)),u=i(a(97420)),c=i(a(46274)),f=i(a(16998)),h=i(a(61376)),p=i(a(25404)),m=i(a(98712)),E=i(a(35587)),g=i(a(91072)),v=i(a(60246)),_=a(53615),C=i(a(66761)),M=i(a(93883)),S=i(a(57736)),P=a(95999),T=i(a(5148)),N=a(46822),I=i(a(17363)),b=i(a(82286)),y=i(a(62745)),{VERIFIED_LEVEL:k}=c.default;class A extends n.PureComponent{constructor(...e){super(...e),this.state={collapsedHours:!0},this._onBusinessHoursClick=()=>{this.setState({collapsedHours:!this.state.collapsedHours})},this._onBusinessInfoClick=()=>{u.default.openModal(n.default.createElement(r.default,{contact:this.props.contact}))},this._onBusinessInfoWithUpsellClick=()=>{u.default.openModal(n.default.createElement(o.default,{contact:this.props.contact}))}}componentDidMount(){new T.default.ViewBusinessProfile({viewBusinessProfileAction:T.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_IMPRESSION}).commit()}_getBusinessInfoTitle(){var e,t=this.props.contact,a=!t.name||t.name===t.verifiedName,l="psa-unverified";switch(t.verifiedLevel){case k.HIGH:l="psa-verified",a?e=n.default.createElement(m.default,{className:d.default.verifiedLabel,text:C.default.t(410)}):(e=n.default.createElement(m.default,{className:d.default.verifiedLabel,text:C.default.t(408)}),e=n.default.createElement(M.default,{id:409,params:{verified:e,businessName:t.verifiedName}}));break;case k.LOW:e=a?n.default.createElement(m.default,{text:C.default.t(387)}):C.default.t(386,{businessName:t.verifiedName});break;case k.UNKNOWN:e=C.default.t(382)}return n.default.createElement(w,{icon:l,className:d.default.businessMarker,onClick:this._onBusinessInfoClick},e)}_getBusinessInfoTitleV2(){var e;switch(this.props.contact.verifiedLevel){case k.HIGH:e=C.default.t(405);break;case k.LOW:case k.UNKNOWN:e=C.default.t(382)}return n.default.createElement(h.default,{a8nText:"business-title",className:d.default.businessTitleText,onClick:this._onBusinessInfoClick},e)}_getBusinessInfoTitleWithSMBUpsell(){var e=this.props.contact.verifiedLevel===k.HIGH?C.default.t(405):C.default.t(382);return n.default.createElement(f.default,{a8nText:"business-title",onClick:this._onBusinessInfoWithUpsellClick,side:n.default.createElement(y.default,{className:d.default.infoIcon,display:"inline",name:"info"})},e)}_getBusinessHours(e){var t=(0,N.getBusinessHours)(e).map((e=>{var{day:t,hours:a,first:l}=e;return!l&&this.state.collapsedHours?null:n.default.createElement(O,{day:t,key:t,hours:a,first:l,collapsed:this.state.collapsedHours})}));return n.default.createElement(w,{icon:"business-hours",onClick:this._onBusinessHoursClick},t)}getAddressString(e){var{streetAddress:t,localizedCityName:a,zipCode:l}=e;return t&&a&&l?C.default.t(381,{streetAddress:t,city:a,zipCode:l}):t&&a?C.default.t(380,{streetAddress:t,city:a}):t}_getAddress(e,t,a,l){var i,s,r,o=l?this.getAddressString(l):null;(null!=t&&null!=a&&(i=n.default.createElement("div",{style:{height:150},className:d.default.businessMap},n.default.createElement(S.default,{lat:t,lng:a,name:o||e,width:565,height:150}))),o)&&(r=null!=t&&null!=a?(0,P.getMapUrl)(t,a,o):(0,P.getSearchUrl)(o),s=n.default.createElement("div",{className:d.default.address},n.default.createElement(g.default,{href:r},n.default.createElement(m.default,{selectable:!0,direction:"auto",text:o}))));return s||i?n.default.createElement(w,{icon:"business-address"},s,i):null}render(){var e,t,a,l,i,s,r,o;e=(0,_.canSeeSMBUpsell)()?this._getBusinessInfoTitleWithSMBUpsell():v.default.supportsFeature(v.default.F.VNAME_V_2)?this._getBusinessInfoTitleV2():this._getBusinessInfoTitle();var u,f=this.props.businessProfile;if(f.stale)t=n.default.createElement("div",{className:d.default.contactBusinessInfoSpinner},n.default.createElement(I.default,{size:20,stroke:5}));else if(a=f.categories&&f.categories.length?n.default.createElement(w,{icon:"business-category"},n.default.createElement(m.default,{selectable:!0,direction:"auto",text:f.categories.map((e=>e.localized_display_name)).join(C.default.t(672))})):null,l=f.description?n.default.createElement(w,{icon:"business-description"},n.default.createElement(E.default,{text:f.description,textLimit:c.default.BUSINESS_DESCRIPTION_INFO_PANEL_TRUNC_LENGTH},(({textLimit:e})=>n.default.createElement(m.default,{selectable:!0,direction:"auto",breakWord:!0,text:f.description,textLimit:e})))):null,i=this._getAddress(this.props.contact.name,f.latitude,f.longitude,f.structuredAddress),f.website&&Array.isArray(f.website)&&f.website.length&&(s=f.website.map(((e,t)=>{var a=(0,N.getWebsiteLink)(e),l=n.default.createElement(m.default,{selectable:!0,direction:"auto",text:e}),i=n.default.createElement(g.default,{className:d.default.link,href:a},l);return n.default.createElement(w,{icon:"business-website",key:t},i)}))),f.businessHours&&(r=this._getBusinessHours(f.businessHours)),f.email){var h=n.default.createElement(m.default,{selectable:!0,direction:"auto",text:f.email}),M=n.default.createElement(g.default,{className:d.default.link,href:`mailto:${f.email}`},h);o=n.default.createElement(w,{icon:"business-email",dir:"auto"},M)}return(t||null!=i||a||l||null!=r||o||s)&&(u=n.default.createElement(p.default,{theme:"padding"},n.default.createElement("div",{className:d.default.contactBusinessInfo},t,i,a,l,r,o,s))),n.default.createElement(n.default.Fragment,null,n.default.createElement(p.default,null,e),u)}}t.BusinessProfile=A,A.CONCERNS={contact:["id","verifiedLevel","name","verifiedName"],businessProfile:["description","categories","website","email","stale","latitude","longitude","businessHours","structuredAddress"]},A.displayName="BusinessProfile";var O=e=>{var t=e.first?n.default.createElement("div",{className:d.default.businessHoursChevron,role:"button"},n.default.createElement(y.default,{className:e.collapsed?"":d.default.flipSvg,display:"inline",name:"chevron-down-alt"})):null;return n.default.createElement("div",{className:d.default.businessHoursRow},n.default.createElement("div",{className:d.default.businessHoursDay},n.default.createElement(m.default,{direction:"auto",text:e.day})),n.default.createElement("div",{className:d.default.businessHoursHours},n.default.createElement(m.default,{direction:"auto",text:e.hours})),t)},w=e=>n.default.createElement("div",{className:(0,s.default)(d.default.dataRow,e.className),onClick:e.onClick},n.default.createElement("div",{className:d.default.dataRowIcon},n.default.createElement(y.default,{name:e.icon})),n.default.createElement("div",{className:d.default.dataRowText},e.children)),x=(0,b.default)(A,A.CONCERNS);t.default=x},83274:(e,t,a)=>{"use strict";var l=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),n=l(a(79274)),r=i(a(2078)),o=l(a(97420)),d=l(a(46274)),u=l(a(25404)),c=a(83113),f=l(a(47060)),h=l(a(66761)),p=l(a(48878)),m=l(a(51432)),E=l(a(82286)),g=l(a(62745)),v=a(45739);class _ extends s.Component{constructor(...e){super(...e),this._commonGroupInitialized=!1,this.state={collapsed:!1,numGroups:0},this.rerender=()=>{this.forceUpdate()},this.handleClick=(e,t)=>{o.default.openChatFromUnread(t).then((e=>{e&&o.default.focusChatTextInput(t)})),this.props.onClose()},this.handleShowMore=()=>{this.setState({collapsed:!1})},this.renderItem=e=>{var{chat:t}=e;return s.default.createElement(r.default,{chat:t,theme:"drawer-list",contact:t.contact,mode:r.Mode.INFO,onClick:this.handleClick,key:t.id.toString()})}}static getDerivedStateFromProps(e,t){var{commonGroups:a}=e.contact,l=a?a.length:0;return t.numGroups<=d.default.INFO_DRAWER_MAX_ROWS&&l>d.default.INFO_DRAWER_MAX_ROWS?{numGroups:l,collapsed:!0}:{numGroups:l}}componentDidMount(){var{commonGroups:e}=this.props.contact;e&&(this.props.listeners.add(e,"add remove",this.rerender),this._commonGroupInitialized=!0),(0,c.findCommonGroups)(this.props.contact).catch((()=>{throw __LOG__(4,!0,new Error,!0)`get from participants table failed`,SEND_LOGS("get from participants table failed when finding common groups"),new Error("get from participants table failed")}))}componentDidUpdate(e){if(e.contact!==this.props.contact){var t=e.contact.commonGroups;t&&e.listeners.remove(t,"add remove",this.rerender),this._commonGroupInitialized=!1}var{commonGroups:a}=this.props.contact;a&&(this._commonGroupInitialized||(this.props.listeners.add(a,"add remove",this.rerender),this._commonGroupInitialized=!0))}componentWillUnmount(){var{commonGroups:e}=this.props.contact;e&&this._commonGroupInitialized&&(this.props.listeners.remove(e,"add remove",this.rerender),this._commonGroupInitialized=!1)}getData(){var e=this.props.contact.commonGroups;return e.length>d.default.INFO_DRAWER_MAX_ROWS&&this.state.collapsed&&(e=e.slice(0,d.default.INFO_DRAWER_MAX_ROWS)),e.map((e=>({itemKey:e.id.toString(),chat:e})))}render(){var e=this.props.contact.commonGroups;if(!e||!e.length)return null;var t,a=s.default.createElement(v.TextSpan,{theme:"section-title"},h.default.n(e.length));if(e.length>d.default.INFO_DRAWER_MAX_ROWS&&this.state.collapsed){var l=e.length-d.default.INFO_DRAWER_MAX_ROWS,i=s.default.createElement(m.default,{theme:"transparent"},s.default.createElement(g.default,{name:"down"}));t=s.default.createElement(n.default,{image:i,theme:"drawer-list",primary:h.default.t(845,{count:l,_plural:l}),onClick:this.handleShowMore})}return s.default.createElement(u.default,{a8nText:"section-common-groups",title:h.default.t(1819),subtitle:a},s.default.createElement(f.default,{flatListController:this.props.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:this.getData(),renderItem:this.renderItem}),t)}}_.CONCERNS={contact:["commonGroups"]},_.displayName="CommonGroupsWell";var C=(0,p.default)((0,E.default)(_,_.CONCERNS));t.default=C},11563:(e,t,a)=>{"use strict";var l=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(81109)),n=l(a(67294)),r=a(87577),o=i(a(20333)),d=i(a(63731)),u=i(a(60937)),c=a(21984),f=i(a(87714)),h=a(84442),p=i(a(57984)),m=i(a(19049)),E=i(a(18917)),g=i(a(97420)),v=i(a(83274)),_=i(a(58743)),C=i(a(58293)),M=a(28377),S=i(a(97978)),P=l(a(27890)),T=i(a(3395)),N=i(a(16998)),I=i(a(34727)),b=i(a(61376)),y=i(a(31763)),k=l(a(85002)),A=i(a(25404)),O=i(a(98712)),w=i(a(13666)),x=a(66274),R=i(a(12063)),D=i(a(60246)),L=a(53615),B=i(a(28204)),F=i(a(44216)),G=i(a(66761)),V=i(a(93883)),U=i(a(48878)),H=i(a(33229)),W=i(a(39950)),j=i(a(5148)),q=i(a(72823)),K=i(a(23045)),Y=i(a(20254)),z=a(66248),X=i(a(34498)),Z=i(a(52206)),$=i(a(77723)),J=a(80493),Q=a(46748),ee=i(a(87642)),te=i(a(4631)),ae=a(3421),le=i(a(82286)),ie=i(a(2812)),se=i(a(62745)),ne=a(45739),re=i(a(24792)),oe=i(a(24278)),de=i(a(86981)),ue=a(42816),ce=a(43881),fe=a(7315),he=a(56726),pe=i(a(3859)),me=i(a(62579)),Ee=a(78572),ge=a(92499),ve=i(a(38804)),_e=i(a(54001));class Ce extends n.Component{constructor(e){super(e),this.flatListController=new R.default,this._handleBlocklistChange=()=>{this.state.contactIsBlocked!==!!o.default.get(this.props.contact.id)&&this.setState({contactIsBlocked:!!o.default.get(this.props.contact.id)})},this.handleVerificationClick=()=>{this.props.onVerification()},this._handleDeleteChat=()=>{var e=E.default.assertGet(this.props.contact.id);g.default.deleteOrExitChat(e)},this.handleBlockContact=()=>{var e=n.default.createElement(K.default,{contact:this.props.contact});g.default.openModal(n.default.createElement(_.default,{onOK:this.blockContact,okText:G.default.t(284),onCancel:()=>g.default.closeModal(),cancelText:G.default.t(1694)},n.default.createElement(V.default,{id:286,params:{contact:e}})))},this.handleReportSpam=()=>{g.default.openModal(n.default.createElement($.default,{isBusiness:this.props.contact.isBusiness,isGroupChat:!1,onReport:this.reportSpam,onReportBlockClear:this.reportSpamBlockClear,onCancel:()=>g.default.closeModal()}))},this.reportSpam=()=>{var e=E.default.get(this.props.contact.id);e&&(0,Q.sendSpamReport)(e,ae.SpamFlow.Account),g.default.closeModal()},this.reportSpamBlockClear=()=>{var e=E.default.get(this.props.contact.id);e&&(0,Q.sendSpamBlockClear)(e,ae.SpamFlow.Block),g.default.closeModal()},this.handleUnblockContact=()=>{var e=n.default.createElement(K.default,{contact:this.props.contact});g.default.openModal(n.default.createElement(_.default,{okText:G.default.t(1500),onOK:this.unblockContact,cancelText:G.default.t(1694),onCancel:()=>g.default.closeModal()},n.default.createElement(V.default,{id:1501,params:{contact:e}})))},this.blockContact=()=>{(0,r.blockContact)(this.props.contact),g.default.closeModal()},this.unblockContact=()=>{(0,r.unblockContact)(this.props.contact),g.default.closeModal()},this.handleClose=()=>{this.props.onClose?this.props.onClose():this.props.uim.uie.requestDismiss()},this._handleViewPicture=e=>{if(this._canViewPicture){var t=e.target;g.default.openModalMedia(n.default.createElement(Y.default,{contact:this.props.contact,profilePicThumb:this.props.contact.getProfilePicThumb(),animateBorderRadius:!0,getZoomNode:e=>{e(t)}}),{transition:"profile-viewer",uim:this.props.uim})}},this._handleOpenStatus=()=>{(0,c.logStatusClick)(this.props.contact.id,(0,z.getProductCatalogSessionId)(this.context))},this._handleDetailImageLoad=()=>{this._canViewPicture=!0},this._canViewPicture=!1,this.state={contactIsBlocked:!!o.default.get(e.contact.id),scrollDepth:100}}componentDidMount(){this.props.listeners.add(o.default,"add remove reset sync",this._handleBlocklistChange);var{contact:e}=this.props;e.businessProfile&&!e.businessProfile.stale&&e.businessCatalog&&p.default.findCarouselCatalog(e.id).catchType(x.ServerStatusCodeError,(()=>{__LOG__(3)`Failed to fetch product catalog in contact drawer from server`})),D.default.supportsFeature(D.default.F.MD_BACKEND)&&(0,fe.getFanOutList)([e.id,(0,he.assertGetMe)()]).then((e=>{(0,ue.ensureE2ESessions)(e)}));var{session:t}=(0,z.getProductCatalogContext)(this.context);t.isAccidental()?g.default.setDrawerContext("right",(0,z.buildProductCatalogContext)(new X.default,(0,M.getMaybeBizPlatformForLogging)(e.id.toString()),j.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_PROFILE)):e.isBusiness&&(0,L.canSeeBizProfileV3)()&&(0,c.logProfileImpression)(e.id,(0,z.getProductCatalogSessionId)(this.context))}componentWillUnmount(){var{contact:e}=this.props,{session:t}=(0,z.getProductCatalogContext)(this.context);t.isAccidental()||e.isBusiness&&(0,L.canSeeBizProfileV3)()&&(0,c.logProfileExit)(e.id,(0,z.getProductCatalogSessionId)(this.context),this.state.scrollDepth)}_shouldRenderCatalog(){var{contact:e}=this.props;return!!(e&&e.isBusiness&&e.businessProfile)&&!!e.businessCatalog}_renderBusinessProfileTopCard(){return this.props.contact.businessProfile?n.default.createElement(S.default,{contact:this.props.contact,onProfilePicLoad:this._handleDetailImageLoad,onProfilePicClick:this._handleViewPicture,onOpenStatus:this._handleOpenStatus,businessProfile:this.props.contact.businessProfile,onProductCatalog:this.props.onProductCatalog}):null}_renderTopCard(){var{contact:e}=this.props;if((0,L.canSeeBizProfileV3)()&&e.isBusiness)return this._renderBusinessProfileTopCard();var t=E.default.get(e.id),a=!e.name&&e.notifyName?n.default.createElement("div",{className:C.default.nameSecondary},n.default.createElement(ne.TextSpan,{theme:"muted"},n.default.createElement(O.default,{className:C.default.screenName,direction:"auto",text:e.notifyName,selectable:!0}))):null,l=e.showBusinessCheckmarkAsSecondary&&D.default.supportsFeature(D.default.F.VNAME_V_2)?n.default.createElement("div",{className:C.default.businessVname},n.default.createElement(O.default,{text:e.verifiedName,direction:"auto"}),n.default.createElement("div",{className:C.default.icon},n.default.createElement(se.default,{name:"psa-verified"}))):null,i=t&&t.presence?n.default.createElement(re.default,{contact:e,presence:t.presence,chatstate:t.presence.chatstate,location:"info"}):null;return n.default.createElement(A.default,{theme:"padding-large"},n.default.createElement("div",{className:C.default.avatar},n.default.createElement(P.default,{id:e.id,size:P.DETAIL_IMAGE_SIZE.LARGE,loader:!0,onLoad:this._handleDetailImageLoad,onClick:this._handleViewPicture,quality:P.DETAIL_IMAGE_QUALITY.HIGH})),n.default.createElement(ne.TextHeader,{level:"2",theme:"large"},n.default.createElement(K.default,{contact:e,selectable:!0,showBusinessCheckmark:e.showBusinessCheckmarkAsPrimary})),a,n.default.createElement("div",{className:C.default.nameSecondary},n.default.createElement(ne.TextSpan,{theme:"muted"},l),n.default.createElement(ne.TextSpan,{theme:"muted"},i)),n.default.createElement(F.default,{labels:e.labels}))}_handleScroll(e){var t=Math.floor(100*(1+e.currentTarget.scrollTop/e.currentTarget.offsetHeight));t>this.state.scrollDepth&&this.setState({scrollDepth:t})}renderProductCatalogSection(){if(!this._shouldRenderCatalog())return null;var{contact:e,onProductCatalog:t,onProductDetail:a}=this.props,l=p.default.get(e.id);if(!l)return null;var i="",s=!1;(0,L.canSeeBizProfileV3)()&&(i=G.default.t(484),s=!0);var{session:r}=(0,z.getProductCatalogContext)(this.context);return r.isAccidental()?null:(0,h.hasShop)(e.businessProfile)?n.default.createElement(te.default,{businessProfile:e.businessProfile,catalog:l,subtitle:i,hideIncompleteRows:s}):n.default.createElement(m.default,{onProductDetail:a,onProductCatalog:t,catalog:l,subtitle:i,hideIncompleteRows:s,shouldLog:!0})}render(){var e,t=this.props.contact,a=n.default.createElement(v.default,{contact:this.props.contact,onClose:this.handleClose,flatListController:this.flatListController}),l=E.default.get(t.id);l&&(e=n.default.createElement(A.default,null,n.default.createElement(b.default,{a8nText:"li-delete-chat",icon:n.default.createElement(se.default,{name:"delete"}),color:"danger",onClick:this._handleDeleteChat},G.default.t(607))));var i=null;i=this.state.contactIsBlocked?n.default.createElement(A.default,null,n.default.createElement(b.default,{a8nText:"li-unblock",color:"success",icon:n.default.createElement(se.default,{name:"settings-blocked",directional:!0}),onClick:this.handleUnblockContact},G.default.t(1500))):n.default.createElement(A.default,null,n.default.createElement(b.default,{a8nText:"li-block",color:"danger",icon:n.default.createElement(se.default,{name:"settings-blocked",directional:!0}),onClick:this.handleBlockContact},G.default.t(284)));var s=n.default.createElement(A.default,null,n.default.createElement(b.default,{a8nText:"li-report-spam",color:"danger",icon:n.default.createElement(se.default,{name:"thumbs-down",directional:!0}),onClick:this.handleReportSpam},t.isBusiness?G.default.t(1318):G.default.t(1321))),r=null;if(this.props.onMediaGallery&&l){var o=this.props.onMediaGallery,c=n.default.createElement(se.default,{className:C.default.chevron,name:"chevron-right-alt",directional:!0}),h=G.default.t(1026);r=n.default.createElement(A.default,{a8nText:"section-media",title:h,titleOnClick:o,subtitle:c,theme:"padding"},n.default.createElement(W.default,{chat:l,mediaMsgs:l.getMediaMsgs()}))}var p=null;D.default.supportsFeature(D.default.F.LIVE_LOCATIONS)&&l&&(p=n.default.createElement(H.default,{chat:l,onClick:this.props.onLiveLocation}));var m=null,g=null;(0,L.canSeeBizProfileV3)()?g=this.renderProductCatalogSection():m=this.renderProductCatalogSection();var _=l&&l.mute.canMute()?n.default.createElement(q.default,{chat:l,mute:l.mute,settings:ee.default}):null,M=null;if(this.props.onStarred){var S=n.default.createElement(se.default,{className:C.default.chevron,name:"chevron-right-alt",directional:!0});M=n.default.createElement(N.default,{a8nText:"block-starred-messages",side:S,onClick:this.props.onStarred},n.default.createElement(ne.TextSpan,{theme:"title"},G.default.t(524)))}var P=l&&l.shouldShowEphemeralSetting()?n.default.createElement(w.default,{onClick:this.props.onEphemeral,chat:l}):null,y=null,O=l&&l.getReceivedVcardMsgs();if(D.default.supportsFeature(D.default.F.INDEX_RECEIVED_VCARD)&&O&&O.length){var x=n.default.createElement(se.default,{className:C.default.chevron,name:"chevron-right-alt",directional:!0});y=n.default.createElement(N.default,{a8nText:"block-contact-card",side:x,onClick:this.props.onContactCard},n.default.createElement(ne.TextSpan,{theme:"title"},G.default.t(577,{_plural:O.length})))}var R=D.default.supportsFeature(D.default.F.MD_BACKEND)?n.default.createElement(Me,{reducedPrivacyMode:(0,ce.getReducedPrivacyMode)(this.props.contact.privacyMode),onVerificationClick:this.handleVerificationClick,contactId:this.props.contact.id}):null,B=null;(_||M||P||y||R)&&(B=n.default.createElement(A.default,null,_,M,P,y,R));var V,U,j=n.default.createElement(N.default,{multiline:!0},n.default.createElement(ne.TextSpan,{theme:"title"},n.default.createElement(ie.default,{id:t.id}))),K=n.default.createElement(N.default,null,n.default.createElement(J.SelectableSpan,{dir:"auto",selectable:!0},n.default.createElement(ne.TextSpan,{theme:"title"},(0,oe.default)(t.id)))),Y=n.default.createElement(A.default,{a8nText:"section-about-and-phone-number"},n.default.createElement("div",{className:C.default.titleAbout},n.default.createElement(ne.TextSpan,{theme:"section-title"},G.default.t(578))),j,K),z=this._renderTopCard(),X=null,Z=void 0;return t.isBusiness&&t.businessProfile&&((0,L.canSeeBizProfileV3)()&&t.businessProfile?(X=n.default.createElement(u.default,{businessProfile:t.businessProfile,contact:t}),V=n.default.createElement(d.default,{contact:t}),t.labels&&t.labels.length>0&&(U=n.default.createElement(A.default,{theme:"padding"},n.default.createElement(F.default,{labels:t.labels,theme:"standalone"}))),Z=this._handleScroll.bind(this)):t.businessProfile&&(X=n.default.createElement(f.default,{contact:t,businessProfile:t.businessProfile}))),n.default.createElement(T.default,{key:"contact-info-modal",theme:"striped"},n.default.createElement(k.default,{title:G.default.t(1706),type:k.DRAWER_HEADER_TYPE.SMALL,onCancel:this.handleClose}),n.default.createElement(I.default,{flatListControllers:[this.flatListController],onScroll:Z},n.default.createElement("section",{className:C.default.body},z,V,U,g,X,p,m,r,B,Y,null,a,i,s,e)))}}function Me({reducedPrivacyMode:e,onVerificationClick:t,contactId:a}){var l=me.default.isVoiceCallEnabled()||me.default.isVideoCallEnabled()?G.default.t(1710):G.default.t(1709);if(de.default.bspSystemMessageEnabled){var{title:i,text:r,onClick:o}=function(e,t){if((0,_e.default)(t.user))return{text:G.default.t(1472),title:G.default.t(2039),onClick:()=>{(0,ve.default)(G.default.t(1470),(0,Ee.getSupportChatSafetyFaqUrl)(),G.default.t(1471))}};switch(e){case ce.ReducedPrivacyMode.E2EE:return(0,s.default)({},null);case ce.ReducedPrivacyMode.BSP:return{text:G.default.t(2031),title:G.default.t(2039),onClick:()=>{(0,ve.default)((0,ge.formatBspModalText)(),(0,Ee.getE2EEnterpriseFaqUrl)())}};case ce.ReducedPrivacyMode.FB:return{text:G.default.t(2032),title:G.default.t(2039),onClick:()=>{(0,ve.default)((0,ge.formatFbModalText)(),(0,Ee.getE2EEnterpriseFaqUrl)())}}}}(e,a);return n.default.createElement(pe.default,{title:i,text:null!=r?r:l,onClick:null!=o?o:t})}return n.default.createElement(pe.default,{onClick:t,text:l})}Ce.contextType=y.default,Ce.CONCERNS={contact:["id","formattedName","formattedUser","formattedShortName","isBusiness","isEnterprise","isMyContact","commonGroups","businessProfile","showBusinessCheckmarkAsPrimary","showBusinessCheckmarkAsSecondary","verifiedName","verifiedLevel","name","notifyName","labels","businessCatalog","isContactBlocked","isMe","statusMute","privacyMode"]},Ce.displayName="ContactInfoDrawer";var Se=(0,B.default)((0,Z.default)((0,U.default)((0,le.default)(Ce,Ce.CONCERNS))));t.default=Se},97978:(e,t,a)=>{"use strict";var l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({contact:e,businessProfile:t,onOpenStatus:a,onProductCatalog:l,onProfilePicLoad:h,onProfilePicClick:p}){var m,{businessHours:E,categories:g}=(0,f.default)(t,["businessHours","categories"]),v=i.default.createElement(n.default,{contact:e});null!=g&&g.length>0&&(m=i.default.createElement("div",{className:o.default.categories},g.map((e=>e.localized_display_name)).join(u.default.t(671))));var _=E?i.default.createElement(c.default,{hours:E}):null;return i.default.createElement(d.default,{className:o.default.noPaddingBottom,theme:"padding"},i.default.createElement(r.default,{contact:e,onClick:p,onOpenStatus:a,onLoad:h}),i.default.createElement("div",{className:o.default.info},v,m,_,i.default.createElement(s.default,{contact:e,onProductCatalog:l})))};var i=l(a(67294)),s=l(a(50345)),n=l(a(90900)),r=l(a(74600)),o=l(a(78857)),d=l(a(25404)),u=l(a(66761)),c=l(a(30193)),f=l(a(53233))},69910:(e,t,a)=>{"use strict";var l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=l(a(11563))},30193:(e,t,a)=>{"use strict";var l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{hours:t}=e,a=function(e){switch(e.status){case o.BUSINESS_OPEN_STATUS.OPEN_24H:return n.default.t(371,{open:`<span class="${r.default.open}">${n.default.t(369)}</span>`});case o.BUSINESS_OPEN_STATUS.OPEN_APPOINTMENT:return n.default.t(372,{open:`<span class="${r.default.open}">${n.default.t(369)}</span>`});case o.BUSINESS_OPEN_STATUS.OPEN:if(e.openUntil&&e.additionalOpen&&e.additionalClose)return n.default.t(376,{open:`<span class="${r.default.open}">${n.default.t(369)}</span>`,time:d(e.openUntil),additionalOpenTime:d(e.additionalOpen),additionalCloseTime:d(e.additionalClose)});if(e.openUntil)return n.default.t(375,{open:`<span class="${r.default.open}">${n.default.t(369)}</span>`,time:d(e.openUntil)});break;case o.BUSINESS_OPEN_STATUS.CLOSED:return e.opensAt?n.default.t(361,{closed:`<span class="${r.default.closed}">${n.default.t(360)}</span>`,time:d(e.opensAt)}):`<span class="${r.default.closed}">${n.default.t(360)}</span>`;case o.BUSINESS_OPEN_STATUS.CLOSED_TODAY:return`<span class="${r.default.closed}">${n.default.t(362)}</span>`}return null}((0,o.getBusinessOpenState)(t));if(null==a)return null;var l=i.default.sanitize(a);return s.default.createElement("div",{className:r.default.openStatus,dangerouslySetInnerHTML:{__html:l}})};var i=l(a(27856)),s=l(a(67294)),n=l(a(66761)),r=l(a(32201)),o=a(30449);function d(e){return null==e?"":e.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})}},3859:(e,t,a)=>{"use strict";var l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(s.default.supportsFeature(s.default.F.MD_BACKEND)){var t,{onClick:a,text:l}=e,c=i.default.createElement(r.default,{name:"lock",className:d.default.icon});return i.default.createElement(o.default,{onClick:a,side:c,multiline:!0},i.default.createElement("div",{className:d.default.header},i.default.createElement(n.TextSpan,{theme:"title"},null!==(t=e.title)&&void 0!==t?t:u.default.t(1737))),i.default.createElement(n.TextDiv,{theme:"muted"},l))}return null};var i=l(a(67294)),s=l(a(60246)),n=a(45739),r=l(a(62745)),o=l(a(16998)),d=l(a(13474)),u=l(a(66761))},91571:(e,t,a)=>{"use strict";var l=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67154)),n=i(a(48926)),r=l(a(67294)),o=i(a(62067)),d=i(a(96651)),u=i(a(54718)),c=i(a(79274)),f=i(a(18917)),h=i(a(56656)),p=i(a(97420)),m=i(a(58743)),E=i(a(46274)),g=i(a(3395)),v=i(a(16998)),_=i(a(34727)),C=i(a(61376)),M=l(a(85002)),S=i(a(25404)),P=i(a(59474)),T=i(a(4319)),N=i(a(98712)),I=i(a(29594)),b=i(a(13666)),y=l(a(92246)),k=l(a(47060)),A=i(a(12063)),O=a(56726),w=i(a(60246)),x=i(a(13648)),R=i(a(94319)),D=i(a(28204)),L=a(85371),B=i(a(44216)),F=i(a(66761)),G=l(a(31667)),V=i(a(48878)),U=i(a(33229)),H=i(a(39950)),W=a(47494),j=i(a(72823)),q=a(23045),K=i(a(46790)),Y=i(a(40794)),z=i(a(10839)),X=a(24285),Z=i(a(52206)),$=i(a(77723)),J=i(a(51432)),Q=a(46748),ee=i(a(86981)),te=a(78091),ae=a(86689),le=i(a(87642)),ie=a(3421),se=i(a(82286)),ne=a(79665),re=i(a(80173)),oe=i(a(62745)),de=a(45739),ue=l(a(51231)),ce=l(a(9931)),fe=i(a(47469)),he=i(a(1869)),pe=i(a(43501)),me=a(77830),Ee=i(a(3859)),ge=i(a(62579)),ve=a(19161),_e=(0,ce.genId)("max_participant_toast");class Ce extends r.Component{constructor(e){var t;super(e),t=this,this._participantFlatListController=new A.default,this._pendingParticipantFlatListController=new A.default,this._setRefContainer=e=>{this._refContainer=e},this._updateGroupDescOnModelChange=()=>{this.props.groupMetadata&&this.setState({groupDesc:this.props.groupMetadata.desc})},this.handleImageSet=(e,t)=>{var a=this.props.profilePicThumb;this.setState({pendingPhoto:!0}),(e&&t?(0,X.setProfilePic)(a,e,t):(0,X.deleteProfilePic)(a)).checkpoint(this.props.rejectOnUnmount()).catchType(y.Unmount,(()=>{})).catchType(y.ActionError,(()=>{__LOG__(3)`GroupInfoDrawer: failed to set/delete group image`,this.setState({resetPhotoPicker:!this.state.resetPhotoPicker})})).finally((()=>{this.setState({pendingPhoto:!1})}))},this.handleParticipantClick=(e,t)=>{pe.default.equals((0,O.getMaybeMeUser)(),t.id)||f.default.find(t.id).then((e=>{p.default.openChatFromUnread(e).then((t=>{t&&p.default.focusChatTextInput(e)}))}))},this._menuEnabled=e=>{var t=this.props.groupMetadata.participants,a=t.get(e.id);return!!a&&(t.canPromote(a)||t.canRemove(a)||t.canVerifyIdentity(a))},this.handleDemoteAdmin=e=>{e.contact.pendingAction++,(0,W.demoteParticipants)(this.props.chat,[e]).then((()=>{e.contact.pendingAction--})),this.setState({contextMenu:null})},this.handleParticipantMenu=(e,t)=>{var a=this.props.groupMetadata.participants,l=a.assertGet(t.id);if(this._menuEnabled(t)){var i=[];if(a.canPromote(l)){var s=this._confirmParticipantPromote.bind(this,l);i.push(r.default.createElement(P.default,{a8n:"mi-grp-promote-admin",key:"promote",action:s},F.default.t(1034)))}if(a.canRemove(l)){var n=this._confirmParticipantRemove.bind(this,l);i.push(r.default.createElement(P.default,{a8n:"mi-grp-remove-participant",key:"remove",action:n},F.default.t(1039)))}if(w.default.supportsFeature(w.default.F.GROUPS_V_3)&&a.canDemote(l)){var o=this.handleDemoteAdmin.bind(this,l);i.push(r.default.createElement(P.default,{a8n:"mi-grp-verify-identify",key:"demote-admin",action:o},F.default.t(638)))}if(w.default.supportsFeature(w.default.F.MD_BACKEND)&&a.canVerifyIdentity(l)){var d=this._handleVerifyIdentity.bind(this,l);i.push(r.default.createElement(P.default,{a8n:"mi-grp-verify-identify",key:"verify-identity",action:d},F.default.t(1993)))}e.event&&e.event.persist(),this.setState({contextMenu:{contactId:t.id,menu:i,anchor:e.anchor,event:e.event}})}},this.closeContextMenu=()=>{this.setState({contextMenu:null})},this._confirmParticipantRemove=e=>{var t=this.handleParticipantRemove.bind(this,e,!0),a=F.default.t(563,{participant:e.contact.formattedName,subject:this.props.contact.name});p.default.openModal(r.default.createElement(m.default,{onOK:t,okText:F.default.t(1310),onCancel:()=>p.default.closeModal(),cancelText:F.default.t(1694)},r.default.createElement(N.default,{text:a})))},this.handleParticipantRemove=(e,t)=>{e.contact.pendingAction++,(0,W.removeParticipants)(this.props.chat,[e]).then((()=>{e.contact.pendingAction--})),t&&p.default.closeModal()},this._confirmParticipantPromote=e=>{var t=this.handleParticipantPromote.bind(this,e,!0),a=F.default.t(562,{participant:e.contact.formattedName,subject:this.props.contact.name});p.default.openModal(r.default.createElement(m.default,{onOK:t,okText:F.default.t(1034),onCancel:()=>p.default.closeModal(),cancelText:F.default.t(1694)},r.default.createElement(N.default,{text:a})))},this.handleParticipantPromote=(e,t)=>{e.contact.pendingAction++,(0,W.promoteParticipants)(this.props.chat,[e]).then((()=>{e.contact.pendingAction--})),t&&p.default.closeModal()},this._handleVerifyIdentity=e=>{this.props.onVerification&&this.props.onVerification(e.contact)},this._openAddGroupParticipantFlow=()=>{var{chat:e}=this.props;if(this.props.groupMetadata.participants.length>=ee.default.maxParticipants){var t=F.default.t(100,{max:ee.default.maxParticipants});p.default.openToast(r.default.createElement(ce.default,{msg:t,id:_e}))}else{var a=w.default.supportsFeature(w.default.F.GROUPS_V_3)?r.default.createElement(u.default,{chat:(0,ne.unproxy)(e),pushTransition:"none",popTransition:"none"}):r.default.createElement(d.default,{chat:(0,ne.unproxy)(e),pushTransition:"none",popTransition:"none"});p.default.openModal(a,{transition:"modal-flow"})}},this._openParticpantSearch=()=>{p.default.openModal(r.default.createElement(R.default,{chat:(0,ne.unproxy)(this.props.chat),onParticipantPromote:this.handleParticipantPromote,onParticipantRemove:this.handleParticipantRemove,onDemoteAdmin:this.handleDemoteAdmin}),{transition:"modal-flow"})},this.handleClose=()=>{this.props.onClose?this.props.onClose():this.props.uim.uie.requestDismiss()},this._handleExitOrDeleteGroup=()=>{p.default.deleteOrExitChat(this.props.chat)},this._handleGroupDescChange=e=>{this.setState({groupDesc:e})},this._handleSetSubject=function(){var e=(0,n.default)((function*(e){var a=(0,I.default)(e);a!==t.props.contact.name&&(yield(0,ae.setGroupSubject)(t.props.chat,a).catchType(y.Unmount,(()=>{})).catch((()=>{__LOG__(3)`group_info_drawer:onSetSubject failed`})))}));return function(){return e.apply(this,arguments)}}(),this._handleSetDescription=()=>{var{chat:e,groupMetadata:t}=this.props;if(t.canSetDescription()){var a=this.state.groupDesc||"",l=a.match(/\r\n/gm)?"\r\n":"\n",i=new RegExp(`^(${l}{2,})([^\n])`,"gm");a=a.replace(i,`${l}$2`);var s=(0,I.default)(a||"");if(s===t.desc)return this.setState({groupDesc:s});this.setState({pendingDesc:!0}),(0,te.setGroupDesc)(e,s).then((()=>{this.setState({groupDesc:t.desc,pendingDesc:!1})})).catchType(y.Unmount,(()=>{})).catch((()=>{__LOG__(3)`group_info_drawer:onSetDescription failed`,this.setState({groupDesc:this.props.groupMetadata.desc,pendingDesc:!1})}))}},this._handleCancelDesc=()=>{this.setState({groupDesc:this.props.groupMetadata.desc})},this.showEncryptionInfoPopup=()=>{p.default.openModal(r.default.createElement(T.default,{chatId:this.props.chat.id,e2eSubtype:"info_encrypted"}))},this._showSecurityInfoPopup=()=>{p.default.openModal(r.default.createElement(T.default,{chat:this.props.chat,chatId:this.props.chat.id,e2eSubtype:"info_encrypted"}))},this.handleShowMore=()=>{this.setState({participantListCollapsed:!1})},this._handleShowMorePendingParticipants=()=>{this.setState({pendingParticipantListCollapsed:!1})},this.renderItem=e=>{var{id:t}=e,a=this.props.groupMetadata.participants.get(t);if(!a)throw new k.UnknownDataError(e);var l=a.contact,i=!!this.state.contextMenu&&pe.default.equals(l.id,this.state.contextMenu.contactId);return r.default.createElement(K.default,{contact:l,participant:a,key:a.id.toString(),onClick:this.handleParticipantClick,contextEnabled:this._menuEnabled.bind(this,l),contextMenu:i,onContext:e=>this.handleParticipantMenu(e,l),showNotifyName:!0,waitIdle:!0})},this.handleReportSpam=()=>{p.default.openModal(r.default.createElement($.default,{isGroupChat:!0,onReport:this.reportSpam,onReportExitClear:this.reportSpamExitClear,onCancel:()=>p.default.closeModal()}))},this.reportSpam=()=>{(0,Q.sendSpamReport)(this.props.chat,ie.SpamFlow.Group),p.default.closeModal()},this.reportSpamExitClear=()=>{(0,Q.sendSpamExitClear)(this.props.chat,ie.SpamFlow.Block),p.default.closeModal()},this._handleDescriptionReadMore=()=>{this.setState({descTruncated:!1})},this._showEditRestrictionInfo=()=>{p.default.openModal(r.default.createElement(m.default,{onOK:()=>p.default.closeModal(),okText:F.default.t(1865)},F.default.t(1222)))},this.revokeGrpV4Invite=e=>{p.default.openModal(r.default.createElement(m.default,{onOK:()=>{p.default.closeModal(),this.props.groupMetadata.revokeGroupV4AddInvite([e.id.toString()]).then((()=>{p.default.openToast(r.default.createElement(ce.default,{msg:F.default.t(1817),id:(0,ce.genId)()}))}))},okText:F.default.t(1924),onCancel:()=>p.default.closeModal(),cancelText:F.default.t(1694)},r.default.createElement(N.default,{text:F.default.t(857,{participant:e.contact.formattedName})})))},this._renderPendingParticipantItem=e=>{var{id:t}=e,a=this.props.groupMetadata.pendingParticipants.get(t);if(!a)throw new k.UnknownDataError(e);var l=a.contact;return r.default.createElement(K.default,{contact:l,participant:a,key:a.id.toString(),contextEnabled:()=>!0,contextMenu:!0,onContext:e=>this._handlePendingParticipantMenu(e,l),showNotifyName:!0,isPendingParticipant:!0,waitIdle:!0})},this._handlePendingParticipantMenu=(e,t)=>{var a=this.props.groupMetadata.pendingParticipants.assertGet(t.id),l=[r.default.createElement(P.default,{a8n:"mi-grp-promote-admin",key:"promote",action:this.revokeGrpV4Invite.bind(this,a)},F.default.t(1354))];e.event&&e.event.persist(),this.setState({contextMenu:{contactId:t.id,menu:l,anchor:e.anchor,event:e.event}})};var{groupMetadata:{desc:a,participants:l,pendingParticipants:i},showFullGroupDescription:s}=this.props;this.state={pendingDesc:!1,pendingPhoto:!1,contextMenu:null,groupDraftSubject:null,groupDesc:a,descTruncated:!s&&!!(a&&a.length>30),participantListCollapsed:l.length>E.default.INFO_DRAWER_MAX_ROWS,pendingParticipantListCollapsed:i.length>E.default.INFO_DRAWER_MAX_ROWS,resetPhotoPicker:!1}}componentDidMount(){var e=this.props.groupMetadata;w.default.supportsFeature(w.default.F.MD_BACKEND)&&(0,ve.queryAndUpdateGroupMetadataById)(e.id),w.default.supportsFeature(w.default.F.GROUPS_V_4_JOIN_PERMISSION)&&e.queryGroupV4PendingInvite(),this.props.listeners.add(e.participants,"add remove reset sort change:isAdmin change:isSuperAdmin",(()=>{this.forceUpdate()})),this.props.listeners.add(e.pendingParticipants,"add remove reset",(()=>{this.forceUpdate()})),this.props.listeners.add(e,"change:desc",(()=>{this._updateGroupDescOnModelChange()})),this.ensureParticipantsSorted(),w.default.supportsFeature(w.default.F.MD_BACKEND)&&this.props.scrollToParticipantList&&this._refContainer&&(0,me.scrollIntoViewIfNeeded)(this._refContainer,!1)}componentDidUpdate(){this.ensureParticipantsSorted()}ensureParticipantsSorted(){this.props.groupMetadata.participants.ensureSorted(),this.props.groupMetadata.pendingParticipants.ensureSorted()}getData(){var e,t=[],a=[],l=this.props.groupMetadata.participants;l.forEach((l=>{l.contact.isMe?e=l:l.isAdmin?t.push(l):a.push(l)}));var i=[];return e&&i.push(e),i=i.concat(t,a),l.length>E.default.INFO_DRAWER_MAX_ROWS&&this.state.participantListCollapsed&&(i=i.slice(0,E.default.INFO_DRAWER_MAX_ROWS)),i.map((e=>({itemKey:e.id.toString(),id:e.id})))}_getPendingParticipantListData(){var e=this.props.groupMetadata.pendingParticipants.toArray(),t=[...e];return e.length>E.default.INFO_DRAWER_MAX_ROWS&&this.state.pendingParticipantListCollapsed&&(t=t.slice(0,E.default.INFO_DRAWER_MAX_ROWS)),t.map((e=>({itemKey:e.id.toString(),id:e.id})))}_getTitle(){return ee.default.productMediaAttachments?F.default.t(1027):F.default.t(1026)}render(){var e,t,a,l,i,s,n,{chat:d,groupMetadata:u}=this.props,f=r.default.createElement(S.default,null,r.default.createElement(C.default,{a8nText:"li-delete-group",icon:r.default.createElement(oe.default,{name:"exit",directional:!0}),theme:"list-aligned",color:"danger",onClick:this._handleExitOrDeleteGroup},d.isReadOnly?F.default.t(1734):F.default.t(1739)));if(d.isReadOnly||(e=r.default.createElement(S.default,null,r.default.createElement(C.default,{a8nText:"li-report-spam",theme:"list-aligned",color:"danger",icon:r.default.createElement(oe.default,{name:"thumbs-down",directional:!0}),onClick:this.handleReportSpam},F.default.t(1325)))),u.participants.canAdd()&&!u.support){var p=r.default.createElement(J.default,null,r.default.createElement(oe.default,{name:"add-user",directional:!0}));t=r.default.createElement(c.default,{image:p,theme:"drawer-list",primary:F.default.t(217),onClick:this._openAddGroupParticipantFlow})}if(u.participants.iAmAdmin()&&this.props.onGroupInviteLink&&!u.support){var m=r.default.createElement(J.default,null,r.default.createElement(oe.default,{name:"link"}));a=r.default.createElement(c.default,{image:m,theme:"drawer-list",primary:F.default.t(819),onClick:this.props.onGroupInviteLink})}if(u.participants.length>E.default.INFO_DRAWER_MAX_ROWS_IN_COLLAPSED_LIST&&this.state.participantListCollapsed){var P=u.participants.length-E.default.INFO_DRAWER_MAX_ROWS,T=r.default.createElement(J.default,{theme:"transparent"},r.default.createElement(oe.default,{name:"down"}));l=r.default.createElement(c.default,{image:T,theme:"drawer-list",primary:F.default.t(845,{count:P,_plural:P}),onClick:this.handleShowMore})}if(u.pendingParticipants.length>E.default.INFO_DRAWER_MAX_ROWS&&this.state.pendingParticipantListCollapsed&&!w.default.supportsFeature(w.default.F.MD_BACKEND)){var N=u.pendingParticipants.length-E.default.INFO_DRAWER_MAX_ROWS,I=r.default.createElement(J.default,{theme:"transparent"},r.default.createElement(oe.default,{name:"down"}));i=r.default.createElement(c.default,{image:I,theme:"drawer-list",primary:F.default.t(845,{count:N,_plural:N}),onClick:this._handleShowMorePendingParticipants})}if(u.pendingParticipants.length>0&&!w.default.supportsFeature(w.default.F.MD_BACKEND)&&(s=r.default.createElement(k.default,{flatListController:this._pendingParticipantFlatListController,direction:"vertical",forceConsistentRenderCount:!1,data:this._getPendingParticipantListData(),renderItem:this._renderPendingParticipantItem})),u.participants.iAmAdmin()&&w.default.supportsFeature(w.default.F.GROUPS_V_3)&&!u.support){var y=r.default.createElement(oe.default,{className:x.default.chevron,name:"chevron-right-alt",directional:!0});n=r.default.createElement(v.default,{onClick:this.props.onAdminSetting,side:y},r.default.createElement(de.TextSpan,{theme:"title"},F.default.t(843)))}var A,O=r.default.createElement(oe.default,{name:"search",className:x.default.iconSearch}),R=u.participants.length?r.default.createElement(S.default,{onRef:this._setRefContainer,a8nText:"section-participants",title:F.default.t(1867,{count:u.participants.length,_plural:u.participants.length}),titleOnClick:w.default.supportsFeature(w.default.F.GROUPS_V_3)?this._openParticpantSearch:void 0,subtitle:w.default.supportsFeature(w.default.F.GROUPS_V_3)?O:void 0},t,a,r.default.createElement(k.default,{flatListController:this._participantFlatListController,direction:"vertical",forceConsistentRenderCount:!1,data:this.getData(),renderItem:this.renderItem}),l):null;u.participants.iAmAdmin()&&u.pendingParticipants.length>0&&(A=r.default.createElement(S.default,{a8nText:"section-participants",title:F.default.t(849,{number:u.pendingParticipants.length})},s,i));var D=null;if(this.props.onMediaGallery){var V=this.props.onMediaGallery,W=r.default.createElement(oe.default,{className:x.default.chevron,name:"chevron-right-alt",directional:!0}),K=this._getTitle();D=r.default.createElement(S.default,{a8nText:"section-media",title:K,titleOnClick:V,subtitle:W,theme:"padding"},r.default.createElement(H.default,{chat:(0,ne.unproxy)(d),mediaMsgs:d.getMediaMsgs()}))}var X=this.props.contact.profilePicThumb,Z=z.default.GROUP,$=d.isReadOnly||!X.canDelete()&&!X.canSet()||d.isSupportGroup(),Q=r.default.createElement("div",{className:x.default.avatar},r.default.createElement(Y.default,{key:String(this.state.resetPhotoPicker),type:Z,id:this.props.contact.id,attachToChat:!0,pending:this.state.pendingPhoto,startImage:this.props.profilePicThumb.imgFull,readOnly:$,onImageSet:this.handleImageSet})),te=null;this.props.groupMetadata.creation&&(te=r.default.createElement("div",{"data-a8n":o.default.key("group-created-time"),className:x.default.nameSecondary},r.default.createElement(de.TextSpan,{theme:"muted"},h.default.createdStr(this.props.groupMetadata.creation,this.props.chat.isSupportGroup()))));var ae=null;w.default.supportsFeature(w.default.F.LIVE_LOCATIONS)&&(ae=r.default.createElement(U.default,{chat:d,onClick:this.props.onLiveLocation}));var ie=d&&d.shouldShowEphemeralSetting()?r.default.createElement(b.default,{onClick:this.props.onEphemeral,chat:d,groupMetadata:u}):null,se=null;w.default.supportsFeature(w.default.F.MD_BACKEND)&&(se=r.default.createElement(Ee.default,{onClick:this.showEncryptionInfoPopup,text:ge.default.isGroupCallEnabled()?F.default.t(1772):F.default.t(1771)})),this.props.chat.isSupportGroup()&&(se=r.default.createElement(re.default,{onClick:this._showSecurityInfoPopup}));var ce,pe=d.mute.canMute()?r.default.createElement(j.default,{chat:d,mute:d.mute,settings:le.default}):null,me=null;if(this.props.onStarred){var ve=r.default.createElement(oe.default,{className:x.default.chevron,name:"chevron-right-alt",directional:!0});me=r.default.createElement(v.default,{side:ve,onClick:this.props.onStarred},r.default.createElement(de.TextSpan,{theme:"title"},F.default.t(524)))}this.state.contextMenu&&(ce=r.default.createElement(fe.default,{displayName:"ChatContextMenu",escapable:!0,popable:!0,requestDismiss:this.closeContextMenu},r.default.createElement(he.default,{contextMenu:this.state.contextMenu})));var _e,Ce=null;if((pe||me||se||ie)&&(Ce=r.default.createElement(S.default,null,pe,me,ie,se,n)),w.default.supportsFeature(w.default.F.GROUPS_V_3)&&ee.default.groupDescLength>0){var Se=this.state.groupDesc||"",Pe={textLimit:this.state.descTruncated?E.default.GROUP_DESCRIPTION_INFO_PANEL_TRUNC_LENGTH:1/0,readMoreText:F.default.t(1308),onReadMore:this._handleDescriptionReadMore,formatters:this.props.chat.isTrusted()?L.Configuration.TrustedGroupDesc({links:G.findLinks(Se)}):L.Configuration.UntrustedGroupDesc()};_e=r.default.createElement(S.default,{theme:"group-desc-padding",title:F.default.t(808)},r.default.createElement("div",{className:x.default.description},r.default.createElement(ue.default,{a8n:"group-info-drawer-description-title-input",value:Se,emptyValuePlaceholder:F.default.t(215),renderEmojiTextInLockMode:Pe,editable:u.canSetDescription(),pending:this.state.pendingDesc,showRemaining:!0,maxLength:ee.default.groupDescLength,onChange:this._handleGroupDescChange,onSave:this._handleSetDescription,onCancel:this._handleCancelDesc,multiline:!0,editRestrictionInfo:u.restrict?this._showEditRestrictionInfo:void 0,supportsEmoji:!0,lockable:!0,lowProfile:!0,customStyleThemes:[ue.TextInputCustomStyleThemes.groupInfoName],theme:"small"})))}return r.default.createElement(g.default,{key:"contact-info-modal",theme:"striped"},r.default.createElement(M.default,{title:F.default.t(1770),type:M.DRAWER_HEADER_TYPE.SMALL,onCancel:this.handleClose}),r.default.createElement(_.default,{flatListControllers:[this._pendingParticipantFlatListController,this._participantFlatListController]},r.default.createElement("section",{className:x.default.body},null,r.default.createElement(S.default,{theme:"padding-large"},Q,u.support?r.default.createElement(de.TextHeader,{className:x.default.title,level:"2",theme:"large"},r.default.createElement(q.GroupNameClass,{chat:d,groupMetadata:u})):r.default.createElement(Me,{subject:this.props.contact.name,onSave:this._handleSetSubject,textInputProps:{editable:u.canSetSubject(),editRestrictionInfo:u.restrict?this._showEditRestrictionInfo:void 0}}),te,r.default.createElement(B.default,{labels:d.labels})),_e,ae,D,Ce,null,R,A,f,e)),ce)}}function Me(e){var[t,a]=(0,r.useState)(null),[l,i]=(0,r.useState)(!1),o=(0,r.useRef)(!1),d=function(){var l=(0,n.default)((function*(){if(!t||t===e.subject)return o.current=!1,void a(null);i(!0);try{yield e.onSave(t)}finally{o.current=!1,a(null),i(!1)}}));return function(){return l.apply(this,arguments)}}();return r.default.createElement(ue.default,(0,s.default)({a8n:"group-info-drawer-subject-input",value:null!=t?t:e.subject,pending:l,showRemaining:!0,validate:e=>!(!e||!e.trim()),maxLength:ee.default.maxSubject,onBeginEdit:()=>{o.current=!0},onChange:e=>{o.current&&a(e)},onSave:d,onError:()=>{p.default.openModal(r.default.createElement(m.default,{onOK:()=>p.default.closeModal(),okText:F.default.t(1865)},F.default.t(128)))},onCancel:()=>{o.current=!1,a(null)},supportsEmoji:!0,lockable:!0,lowProfile:!0,theme:"large",customStyleThemes:[ue.TextInputCustomStyleThemes.groupInfoName]},e.textInputProps))}Ce.CONCERNS={chat:["isReadOnly","mute","id","pendingAction","liveLocation","labels"],groupMetadata:["id","desc","participants","pendingParticipants","creation","restrict","announce","support"],contact:["name","id","profilePicThumb","pendingAction"],profilePicThumb:["imgFull"]},Ce.displayName="GroupInfoDrawer";var Se=(0,D.default)((0,Z.default)((0,V.default)((0,se.default)(Ce,Ce.CONCERNS))));t.default=Se},94319:(e,t,a)=>{"use strict";var l=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),n=l(a(18917)),r=l(a(97420)),o=l(a(49890)),d=l(a(59474)),u=a(56726),c=l(a(60246)),f=l(a(66761)),h=l(a(48878)),p=l(a(43745)),m=l(a(47469)),E=l(a(1869)),g=l(a(43501));class v extends s.Component{constructor(...e){super(...e),this.state={contextMenu:null},this.openChat=e=>{n.default.find(e).then((e=>{r.default.closeModal(),r.default.openChatFromUnread(e)}))},this.contextMenu=e=>!g.default.equals((0,u.getMaybeMeUser)(),e),this.handleParticipantMenu=(e,t)=>{var a=(0,p.default)(this.props.chat.groupMetadata,"this.props.chat.groupMetadata").participants,l=a.assertGet(t.id),i=[];if(a.canPromote(l)){var n=this.props.onParticipantPromote.bind(null,l,!1);i.push(s.default.createElement(d.default,{a8n:"mi-grp-promote-admin",key:"promote",action:n},f.default.t(1034)))}if(a.canRemove(l)){var r=this.props.onParticipantRemove.bind(null,l,!1);i.push(s.default.createElement(d.default,{a8n:"mi-grp-remove-participant",key:"remove",action:r},f.default.t(1039)))}if(c.default.supportsFeature(c.default.F.GROUPS_V_3)&&a.canDemote(l)){var o=this.props.onDemoteAdmin.bind(this,l);i.push(s.default.createElement(d.default,{a8n:"mi-grp-verify-identify",key:"demote-admin",action:o},f.default.t(638)))}g.default.equals((0,u.getMaybeMeUser)(),l.id)||i.push(s.default.createElement(d.default,{key:"message author",action:this.openChat.bind(null,l.contact.id)},f.default.t(1050,{author:l.contact.formattedName}))),e.anchor||e.event||e.persist(),this.setState({contextMenu:{contactId:t.id,menu:i,anchor:e.anchor,event:e.anchor?void 0:e}})},this.closeContextMenu=()=>{this.setState({contextMenu:null})},this.contextEnabled=()=>!1,this.cancel=()=>{r.default.closeModal()},this.isAdmin=e=>(0,p.default)(this.props.chat.groupMetadata,"this.props.chat.groupMetadata").participants.assertGet(e).isAdmin,this.contactFilter=e=>{var t=this.props.chat.groupMetadata;return!(null==t||!t.participants.get(e.id))}}componentDidMount(){var e,t=null===(e=this.props.chat.groupMetadata)||void 0===e?void 0:e.participants;null!=t&&this.props.listeners.add(t,"add remove reset",(()=>{this.forceUpdate()}))}render(){var e;return this.state.contextMenu&&(e=s.default.createElement(m.default,{displayName:"ChatContextMenu",escapable:!0,popable:!0,requestDismiss:this.closeContextMenu},s.default.createElement(E.default,{contextMenu:this.state.contextMenu}))),s.default.createElement(s.default.Fragment,null,s.default.createElement(o.default,{title:f.default.t(1371),filter:this.contactFilter,onCancel:this.cancel,openContextOnClick:!0,contextEnabled:this.contextEnabled,contextMenu:this.contextMenu,onContext:this.handleParticipantMenu,showNotifyName:!0,listenForAdminChange:!0,participantCollection:(0,p.default)(this.props.chat.groupMetadata,"this.props.chat.groupMetadata").participants}),e)}}v.displayName="GroupParticipantSearch";var _=(0,h.default)(v);t.default=_},10766:(e,t,a)=>{"use strict";var l=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(29521)),n=l(a(67294)),r=a(65627),o=i(a(97420)),d=i(a(46274)),u=i(a(3395)),c=i(a(16998)),f=i(a(34727)),h=l(a(85002)),p=i(a(25404)),m=a(56726),E=i(a(60246)),g=i(a(33019)),v=i(a(76208)),_=i(a(28204)),C=i(a(66761)),M=i(a(48878)),S=a(47494),P=l(a(30399)),T=i(a(86981)),N=i(a(82286)),I=a(45739),b=i(a(43501)),y=({isRestricted:e,onClick:t})=>n.default.createElement(c.default,{onClick:t,multiline:!0},n.default.createElement("div",{className:g.default.header},n.default.createElement(I.TextSpan,{theme:"title"},C.default.t(835))),n.default.createElement(I.TextDiv,{theme:"muted"},e?C.default.t(841):C.default.t(834))),k=({isAnnouncement:e,onClick:t})=>n.default.createElement(c.default,{onClick:t,multiline:!0},n.default.createElement("div",{className:g.default.header},n.default.createElement(I.TextSpan,{theme:"title"},C.default.t(842))),n.default.createElement(I.TextDiv,{theme:"muted"},e?C.default.t(841):C.default.t(834))),A=({isNoFrequentlyForwarded:e,onClick:t})=>{var a=T.default.hfmStringChanges?C.default.t(839):C.default.t(838);return n.default.createElement(c.default,{onClick:t,multiline:!0},n.default.createElement("div",{className:g.default.header},n.default.createElement(I.TextSpan,{theme:"title"},a)),n.default.createElement(I.TextDiv,{theme:"muted"},e?C.default.t(840):C.default.t(837)))};class O extends n.Component{constructor(...e){super(...e),this._openSettingModal=e=>{var{chat:t,groupMetadata:a}=this.props;o.default.openModal(n.default.createElement(v.default,{settingType:e,chat:t,groupMetadata:a}),{transition:"modal",uim:this.props.uim})},this._openAnnouncementSettingModal=()=>{this._openSettingModal(d.default.GROUP_SETTING_TYPE.ANNOUNCEMENT)},this._openRestrictedSettingModal=()=>{this._openSettingModal(d.default.GROUP_SETTING_TYPE.RESTRICT)},this._openNoFrequentlyForwardedSettingModal=()=>{this._openSettingModal(d.default.GROUP_SETTING_TYPE.NO_FREQUENTLY_FORWARDED)},this._getCurrentAdmins=()=>{var{groupMetadata:e}=this.props;return e.participants.filter((e=>e.isAdmin)).map((e=>e.contact))},this._filterParticipants=e=>{var{groupMetadata:t}=this.props;return!!t.participants.get(e.id)},this.isDisabled=e=>{var{groupMetadata:t}=this.props;return b.default.equals(e,t.owner)||(0,m.getMaybeMeUser)().equals(e)},this._openManageAdminModal=()=>{o.default.openModal(n.default.createElement(P.default,{onConfirm:this._updateAdmins,getInitialItems:this._getCurrentAdmins,isDisabled:this.isDisabled,isSelected:this.isDisabled,filter:this._filterParticipants,title:C.default.t(994),useShortName:!0,useAllContacts:!0,listType:P.ListType.PARTICIPANT_MANAGE_MODAL,singleSelectionFooterType:r.FooterType.CONFIRM,multipleSelectionFooterType:r.FooterType.CONFIRM}))},this._updateAdmins=e=>{var{chat:t,groupMetadata:a}=this.props,l=a.participants,i=l.filter((e=>e.isAdmin)),n=(0,s.default)(e,i,((e,t)=>e.id.equals(t.id))).map((e=>l.assertGet(e.id))),r=(0,s.default)(i,e,((e,t)=>e.id.equals(t.id)));n.length>0&&(n.forEach((e=>{e.contact.pendingAction++})),(0,S.promoteParticipants)(t,n).finally((()=>{n.forEach((e=>{e.contact.pendingAction--}))}))),r.length>0&&(r.forEach((e=>{e.contact.pendingAction++})),(0,S.demoteParticipants)(t,r).finally((()=>{r.forEach((e=>{e.contact.pendingAction--}))}))),o.default.closeModal()}}render(){var{groupMetadata:e}=this.props;return n.default.createElement(u.default,{theme:"striped"},n.default.createElement(h.default,{title:C.default.t(843),type:h.DRAWER_HEADER_TYPE.SMALL,onBack:this.props.onClose}),n.default.createElement(f.default,null,n.default.createElement(p.default,{animation:!1},n.default.createElement(y,{onClick:this._openRestrictedSettingModal,isRestricted:e.restrict})),E.default.isEphemeralAllowGroupMembersEnabled()?n.default.createElement("div",{className:g.default.restrictText},n.default.createElement(I.TextSpan,{theme:"muted"},C.default.t(656))):null,n.default.createElement(p.default,{animation:!1},n.default.createElement(k,{onClick:this._openAnnouncementSettingModal,isAnnouncement:e.announce}),T.default.frequentlyForwardedGroupSetting&&E.default.supportsFeature(E.default.F.FREQUENTLY_FORWARDED_SETTING)?n.default.createElement(A,{onClick:this._openNoFrequentlyForwardedSettingModal,isNoFrequentlyForwarded:e.noFrequentlyForwarded}):null),n.default.createElement(p.default,{animation:!1},n.default.createElement(c.default,{onClick:this._openManageAdminModal,multiline:!0},n.default.createElement("div",{className:g.default.header},n.default.createElement(I.TextSpan,{theme:"title"},C.default.t(994)))))))}}O.CONCERNS={chat:["id"],groupMetadata:["restrict","announce","noFrequentlyForwarded","participants","owner"]},O.displayName="GroupAdminSetting";var w=(0,_.default)((0,M.default)((0,N.default)(O,O.CONCERNS)));t.default=w},76208:(e,t,a)=>{"use strict";var l=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{settingType:t}=e,a=(0,f.default)(e.chat,["id"]),l=(0,f.default)(e.groupMetadata,["restrict","announce","noFrequentlyForwarded"]),i=(0,s.useMemo)((()=>{switch(t){case n.default.GROUP_SETTING_TYPE.ANNOUNCEMENT:case n.default.GROUP_SETTING_TYPE.RESTRICT:return[{label:o.default.t(834),value:0},{label:o.default.t(841),value:1}];case n.default.GROUP_SETTING_TYPE.NO_FREQUENTLY_FORWARDED:return[{label:o.default.t(837),value:0},{label:o.default.t(840),value:1}];default:return[]}}),[t]),h=(0,s.useMemo)((()=>{var{restrict:e,announce:a,noFrequentlyForwarded:i}=l;switch(t){case n.default.GROUP_SETTING_TYPE.ANNOUNCEMENT:return a?1:0;case n.default.GROUP_SETTING_TYPE.RESTRICT:return e?1:0;case n.default.GROUP_SETTING_TYPE.NO_FREQUENTLY_FORWARDED:return i?1:0;default:return 0}}),[t,l]),p=(0,s.useMemo)((()=>{switch(t){case n.default.GROUP_SETTING_TYPE.ANNOUNCEMENT:return o.default.t(842);case n.default.GROUP_SETTING_TYPE.RESTRICT:return o.default.t(835);case n.default.GROUP_SETTING_TYPE.NO_FREQUENTLY_FORWARDED:return d.default.hfmStringChanges?o.default.t(839):o.default.t(838);default:return""}}),[t]),m=(0,s.useMemo)((()=>t===n.default.GROUP_SETTING_TYPE.RESTRICT&&r.default.isEphemeralAllowGroupMembersEnabled()?o.default.t(656):null),[t]);return s.default.createElement(c.default,{options:i,initialValue:h,title:p,onSelect:e=>{e!==h&&(0,u.setGroupProperty)(a,t,e).catch((()=>()=>{}))},explanation:m})};var s=i(a(67294)),n=l(a(46274)),r=l(a(60246)),o=l(a(66761)),d=l(a(86981)),u=a(7695),c=l(a(73403)),f=l(a(53233))},33229:(e,t,a)=>{"use strict";var l=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),n=l(a(25404)),r=l(a(66761)),o=l(a(48878)),d=l(a(49397)),u=a(95263),c=l(a(66567)),f=l(a(82286)),h=a(79665),p=l(a(62745)),m=a(45739);class E extends s.Component{constructor(e){super(e),this._updateParticipants=()=>{this.setState({participants:this.getParticipants(this.props.chat)})},this.state={participants:this.getParticipants(e.chat)}}componentDidMount(){var{chat:e}=this.props;e.liveLocationQueried||d.default.getActive(e.id.toString()).then((()=>{e.liveLocationQueried=!0})).catch((()=>{})),this.props.listeners.add((0,h.unproxy)(e),"change:liveLocation",(()=>{var{liveLocation:t}=e;t&&(this._removeParticipantListener(t),this._addParticipantListener(t),this._updateParticipants())}));var{liveLocation:t}=e;t&&this._addParticipantListener(t)}_addParticipantListener(e){this.props.listeners.add(e.participants,"add remove",this._updateParticipants)}_removeParticipantListener(e){this.props.listeners.remove(e.participants,"add remove",this._updateParticipants)}getParticipants(e){var{liveLocation:t}=e;return t?t.participants.toArray():[]}getText(){var e,t,{chat:a}=this.props,{participants:l}=this.state,i=0;if(l.forEach((a=>{a.isMe?e=!0:(t||(t=a.contact),i++)})),a.isGroup)return e?1===l.length?r.default.t(966):r.default.t(965,{count:i,_plural:i}):r.default.t(962,{count:i,_plural:i});if(e){if(1===l.length)return r.default.t(966);if(t)return r.default.t(964,{name:t.formattedShortNameWithNonBreakingSpaces})}else if(t)return r.default.t(961,{name:t.formattedShortNameWithNonBreakingSpaces});return""}render(){var{onClick:e}=this.props;if(!this.state.participants.length)return null;var t=s.default.createElement(p.default,{name:(0,u.liveLocationIcon)(!0)});return s.default.createElement(n.default,{a8nText:"section-live-location",theme:"padding",title:r.default.t(969),titleOnClick:e},s.default.createElement(c.default,{side:t,onClick:e},s.default.createElement(m.TextSpan,{theme:"title"},this.getText())))}}E.CONCERNS={chat:["id","isGroup","liveLocation","liveLocationQueried"]},E.displayName="LiveLocationRow";var g=(0,o.default)((0,f.default)(E,E.CONCERNS));t.default=g},60823:(e,t,a)=>{"use strict";var l=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.TABS=void 0;var s=i(a(52628)),n=i(a(94184)),r=l(a(67294)),o=a(96440),d=i(a(87369)),u=i(a(3395)),c=i(a(34727)),f=l(a(85002)),h=i(a(66761)),p=i(a(87329)),m=i(a(39950)),E=i(a(27356)),g=i(a(24531)),v=i(a(40469)),_=i(a(27471)),C=i(a(86981)),M=i(a(47469)),S=i(a(77923)),P={MEDIA:"media",DOCS:"docs",LINKS:"links",PRODUCTS:"products"};t.TABS=P;class T extends r.Component{constructor(){super(...arguments),this.state={selected:this.props.initialTab,direction:null,selectable:!1},this.handleSelectMessages=()=>{this.state.selectable||this.setState({selectable:!0})},this.handleCancelSelection=()=>{this.state.selectable&&(this.selectedMessages.unsetAll(),this.setState({selectable:!1}))},this.handleMessageSelect=(e,t)=>{this.handleSelectMessages(),this.selectedMessages.setVal(e,t),0===this.selectedMessages.getSelected().length&&this.handleCancelSelection()},this.selectedMessages=new v.default([],(e=>e.id.toString()))}_handleSelectTab(e){var t=(0,s.default)(P).indexOf(this.state.selected),a=(0,s.default)(P).indexOf(e);t!==a&&this.selectedMessages.unsetAll();var l=a>t?"right":"left";this.setState({selected:e,direction:l,selectable:!1})}_getTabs(){var e=[{tab:P.MEDIA,title:h.default.t(1e3)},{tab:P.DOCS,title:h.default.t(639)},{tab:P.LINKS,title:h.default.t(940)}];C.default.productMediaAttachments&&e.push({tab:P.PRODUCTS,title:h.default.t(1300)});var t=e.map((e=>{var t=(0,n.default)(E.default.menuItem,{[E.default.active]:this.state.selected===e.tab});return r.default.createElement("button",{className:t,onClick:this._handleSelectTab.bind(this,e.tab),key:e.tab,title:e.title},e.title)})),a=(0,n.default)(E.default.menuTabsLists,C.default.productMediaAttachments?E.default.fourTabs:E.default.threeTabs);return r.default.createElement("div",{className:a,"data-active-tab":this.state.selected},t)}_getContent(){var e,t=this.props.chat;switch(this.state.selected){case P.MEDIA:e=r.default.createElement(m.default,{chat:t,mediaMsgs:t.getMediaMsgs(),selectable:this.state.selectable,onMessageSelect:this.handleMessageSelect,selectedMessages:this.selectedMessages,fullCollection:!0});break;case P.LINKS:e=r.default.createElement(p.default,{chat:t,linkMsgs:t.getLinkMsgs(),selectable:this.state.selectable,onMessageSelect:this.handleMessageSelect,selectedMessages:this.selectedMessages});break;case P.DOCS:e=r.default.createElement(d.default,{chat:t,docMsgs:t.getDocMsgs(),selectable:this.state.selectable,onMessageSelect:this.handleMessageSelect,selectedMessages:this.selectedMessages});break;case P.PRODUCTS:e=r.default.createElement(_.default,{chat:t,productMsgs:t.getProductMsgs(),selectable:this.state.selectable,onMessageSelect:this.handleMessageSelect,selectedMessages:this.selectedMessages,onProductDetail:this.props.onProductDetail,setScrollOffset:this.props.setProductsScrollOffset,scrollOffset:this.props.productsScrollOffset})}return e}render(){var e=this.props.chat,t=this._getTabs(),a=this._getContent(),l=[P.MEDIA,P.DOCS].includes(this.state.selected),i=this.state.selectable?r.default.createElement(M.default,{displayName:"MediaMultiSelect",escapable:!0,requestDismiss:this.handleCancelSelection},r.default.createElement(g.default,{chat:e,noSortOnForward:!0,theme:"mediaGallery",toastPosition:o.ToastPosition.RIGHT,downloadButton:l,selectedMessages:this.selectedMessages,onCancel:this.handleCancelSelection})):null,s="right"===this.state.direction?"slide-forward":"slide-back";return r.default.createElement(u.default,{theme:"gallery"},r.default.createElement(f.default,{title:" ",onBack:this.props.onBack,type:f.DRAWER_HEADER_TYPE.MULTI_MEDIA_GALLERY}),i,t,r.default.createElement(c.default,{"data-list-scroll-container":!0},r.default.createElement(S.default,{transitionName:s,className:E.default.column},r.default.createElement("div",{className:E.default.multimediaGallery,key:this.state.selected},r.default.createElement("div",{className:E.default.column},a)))))}}t.default=T,T.defaultProps={initialTab:P.MEDIA,productsScrollOffset:0},T.displayName="MediaGalleryDrawer"},5187:(e,t,a)=>{"use strict";var l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,u.default)(e.mediaData,["mediaStage","renderableUrl"]);return s.default.createElement(d.default,{mediaData:t,placeholderRenderer:h},(e=>s.default.createElement(f,{url:e})))};var i=l(a(94184)),s=l(a(67294)),n=l(a(18834)),r=l(a(66761)),o=l(a(8752)),d=l(a(18263)),u=l(a(53233)),c=e=>{e.stopPropagation()};function f({url:e}){return s.default.createElement(n.default,{url:e,className:o.default.mediaViewerAudio,onClick:c,autoPlay:!0,controls:!0},r.default.t(250))}function h(){return s.default.createElement("div",{className:(0,i.default)(o.default.imageAudio,o.default.mediaViewerPlaceholder),onClick:c})}},18686:(e,t,a)=>{"use strict";var l=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),n=l(a(79274)),r=l(a(56656)),o=l(a(97420)),d=l(a(27890)),u=i(a(68770)),c=l(a(59474)),f=l(a(98712)),h=l(a(66761)),p=l(a(48878)),m=l(a(42784)),E=a(46072),g=a(3875),v=l(a(49930)),_=a(46748),C=a(3421),M=l(a(82286)),S=a(79665),P=l(a(62745)),T=l(a(73849));class N extends s.PureComponent{constructor(...e){super(...e),this._refCloseBtn=(0,s.createRef)(),this._getMenuBtns=()=>this.props.msg.isViewOnce?this._getViewOnceMediaMenuBtns():this.props.msgIndexInAlbum>=0?this._getAlbumMediaMenuBtns():this._getNonAlbumMediaMenuBtns(),this._getViewOnceMediaMenuBtns=()=>[s.default.createElement(g.MenuBarItem,{key:"btnViewOnceInfo",icon:s.default.createElement(P.default,{name:"view-once",className:m.default.voIcon}),title:h.default.t(36),onClick:this.props.onViewOnceInfoClick}),this._getDropdownMenuBarItem()],this._getNonAlbumMediaMenuBtns=()=>{var{msg:e}=this.props;return[s.default.createElement(g.MenuBarItem,{key:"btnGoToMsg",icon:s.default.createElement(P.default,{name:"bubble"}),title:h.default.t(801),onClick:this.props.onGoToMsgClick}),e.canStar()?this._getStarMenuBarItem():null,e.canForward()?this._getForwardMenuBarItem():null,s.default.createElement(g.MenuBarItem,{key:"btnDownload",icon:s.default.createElement(P.default,{name:"download"}),title:h.default.t(1690),disabled:!this._isMediaDownloadable(),onClick:this.props.onDownloadClick})].filter(Boolean)},this._getAlbumMediaMenuBtns=()=>{var{msg:e}=this.props;return[e.canReply()?s.default.createElement(g.MenuBarItem,{key:"btnReply",icon:s.default.createElement(P.default,{name:"reply"}),title:h.default.t(1315),onClick:this.props.onReplyClick}):null,e.canStar()?this._getStarMenuBarItem():null,s.default.createElement(g.MenuBarItem,{key:"btnDelete",icon:s.default.createElement(P.default,{name:"delete"}),title:h.default.t(1733),onClick:this.props.onDeleteClick}),e.canForward()?this._getForwardMenuBarItem():null,this._getDropdownMenuBarItem()].filter(Boolean)},this._getStarMenuBarItem=()=>{var e,t,a,{msg:l}=this.props;return l.star?(e=this.props.onUnstarClick,t="unstar-btn",a=h.default.t(1512)):(e=this.props.onStarClick,t="star-btn",a=h.default.t(1432)),s.default.createElement(g.MenuBarItem,{key:t,icon:s.default.createElement(P.default,{name:t}),title:a,onClick:e})},this._getForwardMenuBarItem=()=>s.default.createElement(g.MenuBarItem,{key:"btnForward",icon:s.default.createElement(P.default,{name:"forward"}),title:h.default.t(761),onClick:this.props.openForwardFlow}),this.handlePrivateReplyMessage=()=>{var e=(0,S.unproxy)(this.props.msg);(0,v.default)(e)},this._getDropdownMenuBarItem=()=>{var{msg:e}=this.props,t=[];return(e.canPrivateReply()||e.canPrivateReplyInRestrictedGrp())&&t.push(s.default.createElement(c.default,{key:"private_reply",a8n:"mi-msg-reply",action:this.handlePrivateReplyMessage},h.default.t(1264))),e.isViewOnce?t.push(s.default.createElement(c.default,{key:"dropdownMsgInfo",action:this._handleDropdownViewOnceReportSpam},this._getViewOnceReportTitle())):(e.isSentByMe&&t.push(s.default.createElement(c.default,{key:"dropdownMsgInfo",action:this.props.onMsgInfoClick},h.default.t(1054))),t.push(s.default.createElement(c.default,{key:"dropdownGoToMsg",action:this.props.onGoToMsgClick},h.default.t(801)),s.default.createElement(c.default,{key:"dropdownDownload",action:this.props.onDownloadClick,disabled:!this._isMediaDownloadable()},h.default.t(1690)))),s.default.createElement(g.MenuBarItem,{key:"btnMenu",icon:s.default.createElement(P.default,{name:"menu"}),title:h.default.t(1046)},s.default.createElement(u.default,{type:"dropdown_menu",key:"MediaPanelHeaderDropdown",flipOnRTL:!0,dirX:u.DirX.LEFT},t))},this._isMediaDownloadable=()=>{var{mediaData:e,msg:t}=this.props;return!t.isViewOnce&&(!!e.renderableUrl||e.mediaStage===E.MEDIA_DATA_STAGE.RESOLVED)},this._handleDropdownViewOnceReportSpam=()=>{o.default.openModal(s.default.createElement(T.default,{isBusiness:this.props.msg.senderObj.isBusiness,isGroup:this.props.msg.chat.isGroup,onReport:this._handleReport,onCancel:()=>o.default.closeModal(),title:this._getViewOnceReportTitle()}))},this._handleReport=e=>{var{chat:t}=this.props.msg;t&&(e?t.isGroup?(0,_.sendSpamExitClear)(t,C.SpamFlow.MediaViewer):(0,_.sendSpamBlockClear)(t,C.SpamFlow.MediaViewer):(0,_.sendSpamReport)(t,C.SpamFlow.MediaViewer)),o.default.closeModal()}}_getViewOnceReportTitle(){var{msg:e}=this.props;return e.chat.isGroup?h.default.t(1325):h.default.t(1324,{contactInfo:e.senderObj.displayName})}componentDidMount(){null!=this._refCloseBtn.current&&this.props.listeners.add(this._refCloseBtn.current,"animationend",(()=>{this.props.onHightlightCloseEnd()}))}render(){var e=this.props.msg,t=e.displayName(!0,!0);return e.isGroupMsg&&(t+=" @ "+e.chat.title()),s.default.createElement("div",{className:m.default.mediaPanelHeader},s.default.createElement("div",{className:m.default.info},s.default.createElement(n.default,{idle:!0,image:s.default.createElement(d.default,{id:e.sender,size:40}),primary:s.default.createElement(f.default,{ellipsify:!0,text:t}),secondary:r.default.relativeDateAndTimeStr(e.t),theme:"media"})),s.default.createElement("div",{className:m.default.mediaPanelTools},s.default.createElement(g.MenuBar,{key:"media-panel-header",theme:"strong"},this._getMenuBtns(),s.default.createElement(g.MenuBarItem,{a8nText:"btn-close",icon:s.default.createElement(P.default,{className:this.props.isHighlightClose?m.default.highlightClose:null,containerRef:this._refCloseBtn,name:"x-viewer"}),title:h.default.t(1705),onClick:this.props.onClose}))))}}N.CONCERNS={msg:["star","isGroupMsg","chat","type","isGif","isViewOnce","sender","senderObj","t","isSentByMe"],mediaData:["filehash","mediaStage","renderableUrl"]},N.displayName="MediaPanelHeader";var I=(0,p.default)((0,M.default)(N,N.CONCERNS));t.default=I},20463:(e,t,a)=>{"use strict";var l=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),n=l(a(60969)),r=l(a(42323)),o=a(84900),d=a(2741),u=l(a(66761)),c=l(a(92660)),f=a(46072),h=l(a(5148)),p=l(a(80073)),m=l(a(53852)),E=l(a(82286)),g=l(a(28149));class v extends s.PureComponent{constructor(...e){super(...e),this.state={played:!1,size:{width:0,height:0},isFullscreenMode:!1},this._setRefContainer=e=>{this.refContainer=e},this.stopPropagation=e=>{e.stopPropagation()},this._handleFullscreenToggle=e=>{this.setState({isFullscreenMode:e})}}static getDerivedStateFromProps(e){var{mediaData:t}=e;return(t.mediaStage===f.MEDIA_DATA_STAGE.RESOLVED||t.streamable&&t.isStreamable())&&t.fullWidth&&t.fullHeight?{size:v.getSize(t)}:null}static getSize(e){if(e.isGif){return e.fullWidth>=330?{width:e.fullWidth,height:e.fullHeight}:{width:330,height:330*e.fullHeight/e.fullWidth}}return e.fullWidth>=d.MIN_WIDTH?{width:e.fullWidth,height:e.fullHeight}:{width:d.MIN_WIDTH,height:e.fullHeight}}componentDidMount(){this.props.mediaData.isStreamable()||this.props.msg.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:h.default.WEBC_RMR_REASON_CODE.MEDIA_VIEWER,isUserInitiated:!0})}componentWillUnmount(){this.props.msg.mediaObject&&this.props.msg.cancelDownload()}render(){var e,{msg:t,mediaData:a}=this.props,l=a.isGif,i=a.mediaStage===f.MEDIA_DATA_STAGE.RESOLVED||a.streamable&&a.isStreamable();if(i=i||t.isForcingRMR()){var d,h,E=u.default.t(1559);return!this.state.isFullscreenMode&&t&&t.interactiveAnnotations&&t.interactiveAnnotations.length>0&&(d=s.default.createElement(n.default,{annotations:t.interactiveAnnotations})),h=l?s.default.createElement("div",{className:c.default.mediaViewerImg,ref:this._setRefContainer},s.default.createElement(g.default,{src:a.renderableUrl,onClick:this.stopPropagation,autoPlay:!0,loop:!0},E),d):s.default.createElement("div",{ref:this._setRefContainer,className:c.default.mediaViewerImg,onClick:this.stopPropagation},s.default.createElement(p.default,{msg:t,mediaData:a,startTime:this.props.startTime,onClose:this.props.onClose,onError:()=>{},onFullscreenToggle:this._handleFullscreenToggle,autoPlay:this.props.autoPlay,type:o.PLAYER_TYPE.MEDIA_VIEWER,overlays:d,noPip:t.isViewOnce})),s.default.createElement(m.default,{type:"scaleDown",position:"relative",objectPosition:"relative",size:this.state.size,onObjectLoad:this.props.onLoad},h)}return s.default.createElement(m.default,{type:"scaleDown",position:"relative",objectPosition:"relative",size:{width:this.props.mediaData.fullWidth,height:this.props.mediaData.fullHeight}},s.default.createElement(r.default,{altText:null!==(e=t.caption)&&void 0!==e?e:"",mediaData:a}))}}v.CONCERNS={mediaData:["mediaStage","fullWidth","fullHeight","isGif","isViewOnce","preview","renderableUrl","streamable"]},v.defaultProps={startTime:0},v.displayName="MediaVideo";var _=(0,E.default)(v,v.CONCERNS);t.default=class extends _{getContainerElement(){return this.getComponent().refContainer}}},61740:(e,t,a)=>{"use strict";var l=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(23493)),n=i(a(94184)),r=a(73591),o=l(a(67294)),d=l(a(82921)),u=i(a(97420)),c=i(a(64163)),f=i(a(58743)),h=i(a(46274)),p=i(a(75735)),m=i(a(98712)),E=i(a(68816)),g=i(a(47312)),v=i(a(86608)),_=a(56726),C=i(a(61084)),M=i(a(79766)),S=a(85371),P=i(a(66761)),T=a(91386),N=i(a(5187)),I=i(a(23223)),b=i(a(86426)),y=i(a(18686)),k=i(a(80370)),A=a(46072),O=i(a(20463)),w=i(a(7674)),x=i(a(83013)),R=a(92120),D=i(a(82286)),L=a(79665),B=a(45739),F=a(16241),G=i(a(47469)),V=i(a(87120)),U=i(a(36708));function H(e){null==e||e.stopPropagation()}function W(e){var t=e.chat;t.composeQuotedMsg=e,u.default.focusChatTextInput(t)}class j extends o.PureComponent{constructor(e){super(e),this._setRefMediaImage=e=>{this._refMediaImage=e},this._setRefMediaVideo=e=>{this._refMediaVideo=e},this._setRefHotKeys=e=>{this._refHotKeys=e},this._handleViewOnceInfoClick=()=>{this._showViewOnceNux()},this._showViewOnceNux=()=>{var{mediaData:e}=this.props,t=o.default.createElement(x.default,{isPhoto:e.type===I.default.TYPE.IMAGE,onOkClick:()=>{u.default.closeModal()}});u.default.openModal(t)},this._handleImageLoad=e=>{this.props.onImageLoad&&this.props.onImageLoad();var t=this.state.zoomElement;t&&e&&this.props.isAnimatingIn&&e instanceof HTMLElement&&(this._zoomed||(this._zoomed=!0,this.animateZoom(t,e)))},this.animateZoom=(e,t)=>{var a,l=t.getBoundingClientRect(),i=e.getBoundingClientRect(),s=i.top-l.top,n=i.left-l.left,r=e.clientWidth/t.clientWidth;s-=(t.clientHeight-e.clientHeight)/2,n-=(t.clientWidth-e.clientWidth)/2,(0,U.default)(t,{opacity:[1,0],translateX:[0,n],translateY:[0,s],scale:[1,r]},{duration:h.default.MEDIA_VIEWER.ANIMATION_DURATION,easing:[.1,.82,.25,1]});var o=null===(a=this._refCaption)||void 0===a?void 0:a.getContainerElement();o&&(0,U.default)(o,{opacity:[1,0]},{duration:h.default.MEDIA_VIEWER.ANIMATION_DURATION})},this.openForwardFlow=e=>{e.stopPropagation();var{msg:t}=this.props;t.isUnsentMedia?u.default.openModal(o.default.createElement(f.default,{title:P.default.t(745),onOK:()=>u.default.closeModal(),okText:P.default.t(1865)},P.default.t(742))):u.default.openModal(o.default.createElement(v.default,{msgs:[(0,L.unproxy)(t)]}),{transition:"modal-flow"})},this._handleReplyClick=()=>{this._handleClose(),(0,r.delayMs)(h.default.MEDIA_VIEWER.CLOSE_ANIMATION_DURATION).then(W.bind(null,(0,L.unproxy)(this.props.msg)))},this._handleDeleteClick=()=>{var{msg:e}=this.props;u.default.openModal(o.default.createElement(p.default,{chat:e.chat,msgList:[(0,L.unproxy)(e)],deletePrompt:!0,revokePrompt:e.canRevoke()}))},this._handleMsgInfoClick=()=>{this._handleClose(),(0,r.delayMs)(h.default.MEDIA_VIEWER.CLOSE_ANIMATION_DURATION+250).then(u.default.msgInfoDrawer.bind(u.default,(0,L.unproxy)(this.props.msg)))},this._handleImgZoomIn=e=>{var t=this._refMediaImage;e&&t&&(this._listenToMouseMove=t.heightOverflow>0||t.widthOverflow>0),this.setState({imgZoomed:e}),this.props.onImgZoomIn(e)},this._handleZoomOut=e=>{this._updateZoomPosition.cancel();var t=this._refMediaImage;t&&this.state.imgZoomed&&t.onImageClick(e)},this._handleMouseMove=e=>{this._updateZoomPosition(e.pageX,e.pageY)},this._updateZoomPosition=(0,s.default)(((e,t)=>{if(!this.state.annotationTooltipDisplayed){var a=this._refMediaImage;if(a){var l=a.getInsideContainer();if(l&&l instanceof HTMLElement){var i=a.getOutsideContainer();if(i&&i instanceof HTMLElement){var{translateX:s,translateY:n}=a.getTranslatePosition(i,e,t);(0,U.default)(l,"stop"),(0,U.default)(l,{translateX:s,translateY:n,scale:h.default.MEDIA_VIEWER.ZOOM_IN_FACTOR},{duration:0})}}}}})),this._handleKeyboardZoom=e=>{if(!this.props.isAnimatingIn){this._updateZoomPosition.cancel();var t=this._refMediaImage;null!=t&&t.onImageKeyboardZoom(e)}},this._handleDownloadClick=e=>{e.stopPropagation(),E.default.initDownload((0,L.unproxy)(this.props.msg))},this._handleStarClick=e=>{e.stopPropagation();var{msg:t}=this.props;u.default.sendStarMsgs(t.chat,[(0,L.unproxy)(t)])},this._handleUnstarClick=e=>{e.stopPropagation();var{msg:t}=this.props;u.default.sendUnstarMsgs(t.chat,[(0,L.unproxy)(t)])},this._handleGoToMsgClick=e=>{e.stopPropagation(),this._handleClose(),u.default.existsDrawerRight((e=>{e&&2===c.default.column&&u.default.closeDrawerRight()}));var{msg:t}=this.props,a=t.chat.getSearchContext((0,L.unproxy)(t));u.default.openChatAt(t.chat,a).then((e=>{e&&u.default.focusChatTextInput(t.chat)}))},this._handleClose=()=>{if(!this._closing){this._closing=!0,(0,F.isFunction)(this.props.onExitAnimation)&&this.props.onExitAnimation();var e,t=this.props.getZoomNode&&this.props.getZoomNode(this.props.msg.id);if(!t)return this.props.onBack();if(this.props.mediaData.type===I.default.TYPE.IMAGE&&this._refMediaImage?e=this._refMediaImage.getInsideContainer():this.props.mediaData.isGif&&this._refMediaVideo&&(e=this._refMediaVideo.getContainerElement()),!e)return this.props.onBack();var a,l=e,i=e.getBoundingClientRect(),s=t.getBoundingClientRect(),n=s.top-i.top,r=s.left-i.left,o=t.clientWidth/l.clientWidth;n-=(l.clientHeight-t.clientHeight)/2,r-=(l.clientWidth-t.clientWidth)/2,(0,U.default)(e,{translateX:[r,0],translateY:[n,0],scale:[o,1]},{duration:h.default.MEDIA_VIEWER.CLOSE_ANIMATION_DURATION,easing:[.1,.82,.25,1]}).then((()=>{this.props.onBack()}));var d=null===(a=this._refCaption)||void 0===a?void 0:a.getContainerElement();d&&(0,U.default)(d,{opacity:[0,1]},{duration:h.default.MEDIA_VIEWER.CLOSE_ANIMATION_DURATION,easing:[.1,.82,.25,1]})}},this._handleClickToCloseBlocked=()=>{this.setState({isHighlightClose:!0})},this._handleHighlightCloseEnd=()=>{this.setState({isHighlightClose:!1})},this._handleAnnotationTooltipDisplay=()=>this.setState({annotationTooltipDisplayed:!0}),this._handleAnnotationTooltipDismiss=()=>this.setState({annotationTooltipDisplayed:!1}),this._handleCaptionClick=e=>{e.stopPropagation(),this.setState((e=>({isCaptionExpanded:!e.isCaptionExpanded})))},this._zoomed=!1,this._closing=!1,this._listenToMouseMove=!1,this._shouldShowViewOnceNux=e.msg.isViewOnce&&(0,_.shouldShowNUX)(h.default.NUX.EPHEMERAL_VIEW_ONCE_RECEIVER);var t=e.mediaData.mediaStage===A.MEDIA_DATA_STAGE.RESOLVED&&e.isAnimatingIn&&e.getZoomNode?e.getZoomNode(e.msg.id):null;this.state={zoomElement:t,imgZoomed:!1,annotationTooltipDisplayed:!1,isCaptionVisible:!e.isAnimatingIn,isCaptionExpanded:!1,isHighlightClose:!1}}componentDidMount(){var{msg:e}=this.props;e.isViewOnce&&(0,T.canMarkPlayed)(e)&&(0,T.markPlayed)(e),this._shouldShowViewOnceNux&&this._showViewOnceNux(),g.default.focus(this._refHotKeys)}getSnapshotBeforeUpdate(){var e,t=null===(e=this._refCaption)||void 0===e?void 0:e.getContainerElement();return null!=t&&null==this._captionExpandable&&(this._captionExpandable=t.scrollHeight>t.clientHeight),null}componentDidUpdate(e){var{isCaptionVisible:t}=this.state,{isAnimatingIn:a}=this.props;a||t||!e.isAnimatingIn||this.setState({isCaptionVisible:!0})}componentWillUnmount(){this._updateZoomPosition.cancel()}render(){var e,t,a,l,i,s,{msg:r,mediaData:u}=this.props;switch(u.type){case I.default.TYPE.IMAGE:i=o.default.createElement(b.default,{key:r.id.toString(),msg:r,mediaData:u,onLoad:this._handleImageLoad,onImgZoomIn:this._handleImgZoomIn,onAnnotationTooltipDisplay:this._handleAnnotationTooltipDisplay,onAnnotationTooltipDismiss:this._handleAnnotationTooltipDismiss,preventDownload:r.isViewOnce,ref:this._setRefMediaImage});break;case I.default.TYPE.VIDEO:i=o.default.createElement(O.default,{key:r.id.toString(),autoPlay:!this._shouldShowViewOnceNux,msg:r,mediaData:u,onLoad:u.isGif?this._handleImageLoad:null,startTime:this.props.startTime,onClose:this._handleClose,ref:this._setRefMediaVideo});break;case I.default.TYPE.AUDIO:i=o.default.createElement(N.default,{mediaData:u,key:r.id.toString()});break;default:__LOG__(4,void 0,new Error,!0)`type: ${u.type}`,SEND_LOGS("MediaViewerModal: unexpected media type")}var c=this.props.msgIndexInAlbum>=0&&this.props.albumSize>=0;if(r.caption||c){var f;if(c){var h={number:this.props.msgIndexInAlbum+1,totalNumber:this.props.albumSize};f=P.default.t(1208,h)}var p=S.Configuration.Conversation({mentions:r.mentionMap(),links:r.getLinks(),trusted:!0}),E=!this.state.isCaptionVisible&&(u.isGif||u.type===I.default.TYPE.IMAGE);s=o.default.createElement(o.default.Fragment,null,o.default.createElement("p",{className:(0,n.default)(w.default.captionWrapper,this._captionExpandable&&w.default.captionWrapperExpandable),onClick:this._captionExpandable?this._handleCaptionClick:void 0,title:this._captionExpandable?P.default.t(1308):void 0,"aria-hidden":this.state.isCaptionExpanded||void 0},o.default.createElement(m.default,{className:(0,n.default)(w.default.mediaCaption,{[w.default.captionHidden]:E,[w.default.expanded]:this.state.isCaptionExpanded}),formatters:p,ref:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((e=>{this._refCaption=e})),text:r.caption||f}),this._captionExpandable&&o.default.createElement(V.default,{className:(0,n.default)(w.default.captionReadMoreBtn,{[w.default.expanded]:this.state.isCaptionExpanded}),onClick:this._handleCaptionClick},o.default.createElement(B.TextSpan,null,P.default.t(1308)))),this.state.isCaptionExpanded&&o.default.createElement("p",{className:(0,n.default)(w.default.captionWrapper,w.default.captionWrapperExpandable,w.default.captionExpanded),onClick:this._handleCaptionClick},o.default.createElement(m.default,{className:(0,n.default)(w.default.mediaCaption,w.default.mediaCaptionExpanded),formatters:p,text:r.caption})))}var g=(0,n.default)(w.default.media,{[w.default.mediaWithCaption]:!!s}),v=(0,n.default)("overlay",w.default.mediaViewer,{[w.default.viewOnce]:r.isViewOnce,[w.default.mediaViewerAnimate]:this.props.isAnimatingIn,[w.default.cursorZoomOut]:this.state.imgZoomed}),_=this.state.imgZoomed&&this._listenToMouseMove?this._handleMouseMove:null,T=this.state.imgZoomed?this._handleZoomOut:null,A=this.state.imgZoomed?null:this._handleClose;null!=A&&r.isViewOnce&&(A=this._handleClickToCloseBlocked);var x=!r.isViewOnce;return o.default.createElement(G.default,{displayName:"MediaViewer",escapable:!0,requestDismiss:this._handleClose},o.default.createElement(M.default,{handlers:{space:this._handleKeyboardZoom},onRef:this._setRefHotKeys},o.default.createElement("div",{className:v,"data-animate-media-viewer":!0,onClick:T,onMouseMove:_},o.default.createElement(y.default,{isHighlightClose:this.state.isHighlightClose,msg:r,mediaData:u,onClose:this._handleClose,onGoToMsgClick:this._handleGoToMsgClick,onHightlightCloseEnd:this._handleHighlightCloseEnd,onReplyClick:this._handleReplyClick,onUnstarClick:this._handleUnstarClick,onStarClick:this._handleStarClick,onDeleteClick:this._handleDeleteClick,openForwardFlow:this.openForwardFlow,onDownloadClick:this._handleDownloadClick,onMsgInfoClick:this._handleMsgInfoClick,onViewOnceInfoClick:this._handleViewOnceInfoClick,msgIndexInAlbum:this.props.msgIndexInAlbum}),o.default.createElement("div",{className:w.default.mediaContent,onClick:A},x&&o.default.createElement("div",{className:(0,n.default)(w.default.btnMediaPrev)},o.default.createElement(d.default,{type:d.ButtonType.Prev,onClick:null!==(e=this.props.onPrev)&&void 0!==e?e:H,onKeyDown:null!==(t=this.props.onPrev)&&void 0!==t?t:H,disabled:!this.props.onPrev||this.state.imgZoomed,theme:R.RoundTheme.Default})),o.default.createElement("div",{className:g},o.default.createElement(k.default,{msg:r,mediaData:u}),i,o.default.createElement(C.default.Provider,{value:r.chat.groupMetadata},s)),x&&o.default.createElement("div",{className:(0,n.default)(w.default.btnMediaNext)},o.default.createElement(d.default,{type:d.ButtonType.Next,onClick:null!==(a=this.props.onNext)&&void 0!==a?a:H,onKeyDown:null!==(l=this.props.onNext)&&void 0!==l?l:H,disabled:!this.props.onNext||this.state.imgZoomed,theme:R.RoundTheme.Default}))))))}}j.CONCERNS={msg:["id","star","isUnsentMedia","isViewOnce","chat","caption","interactiveAnnotations"],mediaData:["mediaStage","type","isGif"]},j.displayName="MediaViewerModal";var q=(0,D.default)(j,j.CONCERNS);t.default=q},56450:(e,t,a)=>{"use strict";var l=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(23493)),n=l(a(67294)),r=i(a(76119)),o=i(a(63284)),d=i(a(77030)),u=i(a(17363));class c extends n.Component{constructor(e){super(e),this._setThumbRef=(e,t)=>{this._thumbRefs[t]=e},this._isPreviewPreferred=e=>{var t=this._thumbRefs[e];if(!t)return!1;var a=t.getBoundingClientRect(),l=(a.left+a.right)/2;return!(l>-1*window.innerWidth&&l<2*window.innerWidth)},this._getMsgIdToPreferPreview=()=>{var e=new Map;return this.props.mediaMsgs.forEach((t=>{var a=t.id.toString();e.set(a,this._isPreviewPreferred(a))})),e},this.onScroll=e=>{this.handleScroll(),this.props.onScroll(e)},this._handleScroll=()=>{var e=this._getMsgIdToPreferPreview();(0,r.default)(this.state.msgIdToPreferPreview,e)||this.setState({msgIdToPreferPreview:e})},this.getThumbs=()=>{var{highlightedMsgIds:e}=this.props,t=e&&e.size>0&&e.has(this.props.activeMsg.id.toString()),a=[];return this.props.mediaMsgs.forEach((l=>{if(null!=l.mediaData){var i=t&&e&&!e.has(l.id.toString())?"viewerFlowTransparent":"viewerFlow";a.push(n.default.createElement(o.default,{theme:i,active:l===this.props.activeMsg,msg:l,containerRef:e=>{this._setThumbRef(e,l.id.toString()),l===this.props.activeMsg&&this.props.onSetActiveThumb(e)},key:`media-${l.id.id}`,onClick:()=>{this.props.onSelectThumb(l)},preferPreview:!!this.state.msgIdToPreferPreview.get(l.id.toString())}))}else{var s=this.props.activeMsg;__LOG__(3,!0)`MediaViewerFlow: attempted to render a msg without mediaData: ${JSON.stringify({type:l.type,isMedia:l.isMedia,startMsgType:s.type,startMsgIsMedia:s.isMedia})}`}})),a.push(n.default.createElement("div",{className:d.default.mediaThumb,key:"spinner-right"},this.props.mediaMsgs.queryMediaAfter?n.default.createElement(u.default,{stroke:6,size:24}):null)),a.unshift(n.default.createElement("div",{className:d.default.mediaThumb,key:"spinner-left"},this.props.mediaMsgs.queryMediaBefore?n.default.createElement(u.default,{stroke:6,size:24}):null)),a.push(n.default.createElement("div",{className:d.default.thumbPadding,key:"padding-right"})),a.unshift(n.default.createElement("div",{className:d.default.thumbPadding,key:"padding-left"})),a},this._thumbRefs={},this.handleScroll=(0,s.default)(this._handleScroll,100),this.state={msgIdToPreferPreview:this._getMsgIdToPreferPreview()}}componentWillUnmount(){this.handleScroll.cancel()}render(){var e=this.getThumbs();return n.default.createElement("div",{className:d.default.thumbsContainer,ref:this.props.setRefThumbsContainer},n.default.createElement("div",{className:d.default.scrollContainer,dir:"ltr"},n.default.createElement("div",{onScroll:this.onScroll,className:d.default.viewerThumbs,ref:this.props.setRefThumbs},e)))}}t.default=c,c.displayName="MediaViewerThumbList"},83013:(e,t,a)=>{"use strict";var l=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,s.useEffect)((()=>{(0,c.setNUX)(r.default.NUX.EPHEMERAL_VIEW_ONCE_RECEIVER,{views:1,maxViews:1})}),[]),s.default.createElement(n.default,{onOK:e.onOkClick,cancelText:f.default.t(936),onCancel:()=>{(0,o.openExternalLink)((0,d.getViewOnceFaqUrl)())}},s.default.createElement(u.FlexColumn,null,s.default.createElement(u.FlexItem,{className:h.default.graphic,align:"center"},s.default.createElement(p.default,{name:"view-once-sender-nux"})),s.default.createElement(m.TextHeader,{className:h.default.text,theme:"popup-title"},e.isPhoto?f.default.t(1573):f.default.t(1576)),s.default.createElement(m.TextParagraph,{className:h.default.text},e.isPhoto?f.default.t(1572):f.default.t(1575))))};var s=i(a(67294)),n=l(a(58743)),r=l(a(46274)),o=a(91072),d=a(78572),u=a(67052),c=a(56726),f=l(a(66761)),h=l(a(81623)),p=l(a(62745)),m=a(45739)},73403:(e,t,a)=>{"use strict";var l=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),n=l(a(97420)),r=l(a(58743)),o=l(a(66761)),d=l(a(89732)),u=a(45739);class c extends s.PureComponent{constructor(e){super(e),this._handleOK=()=>{var{selectedValue:e}=this.state;null!=e&&this.props.onSelect(e),this.closeModal()},this._handleChange=e=>{var{target:t}=e;t instanceof HTMLInputElement&&this.setState({selectedValue:parseInt(t.value,10)})},this.closeModal=()=>{n.default.closeModal()},this.state={selectedValue:e.initialValue}}render(){var{options:e,explanation:t}=this.props,a=e.map((({value:e,label:t})=>s.default.createElement("li",{key:`setting-${e}`},s.default.createElement("label",{className:d.default.label},s.default.createElement("input",{type:"radio",className:d.default.input,value:String(e),checked:e===this.state.selectedValue,onChange:this._handleChange}),t))));return s.default.createElement(r.default,{title:this.props.title,okText:o.default.t(556),onOK:this._handleOK,onCancel:this.closeModal},t?s.default.createElement(u.TextDiv,{theme:"muted",className:d.default.explanation},t):null,s.default.createElement("form",null,s.default.createElement("ol",null,a)))}}t.default=c,c.displayName="SettingsPopup"},39632:(e,t,a)=>{"use strict";var l=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({contact:e}){var{verifiedLevel:t,verifiedName:a}=(0,_.default)(e,["verifiedLevel","verifiedName"]),l=(0,p.getBusinessFaqUrl)(),i=!u.default.isSMB;(0,s.useEffect)((()=>{i&&new E.default.BannerEvent({bannerType:E.default.BANNER_TYPES.CROSS_SELL_PROFILE_INTERSTITIAL,bannerOperation:E.default.BANNER_OPERATIONS.SHOWN}).commit()}),[i]);var C=t===c.default.VERIFIED_LEVEL.HIGH?m.default.t(1935,{businessName:a}):m.default.t(1934);return s.default.createElement(d.default,{title:m.default.t(1937),onOK:()=>{o.default.closeModal(),i&&new E.default.BannerEvent({bannerType:E.default.BANNER_TYPES.CROSS_SELL_PROFILE_INTERSTITIAL,bannerOperation:E.default.BANNER_OPERATIONS.DISMISS}).commit()},okText:m.default.t(1865)},s.default.createElement(f.default,{text:C})," ",s.default.createElement(r.default,{href:l,onClick:e=>{e.preventDefault(),o.default.closeModal(),setTimeout((()=>(0,h.openExternalLink)(l)),10)}},m.default.t(936)),i&&s.default.createElement("div",{className:n.default.footerNote},s.default.createElement(v.TextSpan,{theme:"muted",size:"13"},m.default.t(1938),s.default.createElement("br",null),s.default.createElement(r.default,{onClick:e=>{e.preventDefault(),o.default.closeModal(),new E.default.BannerEvent({bannerType:E.default.BANNER_TYPES.CROSS_SELL_PROFILE_INTERSTITIAL,bannerOperation:E.default.BANNER_OPERATIONS.CLICK}).commit(),setTimeout((()=>o.default.openModal(s.default.createElement(g.default,null))),200)},className:n.default.getTheAppLink},m.default.t(1936)))))};var s=i(a(67294)),n=l(a(96089)),r=l(a(53318)),o=l(a(97420)),d=l(a(58743)),u=l(a(3243)),c=l(a(46274)),f=l(a(98712)),h=a(91072),p=a(78572),m=l(a(66761)),E=l(a(5148)),g=l(a(18541)),v=a(45739),_=l(a(53233))},18541:(e,t,a)=>{"use strict";var l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return i.default.createElement(r.default,{title:u.default.t(1941),onOK:()=>{new c.default.BannerEvent({bannerType:c.default.BANNER_TYPES.CROSS_SELL_PROFILE_INTERSTITIAL,bannerOperation:c.default.BANNER_OPERATIONS.DISMISS}).commit(),n.default.closeModal()},okText:u.default.t(1705)},i.default.createElement(f.default,null),i.default.createElement("p",null,i.default.createElement(o.default,{text:u.default.t(1939)})),i.default.createElement("br",null),i.default.createElement("p",null,i.default.createElement(o.default,{text:u.default.t(1940)})," ",i.default.createElement(s.default,{href:h,onClick:e=>{e.preventDefault(),n.default.closeModal(),setTimeout((()=>(0,d.openExternalLink)(h)),10)}},u.default.t(936))))},t.WHATSAPP_BUSINESS_URL=void 0;var i=l(a(67294)),s=l(a(53318)),n=l(a(97420)),r=l(a(58743)),o=l(a(98712)),d=a(91072),u=l(a(66761)),c=l(a(5148)),f=l(a(98261)),h="https://www.whatsapp.com/business";t.WHATSAPP_BUSINESS_URL=h},98261:(e,t,a)=>{"use strict";var l=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(0,n.useRef)(null),t=(0,n.useRef)(null),{theme:a}=(0,n.useContext)(u.default),l="dark"===a;return(0,n.useEffect)((()=>(null!=e.current&&(t.current=new o.default(e.current,{text:"https://www.whatsapp.com/business/download",colorDark:"#122e31",colorLight:"#ffffff",width:r.default.QR_EDGE/2,height:r.default.QR_EDGE/2,typeNumber:4,correctLevel:o.default.CorrectLevel.H})),()=>{null!=t.current&&(t.current.clear(),t.current=null,e.current=null)})),[l]),n.default.createElement("div",{className:d.default.wrapper},n.default.createElement("div",{ref:e,className:(0,s.default)(d.default.code,{[d.default.codeDarkMode]:l})},n.default.createElement(c,{theme:a})))};var s=i(a(94184)),n=l(a(67294)),r=i(a(46274)),o=i(a(31516)),d=i(a(90487)),u=i(a(97819));function c(){return n.default.createElement("div",{className:d.default.codeLogo},n.default.createElement("svg",{width:"100%",viewBox:"0 0 50 50",xmlns:"http://www.w3.org/2000/svg"},n.default.createElement("path",{d:"M42.6776 42.6779C37.9558 47.3997 31.6777 50.0001 24.9999 50.0001C21.0047 50.0001 17.0541 49.0389 13.5244 47.2141L0.601068 49.3339L2.72832 36.3645C0.941278 32.8647 0 28.9525 0 25.0001C0 18.3223 2.60042 12.0443 7.32229 7.32237C12.0442 2.6005 18.3221 0 24.9999 0C31.6777 0 37.9558 2.6005 42.6776 7.32237C47.3995 12.0443 50 18.3223 50 25.0001C50 31.678 47.3995 37.9558 42.6776 42.6779ZM24.9999 4.33778C13.6067 4.33778 4.33772 13.607 4.33772 25.0001C4.33772 28.4792 5.21935 31.9192 6.8868 34.9487L7.24853 35.6054L5.85915 44.0756L14.2959 42.6918L14.9565 43.0601C18.0107 44.7624 21.4837 45.6622 24.9999 45.6622C36.3932 45.6622 45.6622 36.3933 45.6622 25.0001C45.6622 13.607 36.3932 4.33778 24.9999 4.33778ZM31.1133 24.3614C32.4522 24.9804 34.1536 26.3725 34.1208 29.3117C34.0749 33.4266 31.2191 35.6542 27.2744 35.6542H19.4594H18.3042C17.5079 35.6542 16.8645 35.0053 16.8713 34.2092L17.0344 15.0573C17.041 14.2714 17.6794 13.6377 18.4652 13.6366L27.1493 13.6256C31.4651 13.6256 33.9598 16.039 33.9177 19.8134C33.8903 22.2579 32.2484 23.8355 31.1133 24.3614ZM26.766 17.4622H21.3643L21.3076 22.5361H26.7093C28.5347 22.5361 29.5672 21.5152 29.584 19.9992C29.6009 18.4831 28.5915 17.4622 26.766 17.4622ZM26.9444 26.4035H21.2643L21.2038 31.8178H26.884C28.8333 31.8178 29.7752 30.5802 29.792 29.0952C29.8085 27.6101 28.8939 26.4035 26.9444 26.4035Z",fill:"currentColor"})))}},80173:(e,t,a)=>{"use strict";var l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{onClick:t}=e;return i.default.createElement(s.default,{onClick:t,side:i.default.createElement(o.default,{name:"lock",className:n.default.icon}),multiline:!0},i.default.createElement("div",{className:n.default.header},i.default.createElement(d.TextSpan,{theme:"title"},r.default.t(1473))),i.default.createElement(d.TextDiv,{theme:"muted"},r.default.t(1472)))};var i=l(a(67294)),s=l(a(16998)),n=l(a(13474)),r=l(a(66761)),o=l(a(62745)),d=a(45739)},73849:(e,t,a)=>{"use strict";var l=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var[t,a]=(0,s.useState)(!1);return s.default.createElement(r.default,{onOK:function(){e.onReport(t)},okText:d.default.t(1316),onCancel:e.onCancel,title:e.title},s.default.createElement(u.TextParagraph,{className:c.default.section,color:"muted"},e.isGroup?d.default.t(1337):d.default.t(1336)),s.default.createElement(u.TextParagraph,{className:c.default.section,color:"muted"},e.isGroup?d.default.t(1340):e.isBusiness?d.default.t(1339):d.default.t(1338)),s.default.createElement(o.FlexRow,{align:"center",justify:"start"},s.default.createElement(n.default,{onChange:()=>a((e=>!e)),checked:t,id:"menu-icon-report-spam"}),s.default.createElement(u.TextLabel,{className:c.default.checkboxLabel,htmlFor:"menu-icon-report-spam",color:"muted"},e.isGroup?d.default.t(1739):e.isBusiness?d.default.t(285):d.default.t(287))))};var s=i(a(67294)),n=l(a(73132)),r=l(a(58743)),o=a(67052),d=l(a(66761)),u=a(45739),c=l(a(73662))},76119:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a;if(e.size!==t.size)return!1;for(var[l,i]of e)if((a=t.get(l))!==i||void 0===a&&!t.has(l))return!1;return!0}},61388:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_36FbL",block:"_11V85",main:"_1ER5I",side:"_1YLup",multiline:"_1tPXz"}},35346:(e,t,a)=>{"use strict";a.r(t),t.default={header:"_2J_Rg",chevronIcon:"_3grvf",ephemeralIcon:"_36-dp"}},4949:(e,t,a)=>{"use strict";a.r(t),t.default={msg:"_3YiZC",text:"RmpKn",bubble:"_2z0p1",author:"XntIB",hasSuspiciousLinks:"_3bU-2",hasAuthor:"_2cFHu",suspiciousLabel:"_2tYTz"}},79011:(e,t,a)=>{"use strict";a.r(t),t.default={wrapper:"_11tTr"}},82338:(e,t,a)=>{"use strict";a.r(t),t.default={nuxContainer:"_2MN2b",flatListContainer:"_3P67r",btnClose:"_1rNId",nuxHeader:"_1fDhw",nuxContent:"_3CSup",nuxIcon:"wZmgd",nuxText:"_23F3I"}},31777:(e,t,a)=>{"use strict";a.r(t),t.default={body:"_2j9Df",photo:"_3wMpK",chevron:"_2o-Pp"}},92447:(e,t,a)=>{"use strict";a.r(t),t.default={businessAccount:"_3Wx0w",businessTitleText:"_3hEvS"}},89628:(e,t,a)=>{"use strict";a.r(t),t.default={actionsRow:"_2kAwJ",actionButton:"_2iUPD",actionLabel:"_2oaCg",actionDisabled:"_3GWG6"}},33596:(e,t,a)=>{"use strict";a.r(t),t.default={businessHours:"_1I5MS",businessHoursRow:"_1E5MZ",firstRow:"_3qGzL",businessHoursDay:"CY6kT",businessHoursHours:"_1ujuU",dayIsOpen:"_3nRm3",businessHoursChevron:"_36zDQ",flipSvg:"_3-kwz"}},88274:(e,t,a)=>{"use strict";a.r(t),t.default={section:"_2yoR2",description:"_2COKu",map:"_2FPvQ"}},23653:(e,t,a)=>{"use strict";a.r(t),t.default={wrapper:"_-68fg",title:"_1FhZx",subtitle:"_3YwTO",verifiedText:"_25I1z",icon:"_2ie2d"}},15525:(e,t,a)=>{"use strict";a.r(t),t.default={contactBusinessInfo:"_2Qmz_",contactBusinessInfoSpinner:"_3UShD",dataRow:"_2GoqA",businessHoursRow:"T9W1E",businessHoursDay:"_1Qi8h",businessHoursHours:"_265N_",businessHoursChevron:"_235Hk",flipSvg:"sdLP_",dataRowIcon:"uj7Hl",dataRowText:"_1y-yA",businessTitleText:"_20eRR",businessMarker:"-ouoI",verifiedLabel:"_3WNAO",businessMap:"_34r-I",address:"HXkG_",link:"_3AYvg",infoIcon:"_3hzkD"}},58293:(e,t,a)=>{"use strict";a.r(t),t.default={body:"_2YEfx",avatar:"_2ALnh",nameSecondary:"_3l1_9",screenName:"_2UVLe",businessVname:"_1viks",icon:"_37Tl1",titleAbout:"Xt0cg",chevron:"_1Fclf"}},78857:(e,t,a)=>{"use strict";a.r(t),t.default={info:"_2U0ik",categories:"_2oH_b",noPaddingBottom:"_3W57d"}},32201:(e,t,a)=>{"use strict";a.r(t),t.default={open:"_25r2J",closed:"_5Xa1z",openStatus:"_1i7Je"}},13474:(e,t,a)=>{"use strict";a.r(t),t.default={header:"_2zyOo",icon:"_4aKqp"}},13648:(e,t,a)=>{"use strict";a.r(t),t.default={body:"_f0hJ",avatar:"_3zYOj",description:"_8xDKI",nameSecondary:"_3IaWU",chevron:"_1kh2B",iconSearch:"PLicp",title:"_1VJFC",dogfoodingGroupBannerInternalOnly:"_2j99K"}},33019:(e,t,a)=>{"use strict";a.r(t),t.default={header:"_3AwRc",restrictText:"_1fFgT"}},27356:(e,t,a)=>{"use strict";a.r(t),t.default={multimediaGallery:"_3M644",column:"_3nvje",menuItem:"OJuvv",active:"_KRg9",menuTabsLists:"_3CC5A",threeTabs:"_1KRHF",fourTabs:"rLX29"}},8752:(e,t,a)=>{"use strict";a.r(t),t.default={mediaViewerPlaceholder:"nehFG",imageAudio:"_2OreO",mediaViewerAudio:"_1alR8"}},77030:(e,t,a)=>{"use strict";a.r(t),t.default={thumbsContainer:"_1XWMx",scrollContainer:"_1MhXb",viewerThumbs:"_1FS45",mediaThumb:"_52crR",thumbPadding:"_1833d"}},81623:(e,t,a)=>{"use strict";a.r(t),t.default={text:"_1iOjC",graphic:"_1WxSS"}},89732:(e,t,a)=>{"use strict";a.r(t),t.default={label:"QzWWL",input:"_1LOWN",explanation:"_37J_Y"}},96089:(e,t,a)=>{"use strict";a.r(t),t.default={footerNote:"_1chRk",getTheAppLink:"_3t8G3"}},90487:(e,t,a)=>{"use strict";a.r(t),t.default={wrapper:"_2Cwyq",code:"_3LMFv",codeDarkMode:"_3-nnq",codeLogo:"_3wVH-"}},73662:(e,t,a)=>{"use strict";a.r(t),t.default={section:"_2ppks",checkboxLabel:"l2_nh"}}}]);