/*! Copyright (c) 2021 WhatsApp Inc. All Rights Reserved. */
(self.webpackChunkwhatsapp_web_client=self.webpackChunkwhatsapp_web_client||[]).push([[7205],{31351:e=>{var t=Array.prototype.reverse;e.exports=function(e){return null==e?e:t.call(e)}},2027:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.setGroupDesc=function(e,t=""){return m((0,h.unproxy)(e),t)};var i=a(55084),o=a(6467),l=n(a(69162)),r=s(a(13540)),d=n(a(2408)),c=a(19986),u=n(a(17754)),h=a(15298),f=a(12825),p=a(85893);function m(e,t="",a=(0,o.genId)()){var s,n,h;let g=t&&t.trim();if(g===(null===(s=e.groupMetadata)||void 0===s?void 0:s.desc))return Promise.reject(new r.ActionError);""===g&&(g=null);const x=(0,c.sendSetGroupDescription)(e.id,g,(0,u.default)(),null===(n=e.groupMetadata)||void 0===n?void 0:n.descId),C=null===(h=e.groupMetadata)||void 0===h?void 0:h.desc,v=new o.ActionType(d.default.t(132)),_=x.then((()=>new o.ActionType(d.default.t(134),{actionText:d.default.t(232),actionHandler:()=>m(e,C,a)}))).catch((0,i.filteredCatch)(f.ServerStatusCodeError,(e=>{if(e.status>=400)return new o.ActionType(d.default.t(133))}))).catch((()=>(__LOG__(3)`models:chat:setGroupDesc dropped`,new o.ActionType(d.default.t(133),{actionText:d.default.t(228),actionHandler:()=>m(e,g,a)}))));return l.default.openToast((0,p.jsx)(o.ActionToast,{id:a,initialAction:v,pendingAction:_})),x.then((t=>{var a;t._duplicate||(null===(a=e.groupMetadata)||void 0===a||a.set({desc:g||""}))})).catch((0,i.filteredCatch)(f.ServerStatusCodeError,(()=>{})))}},32593:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.setGroupSubject=function(e,t=""){return m((0,u.unproxy)(e),t)};var i=a(55084),o=a(6467),l=n(a(69162)),r=s(a(13540)),d=n(a(2408)),c=a(19986),u=a(15298),h=a(75824),f=a(12825),p=a(85893);function m(e,t,a=(0,o.genId)()){const s=t.trim();if(!s)return Promise.reject(new r.ActionError);if(s===e.contact.name)return Promise.reject(new r.ActionError);const n=(0,c.sendSetGroupSubject)(e.id,s),u=e.contact.name,g=new o.ActionType(d.default.t(152)),x=n.then((()=>new o.ActionType(d.default.t(151,{subject:s}),{actionText:d.default.t(232),actionHandler:()=>m(e,u,a)}))).catch((0,i.filteredCatch)(f.ServerStatusCodeError,(e=>{if(e.status>=400)return new o.ActionType(d.default.t(150))}))).catch((()=>(__LOG__(3)`models:chat:setSubject dropped`,new o.ActionType(d.default.t(150),{actionText:d.default.t(228),actionHandler:()=>m(e,s,a)}))));return l.default.openToast((0,p.jsx)(o.ActionToast,{id:a,initialAction:g,pendingAction:x})),n.then((t=>{if(!t._duplicate){const t={name:s};return(0,h.updateLocal)(e.contact.id,t).then((()=>{e.contact.set(t)}))}})).catch((0,i.filteredCatch)(f.ServerStatusCodeError,(()=>{})))}},76865:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{contact:t,onClick:a,contextMenu:s,isPendingParticipant:l,contextEnabled:r,onContext:d,theme:c}=e,u=(0,i.default)(e.participant,["isAdmin"]);return(0,o.jsx)(n.default,{contact:t,admin:u.isAdmin,onClick:a,theme:c||"drawer-list",contextEnabled:()=>null!=r&&r(t),contextMenu:s,onContext:e=>d&&d(e,t),isPendingParticipant:l,showNotifyName:!0,waitIdle:!0})};var n=s(a(70521)),i=s(a(76006)),o=a(85893)},37781:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(7900)),o=a(67294),l=n(a(24613)),r=n(a(69162)),d=n(a(26821)),c=n(a(71681)),u=n(a(69217)),h=n(a(35371)),f=s(a(72787)),p=a(85893);class m extends o.Component{constructor(...e){super(...e),this.startCheckForSuccess=()=>{this.checkIteration=0,this.checkForSuccessInterval=this.props.setInterval(this.checkForSuccess,250)},this.clearCheckForSuccess=()=>{this.checkForSuccessInterval&&(this.props.clearInterval(this.checkForSuccessInterval),this.checkForSuccessInterval=0,this.checkIteration=0)},this.checkForSuccess=()=>{if(f.default.state!==f.STATE.CONNECTED)return;this.checkIteration++;const e=this.props.url;if(this.checkIteration>40)return void this.handlePlayerError({target:{src:e,error:{code:window.MediaError.MEDIA_ERR_NETWORK}}});const t=(0,i.default)(this._audioElement,"this._audioElement").buffered;t.length&&t.end(0)>0&&this.handlePlaying()},this.handlePlayerError=e=>{this.clearCheckForSuccess(),this.props.onError&&this.props.onError(e.target.src)},this.handleOtherPlaying=e=>{e!==this&&(0,i.default)(this._audioElement,"this._audioElement").pause()},this.handlePlaying=()=>{this.clearCheckForSuccess(),r.default.mediaPlaying(this)},this._setRefAudio=e=>{this._audioElement=e,null!=this.props.setRefAudio&&this.props.setRefAudio(e)}}componentDidMount(){const{listeners:e}=this.props,t=(0,i.default)(this._audioElement,"this._audioElement");this._updatePlaybackRate(),e.add(t,"error",this.handlePlayerError,!0),e.add(t,"playing",this.handlePlaying),e.add(r.default,"mediaPlaying",this.handleOtherPlaying),(h.default.isGecko||h.default.isSafari)&&(this.props.autoPlay?(this.checkIteration=0,this.checkForSuccessInterval=this.props.setInterval(this.checkForSuccess,250)):this.props.autoPlay?this.startCheckForSuccess():e.add(t,"play",this.startCheckForSuccess))}componentWillUnmount(){h.default.isBlink&&(0,d.default)((0,i.default)(this._audioElement,"this._audioElement"))}componentDidUpdate(){this._updatePlaybackRate()}_updatePlaybackRate(){const e=(0,i.default)(this._audioElement,"this._audioElement"),{playbackRate:t}=this.props;e.defaultPlaybackRate===t&&e.playbackRate===t||(e.defaultPlaybackRate=e.playbackRate=null!=t?t:1)}render(){return(0,p.jsx)("div",{className:this.props.className,children:(0,p.jsx)("audio",{ref:this._setRefAudio,className:l.default.audioTag,src:this.props.url,onClick:this.props.onClick,controls:this.props.controls,preload:this.props.preload,autoPlay:this.props.autoPlay,children:this.props.children})})}}m.displayName="AudioTag";var g=(0,c.default)((0,u.default)(m));t.default=g},88654:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{docMsgs:t,chat:a}=e,s=(0,i.default)(e,["docMsgs","chat"]),g=(0,p.default)(),x=(0,o.useRef)(null);let C;(0,f.useListener)(t,"add remove reset query_doc_before",(()=>{var e;null===(e=x.current)||void 0===e||e.forceUpdate()})),d.default.supportsFeature(d.default.F.MD_BACKEND)&&a.endOfHistoryTransferType===l.ConversationEndOfHistoryTransferModelPropType.COMPLETE_BUT_MORE_MESSAGES_REMAIN_ON_PRIMARY&&(C=(0,m.jsx)(r.default,{icon:(0,m.jsx)(h.default,{name:"content-chat"}),theme:"list",secondary:c.default.t(750),children:c.default.t(751)}));return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(u.default,(0,n.default)({ref:x,msgsCollection:t,queryCollection:(e,s)=>{g((()=>{t.queryDocs(a,s)}))},hasBefore:t.hasDocBefore,queryBefore:t.queryDocBefore,emptyText:c.default.t(1413),chat:a},s)),C]})};var n=s(a(81109)),i=s(a(6479)),o=a(67294),l=a(58380),r=s(a(52384)),d=s(a(12950)),c=s(a(2408)),u=s(a(26630)),h=s(a(2966)),f=a(61192),p=s(a(20994)),m=a(85893)},38946:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{chat:t,groupMetadata:a,onClick:s,theme:n}=e;return a?(0,x.jsx)(j,{groupMetadata:a,onClick:s,theme:n}):(0,x.jsx)(v,{chat:t,onClick:s,theme:n})},t.BaseEphemeralSettingRow=S;var n=a(67294),i=a(38512),o=s(a(34142)),l=s(a(69162)),r=s(a(75940)),d=s(a(92787)),c=s(a(35346)),u=a(31140),h=s(a(2408)),f=a(21134),p=s(a(79485)),m=s(a(2966)),g=a(97504),x=a(85893);class C extends n.PureComponent{constructor(...e){super(...e),this._getEphemeralDuration=()=>{var e;return null!==(e=this.props.chat.ephemeralDuration)&&void 0!==e?e:0},this._unblockContact=()=>{const{chat:e,onClick:t}=this.props;e.contact.addPendingAction((0,i.unblockContact)(e.contact)).then((()=>{t(),l.default.closeModal()})).catch((()=>{}))},this._closeModal=()=>{l.default.closeModal()},this._openUnblockContactModal=()=>{l.default.openModal((0,x.jsx)(r.default,{onOK:this._unblockContact,okText:h.default.t(1790),onCancel:this._closeModal,cancelText:h.default.t(1996),children:this._getEphemeralDuration()?h.default.t(900):h.default.t(901)}))},this._handleClick=()=>{const{chat:e,onClick:t}=this.props;e.contact.isContactBlocked?this._openUnblockContactModal():t()}}render(){return(0,x.jsx)(S,{ephemeralDuration:this._getEphemeralDuration(),canChange:!0,onClick:this._handleClick,theme:this.props.theme})}}C.CONCERNS={chat:["contact","ephemeralDuration"]},C.displayName="ContactEphemeralSettingRow";const v=(0,p.default)(C,C.CONCERNS);class _ extends n.PureComponent{constructor(...e){super(...e),this._closeModal=()=>{l.default.closeModal()},this._openNonAdminModal=()=>{l.default.openModal((0,x.jsx)(r.default,{onOK:this._closeModal,okText:h.default.t(2183),children:h.default.t(841)}))},this._handleClick=()=>{const{onClick:e,groupMetadata:t}=this.props;t.canSetEphemeralSetting()?e():this._openNonAdminModal()}}render(){var e;const{groupMetadata:t}=this.props;return(0,x.jsx)(S,{ephemeralDuration:null!==(e=t.ephemeralDuration)&&void 0!==e?e:0,canChange:t.canSetEphemeralSetting(),onClick:this._handleClick,theme:this.props.theme})}}_.CONCERNS={groupMetadata:["ephemeralDuration","participants"]},_.displayName="GroupEphemeralSettingRow";const j=(0,p.default)(_,_.CONCERNS);function S(e){const{ephemeralDuration:t,canChange:a,onClick:s}=e;let n;n=t>0?a?(0,f.isEphemeral24HDurationEnabled)()?(0,u.getDisappearingMessageDurationString)(t):h.default.t(895):(0,u.getDisappearingMessageExplanationString)(t):h.default.t(894);const i=(0,x.jsx)(m.default,{className:a?c.default.chevronIcon:c.default.ephemeralIcon,name:a?"chevron-right-alt":"disappearing",directional:!0});return"new-chat-info"===e.theme?(0,x.jsxs)(o.default,{side:"chevron",icon:"disappearing",onClick:s,multiline:!0,children:[(0,x.jsx)(g.TextSpan,{theme:"title",children:h.default.t(1026)}),(0,x.jsx)(g.TextDiv,{theme:"muted",children:n})]}):(0,x.jsxs)(d.default,{onClick:s,side:i,multiline:!0,children:[(0,x.jsx)("div",{className:c.default.header,children:(0,x.jsx)(g.TextSpan,{theme:"title",children:h.default.t(1026)})}),(0,x.jsx)(g.TextDiv,{theme:"muted",children:n})]})}},46144:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{linkMsgs:t,chat:a,selectedMessages:s,selectable:v,onMessageSelect:_}=e,j=(0,x.default)(),S=(0,o.useRef)(null);let M;(0,g.useListener)(t,"add remove reset",(()=>{var e;null===(e=S.current)||void 0===e||e.forceUpdate()})),(0,g.useListener)(t,"query_doc_before",(()=>{var e;null===(e=S.current)||void 0===e||e.forceUpdate()})),(0,g.useListener)(a.msgs,"add bulk_add",(e=>{if(!e)return;const a=[],s=Array.isArray(e)?e:[e];Promise.all(s.map((e=>(e.getLinks().length&&a.push(e),Promise.resolve())))).then((()=>{a.length&&t.add(a)}))})),c.default.supportsFeature(c.default.F.MD_BACKEND)&&a.endOfHistoryTransferType===l.ConversationEndOfHistoryTransferModelPropType.COMPLETE_BUT_MORE_MESSAGES_REMAIN_ON_PRIMARY&&(M=(0,C.jsx)(d.default,{icon:(0,C.jsx)(m.default,{name:"content-chat"}),theme:"list",secondary:u.default.t(750),children:u.default.t(753)}));const{linkMsgs:E,chat:b}=e,T=(0,i.default)(e,["linkMsgs","chat"]);return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(f.default,(0,n.default)({ref:S,msgsCollection:t,queryCollection:(e,s)=>{j((()=>{t.queryLinks(a,s)}))},hasBefore:t.hasLinkBefore,queryBefore:t.queryLinkBefore,renderElements:e=>{const a=[];return t.forEach((t=>{const n=!t.isSentByMe&&t.isGroupMsg;t.getGalleryLinks().forEach(((i,o)=>{i.href!==t.matchedText&&a.push((0,C.jsx)(h.default,{msg:t.safe(),link:i,displayAuthor:n,selectable:v,selectedMessages:s,onMessageSelect:_,onClickMsg:e},`${t.id.toString()}-${o}`))})),t.linkPreview&&a.push((0,C.jsx)(p.default,{msg:t,selectable:v,selectedMessages:s,onMessageSelect:_,displayType:r.default.DISP_TYPE.GALLERY,onClickMsg:e},t.id.toString()))})),a.reverse(),a},emptyText:u.default.t(1415),chat:a},T)),M]})};var n=s(a(81109)),i=s(a(6479)),o=a(67294),l=a(58380),r=s(a(55454)),d=s(a(52384)),c=s(a(12950)),u=s(a(2408)),h=s(a(56512)),f=s(a(26630)),p=s(a(14784)),m=s(a(2966)),g=a(61192),x=s(a(20994)),C=a(85893)},56512:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(94184)),i=a(67294),o=s(a(17850)),l=a(68551),r=s(a(55454)),d=s(a(85051)),c=s(a(16712)),u=s(a(2408)),h=s(a(4949)),f=s(a(26976)),p=s(a(71681)),m=s(a(18416)),g=s(a(79485)),x=s(a(55193)),C=s(a(82669)),v=a(61211),_=a(85893);class j extends i.Component{constructor(e){super(e),this.mouseOver=()=>{this.state.hover||this.setState({hover:!0})},this.mouseEnter=()=>{this.state.hover||this.setState({hover:!0})},this.mouseLeave=()=>{this.state.hover&&this.setState({hover:!1})},this.handleSelectChange=e=>{this.state.selected!==e&&this.setState({selected:e})},this.handleSelectClick=e=>{e&&e.stopPropagation(),this.props.onMessageSelect(this.props.msg.unsafe(),!this.state.selected)},this.handleClick=()=>{this.props.onClickMsg(this.props.msg.unsafe(),!this.state.selected)};const{msg:t,selectedMessages:a}=e;this.state={hover:!1,selected:a.isSelected(t.unsafe())}}componentDidMount(){this.props.listeners.add(this.props.selectedMessages,this.props.msg.id.toString(),this.handleSelectChange)}render(){const{msg:e,link:t,displayAuthor:a}=this.props,s=this.props.selectable||this.state.hover?(0,_.jsx)(m.default,{checked:this.state.selected,onClick:this.handleSelectClick,msgTheme:"gallery"}):null,i=(0,l.Conversation)({mentions:e.mentionMap(),links:e.getLinks(),selectable:true,trusted:e.isTrusted()}),p=e.body&&e.body.includes(t.url)?e.body:e.caption,g=a?(0,_.jsx)("div",{className:h.default.author,children:(0,_.jsx)(o.default,{msg:e,contact:e.senderObj})}):null,j=e.getSuspiciousLinks().length>0;return(0,_.jsx)(c.default,{hover:this.state.hover,onClick:this.handleClick,onMouseEnter:this.state.hover?null:this.mouseEnter,onMouseOver:this.state.hover?null:this.mouseOver,onMouseLeave:this.state.hover?this.mouseLeave:null,children:(0,_.jsxs)("div",{className:h.default.msg,children:[(0,_.jsx)(C.default,{transitionName:"delay-leave",children:s}),(0,_.jsx)(v.MessageContainer,{isSentByMe:e.isSentByMe,children:(0,_.jsxs)("div",{className:(0,n.default)(h.default.bubble,{[h.default.hasAuthor]:a,[h.default.hasSuspiciousLinks]:j}),children:[g,(0,_.jsx)(x.default,{link:t,displayType:r.default.DISP_TYPE.GALLERY}),(0,_.jsx)(f.default,{title:t.url,isSentByMe:e.isSentByMe,canonicalUrl:t.domain,displayType:r.default.DISP_TYPE.GALLERY,star:e.star}),(0,_.jsx)(d.default,{text:p,selectable:true,className:h.default.text,dirMismatch:e.rtl!==u.default.isRTL(),direction:e.dir,formatters:i})]})})]})})}}j.CONCERNS={msg:["body","caption","dir","id","isSentByMe","mediaData","type","rtl","senderObj","star","mediaData","asRevoked"]},j.displayName="LinkMsg";var S=(0,p.default)((0,g.default)(j,j.CONCERNS));t.default=S},52963:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{fullCollection:t,selectedMessages:a,mediaMsgs:s,selectable:n,onMessageSelect:v,theme:w}=e,N=(0,E.default)(e.chat,["linkCount","docCount","productCount","endOfHistoryTransferType"]),P=(0,S.default)(),A=(0,T.default)();(0,M.useListener)(s,"add query_media_before",(()=>{P()})),(0,M.useListener)(s,"remove",(e=>{a&&a.isSelected(e)&&a.setVal(e,!1),P()})),(0,M.useListener)(s,"reset",(()=>{a&&a.unsetAll(),P()}));const k=function(e,t,a,s,n,r){let d=null;const u=(0,l.default)(e).filter(y).slice(0,t?e.length:6);return(0,o.default)(u,((e,o)=>{const l=!t&&o>=3&&o<=5?"hideableSecondRow":void 0,u=(0,I.jsx)(m.default,{className:r?g.default.roundedThumb:"",aspectRatio:r?1.1:1,msg:e,hoverEvent:t,selectable:a,selectedMessages:s,onMessageSelect:n,theme:l},e.id.toString());if(!t)return[u];const h=c.default.monthStr(e.t);if(h!==d){d=h;const t=(0,I.jsx)(x.default,{children:h},`header-${e.t}`);return[...(0,i.default)(6,(t=>(0,I.jsx)(C.EmptyCanvas,{},`padding-${e.t}-${t}`))),t,u]}return[u]}))}(s.toArray(),t,n,a,v,"new-chat-info"===w),O=e=>{s.hasMediaBefore&&A((()=>{s.queryMedia({chat:(0,_.unproxy)(N),msg:e})}))},R=(0,b.default)((e=>{s.hasMediaBefore&&e.scrollTop+u.default.SCROLL_FUDGE>e.scrollHeight-e.clientHeight&&O(s.head())}),100);let D;if((0,r.useEffect)((()=>{s.hasMediaBefore&&O()}),[]),f.default.supportsFeature(f.default.F.MD_BACKEND)&&N.endOfHistoryTransferType===d.ConversationEndOfHistoryTransferModelPropType.COMPLETE_BUT_MORE_MESSAGES_REMAIN_ON_PRIMARY){let e;t?e=p.default.t(754):0===s.length&&0===N.docCount&&0===N.linkCount&&0===N.productCount&&(e=p.default.t(752)),D="new-chat-info"===w?(0,I.jsx)(h.default,{theme:"new-chat-info",secondary:p.default.t(750),children:e}):(0,I.jsx)(h.default,{icon:(0,I.jsx)(j.default,{name:"content-chat"}),theme:"list",secondary:p.default.t(750),children:e})}return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(C.default,{medias:k,mediaCollection:s,fullCollection:t,chat:(0,_.unproxy)(N),onScroll:e=>{R(e.currentTarget)},theme:w}),D]})};var i=n(a(98913)),o=n(a(94654)),l=n(a(31351)),r=a(67294),d=a(58380),c=n(a(25142)),u=n(a(55454)),h=n(a(52384)),f=n(a(12950)),p=n(a(2408)),m=n(a(46786)),g=n(a(86281)),x=n(a(62381)),C=s(a(83427)),v=a(1393),_=a(15298),j=n(a(2966)),S=n(a(45172)),M=a(61192),E=n(a(76006)),b=n(a(16297)),T=n(a(20994)),I=a(85893);function y(e){return!f.default.supportsFeature(f.default.F.MD_BACKEND)||(0,v.hasThumbnail)(e.mediaData)}},46786:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(94184)),i=a(67294),o=s(a(69162)),l=s(a(71681)),r=s(a(49694)),d=s(a(32666)),c=s(a(1393)),u=a(90672),h=a(15298),f=a(85893);class p extends i.Component{constructor(){super(...arguments),this.setRefImg=e=>{this.img=e},this._handleSelectChange=e=>{this.state.selected!==e&&this.setState({selected:e})},this.handleClick=e=>{const{msg:t,selectable:a,onMessageSelect:s}=this.props,n=t.mediaData;if(a&&s)return void s(t,!this.state.selected);if(n.mediaStage===u.MEDIA_DATA_STAGE.ERROR_MISSING)return void o.default.openModal((0,f.jsx)(d.default,{msg:t}));let i;e&&e.stopPropagation();const l=t.id;if(n.isGif||n.type===r.default.TYPE.IMAGE){const e=this.img;i=t=>l.equals(t)&&e?e:null}o.default.mediaViewerModal({msg:(0,h.unproxy)(t),getZoomNode:i})},this.handleDragStart=e=>{e.nativeEvent.dataTransfer.setData("text/uri-list",this.props.msg.mediaData.renderableUrl)};const{msg:e,selectedMessages:t}=this.props;this.state={selected:!(!t||!t.isSelected(e))}}componentDidMount(){this.props.selectedMessages&&this.props.listeners.add(this.props.selectedMessages,this.props.msg.id.toString(),this._handleSelectChange)}render(){const{msg:e,hoverEvent:t,selectable:a,onMessageSelect:s,theme:i,className:o}=this.props,l=e.mediaData,d=l.type===r.default.TYPE.IMAGE&&l.renderableUrl?this.handleDragStart:null,u=(0,n.default)(o);return(0,f.jsx)(c.default,{classes:u,onClick:this.handleClick,hoverEvent:t,selectable:a,selected:this.state.selected,onMessageSelect:s,onDragStart:d,msg:e,theme:i,imgRef:this.setRefImg,aspectRatio:this.props.aspectRatio})}}p.displayName="MediaCanvas";var m=(0,l.default)(p);t.default=m},62381:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.jsx)("div",{className:n.default.container,children:e.children})};var n=s(a(49866)),i=a(85893)},1393:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.hasThumbnail=E,t.default=t.MediaThumb=void 0;var n=s(a(94184)),i=a(67294),o=s(a(88540)),l=a(9492),r=s(a(71681)),d=s(a(75571)),c=s(a(49694)),u=s(a(20720)),h=s(a(70950)),f=s(a(84331)),p=s(a(88064)),m=a(90672),g=s(a(80747)),x=s(a(4231)),C=s(a(2966)),v=s(a(69217)),_=s(a(63477)),j=s(a(54136)),S=a(85893);class M extends i.Component{constructor(...e){super(...e),this.state={hover:!1,tooltip:null},this._setRefImg=e=>{this._img=e},this._setRefContainer=e=>{this._container=e},this._handleSelectClick=()=>{this.props.onMessageSelect&&this.props.onMessageSelect(this.props.msg,!this.props.selected)},this._handleMouseOver=()=>{this.state.hover||this.setState({hover:!0})},this._handleMouseEnter=e=>{this.state.hover||(e.persist(),this.setState({hover:!0},(()=>this._startTooltipTimer(e.target))))},this._handleMouseLeave=()=>{this.state.hover&&(null!=this._tooltipTimer&&this.props.clearTimeout(this._tooltipTimer),this.setState({hover:!1,tooltip:null}))},this.maybeDownloadMediaMD=()=>{const{msg:e}=this.props;e.mediaData.preview||e.mediaData.fullPreviewData||e.mediaData.type!==c.default.TYPE.IMAGE&&e.mediaData.type!==c.default.TYPE.VIDEO||e.downloadMedia({downloadEvenIfExpensive:!1,isUserInitiated:!1,rmrReason:x.default.WEBC_RMR_REASON_CODE.MEDIA_VIEWER})},this._renderImgNode=(e,t,a,s)=>{const n=a?(0,S.jsx)("div",{className:u.default.shade}):null,i=t?{backgroundImage:`url(${t})`}:null;return(0,S.jsxs)("div",{className:e,style:i,onClick:this.props.onClick,ref:this._setRefImg,onDragStart:this.props.onDragStart,draggable:null!=this.props.onDragStart||null,children:[s,n]})},this._downloadMedia=()=>{this.props.msg.downloadMedia({downloadEvenIfExpensive:!1,isUserInitiated:!1,rmrReason:x.default.WEBC_RMR_REASON_CODE.MEDIA_VIEWER})},this._dismissTooltip=()=>{this.setState({tooltip:null})},this._renderImg=()=>{var e;const{msg:{mediaData:t},preferPreview:a}=this.props;switch(t.type){case c.default.TYPE.AUDIO:return this._renderImgNode(`${u.default.mediaCanvas} attach-media-audio-thumb`);case c.default.TYPE.VIDEO:const s=(0,n.default)(u.default.mediaCanvas,{"media-video-thumb":t.isGif&&!t.preview}),i=null===(e=t.preview)||void 0===e?void 0:e.url();return this._renderImgNode(s,i,!0);case c.default.TYPE.IMAGE:const o=e=>{var a;const s=null!=e?(0,S.jsx)("div",{className:u.default.mediaCanvas,style:{backgroundImage:`url(${e})`}}):null;return this._renderImgNode(u.default.mediaCanvas,null===(a=t.preview)||void 0===a?void 0:a.url(),this.props.msg.star,s)},l=()=>t.preview?o(null):this._renderImgNode(u.default.mediaCanvas,null,this.props.msg.star);return a?l():(0,S.jsx)("div",{className:u.default.mediaCanvas,children:(0,S.jsx)(g.default,{mediaData:t,placeholderRenderer:l,renderProgressively:!0,downloadMedia:this._downloadMedia,children:o})});default:return this._renderImgNode(null,null,this.props.msg.star)}}}componentDidMount(){this.props.listeners.add(this.props.msg.mediaData,"change:preview",(()=>{this.forceUpdate()})),this.props.listeners.add(this.props.msg,"change:star",(()=>{this.forceUpdate()})),this.props.imgRef&&this.props.imgRef(this._img),this.props.containerRef&&this.props.containerRef(this._container),this.maybeDownloadMediaMD(),this.props.listeners.add(this.props.msg.mediaData,"change:mediaStage",(()=>{this.props.msg.mediaData.mediaStage===m.MEDIA_DATA_STAGE.RESOLVED&&this.forceUpdate()}))}componentDidUpdate(){this.props.imgRef&&this.props.imgRef(this._img),this.props.containerRef&&this.props.containerRef(this._container)}componentWillUnmount(){this.props.imgRef&&this.props.imgRef(null),this.props.containerRef&&this.props.containerRef(null)}_getTooltip(e){if(!(this._shouldShowTooltip()&&e instanceof HTMLElement))return null;const t=e.offsetWidth;return{menu:(0,S.jsx)(p.default,{msg:this.props.msg}),anchor:e,dirY:l.DirY.TOP,dirX:l.DirX.CENTER,offsetX:this.props.active?.5*-t*.13:0,type:l.MenuType.tooltip}}_startTooltipTimer(e){null!=this._tooltipTimer&&this.props.clearTimeout(this._tooltipTimer),this._tooltipTimer=this.props.setTimeout((()=>{this._tooltipTimer=null,this._showTooltip(e)}),500)}_showTooltip(e){this.setState({tooltip:this._getTooltip(e)})}_shouldShowTooltip(){return!!this.props.showTooltip&&"viewerFlowTransparent"!==this.props.theme}render(){var e;const{msg:t,selectable:a,theme:s,active:i}=this.props,l=this.props.selected||!1;let r;(a||this.state.hover&&this.props.hoverEvent)&&(r=(0,S.jsxs)("div",{className:u.default.mediaSelect,children:[(0,S.jsx)("div",{className:u.default.shadeTop,onClick:this.props.onClick}),(0,S.jsx)(o.default,{onChange:this._handleSelectClick,hover:this.state.hover,checked:l})]}));const d=(0,n.default)(this.props.classes,u.default.canvasComponent,{[u.default.canvasSelected]:l,[u.default.canvasSecondRow]:"hideableSecondRow"===s,[u.default.viewerFlow]:"viewerFlow"===s||"viewerFlowTransparent"===s,[u.default.viewerFlowTransparent]:"viewerFlowTransparent"===s,[u.default.active]:i}),c=t.star?(0,S.jsx)("div",{className:u.default.iconStar,children:(0,S.jsx)(C.default,{name:"star"})}):null,p=E(t.mediaData),m=this.state.tooltip?(0,S.jsx)(_.default,{displayName:"MediaThumbTitle",popable:!0,escapable:!0,requestDismiss:this._dismissTooltip,requestRecentFocusOnUnmount:!1,children:(0,S.jsx)(j.default,{tooltip:this.state.tooltip})}):null,g={paddingTop:1/(null!==(e=this.props.aspectRatio)&&void 0!==e?e:1)*100+"%"};return p?(0,S.jsxs)("div",{ref:this._setRefContainer,className:d,onMouseOver:this._handleMouseOver,onMouseEnter:this._handleMouseEnter,onMouseLeave:this._handleMouseLeave,children:[r,(0,S.jsxs)("div",{className:u.default.canvasBody,children:[(0,S.jsx)(f.default,{mediaData:t.mediaData}),(0,S.jsx)(h.default,{mediaData:t.mediaData,selected:l}),c]}),this._renderImg(),m,(0,S.jsx)("div",{style:g})]}):null}}function E(e){switch(e.type){case c.default.TYPE.VIDEO:case c.default.TYPE.IMAGE:if(e.preview||e.fullPreviewData||e.mediaStage===m.MEDIA_DATA_STAGE.RESOLVED)return!0;if(d.default.has(e.filehash)){try{d.default.getOrCreateURL(e.filehash)}catch(e){return!1}return!0}return!1;default:return!0}}t.MediaThumb=M,M.displayName="MediaThumb";var b=(0,v.default)((0,r.default)(M));t.default=b},70950:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{selected:t,mediaData:a}=e;switch(a.type){case o.default.TYPE.AUDIO:return(0,r.jsx)(d,{duration:a.duration,selected:t});case o.default.TYPE.VIDEO:return a.isGif?null:(0,r.jsx)(d,{duration:a.duration,selected:t});default:return null}};var n=s(a(94184)),i=s(a(25142)),o=s(a(49694)),l=s(a(8829)),r=a(85893);function d({duration:e,selected:t}){const a=i.default.durationStr(e);return a?(0,r.jsx)("span",{className:(0,n.default)(l.default.container,{[l.default.selected]:t}),children:a}):null}},84331:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{mediaData:t}=e;if(!t)return null;const a=function(e){switch(e.type){case n.default.TYPE.AUDIO:return"msg-audio";case n.default.TYPE.VIDEO:return e.isGif?"msg-gif":"msg-video";default:return null}}(t);return null==a?null:(0,l.jsx)("div",{className:i.default.iconType,children:(0,l.jsx)(o.default,{name:a})})};var n=s(a(49694)),i=s(a(31318)),o=s(a(2966)),l=a(85893)},88064:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{msg:{senderObj:{formattedShortName:t}}}=e;return(0,n.jsx)(s.TextSpan,{children:t})};var s=a(97504),n=a(85893)},26630:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(67294),i=s(a(69162)),o=s(a(55454)),l=a(92231),r=s(a(52715)),d=s(a(79011)),c=s(a(14784)),u=a(15298),h=s(a(45172)),f=s(a(16297)),p=a(85893);function m(e,t){const{queryBefore:a,hasBefore:s,msgsCollection:m,emptyText:g,scrollOffset:x=0,selectable:C,onMessageSelect:v,queryCollection:_,selectedMessages:j,renderElements:S,onProductDetail:M,setScrollOffset:E}=e,b=(0,h.default)();(0,n.useImperativeHandle)(t,(()=>({forceUpdate:b})));const T=(0,n.useRef)(null),I=e=>{s&&_(e)},y=(0,f.default)((e=>{const t=e.scrollHeight-e.clientHeight-e.scrollTop<o.default.SCROLL_FUDGE;s&&t&&I(m.head()),E&&E(e.scrollTop)}),100);(0,n.useEffect)((()=>{s&&I();const e=T.current;return e&&(e.scrollTop=x),()=>{y.cancel()}}),[]);const w=(e,t)=>{const a=(0,u.unproxy)(e);C&&void 0!==t?v(a,t):i.default.openChatAt(a.chat,a.chat.getSearchContext(a))},N=S?S(w):m.map(((e,t)=>(0,p.jsx)(c.default,{msg:e,selectable:C,selectedMessages:j,onMessageSelect:v,displayType:o.default.DISP_TYPE.GALLERY,onClickMsg:w,onProductClick:M},`${e.id.toString()}_${t}`))).reverse();if(a){if(0===N.length)return(0,p.jsx)(l.Loading,{});N.push((0,p.jsx)(r.default,{}))}return 0!==m.length||a||s?(0,p.jsx)("div",{ref:T,onScroll:e=>{y(e.target)},className:d.default.wrapper,children:N}):(0,p.jsx)(l.Empty,{text:g,a8nText:"no-elements"})}var g=(0,n.forwardRef)(m);t.default=g},93450:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,g.default)(e.chat,["isGroup","muteExpiration","archive"]),a=(0,g.default)(e.mute,["isMuted"]),s=(0,g.default)(e.settings,["showArchiveV2"]),C=e=>{r.default.muteChat((0,f.unproxy)(t),e)},v=()=>{C(!1),r.default.closeModal()},_=a.isMuted,j=t.muteExpiration;if(t.archive&&(0,u.archiveV2Supported)()&&s.showArchiveV2)return(0,x.jsx)(c.default,{children:(0,x.jsx)(m.TextSpan,{theme:"muted",size:"16",children:h.default.t(268)})});const S=_?()=>{const e=t.isGroup?h.default.t(729):h.default.t(726);r.default.openModal((0,x.jsx)(d.default,{onOK:v,okText:h.default.t(112),onCancel:()=>r.default.closeModal(),cancelText:h.default.t(1996),children:e}))}:()=>{C(!0)},M=(0,x.jsx)(o.default,{checked:_,onChange:S}),E=_?h.default.t(2005):h.default.t(2164),b="new-chat-info"===e.theme;let T;if(_&&j){const e=l.default.untilStr(j);T=(0,x.jsx)(m.TextDiv,{theme:"muted",children:e})}if(b){const e=(0,x.jsx)(p.default,{checked:_,onChange:S});return(0,x.jsxs)(i.default,{icon:"settings-notifications",a8nText:n.default.key("block-mute"),side:e,onClick:S,multiline:!(!_||!j),children:[(0,x.jsx)(m.TextSpan,{theme:"title",children:E}),T]})}return(0,x.jsxs)(c.default,{a8nText:n.default.key("block-mute"),side:M,onClick:S,multiline:!(!_||!j),children:[(0,x.jsx)(m.TextSpan,{theme:"title",children:E}),T]})};var n=s(a(76610)),i=s(a(34142)),o=s(a(33287)),l=s(a(25142)),r=s(a(69162)),d=s(a(75940)),c=s(a(92787)),u=a(78615),h=s(a(2408)),f=a(15298),p=s(a(75910)),m=a(97504),g=s(a(76006)),x=a(85893)},16505:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{productMsgs:t,chat:a}=e,s=(0,i.default)(e,["productMsgs","chat"]),g=(0,o.useRef)(null);(0,f.useListener)(t,"add remove reset",(()=>{var e;null===(e=g.current)||void 0===e||e.forceUpdate()}));const x=(0,p.default)();let C;d.default.supportsFeature(d.default.F.MD_BACKEND)&&a.endOfHistoryTransferType===l.ConversationEndOfHistoryTransferModelPropType.COMPLETE_BUT_MORE_MESSAGES_REMAIN_ON_PRIMARY&&(C=(0,m.jsx)(r.default,{icon:(0,m.jsx)(h.default,{name:"content-chat"}),theme:"list",secondary:c.default.t(750),children:c.default.t(756)}));return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(u.default,(0,n.default)({ref:g,msgsCollection:t,queryCollection:e=>x((()=>{t.queryProducts(a,e)})),hasBefore:t.hasProductBefore,queryBefore:t.hasProductBefore?Promise.resolve():null,emptyText:c.default.t(1419),chat:a},s)),C]})};var n=s(a(81109)),i=s(a(6479)),o=a(67294),l=a(58380),r=s(a(52384)),d=s(a(12950)),c=s(a(2408)),u=s(a(26630)),h=s(a(2966)),f=a(61192),p=s(a(20994)),m=a(85893)},75910:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({checked:e,onChange:t,tabIndex:a,id:s}){const c=(0,n.useRef)(null),[u,h]=(0,o.default)(),f=(0,l.default)(c,u);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("input",{ref:f,className:(0,i.default)(d.hiddenInput),checked:e,onChange:function(e){e.stopPropagation();const a=c.current;null!=a&&a.focus(),t(e)},type:"checkbox",tabIndex:null!=a?a:0,id:s}),(0,r.jsxs)("div",{className:(0,i.default)(d.container),onClick:function(){const e=c.current;null!=e&&e.click()},tabIndex:-1,"aria-hidden":"true","data-testid":"visual-switch",children:[(0,r.jsx)("div",{className:(0,i.default)(d.button,e&&d.buttonChecked,h&&d.buttonFocused)}),(0,r.jsx)("div",{className:(0,i.default)(d.track,e&&d.trackChecked)})]})]})};var n=a(67294),i=s(a(56720)),o=s(a(2887)),l=s(a(69509)),r=a(85893);const d={container:{display:"i86elurf",justifyContent:"ac2vgrno",alignItems:"gndfcl4n",width:"tknnhhou",height:"jdwybkuq",marginTop:"g1eqewly",marginEnd:"kjemk6od",marginBottom:"kzyzudjh",marginStart:"k6y3xtnu",position:"g0rxnol2",cursor:"ajgl1lbb"},button:{height:"jdwybkuq",width:"m0s4cjtr",borderTopStartRadius:"ikqdvm1y",borderTopEndRadius:"m3qqxsiz",borderBottomEndRadius:"r1ncx0sg",borderBottomStartRadius:"mmj7r7ye",backgroundColor:"lbj9vhti",position:"lhggkp7q",left:"tukmaf4q",transitionProperty:"bo8jc6qi",transitionDuration:"nbciif1m",transitionTimingFunction:"oa9ii99z",boxShadow:"hjje1qk3"},buttonChecked:{transform:"e95mh68g",backgroundColor:"my8w5w2u"},buttonFocused:{boxShadow:"r6unq4of"},track:{width:"tknnhhou",height:"icj6mcig",backgroundColor:"masnrobp",borderTopStartRadius:"i3rsbmdh",borderTopEndRadius:"d6h2ibm4",borderBottomEndRadius:"rh5xaqwm",borderBottomStartRadius:"e6tbvuqx"},trackChecked:{backgroundColor:"hza3nq4c"},hiddenInput:{position:"lhggkp7q",width:"cxec7x23",height:"kanlod6e",overflowX:"gfz4du6o",overflowY:"r7fjleex",clip:"nmeg1xfo",clipPath:"okm7a8wg",whiteSpace:"le5p0ye3"}}},58728:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const{theme:e}=(0,i.useContext)(o.default);return(0,i.useMemo)((()=>(0,n.default)((0,n.default)({},"dark"===e?r:l),d)),[e])};var n=s(a(81109)),i=a(67294),o=s(a(13038));const l={"--c-text-primary-strong":"#000","--c-text-primary":"rgba(0, 0, 0, 0.87)","--c-text-secondary-lighter":"rgba(0, 0, 0, 0.45)","--c-text-medium-emphasis":"#627885","--c-icon-medium-emphasis":"#7e98a8","--c-icon-high-emphasis":"#00a884","--c-danger":"#d70000","--c-green":"#1fa855","--text-input-hover-background":"#e9edef","--switch-button-color":"#ececec","--switch-button-checked-color":"#018579","--switch-track-color":"#b2b2b2","--switch-track-checked-color":"#b2dbd7"},r={"--c-text-primary-strong":"#E6EEF2","--c-text-primary":"#E6EEF2","--c-text-secondary-lighter":"#7E98A8","--c-text-medium-emphasis":"#7E98A8","--c-icon-medium-emphasis":"#7E98A8","--c-icon-high-emphasis":"#00A884","--c-danger":"#f15c6d","--c-green":"#23cc63","--text-input-hover-background":"rgba(255, 255, 255, 0.3)","--switch-button-color":"#83929d","--switch-button-checked-color":"#01a581","--switch-track-color":"#334046","--switch-track-checked-color":"#0b463f"},d={"--text-title-color":"var(--c-text-primary-strong)","--text-section-title-color":"var(--c-text-secondary-lighter)","--cell-chat-title-color":"var(--c-text-primary-strong)","--cell-chat-secondary-color":"var(--c-text-secondary-lighter)","--svg-secondary-color":"var(--c-icon-medium-emphasis)","--primary-strong":"var(--c-text-primary-strong)","--primary":"var(--c-text-primary)","--primary-muted":"var(--c-text-secondary-lighter)","--teal":"var(--c-icon-high-emphasis)","--danger":"var(--c-danger)","--secondary":"var(--c-text-secondary-lighter)","--secondary-lighter":"var(--c-text-secondary-lighter)","--button-alternative":"var(--c-icon-high-emphasis)","--link-alt":"var(--c-icon-high-emphasis)","--chat-marker-admin-border":"var(--c-green)","--chat-marker-admin":"var(--c-green)","--text-input-empty-value-placeholder":"var(--c-icon-high-emphasis)"}},50692:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(69162)),i=s(a(75940)),o=s(a(17025)),l=s(a(18260)),r=s(a(85051)),d=s(a(99942)),c=s(a(2408)),u=a(97449),h=a(85893);class f extends d.default{constructor(...e){super(...e),this.contactFilter=e=>{const t=this.props.chat.groupMetadata;return!!o.default.isFilteredContact(e)&&(!(null==t?void 0:t.participants.get(e.id))||c.default.t(254))},this.confirmAddParticipant=e=>{const t=this.onAddParticipant.bind(this,e),a=c.default.t(710,{participant:e.formattedName,subject:this.props.chat.contact.name});this.push((0,h.jsx)(i.default,{onOK:t,okText:c.default.t(242),onCancel:this._pop,cancelText:c.default.t(1996),children:(0,h.jsx)(r.default,{text:a})}))},this.onAddParticipant=e=>{(0,u.addParticipants)(this.props.chat,[e]).catch((()=>{})),n.default.closeModal()},this._pop=()=>{this.pop()}}componentDidMount(){this.push((0,h.jsx)(l.default,{title:c.default.t(242),filter:this.contactFilter,onCancel:this._pop,onSelect:this.confirmAddParticipant}))}}t.default=f},70569:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(82754),o=n(a(69162)),l=n(a(75940)),r=n(a(17025)),d=n(a(85051)),c=n(a(99942)),u=n(a(2408)),h=a(97449),f=s(a(57774)),p=a(85893);class m extends c.default{constructor(...e){super(...e),this._isGroupParticipant=e=>{var t;const{chat:a}=this.props;return!!(null===(t=a.groupMetadata)||void 0===t?void 0:t.participants.get(e))},this.customSecondaryText=e=>{var t;const{chat:a}=this.props;return(null===(t=a.groupMetadata)||void 0===t?void 0:t.participants.get(e))?u.default.t(254):null},this.contactFilter=e=>{const t=this.props.chat.groupMetadata;return!!r.default.isFilteredContact(e)&&(!(null==t?void 0:t.participants.get(e.id))||u.default.t(254))},this.confirmAddParticipant=e=>{const{chat:t}=this.props;this.push((0,p.jsx)(l.default,{onOK:this.onAddParticipant.bind(this,e),okText:u.default.t(242,{_plural:e.length}),onCancel:this._pop,cancelText:u.default.t(1996),children:(0,p.jsx)(d.default,{text:this._makeNameEnumeration(e,t.contact.name)})}))},this._makeNameEnumeration=(e,t)=>{const a=e.map((e=>e.formattedShortName||e.shortName)).reduce(((t,a,s)=>[...t,a,s!==e.length-1&&u.default.t(840)||""]),[]);return u.default.t(711,{participants:a.join(""),subject:t})},this.onAddParticipant=e=>{(0,h.addParticipants)(this.props.chat,e).catch((()=>{})),o.default.closeModal()},this._pop=()=>{this.pop()}}componentDidMount(){this.push((0,p.jsx)(f.default,{onConfirm:this.confirmAddParticipant,filter:this.contactFilter,title:u.default.t(242),isDisabled:this._isGroupParticipant,isSelected:this._isGroupParticipant,customSecondaryText:this.customSecondaryText,listType:f.ListType.PARTICIPANT_MANAGE_MODAL,singleSelectionFooterType:i.FooterType.CONFIRM,multipleSelectionFooterType:i.FooterType.CONFIRM,shouldShowSelectionSummary:!1}))}}t.default=m},31530:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(53427)),i=s(a(45190)),o=s(a(99942)),l=s(a(87947)),r=a(85893);class d extends o.default{constructor(...e){super(...e),this._showArchiveSettingsDrawer=()=>{this.push((0,r.jsx)(n.default,{settings:l.default,onClose:this._pop}))},this._pop=()=>{this.pop()}}componentDidMount(){this.push((0,r.jsx)(i.default,{showSettings:this._showArchiveSettingsDrawer,onClose:this._pop,settings:l.default}))}}t.default=d},78080:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(81109)),o=n(a(71598)),l=n(a(17663)),r=n(a(64305)),d=n(a(69162)),c=n(a(70458)),u=n(a(30841)),h=n(a(22965)),f=a(59014),p=n(a(79864)),m=n(a(11695)),g=n(a(99942)),x=a(78615),C=n(a(88033)),v=a(14804),_=n(a(32827)),j=a(63124),S=a(30333),M=s(a(65389)),E=n(a(4231)),b=a(70790),T=n(a(90277)),I=n(a(35154)),y=n(a(7127)),w=n(a(83153)),N=n(a(27370)),P=n(a(22685)),A=n(a(64883)),k=a(46707),O=a(41631),R=a(85893);class D extends g.default{constructor(...e){super(...e),this._scrollOffset=0,this._setScrollOffset=e=>{this._scrollOffset=e},this.onProductDetail=(e,t)=>{const{chat:a}=this.props,s=(0,R.jsx)(I.default,{chat:a,collectionId:t,product:e,onEnd:this._end,onBack:this._popAndUpdate,refreshCarousel:!1,onProductLinkClick:this._onProductLinkClick,onProductMoreInformation:this.onProductMoreInformation,onCartClick:this._onCartClick});this.push(s)},this.onProductDetailFromInfo=e=>{const t=(0,R.jsx)(y.default,{chat:this.props.chat,productInfo:e,onEnd:this._end,onBack:this._pop,onProductDetail:this.onProductDetail,onProductCatalog:this.onProductCatalogHeaderClick,onProductLinkClick:this._onProductLinkClick,onProductMoreInformation:this.onProductMoreInformation,onCartClick:this._onCartClick});this.push(t)},this.onCollectionSeeAll=e=>{const t=this.props.chat.id;this.push((0,R.jsx)(c.default,{contact:this.props.chat.contact,onProductDetail:this.onProductDetail,catalogId:t,onBack:this._pop,onCatalogLinkClick:this._onCatalogLinkClick,onCartClick:this._onCartClick,collection:e}))},this._onProductLinkClick=e=>{this.push((0,R.jsx)(w.default,{product:e,onBack:this._pop}))},this.onProductMoreInformation=e=>{const t=(0,R.jsx)(P.default,{product:e,onBack:this._popAndUpdate});this.push(t)},this._onCatalogLinkClick=(e,t)=>{this.push((0,R.jsx)(l.default,{catalog:e,contact:t,onBack:this._pop}))},this._onCartClick=e=>{const t=(0,b.getProductCatalogContext)(this.props.context),a=(0,A.default)(e,this.props.chat,t);a&&this.push(a)},this.pushProductCatalog=()=>{const{chat:e}=this.props,t=(0,x.canViewCollections)()?(0,R.jsx)(r.default,{contact:e.contact,onProductDetail:this.onProductDetail,catalogId:e.id,onBack:this._pop,businessProfile:e.contact.businessProfile,onCatalogLinkClick:this._onCatalogLinkClick,onCartClick:this._onCartClick,onCollectionSeeAll:this.onCollectionSeeAll}):(0,R.jsx)(N.default,{contact:e.contact,onProductDetail:this.onProductDetail,catalogId:e.id,onBack:this._pop,businessProfile:e.contact.businessProfile,onCatalogLinkClick:this._onCatalogLinkClick,onCartClick:this._onCartClick});this.push(t)},this.onProductCatalog=e=>{const t=this.props.chat.id;(0,S.logCarouselViewMoreClick)({catalogOwnerWid:t,catalogContext:e}),this.pushProductCatalog(t)},this.onProductCatalogHeaderClick=(e,t)=>{(0,S.logCarouselViewMoreClick)({catalogOwnerWid:e,catalogContext:t}),this.onProductCatalog(t)},this.onStarred=()=>{const e=(0,R.jsx)(k.StarredDrawerLoadable,{chat:this.props.chat,starredMsgs:this.props.chat.getStarredMsgs(),onClose:this._pop});this.push(e)},this.onAdminSetting=()=>{const{chat:e}=this.props,t=(0,R.jsx)(_.default,{chat:e,groupMetadata:e.groupMetadata,onClose:this._pop});this.push(t)},this.onContactCard=()=>{this.push((0,R.jsx)(u.default,{chat:this.props.chat,onClose:this._pop}))},this.onMediaGallery=()=>{const e=(0,R.jsx)(M.default,{chat:this.props.chat,onBack:this._pop,onProductDetail:this.onProductDetail,setProductsScrollOffset:this._setScrollOffset});this.push(e)},this.onGroupInviteLink=()=>{const{chat:e}=this.props,t=(0,R.jsx)(v.GroupInviteLinkDrawerLoadable,{chat:this.props.chat,groupMetadata:e.groupMetadata,onBack:this._pop});this.push(t)},this._pop=()=>{this.pop()},this._popAndUpdate=()=>{this.popAndUpdate({initialTab:M.TABS.PRODUCTS,productsScrollOffset:this._scrollOffset})},this._end=()=>{this.end(!0)},this.onVerification=e=>{const t=e||this.props.chat.contact,a=(0,R.jsx)(O.VerificationDrawerLoadable,{contact:t,onClose:this._pop,isFirstLevel:!1});this.push(a)},this.onLiveLocation=()=>{const e=(0,R.jsx)(j.LiveLocationDrawerLoadable,{chat:this.props.chat,onClose:this._pop});this.push(e)},this.onEphemeral=()=>{const{chat:e}=this.props,t=(0,R.jsx)(m.default,{chat:e,showNux:!1,entryPoint:E.default.EPHEMERAL_SETTING_ENTRY_POINT_TYPE.CHAT_INFO,onClose:this._pop});this.push(t)}}componentDidMount(){const e=this.onStarred,t=this.onMediaGallery,a=this.props.chat;this.props.chat.isGroup?this.push((0,R.jsx)(C.default,{chat:a,showFullGroupDescription:this.props.showFullGroupDescription,scrollToParticipantList:this.props.scrollToParticipantList,groupMetadata:a.groupMetadata,contact:a.contact,profilePicThumb:a.contact.getProfilePicThumb(),onVerification:this.onVerification,onStarred:e,onMediaGallery:t,onAdminSetting:this.onAdminSetting,onGroupInviteLink:this.onGroupInviteLink,onLiveLocation:this.onLiveLocation,onEphemeral:this.onEphemeral,onClose:this._pop})):a.isBroadcast?this.push((0,R.jsx)(o.default,{chat:a,contact:a.contact,onStarred:e,onMediaGallery:t,onClose:this._pop})):a.isUser&&(a.contact.isBusiness&&(0,x.canSeeBizProfileV3)()&&d.default.setDrawerContext("right",(0,b.buildProductCatalogContext)(new T.default,(0,f.getMaybeBizPlatformForLogging)(a.contact.id.toString()),E.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_PROFILE)),this.push((0,R.jsx)(h.default,{contact:a.contact,onVerification:this.onVerification,onStarred:e,onContactCard:this.onContactCard,onMediaGallery:t,onProductCatalog:this.onProductCatalog,onProductDetail:this.onProductDetail,onLiveLocation:this.onLiveLocation,onEphemeral:this.onEphemeral,onClose:this._pop})))}}t.default=e=>(0,R.jsx)(p.default.Consumer,{children:t=>(0,R.jsx)(D,(0,i.default)({context:t},e))})},23377:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(23493)),o=a(55084),l=n(a(7900)),r=a(67294),d=n(a(69162)),c=n(a(55454)),u=s(a(13540)),h=n(a(12950)),f=n(a(2408)),p=n(a(71681)),m=a(90672),g=n(a(61169)),x=n(a(84223)),C=n(a(4231)),v=n(a(40630)),_=n(a(45285)),j=a(1393),S=a(85893);class M extends r.Component{constructor(e){super(e),this._unmounted=!1,this._addListeners=()=>{const e=()=>this.state.activeMsg,{mediaMsgs:t}=this,{listeners:a}=this.props;a.uiIdle((()=>{const a=e();a&&t.loadMoreAroundIfNeeded(a)}));const s=e();(null==s?void 0:s.isViewOnce)?a.add(s,"revoked",(()=>{this.setState({activeMsg:null}),this.endFlow()})):(a.add(t,"remove",((a,s,n)=>{const i=e();if(t.includes(a)||null!=i&&null!=i.id&&i.id.toString()!==a.id.toString())return void this.forceUpdate();const o=n.index;0===t.length?this.endFlow():t.length===o?this.handleSelectThumb((0,l.default)(t.at(o-1),"mediaMsgs.at(index - 1)")):this.handleSelectThumb((0,l.default)(t.at(o),"mediaMsgs.at(index)"))})),a.add(t,"reset",(()=>{this.endFlow()})),a.add(t,"query_media_after",(()=>{this.forceUpdate()})),a.add(t,"query_media_before",(()=>{const e=this._refThumbs;e&&(this._prevScrollWidth=e.scrollWidth,e instanceof HTMLElement&&this.forceUpdate())})))},this.handleKeyDown=e=>{const t=f.default.isRTL();37===e.keyCode?t?this.handleNext():this.handlePrev():39===e.keyCode&&(t?this.handlePrev():this.handleNext())},this.handleImageLoad=()=>{const{uiActionEvent:e}=this;e&&(e.markUiActionT(),e.commit(),delete this.uiActionEvent)},this.handleScroll=e=>{this._handleScrollThrottled(e.currentTarget,this.mediaMsgs,e.currentTarget.scrollLeft,this.props.listeners)},this.handleNext=e=>{if(e&&e.stopPropagation(),this.state.imgZoomed)return;const t=this.state.activeMsg;if(!t)return;let a=null;for(a=this.mediaMsgs.getAfter(t);(null===(s=a)||void 0===s?void 0:s.mediaData)&&!(0,j.hasThumbnail)(a.mediaData);){var s;a=this.mediaMsgs.getAfter(a)}a?this.handleSelectThumb(a):this.mediaMsgs.hasMediaAfter&&(this._queryMediaAfter||(this._queryMediaAfter=this.mediaMsgs.queryMedia({chat:t.chat,msg:t,direction:"after"}).checkpoint(this.props.rejectOnUnmount()).then((e=>{"number"==typeof e.length&&e.length>0&&this.state.activeMsg===t&&this.handleNext()})).catch((0,o.filteredCatch)(u.Unmount,(()=>{}))).catch((()=>{__LOG__(3)`query media msgs error: `})).finally((()=>{this._queryMediaAfter=null}))))},this.handlePrev=e=>{if(e&&e.stopPropagation(),this.state.imgZoomed)return;const t=this.state.activeMsg;if(!t)return;let a=null;for(a=this.mediaMsgs.getBefore(t);(null===(s=a)||void 0===s?void 0:s.mediaData)&&!(0,j.hasThumbnail)(a.mediaData);){var s;a=this.mediaMsgs.getBefore(a)}a?this.handleSelectThumb(a):this.mediaMsgs.hasMediaBefore&&(this._queryMediaBefore||(this._queryMediaBefore=this.mediaMsgs.queryMedia({chat:t.chat,msg:t,direction:"before"}).checkpoint(this.props.rejectOnUnmount()).then((e=>{"number"==typeof e.length&&e.length>0&&this.state.activeMsg===t&&this.handlePrev()})).catch((0,o.filteredCatch)(u.Unmount,(()=>{}))).catch((()=>{__LOG__(3)`query media msgs error: `})).finally((()=>{this._queryMediaBefore=null}))))},this.handleImgZoomIn=e=>{this.setState({imgZoomed:e})},this.endFlow=()=>{d.default.closeModalMedia()},this.willEndFlow=()=>{var e;(e=this._refThumbsContainer)&&(0,_.default)(e,{opacity:[0,1],translateY:["100%","0%"]},{duration:300,easing:[.1,.82,.25,1]})},this.handleSelectThumb=e=>{this.props.listeners.uiIdle((()=>{this.mediaMsgs.loadMoreAroundIfNeeded(e)})),this.setState({activeMsg:e})},this.scrollToActive=(e=!1)=>{const t=this._refThumbsContainer,a=this._refThumbs,s=this._refActiveThumb;if(!t||!a||!s)return;let n=0;s instanceof HTMLElement&&(n=s.clientWidth/2-t.clientWidth/2),(0,_.default)(a,"stop");let i=0;e&&(i=300),(0,_.default)(s,"scroll",{duration:i,container:a,offset:n,axis:"x",easing:[.1,.82,.25,1]})},this._setRefActiveThumb=e=>{this._refActiveThumb=e},this.setRefThumbsContainer=e=>{this._refThumbsContainer=e},this.setRefThumbs=e=>{this._refThumbs=e},this._getActiveMsgIndexInAlbum=()=>{let e=-1;const{highlightedMsgIds:t}=this.props;if(!t||!this.state.activeMsg)return e;const a=this.state.activeMsg.id.toString();if(!t.has(a))return e;let s=0;return t.forEach((t=>{t===a&&(e=s),s++})),e},this._previousMediaHasThumb=()=>{const e=this.state.activeMsg;if(!e)return!1;for(let t=this.mediaMsgs.indexOf(e)-1;t>0;t--){const e=this.mediaMsgs.at(t);if(e&&(0,j.hasThumbnail)(e.mediaData))return!0}return!1},this._prevScrollWidth=null;const t=this.props.msg;this.mediaMsgs=t.chat.constructMediaMsgs(t),this._handleScrollThrottled=(0,i.default)(this._handleScroll.bind(this),100),t.type===c.default.MSG_TYPE.IMAGE&&(this.uiActionEvent=new C.default.UiAction({uiActionType:C.default.UI_ACTION_TYPE.IMAGE_OPEN,uiActionPreloaded:t.mediaData.mediaStage===m.MEDIA_DATA_STAGE.RESOLVED})),this.state={activeMsg:t,imgZoomed:!1,animatingThumbs:this._hasThumbList(t)}}componentDidMount(){this.props.listeners.add(window,"keydown",this.handleKeyDown),this._addListeners(),this.scrollToActive(),(e=>{e&&(0,_.default)(e,{opacity:[1,0],translateY:["0%","100%"]},{duration:300,delay:100,easing:[.1,.82,.25,1]}).then((()=>{this._unmounted||this.setState({animatingThumbs:!1})}))})(this._refThumbsContainer)}componentDidUpdate(e,t){if(t.activeMsg!==this.state.activeMsg)this.scrollToActive(!0);else{const e=this._refThumbs;if(!e||null==this._prevScrollWidth||0===this._prevScrollWidth)return;e instanceof HTMLElement&&(e.scrollLeft+=e.scrollWidth-this._prevScrollWidth),this._prevScrollWidth=null}}componentWillUnmount(){this._handleScrollThrottled.cancel(),this._unmounted=!0}_hasThumbList(e){return!(null==e?void 0:e.isViewOnce)}_handleScroll(e,t,a,s){if(0!==t.length&&null!=a){if(t.hasMediaBefore&&a<e.clientWidth){const e=(0,l.default)(t.head(),"mediaMsgs.head()");s.uiIdle((()=>{t.queryMedia({chat:e.chat,msg:e}),this.forceUpdate()}))}if(t.hasMediaAfter&&a+c.default.SCROLL_FUDGE>e.scrollWidth-2*e.clientWidth){const e=(0,l.default)(t.last(),"mediaMsgs.last()");s.uiIdle((()=>{t.queryMedia({chat:e.chat,msg:e,direction:"after"}),this.forceUpdate()}))}}}render(){var e;const t=this.state.activeMsg;if(!t)return null;const a=this.mediaMsgs.last(),s=this.mediaMsgs.hasMediaAfter||this.state.activeMsg!==a?this.handleNext:null,n=this.mediaMsgs.head();let i=null;return i=this.mediaMsgs.hasMediaBefore||this.state.activeMsg!==n?this.handlePrev:null,h.default.supportsFeature(h.default.F.MD_BACKEND)&&(i=(this.mediaMsgs.hasMediaBefore||this.state.activeMsg!==n)&&this._previousMediaHasThumb()?this.handlePrev:null),(0,S.jsxs)("div",{className:this.state.imgZoomed?"img-zoomed-in":null,children:[this._hasThumbList(t)&&(0,S.jsx)(x.default,{activeMsg:t,mediaMsgs:this.mediaMsgs,highlightedMsgIds:this.props.highlightedMsgIds,onSelectThumb:this.handleSelectThumb,onSetActiveThumb:this._setRefActiveThumb,onScroll:this.handleScroll,setRefThumbsContainer:this.setRefThumbsContainer,setRefThumbs:this.setRefThumbs}),(0,S.jsx)(g.default,{msg:t,mediaData:t.mediaData,onBack:this.endFlow,onExitAnimation:this.willEndFlow,onNext:s,onPrev:i,onImgZoomIn:this.handleImgZoomIn,getZoomNode:this.props.getZoomNode,startTime:this.props.startTime,isAnimatingIn:this.state.animatingThumbs,onImageLoad:this.uiActionEvent?this.handleImageLoad:null,msgIndexInAlbum:this._getActiveMsgIndexInAlbum(),albumSize:(null===(e=this.props.highlightedMsgIds)||void 0===e?void 0:e.size)||0})]})}}M.displayName="MediaViewerFlow";var E=(0,v.default)((0,p.default)(M));t.default=E},88772:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(48926)),o=a(67294),l=n(a(8581)),r=a(10504),d=n(a(17747)),c=n(a(9042)),u=s(a(55588)),h=n(a(99942)),f=n(a(2408)),p=a(85893);class m extends h.default{componentDidMount(){this.push((0,p.jsx)(g,{contactId:this.props.contactId,onClose:this.pop}))}}t.default=m;class g extends o.Component{constructor(...e){super(...e),this.state={legalEntityDetails:void 0,isLoading:!0}}componentDidMount(){var e=this;return(0,i.default)((function*(){const t=yield l.default.update(e.props.contactId,{getMerchantCompliance:!0}),a=(Array.isArray(t)?t[0]:t).serialize();a?e.setState({legalEntityDetails:a.legalEntityDetails||void 0,isLoading:!1}):__LOG__(3)`compliance: cannot fetch business details (${e.props.contactId.toString()})`}))()}render(){const{legalEntityDetails:e={},isLoading:t}=this.state,{entityName:a,customerCareDetails:s,grievanceOfficerDetails:n}=e,i=(0,r.getEntityTypeText)(e);return(0,p.jsxs)(d.default,{theme:"striped",children:[(0,p.jsx)(u.default,{title:f.default.t(405),type:u.DRAWER_HEADER_TYPE.SMALL,onCancel:this.props.onClose}),(0,p.jsx)(c.default,{theme:t?"center-content":void 0,children:t?(0,p.jsx)(r.ComplianceInfoLoading,{}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(r.ComplianceInfoGroup,{children:[(0,p.jsx)(r.ComplianceInfoPrimitiveField,{value:a,label:f.default.t(416)}),(0,p.jsx)(r.ComplianceInfoPrimitiveField,{value:i,label:f.default.t(417)})]}),(0,p.jsxs)(r.ComplianceInfoGroup,{title:f.default.t(400),children:[(0,p.jsx)(r.ComplianceInfoPrimitiveField,{value:null==s?void 0:s.mobileNumber,label:f.default.t(403),forceLTR:!0}),(0,p.jsx)(r.ComplianceInfoPrimitiveField,{value:null==s?void 0:s.landlineNumber,label:f.default.t(402),forceLTR:!0}),(0,p.jsx)(r.ComplianceInfoPrimitiveField,{value:null==s?void 0:s.email,label:f.default.t(401)})]}),(0,p.jsxs)(r.ComplianceInfoGroup,{title:f.default.t(408),children:[(0,p.jsx)(r.ComplianceInfoPrimitiveField,{value:null==n?void 0:n.name,label:f.default.t(412)}),(0,p.jsx)(r.ComplianceInfoPrimitiveField,{value:null==n?void 0:n.mobileNumber,label:f.default.t(411),forceLTR:!0}),(0,p.jsx)(r.ComplianceInfoPrimitiveField,{value:null==n?void 0:n.landlineNumber,label:f.default.t(410),forceLTR:!0}),(0,p.jsx)(r.ComplianceInfoPrimitiveField,{value:null==n?void 0:n.email,label:f.default.t(409)})]})]})})]},"merchant-details-modal")}}g.displayName="MerchantDetails"},74477:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.SendContactFlowLoadable=t.requireBundle=void 0;var n=s(a(48926)),i=s(a(68356)),o=s(a(55454)),l=s(a(2408)),r=s(a(74878)),d=s(a(33961)),c=a(85893);const u=(0,d.default)((0,n.default)((function*(){return(yield Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,25571))).default})),"SendContactFlow");t.requireBundle=u;const h=(0,i.default)({loader:u,loading:e=>(0,c.jsx)(r.default,{title:l.default.t(1668),error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.SendContactFlowLoadable=h},45190:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(67294),o=n(a(82338)),l=s(a(75381)),r=n(a(84758)),d=n(a(69162)),c=n(a(55454)),u=n(a(17747)),h=n(a(9042)),f=s(a(55588)),p=s(a(9492)),m=n(a(47452)),g=a(92231),x=n(a(86025)),C=n(a(67893)),v=a(63290),_=n(a(47193)),j=a(86723),S=n(a(12950)),M=a(78615),E=n(a(39e3)),b=n(a(2408)),T=a(21134),I=n(a(71681)),y=a(47941),w=n(a(16967)),N=n(a(79485)),P=n(a(2966)),A=n(a(97504)),k=n(a(82669)),O=a(37659),R=a(85893);class D extends i.Component{constructor(...e){super(...e),this.flatListController=new C.default,this.selection=new w.default([],(e=>e.id.toString())),this.state={forceHideNux:!1,chats:this._getArchivedChats()},this.handleClick=(e,t)=>{d.default.openChatFromUnread(t).then((e=>{e&&d.default.focusChatTextInput(t)})),(0,M.archiveV2Supported)()&&this.props.settings.archive.enabled||this.handleClose()},this._updateSelected=e=>{this.selection.setVal(e,!1)},this.handleClose=()=>{this.props.onClose()},this.handleNextChat=e=>{e.preventDefault(),e.stopPropagation(),this.selection.setNext(!0)},this.handlePrevChat=e=>{e.preventDefault(),e.stopPropagation(),this.selection.setPrev(!0)},this.shouldShowArchiveV2=()=>(0,M.archiveV2Supported)()&&this.props.settings.showArchiveV2,this._handleCloseChat=e=>{e===this.selection.getVal()&&this.selection.unset()},this.renderItem=e=>(0,R.jsx)(l.default,{chat:e.chat,mode:l.Mode.LAST,active:this.selection,onClick:this.handleClick,hideArchivedIcon:(0,M.archiveV2Supported)()&&this.props.settings.archive.enabled,hideMuteIcon:this.shouldShowArchiveV2(),hideMuteOption:this.shouldShowArchiveV2(),ephemeralIcon:"chat-list"}),this.setRefHotKeys=e=>{this.refList=e},this._handleCloseNux=()=>{(0,j.setNUX)(c.default.NUX.ARCHIVE,{views:c.default.ARCHIVE_NUX_MAX_VIEWS,maxViews:c.default.ARCHIVE_NUX_MAX_VIEWS}),this.setState({forceHideNux:!0})},this._showNux=()=>{const e=r.default.some((e=>e.archive));return this.shouldShowArchiveV2()&&e&&(0,j.shouldShowNUX)(c.default.NUX.ARCHIVE)&&!this.state.forceHideNux}}componentDidMount(){if(this.shouldShowArchiveV2()&&!(0,j.getNUX)(c.default.NUX.ARCHIVE)&&(0,j.setNUX)(c.default.NUX.ARCHIVE,{views:0,maxViews:c.default.ARCHIVE_NUX_MAX_VIEWS}),this._showNux()&&(0,j.viewNUX)(c.default.NUX.ARCHIVE),this.shouldShowArchiveV2()){if((0,T.isElevatedImportantMessageEnabled)()){const e=this._getArchivedChats(),t=new Map;e.forEach((e=>{e.archiveAtMentionViewedInDrawer=!0,t.set(e.id.toString(),!0)})),(0,O.updateChatArchiveDrawer)(t)}this.props.listeners.add(r.default,"sort change:archive add remove",(()=>{this.setState({chats:this._getArchivedChats()})}))}else this.props.listeners.add(r.default,"change:archive add remove",(()=>{this.setState({chats:this._getArchivedChats()})}));this.refList&&_.default.focus(this.refList),this.props.listeners.add(d.default,"update_chatlist_selection",this._updateSelected),this.props.listeners.add(d.default,"close_chat",this._handleCloseChat);const e=this._getActiveArchiveChat();e&&this._updateSelected(e)}_getActiveArchiveChat(){return r.default.toArray().find((e=>e.active&&e.archive))}_getArchivedChats(){return r.default.filter((e=>e.archive))}getData(){return this.state.chats.map((e=>({itemKey:e.id.toString(),chat:e})))}render(){let e,t;if(this.selection.init(this.state.chats,!0),this._showNux()&&(t=(0,R.jsxs)("div",{className:o.default.nuxContainer,children:[(0,R.jsxs)(v.FlexColumn,{align:"center",children:[(0,R.jsx)("span",{className:o.default.nuxIcon,children:(0,R.jsx)(P.default,{name:"archive-nux"})}),(0,R.jsx)("div",{className:o.default.nuxHeader,children:(0,R.jsx)(A.default,{theme:"large",as:"h1",children:b.default.t(263)})}),(0,R.jsx)("div",{className:o.default.nuxContent,children:(0,R.jsx)("div",{className:o.default.nuxText,children:(0,R.jsx)(A.default,{theme:"plain",as:"p",children:S.default.supportsFeature(S.default.F.MD_BACKEND)?b.default.t(262):b.default.t(261)})})})]}),(0,R.jsx)("button",{onClick:this._handleCloseNux,className:o.default.btnClose,children:(0,R.jsx)(P.default,{name:"x-alt"})})]})),this.state.chats.length>0){const a={down:this.handleNextChat,up:this.handlePrevChat};e=(0,R.jsxs)(E.default,{onRef:this.setRefHotKeys,handlers:a,children:[(0,R.jsx)(k.default,{transitionName:"slide",children:t}),(0,R.jsx)(x.default,{className:o.default.flatListContainer,data:this.getData(),flatListController:this.flatListController,direction:"vertical",renderItem:this.renderItem})]})}else e=(0,R.jsx)(g.Archived,{});const a=!S.default.supportsFeature(S.default.F.MD_BACKEND)&&(0,M.archiveV2Supported)()&&this.props.settings.archive.enabled?(0,R.jsx)(y.MenuBarItem,{a8nText:"archived-menu",icon:(0,R.jsx)(P.default,{name:"menu"}),title:b.default.t(1271),children:(0,R.jsx)(p.default,{type:"dropdown_menu",flipOnRTL:!0,dirX:p.DirX.LEFT,children:(0,R.jsx)(m.default,{a8n:"open-archive-settings menu-item",action:this.props.showSettings,children:b.default.t(264)})},"ArchivedDrawerHeader")}):null,s=(0,M.archiveV2Supported)()&&this.props.settings.archive.enabled?b.default.t(267):b.default.t(266);return(0,R.jsxs)(u.default,{theme:"archived",children:[(0,R.jsx)(f.default,{title:s,onBack:this.handleClose,type:f.DRAWER_HEADER_TYPE.LARGE,menu:a}),(0,R.jsx)(h.default,{flatListControllers:[this.flatListController],children:e})]})}}D.CONCERNS={settings:["showArchiveV2","archive"]},D.displayName="ArchivedDrawer";var L=(0,I.default)((0,N.default)(D,D.CONCERNS));t.default=L},84851:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,f.default)(e.contact,["name","verifiedLevel","verifiedName","formattedName"]);let a;a=u.default.supportsFeature(u.default.F.VNAME_V_2)?(()=>{switch(t.verifiedLevel){case l.default.VERIFIED_LEVEL.HIGH:return t.name===t.verifiedName?h.default.t(1987,{businessName:t.verifiedName}):h.default.t(1988,{businessName:t.verifiedName});case l.default.VERIFIED_LEVEL.LOW:case l.default.VERIFIED_LEVEL.UNKNOWN:return h.default.t(1989)}})():(()=>{switch(t.verifiedLevel){case l.default.VERIFIED_LEVEL.HIGH:return h.default.t(2269);case l.default.VERIFIED_LEVEL.LOW:return h.default.t(2271);case l.default.VERIFIED_LEVEL.UNKNOWN:return h.default.t(2273,{businessName:t.formattedName})}})();const s=(0,p.jsx)(n.default,{href:(0,c.getBusinessFaqUrl)(),onClick:g,children:h.default.t(1142)});return(0,p.jsxs)(o.default,{onOK:m,okText:h.default.t(1444),children:[(0,p.jsx)(r.default,{text:a}),"",s]})};var n=s(a(44683)),i=s(a(69162)),o=s(a(75940)),l=s(a(55454)),r=s(a(85051)),d=a(4919),c=a(57092),u=s(a(12950)),h=s(a(2408)),f=s(a(76006)),p=a(85893);const m=()=>{i.default.closeModal()},g=e=>{e.preventDefault(),i.default.closeModal("none"),setTimeout((()=>(0,d.openExternalLink)((0,c.getBusinessFaqUrl)())),10)}},94589:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({a8nText:e,icon:t,label:a,disabled:s,xstyle:d,theme:c,onClick:u}){const h="new-chat-info"===c;return(0,l.jsxs)("div",{className:(0,n.default)(r.button,s&&r.disabled,d),children:[(0,l.jsx)(i.default,{inverted:!0,onClick:u,disabled:s,a8nText:e,showBackgroundOnHover:h,children:(0,l.jsx)(o.default,{name:t,directional:!0,color:"teal"})}),(0,l.jsx)("div",{className:(0,n.default)(r.label,h&&r.labelForNewChatInfo),children:a})]})};var n=s(a(56720)),i=s(a(3132)),o=s(a(2966)),l=a(85893);const r={button:{textAlign:"qfejxiq4"},label:{marginEnd:"jnwc1y2a",marginBottom:"mpdn4nr2",marginStart:"svoq16ka",marginTop:"opp68qpq",fontSize:"ovllcyds"},labelForNewChatInfo:{marginTop:"qt60bha0",color:"jq3rn4u7"},disabled:{opacity:"ge6flnsz"}}},71598:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,T.default)(),a=(0,I.default)();return(0,P.jsx)(k,(0,i.default)((0,i.default)({},e),{},{newChatInfo:t,style:t?a:null}))};var i=n(a(81109)),o=a(67294),l=n(a(50733)),r=n(a(77953)),d=n(a(36546)),c=a(63984),u=n(a(16298)),h=n(a(25142)),f=n(a(69162)),p=n(a(17747)),m=n(a(9042)),g=n(a(17061)),x=s(a(55588)),C=n(a(67893)),v=n(a(52087)),_=n(a(2408)),j=n(a(71681)),S=n(a(79485)),M=a(15298),E=n(a(2966)),b=a(97504),T=n(a(4253)),I=n(a(58728)),y=n(a(12950)),w=n(a(82829)),N=n(a(37719)),P=a(85893);class A extends o.Component{constructor(...e){super(...e),this.flatListController=new C.default,this.handleClose=()=>{this.props.onClose?this.props.onClose():this.props.uim.uie.requestDismiss()},this.handleDelete=()=>{f.default.deleteOrExitChat((0,M.unproxy)(this.props.chat))},this.showEncryptionInfoPopup=()=>{f.default.openModal((0,P.jsx)(N.default,{chatId:this.props.chat.id,e2eSubtype:"info_encrypted"}))}}componentDidMount(){const e=this.props.chat.groupMetadata;null!=e&&this.props.listeners.add(e.participants,"add remove sort reset",(()=>{this.forceUpdate()}))}render(){var e;const t=this.props.chat;let a=null;this.props.onMediaGallery&&(a=(0,P.jsx)(u.default,{onMediaGallery:this.props.onMediaGallery,chat:(0,M.unproxy)(t)}));const s=(0,P.jsx)(c.ChatInfoDrawerButtonsSection,{newChatInfo:this.props.newChatInfo,children:(0,P.jsx)(g.default,{a8nText:"li-delete-broadcast",icon:(0,P.jsx)(E.default,{name:"delete"}),color:"danger",theme:this.props.newChatInfo?"new-chat-info":"list-aligned",onClick:this.handleDelete,children:_.default.t(2038)})});let n;(null===(e=t.groupMetadata)||void 0===e?void 0:e.creation)?(n=h.default.createdStr(t.groupMetadata.creation),n=(0,P.jsx)(b.TextDiv,{theme:"small",children:n})):n=null;let i=null;y.default.supportsFeature(y.default.F.MD_BACKEND)&&(i=(0,P.jsx)(w.default,{onClick:this.showEncryptionInfoPopup,text:_.default.t(1983),theme:this.props.newChatInfo?"new-chat-info":null}));let o=null;return i&&(o=(0,P.jsxs)(c.ChatInfoDrawerSection,{newChatInfo:this.props.newChatInfo,children:[null,i]})),(0,P.jsxs)(p.default,{theme:"striped",style:this.props.style,children:[(0,P.jsxs)(x.default,{type:x.DRAWER_HEADER_TYPE.SMALL,onCancel:this.handleClose,children:[(0,P.jsx)(b.TextDiv,{theme:"title",children:_.default.t(397)}),n]}),(0,P.jsx)(m.default,{flatListControllers:[this.flatListController],children:(0,P.jsxs)("div",{className:l.default.body,children:[(0,P.jsx)(d.default,{chat:(0,M.unproxy)(t)}),a,undefined,o,(0,P.jsx)(r.default,{chat:(0,M.unproxy)(t),flatListController:this.flatListController}),s]})})]},"contact-info-modal")}}A.CONCERNS={chat:["id","groupMetadata"]},A.displayName="BroadcastInfoDrawerBase";const k=(0,v.default)((0,j.default)((0,S.default)(A,A.CONCERNS)))},77953:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a;const s=(0,g.default)(),v=(0,p.default)(),_=null===(t=e.chat.groupMetadata)||void 0===t?void 0:t.participants;(0,m.useListener)(_,"add remove reset",v);const j=(0,n.useMemo)((()=>_?_.map((e=>({itemKey:e.id.toString(),participant:e,height:68}))):[]),[_]),S=(e,t)=>{x.default.equals((0,u.getMaybeMeUser)(),t.id)||(0,d.findChat)(t.id).then((function(e){o.default.openChatFromUnread(e).then((t=>{t&&o.default.focusChatTextInput(e)}))}))},M=null!==(a=null==_?void 0:_.length)&&void 0!==a?a:0,E=s?h.default.t(2241,{count:M,_plural:M}):h.default.t(2240),b=s?null:(0,C.jsx)(f.TextSpan,{theme:"section-title",children:h.default.n(M)});return(0,C.jsx)(i.ChatInfoDrawerListSection,{newChatInfo:s,title:E,subtitle:b,children:(0,C.jsx)(c.default,{flatListController:e.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:j,renderItem:e=>{const{participant:t}=e,a=r.default.gadd(t.id);return(0,C.jsx)(l.default,{contact:a,theme:s?"new-chat-info":"drawer-list",admin:!!t.isAdmin,onClick:S,waitIdle:!0},t.id.toString())}})})};var n=a(67294),i=a(63984),o=s(a(69162)),l=s(a(70521)),r=s(a(17025)),d=a(62238),c=s(a(86025)),u=a(86723),h=s(a(2408)),f=a(97504),p=s(a(45172)),m=a(61192),g=s(a(4253)),x=s(a(69635)),C=a(85893)},36546:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a;const s=(0,g.default)(),n=null===(t=e.chat.groupMetadata)||void 0===t?void 0:t.participants,j=(0,m.default)(e.chat.contact,["name"]),S=(0,f.default)();(0,p.useListener)(n,"add remove reset",S);const M=null!==(a=null==n?void 0:n.length)&&void 0!==a?a:0,E=`${d.default.t(395)} ${d.default.t(2241,{count:M,_plural:M})}`,b=j.name?(0,x.jsx)(c.default,{contact:e.chat.contact,selectable:!0}):d.default.t(396);if(s)return(0,x.jsxs)(l.default,{theme:"padding-large",children:[(0,x.jsx)("div",{className:(0,i.default)(C),children:(0,x.jsx)(o.default,{id:e.chat.id,size:o.DETAIL_IMAGE_SIZE.LARGE})}),(0,x.jsxs)(r.FlexColumn,{align:"center",children:[(0,x.jsx)(h.TextHeader,{level:"2",size:"24",children:b}),(0,x.jsx)("div",{className:(0,i.default)(v),children:(0,x.jsx)(u.SelectableSpan,{dir:"auto",selectable:!0,children:(0,x.jsx)(h.TextSpan,{size:"16",color:"secondary",children:E})})})]})]});return(0,x.jsx)("div",{className:(0,i.default)(_),children:(0,x.jsx)(o.default,{id:e.chat.id,size:o.DETAIL_IMAGE_SIZE.LARGE})})};var i=n(a(56720)),o=s(a(88419)),l=n(a(25061)),r=a(63290),d=n(a(2408)),c=n(a(78972)),u=a(20845),h=a(97504),f=n(a(45172)),p=a(61192),m=n(a(76006)),g=n(a(4253)),x=a(85893);const C={display:"p357zi0d",justifyContent:"ac2vgrno",marginBottom:"du8bjn1j"},v={lineHeight:"a4ywakfo",marginTop:"g1eqewly"},_={display:"p357zi0d",flexDirection:"f8m0rgwh",alignItems:"gndfcl4n",marginTop:"ignnouf6",marginBottom:"bibl1e27"}},66650:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{newChatInfo:t}=e,a=(0,i.default)(e,["newChatInfo"]);return(0,l.jsx)(o.default,(0,n.default)((0,n.default)({},a),{},{separator:!t||a.separator,xstyle:[a.xstyle,t&&r.container],blockXstyle:[a.blockXstyle,t&&r.block]}))};var n=s(a(81109)),i=s(a(6479)),o=(s(a(56720)),s(a(92787))),l=a(85893);const r={container:{paddingStart:"gx1rr48f"},block:{paddingEnd:"f9ovudaz",borderTop:"cc8mgx9x"}}},34142:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;let{icon:a,children:s,side:f}=e,p=(0,i.default)(e,["icon","children","side"]);const m=null!==(t=h[a])&&void 0!==t?t:20,g=(0,c.jsx)(r.FlexRow,{xstyle:u.iconContainer,align:"center",justify:"center",children:(0,c.jsx)(d.default,{color:"secondary",name:a,height:m})});let x=null!=f?f:"";"chevron"===x&&(x=(0,c.jsx)(d.default,{color:"secondary",name:"chevron-right-alt",directional:!0}));return(0,c.jsx)(l.default,(0,n.default)((0,n.default)({newChatInfo:!0},p),{},{children:(0,c.jsxs)(r.FlexRow,{align:"center",justify:"start",children:[g,(0,c.jsx)("div",{className:(0,o.default)(u.content),children:s}),(0,c.jsx)(r.FlexRow,{align:"center",justify:"end",xstyle:u.drawerSide,children:x})]})}))};var n=s(a(81109)),i=s(a(6479)),o=s(a(56720)),l=s(a(66650)),r=a(63290),d=s(a(2966)),c=a(85893);const u={iconContainer:{marginEnd:"bugiwsl0",width:"qssinsw9",flexGrow:"tvf2evcx",flexShrink:"oq44ahr5"},content:{flexGrow:"ggj6brxn",flexShrink:"m0h2a7mj"},drawerSide:{flexGrow:"tvf2evcx",flexShrink:"oq44ahr5",width:"jswlwoyz"}},h={settings:17,disappearing:17}},63984:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ChatInfoDrawerSection=c,t.ChatInfoDrawerListSection=function(e){return(0,r.jsx)(c,(0,n.default)((0,n.default)({},e),{},{xstyle:e.newChatInfo&&u.drawerSectionContainer,children:(0,r.jsx)("div",{className:(0,o.default)(e.newChatInfo&&u.contentContainer),children:e.children})}))},t.ChatInfoDrawerButtonsSection=function(e){return(0,r.jsx)(c,(0,n.default)((0,n.default)({},e),{},{xstyle:e.newChatInfo&&h.drawerSectionContainer,children:e.children}))};var n=s(a(81109)),i=s(a(6479)),o=s(a(56720)),l=s(a(25061)),r=a(85893);const d={title:{paddingTop:"i5tg98hk",paddingEnd:"f9ovudaz",paddingBottom:"przvwfww",paddingStart:"gx1rr48f",marginBottom:"or9x5nie"},titleText:{fontSize:"bze30y65",lineHeight:"a4ywakfo"},container:{paddingTop:"i4pc7asj",paddingEnd:"bcymb0na",paddingBottom:"myel2vfb",paddingStart:"e8k79tju"},containerWithoutTitle:{paddingTop:"i5tg98hk",paddingEnd:"bcymb0na",paddingBottom:"przvwfww",paddingStart:"e8k79tju",marginBottom:"mpdn4nr2"}};function c(e){let{newChatInfo:t}=e,a=(0,i.default)(e,["newChatInfo"]);return t?(0,r.jsx)(l.default,(0,n.default)((0,n.default)({},a),{},{xstyle:[d.container,null==a.title&&d.containerWithoutTitle,a.xstyle],titleXStyle:d.title,titleTextXStyle:d.titleText,children:a.children})):(0,r.jsx)(l.default,(0,n.default)((0,n.default)({},a),{},{children:a.children}))}const u={drawerSectionContainer:{paddingBottom:"przvwfww"},contentContainer:{marginTop:"tt8xd2xn",marginEnd:"dl6j7rsh",marginBottom:"mpdn4nr2",marginStart:"avk8rzj1"}};const h={drawerSectionContainer:{paddingTop:"i5tg98hk",paddingEnd:"f9ovudaz",paddingBottom:"przvwfww",paddingStart:"gx1rr48f"}}},16298:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({chat:e,onMediaGallery:t}){const a=c.default.t(1250),s=(0,g.default)(),n=(0,C.jsx)(f.default,{color:"secondary",name:"chevron-right-alt",directional:!0}),i=(0,C.jsxs)(r.FlexRow,{align:"center",children:[s&&(0,C.jsx)(_,{chat:e}),(0,C.jsx)("div",{children:n})]});return(0,C.jsx)(l.ChatInfoDrawerSection,{newChatInfo:s,a8nText:"section-media",title:a,titleOnClick:t,subtitle:i,theme:s?void 0:"padding",xstyle:s&&v.drawerSection,children:(0,C.jsx)(u.default,{chat:e,mediaMsgs:e.getMediaMsgs(),theme:s?"new-chat-info":null})})};var n=s(a(48926)),i=a(67294),o=s(a(56720)),l=a(63984),r=a(63290),d=s(a(12950)),c=s(a(2408)),u=s(a(52963)),h=a(1393),f=s(a(2966)),p=s(a(45172)),m=a(61192),g=s(a(4253)),x=s(a(20994)),C=a(85893);const v={mediaCount:{marginRight:"lyrceosr",fontSize:"bze30y65",color:"hda1bzzh"},drawerSection:{paddingBottom:"aiput80m"}};function _({chat:e}){const t=function(e){const t=e.getMediaMsgs(),a=e.getDocMsgs(),s=e.getLinkMsgs(),o=(0,p.default)();(0,m.useListener)(t,"add remove reset query_media_before",o),(0,m.useListener)(a,"add remove reset query_doc_before",o),(0,m.useListener)(s,"add remove reset query_link_before",o);const l=(0,x.default)();(0,i.useEffect)((()=>{l((0,n.default)((function*(){const n=[];t.hasMediaBefore&&n.push(t.queryMedia({chat:e})),a.hasDocBefore&&n.push(a.queryDocs(e)),s.hasLinkBefore&&n.push(s.queryLinks(e)),yield Promise.all(n),o()})))}),[e,a,o,s,t,l]);let r=null;if(!t.hasMediaBefore&&!a.hasDocBefore&&!s.hasLinkBefore){let e=t.length;d.default.supportsFeature(d.default.F.MD_BACKEND)&&(e=t.filter((e=>(0,h.hasThumbnail)(e.mediaData))).length),r=e+a.length+s.length}return r}(e);return(0,C.jsx)("div",{className:(0,o.default)(v.mediaCount),children:t})}},66742:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{contact:t}=e,a=(0,c.default)(),s=(0,h.jsx)(n.default,{multiline:!0,newChatInfo:a,children:(0,h.jsx)(d.TextSpan,{theme:"title",children:(0,h.jsx)(r.default,{id:t.id})})}),p=(0,h.jsx)(n.default,{newChatInfo:a,separator:!0,children:(0,h.jsx)(l.SelectableSpan,{dir:"auto",selectable:!0,children:(0,h.jsx)(d.TextSpan,{theme:"title",children:(0,u.default)(t.id)})})});return(0,h.jsxs)(i.ChatInfoDrawerSection,{newChatInfo:a,xstyle:a&&f.container,a8nText:"section-about-and-phone-number",title:o.default.t(739),children:[s,p]})};s(a(56720));var n=s(a(66650)),i=a(63984),o=s(a(2408)),l=a(20845),r=s(a(77898)),d=a(97504),c=s(a(4253)),u=s(a(98532)),h=a(85893);const f={container:{paddingBottom:"przvwfww"}}},34584:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{contact:t}=e,a=h.default.t(480);function s(){l.default.openModal((0,p.jsx)(i.default,{contact:t}))}function m(){l.default.openModal((0,p.jsx)(o.default,{contact:t}))}let g;g=(0,u.canSeeSMBUpsell)()?(0,p.jsx)(r.default,{a8nText:"business-title",className:n.default.businessTitleWithSMBUpsell,onClick:m,side:(0,p.jsx)(f.default,{display:"inline",name:"info"}),children:a}):(0,p.jsx)(d.default,{a8nText:"business-title",className:n.default.businessTitleText,onClick:s,children:a});return(0,p.jsx)(c.default,{className:n.default.businessAccount,children:g})};var n=s(a(25022)),i=s(a(84851)),o=s(a(38880)),l=s(a(69162)),r=s(a(92787)),d=s(a(17061)),c=s(a(25061)),u=a(78615),h=s(a(2408)),f=s(a(2966)),p=a(85893)},7811:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a;const{contact:s,onProductCatalog:M}=e,E=(0,n.useContext)(u.default),b=(0,g.getProductCatalogSessionId)(E),T=(0,_.default)((0,C.unproxy)(e.contact)),I=(0,v.default)();let y;const w=d.default.toArray().find((e=>e.active));(null==w?void 0:w.id.equals(s.id))||((0,o.logMessageClick)(b),y=(0,j.jsx)(i.default,{icon:"chat-msg",label:m.default.t(1272),onClick:function(){(0,h.findChat)(s.id).then((function(e){c.default.openChatFromUnread(e).then((()=>{c.default.closeDrawerRight()}))}))},a8nText:"business-action chat",theme:I?"new-chat-info":void 0}));let N,P,A;T.isVoiceCallEnabled&&(N=(0,j.jsx)(i.default,{icon:"voice-call-filled",label:m.default.t(1882),disabled:!T.canStartVoiceCall,onClick:()=>{(0,o.logVoiceCallClick)(b),T.startVoiceCall()},a8nText:"business-action voice-call",theme:I?"new-chat-info":void 0}));(null===(t=s.businessProfile)||void 0===t||null===(a=t.profileOptions)||void 0===a?void 0:a.commerceExperience)===l.COMMERCE_EXPERIENCE_TYPES.CATALOG&&(P=(0,j.jsx)(i.default,{icon:"catalog-filled",label:m.default.t(1127),onClick:()=>{(0,o.logCatalogClick)(b),M((0,g.getProductCatalogContext)(E))},a8nText:"business-action catalog",theme:I?"new-chat-info":void 0}));if((0,r.hasShop)(s.businessProfile)){(0,p.bannedShopsEnabled)()&&(0,r.isShopBanned)(s.businessProfile)||(A=(0,j.jsx)(i.default,{icon:"shop-filled",label:m.default.t(1697),onClick:function(){(0,o.logShopsClick)(b),(0,r.goToShop)(s.businessProfile)},a8nText:"business-action shop",theme:I?"new-chat-info":void 0}))}const k=(0,j.jsx)(i.default,{icon:"forward-filled",label:m.default.t(931),onClick:function(){(0,o.logForwardClick)(b),c.default.openModal((0,j.jsx)(x.SendContactFlowLoadable,{contacts:[(0,C.unproxy)(s)],onContactsSent:e=>{c.default.openChatFromUnread(e).then((()=>{}))}}))},a8nText:"business-action forward",theme:I?"new-chat-info":void 0});return(0,j.jsxs)(f.FlexRow,{xstyle:S.actionsRow,justify:"evenly",children:[y,N,P,A,k]})};var n=a(67294),i=(s(a(56720)),s(a(94589))),o=a(92026),l=a(4650),r=a(47874),d=s(a(84758)),c=s(a(69162)),u=s(a(79864)),h=a(62238),f=a(63290),p=a(78615),m=s(a(2408)),g=a(70790),x=a(74477),C=a(15298),v=s(a(4253)),_=s(a(52060)),j=a(85893);const S={actionsRow:{marginTop:"c46o30wg",marginEnd:"bsg2wrd4",marginBottom:"brac1wpa",marginStart:"f459d30t","@media (min-width: 1300px)":{marginStart:"hfp8519b",marginEnd:"acdu7ris"}}}},12534:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{businessHours:t}=e,a=(0,u.getProductCatalogSessionId)((0,i.useContext)(r.default)),s=(0,m.getBusinessOpenState)(t),[n,o]=(0,i.useState)(!0);if(null==t)return null;const d=(0,h.getBusinessHours)(t).map((e=>{const{day:t,hours:a,first:i}=e;let o=t,l=a,r=!1;if(i)switch(s.status){case m.BUSINESS_OPEN_STATUS.OPEN_24H:o=c.default.t(447),l=c.default.t(443),r=!0;break;case m.BUSINESS_OPEN_STATUS.OPEN_APPOINTMENT:o=c.default.t(447),l=c.default.t(446),r=!0;break;case m.BUSINESS_OPEN_STATUS.OPEN:o=c.default.t(447),r=!0;break;case m.BUSINESS_OPEN_STATUS.CLOSED_TODAY:l=c.default.t(432)}return!i&&n?null:(0,g.jsx)(C,{day:o,dayIsOpen:r,hours:l,first:i,collapsed:n},t)}));return(0,g.jsx)(p.default,{xstyle:x.businessHours,onClick:()=>{(0,l.logHoursClick)(a),o(!n)},a8nText:"business-hours-expand",children:d})};var n=s(a(94184)),i=a(67294),o=(s(a(56720)),s(a(5579))),l=a(92026),r=s(a(79864)),d=s(a(85051)),c=s(a(2408)),u=a(70790),h=a(71547),f=s(a(2966)),p=s(a(89135)),m=a(83607),g=a(85893);const x={businessHours:{display:"f804f6gw",width:"ln8gz9je",textAlign:"ml4r5409"}};function C(e){if(e.first){const t=(0,g.jsx)("div",{className:o.default.businessHoursChevron,role:"button",children:(0,g.jsx)(f.default,{className:e.collapsed?"":o.default.flipSvg,display:"inline",name:"chevron-down-alt"})});return(0,g.jsxs)("div",{className:(0,n.default)(o.default.businessHoursRow,{[o.default.firstRow]:e.first}),children:[(0,g.jsx)("div",{className:(0,n.default)(o.default.businessHoursDay,{[o.default.dayIsOpen]:e.dayIsOpen}),children:(0,g.jsx)(d.default,{direction:"auto",text:e.day})}),(0,g.jsx)("div",{className:o.default.businessHoursHours,children:(0,g.jsx)(d.default,{direction:"auto",text:e.hours})}),t]})}return(0,g.jsxs)("div",{className:o.default.businessHoursRow,children:[(0,g.jsx)("div",{className:o.default.businessHoursDay,children:(0,g.jsx)(d.default,{direction:"auto",text:e.day})}),(0,g.jsx)("div",{className:o.default.businessHoursHours,children:(0,g.jsx)(d.default,{direction:"auto",text:e.hours})})]})}},12306:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{businessProfile:t}=e,{description:a,address:s,latitude:j,longitude:S,website:M,email:E,businessHours:b}=(0,x.default)(t,["description","address","latitude","longitude","website","email","businessHours"]),T=(0,i.useContext)(u.default),I=(0,g.getProductCatalogSessionId)(T),y=(0,C.default)();let w,N,P,A,k,O;null!=a&&(w=(0,v.jsx)("div",{className:l.default.section,children:(0,v.jsx)(f.default,{text:a,textLimit:c.default.BUSINESS_DESCRIPTION_INFO_PANEL_TRUNC_LENGTH,children:({textLimit:e})=>(0,v.jsx)(h.default,{className:l.default.description,selectable:!0,direction:"auto",text:a,textLimit:e})})}));null!=b&&(N=(0,v.jsx)("div",{className:l.default.section,children:(0,v.jsx)(o.default,{businessHours:b})}));null!=s&&(P=(0,v.jsx)("div",{className:l.default.section,children:(0,v.jsx)(h.default,{selectable:!0,direction:"auto",text:s})}));null!=j&&null!=S&&(A=(0,v.jsx)("div",{style:{height:132},className:(0,n.default)(l.default.section,l.default.map),children:(0,v.jsx)(m.default,{lat:j,lng:S,name:s||"",width:590,height:132,onClick:()=>(0,r.logLocationClick)(I),a8nText:"business-info-map"})}));null!=E&&(k=(0,v.jsx)("div",{className:l.default.section,children:(0,v.jsx)(p.default,{href:`mailto:${E}`,onClick:()=>(0,r.logEmailClick)(I),a8nText:"business-info-email",children:E})}));null!=M&&M.length>0&&(O=(0,v.jsx)("div",{className:l.default.section,children:M.map((e=>(0,v.jsx)("div",{children:(0,v.jsx)(p.default,{href:e,onClick:()=>(0,r.logWebsiteClick)(I),a8nText:"business-info-website",children:e})},e)))}));return null==w&&null==N&&null==P&&null==A&&null==k&&null==O?null:(0,v.jsxs)(d.ChatInfoDrawerSection,{newChatInfo:y,xstyle:y&&_.container,theme:y?void 0:"padding",children:[w,N,P,A,k,O]})};var n=s(a(94184)),i=a(67294),o=(s(a(56720)),s(a(12534))),l=s(a(79953)),r=a(92026),d=a(63984),c=s(a(55454)),u=s(a(79864)),h=s(a(85051)),f=s(a(18598)),p=s(a(4919)),m=s(a(23958)),g=a(70790),x=s(a(76006)),C=s(a(4253)),v=a(85893);const _={container:{paddingTop:"i4pc7asj",paddingBottom:"q1nnjopg"}}},92026:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.logProfileImpression=function(e){i({viewBusinessProfileAction:n.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_IMPRESSION,catalogSessionId:e})},t.logProfileExit=function(e,t){i({viewBusinessProfileAction:n.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_EXIT,catalogSessionId:e,scrollDepth:t})},t.logMessageClick=function(e){i({viewBusinessProfileAction:n.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_MESSAGE,catalogSessionId:e})},t.logVoiceCallClick=function(e){i({viewBusinessProfileAction:n.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_VOICE_CALL,catalogSessionId:e})},t.logShopsClick=function(e){i({viewBusinessProfileAction:n.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_SHOPS_ICON,catalogSessionId:e})},t.logCatalogClick=function(e){i({viewBusinessProfileAction:n.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_CATALOG_ICON,catalogSessionId:e})},t.logForwardClick=function(e){i({viewBusinessProfileAction:n.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_FORWARD,catalogSessionId:e})},t.logEmailClick=function(e){i({viewBusinessProfileAction:n.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_EMAIL,catalogSessionId:e})},t.logWebsiteClick=function(e){i({viewBusinessProfileAction:n.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_WEBSITE,catalogSessionId:e})},t.logLocationClick=function(e){i({viewBusinessProfileAction:n.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_LOCATION,catalogSessionId:e})},t.logHoursClick=function(e){i({viewBusinessProfileAction:n.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_HOURS,catalogSessionId:e})},t.logStatusClick=function(e){i({viewBusinessProfileAction:n.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_STATUS,catalogSessionId:e})};var n=s(a(4231));function i(e){const t=new n.default.ViewBusinessProfile(e);t&&t.commit()}},91555:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{contact:t}=e;let a,s;if(t.isMyContact)if(t.name!==t.verifiedName){let e;t.showBusinessCheckmarkAsSecondary&&(e=(0,r.jsx)("div",{className:n.default.icon,children:(0,r.jsx)(l.default,{name:"psa-verified"})})),a=(0,r.jsx)(o.default,{contact:t}),s=(0,r.jsxs)("div",{className:n.default.wrapper,children:[(0,r.jsx)(i.default,{text:`~${t.verifiedName}`,className:n.default.verifiedText,direction:"auto",ellipsify:!0,titlify:!0}),e]})}else a=(0,r.jsx)(o.default,{contact:t,showBusinessCheckmark:t.showBusinessCheckmarkAsPrimary});else a=(0,r.jsx)(i.default,{text:t.verifiedName,direction:"auto",ellipsify:!0,titlify:!0}),s=(0,r.jsx)(o.default,{contact:t,showBusinessCheckmark:t.showBusinessCheckmarkAsPrimary});return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:n.default.title,children:a}),(0,r.jsx)("div",{className:n.default.subtitle,children:s})]})};var n=s(a(80746)),i=s(a(85051)),o=s(a(78972)),l=s(a(2966)),r=a(85893)},66664:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{hours:t}=e,a=function(e){switch(e.status){case l.BUSINESS_OPEN_STATUS.OPEN_24H:return o.default.t(444,{open:`<span class="${i.default.open}">${o.default.t(442)}</span>`});case l.BUSINESS_OPEN_STATUS.OPEN_APPOINTMENT:return o.default.t(445,{open:`<span class="${i.default.open}">${o.default.t(442)}</span>`});case l.BUSINESS_OPEN_STATUS.OPEN:if(e.openUntil&&e.additionalOpen&&e.additionalClose)return o.default.t(449,{open:`<span class="${i.default.open}">${o.default.t(442)}</span>`,time:d(e.openUntil),additionalOpenTime:d(e.additionalOpen),additionalCloseTime:d(e.additionalClose)});if(e.openUntil)return o.default.t(448,{open:`<span class="${i.default.open}">${o.default.t(442)}</span>`,time:d(e.openUntil)});break;case l.BUSINESS_OPEN_STATUS.CLOSED:return e.opensAt?o.default.t(434,{closed:`<span class="${i.default.closed}">${o.default.t(433)}</span>`,time:d(e.opensAt)}):`<span class="${i.default.closed}">${o.default.t(433)}</span>`;case l.BUSINESS_OPEN_STATUS.CLOSED_TODAY:return`<span class="${i.default.closed}">${o.default.t(435)}</span>`}return null}((0,l.getBusinessOpenState)(t));if(null==a)return null;const s=n.default.sanitize(a);return(0,r.jsx)("div",{className:i.default.openStatus,dangerouslySetInnerHTML:{__html:s}})};var n=s(a(27856)),i=s(a(63937)),o=s(a(2408)),l=a(83607),r=a(85893);function d(e){return null==e?"":e.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})}},17003:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.BusinessProfile=N,t.default=void 0;var n=s(a(94184)),i=a(67294),o=s(a(84851)),l=s(a(38880)),r=s(a(10824)),d=s(a(69162)),c=s(a(55454)),u=s(a(92787)),h=s(a(17061)),f=s(a(25061)),p=s(a(85051)),m=s(a(18598)),g=s(a(4919)),x=s(a(12950)),C=a(78615),v=s(a(2408)),_=s(a(663)),j=s(a(23958)),S=a(25281),M=s(a(4231)),E=a(71547),b=s(a(46714)),T=s(a(2966)),I=s(a(76006)),y=a(85893);const{VERIFIED_LEVEL:w}=c.default;function N(e){let t;const a=(0,I.default)(e.contact,["id","verifiedLevel","name","verifiedName"]),s=(0,I.default)(e.businessProfile,["description","categories","website","email","stale","latitude","longitude","businessHours","structuredAddress"]),[n,N]=(0,i.useState)(!0);(0,i.useEffect)((()=>{new M.default.ViewBusinessProfile({viewBusinessProfileAction:M.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_IMPRESSION}).commit()}),[]);const k=()=>{N(!n)},O=()=>{d.default.openModal((0,y.jsx)(o.default,{contact:a}))},R=()=>{d.default.openModal((0,y.jsx)(l.default,{contact:a}))},D=(e,t,a,s)=>{const n=s?(e=>{const{streetAddress:t,localizedCityName:a,zipCode:s}=e;return t&&a&&s?v.default.t(454,{streetAddress:t,city:a,zipCode:s}):t&&a?v.default.t(453,{streetAddress:t,city:a}):t})(s):null;let i,o;if(null!=t&&null!=a&&(i=(0,y.jsx)("div",{style:{height:150},className:r.default.businessMap,children:(0,y.jsx)(j.default,{lat:t,lng:a,name:n||e,width:565,height:150})})),n){let e;e=null!=t&&null!=a?(0,S.getMapUrl)(t,a,n):(0,S.getSearchUrl)(n),o=(0,y.jsx)("div",{className:r.default.address,children:(0,y.jsx)(g.default,{href:e,children:(0,y.jsx)(p.default,{selectable:!0,direction:"auto",text:n})})})}return o||i?(0,y.jsxs)(A,{icon:"business-address",children:[o,i]}):null};let L,F,B,G,V,U,H;t=(0,C.canSeeSMBUpsell)()?(()=>{const e=a.verifiedLevel===w.HIGH?v.default.t(478):v.default.t(455);return(0,y.jsx)(u.default,{a8nText:"business-title",onClick:R,side:(0,y.jsx)(T.default,{className:r.default.infoIcon,display:"inline",name:"info"}),children:e})})():x.default.supportsFeature(x.default.F.VNAME_V_2)?(()=>{let e;switch(a.verifiedLevel){case w.HIGH:e=v.default.t(478);break;case w.LOW:case w.UNKNOWN:e=v.default.t(455)}return(0,y.jsx)(h.default,{a8nText:"business-title",className:r.default.businessTitleText,onClick:O,children:e})})():(()=>{const e=a,t=!e.name||e.name===e.verifiedName;let s,n="psa-unverified";switch(e.verifiedLevel){case w.HIGH:n="psa-verified",t?s=(0,y.jsx)(p.default,{className:r.default.verifiedLabel,text:v.default.t(483)}):(s=(0,y.jsx)(p.default,{className:r.default.verifiedLabel,text:v.default.t(481)}),s=(0,y.jsx)(_.default,{id:482,params:{verified:s,businessName:e.verifiedName}}));break;case w.LOW:s=t?(0,y.jsx)(p.default,{text:v.default.t(460)}):v.default.t(459,{businessName:e.verifiedName});break;case w.UNKNOWN:s=v.default.t(455)}return(0,y.jsx)(A,{icon:n,className:r.default.businessMarker,onClick:O,children:s})})();const W=s;var q;if(W.stale)L=(0,y.jsx)("div",{className:r.default.contactBusinessInfoSpinner,children:(0,y.jsx)(b.default,{size:20,stroke:5})});else if(F=(null===(q=W.categories)||void 0===q?void 0:q.length)?(0,y.jsx)(A,{icon:"business-category",children:(0,y.jsx)(p.default,{selectable:!0,direction:"auto",text:W.categories.map((e=>e.localized_display_name)).join(v.default.t(840))})}):null,B=W.description?(0,y.jsx)(A,{icon:"business-description",children:(0,y.jsx)(m.default,{text:W.description,textLimit:c.default.BUSINESS_DESCRIPTION_INFO_PANEL_TRUNC_LENGTH,children:({textLimit:e})=>(0,y.jsx)(p.default,{selectable:!0,direction:"auto",breakWord:!0,text:W.description,textLimit:e})})}):null,G=D(a.name,W.latitude,W.longitude,W.structuredAddress),W.website&&Array.isArray(W.website)&&W.website.length&&(V=W.website.map(((e,t)=>{const a=(0,E.getWebsiteLink)(e),s=(0,y.jsx)(p.default,{selectable:!0,direction:"auto",text:e}),n=(0,y.jsx)(g.default,{className:r.default.link,href:a,children:s});return(0,y.jsx)(A,{icon:"business-website",children:n},t)}))),W.businessHours&&(U=(e=>{const t=(0,E.getBusinessHours)(e).map((e=>{const{day:t,hours:a,first:s}=e;return!s&&n?null:(0,y.jsx)(P,{day:t,hours:a,first:s,collapsed:n},t)}));return(0,y.jsx)(A,{icon:"business-hours",onClick:k,children:t})})(W.businessHours)),W.email){const e=(0,y.jsx)(p.default,{selectable:!0,direction:"auto",text:W.email}),t=(0,y.jsx)(g.default,{className:r.default.link,href:`mailto:${W.email}`,children:e});H=(0,y.jsx)(A,{icon:"business-email",dir:"auto",children:t})}let z;return(L||null!=G||F||B||null!=U||H||V)&&(z=(0,y.jsx)(f.default,{theme:"padding",children:(0,y.jsxs)("div",{className:r.default.contactBusinessInfo,children:[L,G,F,B,U,H,V]})})),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(f.default,{children:t}),z]})}const P=e=>{const t=e.first?(0,y.jsx)("div",{className:r.default.businessHoursChevron,role:"button",children:(0,y.jsx)(T.default,{className:e.collapsed?"":r.default.flipSvg,display:"inline",name:"chevron-down-alt"})}):null;return(0,y.jsxs)("div",{className:r.default.businessHoursRow,children:[(0,y.jsx)("div",{className:r.default.businessHoursDay,children:(0,y.jsx)(p.default,{direction:"auto",text:e.day})}),(0,y.jsx)("div",{className:r.default.businessHoursHours,children:(0,y.jsx)(p.default,{direction:"auto",text:e.hours})}),t]})},A=e=>(0,y.jsxs)("div",{className:(0,n.default)(r.default.dataRow,e.className),onClick:e.onClick,children:[(0,y.jsx)("div",{className:r.default.dataRowIcon,children:(0,y.jsx)(T.default,{name:e.icon})}),(0,y.jsx)("div",{className:r.default.dataRowText,children:e.children})]});var k=N;t.default=k},93711:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({contact:e,businessProfile:t,onOpenStatus:a,onProductCatalog:s,onProfilePicLoad:f,onProfilePicClick:p}){const{businessHours:m,categories:g}=(0,u.default)(t,["businessHours","categories"]),x=(0,h.jsx)(i.default,{contact:e});let C;null!=g&&g.length>0&&(C=(0,h.jsx)("div",{className:l.default.categories,children:g.map((e=>e.localized_display_name)).join(c.default.t(839))}));const v=m?(0,h.jsx)(o.default,{hours:m}):null;return(0,h.jsxs)(d.default,{className:l.default.noPaddingBottom,theme:"padding",children:[(0,h.jsx)(r.default,{contact:e,onClick:p,onOpenStatus:a,onLoad:f}),(0,h.jsxs)("div",{className:l.default.info,children:[x,C,v,(0,h.jsx)(n.default,{contact:e,onProductCatalog:s})]})]})};var n=s(a(7811)),i=s(a(91555)),o=s(a(66664)),l=s(a(12603)),r=s(a(77392)),d=s(a(25061)),c=s(a(2408)),u=s(a(76006)),h=a(85893)},91247:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({contact:e}){return(0,r.jsx)(n.ChatInfoDrawerSection,{newChatInfo:!0,a8nText:"section-about",title:i.default.t(736),children:(0,r.jsx)(l.TextSpan,{theme:"title",size:"16",children:(0,r.jsx)(o.default,{id:e.id})})})};var n=a(63984),i=s(a(2408)),o=s(a(77898)),l=a(97504),r=a(85893)},61503:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,C.default)();return(0,v.jsx)(j,(0,i.default)((0,i.default)({},e),{},{newChatInfo:t}))};var i=n(a(81109)),o=a(67294),l=s(a(75381)),r=a(63984),d=n(a(69162)),c=n(a(55454)),u=n(a(82260)),h=a(60651),f=n(a(86025)),p=n(a(2408)),m=n(a(71681)),g=n(a(79485)),x=a(97504),C=n(a(4253)),v=a(85893);class _ extends o.Component{constructor(...e){super(...e),this._commonGroupInitialized=!1,this.state={collapsed:!1,numGroups:0},this.rerender=()=>{this.forceUpdate()},this.handleClick=(e,t)=>{d.default.openChatFromUnread(t).then((e=>{e&&d.default.focusChatTextInput(t)})),this.props.onClose()},this.handleShowMore=()=>{this.setState({collapsed:!1})},this.renderItem=e=>{const{chat:t,showNewChatInfo:a}=e;return(0,v.jsx)(l.default,{chat:t,theme:a?"new-chat-info":"drawer-list",contact:t.contact,mode:l.Mode.INFO,onClick:this.handleClick},t.id.toString())}}static getDerivedStateFromProps(e,t){const{commonGroups:a}=e.contact,s=a?a.length:0;return t.numGroups<=c.default.INFO_DRAWER_MAX_ROWS&&s>c.default.INFO_DRAWER_MAX_ROWS?{numGroups:s,collapsed:!0}:{numGroups:s}}componentDidMount(){const{commonGroups:e}=this.props.contact;e&&(this.props.listeners.add(e,"add remove",this.rerender),this._commonGroupInitialized=!0),(0,h.findCommonGroups)(this.props.contact).catch((()=>{throw __LOG__(4,!0,new Error,!0)`get from participants table failed`,SEND_LOGS("get from participants table failed when finding common groups"),new Error("get from participants table failed")}))}componentDidUpdate(e){if(e.contact!==this.props.contact){const t=e.contact.commonGroups;t&&e.listeners.remove(t,"add remove",this.rerender),this._commonGroupInitialized=!1}const{commonGroups:t}=this.props.contact;t&&(this._commonGroupInitialized||(this.props.listeners.add(t,"add remove",this.rerender),this._commonGroupInitialized=!0))}componentWillUnmount(){const{commonGroups:e}=this.props.contact;e&&this._commonGroupInitialized&&(this.props.listeners.remove(e,"add remove",this.rerender),this._commonGroupInitialized=!1)}getData(){let e=this.props.contact.commonGroups;return e.length>c.default.INFO_DRAWER_MAX_ROWS&&this.state.collapsed&&(e=e.slice(0,c.default.INFO_DRAWER_MAX_ROWS)),e.map((e=>({itemKey:e.id.toString(),chat:e,showNewChatInfo:this.props.newChatInfo,height:68})))}render(){const e=this.props.contact.commonGroups,t=this.props.newChatInfo;if(!e||!e.length)return null;let a;if(e.length>c.default.INFO_DRAWER_MAX_ROWS&&this.state.collapsed){const t=e.length-c.default.INFO_DRAWER_MAX_ROWS;a=(0,v.jsx)(u.default,{numMore:t,onClick:this.handleShowMore,newChatInfo:this.props.newChatInfo})}const s=t?p.default.t(738,{number:p.default.n(e.length),_plural:e.length}):p.default.t(2127),n=t?null:(0,v.jsx)(x.TextSpan,{theme:"section-title",children:p.default.n(e.length)});return(0,v.jsxs)(r.ChatInfoDrawerListSection,{newChatInfo:t,a8nText:"section-common-groups",title:s,subtitle:n,children:[(0,v.jsx)(f.default,{flatListController:this.props.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:this.getData(),renderItem:this.renderItem}),a]})}}_.CONCERNS={contact:["commonGroups","isBusiness"]},_.displayName="ContactInfoCommonGroupsBase";const j=(0,m.default)((0,g.default)(_,_.CONCERNS))},22965:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,se.default)(),a=(0,ne.default)();return(0,ce.jsx)(he,(0,i.default)((0,i.default)({},e),{},{newChatInfo:t,style:t?a:null}))};var i=n(a(81109)),o=a(55084),l=a(67294),r=n(a(66742)),d=n(a(34584)),c=n(a(12306)),u=a(92026),h=n(a(17003)),f=a(47874),p=n(a(93711)),m=n(a(60028)),g=n(a(22715)),x=n(a(84758)),C=a(63984),v=n(a(16298)),_=n(a(69162)),j=n(a(91247)),S=n(a(61503)),M=n(a(89180)),E=n(a(85784)),b=n(a(20656)),T=n(a(22720)),I=a(59014),y=n(a(17747)),w=n(a(92787)),N=n(a(9042)),P=n(a(17061)),A=n(a(79864)),k=s(a(55588)),O=n(a(25061)),R=n(a(38946)),D=n(a(67893)),L=n(a(12950)),F=a(78615),B=n(a(52087)),G=n(a(45530)),V=n(a(2408)),U=n(a(71681)),H=n(a(38775)),W=n(a(4231)),q=n(a(93450)),z=n(a(25817)),Y=a(70790),K=n(a(90277)),Z=n(a(40630)),X=n(a(87947)),$=n(a(56605)),Q=n(a(79485)),J=a(15298),ee=n(a(2966)),te=a(97504),ae=s(a(49201)),se=n(a(4253)),ne=n(a(58728)),ie=a(12825),oe=a(28535),le=a(10608),re=a(86723),de=n(a(90162)),ce=a(85893);class ue extends l.Component{constructor(e){super(e),this.flatListController=new D.default,this.handleVerificationClick=()=>{this.props.onVerification()},this._handleDeleteChat=()=>{const e=x.default.assertGet(this.props.contact.id);_.default.deleteOrExitChat(e)},this.handleClose=()=>{this.props.onClose?this.props.onClose():this.props.uim.uie.requestDismiss()},this._handleViewPicture=e=>{if(!this._canViewPicture)return void _.default.openToast((0,ce.jsx)(ae.default,{id:(0,ae.genId)(),msg:V.default.t(1420)}));const t=e.target;_.default.openModalMedia((0,ce.jsx)(z.default,{contact:this.props.contact,profilePicThumb:this.props.contact.getProfilePicThumb(),animateBorderRadius:!0,getZoomNode:e=>{e(t)}}),{transition:"profile-viewer",uim:this.props.uim})},this._handleOpenStatus=()=>{(0,u.logStatusClick)((0,Y.getProductCatalogSessionId)(this.context))},this._handleDetailImageLoad=()=>{this._canViewPicture=!0},this._canViewPicture=!1,this.state={scrollDepth:100}}componentDidMount(){const{contact:e}=this.props;e.businessProfile&&!e.businessProfile.stale&&e.businessCatalog&&m.default.findCarouselCatalog(e.id).catch((0,o.filteredCatch)(ie.ServerStatusCodeError,(()=>{__LOG__(3)`Failed to fetch product catalog in contact drawer from server`}))),L.default.supportsFeature(L.default.F.MD_BACKEND)&&(0,le.getFanOutList)([e.id,(0,re.assertGetMe)()]).then((e=>{(0,oe.ensureE2ESessions)(e)}));const{session:t}=(0,Y.getProductCatalogContext)(this.context);t.isAccidental()?_.default.setDrawerContext("right",(0,Y.buildProductCatalogContext)(new K.default,(0,I.getMaybeBizPlatformForLogging)(e.id.toString()),W.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_PROFILE)):e.isBusiness&&(0,F.canSeeBizProfileV3)()&&(0,u.logProfileImpression)((0,Y.getProductCatalogSessionId)(this.context))}componentWillUnmount(){const{contact:e}=this.props,{session:t}=(0,Y.getProductCatalogContext)(this.context);t.isAccidental()||e.isBusiness&&(0,F.canSeeBizProfileV3)()&&(0,u.logProfileExit)((0,Y.getProductCatalogSessionId)(this.context),this.state.scrollDepth)}_shouldRenderCatalog(){const{contact:e}=this.props;return!!(e&&e.isBusiness&&e.businessProfile)&&!!e.businessCatalog}_renderBusinessProfileTopCard(){return this.props.contact.businessProfile?(0,ce.jsx)(p.default,{contact:this.props.contact,onProfilePicLoad:this._handleDetailImageLoad,onProfilePicClick:this._handleViewPicture,onOpenStatus:this._handleOpenStatus,businessProfile:this.props.contact.businessProfile,onProductCatalog:this.props.onProductCatalog}):null}_renderTopCard(){const{contact:e}=this.props;return(0,F.canSeeBizProfileV3)()&&e.isBusiness?this._renderBusinessProfileTopCard():(0,ce.jsx)(T.default,{contact:e,onDetailImageLoad:this._handleDetailImageLoad,onDetailImageClick:this._handleViewPicture})}_handleScroll(e){const t=Math.floor(100*(1+e.currentTarget.scrollTop/e.currentTarget.offsetHeight));t>this.state.scrollDepth&&this.setState({scrollDepth:t})}renderProductCatalogSection(){if(!this._shouldRenderCatalog())return null;const{contact:e,onProductCatalog:t,onProductDetail:a}=this.props,s=m.default.get(e.id);if(!s)return null;let n="",i=!1;(0,F.canSeeBizProfileV3)()&&(n=V.default.t(565),i=!0);const{session:o}=(0,Y.getProductCatalogContext)(this.context);return o.isAccidental()?null:(0,f.hasShop)(e.businessProfile)?(0,F.bannedShopsEnabled)()&&(0,f.isShopBanned)(e.businessProfile)?null:(0,ce.jsx)($.default,{businessProfile:e.businessProfile,catalog:s,subtitle:n,hideIncompleteRows:i}):(0,ce.jsx)(g.default,{onProductDetail:a,onProductCatalog:t,catalog:s,subtitle:n,hideIncompleteRows:i,shouldLog:!0})}renderButtons(){const e=this.props.contact;let t;return x.default.get(e.id)&&(t=(0,ce.jsx)(P.default,{a8nText:"li-delete-chat",icon:(0,ce.jsx)(ee.default,{name:"delete"}),color:"danger",onClick:this._handleDeleteChat,theme:this.props.newChatInfo?"new-chat-info":null,children:V.default.t(771)})),(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)(E.default,{contact:e}),(0,ce.jsx)(C.ChatInfoDrawerButtonsSection,{newChatInfo:this.props.newChatInfo,children:t})]})}render(){const e=this.props.contact,t=(0,ce.jsx)(S.default,{contact:this.props.contact,onClose:this.handleClose,flatListController:this.flatListController}),a=x.default.get(e.id);let s=null;this.props.onMediaGallery&&a&&(s=(0,ce.jsx)(v.default,{chat:a,onMediaGallery:this.props.onMediaGallery}));let n=null;L.default.supportsFeature(L.default.F.LIVE_LOCATIONS)&&a&&(n=(0,ce.jsx)(H.default,{chat:a,onClick:this.props.onLiveLocation}));let i=null,o=null;(0,F.canSeeBizProfileV3)()?o=this.renderProductCatalogSection():i=this.renderProductCatalogSection();const l=a&&a.mute.canMute()?(0,ce.jsx)(q.default,{chat:a,mute:a.mute,settings:X.default,theme:this.props.newChatInfo?"new-chat-info":null}):null;let u,f=null;if(this.props.onStarred&&!this.props.newChatInfo){const e=(0,ce.jsx)(ee.default,{className:M.default.chevron,name:"chevron-right-alt",directional:!0});f=(0,ce.jsx)(w.default,{a8nText:"block-starred-messages",side:e,onClick:this.props.onStarred,children:(0,ce.jsx)(te.TextSpan,{theme:"title",children:V.default.t(606)})})}this.props.onStarred&&this.props.newChatInfo&&(u=(0,ce.jsx)(b.default,{chat:a,onStarred:this.props.onStarred,onContactCard:this.props.onContactCard}));const p=a&&a.shouldShowEphemeralSetting()?(0,ce.jsx)(R.default,{onClick:this.props.onEphemeral,chat:a,theme:this.props.newChatInfo?"new-chat-info":null}):null;let m=null;const g=a&&a.getReceivedVcardMsgs();if(L.default.supportsFeature(L.default.F.INDEX_RECEIVED_VCARD)&&g&&g.length&&!this.props.newChatInfo){const e=(0,ce.jsx)(ee.default,{className:M.default.chevron,name:"chevron-right-alt",directional:!0});m=(0,ce.jsx)(w.default,{a8nText:"block-contact-card",side:e,onClick:this.props.onContactCard,children:(0,ce.jsx)(te.TextSpan,{theme:"title",children:V.default.t(735,{_plural:g.length})})})}const _=L.default.supportsFeature(L.default.F.MD_BACKEND)?(0,ce.jsx)(de.default,{contact:(0,J.unproxy)(e),onVerificationClick:this.handleVerificationClick}):null;let E=null;(l||f||p||m||_)&&(E=this.props.newChatInfo?(0,ce.jsxs)(C.ChatInfoDrawerSection,{newChatInfo:!0,children:[l,p,_]}):(0,ce.jsxs)(C.ChatInfoDrawerSection,{newChatInfo:!1,children:[l,f,p,m,_]}));const T=this.props.newChatInfo&&!e.isBusiness,I=T?null:(0,ce.jsx)(r.default,{contact:(0,J.unproxy)(e)}),P=T?(0,ce.jsx)(j.default,{contact:(0,J.unproxy)(e)}):null,A=this._renderTopCard();let D,B,U,W=null;return e.isBusiness&&e.businessProfile&&((0,F.canSeeBizProfileV3)()&&e.businessProfile?(W=(0,ce.jsx)(c.default,{businessProfile:e.businessProfile}),D=(0,ce.jsx)(d.default,{contact:e}),e.labels&&e.labels.length>0&&(B=(0,ce.jsx)(O.default,{theme:"padding",children:(0,ce.jsx)(G.default,{labels:e.labels,theme:"standalone"})})),U=this._handleScroll.bind(this)):e.businessProfile&&(W=(0,ce.jsx)(h.default,{contact:e,businessProfile:e.businessProfile}))),(0,ce.jsxs)(y.default,{theme:"striped",style:this.props.style,children:[(0,ce.jsx)(k.default,{title:V.default.t(2008),type:k.DRAWER_HEADER_TYPE.SMALL,onCancel:this.handleClose}),(0,ce.jsx)(N.default,{flatListControllers:[this.flatListController],onScroll:U,children:(0,ce.jsxs)("section",{className:M.default.body,children:[A,D,B,o,W,n,i,P,s,u,E,I,undefined,t,this.renderButtons()]})})]},"contact-info-modal")}}ue.contextType=A.default,ue.CONCERNS={contact:["id","formattedName","formattedUser","formattedShortName","isBusiness","isEnterprise","isMyContact","commonGroups","businessProfile","showBusinessCheckmarkAsPrimary","showBusinessCheckmarkAsSecondary","verifiedName","verifiedLevel","name","notifyName","labels","businessCatalog","isMe","statusMute","displayName"]},ue.displayName="ContactInfoDrawerBase";const he=(0,B.default)((0,Z.default)((0,U.default)((0,Q.default)(ue,ue.CONCERNS))))},90162:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onVerificationClick:t}=e,a=(0,h.default)(e.contact,["id","privacyMode"]),s=(0,f.default)();if(u.default.bspSystemMessageEnabled){const e=function(e,t){if((0,l.default)(t.user))return{text:r.default.t(1756),title:r.default.t(742),onClick:()=>{(0,d.default)(r.default.t(1754),(0,i.getSupportChatSafetyFaqUrl)(),r.default.t(1755))}};switch(e){case c.ReducedPrivacyMode.E2EE:return null;case c.ReducedPrivacyMode.BSP:return{text:r.default.t(307),title:r.default.t(742),onClick:()=>{(0,d.default)((0,o.formatBspModalText)(),(0,i.getE2EEnterpriseFaqUrl)())}};case c.ReducedPrivacyMode.FB:return{text:r.default.t(308),title:r.default.t(742),onClick:()=>{(0,d.default)((0,o.formatFbModalText)(),(0,i.getE2EEnterpriseFaqUrl)())}}}}((0,c.getReducedPrivacyMode)(a.privacyMode),a.id);if(e)return(0,m.jsx)(n.default,{title:e.title,text:e.text,onClick:e.onClick,theme:s?"new-chat-info":void 0})}const g=p.default.isVoiceCallEnabled()||p.default.isVideoCallEnabled()?r.default.t(2012):r.default.t(2011);return(0,m.jsx)(n.default,{onClick:t,text:g,theme:s?"new-chat-info":void 0})};var n=s(a(82829)),i=a(57092),o=a(60408),l=s(a(23388)),r=s(a(2408)),d=s(a(20838)),c=a(42805),u=s(a(65565)),h=s(a(76006)),f=s(a(4253)),p=s(a(61057)),m=a(85893)},85784:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,C.default)(),a=t?"new-chat-info":null,s=(0,x.default)(e.contact,["displayName","isBusiness","isContactBlocked"]);let _=null;if(s.isContactBlocked){const i=t?c.default.t(740,{contact:s.displayName}):c.default.t(1790);_=(0,v.jsx)(d.default,{a8nText:"li-unblock",color:"success",icon:(0,v.jsx)(g.default,{name:"settings-blocked",directional:!0}),onClick:()=>{l.default.openModal((0,v.jsx)(r.default,{okText:c.default.t(1790),onOK:()=>{(0,n.unblockContact)(e.contact),l.default.closeModal()},cancelText:c.default.t(1996),onCancel:()=>l.default.closeModal(),children:(0,v.jsx)(u.default,{id:1791,params:{contact:(0,v.jsx)(h.default,{contact:e.contact})}})}))},theme:a,children:i})}else{const i=t?c.default.t(737,{contact:s.displayName}):c.default.t(324);_=(0,v.jsx)(d.default,{a8nText:"li-block",color:"danger",icon:(0,v.jsx)(g.default,{name:"settings-blocked",directional:!0}),onClick:()=>{l.default.openModal((0,v.jsx)(r.default,{onOK:()=>{(0,n.blockContact)(e.contact),l.default.closeModal()},okText:c.default.t(324),onCancel:()=>l.default.closeModal(),cancelText:c.default.t(1996),children:(0,v.jsx)(u.default,{id:326,params:{contact:(0,v.jsx)(h.default,{contact:e.contact})}})}))},theme:a,children:i})}let j=c.default.t(1587);s.isBusiness||(j=t?c.default.t(1593,{contactInfo:s.displayName}):c.default.t(1590));const S=(0,v.jsx)(d.default,{a8nText:"li-report-spam",color:"danger",icon:(0,v.jsx)(g.default,{name:"thumbs-down",directional:!0}),onClick:()=>{l.default.openModal((0,v.jsx)(f.default,{isBusiness:e.contact.isBusiness,isGroupChat:!1,onReport:()=>{const t=i.default.get(e.contact.id);t&&(0,p.sendSpamReport)(t,m.SpamFlow.Account),l.default.closeModal()},onReportBlockClear:()=>{const t=i.default.get(e.contact.id);t&&(0,p.sendSpamBlockClear)(t,m.SpamFlow.Block),l.default.closeModal()},onCancel:()=>l.default.closeModal()}))},theme:a,children:j});return t?(0,v.jsxs)(o.ChatInfoDrawerButtonsSection,{newChatInfo:!0,children:[_,S]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(o.ChatInfoDrawerButtonsSection,{newChatInfo:!1,children:_}),(0,v.jsx)(o.ChatInfoDrawerButtonsSection,{newChatInfo:!1,children:S})]})};var n=a(38512),i=s(a(84758)),o=a(63984),l=s(a(69162)),r=s(a(75940)),d=s(a(17061)),c=s(a(2408)),u=s(a(663)),h=s(a(78972)),f=s(a(19582)),p=a(84254),m=a(48224),g=s(a(2966)),x=s(a(76006)),C=s(a(4253)),v=a(85893)},20656:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({chat:e,onStarred:t,onContactCard:a}){let s=null;const c=e&&e.getReceivedVcardMsgs();o.default.supportsFeature(o.default.F.INDEX_RECEIVED_VCARD)&&c&&c.length&&(s=(0,d.jsx)(n.default,{a8nText:"block-starred-messages",side:"chevron",icon:"account-box",onClick:a,children:(0,d.jsx)(r.TextSpan,{theme:"title",children:l.default.t(735,{_plural:c.length})})}));return(0,d.jsxs)(i.ChatInfoDrawerSection,{a8nText:"section-starred-messages",newChatInfo:!0,children:[(0,d.jsx)(n.default,{a8nText:"block-starred-messages",side:"chevron",icon:"star",onClick:t,children:(0,d.jsx)(r.TextSpan,{theme:"title",size:"16",children:l.default.t(606)})}),s]})};var n=s(a(34142)),i=a(63984),o=s(a(12950)),l=s(a(2408)),r=a(97504),d=a(85893)},22720:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,_.default)()?(0,E.jsx)(A,(0,i.default)({},e)):(0,E.jsx)(w,(0,i.default)({},e))};var i=n(a(81109)),o=n(a(56720)),l=n(a(94589)),r=n(a(84758)),d=s(a(88419)),c=n(a(25061)),u=n(a(85051)),h=a(63290),f=n(a(12950)),p=n(a(45530)),m=n(a(78972)),g=a(20845),x=a(15298),C=n(a(2966)),v=a(97504),_=n(a(4253)),j=n(a(52060)),S=n(a(30584)),M=n(a(98532)),E=a(85893);const b={display:"p357zi0d",justifyContent:"ac2vgrno",marginBottom:"du8bjn1j"},T={minHeight:"g4oj0cdv",marginTop:"g1eqewly",overflowX:"gfz4du6o",overflowY:"r7fjleex",color:"hp667wtd",textOverflow:"lhj4utae",whiteSpace:"le5p0ye3"},I={display:"p357zi0d",flexDirection:"sap93d0t"},y={display:"l7jjieqr",flexShrink:"oq44ahr5",flexGrow:"tvf2evcx",flexBasis:"lb5m6g5c",marginTop:"b9l0eqez",marginStart:"k6y3xtnu"};function w({contact:e,onDetailImageLoad:t,onDetailImageClick:a}){const s=!e.name&&e.notifyName?(0,E.jsx)("div",{className:(0,o.default)(T),children:(0,E.jsxs)(v.TextSpan,{theme:"muted",children:["~",(0,E.jsx)(u.default,{direction:"auto",text:e.notifyName,selectable:!0})]})}):null,n=e.showBusinessCheckmarkAsSecondary&&f.default.supportsFeature(f.default.F.VNAME_V_2)?(0,E.jsxs)("div",{className:(0,o.default)(I),children:[(0,E.jsx)(u.default,{text:e.verifiedName,direction:"auto"}),(0,E.jsx)("div",{className:(0,o.default)(y),children:(0,E.jsx)(C.default,{name:"psa-verified"})})]}):null,i=r.default.get(e.id),l=(null==i?void 0:i.presence)?(0,E.jsx)(S.default,{contact:e,presence:i.presence,chatstate:i.presence.chatstate,location:"info"}):null;return(0,E.jsxs)(c.default,{theme:"padding-large",children:[(0,E.jsx)("div",{className:(0,o.default)(b),children:(0,E.jsx)(d.default,{id:e.id,size:d.DETAIL_IMAGE_SIZE.LARGE,loader:!0,onLoad:t,onClick:a,quality:d.DETAIL_IMAGE_QUALITY.HIGH})}),(0,E.jsx)(v.TextHeader,{level:"2",theme:"large",children:(0,E.jsx)(m.default,{contact:e,selectable:!0,showBusinessCheckmark:e.showBusinessCheckmarkAsPrimary})}),s,(0,E.jsxs)("div",{className:(0,o.default)(T),children:[(0,E.jsx)(v.TextSpan,{theme:"muted",children:n}),(0,E.jsx)(v.TextSpan,{theme:"muted",children:l})]}),(0,E.jsx)(p.default,{labels:e.labels})]})}const N={display:"p357zi0d",justifyContent:"ac2vgrno",marginBottom:"pz0xruzv"},P={lineHeight:"a4ywakfo",marginTop:"qt60bha0"};function A({contact:e,onDetailImageLoad:t,onDetailImageClick:a}){return(0,E.jsxs)(c.default,{theme:"padding-large",children:[(0,E.jsx)("div",{className:(0,o.default)(N),children:(0,E.jsx)(d.default,{id:e.id,size:d.DETAIL_IMAGE_SIZE.LARGE,loader:!0,onLoad:t,onClick:a,quality:d.DETAIL_IMAGE_QUALITY.HIGH})}),(0,E.jsxs)(h.FlexColumn,{align:"center",children:[(0,E.jsx)(v.TextHeader,{level:"2",size:"24",children:(0,E.jsx)(m.default,{contact:e,selectable:!0})}),(0,E.jsx)("div",{className:(0,o.default)(P),children:(0,E.jsx)(g.SelectableSpan,{dir:"auto",selectable:!0,children:(0,E.jsx)(v.TextSpan,{size:"16",color:"secondary",children:(0,M.default)(e.id)})})})]}),(0,E.jsx)(O,{contact:e}),(0,E.jsx)(p.default,{labels:e.labels})]})}const k={container:{marginTop:"a4rz4n5c",marginBottom:"inww9tbj"},button:{marginStart:"nzcjdldu",marginEnd:"gqi0zhd6"}};function O({contact:e}){const t=(0,j.default)((0,x.unproxy)(e));return t.isVideoCallEnabled||t.isVoiceCallEnabled?(0,E.jsxs)(h.FlexRow,{justify:"center",xstyle:k.container,children:[(0,E.jsx)(l.default,{icon:"voice-call-filled",label:"Audio",a8nText:"contact-action voice-call-button",xstyle:k.button,theme:"new-chat-info",disabled:!t.canStartVoiceCall,onClick:t.startVoiceCall}),(0,E.jsx)(l.default,{icon:"call-video",label:"Video",a8nText:"contact-action video-call-button",xstyle:k.button,theme:"new-chat-info",disabled:!t.canStartVideoCall,onClick:t.startVideoCall})]}):null}},82260:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({numMore:e,newChatInfo:t,viewAll:a,onClick:s}){if(!t){const t=(0,u.jsx)(r.default,{theme:"transparent",children:(0,u.jsx)(d.default,{name:"down"})});return(0,u.jsx)(i.default,{image:t,theme:"new-chat-info",primary:l.default.t(1037,{count:e,_plural:e}),onClick:s})}const f=(0,u.jsx)(o.FlexRow,{align:"center",justify:"center",xstyle:h.iconWrapper,children:a?null:(0,u.jsx)(r.default,{theme:"transparent",children:(0,u.jsx)(d.default,{name:"down",color:"secondary"})})});let p=l.default.t(1037,{count:e,_plural:e});a&&(p=l.default.t(1036,{more:p}));return(0,u.jsxs)(c.default,{xstyle:h.container,onClick:s,children:[f,(0,u.jsx)("div",{className:(0,n.default)(h.text,a&&h.textAlt),children:p})]})};var n=s(a(56720)),i=s(a(55092)),o=a(63290),l=s(a(2408)),r=s(a(80091)),d=s(a(2966)),c=s(a(89135)),u=a(85893);const h={container:{height:"q1n4p668",width:"ln8gz9je",paddingStart:"ddw6s8x9",display:"p357zi0d",alignItems:"gndfcl4n",color:"pm5hny62",":hover":{backgroundColor:"os03hap6"}},iconWrapper:{width:"fujhy7ri"},text:{flexGrow:"ggj6brxn",textAlign:"ml4r5409"},textAlt:{color:"dmdq60dq"}}},66942:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,b.default)(e.chat,["groupMetadata"]),a=(0,b.default)((0,C.default)(t.groupMetadata,"chat.groupMetadata"),["desc","owner","creation","restrict","participants"]),[s,n]=(0,o.useState)(a.desc),[N,P]=(0,o.useState)(!1),[A,k]=(0,o.useState)(e.showFullDescription||!(s&&s.length>30)),O=(0,T.default)(),R=(0,I.default)();if((0,E.useListener)(a,"change:desc",(()=>{n(a.desc)})),!(p.default.supportsFeature(p.default.F.GROUPS_V_3)&&_.default.groupDescLength>0))return null;const D={textLimit:A?1/0:h.default.GROUP_DESCRIPTION_INFO_PANEL_TRUNC_LENGTH,readMoreText:g.default.t(1576),onReadMore:()=>{k(!0)},formatters:t.isTrusted()?m.Configuration.TrustedGroupDesc({links:x.findLinks(s)}):m.Configuration.UntrustedGroupDesc()},L=O?[M.TextInputCustomStyleThemes.groupInfoName,M.TextInputCustomStyleThemes.newChatInfoDefaultText]:[M.TextInputCustomStyleThemes.groupInfoName];let F=(0,y.jsx)("div",{className:(0,l.default)(w.inputWrapper),children:(0,y.jsx)(M.default,{a8n:"group-info-drawer-description-title-input",value:s,emptyValuePlaceholder:g.default.t(240),renderEmojiTextInLockMode:D,editable:a.canSetDescription(),pending:N,showRemaining:!0,maxLength:_.default.groupDescLength,onChange:e=>{n(e)},onSave:()=>{if(!a.canSetDescription())return;let e=s||"";const o=e.match(/\r\n/gm)?"\r\n":"\n",l=new RegExp(`^(${o}{2,})([^\n])`,"gm");e=e.replace(l,`${o}$2`);const r=(0,f.default)(e||"");if(r===a.desc)return n(r);P(!0),(0,v.default)((0,j.setGroupDesc)(t,r),R).catch((0,i.catchAbort)((()=>{}))).catch((()=>{__LOG__(3)`group_info_drawer:onSetDescription failed`})).finally((()=>{n(a.desc),P(!1)}))},onCancel:()=>{n(a.desc)},multiline:!0,editRestrictionInfo:a.restrict?()=>{c.default.openModal((0,y.jsx)(u.default,{onOK:()=>c.default.closeModal(),okText:g.default.t(2183),children:g.default.t(1445)}))}:void 0,supportsEmoji:!0,lockable:!0,lowProfile:!0,customStyleThemes:L,theme:"small",showEditOnHover:O})});O&&!s&&a.restrict&&(F=null);if(O){var B;let e;const t=a.owner&&(null===(B=a.participants.get(a.owner))||void 0===B?void 0:B.contact);return t&&(e=(0,y.jsx)(S.TextDiv,{theme:"muted",children:d.default.createdByStr(t.formattedName,a.creation)})),F||e?(0,y.jsxs)(r.ChatInfoDrawerSection,{xstyle:w.chatInfoSection,newChatInfo:!0,children:[F,e]}):null}return(0,y.jsx)(r.ChatInfoDrawerSection,{newChatInfo:!1,theme:"group-desc-padding",title:g.default.t(985),children:F})};var i=a(58568),o=a(67294),l=n(a(56720)),r=a(63984),d=n(a(25142)),c=n(a(69162)),u=n(a(75940)),h=n(a(55454)),f=n(a(61136)),p=n(a(12950)),m=a(49895),g=n(a(2408)),x=s(a(17126)),C=n(a(91619)),v=n(a(79267)),_=n(a(65565)),j=a(2027),S=a(97504),M=s(a(29458)),E=a(61192),b=n(a(76006)),T=n(a(4253)),I=n(a(29579)),y=a(85893);const w={chatInfoSection:{paddingTop:"nlnf8xo7",paddingBottom:"r219jyu0"},inputWrapper:{whiteSpace:"bbv8nyr4"}}},88033:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,Y.default)(),a=(0,K.default)();return(0,Q.jsx)(te,(0,i.default)((0,i.default)({},e),{},{newChatInfo:t,style:t?a:null}))};var i=n(a(81109)),o=a(67294),l=n(a(76610)),r=n(a(50692)),d=n(a(70569)),c=n(a(34142)),u=a(63984),h=n(a(16298)),f=n(a(69162)),p=n(a(75940)),m=n(a(17747)),g=n(a(92787)),x=n(a(9042)),C=s(a(55588)),v=n(a(37719)),_=n(a(85051)),j=n(a(38946)),S=n(a(67893)),M=n(a(12950)),E=n(a(66942)),b=n(a(27966)),T=n(a(32441)),I=n(a(80368)),y=n(a(30965)),w=n(a(61704)),N=n(a(76729)),P=n(a(52087)),A=n(a(2408)),k=n(a(71681)),O=n(a(38775)),R=n(a(4231)),D=a(97449),L=n(a(93450)),F=n(a(40630)),B=n(a(65565)),G=n(a(87947)),V=n(a(79485)),U=a(15298),H=n(a(11569)),W=n(a(2966)),q=a(97504),z=s(a(49201)),Y=n(a(4253)),K=n(a(58728)),Z=n(a(82829)),X=n(a(61057)),$=a(276),Q=a(85893);const J=(0,z.genId)("max_participant_toast");class ee extends o.Component{constructor(e){super(e),this._participantFlatListController=new S.default,this._pendingParticipantFlatListController=new S.default,this._setRefContainer=e=>{this._refContainer=e},this.handleDemoteAdmin=e=>{e.contact.pendingAction++,(0,D.demoteParticipants)(this.props.chat,[e]).then((()=>{e.contact.pendingAction--}))},this._confirmParticipantRemove=e=>{const t=this.handleParticipantRemove.bind(this,e,!0),a=A.default.t(719,{participant:e.contact.formattedName,subject:this.props.contact.name});f.default.openModal((0,Q.jsx)(p.default,{onOK:t,okText:A.default.t(1578),onCancel:()=>f.default.closeModal(),cancelText:A.default.t(1996),children:(0,Q.jsx)(_.default,{text:a})}))},this.handleParticipantRemove=(e,t)=>{e.contact.pendingAction++,(0,D.removeParticipants)(this.props.chat,[e]).then((()=>{e.contact.pendingAction--})),t&&f.default.closeModal()},this._confirmParticipantPromote=e=>{const t=this.handleParticipantPromote.bind(this,e,!0),a=A.default.t(718,{participant:e.contact.formattedName,subject:this.props.contact.name});f.default.openModal((0,Q.jsx)(p.default,{onOK:t,okText:A.default.t(1258),onCancel:()=>f.default.closeModal(),cancelText:A.default.t(1996),children:(0,Q.jsx)(_.default,{text:a})}))},this.handleParticipantPromote=(e,t)=>{e.contact.pendingAction++,(0,D.promoteParticipants)(this.props.chat,[e]).then((()=>{e.contact.pendingAction--})),t&&f.default.closeModal()},this._openAddGroupParticipantFlow=()=>{const{chat:e}=this.props;if(this.props.groupMetadata.participants.length>=B.default.maxParticipants){const e=A.default.t(125,{max:B.default.maxParticipants});f.default.openToast((0,Q.jsx)(z.default,{msg:e,id:J}))}else{const t=M.default.supportsFeature(M.default.F.GROUPS_V_3)?(0,Q.jsx)(d.default,{chat:(0,U.unproxy)(e),pushTransition:"none",popTransition:"none"}):(0,Q.jsx)(r.default,{chat:(0,U.unproxy)(e),pushTransition:"none",popTransition:"none"});f.default.openModal(t,{transition:"modal-flow"})}},this._openParticpantSearch=()=>{f.default.openModal((0,Q.jsx)(N.default,{chat:(0,U.unproxy)(this.props.chat),onParticipantPromote:this.handleParticipantPromote,onParticipantRemove:this.handleParticipantRemove,onDemoteAdmin:this.handleDemoteAdmin,onVerification:this.props.onVerification}),{transition:"modal-flow"})},this.handleClose=()=>{this.props.onClose?this.props.onClose():this.props.uim.uie.requestDismiss()},this.showEncryptionInfoPopup=()=>{f.default.openModal((0,Q.jsx)(v.default,{chatId:this.props.chat.id,e2eSubtype:"info_encrypted"}))},this._showSecurityInfoPopup=()=>{f.default.openModal((0,Q.jsx)(v.default,{chat:this.props.chat,chatId:this.props.chat.id,e2eSubtype:"info_encrypted"}))},this._uiActionEvent=new R.default.UiAction({uiActionType:R.default.UI_ACTION_TYPE.GROUP_INFO_OPEN,uiActionPreloaded:!0})}componentDidMount(){const e=this.props.groupMetadata;M.default.supportsFeature(M.default.F.MD_BACKEND)&&(0,$.queryAndUpdateGroupMetadataById)(e.id),this.props.listeners.add(e.participants,"add remove reset sort change:isAdmin change:isSuperAdmin",(()=>{this.forceUpdate()})),this.props.listeners.add(e.pendingParticipants,"add remove reset",(()=>{this.forceUpdate()})),this.ensureParticipantsSorted();const t=this._uiActionEvent;if(t){const e=this.props.groupMetadata.cachedDeviceSizeBucket;null!=e&&(t.sizeBucket=e),t.markUiActionT(),t.commit(),this._uiActionEvent=void 0}}componentDidUpdate(){this.ensureParticipantsSorted()}ensureParticipantsSorted(){this.props.groupMetadata.participants.ensureSorted();this.props.groupMetadata.pendingParticipants.ensureSorted()}_getTitle(){return B.default.productMediaAttachments?A.default.t(1251):A.default.t(1250)}render(){const{chat:e,groupMetadata:t}=this.props;let a;if(t.participants.iAmAdmin()&&M.default.supportsFeature(M.default.F.GROUPS_V_3)&&!t.support)if(this.props.newChatInfo)a=(0,Q.jsx)(c.default,{side:"chevron",icon:"settings",onClick:this.props.onAdminSetting,children:(0,Q.jsx)(q.TextSpan,{theme:"title",children:A.default.t(1034)})});else{const e=(0,Q.jsx)(W.default,{className:b.default.chevron,name:"chevron-right-alt",directional:!0});a=(0,Q.jsx)(g.default,{onClick:this.props.onAdminSetting,side:e,children:(0,Q.jsx)(q.TextSpan,{theme:"title",children:A.default.t(1034)})})}let s=null;this.props.onMediaGallery&&(s=(0,Q.jsx)(h.default,{onMediaGallery:this.props.onMediaGallery,chat:(0,U.unproxy)(e)}));let n=null;M.default.supportsFeature(M.default.F.LIVE_LOCATIONS)&&(n=(0,Q.jsx)(O.default,{chat:e,onClick:this.props.onLiveLocation}));const i=e&&e.shouldShowEphemeralSetting()?(0,Q.jsx)(j.default,{onClick:this.props.onEphemeral,chat:e,groupMetadata:t,theme:this.props.newChatInfo?"new-chat-info":null}):null;let o=null;M.default.supportsFeature(M.default.F.MD_BACKEND)&&(o=(0,Q.jsx)(Z.default,{onClick:this.showEncryptionInfoPopup,theme:this.props.newChatInfo?"new-chat-info":null,text:X.default.isGroupCallEnabled()?A.default.t(2079):A.default.t(2078)})),this.props.chat.isSupportGroup()&&(o=(0,Q.jsx)(H.default,{onClick:this._showSecurityInfoPopup,theme:this.props.newChatInfo?"new-chat-info":null}));const r=e.mute.canMute()?(0,Q.jsx)(L.default,{chat:e,mute:e.mute,settings:G.default,theme:this.props.newChatInfo?"new-chat-info":null}):null;let d=null,f=null;if(this.props.onStarred)if(this.props.newChatInfo)f=(0,Q.jsx)(u.ChatInfoDrawerSection,{a8nText:"section-starred-messages",newChatInfo:!0,children:(0,Q.jsx)(c.default,{a8nText:"block-starred-messages",side:"chevron",icon:"star",onClick:this.props.onStarred,children:(0,Q.jsx)(q.TextSpan,{theme:"title",size:"16",children:A.default.t(606)})})});else{const e=(0,Q.jsx)(W.default,{className:b.default.chevron,name:"chevron-right-alt",directional:!0});d=(0,Q.jsx)(g.default,{side:e,onClick:this.props.onStarred,children:(0,Q.jsx)(q.TextSpan,{theme:"title",children:A.default.t(606)})})}let p=null;(r||d||o||i)&&(p=(0,Q.jsxs)(u.ChatInfoDrawerSection,{newChatInfo:this.props.newChatInfo,children:[r,d,i,o,a]}));const v=M.default.supportsFeature(M.default.F.MD_BACKEND)&&this.props.scrollToParticipantList;return(0,Q.jsxs)(m.default,{theme:"striped",style:this.props.style,children:[(0,Q.jsx)(C.default,{title:A.default.t(2077),type:C.DRAWER_HEADER_TYPE.SMALL,onCancel:this.handleClose}),(0,Q.jsx)(x.default,{flatListControllers:[this._pendingParticipantFlatListController,this._participantFlatListController],children:(0,Q.jsxs)("section",{className:b.default.body,"data-a8n":l.default.key("group-info-drawer-body"),children:[null,(0,Q.jsx)(w.default,{chat:(0,U.unproxy)(e),onAdminSetting:this.props.onAdminSetting,onAddParticipant:this._openAddGroupParticipantFlow}),(0,Q.jsx)(E.default,{chat:(0,U.unproxy)(e),showFullDescription:this.props.showFullGroupDescription}),n,s,f,p,undefined,(0,Q.jsx)(I.default,{chat:(0,U.unproxy)(e),scrollToParticipantList:v,flatListController:this._participantFlatListController,onAddParticipant:this._openAddGroupParticipantFlow,onOpenParticpantSearch:this._openParticpantSearch,onGroupInviteLink:this.props.onGroupInviteLink,onVerification:this.props.onVerification}),(0,Q.jsx)(y.default,{chat:(0,U.unproxy)(e),flatListController:this._pendingParticipantFlatListController}),(0,Q.jsx)(T.default,{chat:(0,U.unproxy)(e)})]})})]},"contact-info-modal")}}ee.CONCERNS={chat:["mute","id","pendingAction","liveLocation"],groupMetadata:["id","cachedDeviceSizeBucket","participants","pendingParticipants","announce","support"],contact:["name","id","pendingAction"]},ee.displayName="GroupInfoDrawerBase";const te=(0,P.default)((0,F.default)((0,k.default)((0,V.default)(ee,ee.CONCERNS))))},32441:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({chat:e}){const t=(0,h.default)(),a=(0,f.jsx)(m,{chat:e,showNewChatInfo:t}),s=(0,f.jsx)(p,{chat:e,showNewChatInfo:t});return t?(0,f.jsxs)(n.ChatInfoDrawerButtonsSection,{newChatInfo:!0,children:[a,s]}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(n.ChatInfoDrawerButtonsSection,{newChatInfo:!1,children:a}),(0,f.jsx)(n.ChatInfoDrawerButtonsSection,{newChatInfo:!1,children:s})]})};var n=a(63984),i=s(a(69162)),o=s(a(17061)),l=s(a(2408)),r=s(a(19582)),d=a(84254),c=a(48224),u=s(a(2966)),h=s(a(4253)),f=a(85893);function p({chat:e,showNewChatInfo:t}){return(0,f.jsx)(o.default,{a8nText:"li-report-spam",color:"danger",icon:(0,f.jsx)(u.default,{name:"thumbs-down",directional:!0}),theme:t?"new-chat-info":null,onClick:()=>{i.default.openModal((0,f.jsx)(r.default,{isGroupChat:!0,onReport:()=>{(0,d.sendSpamReport)(e,c.SpamFlow.Group),i.default.closeModal()},onReportExitClear:()=>{(0,d.sendSpamExitClear)(e,c.SpamFlow.Block),i.default.closeModal()},onCancel:()=>i.default.closeModal()}))},children:l.default.t(1594)})}function m({chat:e,showNewChatInfo:t}){return(0,f.jsx)(o.default,{a8nText:"li-delete-group",icon:(0,f.jsx)(u.default,{name:"exit",directional:!0}),color:"danger",theme:t?"new-chat-info":null,onClick:()=>{i.default.deleteOrExitChat(e)},children:e.isReadOnly?l.default.t(2037):l.default.t(2042)})}},80368:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const a=(0,N.default)(),s=(0,w.default)((0,j.default)(e.chat.groupMetadata,"props.chat.groupMetadata"),["support"]),n=(0,j.default)(null===(t=e.chat.groupMetadata)||void 0===t?void 0:t.participants,"props.chat.groupMetadata?.participants"),D=(0,I.default)();(0,y.useListener)(n,"add remove reset sort change:isAdmin change:isSuperAdmin",D);const[L,F]=(0,i.useState)(R(n)),B=(0,i.useRef)(),[G,V]=(0,i.useState)();(0,i.useEffect)((()=>{C.default.supportsFeature(C.default.F.MD_BACKEND)&&e.scrollToParticipantList&&B.current&&(0,A.scrollIntoViewIfNeeded)(B.current,!1)}),[e.scrollToParticipantList]);const U=a?"secondary":null,H=a?"new-chat-info":"drawer-list",W=a?"compact":void 0,q=(0,k.jsx)(E.default,{name:"search",className:(0,o.default)(!a&&O.iconSearch),color:U});let z,Y,K;if(n.canAdd()&&!s.support){const t=(0,k.jsx)(M.default,{theme:W,children:(0,k.jsx)(E.default,{name:"add-user",directional:!0})});z=(0,k.jsx)(l.default,{image:t,theme:H,primary:v.default.t(242),onClick:e.onAddParticipant})}if(n.iAmAdmin()&&e.onGroupInviteLink&&!s.support){const t=(0,k.jsx)(M.default,{theme:W,children:(0,k.jsx)(E.default,{name:"link"})});Y=(0,k.jsx)(l.default,{image:t,theme:H,primary:v.default.t(998),onClick:e.onGroupInviteLink})}if(R(n)&&L){const t=!a||n.length<=20,s=n.length-u.default.INFO_DRAWER_MAX_ROWS;K=(0,k.jsx)(p.default,{numMore:s,newChatInfo:a,onClick:()=>{t?F(!1):e.onOpenParticpantSearch()},viewAll:!t})}const Z=e=>{const t=n.get(e.id);return!!t&&(n.canPromote(t)||n.canRemove(t)||n.canVerifyIdentity(t))},X=(t,a)=>{const s=n.assertGet(a.id);if(!Z(a))return;const i=[];n.canPromote(s)&&i.push((0,k.jsx)(h.default,{a8n:"mi-grp-promote-admin",action:()=>{const t=v.default.t(718,{participant:s.contact.formattedName,subject:e.chat.contact.name});d.default.openModal((0,k.jsx)(c.default,{onOK:()=>{return t=!0,s.contact.pendingAction++,(0,_.promoteParticipants)(e.chat,[s]).then((()=>{s.contact.pendingAction--})),void(t&&d.default.closeModal());var t},okText:v.default.t(1258),onCancel:()=>d.default.closeModal(),cancelText:v.default.t(1996),children:(0,k.jsx)(f.default,{text:t})}))},children:v.default.t(1258)},"promote")),n.canRemove(s)&&i.push((0,k.jsx)(h.default,{a8n:"mi-grp-remove-participant",action:()=>{const t=v.default.t(719,{participant:s.contact.formattedName,subject:e.chat.contact.name});d.default.openModal((0,k.jsx)(c.default,{onOK:()=>{return t=!0,s.contact.pendingAction++,(0,_.removeParticipants)(e.chat,[s]).then((()=>{s.contact.pendingAction--})),void(t&&d.default.closeModal());var t},okText:v.default.t(1578),onCancel:()=>d.default.closeModal(),cancelText:v.default.t(1996),children:(0,k.jsx)(f.default,{text:t})}))},children:v.default.t(1264)},"remove")),C.default.supportsFeature(C.default.F.GROUPS_V_3)&&n.canDemote(s)&&i.push((0,k.jsx)(h.default,{a8n:"mi-grp-verify-identify",action:()=>{s.contact.pendingAction++,(0,_.demoteParticipants)(e.chat,[s]).then((()=>{s.contact.pendingAction--})),d.default.closeModal()},children:v.default.t(803)},"demote-admin")),C.default.supportsFeature(C.default.F.MD_BACKEND)&&n.canVerifyIdentity(s)&&i.push((0,k.jsx)(h.default,{a8n:"mi-grp-verify-identify",action:()=>{e.onVerification&&e.onVerification(s.contact)},children:v.default.t(2317)},"verify-identity")),V({contactId:a.id,menu:i,anchor:t.anchor,event:t.event})},$=(e,t)=>{P.default.equals((0,x.getMaybeMeUser)(),t.id)||(0,m.findChat)(t.id).then((e=>{d.default.openChatFromUnread(e).then((t=>{t&&d.default.focusChatTextInput(e)}))}))},Q=n.length?(0,k.jsxs)(r.ChatInfoDrawerListSection,{newChatInfo:a,onRef:e=>{B.current=e},a8nText:"section-participants",title:v.default.t(2185,{count:n.length,_plural:n.length}),titleOnClick:C.default.supportsFeature(C.default.F.GROUPS_V_3)?e.onOpenParticpantSearch:void 0,subtitle:C.default.supportsFeature(C.default.F.GROUPS_V_3)?q:void 0,children:[z,Y,(0,k.jsx)(g.default,{flatListController:e.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:(()=>{let e;const t=[],a=[];n.forEach((s=>{s.contact.isMe?e=s:s.isAdmin?t.push(s):a.push(s)}));let s=[];return e&&s.push(e),s=s.concat(t,a),R(n)&&L&&(s=s.slice(0,u.default.INFO_DRAWER_MAX_ROWS)),s.map((e=>({itemKey:e.id.toString(),id:e.id,height:68})))})(),renderItem:e=>{const{id:t}=e,s=n.get(t);if(!s)throw new g.UnknownDataError(e);const i=s.contact,o=!!G&&P.default.equals(i.id,G.contactId);return(0,k.jsx)(S.default,{contact:i,participant:s,onClick:$,contextEnabled:()=>Z(i),contextMenu:o,onContext:e=>X(e,i),theme:a?"new-chat-info":null,showNotifyName:!0,waitIdle:!0},s.id.toString())}}),K]}):null,J=()=>{V(null)};let ee;G&&(ee=(0,k.jsx)(b.default,{displayName:"ChatContextMenu",escapable:!0,popable:!0,requestDismiss:J,children:(0,k.jsx)(T.default,{contextMenu:G})}));return(0,k.jsxs)(k.Fragment,{children:[Q,ee]})};var i=a(67294),o=n(a(56720)),l=n(a(55092)),r=a(63984),d=n(a(69162)),c=n(a(75940)),u=n(a(55454)),h=n(a(47452)),f=n(a(85051)),p=n(a(82260)),m=a(62238),g=s(a(86025)),x=a(86723),C=n(a(12950)),v=n(a(2408)),_=a(97449),j=n(a(91619)),S=n(a(76865)),M=n(a(80091)),E=n(a(2966)),b=n(a(63477)),T=n(a(68062)),I=n(a(45172)),y=a(61192),w=n(a(76006)),N=n(a(4253)),P=n(a(69635)),A=a(73554),k=a(85893);const O={iconSearch:{color:"s4k44ver"}};function R(e){return e.length>u.default.INFO_DRAWER_MAX_ROWS_IN_COLLAPSED_LIST}},30965:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a;const s=(0,M.default)(),n=(0,g.default)(e.chat.groupMetadata,"props.chat.groupMetadata"),T=(0,g.default)(null===(t=e.chat.groupMetadata)||void 0===t?void 0:t.participants,"props.chat.groupMetadata?.participants"),I=(0,g.default)(null===(a=e.chat.groupMetadata)||void 0===a?void 0:a.pendingParticipants,"props.chat.groupMetadata?.pendingParticipants"),y=(0,j.default)();(0,S.useListener)(T,"change:isAdmin change:isSuperAdmin",y),(0,S.useListener)(I,"add remove reset",y);const[w,N]=(0,i.useState)(b(I)),[P,A]=(0,i.useState)();(0,i.useEffect)((()=>{p.default.supportsFeature(p.default.F.GROUPS_V_4_JOIN_PERMISSION)&&n.queryGroupV4PendingInvite().then((()=>{N(b(n.pendingParticipants))}))}),[n]);const k=()=>{let e=I.toArray();return b(I)&&w&&(e=e.slice(0,d.default.INFO_DRAWER_MAX_ROWS)),e.map((e=>({itemKey:e.id.toString(),id:e.id,height:68})))},O=e=>{const{id:t}=e,a=I.get(t);if(!a)throw new f.UnknownDataError(e);const i=a.contact;return(0,E.jsx)(x.default,{contact:i,participant:a,contextEnabled:()=>!0,contextMenu:!0,onContext:e=>(e=>{const t=[(0,E.jsx)(c.default,{a8n:"mi-grp-promote-admin",action:()=>{l.default.openModal((0,E.jsx)(r.default,{onOK:()=>{l.default.closeModal(),n.revokeGroupV4AddInvite([a.id.toString()]).then((()=>{l.default.openToast((0,E.jsx)(C.default,{msg:m.default.t(2125),id:(0,C.genId)()}))}))},okText:m.default.t(2246),onCancel:()=>l.default.closeModal(),cancelText:m.default.t(1996),children:(0,E.jsx)(u.default,{text:m.default.t(1049,{participant:a.contact.formattedName})})}))},children:m.default.t(1626)},"promote")];A({contactId:i.id,menu:t,anchor:e.anchor,event:e.event})})(e),theme:s?"new-chat-info":null,showNotifyName:!0,isPendingParticipant:!0,waitIdle:!0},a.id.toString())};let R,D,L;I.length>0&&(R=(0,E.jsx)(f.default,{flatListController:e.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:k(),renderItem:O}));if(b(I)&&w){const e=I.length-d.default.INFO_DRAWER_MAX_ROWS;D=(0,E.jsx)(h.default,{numMore:e,newChatInfo:s,onClick:()=>{N(!1)}})}T.iAmAdmin()&&I.length>0&&(L=(0,E.jsxs)(o.ChatInfoDrawerListSection,{newChatInfo:s,a8nText:"section-participants",title:m.default.t(1041,{number:I.length}),children:[R,D]}));const F=()=>{A(null)};let B;P&&(B=(0,E.jsx)(v.default,{displayName:"ChatContextMenu",escapable:!0,popable:!0,requestDismiss:F,children:(0,E.jsx)(_.default,{contextMenu:P})}));return(0,E.jsxs)(E.Fragment,{children:[L,B]})};var i=a(67294),o=a(63984),l=n(a(69162)),r=n(a(75940)),d=n(a(55454)),c=n(a(47452)),u=n(a(85051)),h=n(a(82260)),f=s(a(86025)),p=n(a(12950)),m=n(a(2408)),g=n(a(91619)),x=n(a(76865)),C=s(a(49201)),v=n(a(63477)),_=n(a(68062)),j=n(a(45172)),S=a(61192),M=n(a(4253)),E=a(85893);function b(e){return e.length>d.default.INFO_DRAWER_MAX_ROWS_IN_COLLAPSED_LIST}},61704:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,R.default)()?(0,L.jsx)(V,(0,o.default)({},e)):(0,L.jsx)(B,(0,o.default)({},e))};var i=n(a(48926)),o=n(a(81109)),l=a(58568),r=a(55084),d=n(a(7900)),c=a(67294),u=n(a(56720)),h=n(a(76610)),f=n(a(25142)),p=n(a(69162)),m=n(a(75940)),g=n(a(25061)),x=n(a(61136)),C=s(a(13540)),v=a(63290),_=n(a(45530)),j=n(a(2408)),S=a(78972),M=a(45605),E=n(a(76870)),b=a(76229),T=n(a(79267)),I=a(20845),y=n(a(65565)),w=a(32593),N=a(97504),P=s(a(29458)),A=n(a(45172)),k=a(61192),O=n(a(76006)),R=n(a(4253)),D=n(a(29579)),L=a(85893);const F={nameSecondary:{minHeight:"g4oj0cdv",marginTop:"sy4xt5vv"},photo:{marginBottom:"njub1g37"}};function B(e){const t=(0,O.default)(e.chat,["labels"]),a=(0,O.default)((0,d.default)(e.chat.groupMetadata,"props.chat.groupMetadata"),["creation"]);let s=null;return a.creation&&(s=(0,L.jsx)("div",{"data-a8n":h.default.key("group-created-time"),className:(0,u.default)(F.nameSecondary),children:(0,L.jsx)(N.TextSpan,{theme:"muted",children:f.default.createdStr(a.creation,t.isSupportGroup())})})),(0,L.jsxs)(g.default,{theme:"padding-large",children:[(0,L.jsx)(U,{chat:e.chat,xstyle:F.photo}),(0,L.jsx)(W,{chat:e.chat}),s,(0,L.jsx)(_.default,{labels:t.labels})]})}const G={lineHeight:"a4ywakfo",marginTop:"ma4rpf0l"};function V(e){var t,a;const s=(0,O.default)(e.chat,["labels"]),n=null===(t=e.chat.groupMetadata)||void 0===t?void 0:t.participants,i=(0,A.default)();(0,k.useListener)(n,"add remove reset sort change:isAdmin change:isSuperAdmin",i);const o=null!==(a=null==n?void 0:n.length)&&void 0!==a?a:0,l=`${j.default.t(982)} ${j.default.t(2185,{count:o,_plural:o})}`;return(0,L.jsx)(g.default,{theme:"padding-large",children:(0,L.jsxs)(v.FlexColumn,{align:"center",children:[(0,L.jsx)(U,{chat:e.chat,xstyle:F.photo}),(0,L.jsx)(W,{chat:e.chat,newChatInfo:!0}),(0,L.jsx)("div",{className:(0,u.default)(G),children:(0,L.jsx)(I.SelectableSpan,{dir:"auto",selectable:!0,children:(0,L.jsx)(N.TextSpan,{size:"16",color:"secondary",children:l})})}),undefined,(0,L.jsx)(_.default,{labels:s.labels})]})})}function U(e){const t=(0,O.default)(e.chat,["isReadOnly"]),a=(0,O.default)(e.chat.contact,["id","profilePicThumb"]),s=(0,O.default)(e.chat.contact.profilePicThumb,["imgFull"]),[n,i]=(0,c.useState)(!1),[o,d]=(0,c.useState)(!1),h=(0,D.default)(),f=E.default.GROUP,p=t.isReadOnly||!s.canDelete()&&!s.canSet()||t.isSupportGroup();return(0,L.jsx)("div",{className:(0,u.default)(e.xstyle),children:(0,L.jsx)(M.PhotoPickerLoadable,{type:f,id:a.id,attachToChat:!0,pending:o,startImage:s.imgFull,readOnly:p,onImageSet:(e,t)=>{let a;d(!0),a=e&&t?(0,b.setProfilePic)(s,e,t):(0,b.deleteProfilePic)(s),(0,T.default)(a,h).catch((0,l.catchAbort)((()=>{}))).catch((0,r.filteredCatch)(C.ActionError,(()=>{__LOG__(3)`GroupInfoDrawer: failed to set/delete group image`,i(!n)}))).finally((()=>{d(!1)}))}},String(n))})}const H={marginTop:"hymafltn",marginEnd:"jnwc1y2a",marginBottom:"ngycyvoj",marginStart:"svoq16ka"};function W(e){const t=(0,O.default)(e.chat.contact,["name"]),a=(0,O.default)((0,d.default)(e.chat.groupMetadata,"props.chat.groupMetadata"),["creation","restrict","support"]),s=(0,D.default)(),n=function(){var a=(0,i.default)((function*(a){const n=(0,x.default)(a);n!==t.name&&(yield(0,T.default)((0,w.setGroupSubject)(e.chat,n),s).catch((0,l.catchAbort)((()=>{}))).catch((()=>{__LOG__(3)`group_info_drawer:onSetSubject failed`})))}));return function(){return a.apply(this,arguments)}}();return a.support?(0,L.jsx)(N.TextHeader,{className:(0,u.default)(H),level:"2",theme:"large",children:(0,L.jsx)(S.GroupName,{chat:e.chat,groupMetadata:a})}):(0,L.jsx)(z,{subject:t.name,onSave:n,newChatInfo:e.newChatInfo,textInputProps:{editable:a.canSetSubject(),editRestrictionInfo:a.restrict?()=>{p.default.openModal((0,L.jsx)(m.default,{onOK:()=>p.default.closeModal(),okText:j.default.t(2183),children:j.default.t(1445)}))}:void 0}})}const q={container:{textAlign:"qfejxiq4"},editing:{width:"ln8gz9je",textAlign:"ljrqcn24"}};function z(e){const{newChatInfo:t}=e,[a,s]=(0,c.useState)(null),[n,l]=(0,c.useState)(!1),[r,d]=(0,c.useState)(!1),h=function(){var t=(0,i.default)((function*(){if(d(!1),a&&a!==e.subject){l(!0);try{yield e.onSave(a)}finally{l(!1),s(null)}}else s(null)}));return function(){return t.apply(this,arguments)}}(),f=t?[P.TextInputCustomStyleThemes.groupInfoName,P.TextInputCustomStyleThemes.newChatInfoLargeText]:[P.TextInputCustomStyleThemes.groupInfoName];return(0,L.jsx)("div",{className:(0,u.default)(t&&q.container,t&&r&&q.editing),children:(0,L.jsx)(P.default,(0,o.default)({a8n:"group-info-drawer-subject-input",value:null!=a?a:e.subject,pending:n,showRemaining:!0,validate:e=>!(!e||!e.trim()),maxLength:y.default.maxSubject,onBeginEdit:()=>{d(!0)},onChange:e=>{r&&s(e)},onSave:h,onError:()=>{p.default.openModal((0,L.jsx)(m.default,{onOK:()=>p.default.closeModal(),okText:j.default.t(2183),children:j.default.t(153)}))},onCancel:()=>{d(!1),s(null)},supportsEmoji:!0,lockable:!0,lowProfile:!0,theme:"large",customStyleThemes:f,showEditOnHover:t,showHighlightOnHover:t},e.textInputProps))})}},76729:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(67294),i=s(a(69162)),o=s(a(18260)),l=s(a(47452)),r=a(62238),d=a(86723),c=s(a(12950)),u=s(a(2408)),h=s(a(71681)),f=s(a(91619)),p=s(a(63477)),m=s(a(68062)),g=s(a(69635)),x=a(85893);class C extends n.Component{constructor(...e){super(...e),this.state={contextMenu:null},this.openChat=e=>{(0,r.findChat)(e).then((e=>{i.default.closeModal(),i.default.openChatFromUnread(e)}))},this.contextMenu=e=>!g.default.equals((0,d.getMaybeMeUser)(),e),this.handleParticipantMenu=(e,t)=>{const a=(0,f.default)(this.props.chat.groupMetadata,"this.props.chat.groupMetadata").participants,s=a.assertGet(t.id),n=[];if(a.canPromote(s)){const e=this.props.onParticipantPromote.bind(null,s,!1);n.push((0,x.jsx)(l.default,{a8n:"mi-grp-promote-admin",action:e,children:u.default.t(1258)},"promote"))}if(a.canRemove(s)){const e=this.props.onParticipantRemove.bind(null,s,!1);n.push((0,x.jsx)(l.default,{a8n:"mi-grp-remove-participant",action:e,children:u.default.t(1264)},"remove"))}if(c.default.supportsFeature(c.default.F.GROUPS_V_3)&&a.canDemote(s)){const e=this.props.onDemoteAdmin.bind(this,s);n.push((0,x.jsx)(l.default,{a8n:"mi-grp-verify-identify",action:e,children:u.default.t(803)},"demote-admin"))}c.default.supportsFeature(c.default.F.MD_BACKEND)&&a.canVerifyIdentity(s)&&n.push((0,x.jsx)(l.default,{a8n:"mi-grp-verify-identify",action:()=>{i.default.closeModal(),this.props.onVerification&&this.props.onVerification(s.contact)},children:u.default.t(2317)},"verify-identity")),g.default.equals((0,d.getMaybeMeUser)(),s.id)||n.push((0,x.jsx)(l.default,{action:this.openChat.bind(null,s.contact.id),children:u.default.t(1275,{author:s.contact.formattedName})},"message author")),this.setState({contextMenu:{contactId:t.id,menu:n,anchor:e.anchor,event:e.anchor?void 0:e}})},this.closeContextMenu=()=>{this.setState({contextMenu:null})},this.contextEnabled=()=>!1,this.cancel=()=>{i.default.closeModal()},this.isAdmin=e=>(0,f.default)(this.props.chat.groupMetadata,"this.props.chat.groupMetadata").participants.assertGet(e).isAdmin,this.contactFilter=e=>{const t=this.props.chat.groupMetadata;return!(null==t||!t.participants.get(e.id))}}componentDidMount(){var e;const t=null===(e=this.props.chat.groupMetadata)||void 0===e?void 0:e.participants;null!=t&&this.props.listeners.add(t,"add remove reset",(()=>{this.forceUpdate()}))}render(){let e;return this.state.contextMenu&&(e=(0,x.jsx)(p.default,{displayName:"ChatContextMenu",escapable:!0,popable:!0,requestDismiss:this.closeContextMenu,children:(0,x.jsx)(m.default,{contextMenu:this.state.contextMenu})})),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(o.default,{title:u.default.t(1643),filter:this.contactFilter,onCancel:this.cancel,openContextOnClick:!0,contextEnabled:this.contextEnabled,contextMenu:this.contextMenu,onContext:this.handleParticipantMenu,showNotifyName:!0,listenForAdminChange:!0,participantCollection:(0,f.default)(this.props.chat.groupMetadata,"this.props.chat.groupMetadata").participants}),e]})}}C.displayName="GroupParticipantSearch";var v=(0,h.default)(C);t.default=v},11569:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onClick:t}=e;if("new-chat-info"===e.theme)return(0,c.jsxs)(i.default,{icon:"lock",onClick:t,multiline:!0,children:[(0,c.jsx)(d.TextSpan,{theme:"title",children:l.default.t(1757)}),(0,c.jsx)(d.TextDiv,{theme:"muted",children:l.default.t(1756)})]});return(0,c.jsxs)(o.default,{onClick:t,side:(0,c.jsx)(r.default,{name:"lock",className:(0,n.default)(h)}),multiline:!0,children:[(0,c.jsx)("div",{className:(0,n.default)(u),children:(0,c.jsx)(d.TextSpan,{theme:"title",children:l.default.t(1757)})}),(0,c.jsx)(d.TextDiv,{theme:"muted",children:l.default.t(1756)})]})};var n=s(a(56720)),i=s(a(34142)),o=s(a(92787)),l=s(a(2408)),r=s(a(2966)),d=a(97504),c=a(85893);const u={marginBottom:"brac1wpa"},h={color:"jq3rn4u7"}},4253:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const[e,t]=(0,s.useState)(n.getNewChatInfo);return(0,i.useListener)(n.UserPrefsEvent,n.UserPrefsEvent.NEW_CHAT_INFO_CHANGE,(e=>{t(e)})),e};var s=a(67294),n=a(86723),i=a(61192)},52060:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{isVoiceCallEnabled:!1,isVideoCallEnabled:!1,canStartVoiceCall:!1,canStartVideoCall:!1,startVoiceCall:()=>{},startVideoCall:()=>{}}};a(67294),s(a(9322)),a(61192)},82829:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(n.default.supportsFeature(n.default.F.MD_BACKEND)){var t;const{onClick:s,text:n}=e,h=(0,u.jsx)(o.default,{name:"lock",className:r.default.icon});var a;return"new-chat-info"===e.theme?(0,u.jsxs)(c.default,{onClick:s,multiline:!0,icon:"lock",children:[(0,u.jsx)(i.TextSpan,{theme:"title",children:null!==(a=e.title)&&void 0!==a?a:d.default.t(2040)}),(0,u.jsx)(i.TextDiv,{theme:"muted",children:n})]}):(0,u.jsxs)(l.default,{onClick:s,side:h,multiline:!0,children:[(0,u.jsx)("div",{className:r.default.header,children:(0,u.jsx)(i.TextSpan,{theme:"title",children:null!==(t=e.title)&&void 0!==t?t:d.default.t(2040)})}),(0,u.jsx)(i.TextDiv,{theme:"muted",children:n})]})}return null};var n=s(a(12950)),i=a(97504),o=s(a(2966)),l=s(a(92787)),r=s(a(13474)),d=s(a(2408)),c=s(a(34142)),u=a(85893)},32827:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(29521)),o=a(67294),l=a(82754),r=n(a(69162)),d=n(a(55454)),c=n(a(17747)),u=n(a(92787)),h=n(a(9042)),f=s(a(55588)),p=n(a(25061)),m=a(86723),g=n(a(33019)),x=n(a(79480)),C=n(a(52087)),v=n(a(2408)),_=a(21134),j=n(a(71681)),S=a(97449),M=s(a(57774)),E=n(a(65565)),b=n(a(79485)),T=a(97504),I=n(a(69635)),y=a(85893);const w=({isRestricted:e,onClick:t})=>(0,y.jsxs)(u.default,{onClick:t,multiline:!0,children:[(0,y.jsx)("div",{className:g.default.header,children:(0,y.jsx)(T.TextSpan,{theme:"title",children:v.default.t(1025)})}),(0,y.jsx)(T.TextDiv,{theme:"muted",children:e?v.default.t(1032):v.default.t(1024)})]}),N=({isAnnouncement:e,onClick:t})=>(0,y.jsxs)(u.default,{onClick:t,multiline:!0,children:[(0,y.jsx)("div",{className:g.default.header,children:(0,y.jsx)(T.TextSpan,{theme:"title",children:v.default.t(1033)})}),(0,y.jsx)(T.TextDiv,{theme:"muted",children:e?v.default.t(1032):v.default.t(1024)})]}),P=({isNoFrequentlyForwarded:e,onClick:t})=>{const a=E.default.hfmStringChanges?v.default.t(1029):v.default.t(1028);return(0,y.jsxs)(u.default,{onClick:t,multiline:!0,children:[(0,y.jsx)("div",{className:g.default.header,children:(0,y.jsx)(T.TextSpan,{theme:"title",children:a})}),(0,y.jsx)(T.TextDiv,{theme:"muted",children:e?v.default.t(1030):v.default.t(1027)})]})};class A extends o.Component{constructor(...e){super(...e),this._openSettingModal=e=>{const{chat:t,groupMetadata:a}=this.props;r.default.openModal((0,y.jsx)(x.default,{settingType:e,chat:t,groupMetadata:a}),{transition:"modal",uim:this.props.uim})},this._openAnnouncementSettingModal=()=>{this._openSettingModal(d.default.GROUP_SETTING_TYPE.ANNOUNCEMENT)},this._openRestrictedSettingModal=()=>{this._openSettingModal(d.default.GROUP_SETTING_TYPE.RESTRICT)},this._openNoFrequentlyForwardedSettingModal=()=>{this._openSettingModal(d.default.GROUP_SETTING_TYPE.NO_FREQUENTLY_FORWARDED)},this._getCurrentAdmins=()=>{const{groupMetadata:e}=this.props;return e.participants.filter((e=>e.isAdmin)).map((e=>e.contact))},this._filterParticipants=e=>{const{groupMetadata:t}=this.props;return!!t.participants.get(e.id)},this.isDisabled=e=>{const{groupMetadata:t}=this.props;return I.default.equals(e,t.owner)||(0,m.getMaybeMeUser)().equals(e)},this._openManageAdminModal=()=>{r.default.openModal((0,y.jsx)(M.default,{onConfirm:this._updateAdmins,getInitialItems:this._getCurrentAdmins,isDisabled:this.isDisabled,isSelected:this.isDisabled,filter:this._filterParticipants,title:v.default.t(1201),useShortName:!0,useAllContacts:!0,listType:M.ListType.PARTICIPANT_MANAGE_MODAL,singleSelectionFooterType:l.FooterType.CONFIRM,multipleSelectionFooterType:l.FooterType.CONFIRM,shouldShowSelectionSummary:!1}))},this._updateAdmins=e=>{const{chat:t,groupMetadata:a}=this.props,s=a.participants,n=s.filter((e=>e.isAdmin)),o=(0,i.default)(e,n,((e,t)=>e.id.equals(t.id))).map((e=>s.assertGet(e.id))),l=(0,i.default)(n,e,((e,t)=>e.id.equals(t.id)));o.length>0&&(o.forEach((e=>{e.contact.pendingAction++})),(0,S.promoteParticipants)(t,o).finally((()=>{o.forEach((e=>{e.contact.pendingAction--}))}))),l.length>0&&(l.forEach((e=>{e.contact.pendingAction++})),(0,S.demoteParticipants)(t,l).finally((()=>{l.forEach((e=>{e.contact.pendingAction--}))}))),r.default.closeModal()}}render(){const{groupMetadata:e}=this.props;return(0,y.jsxs)(c.default,{theme:"striped",children:[(0,y.jsx)(f.default,{title:v.default.t(1034),type:f.DRAWER_HEADER_TYPE.SMALL,onBack:this.props.onClose}),(0,y.jsxs)(h.default,{children:[(0,y.jsx)(p.default,{animation:!1,children:(0,y.jsx)(w,{onClick:this._openRestrictedSettingModal,isRestricted:e.restrict})}),(0,_.isEphemeralAllowGroupMembersEnabled)()?(0,y.jsx)("div",{className:g.default.restrictText,children:(0,y.jsx)(T.TextSpan,{theme:"muted",children:v.default.t(824)})}):null,(0,y.jsxs)(p.default,{animation:!1,children:[(0,y.jsx)(N,{onClick:this._openAnnouncementSettingModal,isAnnouncement:e.announce}),(0,_.isAdminHfmToggleEnabled)()?(0,y.jsx)(P,{onClick:this._openNoFrequentlyForwardedSettingModal,isNoFrequentlyForwarded:e.noFrequentlyForwarded}):null]}),(0,y.jsx)(p.default,{animation:!1,children:(0,y.jsx)(u.default,{onClick:this._openManageAdminModal,multiline:!0,children:(0,y.jsx)("div",{className:g.default.header,children:(0,y.jsx)(T.TextSpan,{theme:"title",children:v.default.t(1201)})})})})]})]})}}A.CONCERNS={chat:["id"],groupMetadata:["restrict","announce","noFrequentlyForwarded","participants","owner"]},A.displayName="GroupAdminSetting";var k=(0,C.default)((0,j.default)((0,b.default)(A,A.CONCERNS)));t.default=k},79480:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{settingType:t}=e,a=(0,f.default)(e.chat,["id"]),s=(0,f.default)(e.groupMetadata,["restrict","announce","noFrequentlyForwarded"]),m=(0,n.useMemo)((()=>{switch(t){case i.default.GROUP_SETTING_TYPE.ANNOUNCEMENT:case i.default.GROUP_SETTING_TYPE.RESTRICT:return[{label:r.default.t(1024),value:0},{label:r.default.t(1032),value:1}];case i.default.GROUP_SETTING_TYPE.NO_FREQUENTLY_FORWARDED:return[{label:r.default.t(1027),value:0},{label:r.default.t(1030),value:1}];default:return[]}}),[t]),g=(0,n.useMemo)((()=>{const{restrict:e,announce:a,noFrequentlyForwarded:n}=s;switch(t){case i.default.GROUP_SETTING_TYPE.ANNOUNCEMENT:return a?1:0;case i.default.GROUP_SETTING_TYPE.RESTRICT:return e?1:0;case i.default.GROUP_SETTING_TYPE.NO_FREQUENTLY_FORWARDED:return n?1:0;default:return 0}}),[t,s]),x=(0,n.useMemo)((()=>{switch(t){case i.default.GROUP_SETTING_TYPE.ANNOUNCEMENT:return r.default.t(1033);case i.default.GROUP_SETTING_TYPE.RESTRICT:return r.default.t(1025);case i.default.GROUP_SETTING_TYPE.NO_FREQUENTLY_FORWARDED:return c.default.hfmStringChanges?r.default.t(1029):r.default.t(1028);default:return""}}),[t]),C=(0,n.useMemo)((()=>t===i.default.GROUP_SETTING_TYPE.RESTRICT&&(0,d.isEphemeralAllowGroupMembersEnabled)()?r.default.t(824):t===i.default.GROUP_SETTING_TYPE.NO_FREQUENTLY_FORWARDED&&(0,d.isAdminHfmToggleEnabled)()?(0,p.jsxs)(p.Fragment,{children:[r.default.t(1031)," ",(0,p.jsx)(o.default,{href:(0,l.getFrequentlyForwardedFaqUrl)(),children:r.default.t(1142)})]}):null),[t]);return(0,p.jsx)(h.default,{options:m,initialValue:g,title:x,onSelect:e=>{e!==g&&(0,u.setGroupProperty)(a,t,e).catch((()=>()=>{}))},explanation:C})};var n=a(67294),i=s(a(55454)),o=s(a(4919)),l=a(57092),r=s(a(2408)),d=a(21134),c=s(a(65565)),u=a(73533),h=s(a(31033)),f=s(a(76006)),p=a(85893)},38775:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(67294),i=s(a(25061)),o=s(a(2408)),l=s(a(71681)),r=s(a(31104)),d=a(19407),c=s(a(16211)),u=s(a(79485)),h=a(15298),f=s(a(2966)),p=a(97504),m=a(85893);class g extends n.Component{constructor(e){super(e),this._updateParticipants=()=>{this.setState({participants:this.getParticipants(this.props.chat)})},this.state={participants:this.getParticipants(e.chat)}}componentDidMount(){const{chat:e}=this.props;e.liveLocationQueried||r.default.getActive(e.id.toString()).then((()=>{e.liveLocationQueried=!0})).catch((()=>{})),this.props.listeners.add((0,h.unproxy)(e),"change:liveLocation",(()=>{const{liveLocation:t}=e;t&&(this._removeParticipantListener(t),this._addParticipantListener(t),this._updateParticipants())}));const{liveLocation:t}=e;t&&this._addParticipantListener(t)}_addParticipantListener(e){this.props.listeners.add(e.participants,"add remove",this._updateParticipants)}_removeParticipantListener(e){this.props.listeners.remove(e.participants,"add remove",this._updateParticipants)}getParticipants(e){const{liveLocation:t}=e;return t?t.participants.toArray():[]}getText(){const{chat:e}=this.props,{participants:t}=this.state;let a,s,n=0;if(t.forEach((e=>{e.isMe?a=!0:(s||(s=e.contact),n++)})),e.isGroup)return a?1===t.length?o.default.t(1173):o.default.t(1172,{count:n,_plural:n}):o.default.t(1169,{count:n,_plural:n});if(a){if(1===t.length)return o.default.t(1173);if(s)return o.default.t(1171,{name:s.formattedShortNameWithNonBreakingSpaces})}else if(s)return o.default.t(1168,{name:s.formattedShortNameWithNonBreakingSpaces});return""}render(){const{onClick:e}=this.props;if(!this.state.participants.length)return null;const t=(0,m.jsx)(f.default,{name:(0,d.liveLocationIcon)(!0)});return(0,m.jsx)(i.default,{a8nText:"section-live-location",theme:"padding",title:o.default.t(1176),titleOnClick:e,children:(0,m.jsx)(c.default,{side:t,onClick:e,children:(0,m.jsx)(p.TextSpan,{theme:"title",children:this.getText()})})})}}g.CONCERNS={chat:["id","isGroup","liveLocation","liveLocationQueried"]},g.displayName="LiveLocationRow";var x=(0,l.default)((0,u.default)(g,g.CONCERNS));t.default=x},65389:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.TABS=void 0;var i=n(a(52628)),o=n(a(94184)),l=a(67294),r=a(6467),d=n(a(88654)),c=n(a(17747)),u=n(a(9042)),h=s(a(55588)),f=n(a(2408)),p=n(a(46144)),m=n(a(52963)),g=n(a(27356)),x=n(a(74343)),C=n(a(66329)),v=n(a(16505)),_=n(a(65565)),j=n(a(63477)),S=n(a(79939)),M=n(a(82669)),E=a(85893);const b={MEDIA:"media",DOCS:"docs",LINKS:"links",PRODUCTS:"products"};function T(e){const{chat:t,onProductDetail:a,setProductsScrollOffset:s,productsScrollOffset:n}=e,[T,I]=(0,l.useState)(e.initialTab),[y,w]=(0,l.useState)(null),[N,P]=(0,l.useState)(!1),A=(0,S.default)((()=>new C.default([],(e=>e.id.toString())))),k=()=>{N&&(A.current.unsetAll(),P(!1))},O=(e,t)=>{N||P(!0),A.current.setVal(e,t),0===A.current.getSelected().length&&k()},R=(0,l.useCallback)((e=>{const t=(0,i.default)(b).indexOf(T),a=(0,i.default)(b).indexOf(e);t!==a&&A.current.unsetAll(),I(e),w(a>t?"right":"left"),P(!1)}),[A,T]),D=(0,l.useMemo)((()=>{const e=[{tab:b.MEDIA,title:f.default.t(1221)},{tab:b.DOCS,title:f.default.t(804)},{tab:b.LINKS,title:f.default.t(1146)}];_.default.productMediaAttachments&&e.push({tab:b.PRODUCTS,title:f.default.t(1567)});const t=e.map((e=>{const t=(0,o.default)(g.default.menuItem,{[g.default.active]:T===e.tab});return(0,E.jsx)("button",{className:t,onClick:()=>R(e.tab),title:e.title,children:e.title},e.tab)})),a=(0,o.default)(g.default.menuTabsLists,_.default.productMediaAttachments?g.default.fourTabs:g.default.threeTabs);return(0,E.jsx)("div",{className:a,"data-active-tab":T,children:t})}),[T,R]),L=(()=>{let e;switch(T){case b.MEDIA:e=(0,E.jsx)(m.default,{chat:t,mediaMsgs:t.getMediaMsgs(),selectable:N,onMessageSelect:O,selectedMessages:A.current,fullCollection:!0});break;case b.LINKS:e=(0,E.jsx)(p.default,{chat:t,linkMsgs:t.getLinkMsgs(),selectable:N,onMessageSelect:O,selectedMessages:A.current});break;case b.DOCS:e=(0,E.jsx)(d.default,{chat:t,docMsgs:t.getDocMsgs(),selectable:N,onMessageSelect:O,selectedMessages:A.current});break;case b.PRODUCTS:e=(0,E.jsx)(v.default,{chat:t,productMsgs:t.getProductMsgs(),selectable:N,onMessageSelect:O,selectedMessages:A.current,onProductDetail:a,setScrollOffset:s,scrollOffset:n})}return e})(),F=[b.MEDIA,b.DOCS].includes(T),B=N?(0,E.jsx)(j.default,{displayName:"MediaMultiSelect",escapable:!0,requestDismiss:k,children:(0,E.jsx)(x.default,{chat:t,noSortOnForward:!0,theme:"mediaGallery",toastPosition:r.ToastPosition.RIGHT,downloadButton:F,selectedMessages:A.current,onCancel:k})}):null,G="right"===y?"slide-forward":"slide-back";return(0,E.jsxs)(c.default,{theme:"gallery",children:[(0,E.jsx)(h.default,{title:" ",onBack:e.onBack,type:h.DRAWER_HEADER_TYPE.MULTI_MEDIA_GALLERY}),B,D,(0,E.jsx)(u.default,{"data-list-scroll-container":!0,children:(0,E.jsx)(M.default,{transitionName:G,className:g.default.column,children:(0,E.jsx)("div",{className:g.default.multimediaGallery,children:(0,E.jsx)("div",{className:g.default.column,children:L})},T)})})]})}t.TABS=b,T.defaultProps={initialTab:b.MEDIA,productsScrollOffset:0};var I=T;t.default=I},45418:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,d.default)(e.mediaData,["mediaStage","renderableUrl"]);return(0,c.jsx)(r.default,{mediaData:t,placeholderRenderer:f,children:e=>(0,c.jsx)(h,{url:e})})};var n=s(a(94184)),i=s(a(37781)),o=s(a(2408)),l=s(a(8752)),r=s(a(80747)),d=s(a(76006)),c=a(85893);const u=e=>{e.stopPropagation()};function h({url:e}){return(0,c.jsx)(i.default,{url:e,className:l.default.mediaViewerAudio,onClick:u,autoPlay:!0,controls:!0,children:o.default.t(279)})}function f(){return(0,c.jsx)("div",{className:(0,n.default)(l.default.imageAudio,l.default.mediaViewerPlaceholder),onClick:u})}},85128:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onHightlightCloseEnd:t,msgIndexInAlbum:a,onViewOnceInfoClick:s,onGoToMsgClick:n,onDownloadClick:b,onReplyClick:T,onDeleteClick:I,onUnstarClick:y,onStarClick:w,openForwardFlow:N,onMsgInfoClick:P}=e,A=(0,i.useRef)(null),k=(0,S.default)(e.msg,["star","isGroupMsg","chat","type","isGif","isViewOnce","sender","senderObj","t","isSentByMe"]),O=(0,S.default)(e.mediaData,["filehash","mediaStage","renderableUrl"]);(0,j.useListener)(A.current,"animationend",(()=>{t()}));let R=k.displayName(!0,!0);k.isGroupMsg&&(R+=" @ "+k.chat.title());const D=()=>k.chat.isGroup?f.default.t(1594):f.default.t(1593,{contactInfo:k.senderObj.displayName}),L=e=>{const{chat:t}=k;t&&(e?t.isGroup?(0,C.sendSpamExitClear)(t,v.SpamFlow.MediaViewer):(0,C.sendSpamBlockClear)(t,v.SpamFlow.MediaViewer):(0,C.sendSpamReport)(t,v.SpamFlow.MediaViewer)),r.default.closeModal()},F=()=>{r.default.openModal((0,E.jsx)(M.default,{isBusiness:k.senderObj.isBusiness,isGroup:k.chat.isGroup,onReport:L,onCancel:()=>r.default.closeModal(),title:D()}))},B=()=>{(0,x.default)(k)},G=()=>!k.isViewOnce&&(!!O.renderableUrl||O.mediaStage===m.MEDIA_DATA_STAGE.RESOLVED),V=()=>{const e=[];return(k.canPrivateReply()||k.canPrivateReplyInRestrictedGrp())&&e.push((0,E.jsx)(u.default,{a8n:"mi-msg-reply",action:B,children:f.default.t(1516)},"private_reply")),k.isViewOnce?e.push((0,E.jsx)(u.default,{action:F,children:D()},"dropdownMsgInfo")):(k.isSentByMe&&e.push((0,E.jsx)(u.default,{action:P,children:f.default.t(1279)},"dropdownMsgInfo")),e.push((0,E.jsx)(u.default,{action:n,children:f.default.t(978)},"dropdownGoToMsg"),(0,E.jsx)(u.default,{action:b,disabled:!G(),children:f.default.t(1990)},"dropdownDownload"))),(0,E.jsx)(g.MenuBarItem,{icon:(0,E.jsx)(_.default,{name:"menu"}),title:f.default.t(1271),children:(0,E.jsx)(c.default,{type:"dropdown_menu",flipOnRTL:!0,dirX:c.DirX.LEFT,children:e},"MediaPanelHeaderDropdown")},"btnMenu")},U=()=>{let e,t,a;return k.star?(e=y,t="unstar-btn",a=f.default.t(1803)):(e=w,t="star-btn",a=f.default.t(1712)),(0,E.jsx)(g.MenuBarItem,{icon:(0,E.jsx)(_.default,{name:t}),title:a,onClick:e},t)},H=()=>(0,E.jsx)(g.MenuBarItem,{icon:(0,E.jsx)(_.default,{name:"forward"}),title:f.default.t(931),onClick:N},"btnForward");return(0,E.jsxs)("div",{className:p.default.mediaPanelHeader,children:[(0,E.jsx)("div",{className:p.default.info,children:(0,E.jsx)(o.default,{idle:!0,image:(0,E.jsx)(d.default,{id:k.sender,size:40}),primary:(0,E.jsx)(h.default,{ellipsify:!0,text:R}),secondary:l.default.relativeDateAndTimeStr(k.t),theme:"media"})}),(0,E.jsx)("div",{className:p.default.mediaPanelTools,children:(0,E.jsxs)(g.MenuBar,{theme:"strong",children:[k.isViewOnce?[(0,E.jsx)(g.MenuBarItem,{icon:(0,E.jsx)(_.default,{name:"view-once",className:p.default.voIcon}),title:f.default.t(61),onClick:s},"btnViewOnceInfo"),V()]:a>=0?[k.canReply()?(0,E.jsx)(g.MenuBarItem,{icon:(0,E.jsx)(_.default,{name:"reply"}),title:f.default.t(1584),onClick:T},"btnReply"):null,k.canStar()?U():null,(0,E.jsx)(g.MenuBarItem,{icon:(0,E.jsx)(_.default,{name:"delete"}),title:f.default.t(2036),onClick:I},"btnDelete"),k.canForward()?H():null,V()].filter(Boolean):[(0,E.jsx)(g.MenuBarItem,{icon:(0,E.jsx)(_.default,{name:"bubble"}),title:f.default.t(978),onClick:n},"btnGoToMsg"),k.canStar()?U():null,k.canForward()?H():null,(0,E.jsx)(g.MenuBarItem,{icon:(0,E.jsx)(_.default,{name:"download"}),title:f.default.t(1990),disabled:!G(),onClick:b},"btnDownload")].filter(Boolean),(0,E.jsx)(g.MenuBarItem,{a8nText:"btn-close",icon:(0,E.jsx)(_.default,{className:e.isHighlightClose?p.default.highlightClose:null,containerRef:A,name:"x-viewer"}),title:f.default.t(2007),onClick:e.onClose})]},"media-panel-header")})]})};var i=a(67294),o=n(a(55092)),l=n(a(25142)),r=n(a(69162)),d=n(a(88419)),c=s(a(9492)),u=n(a(47452)),h=n(a(85051)),f=n(a(2408)),p=n(a(42784)),m=a(90672),g=a(47941),x=n(a(79465)),C=a(84254),v=a(48224),_=n(a(2966)),j=a(61192),S=n(a(76006)),M=n(a(43711)),E=a(85893)},71090:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(71730),i=a(67294),o=s(a(20396)),l=s(a(36083)),r=a(90246),d=a(50472),c=s(a(2408)),u=s(a(92660)),h=a(90672),f=s(a(4231)),p=s(a(96419)),m=s(a(90904)),g=s(a(79485)),x=s(a(92018)),C=a(85893);class v extends i.PureComponent{constructor(...e){super(...e),this.state={played:!1,size:{width:0,height:0},isFullscreenMode:!1},this._setRefContainer=e=>{this.refContainer=e},this.stopPropagation=e=>{e.stopPropagation()},this._handleFullscreenToggle=e=>{this.setState({isFullscreenMode:e})}}static getDerivedStateFromProps(e){const{mediaData:t}=e;return(t.mediaStage===h.MEDIA_DATA_STAGE.RESOLVED||t.streamable&&t.isStreamable())&&(0,n.isNonZeroNumber)(t.fullWidth)&&(0,n.isNonZeroNumber)(t.fullHeight)?{size:v.getSize(t)}:null}static getSize(e){if(e.isGif){const t=330;return e.fullWidth>=t?{width:e.fullWidth,height:e.fullHeight}:{width:t,height:e.fullHeight*t/e.fullWidth}}return e.fullWidth>=d.MIN_WIDTH?{width:e.fullWidth,height:e.fullHeight}:{width:d.MIN_WIDTH,height:e.fullHeight}}componentDidMount(){this.props.mediaData.isStreamable()||this.props.msg.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:f.default.WEBC_RMR_REASON_CODE.MEDIA_VIEWER,isUserInitiated:!0})}componentWillUnmount(){this.props.msg.mediaObject&&this.props.msg.cancelDownload()}render(){var e;const{msg:t,mediaData:a}=this.props,s=a.isGif;let n=a.mediaStage===h.MEDIA_DATA_STAGE.RESOLVED||a.streamable&&a.isStreamable();if(n=n||t.isForcingRMR(),n){const e=c.default.t(1857);let n,i;return!this.state.isFullscreenMode&&t&&t.interactiveAnnotations&&t.interactiveAnnotations.length>0&&(n=(0,C.jsx)(o.default,{annotations:t.interactiveAnnotations})),i=s?(0,C.jsxs)("div",{className:u.default.mediaViewerImg,ref:this._setRefContainer,children:[(0,C.jsx)(x.default,{src:a.renderableUrl,onClick:this.stopPropagation,autoPlay:!0,loop:!0,children:e}),n]}):(0,C.jsx)("div",{ref:this._setRefContainer,className:u.default.mediaViewerImg,onClick:this.stopPropagation,children:(0,C.jsx)(p.default,{msg:t,mediaData:a,startTime:this.props.startTime,onClose:this.props.onClose,onError:()=>{},onFullscreenToggle:this._handleFullscreenToggle,autoPlay:this.props.autoPlay,type:r.PLAYER_TYPE.MEDIA_VIEWER,overlays:n,noPip:t.isViewOnce})}),(0,C.jsx)(m.default,{type:"scaleDown",position:"relative",objectPosition:"relative",size:this.state.size,onObjectLoad:this.props.onLoad,children:i})}return(0,C.jsx)(m.default,{type:"scaleDown",position:"relative",objectPosition:"relative",size:{width:this.props.mediaData.fullWidth,height:this.props.mediaData.fullHeight},children:(0,C.jsx)(l.default,{altText:null!==(e=t.caption)&&void 0!==e?e:"",mediaData:a})})}}v.CONCERNS={mediaData:["mediaStage","fullWidth","fullHeight","isGif","isViewOnce","preview","renderableUrl","streamable"]},v.defaultProps={startTime:0},v.displayName="MediaVideo";const _=(0,g.default)(v,v.CONCERNS);t.default=class extends _{getContainerElement(){return this.getComponent().refContainer}}},61169:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(23493)),o=n(a(94184)),l=a(8139),r=a(67294),d=(n(a(56720)),s(a(93972))),c=n(a(69162)),u=n(a(91547)),h=n(a(75940)),f=n(a(55454)),p=n(a(7235)),m=n(a(85051)),g=n(a(97227)),x=n(a(47193)),C=a(85033),v=a(86723),_=n(a(96889)),j=n(a(39e3)),S=a(49895),M=n(a(2408)),E=a(64850),b=n(a(45418)),T=n(a(49694)),I=n(a(41552)),y=n(a(85128)),w=n(a(53608)),N=a(90672),P=n(a(71090)),A=n(a(7674)),k=n(a(85398)),O=a(3132),R=n(a(79485)),D=a(15298),L=a(97504),F=a(74289),B=n(a(63477)),G=n(a(89135)),V=n(a(45285)),U=a(85893);const H={captionReadMoreBtn:{position:"lhggkp7q",end:"h223g3sc",bottom:"jxacihee",paddingTop:"ppypbuwx",paddingEnd:"f9ovudaz",paddingBottom:"przvwfww",paddingStart:"nu34rnf1",backgroundColor:"idmi9oma",borderTopStartRadius:"ho9ovbg7",borderTopEndRadius:"tcg15ap9",borderBottomEndRadius:"c5wy1lv0",borderBottomStartRadius:"bqysl6j9",boxShadow:"a95fzlb5"},captionReadMoreBtnExpanded:{visibility:"kojwoqec"},captionReadMoreBtnZoomed:{visibility:"kqpkm0zi",opacity:"lxctpz5v"}};function W(e){null==e||e.stopPropagation()}function q(e){const t=e.chat;t.composeQuotedMsg=e,c.default.focusChatTextInput(t)}class z extends r.PureComponent{constructor(e){super(e),this._setRefMediaImage=e=>{this._refMediaImage=e},this._setRefMediaVideo=e=>{this._refMediaVideo=e},this._setRefHotKeys=e=>{this._refHotKeys=e},this._handleViewOnceInfoClick=()=>{this._showViewOnceNux()},this._showViewOnceNux=()=>{const{mediaData:e}=this.props,t=(0,U.jsx)(k.default,{isPhoto:e.type===T.default.TYPE.IMAGE,onOkClick:()=>{c.default.closeModal()}});c.default.openModal(t)},this._handleImageLoad=e=>{this.props.onImageLoad&&this.props.onImageLoad();const t=this.state.zoomElement;t&&e&&this.props.isAnimatingIn&&e instanceof HTMLElement&&(this._zoomed||(this._zoomed=!0,this.animateZoom(t,e)))},this.animateZoom=(e,t)=>{var a;const s=t.getBoundingClientRect(),n=e.getBoundingClientRect();let i=n.top-s.top,o=n.left-s.left;const l=e.clientWidth/t.clientWidth;i-=(t.clientHeight-e.clientHeight)/2,o-=(t.clientWidth-e.clientWidth)/2,(0,V.default)(t,{opacity:[1,0],translateX:[0,o],translateY:[0,i],scale:[1,l]},{duration:f.default.MEDIA_VIEWER.ANIMATION_DURATION,easing:[.1,.82,.25,1]});const r=null===(a=this._refCaption)||void 0===a?void 0:a.getContainerElement();r&&(0,V.default)(r,{opacity:[1,0]},{duration:f.default.MEDIA_VIEWER.ANIMATION_DURATION})},this.openForwardFlow=e=>{e.stopPropagation();const{msg:t}=this.props;t.isUnsentMedia?c.default.openModal((0,U.jsx)(h.default,{title:M.default.t(912),onOK:()=>c.default.closeModal(),okText:M.default.t(2183),children:M.default.t(909)})):c.default.openModal((0,U.jsx)(C.ForwardMessageFlowLoadable,{msgs:[(0,D.unproxy)(t)]}),{transition:"modal-flow"})},this._handleReplyClick=()=>{this._handleClose(),(0,l.delayMs)(f.default.MEDIA_VIEWER.CLOSE_ANIMATION_DURATION).then(q.bind(null,(0,D.unproxy)(this.props.msg)))},this._handleDeleteClick=()=>{const{msg:e}=this.props;c.default.openModal((0,U.jsx)(p.default,{chat:e.chat,msgList:[(0,D.unproxy)(e)],deletePrompt:!0,revokePrompt:e.canRevoke()}))},this._handleMsgInfoClick=()=>{this._handleClose(),(0,l.delayMs)(f.default.MEDIA_VIEWER.CLOSE_ANIMATION_DURATION+250).then(c.default.msgInfoDrawer.bind(c.default,(0,D.unproxy)(this.props.msg)))},this._handleImgZoomIn=e=>{const t=this._refMediaImage;e&&t&&(this._listenToMouseMove=t.heightOverflow>0||t.widthOverflow>0),this.setState({imgZoomed:e}),this.props.onImgZoomIn(e)},this._handleZoomOut=e=>{this._updateZoomPosition.cancel();const t=this._refMediaImage;t&&this.state.imgZoomed&&t.onImageClick(e)},this._handleMouseMove=e=>{this._updateZoomPosition(e.pageX,e.pageY)},this._updateZoomPosition=(0,i.default)(((e,t)=>{if(this.state.annotationTooltipDisplayed)return;const a=this._refMediaImage;if(!a)return;const s=a.getInsideContainer();if(!(s&&s instanceof HTMLElement))return;const n=a.getOutsideContainer();if(!(n&&n instanceof HTMLElement))return;const{translateX:i,translateY:o}=a.getTranslatePosition(n,e,t);(0,V.default)(s,"stop"),(0,V.default)(s,{translateX:i,translateY:o,scale:f.default.MEDIA_VIEWER.ZOOM_IN_FACTOR},{duration:0})})),this._handleKeyboardZoom=e=>{if(this.props.isAnimatingIn)return;this._updateZoomPosition.cancel();const t=this._refMediaImage;null!=t&&t.onImageKeyboardZoom(e)},this._handleDownloadClick=e=>{e.stopPropagation(),g.default.initDownload((0,D.unproxy)(this.props.msg))},this._handleStarClick=e=>{e.stopPropagation();const{msg:t}=this.props;c.default.sendStarMsgs(t.chat,[(0,D.unproxy)(t)])},this._handleUnstarClick=e=>{e.stopPropagation();const{msg:t}=this.props;c.default.sendUnstarMsgs(t.chat,[(0,D.unproxy)(t)])},this._handleGoToMsgClick=e=>{e.stopPropagation(),this._handleClose(),c.default.existsDrawerRight((e=>{e&&2===u.default.column&&c.default.closeDrawerRight()}));const{msg:t}=this.props,a=t.chat.getSearchContext((0,D.unproxy)(t));c.default.openChatAt(t.chat,a).then((e=>{e&&c.default.focusChatTextInput(t.chat)}))},this._handleClose=()=>{if(this._closing)return;this._closing=!0,(0,F.isFunction)(this.props.onExitAnimation)&&this.props.onExitAnimation();const e=this.props.getZoomNode&&this.props.getZoomNode(this.props.msg.id);if(!e)return this.props.onBack();let t;if(this.props.mediaData.type===T.default.TYPE.IMAGE&&this._refMediaImage?t=this._refMediaImage.getInsideContainer():this.props.mediaData.isGif&&this._refMediaVideo&&(t=this._refMediaVideo.getContainerElement()),!t)return this.props.onBack();{var a;const s=t,n=t.getBoundingClientRect(),i=e.getBoundingClientRect();let o=i.top-n.top,l=i.left-n.left;const r=e.clientWidth/s.clientWidth,d=(s.clientHeight-e.clientHeight)/2,c=(s.clientWidth-e.clientWidth)/2;o-=d,l-=c,(0,V.default)(t,{translateX:[l,0],translateY:[o,0],scale:[r,1]},{duration:f.default.MEDIA_VIEWER.CLOSE_ANIMATION_DURATION,easing:[.1,.82,.25,1]}).then((()=>{this.props.onBack()}));const u=null===(a=this._refCaption)||void 0===a?void 0:a.getContainerElement();u&&(0,V.default)(u,{opacity:[0,1]},{duration:f.default.MEDIA_VIEWER.CLOSE_ANIMATION_DURATION,easing:[.1,.82,.25,1]})}},this._handleClickToCloseBlocked=()=>{this.setState({isHighlightClose:!0})},this._handleHighlightCloseEnd=()=>{this.setState({isHighlightClose:!1})},this._handleAnnotationTooltipDisplay=()=>this.setState({annotationTooltipDisplayed:!0}),this._handleAnnotationTooltipDismiss=()=>this.setState({annotationTooltipDisplayed:!1}),this._handleCaptionClick=e=>{e.stopPropagation(),this.setState((e=>({isCaptionExpanded:!e.isCaptionExpanded})))},this._zoomed=!1,this._closing=!1,this._listenToMouseMove=!1,this._shouldShowViewOnceNux=e.msg.isViewOnce&&(0,v.shouldShowNUX)(f.default.NUX.EPHEMERAL_VIEW_ONCE_RECEIVER);const t=e.mediaData.mediaStage===N.MEDIA_DATA_STAGE.RESOLVED&&e.isAnimatingIn&&e.getZoomNode?e.getZoomNode(e.msg.id):null;this.state={zoomElement:t,imgZoomed:!1,annotationTooltipDisplayed:!1,isCaptionVisible:!e.isAnimatingIn,isCaptionExpanded:!1,isHighlightClose:!1}}componentDidMount(){__LOG__(2)`MediaViewerModal: Opened`;const{msg:e}=this.props;e.isViewOnce&&(0,E.canMarkPlayed)(e)&&(0,E.markPlayed)(e),this._shouldShowViewOnceNux&&this._showViewOnceNux(),x.default.focus(this._refHotKeys)}getSnapshotBeforeUpdate(){var e;const t=null===(e=this._refCaption)||void 0===e?void 0:e.getContainerElement();return null!=t&&null==this._captionExpandable&&(this._captionExpandable=t.scrollHeight>t.clientHeight),null}componentDidUpdate(e){const{isCaptionVisible:t}=this.state,{isAnimatingIn:a}=this.props;a||t||!e.isAnimatingIn||this.setState({isCaptionVisible:!0})}componentWillUnmount(){__LOG__(2)`MediaViewerModal: Closed`,this._updateZoomPosition.cancel()}render(){var e,t,a,s;const{msg:n,mediaData:i}=this.props;let l,r;switch(i.type){case T.default.TYPE.IMAGE:l=(0,U.jsx)(I.default,{msg:n,mediaData:i,onLoad:this._handleImageLoad,onImgZoomIn:this._handleImgZoomIn,onAnnotationTooltipDisplay:this._handleAnnotationTooltipDisplay,onAnnotationTooltipDismiss:this._handleAnnotationTooltipDismiss,preventDownload:n.isViewOnce,ref:this._setRefMediaImage},n.id.toString());break;case T.default.TYPE.VIDEO:l=(0,U.jsx)(P.default,{autoPlay:!this._shouldShowViewOnceNux,msg:n,mediaData:i,onLoad:i.isGif?this._handleImageLoad:null,startTime:this.props.startTime,onClose:this._handleClose,ref:this._setRefMediaVideo},n.id.toString());break;case T.default.TYPE.AUDIO:l=(0,U.jsx)(b.default,{mediaData:i},n.id.toString());break;default:__LOG__(4,void 0,new Error,!0)`type: ${i.type}`,SEND_LOGS("MediaViewerModal: unexpected media type")}const c=this.props.msgIndexInAlbum>=0&&this.props.albumSize>=0;if(n.caption||c){let e;if(c){const t={number:this.props.msgIndexInAlbum+1,totalNumber:this.props.albumSize};e=M.default.t(1429,t)}const t=S.Configuration.Conversation({mentions:n.mentionMap(),links:n.getLinks(),trusted:!0}),a=!this.state.isCaptionVisible&&(i.isGif||i.type===T.default.TYPE.IMAGE);r=(0,U.jsxs)(U.Fragment,{children:[(0,U.jsxs)("p",{className:(0,o.default)(A.default.captionWrapper,this._captionExpandable&&A.default.captionWrapperExpandable),onClick:this._captionExpandable?this._handleCaptionClick:void 0,title:this._captionExpandable?M.default.t(1576):void 0,"aria-hidden":this.state.isCaptionExpanded||void 0,children:[(0,U.jsx)(m.default,{className:(0,o.default)(A.default.mediaCaption,{[A.default.captionHidden]:a,[A.default.expanded]:this.state.isCaptionExpanded}),formatters:t,ref:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((e=>{this._refCaption=e})),text:n.caption||e}),this._captionExpandable&&(0,U.jsx)(G.default,{xstyle:[H.captionReadMoreBtn,this.state.isCaptionExpanded&&H.captionReadMoreBtnExpanded,this.state.imgZoomed&&H.captionReadMoreBtnZoomed],onClick:this._handleCaptionClick,children:(0,U.jsx)(L.TextSpan,{children:M.default.t(1576)})})]}),this.state.isCaptionExpanded&&(0,U.jsx)("p",{className:(0,o.default)(A.default.captionWrapper,A.default.captionWrapperExpandable,A.default.captionExpanded),onClick:this._handleCaptionClick,children:(0,U.jsx)(m.default,{className:(0,o.default)(A.default.mediaCaption,A.default.mediaCaptionExpanded),formatters:t,text:n.caption})})]})}const u=(0,o.default)(A.default.media,{[A.default.mediaWithCaption]:!!r}),h=(0,o.default)("overlay",A.default.mediaViewer,{[A.default.viewOnce]:n.isViewOnce,[A.default.mediaViewerAnimate]:this.props.isAnimatingIn,[A.default.cursorZoomOut]:this.state.imgZoomed}),f=this.state.imgZoomed&&this._listenToMouseMove?this._handleMouseMove:null,p=this.state.imgZoomed?this._handleZoomOut:null;let g=this.state.imgZoomed?null:this._handleClose;null!=g&&n.isViewOnce&&(g=this._handleClickToCloseBlocked);const x=!n.isViewOnce;return(0,U.jsx)(B.default,{displayName:"MediaViewer",escapable:!0,requestDismiss:this._handleClose,children:(0,U.jsx)(j.default,{handlers:{space:this._handleKeyboardZoom},onRef:this._setRefHotKeys,children:(0,U.jsxs)("div",{className:h,"data-animate-media-viewer":!0,onClick:p,onMouseMove:f,children:[(0,U.jsx)(y.default,{isHighlightClose:this.state.isHighlightClose,msg:n,mediaData:i,onClose:this._handleClose,onGoToMsgClick:this._handleGoToMsgClick,onHightlightCloseEnd:this._handleHighlightCloseEnd,onReplyClick:this._handleReplyClick,onUnstarClick:this._handleUnstarClick,onStarClick:this._handleStarClick,onDeleteClick:this._handleDeleteClick,openForwardFlow:this.openForwardFlow,onDownloadClick:this._handleDownloadClick,onMsgInfoClick:this._handleMsgInfoClick,onViewOnceInfoClick:this._handleViewOnceInfoClick,msgIndexInAlbum:this.props.msgIndexInAlbum}),(0,U.jsxs)("div",{className:A.default.mediaContent,onClick:g,children:[x&&(0,U.jsx)("div",{className:(0,o.default)(A.default.btnMediaPrev),children:(0,U.jsx)(d.default,{type:d.ButtonType.Prev,onClick:null!==(e=this.props.onPrev)&&void 0!==e?e:W,onKeyDown:null!==(t=this.props.onPrev)&&void 0!==t?t:W,disabled:!this.props.onPrev||this.state.imgZoomed,theme:O.RoundTheme.Default})}),(0,U.jsxs)("div",{className:u,children:[(0,U.jsx)(w.default,{msg:n,mediaData:i}),l,(0,U.jsx)(_.default.Provider,{value:n.chat.groupMetadata,children:r})]}),x&&(0,U.jsx)("div",{className:(0,o.default)(A.default.btnMediaNext),children:(0,U.jsx)(d.default,{type:d.ButtonType.Next,onClick:null!==(a=this.props.onNext)&&void 0!==a?a:W,onKeyDown:null!==(s=this.props.onNext)&&void 0!==s?s:W,disabled:!this.props.onNext||this.state.imgZoomed,theme:O.RoundTheme.Default})})]})]})})})}}z.CONCERNS={msg:["id","star","isUnsentMedia","isViewOnce","chat","caption","interactiveAnnotations"],mediaData:["mediaStage","type","isGif"]},z.displayName="MediaViewerModal";var Y=(0,R.default)(z,z.CONCERNS);t.default=Y},84223:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{mediaMsgs:t,onScroll:a,highlightedMsgIds:s,activeMsg:u,onSetActiveThumb:h,onSelectThumb:f}=e,p=(0,n.useRef)({}),m=()=>{const e=new Map;return t.forEach((t=>{const a=t.id.toString();e.set(a,(e=>{const t=p.current[e];if(!t)return!1;const a=t.getBoundingClientRect(),s=(a.left+a.right)/2;return!(s>-1*window.innerWidth&&s<2*window.innerWidth)})(a))})),e},[g,x]=(0,n.useState)(m),C=(0,d.default)((()=>{const e=m();(0,i.default)(g,e)||x(e)}),100),v=(()=>{const e=s&&s.size>0&&s.has(u.id.toString()),a=[];return t.forEach((t=>{if(null==t.mediaData){const e=u;return void __LOG__(3,!0)`MediaViewerFlow: attempted to render a msg without mediaData: ${JSON.stringify({type:t.type,isMedia:t.isMedia,startMsgType:e.type,startMsgIsMedia:e.isMedia})}`}const n=e&&s&&!s.has(t.id.toString())?"viewerFlowTransparent":"viewerFlow";a.push((0,c.jsx)(o.default,{theme:n,active:t===u,msg:t,containerRef:e=>{((e,t)=>{p.current[t]=e})(e,t.id.toString()),t===u&&h(e)},onClick:()=>{f(t)},preferPreview:!!g.get(t.id.toString()),showTooltip:t.isGroupMsg},`media-${t.id.id}`))})),a.push((0,c.jsx)("div",{className:l.default.mediaThumb,children:t.queryMediaAfter?(0,c.jsx)(r.default,{stroke:6,size:24}):null},"spinner-right")),a.unshift((0,c.jsx)("div",{className:l.default.mediaThumb,children:t.queryMediaBefore?(0,c.jsx)(r.default,{stroke:6,size:24}):null},"spinner-left")),a.push((0,c.jsx)("div",{className:l.default.thumbPadding},"padding-right")),a.unshift((0,c.jsx)("div",{className:l.default.thumbPadding},"padding-left")),a})();return(0,c.jsx)("div",{className:l.default.thumbsContainer,ref:e.setRefThumbsContainer,children:(0,c.jsx)("div",{className:l.default.scrollContainer,dir:"ltr",children:(0,c.jsx)("div",{onScroll:e=>{C(),a(e)},className:l.default.viewerThumbs,ref:e.setRefThumbs,children:v})})})};var n=a(67294),i=s(a(22024)),o=s(a(1393)),l=s(a(77030)),r=s(a(46714)),d=s(a(16297)),c=a(85893)},85398:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onOkClick:t}=e;return(0,n.useEffect)((()=>{(0,u.setNUX)(l.default.NUX.EPHEMERAL_VIEW_ONCE_RECEIVER,{views:1,maxViews:1})}),[]),(0,m.jsx)(o.default,{onOK:t,cancelText:h.default.t(1142),onCancel:()=>{(0,r.openExternalLink)((0,d.getViewOnceFaqUrl)())},children:(0,m.jsxs)(c.FlexColumn,{children:[(0,m.jsx)(c.FlexItem,{xstyle:g.graphic,align:"center",children:(0,m.jsx)(f.default,{name:"view-once-sender-nux",width:195,height:177})}),(0,m.jsx)(p.TextHeader,{className:(0,i.default)(g.text),theme:"popup-title",children:e.isPhoto?h.default.t(1871):h.default.t(1874)}),(0,m.jsx)(p.TextParagraph,{className:(0,i.default)(g.text),children:e.isPhoto?h.default.t(1870):h.default.t(1873)})]})})};var n=a(67294),i=s(a(56720)),o=s(a(75940)),l=s(a(55454)),r=a(4919),d=a(57092),c=a(63290),u=a(86723),h=s(a(2408)),f=s(a(2966)),p=a(97504),m=a(85893);const g={text:{marginBottom:"or9x5nie"},graphic:{marginBottom:"t4zgqcuo"}}},31033:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(67294),i=s(a(69162)),o=s(a(75940)),l=s(a(2408)),r=s(a(89732)),d=a(97504),c=a(85893);class u extends n.PureComponent{constructor(e){super(e),this._handleOK=()=>{const{selectedValue:e}=this.state;null!=e&&this.props.onSelect(e),this.closeModal()},this._handleChange=e=>{const{target:t}=e;t instanceof HTMLInputElement&&this.setState({selectedValue:parseInt(t.value,10)})},this.closeModal=()=>{i.default.closeModal()},this.state={selectedValue:e.initialValue}}render(){const{options:e,explanation:t}=this.props,a=e.map((({value:e,label:t})=>(0,c.jsx)("li",{children:(0,c.jsxs)("label",{className:r.default.label,children:[(0,c.jsx)("input",{type:"radio",className:r.default.input,value:String(e),checked:e===this.state.selectedValue,onChange:this._handleChange}),t]})},`setting-${e}`)));return(0,c.jsxs)(o.default,{title:this.props.title,okText:l.default.t(712),onOK:this._handleOK,onCancel:this.closeModal,children:[null!=t?(0,c.jsx)(d.TextDiv,{theme:"muted",className:r.default.explanation,children:t}):null,(0,c.jsx)("form",{children:(0,c.jsx)("ol",{children:a})})]})}}t.default=u,u.displayName="SettingsPopup"},38880:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({contact:e}){const{verifiedLevel:t,verifiedName:a}=(0,C.default)(e,["verifiedLevel","verifiedName"]),s=(0,f.getBusinessFaqUrl)(),_=!d.default.isSMB;(0,n.useEffect)((()=>{_&&new m.default.BannerEvent({bannerType:m.default.BANNER_TYPES.CROSS_SELL_PROFILE_INTERSTITIAL,bannerOperation:m.default.BANNER_OPERATIONS.SHOWN}).commit()}),[_]);const j=t===c.default.VERIFIED_LEVEL.HIGH?p.default.t(2257,{businessName:a}):p.default.t(2256);return(0,v.jsxs)(r.default,{title:p.default.t(2259),onOK:()=>{l.default.closeModal(),_&&new m.default.BannerEvent({bannerType:m.default.BANNER_TYPES.CROSS_SELL_PROFILE_INTERSTITIAL,bannerOperation:m.default.BANNER_OPERATIONS.DISMISS}).commit()},okText:p.default.t(2183),children:[(0,v.jsx)(u.default,{text:j}),"",(0,v.jsx)(o.default,{href:s,onClick:e=>{e.preventDefault(),l.default.closeModal(),setTimeout((()=>(0,h.openExternalLink)(s)),10)},children:p.default.t(1142)}),_&&(0,v.jsx)("div",{className:i.default.footerNote,children:(0,v.jsxs)(x.TextSpan,{theme:"muted",size:"13",children:[p.default.t(2260),(0,v.jsx)("br",{}),(0,v.jsx)(o.default,{onClick:e=>{e.preventDefault(),l.default.closeModal(),new m.default.BannerEvent({bannerType:m.default.BANNER_TYPES.CROSS_SELL_PROFILE_INTERSTITIAL,bannerOperation:m.default.BANNER_OPERATIONS.CLICK}).commit(),setTimeout((()=>l.default.openModal((0,v.jsx)(g.default,{}))),200)},className:i.default.getTheAppLink,children:p.default.t(2258)})]})})]})};var n=a(67294),i=s(a(96089)),o=s(a(44683)),l=s(a(69162)),r=s(a(75940)),d=s(a(9322)),c=s(a(55454)),u=s(a(85051)),h=a(4919),f=a(57092),p=s(a(2408)),m=s(a(4231)),g=s(a(57844)),x=a(97504),C=s(a(76006)),v=a(85893)},57844:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return(0,h.jsxs)(o.default,{title:d.default.t(2263),onOK:()=>{new c.default.BannerEvent({bannerType:c.default.BANNER_TYPES.CROSS_SELL_PROFILE_INTERSTITIAL,bannerOperation:c.default.BANNER_OPERATIONS.DISMISS}).commit(),i.default.closeModal()},okText:d.default.t(2007),children:[(0,h.jsx)(u.default,{}),(0,h.jsx)("p",{children:(0,h.jsx)(l.default,{text:d.default.t(2261)})}),(0,h.jsx)("br",{}),(0,h.jsxs)("p",{children:[(0,h.jsx)(l.default,{text:d.default.t(2262)}),"",(0,h.jsx)(n.default,{href:f,onClick:e=>{e.preventDefault(),i.default.closeModal(),setTimeout((()=>(0,r.openExternalLink)(f)),10)},children:d.default.t(1142)})]})]})},t.WHATSAPP_BUSINESS_URL=void 0;var n=s(a(44683)),i=s(a(69162)),o=s(a(75940)),l=s(a(85051)),r=a(4919),d=s(a(2408)),c=s(a(4231)),u=s(a(67370)),h=a(85893);const f="https://www.whatsapp.com/business";t.WHATSAPP_BUSINESS_URL=f},67370:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const e=(0,i.useRef)(null),t=(0,i.useRef)(null),{theme:a}=(0,i.useContext)(d.default),s="dark"===a;return(0,i.useEffect)((()=>(null!=e.current&&(t.current=new l.default(e.current,{text:"https://www.whatsapp.com/business/download",colorDark:"#122e31",colorLight:"#ffffff",width:o.default.QR_EDGE/2,height:o.default.QR_EDGE/2,typeNumber:4,correctLevel:l.default.CorrectLevel.H})),()=>{null!=t.current&&(t.current.clear(),t.current=null,e.current=null)})),[s]),(0,c.jsx)("div",{className:r.default.wrapper,children:(0,c.jsx)("div",{ref:e,className:(0,n.default)(r.default.code,{[r.default.codeDarkMode]:s}),children:(0,c.jsx)(u,{theme:a})})})};var n=s(a(94184)),i=a(67294),o=s(a(55454)),l=s(a(37360)),r=s(a(90487)),d=s(a(13038)),c=a(85893);function u(){return(0,c.jsx)("div",{className:r.default.codeLogo,children:(0,c.jsx)("svg",{width:"100%",viewBox:"0 0 50 50",xmlns:"http://www.w3.org/2000/svg",children:(0,c.jsx)("path",{d:"M42.6776 42.6779C37.9558 47.3997 31.6777 50.0001 24.9999 50.0001C21.0047 50.0001 17.0541 49.0389 13.5244 47.2141L0.601068 49.3339L2.72832 36.3645C0.941278 32.8647 0 28.9525 0 25.0001C0 18.3223 2.60042 12.0443 7.32229 7.32237C12.0442 2.6005 18.3221 0 24.9999 0C31.6777 0 37.9558 2.6005 42.6776 7.32237C47.3995 12.0443 50 18.3223 50 25.0001C50 31.678 47.3995 37.9558 42.6776 42.6779ZM24.9999 4.33778C13.6067 4.33778 4.33772 13.607 4.33772 25.0001C4.33772 28.4792 5.21935 31.9192 6.8868 34.9487L7.24853 35.6054L5.85915 44.0756L14.2959 42.6918L14.9565 43.0601C18.0107 44.7624 21.4837 45.6622 24.9999 45.6622C36.3932 45.6622 45.6622 36.3933 45.6622 25.0001C45.6622 13.607 36.3932 4.33778 24.9999 4.33778ZM31.1133 24.3614C32.4522 24.9804 34.1536 26.3725 34.1208 29.3117C34.0749 33.4266 31.2191 35.6542 27.2744 35.6542H19.4594H18.3042C17.5079 35.6542 16.8645 35.0053 16.8713 34.2092L17.0344 15.0573C17.041 14.2714 17.6794 13.6377 18.4652 13.6366L27.1493 13.6256C31.4651 13.6256 33.9598 16.039 33.9177 19.8134C33.8903 22.2579 32.2484 23.8355 31.1133 24.3614ZM26.766 17.4622H21.3643L21.3076 22.5361H26.7093C28.5347 22.5361 29.5672 21.5152 29.584 19.9992C29.6009 18.4831 28.5915 17.4622 26.766 17.4622ZM26.9444 26.4035H21.2643L21.2038 31.8178H26.884C28.8333 31.8178 29.7752 30.5802 29.792 29.0952C29.8085 27.6101 28.8939 26.4035 26.9444 26.4035Z",fill:"currentColor"})})})}},43711:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const[t,a]=(0,n.useState)(!1);let s,h,f;e.isGroup?(s=r.default.t(1606),h=r.default.t(1609),f=r.default.t(2042)):e.isBusiness?(s=r.default.t(1604),h=r.default.t(1607),f=r.default.t(325)):(s=r.default.t(1605),h=r.default.t(1608),f=r.default.t(327));return(0,u.jsxs)(o.default,{onOK:function(){e.onReport(t)},okText:r.default.t(1585),onCancel:e.onCancel,title:e.title,children:[(0,u.jsx)(d.TextParagraph,{className:c.default.section,color:"muted",children:s}),(0,u.jsx)(d.TextParagraph,{className:c.default.section,color:"muted",children:h}),(0,u.jsxs)(l.FlexRow,{align:"center",justify:"start",children:[(0,u.jsx)(i.default,{onChange:()=>a((e=>!e)),checked:t,id:"menu-icon-report-spam"}),(0,u.jsx)(d.TextLabel,{className:c.default.checkboxLabel,htmlFor:"menu-icon-report-spam",color:"muted",children:f})]})]})};var n=a(67294),i=s(a(33287)),o=s(a(75940)),l=a(63290),r=s(a(2408)),d=a(97504),c=s(a(73662)),u=a(85893)},22024:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){let a;if(e.size!==t.size)return!1;for(const[s,n]of e)if(a=t.get(s),a!==n||void 0===a&&!t.has(s))return!1;return!0}},24613:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={audioTag:"_1ichq"}},35346:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={header:"_2J_Rg",chevronIcon:"_3grvf",ephemeralIcon:"_36-dp"}},4949:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={msg:"_3YiZC",text:"RmpKn",bubble:"_2z0p1",author:"XntIB",hasSuspiciousLinks:"_3bU-2",hasAuthor:"_2cFHu",suspiciousLabel:"_2tYTz"}},86281:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={roundedThumb:"PZyAb"}},49866:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={container:"_2G0i8"}},20720:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={mediaCanvas:"_7xcOR",shade:"_3t-Dc",iconStar:"qSojz",shadeTop:"kt7p8",canvasBody:"_2pnVj",canvasSelected:"xRcWX",mediaSelect:"_2GKAW",canvasComponent:"_3_8JL",canvasSecondRow:"_2j2vv",viewerFlow:"q0PwG",active:"_2IToT",viewerFlowTransparent:"_1Brnl"}},8829:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={container:"_3QXeb",selected:"_11w_h"}},31318:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={iconType:"_1Dw5O"}},79011:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={wrapper:"_11tTr"}},82338:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={nuxContainer:"_2MN2b",flatListContainer:"_3P67r",btnClose:"_1rNId",nuxHeader:"_1fDhw",nuxContent:"_3CSup",nuxIcon:"wZmgd",nuxText:"_23F3I"}},50733:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={body:"_3fwY2",chevron:"_1-yxK"}},25022:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={businessAccount:"_3WoOY",businessTitleText:"_1b76N",businessTitleWithSMBUpsell:"_3o5KS",businessTitleWithSmbUpsell:"_3o5KS"}},5579:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={businessHoursRow:"_2438e",firstRow:"_2aGH7",businessHoursDay:"Wb7rm",businessHoursHours:"_1Mczx",dayIsOpen:"_1kitz",businessHoursChevron:"_3rrGE",flipSvg:"mqqNO"}},79953:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={section:"h_jr2",description:"_2q04R",map:"_1I-_B"}},80746:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={wrapper:"_1KYpA",title:"_3vc4r",subtitle:"_3QsTT",verifiedText:"U1NnE",icon:"_3g_j1"}},63937:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={open:"_30zzj",closed:"_3wZZK",openStatus:"_1domD"}},10824:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={contactBusinessInfo:"_3ghG_",contactBusinessInfoSpinner:"_4L7V_",dataRow:"_1V82a",businessHoursRow:"qatFJ",businessHoursDay:"ipOxZ",businessHoursHours:"_24gSh",businessHoursChevron:"_3WwUb",flipSvg:"_3rTVf",dataRowIcon:"_19MbK",dataRowText:"_2w4yz",businessTitleText:"_2ojGG",businessMarker:"Ok_wk",verifiedLabel:"_8Jv4k",businessMap:"_2AET6",address:"_3hYRV",link:"Lmend",infoIcon:"_3MsDj"}},12603:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={info:"_1TZy1",categories:"_1IRxm",noPaddingBottom:"_2JmH_"}},89180:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={body:"_39Rqc",chevron:"_3QyZS"}},27966:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={body:"_1QLaj",avatar:"H4VsR",description:"_2eg75",nameSecondary:"NsN19",chevron:"_1lUFl",iconSearch:"_3swiN",title:"_1FfWb",dogfoodingGroupBannerInternalOnly:"_3TsJ4"}},13474:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={header:"_2zyOo",icon:"_4aKqp"}},33019:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={header:"_3AwRc",restrictText:"_1fFgT"}},27356:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={multimediaGallery:"_3M644",column:"_3nvje",menuItem:"OJuvv",active:"_KRg9",menuTabsLists:"_3CC5A",threeTabs:"_1KRHF",fourTabs:"rLX29"}},8752:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={mediaViewerPlaceholder:"nehFG",imageAudio:"_2OreO",mediaViewerAudio:"_1alR8"}},77030:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={thumbsContainer:"_1XWMx",scrollContainer:"_1MhXb",viewerThumbs:"_1FS45",mediaThumb:"_52crR",thumbPadding:"_1833d"}},89732:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={label:"QzWWL",input:"_1LOWN",explanation:"_37J_Y"}},96089:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={footerNote:"_1chRk",getTheAppLink:"_3t8G3"}},90487:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={wrapper:"_2Cwyq",code:"_3LMFv",codeDarkMode:"_3-nnq",codeLogo:"_3wVH-"}},73662:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={section:"_2ppks",checkboxLabel:"l2_nh"}}}]);