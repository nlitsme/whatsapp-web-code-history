/*! Copyright (c) 2022 WhatsApp Inc. All Rights Reserved. */
(self.webpackChunkwhatsapp_web_client=self.webpackChunkwhatsapp_web_client||[]).push([[3770],{31820:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{value:t,currency:n,onChange:r,getErrorMessage:l}=e;const o=m(t,n,l),u=(0,d.default)(o),p=(0,d.default)(t);return(0,a.useEffect)((()=>{(null==p&&null!=o||p===t&&u!==o)&&r({value:t,error:o})}),[o]),(0,c.jsx)("div",{className:(0,i.default)(f),children:(0,c.jsx)(s.TextInput,{managed:!0,constrainedWidth:!0,hideFloatingLabel:!0,placeholder:"0",value:t,theme:"small",maxLength:12,customStyleThemes:["disabledLabel","noErrorInfo"],onChange:e=>{r({value:e,error:m(e,n,l)})},error:o})})};var l=n(48360),a=n(67294),i=r(n(56720)),o=n(74764),u=n(59789),s=n(90011),d=r(n(41502)),c=n(85893);function m(e,t,n){if(!(0,o.validatePriceString)(t,e))return l.fbt._("Enter a valid number",null,{hk:"2i2FVR"});const r=(0,o.valueFromString)(t,e)/u.DEFAULT_OFFSET;return r<0?l.fbt._("Enter a positive number",null,{hk:"V2XZe"}):n(r)}const f={textAlign:"ljrqcn24",width:"mh8l8k0y",overflowX:"gfz4du6o",overflowY:"r7fjleex",marginTop:"obt84bhp"}},70239:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.OrderDetailAmountTypeSelector=function(e){let{value:t,onChange:n,currency:r}=e;const d=i.formatLocalSymbol(r),c=l.fbt._("Select amount type",null,{hk:"1xddkG"}),m=[{id:"percentage",label:l.fbt._("by Percentage ({percentage-symbol})",[l.fbt._param("percentage-symbol",o.PERCENTAGE_SYMBOL)],{hk:"3fQwM3"}),value:o.PERCENTAGE_SYMBOL},{id:"flat-amount",label:l.fbt._("by Flat amount ({currency-symbol})",[l.fbt._param("currency-symbol",d)],{hk:"duPhj"}),value:d}],f=(0,a.useMemo)((()=>m.findIndex((e=>e.value===t))),[]);return(0,s.jsx)(u.default,{"aria-label":c,options:m,defaultIndex:f,onChange:n})};var l=n(48360),a=n(67294),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var r={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=l?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}r.default=e,n&&n.set(e,r);return r}(n(74764)),o=n(59789),u=r(n(43369)),s=n(85893);function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}},70372:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.anyFieldHasError=function(e){for(const t in e)if(null!=e[t])return!0;return!1},t.getErrorMessageHandler=function(){let{fieldType:e,maxFlatValue:t,errorMessageBigPercentageValue:n,errorMessageBigFlatValue:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(l){if(e===i.PERCENTAGE_SYMBOL){if(null!=n&&l>100)return n}else if(null!=t&&null!=r&&l>t)return r}},t.useShowToastErrors=function(e){(0,l.useEffect)((()=>{for(const t in e){const n=e[t];null!=n&&a.Cmd.openToast((0,u.jsx)(o.Toast,{duration:1e4,id:t+n.toString(),msg:n,action:{actionText:r.fbt._("OKAY",null,{hk:"24jI97"}),dismiss:!0,theme:"success"}}))}}),[e])};var r=n(48360),l=n(67294),a=n(88102),i=n(59789),o=n(50452),u=n(85893)},43369:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{defaultIndex:t=0,options:n,onChange:r,"aria-label":f}=e;const p=(0,l.useRef)(null),[h,b]=(0,l.useState)(!1),[g,x]=(0,l.useState)(t),y=n.map(((e,t)=>{const{id:n,label:l}=e;return(0,c.jsx)(o.DropdownItem,{a8n:`mi-${n}`,action:()=>{r(e),x(t)},children:(0,c.jsx)("div",{className:(0,a.default)(m),role:"button","aria-label":l,children:t===g?(0,c.jsx)(u.TextSpan,{weight:"bold",children:l}):l})},n)}));return(0,c.jsxs)("div",{ref:p,children:[(0,c.jsx)(i.default,{"aria-label":f,postfixIcon:"down",label:n[g].value,onClick:()=>b((e=>!e))}),h&&p.current&&(0,c.jsx)(s.UIE,{displayName:"ValuePicker",escapable:!0,popable:!0,requestDismiss:()=>b(!1),children:(0,c.jsx)(d.default,{contextMenu:{menu:y,anchor:p.current}})})]})};var l=n(67294),a=r(n(56720)),i=r(n(72332)),o=n(71174),u=n(13923),s=n(18644),d=r(n(24717)),c=n(85893);const m={boxSizing:"cm280p3y",color:"tviruh8d",cursor:"ajgl1lbb",fontSize:"f8jlpxt4",height:"lniyxyh2",lineHeight:"gz7w46tb",overflowX:"gfz4du6o",overflowY:"r7fjleex",paddingStart:"sta02ykp",paddingEnd:"pnfw7ual",paddingTop:"lqdozo90",textOverflow:"lhj4utae",whiteSpace:"le5p0ye3",position:"g0rxnol2"}},28809:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.additionalChargeErrorHandler=function(e){let{label:t,currency:n,fieldType:r,maxFlatValue:c,enablePercentValueCheck:m,value:f}=e;if(!(0,l.validatePriceString)(n,f))return o;const p=(0,l.valueFromString)(n,f)/a.DEFAULT_OFFSET;if(p<0)return u;if(r===a.PERCENTAGE_SYMBOL){if(Boolean(m)&&p>100)return s(null!=t?t:"")}else if((0,i.isNumber)(c)&&p>c)return d(null!=t?t:"");return""},t.negativeNumber=t.invalidNumber=t.errorMessageBigPercentageValue=t.errorMessageBigFlatValue=void 0;var r=n(48360),l=n(74764),a=n(59789),i=n(31515);const o=r.fbt._("Enter a valid number",null,{hk:"2i2FVR"});t.invalidNumber=o;const u=r.fbt._("Enter a positive number",null,{hk:"V2XZe"});t.negativeNumber=u;const s=e=>r.fbt._("{input_label} can't be bigger than 100%",[r.fbt._param("input_label",e)],{hk:"48j18J"});t.errorMessageBigPercentageValue=s;const d=e=>r.fbt._("{input_label} must be less than subtotal",[r.fbt._param("input_label",e)],{hk:"1UOGGL"});t.errorMessageBigFlatValue=d},63770:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{order:t,chat:n}=e;const[r,i]=(0,s.useState)(ae.ORDER_SUMMARY),[o,u]=(0,s.useState)(null),[d,c]=(0,s.useState)(!1),[p,h]=(0,s.useState)((()=>{var e;return null!==(e=null==t?void 0:t.products.map((e=>new H.default(e))))&&void 0!==e?e:[]})),[b,g]=(0,s.useState)({}),[x,y]=(0,s.useState)(null),v=(e,t)=>{g((n=>(0,l.default)((0,l.default)({},n),{},{[t]:e})))},S=(0,s.useMemo)((()=>p.reduce(((e,t)=>{var n,r;return e+(null!==(n=null!==(r=t.price)&&void 0!==r?r:b[t.id])&&void 0!==n?n:0)*t.quantity}),0)),[p,b]),_=(0,V.calculateFlatAmounts)({orderSubtotal:S/V.DEFAULT_OFFSET,discountType:(null==x?void 0:x.discountType)||"",discountText:(null==x?void 0:x.discountText)||"",taxType:(null==x?void 0:x.taxType)||"",taxText:(null==x?void 0:x.taxText)||"",shippingText:(null==x?void 0:x.shippingText)||""}),C=()=>{const e=null!=t?t:F.OrderCollection.addOrder();e.products=p.map((e=>{var t;return e.price=null!==(t=e.price)&&void 0!==t?t:b[e.id],e.currency=ue,e})),e.currency=ue,e.subtotal=S,e.triggerItemCollectionUpdate(),(0,Q.sendOrderDetailsMessageAsMerchant)({order:e,chat:n,orderNote:"",offset:V.DEFAULT_OFFSET,total:_.total,discount:_.discount,shipping:_.shipping,tax:_.tax}),j.Cmd.closeDrawerRight()},T=(0,f.hasCatalog)(m.BusinessProfileCollection.get((0,w.getMaybeMeUser)())),k=(0,a.default)((()=>{j.Cmd.closeDrawerRight()})),M=()=>{!function(e,t,n){if(!e)return t.length>0;return t.length!==e.products.length||t.some(((t,r)=>{var l,a;return t.id!==e.products[r].id||t.quantity!==e.products[r].quantity||(null!==(l=null!==(a=t.price)&&void 0!==a?a:n[t.id])&&void 0!==l?l:null)!==e.products[r].price}))}(t,p,b)?k():se(k)},E=e=>{!0!==e&&de(p,b),i(ae.ORDER_SUMMARY)},A=()=>{i(ae.CATALOG_PRODUCTS_FORM)},O=(e,t)=>{const n=Number.isInteger(e)?e:null;u(n),c(!0===t),i(null==n||p[n].isCustomItem?ae.CUSTOM_ITEM_FORM:ae.CATALOG_PRODUCTS_FORM)},P=()=>{i(ae.ADDITIONAL_CHARGES_FORM)},I=(e,t)=>{const n=e.length,r=e.reduce(((e,t,n)=>e.set(t.id,n)),new Map);return[...t].sort(((e,t)=>{var l,a;return(null!==(l=r.get(e.id))&&void 0!==l?l:n)-(null!==(a=r.get(t.id))&&void 0!==a?a:n)}))},R=e=>{h((t=>[...t.slice(0,e),...t.slice(e+1)]))},N=e=>{null!=o?((e,t)=>{h((n=>{var r;const l=[...n];return l[t].set({name:String(e.name),price:Number(e.priceAmount1000),quantity:null!==(r=e.quantity)&&void 0!==r?r:1,isQuantitySet:e.isQuantitySet}),l}))})(e,o):(e=>{let{name:t,priceAmount1000:n,quantity:r,isQuantitySet:l}=e;const a=(0,D.default)();h((e=>I(e,[...e,new H.default({id:a,name:t,price:n,quantity:null!=r?r:1,isCustomItem:!0,isQuantitySet:l})])))})(e)},B=ie.indexOf(r);if(!r)return null;return(0,re.jsx)(ne.default,{children:(0,re.jsx)(J.UIE,{displayName:`FlowDrawer${B}`,escapable:!0,requestDismiss:function(){k()},children:(0,re.jsx)("div",{children:function(e){switch(e){case ae.CATALOG_PRODUCTS_FORM:return(0,re.jsx)(pe,{orderProducts:p,onBack:E,onAddProdutcs:e=>{var t;t=e,h((e=>I(e,[...e.filter((e=>e.isCustomItem)),...t]))),de(t,b),E(!0)},onAddCustomItem:()=>{O(null,!0)}});case ae.CUSTOM_ITEM_FORM:return(0,re.jsx)(fe,{onBack:d?A:E,onSaveCustomItem:e=>{N(e),E()},customItem:p[Number.isInteger(o)?Number(o):-1]});case ae.ORDER_SUMMARY:return(0,re.jsx)(he,{chat:n,priceMap:b,orderItems:p,orderSubtotal:S,flatAdditionalAmounts:_,onPriceChange:v,onBack:M,onSubmit:C,onAddItem:T?A:O,onAdditionalCharges:P,onDeleteItem:R,onEditItem:O});case ae.ADDITIONAL_CHARGES_FORM:return(0,re.jsx)(ye,{additionalValues:x,subtotal:S,onBack:E,onApply:e=>{y((t=>(0,l.default)((0,l.default)({},t),e))),E()}})}}(r)})},B)})};var l=r(n(81109)),a=r(n(51463)),i=r(n(78931)),o=n(28298),u=n(48360),s=n(67294),d=r(n(56720)),c=n(28809),m=n(93581),f=n(94010),p=r(n(39770)),h=r(n(39864)),b=n(99989),g=n(64481),x=r(n(44356)),y=r(n(90233)),j=n(88102),v=r(n(52665)),S=n(79502),_=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=le(t);if(n&&n.has(e))return n.get(e);var r={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=l?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}r.default=e,n&&n.set(e,r);return r}(n(74764)),C=r(n(52814)),T=r(n(60453)),k=r(n(69637)),M=n(94790),E=r(n(33308)),A=n(47915),O=r(n(44942)),P=r(n(30855)),I=n(29623),w=n(99234),D=r(n(48456)),R=n(57701),F=n(84312),N=r(n(31820)),B=n(70239),L=n(70372),V=n(59789),q=r(n(18985)),U=r(n(42116)),z=r(n(82240)),H=(r(n(96152)),r(n(52822))),G=n(9468),W=r(n(88990)),Y=n(3013),Q=n(73150),X=r(n(23217)),K=n(13923),Z=n(90011),$=n(50452),J=n(18644),ee=r(n(59909)),te=r(n(59552)),ne=r(n(41956)),re=n(85893);function le(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(le=function(e){return e?n:t})(e)}const ae=n(76672).Mirrored(["CATALOG_PRODUCTS_FORM","CUSTOM_ITEM_FORM","ORDER_SUMMARY","ADDITIONAL_CHARGES_FORM"]),ie=Array.from(ae.members()),oe={drawerBody:{backgroundColor:"ihvf49ua"},buttonContainer:{display:"p357zi0d",flexDirection:"f8m0rgwh",alignItems:"gndfcl4n"},iconContainer:{display:"p357zi0d",alignItems:"gndfcl4n",width:"dyxdk6fi",height:"m3o1wsh7",borderTopStartRadius:"bbr44loe",borderTopEndRadius:"ooj5yc5b",borderBottomEndRadius:"m8i16etx",borderBottomStartRadius:"cw0ivh8j",backgroundColor:"lzol1dln"},iconSVG:{marginTop:"m3ct2rho",marginEnd:"k1jo73ug",marginBottom:"ec1z5skj",marginStart:"isfiuinm",color:"s4recxw2"},orderFieldsContainer:{gap:"sxkbojvh"},clickableText:{color:"o0rubyzf",cursor:"ajgl1lbb",fontWeight:"m1e7cby3",lineHeight:"iq0m558w",letterSpacing:"ysae3w6m"},catalogBar:{borderTop:"gq6acybq",borderEnd:"toel9vei",borderBottom:"eyd9s9cm",borderStart:"ap1jplnr"},catalogTitleText:{fontWeight:"m1e7cby3",lineHeight:"a4ywakfo",color:"q70jrbp7"},orderTotal:{display:"p357zi0d",flexDirection:"sap93d0t",justifyContent:"o4u7okr9",fontWeight:"nbipi2bn"},additionalChargeInputContainer:{position:"g0rxnol2"},typeSelector:{position:"lhggkp7q",end:"ebjesfe0",zIndex:"mb8var44",top:"agjvi7sf"}},ue=_.currencyForCountryShortcode((0,S.getCountryShortcodeByPhone)((0,w.getMeUser)().user)),se=e=>{j.Cmd.openModal((0,re.jsx)(v.default,{title:u.fbt._("Discard changes?",null,{hk:"2aroAx"}),onOK:()=>{j.Cmd.closeModal(),e()},okText:u.fbt._("Discard",null,{hk:"2rIxjp"}),onCancel:()=>j.Cmd.closeModal(),children:(0,re.jsx)(K.TextDiv,{theme:"muted",children:u.fbt._("If you close this, your draft will be discarded.",null,{hk:"2Sbnur"})})}))},de=(e,t)=>{const n=e.reduce(((e,n)=>{var r;const l=null!==(r=n.price)&&void 0!==r?r:t[n.id];return Number.isInteger(l)||e.push(n.name||""),e}),[]);if(0===n.length)return;let r=n[0];const l=u.fbt._("and",null,{hk:"4cMq7Y"});for(let e=1;e<Math.min(n.length,2);e++)r+=", "+n[e];const a=n.length-2,i=r.lastIndexOf(",");a<=0&&i>=0&&(r=`${r.substring(i,0)} ${l.toString()}${r.substring(i+1)}`);const o=a<=0?u.fbt._("Add price for {items-names}",[u.fbt._param("items-names",r)],{hk:"22ZShF"}):u.fbt._("Add price for {items-names} and {items-quantity} other items",[u.fbt._param("items-names",r),u.fbt._param("items-quantity",a)],{hk:"aX7H6"});j.Cmd.openToast((0,re.jsx)($.Toast,{duration:1e4,id:(0,$.genId)(),msg:o,action:{actionText:u.fbt._("OKAY",null,{hk:"24jI97"}),dismiss:!0,theme:"success"}}))};function ce(e){return Number.isInteger(e)&&+e>0}function me(e){return _.formatAmount(ue,e/V.DEFAULT_OFFSET)}function fe(e){let{customItem:t,onBack:n,onSaveCustomItem:r}=e;const[l,a]=(0,s.useState)(null==t?void 0:t.name),[i,c]=(0,s.useState)(Number.isInteger(null==t?void 0:t.price)?String(Number(null==t?void 0:t.price)/1e3):null),[m,f]=(0,s.useState)(Number(null==t?void 0:t.price)),[h,b]=(0,s.useState)(null==t?void 0:t.quantity),[g,x]=(0,s.useState)((null==t?void 0:t.isQuantitySet)?String(t.quantity):null),y=(0,s.useMemo)((()=>function(e){if(null==e)return"";const t=String(u.fbt._("Add a title",null,{hk:"3QauyV"}));return""===e.trim()?t:""}(l)),[l]),j=(0,s.useMemo)((()=>function(e){if(null==e)return"";const t=String(u.fbt._("Enter a valid price",null,{hk:"nzgo4"}));return""!==e.trim()&&_.validatePriceString(ue,e,G.MIN_PRICE,G.MAX_PRICE)?"":t}(i)),[i]),v=(0,s.useMemo)((()=>function(e){if(null==e)return"";const t=String(u.fbt._("Enter a valid quantity",null,{hk:"13oaEC"}));return ce(Number(e))?"":t}(g)),[g]);return(0,re.jsxs)(T.default,{children:[(0,re.jsx)(M.DrawerHeader,{title:t?u.fbt._("Update items",null,{hk:"8H9jW"}):u.fbt._("Add items",null,{hk:"2SjafD"}),type:M.DRAWER_HEADER_TYPE.SMALL,onBack:n,focusBackOrCancel:!0}),(0,re.jsxs)(k.default,{className:(0,d.default)(oe.drawerBody,o.uiPadding.all16),children:[(0,re.jsx)(Z.TextInput,{a8n:"product-edit-drawer-item-name-input",value:l,placeholder:u.fbt._("Item name",null,{hk:"1LDktG"}),onChange:e=>{a(e)},theme:"small",customStyleThemes:["desaturated"],maxLength:150,error:y}),(0,re.jsx)(Z.TextInput,{a8n:"product-edit-drawer-item-price-input",value:i,placeholder:u.fbt._("Price {symbol}",[u.fbt._param("symbol",_.formatAmount1000ToParts(ue,0).symbol)],{hk:"3yCPZW"}),onChange:e=>{const t=_.valueFromString(ue,e);f(t),c(e)},theme:"small",maxLength:30,customStyleThemes:["desaturated"],error:j}),(0,re.jsx)(Z.TextInput,{a8n:"product-edit-drawer-item-quantity-input",value:g,placeholder:u.fbt._("Quantity (Optional)",null,{hk:"30uF5W"}),onChange:e=>{let t=""===e?null:Number(e);ce(t)||(t=null),b(t),x(""===e?null:e)},theme:"small",maxLength:30,customStyleThemes:["desaturated"],error:v}),(0,re.jsx)("div",{className:(0,d.default)(oe.buttonContainer,o.uiMargin.top16),children:(0,re.jsx)(p.default,{type:"primary",disabled:null==l||null==i||[y,j,v].some((e=>e)),onClick:()=>{const e={name:l,priceAmount1000:m,quantity:h,isQuantitySet:Number.isInteger(h)};r(e)},children:t?u.fbt._("Update",null,{hk:"iXFTM"}):u.fbt._("Add",null,{hk:"3ogfSW"})})})]})]})}function pe(e){let{orderProducts:t,onBack:n,onAddProdutcs:r,onAddCustomItem:l}=e;const[a,c]=(0,s.useState)(0),[m,f]=(0,s.useState)(!0),[h,y]=(0,s.useState)(!1),j=(0,ee.default)(),v=(0,te.default)((()=>new P.default)),S=()=>{const e=b.CatalogCollection.get((0,w.getMaybeMeUser)());if(!e)return[];return e.productCollection.getProductModels().map((e=>({itemKey:e.id.toString(),product:e})))},_=(0,te.default)((()=>new i.default([],(e=>e.id.toString())))).current,C=e=>{const t=_.isSelected(e);_.setVal(e,t?0:1),c(a+(t?-1:1)),h||y(!0),j()},E=(e,t)=>{_.setVal(e,t),h||y(!0),j()};(0,s.useEffect)((()=>{let e=0;S().forEach((n=>{const r=t.find((e=>e.id===n.product.id));void 0!==r&&(_.setVal(n.product,Number(r.quantity)),e+=1)})),j(),c(e),f(0===e)}),[t,_,j]);const I=_.getSelected().reduce(((e,t)=>e+(t.priceAmount1000||0)*Number(_.getVal(t))),0);return(0,re.jsxs)(T.default,{children:[(0,re.jsx)(M.DrawerHeader,{title:u.fbt._("Add items",null,{hk:"2nsVXo"}),type:M.DRAWER_HEADER_TYPE.SMALL,onBack:(m?a:h)?()=>{se(n)}:n,focusBackOrCancel:!0}),(0,re.jsxs)(k.default,{children:[(0,re.jsxs)(O.default,{className:(0,d.default)(oe.drawerBody),flatListControllers:[v.current],children:[(0,R.orderDetailsCustomItemEnabled)()&&(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(x.default,{image:(0,re.jsx)("div",{className:(0,d.default)(oe.iconContainer),children:(0,re.jsx)(X.default,{className:(0,d.default)(oe.iconSVG),name:"add-item"})}),primary:u.fbt._("Add custom item",null,{hk:"DCIZF"}),theme:"add-order-item",onClick:l}),(0,re.jsx)("hr",{className:(0,d.default)(oe.catalogBar,o.uiMargin.top0)})]}),(0,re.jsx)("p",{className:(0,d.default)(oe.catalogTitleText,o.uiMargin.start15),children:u.fbt._("Catalog items",null,{hk:"2rgdJA"})}),(0,re.jsx)(A.FlatList,{flatListController:v.current,direction:"vertical",forceConsistentRenderCount:!1,data:S(),renderItem:e=>{let{product:t}=e;return(0,re.jsx)(be,{product:t,selections:_,onProductClick:C,onProductQuantityChange:E})},defaultItemHeight:g.PRODUCT_LIST_ITEM_HEIGHT})]}),(!m||h)&&(0,re.jsxs)("div",{className:(0,d.default)(oe.drawerBody,o.uiPadding.all16,o.uiMargin.top10),children:[(0,re.jsxs)("div",{className:(0,d.default)(oe.orderTotal),children:[u.fbt._("Total",null,{hk:"pz5vA"}),(0,re.jsx)("p",{children:me(I)})]}),(0,re.jsx)("div",{className:(0,d.default)(oe.buttonContainer,o.uiMargin.top16),children:(0,re.jsx)(p.default,{type:"primary",disabled:m?0===a:!h,onClick:()=>{const e=_.getSelected().map((e=>{var t;return new H.default({id:e.id,name:e.name,price:e.priceAmount1000,thumbnailUrl:null===(t=e.getPreviewImage())||void 0===t?void 0:t.mediaUrl,quantity:Number(_.getVal(e)),isCustomItem:!1,isQuantitySet:!0})}));r(e)},children:m?u.fbt._("Add",null,{hk:"3ErADm"}):u.fbt._("Update",null,{hk:"2vxW5D"})})})]})]})]})}function he(e){let{chat:t,priceMap:n,orderItems:r,orderSubtotal:l,flatAdditionalAmounts:a,onPriceChange:i,onBack:c,onSubmit:m,onAddItem:f,onAdditionalCharges:h,onDeleteItem:b,onEditItem:g}=e;const[y,j]=(0,s.useState)(null),v=(0,re.jsx)("div",{className:(0,d.default)(oe.iconContainer),children:(0,re.jsx)(X.default,{className:(0,d.default)(oe.iconSVG),name:"add-item"})}),S=r.every((e=>{var t;return Number.isInteger(null!==(t=e.price)&&void 0!==t?t:n[e.id])})),_=0!==r.length;return(0,re.jsxs)(T.default,{children:[(0,re.jsx)(M.DrawerHeader,{title:_?u.fbt._("Review Order",null,{hk:"1yDsQ1"}):u.fbt._("Create order",null,{hk:"3snLWG"}),onBack:c,type:M.DRAWER_HEADER_TYPE.SMALL}),(0,re.jsxs)(k.default,{children:[(0,re.jsx)(E.default,{xstyle:[o.uiPadding.top20,o.uiPadding.horiz16,o.uiPadding.bottom15],theme:"refresh-padding-title",children:(0,re.jsxs)(q.default,{children:[(0,re.jsx)(U.default,{sellerWid:(0,w.getMeUser)(),orderStatus:(0,re.jsx)(z.default,{})}),(0,re.jsxs)(I.FlexColumn,{align:"stretch",xstyle:o.uiMargin.horiz0,children:[(0,re.jsx)(x.default,{image:v,primary:u.fbt._("Add item",null,{hk:"3uoH1r"}),theme:"add-order-item",onClick:f}),r.map(((e,t)=>{const r=null!=e.price?me(e.price):null,l=u.fbt._("Quantity {item-quantity}",[u.fbt._param("item-quantity",e.quantity)],{hk:"39jSdf"});return(0,re.jsx)("div",{className:(0,d.default)(o.uiPadding.top20),children:(0,re.jsx)(x.default,{image:(a=e,a.isCustomItem?(0,re.jsx)("div",{className:(0,d.default)(oe.iconContainer),children:(0,re.jsx)(X.default,{className:(0,d.default)(oe.iconSVG),name:"list-msg-icon"})}):(0,re.jsx)(Y.ProductThumb,{mediaData:a.mediaData,theme:"squareThumb"})),primary:e.name,secondary:e.isQuantitySet?l:null,theme:"media",onMouseOver:()=>{j(t)},onMouseLeave:()=>{j(null)},detail:y===t&&e.isCustomItem?(0,re.jsx)(C.default,{onClick:e=>{e.stopPropagation(),b(t)}}):null!=r?r:(0,re.jsx)(ge,{price:n[e.id],onPriceChange:t=>{i(t,e.id)}}),onClick:()=>{g(t)}})},t);var a}))]}),(0,re.jsxs)(I.FlexColumn,{align:"stretch",xstyle:oe.orderFieldsContainer,children:[(0,re.jsxs)(I.FlexRow,{justify:"all",children:[(0,re.jsx)(K.TextSpan,{color:"secondary",size:"16",children:u.fbt._("Subtotal",null,{hk:"4ciFet"})}),(0,re.jsx)(K.TextSpan,{color:"secondary",size:"16",children:me(l)})]}),Boolean(a.discount)&&(0,re.jsxs)(I.FlexRow,{justify:"all",children:[(0,re.jsx)(K.TextSpan,{color:"secondary",size:"16",children:u.fbt._("Discount",null,{hk:"3W4mK5"})}),(0,re.jsx)(K.TextSpan,{color:"secondary",size:"16",children:me(-1*+a.discount)})]}),Boolean(a.shipping)&&(0,re.jsxs)(I.FlexRow,{justify:"all",children:[(0,re.jsx)(K.TextSpan,{color:"secondary",size:"16",children:u.fbt._("Shipping",null,{hk:"1xKyVx"})}),(0,re.jsx)(K.TextSpan,{color:"secondary",size:"16",children:me(+a.shipping)})]}),Boolean(a.tax)&&(0,re.jsxs)(I.FlexRow,{justify:"all",children:[(0,re.jsx)(K.TextSpan,{color:"secondary",size:"16",children:u.fbt._("Tax",null,{hk:"2G3BQt"})}),(0,re.jsx)(K.TextSpan,{color:"secondary",size:"16",children:me(+a.tax)})]}),_&&(0,re.jsx)(I.FlexRow,{justify:"all",align:"center",children:(0,re.jsx)(p.default,{onClick:h,className:(0,d.default)(oe.clickableText,o.uiMargin.bottom0),children:u.fbt._("Additional Charges",null,{hk:"3I4vSr"})})})]})]})}),_&&(0,re.jsxs)(E.default,{xstyle:[o.uiPadding.top20,o.uiPadding.horiz16],theme:"refresh-padding-title",children:[(0,re.jsxs)("div",{className:(0,d.default)(oe.orderTotal),children:[u.fbt._("Total",null,{hk:"4kHQl"}),(0,re.jsx)("p",{children:me(a.total)})]}),(0,re.jsx)("div",{className:(0,d.default)(oe.buttonContainer,o.uiMargin.vert15),children:(0,re.jsx)(p.default,{type:"primary",disabled:!S,onClick:m,children:u.fbt._("Send Order",null,{hk:"3wTiM3"})})})]})]})]})}function be(e){let{product:t,selections:n,onProductClick:r,onProductQuantityChange:l}=e;return(0,re.jsx)(y.default,{model:t,selections:n,children:(0,re.jsx)(W.default,{product:t,onClick:()=>r(t),checkbox:!0,detail:n.isSelected(t)&&(0,re.jsx)("div",{children:(0,re.jsx)(h.default,{quantity:Number(n.getVal(t)),onChange:e=>l(t,e)})})})},t.id.toString())}function ge(e){let{price:t,onPriceChange:n}=e;const[r,l]=(0,s.useState)(null!=t?String(t/1e3):null),[a,i]=(0,s.useState)(null);return(0,L.useShowToastErrors)({productPriceError:a}),(0,re.jsx)(p.default,{onClick:e=>{e.stopPropagation(),null==r&&l("")},className:(0,d.default)(oe.clickableText),children:null==r?u.fbt._("Set Price",null,{hk:"2BCDBr"}):(0,re.jsx)(N.default,{currency:ue,value:r||"",onChange:e=>{let{value:t,error:r}=e;!1===Boolean(r)&&n(t?_.valueFromString(ue,t):null),l(t),i(r)},getErrorMessage:()=>{}})})}function xe(e){let{text:t,label:n,symbol:r,priceValue:l,setText:a,setError:i,setSymbol:o}=e;const m=(0,s.useMemo)((()=>{const e=(0,c.additionalChargeErrorHandler)({label:n,currency:ue,fieldType:r,maxFlatValue:l/V.DEFAULT_OFFSET,enablePercentValueCheck:!0,value:t});return i(Boolean(e)),e}),[t,n,r,i,l]);return(0,re.jsxs)("div",{className:(0,d.default)(oe.additionalChargeInputContainer),children:[(0,re.jsx)(Z.TextInput,{value:t,placeholder:u.fbt._("{input_label} ({currency_or_percentage})",[u.fbt._param("input_label",n),u.fbt._param("currency_or_percentage",r)],{hk:"1j7m80"}),onChange:e=>a(e),theme:"small",maxLength:10,customStyleThemes:["desaturated"],error:m}),(0,re.jsx)("div",{className:(0,d.default)(oe.typeSelector),children:(0,re.jsx)(B.OrderDetailAmountTypeSelector,{currency:ue,value:r,onChange:e=>{let{value:t}=e;return o(t)}})})]})}function ye(e){let{subtotal:t,additionalValues:n,onBack:r,onApply:l}=e;const[a,i]=(0,s.useState)((null==n?void 0:n.discountText)||""),[m,f]=(0,s.useState)((null==n?void 0:n.taxText)||""),[h,b]=(0,s.useState)((null==n?void 0:n.shippingText)||""),[g,x]=(0,s.useState)((null==n?void 0:n.discountType)||V.PERCENTAGE_SYMBOL),[y,j]=(0,s.useState)((null==n?void 0:n.taxType)||V.PERCENTAGE_SYMBOL),[v,S]=(0,s.useState)(!1),[C,E]=(0,s.useState)(!1),A=(0,s.useMemo)((()=>(0,c.additionalChargeErrorHandler)({currency:ue,value:h})),[h]),O=[v,C,A].some((e=>e));return(0,re.jsxs)(T.default,{children:[(0,re.jsx)(M.DrawerHeader,{title:u.fbt._("Additional Charges",null,{hk:"3hDtAE"}),type:M.DRAWER_HEADER_TYPE.SMALL,onBack:r,focusBackOrCancel:!0}),(0,re.jsxs)(k.default,{className:(0,d.default)(oe.drawerBody,o.uiPadding.all16),children:[(0,re.jsx)(xe,{text:a,label:u.fbt._("Discount",null,{hk:"3dW1e0"}),symbol:g,priceValue:t,setText:i,setError:S,setSymbol:x}),(0,re.jsx)(xe,{text:m,label:u.fbt._("Tax",null,{hk:"2Ghypp"}),symbol:y,priceValue:t,setText:f,setError:E,setSymbol:j}),(0,re.jsx)(Z.TextInput,{value:h,placeholder:u.fbt._("Shipping ({currency_symbol})",[u.fbt._param("currency_symbol",_.formatAmount1000ToParts(ue,0).symbol)],{hk:"1z5IVc"}),onChange:b,theme:"small",maxLength:10,customStyleThemes:["desaturated"],error:A}),(0,re.jsx)("div",{className:(0,d.default)(oe.buttonContainer,o.uiMargin.top16),children:(0,re.jsx)(p.default,{type:"primary",disabled:O,onClick:()=>l({discountText:a,taxText:m,shippingText:h,discountType:g,taxType:y}),children:u.fbt._("Apply",null,{hk:"1af9Ka"})})})]})]})}}}]);
//# sourceMappingURL=https://web.whatsapp.com/3770.cdf94478824fc927dc67.js.map
