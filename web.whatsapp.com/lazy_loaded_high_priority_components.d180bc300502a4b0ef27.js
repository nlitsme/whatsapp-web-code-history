/*! Copyright (c) 2022 WhatsApp Inc. All Rights Reserved. */
(self.webpackChunkwhatsapp_web_client=self.webpackChunkwhatsapp_web_client||[]).push([[7205],{31789:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){let a;if(e.size!==t.size)return!1;for(const[n,i]of e)if(a=t.get(n),a!==i||void 0===a&&!t.has(n))return!1;return!0}},354646:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.setGroupProperty=function(e,t,a){return x((0,h.unproxy)(e),t,a)};var i=a(450796),s=a(492574),o=a(312380),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=m(t);if(a&&a.has(e))return a.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}n.default=e,a&&a.set(e,n);return n}(a(435232)),r=a(694816),d=a(548360),c=a(446331),u=n(a(914296)),f=a(357490),h=a(118146),p=a(785893);function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(m=function(e){return e?a:t})(e)}const g={announcement:"announce",restrict:"restrict",no_frequently_forwarded:"noFrequentlyForwarded",ephemeral:"ephemeralDuration",membership_approval_mode:"membershipApprovalMode"};function x(e,t,a){var n,h;let m=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,c.genId)();if(!t)return Promise.reject(new l.ActionError);if(t===o.GROUP_SETTING_TYPE.EPHEMERAL&&!(null===(n=e.groupMetadata)||void 0===n?void 0:n.canSetEphemeralSetting()))return Promise.reject(new l.ActionError);if(t!==o.GROUP_SETTING_TYPE.EPHEMERAL&&!(null===(h=e.groupMetadata)||void 0===h?void 0:h.canSetGroupProperty()))return Promise.reject(new l.ActionError);const v=(0,f.sendSetGroupProperty)(e.id,t,a),_={[o.GROUP_SETTING_TYPE.ANNOUNCEMENT]:{on:[d.fbt._("Allowing only admins to send messages to this group",null,{hk:"7c1j2"}),d.fbt._("You allowed only admins to send messages to this group",null,{hk:"TgjEr"})],off:[d.fbt._("Allowing all participants to send messages to this group",null,{hk:"4cLMI3"}),d.fbt._("You allowed all participants to send messages to this group",null,{hk:"1PCiIv"})]},[o.GROUP_SETTING_TYPE.RESTRICT]:{on:[d.fbt._("Allowing only admins to change this group's info",null,{hk:"PbjyR"}),d.fbt._("You allowed only admins to change this group's info",null,{hk:"39H5jp"})],off:[d.fbt._("Allowing all participants to change this group's info",null,{hk:"3fBDr9"}),d.fbt._("You allowed all participants to change this group's info",null,{hk:"4AVVnx"})]},[o.GROUP_SETTING_TYPE.NO_FREQUENTLY_FORWARDED]:{on:[d.fbt._("Blocking participants from sending messages that have been forwarded many times to this group",null,{hk:"lpVO4"}),d.fbt._("You blocked participants from sending messages that have been forwarded many times to this group",null,{hk:"22llJ6"})],off:[d.fbt._("Allowing participants to send messages that have been forwarded many times to this group",null,{hk:"UUxQ6"}),d.fbt._("You allowed participants to send messages that have been forwarded many times to this group",null,{hk:"3A3ppd"})]},[o.GROUP_SETTING_TYPE.EPHEMERAL]:{on:[d.fbt._("Turning on disappearing messages in this chat",null,{hk:"8QDLb"}),d.fbt._("You turned on disappearing messages in this chat",null,{hk:"27eqpQ"})],off:[d.fbt._("Turning off disappearing messages in this chat",null,{hk:"4nYVdI"}),d.fbt._("You turned off disappearing messages in this chat",null,{hk:"6y3db"})]},[o.GROUP_SETTING_TYPE.MEMBERSHIP_APPROVAL_MODE]:{on:[d.fbt._("Turning on membership approval mode in this chat",null,{hk:"Li7xA"}),d.fbt._("You turned on membership approval mode in this chat",null,{hk:"3JZ6c9"})],off:[d.fbt._("Turning off membership approval mode in this chat",null,{hk:"1ckzFs"}),d.fbt._("You turned off membership approval mode in this chat",null,{hk:"3x7TJw"})]}},b=0===a?"off":"on",[C,M]=_[t][b],j=new c.ActionType(C),S=v.then((()=>new c.ActionType(M))).catch((0,i.filteredCatch)(s.ServerStatusCodeError,(e=>{if(404===e.status)return new c.ActionType(d.fbt._("Group setting could not be changed",null,{hk:"3WCKMX"}).toString()+" "+d.fbt._("This group has ended.",null,{hk:"C2izu"}).toString())}))).catch((()=>(__LOG__(3)`Error while setting property`,new c.ActionType(d.fbt._("Group setting could not be changed",null,{hk:"3WCKMX"}),{actionText:u.default.t(122),actionHandler:()=>x(e,t,a,m)}))));return r.ToastManager.open((0,p.jsx)(c.ActionToast,{id:m,initialAction:j,pendingAction:S})),v.then((n=>{var i;n._duplicate||(null===(i=e.groupMetadata)||void 0===i||i.set(g[t],a))})).catch((0,i.filteredCatch)(s.ServerStatusCodeError,(()=>{})))}},616419:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{contact:t,onClick:a,contextMenu:o,isPendingParticipant:l,contextEnabled:r,onContext:d,theme:c,showStatusRingAroundProfilePhoto:u}=e,f=(0,n.useModelValues)(e.participant,["isAdmin"]);return(0,s.jsx)(i.Contact,{contact:t,admin:f.isAdmin,onClick:a,theme:c||"drawer-list",contextEnabled:()=>null!=r&&r(t),contextMenu:o,onContext:e=>null==d?void 0:d(e,t),isPendingParticipant:l,showNotifyName:!0,waitIdle:!0,showStatusRingAroundProfilePhoto:u})};var n=a(735461),i=a(402732),s=a(785893)},145863:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(145095)),s=a(422712),o=a(867811),l=a(26741),r=a(667294),d=n(a(59828)),c=n(a(858528)),u=a(184387),f=n(a(752500)),h=a(694270),p=a(662583),m=n(a(804478)),g=a(765044),x=a(785893);class v extends r.Component{constructor(){super(...arguments),this._setRefAudio=e=>{var t;this._audioElement=e,null===(t=this._unregisterFromAudioChannel)||void 0===t||t.call(this),this._unregisterFromAudioChannel=null==e?null:s.MainAudioChannel.registerMedia(e),null!=this.props.setRefAudio&&this.props.setRefAudio(e)},this.clearCheckForSuccess=()=>{this.checkForSuccessInterval&&(this.props.clearInterval(this.checkForSuccessInterval),this.checkForSuccessInterval=0,this.checkIteration=0)},this._handlePlaying=()=>{this.clearCheckForSuccess()},this._handlePlayerError=e=>{this.clearCheckForSuccess(),this.props.onError&&this.props.onError(e.target.src)},this.checkForSuccess=()=>{if(g.Socket.state!==p.SOCKET_STATE.CONNECTED)return;this.checkIteration++;const e=this.props.url;if(this.checkIteration>40)return void this._handlePlayerError({target:{src:e,error:{code:window.MediaError.MEDIA_ERR_NETWORK}}});const t=(0,i.default)(this._audioElement,"this._audioElement").buffered;t.length&&t.end(0)>0&&this._handlePlaying()},this.startCheckForSuccess=()=>{this.checkIteration=0,this.checkForSuccessInterval=this.props.setInterval(this.checkForSuccess,250)}}pause(){var e;null===(e=this._audioElement)||void 0===e||e.pause()}componentWillUnmount(){var e;null===(e=this._unregisterFromAudioChannel)||void 0===e||e.call(this),l.UA.isBlink&&(0,c.default)((0,i.default)(this._audioElement,"this._audioElement"))}_updatePlaybackRate(){const e=(0,i.default)(this._audioElement,"this._audioElement"),{playbackRate:t}=this.props;e.defaultPlaybackRate===t&&e.playbackRate===t||(e.defaultPlaybackRate=e.playbackRate=null!=t?t:1)}componentDidUpdate(){this._updatePlaybackRate()}componentDidMount(){const{listeners:e}=this.props,t=(0,i.default)(this._audioElement,"this._audioElement");this._updatePlaybackRate(),e.add(t,"error",this._handlePlayerError,{capture:!0}),e.add(t,"playing",this._handlePlaying),(l.UA.isGecko||l.UA.isSafari)&&(this.props.autoPlay?(this.checkIteration=0,this.checkForSuccessInterval=this.props.setInterval(this.checkForSuccess,250)):this.props.autoPlay?this.startCheckForSuccess():e.add(t,"play",this.startCheckForSuccess))}render(){const e=h.ReactionBubbleType.MEDIA_ITEM,{msg:t}=this.props;return(0,x.jsxs)("div",{className:this.props.className,children:[(0,x.jsx)("audio",{ref:this._setRefAudio,className:d.default.audioTag,src:this.props.url,onClick:this.props.onClick,controls:this.props.controls,preload:this.props.preload,autoPlay:this.props.autoPlay,children:this.props.children}),t&&(0,o.shouldShowReactionBubble)(t,e)&&(0,x.jsx)(f.default,{msgIds:[t.id.toString()],reactionBubbleType:e})]})}}v.displayName="AudioTag";var _=(0,u.ListenerHOC)((0,m.default)(v));t.default=_},5577:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{docMsgs:t,chat:a}=e,n=(0,s.default)(e,v),_=(0,h.default)(),b=(0,u.useRef)(null);let C;if((0,f.useListener)(t,"add remove reset query_doc_before",(()=>{var e;null===(e=b.current)||void 0===e||e.forceUpdate()})),(0,o.isMDBackend)()&&a.endOfHistoryTransferType===l.ConversationEndOfHistoryTransferModelPropType.COMPLETE_BUT_MORE_MESSAGES_REMAIN_ON_PRIMARY||a.endOfHistoryTransferType===l.ConversationEndOfHistoryTransferModelPropType.NOT_INCLUDED_IN_HIST_SYNC){const e=r.Clock.relativeDateStr((0,d.getHistorySyncEarliestDate)());C=(0,x.jsx)(p.default,{theme:"list",secondary:c.fbt._("Use WhatsApp on your phone to see messages from before {date}.",[c.fbt._param("date",e)],{hk:"1jHppk"})})}return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(g.default,(0,i.default)({ref:b,msgsCollection:t,queryCollection:(e,n)=>{_((()=>{t.queryDocs(a,n)}))},hasBefore:t.hasDocBefore,queryBefore:t.queryDocBefore,emptyText:m.default.t(521),chat:a},n)),C]})};var i=n(a(81109)),s=n(a(506479)),o=a(88555),l=a(461957),r=a(40234),d=a(555452),c=a(548360),u=a(667294),f=a(587550),h=n(a(174570)),p=n(a(158654)),m=n(a(914296)),g=n(a(219593)),x=a(785893);const v=["docMsgs","chat"]},561086:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.BaseEphemeralSettingRow=_,t.EphemeralSettingRow=function(e){const{chat:t,groupMetadata:a,onClick:n,testid:i}=e;if(a)return(0,g.jsx)(v,{groupMetadata:a,onClick:n,testid:i});return(0,g.jsx)(x,{chat:t,onClick:n,testid:i})};var i=a(227101),s=a(914597),o=a(548360),l=a(735461),r=a(780140),d=n(a(575116)),c=n(a(452665)),u=a(782109),f=a(529805),h=a(779259),p=n(a(914296)),m=a(113923),g=a(785893);const x=function(e){const{onClick:t,testid:a}=e,n=(0,l.useModelValues)(e.chat,["contact","ephemeralDuration"]),i=()=>{var e;return null!==(e=n.ephemeralDuration)&&void 0!==e?e:0},d=()=>{n.contact.addPendingAction((0,r.unblockContact)(n.contact)).then((()=>{t(),s.ModalManager.close()})).catch((()=>{}))},u=()=>{s.ModalManager.close()};return(0,g.jsx)(_,{ephemeralDuration:i(),canChange:!0,onClick:()=>{n.contact.isContactBlocked?s.ModalManager.open((0,g.jsx)(c.default,{onOK:d,okText:p.default.t(626),onCancel:u,cancelText:o.fbt._("Cancel",null,{hk:"H0gNq"}),children:i()?o.fbt._("You can't turn off disappearing messages for this chat unless you unblock this contact.",null,{hk:"o3zdA"}):o.fbt._("You can't turn on disappearing messages for this chat unless you unblock this contact.",null,{hk:"1uAyoI"})})):t()},testid:a})};const v=function(e){var t;const{onClick:a,testid:n}=e,i=(0,l.useModelValues)(e.groupMetadata,["ephemeralDuration","participants"]),r=()=>{s.ModalManager.close()};return(0,g.jsx)(_,{ephemeralDuration:null!==(t=i.ephemeralDuration)&&void 0!==t?t:0,canChange:i.canSetEphemeralSetting(),onClick:()=>{i.canSetEphemeralSetting()?a():s.ModalManager.open((0,g.jsx)(c.default,{onOK:r,okText:o.fbt._("OK",null,{hk:"2KEeHb"}),children:o.fbt._("Only admins can change this setting.",null,{hk:"1NF1gS"})}))},testid:n})};function _(e){const{ephemeralDuration:t,canChange:a,onClick:n,testid:s}=e;let l;l=t>0?a?(0,i.isEphemeral24HDurationEnabled)()?(0,h.getDisappearingMessageDurationString)(t):p.default.t(297):(0,f.isKeepInChatReadEnabled)()?(0,u.getDisappearingMessageExplanationStringKic)(t):(0,h.getDisappearingMessageExplanationString)(t):p.default.t(296);const r=(0,g.jsx)(m.TextSpan,{theme:"title",children:o.fbt._("Disappearing messages",null,{hk:"384ocn"})}),c=(0,g.jsx)(m.TextDiv,{theme:"muted",testid:"chat-dm-settings-item-value",children:l});return(0,g.jsx)(d.default,{side:"chevron",icon:"disappearing",onClick:n,title:r,secondaryTitle:c,testid:s})}},893528:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{linkMsgs:t,chat:a,selectedMessages:n,selectable:M,onMessageSelect:j}=e,S=(0,p.default)(),E=(0,f.useRef)(null);let T;if((0,h.useListener)(t,"add remove reset",(()=>{var e;null===(e=E.current)||void 0===e||e.forceUpdate()})),(0,h.useListener)(t,"query_doc_before",(()=>{var e;null===(e=E.current)||void 0===e||e.forceUpdate()})),(0,h.useListener)(a.msgs,"add bulk_add",(e=>{if(!e)return;const a=[],n=Array.isArray(e)?e:[e];Promise.all(n.map((e=>(e.getLinks().length&&a.push(e),Promise.resolve())))).then((()=>{a.length&&t.add(a)}))})),(0,o.isMDBackend)()&&a.endOfHistoryTransferType===l.ConversationEndOfHistoryTransferModelPropType.COMPLETE_BUT_MORE_MESSAGES_REMAIN_ON_PRIMARY||a.endOfHistoryTransferType===l.ConversationEndOfHistoryTransferModelPropType.NOT_INCLUDED_IN_HIST_SYNC){const e=r.Clock.relativeDateStr((0,c.getHistorySyncEarliestDate)());T=(0,b.jsx)(m.default,{theme:"list",secondary:u.fbt._("Use WhatsApp on your phone to see messages from before {date}.",[u.fbt._param("date",e)],{hk:"1jHppk"})})}const{linkMsgs:k,chat:y}=e,P=(0,s.default)(e,C);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(v.default,(0,i.default)({ref:E,msgsCollection:t,queryCollection:(e,n)=>{S((()=>{t.queryLinks(a,n)}))},hasBefore:t.hasLinkBefore,queryBefore:t.queryLinkBefore,renderElements:e=>{const a=[];return t.forEach((t=>{const i=!t.isSentByMe&&t.isGroupMsg;t.getGalleryLinks().forEach(((s,o)=>{s.href!==t.matchedText&&a.push((0,b.jsx)(x.default,{msg:t.safe(),link:s,displayAuthor:i,selectable:M,selectedMessages:n,onMessageSelect:j,onClickMsg:e},`${t.id.toString()}-${o}`))})),t.linkPreview&&a.push((0,b.jsx)(_.default,{msg:t,selectable:M,selectedMessages:n,onMessageSelect:j,displayType:d.DISPLAY_TYPE.GALLERY,onClickMsg:e},t.id.toString()))})),a.reverse(),a},emptyText:g.default.t(523),chat:a},P)),T]})};var i=n(a(81109)),s=n(a(506479)),o=a(88555),l=a(461957),r=a(40234),d=a(705177),c=a(555452),u=a(548360),f=a(667294),h=a(587550),p=n(a(174570)),m=n(a(158654)),g=n(a(914296)),x=n(a(936576)),v=n(a(219593)),_=n(a(335563)),b=a(785893);const C=["linkMsgs","chat"]},936576:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{link:t,displayAuthor:a,selectedMessages:n,onMessageSelect:C,onClickMsg:M}=e,j=(0,d.useModelValues)(e.msg,["body","caption","dir","id","isSentByMe","mediaData","type","rtl","senderObj","star","mediaData","asRevoked","isKept"]),[S,E]=(0,l.useState)(!1),[T,k]=(0,l.useState)((()=>n.isSelected(j.unsafe())));(0,r.useListener)(n,j.id.toString(),(e=>{T!==e&&k(e)}));const y=e.selectable||S?(0,b.jsx)(x.default,{checked:T,onClick:e=>{e&&e.stopPropagation(),C(j.unsafe(),!T)},msgTheme:"gallery"}):null,P=(0,u.Conversation)({mentions:j.mentionMap(),links:j.getLinks(),phoneNumbers:j.getPhoneNumbers(),selectable:true,trusted:j.isTrusted(),fromMe:j.id.fromMe}),A=j.body&&j.body.includes(t.url)?j.body:j.caption,w=a?(0,b.jsx)("div",{className:m.default.author,children:(0,b.jsx)(c.default,{msg:j,contact:j.senderObj})}):null,N=j.getSuspiciousLinks().length>0;return(0,b.jsx)(h.default,{hover:S,onClick:()=>{M(j.unsafe(),!T)},onMouseEnter:S?null:()=>{S||E(!0)},onMouseOver:S?null:()=>{S||E(!0)},onMouseLeave:S?()=>{S&&E(!1)}:null,children:(0,b.jsxs)("div",{className:m.default.msg,children:[(0,b.jsx)(s.default,{transitionName:"delay-leave",children:y}),(0,b.jsx)(_.MessageContainer,{isSentByMe:j.isSentByMe,children:(0,b.jsxs)("div",{className:(0,o.default)(m.default.bubble,{[m.default.hasAuthor]:a,[m.default.hasSuspiciousLinks]:N}),children:[w,(0,b.jsx)(v.SuspiciousLabel,{link:t,displayType:i.DISPLAY_TYPE.GALLERY}),(0,b.jsx)(g.default,{title:t.url,isSentByMe:j.isSentByMe,canonicalUrl:t.domain,displayType:i.DISPLAY_TYPE.GALLERY,star:j.star,kept:j.isKept}),(0,b.jsx)(f.EmojiText,{text:A,selectable:true,className:m.default.text,dirMismatch:j.rtl!==p.default.isRTL(),direction:j.dir,formatters:P})]})})]})})};var i=a(705177),s=n(a(540436)),o=n(a(294184)),l=a(667294),r=a(587550),d=a(735461),c=n(a(572655)),u=a(374331),f=a(965417),h=n(a(23296)),p=n(a(914296)),m=n(a(808767)),g=n(a(151845)),x=n(a(820485)),v=a(307538),_=a(158827),b=a(785893)},188224:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{fullCollection:t,selectedMessages:a,mediaMsgs:n,selectable:l,onMessageSelect:c,theme:S}=e,P=(0,x.useModelValues)(e.chat,["linkCount","docCount","productCount","endOfHistoryTransferType"]),A=(0,m.default)(),w=(0,_.default)();(0,g.useListener)(n,"add query_media_before",(()=>{A()})),(0,g.useListener)(n,"remove",(e=>{a&&a.isSelected(e)&&a.setVal(e,!1),A()})),(0,g.useListener)(n,"reset",(()=>{a&&a.unsetAll(),A()}));const N=function(e,t,a,n,l,d){let c=null;const u=(0,o.default)(e,(e=>-e.t)).filter(y).slice(0,!0===t?e.length:6);return(0,s.default)(u,((e,s)=>{const o=!0!==t&&s>=3&&s<=5?"hideableSecondRow":void 0,u=(0,T.jsx)(C.default,{className:(0,p.default)(d&&k.roundedThumb),aspectRatio:d?1.1:1,msg:e,hoverEvent:t,selectable:a,selectedMessages:n,onMessageSelect:l,theme:o},e.id.toString());if(!0!==t)return[u];const f=r.Clock.monthStr(e.t);if(f!==c){c=f;const t=(0,T.jsx)(M.default,{children:f},`header-${e.t}`);return[...(0,i.default)(6,(t=>(0,T.jsx)(j.EmptyCanvas,{},`padding-${e.t}-${t}`))),t,u]}return[u]}))}(n.toArray(),t,l,a,c,"chat-info"===S),I=e=>{n.hasMediaBefore&&w((()=>{n.queryMedia({chat:(0,E.unproxy)(P),msg:e})}))},D=(0,v.default)((e=>{n.hasMediaBefore&&e.scrollTop+d.SCROLL_FUDGE>e.scrollHeight-e.clientHeight&&I(n.head())}),100);(0,h.useEffect)((()=>{n.hasMediaBefore&&I()}),[]);const R=r.Clock.relativeDateStr((0,u.getHistorySyncEarliestDate)());return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(j.MediaGalleryView,{medias:N,mediaCollection:n,fullCollection:t,chat:(0,E.unproxy)(P),onScroll:e=>{D(e.currentTarget)},theme:S}),"chat-info"!==S&&(0,T.jsx)(b.default,{theme:"list",secondary:f.fbt._("Use WhatsApp on your phone to see messages from before {date}.",[f.fbt._param("date",R)],{hk:"1jHppk"})})]})};var i=n(a(498913)),s=n(a(594654)),o=n(a(189734)),l=a(88555),r=a(40234),d=a(941906),c=a(408139),u=a(555452),f=a(548360),h=a(667294),p=n(a(156720)),m=n(a(859312)),g=a(587550),x=a(735461),v=n(a(290886)),_=n(a(174570)),b=n(a(158654)),C=n(a(811858)),M=n(a(973307)),j=a(860263),S=a(341908),E=a(118146),T=a(785893);const k={roundedThumb:{marginEnd:"bugiwsl0",overflowX:"gfz4du6o",overflowY:"r7fjleex",borderTopStartRadius:"bbr44loe",borderTopEndRadius:"ooj5yc5b",borderBottomEndRadius:"m8i16etx",borderBottomStartRadius:"cw0ivh8j"}};function y(e){return!!(0,c.isMediaGalleryFixEnabled)()||(!(0,l.isMDBackend)()||(0,S.hasThumbnail)(e.mediaData))}},811858:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{msg:t,hoverEvent:a,selectable:n,onMessageSelect:m,theme:g,className:x,selectedMessages:v}=e,[_,b]=(0,l.useState)((()=>!(!v||!v.isSelected(t)))),C=(0,l.useRef)(null);(0,r.useListener)(v,t.id.toString(),(e=>{v&&_!==e&&b(e)}));const M=t.mediaData,j=M.type===d.default.TYPE.IMAGE&&M.renderableUrl?e=>{e.nativeEvent.dataTransfer.setData("text/uri-list",t.mediaData.renderableUrl)}:null,S=(0,o.default)(x);return(0,p.jsx)(u.MediaThumb,{classes:S,onClick:e=>{if(n&&m)return void m(t,!_);if(M.mediaStage===f.MEDIA_DATA_STAGE.ERROR_MISSING)return void s.ModalManager.open((0,p.jsx)(c.default,{msg:t}));let a;e&&e.stopPropagation();const o=t.id;if(M.isGif||M.type===d.default.TYPE.IMAGE){const e=C.current;a=t=>o.equals(t)&&e?e:null}i.Cmd.mediaViewerModal({msg:(0,h.unproxy)(t),getZoomNode:a})},hoverEvent:a,selectable:n,selected:_,onMessageSelect:m,onDragStart:j,msg:t,theme:g,imgRef:e=>{C.current=e},aspectRatio:e.aspectRatio})};var i=a(781572),s=a(914597),o=n(a(294184)),l=a(667294),r=a(587550),d=n(a(502320)),c=n(a(320668)),u=a(341908),f=a(58668),h=a(118146),p=a(785893)},973307:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.jsx)("div",{className:(0,s.default)(l.container,i.isOSMac&&l.fontWeight500),children:e.children})};var i=a(377144),s=n(a(156720)),o=a(785893);const l={container:{width:"ee0xuasv",marginTop:"opp68qpq",marginEnd:"jnwc1y2a",marginBottom:"brac1wpa",marginStart:"svoq16ka",fontSize:"ovllcyds",color:"mfzfak1c",textTransform:"ofejerhi","@media (max-width: 1024px)":{width:"ndsmr6pb"},"@media (max-width: 800px)":{width:"btsmn2h9"}},fontWeight500:{fontWeight:"hnx8ox4h"}}},341908:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.MediaThumb=function(e){var t;const{msg:a,selectable:n,theme:p,active:A,imgRef:w,containerRef:N,onMessageSelect:I,selected:D=!1,onClick:R,onDragStart:O,preferPreview:L}=e,G=(0,l.default)(),B=(0,o.useRef)(null),F=(0,o.useRef)(null),U=(0,o.useRef)(null),[V,H]=(0,o.useState)(!1),[q,Y]=(0,o.useState)(null);(0,d.useModelValues)(a,["isKept","star"]),(0,r.useListener)(a.mediaData,["change:preview","change:mediaStage"],G);(0,o.useEffect)((()=>(null==w||w(B.current),null==N||N(F.current),null==a.mediaData.preview&&null==a.mediaData.fullPreviewData&&(a.mediaData.type!==m.default.TYPE.IMAGE&&a.mediaData.type!==m.default.TYPE.VIDEO||a.downloadMedia({downloadEvenIfExpensive:!1,isUserInitiated:!1,rmrReason:j.default.WEBC_RMR_REASON_CODE.MEDIA_VIEWER})),()=>{null==w||w(null),null==N||N(null)})),[]),(0,o.useEffect)((()=>{null==w||w(B.current),null==N||N(F.current)}),[w,N,B,F]);const W=()=>{I&&I(a,!D)},z=()=>{V||H(!0)},K=t=>{if(!0!==e.showTooltip||"viewerFlowTransparent"===p||!(t instanceof HTMLElement))return null;const n=t.offsetWidth;return{menu:(0,k.jsx)(C.default,{msg:a}),anchor:t,dirY:f.DirY.TOP,dirX:f.DirX.CENTER,offsetX:!0===A?.5*-n*.13:0,type:f.MenuType.Tooltip}},[X,Z]=(0,c.useTimeout)((()=>{var e;U.current&&(e=U.current,Y(K(e)))}),500),Q=e=>{var t;V||(e.persist(),H(!0),t=e.target,U.current=t,X())},$=()=>{V&&(Z(),H(!1),Y(null))},J=function(e){const{mediaStage:t,preview:a,fullPreviewData:n}=e;switch(t){case M.MEDIA_DATA_STAGE.RESOLVED:case M.MEDIA_DATA_STAGE.PROGRESSIVE_READY:case M.MEDIA_DATA_STAGE.EXISTS:return y.Ready;case M.MEDIA_DATA_STAGE.INIT:return null!=a||null!=n?y.Ready:y.Loading;case M.MEDIA_DATA_STAGE.REMOTE_NEED_UPLOAD:case M.MEDIA_DATA_STAGE.NEED_UPLOAD:return y.NeedsUpload;case M.MEDIA_DATA_STAGE.FETCHING:case M.MEDIA_DATA_STAGE.DECRYPTING:case M.MEDIA_DATA_STAGE.PREPARING:case M.MEDIA_DATA_STAGE.UPLOADING:case M.MEDIA_DATA_STAGE.SENDING:case M.MEDIA_DATA_STAGE.REMOTE_UPLOADING:case M.MEDIA_DATA_STAGE.FINALIZING:case M.MEDIA_DATA_STAGE.REUPLOADING:return y.Loading;case M.MEDIA_DATA_STAGE.NEED_POKE:return y.NeedsPoke;case M.MEDIA_DATA_STAGE.ERROR_FILE_NOT_READABLE:case M.MEDIA_DATA_STAGE.ERROR_MISSING:case M.MEDIA_DATA_STAGE.ERROR_TOO_LARGE:case M.MEDIA_DATA_STAGE.ERROR_UNSUPPORTED:return y.Error}}(a.mediaData);let ee;(!0===n||V&&e.hoverEvent)&&(ee=(0,k.jsxs)("div",{className:x.default.mediaSelect,children:[(0,k.jsx)("div",{className:(0,s.default)(x.default.shadeTop,{[x.default.noPointerEvents]:J!==y.Ready}),onClick:e.onClick}),(0,k.jsx)(u.default,{onChange:W,hover:V,checked:D})]}));const te=(0,s.default)(e.classes,x.default.canvasComponent,{[x.default.canvasSelected]:D,[x.default.mediaGalleryThumbnail]:"hideableSecondRow"!==p,[x.default.chatInfoDrawerThumbnail]:"hideableSecondRow"===p,[x.default.canvasSecondRow]:"hideableSecondRow"===p,[x.default.viewerFlow]:"viewerFlow"===p||"viewerFlowTransparent"===p,[x.default.viewerFlowTransparent]:"viewerFlowTransparent"===p,[x.default.active]:A}),ae=Boolean((0,h.isKeepInChatReadEnabled)()&&a.isKept),ne=a.star&&!ae?(0,k.jsx)("div",{className:x.default.iconStar,children:(0,k.jsx)(S.default,{name:"star",width:16,height:15})}):null,ie=ae?(0,k.jsx)("div",{className:x.default.iconKeep,children:(0,k.jsx)(S.default,{name:"keep-in-chat",width:16,height:15})}):null,se=P(a.mediaData),oe=q?(0,k.jsx)(E.UIE,{displayName:"MediaThumbTitle",popable:!0,escapable:!0,requestDismiss:()=>{Y(null)},requestRecentFocusOnUnmount:!1,children:(0,k.jsx)(T.default,{tooltip:q})}):null,le={paddingTop:1/(null!==(t=e.aspectRatio)&&void 0!==t?t:1)*100+"%"},re=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];a.downloadMedia({downloadEvenIfExpensive:e,isUserInitiated:!1,rmrReason:j.default.WEBC_RMR_REASON_CODE.MEDIA_VIEWER})};if((0,i.isMediaGalleryFixEnabled)()){let t;switch(J){case y.Loading:t=(0,k.jsx)(b.MediaThumbLoading,{mediaType:a.mediaData.type});break;case y.NeedsPoke:t=(0,k.jsx)(b.MediaThumbNeedsPoke,{onClick:()=>re(!0)});break;case y.Error:t=(0,k.jsx)(b.MediaThumbError,{onClick:e.onClick,mediaType:a.mediaData.type});break;case y.NeedsUpload:case y.Ready:t=null}return(0,k.jsxs)("div",{ref:F,className:te,"data-testid":"media-canvas",onMouseOver:z,onMouseEnter:Q,onMouseLeave:$,children:[ee,(0,k.jsxs)("div",{className:x.default.canvasBody,children:[(0,k.jsx)(_.default,{mediaData:a.mediaData}),(0,k.jsx)(v.default,{mediaData:a.mediaData,selected:D}),ne,ie]}),(0,k.jsx)(g.default,{downloadMedia:re,onClick:R,onDragStart:O,preferPreview:L,ref:B,msg:a}),oe,t,(0,k.jsx)("div",{style:le})]})}return se?(0,k.jsxs)("div",{ref:F,className:te,"data-testid":"media-canvas",onMouseOver:z,onMouseEnter:Q,onMouseLeave:$,children:[ee,(0,k.jsxs)("div",{className:x.default.canvasBody,children:[(0,k.jsx)(_.default,{mediaData:a.mediaData}),(0,k.jsx)(v.default,{mediaData:a.mediaData,selected:D}),ne,ie]}),(0,k.jsx)(g.default,{downloadMedia:re,onClick:R,onDragStart:O,preferPreview:L,ref:B,msg:a}),oe,(0,k.jsx)("div",{style:le})]}):null},t.hasThumbnail=P;var i=a(408139),s=n(a(294184)),o=a(667294),l=n(a(859312)),r=a(587550),d=a(735461),c=a(346428),u=n(a(309275)),f=a(160811),h=a(529805),p=a(284866),m=n(a(502320)),g=n(a(797665)),x=n(a(52901)),v=n(a(305471)),_=n(a(319395)),b=a(990423),C=n(a(708488)),M=a(58668),j=n(a(11339)),S=n(a(23217)),E=a(718644),T=n(a(146780)),k=a(785893);const y=a(76672).Mirrored(["Loading","Ready","Error","NeedsPoke","NeedsUpload"]);function P(e){if((0,i.isMediaGalleryFixEnabled)())return!0;switch(e.type){case m.default.TYPE.VIDEO:case m.default.TYPE.IMAGE:if(null!=e.preview||null!=e.fullPreviewData||e.mediaStage===M.MEDIA_DATA_STAGE.RESOLVED)return!0;if(p.MediaBlobCache.has(e.filehash)){try{p.MediaBlobCache.getOrCreateURL(e.filehash)}catch(e){return!1}return!0}return!1;default:return!0}}},797665:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(81109)),s=n(a(294184)),o=a(667294),l=n(a(502320)),r=n(a(565383)),d=a(58668),c=n(a(220553)),u=n(a(534949)),f=a(785893);const h=(0,o.forwardRef)(((e,t)=>{let{children:a,className:n,shade:i,url:s,onClick:o,onDragStart:l}=e;const d=!0===i?(0,f.jsx)("div",{className:r.default.shade}):null,c=null!=s&&""!==s?{backgroundImage:`url(${s})`}:null;return(0,f.jsxs)("div",{className:n,"data-testid":"media-canvas-img",style:c,onClick:o,ref:t,onDragStart:l,draggable:null!=l||null,children:[a,d]})})),p=(0,o.forwardRef)(((e,t)=>{let{mediaData:a,onClick:n,onDragStart:i,shade:o,shouldApplyBlur:l,url:d}=e;return(0,f.jsx)(h,{ref:t,onClick:n,onDragStart:i,className:(0,s.default)(r.default.mediaCanvas,{[r.default.blur]:l}),shade:o,url:a.preview instanceof u.default?a.preview.url():null,children:null!=d?(0,f.jsx)("div",{className:r.default.mediaCanvas,style:{backgroundImage:`url(${d})`}}):null})}));p.displayName="ImageThumb";const m=(0,o.forwardRef)(((e,t)=>{let{mediaData:a,onClick:n,onDragStart:i,shade:s,shouldApplyBlur:o,url:l}=e;return null!=a.preview?(0,f.jsx)(p,{ref:t,onClick:n,onDragStart:i,mediaData:a}):(0,f.jsx)(h,{ref:t,onClick:n,onDragStart:i,className:r.default.mediaCanvas,shade:s})}));m.displayName="Placeholder";var g=(0,o.forwardRef)(((e,t)=>{let{downloadMedia:a,msg:n,onClick:o,onDragStart:g,preferPreview:x}=e;const{mediaData:v}=n,_={onClick:o,onDragStart:g,ref:t};switch(v.type){case l.default.TYPE.AUDIO:return(0,f.jsx)(h,(0,i.default)((0,i.default)({},_),{},{className:`${r.default.mediaCanvas} attach-media-audio-thumb`}));case l.default.TYPE.VIDEO:{var b;const e=null==v.fullPreviewData,t=null!==(b=v.fullPreviewData)&&void 0!==b?b:v.preview;return(0,f.jsx)(h,(0,i.default)((0,i.default)({},_),{},{className:(0,s.default)(r.default.mediaCanvas,{"media-video-thumb":v.isGif&&!v.preview,[r.default.blur]:e}),shade:!0,url:t instanceof u.default?t.url():null}))}case l.default.TYPE.IMAGE:const e=null!=v.preview&&v.mediaStage===d.MEDIA_DATA_STAGE.NEED_POKE;return!0===x?(0,f.jsx)(m,(0,i.default)((0,i.default)({},_),{},{mediaData:v,shade:n.star,shouldApplyBlur:e})):(0,f.jsx)("div",{className:r.default.mediaCanvas,children:(0,f.jsx)(c.default,{mediaData:v,placeholderRenderer:()=>(0,f.jsx)(m,(0,i.default)((0,i.default)({},_),{},{mediaData:v,shade:n.star,shouldApplyBlur:e})),renderProgressively:!0,downloadMedia:a,children:t=>(0,f.jsx)(p,(0,i.default)((0,i.default)({},_),{},{mediaData:v,shade:n.star,shouldApplyBlur:e,url:t}))})});default:return(0,f.jsx)(h,(0,i.default)((0,i.default)({},_),{},{shade:n.star}))}}));t.default=g},305471:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{selected:t,mediaData:a}=e;switch(a.type){case o.default.TYPE.AUDIO:return(0,r.jsx)(d,{duration:a.duration,selected:t});case o.default.TYPE.VIDEO:return a.isGif?null:(0,r.jsx)(d,{duration:a.duration,selected:t});default:return null}};var i=a(40234),s=n(a(294184)),o=n(a(502320)),l=n(a(354963)),r=a(785893);function d(e){let{duration:t,selected:a}=e;const n=i.Clock.durationStr(t);return n?(0,r.jsx)("span",{className:(0,s.default)(l.default.container,{[l.default.selected]:a}),children:n}):null}},319395:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{mediaData:t}=e;if(!t)return null;const a=function(e){switch(e.type){case s.default.TYPE.AUDIO:return"msg-audio";case s.default.TYPE.VIDEO:return e.isGif?"msg-gif":"msg-video";default:return null}}(t);return null==a?null:(0,l.jsx)("div",{className:(0,i.default)(r),children:(0,l.jsx)(o.default,{name:a})})};var i=n(a(156720)),s=n(a(502320)),o=n(a(23217)),l=a(785893);const r={position:"lhggkp7q",bottom:"lrw9n60e",start:"qzp46edm",color:"k17s6i4e",pointerEvents:"m62443ks"}},990423:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.MediaThumbError=function(e){return(0,l.jsx)("button",{className:(0,i.default)(r),onClick:e.onClick,children:(0,l.jsx)(c,{mediaType:e.mediaType})})},t.MediaThumbLoading=function(e){return(0,l.jsx)("div",{className:(0,i.default)(r),children:(0,l.jsx)(c,{mediaType:e.mediaType})})},t.MediaThumbNeedsPoke=function(e){return(0,l.jsx)("div",{className:(0,i.default)(r),children:(0,l.jsx)(s.Download,{onClick:e.onClick})})};var i=n(a(156720)),s=a(341124),o=n(a(23217)),l=a(785893);const r={position:"lhggkp7q",top:"qq0sjtgm",start:"tkdu00h0",zIndex:"jnl3jror",boxSizing:"cm280p3y",display:"p357zi0d",alignItems:"gndfcl4n",justifyContent:"ac2vgrno",width:"ln8gz9je",height:"ppled2lx"},d={color:"cyi0n1nm"};function c(e){const t="video"===e.mediaType?"video-placeholder":"img-placeholder";return(0,l.jsx)(o.default,{name:t,className:(0,i.default)(d)})}},708488:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{msg:{senderObj:{formattedShortName:t}}}=e;return(0,i.jsx)(n.TextSpan,{children:t})};var n=a(113923),i=a(785893)},219593:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(781572),s=a(705177),o=a(941906),l=a(667294),r=n(a(156720)),d=n(a(859312)),c=n(a(290886)),u=a(685600),f=n(a(329796)),h=n(a(335563)),p=a(118146),m=a(785893);const g={display:"p357zi0d",flexDirection:"f8m0rgwh",overflowX:"gfz4du6o",overflowY:"rpvcun8f"};function x(e,t){const{queryBefore:a,hasBefore:n,msgsCollection:x,emptyText:v,scrollOffset:_=0,selectable:b,onMessageSelect:C,queryCollection:M,selectedMessages:j,renderElements:S,onProductDetail:E,setScrollOffset:T}=e,k=(0,d.default)();(0,l.useImperativeHandle)(t,(()=>({forceUpdate:k})));const y=(0,l.useRef)(null),P=e=>{n&&M(e)},A=(0,c.default)((e=>{const t=e.scrollHeight-e.clientHeight-e.scrollTop;n&&t<o.SCROLL_FUDGE&&P(x.head()),T&&T(e.scrollTop)}),100);(0,l.useEffect)((()=>{n&&P();const e=y.current;return e&&(e.scrollTop=_),()=>{A.cancel()}}),[]);const w=(e,t)=>{const a=(0,p.unproxy)(e);b&&void 0!==t?C(a,t):i.Cmd.openChatAt(a.chat,a.chat.getSearchContext(a))},N=S?S(w):x.map(((e,t)=>(0,m.jsx)(h.default,{msg:e,selectable:b,selectedMessages:j,onMessageSelect:C,displayType:s.DISPLAY_TYPE.GALLERY,onClickMsg:w,onProductClick:E},`${e.id.toString()}_${t}`))).reverse();if(a){if(0===N.length)return(0,m.jsx)(u.Loading,{});N.push((0,m.jsx)(f.default,{}))}return 0!==x.length||a||n?(0,m.jsx)("div",{ref:y,onScroll:e=>{A(e.target)},className:(0,r.default)(g),children:N}):(0,m.jsx)(u.Empty,{text:v,a8nText:"no-elements"})}var v=(0,l.forwardRef)(x);t.default=v},103721:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,c.useModelValues)(e.chat,["isGroup","muteExpiration","archive"]),a=(0,c.useModelValues)(e.mute,["isMuted"]),n=(0,c.useModelValues)(e.settings,["showArchiveV2"]),_=e=>{o.Cmd.muteChat((0,m.unproxy)(t),e)},b=()=>{_(!1),r.ModalManager.close()},C=a.isMuted,M=t.muteExpiration;if(t.archive&&(0,l.archiveV2Supported)()&&n.showArchiveV2)return(0,v.jsx)(h.default,{children:(0,v.jsx)(x.TextSpan,{theme:"muted",size:"16",children:d.fbt._("Archived chats are muted",null,{hk:"31ZVD"})})});const j=C?()=>{const e=t.isGroup?p.default.t(207):p.default.t(206);r.ModalManager.open((0,v.jsx)(f.default,{onOK:b,okText:p.default.t(39),onCancel:()=>r.ModalManager.close(),cancelText:d.fbt._("Cancel",null,{hk:"H0gNq"}),children:e}))}:()=>{_(!0)},S=C?p.default.t(701):d.fbt._("Mute notifications",null,{hk:"2Fm15X"});let E;if(C&&M){const e=s.Clock.untilStr(M);E=(0,v.jsx)(x.TextDiv,{theme:"muted",children:e})}const T=(0,v.jsx)(g.default,{checked:C,onChange:j}),k=(0,v.jsx)(x.TextSpan,{theme:"title",children:S});return(0,v.jsx)(u.default,{icon:"settings-notifications",a8nText:i.default.key("block-mute"),side:T,onClick:j,title:k,secondaryTitle:E})};var i=n(a(699964)),s=a(40234),o=a(781572),l=a(408139),r=a(914597),d=a(548360),c=a(735461),u=n(a(575116)),f=n(a(452665)),h=n(a(435721)),p=n(a(914296)),m=a(118146),g=n(a(303271)),x=a(113923),v=a(785893)},799108:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{productMsgs:t,chat:a}=e,n=(0,s.default)(e,v),_=(0,u.useRef)(null);(0,h.useListener)(t,"add remove reset",(()=>{var e;null===(e=_.current)||void 0===e||e.forceUpdate()}));const b=(0,f.default)();(0,h.useListener)(t,"products_loaded",(()=>{b()}));const C=(0,p.default)();let M;if((0,o.isMDBackend)()&&a.endOfHistoryTransferType===l.ConversationEndOfHistoryTransferModelPropType.COMPLETE_BUT_MORE_MESSAGES_REMAIN_ON_PRIMARY||a.endOfHistoryTransferType===l.ConversationEndOfHistoryTransferModelPropType.NOT_INCLUDED_IN_HIST_SYNC){const e=r.Clock.relativeDateStr((0,d.getHistorySyncEarliestDate)());M=(0,x.jsx)(m.default,{theme:"list",secondary:c.fbt._("Use WhatsApp on your phone to see messages from before {date}.",[c.fbt._param("date",e)],{hk:"1jHppk"})})}return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(g.default,(0,i.default)({ref:_,msgsCollection:t,queryCollection:e=>C((()=>{t.queryProducts(a,e)})),hasBefore:t.hasProductBefore,queryBefore:t.hasProductBefore?Promise.resolve():null,emptyText:c.fbt._("No products",null,{hk:"8o7dB"}),chat:a},n)),M]})};var i=n(a(81109)),s=n(a(506479)),o=a(88555),l=a(461957),r=a(40234),d=a(555452),c=a(548360),u=a(667294),f=n(a(859312)),h=a(587550),p=n(a(174570)),m=n(a(158654)),g=n(a(219593)),x=a(785893);const v=["productMsgs","chat"]},638261:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{stickerPackId:t,onStickerPackView:a,stickerPackViewDelay:n}=e,h=function(e){(0,l.useEffect)((()=>{e&&u.StickerPackCollectionMd.fetchStickerPack(e)}),[e]);return(0,r.default)(u.StickerPackCollectionMd,"add remove reset",(()=>null!=e?u.StickerPackCollectionMd.get(e):null))}(t);let p;(0,i.isMDBackend)()&&t&&(p=(0,f.jsx)(d.default,{onClick:e=>{e.stopPropagation(),a&&a(),null!=n?setTimeout((()=>s.Cmd.openStickerPack(t)),n+150):s.Cmd.openStickerPack(t)},type:"secondary",children:o.fbt._("View Pack",null,{hk:"tAlU3"})}));return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(c.StickerDetailsStickerPackInfo,{name:null==h?void 0:h.name,publisher:null==h?void 0:h.publisher,theme:c.Theme.MediaViewer}),p]})};var i=a(88555),s=a(781572),o=a(548360),l=a(667294),r=n(a(196570)),d=n(a(39770)),c=a(610595),u=a(344333),f=a(785893)},16947:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(914597),s=a(548360),o=n(a(452665)),l=a(719380),r=a(965417),d=n(a(832973)),c=n(a(914296)),u=a(389389),f=a(756728),h=a(218963),p=a(785893);class m extends d.default{constructor(){super(...arguments),this._isGroupParticipant=e=>{var t;const{chat:a}=this.props;return!!(null===(t=a.groupMetadata)||void 0===t?void 0:t.participants.get(e.id))},this.customSecondaryText=e=>{var t;const{chat:a}=this.props;return(null===(t=a.groupMetadata)||void 0===t?void 0:t.participants.get(e))?s.fbt._("Already added to group",null,{hk:"4hdDHF"}).toString():null},this.contactFilter=e=>{const t=this.props.chat.groupMetadata;return!!l.ContactCollection.isFilteredContact(e)&&(!(null==t?void 0:t.participants.get(e.id))||s.fbt._("Already added to group",null,{hk:"4hdDHF"}).toString())},this.confirmAddParticipant=e=>{const{chat:t}=this.props;this.push((0,p.jsx)(o.default,{onOK:this._handleAddParticipant.bind(this,e),okText:s.fbt._({"*":"Add participants",_1:"Add participant"},[s.fbt._plural(e.length)],{hk:"4pSXvk"}),onCancel:this._pop,cancelText:s.fbt._("Cancel",null,{hk:"H0gNq"}),children:(0,p.jsx)(r.EmojiText,{text:this._makeNameEnumeration(e,t.contact.name)})}))},this._makeNameEnumeration=(e,t)=>{const a=e.map((e=>e.formattedShortName||e.shortName)).reduce(((t,a,n)=>[...t,a,n!==e.length-1&&c.default.t(257)||""]),[]);return c.default.t(193,{participants:a.join(""),subject:t})},this._handleAddParticipant=e=>{(0,u.addParticipants)(this.props.chat,e).catch((()=>{})),i.ModalManager.close()},this._pop=()=>{this.pop()}}componentDidMount(){this.push((0,p.jsx)(f.SelectModal,{onConfirm:this.confirmAddParticipant,filter:this.contactFilter,title:s.fbt._("Add participant",null,{hk:"48ECfz"}),isDisabled:this._isGroupParticipant,isSelected:this._isGroupParticipant,customSecondaryText:this.customSecondaryText,listType:f.ListType.PARTICIPANT_MANAGE_MODAL,singleSelectionFooterType:h.FooterType.CONFIRM,multipleSelectionFooterType:h.FooterType.CONFIRM,shouldShowSelectionSummary:!1}))}}t.default=m},442237:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const[e,t]=(0,i.useFlow)(d.Chats);if(null==t.step)return null;let a;switch(t.step){case d.Chats:a=(0,r.jsx)(o.default,{settings:l.default,showSettings:()=>{t.push(d.Settings)},onClose:()=>{t.pop()}});break;case d.Settings:a=(0,r.jsx)(s.default,{settings:l.default,onClose:()=>{t.pop()}})}return(0,r.jsx)(e,{flow:t,children:a})};var i=a(159083),s=n(a(462921)),o=n(a(923297)),l=n(a(268132)),r=a(785893);const d=a(76672).Mirrored(["Chats","Settings"])},890727:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(348926)),s=a(548360),o=a(667294),l=a(493581),r=a(227105),d=a(983657),c=n(a(60453)),u=n(a(69637)),f=a(994790),h=n(a(832973)),p=a(785893);class m extends h.default{componentDidMount(){this.push((0,p.jsx)(g,{contactId:this.props.contactId,onClose:this.pop}))}}function g(e){const{contactId:t}=e,[a,n]=(0,o.useState)(void 0),[h,m]=(0,o.useState)(!0);(0,o.useEffect)((()=>{(function(){var e=(0,i.default)((function*(){const e=yield l.BusinessProfileCollection.update(t,{getMerchantCompliance:!0}),a=(Array.isArray(e)?e[0]:e).serialize();a?(n(a.legalEntityDetails||void 0),m(!1)):__LOG__(3)`compliance: cannot fetch business details (${t.toString()})`}));return function(){return e.apply(this,arguments)}})()()}),[]);const{entityName:g,customerCareDetails:x,grievanceOfficerDetails:v}=null!=a?a:{},_=(0,d.getEntityTypeText)(a);return(0,p.jsxs)(c.default,{theme:"striped",children:[(0,p.jsx)(f.DrawerHeader,{title:s.fbt._("Business details",null,{hk:"m9xzp"}),type:f.DRAWER_HEADER_TYPE.SMALL,onCancel:e.onClose}),(0,p.jsx)(u.default,{theme:h?"center-content":void 0,children:h?(0,p.jsx)(r.ComplianceInfoLoading,{}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(r.ComplianceInfoGroup,{children:[(0,p.jsx)(r.ComplianceInfoPrimitiveField,{value:g,label:s.fbt._("Legal Name of Business",null,{hk:"2s9jD"})}),(0,p.jsx)(r.ComplianceInfoPrimitiveField,{value:_,label:s.fbt._("Business Type",null,{hk:"48J73B"})})]}),(0,p.jsxs)(r.ComplianceInfoGroup,{title:s.fbt._("Customer Care Information",null,{hk:"qlYos"}),children:[(0,p.jsx)(r.ComplianceInfoPrimitiveField,{value:null==x?void 0:x.mobileNumber,label:s.fbt._("Mobile Phone Number",null,{hk:"PMTTg"}),forceLTR:!0}),(0,p.jsx)(r.ComplianceInfoPrimitiveField,{value:null==x?void 0:x.landlineNumber,label:s.fbt._("Landline Phone Number",null,{hk:"tXYaf"}),forceLTR:!0}),(0,p.jsx)(r.ComplianceInfoPrimitiveField,{value:null==x?void 0:x.email,label:s.fbt._("Email Address",null,{hk:"2jYxR1"})})]}),(0,p.jsxs)(r.ComplianceInfoGroup,{title:s.fbt._("Grievance Officer Information",null,{hk:"3emd7I"}),children:[(0,p.jsx)(r.ComplianceInfoPrimitiveField,{value:null==v?void 0:v.name,label:s.fbt._("Name",null,{hk:"2vEs6r"})}),(0,p.jsx)(r.ComplianceInfoPrimitiveField,{value:null==v?void 0:v.mobileNumber,label:s.fbt._("Mobile Phone Number",null,{hk:"3kk5I"}),forceLTR:!0}),(0,p.jsx)(r.ComplianceInfoPrimitiveField,{value:null==v?void 0:v.landlineNumber,label:s.fbt._("Landline Phone Number",null,{hk:"4GBzF0"})}),(0,p.jsx)(r.ComplianceInfoPrimitiveField,{value:null==v?void 0:v.email,label:s.fbt._("Email Address",null,{hk:"3SvbLl"})})]})]})})]},"merchant-details-modal")}t.default=m},704782:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(81109)),s=a(88555),o=a(173679),l=a(781572),r=a(141455),d=a(408139),c=a(665397),u=a(237042),f=n(a(574328)),h=n(a(7532)),p=n(a(54414)),m=a(919829),g=n(a(896464)),x=n(a(537380)),v=a(362632),_=n(a(443250)),b=a(427394),C=n(a(130305)),M=n(a(832973)),j=n(a(748204)),S=a(388280),E=a(755800),T=n(a(669824)),k=n(a(181871)),y=a(274429),P=a(277975),A=a(308059),w=n(a(11339)),N=a(397567),I=a(409153),D=n(a(170107)),R=a(679188),O=n(a(754050)),L=a(11395),G=n(a(277776)),B=a(574028),F=n(a(756829)),U=a(682364),V=a(349376),H=a(785893);class q extends M.default{constructor(){super(...arguments),this._scrollOffset=0,this._setScrollOffset=e=>{this._scrollOffset=e},this._handleProductDetail=(e,t)=>{const{chat:a}=this.props,n=(0,H.jsx)(D.default,{chat:a,collectionId:t,product:e,onEnd:this._end,onBack:this._popAndUpdate,refreshCarousel:!1,onProductLinkClick:this._handleProductLinkClick,onProductMoreInformation:this._handleProductMoreInformation,onCartClick:this._handleCartClick});this.push(n)},this._handleProductDetailFromInfo=e=>{const t=(0,H.jsx)(R.ProductDetailsWithDeepLink,{chat:this.props.chat,productInfo:e,onEnd:this._end,onBack:this._pop,onProductDetail:this._handleProductDetail,onProductCatalog:this._handleProductCatalogHeaderClick,onProductLinkClick:this._handleProductLinkClick,onProductMoreInformation:this._handleProductMoreInformation,onCartClick:this._handleCartClick});this.push(t)},this._handleCollectionSeeAll=e=>{const t=this.props.chat.id;this.push((0,H.jsx)(m.CollectionContentDrawer,{contact:this.props.chat.contact,onProductDetail:this._handleProductDetail,catalogId:t,onBack:this._pop,onCatalogLinkClick:this._handleCatalogLinkClick,onCartClick:this._handleCartClick,collection:e}))},this._handleProductLinkClick=e=>{this.push((0,H.jsx)(O.default,{product:e,onBack:this._pop}))},this._handleProductMoreInformation=e=>{const t=(0,H.jsx)(G.default,{product:e,onBack:this._popAndUpdate});this.push(t)},this._handleCatalogLinkClick=(e,t)=>{this.push((0,H.jsx)(h.default,{catalog:e,contact:t,onBack:this._pop}))},this._handleCartClick=e=>{const t=(0,N.getProductCatalogContext)(this.props.context),a=(0,F.default)(e,this.props.chat,t);a&&this.push(a)},this.pushProductCatalog=()=>{const{chat:e}=this.props,t=(0,d.canViewCollections)()?(0,H.jsx)(p.default,{contact:e.contact,onProductDetail:this._handleProductDetail,catalogId:e.id,onBack:this._pop,businessProfile:e.contact.businessProfile,onCatalogLinkClick:this._handleCatalogLinkClick,onCartClick:this._handleCartClick,onCollectionSeeAll:this._handleCollectionSeeAll}):(0,H.jsx)(L.ProductListDrawer,{contact:e.contact,onProductDetail:this._handleProductDetail,catalogId:e.id,onBack:this._pop,businessProfile:e.contact.businessProfile,onCatalogLinkClick:this._handleCatalogLinkClick,onCartClick:this._handleCartClick});this.push(t)},this._handleProductCatalog=(e,t)=>{const a=this.props.chat.id;(0,d.canViewCollections)()&&u.QPL.markerStart(c.QuickLogMarkerId.WHATSAPP_CATALOG_COLLECTIONS_VIEW,{annotations:{string:{EntryPoint:t}}}),(0,P.logCarouselViewMoreClick)({catalogOwnerWid:a,catalogContext:e}),this.pushProductCatalog(a)},this._handleProductCatalogHeaderClick=(e,t)=>{(0,P.logCarouselViewMoreClick)({catalogOwnerWid:e,catalogContext:t}),this._handleProductCatalog(t,"ProductCatalogHeader")},this._handleStarred=()=>{const e=(0,H.jsx)(U.StarredDrawerLoadable,{chat:this.props.chat,starredMsgs:this.props.chat.getStarredMsgs(),onClose:this._pop});this.push(e)},this._handleKept=()=>{this.push((0,H.jsx)(k.default,{chat:this.props.chat,keptMsgs:this.props.chat.getKeptMsgs(),onClose:this._pop}))},this._handleAdminSetting=()=>{const{chat:e}=this.props,t=(0,H.jsx)(T.default,{chat:e,groupMetadata:e.groupMetadata,onClose:this._pop});this.push(t)},this._handleContactCard=()=>{this.push((0,H.jsx)(g.default,{chat:this.props.chat,onClose:this._pop}))},this._handleMediaGallery=()=>{const e=(0,H.jsx)(A.MediaGalleryDrawer,{chat:this.props.chat,onBack:this._pop,onProductDetail:this._handleProductDetail,setProductsScrollOffset:this._setScrollOffset});this.push(e)},this._handleGroupInviteLink=()=>{const{chat:e}=this.props;if((0,o.isInviteGrowthLockedGroup)(e)){var t;const a=!!(null===(t=e.groupMetadata)||void 0===t?void 0:t.participants.iAmAdmin());return void(0,E.openGrowthLockedModal)(a,!0)}const a=(0,H.jsx)(S.GroupInviteLinkDrawerLoadable,{chat:this.props.chat,groupMetadata:e.groupMetadata,onBack:this._pop});this.push(a)},this._pop=()=>{this.pop()},this._popAndUpdate=()=>{this.popAndUpdate({initialTab:A.TABS.PRODUCTS,productsScrollOffset:this._scrollOffset})},this._end=()=>{this.end(!0)},this._handleVerification=e=>{const t=e||this.props.chat.contact,a=(0,H.jsx)(V.VerificationDrawerLoadable,{contact:t,onClose:this._pop,isFirstLevel:!1});this.push(a)},this._handleLiveLocation=()=>{const e=(0,H.jsx)(y.LiveLocationDrawerLoadable,{chat:this.props.chat,onClose:this._pop});this.push(e)},this._handleDDMSettingsClick=e=>{this.push((0,H.jsx)(_.default,{onClose:this._pop,entryPoint:e}))},this._handleEphemeral=()=>{const{chat:e}=this.props,t=e.isGroup?w.default.DISAPPEARING_MODE_ENTRY_POINT_TYPE.GROUP_CHAT_DISAPPEARING_MESSAGES_SETTING:w.default.DISAPPEARING_MODE_ENTRY_POINT_TYPE.INDIVIDUAL_CHAT_DISAPPEARING_MESSAGES_SETTING,a=(0,H.jsx)(C.default,{chat:e,showNux:!1,entryPoint:w.default.EPHEMERAL_SETTING_ENTRY_POINT_TYPE.CHAT_INFO,onClose:this._pop,onDDMSettingsClick:()=>this._handleDDMSettingsClick(t)});this.push(a)},this._handleCommunityClick=()=>{var e;const t=null===(e=this.props.chat.groupMetadata)||void 0===e?void 0:e.parentGroup;t&&l.Cmd.communityHome(t,!0)}}componentDidMount(){const e=this._handleStarred,t=this._handleMediaGallery,a=this.props.chat;a.isGroup?((0,s.isMDBackend)()&&(0,B.queryAndUpdateGroupMetadataById)(a.id,"interactive"),this.push((0,H.jsx)(j.default,{chat:a,showFullGroupDescription:this.props.showFullGroupDescription,scrollToParticipantList:this.props.scrollToParticipantList,groupMetadata:a.groupMetadata,contact:a.contact,profilePicThumb:a.contact.getProfilePicThumb(),onVerification:this._handleVerification,onStarred:e,onKept:this._handleKept,onMediaGallery:t,onAdminSetting:this._handleAdminSetting,onGroupInviteLink:this._handleGroupInviteLink,onLiveLocation:this._handleLiveLocation,onEphemeral:this._handleEphemeral,onCommunityClick:this._handleCommunityClick,onClose:this._pop}))):a.isBroadcast?this.push((0,H.jsx)(f.default,{chat:a,contact:a.contact,onStarred:e,onMediaGallery:t,onClose:this._pop})):a.isUser&&(a.contact.isBusiness&&(0,d.canSeeBizProfileV3)()&&r.DrawerManager.setDrawerContext("right",(0,N.buildProductCatalogContext)(new I.ProductCatalogSession,(0,v.getMaybeBizPlatformForLogging)(a.contact.id.toString()),w.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_PROFILE)),this.push((0,H.jsx)(x.default,{contact:a.contact,onVerification:this._handleVerification,onStarred:e,onKept:this._handleKept,onContactCard:this._handleContactCard,onMediaGallery:t,onProductCatalog:this._handleProductCatalog,onProductDetail:this._handleProductDetail,onLiveLocation:this._handleLiveLocation,onEphemeral:this._handleEphemeral,onClose:this._pop,profileEntryPoint:this.props.profileEntryPoint})))}}t.default=e=>(0,H.jsx)(b.DrawerContext.Consumer,{children:t=>(0,H.jsx)(q,(0,i.default)({context:t},e))})},312642:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const{msg:a,highlightedMsgIds:n}=e,w=(0,C.default)(),N=(0,b.default)(),I=(0,p.default)(),D=(0,m.default)((()=>a.type===u.MSG_TYPE.IMAGE?new y.default.UiAction({uiActionType:y.default.UI_ACTION_TYPE.IMAGE_OPEN,uiActionPreloaded:a.mediaData.mediaStage===E.MEDIA_DATA_STAGE.RESOLVED}):null)),R=(0,m.default)((()=>(0,l.constructMediaMsgs)(a.chat,a))),O=R.current.length,L=(0,x.default)(O),G=(0,h.useRef)(null),B=(0,h.useRef)(),F=(0,h.useRef)(),U=(0,h.useRef)(null),V=(0,h.useRef)(null),H=(0,h.useRef)(null),[q,Y]=(0,h.useState)(a),[W,z]=(0,h.useState)(!1),[K,X]=(0,h.useState)(!0),Z=(0,x.default)(q),Q=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=V.current,a=H.current,n=U.current;if(!t||!a||!n)return;let i=0;n instanceof HTMLElement&&(i=n.clientWidth/2-t.clientWidth/2),(0,f.default)(a,"stop");let s=0;e&&(s=300),(0,f.default)(n,"scroll",{duration:s,container:a,offset:i,axis:"x",easing:[.1,.82,.25,1]})},$=e=>{if(!e)return!0;const{isViewOnce:t,isStickerMsg:a}=e;return!t&&!a};(0,h.useEffect)((()=>{var e;Q(),$(a)&&(e=V.current)&&(0,f.default)(e,{opacity:[1,0],translateY:["0%","100%"]},{duration:300,delay:100,easing:[.1,.82,.25,1]}).then((()=>{w.aborted||X(!1)}))}),[]),(0,h.useEffect)((()=>{(0,d.isMediaGalleryFixEnabled)()&&O>(null!=L?L:0)&&Q()}));const J=e=>{N((()=>{R.current.loadMoreAroundIfNeeded(e)})),Y(e)},ee=e=>{if(e&&e.stopPropagation(),W)return;const t=q;if(!t)return;let n=null;for(n=R.current.getAfter(t);(null===(i=n)||void 0===i?void 0:i.mediaData)&&!(0,S.hasThumbnail)(n.mediaData);){var i;n=R.current.getAfter(n)}n?J(n):R.current.hasMediaAfter&&(B.current||(B.current=R.current.queryMedia({chat:a.chat,msg:a,direction:"after"}).then((e=>{w.aborted||"number"==typeof e.length&&e.length>0&&q===a&&ee()})).catch((()=>{__LOG__(3)`query media msgs error: `})).finally((()=>{B.current=null}))))},te=e=>{if(e&&e.stopPropagation(),W)return;const t=q;if(!t)return;let n=null;for(n=R.current.getBefore(t);(null===(i=n)||void 0===i?void 0:i.mediaData)&&!(0,S.hasThumbnail)(n.mediaData);){var i;n=R.current.getBefore(n)}n?J(n):R.current.hasMediaBefore&&(F.current||(F.current=R.current.queryMedia({chat:a.chat,msg:a,direction:"before"}).then((e=>{w.aborted||"number"==typeof e.length&&e.length>0&&q===a&&te()})).catch((()=>{__LOG__(3)`query media msgs error: `})).finally((()=>{F.current=null}))))};let ae=null;a.type===u.MSG_TYPE.IMAGE&&(ae=()=>{const e=D.current;var t;e&&(Object.assign(e,(0,M.getGroupCountMetricsFromChatWid)(null===(t=a.chat)||void 0===t?void 0:t.id)),e.markUiActionT(),e.commit(),D.current=null);(0,P.logUiActionShadowPrivateStatsTestEvents)()});const ne=()=>{c.ModalManager.closeMedia()},ie=(0,v.default)((()=>{Y(null),ne()})),se=(null==q?void 0:q.isViewOnce)||(null==q?void 0:q.isStickerMsg);(0,g.useListener)(se?q:null,"revoked",ie);const oe=se?null:R.current;(0,g.useListener)(oe,"remove",((e,t,n)=>{const i=R.current,o=q;if(i.includes(a)||null!=o&&null!=o.id&&o.id.toString()!==e.id.toString())return void I();const l=n.index;0===i.length?ne():i.length===l?J((0,s.default)(i.at(l-1),"mediaMsgs.at(index - 1)")):J((0,s.default)(i.at(l),"mediaMsgs.at(index)"))})),(0,g.useListener)(oe,"reset",(()=>{ne()})),(0,g.useListener)(oe,"query_media_after",(()=>{I()})),(0,g.useListener)(oe,"query_media_before",(()=>{const e=H.current;e&&(G.current=e.scrollWidth,e instanceof HTMLElement&&I())})),(0,g.useListener)(window,"keydown",(e=>{if(e.defaultPrevented)return;const t=j.default.isRTL();e.keyCode===i.default.LEFT?t?ee():te():e.keyCode===i.default.RIGHT&&(t?te():ee())})),(0,h.useEffect)((()=>{N((()=>{q&&R.current.loadMoreAroundIfNeeded(q)}))}),[q,R,N]),(0,h.useEffect)((()=>{if(Z!==q)Q(!0);else{const e=H.current;if(!e||null==G.current||0===G.current)return;e instanceof HTMLElement&&(e.scrollLeft+=e.scrollWidth-G.current),G.current=null}}),[q,Z]);const le=(0,_.default)(((e,t,a)=>{if(0!==t.length&&null!=a){if(t.hasMediaBefore&&a<e.clientWidth){const e=(0,s.default)(t.head(),"mediaMsgs.head()");N((()=>{t.queryMedia({chat:e.chat,msg:e}),I()}))}if(t.hasMediaAfter&&a+r.SCROLL_FUDGE>e.scrollWidth-2*e.clientWidth){const e=(0,s.default)(t.last(),"mediaMsgs.last()");N((()=>{t.queryMedia({chat:e.chat,msg:e,direction:"after"}),I()}))}}}),100);if(!q)return null;const re=R.current,de=re.last(),ce=re.hasMediaAfter||q!==de?ee:null,ue=re.head();let fe=null;fe=re.hasMediaBefore||q!==ue?te:null,(0,o.isMDBackend)()&&(fe=re.hasMediaBefore||q!==ue?te:null);return(0,A.jsxs)("div",{className:W?"img-zoomed-in":null,children:[$(q)&&(0,A.jsx)(k.default,{activeMsg:q,mediaMsgs:R.current,highlightedMsgIds:e.highlightedMsgIds,onSelectThumb:J,onSetActiveThumb:e=>{U.current=e},onScroll:e=>{le(e.currentTarget,R.current,e.currentTarget.scrollLeft)},setRefThumbsContainer:e=>{V.current=e},setRefThumbs:e=>{H.current=e}}),(0,A.jsx)(T.default,{msg:q,mediaData:q.mediaData,onBack:ne,onExitAnimation:()=>{var e;$(a)&&(e=V.current)&&(0,f.default)(e,{opacity:[0,1],translateY:["100%","0%"]},{duration:300,easing:[.1,.82,.25,1]})},onNext:ce,onPrev:fe,onImgZoomIn:e=>{z(e)},getZoomNode:e.getZoomNode,startTime:e.startTime,isAnimatingIn:K,onImageLoad:ae,msgIndexInAlbum:(()=>{let e=-1;if(!n||!q)return e;const t=q.id.toString();if(!n.has(t))return e;let a=0;return n.forEach((n=>{n===t&&(e=a),a++})),e})(),albumSize:(null===(t=e.highlightedMsgIds)||void 0===t?void 0:t.size)||0})]})};var i=n(a(757538)),s=n(a(145095)),o=a(88555),l=a(716055),r=a(941906),d=a(408139),c=a(914597),u=a(115461),f=n(a(462831)),h=a(667294),p=n(a(859312)),m=n(a(616223)),g=a(587550),x=n(a(837453)),v=n(a(389113)),_=n(a(290886)),b=n(a(174570)),C=n(a(803409)),M=a(542515),j=n(a(914296)),S=a(341908),E=a(58668),T=n(a(747186)),k=n(a(838781)),y=n(a(11339)),P=a(407595),A=a(785893)},871428:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.requireBundle=t.SendContactsModalLoadable=void 0;var i=n(a(348926)),s=a(548360),o=n(a(268356)),l=n(a(650860)),r=n(a(815334)),d=a(785893);const c=(0,r.default)((0,i.default)((function*(){return(yield Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(2790),a.e(275)]).then(a.bind(a,405969))).default})),"SendContactsModal");t.requireBundle=c;const u=(0,o.default)({loader:c,loading:e=>(0,d.jsx)(l.default,{title:s.fbt._("Send contacts",null,{hk:"9ZMyz"}),error:Boolean(e.error)})});t.SendContactsModalLoadable=u},923297:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(227101),s=a(88555),o=a(781572),l=n(a(352013)),r=a(408139),d=a(871579),c=n(a(540436)),u=a(548360),f=a(667294),h=n(a(156720)),p=n(a(616223)),m=a(587550),g=a(735461),x=n(a(259732)),v=n(a(955010)),_=a(865511),b=a(448285),C=a(669951),M=a(188172),j=n(a(60453)),S=n(a(69637)),E=a(994790),T=a(160811),k=a(471174),y=a(685600),P=a(747915),A=n(a(630855)),w=a(429623),N=a(729424),I=n(a(914296)),D=a(646346),R=n(a(188406)),O=n(a(23217)),L=a(113923),G=a(785893);const B={borderBottom:"qmxv8cnq"},F={marginTop:"csxx893n",color:"fsk8o631"},U={paddingEnd:"lk91ofgv",paddingBottom:"przvwfww",paddingStart:"s9xya5d7",paddingTop:"t6dtdvhe",fontWeight:"hnx8ox4h",textAlign:"qfejxiq4"},V={marginTop:"iin4x6c7",marginEnd:"jnwc1y2a",marginBottom:"ngycyvoj",marginStart:"svoq16ka"},H={paddingTop:"i5tg98hk",paddingEnd:"j2yjyrsv",paddingBottom:"q1tx93la",paddingStart:"quywxd7h",color:"pm5hny62",textAlign:"qfejxiq4"},q={position:"lhggkp7q",top:"rf8kfq28",end:"i7sa5vq0",color:"cs9t9or5"},Y={overflowX:"gfz4du6o",overflowY:"r7fjleex"};function W(e,t){const{onClose:a}=e,n=()=>C.ChatCollection.filter((e=>e.archive&&e.shouldAppearInList)),W=(0,g.useModelValues)(e.settings,["showArchiveV2","archive"]),z=(0,p.default)((()=>new A.default)),K=(0,p.default)((()=>new R.default([],(e=>e.id.toString())))),X=(0,f.useRef)(null),[Z,Q]=(0,f.useState)(!1),[$,J]=(0,f.useState)(n),ee=()=>(0,r.archiveV2Supported)()&&W.showArchiveV2;(0,m.useListener)(C.ChatCollection,[ee()?"sort":null,"change:archive","add","remove"].filter(Boolean),(()=>{J(n())}));const te=e=>{K.current.setVal(e,!1)};(0,m.useListener)(o.Cmd,"close_chat",(e=>{e===K.current.getVal()&&K.current.unset()})),(0,m.useListener)(o.Cmd,"update_chatlist_selection",te);const[ae,ne,ie]=(0,x.default)(d.NUX.ARCHIVE),se=()=>{const e=C.ChatCollection.some((e=>e.archive));return ee()&&e&&ae&&!Z};(0,f.useEffect)((()=>{if(ee()&&(0,i.isElevatedImportantMessageEnabled)()){const e=n(),t=new Map;e.forEach((e=>{e.archiveAtMentionViewedInDrawer=!0,t.set(e.id.toString(),!0)})),(0,b.updateChatArchiveDrawer)(t)}X.current&&l.default.focus(X.current);const e=C.ChatCollection.toArray().find((e=>e.active&&e.archive));e&&te(e)}),[]),(0,v.default)((()=>{se()&&ne()}));const oe=()=>{a()},le=(e,t)=>{o.Cmd.openChatFromUnread(t).then((e=>{e&&M.ComposeBoxActions.focus(t)})),(0,r.archiveV2Supported)()&&W.archive.enabled||oe()},re=e=>{e.preventDefault(),e.stopPropagation(),K.current.setNext(!0)},de=e=>{e.preventDefault(),e.stopPropagation(),K.current.setPrev(!0)},ce=()=>{ie(),Q(!0)};let ue,fe;K.current.init($,!0),se()&&(ue=(0,G.jsxs)("div",{className:(0,h.default)(B),children:[(0,G.jsxs)(w.FlexColumn,{align:"center",children:[(0,G.jsx)("span",{className:(0,h.default)(F),children:(0,G.jsx)(O.default,{name:"archive-nux"})}),(0,G.jsx)("div",{className:(0,h.default)(U),children:(0,G.jsx)(L.Text,{theme:"large",as:"h1",children:u.fbt._("Archived chats will stay archived",null,{hk:"3dEGG"})})}),(0,G.jsx)("div",{className:(0,h.default)(V),children:(0,G.jsx)("div",{className:(0,h.default)(H),children:(0,G.jsx)(L.Text,{theme:"plain",as:"p",children:(0,s.isMDBackend)()?u.fbt._("To reduce interruptions, archived chats will stay here with notifications turned off. To change this experience, go to Settings > Chats on your phone.",null,{hk:"1VSdJQ"}):u.fbt._("To reduce interruptions, archived chats will stay here with notifications turned off. To change this experience, go to Settings > Archived Chats.",null,{hk:"1gz2m1"})})})})]}),(0,G.jsx)("button",{onClick:ce,className:(0,h.default)(q),children:(0,G.jsx)(O.default,{name:"x-alt"})})]})),fe=$.length>0?(0,G.jsxs)(N.HotKeys,{ref:X,handlers:{down:re,up:de},children:[(0,G.jsx)(c.default,{transitionName:"slide",children:ue}),(0,G.jsx)(P.FlatList,{className:(0,h.default)(Y),data:$.map((e=>({itemKey:e.id.toString(),chat:e}))),flatListController:z.current,direction:"vertical",renderItem:e=>(0,G.jsx)(_.Chat,{chat:e.chat,mode:_.Mode.LAST,active:K.current,onClick:le,hideArchivedIcon:(0,r.archiveV2Supported)()&&W.archive.enabled,hideMuteIcon:ee(),hideMuteOption:ee(),ephemeralIcon:"chat-list"})})]}):(0,G.jsx)(y.Archived,{});const he=(0,s.isLegacyWebdBackend)()&&(0,r.archiveV2Supported)()&&W.archive.enabled?(0,G.jsx)(D.MenuBarItem,{a8nText:"archived-menu",icon:(0,G.jsx)(O.default,{name:"menu"}),title:I.default.t(454),children:(0,G.jsx)(T.Dropdown,{type:T.MenuType.DropdownMenu,flipOnRTL:!0,dirX:T.DirX.LEFT,children:(0,G.jsx)(k.DropdownItem,{a8n:"open-archive-settings menu-item",action:e.showSettings,children:u.fbt._("Archive settings",null,{hk:"1YI0jC"})})},"ArchivedDrawerHeader")}):null,pe=(0,r.archiveV2Supported)()&&W.archive.enabled?u.fbt._("Archived",null,{hk:"3HjzQg"}):I.default.t(136);return(0,G.jsxs)(j.default,{ref:t,theme:"archived",children:[(0,G.jsx)(E.DrawerHeader,{title:pe,onBack:oe,type:E.DRAWER_HEADER_TYPE.LARGE,menu:he}),(0,G.jsx)(S.default,{flatListControllers:[z.current],children:fe})]})}var z=(0,f.forwardRef)(W);t.default=z},962138:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=function(e){switch(e.verifiedLevel){case r.VERIFIED_LEVEL.HIGH:return e.name===e.verifiedName?h.default.t(693,{businessName:e.verifiedName}):h.default.t(694,{businessName:e.verifiedName});case r.VERIFIED_LEVEL.LOW:case r.VERIFIED_LEVEL.UNKNOWN:return o.fbt._("This may be a business. WhatsApp hasn't verified their name yet.",null,{hk:"404mUL"})}}((0,l.useModelValues)(e.contact,["name","verifiedLevel","verifiedName","formattedName"])),a=(0,p.jsx)(d.default,{href:(0,i.getBusinessFaqUrl)(),onClick:g,children:h.default.t(397)});return(0,p.jsxs)(c.default,{onOK:m,okText:h.default.t(531),children:[(0,p.jsx)(u.EmojiText,{text:t}),"",a]})};var i=a(221310),s=a(914597),o=a(548360),l=a(735461),r=a(393170),d=n(a(499360)),c=n(a(452665)),u=a(965417),f=a(912591),h=n(a(914296)),p=a(785893);const m=()=>{s.ModalManager.close()},g=e=>{e.preventDefault(),s.ModalManager.close("none"),setTimeout((()=>(0,f.openExternalLink)((0,i.getBusinessFaqUrl)())),10)}},100955:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{contact:t}=e;const{verifiedLevel:a,verifiedName:n}=(0,r.useModelValues)(t,["verifiedLevel","verifiedName"]),C=(0,i.getBusinessFaqUrl)(),M=!h.Conn.isSMB;(0,l.useEffect)((()=>{M&&new x.default.BannerEvent({bannerType:x.default.BANNER_TYPES.CROSS_SELL_PROFILE_INTERSTITIAL,bannerOperation:x.default.BANNER_OPERATIONS.SHOWN}).commit()}),[M]);const j=a===c.VERIFIED_LEVEL.HIGH?g.default.t(835,{businessName:n}):o.fbt._("This business uses WhatsApp Business, which allows them to add their opening hours, address, website and catalog of products or services.",null,{hk:"82W5f"});return(0,b.jsxs)(f.default,{title:o.fbt._("About WhatsApp Business",null,{hk:"3XF5gx"}),onOK:()=>{s.ModalManager.close(),M&&new x.default.BannerEvent({bannerType:x.default.BANNER_TYPES.CROSS_SELL_PROFILE_INTERSTITIAL,bannerOperation:x.default.BANNER_OPERATIONS.DISMISS}).commit()},okText:o.fbt._("OK",null,{hk:"2KEeHb"}),children:[(0,b.jsx)(p.EmojiText,{text:j}),"",(0,b.jsx)(u.default,{href:C,onClick:e=>{e.preventDefault(),s.ModalManager.close(),setTimeout((()=>(0,m.openExternalLink)(C)),10)},children:g.default.t(397)}),M&&(0,b.jsx)("div",{className:d.default.footerNote,children:(0,b.jsxs)(_.TextSpan,{theme:"muted",size:"13",children:[o.fbt._("If youre a business, the free WhatsApp Business app can help.",null,{hk:"3gfQun"}),(0,b.jsx)("br",{}),(0,b.jsx)(u.default,{onClick:e=>{e.preventDefault(),s.ModalManager.close(),new x.default.BannerEvent({bannerType:x.default.BANNER_TYPES.CROSS_SELL_PROFILE_INTERSTITIAL,bannerOperation:x.default.BANNER_OPERATIONS.CLICK}).commit(),setTimeout((()=>s.ModalManager.open((0,b.jsx)(v.SmbAppUpsellModal,{}))),200)},className:d.default.getTheAppLink,children:o.fbt._("Learn about getting the app",null,{hk:"3ncguo"})})]})})]})};var i=a(221310),s=a(914597),o=a(548360),l=a(667294),r=a(735461),d=n(a(585845)),c=a(393170),u=n(a(499360)),f=n(a(452665)),h=a(317239),p=a(965417),m=a(912591),g=n(a(914296)),x=n(a(11339)),v=a(870593),_=a(113923),b=a(785893)},870593:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.SmbAppUpsellModal=function(){return(0,h.jsxs)(l.default,{title:s.fbt._("WhatsApp Business app",null,{hk:"4BfvOl"}),onOK:()=>{new u.default.BannerEvent({bannerType:u.default.BANNER_TYPES.CROSS_SELL_PROFILE_INTERSTITIAL,bannerOperation:u.default.BANNER_OPERATIONS.DISMISS}).commit(),i.ModalManager.close()},okText:s.fbt._("Close",null,{hk:"19Jpec"}),children:[(0,h.jsx)(f.default,{}),(0,h.jsx)("p",{children:(0,h.jsx)(r.EmojiText,{text:s.fbt._("If youre a business, you can benefit from switching to the free WhatsApp Business app. It has tools to connect with customers and manage messages.",null,{hk:"40fyU7"})})}),(0,h.jsx)("br",{}),(0,h.jsxs)("p",{children:[(0,h.jsx)(r.EmojiText,{text:s.fbt._("Scan this code to get the WhatsApp Business App. Or, you can install it from the App Store or Google Play Store.",null,{hk:"2840mD"})}),"",(0,h.jsx)(o.default,{href:p,onClick:e=>{e.preventDefault(),i.ModalManager.close(),setTimeout((()=>(0,d.openExternalLink)(p)),10)},children:c.default.t(397)})]})]})},t.WHATSAPP_BUSINESS_URL=void 0;var i=a(914597),s=a(548360),o=n(a(499360)),l=n(a(452665)),r=a(965417),d=a(912591),c=n(a(914296)),u=n(a(11339)),f=n(a(905242)),h=a(785893);const p="https://www.whatsapp.com/business";t.WHATSAPP_BUSINESS_URL=p},905242:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const e=(0,o.useRef)(null),t=(0,o.useRef)(null),{theme:a}=(0,o.useContext)(d.ThemeContext),n="dark"===a;return(0,o.useEffect)((()=>(null!=e.current&&(t.current=new l.default(e.current,{text:"https://www.whatsapp.com/business/download",colorDark:"#122e31",colorLight:"#ffffff",width:i.QR_EDGE/2,height:i.QR_EDGE/2,typeNumber:4,correctLevel:l.default.CorrectLevel.H})),()=>{null!=t.current&&(t.current.clear(),t.current=null,e.current=null)})),[n]),(0,c.jsx)("div",{className:r.default.wrapper,children:(0,c.jsx)("div",{ref:e,className:(0,s.default)(r.default.code,{[r.default.codeDarkMode]:n}),children:(0,c.jsx)(u,{theme:a})})})};var i=a(941906),s=n(a(294184)),o=a(667294),l=n(a(637360)),r=n(a(202256)),d=a(597628),c=a(785893);function u(){return(0,c.jsx)("div",{className:r.default.codeLogo,children:(0,c.jsx)("svg",{width:"100%",viewBox:"0 0 50 50",xmlns:"http://www.w3.org/2000/svg",children:(0,c.jsx)("path",{d:"M42.6776 42.6779C37.9558 47.3997 31.6777 50.0001 24.9999 50.0001C21.0047 50.0001 17.0541 49.0389 13.5244 47.2141L0.601068 49.3339L2.72832 36.3645C0.941278 32.8647 0 28.9525 0 25.0001C0 18.3223 2.60042 12.0443 7.32229 7.32237C12.0442 2.6005 18.3221 0 24.9999 0C31.6777 0 37.9558 2.6005 42.6776 7.32237C47.3995 12.0443 50 18.3223 50 25.0001C50 31.678 47.3995 37.9558 42.6776 42.6779ZM24.9999 4.33778C13.6067 4.33778 4.33772 13.607 4.33772 25.0001C4.33772 28.4792 5.21935 31.9192 6.8868 34.9487L7.24853 35.6054L5.85915 44.0756L14.2959 42.6918L14.9565 43.0601C18.0107 44.7624 21.4837 45.6622 24.9999 45.6622C36.3932 45.6622 45.6622 36.3933 45.6622 25.0001C45.6622 13.607 36.3932 4.33778 24.9999 4.33778ZM31.1133 24.3614C32.4522 24.9804 34.1536 26.3725 34.1208 29.3117C34.0749 33.4266 31.2191 35.6542 27.2744 35.6542H19.4594H18.3042C17.5079 35.6542 16.8645 35.0053 16.8713 34.2092L17.0344 15.0573C17.041 14.2714 17.6794 13.6377 18.4652 13.6366L27.1493 13.6256C31.4651 13.6256 33.9598 16.039 33.9177 19.8134C33.8903 22.2579 32.2484 23.8355 31.1133 24.3614ZM26.766 17.4622H21.3643L21.3076 22.5361H26.7093C28.5347 22.5361 29.5672 21.5152 29.584 19.9992C29.6009 18.4831 28.5915 17.4622 26.766 17.4622ZM26.9444 26.4035H21.2643L21.2038 31.8178H26.884C28.8333 31.8178 29.7752 30.5802 29.792 29.0952C29.8085 27.6101 28.8939 26.4035 26.9444 26.4035Z",fill:"currentColor"})})})}},574328:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(227101),s=a(88555),o=a(40234),l=a(781572),r=a(221310),d=a(914597),c=a(548360),u=a(667294),f=n(a(156720)),h=n(a(859312)),p=n(a(616223)),m=a(587550),g=a(735461),x=n(a(895402)),v=n(a(550747)),_=n(a(54231)),b=(n(a(575116)),a(898792)),C=n(a(105406)),M=n(a(60453)),j=n(a(69637)),S=n(a(464738)),E=a(994790),T=n(a(104061)),k=a(910081),y=n(a(404584)),P=n(a(630855)),A=n(a(914296)),w=n(a(11339)),N=a(33210),I=a(118146),D=n(a(23217)),R=a(113923),O=a(785893);const L={flexGrow:"tvf2evcx",flexShrink:"oq44ahr5",flexBasis:"lb5m6g5c",paddingBottom:"s9fl9ege"};function G(e,t){var a,n;const{onClose:u,onMediaGallery:G}=e,B=(0,h.default)(),F=(0,x.default)(),U=(0,p.default)((()=>new P.default)),V=(0,g.useModelValues)(e.chat,["id","groupMetadata"]),H=()=>{if((0,i.isPrivacyNarrativeV1Enabled)()&&(0,N.shouldShowNewE2eInfoModal)((0,I.unproxy)(V))){const e=(0,r.getE2EFaqUrl)();d.ModalManager.open((0,O.jsx)(k.E2eInfoModalV2,{highlightSurface:w.default.PRIVACY_HIGHLIGHT_SURFACE_ENUM.INFO_SCREEN_BROADCAST,url:e}))}else d.ModalManager.open((0,O.jsx)(T.default,{highlightSurface:w.default.PRIVACY_HIGHLIGHT_SURFACE_ENUM.INFO_SCREEN_BROADCAST,chatId:V.id,e2eSubtype:"info_encrypted"}))};(0,m.useListener)(null===(a=V.groupMetadata)||void 0===a?void 0:a.participants,["add","remove","sort","reset"],B);let q=null;G&&(q=(0,O.jsx)(C.default,{onMediaGallery:G,chat:(0,I.unproxy)(V)}));const Y=(0,O.jsx)(b.ChatInfoDrawerButtonsSection,{children:(0,O.jsx)(S.default,{a8nText:"li-delete-broadcast",icon:(0,O.jsx)(D.default,{name:"delete"}),color:"danger",theme:"chat-info",onClick:()=>{l.Cmd.deleteOrExitChat((0,I.unproxy)(V))},children:A.default.t(719)})});let W;(null===(n=V.groupMetadata)||void 0===n?void 0:n.creation)?(W=o.Clock.createdStr(V.groupMetadata.creation),W=(0,O.jsx)(R.TextDiv,{theme:"small",children:W})):W=null;let z=null;(0,s.isMDBackend)()&&(z=(0,O.jsx)(y.default,{highlightSurface:w.default.PRIVACY_HIGHLIGHT_SURFACE_ENUM.INFO_SCREEN_BROADCAST,onClick:H,text:c.fbt._("Messages are end-to-end encrypted. Click to learn more.",null,{hk:"1iarlI"})}));let K=null;return z&&(K=(0,O.jsxs)(b.ChatInfoDrawerSection,{children:[null,z]})),(0,O.jsxs)(M.default,{ref:t,theme:"striped",children:[(0,O.jsxs)(E.DrawerHeader,{type:E.DRAWER_HEADER_TYPE.SMALL,rtlFixIfOnDarwin:!0,onCancel:()=>{u?u():null==F||F.requestDismiss()},children:[(0,O.jsx)(R.TextDiv,{theme:"title",children:c.fbt._("Broadcast list info",null,{hk:"3S4EgV"})}),W]}),(0,O.jsx)(j.default,{flatListControllers:[U.current],children:(0,O.jsxs)("div",{className:(0,f.default)(L),children:[(0,O.jsx)(_.default,{chat:(0,I.unproxy)(V)}),q,undefined,K,(0,O.jsx)(v.default,{chat:(0,I.unproxy)(V),flatListController:U.current}),Y]})})]},"contact-info-modal")}var B=(0,u.forwardRef)(G);t.default=B},550747:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a;const n=(0,l.default)(),x=null===(t=e.chat.groupMetadata)||void 0===t?void 0:t.participants;(0,r.useListener)(x,"add remove reset",n);const v=(0,o.useMemo)((()=>x?x.map((e=>({itemKey:e.id.toString(),participant:e,height:68}))):[]),[x]),_=(e,t)=>{(0,s.isMePrimary)(t.id)||(0,h.findChat)(t.id).then((function(e){i.Cmd.openChatFromUnread(e).then((t=>{t&&c.ComposeBoxActions.focus(e)}))}))},b=null!==(a=null==x?void 0:x.length)&&void 0!==a?a:0,C=m.default.t(828,{count:b,_plural:b});return(0,g.jsx)(d.ChatInfoDrawerListSection,{title:C,children:(0,g.jsx)(p.FlatList,{flatListController:e.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:v,renderItem:e=>{const{participant:t}=e,a=f.ContactCollection.gadd(t.id);return(0,g.jsx)(u.Contact,{contact:a,theme:"chat-info",admin:!!t.isAdmin,onClick:_,waitIdle:!0},t.id.toString())}})})};var i=a(781572),s=a(978820),o=a(667294),l=n(a(859312)),r=a(587550),d=a(898792),c=a(188172),u=a(402732),f=a(719380),h=a(650101),p=a(747915),m=n(a(914296)),g=a(785893)},54231:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a;const n=null===(t=e.chat.groupMetadata)||void 0===t?void 0:t.participants,_=(0,r.useModelValues)(e.chat.contact,["name"]),b=(0,o.default)();(0,l.useListener)(n,"add remove reset",b);const C=null!==(a=null==n?void 0:n.length)&&void 0!==a?a:0,M=i.fbt._("Broadcast List",null,{hk:"46AT9o"}).toString()+" "+f.default.t(828,{count:C,_plural:C}),j=_.name?(0,g.jsx)(h.Name,{contact:e.chat.contact,selectable:!0}):i.fbt._("Untitled List",null,{hk:"fYALp"});return(0,g.jsxs)(c.default,{theme:"padding-large",children:[(0,g.jsx)("div",{className:(0,s.default)(x),children:(0,g.jsx)(d.DetailImage,{id:e.chat.id,size:d.DetailImageSize.Large})}),(0,g.jsxs)(u.FlexColumn,{align:"center",children:[(0,g.jsx)(m.TextHeader,{level:"2",size:"24",children:j}),(0,g.jsx)("div",{className:(0,s.default)(v),children:(0,g.jsx)(p.SelectableSpan,{dir:"auto",selectable:!0,children:(0,g.jsx)(m.TextSpan,{size:"16",color:"secondary",children:M})})})]})]})};var i=a(548360),s=n(a(156720)),o=n(a(859312)),l=a(587550),r=a(735461),d=a(288984),c=n(a(833308)),u=a(429623),f=n(a(914296)),h=a(812176),p=a(552596),m=a(113923),g=a(785893);const x={display:"p357zi0d",justifyContent:"ac2vgrno",marginBottom:"du8bjn1j"},v={lineHeight:"a4ywakfo",marginTop:"g1eqewly"}},105406:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{chat:t,onMediaGallery:a}=e;const n=r.fbt._("Media, links and docs",null,{hk:"3D4fAZ"}),i=(0,b.jsx)(_.default,{color:"secondary",name:"chevron-right-alt",directional:!0}),s=(0,b.jsxs)(g.FlexRow,{align:"center",children:[(0,l.isMediaGalleryFixEnabled)()?(0,b.jsx)(M,{chat:t}):(0,b.jsx)(j,{chat:t}),(0,b.jsx)("div",{children:i})]});return(0,b.jsx)(m.ChatInfoDrawerSection,{a8nText:"section-media",title:n,titleOnClick:a,subtitle:s,xstyle:C.drawerSection,children:(0,b.jsx)(x.default,{chat:t,mediaMsgs:t.getMediaMsgs(),theme:"chat-info"})})};var i=n(a(348926)),s=a(88555),o=a(716055),l=a(408139),r=a(548360),d=a(667294),c=n(a(156720)),u=n(a(859312)),f=a(587550),h=n(a(174570)),p=n(a(803409)),m=a(898792),g=a(429623),x=n(a(188224)),v=a(341908),_=n(a(23217)),b=a(785893);const C={mediaCount:{marginEnd:"bugiwsl0",fontSize:"bze30y65",color:"g01nkquw"},drawerSection:{paddingBottom:"aiput80m"}};function M(e){let{chat:t}=e;const a=function(e){const[t,a]=(0,d.useState)(null),n=(0,p.default)(),i=(0,d.useCallback)((()=>{(0,o.countAllMedia)(e).then((e=>{n.aborted||a(e)}))}),[e,n]);return(0,d.useEffect)(i,[i]),(0,f.useListener)(e.getMediaMsgs(),["add","remove"],i),(0,f.useListener)(e.getDocMsgs(),["add","remove"],i),(0,f.useListener)(e.getLinkMsgs(),["add","remove"],i),t}(t);return(0,b.jsx)("div",{className:(0,c.default)(C.mediaCount),children:a})}function j(e){let{chat:t}=e;const a=function(e){const t=e.getMediaMsgs(),a=e.getDocMsgs(),n=e.getLinkMsgs(),o=(0,u.default)();(0,f.useListener)(t,"add remove reset query_media_before",o),(0,f.useListener)(a,"add remove reset query_doc_before",o),(0,f.useListener)(n,"add remove reset query_link_before",o);const l=(0,h.default)();(0,d.useEffect)((()=>{l((0,i.default)((function*(){const i=[];t.hasMediaBefore&&i.push(t.queryMedia({chat:e})),a.hasDocBefore&&i.push(a.queryDocs(e)),n.hasLinkBefore&&i.push(n.queryLinks(e)),yield Promise.all(i),o()})))}),[e,a,o,n,t,l]);let r=null;if(!t.hasMediaBefore&&!a.hasDocBefore&&!n.hasLinkBefore){let e=t.length;(0,s.isMDBackend)()&&(e=t.filter((e=>(0,v.hasThumbnail)(e.mediaData))).length),r=e+a.length+n.length}return r}(t);return(0,b.jsx)("div",{className:(0,c.default)(C.mediaCount),children:a})}},456873:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{contact:t}=e,{status:a}=(0,s.useModelValues)(t.getStatus(),["status"]),n=""===a?null:(0,f.jsx)(o.default,{multiline:!0,children:(0,f.jsx)(u.TextSpan,{theme:"title",children:(0,f.jsx)(c.default,{id:t.id})})}),p=(0,f.jsx)(o.default,{separator:!0,children:(0,f.jsx)(d.SelectableSpan,{dir:"auto",selectable:!0,children:(0,f.jsx)(u.TextSpan,{theme:"title",children:(0,i.widToFormattedUser)(t.id)})})});return(0,f.jsxs)(l.ChatInfoDrawerSection,{xstyle:h.container,a8nText:"section-about-and-phone-number",title:r.default.t(213),children:[n,p]})};var i=a(562054),s=(n(a(156720)),a(735461)),o=n(a(244296)),l=a(898792),r=n(a(914296)),d=a(552596),c=n(a(273561)),u=a(113923),f=a(785893);const h={container:{paddingBottom:"przvwfww"}}},76864:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{contact:t}=e;let a;a=(0,i.canSeeSMBUpsell)()?(0,p.jsx)(v,{onClick:function(){s.ModalManager.open((0,p.jsx)(d.default,{contact:t}))}}):(0,p.jsx)(x,{onClick:function(){s.ModalManager.open((0,p.jsx)(r.default,{contact:t}))}});return(0,p.jsx)(f.default,{xstyle:m.businessAccount,children:a})};var i=a(408139),s=a(914597),o=a(548360),l=n(a(156720)),r=n(a(962138)),d=n(a(100955)),c=n(a(435721)),u=n(a(464738)),f=n(a(833308)),h=n(a(23217)),p=a(785893);const m={businessAccount:{borderTop:"mug5vpb7",fontSize:"f8jlpxt4"},businessTitleText:{cursor:"ajgl1lbb",fontSize:"f8jlpxt4",lineHeight:"hzeshm6i",overflowX:"gfz4du6o",overflowY:"r7fjleex",paddingTop:"ppypbuwx",backgroundColor:"sbdla0oe"},btnLabel:{fontSize:"f8jlpxt4"},businessTitleWithSMBUpsell:{lineHeight:"hzeshm6i"},bannerSvgContainer:{marginTop:"b9l0eqez",marginEnd:"jnwc1y2a",marginBottom:"mpdn4nr2",marginStart:"svoq16ka"},bannerSvg:{color:"jq3rn4u7",width:"dh5rsm73"}},g=o.fbt._("This is a business account.",null,{hk:"2x8QUJ"});function x(e){let{onClick:t}=e;return(0,p.jsx)(u.default,{a8nText:"business-title",xstyle:m.businessTitleText,onClick:t,children:(0,p.jsx)("div",{className:(0,l.default)(m.btnLabel),children:g})})}function v(e){let{onClick:t}=e;return(0,p.jsx)(c.default,{a8nText:"business-title",xstyle:m.businessTitleWithSMBUpsell,onClick:t,side:(0,p.jsx)(h.default,{xstyle:m.bannerSvgContainer,iconXstyle:m.bannerSvg,display:"inline",name:"info"}),children:g})}},781896:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a;const{contact:n,onProductCatalog:y}=e,P=(0,f.useContext)(_.DrawerContext),A=(0,M.getProductCatalogSessionId)(P),w=(0,E.default)((0,S.unproxy)(e.contact));function N(){return(N=(0,i.default)((function*(){const e=yield(0,b.findChat)(n.id);(yield l.Cmd.openChatFromUnread(e))&&(r.DrawerManager.closeDrawerRight(),(0,d.btmThreadsLoggingEnabled)()&&v.ComposeBoxActions.addMsgSendingLogAttributes(e,{handleMultiple(){(0,o.handleActivitiesForChatThreadLogging)([{activityType:"profileReplies",ts:(0,s.unixTime)(),chatId:e.id}])}}))}))).apply(this,arguments)}let I;const D=x.ChatCollection.getActive();if(!(null==D?void 0:D.id.equals(n.id))){var R,O;(0,p.logMessageClick)(A,null===(R=n.businessProfile)||void 0===R?void 0:R.isProfileLinked,!!(null===(O=n.businessProfile)||void 0===O?void 0:O.coverPhoto)),I=(0,T.jsx)(h.default,{icon:"chat-msg",label:u.fbt._("Message",null,{hk:"mZ5DE"}),onClick:()=>{!function(){N.apply(this,arguments)}()},a8nText:"business-action chat"})}let L,G,B;w.isVoiceCallEnabled&&(L=(0,T.jsx)(h.default,{icon:"voice-call-filled",label:u.fbt._("Voice call",null,{hk:"393mz4"}),disabled:!w.canStartVoiceCall,onClick:()=>{var e,t;(0,p.logVoiceCallClick)(A,null===(e=n.businessProfile)||void 0===e?void 0:e.isProfileLinked,!!(null===(t=n.businessProfile)||void 0===t?void 0:t.coverPhoto)),w.startVoiceCall()},a8nText:"business-action voice-call"}));(null===(t=n.businessProfile)||void 0===t||null===(a=t.profileOptions)||void 0===a?void 0:a.commerceExperience)===m.COMMERCE_EXPERIENCE_TYPES.CATALOG&&(G=(0,T.jsx)(h.default,{icon:"catalog-filled",label:u.fbt._("Catalog",null,{hk:"3QDkTE"}),onClick:()=>{var e,t;(0,p.logCatalogClick)(A,null===(e=n.businessProfile)||void 0===e?void 0:e.isProfileLinked,!!(null===(t=n.businessProfile)||void 0===t?void 0:t.coverPhoto)),y((0,M.getProductCatalogContext)(P),"ContactInfo")},a8nText:"business-action catalog"}));if((0,g.hasShop)(n.businessProfile)){(0,d.bannedShopsEnabled)()&&(0,g.isShopBanned)(n.businessProfile)||(B=(0,T.jsx)(h.default,{icon:"shop-filled",label:u.fbt._("Shop",null,{hk:"3KsdlE"}),onClick:function(){var e,t;(0,p.logShopsClick)(A,null===(e=n.businessProfile)||void 0===e?void 0:e.isProfileLinked,!!(null===(t=n.businessProfile)||void 0===t?void 0:t.coverPhoto)),(0,g.goToShop)(n.businessProfile)},a8nText:"business-action shop"}))}const F=(0,T.jsx)(h.default,{icon:"forward-filled",label:u.fbt._("Share",null,{hk:"4F3c6E"}).toString(),onClick:function(){var e,t;(0,p.logForwardClick)(A,null===(e=n.businessProfile)||void 0===e?void 0:e.isProfileLinked,!!(null===(t=n.businessProfile)||void 0===t?void 0:t.coverPhoto)),c.ModalManager.open((0,T.jsx)(j.SendContactsModalLoadable,{contacts:[(0,S.unproxy)(n)],onContactsSent:e=>{l.Cmd.openChatFromUnread(e).then((()=>{}))}}))},a8nText:"business-action forward"});return(0,T.jsxs)(C.FlexRow,{xstyle:k.actionsRow,justify:"evenly",children:[I,L,G,B,F]})};var i=n(a(348926)),s=a(892844),o=a(911508),l=a(781572),r=a(141455),d=a(408139),c=a(914597),u=a(548360),f=a(667294),h=(n(a(156720)),n(a(839902))),p=a(957501),m=a(393170),g=a(794010),x=a(669951),v=a(188172),_=a(427394),b=a(650101),C=a(429623),M=a(397567),j=a(871428),S=a(118146),E=n(a(109582)),T=a(785893);const k={actionsRow:{marginTop:"c46o30wg",marginEnd:"bsg2wrd4",marginBottom:"brac1wpa",marginStart:"f459d30t","@media (min-width: 1300px)":{marginStart:"hfp8519b",marginEnd:"acdu7ris"}}}},170531:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{businessHours:t,isProfileLinked:a,hasCoverPhoto:n}=e,i=(0,f.getProductCatalogSessionId)((0,o.useContext)(c.DrawerContext)),l=(0,d.getBusinessOpenState)(t),[u,p]=(0,o.useState)(!0);if(null==t)return null;const _=(0,h.getBusinessHours)(t).map((e=>{const{day:t,hours:a,first:n}=e;let i=t,o=a,r=!1;if(n)switch(l.status){case d.BUSINESS_OPEN_STATUS.OPEN_24H:i=s.fbt._("Open now",null,{hk:"28hpHy"}),o=s.fbt._("Open 24 hours",null,{hk:"1AlfF5"}),r=!0;break;case d.BUSINESS_OPEN_STATUS.OPEN_APPOINTMENT:i=s.fbt._("Open now",null,{hk:"28hpHy"}),o=s.fbt._("Open by appointment only",null,{hk:"1nxH9v"}),r=!0;break;case d.BUSINESS_OPEN_STATUS.OPEN:i=s.fbt._("Open now",null,{hk:"28hpHy"}),r=!0;break;case d.BUSINESS_OPEN_STATUS.CLOSED_TODAY:o=s.fbt._("Closed",null,{hk:"3IRgct"})}return!n&&u?null:(0,g.jsx)(v,{day:i,dayIsOpen:r,hours:o,first:n,collapsed:u},t)}));return(0,g.jsx)(m.default,{xstyle:x.businessHours,onClick:()=>{(0,r.logHoursClick)(i,a,!!n),p(!u)},a8nText:"business-hours-expand",children:_})};var i=n(a(294184)),s=a(548360),o=a(667294),l=(n(a(156720)),n(a(449103))),r=a(957501),d=a(794010),c=a(427394),u=a(965417),f=a(397567),h=a(526316),p=n(a(23217)),m=n(a(701784)),g=a(785893);const x={businessHours:{display:"f804f6gw",width:"ln8gz9je",textAlign:"ml4r5409"}};function v(e){if(e.first){const t=(0,g.jsx)("div",{className:l.default.businessHoursChevron,role:"button",children:(0,g.jsx)(p.default,{className:e.collapsed?"":l.default.flipSvg,display:"inline",name:"chevron-down-alt"})});return(0,g.jsxs)("div",{className:(0,i.default)(l.default.businessHoursRow,{[l.default.firstRow]:e.first}),children:[(0,g.jsx)("div",{className:(0,i.default)(l.default.businessHoursDay,{[l.default.dayIsOpen]:e.dayIsOpen}),children:(0,g.jsx)(u.EmojiText,{direction:"auto",text:e.day})}),(0,g.jsx)("div",{className:l.default.businessHoursHours,children:(0,g.jsx)(u.EmojiText,{direction:"auto",text:e.hours})}),t]})}return(0,g.jsxs)("div",{className:l.default.businessHoursRow,children:[(0,g.jsx)("div",{className:l.default.businessHoursDay,children:(0,g.jsx)(u.EmojiText,{direction:"auto",text:e.day})}),(0,g.jsx)("div",{className:l.default.businessHoursHours,children:(0,g.jsx)(u.EmojiText,{direction:"auto",text:e.hours})})]})}},130619:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{businessProfile:t}=e,{description:a,address:n,latitude:C,longitude:M,website:j,email:S,businessHours:E,isProfileLinked:T,coverPhoto:k}=(0,r.useModelValues)(t,["description","address","latitude","longitude","website","email","businessHours","isProfileLinked","coverPhoto"]),y=(0,l.useContext)(h.DrawerContext),P=(0,v.getProductCatalogSessionId)(y);let A,w,N,I,D,R;null!=a&&(A=(0,_.jsx)("div",{className:c.default.section,children:(0,_.jsx)(m.default,{text:a,textLimit:i.default.BUSINESS_DESCRIPTION_INFO_PANEL_TRUNC_LENGTH,children:e=>{let{textLimit:t}=e;return(0,_.jsx)(p.EmojiText,{className:c.default.description,selectable:!0,direction:"auto",text:a,textLimit:t,breakWord:!0})}})}));null!=E&&(w=(0,_.jsx)("div",{className:c.default.section,children:(0,_.jsx)(d.default,{businessHours:E,isProfileLinked:T,hasCoverPhoto:!!k})}));null!=n&&(N=(0,_.jsx)("div",{className:c.default.section,children:(0,_.jsx)(p.EmojiText,{selectable:!0,direction:"auto",text:n})}));null!=C&&null!=M&&(I=(0,_.jsx)("div",{style:{height:132},className:(0,o.default)(c.default.section,c.default.map),children:(0,_.jsx)(x.default,{lat:C,lng:M,name:n||"",width:590,height:132,onClick:()=>(0,u.logLocationClick)(P,T,!!k),a8nText:"business-info-map"})}));null!=S&&(D=(0,_.jsx)("div",{className:c.default.section,children:(0,_.jsx)(g.ExternalLink,{href:`mailto:${S}`,onClick:()=>(0,u.logEmailClick)(P,T,!!k),a8nText:"business-info-email",children:S})}));null!=j&&j.length>0&&(R=(0,_.jsx)("div",{className:c.default.section,children:j.map((e=>(0,_.jsx)("div",{children:(0,_.jsx)(g.ExternalLink,{href:s.default.toMaliciousSiteRedirect(e),onClick:()=>(0,u.logWebsiteClick)(P,T,!!k),a8nText:"business-info-website",children:e})},e)))}));return null==A&&null==w&&null==N&&null==I&&null==D&&null==R?null:(0,_.jsxs)(f.ChatInfoDrawerSection,{xstyle:b.container,children:[A,w,N,I,D,R]})};var i=n(a(364369)),s=n(a(376139)),o=n(a(294184)),l=a(667294),r=(n(a(156720)),a(735461)),d=n(a(170531)),c=n(a(646311)),u=a(957501),f=a(898792),h=a(427394),p=a(965417),m=n(a(217080)),g=a(912591),x=n(a(183452)),v=a(397567),_=a(785893);const b={container:{paddingTop:"i4pc7asj",paddingBottom:"q1nnjopg"}}},433253:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const{contact:a}=e;let n,g,x;var v;null!=(null===(t=a.businessProfile)||void 0===t?void 0:t.customUrl)&&(0,i.isSmbMelonDisplayEnabled)()&&(x=(0,d.jsx)("div",{className:(0,s.default)(f),children:(0,d.jsx)(o.EmojiText,{text:null===(v=a.businessProfile)||void 0===v?void 0:v.customUrl,direction:"auto",titlify:!0,breakWord:!0,inlineblock:!0})}));if(a.isMyContact)if(a.name!==a.verifiedName){let e;a.showBusinessCheckmarkAsSecondary&&(e=(0,d.jsx)("div",{className:(0,s.default)(u),children:(0,d.jsx)(r.default,{name:"psa-verified"})})),n=(0,d.jsx)(l.Name,{contact:a,breakWord:!0}),g=(0,d.jsx)("div",{className:(0,s.default)(f),children:(0,d.jsxs)("div",{className:(0,s.default)(m),children:[(0,d.jsx)(o.EmojiText,{text:`~${a.verifiedName}`,className:(0,s.default)(p),direction:"auto",ellipsify:!0,titlify:!0}),e]})})}else n=(0,d.jsx)(l.Name,{contact:a,showBusinessCheckmark:a.showBusinessCheckmarkAsPrimary,breakWord:!0});else n=(0,d.jsx)(o.EmojiText,{text:a.verifiedName,direction:"auto",ellipsify:!0,titlify:!0,breakWord:!0}),g=(0,d.jsx)("div",{className:(0,s.default)(f),children:(0,d.jsx)(l.Name,{contact:a,showBusinessCheckmark:a.showBusinessCheckmarkAsPrimary})});return(0,d.jsxs)("div",{className:(0,s.default)(c),children:[(0,d.jsx)("div",{className:(0,s.default)(h),children:n}),g,x]})};var i=a(408139),s=n(a(156720)),o=a(965417),l=a(812176),r=n(a(23217)),d=a(785893);const c={marginTop:"tt8xd2xn",marginEnd:"jnwc1y2a",marginBottom:"ngycyvoj",marginStart:"svoq16ka"},u={display:"ew8mgplc",marginTop:"o9i7y497",marginEnd:"jnwc1y2a",marginBottom:"mpdn4nr2",marginStart:"k6y3xtnu"},f={color:"p6nhtbpp",fontSize:"enbbiyaj",lineHeight:"tkq7s68q",marginTop:"tt8xd2xn",marginEnd:"jnwc1y2a",marginBottom:"inww9tbj",marginStart:"svoq16ka"},h={fontSize:"iqrewfee",fontWeight:"sy6s5v3r",marginTop:"tt8xd2xn",marginEnd:"jnwc1y2a",marginBottom:"or9x5nie",marginStart:"svoq16ka"},p={flexGrow:"tvf2evcx"},m={display:"p357zi0d",justifyContent:"ac2vgrno"}},587185:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.BusinessOpenHours=function(e){const{hours:t}=e,a=h((0,l.getBusinessOpenState)(t));if(null==a)return null;const n=i.default.sanitize(a.toString());return(0,r.jsx)("div",{className:(0,o.default)(u),dangerouslySetInnerHTML:{__html:n}})},t.getBusinessOpenStr=h;var i=n(a(827856)),s=a(548360),o=n(a(156720)),l=a(794010),r=a(785893);const d={color:"mvxzr2tb"},c={color:"j5au4wul"},u={color:"sbs3osm6",fontSize:"f8jlpxt4",marginTop:"tt8xd2xn",marginEnd:"jnwc1y2a",marginBottom:"g105fvfm",marginStart:"svoq16ka"};function f(e){return null==e?"":e.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})}function h(e){switch(e.status){case l.BUSINESS_OPEN_STATUS.OPEN_24H:return s.fbt._("{open} 24 hours",[s.fbt._param("open",`<span class="${(0,o.default)(c)}">${s.fbt._("Open",null,{hk:"187rvw"}).toString()}</span>`)],{hk:"1aA6f9"});case l.BUSINESS_OPEN_STATUS.OPEN_APPOINTMENT:return s.fbt._("{open} by appointment only",[s.fbt._param("open",`<span class="${(0,o.default)(c)}">${s.fbt._("Open",null,{hk:"187rvw"}).toString()}</span>`)],{hk:"z8CGT"});case l.BUSINESS_OPEN_STATUS.OPEN:if(e.openUntil&&e.additionalOpen&&e.additionalClose)return s.fbt._("{open} until {time}, {additionalOpenTime} - {additionalCloseTime}",[s.fbt._param("open",`<span class="${(0,o.default)(c)}">${s.fbt._("Open",null,{hk:"187rvw"}).toString()}</span>`),s.fbt._param("time",f(e.openUntil)),s.fbt._param("additionalOpenTime",f(e.additionalOpen)),s.fbt._param("additionalCloseTime",f(e.additionalClose))],{hk:"2dJgLQ"});if(e.openUntil)return s.fbt._("{open} until {time}",[s.fbt._param("open",`<span class="${(0,o.default)(c)}">${s.fbt._("Open",null,{hk:"187rvw"}).toString()}</span>`),s.fbt._param("time",f(e.openUntil))],{hk:"3Dd8an"});break;case l.BUSINESS_OPEN_STATUS.CLOSED:return e.opensAt?s.fbt._("{closed}, opens at {time}",[s.fbt._param("closed",`<span class="${(0,o.default)(d)}">${s.fbt._("Closed now",null,{hk:"2oDK4r"}).toString()}</span>`),s.fbt._param("time",f(e.opensAt))],{hk:"LvVmY"}):`<span class="${(0,o.default)(d)}">${s.fbt._("Closed now",null,{hk:"2oDK4r"}).toString()}</span>`;case l.BUSINESS_OPEN_STATUS.CLOSED_TODAY:return`<span class="${(0,o.default)(d)}">${s.fbt._("Closed today",null,{hk:"3uCCvH"}).toString()}</span>`}return null}},990347:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.BusinessProfile=function(e){let t;const a=(0,c.useModelValues)(e.contact,["id","verifiedLevel","name","verifiedName"]),n=(0,c.useModelValues)(e.businessProfile,["description","categories","website","email","stale","latitude","longitude","businessHours","structuredAddress"]);(0,d.useEffect)((()=>{new S.default.ViewBusinessProfile({viewBusinessProfileAction:S.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_IMPRESSION}).commit()}),[]);const o=(e,t,a,n)=>{const i=n?(e=>{const{streetAddress:t,localizedCityName:a,zipCode:n}=e;return t&&a&&n?r.fbt._("{streetAddress}, {city} {zipCode}",[r.fbt._param("streetAddress",t),r.fbt._param("city",a),r.fbt._param("zipCode",n)],{hk:"1McVXv"}).toString():t&&a?r.fbt._("{streetAddress}, {city}",[r.fbt._param("streetAddress",t),r.fbt._param("city",a)],{hk:"1zyKhk"}).toString():t})(n):null;let s,o;if(null!=t&&null!=a&&(s=(0,y.jsx)("div",{style:{height:150},className:h.default.businessMap,children:(0,y.jsx)(M.default,{lat:t,lng:a,name:i||e,width:565,height:150})})),i){let e;e=null!=t&&null!=a?(0,j.getMapUrl)(t,a,i):(0,j.getSearchUrl)(i),o=(0,y.jsx)("div",{className:h.default.address,children:(0,y.jsx)(b.ExternalLink,{href:e,children:(0,y.jsx)(v.EmojiText,{selectable:!0,direction:"auto",text:i})})})}return o||s?(0,y.jsxs)(I,{icon:"business-address",children:[o,s]}):null};t=(0,s.canSeeSMBUpsell)()?(0,y.jsx)(P,{contact:a}):(0,y.jsx)(w,{contact:a});let l,u,f,p,m,g,k;const N=n;if(N.stale)l=(0,y.jsx)("div",{className:h.default.contactBusinessInfoSpinner,children:(0,y.jsx)(T.Spinner,{size:20,stroke:5})});else{var D;if(u=(null===(D=N.categories)||void 0===D?void 0:D.length)?(0,y.jsx)(I,{icon:"business-category",children:(0,y.jsx)(v.EmojiText,{selectable:!0,direction:"auto",text:N.categories.map((e=>e.localized_display_name)).join(C.default.t(257))})}):null,f=N.description?(0,y.jsx)(I,{icon:"business-description",children:(0,y.jsx)(_.default,{text:N.description,textLimit:i.default.BUSINESS_DESCRIPTION_INFO_PANEL_TRUNC_LENGTH,children:e=>{let{textLimit:t}=e;return(0,y.jsx)(v.EmojiText,{selectable:!0,direction:"auto",breakWord:!0,text:N.description,textLimit:t})}})}):null,p=o(a.name,N.latitude,N.longitude,N.structuredAddress),N.website&&Array.isArray(N.website)&&N.website.length&&(m=N.website.map(((e,t)=>{const a=(0,E.getWebsiteLink)(e),n=(0,y.jsx)(v.EmojiText,{selectable:!0,direction:"auto",text:e}),i=(0,y.jsx)(b.ExternalLink,{className:h.default.link,href:a,children:n});return(0,y.jsx)(I,{icon:"business-website",children:i},t)}))),N.businessHours&&(g=(0,y.jsx)(A,{businessHours:N.businessHours})),N.email){const e=(0,y.jsx)(v.EmojiText,{selectable:!0,direction:"auto",text:N.email}),t=(0,y.jsx)(b.ExternalLink,{className:h.default.link,href:`mailto:${N.email}`,children:e});k=(0,y.jsx)(I,{icon:"business-email",dir:"auto",children:t})}}let R;(l||null!=p||u||f||null!=g||k||m)&&(R=(0,y.jsx)(x.default,{theme:"padding",children:(0,y.jsxs)("div",{className:h.default.contactBusinessInfo,children:[l,p,u,f,g,k,m]})}));return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(x.default,{children:t}),R]})};var i=n(a(364369)),s=a(408139),o=a(914597),l=n(a(294184)),r=a(548360),d=a(667294),c=a(735461),u=n(a(962138)),f=n(a(100955)),h=n(a(652898)),p=a(393170),m=n(a(435721)),g=n(a(464738)),x=n(a(833308)),v=a(965417),_=n(a(217080)),b=a(912591),C=n(a(914296)),M=n(a(183452)),j=a(808384),S=n(a(11339)),E=a(526316),T=a(111054),k=n(a(23217)),y=a(785893);function P(e){let{contact:t}=e;const a=t.verifiedLevel===p.VERIFIED_LEVEL.HIGH?r.fbt._("Official business account",null,{hk:"1KruJ"}):r.fbt._("Business account",null,{hk:"2lzdAg"});return(0,y.jsx)(m.default,{a8nText:"business-title",onClick:o.ModalManager.open((0,y.jsx)(f.default,{contact:t})),side:(0,y.jsx)(k.default,{className:h.default.infoIcon,display:"inline",name:"info"}),children:a})}function A(e){let{businessHours:t}=e;const[a,n]=(0,d.useState)(!0),i=(0,E.getBusinessHours)(t).map((e=>{const{day:t,hours:n,first:i}=e;return!i&&a?null:(0,y.jsx)(N,{day:t,hours:n,first:i,collapsed:a},t)}));return(0,y.jsx)(I,{icon:"business-hours",onClick:()=>n(!a),children:i})}function w(e){let t,{contact:a}=e;switch(a.verifiedLevel){case p.VERIFIED_LEVEL.HIGH:t=r.fbt._("Official business account",null,{hk:"1KruJ"});break;case p.VERIFIED_LEVEL.LOW:case p.VERIFIED_LEVEL.UNKNOWN:t=r.fbt._("Business account",null,{hk:"2lzdAg"})}return(0,y.jsx)(g.default,{a8nText:"business-title",className:h.default.businessTitleText,onClick:()=>{o.ModalManager.open((0,y.jsx)(u.default,{contact:a}))},children:t})}const N=e=>{const t=e.first?(0,y.jsx)("div",{className:h.default.businessHoursChevron,role:"button",children:(0,y.jsx)(k.default,{className:e.collapsed?"":h.default.flipSvg,display:"inline",name:"chevron-down-alt"})}):null;return(0,y.jsxs)("div",{className:h.default.businessHoursRow,children:[(0,y.jsx)("div",{className:h.default.businessHoursDay,children:(0,y.jsx)(v.EmojiText,{direction:"auto",text:e.day})}),(0,y.jsx)("div",{className:h.default.businessHoursHours,children:(0,y.jsx)(v.EmojiText,{direction:"auto",text:e.hours})}),t]})},I=e=>(0,y.jsxs)("div",{className:(0,l.default)(h.default.dataRow,e.className),onClick:e.onClick,children:[(0,y.jsx)("div",{className:h.default.dataRowIcon,children:(0,y.jsx)(k.default,{name:e.icon})}),(0,y.jsx)("div",{className:h.default.dataRowText,children:e.children})]})},918408:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{contact:t,businessProfile:a,onOpenStatus:n,onProductCatalog:m,onProfilePicLoad:g,onProfilePicClick:x}=e;const{businessHours:v,categories:_}=(0,s.useModelValues)(a,["businessHours","categories"]),b=(0,f.jsx)(l.default,{contact:t});let C;null!=_&&_.length>0&&(C=(0,f.jsx)("div",{className:(0,i.default)(p),children:_.map((e=>e.localized_display_name)).join(u.default.t(256))}));const M=v?(0,f.jsx)(r.BusinessOpenHours,{hours:v}):null,j=t.businessProfile?(0,f.jsx)(d.default,{contact:t,businessProfile:t.businessProfile,onClick:x,onOpenStatus:n,onLoad:g}):null;return(0,f.jsxs)(c.default,{theme:"padding-no-margin",children:[j,(0,f.jsxs)("div",{className:(0,i.default)(h),children:[b,C,M,(0,f.jsx)(o.default,{contact:t,onProductCatalog:m})]})]})};var i=n(a(156720)),s=a(735461),o=n(a(781896)),l=n(a(433253)),r=a(587185),d=n(a(724697)),c=n(a(833308)),u=n(a(914296)),f=a(785893);const h={textAlign:"qfejxiq4"},p={marginTop:"tt8xd2xn",marginEnd:"jnwc1y2a",marginBottom:"brac1wpa",marginStart:"svoq16ka",fontSize:"f8jlpxt4",color:"sbs3osm6",lineHeight:"jgi8eev7"}},523073:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{contact:t}=e;const{status:a}=(0,s.useModelValues)(t.getStatus(),["status"]);return""===a?null:(0,d.jsx)(o.ChatInfoDrawerSection,{a8nText:"section-about",title:i.fbt._("About",null,{hk:"4qoAfH"}),children:(0,d.jsx)(r.TextSpan,{theme:"title",size:"16",children:(0,d.jsx)(l.default,{id:t.id})})})};var i=a(548360),s=a(735461),o=a(898792),l=n(a(273561)),r=a(113923),d=a(785893)},93861:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,l.useModelValues)(e.contact,["commonGroups"]).commonGroups,[a,n]=(0,s.useState)(!0);(0,s.useEffect)((()=>{(0,f.findCommonGroups)(e.contact).catch((e=>{throw __LOG__(4,!0,new Error,!0)`get from participants table failed`,SEND_LOGS("get from participants table failed when finding common groups: "+e),new Error("get from participants table failed")}))}),[]);const g=(0,o.default)(t,["add","remove"],(()=>{if(!t)return[];let e=t;return e.length>d.INFO_DRAWER_MAX_ROWS&&a&&(e=e.slice(0,d.INFO_DRAWER_MAX_ROWS)),e.map((e=>({itemKey:e.id.toString(),chat:e,height:68})))}),[a]),x=()=>{n(!1)},v=(t,a)=>{i.Cmd.openChatFromUnread(a).then((e=>{e&&c.ComposeBoxActions.focus(a)})),e.onClose()};if(!t||0===t.length)return null;let _;if(t.length>d.INFO_DRAWER_MAX_ROWS&&a){const e=t.length-d.INFO_DRAWER_MAX_ROWS;_=(0,m.jsx)(u.default,{numMore:e,onClick:x})}const b=p.default.t(212,{number:p.default.n(t.length),_plural:t.length});return(0,m.jsxs)(d.ChatInfoDrawerListSection,{a8nText:"section-common-groups",title:b,children:[(0,m.jsx)(h.FlatList,{flatListController:e.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:g,renderItem:e=>{const{chat:t}=e;return(0,m.jsx)(r.Chat,{chat:t,theme:"chat-info",mode:r.Mode.INFO,onClick:v},t.id.toString())}}),_]})};var i=a(781572),s=a(667294),o=n(a(196570)),l=a(735461),r=a(865511),d=a(898792),c=a(188172),u=n(a(31808)),f=a(344663),h=a(747915),p=n(a(914296)),m=a(785893)},537380:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(81109)),s=a(450796),o=a(892844),l=a(492574),r=a(88555),d=a(911508),c=a(781572),u=a(141455),f=a(367913),h=a(408139),p=a(914597),m=a(857476),g=a(58181),x=a(694816),v=a(978820),_=a(548360),b=a(667294),C=n(a(156720)),M=n(a(616223)),j=a(735461),S=n(a(955010)),E=n(a(895402)),T=n(a(456873)),k=n(a(76864)),y=n(a(130619)),P=a(957501),A=a(990347),w=a(794010),N=n(a(918408)),I=a(599989),D=n(a(542953)),R=a(669951),O=n(a(575116)),L=a(898792),G=n(a(105406)),B=n(a(523073)),F=n(a(93861)),U=n(a(487624)),V=n(a(897140)),H=n(a(45301)),q=n(a(47091)),Y=a(362632),W=n(a(60453)),z=n(a(69637)),K=n(a(464738)),X=a(427394),Z=a(994790),Q=n(a(833308)),$=a(561086),J=n(a(630855)),ee=n(a(777577)),te=a(529805),ae=n(a(914296)),ne=n(a(235580)),ie=n(a(243895)),se=a(656057),oe=a(582145),le=n(a(11339)),re=n(a(103721)),de=n(a(871528)),ce=a(397567),ue=a(409153),fe=n(a(268132)),he=n(a(696222)),pe=a(118146),me=n(a(23217)),ge=a(113923),xe=a(950452),ve=a(785893);const _e={body:{flexGrow:"tvf2evcx",flexShrink:"oq44ahr5",flexBasis:"lb5m6g5c",paddingBottom:"s9fl9ege"},lastSectionRow:{marginBottom:"brac1wpa"}};function be(e){let{contact:t,catalogContext:a,onProductDetail:n,onProductCatalog:i}=e;const s=I.CatalogCollection.get(t.id);if(!s)return null;let o="",l=!1;(0,h.canSeeBizProfileV3)()&&(o=_.fbt._("See all",null,{hk:"3dTwyT"}),l=!0);const{session:r}=a;return r.isAccidental()?null:(0,w.hasShop)(t.businessProfile)?(0,h.bannedShopsEnabled)()&&(0,w.isShopBanned)(t.businessProfile)?null:(0,ve.jsx)(he.default,{businessProfile:t.businessProfile,catalog:s,subtitle:o,hideIncompleteRows:l}):(0,ve.jsx)(D.default,{onProductDetail:n,onProductCatalog:i,catalog:s,subtitle:o,hideIncompleteRows:l,shouldLog:!0})}function Ce(e,t){const{onVerification:a,onClose:n,onProductDetail:w,onProductCatalog:D,canLogQpl:he=!0}=e,Ce=(0,E.default)(),Me=(0,b.useContext)(X.DrawerContext),je=(0,j.useModelValues)(e.contact,["id","formattedName","formattedUser","formattedShortName","isBusiness","isEnterprise","isMyContact","commonGroups","businessProfile","showBusinessCheckmarkAsPrimary","showBusinessCheckmarkAsSecondary","verifiedName","verifiedLevel","name","notifyName","labels","businessCatalog","isMe","statusMute","displayName"]),Se=(0,M.default)((()=>new J.default)),Ee=(0,b.useRef)(!1),[Te,ke]=(0,b.useState)(100),ye=(0,b.useMemo)((()=>R.ChatCollection.get(je.id)),[je.id]);(0,b.useEffect)((()=>{je.businessProfile&&!je.businessProfile.stale&&je.businessCatalog&&I.CatalogCollection.findCarouselCatalog(je.id).catch((0,s.filteredCatch)(l.ServerStatusCodeError,(()=>{__LOG__(3)`Failed to fetch product catalog in contact drawer from server`}))),(0,r.isMDBackend)()&&(0,g.getFanOutListJob)([je.id,(0,v.assertGetMe)()]).then((e=>{(0,f.ensureE2ESessions)(e)}));const{session:t}=(0,ce.getProductCatalogContext)(Me);if(t.isAccidental())u.DrawerManager.setDrawerContext("right",(0,ce.buildProductCatalogContext)(new ue.ProductCatalogSession,(0,Y.getMaybeBizPlatformForLogging)(je.id.toString()),le.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_PROFILE));else if(je.isBusiness&&(0,h.canSeeBizProfileV3)()){var a,n;if(!(je.id===(0,v.getMaybeMeUser)()))(0,P.logProfileImpression)((0,ce.getProductCatalogSessionId)(Me),e.profileEntryPoint,!!(null===(a=je.businessProfile)||void 0===a?void 0:a.isProfileLinked),!!(null===(n=je.businessProfile)||void 0===n?void 0:n.coverPhoto))}he&&je.businessProfile&&(0,se.qplEndProfileView)(m.QuickLogActionType.SUCCESS)}),[]),(0,b.useEffect)((()=>{if((0,h.btmThreadsLoggingEnabled)()){var e;const t=null===(e=(0,v.getMaybeMeUser)())||void 0===e?void 0:e.equals(je.id),{session:a}=(0,ce.getProductCatalogContext)(Me);a.isAccidental()||t||!(null==ye?void 0:ye.id)||(0,d.handleActivitiesForChatThreadLogging)([{activityType:"profileViews",ts:(0,o.unixTime)(),chatId:ye.id}])}}),[]),(0,S.default)((()=>{const{session:e}=(0,ce.getProductCatalogContext)(Me);var t,a;e.isAccidental()||je.isBusiness&&(0,h.canSeeBizProfileV3)()&&(0,P.logProfileExit)((0,ce.getProductCatalogSessionId)(Me),Te,null===(t=je.businessProfile)||void 0===t?void 0:t.isProfileLinked,!!(null===(a=je.businessProfile)||void 0===a?void 0:a.coverPhoto))}));const Pe=()=>{n?n():null==Ce||Ce.requestDismiss()},Ae=e=>{if(!Ee.current)return void x.ToastManager.open((0,ve.jsx)(xe.Toast,{id:(0,xe.genId)(),msg:_.fbt._("No profile photo",null,{hk:"2bdeTO"})}));const t=e.target;p.ModalManager.openMedia((0,ve.jsx)(de.default,{contact:je,profilePicThumb:je.getProfilePicThumb(),animateBorderRadius:!0,getZoomNode:e=>{e(t)}}),{transition:"profile-viewer",uim:Ce})},we=()=>{Ee.current=!0},Ne=e=>{(0,oe.qplStartProductView)("ContactInfo"),w(e)},Ie=e=>{const t=Math.floor(100*(1+e.currentTarget.scrollTop/e.currentTarget.offsetHeight));t>Te&&ke(t)},De=je.isEnterprise?null:(0,ve.jsx)(F.default,{contact:je,onClose:Pe,flatListController:Se.current});let Re=null;e.onMediaGallery&&ye&&(Re=(0,ve.jsx)(G.default,{chat:ye,onMediaGallery:e.onMediaGallery}));let Oe=null;ye&&(Oe=(0,ve.jsx)(ie.default,{chat:ye,onClick:e.onLiveLocation}));let Le=null,Ge=null;if(je&&je.isBusiness&&je.businessProfile&&je.businessCatalog){const e=(0,ve.jsx)(be,{contact:je,catalogContext:(0,ce.getProductCatalogContext)(Me),onProductDetail:Ne,onProductCatalog:D});(0,h.canSeeBizProfileV3)()?Ge=e:Le=e}const Be=ye&&ye.mute.canMute()?(0,ve.jsx)(re.default,{chat:ye,mute:ye.mute,settings:fe.default}):null;let Fe,Ue;if(e.onStarred&&(Fe=(0,ve.jsx)(H.default,{chat:ye,onStarred:e.onStarred,onContactCard:e.onContactCard})),(0,te.isKeepInChatReadEnabled)()){const t=(0,ve.jsx)(ge.TextSpan,{theme:"title",size:"16",children:_.fbt._("Kept Messages",null,{hk:"2rIi48"})});Ue=(0,ve.jsx)(L.ChatInfoDrawerSection,{a8nText:"section-kept-messages",xstyle:_e.lastSectionRow,children:(0,ve.jsx)(O.default,{a8nText:"block-kept-messages",side:"chevron",icon:"keep-in-chat",onClick:e.onKept,title:t})})}const Ve=ye&&ye.shouldShowEphemeralSetting()?(0,ve.jsx)($.EphemeralSettingRow,{onClick:e.onEphemeral,chat:ye,testid:"contact-info-dm-setting-row"}):null,He=(0,r.isMDBackend)()?(0,ve.jsx)(U.default,{contact:(0,pe.unproxy)(je),onVerificationClick:()=>{a()}}):null;let qe=null;(Be||Ve||He)&&(qe=(0,ve.jsxs)(L.ChatInfoDrawerSection,{children:[Be,Ve,He]}));const Ye=!je.isBusiness,We=Ye?null:(0,ve.jsx)(T.default,{contact:(0,pe.unproxy)(je)}),ze=Ye?(0,ve.jsx)(B.default,{contact:(0,pe.unproxy)(je)}):null,Ke=(0,h.canSeeBizProfileV3)()&&je.isBusiness&&je.businessProfile?(0,ve.jsx)(N.default,{contact:je,onProfilePicLoad:we,onProfilePicClick:Ae,onOpenStatus:()=>{var e,t;(0,P.logStatusClick)((0,ce.getProductCatalogSessionId)(Me),null===(e=je.businessProfile)||void 0===e?void 0:e.isProfileLinked,!!(null===(t=je.businessProfile)||void 0===t?void 0:t.coverPhoto))},businessProfile:je.businessProfile,onProductCatalog:D}):(0,ve.jsx)(q.default,{contact:je,onDetailImageLoad:we,onDetailImageClick:Ae});let Xe,Ze,Qe,$e=null;var Je,et;je.isBusiness&&je.businessProfile&&((0,h.canSeeBizProfileV3)()&&je.businessProfile?($e=(0,ve.jsx)(y.default,{businessProfile:je.businessProfile}),Xe=(0,ve.jsx)(k.default,{contact:je}),(null!==(Je=null===(et=je.labels)||void 0===et?void 0:et.length)&&void 0!==Je?Je:0)>0&&(Ze=(0,ve.jsx)(Q.default,{theme:"padding",children:(0,ve.jsx)(ee.default,{labels:je.labels,theme:"standalone"})})),Qe=Ie):je.businessProfile&&($e=(0,ve.jsx)(A.BusinessProfile,{contact:je,businessProfile:je.businessProfile})));const tt={title:_.fbt._("Contact info",null,{hk:"LUJtH"}),type:Z.DRAWER_HEADER_TYPE.SMALL,rtlFixIfOnDarwin:!0,onCancel:Pe};let at;return je.businessProfile&&!0===je.businessProfile.isProfileLinked&&(0,h.bizLinkedAccountsEnabled)()&&(0,h.canViewBizLinkedAccounts)()&&(at=(0,ve.jsx)(ne.default,{businessProfile:je.businessProfile,rowTheme:"linked-account-consumer"})),(0,ve.jsxs)(W.default,{ref:t,theme:"striped",testid:"contact-info-drawer",children:[(0,ve.jsx)(Z.DrawerHeader,(0,i.default)({},tt)),(0,ve.jsx)(z.default,{flatListControllers:[Se.current],onScroll:Qe,children:(0,ve.jsxs)("section",{className:(0,C.default)(_e.body),children:[Ke,Xe,Ze,Ge,$e,at,Oe,Le,ze,Re,Fe,Ue,qe,We,undefined,De,(0,ve.jsx)(V.default,{contact:je}),(0,ve.jsx)(L.ChatInfoDrawerButtonsSection,{children:ye?(0,ve.jsx)(K.default,{a8nText:"li-delete-chat",icon:(0,ve.jsx)(me.default,{name:"delete"}),color:"danger",onClick:()=>{const e=R.ChatCollection.assertGet(je.id);c.Cmd.deleteOrExitChat(e)},theme:"chat-info",children:ae.default.t(225)}):null})]})})]},"contact-info-modal")}var Me=(0,b.forwardRef)(Ce);t.default=Me},487624:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onVerificationClick:t}=e,a=(0,r.useModelValues)(e.contact,["id","privacyMode"]),n=function(e,t){if((0,i.default)(t.user))return{text:l.fbt._("Click to learn how messages and calls are secured.",null,{hk:"1UxhjE"}),title:l.fbt._("Security",null,{hk:"3j3j0a"}),onClick:()=>{(0,f.default)(l.fbt._("WhatsApp secures your messages and calls with this account.",null,{hk:"18Ci1q"}),(0,s.getSupportChatSafetyFaqUrl)(),l.fbt._("Learn more about chats with WhatsApp Support.",null,{hk:"1an25A"}))}};switch(e){case o.ReducedPrivacyMode.E2EE:return null;case o.ReducedPrivacyMode.BSP:return{text:l.fbt._("This business works with other companies to manage this chat. Click to learn more.",null,{hk:"VbOOZ"}),title:l.fbt._("Security",null,{hk:"3j3j0a"}),onClick:()=>{(0,f.default)((0,c.formatBspModalText)(),(0,s.getE2EEnterpriseFaqUrl)())}};case o.ReducedPrivacyMode.FB:return{text:l.fbt._("This business uses a secure service from Meta to manage this chat. Click to learn more.",null,{hk:"3wvGOC"}),title:l.fbt._("Security",null,{hk:"3j3j0a"}),onClick:()=>{(0,f.default)((0,c.formatFbModalText)(),(0,s.getE2EEnterpriseFaqUrl)())}}}}((0,o.getReducedPrivacyMode)(a.privacyMode),a.id);if(n)return(0,p.jsx)(d.default,{highlightSurface:u.default.PRIVACY_HIGHLIGHT_SURFACE_ENUM.INFO_SCREEN_CONTACT,title:n.title,text:n.text,onClick:n.onClick});const m=(0,h.isVoiceCallEnabled)()||(0,h.isVideoCallEnabled)()?l.fbt._("Messages and calls are end-to-end encrypted. Click to verify.",null,{hk:"GtGQH"}):l.fbt._("Messages are end-to-end encrypted. Click to verify.",null,{hk:"1AqhWR"});return(0,p.jsx)(d.default,{highlightSurface:u.default.PRIVACY_HIGHLIGHT_SURFACE_ENUM.INFO_SCREEN_CONTACT,onClick:t,text:m})};var i=n(a(726682)),s=a(221310),o=a(108197),l=a(548360),r=a(735461),d=n(a(404584)),c=a(726722),u=n(a(11339)),f=n(a(632162)),h=a(669594),p=a(785893)},897140:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,l.useModelValues)(e.contact,["displayName","isBusiness","isContactBlocked"]);let a=null;if(t.isContactBlocked){const n=h.default.t(214,{contact:t.displayName});a=(0,_.jsx)(f.default,{a8nText:"li-unblock",color:"success",icon:(0,_.jsx)(v.default,{name:"settings-blocked",directional:!0}),onClick:()=>{i.ModalManager.open((0,_.jsx)(u.default,{okText:h.default.t(626),onOK:()=>{(0,r.unblockContact)(e.contact),i.ModalManager.close()},cancelText:o.fbt._("Cancel",null,{hk:"H0gNq"}),onCancel:()=>i.ModalManager.close(),children:(0,_.jsx)(p.default,{id:627,params:{contact:(0,_.jsx)(m.Name,{contact:e.contact})}})}))},theme:"chat-info",children:n})}else{const n=h.default.t(211,{contact:t.displayName});a=(0,_.jsx)(f.default,{a8nText:"li-block",color:"danger",icon:(0,_.jsx)(v.default,{name:"settings-blocked",directional:!0}),onClick:()=>{i.ModalManager.open((0,_.jsx)(u.default,{onOK:()=>{(0,r.blockContact)(e.contact),i.ModalManager.close()},okText:h.default.t(148),onCancel:()=>i.ModalManager.close(),cancelText:o.fbt._("Cancel",null,{hk:"H0gNq"}),children:o.fbt._("Block {contact}? Blocked contacts will no longer be able to call you or send you messages.",[o.fbt._param("contact",(0,_.jsx)(m.Name,{contact:e.contact}))],{hk:"fQATz"})}))},theme:"chat-info",children:n})}let n=o.fbt._("Report business",null,{hk:"2Tvnn8"});t.isBusiness||(n=h.default.t(560,{contactInfo:t.displayName}));const b=(0,_.jsx)(f.default,{a8nText:"li-report-spam",color:"danger",icon:(0,_.jsx)(v.default,{name:"thumbs-down",directional:!0}),onClick:()=>{i.ModalManager.open((0,_.jsx)(g.default,{isMessage:!1,isBusiness:e.contact.isBusiness,isGroupChat:!1,onReport:()=>{const t=d.ChatCollection.get(e.contact.id);t&&(0,x.sendSpamReport)(t,s.SpamFlow.Account),i.ModalManager.close()},onReportBlockClear:()=>{const t=d.ChatCollection.get(e.contact.id);t&&(0,x.sendSpamBlockClear)(t,s.SpamFlow.Block),i.ModalManager.close()},onCancel:()=>i.ModalManager.close()}))},theme:"chat-info",children:n});return(0,_.jsxs)(c.ChatInfoDrawerButtonsSection,{children:[a,b]})};var i=a(914597),s=a(387674),o=a(548360),l=a(735461),r=a(780140),d=a(669951),c=a(898792),u=n(a(452665)),f=n(a(464738)),h=n(a(914296)),p=n(a(356074)),m=a(812176),g=n(a(530934)),x=a(719569),v=n(a(23217)),_=a(785893)},45301:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{chat:t,onStarred:a,onContactCard:n}=e,u=null;const f=t&&t.getReceivedVcardMsgs();if(i.LegacyPhoneFeatures.supportsFeature(i.LegacyPhoneFeatures.F.INDEX_RECEIVED_VCARD)&&(null==f?void 0:f.length)){const e=(0,c.jsx)(d.TextSpan,{theme:"title",children:(0,c.jsx)(r.default,{count:f.length})});u=(0,c.jsx)(o.default,{a8nText:"block-starred-messages",side:"chevron",icon:"account-box",onClick:n,title:e})}const h=(0,c.jsx)(d.TextSpan,{theme:"title",size:"16",children:s.fbt._("Starred messages",null,{hk:"4wVbNG"})});return(0,c.jsxs)(l.ChatInfoDrawerSection,{a8nText:"section-starred-messages",children:[(0,c.jsx)(o.default,{a8nText:"block-starred-messages",side:"chevron",icon:"star",onClick:a,title:h}),u]})};var i=a(438184),s=a(548360),o=n(a(575116)),l=a(898792),r=n(a(955944)),d=a(113923),c=a(785893)},47091:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let t,{contact:a,onDetailImageLoad:n,onDetailImageClick:s}=e;if(a.isMyContact)t=(0,i.widToFormattedUser)(a.id);else{const e=a.notifyName;null!=e&&(t=`~${e}`)}return(0,x.jsxs)(d.default,{theme:"padding-large",children:[(0,x.jsx)("div",{className:(0,o.default)(v.avatar),children:(0,x.jsx)(r.DetailImage,{id:a.id,size:r.DetailImageSize.Large,loader:!0,onLoad:n,onClick:s,quality:r.DetailImageQuality.High})}),(0,x.jsxs)(c.FlexColumn,{align:"center",children:[(0,x.jsx)(m.TextHeader,{level:"2",size:"24",xstyle:v.contactName,children:(0,x.jsx)(f.Name,{contact:a,selectable:!0,breakWord:!0})}),null!=t&&(0,x.jsx)("div",{className:(0,o.default)(v.secondaryWrapper),children:(0,x.jsx)(h.SelectableSpan,{dir:"auto",selectable:!0,children:(0,x.jsx)(m.TextSpan,{size:"16",color:"secondary",children:t})})})]}),(0,x.jsx)(b,{contact:a}),(0,x.jsx)(u.default,{labels:a.labels})]})};var i=a(562054),s=a(548360),o=n(a(156720)),l=n(a(839902)),r=a(288984),d=n(a(833308)),c=a(429623),u=n(a(777577)),f=a(812176),h=a(552596),p=a(118146),m=a(113923),g=n(a(109582)),x=a(785893);const v={avatar:{display:"p357zi0d",justifyContent:"ac2vgrno",marginBottom:"pz0xruzv"},secondaryWrapper:{lineHeight:"a4ywakfo",marginTop:"qt60bha0"},contactName:{textAlign:"qfejxiq4"}};const _={container:{marginTop:"a4rz4n5c",marginBottom:"inww9tbj"},button:{marginStart:"nzcjdldu",marginEnd:"gqi0zhd6"}};function b(e){let{contact:t}=e;const a=(0,g.default)((0,p.unproxy)(t));return a.isVideoCallEnabled||a.isVoiceCallEnabled?(0,x.jsxs)(c.FlexRow,{justify:"center",xstyle:_.container,children:[(0,x.jsx)(l.default,{icon:"voice-call-filled",iconWidth:19,label:s.fbt._("Audio",null,{hk:"1b375N"}),a8nText:"contact-action voice-call-button",xstyle:_.button,disabled:!a.canStartVoiceCall,onClick:a.startVoiceCall}),(0,x.jsx)(l.default,{icon:"chat-info-video",label:s.fbt._("Video",null,{hk:"3zMUsJ"}),a8nText:"contact-action video-call-button",xstyle:_.button,disabled:!a.canStartVideoCall,onClick:a.startVideoCall})]}):null}},750890:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a;let{onClick:n,parentGroupMetadata:m,parentGroupChat:g}=e;const{joinedSubgroups:x,unjoinedSubgroups:v,id:_}=(0,o.useModelValues)(m,["joinedSubgroups","unjoinedSubgroups","id"]),{name:b}=(0,o.useModelValues)(g.contact,["name"]);(0,s.useEffect)((()=>{(0,u.queryAndUpdateSubgroupsMetadata)(_)}),[_]);const C=(null!==(t=v.length)&&void 0!==t?t:0)+(null!==(a=x.length)&&void 0!==a?a:0),M=i.fbt._("Community",null,{hk:"2P4Qwb"});return(0,p.jsx)(d.default,{theme:"no-padding",children:(0,p.jsx)(l.default,{image:(0,p.jsx)(r.DetailImage,{id:_,shape:r.DetailImageShape.Squircle,size:60}),primary:(0,p.jsx)(c.EmojiText,{text:b,ellipsify:!0}),onClick:n,theme:"community-home",secondary:(0,p.jsxs)(h.TextSpan,{size:"16",color:"secondary",children:[M," ",i.fbt._({"*":"{count} Groups",_1:"1 Group"},[i.fbt._plural(C,"count")],{hk:"38FdVG"})]}),detail:(0,p.jsx)(f.default,{color:"secondary",name:"chevron-right-alt",directional:!0})})})};var i=a(548360),s=a(667294),o=a(735461),l=n(a(744356)),r=a(288984),d=n(a(833308)),c=a(965417),u=a(642906),f=n(a(23217)),h=a(113923),p=a(785893)},360236:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{chat:t}=e,a=(0,l.useOptionalModelValues)(t.groupMetadata,["groupType"]);let n;n=(0,i.communitiesEnabled)()&&(null==a?void 0:a.groupType)===d.GroupType.DEFAULT_ANNOUNCEMENT_GROUP?(0,c.jsx)("div",{className:(0,o.default)(u),children:s.fbt._("",null,{hk:"4kc4Kr"})}):s.fbt._("Add group description",null,{hk:"BVsoQ"});return(0,c.jsx)(r.default,{chat:e.chat,showFullDescription:e.showFullDescription,editRestrictionText:s.fbt._("Only admins can edit this group's info",null,{hk:"1a2ztg"}),a8n:"group-info-drawer-description-title-input",emptyValuePlaceholder:n})};var i=a(408139),s=a(548360),o=n(a(156720)),l=a(735461),r=n(a(181681)),d=a(455981),c=a(785893);const u={color:"tviruh8d",fontSize:"enbbiyaj"}},748204:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(699964)),s=a(227101),o=a(88555),l=a(173679),r=a(221310),d=a(408139),c=a(914597),u=a(694816),f=a(548360),h=a(667294),p=n(a(156720)),m=n(a(859312)),g=n(a(616223)),x=a(587550),v=a(735461),_=n(a(895402)),b=n(a(16947)),C=a(669951),M=n(a(575116)),j=a(898792),S=n(a(105406)),E=n(a(60453)),T=n(a(69637)),k=a(994790),y=n(a(833308)),P=n(a(104061)),A=a(910081),w=n(a(404584)),N=a(561086),I=n(a(630855)),D=n(a(750890)),R=n(a(360236)),O=n(a(712158)),L=a(44783),G=n(a(670354)),B=n(a(460890)),F=a(542515),U=a(850743),V=a(455981),H=a(529805),q=n(a(914296)),Y=n(a(243895)),W=n(a(11339)),z=n(a(103721)),K=a(33210),X=a(407595),Z=a(574028),Q=n(a(268132)),$=a(118146),J=n(a(769171)),ee=a(71723),te=a(843745),ae=a(113923),ne=a(950452),ie=a(669594),se=a(785893);const oe={body:{flexShrink:"oq44ahr5",flexGrow:"tvf2evcx",flexBasis:"lb5m6g5c",paddingBottom:"s9fl9ege"},announcementGroupDisclaimer:{textAlign:"qfejxiq4",paddingTop:"b7n2qyd4",paddingBottom:"jd93c9cp",paddingEnd:"h1a80dm5",paddingStart:"sta02ykp",lineHeight:"jgi8eev7"},lastSectionRow:{marginBottom:"brac1wpa"}},le=(0,ne.genId)("max_participant_toast");function re(e,t){const{onVerification:a,onClose:n}=e,re=(0,_.default)(),de=(0,m.default)(),ce=(0,v.useModelValues)(e.chat,["mute","id","pendingAction","liveLocation"]),ue=(0,v.useModelValues)(e.groupMetadata,["id","cachedDeviceCount","cachedDeviceSizeBucket","participants","pendingParticipants","announce","support","parentGroup","groupType"]);(0,v.useModelValues)(e.contact,["name","id","pendingAction"]);const fe=(0,g.default)((()=>new W.default.UiAction({uiActionType:ue.groupType===V.GroupType.DEFAULT_ANNOUNCEMENT_GROUP?W.default.UI_ACTION_TYPE.DEFAULT_SUBGROUP_INFO_OPEN:W.default.UI_ACTION_TYPE.GROUP_INFO_OPEN,uiActionPreloaded:!0}))),he=(0,g.default)((()=>new I.default)),pe=(0,g.default)((()=>new I.default)),me=(0,h.useRef)(null);(0,x.useListener)(ue.participants,["add","remove","reset","sort","change:isAdmin","change:isSuperAdmin"],de),(0,x.useListener)(ue.pendingParticipants,["add","remove","reset"],de);const ge=()=>{const e=(0,d.getGroupSizeLimit)();if(ue.participants.length>=e){const t=q.default.t(48,{max:e});u.ToastManager.open((0,se.jsx)(ne.Toast,{msg:t,id:le}))}else{const e=(0,se.jsx)(b.default,{chat:(0,$.unproxy)(ce),pushTransition:"none",popTransition:"none"});c.ModalManager.open(e,{transition:"modal-flow"})}},xe=()=>{if((0,s.isPrivacyNarrativeV1Enabled)()&&(0,K.shouldShowNewE2eInfoModal)((0,$.unproxy)(ce))){const e=(0,r.getE2EFaqUrl)();c.ModalManager.open((0,se.jsx)(A.E2eInfoModalV2,{highlightSurface:W.default.PRIVACY_HIGHLIGHT_SURFACE_ENUM.INFO_SCREEN_GROUP,url:e}))}else c.ModalManager.open((0,se.jsx)(P.default,{highlightSurface:W.default.PRIVACY_HIGHLIGHT_SURFACE_ENUM.INFO_SCREEN_GROUP,chatId:ce.id,e2eSubtype:"info_encrypted"}))},ve=()=>{c.ModalManager.open((0,se.jsx)(P.default,{chat:ce,chatId:ce.id,e2eSubtype:"info_encrypted"}))};let _e;if((0,h.useEffect)((()=>{(0,l.isIntegritySuspendedDefaultSubgroup)(ce)?(0,ee.openTerminatedCommunityModal)():(0,l.isTerminatedGroupOrNotMember)(ce)?(0,te.openTerminatedGroupOrNotMemberModal)():(0,l.isSuspendedGroup)(ce)&&(0,te.openSuspendedGroupModal)()}),[]),(0,h.useEffect)((()=>{ue.participants.ensureSorted();ue.pendingParticipants.ensureSorted()})),(0,h.useEffect)((()=>{const e=fe.current;if(e){const t=ue.cachedDeviceSizeBucket;null!=t&&(e.sizeBucket=t),Object.assign(e,(0,F.getGroupCountMetricsFromGroupMetadata)((0,$.unproxy)(ue))),e.markUiActionT(),e.commit(),fe.current=void 0}(0,X.logUiActionShadowPrivateStatsTestEvents)()}),[]),(0,h.useEffect)((()=>{ue.groupType===V.GroupType.DEFAULT_ANNOUNCEMENT_GROUP&&(0,Z.queryAndUpdateGroupMetadataById)(ue.id)}),[ue.id,ue.groupType]),ue.canSetGroupProperty()){const t=(0,se.jsx)(ae.TextSpan,{theme:"title",children:f.fbt._("Group settings",null,{hk:"3sS0Vl"})});_e=(0,se.jsx)(M.default,{side:"chevron",icon:"settings",onClick:e.onAdminSetting,title:t})}let be=null;e.onMediaGallery&&(be=(0,se.jsx)(S.default,{onMediaGallery:e.onMediaGallery,chat:(0,$.unproxy)(ce)}));const Ce=(0,se.jsx)(Y.default,{chat:ce,onClick:e.onLiveLocation}),Me=ce&&ce.shouldShowEphemeralSetting()?(0,se.jsx)(N.EphemeralSettingRow,{onClick:e.onEphemeral,chat:ce,groupMetadata:ue,testid:"contact-info-dm-setting-row"}):null;let je=null;if((0,d.communitiesEnabled)()&&ce&&ue.parentGroup){const t=C.ChatCollection.get(ue.parentGroup.toString());(null==t?void 0:t.groupMetadata)&&(je=(0,se.jsx)(D.default,{onClick:()=>{var t;null===(t=e.onCommunityClick)||void 0===t||t.call(e)},parentGroupMetadata:t.groupMetadata,parentGroupChat:t}))}let Se=null;(0,o.isMDBackend)()&&(Se=(0,se.jsx)(w.default,{highlightSurface:W.default.PRIVACY_HIGHLIGHT_SURFACE_ENUM.INFO_SCREEN_GROUP,onClick:xe,text:(0,ie.isGroupCallEnabled)()?f.fbt._("Messages and calls are end-to-end encrypted. Click to learn more.",null,{hk:"1l9pwW"}):f.fbt._("Messages are end-to-end encrypted. Click to learn more.",null,{hk:"2MtPh9"})})),(0,l.isSupportGroup)(ce)&&(Se=(0,se.jsx)(J.default,{onClick:ve}));const Ee=ce.mute.canMute()?(0,se.jsx)(z.default,{chat:ce,mute:ce.mute,settings:Q.default}):null;let Te,ke=null;if(e.onStarred){const t=(0,se.jsx)(ae.TextSpan,{theme:"title",size:"16",children:f.fbt._("Starred messages",null,{hk:"4wVbNG"})});ke=(0,se.jsx)(j.ChatInfoDrawerSection,{a8nText:"section-starred-messages",children:(0,se.jsx)(M.default,{a8nText:"block-starred-messages",side:"chevron",icon:"star",onClick:e.onStarred,title:t})})}if((0,H.isKeepInChatReadEnabled)()){const t=(0,se.jsx)(ae.TextSpan,{theme:"title",size:"16",children:f.fbt._("Kept Messages",null,{hk:"41CBIy"})});Te=(0,se.jsx)(j.ChatInfoDrawerSection,{a8nText:"section-kept-messages",xstyle:oe.lastSectionRow,children:(0,se.jsx)(M.default,{a8nText:"block-kept-messages",side:"chevron",icon:"keep-in-chat",onClick:e.onKept,title:t})})}let ye=null;(Ee||Se||Me)&&(ye=(0,se.jsxs)(j.ChatInfoDrawerSection,{children:[Ee,Me,Se,_e]}));const Pe=(0,o.isMDBackend)()&&e.scrollToParticipantList,Ae=ue.participants.iAmAdmin()&&ue.groupType===V.GroupType.DEFAULT_ANNOUNCEMENT_GROUP?null:(0,se.jsx)(O.default,{chat:(0,$.unproxy)(ce)}),we=ue.groupType!==V.GroupType.DEFAULT_ANNOUNCEMENT_GROUP||ue.participants.iAmAdmin()?null:(0,se.jsx)(y.default,{theme:"transparent",shadow:!1,children:(0,se.jsx)(ae.TextParagraph,{xstyle:oe.announcementGroupDisclaimer,color:"secondary",children:f.fbt._("Only admins can see all participants in this group",null,{hk:"39jP44"})})});return(0,se.jsxs)(E.default,{ref:t,theme:"striped",children:[(0,se.jsx)(k.DrawerHeader,{title:f.fbt._("Group info",null,{hk:"2SfTUZ"}),type:k.DRAWER_HEADER_TYPE.SMALL,rtlFixIfOnDarwin:!0,onCancel:()=>{n?n():null==re||re.requestDismiss()}}),(0,se.jsx)(T.default,{flatListControllers:[pe.current,he.current],children:(0,se.jsxs)("section",{className:(0,p.default)(oe.body),"data-a8n":i.default.key("group-info-drawer-body"),"data-testid":"group-info-drawer-body",children:[(0,se.jsx)(B.default,{chat:(0,$.unproxy)(ce),onAdminSetting:e.onAdminSetting,onAddParticipant:ge,onClickParticpantsCount:()=>{var e;null===(e=me.current)||void 0===e||e.scrollIntoView()}}),je,(0,se.jsx)(R.default,{chat:(0,$.unproxy)(ce),showFullDescription:e.showFullGroupDescription}),Ce,be,ke,Te,ye,undefined,(0,se.jsx)(L.GroupInfoParticipantsSection,{ref:me,chat:(0,$.unproxy)(ce),scrollToParticipantList:Pe,flatListController:he.current,onAddParticipant:ge,onOpenParticpantSearch:e=>{c.ModalManager.open((0,se.jsx)(U.GroupParticipantsFlow,{chat:(0,$.unproxy)(ce),onVerification:a,initialStep:e}),{transition:"modal-flow"})},onGroupInviteLink:e.onGroupInviteLink,onVerification:e.onVerification}),we,(0,se.jsx)(G.default,{chat:(0,$.unproxy)(ce),flatListController:pe.current}),Ae]})})]},"contact-info-modal")}var de=(0,h.forwardRef)(re);t.default=de},712158:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;let{chat:a}=e;const{parentGroup:n}=null!==(t=(0,c.useOptionalModelValues)(a.groupMetadata,["parentGroup"]))&&void 0!==t?t:{},i=(0,b.jsx)(M,{chat:a}),s=(0,b.jsx)(C,{chat:a}),o=null!=n&&(0,b.jsx)(j,{chat:a,parentGroup:n});return(0,b.jsxs)(u.ChatInfoDrawerButtonsSection,{children:[o,i,s]})};var i=n(a(348926)),s=a(781572),o=a(914597),l=a(387674),r=a(548360),d=a(667294),c=a(735461),u=a(898792),f=n(a(464738)),h=n(a(963928)),p=n(a(914296)),m=a(662664),g=n(a(530934)),x=a(719569),v=n(a(23217)),_=n(a(803409)),b=a(785893);function C(e){let{chat:t}=e;return(0,b.jsx)(f.default,{a8nText:"li-report-spam",color:"danger",icon:(0,b.jsx)(v.default,{name:"thumbs-down",directional:!0}),theme:"chat-info",onClick:()=>{o.ModalManager.open((0,b.jsx)(g.default,{isMessage:!1,isGroupChat:!0,onReport:()=>{(0,x.sendSpamReport)(t,l.SpamFlow.Group),o.ModalManager.close()},onReportExitClear:()=>{(0,x.sendSpamExitClear)(t,l.SpamFlow.Block),o.ModalManager.close()},onCancel:()=>o.ModalManager.close()}))},children:r.fbt._("Report group",null,{hk:"23NLqw"})})}function M(e){const t=(0,c.useModelValues)(e.chat,["isReadOnly"]);return(0,b.jsx)(f.default,{a8nText:"li-delete-group",icon:(0,b.jsx)(v.default,{name:"exit",directional:!0}),color:"danger",theme:"chat-info",onClick:()=>{s.Cmd.deleteOrExitChat(e.chat)},children:t.isReadOnly?p.default.t(718):r.fbt._("Exit group",null,{hk:"4BkPNr"})})}function j(e){var t;let{chat:a,parentGroup:n}=e;const s=(0,_.default)(),{isReadOnly:o,id:l,formattedTitle:u}=(0,c.useModelValues)(a,["groupMetadata","isReadOnly","id","formattedTitle"]),{joinedSubgroups:p,unjoinedSubgroups:g,participants:x}=null!==(t=(0,c.useOptionalModelValues)(h.default.get(n.toString()),["joinedSubgroups","unjoinedSubgroups","participants"]))&&void 0!==t?t:{},[C,M]=(0,d.useState)(!1);if(o||null==p||null==g||!0!==(null==x?void 0:x.iAmAdmin()))return null;const j=p.length+g.length-1,S=function(){var e=(0,i.default)((function*(){C||s.aborted||(M(!0),yield(0,m.handleRemoveGroup)(n,j,l,u),s.aborted||M(!1))}));return function(){return e.apply(this,arguments)}}();return(0,b.jsx)(f.default,{a8nText:"li-remove-group",icon:(0,b.jsx)(v.default,{name:"exit",directional:!0}),disabled:C,color:"danger",theme:"chat-info",onClick:()=>{S()},children:r.fbt._("Remove from community",null,{hk:"3xZmj5"})})}},44783:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.GroupInfoParticipantsSection=void 0;var i=n(a(145095)),s=a(892844),o=a(88555),l=a(911508),r=a(781572),d=a(408139),c=a(914597),u=a(978820),f=n(a(389867)),h=a(548360),p=a(667294),m=n(a(859312)),g=a(587550),x=a(735461),v=n(a(744356)),_=a(898792),b=a(188172),C=n(a(452665)),M=a(471174),j=a(965417),S=n(a(31808)),E=a(650101),T=a(747915),k=a(850743),y=a(455981),P=n(a(914296)),A=a(788631),w=a(389389),N=n(a(616419)),I=n(a(852711)),D=a(278756),R=n(a(23217)),O=a(718644),L=n(a(624717)),G=a(690973),B=a(785893);const F=(0,p.forwardRef)(((e,t)=>{var a,n,F;const V=(0,x.useModelValues)((0,i.default)(e.chat.groupMetadata,"props.chat.groupMetadata"),["support","size","id"]),H=(0,i.default)(null===(a=e.chat.groupMetadata)||void 0===a?void 0:a.participants,"props.chat.groupMetadata?.participants"),q=null!==(n=null==V?void 0:V.size)&&void 0!==n?n:0,Y=(null==H?void 0:H.iAmAdmin())?H.length:q,W=(0,m.default)();(0,g.useListener)(H,"add remove reset sort change:isAdmin change:isSuperAdmin",W);const[z,K]=(0,p.useState)(U(H)),X=(0,p.useRef)(),[Z,Q]=(0,p.useState)();(0,p.useEffect)((()=>{(0,o.isMDBackend)()&&e.scrollToParticipantList&&X.current&&(0,D.scrollIntoViewIfNeeded)(X.current,!1)}),[e.scrollToParticipantList]),(0,p.useImperativeHandle)(t,(()=>({scrollIntoView(){var e;null===(e=X.current)||void 0===e||e.scrollIntoView()}})));const $=(0,G.useShowPastParticipants)(e.chat);if(V.isSuspendedOrTerminated())return null;const J=(0,B.jsx)(R.default,{name:"search",color:"secondary"});let ee,te,ae;if(H.canAdd()&&!V.support){const t=(0,B.jsx)(I.default,{theme:"compact",children:(0,B.jsx)(R.default,{name:"add-user",directional:!0})});ee=(0,B.jsx)(v.default,{image:t,theme:"chat-info",primary:h.fbt._("Add participant",null,{hk:"48ECfz"}),onClick:e.onAddParticipant})}if(H.iAmAdmin()&&e.onGroupInviteLink&&!V.support){const t=(0,B.jsx)(I.default,{theme:"compact",children:(0,B.jsx)(R.default,{name:"link"})});te=(0,B.jsx)(v.default,{image:t,theme:"chat-info",primary:h.fbt._("Invite to group via link",null,{hk:"3vDtFL"}),onClick:e.onGroupInviteLink})}if(U(H)&&z){const t=H.length<=20,a=H.length-_.INFO_DRAWER_MAX_ROWS;ae=(0,B.jsx)(S.default,{numMore:a,onClick:()=>{t?K(!1):e.onOpenParticpantSearch(k.ParticipantsFlowStep.Participants)},viewAll:!t})}else $&&(ae=(0,B.jsx)(A.ListButton,{onClick:()=>{e.onOpenParticpantSearch(k.ParticipantsFlowStep.PastParticipants)},children:h.fbt._("View past participants",null,{hk:"fYGd4"})}));const ne=e=>{const t=H.get(e.id);return!!t&&(H.canPromote(t)||H.canDemote(t)||H.canRemove(t)||H.canVerifyIdentity(t))},ie=(t,a)=>{const n=H.assertGet(a.id);if(!ne(a))return;const i=[];H.canPromote(n)&&i.push((0,B.jsx)(M.DropdownItem,{a8n:"mi-grp-promote-admin",action:()=>{const t=P.default.t(199,{participant:n.contact.formattedName,subject:e.chat.contact.name});c.ModalManager.open((0,B.jsx)(C.default,{onOK:()=>{return t=!0,n.contact.pendingAction++,(0,w.promoteParticipants)(e.chat,[n]).then((()=>{n.contact.pendingAction--})),void(t&&c.ModalManager.close());var t},okText:P.default.t(447),onCancel:()=>c.ModalManager.close(),cancelText:h.fbt._("Cancel",null,{hk:"H0gNq"}),children:(0,B.jsx)(j.EmojiText,{text:t})}))},children:P.default.t(447)},"promote")),H.canRemove(n)&&i.push((0,B.jsx)(M.DropdownItem,{a8n:"mi-grp-remove-participant",action:()=>{const t=P.default.t(200,{participant:n.contact.formattedName,subject:e.chat.contact.name});c.ModalManager.open((0,B.jsx)(C.default,{onOK:()=>{return t=!0,n.contact.pendingAction++,(0,w.removeParticipants)(e.chat,[n]).then((()=>{n.contact.pendingAction--})),void(t&&c.ModalManager.close());var t},okText:P.default.t(555),onCancel:()=>c.ModalManager.close(),cancelText:h.fbt._("Cancel",null,{hk:"H0gNq"}),children:(0,B.jsx)(j.EmojiText,{text:t})}))},children:P.default.t(451)},"remove")),H.canDemote(n)&&i.push((0,B.jsx)(M.DropdownItem,{a8n:"mi-grp-verify-identify",action:()=>{n.contact.pendingAction++,(0,w.demoteParticipants)(e.chat,[n]).then((()=>{n.contact.pendingAction--})),c.ModalManager.close()},children:h.fbt._("Dismiss as admin",null,{hk:"243sNl"})},"demote-admin")),(0,o.isMDBackend)()&&H.canVerifyIdentity(n)&&i.push((0,B.jsx)(M.DropdownItem,{a8n:"mi-grp-verify-identify",action:()=>{e.onVerification&&e.onVerification(n.contact)},children:h.fbt._("Verify Security Code",null,{hk:"1vTVgt"})},"verify-identity")),Q({contactId:a.id,menu:i,anchor:t.anchor,event:t.event})},se=(e,t)=>{(0,u.isMePrimary)(t.id)||(0,E.findChat)(t.id).then((e=>{r.Cmd.openChatFromUnread(e).then((t=>{t&&((0,d.btmThreadsLoggingEnabled)()&&b.ComposeBoxActions.addMsgSendingLogAttributes(e,{handleMultiple(){(0,l.handleActivitiesForChatThreadLogging)([{activityType:"groupMembershipReplies",ts:(0,s.unixTime)(),chatId:e.id}])}}),b.ComposeBoxActions.focus(e))}))}))},oe=H.length?(0,B.jsxs)(_.ChatInfoDrawerListSection,{ref:X,a8nText:"section-participants",title:h.fbt._({"*":"{number} participants",_1:"1 participant"},[h.fbt._plural((null===(F=e.chat.groupMetadata)||void 0===F?void 0:F.groupType)===y.GroupType.DEFAULT_ANNOUNCEMENT_GROUP?Y:H.length,"number")],{hk:"bcYCT"}),titleOnClick:()=>{e.onOpenParticpantSearch(k.ParticipantsFlowStep.Participants)},subtitle:J,children:[ee,te,(0,B.jsx)(T.FlatList,{flatListController:e.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:(()=>{let e;const t=[],a=[];H.forEach((n=>{n.contact.isMe?e=n:n.isAdmin?t.push(n):a.push(n)}));let n=[];return e&&n.push(e),n=n.concat(t,a),U(H)&&z&&(n=n.slice(0,_.INFO_DRAWER_MAX_ROWS)),n.map((e=>({itemKey:e.id.toString(),id:e.id,height:68})))})(),renderItem:e=>{const{id:t}=e,a=H.get(t);if(!a)throw new T.UnknownDataError(e);const n=a.contact,i=!!Z&&f.default.equals(n.id,Z.contactId);return(0,B.jsx)(N.default,{contact:n,participant:a,onClick:se,contextEnabled:()=>ne(n),contextMenu:i,onContext:e=>ie(e,n),theme:"chat-info",showNotifyName:!0,waitIdle:!0,showStatusRingAroundProfilePhoto:!0},a.id.toString())}}),ae]}):null,le=()=>{Q(null)};let re;return Z&&(re=(0,B.jsx)(O.UIE,{displayName:"ChatContextMenu",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:le,children:(0,B.jsx)(L.default,{contextMenu:Z})})),(0,B.jsxs)(B.Fragment,{children:[oe,re]})}));function U(e){return e.length>_.INFO_DRAWER_MAX_ROWS_IN_COLLAPSED_LIST}t.GroupInfoParticipantsSection=F,F.displayName="GroupInfoParticipantsSection"},670354:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a;const n=(0,i.default)(e.chat.groupMetadata,"props.chat.groupMetadata"),S=(0,i.default)(null===(t=e.chat.groupMetadata)||void 0===t?void 0:t.participants,"props.chat.groupMetadata?.participants"),E=(0,i.default)(null===(a=e.chat.groupMetadata)||void 0===a?void 0:a.pendingParticipants,"props.chat.groupMetadata?.pendingParticipants"),T=(0,d.default)();(0,c.useListener)(S,"change:isAdmin change:isSuperAdmin",T),(0,c.useListener)(E,"add remove reset",T);const[k,y]=(0,r.useState)(j(E)),[P,A]=(0,r.useState)();if((0,r.useEffect)((()=>{n.queryGroupV4PendingInvite().then((()=>{y(j(n.pendingParticipants))}))}),[n]),n.isSuspendedOrTerminated())return(0,M.jsx)(M.Fragment,{});const w=()=>{let e=E.toArray();return j(E)&&k&&(e=e.slice(0,u.INFO_DRAWER_MAX_ROWS)),e.map((e=>({itemKey:e.id.toString(),id:e.id,height:68})))},N=e=>{const{id:t}=e,a=E.get(t);if(!a)throw new g.UnknownDataError(e);const i=a.contact;return(0,M.jsx)(v.default,{contact:i,participant:a,contextEnabled:()=>!0,contextMenu:!0,onContext:e=>(e=>{const t=[(0,M.jsx)(h.DropdownItem,{a8n:"mi-grp-promote-admin",action:()=>{s.ModalManager.open((0,M.jsx)(f.default,{onOK:()=>{s.ModalManager.close(),n.revokeGroupV4AddInvite([a.id.toString()]).then((()=>{o.ToastManager.open((0,M.jsx)(_.Toast,{msg:l.fbt._("Invite reset",null,{hk:"MgErr"}),id:(0,_.genId)()}))}))},okText:l.fbt._("Reset link",null,{hk:"2Zb3R4"}),onCancel:()=>s.ModalManager.close(),cancelText:l.fbt._("Cancel",null,{hk:"H0gNq"}),children:(0,M.jsx)(p.EmojiText,{text:x.default.t(363,{participant:a.contact.formattedName})})}))},children:l.fbt._("Revoke invite",null,{hk:"4on28q"})},"promote")];A({contactId:i.id,menu:t,anchor:e.anchor,event:e.event})})(e),theme:"chat-info",showNotifyName:!0,isPendingParticipant:!0,waitIdle:!0,showStatusRingAroundProfilePhoto:!0},a.id.toString())};let I,D,R;E.length>0&&(I=(0,M.jsx)(g.FlatList,{flatListController:e.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:w(),renderItem:N}));if(j(E)&&k){const e=E.length-u.INFO_DRAWER_MAX_ROWS;D=(0,M.jsx)(m.default,{numMore:e,onClick:()=>{y(!1)}})}S.iAmAdmin()&&E.length>0&&(R=(0,M.jsxs)(u.ChatInfoDrawerListSection,{a8nText:"section-participants",title:x.default.t(361,{number:E.length}),children:[I,D]}));const O=()=>{A(null)};let L;P&&(L=(0,M.jsx)(b.UIE,{displayName:"ChatContextMenu",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:O,children:(0,M.jsx)(C.default,{contextMenu:P})}));return(0,M.jsxs)(M.Fragment,{children:[R,L]})};var i=n(a(145095)),s=a(914597),o=a(694816),l=a(548360),r=a(667294),d=n(a(859312)),c=a(587550),u=a(898792),f=n(a(452665)),h=a(471174),p=a(965417),m=n(a(31808)),g=a(747915),x=n(a(914296)),v=n(a(616419)),_=a(950452),b=a(718644),C=n(a(624717)),M=a(785893);function j(e){return e.length>u.INFO_DRAWER_MAX_ROWS_IN_COLLAPSED_LIST}},460890:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a,n,i;const s=(0,v.useModelValues)(e.chat,["labels"]),o=(0,v.useOptionalModelValues)(e.chat.groupMetadata,["size"]),l=null===(t=e.chat.groupMetadata)||void 0===t?void 0:t.groupType,r=null===(a=e.chat.groupMetadata)||void 0===a?void 0:a.participants,d=(0,g.default)();(0,x.useListener)(r,"add remove reset sort change:isAdmin change:isSuperAdmin",d);const c=null!==(n=null==r?void 0:r.length)&&void 0!==n?n:0,u=null!==(i=null==o?void 0:o.size)&&void 0!==i?i:0,f=(null==r?void 0:r.iAmAdmin())?c:u,p=l===E.GroupType.DEFAULT_ANNOUNCEMENT_GROUP?h.fbt._("Announcement group",null,{hk:"80s42"}):h.fbt._("Group",null,{hk:"DNiv2"}),_=h.fbt._({"*":"{number} participants",_1:"1 participant"},[h.fbt._plural(l===E.GroupType.DEFAULT_ANNOUNCEMENT_GROUP?f:c,"number")],{hk:"bcYCT"});return(0,R.jsx)(C.default,{theme:"padding-large",children:(0,R.jsxs)(j.FlexColumn,{align:"center",children:[(0,R.jsx)(G,{chat:e.chat,xstyle:L.photo}),(0,R.jsx)(F,{chat:e.chat}),(0,R.jsx)("div",{className:(0,m.default)(L.groupSecondary),children:(0,R.jsx)(w.SelectableSpan,{dir:"auto",selectable:!0,children:(0,R.jsxs)(I.TextSpan,{size:"16",color:"secondary",children:[p," ",(0,R.jsx)(D.default,{onClick:e.onClickParticpantsCount,children:_})]})})}),(0,R.jsx)(T.default,{labels:s.labels})]})})};var i=n(a(348926)),s=a(389385),o=a(450796),l=n(a(145095)),r=n(a(747259)),d=a(173679),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=O(t);if(a&&a.has(e))return a.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}n.default=e,a&&a.set(e,n);return n}(a(435232)),u=a(408139),f=a(914597),h=a(548360),p=a(667294),m=n(a(156720)),g=n(a(859312)),x=a(587550),v=a(735461),_=n(a(803409)),b=n(a(452665)),C=n(a(833308)),M=n(a(513699)),j=a(429623),S=n(a(915908)),E=a(455981),T=n(a(777577)),k=a(812176),y=a(533646),P=n(a(243556)),A=a(671517),w=a(552596),N=a(850760),I=a(113923),D=n(a(701784)),R=a(785893);function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(O=function(e){return e?a:t})(e)}const L={photo:{marginBottom:"njub1g37"},groupSecondary:{lineHeight:"a4ywakfo",marginTop:"ma4rpf0l",textAlign:"qfejxiq4"}};function G(e){const t=(0,v.useModelValues)(e.chat,["isReadOnly"]),a=(0,v.useModelValues)(e.chat.contact,["id","profilePicThumb"]),n=(0,v.useModelValues)(e.chat.contact.profilePicThumb,["imgFull"]),i=(0,v.useModelValues)((0,l.default)(e.chat.groupMetadata,"props.chat.groupMetadata"),["groupType"]),[f,h]=(0,p.useState)(!1),[g,x]=(0,p.useState)(!1),b=(0,_.default)(),C=i.groupType===E.GroupType.DEFAULT_ANNOUNCEMENT_GROUP,M=(0,u.communitiesEnabled)()&&C?P.default.DEFAULT_ANNOUNCEMENT_GROUP:P.default.GROUP,j=t.isReadOnly||!n.canDelete()&&!n.canSet()||(0,d.isSupportGroup)(t)||C||i.isSuspendedOrTerminated();return(0,R.jsx)("div",{className:(0,m.default)(e.xstyle),children:(0,R.jsx)(y.PhotoPickerLoadable,{type:M,id:a.id,attachToChat:!0,pending:g,startImage:n.imgFull,readOnly:j,onImageSet:(e,t)=>{let a;x(!0),a=e&&t?(0,A.setProfilePic)(n,e,t):(0,A.deleteProfilePic)(n),(0,r.default)(a,b).catch((0,s.catchAbort)((()=>{}))).catch((0,o.filteredCatch)(c.ActionError,(()=>{__LOG__(3)`GroupInfoDrawer: failed to set/delete group image`,h(!f)}))).finally((()=>{x(!1)}))}},String(f))})}const B={marginTop:"hymafltn",marginEnd:"jnwc1y2a",marginBottom:"ngycyvoj",marginStart:"svoq16ka"};function F(e){const t=(0,v.useModelValues)(e.chat.contact,["name"]),a=(0,v.useModelValues)((0,l.default)(e.chat.groupMetadata,"props.chat.groupMetadata"),["creation","restrict","support"]),n=(0,_.default)(),o=function(){var a=(0,i.default)((function*(a){const i=(0,M.default)(a);i!==t.name&&(yield(0,r.default)((0,N.setGroupSubject)(e.chat,i),n).catch((0,s.catchAbort)((()=>{}))).catch((()=>{__LOG__(3)`group_info_drawer:onSetSubject failed`})))}));return function(){return a.apply(this,arguments)}}();return a.support?(0,R.jsx)(I.TextHeader,{className:(0,m.default)(B),level:"2",theme:"large",children:(0,R.jsx)(k.GroupName,{chat:e.chat,groupMetadata:a,breakWord:!0})}):(0,R.jsx)(S.default,{subject:t.name,onSave:o,textInputProps:{editable:a.canSetSubject(),editRestrictionInfo:a.restrict?()=>{f.ModalManager.open((0,R.jsx)(b.default,{onOK:()=>f.ModalManager.close(),okText:h.fbt._("OK",null,{hk:"2KEeHb"}),children:h.fbt._("Only admins can edit this group's info",null,{hk:"1a2ztg"})}))}:void 0}})}},320982:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(145095)),s=a(88555),o=a(781572),l=a(914597),r=a(978820),d=n(a(389867)),c=a(548360),u=a(667294),f=n(a(859312)),h=a(587550),p=n(a(629234)),m=a(471174),g=a(650101),x=n(a(914296)),v=a(389389),_=a(718644),b=n(a(624717)),C=a(690973),M=a(785893);function j(e,t){var a;const{chat:n,onVerification:o,onPastParticipants:g}=e,[j,E]=function(e,t){const[a,n]=(0,u.useState)(null),o=(t,a)=>{t.contact.pendingAction++,(0,v.promoteParticipants)(e,[t]).then((()=>{t.contact.pendingAction--})),a&&l.ModalManager.close()},f=(t,a)=>{t.contact.pendingAction++,(0,v.removeParticipants)(e,[t]).then((()=>{t.contact.pendingAction--})),a&&l.ModalManager.close()},h=t=>{t.contact.pendingAction++,(0,v.demoteParticipants)(e,[t]).then((()=>{t.contact.pendingAction--}))},p=()=>{n(null)};let g;a&&(g=(0,M.jsx)(_.UIE,{displayName:"ChatContextMenu",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:p,children:(0,M.jsx)(b.default,{contextMenu:a})}));return[g,(a,u)=>{const p=(0,i.default)(e.groupMetadata,"chat.groupMetadata").participants,g=p.assertGet(u.id.toString()),v=[];p.canPromote(g)&&v.push((0,M.jsx)(m.DropdownItem,{a8n:"mi-grp-promote-admin",action:()=>o(g,!1),children:x.default.t(447)},"promote")),p.canRemove(g)&&v.push((0,M.jsx)(m.DropdownItem,{a8n:"mi-grp-remove-participant",action:()=>f(g,!1),children:x.default.t(451)},"remove")),p.canDemote(g)&&v.push((0,M.jsx)(m.DropdownItem,{a8n:"mi-grp-verify-identify",action:()=>h(g),children:c.fbt._("Dismiss as admin",null,{hk:"243sNl"})},"demote-admin")),(0,s.isMDBackend)()&&p.canVerifyIdentity(g)&&v.push((0,M.jsx)(m.DropdownItem,{a8n:"mi-grp-verify-identify",action:()=>{l.ModalManager.close(),null==t||t(g.contact)},children:c.fbt._("Verify Security Code",null,{hk:"1vTVgt"})},"verify-identity")),d.default.equals((0,r.getMaybeMeUser)(),g.id)||v.push((0,M.jsx)(m.DropdownItem,{action:S.bind(null,g.contact.id),children:c.fbt._("Message {author}",[c.fbt._param("author",g.contact.formattedName)],{hk:"1kM7Cg"})},"message author")),n({contactId:u.id,menu:v,anchor:a.anchor,event:a.anchor?void 0:a})}]}(n,o),T=(0,f.default)(),k=null===(a=n.groupMetadata)||void 0===a?void 0:a.participants;(0,h.useListener)(k,["add","remove","reset"],T);let y;return(0,C.useShowPastParticipants)(n)&&(y={text:c.fbt._("View past participants",null,{hk:"fYGd4"}),onClick:g}),(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(p.default,{ref:t,title:c.fbt._("Search Participants",null,{hk:"M6lxB"}),filter:e=>Boolean(null==k?void 0:k.get(e.id.toString())),onCancel:()=>{l.ModalManager.close()},openContextOnClick:!0,contextEnabled:()=>!1,contextMenu:e=>!d.default.equals((0,r.getMaybeMeUser)(),e),onContext:E,showNotifyName:!0,listenForAdminChange:!0,participantCollection:(0,i.default)(k,"participants"),button:y}),j]})}const S=e=>{(0,g.findChat)(e).then((e=>{l.ModalManager.close(),o.Cmd.openChatFromUnread(e)}))};var E=(0,u.forwardRef)(j);t.default=E},850743:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.GroupParticipantsFlow=function(e){const{chat:t,onVerification:a,initialStep:n}=e,[d,c]=(0,i.useFlow)(n,{pushTransition:"none",popTransition:"none"});if(!c.step)return null;let u;switch(c.step){case r.Participants:u=(0,l.jsx)(s.default,{chat:t,onVerification:a,onPastParticipants:()=>c.push(r.PastParticipants)});break;case r.PastParticipants:u=(0,l.jsx)(o.default,{chat:t,onBack:()=>c.pop()})}return(0,l.jsx)(d,{flow:c,children:u})},t.ParticipantsFlowStep=void 0;var i=a(159083),s=n(a(320982)),o=n(a(185345)),l=a(785893);const r=a(76672).Mirrored(["Participants","PastParticipants"]);t.ParticipantsFlowStep=r},185345:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(221310),s=n(a(497039)),o=a(128298),l=a(548360),r=a(667294),d=(n(a(156720)),n(a(118063))),c=n(a(196570)),u=a(912591),f=a(747915),h=a(429623),p=n(a(914296)),m=n(a(867568)),g=n(a(787598)),x=n(a(11497)),v=a(785893);const _="HEADER",b="ROW",C="DISCLAIMER";function M(e,t){var a;const{chat:n,onBack:i}=e,o=null===(a=n.groupMetadata)||void 0===a?void 0:a.pastParticipants,[r,u]=(0,d.default)(),f=(0,c.default)(o,["add","remove","reset"],(()=>{var e;const t=p.default.accentFold(r),a=(0,s.default)(t),n=null!==(e=null==o?void 0:o.getValidRecords().filter((e=>!t||e.contact.searchMatch(t,a))))&&void 0!==e?e:[];if(!n.length)return[];const i=[];return i.push({type:_,header:l.fbt._("Past participants",null,{hk:"2k91Dw"}),itemKey:"list_header"}),n.forEach(((e,t)=>i.push({type:b,participant:e,itemKey:`${e.id.toString()}_${t}`}))),i.push({type:C}),i}),[r]);return(0,v.jsx)(m.default,{ref:t,title:l.fbt._("Search past participants",null,{hk:"1d6pYh"}),data:f,renderItem:e=>(0,v.jsx)(j,{data:e}),emptyState:(0,v.jsx)(T,{}),onSearch:u,searchPlaceholder:p.default.t(570),onBack:i})}function j(e){var t;let{data:a}=e;switch(a.type){case _:return(0,v.jsx)(x.default,{header:null!==(t=a.header)&&void 0!==t?t:"",uppercase:!1});case b:return(0,v.jsx)(g.default,{participant:a.participant});case C:return(0,v.jsx)(E,{});default:throw new f.UnknownDataError(a)}}const S={row:{height:"graaj7av",backgroundColor:"ihvf49ua"},disclaimer:{fontSize:"f8jlpxt4",color:"pm5hny62"},empty:{fontSize:"enbbiyaj",color:"eruf1vka"}};function E(){return(0,v.jsx)(h.FlexRow,{xstyle:[S.row,S.disclaimer,o.uiPadding.horiz15],align:"center",justify:"center",children:(0,v.jsx)("span",{children:l.fbt._("People who left or were removed in the last 60 days. {=m2}",[l.fbt._implicitParam("=m2",(0,v.jsx)(u.ExternalLink,{href:(0,i.getHowToExitAndDeleteGroupsFaq)(),children:l.fbt._("Learn More",null,{hk:"44tT41"})}))],{hk:"gdXOy"})})})}function T(){return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(x.default,{header:l.fbt._("Past participants",null,{hk:"2k91Dw"}),uppercase:!1}),(0,v.jsx)(h.FlexRow,{xstyle:[S.row,S.empty],align:"center",justify:"center",children:(0,v.jsx)("span",{children:l.fbt._("No results found",null,{hk:"1Wo2fc"})})}),(0,v.jsx)(E,{})]})}var k=(0,r.forwardRef)(M);t.default=k},787598:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{participant:t}=e,a=(0,r.useModelValues)(t.contact,["id","showBusinessCheckmarkAsPrimary"]),n=(0,f.jsx)(u.Name,{contact:a,showBusinessCheckmark:a.showBusinessCheckmarkAsPrimary,showLabel:!0,titlify:!0,ellipsify:!0,you:!0}),h=i.Clock.pastParticipantOnDateAtTime(t.leaveTs,function(e){const t=e.id.equals((0,o.getMeUser)());if(e.leaveReason===s.LeaveReason.Left)return t?l.fbt._("Left",null,{hk:"3R2igg"}):l.fbt._("Left",null,{hk:"3kbdqU"});return t?l.fbt._("Removed",null,{hk:"4vPnHl"}):l.fbt._("Removed",null,{hk:"3LiTU6"})}(t));return(0,f.jsx)(d.default,{image:(0,f.jsx)(c.DetailImage,{id:a.id}),primary:n,secondary:h})};var i=a(40234),s=a(681398),o=a(978820),l=a(548360),r=a(735461),d=n(a(744356)),c=a(288984),u=a(812176),f=a(785893)},769171:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onClick:t}=e,a=(0,l.jsx)(o.TextSpan,{theme:"title",children:i.fbt._("Security",null,{hk:"2BYJDI"})}),n=(0,l.jsx)(o.TextDiv,{theme:"muted",children:i.fbt._("Click to learn how messages and calls are secured.",null,{hk:"1UxhjE"})});return(0,l.jsx)(s.default,{icon:"lock",onClick:t,title:a,secondaryTitle:n})};var i=a(548360),s=n(a(575116)),o=a(113923),l=a(785893)},690973:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.useShowPastParticipants=function(e){const t=(0,o.useOptionalModelValues)(e.groupMetadata,["participants","pastParticipants","groupType"]),a=null==t?void 0:t.pastParticipants,n=(0,s.default)(a,["add","remove","reset"],(()=>Boolean(null==a?void 0:a.getValidRecords().length)));if(!(0,i.pastParticipantsScreenEnabled)()||!n)return!1;if((null==t?void 0:t.groupType)===l.GroupType.DEFAULT_ANNOUNCEMENT_GROUP)return Boolean(null==t?void 0:t.participants.iAmAdmin());return!0};var i=a(879662),s=n(a(196570)),o=a(735461),l=a(455981)},109582:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{isVoiceCallEnabled:!1,isVideoCallEnabled:!1,canStartVoiceCall:!1,canStartVideoCall:!1,startVoiceCall:()=>{},startVideoCall:()=>{}}};a(667294),a(587550),a(317239)},404584:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const a=(0,l.useContext)(c.DrawerContext),n=(0,f.getProductCatalogContext)(a);if((0,l.useEffect)((()=>{!n.session.isAccidental()&&(0,s.isMDBackend)()&&(0,i.isPrivacyNarrativeV1Enabled)()&&(0,u.incrementPrinaDailyCount)(e.highlightSurface,d.PrinaDailyActionType.NARRATIVE_APPEAR)}),[]),!(0,s.isMDBackend)())return null;const{onClick:m,text:g}=e,x=(0,p.jsx)(h.TextSpan,{theme:"title",children:null!==(t=e.title)&&void 0!==t?t:o.fbt._("Encryption",null,{hk:"a7CfR"})}),v=(0,p.jsx)(h.TextDiv,{theme:"muted",children:g});return(0,p.jsx)(r.default,{onClick:m,icon:"lock",title:x,secondaryTitle:v})};var i=a(227101),s=a(88555),o=a(548360),l=a(667294),r=n(a(575116)),d=a(221547),c=a(427394),u=a(433954),f=a(397567),h=a(113923),p=a(785893)},669824:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(29521)),s=(a(257243),a(227101)),o=a(312380),l=a(408139),r=a(914597),d=a(978820),c=n(a(389867)),u=a(548360),f=a(667294),h=a(735461),p=n(a(895402)),m=n(a(60453)),g=n(a(435721)),x=n(a(69637)),v=a(994790),_=n(a(833308)),b=(a(429623),n(a(233095))),C=n(a(294913)),M=a(455981),j=a(389389),S=a(756728),E=a(218963),T=a(964551),k=(a(354646),a(118146),n(a(303271)),a(113923)),y=a(785893);const P=e=>{let{isRestricted:t,onClick:a}=e;return(0,y.jsxs)(g.default,{onClick:a,multiline:!0,children:[(0,y.jsx)("div",{className:b.default.header,children:(0,y.jsx)(k.TextSpan,{theme:"title",children:u.fbt._("Edit group info",null,{hk:"2rhyLl"})})}),(0,y.jsx)(k.TextDiv,{theme:"muted",children:t?u.fbt._("Only admins",null,{hk:"1shXeT"}):u.fbt._("All participants",null,{hk:"2YNQNN"})})]})},A=e=>{let{isAnnouncement:t,onClick:a}=e;return(0,y.jsxs)(g.default,{onClick:a,multiline:!0,children:[(0,y.jsx)("div",{className:b.default.header,children:(0,y.jsx)(k.TextSpan,{theme:"title",children:u.fbt._("Send messages",null,{hk:"2zKwxL"})})}),(0,y.jsx)(k.TextDiv,{theme:"muted",children:t?u.fbt._("Only admins",null,{hk:"1shXeT"}):u.fbt._("All participants",null,{hk:"2YNQNN"})})]})},w=e=>{let{isNoFrequentlyForwarded:t,onClick:a}=e;const n=T.ServerProps.hfmStringChanges?u.fbt._("Messages forwarded many times",null,{hk:"2Neytn"}):u.fbt._("Frequently forwarded messages",null,{hk:"1OxFLx"});return(0,y.jsxs)(g.default,{onClick:a,multiline:!0,children:[(0,y.jsx)("div",{className:b.default.header,children:(0,y.jsx)(k.TextSpan,{theme:"title",children:n})}),(0,y.jsx)(k.TextDiv,{theme:"muted",children:t?u.fbt._("Don't allow",null,{hk:"3uBuwQ"}):u.fbt._("Allow",null,{hk:"2pdVOn"})})]})};function N(e,t){const a=(0,h.useModelValues)(e.chat,["id"]),n=(0,h.useModelValues)(e.groupMetadata,["restrict","announce","noFrequentlyForwarded","participants","owner","groupType","isParentGroup","membershipApprovalMode"]),f=(0,p.default)(),T=e=>{r.ModalManager.open((0,y.jsx)(C.default,{settingType:e,chat:a,groupMetadata:n}),{transition:"modal",uim:f})},N=()=>n.participants.filter((e=>e.isAdmin)).map((e=>e.contact)),I=e=>!!n.participants.get(e.id),D=e=>{const t=c.default.equals(e.id,n.owner),a=(0,d.getMaybeMeUser)().equals(e.id),i=n.groupType===M.GroupType.COMMUNITY&&(0,l.communitiesEnabled)();return t||a&&!i},R=e=>{const t=n.participants,s=t.filter((e=>e.isAdmin)),o=(0,i.default)(e,s,((e,t)=>e.id.equals(t.id))).map((e=>t.assertGet(e.id))),l=(0,i.default)(s,e,((e,t)=>e.id.equals(t.id)));o.length>0&&(o.forEach((e=>{e.contact.pendingAction++})),(0,j.promoteParticipants)(a,o).finally((()=>{o.forEach((e=>{e.contact.pendingAction--}))}))),l.length>0&&(l.forEach((e=>{e.contact.pendingAction++})),(0,j.demoteParticipants)(a,l).finally((()=>{l.forEach((e=>{e.contact.pendingAction--}))}))),r.ModalManager.close()};return(0,y.jsxs)(m.default,{ref:t,theme:"striped",children:[(0,y.jsx)(v.DrawerHeader,{title:u.fbt._("Group settings",null,{hk:"3sS0Vl"}),type:v.DRAWER_HEADER_TYPE.SMALL,onBack:e.onClose}),(0,y.jsxs)(x.default,{children:[(0,y.jsx)(_.default,{animation:!1,children:(0,y.jsx)(P,{onClick:()=>{T(o.GROUP_SETTING_TYPE.RESTRICT)},isRestricted:n.restrict})}),(0,y.jsx)("div",{className:b.default.restrictText,children:(0,y.jsx)(k.TextSpan,{theme:"muted",children:u.fbt._("Choose who can change this groups subject, icon, description and disappearing messages setting.",null,{hk:"1cqpzS"})})}),(0,y.jsxs)(_.default,{animation:!1,children:[n.groupType!==M.GroupType.DEFAULT_ANNOUNCEMENT_GROUP?(0,y.jsx)(A,{onClick:()=>{T(o.GROUP_SETTING_TYPE.ANNOUNCEMENT)},isAnnouncement:n.announce}):null,(0,s.isAdminHfmToggleEnabled)()?(0,y.jsx)(w,{onClick:()=>{T(o.GROUP_SETTING_TYPE.NO_FREQUENTLY_FORWARDED)},isNoFrequentlyForwarded:n.noFrequentlyForwarded}):null]}),undefined,n.groupType!==M.GroupType.DEFAULT_ANNOUNCEMENT_GROUP?(0,y.jsx)(_.default,{animation:!1,children:(0,y.jsx)(g.default,{onClick:()=>{r.ModalManager.open((0,y.jsx)(S.SelectModal,{onConfirm:R,getInitialItems:N,isDisabled:D,isSelected:D,filter:I,title:u.fbt._("Edit group admins",null,{hk:"1BOEkM"}),useShortName:!0,useAllContacts:!0,listType:S.ListType.PARTICIPANT_MANAGE_MODAL,singleSelectionFooterType:E.FooterType.CONFIRM,multipleSelectionFooterType:E.FooterType.CONFIRM,shouldShowSelectionSummary:!1}))},multiline:!0,children:(0,y.jsx)("div",{className:b.default.header,children:(0,y.jsx)(k.TextSpan,{theme:"title",children:u.fbt._("Edit group admins",null,{hk:"1BOEkM"})})})})}):null]})]})}var I=(0,f.forwardRef)(N);t.default=I},294913:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{settingType:t}=e,a=(0,d.useModelValues)(e.chat,["id"]),n=(0,d.useModelValues)(e.groupMetadata,["restrict","announce","noFrequentlyForwarded"]),g=(0,r.useMemo)((()=>{switch(t){case o.GROUP_SETTING_TYPE.ANNOUNCEMENT:case o.GROUP_SETTING_TYPE.RESTRICT:return[{label:l.fbt._("All participants",null,{hk:"2YNQNN"}),value:0},{label:l.fbt._("Only admins",null,{hk:"1shXeT"}),value:1}];case o.GROUP_SETTING_TYPE.NO_FREQUENTLY_FORWARDED:return[{label:l.fbt._("Allow",null,{hk:"2pdVOn"}),value:0},{label:l.fbt._("Don't allow",null,{hk:"3uBuwQ"}),value:1}];default:return[]}}),[t]),x=(0,r.useMemo)((()=>{const{restrict:e,announce:a,noFrequentlyForwarded:i}=n;switch(t){case o.GROUP_SETTING_TYPE.ANNOUNCEMENT:return a?1:0;case o.GROUP_SETTING_TYPE.RESTRICT:return e?1:0;case o.GROUP_SETTING_TYPE.NO_FREQUENTLY_FORWARDED:return i?1:0;default:return 0}}),[t,n]),v=(0,r.useMemo)((()=>{switch(t){case o.GROUP_SETTING_TYPE.ANNOUNCEMENT:return l.fbt._("Send messages",null,{hk:"2zKwxL"});case o.GROUP_SETTING_TYPE.RESTRICT:return l.fbt._("Edit group info",null,{hk:"2rhyLl"});case o.GROUP_SETTING_TYPE.NO_FREQUENTLY_FORWARDED:return f.ServerProps.hfmStringChanges?l.fbt._("Messages forwarded many times",null,{hk:"2Neytn"}):l.fbt._("Frequently forwarded messages",null,{hk:"1OxFLx"});default:return""}}),[t]),_=(0,r.useMemo)((()=>t===o.GROUP_SETTING_TYPE.RESTRICT?l.fbt._("Choose who can change this groups subject, icon, description and disappearing messages setting.",null,{hk:"1cqpzS"}):t===o.GROUP_SETTING_TYPE.NO_FREQUENTLY_FORWARDED&&(0,i.isAdminHfmToggleEnabled)()?(0,m.jsxs)(m.Fragment,{children:[l.fbt._("Choose to allow participants to send messages to the group that have been forwarded many times.",null,{hk:"1PP9Ge"})," ",(0,m.jsx)(c.ExternalLink,{href:(0,s.getFrequentlyForwardedFaqUrl)(),children:u.default.t(397)})]}):null),[t]);return(0,m.jsx)(p.default,{options:g,initialValue:x,title:v,onSelect:e=>{e!==x&&(0,h.setGroupProperty)(a,t,e).catch((()=>()=>{}))},explanation:_})};var i=a(227101),s=a(221310),o=a(312380),l=a(548360),r=a(667294),d=a(735461),c=a(912591),u=n(a(914296)),f=a(964551),h=a(354646),p=n(a(537881)),m=a(785893)},181871:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(978820),s=a(548360),o=a(667294),l=n(a(156720)),r=a(685600),d=n(a(11339)),c=n(a(225653)),u=a(785893);const f={paddingTop:"s7fqlky6",paddingEnd:"iffbo4e8",paddingBottom:"q1tx93la",paddingStart:"e8k79tju",fontSize:"ovllcyds",color:"amgz1mtg"};function h(e,t){const{keptMsgs:a,onClose:n,chat:h}=e;(0,o.useEffect)((()=>{const e=new d.default.DisappearingMessageKeepInChat({kicActionName:d.default.KIC_ACTION_NAME_TYPE.VIEW_KEPT_MESSAGES,kicEntryPoint:d.default.KIC_ENTRY_POINT_TYPE.CHAT_INFO,messagesInFolder:a.length,isAGroup:null==h?void 0:h.isGroup});if(null==h?void 0:h.isGroup){var t,n;const a=(0,i.assertGetMeUser)();e.set({isAdmin:null==h||null===(t=h.groupMetadata)||void 0===t||null===(n=t.participants.get(a))||void 0===n?void 0:n.isAdmin})}e.commit()}),[]);const p=s.fbt._("Kept messages",null,{hk:"iGco8"}),m=(0,u.jsx)(r.KeptMsgs,{}),g=(0,u.jsx)("div",{className:(0,l.default)(f),children:s.fbt._("These messages are kept in the chat for everyone. Everyone can keep or unkeep a message. Group admins can limit this.",null,{hk:"KmQy3"})});return(0,u.jsx)(c.default,{ref:t,msgCollection:a,onClose:n,chat:h,title:p,emptyListText:m,descriptionSection:g})}var p=(0,o.forwardRef)(h);t.default=p},243895:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const{onClick:a}=e,n=(0,l.useModelValues)(e.chat,["id","isGroup","liveLocation","liveLocationQueried"]),x=(0,o.default)(null===(t=n.liveLocation)||void 0===t?void 0:t.participants,["add","remove"],(()=>{var e,t;return null!==(e=null===(t=n.liveLocation)||void 0===t?void 0:t.participants.toArray())&&void 0!==e?e:[]}));if((0,s.useEffect)((()=>{n.liveLocationQueried||c.LiveLocationCollection.getActive(n.id.toString()).then((()=>{(0,h.unproxy)(n).liveLocationQueried=!0})).catch((()=>{}))}),[]),!x.length)return null;const v=(0,g.jsx)(p.default,{name:(0,u.liveLocationIcon)(!0)});return(0,g.jsx)(r.default,{a8nText:"section-live-location",theme:"padding",title:i.fbt._("Live Location",null,{hk:"1LvIwY"}),titleOnClick:a,children:(0,g.jsx)(f.default,{side:v,onClick:a,children:(0,g.jsx)(m.TextSpan,{theme:"title",children:(()=>{let e,t,a=0;if(x.forEach((n=>{n.isMe?e=!0:(t||(t=n.contact),a++)})),n.isGroup)return e?1===x.length?i.fbt._("You are sharing live location",null,{hk:"4DvZgE"}):i.fbt._({"*":"You and {number} others are sharing live location",_1:"You and 1 other person are sharing live location"},[i.fbt._plural(a,"number")],{hk:"2cBRlh"}):i.fbt._({"*":"{number} people are sharing live location",_1:"1 person is sharing live location"},[i.fbt._plural(a,"number")],{hk:"2hMfuk"});if(e){if(1===x.length)return i.fbt._("You are sharing live location",null,{hk:"4DvZgE"});if(t)return d.default.t(414,{name:t.formattedShortNameWithNonBreakingSpaces})}else if(t)return d.default.t(411,{name:t.formattedShortNameWithNonBreakingSpaces});return""})()})})})};var i=a(548360),s=a(667294),o=n(a(196570)),l=a(735461),r=n(a(833308)),d=n(a(914296)),c=a(985865),u=a(508581),f=n(a(853145)),h=a(118146),p=n(a(23217)),m=a(113923),g=a(785893)},308059:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.TABS=t.MediaGalleryDrawer=void 0;var i=n(a(252628)),s=n(a(578931)),o=n(a(540436)),l=n(a(294184)),r=a(548360),d=a(667294),c=n(a(616223)),u=a(446331),f=n(a(5577)),h=n(a(60453)),p=n(a(69637)),m=a(994790),g=n(a(914296)),x=n(a(893528)),v=n(a(188224)),_=n(a(265636)),b=n(a(116351)),C=n(a(799108)),M=a(964551),j=a(718644),S=a(785893);const E={MEDIA:"media",DOCS:"docs",LINKS:"links",PRODUCTS:"products"};t.TABS=E;const T=(0,d.forwardRef)(((e,t)=>{const{chat:a,onProductDetail:n,setProductsScrollOffset:T,initialTab:k=E.MEDIA,productsScrollOffset:y=0}=e,[P,A]=(0,d.useState)(k),[w,N]=(0,d.useState)(null),[I,D]=(0,d.useState)(!1),R=(0,c.default)((()=>new s.default([],(e=>e.id.toString())))),O=()=>{I&&(R.current.unsetAll(),D(!1))},L=(e,t)=>{I||D(!0),R.current.setVal(e,t),0===R.current.getSelected().length&&O()},G=(0,d.useCallback)((e=>{const t=(0,i.default)(E).indexOf(P),a=(0,i.default)(E).indexOf(e);t!==a&&R.current.unsetAll(),A(e),N(a>t?"right":"left"),D(!1)}),[R,P]),B=(0,d.useMemo)((()=>{const e=[{tab:E.MEDIA,title:g.default.t(440)},{tab:E.DOCS,title:g.default.t(247)},{tab:E.LINKS,title:g.default.t(398)}];M.ServerProps.productMediaAttachments&&e.push({tab:E.PRODUCTS,title:r.fbt._("Products",null,{hk:"3Ky71N"})});const t=e.map((e=>{const t=(0,l.default)(_.default.menuItem,{[_.default.active]:P===e.tab});return(0,S.jsx)("button",{className:t,onClick:()=>G(e.tab),title:e.title,children:e.title},e.tab)})),a=(0,l.default)(_.default.menuTabsLists,M.ServerProps.productMediaAttachments?_.default.fourTabs:_.default.threeTabs);return(0,S.jsx)("div",{className:a,"data-active-tab":P,children:t})}),[P,G]),F=(()=>{let e;switch(P){case E.MEDIA:e=(0,S.jsx)(v.default,{chat:a,mediaMsgs:a.getMediaMsgs(),selectable:I,onMessageSelect:L,selectedMessages:R.current,fullCollection:!0});break;case E.LINKS:e=(0,S.jsx)(x.default,{chat:a,linkMsgs:a.getLinkMsgs(),selectable:I,onMessageSelect:L,selectedMessages:R.current});break;case E.DOCS:e=(0,S.jsx)(f.default,{chat:a,docMsgs:a.getDocMsgs(),selectable:I,onMessageSelect:L,selectedMessages:R.current});break;case E.PRODUCTS:e=(0,S.jsx)(C.default,{chat:a,productMsgs:a.getProductMsgs(),selectable:I,onMessageSelect:L,selectedMessages:R.current,onProductDetail:n,setScrollOffset:T,scrollOffset:y})}return e})(),U=[E.MEDIA,E.DOCS].includes(P),V=I?(0,S.jsx)(j.UIE,{displayName:"MediaMultiSelect",escapable:!0,requestDismiss:O,children:(0,S.jsx)(b.default,{chat:a,noSortOnForward:!0,theme:"mediaGallery",toastPosition:u.ToastPosition.RIGHT,downloadButton:U,selectedMessages:R.current,onCancel:O})}):null,H="right"===w?"slide-forward":"slide-back";return(0,S.jsxs)(h.default,{ref:t,theme:"gallery",children:[(0,S.jsx)(m.DrawerHeader,{title:" ",onBack:e.onBack,rtlFixIfOnDarwin:!0,type:m.DRAWER_HEADER_TYPE.MULTI_MEDIA_GALLERY}),V,B,(0,S.jsx)(p.default,{"data-list-scroll-container":!0,children:(0,S.jsx)(o.default,{transitionName:H,className:_.default.column,children:(0,S.jsx)("div",{className:_.default.multimediaGallery,children:(0,S.jsx)("div",{className:_.default.column,children:F})},P)})})]})}));t.MediaGalleryDrawer=T,T.displayName="MediaGalleryDrawer"},614425:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,s.useModelValues)(e.mediaData,["mediaStage","renderableUrl"]);return(0,c.jsx)(d.default,{mediaData:t,placeholderRenderer:h,children:t=>(0,c.jsx)(f,{url:t,msg:e.msg})})};var i=n(a(294184)),s=a(735461),o=n(a(145863)),l=n(a(914296)),r=n(a(179741)),d=n(a(220553)),c=a(785893);const u=e=>{e.stopPropagation()};function f(e){let{url:t,msg:a}=e;return(0,c.jsx)(o.default,{url:t,className:r.default.mediaViewerAudio,onClick:u,autoPlay:!0,msg:a,controls:!0,children:l.default.t(141)})}function h(){return(0,c.jsx)("div",{className:(0,i.default)(r.default.imageAudio,r.default.mediaViewerPlaceholder),onClick:u})}},965768:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onHightlightCloseEnd:t,msgIndexInAlbum:a,onViewOnceInfoClick:n,onClose:i}=e,o=(0,p.useRef)(null),l=(0,g.useModelValues)(e.msg,["id","star","isGroupMsg","chat","type","isGif","isViewOnce","sender","senderObj","t","isSentByMe","isStickerMsg","broadcastId","isUnsentMedia","isKept"]),r=(0,g.useModelValues)(e.mediaData,["filehash","mediaStage","renderableUrl"]),[d,c]=(0,p.useState)(null),[f,v]=(0,p.useState)(null),b=(0,p.useRef)(null),C=()=>{c(null)},M=()=>{v(null)},j=(0,x.default)((e=>{(0,u.canReactToMessage)(e)&&v({dirY:E.DirY.BOTTOM,dirX:E.DirX.CENTER,type:E.MenuType.ReactionPicker,menu:(0,W.jsx)(D.ReactionsPanel,{msgId:e.id.toString(),onSelection:t=>{(0,L.sendReactionToMsg)(e,t).catch((()=>{})),M()}}),flipOnRTL:!0,anchor:b.current})}));(0,m.useListener)(o.current,"animationend",(()=>{t()}));let T,y=l.displayName(!0,!0);l.isGroupMsg&&(y+=" @ "+l.chat.title());d?T=(0,W.jsx)(H.UIE,{displayName:"MsgReaction",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:C,children:(0,W.jsx)(q.default,{contextMenu:d})}):f&&(T=(0,W.jsx)(H.UIE,{displayName:"MsgReactionPicker",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:M,children:(0,W.jsx)(q.default,{contextMenu:f})}));return(0,W.jsxs)("div",{className:A.default.mediaPanelHeader,children:[(0,W.jsx)("div",{className:A.default.info,children:(0,W.jsx)(_.default,{idle:!0,image:(0,W.jsx)(S.DetailImage,{id:l.sender,size:40}),primary:(0,W.jsx)(k.EmojiText,{ellipsify:!0,text:y}),secondary:s.Clock.relativeDateAndTimeStr(l.t),theme:"media"})}),(0,W.jsx)("div",{className:A.default.mediaPanelTools,children:(0,W.jsxs)(I.MenuBar,{theme:"strong",children:[(0,W.jsx)(de,{isMediaDownloadable:()=>!l.isViewOnce&&(!!r.renderableUrl||r.mediaStage===w.MEDIA_DATA_STAGE.RESOLVED),msg:l,msgIndexInAlbum:a,onClose:i,onViewOnceInfoClick:n,openReactionTray:()=>{if(!(0,u.canReactToMessage)(l))return;const e={dirY:E.DirY.BOTTOM,dirX:E.DirX.CENTER,type:E.MenuType.ReactionSendTray,menu:(0,W.jsx)(B.SendReactionsTrayContainer,{msg:l,selectedCallback:e=>{e!==G.MORE_REACTIONS?(0,L.sendReactionToMsg)(l,e).catch((()=>{})):setTimeout((()=>{j(l)}),150),C()}}),flipOnRTL:!1,anchor:b.current};c(e)},sendReactionButtonRef:b}),(0,W.jsx)(I.MenuBarItem,{a8nText:"btn-close",icon:(0,W.jsx)(V.default,{className:e.isHighlightClose?A.default.highlightClose:null,containerRef:o,name:"x-viewer"}),title:h.fbt._("Close",null,{hk:"19Jpec"}),onClick:e.onClose})]},"media-panel-header")}),T]})};var i=a(413959),s=a(40234),o=a(781572),l=a(141455),r=a(21634),d=a(914597),c=a(115461),u=a(867811),f=a(387674),h=a(548360),p=a(667294),m=a(587550),g=a(735461),x=n(a(389113)),v=a(463967),_=n(a(744356)),b=a(872439),C=a(188172),M=n(a(452665)),j=n(a(447022)),S=a(288984),E=a(160811),T=a(471174),k=a(965417),y=a(496144),P=n(a(914296)),A=n(a(477375)),w=a(58668),N=a(508969),I=a(646346),D=a(525365),R=n(a(132231)),O=a(755051),L=a(621357),G=a(761761),B=a(713228),F=a(719569),U=a(118146),V=n(a(23217)),H=a(718644),q=n(a(624717)),Y=n(a(193187)),W=a(785893);const z=a(76672).Mirrored(["MenuBar","Dropdown"]);function K(e){const t=e.chat;t.composeQuotedMsg=e,C.ComposeBoxActions.focus(t)}function X(e){return e.chat.isGroup?h.fbt._("Report group",null,{hk:"23NLqw"}):P.default.t(560,{contactInfo:e.senderObj.displayName})}function Z(e){let{isMediaDownloadable:t,msg:a,onClose:n,openReactionTray:i,sendReactionButtonRef:s}=e;return(0,W.jsxs)(W.Fragment,{children:[a.canReply()?(0,W.jsx)(J,{msg:a,onClose:n}):null,a.canStar()?(0,W.jsx)(ie,{msg:a}):null,a.canKeepOrUnkeep()?(0,W.jsx)(ne,{msg:a}):null,(0,u.canReactToMessage)(a)?(0,W.jsx)(ae,{msg:a,openReactionTray:i,sendReactionButtonRef:s}):null,(0,W.jsx)(ee,{msg:a,onClose:n}),a.canForward()?(0,W.jsx)(se,{msg:a}):null,(0,W.jsx)(ce,{isMediaDownloadable:t,msg:a,onClose:n})]})}function Q(e){let{isMediaDownloadable:t,msg:a,onClose:n,openReactionTray:i,sendReactionButtonRef:s}=e;return(0,W.jsxs)(W.Fragment,{children:[a.isStickerMsg?null:(0,W.jsx)($,{msg:a,type:z.MenuBar,onClose:n}),a.isStickerMsg?(0,W.jsx)(J,{msg:a,onClose:n}):null,a.canStar()?(0,W.jsx)(ie,{msg:a}):null,a.canKeepOrUnkeep()?(0,W.jsx)(ne,{msg:a}):null,a.isStickerMsg?(0,W.jsx)(ee,{msg:a,onClose:n}):null,(0,u.canReactToMessage)(a)?(0,W.jsx)(ae,{msg:a,openReactionTray:i,sendReactionButtonRef:s}):null,a.canForward()?(0,W.jsx)(se,{msg:a}):null,a.isStickerMsg?null:(0,W.jsx)(te,{isMediaDownloadable:t,msg:a,type:z.MenuBar})]})}function $(e){let{msg:t,type:a,onClose:n}=e;const i=e=>{e.stopPropagation(),n(),l.DrawerManager.existsDrawerRight((e=>{e&&2===b.Column.column&&l.DrawerManager.closeDrawerRight()}));const a=t.chat.getSearchContext((0,U.unproxy)(t));o.Cmd.openChatAt(t.chat,a).then((e=>{e&&C.ComposeBoxActions.focus(t.chat)}))};return a===z.Dropdown?(0,W.jsx)(T.DropdownItem,{action:i,children:h.fbt._("Go to message",null,{hk:"B1anG"})}):(0,W.jsx)(I.MenuBarItem,{icon:(0,W.jsx)(V.default,{name:"bubble"}),title:h.fbt._("Go to message",null,{hk:"B1anG"}),onClick:i})}function J(e){let{msg:t,onClose:a}=e;return(0,W.jsx)(I.MenuBarItem,{icon:(0,W.jsx)(V.default,{name:"reply"}),title:h.fbt._("Reply",null,{hk:"1C7DPa"}),onClick:()=>{a(),(0,i.delayMs)(N.CLOSE_ANIMATION_DURATION).then(K.bind(null,(0,U.unproxy)(t)))}})}function ee(e){let{msg:t,onClose:a}=e;return(0,W.jsx)(I.MenuBarItem,{icon:(0,W.jsx)(V.default,{name:"delete"}),title:h.fbt._("Delete",null,{hk:"2KhPUX"}),onClick:()=>{d.ModalManager.open((0,W.jsx)(j.default,{chat:t.chat,msgList:[(0,U.unproxy)(t)],onDelete:a})),O.UiRevokeActionHelper.startSession(),O.UiRevokeActionHelper.messageSelected()}})}function te(e){let{msg:t,type:a,isMediaDownloadable:n}=e;const i=e=>{e.stopPropagation(),r.FileSaver.initDownload((0,U.unproxy)(t))};return a===z.Dropdown?(0,W.jsx)(T.DropdownItem,{action:i,disabled:!n(),children:h.fbt._("Download",null,{hk:"1g5Jix"})}):(0,W.jsx)(I.MenuBarItem,{icon:(0,W.jsx)(V.default,{name:"download"}),title:h.fbt._("Download",null,{hk:"1g5Jix"}),disabled:!n(),onClick:i})}function ae(e){let{msg:t,openReactionTray:a,sendReactionButtonRef:n}=e;return t.type===c.MSG_TYPE.STICKER?null:(0,W.jsx)(I.MenuBarItem,{a8nText:"reaction-entry-point",icon:(0,W.jsx)(V.default,{containerRef:n,name:"reactions-media",width:20}),title:h.fbt._("React to message",null,{hk:"1MagBh"}),onClick:()=>{a()}})}const ne=e=>{let t,a,n,{msg:i}=e;const s=e=>{e.stopPropagation(),(0,v.runKeepInChatUX)((0,U.unproxy)(i))},o=e=>{e.stopPropagation(),(0,v.runUndoKeepInChatUX)((0,U.unproxy)(i))};if(i.isKept&&i.canUnkeep())t="undo-keep-in-chat",a=o,n=h.fbt._("Unkeep",null,{hk:"1eGZng"});else{if(i.isKept||!i.canKeep())return null;t="keep-in-chat",a=s,n=h.fbt._("Keep",null,{hk:"1a48ae"})}return(0,W.jsx)(I.MenuBarItem,{icon:(0,W.jsx)(V.default,{name:t}),title:n,onClick:a},t)};function ie(e){let t,a,n,{msg:i}=e;return i.star?(t=e=>{e.stopPropagation(),o.Cmd.sendUnstarMsgs(i.chat,[(0,U.unproxy)(i)])},a="unstar-btn",n=P.default.t(634)):(t=e=>{e.stopPropagation(),o.Cmd.sendStarMsgs(i.chat,[(0,U.unproxy)(i)])},a="star-btn",n=P.default.t(610)),(0,W.jsx)(I.MenuBarItem,{icon:(0,W.jsx)(V.default,{name:a}),title:n,onClick:t},a)}function se(e){let{msg:t}=e;return(0,W.jsx)(I.MenuBarItem,{icon:(0,W.jsx)(V.default,{name:"forward"}),title:P.default.t(315),onClick:e=>{e.stopPropagation(),t.isUnsentMedia?d.ModalManager.open((0,W.jsx)(M.default,{title:P.default.t(305),onOK:()=>d.ModalManager.close(),okText:h.fbt._("OK",null,{hk:"2KEeHb"}),children:P.default.t(302)})):d.ModalManager.open((0,W.jsx)(y.ForwardMessageModalLoadable,{msgs:[(0,U.unproxy)(t)],onClose:()=>d.ModalManager.close()}),{transition:"modal-flow"})}})}function oe(e){let{msg:t}=e;return(0,W.jsx)(T.DropdownItem,{a8n:"mi-msg-reply",action:()=>{(0,R.default)(t)},children:h.fbt._("Reply privately",null,{hk:"1XQeK2"})})}function le(e){let{msg:t}=e;const a=e=>{const{chat:a}=t;a&&(e?a.isGroup?(0,F.sendSpamExitClear)(a,f.SpamFlow.MediaViewer):(0,F.sendSpamBlockClear)(a,f.SpamFlow.MediaViewer):(0,F.sendSpamReport)(a,f.SpamFlow.MediaViewer)),d.ModalManager.close()};return(0,W.jsx)(T.DropdownItem,{action:()=>{d.ModalManager.open((0,W.jsx)(Y.default,{isBusiness:t.senderObj.isBusiness,isGroup:t.chat.isGroup,onReport:a,onCancel:()=>d.ModalManager.close(),title:X(t)}))},children:X(t)})}function re(e){let{msg:t,onClose:a}=e;return(0,W.jsx)(T.DropdownItem,{action:()=>{a(),(0,i.delayMs)(N.CLOSE_ANIMATION_DURATION+250).then(o.Cmd.msgInfoDrawer.bind(o.Cmd,(0,U.unproxy)(t)))},children:P.default.t(459)})}function de(e){let{isMediaDownloadable:t,msg:a,msgIndexInAlbum:n,onClose:i,onViewOnceInfoClick:s,openReactionTray:o,sendReactionButtonRef:l}=e;return a.isViewOnce?(0,W.jsx)(ue,{isMediaDownloadable:t,msg:a,onClose:i,onViewOnceInfoClick:s}):n>=0?(0,W.jsx)(Z,{isMediaDownloadable:t,msg:a,onClose:i,openReactionTray:o,sendReactionButtonRef:l}):(0,W.jsx)(Q,{isMediaDownloadable:t,msg:a,onClose:i,openReactionTray:o,sendReactionButtonRef:l})}function ce(e){let{isMediaDownloadable:t,msg:a,onClose:n}=e;const i=[];return(a.canPrivateReply()||a.canPrivateReplyInRestrictedGrp())&&i.push((0,W.jsx)(oe,{msg:a},"private_reply")),a.isViewOnce?i.push((0,W.jsx)(le,{msg:a},"reportSpam")):(a.isSentByMe&&i.push((0,W.jsx)(re,{msg:a,onClose:n},"dropdownMsgInfo")),i.push((0,W.jsx)($,{msg:a,type:z.Dropdown,onClose:n},"dropdownGoToMsg"),(0,W.jsx)(te,{isMediaDownloadable:t,msg:a,type:z.Dropdown},"dropdownDownload"))),(0,W.jsx)(I.MenuBarItem,{icon:(0,W.jsx)(V.default,{name:"menu"}),title:P.default.t(454),children:(0,W.jsx)(E.Dropdown,{type:E.MenuType.DropdownMenu,flipOnRTL:!0,dirX:E.DirX.LEFT,children:i})})}function ue(e){let{isMediaDownloadable:t,msg:a,onClose:n,onViewOnceInfoClick:i}=e;return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(I.MenuBarItem,{icon:(0,W.jsx)(V.default,{name:"view-once",className:A.default.voIcon}),title:h.fbt._("View once info",null,{hk:"47XkZ4"}),onClick:i}),(0,W.jsx)(ce,{isMediaDownloadable:t,msg:a,onClose:n})]})}},402959:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(667294),s=n(a(156720)),o=n(a(778506)),l=a(735461),r=n(a(638261)),d=a(429623),c=n(a(247065)),u=n(a(220553)),f=n(a(839040)),h=n(a(537015)),p=n(a(11339)),m=n(a(660325)),g=a(610595),x=a(785893);const v={container:{width:"ln8gz9je",height:"ppled2lx"},stickerContainer:{maxWidth:"mx6rw3sv",maxHeight:"trnfqnf9",marginBottom:"r2u2pyhj",zIndex:"thghmljt"}},_=(e,t)=>{const{msg:a}=e,n=(0,l.useModelValues)(e.mediaData,["mediaStage","fullWidth","fullHeight","isFirstParty","stickerPackId","stickerPackName","stickerPackPublisher"]),_=(0,i.useRef)(null),b=(0,o.default)(t,_),C=e=>{var t;null===(t=_.current)||void 0===t||t.onClick(e)},M=n.isFirstParty?(0,x.jsx)(r.default,{stickerPackId:n.stickerPackId,onStickerPackView:e.onStickerPackView,stickerPackViewDelay:e.stickerPackViewDelay}):(0,x.jsx)(g.StickerDetailsStickerPackInfo,{name:n.stickerPackName,publisher:n.stickerPackPublisher,theme:g.Theme.MediaViewer});return(0,x.jsxs)(d.FlexColumn,{align:"center",justify:"center",xstyle:v.container,children:[(0,x.jsx)("div",{className:(0,s.default)(v.container,v.stickerContainer),children:(0,x.jsx)(h.default,{ref:b,width:n.fullWidth,height:n.fullHeight,onZoomIn:e.onImgZoomIn,msg:a,children:(0,x.jsx)(u.default,{mediaData:n,placeholderRenderer:()=>(0,x.jsx)(m.default,{size:376}),downloadMedia:()=>null==a?void 0:a.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:p.default.WEBC_RMR_REASON_CODE.MEDIA_VIEWER,isUserInitiated:!1}),children:t=>(0,x.jsx)(c.default,{className:(0,s.default)(f.default.content),onClick:C,src:t,onLoad:e.onLoad})})})}),M]})};var b=(0,i.forwardRef)(_);t.default=b},726646:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(867811),s=a(729984),o=a(667294),l=n(a(156720)),r=n(a(662190)),d=n(a(215407)),c=a(640875),u=a(4522),f=n(a(914296)),h=a(58668),p=n(a(839040)),m=n(a(11339)),g=a(899875),x=n(a(311791)),v=n(a(752500)),_=a(694270),b=n(a(65932)),C=n(a(523425)),M=a(785893);class j extends o.PureComponent{constructor(){super(...arguments),this.state={played:!1,size:{width:0,height:0},isFullscreenMode:!1,displayReactionBubble:!0},this._setRefContainer=e=>{this.refContainer=e},this.stopPropagation=e=>{e.stopPropagation()},this._handleFullscreenToggle=e=>{this.setState({isFullscreenMode:e})}}static getDerivedStateFromProps(e){const{mediaData:t}=e;return(t.mediaStage===h.MEDIA_DATA_STAGE.RESOLVED||t.streamable&&t.isStreamable())&&(0,s.isNonZeroNumber)(t.fullWidth)&&(0,s.isNonZeroNumber)(t.fullHeight)?{size:j.getSize(t)}:null}static getSize(e){if(e.isGif){const t=330;return e.fullWidth>=t?{width:e.fullWidth,height:e.fullHeight}:{width:t,height:e.fullHeight*t/e.fullWidth}}return e.fullWidth>=u.MIN_WIDTH?{width:e.fullWidth,height:e.fullHeight}:{width:u.MIN_WIDTH,height:e.fullHeight}}componentDidMount(){this.props.mediaData.isStreamable()||this.props.msg.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:m.default.WEBC_RMR_REASON_CODE.MEDIA_VIEWER,isUserInitiated:!0})}componentWillUnmount(){this.props.msg.mediaObject&&this.props.msg.cancelDownload()}closingMedia(){this.setState({displayReactionBubble:!1})}render(){var e;const{msg:t,mediaData:a,onLoadedData:n}=this.props,s=a.isGif;let o=a.mediaStage===h.MEDIA_DATA_STAGE.RESOLVED||a.streamable&&a.isStreamable();o=o||t.isForcingRMR();let u=null;const m=_.ReactionBubbleType.MEDIA_ITEM;if(t&&(0,i.shouldShowReactionBubble)(t,m)&&(u=(0,M.jsx)(v.default,{msgIds:[t.id.toString()],reactionBubbleType:m,reactionBubbleVisible:this.state.displayReactionBubble})),o){const e=f.default.t(654);let i,o;return!this.state.isFullscreenMode&&(null==t?void 0:t.interactiveAnnotations)&&t.interactiveAnnotations.length>0&&(i=(0,M.jsx)(r.default,{annotations:t.interactiveAnnotations})),o=s?(0,M.jsxs)("div",{className:(0,l.default)(p.default.content),ref:this._setRefContainer,children:[(0,M.jsx)(C.default,{src:a.renderableUrl,onClick:this.stopPropagation,autoPlay:!0,loop:!0,onLoadedData:n,children:e}),i]}):(0,M.jsx)("div",{ref:this._setRefContainer,className:(0,l.default)(p.default.content),onClick:this.stopPropagation,children:(0,M.jsx)(g.WrappedMsgVideoPlayer,{msg:t,mediaData:a,startTime:this.props.startTime,onClose:this.props.onClose,onError:()=>{},onFullscreenToggle:this._handleFullscreenToggle,autoPlay:this.props.autoPlay,type:c.PLAYER_TYPE.MEDIA_VIEWER,overlays:i,noPip:t.isViewOnce,onLoadedData:n})}),(0,M.jsxs)(x.default,{type:"scaleDown",position:"relative",objectPosition:"relative",size:this.state.size,onObjectLoad:this.props.onLoad,children:[o,u]})}return(0,M.jsxs)(x.default,{type:"scaleDown",position:"relative",objectPosition:"relative",size:{width:this.props.mediaData.fullWidth,height:this.props.mediaData.fullHeight},children:[(0,M.jsx)(d.default,{altText:null!==(e=t.caption)&&void 0!==e?e:"",mediaData:a}),u]})}}j.CONCERNS={mediaData:["mediaStage","fullWidth","fullHeight","isGif","isViewOnce","preview","renderableUrl","streamable"]},j.defaultProps={startTime:0},j.displayName="MediaVideo";const S=(0,b.default)(j,j.CONCERNS);t.default=class extends S{getContainerElement(){return this.getComponent().refContainer}closingMedia(){this.getComponent().closingMedia()}}},747186:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onImageLoad:t,isAnimatingIn:a,onImgZoomIn:n,onExitAnimation:g,onBack:D}=e,F=(0,f.useModelValues)(e.msg,["id","star","isUnsentMedia","isViewOnce","isStickerMsg","chat","caption","interactiveAnnotations","type"]),V=(0,f.useModelValues)(e.mediaData,["mediaStage","type","isGif"]),H=(0,p.default)(a),q=(0,u.useRef)(null),Y=(0,u.useRef)(null),W=(0,u.useRef)(null),z=(0,u.useRef)(null),K=(0,u.useRef)(),X=(0,u.useRef)(!1),Z=(0,u.useRef)(!1),Q=(0,u.useRef)(!1),[$,J]=(0,h.default)(l.NUX.EPHEMERAL_VIEW_ONCE_RECEIVER),ee=F.isViewOnce&&$,[te]=(0,u.useState)((()=>V.mediaStage===P.MEDIA_DATA_STAGE.RESOLVED&&e.isAnimatingIn&&e.getZoomNode?e.getZoomNode(F.id):null)),[ae,ne]=(0,u.useState)(!1),[ie,se]=(0,u.useState)(!1),[oe,le]=(0,u.useState)(!e.isAnimatingIn),[re,de]=(0,u.useState)(!1),[ce,ue]=(0,u.useState)(!1),fe=()=>{const e=(0,G.jsx)(I.default,{isPhoto:V.type===S.default.TYPE.IMAGE,onOkClick:()=>{J(),o.ModalManager.close()}});o.ModalManager.open(e)},he=(0,m.default)(((e,t)=>{if(ie)return;const a=q.current;if(!a)return;const n=a.getInsideContainer();if(!(n&&n instanceof HTMLElement))return;const i=a.getOutsideContainer();if(!(i&&i instanceof HTMLElement))return;const{translateX:s,translateY:o}=a.getTranslatePosition(i,e,t);(0,r.default)(n,"stop"),(0,r.default)(n,{translateX:s,translateY:o,scale:w.ZOOM_IN_FACTOR},{duration:0})}));(0,u.useEffect)((()=>(__LOG__(2)`MediaViewerModal: Opened`,ee&&fe(),s.default.focus(z.current),()=>{__LOG__(2)`MediaViewerModal: Closed`,he.cancel()})),[]);const pe=()=>{F.isViewOnce&&(0,M.canMarkPlayed)(F)&&(0,M.markPlayed)(F)},me=e=>{pe(),t&&t();const n=te,i=e.target;n&&i&&a&&i instanceof HTMLElement&&(Q.current||(Q.current=!0,((e,t)=>{var a;const n=t.getBoundingClientRect(),i=e.getBoundingClientRect();let s=i.top-n.top,o=i.left-n.left;const l=e.clientWidth/t.clientWidth;s-=(t.clientHeight-e.clientHeight)/2,o-=(t.clientWidth-e.clientWidth)/2,(0,r.default)(t,{opacity:[1,0],translateX:[0,o],translateY:[0,s],scale:[1,l]},{duration:w.ANIMATION_DURATION,easing:[.1,.82,.25,1]});const d=null===(a=W.current)||void 0===a?void 0:a.getContainerElement();d&&(0,r.default)(d,{opacity:[1,0]},{duration:w.ANIMATION_DURATION})})(n,i)))},ge=()=>{var t;if(X.current)return;X.current=!0,(0,i.isFunction)(g)&&g();const a=e.getZoomNode&&e.getZoomNode(F.id);if(!a)return D();let n;const s=V.type;var o;if([S.default.TYPE.IMAGE,S.default.TYPE.STICKER].includes(s)&&q.current)n=q.current.getInsideContainer(),null===(o=q.current)||void 0===o||o.closingMediaZoomable();else if(V.isGif&&Y.current){var l;n=Y.current.getContainerElement(),null===(l=Y.current)||void 0===l||l.closingMedia()}if(!n)return D();const d=n,c=n.getBoundingClientRect(),u=a.getBoundingClientRect();let f=u.top-c.top,h=u.left-c.left;const p=a.clientWidth/d.clientWidth;f-=(d.clientHeight-a.clientHeight)/2,h-=(d.clientWidth-a.clientWidth)/2,(0,r.default)(n,{translateX:[h,0],translateY:[f,0],scale:[p,1]},{duration:w.CLOSE_ANIMATION_DURATION,easing:[.1,.82,.25,1]}).then((()=>{D()}));const m=null===(t=W.current)||void 0===t?void 0:t.getContainerElement();m&&(0,r.default)(m,{opacity:[0,1]},{duration:w.CLOSE_ANIMATION_DURATION,easing:[.1,.82,.25,1]})},xe=e=>{const t=q.current;e&&t&&(Z.current=t.getHeightOverflow()>0||t.getWidthOverflow()>0),ne(e),n(e)},ve=()=>{ue(!0)},_e=()=>{se(!0)},be=()=>{se(!1)},Ce=e=>{e.stopPropagation(),de(!re)};let Me,je;switch((0,u.useEffect)((()=>{a||oe||!H||le(!0)}),[a,oe,H]),V.type){case S.default.TYPE.IMAGE:Me=(0,G.jsx)(E.default,{msg:F,mediaData:V,onLoad:me,onImgZoomIn:xe,onAnnotationTooltipDisplay:_e,onAnnotationTooltipDismiss:be,preventDownload:F.isViewOnce,ref:q},F.id.toString());break;case S.default.TYPE.STICKER:Me=(0,G.jsx)(y.default,{msg:F,mediaData:V,onLoad:me,onImgZoomIn:xe,onStickerPackView:ge,stickerPackViewDelay:w.CLOSE_ANIMATION_DURATION,ref:q},F.id.toString());break;case S.default.TYPE.VIDEO:Me=(0,G.jsx)(A.default,{autoPlay:!ee,msg:F,mediaData:V,onLoadedData:V.isGif?me:pe,startTime:e.startTime,onClose:ge,ref:Y},F.id.toString());break;case S.default.TYPE.AUDIO:Me=(0,G.jsx)(j.default,{mediaData:V,msg:F},F.id.toString());break;default:__LOG__(4,void 0,new Error,!0)`type: ${V.type}`,SEND_LOGS("MediaViewerModal: unexpected media type")}const Se=e.msgIndexInAlbum>=0&&e.albumSize>=0;if(F.caption||Se){let t;Se&&(t=C.default.t(529,{number:e.msgIndexInAlbum+1,totalNumber:e.albumSize}));const a=v.Configuration.Conversation({mentions:F.mentionMap(),phoneNumbers:F.getPhoneNumbers(),links:F.getLinks(),trusted:!0,fromMe:F.id.fromMe}),n=!oe&&(V.isGif||V.type===S.default.TYPE.IMAGE);je=(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)("p",{className:(0,d.default)(N.default.captionWrapper,K.current&&N.default.captionWrapperExpandable),onClick:K.current?Ce:void 0,title:K.current?c.fbt._("Read more",null,{hk:"2DvSvh"}):void 0,"aria-hidden":re||void 0,children:[(0,G.jsx)(x.EmojiText,{className:(0,d.default)(N.default.mediaCaption,{[N.default.captionHidden]:n,[N.default.expanded]:re}),formatters:a,ref:e=>{W.current=e},text:F.caption||t}),K.current&&(0,G.jsx)(L.default,{xstyle:[B.captionReadMoreBtn,re&&B.captionReadMoreBtnExpanded,ae&&B.captionReadMoreBtnZoomed],onClick:Ce,children:(0,G.jsx)(R.TextSpan,{children:c.fbt._("Read more",null,{hk:"2DvSvh"})})})]}),re&&(0,G.jsx)("p",{className:(0,d.default)(N.default.captionWrapper,N.default.captionWrapperExpandable,N.default.captionExpanded),onClick:Ce,children:(0,G.jsx)(x.EmojiText,{className:(0,d.default)(N.default.mediaCaption,N.default.mediaCaptionExpanded),formatters:a,text:F.caption})})]})}const Ee=(0,d.default)(N.default.media,{[N.default.mediaWithCaption]:!!je}),Te=(0,d.default)("overlay",N.default.mediaViewer,{[N.default.noThumbnails]:F.isViewOnce||F.isStickerMsg,[N.default.mediaViewerAnimate]:e.isAnimatingIn,[N.default.cursorZoomOut]:ae}),ke=ae&&Z.current?e=>{he(e.pageX,e.pageY)}:null,ye=ae?e=>{he.cancel();const t=q.current;t&&ae&&t.onClick(e)}:null;let Pe=ae?null:ge;null!=Pe&&F.isViewOnce&&(Pe=ve);const Ae=!F.isViewOnce&&!F.isStickerMsg;return(0,G.jsx)(O.UIE,{displayName:"MediaViewer",escapable:!0,requestDismiss:ge,children:(0,G.jsx)(b.HotKeys,{handlers:{space:e=>{if(a)return;he.cancel();const t=q.current;null!=t&&t.onKeyboardZoom(e)}},ref:z,children:(0,G.jsxs)("div",{className:Te,"data-animate-media-viewer":!0,"data-testid":"media-viewer-modal",onClick:ye,onMouseMove:ke,children:[(0,G.jsx)(T.default,{isHighlightClose:ce,msg:F,mediaData:V,onClose:ge,onHightlightCloseEnd:()=>{ue(!1)},onViewOnceInfoClick:()=>{fe()},msgIndexInAlbum:e.msgIndexInAlbum}),(0,G.jsx)("div",{className:(0,d.default)(N.default.mediaContent,{[N.default.sticker]:F.isStickerMsg}),onClick:Pe,children:(0,G.jsx)(U,{hasNavigationButtons:Ae,onNext:e.onNext,onPrev:e.onPrev,imgZoomed:ae,children:(0,G.jsxs)("div",{className:Ee,children:[(0,G.jsx)(k.default,{msg:F,mediaData:V}),Me,(0,G.jsx)(_.default.Provider,{value:F.chat.groupMetadata,children:je})]})})})]})})})};var i=a(551737),s=n(a(352013)),o=a(914597),l=a(871579),r=n(a(462831)),d=n(a(294184)),c=a(548360),u=a(667294),f=(n(a(156720)),a(735461)),h=n(a(259732)),p=n(a(837453)),m=n(a(290886)),g=a(61991),x=a(965417),v=a(130695),_=n(a(945152)),b=a(729424),C=n(a(914296)),M=a(730734),j=n(a(614425)),S=n(a(502320)),E=n(a(976530)),T=n(a(965768)),k=n(a(381136)),y=n(a(402959)),P=a(58668),A=n(a(726646)),w=a(508969),N=n(a(380674)),I=n(a(364815)),D=a(482857),R=a(113923),O=a(718644),L=n(a(701784)),G=a(785893);const B={captionReadMoreBtn:{position:"lhggkp7q",end:"h223g3sc",bottom:"jxacihee",paddingTop:"ppypbuwx",paddingEnd:"f9ovudaz",paddingBottom:"przvwfww",paddingStart:"nu34rnf1",backgroundColor:"idmi9oma",borderTopStartRadius:"ho9ovbg7",borderTopEndRadius:"tcg15ap9",borderBottomEndRadius:"c5wy1lv0",borderBottomStartRadius:"bqysl6j9",boxShadow:"a95fzlb5"},captionReadMoreBtnExpanded:{visibility:"kojwoqec"},captionReadMoreBtnZoomed:{visibility:"kqpkm0zi",opacity:"lxctpz5v"}};function F(e){null==e||e.stopPropagation()}function U(e){var t,a,n,i;return(0,G.jsxs)(G.Fragment,{children:[e.hasNavigationButtons&&(0,G.jsx)("div",{className:(0,d.default)(N.default.btnMediaPrev),children:(0,G.jsx)("div",{onClick:e.onPrev?null:F,children:(0,G.jsx)(g.ChevronButton,{type:g.ButtonType.Prev,onClick:null!==(t=e.onPrev)&&void 0!==t?t:void 0,onKeyDown:null!==(a=e.onPrev)&&void 0!==a?a:void 0,disabled:!e.onPrev||e.imgZoomed,theme:D.RoundTheme.Default})})}),e.children,e.hasNavigationButtons&&(0,G.jsx)("div",{className:(0,d.default)(N.default.btnMediaNext),children:(0,G.jsx)("div",{onClick:e.onPrev?null:F,children:(0,G.jsx)(g.ChevronButton,{type:g.ButtonType.Next,onClick:null!==(n=e.onNext)&&void 0!==n?n:void 0,onKeyDown:null!==(i=e.onNext)&&void 0!==i?i:void 0,disabled:!e.onNext||e.imgZoomed,theme:D.RoundTheme.Default})})})]})}},838781:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{mediaMsgs:t,onScroll:a,highlightedMsgIds:n,activeMsg:u,onSetActiveThumb:f,onSelectThumb:h}=e,p=(0,s.useRef)({}),m=()=>{const e=new Map;return t.forEach((t=>{const a=t.id.toString();e.set(a,(e=>{const t=p.current[e];if(!t)return!1;const a=t.getBoundingClientRect(),n=(a.left+a.right)/2;return!(n>-1*window.innerWidth&&n<2*window.innerWidth)})(a))})),e},[g,x]=(0,s.useState)(m),v=(0,o.default)((()=>{const e=m();(0,i.default)(g,e)||x(e)}),100),_=(()=>{const e=n&&n.size>0&&n.has(u.id.toString()),a=[];return t.forEach((t=>{if(null==t.mediaData){const e=u;return void __LOG__(3,!0)`MediaViewerFlow: attempted to render a msg without mediaData: ${JSON.stringify({type:t.type,isMedia:t.isMedia,startMsgType:e.type,startMsgIsMedia:e.isMedia})}`}const i=e&&n&&!n.has(t.id.toString())?"viewerFlowTransparent":"viewerFlow";a.push((0,c.jsx)(l.MediaThumb,{theme:i,active:t===u,msg:t,containerRef:e=>{((e,t)=>{p.current[t]=e})(e,t.id.toString()),t===u&&f(e)},onClick:()=>{h(t)},preferPreview:!!g.get(t.id.toString()),showTooltip:t.isGroupMsg},`media-${t.id.id}`))})),a.push((0,c.jsx)("div",{className:r.default.mediaThumb,children:t.queryMediaAfter?(0,c.jsx)(d.Spinner,{stroke:6,size:24}):null},"spinner-right")),a.unshift((0,c.jsx)("div",{className:r.default.mediaThumb,children:t.queryMediaBefore?(0,c.jsx)(d.Spinner,{stroke:6,size:24}):null},"spinner-left")),a.push((0,c.jsx)("div",{className:r.default.thumbPadding},"padding-right")),a.unshift((0,c.jsx)("div",{className:r.default.thumbPadding},"padding-left")),a})();return(0,c.jsx)("div",{className:r.default.thumbsContainer,ref:e.setRefThumbsContainer,children:(0,c.jsx)("div",{className:r.default.scrollContainer,dir:"ltr",children:(0,c.jsx)("div",{onScroll:e=>{v(),a(e)},className:r.default.viewerThumbs,ref:e.setRefThumbs,children:_})})})};var i=n(a(31789)),s=a(667294),o=n(a(290886)),l=a(341908),r=n(a(276479)),d=a(111054),c=a(785893)},364815:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onOkClick:t}=e;return(0,p.jsx)(l.default,{onOK:t,cancelText:u.default.t(397),onCancel:()=>{(0,r.openExternalLink)((0,i.getViewOnceFaqUrl)())},children:(0,p.jsxs)(d.FlexColumn,{children:[(0,p.jsx)(c.default,{xstyle:m.graphic,align:"center",children:(0,p.jsx)(f.default,{name:"view-once-sender-nux",width:195,height:177})}),(0,p.jsx)(h.TextHeader,{className:(0,o.default)(m.text),theme:"popup-title",children:e.isPhoto?s.fbt._("This photo is set to view once",null,{hk:"2H7aHc"}):s.fbt._("This video is set to view once",null,{hk:"1w8WFf"})}),(0,p.jsx)(h.TextParagraph,{className:(0,o.default)(m.text),children:e.isPhoto?s.fbt._("For more privacy, this photo will disappear after you close it.",null,{hk:"1XZPqi"}):s.fbt._("For more privacy, this video will disappear after you close it.",null,{hk:"3YgUHE"})})]})})};var i=a(221310),s=a(548360),o=n(a(156720)),l=n(a(452665)),r=a(912591),d=a(429623),c=n(a(748846)),u=n(a(914296)),f=n(a(23217)),h=a(113923),p=a(785893);const m={text:{marginBottom:"or9x5nie"},graphic:{marginBottom:"t4zgqcuo"}}},537881:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{options:t,explanation:a,onSelect:n}=e,[u,f]=(0,o.useState)(e.initialValue),h=()=>{i.ModalManager.close()},p=e=>{const{target:t}=e;t instanceof HTMLInputElement&&f(parseInt(t.value,10))},m=t.map((e=>{let{value:t,label:a}=e;return(0,c.jsx)("li",{children:(0,c.jsxs)("label",{className:r.default.label,children:[(0,c.jsx)("input",{type:"radio",className:r.default.input,value:String(t),checked:t===u,onChange:p}),a]})},`setting-${t}`)}));return(0,c.jsxs)(l.default,{title:e.title,okText:s.fbt._("Confirm",null,{hk:"3tmGp3"}),onOK:()=>{null!=u&&n(u),h()},onCancel:h,children:[null!=a?(0,c.jsx)(d.TextDiv,{theme:"muted",className:r.default.explanation,children:a}):null,(0,c.jsx)("form",{children:(0,c.jsx)("ol",{children:m})})]})};var i=a(914597),s=a(548360),o=a(667294),l=n(a(452665)),r=n(a(917391)),d=a(113923),c=a(785893)},193187:(e,t,a)=>{"use strict";var n=a(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const[t,a]=(0,s.useState)(!1);let n,f,h;e.isGroup?(n=i.fbt._("The last 5 messages from this group will be forwarded to WhatsApp.",null,{hk:"40tFfL"}),f=i.fbt._("No one in this group will be notified.",null,{hk:"1qLvih"}),h=i.fbt._("Exit group",null,{hk:"4BkPNr"})):e.isBusiness?(n=i.fbt._("The last 5 messages from this business will be forwarded to WhatsApp.",null,{hk:"1Xa0bG"}),f=i.fbt._("This business will not be notified.",null,{hk:"2Lbwbg"}),h=i.fbt._("Block business",null,{hk:"3hFIF3"})):(n=i.fbt._("The last 5 messages from this contact will be forwarded to WhatsApp.",null,{hk:"2YNTpM"}),f=i.fbt._("This contact will not be notified.",null,{hk:"172yrT"}),h=i.fbt._("Block contact",null,{hk:"41X9mL"}));return(0,c.jsxs)(l.default,{onOK:function(){e.onReport(t)},okText:i.fbt._("Report",null,{hk:"18ssTb"}),onCancel:e.onCancel,title:e.title,children:[(0,c.jsx)(d.TextParagraph,{xstyle:u.section,color:"muted",children:n}),(0,c.jsx)(d.TextParagraph,{xstyle:u.section,color:"muted",children:f}),(0,c.jsxs)(r.FlexRow,{align:"center",justify:"start",children:[(0,c.jsx)(o.CheckBox,{onChange:()=>a((e=>!e)),checked:t,id:"menu-icon-report-spam"}),(0,c.jsx)(d.TextLabel,{xstyle:u.checkboxLabel,htmlFor:"menu-icon-report-spam",color:"muted",children:h})]})]})};var i=a(548360),s=a(667294),o=(n(a(156720)),a(316593)),l=n(a(452665)),r=a(429623),d=a(113923),c=a(785893);const u={section:{marginBottom:"t4zgqcuo"},checkboxLabel:{marginStart:"fooq7fky"}}},59828:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={audioTag:"_1ichq"}},808767:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={msg:"_3YiZC",text:"RmpKn",bubble:"_2z0p1",author:"XntIB",hasSuspiciousLinks:"_3bU-2",hasAuthor:"_2cFHu",suspiciousLabel:"_2tYTz"}},565383:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={mediaCanvas:"GfgP-",shade:"_31TVj",blur:"_3SKsu",canvasSelected:"xEnhc"}},52901:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={iconKeep:"M1ezq",iconStar:"_1Dvi_",shadeTop:"_2GZwK",canvasBody:"_10gTM",noPointerEvents:"_2_6x8",mediaGalleryThumbnail:"_1uBVh",chatInfoDrawerThumbnail:"_1t-UP",canvasSelected:"_28Wzy",mediaSelect:"_3fXE6",canvasComponent:"zm1kZ",canvasSecondRow:"_2GObI",viewerFlow:"_8KUDv",active:"_2w4lr",viewerFlowTransparent:"_3UuHq"}},354963:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={container:"_Wzeb",selected:"_2v6Lf"}},585845:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={footerNote:"_2v7h3",getTheAppLink:"f20SI"}},202256:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={wrapper:"_3KBDs",code:"_2ZlC0",codeDarkMode:"_2LUvK",codeLogo:"_3TIEq"}},449103:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={businessHoursRow:"_1yCy2",firstRow:"_2n4C_",businessHoursDay:"_3E1wD",businessHoursHours:"_1KuI5",dayIsOpen:"_3QSVU",businessHoursChevron:"tdvlj",flipSvg:"_3U46z"}},646311:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={section:"_2piwD",description:"_3wQ4p",map:"wjX1S"}},652898:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={contactBusinessInfo:"_-3uPc",contactBusinessInfoSpinner:"i0l32",dataRow:"_27Am0",businessHoursRow:"pHhe2",businessHoursDay:"_37D6O",businessHoursHours:"_1Fkkg",businessHoursChevron:"PfSJW",flipSvg:"kphWe",dataRowIcon:"_1utXv",dataRowText:"_8jzcs",businessTitleText:"_1_m2f",businessMap:"uTGlN",address:"_3gira",link:"sdA8C",infoIcon:"_2GuY5"}},233095:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={header:"uEYm5",restrictText:"_28g3v"}},265636:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={multimediaGallery:"_3M644",column:"_3nvje",menuItem:"OJuvv",active:"_KRg9",menuTabsLists:"_3CC5A",threeTabs:"_1KRHF",fourTabs:"rLX29"}},179741:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={mediaViewerPlaceholder:"nehFG",imageAudio:"_2OreO",mediaViewerAudio:"_1alR8"}},276479:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={thumbsContainer:"_1XWMx",scrollContainer:"_1MhXb",viewerThumbs:"_1FS45",mediaThumb:"_52crR",thumbPadding:"_1833d"}},917391:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={label:"QzWWL",input:"_1LOWN",explanation:"_37J_Y"}}}]);
//# sourceMappingURL=https://web.whatsapp.com/lazy_loaded_high_priority_components.d180bc300502a4b0ef27.js.map
