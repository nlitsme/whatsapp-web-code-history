/*! Copyright (c) 2022 WhatsApp Inc. All Rights Reserved. */
(self.webpackChunkwhatsapp_web_client=self.webpackChunkwhatsapp_web_client||[]).push([[7205],{31789:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){let n;if(e.size!==t.size)return!1;for(const[a,i]of e)if(n=t.get(a),n!==i||void 0===n&&!t.has(a))return!1;return!0}},42906:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.queryAndUpdateSubGroupMetadataById=function(e){if(i.GK.supportsFeature(i.GK.F.MD_BACKEND))return(0,l.queryAllSubGroups)(e).then((t=>{!function(e,t){const n=s.default.get(e),a=t.map((e=>e.id));n&&n.set({subgroups:a})}(e,t)}));return Promise.resolve()};var i=n(7293),s=a(n(63928)),l=n(47066)},66155:(e,t,n)=>{"use strict";var a=n(95318),i=n(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.setGroupDesc=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return g((0,h.unproxy)(e),t)};var s=n(50796),l=n(48360),o=n(46331),r=n(88102),d=i(n(64103)),c=a(n(43725)),u=n(57490),f=n(15860),h=n(31019),p=n(77591),m=n(85893);function g(e){var t,n,a;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,o.genId)(),x=i&&i.trim();if(x===(null===(t=e.groupMetadata)||void 0===t?void 0:t.desc))return Promise.reject(new d.ActionError);""===x&&(x=null);const C=(0,u.sendSetGroupDescription)(e.id,x,(0,f.newTag)(),null===(n=e.groupMetadata)||void 0===n?void 0:n.descId),v=null===(a=e.groupMetadata)||void 0===a?void 0:a.desc,_=new o.ActionType(l.fbt._("Changing group description",null,{hk:"3KCi4Y"})),b=C.then((()=>new o.ActionType(l.fbt._("Group description changed",null,{hk:"44gagH"}),{actionText:c.default.t(143),actionHandler:()=>g(e,v,h)}))).catch((0,s.filteredCatch)(p.ServerStatusCodeError,(e=>{if(e.status>=400)return new o.ActionType(l.fbt._("Group description change failed",null,{hk:"eSNfo"}))}))).catch((()=>(__LOG__(3)`models:chat:setGroupDesc dropped`,new o.ActionType(l.fbt._("Group description change failed",null,{hk:"eSNfo"}),{actionText:c.default.t(139),actionHandler:()=>g(e,x,h)}))));return r.Cmd.openToast((0,m.jsx)(o.ActionToast,{id:h,initialAction:_,pendingAction:b})),C.then((t=>{var n;t._duplicate||(null===(n=e.groupMetadata)||void 0===n||n.set({desc:x||""}))})).catch((0,s.filteredCatch)(p.ServerStatusCodeError,(()=>{})))}},50760:(e,t,n)=>{"use strict";var a=n(95318),i=n(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.setGroupSubject=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return m((0,u.unproxy)(e),t)};var s=n(50796),l=n(46331),o=n(88102),r=i(n(64103)),d=a(n(43725)),c=n(57490),u=n(31019),f=n(27211),h=n(77591),p=n(85893);function m(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,l.genId)();const a=t.trim();if(!a)return Promise.reject(new r.ActionError);if(a===e.contact.name)return Promise.reject(new r.ActionError);const i=(0,c.sendSetGroupSubject)(e.id,a),u=e.contact.name,g=new l.ActionType(d.default.t(79)),x=i.then((()=>new l.ActionType(d.default.t(78,{subject:a}),{actionText:d.default.t(143),actionHandler:()=>m(e,u,n)}))).catch((0,s.filteredCatch)(h.ServerStatusCodeError,(e=>{if(e.status>=400)return new l.ActionType(d.default.t(77))}))).catch((()=>(__LOG__(3)`models:chat:setSubject dropped`,new l.ActionType(d.default.t(77),{actionText:d.default.t(139),actionHandler:()=>m(e,a,n)}))));return o.Cmd.openToast((0,p.jsx)(l.ActionToast,{id:n,initialAction:g,pendingAction:x})),i.then((t=>{if(!t._duplicate){const t={name:a};return(0,f.updateLocal)(e.contact.id,t).then((()=>{e.contact.set(t)}))}})).catch((0,s.filteredCatch)(h.ServerStatusCodeError,(()=>{})))}},47066:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.queryAllSubGroups=function(){return h.apply(this,arguments)},t.querySubGroup=function(){return p.apply(this,arguments)};var i=a(n(48926)),s=n(31914),l=n(71914),o=n(24747),r=n(59036),d=n(39410),c=n(77591);const u=new l.WapParser("queryAllSubGroupsParser",(e=>e.child("sub_groups").mapChildren(r.parseSubGroupNode))),f=new l.WapParser("querySubGroupParser",(e=>e.child("linked_group").mapChildren(r.parseSubGroupInfoNode)));function h(){return(h=(0,i.default)((function*(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,s.generateId)();const n=(0,s.wap)("iq",{to:(0,d.GROUP_JID)(e),type:"get",xmlns:"w:g2",id:t},(0,s.wap)("sub_groups",null)),a=yield(0,o.sendIq)(n,u);return a.success?a.result:(__LOG__(2)`queryAllSubGroups failed: ${a.errorCode}:${a.errorType}`,Promise.reject(new c.ServerStatusCodeError(a.errorCode,a.errorText)))}))).apply(this,arguments)}function p(){return(p=(0,i.default)((function*(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,s.generateId)();const a=(0,s.wap)("iq",{to:(0,d.GROUP_JID)(e),type:"get",xmlns:"w:g2",id:n},(0,s.wap)("query_linked",{type:"sub_group",jid:(0,d.GROUP_JID)(t)})),i=yield(0,o.sendIq)(a,f);return i.success?i.result:(__LOG__(2)`queryAllSubGroups failed: ${i.errorCode}:${i.errorType}`,Promise.reject(new c.ServerStatusCodeError(i.errorCode,i.errorText)))}))).apply(this,arguments)}},59036:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.parseSubGroupInfoNode=function(e){var t;let n;try{n=(0,r.createWid)(`${e.attrString("id")}@g.us`)}catch(e){__LOG__(2)`parseSubGroupNode failed: ${e}`}if(!(null===(t=n)||void 0===t?void 0:t.isGroup))throw Error("parseSubGroupNode: invalid group id");const a=(0,o.extractDescription)(e),d=e.mapChildrenWithTag("participant",(e=>{const t=e.attrEnumOrDefault("type",s.GROUP_PARTICIPANT_TYPES,s.GROUP_PARTICIPANT_TYPES.participant);return{id:(0,l.userJidToUserWid)(e.attrPhoneUserJid("jid")),isSuperAdmin:t===s.GROUP_PARTICIPANT_TYPES.superadmin,isAdmin:t===s.GROUP_PARTICIPANT_TYPES.admin||t===s.GROUP_PARTICIPANT_TYPES.superadmin}}));return(0,i.default)({id:n,owner:e.hasAttr("creator")?(0,l.userJidToUserWid)(e.attrPhoneUserJid("creator")):void 0,creation:e.attrTime("creation"),subject:e.attrString("subject"),subjectTime:e.hasAttr("s_t")?e.attrTime("s_t"):void 0,participants:d,size:e.hasAttr("size")?e.attrInt("size"):void 0},a)},t.parseSubGroupNode=function(e){var t;let n;try{n=(0,r.createWid)(`${e.attrString("id")}@g.us`)}catch(e){__LOG__(2)`parseSubGroupNode failed: ${e}`}if(!(null===(t=n)||void 0===t?void 0:t.isGroup))throw Error("parseSubGroupNode: invalid group id");return{id:n,subject:e.attrString("subject"),subjectTime:e.hasAttr("s_t")?e.attrTime("s_t"):void 0}};var i=a(n(81109)),s=n(46920),l=n(85553),o=n(2182),r=n(58021)},16419:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{contact:t,onClick:n,contextMenu:l,isPendingParticipant:o,contextEnabled:r,onContext:d,theme:c}=e,u=(0,i.useModelValues)(e.participant,["isAdmin"]);return(0,s.jsx)(a.Contact,{contact:t,admin:u.isAdmin,onClick:n,theme:c||"drawer-list",contextEnabled:()=>null!=r&&r(t),contextMenu:l,onContext:e=>d&&d(e,t),isPendingParticipant:o,showNotifyName:!0,waitIdle:!0})};var a=n(2732),i=n(49082),s=n(85893)},45863:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(45095)),s=n(67294),l=n(76716),o=a(n(24613)),r=a(n(34553)),d=n(84387),c=a(n(52500)),u=n(94270),f=n(57793),h=n(62583),p=a(n(4478)),m=n(65127),g=n(65044),x=n(85893);class C extends s.Component{constructor(){super(...arguments),this.startCheckForSuccess=()=>{this.checkIteration=0,this.checkForSuccessInterval=this.props.setInterval(this.checkForSuccess,250)},this.clearCheckForSuccess=()=>{this.checkForSuccessInterval&&(this.props.clearInterval(this.checkForSuccessInterval),this.checkForSuccessInterval=0,this.checkIteration=0)},this.checkForSuccess=()=>{if(g.Socket.state!==h.SOCKET_STATE.CONNECTED)return;this.checkIteration++;const e=this.props.url;if(this.checkIteration>40)return void this.handlePlayerError({target:{src:e,error:{code:window.MediaError.MEDIA_ERR_NETWORK}}});const t=(0,i.default)(this._audioElement,"this._audioElement").buffered;t.length&&t.end(0)>0&&this.handlePlaying()},this.handlePlayerError=e=>{this.clearCheckForSuccess(),this.props.onError&&this.props.onError(e.target.src)},this.handlePlaying=()=>{this.clearCheckForSuccess()},this._setRefAudio=e=>{var t;this._audioElement=e,null===(t=this._unregisterFromAudioChannel)||void 0===t||t.call(this),this._unregisterFromAudioChannel=null==e?null:l.MainAudioChannel.registerMedia(e),null!=this.props.setRefAudio&&this.props.setRefAudio(e)}}componentDidMount(){const{listeners:e}=this.props,t=(0,i.default)(this._audioElement,"this._audioElement");this._updatePlaybackRate(),e.add(t,"error",this.handlePlayerError,{capture:!0}),e.add(t,"playing",this.handlePlaying),(m.UA.isGecko||m.UA.isSafari)&&(this.props.autoPlay?(this.checkIteration=0,this.checkForSuccessInterval=this.props.setInterval(this.checkForSuccess,250)):this.props.autoPlay?this.startCheckForSuccess():e.add(t,"play",this.startCheckForSuccess))}componentWillUnmount(){var e;null===(e=this._unregisterFromAudioChannel)||void 0===e||e.call(this),m.UA.isBlink&&(0,r.default)((0,i.default)(this._audioElement,"this._audioElement"))}componentDidUpdate(){this._updatePlaybackRate()}_updatePlaybackRate(){const e=(0,i.default)(this._audioElement,"this._audioElement"),{playbackRate:t}=this.props;e.defaultPlaybackRate===t&&e.playbackRate===t||(e.defaultPlaybackRate=e.playbackRate=null!=t?t:1)}pause(){var e;null===(e=this._audioElement)||void 0===e||e.pause()}render(){const e=u.ReactionBubbleType.MEDIA_ITEM,{msg:t}=this.props;return(0,x.jsxs)("div",{className:this.props.className,children:[(0,x.jsx)("audio",{ref:this._setRefAudio,className:o.default.audioTag,src:this.props.url,onClick:this.props.onClick,controls:this.props.controls,preload:this.props.preload,autoPlay:this.props.autoPlay,children:this.props.children}),t&&(0,f.shouldShowReactionBubble)(t,e)&&(0,x.jsx)(c.default,{msgIds:[t.id.toString()],reactionBubbleType:e})]})}}C.displayName="AudioTag";var v=(0,d.ListenerHOC)((0,p.default)(C));t.default=v},5577:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{docMsgs:t,chat:n}=e,a=(0,s.default)(e,x),C=(0,m.default)(),v=(0,o.useRef)(null);let _;(0,p.useListener)(t,"add remove reset query_doc_before",(()=>{var e;null===(e=v.current)||void 0===e||e.forceUpdate()})),c.GK.supportsFeature(c.GK.F.MD_BACKEND)&&n.endOfHistoryTransferType===r.ConversationEndOfHistoryTransferModelPropType.COMPLETE_BUT_MORE_MESSAGES_REMAIN_ON_PRIMARY&&(_=(0,g.jsx)(d.default,{icon:(0,g.jsx)(h.default,{name:"content-chat"}),theme:"list",secondary:l.fbt._("Use WhatsApp on your phone to see the complete message history.",null,{hk:"2qbSkX"}),children:l.fbt._("Older documents may be available",null,{hk:"3q5iPh"})}));return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(f.default,(0,i.default)({ref:v,msgsCollection:t,queryCollection:(e,a)=>{C((()=>{t.queryDocs(n,a)}))},hasBefore:t.hasDocBefore,queryBefore:t.queryDocBefore,emptyText:u.default.t(694),chat:n},a)),_]})};var i=a(n(81109)),s=a(n(6479)),l=n(48360),o=n(67294),r=n(63183),d=a(n(58654)),c=n(7293),u=a(n(43725)),f=a(n(19593)),h=a(n(23217)),p=n(19529),m=a(n(83542)),g=n(85893);const x=["docMsgs","chat"]},61086:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.BaseEphemeralSettingRow=_,t.EphemeralSettingRow=function(e){const{chat:t,groupMetadata:n,onClick:a,theme:i,testid:s}=e;return n?(0,x.jsx)(v,{groupMetadata:n,onClick:a,theme:i,testid:s}):(0,x.jsx)(C,{chat:t,onClick:a,theme:i,testid:s})};var i=n(48360),s=n(80140),l=a(n(75116)),o=n(88102),r=a(n(52665)),d=a(n(35721)),c=a(n(35346)),u=n(24505),f=a(n(43725)),h=n(10435),p=a(n(23217)),m=n(13923),g=n(49082),x=n(85893);const C=function(e){const{onClick:t,testid:n}=e,a=(0,g.useModelValues)(e.chat,["contact","ephemeralDuration"]),l=()=>{var e;return null!==(e=a.ephemeralDuration)&&void 0!==e?e:0},d=()=>{a.contact.addPendingAction((0,s.unblockContact)(a.contact)).then((()=>{t(),o.Cmd.closeModal()})).catch((()=>{}))},c=()=>{o.Cmd.closeModal()};return(0,x.jsx)(_,{ephemeralDuration:l(),canChange:!0,onClick:()=>{a.contact.isContactBlocked?o.Cmd.openModal((0,x.jsx)(r.default,{onOK:d,okText:f.default.t(805),onCancel:c,cancelText:i.fbt._("Cancel",null,{hk:"H0gNq"}),children:l()?i.fbt._("You can't turn off disappearing messages for this chat unless you unblock this contact.",null,{hk:"o3zdA"}):i.fbt._("You can't turn on disappearing messages for this chat unless you unblock this contact.",null,{hk:"1uAyoI"})})):t()},theme:e.theme,testid:n})};const v=function(e){var t;const{onClick:n,testid:a}=e,s=(0,g.useModelValues)(e.groupMetadata,["ephemeralDuration","participants"]),l=()=>{o.Cmd.closeModal()};return(0,x.jsx)(_,{ephemeralDuration:null!==(t=s.ephemeralDuration)&&void 0!==t?t:0,canChange:s.canSetEphemeralSetting(),onClick:()=>{s.canSetEphemeralSetting()?n():o.Cmd.openModal((0,x.jsx)(r.default,{onOK:l,okText:i.fbt._("OK",null,{hk:"2KEeHb"}),children:i.fbt._("Only admins can change this setting.",null,{hk:"1NF1gS"})}))},theme:e.theme,testid:a})};function _(e){const{ephemeralDuration:t,canChange:n,onClick:a,testid:s}=e;let o;o=t>0?n?(0,h.isEphemeral24HDurationEnabled)()?(0,u.getDisappearingMessageDurationString)(t):f.default.t(460):(0,u.getDisappearingMessageExplanationString)(t):f.default.t(459);const r=(0,x.jsx)(p.default,{className:n?c.default.chevronIcon:c.default.ephemeralIcon,name:n?"chevron-right-alt":"disappearing",directional:!0});if("new-chat-info"===e.theme){const e=(0,x.jsx)(m.TextSpan,{theme:"title",children:i.fbt._("Disappearing messages",null,{hk:"384ocn"})}),t=(0,x.jsx)(m.TextDiv,{theme:"muted",children:o});return(0,x.jsx)(l.default,{side:"chevron",icon:"disappearing",onClick:a,title:e,secondaryTitle:t,testid:s})}return(0,x.jsxs)(d.default,{onClick:a,side:r,multiline:!0,children:[(0,x.jsx)("div",{className:c.default.header,children:(0,x.jsx)(m.TextSpan,{theme:"title",children:i.fbt._("Disappearing messages",null,{hk:"384ocn"})})}),(0,x.jsx)(m.TextDiv,{theme:"muted",children:o})]})}},93528:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{linkMsgs:t,chat:n,selectedMessages:a,selectable:b,onMessageSelect:j}=e,S=(0,C.default)(),E=(0,r.useRef)(null);let T;(0,x.useListener)(t,"add remove reset",(()=>{var e;null===(e=E.current)||void 0===e||e.forceUpdate()})),(0,x.useListener)(t,"query_doc_before",(()=>{var e;null===(e=E.current)||void 0===e||e.forceUpdate()})),(0,x.useListener)(n.msgs,"add bulk_add",(e=>{if(!e)return;const n=[],a=Array.isArray(e)?e:[e];Promise.all(a.map((e=>(e.getLinks().length&&n.push(e),Promise.resolve())))).then((()=>{n.length&&t.add(n)}))})),u.GK.supportsFeature(u.GK.F.MD_BACKEND)&&n.endOfHistoryTransferType===d.ConversationEndOfHistoryTransferModelPropType.COMPLETE_BUT_MORE_MESSAGES_REMAIN_ON_PRIMARY&&(T=(0,v.jsx)(c.default,{icon:(0,v.jsx)(g.default,{name:"content-chat"}),theme:"list",secondary:o.fbt._("Use WhatsApp on your phone to see the complete message history.",null,{hk:"2qbSkX"}),children:o.fbt._("Older links may be available",null,{hk:"1Hs22g"})}));const{linkMsgs:k,chat:y}=e,M=(0,s.default)(e,_);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(p.default,(0,i.default)({ref:E,msgsCollection:t,queryCollection:(e,a)=>{S((()=>{t.queryLinks(n,a)}))},hasBefore:t.hasLinkBefore,queryBefore:t.queryLinkBefore,renderElements:e=>{const n=[];return t.forEach((t=>{const i=!t.isSentByMe&&t.isGroupMsg;t.getGalleryLinks().forEach(((s,l)=>{s.href!==t.matchedText&&n.push((0,v.jsx)(h.default,{msg:t.safe(),link:s,displayAuthor:i,selectable:b,selectedMessages:a,onMessageSelect:j,onClickMsg:e},`${t.id.toString()}-${l}`))})),t.linkPreview&&n.push((0,v.jsx)(m.default,{msg:t,selectable:b,selectedMessages:a,onMessageSelect:j,displayType:l.DISPLAY_TYPE.GALLERY,onClickMsg:e},t.id.toString()))})),n.reverse(),n},emptyText:f.default.t(696),chat:n},M)),T]})};var i=a(n(81109)),s=a(n(6479)),l=n(5177),o=n(48360),r=n(67294),d=n(63183),c=a(n(58654)),u=n(7293),f=a(n(43725)),h=a(n(36576)),p=a(n(19593)),m=a(n(35563)),g=a(n(23217)),x=n(19529),C=a(n(83542)),v=n(85893);const _=["linkMsgs","chat"]},36576:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{link:t,displayAuthor:n,selectedMessages:a,onMessageSelect:b,onClickMsg:j}=e,S=(0,x.useModelValues)(e.msg,["body","caption","dir","id","isSentByMe","mediaData","type","rtl","senderObj","star","mediaData","asRevoked"]),[E,T]=(0,l.useState)(!1),[k,y]=(0,l.useState)((()=>a.isSelected(S.unsafe())));(0,g.useListener)(a,S.id.toString(),(e=>{k!==e&&y(e)}));const M=e.selectable||E?(0,_.jsx)(p.default,{checked:k,onClick:e=>{e&&e.stopPropagation(),b(S.unsafe(),!k)},msgTheme:"gallery"}):null,I=(0,r.Conversation)({mentions:S.mentionMap(),links:S.getLinks(),selectable:true,trusted:S.isTrusted()}),w=S.body&&S.body.includes(t.url)?S.body:S.caption,P=n?(0,_.jsx)("div",{className:f.default.author,children:(0,_.jsx)(o.default,{msg:S,contact:S.senderObj})}):null,A=S.getSuspiciousLinks().length>0;return(0,_.jsx)(c.default,{hover:E,onClick:()=>{j(S.unsafe(),!k)},onMouseEnter:E?null:()=>{E||T(!0)},onMouseOver:E?null:()=>{E||T(!0)},onMouseLeave:E?()=>{E&&T(!1)}:null,children:(0,_.jsxs)("div",{className:f.default.msg,children:[(0,_.jsx)(C.default,{transitionName:"delay-leave",children:M}),(0,_.jsx)(v.MessageContainer,{isSentByMe:S.isSentByMe,children:(0,_.jsxs)("div",{className:(0,s.default)(f.default.bubble,{[f.default.hasAuthor]:n,[f.default.hasSuspiciousLinks]:A}),children:[P,(0,_.jsx)(m.SuspiciousLabel,{link:t,displayType:i.DISPLAY_TYPE.GALLERY}),(0,_.jsx)(h.default,{title:t.url,isSentByMe:S.isSentByMe,canonicalUrl:t.domain,displayType:i.DISPLAY_TYPE.GALLERY,star:S.star}),(0,_.jsx)(d.EmojiText,{text:w,selectable:true,className:f.default.text,dirMismatch:S.rtl!==u.default.isRTL(),direction:S.dir,formatters:I})]})})]})})};var i=n(5177),s=a(n(94184)),l=n(67294),o=a(n(72655)),r=n(10233),d=n(65417),c=a(n(23296)),u=a(n(43725)),f=a(n(4949)),h=a(n(51845)),p=a(n(20485)),m=n(7538),g=n(19529),x=n(49082),C=a(n(41956)),v=n(58827),_=n(85893)},88224:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{fullCollection:t,selectedMessages:n,mediaMsgs:a,selectable:C,onMessageSelect:M,theme:I}=e,w=(0,S.useModelValues)(e.chat,["linkCount","docCount","productCount","endOfHistoryTransferType"]),P=(0,b.default)(),A=(0,T.default)();(0,j.useListener)(a,"add query_media_before",(()=>{P()})),(0,j.useListener)(a,"remove",(e=>{n&&n.isSelected(e)&&n.setVal(e,!1),P()})),(0,j.useListener)(a,"reset",(()=>{n&&n.unsetAll(),P()}));const N=function(e,t,n,a,o,r){let d=null;const u=(0,l.default)(e,(e=>-e.t)).filter(y).slice(0,!0===t?e.length:6);return(0,s.default)(u,((e,s)=>{const l=!0!==t&&s>=3&&s<=5?"hideableSecondRow":void 0,u=(0,k.jsx)(p.default,{className:r?m.default.roundedThumb:"",aspectRatio:r?1.1:1,msg:e,hoverEvent:t,selectable:n,selectedMessages:a,onMessageSelect:o,theme:l},e.id.toString());if(!0!==t)return[u];const f=c.Clock.monthStr(e.t);if(f!==d){d=f;const t=(0,k.jsx)(g.default,{children:f},`header-${e.t}`);return[...(0,i.default)(6,(t=>(0,k.jsx)(x.EmptyCanvas,{},`padding-${e.t}-${t}`))),t,u]}return[u]}))}(a.toArray(),t,C,n,M,"new-chat-info"===I),D=e=>{a.hasMediaBefore&&A((()=>{a.queryMedia({chat:(0,v.unproxy)(w),msg:e})}))},O=(0,E.default)((e=>{a.hasMediaBefore&&e.scrollTop+u.default.SCROLL_FUDGE>e.scrollHeight-e.clientHeight&&D(a.head())}),100);let R;if((0,r.useEffect)((()=>{a.hasMediaBefore&&D()}),[]),h.GK.supportsFeature(h.GK.F.MD_BACKEND)&&w.endOfHistoryTransferType===d.ConversationEndOfHistoryTransferModelPropType.COMPLETE_BUT_MORE_MESSAGES_REMAIN_ON_PRIMARY){let e;!0===t?e=o.fbt._("Older media may be available",null,{hk:"1ml0rh"}):0===a.length&&0===w.docCount&&0===w.linkCount&&0===w.productCount&&(e=o.fbt._("Older files may be available",null,{hk:"2BvwwV"})),R="new-chat-info"===I?(0,k.jsx)(f.default,{theme:"new-chat-info",secondary:o.fbt._("Use WhatsApp on your phone to see the complete message history.",null,{hk:"2qbSkX"}),children:e}):(0,k.jsx)(f.default,{icon:(0,k.jsx)(_.default,{name:"content-chat"}),theme:"list",secondary:o.fbt._("Use WhatsApp on your phone to see the complete message history.",null,{hk:"2qbSkX"}),children:e})}return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(x.MediaGalleryView,{medias:N,mediaCollection:a,fullCollection:t,chat:(0,v.unproxy)(w),onScroll:e=>{O(e.currentTarget)},theme:I}),R]})};var i=a(n(98913)),s=a(n(94654)),l=a(n(89734)),o=n(48360),r=n(67294),d=n(63183),c=n(22683),u=a(n(69618)),f=a(n(58654)),h=n(7293),p=a(n(11858)),m=a(n(81030)),g=a(n(73307)),x=n(60263),C=n(41908),v=n(31019),_=a(n(23217)),b=a(n(59909)),j=n(19529),S=n(49082),E=a(n(88857)),T=a(n(83542)),k=n(85893);function y(e){return!!h.GK.isMediaGalleryFixEnabled()||(!h.GK.supportsFeature(h.GK.F.MD_BACKEND)||(0,C.hasThumbnail)(e.mediaData))}},11858:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{msg:t,hoverEvent:n,selectable:a,onMessageSelect:p,theme:m,className:g,selectedMessages:x}=e,[C,v]=(0,s.useState)((()=>!(!x||!x.isSelected(t)))),_=(0,s.useRef)(null);(0,f.useListener)(x,t.id.toString(),(e=>{x&&C!==e&&v(e)}));const b=t.mediaData,j=b.type===o.default.TYPE.IMAGE&&b.renderableUrl?e=>{e.nativeEvent.dataTransfer.setData("text/uri-list",t.mediaData.renderableUrl)}:null,S=(0,i.default)(g);return(0,h.jsx)(d.MediaThumb,{classes:S,onClick:e=>{if(a&&p)return void p(t,!C);if(b.mediaStage===c.MEDIA_DATA_STAGE.ERROR_MISSING)return void l.Cmd.openModal((0,h.jsx)(r.default,{msg:t}));let n;e&&e.stopPropagation();const i=t.id;if(b.isGif||b.type===o.default.TYPE.IMAGE){const e=_.current;n=t=>i.equals(t)&&e?e:null}l.Cmd.mediaViewerModal({msg:(0,u.unproxy)(t),getZoomNode:n})},hoverEvent:n,selectable:a,selected:C,onMessageSelect:p,onDragStart:j,msg:t,theme:m,imgRef:e=>{_.current=e},aspectRatio:e.aspectRatio})};var i=a(n(94184)),s=n(67294),l=n(88102),o=a(n(2320)),r=a(n(20668)),d=n(41908),c=n(58668),u=n(31019),f=n(19529),h=n(85893)},73307:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,s.jsx)("div",{className:i.default.container,children:e.children})};var i=a(n(14040)),s=n(85893)},41908:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.MediaThumb=function(e){var t;const{msg:n,selectable:a,theme:d,active:M,imgRef:I,containerRef:w,onMessageSelect:P,selected:A=!1,onClick:N,onDragStart:D,preferPreview:O}=e,R=(0,j.default)(),L=(0,s.useRef)(null),G=(0,s.useRef)(null),B=(0,s.useRef)(null),[F,V]=(0,s.useState)(!1),[U,H]=(0,s.useState)(null);(0,S.useListener)(n.mediaData,["change:preview","change:mediaStage"],R);(0,s.useEffect)((()=>(null==I||I(L.current),null==w||w(G.current),null==n.mediaData.preview&&null==n.mediaData.fullPreviewData&&(n.mediaData.type!==c.default.TYPE.IMAGE&&n.mediaData.type!==c.default.TYPE.VIDEO||n.downloadMedia({downloadEvenIfExpensive:!1,isUserInitiated:!1,rmrReason:C.default.WEBC_RMR_REASON_CODE.MEDIA_VIEWER})),()=>{null==I||I(null),null==w||w(null)})),[]),(0,s.useEffect)((()=>{null==I||I(L.current),null==w||w(G.current)}),[I,w,L,G]);const W=()=>{P&&P(n,!A)},K=()=>{F||V(!0)},q=t=>{if(!0!==e.showTooltip||"viewerFlowTransparent"===d||!(t instanceof HTMLElement))return null;const a=t.offsetWidth;return{menu:(0,T.jsx)(g.default,{msg:n}),anchor:t,dirY:o.DirY.TOP,dirX:o.DirX.CENTER,offsetX:!0===M?.5*-a*.13:0,type:o.MenuType.tooltip}},[z,Y]=(0,E.useTimeout)((()=>{var e;B.current&&(e=B.current,H(q(e)))}),500),X=e=>{var t;F||(e.persist(),V(!0),t=e.target,B.current=t,z())},Z=()=>{F&&(Y(),V(!1),H(null))};let $;(!0===a||F&&e.hoverEvent)&&($=(0,T.jsxs)("div",{className:f.default.mediaSelect,children:[(0,T.jsx)("div",{className:f.default.shadeTop,onClick:e.onClick}),(0,T.jsx)(l.default,{onChange:W,hover:F,checked:A})]}));const Q=(0,i.default)(e.classes,f.default.canvasComponent,{[f.default.canvasSelected]:A,[f.default.mediaGalleryThumbnail]:"hideableSecondRow"!==d,[f.default.chatInfoDrawerThumbnail]:"hideableSecondRow"===d,[f.default.canvasSecondRow]:"hideableSecondRow"===d,[f.default.viewerFlow]:"viewerFlow"===d||"viewerFlowTransparent"===d,[f.default.viewerFlowTransparent]:"viewerFlowTransparent"===d,[f.default.active]:M}),J=n.star?(0,T.jsx)("div",{className:f.default.iconStar,children:(0,T.jsx)(v.default,{name:"star"})}):null,ee=y(n.mediaData),te=U?(0,T.jsx)(_.UIE,{displayName:"MediaThumbTitle",popable:!0,escapable:!0,requestDismiss:()=>{H(null)},requestRecentFocusOnUnmount:!1,children:(0,T.jsx)(b.default,{tooltip:U})}):null,ne={paddingTop:1/(null!==(t=e.aspectRatio)&&void 0!==t?t:1)*100+"%"},ae=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];n.downloadMedia({downloadEvenIfExpensive:e,isUserInitiated:!1,rmrReason:C.default.WEBC_RMR_REASON_CODE.MEDIA_VIEWER})};if(r.GK.isMediaGalleryFixEnabled()){let t;switch(function(e){const{mediaStage:t,preview:n,fullPreviewData:a}=e;switch(t){case x.MEDIA_DATA_STAGE.RESOLVED:case x.MEDIA_DATA_STAGE.PROGRESSIVE_READY:case x.MEDIA_DATA_STAGE.EXISTS:return k.Ready;case x.MEDIA_DATA_STAGE.INIT:return null!=n||null!=a?k.Ready:k.Loading;case x.MEDIA_DATA_STAGE.REMOTE_NEED_UPLOAD:case x.MEDIA_DATA_STAGE.NEED_UPLOAD:return k.NeedsUpload;case x.MEDIA_DATA_STAGE.FETCHING:case x.MEDIA_DATA_STAGE.DECRYPTING:case x.MEDIA_DATA_STAGE.PREPARING:case x.MEDIA_DATA_STAGE.UPLOADING:case x.MEDIA_DATA_STAGE.SENDING:case x.MEDIA_DATA_STAGE.REMOTE_UPLOADING:case x.MEDIA_DATA_STAGE.REUPLOADING:return k.Loading;case x.MEDIA_DATA_STAGE.NEED_POKE:return k.NeedsPoke;case x.MEDIA_DATA_STAGE.ERROR_FILE_NOT_READABLE:case x.MEDIA_DATA_STAGE.ERROR_MISSING:case x.MEDIA_DATA_STAGE.ERROR_TOO_LARGE:case x.MEDIA_DATA_STAGE.ERROR_UNSUPPORTED:return k.Error}}(n.mediaData)){case k.Loading:t=(0,T.jsx)(m.MediaThumbLoading,{mediaType:n.mediaData.type});break;case k.NeedsPoke:t=(0,T.jsx)(m.MediaThumbNeedsPoke,{onClick:()=>ae(!0)});break;case k.Error:t=(0,T.jsx)(m.MediaThumbError,{onClick:e.onClick,mediaType:n.mediaData.type});break;case k.NeedsUpload:case k.Ready:t=null}return(0,T.jsxs)("div",{ref:G,className:Q,"data-testid":"media-canvas",onMouseOver:K,onMouseEnter:X,onMouseLeave:Z,children:[$,(0,T.jsxs)("div",{className:f.default.canvasBody,children:[(0,T.jsx)(p.default,{mediaData:n.mediaData}),(0,T.jsx)(h.default,{mediaData:n.mediaData,selected:A}),J]}),(0,T.jsx)(u.default,{downloadMedia:ae,onClick:N,onDragStart:D,preferPreview:O,ref:L,msg:n}),te,t,(0,T.jsx)("div",{style:ne})]})}return ee?(0,T.jsxs)("div",{ref:G,className:Q,"data-testid":"media-canvas",onMouseOver:K,onMouseEnter:X,onMouseLeave:Z,children:[$,(0,T.jsxs)("div",{className:f.default.canvasBody,children:[(0,T.jsx)(p.default,{mediaData:n.mediaData}),(0,T.jsx)(h.default,{mediaData:n.mediaData,selected:A}),J]}),(0,T.jsx)(u.default,{downloadMedia:ae,onClick:N,onDragStart:D,preferPreview:O,ref:L,msg:n}),te,(0,T.jsx)("div",{style:ne})]}):null},t.hasThumbnail=y;var i=a(n(94184)),s=n(67294),l=a(n(9275)),o=n(60811),r=n(7293),d=n(84866),c=a(n(2320)),u=a(n(97665)),f=a(n(80768)),h=a(n(5471)),p=a(n(19395)),m=n(90423),g=a(n(8488)),x=n(58668),C=a(n(11339)),v=a(n(23217)),_=n(18644),b=a(n(46780)),j=a(n(59909)),S=n(19529),E=n(99935),T=n(85893);const k=n(54302).Mirrored(["Loading","Ready","Error","NeedsPoke","NeedsUpload"]);function y(e){if(r.GK.isMediaGalleryFixEnabled())return!0;switch(e.type){case c.default.TYPE.VIDEO:case c.default.TYPE.IMAGE:if(null!=e.preview||null!=e.fullPreviewData||e.mediaStage===x.MEDIA_DATA_STAGE.RESOLVED)return!0;if(d.MediaBlobCache.has(e.filehash)){try{d.MediaBlobCache.getOrCreateURL(e.filehash)}catch(e){return!1}return!0}return!1;default:return!0}}},97665:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(81109)),s=a(n(94184)),l=n(67294),o=a(n(2320)),r=a(n(1001)),d=n(58668),c=a(n(20553)),u=a(n(34949)),f=n(85893);const h=(0,l.forwardRef)(((e,t)=>{let{children:n,className:a,shade:i,url:s,onClick:l,onDragStart:o}=e;const d=!0===i?(0,f.jsx)("div",{className:r.default.shade}):null,c=null!=s&&""!==s?{backgroundImage:`url(${s})`}:null;return(0,f.jsxs)("div",{className:a,"data-testid":"media-canvas-img",style:c,onClick:l,ref:t,onDragStart:o,draggable:null!=o||null,children:[n,d]})}));var p=(0,l.forwardRef)(((e,t)=>{let{downloadMedia:n,msg:a,onClick:l,onDragStart:p,preferPreview:m}=e;const{mediaData:g}=a,x={onClick:l,onDragStart:p,ref:t};switch(g.type){case o.default.TYPE.AUDIO:return(0,f.jsx)(h,(0,i.default)((0,i.default)({},x),{},{className:`${r.default.mediaCanvas} attach-media-audio-thumb`}));case o.default.TYPE.VIDEO:{var C;const e=null==g.fullPreviewData,t=null!==(C=g.fullPreviewData)&&void 0!==C?C:g.preview;return(0,f.jsx)(h,(0,i.default)((0,i.default)({},x),{},{className:(0,s.default)(r.default.mediaCanvas,{"media-video-thumb":g.isGif&&!g.preview,[r.default.blur]:e}),shade:!0,url:t instanceof u.default?t.url():null}))}case o.default.TYPE.IMAGE:const e=null!=g.preview&&g.mediaStage===d.MEDIA_DATA_STAGE.NEED_POKE,t=t=>(0,f.jsx)(h,(0,i.default)((0,i.default)({},x),{},{className:(0,s.default)(r.default.mediaCanvas,{[r.default.blur]:e}),shade:a.star,url:g.preview instanceof u.default?g.preview.url():null,children:null!=t?(0,f.jsx)("div",{className:r.default.mediaCanvas,style:{backgroundImage:`url(${t})`}}):null})),l=()=>null!=g.preview?t(null):(0,f.jsx)(h,(0,i.default)((0,i.default)({},x),{},{className:r.default.mediaCanvas,shade:a.star}));return!0===m?l():(0,f.jsx)("div",{className:r.default.mediaCanvas,children:(0,f.jsx)(c.default,{mediaData:g,placeholderRenderer:l,renderProgressively:!0,downloadMedia:n,children:t})});default:return(0,f.jsx)(h,(0,i.default)((0,i.default)({},x),{},{shade:a.star}))}}));t.default=p},5471:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{selected:t,mediaData:n}=e;switch(n.type){case l.default.TYPE.AUDIO:return(0,r.jsx)(d,{duration:n.duration,selected:t});case l.default.TYPE.VIDEO:return n.isGif?null:(0,r.jsx)(d,{duration:n.duration,selected:t});default:return null}};var i=a(n(94184)),s=n(22683),l=a(n(2320)),o=a(n(61639)),r=n(85893);function d(e){let{duration:t,selected:n}=e;const a=s.Clock.durationStr(t);return a?(0,r.jsx)("span",{className:(0,i.default)(o.default.container,{[o.default.selected]:n}),children:a}):null}},19395:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{mediaData:t}=e;if(!t)return null;const n=function(e){switch(e.type){case i.default.TYPE.AUDIO:return"msg-audio";case i.default.TYPE.VIDEO:return e.isGif?"msg-gif":"msg-video";default:return null}}(t);return null==n?null:(0,o.jsx)("div",{className:s.default.iconType,children:(0,o.jsx)(l.default,{name:n})})};var i=a(n(2320)),s=a(n(22745)),l=a(n(23217)),o=n(85893)},90423:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.MediaThumbError=function(e){return(0,o.jsx)("button",{className:(0,i.default)(r),onClick:e.onClick,children:(0,o.jsx)(c,{mediaType:e.mediaType})})},t.MediaThumbLoading=function(e){return(0,o.jsx)("div",{className:(0,i.default)(r),children:(0,o.jsx)(c,{mediaType:e.mediaType})})},t.MediaThumbNeedsPoke=function(e){return(0,o.jsx)("div",{className:(0,i.default)(r),children:(0,o.jsx)(s.Download,{onClick:e.onClick})})};var i=a(n(56720)),s=n(41124),l=a(n(23217)),o=n(85893);const r={position:"lhggkp7q",top:"qq0sjtgm",start:"tkdu00h0",zIndex:"jnl3jror",boxSizing:"cm280p3y",display:"p357zi0d",alignItems:"gndfcl4n",justifyContent:"ac2vgrno",width:"ln8gz9je",height:"ppled2lx"},d={color:"cyi0n1nm"};function c(e){const t="video"===e.mediaType?"video-placeholder":"img-placeholder";return(0,o.jsx)(l.default,{name:t,className:(0,i.default)(d)})}},8488:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{msg:{senderObj:{formattedShortName:t}}}=e;return(0,i.jsx)(a.TextSpan,{children:t})};var a=n(13923),i=n(85893)},19593:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(5177),s=n(67294),l=n(88102),o=a(n(69618)),r=n(85600),d=a(n(29796)),c=a(n(79011)),u=a(n(35563)),f=n(31019),h=a(n(59909)),p=a(n(88857)),m=n(85893);function g(e,t){const{queryBefore:n,hasBefore:a,msgsCollection:g,emptyText:x,scrollOffset:C=0,selectable:v,onMessageSelect:_,queryCollection:b,selectedMessages:j,renderElements:S,onProductDetail:E,setScrollOffset:T}=e,k=(0,h.default)();(0,s.useImperativeHandle)(t,(()=>({forceUpdate:k})));const y=(0,s.useRef)(null),M=e=>{a&&b(e)},I=(0,p.default)((e=>{const t=e.scrollHeight-e.clientHeight-e.scrollTop<o.default.SCROLL_FUDGE;a&&t&&M(g.head()),T&&T(e.scrollTop)}),100);(0,s.useEffect)((()=>{a&&M();const e=y.current;return e&&(e.scrollTop=C),()=>{I.cancel()}}),[]);const w=(e,t)=>{const n=(0,f.unproxy)(e);v&&void 0!==t?_(n,t):l.Cmd.openChatAt(n.chat,n.chat.getSearchContext(n))},P=S?S(w):g.map(((e,t)=>(0,m.jsx)(u.default,{msg:e,selectable:v,selectedMessages:j,onMessageSelect:_,displayType:i.DISPLAY_TYPE.GALLERY,onClickMsg:w,onProductClick:E},`${e.id.toString()}_${t}`))).reverse();if(n){if(0===P.length)return(0,m.jsx)(r.Loading,{});P.push((0,m.jsx)(d.default,{}))}return 0!==g.length||n||a?(0,m.jsx)("div",{ref:y,onScroll:e=>{I(e.target)},className:c.default.wrapper,children:P}):(0,m.jsx)(r.Empty,{text:x,a8nText:"no-elements"})}var x=(0,s.forwardRef)(g);t.default=x},3721:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,x.useModelValues)(e.chat,["isGroup","muteExpiration","archive"]),n=(0,x.useModelValues)(e.mute,["isMuted"]),a=(0,x.useModelValues)(e.settings,["showArchiveV2"]),v=e=>{d.Cmd.muteChat((0,p.unproxy)(t),e)},_=()=>{v(!1),d.Cmd.closeModal()},b=n.isMuted,j=t.muteExpiration;if(t.archive&&(0,f.archiveV2Supported)()&&a.showArchiveV2)return(0,C.jsx)(u.default,{children:(0,C.jsx)(g.TextSpan,{theme:"muted",size:"16",children:s.fbt._("Archived chats are muted",null,{hk:"31ZVD"})})});const S=b?()=>{const e=t.isGroup?h.default.t(369):h.default.t(368);d.Cmd.openModal((0,C.jsx)(c.default,{onOK:_,okText:h.default.t(47),onCancel:()=>d.Cmd.closeModal(),cancelText:s.fbt._("Cancel",null,{hk:"H0gNq"}),children:e}))}:()=>{v(!0)},E=(0,C.jsx)(o.CheckBox,{checked:b,onChange:S}),T=b?h.default.t(879):s.fbt._("Mute notifications",null,{hk:"2Fm15X"}),k="new-chat-info"===e.theme;let y;if(b&&j){const e=r.Clock.untilStr(j);y=(0,C.jsx)(g.TextDiv,{theme:"muted",children:e})}if(k){const e=(0,C.jsx)(m.default,{checked:b,onChange:S}),t=(0,C.jsx)(g.TextSpan,{theme:"title",children:T});return(0,C.jsx)(l.default,{icon:"settings-notifications",a8nText:i.default.key("block-mute"),side:e,onClick:S,title:t,secondaryTitle:y})}return(0,C.jsxs)(u.default,{a8nText:i.default.key("block-mute"),side:E,onClick:S,multiline:!(!b||!j),children:[(0,C.jsx)(g.TextSpan,{theme:"title",children:T}),y]})};var i=a(n(99964)),s=n(48360),l=a(n(75116)),o=n(16593),r=n(22683),d=n(88102),c=a(n(52665)),u=a(n(35721)),f=n(57701),h=a(n(43725)),p=n(31019),m=a(n(3271)),g=n(13923),x=n(49082),C=n(85893)},99108:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{productMsgs:t,chat:n}=e,a=(0,s.default)(e,g),x=(0,o.useRef)(null);(0,h.useListener)(t,"add remove reset",(()=>{var e;null===(e=x.current)||void 0===e||e.forceUpdate()}));const C=(0,p.default)();let v;c.GK.supportsFeature(c.GK.F.MD_BACKEND)&&n.endOfHistoryTransferType===r.ConversationEndOfHistoryTransferModelPropType.COMPLETE_BUT_MORE_MESSAGES_REMAIN_ON_PRIMARY&&(v=(0,m.jsx)(d.default,{icon:(0,m.jsx)(f.default,{name:"content-chat"}),theme:"list",secondary:l.fbt._("Use WhatsApp on your phone to see the complete message history.",null,{hk:"2qbSkX"}),children:l.fbt._("Older products may be available",null,{hk:"3RBDLB"})}));return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(u.default,(0,i.default)({ref:x,msgsCollection:t,queryCollection:e=>C((()=>{t.queryProducts(n,e)})),hasBefore:t.hasProductBefore,queryBefore:t.hasProductBefore?Promise.resolve():null,emptyText:l.fbt._("No products",null,{hk:"8o7dB"}),chat:n},a)),v]})};var i=a(n(81109)),s=a(n(6479)),l=n(48360),o=n(67294),r=n(63183),d=a(n(58654)),c=n(7293),u=a(n(19593)),f=a(n(23217)),h=n(19529),p=a(n(83542)),m=n(85893);const g=["productMsgs","chat"]},38261:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{stickerPackId:t,onStickerPackView:n,stickerPackViewDelay:a}=e,p=function(e){(0,s.useEffect)((()=>{e&&u.StickerPackCollectionMd.fetchStickerPack(e)}),[e]);return(0,f.default)(u.StickerPackCollectionMd,"add remove reset",(()=>null!=e?u.StickerPackCollectionMd.get(e):null))}(t);let m;r.GK.supportsFeature(r.GK.F.MD_BACKEND)&&(0,d.default)()&&t&&(m=(0,h.jsx)(l.default,{onClick:e=>{e.stopPropagation(),n&&n(),null!=a?setTimeout((()=>o.Cmd.openStickerPack(t)),a+150):o.Cmd.openStickerPack(t)},type:"secondary",children:i.fbt._("View Pack",null,{hk:"tAlU3"})}));return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(c.StickerDetailsStickerPackInfo,{name:null==p?void 0:p.name,publisher:null==p?void 0:p.publisher,theme:c.Theme.MediaViewer}),m]})};var i=n(48360),s=n(67294),l=a(n(39770)),o=n(88102),r=n(7293),d=a(n(14048)),c=n(10595),u=n(44333),f=a(n(16704)),h=n(85893)},3271:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{checked:t,onChange:n,tabIndex:a,id:c}=e;const u=(0,i.useRef)(null),[f,h]=(0,l.default)(),p=(0,o.default)(u,f);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("input",{ref:p,className:(0,s.default)(d.hiddenInput),checked:t,onChange:function(e){e.stopPropagation();const t=u.current;null!=t&&t.focus(),n(e)},type:"checkbox",tabIndex:null!=a?a:0,id:c}),(0,r.jsxs)("div",{className:(0,s.default)(d.container),onClick:function(){const e=u.current;null!=e&&e.click()},tabIndex:-1,"aria-hidden":"true","data-testid":"visual-switch",children:[(0,r.jsx)("div",{className:(0,s.default)(d.button,t&&d.buttonChecked,h&&d.buttonFocused)}),(0,r.jsx)("div",{className:(0,s.default)(d.track,t&&d.trackChecked)})]})]})};var i=n(67294),s=a(n(56720)),l=a(n(97056)),o=a(n(41104)),r=n(85893);const d={container:{display:"i86elurf",justifyContent:"ac2vgrno",alignItems:"gndfcl4n",width:"tknnhhou",height:"jdwybkuq",marginTop:"g1eqewly",marginEnd:"kjemk6od",marginBottom:"kzyzudjh",marginStart:"k6y3xtnu",position:"g0rxnol2",cursor:"ajgl1lbb"},button:{height:"jdwybkuq",width:"m0s4cjtr",borderTopStartRadius:"ikqdvm1y",borderTopEndRadius:"m3qqxsiz",borderBottomEndRadius:"r1ncx0sg",borderBottomStartRadius:"mmj7r7ye",backgroundColor:"lbj9vhti",position:"lhggkp7q",left:"tukmaf4q",transitionProperty:"bo8jc6qi",transitionDuration:"nbciif1m",transitionTimingFunction:"oa9ii99z",boxShadow:"hjje1qk3"},buttonChecked:{transform:"e95mh68g",backgroundColor:"my8w5w2u"},buttonFocused:{boxShadow:"r6unq4of"},track:{width:"tknnhhou",height:"icj6mcig",backgroundColor:"masnrobp",borderTopStartRadius:"i3rsbmdh",borderTopEndRadius:"d6h2ibm4",borderBottomEndRadius:"rh5xaqwm",borderBottomStartRadius:"e6tbvuqx"},trackChecked:{backgroundColor:"hza3nq4c"},hiddenInput:{position:"lhggkp7q",width:"cxec7x23",height:"kanlod6e",overflowX:"gfz4du6o",overflowY:"r7fjleex",clip:"nmeg1xfo",clipPath:"okm7a8wg",whiteSpace:"le5p0ye3"}}},67761:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useNewChatInfoColors=function(){return n};const n={"--text-title-color":"var(--text-primary-strong)","--text-section-title-color":"var(--text-secondary-lighter)","--cell-chat-title-color":"var(--text-primary-strong)","--cell-chat-secondary-color":"var(--text-secondary-lighter)","--primary-strong":"var(--text-primary-strong)","--primary":"var(--text-primary)","--primary-muted":"var(--text-secondary-lighter)","--teal":"var(--icon-high-emphasis)","--secondary":"var(--text-secondary-lighter)","--secondary-lighter":"var(--text-secondary-lighter)","--button-alternative":"var(--icon-high-emphasis)","--link-alt":"var(--icon-high-emphasis)"}},37946:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(48360),s=n(88102),l=a(n(52665)),o=n(19380),r=a(n(29234)),d=n(65417),c=a(n(32973)),u=a(n(43725)),f=n(89389),h=n(85893);class p extends c.default{constructor(){super(...arguments),this.contactFilter=e=>{const t=this.props.chat.groupMetadata;return!!o.ContactCollection.isFilteredContact(e)&&(!(null==t?void 0:t.participants.get(e.id))||i.fbt._("Already added to group",null,{hk:"4hdDHF"}).toString())},this.confirmAddParticipant=e=>{const t=this.onAddParticipant.bind(this,e),n=u.default.t(354,{participant:e.formattedName,subject:this.props.chat.contact.name});this.push((0,h.jsx)(l.default,{onOK:t,okText:i.fbt._("Add participant",null,{hk:"48ECfz"}),onCancel:this._pop,cancelText:i.fbt._("Cancel",null,{hk:"H0gNq"}),children:(0,h.jsx)(d.EmojiText,{text:n})}))},this.onAddParticipant=e=>{(0,f.addParticipants)(this.props.chat,[e]).catch((()=>{})),s.Cmd.closeModal()},this._pop=()=>{this.pop()}}componentDidMount(){this.push((0,h.jsx)(r.default,{title:i.fbt._("Add participant",null,{hk:"48ECfz"}),filter:this.contactFilter,onCancel:this._pop,onSelect:this.confirmAddParticipant}))}}t.default=p},16947:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(48360),s=n(88102),l=a(n(52665)),o=n(19380),r=n(65417),d=a(n(32973)),c=a(n(43725)),u=n(89389),f=n(56728),h=n(18963),p=n(85893);class m extends d.default{constructor(){super(...arguments),this._isGroupParticipant=e=>{var t;const{chat:n}=this.props;return!!(null===(t=n.groupMetadata)||void 0===t?void 0:t.participants.get(e))},this.customSecondaryText=e=>{var t;const{chat:n}=this.props;return(null===(t=n.groupMetadata)||void 0===t?void 0:t.participants.get(e))?i.fbt._("Already added to group",null,{hk:"4hdDHF"}).toString():null},this.contactFilter=e=>{const t=this.props.chat.groupMetadata;return!!o.ContactCollection.isFilteredContact(e)&&(!(null==t?void 0:t.participants.get(e.id))||i.fbt._("Already added to group",null,{hk:"4hdDHF"}).toString())},this.confirmAddParticipant=e=>{const{chat:t}=this.props;this.push((0,p.jsx)(l.default,{onOK:this.onAddParticipant.bind(this,e),okText:i.fbt._({"*":"Add participants",_1:"Add participant"},[i.fbt._plural(e.length)],{hk:"4pSXvk"}),onCancel:this._pop,cancelText:i.fbt._("Cancel",null,{hk:"H0gNq"}),children:(0,p.jsx)(r.EmojiText,{text:this._makeNameEnumeration(e,t.contact.name)})}))},this._makeNameEnumeration=(e,t)=>{const n=e.map((e=>e.formattedShortName||e.shortName)).reduce(((t,n,a)=>[...t,n,a!==e.length-1&&c.default.t(420)||""]),[]);return c.default.t(355,{participants:n.join(""),subject:t})},this.onAddParticipant=e=>{(0,u.addParticipants)(this.props.chat,e).catch((()=>{})),s.Cmd.closeModal()},this._pop=()=>{this.pop()}}componentDidMount(){this.push((0,p.jsx)(f.SelectModal,{onConfirm:this.confirmAddParticipant,filter:this.contactFilter,title:i.fbt._("Add participant",null,{hk:"48ECfz"}),isDisabled:this._isGroupParticipant,isSelected:this._isGroupParticipant,customSecondaryText:this.customSecondaryText,listType:f.ListType.PARTICIPANT_MANAGE_MODAL,singleSelectionFooterType:h.FooterType.CONFIRM,multipleSelectionFooterType:h.FooterType.CONFIRM,shouldShowSelectionSummary:!1}))}}t.default=m},42237:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(62921)),s=a(n(23297)),l=a(n(32973)),o=a(n(68132)),r=n(85893);class d extends l.default{constructor(){super(...arguments),this._showArchiveSettingsDrawer=()=>{this.push((0,r.jsx)(i.default,{settings:o.default,onClose:this._pop}))},this._pop=()=>{this.pop()}}componentDidMount(){this.push((0,r.jsx)(s.default,{showSettings:this._showArchiveSettingsDrawer,onClose:this._pop,settings:o.default}))}}t.default=d},90727:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(48926)),s=n(48360),l=n(67294),o=n(93581),r=n(27105),d=n(95176),c=a(n(60453)),u=a(n(69637)),f=n(94790),h=a(n(32973)),p=n(85893);class m extends h.default{componentDidMount(){this.push((0,p.jsx)(g,{contactId:this.props.contactId,onClose:this.pop}))}}function g(e){const{contactId:t}=e,[n,a]=(0,l.useState)(void 0),[h,m]=(0,l.useState)(!0);(0,l.useEffect)((()=>{(function(){var e=(0,i.default)((function*(){const e=yield o.BusinessProfileCollection.update(t,{getMerchantCompliance:!0}),n=(Array.isArray(e)?e[0]:e).serialize();n?(a(n.legalEntityDetails||void 0),m(!1)):__LOG__(3)`compliance: cannot fetch business details (${t.toString()})`}));return function(){return e.apply(this,arguments)}})()()}),[]);const{entityName:g,customerCareDetails:x,grievanceOfficerDetails:C}=null!=n?n:{},v=(0,d.getEntityTypeText)(n);return(0,p.jsxs)(c.default,{theme:"striped",children:[(0,p.jsx)(f.DrawerHeader,{title:s.fbt._("Business details",null,{hk:"m9xzp"}),type:f.DRAWER_HEADER_TYPE.SMALL,onCancel:e.onClose}),(0,p.jsx)(u.default,{theme:h?"center-content":void 0,children:h?(0,p.jsx)(r.ComplianceInfoLoading,{}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(r.ComplianceInfoGroup,{children:[(0,p.jsx)(r.ComplianceInfoPrimitiveField,{value:g,label:s.fbt._("Legal Name of Business",null,{hk:"2s9jD"})}),(0,p.jsx)(r.ComplianceInfoPrimitiveField,{value:v,label:s.fbt._("Business Type",null,{hk:"48J73B"})})]}),(0,p.jsxs)(r.ComplianceInfoGroup,{title:s.fbt._("Customer Care Information",null,{hk:"qlYos"}),children:[(0,p.jsx)(r.ComplianceInfoPrimitiveField,{value:null==x?void 0:x.mobileNumber,label:s.fbt._("Mobile Phone Number",null,{hk:"PMTTg"}),forceLTR:!0}),(0,p.jsx)(r.ComplianceInfoPrimitiveField,{value:null==x?void 0:x.landlineNumber,label:s.fbt._("Landline Phone Number",null,{hk:"tXYaf"}),forceLTR:!0}),(0,p.jsx)(r.ComplianceInfoPrimitiveField,{value:null==x?void 0:x.email,label:s.fbt._("Email Address",null,{hk:"2jYxR1"})})]}),(0,p.jsxs)(r.ComplianceInfoGroup,{title:s.fbt._("Grievance Officer Information",null,{hk:"3emd7I"}),children:[(0,p.jsx)(r.ComplianceInfoPrimitiveField,{value:null==C?void 0:C.name,label:s.fbt._("Name",null,{hk:"2vEs6r"})}),(0,p.jsx)(r.ComplianceInfoPrimitiveField,{value:null==C?void 0:C.mobileNumber,label:s.fbt._("Mobile Phone Number",null,{hk:"3kk5I"}),forceLTR:!0}),(0,p.jsx)(r.ComplianceInfoPrimitiveField,{value:null==C?void 0:C.landlineNumber,label:s.fbt._("Landline Phone Number",null,{hk:"4GBzF0"})}),(0,p.jsx)(r.ComplianceInfoPrimitiveField,{value:null==C?void 0:C.email,label:s.fbt._("Email Address",null,{hk:"3SvbLl"})})]})]})})]},"merchant-details-modal")}t.default=m},4782:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(81109)),s=a(n(74328)),l=a(n(7532)),o=a(n(54414)),r=n(88102),d=n(19829),c=a(n(96464)),u=a(n(37380)),f=n(62632),h=a(n(43250)),p=n(27394),m=a(n(30305)),g=a(n(32973)),x=n(7293),C=n(57701),v=a(n(48204)),_=n(88280),b=n(55800),j=a(n(91252)),S=n(55981),E=n(74429),T=n(77975),k=n(8059),y=a(n(11339)),M=n(97567),I=n(9153),w=a(n(70107)),P=n(79188),A=a(n(54050)),N=n(11395),D=a(n(77776)),O=n(74028),R=n(42906),L=n(48870),G=n(27798),B=a(n(56829)),F=n(82364),V=n(49376),U=n(85893);class H extends g.default{constructor(){super(...arguments),this._scrollOffset=0,this._setScrollOffset=e=>{this._scrollOffset=e},this.onProductDetail=(e,t)=>{const{chat:n}=this.props,a=(0,U.jsx)(w.default,{chat:n,collectionId:t,product:e,onEnd:this._end,onBack:this._popAndUpdate,refreshCarousel:!1,onProductLinkClick:this._onProductLinkClick,onProductMoreInformation:this.onProductMoreInformation,onCartClick:this._onCartClick});this.push(a)},this.onProductDetailFromInfo=e=>{const t=(0,U.jsx)(P.ProductDetailsWithDeepLink,{chat:this.props.chat,productInfo:e,onEnd:this._end,onBack:this._pop,onProductDetail:this.onProductDetail,onProductCatalog:this.onProductCatalogHeaderClick,onProductLinkClick:this._onProductLinkClick,onProductMoreInformation:this.onProductMoreInformation,onCartClick:this._onCartClick});this.push(t)},this.onCollectionSeeAll=e=>{const t=this.props.chat.id;this.push((0,U.jsx)(d.CollectionContentDrawer,{contact:this.props.chat.contact,onProductDetail:this.onProductDetail,catalogId:t,onBack:this._pop,onCatalogLinkClick:this._onCatalogLinkClick,onCartClick:this._onCartClick,collection:e}))},this._onProductLinkClick=e=>{this.push((0,U.jsx)(A.default,{product:e,onBack:this._pop}))},this.onProductMoreInformation=e=>{const t=(0,U.jsx)(D.default,{product:e,onBack:this._popAndUpdate});this.push(t)},this._onCatalogLinkClick=(e,t)=>{this.push((0,U.jsx)(l.default,{catalog:e,contact:t,onBack:this._pop}))},this._onCartClick=e=>{const t=(0,M.getProductCatalogContext)(this.props.context),n=(0,B.default)(e,this.props.chat,t);n&&this.push(n)},this.pushProductCatalog=()=>{const{chat:e}=this.props,t=(0,C.canViewCollections)()?(0,U.jsx)(o.default,{contact:e.contact,onProductDetail:this.onProductDetail,catalogId:e.id,onBack:this._pop,businessProfile:e.contact.businessProfile,onCatalogLinkClick:this._onCatalogLinkClick,onCartClick:this._onCartClick,onCollectionSeeAll:this.onCollectionSeeAll}):(0,U.jsx)(N.ProductListDrawer,{contact:e.contact,onProductDetail:this.onProductDetail,catalogId:e.id,onBack:this._pop,businessProfile:e.contact.businessProfile,onCatalogLinkClick:this._onCatalogLinkClick,onCartClick:this._onCartClick});this.push(t)},this.onProductCatalog=(e,t)=>{const n=this.props.chat.id;(0,C.canViewCollections)()&&L.QPL.markerStart(G.QuickLogMarkerId.WHATSAPP_CATALOG_COLLECTIONS_VIEW,{string:{EntryPoint:t}}),(0,T.logCarouselViewMoreClick)({catalogOwnerWid:n,catalogContext:e}),this.pushProductCatalog(n)},this.onProductCatalogHeaderClick=(e,t)=>{(0,T.logCarouselViewMoreClick)({catalogOwnerWid:e,catalogContext:t}),this.onProductCatalog(t,"ProductCatalogHeader")},this.onStarred=()=>{const e=(0,U.jsx)(F.StarredDrawerLoadable,{chat:this.props.chat,starredMsgs:this.props.chat.getStarredMsgs(),onClose:this._pop});this.push(e)},this.onAdminSetting=()=>{const{chat:e}=this.props,t=(0,U.jsx)(j.default,{chat:e,groupMetadata:e.groupMetadata,onClose:this._pop});this.push(t)},this.onContactCard=()=>{this.push((0,U.jsx)(c.default,{chat:this.props.chat,onClose:this._pop}))},this.onMediaGallery=()=>{const e=(0,U.jsx)(k.MediaGalleryDrawer,{chat:this.props.chat,onBack:this._pop,onProductDetail:this.onProductDetail,setProductsScrollOffset:this._setScrollOffset});this.push(e)},this.onGroupInviteLink=()=>{const{chat:e}=this.props;if(e.isInviteGrowthLockedGroup()){var t;const n=!!(null===(t=e.groupMetadata)||void 0===t?void 0:t.participants.iAmAdmin());return void(0,b.openGrowthLockedModal)(n,!0)}const n=(0,U.jsx)(_.GroupInviteLinkDrawerLoadable,{chat:this.props.chat,groupMetadata:e.groupMetadata,onBack:this._pop});this.push(n)},this._pop=()=>{this.pop()},this._popAndUpdate=()=>{this.popAndUpdate({initialTab:k.TABS.PRODUCTS,productsScrollOffset:this._scrollOffset})},this._end=()=>{this.end(!0)},this.onVerification=e=>{const t=e||this.props.chat.contact,n=(0,U.jsx)(V.VerificationDrawerLoadable,{contact:t,onClose:this._pop,isFirstLevel:!1});this.push(n)},this.onLiveLocation=()=>{const e=(0,U.jsx)(E.LiveLocationDrawerLoadable,{chat:this.props.chat,onClose:this._pop});this.push(e)},this._handleDDMSettingsClick=e=>{this.push((0,U.jsx)(h.default,{onClose:this._pop,entryPoint:e}))},this.onEphemeral=()=>{const{chat:e}=this.props,t=e.isGroup?y.default.DISAPPEARING_MODE_ENTRY_POINT_TYPE.GROUP_CHAT_DISAPPEARING_MESSAGES_SETTING:y.default.DISAPPEARING_MODE_ENTRY_POINT_TYPE.INDIVIDUAL_CHAT_DISAPPEARING_MESSAGES_SETTING,n=(0,U.jsx)(m.default,{chat:e,showNux:!1,entryPoint:y.default.EPHEMERAL_SETTING_ENTRY_POINT_TYPE.CHAT_INFO,onClose:this._pop,onDDMSettingsClick:()=>this._handleDDMSettingsClick(t)});this.push(n)}}componentDidMount(){const e=this.onStarred,t=this.onMediaGallery,n=this.props.chat;if(n.isGroup){var a;if(x.GK.supportsFeature(x.GK.F.MD_BACKEND))(0,O.queryAndUpdateGroupMetadataById)(n.id),(0,C.communitiesEnabled)()&&(null===(a=n.groupMetadata)||void 0===a?void 0:a.groupType)===S.GroupType.COMMUNITY&&(0,R.queryAndUpdateSubGroupMetadataById)(n.id);this.push((0,U.jsx)(v.default,{chat:n,showFullGroupDescription:this.props.showFullGroupDescription,scrollToParticipantList:this.props.scrollToParticipantList,groupMetadata:n.groupMetadata,contact:n.contact,profilePicThumb:n.contact.getProfilePicThumb(),onVerification:this.onVerification,onStarred:e,onMediaGallery:t,onAdminSetting:this.onAdminSetting,onGroupInviteLink:this.onGroupInviteLink,onLiveLocation:this.onLiveLocation,onEphemeral:this.onEphemeral,onClose:this._pop}))}else n.isBroadcast?this.push((0,U.jsx)(s.default,{chat:n,contact:n.contact,onStarred:e,onMediaGallery:t,onClose:this._pop})):n.isUser&&(n.contact.isBusiness&&(0,C.canSeeBizProfileV3)()&&r.Cmd.setDrawerContext("right",(0,M.buildProductCatalogContext)(new I.ProductCatalogSession,(0,f.getMaybeBizPlatformForLogging)(n.contact.id.toString()),y.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_PROFILE)),this.push((0,U.jsx)(u.default,{contact:n.contact,onVerification:this.onVerification,onStarred:e,onContactCard:this.onContactCard,onMediaGallery:t,onProductCatalog:this.onProductCatalog,onProductDetail:this.onProductDetail,onLiveLocation:this.onLiveLocation,onEphemeral:this.onEphemeral,onClose:this._pop,profileEntryPoint:this.props.profileEntryPoint})))}}t.default=e=>(0,U.jsx)(p.DrawerContext.Consumer,{children:t=>(0,U.jsx)(H,(0,i.default)({context:t},e))})},12642:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const{msg:n,highlightedMsgIds:a}=e,k=(0,S.default)(),y=(0,j.default)(),M=(0,g.default)(),I=(0,x.default)((()=>n.chat.constructMediaMsgs(n))),w=I.current.length,P=(0,v.default)(w),A=(0,x.default)((()=>n.type===s.MSG_TYPE.IMAGE?new m.default.UiAction({uiActionType:m.default.UI_ACTION_TYPE.IMAGE_OPEN,uiActionPreloaded:n.mediaData.mediaStage===f.MEDIA_DATA_STAGE.RESOLVED}):null)),N=(0,l.useRef)(null),D=(0,l.useRef)(),O=(0,l.useRef)(),R=(0,l.useRef)(null),L=(0,l.useRef)(null),G=(0,l.useRef)(null),[B,F]=(0,l.useState)(n),[V,U]=(0,l.useState)(!1),[H,W]=(0,l.useState)(!0),K=(0,v.default)(B),q=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=L.current,n=G.current,a=R.current;if(!t||!n||!a)return;let i=0;a instanceof HTMLElement&&(i=a.clientWidth/2-t.clientWidth/2),(0,E.default)(n,"stop");let s=0;e&&(s=300),(0,E.default)(a,"scroll",{duration:s,container:n,offset:i,axis:"x",easing:[.1,.82,.25,1]})},z=e=>{if(!e)return!0;const{isViewOnce:t,isStickerMsg:n}=e;return!t&&!n};(0,l.useEffect)((()=>{var e;q(),z(n)&&(e=L.current)&&(0,E.default)(e,{opacity:[1,0],translateY:["0%","100%"]},{duration:300,delay:100,easing:[.1,.82,.25,1]}).then((()=>{k.aborted||W(!1)}))}),[]),(0,l.useEffect)((()=>{d.GK.isMediaGalleryFixEnabled()&&w>(null!=P?P:0)&&q()}));const Y=e=>{y((()=>{I.current.loadMoreAroundIfNeeded(e)})),F(e)},X=e=>{if(e&&e.stopPropagation(),V)return;const t=B;if(!t)return;let a=null;for(a=I.current.getAfter(t);(null===(i=a)||void 0===i?void 0:i.mediaData)&&!(0,u.hasThumbnail)(a.mediaData);){var i;a=I.current.getAfter(a)}a?Y(a):I.current.hasMediaAfter&&(D.current||(D.current=I.current.queryMedia({chat:n.chat,msg:n,direction:"after"}).then((e=>{k.aborted||"number"==typeof e.length&&e.length>0&&B===n&&X()})).catch((()=>{__LOG__(3)`query media msgs error: `})).finally((()=>{D.current=null}))))},Z=e=>{if(e&&e.stopPropagation(),V)return;const t=B;if(!t)return;let a=null;for(a=I.current.getBefore(t);(null===(i=a)||void 0===i?void 0:i.mediaData)&&!(0,u.hasThumbnail)(a.mediaData);){var i;a=I.current.getBefore(a)}a?Y(a):I.current.hasMediaBefore&&(O.current||(O.current=I.current.queryMedia({chat:n.chat,msg:n,direction:"before"}).then((e=>{k.aborted||"number"==typeof e.length&&e.length>0&&B===n&&Z()})).catch((()=>{__LOG__(3)`query media msgs error: `})).finally((()=>{O.current=null}))))},$=()=>{o.Cmd.closeModalMedia()},Q=(0,_.default)((()=>{F(null),$()})),J=(null==B?void 0:B.isViewOnce)||(null==B?void 0:B.isStickerMsg);(0,C.useListener)(J?B:null,"revoked",Q),(0,l.useEffect)((()=>{if(J&&(null==B?void 0:B.isEphemeral)){const e=B.timeUntilExpiration();null!=e&&setTimeout(Q,1e3*e)}}),[B,Q,J]);const ee=J?null:I.current;(0,C.useListener)(ee,"remove",((e,t,a)=>{const s=I.current,l=B;if(s.includes(n)||null!=l&&null!=l.id&&l.id.toString()!==e.id.toString())return void M();const o=a.index;0===s.length?$():s.length===o?Y((0,i.default)(s.at(o-1),"mediaMsgs.at(index - 1)")):Y((0,i.default)(s.at(o),"mediaMsgs.at(index)"))})),(0,C.useListener)(ee,"reset",(()=>{$()})),(0,C.useListener)(ee,"query_media_after",(()=>{M()})),(0,C.useListener)(ee,"query_media_before",(()=>{const e=G.current;e&&(N.current=e.scrollWidth,e instanceof HTMLElement&&M())})),(0,C.useListener)(window,"keydown",(e=>{const t=c.default.isRTL();37===e.keyCode?t?X():Z():39===e.keyCode&&(t?Z():X())})),(0,l.useEffect)((()=>{y((()=>{B&&I.current.loadMoreAroundIfNeeded(B)}))}),[B,I,y]),(0,l.useEffect)((()=>{if(K!==B)q(!0);else{const e=G.current;if(!e||null==N.current||0===N.current)return;e instanceof HTMLElement&&(e.scrollLeft+=e.scrollWidth-N.current),N.current=null}}),[B,K]);const te=(0,b.default)(((e,t,n)=>{if(0!==t.length&&null!=n){if(t.hasMediaBefore&&n<e.clientWidth){const e=(0,i.default)(t.head(),"mediaMsgs.head()");y((()=>{t.queryMedia({chat:e.chat,msg:e}),M()}))}if(t.hasMediaAfter&&n+r.default.SCROLL_FUDGE>e.scrollWidth-2*e.clientWidth){const e=(0,i.default)(t.last(),"mediaMsgs.last()");y((()=>{t.queryMedia({chat:e.chat,msg:e,direction:"after"}),M()}))}}}),100);if(!B)return null;const ne=I.current,ae=ne.last(),ie=ne.hasMediaAfter||B!==ae?X:null,se=ne.head();let le=null;le=ne.hasMediaBefore||B!==se?Z:null,d.GK.supportsFeature(d.GK.F.MD_BACKEND)&&(le=(ne.hasMediaBefore||B!==se)&&(()=>{if(!B)return!1;for(let e=I.current.indexOf(B)-1;e>0;e--){const t=I.current.at(e);if(t&&(0,u.hasThumbnail)(t.mediaData))return!0}return!1})()?Z:null);return(0,T.jsxs)("div",{className:V?"img-zoomed-in":null,children:[z(B)&&(0,T.jsx)(p.default,{activeMsg:B,mediaMsgs:I.current,highlightedMsgIds:e.highlightedMsgIds,onSelectThumb:Y,onSetActiveThumb:e=>{R.current=e},onScroll:e=>{te(e.currentTarget,I.current,e.currentTarget.scrollLeft)},setRefThumbsContainer:e=>{L.current=e},setRefThumbs:e=>{G.current=e}}),(0,T.jsx)(h.default,{msg:B,mediaData:B.mediaData,onBack:$,onExitAnimation:()=>{var e;z(n)&&(e=L.current)&&(0,E.default)(e,{opacity:[0,1],translateY:["100%","0%"]},{duration:300,easing:[.1,.82,.25,1]})},onNext:ie,onPrev:le,onImgZoomIn:e=>{U(e)},getZoomNode:e.getZoomNode,startTime:e.startTime,isAnimatingIn:H,onImageLoad:A.current?()=>{const e=A.current;e&&(e.markUiActionT(),e.commit(),A.current=null)}:null,msgIndexInAlbum:(()=>{let e=-1;if(!a||!B)return e;const t=B.id.toString();if(!a.has(t))return e;let n=0;return a.forEach((a=>{a===t&&(e=n),n++})),e})(),albumSize:(null===(t=e.highlightedMsgIds)||void 0===t?void 0:t.size)||0})]})};var i=a(n(45095)),s=n(15461),l=n(67294),o=n(88102),r=a(n(69618)),d=n(7293),c=a(n(43725)),u=n(41908),f=n(58668),h=a(n(47186)),p=a(n(38781)),m=a(n(11339)),g=a(n(59909)),x=a(n(59552)),C=n(19529),v=a(n(41502)),_=a(n(83800)),b=a(n(88857)),j=a(n(83542)),S=a(n(38080)),E=a(n(75426)),T=n(85893)},3362:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.requireBundle=t.SendContactFlowLoadable=void 0;var i=a(n(48926)),s=a(n(68356)),l=a(n(43725)),o=a(n(50860)),r=a(n(15334)),d=n(85893);const c=(0,r.default)((0,i.default)((function*(){return(yield Promise.all([n.e(8295),n.e(1702),n.e(9488),n.e(275)]).then(n.bind(n,46534))).default})),"SendContactFlow");t.requireBundle=c;const u=(0,s.default)({loader:c,loading:e=>(0,d.jsx)(o.default,{title:l.default.t(768),error:Boolean(e.error)})});t.SendContactFlowLoadable=u},23297:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onClose:t}=e,n=()=>c.ChatCollection.filter((e=>e.archive&&e.shouldAppearInList)),a=(0,D.useModelValues)(e.settings,["showArchiveV2","archive"]),L=(0,A.default)((()=>new _.default)),G=(0,A.default)((()=>new I.default([],(e=>e.id.toString())))),B=(0,l.useRef)(null),[F,V]=(0,l.useState)(!1),[U,H]=(0,l.useState)(n),W=()=>(0,E.archiveV2Supported)()&&a.showArchiveV2;(0,N.useListener)(c.ChatCollection,[W()?"sort":null,"change:archive","add","remove"].filter(Boolean),(()=>{H(n())}));const K=e=>{G.current.setVal(e,!1)};(0,N.useListener)(u.Cmd,"close_chat",(e=>{e===G.current.getVal()&&G.current.unset()})),(0,N.useListener)(u.Cmd,"update_chatlist_selection",K);const q=()=>{const e=c.ChatCollection.some((e=>e.archive));return W()&&e&&(0,j.shouldShowNUX)(f.default.NUX.ARCHIVE)&&!F};(0,l.useEffect)((()=>{if(W()&&!(0,j.getNUX)(f.default.NUX.ARCHIVE)&&(0,j.setNUX)(f.default.NUX.ARCHIVE,{views:0,maxViews:3}),q()&&(0,j.viewNUX)(f.default.NUX.ARCHIVE),W()&&(0,y.isElevatedImportantMessageEnabled)()){const e=n(),t=new Map;e.forEach((e=>{e.archiveAtMentionViewedInDrawer=!0,t.set(e.id.toString(),!0)})),(0,d.updateChatArchiveDrawer)(t)}B.current&&i.default.focus(B.current);const e=c.ChatCollection.toArray().find((e=>e.active&&e.archive));e&&K(e)}),[]);const z=()=>{t()},Y=(e,t)=>{u.Cmd.openChatFromUnread(t).then((e=>{e&&u.Cmd.focusChatTextInput(t)})),(0,E.archiveV2Supported)()&&a.archive.enabled||z()},X=e=>{e.preventDefault(),e.stopPropagation(),G.current.setNext(!0)},Z=e=>{e.preventDefault(),e.stopPropagation(),G.current.setPrev(!0)},$=e=>(0,R.jsx)(r.Chat,{chat:e.chat,mode:r.Mode.LAST,active:G.current,onClick:Y,hideArchivedIcon:(0,E.archiveV2Supported)()&&a.archive.enabled,hideMuteIcon:W(),hideMuteOption:W(),ephemeralIcon:"chat-list"}),Q=e=>{B.current=e},J=()=>{(0,j.setNUX)(f.default.NUX.ARCHIVE,{views:3,maxViews:3}),V(!0)};let ee,te;G.current.init(U,!0),q()&&(ee=(0,R.jsxs)("div",{className:o.default.nuxContainer,children:[(0,R.jsxs)(b.FlexColumn,{align:"center",children:[(0,R.jsx)("span",{className:o.default.nuxIcon,children:(0,R.jsx)(w.default,{name:"archive-nux"})}),(0,R.jsx)("div",{className:o.default.nuxHeader,children:(0,R.jsx)(P.Text,{theme:"large",as:"h1",children:s.fbt._("Archived chats will stay archived",null,{hk:"3dEGG"})})}),(0,R.jsx)("div",{className:o.default.nuxContent,children:(0,R.jsx)("div",{className:o.default.nuxText,children:(0,R.jsx)(P.Text,{theme:"plain",as:"p",children:S.GK.supportsFeature(S.GK.F.MD_BACKEND)?s.fbt._("To reduce interruptions, archived chats will stay here with notifications turned off. To change this experience, go to Settings > Chats on your phone.",null,{hk:"1VSdJQ"}):s.fbt._("To reduce interruptions, archived chats will stay here with notifications turned off. To change this experience, go to Settings > Archived Chats.",null,{hk:"1gz2m1"})})})})]}),(0,R.jsx)("button",{onClick:J,className:o.default.btnClose,children:(0,R.jsx)(w.default,{name:"x-alt"})})]}));te=U.length>0?(0,R.jsxs)(T.HotKeys,{onRef:Q,handlers:{down:X,up:Z},children:[(0,R.jsx)(O.default,{transitionName:"slide",children:ee}),(0,R.jsx)(v.FlatList,{className:o.default.flatListContainer,data:U.map((e=>({itemKey:e.id.toString(),chat:e}))),flatListController:L.current,direction:"vertical",renderItem:$})]}):(0,R.jsx)(C.Archived,{});const ne=!S.GK.supportsFeature(S.GK.F.MD_BACKEND)&&(0,E.archiveV2Supported)()&&a.archive.enabled?(0,R.jsx)(M.MenuBarItem,{a8nText:"archived-menu",icon:(0,R.jsx)(w.default,{name:"menu"}),title:k.default.t(626),children:(0,R.jsx)(g.Dropdown,{type:"dropdown_menu",flipOnRTL:!0,dirX:g.DirX.LEFT,children:(0,R.jsx)(x.DropdownItem,{a8n:"open-archive-settings menu-item",action:e.showSettings,children:s.fbt._("Archive settings",null,{hk:"1YI0jC"})})},"ArchivedDrawerHeader")}):null,ae=(0,E.archiveV2Supported)()&&a.archive.enabled?s.fbt._("Archived",null,{hk:"3HjzQg"}):k.default.t(154);return(0,R.jsxs)(h.default,{theme:"archived",children:[(0,R.jsx)(m.DrawerHeader,{title:ae,onBack:z,type:m.DRAWER_HEADER_TYPE.LARGE,menu:ne}),(0,R.jsx)(p.default,{flatListControllers:[L.current],children:te})]})};var i=a(n(52013)),s=n(48360),l=n(67294),o=a(n(82338)),r=n(65511),d=n(48285),c=n(69951),u=n(88102),f=a(n(69618)),h=a(n(60453)),p=a(n(69637)),m=n(94790),g=n(60811),x=n(71174),C=n(85600),v=n(47915),_=a(n(30855)),b=n(29623),j=n(99234),S=n(7293),E=n(57701),T=n(55414),k=a(n(43725)),y=n(10435),M=n(46346),I=a(n(87481)),w=a(n(23217)),P=n(13923),A=a(n(59552)),N=n(19529),D=n(49082),O=a(n(41956)),R=n(85893)},62138:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,p.useModelValues)(e.contact,["name","verifiedLevel","verifiedName","formattedName"]);let n;n=f.GK.supportsFeature(f.GK.F.VNAME_V_2)?(()=>{switch(t.verifiedLevel){case s.VERIFIED_LEVEL.HIGH:return t.name===t.verifiedName?h.default.t(871,{businessName:t.verifiedName}):h.default.t(872,{businessName:t.verifiedName});case s.VERIFIED_LEVEL.LOW:case s.VERIFIED_LEVEL.UNKNOWN:return i.fbt._("This may be a business. WhatsApp hasn't verified their name yet.",null,{hk:"404mUL"})}})():(()=>{switch(t.verifiedLevel){case s.VERIFIED_LEVEL.HIGH:return i.fbt._('WhatsApp has made changes to the business account types. "Verified Business" will now be labeled as "Official Business Account".',null,{hk:"3y1yjN"});case s.VERIFIED_LEVEL.LOW:return i.fbt._('WhatsApp has made changes to the business account types. "Confirmed Business" will now be labeled as "Business Account".',null,{hk:"48HVkg"});case s.VERIFIED_LEVEL.UNKNOWN:return h.default.t(1016,{businessName:t.formattedName})}})();const a=(0,m.jsx)(l.default,{href:(0,u.getBusinessFaqUrl)(),onClick:x,children:h.default.t(569)});return(0,m.jsxs)(r.default,{onOK:g,okText:h.default.t(704),children:[(0,m.jsx)(d.EmojiText,{text:n})," ",a]})};var i=n(48360),s=n(93170),l=a(n(99360)),o=n(88102),r=a(n(52665)),d=n(65417),c=n(12591),u=n(96384),f=n(7293),h=a(n(43725)),p=n(49082),m=n(85893);const g=()=>{o.Cmd.closeModal()},x=e=>{e.preventDefault(),o.Cmd.closeModal("none"),setTimeout((()=>(0,c.openExternalLink)((0,u.getBusinessFaqUrl)())),10)}},955:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{contact:t}=e;const{verifiedLevel:n,verifiedName:a}=(0,v.useModelValues)(t,["verifiedLevel","verifiedName"]),b=(0,p.getBusinessFaqUrl)(),j=!u.Conn.isSMB;(0,s.useEffect)((()=>{j&&new g.default.BannerEvent({bannerType:g.default.BANNER_TYPES.CROSS_SELL_PROFILE_INTERSTITIAL,bannerOperation:g.default.BANNER_OPERATIONS.SHOWN}).commit()}),[j]);const S=n===o.VERIFIED_LEVEL.HIGH?m.default.t(1013,{businessName:a}):i.fbt._("This business uses WhatsApp Business, which allows them to add their opening hours, address, website and catalog of products or services.",null,{hk:"82W5f"});return(0,_.jsxs)(c.default,{title:i.fbt._("About WhatsApp Business",null,{hk:"3XF5gx"}),onOK:()=>{d.Cmd.closeModal(),j&&new g.default.BannerEvent({bannerType:g.default.BANNER_TYPES.CROSS_SELL_PROFILE_INTERSTITIAL,bannerOperation:g.default.BANNER_OPERATIONS.DISMISS}).commit()},okText:i.fbt._("OK",null,{hk:"2KEeHb"}),children:[(0,_.jsx)(f.EmojiText,{text:S})," ",(0,_.jsx)(r.default,{href:b,onClick:e=>{e.preventDefault(),d.Cmd.closeModal(),setTimeout((()=>(0,h.openExternalLink)(b)),10)},children:m.default.t(569)}),j&&(0,_.jsx)("div",{className:l.default.footerNote,children:(0,_.jsxs)(C.TextSpan,{theme:"muted",size:"13",children:[i.fbt._("If you’re a business, the free WhatsApp Business app can help.",null,{hk:"3gfQun"}),(0,_.jsx)("br",{}),(0,_.jsx)(r.default,{onClick:e=>{e.preventDefault(),d.Cmd.closeModal(),new g.default.BannerEvent({bannerType:g.default.BANNER_TYPES.CROSS_SELL_PROFILE_INTERSTITIAL,bannerOperation:g.default.BANNER_OPERATIONS.CLICK}).commit(),setTimeout((()=>d.Cmd.openModal((0,_.jsx)(x.SmbAppUpsellModal,{}))),200)},className:l.default.getTheAppLink,children:i.fbt._("Learn about getting the app",null,{hk:"3ncguo"})})]})})]})};var i=n(48360),s=n(67294),l=a(n(19713)),o=n(93170),r=a(n(99360)),d=n(88102),c=a(n(52665)),u=n(17239),f=n(65417),h=n(12591),p=n(96384),m=a(n(43725)),g=a(n(11339)),x=n(70593),C=n(13923),v=n(49082),_=n(85893)},70593:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.SmbAppUpsellModal=function(){return(0,h.jsxs)(o.default,{title:i.fbt._("WhatsApp Business app",null,{hk:"4BfvOl"}),onOK:()=>{new u.default.BannerEvent({bannerType:u.default.BANNER_TYPES.CROSS_SELL_PROFILE_INTERSTITIAL,bannerOperation:u.default.BANNER_OPERATIONS.DISMISS}).commit(),l.Cmd.closeModal()},okText:i.fbt._("Close",null,{hk:"19Jpec"}),children:[(0,h.jsx)(f.default,{}),(0,h.jsx)("p",{children:(0,h.jsx)(r.EmojiText,{text:i.fbt._("If you’re a business, you can benefit from switching to the free WhatsApp Business app. It has tools to connect with customers and manage messages.",null,{hk:"40fyU7"})})}),(0,h.jsx)("br",{}),(0,h.jsxs)("p",{children:[(0,h.jsx)(r.EmojiText,{text:i.fbt._("Scan this code to get the WhatsApp Business App. Or, you can install it from the App Store or Google Play Store.",null,{hk:"2840mD"})})," ",(0,h.jsx)(s.default,{href:p,onClick:e=>{e.preventDefault(),l.Cmd.closeModal(),setTimeout((()=>(0,d.openExternalLink)(p)),10)},children:c.default.t(569)})]})]})},t.WHATSAPP_BUSINESS_URL=void 0;var i=n(48360),s=a(n(99360)),l=n(88102),o=a(n(52665)),r=n(65417),d=n(12591),c=a(n(43725)),u=a(n(11339)),f=a(n(5242)),h=n(85893);const p="https://www.whatsapp.com/business";t.WHATSAPP_BUSINESS_URL=p},5242:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const e=(0,s.useRef)(null),t=(0,s.useRef)(null),{theme:n}=(0,s.useContext)(d.ThemeContext),a="dark"===n;return(0,s.useEffect)((()=>(null!=e.current&&(t.current=new o.default(e.current,{text:"https://www.whatsapp.com/business/download",colorDark:"#122e31",colorLight:"#ffffff",width:l.default.QR_EDGE/2,height:l.default.QR_EDGE/2,typeNumber:4,correctLevel:o.default.CorrectLevel.H})),()=>{null!=t.current&&(t.current.clear(),t.current=null,e.current=null)})),[a]),(0,c.jsx)("div",{className:r.default.wrapper,children:(0,c.jsx)("div",{ref:e,className:(0,i.default)(r.default.code,{[r.default.codeDarkMode]:a}),children:(0,c.jsx)(u,{theme:n})})})};var i=a(n(94184)),s=n(67294),l=a(n(69618)),o=a(n(37360)),r=a(n(37154)),d=n(97628),c=n(85893);function u(){return(0,c.jsx)("div",{className:r.default.codeLogo,children:(0,c.jsx)("svg",{width:"100%",viewBox:"0 0 50 50",xmlns:"http://www.w3.org/2000/svg",children:(0,c.jsx)("path",{d:"M42.6776 42.6779C37.9558 47.3997 31.6777 50.0001 24.9999 50.0001C21.0047 50.0001 17.0541 49.0389 13.5244 47.2141L0.601068 49.3339L2.72832 36.3645C0.941278 32.8647 0 28.9525 0 25.0001C0 18.3223 2.60042 12.0443 7.32229 7.32237C12.0442 2.6005 18.3221 0 24.9999 0C31.6777 0 37.9558 2.6005 42.6776 7.32237C47.3995 12.0443 50 18.3223 50 25.0001C50 31.678 47.3995 37.9558 42.6776 42.6779ZM24.9999 4.33778C13.6067 4.33778 4.33772 13.607 4.33772 25.0001C4.33772 28.4792 5.21935 31.9192 6.8868 34.9487L7.24853 35.6054L5.85915 44.0756L14.2959 42.6918L14.9565 43.0601C18.0107 44.7624 21.4837 45.6622 24.9999 45.6622C36.3932 45.6622 45.6622 36.3933 45.6622 25.0001C45.6622 13.607 36.3932 4.33778 24.9999 4.33778ZM31.1133 24.3614C32.4522 24.9804 34.1536 26.3725 34.1208 29.3117C34.0749 33.4266 31.2191 35.6542 27.2744 35.6542H19.4594H18.3042C17.5079 35.6542 16.8645 35.0053 16.8713 34.2092L17.0344 15.0573C17.041 14.2714 17.6794 13.6377 18.4652 13.6366L27.1493 13.6256C31.4651 13.6256 33.9598 16.039 33.9177 19.8134C33.8903 22.2579 32.2484 23.8355 31.1133 24.3614ZM26.766 17.4622H21.3643L21.3076 22.5361H26.7093C28.5347 22.5361 29.5672 21.5152 29.584 19.9992C29.6009 18.4831 28.5915 17.4622 26.766 17.4622ZM26.9444 26.4035H21.2643L21.2038 31.8178H26.884C28.8333 31.8178 29.7752 30.5802 29.792 29.0952C29.8085 27.6101 28.8939 26.4035 26.9444 26.4035Z",fill:"currentColor"})})})}},74328:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(48360),s=n(67294),l=a(n(56720)),o=a(n(50747)),r=a(n(54231)),d=(a(n(75116)),n(98792)),c=a(n(5406)),u=n(22683),f=n(88102),h=a(n(60453)),p=(a(n(35721)),a(n(69637))),m=a(n(64738)),g=n(94790),x=a(n(4061)),C=a(n(4584)),v=a(n(30855)),_=n(7293),b=a(n(43725)),j=n(31019),S=a(n(23217)),E=n(13923),T=a(n(59909)),k=a(n(59552)),y=n(19529),M=n(49082),I=a(n(56811)),w=n(67761),P=a(n(59147)),A=n(85893);const N={flexGrow:"tvf2evcx",flexShrink:"oq44ahr5",flexBasis:"lb5m6g5c",paddingBottom:"s9fl9ege"};function D(e,t){var n,a;const{onClose:s,onMediaGallery:D}=e,O=(0,T.default)(),R=(0,P.default)(),L=(0,I.default)(),G=(0,w.useNewChatInfoColors)(),B=L?G:null,F=(0,k.default)((()=>new v.default)),V=(0,M.useModelValues)(e.chat,["id","groupMetadata"]),U=()=>{f.Cmd.openModal((0,A.jsx)(x.default,{chatId:V.id,e2eSubtype:"info_encrypted"}))};(0,y.useListener)(null===(n=V.groupMetadata)||void 0===n?void 0:n.participants,["add","remove","sort","reset"],O);let H=null;D&&(H=(0,A.jsx)(c.default,{onMediaGallery:D,chat:(0,j.unproxy)(V)}));const W=(0,A.jsx)(d.ChatInfoDrawerButtonsSection,{newChatInfo:L,children:(0,A.jsx)(m.default,{a8nText:"li-delete-broadcast",icon:(0,A.jsx)(S.default,{name:"delete"}),color:"danger",theme:L?"new-chat-info":"list-aligned",onClick:()=>{f.Cmd.deleteOrExitChat((0,j.unproxy)(V))},children:b.default.t(897)})});let K;(null===(a=V.groupMetadata)||void 0===a?void 0:a.creation)?(K=u.Clock.createdStr(V.groupMetadata.creation),K=(0,A.jsx)(E.TextDiv,{theme:"small",children:K})):K=null;let q=null;_.GK.supportsFeature(_.GK.F.MD_BACKEND)&&(q=(0,A.jsx)(C.default,{onClick:U,text:i.fbt._("Messages are end-to-end encrypted. Click to learn more.",null,{hk:"1iarlI"}),theme:L?"new-chat-info":null}));let z=null;return q&&(z=(0,A.jsxs)(d.ChatInfoDrawerSection,{newChatInfo:L,children:[null,q]})),(0,A.jsxs)(h.default,{ref:t,theme:"striped",style:B,children:[(0,A.jsxs)(g.DrawerHeader,{type:g.DRAWER_HEADER_TYPE.SMALL,onCancel:()=>{s?s():null==R||R.uie.requestDismiss()},children:[(0,A.jsx)(E.TextDiv,{theme:"title",children:i.fbt._("Broadcast list info",null,{hk:"3S4EgV"})}),K]}),(0,A.jsx)(p.default,{flatListControllers:[F.current],children:(0,A.jsxs)("div",{className:(0,l.default)(N),children:[(0,A.jsx)(r.default,{chat:(0,j.unproxy)(V)}),H,undefined,z,(0,A.jsx)(o.default,{chat:(0,j.unproxy)(V),flatListController:F.current}),W]})})]},"contact-info-modal")}var O=(0,s.forwardRef)(D);t.default=O},50747:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n;const a=(0,x.default)(),_=(0,m.default)(),b=null===(t=e.chat.groupMetadata)||void 0===t?void 0:t.participants;(0,g.useListener)(b,"add remove reset",_);const j=(0,s.useMemo)((()=>b?b.map((e=>({itemKey:e.id.toString(),participant:e,height:68}))):[]),[b]),S=(e,t)=>{C.default.equals((0,f.getMaybeMeUser)(),t.id)||(0,c.findChat)(t.id).then((function(e){o.Cmd.openChatFromUnread(e).then((t=>{t&&o.Cmd.focusChatTextInput(e)}))}))},E=null!==(n=null==b?void 0:b.length)&&void 0!==n?n:0,T=a?h.default.t(1006,{count:E,_plural:E}):i.fbt._("Recipients",null,{hk:"1rVFI5"}),k=a?null:(0,v.jsx)(p.TextSpan,{theme:"section-title",children:h.default.n(E)});return(0,v.jsx)(l.ChatInfoDrawerListSection,{newChatInfo:a,title:T,subtitle:k,children:(0,v.jsx)(u.FlatList,{flatListController:e.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:j,renderItem:e=>{const{participant:t}=e,n=d.ContactCollection.gadd(t.id);return(0,v.jsx)(r.Contact,{contact:n,theme:a?"new-chat-info":"drawer-list",admin:!!t.isAdmin,onClick:S,waitIdle:!0},t.id.toString())}})})};var i=n(48360),s=n(67294),l=n(98792),o=n(88102),r=n(2732),d=n(19380),c=n(50101),u=n(47915),f=n(99234),h=a(n(43725)),p=n(13923),m=a(n(59909)),g=n(19529),x=a(n(56811)),C=a(n(39546)),v=n(85893)},54231:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n;const a=(0,g.default)(),b=null===(t=e.chat.groupMetadata)||void 0===t?void 0:t.participants,j=(0,m.useModelValues)(e.chat.contact,["name"]),S=(0,h.default)();(0,p.useListener)(b,"add remove reset",S);const E=null!==(n=null==b?void 0:b.length)&&void 0!==n?n:0,T=i.fbt._("Broadcast List",null,{hk:"46AT9o"}).toString()+" · "+d.default.t(1006,{count:E,_plural:E}),k=j.name?(0,x.jsx)(c.Name,{contact:e.chat.contact,selectable:!0}):i.fbt._("Untitled List",null,{hk:"fYALp"});if(a)return(0,x.jsxs)(o.default,{theme:"padding-large",children:[(0,x.jsx)("div",{className:(0,s.default)(C),children:(0,x.jsx)(l.DetailImage,{id:e.chat.id,size:l.DETAIL_IMAGE_SIZE.LARGE})}),(0,x.jsxs)(r.FlexColumn,{align:"center",children:[(0,x.jsx)(f.TextHeader,{level:"2",size:"24",children:k}),(0,x.jsx)("div",{className:(0,s.default)(v),children:(0,x.jsx)(u.SelectableSpan,{dir:"auto",selectable:!0,children:(0,x.jsx)(f.TextSpan,{size:"16",color:"secondary",children:T})})})]})]});return(0,x.jsx)("div",{className:(0,s.default)(_),children:(0,x.jsx)(l.DetailImage,{id:e.chat.id,size:l.DETAIL_IMAGE_SIZE.LARGE})})};var i=n(48360),s=a(n(56720)),l=n(88984),o=a(n(33308)),r=n(29623),d=a(n(43725)),c=n(12176),u=n(52596),f=n(13923),h=a(n(59909)),p=n(19529),m=n(49082),g=a(n(56811)),x=n(85893);const C={display:"p357zi0d",justifyContent:"ac2vgrno",marginBottom:"du8bjn1j"},v={lineHeight:"a4ywakfo",marginTop:"g1eqewly"},_={display:"p357zi0d",flexDirection:"f8m0rgwh",alignItems:"gndfcl4n",marginTop:"ignnouf6",marginBottom:"bibl1e27"}},44296:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const{newChatInfo:n}=e,a=(0,s.default)(e,r);return(0,o.jsx)(l.default,(0,i.default)((0,i.default)({},a),{},{separator:null!==(t=a.separator)&&void 0!==t?t:!n,xstyle:[a.xstyle,n&&d.container],blockXstyle:[a.blockXstyle,n&&d.block]}))};var i=a(n(81109)),s=a(n(6479)),l=(a(n(56720)),a(n(35721))),o=n(85893);const r=["newChatInfo"],d={container:{paddingStart:"gx1rr48f"},block:{paddingEnd:"f9ovudaz",borderTop:"cc8mgx9x"}}},75116:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;let{icon:n,title:a,secondaryTitle:p,side:m}=e,g=(0,s.default)(e,u);const x=null!==(t=h[n])&&void 0!==t?t:20,C=(0,c.jsx)(r.FlexRow,{xstyle:f.iconContainer,align:"center",justify:"center",children:(0,c.jsx)(d.default,{color:"secondary",name:n,height:x})});let v=null!=m?m:"";"chevron"===v&&(v=(0,c.jsx)(d.default,{color:"secondary",name:"chevron-right-alt",directional:!0}));return(0,c.jsxs)(o.default,(0,i.default)((0,i.default)({newChatInfo:!0},g),{},{multiline:!0,children:[(0,c.jsxs)(r.FlexRow,{align:"center",justify:"start",children:[C,(0,c.jsx)("div",{className:(0,l.default)(f.content),children:a}),(0,c.jsx)(r.FlexRow,{align:"center",justify:"end",xstyle:f.drawerSide,children:v})]}),(0,c.jsx)("div",{className:(0,l.default)(f.secondaryTitleContainer),children:p})]}))};var i=a(n(81109)),s=a(n(6479)),l=a(n(56720)),o=a(n(44296)),r=n(29623),d=a(n(23217)),c=n(85893);const u=["icon","title","secondaryTitle","side"],f={iconContainer:{marginEnd:"bugiwsl0",width:"qssinsw9",height:"bmot90v7",flexGrow:"tvf2evcx",flexShrink:"oq44ahr5"},content:{flexGrow:"ggj6brxn",flexShrink:"m0h2a7mj",minWidth:"ktfrpxia"},drawerSide:{flexGrow:"tvf2evcx",flexShrink:"oq44ahr5",width:"baeo9xnf"},secondaryTitleContainer:{marginStart:"oybqnh0n",marginEnd:"lfum0007"}},h={settings:17}},98792:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ChatInfoDrawerButtonsSection=function(e){return(0,r.jsx)(u,(0,i.default)((0,i.default)({},e),{},{xstyle:e.newChatInfo&&h.drawerSectionContainer,children:e.children}))},t.ChatInfoDrawerListSection=function(e){return(0,r.jsx)(u,(0,i.default)((0,i.default)({},e),{},{xstyle:e.newChatInfo&&f.drawerSectionContainer,children:(0,r.jsx)("div",{className:(0,l.default)(e.newChatInfo&&f.contentContainer),children:e.children})}))},t.ChatInfoDrawerSection=u;var i=a(n(81109)),s=a(n(6479)),l=a(n(56720)),o=a(n(33308)),r=n(85893);const d=["newChatInfo"],c={title:{paddingTop:"i5tg98hk",paddingEnd:"f9ovudaz",paddingBottom:"przvwfww",paddingStart:"gx1rr48f",marginBottom:"or9x5nie"},titleText:{fontSize:"bze30y65",lineHeight:"a4ywakfo"},container:{paddingTop:"i4pc7asj",paddingEnd:"bcymb0na",paddingBottom:"myel2vfb",paddingStart:"e8k79tju"},containerWithoutTitle:{paddingTop:"i5tg98hk",paddingEnd:"bcymb0na",paddingBottom:"przvwfww",paddingStart:"e8k79tju",marginBottom:"mpdn4nr2"}};function u(e){let{newChatInfo:t}=e,n=(0,s.default)(e,d);return t?(0,r.jsx)(o.default,(0,i.default)((0,i.default)({},n),{},{xstyle:[c.container,null==n.title&&c.containerWithoutTitle,n.xstyle],titleXStyle:c.title,titleTextXStyle:c.titleText,children:n.children})):(0,r.jsx)(o.default,(0,i.default)((0,i.default)({},n),{},{children:n.children}))}const f={drawerSectionContainer:{paddingBottom:"przvwfww"},contentContainer:{marginTop:"tt8xd2xn",marginEnd:"dl6j7rsh",marginBottom:"mpdn4nr2",marginStart:"avk8rzj1"}};const h={drawerSectionContainer:{paddingTop:"i5tg98hk",paddingEnd:"f9ovudaz",paddingBottom:"przvwfww",paddingStart:"gx1rr48f"}}},5406:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{chat:t,onMediaGallery:n}=e;const a=s.fbt._("Media, links and docs",null,{hk:"3D4fAZ"}),i=(0,g.default)(),l=(0,C.jsx)(h.default,{color:"secondary",name:"chevron-right-alt",directional:!0}),o=(0,C.jsxs)(d.FlexRow,{align:"center",children:[i&&(c.GK.isMediaGalleryFixEnabled()?(0,C.jsx)(_,{chat:t}):(0,C.jsx)(b,{chat:t})),(0,C.jsx)("div",{children:l})]});return(0,C.jsx)(r.ChatInfoDrawerSection,{newChatInfo:i,a8nText:"section-media",title:a,titleOnClick:n,subtitle:o,theme:i?void 0:"padding",xstyle:i&&v.drawerSection,children:(0,C.jsx)(u.default,{chat:t,mediaMsgs:t.getMediaMsgs(),theme:i?"new-chat-info":null})})};var i=a(n(48926)),s=n(48360),l=n(67294),o=a(n(56720)),r=n(98792),d=n(29623),c=n(7293),u=a(n(88224)),f=n(41908),h=a(n(23217)),p=a(n(59909)),m=n(19529),g=a(n(56811)),x=a(n(83542)),C=n(85893);const v={mediaCount:{marginEnd:"bugiwsl0",fontSize:"bze30y65",color:"g01nkquw"},drawerSection:{paddingBottom:"aiput80m"}};function _(e){let{chat:t}=e;const n=function(e){const[t,n]=(0,l.useState)(null),a=(0,l.useCallback)((()=>{e.countAllMedia().then(n)}),[e]);return(0,l.useEffect)(a,[a]),(0,m.useListener)(e.getMediaMsgs(),["add","remove"],a),(0,m.useListener)(e.getDocMsgs(),["add","remove"],a),(0,m.useListener)(e.getLinkMsgs(),["add","remove"],a),t}(t);return(0,C.jsx)("div",{className:(0,o.default)(v.mediaCount),children:n})}function b(e){let{chat:t}=e;const n=function(e){const t=e.getMediaMsgs(),n=e.getDocMsgs(),a=e.getLinkMsgs(),s=(0,p.default)();(0,m.useListener)(t,"add remove reset query_media_before",s),(0,m.useListener)(n,"add remove reset query_doc_before",s),(0,m.useListener)(a,"add remove reset query_link_before",s);const o=(0,x.default)();(0,l.useEffect)((()=>{o((0,i.default)((function*(){const i=[];t.hasMediaBefore&&i.push(t.queryMedia({chat:e})),n.hasDocBefore&&i.push(n.queryDocs(e)),a.hasLinkBefore&&i.push(a.queryLinks(e)),yield Promise.all(i),s()})))}),[e,n,s,a,t,o]);let r=null;if(!t.hasMediaBefore&&!n.hasDocBefore&&!a.hasLinkBefore){let e=t.length;c.GK.supportsFeature(c.GK.F.MD_BACKEND)&&(e=t.filter((e=>(0,f.hasThumbnail)(e.mediaData))).length),r=e+n.length+a.length}return r}(t);return(0,C.jsx)("div",{className:(0,o.default)(v.mediaCount),children:n})}},2389:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{contact:t}=e,n=(0,c.default)(),a=(0,f.jsx)(i.default,{multiline:!0,newChatInfo:n,children:(0,f.jsx)(d.TextSpan,{theme:"title",children:(0,f.jsx)(r.default,{id:t.id})})}),p=(0,f.jsx)(i.default,{newChatInfo:n,separator:!0,children:(0,f.jsx)(o.SelectableSpan,{dir:"auto",selectable:!0,children:(0,f.jsx)(d.TextSpan,{theme:"title",children:(0,u.default)(t.id)})})});return(0,f.jsxs)(s.ChatInfoDrawerSection,{newChatInfo:n,xstyle:n&&h.container,a8nText:"section-about-and-phone-number",title:l.default.t(375),children:[a,p]})};a(n(56720));var i=a(n(44296)),s=n(98792),l=a(n(43725)),o=n(52596),r=a(n(73561)),d=n(13923),c=a(n(56811)),u=a(n(39938)),f=n(85893);const h={container:{paddingBottom:"przvwfww"}}},12242:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{contact:t}=e,n=i.fbt._("This is a business account.",null,{hk:"2x8QUJ"});function a(){r.Cmd.openModal((0,p.jsx)(l.default,{contact:t}))}function m(){r.Cmd.openModal((0,p.jsx)(o.default,{contact:t}))}let g;g=(0,f.canSeeSMBUpsell)()?(0,p.jsx)(d.default,{a8nText:"business-title",className:s.default.businessTitleWithSMBUpsell,onClick:m,side:(0,p.jsx)(h.default,{display:"inline",name:"info"}),children:n}):(0,p.jsx)(c.default,{a8nText:"business-title",className:s.default.businessTitleText,onClick:a,children:n});return(0,p.jsx)(u.default,{className:s.default.businessAccount,children:g})};var i=n(48360),s=a(n(25022)),l=a(n(62138)),o=a(n(955)),r=n(88102),d=a(n(35721)),c=a(n(64738)),u=a(n(33308)),f=n(57701),h=a(n(23217)),p=n(85893)},82192:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n;const{contact:a,onProductCatalog:S}=e,E=(0,s.useContext)(f.DrawerContext),T=(0,g.getProductCatalogSessionId)(E),k=(0,_.default)((0,C.unproxy)(e.contact)),y=(0,v.default)();let M;const I=c.ChatCollection.getActive();(null==I?void 0:I.id.equals(a.id))||((0,o.logMessageClick)(T),M=(0,b.jsx)(l.default,{icon:"chat-msg",label:i.fbt._("Message",null,{hk:"4zCxpw"}),onClick:function(){(0,h.findChat)(a.id).then((function(e){u.Cmd.openChatFromUnread(e).then((()=>{u.Cmd.closeDrawerRight()}))}))},a8nText:"business-action chat",theme:y?"new-chat-info":void 0}));let w,P,A;k.isVoiceCallEnabled&&(w=(0,b.jsx)(l.default,{icon:"voice-call-filled",label:i.fbt._("Voice call",null,{hk:"393mz4"}),disabled:!k.canStartVoiceCall,onClick:()=>{(0,o.logVoiceCallClick)(T),k.startVoiceCall()},a8nText:"business-action voice-call",theme:y?"new-chat-info":void 0}));(null===(t=a.businessProfile)||void 0===t||null===(n=t.profileOptions)||void 0===n?void 0:n.commerceExperience)===r.COMMERCE_EXPERIENCE_TYPES.CATALOG&&(P=(0,b.jsx)(l.default,{icon:"catalog-filled",label:i.fbt._("Catalog",null,{hk:"3QDkTE"}),onClick:()=>{(0,o.logCatalogClick)(T),S((0,g.getProductCatalogContext)(E),"ContactInfo")},a8nText:"business-action catalog",theme:y?"new-chat-info":void 0}));if((0,d.hasShop)(a.businessProfile)){(0,m.bannedShopsEnabled)()&&(0,d.isShopBanned)(a.businessProfile)||(A=(0,b.jsx)(l.default,{icon:"shop-filled",label:i.fbt._("Shop",null,{hk:"3KsdlE"}),onClick:function(){(0,o.logShopsClick)(T),(0,d.goToShop)(a.businessProfile)},a8nText:"business-action shop",theme:y?"new-chat-info":void 0}))}const N=(0,b.jsx)(l.default,{icon:"forward-filled",label:i.fbt._("Share",null,{hk:"4F3c6E"}).toString(),onClick:function(){(0,o.logForwardClick)(T),u.Cmd.openModal((0,b.jsx)(x.SendContactFlowLoadable,{contacts:[(0,C.unproxy)(a)],onContactsSent:e=>{u.Cmd.openChatFromUnread(e).then((()=>{}))}}))},a8nText:"business-action forward",theme:y?"new-chat-info":void 0});return(0,b.jsxs)(p.FlexRow,{xstyle:j.actionsRow,justify:"evenly",children:[M,w,P,A,N]})};var i=n(48360),s=n(67294),l=(a(n(56720)),a(n(39902))),o=n(13062),r=n(93170),d=n(94010),c=n(69951),u=n(88102),f=n(27394),h=n(50101),p=n(29623),m=n(57701),g=n(97567),x=n(3362),C=n(31019),v=a(n(56811)),_=a(n(9582)),b=n(85893);const j={actionsRow:{marginTop:"c46o30wg",marginEnd:"bsg2wrd4",marginBottom:"brac1wpa",marginStart:"f459d30t","@media (min-width: 1300px)":{marginStart:"hfp8519b",marginEnd:"acdu7ris"}}}},82739:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{businessHours:t}=e,n=(0,f.getProductCatalogSessionId)((0,l.useContext)(c.DrawerContext)),a=(0,d.getBusinessOpenState)(t),[i,o]=(0,l.useState)(!0);if(null==t)return null;const u=(0,h.getBusinessHours)(t).map((e=>{const{day:t,hours:n,first:l}=e;let o=t,r=n,c=!1;if(l)switch(a.status){case d.BUSINESS_OPEN_STATUS.OPEN_24H:o=s.fbt._("Open now",null,{hk:"28hpHy"}),r=s.fbt._("Open 24 hours",null,{hk:"1AlfF5"}),c=!0;break;case d.BUSINESS_OPEN_STATUS.OPEN_APPOINTMENT:o=s.fbt._("Open now",null,{hk:"28hpHy"}),r=s.fbt._("Open by appointment only",null,{hk:"1nxH9v"}),c=!0;break;case d.BUSINESS_OPEN_STATUS.OPEN:o=s.fbt._("Open now",null,{hk:"28hpHy"}),c=!0;break;case d.BUSINESS_OPEN_STATUS.CLOSED_TODAY:r=s.fbt._("Closed",null,{hk:"3IRgct"})}return!l&&i?null:(0,g.jsx)(C,{day:o,dayIsOpen:c,hours:r,first:l,collapsed:i},t)}));return(0,g.jsx)(m.default,{xstyle:x.businessHours,onClick:()=>{(0,r.logHoursClick)(n),o(!i)},a8nText:"business-hours-expand",children:u})};var i=a(n(94184)),s=n(48360),l=n(67294),o=(a(n(56720)),a(n(5579))),r=n(13062),d=n(94010),c=n(27394),u=n(65417),f=n(97567),h=n(43390),p=a(n(23217)),m=a(n(1784)),g=n(85893);const x={businessHours:{display:"f804f6gw",width:"ln8gz9je",textAlign:"ml4r5409"}};function C(e){if(e.first){const t=(0,g.jsx)("div",{className:o.default.businessHoursChevron,role:"button",children:(0,g.jsx)(p.default,{className:e.collapsed?"":o.default.flipSvg,display:"inline",name:"chevron-down-alt"})});return(0,g.jsxs)("div",{className:(0,i.default)(o.default.businessHoursRow,{[o.default.firstRow]:e.first}),children:[(0,g.jsx)("div",{className:(0,i.default)(o.default.businessHoursDay,{[o.default.dayIsOpen]:e.dayIsOpen}),children:(0,g.jsx)(u.EmojiText,{direction:"auto",text:e.day})}),(0,g.jsx)("div",{className:o.default.businessHoursHours,children:(0,g.jsx)(u.EmojiText,{direction:"auto",text:e.hours})}),t]})}return(0,g.jsxs)("div",{className:o.default.businessHoursRow,children:[(0,g.jsx)("div",{className:o.default.businessHoursDay,children:(0,g.jsx)(u.EmojiText,{direction:"auto",text:e.day})}),(0,g.jsx)("div",{className:o.default.businessHoursHours,children:(0,g.jsx)(u.EmojiText,{direction:"auto",text:e.hours})})]})}},71322:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{businessProfile:t}=e,{description:n,address:a,latitude:j,longitude:S,website:E,email:T,businessHours:k}=(0,C.useModelValues)(t,["description","address","latitude","longitude","website","email","businessHours"]),y=(0,s.useContext)(u.DrawerContext),M=(0,g.getProductCatalogSessionId)(y),I=(0,v.default)();let w,P,A,N,D,O;null!=n&&(w=(0,_.jsx)("div",{className:o.default.section,children:(0,_.jsx)(h.default,{text:n,textLimit:c.default.BUSINESS_DESCRIPTION_INFO_PANEL_TRUNC_LENGTH,children:e=>{let{textLimit:t}=e;return(0,_.jsx)(f.EmojiText,{className:o.default.description,selectable:!0,direction:"auto",text:n,textLimit:t})}})}));null!=k&&(P=(0,_.jsx)("div",{className:o.default.section,children:(0,_.jsx)(l.default,{businessHours:k})}));null!=a&&(A=(0,_.jsx)("div",{className:o.default.section,children:(0,_.jsx)(f.EmojiText,{selectable:!0,direction:"auto",text:a})}));null!=j&&null!=S&&(N=(0,_.jsx)("div",{style:{height:132},className:(0,i.default)(o.default.section,o.default.map),children:(0,_.jsx)(m.default,{lat:j,lng:S,name:a||"",width:590,height:132,onClick:()=>(0,r.logLocationClick)(M),a8nText:"business-info-map"})}));null!=T&&(D=(0,_.jsx)("div",{className:o.default.section,children:(0,_.jsx)(p.ExternalLink,{href:`mailto:${T}`,onClick:()=>(0,r.logEmailClick)(M),a8nText:"business-info-email",children:T})}));null!=E&&E.length>0&&(O=(0,_.jsx)("div",{className:o.default.section,children:E.map((e=>(0,_.jsx)("div",{children:(0,_.jsx)(p.ExternalLink,{href:x.URL.toMaliciousSiteRedirect(e),onClick:()=>(0,r.logWebsiteClick)(M),a8nText:"business-info-website",children:e})},e)))}));return null==w&&null==P&&null==A&&null==N&&null==D&&null==O?null:(0,_.jsxs)(d.ChatInfoDrawerSection,{newChatInfo:I,xstyle:I&&b.container,theme:I?void 0:"padding",children:[w,P,A,N,D,O]})};var i=a(n(94184)),s=n(67294),l=(a(n(56720)),a(n(82739))),o=a(n(79953)),r=n(13062),d=n(98792),c=a(n(69618)),u=n(27394),f=n(65417),h=a(n(17080)),p=n(12591),m=a(n(83452)),g=n(97567),x=n(2541),C=n(49082),v=a(n(56811)),_=n(85893);const b={container:{paddingTop:"i4pc7asj",paddingBottom:"q1nnjopg"}}},13062:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.logCatalogClick=function(e){l({viewBusinessProfileAction:s.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_CATALOG_ICON,catalogSessionId:e})},t.logEmailClick=function(e){l({viewBusinessProfileAction:s.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_EMAIL,catalogSessionId:e})},t.logForwardClick=function(e){l({viewBusinessProfileAction:s.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_FORWARD,catalogSessionId:e})},t.logHoursClick=function(e){l({viewBusinessProfileAction:s.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_HOURS,catalogSessionId:e})},t.logLocationClick=function(e){l({viewBusinessProfileAction:s.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_LOCATION,catalogSessionId:e})},t.logMessageClick=function(e){l({viewBusinessProfileAction:s.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_MESSAGE,catalogSessionId:e})},t.logProfileExit=function(e,t){l({viewBusinessProfileAction:s.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_EXIT,catalogSessionId:e,scrollDepth:t})},t.logProfileImpression=function(e,t){(0,i.smbBizProfileLoggingEnabled)()?new s.default.ViewBusinessProfile({viewBusinessProfileAction:s.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_IMPRESSION,catalogSessionId:e,profileEntryPoint:t}).commit():new s.default.ViewBusinessProfile({viewBusinessProfileAction:s.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_IMPRESSION,catalogSessionId:e}).commit()},t.logShopsClick=function(e){l({viewBusinessProfileAction:s.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_SHOPS_ICON,catalogSessionId:e})},t.logStatusClick=function(e){l({viewBusinessProfileAction:s.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_STATUS,catalogSessionId:e})},t.logVoiceCallClick=function(e){l({viewBusinessProfileAction:s.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_VOICE_CALL,catalogSessionId:e})},t.logWebsiteClick=function(e){l({viewBusinessProfileAction:s.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_WEBSITE,catalogSessionId:e})};var i=n(57701),s=a(n(11339));function l(e){const t=new s.default.ViewBusinessProfile(e);t&&t.commit()}},11197:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{contact:t}=e;let n,a;if(t.isMyContact)if(t.name!==t.verifiedName){let e;t.showBusinessCheckmarkAsSecondary&&(e=(0,r.jsx)("div",{className:i.default.icon,children:(0,r.jsx)(o.default,{name:"psa-verified"})})),n=(0,r.jsx)(l.Name,{contact:t,breakWord:!0}),a=(0,r.jsxs)("div",{className:i.default.wrapper,children:[(0,r.jsx)(s.EmojiText,{text:`~${t.verifiedName}`,className:i.default.verifiedText,direction:"auto",ellipsify:!0,titlify:!0}),e]})}else n=(0,r.jsx)(l.Name,{contact:t,showBusinessCheckmark:t.showBusinessCheckmarkAsPrimary,breakWord:!0});else n=(0,r.jsx)(s.EmojiText,{text:t.verifiedName,direction:"auto",ellipsify:!0,titlify:!0,breakWord:!0}),a=(0,r.jsx)(l.Name,{contact:t,showBusinessCheckmark:t.showBusinessCheckmarkAsPrimary});return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:i.default.title,children:n}),(0,r.jsx)("div",{className:i.default.subtitle,children:a})]})};var i=a(n(80746)),s=n(65417),l=n(12176),o=a(n(23217)),r=n(85893)},90435:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.BusinessOpenHours=function(e){const{hours:t}=e,n=u((0,o.getBusinessOpenState)(t));if(null==n)return null;const a=i.default.sanitize(n);return(0,d.jsx)("div",{className:l.default.openStatus,dangerouslySetInnerHTML:{__html:a}})},t.getBusinessOpenStr=u;var i=a(n(77482)),s=n(48360),l=a(n(63937)),o=n(94010),r=a(n(43725)),d=n(85893);function c(e){return null==e?"":e.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})}function u(e){switch(e.status){case o.BUSINESS_OPEN_STATUS.OPEN_24H:return r.default.t(249,{open:`<span class="${l.default.open}">${s.fbt._("Open",null,{hk:"187rvw"}).toString()}</span>`});case o.BUSINESS_OPEN_STATUS.OPEN_APPOINTMENT:return r.default.t(251,{open:`<span class="${l.default.open}">${s.fbt._("Open",null,{hk:"187rvw"}).toString()}</span>`});case o.BUSINESS_OPEN_STATUS.OPEN:if(e.openUntil&&e.additionalOpen&&e.additionalClose)return r.default.t(253,{open:`<span class="${l.default.open}">${s.fbt._("Open",null,{hk:"187rvw"}).toString()}</span>`,time:c(e.openUntil),additionalOpenTime:c(e.additionalOpen),additionalCloseTime:c(e.additionalClose)});if(e.openUntil)return r.default.t(252,{open:`<span class="${l.default.open}">${s.fbt._("Open",null,{hk:"187rvw"}).toString()}</span>`,time:c(e.openUntil)});break;case o.BUSINESS_OPEN_STATUS.CLOSED:return e.opensAt?r.default.t(246,{closed:`<span class="${l.default.closed}">${s.fbt._("Closed now",null,{hk:"2oDK4r"}).toString()}</span>`,time:c(e.opensAt)}):`<span class="${l.default.closed}">${s.fbt._("Closed now",null,{hk:"2oDK4r"}).toString()}</span>`;case o.BUSINESS_OPEN_STATUS.CLOSED_TODAY:return`<span class="${l.default.closed}">${s.fbt._("Closed today",null,{hk:"3uCCvH"}).toString()}</span>`}return null}},32145:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.BusinessProfile=function(e){let t;const n=(0,I.useModelValues)(e.contact,["id","verifiedLevel","name","verifiedName"]),a=(0,I.useModelValues)(e.businessProfile,["description","categories","website","email","stale","latitude","longitude","businessHours","structuredAddress"]),[i,N]=(0,l.useState)(!0);(0,l.useEffect)((()=>{new T.default.ViewBusinessProfile({viewBusinessProfileAction:T.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_IMPRESSION}).commit()}),[]);const D=()=>{N(!i)},O=()=>{u.Cmd.openModal((0,w.jsx)(o.default,{contact:n}))},R=()=>{u.Cmd.openModal((0,w.jsx)(r.default,{contact:n}))},L=(e,t,n,a)=>{const i=a?(e=>{const{streetAddress:t,localizedCityName:n,zipCode:a}=e;return t&&n&&a?b.default.t(256,{streetAddress:t,city:n,zipCode:a}):t&&n?b.default.t(255,{streetAddress:t,city:n}):t})(a):null;let s,l;if(null!=t&&null!=n&&(s=(0,w.jsx)("div",{style:{height:150},className:d.default.businessMap,children:(0,w.jsx)(S.default,{lat:t,lng:n,name:i||e,width:565,height:150})})),i){let e;e=null!=t&&null!=n?(0,E.getMapUrl)(t,n,i):(0,E.getSearchUrl)(i),l=(0,w.jsx)("div",{className:d.default.address,children:(0,w.jsx)(C.ExternalLink,{href:e,children:(0,w.jsx)(g.EmojiText,{selectable:!0,direction:"auto",text:i})})})}return l||s?(0,w.jsxs)(A,{icon:"business-address",children:[l,s]}):null};t=(0,_.canSeeSMBUpsell)()?(()=>{const e=n.verifiedLevel===c.VERIFIED_LEVEL.HIGH?s.fbt._("Official business account",null,{hk:"1KruJ"}):s.fbt._("Business account",null,{hk:"2lzdAg"});return(0,w.jsx)(h.default,{a8nText:"business-title",onClick:R,side:(0,w.jsx)(M.default,{className:d.default.infoIcon,display:"inline",name:"info"}),children:e})})():v.GK.supportsFeature(v.GK.F.VNAME_V_2)?(()=>{let e;switch(n.verifiedLevel){case c.VERIFIED_LEVEL.HIGH:e=s.fbt._("Official business account",null,{hk:"1KruJ"});break;case c.VERIFIED_LEVEL.LOW:case c.VERIFIED_LEVEL.UNKNOWN:e=s.fbt._("Business account",null,{hk:"2lzdAg"})}return(0,w.jsx)(p.default,{a8nText:"business-title",className:d.default.businessTitleText,onClick:O,children:e})})():(()=>{const e=n,t=!e.name||e.name===e.verifiedName;let a,i="psa-unverified";switch(e.verifiedLevel){case c.VERIFIED_LEVEL.HIGH:i="psa-verified",t?a=(0,w.jsx)(g.EmojiText,{className:d.default.verifiedLabel,text:s.fbt._("Verified business",null,{hk:"34Usft"})}):(a=(0,w.jsx)(g.EmojiText,{className:d.default.verifiedLabel,text:s.fbt._("Verified",null,{hk:"3UYGlB"})}),a=(0,w.jsx)(j.default,{id:262,params:{verified:a,businessName:e.verifiedName}}));break;case c.VERIFIED_LEVEL.LOW:a=t?(0,w.jsx)(g.EmojiText,{text:s.fbt._("Confirmed business",null,{hk:"3Xidu0"})}):b.default.t(257,{businessName:e.verifiedName});break;case c.VERIFIED_LEVEL.UNKNOWN:a=s.fbt._("Business account",null,{hk:"2lzdAg"})}return(0,w.jsx)(A,{icon:i,className:d.default.businessMarker,onClick:O,children:a})})();let G,B,F,V,U,H,W;const K=a;if(K.stale)G=(0,w.jsx)("div",{className:d.default.contactBusinessInfoSpinner,children:(0,w.jsx)(y.Spinner,{size:20,stroke:5})});else{var q;if(B=(null===(q=K.categories)||void 0===q?void 0:q.length)?(0,w.jsx)(A,{icon:"business-category",children:(0,w.jsx)(g.EmojiText,{selectable:!0,direction:"auto",text:K.categories.map((e=>e.localized_display_name)).join(b.default.t(420))})}):null,F=K.description?(0,w.jsx)(A,{icon:"business-description",children:(0,w.jsx)(x.default,{text:K.description,textLimit:f.default.BUSINESS_DESCRIPTION_INFO_PANEL_TRUNC_LENGTH,children:e=>{let{textLimit:t}=e;return(0,w.jsx)(g.EmojiText,{selectable:!0,direction:"auto",breakWord:!0,text:K.description,textLimit:t})}})}):null,V=L(n.name,K.latitude,K.longitude,K.structuredAddress),K.website&&Array.isArray(K.website)&&K.website.length&&(U=K.website.map(((e,t)=>{const n=(0,k.getWebsiteLink)(e),a=(0,w.jsx)(g.EmojiText,{selectable:!0,direction:"auto",text:e}),i=(0,w.jsx)(C.ExternalLink,{className:d.default.link,href:n,children:a});return(0,w.jsx)(A,{icon:"business-website",children:i},t)}))),K.businessHours&&(H=(e=>{const t=(0,k.getBusinessHours)(e).map((e=>{const{day:t,hours:n,first:a}=e;return!a&&i?null:(0,w.jsx)(P,{day:t,hours:n,first:a,collapsed:i},t)}));return(0,w.jsx)(A,{icon:"business-hours",onClick:D,children:t})})(K.businessHours)),K.email){const e=(0,w.jsx)(g.EmojiText,{selectable:!0,direction:"auto",text:K.email}),t=(0,w.jsx)(C.ExternalLink,{className:d.default.link,href:`mailto:${K.email}`,children:e});W=(0,w.jsx)(A,{icon:"business-email",dir:"auto",children:t})}}let z;(G||null!=V||B||F||null!=H||W||U)&&(z=(0,w.jsx)(m.default,{theme:"padding",children:(0,w.jsxs)("div",{className:d.default.contactBusinessInfo,children:[G,V,B,F,H,W,U]})}));return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(m.default,{children:t}),z]})};var i=a(n(94184)),s=n(48360),l=n(67294),o=a(n(62138)),r=a(n(955)),d=a(n(10824)),c=n(93170),u=n(88102),f=a(n(69618)),h=a(n(35721)),p=a(n(64738)),m=a(n(33308)),g=n(65417),x=a(n(17080)),C=n(12591),v=n(7293),_=n(57701),b=a(n(43725)),j=a(n(56074)),S=a(n(83452)),E=n(54586),T=a(n(11339)),k=n(43390),y=n(11054),M=a(n(23217)),I=n(49082),w=n(85893);const P=e=>{const t=e.first?(0,w.jsx)("div",{className:d.default.businessHoursChevron,role:"button",children:(0,w.jsx)(M.default,{className:e.collapsed?"":d.default.flipSvg,display:"inline",name:"chevron-down-alt"})}):null;return(0,w.jsxs)("div",{className:d.default.businessHoursRow,children:[(0,w.jsx)("div",{className:d.default.businessHoursDay,children:(0,w.jsx)(g.EmojiText,{direction:"auto",text:e.day})}),(0,w.jsx)("div",{className:d.default.businessHoursHours,children:(0,w.jsx)(g.EmojiText,{direction:"auto",text:e.hours})}),t]})},A=e=>(0,w.jsxs)("div",{className:(0,i.default)(d.default.dataRow,e.className),onClick:e.onClick,children:[(0,w.jsx)("div",{className:d.default.dataRowIcon,children:(0,w.jsx)(M.default,{name:e.icon})}),(0,w.jsx)("div",{className:d.default.dataRowText,children:e.children})]})},64368:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{contact:t,businessProfile:n,onOpenStatus:a,onProductCatalog:h,onProfilePicLoad:p,onProfilePicClick:m}=e;const{businessHours:g,categories:x}=(0,u.useModelValues)(n,["businessHours","categories"]),C=(0,f.jsx)(s.default,{contact:t});let v;null!=x&&x.length>0&&(v=(0,f.jsx)("div",{className:o.default.categories,children:x.map((e=>e.localized_display_name)).join(c.default.t(419))}));const _=g?(0,f.jsx)(l.BusinessOpenHours,{hours:g}):null;return(0,f.jsxs)(d.default,{className:o.default.noPaddingBottom,theme:"padding",children:[(0,f.jsx)(r.default,{contact:t,onClick:m,onOpenStatus:a,onLoad:p}),(0,f.jsxs)("div",{className:o.default.info,children:[C,v,_,(0,f.jsx)(i.default,{contact:t,onProductCatalog:h})]})]})};var i=a(n(82192)),s=a(n(11197)),l=n(90435),o=a(n(12603)),r=a(n(24697)),d=a(n(33308)),c=a(n(43725)),u=n(49082),f=n(85893)},23073:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{contact:t}=e;return(0,r.jsx)(s.ChatInfoDrawerSection,{newChatInfo:!0,a8nText:"section-about",title:i.fbt._("About",null,{hk:"4qoAfH"}),children:(0,r.jsx)(o.TextSpan,{theme:"title",size:"16",children:(0,r.jsx)(l.default,{id:t.id})})})};var i=n(48360),s=n(98792),l=a(n(73561)),o=n(13923),r=n(85893)},93861:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,x.default)();return(0,C.jsx)(_,(0,i.default)((0,i.default)({},e),{},{newChatInfo:t}))};var i=a(n(81109)),s=n(67294),l=n(65511),o=n(98792),r=n(88102),d=a(n(69618)),c=a(n(31808)),u=n(44663),f=n(47915),h=a(n(43725)),p=n(84387),m=a(n(65932)),g=n(13923),x=a(n(56811)),C=n(85893);class v extends s.Component{constructor(){super(...arguments),this._commonGroupInitialized=!1,this.state={collapsed:!1,numGroups:0},this.rerender=()=>{this.forceUpdate()},this.handleClick=(e,t)=>{r.Cmd.openChatFromUnread(t).then((e=>{e&&r.Cmd.focusChatTextInput(t)})),this.props.onClose()},this.handleShowMore=()=>{this.setState({collapsed:!1})},this.renderItem=e=>{const{chat:t,showNewChatInfo:n}=e;return(0,C.jsx)(l.Chat,{chat:t,theme:n?"new-chat-info":"drawer-list",contact:t.contact,mode:l.Mode.INFO,onClick:this.handleClick},t.id.toString())}}static getDerivedStateFromProps(e,t){const{commonGroups:n}=e.contact,a=n?n.length:0;return t.numGroups<=d.default.INFO_DRAWER_MAX_ROWS&&a>d.default.INFO_DRAWER_MAX_ROWS?{numGroups:a,collapsed:!0}:{numGroups:a}}componentDidMount(){const{commonGroups:e}=this.props.contact;e&&(this.props.listeners.add(e,"add remove",this.rerender),this._commonGroupInitialized=!0),(0,u.findCommonGroups)(this.props.contact).catch((e=>{throw __LOG__(4,!0,new Error,!0)`get from participants table failed`,SEND_LOGS("get from participants table failed when finding common groups: "+e),new Error("get from participants table failed")}))}componentDidUpdate(e){if(e.contact!==this.props.contact){const t=e.contact.commonGroups;t&&e.listeners.remove(t,"add remove",this.rerender),this._commonGroupInitialized=!1}const{commonGroups:t}=this.props.contact;t&&(this._commonGroupInitialized||(this.props.listeners.add(t,"add remove",this.rerender),this._commonGroupInitialized=!0))}componentWillUnmount(){const{commonGroups:e}=this.props.contact;e&&this._commonGroupInitialized&&(this.props.listeners.remove(e,"add remove",this.rerender),this._commonGroupInitialized=!1)}getData(){let e=this.props.contact.commonGroups;return e.length>d.default.INFO_DRAWER_MAX_ROWS&&this.state.collapsed&&(e=e.slice(0,d.default.INFO_DRAWER_MAX_ROWS)),e.map((e=>({itemKey:e.id.toString(),chat:e,showNewChatInfo:this.props.newChatInfo,height:68})))}render(){const e=this.props.contact.commonGroups,t=this.props.newChatInfo;if(!(null==e?void 0:e.length))return null;let n;if(e.length>d.default.INFO_DRAWER_MAX_ROWS&&this.state.collapsed){const t=e.length-d.default.INFO_DRAWER_MAX_ROWS;n=(0,C.jsx)(c.default,{numMore:t,onClick:this.handleShowMore,newChatInfo:this.props.newChatInfo})}const a=t?h.default.t(374,{number:h.default.n(e.length),_plural:e.length}):h.default.t(951),i=t?null:(0,C.jsx)(g.TextSpan,{theme:"section-title",children:h.default.n(e.length)});return(0,C.jsxs)(o.ChatInfoDrawerListSection,{newChatInfo:t,a8nText:"section-common-groups",title:a,subtitle:i,children:[(0,C.jsx)(f.FlatList,{flatListController:this.props.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:this.getData(),renderItem:this.renderItem}),n]})}}v.CONCERNS={contact:["commonGroups","isBusiness"]},v.displayName="ContactInfoCommonGroupsBase";const _=(0,p.ListenerHOC)((0,m.default)(v,v.CONCERNS))},37380:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(81109)),s=n(50796),l=n(48360),o=n(67294),r=a(n(56720)),d=a(n(2389)),c=a(n(12242)),u=a(n(71322)),f=n(13062),h=n(32145),p=n(94010),m=a(n(64368)),g=n(99989),x=a(n(42953)),C=n(69951),v=n(98792),_=a(n(5406)),b=n(88102),j=a(n(55944)),S=a(n(23073)),E=a(n(93861)),T=a(n(87624)),k=a(n(97140)),y=a(n(45301)),M=a(n(47091)),I=n(62632),w=n(26409),P=a(n(60453)),A=a(n(35721)),N=a(n(69637)),D=a(n(64738)),O=n(27394),R=n(94790),L=a(n(33308)),G=n(61086),B=a(n(30855)),F=n(99234),V=n(7293),U=n(57701),H=a(n(77577)),W=a(n(43725)),K=a(n(43895)),q=n(56057),z=n(82145),Y=n(97398),X=a(n(11339)),Z=a(n(3721)),$=a(n(71528)),Q=n(97567),J=n(9153),ee=n(48870),te=a(n(68132)),ne=a(n(82495)),ae=n(31019),ie=a(n(23217)),se=n(13923),le=n(50452),oe=a(n(59552)),re=n(49082),de=a(n(56811)),ce=n(67761),ue=a(n(84215)),fe=a(n(59147)),he=n(77591),pe=n(85893);const me={body:{flexGrow:"tvf2evcx",flexShrink:"oq44ahr5",flexBasis:"lb5m6g5c",paddingBottom:"s9fl9ege"},chevron:{color:"cs9t9or5"}};function ge(e,t){const{onVerification:n,onClose:a,onProductDetail:ge,onProductCatalog:xe,canLogQpl:Ce=!0}=e,ve=(0,fe.default)(),_e=(0,o.useContext)(O.DrawerContext),be=(0,de.default)(),je=(0,ce.useNewChatInfoColors)(),Se=be?je:null,Ee=(0,re.useModelValues)(e.contact,["id","formattedName","formattedUser","formattedShortName","isBusiness","isEnterprise","isMyContact","commonGroups","businessProfile","showBusinessCheckmarkAsPrimary","showBusinessCheckmarkAsSecondary","verifiedName","verifiedLevel","name","notifyName","labels","businessCatalog","isMe","statusMute","displayName"]),Te=(0,oe.default)((()=>new B.default)),ke=(0,o.useRef)(!1),[ye,Me]=(0,o.useState)(100),Ie=(0,o.useMemo)((()=>C.ChatCollection.get(Ee.id)),[Ee.id]);(0,o.useEffect)((()=>{Ee.businessProfile&&!Ee.businessProfile.stale&&Ee.businessCatalog&&g.CatalogCollection.findCarouselCatalog(Ee.id).catch((0,s.filteredCatch)(he.ServerStatusCodeError,(()=>{__LOG__(3)`Failed to fetch product catalog in contact drawer from server`}))),V.GK.supportsFeature(V.GK.F.MD_BACKEND)&&(0,w.getFanOutListJob)([Ee.id,(0,F.assertGetMe)()]).then((e=>{(0,Y.ensureE2ESessions)(e)}));const{session:t}=(0,Q.getProductCatalogContext)(_e);if(t.isAccidental())b.Cmd.setDrawerContext("right",(0,Q.buildProductCatalogContext)(new J.ProductCatalogSession,(0,I.getMaybeBizPlatformForLogging)(Ee.id.toString()),X.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_PROFILE));else if(Ee.isBusiness&&(0,U.canSeeBizProfileV3)()){Ee.id===(0,F.getMaybeMeUser)()||(0,f.logProfileImpression)((0,Q.getProductCatalogSessionId)(_e),e.profileEntryPoint)}Ce&&Ee.businessProfile&&(0,q.qplEndProfileView)(ee.QuickLogActionType.SUCCESS)}),[]),(0,ue.default)((()=>{const{session:e}=(0,Q.getProductCatalogContext)(_e);e.isAccidental()||Ee.isBusiness&&(0,U.canSeeBizProfileV3)()&&(0,f.logProfileExit)((0,Q.getProductCatalogSessionId)(_e),ye)}));const we=()=>{const e=C.ChatCollection.assertGet(Ee.id);b.Cmd.deleteOrExitChat(e)},Pe=()=>{a?a():null==ve||ve.uie.requestDismiss()},Ae=e=>{if(!ke.current)return void b.Cmd.openToast((0,pe.jsx)(le.Toast,{id:(0,le.genId)(),msg:l.fbt._("No profile photo",null,{hk:"2bdeTO"})}));const t=e.target;b.Cmd.openModalMedia((0,pe.jsx)($.default,{contact:Ee,profilePicThumb:Ee.getProfilePicThumb(),animateBorderRadius:!0,getZoomNode:e=>{e(t)}}),{transition:"profile-viewer",uim:ve})},Ne=()=>{(0,f.logStatusClick)((0,Q.getProductCatalogSessionId)(_e))},De=()=>{ke.current=!0},Oe=e=>{const t=Math.floor(100*(1+e.currentTarget.scrollTop/e.currentTarget.offsetHeight));t>ye&&Me(t)},Re=()=>{if(!(Ee&&Ee.isBusiness&&Ee.businessProfile&&Ee.businessCatalog))return null;const e=g.CatalogCollection.get(Ee.id);if(!e)return null;let t="",n=!1;(0,U.canSeeBizProfileV3)()&&(t=l.fbt._("See all",null,{hk:"3dTwyT"}),n=!0);const{session:a}=(0,Q.getProductCatalogContext)(_e);return a.isAccidental()?null:(0,p.hasShop)(Ee.businessProfile)?(0,U.bannedShopsEnabled)()&&(0,p.isShopBanned)(Ee.businessProfile)?null:(0,pe.jsx)(ne.default,{businessProfile:Ee.businessProfile,catalog:e,subtitle:t,hideIncompleteRows:n}):(0,pe.jsx)(x.default,{onProductDetail:e=>{(e=>{(0,z.qplStartProductView)("ContactInfo"),ge(e)})(e)},onProductCatalog:xe,catalog:e,subtitle:t,hideIncompleteRows:n,shouldLog:!0})},Le=(0,pe.jsx)(E.default,{contact:Ee,onClose:Pe,flatListController:Te.current});let Ge=null;e.onMediaGallery&&Ie&&(Ge=(0,pe.jsx)(_.default,{chat:Ie,onMediaGallery:e.onMediaGallery}));let Be=null;V.GK.supportsFeature(V.GK.F.LIVE_LOCATIONS)&&Ie&&(Be=(0,pe.jsx)(K.default,{chat:Ie,onClick:e.onLiveLocation}));let Fe=null,Ve=null;(0,U.canSeeBizProfileV3)()?Ve=Re():Fe=Re();const Ue=Ie&&Ie.mute.canMute()?(0,pe.jsx)(Z.default,{chat:Ie,mute:Ie.mute,settings:te.default,theme:be?"new-chat-info":null}):null;let He,We=null;if(e.onStarred&&!be){const t=(0,pe.jsx)(ie.default,{xstyle:me.chevron,name:"chevron-right-alt",directional:!0});We=(0,pe.jsx)(A.default,{a8nText:"block-starred-messages",side:t,onClick:e.onStarred,children:(0,pe.jsx)(se.TextSpan,{theme:"title",children:l.fbt._("Starred messages",null,{hk:"4wVbNG"})})})}e.onStarred&&be&&(He=(0,pe.jsx)(y.default,{chat:Ie,onStarred:e.onStarred,onContactCard:e.onContactCard}));const Ke=Ie&&Ie.shouldShowEphemeralSetting()?(0,pe.jsx)(G.EphemeralSettingRow,{onClick:e.onEphemeral,chat:Ie,theme:be?"new-chat-info":null,testid:"contact-info-dm-setting-row"}):null;let qe=null;const ze=Ie&&Ie.getReceivedVcardMsgs();if(V.GK.supportsFeature(V.GK.F.INDEX_RECEIVED_VCARD)&&(null==ze?void 0:ze.length)&&!be){const t=(0,pe.jsx)(ie.default,{xstyle:me.chevron,name:"chevron-right-alt",directional:!0});qe=(0,pe.jsx)(A.default,{a8nText:"block-contact-card",side:t,onClick:e.onContactCard,children:(0,pe.jsx)(se.TextSpan,{theme:"title",children:(0,pe.jsx)(j.default,{count:ze.length})})})}const Ye=V.GK.supportsFeature(V.GK.F.MD_BACKEND)?(0,pe.jsx)(T.default,{contact:(0,ae.unproxy)(Ee),onVerificationClick:()=>{n()}}):null;let Xe=null;(Ue||We||Ke||qe||Ye)&&(Xe=be?(0,pe.jsxs)(v.ChatInfoDrawerSection,{newChatInfo:!0,children:[Ue,Ke,Ye]}):(0,pe.jsxs)(v.ChatInfoDrawerSection,{newChatInfo:!1,children:[Ue,We,Ke,qe,Ye]}));const Ze=be&&!Ee.isBusiness,$e=Ze?null:(0,pe.jsx)(d.default,{contact:(0,ae.unproxy)(Ee)}),Qe=Ze?(0,pe.jsx)(S.default,{contact:(0,ae.unproxy)(Ee)}):null,Je=(0,U.canSeeBizProfileV3)()&&Ee.isBusiness?Ee.businessProfile?(0,pe.jsx)(m.default,{contact:Ee,onProfilePicLoad:De,onProfilePicClick:Ae,onOpenStatus:Ne,businessProfile:Ee.businessProfile,onProductCatalog:xe}):null:(0,pe.jsx)(M.default,{contact:Ee,onDetailImageLoad:De,onDetailImageClick:Ae});let et,tt,nt,at=null;var it,st;Ee.isBusiness&&Ee.businessProfile&&((0,U.canSeeBizProfileV3)()&&Ee.businessProfile?(at=(0,pe.jsx)(u.default,{businessProfile:Ee.businessProfile}),et=(0,pe.jsx)(c.default,{contact:Ee}),(null!==(it=null===(st=Ee.labels)||void 0===st?void 0:st.length)&&void 0!==it?it:0)>0&&(tt=(0,pe.jsx)(L.default,{theme:"padding",children:(0,pe.jsx)(H.default,{labels:Ee.labels,theme:"standalone"})})),nt=Oe):Ee.businessProfile&&(at=(0,pe.jsx)(h.BusinessProfile,{contact:Ee,businessProfile:Ee.businessProfile})));const lt=(0,i.default)((0,i.default)({title:l.fbt._("Contact info",null,{hk:"LUJtH"}),type:R.DRAWER_HEADER_TYPE.SMALL},!1),{},{onCancel:Pe});return(0,pe.jsxs)(P.default,{ref:t,theme:"striped",style:Se,testid:"contact-info-drawer",children:[(0,pe.jsx)(R.DrawerHeader,(0,i.default)({},lt)),(0,pe.jsx)(N.default,{flatListControllers:[Te.current],onScroll:nt,children:(0,pe.jsxs)("section",{className:(0,r.default)(me.body),children:[Je,et,tt,Ve,at,Be,Fe,Qe,Ge,He,Xe,$e,undefined,Le,(()=>{let e;return Ie&&(e=(0,pe.jsx)(D.default,{a8nText:"li-delete-chat",icon:(0,pe.jsx)(ie.default,{name:"delete"}),color:"danger",onClick:we,theme:be?"new-chat-info":null,children:W.default.t(387)})),(0,pe.jsxs)(pe.Fragment,{children:[(0,pe.jsx)(k.default,{contact:Ee}),(0,pe.jsx)(v.ChatInfoDrawerButtonsSection,{newChatInfo:be,children:e})]})})()]})})]},"contact-info-modal")}var xe=(0,o.forwardRef)(ge);t.default=xe},87624:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onVerificationClick:t}=e,n=(0,f.useModelValues)(e.contact,["id","privacyMode"]),a=(0,h.default)();if(u.ServerProps.bspSystemMessageEnabled){const e=function(e,t){if((0,r.default)(t.user))return{text:i.fbt._("Click to learn how messages and calls are secured.",null,{hk:"1UxhjE"}),title:i.fbt._("Security",null,{hk:"3j3j0a"}),onClick:()=>{(0,d.default)(i.fbt._("WhatsApp secures your messages and calls with this account.",null,{hk:"18Ci1q"}),(0,l.getSupportChatSafetyFaqUrl)(),i.fbt._("Learn more about chats with WhatsApp Support.",null,{hk:"1an25A"}))}};switch(e){case c.ReducedPrivacyMode.E2EE:return null;case c.ReducedPrivacyMode.BSP:return{text:i.fbt._("This business works with other companies to manage this chat. Click to learn more.",null,{hk:"VbOOZ"}),title:i.fbt._("Security",null,{hk:"3j3j0a"}),onClick:()=>{(0,d.default)((0,o.formatBspModalText)(),(0,l.getE2EEnterpriseFaqUrl)())}};case c.ReducedPrivacyMode.FB:return{text:i.fbt._("This business uses a secure service from the Facebook company to manage this chat. Click to learn more.",null,{hk:"1kUjsv"}),title:i.fbt._("Security",null,{hk:"3j3j0a"}),onClick:()=>{(0,d.default)((0,o.formatFbModalText)(),(0,l.getE2EEnterpriseFaqUrl)())}}}}((0,c.getReducedPrivacyMode)(n.privacyMode),n.id);if(e)return(0,m.jsx)(s.default,{title:e.title,text:e.text,onClick:e.onClick,theme:a?"new-chat-info":void 0})}const g=p.default.isVoiceCallEnabled()||p.default.isVideoCallEnabled()?i.fbt._("Messages and calls are end-to-end encrypted. Click to verify.",null,{hk:"GtGQH"}):i.fbt._("Messages are end-to-end encrypted. Click to verify.",null,{hk:"1AqhWR"});return(0,m.jsx)(s.default,{onClick:t,text:g,theme:a?"new-chat-info":void 0})};var i=n(48360),s=a(n(4584)),l=n(96384),o=n(44894),r=a(n(24238)),d=a(n(32162)),c=n(30849),u=n(64551),f=n(49082),h=a(n(56811)),p=a(n(69594)),m=n(85893)},97140:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,v.default)(),n=t?"new-chat-info":null,a=(0,C.useModelValues)(e.contact,["displayName","isBusiness","isContactBlocked"]);let b=null;if(a.isContactBlocked){const l=t?u.default.t(376,{contact:a.displayName}):u.default.t(805);b=(0,_.jsx)(c.default,{a8nText:"li-unblock",color:"success",icon:(0,_.jsx)(x.default,{name:"settings-blocked",directional:!0}),onClick:()=>{r.Cmd.openModal((0,_.jsx)(d.default,{okText:u.default.t(805),onOK:()=>{(0,s.unblockContact)(e.contact),r.Cmd.closeModal()},cancelText:i.fbt._("Cancel",null,{hk:"H0gNq"}),onCancel:()=>r.Cmd.closeModal(),children:(0,_.jsx)(f.default,{id:806,params:{contact:(0,_.jsx)(h.Name,{contact:e.contact})}})}))},theme:n,children:l})}else{const l=t?u.default.t(373,{contact:a.displayName}):u.default.t(181);b=(0,_.jsx)(c.default,{a8nText:"li-block",color:"danger",icon:(0,_.jsx)(x.default,{name:"settings-blocked",directional:!0}),onClick:()=>{r.Cmd.openModal((0,_.jsx)(d.default,{onOK:()=>{(0,s.blockContact)(e.contact),r.Cmd.closeModal()},okText:u.default.t(181),onCancel:()=>r.Cmd.closeModal(),cancelText:i.fbt._("Cancel",null,{hk:"H0gNq"}),children:(0,_.jsx)(f.default,{id:182,params:{contact:(0,_.jsx)(h.Name,{contact:e.contact})}})}))},theme:n,children:l})}let j=i.fbt._("Report business",null,{hk:"2Tvnn8"});a.isBusiness||(j=t?u.default.t(738,{contactInfo:a.displayName}):i.fbt._("Report contact",null,{hk:"3mxqJH"}));const S=(0,_.jsx)(c.default,{a8nText:"li-report-spam",color:"danger",icon:(0,_.jsx)(x.default,{name:"thumbs-down",directional:!0}),onClick:()=>{r.Cmd.openModal((0,_.jsx)(p.default,{isBusiness:e.contact.isBusiness,isGroupChat:!1,onReport:()=>{const t=l.ChatCollection.get(e.contact.id);t&&(0,m.sendSpamReport)(t,g.SpamFlow.Account),r.Cmd.closeModal()},onReportBlockClear:()=>{const t=l.ChatCollection.get(e.contact.id);t&&(0,m.sendSpamBlockClear)(t,g.SpamFlow.Block),r.Cmd.closeModal()},onCancel:()=>r.Cmd.closeModal()}))},theme:n,children:j});return t?(0,_.jsxs)(o.ChatInfoDrawerButtonsSection,{newChatInfo:!0,children:[b,S]}):(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(o.ChatInfoDrawerButtonsSection,{newChatInfo:!1,children:b}),(0,_.jsx)(o.ChatInfoDrawerButtonsSection,{newChatInfo:!1,children:S})]})};var i=n(48360),s=n(80140),l=n(69951),o=n(98792),r=n(88102),d=a(n(52665)),c=a(n(64738)),u=a(n(43725)),f=a(n(56074)),h=n(12176),p=a(n(30934)),m=n(19569),g=n(38839),x=a(n(23217)),C=n(49082),v=a(n(56811)),_=n(85893)},45301:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{chat:t,onStarred:n,onContactCard:a}=e,u=null;const f=t&&t.getReceivedVcardMsgs();if(r.GK.supportsFeature(r.GK.F.INDEX_RECEIVED_VCARD)&&(null==f?void 0:f.length)){const e=(0,c.jsx)(d.TextSpan,{theme:"title",children:(0,c.jsx)(o.default,{count:f.length})});u=(0,c.jsx)(s.default,{a8nText:"block-starred-messages",side:"chevron",icon:"account-box",onClick:a,title:e})}const h=(0,c.jsx)(d.TextSpan,{theme:"title",size:"16",children:i.fbt._("Starred messages",null,{hk:"4wVbNG"})});return(0,c.jsxs)(l.ChatInfoDrawerSection,{a8nText:"section-starred-messages",newChatInfo:!0,children:[(0,c.jsx)(s.default,{a8nText:"block-starred-messages",side:"chevron",icon:"star",onClick:n,title:h}),u]})};var i=n(48360),s=a(n(75116)),l=n(98792),o=a(n(55944)),r=n(7293),d=n(13923),c=n(85893)},47091:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,_.default)()?(0,E.jsx)(P,(0,i.default)({},e)):(0,E.jsx)(I,(0,i.default)({},e))};var i=a(n(81109)),s=n(48360),l=a(n(56720)),o=a(n(39902)),r=n(69951),d=n(88984),c=a(n(33308)),u=n(65417),f=n(29623),h=n(7293),p=a(n(77577)),m=n(12176),g=n(52596),x=n(31019),C=a(n(23217)),v=n(13923),_=a(n(56811)),b=a(n(9582)),j=a(n(35148)),S=a(n(39938)),E=n(85893);const T={display:"p357zi0d",justifyContent:"ac2vgrno",marginBottom:"du8bjn1j"},k={minHeight:"g4oj0cdv",marginTop:"g1eqewly",overflowX:"gfz4du6o",overflowY:"r7fjleex",color:"hp667wtd",textOverflow:"lhj4utae",whiteSpace:"le5p0ye3"},y={display:"p357zi0d",flexDirection:"sap93d0t"},M={display:"l7jjieqr",flexShrink:"oq44ahr5",flexGrow:"tvf2evcx",flexBasis:"lb5m6g5c",marginTop:"b9l0eqez",marginStart:"k6y3xtnu"};function I(e){let{contact:t,onDetailImageLoad:n,onDetailImageClick:a}=e;const i=!t.name&&t.notifyName?(0,E.jsx)("div",{className:(0,l.default)(k),children:(0,E.jsxs)(v.TextSpan,{theme:"muted",children:["~",(0,E.jsx)(u.EmojiText,{direction:"auto",text:t.notifyName,selectable:!0})]})}):null,s=t.showBusinessCheckmarkAsSecondary&&h.GK.supportsFeature(h.GK.F.VNAME_V_2)?(0,E.jsxs)("div",{className:(0,l.default)(y),children:[(0,E.jsx)(u.EmojiText,{text:t.verifiedName,direction:"auto"}),(0,E.jsx)("div",{className:(0,l.default)(M),children:(0,E.jsx)(C.default,{name:"psa-verified"})})]}):null,o=r.ChatCollection.get(t.id),f=(null==o?void 0:o.presence)?(0,E.jsx)(j.default,{contact:t,presence:o.presence,chatstate:o.presence.chatstate,location:"info"}):null;return(0,E.jsxs)(c.default,{theme:"padding-large",children:[(0,E.jsx)("div",{className:(0,l.default)(T),children:(0,E.jsx)(d.DetailImage,{id:t.id,size:d.DETAIL_IMAGE_SIZE.LARGE,loader:!0,onLoad:n,onClick:a,quality:d.DETAIL_IMAGE_QUALITY.HIGH})}),(0,E.jsx)(v.TextHeader,{level:"2",theme:"large",children:(0,E.jsx)(m.Name,{contact:t,selectable:!0,showBusinessCheckmark:t.showBusinessCheckmarkAsPrimary})}),i,(0,E.jsxs)("div",{className:(0,l.default)(k),children:[(0,E.jsx)(v.TextSpan,{theme:"muted",children:s}),(0,E.jsx)(v.TextSpan,{theme:"muted",children:f})]}),(0,E.jsx)(p.default,{labels:t.labels})]})}const w={avatar:{display:"p357zi0d",justifyContent:"ac2vgrno",marginBottom:"pz0xruzv"},secondaryWrapper:{lineHeight:"a4ywakfo",marginTop:"qt60bha0"},contactName:{textAlign:"qfejxiq4"}};function P(e){let t,{contact:n,onDetailImageLoad:a,onDetailImageClick:i}=e;if(n.isMyContact)t=(0,S.default)(n.id);else{const e=n.notifyName;null!=e&&(t=`~${e}`)}return(0,E.jsxs)(c.default,{theme:"padding-large",children:[(0,E.jsx)("div",{className:(0,l.default)(w.avatar),children:(0,E.jsx)(d.DetailImage,{id:n.id,size:d.DETAIL_IMAGE_SIZE.LARGE,loader:!0,onLoad:a,onClick:i,quality:d.DETAIL_IMAGE_QUALITY.HIGH})}),(0,E.jsxs)(f.FlexColumn,{align:"center",children:[(0,E.jsx)(v.TextHeader,{level:"2",size:"24",xstyle:w.contactName,children:(0,E.jsx)(m.Name,{contact:n,selectable:!0,breakWord:!0})}),null!=t&&(0,E.jsx)("div",{className:(0,l.default)(w.secondaryWrapper),children:(0,E.jsx)(g.SelectableSpan,{dir:"auto",selectable:!0,children:(0,E.jsx)(v.TextSpan,{size:"16",color:"secondary",children:t})})})]}),(0,E.jsx)(N,{contact:n}),(0,E.jsx)(p.default,{labels:n.labels})]})}const A={container:{marginTop:"a4rz4n5c",marginBottom:"inww9tbj"},button:{marginStart:"nzcjdldu",marginEnd:"gqi0zhd6"}};function N(e){let{contact:t}=e;const n=(0,b.default)((0,x.unproxy)(t));return n.isVideoCallEnabled||n.isVoiceCallEnabled?(0,E.jsxs)(f.FlexRow,{justify:"center",xstyle:A.container,children:[(0,E.jsx)(o.default,{icon:"voice-call-filled",iconWidth:19,label:s.fbt._("Audio",null,{hk:"1b375N"}),a8nText:"contact-action voice-call-button",xstyle:A.button,theme:"new-chat-info",disabled:!n.canStartVoiceCall,onClick:n.startVoiceCall}),(0,E.jsx)(o.default,{icon:"chat-info-video",label:s.fbt._("Video",null,{hk:"3zMUsJ"}),a8nText:"contact-action video-call-button",xstyle:A.button,theme:"new-chat-info",disabled:!n.canStartVideoCall,onClick:n.startVideoCall})]}):null}},31808:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{numMore:t,newChatInfo:n,viewAll:a,onClick:h}=e;if(!n){const e=(0,u.jsx)(r.default,{theme:"transparent",children:(0,u.jsx)(d.default,{name:"down"})});return(0,u.jsx)(s.default,{image:e,theme:"new-chat-info",primary:o.default.t(522,{count:t,_plural:t}),onClick:h})}const p=(0,u.jsx)(l.FlexRow,{align:"center",justify:"center",xstyle:f.iconWrapper,children:a?null:(0,u.jsx)(r.default,{theme:"transparent",children:(0,u.jsx)(d.default,{name:"down",color:"secondary"})})});let m=o.default.t(522,{count:t,_plural:t});a&&(m=o.default.t(521,{more:m}));return(0,u.jsxs)(c.default,{xstyle:f.container,onClick:h,children:[p,(0,u.jsx)("div",{className:(0,i.default)(f.text,a&&f.textAlt),children:m})]})};var i=a(n(56720)),s=a(n(44356)),l=n(29623),o=a(n(43725)),r=a(n(52711)),d=a(n(23217)),c=a(n(1784)),u=n(85893);const f={container:{height:"q1n4p668",width:"ln8gz9je",paddingStart:"ddw6s8x9",display:"p357zi0d",alignItems:"gndfcl4n",color:"pm5hny62",":hover":{backgroundColor:"os03hap6"}},iconWrapper:{width:"fujhy7ri"},text:{flexGrow:"ggj6brxn",textAlign:"ljrqcn24"},textAlt:{color:"dmdq60dq"}}},60236:(e,t,n)=>{"use strict";var a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,T.useModelValues)(e.chat,["groupMetadata"]),n=(0,T.useModelValues)((0,l.default)(t.groupMetadata,"chat.groupMetadata"),["desc","owner","creation","restrict","participants"]),[a,i]=(0,r.useState)(n.desc),[w,P]=(0,r.useState)(!1),[A,N]=(0,r.useState)(e.showFullDescription||!(a&&a.length>30)),D=(0,k.default)(),O=(0,y.default)();if((0,E.useListener)(n,"change:desc",(()=>{i(n.desc)})),!(g.GK.supportsFeature(g.GK.F.GROUPS_V_3)&&_.ServerProps.groupDescLength>0))return null;const R={textLimit:A?1/0:p.default.GROUP_DESCRIPTION_INFO_PANEL_TRUNC_LENGTH,readMoreText:o.fbt._("Read more",null,{hk:"2DvSvh"}),onReadMore:()=>{N(!0)},formatters:t.isTrusted()?x.Configuration.TrustedGroupDesc({links:C.findLinks(a)}):x.Configuration.UntrustedGroupDesc()},L=D?[S.TextInputCustomStyleThemes.groupInfoName,S.TextInputCustomStyleThemes.newChatInfoDefaultText]:[S.TextInputCustomStyleThemes.groupInfoName];let G=(0,M.jsx)("div",{className:(0,d.default)(I.inputWrapper),children:(0,M.jsx)(S.TextInput,{a8n:"group-info-drawer-description-title-input",value:a,emptyValuePlaceholder:o.fbt._("Add group description",null,{hk:"BVsoQ"}),renderEmojiTextInLockMode:R,editable:n.canSetDescription(),pending:w,showRemaining:!0,maxLength:_.ServerProps.groupDescLength,onChange:e=>{i(e)},onSave:()=>{if(!n.canSetDescription())return;let e=a||"";const l=e.match(/\r\n/gm)?"\r\n":"\n",o=new RegExp(`^(${l}{2,})([^\n])`,"gm");e=e.replace(o,`${l}$2`);const r=(0,m.default)(e||"");if(r===n.desc)return i(r);P(!0),(0,v.default)((0,b.setGroupDesc)(t,r),O).catch((0,s.catchAbort)((()=>{}))).catch((()=>{__LOG__(3)`group_info_drawer:onSetDescription failed`})).finally((()=>{i(n.desc),P(!1)}))},onCancel:()=>{i(n.desc)},multiline:!0,editRestrictionInfo:n.restrict?()=>{f.Cmd.openModal((0,M.jsx)(h.default,{onOK:()=>f.Cmd.closeModal(),okText:o.fbt._("OK",null,{hk:"2KEeHb"}),children:o.fbt._("Only admins can edit this group's info",null,{hk:"1a2ztg"})}))}:void 0,supportsEmoji:!0,lockable:!0,lowProfile:!0,customStyleThemes:L,theme:"small",showEditOnHover:D,constrainedWidth:!0})});D&&!a&&n.restrict&&(G=null);if(D){var B;let e;const t=n.owner&&(null===(B=n.participants.get(n.owner))||void 0===B?void 0:B.contact);return t&&(e=(0,M.jsx)(j.TextDiv,{theme:"muted",children:u.Clock.createdByStr(n.creation,t.formattedName,t.isMe)})),G||e?(0,M.jsxs)(c.ChatInfoDrawerSection,{xstyle:I.chatInfoSection,newChatInfo:!0,children:[G,e]}):null}return(0,M.jsx)(c.ChatInfoDrawerSection,{newChatInfo:!1,theme:"group-desc-padding",title:o.fbt._("Description",null,{hk:"4umvEX"}),children:G})};var s=n(89385),l=i(n(45095)),o=n(48360),r=n(67294),d=i(n(56720)),c=n(98792),u=n(22683),f=n(88102),h=i(n(52665)),p=i(n(69618)),m=i(n(66797)),g=n(7293),x=n(5124),C=a(n(86688)),v=i(n(84644)),_=n(64551),b=n(66155),j=n(13923),S=n(90011),E=n(19529),T=n(49082),k=i(n(56811)),y=i(n(38080)),M=n(85893);const I={chatInfoSection:{paddingTop:"nlnf8xo7",paddingBottom:"r219jyu0"},inputWrapper:{whiteSpace:"bbv8nyr4"}}},48204:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onVerification:t,onClose:n}=e,a=(0,Z.default)(),te=(0,W.default)(),ne=(0,Y.default)(),ae=(0,X.useNewChatInfoColors)(),ie=ne?ae:null,se=(0,z.useModelValues)(e.chat,["mute","id","pendingAction","liveLocation"]),le=(0,z.useModelValues)(e.groupMetadata,["id","cachedDeviceSizeBucket","participants","pendingParticipants","announce","support"]);(0,z.useModelValues)(e.contact,["name","id","pendingAction"]);const oe=(0,K.default)((()=>new b.default)),re=(0,K.default)((()=>new b.default)),de=(0,K.default)((()=>new b.default)),ce=(0,K.default)((()=>new N.default.UiAction({uiActionType:N.default.UI_ACTION_TYPE.GROUP_INFO_OPEN,uiActionPreloaded:!0}))),ue=(0,l.useRef)(null);(0,q.useListener)(le.participants,["add","remove","reset","sort","change:isAdmin","change:isSuperAdmin"],te),(0,q.useListener)(le.pendingParticipants,["add","remove","reset"],te);const fe=e=>{e.contact.pendingAction++,(0,D.demoteParticipants)(se,[e]).then((()=>{e.contact.pendingAction--}))},he=(e,t)=>{e.contact.pendingAction++,(0,D.removeParticipants)(se,[e]).then((()=>{e.contact.pendingAction--})),t&&h.Cmd.closeModal()},pe=(e,t)=>{e.contact.pendingAction++,(0,D.promoteParticipants)(se,[e]).then((()=>{e.contact.pendingAction--})),t&&h.Cmd.closeModal()},me=()=>{if(le.participants.length>=R.ServerProps.maxParticipants){const e=P.default.t(59,{max:R.ServerProps.maxParticipants});h.Cmd.openToast((0,Q.jsx)(H.Toast,{msg:e,id:ee}))}else{const e=j.GK.supportsFeature(j.GK.F.GROUPS_V_3)?(0,Q.jsx)(d.default,{chat:(0,G.unproxy)(se),pushTransition:"none",popTransition:"none"}):(0,Q.jsx)(r.default,{chat:(0,G.unproxy)(se),pushTransition:"none",popTransition:"none"});h.Cmd.openModal(e,{transition:"modal-flow"})}},ge=()=>{h.Cmd.openModal((0,Q.jsx)(C.default,{chatId:se.id,e2eSubtype:"info_encrypted"}))},xe=()=>{h.Cmd.openModal((0,Q.jsx)(C.default,{chat:se,chatId:se.id,e2eSubtype:"info_encrypted"}))};let Ce;if((0,l.useEffect)((()=>{const e=ce.current;if(e){const t=le.cachedDeviceSizeBucket;null!=t&&(e.sizeBucket=t),e.markUiActionT(),e.commit(),ce.current=void 0}se.isSuspendedGroup()&&F.default.openModal()}),[]),(0,l.useEffect)((()=>{le.participants.ensureSorted();le.pendingParticipants.ensureSorted()})),le.participants.iAmAdmin()&&j.GK.supportsFeature(j.GK.F.GROUPS_V_3)&&!le.support)if(ne){const t=(0,Q.jsx)(U.TextSpan,{theme:"title",children:s.fbt._("Group settings",null,{hk:"3sS0Vl"})});Ce=(0,Q.jsx)(c.default,{side:"chevron",icon:"settings",onClick:e.onAdminSetting,title:t})}else{const t=(0,Q.jsx)(V.default,{xstyle:J.chevron,name:"chevron-right-alt",directional:!0});Ce=(0,Q.jsx)(m.default,{onClick:e.onAdminSetting,side:t,children:(0,Q.jsx)(U.TextSpan,{theme:"title",children:s.fbt._("Group settings",null,{hk:"3sS0Vl"})})})}let ve=null;e.onMediaGallery&&(ve=(0,Q.jsx)(f.default,{onMediaGallery:e.onMediaGallery,chat:(0,G.unproxy)(se)}));let _e=null;j.GK.supportsFeature(j.GK.F.LIVE_LOCATIONS)&&(_e=(0,Q.jsx)(A.default,{chat:se,onClick:e.onLiveLocation}));const be=se&&se.shouldShowEphemeralSetting()?(0,Q.jsx)(_.EphemeralSettingRow,{onClick:e.onEphemeral,chat:se,groupMetadata:le,theme:ne?"new-chat-info":null}):null;let je=null;j.GK.supportsFeature(j.GK.F.MD_BACKEND)&&(je=(0,Q.jsx)(v.default,{onClick:ge,theme:ne?"new-chat-info":null,text:$.default.isGroupCallEnabled()?s.fbt._("Messages and calls are end-to-end encrypted. Click to learn more.",null,{hk:"1l9pwW"}):s.fbt._("Messages are end-to-end encrypted. Click to learn more.",null,{hk:"2MtPh9"})}));se.isSupportGroup()&&(je=(0,Q.jsx)(B.default,{onClick:xe,theme:ne?"new-chat-info":null}));const Se=se.mute.canMute()?(0,Q.jsx)(O.default,{chat:se,mute:se.mute,settings:L.default,theme:ne?"new-chat-info":null}):null;let Ee=null,Te=null;if(e.onStarred)if(ne){const t=(0,Q.jsx)(U.TextSpan,{theme:"title",size:"16",children:s.fbt._("Starred messages",null,{hk:"4wVbNG"})});Te=(0,Q.jsx)(u.ChatInfoDrawerSection,{a8nText:"section-starred-messages",newChatInfo:!0,children:(0,Q.jsx)(c.default,{a8nText:"block-starred-messages",side:"chevron",icon:"star",onClick:e.onStarred,title:t})})}else{const t=(0,Q.jsx)(V.default,{xstyle:J.chevron,name:"chevron-right-alt",directional:!0});Ee=(0,Q.jsx)(m.default,{side:t,onClick:e.onStarred,children:(0,Q.jsx)(U.TextSpan,{theme:"title",children:s.fbt._("Starred messages",null,{hk:"4wVbNG"})})})}let ke=null;(Se||Ee||je||be)&&(ke=(0,Q.jsxs)(u.ChatInfoDrawerSection,{newChatInfo:ne,children:[Se,Ee,be,je,Ce]}));const ye=j.GK.supportsFeature(j.GK.F.MD_BACKEND)&&e.scrollToParticipantList;return(0,Q.jsxs)(p.default,{theme:"striped",style:ie,children:[(0,Q.jsx)(x.DrawerHeader,{title:s.fbt._("Group info",null,{hk:"2SfTUZ"}),type:x.DRAWER_HEADER_TYPE.SMALL,onCancel:()=>{n?n():null==a||a.uie.requestDismiss()}}),(0,Q.jsx)(g.default,{flatListControllers:[re.current,oe.current],children:(0,Q.jsxs)("section",{className:(0,o.default)(J.body),"data-a8n":i.default.key("group-info-drawer-body"),children:[(0,Q.jsx)(I.default,{chat:(0,G.unproxy)(se),onAdminSetting:e.onAdminSetting,onAddParticipant:me,onClickParticpantsCount:()=>{var e;null===(e=ue.current)||void 0===e||e.scrollIntoView()}}),(0,Q.jsx)(E.default,{chat:(0,G.unproxy)(se),showFullDescription:e.showFullGroupDescription}),_e,ve,Te,ke,undefined,(0,S.communitiesEnabled)()?(0,Q.jsx)(M.default,{flatListController:de.current}):null,(0,Q.jsx)(k.GroupInfoParticipantsSection,{ref:ue,chat:(0,G.unproxy)(se),scrollToParticipantList:ye,flatListController:oe.current,onAddParticipant:me,onOpenParticpantSearch:()=>{h.Cmd.openModal((0,Q.jsx)(w.default,{chat:(0,G.unproxy)(se),onParticipantPromote:pe,onParticipantRemove:he,onDemoteAdmin:fe,onVerification:t}),{transition:"modal-flow"})},onGroupInviteLink:e.onGroupInviteLink,onVerification:e.onVerification}),(0,Q.jsx)(y.default,{chat:(0,G.unproxy)(se),flatListController:re.current}),(0,Q.jsx)(T.default,{chat:(0,G.unproxy)(se)})]})})]},"contact-info-modal")};var i=a(n(99964)),s=n(48360),l=n(67294),o=a(n(56720)),r=a(n(37946)),d=a(n(16947)),c=a(n(75116)),u=n(98792),f=a(n(5406)),h=n(88102),p=a(n(60453)),m=a(n(35721)),g=a(n(69637)),x=n(94790),C=a(n(4061)),v=a(n(4584)),_=n(61086),b=a(n(30855)),j=n(7293),S=n(57701),E=a(n(60236)),T=a(n(12158)),k=n(44783),y=a(n(70354)),M=a(n(41487)),I=a(n(60890)),w=a(n(20982)),P=a(n(43725)),A=a(n(43895)),N=a(n(11339)),D=n(89389),O=a(n(3721)),R=n(64551),L=a(n(68132)),G=n(31019),B=a(n(34778)),F=a(n(43745)),V=a(n(23217)),U=n(13923),H=n(50452),W=a(n(59909)),K=a(n(59552)),q=n(19529),z=n(49082),Y=a(n(56811)),X=n(67761),Z=a(n(59147)),$=a(n(69594)),Q=n(85893);const J={body:{flexShrink:"oq44ahr5",flexGrow:"tvf2evcx",flexBasis:"lb5m6g5c",paddingBottom:"s9fl9ege"},chevron:{color:"cs9t9or5"}},ee=(0,H.genId)("max_participant_toast")},12158:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{chat:t}=e;const n=(0,h.default)(),a=(0,p.jsx)(g,{chat:t,showNewChatInfo:n}),i=(0,p.jsx)(m,{chat:t,showNewChatInfo:n});return n?(0,p.jsxs)(s.ChatInfoDrawerButtonsSection,{newChatInfo:!0,children:[a,i]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(s.ChatInfoDrawerButtonsSection,{newChatInfo:!1,children:a}),(0,p.jsx)(s.ChatInfoDrawerButtonsSection,{newChatInfo:!1,children:i})]})};var i=n(48360),s=n(98792),l=n(88102),o=a(n(64738)),r=a(n(43725)),d=a(n(30934)),c=n(19569),u=n(38839),f=a(n(23217)),h=a(n(56811)),p=n(85893);function m(e){let{chat:t,showNewChatInfo:n}=e;return(0,p.jsx)(o.default,{a8nText:"li-report-spam",color:"danger",icon:(0,p.jsx)(f.default,{name:"thumbs-down",directional:!0}),theme:n?"new-chat-info":null,onClick:()=>{l.Cmd.openModal((0,p.jsx)(d.default,{isGroupChat:!0,onReport:()=>{(0,c.sendSpamReport)(t,u.SpamFlow.Group),l.Cmd.closeModal()},onReportExitClear:()=>{(0,c.sendSpamExitClear)(t,u.SpamFlow.Block),l.Cmd.closeModal()},onCancel:()=>l.Cmd.closeModal()}))},children:i.fbt._("Report group",null,{hk:"23NLqw"})})}function g(e){let{chat:t,showNewChatInfo:n}=e;return(0,p.jsx)(o.default,{a8nText:"li-delete-group",icon:(0,p.jsx)(f.default,{name:"exit",directional:!0}),color:"danger",theme:n?"new-chat-info":null,onClick:()=>{l.Cmd.deleteOrExitChat(t)},children:t.isReadOnly?r.default.t(896):i.fbt._("Exit group",null,{hk:"4BkPNr"})})}},44783:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.GroupInfoParticipantsSection=void 0;var i=a(n(45095)),s=n(48360),l=n(67294),o=a(n(56720)),r=a(n(44356)),d=n(98792),c=n(88102),u=a(n(52665)),f=a(n(69618)),h=n(32303),p=n(71174),m=n(65417),g=a(n(31808)),x=n(50101),C=n(47915),v=n(99234),_=n(7293),b=a(n(43725)),j=n(89389),S=a(n(16419)),E=a(n(52711)),T=a(n(23217)),k=n(18644),y=a(n(24717)),M=a(n(59909)),I=n(19529),w=n(49082),P=a(n(56811)),A=a(n(39546)),N=n(85893);const D={iconSearch:{color:"s4k44ver"}},O=(0,l.forwardRef)(((e,t)=>{var n;const a=(0,P.default)(),O=(0,w.useModelValues)((0,i.default)(e.chat.groupMetadata,"props.chat.groupMetadata"),["support"]),L=(0,i.default)(null===(n=e.chat.groupMetadata)||void 0===n?void 0:n.participants,"props.chat.groupMetadata?.participants"),G=(0,M.default)();(0,I.useListener)(L,"add remove reset sort change:isAdmin change:isSuperAdmin",G);const[B,F]=(0,l.useState)(R(L)),V=(0,l.useRef)(),[U,H]=(0,l.useState)();(0,l.useEffect)((()=>{_.GK.supportsFeature(_.GK.F.MD_BACKEND)&&e.scrollToParticipantList&&V.current&&(0,h.scrollIntoViewIfNeeded)(V.current,!1)}),[e.scrollToParticipantList]),(0,l.useImperativeHandle)(t,(()=>({scrollIntoView(){var e;null===(e=V.current)||void 0===e||e.scrollIntoView()}})));const W=a?"secondary":null,K=a?"new-chat-info":"drawer-list",q=a?"compact":void 0,z=(0,N.jsx)(T.default,{name:"search",className:(0,o.default)(!a&&D.iconSearch),color:W});let Y,X,Z;if(L.canAdd()&&!O.support){const t=(0,N.jsx)(E.default,{theme:q,children:(0,N.jsx)(T.default,{name:"add-user",directional:!0})});Y=(0,N.jsx)(r.default,{image:t,theme:K,primary:s.fbt._("Add participant",null,{hk:"48ECfz"}),onClick:e.onAddParticipant})}if(L.iAmAdmin()&&e.onGroupInviteLink&&!O.support){const t=(0,N.jsx)(E.default,{theme:q,children:(0,N.jsx)(T.default,{name:"link"})});X=(0,N.jsx)(r.default,{image:t,theme:K,primary:s.fbt._("Invite to group via link",null,{hk:"3vDtFL"}),onClick:e.onGroupInviteLink})}if(R(L)&&B){const t=!a||L.length<=20,n=L.length-f.default.INFO_DRAWER_MAX_ROWS;Z=(0,N.jsx)(g.default,{numMore:n,newChatInfo:a,onClick:()=>{t?F(!1):e.onOpenParticpantSearch()},viewAll:!t})}const $=e=>{const t=L.get(e.id);return!!t&&(L.canPromote(t)||L.canDemote(t)||L.canRemove(t)||L.canVerifyIdentity(t))},Q=(t,n)=>{const a=L.assertGet(n.id);if(!$(n))return;const i=[];L.canPromote(a)&&i.push((0,N.jsx)(p.DropdownItem,{a8n:"mi-grp-promote-admin",action:()=>{const t=b.default.t(361,{participant:a.contact.formattedName,subject:e.chat.contact.name});c.Cmd.openModal((0,N.jsx)(u.default,{onOK:()=>{return t=!0,a.contact.pendingAction++,(0,j.promoteParticipants)(e.chat,[a]).then((()=>{a.contact.pendingAction--})),void(t&&c.Cmd.closeModal());var t},okText:b.default.t(619),onCancel:()=>c.Cmd.closeModal(),cancelText:s.fbt._("Cancel",null,{hk:"H0gNq"}),children:(0,N.jsx)(m.EmojiText,{text:t})}))},children:b.default.t(619)},"promote")),L.canRemove(a)&&i.push((0,N.jsx)(p.DropdownItem,{a8n:"mi-grp-remove-participant",action:()=>{const t=b.default.t(362,{participant:a.contact.formattedName,subject:e.chat.contact.name});c.Cmd.openModal((0,N.jsx)(u.default,{onOK:()=>{return t=!0,a.contact.pendingAction++,(0,j.removeParticipants)(e.chat,[a]).then((()=>{a.contact.pendingAction--})),void(t&&c.Cmd.closeModal());var t},okText:b.default.t(733),onCancel:()=>c.Cmd.closeModal(),cancelText:s.fbt._("Cancel",null,{hk:"H0gNq"}),children:(0,N.jsx)(m.EmojiText,{text:t})}))},children:b.default.t(623)},"remove")),_.GK.supportsFeature(_.GK.F.GROUPS_V_3)&&L.canDemote(a)&&i.push((0,N.jsx)(p.DropdownItem,{a8n:"mi-grp-verify-identify",action:()=>{a.contact.pendingAction++,(0,j.demoteParticipants)(e.chat,[a]).then((()=>{a.contact.pendingAction--})),c.Cmd.closeModal()},children:s.fbt._("Dismiss as admin",null,{hk:"243sNl"})},"demote-admin")),_.GK.supportsFeature(_.GK.F.MD_BACKEND)&&L.canVerifyIdentity(a)&&i.push((0,N.jsx)(p.DropdownItem,{a8n:"mi-grp-verify-identify",action:()=>{e.onVerification&&e.onVerification(a.contact)},children:s.fbt._("Verify Security Code",null,{hk:"1vTVgt"})},"verify-identity")),H({contactId:n.id,menu:i,anchor:t.anchor,event:t.event})},J=(e,t)=>{A.default.equals((0,v.getMaybeMeUser)(),t.id)||(0,x.findChat)(t.id).then((e=>{c.Cmd.openChatFromUnread(e).then((t=>{t&&c.Cmd.focusChatTextInput(e)}))}))},ee=L.length?(0,N.jsxs)(d.ChatInfoDrawerListSection,{newChatInfo:a,onRef:e=>{V.current=e},a8nText:"section-participants",title:b.default.t(971,{count:L.length,_plural:L.length}),titleOnClick:_.GK.supportsFeature(_.GK.F.GROUPS_V_3)?e.onOpenParticpantSearch:void 0,subtitle:_.GK.supportsFeature(_.GK.F.GROUPS_V_3)?z:void 0,children:[Y,X,(0,N.jsx)(C.FlatList,{flatListController:e.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:(()=>{let e;const t=[],n=[];L.forEach((a=>{a.contact.isMe?e=a:a.isAdmin?t.push(a):n.push(a)}));let a=[];return e&&a.push(e),a=a.concat(t,n),R(L)&&B&&(a=a.slice(0,f.default.INFO_DRAWER_MAX_ROWS)),a.map((e=>({itemKey:e.id.toString(),id:e.id,height:68})))})(),renderItem:e=>{const{id:t}=e,n=L.get(t);if(!n)throw new C.UnknownDataError(e);const i=n.contact,s=!!U&&A.default.equals(i.id,U.contactId);return(0,N.jsx)(S.default,{contact:i,participant:n,onClick:J,contextEnabled:()=>$(i),contextMenu:s,onContext:e=>Q(e,i),theme:a?"new-chat-info":null,showNotifyName:!0,waitIdle:!0},n.id.toString())}}),Z]}):null,te=()=>{H(null)};let ne;return U&&(ne=(0,N.jsx)(k.UIE,{displayName:"ChatContextMenu",escapable:!0,popable:!0,requestDismiss:te,children:(0,N.jsx)(y.default,{contextMenu:U})})),(0,N.jsxs)(N.Fragment,{children:[ee,ne]})}));function R(e){return e.length>f.default.INFO_DRAWER_MAX_ROWS_IN_COLLAPSED_LIST}t.GroupInfoParticipantsSection=O,O.displayName="GroupInfoParticipantsSection"},70354:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n;const a=(0,S.default)(),k=(0,i.default)(e.chat.groupMetadata,"props.chat.groupMetadata"),y=(0,i.default)(null===(t=e.chat.groupMetadata)||void 0===t?void 0:t.participants,"props.chat.groupMetadata?.participants"),M=(0,i.default)(null===(n=e.chat.groupMetadata)||void 0===n?void 0:n.pendingParticipants,"props.chat.groupMetadata?.pendingParticipants"),I=(0,b.default)();(0,j.useListener)(y,"change:isAdmin change:isSuperAdmin",I),(0,j.useListener)(M,"add remove reset",I);const[w,P]=(0,l.useState)(T(M)),[A,N]=(0,l.useState)();(0,l.useEffect)((()=>{m.GK.supportsFeature(m.GK.F.GROUPS_V_4_JOIN_PERMISSION)&&k.queryGroupV4PendingInvite().then((()=>{P(T(k.pendingParticipants))}))}),[k]);const D=()=>{let e=M.toArray();return T(M)&&w&&(e=e.slice(0,c.default.INFO_DRAWER_MAX_ROWS)),e.map((e=>({itemKey:e.id.toString(),id:e.id,height:68})))},O=e=>{const{id:t}=e,n=M.get(t);if(!n)throw new p.UnknownDataError(e);const i=n.contact;return(0,E.jsx)(x.default,{contact:i,participant:n,contextEnabled:()=>!0,contextMenu:!0,onContext:e=>(e=>{const t=[(0,E.jsx)(u.DropdownItem,{a8n:"mi-grp-promote-admin",action:()=>{r.Cmd.openModal((0,E.jsx)(d.default,{onOK:()=>{r.Cmd.closeModal(),k.revokeGroupV4AddInvite([n.id.toString()]).then((()=>{r.Cmd.openToast((0,E.jsx)(C.Toast,{msg:s.fbt._("Invite reset",null,{hk:"MgErr"}),id:(0,C.genId)()}))}))},okText:s.fbt._("Reset link",null,{hk:"2Zb3R4"}),onCancel:()=>r.Cmd.closeModal(),cancelText:s.fbt._("Cancel",null,{hk:"H0gNq"}),children:(0,E.jsx)(f.EmojiText,{text:g.default.t(526,{participant:n.contact.formattedName})})}))},children:s.fbt._("Revoke invite",null,{hk:"4on28q"})},"promote")];N({contactId:i.id,menu:t,anchor:e.anchor,event:e.event})})(e),theme:a?"new-chat-info":null,showNotifyName:!0,isPendingParticipant:!0,waitIdle:!0},n.id.toString())};let R,L,G;M.length>0&&(R=(0,E.jsx)(p.FlatList,{flatListController:e.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:D(),renderItem:O}));if(T(M)&&w){const e=M.length-c.default.INFO_DRAWER_MAX_ROWS;L=(0,E.jsx)(h.default,{numMore:e,newChatInfo:a,onClick:()=>{P(!1)}})}y.iAmAdmin()&&M.length>0&&(G=(0,E.jsxs)(o.ChatInfoDrawerListSection,{newChatInfo:a,a8nText:"section-participants",title:g.default.t(524,{number:M.length}),children:[R,L]}));const B=()=>{N(null)};let F;A&&(F=(0,E.jsx)(v.UIE,{displayName:"ChatContextMenu",escapable:!0,popable:!0,requestDismiss:B,children:(0,E.jsx)(_.default,{contextMenu:A})}));return(0,E.jsxs)(E.Fragment,{children:[G,F]})};var i=a(n(45095)),s=n(48360),l=n(67294),o=n(98792),r=n(88102),d=a(n(52665)),c=a(n(69618)),u=n(71174),f=n(65417),h=a(n(31808)),p=n(47915),m=n(7293),g=a(n(43725)),x=a(n(16419)),C=n(50452),v=n(18644),_=a(n(24717)),b=a(n(59909)),j=n(19529),S=a(n(56811)),E=n(85893);function T(e){return e.length>c.default.INFO_DRAWER_MAX_ROWS_IN_COLLAPSED_LIST}},41487:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,p.default)(),n=e=>{(0,c.findChat)(e).then((e=>{o.Cmd.openChatFromUnread(e).then((t=>{t&&o.Cmd.focusChatTextInput(e)}))}))},a=e=>{n(e.id),o.Cmd.closeModal()};return x.length>0?(0,g.jsx)(l.ChatInfoDrawerListSection,{newChatInfo:t,title:"[INTERNAL ONLY] - Related groups",children:(0,g.jsx)(u.FlatList,{flatListController:e.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:x.map((e=>({itemKey:e.id.toString(),id:e.id,subject:e.desc,participants:e.participants}))),renderItem:e=>{var l;if(!e)throw new u.UnknownDataError(e);const c=null!==(l=e.participants.length)&&void 0!==l?l:0;return(0,g.jsx)(h.HotKeys,{children:(0,g.jsx)(s.default,{onClick:()=>(e=>{if((e=>e.participants.iAmMember())(e))n(e.id);else{const t=e.participants.getAdmins();if(1===t.length)return void n(t[0].id);o.Cmd.openModal((0,g.jsx)(r.default,{title:i.fbt._("Message Admin",null,{hk:"3eI9yU"}),filter:e=>t.includes(e.id),onCancel:()=>o.Cmd.closeModal(),onSelect:a}))}})(e),theme:t?"new-chat-info":null,primary:e.subject,secondary:i.fbt._({"*":"{count} participants",_1:"1 participant"},[i.fbt._plural(c,"count")],{hk:"3P3iII"}),contextEnabled:()=>!1,image:(0,g.jsx)(d.DetailImage,{id:e.id,size:40})})})}})}):null};var i=n(48360),s=a(n(49107)),l=n(98792),o=n(88102),r=a(n(29234)),d=n(88984),c=n(50101),u=n(47915),f=a(n(14423)),h=n(55414),p=a(n(56811)),m=n(58021),g=n(85893);const x=[new f.default({id:(0,m.createWid)("19085551011-1630632713@g.us"),desc:"linked_group_3_1",subjectTime:1630632713,participants:[{id:(0,m.createWid)("19085551012-1631040278@g.us"),isAdmin:!0},{id:(0,m.createWid)("19185551012-1631040278@g.us")},{id:(0,m.createWid)("19285551012-1631040278@g.us")}]}),new f.default({id:(0,m.createWid)("19085551012-1631040278@g.us"),desc:"linked_group_3_5",subjectTime:1631040278}),new f.default({id:(0,m.createWid)("19085551014-1630632782@g.us"),desc:"linked_group_3_2",subjectTime:1630632782}),new f.default({id:(0,m.createWid)("19085551015-1630632817@g.us"),desc:"linked_group_3_3",subjectTime:1630632817}),new f.default({id:(0,m.createWid)("19085551029-1630632871@g.us"),desc:"linked_group_3_4",subjectTime:1630632871,participants:[{id:(0,m.createWid)("19085551024@c.us"),isAdmin:!0},{id:(0,m.createWid)("19185551012-1631040278@g.us")},{id:(0,m.createWid)("19285551012-1631040278@g.us")}]})]},60890:(e,t,n)=>{"use strict";var a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,L.default)()?(0,B.jsx)(H,(0,l.default)({},e)):(0,B.jsx)(V,(0,l.default)({},e))};var s=i(n(48926)),l=i(n(81109)),o=n(89385),r=n(50796),d=i(n(45095)),c=i(n(99964)),u=n(48360),f=n(67294),h=i(n(56720)),p=n(22683),m=n(88102),g=i(n(52665)),x=i(n(33308)),C=i(n(66797)),v=a(n(64103)),_=n(29623),b=i(n(77577)),j=i(n(43725)),S=n(12176),E=n(33646),T=i(n(43556)),k=n(3764),y=i(n(84644)),M=n(52596),I=n(64551),w=n(50760),P=n(13923),A=n(90011),N=i(n(1784)),D=i(n(59909)),O=n(19529),R=n(49082),L=i(n(56811)),G=i(n(38080)),B=n(85893);const F={nameSecondary:{minHeight:"g4oj0cdv",marginTop:"sy4xt5vv"},photo:{marginBottom:"njub1g37"}};function V(e){const t=(0,R.useModelValues)(e.chat,["labels"]),n=(0,R.useModelValues)((0,d.default)(e.chat.groupMetadata,"props.chat.groupMetadata"),["creation"]);let a=null;return n.creation&&(a=(0,B.jsx)("div",{"data-a8n":c.default.key("group-created-time"),className:(0,h.default)(F.nameSecondary),children:(0,B.jsx)(P.TextSpan,{theme:"muted",children:p.Clock.createdStr(n.creation,t.isSupportGroup())})})),(0,B.jsxs)(x.default,{theme:"padding-large",children:[(0,B.jsx)(W,{chat:e.chat,xstyle:F.photo}),(0,B.jsx)(q,{chat:e.chat}),a,(0,B.jsx)(b.default,{labels:t.labels})]})}const U={lineHeight:"a4ywakfo",marginTop:"ma4rpf0l"};function H(e){var t,n;const a=(0,R.useModelValues)(e.chat,["labels"]),i=null===(t=e.chat.groupMetadata)||void 0===t?void 0:t.participants,s=(0,D.default)();(0,O.useListener)(i,"add remove reset sort change:isAdmin change:isSuperAdmin",s);const l=null!==(n=null==i?void 0:i.length)&&void 0!==n?n:0,o=j.default.t(971,{count:l,_plural:l});return(0,B.jsx)(x.default,{theme:"padding-large",children:(0,B.jsxs)(_.FlexColumn,{align:"center",children:[(0,B.jsx)(W,{chat:e.chat,xstyle:F.photo}),(0,B.jsx)(q,{chat:e.chat,newChatInfo:!0}),(0,B.jsx)("div",{className:(0,h.default)(U),children:(0,B.jsx)(M.SelectableSpan,{dir:"auto",selectable:!0,children:(0,B.jsxs)(P.TextSpan,{size:"16",color:"secondary",children:[u.fbt._("Group",null,{hk:"DNiv2"})," · ",(0,B.jsx)(N.default,{onClick:e.onClickParticpantsCount,children:o})]})})}),undefined,(0,B.jsx)(b.default,{labels:a.labels})]})})}function W(e){const t=(0,R.useModelValues)(e.chat,["isReadOnly"]),n=(0,R.useModelValues)(e.chat.contact,["id","profilePicThumb"]),a=(0,R.useModelValues)(e.chat.contact.profilePicThumb,["imgFull"]),[i,s]=(0,f.useState)(!1),[l,d]=(0,f.useState)(!1),c=(0,G.default)(),u=T.default.GROUP,p=t.isReadOnly||!a.canDelete()&&!a.canSet()||t.isSupportGroup();return(0,B.jsx)("div",{className:(0,h.default)(e.xstyle),children:(0,B.jsx)(E.PhotoPickerLoadable,{type:u,id:n.id,attachToChat:!0,pending:l,startImage:a.imgFull,readOnly:p,onImageSet:(e,t)=>{let n;d(!0),n=e&&t?(0,k.setProfilePic)(a,e,t):(0,k.deleteProfilePic)(a),(0,y.default)(n,c).catch((0,o.catchAbort)((()=>{}))).catch((0,r.filteredCatch)(v.ActionError,(()=>{__LOG__(3)`GroupInfoDrawer: failed to set/delete group image`,s(!i)}))).finally((()=>{d(!1)}))}},String(i))})}const K={marginTop:"hymafltn",marginEnd:"jnwc1y2a",marginBottom:"ngycyvoj",marginStart:"svoq16ka"};function q(e){const t=(0,R.useModelValues)(e.chat.contact,["name"]),n=(0,R.useModelValues)((0,d.default)(e.chat.groupMetadata,"props.chat.groupMetadata"),["creation","restrict","support"]),a=(0,G.default)(),i=function(){var n=(0,s.default)((function*(n){const i=(0,C.default)(n);i!==t.name&&(yield(0,y.default)((0,w.setGroupSubject)(e.chat,i),a).catch((0,o.catchAbort)((()=>{}))).catch((()=>{__LOG__(3)`group_info_drawer:onSetSubject failed`})))}));return function(){return n.apply(this,arguments)}}();return n.support?(0,B.jsx)(P.TextHeader,{className:(0,h.default)(K),level:"2",theme:"large",children:(0,B.jsx)(S.GroupName,{chat:e.chat,groupMetadata:n,breakWord:!0})}):(0,B.jsx)(Y,{subject:t.name,onSave:i,newChatInfo:e.newChatInfo,textInputProps:{editable:n.canSetSubject(),editRestrictionInfo:n.restrict?()=>{m.Cmd.openModal((0,B.jsx)(g.default,{onOK:()=>m.Cmd.closeModal(),okText:u.fbt._("OK",null,{hk:"2KEeHb"}),children:u.fbt._("Only admins can edit this group's info",null,{hk:"1a2ztg"})}))}:void 0}})}const z={container:{textAlign:"qfejxiq4",maxWidth:"laorhtua"},editing:{width:"ln8gz9je",textAlign:"ljrqcn24","@media (max-width: 1441px)":{width:"o135me7o"}}};function Y(e){const{newChatInfo:t}=e,[n,a]=(0,f.useState)(null),[i,o]=(0,f.useState)(!1),[r,d]=(0,f.useState)(!1),c=function(){var t=(0,s.default)((function*(){if(d(!1),n&&n!==e.subject){o(!0);try{yield e.onSave(n)}finally{o(!1),a(null)}}else a(null)}));return function(){return t.apply(this,arguments)}}(),p=t?[A.TextInputCustomStyleThemes.groupInfoName,A.TextInputCustomStyleThemes.newChatInfoLargeText]:[A.TextInputCustomStyleThemes.groupInfoName];return(0,B.jsx)("div",{className:(0,h.default)(t&&z.container,t&&r&&z.editing),children:(0,B.jsx)(A.TextInput,(0,l.default)({a8n:"group-info-drawer-subject-input",value:null!=n?n:e.subject,pending:i,showRemaining:!0,validate:e=>!(!e||!e.trim()),maxLength:I.ServerProps.maxSubject,onBeginEdit:()=>{d(!0)},onChange:e=>{r&&a(e)},onSave:c,onError:()=>{m.Cmd.openModal((0,B.jsx)(g.default,{onOK:()=>m.Cmd.closeModal(),okText:u.fbt._("OK",null,{hk:"2KEeHb"}),children:j.default.t(80)}))},onCancel:()=>{d(!1),a(null)},supportsEmoji:!0,lockable:!0,lowProfile:!0,constrainedWidth:!0,theme:"large",customStyleThemes:p,showEditOnHover:t,showHighlightOnHover:t},e.textInputProps))})}},20982:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const{chat:n,onParticipantPromote:a,onParticipantRemove:_,onDemoteAdmin:b,onVerification:j}=e,S=(0,g.default)(),E=null===(t=n.groupMetadata)||void 0===t?void 0:t.participants;(0,x.useListener)(E,"add remove reset",(()=>{null!=E&&S()}));const[T,k]=(0,l.useState)(null),y=()=>{k(null)},M=e=>{(0,c.findChat)(e).then((e=>{o.Cmd.closeModal(),o.Cmd.openChatFromUnread(e)}))};let I;T&&(I=(0,v.jsx)(p.UIE,{displayName:"ChatContextMenu",escapable:!0,popable:!0,requestDismiss:y,children:(0,v.jsx)(m.default,{contextMenu:T})}));return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(r.default,{title:s.fbt._("Search Participants",null,{hk:"M6lxB"}),filter:e=>{const t=n.groupMetadata;return!(null==t||!t.participants.get(e.id.toString()))},onCancel:()=>{o.Cmd.closeModal()},openContextOnClick:!0,contextEnabled:()=>!1,contextMenu:e=>!C.default.equals((0,u.getMaybeMeUser)(),e),onContext:(e,t)=>{const l=(0,i.default)(n.groupMetadata,"chat.groupMetadata").participants,r=l.assertGet(t.id.toString()),c=[];if(l.canPromote(r)){const e=a.bind(null,r,!1);c.push((0,v.jsx)(d.DropdownItem,{a8n:"mi-grp-promote-admin",action:e,children:h.default.t(619)},"promote"))}if(l.canRemove(r)){const e=_.bind(null,r,!1);c.push((0,v.jsx)(d.DropdownItem,{a8n:"mi-grp-remove-participant",action:e,children:h.default.t(623)},"remove"))}f.GK.supportsFeature(f.GK.F.GROUPS_V_3)&&l.canDemote(r)&&c.push((0,v.jsx)(d.DropdownItem,{a8n:"mi-grp-verify-identify",action:()=>b(r),children:s.fbt._("Dismiss as admin",null,{hk:"243sNl"})},"demote-admin")),f.GK.supportsFeature(f.GK.F.MD_BACKEND)&&l.canVerifyIdentity(r)&&c.push((0,v.jsx)(d.DropdownItem,{a8n:"mi-grp-verify-identify",action:()=>{o.Cmd.closeModal(),null==j||j(r.contact)},children:s.fbt._("Verify Security Code",null,{hk:"1vTVgt"})},"verify-identity")),C.default.equals((0,u.getMaybeMeUser)(),r.id)||c.push((0,v.jsx)(d.DropdownItem,{action:M.bind(null,r.contact.id),children:h.default.t(628,{author:r.contact.formattedName})},"message author")),k({contactId:t.id,menu:c,anchor:e.anchor,event:e.anchor?void 0:e})},showNotifyName:!0,listenForAdminChange:!0,participantCollection:(0,i.default)(e.chat.groupMetadata,"props.chat.groupMetadata").participants}),I]})};var i=a(n(45095)),s=n(48360),l=n(67294),o=n(88102),r=a(n(29234)),d=n(71174),c=n(50101),u=n(99234),f=n(7293),h=a(n(43725)),p=n(18644),m=a(n(24717)),g=a(n(59909)),x=n(19529),C=a(n(39546)),v=n(85893)},34778:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onClick:t}=e;if("new-chat-info"===e.theme){const e=(0,c.jsx)(d.TextSpan,{theme:"title",children:i.fbt._("Security",null,{hk:"2BYJDI"})}),n=(0,c.jsx)(d.TextDiv,{theme:"muted",children:i.fbt._("Click to learn how messages and calls are secured.",null,{hk:"1UxhjE"})});return(0,c.jsx)(l.default,{icon:"lock",onClick:t,title:e,secondaryTitle:n})}return(0,c.jsxs)(o.default,{onClick:t,side:(0,c.jsx)(r.default,{name:"lock",className:(0,s.default)(f)}),multiline:!0,children:[(0,c.jsx)("div",{className:(0,s.default)(u),children:(0,c.jsx)(d.TextSpan,{theme:"title",children:i.fbt._("Security",null,{hk:"2BYJDI"})})}),(0,c.jsx)(d.TextDiv,{theme:"muted",children:i.fbt._("Click to learn how messages and calls are secured.",null,{hk:"1UxhjE"})})]})};var i=n(48360),s=a(n(56720)),l=a(n(75116)),o=a(n(35721)),r=a(n(23217)),d=n(13923),c=n(85893);const u={marginBottom:"brac1wpa"},f={color:"jq3rn4u7"}},56811:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const[e,t]=(0,a.useState)((0,i.getNewChatInfo)());return(0,s.useListener)(i.UserPrefsEvent,i.UserPrefsEvent.NEW_CHAT_INFO_CHANGE,(e=>{t(e)})),e};var a=n(67294),i=n(99234),s=n(19529)},9582:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{isVoiceCallEnabled:!1,isVideoCallEnabled:!1,canStartVoiceCall:!1,canStartVideoCall:!1,startVoiceCall:()=>{},startVideoCall:()=>{}}};n(67294),n(17239),n(19529)},4584:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(r.GK.supportsFeature(r.GK.F.MD_BACKEND)){var t;const{onClick:a,text:r}=e,f=(0,u.jsx)(d.default,{name:"lock",className:o.default.icon});if("new-chat-info"===e.theme){var n;const t=(0,u.jsx)(c.TextSpan,{theme:"title",children:null!==(n=e.title)&&void 0!==n?n:i.fbt._("Encryption",null,{hk:"a7CfR"})}),l=(0,u.jsx)(c.TextDiv,{theme:"muted",children:r});return(0,u.jsx)(s.default,{onClick:a,icon:"lock",title:t,secondaryTitle:l})}return(0,u.jsxs)(l.default,{onClick:a,side:f,multiline:!0,children:[(0,u.jsx)("div",{className:o.default.header,children:(0,u.jsx)(c.TextSpan,{theme:"title",children:null!==(t=e.title)&&void 0!==t?t:i.fbt._("Encryption",null,{hk:"a7CfR"})})}),(0,u.jsx)(c.TextDiv,{theme:"muted",children:r})]})}return null};var i=n(48360),s=a(n(75116)),l=a(n(35721)),o=a(n(13474)),r=n(7293),d=a(n(23217)),c=n(13923),u=n(85893)},91252:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(29521)),s=n(12380),l=n(48360),o=n(67294),r=n(88102),d=a(n(60453)),c=a(n(35721)),u=a(n(69637)),f=n(94790),h=a(n(33308)),p=n(99234),m=n(57701),g=a(n(33019)),x=a(n(58860)),C=n(10435),v=n(89389),_=n(56728),b=n(18963),j=n(64551),S=n(13923),E=n(49082),T=a(n(59147)),k=a(n(39546)),y=n(85893);const M=e=>{let{isRestricted:t,onClick:n}=e;return(0,y.jsxs)(c.default,{onClick:n,multiline:!0,children:[(0,y.jsx)("div",{className:g.default.header,children:(0,y.jsx)(S.TextSpan,{theme:"title",children:l.fbt._("Edit group info",null,{hk:"2rhyLl"})})}),(0,y.jsx)(S.TextDiv,{theme:"muted",children:t?l.fbt._("Only admins",null,{hk:"1shXeT"}):l.fbt._("All participants",null,{hk:"2YNQNN"})})]})},I=e=>{let{isAnnouncement:t,onClick:n}=e;return(0,y.jsxs)(c.default,{onClick:n,multiline:!0,children:[(0,y.jsx)("div",{className:g.default.header,children:(0,y.jsx)(S.TextSpan,{theme:"title",children:l.fbt._("Send messages",null,{hk:"2zKwxL"})})}),(0,y.jsx)(S.TextDiv,{theme:"muted",children:t?l.fbt._("Only admins",null,{hk:"1shXeT"}):l.fbt._("All participants",null,{hk:"2YNQNN"})})]})},w=e=>{let{isNoFrequentlyForwarded:t,onClick:n}=e;const a=j.ServerProps.hfmStringChanges?l.fbt._("Messages forwarded many times",null,{hk:"2Neytn"}):l.fbt._("Frequently forwarded messages",null,{hk:"1OxFLx"});return(0,y.jsxs)(c.default,{onClick:n,multiline:!0,children:[(0,y.jsx)("div",{className:g.default.header,children:(0,y.jsx)(S.TextSpan,{theme:"title",children:a})}),(0,y.jsx)(S.TextDiv,{theme:"muted",children:t?l.fbt._("Don't allow",null,{hk:"3uBuwQ"}):l.fbt._("Allow",null,{hk:"2pdVOn"})})]})};function P(e,t){const n=(0,E.useModelValues)(e.chat,["id"]),a=(0,E.useModelValues)(e.groupMetadata,["restrict","announce","noFrequentlyForwarded","participants","owner","isParentGroup"]),o=(0,T.default)(),j=e=>{r.Cmd.openModal((0,y.jsx)(x.default,{settingType:e,chat:n,groupMetadata:a}),{transition:"modal",uim:o})},P=()=>a.participants.filter((e=>e.isAdmin)).map((e=>e.contact)),A=e=>!!a.participants.get(e.id),N=e=>{const t=k.default.equals(e,a.owner),n=(0,p.getMaybeMeUser)().equals(e),i=!0===a.isParentGroup&&(0,m.cadminSelfDemoteEnabled)();return t||n&&!i},D=e=>{const t=a.participants,s=t.filter((e=>e.isAdmin)),l=(0,i.default)(e,s,((e,t)=>e.id.equals(t.id))).map((e=>t.assertGet(e.id))),o=(0,i.default)(s,e,((e,t)=>e.id.equals(t.id)));l.length>0&&(l.forEach((e=>{e.contact.pendingAction++})),(0,v.promoteParticipants)(n,l).finally((()=>{l.forEach((e=>{e.contact.pendingAction--}))}))),o.length>0&&(o.forEach((e=>{e.contact.pendingAction++})),(0,v.demoteParticipants)(n,o).finally((()=>{o.forEach((e=>{e.contact.pendingAction--}))}))),r.Cmd.closeModal()};return(0,y.jsxs)(d.default,{ref:t,theme:"striped",children:[(0,y.jsx)(f.DrawerHeader,{title:l.fbt._("Group settings",null,{hk:"3sS0Vl"}),type:f.DRAWER_HEADER_TYPE.SMALL,onBack:e.onClose}),(0,y.jsxs)(u.default,{children:[(0,y.jsx)(h.default,{animation:!1,children:(0,y.jsx)(M,{onClick:()=>{j(s.GROUP_SETTING_TYPE.RESTRICT)},isRestricted:a.restrict})}),(0,y.jsx)("div",{className:g.default.restrictText,children:(0,y.jsx)(S.TextSpan,{theme:"muted",children:l.fbt._("Choose who can change this group’s subject, icon, description and disappearing messages setting.",null,{hk:"1cqpzS"})})}),(0,y.jsxs)(h.default,{animation:!1,children:[(0,y.jsx)(I,{onClick:()=>{j(s.GROUP_SETTING_TYPE.ANNOUNCEMENT)},isAnnouncement:a.announce}),(0,C.isAdminHfmToggleEnabled)()?(0,y.jsx)(w,{onClick:()=>{j(s.GROUP_SETTING_TYPE.NO_FREQUENTLY_FORWARDED)},isNoFrequentlyForwarded:a.noFrequentlyForwarded}):null]}),(0,y.jsx)(h.default,{animation:!1,children:(0,y.jsx)(c.default,{onClick:()=>{r.Cmd.openModal((0,y.jsx)(_.SelectModal,{onConfirm:D,getInitialItems:P,isDisabled:N,isSelected:N,filter:A,title:l.fbt._("Edit group admins",null,{hk:"1BOEkM"}),useShortName:!0,useAllContacts:!0,listType:_.ListType.PARTICIPANT_MANAGE_MODAL,singleSelectionFooterType:b.FooterType.CONFIRM,multipleSelectionFooterType:b.FooterType.CONFIRM,shouldShowSelectionSummary:!1}))},multiline:!0,children:(0,y.jsx)("div",{className:g.default.header,children:(0,y.jsx)(S.TextSpan,{theme:"title",children:l.fbt._("Edit group admins",null,{hk:"1BOEkM"})})})})})]})]})}var A=(0,o.forwardRef)(P);t.default=A},58860:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{settingType:t}=e,n=(0,p.useModelValues)(e.chat,["id"]),a=(0,p.useModelValues)(e.groupMetadata,["restrict","announce","noFrequentlyForwarded"]),g=(0,l.useMemo)((()=>{switch(t){case i.GROUP_SETTING_TYPE.ANNOUNCEMENT:case i.GROUP_SETTING_TYPE.RESTRICT:return[{label:s.fbt._("All participants",null,{hk:"2YNQNN"}),value:0},{label:s.fbt._("Only admins",null,{hk:"1shXeT"}),value:1}];case i.GROUP_SETTING_TYPE.NO_FREQUENTLY_FORWARDED:return[{label:s.fbt._("Allow",null,{hk:"2pdVOn"}),value:0},{label:s.fbt._("Don't allow",null,{hk:"3uBuwQ"}),value:1}];default:return[]}}),[t]),x=(0,l.useMemo)((()=>{const{restrict:e,announce:n,noFrequentlyForwarded:s}=a;switch(t){case i.GROUP_SETTING_TYPE.ANNOUNCEMENT:return n?1:0;case i.GROUP_SETTING_TYPE.RESTRICT:return e?1:0;case i.GROUP_SETTING_TYPE.NO_FREQUENTLY_FORWARDED:return s?1:0;default:return 0}}),[t,a]),C=(0,l.useMemo)((()=>{switch(t){case i.GROUP_SETTING_TYPE.ANNOUNCEMENT:return s.fbt._("Send messages",null,{hk:"2zKwxL"});case i.GROUP_SETTING_TYPE.RESTRICT:return s.fbt._("Edit group info",null,{hk:"2rhyLl"});case i.GROUP_SETTING_TYPE.NO_FREQUENTLY_FORWARDED:return u.ServerProps.hfmStringChanges?s.fbt._("Messages forwarded many times",null,{hk:"2Neytn"}):s.fbt._("Frequently forwarded messages",null,{hk:"1OxFLx"});default:return""}}),[t]),v=(0,l.useMemo)((()=>t===i.GROUP_SETTING_TYPE.RESTRICT?s.fbt._("Choose who can change this group’s subject, icon, description and disappearing messages setting.",null,{hk:"1cqpzS"}):t===i.GROUP_SETTING_TYPE.NO_FREQUENTLY_FORWARDED&&(0,c.isAdminHfmToggleEnabled)()?(0,m.jsxs)(m.Fragment,{children:[s.fbt._("Choose to allow participants to send messages to the group that have been forwarded many times.",null,{hk:"1PP9Ge"})," ",(0,m.jsx)(o.ExternalLink,{href:(0,r.getFrequentlyForwardedFaqUrl)(),children:d.default.t(569)})]}):null),[t]);return(0,m.jsx)(h.default,{options:g,initialValue:x,title:C,onSelect:e=>{e!==x&&(0,f.setGroupProperty)(n,t,e).catch((()=>()=>{}))},explanation:v})};var i=n(12380),s=n(48360),l=n(67294),o=n(12591),r=n(96384),d=a(n(43725)),c=n(10435),u=n(64551),f=n(54646),h=a(n(37881)),p=n(49082),m=n(85893)},43895:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(48360),s=n(67294),l=a(n(33308)),o=a(n(43725)),r=n(84387),d=n(85865),c=n(64658),u=a(n(53145)),f=a(n(65932)),h=n(31019),p=a(n(23217)),m=n(13923),g=n(85893);class x extends s.Component{constructor(e){super(e),this._updateParticipants=()=>{this.setState({participants:this.getParticipants(this.props.chat)})},this.state={participants:this.getParticipants(e.chat)}}componentDidMount(){const{chat:e}=this.props;e.liveLocationQueried||d.LiveLocationCollection.getActive(e.id.toString()).then((()=>{e.liveLocationQueried=!0})).catch((()=>{})),this.props.listeners.add((0,h.unproxy)(e),"change:liveLocation",(()=>{const{liveLocation:t}=e;t&&(this._removeParticipantListener(t),this._addParticipantListener(t),this._updateParticipants())}));const{liveLocation:t}=e;t&&this._addParticipantListener(t)}_addParticipantListener(e){this.props.listeners.add(e.participants,"add remove",this._updateParticipants)}_removeParticipantListener(e){this.props.listeners.remove(e.participants,"add remove",this._updateParticipants)}getParticipants(e){const{liveLocation:t}=e;return t?t.participants.toArray():[]}getText(){const{chat:e}=this.props,{participants:t}=this.state;let n,a,s=0;if(t.forEach((e=>{e.isMe?n=!0:(a||(a=e.contact),s++)})),e.isGroup)return n?1===t.length?i.fbt._("You are sharing live location",null,{hk:"4DvZgE"}):o.default.t(587,{count:s,_plural:s}):o.default.t(584,{count:s,_plural:s});if(n){if(1===t.length)return i.fbt._("You are sharing live location",null,{hk:"4DvZgE"});if(a)return o.default.t(586,{name:a.formattedShortNameWithNonBreakingSpaces})}else if(a)return o.default.t(583,{name:a.formattedShortNameWithNonBreakingSpaces});return""}render(){const{onClick:e}=this.props;if(!this.state.participants.length)return null;const t=(0,g.jsx)(p.default,{name:(0,c.liveLocationIcon)(!0)});return(0,g.jsx)(l.default,{a8nText:"section-live-location",theme:"padding",title:i.fbt._("Live Location",null,{hk:"1LvIwY"}),titleOnClick:e,children:(0,g.jsx)(u.default,{side:t,onClick:e,children:(0,g.jsx)(m.TextSpan,{theme:"title",children:this.getText()})})})}}x.CONCERNS={chat:["id","isGroup","liveLocation","liveLocationQueried"]},x.displayName="LiveLocationRow";var C=(0,r.ListenerHOC)((0,f.default)(x,x.CONCERNS));t.default=C},8059:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.MediaGalleryDrawer=k,t.TABS=void 0;var i=a(n(52628)),s=a(n(94184)),l=n(48360),o=n(67294),r=n(46331),d=a(n(5577)),c=a(n(60453)),u=a(n(69637)),f=n(94790),h=a(n(43725)),p=a(n(93528)),m=a(n(88224)),g=a(n(27356)),x=a(n(16351)),C=a(n(26757)),v=a(n(99108)),_=n(64551),b=n(18644),j=a(n(59552)),S=a(n(41956)),E=n(85893);const T={MEDIA:"media",DOCS:"docs",LINKS:"links",PRODUCTS:"products"};function k(e){const{chat:t,onProductDetail:n,setProductsScrollOffset:a,productsScrollOffset:k}=e,[y,M]=(0,o.useState)(e.initialTab),[I,w]=(0,o.useState)(null),[P,A]=(0,o.useState)(!1),N=(0,j.default)((()=>new C.default([],(e=>e.id.toString())))),D=()=>{P&&(N.current.unsetAll(),A(!1))},O=(e,t)=>{P||A(!0),N.current.setVal(e,t),0===N.current.getSelected().length&&D()},R=(0,o.useCallback)((e=>{const t=(0,i.default)(T).indexOf(y),n=(0,i.default)(T).indexOf(e);t!==n&&N.current.unsetAll(),M(e),w(n>t?"right":"left"),A(!1)}),[N,y]),L=(0,o.useMemo)((()=>{const e=[{tab:T.MEDIA,title:h.default.t(612)},{tab:T.DOCS,title:h.default.t(409)},{tab:T.LINKS,title:h.default.t(570)}];_.ServerProps.productMediaAttachments&&e.push({tab:T.PRODUCTS,title:l.fbt._("Products",null,{hk:"3Ky71N"})});const t=e.map((e=>{const t=(0,s.default)(g.default.menuItem,{[g.default.active]:y===e.tab});return(0,E.jsx)("button",{className:t,onClick:()=>R(e.tab),title:e.title,children:e.title},e.tab)})),n=(0,s.default)(g.default.menuTabsLists,_.ServerProps.productMediaAttachments?g.default.fourTabs:g.default.threeTabs);return(0,E.jsx)("div",{className:n,"data-active-tab":y,children:t})}),[y,R]),G=(()=>{let e;switch(y){case T.MEDIA:e=(0,E.jsx)(m.default,{chat:t,mediaMsgs:t.getMediaMsgs(),selectable:P,onMessageSelect:O,selectedMessages:N.current,fullCollection:!0});break;case T.LINKS:e=(0,E.jsx)(p.default,{chat:t,linkMsgs:t.getLinkMsgs(),selectable:P,onMessageSelect:O,selectedMessages:N.current});break;case T.DOCS:e=(0,E.jsx)(d.default,{chat:t,docMsgs:t.getDocMsgs(),selectable:P,onMessageSelect:O,selectedMessages:N.current});break;case T.PRODUCTS:e=(0,E.jsx)(v.default,{chat:t,productMsgs:t.getProductMsgs(),selectable:P,onMessageSelect:O,selectedMessages:N.current,onProductDetail:n,setScrollOffset:a,scrollOffset:k})}return e})(),B=[T.MEDIA,T.DOCS].includes(y),F=P?(0,E.jsx)(b.UIE,{displayName:"MediaMultiSelect",escapable:!0,requestDismiss:D,children:(0,E.jsx)(x.default,{chat:t,noSortOnForward:!0,theme:"mediaGallery",toastPosition:r.ToastPosition.RIGHT,downloadButton:B,selectedMessages:N.current,onCancel:D})}):null,V="right"===I?"slide-forward":"slide-back";return(0,E.jsxs)(c.default,{theme:"gallery",children:[(0,E.jsx)(f.DrawerHeader,{title:" ",onBack:e.onBack,type:f.DRAWER_HEADER_TYPE.MULTI_MEDIA_GALLERY}),F,L,(0,E.jsx)(u.default,{"data-list-scroll-container":!0,children:(0,E.jsx)(S.default,{transitionName:V,className:g.default.column,children:(0,E.jsx)("div",{className:g.default.multimediaGallery,children:(0,E.jsx)("div",{className:g.default.column,children:G})},y)})})]})}t.TABS=T,k.defaultProps={initialTab:T.MEDIA,productsScrollOffset:0}},14425:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,d.useModelValues)(e.mediaData,["mediaStage","renderableUrl"]);return(0,c.jsx)(r.default,{mediaData:t,placeholderRenderer:h,children:t=>(0,c.jsx)(f,{url:t,msg:e.msg})})};var i=a(n(94184)),s=a(n(45863)),l=a(n(43725)),o=a(n(8752)),r=a(n(20553)),d=n(49082),c=n(85893);const u=e=>{e.stopPropagation()};function f(e){let{url:t,msg:n}=e;return(0,c.jsx)(s.default,{url:t,className:o.default.mediaViewerAudio,onClick:u,autoPlay:!0,msg:n,controls:!0,children:l.default.t(159)})}function h(){return(0,c.jsx)("div",{className:(0,i.default)(o.default.imageAudio,o.default.mediaViewerPlaceholder),onClick:u})}},65768:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onHightlightCloseEnd:t,msgIndexInAlbum:n,onViewOnceInfoClick:a,onGoToMsgClick:T,onDownloadClick:k,onReplyClick:y,onDeleteClick:M,onUnstarClick:I,onStarClick:w,openForwardFlow:P,onMsgInfoClick:A}=e,N=(0,s.useRef)(null),D=(0,j.useModelValues)(e.msg,["star","isGroupMsg","chat","type","isGif","isViewOnce","sender","senderObj","t","isSentByMe","isStickerMsg"]),O=(0,j.useModelValues)(e.mediaData,["filehash","mediaStage","renderableUrl"]);(0,b.useListener)(N.current,"animationend",(()=>{t()}));let R=D.displayName(!0,!0);D.isGroupMsg&&(R+=" @ "+D.chat.title());const L=()=>D.chat.isGroup?i.fbt._("Report group",null,{hk:"23NLqw"}):h.default.t(738,{contactInfo:D.senderObj.displayName}),G=e=>{const{chat:t}=D;t&&(e?t.isGroup?(0,C.sendSpamExitClear)(t,v.SpamFlow.MediaViewer):(0,C.sendSpamBlockClear)(t,v.SpamFlow.MediaViewer):(0,C.sendSpamReport)(t,v.SpamFlow.MediaViewer)),r.Cmd.closeModal()},B=()=>{r.Cmd.openModal((0,E.jsx)(S.default,{isBusiness:D.senderObj.isBusiness,isGroup:D.chat.isGroup,onReport:G,onCancel:()=>r.Cmd.closeModal(),title:L()}))},F=()=>{(0,x.default)(D)},V=()=>!D.isViewOnce&&(!!O.renderableUrl||O.mediaStage===m.MEDIA_DATA_STAGE.RESOLVED),U=()=>{const e=[];return(D.canPrivateReply()||D.canPrivateReplyInRestrictedGrp())&&e.push((0,E.jsx)(u.DropdownItem,{a8n:"mi-msg-reply",action:F,children:i.fbt._("Reply privately",null,{hk:"1XQeK2"})},"private_reply")),D.isViewOnce?e.push((0,E.jsx)(u.DropdownItem,{action:B,children:L()},"dropdownMsgInfo")):(D.isSentByMe&&e.push((0,E.jsx)(u.DropdownItem,{action:A,children:h.default.t(632)},"dropdownMsgInfo")),e.push((0,E.jsx)(u.DropdownItem,{action:T,children:i.fbt._("Go to message",null,{hk:"B1anG"})},"dropdownGoToMsg"),(0,E.jsx)(u.DropdownItem,{action:k,disabled:!V(),children:i.fbt._("Download",null,{hk:"1g5Jix"})},"dropdownDownload"))),(0,E.jsx)(g.MenuBarItem,{icon:(0,E.jsx)(_.default,{name:"menu"}),title:h.default.t(626),children:(0,E.jsx)(c.Dropdown,{type:"dropdown_menu",flipOnRTL:!0,dirX:c.DirX.LEFT,children:e},"MediaPanelHeaderDropdown")},"btnMenu")},H=()=>{let e,t,n;return D.star?(e=I,t="unstar-btn",n=h.default.t(813)):(e=w,t="star-btn",n=h.default.t(789)),(0,E.jsx)(g.MenuBarItem,{icon:(0,E.jsx)(_.default,{name:t}),title:n,onClick:e},t)},W=()=>(0,E.jsx)(g.MenuBarItem,{icon:(0,E.jsx)(_.default,{name:"forward"}),title:h.default.t(479),onClick:P},"btnForward");return(0,E.jsxs)("div",{className:p.default.mediaPanelHeader,children:[(0,E.jsx)("div",{className:p.default.info,children:(0,E.jsx)(l.default,{idle:!0,image:(0,E.jsx)(d.DetailImage,{id:D.sender,size:40}),primary:(0,E.jsx)(f.EmojiText,{ellipsify:!0,text:R}),secondary:o.Clock.relativeDateAndTimeStr(D.t),theme:"media"})}),(0,E.jsx)("div",{className:p.default.mediaPanelTools,children:(0,E.jsxs)(g.MenuBar,{theme:"strong",children:[D.isViewOnce?[(0,E.jsx)(g.MenuBarItem,{icon:(0,E.jsx)(_.default,{name:"view-once",className:p.default.voIcon}),title:i.fbt._("View once info",null,{hk:"47XkZ4"}),onClick:a},"btnViewOnceInfo"),U()]:n>=0?[D.canReply()?(0,E.jsx)(g.MenuBarItem,{icon:(0,E.jsx)(_.default,{name:"reply"}),title:i.fbt._("Reply",null,{hk:"1C7DPa"}),onClick:y},"btnReply"):null,D.canStar()?H():null,(0,E.jsx)(g.MenuBarItem,{icon:(0,E.jsx)(_.default,{name:"delete"}),title:i.fbt._("Delete",null,{hk:"2KhPUX"}),onClick:M},"btnDelete"),D.canForward()?W():null,U()].filter(Boolean):(()=>{const e=[];return D.isStickerMsg||e.push((0,E.jsx)(g.MenuBarItem,{icon:(0,E.jsx)(_.default,{name:"bubble"}),title:i.fbt._("Go to message",null,{hk:"B1anG"}),onClick:T},"btnGoToMsg")),D.isStickerMsg&&e.push((0,E.jsx)(g.MenuBarItem,{icon:(0,E.jsx)(_.default,{name:"reply"}),title:i.fbt._("Reply",null,{hk:"1C7DPa"}),onClick:y},"btnReplyToMsg")),D.canStar()&&e.push(H()),D.isStickerMsg&&e.push((0,E.jsx)(g.MenuBarItem,{icon:(0,E.jsx)(_.default,{name:"delete"}),title:i.fbt._("Delete",null,{hk:"2KhPUX"}),onClick:M},"btnDelete")),D.canForward()&&e.push(W()),D.isStickerMsg||e.push((0,E.jsx)(g.MenuBarItem,{icon:(0,E.jsx)(_.default,{name:"download"}),title:i.fbt._("Download",null,{hk:"1g5Jix"}),disabled:!V(),onClick:k},"btnDownload")),e.filter(Boolean)})(),(0,E.jsx)(g.MenuBarItem,{a8nText:"btn-close",icon:(0,E.jsx)(_.default,{className:e.isHighlightClose?p.default.highlightClose:null,containerRef:N,name:"x-viewer"}),title:i.fbt._("Close",null,{hk:"19Jpec"}),onClick:e.onClose})]},"media-panel-header")})]})};var i=n(48360),s=n(67294),l=a(n(44356)),o=n(22683),r=n(88102),d=n(88984),c=n(60811),u=n(71174),f=n(65417),h=a(n(43725)),p=a(n(42784)),m=n(58668),g=n(46346),x=a(n(32231)),C=n(19569),v=n(38839),_=a(n(23217)),b=n(19529),j=n(49082),S=a(n(93187)),E=n(85893)},2959:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(67294),s=a(n(56720)),l=a(n(38261)),o=n(29623),r=a(n(47065)),d=a(n(20553)),c=a(n(39040)),u=a(n(37015)),f=a(n(11339)),h=a(n(60325)),p=n(10595),m=a(n(41104)),g=n(49082),x=n(85893);const C={container:{width:"ln8gz9je",height:"ppled2lx"},stickerContainer:{maxWidth:"mx6rw3sv",maxHeight:"trnfqnf9",marginBottom:"r2u2pyhj",zIndex:"thghmljt"}},v=(e,t)=>{const{msg:n}=e,a=(0,g.useModelValues)(e.mediaData,["mediaStage","fullWidth","fullHeight","isFirstParty","stickerPackId","stickerPackName","stickerPackPublisher"]),v=(0,i.useRef)(),_=(0,m.default)(t,v),b=e=>{var t;null===(t=v.current)||void 0===t||t.onClick(e)},j=a.isFirstParty?(0,x.jsx)(l.default,{stickerPackId:a.stickerPackId,onStickerPackView:e.onStickerPackView,stickerPackViewDelay:e.stickerPackViewDelay}):(0,x.jsx)(p.StickerDetailsStickerPackInfo,{name:a.stickerPackName,publisher:a.stickerPackPublisher,theme:p.Theme.MediaViewer});return(0,x.jsxs)(o.FlexColumn,{align:"center",justify:"center",xstyle:C.container,children:[(0,x.jsx)("div",{className:(0,s.default)(C.container,C.stickerContainer),children:(0,x.jsx)(u.default,{ref:_,width:a.fullWidth,height:a.fullHeight,onZoomIn:e.onImgZoomIn,onLoad:e.onLoad,msg:n,children:(0,x.jsx)(d.default,{mediaData:a,placeholderRenderer:()=>(0,x.jsx)(h.default,{size:376}),downloadMedia:()=>null==n?void 0:n.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:f.default.WEBC_RMR_REASON_CODE.MEDIA_VIEWER,isUserInitiated:!1}),children:e=>(0,x.jsx)(r.default,{className:(0,s.default)(c.default.content),onClick:b,src:e})})})}),j]})};var _=(0,i.forwardRef)(v);t.default=_},26646:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(29984),s=n(67294),l=a(n(56720)),o=a(n(62190)),r=a(n(15407)),d=n(40875),c=n(4522),u=a(n(43725)),f=n(58668),h=a(n(39040)),p=a(n(11339)),m=n(99875),g=a(n(11791)),x=a(n(52500)),C=n(94270),v=n(57793),_=a(n(65932)),b=a(n(23425)),j=n(85893);class S extends s.PureComponent{constructor(){super(...arguments),this.state={played:!1,size:{width:0,height:0},isFullscreenMode:!1,displayReactionBubble:!0},this._setRefContainer=e=>{this.refContainer=e},this.stopPropagation=e=>{e.stopPropagation()},this._handleFullscreenToggle=e=>{this.setState({isFullscreenMode:e})}}static getDerivedStateFromProps(e){const{mediaData:t}=e;return(t.mediaStage===f.MEDIA_DATA_STAGE.RESOLVED||t.streamable&&t.isStreamable())&&(0,i.isNonZeroNumber)(t.fullWidth)&&(0,i.isNonZeroNumber)(t.fullHeight)?{size:S.getSize(t)}:null}static getSize(e){if(e.isGif){const t=330;return e.fullWidth>=t?{width:e.fullWidth,height:e.fullHeight}:{width:t,height:e.fullHeight*t/e.fullWidth}}return e.fullWidth>=c.MIN_WIDTH?{width:e.fullWidth,height:e.fullHeight}:{width:c.MIN_WIDTH,height:e.fullHeight}}componentDidMount(){this.props.mediaData.isStreamable()||this.props.msg.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:p.default.WEBC_RMR_REASON_CODE.MEDIA_VIEWER,isUserInitiated:!0})}componentWillUnmount(){this.props.msg.mediaObject&&this.props.msg.cancelDownload()}closingMedia(){this.setState({displayReactionBubble:!1})}render(){var e;const{msg:t,mediaData:n}=this.props,a=n.isGif;let i=n.mediaStage===f.MEDIA_DATA_STAGE.RESOLVED||n.streamable&&n.isStreamable();i=i||t.isForcingRMR();let s=null;const c=C.ReactionBubbleType.MEDIA_ITEM;if(t&&(0,v.shouldShowReactionBubble)(t,c)&&(s=(0,j.jsx)(x.default,{msgIds:[t.id.toString()],reactionBubbleType:c,reactionBubbleVisible:this.state.displayReactionBubble})),i){const e=u.default.t(832);let i,r;return!this.state.isFullscreenMode&&(null==t?void 0:t.interactiveAnnotations)&&t.interactiveAnnotations.length>0&&(i=(0,j.jsx)(o.default,{annotations:t.interactiveAnnotations})),r=a?(0,j.jsxs)("div",{className:(0,l.default)(h.default.content),ref:this._setRefContainer,children:[(0,j.jsx)(b.default,{src:n.renderableUrl,onClick:this.stopPropagation,autoPlay:!0,loop:!0,children:e}),i]}):(0,j.jsx)("div",{ref:this._setRefContainer,className:(0,l.default)(h.default.content),onClick:this.stopPropagation,children:(0,j.jsx)(m.WrappedMsgVideoPlayer,{msg:t,mediaData:n,startTime:this.props.startTime,onClose:this.props.onClose,onError:()=>{},onFullscreenToggle:this._handleFullscreenToggle,autoPlay:this.props.autoPlay,type:d.PLAYER_TYPE.MEDIA_VIEWER,overlays:i,noPip:t.isViewOnce})}),(0,j.jsxs)(g.default,{type:"scaleDown",position:"relative",objectPosition:"relative",size:this.state.size,onObjectLoad:this.props.onLoad,children:[r,s]})}return(0,j.jsxs)(g.default,{type:"scaleDown",position:"relative",objectPosition:"relative",size:{width:this.props.mediaData.fullWidth,height:this.props.mediaData.fullHeight},children:[(0,j.jsx)(r.default,{altText:null!==(e=t.caption)&&void 0!==e?e:"",mediaData:n}),s]})}}S.CONCERNS={mediaData:["mediaStage","fullWidth","fullHeight","isGif","isViewOnce","preview","renderableUrl","streamable"]},S.defaultProps={startTime:0},S.displayName="MediaVideo";const E=(0,_.default)(S,S.CONCERNS);t.default=class extends E{getContainerElement(){return this.getComponent().refContainer}closingMedia(){this.getComponent().closingMedia()}}},47186:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onImageLoad:t,isAnimatingIn:n,onImgZoomIn:a,onExitAnimation:d,onBack:R}=e,X=(0,H.useModelValues)(e.msg,["id","star","isUnsentMedia","isViewOnce","isStickerMsg","chat","caption","interactiveAnnotations","type"]),Q=(0,H.useModelValues)(e.mediaData,["mediaStage","type","isGif"]),J=(0,W.default)(n),ee=(0,r.useRef)(null),te=(0,r.useRef)(null),ne=(0,r.useRef)(null),ae=(0,r.useRef)(null),ie=(0,r.useRef)(),se=(0,r.useRef)(!1),le=(0,r.useRef)(!1),oe=(0,r.useRef)(!1),re=(0,U.default)((()=>X.isViewOnce&&(0,v.shouldShowNUX)(h.default.NUX.EPHEMERAL_VIEW_ONCE_RECEIVER))),[de]=(0,r.useState)((()=>Q.mediaStage===P.MEDIA_DATA_STAGE.RESOLVED&&e.isAnimatingIn&&e.getZoomNode?e.getZoomNode(X.id):null)),[ce,ue]=(0,r.useState)(!1),[fe,he]=(0,r.useState)(!1),[pe,me]=(0,r.useState)(!e.isAnimatingIn),[ge,xe]=(0,r.useState)(!1),[Ce,ve]=(0,r.useState)(!1),_e=()=>{const e=(0,z.jsx)(O.default,{isPhoto:Q.type===k.default.TYPE.IMAGE,onOkClick:()=>{c.Cmd.closeModal()}});c.Cmd.openModal(e)},be=(0,K.default)(((e,t)=>{if(fe)return;const n=ee.current;if(!n)return;const a=n.getInsideContainer();if(!(a&&a instanceof HTMLElement))return;const i=n.getOutsideContainer();if(!(i&&i instanceof HTMLElement))return;const{translateX:s,translateY:l}=n.getTranslatePosition(i,e,t);(0,q.default)(a,"stop"),(0,q.default)(a,{translateX:s,translateY:l,scale:N.ZOOM_IN_FACTOR},{duration:0})}));(0,r.useEffect)((()=>(__LOG__(2)`MediaViewerModal: Opened`,X.isViewOnce&&(0,E.canMarkPlayed)(X)&&(0,E.markPlayed)(X),re.current&&_e(),s.default.focus(ae.current),()=>{__LOG__(2)`MediaViewerModal: Closed`,be.cancel()})),[]);const je=e=>{t&&t();const a=de;a&&e&&n&&e instanceof HTMLElement&&(oe.current||(oe.current=!0,((e,t)=>{var n;const a=t.getBoundingClientRect(),i=e.getBoundingClientRect();let s=i.top-a.top,l=i.left-a.left;const o=e.clientWidth/t.clientWidth;s-=(t.clientHeight-e.clientHeight)/2,l-=(t.clientWidth-e.clientWidth)/2,(0,q.default)(t,{opacity:[1,0],translateX:[0,l],translateY:[0,s],scale:[1,o]},{duration:N.ANIMATION_DURATION,easing:[.1,.82,.25,1]});const r=null===(n=ne.current)||void 0===n?void 0:n.getContainerElement();r&&(0,q.default)(r,{opacity:[1,0]},{duration:N.ANIMATION_DURATION})})(a,e)))},Se=()=>{if(se.current)return;se.current=!0,(0,B.isFunction)(d)&&d();const t=e.getZoomNode&&e.getZoomNode(X.id);if(!t)return R();let n;const a=Q.type;var i;if([k.default.TYPE.IMAGE,k.default.TYPE.STICKER].includes(a)&&ee.current)n=ee.current.getInsideContainer(),null===(i=ee.current)||void 0===i||i.closingMediaZoomable();else if(Q.isGif&&te.current){var s;n=te.current.getContainerElement(),null===(s=te.current)||void 0===s||s.closingMedia()}if(!n)return R();{var l;const e=n,a=n.getBoundingClientRect(),i=t.getBoundingClientRect();let s=i.top-a.top,o=i.left-a.left;const r=t.clientWidth/e.clientWidth,d=(e.clientHeight-t.clientHeight)/2,c=(e.clientWidth-t.clientWidth)/2;s-=d,o-=c,(0,q.default)(n,{translateX:[o,0],translateY:[s,0],scale:[r,1]},{duration:N.CLOSE_ANIMATION_DURATION,easing:[.1,.82,.25,1]}).then((()=>{R()}));const u=null===(l=ne.current)||void 0===l?void 0:l.getContainerElement();u&&(0,q.default)(u,{opacity:[0,1]},{duration:N.CLOSE_ANIMATION_DURATION,easing:[.1,.82,.25,1]})}},Ee=e=>{const t=ee.current;e&&t&&(le.current=t.heightOverflow>0||t.widthOverflow>0),ue(e),a(e)},Te=()=>{ve(!0)},ke=()=>{he(!0)},ye=()=>{he(!1)},Me=e=>{e.stopPropagation(),xe(!ge)};let Ie,we;switch((0,r.useEffect)((()=>{n||pe||!J||me(!0)}),[n,pe,J]),Q.type){case k.default.TYPE.IMAGE:Ie=(0,z.jsx)(y.default,{msg:X,mediaData:Q,onLoad:je,onImgZoomIn:Ee,onAnnotationTooltipDisplay:ke,onAnnotationTooltipDismiss:ye,preventDownload:X.isViewOnce,ref:ee},X.id.toString());break;case k.default.TYPE.STICKER:Ie=(0,z.jsx)(w.default,{msg:X,mediaData:Q,onLoad:je,onImgZoomIn:Ee,onStickerPackView:Se,stickerPackViewDelay:N.CLOSE_ANIMATION_DURATION,ref:ee},X.id.toString());break;case k.default.TYPE.VIDEO:Ie=(0,z.jsx)(A.default,{autoPlay:!re.current,msg:X,mediaData:Q,onLoad:Q.isGif?je:null,startTime:e.startTime,onClose:Se,ref:te},X.id.toString());break;case k.default.TYPE.AUDIO:Ie=(0,z.jsx)(T.default,{mediaData:Q,msg:X},X.id.toString());break;default:__LOG__(4,void 0,new Error,!0)`type: ${Q.type}`,SEND_LOGS("MediaViewerModal: unexpected media type")}const Pe=e.msgIndexInAlbum>=0&&e.albumSize>=0;if(X.caption||Pe){let t;if(Pe){const n={number:e.msgIndexInAlbum+1,totalNumber:e.albumSize};t=S.default.t(702,n)}const n=j.Configuration.Conversation({mentions:X.mentionMap(),links:X.getLinks(),trusted:!0}),a=!pe&&(Q.isGif||Q.type===k.default.TYPE.IMAGE);we=(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("p",{className:(0,l.default)(D.default.captionWrapper,ie.current&&D.default.captionWrapperExpandable),onClick:ie.current?Me:void 0,title:ie.current?o.fbt._("Read more",null,{hk:"2DvSvh"}):void 0,"aria-hidden":ge||void 0,children:[(0,z.jsx)(g.EmojiText,{className:(0,l.default)(D.default.mediaCaption,{[D.default.captionHidden]:a,[D.default.expanded]:ge}),formatters:n,ref:e=>{ne.current=e},text:X.caption||t}),ie.current&&(0,z.jsx)(V.default,{xstyle:[Y.captionReadMoreBtn,ge&&Y.captionReadMoreBtnExpanded,ce&&Y.captionReadMoreBtnZoomed],onClick:Me,children:(0,z.jsx)(G.TextSpan,{children:o.fbt._("Read more",null,{hk:"2DvSvh"})})})]}),ge&&(0,z.jsx)("p",{className:(0,l.default)(D.default.captionWrapper,D.default.captionWrapperExpandable,D.default.captionExpanded),onClick:Me,children:(0,z.jsx)(g.EmojiText,{className:(0,l.default)(D.default.mediaCaption,D.default.mediaCaptionExpanded),formatters:n,text:X.caption})})]})}const Ae=(0,l.default)(D.default.media,{[D.default.mediaWithCaption]:!!we}),Ne=(0,l.default)("overlay",D.default.mediaViewer,{[D.default.noThumbnails]:X.isViewOnce||X.isStickerMsg,[D.default.mediaViewerAnimate]:e.isAnimatingIn,[D.default.cursorZoomOut]:ce}),De=ce&&le.current?e=>{be(e.pageX,e.pageY)}:null,Oe=ce?e=>{be.cancel();const t=ee.current;t&&ce&&t.onClick(e)}:null;let Re=ce?null:Se;null!=Re&&X.isViewOnce&&(Re=Te);const Le=!X.isViewOnce&&!X.isStickerMsg;return(0,z.jsx)(F.UIE,{displayName:"MediaViewer",escapable:!0,requestDismiss:Se,children:(0,z.jsx)(b.HotKeys,{handlers:{space:e=>{if(n)return;be.cancel();const t=ee.current;null!=t&&t.onKeyboardZoom(e)}},onRef:e=>{ae.current=e},children:(0,z.jsxs)("div",{className:Ne,"data-animate-media-viewer":!0,"data-testid":"media-viewer-modal",onClick:Oe,onMouseMove:De,children:[(0,z.jsx)(M.default,{isHighlightClose:Ce,msg:X,mediaData:Q,onClose:Se,onGoToMsgClick:e=>{e.stopPropagation(),Se(),c.Cmd.existsDrawerRight((e=>{e&&2===u.default.column&&c.Cmd.closeDrawerRight()}));const t=X.chat.getSearchContext((0,L.unproxy)(X));c.Cmd.openChatAt(X.chat,t).then((e=>{e&&c.Cmd.focusChatTextInput(X.chat)}))},onHightlightCloseEnd:()=>{ve(!1)},onReplyClick:()=>{Se(),(0,i.delayMs)(N.CLOSE_ANIMATION_DURATION).then(Z.bind(null,(0,L.unproxy)(X)))},onUnstarClick:e=>{e.stopPropagation(),c.Cmd.sendUnstarMsgs(X.chat,[(0,L.unproxy)(X)])},onStarClick:e=>{e.stopPropagation(),c.Cmd.sendStarMsgs(X.chat,[(0,L.unproxy)(X)])},onDeleteClick:()=>{let e;X.canSenderRevoke()?e=m.RevokePrompt.Sender:X.canAdminRevoke()&&(e=m.RevokePrompt.Admin),c.Cmd.openModal((0,z.jsx)(p.default,{chat:X.chat,msgList:[(0,L.unproxy)(X)],deletePrompt:!0,revokePrompt:e,onDelete:Se}))},openForwardFlow:e=>{e.stopPropagation(),X.isUnsentMedia?c.Cmd.openModal((0,z.jsx)(f.default,{title:S.default.t(468),onOK:()=>c.Cmd.closeModal(),okText:o.fbt._("OK",null,{hk:"2KEeHb"}),children:S.default.t(465)})):c.Cmd.openModal((0,z.jsx)(C.ForwardMessageFlowLoadable,{msgs:[(0,L.unproxy)(X)]}),{transition:"modal-flow"})},onDownloadClick:e=>{e.stopPropagation(),x.FileSaver.initDownload((0,L.unproxy)(X))},onMsgInfoClick:()=>{Se(),(0,i.delayMs)(N.CLOSE_ANIMATION_DURATION+250).then(c.Cmd.msgInfoDrawer.bind(c.Cmd,(0,L.unproxy)(X)))},onViewOnceInfoClick:()=>{_e()},msgIndexInAlbum:e.msgIndexInAlbum}),(0,z.jsx)("div",{className:(0,l.default)(D.default.mediaContent,{[D.default.sticker]:X.isStickerMsg}),onClick:Re,children:(0,z.jsx)($,{hasNavigationButtons:Le,onNext:e.onNext,onPrev:e.onPrev,imgZoomed:ce,children:(0,z.jsxs)("div",{className:Ae,children:[(0,z.jsx)(I.default,{msg:X,mediaData:Q}),Ie,(0,z.jsx)(_.default.Provider,{value:X.chat.groupMetadata,children:we})]})})})]})})})};var i=n(13959),s=a(n(52013)),l=a(n(94184)),o=n(48360),r=n(67294),d=(a(n(56720)),n(61991)),c=n(88102),u=a(n(47620)),f=a(n(52665)),h=a(n(69618)),p=a(n(99131)),m=n(80226),g=n(65417),x=n(77811),C=n(75362),v=n(99234),_=a(n(45152)),b=n(55414),j=n(5124),S=a(n(43725)),E=n(30734),T=a(n(14425)),k=a(n(2320)),y=a(n(76530)),M=a(n(65768)),I=a(n(81136)),w=a(n(2959)),P=n(58668),A=a(n(26646)),N=n(8969),D=a(n(7674)),O=a(n(64815)),R=n(82857),L=n(31019),G=n(13923),B=n(31515),F=n(18644),V=a(n(1784)),U=a(n(59552)),H=n(49082),W=a(n(41502)),K=a(n(88857)),q=a(n(75426)),z=n(85893);const Y={captionReadMoreBtn:{position:"lhggkp7q",end:"h223g3sc",bottom:"jxacihee",paddingTop:"ppypbuwx",paddingEnd:"f9ovudaz",paddingBottom:"przvwfww",paddingStart:"nu34rnf1",backgroundColor:"idmi9oma",borderTopStartRadius:"ho9ovbg7",borderTopEndRadius:"tcg15ap9",borderBottomEndRadius:"c5wy1lv0",borderBottomStartRadius:"bqysl6j9",boxShadow:"a95fzlb5"},captionReadMoreBtnExpanded:{visibility:"kojwoqec"},captionReadMoreBtnZoomed:{visibility:"kqpkm0zi",opacity:"lxctpz5v"}};function X(e){null==e||e.stopPropagation()}function Z(e){const t=e.chat;t.composeQuotedMsg=e,c.Cmd.focusChatTextInput(t)}function $(e){var t,n,a,i;return(0,z.jsxs)(z.Fragment,{children:[e.hasNavigationButtons&&(0,z.jsx)("div",{className:(0,l.default)(D.default.btnMediaPrev),children:(0,z.jsx)("div",{onClick:e.onPrev?null:X,children:(0,z.jsx)(d.ChevronButton,{type:d.ButtonType.Prev,onClick:null!==(t=e.onPrev)&&void 0!==t?t:void 0,onKeyDown:null!==(n=e.onPrev)&&void 0!==n?n:void 0,disabled:!e.onPrev||e.imgZoomed,theme:R.RoundTheme.Default})})}),e.children,e.hasNavigationButtons&&(0,z.jsx)("div",{className:(0,l.default)(D.default.btnMediaNext),children:(0,z.jsx)("div",{onClick:e.onPrev?null:X,children:(0,z.jsx)(d.ChevronButton,{type:d.ButtonType.Next,onClick:null!==(a=e.onNext)&&void 0!==a?a:void 0,onKeyDown:null!==(i=e.onNext)&&void 0!==i?i:void 0,disabled:!e.onNext||e.imgZoomed,theme:R.RoundTheme.Default})})})]})}},38781:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{mediaMsgs:t,onScroll:n,highlightedMsgIds:a,activeMsg:u,onSetActiveThumb:f,onSelectThumb:h}=e,p=(0,s.useRef)({}),m=()=>{const e=new Map;return t.forEach((t=>{const n=t.id.toString();e.set(n,(e=>{const t=p.current[e];if(!t)return!1;const n=t.getBoundingClientRect(),a=(n.left+n.right)/2;return!(a>-1*window.innerWidth&&a<2*window.innerWidth)})(n))})),e},[g,x]=(0,s.useState)(m),C=(0,d.default)((()=>{const e=m();(0,i.default)(g,e)||x(e)}),100),v=(()=>{const e=a&&a.size>0&&a.has(u.id.toString()),n=[];return t.forEach((t=>{if(null==t.mediaData){const e=u;return void __LOG__(3,!0)`MediaViewerFlow: attempted to render a msg without mediaData: ${JSON.stringify({type:t.type,isMedia:t.isMedia,startMsgType:e.type,startMsgIsMedia:e.isMedia})}`}const i=e&&a&&!a.has(t.id.toString())?"viewerFlowTransparent":"viewerFlow";n.push((0,c.jsx)(l.MediaThumb,{theme:i,active:t===u,msg:t,containerRef:e=>{((e,t)=>{p.current[t]=e})(e,t.id.toString()),t===u&&f(e)},onClick:()=>{h(t)},preferPreview:!!g.get(t.id.toString()),showTooltip:t.isGroupMsg},`media-${t.id.id}`))})),n.push((0,c.jsx)("div",{className:o.default.mediaThumb,children:t.queryMediaAfter?(0,c.jsx)(r.Spinner,{stroke:6,size:24}):null},"spinner-right")),n.unshift((0,c.jsx)("div",{className:o.default.mediaThumb,children:t.queryMediaBefore?(0,c.jsx)(r.Spinner,{stroke:6,size:24}):null},"spinner-left")),n.push((0,c.jsx)("div",{className:o.default.thumbPadding},"padding-right")),n.unshift((0,c.jsx)("div",{className:o.default.thumbPadding},"padding-left")),n})();return(0,c.jsx)("div",{className:o.default.thumbsContainer,ref:e.setRefThumbsContainer,children:(0,c.jsx)("div",{className:o.default.scrollContainer,dir:"ltr",children:(0,c.jsx)("div",{onScroll:e=>{C(),n(e)},className:o.default.viewerThumbs,ref:e.setRefThumbs,children:v})})})};var i=a(n(31789)),s=n(67294),l=n(41908),o=a(n(77030)),r=n(11054),d=a(n(88857)),c=n(85893)},64815:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onOkClick:t}=e;return(0,s.useEffect)((()=>{(0,f.setNUX)(r.default.NUX.EPHEMERAL_VIEW_ONCE_RECEIVER,{views:1,maxViews:1})}),[]),(0,g.jsx)(o.default,{onOK:t,cancelText:h.default.t(569),onCancel:()=>{(0,d.openExternalLink)((0,c.getViewOnceFaqUrl)())},children:(0,g.jsxs)(u.FlexColumn,{children:[(0,g.jsx)(u.FlexItem,{xstyle:x.graphic,align:"center",children:(0,g.jsx)(p.default,{name:"view-once-sender-nux",width:195,height:177})}),(0,g.jsx)(m.TextHeader,{className:(0,l.default)(x.text),theme:"popup-title",children:e.isPhoto?i.fbt._("This photo is set to view once",null,{hk:"2H7aHc"}):i.fbt._("This video is set to view once",null,{hk:"1w8WFf"})}),(0,g.jsx)(m.TextParagraph,{className:(0,l.default)(x.text),children:e.isPhoto?i.fbt._("For more privacy, this photo will disappear after you close it.",null,{hk:"1XZPqi"}):i.fbt._("For more privacy, this video will disappear after you close it.",null,{hk:"3YgUHE"})})]})})};var i=n(48360),s=n(67294),l=a(n(56720)),o=a(n(52665)),r=a(n(69618)),d=n(12591),c=n(96384),u=n(29623),f=n(99234),h=a(n(43725)),p=a(n(23217)),m=n(13923),g=n(85893);const x={text:{marginBottom:"or9x5nie"},graphic:{marginBottom:"t4zgqcuo"}}},37881:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{options:t,explanation:n,onSelect:a}=e,[u,f]=(0,s.useState)(e.initialValue),h=()=>{l.Cmd.closeModal()},p=e=>{const{target:t}=e;t instanceof HTMLInputElement&&f(parseInt(t.value,10))},m=t.map((e=>{let{value:t,label:n}=e;return(0,c.jsx)("li",{children:(0,c.jsxs)("label",{className:r.default.label,children:[(0,c.jsx)("input",{type:"radio",className:r.default.input,value:String(t),checked:t===u,onChange:p}),n]})},`setting-${t}`)}));return(0,c.jsxs)(o.default,{title:e.title,okText:i.fbt._("Confirm",null,{hk:"3tmGp3"}),onOK:()=>{null!=u&&a(u),h()},onCancel:h,children:[null!=n?(0,c.jsx)(d.TextDiv,{theme:"muted",className:r.default.explanation,children:n}):null,(0,c.jsx)("form",{children:(0,c.jsx)("ol",{children:m})})]})};var i=n(48360),s=n(67294),l=n(88102),o=a(n(52665)),r=a(n(89732)),d=n(13923),c=n(85893)},93187:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const[t,n]=(0,s.useState)(!1);let a,f,h;e.isGroup?(a=i.fbt._("The last 5 messages from this group will be forwarded to WhatsApp.",null,{hk:"40tFfL"}),f=i.fbt._("No one in this group will be notified.",null,{hk:"1qLvih"}),h=i.fbt._("Exit group",null,{hk:"4BkPNr"})):e.isBusiness?(a=i.fbt._("The last 5 messages from this business will be forwarded to WhatsApp.",null,{hk:"1Xa0bG"}),f=i.fbt._("This business will not be notified.",null,{hk:"2Lbwbg"}),h=i.fbt._("Block business",null,{hk:"3hFIF3"})):(a=i.fbt._("The last 5 messages from this contact will be forwarded to WhatsApp.",null,{hk:"2YNTpM"}),f=i.fbt._("This contact will not be notified.",null,{hk:"172yrT"}),h=i.fbt._("Block contact",null,{hk:"41X9mL"}));return(0,c.jsxs)(o.default,{onOK:function(){e.onReport(t)},okText:i.fbt._("Report",null,{hk:"18ssTb"}),onCancel:e.onCancel,title:e.title,children:[(0,c.jsx)(d.TextParagraph,{xstyle:u.section,color:"muted",children:a}),(0,c.jsx)(d.TextParagraph,{xstyle:u.section,color:"muted",children:f}),(0,c.jsxs)(r.FlexRow,{align:"center",justify:"start",children:[(0,c.jsx)(l.CheckBox,{onChange:()=>n((e=>!e)),checked:t,id:"menu-icon-report-spam"}),(0,c.jsx)(d.TextLabel,{xstyle:u.checkboxLabel,htmlFor:"menu-icon-report-spam",color:"muted",children:h})]})]})};var i=n(48360),s=n(67294),l=(a(n(56720)),n(16593)),o=a(n(52665)),r=n(29623),d=n(13923),c=n(85893);const u={section:{marginBottom:"t4zgqcuo"},checkboxLabel:{marginStart:"fooq7fky"}}},24613:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={audioTag:"_1ichq"}},35346:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={header:"_2J_Rg",chevronIcon:"_3grvf",ephemeralIcon:"_36-dp"}},4949:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={msg:"_3YiZC",text:"RmpKn",bubble:"_2z0p1",author:"XntIB",hasSuspiciousLinks:"_3bU-2",hasAuthor:"_2cFHu",suspiciousLabel:"_2tYTz"}},81030:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={roundedThumb:"_2rpgh"}},14040:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={container:"_3go1_"}},1001:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={mediaCanvas:"GfgP-",shade:"_31TVj",blur:"_3SKsu",canvasSelected:"xEnhc"}},80768:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={iconStar:"_1Dvi_",shadeTop:"_2GZwK",canvasBody:"_10gTM",mediaGalleryThumbnail:"_1uBVh",chatInfoDrawerThumbnail:"_1t-UP",canvasSelected:"_28Wzy",mediaSelect:"_3fXE6",canvasComponent:"zm1kZ",canvasSecondRow:"_2GObI",viewerFlow:"_8KUDv",active:"_2w4lr",viewerFlowTransparent:"_3UuHq"}},61639:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={container:"_Wzeb",selected:"_2v6Lf"}},22745:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={iconType:"_3sWXp"}},79011:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={wrapper:"_11tTr"}},82338:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={nuxContainer:"_2MN2b",flatListContainer:"_3P67r",btnClose:"_1rNId",nuxHeader:"_1fDhw",nuxContent:"_3CSup",nuxIcon:"wZmgd",nuxText:"_23F3I"}},19713:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={footerNote:"_2v7h3",getTheAppLink:"f20SI"}},37154:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={wrapper:"_3KBDs",code:"_2ZlC0",codeDarkMode:"_2LUvK",codeLogo:"_3TIEq"}},25022:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={businessAccount:"_3WoOY",businessTitleText:"_1b76N",businessTitleWithSMBUpsell:"_3o5KS",businessTitleWithSmbUpsell:"_3o5KS"}},5579:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={businessHoursRow:"_2438e",firstRow:"_2aGH7",businessHoursDay:"Wb7rm",businessHoursHours:"_1Mczx",dayIsOpen:"_1kitz",businessHoursChevron:"_3rrGE",flipSvg:"mqqNO"}},79953:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={section:"h_jr2",description:"_2q04R",map:"_1I-_B"}},80746:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={wrapper:"_1KYpA",title:"_3vc4r",subtitle:"_3QsTT",verifiedText:"U1NnE",icon:"_3g_j1"}},63937:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={open:"_30zzj",closed:"_3wZZK",openStatus:"_1domD"}},10824:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={contactBusinessInfo:"_3ghG_",contactBusinessInfoSpinner:"_4L7V_",dataRow:"_1V82a",businessHoursRow:"qatFJ",businessHoursDay:"ipOxZ",businessHoursHours:"_24gSh",businessHoursChevron:"_3WwUb",flipSvg:"_3rTVf",dataRowIcon:"_19MbK",dataRowText:"_2w4yz",businessTitleText:"_2ojGG",businessMarker:"Ok_wk",verifiedLabel:"_8Jv4k",businessMap:"_2AET6",address:"_3hYRV",link:"Lmend",infoIcon:"_3MsDj"}},12603:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={info:"_1TZy1",categories:"_1IRxm",noPaddingBottom:"_2JmH_"}},13474:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={header:"_2zyOo",icon:"_4aKqp"}},33019:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={header:"_3AwRc",restrictText:"_1fFgT"}},27356:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={multimediaGallery:"_3M644",column:"_3nvje",menuItem:"OJuvv",active:"_KRg9",menuTabsLists:"_3CC5A",threeTabs:"_1KRHF",fourTabs:"rLX29"}},8752:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={mediaViewerPlaceholder:"nehFG",imageAudio:"_2OreO",mediaViewerAudio:"_1alR8"}},77030:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={thumbsContainer:"_1XWMx",scrollContainer:"_1MhXb",viewerThumbs:"_1FS45",mediaThumb:"_52crR",thumbPadding:"_1833d"}},89732:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={label:"QzWWL",input:"_1LOWN",explanation:"_37J_Y"}}}]);
//# sourceMappingURL=https://web.whatsapp.com/lazy_loaded_high_priority_components.a2269252b4295ae6565e.js.map
