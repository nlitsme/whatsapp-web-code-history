/*! Copyright (c) 2021 WhatsApp Inc. All Rights Reserved. */
(self.webpackChunkwhatsapp_web_client=self.webpackChunkwhatsapp_web_client||[]).push([[9488],{85636:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.formatRemoveResult=function(e,t){return l(e,f,p,h,t)},t.formatResult=l,t.formatParticipantActionString=d,t.formatGroupStatusReasonString=u,t.formatParticipantStatusReasonString=c,t.addSuccessString=function(e,t){return o.default.t(163,{participantNames:e,_plural:t})},t.addFailedString=function(e,t){return o.default.t(161,{participantNames:e,_plural:t})},t.addPartialFailedString=function(){return o.default.t(162)},t.removeSuccessString=f,t.removeFailedString=p,t.removePartialFailedString=h,t.promoteSuccessString=function(e,t){return o.default.t(176,{participantNames:e,_plural:t})},t.promoteFailedString=function(e,t){return o.default.t(174,{participantNames:e,_plural:t})},t.promotePartialFailedString=function(){return o.default.t(175)},t.demoteFailedString=function(e,t,a){switch(a){case 406:return o.default.t(166,{participant:e});default:return o.default.t(165,{participantNames:e,_plural:t})}},t.demoteSuccessString=function(e,t){return o.default.t(168,{participantNames:e,_plural:t})},t.demotePartialFailedString=function(){return o.default.t(167)};var s=r(a(69107)),n=r(a(60246)),o=r(a(66761)),i=r(a(43501));function l(e,t,a,r,o){var l;if(207===e.status){var f={};for(var p in e)if(i.default.isWid(p)){var h=e[p];if((403!==h||!n.default.supportsFeature(n.default.F.GROUPS_V_4_JOIN_PERMISSION))&&207!==h){f[h]||(f[h]=[]);var m=s.default.get(p);m&&f[h].push(m)}}var g=[];for(var _ in f){var v=d(t,a,c,parseInt(_,10),f[_]);v&&g.push(v)}l=g.length>0?g.join("\n"):r()}else l=d(t,a,u,e.status,o);return l}function d(e,t,a,r,s){var n=s.map((e=>e.formattedShortName)).join(o.default.t(658)),i=200===r;return(i?e(n,s.length):t(n,s.length,r))+(i?"":a(r,s.length))}function u(e){var t="";switch(e){case 403:t=" "+o.default.t(111);break;case 408:t=" "+o.default.t(171);break;case 404:t=" "+o.default.t(112);break;case 429:t=" "+o.default.t(113)}return t}function c(e,t){var a="";switch(e){case 401:case 406:case 409:break;case 404:a=" "+o.default.t(170,{_plural:t});break;case 408:a=" "+o.default.t(171,{_plural:t});break;case 500:a=" "+o.default.t(172);break;default:a=" "+o.default.t(173)}return a}function f(e,t){return o.default.t(181,{participantNames:e,_plural:t})}function p(e,t,a){switch(a){case 406:return o.default.t(180,{participant:e});default:return o.default.t(178,{participantNames:e,_plural:t})}}function h(){return o.default.t(179)}},47494:(e,t,a)=>{"use strict";var r=a(20862),s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addParticipants=function(e,t){return p((0,f.unproxy)(e),t)},t.removeParticipants=function(e,t){return h((0,f.unproxy)(e),t)},t.promoteParticipants=function(e,t){return m((0,f.unproxy)(e),t)},t.demoteParticipants=function(e,t){return g((0,f.unproxy)(e),t)};var n=s(a(67294)),o=a(96440),i=s(a(97420)),l=r(a(92246)),d=r(a(85636)),u=s(a(66761)),c=a(43825),f=a(79665);function p(e,t,a=(0,o.genId)()){var r=e.groupMetadata.participants;if(t.some((e=>r.get(e.id))))return __LOG__(3)`models:groupMetadata:participantCollection:addParticipants already a group member`,Promise.reject(new l.ActionError);if(!r.canAdd())return Promise.reject(new l.ActionError);var s=(0,c.sendAddParticipants)(e.id,t.map((e=>e.id))),f=t.map((e=>e.formattedShortName)).join(u.default.t(658)),h=new o.ActionType(u.default.t(164,{participantNames:f,_plural:t.length})),m=s.then((e=>{r.sendForNeededAddRequest(e);var a=d.formatResult(e,d.addSuccessString,d.addFailedString,d.addPartialFailedString,t);return new o.ActionType(a)})).catch((()=>(__LOG__(3)`models:groupMetadata:participantCollection:addParticipants dropped`,new o.ActionType(u.default.t(161,{participantNames:f,_plural:t.length}),{actionText:u.default.t(201),actionHandler:()=>p(e,t,a)}))));return i.default.openToast(n.default.createElement(o.ActionToast,{id:a,initialAction:h,pendingAction:m})),s.then((()=>{}))}function h(e,t,a=(0,o.genId)()){var r=e.groupMetadata.participants;if(t.some((e=>!r.canRemove(e))))return Promise.reject(new l.ActionError);var s=(0,c.sendRemoveParticipants)(e.id,t.map((e=>e.id))),f=t.map((e=>e.contact.formattedShortName)).join(u.default.t(658)),p=new o.ActionType(u.default.t(182,{participantNames:f,_plural:t.length})),m=s.then((e=>{var a=d.formatRemoveResult(e,t.map((e=>e.contact)));return new o.ActionType(a)})).catch((()=>(__LOG__(3)`models:groupMetadata:participantCollection:removeParticipants dropped`,new o.ActionType(u.default.t(178,{participantNames:f,_plural:t.length}),{actionText:u.default.t(201),actionHandler:()=>h(e,t,a)}))));return i.default.openToast(n.default.createElement(o.ActionToast,{id:a,initialAction:p,pendingAction:m})),s.then((()=>{}))}function m(e,t,a=(0,o.genId)()){var r=e.groupMetadata.participants;if(t.some((e=>!r.canPromote(e))))return Promise.reject(new l.ActionError);var s=(0,c.sendPromoteParticipants)(e.id,t.map((e=>e.id))),f=t.map((e=>e.contact.formattedShortName)).join(u.default.t(658)),p=new o.ActionType(u.default.t(177,{participantNames:f,_plural:t.length})),h=s.then((e=>{var a=d.formatResult(e,d.promoteSuccessString,d.promoteFailedString,d.promotePartialFailedString,t.map((e=>e.contact)));return new o.ActionType(a)})).catch((()=>(__LOG__(3)`models:groupMetadata:participantCollection:removeParticipants dropped`,new o.ActionType(u.default.t(174,{participantNames:f,_plural:t.length}),{actionText:u.default.t(201),actionHandler:()=>m(e,t,a)}))));return i.default.openToast(n.default.createElement(o.ActionToast,{id:a,initialAction:p,pendingAction:h})),s.then((()=>{}))}function g(e,t,a=(0,o.genId)()){var r=e.groupMetadata.participants;if(t.some((e=>!r.canDemote(e))))return Promise.reject(new l.ActionError);var s=(0,c.sendDemoteParticipants)(e.id,t.map((e=>e.id))),f=t.map((e=>e.contact.formattedShortName)).join(u.default.t(658)),p=new o.ActionType(u.default.t(169,{participantNames:f,_plural:t.length})),h=s.then((e=>{var a=d.formatResult(e,d.demoteSuccessString,d.demoteFailedString,d.demotePartialFailedString,t.map((e=>e.contact)));return new o.ActionType(a)})).catch((()=>(__LOG__(3)`models:groupMetadata:participantCollection:demoteParticipants dropped`,new o.ActionType(u.default.t(165,{participantNames:f,_plural:t.length}),{actionText:u.default.t(201),actionHandler:()=>g(e,t,a)}))));return i.default.openToast(n.default.createElement(o.ActionToast,{id:a,initialAction:p,pendingAction:h})),s.then((()=>{}))}},43104:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.removeGroupParticipants=function(e,t){return h(e,t,u).catch((e=>{__LOG__(3)`error sending removing group participants iq: ${e}`}))},t.addGroupParticipants=function(e,t){return h(e,t,c).catchType(i.ServerStatusCodeError,(e=>({status:e.statusCode})))},t.demoteGroupParticipants=function(e,t){return h(e,t,f).catch((e=>{__LOG__(3)`error sending demoting group participants iq: ${e}`}))},t.promoteGroupParticipants=function(e,t){return h(e,t,p).catch((e=>{__LOG__(3)`error sending promoting group participants iq: ${e}`}))};var s=r(a(81109)),n=a(24488),o=a(10378),i=a(66274),l=r(a(79112)),d=a(78209),u="remove",c="add",f="demote",p="promote";function h(e,t,a){var r,h=t.map((e=>(0,n.wap)("participant",{jid:(0,d.JID)(e)})));switch(a){case c:r=(0,n.wap)("add",null,h);break;case u:r=(0,n.wap)("remove",null,h);break;case f:r=(0,n.wap)("demote",null,h);break;case p:r=(0,n.wap)("promote",null,h);break;default:return Promise.reject(new Error(`invalid group operation ${a}`))}var m=(0,n.wap)("iq",{to:(0,d.GROUP_JID)(e),type:"set",xmlns:"w:g2",id:(0,n.generateId)()},r);return(0,o.sendIq)(m,function(e){return new l.default(`${e}GroupParticipantsReplyParser`,(t=>({id:t.attrString("id"),participants:t.child(e).mapChildren((e=>({wid:e.attrUserWid("jid"),error:e.hasAttr("error")?e.attrInt("error"):null})))})))}(a)).then((e=>{if(e.success){var{participants:t}=e.result,a={};return t.forEach((e=>{Object.assign(a,{[e.wid.toString()]:null!=e.error?e.error:200})})),(0,s.default)((0,s.default)({},a),{},{status:207,participants:t.map((e=>({[e.wid.toString()]:{code:null!=e.error&&e.error.toString()||"200"}})))})}return Promise.reject(new i.ServerStatusCodeError(e.errorCode,e.errorText))}))}},43825:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendAddParticipants=function(e,t){var a;if(s.default.supportsFeature(s.default.F.MD_BACKEND)){if(!(a=(0,o.addGroupParticipants)(e,t)))return Promise.reject(new Error("addParticipants: not supported when not build with MD_BACKEND"))}else a=n.default.addParticipants(e,t);return a},t.sendRemoveParticipants=function(e,t){var a;if(s.default.supportsFeature(s.default.F.MD_BACKEND)){if(!(a=(0,o.removeGroupParticipants)(e,t)))return Promise.reject(new Error("sendRemoveParticipants: not supported when not build with MD_BACKEND"))}else a=n.default.removeParticipants(e,t);return a},t.sendDemoteParticipants=function(e,t){var a;if(s.default.supportsFeature(s.default.F.MD_BACKEND)){if(!(a=(0,o.demoteGroupParticipants)(e,t)))return Promise.reject(new Error("sendDemoteParticipants: not supported when not build with MD_BACKEND"))}else a=n.default.demoteParticipants(e,t);return a},t.sendPromoteParticipants=function(e,t){var a;if(s.default.supportsFeature(s.default.F.MD_BACKEND)){if(!(a=(0,o.promoteGroupParticipants)(e,t)))return Promise.reject(new Error("sendPromoteParticipants: not supported when not build with MD_BACKEND"))}else a=n.default.promoteParticipants(e,t);return a};var s=r(a(60246)),n=r(a(7682)),o=a(43104)},22204:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoadType=t.EditType=void 0;var r=a(54302).Mirrored(["EDITING","PENDING","DONE","ERROR"]);t.EditType=r;var s=a(54302).Mirrored(["PENDING","DONE","ERROR"]);t.LoadType=s},74600:(e,t,a)=>{"use strict";var r=a(20862),s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({contact:e,editable:t,profilePicThumb:a,onClick:r,onOpenStatus:s,onLoad:S,hideStatusV3:P}){var[y,T]=E(window.innerWidth),[M,w]=E(null);C((()=>{function e(){T(window.innerWidth)}return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)}),[]);var k=y>1300?152:122,N=!(0,c.canSeeStatusV3OnContact)()||e.statusMute||P?null:m.default.get(e.id);function b(){N&&(i.default.openModalMedia(o.default.createElement(h.default,{removeTopDrawer:!1,statusV3:N}),{transition:"status-v3-modal"}),s&&s())}var D=null;M&&(D=o.default.createElement(_.default,{displayName:"ContextMenu",escapable:!0,popable:!0,requestDismiss:()=>{w(null)}},o.default.createElement(v.default,{contextMenu:M})));var I,O=null,R=l.default.noStatusBorder;null!=N&&(O=o.default.createElement(g.default,{statusV3:N,size:k+24,stroke:3,theme:g.RingTheme.BUSINESS_CONTACT_INFO}),R=l.default.hasStatusBorder);I=t&&null!=a?o.default.createElement(p.default,{profilePicThumb:a,size:k}):o.default.createElement(d.default,{id:e.id,size:k,loader:!0,onLoad:S,onClick:function(e){if(r)if(null!=N){e.stopPropagation(),e.preventDefault();var t=[o.default.createElement(u.default,{a8n:"mi-view-photo",key:"view-photo",action:()=>{r(e)}},f.default.t(1543)),o.default.createElement(u.default,{a8n:"mi-view-status",key:"view-status",action:b},f.default.t(1418))];e.persist(),w({menu:t,event:e})}else r(e)},quality:d.DETAIL_IMAGE_QUALITY.HIGH});return o.default.createElement(o.default.Fragment,null,o.default.createElement("div",{className:(0,n.default)(l.default.coverPhoto,{[l.default.isEditable]:t})}),o.default.createElement("div",{className:l.default.avatar},O,o.default.createElement("div",{className:R},I)),D)};var n=s(a(94184)),o=s(a(67294)),i=s(a(97420)),l=s(a(68862)),d=r(a(27890)),u=s(a(59474)),c=a(53615),f=s(a(66761)),p=s(a(8092)),h=s(a(53095)),m=s(a(23519)),g=r(a(784)),_=s(a(47469)),v=s(a(1869)),{useState:E,useEffect:C}=o.default},17236:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RawBusinessProfile",{enumerable:!0,get:function(){return r.RawBusinessProfile}}),Object.defineProperty(t,"BUSINESS_HOUR_MODES",{enumerable:!0,get:function(){return s.BUSINESS_HOUR_MODES}}),Object.defineProperty(t,"DAYS_OF_WEEK",{enumerable:!0,get:function(){return s.DAYS_OF_WEEK}});var r=a(85920),s=a(72203)},30449:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBusinessOpenState=function(e,t){var a,n;if(null==e.timezone)return{status:"unknown"};var o=t||new Date,d=new Date(o.toLocaleString("en-US",{timeZone:e.timezone})),u=(o.getTime()-d.getTime())/1e3/60,c=e.config[r.DAYS_OF_WEEK[o.getDay()]];if(!c)return{status:i.CLOSED_TODAY};switch(c.mode){case s.BUSINESS_HOUR_MODES.OPEN_24H:if(c)return{status:i.OPEN_24H};break;case s.BUSINESS_HOUR_MODES.APPOINTMENT_ONLY:if(c)return{status:i.OPEN_APPOINTMENT};break;case s.BUSINESS_HOUR_MODES.SPECIFIC_HOURS:var f=60*o.getHours()+o.getMinutes();if(1===(null===(a=c.hours)||void 0===a?void 0:a.length)){var p=c.hours[0][0],h=c.hours[0][1];return f>=p&&f<=h?{status:i.OPEN,openUntil:l(u+h)}:f<=p?{status:i.CLOSED,opensAt:l(u+p)}:{status:i.CLOSED}}if(2===(null===(n=c.hours)||void 0===n?void 0:n.length)){var m=c.hours[0][0],g=c.hours[0][1],_=c.hours[1][0],v=c.hours[1][1];return f>=m&&f<=g?{status:i.OPEN,openUntil:l(u+g),additionalOpen:l(u+_),additionalClose:l(u+v)}:f<m?{status:i.CLOSED,opensAt:l(u+m),additionalOpen:l(u+_),additionalClose:l(u+v)}:f>=_&&f<=v?{status:i.OPEN,openUntil:l(u+v)}:f<_?{status:i.CLOSED,opensAt:l(u+_)}:{status:i.CLOSED}}}return{status:"unknown"}},Object.defineProperty(t,"minutesToTime",{enumerable:!0,get:function(){return n.minutesToTime}}),Object.defineProperty(t,"timeStringToMinutes",{enumerable:!0,get:function(){return n.timeStringToMinutes}}),t.BUSINESS_OPEN_STATUS=t.convertToRawBusinessProfile=t.isValidBusinessHours=t.isValidTime=void 0;var r=a(72203),s=a(17236),n=a(46822),o=e=>void 0!==(0,n.timeStringToMinutes)(e);t.isValidTime=o;t.isValidBusinessHours=(e,t)=>{if(e===s.BUSINESS_HOUR_MODES.SPECIFIC_HOURS)for(var a in t){var r=t[a],{closed:n,hours:i}=r;if(!n)for(var[l,d]of i)if(!o(l)||!o(d))return!1}return!0};t.convertToRawBusinessProfile=({mode:e,dayValues:t,note:a,timezone:r})=>{var o={};for(var i in t){var l=t[i],{closed:d,hours:u}=l;if(!d){var c={mode:e};e===s.BUSINESS_HOUR_MODES.SPECIFIC_HOURS&&(c.hours=u.map((([e,t])=>[(0,n.timeStringToMinutes)(e)||0,(0,n.timeStringToMinutes)(t)||0]))),o[i]=c}}return{businessHours:{config:o,note:a,timezone:r||Intl.DateTimeFormat().resolvedOptions().timeZone}}};var i={OPEN:"open",CLOSED:"closed",OPEN_TODAY:"open_today",CLOSED_TODAY:"closed_today",OPEN_APPOINTMENT:"open_appointment",OPEN_24H:"open_24h",UNKNOWN:"unknown"};function l(e){var t=new Date,a=Math.floor(e/60);return t.setHours(a),t.setMinutes(e%60),t.setSeconds(0),t}t.BUSINESS_OPEN_STATUS=i},85920:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"EditType",{enumerable:!0,get:function(){return r.EditType}}),Object.defineProperty(t,"LoadType",{enumerable:!0,get:function(){return r.LoadType}});var r=a(22204)},84816:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return n.default.createElement(i.default,{name:"shopping-cart",className:(0,s.default)(o.default.cartIcon,{[o.default.inheritColor]:"inherit-color"===e.theme})})};var s=r(a(94184)),n=r(a(67294)),o=r(a(91378)),i=r(a(62745))},75715:(e,t,a)=>{"use strict";var r=a(20862),s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var[a,r]=(0,i.useState)(null),s=()=>{r(null)};return(0,i.useEffect)((()=>{if(s(),e){var a=new l.default,i=a.signal;return(0,o.default)((function*(){try{var a=yield(0,v.default)((0,p.default)(e),i),s=null==a?void 0:a.data;if(!s)return;if(r(s),!f.default.supportsFeature(f.default.F.HIGH_QUALITY_LINK_PREVIEWS)||!C.default.webUploadLinkThumbMmsEnabled||!s.thumbnailHQ)return;var o=yield function(){return P.apply(this,arguments)}(s.thumbnailHQ,i,t);if(!o)return;r((0,n.default)((0,n.default)({},s),o))}catch(e){if(e.name===d.ABORT_ERROR)return;__LOG__(2)`useLinkPreview: error`}}))(),()=>{a.signal.aborted||a.abort()}}}),[e,t]),{linkPreview:a,clearLinkPreview:s}},t.findFirstWebLink=void 0;var n=s(a(81109)),o=s(a(48926)),i=a(67294),l=s(a(34233)),d=a(63229),u=a(98658),c=s(a(46274)),f=s(a(60246)),p=s(a(65976)),h=r(a(31667)),m=a(2893),g=s(a(6648)),_=s(a(97962)),v=s(a(39122)),E=s(a(18509)),C=s(a(86981)),S=s(a(63362));function P(){return(P=(0,o.default)((function*(e,t,a){try{var r=yield(0,v.default)(_.default.createFromBase64Jpeg(e),t),s=yield(0,S.default)({thumbnail:r,mediaType:g.default.THUMBNAIL_LINK,mediaKeyInfo:(0,E.default)(),uploadOrigin:(0,m.getUploadOriginForChat)(a),forwardedFromWeb:!1,signal:t,timeout:c.default.MMS_THUMBNAIL_UPLOAD_TIMEOUT}),n=s.mediaEntry;if(!n)return;return{mediaKey:n.mediaKey,mediaKeyTimestamp:n.mediaKeyTimestamp,thumbnailDirectPath:n.directPath,thumbnailSha256:s.filehash,thumbnailEncSha256:n.encFilehash}}catch(e){if(e.name===d.ABORT_ERROR)return;__LOG__(2)`useLinkPreview.uploadHQPreview: error`}}))).apply(this,arguments)}t.findFirstWebLink=e=>{var t=(0,u.removeCodeBlocks)(e),a=h.findLinks(t,!0)[0];if(a)return a.url}},5365:(e,t,a)=>{"use strict";var r=a(20862),s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{images:t,renderFallback:a,fallbackMediaData:r,fetching:s,onClick:i}=e,g=(0,o.useRef)(null),_=(0,o.useRef)(null),v=(0,o.useRef)(null),E=(0,o.useRef)(null),C=(0,o.useRef)(null),[S,P]=(0,o.useState)(null),[y,T]=(0,o.useState)(t.filter((e=>e.mediaData.mediaStage===c.MEDIA_DATA_STAGE.RESOLVED)).length),[M,w]=(0,o.useState)(!1),k=y===t.length,N=()=>T((e=>e+1));(0,o.useEffect)((()=>{if(!k&&!a){var e,t=_.current;if(!t)return;null===(e=v.current)||void 0===e||e.cancel(),v.current=(v.current||Promise.resolve()).then((()=>(0,m.default)(t,{opacity:[1,0]},{delay:75,duration:50}))).cancellable().then((()=>{w(!0)})).catchType(Promise.CancellationError,(()=>{(0,m.default)(t,"stop",!0)})).finally((()=>{v.current=null}))}return()=>{var e;null===(e=v.current)||void 0===e||e.cancel()}}),[k,a]);var b,D,I,O=()=>{var e;return(null===(e=g.current)||void 0===e?void 0:e.children)?g.current.scrollWidth===g.current.offsetWidth?null:0===g.current.scrollLeft?"next":g.current.scrollWidth-1<=g.current.scrollLeft+g.current.offsetWidth?"prev":"both":null};if((0,o.useEffect)((()=>{P(O())}),[k]),a&&0===t.length)return o.default.createElement("div",{className:d.default.carousel,dir:"ltr"},o.default.createElement("div",{className:(0,n.default)(d.default.contentContainer,d.default.slidesContainer)},r&&o.default.createElement(u.default,{altText:"",mediaData:r,renderFallback:!0,singleSlide:!0})));var R=()=>{E.current=null;var e=O();S!==e&&P(e)};if(t.length>1){var x=()=>{var e=g.current;if(null!=e&&("prev"===S||"both"===S)){for(var t=0,a=e.scrollLeft+Math.floor(e.offsetWidth/2),r=e.lastElementChild;r instanceof HTMLElement&&0===t;){var s=r.offsetLeft+Math.floor(r.offsetWidth/2);s<a&&(t=s-a),r=r.previousElementSibling}0!==t&&e.scrollBy({left:t,behavior:"smooth"})}},A=()=>{var e=g.current;if(null!=e&&("next"===S||"both"===S)){for(var t=0,a=e.scrollLeft+Math.floor(e.offsetWidth/2),r=e.firstElementChild;r instanceof HTMLElement&&0===t;){var s=r.offsetLeft+Math.floor(r.offsetWidth/2);a<s&&(t=s-a),r=r.nextElementSibling}0!==t&&e.scrollBy({left:t,behavior:"smooth"})}},L=()=>{C.current=null;var e=O();S!==e&&P(e)};I=()=>{null==C.current&&(C.current=requestAnimationFrame(L))},k&&null!=S&&(b=o.default.createElement(l.default,{type:l.ButtonType.Prev,onClick:x,onKeyDown:x,disabled:"prev"!==S&&"both"!==S,theme:p.RoundTheme.Small,overMedia:!0}),D=o.default.createElement(l.default,{type:l.ButtonType.Next,onClick:A,onKeyDown:A,disabled:"next"!==S&&"both"!==S,theme:p.RoundTheme.Small,overMedia:!0}))}var V=1===t.length,F=t.map(((e,t)=>o.default.createElement(u.default,{key:t,altText:"",image:e,singleSlide:V,mediaData:e.mediaData,onClick:i,onLoad:N}))),U=k?null:o.default.createElement("div",{className:(0,n.default)(d.default.contentContainer,d.default.spinnerContainer)},o.default.createElement("div",{className:d.default.spinner,ref:_},o.default.createElement(h.default,{color:"default",size:50,stroke:4}))),B=(0,n.default)(d.default.carousel,{[d.default.loaded]:!s&&k,[d.default.fadeIn]:M});return o.default.createElement("div",{className:B,dir:"ltr"},U,o.default.createElement("div",{ref:g,className:(0,n.default)(d.default.contentContainer,d.default.slidesContainer),onScroll:I},F),b,D,o.default.createElement(f.default,{onResize:()=>{null==E.current&&(E.current=requestAnimationFrame(R))}}))};var n=s(a(94184)),o=r(a(67294)),i=s(a(30523)),l=r(a(82921)),d=s(a(63696)),u=s(a(92113)),c=a(46072),f=s(a(58505)),p=a(92120),h=s(a(17363)),m=s(a(36708));i.default.polyfill()},92113:(e,t,a)=>{"use strict";var r=a(95318),s=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(67294)),o=r(a(89882)),i=a(46072),l=r(a(53233)),d=({mediaData:e,altText:t,image:a,singleSlide:r,renderFallback:s,onClick:d,onLoad:u,forwardRef:c})=>{var{fullHeight:f,fullWidth:p,mediaStage:h,renderableUrl:m}=(0,l.default)(e,["fullHeight","fullWidth","mediaStage","renderableUrl"]),g=(0,n.useRef)(null),_=(0,n.useRef)(h===i.MEDIA_DATA_STAGE.RESOLVED);(0,n.useEffect)((()=>{!u||_.current||s||h!==i.MEDIA_DATA_STAGE.RESOLVED||(u(),_.current=!0)}),[u,s,h]);var v=p&&f?p/f:.8;v<.8&&(v=.8),v>1.91&&(v=1.91),v>1&&!r&&(v=1);var E={width:r&&v<1?100*v+"%":1!==v||r?null:"100%"},C={paddingTop:`${Math.floor(100/v)}%`},S={cursor:""+(d?"pointer":"auto")};return n.default.createElement("div",{ref:c?e=>c(e):null,className:o.default.slide,style:E},n.default.createElement("div",{className:o.default.slideInnerContainer,style:C},n.default.createElement("img",{ref:g,alt:t,src:m,className:o.default.image,style:S,draggable:"false",onClick:()=>{d&&g.current&&a&&d(g.current,a)}})))};t.default=d},39950:(e,t,a)=>{"use strict";var r=a(20862),s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.Gallery=D,t.default=void 0;var n=s(a(23493)),o=s(a(94184)),i=r(a(67294)),l=s(a(62067)),d=a(6653),u=s(a(97420)),c=s(a(46274)),f=s(a(25508)),p=a(4404),h=s(a(60246)),m=s(a(66761)),g=s(a(48878)),_=s(a(23223)),v=s(a(86281)),E=s(a(82536)),C=s(a(63284)),S=a(46072),P=s(a(86981)),y=s(a(17363)),T=s(a(82286)),M=a(79665),w=s(a(62745));class k extends i.Component{constructor(...e){super(...e),this.onScroll=e=>{this._handleScroll(e.currentTarget)},this._handleScroll=(0,n.default)((e=>{var t=this.props.mediaMsgs;t.hasMediaBefore&&e.scrollTop+c.default.SCROLL_FUDGE>e.scrollHeight-e.clientHeight&&this._scheduleMediaQuery(t.head())}),100)}componentDidMount(){this.props.mediaMsgs.hasMediaBefore&&this._scheduleMediaQuery(),this.props.listeners.add(this.props.mediaMsgs,"add",(()=>{this.forceUpdate()})),this.props.listeners.add(this.props.mediaMsgs,"remove",(e=>{var t=this.props.selectedMessages;t&&t.isSelected(e)&&t.setVal(e,!1),this.forceUpdate()})),this.props.listeners.add(this.props.mediaMsgs,"reset",(()=>{this.props.selectedMessages&&this.props.selectedMessages.unsetAll(),this.forceUpdate()})),this.props.listeners.add(this.props.mediaMsgs,"query_media_before",(()=>{this.forceUpdate()}))}componentWillUnmount(){this._handleScroll.cancel()}_scheduleMediaQuery(e){var t=this.props.mediaMsgs;t.hasMediaBefore&&this.props.listeners.uiIdle((()=>{t.queryMedia({chat:(0,M.unproxy)(this.props.chat),msg:e})}))}render(){var e,{fullCollection:t,selectedMessages:a,chat:r,mediaMsgs:s,selectable:n,onMessageSelect:o}=this.props,l=s.map(((e,r)=>{var l;return!t&&r>=s.length-6&&r<=s.length-4&&(l="hideableSecondRow"),i.default.createElement(b,{msg:e,hoverEvent:t,selectable:n,selectedMessages:a,onMessageSelect:o,theme:l,key:e.id.toString()})}));l.reverse(),t||(l=l.slice(0,6));var u=!1;return h.default.supportsFeature(h.default.F.MD_BACKEND)&&r.endOfHistoryTransferType===d.ConversationEndOfHistoryTransferModelPropType.COMPLETE_BUT_MORE_MESSAGES_REMAIN_ON_PRIMARY&&(u=!0,t?e=m.default.t(585):0===s.length&&0===r.docCount&&0===r.linkCount&&0===r.productCount&&(e=m.default.t(583))),i.default.createElement(i.default.Fragment,null,i.default.createElement(D,{medias:l,mediaCollection:s,fullCollection:t,chat:(0,M.unproxy)(r),onScroll:this.onScroll}),u?i.default.createElement(f.default,{icon:i.default.createElement(w.default,{name:"content-chat"}),theme:"list",secondary:m.default.t(581)},e):null)}}k.CONCERNS={chat:["linkCount","docCount","productCount","endOfHistoryTransferType"]},k.displayName="MediaGallery";class N extends i.Component{constructor(){super(...arguments),this.setRefImg=e=>{this.img=e},this._handleSelectChange=e=>{this.state.selected!==e&&this.setState({selected:e})},this.onClick=e=>{var{msg:t,selectable:a,onMessageSelect:r}=this.props,s=t.mediaData;if(a&&r)r(t,!this.state.selected);else if(s.mediaStage!==S.MEDIA_DATA_STAGE.ERROR_MISSING){var n;e&&e.stopPropagation();var o=t.id;if(s.isGif||s.type===_.default.TYPE.IMAGE){var l=this.img;n=e=>o.equals(e)&&l?l:null}u.default.mediaViewerModal({msg:(0,M.unproxy)(t),getZoomNode:n})}else u.default.openModal(i.default.createElement(E.default,{msg:t}))},this.onDragStart=e=>{e.nativeEvent.dataTransfer.setData("text/uri-list",this.props.msg.mediaData.renderableUrl)};var{msg:e,selectedMessages:t}=this.props;this.state={selected:!(!t||!t.isSelected(e))}}componentDidMount(){this.props.selectedMessages&&this.props.listeners.add(this.props.selectedMessages,this.props.msg.id.toString(),this._handleSelectChange)}render(){var{msg:e,hoverEvent:t,selectable:a,onMessageSelect:r,theme:s,className:n}=this.props,l=e.mediaData,d=l.type===_.default.TYPE.IMAGE&&l.renderableUrl?this.onDragStart:null,u=(0,o.default)(n);return i.default.createElement(C.default,{classes:u,onClick:this.onClick,hoverEvent:t,selectable:a,selected:this.state.selected,onMessageSelect:r,onDragStart:d,msg:e,theme:s,imgRef:this.setRefImg})}}N.displayName="MediaCanvas";var b=(0,g.default)(N);function D(e){var{mediaCollection:t,fullCollection:a,chat:r,onScroll:s,justify:n}=e,d=e.medias||e.productMedias;if(!d)return null;var u,c,f,h,g=(0,o.default)(v.default.container,{[v.default.drawer]:a,[v.default.galleryEmpty]:0===t.length,[v.default.justifySpaceBetween]:"space-between"===n}),_=[...d];if(t.queryMediaBefore&&(a||_.length<6)){var E=(0,o.default)(v.default.more,v.default.canvasComponent,{[v.default.canvasSecondRow]:!a&&_.length>=3,[v.default.canvasFirst]:0===t.length});_.push(i.default.createElement("div",{className:E,key:"spinner"},i.default.createElement(y.default,{stroke:6,size:24})))}if(0===t.length){if(a)return t.queryMediaBefore?i.default.createElement("div",{className:(0,o.default)(v.default.drawer,v.default.drawerBody)},i.default.createElement(p.Loading,null)):i.default.createElement(p.MediaMsgs,null);t.queryMediaBefore||t.hasMediaBefore||(g=(0,o.default)(g,v.default.galleryEmpty),_=[(u=Math.max(r?r.docCount:0,0),c=Math.max(r?r.linkCount:0,0),f=Math.max(r?r.productCount:0,0),h=[],null!=u&&u>0&&h.push(m.default.t(626,{count:u,_plural:u})),null!=c&&c>0&&h.push(m.default.t(924,{count:c,_plural:c})),P.default.productMediaAttachments&&null!=f&&f>0&&h.push(m.default.t(1276,{count:f,_plural:f})),h.length>0?h.join(m.default.t(658)):P.default.productMediaAttachments?m.default.t(1181):m.default.t(1180))])}else for(var C=0;C<6;C++)_.push(i.default.createElement("div",{className:v.default.canvasEmpty,key:"empty"+C}));return i.default.createElement("div",{onScroll:s,"data-a8n":l.default.key("media-gallery"),className:g},_)}var I=(0,g.default)((0,T.default)(k,k.CONCERNS));t.default=I},63284:(e,t,a)=>{"use strict";var r=a(20862),s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.hasThumbnail=E,t.default=t.MediaThumb=void 0;var n=s(a(94184)),o=r(a(67294)),i=s(a(8906)),l=s(a(56656)),d=s(a(48878)),u=s(a(23223)),c=s(a(20720)),f=s(a(18263)),p=s(a(5148)),h=s(a(62745)),m=s(a(31492)),g=a(46072);class _ extends o.Component{constructor(...e){super(...e),this.state={hover:!1},this._setRefImg=e=>{this._img=e},this._setRefContainer=e=>{this._container=e},this._onSelectClick=()=>{this.props.onMessageSelect&&this.props.onMessageSelect(this.props.msg,!this.props.selected)},this._onMouseOver=()=>{this.state.hover||this.setState({hover:!0})},this._onMouseEnter=()=>{this.state.hover||this.setState({hover:!0})},this._onMouseLeave=()=>{this.state.hover&&this.setState({hover:!1})},this.maybeDownloadMediaMD=()=>{var{msg:e}=this.props;e.mediaData.preview||e.mediaData.fullPreviewData||e.mediaData.type!==u.default.TYPE.IMAGE&&e.mediaData.type!==u.default.TYPE.VIDEO||e.downloadMedia({downloadEvenIfExpensive:!1,isUserInitiated:!1,rmrReason:p.default.WEBC_RMR_REASON_CODE.MEDIA_VIEWER})},this._renderImgNode=(e,t,a,r)=>{var s=a?o.default.createElement("div",{className:c.default.shade}):null,n=t?{backgroundImage:`url(${t})`}:null;return o.default.createElement("div",{className:e,style:n,onClick:this.props.onClick,ref:this._setRefImg,onDragStart:this.props.onDragStart,draggable:null!=this.props.onDragStart||null},r,s)},this._downloadMedia=()=>{this.props.msg.downloadMedia({downloadEvenIfExpensive:!1,isUserInitiated:!1,rmrReason:p.default.WEBC_RMR_REASON_CODE.MEDIA_VIEWER})},this._renderImg=()=>{var e,{msg:{mediaData:t},preferPreview:a}=this.props;switch(t.type){case u.default.TYPE.AUDIO:return this._renderImgNode(`${c.default.mediaCanvas} attach-media-audio-thumb`);case u.default.TYPE.VIDEO:var r=(0,n.default)(c.default.mediaCanvas,{"media-video-thumb":t.isGif&&!t.preview}),s=null===(e=t.preview)||void 0===e?void 0:e.url();return this._renderImgNode(r,s,!0);case u.default.TYPE.IMAGE:var i=e=>{var a,r=null!=e?o.default.createElement("div",{className:c.default.mediaCanvas,style:{backgroundImage:`url(${e})`}}):null;return this._renderImgNode(c.default.mediaCanvas,null===(a=t.preview)||void 0===a?void 0:a.url(),this.props.msg.star,r)},l=()=>t.preview?i(null):this._renderImgNode(c.default.mediaCanvas,null,this.props.msg.star);return a?l():o.default.createElement("div",{className:c.default.mediaCanvas},o.default.createElement(f.default,{mediaData:t,placeholderRenderer:l,renderProgressively:!0,downloadMedia:this._downloadMedia},i));default:return this._renderImgNode(null,null,this.props.msg.star)}},this._renderIcon=()=>{var e,{mediaData:t}=this.props.msg;if(!t)return null;switch(t.type){case u.default.TYPE.AUDIO:e="msg-audio";break;case u.default.TYPE.VIDEO:e=t.isGif?"msg-gif":"msg-video"}return null==e?null:o.default.createElement("div",{className:c.default.iconType},o.default.createElement(h.default,{name:e}))},this._renderDuration=()=>{var{mediaData:e}=this.props.msg;switch(e.type){case u.default.TYPE.AUDIO:return o.default.createElement(v,{duration:e.duration});case u.default.TYPE.VIDEO:return e.isGif?null:o.default.createElement(v,{duration:e.duration});default:return null}}}componentDidMount(){this.props.listeners.add(this.props.msg.mediaData,"change:preview",(()=>{this.forceUpdate()})),this.props.listeners.add(this.props.msg,"change:star",(()=>{this.forceUpdate()})),this.props.imgRef&&this.props.imgRef(this._img),this.props.containerRef&&this.props.containerRef(this._container),this.maybeDownloadMediaMD(),this.props.listeners.add(this.props.msg.mediaData,"change:mediaStage",(()=>{this.props.msg.mediaData.mediaStage===g.MEDIA_DATA_STAGE.RESOLVED&&this.forceUpdate()}))}componentDidUpdate(){this.props.imgRef&&this.props.imgRef(this._img),this.props.containerRef&&this.props.containerRef(this._container)}componentWillUnmount(){this.props.imgRef&&this.props.imgRef(null),this.props.containerRef&&this.props.containerRef(null)}render(){var e,{msg:t,selectable:a,theme:r,active:s}=this.props,l=this.props.selected||!1;(a||this.state.hover)&&(e=o.default.createElement("div",{className:c.default.mediaSelect},o.default.createElement("div",{className:c.default.shadeTop,onClick:this.props.onClick}),o.default.createElement(i.default,{onChange:this._onSelectClick,hover:this.state.hover,checked:l})));var d=null,u=null,f=null;this.props.hoverEvent&&(d=this._onMouseOver,u=this._onMouseEnter,f=this._onMouseLeave);var p=(0,n.default)(this.props.classes,c.default.canvasComponent,{[c.default.canvasSelected]:l,[c.default.canvasSecondRow]:"hideableSecondRow"===r,[c.default.viewerFlow]:"viewerFlow"===r||"viewerFlowTransparent"===r,[c.default.viewerFlowTransparent]:"viewerFlowTransparent"===r,[c.default.active]:s}),m=t.star?o.default.createElement("div",{className:c.default.iconStar},o.default.createElement(h.default,{name:"star"})):null;return!0,E(t.mediaData)?o.default.createElement("div",{ref:this._setRefContainer,className:p,onMouseOver:d,onMouseEnter:u,onMouseLeave:f},e,o.default.createElement("div",{className:c.default.canvasBody},this._renderIcon(),this._renderDuration(),m),this._renderImg()):null}}function v({duration:e}){var t=l.default.durationStr(e);return t?o.default.createElement("span",{className:c.default.mediaCanvasDuration},t):null}function E(e){switch(e.type){case u.default.TYPE.VIDEO:case u.default.TYPE.IMAGE:if(e.preview||e.fullPreviewData||e.mediaStage===g.MEDIA_DATA_STAGE.RESOLVED)return!0;if(m.default.has(e.filehash)){try{m.default.getOrCreateURL(e.filehash)}catch(e){return!1}return!0}return!1;default:return!0}}t.MediaThumb=_,_.displayName="MediaThumb";var C=(0,d.default)(_);t.default=C},51432:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return n.default.createElement("div",{className:(0,s.default)(o.default.icon,{[o.default.transparent]:e.theme&&"transparent"===e.theme,[o.default.compact]:e.theme&&"compact"===e.theme,[o.default.disabled]:e.disabled})},e.children)};var s=r(a(94184)),n=r(a(67294)),o=r(a(34435))},8235:(e,t,a)=>{"use strict";var r=a(20862),s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(23279)),o=r(a(67294)),i=s(a(97420)),l=s(a(46274)),d=a(56726),u=s(a(48878)),c=s(a(82286)),f=s(a(44843)),p=r(a(11774)),h=(0,n.default)(((e,t)=>{(0,d.setVideoVolumeSettings)(e,t)}),500);class m extends o.PureComponent{constructor(...e){super(...e),this.checkIteration=0,this.checkForSuccessInterval=0,this.hasCalledPlaying=!1,this.mediaBlobWasDownloadedBeforeMount=Boolean(this.props.mediaData.mediaBlob),this.refVideo=(0,o.createRef)(),this.onVolumeChange=()=>{var e=this.refVideo&&this.refVideo.current;e&&h(e.volume,e.muted)},this.startCheckForSuccess=()=>{this.checkIteration=0,this.checkForSuccessInterval||(this.checkForSuccessInterval=setInterval(this.checkForSuccess,250))},this.clearCheckForSuccess=()=>{this.checkForSuccessInterval&&(clearInterval(this.checkForSuccessInterval),this.checkIteration=0,this.checkForSuccessInterval=0)},this.checkForSuccess=()=>{if(p.default.state===p.STATE.CONNECTED){this.checkIteration++;var e=this.refVideo&&this.refVideo.current,t=e&&e.buffered;t&&t.length&&t.end(0)>0?this.onPlaying():this.checkIteration>240&&this.clearCheckForSuccess()}},this.onPlayerError=()=>{this.clearCheckForSuccess()},this.onOtherPlaying=e=>{e!==this&&this.pause()},this.pause=()=>{var e=this.refVideo&&this.refVideo.current;e&&(e.paused||e.pause())},this.onPlaying=()=>{this.clearCheckForSuccess(),i.default.mediaPlaying(this)},this.onLoadedMetadata=e=>{this.setStartTime();var{onLoadedMetadata:t}=this.props;t&&t(e)},this.setStartTime=()=>{var e=this.refVideo&&this.refVideo.current;null!=this.props.startTime&&0!==this.props.startTime&&e&&(e.currentTime=this.props.startTime)},this.onContextMenu=e=>{this.props.disableContextMenu&&e.preventDefault()}}componentDidMount(){this.props.listeners.add(i.default,"mediaPlaying",this.onOtherPlaying),this.props.listeners.add(i.default,"pttRecording",this.pause),this._updateVideoUserPrefs(),this.props.refVideo&&this.props.refVideo(this.refVideo)}componentWillUnmount(){h.flush(),this.clearCheckForSuccess(),this.pause()}componentDidUpdate(e){this._updateVideoUserPrefs(),e.startTime!==this.props.startTime&&this.setStartTime(),this.props.refVideo&&this.props.refVideo(this.refVideo)}_updateVideoUserPrefs(){var e=this.refVideo&&this.refVideo.current;if(e){var t=(0,d.getVideoVolumeSettings)();t&&("number"==typeof t.volume&&(e.volume=t.volume),"boolean"==typeof t.muted&&(e.muted=t.muted)),_()&&this.props.autoPlay&&this.startCheckForSuccess()}}render(){var e,t=this.props,{mediaData:a}=t,r=a.mediaBlob,s=a.streamable&&a.isStreamable();if(!this.mediaBlobWasDownloadedBeforeMount&&s||!r){if(!a.streamable||!a.isStreamable())return null;e=`${l.default.VIDEO_STREAM_URL}?key=${this.props.msg.id.toString()}`}else e=r.url();var n=_()&&!t.autoPlay?this.startCheckForSuccess:void 0;return o.default.createElement("video",{ref:this.refVideo,src:e,poster:t.poster,className:t.className,controls:t.controls,autoPlay:t.autoPlay,onClick:t.onClick,onDoubleClick:t.onDoubleClick,onVolumeChange:this.onVolumeChange,onLoadedMetadata:this.onLoadedMetadata,onPlay:n,onPlaying:this.onPlaying,onError:this.clearCheckForSuccess,onContextMenu:this.onContextMenu},t.children)}}m.CONCERNS={msg:["id"],mediaData:["mediaBlob","streamable"]},m.displayName="VideoTag";var g=(0,u.default)((0,c.default)(m,m.CONCERNS));function _(){return f.default.isGecko||f.default.isSafari}t.default=g},53095:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(67294)),n=r(a(21681)),o=r(a(77389));class i extends n.default{constructor(...e){super(...e),this.closeStatusViewer=()=>{this.end()}}componentDidMount(){this.push(s.default.createElement(o.default,{initialStatusV3:this.props.statusV3,quotedMsgKey:this.props.msgKey,closeStatusViewer:this.closeStatusViewer,onMsgNotFound:this.props.onMsgNotFound}),"none")}}t.default=i},51051:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{catalog:t,onSend:a}=e,r=(0,l.createCatalogLink)(t.id.user),d=t.id.equals((0,n.getMaybeMeUser)())?`${o.default.t(1245)} ${r}`:r;return s.default.createElement(i.default,{text:d,pushTransition:"none",popTransition:"none",onSend:a})};var s=r(a(67294)),n=a(56726),o=r(a(66761)),i=r(a(34751)),l=a(42473)},87443:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{product:t,onSend:a}=e,r=(0,l.createProductLink)(t.catalogWid.user,t.id.toString()),d=t.catalogWid.equals((0,n.getMaybeMeUser)())?`${o.default.t(1273)} ${r}`:r;return s.default.createElement(i.default,{text:d,pushTransition:"none",popTransition:"none",onSend:a})};var s=r(a(67294)),n=a(56726),o=r(a(66761)),i=r(a(34751)),l=a(42473)},34751:(e,t,a)=>{"use strict";var r=a(20862),s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(48926)),o=s(a(67294)),i=a(87577),l=a(65627),d=s(a(97420)),u=s(a(46274)),c=s(a(21681)),f=s(a(66761)),p=r(a(30399)),h=a(49993),m=s(a(86981)),g=s(a(93154));class _ extends c.default{constructor(...e){var t;super(...e),t=this,this._selected=[],this._getSelected=()=>this._selected,this._handleSelectionChange=(e,t,a)=>{this._selected=a},this._handleForwardConfirmed=e=>{this._send(e)},this._handleCancel=()=>{this.end()},this._send=function(){var e=(0,n.default)((function*(e){var{text:a,title:r,onSend:s}=t.props;if(1===e.length){var n=e[0];yield t._pasteText(n,a),t.end(),window.innerWidth<=u.default.LAYOUT_2COLUMNS_MAX_WIDTH&&d.default.closeDrawerRight()}else t.push(o.default.createElement(g.default,{defaultText:a,title:r||f.default.t(1080),onSend:(a,r)=>t._handleSend(e,a,r),onBack:t._handleBack}));s&&s()}));return function(){return e.apply(this,arguments)}}(),this._handleSend=(e,t,a)=>{this._sendText(e,t,a),this.end()},this._handleBack=()=>{this.pop()},this._pasteText=function(){var e=(0,n.default)((function*(e,a){yield t._ensureContactUnblocked(e),e.active?d.default.pasteChatTextInput(e,a):(e.setComposeContents({text:a}),d.default.openChatFromUnread(e).then((t=>{t&&d.default.focusChatTextInput(e)})))}));return function(){return e.apply(this,arguments)}}(),this._sendText=(e,a,r)=>{e.forEach(function(){var e=(0,n.default)((function*(e){yield t._ensureContactUnblocked(e),d.default.once("ui_idle",(()=>{(0,h.sendTextMsgToChat)(e,a,{linkPreview:r})}))}));return function(){return e.apply(this,arguments)}}())},this._ensureContactUnblocked=function(){var e=(0,n.default)((function*(e){e.isUser&&e.contact.isBlocked()&&(yield(0,i.unblockContact)(e.contact))}));return function(){return e.apply(this,arguments)}}()}componentDidMount(){this.push(o.default.createElement(p.default,{title:this.props.title||f.default.t(1080),listType:p.ListType.CHAT_SELECT_MODAL,getInitialItems:this._getSelected,maxItems:m.default.multicastLimitGlobal,onConfirm:this._handleForwardConfirmed,onCancel:this._handleCancel,onSelectionChanged:this._handleSelectionChange,singleSelectionFooterType:l.FooterType.NEXT,multipleSelectionFooterType:l.FooterType.NEXT}))}}t.default=_},44216:(e,t,a)=>{"use strict";var r=a(20862),s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(94184)),o=r(a(67294)),i=a(53615),l=s(a(18310)),d=s(a(28113));class u extends o.PureComponent{constructor(...e){super(...e),this._renderLabel=()=>{var{labels:e,theme:t}=this.props;if(e)return e.map(((e,a)=>o.default.createElement("div",{key:a,className:(0,n.default)(l.default.labelRow,{[l.default.standaloneLabelRow]:"standalone"===t})},o.default.createElement(d.default,{labels:[e],showName:!0}))))}}render(){var{labels:e,theme:t}=this.props;return e&&(0,i.canDisplayLabel)()?o.default.createElement("div",{className:(0,n.default)(l.default.labelContainer,{[l.default.standaloneLabelContainer]:"standalone"===t})},this._renderLabel()):null}}u.displayName="InfoDrawerLabelWell";var c=u;t.default=c},73636:(e,t,a)=>{"use strict";var r=a(95318),s=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(67294)),o=r(a(62067)),i=r(a(39935)),l=r(a(73132)),d=r(a(3395)),u=r(a(34727)),c=s(a(85002)),f=r(a(66761)),p=a(2633),h=a(45739),m=r(a(53233)),g=(0,n.forwardRef)(((e,t)=>{var{settings:a,onClose:r}=e,{archive:s}=(0,m.default)(a,["archive"]),g=!s.classic;return n.default.createElement(d.default,{ref:t},n.default.createElement(c.default,{title:f.default.t(235),type:c.DRAWER_HEADER_TYPE.LARGE,onBack:r}),n.default.createElement(u.default,null,n.default.createElement("div",{className:i.default.section},n.default.createElement("div",{"data-a8n":o.default.key("auto-unarchive-setting"),className:i.default.control},n.default.createElement(l.default,{onChange:()=>{var e=!s.classic;(0,p.setArchiveClassicSetting)(e)},checked:g})),n.default.createElement("div",{"data-a8n":o.default.key("auto-unarchive-setting-text")},f.default.t(255),n.default.createElement(h.TextDiv,{theme:"muted"},f.default.t(254))))))}));t.default=g},42699:(e,t,a)=>{"use strict";var r=a(20862),s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({elementId:e,onClick:t}){return document.queryCommandSupported("copy")?n.default.createElement(d.default,{a8nText:"li-copy-link",icon:n.default.createElement(c.default,{name:"copy",className:i.default.icon}),onClick:()=>function(e,t){(0,l.default)(e)?o.default.openToast(n.default.createElement(f.default,{msg:u.default.t(922),id:(0,f.genId)()})):o.default.openToast(n.default.createElement(f.default,{msg:u.default.t(921),id:(0,f.genId)()}));null!=t&&t()}(e,t)},u.default.t(593)):null};var n=s(a(67294)),o=s(a(97420)),i=s(a(16115)),l=s(a(38923)),d=s(a(61376)),u=s(a(66761)),c=s(a(62745)),f=r(a(9931))},61376:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{children:t,onClick:a,icon:r,className:c,color:f,theme:p}=e,[h,m]=(0,u.default)(a),g=null!=r?o.default.createElement("div",{className:(0,n.default)(l.default.icon,{[l.default.danger]:"danger"===f,[l.default.success]:"success"===f})},r):null,_=(0,n.default)(l.default.container,c,{[l.default.containerNoIcon]:!r,[l.default.containerListAligned]:"list-aligned"===p}),v="string"==typeof t?t:null;return o.default.createElement("div",(0,s.default)({},m,{className:_,"data-a8n":i.default.key(e.a8nText),"data-ignore-capture":"any",ref:h,title:v}),g,o.default.createElement("div",{className:l.default.bodyContainer},o.default.createElement("div",{className:l.default.body},o.default.createElement(d.TextSpan,{theme:"title",color:f},t))))};var s=r(a(67154)),n=r(a(94184)),o=r(a(67294)),i=r(a(62067)),l=r(a(89600)),d=a(45739),u=r(a(29490))},20254:(e,t,a)=>{"use strict";var r=a(20862),s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(94184)),o=s(a(96391)),i=r(a(67294)),l=s(a(79274)),d=s(a(97420)),u=s(a(27890)),c=s(a(98712)),f=s(a(84150)),p=s(a(66761)),h=a(3875),m=s(a(53852)),g=s(a(99597)),_=s(a(82286)),v=s(a(62745)),E=s(a(47469)),C=s(a(36708));class S extends i.Component{constructor(...e){super(...e),this.state={style:{visibility:"hidden"}},this.onScroll=e=>{Math.abs(e.deltaY)>3&&this.onClose()},this.onClose=()=>{if(!this.closing){var e;if(this.closing=!0,this.props.getZoomNode((t=>{e=t})),!e)return d.default.closeModalMedia();var t=this._refImage;if(t){this.props.animateBorderRadius&&(t.style.transition="border-radius 500ms cubic-bezier(.1,.82,.25,1)",t.style.borderRadius="50%");var a=(0,o.default)(e,"start"),r=t.getBoundingClientRect(),s=a.getBoundingClientRect(),n=s.top-r.top,i=s.left-r.left,l=a.clientWidth/t.clientWidth;(0,C.default)(t,{translateX:[i,0],translateY:[n,0],scale:[l,1]},{duration:200,easing:[.1,.82,.25,1]}).then((()=>{d.default.closeModalMedia()}))}}},this.onImageLoad=e=>{var t=e.target;this.setState({size:{width:t.naturalWidth,height:t.naturalHeight}},(()=>{this.props.getZoomNode((e=>{var a=t.getBoundingClientRect(),r=e.getBoundingClientRect(),s=r.top-a.top,n={visibility:"hidden",transform:`translateX(${r.left-a.left}px) translateY(${s}px) scale(${e.clientWidth/t.clientWidth})`,transition:"transform 0s",borderRadius:void 0};this.props.animateBorderRadius&&(n.borderRadius="50%"),this.setState({style:n},(()=>{var e={transform:"translateX(0px) translateY(0px) scale(1)",transition:"transform 500ms cubic-bezier(.1,.82,.25,1)"};this.props.animateBorderRadius&&(e={transform:"translateX(0px) translateY(0px) scale(1)",borderRadius:"0%",transition:"transform 500ms cubic-bezier(.1,.82,.25,1),\n                                         border-radius 500ms cubic-bezier(.1,.82,.25,1)"}),this.setState({style:e})}))}))}))},this.setRefImage=e=>{this._refImage=e}}shouldComponentUpdate(e){return!!e.profilePicThumb.imgFull||(this.onClose(),!1)}render(){var e,{contact:t,profilePicThumb:a}=this.props;return a.imgFull&&(e=i.default.createElement(f.default,{src:a.imgFull,hasPrivacyChecks:!0,onLoad:this.onImageLoad,className:g.default.profileViewerImg})),i.default.createElement(E.default,{displayName:"PhotoViewer",escapable:!0,requestDismiss:this.onClose},i.default.createElement("div",{className:(0,n.default)("overlay",g.default.container),onWheel:this.onScroll,onClick:this.onClose},i.default.createElement("div",{className:g.default.headerContainer},i.default.createElement("div",{className:g.default.profileThumb},i.default.createElement(l.default,{image:i.default.createElement(u.default,{id:t.id,size:40}),theme:"plain",primary:i.default.createElement(c.default,{text:t.formattedUser})})),i.default.createElement("div",{className:g.default.mediaPanelTools},i.default.createElement(h.MenuBar,{key:"media-panel-header",theme:"strong"},i.default.createElement(h.MenuBarItem,{a8nText:"btn-close",icon:i.default.createElement(v.default,{name:"x-viewer"}),title:p.default.t(1668),onClick:this.onClose})))),i.default.createElement("div",{className:g.default.profileContainer,dir:"ltr"},i.default.createElement("div",{className:g.default.media},i.default.createElement(m.default,{type:"scaleDown",size:this.state.size},i.default.createElement("div",{className:g.default.profileViewer,"data-animate-profile-viewer":!0,ref:this.setRefImage,style:this.state.style},e))))))}}S.CONCERNS={contact:["formattedUser","id"],profilePicThumb:["imgFull"]},S.displayName="PhotoViewerModal";var P=(0,_.default)(S,S.CONCERNS);t.default=P},8092:(e,t,a)=>{"use strict";var r=a(20862),s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{profilePicThumb:t,size:a}=e,r=!t.canSet()&&!t.canDelete(),[s,h]=p(!1),m=(0,f.default)();return n.default.createElement(l.default,{type:d.default.PROFILE,id:t.id,attachToChat:!1,pending:s,startImage:t.imgFull,readOnly:r,onImageSet:(t,a)=>{var r,s=e.profilePicThumb;h(!0),r=t&&a?(0,u.setProfilePic)(s,t,a):(0,u.deleteProfilePic)(s),(0,c.default)(r,m).catchType(i.ActionError,(()=>{__LOG__(3)`ProfileDrawer: failed to set/delete profile image`})).catch((e=>{if(e.name!==o.ABORT_ERROR)throw e})).finally((()=>{h(!1)}))},size:a})};var n=s(a(67294)),o=a(63229),i=r(a(92246)),l=s(a(40794)),d=s(a(10839)),u=a(24285),c=s(a(39122)),f=s(a(76621)),{useState:p}=n.default},36350:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return s.default.createElement(n.default,{a8nText:"li-share-link",icon:s.default.createElement(l.default,{name:"forward",className:i.default.icon}),onClick:e.onClick},o.default.t(1365))};var s=r(a(67294)),n=r(a(61376)),o=r(a(66761)),i=r(a(17932)),l=r(a(62745))},88003:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return s.default.createElement(n.default,{a8nText:"li-share-link",icon:s.default.createElement(l.default,{name:"forward",className:i.default.icon}),onClick:e.onClick},o.default.t(1388))};var s=r(a(67294)),n=r(a(61376)),o=r(a(66761)),i=r(a(7200)),l=r(a(62745))},78711:(e,t,a)=>{"use strict";var r=a(95318),s=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(67294)),o=r(a(18917)),i=r(a(97420)),l=r(a(98429)),d=a(68770),u=r(a(77864)),c=r(a(49204)),f=a(38178),p=r(a(29594)),h=r(a(66761)),m=r(a(52206)),g=r(a(86878)),_=a(49993),v=r(a(78654)),E=r(a(62745)),C=s(a(9931)),S=r(a(47469)),P=r(a(1869)),y=r(a(77923));class T extends n.Component{constructor(){super(...arguments),this.emojiInputComponent=(0,u.default)(),this._refEmojiPanel=(0,n.createRef)(),this.isSkinTonePickerOpen=!1,this.onSend=e=>{var t;if(e.preventDefault(),this._refInputLine){var a=this._refInputLine.value.trim();if(a.length){var r=(0,C.genId)();o.default.find(this.props.msg.sender).then((e=>(i.default.openToast(n.default.createElement(C.default,{msg:h.default.t(1414),id:r})),(0,_.sendTextMsgToChat)(e,(0,p.default)(a),{quotedMsg:this.props.msg})))).then((()=>{this.props.onSend()})).catchType(l.default,(()=>{var{chat:e}=this.state;e&&i.default.openToast(n.default.createElement(C.default,{msg:h.default.t(1659,{contact:e.contact.formattedName}),id:r}))})),null===(t=this._refInputLine)||void 0===t||t.reset(),this._emojiPickerClose(),this.props.dismissReply()}}},this.onFocus=()=>{this.setState({focused:!0})},this.onBlur=()=>{this.isSkinTonePickerOpen||document.activeElement===document.body&&this.setState({focused:!1})},this.onSkinTonePicker=e=>{this.isSkinTonePickerOpen=e},this.isFocused=()=>this.state.focused,this.onEmojiPicker=e=>{e&&(e.preventDefault(),e.stopPropagation());var t=n.default.createElement(c.default,{ref:this._refEmojiPanel,onEmoji:this.onEmoji,onFocusNext:this.restoreFocus,onFocusPrev:this.restoreFocus});this.setState({emojiPicker:{menu:t,dirY:d.DirY.TOP,type:"emoji_picker",anchor:e.target}})},this.onEmoji=e=>{this._refInputLine&&this._refInputLine.replaceSelection(e)},this.restoreFocus=()=>{this._refInputLine&&this._refInputLine.focus()},this._restoreEmojiPickerFocus=()=>{var e;null===(e=this._refEmojiPanel.current)||void 0===e||e.restoreFocus()},this._emojiPickerClose=()=>{this.setState({emojiPicker:void 0}),this.restoreFocus()},this.state={replyCaption:"",focused:!1,emojiPicker:void 0,chat:void 0},o.default.find(this.props.msg.sender).checkpoint(this.props.rejectOnUnmount()).then((e=>{this.setState({chat:e})}))}componentDidUpdate(e,t){this._shouldPausePlayback(t)&&!this._shouldPausePlayback(this.state)?this.props.play():!this._shouldPausePlayback(t)&&this._shouldPausePlayback(this.state)&&this.props.pause()}_shouldPausePlayback(e){return Boolean(e.emojiPicker)||e.focused}isPaused(){return this._shouldPausePlayback(this.state)}render(){var e,t,a;this.state.emojiPicker&&(e=n.default.createElement(S.default,{displayName:"EmojiPicker",escapable:!0,popable:!0,requestDismiss:this._emojiPickerClose,requestFocus:this._restoreEmojiPickerFocus},n.default.createElement(P.default,{contextMenu:this.state.emojiPicker})),t=n.default.createElement(S.default,{displayName:"EmojiPicker",escapable:!0,requestFocus:this._restoreEmojiPickerFocus},n.default.createElement("div",null,e)));var{chat:r}=this.state;r&&this.state.focused&&!this.state.emojiPicker&&(a=n.default.createElement(S.default,{displayName:"StatusV3Reply",escapable:!0,requestDismiss:this.props.dismissReply},n.default.createElement("div",{className:v.default.popupPanel},n.default.createElement(g.default,{msg:this.props.msg.safe(),theme:"statusV3",key:this.props.msg.id.toString(),chat:r}))));var s=this.emojiInputComponent;return n.default.createElement("div",{className:v.default.container},n.default.createElement(y.default,{transitionName:"status-v3-quoted-msg",transitionAppear:!0},a),n.default.createElement("div",{className:v.default.wrapper},n.default.createElement("button",{className:v.default.emojiIcon,onClick:this.onEmojiPicker},n.default.createElement(E.default,{name:"smiley"})),n.default.createElement("div",{className:v.default.lineWrapper},n.default.createElement(s.EmojiSuggestions,{theme:f.ThemeOptions.EMOJI_INPUT,onSkinTonePicker:this.onSkinTonePicker}),n.default.createElement(s,{ref:e=>{this._refInputLine=e},theme:"status-reply",spellCheck:!0,onFocus:this.onFocus,onBlur:this.onBlur,onEnter:this.onSend,placeholder:h.default.t(1466),editable:!0,multiline:!0})),n.default.createElement("button",{className:v.default.sendIcon,onClick:this.onSend},n.default.createElement(E.default,{name:"send",directional:!0})),t))}}T.displayName="StatusV3ComposeBox";var M=(0,m.default)(T);t.default=class extends M{isFocused(){return!0===this.getComponent().isFocused()}isPaused(){return this.getComponent().isPaused()}restoreFocus(){this.getComponent().restoreFocus()}}},79522:(e,t,a)=>{"use strict";var r=a(20862),s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.StatusV3Text=t.default=void 0;var n=s(a(23279)),o=s(a(94184)),i=r(a(67294)),l=s(a(60969)),d=s(a(18917)),u=s(a(56656)),c=s(a(97420)),f=s(a(46274)),p=s(a(27890)),h=s(a(98712)),m=r(a(92246)),g=s(a(47312)),_=s(a(63030)),v=s(a(79766)),E=s(a(84150)),C=a(85371),S=s(a(66761)),P=s(a(48878)),y=s(a(23223)),T=a(46072),M=s(a(18263)),w=s(a(5148)),k=s(a(53852)),N=s(a(52206)),b=s(a(17363)),D=s(a(82286)),I=s(a(78711)),O=a(30122),R=s(a(11780)),x=s(a(62568)),A=s(a(47469)),L=a(93215),V=s(a(8235));class F extends i.Component{constructor(){super(...arguments),this._refProgressBar=(0,i.createRef)(),this._refProgressBarComponent=(0,i.createRef)(),this._refMeasuringProfile=(0,i.createRef)(),this._refWrapper=(0,i.createRef)(),this.componentWillUnmount=()=>{if(this._playbackController.removeListeners(),null!=this.props.sessionId){var e=Math.round(this._playbackController.duration||0);this._statusViewEvent.webcStatusPlaybackT=e;var t=this._playStartTime;null!=t&&(this._statusViewEvent.webcStatusViewT+=Math.round(window.performance.now()-t),this._playStartTime=void 0),this._statusViewEvent.commit()}},this._onWindowResize=()=>{var e=this._refMeasuringProfile&&this._refMeasuringProfile.current,t=this._refProgressBar&&this._refProgressBar.current;if(e&&t){var a=e.getBoundingClientRect(),r=t.getBoundingClientRect();!S.default.isRTL()&&a.right>r.left-5||S.default.isRTL()&&a.left<r.right+5?this.setState({narrow:!0}):this.setState({narrow:!1})}},this._onTab=e=>{var t;(e&&(e.stopPropagation(),e.preventDefault()),this.props.statusV3.contact.isMe)||((null===(t=this._refComposeBox)||void 0===t?void 0:t.isFocused())?this.dismissReply():this._startReply())},this.onWindowGainedFocus=()=>{this._windowFocused=!0,this.play()},this.onWindowLostFocus=()=>{this._windowFocused=!1,this.pause()},this._onClickProfile=()=>{var e=this.props.statusV3.contact.id;d.default.find(e).then((e=>c.default.openChatBottom(e))).then((()=>{this.props.closeStatusViewer(!0)}))},this.play=()=>{var e,t=this.props.mediaData;if(t){if(t.mediaStage!==T.MEDIA_DATA_STAGE.RESOLVED)return;this._statusViewEvent.webcStatusLoadT||(this._statusViewEvent.markWebcStatusLoadT(),this._statusViewEvent.webcStatusLoaded=!0)}(null===(e=this._refComposeBox)||void 0===e?void 0:e.isPaused())||this._windowFocused&&(this._playStartTime=window.performance.now(),this._playbackController.resume())},this.pause=()=>{var e=this.props.mediaData;if(!e||e.mediaStage===T.MEDIA_DATA_STAGE.RESOLVED){var t=this._playStartTime;null!=t&&(this._statusViewEvent.webcStatusViewT+=Math.round(window.performance.now()-t),this._playStartTime=void 0),this._playbackController.pause()}},this.onMouseDown=()=>{this.pause()},this.onMouseUp=()=>{this.play()},this.dismissReply=()=>{var e=this._refWrapper&&this._refWrapper.current;e&&g.default.focus(e)},this._startReply=()=>{var e;null===(e=this._refComposeBox)||void 0===e||e.restoreFocus()},this.onSend=()=>{this._statusViewEvent.webcStatusReplyCount++},this.state={chat:void 0,narrow:!1},this._windowFocused=!0,this._playbackController=(0,O.setupStatusV3Controller)(this.props.mediaData,this.props.msg),this._statusViewEvent=new w.default.WebcStatusView({webcStatusLoaded:!1,webcStatusReplyCount:0,webcStatusViewT:0})}componentDidMount(){var{statusV3:e,msg:t,mediaData:a,msgIdx:r,sessionId:s}=this.props;if(null!=s){var o;o=e.contact.isMe?w.default.WEBC_STATUS_ROW_SECTION.MY:e.contact.statusMute?w.default.WEBC_STATUS_ROW_SECTION.MUTED:e.hasUnread?w.default.WEBC_STATUS_ROW_SECTION.RECENT:w.default.WEBC_STATUS_ROW_SECTION.VIEWED;var i,l=this.props.rowIdx||0,d=e.msgs.length-1-r<e.unreadCount;a?i=a.isGif?w.default.WEBC_STATUS_MEDIA_TYPE.GIF:"video"===a.type?w.default.WEBC_STATUS_MEDIA_TYPE.VIDEO:w.default.WEBC_STATUS_MEDIA_TYPE.IMAGE:(i=t.getLinks().length?w.default.WEBC_STATUS_MEDIA_TYPE.URL:w.default.WEBC_STATUS_MEDIA_TYPE.TEXT,this._statusViewEvent.markWebcStatusLoadT(),this._statusViewEvent.webcStatusLoaded=!0),this._statusViewEvent.webcStatusSessionId=s,this._statusViewEvent.webcStatusRowSection=o,this._statusViewEvent.webcStatusRowIndex=l,this._statusViewEvent.webcStatusMediaType=i,this._statusViewEvent.webcStatusUnread=d}this._refProgressBarComponent&&this._refProgressBarComponent.current&&this._playbackController.addListeners(((e,t)=>{var a=this._refProgressBarComponent&&this._refProgressBarComponent.current;a&&a.onStart(e,t)}),(()=>{var e=this._refProgressBarComponent&&this._refProgressBarComponent.current;e&&e.onPause()}),(()=>{var e=this._refProgressBarComponent&&this._refProgressBarComponent.current;e&&e.onEnded().checkpoint(this.props.rejectOnUnmount()).then((()=>{this.props.onNext()})).catchType(m.Unmount,(()=>{}))})),a?(this.play(),a&&a.mediaStage===T.MEDIA_DATA_STAGE.RESOLVED&&this.props.markRead(this.props.statusV3,this.props.msg)):(this.props.msg.type,f.default.MSG_TYPE.CHAT,this.play(),this.props.markRead(this.props.statusV3,this.props.msg));var u=this._refWrapper&&this._refWrapper.current;u&&u.focus();var c=this.props.listeners;c.add(window,"focus",this.onWindowGainedFocus),c.add(window,"blur",this.onWindowLostFocus),c.add(window,"resize",(0,n.default)(this._onWindowResize)),this._onWindowResize()}render(){var e,t,{msg:a,mediaData:r,statusV3:s}=this.props;if(r){var n=K(r);n&&(e={backgroundImage:`url(${n})`})}else if(a.type===f.default.MSG_TYPE.CHAT){e={backgroundColor:a.statusV3TextBg}}if(r)switch(r.type){case y.default.TYPE.IMAGE:t=i.default.createElement(B,{msg:a,statusV3:s,mediaData:r,markRead:this.props.markRead,play:this.play,pause:this.pause,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp});break;case y.default.TYPE.VIDEO:t=i.default.createElement(W,{msg:a,statusV3:s,mediaData:r,markRead:this.props.markRead,play:this.play,pause:this.pause,playbackController:this._playbackController,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp});break;default:__LOG__(3)`Invalid status v3 image type: ${r.type}`}else t=a.type===f.default.MSG_TYPE.CHAT?i.default.createElement(H,{msg:a,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp}):i.default.createElement(G,{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp});var l,d=i.default.createElement("div",{ref:this._refProgressBar},i.default.createElement(x.default,{ref:this._refProgressBarComponent,current:this.props.msgIdx,total:this.props.totalMsgs,onClick:this.props.onClickProgressBar}));a.type!==f.default.MSG_TYPE.CHAT&&(l=i.default.createElement("div",{className:R.default.captionBackdrop},i.default.createElement(h.default,{className:R.default.mediaCaption,text:a.caption,formatters:C.Configuration.StatusV3Caption()})));var c,m,g=(0,o.default)(R.default.profile,{[R.default.nonClickProfile]:a.isSentByMe,[R.default.profileNarrow]:this.state.narrow}),_=(0,o.default)(R.default.profile,R.default.measuringProfile,{}),E=i.default.createElement("div",{className:g,onClick:a.isSentByMe?null:this._onClickProfile},i.default.createElement("div",{className:R.default.playerAvatar},i.default.createElement(p.default,{id:s.contact.id,theme:"status_v3",size:40})),i.default.createElement("div",{className:R.default.msgInfo},i.default.createElement(h.default,{className:R.default.msgInfoName,text:s.contact.formattedName}),i.default.createElement("div",{className:R.default.timestamp},u.default.relativeDateAndTimeStr(a.t)))),S=i.default.createElement("div",{ref:this._refMeasuringProfile,className:_},i.default.createElement("div",{className:R.default.playerAvatar},i.default.createElement(p.default,{id:s.contact.id,theme:"status_v3",size:40})),i.default.createElement("div",{className:R.default.msgInfo},i.default.createElement(h.default,{className:R.default.msgInfoName,text:s.contact.formattedName}),i.default.createElement("div",{className:R.default.timestamp},u.default.relativeDateAndTimeStr(a.t)))),P={tab:this._onTab,"shift+tab":this._onTab},T=e=>e.stopPropagation();r&&(c=i.default.createElement(z,{mediaData:r}));var M=this.props.statusV3.contact;M.isMe||M.isPSA||(m=i.default.createElement(v.default,{handlers:{left:T,right:T}},i.default.createElement(I.default,{msg:this.props.msg,dismissReply:this.dismissReply,onSend:this.onSend,pause:this.pause,play:this.play,ref:e=>{this._refComposeBox=e}})));var w,k=(0,o.default)(R.default.playerBackground,{[R.default.media]:r}),N=(0,o.default)(R.default.progressBackdrop,{[R.default.progressBarBackdropNarrow]:this.state.narrow});return a.type!==f.default.MSG_TYPE.CHAT&&(w=i.default.createElement("div",{className:N})),i.default.createElement(A.default,{displayName:"StatusV3Player",escapable:!0,requestDismiss:e=>{e||this.props.closeStatusViewer()},requestFocus:this.dismissReply},i.default.createElement(v.default,{handlers:P},i.default.createElement("div",{className:R.default.playerWrapper,key:a.id.toString(),tabIndex:-1,ref:this._refWrapper},S,E,w,d,l,i.default.createElement("div",{className:k,style:e}),t,c,m)))}}F.displayName="_StatusV3Player";class U extends i.PureComponent{constructor(...e){super(...e),this._renderImage=e=>{var{msg:t,mediaData:a}=this.props,r=(0,o.default)(R.default.playerContent,R.default.v3Image);return i.default.createElement("div",{className:r,onMouseDown:this.props.onMouseDown,onMouseUp:this.props.onMouseUp,onDragEnd:this.props.onMouseUp},i.default.createElement(k.default,{type:"contain",size:{width:a.fullWidth,height:a.fullHeight}},i.default.createElement("div",{className:R.default.mediaViewer},i.default.createElement(E.default,{src:e,disableContextMenu:!0}),t&&t.interactiveAnnotations&&t.interactiveAnnotations.length>0&&i.default.createElement(l.default,{annotations:t.interactiveAnnotations,onTooltipDisplay:this.props.onMouseDown,onTooltipDismiss:this.props.onMouseUp}))))},this._renderPreviewImage=()=>{var e,{mediaData:t}=this.props,a=(0,o.default)(R.default.playerContent,R.default.v3Image,R.default.loading);return i.default.createElement("div",{className:a,onMouseDown:this.props.onMouseDown,onMouseUp:this.props.onMouseUp},i.default.createElement(k.default,{type:"contain",size:{width:t.aspectRatio,height:1}},i.default.createElement(E.default,{src:null!==(e=K(t))&&void 0!==e?e:""})))},this._downloadMedia=()=>this.props.msg.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:w.default.WEBC_RMR_REASON_CODE.STATUS_V3,isUserInitiated:!0})}componentDidMount(){this.props.mediaData.mediaStage!==T.MEDIA_DATA_STAGE.RESOLVED&&this.props.msg.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:w.default.WEBC_RMR_REASON_CODE.STATUS_V3,isUserInitiated:!0})}componentDidUpdate(){this.props.play();var e=this.props.mediaData;e&&e.mediaStage===T.MEDIA_DATA_STAGE.RESOLVED&&this.props.markRead(this.props.statusV3,this.props.msg)}componentWillUnmount(){this.props.pause()}render(){return i.default.createElement(M.default,{mediaData:this.props.mediaData,placeholderRenderer:this._renderPreviewImage,downloadMedia:this._downloadMedia,renderProgressively:!0},this._renderImage)}}U.CONCERNS={mediaData:["mediaStage","renderableUrl","preview","fullWidth","fullHeight","aspectRatio","fullPreviewData"]},U.displayName="_StatusV3Img";var B=(0,D.default)(U,U.CONCERNS);class j extends i.PureComponent{constructor(...e){super(...e),this.refVideo=(0,i.createRef)(),this.setRefVideo=e=>{this.refVideo=e,this.props.playbackController.setVideo(this.refVideo.current)}}componentDidMount(){var e=this.props.mediaData;e.streamable||e.isStreamable()||this.props.msg.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:w.default.WEBC_RMR_REASON_CODE.STATUS_V3,isUserInitiated:!0})}componentDidUpdate(){this.props.play();var e=this.props.mediaData;e&&e.mediaStage===T.MEDIA_DATA_STAGE.RESOLVED&&this.props.markRead(this.props.statusV3,this.props.msg)}componentWillUnmount(){this.props.pause()}render(){var e,{msg:t,mediaData:a,onMouseDown:r,onMouseUp:s}=this.props,n=a.mediaStage!==T.MEDIA_DATA_STAGE.RESOLVED,d=(0,o.default)(R.default.playerContent,R.default.v3Video,{loading:n});return i.default.createElement("div",{className:d,onMouseDown:r,onMouseUp:s},i.default.createElement(k.default,{type:"contain",size:{width:a.fullWidth,height:a.fullHeight}},i.default.createElement("div",{className:R.default.mediaViewer},i.default.createElement(V.default,{msg:t,mediaData:a,autoPlay:!0,refVideo:this.setRefVideo,poster:null!==(e=K(a))&&void 0!==e?e:"",disableContextMenu:!0},S.default.t(1526)),t&&t.interactiveAnnotations&&t.interactiveAnnotations.length>0&&i.default.createElement(l.default,{annotations:t.interactiveAnnotations,onTooltipDisplay:this.props.onMouseDown,onTooltipDismiss:this.props.onMouseUp}))))}}j.CONCERNS={mediaData:["preview","mediaStage","fullWidth","fullHeight","streamable","fullPreviewData"]},j.displayName="_StatusV3Video";var W=(0,D.default)(j,j.CONCERNS);class H extends i.PureComponent{componentDidMount(){_.default.load(this.props.msg.font).catch((()=>{}))}render(){var e,t,a=(0,L.numCodepoints)(this.props.msg.body),r={[R.default[`font_${this.props.msg.font}`]]:!0};return a<=60?(e=(0,o.default)(R.default.text,R.default.textLarge,r),t=C.Configuration.StatusV3Text({links:this.props.msg.getLinks()})):a<=240?(e=(0,o.default)(R.default.text,R.default.textMedium,r),t=C.Configuration.StatusV3Text({links:this.props.msg.getLinks()})):e=(0,o.default)(R.default.text,R.default.textSmall,r),i.default.createElement("div",{className:(0,o.default)(R.default.playerContent,{[R.default.statusPanelPlayerContent]:"status-panel"===this.props.theme,[R.default.statusThumbnailPlayerContent]:"status-thumbnail"===this.props.theme,[R.default.textThumbnailPlayerContent]:"text-thumb"===this.props.theme}),onMouseDown:this.props.onMouseDown,onMouseUp:this.props.onMouseUp},i.default.createElement("div",{className:e},i.default.createElement(h.default,{text:this.props.msg.body,formatters:t})))}}t.StatusV3Text=H,H.displayName="StatusV3Text";class G extends i.PureComponent{render(){return i.default.createElement("div",{className:R.default.playerContent,onMouseDown:this.props.onMouseDown,onMouseUp:this.props.onMouseUp},i.default.createElement("div",{className:R.default.unknown},S.default.t(1415)))}}G.displayName="StatusV3Unknown";class Y extends i.Component{render(){var{mediaData:e}=this.props;return e.mediaStage!==T.MEDIA_DATA_STAGE.RESOLVED?i.default.createElement("div",{className:R.default.mediaStateControls},i.default.createElement("button",{className:"icon-media-disabled"},i.default.createElement(b.default,{size:50,stroke:4,color:"white"}))):null}}function K(e){return e?e.fullPreviewData?e.fullPreviewData.url():e.preview?e.preview.url():null:null}Y.CONCERNS={mediaData:["mediaStage"]},Y.displayName="_LoadingSpinner";var z=(0,D.default)(Y,Y.CONCERNS),$=(0,N.default)((0,P.default)(F));t.default=$},77389:(e,t,a)=>{"use strict";var r=a(20862),s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(94184)),o=a(73591),i=r(a(67294)),l=s(a(97420)),d=s(a(46274)),u=a(66274),c=r(a(92246)),f=s(a(63030)),p=s(a(79766)),h=s(a(66761)),m=a(46072),g=s(a(5148)),_=s(a(52206)),v=s(a(17363)),E=s(a(79522)),C=r(a(32532)),S=s(a(44704)),P=s(a(62745)),y=r(a(9931)),T=s(a(77923));class M extends i.Component{constructor(){super(...arguments),this.onClickProgressBar=e=>{var t=this.state.iterator;if((!t||e!==t.msgIdx)&&t){var a=this._statusV3Snapshot.statusAt(t,e);a.isFulfilled()||this.setState({loading:!0}),a.checkpoint(this.props.rejectOnUnmount()).then((e=>{this.setState({iterator:e})})).catchType(c.Unmount,(()=>{})).catchType(u.EphemeralDrop,(()=>{})).catchType(C.InvalidStatusV3Iterator,(()=>{__LOG__(3)`Invalid iterator while getting next status msg`})).catchType(C.StatusV3LoadingError,(()=>{__LOG__(3)`No more status v3 while preloading next status`})).finally((()=>{this.setState({loading:!1})}))}},this._preloadNextStatus=()=>{var e=this.state.iterator;e&&this._statusV3Snapshot.hasNext(e)&&this._statusV3Snapshot.getNext(e).checkpoint(this.props.rejectOnUnmount()).then((e=>{var t=this._statusV3Snapshot.statuses[e.statusIdx].msgs[e.msgIdx];if(!t)throw new C.StatusV3MsgNotFound;if(t.type===d.default.MSG_TYPE.CHAT)f.default.load(t.font).catch((()=>{}));else{var a=t.mediaData;a&&a.mediaStage!==m.MEDIA_DATA_STAGE.RESOLVED&&t.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:g.default.WEBC_RMR_REASON_CODE.STATUS_V3,isUserInitiated:!1})}})).catchType(c.Unmount,(()=>{})).catchType(u.EphemeralDrop,(()=>{})).catchType(C.InvalidStatusV3Iterator,(()=>{__LOG__(3)`Invalid iterator while preloading next status`})).catchType(C.StatusV3MsgNotFound,(()=>{__LOG__(3)`Error finding next status while preloading next status`})).catchType(C.StatusV3LoadingError,(()=>{__LOG__(3)`No more status v3 while preloading next status`}))},this.onPrev=()=>{var e=this.state.iterator;if(e&&this._statusV3Snapshot.hasPrev(e)){var t=e.statusIdx;this._statusV3Snapshot.getPrev(e).checkpoint(this.props.rejectOnUnmount()).then((e=>{e.statusIdx===t?this.setState({iterator:e}):(this.setState({transitioning:!0}),(0,o.delayMs)(200).checkpoint(this.props.rejectOnUnmount()).then((()=>{this.setState({iterator:e,transitioning:!1})})).catchType(c.Unmount,(()=>{})))})).catchType(c.Unmount,(()=>{})).catchType(u.EphemeralDrop,(()=>{})).catchType(C.InvalidStatusV3Iterator,(()=>{__LOG__(3)`Invalid iterator while getting previous status msg`})).catchType(C.StatusV3LoadingError,(()=>{__LOG__(3)`No more status v3 while preloading next status`}))}},this.onNext=()=>{var e=this.state.iterator;if(e&&this._statusV3Snapshot.hasNext(e)){var t=e.statusIdx,a=this._statusV3Snapshot.getNext(e);a.isFulfilled()||this.setState({loading:!0}),a.checkpoint(this.props.rejectOnUnmount()).then((e=>{e.statusIdx===t?this.setState({iterator:e}):(this.setState({transitioning:!0,loading:!1}),(0,o.delayMs)(200).checkpoint(this.props.rejectOnUnmount()).then((()=>{this.setState({iterator:e,transitioning:!1})})).catchType(c.Unmount,(()=>{})))})).catchType(c.Unmount,(()=>{})).catchType(u.EphemeralDrop,(()=>{})).catchType(C.InvalidStatusV3Iterator,(()=>{__LOG__(3)`Invalid iterator while getting next status msg`,this.closeStatusViewer()})).catchType(C.StatusV3LoadingError,(()=>{__LOG__(3)`No more status v3 while preloading next status`})).finally((()=>{this.setState({loading:!1})}))}else this.closeStatusViewer()},this.markRead=(e,t)=>{if(t){var a=e.unreadCount,r=e.totalCount;e.msgs.getModelsArray().findIndex((e=>e===t))>=r-a&&e.sendReadStatus(t.id,t.author);var s=this._statusV3Snapshot.statuses.find((t=>t.statusV3===e));s&&s.readMsgKeys.push(t.id.toString())}},this.closeStatusViewer=e=>{this.setState({transitioning:!0}),(0,o.delayMs)(200).checkpoint(this.props.rejectOnUnmount()).then((()=>{this.props.closeStatusViewer(e)})).catchType(c.Unmount,(()=>{}))};var e=this.props.initialStatusV3;if(this.props.quotedMsgKey){this.state={};var t=this.props.quotedMsgKey;if(-1!==e.msgs.getModelsArray().findIndex((e=>e.id.toString()===t.toString())))this._statusV3Snapshot=new C.default(e,t),this._statusV3Snapshot.getFirstUnread(e,!0,t).checkpoint(this.props.rejectOnUnmount()).then((e=>{this.setState({iterator:e,loading:!1})})).catchType(c.Unmount,(()=>{})).catchType(u.EphemeralDrop,(()=>{})).catchType(C.InvalidStatusV3Iterator,(()=>{__LOG__(3)`Invalid iterator while loading first unread msg`,l.default.openToast(i.default.createElement(y.default,{msg:h.default.t(1408),id:(0,y.genId)()})),this.props.closeStatusViewer()}));else this.state={loading:!0},e.loadMore(e.totalCount).then((()=>{(this.setState({loading:!1}),-1!==e.msgs.getModelsArray().findIndex((e=>e.id.toString()===t.toString())))?(this._statusV3Snapshot=new C.default(e,t),this._statusV3Snapshot.getFirstUnread(e,!0,t).checkpoint(this.props.rejectOnUnmount()).then((e=>{this.setState({iterator:e,loading:!1})})).catchType(c.Unmount,(()=>{})).catchType(u.EphemeralDrop,(()=>{})).catchType(C.InvalidStatusV3Iterator,(()=>{__LOG__(3)`Invalid iterator while loading first unread msg`,l.default.openToast(i.default.createElement(y.default,{msg:h.default.t(1408),id:(0,y.genId)()})),this.props.closeStatusViewer()}))):(this.props.onMsgNotFound&&this.props.onMsgNotFound(),l.default.openToast(i.default.createElement(y.default,{msg:h.default.t(1408),id:(0,y.genId)()})),this.props.closeStatusViewer())})).catch((()=>{l.default.openToast(i.default.createElement(y.default,{msg:h.default.t(1408),id:(0,y.genId)()})),this.props.closeStatusViewer()})).finally((()=>{this.setState({loading:!1})}))}else{var a=this.props.initialStatusMsg;this._statusV3Snapshot=new C.default(e);var r=this._statusV3Snapshot.getFirstUnread(e,!0,a&&a.id);r.isFulfilled()?this.state={}:this.state={loading:!0},r.checkpoint(this.props.rejectOnUnmount()).then((e=>{this.setState({iterator:e,loading:!1})})).catchType(c.Unmount,(()=>{})).catchType(u.EphemeralDrop,(()=>{})).catchType(C.InvalidStatusV3Iterator,(()=>{__LOG__(3)`Invalid iterator while loading first unread msg`,l.default.openToast(i.default.createElement(y.default,{msg:h.default.t(1408),id:(0,y.genId)()})),this.props.closeStatusViewer()}))}}componentDidMount(){this._preloadNextStatus()}componentDidUpdate(){this._preloadNextStatus()}render(){var e,t,a,r,s,o,l,d,u=this.state.iterator;u&&(o=(s=this._statusV3Snapshot).statuses[u.statusIdx],l=o.statusV3,d=o.msgs[u.msgIdx],s.hasPrev(u)&&(a=i.default.createElement("div",{className:S.default.chevronLeft},i.default.createElement(P.default,{name:"chevron-left"})),r=i.default.createElement("div",{className:S.default.chevronLeftBg,onClick:this.onPrev})),s.hasNext(u)&&(e=i.default.createElement("div",{className:S.default.chevronRight},i.default.createElement(P.default,{name:"chevron-right"})),t=i.default.createElement("div",{className:S.default.chevronRightBg,onClick:()=>{this.onNext(),this.markRead(l,d)}})));var c,f={left:this.onPrev,right:this.onNext};!this.state.transitioning&&!this.state.loading&&d&&u&&o&&l&&(c=i.default.createElement("div",{className:S.default.playerContainer,key:d.id},i.default.createElement(E.default,{key:d.id,statusV3:l,msg:d,mediaData:d.mediaData,msgIdx:u.msgIdx,totalMsgs:o.totalCount,markRead:this.markRead,closeStatusViewer:this.closeStatusViewer,onClickProgressBar:this.onClickProgressBar,onNext:this.onNext,onPrev:this.onPrev,sessionId:this.props.sessionId,rowIdx:this.props.rowIdx})));var h,m=(0,n.default)(S.default.v3X,{}),g=i.default.createElement("button",{className:m,onClick:()=>this.props.closeStatusViewer(!0)},i.default.createElement(P.default,{name:"x-viewer"})),_=(0,n.default)(S.default.backIcon,{}),C=i.default.createElement("button",{className:_,onClick:()=>this.props.closeStatusViewer()},i.default.createElement(P.default,{name:"back",directional:!0}));return this.state.loading&&(h=i.default.createElement("div",{className:S.default.mediaStateControls},i.default.createElement("button",null,i.default.createElement(v.default,{size:50,stroke:4,color:"white"})))),i.default.createElement(p.default,{handlers:f},i.default.createElement("div",{className:S.default.viewer,"data-animate-status-v3-viewer":!0},g,C,r,a,t,e,h,i.default.createElement(T.default,{transitionName:"status-v3-player",transitionAppear:!0},c)))}}M.displayName="StatusV3Viewer";var w=(0,_.default)(M);t.default=w},93154:(e,t,a)=>{"use strict";var r=a(95318),s=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(67294)),o=r(a(46274)),i=r(a(3395)),l=r(a(34727)),d=s(a(85002)),u=r(a(98712)),c=r(a(79766)),f=r(a(98880)),p=s(a(18467)),h=r(a(13900)),m=r(a(92120)),g=r(a(62745)),_=r(a(51231)),v=r(a(18914)),E=r(a(47469)),C=s(a(75715)),S=(e,t)=>{var{defaultText:a,title:r,onSend:s,onBack:S}=e,[P,y]=(0,n.useState)(a),T=(0,C.findFirstWebLink)(P),{linkPreview:M,clearLinkPreview:w}=(0,C.default)(T),k=r?n.default.createElement(u.default,{text:r,direction:"auto",titlify:!0,ellipsify:!0}):null,{title:N,canonicalUrl:b,description:D,thumbnail:I}=M||{},O=M?n.default.createElement(E.default,{displayName:"ComposeBoxLinkPreview",escapable:!0,requestDismiss:w},n.default.createElement(h.default,{onOmit:w},n.default.createElement(f.default,{title:N,compose:!0,canonicalUrl:b,description:D,thumbnailJpeg:I}))):null;return n.default.createElement(p.default,{type:p.BoxModalType,ref:t},n.default.createElement(i.default,null,n.default.createElement(d.default,{type:d.DRAWER_HEADER_TYPE.POPUP,onBack:S},k),n.default.createElement(l.default,null,n.default.createElement(c.default,{className:v.default.container},n.default.createElement("div",{className:v.default.inputContainer},n.default.createElement(_.default,{a8n:"text-message-modal-text-unput",value:P,maxLength:o.default.MAX_TXT_MSG_SIZE,onChange:e=>{y(e)},supportsEmoji:!0,multiline:!0,spellCheck:!0,showRemaining:!0,focusOnMount:!0,theme:"small"})),O)),n.default.createElement("div",{className:v.default.btnContainer},n.default.createElement("div",{className:v.default.btnPosition},n.default.createElement(m.default,{large:!0,onClick:()=>{P.length&&s(P,M)}},n.default.createElement(g.default,{name:"send",directional:!0}))))))},P=(0,n.forwardRef)(S);t.default=P},19049:(e,t,a)=>{"use strict";var r=a(20862),s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(94184)),o=r(a(67294)),i=s(a(27306)),l=s(a(71801)),d=s(a(31763)),u=s(a(25404)),c=a(67052),f=a(53615),p=s(a(66761)),h=a(58635),m=a(39950),g=a(66248),_=s(a(116)),v=s(a(38924)),E=a(79665),C=s(a(62745)),S=s(a(87120));class P extends o.Component{constructor(...e){super(...e),this.onProductDetail=e=>{var{onProductDetail:t,shouldLog:a}=this.props;a&&(0,h.logProfileProductClick)({product:(0,E.unproxy)(e),catalogContext:(0,g.getProductCatalogContext)(this.context)}),t(e)}}componentDidMount(){var{shouldLog:e,catalog:t}=this.props;e&&null!=t&&(0,h.logBusinessProfileCatalogView)({catalogOwnerWid:t.id,catalogContext:(0,g.getProductCatalogContext)(this.context)})}_renderGallery(){var e,{catalog:t,filterProductId:a,productsToShow:r,hideIncompleteRows:s,onProductCatalog:i,showProductPlaceholders:d,seeMoreOverlay:u}=this.props,c=[],h=r,E=void 0;if((0,f.canSeeBizProfileV3)()&&(E="largeGallerySpacing"),null!=t?(e=t.productCollection,c=t.productCollection.getProductModels(),s&&c.length>3&&(h=Math.min(r,c.length-c.length%3)),c=(c=c.slice(0,h+1)).filter((e=>e.id.toString()!==a)).map(((e,a)=>{var r,s,n=null===(r=e.getPreviewImage())||void 0===r?void 0:r.mediaData;return n?(u&&a===h-1&&t.productCollection.length>h-1&&(s=p.default.t(1360)),o.default.createElement(v.default,{key:e.id.toString(),onClick:()=>this.onProductDetail(e),mediaData:n,overlayContent:s,theme:E})):o.default.createElement(o.default.Fragment,null)})).slice(0,h)):(e=new _.default).add({id:"_ph"}),!c.length&&!d)return null;for(var C,P=l.default.addIcon;d&&c.length<h;)c.push(o.default.createElement(S.default,{key:`_ph${c.length}`,onClick:i.bind(this,(0,g.getProductCatalogContext)(this.context)),className:(0,n.default)(P,{[l.default.largeGallerySpacing]:"largeGallerySpacing"===E}),title:p.default.t(2)},o.default.createElement(o.default.Fragment,null))),P=l.default.placeholderThumb;return(0,f.canSeeBizProfileV3)()&&(C="space-between"),o.default.createElement(m.Gallery,{productMedias:c,mediaCollection:e,justify:C})}_renderCatalogEntryButton(){var{onProductCatalog:e,catalogEntryLabel:t}=this.props;return null==t?null:o.default.createElement("div",{className:l.default.catalogEntryButton},o.default.createElement(i.default,{a8nText:"catalog-entry-button",type:"secondary",onClick:e.bind(this,(0,g.getProductCatalogContext)(this.context))},t))}_renderShopsLogo(){return this.props.showShopsLogo?o.default.createElement("div",{className:l.default.shopsLogo},o.default.createElement(C.default,{name:"fbshops",display:"inline"})):null}render(){var{onProductCatalog:e,title:t,subtitle:a,animation:r,sectionTheme:s}=this.props,n=this._renderCatalogEntryButton(),i=this._renderGallery(),d=a?o.default.createElement(c.FlexItem,{className:l.default.subtitle},a):null,f=o.default.createElement(c.FlexRow,{align:"center"},d,o.default.createElement(c.FlexItem,null,o.default.createElement(C.default,{className:l.default.chevron,name:"chevron-right-alt",directional:!0})));return o.default.createElement(u.default,{title:t||p.default.t(1275),titleOnClick:e.bind(this,(0,g.getProductCatalogContext)(this.context)),subtitle:f,theme:s,animation:r},i,n,this._renderShopsLogo())}}t.default=P,P.contextType=d.default,P.defaultProps={productsToShow:6,sectionTheme:"padding",hideIncompleteRows:!1},P.displayName="CatalogDrawerSection"},9506:(e,t,a)=>{"use strict";var r=a(95318),s=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(67294)),o=r(a(56107)),i=r(a(79274)),l=r(a(97420)),d=r(a(42699)),u=s(a(27890)),c=r(a(3395)),f=r(a(34727)),p=r(a(31763)),h=s(a(85002)),m=r(a(66761)),g=r(a(84366)),_=a(58635),v=r(a(23045)),E=a(66248),C=r(a(51051)),S=r(a(36350)),P=a(42473),y="catalog-link-anchor";class T extends n.Component{constructor(...e){super(...e),this._handleCatalogLinkClick=e=>{e.preventDefault(),this._handleSendCatalogLinkClick()},this._handleSendCatalogLinkClick=()=>{var{catalog:e,onSend:t}=this.props;l.default.openModal(n.default.createElement(C.default,{catalog:e,onSend:t}),{transition:"modal-flow"}),(0,_.logShareCatalogViaWALinkClick)({catalogOwnerWid:e.id,catalogContext:(0,E.getProductCatalogContext)(this.context)})},this._handleCopyLinkClick=()=>{var{catalog:e}=this.props;(0,_.logShareCatalogCopyLinkClick)({catalogOwnerWid:e.id,catalogContext:(0,E.getProductCatalogContext)(this.context)})}}render(){var e,t,{onBack:a,onCancel:r,catalog:s,contact:l,prompt:p,centerDrawer:_}=this.props,E=n.default.createElement(u.default,{id:l.id,size:82,quality:u.DETAIL_IMAGE_QUALITY.HIGH});return _&&(e="labels",t="center-column"),n.default.createElement(c.default,{key:"catalog-link-drawer",theme:e},n.default.createElement(h.default,{a8n:"catalog-link-title",title:m.default.t(479),onBack:a,onCancel:r,type:h.DRAWER_HEADER_TYPE.SMALL}),n.default.createElement(f.default,{theme:t},n.default.createElement("div",{className:o.default.prompt},p),n.default.createElement(i.default,{image:E,primary:n.default.createElement(v.default,{contact:l,useVerifiedName:!0}),theme:"identity",secondary:n.default.createElement(g.default,{id:y,href:(0,P.createCatalogLink)(s.id.user),onClick:this._handleCatalogLinkClick,noHandle:!0})}),n.default.createElement(S.default,{onClick:this._handleSendCatalogLinkClick}),n.default.createElement(d.default,{elementId:y,onClick:this._handleCopyLinkClick})))}}t.default=T,T.contextType=p.default,T.displayName="CatalogLinkDrawer"},87655:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return i.apply(this,arguments)};var s=r(a(48926)),n=r(a(99420)),o=a(53615);function i(){return(i=(0,s.default)((function*(e){var t;if(!(0,o.cartPropEnabled)())return!1;var a=n.default.get(e);if(!a||a.stale){var r=yield n.default.update(e);a=Array.isArray(r)?r[0]:r}return(null===(t=a.profileOptions)||void 0===t?void 0:t.cartEnabled)||!1}))).apply(this,arguments)}},57066:(e,t,a)=>{"use strict";var r=a(95318),s=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(67294)),o=r(a(84816)),i=r(a(31763)),l=r(a(68770)),d=r(a(59474)),u=r(a(66761)),c=r(a(77246)),f=a(94804),p=a(3875),h=a(66248),m=r(a(62745)),g=a(16241);class _ extends n.PureComponent{_getCartIcon(){var{onCartClick:e,cartCount:t,catalogId:a}=this.props;if(e&&a){var r=(0,g.isNumber)(t)&&t>0?t.toString():void 0,s=(0,f.getOnCartClickWithLog)(e,a,(0,h.getProductCatalogContext)(this.context));return n.default.createElement(p.MenuBarItem,{a8nText:"menu-bar-cart-link",icon:n.default.createElement(o.default,null),text:r,title:u.default.t(421),onClick:s})}return null}render(){var{onSendProduct:e,onReportProduct:t,onProductLinkClick:a}=this.props;return n.default.createElement(n.default.Fragment,null,this._getCartIcon(),n.default.createElement(p.MenuBarItem,{a8nText:"menu-bar-product-link",icon:n.default.createElement(c.default,null),title:u.default.t(1252),onClick:a}),n.default.createElement(p.MenuBarItem,{a8nText:"menu-bar-menu",icon:n.default.createElement(m.default,{name:"menu"}),title:u.default.t(1028)},n.default.createElement(l.default,{type:"dropdown_menu",flipOnRTL:!0,key:"ProductDetailHeader",dirX:"LEFT"},n.default.createElement(d.default,{a8n:"mi-send menu-item",action:e},u.default.t(1388)),n.default.createElement(d.default,{a8n:"mi-report menu-item",action:t},u.default.t(1303)))))}}t.default=_,_.contextType=i.default,_.displayName="DetailDrawerMenu"},84710:(e,t,a)=>{"use strict";var r=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.parseErrorState=function(e,t){if(e instanceof n.Unmount);else if(e instanceof s.ServerStatusCodeError)"not_found"===e.status||404===e.status?t("NOT_FOUND"):(t("ERROR"),__LOG__(3)`parseErrorState:Failed to fetch from server`);else{if(!(e instanceof s.WebdDrop))throw t("ERROR"),e;t("ERROR"),__LOG__(3)`parseErrorState:Failed to fetch due to WebdDrop`}};var s=a(66274),n=r(a(92246))},95598:(e,t,a)=>{"use strict";var r=a(20862),s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({fetchState:e}){switch(e){case"NONE":case"SUCCESS":return null;case"PENDING":return o.default.createElement("div",{className:(0,n.default)(l.default.loadingContainer)},o.default.createElement(d.default,{size:14,color:d.colorOptions.highlight}),o.default.createElement(u.TextSpan,{className:(0,n.default)(l.default.text,l.default.loadingText),theme:"small"},i.default.t(1274)));case"NOT_FOUND":case"ERROR":return o.default.createElement("div",{className:(0,n.default)(l.default.loadingContainer)},o.default.createElement(u.TextSpan,{className:l.default.text,theme:"small",color:"danger"},"NOT_FOUND"===e?i.default.t(1260):i.default.t(1246)));default:throw new Error(`invalid fetchState ${e}`)}};var n=s(a(94184)),o=s(a(67294)),i=s(a(66761)),l=s(a(44134)),d=r(a(17363)),u=a(45739)},77246:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return n.default.createElement(i.default,{name:"link",className:(0,s.default)(o.default.linkIcon,{[o.default.inheritColor]:"inherit-color"===e.theme})})};var s=r(a(94184)),n=r(a(67294)),o=r(a(93277)),i=r(a(62745))},84366:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({id:e,href:t,onClick:a,noHandle:r}){return s.default.createElement("span",{className:n.default.linkContainer},s.default.createElement(o.SelectableLink,{id:e,href:t,className:n.default.activeLink,selectable:!0,onClick:a,"data-nohandle":r},t))};var s=r(a(67294)),n=r(a(36074)),o=a(80493)},71509:(e,t,a)=>{"use strict";var r=a(20862),s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleProductDelete=function(e,t,a){return(0,c.logDeleteProductClick)(t,1,a),new Promise(((r,s)=>{i.default.openModal(o.default.createElement(l.default,{title:u.default.t(456),okText:u.default.t(1826),cancelText:u.default.t(1657),onOK:()=>{i.default.closeModal(),function(e,t,a){return(0,f.deleteProducts)([t.id.toString()]).then((()=>((0,c.logDeleteProductSuccess)(t,1,a),e.productCollection.evictImagesFromCache(t.id.toString()),e.productCollection.remove(t.id.toString()),e.collections.forEach((e=>e.productCollection.remove(t.id.toString()))),!0))).catchType(d.ServerStatusCodeError,(e=>((0,c.logDeleteProductFailed)(t,1,a,e.statusCode),i.default.openToast(o.default.createElement(g.default,{msg:u.default.t(457),id:(0,g.genId)("catalog_delete_product_failed")})),!1)))}(e,t,a).then((e=>r(e))).catch((e=>s(e)))},onCancel:()=>{i.default.closeModal(),r(!1)}},o.default.createElement("div",null,u.default.t(455))))}))},t.handleProductVisibilityChange=function(e,t){var a=e.id.toString(),r=!e.isHidden;r?(0,c.logCatalogProductHideClick)(a,t):(0,c.logCatalogProductShowClick)(a,t);return new Promise(((s,n)=>{var d=e.isHidden?u.default.t(476):u.default.t(467);i.default.openModal(o.default.createElement(l.default,{okText:u.default.t(1826),cancelText:u.default.t(1657),onOK:()=>{i.default.closeModal(),function(){return _.apply(this,arguments)}(e).then((()=>{r?(0,c.logCatalogProductHideSuccess)(a,t):(0,c.logCatalogProductShowSuccess)(a,t),s(!0)})).catch((e=>{r?(0,c.logCatalogProductHideFailed)(a,t):(0,c.logCatalogProductShowFailed)(a,t),n(e)}))},onCancel:()=>{i.default.closeModal(),r?(0,c.logCatalogProductHideCancelled)(a,t):(0,c.logCatalogProductShowCancelled)(a,t),s(!1)}},o.default.createElement("div",null,d)))}))},t.handleCollectionDelete=function(e,t,a){return new Promise(((r,s)=>{i.default.openModal(o.default.createElement(l.default,{title:u.default.t(444),okText:u.default.t(1826),cancelText:u.default.t(1657),onOK:()=>{i.default.closeModal(),function(e,t,a){return(0,m.deleteCollection)(t.id.toString(),a).then((()=>(e.collections.remove(t.id.toString()),!0))).catchType(d.ServerStatusCodeError,(()=>(i.default.openToast(o.default.createElement(g.default,{msg:u.default.t(441),id:(0,g.genId)("catalog_delete_product_failed")})),!1)))}(e,t,a).then((e=>r(e))).catch((e=>s(e)))},onCancel:()=>{i.default.closeModal(),r(!1)}},o.default.createElement("div",null,u.default.t(442))))}))},t.handleCollectionSave=function(e,t,a,r,s){return(t?(0,m.editCollection)(t.id.toString()||"",a,!1,r.map((e=>e.id.toString())),s.map((e=>e.id.toString())),"").then((s=>(e.collections.remove([t]),t.id=s.id,t.name=a,t.reviewStatus=s.reviewStatus,t.productCollection.reset(),t.productCollection.add(r),e.collections.add([t],{merge:!0}),!0))):(0,m.createCollection)(a,r.map((e=>e.id.toString())),"").then((t=>{var s=new h.default;return s.id=t.id,s.reviewStatus=t.reviewStatus,s.isHidden=!1,s.name=a,s.totalItemsCount=r.length,s.productCollection.add(r,{merge:!0}),e.collections.add(s),!0}))).catch((e=>{var t=u.default.t(454);return"not-acceptable"===e.text&&"products"===e.fieldName&&"duplicate"===e.fieldReason&&(t=u.default.t(453)),i.default.openToast(o.default.createElement(g.default,{msg:t,id:(0,g.genId)("catalog_save_collection_failed")})),!1}))};var n=s(a(48926)),o=s(a(67294)),i=s(a(97420)),l=s(a(58743)),d=a(66274),u=s(a(66761)),c=a(58635),f=a(86989),p=a(4014),h=s(a(30859)),m=a(60301),g=r(a(9931));function _(){return(_=(0,n.default)((function*(e){yield(0,p.productVisibilitySet)([{productId:e.id.toString(),isHidden:!e.isHidden}]),e.isHidden=!e.isHidden}))).apply(this,arguments)}},12772:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{onClick:t}=e,a=(0,s.default)(o.default.addItemButton,{[o.default.themeDefault]:"default"===e.theme,[o.default.themeInList]:"in-list"===e.theme});return n.default.createElement(i.default,{theme:"add-item",image:n.default.createElement("div",{className:o.default.addIcon}),customImage:!0,primary:e.title||l.default.t(437),className:a,onClick:t,idle:e.idle})};var s=r(a(94184)),n=r(a(67294)),o=r(a(79184)),i=r(a(79274)),l=r(a(66761))},47361:(e,t,a)=>{"use strict";var r=a(95318),s=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(67294)),o=a(71509),i=r(a(97420)),l=r(a(46274)),d=r(a(31763)),u=r(a(47060)),c=r(a(3152)),f=a(58635),p=a(66248),h=r(a(89709)),m=r(a(82286)),g=a(79665);class _ extends n.Component{constructor(...e){super(...e),this.state={openedProductId:void 0},this.onProductDetail=(e,t)=>{var{onProductDetail:a}=this.props;return(0,f.logCatalogListDetailClick)({product:(0,g.unproxy)(e),catalogContext:t}),this.setState({openedProductId:e.id.toString()}),a(e)},this.onProductShare=e=>{var{onProductShare:t}=this.props;t&&t(e)},this.onProductDelete=(e,t)=>{var{catalog:a}=this.props;(0,o.handleProductDelete)(a,e,t).then((()=>{e.id===this.state.openedProductId&&(i.default.closeDrawerMid(),this.setState({openedProductId:void 0}))}))},this.onProductHideShow=(e,t)=>{(0,o.handleProductVisibilityChange)(e,t)},this.renderItem=e=>{var{product:t}=e,{onCartOpen:a,shareLinks:r}=this.props;return n.default.createElement(d.default.Consumer,null,(e=>{var s=(0,p.getProductCatalogContext)(e);return n.default.createElement(h.default,{product:t,onCartOpen:a,onClick:()=>this.onProductDetail(t,s),onProductShare:r?this.onProductShare:null,onProductDelete:e=>this.onProductDelete(e,s),onProductHideShow:e=>this.onProductHideShow(e,s),canManageCatalog:this.props.canManageCatalog})}))}}getData(){var{catalog:e,onCartOpen:t}=this.props,a=void 0!==t;return e.productCollection.getProductModels(this.props.canManageCatalog).map((e=>({itemKey:`${e.id.toString()}_${a.toString()}`,product:e})))}render(){var{catalog:e}=this.props;return e.productCollection&&e.productCollection.getProductModels(this.props.canManageCatalog).length?n.default.createElement(c.default,{flatListControllers:[this.props.flatListController]},n.default.createElement(u.default,{flatListController:this.props.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:this.getData(),renderItem:this.renderItem,defaultItemHeight:l.default.PRODUCT_LIST_ITEM_HEIGHT,itemEnterAnimationsEnabled:!0})):null}}_.CONCERNS={catalog:["productCollection","afterCursor","id","index"]},_.displayName="ProductCatalogList";var v=(0,m.default)(_,_.CONCERNS);t.default=v},77453:(e,t,a)=>{"use strict";var r=a(20862),s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(94184)),o=r(a(67294)),i=s(a(99420)),l=a(84442),d=s(a(66281)),u=s(a(57984)),c=s(a(19049)),f=s(a(87655)),p=s(a(97420)),h=s(a(57066)),m=s(a(3395)),g=s(a(34727)),_=s(a(31763)),v=r(a(85002)),E=a(66274),C=r(a(92246)),S=s(a(66761)),P=s(a(48878)),y=a(58635),T=a(86989),M=a(66248),w=a(116),k=s(a(44134)),N=s(a(32770)),b=s(a(20395)),D=a(73006),I=s(a(52206)),O=s(a(32682)),R=r(a(17363)),x=s(a(82286)),A=a(79665),L=a(45739);class V extends o.Component{constructor(e){super(e),this.onCartClick=()=>{var{product:e,onCartClick:t}=this.props;t&&t(e.catalogWid.toString())},this._onReportProduct=()=>{var{product:e}=this.props;p.default.openModal(o.default.createElement(O.default,{product:e,sessionId:(0,M.getProductCatalogSessionId)(this.context)}))},this.onProductLinkClick=()=>{var{product:e}=this.props;this.props.onProductLinkClick(e)},this.onSendChat=()=>{var{product:e}=this.props,t=u.default.get(e.catalogWid);(0,T.sendProductToChat)(e,t,(0,M.getProductCatalogContext)(this.context)),(0,y.logProductMessageBusinessClick)(e,(0,M.getProductCatalogContext)(this.context))},this._onSendProduct=()=>{var{product:e}=this.props,{catalogWid:t}=e,a=u.default.get(t);if(a){var r=a.productCollection.get(e.id),s=r?(0,A.unproxy)(r):(0,A.unproxy)(e);p.default.attachProduct({product:s})}},this.onBack=()=>{var{onBack:e}=this.props;if(e)return e()},this.onProductCatalog=()=>{var{onProductCatalog:e,product:t}=this.props;e&&e(t.catalogWid,(0,M.getProductCatalogContext)(this.context))},this.onProductDetail=e=>{var{onProductDetail:t}=this.props;if(t)return t(e)},this.isRejected=()=>{var{reviewStatus:e}=this.props.product;return e===w.PRODUCT_REVIEW_STATUS.REJECTED},this._isAvailable=()=>{var{productFetchState:e}=this.state;return"ERROR"!==e&&"NOT_FOUND"!==e&&!this.isRejected()};var t=e.product.fetchedFromServer?"SUCCESS":"PENDING",a=null,r="NONE";e.refreshCarousel&&((a=u.default.get(e.product.catalogWid))&&a.productCollection&&a.fetchedFromServer?r="SUCCESS":(a=null,r="PENDING"));var s=d.default.findCart(this.props.product.catalogWid.toString());this.state={businessProfile:null,cartEnabled:!1,productCatalog:a,productFetchState:t,productCatalogFetchState:r,cart:s}}componentDidMount(){var{product:e,listeners:t}=this.props,a=this.state.cart,r=e.catalogWid,s=e.id.toString();r&&s&&(this._fetchData(),t.add(a,"change:cartItemCollection",(()=>{this.forceUpdate()})),(0,f.default)(r).then((e=>{this.setState({cartEnabled:e})})),(0,y.logProductDetailView)({product:(0,A.unproxy)(e),catalogContext:(0,M.getProductCatalogContext)(this.context),cartToggle:this.state.cartEnabled}))}_fetchData(){var{product:e,rejectOnUnmount:t}=this.props,a=e.catalogWid,r=e.id.toString(),s=u.default.findProduct({catalogWid:a,productId:r,productMsgMediaData:(0,A.unproxy)(e).productMsgMediaData}),n=i.default.find(a);return Promise.all([n,s]).checkpoint(t()).then((([e])=>(this.setState({productFetchState:"SUCCESS",businessProfile:e}),e))).then((e=>{(0,l.hasCatalog)(e)&&"PENDING"===this.state.productCatalogFetchState&&this._fetchProductCatalog()})).catchType(E.E404,(()=>{this.setState({productFetchState:"NOT_FOUND"})})).catchType(C.Unmount,(()=>{})).catchType(E.ServerStatusCodeError,(()=>{this.setState({productFetchState:"ERROR"}),__LOG__(3)`Failed to fetch product from server`})).catchType(E.WebdDrop,(()=>{this.setState({productFetchState:"ERROR"}),__LOG__(3)`Failed to fetch product`}))}_fetchProductCatalog(){var{product:e,rejectOnUnmount:t}=this.props,a=e.catalogWid;u.default.findCarouselCatalog(a).checkpoint(t()).then((e=>{var t=Array.isArray(e)?e[0]:e;this.setState({productCatalog:t||null,productCatalogFetchState:t?"SUCCESS":"NONE"})})).catchType(C.Unmount,(()=>{})).catchType(E.ServerStatusCodeError,(e=>{"not_found"===e.status||404===e.status?this.setState({productCatalog:null,productCatalogFetchState:"NOT_FOUND"}):(this.setState({productCatalog:null,productCatalogFetchState:"ERROR"}),__LOG__(3)`Failed to fetch product catalog from server`)})).catchType(E.WebdDrop,(()=>{this.setState({productCatalog:null,productCatalogFetchState:"ERROR"}),__LOG__(3)`Failed to fetch product catalog`}))}componentWillUnmount(){var{product:e}=this.props,t=e.catalogWid,a=e.id.toString();if(t&&a){var r=u.default.get(t),s=r&&r.msgProductCollection.get(a);s&&s.fetchedFromServer&&r&&r.msgProductCollection.remove(s)}}_renderTopBar(){var e,{productFetchState:t,productCatalogFetchState:a}=this.state,r=this._isAvailable();e="ERROR"===t?o.default.createElement(L.TextSpan,{className:k.default.text,theme:"small",color:"danger"},S.default.t(1246)):r?[o.default.createElement(R.default,{size:14,color:R.colorOptions.highlight,key:"DetailDrawer-loadingBar-spinner"}),o.default.createElement(L.TextSpan,{className:(0,n.default)(k.default.text,k.default.loadingText),theme:"small",key:"DetailDrawer-loadingBar-msg"},S.default.t(1274))]:o.default.createElement(L.TextSpan,{className:k.default.text,theme:"small",color:"danger"},S.default.t(1260));var s="PENDING"===t||"PENDING"===a||!r;return o.default.createElement("div",{className:(0,n.default)({[k.default.loadingContainer]:s,[k.default.shiftUp]:!s})},e)}_renderDrawerMenu(){if(!this._isAvailable())return null;var e=this.state.cartEnabled?this.onCartClick:void 0;return o.default.createElement(h.default,{onSendProduct:this._onSendProduct,onReportProduct:this._onReportProduct,onProductLinkClick:this.onProductLinkClick,onCartClick:e,cartCount:this.state.cart.itemCount,catalogId:this.props.product.catalogWid.toString()})}_renderDrawerHeader(){return o.default.createElement(v.default,{a8n:"drawer-title-profile",title:S.default.t(1250),onBack:this.onBack,type:v.DRAWER_HEADER_TYPE.SMALL,menu:this._renderDrawerMenu()})}render(){var{product:e}=this.props,{productCatalog:t,productFetchState:a}=this.state,r=this._isAvailable(),s=(0,l.hasCatalog)(this.state.businessProfile);return o.default.createElement(m.default,{onDrop:this.onBack,theme:"striped",key:"product-details-drawer"},this._renderDrawerHeader(),o.default.createElement(g.default,null,o.default.createElement("div",{className:k.default.body},this._renderTopBar(),o.default.createElement(b.default,{product:e,isAvailable:r,fetching:"PENDING"===a}),e.availability===D.ProductAvailability.OUT_OF_STOCK?o.default.createElement("div",{className:k.default.availabilityBanner},S.default.t(1249)):null,o.default.createElement(N.default,{product:e,onSendChat:this.onSendChat,isAvailable:r}),s&&t?o.default.createElement(c.default,{catalog:t,onProductCatalog:this.onProductCatalog,onProductDetail:this.onProductDetail,filterProductId:e.id.toString(),title:S.default.t(1243),animation:!1}):null)))}}V.CONCERNS={product:["id","catalogWid","productImageCollection","fetchedFromServer","name","availability","reviewStatus"]},V.contextType=_.default,V.displayName="ProductDetails";var F=(0,I.default)((0,P.default)((0,x.default)(V,V.CONCERNS)));t.default=F},32770:(e,t,a)=>{"use strict";var r=a(20862),s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(94184)),o=r(a(67294)),i=s(a(57117)),l=s(a(95780)),d=s(a(27306)),u=s(a(87655)),c=s(a(46274)),f=s(a(31763)),p=s(a(25404)),h=s(a(98712)),m=a(91072),g=a(85371),_=s(a(66761)),v=r(a(31667)),E=a(58635),C=a(66248),S=a(116),P=s(a(55675)),y=s(a(48709)),T=a(73006),M=s(a(82286)),w=a(79665),k=a(45739);class N extends o.Component{constructor(e){super(e),this.onAddToCart=e=>{var{product:t}=this.props;(0,i.default)(t,(0,C.getProductCatalogContext)(this.context)),e.stopPropagation()},this.onReadMore=()=>{this.setState({isDescExpanded:!0})},this._onClickUrl=(e,t)=>{e.stopPropagation();var{product:a}=this.props;(0,E.logDetailLinkClick)({product:(0,w.unproxy)(a),catalogContext:(0,C.getProductCatalogContext)(this.context)});var r=t&&v.findLink(t);r&&(0,m.openExternalLink)(r.url)},this.state={isDescExpanded:!1,cartEnabled:!1}}componentDidMount(){(0,u.default)(this.props.product.catalogWid).then((e=>{this.setState({cartEnabled:e})}))}_renderMessageBusinessButton(){var{onSendChat:e,product:t,isAvailable:a}=this.props;if(!e||!t.fetchedFromServer||!a||t.reviewStatus!==S.PRODUCT_REVIEW_STATUS.APPROVED)return null;var r=_.default.t(1255);return o.default.createElement("div",{className:P.default.buttonContainer,title:r},o.default.createElement(d.default,{className:P.default.button,onClick:e,type:"secondary"},r))}_renderAddToCartButton(){var{product:e,isAvailable:t}=this.props;if(!this.state.cartEnabled||!e.fetchedFromServer||!t||e.reviewStatus!==S.PRODUCT_REVIEW_STATUS.APPROVED)return null;var a=_.default.t(1240),r=e.availability===T.ProductAvailability.OUT_OF_STOCK;return o.default.createElement("div",{className:P.default.buttonContainer,title:a},o.default.createElement(d.default,{className:(0,n.default)(P.default.button,P.default.addToCartButton),onClick:this.onAddToCart,type:"secondary",disabled:r},o.default.createElement("span",{className:P.default.addToCartContainer},o.default.createElement(l.default,{className:(0,n.default)(P.default.addToCartIcon,{[P.default.addToCartIconDisabled]:r})}),a)))}_renderLink(e){var{product:t,isAvailable:a}=this.props;if(!t.fetchedFromServer||!e||!a)return null;var r=g.Configuration.TrustedGroupDesc({links:v.findLinks(e)});return o.default.createElement("div",{className:P.default.descBlock},o.default.createElement(h.default,{selectable:!0,formatters:r,text:e,onClick:t=>this._onClickUrl(t,e)}))}_renderDesc(){var{product:e}=this.props,{isDescExpanded:t}=this.state;if(!e.description&&!e.url&&!e.retailerId)return null;var a,r=!(!e||!e.description)&&e.description.length>c.default.GROUP_DESCRIPTION_INFO_PANEL_TRUNC_LENGTH;return e.description&&(a=o.default.createElement("div",{className:P.default.descBlock},o.default.createElement(h.default,{selectable:!0,multiline:!0,text:e.description,textLimit:t?1/0:c.default.GROUP_DESCRIPTION_INFO_PANEL_TRUNC_LENGTH}),r&&!t?o.default.createElement("span",{className:P.default.more,role:"button",onClick:this.onReadMore},` ${_.default.t(1283)}`):null)),o.default.createElement(k.TextDiv,{theme:"plain",className:P.default.description},a,this._renderLink(e.url),e.retailerId?o.default.createElement("div",{className:P.default.descBlock},o.default.createElement(h.default,{text:e.retailerId,selectable:!0,direction:"inherit"})):null)}render(){var{product:e}=this.props;return o.default.createElement(p.default,{theme:"padding-product",animation:!1},o.default.createElement(k.TextDiv,{theme:"title",className:P.default.name},o.default.createElement(h.default,{text:e.name,selectable:!0})),null!=e.priceAmount1000?o.default.createElement(k.TextDiv,{className:P.default.price,color:"dark",theme:"plain"},o.default.createElement(y.default,{product:e,selectable:!0,direction:"inherit"})):null,this._renderDesc(),this._renderMessageBusinessButton(),this._renderAddToCartButton())}}N.contextType=f.default,N.CONCERNS={product:["name","url","description","availability","currency","priceAmount1000","salePriceAmount1000","salePriceStartDate","salePriceEndDate","fetchedFromServer","retailerId","catalogWid","productImageCollection","imageHash","reviewStatus","imageCdnUrl","id"]},N.displayName="ProductDetailsInfo";var b=(0,M.default)(N,N.CONCERNS);t.default=b},64349:(e,t,a)=>{"use strict";var r=a(20862),s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ProductDetailsForDeepLink=void 0;var n=s(a(96391)),o=r(a(67294)),i=s(a(57984)),l=s(a(3395)),d=s(a(34727)),u=r(a(85002)),c=a(84710),f=s(a(95598)),p=s(a(64774)),h=s(a(66761)),m=s(a(77453)),g=s(a(52206)),_=a(32991);class v extends o.PureComponent{constructor(e){super(e),this.state={product:null,productFetchState:"NONE"};var{productId:t,businessOwnerJid:a}=this.props.productInfo,r=(0,p.default)({productId:t,businessOwnerJid:a});this.state=r?{product:r,productFetchState:"NONE"}:{product:r,productFetchState:"PENDING"}}componentDidMount(){this.state.product||this._fetchProduct()}_fetchProduct(){var{productId:e,businessOwnerJid:t}=this.props.productInfo,a=(0,_.createWid)(t);i.default.findProduct({catalogWid:a,productId:e}).checkpoint(this.props.rejectOnUnmount()).then((()=>{var t=i.default.get(a),r=(0,n.default)(t,"catalog").productCollection.get(e);this.setState({product:r,productFetchState:"SUCCESS"})})).catch((e=>{(0,c.parseErrorState)(e,(e=>this.setState({productFetchState:e})))}))}render(){return this.state.product?o.default.createElement(m.default,{product:this.state.product,onEnd:this.props.onEnd,onBack:this.props.onBack,onProductDetail:this.props.onProductDetail,onProductCatalog:this.props.onProductCatalog,refreshCarousel:!0,onProductLinkClick:this.props.onProductLinkClick,onCartClick:this.props.onCartClick}):o.default.createElement(l.default,{onDrop:this.props.onBack,key:"product-details-drawer"},o.default.createElement(u.default,{a8n:"drawer-title-profile",title:h.default.t(1250),onBack:this.props.onBack,type:u.DRAWER_HEADER_TYPE.SMALL}),o.default.createElement(d.default,null,o.default.createElement(f.default,{fetchState:this.state.productFetchState})))}}t.ProductDetailsForDeepLink=v,v.displayName="ProductDetailsForDeepLink";var E=(0,g.default)(v);t.default=E},37091:(e,t,a)=>{"use strict";var r=a(20862),s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(94184)),o=r(a(67294)),i=s(a(79274)),l=s(a(97420)),d=s(a(42699)),u=s(a(3395)),c=s(a(34727)),f=s(a(31763)),p=r(a(85002)),h=s(a(98712)),m=s(a(66761)),g=s(a(84366)),_=a(58635),v=a(66248),E=s(a(13906)),C=r(a(38924)),S=s(a(36350)),P=s(a(88003)),y=s(a(87443)),T=a(42473),M=a(79665),w="product-link-anchor";function k(e){var t=e.productImageCollection.head();return t?o.default.createElement(C.default,{className:(0,n.default)(E.default.productImage,E.default.productImageContainer),mediaData:t.mediaData}):o.default.createElement(C.ProductThumbPlaceholder,{className:(0,n.default)(E.default.productThumb,E.default.productThumbContainer)})}class N extends o.Component{constructor(...e){super(...e),this._handleProductLinkClick=e=>{e.preventDefault(),this._handleSendProductLinkClick()},this._handleSendProductLinkClick=()=>{var{product:e,onSend:t}=this.props;l.default.openModal(o.default.createElement(y.default,{product:e,onSend:t}),{transition:"modal-flow"}),(0,_.logShareProductViaWALinkClick)({product:e,catalogContext:(0,v.getProductCatalogContext)(this.context)})},this._handleCopyLinkClick=()=>{var{product:e}=this.props;(0,_.logShareProductCopyLinkClick)({product:e,catalogContext:(0,v.getProductCatalogContext)(this.context)})},this._handleSendProduct=()=>{var{product:e,onSend:t}=this.props;l.default.attachProduct({product:(0,M.unproxy)(e),onSend:t})}}render(){var e,t,a,{onBack:r,onCancel:s,product:n,prompt:l,centerDrawer:f,sendProductMsg:_}=this.props,v=(0,T.createProductLink)(n.catalogWid.user,n.id.toString());return f&&(e="labels",t="center-column"),a=null!=_?o.default.createElement(P.default,{onClick:this._handleSendProduct}):o.default.createElement(S.default,{onClick:this._handleSendProductLinkClick}),o.default.createElement(u.default,{key:"product-link-drawer",theme:e},o.default.createElement(p.default,{a8n:"product-link-title",title:m.default.t(1252),onBack:r,onCancel:s,type:p.DRAWER_HEADER_TYPE.SMALL}),o.default.createElement(c.default,{theme:t},o.default.createElement("div",{className:E.default.prompt},l),o.default.createElement(i.default,{image:k(n),primary:o.default.createElement(h.default,{text:n.name,direction:"auto"}),theme:"identity",secondary:o.default.createElement(g.default,{id:w,href:v,onClick:this._handleProductLinkClick,noHandle:!0})}),a,o.default.createElement(d.default,{elementId:w,onClick:this._handleCopyLinkClick})))}}t.default=N,N.contextType=f.default,N.displayName="ProductLinkDrawer"},28187:(e,t,a)=>{"use strict";var r=a(20862),s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ProductListDrawer=void 0;var n=s(a(23493)),o=s(a(23279)),i=r(a(67294)),l=s(a(12772)),d=s(a(66281)),u=s(a(84816)),c=s(a(57984)),f=s(a(87655)),p=s(a(46274)),h=s(a(3395)),m=s(a(34727)),g=s(a(31763)),_=r(a(85002)),v=s(a(68770)),E=s(a(59474)),C=r(a(92246)),S=a(84710),P=s(a(95598)),y=s(a(12063)),T=s(a(98607)),M=a(53615),w=s(a(66761)),k=s(a(77246)),N=s(a(48878)),b=a(58635),D=a(94804),I=a(3875),O=a(66248),R=s(a(47361)),x=s(a(8685)),A=s(a(30401)),L=s(a(52206)),V=s(a(82286)),F=s(a(62745)),U=a(16241);class B extends i.Component{constructor(e){super(e),this._catalogFlatListController=new y.default,this._handleScroll=e=>{this.state.loadingMore||e.scrollTop+p.default.SCROLL_FUDGE>e.scrollHeight-e.clientHeight&&this._loadMoreProduct()},this.handleScroll=(0,n.default)(this._handleScroll,100),this._loadMoreProduct=()=>{var{catalogId:e}=this.props,{stopLoading:t,loadedProducts:a}=this.state;if(!t){var r=c.default.assertGet(e);if(r.afterCursor){var s=r.productCollection.getProductModels().length;this.setState({loadingMore:!0,loadedProducts:s}),c.default.update(e).checkpoint(this.props.rejectOnUnmount()).then((e=>{this.setState({loadingMore:!1}),(Array.isArray(e)?e[0]:e).productCollection.getProductModels().length===a&&this.setState({stopLoading:!0}),s*p.default.PRODUCT_LIST_ITEM_HEIGHT<window.innerHeight&&this._loadMoreProduct()})).catchType(C.Unmount,(()=>{})).catch((()=>{this.setState({loadingMore:!1,stopLoading:!0})}))}}},this.onScroll=e=>{this.handleScroll(e.currentTarget),this.props.setScrollOffset&&this.props.setScrollOffset(e.currentTarget.scrollTop)},this._onCartChange=()=>{var e=this.state.cart.itemCount;this.state.cartCount!==e&&this.setState({cartCount:e})},this._onCartClick=()=>{var{contact:e,onCartClick:t}=this.props;t&&t(e.id.toString())},this._onCatalogLinkClick=()=>{var{catalog:e}=this.state;if(e){var{onCatalogLinkClick:t,contact:a,catalogId:r}=this.props;t(e,a),(0,b.logCatalogShareLinkClick)({catalogOwnerWid:r,catalogContext:(0,O.getProductCatalogContext)(this.context)})}};var t=c.default.get(this.props.catalogId),a=d.default.findCart(this.props.contact.id.toString());this.state={loadingMore:!1,loadedProducts:0,stopLoading:!1,cartEnabled:!1,catalog:t,cart:a,cartCount:a.itemCount,catalogFetchState:t?"SUCCESS":"NONE"}}componentDidMount(){var{catalogId:e,listeners:t}=this.props;t.add(this.state.cart,"all",this._onCartChange),(0,b.logCatalogListView)({catalogOwnerWid:e,catalogContext:(0,O.getProductCatalogContext)(this.context),cartToggle:this.state.cartEnabled}),this.state.catalog?(this._loadMoreProduct(),this._watchProductCollection()):this._findCatalog(),(0,f.default)(e).then((e=>{this.setState({cartEnabled:e})}))}_findCatalog(){return c.default.find(this.props.catalogId).checkpoint(this.props.rejectOnUnmount()).then((e=>{this.setState({catalog:e,catalogFetchState:"SUCCESS"}),this._loadMoreProduct(),this._watchProductCollection()})).catch((e=>{(0,S.parseErrorState)(e,(e=>this.setState({catalogFetchState:e})))}))}_watchProductCollection(){var{catalog:e}=this.state;this.props.autoUpdate&&null!=e&&(e.productCollection.on("add",(0,o.default)((()=>this.forceUpdate()),100)),e.productCollection.on("remove",(0,o.default)((()=>this.forceUpdate()),100)))}_getDrawerContent(){var e,{catalog:t,cartEnabled:a}=this.state,{contact:r,businessProfile:s,canManageCatalog:n,onAddProduct:o,onCartClick:d}=this.props,u=a&&d?this._onCartClick:void 0;return t?(n&&o&&(e=i.default.createElement(l.default,{onClick:()=>o(),theme:"in-list"})),i.default.createElement(i.default.Fragment,null,s&&i.default.createElement("div",{className:x.default.header},i.default.createElement(A.default,{profilePicThumb:r.getProfilePicThumb(),contact:r,businessProfile:s})),i.default.createElement("div",{className:x.default.list},e,i.default.createElement(R.default,{onCartOpen:u,onProductDetail:this.props.onProductDetail,flatListController:this._catalogFlatListController,catalog:t,canManageCatalog:this.props.canManageCatalog,shareLinks:this.props.canManageCatalog,onProductShare:this.props.onProductShare}),this.state.loadingMore&&i.default.createElement(T.default,null)))):i.default.createElement(P.default,{fetchState:this.state.catalogFetchState})}_getCartIcon(){var{onCartClick:e,headerType:t,catalogId:a}=this.props;if(this.state.cartEnabled&&e){var r=this.state.cartCount,s=(0,U.isNumber)(r)&&r>0?r.toString():void 0,n=(0,D.getOnCartClickWithLog)(this._onCartClick,a.toString(),(0,O.getProductCatalogContext)(this.context));return i.default.createElement(I.MenuBarItem,{a8nText:"menu-bar-cart-link",icon:i.default.createElement(u.default,{theme:t===_.DRAWER_HEADER_TYPE.LARGE?"inherit-color":null}),text:s,title:w.default.t(421),onClick:n})}return null}_getDrawerHeaderMenu(){var{canManageCatalog:e,onOpenSettings:t}=this.props,a=e&&(0,M.canToggleCartOnOff)()?i.default.createElement(I.MenuBarItem,{a8nText:"menu-bar-menu",icon:i.default.createElement(F.default,{name:"menu"}),title:w.default.t(1028)},i.default.createElement(v.default,{type:"dropdown_menu",flipOnRTL:!0,key:"CatalogDetailHeader",dirX:"LEFT"},i.default.createElement(E.default,{a8n:"mi-foward menu-item",action:this._onCatalogLinkClick},w.default.t(747)),t&&i.default.createElement(E.default,{a8n:"mi-settings menu-item",action:t},w.default.t(484)))):i.default.createElement(I.MenuBarItem,{a8nText:"menu-bar-catalog-link",icon:i.default.createElement(k.default,{theme:this.props.headerType===_.DRAWER_HEADER_TYPE.LARGE?"inherit-color":null}),title:w.default.t(479),onClick:this._onCatalogLinkClick});return i.default.createElement(i.default.Fragment,null,this._getCartIcon(),a)}render(){return i.default.createElement(h.default,{theme:"products",onDrop:this.props.onBack},i.default.createElement(_.default,{title:w.default.t(1247),type:this.props.headerType||_.DRAWER_HEADER_TYPE.SMALL,onBack:this.props.onBack,menu:this._getDrawerHeaderMenu()}),i.default.createElement(m.default,{onScroll:this.onScroll,flatListControllers:[this._catalogFlatListController],scrollOffset:this.props.scrollOffset},this._getDrawerContent()))}}t.ProductListDrawer=B,B.CONCERNS={contact:["id"]},B.contextType=g.default,B.displayName="ProductListDrawer";var j=(0,L.default)((0,N.default)((0,V.default)(B,B.CONCERNS)));t.default=j},30401:(e,t,a)=>{"use strict";var r=a(95318),s=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(67294)),o=a(27890),i=r(a(98712)),l=r(a(23045)),d=r(a(77440)),u=r(a(82286)),c=a(45739);class f extends n.Component{_renderDescription(){var{businessProfile:e}=this.props;return e&&e.description?n.default.createElement("div",{className:d.default.description},n.default.createElement(i.default,{text:e.description,direction:"auto",selectable:!0,titlify:!0})):null}_renderPicture(){var{profilePicThumb:e,contact:t}=this.props;if(!e)return null;var a=(0,o.getDefaultIcon)(t.id);return n.default.createElement("div",{className:d.default.photo},n.default.createElement(o.DetailImageCommon,{profilePicThumb:e,loader:!0,defaultIcon:a,profilePicThumbImg:e.imgFull,spinnerClassName:d.default.spinner,imgClassName:d.default.img,theme:"business"}))}render(){var{contact:e}=this.props;return n.default.createElement("div",{className:d.default.header},this._renderPicture(),n.default.createElement("div",{className:d.default.text},n.default.createElement(c.TextDiv,{className:d.default.name,theme:"large"},n.default.createElement(l.default,{contact:e,selectable:!0,useVerifiedName:!0})),this._renderDescription()))}}f.CONCERNS={profilePicThumb:["imgFull"],contact:["id","isMe"],businessProfile:["description"]},f.displayName="ProductListDrawerHeader";var p=(0,u.default)(f,f.CONCERNS);t.default=p},20395:(e,t,a)=>{"use strict";var r=a(95318),s=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(67294)),o=r(a(97420)),i=r(a(31763)),l=r(a(5365)),d=a(58635),u=a(66248),c=r(a(53584)),f=r(a(82286)),p=a(79665);class h extends n.Component{constructor(...e){super(...e),this.onClick=(e,t)=>{var{product:a}=this.props;(0,d.logDetailImageClick)({product:(0,p.unproxy)(a),catalogContext:(0,u.getProductCatalogContext)(this.context)});var r={activeProductImage:t,productImageCollection:a.productImageCollection,getZoomNode:()=>e,product:a};o.default.productImageViewerModal(r,(0,u.getProductCatalogSessionId)(this.context))}}render(){var{product:e,isAvailable:t,fetching:a}=this.props,r=e.productImageCollection.toArray();return n.default.createElement("div",{className:c.default.imageCarouselContainer},n.default.createElement(l.default,{images:r,fetching:a,onClick:t?this.onClick:null,renderFallback:!t,fallbackMediaData:e.productMsgMediaData}))}}h.contextType=i.default,h.CONCERNS={product:["productImageCollection","productMsgMediaData","catalogWid","imageCdnUrl"]},h.displayName="ProductTile";var m=(0,f.default)(h,h.CONCERNS);t.default=m},45454:(e,t,a)=>{"use strict";var r=a(95318),s=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(67294)),o=r(a(27306)),i=r(a(79766)),l=r(a(66761)),d=r(a(18467)),u=r(a(63665));class c extends n.Component{constructor(...e){super(...e),this.onCancel=()=>{var{onPopupCancel:e}=this.props;e()},this.onReport=()=>{this.props.onReport()},this.onTellUsMore=()=>{this.props.onTellUsMore()}}render(){var e=l.default.t(1307),t=n.default.createElement("div",{key:"ReportProductChoicePopup-desc"},l.default.t(1305)),a=n.default.createElement(o.default,{a8nText:"popup-controls-more",type:"secondary",onClick:this.onTellUsMore,key:"ReportProductChoicePopup-moreBtn"},l.default.t(1308)),r=n.default.createElement(o.default,{a8nText:"popup-controls-report",type:"secondary",onClick:this.onReport,key:"ReportProductChoicePopup-reportBtn"},l.default.t(1304)),s=n.default.createElement(o.default,{type:"secondary",onClick:this.onCancel,key:0},l.default.t(1657)),c={escape:this.onCancel},f=n.default.createElement("div",{className:u.default.buttons},n.default.createElement("div",{className:u.default.button},a),n.default.createElement("div",{className:u.default.button},r),n.default.createElement("div",{className:u.default.button},s));return n.default.createElement(i.default,{handlers:c},n.default.createElement(d.default,{title:e,actions:f,children:t}))}}t.default=c,c.displayName="ReportProductChoicePopup"},32682:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(67294)),n=a(96440),o=r(a(97420)),i=r(a(21681)),l=r(a(66761)),d=a(58635),u=a(86989),c=r(a(45454)),f=r(a(94327)),p=a(79665);class h extends i.default{constructor(...e){super(...e),this._submitReason=e=>{var{product:t,sessionId:a}=this.props;return(0,d.logReportProduct)({product:(0,p.unproxy)(t),catalogSessionId:a}),(0,u.reportProduct)(t.catalogWid,t.id.toString(),e)},this.onDelete=()=>{this.end()},this.onReport=e=>{this._onShowSubmittedToast(e)},this.onTellUsMore=()=>{this.push(s.default.createElement(f.default,{onTellUsMoreSubmit:this.onReport,onCancel:this.onCancel}),"none")},this.onPopupCancel=()=>{this.end()},this.onCancel=()=>{this.end()},this._onReportSubmitted=()=>{this.end()},this._onShowSubmittedToast=(e,t=(0,n.genId)())=>{var{product:a,sessionId:r}=this.props,i=this._submitReason(e),u=new n.ActionType(l.default.t(1271)),c=i.then((()=>((0,d.logReportProductSuccess)({product:(0,p.unproxy)(a),catalogSessionId:r}),new n.ActionType(`${l.default.t(1270)}. ${l.default.t(1306)}`)))).catch((()=>((0,d.logReportProductFailure)({product:(0,p.unproxy)(a),catalogSessionId:r}),__LOG__(3)`error submitting product report`,new n.ActionType(l.default.t(1269),{actionText:l.default.t(1316),actionHandler:()=>this._onShowSubmittedToast(e,t)}))));return o.default.openToast(s.default.createElement(n.ActionToast,{id:t,initialAction:u,pendingAction:c})),this._onReportSubmitted(),i}}componentDidMount(){this.push(s.default.createElement(c.default,{onTellUsMore:this.onTellUsMore,onReport:this.onReport,onPopupCancel:this.onPopupCancel,onCancel:this.onCancel}))}}t.default=h},94327:(e,t,a)=>{"use strict";var r=a(20862),s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(94184)),o=r(a(67294)),i=s(a(27306)),l=s(a(97420)),d=s(a(79766)),u=s(a(66761)),c=s(a(93883)),f=s(a(18467)),p=s(a(22883)),h=r(a(9931)),m=["NO_MATCH","SPAM","ILLEGAL","SCAM","KNOCKOFF","OTHER"];class g extends o.Component{constructor(...e){super(...e),this.state={reason:null},this.onCancel=()=>{var{onCancel:e}=this.props;e&&e()},this._onSubmit=()=>{if(!this.state.reason)return this._noSelectionToast();this.props.onTellUsMoreSubmit(this.state.reason)},this._onReasonChange=e=>{e.target&&e.target.value&&this.setState({reason:e.target.value})}}_noSelectionToast(){l.default.openToast(o.default.createElement(h.default,{msg:u.default.t(1272),id:(0,h.genId)()}))}_renderRadioOptions(){var{reason:e}=this.state;return m.map((t=>o.default.createElement("li",{key:`ReportProductReasonPopup-${t}-option`},o.default.createElement("label",{className:p.default.label},o.default.createElement("input",{type:"radio",name:t,value:t,onChange:this._onReasonChange,className:p.default.input,checked:e===t}),o.default.createElement(_,{reason:t})))))}render(){var e=u.default.t(1265),t=o.default.createElement("div",{className:(0,n.default)(p.default.section)},o.default.createElement("ul",{className:p.default.reasonList},this._renderRadioOptions())),a=o.default.createElement(i.default,{a8nText:"popup-controls-submit",type:"primary",onClick:this._onSubmit,key:"ReportProductReasonPopup-submitButton",disabled:!this.state.reason},u.default.t(1268)),r=o.default.createElement(i.default,{type:"secondary",a8nText:"popup-controls-cancel",onClick:this.onCancel,key:"ReportProductReasonPopup-cancelButton"},u.default.t(1657)),s={escape:this.onCancel},l=o.default.createElement("div",{className:p.default.buttons},r,a);return o.default.createElement(d.default,{handlers:s},o.default.createElement(f.default,{title:e,actions:l,children:t}))}}function _(e){var{reason:t}=e;switch(t){case"NO_MATCH":return o.default.createElement(c.default,{id:1263});case"SPAM":return o.default.createElement(c.default,{id:1267});case"ILLEGAL":return o.default.createElement(c.default,{id:1261});case"SCAM":return o.default.createElement(c.default,{id:1266});case"KNOCKOFF":return o.default.createElement(c.default,{id:1262});case"OTHER":return o.default.createElement(c.default,{id:1264});default:throw new Error(`Invalid reason: ${t}`)}}t.default=g,g.displayName="ReportProductReasonPopup"},784:(e,t,a)=>{"use strict";var r=a(20862),s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.RingTheme=void 0;var n=s(a(67154)),o=s(a(94184)),i=r(a(67294)),l=s(a(82286)),d=s(a(42138)),u=a(54302).Mirrored(["STATUS_V3_PANEL","BUSINESS_CONTACT_INFO"]);t.RingTheme=u;class c extends i.PureComponent{_genCircle(e){var t=100+this.props.stroke;return i.default.createElement("circle",(0,n.default)({cx:t/2,cy:t/2,r:50,fill:"none",strokeLinecap:"round",strokeWidth:this.props.stroke},e))}_genDasharray(e,t,a,r){for(var s="",n=0;n<e;n++)s+=n===e-1?`${t} ${a-e*(r+t)+r} `:`${t} ${r} `;return s}render(){var{statusV3:e,stroke:t,size:a}=this.props,r=100+t,s=e.totalCount,n=10,l=50*Math.PI*2;l-10*s<1&&(n=l/s/1.2);var c,f,p=(l-n*s)/s,h=l/4-n/2,m=e.contact.isMe?0:e.unreadCount,g=s-m;if(m){var _,v=h+s*(n+p);1!==s&&(_=this._genDasharray(m,p,l,n)),c=this._genCircle({strokeDashoffset:v,strokeDasharray:_,className:d.default.unread})}if(g){var E,C=h+g*(n+p);1!==s&&(E=this._genDasharray(g,p,l,n)),f=this._genCircle({strokeDashoffset:C,strokeDasharray:E,className:d.default.read})}return i.default.createElement("svg",{className:(0,o.default)({[d.default.statusV3PanelRing]:this.props.theme===u.STATUS_V3_PANEL,[d.default.businessContactInfoRing]:this.props.theme===u.BUSINESS_CONTACT_INFO}),width:a,height:a,viewBox:`0 0 ${r} ${r}`},c,f)}}c.CONCERNS={statusV3:["unreadCount","totalCount","contact"]},c.defaultProps={size:48,stroke:4,theme:u.STATUS_V3_PANEL},c.displayName="StatusV3ImageRing";var f=(0,l.default)(c,c.CONCERNS);t.default=f},30122:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.setupStatusV3Controller=function(e,t){if(e){if(e.type===o.default.TYPE.IMAGE){var a=4500;return(0,s.default)(t.caption)||(a+=2e3*Math.min(t.caption.length/150,1)),new l(a)}return e.type===o.default.TYPE.VIDEO?t.isGif?new u:new i.default:new l(3e3)}if(t.type===n.default.MSG_TYPE.CHAT){var r=2e3+60*Math.min(t.body.length,1e3);return new l(r)}return new l(3e3)},t.StatusV3GifController=t.StatusV3CountdownController=void 0;var s=r(a(41609)),n=r(a(46274)),o=r(a(23223)),i=r(a(12990));class l{constructor(e){this.addListeners=(e,t,a)=>{this._onStart=e,this._onPause=t,this._onEnded=a},this.removeListeners=()=>{this._onStart=void 0,this._onPause=void 0,this._onEnded=void 0},this.play=()=>{if(this._timer)__LOG__(2)`Duplicate timer start`;else{this._timer=setTimeout(this._onTimeup,this._timeout),this._start=(new Date).getTime();var e=this._onStart;e&&e(this._timeout,this._duration)}},this.stop=()=>{if(this._timer){clearTimeout(this._timer),this._timer=null;var e=(new Date).getTime();this._timeout-=e-this._start;var t=this._onPause;t&&t()}else __LOG__(2)`Timer stop called on stopped timer`},this.resume=()=>{this.play()},this.pause=()=>{this.stop()},this._onTimeup=()=>{var e=this._onEnded;e&&e()},this._duration=e,this._timeout=this._duration,this._start=0}get duration(){return this._duration}}t.StatusV3CountdownController=l;var d=6e3;class u{constructor(){this.removeListeners=()=>{this._onStart=void 0,this._onPause=void 0,this._onEnded=void 0,this._videoController.removeListeners(),this._countdownController.removeListeners()},this.setVideo=(e,t)=>{this._video!==e&&(this._video=e,null!=t&&(this._duration=t),this._videoController.setVideo(e))},this._onVideoStartHandler=()=>{var e=this._video;if(null!=e){var t=this._onStart,a=e.duration||this._duration,r=Math.max(3*a*1e3,d);t&&t(r-1e3*a*this._playCounter-1e3*e.currentTime,r)}},this._onVideoPauseHandler=()=>{var e=this._onPause;e&&e()},this._onVideoEndedHandler=()=>{var e=this._video;if(null!=e){this._playCounter++;var t=this._onEnded;3===this._playCounter&&(this._videoEnded=!0,this._timerEnded&&t&&t()),e.currentTime=0,this._videoEnded&&this._timerEnded||setTimeout((()=>{this._videoController.play()}),0)}},this._onTimerEndedHandler=()=>{var e=this._onEnded;this._timerEnded=!0,e&&this._videoEnded&&e()},this.play=()=>{this._videoController.play(),this._countdownController.play()},this.stop=()=>{this._videoController.stop(),this._countdownController.stop()},this.resume=()=>{this._videoController.resume(),this._countdownController.resume()},this.pause=()=>{this._videoController.pause(),this._countdownController.pause()},this._playCounter=0,this._timerEnded=!1,this._videoEnded=!1,this._videoController=new i.default,this._countdownController=new l(d),this._videoController.addListeners(this._onVideoStartHandler,this._onVideoPauseHandler,this._onVideoEndedHandler),this._countdownController.addListeners(void 0,void 0,this._onTimerEndedHandler)}addListeners(e,t,a){this._onStart=e,this._onPause=t,this._onEnded=a}get duration(){return Math.max(3*(this._video&&this._video.duration||this._duration)*1e3,d)}}t.StatusV3GifController=u},62568:(e,t,a)=>{"use strict";var r=a(20862),s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(94184)),o=r(a(67294)),i=s(a(86981)),l=s(a(34466)),d=s(a(36708));class u extends o.Component{constructor(){super(...arguments),this._setRefBar=e=>{this._refBar=e},this.onClick=e=>{this.props.onClick&&this.props.onClick(e)},this.onStart=(e,t)=>{if(this._refBar){var a=1e3*i.default.statusVideoMaxDuration,r=Math.min(e,a),s=Math.min(t,a);(0,d.default)(this._refBar,"stop"),this._barAnimation=(0,d.default)(this._refBar,{translateX:["0%",`-${r/s*100}%`]},{duration:r,easing:"linear"})}},this.onPause=()=>{this._refBar&&(0,d.default)(this._refBar,"stop")},this.onEnded=()=>this._barAnimation?this._barAnimation:Promise.resolve(),__LOG__(2)`Current index: ${this.props.current}, total count: ${this.props.total}`,this.props.current>=0&&this.props.current<this.props.total||(__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("bad current status v3 index"))}render(){for(var e=this,t=[],a=100/this.props.total+"%",r=function(r){var s=(0,n.default)(l.default.foreground,{[l.default.filled]:r<e.props.current,[l.default.empty]:r>e.props.current,[l.default.active]:r===e.props.current}),i=o.default.createElement("div",{className:l.default.wrapper,style:{width:a},key:r,onClick:()=>e.onClick(r)},o.default.createElement("div",{className:l.default.bg}),o.default.createElement("div",{className:l.default.mask},o.default.createElement("div",{className:s,ref:r===e.props.current?e._setRefBar:()=>{}})));t.push(i)},s=0;s<this.props.total;++s)r(s);return o.default.createElement("div",{className:l.default.container},t)}}t.default=u,u.displayName="StatusV3ProgressBar"},32532:(e,t,a)=>{"use strict";var r=a(20862),s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.StatusV3MsgNotFound=t.StatusV3LoadingError=t.InvalidStatusV3Iterator=void 0;var n=s(a(57043)),o=s(a(44908)),i=s(a(35161)),l=a(73591),d=a(60561),u=a(37776),c=s(a(23519)),f=r(a(19931));class p extends((0,u.customError)("InvalidStatusV3Iterator")){}t.InvalidStatusV3Iterator=p;class h extends((0,u.customError)("StatusV3LoadingError")){}t.StatusV3LoadingError=h;class m extends((0,u.customError)("StatusV3MsgNotFound")){}t.StatusV3MsgNotFound=m;t.default=class{constructor(e,t){if(this._printInfo=()=>{this.statuses.forEach((e=>{__LOG__(2)`Total count: ${e.totalCount}, unread count: ${e.unreadCount}, msgs length: ${e.msgs.length}`}))},this.getFirstUnread=(e,t,a)=>{var r=this.statuses.findIndex((t=>t.statusV3===e));if(-1!==r){var s,n=this.statuses[r],o=n.readMsgKeys;return a?(s=n.msgs?n.msgs.findIndex((e=>a&&e.id.toString()===a.toString())):-1)>=0?Promise.resolve({msgIdx:s,statusIdx:r}):Promise.reject(new p):-1===(s=n.msgs?n.msgs.findIndex((e=>!o.includes(e.id.toString()))):-1)&&e.msgs.msgLoadState.noEarlierMsgs?(s=t?0:n.msgs.length-1,Promise.resolve({msgIdx:s,statusIdx:r})):-1!==s?Promise.resolve({msgIdx:s,statusIdx:r}):0===n.unreadCount&&t&&n.msgs.length>0?Promise.resolve({msgIdx:0,statusIdx:r}):this._fetchMore(e).then((()=>this.getFirstUnread(e,t,a))).catch((e=>(__LOG__(3)`error while getting first unread status: ${String(e)}`,Promise.reject(new p))))}return Promise.reject(new p)},this.hasNext=e=>{var t=this.statuses[e.statusIdx];return e.msgIdx+1<t.totalCount||e.statusIdx+1<this.statuses.length},this.getNext=e=>{var t=this.statuses[e.statusIdx],a=t.statusV3;if(e.msgIdx+1<t.totalCount&&e.msgIdx+1<t.msgs.length)return Promise.resolve({msgIdx:e.msgIdx+1,statusIdx:e.statusIdx});if(e.msgIdx+1<t.totalCount)return a.msgs.msgLoadState.noEarlierMsgs?(__LOG__(3)`Loaded ${t.msgs.length} messages with total count ${t.totalCount}, but noEarlierMsgs set`,Promise.reject(new p)):this._fetchMore(a).then((()=>this.getNext(e))).catch((t=>{if(__LOG__(3)`error while loading more status msgs: ${String(t)}`,e.statusIdx+1<this.statuses.length){var a=this.statuses[e.statusIdx+1].statusV3;return this.getFirstUnread(a,!0)}return Promise.reject(new p)}));if(e.statusIdx+1<this.statuses.length){var r=this.statuses[e.statusIdx+1].statusV3;return this.getFirstUnread(r,!0)}return Promise.reject(new p)},this.hasPrev=e=>e.msgIdx>0||e.statusIdx>0,this.getPrev=e=>{if(e.msgIdx>0)return Promise.resolve({msgIdx:e.msgIdx-1,statusIdx:e.statusIdx});if(e.statusIdx>0){var t=this.statuses[e.statusIdx-1].statusV3;return this.getFirstUnread(t,!1)}return Promise.reject(new p)},this.statusAt=(e,t)=>{var a=this.statuses[e.statusIdx],r=a.statusV3;return t<a.msgs.length?Promise.resolve({msgIdx:t,statusIdx:e.statusIdx}):r.msgs.msgLoadState.noEarlierMsgs?Promise.reject(new p):this._fetchMore(r).then((()=>this.statusAt(e,t))).catch((e=>(__LOG__(3)`error while loading more status msgs: ${String(e)}`,Promise.reject(new p))))},this._fetchMore=e=>(0,d.promiseLoop)(((t,a,r)=>{var s=(0,l.delayMs)(f.expBackoff(r,12e4,1e3,.1));return e.loadMore().then((()=>{var a=this.statuses.findIndex((t=>t.statusV3===e));if(-1!==a){var l=this.statuses[a],d=l.totalCount,u=l.unreadCount,c=e.msgs.getModelsArray().slice(0,d),f=c.slice(0,d-u),p=(0,i.default)(f,(e=>e.id.toString()));l.msgs=c,l.readMsgKeys=(0,o.default)((0,n.default)(l.readMsgKeys,p)),t(!0)}else{if(!(r>=4))return s;t(!1)}})).catch((()=>{if(!(r>=4))return s;t(!1)}))})).then((e=>{if(!e)throw new h})),t){var a=e.msgs.getModelsArray().find((e=>t&&e.id.toString()===t.toString()));if(!a)throw new m;this.statuses=[{statusV3:e,totalCount:1,unreadCount:0,msgs:[a],readMsgKeys:[a.id.toString()]}]}else if(e.unreadCount>0&&!e.contact.isMe&&!e.contact.statusMute){var r=c.default.getUnexpired(!0),s=[];r.forEach((e=>{if(!e.contact.statusMute){var t=e.msgs.getModelsArray(),a=e.totalCount-e.unreadCount,r=t.slice(0,a),n=(0,i.default)(r,(e=>e.id.toString()));s.push({statusV3:e,totalCount:e.totalCount,unreadCount:e.unreadCount,msgs:t,readMsgKeys:n})}})),this.statuses=s}else{var u=e.msgs.getModelsArray(),g=e.totalCount-e.unreadCount,_=u.slice(0,g),v=(0,i.default)(_,(e=>e.id.toString())),E=[{statusV3:e,totalCount:e.totalCount,unreadCount:e.unreadCount,msgs:u,readMsgKeys:v}];this.statuses=E}this._printInfo()}}},12990:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(86981));function n(e){return Math.min(e,s.default.statusVideoMaxDuration)}var o=class{constructor(){this.addListeners=(e,t,a)=>{this._onStart=e,this._onPause=t,this._onEnded=a},this.setVideo=e=>{this._video!==e&&(this._unsetVideo(),this._video=e,null!=e&&(e.addEventListener("playing",this._onPlayingHandler),e.addEventListener("pause",this._onPauseHandler),e.addEventListener("ended",this._onEndedHandler),e.addEventListener("timeupdate",this._onTimeUpdate)))},this._unsetVideo=()=>{var e=this._video;e&&(this.stop(),e.removeEventListener("playing",this._onPlayingHandler),e.removeEventListener("pause",this._onPauseHandler),e.removeEventListener("ended",this._onEndedHandler),e.removeEventListener("timeupdate",this._onTimeUpdate))},this.play=()=>{this._video&&this._video.play()},this.pause=()=>{this._video&&!this._video.paused&&this._video.pause()},this.resume=()=>{this._video&&this._video.play()},this.stop=()=>{this._video&&!this._video.paused&&this._video.pause()},this._onPlayingHandler=()=>{var e=this._video;if(null!=e){var t=this._onStart;if(t){var a=n(e.duration);t(1e3*(a-e.currentTime),1e3*a)}}},this._onPauseHandler=()=>{var e=this._onPause;e&&e()},this._onEndedHandler=()=>{var e=this._onEnded;e&&e()},this._onTimeUpdate=()=>{var e,t=null===(e=this._video)||void 0===e?void 0:e.currentTime;if(null!=t&&t>=s.default.statusVideoMaxDuration){this.stop(),this._onEndedHandler();var a=this._video;a&&(a.removeEventListener("timeupdate",this._onTimeUpdate),a.removeEventListener("ended",this._onEndedHandler))}},this.removeListeners=()=>{this.stop(),this._onStart=void 0,this._onPause=void 0,this._onEnded=void 0}}get duration(){return null==this._video?0:1e3*n(this._video.duration)}};t.default=o},38923:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){window.getSelection().removeAllRanges();var t=document.getElementById(e),a=document.createRange();t&&a.selectNode(t),window.getSelection().addRange(a);try{var r=document.execCommand("copy");return window.getSelection().removeAllRanges(),r}catch(e){return!1}}},63030:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(81109)),n=a(78980),o=a(28757),i={};i[n.ExtendedTextMessageFontType.SERIF]={google:{families:["Roboto"]}},i[n.ExtendedTextMessageFontType.SANS_SERIF]={google:{families:["Droid Serif"]}},i[n.ExtendedTextMessageFontType.NORICAN_REGULAR]={google:{families:["Norican"]}},i[n.ExtendedTextMessageFontType.BRYNDAN_WRITE]={custom:{families:["Bryndan-Write"]}},i[n.ExtendedTextMessageFontType.OSWALD_HEAVY]={google:{families:["Oswald:bold"]}};var l={};l[n.ExtendedTextMessageFontType.BRYNDAN_WRITE]=`@font-face {font-family:"Bryndan-Write"; src:url("${o}") format("truetype");}`;var d=new class{constructor(){this.loadedFonts={},this.loadingPromise={}}load(e){if(this.loadedFonts[e])return Promise.resolve();if(this.loadingPromise[e])return this.loadingPromise[e];var t=i[e],a=l[e],r=(a?new Promise(((e,t)=>{var r=document.createElement("style");r.appendChild(document.createTextNode(a)),r.onload=e,r.onerror=t,document.head&&document.head.appendChild(r)})):Promise.resolve()).then((()=>new Promise(((a,r)=>{var n=(0,s.default)((0,s.default)({},t),{},{active:()=>{this.loadedFonts[e]=!0,a()},inactive:()=>{this.loadingPromise[e]=void 0,r("Failed to load font: "+e)}});WebFont.load(n)}))));return this.loadingPromise[e]=r,r}loadAllFonts(){return Promise.all(Array.from(n.ExtendedTextMessageFontType.members()).map((e=>this.load(e))))}};t.default=d},29594:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return n.default.supportsFeature(n.default.F.RICH_TEXT)?(0,s.default)(e,l,i.TextSerializer):e};var s=r(a(69256)),n=r(a(60246)),o=a(85371),i=a(51035),l=o.Configuration.ComposeBox()},42473:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createProductLink=function(e,t){return`https://wa.me/p/${t}/${e}`},t.createCatalogLink=function(e){return`https://wa.me/c/${e}`}},46822:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.dayToWeekday=l,t.businessHoursFromConfig=d,t.getWebsiteLink=function(e){return`https://l.wl.co/l?u=${encodeURIComponent(e)}`},t.getBusinessHours=function(e){var{config:t}=e,a=(new Date).getDay();return n.DAYS_OF_WEEK.map(((e,r)=>{var s=(a+r)%n.DAYS_OF_WEEK.length,o=n.DAYS_OF_WEEK[s];return{day:l(s),hours:d(t[o]),first:0===r}}))},t.getBusinessHoursForEdit=function(e){var t,a=null==e?{}:e.config,{note:r,timezone:o}=e||{},l=n.DAYS_OF_WEEK.map(((e,r)=>{var n,o=a[e],l=s.default.weekdays(r);return o&&(t=o.mode,o.hours&&(n=o.hours.map((([e,t])=>[(0,i.minutesToTime)(e),(0,i.minutesToTime)(t)])))),{dayName:l,dayKey:e,closed:!o,hours:n}})),d=s.default.weekdays(!0,0),u=s.default.weekdays().indexOf(d),c=l.splice(u);return{mode:t,days:[...c,...l],timezone:o,note:r}},Object.defineProperty(t,"minutesToTime",{enumerable:!0,get:function(){return i.minutesToTime}}),Object.defineProperty(t,"timeStringToMinutes",{enumerable:!0,get:function(){return i.timeStringToMinutes}});var s=r(a(30381)),n=a(72203),o=r(a(66761)),i=a(63265);function l(e){return s.default.weekdays(e)}function d(e){switch(e&&e.mode){case n.BUSINESS_HOUR_MODES.SPECIFIC_HOURS:return e&&e.hours?e.hours.map((e=>e.map(i.minutesToTime).join(" - "))).join("\n"):"";case n.BUSINESS_HOUR_MODES.APPOINTMENT_ONLY:return o.default.t(355);case n.BUSINESS_HOUR_MODES.OPEN_24H:return o.default.t(367);default:return o.default.t(356)}}},63265:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.minutesToTime=function(e){return s.default.utc().startOf("day").add(e,"minutes").format(n.default.timestampStrFormat())},t.timeStringToMinutes=void 0;var s=r(a(30381)),n=r(a(56656)),o=["h:mm A","h:mmA","HH:mm","HH.mm","H:mm","H.mm"];t.timeStringToMinutes=e=>{var t,a=e.trim();if(a){for(var r of o){var n=(0,s.default)(a,r,!0);if(n.isValid()){t=n;break}}if(t){var i=t,l=(0,s.default)().startOf("day"),d=i.diff(l);return s.default.duration(d).asMinutes()}}}},28757:(e,t,a)=>{e.exports=a.p+"bryndan_write_20e48b2ec8c64b2a1ceb5b28d9bcc9d0.ttf"},68862:(e,t,a)=>{"use strict";a.r(t),t.default={coverPhoto:"_3_2za",isEditable:"_1aFdX",avatar:"_3RULU",noStatusBorder:"_3xp59",hasStatusBorder:"IYr2u"}},91378:(e,t,a)=>{"use strict";a.r(t),t.default={cartIcon:"PKmps",inheritColor:"qM2C3"}},63696:(e,t,a)=>{"use strict";a.r(t),t.default={carousel:"alksS",contentContainer:"OkAlG",slidesContainer:"_1w5W1",loaded:"j1J2j",fadeIn:"_2QkLV",spinnerContainer:"_1kDDe",spinner:"_3j4fM"}},89882:(e,t,a)=>{"use strict";a.r(t),t.default={slide:"_2MjCA",slideInnerContainer:"_2cG76",image:"ubkU5"}},86281:(e,t,a)=>{"use strict";a.r(t),t.default={canvasComponent:"_2hvhy",canvasEmpty:"K5agt",canvasSecondRow:"_1oFnY",canvasFirst:"_35MQv",more:"_1s12y",container:"BPtzo",justifySpaceBetween:"_1BP_C",galleryEmpty:"_3l3Pp",drawer:"_3rdfe",drawerBody:"_3COK4"}},20720:(e,t,a)=>{"use strict";a.r(t),t.default={mediaCanvas:"_7xcOR",shade:"_3t-Dc",iconType:"_3SfD8",iconStar:"qSojz",mediaCanvasDuration:"_2ENh_",shadeTop:"kt7p8",canvasBody:"_2pnVj",canvasSelected:"xRcWX",mediaSelect:"_2GKAW",canvasComponent:"_3_8JL",canvasSecondRow:"_2j2vv",viewerFlow:"q0PwG",active:"_2IToT",viewerFlowTransparent:"_1Brnl"}},34435:(e,t,a)=>{"use strict";a.r(t),t.default={icon:"_23QTJ",disabled:"iP9Fm",transparent:"_2HMfd",compact:"_25tj-"}},18310:(e,t,a)=>{"use strict";a.r(t),t.default={labelRow:"_1_9J2",standaloneLabelRow:"_2Lv1o",labelContainer:"_3A-ba",standaloneLabelContainer:"_34ojr"}},39935:(e,t,a)=>{"use strict";a.r(t),t.default={section:"_17dED",control:"_3T0RE"}},16115:(e,t,a)=>{"use strict";a.r(t),t.default={icon:"_2I7Gg"}},89600:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_2QzJd",containerNoIcon:"_1EaD-",containerListAligned:"_1I4H7",icon:"_13qOF",danger:"_1O1hL",success:"x8B-w",bodyContainer:"_36Lzk",body:"Qy5WW"}},99597:(e,t,a)=>{"use strict";a.r(t),t.default={mediaPanelTools:"f3Dup",profileThumb:"_2xUs5",profileContainer:"Cq6XJ",media:"_1_TZb",profileViewer:"_3OWRM",profileViewerImg:"_2hH_e",container:"_9-YHG","media-viewer-animate":"_7DTuk",mediaViewerAnimate:"_7DTuk",headerContainer:"_1U_13"}},17932:(e,t,a)=>{"use strict";a.r(t),t.default={icon:"woEzZ"}},7200:(e,t,a)=>{"use strict";a.r(t),t.default={icon:"_1eLBZ"}},78654:(e,t,a)=>{"use strict";a.r(t),t.default={container:"xWfq_",popupPanel:"B7YnW",wrapper:"_35Bca",emojiIcon:"_1nsaN",sendIcon:"dJI7Y",lineWrapper:"_2X8K7"}},11780:(e,t,a)=>{"use strict";a.r(t),t.default={playerWrapper:"_1E241",mediaViewer:"_19K91",mediaStateControls:"_12QEi",playerBackground:"_20Ki1",media:"Kr9Tk",captionBackdrop:"_43j_5",mediaCaption:"_3yP6V",progressBackdrop:"_21bEk",progressBarBackdropNarrow:"_2paot",profile:"_1Oh7Z",nonClickProfile:"_3AuES",profileNarrow:"_2iahT",playerAvatar:"_19BWt",measuringProfile:"nF1-N",profileMac:"_1At-O",msgInfo:"_2LKvA",msgInfoName:"_3VYz8",timestamp:"_2tXxE",playerContent:"_2MwhR",statusPanelPlayerContent:"_2HrM5",statusThumbnailPlayerContent:"_1CbQs",loading:"_3e8Or",v3Image:"_1pf64",v3Video:"_3uHZH",text:"ecFHI",textLarge:"nRSvd",textMedium:"_1WIYL",textSmall:"_1PvQk",font_1:"_2b6no",font1:"_2b6no",font_2:"_3KLoY",font2:"_3KLoY",font_3:"_2LoU3",font3:"_2LoU3",font_5:"wQ88j",font5:"wQ88j",unknown:"_3-Nhy",textThumbnailPlayerContent:"_3wxAA"}},18914:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_1ufTj",inputContainer:"_1rO5S",btnContainer:"_3KRZ3",btnPosition:"D6yuB"}},71801:(e,t,a)=>{"use strict";a.r(t),t.default={chevron:"_23hMF",catalogEntryButton:"_3GuCY",subtitle:"_3nHWT",addIcon:"_2bk1N",placeholderThumb:"_1yVu_",largeGallerySpacing:"_2VRfc",shopsLogo:"taQA_"}},56107:(e,t,a)=>{"use strict";a.r(t),t.default={prompt:"_1MKrR"}},93277:(e,t,a)=>{"use strict";a.r(t),t.default={linkIcon:"_3n54f",inheritColor:"dF0c_"}},36074:(e,t,a)=>{"use strict";a.r(t),t.default={linkContainer:"_36niN",activeLink:"_218Ww"}},79184:(e,t,a)=>{"use strict";a.r(t),t.default={addItemButton:"_2e394",themeInList:"_2tMVN",themeDefault:"_28K_k",addIcon:"_3UMBX"}},44134:(e,t,a)=>{"use strict";a.r(t),t.default={body:"_3I775",loadingContainer:"AOdvD",text:"_2yxqg",loadingText:"_38kp2",shiftUp:"_1gMAq",availabilityBanner:"_32wIk"}},55675:(e,t,a)=>{"use strict";a.r(t),t.default={buttonContainer:"_1IcSo",button:"_2I8rD",addToCartButton:"_1jLhq",addToCartIcon:"PoXRl",addToCartIconDisabled:"_3l5-l",addToCartContainer:"_3shFG",name:"_1l7n8",price:"_27spI",originalPrice:"_1DYEx",description:"_2f0i8",more:"Jjucz",descBlock:"_2IFFX"}},13906:(e,t,a)=>{"use strict";a.r(t),t.default={productImage:"_3rmhv",productImageContainer:"_1E8LA",productThumb:"_3HQ90",productThumbContainer:"_6O-Qy",prompt:"_3K3du"}},8685:(e,t,a)=>{"use strict";a.r(t),t.default={header:"_9UV-x",list:"_8UHUF"}},77440:(e,t,a)=>{"use strict";a.r(t),t.default={header:"_1fhXS",photo:"_1XF90",text:"_3oXCf",name:"_3o6p1",description:"_2OTQS",spinner:"_2Fceq",img:"sz61d"}},53584:(e,t,a)=>{"use strict";a.r(t),t.default={imageCarouselContainer:"_33-Dh"}},63665:(e,t,a)=>{"use strict";a.r(t),t.default={buttons:"wH7Ij",button:"_2Na0-"}},22883:(e,t,a)=>{"use strict";a.r(t),t.default={section:"_3KLwP",reasonList:"CsJ_u",label:"KvCZU",input:"_3uXLe",buttons:"_1VUcX"}},42138:(e,t,a)=>{"use strict";a.r(t),t.default={statusV3PanelRing:"cFfKt",businessContactInfoRing:"_3EL6s",read:"_3tgk6",unread:"_1min4"}},34466:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_3b17O",wrapper:"sZBni",mask:"_3CRhO",bg:"_3r7AV",foreground:"_3f8oh",filled:"_3t0iC",empty:"_1A2HZ",active:"_2gskD"}}}]);