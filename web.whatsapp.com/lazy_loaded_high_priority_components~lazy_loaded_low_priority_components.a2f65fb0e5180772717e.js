/*! Copyright (c) 2021 WhatsApp Inc. All Rights Reserved. */
(self.webpackChunkwhatsapp_web_client=self.webpackChunkwhatsapp_web_client||[]).push([[9488],{75524:(t,e,a)=>{"use strict";var r=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.formatRemoveResult=function(t,e){return l(t,h,p,f,e)},e.formatResult=l,e.formatParticipantActionString=d,e.formatGroupStatusReasonString=u,e.formatParticipantStatusReasonString=c,e.addSuccessString=function(t,e){return s.default.t(182,{participantNames:t,_plural:e})},e.addFailedString=function(t,e){return s.default.t(180,{participantNames:t,_plural:e})},e.addPartialFailedString=function(){return s.default.t(181)},e.removeSuccessString=h,e.removeFailedString=p,e.removePartialFailedString=f,e.promoteSuccessString=function(t,e){return s.default.t(195,{participantNames:t,_plural:e})},e.promoteFailedString=function(t,e){return s.default.t(193,{participantNames:t,_plural:e})},e.promotePartialFailedString=function(){return s.default.t(194)},e.demoteFailedString=function(t,e,a){switch(a){case 406:return s.default.t(185,{participant:t});default:return s.default.t(184,{participantNames:t,_plural:e})}},e.demoteSuccessString=function(t,e){return s.default.t(187,{participantNames:t,_plural:e})},e.demotePartialFailedString=function(){return s.default.t(186)};var i=r(a(17025)),o=r(a(12950)),s=r(a(2408)),n=r(a(69635));function l(t,e,a,r,s){var l;if(207===t.status){var h={};for(var p in t)if(n.default.isWid(p)){var f=t[p];if((403!==f||!o.default.supportsFeature(o.default.F.GROUPS_V_4_JOIN_PERMISSION))&&207!==f){h[f]||(h[f]=[]);var m=i.default.get(p);m&&h[f].push(m)}}var _=[];for(var g in h){var v=d(e,a,c,parseInt(g,10),h[g]);v&&_.push(v)}l=_.length>0?_.join("\n"):r()}else l=d(e,a,u,t.status,s);return l}function d(t,e,a,r,i){var o=i.map((t=>t.formattedShortName)).join(s.default.t(806)),n=200===r;return(n?t(o,i.length):e(o,i.length,r))+(n?"":a(r,i.length))}function u(t){var e="";switch(t){case 403:e=" "+s.default.t(130);break;case 408:e=" "+s.default.t(190);break;case 404:e=" "+s.default.t(131);break;case 429:e=" "+s.default.t(132)}return e}function c(t,e){var a="";switch(t){case 401:case 406:case 409:break;case 404:a=" "+s.default.t(189,{_plural:e});break;case 408:a=" "+s.default.t(190,{_plural:e});break;case 500:a=" "+s.default.t(191);break;default:a=" "+s.default.t(192)}return a}function h(t,e){return s.default.t(200,{participantNames:t,_plural:e})}function p(t,e,a){switch(a){case 406:return s.default.t(199,{participant:t});default:return s.default.t(197,{participantNames:t,_plural:e})}}function f(){return s.default.t(198)}},97449:(t,e,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.addParticipants=function(t,e){return f((0,h.unproxy)(t),e)},e.removeParticipants=function(t,e){return _((0,h.unproxy)(t),e)},e.promoteParticipants=function(t,e){return v((0,h.unproxy)(t),e)},e.demoteParticipants=function(t,e){return S((0,h.unproxy)(t),e)};var o=i(a(48926)),s=a(6467),n=i(a(91952)),l=r(a(13540)),d=r(a(75524)),u=i(a(2408)),c=a(65518),h=a(15298),p=a(85893);function f(){return m.apply(this,arguments)}function m(){return(m=(0,o.default)((function*(t,e,a=(0,s.genId)()){var r,i=null===(r=t.groupMetadata)||void 0===r?void 0:r.participants;if(null==i)return Promise.reject(new l.ActionError);if(e.some((t=>i.get(t.id))))return __LOG__(3)`models:groupMetadata:participantCollection:addParticipants already a group member`,Promise.reject(new l.ActionError);if(!i.canAdd())return Promise.reject(new l.ActionError);var o=(0,c.sendAddParticipants)(t.id,e.map((t=>t.id))),h=e.map((t=>t.formattedShortName)).join(u.default.t(806)),m=new s.ActionType(u.default.t(183,{participantNames:h,_plural:e.length})),_=o.then((t=>{i.sendForNeededAddRequest(t);var a=d.formatResult(t,d.addSuccessString,d.addFailedString,d.addPartialFailedString,e);return new s.ActionType(a)})).catch((()=>(__LOG__(3)`models:groupMetadata:participantCollection:addParticipants dropped`,new s.ActionType(u.default.t(180,{participantNames:h,_plural:e.length}),{actionText:u.default.t(220),actionHandler:()=>f(t,e,a)}))));n.default.openToast((0,p.jsx)(s.ActionToast,{id:a,initialAction:m,pendingAction:_})),yield o}))).apply(this,arguments)}function _(){return g.apply(this,arguments)}function g(){return(g=(0,o.default)((function*(t,e,a=(0,s.genId)()){var r,i=null===(r=t.groupMetadata)||void 0===r?void 0:r.participants;if(null==i)return Promise.reject(new l.ActionError);if(e.some((t=>!i.canRemove(t))))return Promise.reject(new l.ActionError);var o=(0,c.sendRemoveParticipants)(t.id,e.map((t=>t.id))),h=e.map((t=>t.contact.formattedShortName)).join(u.default.t(806)),f=new s.ActionType(u.default.t(201,{participantNames:h,_plural:e.length})),m=o.then((t=>{var a=d.formatRemoveResult(t,e.map((t=>t.contact)));return new s.ActionType(a)})).catch((()=>(__LOG__(3)`models:groupMetadata:participantCollection:removeParticipants dropped`,new s.ActionType(u.default.t(197,{participantNames:h,_plural:e.length}),{actionText:u.default.t(220),actionHandler:()=>_(t,e,a)}))));n.default.openToast((0,p.jsx)(s.ActionToast,{id:a,initialAction:f,pendingAction:m})),yield o}))).apply(this,arguments)}function v(){return C.apply(this,arguments)}function C(){return(C=(0,o.default)((function*(t,e,a=(0,s.genId)()){var r,i=null===(r=t.groupMetadata)||void 0===r?void 0:r.participants;if(null==i)return Promise.reject(new l.ActionError);if(e.some((t=>!i.canPromote(t))))return Promise.reject(new l.ActionError);var o=(0,c.sendPromoteParticipants)(t.id,e.map((t=>t.id))),h=e.map((t=>t.contact.formattedShortName)).join(u.default.t(806)),f=new s.ActionType(u.default.t(196,{participantNames:h,_plural:e.length})),m=o.then((t=>{var a=d.formatResult(t,d.promoteSuccessString,d.promoteFailedString,d.promotePartialFailedString,e.map((t=>t.contact)));return new s.ActionType(a)})).catch((()=>(__LOG__(3)`models:groupMetadata:participantCollection:removeParticipants dropped`,new s.ActionType(u.default.t(193,{participantNames:h,_plural:e.length}),{actionText:u.default.t(220),actionHandler:()=>v(t,e,a)}))));n.default.openToast((0,p.jsx)(s.ActionToast,{id:a,initialAction:f,pendingAction:m})),yield o}))).apply(this,arguments)}function S(){return x.apply(this,arguments)}function x(){return(x=(0,o.default)((function*(t,e,a=(0,s.genId)()){var r,i=null===(r=t.groupMetadata)||void 0===r?void 0:r.participants;if(null==i)return Promise.reject(new l.ActionError);if(e.some((t=>!i.canDemote(t))))return Promise.reject(new l.ActionError);var o=(0,c.sendDemoteParticipants)(t.id,e.map((t=>t.id))),h=e.map((t=>t.contact.formattedShortName)).join(u.default.t(806)),f=new s.ActionType(u.default.t(188,{participantNames:h,_plural:e.length})),m=o.then((t=>{var a=d.formatResult(t,d.demoteSuccessString,d.demoteFailedString,d.demotePartialFailedString,e.map((t=>t.contact)));return new s.ActionType(a)})).catch((()=>(__LOG__(3)`models:groupMetadata:participantCollection:demoteParticipants dropped`,new s.ActionType(u.default.t(184,{participantNames:h,_plural:e.length}),{actionText:u.default.t(220),actionHandler:()=>S(t,e,a)}))));n.default.openToast((0,p.jsx)(s.ActionToast,{id:a,initialAction:f,pendingAction:m})),yield o}))).apply(this,arguments)}},3191:(t,e,a)=>{"use strict";var r=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.removeGroupParticipants=function(t,e){return g(t,e,h).catch((t=>{__LOG__(3)`error sending removing group participants iq: ${t}`}))},e.addGroupParticipants=function(t,e){return g(t,e,p).catch((0,n.filteredCatch)(d.ServerStatusCodeError,(t=>({status:t.statusCode}))))},e.demoteGroupParticipants=function(t,e){return g(t,e,f).catch((t=>{__LOG__(3)`error sending demoting group participants iq: ${t}`}))},e.promoteGroupParticipants=function(t,e){return g(t,e,m).catch((t=>{__LOG__(3)`error sending promoting group participants iq: ${t}`}))};var i=r(a(81109)),o=r(a(48926)),s=a(43129),n=a(55084),l=a(84922),d=a(54647),u=r(a(81771)),c=a(49438),h="remove",p="add",f="demote",m="promote";function _(t){return new u.default(`${t}GroupParticipantsReplyParser`,(e=>({id:e.attrString("id"),participants:e.child(t).mapChildren((t=>{var e=t.maybeChild("add_request");return{wid:t.attrUserWid("jid"),error:t.hasAttr("error")?t.attrInt("error"):null,invite_code:e&&e.attrString("code"),invite_code_exp:e&&e.attrString("expiration")}}))})))}function g(){return v.apply(this,arguments)}function v(){return(v=(0,o.default)((function*(t,e,a){var r,o=e.map((t=>(0,s.wap)("participant",{jid:(0,c.JID)(t)})));switch(a){case p:r=(0,s.wap)("add",null,o);break;case h:r=(0,s.wap)("remove",null,o);break;case f:r=(0,s.wap)("demote",null,o);break;case m:r=(0,s.wap)("promote",null,o);break;default:return Promise.reject(new Error(`invalid group operation ${a}`))}var n=(0,s.wap)("iq",{to:(0,c.GROUP_JID)(t),type:"set",xmlns:"w:g2",id:(0,s.generateId)()},r),u=yield(0,l.sendIq)(n,_(a));if(u.success){var{participants:g}=u.result,v={};return g.forEach((t=>{Object.assign(v,{[t.wid.toString()]:null!=t.error?t.error:200})})),(0,i.default)((0,i.default)({},v),{},{status:207,participants:g.map((t=>({[t.wid.toString()]:{code:null!=t.error&&t.error.toString()||"200",invite_code:t.invite_code,invite_code_exp:t.invite_code_exp}})))})}return Promise.reject(new d.ServerStatusCodeError(u.errorCode,u.errorText))}))).apply(this,arguments)}},65518:(t,e,a)=>{"use strict";var r=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.sendAddParticipants=function(t,e){var a;if(i.default.supportsFeature(i.default.F.MD_BACKEND)){if(!(a=(0,s.addGroupParticipants)(t,e)))return Promise.reject(new Error("addParticipants: not supported when not build with MD_BACKEND"))}else a=o.default.addParticipants(t,e);return a},e.sendRemoveParticipants=function(t,e){var a;if(i.default.supportsFeature(i.default.F.MD_BACKEND)){if(!(a=(0,s.removeGroupParticipants)(t,e)))return Promise.reject(new Error("sendRemoveParticipants: not supported when not build with MD_BACKEND"))}else a=o.default.removeParticipants(t,e);return a},e.sendDemoteParticipants=function(t,e){var a;if(i.default.supportsFeature(i.default.F.MD_BACKEND)){if(!(a=(0,s.demoteGroupParticipants)(t,e)))return Promise.reject(new Error("sendDemoteParticipants: not supported when not build with MD_BACKEND"))}else a=o.default.demoteParticipants(t,e);return a},e.sendPromoteParticipants=function(t,e){var a;if(i.default.supportsFeature(i.default.F.MD_BACKEND)){if(!(a=(0,s.promoteGroupParticipants)(t,e)))return Promise.reject(new Error("sendPromoteParticipants: not supported when not build with MD_BACKEND"))}else a=o.default.promoteParticipants(t,e);return a};var i=r(a(12950)),o=r(a(865)),s=a(3191)},88281:(t,e,a)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LoadType=e.EditType=void 0;var r=a(54302).Mirrored(["EDITING","PENDING","DONE","ERROR"]);e.EditType=r;var i=a(54302).Mirrored(["PENDING","DONE","ERROR"]);e.LoadType=i},77392:(t,e,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=function({contact:t,editable:e,profilePicThumb:a,onClick:r,onOpenStatus:i,onLoad:S,hideStatusV3:x}){var[j,P]=(0,s.useState)(window.innerWidth),[y,E]=(0,s.useState)(null);(0,s.useEffect)((()=>{function t(){P(window.innerWidth)}return window.addEventListener("resize",t),t(),()=>window.removeEventListener("resize",t)}),[]);var T=j>1300?152:122,I=!(0,c.canSeeStatusV3OnContact)()||t.statusMute||x?null:m.default.get(t.id);function b(){I&&(n.default.openModalMedia((0,C.jsx)(f.default,{removeTopDrawer:!1,statusV3:I}),{transition:"status-v3-modal"}),i&&i())}var w=null;y&&(w=(0,C.jsx)(g.default,{displayName:"ContextMenu",escapable:!0,popable:!0,requestDismiss:()=>{E(null)},children:(0,C.jsx)(v.default,{contextMenu:y})}));var O,M=null,N=l.default.noStatusBorder;null!=I&&(M=(0,C.jsx)(_.default,{statusV3:I,size:T+24,stroke:3,theme:_.RingTheme.BUSINESS_CONTACT_INFO}),N=l.default.hasStatusBorder);O=e&&null!=a?(0,C.jsx)(p.default,{profilePicThumb:a,size:T}):(0,C.jsx)(d.default,{id:t.id,size:T,loader:!0,onLoad:S,onClick:function(t){if(r)if(null!=I&&I.totalCount>0){t.stopPropagation(),t.preventDefault();var e=[(0,C.jsx)(u.default,{a8n:"mi-view-photo",action:()=>{r(t)},children:h.default.t(1742)},"view-photo"),(0,C.jsx)(u.default,{a8n:"mi-view-status",action:b,children:h.default.t(1609)},"view-status")];E({menu:e,event:t})}else r(t)},quality:d.DETAIL_IMAGE_QUALITY.HIGH});return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{className:(0,o.default)(l.default.coverPhoto,{[l.default.isEditable]:e})}),(0,C.jsxs)("div",{className:l.default.avatar,children:[M,(0,C.jsx)("div",{className:N,children:O})]}),w]})};var o=i(a(94184)),s=a(67294),n=i(a(91952)),l=i(a(68862)),d=r(a(88419)),u=i(a(47452)),c=a(78615),h=i(a(2408)),p=i(a(8497)),f=i(a(58719)),m=i(a(83125)),_=r(a(46929)),g=i(a(63477)),v=i(a(68062)),C=a(85893)},25349:(t,e,a)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"RawBusinessProfile",{enumerable:!0,get:function(){return r.RawBusinessProfile}}),Object.defineProperty(e,"BUSINESS_HOUR_MODES",{enumerable:!0,get:function(){return i.BUSINESS_HOUR_MODES}}),Object.defineProperty(e,"DAYS_OF_WEEK",{enumerable:!0,get:function(){return i.DAYS_OF_WEEK}});var r=a(47094),i=a(4650)},83607:(t,e,a)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getBusinessOpenState=function(t,e){var a,o;if(null==t.timezone)return{status:"unknown"};var s=e||new Date,d=new Date(s.toLocaleString("en-US",{timeZone:t.timezone})),u=(s.getTime()-d.getTime())/1e3/60,c=t.config[r.DAYS_OF_WEEK[s.getDay()]];if(!c)return{status:n.CLOSED_TODAY};switch(c.mode){case i.BUSINESS_HOUR_MODES.OPEN_24H:if(c)return{status:n.OPEN_24H};break;case i.BUSINESS_HOUR_MODES.APPOINTMENT_ONLY:if(c)return{status:n.OPEN_APPOINTMENT};break;case i.BUSINESS_HOUR_MODES.SPECIFIC_HOURS:var h=60*s.getHours()+s.getMinutes();if(1===(null===(a=c.hours)||void 0===a?void 0:a.length)){var p=c.hours[0][0],f=c.hours[0][1];return h>=p&&h<=f?{status:n.OPEN,openUntil:l(u+f)}:h<=p?{status:n.CLOSED,opensAt:l(u+p)}:{status:n.CLOSED}}if(2===(null===(o=c.hours)||void 0===o?void 0:o.length)){var m=c.hours[0][0],_=c.hours[0][1],g=c.hours[1][0],v=c.hours[1][1];return h>=m&&h<=_?{status:n.OPEN,openUntil:l(u+_),additionalOpen:l(u+g),additionalClose:l(u+v)}:h<m?{status:n.CLOSED,opensAt:l(u+m),additionalOpen:l(u+g),additionalClose:l(u+v)}:h>=g&&h<=v?{status:n.OPEN,openUntil:l(u+v)}:h<g?{status:n.CLOSED,opensAt:l(u+g)}:{status:n.CLOSED}}}return{status:"unknown"}},Object.defineProperty(e,"minutesToTime",{enumerable:!0,get:function(){return o.minutesToTime}}),Object.defineProperty(e,"timeStringToMinutes",{enumerable:!0,get:function(){return o.timeStringToMinutes}}),e.BUSINESS_OPEN_STATUS=e.convertToRawBusinessProfile=e.isValidBusinessHours=e.isValidTime=void 0;var r=a(4650),i=a(25349),o=a(71547),s=t=>void 0!==(0,o.timeStringToMinutes)(t);e.isValidTime=s;e.isValidBusinessHours=(t,e)=>{if(t===i.BUSINESS_HOUR_MODES.SPECIFIC_HOURS)for(var a in e){var r=e[a],{closed:o,hours:n}=r;if(!o)for(var[l,d]of n)if(!s(l)||!s(d))return!1}return!0};e.convertToRawBusinessProfile=({mode:t,dayValues:e,note:a,timezone:r})=>{var s={};for(var n in e){var l=e[n],{closed:d,hours:u}=l;if(!d){var c={mode:t};t===i.BUSINESS_HOUR_MODES.SPECIFIC_HOURS&&(c.hours=u.map((([t,e])=>[(0,o.timeStringToMinutes)(t)||0,(0,o.timeStringToMinutes)(e)||0]))),s[n]=c}}return{businessHours:{config:s,note:a,timezone:r||Intl.DateTimeFormat().resolvedOptions().timeZone}}};var n={OPEN:"open",CLOSED:"closed",OPEN_TODAY:"open_today",CLOSED_TODAY:"closed_today",OPEN_APPOINTMENT:"open_appointment",OPEN_24H:"open_24h",UNKNOWN:"unknown"};function l(t){var e=new Date,a=Math.floor(t/60);return e.setHours(a),e.setMinutes(t%60),e.setSeconds(0),e}e.BUSINESS_OPEN_STATUS=n},47094:(t,e,a)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"EditType",{enumerable:!0,get:function(){return r.EditType}}),Object.defineProperty(e,"LoadType",{enumerable:!0,get:function(){return r.LoadType}});var r=a(88281)},5221:(t,e,a)=>{"use strict";var r=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,n.jsx)(s.default,{name:"shopping-cart",className:(0,i.default)(o.default.cartIcon,{[o.default.inheritColor]:"inherit-color"===t.theme})})};var i=r(a(94184)),o=r(a(91378)),s=r(a(2966)),n=a(85893)},51314:(t,e,a)=>{"use strict";var r=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e,a=(0,d.default)(t.msgInfoParticipant,["t"]),r=(0,d.default)(t.contact,["id","name","formattedName","notifyName"]),c=(0,u.jsx)(s.default,{id:r.id}),h=o.default.relativeDateAndTimeStr(a.t),p=(0,u.jsx)("span",{title:h,children:h});!r.name&&r.notifyName&&(e=(0,u.jsx)(n.default,{className:l.default.notifyName,direction:"auto",text:r.notifyName}));return(0,u.jsx)(i.default,{contextEnabled:()=>!1,image:c,primary:(0,u.jsx)(n.default,{direction:"auto",text:r.formattedName,titlify:!0,ellipsify:!0}),secondary:p,secondaryDetail:e,style:{cursor:"auto"},theme:t.theme,idle:!0})};var i=r(a(91749)),o=r(a(25142)),s=r(a(88419)),n=r(a(85051)),l=r(a(39893)),d=r(a(76006)),u=a(85893)},10504:(t,e,a)=>{"use strict";var r=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.ComplianceInfoLoading=e.ComplianceInfoStructuralField=e.ComplianceInfoPrimitiveField=e.ComplianceInfoGroup=void 0;var i=r(a(82876)),o=r(a(92787)),s=r(a(25061)),n=a(63290),l=r(a(46714)),d=a(97504),u=a(85893);e.ComplianceInfoGroup=({title:t,children:e})=>(0,u.jsx)(s.default,{title:t,className:i.default.groupWrapper,children:e});e.ComplianceInfoPrimitiveField=({value:t,label:e})=>(0,u.jsxs)(o.default,{children:[(0,u.jsx)(h,{value:t}),(0,u.jsx)(c,{label:e})]});e.ComplianceInfoStructuralField=({valuesMap:t={},keys:e=[],label:a})=>{var r=e.reduce(((e,a)=>t[a]?e.concat(t[a]):e),[]),s=r.length?r:["-"];return(0,u.jsx)(o.default,{multiline:!0,restrictSpacing:!0,children:(0,u.jsxs)("div",{className:i.default.fieldStructuralWrapper,children:[(0,u.jsx)(c,{label:a}),s.map(((t,e)=>(0,u.jsxs)("div",{className:i.default.fieldStructuralSubvalue,"data-testid":"compliance-info-structural-field-value",children:[t,e<s.length-1?",":""]},String(t))))]})})};e.ComplianceInfoLoading=()=>(0,u.jsx)(n.FlexRow,{align:"center",justify:"center",children:(0,u.jsx)(n.FlexItem,{children:(0,u.jsx)(l.default,{})})});var c=({label:t})=>(0,u.jsx)("div",{className:i.default.fieldLabel,"data-testid":"compliance-info-field-label",children:(0,u.jsx)(d.TextSpan,{theme:"muted",children:t})}),h=({value:t})=>(0,u.jsx)("div",{className:i.default.fieldValue,"data-testid":"compliance-info-field-value",children:t||"-"})},92787:(t,e,a)=>{"use strict";var r=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=null!=t.side?(0,n.jsx)("div",{className:s.default.side,children:t.side}):null,a=(0,i.default)(s.default.container,{[s.default.multiline]:t.multiline,[s.default.restrictSpacing]:t.restrictSpacing});return(0,n.jsx)("div",{"data-a8n":o.default.key(t.a8nText),className:a,role:t.onClick?"button":null,onClick:t.onClick,children:(0,n.jsxs)("div",{className:s.default.block,children:[(0,n.jsx)("div",{className:s.default.main,children:t.children}),e]})})};var i=r(a(94184)),o=r(a(76610)),s=r(a(61388)),n=a(85893)},78502:(t,e,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var[a,r]=(0,l.useState)(null),i=()=>{r(null)};return(0,l.useEffect)((()=>{if(i(),t){var a=new d.default,l=a.signal;return(0,s.default)((function*(){try{var a=(0,p.hqLinkPreviewUploadSupported)(),i=yield(0,v.default)((0,h.default)(t,a),l),s=null==i?void 0:i.data;if(!s)return;if(r(s),!s.thumbnailHQ)return;var d=yield function(){return x.apply(this,arguments)}(s.thumbnailHQ,l,e);if(!d)return;r((0,o.default)((0,o.default)({},s),d))}catch(t){if(t.name===n.ABORT_ERROR)return;__LOG__(2)`useLinkPreview: error`}}))(),()=>{a.signal.aborted||a.abort()}}}),[t,e]),{linkPreview:a,clearLinkPreview:i}},e.findFirstWebLink=void 0;var o=i(a(81109)),s=i(a(48926)),n=a(58568),l=a(67294),d=i(a(14505)),u=a(52646),c=i(a(55454)),h=i(a(22750)),p=a(67659),f=r(a(17126)),m=a(57990),_=i(a(56346)),g=i(a(52937)),v=i(a(79267)),C=i(a(19895)),S=i(a(44503));function x(){return(x=(0,s.default)((function*(t,e,a){try{var r=yield(0,v.default)(g.default.createFromBase64Jpeg(t),e),i=yield(0,S.default)({thumbnail:r,mediaType:_.default.THUMBNAIL_LINK,mediaKeyInfo:(0,C.default)(),uploadOrigin:(0,m.getUploadOriginForChat)(a),forwardedFromWeb:!1,signal:e,timeout:c.default.MMS_THUMBNAIL_UPLOAD_TIMEOUT}),o=i.mediaEntry;if(!o)return;return{mediaKey:o.mediaKey,mediaKeyTimestamp:o.mediaKeyTimestamp,thumbnailDirectPath:o.directPath,thumbnailSha256:i.filehash,thumbnailEncSha256:o.encFilehash}}catch(t){if(t.name===n.ABORT_ERROR)return;__LOG__(2)`useLinkPreview.uploadHQPreview: error`}}))).apply(this,arguments)}e.findFirstWebLink=t=>{var e=(0,u.removeCodeBlocks)(t),a=f.findLinks(e,!0)[0];if(a)return a.url}},30925:(t,e,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var{images:e,renderFallback:a,fallbackMediaData:r,fetching:i,onClick:l}=t,v=(0,n.useRef)(null),C=(0,n.useRef)(null),S=(0,n.useRef)(null),x=(0,n.useRef)(null),j=(0,n.useRef)(null),[P,y]=(0,n.useState)(null),[E,T]=(0,n.useState)(e.filter((t=>t.mediaData.mediaStage===h.MEDIA_DATA_STAGE.RESOLVED)).length),[I,b]=(0,n.useState)(!1),w=E===e.length,O=()=>T((t=>t+1));(0,n.useEffect)((()=>{if(!w&&!a){var t,e=C.current;if(!e)return;null===(t=S.current)||void 0===t||t.cancel(),S.current=(S.current||Promise.resolve()).then((()=>(0,_.default)(e,{opacity:[1,0]},{delay:75,duration:50}))).cancellable().then((()=>{b(!0)})).catch((0,s.filteredCatch)(Promise.CancellationError,(()=>{(0,_.default)(e,"stop",!0)}))).finally((()=>{S.current=null}))}return()=>{var t;null===(t=S.current)||void 0===t||t.cancel()}}),[w,a]);var M,N,k,D=()=>{var t;return(null===(t=v.current)||void 0===t?void 0:t.children)?v.current.scrollWidth===v.current.offsetWidth?null:0===v.current.scrollLeft?"next":v.current.scrollWidth-1<=v.current.scrollLeft+v.current.offsetWidth?"prev":"both":null};if((0,n.useEffect)((()=>{y(D())}),[w]),a&&0===e.length)return(0,g.jsx)("div",{className:u.default.carousel,dir:"ltr",children:(0,g.jsx)("div",{className:(0,o.default)(u.default.contentContainer,u.default.slidesContainer),children:r&&(0,g.jsx)(c.default,{altText:"",mediaData:r,renderFallback:!0,singleSlide:!0})})});var L=()=>{x.current=null;var t=D();P!==t&&y(t)};if(e.length>1){var R=()=>{var t=v.current;if(null!=t&&("prev"===P||"both"===P)){for(var e=0,a=t.scrollLeft+Math.floor(t.offsetWidth/2),r=t.lastElementChild;r instanceof HTMLElement&&0===e;){var i=r.offsetLeft+Math.floor(r.offsetWidth/2);i<a&&(e=i-a),r=r.previousElementSibling}0!==e&&t.scrollBy({left:e,behavior:"smooth"})}},A=()=>{var t=v.current;if(null!=t&&("next"===P||"both"===P)){for(var e=0,a=t.scrollLeft+Math.floor(t.offsetWidth/2),r=t.firstElementChild;r instanceof HTMLElement&&0===e;){var i=r.offsetLeft+Math.floor(r.offsetWidth/2);a<i&&(e=i-a),r=r.nextElementSibling}0!==e&&t.scrollBy({left:e,behavior:"smooth"})}},F=()=>{j.current=null;var t=D();P!==t&&y(t)};k=()=>{null==j.current&&(j.current=requestAnimationFrame(F))},w&&null!=P&&(M=(0,g.jsx)(d.default,{type:d.ButtonType.Prev,onClick:R,onKeyDown:R,disabled:"prev"!==P&&"both"!==P,theme:f.RoundTheme.Small,overMedia:!0}),N=(0,g.jsx)(d.default,{type:d.ButtonType.Next,onClick:A,onKeyDown:A,disabled:"next"!==P&&"both"!==P,theme:f.RoundTheme.Small,overMedia:!0}))}var B=1===e.length,V=e.map(((t,e)=>(0,g.jsx)(c.default,{altText:"",image:t,singleSlide:B,mediaData:t.mediaData,onClick:l,onLoad:O},e))),U=w?null:(0,g.jsx)("div",{className:(0,o.default)(u.default.contentContainer,u.default.spinnerContainer),children:(0,g.jsx)("div",{className:u.default.spinner,ref:C,children:(0,g.jsx)(m.default,{color:"default",size:50,stroke:4})})}),H=(0,o.default)(u.default.carousel,{[u.default.loaded]:!i&&w,[u.default.fadeIn]:I});return(0,g.jsxs)("div",{className:H,dir:"ltr",children:[U,(0,g.jsx)("div",{ref:v,className:(0,o.default)(u.default.contentContainer,u.default.slidesContainer),onScroll:k,children:V}),M,N,(0,g.jsx)(p.default,{onResize:()=>{null==x.current&&(x.current=requestAnimationFrame(L))}})]})};var o=i(a(94184)),s=a(55084),n=a(67294),l=i(a(30523)),d=r(a(93972)),u=i(a(63696)),c=i(a(39203)),h=a(90672),p=i(a(88155)),f=a(3132),m=i(a(46714)),_=i(a(45285)),g=a(85893);l.default.polyfill()},39203:(t,e,a)=>{"use strict";var r=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(67294),o=r(a(89882)),s=a(90672),n=r(a(76006)),l=a(85893),d=({mediaData:t,altText:e,image:a,singleSlide:r,renderFallback:d,onClick:u,onLoad:c,forwardRef:h})=>{var{fullHeight:p,fullWidth:f,mediaStage:m,renderableUrl:_}=(0,n.default)(t,["fullHeight","fullWidth","mediaStage","renderableUrl"]),g=(0,i.useRef)(null),v=(0,i.useRef)(m===s.MEDIA_DATA_STAGE.RESOLVED);(0,i.useEffect)((()=>{!c||v.current||d||m!==s.MEDIA_DATA_STAGE.RESOLVED||(c(),v.current=!0)}),[c,d,m]);var C=f&&p?f/p:.8;C<.8&&(C=.8),C>1.91&&(C=1.91),C>1&&!r&&(C=1);var S={width:r&&C<1?100*C+"%":1!==C||r?null:"100%"},x={paddingTop:`${Math.floor(100/C)}%`},j={cursor:""+(u?"pointer":"auto")};return(0,l.jsx)("div",{ref:h?t=>h(t):null,className:o.default.slide,style:S,children:(0,l.jsx)("div",{className:o.default.slideInnerContainer,style:x,children:(0,l.jsx)("img",{ref:g,alt:e,src:_,className:o.default.image,style:j,draggable:"false",onClick:()=>{u&&g.current&&a&&u(g.current,a)}})})})};e.default=d},83427:(t,e,a)=>{"use strict";var r=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.EmptyCanvas=h,e.default=function(t){var{mediaCollection:e,fullCollection:a,chat:r,onScroll:n,justify:d}=t,f=t.medias||t.productMedias;if(!f)return null;var m=(0,i.default)(l.default.container,{[l.default.drawer]:a,[l.default.galleryEmpty]:0===e.length,[l.default.justifySpaceBetween]:"space-between"===d}),_=[...f];if(e.queryMediaBefore&&(a||_.length<6)){var g=(0,i.default)(l.default.more,l.default.canvasComponent,{[l.default.canvasSecondRow]:!a&&_.length>=3,[l.default.canvasFirst]:0===e.length});_.push((0,c.jsx)("div",{className:g,children:(0,c.jsx)(u.default,{stroke:6,size:24})},"spinner"))}if(0===e.length){if(a)return e.queryMediaBefore?(0,c.jsx)("div",{className:(0,i.default)(l.default.drawer,l.default.drawerBody),children:(0,c.jsx)(s.Loading,{})}):(0,c.jsx)(s.MediaMsgs,{});e.queryMediaBefore||e.hasMediaBefore||(m=(0,i.default)(m,l.default.galleryEmpty),_=[p(Math.max(r?r.docCount:0,0),Math.max(r?r.linkCount:0,0),Math.max(r?r.productCount:0,0))])}else for(var v=0;v<6;v++)_.push((0,c.jsx)(h,{},"empty"+v));return(0,c.jsx)("div",{onScroll:n,"data-a8n":o.default.key("media-gallery"),className:m,children:_})};var i=r(a(94184)),o=r(a(76610)),s=a(92231),n=r(a(2408)),l=r(a(59867)),d=r(a(65565)),u=r(a(46714)),c=a(85893);function h(){return(0,c.jsx)("div",{className:l.default.canvasEmpty})}function p(t,e,a){var r=[];return null!=t&&t>0&&r.push(n.default.t(771,{count:t,_plural:t})),null!=e&&e>0&&r.push(n.default.t(1089,{count:e,_plural:e})),d.default.productMediaAttachments&&null!=a&&a>0&&r.push(n.default.t(1460,{count:a,_plural:a})),r.length>0?r.join(n.default.t(806)):d.default.productMediaAttachments?n.default.t(1347):n.default.t(1346)}},80091:(t,e,a)=>{"use strict";var r=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,s.jsx)("div",{className:(0,i.default)(o.default.icon,{[o.default.transparent]:t.theme&&"transparent"===t.theme,[o.default.compact]:t.theme&&"compact"===t.theme,[o.default.disabled]:t.disabled}),children:t.children})};var i=r(a(94184)),o=r(a(34435)),s=a(85893)},92049:(t,e,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(a(23279)),s=a(67294),n=i(a(91952)),l=i(a(55454)),d=i(a(26821)),u=a(86723),c=i(a(71681)),h=i(a(79485)),p=i(a(35371)),f=r(a(72787)),m=a(85893),_=(0,o.default)(((t,e)=>{(0,u.setVideoVolumeSettings)(t,e)}),500);class g extends s.PureComponent{constructor(...t){super(...t),this.checkIteration=0,this.checkForSuccessInterval=0,this.hasCalledPlaying=!1,this.mediaBlobWasDownloadedBeforeMount=Boolean(this.props.mediaData.mediaBlob),this.refVideo=(0,s.createRef)(),this.onVolumeChange=()=>{var t=this.refVideo&&this.refVideo.current;t&&_(t.volume,t.muted)},this.startCheckForSuccess=()=>{this.checkIteration=0,this.checkForSuccessInterval||(this.checkForSuccessInterval=setInterval(this.checkForSuccess,250))},this.clearCheckForSuccess=()=>{this.checkForSuccessInterval&&(clearInterval(this.checkForSuccessInterval),this.checkIteration=0,this.checkForSuccessInterval=0)},this.checkForSuccess=()=>{if(f.default.state===f.STATE.CONNECTED){this.checkIteration++;var t=this.refVideo&&this.refVideo.current,e=t&&t.buffered;e&&e.length&&e.end(0)>0?this.onPlaying():this.checkIteration>240&&this.clearCheckForSuccess()}},this.onPlayerError=()=>{this.clearCheckForSuccess()},this.onOtherPlaying=t=>{t!==this&&this.pause()},this.pause=()=>{var t=this.refVideo&&this.refVideo.current;t&&(t.paused||t.pause())},this.onPlaying=()=>{this.clearCheckForSuccess(),n.default.mediaPlaying(this)},this.onLoadedMetadata=t=>{this.setStartTime();var{onLoadedMetadata:e}=this.props;e&&e(t)},this.setStartTime=()=>{var t=this.refVideo&&this.refVideo.current;null!=this.props.startTime&&0!==this.props.startTime&&t&&(t.currentTime=this.props.startTime)},this.onContextMenu=t=>{this.props.disableContextMenu&&t.preventDefault()}}componentDidMount(){this.props.listeners.add(n.default,"mediaPlaying",this.onOtherPlaying),this.props.listeners.add(n.default,"pttRecording",this.pause),this._updateVideoUserPrefs(),this.props.refVideo&&this.props.refVideo(this.refVideo)}componentWillUnmount(){_.flush(),this.clearCheckForSuccess(),this.pause(),p.default.isBlink&&this.refVideo.current&&(0,d.default)(this.refVideo.current)}componentDidUpdate(t){this._updateVideoUserPrefs(),t.startTime!==this.props.startTime&&this.setStartTime(),this.props.refVideo&&this.props.refVideo(this.refVideo)}_updateVideoUserPrefs(){var t=this.refVideo&&this.refVideo.current;if(t){var e=(0,u.getVideoVolumeSettings)();e&&("number"==typeof e.volume&&(t.volume=e.volume),"boolean"==typeof e.muted&&(t.muted=e.muted)),C()&&this.props.autoPlay&&this.startCheckForSuccess()}}render(){var t,e=this.props,{mediaData:a}=e,r=a.mediaBlob,i=a.streamable&&a.isStreamable();if(!this.mediaBlobWasDownloadedBeforeMount&&i||!r){if(!a.streamable||!a.isStreamable())return null;t=`${l.default.VIDEO_STREAM_URL}?key=${this.props.msg.id.toString()}`}else t=r.url();var o=C()&&!e.autoPlay?this.startCheckForSuccess:void 0;return(0,m.jsx)("video",{ref:this.refVideo,src:t,poster:e.poster,className:e.className,controls:e.controls,autoPlay:e.autoPlay,onClick:e.onClick,onDoubleClick:e.onDoubleClick,onVolumeChange:this.onVolumeChange,onLoadedMetadata:this.onLoadedMetadata,onPlay:o,onPlaying:this.onPlaying,onError:this.clearCheckForSuccess,onContextMenu:this.onContextMenu,children:e.children})}}g.CONCERNS={msg:["id"],mediaData:["mediaBlob","streamable"]},g.displayName="VideoTag";var v=(0,c.default)((0,h.default)(g,g.CONCERNS));function C(){return p.default.isGecko||p.default.isSafari}e.default=v},58719:(t,e,a)=>{"use strict";var r=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(a(99942)),o=r(a(44519)),s=a(85893);class n extends i.default{constructor(...t){super(...t),this.closeStatusViewer=()=>{this.end()}}componentDidMount(){this.push((0,s.jsx)(o.default,{initialStatusV3:this.props.statusV3,quotedMsgKey:this.props.msgKey,closeStatusViewer:this.closeStatusViewer,onMsgNotFound:this.props.onMsgNotFound}),"none")}}e.default=n},11364:(t,e,a)=>{"use strict";var r=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var{catalog:e,onSend:a}=t,r=(0,n.createCatalogLink)(e.id.user),d=e.id.equals((0,i.getMaybeMeUser)())?`${o.default.t(1425)} ${r}`:r;return(0,l.jsx)(s.default,{text:d,pushTransition:"none",popTransition:"none",onSend:a})};var i=a(86723),o=r(a(2408)),s=r(a(24024)),n=a(40307),l=a(85893)},32234:(t,e,a)=>{"use strict";var r=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var{product:e,onSend:a}=t,r=(0,n.createProductLink)(e.catalogWid.user,e.id.toString()),d=e.catalogWid.equals((0,i.getMaybeMeUser)())?`${o.default.t(1457)} ${r}`:r;return(0,l.jsx)(s.default,{text:d,pushTransition:"none",popTransition:"none",onSend:a})};var i=a(86723),o=r(a(2408)),s=r(a(24024)),n=a(40307),l=a(85893)},24024:(t,e,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(a(48926)),s=a(38512),n=a(82754),l=i(a(91952)),d=i(a(55454)),u=i(a(99942)),c=i(a(2408)),h=r(a(57774)),p=a(30239),f=i(a(65565)),m=i(a(45257)),_=a(85893);class g extends u.default{constructor(...t){var e;super(...t),e=this,this._selected=[],this._getSelected=()=>this._selected,this._handleSelectionChange=(t,e,a)=>{this._selected=a},this._handleForwardConfirmed=t=>{this._send(t)},this._handleCancel=()=>{this.end()},this._send=function(){var t=(0,o.default)((function*(t){var{text:a,title:r,onSend:i}=e.props;if(1===t.length){var o=t[0];yield e._pasteText(o,a),e.end(),window.innerWidth<=d.default.LAYOUT_2COLUMNS_MAX_WIDTH&&l.default.closeDrawerRight()}else e.push((0,_.jsx)(m.default,{defaultText:a,title:r||c.default.t(1246),onSend:(a,r)=>e._handleSend(t,a,r),onBack:e._handleBack}));i&&i()}));return function(){return t.apply(this,arguments)}}(),this._handleSend=(t,e,a)=>{this._sendText(t,e,a),this.end()},this._handleBack=()=>{this.pop()},this._pasteText=function(){var t=(0,o.default)((function*(t,a){yield e._ensureContactUnblocked(t),t.active?l.default.pasteChatTextInput(t,a):(t.setComposeContents({text:a}),l.default.openChatFromUnread(t).then((e=>{e&&l.default.focusChatTextInput(t)})))}));return function(){return t.apply(this,arguments)}}(),this._sendText=(t,a,r)=>{t.forEach(function(){var t=(0,o.default)((function*(t){yield e._ensureContactUnblocked(t),l.default.once("ui_idle",(()=>{(0,p.sendTextMsgToChat)(t,a,{linkPreview:r})}))}));return function(){return t.apply(this,arguments)}}())},this._ensureContactUnblocked=function(){var t=(0,o.default)((function*(t){t.isUser&&t.contact.isBlocked()&&(yield(0,s.unblockContact)(t.contact))}));return function(){return t.apply(this,arguments)}}()}componentDidMount(){this.push((0,_.jsx)(h.default,{title:this.props.title||c.default.t(1246),listType:h.ListType.CHAT_SELECT_MODAL,getInitialItems:this._getSelected,maxItems:f.default.multicastLimitGlobal,onConfirm:this._handleForwardConfirmed,onCancel:this._handleCancel,onSelectionChanged:this._handleSelectionChange,singleSelectionFooterType:n.FooterType.NEXT,multipleSelectionFooterType:n.FooterType.NEXT}))}}e.default=g},45530:(t,e,a)=>{"use strict";var r=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var{labels:e,theme:a}=t;return e&&(0,o.canDisplayLabel)()?(0,l.jsx)("div",{className:(0,i.default)(s.default.labelContainer,{[s.default.standaloneLabelContainer]:"standalone"===a}),children:(()=>{if(e)return e.map(((t,e)=>(0,l.jsx)("div",{className:(0,i.default)(s.default.labelRow,{[s.default.standaloneLabelRow]:"standalone"===a}),children:(0,l.jsx)(n.default,{labels:[t],showName:!0})},e)))})()}):null};var i=r(a(94184)),o=a(78615),s=r(a(18310)),n=r(a(84498)),l=a(85893)},26734:(t,e,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(55084),s=a(67294),n=a(96470),l=i(a(91952)),d=i(a(75940)),u=i(a(55454)),c=a(54647),h=i(a(4919)),p=i(a(2408)),f=a(97504),m=i(a(29458)),_=r(a(49201)),g=a(85893);class v extends s.PureComponent{constructor(...t){super(...t),this.state={isSubmitting:!1,submitted:!1,reason:""},this._onInputChange=t=>{this.setState({reason:t})},this._handleOk=()=>{var{collection:t}=this.props;this.setState({isSubmitting:!0}),(0,n.handleCollectionAppeal)(t,this.state.reason).then((()=>{this.setState({isSubmitting:!1,submitted:!0})})).catch((0,o.filteredCatch)(c.ServerStatusCodeError,(()=>{l.default.openToast((0,g.jsx)(_.default,{msg:p.default.t(497),id:(0,_.genId)("catalog_collection_appeal_submission_failed")})),this.setState({isSubmitting:!1})})))},this._handleCancel=()=>{l.default.closeModal()}}render(){var{submitted:t,isSubmitting:e,reason:a}=this.state;return t?(0,g.jsx)(d.default,{title:p.default.t(1503),onOK:this._handleCancel,children:(0,g.jsx)(f.TextDiv,{children:p.default.t(496)})}):(0,g.jsx)(d.default,{title:p.default.t(1503),onOK:this._handleOk,onCancel:this._handleCancel,okDisabled:e,children:(0,g.jsxs)("form",{children:[(0,g.jsx)(m.default,{a8n:"confirm-popup-text-input",placeholder:p.default.t(1072),onChange:this._onInputChange,value:a,maxLength:1e3}),(0,g.jsx)(h.default,{href:u.default.WA_COMMERCE_POLICY_URL,children:p.default.t(1084)})]})})}}e.default=v,v.displayName="AppealCollectionPopup"},53427:(t,e,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(67294),s=i(a(76610)),n=i(a(39935)),l=i(a(33287)),d=i(a(17747)),u=i(a(9042)),c=r(a(55588)),h=i(a(2408)),p=a(75050),f=a(97504),m=i(a(76006)),_=a(85893),g=(0,o.forwardRef)(((t,e)=>{var{settings:a,onClose:r}=t,{archive:i}=(0,m.default)(a,["archive"]),o=!i.classic;return(0,_.jsxs)(d.default,{ref:e,children:[(0,_.jsx)(c.default,{title:h.default.t(255),type:c.DRAWER_HEADER_TYPE.LARGE,onBack:r}),(0,_.jsx)(u.default,{children:(0,_.jsxs)("div",{className:n.default.section,children:[(0,_.jsx)("div",{"data-a8n":s.default.key("auto-unarchive-setting"),className:n.default.control,children:(0,_.jsx)(l.default,{onChange:()=>{var t=!i.classic;(0,p.setArchiveClassicSetting)(t)},checked:o})}),(0,_.jsxs)("div",{"data-a8n":s.default.key("auto-unarchive-setting-text"),children:[h.default.t(275),(0,_.jsx)(f.TextDiv,{theme:"muted",children:h.default.t(274)})]})]})})]})}));e.default=g},55059:(t,e,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=function({elementId:t,onClick:e}){return document.queryCommandSupported("copy")?(0,h.jsx)(l.default,{a8nText:"li-copy-link",icon:(0,h.jsx)(u.default,{name:"copy",className:s.default.icon}),onClick:()=>function(t,e){(0,n.default)(t)?o.default.openToast((0,h.jsx)(c.default,{msg:d.default.t(1087),id:(0,c.genId)()})):o.default.openToast((0,h.jsx)(c.default,{msg:d.default.t(1086),id:(0,c.genId)()}));null!=e&&e()}(t,e),children:d.default.t(730)}):null};var o=i(a(91952)),s=i(a(16115)),n=i(a(88543)),l=i(a(17061)),d=i(a(2408)),u=i(a(2966)),c=r(a(49201)),h=a(85893)},17061:(t,e,a)=>{"use strict";var r=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var{children:e,onClick:a,icon:r,className:c,color:h,theme:p}=t,[f,m]=(0,d.default)(a),_=null!=r?(0,u.jsx)("div",{className:(0,o.default)(n.default.icon,{[n.default.danger]:"danger"===h,[n.default.success]:"success"===h}),children:r}):null,g=(0,o.default)(n.default.container,c,{[n.default.containerNoIcon]:!r,[n.default.containerListAligned]:"list-aligned"===p}),v="string"==typeof e?e:null;return(0,u.jsxs)("div",(0,i.default)((0,i.default)({},m),{},{className:g,"data-a8n":s.default.key(t.a8nText),"data-ignore-capture":"any",ref:f,title:v,children:[_,(0,u.jsx)("div",{className:(0,o.default)(n.default.bodyContainer,{[n.default.borderless]:"borderless"===p}),children:(0,u.jsx)("div",{className:n.default.body,children:(0,u.jsx)(l.TextSpan,{theme:"title",color:h,children:e})})})]}))};var i=r(a(81109)),o=r(a(94184)),s=r(a(76610)),n=r(a(89600)),l=a(97504),d=r(a(82275)),u=a(85893)},21496:(t,e,a)=>{"use strict";var r=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=new c.default(m,g,{COOL_OFF_START_STORAGE_KEY:u.CoolOffPeriodKeys.CATALOG,MAX_VIEWS_IN_DAYS:1,COOL_OFF_DURATION_IN_DAYS:1});if(t.shouldShow()){var e=(0,f.jsx)(s.default,{onOK:()=>{t.dismiss(),o.default.closeModal()},children:(0,f.jsxs)(n.FlexColumn,{align:"center",children:[(0,f.jsx)(n.FlexItem,{xstyle:_.graphic,children:(0,f.jsx)(h.default,{name:"cart-interstitial-graphic"})}),(0,f.jsx)(p.TextHeader,{theme:"popup-title",children:l.default.t(1367)}),(0,f.jsx)(p.TextParagraph,{color:"secondary",className:i.default.description,children:l.default.t(1366)})]})});o.default.openModal(e),t.show(),t.startCoolOffToday()}};r(a(56720));var i=r(a(83522)),o=r(a(91952)),s=r(a(75940)),n=a(63290),l=r(a(2408)),d=r(a(4231)),u=a(79659),c=r(a(45009)),h=r(a(2966)),p=a(97504),f=a(85893),m=u.NuxKeyTypes.COOL_OFF_NUX.CART_INTERSTITIAL,_={graphic:{marginTop:"nylzjxre",marginEnd:"lfum0007",marginBottom:"bvhm1occ",marginStart:"r6x3u63k",color:"bc38n4nm"}},g=d.default.BANNER_TYPES.SMB_CATALOG_CART_INTERSTITIAL},24165:(t,e,a)=>{"use strict";var r=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=function({onOpenCollections:t}){var[e,a]=(0,i.useState)(!1),r=o.default.get((0,n.getMeUser)());return(0,d.useListener)(null==r?void 0:r.collections,"change",(()=>{a(!0)})),e&&(0,u.jsx)(l.default,{children:(0,u.jsx)(s.default,{onClick:t})})};var i=a(67294),o=r(a(60028)),s=r(a(7369)),n=a(86723),l=r(a(8820)),d=a(61192),u=a(85893)},7369:(t,e,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(70359),s=i(a(60028)),n=i(a(18482)),l=i(a(9322)),d=i(a(41651)),u=a(86723),c=i(a(2408)),h=i(a(4231)),p=a(79659),f=i(a(40325)),m=r(a(45009)),_=a(85893),g=p.NuxKeyTypes.COOL_OFF_NUX.COLLECTIONS,v={COOL_OFF_DURATION_IN_DAYS:2,VIEWS_BEFORE_COOL_OFF_IN_DAYS:1,CLICKS_BEFORE_COOL_OFF:1,MAX_VIEWS_IN_DAYS:2,COOL_OFF_START_STORAGE_KEY:p.CoolOffPeriodKeys.CATALOG};class C extends f.default{render(){var{onClick:t}=this.props,e=new m.default(g,h.default.BANNER_TYPES.SMB_COLLECTION_CREATION,v),a=(0,_.jsx)("span",{className:n.default.actionText,children:c.default.t(1361)});return(0,_.jsx)(d.default,{title:c.default.t(1363),subtitle:c.default.t(1362),actionText:a,onClick:t,nuxManager:e,theme:"nuxBlue"})}static shouldShow(){return(0,o.getABPropConfigValue)("web_abprop_collections_nux_banner")&&l.default.isSMB&&function(){var t=s.default.get((0,u.getMeUser)());if(null==t||null==t.collections)return!1;var e=t.collections.getCollectionModels(!0);return t.productCollection.getProductModels(!0).some((t=>!t.isHidden&&"REJECTED"!==t.reviewStatus))&&0===e.length}()&&(0,m.shouldShowNUX)(g,v)}}e.default=C,C.displayName="CollectionsBanner"},25817:(t,e,a)=>{"use strict";var r=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(a(94184)),o=r(a(7900)),s=a(67294),n=r(a(55092)),l=r(a(91952)),d=r(a(88419)),u=r(a(85051)),c=r(a(13985)),h=r(a(2408)),p=a(47941),f=r(a(90904)),m=r(a(99597)),_=r(a(79485)),g=r(a(2966)),v=r(a(63477)),C=r(a(45285)),S=a(85893);class x extends s.Component{constructor(...t){super(...t),this.state={style:{visibility:"hidden"}},this.handleScroll=t=>{Math.abs(t.deltaY)>3&&this.handleClose()},this.handleClose=()=>{if(!this.closing){var t;if(this.closing=!0,this.props.getZoomNode((e=>{t=e})),!t)return l.default.closeModalMedia();var e=this._refImage;if(e){this.props.animateBorderRadius&&(e.style.transition="border-radius 500ms cubic-bezier(.1,.82,.25,1)",e.style.borderRadius="50%");var a=(0,o.default)(t,"start"),r=e.getBoundingClientRect(),i=a.getBoundingClientRect(),s=i.top-r.top,n=i.left-r.left,d=a.clientWidth/e.clientWidth;(0,C.default)(e,{translateX:[n,0],translateY:[s,0],scale:[d,1]},{duration:200,easing:[.1,.82,.25,1]}).then((()=>{l.default.closeModalMedia()}))}}},this.handleImageLoad=t=>{var e=t.target;this.setState({size:{width:e.naturalWidth,height:e.naturalHeight}},(()=>{this.props.getZoomNode((t=>{var a=e.getBoundingClientRect(),r=t.getBoundingClientRect(),i=r.top-a.top,o={visibility:"hidden",transform:`translateX(${r.left-a.left}px) translateY(${i}px) scale(${t.clientWidth/e.clientWidth})`,transition:"transform 0s",borderRadius:void 0};this.props.animateBorderRadius&&(o.borderRadius="50%"),this.setState({style:o},(()=>{var t={transform:"translateX(0px) translateY(0px) scale(1)",transition:"transform 500ms cubic-bezier(.1,.82,.25,1)"};this.props.animateBorderRadius&&(t={transform:"translateX(0px) translateY(0px) scale(1)",borderRadius:"0%",transition:"transform 500ms cubic-bezier(.1,.82,.25,1),\n                                         border-radius 500ms cubic-bezier(.1,.82,.25,1)"}),this.setState({style:t})}))}))}))},this.setRefImage=t=>{this._refImage=t}}shouldComponentUpdate(t){return!!t.profilePicThumb.imgFull||(this.handleClose(),!1)}render(){var t,{contact:e,profilePicThumb:a}=this.props;return a.imgFull&&(t=(0,S.jsx)(c.default,{src:a.imgFull,hasPrivacyChecks:!0,onLoad:this.handleImageLoad,className:m.default.profileViewerImg})),(0,S.jsx)(v.default,{displayName:"PhotoViewer",escapable:!0,requestDismiss:this.handleClose,children:(0,S.jsxs)("div",{className:(0,i.default)("overlay",m.default.container),onWheel:this.handleScroll,onClick:this.handleClose,children:[(0,S.jsxs)("div",{className:m.default.headerContainer,children:[(0,S.jsx)("div",{className:m.default.profileThumb,children:(0,S.jsx)(n.default,{image:(0,S.jsx)(d.default,{id:e.id,size:40}),theme:"plain",primary:(0,S.jsx)(u.default,{text:e.formattedUser})})}),(0,S.jsx)("div",{className:m.default.mediaPanelTools,children:(0,S.jsx)(p.MenuBar,{theme:"strong",children:(0,S.jsx)(p.MenuBarItem,{a8nText:"btn-close",icon:(0,S.jsx)(g.default,{name:"x-viewer"}),title:h.default.t(1867),onClick:this.handleClose})},"media-panel-header")})]}),(0,S.jsx)("div",{className:m.default.profileContainer,dir:"ltr",children:(0,S.jsx)("div",{className:m.default.media,children:(0,S.jsx)(f.default,{type:"scaleDown",size:this.state.size,children:(0,S.jsx)("div",{className:m.default.profileViewer,"data-animate-profile-viewer":!0,ref:this.setRefImage,style:this.state.style,children:t})})})})]})})}}x.CONCERNS={contact:["formattedUser","id"],profilePicThumb:["imgFull"]},x.displayName="PhotoViewerModal";var j=(0,_.default)(x,x.CONCERNS);e.default=j},8497:(t,e,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var{profilePicThumb:e,size:a}=t,r=!e.canSet()&&!e.canDelete(),[i,m]=(0,n.useState)(!1),_=(0,p.default)();return(0,f.jsx)(d.default,{type:u.default.PROFILE,id:e.id,attachToChat:!1,pending:i,startImage:e.imgFull,readOnly:r,onImageSet:(e,a)=>{var r,i=t.profilePicThumb;m(!0),r=e&&a?(0,c.setProfilePic)(i,e,a):(0,c.deleteProfilePic)(i),(0,h.default)(r,_).catch((0,s.filteredCatch)(l.ActionError,(()=>{__LOG__(3)`ProfileDrawer: failed to set/delete profile image`}))).catch((0,o.catchAbort)((()=>{}))).finally((()=>{m(!1)}))},size:a})};var o=a(58568),s=a(55084),n=a(67294),l=i(a(13540)),d=r(a(45605)),u=r(a(76870)),c=a(76229),h=r(a(79267)),p=r(a(29579)),f=a(85893)},5646:(t,e,a)=>{"use strict";var r=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,l.jsx)(i.default,{a8nText:"li-share-link",icon:(0,l.jsx)(n.default,{name:"forward",className:s.default.icon}),onClick:t.onClick,children:o.default.t(1555)})};var i=r(a(17061)),o=r(a(2408)),s=r(a(17932)),n=r(a(2966)),l=a(85893)},74295:(t,e,a)=>{"use strict";var r=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,l.jsx)(i.default,{a8nText:"li-share-link",icon:(0,l.jsx)(n.default,{name:"forward",className:s.default.icon}),onClick:t.onClick,children:o.default.t(1578)})};var i=r(a(17061)),o=r(a(2408)),s=r(a(7200)),n=r(a(2966)),l=a(85893)},59168:(t,e,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(55084),s=a(67294),n=i(a(91952)),l=i(a(94167)),d=a(9492),u=i(a(96962)),c=i(a(91137)),h=a(22252),p=i(a(61136)),f=a(62238),m=i(a(2408)),_=i(a(40630)),g=i(a(199)),v=a(30239),C=i(a(78654)),S=i(a(2966)),x=r(a(49201)),j=i(a(63477)),P=i(a(68062)),y=i(a(82669)),E=a(85893);class T extends s.Component{constructor(){super(...arguments),this.emojiInputComponent=(0,u.default)(),this._refEmojiPanel=(0,s.createRef)(),this.isSkinTonePickerOpen=!1,this.handleSend=t=>{var e;if(t.preventDefault(),this._refInputLine){var a=this._refInputLine.value.trim();if(a.length){var r=(0,x.genId)();(0,f.findChat)(this.props.msg.sender).then((t=>(n.default.openToast((0,E.jsx)(x.default,{msg:m.default.t(1605),id:r})),(0,v.sendTextMsgToChat)(t,(0,p.default)(a),{quotedMsg:this.props.msg})))).then((()=>{this.props.onSend()})).catch((0,o.filteredCatch)(l.default,(()=>{var{chat:t}=this.state;t&&n.default.openToast((0,E.jsx)(x.default,{msg:m.default.t(1858,{contact:t.contact.formattedName}),id:r}))}))),null===(e=this._refInputLine)||void 0===e||e.reset(),this._emojiPickerClose(),this.props.dismissReply()}}},this.handleFocus=()=>{this.setState({focused:!0})},this.handleBlur=()=>{this.isSkinTonePickerOpen||document.activeElement===document.body&&this.setState({focused:!1})},this.handleSkinTonePicker=t=>{this.isSkinTonePickerOpen=t},this.isFocused=()=>this.state.focused,this.handleEmojiPicker=t=>{t&&(t.preventDefault(),t.stopPropagation());var e=(0,E.jsx)(c.default,{ref:this._refEmojiPanel,onEmoji:this.handleEmoji,onFocusNext:this.restoreFocus,onFocusPrev:this.restoreFocus});this.setState({emojiPicker:{menu:e,dirY:d.DirY.TOP,type:"emoji_picker",anchor:t.target}})},this.handleEmoji=t=>{this._refInputLine&&this._refInputLine.replaceSelection(t)},this.restoreFocus=()=>{this._refInputLine&&this._refInputLine.focus()},this._restoreEmojiPickerFocus=()=>{var t;null===(t=this._refEmojiPanel.current)||void 0===t||t.restoreFocus()},this._emojiPickerClose=()=>{this.setState({emojiPicker:void 0}),this.restoreFocus()},this.state={replyCaption:"",focused:!1,emojiPicker:void 0,chat:void 0},(0,f.findChat)(this.props.msg.sender).checkpoint(this.props.rejectOnUnmount()).then((t=>{this.setState({chat:t})}))}componentDidUpdate(t,e){this._shouldPausePlayback(e)&&!this._shouldPausePlayback(this.state)?this.props.play():!this._shouldPausePlayback(e)&&this._shouldPausePlayback(this.state)&&this.props.pause()}_shouldPausePlayback(t){return Boolean(t.emojiPicker)||t.focused}isPaused(){return this._shouldPausePlayback(this.state)}render(){var t,e,a;this.state.emojiPicker&&(t=(0,E.jsx)(j.default,{displayName:"EmojiPicker",escapable:!0,popable:!0,requestDismiss:this._emojiPickerClose,requestFocus:this._restoreEmojiPickerFocus,children:(0,E.jsx)(P.default,{contextMenu:this.state.emojiPicker})}),e=(0,E.jsx)(j.default,{displayName:"EmojiPicker",escapable:!0,requestFocus:this._restoreEmojiPickerFocus,children:(0,E.jsx)("div",{children:t})}));var{chat:r}=this.state;r&&this.state.focused&&!this.state.emojiPicker&&(a=(0,E.jsx)(j.default,{displayName:"StatusV3Reply",escapable:!0,requestDismiss:this.props.dismissReply,children:(0,E.jsx)("div",{className:C.default.popupPanel,children:(0,E.jsx)(g.default,{msg:this.props.msg.safe(),theme:"statusV3",chat:r},this.props.msg.id.toString())})}));var i=this.emojiInputComponent;return(0,E.jsxs)("div",{className:C.default.container,children:[(0,E.jsx)(y.default,{transitionName:"status-v3-quoted-msg",transitionAppear:!0,children:a}),(0,E.jsxs)("div",{className:C.default.wrapper,children:[(0,E.jsx)("button",{className:C.default.emojiIcon,onClick:this.handleEmojiPicker,children:(0,E.jsx)(S.default,{name:"smiley"})}),(0,E.jsxs)("div",{className:C.default.lineWrapper,children:[(0,E.jsx)(i.EmojiSuggestions,{theme:h.ThemeOptions.EMOJI_INPUT,onSkinTonePicker:this.handleSkinTonePicker}),(0,E.jsx)(i,{ref:t=>{this._refInputLine=t},theme:"status-reply",spellCheck:!0,onFocus:this.handleFocus,onBlur:this.handleBlur,onEnter:this.handleSend,placeholder:m.default.t(1659),editable:!0,multiline:!0})]}),(0,E.jsx)("button",{className:C.default.sendIcon,onClick:this.handleSend,children:(0,E.jsx)(S.default,{name:"send",directional:!0})}),e]})]})}}T.displayName="StatusV3ComposeBox";var I=(0,_.default)(T);e.default=class extends I{isFocused(){return!0===this.getComponent().isFocused()}isPaused(){return this.getComponent().isPaused()}restoreFocus(){this.getComponent().restoreFocus()}}},21694:(t,e,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.StatusV3Text=e.default=void 0;var o=i(a(23279)),s=i(a(94184)),n=a(55084),l=a(67294),d=i(a(20396)),u=i(a(25142)),c=i(a(91952)),h=i(a(55454)),p=i(a(88419)),f=i(a(85051)),m=a(54647),_=r(a(13540)),g=a(62238),v=i(a(47193)),C=i(a(32397)),S=i(a(12950)),x=i(a(39e3)),j=i(a(13985)),P=a(49895),y=i(a(2408)),E=i(a(71681)),T=i(a(49694)),I=a(90672),b=i(a(80747)),w=i(a(4231)),O=i(a(57636)),M=i(a(90904)),N=i(a(40630)),k=i(a(46714)),D=i(a(79485)),L=i(a(59168)),R=a(92838),A=i(a(11780)),F=i(a(44625)),B=i(a(50539)),V=i(a(60962)),U=i(a(63477)),H=a(49002),W=i(a(76006)),G=i(a(92049)),z=a(85893);class K extends l.Component{constructor(){super(...arguments),this._refProgressBar=(0,l.createRef)(),this._refProgressBarComponent=(0,l.createRef)(),this._refMeasuringProfile=(0,l.createRef)(),this._refWrapper=(0,l.createRef)(),this.componentWillUnmount=()=>{if(this._playbackController.removeListeners(),null!=this.props.sessionId){var t=Math.round(this._playbackController.duration||0);this._statusViewEvent.webcStatusPlaybackT=t;var e=this._playStartTime;null!=e&&(this._statusViewEvent.webcStatusViewT+=Math.round(window.performance.now()-e),this._playStartTime=void 0),this._statusViewEvent.commit()}},this._updateStatusViewers=()=>{O.default.find(this.props.msg.id).checkpoint(this.props.rejectOnUnmount()).then((t=>{this.setState({seenBy:t.read})})).catch((0,n.filteredCatch)(_.Unmount,(()=>{}))).catch((0,n.filteredCatch)(m.EphemeralDrop,(()=>{})))},this._handleWindowResize=()=>{var t=this._refMeasuringProfile&&this._refMeasuringProfile.current,e=this._refProgressBar&&this._refProgressBar.current;if(t&&e){var a=t.getBoundingClientRect(),r=e.getBoundingClientRect();!y.default.isRTL()&&a.right>r.left-5||y.default.isRTL()&&a.left<r.right+5?this.setState({narrow:!0}):this.setState({narrow:!1})}},this._handleTab=t=>{var e;(t&&(t.stopPropagation(),t.preventDefault()),this.props.statusV3.contact.isMe)||((null===(e=this._refComposeBox)||void 0===e?void 0:e.isFocused())?this.dismissReply():this._startReply())},this._handleModalClose=()=>{c.default.closeModal(),this.play(),this.setState({isViewerModalOpen:!1})},this._handleSeeViewersModal=()=>{this.state.seenBy&&(c.default.openModal((0,z.jsx)(V.default,{onClose:this._handleModalClose,viewers:this.state.seenBy})),this.pause(),this.setState({isViewerModalOpen:!0}))},this.handleWindowGainedFocus=()=>{this._windowFocused=!0,this.state.isViewerModalOpen||this.play()},this.handleWindowLostFocus=()=>{this._windowFocused=!1,this.pause()},this._handleClickProfile=()=>{var t=this.props.statusV3.contact.id;(0,g.findChat)(t).then((t=>c.default.openChatBottom(t))).then((()=>{this.props.closeStatusViewer(!0)}))},this.play=()=>{var t,e=this.props.mediaData;if(e){if(e.mediaStage!==I.MEDIA_DATA_STAGE.RESOLVED)return;this._statusViewEvent.webcStatusLoadT||(this._statusViewEvent.markWebcStatusLoadT(),this._statusViewEvent.webcStatusLoaded=!0)}(null===(t=this._refComposeBox)||void 0===t?void 0:t.isPaused())||this._windowFocused&&(this._playStartTime=window.performance.now(),this._playbackController.resume())},this.pause=()=>{var t=this.props.mediaData;if(!t||t.mediaStage===I.MEDIA_DATA_STAGE.RESOLVED){var e=this._playStartTime;null!=e&&(this._statusViewEvent.webcStatusViewT+=Math.round(window.performance.now()-e),this._playStartTime=void 0),this._playbackController.pause()}},this.handleMouseDown=()=>{this.pause()},this.handleMouseUp=()=>{this.play()},this.dismissReply=()=>{var t=this._refWrapper&&this._refWrapper.current;t&&v.default.focus(t)},this._startReply=()=>{var t;null===(t=this._refComposeBox)||void 0===t||t.restoreFocus()},this.handleSend=()=>{this._statusViewEvent.webcStatusReplyCount++},this.state={chat:void 0,narrow:!1,isViewerModalOpen:!1},this._windowFocused=!0,this._playbackController=(0,R.setupStatusV3Controller)(this.props.mediaData,this.props.msg),this._statusViewEvent=new w.default.WebcStatusView({webcStatusLoaded:!1,webcStatusReplyCount:0,webcStatusViewT:0})}componentDidMount(){var{statusV3:t,msg:e,mediaData:a,msgIdx:r,sessionId:i}=this.props;if(null!=i){var s;t.contact.isMe?(s=w.default.WEBC_STATUS_ROW_SECTION.MY,this._updateStatusViewers()):s=t.contact.statusMute?w.default.WEBC_STATUS_ROW_SECTION.MUTED:t.hasUnread?w.default.WEBC_STATUS_ROW_SECTION.RECENT:w.default.WEBC_STATUS_ROW_SECTION.VIEWED;var l,d=this.props.rowIdx||0,u=t.msgs.length-1-r<t.unreadCount;a?l=a.isGif?w.default.WEBC_STATUS_MEDIA_TYPE.GIF:"video"===a.type?w.default.WEBC_STATUS_MEDIA_TYPE.VIDEO:w.default.WEBC_STATUS_MEDIA_TYPE.IMAGE:(l=e.getLinks().length?w.default.WEBC_STATUS_MEDIA_TYPE.URL:w.default.WEBC_STATUS_MEDIA_TYPE.TEXT,this._statusViewEvent.markWebcStatusLoadT(),this._statusViewEvent.webcStatusLoaded=!0),this._statusViewEvent.webcStatusSessionId=i,this._statusViewEvent.webcStatusRowSection=s,this._statusViewEvent.webcStatusRowIndex=d,this._statusViewEvent.webcStatusMediaType=l,this._statusViewEvent.webcStatusUnread=u}this._refProgressBarComponent&&this._refProgressBarComponent.current&&this._playbackController.addListeners(((t,e)=>{var a=this._refProgressBarComponent&&this._refProgressBarComponent.current;a&&a.handleStart(t,e)}),(()=>{var t=this._refProgressBarComponent&&this._refProgressBarComponent.current;t&&t.handlePause()}),(()=>{var t=this._refProgressBarComponent&&this._refProgressBarComponent.current;t&&t.handleEnded().checkpoint(this.props.rejectOnUnmount()).then((()=>{this.props.onNext()})).catch((0,n.filteredCatch)(_.Unmount,(()=>{})))})),a?(this.play(),a&&a.mediaStage===I.MEDIA_DATA_STAGE.RESOLVED&&this.props.markRead(this.props.statusV3,this.props.msg)):(this.props.msg.type,h.default.MSG_TYPE.CHAT,this.play(),this.props.markRead(this.props.statusV3,this.props.msg));var c=this._refWrapper&&this._refWrapper.current;c&&c.focus();var p=this.props.listeners;p.add(window,"focus",this.handleWindowGainedFocus),p.add(window,"blur",this.handleWindowLostFocus),p.add(window,"resize",(0,o.default)(this._handleWindowResize)),this._handleWindowResize()}render(){var t,e,{msg:a,mediaData:r,statusV3:i}=this.props;if(r){var o=Q(r);o&&(t={backgroundImage:`url(${o})`})}else if(a.type===h.default.MSG_TYPE.CHAT){t={backgroundColor:a.statusV3TextBg}}if(r)switch(r.type){case T.default.TYPE.IMAGE:e=(0,z.jsx)($,{msg:a,statusV3:i,mediaData:r,markRead:this.props.markRead,play:this.play,pause:this.pause,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp});break;case T.default.TYPE.VIDEO:e=(0,z.jsx)(X,{msg:a,statusV3:i,mediaData:r,markRead:this.props.markRead,play:this.play,pause:this.pause,playbackController:this._playbackController,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp});break;default:__LOG__(3)`Invalid status v3 image type: ${r.type}`}else e=a.type===h.default.MSG_TYPE.CHAT?(0,z.jsx)(J,{msg:a,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp}):(0,z.jsx)(Z,{onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp});var n,l=(0,z.jsx)("div",{ref:this._refProgressBar,children:(0,z.jsx)(F.default,{ref:this._refProgressBarComponent,current:this.props.msgIdx,total:this.props.totalMsgs,onClick:this.props.onClickProgressBar})});a.type!==h.default.MSG_TYPE.CHAT&&(n=(0,z.jsx)("div",{className:A.default.captionBackdrop,children:(0,z.jsx)(f.default,{className:A.default.mediaCaption,text:a.caption,formatters:P.Configuration.StatusV3Caption()})}));var d,c,m=(0,s.default)(A.default.profile,{[A.default.nonClickProfile]:a.isSentByMe,[A.default.profileNarrow]:this.state.narrow}),_=(0,s.default)(A.default.profile,A.default.measuringProfile,{}),g=(0,z.jsxs)("div",{className:m,onClick:a.isSentByMe?null:this._handleClickProfile,children:[(0,z.jsx)("div",{className:A.default.playerAvatar,children:(0,z.jsx)(p.default,{id:i.contact.id,theme:"status_v3",size:40})}),(0,z.jsxs)("div",{className:A.default.msgInfo,children:[(0,z.jsx)(f.default,{className:A.default.msgInfoName,text:i.contact.formattedName}),(0,z.jsx)("div",{className:A.default.timestamp,children:u.default.relativeDateAndTimeStr(a.t)})]})]}),v=(0,z.jsxs)("div",{ref:this._refMeasuringProfile,className:_,children:[(0,z.jsx)("div",{className:A.default.playerAvatar,children:(0,z.jsx)(p.default,{id:i.contact.id,theme:"status_v3",size:40})}),(0,z.jsxs)("div",{className:A.default.msgInfo,children:[(0,z.jsx)(f.default,{className:A.default.msgInfoName,text:i.contact.formattedName}),(0,z.jsx)("div",{className:A.default.timestamp,children:u.default.relativeDateAndTimeStr(a.t)})]})]}),C={tab:this._handleTab,"shift+tab":this._handleTab},j=t=>t.stopPropagation();r&&(d=(0,z.jsx)(tt,{mediaData:r}));var y=this.props.statusV3.contact;y.isMe||y.isPSA||(c=(0,z.jsx)(x.default,{handlers:{left:j,right:j},children:(0,z.jsx)(L.default,{msg:this.props.msg,dismissReply:this.dismissReply,onSend:this.handleSend,pause:this.pause,play:this.play,ref:t=>{this._refComposeBox=t}})}));var E,I=S.default.supportsFeature(S.default.F.SEE_STATUS_VIEWERS)&&y.isMe&&this.state.seenBy?(0,z.jsx)("div",{className:A.default.seen,children:(0,z.jsx)(B.default,{seenCount:this.state.seenBy.length,onClick:this._handleSeeViewersModal})}):null,b=(0,s.default)(A.default.playerBackground,{[A.default.media]:r}),w=(0,s.default)(A.default.progressBackdrop,{[A.default.progressBarBackdropNarrow]:this.state.narrow});return a.type!==h.default.MSG_TYPE.CHAT&&(E=(0,z.jsx)("div",{className:w})),(0,z.jsx)(U.default,{displayName:"StatusV3Player",escapable:!0,requestDismiss:t=>{t||this.props.closeStatusViewer()},requestFocus:this.dismissReply,children:(0,z.jsx)(x.default,{handlers:C,children:(0,z.jsxs)("div",{className:A.default.playerWrapper,tabIndex:-1,ref:this._refWrapper,children:[v,g,E,l,n,(0,z.jsx)("div",{className:b,style:t}),e,d,I,c]},a.id.toString())})})}}K.displayName="_StatusV3Player";class Y extends l.PureComponent{constructor(...t){super(...t),this._renderImage=t=>{var{msg:e,mediaData:a}=this.props,r=(0,s.default)(A.default.playerContent,A.default.v3Image);return(0,z.jsx)("div",{className:r,onMouseDown:this.props.onMouseDown,onMouseUp:this.props.onMouseUp,onDragEnd:this.props.onMouseUp,children:(0,z.jsx)(M.default,{type:"contain",size:{width:a.fullWidth,height:a.fullHeight},children:(0,z.jsxs)("div",{className:A.default.mediaViewer,children:[(0,z.jsx)(j.default,{src:t,disableContextMenu:!0}),e&&e.interactiveAnnotations&&e.interactiveAnnotations.length>0&&(0,z.jsx)(d.default,{annotations:e.interactiveAnnotations,onTooltipDisplay:this.props.onMouseDown,onTooltipDismiss:this.props.onMouseUp})]})})})},this._renderPreviewImage=()=>{var t,{mediaData:e}=this.props,a=(0,s.default)(A.default.playerContent,A.default.v3Image,A.default.loading);return(0,z.jsx)("div",{className:a,onMouseDown:this.props.onMouseDown,onMouseUp:this.props.onMouseUp,children:(0,z.jsx)(M.default,{type:"contain",size:{width:e.aspectRatio,height:1},children:(0,z.jsx)(j.default,{src:null!==(t=Q(e))&&void 0!==t?t:""})})})},this._downloadMedia=()=>this.props.msg.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:w.default.WEBC_RMR_REASON_CODE.STATUS_V3,isUserInitiated:!0})}componentDidMount(){this.props.mediaData.mediaStage!==I.MEDIA_DATA_STAGE.RESOLVED&&this.props.msg.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:w.default.WEBC_RMR_REASON_CODE.STATUS_V3,isUserInitiated:!0})}componentDidUpdate(){this.props.play();var t=this.props.mediaData;t&&t.mediaStage===I.MEDIA_DATA_STAGE.RESOLVED&&this.props.markRead(this.props.statusV3,this.props.msg)}componentWillUnmount(){this.props.pause()}render(){return(0,z.jsx)(b.default,{mediaData:this.props.mediaData,placeholderRenderer:this._renderPreviewImage,downloadMedia:this._downloadMedia,renderProgressively:!0,children:this._renderImage})}}Y.CONCERNS={mediaData:["mediaStage","renderableUrl","preview","fullWidth","fullHeight","aspectRatio","fullPreviewData"]},Y.displayName="_StatusV3Img";var $=(0,D.default)(Y,Y.CONCERNS);class q extends l.PureComponent{constructor(...t){super(...t),this.refVideo=(0,l.createRef)(),this.setRefVideo=t=>{this.refVideo=t,this.props.playbackController.setVideo(this.refVideo.current)}}componentDidMount(){var t=this.props.mediaData;t.streamable||t.isStreamable()||this.props.msg.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:w.default.WEBC_RMR_REASON_CODE.STATUS_V3,isUserInitiated:!0})}componentDidUpdate(){this.props.play();var t=this.props.mediaData;t&&t.mediaStage===I.MEDIA_DATA_STAGE.RESOLVED&&this.props.markRead(this.props.statusV3,this.props.msg)}componentWillUnmount(){this.props.pause()}render(){var t,{msg:e,mediaData:a,onMouseDown:r,onMouseUp:i}=this.props,o=a.mediaStage!==I.MEDIA_DATA_STAGE.RESOLVED,n=(0,s.default)(A.default.playerContent,A.default.v3Video,{loading:o});return(0,z.jsx)("div",{className:n,onMouseDown:r,onMouseUp:i,children:(0,z.jsx)(M.default,{type:"contain",size:{width:a.fullWidth,height:a.fullHeight},children:(0,z.jsxs)("div",{className:A.default.mediaViewer,children:[(0,z.jsx)(G.default,{msg:e,mediaData:a,autoPlay:!0,refVideo:this.setRefVideo,poster:null!==(t=Q(a))&&void 0!==t?t:"",disableContextMenu:!0,children:y.default.t(1721)}),e&&e.interactiveAnnotations&&e.interactiveAnnotations.length>0&&(0,z.jsx)(d.default,{annotations:e.interactiveAnnotations,onTooltipDisplay:this.props.onMouseDown,onTooltipDismiss:this.props.onMouseUp})]})})})}}q.CONCERNS={mediaData:["preview","mediaStage","fullWidth","fullHeight","streamable","fullPreviewData"]},q.displayName="_StatusV3Video";var X=(0,D.default)(q,q.CONCERNS);class J extends l.PureComponent{componentDidMount(){C.default.load(this.props.msg.font).catch((()=>{}))}render(){var t,e,a=(0,H.numCodepoints)(this.props.msg.body),r={[A.default[`font_${this.props.msg.font}`]]:!0};return a<=60?(t=(0,s.default)(A.default.text,A.default.textLarge,r),e=P.Configuration.StatusV3Text({links:this.props.msg.getLinks()})):a<=240?(t=(0,s.default)(A.default.text,A.default.textMedium,r),e=P.Configuration.StatusV3Text({links:this.props.msg.getLinks()})):t=(0,s.default)(A.default.text,A.default.textSmall,r),(0,z.jsx)("div",{className:(0,s.default)(A.default.playerContent,{[A.default.statusPanelPlayerContent]:"status-panel"===this.props.theme,[A.default.statusThumbnailPlayerContent]:"status-thumbnail"===this.props.theme,[A.default.textThumbnailPlayerContent]:"text-thumb"===this.props.theme}),onMouseDown:this.props.onMouseDown,onMouseUp:this.props.onMouseUp,children:(0,z.jsx)("div",{className:t,children:(0,z.jsx)(f.default,{text:this.props.msg.body,formatters:e})})})}}function Z(t){return(0,z.jsx)("div",{className:A.default.playerContent,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,children:(0,z.jsx)("div",{className:A.default.unknown,children:y.default.t(1606)})})}function Q(t){return t?t.fullPreviewData?t.fullPreviewData.url():t.preview?t.preview.url():null:null}e.StatusV3Text=J,J.displayName="StatusV3Text";var tt=function(t){return(0,W.default)(t.mediaData,["mediaStage"]).mediaStage!==I.MEDIA_DATA_STAGE.RESOLVED?(0,z.jsx)("div",{className:A.default.mediaStateControls,children:(0,z.jsx)("button",{className:"icon-media-disabled",children:(0,z.jsx)(k.default,{size:50,stroke:4,color:"white"})})}):null},et=(0,N.default)((0,E.default)(K));e.default=et},44519:(t,e,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(a(94184)),s=a(8139),n=a(55084),l=a(67294),d=i(a(91952)),u=i(a(55454)),c=a(54647),h=r(a(13540)),p=i(a(32397)),f=i(a(39e3)),m=i(a(2408)),_=a(90672),g=i(a(4231)),v=i(a(40630)),C=i(a(46714)),S=i(a(21694)),x=r(a(98222)),j=i(a(44704)),P=i(a(2966)),y=r(a(49201)),E=i(a(82669)),T=a(85893);class I extends l.Component{constructor(){super(...arguments),this.handleClickProgressBar=t=>{var e=this.state.iterator;if((!e||t!==e.msgIdx)&&e){var a=this._statusV3Snapshot.statusAt(e,t);a.isFulfilled()||this.setState({loading:!0}),a.checkpoint(this.props.rejectOnUnmount()).then((t=>{this.setState({iterator:t})})).catch((0,n.filteredCatch)(x.InvalidStatusV3Iterator,(()=>{__LOG__(3)`Invalid iterator while getting next status msg`}))).catch((0,n.filteredCatch)(c.EphemeralDrop,(()=>{}))).catch((0,n.filteredCatch)(h.Unmount,(()=>{}))).catch((0,n.filteredCatch)(x.StatusV3LoadingError,(()=>{__LOG__(3)`No more status v3 while preloading next status`}))).finally((()=>{this.setState({loading:!1})}))}},this._preloadNextStatus=()=>{var t=this.state.iterator;t&&this._statusV3Snapshot.hasNext(t)&&this._statusV3Snapshot.getNext(t).checkpoint(this.props.rejectOnUnmount()).then((t=>{var e=this._statusV3Snapshot.statuses[t.statusIdx].msgs[t.msgIdx];if(!e)throw new x.StatusV3MsgNotFound;if(e.type===u.default.MSG_TYPE.CHAT)p.default.load(e.font).catch((()=>{}));else{var a=e.mediaData;a&&a.mediaStage!==_.MEDIA_DATA_STAGE.RESOLVED&&e.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:g.default.WEBC_RMR_REASON_CODE.STATUS_V3,isUserInitiated:!1})}})).catch((0,n.filteredCatch)(x.StatusV3MsgNotFound,(()=>{__LOG__(3)`Error finding next status while preloading next status`}))).catch((0,n.filteredCatch)(x.InvalidStatusV3Iterator,(()=>{__LOG__(3)`Invalid iterator while preloading next status`}))).catch((0,n.filteredCatch)(c.EphemeralDrop,(()=>{}))).catch((0,n.filteredCatch)(h.Unmount,(()=>{}))).catch((0,n.filteredCatch)(x.StatusV3LoadingError,(()=>{__LOG__(3)`No more status v3 while preloading next status`})))},this.handlePrev=()=>{var t=this.state.iterator;if(t&&this._statusV3Snapshot.hasPrev(t)){var e=t.statusIdx;this._statusV3Snapshot.getPrev(t).checkpoint(this.props.rejectOnUnmount()).then((t=>{t.statusIdx===e?this.setState({iterator:t}):(this.setState({transitioning:!0}),(0,s.delayMs)(200).checkpoint(this.props.rejectOnUnmount()).then((()=>{this.setState({iterator:t,transitioning:!1})})).catch((0,n.filteredCatch)(h.Unmount,(()=>{}))))})).catch((0,n.filteredCatch)(x.InvalidStatusV3Iterator,(()=>{__LOG__(3)`Invalid iterator while getting previous status msg`}))).catch((0,n.filteredCatch)(c.EphemeralDrop,(()=>{}))).catch((0,n.filteredCatch)(h.Unmount,(()=>{}))).catch((0,n.filteredCatch)(x.StatusV3LoadingError,(()=>{__LOG__(3)`No more status v3 while preloading next status`})))}},this.handleNext=()=>{var t=this.state.iterator;if(t&&this._statusV3Snapshot.hasNext(t)){var e=t.statusIdx,a=this._statusV3Snapshot.getNext(t);a.isFulfilled()||this.setState({loading:!0}),a.checkpoint(this.props.rejectOnUnmount()).then((t=>{t.statusIdx===e?this.setState({iterator:t}):(this.setState({transitioning:!0,loading:!1}),(0,s.delayMs)(200).checkpoint(this.props.rejectOnUnmount()).then((()=>{this.setState({iterator:t,transitioning:!1})})).catch((0,n.filteredCatch)(h.Unmount,(()=>{}))))})).catch((0,n.filteredCatch)(x.InvalidStatusV3Iterator,(()=>{__LOG__(3)`Invalid iterator while getting next status msg`,this.closeStatusViewer()}))).catch((0,n.filteredCatch)(c.EphemeralDrop,(()=>{}))).catch((0,n.filteredCatch)(h.Unmount,(()=>{}))).catch((0,n.filteredCatch)(x.StatusV3LoadingError,(()=>{__LOG__(3)`No more status v3 while preloading next status`}))).finally((()=>{this.setState({loading:!1})}))}else this.closeStatusViewer()},this.markRead=(t,e)=>{if(e){var a=t.unreadCount,r=t.totalCount;t.msgs.getModelsArray().findIndex((t=>t===e))>=r-a&&t.sendReadStatus(e.id,e.author);var i=this._statusV3Snapshot.statuses.find((e=>e.statusV3===t));i&&i.readMsgKeys.push(e.id.toString())}},this.closeStatusViewer=t=>{this.setState({transitioning:!0}),(0,s.delayMs)(200).checkpoint(this.props.rejectOnUnmount()).then((()=>{this.props.closeStatusViewer(t)})).catch((0,n.filteredCatch)(h.Unmount,(()=>{})))};var t=this.props.initialStatusV3;if(this.props.quotedMsgKey){this.state={};var e=this.props.quotedMsgKey;if(-1!==t.msgs.getModelsArray().findIndex((t=>t.id.toString()===e.toString())))this._statusV3Snapshot=new x.default(t,e),this._statusV3Snapshot.getFirstUnread(t,!0,e).checkpoint(this.props.rejectOnUnmount()).then((t=>{this.setState({iterator:t,loading:!1})})).catch((0,n.filteredCatch)(c.EphemeralDrop,(()=>{}))).catch((0,n.filteredCatch)(h.Unmount,(()=>{}))).catch((0,n.filteredCatch)(x.InvalidStatusV3Iterator,(()=>{__LOG__(3)`Invalid iterator while loading first unread msg`,d.default.openToast((0,T.jsx)(y.default,{msg:m.default.t(1599),id:(0,y.genId)()})),this.props.closeStatusViewer()})));else this.state={loading:!0},t.loadMore(t.totalCount).then((()=>{(this.setState({loading:!1}),-1!==t.msgs.getModelsArray().findIndex((t=>t.id.toString()===e.toString())))?(this._statusV3Snapshot=new x.default(t,e),this._statusV3Snapshot.getFirstUnread(t,!0,e).checkpoint(this.props.rejectOnUnmount()).then((t=>{this.setState({iterator:t,loading:!1})})).catch((0,n.filteredCatch)(c.EphemeralDrop,(()=>{}))).catch((0,n.filteredCatch)(h.Unmount,(()=>{}))).catch((0,n.filteredCatch)(x.InvalidStatusV3Iterator,(()=>{__LOG__(3)`Invalid iterator while loading first unread msg`,d.default.openToast((0,T.jsx)(y.default,{msg:m.default.t(1599),id:(0,y.genId)()})),this.props.closeStatusViewer()})))):(this.props.onMsgNotFound&&this.props.onMsgNotFound(),d.default.openToast((0,T.jsx)(y.default,{msg:m.default.t(1599),id:(0,y.genId)()})),this.props.closeStatusViewer())})).catch((()=>{d.default.openToast((0,T.jsx)(y.default,{msg:m.default.t(1599),id:(0,y.genId)()})),this.props.closeStatusViewer()})).finally((()=>{this.setState({loading:!1})}))}else{var a=this.props.initialStatusMsg;this._statusV3Snapshot=new x.default(t);var r=this._statusV3Snapshot.getFirstUnread(t,!0,a&&a.id);r.isFulfilled()?this.state={}:this.state={loading:!0},r.checkpoint(this.props.rejectOnUnmount()).then((t=>{this.setState({iterator:t,loading:!1})})).catch((0,n.filteredCatch)(c.EphemeralDrop,(()=>{}))).catch((0,n.filteredCatch)(h.Unmount,(()=>{}))).catch((0,n.filteredCatch)(x.InvalidStatusV3Iterator,(()=>{__LOG__(3)`Invalid iterator while loading first unread msg`,d.default.openToast((0,T.jsx)(y.default,{msg:m.default.t(1599),id:(0,y.genId)()})),this.props.closeStatusViewer()})))}}componentDidMount(){this._preloadNextStatus()}componentDidUpdate(){this._preloadNextStatus()}render(){var t,e,a,r,i,s,n,l,d=this.state.iterator;d&&(s=(i=this._statusV3Snapshot).statuses[d.statusIdx],n=s.statusV3,l=s.msgs[d.msgIdx],i.hasPrev(d)&&(a=(0,T.jsx)("div",{className:j.default.chevronLeft,children:(0,T.jsx)(P.default,{name:"chevron-left"})}),r=(0,T.jsx)("div",{className:j.default.chevronLeftBg,onClick:this.handlePrev})),i.hasNext(d)&&(t=(0,T.jsx)("div",{className:j.default.chevronRight,children:(0,T.jsx)(P.default,{name:"chevron-right"})}),e=(0,T.jsx)("div",{className:j.default.chevronRightBg,onClick:()=>{this.handleNext(),this.markRead(n,l)}})));var u,c={left:this.handlePrev,right:this.handleNext};!this.state.transitioning&&!this.state.loading&&l&&d&&s&&n&&(u=(0,T.jsx)("div",{className:j.default.playerContainer,children:(0,T.jsx)(S.default,{statusV3:n,msg:l,mediaData:l.mediaData,msgIdx:d.msgIdx,totalMsgs:s.totalCount,markRead:this.markRead,closeStatusViewer:this.closeStatusViewer,onClickProgressBar:this.handleClickProgressBar,onNext:this.handleNext,onPrev:this.handlePrev,sessionId:this.props.sessionId,rowIdx:this.props.rowIdx},l.id)},l.id));var h,p=(0,o.default)(j.default.v3X,{}),m=(0,T.jsx)("button",{className:p,onClick:()=>this.props.closeStatusViewer(!0),children:(0,T.jsx)(P.default,{name:"x-viewer"})}),_=(0,o.default)(j.default.backIcon,{}),g=(0,T.jsx)("button",{className:_,onClick:()=>this.props.closeStatusViewer(),children:(0,T.jsx)(P.default,{name:"back",directional:!0})});return this.state.loading&&(h=(0,T.jsx)("div",{className:j.default.mediaStateControls,children:(0,T.jsx)("button",{children:(0,T.jsx)(C.default,{size:50,stroke:4,color:"white"})})})),(0,T.jsx)(f.default,{handlers:c,children:(0,T.jsxs)("div",{className:j.default.viewer,"data-animate-status-v3-viewer":!0,children:[m,g,r,a,e,t,h,(0,T.jsx)(E.default,{transitionName:"status-v3-player",transitionAppear:!0,children:u})]})})}}I.displayName="StatusV3Viewer";var b=(0,v.default)(I);e.default=b},60962:(t,e,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=function({viewers:t,onClose:e}){var a=new d.default,r=function(t){var e=t.map((t=>({participant:t,itemKey:t.id.toString(),height:l.DEFAULT_ITEM_HEIGHT})));return e.sort(((t,e)=>e.participant.t-t.participant.t)),e}(t),i=r.length?(0,h.jsx)(l.default,{flatListController:a,direction:"vertical",forceConsistentRenderCount:!0,data:r,renderItem:p}):null,u=`Viewed by ${r.length}`;return(0,h.jsx)(c.default,{type:c.ModalTheme.Box,children:(0,h.jsxs)(o.default,{theme:"settings",children:[(0,h.jsx)(n.default,{onCancel:e,title:u,type:n.DRAWER_HEADER_TYPE.POPUP}),(0,h.jsx)(s.default,{flatListControllers:[a],children:i})]})})};var o=i(a(17747)),s=i(a(9042)),n=r(a(55588)),l=r(a(86025)),d=i(a(67893)),u=i(a(51314)),c=r(a(79475)),h=a(85893);function p(t){var{participant:e}=t;return(0,h.jsx)(u.default,{msgInfoParticipant:e,contact:e.contact},e.id.toString())}},45257:(t,e,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(67294),s=i(a(55454)),n=i(a(17747)),l=i(a(9042)),d=r(a(55588)),u=i(a(85051)),c=i(a(39e3)),h=i(a(26976)),p=r(a(79475)),f=i(a(85599)),m=i(a(3132)),_=i(a(2966)),g=i(a(29458)),v=i(a(18914)),C=i(a(63477)),S=r(a(78502)),x=a(85893),j=(t,e)=>{var{defaultText:a,title:r,onSend:i,onBack:j}=t,[P,y]=(0,o.useState)(a),E=(0,S.findFirstWebLink)(P),{linkPreview:T,clearLinkPreview:I}=(0,S.default)(E),b=r?(0,x.jsx)(u.default,{text:r,direction:"auto",titlify:!0,ellipsify:!0}):null,{title:w,canonicalUrl:O,description:M,thumbnail:N}=T||{},k=T?(0,x.jsx)(C.default,{displayName:"ComposeBoxLinkPreview",escapable:!0,requestDismiss:I,children:(0,x.jsx)(f.default,{onOmit:I,children:(0,x.jsx)(h.default,{title:w,compose:!0,canonicalUrl:O,description:M,thumbnailJpeg:N})})}):null;return(0,x.jsx)(p.default,{type:p.ModalTheme.Box,ref:e,children:(0,x.jsxs)(n.default,{children:[(0,x.jsx)(d.default,{type:d.DRAWER_HEADER_TYPE.POPUP,onBack:j,children:b}),(0,x.jsx)(l.default,{children:(0,x.jsxs)(c.default,{className:v.default.container,children:[(0,x.jsx)("div",{className:v.default.inputContainer,children:(0,x.jsx)(g.default,{a8n:"text-message-modal-text-unput",value:P,maxLength:s.default.MAX_TXT_MSG_SIZE,onChange:t=>{y(t)},supportsEmoji:!0,multiline:!0,spellCheck:!0,showRemaining:!0,focusOnMount:!0,theme:"small"})}),k]})}),(0,x.jsx)("div",{className:v.default.btnContainer,children:(0,x.jsx)("div",{className:v.default.btnPosition,children:(0,x.jsx)(m.default,{large:!0,onClick:()=>{P.length&&i(P,T)},children:(0,x.jsx)(_.default,{name:"send",directional:!0})})})})]})})},P=(0,o.forwardRef)(j);e.default=P},26343:(t,e,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(67294),s=i(a(5221)),n=i(a(79864)),l=r(a(9492)),d=i(a(47452)),u=a(78615),c=i(a(2408)),h=i(a(29429)),p=a(20232),f=a(47941),m=a(70790),_=i(a(2966)),g=a(74289),v=a(85893);class C extends o.PureComponent{_getCartIcon(){var{onCartClick:t,cartCount:e,catalogId:a}=this.props;if(t&&a){var r=(0,g.isNumber)(e)&&e>0?e.toString():void 0,i=(0,p.getOnCartClickWithLog)(t,a,(0,m.getProductCatalogContext)(this.context));return(0,v.jsx)(f.MenuBarItem,{a8nText:"menu-bar-cart-link",icon:(0,v.jsx)(s.default,{theme:"inherit-color"}),text:r,title:c.default.t(477),onClick:i})}return null}_getMenuItems(){var{canManageCatalog:t,onSendCatalog:e,onOpenCollections:a,onOpenSettings:r}=this.props;return t?(0,v.jsx)(f.MenuBarItem,{a8nText:"menu-bar-menu",icon:(0,v.jsx)(_.default,{name:"menu"}),title:c.default.t(1194),children:(0,v.jsxs)(l.default,{type:"dropdown_menu",flipOnRTL:!0,dirX:l.DirX.LEFT,children:[(0,v.jsx)(d.default,{a8n:"mi-foward menu-item",action:e,children:c.default.t(895)}),a&&(0,v.jsx)(d.default,{a8n:"mi-collections menu-item",action:a,children:c.default.t(605)}),(0,u.canToggleCartOnOff)()&&r&&(0,v.jsx)(d.default,{a8n:"mi-settings menu-item",action:r,children:c.default.t(545)})]},"CatalogDetailHeader")}):(0,v.jsx)(f.MenuBarItem,{a8nText:"menu-bar-catalog-link",icon:(0,v.jsx)(h.default,{}),title:c.default.t(538),onClick:e})}render(){return(0,v.jsxs)(v.Fragment,{children:[this._getCartIcon(),this._getMenuItems()]})}}e.default=C,C.contextType=n.default,C.displayName="DetailDrawerMenu"},22715:(t,e,a)=>{"use strict";var r=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(67294),o=(r(a(56720)),r(a(69991))),s=r(a(71801)),n=r(a(79864)),l=r(a(25061)),d=a(63290),u=a(78615),c=r(a(2408)),h=a(30333),p=r(a(83427)),f=a(70790),m=r(a(26491)),_=r(a(84241)),g=a(15298),v=r(a(2966)),C=r(a(89135)),S=a(85893),x={addIcon:{position:"g0rxnol2",width:"d0st09ow",height:"bbl9m3t3",paddingBottom:"aus7m8kn",marginTop:"tt8xd2xn",marginEnd:"bugiwsl0",marginBottom:"or9x5nie",marginStart:"svoq16ka",borderTop:"rom324v9",borderEnd:"na7ur5ty",borderBottom:"gjeyj30g",borderStart:"bmro6pka",borderTopStartRadius:"l147y7tb",borderTopEndRadius:"mjscftrx",borderBottomEndRadius:"fqwk616h",borderBottomStartRadius:"pkud3j3x",":before":{position:"oxaw94s0",top:"ijeufx4s",start:"meq75apj",display:"oa3lyrek",width:"slvs4faj",height:"jaq0b63r",content:"lij4d1x3",background:"nkmjymgc",transform:"k95pjfv1"},":after":{position:"dkvli2l0",top:"qi2a0yje",start:"bunkm0yn",display:"b0f5vxaq",width:"qbfuvgfc",height:"i0r7mfoh",content:"k15o3o4i",background:"fji5f4ri",transform:"cai600lj"}},largeGallerySpacing:{width:"b8z6cu80",height:"bbl9m3t3",marginEnd:"jnwc1y2a",marginBottom:"qrsyb3yy"},placeholderThumb:{width:"d0st09ow",height:"fujac5jc",paddingBottom:"lxvt2vq0",marginTop:"tt8xd2xn",marginEnd:"bugiwsl0",marginBottom:"or9x5nie",marginStart:"svoq16ka",backgroundColor:"o27ac25e",borderTopStartRadius:"l147y7tb",borderTopEndRadius:"mjscftrx",borderBottomEndRadius:"fqwk616h",borderBottomStartRadius:"pkud3j3x"},subtitle:{marginTop:"tt8xd2xn",marginEnd:"q471nw87",marginBottom:"mpdn4nr2",marginStart:"svoq16ka",fontSize:"f8jlpxt4",color:"sbs3osm6"}};class j extends i.Component{constructor(...t){super(...t),this.handleProductDetail=t=>{var{onProductDetail:e,shouldLog:a}=this.props;a&&(0,h.logProfileProductClick)({product:(0,g.unproxy)(t),catalogContext:(0,f.getProductCatalogContext)(this.context)}),e(t)}}componentDidMount(){var{shouldLog:t,catalog:e}=this.props;t&&null!=e&&(0,h.logBusinessProfileCatalogView)({catalogOwnerWid:e.id,catalogContext:(0,f.getProductCatalogContext)(this.context)})}_renderGallery(){var t,{catalog:e,filterProductId:a,productsToShow:r,hideIncompleteRows:i,onProductCatalog:o,showProductPlaceholders:s,seeMoreOverlay:n}=this.props,l=[],d=r,h=void 0;if((0,u.canSeeBizProfileV3)()&&(h="largeGallerySpacing"),null!=e?(t=e.productCollection,l=e.productCollection.getProductModels(),i&&l.length>3&&(d=Math.min(r,l.length-l.length%3)),l=(l=l.slice(0,d+1)).filter((t=>t.id.toString()!==a)).map(((t,a)=>{var r,i,o=null===(r=t.getPreviewImage())||void 0===r?void 0:r.mediaData;return o?(n&&a===d-1&&e.productCollection.length>d-1&&(i=c.default.t(1550)),(0,S.jsx)(_.default,{onClick:()=>this.handleProductDetail(t),mediaData:o,overlayContent:i,theme:h},t.id.toString())):(0,S.jsx)(S.Fragment,{})})).slice(0,d)):(t=new m.default).add({id:"_ph"}),!l.length&&!s)return null;for(var g,v=x.addIcon;s&&l.length<d;)l.push((0,S.jsx)(C.default,{onClick:o.bind(this,(0,f.getProductCatalogContext)(this.context)),title:c.default.t(3),xstyle:[v,"largeGallerySpacing"===h&&x.largeGallerySpacing],children:(0,S.jsx)(S.Fragment,{})},`_ph${l.length}`)),v=x.placeholderThumb;return(0,u.canSeeBizProfileV3)()&&(g="space-between"),(0,S.jsx)(p.default,{productMedias:l,mediaCollection:t,justify:g})}_renderCatalogEntryButton(){var{onProductCatalog:t,catalogEntryLabel:e}=this.props;return null==e?null:(0,S.jsx)("div",{className:s.default.catalogEntryButton,children:(0,S.jsx)(o.default,{a8nText:"catalog-entry-button",type:"secondary",onClick:t.bind(this,(0,f.getProductCatalogContext)(this.context)),children:e})})}_renderShopsLogo(){return this.props.showShopsLogo?(0,S.jsx)("div",{className:s.default.shopsLogo,children:(0,S.jsx)(v.default,{name:"fbshops",display:"inline"})}):null}render(){var{onProductCatalog:t,title:e,subtitle:a,animation:r,sectionTheme:i}=this.props,o=this._renderCatalogEntryButton(),n=this._renderGallery(),u=a?(0,S.jsx)(d.FlexItem,{xstyle:x.subtitle,children:a}):null,h=(0,S.jsxs)(d.FlexRow,{align:"center",children:[u,(0,S.jsx)(d.FlexItem,{children:(0,S.jsx)(v.default,{className:s.default.chevron,name:"chevron-right-alt",directional:!0})})]});return(0,S.jsxs)(l.default,{title:e||c.default.t(1459),titleOnClick:t.bind(this,(0,f.getProductCatalogContext)(this.context)),subtitle:h,theme:i,animation:r,children:[n,o,this._renderShopsLogo()]})}}e.default=j,j.contextType=n.default,j.defaultProps={productsToShow:6,sectionTheme:"padding",hideIncompleteRows:!1},j.displayName="CatalogDrawerSection"},17663:(t,e,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(67294),s=i(a(56107)),n=i(a(55092)),l=i(a(91952)),d=i(a(55059)),u=r(a(88419)),c=i(a(17747)),h=i(a(9042)),p=i(a(79864)),f=r(a(55588)),m=i(a(2408)),_=i(a(76389)),g=a(30333),v=i(a(78972)),C=a(70790),S=i(a(11364)),x=i(a(5646)),j=a(40307),P=a(85893),y="catalog-link-anchor";class E extends o.Component{constructor(...t){super(...t),this._handleCatalogLinkClick=t=>{t.preventDefault(),this._handleSendCatalogLinkClick()},this._handleSendCatalogLinkClick=()=>{var{catalog:t,onSend:e}=this.props;l.default.openModal((0,P.jsx)(S.default,{catalog:t,onSend:e}),{transition:"modal-flow"}),(0,g.logShareCatalogViaWALinkClick)({catalogOwnerWid:t.id,catalogContext:(0,C.getProductCatalogContext)(this.context)})},this._handleCopyLinkClick=()=>{var{catalog:t}=this.props;(0,g.logShareCatalogCopyLinkClick)({catalogOwnerWid:t.id,catalogContext:(0,C.getProductCatalogContext)(this.context)})}}render(){var t,e,{onBack:a,onCancel:r,catalog:i,contact:o,prompt:l,centerDrawer:p}=this.props,g=(0,P.jsx)(u.default,{id:o.id,size:82,quality:u.DETAIL_IMAGE_QUALITY.HIGH});return p&&(t="labels",e="center-column"),(0,P.jsxs)(c.default,{theme:t,children:[(0,P.jsx)(f.default,{a8n:"catalog-link-title",title:m.default.t(538),onBack:a,onCancel:r,type:f.DRAWER_HEADER_TYPE.SMALL}),(0,P.jsxs)(h.default,{theme:e,children:[(0,P.jsx)("div",{className:s.default.prompt,children:l}),(0,P.jsx)(n.default,{image:g,primary:(0,P.jsx)(v.default,{contact:o,useVerifiedName:!0}),theme:"identity",secondary:(0,P.jsx)(_.default,{id:y,href:(0,j.createCatalogLink)(i.id.user),onClick:this._handleCatalogLinkClick,noHandle:!0})}),(0,P.jsx)(x.default,{onClick:this._handleSendCatalogLinkClick}),(0,P.jsx)(d.default,{elementId:y,onClick:this._handleCopyLinkClick})]})]},"catalog-link-drawer")}}e.default=E,E.contextType=p.default,E.displayName="CatalogLinkDrawer"},39618:(t,e,a)=>{"use strict";var r=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return n.apply(this,arguments)};var i=r(a(48926)),o=r(a(8581)),s=a(78615);function n(){return(n=(0,i.default)((function*(t){var e;if(!(0,s.cartPropEnabled)())return!1;var a=o.default.get(t);if(!a||a.stale){var r=yield o.default.update(t);a=Array.isArray(r)?r[0]:r}return(null===(e=a.profileOptions)||void 0===e?void 0:e.cartEnabled)||!1}))).apply(this,arguments)}},81617:(t,e,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(67294),s=i(a(5221)),n=i(a(79864)),l=r(a(9492)),d=i(a(47452)),u=a(78615),c=i(a(2408)),h=i(a(29429)),p=a(20232),f=a(47941),m=a(70790),_=i(a(2966)),g=a(74289),v=a(85893);class C extends o.PureComponent{_getCartIcon(){var{onCartClick:t,cartCount:e,catalogId:a}=this.props;if(t&&a){var r=(0,g.isNumber)(e)&&e>0?e.toString():void 0,i=(0,p.getOnCartClickWithLog)(t,a,(0,m.getProductCatalogContext)(this.context));return(0,v.jsx)(f.MenuBarItem,{a8nText:"menu-bar-cart-link",icon:(0,v.jsx)(s.default,{}),text:r,title:c.default.t(477),onClick:i})}return null}render(){var{contactId:t,onSendProduct:e,onReportProduct:a,onProductLinkClick:r,onProductMoreInformation:i}=this.props;return(0,v.jsxs)(v.Fragment,{children:[this._getCartIcon(),(0,v.jsx)(f.MenuBarItem,{a8nText:"menu-bar-product-link",icon:(0,v.jsx)(h.default,{}),title:c.default.t(1436),onClick:r}),(0,v.jsx)(f.MenuBarItem,{a8nText:"menu-bar-menu",icon:(0,v.jsx)(_.default,{name:"menu"}),title:c.default.t(1194),children:(0,v.jsxs)(l.default,{type:"dropdown_menu",flipOnRTL:!0,dirX:l.DirX.LEFT,children:[(0,v.jsx)(d.default,{a8n:"mi-send menu-item",action:e,children:c.default.t(1578)}),(0,u.canSeeECommerceComplianceIndiaUserJourney)(t)&&(0,v.jsx)(d.default,{a8n:"mi-send menu-item",action:i,children:c.default.t(1432)}),(0,v.jsx)(d.default,{a8n:"mi-report menu-item",action:a,children:c.default.t(1487)})]},"ProductDetailHeader")})]})}}e.default=C,C.contextType=n.default,C.displayName="DetailDrawerMenu"},28379:(t,e,a)=>{"use strict";var r=a(20862);Object.defineProperty(e,"__esModule",{value:!0}),e.parseErrorState=function(t,e){if(t instanceof o.Unmount);else if(t instanceof i.ServerStatusCodeError)"not_found"===t.status||404===t.status?e("NOT_FOUND"):(e("ERROR"),__LOG__(3)`parseErrorState:Failed to fetch from server`);else{if(!(t instanceof i.WebdDrop))throw e("ERROR"),t;e("ERROR"),__LOG__(3)`parseErrorState:Failed to fetch due to WebdDrop`}};var i=a(54647),o=r(a(13540))},8212:(t,e,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=function({fetchState:t}){switch(t){case"NONE":case"SUCCESS":return null;case"PENDING":return(0,u.jsxs)("div",{className:(0,o.default)(n.default.loadingContainer),children:[(0,u.jsx)(l.default,{size:14,color:l.colorOptions.highlight}),(0,u.jsx)(d.TextSpan,{className:(0,o.default)(n.default.text,n.default.loadingText),theme:"small",children:s.default.t(1458)})]});case"NOT_FOUND":case"ERROR":return(0,u.jsx)("div",{className:(0,o.default)(n.default.loadingContainer),children:(0,u.jsx)(d.TextSpan,{className:n.default.text,theme:"small",color:"danger",children:"NOT_FOUND"===t?s.default.t(1444):s.default.t(1426)})});default:throw new Error(`invalid fetchState ${t}`)}};var o=i(a(94184)),s=i(a(2408)),n=i(a(44134)),l=r(a(46714)),d=a(97504),u=a(85893)},29429:(t,e,a)=>{"use strict";var r=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,n.jsx)(s.default,{name:"link",className:(0,i.default)(o.default.linkIcon,{[o.default.inheritColor]:"inherit-color"===t.theme})})};var i=r(a(94184)),o=r(a(93277)),s=r(a(2966)),n=a(85893)},76389:(t,e,a)=>{"use strict";var r=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=function({id:t,href:e,onClick:a,noHandle:r}){return(0,s.jsx)("span",{className:i.default.linkContainer,children:(0,s.jsx)(o.SelectableLink,{id:t,href:e,className:i.default.activeLink,selectable:!0,onClick:a,"data-nohandle":r,children:e})})};var i=r(a(36074)),o=a(20845),s=a(85893)},96470:(t,e,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.handleProductDelete=function(t,e,a){return(0,c.logDeleteProductClick)(e,1,a),new Promise(((r,i)=>{n.default.openModal((0,C.jsx)(l.default,{title:u.default.t(515),okText:u.default.t(2029),cancelText:u.default.t(1856),onOK:()=>{n.default.closeModal(),function(t,e,a){return(0,p.deleteProducts)([e.id.toString()]).then((()=>((0,c.logDeleteProductSuccess)(e,1,a),t.productCollection.evictImagesFromCache(e.id.toString()),t.productCollection.remove(e.id.toString()),t.collections&&t.collections.forEach((t=>t.productCollection.remove(e.id.toString()))),!0))).catch((0,s.filteredCatch)(d.ServerStatusCodeError,(t=>((0,c.logDeleteProductFailed)(e,1,a,t.statusCode),n.default.openToast((0,C.jsx)(v.default,{msg:u.default.t(516),id:(0,v.genId)("catalog_delete_product_failed")})),!1))))}(t,e,a).then((t=>r(t))).catch((t=>i(t)))},onCancel:()=>{n.default.closeModal(),r(!1)},children:(0,C.jsx)("div",{children:u.default.t(514)})}))}))},e.handleProductVisibilityChange=function(t,e,a){var r=e.id.toString(),i=!e.isHidden;i?(0,c.logCatalogProductHideClick)(r,a):(0,c.logCatalogProductShowClick)(r,a);return new Promise(((o,s)=>{var d=e.isHidden?u.default.t(535):u.default.t(526);n.default.openModal((0,C.jsx)(l.default,{okText:u.default.t(2029),cancelText:u.default.t(1856),onOK:()=>{n.default.closeModal(),function(){return S.apply(this,arguments)}(t,e).then((()=>{i?(0,c.logCatalogProductHideSuccess)(r,a):(0,c.logCatalogProductShowSuccess)(r,a),o(!0)})).catch((t=>{i?(0,c.logCatalogProductHideFailed)(r,a):(0,c.logCatalogProductShowFailed)(r,a),s(t)}))},onCancel:()=>{n.default.closeModal(),i?(0,c.logCatalogProductHideCancelled)(r,a):(0,c.logCatalogProductShowCancelled)(r,a),o(!1)},children:(0,C.jsx)("div",{children:d})}))}))},e.handleCollectionDelete=function(t,e,a){return new Promise(((r,i)=>{n.default.openModal((0,C.jsx)(l.default,{title:u.default.t(502),okText:u.default.t(2029),cancelText:u.default.t(1856),onOK:()=>{n.default.closeModal(),function(t,e,a){return(0,g.deleteCollection)(e.id.toString(),a.session.sessionId.toString()).then((()=>(t.collections.remove(e.id.toString()),(0,h.logCollectionDeleted)({catalogContext:a,collectionId:e.id}),!0))).catch((0,s.filteredCatch)(d.ServerStatusCodeError,(t=>(__LOG__(4,!0,new Error,!0)`Failed to delete collection, error: ${t}`,SEND_LOGS("Deleteing collection failed"),n.default.openToast((0,C.jsx)(v.default,{msg:u.default.t(499),id:(0,v.genId)("catalog_delete_product_failed")})),!1))))}(t,e,a).then((t=>r(t))).catch((t=>i(t)))},onCancel:()=>{n.default.closeModal(),r(!1)},children:(0,C.jsx)("div",{children:u.default.t(500)})}))}))},e.handleCollectionSave=function(t,e,a,r,i,o){return(e?(0,g.editCollection)(e.id.toString()||"",a===e.name?void 0:a,!1,r.map((t=>t.id.toString())),i.map((t=>t.id.toString())),o.session.toString()).then((o=>(e.name=a,e.reviewStatus=o.reviewStatus,t.collections.replaceId(e.id,o.id),0===r.length&&0===i.length||(e.productCollection.reset(),e.afterCursor=void 0,t.collections.reset(),t.collections.afterCursor=""),!0))):(0,g.createCollection)(a,r.map((t=>t.id.toString())),o.session.toString()).then((e=>{(0,h.logCollectionCreated)({catalogContext:o,collectionId:e.id,productCount:r.length});var i=new m.default;return i.id=e.id,i.reviewStatus=e.reviewStatus,i.isHidden=!1,i.name=a,i.totalItemsCount=r.length,t.collections.add(i),!0}))).catch((t=>{var e=u.default.t(513);return"not-acceptable"===t.text?("products"===t.fieldName&&"duplicate"===t.fieldReason&&(e=u.default.t(511)),"collection"===t.fieldName&&"empty"===t.fieldReason&&(e=u.default.t(512))):(__LOG__(4,!0,new Error,!0)`Failed to save collection, error: ${t}`,SEND_LOGS("Saving collection failed")),n.default.openToast((0,C.jsx)(v.default,{msg:e,id:(0,v.genId)("catalog_save_collection_failed")})),!1}))},e.handleCollectionAppeal=function(t,e){return(0,g.appealCollection)(t.id.toString(),e).then((()=>{t.set({canAppeal:!1,reviewStatus:_.PRODUCT_REVIEW_STATUS.PENDING})}))};var o=i(a(48926)),s=a(55084),n=i(a(91952)),l=i(a(75940)),d=a(54647),u=i(a(2408)),c=a(30333),h=a(59562),p=a(68793),f=a(94583),m=i(a(13532)),_=a(26491),g=a(14146),v=r(a(49201)),C=a(85893);function S(){return(S=(0,o.default)((function*(t,e){yield(0,f.productVisibilitySet)([{productId:e.id.toString(),isHidden:!e.isHidden}]),e.isHidden=!e.isHidden,[t.productCollection,...(t.collections||[]).map((t=>t.productCollection))].forEach((t=>{var a=t.get(e.id);a&&(a.isHidden=e.isHidden)}))}))).apply(this,arguments)}},32179:(t,e,a)=>{"use strict";var r=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var{onClick:e}=t,a=(0,i.default)(o.default.addItemButton,{[o.default.themeDefault]:"default"===t.theme,[o.default.themeInList]:"in-list"===t.theme,[o.default.themeCollections]:"collections"===t.theme}),r=(0,d.jsx)(l.default,{onClick:e,title:n.default.t(493),xstyle:u.addIcon,children:(0,d.jsx)(d.Fragment,{})});return(0,d.jsx)(s.default,{theme:"add-item",image:r,customImage:!0,primary:t.title||n.default.t(493),className:a,onClick:e,idle:t.idle,a8n:"add-item"})};var i=r(a(94184)),o=(r(a(56720)),r(a(79184))),s=r(a(55092)),n=r(a(2408)),l=r(a(89135)),d=a(85893),u={addIcon:{position:"g0rxnol2",width:"o22r6p4i",height:"dng4fqht",borderTop:"btoh1681",borderEnd:"sngpozrj",borderBottom:"c2eze1zb",borderStart:"bd2x2sk5",borderTopStartRadius:"l147y7tb",borderTopEndRadius:"mjscftrx",borderBottomEndRadius:"fqwk616h",borderBottomStartRadius:"pkud3j3x",":focus":{borderTopStartRadius:"mmjxyicr",borderTopEndRadius:"r1jx4bdh",borderBottomEndRadius:"f9yclydc",borderBottomStartRadius:"mtzt60z0",boxShadow:"esbo3we0"},"::before":{position:"jiaumjzp",top:"iu8zqbur",left:"c4kjmepz",display:"chh99fau",width:"ln1ej6zg",height:"i0a739jv",content:"ckfn5qle",backgroundColor:"t4c1fkc8",transform:"bsbo06yw"},"::after":{position:"tkubpkrc",top:"khfyavfg",left:"nly7wueh",display:"l1wvjj35",width:"dbiwaw4z",height:"l9a7srmz",content:"lw9p9708",backgroundColor:"sadoqatt",transform:"n2obx7p9"}}}},18760:(t,e,a)=>{"use strict";var r=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.getCollectionIntegrityHeight=function(t){return(0,u.canAppealCollections)()&&t.reviewStatus===p.PRODUCT_REVIEW_STATUS.REJECTED?2*d.default.PRODUCT_LIST_ITEM_HEIGHT+10:d.default.PRODUCT_LIST_ITEM_HEIGHT+10},e.default=function(t){var{collection:e,onEditCollection:a}=t,r=(0,m.jsx)("div",{className:n.default.iconContainerRejected,children:(0,m.jsx)(f.default,{name:"info"})}),d=()=>{a&&a(e)},_=()=>{s.default.openModal((0,m.jsx)(i.default,{collection:e}))};switch(e.reviewStatus){case p.PRODUCT_REVIEW_STATUS.PENDING:return(0,m.jsxs)("div",{className:n.default.pendingBanner,children:[c.default.t(604),(0,m.jsx)("div",{className:n.default.iconContainerPending,children:(0,m.jsx)(f.default,{name:"info"})})]});case p.PRODUCT_REVIEW_STATUS.REJECTED:return(0,u.canAppealCollections)()?(()=>{var t=(e.rejectReason||"other_violation").toLowerCase(),a=(0,l.default)(t,e.commerceUrl),i=(0,m.jsx)(o.default,{onClick:d,children:c.default.t(655)});if(e.canAppeal){var s=(0,m.jsx)(o.default,{onClick:_,children:c.default.t(656)}),u=(0,m.jsx)(h.default,{id:620,params:{rename_collection_link:i,request_another_review_link:s}});return(0,m.jsxs)("div",{className:n.default.rejectedBannerWithAppeal,children:[a.first,(0,m.jsx)("br",{}),u,r]})}var p=(0,m.jsx)(h.default,{id:671,params:{rename_collection_link:i}});return(0,m.jsxs)("div",{className:n.default.rejectedBannerWithAppeal,children:[a.second,(0,m.jsx)("br",{}),p,r]})})():(0,m.jsxs)("div",{className:n.default.rejectedBanner,children:[c.default.t(630),(0,m.jsx)(o.default,{onClick:d,children:c.default.t(631)}),r]});default:return null}};var i=r(a(26734)),o=r(a(44683)),s=r(a(91952)),n=r(a(65491)),l=r(a(84017)),d=r(a(55454)),u=a(78615),c=r(a(2408)),h=r(a(663)),p=a(26491),f=r(a(2966)),m=a(85893)},13002:(t,e,a)=>{"use strict";var r=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(67294),o=a(96470),s=r(a(91952)),n=r(a(55454)),l=r(a(79864)),d=r(a(86025)),u=r(a(19257)),c=a(82474),h=a(30333),p=a(70790),f=r(a(34290)),m=r(a(79485)),_=a(15298),g=a(85893);class v extends i.Component{constructor(...t){super(...t),this.state={openedProductId:void 0},this.handleProductDetail=(t,e)=>{var{onProductDetail:a}=this.props;return(0,h.logCatalogListDetailClick)({product:(0,_.unproxy)(t),catalogContext:e}),this.setState({openedProductId:t.id.toString()}),a(t)},this.handleProductShare=t=>{var{onProductShare:e}=this.props;e&&e(t)},this.handleProductDelete=(t,e)=>{var{catalog:a}=this.props;(0,o.handleProductDelete)(a,t,e).then((()=>{t.id===this.state.openedProductId&&(s.default.closeDrawerMid(),this.setState({openedProductId:void 0}))}))},this.handleProductHideShow=(t,e)=>{var{catalog:a}=this.props;(0,o.handleProductVisibilityChange)(a,t,e)},this.renderItem=t=>{var{product:e}=t,{onCartOpen:a,shareLinks:r}=this.props;return(0,g.jsx)(l.default.Consumer,{children:t=>{var i=(0,p.getProductCatalogContext)(t);return(0,g.jsx)(f.default,{product:e,onCartOpen:a,onClick:()=>this.handleProductDetail(e,i),onProductShare:r?this.handleProductShare:null,onProductDelete:t=>this.handleProductDelete(t,i),onProductHideShow:t=>this.handleProductHideShow(t,i),canManageCatalog:this.props.canManageCatalog})}})}}getData(){var{catalog:t,onCartOpen:e}=this.props,a=void 0!==e;return t.productCollection.getProductModels(this.props.canManageCatalog).map((t=>({itemKey:`${t.id.toString()}_${a.toString()}`,product:t})))}render(){var{catalog:t}=this.props;return t.productCollection&&t.productCollection.getProductModels(this.props.canManageCatalog).length?(0,g.jsx)(u.default,{flatListControllers:[this.props.flatListController],children:(0,g.jsx)(d.default,{flatListController:this.props.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:this.getData(),renderItem:this.renderItem,defaultItemHeight:n.default.PRODUCT_LIST_ITEM_HEIGHT,keyOrder:c.KeyOrder.INVERSE})}):null}}v.CONCERNS={catalog:["productCollection","afterCursor","id","index"]},v.displayName="ProductCatalogList";var C=(0,m.default)(v,v.CONCERNS);e.default=C},64305:(t,e,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.CatalogViewDrawer=void 0;var o=i(a(48926)),s=i(a(23493)),n=i(a(23279)),l=a(67294),d=i(a(76610)),u=a(70359),c=i(a(32179)),h=i(a(25523)),p=i(a(21496)),f=i(a(60028)),m=i(a(26343)),_=i(a(24165)),g=a(46215),v=i(a(43099)),C=i(a(39618)),S=i(a(55454)),x=i(a(17747)),j=i(a(9042)),P=r(a(55588)),y=a(28379),E=i(a(8212)),T=i(a(67893)),I=i(a(52715)),b=i(a(12950)),w=i(a(2408)),O=i(a(71681)),M=i(a(19851)),N=i(a(70154)),k=i(a(40630)),D=i(a(79485)),L=a(85893);class R extends l.Component{constructor(t){super(t),this._catalogFlatListController=new T.default,this._handleScroll=(t,e)=>{var a,r;this.props.setScrollOffset&&this.props.setScrollOffset(e.scrollTop),(null===(a=this.state.scrollHelper)||void 0===a?void 0:a.willLoadMore(e))&&this.setState({loadingMore:!0}),null===(r=this.state.scrollHelper)||void 0===r||r.onScroll(t,e).then((t=>{t&&this.setState({loadingMore:!1})})).catch((t=>{throw this.setState({loadingMore:!1}),t}))},this.handleScroll=(0,s.default)(this._handleScroll,100),this.onScroll=t=>{this.handleScroll(t,t.currentTarget)},this._handleCartChange=()=>{var t=this.state.cart.itemCount;this.state.cartCount!==t&&this.setState({cartCount:t})},this._handleCartClick=()=>{var{contact:t,onCartClick:e}=this.props;e&&e(t.id.toString())},this._handleCatalogLinkClick=()=>{var{catalog:t}=this.state,{onCatalogLinkClick:e,contact:a}=this.props;t&&e(t,a)};var e=h.default.findCart(this.props.contact.id.toString());this.state={cartEnabled:!1,catalog:null,cartCount:e.itemCount,catalogFetchState:"NONE",dataSource:null,scrollHelper:null,loadingMore:!0,cart:e}}componentDidMount(){var{catalogId:t,listeners:e}=this.props;this._setupCatalog(),(0,C.default)(t).then((t=>{this.setState({cartEnabled:t}),t&&e.add(this.state.cart,"all",this._handleCartChange)}))}_setupCatalog(){var{catalogId:t,rejectOnUnmount:e,canManageCatalog:a,scrollOffset:r}=this.props;f.default.find(t).checkpoint(e()).then((t=>{var e=new g.CatalogWithCollectionsDataSource(t,a||!1,S.default.PRODUCT_LIST_ITEM_HEIGHT),i=new g.CatalogListItemScrollHelper(e);this.setState({catalog:t,dataSource:e,scrollHelper:i,catalogFetchState:"SUCCESS"},(()=>{this.loadInitialItems(),this._watchProductCollection(),void 0!==r&&this._catalogFlatListController.setScrollFromStart(r)}))})).catch((t=>{(0,y.parseErrorState)(t,(t=>this.setState({catalogFetchState:t,loadingMore:!1})))}))}_watchProductCollection(){var{catalog:t}=this.state;this.props.autoUpdate&&null!=t&&(t.productCollection.on("add",(0,n.default)((()=>this.forceUpdate()),100)),t.productCollection.on("remove",(0,n.default)((()=>this.forceUpdate()),100)),t.collections.on("add",(0,n.default)((()=>this.forceUpdate()),100)),t.collections.on("remove",(0,n.default)((()=>this.forceUpdate()),100)))}_getDrawerContent(){var t,e,a,{catalog:r,cartEnabled:i,dataSource:o}=this.state,{contact:s,businessProfile:n,canManageCatalog:l,onAddProduct:h,onCartClick:f}=this.props,m=i&&f?this._handleCartClick:void 0;return l&&h&&(t=(0,L.jsx)(c.default,{onClick:()=>h(),theme:"collections"})),r&&o?(e=(0,L.jsx)(M.default,{onCartOpen:m,onProductDetail:this.props.onProductDetail,flatListController:this._catalogFlatListController,catalog:r,canManageCatalog:this.props.canManageCatalog,shareLinks:this.props.canManageCatalog,onProductShare:this.props.onProductShare,onCollectionSeeAll:this.props.onCollectionSeeAll,data:o.getData(),onEditCollection:this.props.onEditCollection}),b.default.supportsFeature(b.default.F.MD_BACKEND)&&l&&((0,u.getABPropConfigValue)("web_abprop_nux_cart_interstitial")&&i&&(0,p.default)(),a=(0,L.jsx)(_.default,{onOpenCollections:this.props.onOpenCollections}))):e=(0,L.jsx)(E.default,{fetchState:this.state.catalogFetchState}),(0,L.jsxs)(L.Fragment,{children:[n&&(0,L.jsx)("div",{"data-a8n":d.default.key("catalog-header"),className:v.default.header,children:(0,L.jsx)(N.default,{profilePicThumb:s.getProfilePicThumb(),contact:s,businessProfile:n})}),(0,L.jsxs)("div",{"data-a8n":d.default.key("catalog-items"),className:v.default.list,children:[a,t,e,this.state.loadingMore&&(0,L.jsx)(I.default,{})]})]})}loadInitialItems(){var t=this;return(0,o.default)((function*(){var{dataSource:e}=t.state;yield null==e?void 0:e.loadInitialItems(),t.setState({loadingMore:!1})}))()}_renderDrawerMenu(){var t=this.state.cartEnabled?this._handleCartClick:void 0;return(0,L.jsx)(m.default,{onSendCatalog:this._handleCatalogLinkClick,onCartClick:t,cartCount:this.state.cart.itemCount,catalogId:this.props.catalogId.toString(),canManageCatalog:this.props.canManageCatalog,onOpenCollections:this.props.onOpenCollections,onOpenSettings:this.props.onOpenSettings})}render(){return(0,L.jsxs)(x.default,{theme:"products",onDrop:this.props.onBack,children:[(0,L.jsx)(P.default,{title:w.default.t(1427),type:this.props.headerType||P.DRAWER_HEADER_TYPE.SMALL,onBack:this.props.onBack,menu:this._renderDrawerMenu(),focusBackOrCancel:!0}),(0,L.jsx)(j.default,{onScroll:this.onScroll,flatListControllers:[this._catalogFlatListController],children:this._getDrawerContent()})]})}}e.CatalogViewDrawer=R,R.CONCERNS={contact:["id"]},R.displayName="CatalogViewDrawer";var A=(0,k.default)((0,O.default)((0,D.default)(R,R.CONCERNS)));e.default=A},70458:(t,e,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.CollectionContentDrawer=void 0;var o=i(a(48926)),s=i(a(23493)),n=a(67294),l=i(a(32179)),d=i(a(25523)),u=i(a(60028)),c=i(a(26343)),h=a(46215),p=i(a(39618)),f=i(a(80092)),m=i(a(18760)),_=i(a(55454)),g=i(a(17747)),v=i(a(9042)),C=i(a(79864)),S=r(a(55588)),x=a(28379),j=i(a(8212)),P=i(a(67893)),y=i(a(52715)),E=i(a(2408)),T=i(a(71681)),I=a(59562),b=a(70790),w=i(a(19851)),O=i(a(40630)),M=i(a(79485)),N=a(85893);class k extends n.Component{constructor(t){super(t),this._collectionFlatListController=new P.default,this._handleCartChange=()=>{var t=this.state.cart.itemCount;this.state.cartCount!==t&&this.setState({cartCount:t})},this._handleCartClick=()=>{var{contact:t,onCartClick:e}=this.props;e&&e(t.id.toString())},this._handleCatalogLinkClick=()=>{var{catalog:t}=this.state;if(t){var{onCatalogLinkClick:e,contact:a}=this.props;e(t,a)}},this._handleScroll=(t,e)=>{var a,r;this.props.setScrollOffset&&this.props.setScrollOffset(e.scrollTop),(null===(a=this.state.scrollHelper)||void 0===a?void 0:a.willLoadMore(e))&&this.setState({loadingMore:!0}),null===(r=this.state.scrollHelper)||void 0===r||r.onScroll(t,e).then((t=>{t&&this.setState({loadingMore:!1})})).catch((t=>{throw this.setState({loadingMore:!1}),t}))},this.handleScroll=(0,s.default)(this._handleScroll,100),this.onScroll=t=>{this.handleScroll(t,t.currentTarget)};var e=d.default.findCart(this.props.contact.id.toString());this.state={cartEnabled:!1,catalog:null,cartCount:e.itemCount,catalogFetchState:"NONE",dataSource:null,scrollHelper:null,loadingMore:!0,cart:e}}componentDidMount(){var{catalogId:t,listeners:e}=this.props;this._setupCatalog(),(0,p.default)(t).then((t=>{this.setState({cartEnabled:t}),t&&e.add(this.state.cart,"all",this._handleCartChange)}))}_setupCatalog(){var{canManageCatalog:t,catalogId:e,rejectOnUnmount:a,scrollOffset:r}=this.props;u.default.find(e).then((e=>{var a;this.setState({catalog:e,catalogFetchState:"SUCCESS"});var i=new h.SingleCollectionDataSource(e,null===(a=this.props.collection)||void 0===a?void 0:a.id.toString(),t||!1,_.default.PRODUCT_LIST_ITEM_HEIGHT),o=new h.CatalogListItemScrollHelper(i);this.setState({dataSource:i,scrollHelper:o},(()=>{this.loadInitialItems(),this._watchProductCollection(),void 0!==r&&this._collectionFlatListController.setScrollFromStart(r)}))})).checkpoint(a()).catch((t=>{(0,x.parseErrorState)(t,(t=>this.setState({catalogFetchState:t,loadingMore:!1})))}))}_watchProductCollection(){var{collection:t}=this.props,{catalog:e}=this.state;null!=t&&(t.productCollection.on("add",(()=>this.forceUpdate())),t.productCollection.on("remove",(()=>this.forceUpdate())),this.props.listeners.add(t,"change:reviewStatus canAppeal",(()=>this.forceUpdate()))),null!=e&&(e.productCollection.on("add",(()=>this.forceUpdate())),e.productCollection.on("remove",(()=>this.forceUpdate())),e.collections.on("add",(()=>this.forceUpdate())),e.collections.on("remove",(()=>this.forceUpdate())))}_getDrawerContent(){var t,{catalog:e,cartEnabled:a,dataSource:r,catalogFetchState:i,loadingMore:o}=this.state,{canManageCatalog:s,onCartClick:n,onProductDetail:d,onProductShare:u,collection:c}=this.props,h=a&&n?this._handleCartClick:void 0;if(!e||!r)return(0,N.jsx)(j.default,{fetchState:i});var p=r.getData();if(0===p.length&&!o&&s&&c)return(0,N.jsx)(N.Fragment,{children:(0,N.jsxs)("div",{className:f.default.list,children:[(0,N.jsx)(l.default,{theme:"collections",onClick:()=>{this.props.onEditCollection&&this.props.onEditCollection(c)}}),(0,N.jsx)("div",{className:f.default.addItemsNotice,children:E.default.t(508)})]})});var _=(0,N.jsx)(w.default,{onCartOpen:h,onProductDetail:d,flatListController:this._collectionFlatListController,catalog:e,canManageCatalog:s,shareLinks:s,onProductShare:u,collectionId:null===(t=this.props.collection)||void 0===t?void 0:t.id.toString(),data:p}),g=this.props.collection?(0,N.jsx)(m.default,{collection:this.props.collection,onEditCollection:this.props.onEditCollection}):void 0;return(0,N.jsx)(N.Fragment,{children:(0,N.jsxs)("div",{className:f.default.list,children:[g,_,o&&(0,N.jsx)(y.default,{})]})})}loadInitialItems(){var t=this;return(0,o.default)((function*(){var{dataSource:e}=t.state;yield null==e?void 0:e.loadInitialItems(),t.setState({loadingMore:!1}),(0,I.logCollectionSeeAllView)({catalogOwnerJid:t.props.catalogId.toString(),catalogContext:(0,b.getProductCatalogContext)(t.context),collectionId:null==e?void 0:e.collectionId})}))()}_renderDrawerMenu(){var t=this.state.cartEnabled?this._handleCartClick:void 0;return(0,N.jsx)(c.default,{onSendCatalog:this._handleCatalogLinkClick,onCartClick:t,cartCount:this.state.cart.itemCount,catalogId:this.props.catalogId.toString(),canManageCatalog:this.props.canManageCatalog})}render(){var t,e=(null===(t=this.props.collection)||void 0===t?void 0:t.name)||E.default.t(600);return(0,N.jsxs)(g.default,{theme:"products",onDrop:this.props.onBack,children:[(0,N.jsx)(S.default,{title:e,type:this.props.headerType||S.DRAWER_HEADER_TYPE.SMALL,onBack:this.props.onBack,menu:this._renderDrawerMenu()}),(0,N.jsx)(v.default,{flatListControllers:[this._collectionFlatListController],onScroll:this.onScroll,children:this._getDrawerContent()})]})}}e.CollectionContentDrawer=k,k.contextType=C.default,k.CONCERNS={contact:["id"]},k.displayName="CollectionContentDrawer";var D=(0,O.default)((0,T.default)((0,M.default)(k,k.CONCERNS)));e.default=D},83687:(t,e,a)=>{"use strict";var r=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e,a,{collection:r,onSeeAll:h,allItems:p}=t;r?({name:e,id:a}=r):p&&(e=l.default.t(600));var f=(0,c.jsx)(u.TextDiv,{theme:"title",children:(0,c.jsx)(n.default,{text:e,ellipsify:!0,titlify:!0})});function m(t){!function(t){t.preventDefault(),t.stopPropagation()}(t),h&&r?h(r):h&&h()}var _=void 0;if(r)switch(r.reviewStatus){case d.PRODUCT_REVIEW_STATUS.REJECTED:_=(0,c.jsx)("span",{className:s.default.reviewStateRejected,children:l.default.t(602)})}return(0,c.jsx)(i.default,{primary:f,secondary:_,detail:(0,c.jsx)(o.default,{onClick:m,title:l.default.t(8,{collectionName:e}),tabIndex:0,children:l.default.t(603)}),theme:"collection-header",idle:!0,className:s.default.collectionListItem},a)};var i=r(a(55092)),o=r(a(44683)),s=r(a(97076)),n=r(a(85051)),l=r(a(2408)),d=a(26491),u=a(97504),c=a(85893)},84017:(t,e,a)=>{"use strict";var r=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.getPolicyLink=u,e.default=function(t,e){var a;switch(t){case"drugs":return a=n.default.t(639),{first:(0,d.jsx)(l.default,{id:613,params:{collections_rejected_policy_drugs:u(a,e)}}),second:(0,d.jsx)(l.default,{id:664,params:{collections_rejected_policy_drugs:u(a,e)}})};case"weapons":return a=n.default.t(654),{first:(0,d.jsx)(l.default,{id:629,params:{collections_rejected_policy_weapons:u(a,e)}}),second:(0,d.jsx)(l.default,{id:680,params:{collections_rejected_policy_weapons:u(a,e)}})};case"animals":return a=n.default.t(634),{first:(0,d.jsx)(l.default,{id:608,params:{collections_rejected_policy_animals:u(a,e)}}),second:(0,d.jsx)(l.default,{id:659,params:{collections_rejected_policy_animals:u(a,e)}})};case"alcohol":return a=n.default.t(633),{first:(0,d.jsx)(l.default,{id:607,params:{collections_rejected_policy_alcohol:u(a,e)}}),second:(0,d.jsx)(l.default,{id:658,params:{collections_rejected_policy_alcohol:u(a,e)}})};case"gambling":return a=n.default.t(640),{first:(0,d.jsx)(l.default,{id:614,params:{collections_rejected_policy_gambling:u(a,e)}}),second:(0,d.jsx)(l.default,{id:665,params:{collections_rejected_policy_gambling:u(a,e)}})};case"tobacco":return a=n.default.t(652),{first:(0,d.jsx)(l.default,{id:627,params:{collections_rejected_policy_tobacco:u(a,e)}}),second:(0,d.jsx)(l.default,{id:678,params:{collections_rejected_policy_tobacco:u(a,e)}})};case"overtly_sexualized_positioning":return a=n.default.t(647),{first:(0,d.jsx)(l.default,{id:622,params:{collections_rejected_policy_overtly_sexualized_positioning:u(a,e)}}),second:(0,d.jsx)(l.default,{id:673,params:{collections_rejected_policy_overtly_sexualized_positioning:u(a,e)}})};case"adult":return a=n.default.t(632),{first:(0,d.jsx)(l.default,{id:606,params:{collections_rejected_policy_adult:u(a,e)}}),second:(0,d.jsx)(l.default,{id:657,params:{collections_rejected_policy_adult:u(a,e)}})};case"supplements":return a=n.default.t(650),{first:(0,d.jsx)(l.default,{id:625,params:{collections_rejected_policy_supplements:u(a,e)}}),second:(0,d.jsx)(l.default,{id:676,params:{collections_rejected_policy_supplements:u(a,e)}})};case"body_parts_fluids":return a=n.default.t(635),{first:(0,d.jsx)(l.default,{id:609,params:{collections_rejected_policy_body_parts_fluids:u(a,e)}}),second:(0,d.jsx)(l.default,{id:660,params:{collections_rejected_policy_body_parts_fluids:u(a,e)}})};case"healthcare":return a=n.default.t(642),{first:(0,d.jsx)(l.default,{id:616,params:{collections_rejected_policy_healthcare:u(a,e)}}),second:(0,d.jsx)(l.default,{id:667,params:{collections_rejected_policy_healthcare:u(a,e)}})};case"misleading":return a=n.default.t(645),{first:(0,d.jsx)(l.default,{id:619,params:{collections_rejected_policy_misleading:u(a,e)}}),second:(0,d.jsx)(l.default,{id:670,params:{collections_rejected_policy_misleading:u(a,e)}})};case"real_fake_currency":return a=n.default.t(648),{first:(0,d.jsx)(l.default,{id:623,params:{collections_rejected_policy_real_fake_currency:u(a,e)}}),second:(0,d.jsx)(l.default,{id:674,params:{collections_rejected_policy_real_fake_currency:u(a,e)}})};case"digital_services_products":return a=n.default.t(637),{first:(0,d.jsx)(l.default,{id:611,params:{collections_rejected_policy_digital_services_products:u(a,e)}}),second:(0,d.jsx)(l.default,{id:662,params:{collections_rejected_policy_digital_services_products:u(a,e)}})};case"thrid_party_infringements":return a=n.default.t(651),{first:(0,d.jsx)(l.default,{id:626,params:{collections_rejected_policy_thrid_party_infringements:u(a,e)}}),second:(0,d.jsx)(l.default,{id:677,params:{collections_rejected_policy_thrid_party_infringements:u(a,e)}})};case"unauthorized_media":return a=n.default.t(653),{first:(0,d.jsx)(l.default,{id:628,params:{collections_rejected_policy_unauthorized_media:u(a,e)}}),second:(0,d.jsx)(l.default,{id:679,params:{collections_rejected_policy_unauthorized_media:u(a,e)}})};case"illegal_products":return a=n.default.t(644),{first:(0,d.jsx)(l.default,{id:618,params:{collections_rejected_policy_illegal_products:u(a,e)}}),second:(0,d.jsx)(l.default,{id:669,params:{collections_rejected_policy_illegal_products:u(a,e)}})};case"hazardous_goods_and_materials":return a=n.default.t(641),{first:(0,d.jsx)(l.default,{id:615,params:{collections_rejected_policy_hazardous_goods_and_materials:u(a,e)}}),second:(0,d.jsx)(l.default,{id:666,params:{collections_rejected_policy_hazardous_goods_and_materials:u(a,e)}})};case"stolen_goods":return a=n.default.t(649),{first:(0,d.jsx)(l.default,{id:624,params:{collections_rejected_policy_stolen_goods:u(a,e)}}),second:(0,d.jsx)(l.default,{id:675,params:{collections_rejected_policy_stolen_goods:u(a,e)}})};case"human_exploitation_and_sexual_services":return a=n.default.t(643),{first:(0,d.jsx)(l.default,{id:617,params:{collections_rejected_policy_human_exploitation_and_sexual_services:u(a,e)}}),second:(0,d.jsx)(l.default,{id:668,params:{collections_rejected_policy_human_exploitation_and_sexual_services:u(a,e)}})};case"community_standards":return a=n.default.t(636),{first:(0,d.jsx)(l.default,{id:610,params:{collections_rejected_policy_community_standards:u(a,e)}}),second:(0,d.jsx)(l.default,{id:661,params:{collections_rejected_policy_community_standards:u(a,e)}})};case"discrimination":return a=n.default.t(638),{first:(0,d.jsx)(l.default,{id:612,params:{collections_rejected_policy_discrimination:u(a,e)}}),second:(0,d.jsx)(l.default,{id:663,params:{collections_rejected_policy_discrimination:u(a,e)}})};default:return a=n.default.t(646),{first:(0,d.jsx)(l.default,{id:621,params:{collections_rejected_policy_other_violation:u(a,e)}}),second:(0,d.jsx)(l.default,{id:672,params:{collections_rejected_policy_other_violation:u(a,e)}})}}};var i=r(a(44683)),o=r(a(55454)),s=a(4919),n=r(a(2408)),l=r(a(663)),d=a(85893);function u(t,e){var a=e||o.default.WA_COMMERCE_POLICY_URL;return(0,d.jsx)(i.default,{href:a,onClick:t=>{t.preventDefault(),(0,s.openExternalLink)(a)},children:t})}},59562:(t,e,a)=>{"use strict";var r=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.logCollectionSeeAllView=function({catalogOwnerJid:t,catalogContext:e,collectionId:a}){var r=(0,o.getProductStatsInFetched)(t,a),d=null==r?void 0:r.productIndex,u=null==r?void 0:r.collectionIndex;(0,l.createCatalogViewEvent)((0,i.default)({isOwner:(0,l.isCatalogOwner)({catalogOwnerJid:t}),catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_COLLECTION_IMPRESSION,catalogViewAction:s.default.CATALOG_VIEW_ACTION.ACTION_COLLECTION_IMPRESSION,productIndex:d,collectionIndex:u},(0,n.toDataForCatalogViewEvents)(e))).commit()},e.logCollectionItemsAssignment=function({catalogContext:t,collectionId:e,addedCount:a,removedCount:r}){a>0&&new s.default.CatalogBiz({catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_COLLECTION_ASSIGN_ITEMS,catalogEntryPoint:t.entryPoint,catalogSessionId:t.session.toString(),productCount:a,collectionId:e}).commit();r>0&&new s.default.CatalogBiz({catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_COLLECTION_UNASSIGN_ITEMS,catalogEntryPoint:t.entryPoint,catalogSessionId:t.session.toString(),productCount:r,collectionId:e}).commit()},e.logCollectionDeleted=function({catalogContext:t,collectionId:e}){new s.default.CatalogBiz({catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_COLLECTION_DELETED,catalogEntryPoint:t.entryPoint,catalogSessionId:t.session.toString(),collectionId:e}).commit()},e.logCollectionRenamed=function({catalogContext:t,collectionId:e}){new s.default.CatalogBiz({catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_COLLECTION_DELETED,catalogEntryPoint:t.entryPoint,catalogSessionId:t.session.toString(),collectionId:e}).commit()},e.logCollectionMenuClicked=function(t){new s.default.CatalogBiz({catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_MENU_COLLECTIONS_CLICK,catalogEntryPoint:t.entryPoint,catalogSessionId:t.session.toString()}).commit()},e.logCollectionCreated=function({catalogContext:t,collectionId:e,productCount:a}){new s.default.CatalogBiz({catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_COLLECTION_CREATED,catalogEntryPoint:t.entryPoint,catalogSessionId:t.session.toString(),productCount:a}).commit()},e.logCollectionCreateClicked=function(t){new s.default.CatalogBiz({catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_COLLECTION_CREATE_CLICKED,catalogEntryPoint:t.entryPoint,catalogSessionId:t.session.toString()}).commit()};var i=r(a(81109)),o=a(46215),s=r(a(4231)),n=a(70790),l=a(28)},19851:(t,e,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(67294),s=a(96470),n=i(a(91952)),l=r(a(18760)),d=i(a(83687)),u=i(a(55454)),c=i(a(79864)),h=i(a(86025)),p=i(a(19257)),f=i(a(67893)),m=a(82474),_=i(a(71681)),g=a(30333),v=a(70790),C=i(a(34290)),S=a(26491),x=i(a(40630)),j=i(a(79485)),P=a(15298),y=a(85893);class E extends o.Component{constructor(t){super(t),this.attachedListeners=new Set,this._catalogFlatListController=new f.default,this.handleProductDetail=(t,e)=>{var{onProductDetail:a}=this.props;return(0,g.logCatalogListDetailClick)({product:(0,P.unproxy)(t),catalogContext:(0,v.getProductCatalogContext)(this.context)}),this.setState({openedProductId:t.id.toString()}),a(t,e)},this.handleProductShare=t=>{var{onProductShare:e}=this.props;e&&e(t)},this.handleProductDelete=t=>{var{catalog:e}=this.props;(0,s.handleProductDelete)(e,t,(0,v.getProductCatalogContext)(this.context)).then((()=>{t.id===this.state.openedProductId&&(n.default.closeDrawerMid(),this.setState({openedProductId:void 0}))}))},this.handleProductHideShow=t=>{var{catalog:e}=this.props;(0,s.handleProductVisibilityChange)(e,t,(0,v.getProductCatalogContext)(this.context))},this.renderItem=t=>{var{collection:e,product:a,allItems:r,reviewBanner:i,collectionId:o}=t,{onCartOpen:s,shareLinks:n}=this.props;return e?i?(0,y.jsx)(l.default,{collection:e,onEditCollection:this.props.onEditCollection}):(0,y.jsx)(d.default,{collection:e,onSeeAll:this.props.onCollectionSeeAll}):r?(0,y.jsx)(d.default,{allItems:r,onSeeAll:this.props.onCollectionSeeAll}):a?(0,y.jsx)(C.default,{collectionId:o,product:a,onCartOpen:s,onClick:()=>this.handleProductDetail(a,o),onProductShare:n?this.handleProductShare:null,onProductDelete:this.handleProductDelete,onProductHideShow:this.handleProductHideShow,theme:"product-of-collection",canManageCatalog:this.props.canManageCatalog}):null},this.state={openedProductId:void 0,loadingMore:!1,stopLoading:!1,catalogFetchState:t.catalog?"SUCCESS":"NONE"}}getData(){var{onCartOpen:t}=this.props,e=void 0!==t,a=this.props.data||[],r=[];return a.forEach((t=>{var a=t.collection,i=t.product,o=t.allItems;if(a&&i){var s=a.id;r.push({itemKey:`${s.toString()}_${i.id.toString()}_${e.toString()}`,product:i,collectionId:s})}else if(a)this.attachedListeners.has(a.id)||(this.attachedListeners.add(a.id),this.props.listeners.add(a,"change:reviewStatus canAppeal",(()=>{this.forceUpdate()}))),r.push({itemKey:`${a.id.toString()}_${a.reviewStatus.toString()}`,collection:a}),a.reviewStatus!==S.PRODUCT_REVIEW_STATUS.PENDING&&a.reviewStatus!==S.PRODUCT_REVIEW_STATUS.REJECTED||r.push({itemKey:`${a.id.toString()}_reviewBanner`,collection:a,height:(0,l.getCollectionIntegrityHeight)(a),reviewBanner:!0});else if(o)r.push({itemKey:"view_all",allItems:o});else if(i){var n=this.props.collectionId||void 0;r.push({itemKey:`${i.id.toString()}_${e.toString()}`,product:i,collectionId:n})}})),r}render(){var t=this.getData();return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(p.default,{flatListControllers:[this._catalogFlatListController],children:(0,y.jsx)(h.default,{flatListController:this._catalogFlatListController,direction:"vertical",forceConsistentRenderCount:!1,data:t,renderItem:this.renderItem,defaultItemHeight:u.default.PRODUCT_LIST_ITEM_HEIGHT,keyOrder:m.KeyOrder.INVERSE})})})}}E.CONCERNS={catalog:["productCollection","collections","afterCursor","id","index"]},E.contextType=c.default,E.displayName="ProductCollectionsList";var T=(0,x.default)((0,_.default)((0,j.default)(E,E.CONCERNS)));e.default=T},35154:(t,e,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(a(94184)),s=a(55084),n=a(67294),l=i(a(76610)),d=i(a(8581)),u=a(47874),c=i(a(25523)),h=i(a(60028)),p=i(a(22715)),f=i(a(39618)),m=i(a(91952)),_=i(a(81617)),g=i(a(17747)),v=i(a(9042)),C=i(a(79864)),S=r(a(55588)),x=a(54647),j=r(a(13540)),P=i(a(2408)),y=i(a(71681)),E=a(30333),T=a(68793),I=a(70790),b=a(26491),w=i(a(44134)),O=i(a(45858)),M=i(a(29513)),N=a(14654),k=i(a(40630)),D=i(a(86820)),L=r(a(46714)),R=i(a(79485)),A=a(15298),F=a(97504),B=a(85893);class V extends n.Component{constructor(t){super(t),this.handleCartClick=()=>{var{product:t,onCartClick:e}=this.props;e&&e(t.catalogWid.toString())},this._handleReportProduct=()=>{var{product:t}=this.props;m.default.openModal((0,B.jsx)(D.default,{product:t,sessionId:(0,I.getProductCatalogSessionId)(this.context)}))},this.handleProductLinkClick=()=>{var{product:t}=this.props;this.props.onProductLinkClick(t)},this.handleSendChat=()=>{var{product:t}=this.props,e=h.default.get(t.catalogWid);(0,T.sendProductToChat)(t,e,(0,I.getProductCatalogContext)(this.context)),(0,E.logProductMessageBusinessClick)(t,(0,I.getProductCatalogContext)(this.context))},this._handleSendProduct=()=>{var{product:t}=this.props,{catalogWid:e}=t,a=h.default.get(e);if(a){var r=a.productCollection.get(t.id),i=r?(0,A.unproxy)(r):(0,A.unproxy)(t);m.default.attachProduct({product:i})}},this.handleProductMoreInformation=()=>{this.props.onProductMoreInformation(this.props.product)},this.handleBack=()=>{var{onBack:t}=this.props;if(t)return t()},this.handleProductCatalog=()=>{var{onProductCatalog:t,product:e}=this.props;t&&t(e.catalogWid,(0,I.getProductCatalogContext)(this.context))},this.handleProductDetail=t=>{var{onProductDetail:e}=this.props;if(e)return e(t)},this.isRejected=()=>{var{reviewStatus:t}=this.props.product;return t===b.PRODUCT_REVIEW_STATUS.REJECTED},this._isAvailable=()=>{var{productFetchState:t}=this.state;return"ERROR"!==t&&"NOT_FOUND"!==t&&!this.isRejected()};var e=t.product.fetchedFromServer?"SUCCESS":"PENDING",a=null,r="NONE";t.refreshCarousel&&((a=h.default.get(t.product.catalogWid))&&a.productCollection&&a.fetchedFromServer?r="SUCCESS":(a=null,r="PENDING"));var i=c.default.findCart(this.props.product.catalogWid.toString());this.state={businessProfile:null,cartEnabled:!1,productCatalog:a,productFetchState:e,productCatalogFetchState:r,cart:i}}componentDidMount(){var{product:t,listeners:e,collectionId:a}=this.props,r=this.state.cart,i=t.catalogWid,o=t.id.toString();i&&o&&(this._fetchData(),e.add(r,"change:cartItemCollection",(()=>{this.forceUpdate()})),(0,f.default)(i).then((t=>{this.setState({cartEnabled:t})})),(0,E.logProductDetailView)({product:(0,A.unproxy)(t),catalogContext:(0,I.getProductCatalogContext)(this.context),cartToggle:this.state.cartEnabled,collectionId:a}))}_fetchData(){var{product:t,rejectOnUnmount:e}=this.props,a=t.catalogWid,r=t.id.toString(),i=h.default.findProduct({catalogWid:a,productId:r,productMsgMediaData:(0,A.unproxy)(t).productMsgMediaData}),o=d.default.find(a);return Promise.all([o,i]).checkpoint(e()).then((([t])=>(this.setState({productFetchState:"SUCCESS",businessProfile:t}),t))).then((t=>{(0,u.hasCatalog)(t)&&"PENDING"===this.state.productCatalogFetchState&&this._fetchProductCatalog()})).catch((0,s.filteredCatch)(x.ServerStatusCodeError,(()=>{this.setState({productFetchState:"ERROR"}),__LOG__(3)`Failed to fetch product from server`}))).catch((0,s.filteredCatch)(j.Unmount,(()=>{}))).catch((0,s.filteredCatch)(x.E404,(()=>{this.setState({productFetchState:"NOT_FOUND"})}))).catch((0,s.filteredCatch)(x.WebdDrop,(()=>{this.setState({productFetchState:"ERROR"}),__LOG__(3)`Failed to fetch product`})))}_fetchProductCatalog(){var{product:t,rejectOnUnmount:e}=this.props,a=t.catalogWid;h.default.findCarouselCatalog(a).checkpoint(e()).then((t=>{var e=Array.isArray(t)?t[0]:t;this.setState({productCatalog:e||null,productCatalogFetchState:e?"SUCCESS":"NONE"})})).catch((0,s.filteredCatch)(x.ServerStatusCodeError,(t=>{"not_found"===t.status||404===t.status?this.setState({productCatalog:null,productCatalogFetchState:"NOT_FOUND"}):(this.setState({productCatalog:null,productCatalogFetchState:"ERROR"}),__LOG__(3)`Failed to fetch product catalog from server`)}))).catch((0,s.filteredCatch)(j.Unmount,(()=>{}))).catch((0,s.filteredCatch)(x.WebdDrop,(()=>{this.setState({productCatalog:null,productCatalogFetchState:"ERROR"}),__LOG__(3)`Failed to fetch product catalog`})))}componentWillUnmount(){var{product:t}=this.props,e=t.catalogWid,a=t.id.toString();if(e&&a){var r=h.default.get(e),i=r&&r.msgProductCollection.get(a);i&&i.fetchedFromServer&&r&&r.msgProductCollection.remove(i)}}_renderTopBar(){var t,{productFetchState:e,productCatalogFetchState:a}=this.state,r=this._isAvailable();t="ERROR"===e?(0,B.jsx)(F.TextSpan,{className:w.default.text,theme:"small",color:"danger",children:P.default.t(1426)}):r?[(0,B.jsx)(L.default,{size:14,color:L.colorOptions.highlight},"DetailDrawer-loadingBar-spinner"),(0,B.jsx)(F.TextSpan,{className:(0,o.default)(w.default.text,w.default.loadingText),theme:"small",children:P.default.t(1458)},"DetailDrawer-loadingBar-msg")]:(0,B.jsx)(F.TextSpan,{className:w.default.text,theme:"small",color:"danger",children:P.default.t(1444)});var i="PENDING"===e||"PENDING"===a||!r;return(0,B.jsx)("div",{className:(0,o.default)({[w.default.loadingContainer]:i,[w.default.shiftUp]:!i}),children:t})}_renderDrawerMenu(){var t;if(!this._isAvailable())return null;var e=this.state.cartEnabled?this.handleCartClick:void 0;return(0,B.jsx)(_.default,{onSendProduct:this._handleSendProduct,onReportProduct:this._handleReportProduct,onProductLinkClick:this.handleProductLinkClick,onProductMoreInformation:this.handleProductMoreInformation,onCartClick:e,cartCount:this.state.cart.itemCount,catalogId:this.props.product.catalogWid.toString(),contactId:null===(t=this.props.chat)||void 0===t?void 0:t.contact.id.user})}_renderDrawerHeader(){return(0,B.jsx)(S.default,{a8n:"drawer-title-profile",title:P.default.t(1434),onBack:this.handleBack,type:S.DRAWER_HEADER_TYPE.SMALL,menu:this._renderDrawerMenu()})}render(){var{product:t,collectionId:e}=this.props,{productCatalog:a,productFetchState:r}=this.state,i=this._isAvailable(),o=(0,u.hasCatalog)(this.state.businessProfile);return(0,B.jsxs)(g.default,{onDrop:this.handleBack,theme:"striped",children:[this._renderDrawerHeader(),(0,B.jsx)(v.default,{children:(0,B.jsxs)("div",{"data-a8n":l.default.key("product-details"),className:w.default.body,children:[this._renderTopBar(),(0,B.jsx)(M.default,{product:t,isAvailable:i,fetching:"PENDING"===r}),t.availability===N.ProductAvailability.OUT_OF_STOCK?(0,B.jsx)("div",{className:w.default.availabilityBanner,children:P.default.t(1433)}):null,(0,B.jsx)(O.default,{product:t,collectionId:e,onSendChat:this.handleSendChat,isAvailable:i}),o&&a?(0,B.jsx)(p.default,{catalog:a,onProductCatalog:this.handleProductCatalog,onProductDetail:this.handleProductDetail,filterProductId:t.id.toString(),title:P.default.t(1423),animation:!1}):null]})})]},"product-details-drawer")}}V.CONCERNS={product:["id","catalogWid","productImageCollection","fetchedFromServer","name","availability","reviewStatus"]},V.contextType=C.default,V.displayName="ProductDetails";var U=(0,k.default)((0,y.default)((0,R.default)(V,V.CONCERNS)));e.default=U},45858:(t,e,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(a(94184)),s=a(67294),n=i(a(35832)),l=i(a(27792)),d=i(a(69991)),u=i(a(39618)),c=i(a(55454)),h=i(a(79864)),p=i(a(25061)),f=i(a(85051)),m=a(4919),_=a(49895),g=i(a(2408)),v=r(a(17126)),C=a(30333),S=a(70790),x=a(26491),j=i(a(55675)),P=i(a(22986)),y=a(14654),E=i(a(79485)),T=a(15298),I=a(97504),b=a(85893);class w extends s.Component{constructor(t){super(t),this.handleAddToCart=t=>{var{product:e,collectionId:a}=this.props;(0,n.default)(e,(0,S.getProductCatalogContext)(this.context),a),t.stopPropagation()},this.handleReadMore=()=>{this.setState({isDescExpanded:!0})},this._handleClickUrl=(t,e)=>{t.stopPropagation();var{product:a}=this.props;(0,C.logDetailLinkClick)({product:(0,T.unproxy)(a),catalogContext:(0,S.getProductCatalogContext)(this.context)});var r=e&&v.findLink(e);r&&(0,m.openExternalLink)(r.url)},this.state={isDescExpanded:!1,cartEnabled:!1}}componentDidMount(){(0,u.default)(this.props.product.catalogWid).then((t=>{this.setState({cartEnabled:t})}))}_renderMessageBusinessButton(){var{onSendChat:t,product:e,isAvailable:a}=this.props;if(!t||!e.fetchedFromServer||!a||e.reviewStatus!==x.PRODUCT_REVIEW_STATUS.APPROVED)return null;var r=g.default.t(1439);return(0,b.jsx)("div",{className:j.default.buttonContainer,title:r,children:(0,b.jsx)(d.default,{a8nText:"product-message-business-btn",className:j.default.button,onClick:t,type:"secondary",children:r})})}_renderAddToCartButton(){var{product:t,isAvailable:e}=this.props;if(!this.state.cartEnabled||!t.fetchedFromServer||!e||t.reviewStatus!==x.PRODUCT_REVIEW_STATUS.APPROVED)return null;var a=g.default.t(1420),r=t.availability===y.ProductAvailability.OUT_OF_STOCK;return(0,b.jsx)("div",{className:j.default.buttonContainer,title:a,children:(0,b.jsx)(d.default,{a8nText:"add-to-cart-btn",className:(0,o.default)(j.default.button,j.default.addToCartButton),onClick:this.handleAddToCart,type:"secondary",disabled:r,children:(0,b.jsxs)("span",{className:j.default.addToCartContainer,children:[(0,b.jsx)(l.default,{className:(0,o.default)(j.default.addToCartIcon,{[j.default.addToCartIconDisabled]:r})}),a]})})})}_renderLink(t){var{product:e,isAvailable:a}=this.props;if(!e.fetchedFromServer||!t||!a)return null;var r=_.Configuration.TrustedGroupDesc({links:v.findLinks(t)});return(0,b.jsx)("div",{className:j.default.descBlock,children:(0,b.jsx)(f.default,{selectable:!0,formatters:r,text:t,onClick:e=>this._handleClickUrl(e,t)})})}_renderDesc(){var{product:t}=this.props,{isDescExpanded:e}=this.state;if(!t.description&&!t.url&&!t.retailerId)return null;var a,r=!(!t||!t.description)&&t.description.length>c.default.GROUP_DESCRIPTION_INFO_PANEL_TRUNC_LENGTH;return t.description&&(a=(0,b.jsxs)("div",{className:j.default.descBlock,children:[(0,b.jsx)(f.default,{selectable:!0,multiline:!0,text:t.description,textLimit:e?1/0:c.default.GROUP_DESCRIPTION_INFO_PANEL_TRUNC_LENGTH}),r&&!e?(0,b.jsx)("span",{className:j.default.more,role:"button",onClick:this.handleReadMore,children:` ${g.default.t(1467)}`}):null]})),(0,b.jsxs)(I.TextDiv,{theme:"plain",className:j.default.description,children:[a,this._renderLink(t.url),t.retailerId?(0,b.jsx)("div",{className:j.default.descBlock,children:(0,b.jsx)(f.default,{text:t.retailerId,selectable:!0,direction:"inherit"})}):null]})}render(){var{product:t}=this.props;return(0,b.jsxs)(p.default,{theme:"padding-product",animation:!1,children:[(0,b.jsx)(I.TextDiv,{theme:"title",className:j.default.name,children:(0,b.jsx)(f.default,{text:t.name,selectable:!0})}),null!=t.priceAmount1000?(0,b.jsx)(I.TextDiv,{className:j.default.price,color:"dark",theme:"plain",children:(0,b.jsx)(P.default,{product:t,selectable:!0,direction:"inherit"})}):null,this._renderDesc(),this._renderMessageBusinessButton(),this._renderAddToCartButton()]})}}w.contextType=h.default,w.CONCERNS={product:["name","url","description","availability","currency","priceAmount1000","salePriceAmount1000","salePriceStartDate","salePriceEndDate","fetchedFromServer","retailerId","catalogWid","productImageCollection","imageHash","reviewStatus","imageCdnUrl","id"]},w.displayName="ProductDetailsInfo";var O=(0,E.default)(w,w.CONCERNS);e.default=O},7127:(t,e,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.ProductDetailsForDeepLink=void 0;var o=i(a(7900)),s=a(67294),n=i(a(60028)),l=i(a(17747)),d=i(a(9042)),u=r(a(55588)),c=a(28379),h=i(a(8212)),p=i(a(62602)),f=i(a(2408)),m=i(a(35154)),_=i(a(40630)),g=a(89573),v=a(85893);class C extends s.PureComponent{constructor(t){super(t),this.state={product:null,productFetchState:"NONE"};var{productId:e,businessOwnerJid:a}=this.props.productInfo,r=(0,p.default)({productId:e,businessOwnerJid:a});this.state=r?{product:r,productFetchState:"NONE"}:{product:r,productFetchState:"PENDING"}}componentDidMount(){this.state.product||this._fetchProduct()}_fetchProduct(){var{productId:t,businessOwnerJid:e}=this.props.productInfo,a=(0,g.createWid)(e);n.default.findProduct({catalogWid:a,productId:t}).checkpoint(this.props.rejectOnUnmount()).then((()=>{var e=n.default.get(a),r=(0,o.default)(e,"catalog").productCollection.get(t);this.setState({product:r,productFetchState:"SUCCESS"})})).catch((t=>{(0,c.parseErrorState)(t,(t=>this.setState({productFetchState:t})))}))}render(){return this.state.product?(0,v.jsx)(m.default,{product:this.state.product,onEnd:this.props.onEnd,onBack:this.props.onBack,onProductDetail:this.props.onProductDetail,onProductCatalog:this.props.onProductCatalog,refreshCarousel:!0,onProductLinkClick:this.props.onProductLinkClick,onProductMoreInformation:this.props.onProductMoreInformation,onCartClick:this.props.onCartClick}):(0,v.jsxs)(l.default,{onDrop:this.props.onBack,children:[(0,v.jsx)(u.default,{a8n:"drawer-title-profile",title:f.default.t(1434),onBack:this.props.onBack,type:u.DRAWER_HEADER_TYPE.SMALL}),(0,v.jsx)(d.default,{children:(0,v.jsx)(h.default,{fetchState:this.state.productFetchState})})]},"product-details-drawer")}}e.ProductDetailsForDeepLink=C,C.displayName="ProductDetailsForDeepLink";var S=(0,_.default)(C);e.default=S},83153:(t,e,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(a(94184)),s=a(67294),n=i(a(55092)),l=i(a(91952)),d=i(a(55059)),u=i(a(17747)),c=i(a(9042)),h=i(a(79864)),p=r(a(55588)),f=i(a(85051)),m=i(a(2408)),_=i(a(76389)),g=a(30333),v=a(70790),C=i(a(13906)),S=r(a(84241)),x=i(a(5646)),j=i(a(74295)),P=i(a(32234)),y=a(40307),E=a(15298),T=a(85893),I="product-link-anchor";function b(t){var e=t.productImageCollection.head();return e?(0,T.jsx)(S.default,{className:(0,o.default)(C.default.productImage,C.default.productImageContainer),mediaData:e.mediaData}):(0,T.jsx)(S.ProductThumbPlaceholder,{className:(0,o.default)(C.default.productThumb,C.default.productThumbContainer)})}class w extends s.Component{constructor(...t){super(...t),this._handleProductLinkClick=t=>{t.preventDefault(),this._handleSendProductLinkClick()},this._handleSendProductLinkClick=()=>{var{product:t,onSend:e}=this.props;l.default.openModal((0,T.jsx)(P.default,{product:t,onSend:e}),{transition:"modal-flow"}),(0,g.logShareProductViaWALinkClick)({product:t,catalogContext:(0,v.getProductCatalogContext)(this.context)})},this._handleCopyLinkClick=()=>{var{product:t}=this.props;(0,g.logShareProductCopyLinkClick)({product:t,catalogContext:(0,v.getProductCatalogContext)(this.context)})},this._handleSendProduct=()=>{var{product:t,onSend:e}=this.props;l.default.attachProduct({product:(0,E.unproxy)(t),onSend:e})}}render(){var t,e,a,{onBack:r,onCancel:i,product:o,prompt:s,centerDrawer:l,sendProductMsg:h}=this.props,g=(0,y.createProductLink)(o.catalogWid.user,o.id.toString());return l&&(t="labels",e="center-column"),a=null!=h?(0,T.jsx)(j.default,{onClick:this._handleSendProduct}):(0,T.jsx)(x.default,{onClick:this._handleSendProductLinkClick}),(0,T.jsxs)(u.default,{theme:t,children:[(0,T.jsx)(p.default,{a8n:"product-link-title",title:m.default.t(1436),onBack:r,onCancel:i,type:p.DRAWER_HEADER_TYPE.SMALL,focusBackOrCancel:!0}),(0,T.jsxs)(c.default,{theme:e,children:[(0,T.jsx)("div",{className:C.default.prompt,children:s}),(0,T.jsx)(n.default,{image:b(o),primary:(0,T.jsx)(f.default,{text:o.name,direction:"auto"}),theme:"identity",secondary:(0,T.jsx)(_.default,{id:I,href:g,onClick:this._handleProductLinkClick,noHandle:!0})}),a,(0,T.jsx)(d.default,{elementId:I,onClick:this._handleCopyLinkClick})]})]},"product-link-drawer")}}e.default=w,w.contextType=h.default,w.displayName="ProductLinkDrawer"},27370:(t,e,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.ProductListDrawer=void 0;var o=i(a(23493)),s=i(a(23279)),n=a(55084),l=a(67294),d=i(a(76610)),u=a(70359),c=i(a(32179)),h=i(a(25523)),p=i(a(5221)),f=i(a(21496)),m=i(a(60028)),_=i(a(39618)),g=i(a(55454)),v=i(a(17747)),C=i(a(9042)),S=i(a(79864)),x=r(a(55588)),j=r(a(9492)),P=i(a(47452)),y=a(54647),E=r(a(13540)),T=a(28379),I=i(a(8212)),b=i(a(67893)),w=i(a(52715)),O=i(a(12950)),M=a(78615),N=i(a(2408)),k=i(a(29429)),D=i(a(71681)),L=a(30333),R=a(20232),A=a(47941),F=a(70790),B=i(a(13002)),V=i(a(8685)),U=i(a(70154)),H=i(a(40630)),W=i(a(79485)),G=i(a(2966)),z=a(74289),K=a(85893);class Y extends l.Component{constructor(t){super(t),this._catalogFlatListController=new b.default,this._handleScroll=t=>{this.state.loadingMore||t.scrollTop+g.default.SCROLL_FUDGE>t.scrollHeight-t.clientHeight&&this._loadMoreProduct()},this.handleScroll=(0,o.default)(this._handleScroll,100),this._loadMoreProduct=()=>{var{catalogId:t}=this.props,{stopLoading:e,loadedProducts:a}=this.state;if(!e){var r=m.default.assertGet(t);if(r.afterCursor){var i=r.productCollection.getProductModels().length;this.setState({loadingMore:!0,loadedProducts:i}),m.default.update(t).checkpoint(this.props.rejectOnUnmount()).then((t=>{this.setState({loadingMore:!1}),(Array.isArray(t)?t[0]:t).productCollection.getProductModels().length===a&&this.setState({stopLoading:!0}),i*g.default.PRODUCT_LIST_ITEM_HEIGHT<window.innerHeight&&this._loadMoreProduct()})).catch((0,n.filteredCatch)(E.Unmount,(()=>{}))).catch((()=>{this.setState({loadingMore:!1,stopLoading:!0})}))}}},this.onScroll=t=>{this.handleScroll(t.currentTarget),this.props.setScrollOffset&&this.props.setScrollOffset(t.currentTarget.scrollTop)},this._handleCartChange=()=>{var t=this.state.cart.itemCount;this.state.cartCount!==t&&this.setState({cartCount:t})},this._handleCartClick=()=>{var{contact:t,onCartClick:e}=this.props;e&&e(t.id.toString())},this._handleCatalogLinkClick=()=>{var{catalog:t}=this.state;if(t){var{onCatalogLinkClick:e,contact:a,catalogId:r}=this.props;e(t,a),(0,L.logCatalogShareLinkClick)({catalogOwnerWid:r,catalogContext:(0,F.getProductCatalogContext)(this.context)})}};var e=m.default.get(this.props.catalogId),a=!e||e.stale?null:e,r=h.default.findCart(this.props.contact.id.toString());this.state={loadingMore:!1,loadedProducts:0,stopLoading:!1,cartEnabled:!1,catalog:a,cart:r,cartCount:r.itemCount,catalogFetchState:a?"SUCCESS":"NONE"}}componentDidMount(){var{catalogId:t,listeners:e,canManageCatalog:a}=this.props;e.add(this.state.cart,"all",this._handleCartChange),(0,L.logCatalogListView)({catalogOwnerWid:t,catalogContext:(0,F.getProductCatalogContext)(this.context),cartToggle:this.state.cartEnabled}),this.state.catalog?(this._loadMoreProduct(),this._watchProductCollection()):this._findCatalog(),(0,_.default)(t).then((t=>{this.setState({cartEnabled:t}),O.default.supportsFeature(O.default.F.MD_BACKEND)&&a&&t&&(0,u.getABPropConfigValue)("web_abprop_nux_cart_interstitial")&&(0,f.default)()}))}_findCatalog(){return m.default.find(this.props.catalogId).checkpoint(this.props.rejectOnUnmount()).then((t=>{this.setState({catalog:t,catalogFetchState:"SUCCESS"}),this._loadMoreProduct(),this._watchProductCollection()})).catch((0,n.filteredCatch)(y.ServerStatusCodeError,(t=>{403!==t.status&&404!==t.status||this.setState({catalog:null,catalogFetchState:"NOT_FOUND"})}))).catch((t=>{(0,T.parseErrorState)(t,(t=>this.setState({catalogFetchState:t})))}))}_watchProductCollection(){var{catalog:t}=this.state;this.props.autoUpdate&&null!=t&&(t.productCollection.on("add",(0,s.default)((()=>this.forceUpdate()),100)),t.productCollection.on("remove",(0,s.default)((()=>this.forceUpdate()),100)))}_getDrawerContent(){var t,{catalog:e,cartEnabled:a}=this.state,{contact:r,businessProfile:i,canManageCatalog:o,onAddProduct:s,onCartClick:n}=this.props,l=a&&n?this._handleCartClick:void 0;return e?(o&&s&&(t=(0,K.jsx)(c.default,{onClick:()=>s(),theme:"in-list"})),(0,K.jsxs)(K.Fragment,{children:[i&&(0,K.jsx)("div",{"data-a8n":d.default.key("catalog-header"),className:V.default.header,children:(0,K.jsx)(U.default,{profilePicThumb:r.getProfilePicThumb(),contact:r,businessProfile:i})}),(0,K.jsxs)("div",{"data-a8n":d.default.key("catalog-items"),className:V.default.list,children:[t,(0,K.jsx)(B.default,{onCartOpen:l,onProductDetail:this.props.onProductDetail,flatListController:this._catalogFlatListController,catalog:e,canManageCatalog:this.props.canManageCatalog,shareLinks:this.props.canManageCatalog,onProductShare:this.props.onProductShare}),this.state.loadingMore&&(0,K.jsx)(w.default,{})]})]})):(0,K.jsx)(I.default,{fetchState:this.state.catalogFetchState})}_getCartIcon(){var{onCartClick:t,headerType:e,catalogId:a}=this.props;if(this.state.cartEnabled&&t){var r=this.state.cartCount,i=(0,z.isNumber)(r)&&r>0?r.toString():void 0,o=(0,R.getOnCartClickWithLog)(this._handleCartClick,a.toString(),(0,F.getProductCatalogContext)(this.context));return(0,K.jsx)(A.MenuBarItem,{a8nText:"menu-bar-cart-link",icon:(0,K.jsx)(p.default,{theme:e===x.DRAWER_HEADER_TYPE.LARGE?"inherit-color":null}),text:i,title:N.default.t(477),onClick:o})}return null}_getDrawerHeaderMenu(){var{canManageCatalog:t,onOpenSettings:e}=this.props,a=t&&(0,M.canToggleCartOnOff)()?(0,K.jsx)(A.MenuBarItem,{a8nText:"menu-bar-menu",icon:(0,K.jsx)(G.default,{name:"menu"}),title:N.default.t(1194),children:(0,K.jsxs)(j.default,{type:"dropdown_menu",flipOnRTL:!0,dirX:j.DirX.LEFT,children:[(0,K.jsx)(P.default,{a8n:"mi-foward menu-item",action:this._handleCatalogLinkClick,children:N.default.t(895)}),e&&(0,K.jsx)(P.default,{a8n:"mi-settings menu-item",action:e,children:N.default.t(545)})]},"CatalogDetailHeader")}):(0,K.jsx)(A.MenuBarItem,{a8nText:"menu-bar-catalog-link",icon:(0,K.jsx)(k.default,{theme:this.props.headerType===x.DRAWER_HEADER_TYPE.LARGE?"inherit-color":null}),title:N.default.t(538),onClick:this._handleCatalogLinkClick});return(0,K.jsxs)(K.Fragment,{children:[this._getCartIcon(),a]})}render(){return(0,K.jsxs)(v.default,{theme:"products",onDrop:this.props.onBack,children:[(0,K.jsx)(x.default,{title:N.default.t(1427),type:this.props.headerType||x.DRAWER_HEADER_TYPE.SMALL,onBack:this.props.onBack,menu:this._getDrawerHeaderMenu(),focusBackOrCancel:!0}),(0,K.jsx)(C.default,{onScroll:this.onScroll,flatListControllers:[this._catalogFlatListController],scrollOffset:this.props.scrollOffset,children:this._getDrawerContent()})]})}}e.ProductListDrawer=Y,Y.CONCERNS={contact:["id"]},Y.contextType=S.default,Y.displayName="ProductListDrawer";var $=(0,H.default)((0,D.default)((0,W.default)(Y,Y.CONCERNS)));e.default=$},70154:(t,e,a)=>{"use strict";var r=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(67294),o=a(88419),s=r(a(85051)),n=r(a(78972)),l=r(a(77440)),d=r(a(79485)),u=a(97504),c=a(85893);class h extends i.Component{_renderDescription(){var{businessProfile:t}=this.props;return t&&t.description?(0,c.jsx)("div",{className:l.default.description,children:(0,c.jsx)(s.default,{text:t.description,direction:"auto",selectable:!0,titlify:!0})}):null}_renderPicture(){var{profilePicThumb:t,contact:e}=this.props;if(!t)return null;var a=(0,o.getDefaultIcon)(e.id);return(0,c.jsx)("div",{className:l.default.photo,children:(0,c.jsx)(o.DetailImageCommon,{profilePicThumb:t,loader:!0,defaultIcon:a,profilePicThumbImg:t.imgFull,spinnerClassName:l.default.spinner,imgClassName:l.default.img,theme:"business"})})}render(){var{contact:t}=this.props;return(0,c.jsxs)("div",{className:l.default.header,"data-testid":"product-list-header",children:[this._renderPicture(),(0,c.jsxs)("div",{className:l.default.text,children:[(0,c.jsx)(u.TextDiv,{className:l.default.name,theme:"large",children:(0,c.jsx)(n.default,{contact:t,selectable:!0,useVerifiedName:!0})}),this._renderDescription()]})]})}}h.CONCERNS={profilePicThumb:["imgFull"],contact:["id","isMe"],businessProfile:["description"]},h.displayName="ProductListDrawerHeader";var p=(0,d.default)(h,h.CONCERNS);e.default=p},22685:(t,e,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(a(48926)),s=i(a(7900)),n=a(67294),l=i(a(60028)),d=a(10504),u=i(a(17747)),c=i(a(9042)),h=r(a(55588)),p=i(a(2408)),f=i(a(71681)),m=i(a(40630)),_=i(a(79485)),g=a(15298),v=a(85893);class C extends n.Component{constructor(...t){super(...t),this.state={complianceInfo:void 0,isLoading:!0},this.onBack=()=>{var{onBack:t}=this.props;if(t)return t()}}componentDidMount(){var t=this;return(0,o.default)((function*(){var{product:e}=t.props;yield l.default.findProduct({catalogWid:e.catalogWid,productId:e.id.toString(),productMsgMediaData:(0,g.unproxy)(e).productMsgMediaData,shouldFetchComplianceFields:!0});var a=l.default.get(e.catalogWid),r=(0,s.default)(a,"catalog").productCollection.get(e.id);r?t.setState({complianceInfo:r.complianceInfo||void 0,isLoading:!1}):__LOG__(3)`Unable to fetch compliance for product: ${e.id}`}))()}render(){var{complianceInfo:t={},isLoading:e}=this.state,{countryCodeOrigin:a,importerName:r,importerAddress:i}=t;return(0,v.jsxs)(u.default,{onDrop:this.onBack,theme:"striped",children:[(0,v.jsx)(h.default,{a8n:"drawer-title-profile",title:p.default.t(1432),onBack:this.onBack,type:h.DRAWER_HEADER_TYPE.SMALL}),(0,v.jsx)(c.default,{theme:e?"center-content":void 0,children:e?(0,v.jsx)(d.ComplianceInfoLoading,{}):(0,v.jsxs)(d.ComplianceInfoGroup,{children:[(0,v.jsx)(d.ComplianceInfoPrimitiveField,{value:a,label:p.default.t(1430)}),(0,v.jsx)(d.ComplianceInfoPrimitiveField,{value:r,label:p.default.t(1431)}),(0,v.jsx)(d.ComplianceInfoStructuralField,{valuesMap:i,keys:["street1","street2","postalCode","city","region","countryCode"],label:p.default.t(1429)})]})})]},"product-details-drawer")}}C.CONCERNS={product:["id","catalogWid"]},C.displayName="ProductMoreInformation";var S=(0,m.default)((0,f.default)((0,_.default)(C,C.CONCERNS)));e.default=S},29513:(t,e,a)=>{"use strict";var r=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(67294),o=r(a(91952)),s=r(a(79864)),n=r(a(30925)),l=a(30333),d=a(70790),u=r(a(53584)),c=r(a(79485)),h=a(15298),p=a(85893);class f extends i.Component{constructor(...t){super(...t),this.handleClick=(t,e)=>{var{product:a}=this.props;(0,l.logDetailImageClick)({product:(0,h.unproxy)(a),catalogContext:(0,d.getProductCatalogContext)(this.context)});var r={activeProductImage:e,productImageCollection:a.productImageCollection,getZoomNode:()=>t,product:a};o.default.productImageViewerModal(r,(0,d.getProductCatalogSessionId)(this.context))}}render(){var{product:t,isAvailable:e,fetching:a}=this.props,r=t.productImageCollection.toArray();return(0,p.jsx)("div",{className:u.default.imageCarouselContainer,children:(0,p.jsx)(n.default,{images:r,fetching:a,onClick:e?this.handleClick:null,renderFallback:!e,fallbackMediaData:t.productMsgMediaData})})}}f.contextType=s.default,f.CONCERNS={product:["productImageCollection","productMsgMediaData","catalogWid","imageCdnUrl"]},f.displayName="ProductTile";var m=(0,c.default)(f,f.CONCERNS);e.default=m},44056:(t,e,a)=>{"use strict";var r=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var{onPopupCancel:e,onReport:a,onTellUsMore:r}=t,u=()=>{e()},c=s.default.t(1491),h=(0,d.jsx)("div",{children:s.default.t(1489)},"ReportProductChoicePopup-desc"),p=(0,d.jsx)(i.default,{a8nText:"popup-controls-more",type:"secondary",onClick:()=>{r()},children:s.default.t(1492)},"ReportProductChoicePopup-moreBtn"),f=(0,d.jsx)(i.default,{a8nText:"popup-controls-report",type:"secondary",onClick:()=>{a()},children:s.default.t(1488)},"ReportProductChoicePopup-reportBtn"),m=(0,d.jsx)(i.default,{type:"secondary",onClick:u,children:s.default.t(1856)},0),_=(0,d.jsxs)("div",{className:l.default.buttons,children:[(0,d.jsx)("div",{className:l.default.button,children:p}),(0,d.jsx)("div",{className:l.default.button,children:f}),(0,d.jsx)("div",{className:l.default.button,children:m})]});return(0,d.jsx)(o.default,{handlers:{escape:u},children:(0,d.jsx)(n.default,{title:c,actions:_,children:h})})};var i=r(a(69991)),o=r(a(39e3)),s=r(a(2408)),n=r(a(79475)),l=r(a(63665)),d=a(85893)},86820:(t,e,a)=>{"use strict";var r=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(6467),o=r(a(91952)),s=r(a(99942)),n=r(a(2408)),l=a(30333),d=a(68793),u=r(a(44056)),c=r(a(12832)),h=a(15298),p=a(85893);class f extends s.default{constructor(...t){super(...t),this._submitReason=t=>{var{product:e,sessionId:a}=this.props;return(0,l.logReportProduct)({product:(0,h.unproxy)(e),catalogSessionId:a}),(0,d.reportProduct)(e.catalogWid,e.id.toString(),t)},this.onDelete=()=>{this.end()},this.onReport=t=>{this._onShowSubmittedToast(t)},this.onTellUsMore=()=>{this.push((0,p.jsx)(c.default,{onTellUsMoreSubmit:this.onReport,onCancel:this.onCancel}),"none")},this.onPopupCancel=()=>{this.end()},this.onCancel=()=>{this.end()},this._onReportSubmitted=()=>{this.end()},this._onShowSubmittedToast=(t,e=(0,i.genId)())=>{var{product:a,sessionId:r}=this.props,s=this._submitReason(t),d=new i.ActionType(n.default.t(1455)),u=s.then((()=>((0,l.logReportProductSuccess)({product:(0,h.unproxy)(a),catalogSessionId:r}),new i.ActionType(`${n.default.t(1454)}. ${n.default.t(1490)}`)))).catch((()=>((0,l.logReportProductFailure)({product:(0,h.unproxy)(a),catalogSessionId:r}),__LOG__(3)`error submitting product report`,new i.ActionType(n.default.t(1453),{actionText:n.default.t(1506),actionHandler:()=>this._onShowSubmittedToast(t,e)}))));return o.default.openToast((0,p.jsx)(i.ActionToast,{id:e,initialAction:d,pendingAction:u})),this._onReportSubmitted(),s}}componentDidMount(){this.push((0,p.jsx)(u.default,{onTellUsMore:this.onTellUsMore,onReport:this.onReport,onPopupCancel:this.onPopupCancel,onCancel:this.onCancel}))}}e.default=f},12832:(t,e,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(a(94184)),s=a(67294),n=i(a(69991)),l=i(a(91952)),d=i(a(39e3)),u=i(a(2408)),c=i(a(663)),h=i(a(79475)),p=i(a(22883)),f=r(a(49201)),m=a(85893),_=["NO_MATCH","SPAM","ILLEGAL","SCAM","KNOCKOFF","OTHER"];class g extends s.Component{constructor(...t){super(...t),this.state={reason:null},this.handleCancel=()=>{var{onCancel:t}=this.props;t&&t()},this._handleSubmit=()=>{if(!this.state.reason)return this._noSelectionToast();this.props.onTellUsMoreSubmit(this.state.reason)},this._handleReasonChange=t=>{t.target&&t.target.value&&this.setState({reason:t.target.value})}}_noSelectionToast(){l.default.openToast((0,m.jsx)(f.default,{msg:u.default.t(1456),id:(0,f.genId)()}))}_renderRadioOptions(){var{reason:t}=this.state;return _.map((e=>(0,m.jsx)("li",{children:(0,m.jsxs)("label",{className:p.default.label,children:[(0,m.jsx)("input",{type:"radio",name:e,value:e,onChange:this._handleReasonChange,className:p.default.input,checked:t===e}),(0,m.jsx)(v,{reason:e})]})},`ReportProductReasonPopup-${e}-option`)))}render(){var t=u.default.t(1449),e=(0,m.jsx)("div",{className:(0,o.default)(p.default.section),children:(0,m.jsx)("ul",{className:p.default.reasonList,children:this._renderRadioOptions()})}),a=(0,m.jsx)(n.default,{a8nText:"popup-controls-submit",type:"primary",onClick:this._handleSubmit,disabled:!this.state.reason,children:u.default.t(1452)},"ReportProductReasonPopup-submitButton"),r=(0,m.jsx)(n.default,{type:"secondary",a8nText:"popup-controls-cancel",onClick:this.handleCancel,children:u.default.t(1856)},"ReportProductReasonPopup-cancelButton"),i={escape:this.handleCancel},s=(0,m.jsxs)("div",{className:p.default.buttons,children:[r,a]});return(0,m.jsx)(d.default,{handlers:i,children:(0,m.jsx)(h.default,{title:t,actions:s,children:e})})}}function v(t){var{reason:e}=t;switch(e){case"NO_MATCH":return(0,m.jsx)(c.default,{id:1447});case"SPAM":return(0,m.jsx)(c.default,{id:1451});case"ILLEGAL":return(0,m.jsx)(c.default,{id:1445});case"SCAM":return(0,m.jsx)(c.default,{id:1450});case"KNOCKOFF":return(0,m.jsx)(c.default,{id:1446});case"OTHER":return(0,m.jsx)(c.default,{id:1448});default:throw new Error(`Invalid reason: ${e}`)}}e.default=g,g.displayName="ReportProductReasonPopup"},56605:(t,e,a)=>{"use strict";var r=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=function({isEditMode:t,catalog:e,subtitle:a,hideIncompleteRows:r,productsToShow:h,businessProfile:p}){return(0,c.jsx)(s.default,{onProductDetail:function(e){if(t)n.default.openModal((0,c.jsx)(u.default,{}));else{var a=new URL((0,d.default)(e.url,"product.url"),`https://${l.default.HOSTNAME.FACEBOOK}`);i.default.open(String(a))}},onProductCatalog:function(){t?n.default.openModal((0,c.jsx)(u.default,{})):(0,o.goToShop)(p)},catalog:e,subtitle:a,hideIncompleteRows:r,productsToShow:h,showShopsLogo:!0})};var i=r(a(94666)),o=a(47874),s=r(a(22715)),n=r(a(91952)),l=r(a(55454)),d=r(a(91619)),u=r(a(37741)),c=a(85893)},46929:(t,e,a)=>{"use strict";var r=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.RingTheme=void 0;var i=r(a(81109)),o=r(a(94184)),s=r(a(42138)),n=r(a(76006)),l=a(85893),d=a(54302).Mirrored(["STATUS_V3_PANEL","BUSINESS_CONTACT_INFO"]);e.RingTheme=d;function u(t){var{stroke:e,size:a}=t,r=(0,n.default)(t.statusV3,["unreadCount","totalCount","contact"]),u=t=>{var a=100+e;return(0,l.jsx)("circle",(0,i.default)({cx:a/2,cy:a/2,r:50,fill:"none",strokeLinecap:"round",strokeWidth:e},t))},c=(t,e,a,r)=>{for(var i="",o=0;o<t;o++)i+=o===t-1?`${e} ${a-t*(r+e)+r} `:`${e} ${r} `;return i},h=100+e,p=r.totalCount,f=10,m=50*Math.PI*2;m-10*p<1&&(f=m/p/1.2);var _,g,v=(m-f*p)/p,C=m/4-f/2,S=r.contact.isMe?0:r.unreadCount,x=p-S;if(S){var j,P=C+p*(f+v);1!==p&&(j=c(S,v,m,f)),_=u({strokeDashoffset:P,strokeDasharray:j,className:s.default.unread})}if(x){var y,E=C+x*(f+v);1!==p&&(y=c(x,v,m,f)),g=u({strokeDashoffset:E,strokeDasharray:y,className:s.default.read})}return(0,l.jsxs)("svg",{className:(0,o.default)({[s.default.statusV3PanelRing]:t.theme===d.STATUS_V3_PANEL,[s.default.businessContactInfoRing]:t.theme===d.BUSINESS_CONTACT_INFO}),width:a,height:a,viewBox:`0 0 ${h} ${h}`,children:[_,g]})}u.defaultProps={size:48,stroke:4,theme:d.STATUS_V3_PANEL};var c=u;e.default=c},92838:(t,e,a)=>{"use strict";var r=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.setupStatusV3Controller=function(t,e){if(t){if(t.type===s.default.TYPE.IMAGE){var a=4500;return(0,i.default)(e.caption)||(a+=2e3*Math.min(e.caption.length/150,1)),new l(a)}return t.type===s.default.TYPE.VIDEO?e.isGif?new u:new n.default:new l(3e3)}if(e.type===o.default.MSG_TYPE.CHAT){var r=2e3+60*Math.min(e.body.length,1e3);return new l(r)}return new l(3e3)},e.StatusV3GifController=e.StatusV3CountdownController=void 0;var i=r(a(41609)),o=r(a(55454)),s=r(a(49694)),n=r(a(9654));class l{constructor(t){this.addListeners=(t,e,a)=>{this._onStart=t,this._onPause=e,this._onEnded=a},this.removeListeners=()=>{this._onStart=void 0,this._onPause=void 0,this._onEnded=void 0},this.play=()=>{if(this._timer)__LOG__(2)`Duplicate timer start`;else{this._timer=setTimeout(this._onTimeup,this._timeout),this._start=(new Date).getTime();var t=this._onStart;t&&t(this._timeout,this._duration)}},this.stop=()=>{if(this._timer){clearTimeout(this._timer),this._timer=null;var t=(new Date).getTime();this._timeout-=t-this._start;var e=this._onPause;e&&e()}else __LOG__(2)`Timer stop called on stopped timer`},this.resume=()=>{this.play()},this.pause=()=>{this.stop()},this._onTimeup=()=>{var t=this._onEnded;t&&t()},this._duration=t,this._timeout=this._duration,this._start=0}get duration(){return this._duration}}e.StatusV3CountdownController=l;var d=6e3;class u{constructor(){this.removeListeners=()=>{this._onStart=void 0,this._onPause=void 0,this._onEnded=void 0,this._videoController.removeListeners(),this._countdownController.removeListeners()},this.setVideo=(t,e)=>{this._video!==t&&(this._video=t,null!=e&&(this._duration=e),this._videoController.setVideo(t))},this._onVideoStartHandler=()=>{var t=this._video;if(null!=t){var e=this._onStart,a=t.duration||this._duration,r=Math.max(3*a*1e3,d);e&&e(r-1e3*a*this._playCounter-1e3*t.currentTime,r)}},this._onVideoPauseHandler=()=>{var t=this._onPause;t&&t()},this._onVideoEndedHandler=()=>{var t=this._video;if(null!=t){this._playCounter++;var e=this._onEnded;3===this._playCounter&&(this._videoEnded=!0,this._timerEnded&&e&&e()),t.currentTime=0,this._videoEnded&&this._timerEnded||setTimeout((()=>{this._videoController.play()}),0)}},this._onTimerEndedHandler=()=>{var t=this._onEnded;this._timerEnded=!0,t&&this._videoEnded&&t()},this.play=()=>{this._videoController.play(),this._countdownController.play()},this.stop=()=>{this._videoController.stop(),this._countdownController.stop()},this.resume=()=>{this._videoController.resume(),this._countdownController.resume()},this.pause=()=>{this._videoController.pause(),this._countdownController.pause()},this._playCounter=0,this._timerEnded=!1,this._videoEnded=!1,this._videoController=new n.default,this._countdownController=new l(d),this._videoController.addListeners(this._onVideoStartHandler,this._onVideoPauseHandler,this._onVideoEndedHandler),this._countdownController.addListeners(void 0,void 0,this._onTimerEndedHandler)}addListeners(t,e,a){this._onStart=t,this._onPause=e,this._onEnded=a}get duration(){return Math.max(3*(this._video&&this._video.duration||this._duration)*1e3,d)}}e.StatusV3GifController=u},44625:(t,e,a)=>{"use strict";var r=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(a(94184)),o=a(67294),s=r(a(65565)),n=r(a(34466)),l=r(a(45285)),d=a(85893);class u extends o.Component{constructor(){super(...arguments),this._setRefBar=t=>{this._refBar=t},this.handleClick=t=>{this.props.onClick&&this.props.onClick(t)},this.handleStart=(t,e)=>{if(this._refBar){var a=1e3*s.default.statusVideoMaxDuration,r=Math.min(t,a),i=Math.min(e,a);(0,l.default)(this._refBar,"stop"),this._barAnimation=(0,l.default)(this._refBar,{translateX:["0%",`-${r/i*100}%`]},{duration:r,easing:"linear"})}},this.handlePause=()=>{this._refBar&&(0,l.default)(this._refBar,"stop")},this.handleEnded=()=>this._barAnimation?this._barAnimation:Promise.resolve(),__LOG__(2)`Current index: ${this.props.current}, total count: ${this.props.total}`,this.props.current>=0&&this.props.current<this.props.total||(__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("bad current status v3 index"))}render(){for(var t=this,e=[],a=100/this.props.total+"%",r=function(r){var o=(0,i.default)(n.default.foreground,{[n.default.filled]:r<t.props.current,[n.default.empty]:r>t.props.current,[n.default.active]:r===t.props.current}),s=(0,d.jsxs)("div",{className:n.default.wrapper,style:{width:a},onClick:()=>t.handleClick(r),children:[(0,d.jsx)("div",{className:n.default.bg}),(0,d.jsx)("div",{className:n.default.mask,children:(0,d.jsx)("div",{className:o,ref:r===t.props.current?t._setRefBar:()=>{}})})]},r);e.push(s)},o=0;o<this.props.total;++o)r(o);return(0,d.jsx)("div",{className:n.default.container,children:e})}}e.default=u,u.displayName="StatusV3ProgressBar"},50539:(t,e,a)=>{"use strict";var r=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=function({seenCount:t,onClick:e}){if(null!=t)return(0,n.jsxs)("div",{className:o.default.container,onClick:e,children:[(0,n.jsx)(s.default,{name:"status-v3-seen",className:o.default.iconSeen}),(0,n.jsx)("div",{className:o.default.seenCount,children:t})]});return(0,n.jsx)(i.default,{stroke:3,size:12})};var i=r(a(46714)),o=r(a(38074)),s=r(a(2966)),n=a(85893)},98222:(t,e,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.StatusV3MsgNotFound=e.StatusV3LoadingError=e.InvalidStatusV3Iterator=void 0;var o=i(a(57043)),s=i(a(44908)),n=i(a(35161)),l=a(8139),d=a(99935),u=a(13253),c=i(a(83125)),h=r(a(77062));class p extends((0,u.customError)("InvalidStatusV3Iterator")){}e.InvalidStatusV3Iterator=p;class f extends((0,u.customError)("StatusV3LoadingError")){}e.StatusV3LoadingError=f;class m extends((0,u.customError)("StatusV3MsgNotFound")){}e.StatusV3MsgNotFound=m;e.default=class{constructor(t,e){if(this._printInfo=()=>{this.statuses.forEach((t=>{__LOG__(2)`Total count: ${t.totalCount}, unread count: ${t.unreadCount}, msgs length: ${t.msgs.length}`}))},this.getFirstUnread=(t,e,a)=>{var r=this.statuses.findIndex((e=>e.statusV3===t));if(-1!==r){var i,o=this.statuses[r],s=o.readMsgKeys;return a?(i=o.msgs?o.msgs.findIndex((t=>a&&t.id.toString()===a.toString())):-1)>=0?Promise.resolve({msgIdx:i,statusIdx:r}):Promise.reject(new p):-1===(i=o.msgs?o.msgs.findIndex((t=>!s.includes(t.id.toString()))):-1)&&t.msgs.msgLoadState.noEarlierMsgs?(i=e?0:o.msgs.length-1,Promise.resolve({msgIdx:i,statusIdx:r})):-1!==i?Promise.resolve({msgIdx:i,statusIdx:r}):0===o.unreadCount&&e&&o.msgs.length>0?Promise.resolve({msgIdx:0,statusIdx:r}):this._fetchMore(t).then((()=>this.getFirstUnread(t,e,a))).catch((t=>(__LOG__(3)`error while getting first unread status: ${String(t)}`,Promise.reject(new p))))}return Promise.reject(new p)},this.hasNext=t=>{var e=this.statuses[t.statusIdx];return t.msgIdx+1<e.totalCount||t.statusIdx+1<this.statuses.length},this.getNext=t=>{var e=this.statuses[t.statusIdx],a=e.statusV3;if(t.msgIdx+1<e.totalCount&&t.msgIdx+1<e.msgs.length)return Promise.resolve({msgIdx:t.msgIdx+1,statusIdx:t.statusIdx});if(t.msgIdx+1<e.totalCount)return a.msgs.msgLoadState.noEarlierMsgs?(__LOG__(3)`Loaded ${e.msgs.length} messages with total count ${e.totalCount}, but noEarlierMsgs set`,Promise.reject(new p)):this._fetchMore(a).then((()=>this.getNext(t))).catch((e=>{if(__LOG__(3)`error while loading more status msgs: ${String(e)}`,t.statusIdx+1<this.statuses.length){var a=this.statuses[t.statusIdx+1].statusV3;return this.getFirstUnread(a,!0)}return Promise.reject(new p)}));if(t.statusIdx+1<this.statuses.length){var r=this.statuses[t.statusIdx+1].statusV3;return this.getFirstUnread(r,!0)}return Promise.reject(new p)},this.hasPrev=t=>t.msgIdx>0||t.statusIdx>0,this.getPrev=t=>{if(t.msgIdx>0)return Promise.resolve({msgIdx:t.msgIdx-1,statusIdx:t.statusIdx});if(t.statusIdx>0){var e=this.statuses[t.statusIdx-1].statusV3;return this.getFirstUnread(e,!1)}return Promise.reject(new p)},this.statusAt=(t,e)=>{var a=this.statuses[t.statusIdx],r=a.statusV3;return e<a.msgs.length?Promise.resolve({msgIdx:e,statusIdx:t.statusIdx}):r.msgs.msgLoadState.noEarlierMsgs?Promise.reject(new p):this._fetchMore(r).then((()=>this.statusAt(t,e))).catch((t=>(__LOG__(3)`error while loading more status msgs: ${String(t)}`,Promise.reject(new p))))},this._fetchMore=t=>(0,d.promiseLoop)(((e,a,r)=>{var i=(0,l.delayMs)(h.expBackoff(r,12e4,1e3,.1));return t.loadMore().then((()=>{var a=this.statuses.findIndex((e=>e.statusV3===t));if(-1!==a){var l=this.statuses[a],d=l.totalCount,u=l.unreadCount,c=t.msgs.getModelsArray().slice(0,d),h=c.slice(0,d-u),p=(0,n.default)(h,(t=>t.id.toString()));l.msgs=c,l.readMsgKeys=(0,s.default)((0,o.default)(l.readMsgKeys,p)),e(!0)}else{if(!(r>=4))return i;e(!1)}})).catch((()=>{if(!(r>=4))return i;e(!1)}))})).then((t=>{if(!t)throw new f})),e){var a=t.msgs.getModelsArray().find((t=>e&&t.id.toString()===e.toString()));if(!a)throw new m;this.statuses=[{statusV3:t,totalCount:1,unreadCount:0,msgs:[a],readMsgKeys:[a.id.toString()]}]}else if(t.unreadCount>0&&!t.contact.isMe&&!t.contact.statusMute){var r=c.default.getUnexpired(!0),i=[];r.forEach((t=>{if(!t.contact.statusMute){var e=t.msgs.getModelsArray(),a=t.totalCount-t.unreadCount,r=e.slice(0,a),o=(0,n.default)(r,(t=>t.id.toString()));i.push({statusV3:t,totalCount:t.totalCount,unreadCount:t.unreadCount,msgs:e,readMsgKeys:o})}})),this.statuses=i}else{var u=t.msgs.getModelsArray(),_=t.totalCount-t.unreadCount,g=u.slice(0,_),v=(0,n.default)(g,(t=>t.id.toString())),C=[{statusV3:t,totalCount:t.totalCount,unreadCount:t.unreadCount,msgs:u,readMsgKeys:v}];this.statuses=C}this._printInfo()}}},9654:(t,e,a)=>{"use strict";var r=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(a(65565));function o(t){return Math.min(t,i.default.statusVideoMaxDuration)}var s=class{constructor(){this.addListeners=(t,e,a)=>{this._onStart=t,this._onPause=e,this._onEnded=a},this.setVideo=t=>{this._video!==t&&(this._unsetVideo(),this._video=t,null!=t&&(t.addEventListener("playing",this._onPlayingHandler),t.addEventListener("pause",this._onPauseHandler),t.addEventListener("ended",this._onEndedHandler),t.addEventListener("timeupdate",this._onTimeUpdate)))},this._unsetVideo=()=>{var t=this._video;t&&(this.stop(),t.removeEventListener("playing",this._onPlayingHandler),t.removeEventListener("pause",this._onPauseHandler),t.removeEventListener("ended",this._onEndedHandler),t.removeEventListener("timeupdate",this._onTimeUpdate))},this.play=()=>{this._video&&this._video.play()},this.pause=()=>{this._video&&!this._video.paused&&this._video.pause()},this.resume=()=>{this._video&&this._video.play()},this.stop=()=>{this._video&&!this._video.paused&&this._video.pause()},this._onPlayingHandler=()=>{var t=this._video;if(null!=t){var e=this._onStart;if(e){var a=o(t.duration);e(1e3*(a-t.currentTime),1e3*a)}}},this._onPauseHandler=()=>{var t=this._onPause;t&&t()},this._onEndedHandler=()=>{var t=this._onEnded;t&&t()},this._onTimeUpdate=()=>{var t,e=null===(t=this._video)||void 0===t?void 0:t.currentTime;if(null!=e&&e>=i.default.statusVideoMaxDuration){this.stop(),this._onEndedHandler();var a=this._video;a&&(a.removeEventListener("timeupdate",this._onTimeUpdate),a.removeEventListener("ended",this._onEndedHandler))}},this.removeListeners=()=>{this.stop(),this._onStart=void 0,this._onPause=void 0,this._onEnded=void 0}}get duration(){return null==this._video?0:1e3*o(this._video.duration)}};e.default=s},88543:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){window.getSelection().removeAllRanges();var e=document.getElementById(t),a=document.createRange();e&&a.selectNode(e),window.getSelection().addRange(a);try{var r=document.execCommand("copy");return window.getSelection().removeAllRanges(),r}catch(t){return!1}}},32397:(t,e,a)=>{"use strict";var r=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(a(81109)),o=a(60934),s=a(28757),n={};n[o.ExtendedTextMessageFontType.SERIF]={google:{families:["Roboto"]}},n[o.ExtendedTextMessageFontType.SANS_SERIF]={google:{families:["Droid Serif"]}},n[o.ExtendedTextMessageFontType.NORICAN_REGULAR]={google:{families:["Norican"]}},n[o.ExtendedTextMessageFontType.BRYNDAN_WRITE]={custom:{families:["Bryndan-Write"]}},n[o.ExtendedTextMessageFontType.OSWALD_HEAVY]={google:{families:["Oswald:bold"]}};var l={};l[o.ExtendedTextMessageFontType.BRYNDAN_WRITE]=`@font-face {font-family:"Bryndan-Write"; src:url("${s}") format("truetype");}`;var d=new class{constructor(){this.loadedFonts={},this.loadingPromise={}}load(t){if(this.loadedFonts[t])return Promise.resolve();if(this.loadingPromise[t])return this.loadingPromise[t];var e=n[t],a=l[t],r=(a?new Promise(((t,e)=>{var r=document.createElement("style");r.appendChild(document.createTextNode(a)),r.onload=t,r.onerror=e,document.head&&document.head.appendChild(r)})):Promise.resolve()).then((()=>new Promise(((a,r)=>{var o=(0,i.default)((0,i.default)({},e),{},{active:()=>{this.loadedFonts[t]=!0,a()},inactive:()=>{this.loadingPromise[t]=void 0,r("Failed to load font: "+t)}});WebFont.load(o)}))));return this.loadingPromise[t]=r,r}loadAllFonts(){return Promise.all(Array.from(o.ExtendedTextMessageFontType.members()).map((t=>this.load(t))))}};e.default=d},61136:(t,e,a)=>{"use strict";var r=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return o.default.supportsFeature(o.default.F.RICH_TEXT)?(0,i.default)(t,l,n.TextSerializer):t};var i=r(a(29730)),o=r(a(12950)),s=a(49895),n=a(6249),l=s.Configuration.ComposeBox()},40307:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createProductLink=function(t,e){return`https://wa.me/p/${e}/${t}`},e.createCatalogLink=function(t){return`https://wa.me/c/${t}`}},71547:(t,e,a)=>{"use strict";var r=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.dayToWeekday=l,e.businessHoursFromConfig=d,e.getWebsiteLink=function(t){return`https://l.wl.co/l?u=${encodeURIComponent(t)}`},e.getBusinessHours=function(t){var{config:e}=t,a=(new Date).getDay();return o.DAYS_OF_WEEK.map(((t,r)=>{var i=(a+r)%o.DAYS_OF_WEEK.length,s=o.DAYS_OF_WEEK[i];return{day:l(i),hours:d(e[s]),first:0===r}}))},e.getBusinessHoursForEdit=function(t){var e,a=null==t?{}:t.config,{note:r,timezone:s}=t||{},l=o.DAYS_OF_WEEK.map(((t,r)=>{var o,s=a[t],l=i.default.weekdays(r);return s&&(e=s.mode,s.hours&&(o=s.hours.map((([t,e])=>[(0,n.minutesToTime)(t),(0,n.minutesToTime)(e)])))),{dayName:l,dayKey:t,closed:!s,hours:o}})),d=i.default.weekdays(!0,0),u=i.default.weekdays().indexOf(d),c=l.splice(u);return{mode:e,days:[...c,...l],timezone:s,note:r}},Object.defineProperty(e,"minutesToTime",{enumerable:!0,get:function(){return n.minutesToTime}}),Object.defineProperty(e,"timeStringToMinutes",{enumerable:!0,get:function(){return n.timeStringToMinutes}});var i=r(a(30381)),o=a(4650),s=r(a(2408)),n=a(93778);function l(t){return i.default.weekdays(t)}function d(t){switch(t&&t.mode){case o.BUSINESS_HOUR_MODES.SPECIFIC_HOURS:return t&&t.hours?t.hours.map((t=>t.map(n.minutesToTime).join(" - "))).join("\n"):"";case o.BUSINESS_HOUR_MODES.APPOINTMENT_ONLY:return s.default.t(409);case o.BUSINESS_HOUR_MODES.OPEN_24H:return s.default.t(421);default:return s.default.t(410)}}},93778:(t,e,a)=>{"use strict";var r=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.minutesToTime=function(t){return i.default.utc().startOf("day").add(t,"minutes").format(o.default.timestampStrFormat())},e.timeStringToMinutes=void 0;var i=r(a(30381)),o=r(a(25142)),s=["h:mm A","h:mmA","HH:mm","HH.mm","H:mm","H.mm"];e.timeStringToMinutes=t=>{var e,a=t.trim();if(a){for(var r of s){var o=(0,i.default)(a,r,!0);if(o.isValid()){e=o;break}}if(e){var n=e,l=(0,i.default)().startOf("day"),d=n.diff(l);return i.default.duration(d).asMinutes()}}}},28757:(t,e,a)=>{t.exports=a.p+"bryndan_write_20e48b2ec8c64b2a1ceb5b28d9bcc9d0.ttf"},68862:(t,e,a)=>{"use strict";a.r(e),e.default={coverPhoto:"_3_2za",isEditable:"_1aFdX",avatar:"_3RULU",noStatusBorder:"_3xp59",hasStatusBorder:"IYr2u"}},91378:(t,e,a)=>{"use strict";a.r(e),e.default={cartIcon:"PKmps",inheritColor:"qM2C3"}},39893:(t,e,a)=>{"use strict";a.r(e),e.default={notifyName:"_3Pmbe"}},82876:(t,e,a)=>{"use strict";a.r(e),e.default={groupWrapper:"_32Bkz",fieldLabel:"_27aCx",fieldValue:"_1BLcR",fieldStructuralWrapper:"_305LK",fieldStructuralSubvalue:"uxlZa"}},61388:(t,e,a)=>{"use strict";a.r(e),e.default={container:"_36FbL",block:"_11V85",main:"_1ER5I",side:"_1YLup",multiline:"_1tPXz",restrictSpacing:"_2trLJ"}},63696:(t,e,a)=>{"use strict";a.r(e),e.default={carousel:"alksS",contentContainer:"OkAlG",slidesContainer:"_1w5W1",loaded:"j1J2j",fadeIn:"_2QkLV",spinnerContainer:"_1kDDe",spinner:"_3j4fM"}},89882:(t,e,a)=>{"use strict";a.r(e),e.default={slide:"_2MjCA",slideInnerContainer:"_2cG76",image:"ubkU5"}},59867:(t,e,a)=>{"use strict";a.r(e),e.default={canvasComponent:"_1JMw2",canvasEmpty:"_166Sa",canvasSecondRow:"_3Ggjl",canvasFirst:"_2CUR-",more:"_1ZQxr",container:"_3G6fW",justifySpaceBetween:"_1I8Ig",galleryEmpty:"_2Liso",drawer:"_3q1U7",drawerBody:"_1uuJx"}},34435:(t,e,a)=>{"use strict";a.r(e),e.default={icon:"_23QTJ",disabled:"iP9Fm",transparent:"_2HMfd",compact:"_25tj-"}},18310:(t,e,a)=>{"use strict";a.r(e),e.default={labelRow:"_1_9J2",standaloneLabelRow:"_2Lv1o",labelContainer:"_3A-ba",standaloneLabelContainer:"_34ojr"}},39935:(t,e,a)=>{"use strict";a.r(e),e.default={section:"_17dED",control:"_3T0RE"}},16115:(t,e,a)=>{"use strict";a.r(e),e.default={icon:"_2I7Gg"}},89600:(t,e,a)=>{"use strict";a.r(e),e.default={container:"_2QzJd",containerNoIcon:"_1EaD-",containerListAligned:"_1I4H7",icon:"_13qOF",danger:"_1O1hL",success:"x8B-w",bodyContainer:"_36Lzk",body:"Qy5WW",borderless:"xsV4n"}},83522:(t,e,a)=>{"use strict";a.r(e),e.default={description:"_14eHx"}},18482:(t,e,a)=>{"use strict";a.r(e),e.default={actionText:"_3nrbz"}},99597:(t,e,a)=>{"use strict";a.r(e),e.default={mediaPanelTools:"f3Dup",profileThumb:"_2xUs5",profileContainer:"Cq6XJ",media:"_1_TZb",profileViewer:"_3OWRM",profileViewerImg:"_2hH_e",container:"_9-YHG","media-viewer-animate":"_7DTuk",mediaViewerAnimate:"_7DTuk",headerContainer:"_1U_13"}},17932:(t,e,a)=>{"use strict";a.r(e),e.default={icon:"woEzZ"}},7200:(t,e,a)=>{"use strict";a.r(e),e.default={icon:"_1eLBZ"}},78654:(t,e,a)=>{"use strict";a.r(e),e.default={container:"xWfq_",popupPanel:"B7YnW",wrapper:"_35Bca",emojiIcon:"_1nsaN",sendIcon:"dJI7Y",lineWrapper:"_2X8K7"}},11780:(t,e,a)=>{"use strict";a.r(e),e.default={playerWrapper:"_1E241",mediaViewer:"_19K91",mediaStateControls:"_12QEi",playerBackground:"_20Ki1",media:"Kr9Tk",captionBackdrop:"_43j_5",mediaCaption:"_3yP6V",progressBackdrop:"_21bEk",progressBarBackdropNarrow:"_2paot",profile:"_1Oh7Z",nonClickProfile:"_3AuES",profileNarrow:"_2iahT",playerAvatar:"_19BWt",measuringProfile:"nF1-N",profileMac:"_1At-O",msgInfo:"_2LKvA",msgInfoName:"_3VYz8",timestamp:"_2tXxE",playerContent:"_2MwhR",statusPanelPlayerContent:"_2HrM5",statusThumbnailPlayerContent:"_1CbQs",loading:"_3e8Or",v3Image:"_1pf64",v3Video:"_3uHZH",text:"ecFHI",textLarge:"nRSvd",textMedium:"_1WIYL",textSmall:"_1PvQk",font_1:"_2b6no",font1:"_2b6no",font_2:"_3KLoY",font2:"_3KLoY",font_3:"_2LoU3",font3:"_2LoU3",font_5:"wQ88j",font5:"wQ88j",unknown:"_3-Nhy",seen:"_1PF3_",textThumbnailPlayerContent:"_3wxAA"}},18914:(t,e,a)=>{"use strict";a.r(e),e.default={container:"_1ufTj",inputContainer:"_1rO5S",btnContainer:"_3KRZ3",btnPosition:"D6yuB"}},71801:(t,e,a)=>{"use strict";a.r(e),e.default={chevron:"_23hMF",catalogEntryButton:"_3GuCY",shopsLogo:"taQA_"}},56107:(t,e,a)=>{"use strict";a.r(e),e.default={prompt:"_1MKrR"}},93277:(t,e,a)=>{"use strict";a.r(e),e.default={linkIcon:"_3n54f",inheritColor:"dF0c_"}},36074:(t,e,a)=>{"use strict";a.r(e),e.default={linkContainer:"_36niN",activeLink:"_218Ww"}},79184:(t,e,a)=>{"use strict";a.r(e),e.default={addItemButton:"_2e394",themeInList:"_2tMVN",themeCollections:"_1AeNq",themeDefault:"_28K_k"}},65491:(t,e,a)=>{"use strict";a.r(e),e.default={pendingBanner:"_3oeDZ",iconContainerPending:"_1lkig",iconContainerRejected:"NHVOL",rejectedBanner:"_14t2G",rejectedBannerWithAppeal:"xAt0d"}},43099:(t,e,a)=>{"use strict";a.r(e),e.default={header:"_361SI",list:"_300on"}},80092:(t,e,a)=>{"use strict";a.r(e),e.default={list:"_1x_gj",addItemsNotice:"_3uGr0"}},97076:(t,e,a)=>{"use strict";a.r(e),e.default={collectionListItem:"V0C2k",reviewStateRejected:"_22_86"}},44134:(t,e,a)=>{"use strict";a.r(e),e.default={body:"_3I775",loadingContainer:"AOdvD",text:"_2yxqg",loadingText:"_38kp2",shiftUp:"_1gMAq",availabilityBanner:"_32wIk"}},55675:(t,e,a)=>{"use strict";a.r(e),e.default={buttonContainer:"_1IcSo",button:"_2I8rD",addToCartButton:"_1jLhq",addToCartIcon:"PoXRl",addToCartIconDisabled:"_3l5-l",addToCartContainer:"_3shFG",name:"_1l7n8",price:"_27spI",originalPrice:"_1DYEx",description:"_2f0i8",more:"Jjucz",descBlock:"_2IFFX"}},13906:(t,e,a)=>{"use strict";a.r(e),e.default={productImage:"_3rmhv",productImageContainer:"_1E8LA",productThumb:"_3HQ90",productThumbContainer:"_6O-Qy",prompt:"_3K3du"}},8685:(t,e,a)=>{"use strict";a.r(e),e.default={header:"_9UV-x",list:"_8UHUF"}},77440:(t,e,a)=>{"use strict";a.r(e),e.default={header:"_1fhXS",photo:"_1XF90",text:"_3oXCf",name:"_3o6p1",description:"_2OTQS",spinner:"_2Fceq",img:"sz61d"}},53584:(t,e,a)=>{"use strict";a.r(e),e.default={imageCarouselContainer:"_33-Dh"}},63665:(t,e,a)=>{"use strict";a.r(e),e.default={buttons:"wH7Ij",button:"_2Na0-"}},22883:(t,e,a)=>{"use strict";a.r(e),e.default={section:"_3KLwP",reasonList:"CsJ_u",label:"KvCZU",input:"_3uXLe",buttons:"_1VUcX"}},42138:(t,e,a)=>{"use strict";a.r(e),e.default={statusV3PanelRing:"cFfKt",businessContactInfoRing:"_3EL6s",read:"_3tgk6",unread:"_1min4"}},34466:(t,e,a)=>{"use strict";a.r(e),e.default={container:"_3b17O",wrapper:"sZBni",mask:"_3CRhO",bg:"_3r7AV",foreground:"_3f8oh",filled:"_3t0iC",empty:"_1A2HZ",active:"_2gskD"}},38074:(t,e,a)=>{"use strict";a.r(e),e.default={iconSeen:"_1VGOo",seenCount:"_1QbZj",container:"PP_R1"}}}]);