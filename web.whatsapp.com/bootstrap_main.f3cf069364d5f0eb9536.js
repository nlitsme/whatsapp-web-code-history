/*! Copyright (c) 2022 WhatsApp Inc. All Rights Reserved. */
(self.webpackChunkwhatsapp_web_client=self.webpackChunkwhatsapp_web_client||[]).push([[7964],{92744:e=>{"use strict";e.exports=JSON.parse('{"v":"5.7.4","fr":29.9900054931641,"ip":0,"op":333.000060994453,"w":190,"h":120,"nm":"Comp 1","ddd":0,"assets":[],"layers":[{"ddd":0,"ind":1,"ty":4,"nm":"Graphic Outlines 3","sr":1,"ks":{"o":{"a":0,"k":100},"r":{"a":0,"k":0},"p":{"a":0,"k":[95,60,0]},"a":{"a":0,"k":[93,58,0]},"s":{"a":0,"k":[100,100,100]}},"ao":0,"hasMask":true,"masksProperties":[{"inv":false,"mode":"a","pt":{"a":0,"k":{"i":[[0,0],[0,0],[-19.412,-1.227],[-3.848,-0.447],[-24.798,4.416],[-6.722,4.072],[0,0],[0,0]],"o":[[0,0],[0,0],[10.548,0.667],[4.615,0.537],[15.816,-2.817],[3.841,-2.326],[0,0],[0,0]],"v":[[17.037,36.952],[13.568,101.171],[51.662,105.227],[76.735,112.498],[130.934,106.817],[177.896,98.49],[171.776,61.758],[166.995,46.289]],"c":true}},"o":{"a":0,"k":100},"x":{"a":0,"k":0},"nm":"Mask 1"}],"shapes":[{"ty":"gr","it":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ks":{"a":0,"k":{"i":[[-0.077,0.547],[-0.547,-0.076],[0,0],[0.078,-0.547],[0.546,0.077],[0,0]],"o":[[0.078,-0.547],[0,0],[0.547,0.076],[-0.077,0.547],[0,0],[-0.547,-0.077]],"v":[[-6.272,-0.881],[-5.141,-1.733],[5.422,-0.247],[6.271,0.882],[5.141,1.732],[-5.422,0.248]],"c":true}},"nm":"Path 1","hd":false},{"ty":"fl","c":{"a":0,"k":[0.258999992819,0.795999983245,0.647000002394,1]},"o":{"a":0,"k":100},"r":1,"bm":0,"nm":"Fill 1","hd":false},{"ty":"tr","p":{"a":0,"k":[36.164,61.282]},"a":{"a":0,"k":[0,0]},"s":{"a":0,"k":[100,100]},"r":{"a":0,"k":0},"o":{"a":0,"k":100},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0},"nm":"Transform"}],"nm":"Group 3","bm":0,"hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ks":{"a":0,"k":{"i":[[-0.078,0.547],[-0.547,-0.077],[0,0],[0.077,-0.547],[0.547,0.077],[0,0]],"o":[[0.078,-0.547],[0,0],[0.547,0.077],[-0.077,0.547],[0,0],[-0.547,-0.077]],"v":[[-8.913,-1.253],[-7.782,-2.104],[8.062,0.123],[8.913,1.252],[7.781,2.103],[-8.062,-0.124]],"c":true}},"nm":"Path 1","hd":false},{"ty":"fl","c":{"a":0,"k":[0.258999992819,0.795999983245,0.647000002394,1]},"o":{"a":0,"k":100},"r":1,"bm":0,"nm":"Fill 1","hd":false},{"ty":"tr","p":{"a":0,"k":[39.269,58.352]},"a":{"a":0,"k":[0,0]},"s":{"a":0,"k":[100,100]},"r":{"a":0,"k":0},"o":{"a":0,"k":100},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0},"nm":"Transform"}],"nm":"Group 4","bm":0,"hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ks":{"a":0,"k":{"i":[[-1.777,-0.25],[0,0],[-0.252,1.778],[0,0],[1.777,0.25],[0,0],[-0.271,-0.271],[0,0],[0.236,-1.664],[0,0]],"o":[[0,0],[1.777,0.25],[0,0],[0.252,-1.778],[0,0],[-0.38,-0.054],[0,0],[1.189,1.187],[0,0],[-0.251,1.776]],"v":[[-9.684,5.488],[11.088,8.407],[14.762,5.641],[15.7,-0.959],[12.938,-4.629],[-15.342,-8.603],[-15.68,-7.925],[-13.525,-5.774],[-12.012,-1.245],[-12.447,1.819]],"c":true}},"nm":"Path 1","hd":false},{"ty":"st","c":{"a":0,"k":[0,0.536999990426,0.481999984442,1]},"o":{"a":0,"k":100},"w":{"a":0,"k":1.5},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"Stroke 1","hd":false},{"ty":"tr","p":{"a":0,"k":[38.725,60.837]},"a":{"a":0,"k":[0,0]},"s":{"a":0,"k":[100,100]},"r":{"a":0,"k":0},"o":{"a":0,"k":100},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0},"nm":"Transform"}],"nm":"Group 5","bm":0,"hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ks":{"a":0,"k":{"i":[[-1.777,-0.25],[0,0],[-0.252,1.778],[0,0],[1.777,0.25],[0,0],[-0.271,-0.271],[0,0],[0.236,-1.664],[0,0]],"o":[[0,0],[1.777,0.25],[0,0],[0.252,-1.778],[0,0],[-0.38,-0.054],[0,0],[1.189,1.187],[0,0],[-0.251,1.776]],"v":[[-9.684,5.488],[11.088,8.407],[14.762,5.641],[15.7,-0.959],[12.938,-4.629],[-15.342,-8.603],[-15.68,-7.925],[-13.525,-5.774],[-12.012,-1.245],[-12.447,1.819]],"c":true}},"nm":"Path 1","hd":false},{"ty":"fl","c":{"a":0,"k":[1,1,1,1]},"o":{"a":0,"k":100},"r":1,"bm":0,"nm":"Fill 1","hd":false},{"ty":"tr","p":{"a":0,"k":[38.725,60.837]},"a":{"a":0,"k":[0,0]},"s":{"a":0,"k":[100,100]},"r":{"a":0,"k":0},"o":{"a":0,"k":100},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0},"nm":"Transform"}],"nm":"Group 6","bm":0,"hd":false},{"ty":"tr","p":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.167,"y":0.171},"t":158,"s":[-10.391,53.124],"to":[1.732,-8.854],"ti":[-1.732,8.854]},{"t":177.000032420475,"s":[0,0]}]},"a":{"a":0,"k":[0,0]},"s":{"a":0,"k":[100,100]},"r":{"a":0,"k":0},"o":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.167],"y":[0.167]},"t":268,"s":[100]},{"t":287.000052568792,"s":[0]}]},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0},"nm":"Transform"}],"nm":"Group 31","bm":0,"hd":false},{"ty":"gr","it":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ks":{"a":0,"k":{"i":[[0.075,0.547],[-0.547,0.077],[0,0],[-0.076,-0.548],[0.546,-0.076],[0,0]],"o":[[-0.077,-0.547],[0,0],[0.547,-0.077],[0.076,0.547],[0,0],[-0.547,0.076]],"v":[[-6.271,0.882],[-5.419,-0.248],[5.144,-1.732],[6.272,-0.881],[5.419,0.248],[-5.143,1.734]],"c":true}},"nm":"Path 1","hd":false},{"ty":"fl","c":{"a":0,"k":[0.258999992819,0.795999983245,0.647000002394,1]},"o":{"a":0,"k":100},"r":1,"bm":0,"nm":"Fill 1","hd":false},{"ty":"tr","p":{"a":0,"k":[141.883,62.682]},"a":{"a":0,"k":[0,0]},"s":{"a":0,"k":[100,100]},"r":{"a":0,"k":0},"o":{"a":0,"k":100},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0},"nm":"Transform"}],"nm":"Group 15","bm":0,"hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ks":{"a":0,"k":{"i":[[0.075,0.547],[-0.547,0.077],[0,0],[-0.076,-0.548],[0.547,-0.077],[0,0]],"o":[[-0.076,-0.548],[0,0],[0.547,-0.077],[0.077,0.547],[0,0],[-0.548,0.077]],"v":[[-8.911,1.253],[-8.059,0.123],[7.784,-2.104],[8.912,-1.252],[8.061,-0.123],[-7.783,2.104]],"c":true}},"nm":"Path 1","hd":false},{"ty":"fl","c":{"a":0,"k":[0.258999992819,0.795999983245,0.647000002394,1]},"o":{"a":0,"k":100},"r":1,"bm":0,"nm":"Fill 1","hd":false},{"ty":"tr","p":{"a":0,"k":[144.059,59.01]},"a":{"a":0,"k":[0,0]},"s":{"a":0,"k":[100,100]},"r":{"a":0,"k":0},"o":{"a":0,"k":100},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0},"nm":"Transform"}],"nm":"Group 16","bm":0,"hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ks":{"a":0,"k":{"i":[[1.776,-0.25],[0,0],[0.252,1.778],[0,0],[-1.777,0.249],[0,0],[0.272,-0.271],[0,0],[-0.235,-1.664],[0,0]],"o":[[0,0],[-1.779,0.249],[0,0],[-0.252,-1.777],[0,0],[0.38,-0.054],[0,0],[-1.19,1.187],[0,0],[0.252,1.777]],"v":[[9.685,5.488],[-11.087,8.408],[-14.763,5.641],[-15.7,-0.959],[-12.938,-4.628],[15.341,-8.603],[15.68,-7.925],[13.525,-5.773],[12.011,-1.245],[12.446,1.819]],"c":true}},"nm":"Path 1","hd":false},{"ty":"st","c":{"a":0,"k":[0,0.536999990426,0.481999984442,1]},"o":{"a":0,"k":100},"w":{"a":0,"k":1.5},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"Stroke 1","hd":false},{"ty":"tr","p":{"a":0,"k":[147.837,61.04]},"a":{"a":0,"k":[0,0]},"s":{"a":0,"k":[100,100]},"r":{"a":0,"k":0},"o":{"a":0,"k":100},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0},"nm":"Transform"}],"nm":"Group 17","bm":0,"hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ks":{"a":0,"k":{"i":[[1.776,-0.25],[0,0],[0.252,1.778],[0,0],[-1.777,0.249],[0,0],[0.272,-0.271],[0,0],[-0.235,-1.664],[0,0]],"o":[[0,0],[-1.779,0.249],[0,0],[-0.252,-1.777],[0,0],[0.38,-0.054],[0,0],[-1.19,1.187],[0,0],[0.252,1.777]],"v":[[9.685,5.488],[-11.087,8.408],[-14.763,5.641],[-15.7,-0.959],[-12.938,-4.628],[15.341,-8.603],[15.68,-7.925],[13.525,-5.773],[12.011,-1.245],[12.446,1.819]],"c":true}},"nm":"Path 1","hd":false},{"ty":"fl","c":{"a":0,"k":[0.882000014361,1,0.779999976065,1]},"o":{"a":0,"k":100},"r":1,"bm":0,"nm":"Fill 1","hd":false},{"ty":"tr","p":{"a":0,"k":[147.837,61.04]},"a":{"a":0,"k":[0,0]},"s":{"a":0,"k":[100,100]},"r":{"a":0,"k":0},"o":{"a":0,"k":100},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0},"nm":"Transform"}],"nm":"Group 18","bm":0,"hd":false},{"ty":"tr","p":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.167,"y":0.171},"t":166,"s":[10.082,50.817],"to":[-1.68,-8.47],"ti":[1.68,8.47]},{"t":186.000034068974,"s":[0,0]}]},"a":{"a":0,"k":[0,0]},"s":{"a":0,"k":[100,100]},"r":{"a":0,"k":0},"o":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.167],"y":[0.167]},"t":276,"s":[100]},{"t":295.000054034125,"s":[0]}]},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0},"nm":"Transform"}],"nm":"Group 32","bm":0,"hd":false}],"ip":150.000027474979,"op":331.00006062812,"st":150.000027474979,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"Graphic Outlines","sr":1,"ks":{"o":{"a":0,"k":100},"r":{"a":0,"k":0},"p":{"a":0,"k":[95,60,0]},"a":{"a":0,"k":[93,58,0]},"s":{"a":0,"k":[100,100,100]}},"ao":0,"hasMask":true,"masksProperties":[{"inv":false,"mode":"a","pt":{"a":0,"k":{"i":[[0,0],[0,0],[-19.412,-1.227],[-3.848,-0.447],[-24.798,4.416],[-6.722,4.072],[0,0],[0,0]],"o":[[0,0],[0,0],[10.548,0.667],[4.615,0.537],[15.816,-2.817],[3.841,-2.326],[0,0],[0,0]],"v":[[17.037,36.952],[13.568,101.171],[51.662,105.227],[76.735,112.498],[130.934,106.817],[177.896,98.49],[171.776,61.758],[166.995,46.289]],"c":true}},"o":{"a":0,"k":100},"x":{"a":0,"k":0},"nm":"Mask 1"}],"shapes":[{"ty":"gr","it":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ks":{"a":0,"k":{"i":[[-0.077,0.547],[-0.547,-0.076],[0,0],[0.078,-0.547],[0.546,0.077],[0,0]],"o":[[0.078,-0.547],[0,0],[0.547,0.076],[-0.077,0.547],[0,0],[-0.547,-0.077]],"v":[[-6.272,-0.881],[-5.141,-1.733],[5.422,-0.247],[6.271,0.882],[5.141,1.732],[-5.422,0.248]],"c":true}},"nm":"Path 1","hd":false},{"ty":"fl","c":{"a":0,"k":[0.258999992819,0.795999983245,0.647000002394,1]},"o":{"a":0,"k":100},"r":1,"bm":0,"nm":"Fill 1","hd":false},{"ty":"tr","p":{"a":0,"k":[36.164,61.282]},"a":{"a":0,"k":[0,0]},"s":{"a":0,"k":[100,100]},"r":{"a":0,"k":0},"o":{"a":0,"k":100},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0},"nm":"Transform"}],"nm":"Group 3","bm":0,"hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ks":{"a":0,"k":{"i":[[-0.078,0.547],[-0.547,-0.077],[0,0],[0.077,-0.547],[0.547,0.077],[0,0]],"o":[[0.078,-0.547],[0,0],[0.547,0.077],[-0.077,0.547],[0,0],[-0.547,-0.077]],"v":[[-8.913,-1.253],[-7.782,-2.104],[8.062,0.123],[8.913,1.252],[7.781,2.103],[-8.062,-0.124]],"c":true}},"nm":"Path 1","hd":false},{"ty":"fl","c":{"a":0,"k":[0.258999992819,0.795999983245,0.647000002394,1]},"o":{"a":0,"k":100},"r":1,"bm":0,"nm":"Fill 1","hd":false},{"ty":"tr","p":{"a":0,"k":[39.269,58.352]},"a":{"a":0,"k":[0,0]},"s":{"a":0,"k":[100,100]},"r":{"a":0,"k":0},"o":{"a":0,"k":100},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0},"nm":"Transform"}],"nm":"Group 4","bm":0,"hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ks":{"a":0,"k":{"i":[[-1.777,-0.25],[0,0],[-0.252,1.778],[0,0],[1.777,0.25],[0,0],[-0.271,-0.271],[0,0],[0.236,-1.664],[0,0]],"o":[[0,0],[1.777,0.25],[0,0],[0.252,-1.778],[0,0],[-0.38,-0.054],[0,0],[1.189,1.187],[0,0],[-0.251,1.776]],"v":[[-9.684,5.488],[11.088,8.407],[14.762,5.641],[15.7,-0.959],[12.938,-4.629],[-15.342,-8.603],[-15.68,-7.925],[-13.525,-5.774],[-12.012,-1.245],[-12.447,1.819]],"c":true}},"nm":"Path 1","hd":false},{"ty":"st","c":{"a":0,"k":[0,0.536999990426,0.481999984442,1]},"o":{"a":0,"k":100},"w":{"a":0,"k":1.5},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"Stroke 1","hd":false},{"ty":"tr","p":{"a":0,"k":[38.725,60.837]},"a":{"a":0,"k":[0,0]},"s":{"a":0,"k":[100,100]},"r":{"a":0,"k":0},"o":{"a":0,"k":100},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0},"nm":"Transform"}],"nm":"Group 5","bm":0,"hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ks":{"a":0,"k":{"i":[[-1.777,-0.25],[0,0],[-0.252,1.778],[0,0],[1.777,0.25],[0,0],[-0.271,-0.271],[0,0],[0.236,-1.664],[0,0]],"o":[[0,0],[1.777,0.25],[0,0],[0.252,-1.778],[0,0],[-0.38,-0.054],[0,0],[1.189,1.187],[0,0],[-0.251,1.776]],"v":[[-9.684,5.488],[11.088,8.407],[14.762,5.641],[15.7,-0.959],[12.938,-4.629],[-15.342,-8.603],[-15.68,-7.925],[-13.525,-5.774],[-12.012,-1.245],[-12.447,1.819]],"c":true}},"nm":"Path 1","hd":false},{"ty":"fl","c":{"a":0,"k":[1,1,1,1]},"o":{"a":0,"k":100},"r":1,"bm":0,"nm":"Fill 1","hd":false},{"ty":"tr","p":{"a":0,"k":[38.725,60.837]},"a":{"a":0,"k":[0,0]},"s":{"a":0,"k":[100,100]},"r":{"a":0,"k":0},"o":{"a":0,"k":100},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0},"nm":"Transform"}],"nm":"Group 6","bm":0,"hd":false},{"ty":"tr","p":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.167,"y":0.167},"t":8,"s":[-10.391,53.124],"to":[1.732,-8.854],"ti":[-1.732,8.854]},{"t":25.0000045791631,"s":[0,0]}]},"a":{"a":0,"k":[0,0]},"s":{"a":0,"k":[100,100]},"r":{"a":0,"k":0},"o":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.167],"y":[0.167]},"t":118,"s":[100]},{"t":137.000025093814,"s":[0]}]},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0},"nm":"Transform"}],"nm":"Group 31","bm":0,"hd":false},{"ty":"gr","it":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ks":{"a":0,"k":{"i":[[0.075,0.547],[-0.547,0.077],[0,0],[-0.076,-0.548],[0.546,-0.076],[0,0]],"o":[[-0.077,-0.547],[0,0],[0.547,-0.077],[0.076,0.547],[0,0],[-0.547,0.076]],"v":[[-6.271,0.882],[-5.419,-0.248],[5.144,-1.732],[6.272,-0.881],[5.419,0.248],[-5.143,1.734]],"c":true}},"nm":"Path 1","hd":false},{"ty":"fl","c":{"a":0,"k":[0.258999992819,0.795999983245,0.647000002394,1]},"o":{"a":0,"k":100},"r":1,"bm":0,"nm":"Fill 1","hd":false},{"ty":"tr","p":{"a":0,"k":[141.883,62.682]},"a":{"a":0,"k":[0,0]},"s":{"a":0,"k":[100,100]},"r":{"a":0,"k":0},"o":{"a":0,"k":100},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0},"nm":"Transform"}],"nm":"Group 15","bm":0,"hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ks":{"a":0,"k":{"i":[[0.075,0.547],[-0.547,0.077],[0,0],[-0.076,-0.548],[0.547,-0.077],[0,0]],"o":[[-0.076,-0.548],[0,0],[0.547,-0.077],[0.077,0.547],[0,0],[-0.548,0.077]],"v":[[-8.911,1.253],[-8.059,0.123],[7.784,-2.104],[8.912,-1.252],[8.061,-0.123],[-7.783,2.104]],"c":true}},"nm":"Path 1","hd":false},{"ty":"fl","c":{"a":0,"k":[0.258999992819,0.795999983245,0.647000002394,1]},"o":{"a":0,"k":100},"r":1,"bm":0,"nm":"Fill 1","hd":false},{"ty":"tr","p":{"a":0,"k":[144.059,59.01]},"a":{"a":0,"k":[0,0]},"s":{"a":0,"k":[100,100]},"r":{"a":0,"k":0},"o":{"a":0,"k":100},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0},"nm":"Transform"}],"nm":"Group 16","bm":0,"hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ks":{"a":0,"k":{"i":[[1.776,-0.25],[0,0],[0.252,1.778],[0,0],[-1.777,0.249],[0,0],[0.272,-0.271],[0,0],[-0.235,-1.664],[0,0]],"o":[[0,0],[-1.779,0.249],[0,0],[-0.252,-1.777],[0,0],[0.38,-0.054],[0,0],[-1.19,1.187],[0,0],[0.252,1.777]],"v":[[9.685,5.488],[-11.087,8.408],[-14.763,5.641],[-15.7,-0.959],[-12.938,-4.628],[15.341,-8.603],[15.68,-7.925],[13.525,-5.773],[12.011,-1.245],[12.446,1.819]],"c":true}},"nm":"Path 1","hd":false},{"ty":"st","c":{"a":0,"k":[0,0.536999990426,0.481999984442,1]},"o":{"a":0,"k":100},"w":{"a":0,"k":1.5},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"Stroke 1","hd":false},{"ty":"tr","p":{"a":0,"k":[147.837,61.04]},"a":{"a":0,"k":[0,0]},"s":{"a":0,"k":[100,100]},"r":{"a":0,"k":0},"o":{"a":0,"k":100},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0},"nm":"Transform"}],"nm":"Group 17","bm":0,"hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ks":{"a":0,"k":{"i":[[1.776,-0.25],[0,0],[0.252,1.778],[0,0],[-1.777,0.249],[0,0],[0.272,-0.271],[0,0],[-0.235,-1.664],[0,0]],"o":[[0,0],[-1.779,0.249],[0,0],[-0.252,-1.777],[0,0],[0.38,-0.054],[0,0],[-1.19,1.187],[0,0],[0.252,1.777]],"v":[[9.685,5.488],[-11.087,8.408],[-14.763,5.641],[-15.7,-0.959],[-12.938,-4.628],[15.341,-8.603],[15.68,-7.925],[13.525,-5.773],[12.011,-1.245],[12.446,1.819]],"c":true}},"nm":"Path 1","hd":false},{"ty":"fl","c":{"a":0,"k":[0.882000014361,1,0.779999976065,1]},"o":{"a":0,"k":100},"r":1,"bm":0,"nm":"Fill 1","hd":false},{"ty":"tr","p":{"a":0,"k":[147.837,61.04]},"a":{"a":0,"k":[0,0]},"s":{"a":0,"k":[100,100]},"r":{"a":0,"k":0},"o":{"a":0,"k":100},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0},"nm":"Transform"}],"nm":"Group 18","bm":0,"hd":false},{"ty":"tr","p":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.167,"y":0.167},"t":16,"s":[10.082,50.817],"to":[-1.68,-8.47],"ti":[1.68,8.47]},{"t":34.0000062276618,"s":[0,0]}]},"a":{"a":0,"k":[0,0]},"s":{"a":0,"k":[100,100]},"r":{"a":0,"k":0},"o":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.167],"y":[0.167]},"t":126,"s":[100]},{"t":145.000026559146,"s":[0]}]},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0},"nm":"Transform"}],"nm":"Group 32","bm":0,"hd":false}],"ip":0,"op":150.000027474979,"st":0,"bm":0},{"ddd":0,"ind":3,"ty":4,"nm":"Graphic Outlines 2","sr":1,"ks":{"o":{"a":0,"k":100},"r":{"a":0,"k":0},"p":{"a":0,"k":[95,60,0]},"a":{"a":0,"k":[93,58,0]},"s":{"a":0,"k":[100,100,100]}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ks":{"a":0,"k":{"i":[[0.717,0.104],[0.099,-0.71],[-0.716,-0.104],[-0.099,0.71]],"o":[[-0.72,-0.104],[-0.099,0.706],[0.72,0.104],[0.099,-0.706]],"v":[[0.185,-1.292],[-1.303,-0.183],[-0.185,1.292],[1.303,0.183]],"c":true}},"nm":"Path 1","hd":false},{"ty":"st","c":{"a":0,"k":[0.19199999641,0.39199999641,0.455000005984,1]},"o":{"a":0,"k":100},"w":{"a":0,"k":1.5},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"Stroke 1","hd":false},{"ty":"tr","p":{"a":0,"k":[29.352,19.516]},"a":{"a":0,"k":[0,0]},"s":{"a":0,"k":[100,100]},"r":{"a":0,"k":0},"o":{"a":0,"k":100},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0},"nm":"Transform"}],"nm":"Group 1","bm":0,"hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ks":{"a":0,"k":{"i":[[0.717,0.104],[0.099,-0.71],[-0.716,-0.104],[-0.099,0.71]],"o":[[-0.72,-0.104],[-0.099,0.706],[0.72,0.104],[0.099,-0.706]],"v":[[0.185,-1.292],[-1.303,-0.183],[-0.185,1.292],[1.303,0.183]],"c":true}},"nm":"Path 1","hd":false},{"ty":"fl","c":{"a":0,"k":[1,1,1,1]},"o":{"a":0,"k":100},"r":1,"bm":0,"nm":"Fill 1","hd":false},{"ty":"tr","p":{"a":0,"k":[29.352,19.516]},"a":{"a":0,"k":[0,0]},"s":{"a":0,"k":[100,100]},"r":{"a":0,"k":0},"o":{"a":0,"k":100},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0},"nm":"Transform"}],"nm":"Group 2","bm":0,"hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ks":{"a":0,"k":{"i":[[0.394,-2.817],[0,0],[2.817,0.395],[0,0],[-0.394,2.816],[0,0],[-2.816,-0.396],[0,0],[0,0],[0,0]],"o":[[0,0],[-0.394,2.815],[0,0],[-2.816,-0.394],[0,0],[0.395,-2.817],[0,0],[0,0],[0,0],[2.817,0.396]],"v":[[26.064,-36.057],[15.164,41.852],[9.351,46.236],[-21.678,41.874],[-26.064,36.057],[-15.165,-41.85],[-9.351,-46.234],[-4.565,-45.561],[16.891,-42.546],[21.677,-41.873]],"c":true}},"nm":"Path 1","hd":false},{"ty":"st","c":{"a":0,"k":[0.19199999641,0.39199999641,0.455000005984,1]},"o":{"a":0,"k":100},"w":{"a":0,"k":1.7},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"Stroke 1","hd":false},{"ty":"tr","p":{"a":0,"k":[38.874,59.969]},"a":{"a":0,"k":[0,0]},"s":{"a":0,"k":[100,100]},"r":{"a":0,"k":0},"o":{"a":0,"k":100},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0},"nm":"Transform"}],"nm":"Group 7","bm":0,"hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ks":{"a":0,"k":{"i":[[0.394,-2.817],[0,0],[2.817,0.395],[0,0],[-0.394,2.816],[0,0],[-2.816,-0.396],[0,0],[0,0],[0,0]],"o":[[0,0],[-0.394,2.815],[0,0],[-2.816,-0.394],[0,0],[0.395,-2.817],[0,0],[0,0],[0,0],[2.817,0.396]],"v":[[26.064,-36.057],[15.164,41.852],[9.351,46.236],[-21.678,41.874],[-26.064,36.057],[-15.165,-41.85],[-9.351,-46.234],[-4.565,-45.561],[16.891,-42.546],[21.677,-41.873]],"c":true}},"nm":"Path 1","hd":false},{"ty":"fl","c":{"a":0,"k":[0.933000033509,0.995999983245,0.980000035903,1]},"o":{"a":0,"k":100},"r":1,"bm":0,"nm":"Fill 1","hd":false},{"ty":"tr","p":{"a":0,"k":[38.874,59.969]},"a":{"a":0,"k":[0,0]},"s":{"a":0,"k":[100,100]},"r":{"a":0,"k":0},"o":{"a":0,"k":100},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0},"nm":"Transform"}],"nm":"Group 8","bm":0,"hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ks":{"a":0,"k":{"i":[[-3.91,-0.549],[0,0],[0.547,-3.91],[0,0],[3.91,0.549],[0,0],[-0.547,3.911],[0,0]],"o":[[0,0],[3.91,0.55],[0,0],[-0.547,3.911],[0,0],[-3.91,-0.55],[0,0],[0.547,-3.911]],"v":[[-9.926,-49.345],[23.083,-44.706],[29.173,-36.63],[17.997,43.259],[9.925,49.345],[-23.083,44.706],[-29.173,36.63],[-17.997,-43.259]],"c":true}},"nm":"Path 1","hd":false},{"ty":"st","c":{"a":0,"k":[0.19199999641,0.39199999641,0.455000005984,1]},"o":{"a":0,"k":100},"w":{"a":0,"k":1.7},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"Stroke 1","hd":false},{"ty":"tr","p":{"a":0,"k":[39.123,60.3]},"a":{"a":0,"k":[0,0]},"s":{"a":0,"k":[100,100]},"r":{"a":0,"k":0},"o":{"a":0,"k":100},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0},"nm":"Transform"}],"nm":"Group 9","bm":0,"hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ks":{"a":0,"k":{"i":[[-3.91,-0.549],[0,0],[0.547,-3.91],[0,0],[3.91,0.549],[0,0],[-0.547,3.911],[0,0]],"o":[[0,0],[3.91,0.55],[0,0],[-0.547,3.911],[0,0],[-3.91,-0.55],[0,0],[0.547,-3.911]],"v":[[-9.926,-49.345],[23.083,-44.706],[29.173,-36.63],[17.997,43.259],[9.925,49.345],[-23.083,44.706],[-29.173,36.63],[-17.997,-43.259]],"c":true}},"nm":"Path 1","hd":false},{"ty":"fl","c":{"a":0,"k":[1,1,1,1]},"o":{"a":0,"k":100},"r":1,"bm":0,"nm":"Fill 1","hd":false},{"ty":"tr","p":{"a":0,"k":[39.123,60.3]},"a":{"a":0,"k":[0,0]},"s":{"a":0,"k":[100,100]},"r":{"a":0,"k":0},"o":{"a":0,"k":100},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0},"nm":"Transform"}],"nm":"Group 10","bm":0,"hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ks":{"a":0,"k":{"i":[[-3.909,-0.549],[0,0],[0.547,-3.908],[0,0],[3.909,0.548],[0,0],[-0.547,3.909],[0,0]],"o":[[0,0],[3.909,0.549],[0,0],[-0.546,3.909],[0,0],[-3.909,-0.55],[0,0],[0.546,-3.909]],"v":[[-9.926,-49.342],[23.083,-44.702],[29.17,-36.63],[17.993,43.259],[9.926,49.342],[-23.083,44.703],[-29.17,36.63],[-17.993,-43.258]],"c":true}},"nm":"Path 1","hd":false},{"ty":"st","c":{"a":0,"k":[0.19199999641,0.39199999641,0.455000005984,1]},"o":{"a":0,"k":100},"w":{"a":0,"k":1.706},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"Stroke 1","hd":false},{"ty":"tr","p":{"a":0,"k":[38.79,63.987]},"a":{"a":0,"k":[0,0]},"s":{"a":0,"k":[100,100]},"r":{"a":0,"k":0},"o":{"a":0,"k":100},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0},"nm":"Transform"}],"nm":"Group 11","bm":0,"hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ks":{"a":0,"k":{"i":[[-3.909,-0.549],[0,0],[0.547,-3.908],[0,0],[3.909,0.548],[0,0],[-0.547,3.909],[0,0]],"o":[[0,0],[3.909,0.549],[0,0],[-0.546,3.909],[0,0],[-3.909,-0.55],[0,0],[0.546,-3.909]],"v":[[-9.926,-49.342],[23.083,-44.702],[29.17,-36.63],[17.993,43.259],[9.926,49.342],[-23.083,44.703],[-29.17,36.63],[-17.993,-43.258]],"c":true}},"nm":"Path 1","hd":false},{"ty":"fl","c":{"a":0,"k":[0.258999992819,0.795999983245,0.647000002394,1]},"o":{"a":0,"k":100},"r":1,"bm":0,"nm":"Fill 1","hd":false},{"ty":"tr","p":{"a":0,"k":[38.79,63.987]},"a":{"a":0,"k":[0,0]},"s":{"a":0,"k":[100,100]},"r":{"a":0,"k":0},"o":{"a":0,"k":100},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0},"nm":"Transform"}],"nm":"Group 12","bm":0,"hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ks":{"a":0,"k":{"i":[[0.717,-0.098],[-0.101,-0.71],[-0.716,0.099],[0.102,0.71]],"o":[[-0.722,0.099],[0.1,0.706],[0.722,-0.098],[-0.099,-0.706]],"v":[[-0.178,-1.293],[-1.303,0.184],[0.177,1.292],[1.302,-0.184]],"c":true}},"nm":"Path 1","hd":false},{"ty":"st","c":{"a":0,"k":[0.19199999641,0.39199999641,0.455000005984,1]},"o":{"a":0,"k":100},"w":{"a":0,"k":1.5},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"Stroke 1","hd":false},{"ty":"tr","p":{"a":0,"k":[128.168,23.801]},"a":{"a":0,"k":[0,0]},"s":{"a":0,"k":[100,100]},"r":{"a":0,"k":0},"o":{"a":0,"k":100},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0},"nm":"Transform"}],"nm":"Group 13","bm":0,"hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ks":{"a":0,"k":{"i":[[0.717,-0.098],[-0.101,-0.71],[-0.716,0.099],[0.102,0.71]],"o":[[-0.722,0.099],[0.1,0.706],[0.722,-0.098],[-0.099,-0.706]],"v":[[-0.178,-1.293],[-1.303,0.184],[0.177,1.292],[1.302,-0.184]],"c":true}},"nm":"Path 1","hd":false},{"ty":"fl","c":{"a":0,"k":[1,1,1,1]},"o":{"a":0,"k":100},"r":1,"bm":0,"nm":"Fill 1","hd":false},{"ty":"tr","p":{"a":0,"k":[128.168,23.801]},"a":{"a":0,"k":[0,0]},"s":{"a":0,"k":[100,100]},"r":{"a":0,"k":0},"o":{"a":0,"k":100},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0},"nm":"Transform"}],"nm":"Group 14","bm":0,"hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ks":{"a":0,"k":{"i":[[-0.397,-2.81],[0,0],[2.81,-0.394],[0,0],[0.395,2.808],[0,0],[-2.811,0.395],[0,0],[0,0],[0,0]],"o":[[0,0],[0.397,2.81],[0,0],[-2.81,0.394],[0,0],[-0.398,-2.81],[0,0],[0,0],[0,0],[2.811,-0.395]],"v":[[15.104,-41.842],[26.101,36.052],[21.731,41.854],[-9.297,46.216],[-15.103,41.844],[-26.1,-36.051],[-21.731,-41.854],[-16.944,-42.527],[4.511,-45.542],[9.297,-46.215]],"c":true}},"nm":"Path 1","hd":false},{"ty":"st","c":{"a":0,"k":[0.19199999641,0.39199999641,0.455000005984,1]},"o":{"a":0,"k":100},"w":{"a":0,"k":1.724},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"Stroke 1","hd":false},{"ty":"tr","p":{"a":0,"k":[148.471,60.063]},"a":{"a":0,"k":[0,0]},"s":{"a":0,"k":[100,100]},"r":{"a":0,"k":0},"o":{"a":0,"k":100},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0},"nm":"Transform"}],"nm":"Group 19","bm":0,"hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ks":{"a":0,"k":{"i":[[-0.397,-2.81],[0,0],[2.81,-0.394],[0,0],[0.395,2.808],[0,0],[-2.811,0.395],[0,0],[0,0],[0,0]],"o":[[0,0],[0.397,2.81],[0,0],[-2.81,0.394],[0,0],[-0.398,-2.81],[0,0],[0,0],[0,0],[2.811,-0.395]],"v":[[15.104,-41.842],[26.101,36.052],[21.731,41.854],[-9.297,46.216],[-15.103,41.844],[-26.1,-36.051],[-21.731,-41.854],[-16.944,-42.527],[4.511,-45.542],[9.297,-46.215]],"c":true}},"nm":"Path 1","hd":false},{"ty":"fl","c":{"a":0,"k":[0.933000033509,0.995999983245,0.980000035903,1]},"o":{"a":0,"k":100},"r":1,"bm":0,"nm":"Fill 1","hd":false},{"ty":"tr","p":{"a":0,"k":[148.471,60.063]},"a":{"a":0,"k":[0,0]},"s":{"a":0,"k":[100,100]},"r":{"a":0,"k":0},"o":{"a":0,"k":100},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0},"nm":"Transform"}],"nm":"Group 20","bm":0,"hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ks":{"a":0,"k":{"i":[[-3.904,0.549],[0,0],[-0.551,-3.904],[0,0],[3.904,-0.549],[0,0],[0.552,3.903],[0,0]],"o":[[0,0],[3.903,-0.548],[0,0],[0.55,3.903],[0,0],[-3.903,0.549],[0,0],[-0.551,-3.904]],"v":[[-23.14,-44.686],[9.869,-49.325],[17.935,-43.25],[29.212,36.624],[23.141,44.686],[-9.869,49.324],[-17.935,43.25],[-29.211,-36.624]],"c":true}},"nm":"Path 1","hd":false},{"ty":"st","c":{"a":0,"k":[0.19199999641,0.39199999641,0.455000005984,1]},"o":{"a":0,"k":100},"w":{"a":0,"k":1.724},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"Stroke 1","hd":false},{"ty":"tr","p":{"a":0,"k":[148.849,60.347]},"a":{"a":0,"k":[0,0]},"s":{"a":0,"k":[100,100]},"r":{"a":0,"k":0},"o":{"a":0,"k":100},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0},"nm":"Transform"}],"nm":"Group 21","bm":0,"hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ks":{"a":0,"k":{"i":[[-3.904,0.549],[0,0],[-0.551,-3.904],[0,0],[3.904,-0.549],[0,0],[0.552,3.903],[0,0]],"o":[[0,0],[3.903,-0.548],[0,0],[0.55,3.903],[0,0],[-3.903,0.549],[0,0],[-0.551,-3.904]],"v":[[-23.14,-44.686],[9.869,-49.325],[17.935,-43.25],[29.212,36.624],[23.141,44.686],[-9.869,49.324],[-17.935,43.25],[-29.211,-36.624]],"c":true}},"nm":"Path 1","hd":false},{"ty":"fl","c":{"a":0,"k":[1,1,1,1]},"o":{"a":0,"k":100},"r":1,"bm":0,"nm":"Fill 1","hd":false},{"ty":"tr","p":{"a":0,"k":[148.849,60.347]},"a":{"a":0,"k":[0,0]},"s":{"a":0,"k":[100,100]},"r":{"a":0,"k":0},"o":{"a":0,"k":100},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0},"nm":"Transform"}],"nm":"Group 22","bm":0,"hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ks":{"a":0,"k":{"i":[[-3.911,0.549],[0,0],[-0.553,-3.91],[0,0],[3.91,-0.55],[0,0],[0.552,3.91],[0,0]],"o":[[0,0],[3.91,-0.55],[0,0],[0.552,3.91],[0,0],[-3.91,0.549],[0,0],[-0.552,-3.91]],"v":[[-23.142,-44.697],[9.867,-49.336],[17.947,-43.252],[29.223,36.623],[23.142,44.698],[-9.867,49.337],[-17.947,43.253],[-29.223,-36.622]],"c":true}},"nm":"Path 1","hd":false},{"ty":"st","c":{"a":0,"k":[0.19199999641,0.39199999641,0.455000005984,1]},"o":{"a":0,"k":100},"w":{"a":0,"k":1.7},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"Stroke 1","hd":false},{"ty":"tr","p":{"a":0,"k":[149.223,63.987]},"a":{"a":0,"k":[0,0]},"s":{"a":0,"k":[100,100]},"r":{"a":0,"k":0},"o":{"a":0,"k":100},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0},"nm":"Transform"}],"nm":"Group 23","bm":0,"hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ks":{"a":0,"k":{"i":[[-3.911,0.549],[0,0],[-0.553,-3.91],[0,0],[3.91,-0.55],[0,0],[0.552,3.91],[0,0]],"o":[[0,0],[3.91,-0.55],[0,0],[0.552,3.91],[0,0],[-3.91,0.549],[0,0],[-0.552,-3.91]],"v":[[-23.142,-44.697],[9.867,-49.336],[17.947,-43.252],[29.223,36.623],[23.142,44.698],[-9.867,49.337],[-17.947,43.253],[-29.223,-36.622]],"c":true}},"nm":"Path 1","hd":false},{"ty":"fl","c":{"a":0,"k":[0.258999992819,0.795999983245,0.647000002394,1]},"o":{"a":0,"k":100},"r":1,"bm":0,"nm":"Fill 1","hd":false},{"ty":"tr","p":{"a":0,"k":[149.223,63.987]},"a":{"a":0,"k":[0,0]},"s":{"a":0,"k":[100,100]},"r":{"a":0,"k":0},"o":{"a":0,"k":100},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0},"nm":"Transform"}],"nm":"Group 24","bm":0,"hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ks":{"a":0,"k":{"i":[[0,0],[-0.304,-0.304],[0.259,-0.344],[0,0],[0.839,0.84],[-0.951,0.712]],"o":[[0.344,-0.258],[0.305,0.305],[0,0],[-0.712,0.95],[-0.84,-0.84],[0,0]],"v":[[2.833,-4.044],[3.963,-3.964],[4.043,-2.833],[-0.103,2.788],[-3.462,3.462],[-3.253,0.521]],"c":true}},"nm":"Path 1","hd":false},{"ty":"fl","c":{"a":0,"k":[0,0.536999990426,0.481999984442,1]},"o":{"a":0,"k":100},"r":1,"bm":0,"nm":"Fill 1","hd":false},{"ty":"tr","p":{"a":0,"k":[93.5,56.7]},"a":{"a":0,"k":[-2.5,2.4]},"s":{"a":0,"k":[100,100]},"r":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.167],"y":[0]},"t":33,"s":[710]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.167],"y":[0.167]},"t":60,"s":[710]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.167],"y":[0]},"t":63,"s":[720]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.167],"y":[0.167]},"t":91,"s":[720]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.167],"y":[0]},"t":94,"s":[730]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.167],"y":[0.167]},"t":120,"s":[730]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.167],"y":[0]},"t":123,"s":[740]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.167],"y":[0.167]},"t":150,"s":[740]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.167],"y":[0]},"t":153,"s":[750]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.167],"y":[0.167]},"t":180,"s":[750]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.167],"y":[0]},"t":183,"s":[760]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.167],"y":[0.167]},"t":210,"s":[760]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.167],"y":[0]},"t":213,"s":[770]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.167],"y":[0.167]},"t":240,"s":[770]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.167],"y":[0]},"t":243,"s":[780]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.167],"y":[0.167]},"t":270,"s":[780]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.167],"y":[0]},"t":273,"s":[790]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.167],"y":[0.167]},"t":295,"s":[790]},{"t":312.000057147956,"s":[1070]}]},"o":{"a":0,"k":100},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0},"nm":"Transform"}],"nm":"Group 25","bm":0,"hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ks":{"a":0,"k":{"i":[[0,0],[0,0],[0,-7.456],[-7.456,0],[0,0],[0,5.799],[-5.799,0]],"o":[[0,0],[-7.456,0],[0,7.456],[0,0],[-5.799,0],[0,-5.799],[0,0]],"v":[[6.75,-13.5],[6.75,-13.5],[-6.75,0],[6.75,13.5],[6.75,10.5],[-3.75,0],[6.75,-10.5]],"c":true}},"nm":"Path 1","hd":false},{"ty":"fl","c":{"a":0,"k":[0,0.536999990426,0.481999984442,1]},"o":{"a":0,"k":100},"r":1,"bm":0,"nm":"Fill 1","hd":false},{"ty":"tr","p":{"a":0,"k":[86.251,56]},"a":{"a":0,"k":[0,0]},"s":{"a":0,"k":[100,100]},"r":{"a":0,"k":0},"o":{"a":0,"k":100},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0},"nm":"Transform"}],"nm":"Group 26","bm":0,"hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ks":{"a":0,"k":{"i":[[-0.33,0.211],[0.445,0.699],[0.698,-0.446],[0.271,-0.142],[-0.383,-0.734],[-0.735,0.383]],"o":[[0.699,-0.446],[-0.446,-0.699],[-0.258,0.164],[-0.735,0.383],[0.384,0.734],[0.349,-0.183]],"v":[[0.505,11.387],[0.963,9.315],[-1.108,8.858],[-1.901,9.317],[-2.538,11.34],[-0.514,11.977]],"c":true}},"nm":"Path 1","hd":false},{"ind":1,"ty":"sh","ks":{"a":0,"k":{"i":[[-0.182,0.348],[0.735,0.384],[0.383,-0.734],[0.164,-0.258],[-0.699,-0.446],[-0.444,0.698]],"o":[[0.383,-0.736],[-0.733,-0.383],[-0.142,0.271],[-0.447,0.698],[0.697,0.445],[0.211,-0.331]],"v":[[5.226,6.237],[4.59,4.212],[2.567,4.849],[2.109,5.642],[2.566,7.713],[4.636,7.256]],"c":true}},"nm":"Path 2","hd":false},{"ind":2,"ty":"sh","ks":{"a":0,"k":{"i":[[0.009,0.195],[0.828,-0.036],[-0.035,-0.828],[0,-0.154],[0.007,-0.153],[-0.827,-0.036],[-0.035,0.827],[0,0.197]],"o":[[-0.035,-0.828],[-0.827,0.035],[0.007,0.152],[0,0.155],[-0.035,0.827],[0.828,0.035],[0.009,-0.196],[0,-0.196]],"v":[[6.737,-0.588],[5.174,-2.022],[3.74,-0.459],[3.75,0],[3.74,0.46],[5.174,2.023],[6.737,0.589],[6.75,0]],"c":true}},"nm":"Path 3","hd":false},{"ind":3,"ty":"sh","ks":{"a":0,"k":{"i":[[0.211,0.33],[0.697,-0.445],[-0.447,-0.698],[-0.142,-0.271],[-0.733,0.383],[0.383,0.735]],"o":[[-0.444,-0.698],[-0.699,0.446],[0.164,0.257],[0.383,0.735],[0.735,-0.383],[-0.182,-0.349]],"v":[[4.636,-7.255],[2.566,-7.713],[2.109,-5.641],[2.567,-4.848],[4.59,-4.212],[5.226,-6.236]],"c":true}},"nm":"Path 4","hd":false},{"ind":4,"ty":"sh","ks":{"a":0,"k":{"i":[[0.349,0.182],[0.384,-0.734],[-0.735,-0.383],[-0.258,-0.163],[-0.446,0.699],[0.699,0.446]],"o":[[-0.735,-0.383],[-0.383,0.735],[0.271,0.141],[0.698,0.446],[0.445,-0.698],[-0.33,-0.211]],"v":[[-0.514,-11.976],[-2.538,-11.34],[-1.901,-9.316],[-1.108,-8.858],[0.963,-9.315],[0.505,-11.386]],"c":true}},"nm":"Path 5","hd":false},{"ind":5,"ty":"sh","ks":{"a":0,"k":{"i":[[0,0],[-0.153,-0.006],[-0.036,0.828],[0.828,0.036],[0.197,0]],"o":[[0.154,0],[0.827,0.036],[0.035,-0.828],[-0.195,-0.008],[0,0]],"v":[[-6.75,-10.5],[-6.29,-10.49],[-4.727,-11.924],[-6.162,-13.487],[-6.75,-13.5]],"c":true}},"nm":"Path 6","hd":false},{"ind":6,"ty":"sh","ks":{"a":0,"k":{"i":[[0,0],[-0.195,0.008],[0.035,0.827],[0.827,-0.036],[0.154,0]],"o":[[0.197,0],[0.828,-0.036],[-0.036,-0.828],[-0.153,0.006],[0,0]],"v":[[-6.75,13.5],[-6.162,13.488],[-4.727,11.925],[-6.29,10.491],[-6.75,10.5]],"c":true}},"nm":"Path 7","hd":false},{"ty":"mm","mm":1,"nm":"Merge Paths 1","hd":false},{"ty":"fl","c":{"a":0,"k":[0,0.536999990426,0.481999984442,1]},"o":{"a":0,"k":100},"r":1,"bm":0,"nm":"Fill 1","hd":false},{"ty":"tr","p":{"a":0,"k":[99.75,56]},"a":{"a":0,"k":[0,0]},"s":{"a":0,"k":[100,100]},"r":{"a":0,"k":0},"o":{"a":0,"k":100},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0},"nm":"Transform"}],"nm":"Group 27","bm":0,"hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ks":{"a":0,"k":{"i":[[0,0],[0,0],[0,2.872],[-2.882,0],[-0.452,-0.127],[-3.481,0],[0,-4.308],[0,0],[-0.761,0],[0,-2.299],[2.306,0]],"o":[[0,0],[-2.882,0],[0,-2.873],[0.493,0],[1.017,-3.132],[4.323,0],[0,0],[0.614,-0.354],[2.306,0],[0,2.298],[0,0]],"v":[[-8.833,7.801],[-8.872,7.801],[-14.091,2.601],[-8.872,-2.6],[-7.449,-2.405],[0,-7.802],[7.828,0],[7.828,0.036],[9.916,-0.52],[14.091,3.641],[9.916,7.801]],"c":true}},"nm":"Path 1","hd":false},{"ty":"fl","c":{"a":0,"k":[1,1,1,1]},"o":{"a":0,"k":100},"r":1,"bm":0,"nm":"Fill 1","hd":false},{"ty":"tr","p":{"a":0,"k":[74.091,87.801]},"a":{"a":0,"k":[0,0]},"s":{"a":0,"k":[100,100]},"r":{"a":0,"k":0},"o":{"a":0,"k":100},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0},"nm":"Transform"}],"nm":"Group 28","bm":0,"hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ks":{"a":0,"k":{"i":[[0,0],[0,2.872],[-2.882,0],[-0.452,-0.127],[-3.481,0],[0,-4.309],[0,0],[-0.761,0],[0,-2.297],[2.305,0]],"o":[[-2.882,0],[0,-2.872],[0.493,0],[1.017,-3.132],[4.323,0],[0,0],[0.614,-0.354],[2.305,0],[0,2.298],[0,0]],"v":[[-8.872,7.801],[-14.091,2.6],[-8.872,-2.601],[-7.449,-2.405],[0,-7.802],[7.828,0],[7.828,0.036],[9.916,-0.52],[14.091,3.64],[9.916,7.801]],"c":true}},"nm":"Path 1","hd":false},{"ty":"fl","c":{"a":0,"k":[1,1,1,1]},"o":{"a":0,"k":100},"r":1,"bm":0,"nm":"Fill 1","hd":false},{"ty":"tr","p":{"a":0,"k":[167.091,39.801]},"a":{"a":0,"k":[0,0]},"s":{"a":0,"k":[100,100]},"r":{"a":0,"k":0},"o":{"a":0,"k":100},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0},"nm":"Transform"}],"nm":"Group 29","bm":0,"hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ks":{"a":0,"k":{"i":[[-21.078,6.951],[2.365,29.357],[27.324,-13.139],[26.548,0],[2.517,-25.241],[-27.153,-8.154]],"o":[[21.814,-7.195],[-3.596,-44.604],[-37.066,17.824],[-19.773,0],[-1.824,18.295],[49.419,14.839]],"v":[[56.81,46.564],[92.775,-10.294],[17.995,-52.824],[-50.314,-32.078],[-92.737,2.499],[-60.07,44.918]],"c":true}},"nm":"Path 1","hd":false},{"ty":"fl","c":{"a":0,"k":[0.8,0.936999990426,0.922000002394,1]},"o":{"a":0,"k":100},"r":1,"bm":0,"nm":"Fill 1","hd":false},{"ty":"tr","p":{"a":0,"k":[93,58]},"a":{"a":0,"k":[0,0]},"s":{"a":0,"k":[100,100]},"r":{"a":0,"k":0},"o":{"a":0,"k":100},"sk":{"a":0,"k":0},"sa":{"a":0,"k":0},"nm":"Transform"}],"nm":"Group 30","bm":0,"hd":false}],"ip":0,"op":340.000062276618,"st":0,"bm":0}],"markers":[]}')},33693:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const a=e.findIndex(t);if(-1===a)return;if(a>=e.length-1)return;return e[a+1]}},63116:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){let a,s=!1;for(a=0;a<e.length;a++)if(e[a]===t){s=!0;break}if(s){const t=e[a];e.splice(a,1),e.unshift(t)}}},13752:(e,t)=>{"use strict";function a(e,t){return e===t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a;if(e===t)return!0;if(e.length!==t.length)return!1;return e.every(((e,a)=>s(e,t[a])))}},51498:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.AddToCartStatus=void 0,t.addProductToCart=function(e){const{id:t,name:a,imageHash:s,currency:c}=e,h=e.catalogWid.toString(),f=n.CartCollection.findCart(h),p=f.cartItemCollection.get(t),m=(null==p?void 0:p.quantity)||0,_=Math.min(m+1,i.MAX_QUANTITY),g={id:t,priceAmount1000:(0,r.getActivePrice)(e),currency:c,name:a,imageHash:s,quantity:_};f.cartItemCollection.add(g,{merge:!0}),f.trigger("change:cartItemCollection");const v=m+1>i.MAX_QUANTITY?u.QUANTITY_LIMIT_REACHED:u.SUCCESS;return(0,d.default)(f,l.QuickLogMarkerId.WHATSAPP_CART_ADD).then((()=>{v===u.SUCCESS?o.QPL.markerEnd(l.QuickLogMarkerId.WHATSAPP_CART_ADD,o.QuickLogActionType.SUCCESS):v===u.QUANTITY_LIMIT_REACHED&&o.QPL.markerDrop(l.QuickLogMarkerId.WHATSAPP_CART_ADD)})).catch((()=>{o.QPL.markerEnd(l.QuickLogMarkerId.WHATSAPP_CART_ADD,o.QuickLogActionType.FAIL)})),{newCount:_,status:v}};var n=a(12392),i=a(9581),r=a(13151),o=a(48870),l=a(27798),d=s(a(38260));const u=a(54302).Mirrored(["SUCCESS","QUANTITY_LIMIT_REACHED"]);t.AddToCartStatus=u},56829:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,o){const{CartFlowLoadable:l}=a(95568);if(t&&t.id.toString()===e)return(0,r.jsx)(l,{sellerJid:e,chat:t});s.Cmd.openModal((0,r.jsx)(n.OpenChatFlow,{chatId:(0,i.createWid)(e),onSuccess:t=>{window.setTimeout((()=>{s.Cmd.openDrawerRight((0,r.jsx)(l,{sellerJid:e,chat:t}),"slide-left",void 0,o||void 0)}),100)},msgText:null}),{transition:"modal-flow"})};var s=a(88102),n=a(61585),i=a(58021),r=a(85893)},38260:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,s.updateCart)(e,t)};var s=a(6878)},9538:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createOrder=function(e,t){return(0,s.createOrder)(e,t)},t.queryOrder=function(e,t,a,n,i){return(0,s.queryOrder)(e,t,a,n,i)};var s=a(68825)},96866:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.openOrderDetailDrawer=function(e,t){s.Cmd.openDrawerRight((0,r.jsx)(i.ProductDetailsFlowLoadable,{chat:e.chat,sellerJid:e.sender.toJid(),orderInfo:(0,n.getOrderInfo)(e),processedOrderMessage:e}),"slide-left",t)};var s=a(88102),n=a(34841),i=a(67455),r=a(85893)},50218:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.openShopStorefront=function(e){n.default.open(`https://facebook.com/${e}/shop/`)};var n=s(a(87045))},20052:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendDelete=function(e){return _((0,f.unproxy)(e))};var n=s(a(48360)),i=a(46331),r=a(63183),o=a(88102),l=a(77772),d=a(7293),u=a(57701),c=s(a(43725)),h=a(16770),f=a(31019),p=a(85893);function m(e){let t;switch(e){case r.KIND.GROUP:t=c.default.t(64);break;case r.KIND.BROADCAST:t=c.default.t(21);break;case r.KIND.CHAT:default:t=c.default.t(30)}return new i.ActionType(t)}function _(e){if(e.promises.sendDelete)return e.promises.sendDelete;const t=e.getLastMsgKeyForAction(),a=t?e.msgs.get(t):void 0,s=e.promises.sendDelete=(0,l.sendConversationDelete)(e.id,t,e.getLastMsgKeyForAction.bind(e)),f=e.kind,g=s.then((function(t){if(200===t.status)switch(h.LabelCollection.removeAllLabelsMD(e),f){case r.KIND.GROUP:return d.GK.supportsFeature(d.GK.F.MD_BACKEND)&&!(0,u.clearOrDeleteChatSyncEnabled)()?new i.ActionType(n.default._("Group deleted from this device",null,{hk:"28gtyJ"})):new i.ActionType(c.default.t(63));case r.KIND.BROADCAST:return d.GK.supportsFeature(d.GK.F.MD_BACKEND)&&!(0,u.clearOrDeleteChatSyncEnabled)()?new i.ActionType(n.default._("Broadcast list deleted from this device",null,{hk:"4uAgbk"})):new i.ActionType(c.default.t(20));case r.KIND.CHAT:return d.GK.supportsFeature(d.GK.F.MD_BACKEND)&&!(0,u.clearOrDeleteChatSyncEnabled)()?new i.ActionType(n.default._("Chat deleted from this device",null,{hk:"mDV46"})):new i.ActionType(c.default.t(29))}else if(t.status>=400)switch(f){case r.KIND.GROUP:return new i.ActionType(c.default.t(62));case r.KIND.BROADCAST:return new i.ActionType(c.default.t(19));case r.KIND.CHAT:return new i.ActionType(c.default.t(28))}})).catch((function(){let t;switch(__LOG__(3)`models:chat:sendDelete dropped`,f){case r.KIND.GROUP:t=c.default.t(62);break;case r.KIND.BROADCAST:t=c.default.t(19);break;case r.KIND.CHAT:default:t=c.default.t(28)}return new i.ActionType(t,{actionText:c.default.t(139),actionHandler:()=>_(e)})}));return o.Cmd.openToast((0,p.jsx)(i.ActionToast,{id:(0,i.genId)(),initialAction:m(f),pendingAction:g})),s.then((function(s){if(200===s.status&&!s._duplicate){const s=e.getLastMsgKeyForAction();t&&t.equals(s)||t===s?e.delete():e.deleteMsgsBeforeMsgInclusive(a)}})).finally((()=>{e.promises.sendDelete=null}))}},65100:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.eagerlyEstablishE2EESessionForMedia=function(e){r.GK.supportsFeature(r.GK.F.MD_BACKEND)&&(0,o.mediaUploadPrekeysFetchEnabled)()&&d((0,l.unproxy)(e))},t.eagerlyEstablishE2EESessionWhenTyping=function(e){if(r.GK.supportsFeature(r.GK.F.MD_BACKEND)){var t,a;const s=(0,l.unproxy)(e),n=(0,o.proactivePrekeysFetchGroupSizeLimit)();n>0&&s.isGroup&&(null!==(t=null===(a=s.groupMetadata)||void 0===a?void 0:a.participants)&&void 0!==t?t:[]).length<n&&d(s)}};var n=s(a(48926)),i=a(1133),r=a(7293),o=a(57701),l=a(31019);function d(){return u.apply(this,arguments)}function u(){return(u=(0,n.default)((function*(e){r.GK.supportsFeature(r.GK.F.MD_BACKEND)&&(e.hasEstablishedE2EESession||(e.hasEstablishedE2EESession=!0,yield(0,i.eagerlyEstablishE2EESession)(e)))}))).apply(this,arguments)}},32231:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return o.apply(this,arguments)};var n=s(a(48926)),i=a(88102),r=a(50101);function o(){return(o=(0,n.default)((function*(e){const t=yield(0,r.findChat)(e.sender);(yield i.Cmd.openChatBottom(t))&&(t.composeQuotedMsg=e,e.chat&&(t.composeQuotedMsgRemoteJid=e.chat.id))}))).apply(this,arguments)}},22540:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){const s=(0,l.getMaybeMeUser)(),h=e.msgContextInfo(a.id),f=(0,n.default)((0,n.default)({type:"buttons_response",ack:r.default.ACK.CLOCK,from:s,id:new d.default({from:s,to:a.id,id:(0,u.newTag)(),participant:void 0,selfDir:"out"}),local:!0,isNewMsg:!0,self:"out",t:i.Clock.globalUnixTime(),to:a.id},h),{},{buttonsResponse:{selectedButtonId:t.id,selectedDisplayText:t.displayText,type:o.ButtonsResponseMessageType.DISPLAY_TEXT},body:t.displayText||""});return(0,c.addAndSendMsgToChat)(a,f)[1]};var n=s(a(81109)),i=a(22683),r=s(a(69618)),o=a(24808),l=a(99234),d=s(a(32219)),u=a(15860),c=a(75887);a(13705)},13164:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const a=e.chat,s=e.msgContextInfo(a.id),h=(0,l.getMaybeMeUser)(),f=(0,n.default)((0,n.default)({type:"list_response",ack:r.default.ACK.CLOCK,from:h,id:new d.default({from:h,to:a.id,id:(0,u.newTag)(),participant:void 0,selfDir:"out"}),local:!0,isNewMsg:!0,self:"out",t:i.Clock.globalUnixTime(),to:a.id},s),{},{listResponse:{listType:o.ListResponseMessageListType.SINGLE_SELECT,title:t.title,description:t.description,singleSelectReply:{selectedRowId:t.rowId}},body:(t.title||"")+(t.description?`\n${t.description}`:"")});return(0,c.addAndSendMsgToChat)(a,f)[1]};var n=s(a(81109)),i=a(22683),r=s(a(69618)),o=a(24808),l=a(99234),d=s(a(32219)),u=a(15860),c=a(75887);a(13705)},28224:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return h.apply(this,arguments)};var n=s(a(48926)),i=a(22683),r=s(a(69618)),o=a(99234),l=s(a(32219)),d=a(15860),u=a(75887),c=a(13705);function h(){return(h=(0,n.default)((function*(e,t,a,s){const n=f(e,t,a,s);try{const t=yield(0,u.addAndSendMsgToChat)(e,n)[1];if(!t||t!==c.SendMsgResult.OK)throw new Error("Location message SendMsgResult failure status")}catch(e){throw __LOG__(3)`Location message send to chat failure: ${e}`,e}}))).apply(this,arguments)}function f(e,t,a,s){const n=(0,o.getMaybeMeUser)();return{type:"location",ack:r.default.ACK.CLOCK,from:n,id:new l.default({from:n,to:e.id,id:(0,d.newTag)(),participant:void 0,selfDir:"out"}),local:!0,isNewMsg:!0,self:"out",t:i.Clock.globalUnixTime(),to:e.id,lat:t,lng:a,loc:s}}},5524:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendTextMsgToChat=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return A((0,x.unproxy)(e),t,a)};var n=s(a(48926)),i=s(a(41609)),r=s(a(91747)),o=s(a(57557)),l=a(22683),d=s(a(69618)),u=a(1973),c=a(99234),h=s(a(43239)),f=a(7293),p=a(77975),m=a(84886),_=a(30097),g=a(17304),v=s(a(32219)),C=a(29731),S=a(371),y=a(30849),b=a(15860),E=a(19708),T=(a(13705),a(64551)),x=a(31019),M=s(a(87798)),P=a(58021);function A(){return I.apply(this,arguments)}function I(){return(I=(0,n.default)((function*(e,t){var s,x;let A=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const I=(t||"").trim(),{linkPreview:w,quotedMsg:k,mentionedJidList:j,quotedMsgAdminGroupJid:N,quotedMsgAdminGroupSubject:O,quotedMsgAdminParentGroupJid:R,selectedId:D,selectedIndex:L,ctwaContext:B}=A;if(""===I)return Promise.resolve();(0,S.clearPresence)(e);const F=e.id,G=(0,c.getMaybeMeUser)();let U;f.GK.supportsFeature(f.GK.F.MD_BACKEND)?e.isGroup&&(U=(0,P.toUserWid)(G)):U=void 0;const V=new v.default({from:G,to:F,id:(0,b.newTag)(),participant:U,selfDir:"out"});let H;k?H=k.msgContextInfo(e.id):null!=N&&null!=O&&null!=R?H={quotedRemoteJid:N,quotedGroupSubject:O,quotedParentGroupJid:R}:null!=N&&(H={quotedRemoteJid:N});const K=null==w||null==w.mediaKeyTimestamp||(0,M.default)(w.mediaKeyTimestamp)?w:(0,o.default)(w,["mediaKey","mediaKeyTimestamp","thumbnailHQ","thumbnailDirectPath","thumbnailSha256","thumbnailEncSha256","thumbnailHeight","thumbnailWidth"]),q=(0,r.default)({id:V,body:I,type:"chat",subtype:K&&!(0,i.default)(K)?"url":null,t:l.Clock.globalUnixTime(),from:G,to:F,self:"out",isNewMsg:!0,local:!0,ack:d.default.ACK.CLOCK,urlText:e.urlText,urlNumber:e.urlNumber},K||{},H||{},{mentionedJidList:j},{ctwaContext:B});if(e.urlText&&(e.urlText=void 0),e.urlNumber&&(e.urlNumber=void 0),null!=L&&(q.type="template_button_reply",q.selectedId=D,q.selectedIndex=L),q.type!==d.default.MSG_TYPE.PROTOCOL){e.isEphemeralSettingOn()&&(q.ephemeralDuration=e.getEphemeralSetting());const t=e.getEphemeralSettingTimestamp();null!=t&&(q.ephemeralSettingTimestamp=t);const a=e.getDisappearingModeInitiator();null!=a&&(q.disappearingModeInitiator=a)}if(T.ServerProps.bspSystemMessageEnabled){const t=(0,y.getContactPrivacyMode)(e.id);null!=t&&(q.privacyModeWhenSent=t)}const W=new g.Msg(q),Y=(0,h.default)(W,e);f.GK.supportsFeature(f.GK.F.MD_BACKEND)&&(W.wamMessageSendPerfReporter=new _.MessageSendPerfReporter(W.to,W.getWamMediaType(),W.getWamMessageType())),null===(s=W.wamMessageSendPerfReporter)||void 0===s||s.startRenderedStage(),Y&&e.msgs.add(Y),e.msgs.add(W),null===(x=W.wamMessageSendPerfReporter)||void 0===x||x.postRenderedStage();const z=Y?[Y,q]:[q];if(k&&k.type===d.default.MSG_TYPE.PRODUCT&&(0,p.logProductMessageBusinessSend)(k,k.sessionId),f.GK.supportsFeature(f.GK.F.MD_BACKEND)&&e.isGroup){const t=a(63928).default;yield t.find(e.id)}return new C.NonPersistJob("sendMessage",(0,n.default)((function*(){var t,a;return null===(t=W.wamMessageSendPerfReporter)||void 0===t||t.startSavedStage(),yield(0,m.storeMessages)(z,e.id),null===(a=W.wamMessageSendPerfReporter)||void 0===a||a.postSavedStage(),(0,E.sendMsgRecord)(W)})),{priority:u.JOB_PRIORITY.UI_ACTION}).waitUntilCompleted()}))).apply(this,arguments)}},59992:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.setArchive=function(e,t,a){return p((0,h.unproxy)(e),t,a)};var i=a(89385),r=n(a(70714)),o=a(46331),l=a(77982),d=a(88102),u=s(a(64103)),c=n(a(43725)),h=a(31019),f=a(85893);function p(e,t,a){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,o.genId)();if(e.archive===t)return Promise.reject(new u.ActionError);const{promises:n}=e;if(n.setArchive)return n.setArchive.promise;const h=e.getLastMsgKeyForAction(),m=new r.default,_=m.signal,g=(0,l.sendConversationArchive)(e.id,t,h),v=t?new o.ActionType(c.default.t(24)):new o.ActionType(c.default.t(46)),C=g.then((n=>{if(_.aborted)throw new i.AbortError;let r;return 200===n.status?(r=t?c.default.t(23):c.default.t(45),new o.ActionType(r,{actionText:c.default.t(143),actionHandler:()=>p(e,!t,a,s)})):n.status>=400?t?new o.ActionType(c.default.t(22)):new o.ActionType(c.default.t(44)):void 0})).catch((0,i.catchAbort)((()=>{}))).catch((()=>{__LOG__(3)`models:chat:setArchive dropped`;const n=t?c.default.t(22):c.default.t(44);return new o.ActionType(n,{actionText:c.default.t(139),actionHandler:()=>p(e,t,a,s)})}));a&&d.Cmd.openToast((0,f.jsx)(o.ActionToast,{id:s,initialAction:v,pendingAction:C}));const S=g.then((a=>{200!==a.status||a._duplicate||(e.archive=t,t&&(e.pin=void 0))})).finally((()=>{n.setArchive=null}));return n.setArchive={promise:S,abortController:m},n.setArchive.archive=t,S}},10236:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.setPin=function(e,t){return f((0,c.unproxy)(e),t)};var n=a(89385),i=a(92844),r=s(a(70714)),o=a(46331),l=a(88102),d=s(a(43725)),u=a(29894),c=a(31019),h=a(85893);function f(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,o.genId)();const{promises:s}=e;s.setPin&&s.setPin.abortController.abort();let c,p=0;const m=(0,i.unixTimeMs)();t?p=m:c=e.pin;const _=new r.default,g=_.signal,v=(0,u.setPin)(e.id,p,c,m),C=t?new o.ActionType(d.default.t(43)):new o.ActionType(d.default.t(53)),S=v.then((()=>{if(g.aborted)throw new n.AbortError;const s=t?d.default.t(42):d.default.t(52);return new o.ActionType(s,{actionText:d.default.t(143),actionHandler:()=>f(e,!t,a)})})).catch((0,n.catchAbort)((()=>{}))).catch((s=>{if(405===s.status)return new o.ActionType(d.default.t(41));if(s.status>=400)return t?new o.ActionType(d.default.t(40)):new o.ActionType(d.default.t(51));__LOG__(3)`models:chat:setPin dropped`;const n=t?d.default.t(40):d.default.t(51);return new o.ActionType(n,{actionText:d.default.t(139),actionHandler:()=>f(e,t,a)})}));l.Cmd.openToast((0,h.jsx)(o.ActionToast,{id:a,initialAction:C,pendingAction:S}));const y=v.then((t=>{t._duplicate||(e.pin=p)})).finally((()=>{s.setPin=null}));return s.setPin={promise:y,abortController:_},y}},44663:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.findCommonGroups=function(e){const t=(0,l.unproxy)(e),{commonGroups:s,id:u,promises:c}=t;if(c.findCommonGroups)return c.findCommonGroups;if(s&&!s.stale)return Promise.resolve();return c.findCommonGroups=(0,o.default)(u).then((e=>{const i=(0,n.default)(e.map((e=>a(69951).ChatCollection.get(e))));return s?(s.set(i),s.stale=!1):t.commonGroups=new r.default(i,u),!0})).catch((0,i.filteredCatch)(d.ServerStatusCodeError,(e=>(__LOG__(3)`models:Contact:findCommonGroups error: ${e.status}`,Promise.reject(new Error("models:Contact:findCommonGroups error: "+e.status)))))).finally((()=>{c.findCommonGroups=null}))};var n=s(a(39693)),i=a(50796),r=s(a(89265)),o=s(a(77486)),l=a(31019),d=a(77591)},60356:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,s){const r=e.map(v.vcardFromContactModel),o=1===r.length?r[0]:(0,v.mergeVcards)(r),d=`${o.displayName}.vcf`,g=(0,c.createFile)([o.vcard],d,{type:S}),C=g.size/1024;if(0!==_.ServerProps.vcardAsDocumentSizeKb&&C>_.ServerProps.vcardAsDocumentSizeKb)return void function(){y.apply(this,arguments)}(g,e.length,t,a,s);!function(e,t,a,s,r){const o=s&&s.msgContextInfo(t.id),d=(0,h.getMaybeMeUser)(),c=(0,n.default)((0,n.default)({ack:u.default.ACK.CLOCK,from:d,id:new f.default({from:d,to:t.id,id:(0,p.newTag)(),participant:t.isGroup?d:void 0,selfDir:"out"}),local:!0,isNewMsg:!0,self:"out",t:l.Clock.globalUnixTime(),to:t.id},o),{},{ctwaContext:r}),_=1===e.length?(0,n.default)((0,n.default)({type:"vcard",vcardFormattedName:e[0].displayName,body:e[0].vcard},c),b(t)):(0,n.default)((0,n.default)({type:"multi_vcard",vcardList:e},c),b(t));(0,i.default)((function*(){try{yield(0,m.addAndSendMsgToChat)(t,_)[1]}catch(e){throw __LOG__(2)`Error sending contact: ${e}`,e}}))()}(r,t,0,a,s)};var n=s(a(81109)),i=s(a(48926)),r=s(a(45095)),o=s(a(14075)),l=a(22683),d=a(88102),u=s(a(69618)),c=a(1063),h=a(99234),f=s(a(32219)),p=a(15860),m=a(75887),_=a(64551),g=a(50452),v=a(78521),C=a(85893);const S="text/vcard";function y(){return(y=(0,i.default)((function*(e,t,a,s,n){const l={file:e,type:u.default.MSG_TYPE.DOCUMENT,filename:e.name,mimetype:S,isVcardOverMmsDocument:!0,documentPageCount:t},c=new o.default({chatParticipantCount:a.getParticipantCount()});yield c.processAttachments([l]);const{errorMsgs:h}=c.uiProcessMsgs();if(h)return void d.Cmd.openToast((0,C.jsx)(g.Toast,{msg:h,id:(0,g.genId)()}));const f=(0,r.default)(c.getValidMedias()[0],"collection.getValidMedias()[0]");(0,i.default)((function*(){try{yield f.sendToChat(a,{quotedMsg:s,ctwaContext:n})}catch(e){throw __LOG__(2)`Error sending contact: ${e}`,e}}))()}))).apply(this,arguments)}function b(e){const t={};e.isEphemeralSettingOn()&&(t.ephemeralDuration=e.getEphemeralSetting());const a=e.getEphemeralSettingTimestamp();null!=a&&(t.ephemeralSettingTimestamp=a);const s=e.getDisappearingModeInitiator();return null!=s&&(t.disappearingModeInitiator=s),t}},56635:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(48360)),i=a(88102),r=s(a(52665)),o=s(a(43725)),l=a(85893);var d=function(){let{title:e=n.default._("WhatsApp Web can't show this message.",null,{hk:"1cx2RA"}),body:t=n.default._("Use WhatsApp on your mobile device to view it.",null,{hk:"3jYSKM"})}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i.Cmd.openModal((0,l.jsx)(r.default,{title:e,okText:o.default.t(1765),onOK:()=>i.Cmd.closeModal(),children:t}))};t.default=d},73058:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.joinGroupViaInvite=function(){return u.apply(this,arguments)},t.queryGroupInviteCode=function(e){return function(e){if(e.groupInviteCodePromise)return e.groupInviteCodePromise;return e.groupInviteCodePromise=(0,o.sendQueryGroupInviteCode)(e.id).then((t=>{e.inviteCode=t})).finally((()=>{e.groupInviteCodePromise=null}))}((0,l.unproxy)(e))},t.revokeGroupInvite=function(e){return function(e){if(e.revokeGroupInvitePromise)return e.revokeGroupInvitePromise;return e.revokeGroupInvitePromise=(0,o.sendRevokeGroupInviteCode)(e.id).then((t=>{e.inviteCode=t})).catch((0,i.filteredCatch)(d.ServerStatusCodeError,(e=>{throw e}))).catch((()=>{__LOG__(3)`models:groupMetadata:participantCollection:revokeGroupInvite dropped`})).finally((()=>{e.revokeGroupInvitePromise=null}))}((0,l.unproxy)(e))};var n=s(a(48926)),i=a(50796),r=a(50101),o=a(69586),l=a(31019),d=a(77591);function u(){return(u=(0,n.default)((function*(e){const t=yield(0,o.sendJoinGroupViaInvite)(e);return(0,r.findChat)(t)}))).apply(this,arguments)}},54646:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.setGroupProperty=function(e,t,a){return _((0,f.unproxy)(e),t,a)};var i=a(50796),r=n(a(48360)),o=a(46331),l=a(88102),d=n(a(69618)),u=s(a(64103)),c=n(a(43725)),h=a(57490),f=a(31019),p=a(77591),m=a(85893);function _(e,t,a){var s,n;let f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,o.genId)();if(!t)return Promise.reject(new u.ActionError);if(t===d.default.GROUP_SETTING_TYPE.EPHEMERAL&&!(null===(s=e.groupMetadata)||void 0===s?void 0:s.canSetEphemeralSetting()))return Promise.reject(new u.ActionError);if(t!==d.default.GROUP_SETTING_TYPE.EPHEMERAL&&!(null===(n=e.groupMetadata)||void 0===n?void 0:n.canSetGroupProperty()))return Promise.reject(new u.ActionError);const g=(0,h.sendSetGroupProperty)(e.id,t,a),v={[d.default.GROUP_SETTING_TYPE.ANNOUNCEMENT]:{on:[r.default._("Allowing only admins to send messages to this group",null,{hk:"7c1j2"}),r.default._("You allowed only admins to send messages to this group",null,{hk:"TgjEr"})],off:[r.default._("Allowing all participants to send messages to this group",null,{hk:"4cLMI3"}),r.default._("You allowed all participants to send messages to this group",null,{hk:"1PCiIv"})]},[d.default.GROUP_SETTING_TYPE.RESTRICT]:{on:[r.default._("Allowing only admins to change this group's info",null,{hk:"PbjyR"}),r.default._("You allowed only admins to change this group's info",null,{hk:"39H5jp"})],off:[r.default._("Allowing all participants to change this group's info",null,{hk:"3fBDr9"}),r.default._("You allowed all participants to change this group's info",null,{hk:"4AVVnx"})]},[d.default.GROUP_SETTING_TYPE.NO_FREQUENTLY_FORWARDED]:{on:[r.default._("Blocking participants from sending messages that have been forwarded many times to this group",null,{hk:"lpVO4"}),r.default._("You blocked participants from sending messages that have been forwarded many times to this group",null,{hk:"22llJ6"})],off:[r.default._("Allowing participants to send messages that have been forwarded many times to this group",null,{hk:"UUxQ6"}),r.default._("You allowed participants to send messages that have been forwarded many times to this group",null,{hk:"3A3ppd"})]},[d.default.GROUP_SETTING_TYPE.EPHEMERAL]:{on:[r.default._("Turning on disappearing messages in this chat",null,{hk:"8QDLb"}),r.default._("You turned on disappearing messages in this chat",null,{hk:"27eqpQ"})],off:[r.default._("Turning off disappearing messages in this chat",null,{hk:"4nYVdI"}),r.default._("You turned off disappearing messages in this chat",null,{hk:"6y3db"})]}},C=0===a?"off":"on",[S,y]=v[t][C],b=new o.ActionType(S),E=g.then((()=>new o.ActionType(y))).catch((0,i.filteredCatch)(p.ServerStatusCodeError,(e=>{if(404===e.status)return new o.ActionType(r.default._("Group setting could not be changed",null,{hk:"3WCKMX"}).toString()+" "+r.default._("This group has ended.",null,{hk:"C2izu"}).toString())}))).catch((()=>(__LOG__(3)`Error while setting property`,new o.ActionType(r.default._("Group setting could not be changed",null,{hk:"3WCKMX"}),{actionText:c.default.t(139),actionHandler:()=>_(e,t,a,f)}))));return l.Cmd.openToast((0,m.jsx)(o.ActionToast,{id:f,initialAction:b,pendingAction:E})),g.then((s=>{var n;s._duplicate||(null===(n=e.groupMetadata)||void 0===n||n.set(d.default.GROUP_SETTING_TO_METADATA[t],a))})).catch((0,i.filteredCatch)(p.ServerStatusCodeError,(()=>{})))}},30734:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.canMarkPlayed=function(e){return u((0,l.unproxy)(e))},t.markPlayed=function(e){return function(e){u(e)?(0,r.default)(e).then((()=>{e.ack=i.default.ACK.PLAYED})).catch((0,n.filteredCatch)(d.WebdDrop,(()=>{}))):__LOG__(2)`Msg:msg should not call sendPlayed`}((0,l.unproxy)(e))};var n=a(50796),i=s(a(69618)),r=s(a(58355)),o=a(64551),l=a(31019),d=a(77591);function u(e){return!e.isSentByMe&&(!(e.ack>=i.default.ACK.PLAYED)&&(e.type===i.default.MSG_TYPE.PTT||!!e.isViewOnce&&(o.ServerProps.viewOnceRead||o.ServerProps.viewOnceWrite)))}},21357:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendReactionToMsg=function(){return S.apply(this,arguments)};var n=s(a(48926)),i=s(a(91747)),r=a(22683),o=s(a(69618)),l=a(1973),d=a(99234),u=a(90981),c=a(84886),h=a(17304),f=s(a(32219)),p=a(29731),m=a(15860),_=a(76332),g=a(31464),v=a(19708),C=(a(13705),a(58021));function S(){return(S=(0,n.default)((function*(e,t){const a=e.chat.id,s=(0,d.getMaybeMeUser)(),S=e.chat.isGroup?(0,C.toUserWid)(s):void 0,y=e.id,b=yield g.ReactionsCollection.find(y.toString());let E=r.Clock.globalUnixTimeMilliseconds();const T=b.reactionByMe;T&&(E=Math.max(T.timestamp+1,E));const x=new f.default({from:s,to:a,id:(0,m.newTag)(),participant:S,selfDir:"out"}),M=(0,i.default)({id:x,reactionParentKey:y,type:"reaction",t:r.Clock.globalUnixTime(),from:s,to:a,self:"out",isNewMsg:!0,local:!0,ack:o.default.ACK.CLOCK,reactionText:t,reactionTimestamp:E}),P=new h.Msg(M),A={msgKey:x.toString(),parentMsgKey:e.id.toString(),senderUserJid:s.toString(),reactionText:t,timestamp:E,orphan:0,read:!0};return(0,_.addOrUpdateReactions)(A,!1),new p.NonPersistJob("sendMessage",(0,n.default)((function*(){var t,a;null===(t=P.wamMessageSendPerfReporter)||void 0===t||t.startSavedStage(),yield(0,c.storeMessages)([M],e.chat.id),null===(a=P.wamMessageSendPerfReporter)||void 0===a||a.postSavedStage();const s=yield(0,v.sendMsgRecord)(P);return T&&(yield(0,u.getTable)().remove(T.msgKey)),s})),{priority:l.JOB_PRIORITY.UI_ACTION}).waitUntilCompleted()}))).apply(this,arguments)}},65376:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.setDisappearingMode=function(){return d.apply(this,arguments)};var n=s(a(48926)),i=a(22683),r=a(91036),o=a(99234),l=a(68462);function d(){return(d=(0,n.default)((function*(e){yield(0,l.setDisappearingMode)(e),yield(0,r.updateDisappearingMode)((0,o.getMaybeMeUser)(),e,i.Clock.globalUnixTime())}))).apply(this,arguments)}},83610:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addStickerMsgToFavorites=function(e){i.GK.supportsFeature(i.GK.F.MD_BACKEND)&&n.default.addNewSticker(new r.StickerModel({id:e.filehash,mimetype:e.mimetype,width:e.width,height:e.height,filehash:e.filehash,encFilehash:e.encFilehash,directPath:e.directPath,mediaKey:e.mediaKey,mediaKeyTimestamp:e.mediaKeyTimestamp}))},t.addStickerToFavorites=function(e){i.GK.supportsFeature(i.GK.F.MD_BACKEND)&&n.default.addNewSticker(new r.StickerModel({id:e.id,mimetype:e.mimetype,width:e.width,height:e.height,filehash:e.filehash,encFilehash:e.encFilehash,directPath:e.directPath,mediaKey:e.mediaKey,mediaKeyTimestamp:e.mediaKeyTimestamp}))},t.isStickerFilehashFavorited=function(e){return null!=n.default.get(e)},t.removeStickerFromFavorites=function(e){i.GK.supportsFeature(i.GK.F.MD_BACKEND)&&n.default.removeAndSave(e.filehash)},t.removeStickerMsgFromFavorites=function(e){i.GK.supportsFeature(i.GK.F.MD_BACKEND)&&n.default.removeAndSave(e.filehash)};var n=s(a(70723)),i=a(7293),r=a(89867)},79991:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.fetchFirstPartyStickerPack=function(){return C.apply(this,arguments)},t.fetchFirstPartyStickerPacks=function(){return v.apply(this,arguments)};var i=n(a(48926)),r=a(79502),o=s(a(64103)),l=n(a(18561)),d=a(99234),u=n(a(43725)),c=n(a(11339)),h=a(2541),f=n(a(23082));const p="https://static.whatsapp.net/sticker";function m(){return _.apply(this,arguments)}function _(){return(_=(0,i.default)((function*(e,t){const a=h.URL.build(p,e),s=yield(0,l.default)(a,{signal:t.signal}),n=new c.default.StickerCommonQueryToStaticServer;if(n.set({httpResponseCode:s.status,params:new f.default(e).toString(),queryType:c.default.QUERY_TYPE.STICKER_PACK_DATA}),n.commit(),!s.ok)throw new o.InvalidServerResponseError(a,s.status.toString(),"Invalid response from WhatsApp stickers endpoint");const i=yield s.json();if(null==i||0===i.length)throw new o.InvalidServerResponseError(a,s.status.toString(),`Invalid response from WhatsApp stickers endpoint: ${JSON.stringify(i)}`);return i}))).apply(this,arguments)}function g(e,t){const a={id:e["sticker-pack-id"],name:e.name,publisher:e.publisher,description:e.description,fileSize:Number(e["file-size"]),imageDataHash:e["image-data-hash"],animated:1===e.animated,previewImageIds:e["preview-image-ids"],trayImageId:e["tray-image-id"],trayImagePreview:e["tray-image-preview"]};return null!=t&&(a.index=t),a}function v(){return(v=(0,i.default)((function*(e){var t;const a=u.default.getLocale(),s=(0,r.getCountryShortcodeByPhone)(null===(t=(0,d.getMaybeMeUser)())||void 0===t?void 0:t.user)||"default";return(yield m({cat:"sticker_store_data",id:"all",lg:a,country:s},{signal:e.signal})).map(((e,t)=>g(e,t)))}))).apply(this,arguments)}function C(){return(C=(0,i.default)((function*(e){const t=u.default.getLocale(),a={cat:"sticker_pack_data",id:e.id,lg:t};return g((yield m(a,{signal:e.signal}))[0])}))).apply(this,arguments)}},88577:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.searchFirstPartyStickers=function(){return _.apply(this,arguments)};var i=n(a(81109)),r=n(a(48926)),o=a(79502),l=s(a(64103)),d=n(a(18561)),u=a(99234),c=n(a(11339)),h=a(89867),f=a(2541),p=n(a(23082));const m="https://static.whatsapp.net/sticker";function _(){return(_=(0,r.default)((function*(e,t){var a;const s=(0,o.getCountryShortcodeByPhone)(null===(a=(0,u.getMaybeMeUser)())||void 0===a?void 0:a.user)||"default";let n=0,r=0;for(;n<=250;)n+=3+encodeURIComponent(e[r++]).length;const _=e.slice(0,r-1).join(","),g={country:s},v=f.URL.build(m,(0,i.default)({cat:"sticker_search",terms:_},g)),C=yield(0,d.default)(v,{signal:null==t?void 0:t.signal}),S=new c.default.StickerCommonQueryToStaticServer;if(S.set({httpResponseCode:C.status,params:new p.default(g).toString(),queryType:c.default.QUERY_TYPE.STICKER_SEARCH}),S.commit(),!C.ok)throw new l.InvalidServerResponseError(v,C.status.toString(),"Invalid response from WhatsApp stickers endpoint");const y=yield C.json();if(null==y)throw new l.InvalidServerResponseError(v,C.status.toString(),`Invalid response from WhatsApp stickers endpoint: ${JSON.stringify(y)}`);return y.map(((e,t)=>new h.StickerModel({mimetype:e.mimetype,width:e.width,height:e.height,filehash:e["file-hash"],directPath:e["direct-path"],mediaKey:e["media-key"],id:e["file-hash"],encFilehash:e["enc-file-hash"],mediaKeyTimestamp:0,index:t})))}))).apply(this,arguments)}},85330:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendStickerToChat=function(e,t,a){return function(){return c.apply(this,arguments)}((0,d.unproxy)(e),t,a)};var n=s(a(6479)),i=s(a(48926)),r=a(78986),o=s(a(11339)),l=s(a(34949)),d=(a(13705),a(31019));const u=["stickerSendOrigin"];function c(){return(c=(0,i.default)((function*(e,t,s){a(91692).RecentStickerCollection.enqueue([t]),t.mediaData&&t.mediaData.mediaBlob instanceof l.default&&t.mediaData.mediaBlob.retain();const{stickerSendOrigin:i}=s,d=(0,n.default)(s,u),c=yield(0,r.prepSticker)(t).sendToChat(e,d);return new o.default.StickerSend({stickerSendOrigin:i,stickerIsAnimated:Boolean(t.mediaData.isAnimated),stickerIsFirstParty:Boolean(t.mediaData.isFirstParty),stickerIsFromStickerMaker:Boolean(t.mediaData.isFromStickerMaker)}).commit(),c}))).apply(this,arguments)}},98248:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const a=s.ChatCollection.getActive();if(null==a)return void __LOG__(4,void 0,new Error)`Cannot call sendStickerToActiveChat without an active chat`;const{ctwaContextLinkData:r,ctwaContext:o}=a.getComposeContents(),l={stickerSendOrigin:t,quotedMsg:a.composeQuotedMsg,ctwaContext:(0,n.prepareCtwaContextSend)(r,o)};a.composeQuotedMsg=null,(0,i.sendStickerToChat)(a,e,l)};var s=a(69951),n=a(92157),i=a(85330)},19866:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.upgradeToMD=function(e){let t,a,s;if(e){t="light"===(0,g.getTheme)()?"intro-md-beta-logo-light":"intro-md-beta-logo-dark",a=h.default.t(664);const e=(0,C.jsx)(r.ExternalLink,{href:(0,o.getMdOptInFaqUrl)(),children:h.default.t(1711)}),n=(0,u.mdMigrationExperience)()?(0,C.jsx)(f.default,{id:1401,params:{learn_more:e}},"learnmorelink"):(0,C.jsx)(f.default,{id:1400,params:{learn_more:e}},"learnmorelink");s=[n,h.default.t(1402)]}else t="light"===(0,g.getTheme)()?"logout-notice-light":"logout-notice-dark",a=h.default.t(1405),s=[h.default.t(1403)];n.Cmd.openModal((0,C.jsx)(i.default,{onOK:S,type:p.ModalTheme.Upgrade,okText:h.default.t(395),onCancel:()=>n.Cmd.closeModal(),cancelText:h.default.t(1574),children:(0,C.jsxs)(l.FlexColumn,{align:"center",justify:"center",children:[(0,C.jsx)(m.default,{name:t}),(0,C.jsx)(_.TextDiv,{theme:"popup-title",className:c.default.upgradeModalTitle,children:a}),s.map(((e,t)=>(0,C.jsx)(_.TextDiv,{theme:"small",className:c.default.upgradeModalText,children:e},`content${t}`)))]})}))};var n=a(88102),i=s(a(52665)),r=a(12591),o=a(96384),l=a(29623),d=a(99234),u=a(57701),c=s(a(65384)),h=s(a(43725)),f=s(a(56074)),p=a(57224),m=s(a(23217)),_=a(13923),g=a(97628),v=a(65372),C=a(85893);function S(){const e=()=>{(0,d.setMdOptedIn)(!1),(0,d.setShowMdUpgradeCompleteMsg)(!1),n.Cmd.openModal((0,C.jsx)(i.default,{onOK:S,type:p.ModalTheme.Upgrade,okText:h.default.t(1882),onCancel:()=>n.Cmd.closeModal(),cancelText:h.default.t(1574),children:(0,C.jsxs)(l.FlexColumn,{align:"center",justify:"center",children:[(0,C.jsx)(m.default,{name:"light"===(0,g.getTheme)()?"internet-disconnected-light":"internet-disconnected-dark"}),(0,C.jsx)(_.TextDiv,{className:c.default.upgradeModalErrorText,theme:"small",children:h.default.t(771)})]})}))};n.Cmd.closeModal(),(0,d.setMdOptedIn)(!0),(0,d.setShowMdUpgradeCompleteMsg)(!0),(0,v.sendUpgradeToMD)().then((t=>{let{status:a}=t;200!==a&&e()})).catch((t=>{__LOG__(2)`Error while sending MdOptIn ${t}`,e()}))}},71055:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.refreshCartMD=function(){return h.apply(this,arguments)},t.refreshCartResponse=void 0;var n=s(a(48926)),i=a(31914),r=a(71914),o=s(a(57291)),l=a(24747),d=a(39410),u=a(77591);const c=new r.WapParser("refreshCartResponse",(e=>{e.assertTag("iq"),e.assertFromServer();const t=e.child("cart"),a=t.maybeChild("price"),s={},n=null==a?void 0:a.maybeChild("subtotal");n&&(s.subtotal=n.contentString());const i=null==a?void 0:a.maybeChild("total");i&&(s.total=i.contentString());const r=null==a?void 0:a.maybeChild("currency");r&&(s.currency=r.contentString());const o=null==a?void 0:a.maybeChild("price_status");o&&(s.price_status=o.contentString());const l=[];return t.forEachChildWithTag("product",(e=>{const t=e.child("id").contentString(),a=e.maybeChild("name"),s=a?a.contentString():null,n=e.maybeChild("price"),i=n?n.contentString():null,r=e.maybeChild("currency"),o=r?r.contentString():null;let d;const u=e.maybeChild("media"),c=u?u.maybeChild("image"):null;if(null!=c){d={image:{}};const e=c.maybeChild("id");e&&e.hasContent()&&(d.image.id=e.contentString());const t=c.maybeChild("request_image_url");t&&t.hasContent()&&(d.image.request_image_url=t.contentString())}const h={id:t,name:s,price:i,currency:o,media:d},f=e.maybeChild("sale_price");var p,m;f&&(h.sale_price={price:f.child("price").contentString(),start_date:null===(p=f.maybeChild("start_date"))||void 0===p?void 0:p.contentString(),end_date:null===(m=f.maybeChild("end_date"))||void 0===m?void 0:m.contentString()});const _=e.maybeChild("status");_&&(h.status=_.contentString()),l.push(h)})),{price:s,products:l}}));function h(){return(h=(0,n.default)((function*(e,t,a,s){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;const r=(0,i.wap)("iq",{to:i.S_WHATSAPP_NET,smax_id:"11",xmlns:"fb:thrift_iq",id:(0,i.generateId)(),type:"get"},(0,i.wap)("cart",{op:(0,i.CUSTOM_STRING)("refresh"),biz_jid:(0,d.USER_JID)(e)},t.map((e=>(0,i.wap)("product",null,(0,i.wap)("id",null,e)))).concat((0,o.default)([(0,i.wap)("image_dimensions",null,(0,i.wap)("width",null,a.toString()),(0,i.wap)("height",null,s.toString())),n?(0,i.wap)("direct_connection_encrypted_info",null,n):null])))),h=yield(0,l.sendIq)(r,c);if(h.success)return h.result;throw new u.ServerStatusCodeError(h.errorCode)}))).apply(this,arguments)}t.refreshCartResponse=c},35654:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.joinGroupViaInvite=function(){return m.apply(this,arguments)},t.queryGroupInviteCode=function(e){return h((0,i.wap)("iq",{type:"get",xmlns:"w:g2",to:(0,d.GROUP_JID)(e),id:(0,i.generateId)()},(0,i.wap)("invite",null)))},t.revokeGroupInviteCode=function(e){return h((0,i.wap)("iq",{type:"set",xmlns:"w:g2",to:(0,d.GROUP_JID)(e),id:(0,i.generateId)()},(0,i.wap)("invite",null)))};var n=s(a(48926)),i=a(31914),r=a(71914),o=a(24747),l=a(85553),d=a(39410),u=a(77591);const c=new r.WapParser("queryGroupInviteCodeParser",(e=>({code:e.child("invite").attrString("code")})));function h(){return f.apply(this,arguments)}function f(){return(f=(0,n.default)((function*(e){const t=yield(0,o.sendIq)(e,c);return t.success?t.result:(__LOG__(2)`sendGroupInviteIq failed: ${t.errorCode} : ${t.errorType}`,Promise.reject(new u.ServerStatusCodeError(t.errorCode,t.errorText)))}))).apply(this,arguments)}const p=new r.WapParser("joinGroupViaInviteParser",(e=>{e.assertTag("iq"),e.assertAttr("from","g.us"),e.assertAttr("type","result");const t=e.child("group");return{gid:(0,l.groupJidToWid)(t.attrGroupJid("jid"))}}));function m(){return(m=(0,n.default)((function*(e){const t=(0,i.wap)("iq",{type:"set",xmlns:"w:g2",to:i.G_US,id:(0,i.generateId)()},(0,i.wap)("invite",{code:(0,i.CUSTOM_STRING)(e)})),a=yield(0,o.sendIq)(t,p);return a.success?a.result:(__LOG__(2)`joinGroupInvite failed: ${a.errorCode}:${a.errorType}`,Promise.reject(new u.ServerStatusCodeError(a.errorCode,a.errorText)))}))).apply(this,arguments)}},77287:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.setGroupDescription=function(e,t,a,s){const n=t?(0,i.wap)("description",{id:(0,i.CUSTOM_STRING)(a),prev:(0,i.MAYBE_CUSTOM_STRING)(s)},(0,i.wap)("body",null,t)):(0,i.wap)("description",{delete:"true",prev:(0,i.MAYBE_CUSTOM_STRING)(s)});return h((0,i.wap)("iq",{to:(0,d.GROUP_JID)(e),type:"set",xmlns:"w:g2",id:(0,i.generateId)()},n))},t.setGroupProperty=function(e,t,a){let s;switch(t){case l.default.GROUP_SETTING_TYPE.ANNOUNCEMENT:s=1===a?(0,i.wap)("announcement",null):(0,i.wap)("not_announcement",null);break;case l.default.GROUP_SETTING_TYPE.RESTRICT:s=1===a?(0,i.wap)("locked",null):(0,i.wap)("unlocked",null);break;case l.default.GROUP_SETTING_TYPE.NO_FREQUENTLY_FORWARDED:s=1===a?(0,i.wap)("no_frequently_forwarded",null):(0,i.wap)("frequently_forwarded_ok",null);break;case l.default.GROUP_SETTING_TYPE.EPHEMERAL:s=a>0?(0,i.wap)("ephemeral",{expiration:(0,i.INT)(a)}):(0,i.wap)("not_ephemeral",null);break;default:return Promise.reject(new Error(`invalid group property ${t}`))}return h((0,i.wap)("iq",{to:(0,d.GROUP_JID)(e),type:"set",xmlns:"w:g2",id:(0,i.generateId)()},s))},t.setGroupSubject=function(e,t){return h((0,i.wap)("iq",{to:(0,d.GROUP_JID)(e),type:"set",xmlns:"w:g2",id:(0,i.generateId)()},(0,i.wap)("subject",null,t)))};var n=s(a(48926)),i=a(31914),r=a(71914),o=a(24747),l=s(a(69618)),d=a(39410),u=a(77591);const c=new r.WapParser("setGroupInfoParser",(e=>{if(e.hasChild("error")){const t=e.child("error");return{errorCode:t.attrInt("code"),errorText:t.hasAttr("text")?t.attrString("text"):""}}return{success:!0}}));function h(){return f.apply(this,arguments)}function f(){return(f=(0,n.default)((function*(e){const t=yield(0,o.sendIq)(e,c);if(!t.success)return Promise.reject(new u.ServerStatusCodeError(t.errorCode,t.errorText))}))).apply(this,arguments)}},26409:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFanOutListJob=function(e){return(0,i.NonPersistJob)("getFanOutList",(e=>(0,n.getFanOutList)(e)),{priority:s.JOB_PRIORITY.SKIP}).waitUntilCompleted({wids:e})};var s=a(1973),n=a(16104),i=a(29731)},63262:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.cartItemToNode=c,t.createOrderMD=function(){return h.apply(this,arguments)},t.createOrderResponse=void 0;var n=s(a(48926)),i=a(31914),r=a(71914),o=a(24747),l=a(39410),d=a(77591);const u=new r.WapParser("createOrderResponse",(e=>{e.assertTag("iq"),e.assertFromServer();const t=e.child("order"),a=t.attrString("id"),s=t.attrString("token"),n=t.maybeChild("price"),i={},r=null==n?void 0:n.maybeChild("subtotal");r&&(i.subtotal=r.contentString());const o=null==n?void 0:n.maybeChild("total");o&&(i.total=o.contentString());const l=null==n?void 0:n.maybeChild("currency");l&&(i.currency=l.contentString());const d=null==n?void 0:n.maybeChild("price_status");return d&&(i.price_status=d.contentString()),{id:a,token:s,price:i}}));function c(e){const t=null!=e.priceAmount1000?(0,i.wap)("price",null,e.priceAmount1000.toString()):void 0,a=e.currency?(0,i.wap)("currency",null,e.currency):void 0;return(0,i.wap)("product",null,(0,i.wap)("id",null,e.id),(0,i.wap)("name",null,e.name),t,a,(0,i.wap)("quantity",null,e.quantity.toString()))}function h(){return(h=(0,n.default)((function*(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const s=(0,i.wap)("iq",{to:i.S_WHATSAPP_NET,smax_id:"10",xmlns:"fb:thrift_iq",id:(0,i.generateId)(),type:"set"},(0,i.wap)("order",{op:(0,i.CUSTOM_STRING)("create"),biz_jid:(0,l.USER_JID)(e)},t.map((e=>c(e))).concat(a?(0,i.wap)("direct_connection_encrypted_info",null,a):[]))),n=yield(0,o.sendIq)(s,u);if(n.success)return n.result;throw new d.ServerStatusCodeError(n.errorCode)}))).apply(this,arguments)}t.createOrderResponse=u},49693:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.queryOrder=function(){return u.apply(this,arguments)},t.queryOrderResponse=void 0;var n=s(a(48926)),i=a(31914),r=a(71914),o=a(24747),l=a(77591);const d=new r.WapParser("queryOrderResponse",(e=>{e.assertTag("iq"),e.assertFromServer();const t=e.child("order"),a=t.hasAttr("creation_ts")?t.attrTime("creation_ts"):null,s=t.maybeChild("price"),n=null==s?void 0:s.maybeChild("subtotal"),i=n?parseInt(n.contentString(),10):null,r=null==s?void 0:s.maybeChild("currency"),o=r?r.contentString():null,l=null==s?void 0:s.maybeChild("tax"),d=l?parseInt(l.contentString(),10):null,u=null==s?void 0:s.maybeChild("total"),c=u?parseInt(u.contentString(),10):null,h=[];return t.forEachChildWithTag("product",(e=>{const t=e.child("id").contentString(),a=e.child("name").contentString(),s=e.maybeChild("price"),n=s?parseInt(s.contentString(),10):null,i=e.maybeChild("quantity"),r=i?parseInt(i.contentString(),10):null,o=e.maybeChild("currency"),l=o?o.contentString():null;let d=null,u=null;const c=e.maybeChild("image");if(null!=c){const e=c.maybeChild("url");u=e&&e.hasContent()?e.contentString():null;const t=c.maybeChild("id");d=t&&t.hasContent()?t.contentString():null}h.push({id:t,price:n,thumbnailId:d,thumbnailUrl:u,currency:l,name:a,quantity:r})})),{currency:o,createdAt:a,products:h,subtotal:i,total:c,tax:d}}));function u(){return(u=(0,n.default)((function*(e,t,a,s){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;const r=(0,i.wap)("iq",{to:i.S_WHATSAPP_NET,smax_id:"5",xmlns:"fb:thrift_iq",id:(0,i.generateId)(),type:"get"},(0,i.wap)("order",{op:(0,i.CUSTOM_STRING)("get"),id:(0,i.CUSTOM_STRING)(e)},(0,i.wap)("image_dimensions",null,(0,i.wap)("width",null,t.toString()),(0,i.wap)("height",null,a.toString())),(0,i.wap)("token",null,s),n?(0,i.wap)("direct_connection_encrypted_info",null,n):null)),u=yield(0,o.sendIq)(r,d);if(u.success)return u.result;throw new l.ServerStatusCodeError(u.errorCode)}))).apply(this,arguments)}t.queryOrderResponse=d},76815:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return f.apply(this,arguments)};var n=s(a(48926)),i=a(15688),r=a(31914),o=a(71914),l=a(24747),d=a(24808),u=a(77591),c=a(58021);const h=new o.WapParser("ctwaContext",(e=>{e.assertTag("iq"),e.assertFromServer();const t=e.child("context"),a={};return e.hasChild("error")?(function(e){const t=e&&e.maybeAttrString("code"),a=e&&e.maybeAttrString("text");__LOG__(3)`getCtwaContext error: code ${t} text ${a}`}(e.child("error")),Promise.reject(new Error("invalid response"))):(a.sourceUrl=t.child("source").child("url").contentString(),a.sourceId=t.child("source").child("id").contentString(),a.sourceType=t.child("source").child("type").contentString(),t.hasChild("headline")&&(a.title=t.child("headline").contentString()),t.hasChild("body")&&(a.description=t.child("body").contentString()),t.hasChild("thumbnail")&&(t.child("thumbnail").hasChild("url")&&(a.thumbnailUrl=t.child("thumbnail").child("url").contentString()),t.child("thumbnail").hasChild("bytes")&&(a.thumbnail=(0,i.encodeB64)(t.child("thumbnail").child("bytes").contentBytes())),t.hasChild("video")?(a.mediaUrl=t.child("video").child("url").contentString(),a.mediaType=d.ExternalAdReplyInfoMediaType.VIDEO):a.mediaType=d.ExternalAdReplyInfoMediaType.IMAGE),a)}));function f(){return(f=(0,n.default)((function*(e,t,a){const s=(0,c.createWid)(e).toString({legacy:!0}),n=(0,r.wap)("iq",{xmlns:"fb:thrift_iq",id:(0,r.generateId)(),type:"get",to:r.S_WHATSAPP_NET,smax_id:"4"},(0,r.wap)("account_number",null,s),(0,r.wap)("code",null,t),(0,r.wap)("expected_source_url",null,a)),i=yield(0,l.sendIq)(n,h);if(i.success)return i.result;throw new u.ServerStatusCodeError(i.errorCode)}))).apply(this,arguments)}},71504:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return m.apply(this,arguments)};var n=s(a(48926)),i=a(31914),r=a(86945),o=a(24747),l=s(a(69618)),d=a(99234),u=a(90981),c=a(4831),h=a(74727),f=a(39410);function p(e){if(e.isGroup())return h.RECEIPT_TYPE.PLAYED;const t=(0,r.getABPropConfigValue)("played_self_enabled");return(0,d.getUserPrivacySettings)().readReceipts===c.ALL_NONE.none&&!0===t?h.RECEIPT_TYPE.PLAYED_SELF:h.RECEIPT_TYPE.PLAYED}function m(){return(m=(0,n.default)((function*(e,t){const a=e.broadcastId||t,s=e.id.id,n=a.isUser()?null:e.author,r=p(t),d=(0,i.wap)("receipt",{to:(0,f.CHAT_JID)(a),type:r,id:(0,i.CUSTOM_STRING)(s),t:(0,i.CUSTOM_STRING)(Date.now().toString()),participant:n?(0,f.DEVICE_JID)(n):i.DROP_ATTR});return yield(0,o.sendStanzaAndWaitForAck)(d,{id:s,class:"receipt",type:r,from:a,participant:n}),(0,u.getTable)().merge(e.id.toString(),{ack:l.default.ACK.PLAYED})}))).apply(this,arguments)}},68462:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.setDisappearingMode=function(){return d.apply(this,arguments)};var n=s(a(48926)),i=a(31914),r=a(71914),o=a(24747);const l=new r.WapParser("setDMResponseParser",(e=>{e.assertTag("iq"),e.assertAttr("type","result")}));function d(){return(d=(0,n.default)((function*(e){const t=(0,i.wap)("iq",{xmlns:"disappearing_mode",to:i.S_WHATSAPP_NET,type:"set",id:(0,i.generateId)()},(0,i.wap)("disappearing_mode",{duration:(0,i.CUSTOM_STRING)(String(e))})),a=yield(0,o.sendIq)(t,l);if(!a.success){const{errorCode:e,errorText:t}=a;throw __LOG__(3)`setDisappearingMode: failed ${e}, ${t}`,new Error({errorCode:e,errorText:t})}}))).apply(this,arguments)}},93202:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(45095)),i=s(a(69618)),r=a(99234),o=a(7293),l=a(57701),d=s(a(32219)),u=s(a(39546));var c={parseWebMessageInfo:function(e,t){const a=e.key,s=this.decodeJid(a.remoteJid),c=(0,r.getMaybeMeUser)(),h=a.fromMe?s:c,f=a.fromMe?c:s;let p=this.decodeJid(a.participant),m=this.decodeJid(e.participant);o.GK.supportsFeature(o.GK.F.MD_BACKEND)&&(u.default.isGroup(s)||u.default.isStatusV3(s))&&(null==p&&(null!=e.participant?p=this.decodeJid(e.participant):a.fromMe&&(p=c)),m=m||p);let _,g="in";if(c.equals(s)&&(g=a.fromMe?"out":"in"),"broadcast"===h)return void __LOG__(3)`drop: broadcast`;try{_=new d.default({fromMe:(0,n.default)(a.fromMe,"key.fromMe"),remote:s,id:(0,n.default)(a.id,"key.id"),participant:p})}catch(e){return void __LOG__(3)`drop: cannot create MsgKey: ${e.stack}`}let v=!1;(0,l.parseWMIReaction)()&&(v=e.reactions.some((e=>null!=e.text)));const C={id:_,from:f,to:h,self:g,participant:p,type:"unknown",t:e.messageTimestamp||0,ack:"fresh"===t?i.default.ACK.SENT:e.status-1,author:m,invis:!!e.ignore,star:!!e.starred,broadcast:a.fromMe&&e.broadcast,notifyName:e.pushName||"",encFilehash:this.decodeBytes(e.mediaCiphertextSha256),shareDuration:e.duration,labels:e.labels,ephemeralStartTimestamp:e.ephemeralStartTimestamp,ephemeralOutOfSync:e.ephemeralOutOfSync,bizPrivacyStatus:e.bizPrivacyStatus,verifiedBizName:e.verifiedBizName,reactions:e.reactions,hasReaction:v};return e.message?this.parseMsgProto(e.message,C,t,e.paymentInfo,e.finalLiveLocation,e.quotedPaymentInfo):this.parseMsgStubProto(e,C)}};t.default=c},13016:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r=n(a(48926)),o=n(a(41609)),l=n(a(52628)),d=a(15688),u=a(50796),c=n(a(45095)),h=n(a(33330)),f=n(a(5433)),p=a(31218),m=n(a(70257)),_=n(a(66405)),g=n(a(78496)),v=s(a(64103)),C=a(99234),S=a(7293),y=n(a(26453)),b=a(72472),E=n(a(51783)),T=a(99662),x=a(91692),M=n(a(12761)),P=n(a(68132)),A=n(a(69686)),I=a(66299),w=a(77591),k=n(a(39546)),j=a(65044),N={epochCount:0,epoch:0,epochSend:function(e){return 0===this.epochCount&&this.epoch++,e||this.epochCount++,__LOG__(2)`wap:epochCount: ${this.epochCount} epoch: ${this.epoch}`,this.epoch.toString()},epochRecv:function(){this.epochCount>0?this.epochCount--:__LOG__(3)`wap:epochRecv: NEGATIVE`,__LOG__(2)`wap:epochCount: ${this.epochCount} epoch: ${this.epoch}`},setSubProtocol:function(e){if(-1===e)this.BinaryProtocol=new f.default,this.N=this.BinaryProtocol.Node;else{if(null==e||0===e)throw __LOG__(3)`Wap:setSubProtocol unknown ${String(e)}`,new v.UpdateImmediately(`${this.version}_unknown_version`);this.BinaryProtocol=new h.default(e),this.N=this.BinaryProtocol.Node}},clearBPQueue:function(){return new Promise((e=>{this.BinaryProtocol.dropAllBecauseLogout(),e()}))},upgradeProtoVersion(e){if(e.BinaryProtocol instanceof f.default){const t=e.BinaryProtocol.getWriteQueue();for(;t.length;){const{n:e,resolve:a,reject:s}=t.shift();this.BinaryProtocol.write(e).then(a).catch(s)}}},delete:function(){this.epochCount=0,this.epoch=0},cannotReachPhone:function(){this.epochRecv()},dropIfConditionMet:function(e,t){return e.reduce((function(e,t){return e||t}),!1)?void 0:t},pruneUndefinedProps:function(e){for(const t in e){void 0===e[t]&&delete e[t]}},callFeatureFlagFun:function(e,t){if(S.GK.supportsFeature(e)){const e=[];for(let t=2;t<arguments.length;t++)e.push(arguments[t]);return this[t](...e)}},safeParseInt:function(e,t){const a=parseInt(this.N.attr(t,e),10);return Number.isNaN(a)?void 0:a},wrap:function(e){return t=>{if(t&&"object"==typeof t&&"number"==typeof t.status&&t.status>=500)return t;this.epochRecv(),e(t)}},wrap02:function(e){return function(t){if(t&&"object"==typeof t&&"number"==typeof t.status&&t.status>=500)return t;e(t)}},binWrap:function(e,t){return a=>{if(a&&"object"==typeof a&&"number"==typeof a.status){if(401===a.status)throw this.epochRecv(),new w.E401;if(a.status>=500)return a;this.epochRecv(),t(a)}else this.epochRecv(),e(a)}},binSend:(i=(0,r.default)((function*(e,t,a,s,n){const i=s.epochIneligible?a:e=>{this.epochRecv(),a(e)};delete s.epochIneligible;try{const a=yield this.BinaryProtocol.write(t);n.debugObj||(n.debugObj=t),n.metric=this.M[n.metricName],n.ackRequest=!1,s.data=a,s.binaryOpts=n,j.Socket[e](s)}catch(e){return i(e)}})),function(){return i.apply(this,arguments)}),msgGetTarget:function(e){return k.default.equals(e.from,(0,C.getMaybeMeUser)())?e.to:e.from},thumbFromMediaXml:function(e){return"raw"===this.N.attr("encoding",e)?this.N.children(e)instanceof ArrayBuffer?(0,d.encodeB64)(this.N.children(e)):"":this.N.dataStr(e)},actionNode:function(e,t,a){return["action",{type:e,epoch:this.epochSend(a)},t]},queryNode:function(e,t){let a=e;return a||(a={}),a.epoch=this.epochSend(),["query",a,t]},responseNode:function(e,t){let a=e;return a||(a={}),a.epoch=this.epochSend(),["response",a,t]},errorNode:function(e){return["error",{code:e.toString(),epoch:this.epochSend()},void 0]},actionGetMeta:function(e){const t={};if("action"!==this.N.tag(e))return t;const a=this.N.attr("add",e),s=this.N.attr("missing",e),n=this.N.attr("checksum",e);switch(a){case"unread":t.unreadId=this.N.attr("index",e),t.unreadFromMe="true"===this.N.attr("owner",e),t.unreadParticipant=this.N.attr("participant",e);case"after":case"before":case"last":t.pendingMsgsDone="true"===this.N.attr("last",e),t.resume="true"===this.N.attr("resume",e);case"relay":case"update":t.add=a}switch(s){case"remove":t.missing=s}return n&&(t.checksum=n),t},groupActionsByType:function(e){const t={};if(!Array.isArray(e))return t;let a,s;const n=e.length;for(s=0;s<n;s++)switch(a=e[s],this.N.tag(a)){case"broadcast":switch(this.N.attr("type",a)){case"create":case"add":case"remove":t.msg||(t.msg=[]),t.msg.push(a);break;case"modify":t.bcUpdate||(t.bcUpdate=[]),t.bcUpdate.push(a)}break;case"message":case"groups_v2":case"notification":case"call_log":case"security":t.msg||(t.msg=[]),t.msg.push(a);break;case"read":case"log":case"identity":t.cmd||(t.cmd=[]),t.cmd.push(a);break;case"received":t.ack||(t.ack=[]),t.ack.push(a);break;case"user":t.contact||(t.contact=[]),t.contact.push(a);break;case"contacts":t.contacts||(t.contacts=[]),t.contacts.push(a);break;case"chat":switch(this.N.attr("type",a)){case"mute":t.mute||(t.mute=[]),t.mute.push(a);break;default:t.chat||(t.chat=[]),t.chat.push(a)}break;case"battery":t.battery||(t.battery=[]),t.battery.push(a);break;case"location":t.location||(t.location=[]),t.location.push(a);break;case"label":t.label||(t.label=[]),t.label.push(a);break;case"group":t.group||(t.group=[]),t.group.push(a);break;case"quick_reply":t.quickReply||(t.quickReply=[]),t.quickReply.push(a);break;case"call":t.call||(t.call=[]),t.call.push(a);break;case"stickerPack":case"sticker_pack":t.stickerPack||(t.stickerPack=[]),t.stickerPack.push(a);break;case"recent_stickers":t.recentStickers||(t.recentStickers=[]),t.recentStickers.push(a);break;case"starred_stickers":t.starredStickers||(t.starredStickers=[]),t.starredStickers.push(a);break;case"notice":t.notice||(t.notice=[]),t.notice.push(a);break;case"archive_v2":t.archiveSetting||(t.archiveSetting=[]),t.archiveSetting.push(a);break;case"disappearing_mode":t.disappearingModeSetting||(t.disappearingModeSetting=[]),t.disappearingModeSetting.push(a);break;default:__LOG__(3,!0)`Wap:groupActionsByType unknown action: ${this.N.toString(a)}`}return t},handleResponse:function(e,t,a){if(0===e.indexOf("preempt"))switch(this.N.attr("type",t)){case"chat":{__LOG__(2)`bin-recv: ${e},response,chat`;const s=this.N.children(t)||[];if(Array.isArray(s)){const e=s.length,t=[];for(let a=0;a<e;a++){const e=this.parseChat(s[a]);e&&t.push(e)}(0,m.default)([{cmd:"preempt",response:t,binarySize:a}])}break}case"contacts":{__LOG__(2)`bin-recv: ${e},response,contact`;const s=this.N.children(t);if(Array.isArray(s)){const e=s.length,n=[];for(let t=0;t<e;t++){const e=this.parseContact(s[t]);e&&n.push(e)}(0,g.default)([{cmd:"preempt",checksum:this.N.attr("checksum",t),response:n,binarySize:a}])}break}default:__LOG__(3)`Wap:handle unknown response type: ${this.N.toString(t,!0)}`}else __LOG__(3)`Wap:handle non-preemptive response: ${this.N.toString(t,!0)}`},handleActionMsg:function(e,t,a,s){const n=s.length;switch(a.add){case"relay":case"update":{const t=this.parseMsg(s[0],"relay");if(1!==n&&__LOG__(3)`Wap:handle action msg relay length not 1`,t){__LOG__(2)`bin-recv: ${[e,"action","msg",a.add,t.type,t.from,t.to,t.id,t.author].join(",")}`;const s=this.msgGetTarget(t);(0,y.default)([{meta:a,chat:s,msg:t}])}else __LOG__(3)`Wap:handle action msg relay dropped`;break}case"last":{const i=[];for(let e=0;e<n;e++){const t=this.parseMsg(s[e],"last");t?i.push(t):__LOG__(3)`Wap:handle action msg last dropped`}if(i.length>0){__LOG__(2)`bin-recv: ${[e,"action","msg","last",s.length].join(",")}`;const n={recent:!0,meta:a,binarySize:t};for(let e=0;e<i.length;e++)n[this.msgGetTarget(i[e])]=i[e];(0,y.default)([n])}else __LOG__(3)`Wap:handle action msg last dropped to 0`;break}case"before":case"after":case"unread":if(n>0){const i=[];for(let e=0;e<n;e++){const t=this.parseMsg(s[e],a.add);t?i.push(t):__LOG__(3)`Wap:handle action msg before/after dropped`}if(i.length>0){const s=this.msgGetTarget(i[0]);__LOG__(2)`bin-recv: ${[e,"action","msg",a.add,s,i.length].join(",")}`,(0,y.default)([{meta:a,chat:s,msgs:i,binarySize:t}])}else __LOG__(3)`Wap:handle action msg ${a.add} dropped to 0`}else __LOG__(3)`Wap:handle action msg before/after 0 msgs`;break;default:__LOG__(3)`Wap:handle action msg no meta.add`}},handleAction:function(e,t,s){const n=this.actionGetMeta(t),i=this.groupActionsByType(this.N.children(t)),r=Object.keys(i);if(!Array.isArray(r))return void __LOG__(3)`Wap:handle:action keys not array: ${typeof r}`;const d=r.length;if(0!==d||"last"!==n.add)for(let u=0;u<d;u++){const d=r[u],h=i[d],f=h.length;switch(d){case"msg":this.handleActionMsg(e,s,n,h,t);break;case"cmd":for(let t=0;t<f;t++){const s=this.parseCmd(h[t]);if(s){const t=(0,l.default)(s).join(",");__LOG__(2)`bin-recv: ${[e,"action","cmd",t].join(",")}`,a(98423).handle([s])}else __LOG__(3)`Wap:handle action cmd invalid`}break;case"bcUpdate":{const t=[];for(let e=0;e<f;e++){const a=this.parseBCUpdate(h[e]);a?t.push(a):__LOG__(3)`Wap:handle action bc update invalid`}if(__LOG__(2)`bin-recv: ${[e,"action","bcUpdate",t.length].join(",")}`,t.length>0){a(63928).default.handle(t)}break}case"ack":for(let t=0;t<f;t++){const a=this.parseAck(h[t]);a?(__LOG__(2)`bin-recv: ${[e,"action","ack",a.to,a.id,a.ack].join(",")}`,(0,y.default)([a])):__LOG__(3)`Wap:handle action ack invalid`}break;case"contact":{const t=[];for(let e=0;e<f;e++){const a=this.parseContact(h[e]);a?t.push(a):__LOG__(3)`Wap:handle action contact dropped`}if(__LOG__(2)`bin-recv: ${[e,"action","contact",t.length,n.missing].join(",")}`,t.length>0){const e=[t];(n.missing||n.checksum)&&e.push(n),(0,g.default)(e)}break}case"contacts":{const t=this.parseContacts(h[0]);__LOG__(2)`bin-recv: ${[e,"action","contacts"].join(",")}`,t?(0,g.default)([t]):__LOG__(3)`Wap:handle:action:contacts dropped`;break}case"chat":{const t=[];for(let e=0;e<f;e++){const a=this.parseChat(h[e]);a?t.push(a):__LOG__(3)`Wap:handle action chat dropped`}__LOG__(2)`bin-recv: ${[e,"action","chat",t.length].join(",")}`,t.length>0&&(0,m.default)([t]);break}case"battery":{const t=this.parseBattery(h[0]);t?(__LOG__(2)`bin-recv: ${[e,"action","battery",t.battery,t.plugged].join(",")}`,(0,_.default)([t])):__LOG__(3)`Wap:handle action battery dropped`;break}case"mute":{const t=[];for(let e=0;e<f;e++){const a=this.parseChat(h[e]);a?t.push(a):__LOG__(3)`Wap:handle action mute dropped`}__LOG__(2)`bin-recv: ${[e,"action","mute",t.length].join(",")}`,t.length>0&&b.MuteCollection.handle(t);break}case"location":{const t=[];for(let s=0;s<f;s++){const n=this.parseLocation(h[s]);n?t.push(n):__LOG__(3)`Wap:handle:location dropped`,__LOG__(2)`bin-recv:${[e,"action,location",t.length].join()}`,t.length>0&&a(85865).LiveLocationCollection.handle(t)}break}case"label":{const t=[];for(let s=0;s<f;s++){const i=this.callFeatureFlagFun(S.GK.F.LABELS_DISPLAY,"parseLabel",h[s]);i?t.push(i):__LOG__(3)`Wap:handle:label dropped`,__LOG__(2)`bin-recv:${[e,"action,label",t.length].join()}`,t.length>0&&a(16770).LabelCollection.handle({checksum:n.checksum,labels:t})}break}case"group":for(let t=0;t<f;t++){const s=this.callFeatureFlagFun(S.GK.F.GROUPS_V_4_JOIN_PERMISSION,"parseInviteUpdate",h[t]);if(__LOG__(2)`bin-recv:${[e,"action,group_v4_pending_invites",null==s?void 0:s.length].join()}`,void 0!==s){a(63928).default.handlePendingInvite({gid:s.gid,participants:s.participants})}}break;case"quickReply":{const t=[];for(let a=0;a<f;a++){const s=this.callFeatureFlagFun(S.GK.F.QUICK_REPLIES_QUERY,"parseQuickReply",h[a]);s?t.push(s):__LOG__(3)`Wap:handle:quickReply dropped`,__LOG__(2)`bin-recv:${[e,"action,quickReply",t.length].join()}`,t.length>0&&T.QuickReplyCollection.handle({checksum:n.checksum,quickReplies:t})}break}case"call":{const t=this.callFeatureFlagFun(S.GK.F.VOIP_INDIVIDUAL_INCOMING,"parseCall",h[0]);__LOG__(2)`bin-recv:${[e,"action","call"].join()}`,t?p.CallCollection.handle([t]):__LOG__(3)`Wap:handle:action:call dropped`;break}case"stickerPack":case"sticker_pack":{const t=[];for(let a=0;a<f;a++){const s=this.callFeatureFlagFun(S.GK.F.STICKER_PACK_QUERY,"parseStickerPackUpdate",h[a]);s?(t.push(s),I.StickerPackCollection.sync(n.checksum)):__LOG__(3)`Wap:handle:stickerPack dropped`,__LOG__(2)`bin-recv:${[e,"action,stickerPack",t.length].join()}`}break}case"recentStickers":if(S.GK.isRecentStickersEnabled())for(let t=0;t<f;t++){const a=(0,M.default)(h[t],this.N);a?(x.RecentStickerCollection.setChecksum(n.checksum),x.RecentStickerCollection.remove(a),__LOG__(2)`bin-recv:${[e,"action,recentStickers",a].join()}`):__LOG__(3)`Wap:handle:recentStickers dropped`}break;case"starredStickers":if(S.GK.isStarredStickersEnabled())for(let t=0;t<f;t++){const s=(0,A.default)(h[t],this.N);if(s){const{type:t,filehash:n,sticker:i}=s,r=a(16774).StarredStickerCollection;switch(t){case"add":r.add((0,c.default)(i,"sticker"),{at:0,sort:!1},!0);break;case"delete":r.remove(n)}__LOG__(2)`bin-recv:${[e,"action,starredStickers",t,n].join()}`}else __LOG__(3)`Wap:handle:starredStickers dropped`}break;case"notice":{const t=[];for(let a=0;a<f;a++){const s=this.callFeatureFlagFun(S.GK.F.USER_NOTICE,"parseNotice",h[a]);s?!(0,o.default)(s)&&t.push(s):__LOG__(3)`Wap:handle:notice dropped`,__LOG__(2)`bin-recv:${[e,"action,notice",t.length].join()}`,E.default.handleResponse(t)}break}case"archiveSetting":for(let t=0;t<f;t++){const a=this.callFeatureFlagFun(S.GK.F.SETTINGS_SYNC,"parseSetting",h[t]);a||__LOG__(3)`Wap:handle:setting dropped`,__LOG__(2)`bin-recv:${[e,"action,setting,archive"].join()}`,P.default.handleResponse([a])}break;case"disappearingModeSetting":for(let t=0;t<f;t++){const a=this.callFeatureFlagFun(S.GK.F.SETTINGS_SYNC,"parseSetting",h[t]);a||__LOG__(3)`Wap:handle:setting dropped`,__LOG__(2)`bin-recv:${[e,"action,setting,disappearing_mode"].join()}`,P.default.handleResponse([a])}break;default:__LOG__(3)`Wap:handle action unknown ${d}`}}else(0,y.default)([{recent:!0,meta:n,binarySize:s}])},handleQuery:function(e,t){const a=this.N.children(t);if(Array.isArray(a))for(let t=0;t<a.length;t++){const s=a[t],n=this.N.tag(s);let i;switch(__LOG__(2)`bin-recv:${[e,"query",n].join()}`,n){case"call":i=this.callFeatureFlagFun(S.GK.F.VOIP_INDIVIDUAL_INCOMING,"handleCallQuery",s);break;default:__LOG__(3)`wap:handle:query unknown ${n}`}i||(i=Promise.resolve(this.errorNode(501))),i.then((t=>{this.BinaryProtocol.write(t).then((a=>{j.Socket.send({tag:e,data:a,onSend:this.wrap((()=>{})),onDrop:this.wrap((()=>{})),retryOn5xx:!0,binaryOpts:{debugString:["response",n].join(),debugObj:t,metricName:"QUERY_RESPONSE",ackRequest:!0}})})).catch((()=>{this.epochRecv()}))}))}},handle:function(e,t,s,n){return this.BinaryProtocol.read(e).then((e=>{switch(this.N.tag(e)){case"response":this.handleResponse(s,e,n,t);break;case"action":this.handleAction(s,e,n,t);break;case"query":this.handleQuery(s,e,n);break;case"read":const i=this.parseCmd(e);if(i){const e=(0,l.default)(i).join();__LOG__(2)`bin-recv:${[s,"action",e].join()}`,a(98423).handle([i])}else __LOG__(3)`Wap:handle read invalid`;break;default:__LOG__(3,!0)`TODO ${this.N.toString(e,!0)}`}return!0})).catch((0,u.filteredCatch)(w.LogoutDrop,(e=>{__LOG__(3)`LogoutDrop error: ${e.toString()}`}))).catch((e=>{throw __LOG__(2)`BinaryProtocol read error with tag ${s}, size: ${n}`,__LOG__(2)`BinaryProtocol read error stack: ${e.stack||""}`,new Error(`BinaryProtocol read error: ${e}`)}))}};t.default=N},5433:(e,t,a)=>{"use strict";var s=a(95318),n=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(64103)),r=s(a(36129)),o=a(77591);var l=class{constructor(){this._writeQueue=[],this.Node=r.default}read(){return __LOG__(3)`Attempted to call \`read\` on BinaryProtocolQueue`,Promise.reject(new i.Disconnected)}write(e){return new Promise(((t,a)=>{this._writeQueue.push({resolve:t,reject:a,n:e})}))}dropAllBecauseLogout(){const e=new o.LogoutDrop("cancelled binary protocol call");for(;this._writeQueue.length;){this._writeQueue.shift().reject(e)}}getWriteQueue(){return this._writeQueue}};t.default=l},33330:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(48926)),r=n(a(91747)),o=n(a(30236)),l=a(20461),d=n(a(18629)),u=n(a(42916)),c=n(a(94569)),h=n(a(86968)),f=n(a(11801)),p=n(a(14857)),m=n(a(25327)),_=n(a(60039)),g=s(a(64103)),v=a(7293),C=n(a(2434)),S=n(a(60569)),y=n(a(10853)),b=n(a(53995)),E=n(a(893)),T=n(a(69171));const x=(e,t)=>{if(Array.isArray(e)&&t)return e.concat(t)},M=(e,t)=>{if(e.Dictionary){const a={};(0,o.default)(a,t.Dictionary,e.Dictionary,x),e.Dictionary=a}return(0,r.default)(e,t)},P={OutputStream:S.default,Writer:E.default,InputStream:C.default,Reader:y.default,Dictionary:u.default,Crypto:d.default},A=M({Dictionary:c.default},P),I=M({Dictionary:h.default},A),w=M({Dictionary:f.default},I),k=M({Dictionary:p.default},w),j=M({Dictionary:m.default},k),N=M({Writer:T.default,Reader:b.default,Dictionary:_.default},j),O={"01":!0,"03":!0,"04":!0,"05":!0,"06":!0,v1:!0,v2:!0,v3:!0,v4:!0},R={v5:P,v6:A,v7:I,v8:w,v9:k,v10:j,v11:N};t.default=class{constructor(e){const t="number"==typeof e?`v${e}`:e;if(O[t])throw __LOG__(3)`binaryProtocol deprecated version: ${t}`,new g.DeprecatedProtocolVersion("bp_deprecated_version");const s=R[t];if(!s)throw __LOG__(3)`binaryProtocol unknown version: ${t}`,new g.UpdateImmediately("bp_unknown_version");const n=s.OutputStream,r=new s.Writer(s.Dictionary),o=s.InputStream,d=new s.Reader(s.Dictionary),u=s.Crypto;this.Node=a(36129).default,v.GK.supportsFeature(v.GK.F.MD_BACKEND)?this.read=e=>Promise.resolve(d.readNode(new o(e))):this.read=function(){var e=(0,i.default)((function*(e){const t=yield u.decrypt(e);return d.readNode(new o(t))}));return function(){return e.apply(this,arguments)}}(),this.write=(0,l.promiseWrapSync)((e=>{const t=new n;return r.writeNode(t,e),u.encrypt(t.toBuffer())})),this.dropAllBecauseLogout=()=>u.dropAllBecauseLogout()}}},25327:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={singleByte:["vname","old_jid","new_jid","announcement","locked","prop","label","color","call","offer","call-id"]}},26362:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={STREAM_END:2,LIST_EMPTY:0,DICTIONARY_0:236,DICTIONARY_1:237,DICTIONARY_2:238,DICTIONARY_3:239,JID_AD:247,LIST_8:248,LIST_16:249,JID_PAIR:250,HEX_8:251,BINARY_8:252,BINARY_20:253,BINARY_32:254,NIBBLE_8:255,SINGLE_BYTE_MAX:256,PACKED_MAX:254}},60039:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={singleByte:["quick_reply","sticker","pay_t","accept","reject","sticker_pack","invalid","canceled","missed","connected","result","audio","video","recent"]}},53995:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let t="",a="";const s=e.singleByte,r=e.doubleByte,l=e.nibbleDecode;this.readNode=function(e){let a=e.readByte();const s=this.readListSize(e,a);if(a=e.readByte(),a===n.default.STREAM_END)throw new Error("unexpected stream end "+e.debugInfo());const i=this.readString(e,a);if(t=i,0===s||!i)throw new Error("invalid node. 0 list or empty tag"+e.debugInfo());const r=this.readAttributes(e,s-2+s%2>>1);if(s%2==1)return[i,r,void 0];{let t;if(a=e.readByte(),this.isListTag(a))t=this.readList(e,a);else if(a===n.default.BINARY_8){const a=e.readByte();t=e.readBytes(a)}else if(a===n.default.BINARY_20){const a=e.readInt20();t=e.readBytes(a)}else if(a===n.default.BINARY_32){const a=e.readInt32();t=e.readBytes(a)}else t=this.readString(e,a);return[i,r,t]}},this.isListTag=function(e){return e===n.default.LIST_EMPTY||e===n.default.LIST_8||e===n.default.LIST_16},this.readListSize=function(e,t){if(t===n.default.LIST_EMPTY)return 0;if(t===n.default.LIST_8)return e.readByte();if(t===n.default.LIST_16)return e.readInt16();throw new Error("invalid list size "+e.debugInfo())},this.readString=function(e,s){let r,l=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(-1===s)throw new Error("invalid start token readString"+e.debugInfo());if(s>2&&s<236){let e=this.getToken(s);return"s.whatsapp.net"===e&&(e="c.us"),e}switch(s){case n.default.DICTIONARY_0:case n.default.DICTIONARY_1:case n.default.DICTIONARY_2:case n.default.DICTIONARY_3:const d=e.readByte();return this.getTokenDouble(s-n.default.DICTIONARY_0,d);case n.default.LIST_EMPTY:return;case n.default.BINARY_8:return r=e.readString(e.readByte()),this.isAttr&&l&&i.default.isWid(r)?o(r):r;case n.default.BINARY_20:return r=e.readString(e.readInt20()),this.isAttr&&l&&i.default.isWid(r)?o(r):r;case n.default.BINARY_32:return r=e.readString(e.readInt32()),this.isAttr&&l&&i.default.isWid(r)?o(r):r;case n.default.JID_PAIR:{const t=this.readString(e,e.readByte()),a=this.readString(e,e.readByte());if(void 0!==t&&void 0!==a){const e=t+"@"+a;return l&&i.default.isWid(e)?o(e):e}if(void 0!==a)return a;throw new Error("invalid jid "+t+","+a+" "+e.debugInfo())}case n.default.JID_AD:{const t=e.readByte(),a=e.readByte(),s=this.readString(e,e.readByte());if(void 0!==s)return o(t&&a?s+"."+t+":"+a+"@c.us":t?s+"."+t+"@c.us":a?s+":"+a+"@c.us":s+"@c.us");throw new Error(`invalid JID_AD agent:${t} device:${a} user:${s}`)}case n.default.NIBBLE_8:case n.default.HEX_8:return this.readPacked8(s,e);default:throw __LOG__(2,!0)`Unexpected token in binary protocol read. Token : ${s}
lastTag: ${t}
lastAttributeKey: ${a}
${e.debugInfoWithPadding()}`,new Error("invalid string "+s)}},this.getToken=function(e){let t;if(e>=0&&e<s.length&&(t=s[e]),void 0===t)throw new Error("invalid token "+e);return t},this.getTokenDouble=function(e,t){let a;const s=256*e+t;if(s>=0&&s<r.length&&(a=r[s]),void 0===a)throw new Error("invalid double byte token "+e+" "+t);return a},this.readAttributes=function(e,t){let s,n;this.isAttr=!0;const r=t?{}:void 0;for(let o=0;o<t;o++)s=this.readString(e,e.readByte()),a=s,n=this.readString(e,e.readByte(),i.default.canBeWid(s)),r[s]=n;return this.isAttr=!1,r},this.readList=function(e,t){const a=[],s=this.readListSize(e,t);for(let t=0;t<s;t++)a.push(this.readNode(e));return a},this.readPacked8=function(e,t){const a=t.readByte();let s="";for(let n=0;n<(127&a);n++){const a=t.readByte();s+=this.unpackByte(e,(240&a)>>4),s+=this.unpackByte(e,15&a)}return a>>7&&(s=s.substring(0,s.length-1)),s},this.unpackByte=function(e,t){switch(e){case n.default.NIBBLE_8:return this.unpackNibble(t);case n.default.HEX_8:return this.unpackHex(t);default:throw new Error("unpack non-nibble/hex type: "+e)}},this.unpackNibble=function(e){if(!l.hasOwnProperty(e))throw new Error("invalid nibble to unpack: "+e);return l[e]},this.unpackHex=function(e){if(e>=0&&e<=15)return e.toString(16).toUpperCase();throw new Error("invalid hex to unpack: "+e)}};var n=s(a(26362)),i=s(a(39546)),r=a(58021);function o(e){try{return(0,r.createWid)(e)}catch(t){return e}}},69171:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let t;const a={},s=e.nibbleEncode;for(t=0;t<e.singleByte.length;t++)e.singleByte[t]&&(a[e.singleByte[t]]=t);for(t=0;t<e.doubleByte.length;t++)e.doubleByte[t]&&(a[e.doubleByte[t]]=t+i.default.SINGLE_BYTE_MAX);this.writeNode=function(e,t){if(!t)return;if(3!==t.length)throw new Error("invalid node");const a=t[1]?2*Object.keys(t[1]).filter((function(e){return!!t[1][e]})).length:0;this.writeListStart(e,1+a+(t[2]?1:0)),this.writeString(e,t[0]),this.writeAttributes(e,t[1]),this.writeChildren(e,t[2])},this.writeString=function(e,t,s){if("string"!=typeof t&&!(t instanceof r.default))throw __LOG__(3)`writer:writeString passed non-string/wid type: ${typeof t}`,new Error("invalid string");if(t instanceof r.default)return void this.writeJid(e,t);const n=a.hasOwnProperty(t)?a[t]:void 0;let l,d;if("c.us"!==t||s)if(void 0===n){if(t.indexOf("@")<1)this.writeStringRaw(e,t);else try{const a=(0,o.createWid)(t);this.writeJid(e,a)}catch(a){this.writeStringRaw(e,t)}}else{if(n<i.default.SINGLE_BYTE_MAX)this.writeToken(e,n);else{const e=n-i.default.SINGLE_BYTE_MAX;switch(d=e%256,e>>8){case 0:l=i.default.DICTIONARY_0;break;case 1:l=i.default.DICTIONARY_1;break;case 2:l=i.default.DICTIONARY_2;break;case 3:l=i.default.DICTIONARY_3;break;default:throw new Error("double byte dictionary token out of range: "+t+" "+n)}}this.writeToken(e,l),this.writeToken(e,d)}else this.writeToken(e,a["s.whatsapp.net"])},this.writeStringRaw=function(e,t){const a=(0,n.numUtf8Bytes)(t);if(a>=4294967296)throw new Error("string too large to encode (len = "+a+"): "+t);a>=1<<20?(e.pushByte(i.default.BINARY_32),e.pushInt32(a)):a>=256?(e.pushByte(i.default.BINARY_20),e.pushInt20(a)):(e.pushByte(i.default.BINARY_8),e.pushByte(a)),e.pushString(t)},this.writeJid=function(e,t){const a=t.user,s=t.server,n=t.agent,r=t.device;if(n||r){if(n>255||r>255||"c.us"!==s&&"s.whatsapp.net"!==s)throw new Error(`invalid agent:${n} or device:${r} or server:${s} for wid ${t.toString()}`);e.pushByte(i.default.JID_AD),e.pushByte(n||0),e.pushByte(r||0),a?this.writePackedBytesStringFallback(e,a):this.writeToken(e,i.default.LIST_EMPTY)}else e.pushByte(i.default.JID_PAIR),a?this.writePackedBytesStringFallback(e,a):this.writeToken(e,i.default.LIST_EMPTY),this.writeString(e,s)},this.writeToken=function(e,t){if(t<245)e.pushByte(t);else if(t<=500)throw new Error("invalid token")},this.writeAttributes=function(e,t){if(t){this.isAttr=!0;for(const a in t)t[a]&&(this.writeString(e,a),this.writeString(e,t[a]));this.isAttr=!1}},this.writeChildren=function(e,t){let a;if(t)if("string"==typeof t)this.writeString(e,t,!0);else if(t instanceof ArrayBuffer){if(a=t.byteLength,a>=4294967296)throw new Error("invalid children; too long (len = "+a);a>=1<<20?(e.pushByte(i.default.BINARY_32),e.pushInt32(a)):a>=256?(e.pushByte(i.default.BINARY_20),e.pushInt20(a)):(e.pushByte(i.default.BINARY_8),e.pushByte(a)),e.pushBytes(t)}else{if(!Array.isArray(t))throw new Error("invalid children");a=t.length,this.writeListStart(e,a);for(let s=0;s<a;s++)this.writeNode(e,t[s])}},this.writeListStart=function(e,t){0===t?e.pushByte(i.default.LIST_EMPTY):t<256?(e.pushByte(i.default.LIST_8),e.pushByte(t)):(e.pushByte(i.default.LIST_16),e.pushInt16(t))},this.writePackedBytesStringFallback=function(e,t){try{this.writePackedBytes(e,t)}catch(a){__LOG__(3,!0)`writer:encode-fallback "${a.message}"`,this.writeString(e,t)}},this.writePackedBytes=function(e,t){try{this.writePackedBytesImpl(e,t,i.default.NIBBLE_8)}catch(a){__LOG__(3)`writer:enc nib fail, try hex "${a.message}"`,this.writePackedBytesImpl(e,t,i.default.HEX_8)}},this.writePackedBytesImpl=function(e,t,a){const s=(0,n.numUtf8Bytes)(t);if(s>i.default.PACKED_MAX)throw new Error("too many bytes to nibble-encode: len = "+s);{const n=Math.ceil(s/2),i=[];let r,o=0;s%2>0&&(o=128);const l=o|n;i.push(a),i.push(l);const d=Math.floor(s/2);for(let e=0;e<d;e++)r=this.packBytePair(a,t[2*e],t[2*e+1]),i.push(r);o>0&&(r=this.packBytePair(a,t[s-1],"\0"),i.push(r));const u=new Uint8Array(i);e.pushUint8Array(u)}},this.packBytePair=function(e,t,a){let s,n;switch(e){case i.default.NIBBLE_8:s=this.packNibble(t),n=this.packNibble(a);break;case i.default.HEX_8:s=this.packHex(t),n=this.packHex(a);break;default:throw new Error("invalid byte pack type: "+e)}return s<<4|n},this.packNibble=function(e){if(!s.hasOwnProperty(e))throw new Error("invalid byte to nibble-pack: "+e);return s[e]},this.packHex=function(e){switch(e){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"A":case"B":case"C":case"D":case"E":case"F":return parseInt(e,16);case"\0":return 15;default:throw new Error("packHex:invalid byte: "+e)}}};var n=a(8584),i=s(a(26362)),r=s(a(39546)),o=a(58021)},41769:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={STREAM_END:2,LIST_EMPTY:0,DICTIONARY_0:236,DICTIONARY_1:237,DICTIONARY_2:238,DICTIONARY_3:239,LIST_8:248,LIST_16:249,JID_PAIR:250,HEX_8:251,BINARY_8:252,BINARY_20:253,BINARY_32:254,NIBBLE_8:255,SINGLE_BYTE_MAX:256,PACKED_MAX:254}},18629:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(45095)),r=a(69830),o=n(a(89748)),l=s(a(17117)),d=a(77591);class u{static encrypt(e){if(!e)return Promise.reject(new Error("Missing ArrayBuffer in cryptoAsync:encrypt"));const t=l.get(),a=(0,r.encryptAndMac)((0,i.default)(t.encKey,"bundle.encKey"),(0,i.default)(t.macKey,"bundle.macKey"),e);return this._encryptQueue.enqueue(a)}static decrypt(e){if(!e)return Promise.reject(new Error("Missing ArrayBuffer in cryptoAsync:decrypt"));const t=l.get(),a=(0,r.macAndDecrypt)((0,i.default)(t.encKey,"bundle.encKey"),(0,i.default)(t.macKey,"bundle.macKey"),e);return this._decryptQueue.enqueue(a)}static dropAllBecauseLogout(){const e=new d.LogoutDrop("cancelled binary protocol call");this._encryptQueue.cancelAll(e),this._decryptQueue.cancelAll(e)}}t.default=u,u._encryptQueue=new o.default,u._decryptQueue=new o.default},42916:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={singleByte:[void 0,void 0,void 0,"200","400","404","500","501","502","action","add","after","archive","author","available","battery","before","body","broadcast","chat","clear","code","composing","contacts","count","create","debug","delete","demote","duplicate","encoding","error","false","filehash","from","g.us","group","groups_v2","height","id","image","in","index","invis","item","jid","kind","last","leave","live","log","media","message","mimetype","missing","modify","name","notification","notify","out","owner","participant","paused","picture","played","presence","preview","promote","query","raw","read","receipt","received","recipient","recording","relay","remove","response","resume","retry","s.whatsapp.net","seconds","set","size","status","subject","subscribe","t","text","to","true","type","unarchive","unavailable","url","user","value","web","width","mute","read_only","admin","creator","short","update","powersave","checksum","epoch","block","previous","409","replaced","reason","spam","modify_tag","message_info","delivery","emoji","title","description","canonical-url","matched-text","star","unstar","media_key","filename","identity","unread","page","page_count","search","media_message","security","call_log","profile"],doubleByte:[],nibbleEncode:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,"-":10,".":11,"\0":15},nibbleDecode:{0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"-",11:".",15:"\0"}};t.default=a},2434:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(8584);t.default=class{constructor(e){this.binary=new s.Binary(e)}readByte(){return this.binary.readUint8()}readInt16(){return this.binary.readUint16()}readInt20(){return((15&this.binary.readUint8())<<16)+(this.binary.readUint8()<<8)+this.binary.readUint8()}readInt32(){return this.binary.readUint32()}readString(e){return this.binary.readString(e)}readBytes(e){return this.binary.readBuffer(e)}debugInfo(){const e=this.binary;return`offset: ${e._readIndex} byte: ${e._buffer[e._readIndex]}`}debugInfoWithPadding(){const e=this.binary,t=e._buffer.slice(Math.max(0,e._readIndex-20),e._readIndex).toString(),a=e._buffer.slice(e._readIndex,Math.min(e._buffer.length,e._readIndex+20)).toString();return`offset: ${e._readIndex} byte: ${e._buffer[e._readIndex]} previous 20 bytes: ${t}\n        following 20 bytes: ${a}\n        `}}},60569:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(8584);t.default=class{constructor(){this.buf=new s.Binary}pushInt16(e){this.buf.writeUint16(e)}pushInt20(e){if("number"!=typeof e)throw new Error("invalid int20");this.buf.writeUint8((983040&e)>>16),this.buf.writeUint16(65535&e)}pushInt32(e){this.buf.writeUint32(e)}pushByte(e){this.buf.writeUint8(e)}pushBytes(e){if(!(e instanceof ArrayBuffer))throw new Error("invalid byte buffer");this.buf.writeBuffer(e)}pushUint8Array(e){if("[object Uint8Array]"!==Object.prototype.toString.call(e))throw new Error("invalid Uint8Array");this.buf.writeByteArray(e)}pushString(e){if("string"!=typeof e)throw new Error("invalid string");this.buf.writeString(e)}toBuffer(){return this.buf.readBuffer()}}},10853:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let t="",a="";const s=e.singleByte,r=e.doubleByte,l=e.nibbleDecode;this.readNode=function(e){let a=e.readByte();const s=this.readListSize(e,a);if(a=e.readByte(),a===n.default.STREAM_END)throw new Error("unexpected stream end "+e.debugInfo());const i=this.readString(e,a);if(0===s||!i)throw new Error("invalid node. 0 list or empty tag"+e.debugInfo());t=i;const r=this.readAttributes(e,s-2+s%2>>1);if(s%2==1)return[i,r,void 0];{let t;if(a=e.readByte(),this.isListTag(a))t=this.readList(e,a);else if(a===n.default.BINARY_8){const a=e.readByte();t=e.readBytes(a)}else if(a===n.default.BINARY_20){const a=e.readInt20();t=e.readBytes(a)}else if(a===n.default.BINARY_32){const a=e.readInt32();t=e.readBytes(a)}else t=this.readString(e,a);return[i,r,t]}},this.isListTag=function(e){return e===n.default.LIST_EMPTY||e===n.default.LIST_8||e===n.default.LIST_16},this.readListSize=function(e,t){if(t===n.default.LIST_EMPTY)return 0;if(t===n.default.LIST_8)return e.readByte();if(t===n.default.LIST_16)return e.readInt16();throw new Error("invalid list size "+e.debugInfo())},this.readString=function(e,s){let r,l=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(-1===s)throw new Error("invalid start token readString"+e.debugInfo());if(s>2&&s<236){let e=this.getToken(s);return"s.whatsapp.net"===e&&(e="c.us"),e}switch(s){case n.default.DICTIONARY_0:case n.default.DICTIONARY_1:case n.default.DICTIONARY_2:case n.default.DICTIONARY_3:const d=e.readByte();return this.getTokenDouble(s-n.default.DICTIONARY_0,d);case n.default.LIST_EMPTY:return;case n.default.BINARY_8:return r=e.readString(e.readByte()),this.isAttr&&l&&i.default.isWid(r)?o(r):r;case n.default.BINARY_20:return r=e.readString(e.readInt20()),this.isAttr&&l&&i.default.isWid(r)?o(r):r;case n.default.BINARY_32:return r=e.readString(e.readInt32()),this.isAttr&&l&&i.default.isWid(r)?o(r):r;case n.default.JID_PAIR:const u=this.readString(e,e.readByte()),c=this.readString(e,e.readByte());if(void 0!==u&&void 0!==c){const e=u+"@"+c;return l&&i.default.isWid(e)?o(e):e}if(void 0!==c)return c;throw new Error("invalid jid "+u+","+c+" "+e.debugInfo());case n.default.NIBBLE_8:case n.default.HEX_8:return this.readPacked8(s,e);default:throw __LOG__(2,!0)`Unexpected token in binary protocol read. Token : ${s}
lastTag: ${t}
lastAttributeKey: ${a}
${e.debugInfoWithPadding()}`,new Error("invalid string "+s)}},this.getToken=function(e){let t;if(e>=0&&e<s.length&&(t=s[e]),void 0===t)throw new Error("invalid token "+e);return t},this.getTokenDouble=function(e,t){let a;const s=256*e+t;if(s>=0&&s<r.length&&(a=r[s]),void 0===a)throw new Error("invalid double byte token "+e+" "+t);return a},this.readAttributes=function(e,t){let s,n;this.isAttr=!0;const r=t?{}:void 0;for(let o=0;o<t;o++)s=this.readString(e,e.readByte()),a=s,n=this.readString(e,e.readByte(),i.default.canBeWid(s)),r[s]=n;return this.isAttr=!1,r},this.readList=function(e,t){const a=[],s=this.readListSize(e,t);for(let t=0;t<s;t++)a.push(this.readNode(e));return a},this.readPacked8=function(e,t){const a=t.readByte();let s="";for(let n=0;n<(127&a);n++){const a=t.readByte();s+=this.unpackByte(e,(240&a)>>4),s+=this.unpackByte(e,15&a)}return a>>7&&(s=s.substring(0,s.length-1)),s},this.unpackByte=function(e,t){switch(e){case n.default.NIBBLE_8:return this.unpackNibble(t);case n.default.HEX_8:return this.unpackHex(t);default:throw new Error("unpack non-nibble/hex type: "+e)}},this.unpackNibble=function(e){if(!l.hasOwnProperty(e))throw new Error("invalid nibble to unpack: "+e);return l[e]},this.unpackHex=function(e){if(e>=0&&e<=15)return e.toString(16).toUpperCase();throw new Error("invalid hex to unpack: "+e)}};var n=s(a(41769)),i=s(a(39546)),r=a(58021);function o(e){try{return(0,r.createWid)(e)}catch(t){return e}}},893:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let t;const a={},s=e.nibbleEncode;for(t=0;t<e.singleByte.length;t++)e.singleByte[t]&&(a[e.singleByte[t]]=t);for(t=0;t<e.doubleByte.length;t++)e.doubleByte[t]&&(a[e.doubleByte[t]]=t+i.default.SINGLE_BYTE_MAX);this.writeNode=function(e,t){if(!t)return;if(3!==t.length)throw new Error("invalid node");const a=t[1]?2*Object.keys(t[1]).filter((function(e){return!!t[1][e]})).length:0;this.writeListStart(e,1+a+(t[2]?1:0)),this.writeString(e,t[0]),this.writeAttributes(e,t[1]),this.writeChildren(e,t[2])},this.writeString=function(e,t,s){if("string"!=typeof t&&!(t instanceof r.default))throw __LOG__(3)`writer:writeString passed non-string/wid type: ${typeof t}`,new Error("invalid string");if(t instanceof r.default)return void this.writeJid(e,t.user,t.server);const n=a.hasOwnProperty(t)?a[t]:void 0;let o,l;if("c.us"!==t||s)if(void 0===n){const a=t.indexOf("@");if(a<1)this.writeStringRaw(e,t);else{const s=t.substring(0,a),n=t.substring(a+1);this.writeJid(e,s,n)}}else{if(n<i.default.SINGLE_BYTE_MAX)this.writeToken(e,n);else{const e=n-i.default.SINGLE_BYTE_MAX;switch(l=e%256,e>>8){case 0:o=i.default.DICTIONARY_0;break;case 1:o=i.default.DICTIONARY_1;break;case 2:o=i.default.DICTIONARY_2;break;case 3:o=i.default.DICTIONARY_3;break;default:throw new Error("double byte dictionary token out of range: "+t+" "+n)}}this.writeToken(e,o),this.writeToken(e,l)}else this.writeToken(e,a["s.whatsapp.net"])},this.writeStringRaw=function(e,t){const a=(0,n.numUtf8Bytes)(t);if(a>=4294967296)throw new Error("string too large to encode (len = "+a+"): "+t);a>=1<<20?(e.pushByte(i.default.BINARY_32),e.pushInt32(a)):a>=256?(e.pushByte(i.default.BINARY_20),e.pushInt20(a)):(e.pushByte(i.default.BINARY_8),e.pushByte(a)),e.pushString(t)},this.writeJid=function(e,t,a){if(e.pushByte(i.default.JID_PAIR),t)try{this.writePackedBytes(e,t)}catch(a){__LOG__(3,!0)`writer:encode-fallback "${a.message}"`,this.writeString(e,t)}else this.writeToken(e,i.default.LIST_EMPTY);this.writeString(e,a)},this.writeToken=function(e,t){if(t<245)e.pushByte(t);else if(t<=500)throw new Error("invalid token")},this.writeAttributes=function(e,t){if(t){this.isAttr=!0;for(const a in t)t[a]&&(this.writeString(e,a),this.writeString(e,t[a]));this.isAttr=!1}},this.writeChildren=function(e,t){let a;if(t)if("string"==typeof t)this.writeString(e,t,!0);else if(t instanceof ArrayBuffer){if(a=t.byteLength,a>=4294967296)throw new Error("invalid children; too long (len = "+a);a>=1<<20?(e.pushByte(i.default.BINARY_32),e.pushInt32(a)):a>=256?(e.pushByte(i.default.BINARY_20),e.pushInt20(a)):(e.pushByte(i.default.BINARY_8),e.pushByte(a)),e.pushBytes(t)}else{if(!Array.isArray(t))throw new Error("invalid children");a=t.length,this.writeListStart(e,a);for(let s=0;s<a;s++)this.writeNode(e,t[s])}},this.writeListStart=function(e,t){0===t?e.pushByte(i.default.LIST_EMPTY):t<256?(e.pushByte(i.default.LIST_8),e.pushByte(t)):(e.pushByte(i.default.LIST_16),e.pushInt16(t))},this.writePackedBytes=function(e,t){try{this.writePackedBytesImpl(e,t,i.default.NIBBLE_8)}catch(a){__LOG__(3)`writer:enc nib fail, try hex "${a.message}"`,this.writePackedBytesImpl(e,t,i.default.HEX_8)}},this.writePackedBytesImpl=function(e,t,a){const s=(0,n.numUtf8Bytes)(t);if(s>i.default.PACKED_MAX)throw new Error("too many bytes to nibble-encode: len = "+s);{const n=Math.ceil(s/2),i=[];let r,o=0;s%2>0&&(o=128);const l=o|n;i.push(a),i.push(l);const d=Math.floor(s/2);for(let e=0;e<d;e++)r=this.packBytePair(a,t[2*e],t[2*e+1]),i.push(r);o>0&&(r=this.packBytePair(a,t[s-1],"\0"),i.push(r));const u=new Uint8Array(i);e.pushUint8Array(u)}},this.packBytePair=function(e,t,a){let s,n;switch(e){case i.default.NIBBLE_8:s=this.packNibble(t),n=this.packNibble(a);break;case i.default.HEX_8:s=this.packHex(t),n=this.packHex(a);break;default:throw new Error("invalid byte pack type: "+e)}return s<<4|n},this.packNibble=function(e){if(!s.hasOwnProperty(e))throw new Error("invalid byte to nibble-pack: "+e);return s[e]},this.packHex=function(e){switch(e){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"A":case"B":case"C":case"D":case"E":case"F":return parseInt(e,16);case"\0":return 15;default:throw new Error("packHex:invalid byte: "+e)}}};var n=a(8584),i=s(a(41769)),r=s(a(39546))},94569:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={singleByte:["ciphertext","invite"]}},86968:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={singleByte:["gif","vcard","frequent"]}},11801:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={singleByte:["privacy","blacklist","whitelist","verify"]}},14857:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={singleByte:["location","document","elapsed","revoke_invite","expiration","unsubscribe","disable"]}},68953:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={sendConversationDismissChangeNumber:function(e){return this.sendConversationOpWithKey("modify",e,void 0,void 0)}};t.default=a},82497:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={queryDisappearingMode:function(e){return new Promise(((t,a)=>{const s=this.queryNode({type:"disappearing_mode",jid:e},void 0);this.binSend("sendEphemeral",s,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{let a;if(__LOG__(2)`bin-recv: response,disappearing_mode`,"response"===this.N.tag(e)&&"disappearing_mode"===this.N.attr("type",e)){const t=this.N.attr("duration",e),s=this.N.attr("t",e);null!=t&&null!=s&&(a={duration:t,settingTimestamp:s})}t(a)})).catch(a)}),t),onDrop:this.wrap(a)},{debugString:"query,disappearing_mode",metricName:"QUERY_DISAPPEARING_MODE"})}))}};t.default=a},84045:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(30381)),i=a(99234),r=a(65044),o={setGroupEphemeralDuration:function(e,t){return new Promise(((a,s)=>{const o=r.Socket.tag(),l=this.wrap(a);l.tag=o;const d=[["ephemeral",{value:t.toString()},void 0]],u=["group",{id:o,jid:e,type:"prop",author:(0,i.getMaybeMeUser)()},d],c=this.actionNode("set",[u]);this.binSend("send",c,s,{clientCacheable:!0,onSend:l,onDrop:this.wrap(s)},{debugString:"action,group,ephemeral,"+t,metricName:"GROUP",expires:(0,n.default)().unix()})}))}};t.default=o},26286:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(30381)),i=a(99234),r=a(31515),o=a(65044),l={setGroupDescription:function(e,t,a,s){return new Promise(((l,d)=>{const u=o.Socket.tag(),c=this.wrap(l);let h;c.tag=u,h=(0,r.isString)(t)?[["description",{id:a,prev:s||"none"},t]]:[["description",{prev:s||"none",delete:"true"},void 0]];const f=["group",{id:u,jid:e,type:"description",author:(0,i.getMaybeMeUser)()},h],p=this.actionNode("set",[f]);this.binSend("send",p,d,{clientCacheable:!0,onSend:c,onDrop:this.wrap(d)},{debugString:"action,group,desc",metricName:"GROUP",expires:(0,n.default)().unix()})}))},setGroupProperty:function(e,t,a){return"announcement"!==t&&"restrict"!==t&&"no_frequently_forwarded"!==t?Promise.reject(new Error("invalid group property")):new Promise(((s,r)=>{const l=o.Socket.tag(),d=this.wrap(s);let u;switch(d.tag=l,t){case"announcement":u=[["announcement",{value:(!!a).toString()},void 0]];break;case"restrict":u=[["locked",{value:(!!a).toString()},void 0]];break;case"no_frequently_forwarded":u=[["no_frequently_forwarded",{value:(!!a).toString()},void 0]]}const c=["group",{id:l,jid:e,type:"prop",author:(0,i.getMaybeMeUser)()},u],h=this.actionNode("set",[c]);this.binSend("send",h,r,{clientCacheable:!0,onSend:d,onDrop:this.wrap(r)},{debugString:["action,group,prop",t,a].join(),metricName:"GROUP",expires:(0,n.default)().unix()})}))},demoteParticipants:function(e,t){return this.setGroupParticipants("demote",e,t)}};t.default=l},20207:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(30381)),i=a(99234),r=a(31515),o=a(65044),l={createGroup:function(e,t,a,s,l,d,u){return new Promise(((c,h)=>{const f=o.Socket.tag(),p=this.wrap(c);p.tag=f;const m=t.map((e=>["participant",{jid:e},void 0]));(0,r.isString)(a)&&(0,r.isString)(s)&&m.unshift(["description",{id:s},a]),l&&m.unshift(["locked",void 0,void 0]),d&&m.unshift(["announcement",void 0,void 0]),null!=u&&0!==u&&m.unshift(["ephemeral",{value:u.toString()},void 0]),__LOG__(2)`create group tag`;const _=["group",{id:f,type:"create",author:(0,i.getMaybeMeUser)(),subject:e},m],g=this.actionNode("set",[_]);this.binSend("send",g,h,{clientCacheable:!0,onSend:p,onDrop:this.wrap(h)},{debugString:"action,group,create",metricName:"GROUP",expires:(0,n.default)().unix()})}))}};t.default=l},92264:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(30381)),i=a(65044),r={findGroupPendingInvitesFromPhone:function(e,t){return new Promise(((a,s)=>{const n=this.queryNode({type:"group",kind:"invite",from:e,jid:t},[]);this.binSend("sendEphemeral",n,s,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{if("response"!==this.N.tag(e)||"group"!==this.N.attr("type",e))return void a({status:"error",info:"bad format: response incorrect"});const t=this.N.children(e),s=null==t?void 0:t[0];if(!s)return void a({status:"error",info:"bad format: no group node"});const n=[],i=this.N.children(s);Array.isArray(i)&&i.forEach((e=>{switch(this.N.tag(e)){case"participant":n.push({id:this.N.attr("jid",e)})}})),a({participants:n})})).catch(s)}),a),onDrop:this.wrap(s)},{debugString:"query,group_pending_invite",metricName:"QUERY_GROUP",ackRequest:!1})}))},acceptGroupV4Invite:function(e,t,a,s,r){return new Promise(((o,l)=>{const d=i.Socket.tag(),u=this.wrap(o);u.tag=d;const c=[["accept",{admin:t,expiration:s,code:a},void 0]],h=this.actionNode("set",[["group",{id:d,author:r,jid:e,type:"accept"},c]]);this.binSend("send",h,l,{clientCacheable:!0,onSend:u,onDrop:this.wrap(l)},{debugString:"action,group_invite_accept,",ackRequest:!1,expires:(0,n.default)().unix()})}))},revokeGroupV4Invite:function(e,t,a){return new Promise(((s,r)=>{const o=i.Socket.tag(),l=this.wrap(s);l.tag=o;const d=e.map((e=>["participant",{jid:e},void 0])),u=this.actionNode("set",[["group",{id:o,author:a,jid:t,type:"revoke"},d]]);this.binSend("send",u,r,{clientCacheable:!0,onSend:l,onDrop:this.wrap(r)},{debugString:"action,group_invite_revoke,",ackRequest:!1,expires:(0,n.default)().unix()})}))},parseInviteUpdate(e){const t=[],[a,s,n]=[this.N.attr("kind",e),this.N.attr("jid",e),this.N.attr("type",e)];if("update"!==a||"invite"!==n||void 0===s)return;const i=this.N.children(e);for(let e=0;e<i.length;e++){const a=i[e];"participant"===this.N.tag(a)&&t.push(this.N.attr("jid",a))}return{gid:s,participants:t}}};t.default=r},76342:(e,t,a)=>{"use strict";var s=a(95318);t.Z=void 0;var n=s(a(68953)),i=s(a(82497)),r=s(a(84045)),o=s(a(26286)),l=s(a(20207)),d=s(a(92264)),u=s(a(44843)),c=s(a(46262)),h=s(a(88278)),f=s(a(73052)),p=s(a(59153)),m=s(a(45831)),_=s(a(91725)),g=s(a(10467)),v=s(a(74111)),C=a(80208),S=s(a(61584)),y=s(a(13892)),b=s(a(60678)),E=s(a(89998)),T={labelsDisplay:u.default,groupsV3:o.default,groupsV3Create:l.default,changeNumberV2:n.default,queryStatusV3Thumbnail:m.default,queryVname:_.default,voipIndividualIncoming:E.default,quickRepliesQuery:g.default,payments:p.default,stickerPackQuery:y.default,labelsEdit:c.default,mediaUpload:h.default,videoPlaybackUrl:b.default,recentStickersV2:v.default,recentStickersV3:v.default,starredStickers:S.default,groupsV4JoinPermission:d.default,ephemeralMessages:r.default,userNotice:f.default,settingsSync:C.settingsSync,disappearingMode:i.default};t.Z=T},44843:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(45095)),i=(a(31912),s(a(32219)));const r={chat:["Chat","Contact"],message:["Msg"],contact:["Contact"]};var o={queryLabels:function(){return new Promise(((e,t)=>{const a=this.queryNode({type:"label"});this.binSend("sendEphemeral",a,t,{onSend:this.binWrap((a=>{this.BinaryProtocol.read(a).then((t=>{const a={labels:[]};if(__LOG__(2)`bin-recv: response,label`,"response"===this.N.tag(t)&&"label"===this.N.attr("type",t)){a.checksum=this.N.attr("checksum",t);const e=this.N.children(t);if(Array.isArray(e))for(let t=0;t<e.length;t++){const s=this.parseLabel(e[t]),n=null==s?void 0:s.label;n&&a.labels.push(n)}}e(a)})).catch(t)}),e),onDrop:this.wrap(t)},{debugString:"query,labels",metricName:"QUERY_LABELS"})}))},parseLabel:function(e){if("label"!==this.N.tag(e))return;const t=parseInt(this.N.attr("count",e),10),a=this.N.attr("id",e),s=this.N.attr("name",e),o=this.N.attr("color",e),d=isNaN(t)?void 0:t,u=this.N.attr("type",e);let c;if("update"===u){const t=this.N.children(e);for(let e=0;e<t.length;e++){const a=t[e];let s=null;switch(this.N.tag(a)){case"chat":s=this.N.attr("jid",a);break;case"message":const e=this.N.attr("jid",a),t=this.N.attr("index",a),n="true"===this.N.attr("owner",a),r=this.N.attr("participant",a);s=new i.default({fromMe:n,remote:e,id:t,participant:r})}const o={id:(0,n.default)(s,"updateId"),labels:l(this.N.children(a),this.N.attr),collection:r[this.N.tag(a)]};c=c?c.concat(o):[o]}}const h={label:{id:a,name:s,color:o,count:d},type:u,labelUpdates:c};return this.dropIfConditionMet([!(u||a&&s&&o),u&&"update"!==u&&"delete"!==u],h)}};function l(e,t){return e&&Array.isArray(e)?e.reduce(((e,a)=>[...e,(0,n.default)(t("id",a),"attr('id', label)")]),[]):[]}t.default=o},46262:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(30381)),i=a(19380),r={queryNextLabelColor(){return this._queryLabelColor(!0)},queryLabelPalette(){return this._queryLabelColor()},createLabel(e,t){return this._createOrDeleteLabels("create",e,t)},deleteLabel(e){return this._createOrDeleteLabels("delete",void 0,void 0,e)},_queryLabelColor:function(e){const t=e?"next label color":"all label color palette";return new Promise(((a,s)=>{const n=this.queryNode({type:"label",kind:"color",create:e?"true":void 0});this.binSend("sendEphemeral",n,s,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{const s={};if(__LOG__(2)`bin-recv: response,${t}`,"response"===this.N.tag(e)&&"label"===this.N.attr("type",e)){s.labelColors=[];const t=this.N.children(e);if(Array.isArray(t))for(let e=0;e<t.length;e++){const a=this.parseLabelColor(t[e]);a&&s.labelColors.push(a)}}a(s)})).catch(s)}),a),onDrop:this.wrap(s)},{debugString:`query,${t}`,metricName:e?"QUERY_NEXT_LABEL_COLOR":"QUERY_LABEL_PALETTE"})}))},addOrRemoveLabels:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return new Promise(((s,r)=>{const o=this.wrap(s),l=e.map((e=>["label",{id:e.id,type:e.type},void 0])),d=t.map((e=>e instanceof a(69951).ChatCollection.modelClass?["chat",{jid:e.id},void 0]:e instanceof i.ContactCollection.modelClass?["contact",{jid:e.id},void 0]:e instanceof a(59871).MsgCollection.modelClass?["message",{index:e.id.id,owner:void 0===e.id.fromMe?void 0:e.id.fromMe.toString(),jid:e.id.remote},void 0]:void 0)),u=this.actionNode("set",[["label",{type:"update"},d.concat(l)]]);this.binSend("send",u,r,{onSend:o,onDrop:this.wrap(r)},{debugString:"action,label,remove or add",metricName:"ADD_OR_REMOVE_LABELS",expires:(0,n.default)().unix()})}))},_createOrDeleteLabels:function(e,t,a,s){return"delete"!==e&&"create"!==e?Promise.reject(new Error("_createOrDeleteLabels must be called with type of delete or create")):new Promise(((i,r)=>{const o=this.wrap(i),l={type:e,name:t,color:a,id:s||void 0},d=this.actionNode("set",[["label",l,void 0]]);this.binSend("send",d,r,{onSend:o,onDrop:this.wrap(r)},{debugString:"action,label,create or delete",metricName:"CREATE_OR_DELETE_LABELS",expires:(0,n.default)().unix()})}))},editLabel:function(e,t,a){return new Promise(((s,i)=>{const r=this.wrap(s),o={id:e,name:t||void 0,color:a||void 0,type:"update"},l=this.actionNode("set",[["label",o,void 0]]);this.binSend("send",l,i,{onSend:r,onDrop:this.wrap(i)},{debugString:"action,label,edit",metricName:"EDIT_LABELS",expires:(0,n.default)().unix()})}))},parseLabelColor:function(e){if("label"!==this.N.tag(e))return;const t=this.N.attr("color",e);return this.dropIfConditionMet([!t],{color:t})}};t.default=r},88278:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const a=["url","mediaKey","filehash","encFilehash","width","height","mimetype"],s=["url","mediaKey","filehash","encFilehash","mimetype"];function n(e,t){for(let a=0;a<t.length;a++)if(!e[t[a]])return!1;return!0}var i={mediaUpload:function(e,t){return new Promise(((i,r)=>{const o=this.queryNode({type:"media",kind:e,id:t.toString()},void 0);this.binSend("sendEphemeral",o,r,{onSend:this.binWrap((t=>{this.BinaryProtocol.read(t).then((t=>{if(__LOG__(2)`bin-recv: response,media`,"response"!==this.N.tag(t)||"media"!==this.N.attr("type",t))return __LOG__(3)`wap:mediaUpload:malformed`,void i({status:400});const r=parseInt(this.N.attr("code",t),10)||200;if(200!==r)return __LOG__(3)`wap:mediaUpload:error ${r}`,void i({status:r});switch(e){case"sticker":{const e={directPath:this.N.attr("direct_path",t),url:this.N.attr("url",t),filehash:this.N.attr("filehash",t),encFilehash:this.N.attr("enc_filehash",t),mediaKey:this.N.attr("media_key",t),mimetype:this.N.attr("mimetype",t),height:this.N.attr("height",t),width:this.N.attr("width",t)};return n(e,a)?void i({status:r,sticker:e}):(__LOG__(3)`wap:mediaUpload:missing-field`,void i({status:400}))}case"sticker-pack":{const e={directPath:this.N.attr("direct_path",t),url:this.N.attr("url",t),filehash:this.N.attr("filehash",t),encFilehash:this.N.attr("enc_filehash",t),mediaKey:this.N.attr("media_key",t),mimetype:this.N.attr("mimetype",t)};return n(e,s)?void i({status:r,stickerPack:e}):(__LOG__(3)`wap:mediaUpload:missing-field`,void i({status:400}))}case"quick-reply":throw new Error('"quick-reply" not yet implemented');default:throw new Error(`unknown kind ${e}`)}}))}),i),onDrop:this.wrap(r)},{debugString:"query,media",metricName:"QUERY_MEDIA",ackRequest:!1})}))}};t.default=i},73052:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(81109)),i=s(a(41609)),r={queryNoticeState:function(e){return new Promise(((t,a)=>{const s=this.queryNode({type:"notice"},void 0),n=e?"query,notice_state,resume":"query,notice_state";this.binSend("sendEphemeral",s,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{const a={notices:[],status:parseInt(this.N.attr("code",e),10)||200};if(__LOG__(2)`bin-recv: response,notice_state`,"response"===this.N.tag(e)&&"notice"===this.N.attr("type",e)){const t=this.N.children(e);if(Array.isArray(t))for(let e=0;e<t.length;e++){const s=this.parseNotice(t[e]);(0,i.default)(s)||a.notices.push(s)}}t(a)})).catch(a)}),t),onDrop:this.wrap(a),serverCacheable:Boolean(e)},{debugString:n,metricName:"QUERY_NOTICE_STATE"})}))},parseNotice:function(e){if("notice"!==this.N.tag(e))return;const t=parseInt(this.N.attr("id",e),10),a=parseInt(this.N.attr("version",e),10),s={id:isNaN(t)?void 0:t,blocking:"true"===this.N.attr("blocking",e),version:isNaN(a)?void 0:a};return null!=s.id?s:(0,n.default)({},void 0)}};t.default=r},59153:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(93650),n={parsePaymentInfo:function(e,t){t&&(0,s.parseMsgPaymentInfo)(e,t)}};t.default=n},45831:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={statusQueryThumbnail:function(e){return this.profilePicFindThumbFromPhone(e,void 0,!0)}};t.default=a},91725:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={queryVname:function(e){return new Promise(((t,a)=>{const s=this.queryNode({type:"vname",jid:e},void 0);this.binSend("sendEphemeral",s,a,{onSend:this.binWrap((s=>{this.BinaryProtocol.read(s).then((a=>{let s;__LOG__(2)`bin-recv: response,vname`,"response"===this.N.tag(a)&&"vname"===this.N.attr("type",a)&&(s=this.parseContact(this.N.child("user",a),e)),t(s)})).catch(a)}),t),onDrop:this.wrap(a)},{debugString:`query,vname,${e}`,metricName:"QUERY_VNAME"})}))}};t.default=a},10467:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(31515),n={queryQuickReplies:function(e){return this.sendQuickRepliesQuery(e,!1)},flushQuickReplyCounts:function(e){return this.sendQuickRepliesQuery(e,!0)},sendQuickRepliesQuery:function(e,t){return new Promise(((a,s)=>{const n=e?Object.keys(e).map((t=>["quick_reply",{id:t,count:e[t].toString()},void 0])):void 0,i={type:"quick_reply"};t&&(i.kind="count");const r=this.queryNode(i,n);this.binSend("sendEphemeral",r,s,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{const s={data:[]};if(__LOG__(2)`bin-recv: response,quick_reply`,"response"===this.N.tag(e)&&"quick_reply"===this.N.attr("type",e)){s.checksum=this.N.attr("checksum",e);const a=this.N.children(e);if(Array.isArray(a))for(let e=0;e<a.length;e++){const n=(t?this.parseQuickReplyCount.bind(this):this.parseQuickReply.bind(this))(a[e]);n&&s.data.push(n)}}a(s)})).catch(s)}),a),onDrop:this.wrap(s)},{debugString:"query,quick_replies",metricName:"QUERY_QUICK_REPLIES"})}))},parseQuickReply:function(e){if("quick_reply"!==this.N.tag(e))return;const t=this.N.attr("id",e),a=this.N.attr("short",e),n=this.N.attr("message",e),i=parseInt(this.N.attr("count",e),10)||0,r=this.N.attr("type",e),o=[];if("delete"!==r){const t=this.N.children(e);if(Array.isArray(t))for(let e=0;e<t.length;e++){const a=t[e];"matched-text"===this.N.tag(a)&&o.push(this.N.dataStr(a))}}const l=[!(r||t&&a&&n&&(0,s.isNumber)(i)),r&&"delete"!==r,"delete"===r&&!t];return this.dropIfConditionMet(l,{id:t,shortcut:a,message:n,count:i,keywords:o,type:r})},parseQuickReplyCount:function(e){if("quick_reply"!==this.N.tag(e))return;const t=this.N.attr("id",e),a=parseInt(this.N.attr("count",e),10)||0,n=[!t||!(0,s.isNumber)(a)];return this.dropIfConditionMet(n,{id:t,count:a})}};t.default=n},74111:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(90511)),i={queryRecentStickers:function(){return new Promise(((e,t)=>{const a=this.queryNode({type:"recent_stickers"},void 0);this.binSend("sendEphemeral",a,t,{onSend:this.binWrap((a=>{this.BinaryProtocol.read(a).then((e=>(0,n.default)(e,this.N,"recent_stickers"))).then(e,t)}),e),onDrop:this.wrap(t)},{debugString:"query,recent_stickers",metricName:"QUERY_RECENT_STICKERS"})}))}};t.default=i},12761:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("recent_stickers"!==t.tag(e))return;if("delete"!==t.attr("type",e))return;return t.attr("filehash",e)}},61584:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(90511)),i={queryStarredStickers:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32;return new Promise(((a,s)=>{const i=this.queryNode({type:"starred_stickers",page:e.toString(),count:t.toString()},void 0);this.binSend("sendEphemeral",i,s,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>(0,n.default)(e,this.N,"starred_stickers"))).then(a,s)}),a),onDrop:this.wrap(s)},{debugString:"query,starred_stickers",metricName:"QUERY_STARRED_STICKERS"})}))}};t.default=i},69686:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("starred_stickers"!==t.tag(e))return;const a=t.attr("type",e);if("delete"!==a&&"add"!==a)return;const s=t.attr("filehash",e)||"";if("add"===a){const n={id:s,deprecatedMms3Url:t.attr("url",e)||"",directPath:t.attr("direct_path",e)||"",filehash:s,encFilehash:t.attr("enc_filehash",e),mediaKey:t.attr("media_key",e)||"",width:parseInt(t.attr("width",e)||"0",10),height:parseInt(t.attr("height",e)||"0",10),size:parseInt(t.attr("size",e)||"0",10),mimetype:t.attr("mimetype",e),index:0};return{filehash:s,type:a,sticker:n}}return{filehash:s,type:a}}},91801:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a;if("sticker"!==t.tag(e))return;const s=t.attr("filehash",e);if(!s)return __LOG__(4,void 0,new Error,!0)`filehash is missing in sticker from phone`,void SEND_LOGS("sticker-missing-filehash-from-phone");const n={id:s,deprecatedMms3Url:t.attr("url",e),directPath:t.attr("direct_path",e),mediaKey:t.attr("media_key",e),filehash:s,encFilehash:t.attr("enc_filehash",e),mimetype:t.attr("mimetype",e),width:parseInt(t.attr("width",e),10),height:parseInt(t.attr("height",e),10),size:parseInt(t.attr("size",e),10),weight:parseFloat(null!==(a=t.attr("weight",e))&&void 0!==a?a:1)};(!n.mimetype||Number.isNaN(n.width)||Number.isNaN(n.height)||Number.isNaN(n.size))&&__LOG__(3)`sticker:parse missing preferred fields: `;return n}},90511:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){__LOG__(2)`bin-recv: response,${a}`;const s=t.tag(e);if("response"!==s)throw new Error(`node tag for ${a} response is invalid: ${s}`);const r=t.attr("type",e)||"";if(r!==a)throw new Error(`node type for ${a} response is invalid: ${r}`);const o=parseInt(t.attr("code",e),10)||200;if(200!==o)throw new Error(`response status for ${a} is invalid: ${o}`);const l=t.attr("checksum",e)||"",d=parseInt(t.attr("total",e)||"0",10),u=t.children(e)||[];(0,n.default)(Array.isArray(u),"expects an Array of Stickers");const c=u.map((e=>(0,i.default)(e,t))).filter(Boolean);return{checksum:l,total:d,stickers:c}};var n=s(a(41143)),i=s(a(91801))},13892:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(81109)),i=a(7293),r={queryStickerPacks:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return new Promise(((a,s)=>{const n={type:i.GK.isThirdPartyStickersEnabled()?"sticker_pack_v2":"sticker_pack",page:e.toString(),count:t.toString()},r=this.queryNode(n,void 0);this.binSend("sendEphemeral",r,s,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{const t={};if(__LOG__(2)`bin-recv: response,sticker_pack`,"response"===this.N.tag(e)&&"sticker_pack"===this.N.attr("type",e)){const a=parseInt(this.N.attr("code",e),10)||200;t.status=a,t.data=[],t.checksum=this.N.attr("checksum",e);const s=this.N.attr("count",e);t.count=null==s?null:parseInt(s,10);const n=this.N.children(e);if(Array.isArray(n))for(let e=0;e<n.length;e++){const a=this.parseStickerPack(n[e]);a&&t.data.push(a)}}a(t)})).catch(s)}),a),onDrop:this.wrap(s)},{debugString:"query,sticker_pack",metricName:"QUERY_STICKER_PACKS"})}))},queryStickersInStickerPack:function(e){return this.queryStickers({id:e})},queryStickers:function(e){return new Promise(((t,a)=>{const s=(0,n.default)({type:"sticker"},e),i=this.queryNode(s,void 0);this.binSend("sendEphemeral",i,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{const a={};if(__LOG__(2)`bin-recv: response,sticker`,"response"===this.N.tag(e)&&"sticker"===this.N.attr("type",e)){const t=parseInt(this.N.attr("code",e),10)||200;a.status=t,a.data=[];const s=this.N.children(e);if(Array.isArray(s))for(let e=0;e<s.length;e++){const t=this.parseSticker(s[e]);t&&a.data.push(t)}}t(a)})).catch(a)}),t),onDrop:this.wrap(a)},{debugString:`query,sticker,${e.id}`,metricName:"QUERY_STICKERS"})}))},parseSticker:function(e){if("sticker"!==this.N.tag(e))return;const t={url:this.N.attr("url",e),directPath:this.N.attr("direct_path",e),mediaKey:this.N.attr("media_key",e),filehash:this.N.attr("filehash",e),encFilehash:this.N.attr("enc_filehash",e),mimetype:this.N.attr("mimetype",e),width:parseInt(this.N.attr("width",e)||125,10),height:parseInt(this.N.attr("height",e)||125,10),size:parseInt(this.N.attr("size",e)||0,10)||null};return t.filehash?t:void 0},parseStickerPack:function(e){if("sticker_pack"!==this.N.tag(e))return;const t={id:this.N.attr("id",e),name:this.N.attr("name",e),url:this.N.attr("url",e),directPath:this.N.attr("direct_path",e),mediaKey:this.N.attr("media_key",e),filehash:this.N.attr("filehash",e),encFilehash:this.N.attr("enc_filehash",e),mimetype:this.N.attr("mimetype",e)};return t.id?t:void 0},parseStickerPackUpdate:function(e){if("sticker_pack"!==this.N.tag(e))return;const t=this.N.attr("type",e);return this.dropIfConditionMet([!t],{type:t})}};t.default=r},60678:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={queryVideoPlaybackUrl:function(e){return new Promise(((t,a)=>{const s=this.queryNode({type:"video",url:e},void 0);this.binSend("sendEphemeral",s,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{let a;if(__LOG__(2)`bin-recv: response,video_playback_url`,"response"===this.N.tag(e)&&"video"===this.N.attr("type",e)){const t=this.N.attr("url",e);t&&(a={url:t})}t(a)})).catch(a)}),t),onDrop:this.wrap(a)},{debugString:"query,video_playback_url",metricName:"QUERY_URL"})}))}};t.default=a},89998:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(84902),n=a(24808),i=a(49835),r={parseCall:function(e){if("call"!==this.N.tag(e))return;const t=this.N.child("offer",e);if(!t)return;const a=this.N.child("call",t);if(!a)return;const i=this.N.children(a),r=(0,s.decodeProtobuf)(n.MessageSpec,i).call;if(!r)return;const o=this.N.attr("from",e),l=this.N.attr("call-id",t),d=r.callKey;return this.dropIfConditionMet([!l,!o,!d],{type:"offer_key",id:l,peerJid:o,key:d})},queryCall:function(e,t){return new Promise(((a,s)=>{const n=this.queryNode({type:"call","call-id":e,kind:t});this.binSend("sendEphemeral",n,s,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{const t={status:400};"response"===this.N.tag(e)&&"call"===this.N.attr("type",e)&&(t.status=parseInt(this.N.attr("code",e),10)||400),a(t)})).catch(s)}),a),onDrop:this.wrap(s)},{debugString:"query,call,"+e,metricName:"QUERY_CALL"})}))},handleCallQuery(){const e=a(31218).CallCollection.handleQuery({});if(e)return e.then((()=>this.responseNode(void 0,[["some",{formatted:"xml"},void 0]])))},sendCallEnd:function(e,t){return new Promise(((a,s)=>{const n={};n.jid=e.jid,n["call-id"]=e["call-id"],n.result=o(e.result),n.audio=e.audio.toString(),n.out=e.out.toString(),n.seconds=e.seconds.toString(),n.t=e.t.toString(),n.group=e.group.toString();const i=t.map((e=>["participant",{jid:e.jid,result:o(e.result)},void 0])),r=this.actionNode("relay",[["call_end",n,i]]);this.binSend("send",r,s,{onSend:this.wrap(a),onDrop:this.wrap(s)},{debugString:`action,call_end,${e["call-id"]}`})}))}};function o(e){return i.CALL_LOG_RESULT[e]||"invalid"}t.default=r},43470:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={DEBUG_LOG:1,QUERY_RESUME:2,QUERY_RECEIPT:3,QUERY_MEDIA:4,QUERY_CHAT:5,QUERY_CONTACTS:6,QUERY_MESSAGES:7,PRESENCE:8,PRESENCE_SUBSCRIBE:9,GROUP:10,READ:11,CHAT:12,RECEIVED:13,PIC:14,STATUS:15,MESSAGE:16,QUERY_ACTIONS:17,BLOCK:18,QUERY_GROUP:19,QUERY_PREVIEW:20,QUERY_EMOJI:21,QUERY_MESSAGE_INFO:22,SPAM:23,QUERY_SEARCH:24,QUERY_IDENTITY:25,QUERY_URL:26,PROFILE:27,CONTACT:28,QUERY_VCARD:29,QUERY_STATUS:30,QUERY_STATUS_UPDATE:31,PRIVACY_STATUS:32,QUERY_LIVE_LOCATIONS:33,LIVE_LOCATION:34,QUERY_VNAME:35,QUERY_LABELS:36,CALL:37,QUERY_CALL:38,QUERY_QUICK_REPLIES:39,QUERY_CALL_OFFER:40,QUERY_RESPONSE:41,QUERY_STICKER_PACKS:42,QUERY_STICKERS:43,ADD_OR_REMOVE_LABELS:44,QUERY_NEXT_LABEL_COLOR:45,QUERY_LABEL_PALETTE:46,CREATE_OR_DELETE_LABELS:47,EDIT_LABELS:48,QUERY_RECENT_STICKERS:49,QUERY_NOTICE_STATE:50,QUERY_SETTINGS:51,SET_ARCHIVE_SETTING:51};t.default=a},90826:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);t.Z=void 0;var i=n(a(48926)),r=n(a(81109)),o=n(a(91747)),l=n(a(35161)),d=n(a(82492)),u=n(a(66678)),c=a(15688),h=a(18412),f=a(84902),p=a(60980),m=n(a(30381)),_=n(a(13016)),g=n(a(69618)),v=a(24808),C=a(99234),S=a(6565),y=a(7293),b=a(57701),E=n(a(43470)),T=n(a(32219)),x=n(a(93202)),M=s(a(13493)),P=a(15860),A=n(a(59402)),I=a(2541),w=a(93650),k=a(66934),j=a(21224),N=n(a(39546)),O=a(65044);const R=(0,r.default)((0,r.default)((0,r.default)({version:"17",M:E.default,BinaryProtocol:null,N:null,addContact:function(e){return new Promise(((t,a)=>{const s=this.actionNode("set",[["contacts",{type:"add"},e]]);this.binSend("send",s,a,{clientCacheable:!0,onSend:this.binWrap(t,t),onDrop:this.wrap(a)},{debugString:"action,contact,add",metricName:"CONTACT",ackRequest:!0})}))},addParticipants:function(e,t){return this.setGroupParticipants("add",e,t)},changeSubject:function(e,t){return new Promise(((a,s)=>{const n=O.Socket.tag(),i=this.wrap(a);i.tag=n;const r=["group",{id:n,jid:e,type:"subject",author:(0,C.getMaybeMeUser)(),subject:t},void 0],o=this.actionNode("set",[r]);this.binSend("send",o,s,{clientCacheable:!0,onSend:i,onDrop:this.wrap(s)},{debugString:"action,group,subject",metricName:"GROUP",ackRequest:!1,expires:(0,m.default)().unix()})}))},chatFindQuery:function(e,t){return new Promise(((a,s)=>{const n={type:"chat"};"boolean"==typeof e&&e?n.kind="retry":"string"==typeof e&&(n.jid=e);const i=this.queryNode(n,void 0);this.binSend("sendEphemeral",i,s,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{let t=[];const s=this.N.children(e);if("response"===this.N.tag(e)&&"chat"===this.N.attr("type",e))if("true"===this.N.attr("duplicate",e))t="preempted";else if(Array.isArray(s)){let e;const a=s.length;for(e=0;e<a;e++){const a=this.parseChat(s[e]);a&&t.push(a)}}a(t)})).catch(s)}),a),logOnSend:t,onDrop:this.wrap(s)},{debugString:["query","chat",e].join(),metricName:"QUERY_CHAT",ackRequest:!1})}))},contactFindQuery:function(e,t){return new Promise(((a,s)=>{const n=this.queryNode({type:"contacts",kind:e?"retry":void 0},void 0);this.binSend("send",n,s,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{let t=[];const s=this.N.children(e);if("response"===this.N.tag(e)&&"contacts"===this.N.attr("type",e))if("true"===this.N.attr("duplicate",e))t="preempted";else if(Array.isArray(s)){let e;const a=s.length;for(e=0;e<a;e++){const a=this.parseContact(s[e]);a&&t.push(a)}}a({checksum:this.N.attr("checksum",e),data:t})})).catch(s)}),a),logOnSend:t,onDrop:this.wrap(s)},{debugString:"query,contacts, "+String(e),metricName:"QUERY_CONTACTS",ackRequest:!1})}))},createGroup:function(e,t,a,s,n,i,r){return new Promise(((a,s)=>{const n=O.Socket.tag(),i=this.wrap(a);i.tag=n;const o=t.map((e=>["participant",{jid:e},void 0]));r&&o.unshift(["ephemeral",{value:`${r}`},void 0]),__LOG__(2)`create group tag`;const l=["group",{id:n,type:"create",author:(0,C.getMaybeMeUser)(),subject:e},o],d=this.actionNode("set",[l]);this.binSend("send",d,s,{clientCacheable:!0,onSend:i,onDrop:this.wrap(s)},{debugString:"action,group,create",metricName:"GROUP",ackRequest:!1,expires:(0,m.default)().unix()})}))},deletePicture:function(e){return new Promise(((t,a)=>{const s=O.Socket.tag(),n=this.wrap(t);n.tag=s;const i=["picture",{id:s,jid:e,type:"delete"},void 0],r=this.actionNode("set",[i]);this.binSend("send",r,a,{clientCacheable:!0,onSend:n,onDrop:this.wrap(a)},{debugString:"action,delete_pic,"+e,metricName:"PIC",ackRequest:!1,expires:(0,m.default)().unix()})}))},groupMetadataFindFromPhone:function(e){return new Promise(((t,a)=>{const s=this.queryNode({type:"group",jid:e},[]);this.binSend("sendEphemeral",s,a,{onSend:this.binWrap((s=>{this.BinaryProtocol.read(s).then((a=>{if("response"!==this.N.tag(a)||"group"!==this.N.attr("type",a))return void t({status:"error",info:"bad format: response incorrect"});const s=this.N.children(a),n=null==s?void 0:s[0];if(!n)return void t({status:"error",info:"bad format: no group node"});if("missing"===this.N.attr("type"))return void t({status:"missing"});const i=[];let r;const o=this.N.children(n);let l=!1;Array.isArray(o)&&o.forEach((e=>{switch(this.N.tag(e)){case"participant":i.push({id:this.N.attr("jid",e),isAdmin:"admin"===this.N.attr("type",e)});break;case"description":r=this.N.dataStr(e);break;case"support":l=!0}})),t({status:"ok",data:{creation:parseInt(this.N.attr("create",n),10)||void 0,desc:r,id:e,owner:this.N.attr("creator",n),participants:i,support:l}})})).catch(a)}),t),onDrop:this.wrap(a)},{debugString:"query,group,"+e,metricName:"QUERY_GROUP",ackRequest:!1})}))},leaveGroup:function(e){return new Promise(((t,a)=>{const s=O.Socket.tag(),n=this.wrap(t);n.tag=s;const i=["group",{id:s,jid:e,type:"leave",author:(0,C.getMaybeMeUser)()},void 0],r=this.actionNode("set",[i]);this.binSend("send",r,a,{clientCacheable:!0,onSend:n,onDrop:this.wrap(a)},{debugString:"action,group,delete",metricName:"GROUP",ackRequest:!1,expires:(0,m.default)().unix()})}))},parseBattery:function(e){if("battery"!==this.N.tag(e))return __LOG__(4,void 0,new Error,!0)`expected tag: battery, received tag: ${this.N.tag(e)}, tag id: ${this.N.attr("id",e)}`,void SEND_LOGS("wap-unexpected-tag");const t=Math.min(parseInt(this.N.attr("value",e),10)||-1,100),a=this.N.attr("live",e),s={battery:t<0?void 0:t,plugged:a?"true"===a:void 0};return this.dropIfConditionMet([t<0&&!a],s)},parseBCUpdate:function(e){if("broadcast"!==this.N.tag(e)||"modify"!==this.N.attr("type",e))return __LOG__(4,void 0,new Error,!0)`expected tag: broadcast, received tag: ${this.N.tag(e)}, tag id: ${this.N.attr("id",e)}`,void SEND_LOGS("wap-unexpected-tag");const t=this.N.attr("jid",e),a=this.N.children(e),s=[];if(Array.isArray(a)){const e=a.length;let t,n,i;for(t=0;t<e;t++)n=a[t],i=this.N.attr("jid",n),"recipient"===this.N.tag(n)&&i&&N.default.isUser(i)&&s.push({id:i})}const n=[!t,!N.default.isBroadcast(t),0===s.length];return this.dropIfConditionMet(n,{id:t,participants:s})},parseChat:function(e){if("chat"!==this.N.tag(e))return __LOG__(4,void 0,new Error,!0)`expected tag: chat, received tag: ${this.N.tag(e)}, tag id: ${this.N.attr("id",e)}`,void SEND_LOGS("wap-unexpected-tag");let t=this.N.attr("kind",e),a=this.N.attr("type",e);const s=this.N.attr("jid",e),n=parseInt(this.N.attr("t",e),10)||void 0,i=parseInt(this.N.attr("mute",e),10),r=parseInt(this.N.attr("before",e),10)||void 0,o="true"===this.N.attr("archive",e),l="true"===this.N.attr("read_only",e),d=parseInt(this.N.attr("modify_tag",e),10)||void 0,u=this.N.attr("name",e)||void 0,c=this.safeParseInt(e,"count"),h="true"===this.N.attr("message",e),f="true"===this.N.attr("star",e),p="false"===this.N.attr("spam",e),m=parseInt(this.N.attr("pin",e),10)||0,_=this.N.attr("old_jid",e),g=this.N.attr("new_jid",e),v=parseInt(this.N.attr("ephemeral",e),10)||0,C=parseInt(this.N.attr("eph_setting_ts",e),10)||0;switch(t){case"text":case"image":case"video":case"gif":case"audio":case"ptt":case"document":case"location":case"vcard":case"url":case"sticker":break;default:t=void 0}"ahead"===a&&(a="clear");const S=this.N.children(e);let y,b;if(Array.isArray(S)){let e,t;y=[],b=[];const a=S.length;for(e=0;e<a;e++)if(t=S[e],"item"===this.N.tag(t)){const e=this.N.attr("index",t);e&&y.push([e,"true"===this.N.attr("owner",t),this.N.attr("participant",t)])}else if("label"===this.N.tag(t)){const e=this.N.attr("id",t);e&&b.push(e)}else{const e=this.parseMsgMessage(t,"response");e&&y.push(e)}}const E={id:s,t:n,type:a,kind:t,keys:y,before:r,archive:o,isReadOnly:l,unreadCount:c,muteExpiration:isNaN(i)?void 0:i,modifyTag:d,name:u,pendingMsgs:h,star:f,notSpam:p,pin:m,changeNumberOldJid:_,changeNumberNewJid:g,ephemeralDuration:N.default.isUser(s)?v:void 0,ephemeralSettingTimestamp:N.default.isUser(s)?C:void 0,labels:b};this.pruneUndefinedProps(E);const T=[a&&"delete"!==a&&"clear"!==a&&"ephemeral"!==a&&"archive"!==a&&"unarchive"!==a&&"mute"!==a&&"star"!==a&&"unstar"!==a&&"spam"!==a&&"modify_tag"!==a&&"pin"!==a&&"modify"!==a,!a&&!s,o&&a&&"clear"!==a,"clear"!==a&&r&&r>0,"clear"!==a&&"star"!==a&&"unstar"!==a&&y&&y.length>0];return this.dropIfConditionMet(T,E)},parseMsg:function(e,t){switch(this.N.tag(e)){case"message":return this.parseMsgMessage(e,t);default:return __LOG__(4,void 0,new Error,!0)`received tag: ${this.N.tag(e)}, tag id: ${this.N.attr("id",e)}`,void SEND_LOGS("wap-unknown-tag")}},parseIdentity:function(e){const t=this.N.child("raw",e),a=this.N.child("text",e);if(t&&a&&this.N.children(t)instanceof ArrayBuffer&&this.N.dataStr(a))return{jid:this.N.attr("jid",e),binary:this.N.children(t),string:this.N.dataStr(a)}},profilePicFindThumbFromPhone:function(e,t,a){return new Promise(((s,n)=>{const i={type:"preview",jid:e};(null==t?void 0:t.tag)&&t.raw&&(i.id=t.tag),a&&(i.kind="status");const r=this.queryNode(i,[]);this.binSend("sendEphemeral",r,n,{onSend:this.binWrap((a=>{this.BinaryProtocol.read(a).then((a=>{"response"===this.N.tag(a)&&"preview"===this.N.attr("type",a)||n(new Error("Not response or preview"));const i=this.N.children(a),r=null==i?void 0:i[0];if(r||n(new Error("Missing preview node")),"missing"===this.N.attr("type",r))s({id:e,tag:void 0,raw:void 0});else{const a=this.N.attr("id",r);let n;if(t&&a===t.tag&&t.raw)n=t.raw;else{const e=this.N.children(r);n=e?(0,c.encodeB64)(e):void 0}s({id:e,tag:a,raw:n})}})).catch(n)}),s),onDrop:this.wrap(n)},{debugString:"query,thumb,"+e,metricName:"QUERY_PREVIEW",ackRequest:!1})}))},promoteParticipants:function(e,t){return this.setGroupParticipants("promote",e,t)},queryIdentity:function(e){return new Promise(((t,a)=>{const s=this.queryNode({type:"identity",jid:e},void 0);this.binSend("sendEphemeral",s,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{let a;__LOG__(2)`bin-recv: response,identity`,"response"===this.N.tag(e)&&"identity"===this.N.attr("type",e)&&(a=this.parseIdentity(e)),t(a)})).catch(a)}),t),onDrop:this.wrap(a)},{debugString:`query,identity,${e}`,metricName:"QUERY_IDENTITY",ackRequest:!1})}))},queryLinkPreview:function(e){return new Promise(((t,a)=>{const s=this.queryNode({type:"url",url:e},void 0);this.binSend("sendEphemeral",s,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{let a;if(__LOG__(2)`bin-recv: response,url`,"response"===this.N.tag(e)&&"url"===this.N.attr("type",e)){const t=this.N.children(e);a={title:this.N.attr("title",e),description:this.N.attr("description",e),canonicalUrl:this.N.attr("canonical-url",e),matchedText:this.N.attr("matched-text",e),preview:this.N.attr("preview",e),thumbnail:t?(0,c.encodeB64)(t):void 0,doNotPlayInline:"true"===this.N.attr("do-not-play-inline",e)}}t(a)})).catch(a)}),t),onDrop:this.wrap(a)},{debugString:"query,url",metricName:"QUERY_URL",ackRequest:!1})}))},queryMsgInfo:function(e){const t=e=>{let t,a;const s=[];if(Array.isArray(e)){t=e.length;for(let n=0;n<t;n++)a=e[n],"item"===this.N.tag(a)&&this.N.attr("jid",a)&&this.N.attr("t",a)&&s.push({id:this.N.attr("jid",a),t:parseInt(this.N.attr("t",a),10)||0})}return s};return new Promise(((a,s)=>{const n=this.queryNode({type:"message_info",index:e.id,jid:e.remote},void 0);this.binSend("sendEphemeral",n,s,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{const s={played:[],playedRemaining:0,read:[],readRemaining:0,delivery:[],deliveryRemaining:0};if(__LOG__(2)`bin-recv: response,msg,info`,"response"===this.N.tag(e)&&"message_info"===this.N.attr("type",e)){const a=this.N.child("played",e),n=this.N.child("read",e),i=this.N.child("delivery",e),r=this.N.children(a),o=this.N.children(n),l=this.N.children(i),d=parseInt(this.N.attr("count",e),10)||0;s.played=t(r),s.read=t(o),s.delivery=t(l);const u=d-s.played.length,c=d-s.played.length-s.read.length,h=d-s.played.length-s.read.length-s.delivery.length;s.playedRemaining=u<0?0:u,s.readRemaining=c<0?0:c,s.deliveryRemaining=h<0?0:h}a(s)})).catch(s)}),a),onDrop:this.wrap(s)},{debugString:["query,msg,info",e.id,e.remote,e.fromMe].join(),metricName:"QUERY_MESSAGE_INFO",ackRequest:!1})}))},queryReceivedActions:function(e){return new Promise(((t,a)=>{const s=e.map((e=>["item",{id:e},void 0])),n=this.queryNode({type:"action"},s);this.binSend("sendEphemeral",n,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{let a=[];const s=this.N.children(e);if(__LOG__(2)`bin-recv: response,actions`,"response"===this.N.tag(e)&&"action"===this.N.attr("type",e))if(Array.isArray(s)){let e;const t=s.length;for(e=0;e<t;e++){const t=s[e],n=this.N.attr("id",t),i=parseInt(this.N.attr("code",t),10)||0;"item"===this.N.tag(t)&&n&&0!==i&&a.push({id:n,code:i})}}else"true"===this.N.attr("replaced",e)&&(a="replaced");t(a)})).catch(a)}),t),onDrop:this.wrap(a),serverCacheable:!0},{debugString:"query,actions",metricName:"QUERY_ACTIONS",ackRequest:!1})}))},recentEmojiQuery:function(e){return new Promise(((t,a)=>{const s=Array.isArray(e)?e.map((e=>["item",{code:e.id,value:e.weight.toString()},void 0])):void 0,n=this.queryNode({type:"emoji"},s);this.binSend("sendEphemeral",n,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{const a=[],s=this.N.children(e);if(__LOG__(2)`bin-recv: response,emoji`,"response"===this.N.tag(e)&&"emoji"===this.N.attr("type",e)&&Array.isArray(s)){let e;const t=s.length;for(e=0;e<t;e++){const t=s[e],n=this.N.attr("code",t),i=parseFloat(this.N.attr("value",t))||0;"item"===this.N.tag(t)&&n&&i&&!isNaN(i)&&a.push({id:n,weight:i})}}t(a)})).catch(a)}),t),onDrop:this.wrap(a)},{debugString:"query,emoji",metricName:"QUERY_EMOJI",ackRequest:!1})}))},removeParticipants:function(e,t){return this.setGroupParticipants("remove",e,t)},resyncMessages:function(e){return new A.default(((t,a)=>{const s=e.map((e=>{const t={jid:e.wid,index:e.id,owner:e.fromMe,participant:e.participant,archive:(!!e.archive).toString(),spam:(!e.notSpam).toString(),old_jid:e.changeNumberOldJid,new_jid:e.changeNumberNewJid};return e.mute&&(t.mute=e.mute.toString()),N.default.isUser(e.wid)&&e.ephemeralDuration&&(t.ephemeral=e.ephemeralDuration.toString()),N.default.isUser(e.wid)&&null!=e.ephemeralSettingTimestamp&&(t.eph_setting_ts=e.ephemeralSettingTimestamp.toString()),e.active&&(t.active="true"),N.default.isGroup(e.wid)&&(t.read_only=(!!e.isReadOnly).toString()),e.modifyTag&&(t.modify_tag=e.modifyTag.toString()),e.unreadCount&&(t.count=e.unreadCount.toString()),e.pin&&(t.pin=e.pin.toString()),["last",t,void 0]})),n=this.queryNode({type:"resume"},s);this.binSend("sendEphemeral",n,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{const a=[],s=this.N.children(e);if(__LOG__(2)`bin-recv: response,resume`,"response"===this.N.tag(e)&&"resume"===this.N.attr("type",e)&&Array.isArray(s)){let e;const t=s.length;for(e=0;e<t;e++){const t=this.parseChat(s[e]);t&&a.push(t)}}t({checksum:this.N.attr("checksum",e),statusChecksum:this.N.attr("status",e),labelsChecksum:this.N.attr("label",e),quickRepliesChecksum:this.N.attr("quick_reply",e),stickerPackChecksum:this.N.attr("sticker_pack",e),recentStickersChecksum:this.N.attr("recent_stickers",e),starredStickersChecksum:this.N.attr("starred_stickers",e),data:a})})).catch(a)}),t),onDrop:this.wrap(a),serverCacheable:!0},{debugString:"query,resume",metricName:"QUERY_RESUME",ackRequest:!1})}))},resyncReceipts:function(e){return new Promise(((t,a)=>{const s=e.map((e=>["last",{jid:e.remote,index:e.id,owner:e.fromMe.toString(),participant:e.participant,t:e.t.toString(),pay_t:e.payT&&e.payT.toString()},void 0])),n=this.queryNode({type:"receipt"},s);this.binSend("sendEphemeral",n,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{const a=[],s=this.N.children(e);if(__LOG__(2)`bin-recv: response,receipt`,"response"===this.N.tag(e)&&"receipt"===this.N.attr("type",e)&&Array.isArray(s)){let e,t,n;const i=s.length;for(e=0;e<i;e++){t=s[e],n=this.N.children(t);const i=this.N.attr("jid",t),r=this.N.attr("t",t),o=this.N.attr("pay_t",t);if("receipt"===this.N.tag(t)&&i&&(r||o)&&Array.isArray(n)){let e;const t=[],s=[],l=n.length;for(e=0;e<l;e++){const a=n[e];if("item"===this.N.tag(a)){const e=this.N.attr("index",a),s="true"===this.N.attr("owner",a),n=parseInt(this.N.attr("status",a),10)||0,i=this.N.attr("participant",a),r=parseInt(this.N.attr("t",a),10)||void 0;e&&0!==n&&n<=4&&t.push({id:e,fromMe:s,participant:i,status:n,t:r})}else if("message"===this.N.tag(a)){const e=this.parseMsgMessage(a);e&&s.push(e)}}t.length>0&&a.push({id:i,t:r&&parseInt(r,10),payT:o&&parseInt(o,10),acks:t,msgs:s})}}}t(a)})).catch(a)}),t),onDrop:this.wrap(a),serverCacheable:!0},{debugString:"query,receipt",metricName:"QUERY_RECEIPT",ackRequest:!1})}))},sendChatstateUpdate:function(e,t){if(["composing","paused","recording"].includes(e))return new Promise(((a,s)=>{const n=this.actionNode("set",[["presence",{type:e,to:t},void 0]],!0);this.binSend("sendEphemeralIgnore",n,s,{onSend:a,onDrop:s,epochIneligible:!0},{debugString:"action,chatstate,"+e,metricName:"PRESENCE",skipOffline:!0,ackRequest:!1})}))},sendConversationArchive:function(e,t,a){return this.sendConversationOpWithKey(t?"archive":"unarchive",e,a)},sendConversationClear:function(e,t,a){return this.sendConversationOpWithKey("clear",e,t,a)},sendConversationDelete:function(e,t){return this.sendConversationOpWithKey("delete",e,t)},sendConversationMute:function(e,t,a){return new Promise(((s,n)=>{const i=t?t.toString():void 0,r=a?a.toString():void 0,o=this.actionNode("set",[["chat",{type:"mute",mute:i,previous:r,jid:e},void 0]]);this.binSend("send",o,n,{clientCacheable:!0,onSend:this.wrap(s),onDrop:this.wrap(n)},{debugString:"action,chat,"+e+", "+(i?"mute,"+i:"unmute"),metricName:"CHAT",ackRequest:!0})}))},sendConversationNotSpam:function(e){return this.sendConversationOpWithKey("spam",e,void 0,!1)},sendConversationOpWithKey:function(e,t,a,s){return new Promise(((n,i)=>{let r,o;switch(e){case"clear":r=(!!s).toString();break;case"spam":o=(!!s).toString()}const l=this.actionNode("set",[["chat",{type:e,jid:t,index:a?a.id:void 0,owner:a?a.fromMe.toString():void 0,participant:a?a.participant:void 0,star:void 0!==r?r:void 0,spam:void 0!==o?o:void 0},void 0]]);this.binSend("send",l,i,{clientCacheable:!0,onSend:this.wrap(n),onDrop:this.wrap(i)},{debugString:"action,chat,"+[e,a,s].join(),metricName:"CHAT",ackRequest:!0})}))},sendConversationUnseen:function(e,t){return this.sendConversationSeen(e,t,-2)},sendMedia:function(e){return new Promise(((t,a)=>{const s=(0,u.default)(e);O.Socket.send({data:["query","sendMedia",s.url],onSend:this.wrap02((e=>{t((0,d.default)(s,e))})),onDrop:a})}))},sendMessageDelete:function(e,t,a){return new Promise(((s,n)=>{const i=t.map((e=>["item",{index:e.id,owner:e.fromMe.toString(),participant:e.participant},void 0])),r=this.actionNode("set",[["chat",{type:"clear",jid:e,media:a.toString()},i]]);this.binSend("send",r,n,{clientCacheable:!0,onSend:this.wrap(s),onDrop:this.wrap(n)},{debugString:"action,msgs,delete,"+[e,a,t.length].join(),metricName:"CHAT",ackRequest:!0})}))},sendMessagePlayed:function(e){return new Promise(((t,a)=>{const s=this.wrap(t),n=this.actionNode("set",[["received",{type:"played",index:e.id,from:e.remote,participant:e.participant},void 0]]);this.binSend("send",n,a,{onSend:s,onDrop:this.wrap(a)},{debugString:"action,played,"+e.toString(),metricName:"RECEIVED",ackRequest:!0})}))},sendMessageStarred:function(e,t,a){return new Promise(((s,n)=>{const i=t.map((e=>["item",{index:e.id,owner:e.fromMe.toString(),participant:e.participant},void 0])),r=this.actionNode("set",[["chat",{type:a?"star":"unstar",jid:e},i]]);this.binSend("send",r,n,{clientCacheable:!0,onSend:this.wrap(s),onDrop:this.wrap(n)},{debugString:"action,msgs,star,"+[e,a,t.length].join(),metrics:"CHAT",ackRequest:!0})}))},sendPresenceUpdate:function(e){if(["available","unavailable"].includes(e))return new Promise(((t,a)=>{const s="available"===e,n=this.actionNode("set",[["presence",{type:e},void 0]],!s),i=s?"sendEphemeral":"sendEphemeralIgnore";this.binSend(i,n,a,{onSend:s?this.wrap(t):t,onDrop:s?this.wrap(a):t,epochIneligible:!s},{debugString:"action,presence,"+e,metricName:"PRESENCE",available:"available"===e,ackRequest:s})}))},sendSetBlock:function(e,t){return new Promise(((a,s)=>{const n=t.map((e=>["user",{jid:e.jid},void 0])),i=["block",{type:e?"add":"remove"},n],r=this.actionNode("set",[i]);this.binSend("send",r,s,{clientCacheable:!0,onSend:this.wrap(a),onDrop:this.wrap(s)},{debugString:"action,block,"+e+","+(0,l.default)(t,"jid").join(","),metricName:"BLOCK",ackRequest:!1,expires:(0,m.default)().unix()})}))},sendSetPicture:function(e,t,a){return new Promise(((s,n)=>{const i=I.URL.parseDataURL(t).data,r=I.URL.parseDataURL(a).data,o=(0,c.decodeB64)(i),l=(0,c.decodeB64)(r),d=O.Socket.tag(),u=this.wrap(s);u.tag=d;const h=["picture",{id:d,jid:e,type:"set"},[["image",void 0,l],["preview",void 0,o]]],f=this.actionNode("set",[h]);this.binSend("send",f,n,{clientCacheable:!0,onSend:u,onDrop:this.wrap(n)},{debugString:"action,set_pic,"+e,metricName:"PIC",ackRequest:!1,expires:(0,m.default)().unix()})}))},sendSetStatus:function(e){return new Promise(((t,a)=>{const s=this.wrap(t),n=this.actionNode("set",[["status",void 0,e]]);this.binSend("send",n,a,{clientCacheable:!0,onSend:s,onDrop:this.wrap(a)},{debugString:"action,status,set",metricName:"STATUS",ackRequest:!1,expires:(0,m.default)().unix()})}))},sendSpamReport:function(e){return new Promise(((t,a)=>{const s=this.actionNode("set",[["spam",{jid:e},void 0]]);this.binSend("send",s,a,{onSend:this.wrap(t),onDrop:this.wrap(a)},{debugString:"action,spam,"+e,metricName:"SPAM",ackRequest:!1,expires:(0,m.default)().unix()})}))},sendUnstarAll:function(e){return new Promise(((t,a)=>{const s=this.actionNode("set",[["chat",{type:"unstar",jid:e||void 0},void 0]]);this.binSend("send",s,a,{clientCacheable:!0,onSend:this.binWrap(t,t),onDrop:this.wrap(a)},{debugString:"action,unstar,all,"+e,metrics:"CHAT",ackRequest:!0,expires:(0,m.default)().unix()})}))},setGroupParticipants:function(e,t,a){return new Promise(((s,n)=>{const i=O.Socket.tag(),r=this.wrap(s),o=a.map((e=>["participant",{jid:e},void 0])),l=["group",{id:i,jid:t,type:e,author:(0,C.getMaybeMeUser)()},o],d=this.actionNode("set",[l]);this.binSend("send",d,n,{tag:i,clientCacheable:!0,onSend:r,onDrop:this.wrap(n)},{debugString:["action,group,participant",e,t].concat(a).join(),metricName:"GROUP",ackRequest:!1,expires:(0,m.default)().unix()})}))},setPushname:function(e){return new Promise(((t,a)=>{const s=this.actionNode("set",[["profile",{name:e},void 0]]);this.binSend("send",s,a,{onSend:this.binWrap(t,t),onDrop:this.wrap(a)},{debugString:"action,pushname",metricName:"PROFILE",ackRequest:!1})}))}},M),x.default),{},{parseSendPaymentMessageProto:function(e,t,a){if(y.GK.supportsFeature(y.GK.F.MD_BACKEND))M.parseSendPaymentMessageProto(e,t,a);else{if((0,w.hasUnsupportedCurrency)(a))return e.subtype="phone_only_feature",void __LOG__(2)`[novi] parseSendPaymentMessageProto: does not support novi transactions`;if(e.type="payment",this.callFeatureFlagFun(y.GK.F.PAYMENTS,"parsePaymentInfo",e,a),y.GK.supportsFeature(y.GK.F.PAYMENTS)){e.subtype="send";const a=t.requestMessageKey;e.paymentRequestMessageKey=t.requestMessageKey?new T.default({fromMe:a.fromMe,remote:this.decodeJid(a.remoteJid),id:a.id,participant:this.decodeJid(a.participant)}):void 0,t.noteMessage&&(e.paymentNoteMsg={},t.noteMessage=this.parseMsgProto(t.noteMessage,e.paymentNoteMsg))}}},parseRequestPaymentMessageProto:function(e,t,a){if(y.GK.supportsFeature(y.GK.F.MD_BACKEND))M.parseRequestPaymentMessageProto(e,t,a);else{if((0,w.hasUnsupportedCurrency)(a))return e.subtype="phone_only_feature",void __LOG__(2)`[novi] parseRequestPaymentMessageProto: does not support novi transactions`;e.type="payment",this.callFeatureFlagFun(y.GK.F.PAYMENTS,"parsePaymentInfo",e,a),y.GK.supportsFeature(y.GK.F.PAYMENTS)&&(e.subtype="request",t.currencyCodeIso4217&&!e.paymentCurrency&&(e.paymentCurrency=t.currencyCodeIso4217),t.amount1000&&!e.paymentAmount1000&&(e.paymentAmount1000=t.amount1000),t.requestFrom&&!e.paymentMessageReceiverJid&&(e.paymentMessageReceiverJid=this.decodeJid(t.requestFrom)),t.expiryTimestamp&&!e.paymentExpiryTimestamp&&(e.paymentExpiryTimestamp=t.expiryTimestamp),t.noteMessage&&(e.paymentNoteMsg={},t.noteMessage=this.parseMsgProto(t.noteMessage,e.paymentNoteMsg)))}},parseGroupInviteMessageProto:function(e,t){e.type="groups_v4_invite",y.GK.supportsFeature(y.GK.F.GROUPS_V_4_JOIN_PERMISSION)&&(e.inviteCode=t.inviteCode,e.inviteCodeExp=t.inviteExpiration,e.inviteGrp=t.groupJid,e.inviteGrpName=t.groupName,e.inviteGrpJpegThum=this.decodeBytes(t.jpegThumbnail),e.comment=M.convertToTextWithoutSpecialEmojis(t.caption))},parseContextInfoProto:function(e,t,a){const s=t.quotedMessage,n=t.mentionedJid;e.quotedMsg=s&&this.parseMsgProto(s,{type:"unknown"}),e.quotedMsg&&"payment"===e.quotedMsg.type&&a&&this.callFeatureFlagFun(y.GK.F.PAYMENTS,"parsePaymentInfo",e.quotedMsg,a),e.quotedStanzaID=t.stanzaId,e.quotedParticipant=this.decodeJid(t.participant),e.quotedRemoteJid=this.decodeJid(t.remoteJid),e.mentionedJidList=Array.isArray(n)?n.map(this.decodeJid):n,e.isForwarded=t.isForwarded,e.forwardingScore=t.forwardingScore,null!=t.expiration&&(e.ephemeralDuration=t.expiration),null!=t.ephemeralSettingTimestamp&&(e.ephemeralSettingTimestamp=t.ephemeralSettingTimestamp),null!=t.ephemeralSharedSecret&&(e.ephemeralSharedSecret=t.ephemeralSharedSecret),null!=t.disappearingMode&&this.parseDisappearingModeProto(e,t.disappearingMode)},msgCreateRecord:(D=(0,i.default)((function*(e){const t=yield(0,h.promiseCallSync)((()=>{if(["ptt","audio","image","video","document","sticker","product"].includes(e.type)){const t="ptt"===e.type?"audio":e.type;let a;return e.asMms&&(a=e.isUnsentPhoneMsg()?{type:e.type}:e.avParams()),e.local&&!e.mediaKey?this.sendMedia(a):(0,d.default)({status:200,type:t},a)}})).catch((e=>{throw __LOG__(3)`wap:msgCreateRecord mPromise error (${(0,p.encodeErrorInfo)()}): ${e.stack}`,new Error("wap:msgCreateRecord mPromise error")}));if(t&&200!==t.status)throw __LOG__(3)`wap:msgCreateRecord:sendMedia error ${t.status}`,new Error(`wap:msgCreateRecord:sendMedia error ${t.status}`);const s=e.id.id,n=(0,S.createMessageKey)(e),i=(0,S.createMsgProtobuf)(e,t||{}),r=!!e.multicast||void 0,o=!!e.urlText||void 0,l=!!e.urlNumber||void 0,u=!!e.clearMedia||void 0,c=N.default.isUser(e.id.remote)||null==e.ephemeralDuration?void 0:e.ephemeralDuration,f={key:n,message:i,messageTimestamp:e.t,multicast:r,urlText:o,urlNumber:l,clearMedia:u,ephemeralDuration:c},m=this.actionNode("relay",[["message",void 0,(0,p.encodeProtobuf)(j.WebMessageInfoSpec,f).readBuffer()]]);return new Promise(((t,n)=>{this.binSend("send",m,n,{tag:s,onSend:this.wrap(t),onDrop:this.wrap(n),retryOn5xx:!0,resendGuard:()=>{const t=a(59871).MsgCollection.get(e.id);return"protocol"===e.type||t&&t.id.equals(e.id)}},{debugString:["action","message",e.type,e.subtype,s].join(),debugObj:{xml:m,pb:f},metricName:"MESSAGE",ackRequest:!1})}))})),function(){return D.apply(this,arguments)}),msgFindQuery:function(e,t,a,s){let n=e;return new Promise(((e,i)=>{let o,l="";switch(n){case"after":t.id||(n="before");case"before":o={type:"message",kind:n,jid:t.remote,count:t.count.toString(),index:t.id,owner:void 0===t.fromMe?void 0:t.fromMe.toString(),participant:t.participant},l=[t instanceof T.default?t.toString():t.remote,t.count].join();break;case"search":o={type:"search",search:t.searchTerm,page:t.page.toString(),count:t.count.toString(),jid:t.remote,canceled:t.tagToCancel},t.label?o=(0,r.default)((0,r.default)({},o),{},{label:t.label}):t.filter&&(o=(0,r.default)((0,r.default)({},o),{},{filter:t.filter})),l=["search",t.page,t.count,t.jid,t.label].join();break;case"star":o={type:"star",media:"gif"===t.media?t.media:void 0,chat:t.chat,count:t.count.toString(),jid:t.remote,index:t.id,owner:void 0===t.fromMe?void 0:t.fromMe.toString(),participant:t.participant},l="starred";break;case"media":o={type:"media_message",media:"document"===t.media||"url"===t.media?t.media:void 0,count:t.count.toString(),kind:t.direction,jid:t.remote,index:t.id,owner:void 0===t.fromMe?void 0:t.fromMe.toString(),participant:t.participant},l="media"}const d=this.queryNode(o,void 0);this.binSend("sendEphemeral",d,i,{onSend:this.binWrap((a=>{this.BinaryProtocol.read(a).then((a=>{let s=[];const i=this.N.children(a);if(__LOG__(2)`bin-recv: response,msg`,"response"===this.N.tag(a)&&("message"===this.N.attr("type",a)||"star"===this.N.attr("type",a)||"search"===this.N.attr("type",a)||"media_message"===this.N.attr("type",a)||"label"===this.N.attr("type",a))){if(Array.isArray(i)){let e;const a=i.length;for(e=0;e<a;e++){const a=this.parseMsg(i[e],"response");if(a)switch(n){case"star":("gif"!==t.media||"video"===a.type&&a.isGif)&&s.push(a);break;case"media":"document"===t.media&&"document"===a.type||"url"===t.media&&"chat"===a.type?s.push(a):t.media||s.push(a);break;default:s.push(a)}}}"search"===this.N.attr("type",a)||"label"===this.N.attr("type",a)?s={eof:"true"===this.N.attr("last",a),messages:s}:"media"!==n||t.media||(s={docCount:parseInt(this.N.attr("document",a),10)||void 0,linkCount:parseInt(this.N.attr("url",a),10)||void 0,mediaCount:parseInt(this.N.attr("media",a),10)||void 0,messages:s})}e(s)})).catch(i)}),e),onDrop:this.wrap(i),logOnSend:a,onTag:s,tagToCancel:t.tagToCancel},{debugString:"query,message,"+l,metricName:"search"===n?"QUERY_SEARCH":"QUERY_MESSAGES",ackRequest:!1})}))},queryVcard:function(e){return new Promise(((t,a)=>{const s=this.queryNode({type:"vcard",jid:e},void 0);this.binSend("sendEphemeral",s,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{const a=[],s=this.N.children(e);if("response"===this.N.tag(e)&&"vcard"===this.N.attr("type",e)&&Array.isArray(s)){const e=s.length;for(let t=0;t<e;t++){const e=this.parseMsg(s[t],"response");!e||"vcard"!==e.type&&"multi_vcard"!==e.type||a.push(e)}}t(a)})).catch(a)}),t),onDrop:this.wrap(a)},{debugString:`query,vcard,${e}`,metricName:"QUERY_VCARD",ackRequest:!1})}))},parseContacts:function(e){if("contacts"!==this.N.tag(e))return;const t=this.N.attr("type",e),a=this.N.children(e);let s,n,i,r,o;switch(t){case"frequent":if(Array.isArray(a)){n=a.length;for(let e=0;e<n;e++)switch(o=a[e],i=this.N.tag(o),i){case"image":case"video":case"message":r=this.N.attr("jid",o),r&&(s||(s={type:"frequent"}),s[i]?s[i].push(r):s[i]=[r])}}}return s},statusQuery:function(){switch(arguments.length){case 2:case 3:case 4:return this.statusQueryUpdate.apply(this,arguments);case 0:default:return this.statusQueryAll()}},statusQueryAll:function(){return new Promise(((e,t)=>{const a=this.queryNode({type:"status"},void 0);this.binSend("sendEphemeral",a,t,{onSend:this.binWrap((a=>{this.BinaryProtocol.read(a).then((t=>{const a={statuses:[]},s=this.N.children(t);if(__LOG__(2)`bin-recv: response,statusv3`,"response"===this.N.tag(t)&&"status"===this.N.attr("type",t)&&(a.checksum=this.N.attr("checksum",t),Array.isArray(s))){const e=s.length;for(let t=0;t<e;t++){const e=s[t],n=this.N.attr("jid",e),i=this.N.attr("unread",e),r=this.N.attr("count",e),o=this.N.attr("t",e);if("status"===this.N.tag(e)&&n&&r&&o){const t={id:n,unreadCount:parseInt(i,10)||0,totalCount:parseInt(r,10)||0,t:parseInt(o,10)||0,_msgs:[]},s=this.N.children(e);if(Array.isArray(s)){const e=s.length;for(let a=0;a<e;a++)switch(this.N.tag(s[a])){default:case"message":const e=this.parseMsgMessage(s[a],"response");e&&t._msgs.push(e);break;case"picture":const n=this.N.children(s[a]);n instanceof ArrayBuffer&&(t.pic=n)}}a.statuses.push(t)}}}e(a)})).catch(t)}),e),onDrop:this.wrap(t)},{debugString:"query,statusv3",metricName:"QUERY_STATUS",ackRequest:!1})}))},statusQueryUpdate:function(e,t,a,s){return new Promise(((n,i)=>{const r="before"===s?"before":"after",o={type:"status",kind:r,chat:e,count:t.toString(),jid:a?a.remote:void 0,index:a?a.id:void 0,owner:a?a.fromMe.toString():void 0,participant:a?a.participant:void 0},l=this.queryNode(o,void 0);this.binSend("sendEphemeral",l,i,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{const t=[],a=this.N.children(e);if(__LOG__(2)`bin-recv: response,statusv3`,"response"===this.N.tag(e)&&"status"===this.N.attr("type",e)&&Array.isArray(a)){const e=a.length;for(let s=0;s<e;s++){const e=this.parseMsg(a[s],"response");e&&t.push(e)}}n(t)})).catch(i)}),n),onDrop:this.wrap(i)},{debugString:["query","statusv3",r,t,a instanceof T.default?a.toString():e].join(),metricName:"QUERY_STATUS_UPDATE",ackRequest:!1})}))},sendConversationSeen:function(e,t,a,s,n){return new Promise(((i,r)=>{const o=this.actionNode("set",[["read",{kind:s?"status":void 0,chat:s?n:void 0,jid:e,index:t?t.id:void 0,owner:t?t.fromMe.toString():void 0,participant:t?t.participant:void 0,count:a&&t?a.toString():void 0},void 0]]);this.binSend("send",o,r,{clientCacheable:!0,onSend:this.wrap(i),onDrop:this.wrap(r)},{debugString:"action,"+(s?"status":"chat")+",read,"+JSON.stringify(t)+","+a,metricName:"READ",ackRequest:!0})}))},sendStatusSeen:function(e,t){return this.sendConversationSeen(e.remote,e,void 0,!0,t)},requestMediaReupload:function(e,t){return new Promise(((a,s)=>{const n=e.id,i=Array.isArray(t)?t.map((e=>["user",{jid:e},void 0])):void 0,r=n,o=this.queryNode({type:"media",index:r.id,jid:r.remote,owner:r.fromMe.toString(),participant:r.participant},i);this.binSend("sendEphemeral",o,s,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{let t;if(__LOG__(2)`bin-recv: response,media`,"response"===this.N.tag(e)&&"media"===this.N.attr("type",e)){const a=parseInt(this.N.attr("code",e),10)||400,s=this.N.attr("url",e);a>=500&&502!==a?(__LOG__(3)`wap:requestMediaReupload:error ${a}`,t={status:a}):200===a&&s?t={status:200,url:s,mediaKey:this.N.attr("media_key",e),mediaKeyTimestamp:this.N.attr("media_key_timestamp",e),encFilehash:this.N.attr("enc_filehash",e),directPath:this.N.attr("direct_path",e)}:200!==a||s?(__LOG__(3)`wap:requestMediaReupload:error ${a}`,t={status:a}):(__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("wap:requestMediaReupload:emptyUrl"),t={status:400})}else __LOG__(3)`wap:requestMediaReupload:malformed`,t={status:400};a(t)})).catch(s)}),a),onDrop:this.wrap(s)},{debugString:"query,media",metricName:"QUERY_MEDIA",ackRequest:!1})}))},parseCmd:function(e){switch(this.N.tag(e)){case"read":const t=this.N.attr("jid",e),a="false"===this.N.attr("type",e),s="status"===this.N.attr("kind",e),n=this.N.attr("checksum",e),i=this.N.attr("index",e),r="true"===this.N.attr("owner",e),o=this.N.attr("participant",e),l=this.N.attr("chat",e);let d;try{d=new T.default({id:i,fromMe:r,remote:t,participant:o})}catch(e){}const u={type:a?"unread":"read",jid:t,isStatus:s,checksum:n,chat:this.decodeJid(l),key:d},c=[!t,s&&!d];return this.dropIfConditionMet(c,u);case"identity":const h=this.parseIdentity(e);return h?(h.type="identity",h):void 0;default:return}},parseContact:function(e,t){if("user"!==this.N.tag(e))return __LOG__(4,void 0,new Error,!0)`expected tag: user, received tag: ${this.N.tag(e)}, tag id: ${this.N.attr("id",e)}`,void SEND_LOGS("wap-unexpected-tag");let a=this.N.attr("name",e),s="true"===this.N.attr("enterprise",e);const n=this.N.attr("jid",e)||t,i=this.N.attr("short",e)||void 0,r=this.N.attr("type",e)||"in",o=this.N.attr("notify",e),l=this.N.attr("verify",e),d="true"===this.N.attr("status_mute",e),u=this.N.attr("index",e)||void 0,c=this.N.attr("vname",e),h=parseInt(this.N.attr("dm_duration",e),10)||0,f=parseInt(this.N.attr("dm_t",e),10)||0;let p,m;switch(l){case"true":case"0":case"1":case"2":p=!0,m=parseInt(l,10)||0;break;default:p=!1,s=!1}a||m!==g.default.VERIFIED_LEVEL.HIGH||(a=c);const _=this.N.children(e),v=[];if(Array.isArray(_))for(let e=0;e<_.length;e++){const t=_[e];if("label"===this.N.tag(t)){const e=this.N.attr("id",t);e&&v.push(e)}}const C={id:n,name:a,type:r,shortName:i,pushname:o,isBusiness:p,verifiedLevel:m,statusMute:d,sectionHeader:u,verifiedName:c,labels:v,isEnterprise:s,disappearingModeDuration:h,disappearingModeSettingTimestamp:f};return this.dropIfConditionMet([!n,"in"!==r&&"out"!==r&&!!r],C)},parseAck:function(e){if("received"!==this.N.tag(e))return __LOG__(4,void 0,new Error,!0)`expected tag: received, received tag: ${this.N.tag(e)}, tag id: ${this.N.attr("id",e)}`,void SEND_LOGS("wap-unexpected-tag");const t=this.N.attr("type",e),a=this.N.attr("index",e),s=this.N.attr("jid",e),n="true"===this.N.attr("owner",e),i=this.N.attr("participant",e);let r;switch(t){case"message":r=g.default.ACK.RECEIVED;break;case"read":r=g.default.ACK.READ;break;case"played":r=g.default.ACK.PLAYED;break;case"error":r=g.default.ACK.FAILED;break;case"pending":default:r=g.default.ACK.CLOCK}const o=(0,C.getMaybeMeUser)(),l={cmd:"ack",id:a,ack:r,from:n?o:s,to:n?s:o,participant:i,self:n?"out":"in"},d=[!a,!s,N.default.isStatusV3(s),"message"!==t&&"read"!==t&&"played"!==t&&"error"!==t&&"pending"!==t];return this.dropIfConditionMet(d,l)},parseMsgMessage:function(e,t){if("message"!==this.N.tag(e))return void __LOG__(3)`drop: not message`;const a=this.N.children(e);if(a instanceof ArrayBuffer)try{const e=(0,f.decodeProtobuf)(j.WebMessageInfoSpec,a);return this.parseWebMessageInfo(e,t)}catch(e){return __LOG__(2)`wmi error: ${String(e)}`,__LOG__(4,void 0,new Error,!0)`drop: failed parsing wmi`,void SEND_LOGS("parse-error")}else __LOG__(3)`drop: no bytes`},parseProtocolMessageProto:function(e,t,a){if("relay"===a||t.type===v.ProtocolMessageType.EPHEMERAL_SETTING)switch(e.type="protocol",t.type){case v.ProtocolMessageType.REVOKE:const a=t.key,s=new T.default({fromMe:a.fromMe,remote:this.decodeJid(a.remoteJid),id:a.id,participant:this.decodeJid(a.participant)});e.subtype="sender_revoke",e.protocolMessageKey=s;break;case v.ProtocolMessageType.EPHEMERAL_SETTING:e.subtype="ephemeral_setting",e.ephemeralDuration=t.ephemeralExpiration;break;case v.ProtocolMessageType.EPHEMERAL_SYNC_RESPONSE:e.subtype="ephemeral_sync_response",e.ephemeralDuration=t.ephemeralExpiration,e.ephemeralSettingTimestamp=t.ephemeralSettingTimestamp;break;default:e.subtype="unknown"}},sendConversationPin:function(e,t,a){return new Promise(((s,n)=>{const i=this.actionNode("set",[["chat",{type:"pin",pin:t?t.toString():void 0,previous:a?a.toString():void 0,jid:e},void 0]]);this.binSend("send",i,n,{clientCacheable:!0,onSend:this.wrap(s),onDrop:this.wrap(n)},{debugString:["action","chat",e,t?"pin,"+t:"unpin,"+a].join(),metricName:"CHAT",ackRequest:!0})}))},subscribeLiveLocation:function(e,t){return new Promise(((a,s)=>{const n=this.queryNode({type:"location",kind:"subscribe",jid:e,participant:t?"true":void 0},void 0);this.binSend("sendEphemeral",n,s,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{const s=this.N.children(e),n={participants:[]};if(__LOG__(2)`bin-recv: response,location`,"response"!==this.N.tag(e)||"location"!==this.N.attr("type",e))return void a(n);const i=parseInt(this.N.attr("duration",e),10);if(n.duration=Number.isNaN(i)?void 0:i,!t||!Array.isArray(s))return t&&__LOG__(2)`LiveLocation:response with no participants`,void a(n);const r=s.length;for(let e=0;e<r;e++){const t=s[e],a=this.N.attr("jid",t),i=parseInt(this.N.attr("expiration",t),10),r=parseInt(this.N.attr("elapsed",t),10)||0,o=this.N.children(t);if("participant"!==this.N.tag(t)||!a)continue;const l={id:a,expiration:Number.isNaN(i)?void 0:i,elapsed:r};if(o){const e=(0,f.decodeProtobuf)(v.MessageSpec,o).liveLocationMessage;e&&M.parseLiveLocationMessageProto(l,e)}l.lat&&l.lng?__LOG__(2)`LiveLocation:response with lat/lng`:__LOG__(2)`LiveLocation:response without lat/lng`,n.participants.push(l)}a(n)})).catch(s)}),a),onDrop:this.wrap(s)},{debugString:["query,location",e,t].join(),metricName:"QUERY_LIVE_LOCATIONS"})}))},unsubscribeLiveLocation:function(e){return new Promise(((t,a)=>{const s=this.actionNode("set",[["location",{type:"unsubscribe",jid:e},void 0]]);this.binSend("send",s,a,{clientCacheable:!0,onSend:this.wrap(t),onDrop:this.wrap(a)},{debugString:"action,location,unsubscribe,"+e,metricName:"LIVE_LOCATION"})}))},queryActiveLiveLocation:function(e){return new Promise(((t,a)=>{const s=this.queryNode({type:"location",kind:"participant",jid:e},void 0);this.binSend("sendEphemeral",s,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{const a=this.N.children(e),s={participants:[]};if(__LOG__(2)`bin-recv: response,location`,"response"!==this.N.tag(e)||"location"!==this.N.attr("type",e))return void t(s);if(!Array.isArray(a))return void t(s);const n=a.length;for(let e=0;e<n;e++){const t=a[e],n=this.N.attr("jid",t),i=parseInt(this.N.attr("expiration",t),10);if("participant"!==this.N.tag(t)||!n)continue;const r={id:n,expiration:Number.isNaN(i)?void 0:i};s.participants.push(r)}t(s)})).catch(a)}),t),onDrop:this.wrap(a)},{debugString:"query,location,participant,"+e,metricName:"QUERY_LIVE_LOCATIONS"})}))},disableLiveLocation:function(e){return new Promise(((t,a)=>{const s=this.actionNode("set",[["location",{type:"disable",jid:e},void 0]]);this.binSend("send",s,a,{clientCacheable:!0,onSend:this.wrap(t),onDrop:this.wrap(a)},{debugString:"action,location,disable,"+e,metricName:"LIVE_LOCATION"})}))},parseLocation:function(e){if("location"!==this.N.tag(e))return;const t=this.N.attr("type",e),a=this.N.attr("jid",e),s=this.N.attr("author",e),n=parseInt(this.N.attr("elapsed",e),10)||0,i=parseInt(this.N.attr("id",e),10)||0,r=this.N.children(e),o={type:t};switch(t){case"update":if(o.jid=a,o.elapsed=n,r){const e=(0,f.decodeProtobuf)(v.MessageSpec,r).liveLocationMessage;e&&M.parseLiveLocationMessageProto(o,e)}o.type="update",o.lat&&o.lng?__LOG__(2)`LiveLocation:update with lat/lng`:__LOG__(2)`LiveLocation:update without lat/lng`;break;case"disable":o.jid=s||a,o.chat=a,o.seq=i}return this.pruneUndefinedProps(o),this.dropIfConditionMet(["update"!==t&&"disable"!==t,!("update"!==t||a&&r),"disable"===t&&!a],o)},parseMsgStubProto:function(e,t){const a=j.WebMessageInfoStubType;switch(e.messageStubType){case a.REVOKE:return t.type="revoked",t.subtype="sender",t;case a.CIPHERTEXT:return t.type="ciphertext",t;case a.OVERSIZED:return t.type="oversized",t;case a.FUTUREPROOF:return t.subtype="phone",t;default:return this.parseMsgStubTemplate(e,t)}},parseMsgStubTemplate:function(e,t){const a=j.WebMessageInfoStubType;switch(t.type="notification_template",t.templateParams=Array.isArray(e.messageStubParameters)?e.messageStubParameters.map((t=>e.messageStubType===a.GROUP_CREATE||e.messageStubType===a.GROUP_CHANGE_SUBJECT?t:this.decodeJid(t))):void 0,e.messageStubType){case a.NON_VERIFIED_TRANSITION:t.subtype="non_verified_transition";break;case a.UNVERIFIED_TRANSITION:t.subtype="unverified_transition";break;case a.VERIFIED_TRANSITION:t.subtype="verified_transition";break;case a.VERIFIED_LOW_UNKNOWN:t.subtype="verified_low_unknown";break;case a.VERIFIED_HIGH:t.subtype="verified_high";break;case a.VERIFIED_INITIAL_UNKNOWN:t.subtype="verified_initial_unknown";break;case a.VERIFIED_INITIAL_LOW:t.subtype="verified_initial_low";break;case a.VERIFIED_INITIAL_HIGH:t.subtype="verified_initial_high";break;case a.VERIFIED_TRANSITION_ANY_TO_NONE:t.subtype="verified_transition_any_to_none";break;case a.VERIFIED_TRANSITION_ANY_TO_HIGH:t.subtype="verified_transition_any_to_high";break;case a.VERIFIED_TRANSITION_HIGH_TO_LOW:t.subtype="verified_transition_high_to_low";break;case a.VERIFIED_TRANSITION_HIGH_TO_UNKNOWN:t.subtype="verified_transition_high_to_unknown";break;case a.VERIFIED_TRANSITION_UNKNOWN_TO_LOW:t.subtype="verified_transition_unknown_to_low";break;case a.VERIFIED_TRANSITION_LOW_TO_UNKNOWN:t.subtype="verified_transition_low_to_unknown";break;case a.VERIFIED_TRANSITION_NONE_TO_LOW:t.subtype="verified_transition_none_to_low";break;case a.VERIFIED_TRANSITION_NONE_TO_UNKNOWN:t.subtype="verified_transition_none_to_unknown";break;case a.GROUP_CREATE:t.type="gp2",t.subtype="create",t.body=t.templateParams[0],t.recipients=[],t.templateParams=void 0;break;case a.GROUP_DELETE:t.type="gp2",t.subtype="delete",t.recipients=[],t.templateParams=void 0;break;case a.GROUP_CHANGE_SUBJECT:t.type="gp2",t.subtype="subject",t.body=t.templateParams[0],t.recipients=[],t.templateParams=void 0;break;case a.GROUP_CHANGE_ICON:t.type="gp2",t.subtype="picture",t.recipients=[],t.body=t.templateParams[0],t.templateParams=void 0;break;case a.GROUP_CHANGE_INVITE_LINK:t.type="gp2",t.subtype="revoke_invite",t.recipients=[];break;case a.GROUP_CHANGE_DESCRIPTION:t.type="gp2",t.subtype="description",t.recipients=[];break;case a.GROUP_CHANGE_RESTRICT:t.type="gp2",t.subtype="restrict",t.recipients=[],t.body=t.templateParams[0];break;case a.GROUP_CHANGE_ANNOUNCE:t.type="gp2",t.subtype="announce",t.recipients=[],t.body=t.templateParams[0];break;case a.GROUP_CHANGE_NO_FREQUENTLY_FORWARDED:t.type="gp2",t.subtype="no_frequently_forwarded",t.recipients=[],t.body=t.templateParams[0];break;case a.GROUP_ANNOUNCE_MODE_MESSAGE_BOUNCE:t.type="gp2",t.subtype="announce_msg_bounce",t.recipients=[],t.templateParams=void 0;break;case a.GROUP_PARTICIPANT_ADD:t.type="gp2",t.subtype="add",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.GROUP_PARTICIPANT_REMOVE:t.type="gp2",t.subtype="remove",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.GROUP_PARTICIPANT_PROMOTE:t.type="gp2",t.subtype="promote",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.GROUP_PARTICIPANT_DEMOTE:t.type="gp2",t.subtype="demote",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.GROUP_PARTICIPANT_INVITE:t.type="gp2",t.subtype="invite",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.GROUP_PARTICIPANT_LEAVE:t.type="gp2",t.subtype="leave",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.GROUP_PARTICIPANT_CHANGE_NUMBER:t.type="gp2",t.subtype="modify",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.GROUP_V4_ADD_INVITE_SENT:t.type="gp2",t.subtype="v4_add_invite_sent",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.GROUP_PARTICIPANT_ADD_REQUEST_JOIN:t.type="gp2",t.subtype="v4_add_invite_join",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.GROUP_INVITE_LINK_GROWTH_LOCKED:t.type="gp2",t.subtype="true"===t.templateParams[0]?"growth_locked":"growth_unlocked",t.body="invite",t.recipients=[],t.templateParams=void 0;break;case a.BROADCAST_CREATE:t.type="broadcast_notification",t.subtype="create",t.body=t.templateParams[0]||"0",t.templateParams=void 0;break;case a.BROADCAST_ADD:t.type="broadcast_notification",t.subtype="add",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.BROADCAST_REMOVE:t.type="broadcast_notification",t.subtype="remove",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.GENERIC_NOTIFICATION:t.type="notification",t.body=t.templateParams[0],t.templateParams=void 0;break;case a.E2E_IDENTITY_CHANGED:t.type="e2e_notification",t.subtype="identity",t.body=t.templateParams[0]instanceof N.default?t.templateParams[0].toString():t.templateParams[0],t.templateParams=void 0;break;case a.E2E_IDENTITY_UNAVAILABLE:t.type="e2e_notification",t.subtype="e2e_identity_unavailable";break;case a.E2E_DEVICE_CHANGED:t.type="e2e_notification",t.subtype="device",t.body=t.templateParams[0]instanceof N.default?t.templateParams[0].toString():t.templateParams[0],t.devicesAdded=parseInt(t.templateParams[1],10),t.devicesRemoved=parseInt(t.templateParams[2],10),t.templateParams=void 0;break;case a.E2E_ENCRYPTED:t.type="e2e_notification",t.subtype="encrypt";break;case a.E2E_ENCRYPTED_NOW:t.type="e2e_notification",t.subtype="encrypt_now";break;case a.CALL_MISSED_VOICE:t.type="call_log",t.subtype="miss";break;case a.CALL_MISSED_VIDEO:t.type="call_log",t.subtype="miss_video";break;case a.CALL_MISSED_GROUP_VOICE:t.type="call_log",t.subtype="miss_group";break;case a.CALL_MISSED_GROUP_VIDEO:t.type="call_log",t.subtype="miss_group_video";break;case a.INDIVIDUAL_CHANGE_NUMBER:t.subtype="change_number";break;case a.CHANGE_EPHEMERAL_SETTING:t.type="gp2",t.subtype="ephemeral",t.author=t.templateParams[1],t.recipients=[];break;case a.PAYMENT_CIPHERTEXT:t.type="payment",t.subtype="ciphertext",this.callFeatureFlagFun(y.GK.F.PAYMENTS,"parsePaymentInfo",t,e.paymentInfo);break;case a.PAYMENT_FUTUREPROOF:t.type="payment",t.subtype="futureproof",this.callFeatureFlagFun(y.GK.F.PAYMENTS,"parsePaymentInfo",t,e.paymentInfo);break;case a.PAYMENT_ACTION_REQUEST_CANCELLED:t.subtype="payment_transaction_request_cancelled";break;case a.PAYMENT_TRANSACTION_STATUS_UPDATE_FAILED:t.subtype="payment_transaction_status_update_failed";break;case a.PAYMENT_TRANSACTION_STATUS_UPDATE_REFUNDED:t.subtype="payment_transaction_status_update_refunded";break;case a.PAYMENT_TRANSACTION_STATUS_UPDATE_REFUND_FAILED:t.subtype="payment_transaction_status_update_refund_failed";break;case a.PAYMENT_TRANSACTION_STATUS_RECEIVER_PENDING_SETUP:t.subtype="payment_transaction_status_receiver_pending_setup";break;case a.PAYMENT_TRANSACTION_STATUS_RECEIVER_SUCCESS_AFTER_HICCUP:t.subtype="payment_transaction_status_receiver_success_after_hiccup";break;case a.PAYMENT_ACTION_ACCOUNT_SETUP_REMINDER:t.subtype="payment_action_account_setup_reminder";break;case a.PAYMENT_ACTION_SEND_PAYMENT_REMINDER:t.subtype="payment_action_send_payment_reminder";break;case a.PAYMENT_ACTION_SEND_PAYMENT_INVITATION:t.subtype="payment_action_send_payment_invitation";break;case a.PAYMENT_ACTION_REQUEST_DECLINED:t.subtype="payment_action_request_declined";break;case a.PAYMENT_ACTION_REQUEST_EXPIRED:t.subtype="payment_action_request_expired";break;case a.BIZ_VERIFIED_TRANSITION_TOP_TO_BOTTOM:t.subtype="biz_verified_transition_top_to_bottom";break;case a.BIZ_VERIFIED_TRANSITION_BOTTOM_TO_TOP:t.subtype="biz_verified_transition_bottom_to_top";break;case a.BIZ_INTRO_TOP:t.subtype="biz_intro_top";break;case a.BIZ_INTRO_BOTTOM:t.subtype="biz_intro_bottom";break;case a.BIZ_NAME_CHANGE:t.subtype="biz_name_change";break;case a.BIZ_MOVE_TO_CONSUMER_APP:t.subtype="biz_move_to_consumer_app";break;case a.BIZ_TWO_TIER_MIGRATION_TOP:t.subtype="biz_two_tier_migration_top";break;case a.BIZ_TWO_TIER_MIGRATION_BOTTOM:t.subtype="biz_two_tier_migration_bottom";break;case a.BLUE_MSG_BSP_FB_TO_BSP_PREMISE:t.subtype="blue_msg_bsp_fb_to_bsp_premise";break;case a.BLUE_MSG_BSP_FB_TO_SELF_FB:t.subtype="blue_msg_bsp_fb_to_self_fb";break;case a.BLUE_MSG_BSP_FB_TO_SELF_PREMISE:t.subtype="blue_msg_bsp_fb_to_self_premise";break;case a.BLUE_MSG_BSP_FB_UNVERIFIED:t.subtype="blue_msg_bsp_fb_unverified";break;case a.BLUE_MSG_BSP_FB_UNVERIFIED_TO_BSP_PREMISE_VERIFIED:t.subtype="blue_msg_bsp_fb_unverified_to_bsp_premise_verified";break;case a.BLUE_MSG_BSP_FB_UNVERIFIED_TO_SELF_FB_VERIFIED:t.subtype="blue_msg_bsp_fb_unverified_to_self_fb_verified";break;case a.BLUE_MSG_BSP_FB_UNVERIFIED_TO_SELF_PREMISE_VERIFIED:t.subtype="blue_msg_bsp_fb_unverified_to_self_premise_verified";break;case a.BLUE_MSG_BSP_FB_VERIFIED:t.subtype="blue_msg_bsp_fb_verified";break;case a.BLUE_MSG_BSP_FB_VERIFIED_TO_BSP_PREMISE_UNVERIFIED:t.subtype="blue_msg_bsp_fb_verified_to_bsp_premise_unverified";break;case a.BLUE_MSG_BSP_FB_VERIFIED_TO_SELF_FB_UNVERIFIED:t.subtype="blue_msg_bsp_fb_verified_to_self_fb_unverified";break;case a.BLUE_MSG_BSP_FB_VERIFIED_TO_SELF_PREMISE_UNVERIFIED:t.subtype="blue_msg_bsp_fb_verified_to_self_premise_unverified";break;case a.BLUE_MSG_BSP_PREMISE_TO_SELF_PREMISE:t.subtype="blue_msg_bsp_premise_to_self_premise";break;case a.BLUE_MSG_BSP_PREMISE_UNVERIFIED:t.subtype="blue_msg_bsp_premise_unverified";break;case a.BLUE_MSG_BSP_PREMISE_UNVERIFIED_TO_SELF_PREMISE_VERIFIED:t.subtype="blue_msg_bsp_premise_unverified_to_self_premise_verified";break;case a.BLUE_MSG_BSP_PREMISE_VERIFIED:t.subtype="blue_msg_bsp_premise_verified";break;case a.BLUE_MSG_BSP_PREMISE_VERIFIED_TO_SELF_PREMISE_UNVERIFIED:t.subtype="blue_msg_bsp_premise_verified_to_self_premise_unverified";break;case a.BLUE_MSG_CONSUMER_TO_BSP_FB_UNVERIFIED:t.subtype="blue_msg_consumer_to_bsp_fb_unverified";break;case a.BLUE_MSG_CONSUMER_TO_BSP_PREMISE_UNVERIFIED:t.subtype="blue_msg_consumer_to_bsp_premise_unverified";break;case a.BLUE_MSG_CONSUMER_TO_SELF_FB_UNVERIFIED:t.subtype="blue_msg_consumer_to_self_fb_unverified";break;case a.BLUE_MSG_CONSUMER_TO_SELF_PREMISE_UNVERIFIED:t.subtype="blue_msg_consumer_to_self_premise_unverified";break;case a.BLUE_MSG_SELF_FB_TO_BSP_PREMISE:t.subtype="blue_msg_self_fb_to_bsp_premise";break;case a.BLUE_MSG_SELF_FB_TO_SELF_PREMISE:t.subtype="blue_msg_self_fb_to_self_premise";break;case a.BLUE_MSG_SELF_FB_UNVERIFIED:t.subtype="blue_msg_self_fb_unverified";break;case a.BLUE_MSG_SELF_FB_UNVERIFIED_TO_BSP_PREMISE_VERIFIED:t.subtype="blue_msg_self_fb_unverified_to_bsp_premise_verified";break;case a.BLUE_MSG_SELF_FB_UNVERIFIED_TO_SELF_PREMISE_VERIFIED:t.subtype="blue_msg_self_fb_unverified_to_self_premise_verified";break;case a.BLUE_MSG_SELF_FB_VERIFIED:t.subtype="blue_msg_self_fb_verified";break;case a.BLUE_MSG_SELF_FB_VERIFIED_TO_BSP_PREMISE_UNVERIFIED:t.subtype="blue_msg_self_fb_verified_to_bsp_premise_unverified";break;case a.BLUE_MSG_SELF_FB_VERIFIED_TO_SELF_PREMISE_UNVERIFIED:t.subtype="blue_msg_self_fb_verified_to_self_premise_unverified";break;case a.BLUE_MSG_SELF_PREMISE_TO_BSP_PREMISE:t.subtype="blue_msg_self_premise_to_bsp_premise";break;case a.BLUE_MSG_SELF_PREMISE_UNVERIFIED:t.subtype="blue_msg_self_premise_unverified";break;case a.BLUE_MSG_SELF_PREMISE_VERIFIED:t.subtype="blue_msg_self_premise_verified";break;case a.BLUE_MSG_TO_BSP_FB:t.subtype="blue_msg_to_bsp_fb";break;case a.BLUE_MSG_TO_CONSUMER:t.subtype="blue_msg_to_consumer";break;case a.BLUE_MSG_TO_SELF_FB:t.subtype="blue_msg_to_self_fb";break;case a.BLUE_MSG_UNVERIFIED_TO_BSP_FB_VERIFIED:t.subtype="blue_msg_unverified_to_bsp_fb_verified";break;case a.BLUE_MSG_UNVERIFIED_TO_BSP_PREMISE_VERIFIED:t.subtype="blue_msg_unverified_to_bsp_premise_verified";break;case a.BLUE_MSG_UNVERIFIED_TO_SELF_FB_VERIFIED:t.subtype="blue_msg_unverified_to_self_fb_verified";break;case a.BLUE_MSG_UNVERIFIED_TO_VERIFIED:t.subtype="blue_msg_unverified_to_verified";break;case a.BLUE_MSG_VERIFIED_TO_BSP_FB_UNVERIFIED:t.subtype="blue_msg_verified_to_bsp_fb_unverified";break;case a.BLUE_MSG_VERIFIED_TO_BSP_PREMISE_UNVERIFIED:t.subtype="blue_msg_verified_to_bsp_premise_unverified";break;case a.BLUE_MSG_VERIFIED_TO_SELF_FB_UNVERIFIED:t.subtype="blue_msg_verified_to_self_fb_unverified";break;case a.BLUE_MSG_VERIFIED_TO_UNVERIFIED:t.subtype="blue_msg_verified_to_unverified";break;case a.BIZ_PRIVACY_MODE_INIT_FB:t.subtype="biz_privacy_mode_init_fb";break;case a.BIZ_PRIVACY_MODE_INIT_BSP:t.subtype="biz_privacy_mode_init_bsp";break;case a.BIZ_PRIVACY_MODE_TO_FB:t.subtype="biz_privacy_mode_to_fb";break;case a.BIZ_PRIVACY_MODE_TO_BSP:t.subtype="biz_privacy_mode_to_bsp";break;case a.DISAPPEARING_MODE:t.subtype="disappearing_mode";break;case a.BLOCK_CONTACT:t.subtype="block_contact";break;case a.ADMIN_REVOKE:(0,b.adminRevokeHistorySyncConsumerEnabled)()&&(t.type="revoked",t.subtype="admin",t.revokeSender=t.templateParams[1]instanceof N.default?t.templateParams[1]:void 0,t.revokeSender||__LOG__(2)`ProtocolParser: admin revoke came without admin JID`),t.templateParams=void 0;break;default:t.templateParams=void 0}return t},sendCallOffer:function(e){return new Promise(((t,a)=>{const s=(0,P.newTag)(),n=k.VoipSignaling.formatCallOffer(this,s,e);this.binSend("send",n,a,{tag:s,onSend:this.wrap((e=>{t(e)}),t),onDrop:this.wrap(a),retryOn5xx:!0,isCallOffer:!0},{debugString:["action","call","offer",e.common.peer_jid].join(),debugObj:{xml:n,struct:e},metricName:"CALL"})}))},sendMdOptIn:function(){return new Promise(((e,t)=>{const a=this.actionNode("set",[["MDOptIn",{enabled:"true"},void 0]]);this.binSend("send",a,t,{onSend:this.binWrap((a=>{this.BinaryProtocol.read(a).then((t=>{__LOG__(2)`bin-recv: response,MDOptIn`;const a={status:200};"error"===this.N.tag(t)&&(a.status=this.N.attr("code",t)),e(a)})).catch(t)}),e),onDrop:this.wrap(t)},{debugString:"action,md_opt_in,enabled",metricName:"MD_OPT_IN"})}))},supportsFeatureFlags:!0,implementedFeatures:{}});var D,L=(0,o.default)(R,_.default);t.Z=L},6878:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.refreshCart=function(e,t,a,s,o){let l;!0===o&&(0,r.qplPointCartView)("datasource_start"),l=i.GK.supportsFeature(i.GK.F.MD_BACKEND)?(0,n.attemptWithDirectConnectionRetry)(e,(n=>(0,d.refreshCartMD)(e,t,a,s,n))):u.default.refreshCart(e.toString(),t,a,s);return l.then((e=>(!0===o&&(0,r.qplPointCartView)("datasource_end"),e))),l},t.updateCart=function(e,t){let a=Promise.resolve();if(t&&l.QPL.markerPoint(t,"datasource_start"),i.GK.supportsFeature(i.GK.F.MD_BACKEND))if(e.itemCount>0||e.message&&e.message.length>0){const t=function(e){const t=e.cartItemCollection.map((e=>({id:e.id,priceAmount1000:e.priceAmount1000,currency:e.currency,name:e.name,quantity:e.quantity,imageHash:e.imageHash})));return{id:e.id.toString(),message:e.message,total:e.total,currency:e.currency,itemCount:e.itemCount,products:t}}(e);a=(0,o.getCartTable)().createOrReplace(t)}else a=(0,o.getCartTable)().remove(e.id.toString());return a.then((()=>t&&l.QPL.markerPoint(t,"datasource_end"))),a};var n=a(97951),i=a(7293),r=a(90549),o=a(76214),l=a(48870),d=(a(27798),a(71055)),u=s(a(56891))},68825:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.createOrder=function(e,t){let a;(0,o.qplPointOrderCreate)("datasource_start"),a=r.GK.supportsFeature(r.GK.F.MD_BACKEND)?(0,n.attemptWithDirectConnectionRetry)(e,(a=>(0,i.createOrderMD)(e,t,a))):d.default.createOrder(e.user,t);return a.then((()=>(0,o.qplPointOrderCreate)("datasource_end"))),a},t.queryOrder=function(e,t,a,s,i){let u;(0,o.qplPointOrderView)("datasource_start"),u=r.GK.supportsFeature(r.GK.F.MD_BACKEND)?(0,n.attemptWithDirectConnectionRetry)(e,(e=>(0,l.queryOrder)(t,a,s,i,e))):d.default.queryOrder(t,a,s,i);return u.then((()=>(0,o.qplPointOrderView)("datasource_end"))),u};var n=a(97951),i=a(63262),r=a(7293),o=a(90549),l=a(49693),d=s(a(56891))},35863:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.fetchCtwaContextData=function(e){const{phone:t,sourceUrl:a,context:s}=e;if(!t||!a||!s)return Promise.reject(new Error("Invalid params passed to fetchCtwaContextData"));let o;n.GK.supportsFeature(n.GK.F.MD_BACKEND)?(o=(0,i.default)(t,s,a),o||(o=Promise.reject(new Error("Should not reach fetchCtwaContextData MD")))):o=r.default.queryCtwaContext(t,s,a);return o};var n=a(7293),i=s(a(76815)),r=s(a(56891))},77982:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendConversationArchive=function(e,t,a){let s;if(u.GK.supportsFeature(u.GK.F.MD_BACKEND)){const a=(0,i.unixTimeMs)();s=o.default.getMutationsForArchive(a,t,e).then(function(){var a=(0,n.default)((function*(a){try{return yield(0,c.lockForMessageRangeSync)(["chat"],a,function(){var s=(0,n.default)((function*(s){let[n]=s;if(a[0].action!==l.Actions.Archive)throw new Error("syncd: expected archive action from getMutationsForArchive");return yield(0,r.addActiveMessageRange)(e.toString(),"archive",a[0].binarySyncAction),n.merge(e.toString(),function(e){const t={archive:e};e&&(t.pin=void 0);return t}(t))}));return function(){return s.apply(this,arguments)}}()),{status:200,_duplicate:null}}catch(e){if(e instanceof d.DbOnLogoutAbort)throw e;throw __LOG__(4,!0,new Error,!0)`update chat table failed`,SEND_LOGS("update chat table failed when send conversation to archive"),new Error("update chat table failed")}}));return function(){return a.apply(this,arguments)}}()),s||(s=Promise.reject(new Error("Should not reach here")))}else s=h.default.sendConversationArchive(e,t,a);return s};var n=s(a(48926)),i=a(92844),r=a(38342),o=s(a(74362)),l=a(45606),d=a(64103),u=a(7293),c=a(19937),h=s(a(56891))},83872:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.broadcastListEnabled=function(){if(s.GK.supportsFeature(s.GK.F.MD_BACKEND))return!1;return!0};var s=a(7293)},1133:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.eagerlyEstablishE2EESession=function(){return h.apply(this,arguments)};var n=s(a(48926)),i=a(26409),r=a(99234),o=a(7293),l=a(97398),d=s(a(11339)),u=a(43201),c=a(16860);function h(){return(h=(0,n.default)((function*(e){if(o.GK.supportsFeature(o.GK.F.MD_BACKEND)){let t;if(e.isGroup){t=(yield(0,u.getGroupSenderKeyList)(e.id)).skDistribList}else{const a=(0,r.assertGetMe)();t=yield(0,i.getFanOutListJob)([e.id,a])}const a=yield(0,l.ensureE2ESessions)(t);(0,c.postPrekeysDepletionMetric)({count:null==a?void 0:a.depletedPrekeyCount,prekeysFetchReason:d.default.PREKEYS_FETCH_CONTEXT.USER_INTENT_PREFETCH,messageType:e.isGroup?d.default.MESSAGE_TYPE.GROUP:d.default.MESSAGE_TYPE.INDIVIDUAL,chatId:e.id})}}))).apply(this,arguments)}},29894:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getNumChatsPinned=function(){if(r.GK.supportsFeature(r.GK.F.MD_BACKEND))return o.default.getLocalPins().then((e=>e.length));return Promise.resolve(i.ChatCollection.filter((e=>e.pin)).length)},t.setPin=function(){return h.apply(this,arguments)},t.unpinAll=function(){if(r.GK.supportsFeature(r.GK.F.MD_BACKEND))return o.default.unpinAll();return Promise.resolve()};var n=s(a(48926)),i=a(69951),r=a(7293),o=s(a(36014)),l=a(38804),d=s(a(78375)),u=s(a(56891)),c=a(77591);function h(){return(h=(0,n.default)((function*(e,t,a,s){let n;if(r.GK.supportsFeature(r.GK.F.MD_BACKEND)){const a=0!==t,i=yield o.default.getMutationsForPin(s,a,e);a||d.default.addUnsetActionCount(1),n=(0,l.lockForSync)(["chat"],i,(a=>{let[s]=a;return s.merge(e.toString(),{pin:t})})).then((()=>({status:200,_duplicate:null}))),n||(n=Promise.reject(new Error("Should not reach here")))}else n=u.default.sendConversationPin(e,t,a).then((e=>{if(200!==e.status)throw new c.ServerStatusCodeError(e.status);return e}));return n}))).apply(this,arguments)}},77486:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let t;if(n.GK.supportsFeature(n.GK.F.MD_BACKEND)){const a=e.toString();t=(0,i.getParticipantTable)().equals(["participants"],a).then((e=>e.map((e=>(0,l.createWid)(e.groupId))))),t||(t=Promise.reject(new Error("Should not reach here")))}else t=r.default.commonGroupsFind(e).then((e=>{if(200!==e.status)throw new o.ServerStatusCodeError(e.status);return e.groups}));return t};var n=a(7293),i=a(76214),r=s(a(56891)),o=a(77591),l=a(58021)},69586:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendJoinGroupViaInvite=function(e){let t;if(n.GK.supportsFeature(n.GK.F.MD_BACKEND)){if(t=(0,i.joinGroupViaInvite)(e).then((e=>e.gid)),!t)return Promise.reject(new Error("joinGroupViaInvite: not supported when not build with MD_BACKEND"))}else t=r.default.acceptGroupInvite(e).then((e=>{if(200===e.status)return e.gid;throw new o.ServerStatusCodeError(e.status)}));return t},t.sendQueryGroupInviteCode=function(e){let t;if(n.GK.supportsFeature(n.GK.F.MD_BACKEND)){if(t=(0,i.queryGroupInviteCode)(e).then((e=>e.code)),!t)return Promise.reject(new Error("queryGroupInvite: not supported when not build with MD_BACKEND"))}else t=r.default.groupInviteCode(e).then((e=>{if(200===e.status)return e.code;throw new o.ServerStatusCodeError(e.status)}));return t},t.sendRevokeGroupInviteCode=function(e){let t;if(n.GK.supportsFeature(n.GK.F.MD_BACKEND)){if(t=(0,i.revokeGroupInviteCode)(e).then((e=>e.code)),!t)return Promise.reject(new Error("queryGroupInvite: not supported when not build with MD_BACKEND"))}else t=r.default.revokeGroupInvite(e).then((e=>{if(200===e.status)return e.code;throw new o.ServerStatusCodeError(e.status)}));return t};var n=a(7293),i=a(35654),r=s(a(56891)),o=a(77591)},57490:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendSetGroupDescription=function(e,t,a,s){let n;if(i.GK.supportsFeature(i.GK.F.MD_BACKEND)){if(n=(0,r.setGroupDescription)(e,t,a,s).then((()=>({_duplicate:!1}))),!n)return Promise.reject(new Error("sendSetGroupDescription: not supported when not build with MD_BACKEND"))}else n=o.default.setGroupDescription(e,t,a,s).then((e=>{if(200!==e.status)throw new l.ServerStatusCodeError(e.status);return{_duplicate:e._duplicate}}));return n},t.sendSetGroupProperty=function(e,t,a){let s;if(i.GK.supportsFeature(i.GK.F.MD_BACKEND)){if(s=(0,r.setGroupProperty)(e,t,a).then((()=>({_duplicate:!1}))),!s)return Promise.reject(new Error("sendSetGroupProperty: not supported when not build with MD_BACKEND"))}else s=t===n.default.GROUP_SETTING_TYPE.EPHEMERAL?o.default.setGroupEphemeralDuration(e,a):o.default.setGroupProperty(e,t,Boolean(a)),s=s.then((e=>{if(200!==e.status)throw new l.ServerStatusCodeError(e.status);return{_duplicate:e._duplicate}}));return s},t.sendSetGroupSubject=function(e,t){let a;if(i.GK.supportsFeature(i.GK.F.MD_BACKEND)){if(a=(0,r.setGroupSubject)(e,t).then((()=>({_duplicate:null}))),!a)return Promise.reject(new Error("sendSetGroupSubject: not supported when not build with MD_BACKEND"))}else a=o.default.changeSubject(e,t).then((e=>{if(200!==e.status)throw new l.ServerStatusCodeError(e.status);return{_duplicate:e._duplicate}}));return a};var n=s(a(69618)),i=a(7293),r=a(77287),o=s(a(56891)),l=a(77591)},58355:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return n.GK.supportsFeature(n.GK.F.MD_BACKEND)?((0,i.default)(e,e.chat.id),Promise.resolve()):r.default.sendMessagePlayed(e.id).then((()=>{}))};var n=a(7293),i=s(a(71504)),r=s(a(56891))},65372:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendUpgradeToMD=function(){return n.GK.supportsFeature(n.GK.F.MD_BACKEND)?Promise.reject(new Error("not supported for MD")):i.default.sendMdOptIn()};var n=a(7293),i=s(a(56891))},97278:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.AudioManagerImpl=t.AudioManager=void 0;var n=s(a(45595));class i{constructor(e){var t;this._listeners=new Map,this._activeAudios=new Map,this._inactiveAudios=new Map,this._releaseTimeouts=new Map,this.__TEST_ONLY__={getActiveAudio:e=>this._activeAudios.get(e),getAllAudios:()=>[...this._activeAudios.values(),...this._inactiveAudios.values()]},this._minPoolSize=null!==(t=null==e?void 0:e.minPoolSize)&&void 0!==t?t:1}addAudioListener(e,t,a){var s,n;null===(s=this._activeAudios.get(e))||void 0===s||s.addEventListener(t,a),null===(n=this._inactiveAudios.get(e))||void 0===n||n.addEventListener(t,a);let i=this._listeners.get(e);null==i&&(i=new Set,this._listeners.set(e,i)),i.add({type:t,listener:a})}removeAudioListener(e,t,a){var s,n;null===(s=this._activeAudios.get(e))||void 0===s||s.removeEventListener(t,a),null===(n=this._inactiveAudios.get(e))||void 0===n||n.removeEventListener(t,a);const i=this._listeners.get(e);if(null!=i){for(const e of i)if(e.type===t&&e.listener===a){i.delete(e);break}0===i.size&&this._listeners.delete(e)}}createAudioProxy(){return new n.default(this)}_getAudio(e){var t;const a=this._activeAudios.get(e);if(null!=a)return clearTimeout(this._releaseTimeouts.get(a)),this._releaseTimeouts.delete(a),a;const s=this._inactiveAudios.get(e);if(null!=s)return this._inactiveAudios.delete(e),this._activeAudios.set(e,s),s;if(this._activeAudios.size+this._inactiveAudios.size>=this._minPoolSize)for(const[t,a]of this._inactiveAudios){var n,i;return this._inactiveAudios.delete(t),this._activeAudios.set(e,a),null===(n=this._listeners.get(t))||void 0===n||n.forEach((e=>{let{type:t,listener:s}=e;a.removeEventListener(t,s)})),null===(i=this._listeners.get(e))||void 0===i||i.forEach((e=>{let{type:t,listener:s}=e;a.addEventListener(t,s)})),a}const r=new Audio;this._activeAudios.set(e,r),null===(t=this._listeners.get(e))||void 0===t||t.forEach((e=>{let{type:t,listener:a}=e;r.addEventListener(t,a)}));const o=()=>{for(const[e,t]of this._activeAudios)if(t===r){this._activeAudios.delete(e),this._inactiveAudios.set(e,r);break}};return r.addEventListener("pause",(()=>{this._releaseTimeouts.set(r,setTimeout(o,1e3))})),r}play(e,t){const a=this._getAudio(e);return a.src=e.src,a.currentTime=t.currentTime,a.playbackRate=t.playbackRate,a.defaultPlaybackRate=t.defaultPlaybackRate,a.play()}pause(e){var t;null===(t=this._activeAudios.get(e))||void 0===t||t.pause()}load(e){var t;null===(t=this._activeAudios.get(e))||void 0===t||t.load()}setDefaultPlaybackRate(e,t){const a=this._activeAudios.get(e);null!=a&&(a.defaultPlaybackRate=t)}setPlaybackRate(e,t){const a=this._activeAudios.get(e);null!=a&&(a.playbackRate=t)}getCurrentTime(e){var t,a;return null!==(t=null===(a=this._activeAudios.get(e))||void 0===a?void 0:a.currentTime)&&void 0!==t?t:null}setCurrentTime(e,t){const a=this._activeAudios.get(e);var s;null!=a?a.currentTime=t:null===(s=this._listeners.get(e))||void 0===s||s.forEach((e=>{let{type:t,listener:a}=e;"timeupdate"===t&&a()}))}getDuration(e){var t,a;return null!==(t=null===(a=this._activeAudios.get(e))||void 0===a?void 0:a.duration)&&void 0!==t?t:null}getPaused(e){var t,a;return null===(t=null===(a=this._activeAudios.get(e))||void 0===a?void 0:a.paused)||void 0===t||t}}t.AudioManagerImpl=i;const r=new i;t.AudioManager=r},45595:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=class{constructor(e){this._src="",this._currentTime=0,this._defaultPlaybackRate=1,this._playbackRate=1,this._audioManager=e}addEventListener(e,t){this._audioManager.addAudioListener(this,e,t)}removeEventListener(e,t){this._audioManager.removeAudioListener(this,e,t)}play(){return this._audioManager.play(this,{currentTime:this._currentTime,playbackRate:this._playbackRate,defaultPlaybackRate:this._defaultPlaybackRate})}pause(){this._audioManager.pause(this)}load(){this._audioManager.load(this)}set src(e){this._src=e}get src(){return this._src}get defaultPlaybackRate(){return this._defaultPlaybackRate}set defaultPlaybackRate(e){this._defaultPlaybackRate=e,this._audioManager.setDefaultPlaybackRate(this,e)}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._audioManager.setPlaybackRate(this,e)}get currentTime(){const e=this._audioManager.getCurrentTime(this);return null!=e&&(this._currentTime=e),this._currentTime}set currentTime(e){this._currentTime=e,this._audioManager.setCurrentTime(this,e)}get duration(){const e=this._audioManager.getDuration(this);return null!=e&&(this._duration=e),this._duration}get paused(){return this._audioManager.getPaused(this)}}},42874:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AVDeviceType=t.AVDeviceStatusContext=t.AVDeviceStatusCode=void 0;t.AVDeviceType={AudioInput:0,AudioOutput:1,Video:2,NotIdentified:3};t.AVDeviceStatusContext={DeviceSetup:0,DeviceMidstream:1,DeviceSelection:2,DeviceStop:3,DeviceOther:4};t.AVDeviceStatusCode={DeviceSuccess:0,FailureNonDevice:1,VideoDeviceNotFound:2,VideoDeviceUnsupportedCapability:3,VideoDeviceUnusable:4,VideoDeviceInUse:5,VideoDeviceUnauthorized:6,VideoDeviceTimeout:7,VideoDeviceOther:127,AudioCaptureDeviceNotFound:128,AudioPlaybackDeviceNotFound:129,AudioDeviceNotFound:130,AudioCaptureDeviceUnusable:131,AudioPlaybackDeviceUnusable:132,AudioDeviceUnusable:133,AudioCaptureDeviceInUse:134,AudioPlaybackDeviceInUse:135,AudioDeviceInUse:136,AudioCaptureDeviceUnauthorized:137,AudioPlaybackDeviceUnauthorized:138,AudioDeviceUnauthorized:139,AudioCaptureDeviceTimeout:140,AudioPlaybackDeviceTimeout:141,AudioDeviceTimeout:142,AudioCaptureDeviceOther:253,AudioPlaybackDeviceOther:254,AudioDeviceOther:255}},19065:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(42874);function n(e){return{uid:e.uid,name:e.name,deviceType:Number(e.deviceType),isConnected:Boolean(e.connected),isSelected:Boolean(e.isSelected),isSystemDefault:Boolean(e.isDefault)}}function i(e,t){return null==e?void 0:e.find((e=>e.isConnected&&e.isSystemDefault&&e.deviceType===t))}function r(e,t){return null==e?void 0:e.find((e=>e.isConnected&&e.isSelected&&e.deviceType===t))}var o={parseDeviceInfo:n,getAvailableDevices:function(e,t){var a;return null!==(a=null==e?void 0:e.filter((e=>e.deviceType===t&&e.isConnected)))&&void 0!==a?a:[]},getSanitizedDevices:function(e){const t=null==e?void 0:e.map((e=>n(e))),a=null==t?void 0:t.filter((e=>e.deviceType!==s.AVDeviceType.NotIdentified&&e.isConnected));return null!=a?a:[]},deviceInfoComparator:function(e,t){return e.deviceType!==t.deviceType?e.deviceType-t.deviceType:e.isSystemDefault||t.isSystemDefault?e.isSystemDefault?-1:1:e.isConnected===t.isConnected?0:e.isConnected?-1:1},getSystemDefaultDevice:i,getSelectedDevice:r,getSelectedDeviceIdOrDefault:function(e,t){var a,s;return null!==(a=null===(s=r(e,t))||void 0===s?void 0:s.uid)&&void 0!==a?a:""},getSystemDefaultCamera:function(e){return i(e,s.AVDeviceType.Video)},getSystemDefaultMicrophone:function(e){return i(e,s.AVDeviceType.AudioInput)},getSystemDefaultSpeaker:function(e){return i(e,s.AVDeviceType.AudioOutput)},getDiff:function(e,t){return{added:t.filter((t=>!e.some((e=>e.uid===t.uid)))),removed:e.filter((e=>!t.some((t=>t.uid===e.uid))))}},DEFAULT_DEVICE_ID:""};t.default=o},99058:(e,t,a)=>{"use strict";t.y=function(e){e.setHandlers("msg_collection",{processMultipleMessages(e){let{chatId:t,msgObjs:a,meta:s,chatMsgsCollection:n,preserveOrder:r}=e;return i.MsgCollection.processMultipleMessages(t,a,s,n,r)},trigger(e){let{name:t,args:a}=e;i.MsgCollection.trigger(t,a)},updateLastReceipt(e){let{wid:t,t:a}=e;i.MsgCollection.updateLastReceipt(t,a)}}),e.setHandlers("contact_collection",{updatePushname(e){let{contactId:t,pushname:a}=e;const s=n.ContactCollection.gadd(t);return s.pushname!==a&&(s.set({pushname:a}),!0)}}),e.setHandlers("chat_collection",{add(e){let{things:t,options:a}=e;return s.ChatCollection.add(t,a)},trigger(e){let{name:t,args:a}=e;s.ChatCollection.trigger(t,a)}}),e.setHandlers("status_v3_collection",{handleUpdate(e){let{rawMsg:t,checksum:a,isMsgUpdate:s}=e;return o.StatusV3Collection.handleUpdate(t,a,s)}}),e.setHandlers("msg_info_collection",{updateInfo(e){let{id:t,from:a,to:s,ack:n,participant:i,t:o}=e;r.MsgInfoCollection.updateInfo(t,a,s,n,i,o)}})};var s=a(69951),n=a(19380),i=a(59871),r=a(17972),o=a(59387)},41955:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=e.trim().normalize("NFKD");if((0,i.numCodepoints)(t)>=n.default.FTS_MIN_CHARS)return!0;if(r.test(t))return!0;if(o.test(t))return!0;return!1};var n=s(a(69618)),i=a(3940);const r=/(?!(?:[0-9\xB2\xB3\xB9\xBC-\xBE\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u09F4-\u09F9\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0B72-\u0B77\u0BE6-\u0BF2\u0C66-\u0C6F\u0C78-\u0C7E\u0CE6-\u0CEF\u0D58-\u0D5E\u0D66-\u0D78\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F33\u1040-\u1049\u1090-\u1099\u1369-\u137C\u16EE-\u16F0\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1946-\u194F\u19D0-\u19DA\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\u2070\u2074-\u2079\u2080-\u2089\u2150-\u2182\u2185-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2CFD\u3007\u3021-\u3029\u3038-\u303A\u3192-\u3195\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\uA620-\uA629\uA6E6-\uA6EF\uA830-\uA835\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]|\uD800[\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDEE1-\uDEFB\uDF20-\uDF23\uDF41\uDF4A\uDFD1-\uDFD5]|\uD801[\uDCA0-\uDCA9]|\uD802[\uDC58-\uDC5F\uDC79-\uDC7F\uDCA7-\uDCAF\uDCFB-\uDCFF\uDD16-\uDD1B\uDDBC\uDDBD\uDDC0-\uDDCF\uDDD2-\uDDFF\uDE40-\uDE48\uDE7D\uDE7E\uDE9D-\uDE9F\uDEEB-\uDEEF\uDF58-\uDF5F\uDF78-\uDF7F\uDFA9-\uDFAF]|\uD803[\uDCFA-\uDCFF\uDD30-\uDD39\uDE60-\uDE7E\uDF1D-\uDF26\uDF51-\uDF54\uDFC5-\uDFCB]|\uD804[\uDC52-\uDC6F\uDCF0-\uDCF9\uDD36-\uDD3F\uDDD0-\uDDD9\uDDE1-\uDDF4\uDEF0-\uDEF9]|\uD805[\uDC50-\uDC59\uDCD0-\uDCD9\uDE50-\uDE59\uDEC0-\uDEC9\uDF30-\uDF3B]|\uD806[\uDCE0-\uDCF2\uDD50-\uDD59]|\uD807[\uDC50-\uDC6C\uDD50-\uDD59\uDDA0-\uDDA9\uDFC0-\uDFD4]|\uD809[\uDC00-\uDC6E]|\uD81A[\uDE60-\uDE69\uDF50-\uDF59\uDF5B-\uDF61]|\uD81B[\uDE80-\uDE96]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDFCE-\uDFFF]|\uD838[\uDD40-\uDD49\uDEF0-\uDEF9]|\uD83A[\uDCC7-\uDCCF\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]))(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299\uFE0E\uFE0F]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])/,o=/(?:[\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u3005\u3007\u3021-\u3029\u3038-\u303B\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FD-\u30FF\u31F0-\u31FF\u32D0-\u32FE\u3300-\u3357\u3400-\u4DBF\u4E00-\u9FFC\uF900-\uFA6D\uFA70-\uFAD9\uFF66-\uFF6F\uFF71-\uFF9D]|\uD81B[\uDFF0\uDFF1]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67]|\uD83C\uDE00|[\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD869[\uDC00-\uDEDD\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/},97869:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(67294),i=a(84866),r=a(58668),o=a(49082),l=s(a(84215));function d(e,t){const a=(0,o.useModelValues)(e.mediaData,["filehash","mediaStage"]),s=(0,n.useRef)(null),d=(0,n.useMemo)((()=>i.MediaBlobCache.has(a.filehash)),[a]),u=e=>{const t=i.MediaBlobCache.get(e);if(!t)throw new Error("Cannot call createURL when the blob does not exist.");s.current=t;const a=new Blob([t],{type:t.type});return window.URL.createObjectURL(a)},[c,h]=(0,n.useState)((()=>d?u(a.filehash):null));(0,n.useEffect)((()=>{!d&&a.mediaStage===r.MEDIA_DATA_STAGE.RESOLVED&&e.downloadMedia&&e.downloadMedia()}),[]),(0,l.default)((()=>{var e;c&&(e=c,window.URL.revokeObjectURL(e))}));const f=()=>{const e=s.current;if(!e)throw new Error("Cannot call refreshBlob when the blob does not exist.");const t=new Blob([e],{type:e.type}),a=window.URL.createObjectURL(t);c&&window.URL.revokeObjectURL(c),h(a)};return(0,n.useEffect)((()=>{const e=a.filehash;d&&!c&&h(u(e))}),[d,a.filehash,c]),(0,n.useImperativeHandle)(t,(()=>({refreshBlob:f}))),c?e.children(c):e.placeholderRenderer()}var u=(0,n.forwardRef)(d);t.default=u},63793:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,r.useModelValues)(e.mediaData,["filehash","mediaStage"]),[a,o]=(0,s.useState)((()=>{n.MediaBlobCache.get(t.filehash)}));return(0,s.useEffect)((()=>{a||t.mediaStage!==i.MEDIA_DATA_STAGE.RESOLVED||e.downloadMedia()}),[]),(0,s.useEffect)((()=>{if(a)return;const{filehash:e}=t;n.MediaBlobCache.has(e)&&o(n.MediaBlobCache.get(e))}),[a,t]),a?e.render(a):e.renderPlaceholder()};var s=a(67294),n=a(84866),i=a(58668),r=a(49082)},20553:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(67294),i=a(27126),r=a(84866),o=a(58668),l=s(a(73465)),d=s(a(65932)),u=a(85893);class c extends n.Component{constructor(){super(...arguments),this.state={}}static getDerivedStateFromProps(e,t){const{renderProgressively:a}=e,{filehash:s,progressiveStage:n}=e.mediaData,l=t.stackedUrls||[],d=null!=n?(0,i.getProgressiveMediaCacheKey)(s,n):null;if(null!=d&&a){if(!e.renderProgressively)return null;if(d!==t.progressiveKey&&e.mediaData.mediaStage!==o.MEDIA_DATA_STAGE.RESOLVED){if(!r.MediaBlobCache.has(d))return __LOG__(4,void 0,new Error,!0)`Blob missing for trimmed-filehash: ${s.slice(0,10)} with progressive stage: ${n} and mediaStage: ${e.mediaData.mediaStage}`,SEND_LOGS("missing-progressive-blob"),null;t.url&&t.progressiveKey&&r.MediaBlobCache.decreaseUsageCount(t.progressiveKey),r.MediaBlobCache.increaseUsageCount(d);const a=r.MediaBlobCache.getOrCreateURL(d);return{filehash:s,url:a,progressiveKey:d,stackedUrls:[...l,a]}}if(r.MediaBlobCache.has(s)){const e=r.MediaBlobCache.getOrCreateURL(s);return t.url===e?null:(r.MediaBlobCache.increaseUsageCount(s),t.progressiveKey&&r.MediaBlobCache.decreaseUsageCount(t.progressiveKey),{filehash:s,url:e,progressiveKey:d,stackedUrls:[...l,e]})}return null}if(s!==t.filehash){var u;if(null===(u=e.downloadMedia)||void 0===u||u.call(e),t.url&&t.filehash&&r.MediaBlobCache.decreaseUsageCount(t.filehash),r.MediaBlobCache.has(s)){const e=r.MediaBlobCache.getOrCreateURL(s);return t.url===e?null:(r.MediaBlobCache.increaseUsageCount(s),t.progressiveKey&&r.MediaBlobCache.decreaseUsageCount(t.progressiveKey),{filehash:s,url:e,progressiveKey:d,stackedUrls:[...l,e]})}return{filehash:s}}if(r.MediaBlobCache.has(s)){const e=r.MediaBlobCache.getOrCreateURL(s);return t.url===e?null:(r.MediaBlobCache.increaseUsageCount(s),t.progressiveKey&&r.MediaBlobCache.decreaseUsageCount(t.progressiveKey),{filehash:s,url:e,progressiveKey:d,stackedUrls:[...l,e]})}return null}componentWillUnmount(){this.state.url&&(this.props.mediaData.mediaStage===o.MEDIA_DATA_STAGE.RESOLVED?r.MediaBlobCache.decreaseUsageCount(this.state.filehash):this.state.progressiveKey&&r.MediaBlobCache.decreaseUsageCount(this.state.progressiveKey))}render(){const{url:e,stackedUrls:t}=this.state,{renderProgressively:a}=this.props;return e?a?(0,u.jsxs)("div",{className:l.default.container,children:[(0,u.jsx)("div",{className:l.default.child,children:this.props.placeholderRenderer()}),t.map((e=>(0,u.jsx)("div",{className:l.default.child,children:this.props.children(e)},e)))]}):this.props.children(e):this.props.placeholderRenderer()}}c.CONCERNS={mediaData:["filehash","mediaStage","progressiveStage"]},c.displayName="MediaUrlProvider";var h=(0,d.default)(c,c.CONCERNS);t.default=h},61653:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.NuxKeyTypes=t.CoolOffPeriodKeys=void 0;s(a(11339));t.NuxKeyTypes={COOL_OFF_NUX:{INCOMPLETE_BUSINESS_PROFILE_BANNER:"incomplete_business_profile_banner",PRODUCT_CATALOG_BANNER:"product_catalog_banner",COLLECTIONS:"collections_banner",CART_INTERSTITIAL:"cart_interstitial"},VIEW_COUNT_NUX:{REVOKE_LEGAL_DISCLAIMER_NUX:"revoke_legal_disclaimer_nux",SAFARI_LIMITED_SUPPORT:"safari_limited_support",EPHEMERAL:"ephemeral",EPHEMERAL_VIEW_ONCE:"ephemeral_view_once",EPHEMERAL_VIEW_ONCE_RECEIVER:"ephemeral_view_once_receiver",ARCHIVE:"archive",COMMUNITY:"community"}};t.CoolOffPeriodKeys={DEFAULT:"default_cool_off_banners_key",CATALOG:"catalog_banners_key"}},1710:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.CoolOffNux=void 0,t.resetCoolOffNuxDate=function(){Object.keys(l.CoolOffPeriodKeys).forEach((e=>{d._setUser(l.CoolOffPeriodKeys[e])}))},t.resetNuxCoolOff=function(e){d._setUser(`${e}_cool_off`)},t.shouldShowNUX=function(e,t){return new c(e,void 0,t).shouldShow()};var i=n(a(81109)),r=n(a(30381)),o=n(a(11339)),l=a(61653),d=s(a(53055));const u={COOL_OFF_DURATION_IN_DAYS:4,VIEWS_BEFORE_COOL_OFF_IN_DAYS:2,CLICKS_BEFORE_COOL_OFF:1,MAX_DISMISSES:1,MAX_CLICKS:2,MAX_VIEWS_IN_DAYS:4,COOL_OFF_START_STORAGE_KEY:l.CoolOffPeriodKeys.DEFAULT};class c{constructor(e,t,a){this.key=`${e}_cool_off`,this.config=(0,i.default)((0,i.default)({},u),a),this.nux=this._getNUXOptions(),this.coolOffData=this._getCoolOffData(),this.metricField=t}_isValidNuxOptions(e){return null!=e.clicks&&null!=e.dismisses&&null!=e.lastViewedDay&&null!=e.viewDaysBeforeCoolOff&&null!=e.totalViewDays}_getNUXOptions(){let e=d._getUser(this.key);return null!=e&&this._isValidNuxOptions(e)||(this._setNUXOptions({viewDaysBeforeCoolOff:0,totalViewDays:0,clicks:0,dismisses:0,lastViewedDay:(0,r.default)(0)}),e=d._getUser(this.key)),e.lastViewedDay=(0,r.default)(e.lastViewedDay),e}_getCoolOffData(){let e=d._getUser(this.config.COOL_OFF_START_STORAGE_KEY);return null!=e&&null!=e.startDate&&null!=e.duration||(this._setLastCoolOffStartDay((0,r.default)(0)),e=d._getUser(this.config.COOL_OFF_START_STORAGE_KEY)),e.startDate=(0,r.default)(e.startDate),e}_setLastCoolOffStartDay(e){d._setUser(this.config.COOL_OFF_START_STORAGE_KEY,{startDate:e,duration:this.config.COOL_OFF_DURATION_IN_DAYS})}_startNewCoolOff(e){this._setLastCoolOffStartDay(e),this.coolOffData={startDate:e,duration:this.config.COOL_OFF_DURATION_IN_DAYS}}_setNUXOptions(e){d._setUser(this.key,e)}_updateNUXOptions(e){this._setNUXOptions(Object.assign(this.nux,e))}_isTodayCoolOff(){const e=(0,r.default)().diff(this.coolOffData.startDate,"days",!0);return e>=0&&e<this.coolOffData.duration}_logEvent(e){this.metricField&&new o.default.BannerEvent({bannerType:this.metricField,bannerOperation:e}).commit()}shouldShow(){const{totalViewDays:e,dismisses:t,clicks:a}=this.nux,{MAX_VIEWS_IN_DAYS:s,MAX_DISMISSES:n,MAX_CLICKS:i}=this.config;return e<s&&t<n&&a<i&&!this._isTodayCoolOff()}show(){let{lastViewedDay:e,viewDaysBeforeCoolOff:t,totalViewDays:a}=this.nux;const s=(0,r.default)();e.isSame(s,"day")||(t++,a++,t===this.config.VIEWS_BEFORE_COOL_OFF_IN_DAYS&&(t=0,this._startNewCoolOff((0,r.default)(s).add(1,"days"))),this._updateNUXOptions({viewDaysBeforeCoolOff:t,totalViewDays:a,lastViewedDay:s}),this._logEvent(o.default.BANNER_OPERATIONS.SHOWN))}click(){const e=this.nux.clicks+1;e===this.config.CLICKS_BEFORE_COOL_OFF&&this.startCoolOffToday(),this._updateNUXOptions({clicks:e}),this._logEvent(o.default.BANNER_OPERATIONS.CLICK)}dismiss(){this._updateNUXOptions({dismisses:this.nux.dismisses+1}),this._startNewCoolOff((0,r.default)()),this._logEvent(o.default.BANNER_OPERATIONS.DISMISS)}startCoolOffToday(){this._startNewCoolOff((0,r.default)())}}t.CoolOffNux=c},73867:(e,t,a)=>{"use strict";var s=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.handleIncomingSignalingMessage=function(e,t){const s=n.CallCollection.get(e.call_id);if(!s)return void __LOG__(3)`voip:voip_common_disabled: Received signaling msg type ${e.type} but could not find call for call ID`;switch(e.type){case r.TYPE.OFFER:null!=e.t&&(s.offerTime=e.t),s.isVideo=!!e.isVideoCall,s.setState(o.CALL_STATES.INCOMING_RING);break;case r.TYPE.TERMINATE:if(s.setState(o.CALL_STATES.ENDED),i.GK.supportsFeature(i.GK.F.MD_BACKEND)){switch(t.payload[1].reason){case"timeout":null==l&&(l=a(46167).default),l.generateMissedCallLog(e.call_creator,s.offerTime,s.isVideo,!1)}}}};var n=a(31218),i=a(7293),r=s(a(45473)),o=a(49835);let l=null},21469:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(80140),i=a(88102),r=s(a(52665)),o=s(a(43725)),l=a(85893);function d(e,t){i.Cmd.openModal((0,l.jsx)(r.default,{title:t,okText:o.default.t(1765),onOK:()=>i.Cmd.closeModal(),children:(0,l.jsx)("div",{children:e})}))}var u={openModal:d,openUnblockModal:function(e){i.Cmd.openModal((0,l.jsx)(r.default,{okText:o.default.t(1364),onOK:()=>{(0,n.unblockContact)(e).catch((()=>{})),i.Cmd.closeModal()},cancelText:o.default.t(1574),onCancel:()=>{i.Cmd.closeModal()},children:o.default.t(1528)}))},soundPortErrorModal:function(){d(o.default.t(1501),o.default.t(1502))},videoPortErrorModal:function(){const e=a(74943).default;i.Cmd.openModal((0,l.jsx)(r.default,{title:o.default.t(1504),okText:o.default.t(1246),onOK:()=>{i.Cmd.closeModal(),i.Cmd.openModal((0,l.jsx)(e,{}))},cancelText:o.default.t(1574),onCancel:()=>{i.Cmd.closeModal()},children:(0,l.jsx)("div",{children:o.default.t(1503)})}))}};t.default=u},46167:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(48221),i=a(31218),r=a(69951),o=a(88102),l=a(17239),d=s(a(69618)),u=a(19380),c=a(99234),h=a(32990),f=a(7293),p=s(a(43725)),m=a(5819),_=s(a(32219)),g=a(15860),v=a(8080),C=a(50452),S=s(a(69594)),y=s(a(21469)),b=a(49835),E=s(a(39938)),T=a(58021),x=a(85893);function M(e){return{callId:e.call_id,peerJid:e.peer_jid,initialPeerJid:e.initial_peer_jid,creatorJid:e.creator_jid,callerStatus:Boolean(e.caller_status),callActiveTime:{sec:e.call_active_time.sec,msec:e.call_active_time.msec},callDuration:e.call_duration,audioDuration:e.audio_duration,videoDuration:e.video_duration,canInviteNewParticipant:S.default.isGroupCallEnabled()&&Boolean(e.can_invite_new_participant),canSwitchAudioVideo:Boolean(e.can_switch_audio_video),isGroupCall:Boolean(e.is_group_call),participantCount:e.participant_count,participants:e.participants.filter((e=>null!=e.jid)).map((e=>{const t=(0,T.createUserWid)(e.jid.user,e.jid.server);return{wid:t.toString(),userJid:t.toString({legacy:!0}),deviceRawJid:e.device_raw_jid,isMuted:Boolean(e.is_muted),isSelf:Boolean(e.is_self),isInterrupted:Boolean(e.is_interrupted),isBackgrounded:Boolean(e.is_backgrounded),orderId:e.order_id,videoOrientation:e.video_orientation,videoRenderStarted:Boolean(e.video_render_started),videoState:e.video_state,state:e.state}})),videoCaptureStarted:Boolean(e.video_capture_started),videoPreviewStarted:Boolean(e.video_preview_started),videoEnabled:Boolean(e.video_enabled),videoEnabledAtCallStart:Boolean(e.video_enabled_at_call_start),rotateVideo:Boolean(e.rotate_video)}}function P(e){const t=r.ChatCollection.get(e.id);return!i.CallCollection.activeCall&&!e.isContactBlocked&&!(null==t?void 0:t.isSuspendedGroup())&&v.Stream.displayInfo===v.StreamInfo.NORMAL}function A(e){if(e)return i.CallCollection.get(e)}var I={parseCallInfo:M,canStartCall:P,canStartVideoCall:function(e){return P(e)&&n.AvDevices.isVideoAvailable},isParticipantRequestingVideoUpgrade:function(e,t){const a=A(e);return!!(a&&a.callInfo&&a.callInfo.participants.length)&&!!a.callInfo.participants.find((e=>e.isSelf===t&&e.videoState===b.VideoState.VideoStateUpgradeRequest))},updateCallWithCallInfo:function(e){const t=e&&A(e.call_id);e&&t&&(t.callInfo=M(e))},callOfferNackToast:function(e,t,a,s){const n=t.map((e=>{const t=u.ContactCollection.get(e);return t?t.shortName||t.name||t.displayName:(0,E.default)(e)})).join(p.default.t(420));let i=null;switch(e){case 401:i=p.default.t(1524);break;case 404:i=p.default.t(1527,{callee:n});break;case 405:i=p.default.t(1522,{callee:n});break;case 460:case 406:i=a?p.default.t(1529,{callee:n}):p.default.t(1526,{callee:n});break;case 426:i=a?p.default.t(1529,{callee:n}):p.default.t(1525,{callee:n});break;case 427:i=S.default.isGroupCallEnabled()?p.default.t(1509,{callee:n,_plural:t.length}):a?p.default.t(1545):p.default.t(1521);break;case 461:i=f.GK.supportsFeature(f.GK.F.MD_BACKEND)?s?p.default.t(1507):p.default.t(1523,{callee:n}):a?p.default.t(1545):p.default.t(1521);break;default:i=a?p.default.t(1545):p.default.t(1521)}i&&o.Cmd.openToast((0,x.jsx)(C.Toast,{msg:i,id:(0,C.genId)()}))},getCallFromCallId:A,checkIfCanStartCall:function(e){var t;if(!e.isGroup&&!e.contact)return __LOG__(4,void 0,new Error)`voip:checkIfCanStartCall expected contact to be provided`,!1;let a=!0;if(v.Stream.displayInfo!==v.StreamInfo.NORMAL)switch(a=!1,v.Stream.displayInfo){case v.StreamInfo.RESUMING:case v.StreamInfo.TIMEOUT:y.default.openModal(p.default.t(1517),p.default.t(1518));break;case v.StreamInfo.OFFLINE:case v.StreamInfo.OPENING:case v.StreamInfo.CONNECTING:default:y.default.openModal(p.default.t(1515),p.default.t(1516))}else!e.isGroup&&(null===(t=e.contact)||void 0===t?void 0:t.isContactBlocked)?(a=!1,y.default.openUnblockModal(e.contact)):i.CallCollection.activeCall?(a=!1,y.default.openModal(p.default.t(1505))):n.AvDevices.isMicrophoneAvailable?n.AvDevices.isSpeakerAvailable?e.isVideo&&!n.AvDevices.isVideoAvailable&&(__LOG__(2)`voip:checkIfCanStartCall false due to camera not available`,a=!1,y.default.openModal(p.default.t(1511),p.default.t(1512))):(__LOG__(2)`voip:checkIfCanStartCall false due to speaker not available`,a=!1,y.default.openModal(p.default.t(1519),p.default.t(1520))):(__LOG__(2)`voip:checkIfCanStartCall false due to microphone not available`,a=!1,y.default.openModal(p.default.t(1513),p.default.t(1514)));return a},getGroupCallParticipantNameString:function(e,t){let a;return a=e.length<=2?e.map((e=>t?e.shortName:e.name)).join(p.default.t(420)):e[0].name+" "+p.default.t(418)+p.default.t(1510,{count:e.length-1,_plural:e.length-1}),a},generateMissedCallLog:function(e,t,a,s){const n=(0,T.toUserWid)(e);if(f.GK.supportsFeature(f.GK.F.MD_BACKEND)){let e;e=s?a?"miss_group_video":"miss_group":a?"miss_video":"miss";const i={id:new _.default({remote:n,fromMe:!1,id:(0,g.newTag)()}),type:d.default.MSG_TYPE.CALL_LOG,subtype:e,from:n,t:null!=t?t:Date.now()/1e3,to:(0,c.assertGetMe)()};(0,m.handleSingleMsgMD)(n,i)}},isVoiceCallEnabled:function(e,t){return!!l.Conn.isVoipInitialized&&((null==t||!(t.isUser&&!S.default.isVoiceCallEnabled()||t.isGroup&&!S.default.isGroupCallEnabled()))&&(null==e||!e.isEnterprise&&!(0,h.getIsInternalNumber)(e.id.user)))},isVideoCallEnabled:function(e){return!!l.Conn.isVoipInitialized&&(!!e&&(!e.isEnterprise&&!(0,h.getIsInternalNumber)(e.id.user)&&(e.isUser&&S.default.isVideoCallEnabled()||e.isGroup&&S.default.isGroupCallEnabled())))}};t.default=I},38680:(e,t,a)=>{"use strict";var s=a(95318);t.j=void 0;var n=a(69951),i=a(88102),r=s(a(69618)),o=a(19380),l=s(a(96222)),d=s(a(34342)),u=a(99234),c=s(a(11339)),h=a(59871),f=a(47524),p=s(a(14528)),m=a(8080);function _(){return Math.floor(window.performance.now())}class g extends d.default{constructor(){var e;super(),this.timings={chatSync:void 0,contactSync:void 0,endSync:void 0,msgSync:void 0,startSync:void 0},this.data={webcPersistentLoginEnabled:!1,webcQrCodes:0,webcSyncMessageCount:0,webcSyncMessageSize:0},(null===(e=window.performance)||void 0===e?void 0:e.now)&&((0,u.knowsPhone)()?this.listenToOnce(i.Cmd,"logout",this.init):this.init())}init(){this.timings.startSync=m.Stream.lastSyncStart,this.listenTo(m.Stream,"change:mode",this.changeStreamMode),this.listenTo(n.ChatCollection,r.default.COLLECTION_HAS_SYNCED,this.onChatSync),this.listenTo(o.ContactCollection,r.default.COLLECTION_HAS_SYNCED,this.onContactSync),this.listenTo(h.MsgCollection,r.default.COLLECTION_HAS_SYNCED,this.onMsgSync),this.listenTo(h.MsgCollection,"handle:msg_history",this.onMsgHistory)}changeStreamMode(){m.Stream.mode===m.StreamMode.SYNCING&&(this.timings.startSync=_(),this.data.webcPersistentLoginEnabled=(0,u.getRememberMe)()),m.Stream.mode===m.StreamMode.MAIN&&(this.timings.endSync=_(),this.maybeLogToWam())}onChatSync(e){null!=e.timing?this.data.webcSyncChatT=e.timing:this.timings.chatSync=_(),this.data.webcSyncChatCount=e.count,this.data.webcSyncChatSize=e.binarySize,this.maybeLogToWam()}onMsgSync(e){e&&(this.timings.msgSync=_(),this.data.webcSyncMessageCount+=e.count,this.data.webcSyncMessageSize+=e.binarySize),this.maybeLogToWam()}onContactSync(e){null!=e.timing?this.data.webcSyncContactT=e.timing:this.timings.contactSync=_(),this.data.webcSyncContactCount=e.count,this.data.webcSyncContactSize=e.binarySize,this.maybeLogToWam()}onMsgHistory(e){this.data.webcSyncMessageSize+=e.binarySize,this.data.webcSyncMessageCount+=e.count,null!=this.timings.msgSync&&(this.timings.msgSync=_())}maybeLogToWam(){const{contactSync:e,msgSync:t,chatSync:a}=this.timings,s=null!=a&&Number.isFinite(a||this.data.webcSyncChatT),n=null!=e&&Number.isFinite(e||this.data.webcSyncContactT),i=Number.isFinite(t);s&&n&&i&&(this._commitPromise||(this._commitPromise=(0,l.default)().then((e=>this._commitEvent(e))).catch((()=>{__LOG__(3)`wam:Error comitting login event`})).finally((()=>this.reset()))))}_commitEvent(e){const{startSync:t,endSync:a,contactSync:s,msgSync:n,chatSync:i}=this.timings,r=p.default.initialDisplayDate;if(null!=r&&0!==r&&null!=t&&null!=a&&null!=n&&null!=i&&null!=s&&Number.isFinite(r)&&Number.isFinite(t)&&Number.isFinite(a)){this.data.webcQrLoadT=r,this.data.webcQrCodes=p.default.get(),this.data.webcLoginT=t-r,this.data.webcSyncT=a-t,this.data.webcSyncMessageT=n-t,this.data.webcSyncChatT||(this.data.webcSyncChatT=i-t),this.data.webcSyncContactT||(this.data.webcSyncContactT=s-t),this.data.webcBrowserNetworkType=(0,f.getEffectiveNetworkType)(),e&&(this.data.webcBrowserStorageQuotaBytes=e.quota,this.data.webcBrowserStorageQuotaUsedBytes=e.usage);new c.default.WebcLogin(this.data).commit()}else __LOG__(3)`One or more of the login timings was not logged: `}reset(){this.stopListening(),this.data={webcPersistentLoginEnabled:!1,webcQrCodes:0,webcSyncMessageCount:0,webcSyncMessageSize:0},this.timings={chatSync:void 0,contactSync:void 0,endSync:void 0,msgSync:void 0,startSync:void 0},this._commitPromise=void 0,this.listenToOnce(i.Cmd,"logout",this.init)}}t.j=()=>new g},87759:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e<4?i.LT4:e<8?i.LT8:e<16?i.LT16:e<32?i.LT32:e<64?i.LT64:e<128?i.LT128:e<256?i.LT256:e<512?i.LT512:e<1e3?i.LT1000:e<1500?i.LT1500:e<2e3?i.LT2000:e<2500?i.LT2500:e<3e3?i.LT3000:e<3500?i.LT3500:e<4e3?i.LT4000:e<4500?i.LT4500:e<5e3?i.LT5000:i.LARGEST_BUCKET};var n=s(a(11339));const{PRECISE_SIZE_BUCKET:i}=n.default},75629:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(57319);t.default=class{constructor(e){this.ship=e=>{const t=this.bitmap;if(!t)return;const a=Date.now();a>this.lastActiveInMS&&(this.bitmapLength=Math.min(64,Math.ceil(a/1e3-this.startTimeInSec)));const s={sessionId:this.sessionId,startTime:this.startTimeInSec,bitmap:t,bitmapLen:this.bitmapLength,sessionSeq:this.sequenceId,sessionCum:this.cumulativeBitsSet};(e||this.loggingCallback)(s),this.timer.cancel(),this.bitmap=null},this.loggingCallback=e,this.timer=new s.ShiftTimer(this.ship),this._initSession(),this._initArray(Math.floor(Date.now()/1e3))}_initSession(){this.cumulativeBitsSet=0,this.sequenceId=-1,this.sessionId=Math.floor(2147483648*Math.random()).toString(36)}_initArray(e){this.startTimeInSec=e,this.lastActiveInMS=1e3*this.startTimeInSec,this.bitmap=new Int32Array(2),this.bitmap[0]=1,this.bitmapLength=1,this.cumulativeBitsSet+=1,this.sequenceId+=1;this.timer.debounceAndCap(64e3,64e3)}_doUpdate(e){const t=e-this.startTimeInSec;this.bitmap&&(t<0||t>=64)&&this.ship(),this.bitmap?(this.bitmap[t>>5]|=1<<(31&t),this.bitmapLength=t+1,this.cumulativeBitsSet+=1,this.lastActiveInMS=1e3*e):this._initArray(e)}update(e){e>=this.lastActiveInMS&&e-this.lastActiveInMS<1e3||this._doUpdate(Math.floor(e/1e3))}shipAndEndSession(e){this.ship(e),this._initSession()}}},35166:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(67294),i=s(a(69618)),r=a(84387),o=s(a(11339)),l=s(a(99304)),d=s(a(75629));const u=[{source:window,name:"focus"},{source:document,name:"wheel"},{source:document,name:"keydown"},{source:document,name:"mouseover"},{source:document,name:"mousemove"},{source:document,name:"click"},{source:document,name:"scroll"}],c=e=>{const t=new o.default.UserActivity({userActivitySessionId:e.sessionId,userActivityStartTime:e.startTime,userActivityBitmapLen:e.bitmapLen,userActivityBitmapLow:e.bitmap[0],userActivitySessionSeq:e.sessionSeq,userActivitySessionCum:e.sessionCum});e.bitmapLen>32&&(t.userActivityBitmapHigh=e.bitmap[1]),t.commit()};class h extends n.Component{constructor(){super(...arguments),this.lastInform=Date.now(),this.lastPageX=-1,this.lastPageY=-1,this.bitArray=null,this.endSession=()=>{this.bitArray&&this.bitArray.shipAndEndSession()},this.handleRestore=()=>{const e=this.bitArray;e?(this.lastInform=Date.now(),e.update(this.lastInform)):__LOG__(3)`Time Spent Logger not started`},this.handleEvent=e=>{const t=this.bitArray;if(!t)return;if(e instanceof MouseEvent){if(e.pageX===this.lastPageX&&e.pageY===this.lastPageY&&"click"!==e.type)return;this.lastPageX=e.pageX,this.lastPageY=e.pageY}const a=Date.now(),s=a-this.lastInform;s>0?(this.lastInform=a,t.update(this.lastInform)):s<-5&&(this.lastInform=a)},this.stashLogs=e=>{let t=`${e.bitmap[0]}`;for(let a=1;a<e.bitmap.length;++a)t+=`:${e.bitmap[a]}`;const a=`${e.sessionId}:${e.sessionSeq}:${e.sessionCum}:${e.startTime}:${e.bitmapLen}$${t}`;l.default.setItem(i.default.KEY_TIME_SPENT_EVENT,a)},this.handleUnload=()=>{this.bitArray&&(this.bitArray.ship(this.stashLogs),this.bitArray=null)}}parseAndShipStashed(e){let[t,a,...s]=e.split("$");if(s.length||!a)return void __LOG__(3)`Invalid stashed time spent event`;if(t=t.split(":"),5!==t.length)return void __LOG__(3)`Invalid stashed time spent event`;a=new Int32Array(a.split(":").map((e=>Number(e))));const n={sessionId:t[0],sessionSeq:Number(t[1]),sessionCum:Number(t[2]),startTime:Number(t[3]),bitmapLen:Number(t[4]),bitmap:a};c(n)}componentDidMount(){const e=l.default.getItem(i.default.KEY_TIME_SPENT_EVENT);e&&(this.parseAndShipStashed(e),l.default.removeItem(i.default.KEY_TIME_SPENT_EVENT));const t=this.props.listeners;this.bitArray=new d.default(c),t.add(window,"beforeunload",this.handleUnload);for(let e=0;e<u.length;++e){const{source:a,name:s}=u[e];t.add(a,s,this.handleEvent,{passive:!0,capture:!0})}}componentWillUnmount(){this.bitArray&&(this.bitArray.ship(),this.bitArray=null)}render(){return null}}h.displayName="TimeSpentLogger";var f=(0,r.ListenerHOC)(h);t.default=f},84287:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.IconSectionTheme=t.IconSection=void 0;var n=s(a(94184)),i=s(a(87853)),r=s(a(43725)),o=s(a(38932)),l=s(a(23217)),d=a(85893);const u=a(54302)({SmallMargin:"small-margin",NoMargin:"no-margin",NoMarginSmallGutter:"no-margin-small-gutter"});t.IconSectionTheme=u;t.IconSection=e=>{let{icon:t,iconClass:a,content:s,onEdit:c,type:h="field",emptyText:f,hideEditIcon:p,theme:m,fieldName:_}=e;const g=c?(0,d.jsx)("div",{children:(0,d.jsx)(o.default,{name:"pencil",className:i.default.editPencil,directional:!0,onClick:c,"aria-label":r.default.t(2,{fieldName:_})})}):void 0,v=f&&!s,C=v?f:s,S=t?(0,d.jsx)(l.default,{name:t}):null;return(0,d.jsxs)("div",{className:(0,n.default)(i.default.section,{[i.default.smallMargin]:m===u.SmallMargin,[i.default.noMargin]:m===u.NoMargin,[i.default.noMarginSmallGutter]:m===u.NoMarginSmallGutter}),children:[(0,d.jsx)("div",{className:(0,n.default)(i.default.sectionPrimaryIcon,a,{[i.default.fieldPrimaryIcon]:"field"===h}),children:S}),(0,d.jsx)("div",{className:(0,n.default)(i.default.sectionMain,{[i.default.sectionContainerMain]:"container"===h,[i.default.sectionEmptyText]:v}),children:C}),g]})}},31892:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){const s=(0,l.getMaybeMeUser)();h.QPL.markerAnnotate(f.QuickLogMarkerId.WHATSAPP_CART_ADD,{bool:{IsConsumer:!(null==s?void 0:s.equals(e.catalogWid))}});const g=(0,r.addProductToCart)(e);switch(g.status){case r.AddToCartStatus.SUCCESS:!function(e,t){a=function(){var a=(0,n.default)((function*(){(0,c.qplStartCartView)("Toast"),yield(0,p.default)(e.catalogWid.toString(),void 0,t),(0,u.logCartToastClick)(e.catalogWid.toString(),t)}));return function(){return a.apply(this,arguments)}}(),o.Cmd.openToast((0,_.jsx)(m.Toast,{action:{actionText:d.default.t(1019),onAction:()=>{a()}},duration:6e3,id:(0,m.genId)(),msg:d.default.t(1067)}));var a}(e,t),(0,u.logAddProductToCart)(e,t,g.newCount,a);break;case r.AddToCartStatus.QUANTITY_LIMIT_REACHED:o.Cmd.openToast((0,_.jsx)(m.Toast,{action:{onAction:()=>{},actionText:d.default.t(514),dismiss:!0,theme:"success"},duration:6e3,id:(0,m.genId)(),msg:i.default._("You can't add any more of this item",null,{hk:"3wdB9l"})}))}};var n=s(a(48926)),i=s(a(48360)),r=a(51498),o=a(88102),l=a(99234),d=s(a(43725)),u=a(88571),c=a(82145),h=a(48870),f=a(27798),p=s(a(56829)),m=a(50452),_=a(85893)},24170:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{className:t,onClick:a}=e,s={className:(0,i.default)(t,r.default.addToCartIcon),name:"add_shopping_cart",title:o.default.t(1066)};if(null!=a)return(0,u.jsx)(l.default,(0,n.default)((0,n.default)({},s),{},{"aria-label":o.default.t(1066),onClick:a}));return(0,u.jsx)(d.default,(0,n.default)({},s))};var n=s(a(81109)),i=s(a(94184)),r=s(a(4990)),o=s(a(43725)),l=s(a(38932)),d=s(a(23217)),u=a(85893)},88571:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getOnCartClickWithLog=function(e,t,a){return()=>{e(),function(e,t){const a=c(e,"ACTION_CART_ICON_CLICK",(0,n.default)({},(0,d.toDataForCatalogViewEvents)(t)));a&&a.commit()}(t,a)}},t.logAddProductToCart=function(e,t,a,s){const i=(0,r.getProductStatsInFetched)(e.catalogWid.toString(),s,e)||void 0,o=c(e.catalogWid.toString(),"ACTION_CART_ADD_PRODUCT",(0,n.default)((0,n.default)({},(0,d.toDataForCatalogViewEvents)(t)),{},{quantity:a,collectionStats:i}));o&&o.commit()},t.logCartAbandon=function(e,t){const a=c(e,"ACTION_CART_ABANDON",(0,n.default)({},(0,d.toDataForCatalogViewEvents)(t)));a&&a.commit()},t.logCartListImpression=function(e,t){const a=c(e,"ACTION_CART_LIST_IMPRESSION",(0,n.default)({},(0,d.toDataForCatalogViewEvents)(t)));a&&a.commit()},t.logCartToastClick=function(e,t){const a=c(e,"ACTION_CART_SNACKBAR_CLICK",(0,n.default)({},(0,d.toDataForCatalogViewEvents)(t)));a&&a.commit()},t.logDeleteProduct=function(e,t){const a=c(e.catalogWid.toString(),"ACTION_CART_DELETE_PRODUCT",(0,n.default)({},(0,d.toDataForCatalogViewEvents)(t)));a&&a.commit()},t.logEditProduct=function(e,t,a){const s=c(e.catalogWid.toString(),"ACTION_CART_EDIT_PRODUCT",(0,n.default)((0,n.default)({},(0,d.toDataForCatalogViewEvents)(t)),{},{quantity:a}));s&&s.commit()};var n=s(a(81109)),i=s(a(6479)),r=a(71599),o=a(99234),l=s(a(11339)),d=a(97567);const u=["bizPlatform","collectionStats"];function c(e,t,a){const s=e===(0,o.getMeUser)().toString(),{bizPlatform:r,collectionStats:d}=a,c=(0,i.default)(a,u);return s&&void 0!==l.default.CATALOG_BIZ_ACTION[t]?new l.default.CatalogBiz((0,n.default)({catalogBizAction:l.default.CATALOG_BIZ_ACTION[t],collectionIndex:null==d?void 0:d.collectionIndex,productIndex:null==d?void 0:d.productIndex},c)):s||void 0===l.default.CATALOG_VIEW_ACTION[t]?void __LOG__(3)`getCartLogAction: unsupported log action - ${t}`:new l.default.CatalogView((0,n.default)({catalogViewAction:l.default.CATALOG_VIEW_ACTION[t],bizPlatform:r,collectionIndex:null==d?void 0:d.collectionIndex,productIndex:null==d?void 0:d.productIndex},c))}},84543:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.Labels=function(e){const{labels:t,showName:a,renderAsCircle:s}=e,o=(0,h.default)(),g=(0,i.useMemo)((()=>m(t)),[t]);if((0,f.useListener)(null!=g?d.LabelCollection:null,`label_updated_${null!=g?g:""}`,o),!(0,l.canDisplayLabel)())return null;const v=function(e){const t=m(e);return null==t?null:d.LabelCollection.get(t)}(t);if(!v||!v.name)return null;if(1===t.length){const t=a?(0,p.jsx)("span",{className:u.default.name,children:(0,p.jsx)(r.EmojiText,{text:v.name})}):null,i=(0,n.default)({[u.default.container]:!a&&!s,[u.default.containerCircleIconFull]:!!s,[u.default.containerFull]:a&&!s,[u.default.labelFilter]:"label-filter"===e.theme,[u.default.drawerTitle]:"drawer-title"===e.theme}),o=s?{backgroundColor:v.hexColor}:{},l=s?(0,p.jsx)(c.default,{name:"label",className:u.default.icon}):_(v.hexColor);return(0,p.jsxs)("div",{className:i,children:[(0,p.jsx)("div",{className:(0,n.default)(u.default.iconContainer,{[u.default.circleIcon]:s}),style:o,children:l}),t]})}return(0,p.jsx)("div",{className:u.default.container,children:(0,p.jsxs)("svg",{width:"18px",height:"15px",viewBox:"0 0 18 15",children:[(0,p.jsx)("path",{fill:v.hexColor,d:"M11.208,3.925H2.236C1.556,3.925,1,4.565,1,5.357v7.213C1,13.362,1.556,14,2.236,14h8.972 c0.414,0,0.785-0.237,1.007-0.604l2.701-4.433L12.215,4.53C11.993,4.162,11.622,3.925,11.208,3.925z"}),(0,p.jsx)("path",{fill:"currentColor",d:"M15.541,7.832L13.164,3.93 c-0.423-0.698-1.15-1.142-1.956-1.142H2.595V2.432C2.595,1.64,3.151,1,3.831,1h9.1c0.414,0,0.782,0.237,1.005,0.605l2.696,4.433 L15.541,7.832z"})]})})},t.getVisibleLabelId=m,t.renderLabelSvg=_;var n=s(a(94184)),i=a(67294),r=a(65417),o=a(7293),l=a(57701),d=a(16770),u=s(a(158)),c=s(a(23217)),h=s(a(59909)),f=a(19529),p=a(85893);function m(e){if(0===e.length)return;if(!o.GK.supportsFeature(o.GK.F.MD_BACKEND))return e[0];const t=Math.max(...e.map((e=>parseInt(e,10))));return isNaN(t)?e[0]:t.toString()}function _(e){return(0,p.jsx)("svg",{width:"18px",height:"12px",viewBox:"0 0 18 12",className:u.default.icon,children:(0,p.jsx)("path",{fill:e||"#ffffff",d:"M11.208,0.925H2.236C1.556,0.925,1,1.565,1,2.357V9.57C1,10.362,1.556,11,2.236,11h8.972 c0.414,0,0.785-0.237,1.007-0.604l2.701-4.433L12.215,1.53C11.993,1.162,11.622,0.925,11.208,0.925z"})},2)}},79544:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.logOrderListImpression=function(e){let{catalogContext:t,catalogOwnerJid:a,orderId:s,productCount:l}=e;(0,o.createCatalogViewEvent)((0,n.default)((0,n.default)({isOwner:(0,o.isCatalogOwner)({catalogOwnerJid:a}),catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_ORDER_LIST_IMPRESSION,catalogViewAction:i.default.CATALOG_VIEW_ACTION.ACTION_ORDER_LIST_IMPRESSION},(0,r.toDataForCatalogViewEvents)(t)),{},{bizActionConfig:{orderId:s,productCount:l}})).commit()},t.logOrderListItemClick=function(e){let{catalogOwnerJid:t,catalogContext:a,orderId:s}=e;(0,o.createCatalogViewEvent)((0,n.default)((0,n.default)({isOwner:(0,o.isCatalogOwner)({catalogOwnerJid:t}),catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_ORDER_LIST_ITEM_CLICK,catalogViewAction:i.default.CATALOG_VIEW_ACTION.ACTION_ORDER_LIST_ITEM_CLICK},(0,r.toDataForCatalogViewEvents)(a)),{},{bizActionConfig:{orderId:s}})).commit()},t.logOrderMessageClick=function(e){let{catalogContext:t,catalogOwnerJid:a,orderId:s}=e;(0,o.createCatalogViewEvent)((0,n.default)({isOwner:(0,o.isCatalogOwner)({catalogOwnerJid:a}),catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_ORDER_MESSAGE_CLICK,catalogViewAction:i.default.CATALOG_VIEW_ACTION.ACTION_ORDER_MESSAGE_CLICK},(0,r.toDataForCatalogViewEvents)(t))).commit()},t.logSendOrderMessage=function(e){let{orderId:t,catalogOwnerJid:a,catalogContext:s,isOrderMsgAttached:l,quantity:d}=e;(0,o.createCatalogViewEvent)((0,n.default)((0,n.default)({isOwner:(0,o.isCatalogOwner)({catalogOwnerJid:a}),catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_SEND_ORDER_MESSAGE,catalogViewAction:i.default.CATALOG_VIEW_ACTION.ACTION_SEND_ORDER_MESSAGE,isOrderMsgAttached:l},(0,r.toDataForCatalogViewEvents)(s)),{},{bizActionConfig:{orderId:t,quantity:d}})).commit()};var n=s(a(81109)),i=s(a(11339)),r=a(97567),o=a(14545)},30699:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.OrderDetailProductSummary=function(e){let{productItems:t,totalItemCount:a,productMediaData:s,onClick:n}=e;const o=h(t),p=t.length>1,m=p?(0,c.jsx)(d.default,{name:"chevron-right",color:"secondary",width:20}):void 0;return(0,c.jsx)(i.default,{image:s?(0,c.jsx)(l.ProductThumb,{mediaData:s,theme:"squareThumb"}):null,customImage:!0,primary:(0,c.jsx)(u.TextSpan,{size:"16",children:(0,c.jsx)(r.EmojiText,{text:o,ellipsify:!0})}),secondary:f(t.length,a),detail:m,theme:"media",onClick:p?n:void 0})},t.getOrderDetailItemLabel=f,t.getOrderDetailProductLabel=h;var n=s(a(48360)),i=s(a(44356)),r=a(65417),o=s(a(43725)),l=a(3013),d=s(a(23217)),u=a(13923),c=a(85893);function h(e){return e.slice(0,10).filter(Boolean).map((e=>e.name)).join(o.default.t(420))}function f(e,t){return null!=e&&e>1?n.default._("{number-of-items} items",[n.default._param("number-of-items",e)],{hk:"2A6Awx"}):n.default._("Qty {item-quantity}",[n.default._param("item-quantity",t)],{hk:"3LVRop"})}},26218:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{productId:t,businessOwnerJid:a,msgT:i}=e;const r=(0,n.createWid)(a);if(!r)return;const o=s.CatalogCollection.get(r);if(!o)return;const l=o.productCollection.get(t),d=o.msgProductCollection.get(t);if(d&&l){const e=null!=i?i:d.t;return l.t>=e?(o.msgProductCollection.remove(d),l):d}return l||d};var s=a(99989),n=a(58021)},77975:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.logAddProductClick=function(e){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_ADD_CLICKED,catalogSessionId:e.session.toString(),catalogEntryPoint:e.entryPoint}).commit()},t.logAddProductFailed=function(e){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_ADD_FAILED,catalogEntryPoint:e.entryPoint,catalogSessionId:e.session.toString()}).commit()},t.logAddProductSuccess=function(e){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_ADD_SUCCESS,catalogEntryPoint:e.entryPoint,catalogSessionId:e.session.toString()}).commit()},t.logAppealProductCatalogClick=function(e){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_APPEAL_PRODUCT_CLICKED,catalogEntryPoint:o.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,catalogSessionId:e}).commit()},t.logAppealProductCatalogFailed=function(e,t){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_APPEAL_PRODUCT_FAILED,catalogEntryPoint:o.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,errorCode:t,catalogSessionId:e}).commit()},t.logAppealProductCatalogSuccess=function(e){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_APPEAL_PRODUCT_SUCCESS,catalogEntryPoint:o.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,catalogSessionId:e}).commit()},t.logBusinessProfileCatalogView=function(e){let{catalogOwnerWid:t,catalogContext:a}=e;(0,d.createCatalogViewEvent)((0,n.default)((0,n.default)({},(0,l.toDataForCatalogViewEvents)(a)),{},{isOwner:(0,d.isCatalogOwner)({catalogOwnerWid:t}),catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_CARD_IMPRESSION,catalogViewAction:o.default.CATALOG_VIEW_ACTION.ACTION_CARD_IMPRESSION})).commit()},t.logCarouselViewMoreClick=function(e){let{catalogOwnerWid:t,catalogContext:a}=e;(0,d.createCatalogViewEvent)((0,n.default)({isOwner:(0,d.isCatalogOwner)({catalogOwnerWid:t}),catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_CARD_MORE_CLICK,catalogViewAction:o.default.CATALOG_VIEW_ACTION.ACTION_CARD_MORE_CLICK},(0,l.toDataForCatalogViewEvents)(a))).commit()},t.logCatalogAttachmentButtonClick=function(e){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_CATALOG_IN_CONVERSATION_CLICK,catalogEntryPoint:o.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_ATTACHMENT_PANEL,catalogSessionId:e}).commit()},t.logCatalogContextMenuClick=function(e,t){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_MENU_CLICK,catalogEntryPoint:null==t?void 0:t.entryPoint,catalogSessionId:null==t?void 0:t.session.toString(),productId:e}).commit()},t.logCatalogListDetailClick=function(e){let{product:t,catalogContext:a}=e;(0,d.createCatalogViewEvent)((0,n.default)({isOwner:(0,d.isCatalogOwner)({product:t}),catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_LIST_ITEM_CLICK,catalogViewAction:o.default.CATALOG_VIEW_ACTION.ACTION_LIST_ITEM_CLICK},(0,l.toDataForCatalogViewEvents)(a))).commit()},t.logCatalogListView=function(e){let{catalogOwnerWid:t,catalogContext:a,cartToggle:s}=e;(0,d.createCatalogViewEvent)((0,n.default)({isOwner:(0,d.isCatalogOwner)({catalogOwnerWid:t}),catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_LIST_IMPRESSION,catalogViewAction:o.default.CATALOG_VIEW_ACTION.ACTION_LIST_IMPRESSION,cartToggle:s},(0,l.toDataForCatalogViewEvents)(a))).commit()},t.logCatalogProductHideCancelled=function(e,t){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_HIDE_CANCELLED,catalogEntryPoint:t.entryPoint,catalogSessionId:t.session.toString(),productId:e}).commit()},t.logCatalogProductHideClick=function(e,t){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_HIDE_CLICKED,catalogEntryPoint:t.entryPoint,catalogSessionId:t.session.toString(),productId:e}).commit()},t.logCatalogProductHideFailed=function(e,t){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_HIDE_FAILED,catalogEntryPoint:t.entryPoint,catalogSessionId:t.session.toString(),productId:e}).commit()},t.logCatalogProductHideSuccess=function(e,t){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_HIDE_SUCCESS,catalogEntryPoint:t.entryPoint,catalogSessionId:t.session.toString(),productId:e}).commit()},t.logCatalogProductShowCancelled=function(e,t){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_UNHIDE_CANCELLED,catalogEntryPoint:t.entryPoint,catalogSessionId:t.session.toString(),productId:e}).commit()},t.logCatalogProductShowClick=function(e,t){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_UNHIDE_CLICKED,catalogEntryPoint:t.entryPoint,catalogSessionId:t.session.toString(),productId:e}).commit()},t.logCatalogProductShowFailed=function(e,t){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_UNHIDE_FAILED,catalogEntryPoint:t.entryPoint,catalogSessionId:t.session.toString(),productId:e}).commit()},t.logCatalogProductShowSuccess=function(e,t){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_UNHIDE_SUCCESS,catalogEntryPoint:t.entryPoint,catalogSessionId:t.session.toString(),productId:e}).commit()},t.logCatalogShareLinkClick=function(e){let{catalogOwnerWid:t,catalogContext:a}=e;const s=(0,d.isCatalogOwner)({catalogOwnerWid:t});(0,d.createCatalogViewEvent)((0,n.default)({isOwner:s,catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_SHARE_CATALOG_LINK_CLICK,catalogViewAction:o.default.CATALOG_VIEW_ACTION.ACTION_SHARE_CATALOG_LINK_CLICK},(0,l.toDataForCatalogViewEvents)(a))).commit()},t.logChatCatalogView=function(e){let{catalogOwnerWid:t,catalogContext:a}=e;new o.default.CatalogView((0,n.default)({catalogViewAction:o.default.CATALOG_VIEW_ACTION.ACTION_CHAT_CATALOG_ICON_CLICK},(0,l.toDataForCatalogViewEvents)(a))).commit()},t.logCreateProductCatalogClick=function(e){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_CREATE_PRODUCT_CATALOG,catalogEntryPoint:e.entryPoint,catalogSessionId:e.session.toString()}).commit()},t.logCreateProductCatalogFailed=function(e,t){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_CREATE_PRODUCT_CATALOG_FAILED,catalogEntryPoint:e.entryPoint,errorCode:t,catalogSessionId:e.session.toString()}).commit()},t.logCreateProductCatalogSuccess=function(e){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_CREATE_PRODUCT_CATALOG_SUCCESS,catalogEntryPoint:e.entryPoint,catalogSessionId:e.session.toString()}).commit()},t.logDeleteProductClick=function(e,t,a){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_DELETE_CLICKED,catalogEntryPoint:a.entryPoint,productId:e.id.toString(),productCount:t,catalogSessionId:a.session.toString()}).commit()},t.logDeleteProductFailed=function(e,t,a,s){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_DELETE_FAILED,catalogEntryPoint:a.entryPoint,productId:e.id.toString(),productCount:t,errorCode:s,catalogSessionId:a.session.toString()}).commit()},t.logDeleteProductSuccess=function(e,t,a){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_DELETE_SUCCESS,catalogEntryPoint:a.entryPoint,productId:e.id.toString(),productCount:t,catalogSessionId:a.session.toString()}).commit()},t.logDetailImageClick=function(e){let{product:t,catalogContext:a}=e;(0,d.createCatalogViewEvent)((0,n.default)({isOwner:(0,d.isCatalogOwner)({product:t}),catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_DETAIL_IMAGE_CLICK,catalogViewAction:o.default.CATALOG_VIEW_ACTION.ACTION_DETAIL_IMAGE_CLICK},(0,l.toDataForCatalogViewEvents)(a))).commit()},t.logDetailLinkClick=function(e){let{product:t,catalogContext:a}=e;(0,d.createCatalogViewEvent)((0,n.default)({isOwner:(0,d.isCatalogOwner)({product:t}),catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_DETAIL_LINK_CLICK,catalogViewAction:o.default.CATALOG_VIEW_ACTION.ACTION_DETAIL_LINK_CLICK},(0,l.toDataForCatalogViewEvents)(a))).commit()},t.logEditProductClick=function(e,t){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_EDIT_CLICKED,productId:e.id.toString(),catalogEntryPoint:t.entryPoint,catalogSessionId:t.session.toString()}).commit()},t.logEditProductFailed=function(e,t,a){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_EDIT_FAILED,catalogEntryPoint:t.entryPoint,productId:e.id.toString(),errorCode:a,catalogSessionId:t.session.toString()}).commit()},t.logEditProductSuccess=function(e,t){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_EDIT_SUCCESS,catalogEntryPoint:t.entryPoint,productId:e.id.toString(),catalogSessionId:t.session.toString()}).commit()},t.logFullImageView=function(e){let{product:t,catalogSessionId:a}=e;(0,d.createCatalogViewEvent)({isOwner:(0,d.isCatalogOwner)({product:t}),catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_FULL_IMAGE_IMPRESSION,catalogViewAction:o.default.CATALOG_VIEW_ACTION.ACTION_FULL_IMAGE_IMPRESSION,catalogSessionId:a}).commit()},t.logImageCarouselModalView=function(e){let{product:t,catalogSessionId:a}=e;(0,d.createCatalogViewEvent)({isOwner:(0,d.isCatalogOwner)({product:t}),catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_IMAGE_LIST_IMPRESSION,catalogViewAction:o.default.CATALOG_VIEW_ACTION.ACTION_IMAGE_LIST_IMPRESSION,catalogSessionId:a}).commit()},t.logImageListClick=function(e){let{product:t,catalogSessionId:a}=e;(0,d.createCatalogViewEvent)({isOwner:(0,d.isCatalogOwner)({product:t}),catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_IMAGE_LIST_CLICK,catalogViewAction:o.default.CATALOG_VIEW_ACTION.ACTION_IMAGE_LIST_CLICK,catalogSessionId:a}).commit()},t.logImageNavigate=function(e){let{product:t,catalogSessionId:a}=e;(0,d.createCatalogViewEvent)({isOwner:(0,d.isCatalogOwner)({product:t}),catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_FULL_IMAGE_SWIPE,catalogViewAction:o.default.CATALOG_VIEW_ACTION.ACTION_FULL_IMAGE_SWIPE,catalogSessionId:a}).commit()},t.logProductDeepLinkOpen=function(e){let{catalogOwnerJid:t,catalogContext:a}=e;(0,d.createCatalogViewEvent)((0,n.default)({isOwner:(0,d.isCatalogOwner)({catalogOwnerJid:t}),catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_SHARE_PRODUCT_LINK_CLICK,catalogViewAction:o.default.CATALOG_VIEW_ACTION.ACTION_SHARE_PRODUCT_LINK_CLICK},(0,l.toDataForCatalogViewEvents)(a))).commit()},t.logProductDetailView=function(e){let{product:t,catalogContext:a,cartToggle:s,collectionId:r}=e;const u=r?(0,i.getProductStatsInFetched)(t.catalogWid.toString(),r,t):void 0,c=null==u?void 0:u.productIndex,h=null==u?void 0:u.collectionIndex;(0,d.createCatalogViewEvent)((0,n.default)({isOwner:(0,d.isCatalogOwner)({product:t}),catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_DETAIL_IMPRESSION,catalogViewAction:o.default.CATALOG_VIEW_ACTION.ACTION_DETAIL_IMPRESSION,cartToggle:s,productIndex:c,collectionIndex:h},(0,l.toDataForCatalogViewEvents)(a))).commit()},t.logProductInquiryClick=function(e){let{product:t,catalogContext:a}=e;(0,d.createCatalogViewEvent)((0,n.default)({isOwner:(0,d.isCatalogOwner)({product:t}),catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_QUOTED_PRODUCT_IN_CONVERSATION_CLICK,catalogViewAction:o.default.CATALOG_VIEW_ACTION.ACTION_QUOTED_PRODUCT_IN_CONVERSATION_CLICK},(0,l.toDataForCatalogViewEvents)(a))).commit()},t.logProductMessageBusinessClick=function(e,t){(0,d.createCatalogViewEvent)((0,n.default)({isOwner:(0,d.isCatalogOwner)({product:e}),catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_MESSAGE_BUSINESS_BUTTON_CLICK,catalogViewAction:o.default.CATALOG_VIEW_ACTION.ACTION_MESSAGE_BUSINESS_BUTTON_CLICK},(0,l.toDataForCatalogViewEvents)(t))).commit()},t.logProductMessageBusinessSend=function(e,t){let a=!1;if(null!=e.businessOwnerJid){const t=e.businessOwnerJid;a=(0,r.getMeUser)().equals((0,c.createWid)(t))}(0,d.createCatalogViewEvent)({isOwner:a,catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_QUOTED_PRODUCT_MESSAGE_SEND,catalogViewAction:o.default.CATALOG_VIEW_ACTION.ACTION_QUOTED_PRODUCT_MESSAGE_SEND,catalogSessionId:t||(new u.ProductCatalogSession).toString()}).commit()},t.logProductMessageSent=function(e){let{product:t,catalogSessionId:a}=e;(0,d.createCatalogViewEvent)({isOwner:(0,d.isCatalogOwner)({product:t}),catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_SEND_PRODUCT_MESSAGE,catalogViewAction:o.default.CATALOG_VIEW_ACTION.ACTION_SEND_PRODUCT_MESSAGE,catalogSessionId:a,productId:t.id.toString()}).commit()},t.logProductMsgClick=function(e){let{product:t,catalogContext:a}=e;(0,d.createCatalogViewEvent)((0,n.default)({isOwner:(0,d.isCatalogOwner)({product:t}),catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_IN_CONVERSATION_CLICK,catalogViewAction:o.default.CATALOG_VIEW_ACTION.ACTION_PRODUCT_IN_CONVERSATION_CLICK},(0,l.toDataForCatalogViewEvents)(a))).commit()},t.logProfileProductClick=function(e){let{product:t,catalogContext:a}=e;(0,d.createCatalogViewEvent)((0,n.default)({isOwner:(0,d.isCatalogOwner)({product:t}),catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_CARD_ITEM_CLICK,catalogViewAction:o.default.CATALOG_VIEW_ACTION.ACTION_CARD_ITEM_CLICK},(0,l.toDataForCatalogViewEvents)(a))).commit()},t.logReportProduct=function(e){let{product:t,catalogSessionId:a}=e;new o.default.CatalogView({catalogViewAction:o.default.CATALOG_VIEW_ACTION.ACTION_REPORT_PRODUCT,catalogSessionId:a}).commit()},t.logReportProductFailure=function(e){let{product:t,catalogSessionId:a}=e;new o.default.CatalogView({catalogViewAction:o.default.CATALOG_VIEW_ACTION.ACTION_REPORT_PRODUCT_FAILURE,catalogSessionId:a}).commit()},t.logReportProductSuccess=function(e){let{product:t,catalogSessionId:a}=e;new o.default.CatalogView({catalogViewAction:o.default.CATALOG_VIEW_ACTION.ACTION_REPORT_PRODUCT_SUCCESS,catalogSessionId:a}).commit()},t.logSendCatalogClick=function(e){let{catalogOwnerWid:t,catalogSessionId:a}=e;new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_SEND_CATALOG_CLICK,catalogSessionId:a}).commit()},t.logShareCatalogCopyLinkClick=function(e){let{catalogOwnerWid:t,catalogContext:a}=e;(0,d.createCatalogViewEvent)((0,n.default)({isOwner:(0,d.isCatalogOwner)({catalogOwnerWid:t}),catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_SHARE_CATALOG_COPY_LINK_CLICK,catalogViewAction:o.default.CATALOG_VIEW_ACTION.ACTION_SHARE_CATALOG_COPY_LINK_CLICK},(0,l.toDataForCatalogViewEvents)(a))).commit()},t.logShareCatalogViaWALinkClick=function(e){let{catalogOwnerWid:t,catalogContext:a}=e;(0,d.createCatalogViewEvent)((0,n.default)({isOwner:(0,d.isCatalogOwner)({catalogOwnerWid:t}),catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_SHARE_CATALOG_VIA_WA_LINK_CLICK,catalogViewAction:o.default.CATALOG_VIEW_ACTION.ACTION_SHARE_CATALOG_VIA_WA_LINK_CLICK},(0,l.toDataForCatalogViewEvents)(a))).commit()},t.logShareProductCopyLinkClick=function(e){let{product:t,catalogContext:a}=e;(0,d.createCatalogViewEvent)((0,n.default)({isOwner:(0,d.isCatalogOwner)({product:t}),catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_SHARE_PRODUCT_COPY_LINK_CLICK,catalogViewAction:o.default.CATALOG_VIEW_ACTION.ACTION_SHARE_PRODUCT_COPY_LINK_CLICK,productId:t.id.toString()},(0,l.toDataForCatalogViewEvents)(a))).commit()},t.logShareProductViaWALinkClick=function(e){let{product:t,catalogContext:a}=e;(0,d.createCatalogViewEvent)((0,n.default)({isOwner:(0,d.isCatalogOwner)({product:t}),catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_SHARE_PRODUCT_VIA_WA_LINK_CLICK,catalogViewAction:o.default.CATALOG_VIEW_ACTION.ACTION_SHARE_PRODUCT_VIA_WA_LINK_CLICK,productId:t.id.toString()},(0,l.toDataForCatalogViewEvents)(a))).commit()};var n=s(a(81109)),i=a(71599),r=a(99234),o=s(a(11339)),l=a(97567),d=a(14545),u=a(9153),c=a(58021)},97567:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.buildProductCatalogAccidentalContext=o,t.buildProductCatalogContext=r,t.getProductCatalogContext=l,t.getProductCatalogSessionId=function(e){return l(e).session.toString()},t.toDataForCatalogViewEvents=function(e){return{catalogSessionId:e.session.toString(),bizPlatform:e.bizPlatform,catalogEntryPoint:e.entryPoint}};var n=s(a(11339)),i=a(9153);function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new i.ProductCatalogSession,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.default.BIZ_PLATFORM.UNKNOWN,a=arguments.length>2?arguments[2]:void 0;return{type:"product_catalog",session:e,entryPoint:a,bizPlatform:t}}function o(){return r(new i.ProductCatalogSession(!0))}function l(e){return"product_catalog"===e.type?e:o()}},14545:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.isCatalogOwner=t.createCatalogViewEvent=void 0;var n=s(a(81109)),i=s(a(6479)),r=a(99234),o=s(a(11339)),l=s(a(39546)),d=a(58021);const u=["isOwner","catalogBizAction","catalogViewAction","bizActionConfig","bizPlatform"];t.isCatalogOwner=e=>{const t=(0,r.getMeUser)();let a;return e.catalogOwnerJid?a=(0,d.createWid)(e.catalogOwnerJid):e.catalogOwnerWid?a=e.catalogOwnerWid:e.product&&(a=e.product.catalogWid),l.default.equals(t,a)};t.createCatalogViewEvent=e=>{const{isOwner:t,catalogBizAction:a,catalogViewAction:s,bizActionConfig:r,bizPlatform:l}=e,d=(0,i.default)(e,u);return t?new o.default.CatalogBiz((0,n.default)((0,n.default)({catalogBizAction:a},d),r)):new o.default.CatalogView((0,n.default)({catalogViewAction:s,bizPlatform:l},d))}},88990:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const{onClick:a,checkbox:s,isMuted:D,disableOutOfStockAppearance:L,theme:B,collectionId:F,onProductHideShow:G,onProductDelete:U,onProductShare:V,onCartOpen:H,canManageCatalog:K}=e,q=(0,o.useContext)(f.DrawerContext),W=(0,O.useModelValues)(e.product,["id","name","description","availability","url","retailerId","currency","priceAmount1000","salePriceAmount1000","salePriceStartDate","salePriceEndDate","reviewStatus","catalogWid","productImageCollection","imageHash","imageCdnUrl","isHidden"]),Y=(0,o.useRef)(null),z=(0,o.useRef)(null),[Q,$]=(0,o.useState)(!1),[X,J]=(0,o.useState)(null),[Z,ee]=(0,o.useState)(!1);(0,N.useListener)(e.active,W.id.toString(),(e=>{$(!!e)}));const te=e=>{const t=(0,C.getProductCatalogContext)(q);M.QPL.markerStart(P.QuickLogMarkerId.WHATSAPP_CART_ADD,{string:{EntryPoint:"Catalog"}}),t.session.isAccidental()?M.QPL.markerDrop(P.QuickLogMarkerId.WHATSAPP_CART_ADD):((0,d.default)(W,t,F),e.preventDefault(),e.stopPropagation())},ae=e=>{e.preventDefault(),e.stopPropagation(),G&&G((0,A.unproxy)(W))},se=e=>{e.preventDefault(),e.stopPropagation(),U&&U(W)},ne=()=>{J(null),i.default.focus(z.current)},ie=null===(t=W.getPreviewImage())||void 0===t?void 0:t.mediaData,re=B||(L||W.availability!==x.ProductAvailability.OUT_OF_STOCK?"product":"product-out-of-stock");let oe,le,de;switch(W.reviewStatus){case y.PRODUCT_REVIEW_STATUS.NO_REVIEW:case y.PRODUCT_REVIEW_STATUS.OUTDATED:case y.PRODUCT_REVIEW_STATUS.PENDING:oe=(0,R.jsx)(c.default,{theme:"pending",svg:"business-hours"});break;case y.PRODUCT_REVIEW_STATUS.REJECTED:oe=(0,R.jsx)(c.default,{theme:"warning",svg:"error"})}W.isHidden&&(le=(0,R.jsx)(w.default,{name:"hide"}),de=(0,R.jsx)(l.InvisibleLabel,{children:r.default._("Item is hidden",null,{hk:"3JLPDQ"})}));const ue=ie?(0,R.jsx)(T.ProductThumb,{theme:"list",mediaData:ie,badge:oe,overlayContent:le}):null,ce=(0,R.jsx)(m.EmojiText,{text:W.name,ellipsify:!0,titlify:!0}),he=(0,E.isEmptyPrice)(W)?null:(0,R.jsx)(b.default,{product:W,showAvailabilityNotice:!0}),fe=he||W.description&&W.description.length>0?(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("div",{className:S.default.description,children:(0,R.jsx)(m.EmojiText,{text:W.description,ellipsify:!0})}),(0,R.jsx)("div",{className:S.default.price,children:he}),de]}):null;let pe;X&&(pe=(0,R.jsx)(k.UIE,{displayName:"ChatContextMenu",escapable:!0,popable:!0,requestDismiss:ne,children:(0,R.jsx)(j.default,{contextMenu:X})}));return(0,R.jsxs)(g.HotKeys,{onRef:e=>{z.current=e},handlers:{space:e=>{e.preventDefault(),e.stopPropagation(),n.default.shouldIndicateFocus(),a()},right:()=>{var e;i.default.focus(null===(e=Y.current)||void 0===e?void 0:e.getContextMenuRef())}},onFocus:e=>{var t;e.stopPropagation(),e.preventDefault(),null===(t=Y.current)||void 0===t||t.mouseOver(),ee(!0)},onBlur:()=>{var e;null===(e=Y.current)||void 0===e||e.mouseLeave(),ee(!1)},tabIndex:0,role:"button",children:[(0,R.jsx)(h.default,{a8n:"product-catalog-item",customImage:!0,image:ue,primary:ce,onClick:a,secondary:fe,theme:re,active:Z||!!X,checkbox:s,idle:D,detail:K?null:(0,R.jsxs)("div",{className:S.default.detailContainer,children:[null!=V&&W.reviewStatus===y.PRODUCT_REVIEW_STATUS.APPROVED?(0,R.jsx)(I.default,{"aria-label":"",className:S.default.shareButton,onClick:e=>{e.stopPropagation(),V((0,A.unproxy)(W))},name:"link"}):null,null!=H&&W.reviewStatus===y.PRODUCT_REVIEW_STATUS.APPROVED?(0,R.jsx)(u.default,{onClick:te}):null]}),className:S.default.catalogListItem,contextEnabled:()=>!0===e.canManageCatalog,onContext:e=>{if(X)return void J(null);const t=(()=>{var e;const t=[];null!=V&&W.reviewStatus===y.PRODUCT_REVIEW_STATUS.APPROVED&&!1===W.isHidden&&t.push((0,R.jsx)(p.DropdownItem,{a8n:"mi-share-label",action:e=>{e.stopPropagation(),V((0,A.unproxy)(W))},children:r.default._("Share",null,{hk:"3MHbpW"})},"ShareLabel"));const a=null===(e=(0,_.getMaybeMeUser)())||void 0===e?void 0:e.equals(W.catalogWid);return a&&G&&(W.isHidden?t.push((0,R.jsx)(p.DropdownItem,{a8n:"mi-show-label",action:ae,children:r.default._("Show item",null,{hk:"1TSS6f"})},"ShowLabel")):t.push((0,R.jsx)(p.DropdownItem,{a8n:"mi-hide-label",action:ae,children:r.default._("Hide item",null,{hk:"a7Kx1"})},"HideLabel"))),W.isHidden||W.reviewStatus!==y.PRODUCT_REVIEW_STATUS.APPROVED||null==H||t.push((0,R.jsx)(p.DropdownItem,{a8n:"mi-addcart-label",action:te,children:r.default._("Add to cart",null,{hk:"hOzFs"})},"AddToCartLabel")),a&&U&&t.push((0,R.jsx)(p.DropdownItem,{a8n:"mi-edit-label",action:se,children:r.default._("Delete",null,{hk:"336mVv"})},"DeleteLabel")),t})(),a=(0,C.getProductCatalogContext)(q);(0,v.logCatalogContextMenuClick)(W.id.toString(),a.session.isAccidental()?void 0:a),J({menu:t,event:e.event,anchor:e.anchor})},ref:Y,contextMenuControlled:!0},W.id.toString()),pe]})};var n=s(a(45120)),i=s(a(52013)),r=s(a(48360)),o=a(67294),l=a(55712),d=s(a(31892)),u=s(a(24170)),c=s(a(80252)),h=s(a(49107)),f=a(27394),p=a(71174),m=a(65417),_=a(99234),g=a(55414),v=a(77975),C=a(97567),S=s(a(67326)),y=a(5641),b=s(a(62089)),E=a(13151),T=a(3013),x=a(6822),M=a(48870),P=a(27798),A=a(31019),I=s(a(38932)),w=s(a(23217)),k=a(18644),j=s(a(24717)),N=a(19529),O=a(49082),R=a(85893)},9153:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProductCatalogSession=t.ACCIDENTAL_SESSION=void 0;const a="accidental_session";t.ACCIDENTAL_SESSION=a;t.ProductCatalogSession=class{constructor(e){this.accidental=e||!1,this.initSessionId()}isAccidental(){return this.accidental}initSessionId(){this.sessionId=this.newSessionId()}newSessionId(){return this.sessionId=Math.floor(2147483648*Math.random()),this.sessionId}toString(){let e=`${this.sessionId}`;return this.accidental&&(__LOG__(4,void 0,new Error)`Session ID requested without being set, returning a randon accidental session. Please investigate.`,e=`accidental_session_${e}`),e}}},69589:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{product:t,productImageCollection:a,activeProductImage:s,sessionId:_}=e,g=(0,n.useRef)(!1),v=(0,n.useRef)(null),C=(0,n.useRef)(null),S=(0,n.useRef)(null),[y,b]=(0,n.useState)((()=>a.toArray().indexOf(s))),[E,T]=(0,n.useState)(!1),x=(0,h.default)(t),M=(0,h.default)(_),P=(0,h.default)(y),A=e=>{e!==y&&((0,r.logImageNavigate)({product:(0,u.unproxy)(t),catalogSessionId:_}),(0,r.logImageListClick)({product:(0,u.unproxy)(t),catalogSessionId:_})),b(e)},I=e=>{if(e&&e.stopPropagation(),E)return;const t=a.length;A((y+1)%t)},w=e=>{if(e&&e.stopPropagation(),E)return;const t=a.length;A(y-1<0?t-1:(y-1)%t)};(0,c.useListener)(window,"keydown",(e=>{37===e.keyCode?w(e):39===e.keyCode&&I(e)}));const k=function(){var e,t;let a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const s=C.current,n=null===(e=S.current)||void 0===e?void 0:e.firstChild,i=null===(t=v.current)||void 0===t?void 0:t.getImageContainerElement();if(!s||!n||!i)return;let r=0;i instanceof HTMLElement&&(r=i.clientWidth/2-s.clientWidth/2),(0,f.default)(i,"stop");let o=0;a&&(o=300),(0,f.default)(i,"scroll",{duration:o,container:n,offset:r,axis:"x",easing:[.1,.82,.25,1]})};(0,n.useEffect)((()=>{k(),C.current&&(0,f.default)(C.current,{opacity:[1,0],translateY:["0%","100%"]},{duration:300,delay:100,easing:[.1,.82,.25,1]}),(0,r.logImageCarouselModalView)({product:(0,u.unproxy)(t),catalogSessionId:_})}),[]),(0,n.useEffect)((()=>{P!==y&&(k(!0),(0,r.logFullImageView)({product:(0,u.unproxy)(t),catalogSessionId:_}))}),[y,P,x,M,t,_]);const j=(()=>{const e=a.toArray().map(((e,t)=>{const a=t===y;return(0,m.jsx)(d.ProductThumb,{theme:"viewerFlow",active:a,ref:a?v:null,mediaData:e.mediaData,onClick:()=>A(t)},`product-image-${t}`)}));return[(0,m.jsx)("div",{className:o.default.thumbPadding},"padding-left"),e,(0,m.jsx)("div",{className:o.default.thumbPadding},"padding-right")]})(),N=a.length,O=y>0?w:null,R=y+1<N?I:null;return(0,m.jsxs)("div",{className:E?"img-zoomed-in":null,children:[(0,m.jsx)("div",{className:o.default.thumbsContainer,ref:C,children:(0,m.jsx)("div",{ref:S,className:o.default.scrollContainer,dir:"ltr",children:(0,m.jsx)(p.default,{className:o.default.viewerThumbs,transitionName:"thumb-scale",children:j})})}),(0,m.jsx)(l.default,{mediaData:a.toArray()[y].mediaData,onBack:()=>{i.Cmd.closeModalMedia()},onExitAnimation:()=>{C.current&&(0,f.default)(C.current,{opacity:[0,1],translateY:["100%","0%"]},{duration:300,easing:[.1,.82,.25,1]})},onNext:R,onPrev:O,onImgZoomIn:e=>{T(e)},getZoomNode:e.getZoomNode,zoomIn:g.current,product:t,sessionId:e.sessionId})]})};var n=a(67294),i=a(88102),r=a(77975),o=s(a(77068)),l=s(a(61028)),d=a(3013),u=a(31019),c=a(19529),h=s(a(41502)),f=s(a(75426)),p=s(a(41956)),m=a(85893)},40659:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,p.useModelValues)(e.mediaData,["renderableUrl"]);const t=(0,p.useModelValues)(e.product,["name","catalogWid"]),a=i.ContactCollection.get(t.catalogWid);let s;if(a){const e=(0,m.jsx)(u.Name,{contact:a,selectable:!0,useVerifiedName:!0}),i=(0,m.jsx)(r.DetailImage,{id:a.id,size:40}),l=(0,m.jsxs)("div",{className:c.default.productName,children:[(0,m.jsx)(h.default,{className:c.default.productNameIcon,name:"business-description",display:"inline"}),(0,m.jsx)(o.EmojiText,{text:t.name,titlify:!0,ellipsify:!0})]});s=(0,m.jsx)(n.default,{idle:!0,image:i,primary:e,secondary:l,theme:"media"})}else s=(0,m.jsx)(f.TextSpan,{theme:"large",className:c.default.infoName,children:(0,m.jsx)(o.EmojiText,{text:t.name,titlify:!0,ellipsify:!0})});return(0,m.jsxs)("div",{className:c.default.mediaPanelHeader,children:[(0,m.jsx)("div",{className:c.default.info,children:s}),(0,m.jsx)("div",{className:c.default.mediaPanelTools,children:(0,m.jsx)(d.MenuBar,{theme:"strong",children:(0,m.jsx)(d.MenuBarItem,{a8nText:"btn-close",icon:(0,m.jsx)(h.default,{name:"x-viewer"}),title:l.default.t(1585),onClick:e.onClose})},"media-panel-header")})]})};var n=s(a(44356)),i=a(19380),r=a(88984),o=a(65417),l=s(a(43725)),d=a(46346),u=a(12176),c=s(a(83407)),h=s(a(23217)),f=a(13923),p=a(49082),m=a(85893)},61028:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{getZoomNode:t,zoomIn:a,onImgZoomIn:s,onExitAnimation:S,onBack:y}=e,b=(0,r.useRef)(null),E=(0,r.useRef)(!1),T=(0,r.useRef)(!1),x=(0,r.useRef)(!1),M=(0,r.useRef)(null),P=(0,g.useModelValues)(e.mediaData,["mediaStage","renderableUrl","isGif","type"]),A=(0,g.useModelValues)(e.product,["description"]),[I,w]=(0,r.useState)(!1),[k]=(0,r.useState)((()=>P.mediaStage===h.MEDIA_DATA_STAGE.RESOLVED&&a&&t?t():null)),j=()=>{var e;if(T.current)return;if(T.current=!0,(0,m.isFunction)(S)&&S(),!t)return y();const a=t();if(!a)return y();const s=(0,n.default)(null===(e=M.current)||void 0===e?void 0:e.getInsideContainer(),"mediaImageRef.current?.getInsideContainer()"),i=s.getBoundingClientRect(),r=a.getBoundingClientRect();let o=r.top-i.top,l=r.left-i.left;const d=a.clientWidth/s.clientWidth;o-=(s.clientHeight-a.clientHeight)/2,l-=(s.clientWidth-a.clientWidth)/2,(0,v.default)(s,{translateX:[l,0],translateY:[o,0],scale:[d,1]},{duration:200,easing:[.1,.82,.25,1]}).then((()=>{y()}))},N=(0,C.jsx)(c.default,{mediaData:P,onLoad:e=>{if(E.current)return;E.current=!0;k&&e&&a&&e instanceof HTMLElement&&((e,t)=>{const a=t.getBoundingClientRect(),s=e.getBoundingClientRect();let n=s.top-a.top,i=s.left-a.left;const r=e.clientWidth/t.clientWidth;n-=(t.clientHeight-e.clientHeight)/2,i-=(t.clientWidth-e.clientWidth)/2,(0,v.default)(t,{opacity:[1,0],translateX:[0,i],translateY:[0,n],scale:[1,r]},{duration:l.default.MEDIA_VIEWER.ANIMATION_DURATION,easing:[.1,.82,.25,1]}),b.current&&(0,v.default)(b.current,{opacity:[1,0]},{duration:l.default.MEDIA_VIEWER.ANIMATION_DURATION})})(k,e)},onImgZoomIn:e=>{const t=M.current;e&&t&&(x.current=t.heightOverflow>0||t.widthOverflow>0),w(e),s(e)},ref:M},P.renderableUrl);let O;if(A.description){const t=e.zoomIn&&(P.isGif||P.type===u.default.TYPE.IMAGE);O=(0,C.jsx)("span",{className:{[p.default.captionHidden]:t},ref:b,children:(0,C.jsx)(d.EmojiText,{text:A.description,className:p.default.mediaCaption})})}const R=(0,i.default)(p.default.media,{[p.default.mediaWithCaption]:!!O}),D=(0,C.jsx)("div",{className:(0,i.default)(p.default.btnMediaNext),children:(0,C.jsx)(o.ChevronButton,{type:o.ButtonType.Next,onClick:e.onNext||(e=>e.stopPropagation()),onKeyDown:e.onNext||(()=>{}),disabled:!e.onNext||I})}),L=(0,C.jsx)("div",{className:(0,i.default)(p.default.btnMediaPrev),children:(0,C.jsx)(o.ChevronButton,{type:o.ButtonType.Prev,onClick:e.onPrev||(e=>e.stopPropagation()),onKeyDown:e.onPrev||(()=>{}),disabled:!e.onPrev||I})}),B=(0,i.default)("overlay",p.default.mediaViewer,{[p.default.mediaViewerAnimate]:e.zoomIn,[p.default.cursorZoomOut]:I}),F=I?null:e=>{Math.abs(e.deltaY)>7&&j()},G=I?null:j,U=I&&x.current?e=>{((e,t)=>{const a=M.current;if(!a)return;const s=a.getInsideContainer();if(!(s&&s instanceof HTMLElement))return;const n=a.getOutsideContainer();if(!(n&&n instanceof HTMLElement))return;const{translateX:i,translateY:r}=a.getTranslatePosition(n,e,t);(0,v.default)(s,"stop"),(0,v.default)(s,{translateX:i,translateY:r,scale:l.default.MEDIA_VIEWER.ZOOM_IN_FACTOR},{duration:0})})(e.pageX,e.pageY)}:null,V=I?e=>{const t=M.current;t&&I&&t.onClick(e)}:null;return(0,C.jsx)(_.UIE,{displayName:"ProductViewer",escapable:!0,requestDismiss:j,children:(0,C.jsxs)("div",{className:B,"data-animate-media-viewer":!0,onClick:V,onMouseMove:U,children:[(0,C.jsx)(f.default,{mediaData:P,onClose:j,product:A}),(0,C.jsxs)("div",{className:p.default.mediaContent,dir:"ltr",onWheel:F,onClick:G,children:[L,(0,C.jsxs)("div",{className:R,children:[(0,C.jsx)("div",{className:p.default.media,children:N}),O]}),D]})]})})};var n=s(a(45095)),i=s(a(94184)),r=a(67294),o=a(61991),l=s(a(69618)),d=a(65417),u=s(a(2320)),c=s(a(76530)),h=a(58668),f=s(a(40659)),p=s(a(4976)),m=a(31515),_=a(18644),g=a(49082),v=s(a(75426)),C=a(85893)},62089:(e,t,a)=>{"use strict";var s=a(95318),n=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{product:t,fallback:a=null,showAvailabilityNotice:s=!1}=e,n=(0,r.default)(e,p);const{currency:m,priceAmount1000:_}=t,g=(0,c.getActivePrice)(t);if(!m||null==_||null==g)return a;const v=e=>o.formatAmount1000(m,e),C=v(g);let S=(0,c.isSalePriceActive)(t)?`${C} ~${v(_)}~`:C;const y=(e=>e.availability===h.ProductAvailability.OUT_OF_STOCK?d.default.t(1103):null)(t);s&&y&&(S+="  "+y);return(0,f.jsx)(l.EmojiText,(0,i.default)((0,i.default)({},n),{},{text:S,formatters:[[[u.Strikethrough,{selectable:n.selectable}]]],ellipsify:!0}))};var i=s(a(81109)),r=s(a(6479)),o=n(a(74764)),l=a(65417),d=s(a(43725)),u=a(69541),c=a(13151),h=a(6822),f=a(85893);const p=["product","fallback","showAvailabilityNotice"]},3013:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ProductThumb=void 0,t.ProductThumbPlaceholder=c;var n=s(a(94184)),i=a(67294),r=a(58668),o=s(a(57822)),l=s(a(23217)),d=a(49082),u=a(85893);function c(e){let{onClick:t,className:a}=e;return(0,u.jsx)("div",{className:(0,n.default)(a,o.default.mediaCanvas,o.default.placeholder,{[o.default.mediaCanvasClickable]:!!t}),onClick:t,children:(0,u.jsx)(l.default,{name:"business-description"})})}const h=(0,i.forwardRef)(((e,t)=>{const{theme:a,active:s,onClick:l,badge:h,overlayContent:f,imgRef:p}=e,m=(0,i.useRef)(null),_=(0,i.useRef)(null),g=(0,d.useModelValues)(e.mediaData,["mediaStage","mediaBlob","renderableUrl","preview"]);(0,i.useEffect)((()=>(null==p||p(_.current),()=>{null==p||p(null)})),[]);const v=()=>m.current;let C,S;(0,i.useImperativeHandle)(t,(()=>({getImageContainerElement:v}))),g.mediaStage===r.MEDIA_DATA_STAGE.RESOLVED?(C=(0,u.jsx)("div",{className:(0,n.default)(o.default.mediaCanvas,{[o.default.mediaCanvasClickable]:!!l}),style:{backgroundImage:`url(${g.renderableUrl})`},onClick:l,ref:_}),null!=f&&(S=(0,u.jsx)("div",{className:o.default.overlay,children:f}))):C=g.mediaStage===r.MEDIA_DATA_STAGE.PREPARING?(0,u.jsx)(c,{className:e.className,onClick:e.onClick}):g.mediaStage===r.MEDIA_DATA_STAGE.ERROR_MISSING?null:(0,u.jsx)("div",{className:o.default.mediaCanvas});const y=(0,n.default)(e.className,{[o.default.canvasSecondRow]:"hideableSecondRow"===a,[o.default.canvasComponent]:"list"!==a,[o.default.canvasComponentLargeGallerySpacing]:"largeGallerySpacing"===a,[o.default.list]:"list"===a,[o.default.viewerFlow]:"viewerFlow"===a,[o.default.squareThumb]:"squareThumb"===a,[o.default.active]:!0===s});if(e.large)return(0,u.jsx)("div",{className:o.default.canvasComponentLarge,children:C});const b=(0,u.jsxs)("div",{ref:m,className:y,children:[(0,u.jsx)("div",{className:o.default.canvasBody}),C,S,h]});return"list"===a?(0,u.jsx)("div",{className:o.default.listWrapper,children:b}):b}));t.ProductThumb=h},60809:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const a=null===(t=e.product.getPreviewImage())||void 0===t?void 0:t.mediaData;if(!a)return null;return(0,d.jsx)(u,(0,n.default)({mediaData:a},e))};var n=s(a(81109)),i=s(a(90233)),r=a(58668),o=s(a(88990)),l=a(49082),d=a(85893);const u=function(e){const{product:t,selections:a,active:s,onClick:n}=e,u=(0,l.useModelValues)(e.mediaData,["mediaStage"]).mediaStage!==r.MEDIA_DATA_STAGE.RESOLVED,c=u?()=>{}:n;return(0,d.jsx)(i.default,{model:t,selections:a,disabled:u,children:(0,d.jsx)(o.default,{product:t,onClick:c,active:s,checkbox:!0,disableOutOfStockAppearance:!0,isMuted:u})},t.id.toString())}},73481:(e,t,a)=>{"use strict";t.Z=function(e){a(38680).j(),a(75728).yj(),a(82628).Y();{const e=a(5882).default,t=a(82039).ProfilePicThumbCollection,s=a(37362).default,n=a(79485).default;e.supported&&t.on("change:tag",(e=>{const t=navigator.serviceWorker;(null==t?void 0:t.controller)&&!e.tag&&n.request(t.controller,s.REMOVE_PP,e.id).catch((()=>{}))}))}a(99234).initDailyStatsStartTime();(0,a(97172).default)((0,s.getEmojiTypeFromPlatform)(e));(0,a(46588).Z)();const t=a(52805);return{MainComponent:t.MainComponent,hasPending:t.hasPending,notificationBackend:a(96669),execApiCmd:a(61661).Z}};var s=a(14315)},5280:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const[e,t]=(0,i.useState)(0),[a,s]=(0,i.useState)(!1),S=()=>{const e=u.ChatCollection.filter((e=>e.archive&&(e.optimisticUnreadCount>0||e.optimisticUnreadCount===h.default.MARKED_AS_UNREAD))).length;t(e)},y=()=>{if((0,p.isElevatedImportantMessageEnabled)()){const e=u.ChatCollection.filter((e=>e.archive&&e.isGroup&&(e.optimisticUnreadCount>0||e.optimisticUnreadCount===h.default.MARKED_AS_UNREAD))).some((e=>{var t,a;const s=null!==(t=null===(a=e.groupMetadata)||void 0===a?void 0:a.unreadMentionMetadata.getUnreadMentionCount())&&void 0!==t?t:0,n=!e.archiveAtMentionViewedInDrawer;return s>0&&n}));s(e)}};(0,v.useListener)(u.ChatCollection,"add remove reset change:archive change:optimisticUnreadCount change:muteExpiration",S),(0,v.useListener)(u.ChatCollection,"change:archive change:hasUnreadMention change:archiveAtMentionViewedInDrawer",y),(0,i.useEffect)((()=>{S(),(0,p.isElevatedImportantMessageEnabled)()&&y()}),[]);const b=0===e||a?null:(0,C.jsx)("div",{className:r.default.unreadCountWrapper,children:(0,C.jsx)(g.default,{count:e,transparentBg:!0})}),E=(0,C.jsx)(f.FlexRow,{align:"center",justify:"center",className:r.default.archivedIcon,children:(0,C.jsx)(_.default,{name:"archived"})}),T=a?(0,C.jsx)("div",{className:r.default.iconMentions,children:(0,C.jsx)(_.default,{name:"mentions",className:r.default.iconMentions})},"icon-mentions"):null,x=[n.default._("Archived",null,{hk:"1PK2es"}),a?n.default._("@ message",null,{hk:"2UzXVt"}):""].join(" "),M=(0,C.jsxs)(C.Fragment,{children:[T,b]});return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("button",{"data-tab":h.default.TAB_ORDERS.ARCHIVED_ENTRY_POINT,className:r.default.wrapper,onClick:()=>{new m.default.ChatFolderOpen({activityIndicatorCount:e,folderType:"Archive"}).commit(),c.Cmd.openDrawerLeft((0,C.jsx)(o.ArchivedFlowLoadable,{}))},"aria-label":x,children:(0,C.jsx)(d.default,{image:E,primary:n.default._("Archived",null,{hk:"1PK2es"}),detail:M,theme:"archive-panel"})}),(0,C.jsx)(l.default,{})]})};var n=s(a(48360)),i=a(67294),r=s(a(75089)),o=a(78457),l=s(a(22245)),d=s(a(44356)),u=a(69951),c=a(88102),h=s(a(69618)),f=a(29623),p=a(10435),m=s(a(11339)),_=s(a(23217)),g=s(a(72994)),v=a(19529),C=a(85893)},42126:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(81109)),i=(s(a(45095)),a(57319)),r=a(67294),o=s(a(65615)),l=a(88102),d=a(17239),u=s(a(69618)),c=a(12591),h=a(96384),f=(a(99234),a(7293)),p=a(18671),m=a(84387),_=s(a(96876)),g=s(a(11339)),v=a(72472),C=s(a(51783)),S=s(a(18779)),y=s(a(65105)),b=a(64551),E=s(a(65932)),T=a(8080),x=a(97628),M=a(65127),P=s(a(41956)),A=a(85893);class I extends r.PureComponent{constructor(e){var t;super(e),this._showBatteryTimer=new i.ShiftTimer((()=>this._batteryUpdate(!1))),this._onDismissLowBatteryWarning=()=>{const e=this.state.lowBatteryWarning;e>0&&this.setState({lowBatteryWarning:-e})},this._setShowButterBarTimer=new i.ShiftTimer((e=>{this.props.setShowButterBar&&this.props.setShowButterBar(e)})),this._showNotifyTimer=new i.ShiftTimer((e=>{this.setState({showNotify:e})})),this._onShowNotify=()=>{this._showNotifyTimer.onOrBefore(0,!1)},this._onShowNotifyDelay=()=>{this._showNotifyTimer.onOrBefore(u.default.NOTIFICATION_PROMPT_DELAY,!0),this._setShowButterBarTimer.onOrBefore(0,!0)},this._onRequestPermissions=()=>{l.Cmd.openModal((0,A.jsx)(p.GuidePopup,{messaging:p.Messaging.NOTIFICATIONS,onConfirm:k,onCancel:j,type:p.TYPE.GUIDE_ALLOW})),window.Notification.requestPermission((e=>{l.Cmd.closeModal(),this.setState({notifyPermission:e})}))},this._shouldShowBanner=()=>f.GK.supportsFeature(f.GK.F.USER_NOTICE)&&C.default.shouldShowButterBar&&null!=C.default.noticeId&&null!=C.default.banner&&!1===C.default.blocking,this._handleNoticeBannerChange=()=>{if(this._shouldShowBanner()&&!this.state.bannerDisplayed){new g.default.UserNotice({userNoticeId:C.default.noticeId,userNoticeContentVersion:C.default.policyVersion,userNoticeEvent:g.default.USER_NOTICE_EVENT.BANNER_APPEAR}).commit(),this.setState({bannerDisplayed:!0})}},this._handleFatalBannerChange=()=>{},this._handleStorageChange=()=>{},this.handleNoticeIdChange=()=>{this.setState({bannerDisplayed:!1})},this._onDismissNotice=()=>{C.default.dismissButterBarNotice()};const a=d.Conn.battery<u.default.BATTERY_LOW_THRESHOLD_1?d.Conn.battery<u.default.BATTERY_LOW_THRESHOLD_2?2:1:0;this.state=(0,n.default)({lowBatteryWarning:d.Conn.plugged?0:a,notifyPermission:null===(t=window.Notification)||void 0===t?void 0:t.permission,showNotify:!1,bannerDisplayed:!1},null);const s=()=>{this._batteryUpdate(!0)};e.listeners.add(d.Conn,"change:plugged",s),e.listeners.add(d.Conn,"change:battery",s),e.listeners.add(C.default,"change:noticeId",this.handleNoticeIdChange),e.listeners.add(C.default,"change:banner change:blocking",this._handleNoticeBannerChange)}componentWillUnmount(){this._showNotifyTimer.cancel(),this._showBatteryTimer.cancel(),this._setShowButterBarTimer.cancel()}_batteryUpdate(e){const t=this.state.lowBatteryWarning;d.Conn.plugged||d.Conn.battery>u.default.BATTERY_LOW_THRESHOLD_1?0!==t&&this.setState({lowBatteryWarning:0}):d.Conn.battery<=u.default.BATTERY_LOW_THRESHOLD_2?-2!==t&&(e?this._showBatteryTimer.onOrBefore(u.default.BATTERY_DELAY):2!==t&&this.setState({lowBatteryWarning:2})):t>-1&&d.Conn.battery<=u.default.BATTERY_LOW_THRESHOLD_1&&(e?this._showBatteryTimer.onOrBefore(u.default.BATTERY_DELAY):1!==t&&this.setState({lowBatteryWarning:1}))}_updateShowButterBarState(){this.props.setShowButterBar&&this.props.setShowButterBar(this.state.showNotify||this.state.bannerDisplayed)}componentDidMount(){this._updateShowButterBarState()}componentDidUpdate(){this._updateShowButterBarState()}render(){if(f.GK.supportsFeature(f.GK.F.MD_BACKEND)&&(T.Stream.displayInfo===T.StreamInfo.RESUMING||T.Stream.displayInfo===T.StreamInfo.TIMEOUT||this.state.lowBatteryWarning>0))return null;return(0,A.jsxs)(P.default,{transitionName:"butterbar",className:o.default.container,children:[null,null,(0,A.jsx)(S.default,{shouldShow:this._shouldShowBanner(),banner:C.default.banner,theme:this.context.theme,onDismissNotice:0===b.ServerProps.greenAlertBannerDuration?null:this._onDismissNotice}),(0,A.jsx)(y.default,{displayInfo:T.Stream.displayInfo,needsUpdate:T.Stream.needsUpdate,needsManualDownload:!1,lowBatteryWarning:this.state.lowBatteryWarning,showNotify:this.state.showNotify,isMuted:this.props.mute.isMuted,notifyPermission:this.state.notifyPermission,showAwarenessMsg:this.props.mdOptInDeadline.showAwarenessMsg,showCountDownMsg:this.props.mdOptInDeadline.showCountDownMsg,daysLeftTillDeadline:this.props.mdOptInDeadline.daysLeftTillDeadline,expirationTime:this.props.mdOptInDeadline.expirationTime,onShowNotify:this._onShowNotify,onShowNotifyDelay:this._onShowNotifyDelay,onRequestPermissions:this._onRequestPermissions,onDismissLowBatteryWarning:this._onDismissLowBatteryWarning})]})}}I.CONCERNS={stream:["displayInfo","needsUpdate"],notice:["noticeId","blocking","banner","shouldShowButterBar"],mute:["isMuted"],mdOptInDeadline:["showAwarenessMsg","showCountDownMsg","daysLeftTillDeadline","expirationTime"]},I.contextType=x.ThemeContext,I.displayName="ButterBarClass";const w=(0,m.ListenerHOC)((0,E.default)(I,I.CONCERNS));function k(){l.Cmd.closeModal()}function j(){switch(M.UA.browser){case u.default.BROWSER_TYPE.CHROME:return(0,c.openExternalLink)((0,h.getNotificationChromeFaqUrl)());case u.default.BROWSER_TYPE.FIREFOX:return(0,c.openExternalLink)((0,h.getNotificationFirefoxFaqUrl)());case u.default.BROWSER_TYPE.SAFARI:return(0,c.openExternalLink)((0,h.getNotificationSafariFaqUrl)());case u.default.BROWSER_TYPE.OPERA:return(0,c.openExternalLink)((0,h.getNotificationOperaFaqUrl)());case u.default.BROWSER_TYPE.EDGE:return(0,c.openExternalLink)((0,h.getNotificationEdgeFaqUrl)());default:return(0,c.openExternalLink)((0,h.getNotificationChromeFaqUrl)())}}t.default=e=>{let{setShowButterBar:t}=e;return(0,A.jsx)(w,{stream:T.Stream,notice:C.default,mute:v.MuteCollection.globalMute(),mdOptInDeadline:_.default,setShowButterBar:t})}},29237:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.jsxs)("span",{className:(0,n.default)({[i.default.block]:!e.inline}),children:[(0,o.jsx)("span",{className:i.default.actionText,onClick:e.action,children:e.children}),(0,o.jsx)(r.default,{className:i.default.chevron,directional:!0,name:"chevron-right-text"})]})};var n=s(a(94184)),i=s(a(58137)),r=s(a(23217)),o=a(85893)},30508:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{action:t=null,onDismiss:a,type:s}=e,f=(0,n.default)(i.default.butterbar,{[i.default.action]:t,[i.default.computer]:"computer"===s||"generalAlert"===s,[i.default.phone]:"phone"===s,[i.default.notification]:"notification"===s,[i.default.battery]:"battery"===s,[i.default.update]:"update"===s,[i.default.notice]:"notice"===s&&!r.Conn.isSMB,[i.default.noticeSmb]:"notice"===s&&r.Conn.isSMB,[i.default.fatal]:"fatal"===s,[i.default.nuxGreen]:"nuxGreen"===s,[i.default.nuxBlue]:"nuxBlue"===s,[i.default.mdOptInAwareness]:"mdOptInAwareness"===s,[i.default.mdOptInCountdown]:"mdOptInCountdown"===s}),p={computer:"alert-computer",phone:"alert-phone",notification:"alert-notification",battery:"alert-battery",update:"alert-update",notice:"alert-notice",fatal:"alert",generalAlert:"alert",nuxGreen:"business-description",nuxBlue:"collections_folder",mdOptInAwareness:"md-opt-in-green-light",mdOptInCountdown:"md-opt-in-yellow-light"},m=a?(0,h.jsx)("div",{className:i.default.controls,children:(0,h.jsx)(u.default,{className:i.default.controlsIcon,"aria-label":d.default.t(1585),name:"x",onClick:a})}):null,_=e.title?(0,h.jsx)("div",{className:i.default.title,children:e.title}):null,g=(0,h.jsx)(c.default,{name:p[e.type],"aria-label":e.iconDescription}),v=e.iconSvg&&(0,o.sanitizeNoticeSVG)(e.iconSvg),C=v?(0,h.jsx)("span",{"aria-label":e.iconDescription,dangerouslySetInnerHTML:{__html:v}}):g;let S;switch(e.type){case"notice":S=(0,h.jsx)(l.FlexRow,{className:i.default.noticeSvgWrapper,align:"center",justify:"center",children:C});break;case"fatal":S=(0,h.jsx)(l.FlexRow,{className:i.default.fatalSvgWrapper,align:"center",justify:"center",children:(0,h.jsx)(c.default,{name:p[e.type]})});break;case"nuxGreen":S=(0,h.jsx)(l.FlexRow,{className:i.default.nuxGreenSvgWrapper,align:"center",justify:"center",children:(0,h.jsx)(c.default,{name:p[e.type]})});break;case"nuxBlue":S=(0,h.jsx)(l.FlexRow,{className:i.default.nuxBlueSvgWrapper,align:"center",justify:"center",children:(0,h.jsx)(c.default,{name:p[e.type]})});break;case"mdOptInAwareness":S=(0,h.jsx)(c.default,{name:"md-opt-in-green-light"});break;case"mdOptInCountdown":S=(0,h.jsx)(c.default,{name:"md-opt-in-yellow-light"});break;case"generalAlert":S=(0,h.jsx)(l.FlexRow,{className:i.default.fatalSvgWrapper,align:"center",justify:"center",children:(0,h.jsx)(c.default,{name:p[e.type],width:36,height:36})});break;default:S=(0,h.jsx)(c.default,{name:p[e.type]})}return(0,h.jsx)("div",{className:i.default.wrapper,children:(0,h.jsxs)("div",{className:f,onClick:t,children:[(0,h.jsx)("div",{className:i.default.icon,children:S}),(0,h.jsxs)("div",{className:i.default.body,children:[_,e.text?"notice"===e.type?(0,h.jsx)("div",{dangerouslySetInnerHTML:{__html:(0,o.sanitizeNoticeText)(e.text)},className:i.default.text}):(0,h.jsx)("div",{className:i.default.text,children:e.text}):null]}),m]})})};var n=s(a(94184)),i=s(a(48651)),r=a(17239),o=a(32303),l=a(29623),d=s(a(43725)),u=s(a(38932)),c=s(a(23217)),h=a(85893)},18779:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{shouldShow:t,banner:a,theme:s,onDismissNotice:r}=e;if(!t)return null;if(!(null==a?void 0:a.text))return null;const{iconDescription:o,text:l,iconSvg:d}=a;let u;d&&(u="light"===s?d.light:d.dark);return(0,i.jsx)(n.default,{type:"notice",text:l,iconSvg:u,iconDescription:null!=o?o:"",onDismiss:r},"noticebbar")};var n=s(a(30508)),i=a(85893)},28283:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const[e,t]=(0,r.useState)(!0),a=(0,u.default)((()=>new n.ShiftTimer((()=>{t(!0)}))));(0,r.useEffect)((()=>()=>{a.current.cancel()}),[]);const s=()=>{c.Socket.poke(),t(!1),a.current.onOrAfter(3e3)};let f,p;e?(f=(0,h.jsxs)(h.Fragment,{children:[`${d.default.t(750)} `,(0,h.jsx)(o.default,{action:s,children:d.default.t(1137)})]}),p=i.default._("Computer not connected",null,{hk:"300jSy"})):(f=null,p=d.default.t(372));return(0,h.jsx)(l.default,{type:"computer",title:p,text:f})};var n=a(57319),i=s(a(48360)),r=a(67294),o=s(a(29237)),l=s(a(30508)),d=s(a(43725)),u=s(a(59552)),c=a(65044),h=a(85893)},65105:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{displayInfo:t,needsUpdate:a,needsManualDownload:s,lowBatteryWarning:d,showNotify:u,isMuted:v,notifyPermission:C,showAwarenessMsg:T,showCountDownMsg:x,daysLeftTillDeadline:M,expirationTime:P,onShowNotify:A,onShowNotifyDelay:I,onRequestPermissions:w,onDismissLowBatteryWarning:k}=e,j=null;switch(t){case _.StreamInfo.OFFLINE:j=(0,S.jsx)(p.default,{},"bbar");break;case _.StreamInfo.OPENING:case _.StreamInfo.CONNECTING:j=(0,S.jsx)(m.default,{},"bbar");break;case _.StreamInfo.NORMAL:break;case _.StreamInfo.RESUMING:case _.StreamInfo.TIMEOUT:const e=(0,S.jsxs)(S.Fragment,{children:[h.default.t(751),(0,S.jsx)(i.default,{action:b,children:h.default.t(690)})]});j=(0,S.jsx)(r.default,{type:"phone",title:h.default.t(1035),text:e},"bbar")}!j&&d>0&&(j=(0,S.jsx)(r.default,{type:"battery",title:h.default.t(1031),text:h.default.t(292),dismissable:!0,onDismiss:k},"bbar"));if(T||x){let e,t,a,s;T?(e="mdOptInAwareness",t=h.default.t(763),s=(0,c.mdMigrationExperience)()?h.default.t(761):h.default.t(760),a=(0,S.jsxs)(S.Fragment,{children:[s,(0,S.jsx)("div",{className:o.default.mdOptInLink,children:h.default.t(1033)})]})):(e="mdOptInCountdown",t=h.default.t(765),(0,g.isNumber)(M)&&M>0?a=(0,S.jsxs)(S.Fragment,{children:[n.default._({"*":"This version expires in {num_days} days. Update to use WhatsApp Web without keeping your phone online.",_1:"This version expires in 1 day. Update to use WhatsApp Web without keeping your phone online."},[n.default._plural(M,"num_days")],{hk:"rjbxf"}),(0,S.jsx)("div",{className:o.default.mdOptInLink,children:h.default.t(1033)})]}):P&&(a=(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(f.default,{id:767,params:{time:P}}),(0,S.jsx)("div",{className:o.default.mdOptInLink,children:h.default.t(1033)})]}))),j=(0,S.jsx)(r.default,{type:e,title:t,text:a,action:E},"bbar")}if(!j&&a){const e=(0,S.jsx)(i.default,{children:h.default.t(303)});j=(0,S.jsx)(r.default,{type:"update",title:h.default.t(1392),text:e,action:y},"bbar")}if(null==j&&window.Notification&&C===l.default.PERMISSION_DEFAULT&&!v)if(u){const e=(0,S.jsx)(i.default,{children:h.default.t(417)});j=(0,S.jsx)(r.default,{type:"notification",title:n.default._("Get notified of new messages",null,{hk:"1d3TeN"}),text:e,action:w},"bbar")}else I();else u&&A();return j};var n=s(a(48360)),i=s(a(29237)),r=s(a(30508)),o=s(a(48651)),l=s(a(69618)),d=a(12591),u=a(96384),c=a(57701),h=s(a(43725)),f=s(a(56074)),p=s(a(28283)),m=s(a(77676)),_=a(8080),g=a(31515),v=a(29898),C=a(19866),S=a(85893);function y(){v.Updater.restart()}function b(){(0,d.openExternalLink)((0,u.getCannotConnectFaqUrl)())}function E(){(0,C.upgradeToMD)(!0)}},77676:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const[e,t]=(0,r.useState)(!1),[a,s]=(0,r.useState)(!1),_=(0,c.default)(),g=(0,h.default)((()=>new n.ShiftTimer((()=>{t(!0),s(!0)})))),v=(0,h.default)((()=>new n.ShiftTimer((()=>{_()}))));(0,r.useEffect)((()=>(g.current.onOrBefore(3e3),()=>{g.current.cancel(),v.current.cancel()})),[]);const C=()=>{v.current.cancel(),g.current.onOrBefore(3e3),t(!1)};let S,y;if((0,f.useListener)(p.Socket,"change:state",C),u.Stream.displayInfo===u.StreamInfo.OPENING)S=d.default.t(371);else{if(u.Stream.displayInfo!==u.StreamInfo.CONNECTING)return null;S=d.default.t(372)}const b=()=>{p.Socket.poke(),C()};if(e){v.current.onOrAfter(1e3);let e=p.Socket.retryTimestamp-Date.now();if(isNaN(e)||e<1)e=d.default.t(1183),setTimeout((()=>{p.Socket.poke()}),0);else if(e<6e4){const t=Math.ceil(e/1e3);e=d.default.t(1185,{number:t,_plural:t})}else e=d.default.t(1184,{duration:i.default.duration(e).humanize()});y=(0,m.jsxs)(m.Fragment,{children:[e,(0,m.jsx)(o.default,{action:b,children:d.default.t(1181)})]})}else y=a?(0,m.jsx)("span",{children:d.default.t(1183)}):null;return(0,m.jsx)(l.default,{type:"computer",title:S,text:y})};var n=a(57319),i=s(a(30381)),r=a(67294),o=s(a(29237)),l=s(a(30508)),d=s(a(43725)),u=a(8080),c=s(a(59909)),h=s(a(59552)),f=a(19529),p=a(65044),m=a(85893)},49107:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(99964)),i=s(a(45120)),r=s(a(52013)),o=s(a(94184)),l=s(a(48360)),d=a(67294),u=s(a(56720)),c=s(a(44356)),h=a(65417),f=a(5124),p=s(a(81654)),m=a(11054),_=s(a(23217)),g=s(a(43557)),v=s(a(41502)),C=s(a(41956)),S=a(85893);const y={btnContext:{display:"l7jjieqr",width:"qg8w82as",height:"jdwybkuq",marginStart:"qnz2jpws",color:"s4k44ver",verticalAlign:"fewfhwl7"},btnContextHover:{":focus":{borderTopStartRadius:"mmjxyicr",borderTopEndRadius:"r1jx4bdh",borderBottomEndRadius:"f9yclydc",borderBottomStartRadius:"mtzt60z0",boxShadow:"t5zm8b4w"}},product:{position:"g0rxnol2",top:"cy13c0w7"}};function b(e,t){const{contextEnabled:a,onContext:s}=e,[b,E]=(0,d.useState)(!1),[T,x]=(0,d.useState)(!1),M=(0,v.default)(T),P=(0,g.default)(),A=(0,d.useRef)(null),I=(0,d.useRef)(null),w=()=>I.current,k=()=>{i.default.maybeIndicateFocus(I.current)};Boolean(M)&&Boolean(!e.contextMenu)&&x(!1);const j=e=>{e.stopPropagation()},N=e=>{e.stopPropagation(),(a()||T)&&(e.preventDefault(),null==s||s({anchor:e.target}))},O=e=>{if((0,p.default)(e)){if(e.stopPropagation(),!a()&&!T)return;null==s||s({anchor:A.current})}},R=()=>A.current,D=()=>{(A||e.contextEnabled())&&r.default.focus(A.current)},L=()=>{b||T||!e.contextEnabled()||E(!0)},B=()=>{b&&E(!1)},F=()=>{var e;null===(e=A.current)||void 0===e||e.removeAttribute("aria-hidden")},G=()=>{var e;null===(e=A.current)||void 0===e||e.setAttribute("aria-hidden","true")},U=P&&Boolean(e.active)&&e.contextEnabled(),V=(0,o.default)(e.className,{hoverLocal:T||b||U});(0,d.useImperativeHandle)(t,(()=>({indicateFocus:k,focusOnContextMenuButton:D,mouseOver:L,mouseLeave:B,getContextMenuRef:R,getCellFrameDivRef:w})));const H="string"==typeof e.primary?(0,S.jsx)(h.EmojiText,{text:e.primary,direction:"auto",formatters:f.Configuration.Search({terms:e.searchText?[e.searchText]:[]}),titlify:!0,ellipsify:!0}):e.primary;let K=null,q=null;if(null!=e.pendingAction&&e.pendingAction>0)q=(0,S.jsx)("div",{className:(0,u.default)(y.btnContext,P&&y.btnContextHover),children:(0,S.jsx)(m.Spinner,{size:18,stroke:6,color:"highlight"})});else if(b||e.active){var W;const t=(0,u.default)(y.btnContext,"product"===e.theme&&y.product),a="new-chat-info"===e.theme;K=(0,S.jsx)("button",{"data-a8n":n.default.key("context-btn"),className:t,ref:A,onMouseDown:j,onClick:N,"aria-label":null!==(W=e.contextMenuAriaLabel)&&void 0!==W?W:l.default._("Open the chat context menu",null,{hk:"2rxtMR"}),onKeyDown:O,onFocus:F,onBlur:G,"aria-hidden":!0,tabIndex:e.contextMenuControlled?-1:0,children:(0,S.jsx)(_.default,{name:"down",color:a?"secondary":null})},"icon-context")}const Y=(0,S.jsx)(C.default,{transitionName:"fade",children:q}),z=(0,S.jsx)(C.default,{transitionName:"pop-fast-chat",children:b?K:null});let Q,$;return null!=e.secondary?(Q=e.primaryDetail,$=[(0,S.jsx)(d.Fragment,{children:e.secondaryDetail},"prop"),(0,S.jsx)(d.Fragment,{children:Y},"spinner"),(0,S.jsx)(d.Fragment,{children:z},"button")]):Q=[(0,S.jsx)(d.Fragment,{children:e.primaryDetail},"prop"),(0,S.jsx)(d.Fragment,{children:Y},"spinner"),(0,S.jsx)(d.Fragment,{children:z},"button")],(0,S.jsx)(c.default,{a8n:e.a8n,setDivRef:e=>{I.current=e},image:e.image,customImage:e.customImage,className:V,unread:e.unread,active:e.active,idle:e.idle,checkbox:e.checkbox,isMuted:e.isMuted,dragging:e.dragging,theme:e.theme,primary:H,primaryDetail:Q,secondary:e.secondary,secondaryDetail:$,detail:e.detail,onClick:e.onClick,onMouseDown:e.onMouseDown,onContextMenu:e.contextEnabled()?e=>{a()&&(e.stopPropagation(),e.preventDefault(),s&&s({event:e}))}:null,onMouseEnter:b?null:()=>{b||T||!e.contextEnabled()||E(!0)},onMouseOver:b?null:L,onMouseLeave:b?B:null})}var E=(0,d.forwardRef)(b);t.default=E},65511:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.Mode=t.Chat=void 0;var i=n(a(48926)),r=a(50796),o=n(a(45120)),l=n(a(52013)),d=n(a(48360)),u=a(67294),c=a(55712),h=n(a(24935)),f=n(a(49107)),p=a(63183),m=a(69951),_=n(a(17589)),g=a(88102),v=n(a(52665)),C=a(17239),S=n(a(69618)),y=a(2732),b=n(a(56792)),E=n(a(39424)),T=a(88984),x=a(32303),M=a(71174),P=a(60769),A=s(a(64103)),I=a(7293),w=a(57701),k=n(a(63928)),j=n(a(45152)),N=a(55414),O=n(a(46040)),R=a(50338),D=a(24505),L=n(a(43725)),B=a(10435),F=a(84387),G=a(47809),U=n(a(75109)),V=n(a(11339)),H=(a(72472),n(a(90922))),K=a(12176),q=n(a(73437)),W=a(29894),Y=n(a(15246)),z=a(92745),Q=n(a(68132)),$=n(a(65932)),X=a(31019),J=a(13923),Z=n(a(4478)),ee=n(a(55364)),te=a(18644),ae=n(a(24717)),se=n(a(35148)),ne=a(77591),ie=n(a(39546)),re=a(85893);const oe={LAST:"LAST",INFO:"INFO"};t.Mode=oe;class le extends u.PureComponent{static getDerivedStateFromProps(e,t){const a={};let s=e.active&&e.active.value instanceof p.Chat&&ie.default.equals(e.active.value.id,e.chat.id);e.active&&e.active.value instanceof ie.default&&ie.default.isGroup(e.active.value)&&(s=ie.default.equals(e.active.value,e.chat.id)),t.active!==s&&(a.active=s);const n=e.searchQuery?e.searchQuery.trimmed:"";t.searchText!==n&&(a.searchText=n);const i=e.chat.id;return t.chatId!==i&&(a.chatId=i,a.unreadCount=e.chat.optimisticUnreadCount),a}constructor(e){var t;super(e),t=this,this._hoverCounter=0,this._setCellRef=e=>{this._cellRef=e},this._setHotKeysRef=e=>{this._hotKeysRef=e},this.state={active:!1,dragging:!1,searchText:"",contextMenu:null,chatId:null,unreadCount:0,showUnreadMentonIcon:!1},this._setUnreadCount=()=>{const e=this.props.chat.optimisticUnreadCount;e!==this.state.unreadCount&&this.setState({unreadCount:e})},this._prefetchGroupMetadata=()=>{var e;const{chat:t}=this.props;I.GK.supportsFeature(I.GK.F.GROUPS_V_3)&&t.isGroup&&(null===(e=t.groupMetadata)||void 0===e?void 0:e.stale)&&k.default.find(t.id).catch((0,r.filteredCatch)([ne.WebdDrop,A.ProtoVersionUndefined],(()=>{})))},this.onSearch=()=>{this.props.searchQuery?this.setState({searchText:this.props.searchQuery.trimmed}):__LOG__(3)`Chat: prop searchQuery is undefined`},this.onActiveChange=(e,t)=>{if("focus"===e){const e=this._hotKeysRef;e&&(l.default.focus(e),t&&(0,x.scrollIntoViewIfNeeded)(e))}this.setState({active:!!e})},this.contextEnabled=()=>{const{noContext:e}=this.props;return!e},this.editLabel=()=>{const{selectableState:e,multiSelection:t}=this.props;!this.props.searchQuery||this.props.searchQuery.isEmptyQuery?this.props.chat.archive?this.addOrRemoveLabelOnSelected():e&&t&&(e.setSelectable(!0),t.setVal((0,X.unproxy)(this.props.chat))):this.addOrRemoveLabelOnSelected()},this.addOrRemoveLabelOnSelected=()=>{const e=[(0,X.unproxy)(this.props.chat)];g.Cmd.openModal((0,re.jsx)(G.ManageLabelFlowLoadable,{modelsToUpdate:e}))},this.onMenu=e=>{if(this.state.contextMenu)return void this.setState({contextMenu:null});const t=this.props.chat,a=[];t.canArchive()&&a.push((0,re.jsx)(h.default,{onArchive:this.onArchive,chat:(0,X.unproxy)(t)},"archive")),t.mute.canMute()&&(t.archive&&this.props.hideMuteOption||a.push((0,re.jsx)(H.default,{onMute:this.onMute,mute:t.mute,chat:t,settings:Q.default},"mute"))),a.push((0,re.jsx)(E.default,{onDeleteOrExit:this.onDeleteOrExit,chat:(0,X.unproxy)(t)},"delete")),C.Conn.platform===C.PLATFORMS.IPHONE&&t.isBroadcast||!t.canPin()||a.push((0,re.jsx)(Y.default,{onPinOrUnpin:this._onPinOrUnpin,chat:t},"pin")),(0,w.canEditLabelAssociation)()&&a.push((0,re.jsx)(M.DropdownItem,{a8n:"mi-edit-label",action:this.editLabel,children:d.default._("Edit label",null,{hk:"3QX44B"})},"EditLabel")),t.canUnread&&a.push((0,re.jsx)(U.default,{onMarkUnread:this.onMarkUnread,chat:(0,X.unproxy)(t)},"mark_unread")),this.setState({contextMenu:{menu:a,event:e.event,anchor:e.anchor}})},this._removeContext=()=>{this.setState({contextMenu:null})},this.onMute=e=>{g.Cmd.muteChat((0,X.unproxy)(this.props.chat),e)},this.onArchive=e=>{g.Cmd.archiveChat((0,X.unproxy)(this.props.chat),e)},this.onDeleteOrExit=()=>{g.Cmd.deleteOrExitChat((0,X.unproxy)(this.props.chat),this)},this._onPinOrUnpin=function(){var e=(0,i.default)((function*(e){!e||(yield(0,W.getNumChatsPinned)())<3?g.Cmd.pinChat((0,X.unproxy)(t.props.chat),e):m.ChatCollection.filter((e=>{var t;return e.shouldAppearInList&&(null!==(t=e.pin)&&void 0!==t?t:0)>0})).length>=3?g.Cmd.openModal((0,re.jsx)(v.default,{onOK:()=>g.Cmd.closeModal(),okText:L.default.t(1765),children:L.default.t(41)})):g.Cmd.openModal((0,re.jsx)(v.default,{title:L.default.t(1729),onOK:()=>{(0,W.unpinAll)(),g.Cmd.closeModal()},okText:L.default.t(1730),onCancel:()=>g.Cmd.closeModal(),cancelText:L.default.t(1574),children:(0,re.jsx)(J.TextDiv,{theme:"muted",children:L.default.t(1731)})}))}));return function(){return e.apply(this,arguments)}}(),this.onMarkUnread=e=>{g.Cmd.markChatUnread((0,X.unproxy)(this.props.chat),e),e||this._clearUnreadMentions()},this.onClick=e=>{const{onClick:t,chat:a}=this.props;t&&t(e,(0,X.unproxy)(a))},this.onMouseDown=e=>{0===e.button&&this.onClick(e)},this.onKeyboardActivation=e=>{e.preventDefault(),e.stopPropagation(),o.default.shouldIndicateFocus(),this.onClick(e)},this.onDragEnter=e=>{if(!this.props.chat.canSend)return;new b.default(e.dataTransfer).hasType(S.default.DRAG_TYPE_FILE)&&(0===this._hoverCounter&&this.setState({dragging:!0}),this._hoverCounter+=1)},this.onDragLeave=e=>{if(!this.props.chat.canSend)return;new b.default(e.dataTransfer).hasType(S.default.DRAG_TYPE_FILE)&&(this._hoverCounter-=1,0===this._hoverCounter&&this.setState({dragging:!1}))},this.onDrop=e=>{const{chat:t}=this.props;if(!t.canSend)return;this.setState({dragging:!1});const a=new b.default(e.dataTransfer);(a.hasType(S.default.DRAG_TYPE_FILE)||a.hasType("text/uri-list")||a.hasType("text/html"))&&(0,P.getFiles)(e).then((e=>{g.Cmd.openChatFromUnread(t).then((a=>{a&&g.Cmd.attachMediaDrawer({chat:t,attachments:e.map((e=>({file:e}))),fileOrigin:V.default.MEDIA_PICKER_ORIGIN_TYPE.CHAT_PHOTO_LIBRARY})}))})).catch((0,r.filteredCatch)(A.MediaDragDropError,(e=>{g.Cmd.openChatFromUnread(t).then((a=>{a&&e.src&&g.Cmd.pasteChatTextInput(t,e.src)}))})))},this.indicateFocus=e=>{var t;e.stopPropagation(),e.preventDefault(),null===(t=this._cellRef)||void 0===t||t.indicateFocus()},this._toggleFocusInContact=()=>{this._hotKeysRef&&this._hotKeysRef!==document.activeElement?l.default.focus(this._hotKeysRef):this._cellRef&&this._cellRef.focusOnContextMenuButton()},this._handlers={enter:this.onKeyboardActivation,space:this.onKeyboardActivation,right:this._toggleFocusInContact,left:this._toggleFocusInContact},this._throttledSetUnreadCount=this.props.throttle(this._setUnreadCount,0,{leading:!1,tailing:!0})}componentDidMount(){var e;const{chat:t}=this.props;this.initListeners(this.props),I.GK.supportsFeature(I.GK.F.GROUPS_V_3)&&t.isGroup&&(null===(e=t.groupMetadata)||void 0===e?void 0:e.stale)&&R.UIBusyTasks.enqueue(this._prefetchGroupMetadata)}componentDidUpdate(e){const{chat:t}=this.props;var a;t!==e.chat&&(I.GK.supportsFeature(I.GK.F.GROUPS_V_3)&&t.isGroup&&(null===(a=t.groupMetadata)||void 0===a?void 0:a.stale)&&R.UIBusyTasks.enqueue(this._prefetchGroupMetadata));t.optimisticUnreadCount!==this.state.unreadCount&&this._throttledSetUnreadCount(),this.initListeners(this.props,e)}_clearUnreadMentions(){const{chat:e}=this.props;var t;(0,B.isGroupCatchUpEnabled)()&&e.isGroup&&(null===(t=e.groupMetadata)||void 0===t||t.unreadMentionMetadata.reset())}initListeners(e,t){const{listeners:a,active:s,chat:n,searchQuery:i,frequent:r}=e;(null==t?void 0:t.searchQuery)&&t.searchQuery!==i&&a.remove(t.searchQuery,z.SEARCH_EVENT,this.onSearch),!i||t&&i===t.searchQuery||a.add(i,z.SEARCH_EVENT,this.onSearch);const o=null==t?void 0:t.chat.id;if(!n.id.equals(o)&&((null==t?void 0:t.active)&&a.remove(t.active,t.chat.id.toString(),this.onActiveChange),s)){const e=(r?y.FREQUENT_PREFIX:"")+n.id.toString();a.add(s,e,this.onActiveChange)}}render(){let{chat:e,mode:t,secondary:a,theme:s,filterPreset:n,ephemeralIcon:i,hideArchivedIcon:r,hideMuteIcon:o}=this.props;const{searchText:l,active:d,dragging:u,contextMenu:h,unreadCount:p}=this.state;let m,g;switch(t){case oe.LAST:m=(0,re.jsx)(ee.default,{chat:e}),null==a&&(a=(0,re.jsx)(_.default,{chat:e}),g=(0,re.jsx)(O.default,{chat:e,mute:e.mute,unreadCount:p,hideArchivedIcon:!0===r,hideMuteIcon:!0===o,settings:Q.default,unreadMentionIcon:e.hasUnreadMention}));break;case oe.INFO:null==a&&(a=e.isGroup||e.isBroadcast?(0,re.jsx)(q.default,{groupMetadata:e.groupMetadata}):(0,re.jsx)(se.default,{contact:e.contact,presence:e.presence,chatstate:e.presence.chatstate,location:"list"}))}const v=(0,re.jsx)(T.DetailImage,{id:e.id,alt:"",ephemeralIcon:i,waitIdle:!0,size:"new-chat-info"===s?40:void 0}),C=this.props.mouseDownAsClick;let S;h&&(S=(0,re.jsx)(te.UIE,{displayName:"ChatContextMenu",escapable:!0,popable:!0,requestDismiss:this._removeContext,children:(0,re.jsx)(ae.default,{contextMenu:h})}));const y=(0,re.jsx)(K.Name,{chat:e,firstLabel:null==n?void 0:n.label,highlightText:l,showLabel:!0,titlify:!0,ellipsify:!0});let b=null;const E=e.getEphemeralSetting();return null!=E&&0!==E&&(b=(0,re.jsx)(c.InvisibleLabel,{children:(0,D.getDisappearingMessageExplanationString)(E)})),(0,re.jsx)(j.default.Provider,{value:e.groupMetadata,children:(0,re.jsxs)(N.HotKeys,{onRef:this._setHotKeysRef,handlers:this._handlers,onFocus:this.indicateFocus,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDrop:this.onDrop,"aria-selected":d,tabIndex:d?0:-1,role:"row",children:[(0,re.jsx)(f.default,{id:e.id,ref:this._setCellRef,theme:s,contextEnabled:this.contextEnabled,pendingAction:e.pendingAction,contextMenu:!!h,unread:0!==p,active:!!d,isMuted:!1,dragging:!!u,image:v,primary:y,primaryDetail:m,secondary:a,secondaryDetail:g,onClick:C?void 0:this.onClick,onMouseDown:C?this.onMouseDown:void 0,onContext:this.onMenu}),b,S]})})}}le.CONCERNS={chat:["id","isReadOnly","isGroup","pendingAction","canSend","isUser","contact","presence","groupMetadata","mute","isBroadcast","canUnread","optimisticUnreadCount","labels","archive","hasUnreadMention","kind"]},le.defaultProps={mode:oe.LAST},le.displayName="ChatImpl";const de=(0,Z.default)((0,F.ListenerHOC)((0,$.default)(le,le.CONCERNS)));t.Chat=de},17589:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(92297)),i=a(65417),r=a(7293),o=s(a(43725)),l=s(a(3982)),d=a(49082),u=a(85893);const c=function(e){const t=(0,d.useModelValues)(e.chat,["previewMessage","pendingInitialLoading"]);(0,d.useModelValues)(e.chatstate,["id","type"]);const a=(0,d.useModelValues)(e.presence,["hasData","withholdDisplayStage"],{isStrong:!1});if(a.isActive()){const e=a.getFormattedString();if(e)return(0,u.jsx)(i.EmojiText,{className:n.default.chatstateTyping,direction:"inherit",ellipsify:!0,titlify:!0,text:e})}const s=t.previewMessage;return s?(0,u.jsx)(l.default,{msg:s.safe(),msgType:"LastMessage"}):r.GK.supportsFeature(r.GK.F.MD_BACKEND)&&t.pendingInitialLoading?(0,u.jsx)(i.EmojiText,{className:n.default.loadingIndicate,direction:"inherit",titlify:!0,ellipsify:!0,text:o.default.t(732)}):null};t.default=e=>{let{chat:t}=e;return(0,u.jsx)(c,{chat:t,presence:t.presence,chatstate:t.presence.chatstate})}},2732:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.Contact=function(e){const t=(0,x.useModelValues)(e.contact,["id","pendingAction","notifyName","name","showBusinessCheckmarkAsPrimary","isGroup"]),{searchQuery:a,frequent:s}=e,w=(0,l.useRef)(null),k=(0,l.useRef)(null),j=(0,E.default)(),[N,O]=(0,l.useState)(!1),[R,D]=(0,l.useState)(""),L=!!e.active&&(e.active.value instanceof c.default&&t.isProxyOf(e.active.value));N!==L&&O(L);R!==(a?a.trimmed:"")&&D(a?a.trimmed:"");(0,T.useListener)(a,C.SEARCH_EVENT,(()=>{a?D(a.trimmed):__LOG__(3)`Contact: prop searchQuery is undefined`}));const B=(s?I:"")+t.id.toString();(0,T.useListener)(e.active,B,((e,t)=>{if("focus"===e){const e=k.current;e&&(r.default.focus(e),t&&(0,p.scrollIntoViewIfNeeded)(e))}O(!!e)}));const{listenForAdminChange:F,participantCollection:G}=e;(0,T.useListener)(F&&G?G:null,["change:isAdmin","change:isSuperAdmin"],(e=>{M.default.equals(e.id,t.id)&&j()}));const U=t=>{t.stopPropagation();const a=e.onDelete;a&&a(t,(0,S.unproxy)(e.contact))},V=a=>{const{onClick:s}=e;s&&s(a,(0,S.unproxy)(t))},H=e=>{e.preventDefault(),e.stopPropagation(),V(e)},{secondary:K,onDelete:q,contextEnabled:W,contextMenu:Y,admin:z,showNotifyName:Q,waitIdle:$,theme:X,useShortName:J,detail:Z,isPendingParticipant:ee,ephemeralIcon:te}=e,ae=(0,o.default)({[h.default.contactSmall]:e.type===A.SMALL});let se,ne,ie;!t.name&&Q&&t.notifyName&&(ie=(0,P.jsx)("span",{className:h.default.screenName,children:(0,P.jsx)(m.EmojiText,{direction:"auto",text:t.notifyName})}));(z||F&&G&&G.assertGet(t.id).isAdmin)&&(ne=(0,P.jsx)("div",{className:h.default.markerAdmin,children:g.default.t(1626)}));ee&&(ne=(0,P.jsx)("div",{className:h.default.markerInvited,children:g.default.t(589)}));if(null!=Z)se=Z;else if(q){const t=e.type===A.SMALL?"x-alt-small":"x-alt";se=(0,P.jsx)("div",{"data-a8n":i.default.key("chat-controls"),className:h.default.chatControls,role:"button",onClick:U,children:(0,P.jsx)(b.default,{name:t})})}let re=K;null==re&&(re=(0,P.jsx)(y.default,{id:t.id,waitIdle:$}));let oe=e.type===A.SMALL?26:void 0;"new-chat-info"===X&&(oe=40);const le=e.mouseDownAsClick;let de;if(t.isGroup){const e=(0,n.default)(u.ChatCollection.get(t.id.toString()),"ChatCollection.get(contact.id.toString())");de=(0,P.jsx)(v.Name,{chat:e,useShortName:J,highlightText:R,showBusinessCheckmark:t.showBusinessCheckmarkAsPrimary,showLabel:!0,titlify:!0,ellipsify:!0})}else de=(0,P.jsx)(v.Name,{contact:t,useShortName:J,highlightText:R,showBusinessCheckmark:t.showBusinessCheckmarkAsPrimary,showLabel:!0,titlify:!0,ellipsify:!0,you:!0});const ue="list-names"!==X||q?X:"list-names-no-delete";return(0,P.jsx)(_.HotKeys,{onRef:e=>{k.current=e},handlers:{enter:H,space:H},onFocus:e=>{var t;e.stopPropagation(),e.preventDefault(),null===(t=w.current)||void 0===t||t.indicateFocus()},className:ae,children:(0,P.jsx)(d.default,{ref:w,theme:ue,active:N,contextEnabled:W||(()=>!1),contextMenu:Y,pendingAction:t.pendingAction,detail:se,image:(0,P.jsx)(f.DetailImage,{id:t.id,size:oe,ephemeralIcon:te,waitIdle:$}),primary:de,primaryDetail:ne,secondary:re,secondaryDetail:ie,onClick:le?null:V,onMouseDown:le?e=>{0===e.button&&V(e)}:null,onContext:a=>{var s;null===(s=e.onContext)||void 0===s||s.call(e,a,t)}})})},t.Type=t.FREQUENT_PREFIX=void 0;var n=s(a(45095)),i=s(a(99964)),r=s(a(52013)),o=s(a(94184)),l=a(67294),d=s(a(49107)),u=a(69951),c=s(a(121)),h=s(a(29713)),f=a(88984),p=a(32303),m=a(65417),_=a(55414),g=s(a(43725)),v=a(12176),C=a(92745),S=a(31019),y=s(a(73561)),b=s(a(23217)),E=s(a(59909)),T=a(19529),x=a(49082),M=s(a(39546)),P=a(85893);const A={SMALL:"SMALL",DEFAULT:"DEFAULT"};t.Type=A;const I="freq_";t.FREQUENT_PREFIX=I},46040:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(94184)),i=s(a(48360)),r=a(67294),o=a(57701),l=s(a(59405)),d=s(a(43725)),u=s(a(65932)),c=s(a(23217)),h=a(97628),f=s(a(72994)),p=s(a(41956)),m=s(a(39546)),_=a(85893);class g extends r.PureComponent{constructor(){super(...arguments),this.state={chatId:null,shouldAnimate:!1}}static getDerivedStateFromProps(e,t){const a=e.chat.id;return{chatId:a,shouldAnimate:m.default.equals(t.chatId,a)}}_showMuteIcon(){const{chat:e,mute:t,hideMuteIcon:a,settings:s}=this.props;return e.archive&&(0,o.archiveV2Supported)()&&s.showArchiveV2?!a:t.isMuted}render(){const{chat:e,unreadCount:t,hideArchivedIcon:a,unreadMentionIcon:s}=this.props,r=this._showMuteIcon()?(0,_.jsx)("div",{className:l.default.icon,"aria-label":i.default._("Muted chat",null,{hk:"FRvtZ"}),children:(0,_.jsx)(c.default,{name:"muted"})},"icon-muted"):null,o=null!=e.pin&&e.pin>0?(0,_.jsx)("div",{className:(0,n.default)(l.default.icon,l.default.iconPinned),children:(0,_.jsx)(c.default,{name:"pinned2"})},"icon-pinned"):null,u=0!==t?(0,_.jsx)("div",{className:l.default.icon,children:(0,_.jsx)(f.default,{count:t})},"icon-unread"):null,h=s?(0,_.jsx)("div",{className:(0,n.default)(l.default.icon,l.default.iconMentions),"aria-label":i.default._("@ message",null,{hk:"2UzXVt"}),children:(0,_.jsx)(c.default,{name:"mentions",className:l.default.iconMentions})},"icon-mentions"):null,m=e.archive&&!a?(0,_.jsx)("span",{className:(0,n.default)(l.default.icon,l.default.archived),children:d.default.t(293)},"icon-archived"):null;return(0,_.jsxs)(p.default,{transitionName:"pop",transitionEnter:this.state.shouldAnimate,transitionLeave:this.state.shouldAnimate,children:[r,m,o,h,u]})}}g.CONCERNS={chat:["id","archive","pin"],mute:["isMuted"],settings:["showArchiveV2"]},g.contextType=h.ThemeContext,g.displayName="Icons";var v=(0,u.default)(g,g.CONCERNS);t.default=v},3982:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,x.useModelValues)(e.msg,["ack","asBroadcastNotification","asGroupNotification","asProduct","asRevoked","dir","isGroupMsg","isNotification","isSentByMe","itemCount","rtl","senderObj","type","mediaData","message","isVcardOverMmsDocument","size","mdDowngrade"]),{searchQuery:a=[],msgType:s,author:P}=e,A=(0,E.default)();(0,T.useListener)(c.GK,c.GK.FEATURE_CHANGE_EVENT,A),t.type===o.default.MSG_TYPE.DOCUMENT&&t.isVcardOverMmsDocument&&(!t.mediaData||!t.mediaData.mediaBlob)&&t.isTrusted()&&t.unsafe().size<=1024*y.ServerProps.mmsVcardAutodownloadSizeKb&&t.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:_.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1});(0,T.useListener)(t.type===o.default.MSG_TYPE.DOCUMENT&&t.mediaData&&t.isVcardOverMmsDocument?t.mediaData:null,"change:parsedVcards",A),(0,T.useListener)(t.type===o.default.MSG_TYPE.REVOKED?l.ContactCollection:null,["add","remove","change:name"],A);const I=[];c.GK.supportsFeature(c.GK.F.MD_BACKEND)?!t.isSentByMe||t.asRevoked||t.mdDowngrade||I.push((0,M.jsx)(g.default,{msg:t.unsafe()},"symbol")):t.isSentByMe&&!t.asRevoked&&I.push((0,M.jsx)(g.default,{msg:t.unsafe()},"symbol"));const w="Search"!==s&&!t.isSentByMe&&t.isGroupMsg&&!t.isNotification,k=P&&"Search"===s;(w||k)&&(w?I.push((0,M.jsx)(C.Name,{contact:t.senderObj,useShortName:!0},"author")):k&&I.push((0,M.jsx)(d.EmojiText,{text:P,direction:"auto"},"author")),I.push((0,M.jsxs)("span",{children:[":",""]},"divider")));t.hasSymbol()&&I.push((0,M.jsx)(v.default,{msg:t.unsafe()},"msg-symbol"));"order"===t.type&&null!=t.itemCount&&I.push((0,M.jsxs)("div",{children:[p.default.t(679,{count:t.itemCount||0,_plural:t.itemCount||0}),t.message?(0,M.jsxs)("span",{children:[":",""]},"item-divider"):null]},"item-count"));if(null!=t.asGroupNotification)I.push((0,M.jsx)(h.default,{msg:t.asGroupNotification,clickable:!1},"status"));else if(null!=t.asBroadcastNotification)I.push((0,M.jsx)(r.default,{msg:t.asBroadcastNotification,clickable:!1},"broadcast_notification"));else{let e=t.asRevoked;c.GK.supportsFeature(c.GK.F.MD_BACKEND)&&(e=e||t.mdDowngrade);const n=(0,i.default)({[m.default.product]:null!=t.asProduct,[m.default.italic]:e});I.push((0,M.jsx)(d.EmojiText,{className:n,direction:t.dir,text:(0,S.default)((0,u.default)((0,b.unproxy)(t.unsafe()),{stripFormatting:!1,formatAsLastMsg:!0,formatAsSearchResult:"Search"===s}).toString()||"",!0),dirMismatch:t.rtl!==p.default.isRTL(),formatters:f.Configuration[s]({mentions:t.mentionMap(),terms:a}),ellipsify:!0,inlineblock:!0},"status"))}const j=p.default.embedDir((0,u.default)((0,b.unproxy)(t.unsafe()),{stripFormatting:!1,formatAsSearchResult:"Search"===s}).toString()||"",t.rtl);return(0,M.jsx)("span",{className:m.default.last,title:j,"data-a8n":n.default.key("last-msg-status"),children:I})};var n=s(a(99964)),i=s(a(94184)),r=s(a(27295)),o=s(a(69618)),l=a(19380),d=a(65417),u=s(a(89422)),c=a(7293),h=s(a(48089)),f=a(5124),p=s(a(43725)),m=s(a(23771)),_=s(a(11339)),g=s(a(93477)),v=s(a(32281)),C=a(12176),S=s(a(39680)),y=a(64551),b=a(31019),E=s(a(59909)),T=a(19529),x=a(49082),M=a(85893)},90463:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(45120)),i=s(a(52013)),r=a(67294),o=s(a(49107)),l=a(32303),d=a(55414),u=s(a(3982)),c=a(84387),h=a(17304),f=a(59871),p=a(12176),m=a(92745),_=s(a(65932)),g=a(31019),v=s(a(55364)),C=a(31515),S=a(85893);class y extends r.PureComponent{constructor(){super(...arguments),this.state={searchText:"",active:!1},this._refCell=(0,r.createRef)(),this._handleSearch=()=>{this.setState({searchText:this.props.searchQuery.trimmed})},this._handleActiveChange=e=>{if("focus"===e){var t;const e=null===(t=this._refCell.current)||void 0===t?void 0:t.getCellFrameDivRef();e&&(i.default.focus(e),(0,l.scrollIntoViewIfNeeded)(e))}this.setState({active:!!e})},this._handleClick=e=>{const t=this.props.onClick;if((0,C.isFunction)(t)){const{msg:a,chat:s}=this.props,n=f.MsgCollection.assertGet(a.id),i=s.getSearchContext(n);i.msg=n,t(e,(0,g.unproxy)(s),i)}},this._handleMouseDown=e=>{0===e.button&&this._handleClick(e)},this._handleEnter=e=>{e.preventDefault(),e.stopPropagation(),n.default.shouldIndicateFocus(),this._handleClick(e)},this.indicateFocus=e=>{var t;e.stopPropagation(),e.preventDefault(),null===(t=this._refCell.current)||void 0===t||t.indicateFocus()}}static getDerivedStateFromProps(e){const{active:t,msg:a,searchQuery:s}=e,n=t&&t.value instanceof h.Msg&&t.value.id.equals(a.id);return{searchText:s.trimmed,active:n}}componentDidMount(){this.initListeners(this.props)}componentDidUpdate(e){this.initListeners(this.props,e)}initListeners(e,t){const{listeners:a,active:s,msg:n,searchQuery:i}=e;(null==t?void 0:t.searchQuery)&&t.searchQuery!==i&&a.remove(i,m.SEARCH_EVENT,this._handleSearch),!i||t&&i===t.searchQuery||a.add(i,m.SEARCH_EVENT,this._handleSearch);const r=t?t.msg.id:null;r&&!n.id.equals(r)&&((null==t?void 0:t.active)&&a.remove(t.active,t.msg.id.toString(),this._handleActiveChange),s&&a.add(s,n.id.toString(),this._handleActiveChange))}render(){const{msg:e,chat:t,searchQuery:a,filterPreset:s}=this.props,{active:n}=this.state,i=(0,S.jsx)(v.default,{msg:e}),r=(0,S.jsx)(u.default,{msg:e.safe(),msgType:"FTSMessage",searchQuery:a.highlighted}),l={enter:this._handleEnter};return(0,S.jsx)(d.HotKeys,{handlers:l,onFocus:this.indicateFocus,children:(0,S.jsx)(o.default,{ref:this._refCell,contextEnabled:()=>!1,theme:"chat-checkbox"===this.props.theme?"cell-message-checkbox":"cell-message",active:!!n,primary:(0,S.jsx)(p.Name,{chat:t,labels:e.labels,firstLabel:null==s?void 0:s.label,showLabel:!0,titlify:!0,ellipsify:!0}),primaryDetail:i,secondary:r,onClick:this._handleClick})})}}y.CONCERNS={msg:["id","isSentByMe","isGroupMsg","isNotification","senderObj","dir","rtl","type","labels"],chat:["id","isUser","contact","formattedTitle","groupMetadata"]},y.displayName="Message";var b=(0,c.ListenerHOC)((0,_.default)(y,y.CONCERNS));t.default=b},93477:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,l.useModelValues)(e.msg,["ack"]).ack;let a,s;t<i.default.ACK.SENT?a="status-time":t===i.default.ACK.SENT?a="status-check":t===i.default.ACK.RECEIVED?a="status-dblcheck":(a="status-dblcheck",s=r.default.ackBlue);return(0,d.jsx)("div",{className:(0,n.default)(r.default.ack,s),children:(0,d.jsx)(o.default,{name:a})})};var n=s(a(94184)),i=s(a(69618)),r=s(a(34769)),o=s(a(23217)),l=a(49082),d=a(85893)},32281:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(94184)),i=a(67294),r=s(a(69618)),o=a(7293),l=s(a(84064)),d=a(84387),u=s(a(44597)),c=s(a(5165)),h=s(a(43309)),f=a(64658),p=s(a(65932)),m=s(a(23217)),_=a(84728),g=a(85893);class v extends i.PureComponent{constructor(){super(...arguments),this.state={parsedVcards:null},this.updateAfterFeatureFlagChange=()=>{this.forceUpdate()}}static getDerivedStateFromProps(e,t){var a;const s=e.msg;var n;return(null===(a=s.mediaData)||void 0===a?void 0:a.parsedVcards)!==t.parsedVcards?{parsedVcards:null===(n=s.mediaData)||void 0===n?void 0:n.parsedVcards}:null}componentDidMount(){const{listeners:e}=this.props;e.add(o.GK,o.GK.FEATURE_CHANGE_EVENT,this.updateAfterFeatureFlagChange)}render(){const{msg:e}=this.props,t=function(e,t){switch(e.type){case r.default.MSG_TYPE.IMAGE:case r.default.MSG_TYPE.VIDEO:return e.isViewOnce?!0!==t.viewOnceStatic&&(0,_.isViewed)(e.safe())?"view-once-viewed":"view-once":e.isGif?"status-gif":e.type===r.default.MSG_TYPE.VIDEO?"status-video":"status-image";case r.default.MSG_TYPE.AUDIO:return e.isGif?"status-gif":"status-audio";case r.default.MSG_TYPE.VCARD:case r.default.MSG_TYPE.MULTI_VCARD:return e.isGif?"status-gif":"status-vcard";case r.default.MSG_TYPE.DOCUMENT:return e.isGif?"status-gif":t.parsedVcards?"status-vcard":"status-document";case r.default.MSG_TYPE.CIPHERTEXT:return e.isGif?"status-gif":"status-ciphertext";case r.default.MSG_TYPE.UNKNOWN:return e.isGif?"status-gif":"status-unknown";case r.default.MSG_TYPE.PRODUCT:return"business-description";case r.default.MSG_TYPE.STICKER:return"status-sticker";case r.default.MSG_TYPE.CALL_LOG:switch(e.subtype){case"miss_video":case"miss_group_video":return"status-miss_video"}return"status-miss";case r.default.MSG_TYPE.PTT:return"status-ptt";case r.default.MSG_TYPE.REVOKED:return"recalled";case r.default.MSG_TYPE.LOCATION:return e.isLive?(0,f.liveLocationIcon)(!1):"status-location";case r.default.MSG_TYPE.GROUPS_V4_INVITE:return o.GK.supportsFeature(o.GK.F.GROUPS_V_4_JOIN_PERMISSION)?"group":"status-unknown";case r.default.MSG_TYPE.PAYMENT:return"status-unknown";case r.default.MSG_TYPE.ORDER:return"shopping-cart";case r.default.MSG_TYPE.INTERACTIVE:return e.interactiveType===l.default.SHOPS_STOREFRONT?"shop-filled":e.interactiveType===l.default.NATIVE_FLOW&&e.nativeFlowName===c.default.ORDER_DETAILS?"receipt":"status-unknown"}return __LOG__(2)`chat:getClasses Invalid msg type:"${e.type}"`,"status-unknown"}(e,{parsedVcards:this.state.parsedVcards,viewOnceStatic:this.props.viewOnceStatic}),a=(0,n.default)(u.default.symbol,t,{[u.default.margin]:!e.asRevoked,[u.default.miss]:e.type===r.default.MSG_TYPE.CALL_LOG,[u.default.pttBlue]:e.type===r.default.MSG_TYPE.PTT&&e.ack===r.default.ACK.PLAYED,[u.default.pttGreen]:e.type===r.default.MSG_TYPE.PTT&&e.ack!==r.default.ACK.PLAYED&&!e.isSentByMe});return(0,g.jsx)("div",{className:a,children:e.type===r.default.MSG_TYPE.PAYMENT?S(e):(0,g.jsx)(m.default,{name:t})})}}v.CONCERNS={msg:["ack","isGif","isLive","isViewOnce","type","subtype","asRevoked","isSentByMe","paymentCurrency","paymentAmount1000","paymentStatus","paymentTxnStatus","mediaData","interactiveType","nativeFlowName"]},v.displayName="MsgSymbol";var C=(0,d.ListenerHOC)((0,p.default)(v,v.CONCERNS));function S(e){if("invite"===e.subtype)return null;return e.paymentAmount1000&&e.paymentCurrency?(0,g.jsx)(h.default,{currency:e.paymentCurrency,subtype:e.subtype,paymentStatus:e.paymentStatus,paymentTxnStatus:e.paymentTxnStatus,isCompact:!0}):(0,g.jsx)(m.default,{name:"status-unknown"})}t.default=C},73561:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{id:t}=e,[a,s]=(0,n.useState)((()=>c.StatusCollection.get(t))),r=(0,f.default)(t);if((0,n.useEffect)((()=>{if(!a){const e=i.ContactCollection.gadd(t);s(e.getStatus())}}),[]),(0,n.useEffect)((()=>{if(!p.default.equals(t,r)){const e=i.ContactCollection.gadd(t);s(e.getStatus())}}),[t,r]),!a)return _;return(0,m.jsx)(g,{status:a,waitIdle:e.waitIdle})};var n=a(67294),i=a(19380),r=a(65417),o=s(a(76239)),l=s(a(43725)),d=a(31019),u=s(a(49072)),c=a(46133),h=a(49082),f=s(a(41502)),p=s(a(39546)),m=a(85893);const _=(0,m.jsx)("span",{className:u.default.statusLoading,children:l.default.t(377)});const g=function(e){const t=(0,h.useModelValues)(e.status,["id","stale","status"],{isStrong:!1}),a=(0,m.jsx)(r.EmojiText,{direction:"auto",selectable:!0,titlify:!0,text:t.status,breakWord:!0}),s=(0,d.unproxy)(t).stale?_:a;return(0,m.jsx)(o.default,{id:t.id,onComplex:()=>(c.StatusCollection.find(t.id),void 0!==t.status?a:_),waitIdle:e.waitIdle,children:s})}},55364:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(30381)),i=a(67294),r=a(22683),o=a(88102),l=a(7293),d=s(a(59909)),u=a(19529),c=a(49082),h=a(85893);function f(e){const{t}=e,a=(0,d.default)(),s=(0,c.useModelValues)(e.msg,["t"]);(0,u.useListener)(r.Clock,r.HOUR24_FORMAT_CHANGE_EVENT,a);const f=(0,i.useCallback)((()=>l.GK.supportsFeature(l.GK.F.MD_BACKEND)&&null!=t?t:s.t),[s.t,t]),p=(0,i.useMemo)((()=>{const e=(0,n.default)().startOf("day").subtract(7,"day");return f()>=e.unix()}),[f]);return(0,u.useListener)(p?o.Cmd:null,"midnight",a),(0,h.jsx)(h.Fragment,{children:r.Clock.relativeStr(f())})}const p=function(e){const t=(0,c.useModelValues)(e.chat,["previewMessage","t"]);return t.previewMessage?(0,h.jsx)(f,{msg:t.previewMessage,t:t.t}):null},m=f;t.default=e=>{let{chat:t,msg:a}=e;return t?(0,h.jsx)(p,{chat:t}):a?(0,h.jsx)(m,{msg:a}):null}},14421:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{disabled:t,customSecondaryText:a,active:s,allowBlockedContacts:p,ephemeralIcon:m,onSelect:_}=e,[g,v]=(0,i.useState)(null),C=(0,h.useModelValues)(e.contact,["id","isGroup","isContactBlocked","pendingAction","shortName","name"]),S=()=>{v(null)},y=()=>{S(),C.addPendingAction((0,r.unblockContact)(C)).then((()=>_())).catch((()=>{}))};let b;g&&(b=(0,f.jsx)(u.UIE,{displayName:"ChatContextMenu",escapable:!0,popable:!0,children:(0,f.jsx)(c.default,{contextMenu:g})}));return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(o.Contact,{theme:t||C.isContactBlocked&&!p?"chat-checkbox-no-delete":"chat-checkbox",active:s,contact:C,onClick:t?null:e=>{t||(p?_():g?S():C.isContactBlocked?(e=>{const t=[(0,f.jsx)(l.DropdownItem,{a8n:"unblock-contact-in-multi-select",action:y,children:d.default.t(367,{contact:C.shortName||C.name})},"unblock")];v({contactId:C.id.toString(),menu:t,anchor:e.anchor,event:e.event})})({event:e}):_())},secondary:C.isContactBlocked&&!p?n.default._("Blocked. Click to unblock",null,{hk:"1eYigB"}):a||null,waitIdle:!0,ephemeralIcon:m}),b]})};var n=s(a(48360)),i=a(67294),r=a(80140),o=a(2732),l=a(71174),d=s(a(43725)),u=a(18644),c=s(a(24717)),h=a(49082),f=a(85893)},72994:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{count:t,transparentBg:a,ariaLabel:s}=e,d="";t>0&&(d=i.default.t(1370,{count:i.default.n(t),_plural:t}));s&&(d=s);return(0,o.jsx)("span",{className:(0,n.default)(l.count,r.isOSMac&&l.countMac,a&&l.transparentBg),"aria-label":d,children:t>0?i.default.n(t):null})};var n=s(a(56720)),i=s(a(43725)),r=a(12209),o=a(85893);const l={count:{display:"l7jjieqr",minWidth:"cfzgl7ar",minHeight:"ei5e7seu",paddingTop:"h0viaqh7",paddingEnd:"tpmajp1w",paddingBottom:"c0uhu3dl",paddingStart:"riy2oczp",fontSize:"dsh4tgtl",fontWeight:"sy6s5v3r",lineHeight:"gz7w46tb",color:"lyutrhe2",textAlign:"qfejxiq4",verticalAlign:"fewfhwl7",backgroundColor:"ovhn1urg",borderTopStartRadius:"ap18qm3b",borderTopEndRadius:"ikwl5qvt",borderBottomEndRadius:"j90th5db",borderBottomStartRadius:"aumms1qt"},countMac:{minWidth:"il1gyv3w",paddingTop:"h0viaqh7",paddingEnd:"tpmajp1w",paddingBottom:"k07a8sro",paddingStart:"riy2oczp",fontWeight:"hnx8ox4h"},transparentBg:{color:"io08vzmp",backgroundColor:"thr4l2wc"}}},80891:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(45095)),i=a(67294),r=s(a(14075)),o=a(30087),l=a(63183),d=s(a(60235)),u=a(88102),c=a(19380),h=a(63463),f=s(a(43250)),p=s(a(30305)),m=a(64326),_=s(a(3222)),g=a(23831),v=s(a(43725)),C=a(84387),S=a(74429),y=s(a(20668)),b=a(11603),E=a(28629),T=s(a(11339)),x=a(59871),M=s(a(98248)),P=s(a(84091)),A=a(76626),I=a(8080),w=a(50452),k=a(49376),j=a(84356),N=a(85893);class O extends i.Component{constructor(){super(...arguments),this._handleChatInfoDrawer=(e,t,a)=>{u.Cmd.openDrawerRight((0,N.jsx)(g.InfoFlowLoadable,{chat:e,showFullGroupDescription:t,scrollToParticipantList:a,profileEntryPoint:T.default.PROFILE_ENTRY_POINT.CHAT_MENU},`info-${e.id.toString()}`),"slide-left",this.props.uim)},this._handleLiveLocationDrawer=(e,t)=>{var a;(null===(a=e.liveLocation)||void 0===a?void 0:a.active)||u.Cmd.openDrawerRight((0,N.jsx)(S.LiveLocationDrawerLoadable,{chat:e,openFrom:t,isFirstLevel:!0}),"slide-left",this.props.uim)},this._handleExpiredLocationDrawer=e=>{u.Cmd.openDrawerRight((0,N.jsx)(S.ExpiredLocationDrawerLoadable,{msg:e}),"slide-left",this.props.uim)},this._handleVerificationDrawer=e=>{u.Cmd.openDrawerRight((0,N.jsx)(k.VerificationDrawerLoadable,{contact:c.ContactCollection.assertGet(e),isFirstLevel:!0}),"slide-left",this.props.uim)},this._handleMsgInfoDrawer=e=>{I.Stream.displayInfo===I.StreamInfo.NORMAL?e.chat.kind===l.CHAT_KIND.CHAT?u.Cmd.openDrawerRight((0,N.jsx)(h.ContactMsgInfoFlowLoadable,{msg:e}),"slide-left",this.props.uim):u.Cmd.openDrawerRight((0,N.jsx)(m.GroupMsgInfoFlowLoadable,{msg:e}),"slide-left",this.props.uim):u.Cmd.openToast((0,N.jsx)(w.Toast,{msg:v.default.t(865),id:(0,w.genId)("msg_info_failed")}))},this._handleAttachMediaDrawer=e=>{let{chat:t,attachments:a,animationName:s,initCaption:i,onComplete:l,fileOrigin:d,sendAsSticker:c}=e;const h=()=>{const e=t.attachMediaContents;e&&a&&(d?e.processAttachments(a,d):(__LOG__(3)`ChatActionListener:onAttachMediaDrawer fileOrigin is not specified, fallback to default`,e.processAttachments(a,T.default.MEDIA_PICKER_ORIGIN_TYPE.CHAT_PHOTO_LIBRARY)))};u.Cmd.existsDrawerMid((e=>{if(e)return void h();t.attachMediaContents||t.setAttachMediaContents(new r.default({chatParticipantCount:t.getParticipantCount()}));const a=(0,n.default)(t.attachMediaContents,"chat.attachMediaContents");u.Cmd.openDrawerMid((0,N.jsx)(o.AttachMediaFlowLoadable,{chat:t,onComplete:l,initCaption:i,mediaCollection:a,sendAsSticker:c}),s||"slide-up",this.props.uim,{noFocus:!0,onEnterAnimationComplete:h})}))},this.handleChatSearch=e=>{u.Cmd.openDrawerRight((0,N.jsx)(d.default,{chat:e}),"slide-left",this.props.uim)},this._handleMediaViewer=e=>{const{msg:t,getZoomNode:a,currentTime:s,highlightedMsgIds:n}=e;x.MsgCollection.get(t.id)?u.Cmd.openModalMedia((0,N.jsx)(b.MediaViewerFlowLoadable,{msg:t,startTime:s,getZoomNode:a,highlightedMsgIds:n}),{transition:"media-viewer",uim:this.props.uim}):u.Cmd.openModal((0,N.jsx)(y.default,{msg:t}))},this._handleDDMSettingsClick=e=>{u.Cmd.openDrawerRight((0,N.jsx)(f.default,{onClose:()=>u.Cmd.closeDrawerRight(),entryPoint:e}),"slide-left",this.props.uim)},this._handleEphemeralDrawer=(e,t,a)=>{const s=e.isGroup?T.default.DISAPPEARING_MODE_ENTRY_POINT_TYPE.GROUP_CHAT_DISAPPEARING_MESSAGES_SETTING:T.default.DISAPPEARING_MODE_ENTRY_POINT_TYPE.INDIVIDUAL_CHAT_DISAPPEARING_MESSAGES_SETTING;u.Cmd.openDrawerRight((0,N.jsx)(p.default,{chat:e,showNux:t,entryPoint:a,onDDMSettingsClick:()=>this._handleDDMSettingsClick(s)}),"slide-left",this.props.uim)},this._handleVoipStartGroupCall=(e,t)=>{var a,s;const n=(null!==(a=null===(s=e.groupMetadata)||void 0===s?void 0:s.participants)&&void 0!==a?a:[]).map((e=>e.contact.id)),i=(0,N.jsx)(P.default,{isVideo:t,groupParticipants:n,onStartGroupCall:e=>j.Voip.groupCallStart(e,t)});u.Cmd.openModal(i,{transition:"modal-flow"})},this._handleMerchantDetailsDrawer=e=>{u.Cmd.openDrawerRight((0,N.jsx)(E.MerchantDetailsFlowLoadable,{contactId:e},"legal-entity-details"),"slide-left",this.props.uim)},this._handleOpenStickerPack=e=>{u.Cmd.openDrawerRight((0,N.jsx)(A.StickerStoreFlowLoadable,{stickerPackId:e,onSticker:M.default}),"slide-left",this.props.uim)}}componentDidMount(){const{listeners:e}=this.props;e.add(u.Cmd,"chat_info_drawer",this._handleChatInfoDrawer),e.add(u.Cmd,"msg_info_drawer",this._handleMsgInfoDrawer),e.add(u.Cmd,"chat_search",this.handleChatSearch),e.add(u.Cmd,"attach_media_drawer",this._handleAttachMediaDrawer),e.add(u.Cmd,"verification_drawer",this._handleVerificationDrawer),e.add(u.Cmd,"live_location_drawer",this._handleLiveLocationDrawer),e.add(u.Cmd,"media_viewer_modal",this._handleMediaViewer),e.add(u.Cmd,"expired_location_drawer",this._handleExpiredLocationDrawer),e.add(u.Cmd,"ephemeral_drawer",this._handleEphemeralDrawer),e.add(u.Cmd,"voip_start_group_call",this._handleVoipStartGroupCall),e.add(u.Cmd,"merchant_details_drawer",this._handleMerchantDetailsDrawer),e.add(u.Cmd,"open_sticker_pack",this._handleOpenStickerPack)}render(){return null}}O.displayName="ChatActionListener";var R=(0,_.default)((0,C.ListenerHOC)(O));t.default=R},57355:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(93386)),i=s(a(91966)),r=s(a(52013)),o=s(a(48360)),l=a(67294),d=a(63183),u=a(65511),c=a(69951),h=s(a(61837)),f=a(88102),p=s(a(69618)),m=(s(a(121)),a(2732)),_=s(a(77365)),g=a(65417),v=a(50101),C=a(47915),S=a(55414),y=a(5124),b=s(a(43725)),E=a(84387),T=s(a(90463)),x=(a(17304),a(72472),s(a(11497))),M=s(a(4478)),P=a(18644),A=a(85893);const I="SEC_CHATS",w="SEC_CONTACTS",k="SEC_GROUPCHATS",j="SEC_STARRED",N="SEC_MSG",O="SEC_MUTED_CHATS",R="ROW_CHATS",D="ROW_CONTACTS",L="ROW_GROUPCHATS",B="ROW_STARRED",F="ROW_MSG";class G extends l.Component{static getDerivedStateFromProps(e){return{ftsStarred:e.ftsResult.filter((e=>{let{star:t}=e;return t})),ftsMessages:e.ftsResult.filter((e=>{let{star:t}=e;return!t}))}}constructor(e){super(e),this._setRefHotKeys=e=>{this._refHotKeys=e},this._handleListPointerEventsOff=()=>{this._listPointerEvents=!1},this._handleListPointerEventsOn=()=>{this._listPointerEvents=!0},this._updateSelected=e=>{this._debouncedOpenSelected.cancel(),this.props.selection.setVal(e,!1),this._oldSelection=e},this._handleContactClick=(e,t)=>{this.props.onItemSelected("contact"),this._handleClick(e,t.id)},this._handleChatClick=(e,t)=>{t.isBroadcast?this.props.onItemSelected("broadcast_list"):t.isGroup?this.props.onItemSelected("group"):this.props.onItemSelected("chat"),this._handleClick(e,t.id)},this._handleMessageClick=(e,t,a)=>{this.props.onItemSelected("message"),this._handleClick(e,t.id,a)},this._handleClick=(e,t,a)=>{e.preventDefault(),e.stopPropagation(),(0,v.findChat)(t).then((e=>{a?f.Cmd.openChatAt(e,a).then((t=>{t&&f.Cmd.focusChatTextInput(e)})):e!==c.ChatCollection.getActive()?f.Cmd.openChatFromUnread(e).then((t=>{t&&f.Cmd.focusChatTextInput(e)})):f.Cmd.focusChatTextInput(e)}))},this.restoreFocus=()=>{this.props.selection.reset(!0)},this._handleFocusGain=e=>{if(e.target===this._refHotKeys&&this._listPointerEvents)if(this.props.selection.index<0)this.focusFirst();else{const{uie:e}=this;e&&e.activate(),this.props.selection.reset(!0)}},this._handleCloseChat=e=>{e===this.props.selection.getVal()&&this.props.selection.unset()},this._handleFocusSearch=e=>{e.stopPropagation(),e.preventDefault(),this.props.onFocusSearch()},this.setRefUIE=e=>{this.uie=e},this._handleFocusList=()=>{this.refList&&this._refHotKeys&&r.default.focus(this._refHotKeys)},this.requestFocus=()=>{this.props.selection.reset(!1),this.props.selection.index>-1&&document.activeElement===document.body&&this._handleFocusList()},this.setRefList=e=>{this.refList=e},this._handleMultiSelect=(e,t,a)=>{const{multiSelection:s}=this.props;s&&s.setVal(e,t,a)},this._renderWrappedItem=(e,t)=>{const{multiSelection:a,selectableState:s}=this.props;return a&&s?(0,A.jsx)(h.default,{model:t,theme:"chat-checkbox",selectableState:s,multiSelection:a,onSelect:this._handleMultiSelect,children:e}):e},this.renderItem=e=>{const{searchQuery:t,filterPreset:a}=this.props;switch(e.type){case I:return(0,A.jsx)(x.default,{header:b.default.t(1584)});case w:return(0,A.jsx)(x.default,{header:b.default.t(1592)});case k:return(0,A.jsx)(x.default,{header:b.default.t(1708)});case j:return(0,A.jsx)(x.default,{header:b.default.t(1848)});case N:return(0,A.jsx)(x.default,{header:b.default.t(1753)});case R:const{data:s}=e;return this._renderWrappedItem((0,A.jsx)(u.Chat,{chat:s,contact:s.contact,mode:u.Mode.LAST,searchQuery:t,filterPreset:a,onClick:this._handleChatClick,mouseDownAsClick:!0,selectableState:this.props.selectableState,multiSelection:this.props.multiSelection,active:this.props.selection,ephemeralIcon:"chat-list"}),s);case D:const{data:n}=e;return this._renderWrappedItem((0,A.jsx)(m.Contact,{contact:n,active:this.props.selection,searchQuery:t,onClick:this._handleContactClick,mouseDownAsClick:!0,waitIdle:!0}),n);case L:const{data:i}=e,r=i[0],o=this._getGroupChatSubtitle(i);return this._renderWrappedItem((0,A.jsx)(u.Chat,{chat:r,contact:r.contact,secondary:o,mode:u.Mode.LAST,searchQuery:t,filterPreset:a,onClick:this._handleChatClick,mouseDownAsClick:!0,selectableState:this.props.selectableState,multiSelection:this.props.multiSelection,active:this.props.selection}),r);case B:const{data:l}=e;return this._renderWrappedItem((0,A.jsx)(T.default,{msg:l,chat:l.chat,searchQuery:t,filterPreset:a,onClick:this._handleMessageClick,active:this.props.selection}),l);case F:const{data:d}=e;return this._renderWrappedItem((0,A.jsx)(T.default,{msg:d,chat:d.chat,searchQuery:t,filterPreset:a,onClick:this._handleMessageClick,active:this.props.selection}),d);default:throw new C.UnknownDataError(e)}},this._listPointerEvents=!0,this._oldSelection=null,this._debouncedOpenSelected=this.props.debounce((()=>{this._openSelected(this._focusComposer),this._focusComposer=!1}),200),this.state={textsize:_.default.get().textsize,ftsStarred:[],ftsMessages:[],mutedChats:[],collapseMutedChatsEnabled:!1,mutedChatsCollapsed:!0}}componentWillUnmount(){const e=this.getSelection(),t=this.props.selection.getVal();!(null==t?void 0:t.isState)||this.props.isSearching||e.length||f.Cmd.closeChat(t)}componentDidMount(){this.props.selection.init(this.getSelection()),this.props.listeners.add(f.Cmd,"focus_chat_list",this.restoreFocus),this.props.listeners.add(f.Cmd,"focus_next_chat",(e=>{this._handleNextChat(null,!0,e)})),this.props.listeners.add(f.Cmd,"focus_prev_chat",(e=>{this._handlePrevChat(null,!0,e)})),this.props.listeners.add(f.Cmd,"update_chatlist_selection",this._updateSelected),this.props.listeners.add(f.Cmd,"close_chat",this._handleCloseChat),this.props.listeners.add(f.Cmd,"textsize_change",(e=>{this.setState({textsize:e})}))}componentDidUpdate(e){const t=e.selection.getVal();this.props.selection.init(this.getSelection(),!e.isSearching&&!this.props.isSearching);const a=this.props.selection.getVal();e.isSearching&&!this.props.isSearching&&!a&&this._oldSelection&&this.props.selection.setVal(this._oldSelection),a&&a!==t&&(this._focusComposer=!0,this._debouncedOpenSelected())}_openSelected(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.props.selection.getVal();t&&(t instanceof d.Chat&&t!==c.ChatCollection.getActive()?f.Cmd.openChatFromUnread(t).then((a=>{a&&e&&f.Cmd.focusChatTextInput(t)})):e&&f.Cmd.focusChatTextInput(t))}getSelection(){return[...this.props.chats,...this.props.contacts,...this.props.messages,...this.props.groupChats.map((e=>e[0])),...this.state.ftsStarred,...this.state.ftsMessages]}_scrollListIntoFocusedItem(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;this.refList&&this.refList.scrollIntoViewIfNeeded(this.props.selection.index,e)}focusFirst(){const{uie:e}=this;e&&e.activate(),this.props.selection.setFirst(),this._scrollListIntoFocusedItem(0),this._debouncedOpenSelected()}_handleNextChat(e,t,a){e&&e.preventDefault();const s=this.props.selection.next();this.props.selection.index!==s&&(this.props.selection.setNext(!0),this._focusComposer=a,this._scrollListIntoFocusedItem(),this._debouncedOpenSelected())}_handlePrevChat(e,t,a){e&&e.preventDefault();this.props.selection.prev()>-1?(this.props.selection.setPrev(!0),this._focusComposer=a,this._scrollListIntoFocusedItem(),this._debouncedOpenSelected()):t||(this._debouncedOpenSelected.cancel(),this._openSelected(),this.props.onFocusSearch())}_getHeight(){const{textsize:e}=this.state,t=p.default.LIST_HEIGHT_TEXTSIZE_MAP.find((t=>t.scale===e));return t?t.height:72}getData(){const{chats:e,contacts:t,groupChats:a,isSearching:s,messages:n}=this.props,{ftsStarred:i,ftsMessages:r,mutedChats:o,mutedChatsCollapsed:l,collapseMutedChatsEnabled:d}=this.state,u=[];return s&&e.length>0&&u.push({itemKey:"section-chats",type:I}),!s&&d?(o.length>0&&u.push({itemKey:"section-collapse-muted",contentKey:`${String(l)}-${o.length}`,type:O,height:30}),l||u.push(...o.map((e=>({itemKey:`chat-${e.id.toString()}`,data:e,expanded:!l,type:R})))),u.push(...e.filter((e=>!e.mute.isMuted)).map((e=>({itemKey:`chat-${e.id.toString()}`,data:e,type:R}))))):u.push(...e.map((e=>({itemKey:`chat-${e.id.toString()}`,data:e,type:R})))),s&&t.length>0&&u.push({itemKey:"section-contacts",type:w}),u.push(...t.map((e=>({itemKey:`contact-${e.id.toString()}`,data:e,type:D})))),s&&a.length>0&&u.push({itemKey:"section-groupchats",type:k}),u.push(...a.map((e=>({itemKey:`groupchat-${e[0].id.toString()}-${e[1].map((e=>e.id.toString())).join("-")}`,data:e,type:L})))),s&&i.length>0&&u.push({itemKey:"section-starred",type:j}),u.push(...i.map((e=>({itemKey:`starred-${e.id.toString()}`,data:e,type:B})))),s&&r.length>0&&u.push({itemKey:"section-msg",type:N}),u.push(...r.map((e=>({itemKey:`msg-${e.id.toString()}`,data:e,type:F})))),s&&n.length>0&&u.push({itemKey:"section-msg",type:N}),u.push(...n.map((e=>({itemKey:`msg-${e.id.toString()}`,data:e,type:F})))),u}render(){var e;const{isSearching:t,chats:a}=this.props;let s;return s=t?o.default._("Search results.",null,{hk:"28LBod"}):o.default._("Chat list",null,{hk:"iikD9"}),(0,A.jsx)(P.UIE,{displayName:"Chatlist",ref:this.setRefUIE,uimState:P.UIE.State.PASSIVE,requestFocus:this.requestFocus,children:(0,A.jsx)(S.HotKeys,{handlers:{down:e=>this._handleNextChat(e,!0),j:e=>this._handleNextChat(e,!0),up:e=>this._handlePrevChat(e,!0),k:e=>this._handlePrevChat(e,!0),"/":e=>this._handleFocusSearch(e)},onFocus:this._handleFocusGain,onRef:this._setRefHotKeys,"data-tab":p.default.TAB_ORDERS.CHAT_LIST,children:(0,A.jsx)(C.FlatList,{"aria-label":s,data:this.getData(),renderItem:this.renderItem,flatListController:this.props.flatListController,direction:"vertical",defaultItemHeight:this._getHeight(),onPointerEventsOff:this._handleListPointerEventsOff,onPointerEventsOn:this._handleListPointerEventsOn,ref:this.setRefList,role:"grid","aria-rowcount":null!==(e=null==a?void 0:a.length)&&void 0!==e?e:0})})})}_getGroupChatSubtitle(e){var t;const a=e[1],s=e[0].groupMetadata,r=(null!==(t=null==s?void 0:s.participants)&&void 0!==t?t:[]).map((e=>e.contact)),o=(0,i.default)(r,a),l=(0,n.default)(a,o).map((e=>e.formattedShortNameWithNonBreakingSpaces)).join(b.default.t(420)),d=y.Configuration.Search({terms:[this.props.searchQuery.trimmed]});return(0,A.jsx)(g.EmojiText,{text:l,formatters:d,titlify:!0,direction:"auto"})}}G.defaultProps={chats:[],groupChats:[]},G.displayName="Chatlist";const U=(0,E.ListenerHOC)((0,M.default)(G));t.default=class extends U{focusFirst(){return this.getComponent().focusFirst()}}},48654:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const[e,t]=(0,n.useState)(!0);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i.default,{setShowButterBar:t}),!e&&o.GK.supportsFeature(o.GK.F.MD_BACKEND)&&(0,l.jsx)(r.default,{})]})};var n=a(67294),i=s(a(42126)),r=s(a(67161)),o=a(7293),l=a(85893)},47451:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{settings:t}=e,a=(0,j.default)(),s=(0,O.useModelValues)(e.mute,["isMuted"]),B=(0,r.useRef)(!1),F=(0,r.useRef)(!1),[G,U]=(0,r.useState)(!1),[V,H]=(0,r.useState)(!1),[K]=(0,R.useTimeout)((()=>U(!1)),100);(0,r.useEffect)((()=>{p.Conn.isSMB&&l.BusinessProfileCollection.find((0,g.getMaybeMeUser)()).then((()=>{H(!0)}))}),[]);const q=()=>{F.current=!0};(0,N.useListener)(null,"BrowserWindow:focus",(()=>{})),(0,N.useListener)(null,"BrowserWindow:move",(function(){B.current||q(...arguments)}));const W=(0,r.useMemo)((()=>l.BusinessProfileCollection.get((0,g.getMaybeMeUser)())),[]);(0,N.useListener)(W,"change:profileOptions",a);const Y=()=>{const e=(0,g.getMaybeMeUser)(),t=A.StatusCollection.assertGet(e),a=M.ProfilePicThumbCollection.assertGet(e),s=m.ContactCollection.assertGet(e);f.Cmd.openDrawerLeft((0,L.jsx)(x.ProfileDrawerFlowLoadable,{status:t,profilePicThumb:a,contact:s,conn:p.Conn}))},z=()=>{E.MuteCollection.globalMute().unmute(),f.Cmd.openToast((0,L.jsx)(k.Toast,{msg:S.default.t(510),id:(0,k.genId)()}))},Q=()=>{(0,u.openCatalogManagementFlow)(null,b.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_TOP_BAR)},$=()=>{f.Cmd.openModal((0,L.jsx)(P.default,{}))};let X=null;s.isMuted&&(X=(0,L.jsx)(y.MenuBarItem,{a8nText:"menu-bar-unmute",icon:(0,L.jsx)(w.default,{name:"dnd"}),title:S.default.t(509),onClick:z},"btn-dnd"));let J,Z=(0,L.jsx)("div",{className:c.default.listUser,children:(0,L.jsx)(_.DetailImage,{id:(0,g.getMaybeMeUser)(),size:40,onClick:Y})});if(v.GK.supportsFeature(v.GK.F.MD_BACKEND)){if(V&&!(0,C.blockCatalogCreationECommerceComplianceIndia)(W)&&p.Conn.isSMB&&(0,o.getABPropConfigValue)("web_abprop_catalog_icon_on_top_bar")){let e;const t=(0,C.bannedShopsEnabled)()&&(0,d.isShopBanned)(W);(0,d.hasShop)(W)?t||(e=(0,L.jsx)(y.MenuBarItem,{a8nText:"menu-bar-shops",icon:(0,L.jsx)(w.default,{name:"shop-filled",directional:!0,className:c.default.shopsIcon}),title:S.default.t(1749),onClick:$})):e=(0,L.jsx)(y.MenuBarItem,{a8nText:"menu-bar-catalog",icon:(0,L.jsx)(w.default,{name:"catalog-filled",directional:!0}),title:S.default.t(1744),onClick:Q}),J=(0,L.jsx)("div",{className:c.default.commerceIconContainer,children:e})}const e=(0,o.getABPropConfigValue)("md_migration_experience");if(0===e||1===e){const e=(0,L.jsx)("div",{className:c.default.betaIcon,children:(0,L.jsx)("b",{className:c.default.betaIconText,title:i.default._("You're using the multi-device beta",null,{hk:"2ZPoxx"}),children:i.default._("BETA",null,{hk:"23OBCm"})})});Z=(0,L.jsxs)("div",{className:c.default.listUserBeta,children:[(0,L.jsx)(_.DetailImage,{id:(0,g.getMaybeMeUser)(),size:40,onClick:Y}),e]})}}return(0,L.jsxs)("header",{className:(0,n.default)(c.default.header,{[c.default.withCommerceIcon]:null!=J}),onMouseDown:()=>{},onClickCapture:()=>{},children:[Z,(0,L.jsx)("div",{className:c.default.listControls,children:(0,L.jsx)(y.MenuBar,{children:(0,L.jsxs)(D.default,{transitionName:"btn",children:[X,J,(0,L.jsx)(I.default,{}),(0,L.jsx)(y.MenuBarItem,{a8nText:"menu-bar-chat",icon:(0,L.jsx)(w.default,{name:"chat",directional:!0}),title:S.default.t(1748),onClick:e=>{e.preventDefault(),f.Cmd.openDrawerLeft((0,L.jsx)(T.NewChatFlowLoadable,{}))}}),(0,L.jsx)(y.MenuBarItem,{a8nText:"menu-bar-menu",icon:(0,L.jsx)(w.default,{name:"menu"}),title:S.default.t(822),children:(0,L.jsx)(h.default,{settings:t})})]})},"chatlist-header")})]})};var n=s(a(94184)),i=s(a(48360)),r=a(67294),o=a(86945),l=a(93581),d=a(94010),u=a(87912),c=s(a(78076)),h=s(a(95403)),f=a(88102),p=a(17239),m=a(19380),_=a(88984),g=a(99234),v=a(7293),C=a(57701),S=s(a(43725)),y=a(46346),b=s(a(11339)),E=a(72472),T=a(92507),x=a(77117),M=a(82039),P=s(a(95042)),A=a(46133),I=s(a(36190)),w=s(a(23217)),k=a(50452),j=s(a(59909)),N=a(19529),O=a(49082),R=a(99935),D=s(a(41956)),L=a(85893)},95403:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(673));class i extends n.default{}t.default=i},673:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(48360)),i=a(67294),r=a(78457),o=a(93581),l=a(94010),d=a(87912),u=s(a(70785)),c=a(88102),h=s(a(52665)),f=a(17239),p=s(a(69618)),m=a(19380),_=s(a(50485)),g=a(60811),v=a(71174),C=a(99234),S=a(57701),y=s(a(43725)),b=a(90878),E=a(55631),T=a(93045),x=s(a(11339)),M=a(59871),P=a(23620),A=a(26489),I=s(a(17085)),w=a(77117),k=a(82039),j=a(48870),N=a(27798),O=a(87956),R=a(64551),D=a(45383),L=s(a(95042)),B=a(82364),F=a(19011),G=a(46133),U=a(65044),V=a(85893);class H extends i.Component{getElement(){return this._refDropdown}constructor(){super(...arguments),this.openTime=-1,this.handleCreateGroup=()=>{c.Cmd.openDrawerLeft((0,V.jsx)(A.NewGroupFlowLoadable,{})),(0,u.default)(x.default.WEBC_MENU_ITEM_LABEL.NEW_GROUP)},this._handleCreateCommunity=()=>{c.Cmd.openDrawerLeft((0,V.jsx)(P.NewCommunityFlowLoadable,{}))},this._handleOrders=()=>{c.Cmd.openDrawerLeft((0,V.jsx)(I.default,{}))},this.handleProfile=()=>{const e=(0,C.getMaybeMeUser)(),t=G.StatusCollection.assertGet(e),a=k.ProfilePicThumbCollection.assertGet(e),s=m.ContactCollection.assertGet(e);c.Cmd.openDrawerLeft((0,V.jsx)(w.ProfileDrawerFlowLoadable,{status:t,profilePicThumb:a,contact:s,conn:f.Conn}),void 0,void 0,void 0,O.FocusType.TABBABLE),(0,u.default)(x.default.WEBC_MENU_ITEM_LABEL.PROFILE)},this.handleDisconnect=()=>{const e=M.MsgCollection.some((e=>e.ack===p.default.ACK.CLOCK&&e.local&&e.isSentByMe));if((0,u.default)(x.default.WEBC_MENU_ITEM_LABEL.LOG_OUT),!e)return U.Socket.logout();c.Cmd.openModal((0,V.jsx)(h.default,{title:y.default.t(360),onOK:()=>U.Socket.logout(),okText:y.default.t(808),onCancel:()=>c.Cmd.closeModal(),cancelText:y.default.t(1574),children:y.default.t(1274)}))},this.handleArchived=()=>{c.Cmd.openDrawerLeft((0,V.jsx)(r.ArchivedFlowLoadable,{})),new x.default.ChatFolderOpen({folderType:"Archive"}).commit(),(0,u.default)(x.default.WEBC_MENU_ITEM_LABEL.ARCHIVED)},this.handleSettings=()=>{c.Cmd.openDrawerLeft((0,V.jsx)(D.SettingsFlowLoadable,{})),(0,u.default)(x.default.WEBC_MENU_ITEM_LABEL.SETTINGS)},this.handleStarred=()=>{c.Cmd.openDrawerLeft((0,V.jsx)(B.StarredDrawerLoadable,{starredMsgs:F.AllStarredMsgsCollection})),(0,u.default)(x.default.WEBC_MENU_ITEM_LABEL.STARRED)},this.handleLabel=()=>{c.Cmd.openDrawerLeft((0,V.jsx)(b.LabelFlowLoadable,{})),(0,u.default)(x.default.WEBC_MENU_ITEM_LABEL.LABELS)},this.handleContactUsOpen=()=>{this.openTime=performance.now(),c.Cmd.openModal((0,V.jsx)(_.default,{onCancel:this.handleContactUsCancel,onSend:this.handleContactUsSend}))},this.handleContactUsCancel=()=>{(0,T.logSessionEvent)(x.default.CONTACT_US_EXIT_STATE.PROBLEM_DESCRIPTION,this.openTime)},this.handleContactUsSend=e=>{(0,T.logSessionEvent)(x.default.CONTACT_US_EXIT_STATE.EMAIL_SEND,this.openTime,e)},this.handleCatalog=()=>{if(this.isShopsEnabled()){const e=(0,S.bannedShopsEnabled)()&&(0,l.isShopBanned)(o.BusinessProfileCollection.get((0,C.getMaybeMeUser)()));c.Cmd.openModal((0,V.jsx)(h.default,{title:n.default._("Catalog disabled",null,{hk:"2OkL2n"}),onOK:this.goToCommerceManager,okText:n.default._("Commerce Manager",null,{hk:"2ZKedl"}),onCancel:()=>{c.Cmd.closeModal(),(0,E.logShopsManagementEvent)(x.default.SHOPS_MANAGEMENT_ACTION.ACTION_CLICK_CANCEL_IN_CATALOG_SETTING)},children:e?n.default._("You cant restore your catalog at this time because we have disabled your Facebook shop for not complying with our policies. Learn more in Commerce Manager.",null,{hk:"3VzjUc"}):n.default._("Your catalog is temporarily disabled because WhatsApp is a sales channel for your Facebook shop. To restore your catalog, go to Commerce Manager and set the shops visibility to hidden, or remove WhatsApp from the Business Manager account.",null,{hk:"19F7GK"})})),(0,E.logShopsManagementEvent)(x.default.SHOPS_MANAGEMENT_ACTION.ACTION_CLICK_CATALOG_SETTING)}else(0,S.canManageCollections)()&&j.QPL.markerStart(N.QuickLogMarkerId.WHATSAPP_CATALOG_COLLECTIONS_VIEW,{string:{EntryPoint:"ToolsMenu"}}),(0,d.openCatalogManagementFlow)(null,x.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS),(0,u.default)(x.default.WEBC_MENU_ITEM_LABEL.CATALOG)},this.handleShops=()=>{c.Cmd.openModal((0,V.jsx)(L.default,{onViewShopClick:()=>{(0,E.logShopsManagementEvent)(x.default.SHOPS_MANAGEMENT_ACTION.ACTION_CLICK_VIEW_SHOPS_IN_SHOPS_SETTING)},onCommerceManagerClick:()=>{(0,E.logShopsManagementEvent)(x.default.SHOPS_MANAGEMENT_ACTION.ACTION_CLICK_COMMERCE_MANAGER_IN_SHOPS_SETTING)},onCancelClick:()=>{(0,E.logShopsManagementEvent)(x.default.SHOPS_MANAGEMENT_ACTION.ACTION_CLICK_CANCEL_IN_SHOPS_SETTING)}})),(0,E.logShopsManagementEvent)(x.default.SHOPS_MANAGEMENT_ACTION.ACTION_CLICK_SHOPS_SETTING)},this.goToCommerceManager=()=>{const e=o.BusinessProfileCollection.get((0,C.getMaybeMeUser)());(0,l.goToCommerceManager)(e),(0,E.logShopsManagementEvent)(x.default.SHOPS_MANAGEMENT_ACTION.ACTION_CLICK_COMMERCE_MANAGER_IN_CATALOG_SETTING)},this.state={rememberMe:(0,C.getRememberMe)()}}componentDidMount(){(0,u.default)(x.default.WEBC_MENU_ITEM_LABEL.OPEN)}isShopsEnabled(){if(!f.Conn.isSMB||!R.ServerProps.shopsHeaderDropdownMenuItem)return!1;const e=o.BusinessProfileCollection.get((0,C.getMaybeMeUser)());return(0,l.hasShop)(e)}getShopsItem(){if(!this.isShopsEnabled())return null;const e=(0,S.bannedShopsEnabled)()&&(0,l.isShopBanned)(o.BusinessProfileCollection.get((0,C.getMaybeMeUser)()));return(0,V.jsx)(v.DropdownItem,{a8n:"mi-shop menu-item",action:this.handleShops,children:e?n.default._("Facebook Shop (disabled)",null,{hk:"iciR0"}):n.default._("Facebook shop",null,{hk:"1YzWOO"})})}getCatalogLabel(){return this.isShopsEnabled()?y.default.t(676):y.default.t(675)}render(){const e=o.BusinessProfileCollection.get((0,C.getMaybeMeUser)()),t=(0,V.jsx)(v.DropdownItem,{a8n:"mi-new-group menu-item",action:this.handleCreateGroup,children:y.default.t(1745)}),a=(0,S.communitiesEnabled)()?(0,V.jsx)(v.DropdownItem,{a8n:"mi-new-community menu-item",action:this._handleCreateCommunity,children:y.default.t(939)}):null,s=(0,V.jsx)(v.DropdownItem,{a8n:"mi-starred menu-item",action:this.handleStarred,children:y.default.t(818)}),i=(0,S.canEditLabelAssociation)()&&(0,V.jsx)(v.DropdownItem,{a8n:"mi-setting menu-item",action:this.handleLabel,children:y.default.t(688)}),r=(0,S.orderManagementEnabled)()&&(0,V.jsx)(v.DropdownItem,{a8n:"mi-orders menu-item",action:this._handleOrders,children:String(n.default._("Orders",null,{hk:"brape"}))}),l=f.Conn.isSMB&&!(0,S.blockCatalogCreationECommerceComplianceIndia)(e)?(0,V.jsx)(v.DropdownItem,{a8n:"mi-catalog menu-item",action:this.handleCatalog,children:this.getCatalogLabel()}):null,d=f.Conn.isSMB?(0,V.jsx)(v.DropdownItem,{a8n:"mi-profile-status menu-item",action:this.handleProfile,children:y.default.t(814)}):null;return(0,V.jsxs)(g.Dropdown,{onRef:e=>{this._refDropdown=e},type:"dropdown_menu",flipOnRTL:!0,dirX:g.DirX.LEFT,children:[t,a,d,this.getShopsItem(),l,r,(0,S.archiveV2Supported)()&&this.props.settings.showArchiveV2?null:(0,V.jsx)(v.DropdownItem,{a8n:"mi-archived menu-item",action:this.handleArchived,children:y.default.t(803)}),s,i,(0,V.jsx)(v.DropdownItem,{a8n:"mi-setting menu-item",action:this.handleSettings,children:y.default.t(817)}),null,(0,V.jsx)(v.DropdownItem,{a8n:"mi-logout menu-item",action:this.handleDisconnect,children:y.default.t(808)})]},"ChatlistHeader")}}t.default=H,H.displayName="ChatlistHeaderDropdown"},70785:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){new n.default.WebcMenu({webcMenuAction:n.default.WEBC_MENU_TYPE.THREADS_SCREEN_CLICK,webcMenuItemLabel:e}).commit()};var n=s(a(11339))},47488:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(81109)),i=s(a(48926)),r=s(a(82569)),o=s(a(35161)),l=s(a(23279)),d=a(89385),u=a(57319),c=s(a(45120)),h=s(a(52013)),f=s(a(94184)),p=a(67294),m=s(a(70714)),_=s(a(5280)),g=a(69951),v=s(a(57355)),C=s(a(48654)),S=s(a(47451)),y=s(a(42620)),b=a(22683),E=a(88102),T=s(a(69618)),x=a(19380),M=s(a(58654)),P=s(a(77365)),A=a(85600),I=s(a(51099)),w=a(50101),k=a(44663),j=(a(47915),s(a(44942))),N=s(a(30855)),O=s(a(84937)),R=a(99234),D=a(7293),L=a(57701),B=a(55414),F=s(a(41955)),G=s(a(43725)),U=a(16770),V=a(31912),H=s(a(48837)),K=a(84387),q=s(a(11339)),W=s(a(63538)),Y=a(59871),z=s(a(26757)),Q=a(72472),$=s(a(48690)),X=s(a(21011)),J=s(a(84644)),Z=a(92745),ee=s(a(49905)),te=a(64551),ae=s(a(87481)),se=s(a(64645)),ne=a(11054),ie=s(a(65932)),re=(s(a(23217)),s(a(4478))),oe=a(18644),le=s(a(90012)),de=s(a(75426)),ue=(s(a(41956)),s(a(39546)),a(85893));const ce=450,he=75;function fe(){return(0,L.canDisplayLabel)()||(0,L.smartFiltersEnabled)()}class pe extends p.Component{constructor(e){var t;super(e),t=this,this._refPanel=null,this.flatListController=new N.default,this._batchState={},this.setRefSearch=e=>{this.refSearch=e},this._setRefInputHotkey=e=>{this._refInputHotkey=e},this._refChatlist=(0,p.createRef)(),this._smbFilterSession=new se.default,this._hasLabelEditGK=!1,this._refContainer=(0,p.createRef)(),this._debounceSetState=new u.ShiftTimer((()=>{this.setState(this._batchState),this._batchState={}})),this.debounceSetState=(e,t,a)=>{Object.assign(this._batchState,e),void 0===t?this._debounceSetState.onOrBeforeRepaint():void 0===a?this._debounceSetState.debounce(t):this._debounceSetState.debounceAndCap(t,a)},this._updateLabelFeatureFlagChange=()=>{!this._hasLabelEditGK&&(0,L.canEditLabelAssociation)()&&(this._hasLabelEditGK=!0,this.props.listeners.add(U.LabelCollection,"bulk_msg_chat_label_change",(()=>{this.searchQuery&&!this.searchQuery.isEmptyQuery&&(this.ftsMsgs.updateFtsAfterMsgLabelUpdate(),this.handleSearch(this.searchQuery.trimmed,{label:this.searchQuery.filter.label,kind:this.searchQuery.filter.kind}))})),this.selectableState=new ee.default(this.props.selectable||!1),this.props.listeners.add(this._multiSelection,"all",this._updateShowMultiselectBar),this.setState({chatlistKeyId:1}))},this._updateShowMultiselectBar=()=>{const{showMultiSelectBar:e}=this.state,t=this._multiSelection&&this._multiSelection.getSelected().length>0&&!this.props.hideMultiSelectBar;!1===e&&t&&this.setState({showMultiSelectBar:!0})},this._scrollChatListToTop=()=>{const e=this._refPanel;if(e){const t=e.scrollTop;0!==e.scrollTop&&(t<e.clientHeight?(0,de.default)(e,"scroll",{duration:300,container:e,offset:-(e.scrollTop+e.getBoundingClientRect().top)}):e.scrollTop=0)}},this.getFilteredContacts=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("contact"===a.kind||"non_contact"===a.kind||"unread"===a.kind)return[];let n=(e||"").trim();if(!n&&t._isEmptyFilterQuery(a))return[];n=G.default.accentFold(n);const i=(0,$.default)(n),r=x.ContactCollection.getFilteredContacts();return r.filter((function(e){if(!e.searchMatch(n,i,a.label))return!1;if(!s){const t=g.ChatCollection.get(e.id);if(null==t?void 0:t.shouldAppearInList)return!1}return!0}))},this._getFilteredMessages=function(){var e;let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t._isEmptyFilterQuery(a))return;if(!a.label)return;const s=(null===(e=U.LabelCollection.get(a.label))||void 0===e?void 0:e.labelItemCollection.filter((e=>e.parentType===V.LabelItemParentType.Msg)).map((e=>e.parentId)))||[];Y.MsgCollection.getMessagesById(s).then((e=>{t.setState({messages:e.messages})}))},this._getFilteredChats=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=(e||"").trim();if(s||!t._isEmptyFilterQuery(a)){s=G.default.accentFold(s);const e=(0,$.default)(s);return fe()?g.ChatCollection.filter((t=>{const n=a.label&&t.contact.searchMatch(s,e,a.label),i=!s||t.contact.searchMatch(s,e),r=!a.kind&&!a.label||t.matchFilter(a);return n||i&&r})):g.ChatCollection.filter((t=>t.contact.searchMatch(s,e)&&t.shouldAppearInList))}return g.ChatCollection.filter((e=>!e.archive&&e.shouldAppearInList))},this.fullTextSearch=(e,t)=>{const a=e||this.searchQuery.query;(0,F.default)(a)||(null==t?void 0:t.label)?(this.state.searching||this.debounceSetState({searching:!0}),this._fts()):this.isFTSSearching()?this._cancelSearch():this.ftsMsgs.reset()},this.shouldFTSSearch=e=>!(!this.ftsMsgs.hasMoreMsgs||this.isFTSSearching()||!(0,F.default)(this.searchQuery.query||""))&&e.scrollTop+T.default.SCROLL_FUDGE>e.scrollHeight-e.clientHeight,this._mapGroupToContacts=(e,t)=>{const a=new Map;for(let s=0;s<e.length;s++){const n=e[s];n&&n.forEach((e=>{e&&(a.has(e)||a.set(e,[]),a.get(e).push(t[s]))}))}const s=[];return a.forEach(((e,t)=>{s.push([t,e])})),s.sort((function(e,t){return e[1].length===t[1].length?null!=e[0].t&&null!=t[0].t?t[0].t-e[0].t:null!=e[0].t?-1:1:t[1].length-e[1].length})),s.slice(0,10)},this.handleSearch=(e,t)=>{const a=fe()?t:{};if(!e&&this._isEmptyFilterQuery(a))return this.searchQuery.updateQuery(e),this.searchQuery.updateLabelQuery({}),void this.handleStopSearch();e===this.searchQuery.query&&this._isEmptyFilterQuery(a)||(this.fullTextSearch(e,a),this._commonGroupSearch(),this._throttledFilteredChats(e,a),this._throttledFilteredContacts(e,a),this.searchQuery.updateQuery(e),this.searchQuery.updateLabelQuery(a))},this._hasSearchText=()=>fe()?!!this.searchQuery.query||!this._isEmptyFilterQuery(this.searchQuery.filter):!!this.searchQuery.query,this.isFTSSearching=()=>{const e=this._batchState;return"searching"in e?e.searching:this.state.searching},this._cancelSearch=()=>{var e,t;this._fts.cancel(),this._commonGroupSearch.cancel(),this.ftsMsgs.resetSearch(),this.ftsMsgs.reset(),null===(e=this._ftsAbortController)||void 0===e||e.abort(),null===(t=this._findCommonGroupsAbortController)||void 0===t||t.abort(),this.setState({groupChats:[]}),this.isFTSSearching()&&this.debounceSetState({searching:!1},he)},this._cancelThrottled=()=>{this._throttledFilteredChats.cancel(),this._throttledFilteredContacts.cancel(),this._throttledOnScroll.cancel()},this.handleStopSearch=()=>new Promise((e=>{var t;this._isEmptyFilterQuery(this.searchQuery.filter)||(t=this._smbFilterSession.sessionId,new q.default.ChatFilterEvent({actionType:q.default.CHAT_FILTER_ACTION_TYPES.SEARCH_WITH_FILTER,filterType:q.default.CHAT_FILTER_TYPES.OTHER_LABELS,sessionId:t}).commit()),this._cancelSearch(),this.searchQuery.clear(),this._cancelThrottled(),null!=this.refSearch&&this.refSearch.reset(),this.setState({chats:this._getFilteredChats(),contacts:this.getFilteredContacts(),searching:!1},(()=>e()))})),this.handleFocusList=e=>{var t;e.repeat||this._refChatlist.current&&(this.refSearch&&!this.refSearch.cursorIsAtEnd()||(e.preventDefault(),c.default.shouldIndicateFocus(),null===(t=this._refChatlist.current)||void 0===t||t.focusFirst()))},this.handleOpenFirst=e=>{e.preventDefault();const t=this.searchQuery.query,a=this.searchQuery.filter,s=this._getFilteredChats(t,a)[0]||this.getFilteredContacts(t,a)[0];s&&(0,w.findChat)(s.id).then((e=>{this.handleStopSearch(),c.default.shouldIndicateFocus(),E.Cmd.openChatFromUnread(e).then((t=>{t&&E.Cmd.focusChatTextInput(e)}))}))},this.handleFocusSearch=()=>{E.Cmd.existsDrawerLeft((e=>{e||(c.default.shouldIndicateFocus(),h.default.focus(this.refSearch))}))},this.indicateFocus=()=>{c.default.maybeIndicateFocus(this._refInputHotkey)},this.handleScroll=e=>{this._throttledOnScroll(e.target)},this.getEmptyChatlistState=(e,t,a,s)=>(null==e?void 0:e.length)||(null==t?void 0:t.length)||a.length||(null==s?void 0:s.length)?null:this.props.labelFilter?this.state.searching?(0,ue.jsx)("span",{}):(0,ue.jsx)(A.NoResultForLabel,{labelId:this.props.labelFilter}):this.searchQuery.query?this.state.searching?(0,ue.jsx)(A.Searching,{}):(0,ue.jsx)(A.Search,{}):g.ChatCollection.some((e=>e.shouldAppearInList))?(0,ue.jsx)(A.AllArchived,{}):(0,ue.jsx)(A.ListChats,{}),this._setRefPanel=e=>{this._refPanel=e},this.handleCancelLabelSelection=()=>{this.setState({showMultiSelectBar:!1}),this._multiSelection&&this._multiSelection.unsetAll(),this.selectableState&&this.selectableState.setSelectable(!!this.props.selectable)},this.onItemSelected=e=>{if((0,L.smartFiltersEnabled)()&&!this.props.labelFilter&&(!this._isEmptyFilterQuery()||this._hasSearchText())){let t;switch(e){case"chat":t=q.default.CHAT_SEARCH_RESULT_TYPE.CHAT;break;case"message":t=q.default.CHAT_SEARCH_RESULT_TYPE.MESSAGE;break;case"contact":t=q.default.CHAT_SEARCH_RESULT_TYPE.CONTACT;break;case"group":t=q.default.CHAT_SEARCH_RESULT_TYPE.GROUP}const a=this.searchQuery.filter;new q.default.ChatFilterEvent({actionType:q.default.CHAT_FILTER_ACTION_TYPES.SEARCH_ITEM_SELECTED,filterType:this.getFilterType(a),sessionId:this._smbFilterSession.sessionId,targetScreen:q.default.CHAT_FILTER_TARGET_SCREEN.CHAT_LIST,searchResultType:t}).commit()}},this.ftsMsgs=new O.default,this.selection=new ae.default([],(e=>e.id.toString())),this.searchQuery=new Z.SearchQuery,this._multiSelection=this.props.multiSelection||new z.default([],(e=>e.id.toString())),this._fts=this.props.debounce((()=>{var e;this.props.labelFilter||this.logSearchEvent();const t=this.searchQuery.trimmed;null===(e=this._ftsAbortController)||void 0===e||e.abort(),this._ftsAbortController=new m.default;const a=this._ftsAbortController.signal,s=this.props.getUnmountSignal(),n=Promise.resolve().then((()=>{this.isFTSSearching()||this.debounceSetState({searching:!0},he)})).then((()=>this.ftsMsgs.search({count:T.default.FTS_NUM_RESULTS,filter:this.searchQuery.filter,searchTerm:t})));this._ftsPromise=(0,J.default)(n,a).then((e=>{s.aborted||e&&!e.canceled&&this.debounceSetState({searching:!1},he)})).catch((0,d.catchAbort)((()=>{}))).finally((()=>{this._ftsPromise=void 0,this._ftsAbortController=void 0})).catch((()=>{this.isFTSSearching()&&this.debounceSetState({searching:!1},he)}))}),T.default.FTS_TYPING_DELAY),this._throttledFilteredChats=this.props.throttle(((e,t)=>{const a=this._getFilteredChats(e,t);this.debounceSetState({chats:a},he,50)}),ce,{leading:!1,trailing:!0}),this._throttledFilteredContacts=this.props.throttle(((e,t)=>{const a=this.getFilteredContacts(e,t);this.debounceSetState({contacts:a},he,50)}),ce,{leading:!1,trailing:!0}),this._throttledOnScroll=this.props.throttle((e=>{this.shouldFTSSearch(e)&&this.fullTextSearch()}),100),this._commonGroupSearch=(0,l.default)((()=>{var e;const t=this.searchQuery.trimmed;if(!t)return void this.setState({groupChats:[]});if("contact"===this.searchQuery.filter.kind||"non_contact"===this.searchQuery.filter.kind)return void this.setState({groupChats:[]});const a=this.getFilteredContacts(t,{},!0);if(0===a.length||a.length>5)return void this.setState({groupChats:[]});const s=(0,o.default)(a,function(){var e=(0,i.default)((function*(e){try{return yield(0,k.findCommonGroups)(e),e.commonGroups}catch(e){throw __LOG__(4,!0,new Error,!0)`get from participants table failed`,SEND_LOGS("get from participants table failed when finding common groups: "+e),new Error("get from participants table failed")}}));return function(){return e.apply(this,arguments)}}());null===(e=this._findCommonGroupsAbortController)||void 0===e||e.abort(),this._findCommonGroupsAbortController=new m.default;const n=this._findCommonGroupsAbortController.signal;this._findCommonGroupsPromise=(0,J.default)(Promise.all(s),n).then((e=>{if(t===this.searchQuery.trimmed){const t=this._mapGroupToContacts(e,a);this.setState({groupChats:t})}})).catch((()=>{})).finally((()=>{this._findCommonGroupsPromise=null,this._findCommonGroupsAbortController=null}))}),750);const{labelFilter:a}=this.props,s=this.props.labelFilter?{label:a}:void 0;this.state=(0,n.default)({searching:!!s,chats:this._getFilteredChats("",s),contacts:this.getFilteredContacts("",s),groupChats:[],showMultiSelectBar:!1,chatlistKeyId:0,filterPreset:s,textsize:P.default.get().textsize},{}),this.searchQuery.updateLabelQuery(s),this._getFilteredMessages(s)}componentDidMount(){const{labelFilter:e,listeners:t}=this.props;e&&this.handleSearch("",{label:e}),this._updateLabelFeatureFlagChange(),t.add(D.GK,D.GK.FEATURE_CHANGE_EVENT,this._updateLabelFeatureFlagChange),this.props.listeners.add(g.ChatCollection,"remove",(e=>{if(this.searchQuery.query){const t=(0,r.default)(this.state.chats,e);this.state.chats&&t.length!==this.state.chats.length&&this.debounceSetState({chats:t})}else this._throttledFilteredChats.cancel(),this.debounceSetState({chats:this._getFilteredChats()})})),this.props.listeners.add(x.ContactCollection,"remove",(e=>{if(this.searchQuery.query||!this._isEmptyFilterQuery(this.searchQuery.filter)){const t=(0,r.default)(this.state.contacts,e);this.state.contacts&&t.length!==this.state.contacts.length&&this.debounceSetState({contacts:t})}else this._throttledFilteredContacts.cancel(),this.debounceSetState({contacts:this.getFilteredContacts()})})),this.props.listeners.add(g.ChatCollection,"sort change:archive",(()=>{!this.searchQuery.query&&this._isEmptyFilterQuery(this.searchQuery.filter)&&(this._throttledFilteredChats.cancel(),this.debounceSetState({chats:this._getFilteredChats()}))})),this.props.listeners.add(x.ContactCollection,"sort",(()=>{!this.searchQuery.query&&this._isEmptyFilterQuery(this.searchQuery.filter)&&(this._throttledFilteredContacts.cancel(),this.debounceSetState({contacts:this.getFilteredContacts()}))})),this.props.listeners.add(this.ftsMsgs,"bulk_remove reset",(()=>{!this.searchQuery.query&&this._isEmptyFilterQuery(this.searchQuery.filter)&&(this._throttledFilteredChats.cancel(),this.debounceSetState({chats:this._getFilteredChats()}))})),this.props.listeners.add(E.Cmd,"focus_chat_search",this.handleFocusSearch),this.props.listeners.add(E.Cmd,"textsize_change",(e=>{this.debounceSetState({textsize:e})})),this.props.listeners.add(Y.MsgCollection,T.default.NEW_MSG_SENT,(()=>{this._hasSearchText()||!this._isEmptyFilterQuery(this.searchQuery.filter)?this.handleStopSearch().then((()=>this._scrollChatListToTop())):this._scrollChatListToTop()}))}getClientWidth(){var e;return null===(e=this._refContainer.current)||void 0===e?void 0:e.clientWidth}containsDOMNode(e){return!!this._refContainer.current&&this._refContainer.current.contains(e)}componentWillUnmount(){this._cancelSearch(),this._cancelThrottled(),this._debounceSetState.cancel()}_isEmptyFilterQuery(e){return!e||!(e.label||e.kind)}_showUnread(){}_showArchivedPanel(){return(0,L.archiveV2Supported)()&&this.props.settings.showArchiveV2&&!this.state.showMultiSelectBar&&this.searchQuery.isEmptyQuery&&this.state.chats&&this.state.chats.length>0&&g.ChatCollection.some((e=>e.archive&&e.shouldAppearInList))}getFilterType(e){if(!e||this._isEmptyFilterQuery(e))return q.default.CHAT_FILTER_TYPES.NONE;switch(e.kind){case T.default.SMB_SEARCH_FILTERS.UNREAD:return q.default.CHAT_FILTER_TYPES.UNREAD;case T.default.SMB_SEARCH_FILTERS.GROUP:return q.default.CHAT_FILTER_TYPES.GROUP;case T.default.SMB_SEARCH_FILTERS.BROADCAST:return q.default.CHAT_FILTER_TYPES.BROADCAST_LIST;case T.default.SMB_SEARCH_FILTERS.CONTACT:return q.default.CHAT_FILTER_TYPES.CONTACT;case T.default.SMB_SEARCH_FILTERS.NON_CONTACT:return q.default.CHAT_FILTER_TYPES.NON_CONTACT;default:return q.default.CHAT_FILTER_TYPES.OTHER_LABELS}}logSearchEvent(){if((0,L.smartFiltersEnabled)()){const e=this.searchQuery.filter;new q.default.ChatFilterEvent({actionType:q.default.CHAT_FILTER_ACTION_TYPES.SEARCH,filterType:this.getFilterType(e),sessionId:this._smbFilterSession.sessionId,targetScreen:q.default.CHAT_FILTER_TARGET_SCREEN.CHAT_LIST}).commit()}}render(){const{chats:e,contacts:t,groupChats:a,filterPreset:s,messages:n}=this.state,i=this.ftsMsgs.toArray();let r=this.getEmptyChatlistState(e,t,i,n);null==r&&(r=(0,ue.jsx)(v.default,{ref:this._refChatlist,flatListController:this.flatListController,chats:e,contacts:t||[],messages:n||[],filterPreset:s,groupChats:a,isSearching:!!this._hasSearchText(),searchQuery:this.searchQuery,ftsResult:i,selection:this.selection,onFocusSearch:this.handleFocusSearch,multiSelection:this._multiSelection,selectableState:this.selectableState,onItemSelected:this.onItemSelected},this.state.chatlistKeyId));const o={down:this.handleFocusList},l=this.state.searching&&this.props.labelFilter||this.state.searching&&this.ftsMsgs.length?(0,ue.jsx)("div",{className:y.default.spinner,children:(0,ue.jsx)(ne.Spinner,{stroke:6,size:24})},"spinner"):null;let d;const u=T.default.TEXTSIZE_CLASS_MAP.find((e=>e.scale===this.state.textsize));u&&(d=u.classname);const c=(0,f.default)(y.default.chatListPanel,d),h=this.ftsMsgs.hasMoreMsgs&&i.length||this._showUnread()?this.handleScroll:void 0;let p,m,g,E,x;if(this.state.showMultiSelectBar?p=(0,ue.jsx)(oe.UIE,{displayName:"MultiSelect",escapable:!0,requestDismiss:this.handleCancelLabelSelection,children:(0,ue.jsx)(W.default,{theme:"chatlist-panel",selectedModels:this._multiSelection,labelEditEnabled:!0,iconColor:"#8d9194",onCancel:this.handleCancelLabelSelection})},"multiSelectBar"):g=(0,ue.jsx)(B.HotKeys,{handlers:o,onFocus:this.indicateFocus,onRef:this._setRefInputHotkey,className:y.default.panelSearch,children:(0,ue.jsx)(H.default,{ref:this.setRefSearch,onSearch:this.handleSearch,onEnter:this.handleOpenFirst,loading:this.state.searching,smbFilterSession:this._smbFilterSession,listFilterEnabled:!0})},"ListSearchHotKey"),this.props.labelFilter||(m=(0,ue.jsxs)(ue.Fragment,{children:[(0,ue.jsx)(S.default,{mute:Q.MuteCollection.globalMute(),settings:this.props.settings}),(0,ue.jsx)(C.default,{}),g,p]})),this._showArchivedPanel()&&(E=(0,ue.jsx)(_.default,{})),D.GK.supportsFeature(D.GK.F.MD_BACKEND)&&this._hasSearchText()){const e=b.Clock.relativeDateStr((0,R.getHistorySyncEarliestDate)());x=(0,ue.jsx)(M.default,{theme:"md-chat-search-list",children:G.default.t(382,{date:e})})}return(0,ue.jsxs)("div",{id:"side",className:c,ref:this._refContainer,children:[m,(0,ue.jsxs)(j.default,{flatListControllers:[this.flatListController],onRef:this._setRefPanel,className:y.default.panelBody,onScroll:h,id:"pane-side",children:[E,r,l,x]}),te.ServerProps.pttOotPlayback&&(0,ue.jsx)(I.default,{reason:"out-of-chat-player",children:(0,ue.jsx)(X.default,{})})]})}}pe.CONCERNS={settings:["showArchiveV2"]},pe.displayName="ChatlistPanel";const me=(0,le.default)((0,re.default)((0,K.ListenerHOC)((0,ie.default)(pe,pe.CONCERNS))));t.default=class extends me{getClientWidth(){return this.getComponent().getClientWidth()}containsDOMNode(e){return this.getComponent().containsDOMNode(e)}}},61837:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(94184)),i=a(67294),r=a(16593),o=s(a(39709)),l=a(84387),d=a(85893);class u extends i.Component{constructor(e){super(e),this._handleSelectableChange=()=>{this.forceUpdate()},this._handleSelectChange=e=>{this.state.selected!==e&&this.setState({selected:e})},this._handleSelect=e=>{e&&e.stopPropagation();const{onSelect:t,model:a}=this.props,{selected:s}=this.state;let n;s?(this.setState({selected:!1,partialSelected:!1}),n=!1):n=!0,t&&t(a,n,!1)};const{multiSelection:t,initialSelection:a,model:s}=this.props;let n=!1,i=!1;switch(a){case 0:n=!1,i=!1;break;case 1:n=!0,i=!1;break;case 2:n=!0,i=!0;break;default:n=t.isSelected(s),i=!1}this.state={selected:n,partialSelected:i,modelId:s.id.toString()}}componentDidMount(){this.props.listeners.add(this.props.multiSelection,this.props.model.id.toString(),this._handleSelectChange),this.props.selectableState&&this.props.listeners.add(this.props.selectableState,"all",this._handleSelectableChange)}componentDidUpdate(e){const{model:t,multiSelection:a,listeners:s}=e,n=t.id.toString(),i=this.props.model.id.toString();a&&n!==i&&(s.remove(a,n,this._handleSelectChange),s.add(a,i,this._handleSelectChange))}static getDerivedStateFromProps(e,t){const{modelId:a}=t,{multiSelection:s,model:n}=e,i=n.id.toString();return s&&a!==i?{modelId:i,selected:s.isSelected(n)}:null}render(){const{theme:e,selectableState:t,children:a}=this.props,s=(0,n.default)(o.default.checkboxChatControl,{[o.default.labelSelection]:"label-selection"===this.props.theme}),l=t.isSelectable,u={};if(l&&e&&Object.assign(u,{theme:e}),l&&Object.assign(u,{noContext:!0}),null==a)return null;const c=i.Children.toArray(a)[0],h="label-selection"===e?this._handleSelect:null;return(0,d.jsxs)("div",{className:o.default.checkboxChatWrapper,onClick:h,children:[l&&(0,d.jsx)("div",{className:s,onClick:this._handleSelect,children:(0,d.jsx)(r.CheckBox,{onChange:this._handleSelect,checked:this.state.selected,theme:this.state.selected&&this.state.partialSelected?r.CHECKBOX_THEME.PARTIAL:void 0})}),(0,i.cloneElement)(c,u)]})}}u.displayName="CheckboxWrapper";var c=(0,l.ListenerHOC)(u);t.default=c},35375:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{useShortName:t,isDisabled:a,onDelete:s,selections:h}=e,f=(0,i.useRef)(null),p=(0,l.default)();return(0,d.useListener)(h,"all",((e,t)=>{p(),t&&f.current instanceof HTMLDivElement&&f.current.scrollIntoView({behavior:"smooth"})})),(0,c.jsxs)(u.default,{transitionName:"slide-up-down-footer",className:o.default.selectedListContainer,children:[(e=>{if(!e.length)return null;return e.map((e=>{const o=a&&a(e.id)?null:{onDelete:s};return(0,i.createElement)(r.Contact,(0,n.default)((0,n.default)({contact:e,useShortName:t},o),{},{type:r.Type.SMALL,key:e.id.toString(),theme:"list-names",waitIdle:!0}))}))})(e.selections.getSelected()),(0,c.jsx)("div",{className:o.default.bottomDiv,ref:f})]})};var n=s(a(81109)),i=a(67294),r=a(2732),o=s(a(51322)),l=s(a(59909)),d=a(19529),u=s(a(41956)),c=a(85893)},48837:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(45095)),i=s(a(99964)),r=s(a(45120)),o=s(a(94184)),l=s(a(48360)),d=a(67294),u=a(83872),c=s(a(69618)),h=a(71174),f=s(a(18888)),p=a(57701),m=s(a(43725)),_=a(16770),g=a(84543),v=s(a(76414)),C=s(a(11339)),S=a(59871),y=a(11054),b=s(a(23217)),E=a(18644),T=s(a(24717)),x=s(a(59552)),M=a(19529),P=s(a(84215)),A=s(a(83800)),I=a(99935),w=s(a(41956)),k=a(85893);const j=()=>{};function N(e){let{kind:t,icon:a,label:s,onClick:n}=e;return(0,k.jsx)(h.DropdownItem,{a8n:`chat_filter_${t||""}`,action:n,children:(0,k.jsxs)("div",{className:v.default.kind,children:[(0,k.jsx)(b.default,{name:a}),(0,k.jsx)("div",{className:v.default.kindName,children:s})]})})}function O(){return(0,p.canDisplayLabel)()||(0,p.smartFiltersEnabled)()}function R(e,t){const{loading:a,placeholder:s,spellCheck:R,listFilterEnabled:L,onSearch:B,type:F,smbFilterSession:G}=e,U=(0,d.useRef)(null),V=(0,d.useRef)(null),H=(0,x.default)(f.default),K=(0,d.useRef)(!1),[q,W]=(0,d.useState)(""),[Y,z]=(0,d.useState)(null),[Q,$]=(0,d.useState)(null),[X,J]=(0,d.useState)(!1),[Z,ee]=(0,d.useState)(null),te=()=>{const e=U.current;e&&!Z&&(e.reset(),e.blur(),W(""),z(null),$(null),J(!1),B("",void 0))};(0,M.useListener)(S.MsgCollection,c.default.NEW_MSG_SENT,(()=>{(Q||Y)&&te()}));const ae=(0,A.default)((()=>{if(!X||q||Y||Q)return;const e=V.current;e&&e.contains(document.activeElement)||te()}));(0,d.useEffect)((()=>{ae()}),[ae,X,q,Y,Q]),(0,P.default)((()=>{te()}));let se=null;const[ne]=(0,I.useTimeout)((()=>{q||Y||Q||te()}),0),ie=e=>{var t;Z&&ee(null),z(e.label),$(null!==(t=e.kind)&&void 0!==t?t:null),G&&function(e,t){const a=new C.default.ChatFilterEvent({actionType:C.default.CHAT_FILTER_ACTION_TYPES.SELECT_FILTER,filterType:D(t),sessionId:e});(0,p.smartFiltersEnabled)()&&(a.targetScreen=C.default.CHAT_FILTER_TARGET_SCREEN.CHAT_LIST);a.commit()}(G.sessionId,e),B("",e)},re=()=>{if("chat-msg-search"===F)return[];const e=[(0,k.jsx)(N,{kind:c.default.SMB_SEARCH_FILTERS.UNREAD,icon:"search-unread",label:m.default.t(1269),onClick:()=>ie({kind:c.default.SMB_SEARCH_FILTERS.UNREAD})},"unread")];return(0,p.smartFiltersEnabled)()&&e.push((0,k.jsx)(N,{kind:c.default.SMB_SEARCH_FILTERS.CONTACT,icon:"contacts",label:m.default.t(1267),onClick:()=>ie({kind:c.default.SMB_SEARCH_FILTERS.CONTACT})},"contact"),(0,k.jsx)(N,{kind:c.default.SMB_SEARCH_FILTERS.NON_CONTACT,icon:"non_contacts",label:m.default.t(1268),onClick:()=>ie({kind:c.default.SMB_SEARCH_FILTERS.NON_CONTACT})},"non_contact")),e.push((0,k.jsx)(N,{kind:c.default.SMB_SEARCH_FILTERS.GROUP,icon:"group",label:m.default.t(1708),onClick:()=>ie({kind:c.default.SMB_SEARCH_FILTERS.GROUP})},"group")),(0,u.broadcastListEnabled)()&&e.push((0,k.jsx)(N,{kind:c.default.SMB_SEARCH_FILTERS.BROADCAST,icon:"search-broadcasts",label:m.default.t(1266),onClick:()=>ie({kind:c.default.SMB_SEARCH_FILTERS.BROADCAST})},"broadcast")),[(0,k.jsx)("div",{className:v.default.filterTitle,children:m.default.t(1584)},"chat_filter_kind_header"),...e]},oe=()=>{const e=_.LabelCollection.toArray().reduce(((e,t)=>t.name&&t.count&&0!==t.count?[...e,(0,k.jsx)(h.DropdownItem,{a8n:`label_item_${t.id}`,action:()=>ie({label:t.id}),children:(0,k.jsx)("button",{className:v.default.labels,children:(0,k.jsx)(g.Labels,{labels:[t.id],showName:!0,theme:"label-filter"})})},`label_item_${t.id}`)]:e),[]);if(e.length>0){return[(0,k.jsx)("div",{className:v.default.filterTitle,children:m.default.t(1271)},"chat_filter_label_header"),...e]}return[]},le=()=>{(0,n.default)(U.current,"inputRef.current").focus()},de=e=>{e.stopPropagation(),le();const t=U.current;t&&(t.reset(),z(null),$(null),B("",void 0))},[ue]=(0,I.useTimeout)(le,0),ce=e=>{G&&function(e){const t=new C.default.ChatFilterEvent({actionType:C.default.CHAT_FILTER_ACTION_TYPES.OPEN,filterType:C.default.CHAT_FILTER_TYPES.NONE,sessionId:e});(0,p.smartFiltersEnabled)()&&(t.targetScreen=C.default.CHAT_FILTER_TARGET_SCREEN.CHAT_LIST);t.commit()}(G.newSessionId()),e.stopPropagation(),ee({menu:[...re(),...oe()],anchor:e.target})},he=()=>{ee(null)},fe=e=>(0,k.jsx)("div",{"data-a8n":i.default.key("input-placeholder"),className:v.default.labelSearchPlaceholder,children:e}),pe=()=>(0,n.default)(U.current,"inputRef.current").cursorIsAtEnd(),me=()=>{(0,n.default)(U.current,"inputRef.current").select()},_e=()=>{const e=U.current;e&&e.reset()},ge=()=>{r.default.shouldIndicateFocus(),r.default.maybeIndicateFocus(V.current)};let ve;(0,d.useImperativeHandle)(t,(()=>({cursorIsAtEnd:pe,select:me,reset:_e,focus:le,indicateFocus:ge}))),X&&(a?se=(0,k.jsx)("div",{className:v.default.iconSpinner,onClick:de,children:(0,k.jsx)(y.Spinner,{size:20,stroke:5,color:"highlight"})},"icon-clear-search"):q.length||Y||Q?se=(0,k.jsx)("button",{className:v.default.iconCloseSearch,onClick:de,children:(0,k.jsx)(b.default,{name:"x-alt"})},"icon-clear-search"):O()&&L&&(se=(0,k.jsx)("button",{className:v.default.iconLabelSelect,"aria-label":l.default._("Filters menu",null,{hk:"LNvK6"}),onClick:ce,children:(0,k.jsx)(b.default,{name:"filter"})},"icon-select-label"))),X&&(ve=(0,k.jsx)(E.UIE,{displayName:"ListSearch",escapable:!0,requestDismiss:te,requestFocus:le,requestRecentFocusOnUnmount:!1}));const Ce=s||m.default.t(1202),Se=X?te:()=>{le()},ye=(0,o.default)(v.default.listSearch,{[v.default.active]:X||Y||Q});let be,Ee;Z&&(be=(0,k.jsx)(E.UIE,{displayName:"ChatContextMenu",escapable:!0,popable:!0,requestDismiss:he,requestRecentFocusOnUnmount:!1,children:(0,k.jsx)(T.default,{contextMenu:Z})})),!q&&O()&&(Y?Ee=fe(m.default.t(687,{labelName:_.LabelCollection.assertGet(Y).name})):Q===c.default.SMB_SEARCH_FILTERS.GROUP?Ee=fe(m.default.t(1270)):Q===c.default.SMB_SEARCH_FILTERS.UNREAD?Ee=fe(m.default.t(1273)):Q===c.default.SMB_SEARCH_FILTERS.BROADCAST?Ee=fe(m.default.t(1264)):Q===c.default.SMB_SEARCH_FILTERS.CONTACT?Ee=fe(m.default.t(1265)):Q===c.default.SMB_SEARCH_FILTERS.NON_CONTACT&&(Ee=fe(m.default.t(1272))));const Te=X?l.default._("Chat list",null,{hk:"iikD9"}):l.default._("Search or start new chat",null,{hk:"TdYzC"}),xe=H.current,Me=l.default._("Search input textbox",null,{hk:"56hij"});return(0,k.jsxs)("div",{ref:V,onMouseEnter:()=>{O()&&(K.current=!0)},onMouseLeave:()=>{K.current=!1},className:ye,children:[(0,k.jsxs)("button",{"data-a8n":i.default.key("icon-search-morph"),className:v.default.iconSearchMorph,onMouseDown:Se,"aria-label":Te,children:[(0,k.jsx)("div",{className:(0,o.default)(v.default.iconMorph,v.default.iconMorphBack),children:(0,k.jsx)(b.default,{name:"back"})}),(0,k.jsx)("div",{className:(0,o.default)(v.default.iconMorph,v.default.iconMorphSearch),children:(0,k.jsx)(b.default,{name:"search"})})]}),(0,k.jsxs)(w.default,{transitionName:"pop",children:[se,be]}),(0,k.jsx)("div",{"data-a8n":i.default.key("input-placeholder"),className:v.default.inputPlaceholder,children:q?null:Ce}),Ee,(0,k.jsx)("label",{className:v.default.contInputSearch,children:(0,k.jsx)(xe,{a8n:"chat-list-search",title:Me,ref:U,theme:"list-search",tabOrder:c.default.TAB_ORDERS.CHAT_LIST_SEARCH,spellCheck:R,onBlur:()=>{K.current||ne()},onFocus:X?j:()=>{J(!0),ue()},onChange:X?e=>{W(e),B(e,{label:Y,kind:Q})}:j,onEnter:e.onEnter})}),ve]})}function D(e){switch(e.kind){case c.default.SMB_SEARCH_FILTERS.UNREAD:return C.default.CHAT_FILTER_TYPES.UNREAD;case c.default.SMB_SEARCH_FILTERS.GROUP:return C.default.CHAT_FILTER_TYPES.GROUP;case c.default.SMB_SEARCH_FILTERS.BROADCAST:return C.default.CHAT_FILTER_TYPES.BROADCAST_LIST;case c.default.SMB_SEARCH_FILTERS.CONTACT:return C.default.CHAT_FILTER_TYPES.CONTACT;case c.default.SMB_SEARCH_FILTERS.NON_CONTACT:return C.default.CHAT_FILTER_TYPES.NON_CONTACT;default:return C.default.CHAT_FILTER_TYPES.OTHER_LABELS}}var L=(0,d.forwardRef)(R);t.default=L},1211:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.OocMarquee=function(e){let{children:t}=e;return(0,r.jsxs)("div",{className:(0,n.default)(o.childWrapper,o.animation,i.default.isRTL()?o.animationRTL:o.animationLTR),children:[t,(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:(0,n.default)(o.delimiter)}),t,(0,r.jsx)("span",{className:(0,n.default)(o.delimiter)})]})]})};var n=s(a(56720)),i=s(a(43725)),r=a(85893);const o={animation:{animationDuration:"kb1vfvhz",animationIterationCount:"tkmeqcnu",animationTimingFunction:"f8mos8ky"},animationLTR:{animationName:"i2cyxsuq"},animationRTL:{animationName:"joi2o88i"},childWrapper:{position:"g0rxnol2",width:"ltyqj8pj"},delimiter:{display:"l7jjieqr",width:"jswlwoyz",height:"ppled2lx"}}},21011:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const{outOfChatPlayerMessage:e}=(0,k.useModelValues)(b.PttPrefs,["outOfChatPlayerMessage"]),t=(0,j.useMsgAudioPlaybackController)(e);return e&&t?(0,R.jsx)(F,{msg:e,playbackController:t,onPlayNext:e=>{b.PttPrefs.outOfChatPlayerMessage=e}}):null};var n=s(a(33693)),i=s(a(45095)),r=s(a(94184)),o=a(67294),l=s(a(56720)),d=a(76716),u=s(a(54595)),c=a(69951),h=a(88102),f=s(a(69618)),p=a(88984),m=s(a(95271)),_=a(12176),g=a(1211),v=a(68400),C=a(67880),S=a(16538),y=a(98113),b=a(56989),E=s(a(24378)),T=s(a(23217)),x=a(97628),M=s(a(1784)),P=s(a(43420)),A=s(a(16704)),I=a(19529),w=s(a(88738)),k=a(49082),j=a(5551),N=a(99935),O=s(a(41956)),R=a(85893);const D={container:{position:"lhggkp7q",zIndex:"b9fczbqn",backgroundColor:"f09rd1o5",display:"p357zi0d",width:"ln8gz9je",height:"noboit18",boxShadow:"amd08ebk"},avatar:{marginEnd:"t9wpllip",width:"qssinsw9",height:"lniyxyh2",minWidth:"byvcucqk",display:"p357zi0d",justifyContent:"ac2vgrno",alignItems:"gndfcl4n",flexWrap:"lkhkxwyq",position:"g0rxnol2"},audioAvatar:{borderTopStartRadius:"ig3kka7n",borderTopEndRadius:"a57u14ck",borderBottomEndRadius:"a4bg1r4i",borderBottomStartRadius:"h1a3x9ys",overflowX:"gfz4du6o",overflowY:"r7fjleex"},forwardedPttAvatar:{backgroundColor:"k8kmlv7u"},micContainer:{zIndex:"mb8var44",position:"lhggkp7q",top:"a70a3vn1",marginTop:"tt8xd2xn",marginEnd:"jnwc1y2a",marginBottom:"mpdn4nr2",marginStart:"svoq16ka",paddingTop:"i5tg98hk",paddingEnd:"f9ovudaz",paddingBottom:"przvwfww",paddingStart:"gx1rr48f",end:"r76eoqdq"},senderContainer:{width:"ln8gz9je",height:"ppled2lx",overflowX:"gfz4du6o",overflowY:"r7fjleex",display:"p357zi0d",justifyContent:"ac2vgrno",alignItems:"gndfcl4n",position:"g0rxnol2"},senderButton:{maxWidth:"laorhtua",height:"ppled2lx",display:"p357zi0d",overflowX:"gfz4du6o",overflowY:"r7fjleex",justifyContent:"ac2vgrno",alignItems:"gndfcl4n",":hover":{opacity:"gnd3v8n5"}},authorSection:{whiteSpace:"le5p0ye3",textOverflow:"kupmgzgy",overflowX:"gfz4du6o",overflowY:"r7fjleex",maxWidth:"laorhtua",height:"ppled2lx",display:"p357zi0d",alignItems:"gndfcl4n"},senderName:{color:"iqn2u7bu",fontSize:"enbbiyaj"},buttonContainer:{minWidth:"f8zw8ovf",height:"ppled2lx",display:"p357zi0d",justifyContent:"ac2vgrno",alignItems:"gndfcl4n"},progressContainer:{width:"ln8gz9je",position:"lhggkp7q",top:"dbs0ofhi",height:"d9lyu8cj"},progress:{width:"ln8gz9je",height:"ppled2lx"},progressLight:{backgroundColor:"qpsqveag",opacity:"cats8p75"},progressDark:{backgroundColor:"qj9ovlz3",opacity:"ge6flnsz"},measurementContainer:{width:"tfi85p4o",height:"ppled2lx",overflowX:"gfz4du6o",overflowY:"r7fjleex",position:"lhggkp7q"},measurementDiv:{visibility:"kojwoqec",position:"lhggkp7q",top:"p6im964z",start:"f88dsuqf"}},L=E.default.outOfChat,B=E.default.forwardedOutOfChat;function F(e){let{msg:t,playbackController:a,onPlayNext:s}=e;const{audio:r,pttPlaybackLogger:u}=a,p=function(e){const{isOocPlayerClosedByUser:t}=(0,k.useModelValues)(b.PttPrefs,["isOocPlayerClosedByUser"]),a=(0,A.default)(c.ChatCollection,"change:active",(()=>c.ChatCollection.getActive())),s=(0,o.useMemo)((()=>{var t;return null!==(t=null==a?void 0:a.msgs.some((t=>t.id.id===e.id.id)))&&void 0!==t&&t}),[e,a]);return!t&&!s}(t),[_,g]=(0,o.useState)(!r.paused),[E,T]=(0,o.useState)(!1),x=(0,o.useRef)(!1),P=()=>x.current=!1;(0,o.useEffect)((()=>{P()}),[t]);const w=()=>g(!r.paused),[j,L]=(0,N.useTimeout)((()=>{const e=function(e){const t=e.id,a=(0,n.default)(e.chat.msgs.toArray(),(e=>t.equals(e.id)));if(!a)return null;const s=a.asAudio||a.asPtt;return s&&(0,m.default)({currentMsg:e,nextMsg:s,playedBefore:e.ack===f.default.ACK.PLAYED})?s:null}(t);e?((0,y.playMidPttTone)(),s(e),T(!0)):E&&((0,y.playEndPttTone)(),T(!1))}),f.default.PTT_PLAYBACK_DELAY);(0,I.useListener)(r,"playing",(()=>{w()})),(0,I.useListener)(r,"timeupdate",(()=>{w(),p&&(u.markAsPlayedInOoc(),x.current||(x.current=!0,(0,C.incrementPttDailyCount)(C.PttDailyCountKind.OOC_PLAYBACK,(0,i.default)(t.chat.kind,"msg.chat.kind"))))})),(0,I.useListener)(r,"pause",w),(0,I.useListener)(r,"ended",(()=>{w(),p&&(u.commit({isSequentialPlayback:E,success:!0}),P(),j())})),(0,I.useListener)(r,"error",(()=>{p&&u.commit({isSequentialPlayback:E,success:!1})}));const B=()=>{r.pause(),L()};return(0,I.useListener)(d.MainAudioChannel,"paused_DEPRECATED_DO_NOT_USE",(e=>{e===r&&B()})),(0,I.useListener)(h.Cmd,"status_viewer_open",(()=>{B()})),(0,I.useListener)(t.chat,"remove",(()=>{B(),b.PttPrefs.closeOocPlayer()})),(0,I.useListener)(t,"change:asRevoked",(()=>{t.asRevoked&&(B(),b.PttPrefs.closeOocPlayer())})),(0,o.useEffect)((()=>{E&&r.play()}),[r,E]),(0,R.jsx)(O.default,{transitionName:"ptt-out-of-chat",children:p&&(0,R.jsxs)("div",{className:(0,l.default)(D.container),children:[(0,R.jsx)("div",{className:(0,l.default)(D.buttonContainer),children:(0,R.jsx)(S.PttPlayPauseButton,{onConfirm:e=>{_?(r.pause(),u.increaseOocPauseCount()):r.play(),e.preventDefault()},paused:!_,dataTab:f.default.TAB_ORDERS.PTT_OOC_BUTTON,disabled:!p,theme:"out-of-chat-playback"})}),(0,R.jsx)("div",{className:(0,l.default)(D.senderContainer),children:(0,R.jsxs)(M.default,{dataTab:f.default.TAB_ORDERS.PTT_OOC_BUTTON,xstyle:D.senderButton,onClick:e=>{if(e.defaultPrevented)return;const{chat:a}=t;h.Cmd.openChatAt(a,a.getSearchContext(t.unsafe())),u.increaseOocClickToChatCount()},children:[(0,R.jsx)(U,{msg:t}),(0,R.jsx)(G,{author:t.senderObj,chat:t.chat})]})}),(0,R.jsx)("div",{className:(0,l.default)(D.buttonContainer),children:(0,R.jsx)(v.PttCloseButton,{onConfirm:e=>{r.pause(),b.PttPrefs.closeOocPlayer(),b.PttPrefs.setPlayingMessage(null),u.markAsOocClosedByUser(),u.commit({isSequentialPlayback:E,success:!0}),e.preventDefault()},dataTab:f.default.TAB_ORDERS.PTT_OOC_BUTTON,disabled:!p,theme:"out-of-chat-playback"})}),(0,R.jsx)(q,{audio:r,isPlaying:_})]})})}function G(e){const{author:t,chat:a}=e,[s,{width:n}]=(0,w.default)(),[i,{width:r}]=(0,w.default)(),o=a.isGroup?(0,R.jsx)(_.ContactAndGroupName,{contact:t,chat:a,xstyle:D.senderName}):(0,R.jsx)(_.Name,{contact:t,useShortName:!0,xstyle:D.senderName});return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("div",{ref:s,className:(0,l.default)(D.measurementContainer),children:(0,R.jsx)("div",{ref:i,className:(0,l.default)(D.measurementDiv),children:o})}),(0,R.jsx)("div",{className:(0,l.default)(D.authorSection),children:r>n?(0,R.jsx)(g.OocMarquee,{children:o}):o})]})}function U(e){let{msg:t}=e;return"ptt"===t.type?(0,R.jsx)(V,{msg:t}):t.isProbablyForwardedPtt?(0,R.jsx)(H,{}):(0,R.jsx)(K,{})}function V(e){let{msg:t}=e;return(0,R.jsxs)("div",{className:(0,l.default)(D.avatar),children:[(0,R.jsx)(p.DetailImage,{id:t.senderObj.id,size:40}),(0,R.jsx)("span",{className:(0,r.default)((0,l.default)(D.micContainer),L),children:(0,R.jsx)(T.default,{name:"ptt-status",width:26,height:26})})]})}function H(){return(0,R.jsx)("div",{className:(0,l.default)(D.avatar,D.audioAvatar,D.forwardedPttAvatar),children:(0,R.jsx)(T.default,{name:"ptt-status",width:20,height:20,className:B})})}function K(){return(0,R.jsx)("div",{className:(0,l.default)(D.avatar,D.audioAvatar),children:(0,R.jsx)(T.default,{name:"audio-file",width:40,height:40})})}function q(e){let{audio:t,isPlaying:a}=e;const[s,n]=(0,o.useState)((0,u.default)(t)),i=(0,o.useCallback)((()=>{n((0,u.default)(t))}),[t]);(0,P.default)(i,{active:a}),(0,I.useListener)(t,"timeupdate",i),(0,I.useListener)(t,"ended",(()=>n(0)));const{theme:r}=(0,o.useContext)(x.ThemeContext);return(0,R.jsx)("div",{className:(0,l.default)(D.progressContainer),children:(0,R.jsx)("div",{className:(0,l.default)(D.progress,"light"===r&&D.progressLight,"dark"===r&&D.progressDark),style:{transform:`translateX(${100*s-100}%)`}})})}},92745:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.SearchQuery=t.SEARCH_EVENT=void 0;var n=s(a(39693)),i=s(a(44908)),r=s(a(34342));const o="SEARCH_EVENT";t.SEARCH_EVENT=o;class l extends r.default{constructor(){super(...arguments),this.query="",this.filter={}}get trimmed(){return this.query.trim()}get highlighted(){const e=this.trimmed.toLowerCase().split(" ");return(0,i.default)((0,n.default)(e))}get _isEmptySearchTerm(){return""===this.trimmed||!this.trimmed}get isEmptyQuery(){return this._isEmptySearchTerm&&!this.filter.kind&&!this.filter.label}updateQuery(e){const t=this.query;this.query=e,e.trim()!==t&&this.trigger(o)}updateLabelQuery(e){this.filter=e||{}}clear(){this.updateQuery("")}}t.SearchQuery=l},55712:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InvisibleLabel=function(e){let{children:t}=e;return(0,s.jsx)("span",{"aria-label":t})},t.accessibleClickableButtonProps=void 0;var s=a(85893);t.accessibleClickableButtonProps=e=>{let{onClick:t,disabled:a}=e;const s=e=>t&&t(e);return{onClick:e=>{!0!==a&&s(e)},onKeyPress:e=>{("Enter"===e.key||" "===e.key||"Spacebar"===e.key||13===e.which||32===e.which)&&(e.preventDefault(),s(e))},disabled:a,tabIndex:!0===a?-1:0,role:"button"}}},22402:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(50796),r=n(a(45095)),o=n(a(48360)),l=a(67294),d=a(46331),u=n(a(9712)),c=a(88102),h=n(a(52665)),f=n(a(69618)),p=n(a(77835)),m=n(a(65640)),_=s(a(64103)),g=a(83610),v=a(99234),C=a(7293),S=a(57701),y=a(18685),b=n(a(3222)),E=n(a(43725)),T=a(84387),x=n(a(92417)),M=n(a(87868)),P=n(a(11339)),A=n(a(21398)),I=n(a(69589)),w=a(13705),k=a(68303),j=a(59992),N=a(10236),O=a(13923),R=a(50452),D=a(9609),L=n(a(56891)),B=a(77591),F=a(85893);function G(e){switch(e){case 1:return E.default.t(502);case 8:return E.default.t(504);case 24:return E.default.t(501);case 168:return E.default.t(503);default:return __LOG__(2)`DoNotDisturbSettings:globalMuteDurationLabel non standard global mute duration:${e}`,E.default.t(500)}}function U(e){switch(e){case 1:return E.default.t(506);case 8:return E.default.t(508);case 24:return E.default.t(505);case 168:return E.default.t(507);default:return __LOG__(2)`DoNotDisturbSettings:getMuteAllCallDurationLabel non standard global mute duration:${e}`,E.default.t(497)}}class V extends l.PureComponent{constructor(){var e;super(...arguments),e=this,this._onAttachProduct=e=>{let{product:t,onSend:a}=e;c.Cmd.openModal((0,F.jsx)(k.SendProductFlowLoadable,{product:t,onSend:a}),{transition:"modal-flow",uim:this.props.uim})},this._onProductImageViewer=(e,t)=>{c.Cmd.openModalMedia((0,F.jsx)(I.default,{activeProductImage:e.activeProductImage,productImageCollection:e.productImageCollection,getZoomNode:e.getZoomNode,product:e.product,sessionId:t}),{transition:"media-viewer",uim:this.props.uim})},this.openGroupV4InviteRequestFlow=(e,t,a,s)=>{c.Cmd.openModal((0,F.jsx)(y.GroupV4InviteFlowLoadable,{participantNeedInvite:e,groupGid:t,subject:a,groupDesc:s}))},this.onToggleMute=(e,t)=>{if(t){const t=E.default.t(880,{name:e.title()});c.Cmd.openModal((0,F.jsx)(A.default,{title:t,mute:e.mute,onMute:t=>{e.pendingAction++,e.mute.mute(t,!0).finally((()=>{e.pendingAction--})),(e.isBusinessGroup||e.contact.isBusiness)&&(new P.default.BusinessMute).commit()}}),{transition:"modal",uim:this.props.uim})}else e.pendingAction++,e.mute.unmute(!0).finally((()=>{e.pendingAction--})),(e.isBusinessGroup||e.contact.isBusiness)&&(new P.default.BusinessUnmute).commit()},this._onToggleMuteAll=(e,t,a)=>{let s=E.default.t(1358),n=E.default.t(510),i=o.default._("Enable sounds and notifications?",null,{hk:"4B6qY1"});if(a&&(s=E.default.t(1360),n=E.default.t(1134),i=o.default._("Enable sounds and notifications for Reactions?",null,{hk:"4bKMS6"})),t)c.Cmd.openModal((0,F.jsx)(A.default,{mute:e,title:s,onMute:(t,a)=>{e.mute(t),c.Cmd.openToast((0,F.jsx)(R.Toast,{msg:G(a),id:(0,R.genId)()}))},muteAll:!0}),{transition:"modal",uim:this.props.uim});else{const t=()=>{e.unmute(),c.Cmd.closeModal(),c.Cmd.openToast((0,F.jsx)(R.Toast,{msg:n,id:(0,R.genId)()}))};c.Cmd.openModal((0,F.jsx)(h.default,{onOK:t,okText:E.default.t(47),onCancel:()=>c.Cmd.closeModal(),cancelText:E.default.t(1574),children:i}))}},this._onToggleMuteAllCall=(e,t)=>{t?c.Cmd.openModal((0,F.jsx)(A.default,{mute:e,title:E.default.t(1356),onMute:(t,a)=>{e.muteCall(t),c.Cmd.openToast((0,F.jsx)(R.Toast,{msg:U(a),id:(0,R.genId)()}))},muteAll:!0}),{transition:"modal",uim:this.props.uim}):c.Cmd.openModal((0,F.jsx)(h.default,{onOK:()=>{e.unmuteCall(),c.Cmd.closeModal(),c.Cmd.openToast((0,F.jsx)(R.Toast,{msg:E.default.t(499),id:(0,R.genId)()}))},okText:E.default.t(47),onCancel:()=>c.Cmd.closeModal(),cancelText:E.default.t(1574),children:o.default._("Enable desktop incoming calls?",null,{hk:"1oiZtT"})}))},this.onDeleteOrExit=e=>{var t;const a=t=>{e.pendingAction++,t.finally((()=>{e.pendingAction--}))},s=e.isGroup&&e.isReadOnly||e.isUser||e.isBroadcast,n=()=>c.Cmd.openModal((0,F.jsx)(m.default,{chat:e,onDeleteOrExit:a,isDelete:s}),{transition:"modal",uim:this.props.uim}),i=null!==(t=(0,r.default)(x.default,"localStorage").getItem(f.default.KEY_SYNCD_FIRST_CLEAR_OR_DELETE))&&void 0!==t?t:"true";if(C.GK.supportsFeature(C.GK.F.MD_BACKEND)&&s&&"true"===i){const e=(0,S.clearOrDeleteChatSyncEnabled)()?E.default.t(1725):E.default.t(1723);c.Cmd.openModal((0,F.jsx)(h.default,{title:E.default.t(1724),onOK:()=>{(0,r.default)(x.default,"localStorage").setItem(f.default.KEY_SYNCD_FIRST_CLEAR_OR_DELETE,"false"),n()},okText:E.default.t(1593),onCancel:()=>c.Cmd.closeModal(),children:(0,F.jsx)(O.TextDiv,{theme:"muted",children:e})}))}else n()},this.onPin=(e,t)=>{C.GK.supportsFeature(C.GK.F.MD_BACKEND)&&!(0,S.pinChatSyncEnabled)()?c.Cmd.openModal((0,F.jsx)(h.default,{title:E.default.t(1741),onOK:()=>{c.Cmd.closeModal()},okText:E.default.t(1585),children:E.default.t(1740)})):(e.pendingAction++,(0,N.setPin)(e,t).catch((()=>{})).finally((()=>{e.pendingAction--})))},this.onClear=e=>{var t;const a=()=>c.Cmd.openModal((0,F.jsx)(u.default,{chat:e}),{transition:"modal",uim:this.props.uim}),s=null!==(t=(0,r.default)(x.default,"localStorage").getItem(f.default.KEY_SYNCD_FIRST_CLEAR_OR_DELETE))&&void 0!==t?t:"true";if(C.GK.supportsFeature(C.GK.F.MD_BACKEND)&&"true"===s){const e=(0,S.clearOrDeleteChatSyncEnabled)()?E.default.t(1725):E.default.t(1723);c.Cmd.openModal((0,F.jsx)(h.default,{title:E.default.t(1724),onOK:()=>{(0,r.default)(x.default,"localStorage").setItem(f.default.KEY_SYNCD_FIRST_CLEAR_OR_DELETE,"false"),a()},okText:E.default.t(1593),onCancel:()=>c.Cmd.closeModal(),children:(0,F.jsx)(O.TextDiv,{theme:"muted",children:e})}))}else a()},this.onArchive=(e,t,a)=>{e.pendingAction++,(0,j.setArchive)(e,t,a).catch((()=>{})).finally((()=>{e.pendingAction--}))},this.onMarkUnread=(e,t)=>{e.pendingAction++,(0,D.markUnread)(e,t).finally((()=>{e.pendingAction--}))},this._onSendStarMsgs=function(t,a,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"LEFT";if(!a)return Promise.reject(new _.ActionError);if(a.some((e=>!e.id)))return Promise.reject(new _.ActionError);const r=s||(0,d.genId)(),o=a.length,l={count:o,_plural:o},u=new d.ActionType(E.default.t(96,l)),h=t.sendStarMsgs(a,!0).then((()=>new d.ActionType(E.default.t(95,l),{actionText:E.default.t(143),actionHandler:e._onSendUnstarMsgs.bind(e,t,a,r,n)}))).catch((0,i.filteredCatch)(B.ServerStatusCodeError,(e=>e.status>=400?t.isEphemeralSettingOn()?new d.ActionType(E.default.t(93,l)):new d.ActionType(E.default.t(94,l)):void 0))).catch((()=>(__LOG__(3)`chatAction:sendStarMsgs dropped`,new d.ActionType(E.default.t(94,l),{actionText:E.default.t(139),actionHandler:e._onSendStarMsgs.bind(e,t,a,r,n)}))));return c.Cmd.openToast((0,F.jsx)(d.ActionToast,{id:r,toastPosition:n,initialAction:u,pendingAction:h})),h},this._onSendUnstarMsgs=function(t,a,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"LEFT";if(!a)return Promise.reject(new _.ActionError);if(a.some((e=>!e.id)))return Promise.reject(new _.ActionError);const r=s||(0,d.genId)(),o=a.length,l={count:o,_plural:o},u=new d.ActionType(E.default.t(102,l)),h=t.sendStarMsgs(a,!1).then((()=>new d.ActionType(E.default.t(100,l),{actionText:E.default.t(143),actionHandler:e._onSendStarMsgs.bind(e,t,a,r,n)}))).catch((0,i.filteredCatch)(B.ServerStatusCodeError,(e=>e.status>=400?t.isEphemeralSettingOn()?new d.ActionType(E.default.t(98,l)):new d.ActionType(E.default.t(99,l)):void 0))).catch((()=>(__LOG__(3)`chatAction:sendUnstarMsgs dropped`,new d.ActionType(E.default.t(99,l),{actionText:E.default.t(139),actionHandler:e._onSendUnstarMsgs.bind(e,t,a,r,n)}))));return c.Cmd.openToast((0,F.jsx)(d.ActionToast,{id:r,toastPosition:n,initialAction:u,pendingAction:h})),h},this._onSendDeleteMsgs=function(t,a,s,n){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"LEFT";if(!a)return Promise.reject(new _.ActionError);if(a.some((e=>!e.id)))return Promise.reject(new _.ActionError);const r=a.length,o=n||(0,d.genId)();let l={count:r,_plural:r};const u=new d.ActionType(E.default.t(92,l)),h=t.sendDeleteMsgs(a,s).then((e=>{if(e===r)return new d.ActionType(E.default.t(91,l));{const t=r-e;return l={count:t,_plural:t},new d.ActionType(E.default.t(90,l))}})).catch((()=>(__LOG__(3)`chatAction:sendDeleteMsgs dropped`,new d.ActionType(E.default.t(90,l),{actionText:E.default.t(139),actionHandler:e._onSendDeleteMsgs.bind(e,t,a,!1,o,i)}))));return c.Cmd.openToast((0,F.jsx)(d.ActionToast,{id:o,toastPosition:i,initialAction:u,pendingAction:h})),h},this._onSendRevokeMsgs=(e,t,a)=>{var s,n;const{type:i,clearMedia:r}=a,o=null!==(s=a.toastId)&&void 0!==s?s:(0,d.genId)(),l=null!==(n=a.toastPosition)&&void 0!==n?n:"LEFT";if(!t)return Promise.reject(new _.ActionError);const u=e=>{switch(i){case c.Revoke.Sender:return e.canSenderRevoke();case c.Revoke.Admin:return e.canAdminRevoke()}},[h,p]=t.reduce(((e,t)=>{const[a,s]=[u(t),t.type!==f.default.MSG_TYPE.GROUPS_V4_INVITE||t.isGroupsV4InviteExpired?null:t];return[e[0]||!a,e[1]||s]}),[!1,null]);if(h||i===c.Revoke.Admin&&t.length>1)return Promise.reject(new _.ActionError);p&&this._handleGroupInviteMsgRevoke(e,p);const m=t.length,g={count:m,_plural:m},v=new d.ActionType(E.default.t(92,g)),C=e.sendRevokeMsgs(t,i,r).then((e=>{const t=e.filter((e=>e!==w.SendMsgResult.OK)).length;if(t>0)throw new Error(`${t} / ${e.length} dropped`);return new d.ActionType(E.default.t(91,g))})).catch((()=>(__LOG__(3)`chatAction:sendRevokeMsgs fail`,e.isEphemeralSettingOn()?new d.ActionType(E.default.t(89,g)):new d.ActionType(E.default.t(90,g)))));return c.Cmd.openToast((0,F.jsx)(d.ActionToast,{id:o,toastPosition:l,initialAction:v,pendingAction:C})),C},this._handleGroupInviteMsgRevoke=(e,t)=>{if(C.GK.supportsFeature(C.GK.F.MD_BACKEND))throw new Error("This call is only supported in non-MD mode");const a=t.inviteGrp,s=(0,v.getMaybeMeUser)().toString();L.default.revokeGroupV4Invite([t.to.toString()],a,s)},this._handleShowMerchantDetailsEntityTypePopup=(e,t)=>{c.Cmd.openModal((0,F.jsx)(M.default,{legalEntityDetails:e,onSave:t}),{transition:"modal",uim:this.props.uim})},this._handleShowCountrySelector=(e,t,a,s)=>{c.Cmd.openModal((0,F.jsx)(p.default,{title:e,countryCode:t,countries:a,onSave:s}),{transition:"modal",uim:this.props.uim})}}componentDidMount(){this.props.listeners.add(c.Cmd,"mute_all",this._onToggleMuteAll),this.props.listeners.add(c.Cmd,"mute_all_call",this._onToggleMuteAllCall),this.props.listeners.add(c.Cmd,"mute_chat",this.onToggleMute),this.props.listeners.add(c.Cmd,"delete_or_exit_chat",this.onDeleteOrExit),this.props.listeners.add(c.Cmd,"archive_chat",this.onArchive),this.props.listeners.add(c.Cmd,"clear_chat",this.onClear),this.props.listeners.add(c.Cmd,"mark_chat_unread",this.onMarkUnread),this.props.listeners.add(c.Cmd,"pin_chat",this.onPin),this.props.listeners.add(c.Cmd,"send_star_msgs",this._onSendStarMsgs),this.props.listeners.add(c.Cmd,"send_unstar_msgs",this._onSendUnstarMsgs),this.props.listeners.add(c.Cmd,"send_delete_msgs",this._onSendDeleteMsgs),this.props.listeners.add(c.Cmd,"send_revoke_msgs",this._onSendRevokeMsgs),this.props.listeners.add(c.Cmd,"product_image_viewer_modal",this._onProductImageViewer),this.props.listeners.add(c.Cmd,"attach_product",this._onAttachProduct),this.props.listeners.add(c.Cmd,"open_group_v4_invite_request_flow",this.openGroupV4InviteRequestFlow),this.props.listeners.add(c.Cmd,"show_merchant_details_entity_type_popup",this._handleShowMerchantDetailsEntityTypePopup),this.props.listeners.add(c.Cmd,"show_country_selector_popup",this._handleShowCountrySelector),this.props.listeners.add(c.Cmd,"add_favorite_sticker",g.addStickerMsgToFavorites),this.props.listeners.add(c.Cmd,"remove_favorite_sticker",g.removeStickerMsgFromFavorites)}render(){return null}}V.displayName="ActionListener";var H=(0,b.default)((0,T.ListenerHOC)(V));t.default=H},91962:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(48926)),i=a(89385),r=a(13959),o=s(a(41143)),l=a(67294),d=s(a(70714)),u=a(88102),c=a(50338),h=s(a(84644)),f=s(a(8694)),p=s(a(59578)),m=s(a(75426)),_=a(85893);const g={duration:300,easing:[.1,.82,.25,1]};class v extends l.Component{constructor(){super(...arguments),this.containerHeight=0,this._childAnimations=[],this.didCancel=!1,this._unmounting=!1,this.state={children:this.props.children},this._refChildren=new Map,this._setRefChild=(e,t)=>{t?this._refChildren.set(e,t):this._refChildren.delete(e)},this._setChildRefCache=new p.default(this._setRefChild),this._heightCallbackCache=new Map}componentWillUnmount(){this._unmounting=!0}_getHeightChange(e,t){return e.reduce(((e,a)=>{if(a<t)return e;const s=this._refChildren.get(`${a}`);return s?e+s.clientHeight:e}),0)}_animateElement(e,t,a,s){var n;this._childAnimations[e]&&(this.didCancel=!0,this._childAnimations[e].controller.abort());const o=a>0?[0,a]:[-a,0],l=new d.default,c=((null===(n=this._childAnimations[e])||void 0===n?void 0:n.promise)||Promise.resolve()).then((()=>(0,m.default)(t,{translateY:o},g))).then((()=>(0,r.delayMs)(100))),f=(0,h.default)(c,l.signal).then((()=>{if(l.signal.aborted)throw new i.AbortError;return a<0&&(s.includes(e)?t.style.opacity="0":t.style.transform=""),e})).catch((0,i.catchAbort)((()=>((0,m.default)(t,"stop",!0),t.style.transform="",!1)))).finally((t=>{if(!this.didCancel)return delete this._childAnimations[e],u.Cmd.setUiBusy(!1,"animation_group"),t;this.didCancel=!1}));return this._childAnimations[e]={promise:f,controller:l},f}_transitionAffected(e,t){var a=this;return(0,n.default)((function*(){if(!e)return Promise.resolve(new Set);const s=[],[n]=e.slice(-1);for(let i=0;i<=n;++i){const n=a._refChildren.get(`${i}`);n&&s.push(a._animateElement(i,n,(t?1:-1)*a._getHeightChange(e,i),e))}const i=yield Promise.all(s);return new Set(i.filter((e=>!1!==e)))}))()}_notifyHeightChange(e,t){e.length&&this.props.onHeightChange&&this.props.onHeightChange((t?1:-1)*this._getHeightChange(e,0))}static getDerivedStateFromProps(e,t){const a=e.children,s=t.children;let n=!1;const i=s.map(((e,t)=>{var s;const i=null!==(s=a[t])&&void 0!==s?s:e;return i!==e&&(n=!0),i}));return n?{children:i}:null}componentDidUpdate(e,t){const a=this.state.children,s=t.children;(0,o.default)(a.length===s.length&&this.props.children.length===a.length,"The number of children in an AnimationGroup must remain constant. Render null for children you don't want to appear.");const n=a.map(((e,t)=>t)),i=n.filter((t=>null!=this.props.children[t]&&null==e.children[t])),r=n.filter((t=>null==this.props.children[t]&&null!=e.children[t]));r.length>0&&(r.forEach((()=>{this.busyId=c.UIBusyTasks.setBusy(this.busyId),u.Cmd.setUiBusy(!0,"animation_group")})),this._notifyHeightChange(r,!1),this._transitionAffected(r,!1).then((e=>{this._unmounting||0!==e.size&&this.setState((t=>({children:t.children.map(((t,a)=>e.has(a)?null:t))})),(()=>{c.UIBusyTasks.decBusy(this.busyId)}))}))),i.length>0&&(i.forEach((()=>{this.busyId=c.UIBusyTasks.setBusy(this.busyId),u.Cmd.setUiBusy(!0,"animation_group")})),this._notifyHeightChange(i,!0),this._transitionAffected(i,!0).then((()=>{c.UIBusyTasks.decBusy(this.busyId)})))}componentDidMount(){const e=this.state.children.reduce(((e,t,a)=>{const s=this._refChildren.get(`${a}`);return s?(s.style.transform="translateY(0)",e+s.clientHeight):e}),0);this.props.onHeightChange(e,!0)}_childHeightCallback(e){const t=this._heightCallbackCache.get(e);if(t)return t;const a=this._refChildren.get(`${e}`);let s=a?a.clientHeight:0;const n=e=>{let{height:t}=e;s&&t&&t!==s?(this.props.onHeightChange(t-s),s=t):s=t};return this._heightCallbackCache.set(e,n),n}_cloneChild(e,t){if(!e)return e;const a=this._setChildRefCache.getRefSetter(`${t}`);return(0,l.cloneElement)(e,{ref:a})}render(){return this.state.children.map(((e,t)=>(0,_.jsx)(f.default,{onResize:this._childHeightCallback(t),children:this._cloneChild(e,t)},`.${t}`)))}}t.default=v,v.displayName="AnimationGroup"},79013:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(67294),n=a(85893);function i(e,t){let{children:a}=e;return(0,n.jsx)("div",{ref:t,children:a})}var r=(0,s.forwardRef)(i);t.default=r},62190:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{annotations:t,onTooltipDisplay:a,onTooltipDismiss:s}=e,[_,v]=(0,r.useState)(null),S=()=>{v(null),s&&s()},b=(e,t,s)=>{if(null==t&&null==s)return;const{location:r}=e,h=(0,c.getMapUrl)((0,i.default)(r.degreesLatitude,"location.degreesLatitude"),(0,i.default)(r.degreesLongitude,"location.degreesLongitude"));let f={menu:(0,g.jsx)(d.ExternalLink,{href:h,className:(0,o.default)(C),onClick:S,children:u.default.t(1223)}),type:l.MenuType.tooltip,dirX:l.DirX.RIGHT,dirY:l.DirY.TOP};f=null!=t?(0,n.default)((0,n.default)({},f),{},{event:t,autoFocus:!1,offsetX:0,offsetY:0}):(0,n.default)((0,n.default)({},f),{},{anchor:s,autoFocus:!0}),v(f),a&&a()},E=(0,m.default)((()=>{S()}),100);if(!t.length)return null;const T=_&&(0,g.jsx)(f.UIE,{displayName:"InteractiveAnnotationTooltip",popable:!0,escapable:!0,requestDismiss:S,requestRecentFocusOnUnmount:!1,children:(0,g.jsx)(p.default,{tooltip:_})});return(0,g.jsxs)(g.Fragment,{children:[t.map((e=>function(e){const{polygonVertices:t,location:a}=e,[s,,n]=t;return null!=s&&null!=s.x&&null!=s.y&&null!=n&&null!=n.x&&null!=n.y&&(null!=a.degreesLatitude&&null!=a.degreesLongitude)}(e)&&(0,g.jsx)(y,{annotation:e,onClick:t=>((e,t)=>{e.stopPropagation(),b(t,e)})(t,e),onKeyDown:t=>((e,t)=>{" "!==e.key&&"Enter"!==e.key||(e.preventDefault(),b(t,null,e.target))})(t,e)},function(e){const[t,,a]=e.polygonVertices;return`${(0,i.default)(t.x,"topLeft.x")}:${(0,i.default)(t.y,"topLeft.y")}:${(0,i.default)(a.x,"bottomRight.x")}:${(0,i.default)(a.y,"bottomRight.y")}`}(e)))),T,(0,g.jsx)(h.default,{onResize:E})]})};var n=s(a(81109)),i=s(a(45095)),r=a(67294),o=s(a(56720)),l=a(60811),d=a(12591),u=s(a(43725)),c=a(54586),h=s(a(8694)),f=a(18644),p=s(a(46780)),m=s(a(81559)),_=s(a(59909)),g=a(85893);const v={position:"lhggkp7q",zIndex:"thghmljt"},C={display:"f804f6gw",paddingTop:"eujn52yf",paddingEnd:"f9ovudaz",paddingBottom:"ckm995li",paddingStart:"gx1rr48f",fontSize:"bjmq0orh"};function S(e,t){if(null==e)return null;const a=e.parentNode;if(!(null!=a&&a instanceof HTMLElement))return null;let[s,n,r]=t.polygonVertices;(0,i.default)(s.x,"topLeft.x")!==(0,i.default)(n.x,"topRight.x")&&(0,i.default)(n.y,"topRight.y")!==(0,i.default)(r.y,"bottomRight.y")||([,s,n,r]=t.polygonVertices);const o=(0,i.default)(s.x,"topLeft.x"),l=(0,i.default)(s.y,"topLeft.y"),d=(0,i.default)(n.x,"topRight.x"),u=(0,i.default)(n.y,"topRight.y"),c=(0,i.default)(r.y,"bottomRight.y"),h=o*a.offsetWidth,f=l*a.offsetHeight,p=a.offsetWidth*(o-d),m=a.offsetHeight*(l-u),_=o>d?Math.PI:0,g=p?Math.atan(m/p)+_:0,v=180*g/Math.PI,C=Math.abs(p/Math.cos(g)),S=Math.abs(a.offsetHeight*(c-u)/Math.cos(g));return{left:Math.round(h),top:Math.round(f),width:Math.round(C),height:Math.round(S),transform:`rotate(${v}deg)`,transformOrigin:"top left"}}function y(e){const{annotation:t}=e,a=(0,_.default)(),s=(0,r.useRef)(null);return(0,r.useEffect)((()=>{a()}),[]),(0,g.jsx)("div",{ref:s,className:(0,o.default)(v),style:S(s.current,t),onClick:a=>e.onClick(a,t),onKeyDown:a=>e.onKeyDown(a,t),role:"button","aria-label":t.location.name,tabIndex:"0"})}},24935:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{disabled:t}=e,a=(0,r.useModelValues)(e.chat,["archive"]),s=e.onArchive.bind(null,!a.archive);return(0,o.jsx)(n.DropdownItem,{a8n:"mi-archive",action:s,disabled:t,children:a.archive?i.default.t(1363):i.default.t(152)},"ArchiveMenuItem")};var n=a(71174),i=s(a(43725)),r=a(49082),o=a(85893)},46918:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{className:t}=e;return(0,o.jsx)("div",{className:(0,n.default)((0,i.default)(l),t),children:(0,o.jsx)(r.Spinner,{size:50,stroke:3,color:"solidwhite"})})};var n=s(a(94184)),i=s(a(56720)),r=a(11054),o=a(85893);const l={position:"lhggkp7q",top:"qq0sjtgm",start:"tkdu00h0",display:"p357zi0d",alignItems:"gndfcl4n",justifyContent:"ac2vgrno",width:"ln8gz9je",height:"ppled2lx",backgroundColor:"epdck8xl",borderTopStartRadius:"g9p5wyxn",borderTopEndRadius:"i0tg5vk9",borderBottomEndRadius:"aoogvgrq",borderBottomStartRadius:"o2zu3hjb"}},80252:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{theme:t,svg:a}=e,s=(0,n.default)(i.default.badge,{[i.default.pending]:"pending"===t,[i.default.warning]:"warning"===t}),l=a?(0,o.jsx)(r.default,{className:i.default.icon,name:a}):null;return(0,o.jsx)("div",{className:s,children:l})};var n=s(a(94184)),i=s(a(98676)),r=s(a(23217)),o=a(85893)},96021:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(48926)),i=a(89385),r=a(67294),o=a(76716),l=s(a(32709)),d=a(65127),u=s(a(92741)),c=a(85893);class h extends r.PureComponent{constructor(){super(...arguments),this.refVideo=null,this._autoPlayErrorCount=0,this.onPlaying=()=>{const e=this.refVideo;e&&(e.paused||null!=e.videoHeight&&e.videoHeight>0&&null!=e.videoWidth&&e.videoWidth>0&&this.props.onPlaying&&this.props.onPlaying())},this._onceAutoplay=()=>{const e=this.refVideo;if(e&&(e.removeEventListener("playing",this._onceAutoplay),!e.videoHeight||!e.videoWidth)){this.pause(),this.play();const e=6;let t;this._autoPlayErrorCount<e&&this._autoPlayErrorCount++,this._autoPlayErrorCount>1&&this._autoPlayErrorCount<e&&(t=`the height and width of the video is not zero, count (larger than 1): ${this._autoPlayErrorCount}`),this._autoPlayErrorCount>=e&&(t=`the height and width of the video is not zero, count larger than ${this._autoPlayErrorCount}`),t&&(__LOG__(4,void 0,new Error,!0)`Assertion failed! ${t}`,SEND_LOGS("non-zero height and width"))}},this.setupAutoplay=(e,t)=>{this.props.autoPlay&&(e.removeEventListener("playing",this._onceAutoplay),e.addEventListener("playing",this._onceAutoplay),(e.srcObject||t&&e.paused)&&this.play())},this.setRefVideo=e=>{var t;e!==this.refVideo&&(this.refVideo&&this.refVideo.removeEventListener("playing",this.onPlaying),null===(t=this._unregisterFromAudioChannel)||void 0===t||t.call(this),this.refVideo=e,e&&(this._unregisterFromAudioChannel=o.MainAudioChannel.registerMedia(e),"srcObject"in e&&this.props.srcObject?e.srcObject=this.props.srcObject:e.src||__LOG__(3)`srcObject is not supported in video tag while src is not set.`,e&&e.addEventListener("playing",this.onPlaying),this.props.autoPlay&&this.setupAutoplay(e,d.UA.isGecko||d.UA.isSafari)))},this.getVolume=()=>this.refVideo?this.refVideo.volume:0,this.setVolume=e=>{this.refVideo&&(this.refVideo.volume=e)},this.getMuted=()=>!!this.refVideo&&this.refVideo.muted,this.setMuted=e=>{this.refVideo&&(this.refVideo.muted=e)},this.getPaused=()=>!this.refVideo||this.refVideo.paused,this.getCurrentTime=()=>this.refVideo?this.refVideo.currentTime:0,this.setCurrentTime=e=>{this.refVideo&&(this.refVideo.currentTime=e)},this.getDuration=()=>this.refVideo?this.refVideo.duration:0,this.setDuration=e=>{this.refVideo&&(this.refVideo.duration=e)},this.getBuffered=()=>this.refVideo?this.refVideo.buffered:null}_play(){var e=this;return(0,n.default)((function*(){const t=e.refVideo;if(!t)return Promise.reject(new Error("cannot play unmounted video"));if(!t.paused)return Promise.resolve();t.removeEventListener("playing",e.onPlaying);try{yield(0,l.default)(t),t&&t.addEventListener("playing",e.onPlaying),e.onPlaying()}catch(r){var a,s,n;if(t&&t.addEventListener("playing",e.onPlaying),r.name===i.ABORT_ERROR)return void __LOG__(3)`video.play() promise rejected w/ AbortError: ${r.message}, error code: ${r.code}`;const o=(null===(a=e.refVideo)||void 0===a||null===(s=a.error)||void 0===s?void 0:s.message)?e.refVideo.error.message:"",l=(null===(n=e.refVideo)||void 0===n?void 0:n.error)?e.refVideo.error.code:"";__LOG__(3)`video.play() promise rejected: ${o} The error code is ${l}.`,e.props.onError&&e.props.onError(r)}}))()}pause(){const e=this.refVideo;e&&(e.paused||e.pause())}underlyingVideo(){return this.refVideo}componentWillUnmount(){var e;null===(e=this._unregisterFromAudioChannel)||void 0===e||e.call(this)}componentDidUpdate(e){const t=this.refVideo;null!=t&&this.props.autoPlay&&!e.autoPlay&&this.setupAutoplay(t,!0)}pauseAndReset(){const e=this.refVideo;e&&(e.currentTime=0,this.pause())}play(){this._play()}render(){return(0,c.jsx)("video",{ref:this.setRefVideo,autoPlay:this.props.src?this.props.autoPlay:void 0,className:this.props.className?this.props.className:u.default.video,controls:this.props.controls,height:this.props.height,loop:this.props.loop,muted:this.props.muted,poster:this.props.poster,src:this.props.src?this.props.src:void 0,width:this.props.width,onClick:this.props.onClick,onAbort:this.props.onAbort,onCanPlay:this.props.onCanPlay,onCanPlayThrough:this.props.onCanPlayThrough,onDurationChange:this.props.onDurationChange,onEmptied:this.props.onEmptied,onEncrypted:this.props.onEncrypted,onEnded:this.props.onEnded,onError:this.props.onError,onLoadedData:this.props.onLoadedData,onLoadedMetadata:this.props.onLoadedMetadata,onLoadStart:this.props.onLoadStart,onPause:this.props.onPause,onPlay:this.props.onPlay,onProgress:this.props.onProgress,onRateChange:this.props.onRateChange,onSeeked:this.props.onSeeked,onSeeking:this.props.onSeeking,onStalled:this.props.onStalled,onSuspend:this.props.onSuspend,onTimeUpdate:this.props.onTimeUpdate,onVolumeChange:this.props.onVolumeChange,onWaiting:this.props.onWaiting,children:this.props.children})}}t.default=h,h.displayName="BaseVideo"},22245:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return(0,i.jsx)("div",{className:n.default.border})};var n=s(a(22301)),i=a(85893)},44356:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(99964)),i=s(a(94184)),r=s(a(80031)),o=a(85893);var l=e=>{var t;const a=Boolean("disabled"!==e.theme&&(e.onClick||e.onMouseDown||e.onMouseEnter||e.onMouseOver)),s=(0,i.default)(e.className,r.default.chat,{[r.default.chatInteractive]:a,[r.default.cartProduct]:"cart-product"===e.theme,[r.default.themeCheckbox]:e.checkbox||"chat-checkbox"===e.theme||"label-list"===e.theme||"chat-checkbox-no-delete"===e.theme||"cell-message-checkbox"===e.theme,[r.default.themeDrawerList]:"drawer-list"===e.theme||"new-chat-info"===e.theme,[r.default.themeNewChatInfo]:"new-chat-info"===e.theme,[r.default.themeIdentity]:"identity"===e.theme,[r.default.themeListNames]:"list-names"===e.theme||"list-names-no-delete"===e.theme,[r.default.themeMessage]:"cell-message"===e.theme||"cell-message-checkbox"===e.theme,[r.default.themePlain]:"plain"===e.theme,[r.default.themeSearch]:"chat-search"===e.theme,[r.default.themeStatus]:"status-list"===e.theme,[r.default.themeLabel]:"label-selection"===e.theme,[r.default.themeAddItem]:"add-item"===e.theme,[r.default.themeAddItemPlaceholder]:"add-item-placeholder"===e.theme,[r.default.idle]:e.idle,[r.default.member]:"group-modal"===e.theme||"chat-checkbox-no-delete"===e.theme,[r.default.unread]:!!e.unread,[r.default.chatDrag]:!!e.dragging,[r.default.active]:!!e.active,[r.default.isMuted]:!!e.isMuted,[r.default.groupV4Invite]:"group_v4_invite"===e.theme,[r.default.product]:"product"===e.theme||"product-out-of-stock"===e.theme||"product-of-collection"===e.theme||"collection-header"===e.theme||"collection-edit"===e.theme,[r.default.productOfCollection]:"product-of-collection"===e.theme,[r.default.productOutOfStock]:"product-out-of-stock"===e.theme,[r.default.collectionEdit]:"collection-edit"===e.theme,[r.default.collectionHeader]:"collection-header"===e.theme,[r.default.orderProduct]:"order-product"===e.theme,[r.default.media]:"media"===e.theme,[r.default.listButton]:"list-button-compact"===e.theme,[r.default.listMsg]:"list-msg"===e.theme,[r.default.archivePanel]:"archive-panel"===e.theme,[r.default.themeRadioButtonRow]:"radio-button-row"===e.theme,[r.default.stickerPack]:"sticker-pack"===e.theme,[r.default.themeReaction]:"reaction"===e.theme,[r.default.disabled]:"disabled"===e.theme});let l;e.image&&(l=e.customImage?e.image:(0,o.jsx)("div",{className:r.default.chatAvatar,children:e.image}));const d=null!=e.primaryDetail?(0,o.jsx)("div",{className:(0,i.default)({[r.default.chatMeta]:!["product","product-out-of-stock","product-of-collection"].includes(e.theme)&&"sticker-pack"!==e.theme}),children:e.primaryDetail}):null;let u,c;null!=e.secondary&&(c=null!=e.secondaryDetail?(0,o.jsx)("div",{role:"gridcell","aria-colindex":"1",className:r.default.chatMeta,children:e.secondaryDetail}):null,u=(0,o.jsxs)("div",{className:r.default.chatSecondary,children:[(0,o.jsx)("div",{className:r.default.chatStatus,children:e.secondary}),c]}));const h=null!=e.detail?(0,o.jsx)("div",{className:(0,i.default)(r.default.chatBody,r.default.chatDetails),children:e.detail}):null,f=null!==(t=e.a8n)&&void 0!==t?t:"chat-card";return(0,o.jsxs)("div",{ref:e.setDivRef,"data-testid":"cell-frame-container","data-a8n":n.default.key(f),className:s,onClick:e.onClick,onMouseDown:e.onMouseDown,onMouseEnter:e.onMouseEnter,onMouseOver:e.onMouseOver,onMouseLeave:e.onMouseLeave,onContextMenu:e.onContextMenu,children:[(0,o.jsx)("div",{className:r.default.image,children:l}),(0,o.jsxs)("div",{className:r.default.chatBody,children:[(0,o.jsxs)("div",{role:"gridcell","aria-colindex":"2",className:(0,i.default)(r.default.chatMain,{[r.default.noDelete]:"list-names-no-delete"===e.theme}),children:[(0,o.jsx)("div",{className:r.default.chatTitle,children:e.primary}),d]}),u]}),h]})};t.default=l},32756:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,i.default)(r.default.chatSubtitle,{[r.default.chatSubtitleHeader]:"title"===e.location});return(0,l.jsx)("div",{"data-a8n":n.default.key("chat-subtitle"),className:t,children:(0,l.jsx)(o.EmojiText,{titlify:!0,className:r.default.chatSubtitleText,direction:"inherit",text:e.text,selectable:!0})})};var n=s(a(99964)),i=s(a(94184)),r=s(a(98150)),o=a(65417),l=a(85893)},16593:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.CHECKBOX_THEME=void 0,t.CheckBox=function(e){let{checked:t,id:a,onChange:s,theme:c,disabled:h,tabIndex:f,stopPropagation:p}=e;const m=(0,n.useRef)(null),_=t&&c===u.PARTIAL,[g,v]=(0,r.default)(),C=(0,o.default)(m,g);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("input",{ref:C,className:(0,i.default)(d.a11yHidden),checked:t,disabled:!!h||void 0,indeterminate:!!_||void 0,onChange:function(e){e.stopPropagation();const t=m.current;null!=t&&t.focus(),s(e)},type:"checkbox",id:a,tabIndex:null!=f?f:0}),(0,l.jsx)("div",{onClick:function(e){p&&e.stopPropagation();const t=m.current;null!=t&&t.click()},className:(0,i.default)(d.checkboxContainer,h&&d.disabledCheckboxContainer,v&&d.itemFocused),tabIndex:-1,"aria-hidden":"true","data-testid":"visual-checkbox",children:(0,l.jsx)("div",{className:(0,i.default)(d.checkbox,t&&d.checkedCheckbox,h&&d.disabledCheckbox),children:(0,l.jsx)("div",{className:(0,i.default)(d.checkmark,t&&c!==u.PARTIAL&&d.checkedCheckmark,!t&&d.uncheckedCheckmark,_&&d.partialCheckmark)})})})]})};var n=a(67294),i=s(a(56720)),r=s(a(97056)),o=s(a(41104)),l=a(85893);const d={checkboxContainer:{position:"g0rxnol2",display:"l7jjieqr",width:"dh5rsm73",height:"hpdpob1j",verticalAlign:"neme6l2y",cursor:"ajgl1lbb",borderTopStartRadius:"dntxsmpk",borderTopEndRadius:"ixn6u0rb",borderBottomEndRadius:"s2vc4xk1",borderBottomStartRadius:"o0wkt7aw",transform:"cgi16xlc"},disabledCheckboxContainer:{cursor:"bx7g2weo"},checkbox:{position:"g0rxnol2",boxSizing:"cm280p3y",height:"ppled2lx",pointerEvents:"m62443ks",backgroundColor:"thr4l2wc",borderTop:"cd4l02zd",borderEnd:"m98q8jdg",borderBottom:"aickbkrb",borderStart:"h0ed51ke",borderTopStartRadius:"dntxsmpk",borderTopEndRadius:"ixn6u0rb",borderBottomEndRadius:"s2vc4xk1",borderBottomStartRadius:"o0wkt7aw",transitionProperty:"cpfmwfku",transitionDuration:"eliz2k8b"},checkedCheckbox:{backgroundColor:"diqd3znl",borderTopColor:"qei0rtf7",borderEndColor:"toeh7gh7",borderBottomColor:"nncek28p",borderStartColor:"br6oik82"},disabledCheckbox:{backgroundColor:"hntizkrm",borderTopColor:"o163osd1",borderEndColor:"cfczyq4y",borderBottomColor:"fkk8pyer",borderStartColor:"g6apb8n0"},checkmark:{position:"lhggkp7q",top:"hdpg1tjz",left:"ptatjang",width:"dj32rci9",height:"g965lu3b",borderTop:"q4zabkcz",borderRight:"q0ohlrvj",borderBottom:"av59jz02",borderLeft:"grf4wkbn",transform:"hir9ny8g"},checkedCheckmark:{opacity:"bs7a17vp",animationName:"b73q89nx",animationTimingFunction:"em5jvqoa",animationFillMode:"a21kwdn3",animationDuration:"ehl15zf9"},uncheckedCheckmark:{opacity:"axi1ht8l"},partialCheckmark:{position:"lhggkp7q",width:"dj32rci9",height:"g965lu3b",borderTop:"q4zabkcz",borderRight:"q0ohlrvj",borderBottom:"thn59n0e",borderLeft:"grf4wkbn",transform:"pdwgdm2l"},a11yHidden:{position:"lhggkp7q",width:"cxec7x23",height:"kanlod6e",overflowX:"gfz4du6o",overflowY:"r7fjleex",clip:"nmeg1xfo",clipPath:"okm7a8wg",whiteSpace:"le5p0ye3"},itemFocused:{borderTopStartRadius:"dntxsmpk",borderTopEndRadius:"ixn6u0rb",borderBottomEndRadius:"s2vc4xk1",borderBottomStartRadius:"o0wkt7aw",boxShadow:"lgxs6e1q"}},u={PARTIAL:"PARTIAL"};t.CHECKBOX_THEME=u},9275:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const[t,a]=(0,n.useState)(!1);let s,u;e.checked?(u=e.radio?"checkbox-round-radio-checked":"checkbox-round-checked",s="checked"):(s="unchecked",u=e.hover?"checkbox-round-unchecked":"checkbox-round-passive");const c=e.checked?[]:[d.uncheckedSvgStyle,!0===e.systemUncheckedColor?d.iconPathFillSecondary:d.iconPathFillWhite,t&&!(!0===e.systemUncheckedColor)&&d.uncheckedSvgHoverStyle],h=(0,n.useCallback)((()=>a(!0)),[]),f=(0,n.useCallback)((()=>a(!1)),[]);return(0,l.jsx)(o.default,{className:(0,i.default)(d.container),transitionName:"pop",children:(0,l.jsx)("div",{className:(0,i.default)(d.roundIcon),onClick:t=>{t&&t.stopPropagation(),e.onChange()},onMouseEnter:h,onMouseOver:h,onMouseLeave:f,children:(0,l.jsx)(r.default,{name:u,iconXstyle:c})},s)})};var n=a(67294),i=s(a(56720)),r=s(a(23217)),o=s(a(41956)),l=a(85893);const d={container:{position:"g0rxnol2",display:"l7jjieqr",width:"m0s4cjtr",height:"jdwybkuq",verticalAlign:"neme6l2y",cursor:"ajgl1lbb",transform:"qlxkrvdn"},roundIcon:{position:"lhggkp7q",top:"qq0sjtgm",start:"tkdu00h0",width:"ln8gz9je",height:"ppled2lx"},uncheckedSvgStyle:{fillOpacity:"hdyxztb8",transitionDuration:"slppp3mo",transitionProperty:"ec3rya3v",transitionTimingFunction:"pu4k07i0"},uncheckedSvgHoverStyle:{fillOpacity:"io7enyfj"},iconPathFillWhite:{color:"qiqvuef5"},iconPathFillSecondary:{color:"pm5hny62"}}},61991:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonType=void 0,t.ChevronButton=function(e){let{type:t,onClick:a,onKeyDown:s,disabled:r,theme:f,overMedia:p}=e;const m=(0,n.default)(i.default.btn,{[i.default.btnMediaPrev]:t===u.Prev,[i.default.btnMediaNext]:t===u.Next,[i.default.disabledBtn]:r,[i.default.overMedia]:p}),_=c[t],g=h[t];return(0,d.jsx)(o.Round,{className:m,onClick:r?null:a,onKeyDown:s,label:_,theme:f,disabled:r,children:(0,d.jsx)(l.default,{name:g,title:_,directional:!0})})};var n=s(a(94184)),i=s(a(25363)),r=s(a(43725)),o=a(82857),l=s(a(23217)),d=a(85893);const u=a(54302).Mirrored(["Prev","Next"]);t.ButtonType=u;const c={Prev:r.default.t(1043),Next:r.default.t(942)},h={Prev:"chevron-left",Next:"chevron-right"}},58654:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(94184)),i=s(a(66034)),r=s(a(69618)),o=s(a(38743)),l=a(85893);var d=e=>{let{children:t,icon:a,secondary:s,theme:d}=e,u=(0,n.default)(o.default.container,{[o.default.inConversation]:"conversation"===d,[o.default.inList]:"list"===d,[o.default.mdChatSearchList]:"md-chat-search-list"===d,[o.default.newChatInfo]:"new-chat-info"===d});if("conversation"===d){const e=i.default.get("defaultPreference");e&&e.wallpaperColor===r.default.DEFAULT_CHAT_WALLPAPER&&(u=(0,n.default)(u,o.default.defaultWallpaper))}const c=a?(0,l.jsx)("div",{className:o.default.icon,children:a}):null,h=null!=s?(0,l.jsx)("div",{className:o.default.secondary,children:s}):null;return(0,l.jsxs)("div",{className:u,children:[c,(0,l.jsxs)("div",{className:o.default.body,children:[(0,l.jsx)("div",{className:o.default.main,children:t}),h]})]})};t.default=d},21535:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createDataLink=function(e){const t=document.createElement("a"),a=s.URL.isBlob(e)||s.URL.isData(e);return t.href=a?e:"",t};var s=a(2541)},39424:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(67294),i=a(63183),r=a(71174),o=s(a(43725)),l=a(49082),d=a(85893);function u(e){const{isReadOnly:t,kind:a}=(0,l.useModelValues)(e.chat,["isReadOnly","kind"]);let s;switch(a){case i.CHAT_KIND.GROUP:s=t?o.default.t(1617):o.default.t(1622);break;case i.CHAT_KIND.BROADCAST:s=o.default.t(1618);break;case i.CHAT_KIND.CHAT:s=o.default.t(387)}return(0,d.jsx)(r.DropdownItem,{a8n:"mi-delete",action:e.onDeleteOrExit,disabled:e.disabled,children:s})}var c=(0,n.memo)(u);t.default=c},88984:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.DETAIL_IMAGE_SIZE=t.DETAIL_IMAGE_QUALITY=void 0,t.DetailImage=function(e){var t;const{id:a,size:s,quality:n,loader:i,onClick:r,onLoad:u,quoted:f,square:m,border:g,waitIdle:y,ephemeralIcon:b,theme:M,alt:P}=e,j=(0,C.default)(),N=(0,d.useMemo)((()=>c.ChatCollection.get(a)),[a]);let O;(0,S.useListener)((null==N?void 0:N.isGroup)?N.groupMetadata:N,"change:ephemeralDuration",j),O="number"==typeof s?s>0?s:T.SMALL:null!=s?s:T.SMALL;const R=n||x.LOW,D={height:w(O),width:w(O)};r&&(D.cursor="pointer");const L=(0,o.default)(h.default.avatar,{[h.default.status_v3]:"status_v3"===M,[h.default.avatarSquare]:m,[h.default.avatarBorder]:g}),B=k(a,f),F=(0,E.jsx)(p.default,{id:a,onComplex:()=>{let e=null;const t=_.ProfilePicThumbCollection.gadd(a);return t&&(e=R===x.HIGH?(0,E.jsx)(A,{profilePicThumb:t,defaultIcon:B,loader:i,onLoad:u,alt:P}):(0,E.jsx)(I,{profilePicThumb:t,defaultIcon:B,loader:i,onLoad:u,alt:P})),(0,E.jsxs)("div",{className:L,style:D,onClick:r,children:[null,e,null]})},waitIdle:y,children:(0,E.jsx)("div",{className:L,style:D,onClick:r,children:B})});let G;null!=b&&(null===(t=c.ChatCollection.get(a))||void 0===t?void 0:t.isEphemeralSettingOn())&&(G=(0,E.jsxs)("div",{className:h.default.wrapper,"aria-label":l.default._("Profile picture, disappearing messages on",null,{hk:"2Riroy"}),children:[(0,E.jsx)("div",{className:(0,o.default)(h.default.badge,{[h.default.chatList]:"chat-list"===b,[h.default.conversationHeader]:"conversation-header"===b}),children:(0,E.jsx)(v.default,{name:"disappearing",className:h.default.badgeIcon})}),F]}));return G||F},t.DetailImageCommon=void 0,t.getDefaultIcon=k,t.getSize=w;var i=n(a(81109)),r=a(57319),o=n(a(94184)),l=n(a(48360)),d=a(67294),u=(n(a(56720)),n(a(46918))),c=a(69951),h=n(a(31680)),f=s(a(64103)),p=(a(99234),n(a(76239))),m=n(a(47065)),_=a(82039),g=a(31019),v=n(a(23217)),C=n(a(59909)),S=a(19529),y=a(49082),b=n(a(39546)),E=a(85893);const T={SMALL:"SMALL",MEDIUM:"MEDIUM",LARGE:"LARGE",AUTO:"AUTO",NONE:"NONE"};t.DETAIL_IMAGE_SIZE=T;const x={LOW:"LOW",HIGH:"HIGH"};t.DETAIL_IMAGE_QUALITY=x;const M={borderTopStartRadius:"g9p5wyxn",borderTopEndRadius:"i0tg5vk9",borderBottomEndRadius:"aoogvgrq",borderBottomStartRadius:"o2zu3hjb"};class P extends d.PureComponent{constructor(e){super(e),this._retriedAfter403=!1,this.state={loading:!0,loaded:!1,showSpinner:!1,profilePicThumbImg:null},this.onLoad=()=>{this._showSpinnerTimeout&&this._showSpinnerTimeout.cancel(),this.setState({loading:!1,loaded:!0}),this.props.onLoad&&this.props.onLoad()},this.onError=e=>{if(this._showSpinnerTimeout&&this._showSpinnerTimeout.cancel(),e instanceof f.ServerStatusError){const{profilePicThumb:t}=this.props;switch(e.status){case 403:t.markStale({eurl:!0}),this._retriedAfter403||(this._retriedAfter403=!0,t.validate());break;case 410:t.markStale()}}this.setState({loading:!1,loaded:!1})},this._enableSpinner="business"!==e.theme,e.loader&&this._enableSpinner&&(this._showSpinnerTimeout=new r.ShiftTimer((()=>{this.setState({showSpinner:!0})})),this._showSpinnerTimeout.onOrAfter(100))}static getDerivedStateFromProps(e,t){return t.profilePicThumbImg!==e.profilePicThumbImg?{loading:!0,loaded:!1,showSpinner:!1,profilePicThumbImg:e.profilePicThumbImg}:{profilePicThumbImg:e.profilePicThumbImg}}componentDidUpdate(e){e.profilePicThumbImg!==this.props.profilePicThumbImg&&this._showSpinnerTimeout&&this._showSpinnerTimeout.onOrAfter(100)}componentWillUnmount(){this._showSpinnerTimeout&&this._showSpinnerTimeout.cancel()}_shouldShowSpinner(){const{profilePicThumb:e,loader:t}=this.props,{loading:a,showSpinner:s}=this.state;return!!this._enableSpinner&&(!!t&&s&&a&&!(!(0,g.unproxy)(e).stale&&!this.props.profilePicThumbImg))}render(){const{profilePicThumbImg:e,spinnerClassName:t,imgClassName:a,alt:s}=this.props,{loading:n,loaded:r}=this.state;let l={[h.default.isLoaded]:!n};a&&(l=(0,i.default)((0,i.default)({},l),{},{[a]:"string"==typeof a}));const d=(0,o.default)(h.default.avatarImage,l);let c,f;this._shouldShowSpinner()&&(c=(0,E.jsx)(u.default,{className:t},"spinner")),e&&(f=(0,E.jsx)(m.default,{src:e,hasPrivacyChecks:!0,crossOrigin:!1,className:d,draggable:!1,onLoad:this.onLoad,onError:this.onError,alt:s},"image"));const p=this.props.defaultIcon;return(0,E.jsxs)(E.Fragment,{children:[c,p,f]})}}function A(e){const t=(0,y.useModelValues)(e.profilePicThumb,["imgFull"]);return(0,E.jsx)(P,(0,i.default)((0,i.default)({},e),{},{profilePicThumbImg:t.imgFull}))}function I(e){const t=(0,y.useModelValues)(e.profilePicThumb,["img"]);return(0,E.jsx)(P,(0,i.default)((0,i.default)({},e),{},{profilePicThumbImg:t.img}))}function w(e){if("string"!=typeof e)return e;switch(e){case T.SMALL:return 49;case T.MEDIUM:return 100;case T.LARGE:return 200;case T.NONE:return;default:throw new Error(`Unsupported size type: ${e}`)}}function k(e,t){let a,s="default-user";b.default.isUser(e)&&!b.default.isPSA(e)&&t?s="default-user-square":b.default.isGroup(e)?s="default-group":b.default.isBroadcast(e)?s="default-broadcast":b.default.isPSA(e)&&(s="default-psa",a=M);return(0,E.jsx)("div",{className:h.default.avatarDefault,children:(0,E.jsx)(v.default,{name:s,iconXstyle:a})},"default")}t.DetailImageCommon=P,P.displayName="DetailImageCommon"},71093:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.Upload=t.Pending=t.Download=t.DocState=void 0;var n=s(a(81109)),i=s(a(56720)),r=a(11054),o=s(a(23217)),l=a(85893);const d={position:"g0rxnol2",display:"p357zi0d",flex:"kk3akd72",alignItems:"gndfcl4n",justifyContent:"ac2vgrno",width:"tddarlmj",height:"jbxl65f1",color:"mnd5airb"},u={position:"lhggkp7q",top:"hd6b059k",left:"qpqgzaqc"},c=e=>{let{children:t,onClick:a}=e;const s=a?{onClick:a}:{};return(0,l.jsx)("div",(0,n.default)((0,n.default)({className:(0,i.default)(d)},s),{},{children:t}))};t.DocState=c;t.Download=e=>{let{onClick:t}=e;return(0,l.jsx)(c,{onClick:t||(()=>{}),children:(0,l.jsx)(o.default,{name:"audio-download"})})};const h={color:"progress"};t.Pending=e=>{let{outgoingMsg:t,value:a,canCancel:s=!1}=e;const d=null==a?{outgoingMsg:t}:h;return(0,l.jsxs)(c,{children:[(0,l.jsx)("div",{className:(0,i.default)(u),children:(0,l.jsx)(r.Spinner,(0,n.default)({stroke:3,size:32,value:a},d))}),s?(0,l.jsx)(o.default,{name:"audio-cancel-noborder"}):null]})};t.Upload=()=>(0,l.jsx)(c,{children:(0,l.jsx)(o.default,{name:"audio-upload"})})},71174:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.DropdownItem=function(e){const{children:t,tooltip:a,type:s="text",disabled:c=!1,theme:_,action:g}=e,[v,C]=(0,l.useState)(!1),[S,y]=(0,l.useState)(!1),b=(0,h.default)(),E=e=>{if(!g)return;!1===g(e)||b&&b.uie.requestDismiss()},T=e=>{e.repeat||E(e)},x=(v||S)&&null!=a?a:null,M="string"==typeof t||o.default.isFbtInstance(t)?(0,f.jsx)("div",{className:(0,r.default)(d.default.ellipsify,d.default.action,{[d.default.compact]:_===p.COMPACT}),role:"button","aria-label":t,children:t}):t,P=(0,r.default)(d.default.item,d.default.shortcut,{[d.default.hover]:v||S,[d.default.text]:"text"===s,[d.default.emoji]:"emoji"===s||"emoji-grid"===s,[d.default.emojiGrid]:"emoji-grid"===s,[d.default.icon]:"icon"===s,[d.default.disabled]:c||_===p.MUTED}),A=c?{}:{handlers:{enter:T,space:T},onContextMenu:m,onMouseDown:m,onClick:e=>{E(e)},onMouseEnter:()=>{C(!0)},onMouseLeave:()=>{C(!1)},onFocus:()=>{y(!0)},onBlur:()=>{y(!1)}};return(0,f.jsxs)(u.HotKeys,(0,n.default)((0,n.default)({component:"li","data-a8n":i.default.key(e.a8n),className:P,"data-animate-dropdown-item":!0},A),{},{children:[M,(0,f.jsx)("div",{children:x})]}))},t.ThemeOptions=void 0;var n=s(a(81109)),i=s(a(99964)),r=s(a(94184)),o=s(a(48360)),l=a(67294),d=s(a(50687)),u=a(55414),c=s(a(59891)),h=s(a(59147)),f=a(85893);const p=(0,c.default)({COMPACT:null,MUTED:null});function m(e){e.preventDefault()}t.ThemeOptions=p},84636:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,i.useContext)(o.InitialEmojisCompletionContext);(0,i.useEffect)((()=>{const a=h(e.emoji);null!=a&&(t.incrementLoadingEmojisCount(),l.AssetLoader.loadEmoji(a,l.LOAD_PRIORITY.LAZY_LOAD_EMOJI).finally((()=>{t.decrementLoadingEmojisCount()})))}),[t,e.emoji]);const{className:a,element:s,emoji:d,selectable:m,selected:_,size:g,src:v,onLoad:C,tabIndex:S,xstyle:y}=e,b=h(d);if(null==b)return null;let E,T;v||(E=f(b,g),T=p(b,g));const x=(0,n.default)(a,T,{selected:_},(0,r.default)(y));if("span"===s)return(0,c.jsx)("span",{className:x,style:E,onLoad:C,tabIndex:S,"data-unicode":e["data-unicode"],"data-variant":e["data-variant"],"data-emoji-index":e["data-emoji-index"]});return(0,c.jsx)(u.default,{alt:d,className:x,draggable:!1,onLoad:C,plainText:d,selectable:m,style:E,src:v})};var n=s(a(94184)),i=a(67294),r=s(a(56720)),o=a(94300),l=a(89721),d=a(70449),u=s(a(47065)),c=a(85893);const{getGlyphId:h,getStyle:f,getCssClasses:p}=d.EmojiUtil},65417:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.EmojiText=t.EMOJI_SIZE=void 0;var i=n(a(81109)),r=n(a(23279)),o=s(a(93131)),l=n(a(45095)),d=n(a(99964)),u=n(a(94184)),c=a(67294),h=n(a(56720)),f=a(88102),p=a(70449),m=n(a(57705)),_=a(5124),g=n(a(43725)),v=a(84387),C=a(52596),S=a(11731),y=a(65127),b=a(85893);const E={breakWord:{wordBreak:"cw3vfol9"},clickable:{cursor:"ajgl1lbb",":hover":{textDecoration:"edeob0r2"}},dirMismatch:{display:"f804f6gw",width:"ln8gz9je"},ellipsify:{flexGrow:"ggj6brxn",overflowX:"gfz4du6o",overflowY:"r7fjleex",position:"g0rxnol2",textOverflow:"lhj4utae",whiteSpace:"le5p0ye3"},inlineblock:{display:"l7jjieqr"},multiline:{whiteSpace:"i033jvx7"}},T={SMALL:"SMALL",LARGE:"LARGE"};t.EMOJI_SIZE=T;const x=4096;function M(e){return p.EmojiUtil.containsEmoji(e.substring(0,x))}class P extends c.PureComponent{constructor(){super(...arguments),this.state={text:String(this.props.text||""),ellipsified:null},this.refContainer=(0,c.createRef)(),this._registeredListener=!1,this._registerResizeListener=()=>{this._registeredListener||(this._registeredListener=!0,this.props.listeners.add(window,"resize",this._recompute),this.props.listeners.add(f.Cmd,"resize",this._recompute))},this._unregisterResizeListener=()=>{this._registeredListener&&(this._registeredListener=!1,this.props.listeners.remove(window,"resize",this._recompute),this.props.listeners.remove(f.Cmd,"resize",this._recompute))},this._recompute=(0,r.default)((()=>{this.setState({ellipsified:null},this.ellipsify)}),10),this._ellipsifyCheck=()=>M(this.state.text)&&this.ellipsify(),this.ellipsify=()=>{const e=this.refContainer.current;if(!e)return;const t=(0,l.default)(e.parentElement,"node.parentElement"),a=e.querySelectorAll("img");if(!a.length)return;const s=e.clientWidth;e.style.overflow="visible";const n=e.clientWidth!==s;if(e.style.overflow="hidden",!n)return;const i=Boolean(g.default.isRTL())===Boolean(this.props.dirMismatch),r=a[function(e,t,a){let s=0;for(;s<e.length;){const n=e[s];if(a&&n.offsetLeft+n.clientWidth>=t)break;if(!a&&n.offsetLeft<=t)break;s++}return s}(a,i?t.clientWidth-function(e,t){let a=0;const{childNodes:s}=e;for(let e=0;e<s.length;e++){const n=s[e];if(n===t)break;a+=n instanceof Element?n.clientWidth:0}return a}(t,e)-12:12,i)];this.setState({ellipsified:I(e,r)})},this._buildBidiModel=e=>e.reduce(((e,t)=>{if("string"==typeof t){const a=t.split(/(\r?\n|\r)/g).map((e=>({dir:o.dir(e),content:e})));return e.concat(a)}return e.push({content:t}),e}),[]),this._explodeOutputByLines=(e,t)=>{const{direction:a}=this.props,s=[],n=this._buildBidiModel(e);let i=[],r=a;"auto"!==a&&"inherit"!==a||(r=null);const o=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=null==r||null==a||r===a,o=n?null:r,l=!n||"rtl"===r!==g.default.isRTL(),d=l?(0,h.default)(E.dirMismatch):null;s.push((0,b.jsxs)("span",{dir:o,className:d,children:[i,t?"":null]},e))};for(let e=0;e<n.length;e++){const t=n[e];r!==t.dir&&null!=r&&void 0!==t.dir&&(o(e),i=[]),void 0!==t.dir&&(r=t.dir),i.push(t.content)}return o(n.length,t),s},this.componentDidMount=()=>{!y.UA.supportsEmojiEllipsification&&this.props.ellipsify&&M(this.state.text)&&this._registerResizeListener(),!y.UA.supportsEmojiEllipsification&&this.props.ellipsify&&this._ellipsifyCheck()},this.render=()=>{if(!this.state.text)return null;const{onClick:e,ellipsify:t,dirMismatch:a,inferLinesDirection:s,inlineblock:n,direction:i,textLimit:r,multiline:o,breakWord:l,emojiXstyle:c}=this.props,f=this.state.ellipsified?this.state.ellipsified:this.state.text,p="inherit"===i?null:i||"auto",g=!!this.props.selectable,v=this.props.formatters||_.Configuration.EmojiOnly({selectable:g,emojiXstyle:c});let y=r||1/0;t&&f.length>x&&y>x&&(y=x);const T=(0,u.default)(this.props.className,(0,h.default)(!!t&&E.ellipsify,!!n&&E.inlineblock,!!e&&E.clickable,a&&!s&&E.dirMismatch,o&&E.multiline,l&&E.breakWord,this.props.xstyle)),M=(0,m.default)(f,v,S.JSXSerializer,void 0,y),P=!!this.state.ellipsified||f.length>y,A=this.props.inferLinesDirection?this._explodeOutputByLines(M,P):M;return(0,b.jsx)(C.Selectable,{"data-a8n":d.default.key(this.props.a8n),className:T,dir:p,element:this.props.element,onClick:e,ref:this.refContainer,selectable:g,title:this.props.titlify?this.state.text:void 0,children:A})}}getContainerElement(){return this.refContainer.current}getWidth(){const e=this.refContainer.current;return e?e.getBoundingClientRect().width:0}static getDerivedStateFromProps(e,t){var a;let s=null;const n=String(null!==(a=e.text)&&void 0!==a?a:"");return n!==t.text&&(s={text:n}),y.UA.supportsEmojiEllipsification||!e.ellipsify||null==s||M(n)||(s=(0,i.default)((0,i.default)({},s),{},{ellipsified:null})),s}componentDidUpdate(e,t){!y.UA.supportsEmojiEllipsification&&this.props.ellipsify&&t.text!==this.state.text&&(M(this.state.text)?(this._recompute(),this._registerResizeListener()):this._unregisterResizeListener())}componentWillUnmount(){this._recompute.cancel()}}P.defaultProps={element:"span",emojiSize:T.SMALL,textLimit:1/0};const A=(0,v.ListenerHOC)(P);function I(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{found:!1};if(e===t)return a.found=!0,"";if(e instanceof HTMLImageElement)return e.alt;if(e.nodeType===Node.TEXT_NODE)return e.nodeValue;const s=w(e);let n="",i=0;for(;i<e.childNodes.length&&(n+=I(e.childNodes[i],t,a),!a.found);)i++;if(null==s)return n;const[r,o]=s;return`${r}${n}${o}`}function w(e){if(e instanceof Element)switch(e.tagName){case"CODE":return["```","```"];case"STRONG":return["*","*"];case"EM":return["_","_"];case"DEL":return["~","~"];case"LI":return["* ",""];default:return null}return null}t.EmojiText=class extends A{getWidth(){return this.getComponent().getWidth()}getContainerElement(){return this.getComponent().getContainerElement()}}},85600:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.StarredMsgs=t.SearchingMessages=t.SearchingImages=t.Searching=t.SearchWithoutKeyword=t.SearchWithKeyword=t.SearchMessagesUnavailable=t.SearchMessages=t.SearchGroups=t.SearchContacts=t.Search=t.NoResultForLabel=t.MediaMsgs=t.LoadingWithText=t.Loading=t.ListStatus=t.ListProducts=t.ListGroups=t.ListChats=t.LinkMsgs=t.LazyLoadRetry=t.ImageSearchEmpty=t.Empty=t.DocMsgs=t.Blocked=t.BeforeSearchMessages=t.BeforeImageSearch=t.Archived=t.AllArchived=void 0;var n=s(a(99964)),i=s(a(48360)),r=s(a(56720)),o=a(69951),l=a(88102),d=a(65417),u=s(a(43725)),c=a(16770),h=a(11054),f=s(a(23217)),p=a(85893);const m={empty:{boxSizing:"cm280p3y",display:"p357zi0d",flexGrow:"ggj6brxn",flexDirection:"f8m0rgwh",alignItems:"gndfcl4n",justifyContent:"ac2vgrno",height:"ppled2lx",paddingTop:"gq7nj7y3",paddingEnd:"td5bf8pq",paddingBottom:"eynyaxvo",paddingStart:"l3k7h4x6",color:"hp667wtd",textAlign:"qfejxiq4"},emptyTop:{flexGrow:"tvf2evcx",flexShrink:"oq44ahr5",flexBasis:"lb5m6g5c",justifyContent:"fhf7t426",height:"bvcnfjzh",paddingTop:"cihm0v32",paddingEnd:"td5bf8pq",paddingBottom:"ctv2fiom",paddingStart:"l3k7h4x6"},compact:{paddingTop:"emrlamx0",paddingEnd:"iffbo4e8",paddingBottom:"aiput80m",paddingStart:"khscay3k"},icon:{display:"p357zi0d",flexGrow:"tvf2evcx",flexShrink:"oq44ahr5",flexBasis:"lb5m6g5c",alignItems:"gndfcl4n",justifyContent:"ac2vgrno",width:"f6essjlf",height:"j19d4s4u",marginTop:"pcx1034m",marginBottom:"r2u2pyhj",color:"myzbk5ck",backgroundColor:"f2yrvmhs",borderTopStartRadius:"g9p5wyxn",borderTopEndRadius:"i0tg5vk9",borderBottomEndRadius:"aoogvgrq",borderBottomStartRadius:"o2zu3hjb"},title:{marginBottom:"gdaqao4w"},text:{fontSize:"f8jlpxt4",lineHeight:"r5qsrrlp",color:"hp667wtd"},spinner:{marginBottom:"du8bjn1j"},action:{display:"l7jjieqr",fontSize:"f8jlpxt4",lineHeight:"r5qsrrlp",color:"o2v2jkg7"},iconRetry:{color:"myzbk5ck"}},_=e=>{let{a8nText:t,a8nTitle:a,children:s,xstyle:i,icon:o,text:l,theme:u,title:c,onClick:h}=e;const f=c?(0,p.jsx)("div",{"data-a8n":n.default.key(a),className:(0,r.default)(m.title),children:c}):null,_=l?(0,p.jsx)("div",{"data-a8n":n.default.key(t),className:(0,r.default)(m.text),children:(0,p.jsx)(d.EmojiText,{text:l})}):null,g=(0,r.default)(m.empty,i,"compact"===u&&m.compact);return(0,p.jsxs)("div",{className:g,onClick:h,children:[o,f,_,s]})};t.Empty=_;t.Blocked=()=>{const e=(0,p.jsx)("div",{className:(0,r.default)(m.icon),children:(0,p.jsx)(f.default,{name:"empty-blocked"})});return(0,p.jsx)(_,{icon:e,title:u.default.t(184),text:u.default.t(145),a8nTitle:"blocked-empty",a8nText:"add-blocked-description"})};t.Archived=()=>{const e=(0,p.jsx)("div",{className:(0,r.default)(m.icon),children:(0,p.jsx)(f.default,{name:"empty-archived"})});return(0,p.jsx)(_,{icon:e,title:u.default.t(153),a8nTitle:"archived-empty"})};t.Search=()=>(0,p.jsx)(_,{xstyle:m.emptyTop,text:u.default.t(1197),a8nText:"search-no-chats-or-contacts"});t.Searching=()=>(0,p.jsx)(_,{xstyle:m.emptyTop,text:u.default.t(1209),a8nText:"searching-chats-contacts-messages"});t.SearchingMessages=()=>(0,p.jsx)(_,{xstyle:m.emptyTop,text:u.default.t(1211),a8nText:"searching-messages"});t.SearchContacts=()=>(0,p.jsx)(_,{xstyle:m.emptyTop,text:u.default.t(1198),a8nText:"search-no-contacts"});t.SearchWithoutKeyword=()=>(0,p.jsx)(_,{xstyle:m.emptyTop,text:u.default.t(955),a8nText:"search-no-results-without-keyword"});t.SearchWithKeyword=e=>(0,p.jsx)(_,{xstyle:m.emptyTop,text:u.default.t(1201,{keyword:e}),a8nText:"search-no-results-without-keyword"});t.SearchGroups=()=>(0,p.jsx)(_,{xstyle:m.emptyTop,text:u.default.t(1199),a8nText:"search-no-groups"});t.SearchMessages=()=>(0,p.jsx)(_,{xstyle:m.emptyTop,text:u.default.t(1200),a8nText:"search-no-messages"});t.SearchMessagesUnavailable=()=>(0,p.jsx)(_,{xstyle:m.emptyTop,text:u.default.t(1204),a8nText:"search-results-unavailable"});t.ListChats=()=>(0,p.jsx)(_,{text:u.default.t(944),a8nText:"no-chats"});t.ListProducts=e=>{let{hasCatalog:t=!0}=e;const a=t?u.default.t(952):u.default.t(943);return(0,p.jsx)(_,{text:a,a8nText:"no-products"})};t.ListGroups=()=>(0,p.jsx)(_,{text:u.default.t(947),a8nText:"no-groups"});t.BeforeSearchMessages=(e,t)=>{const a=t?u.default.t(295,{chatName:e}):u.default.t(384,{chatName:e});return(0,p.jsx)(_,{xstyle:m.emptyTop,text:a,a8nText:"chat-search-prompt"})};function g(){const{ArchivedFlowLoadable:e}=a(78457);l.Cmd.openDrawerLeft((0,p.jsx)(e,{}))}t.ListStatus=()=>(0,p.jsx)(_,{});t.AllArchived=()=>{const e=o.ChatCollection.filter((e=>e.archive)).length;return(0,p.jsx)(_,{title:i.default._("All chats are archived",null,{hk:"3v5Xmn"}),a8nTitle:"all-chats-archived",children:(0,p.jsx)("div",{"data-a8n":n.default.key("see-archived"),role:"button",onClick:g,className:(0,r.default)(m.action),children:u.default.t(1222,{count:e,_plural:e})})})};t.StarredMsgs=()=>(0,p.jsx)(_,{text:u.default.t(956),a8nText:"no-starred-messages"});t.MediaMsgs=()=>(0,p.jsx)(_,{text:u.default.t(949),a8nText:"no-media"});t.LinkMsgs=()=>(0,p.jsx)(_,{text:u.default.t(948),a8nText:"no-links"});t.DocMsgs=()=>(0,p.jsx)(_,{text:u.default.t(946),a8nText:"no-docs"});t.BeforeImageSearch=()=>(0,p.jsx)(_,{text:u.default.t(634),a8nText:"image-search-prompt"});t.SearchingImages=()=>(0,p.jsx)(_,{text:u.default.t(1210),a8nText:"searching-images"});t.ImageSearchEmpty=()=>(0,p.jsx)(_,{text:u.default.t(633),a8nText:"image-search-no-results"});t.Loading=()=>(0,p.jsx)(_,{children:(0,p.jsx)(h.Spinner,{size:50,stroke:4})});t.LoadingWithText=e=>{let{text:t}=e;return(0,p.jsxs)(_,{children:[(0,p.jsx)("div",{className:(0,r.default)(m.spinner),children:(0,p.jsx)(h.Spinner,{size:50,stroke:4})}),(0,p.jsx)(d.EmojiText,{element:"div",className:(0,r.default)(m.text),text:t})]})};t.NoResultForLabel=e=>{let{labelId:t}=e;const a=c.LabelCollection.assertGet(t);return(0,p.jsx)(_,{children:(0,p.jsx)(d.EmojiText,{element:"div",className:(0,r.default)(m.text),text:u.default.t(954,{labelName:a.name})})})};t.LazyLoadRetry=e=>{let{xstyle:t,onClick:a}=e;return(0,p.jsxs)(_,{xstyle:t,onClick:a,children:[(0,p.jsx)(f.default,{name:"live-location-refresh",xstyle:m.iconRetry}),(0,p.jsx)("div",{children:u.default.t(1180)})]})}},51099:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(67294);class n extends s.Component{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,t){this.props.sendLogs&&(__LOG__(4,void 0,new Error,!0)`${e.stack}\n${t.componentStack}`,SEND_LOGS(`error-boundary:${this.props.reason}`))}render(){return this.state.hasError?this.props.fallback:this.props.children}}t.default=n,n.defaultProps={sendLogs:!0,fallback:null},n.displayName="ErrorBoundary"},36075:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(70772)),i=a(85893);var r=e=>{let{children:t}=e;return(0,i.jsx)("div",{className:n.default.tooltip,role:"tooltip",children:t})};t.default=r},17080:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(67294),i=s(a(69618)),r=s(a(50798)),o=s(a(43725)),l=a(3940),d=a(85893);function u(e){let{text:t,textLimit:a,children:s}=e;const[l,u]=(0,n.useState)((()=>c(t,a,a)?a:1/0));return(0,d.jsxs)(d.Fragment,{children:[s({textLimit:l}),l!==1/0?(0,d.jsx)("span",{className:r.default.read_more,role:"button",onClick:()=>{const e=l+i.default.SUBSEQUENT_PAGE_SIZE;u(c(t,e,i.default.SUBSEQUENT_PAGE_SIZE)?e:1/0)},children:" "+o.default.t(1136)}):null]})}function c(e,t,a){return(0,l.numCodepoints)(e)-t>a*i.default.OVERFLOWING_PAGE_THRESHOLD}var h=(0,n.memo)(u);t.default=h},54995:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(67294),n=a(85893);function i(e,t){const{mimes:a,onChange:i,multiple:r=!0}=e,o=(0,s.useRef)(null),l=()=>{o.current&&(o.current.value="",o.current.click())};return(0,s.useImperativeHandle)(t,(()=>({open:l}))),(0,n.jsx)("input",{accept:a,ref:o,type:"file",multiple:r,style:{display:"none"},onClick:e=>{e.stopPropagation()},onChange:e=>{i(e)}})}var r=(0,s.forwardRef)(i);t.default=r},30140:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,r.useModelValues)(e.chatstate,["id","type","deny","t"]);const t=(0,r.useModelValues)(e.groupMetadata,["announce","participants"]),a=(0,r.useModelValues)(e.presence,["forceDisplay","withholdDisplayStage"]),s=a.withholdDisplayStage===i.WithholdDisplayStage.Info?e.placeholder:a.getGroupSubtitleText();return(0,o.jsx)(n.default,{groupMetadata:t,overridingText:s,placeholder:e.placeholder,location:e.location})};var n=s(a(73437)),i=a(42931),r=a(49082),o=a(85893)},43420:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const{active:a=!1,delay:s=0}=null!=t?t:{},r=(0,n.useRef)(e);r.current=e;const o=(0,n.useRef)();(0,n.useEffect)((()=>{const e=e=>r.current(e),t=()=>{var e;return null===(e=o.current)||void 0===e?void 0:e.call(o)};return t(),a&&(o.current=(0,i.default)(e,{delay:s})),t}),[a,s])};var n=a(67294),i=s(a(70242))},88310:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const[e,t]=(0,i.useState)((()=>r().getValue()));return(0,i.useEffect)((()=>r().subscribe((e=>{t(e)}))),[]),e};var n=s(a(51463)),i=a(67294);const r=(0,n.default)((()=>new o));class o{constructor(){this._subscribers=new Set}subscribe(e){if(this._subscribers.has(e))throw new Error("Callback can only be added once.");return this._subscribers.add(e),this._updateListener(),()=>{this._subscribers.delete(e),this._updateListener()}}getValue(){var e;return null!==(e=window.devicePixelRatio)&&void 0!==e?e:1}_updateListener(){var e;if(0===this._subscribers.size)return void(null===(e=this._destroyListener)||void 0===e||e.call(this));if(null!=this._destroyListener)return;const t=matchMedia(`(resolution: ${this.getValue()}dppx)`),a=()=>{var e;null===(e=this._destroyListener)||void 0===e||e.call(this);const t=this.getValue();this._subscribers.forEach((e=>{e(t)})),this._updateListener()};t.addListener(a),this._destroyListener=()=>{t.removeListener(a),this._destroyListener=null}}}},16704:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){const s=(0,n.useRef)(!0),o=(0,r.default)((()=>a())),[l,d]=(0,n.useState)((()=>o()));return(0,i.useListener)(e,t,(()=>{d(o())})),(0,n.useEffect)((()=>{s.current?s.current=!1:d(o())}),[e,o]),l};var n=a(67294),i=a(19529),r=s(a(83800))},22353:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,s.useMemo)((()=>function(e){return t=>{e&&("function"==typeof e?e(t):e.current=t)}}(e)),[e])};var s=a(67294)},6914:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[t,a]=(0,l.useState)(null),[s,n]=(0,l.useState)(u),i=f(e);return(0,l.useEffect)((()=>{if(t)return c().observe(t,n,e)}),[t,i]),[a,s]};var n=s(a(81109)),i=s(a(51463)),r=s(a(32176)),o=s(a(45095)),l=a(67294);const d={root:null,rootMargin:"0px",threshold:0},u={intersectionRatio:0,isIntersecting:!1};const c=(0,i.default)((()=>new h));class h{constructor(){this._observers=new Map,this._getObserver=e=>{const t=f(e);if(!this._observers.has(t)){const a=new Map,s=new IntersectionObserver((e=>{for(const t of e){const e=a.get(t.target),{intersectionRatio:s,isIntersecting:n}=t;null==e||e({intersectionRatio:s,isIntersecting:n})}}),e);this._observers.set(t,{observer:s,callbacks:a})}return(0,o.default)(this._observers.get(t),"this._observers.get(key)")},this._cleanup=e=>{const t=f(e);this._observers.delete(t)},this.observe=(e,t,a)=>{const{observer:s,callbacks:n}=this._getObserver(a);if(n.has(e))throw new Error("You can't observe the same element twice.");return n.set(e,t),s.observe(e),()=>{s.unobserve(e),n.delete(e),0===n.size&&(s.disconnect(),this._cleanup(a))}}}}function f(e){const{root:t,rootMargin:a,threshold:s}=(0,n.default)((0,n.default)({},d),e);return[t,a,s].map((e=>(0,r.default)(e))).join("-")}},59552:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,s.useRef)();null==t.current&&(t.current=e());return t};var s=a(67294)},88738:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const[e,t]=(0,s.useState)(null),[a,r]=(0,s.useState)(i);return(0,s.useLayoutEffect)((()=>{if(e)return(0,n.observe)(e,r)}),[e]),[t,a]};var s=a(67294),n=a(91665);const i={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0}},49082:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.StateHookMissingModelError=void 0,t.useModelValues=function(e,t,a){if(null==e)throw __LOG__(4,void 0,new Error,!0)`useModelValues hook received an unexpected \`null\` model`,SEND_LOGS("state-hook-null-model"),new d("Unknown");const s=u(e,t,a);return(0,i.default)(s,"values")},t.useOptionalModelValues=u;var n=a(40265),i=s(a(45095)),r=a(67294),o=s(a(87541)),l=a(31019);class d extends((0,n.customError)("StateHookMissingModelError")){constructor(e){super(`Received a null value for model key: ${e}`)}}function u(e,t,a){const{isStrong:s=!0,componentName:n}=null!=a?a:{},i=e?(0,l.unproxy)(e):null,d=(0,r.useRef)();function u(){if(null==d.current){if(!i)return null;d.current=new o.default(null!=n?n:"Hook(useModelValues)",i.proxyName,t,s,!0)}return d.current}const[c,h]=(0,r.useState)((()=>{const e=u();if(!e)return null;const t=e.getModelAndValidate(i);return t?e.createProxy(t):null})),f=(0,r.useCallback)(((e,t)=>{const a=e.getModelAndValidate(t);h(a?e.createProxy(a):null)}),[]);(0,r.useEffect)((()=>{const e=u();if(!e||!c)return;const t=e.getModel(i);return e.attachConcern(t,c.proxyBitMask,f),()=>{e.detachConcern(t,f)}}),[i,c,f]);const[p,m]=(0,r.useState)(i),_=u();if(p!==i&&_){p&&_.detachConcern(p,f);const e=_.getModelAndValidate(i);m(e),h(e?_.createProxy(e):null)}return c}t.StateHookMissingModelError=d},84215:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,i.default)(e);(0,n.useEffect)((()=>t),[t])};var n=a(67294),i=s(a(83800))},29193:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SetStateHookMissingModelPropertyError=void 0,t.useSetModelValue=function(e,t){const a=(0,n.unproxy)(e),o=a.proxyName;null==r[o]&&(r[o]=new Set([...a.__props,...a.__session]));if(!r[o].has(t))throw new i(e.proxyName,t);return(0,s.useCallback)((e=>{if("function"==typeof e){const s=a.get(t);a.set(t,e(s))}else a.set(t,e)}),[t,a])};var s=a(67294),n=a(31019);class i extends Error{constructor(e,t){super(`The model "${e}" has no property/sessions "${t}" defined`),this.name="SetStateHookMissingModelPropertyError"}}t.SetStateHookMissingModelPropertyError=i;const r={}},88857:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){const s=(0,r.default)(e),{leading:o,trailing:l}=null!=a?a:{},d=(0,i.useMemo)((()=>(0,n.default)(s,t,a)),[t,o,l,s]);return(0,i.useEffect)((()=>d.cancel),[d]),d};var n=s(a(23493)),i=a(67294),r=s(a(83800))},83542:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const[e]=(0,l.useAddListenerOnce)(),t=(0,d.default)();return(0,i.useCallback)((a=>{r.Cmd.uiBusy?e(r.Cmd,"ui_idle",a):(0,o.documentFlushed)({signal:t}).then((()=>{a()})).catch((0,n.catchAbort)((()=>{})))}),[e,t])};var n=a(89385),i=a(67294),r=a(88102),o=a(92200),l=a(19529),d=s(a(38080))},54534:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const[e,t]=(0,s.useState)(n());function a(){t(n())}return(0,s.useEffect)((()=>(window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a)})),[]),e};var s=a(67294);function n(){return{width:window.innerWidth,height:window.innerHeight}}},76239:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{children:t,onComplex:a,waitIdle:s,id:u}=e,[c,h]=(0,n.useState)((()=>i.UIBusyTasks.isBusy())),f=()=>{h(!1)},p=(0,r.default)((()=>s?i.UIBusyTasks.enqueue(f):null)),m=(0,o.default)(u);return(0,n.useEffect)((()=>()=>{s&&null!=p.current&&i.UIBusyTasks.dequeue(p.current)}),[]),(0,n.useEffect)((()=>{if(!l.default.equals(m,u)||!s){c&&null!=p.current&&i.UIBusyTasks.dequeue(p.current);const e=i.UIBusyTasks.isBusy();e&&s&&(p.current=i.UIBusyTasks.enqueue(f)),h(e)}}),[u,p,c,m,s]),c&&s?(0,d.jsx)(d.Fragment,{children:t}):a()};var n=a(67294),i=a(50338),r=s(a(59552)),o=s(a(41502)),l=s(a(39546)),d=a(85893)},50981:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ImgWithFallback=m,t.Theme=void 0;var n=s(a(41609)),i=s(a(94184)),r=a(67294),o=s(a(46918)),l=s(a(47065)),d=s(a(9297)),u=s(a(23217)),c=a(85893);const h={SMALL:"SMALL",MEDIUM:"MEDIUM",LARGE:"LARGE",AUTO:"AUTO",NONE:"NONE"},f=a(54302).Mirrored(["Default","Transparent"]);function p(e){switch(e){case h.SMALL:return 49;case h.MEDIUM:return 100;case h.LARGE:return 200;case h.NONE:return;default:return e}}function m(e){const{size:t=h.SMALL,fallbackSVG:a,className:s,loader:m=!1,wrapOptions:_={},transition:g,roundContainer:v=!0,imgProps:C,theme:S}=e,[y,b]=(0,r.useState)(!1),{src:E,alt:T,crossOrigin:x,draggable:M}=C,{centerWrapperChild:P,wrapperClassName:A}=_,I=(0,i.default)(d.default.avatarImage,{[d.default.isLoaded]:y,[d.default.transition]:g}),w={height:p(t),width:p(t)};let k;m&&!y&&(k=(0,c.jsx)(o.default,{}));const j=(0,c.jsx)(l.default,{src:E,className:I,onLoad:()=>{b(!0)},alt:T,crossOrigin:x,draggable:M}),N=(0,n.default)(_)?j:(0,c.jsx)("div",{className:(0,i.default)(A,d.default.avatarWrapper,d.default.avatarImageWrapper,{[d.default.centerChild]:P,[d.default.isLoaded]:y,[d.default.transparent]:S===f.Transparent}),children:j}),O=""!==E?(0,c.jsxs)(c.Fragment,{children:[k,N]}):null;return(0,c.jsxs)("div",{className:(0,i.default)(d.default.avatar,s,{[d.default.roundBorder]:v,[d.default.transparent]:S===f.Transparent}),style:w,children:[O,!y&&(0,c.jsx)("div",{className:(0,i.default)(A,d.default.avatarWrapper,d.default.avatarSvgWrapper,{[d.default.centerChild]:P,[d.default.transition]:g,[d.default.transparent]:S===f.Transparent}),children:(0,c.jsx)(u.default,{name:a})})]})}t.Theme=f,m.defaultProps={size:h.SMALL,loader:!1}},33048:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(45120)),i=s(a(52013)),r=a(67294),o=a(55414),l=a(42473),d=a(85893);class u extends r.Component{constructor(){super(...arguments),this._setRef=e=>{this._ref=e,this.props.onRef(e)},this.getElement=()=>this._ref,this._rotateFocus=e=>{if(!this._ref)return;let t=l.TabDirection.FORWARD;e&&(e.preventDefault(),t=e.shiftKey?l.TabDirection.BACKWARD:l.TabDirection.FORWARD,n.default.shouldIndicateFocus());const a=(0,l.getNextTabbableElement)(this._ref,t,l.FocusType.CUSTOM,(e=>!this.props.skipNode(e)));null!=a&&(n.default.shouldIndicateFocus(),a.restoreFocus?a.restoreFocus():i.default.focus(a))}}componentDidMount(){i.default.focus(this._ref)}render(){const{className:e,children:t,onBlur:a}=this.props,s={tab:this._rotateFocus,"shift+tab":this._rotateFocus,"shift+?":this.props.onShowKeyboardShortcuts};return(0,d.jsx)(o.HotKeys,{handlers:s,className:e,onBlur:a,onRef:this._setRef,children:t})}}t.default=u,u.displayName="TopLevelHotKeys"},28141:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardShortcut=function(e){let{action:t,addModifiers:a=!0}=e;const s=(0,r.getShortcutKey)(t);if(!s)return null;const c=u(s);let h;h=-1===c.indexOf(d)?(0,l.jsx)("span",{className:i.default.key,children:c}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:i.default.key,children:"Shift"}),(0,l.jsx)("span",{className:i.default.key,children:c.substr(d.length)})]});const f=a?function(){const e=[o.UA.os===n.default.OS_TYPE.MAC?"Cmd":"Ctrl"];return e.push(o.UA.os===n.default.OS_TYPE.MAC?"Ctrl":"Alt"),e.map((e=>(0,l.jsx)("span",{className:i.default.key,children:e},e)))}():null;return(0,l.jsxs)(l.Fragment,{children:[f,h]})},t.expandRawShortcut=u;var n=s(a(69618)),i=s(a(87120)),r=a(8524),o=a(65127),l=a(85893);const d="Shift+";function u(e){if(1!==e.length)return e;switch(e){case">":return"Shift+.";case"<":return"Shift+,"}return e.toLowerCase()!==e?`Shift+${e}`:e.toUpperCase()}},88793:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(0===e.length)return"";const a=e[0];if(1===e.length)return a;const s=e[e.length-1];if(2===e.length)return o(a,s,t);const n=e[1],i=e.slice(2,e.length-1);return l(a,n,i,s)};var n=s(a(43725)),i=s(a(56074)),r=a(85893);function o(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return a?n.default.t(884,d(e,t)):(0,r.jsx)(i.default,{id:884,params:{A:e,B:t}})}function l(e,t,a,s){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const l=[o?n.default.t(883,d(e,t)):(0,r.jsx)(i.default,{id:883,params:{A:e,B:t}},"listItem_firstItem")],u=a.reduce(((e,t,a)=>[o?n.default.t(881,d(t,e)):(0,r.jsx)(i.default,{id:881,params:{A:t,B:e}},`listItem_${a}`)]),l);return o?n.default.t(881,d(u,s)):(0,r.jsx)(i.default,{id:882,params:{A:u,B:s}})}function d(e,t){return{A:e,B:t}}},33811:(e,t)=>{"use strict";function a(e,t){return window.getComputedStyle(e).getPropertyValue(t)}function s(e){let t=a(e,"line-height"),s=parseFloat(t);if(t===s+""){const n=e.style.lineHeight;e.style.lineHeight=t+"em",t=a(e,"line-height"),s=parseFloat(t),n?e.style.lineHeight=n:delete e.style.lineHeight}if(t.includes("pt")?s*=4/3:t.includes("mm")?(s*=96,s/=25.4):t.includes("cm")?(s*=96,s/=2.54):t.includes("in")?s*=96:t.includes("pc")&&(s*=16),s=Math.round(s),"normal"===t){const t=e.nodeName,n=document.createElement(t);n.innerHTML="&nbsp;","TEXTAREA"===t.toUpperCase()&&n.setAttribute("rows","1");const i=a(e,"font-size");n.style.fontSize=i,n.style.padding="0px",n.style.border="0px";const r=document.body;if(null!=r){r.appendChild(n);s=n.offsetHeight,r.removeChild(n)}}return s}Object.defineProperty(t,"__esModule",{value:!0}),t.getLineHeight=s,t.getNumberOfLines=function(e,t){const a=e.getBoundingClientRect(),n=parseInt(a.bottom-a.top,10),i=null!=t?t:s(e);return Math.round(n/i)}},47915:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.UnknownDataError=t.FlatList=t.DEFAULT_ITEM_WIDTH=t.DEFAULT_ITEM_HEIGHT=void 0;var n=s(a(81109)),i=s(a(23279)),r=a(40265),o=s(a(99964)),l=s(a(94184)),d=a(67294),u=s(a(40954)),c=a(50338),h=a(43882),f=s(a(37041)),p=s(a(80720)),m=s(a(41956)),_=a(85893);t.DEFAULT_ITEM_WIDTH=72;t.DEFAULT_ITEM_HEIGHT=72;class g extends((0,r.customError)("UnknownDataError")){constructor(e){super(`Unknown data encountered while rendering. Item key: ${e.itemKey}`)}}t.UnknownDataError=g;class v extends d.Component{constructor(e){super(e),this.keyPool=new h.KeyPool,this.hanging=!1,this.pointerEvents=!0,this.setRefList=e=>{this.refList=e},this.setListLength=()=>{this.setState({renderedListLength:this.state.listLength})},this.getListLength=()=>this.state.renderedListLength,this.handleLayout=e=>{const t=this.refList;if(!t)return;const a="horizontal"===this.props.direction?t.getBoundingClientRect().left-e.position.left:t.getBoundingClientRect().top-e.position.top,s=Math.max(a,0),i="horizontal"===this.props.direction?e.width:e.height,{firstIndex:r,lastIndex:o}=v.computeIndexes(this.props,(0,n.default)((0,n.default)({},this.state),{},{offsetFromStart:s,bodyDimension:i}));this.setState({firstIndex:r,lastIndex:o,bodyDimension:i,offsetFromStart:s})},this.handleScroll=()=>{this.animationFrame?this.hanging=!0:(this.hanging=!1,this.animationFrame=requestAnimationFrame(this._handleScroll))},this._handleScroll=()=>{this.disablePointerEvents();const e=this.props.flatListController.getScrollFromStart();if(null==e)throw new Error("FlatList:ScrollEvent thrown while container is unmounted");const t=Math.max(e,0),a=v.computeIndexes(this.props,(0,n.default)((0,n.default)({},this.state),{},{scrollFromStart:t}));this.setState({scrollFromStart:t,firstIndex:a.firstIndex,lastIndex:a.lastIndex},this.handleFinishScroll)},this.handleFinishScroll=()=>{this.animationFrame=void 0,this.enablePointerEvents(),this.hanging&&this.handleScroll()},this.enablePointerEvents=(0,i.default)((()=>{if(this.animationFrame)return this.enablePointerEvents();null!=this.busyId&&(c.UIBusyTasks.clearBusy(this.busyId),delete this.busyId),this.props.onPointerEventsOn&&this.props.onPointerEventsOn();const e=this.refList;e&&(e.style.pointerEvents="auto"),this.pointerEvents=!1}),150);const{enhancedData:t,listLength:a}=v.computeDataAndListLength(e);this.state={firstIndex:0,lastIndex:0,scrollFromStart:0,offsetFromStart:0,bodyDimension:0,enhancedData:t,listLength:a,renderedListLength:a}}static getDerivedStateFromProps(e,t){const{enhancedData:a,listLength:s}=v.computeDataAndListLength(e),{firstIndex:i,lastIndex:r}=v.computeIndexes(e,(0,n.default)((0,n.default)({},t),{},{enhancedData:a,listLength:s})),o={enhancedData:a,listLength:s,firstIndex:i,lastIndex:r};return(!e.itemEnterAnimationsEnabled||s>=t.renderedListLength)&&(o.renderedListLength=s),o}static computeDataAndListLength(e){let t=0;return{enhancedData:e.data.map((a=>{const s=(0,n.default)((0,n.default)({},a),{},{offset:t}),i=v.getDimension(a,e.direction,e.defaultItemWidth,e.defaultItemHeight);return t+=i,s})),listLength:t}}static getDimension(e,t,a,s){return"horizontal"===t?v.getItemWidth(e,a):v.getItemHeight(e,s)}static getItemWidth(e,t){return null!=e.width&&e.width>0?e.width:t}static getItemHeight(e,t){return null!=e.height&&e.height>0?e.height:t}static computeIndexes(e,t){const{bodyDimension:a,offsetFromStart:s,scrollFromStart:n,listLength:i,enhancedData:r}=t;if(void 0===a||void 0===s)throw new Error("FlatList:Computing FlatList without a valid Container");const{extraItems:o,forceConsistentRenderCount:l,direction:d,defaultItemWidth:u,defaultItemHeight:c}=e;let h=0;for(let e=0;e<r.length;e++){const t=r[e],a=v.getDimension(t,d,u,c);if(s+t.offset+a>n){h=e;break}}let f=r.length-1;const p=l?Math.min(r[h].offset+a,i):Math.min(n+a,i+s);for(let e=h;e<r.length;e++){const t=r[e],a=v.getDimension(t,d,u,c);if(s+t.offset+a>=p){f=e;break}}let m=o;const _=o-h;_>0&&(m+=_);let g=o;const C=f+o-r.length;C>0&&(g+=C);return{firstIndex:Math.max(h-g,0),lastIndex:Math.min(f+m,r.length-1)}}componentDidMount(){this.props.flatListController.registerList({handleLayout:this.handleLayout,handleScroll:this.handleScroll})}componentWillUnmount(){this.props.flatListController.unregisterList(),this.enablePointerEvents.cancel(),this.cancelScroll()}cancelScroll(){this.animationFrame&&(cancelAnimationFrame(this.animationFrame),this.animationFrame=void 0,this.hanging=!1)}disablePointerEvents(){if(this.busyId=c.UIBusyTasks.setBusy(this.busyId),this.pointerEvents)return;this.props.onPointerEventsOff&&this.props.onPointerEventsOff();const e=this.refList;e&&(e.style.pointerEvents="none"),this.pointerEvents=!0}scrollIntoViewIfNeeded(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const{enhancedData:a,scrollFromStart:s,bodyDimension:n}=this.state;if(e<0||e>=a.length)throw new Error("Invalid Index.");const i=a[e].offset;(i<s-t||i>s+n+t)&&this.props.flatListController.setScrollFromStart(i)}getComponents(){const{reorderAnimationsEnabled:e,renderItem:t,defaultItemWidth:a,defaultItemHeight:s,keyOrder:i}=this.props,{firstIndex:r,lastIndex:o}=this.state,l=this.state.enhancedData.slice(r,o+1);return this.keyPool.recycleKeysAndMap(l,i).map(((i,r)=>{let{rctKey:o,data:l}=i;const d="horizontal"===this.props.direction?{width:v.getItemWidth(l,a)}:{height:v.getItemHeight(l,s)};return(0,_.jsx)(p.default,{data:(0,n.default)((0,n.default)({},l),d),animate:!!e&&f.default.shouldAnimate,zIndex:this.state.enhancedData.length-r-1,renderItem:t,listDirection:this.props.direction},o)}))}render(){const{role:e}=this.props,t="horizontal"===this.props.direction?{width:this.state.renderedListLength}:{height:this.state.renderedListLength};return(0,_.jsx)("div",{className:(0,l.default)(this.props.className),"data-a8n":o.default.key(this.props.a8nKey),ref:this.setRefList,children:(0,_.jsx)("div",{"aria-label":this.props["aria-label"],className:(0,l.default)(u.default.viewport,{[u.default.horizontalListViewport]:"horizontal"===this.props.direction,[u.default.verticalListViewport]:"vertical"===this.props.direction}),role:e,"aria-rowcount":this.props["aria-rowcount"],style:t,children:this.props.itemEnterAnimationsEnabled?(0,_.jsx)(m.default,{transitionName:"fade",onAnimationComplete:this.setListLength,children:this.getComponents()}):this.getComponents()})})}}t.FlatList=v,v.defaultProps={defaultItemHeight:72,defaultItemWidth:72,forceConsistentRenderCount:!0,extraItems:5,initialScrollFromStart:0,reorderAnimationsEnabled:!0,keyOrder:h.KeyOrder.NORMAL},v.displayName="FlatList"},44942:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{children:t,flatListControllers:a,onScroll:s,onLayout:c,onRef:h,scrollOffset:f}=e,p=(0,i.default)(e,u),{children:m,onRef:_,direction:g,flatListControllers:v,onScroll:C,onLayout:S,scrollOffset:y}=e,b=(0,o.useRef)(null),E=(0,o.useCallback)((e=>{b.current=e,_&&_(e)}),[_]),T=()=>{const e=b.current;if(e)return"horizontal"===g?e.scrollLeft:e.scrollTop},x=e=>{const t=b.current;t&&("horizontal"===g?t.scrollLeft=e:t.scrollTop=e)},M=()=>{const e=(0,r.default)(b.current,"observerRef.current");v.forEach((t=>t.triggerLayout({position:e.getBoundingClientRect(),width:e.clientWidth,height:e.clientHeight})))};return(0,o.useLayoutEffect)((()=>(v.forEach((e=>e.registerContainer({getScrollFromStart:T,setScrollFromStart:x,onRegisterList:M}))),void 0!==y&&x(y),()=>{v.forEach((e=>e.unregisterContainer()))})),[]),(0,d.jsx)(l.default,(0,n.default)((0,n.default)({},p),{},{onResize:e=>{const t=(0,r.default)(b.current,"observerRef.current"),a=(0,n.default)((0,n.default)({},e),{},{position:t.getBoundingClientRect()});v.forEach((e=>e.triggerLayout(a))),S&&S(a)},onScroll:e=>{C&&C(e),v.forEach((e=>e.triggerScroll()))},ref:E,children:m}))};var n=s(a(81109)),i=s(a(6479)),r=s(a(45095)),o=a(67294),l=s(a(8694)),d=a(85893);const u=["children","flatListControllers","onScroll","onLayout","onRef","scrollOffset"]},30855:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=class{registerContainer(e){this._containerAPI=e,this._listHandlers&&e.onRegisterList()}unregisterContainer(){delete this._containerAPI}triggerScroll(){this._listHandlers&&this._listHandlers.handleScroll()}triggerLayout(e){this._listHandlers&&this._listHandlers.handleLayout(e)}registerList(e){this._listHandlers=e,this._containerAPI&&this._containerAPI.onRegisterList()}unregisterList(){delete this._listHandlers}getScrollFromStart(){if(this._containerAPI)return this._containerAPI.getScrollFromStart()}setScrollFromStart(e){this._containerAPI&&this._containerAPI.setScrollFromStart(e)}}},29796:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return(0,r.jsx)("div",{className:n.default.loadingSpinner,children:(0,r.jsx)(i.Spinner,{color:"default",size:24,stroke:6})})};var n=s(a(59230)),i=a(11054),r=a(85893)},43882:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.KeyPool=t.KeyOrder=void 0;var n=s(a(89734)),i=s(a(45095));const r=a(54302)({NORMAL:"NORMAL",INVERSE:"INVERSE"});t.KeyOrder=r;t.KeyPool=class{constructor(){this._rctKeyToData=new Map,this._keyToRctKey=new Map}_genNewKeys(e){const t=e-this._rctKeyToData.size;if(t<=0)return[];const a=[];for(let s=0;s<e&&(this._rctKeyToData.has(s)||(a.push(s),t!==a.length));s++);return a}recycleKeysAndMap(e,t){const a=new Map,s=new Map,o=this._genNewKeys(e.length),l=new Set(this._rctKeyToData.keys()),d=[];e.forEach((e=>{const t=this._keyToRctKey.get(e.itemKey);void 0!==t?(s.set(e.itemKey,t),a.set(t,e),l.delete(t)):d.push(e)}));const u=[...o,...l];d.forEach((e=>{const n=t===r.NORMAL?u.pop():u.shift();s.set(e.itemKey,n),a.set(n,e)}));const c=(0,n.default)(e,[e=>s.get(e.itemKey)]).map((e=>({rctKey:(0,i.default)(s.get(e.itemKey),"keyToRctKey.get(item.itemKey)"),data:e})));return this._rctKeyToData=a,this._keyToRctKey=s,c}}},37041:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={shouldAnimate:!0}},80720:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(81109)),i=a(67294),r=s(a(96774)),o=s(a(11241)),l=s(a(12544)),d=a(85893);const u=o.default.prefix("transform"),c=o.default.prefix("transition");class h extends i.Component{constructor(){super(...arguments),this.state={shouldAnimate:!0,prevItemKey:null,prevRowOffset:null}}static getDerivedStateFromProps(e,t){return(0,n.default)((0,n.default)({},t),{},{prevItemKey:e.data.itemKey,prevRowOffset:e.data.offset,shouldAnimate:f(e,t)})}shouldComponentUpdate(e,t){return this.props.animate!==e.animate||this.props.zIndex!=this.props.zIndex||this.props.renderItem!==e.renderItem||this.state.shouldAnimate!==t.shouldAnimate||!(0,r.default)(this.props.data,e.data)}render(){const{data:e,zIndex:t}=this.props,{shouldAnimate:a}=this.state,s=a?`${u} 200ms ease-in-out`:"none",i="horizontal"===this.props.listDirection?{width:e.width,[u]:`translateX(${e.offset}px)`}:{height:e.height,[u]:`translateY(${e.offset}px)`},r=(0,n.default)({zIndex:t,[c]:s},i),o=this.props.renderItem(e);return(0,d.jsx)("div",{className:l.default.item,style:r,children:o})}}function f(e,t){if(!e.animate)return!1;const{prevItemKey:a}=t;return e.data.itemKey===a&&e.data.offset!==t.prevRowOffset}t.default=h,h.displayName="ListItem"},83452:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(81109)),r=n(a(94184)),o=n(a(48360)),l=a(67294),d=n(a(69618)),u=n(a(3309)),c=a(12591),h=s(a(36638)),f=n(a(47065)),p=n(a(43725)),m=a(84387),_=n(a(23131)),g=a(54586),v=n(a(23217)),C=a(97628),S=n(a(90012)),y=a(2541),b=a(85893);class E extends l.PureComponent{constructor(e){super(e),this._updateImgSrcUrl=e=>{var t;const a=e.height+50,s="color:red|"+e.lat+", "+e.lng,n=e.lat+", "+e.lng,r=e.width+"x"+a,o=u.default.currentRes===u.default.RES.HIGH?2:1,l=p.default.getLocale(),c=y.URL.GSM_NAME,f=y.URL.build(d.default.G_MAPS_IMG_URL,(0,i.default)({zoom:15,size:r,scale:o,language:l,client:c},e.showMarker?{markers:s}:{center:n})),m="dark"===(null===(t=this.context)||void 0===t?void 0:t.theme)?`${f}&${d.default.G_MAPS_DARK_MODE_STYLE}`:f;if(this._lastURL===m)return;this._lastURL=m;const _=this.props.getUnmountSignal();y.URL.gsmURL(m,y.URL.GSM_NUMS).then((e=>{_.aborted||this.setState({imgSrcUrl:e,hiResAvail:h.isCached(e)})}))},this._onImgLoaded=()=>{this.state.hiResAvail||this.setState({hiResAvail:!0}),this.props.onLoad&&this.props.onLoad()},this.state={imgSrcUrl:null,hiResAvail:!1},this._updateImgSrcUrl(e)}componentDidMount(){this.props.listeners.add(window,"dpichange",(()=>this._updateImgSrcUrl(this.props)))}componentDidUpdate(){this._updateImgSrcUrl(this.props)}render(){const{lat:e,lng:t,name:a,width:s,height:n,className:i,linkify:l,onClick:d,a8nText:u}=this.props,h={pointerEvents:"none",width:s,height:this.state.hiResAvail?void 0:n},p=(0,r.default)(i,{[_.default.hidden]:!this.state.hiResAvail}),m=this.state.hiResAvail?null:(0,b.jsx)(v.default,{name:"map-placeholder",display:"inline"}),C=(0,b.jsx)(f.default,{src:this.state.imgSrcUrl||"",className:p,style:h,hasPrivacyChecks:!1,onLoad:this._onImgLoaded,noXHR:!0});return l?(0,b.jsxs)(c.ExternalLink,{href:(0,g.getMapUrl)(e,t,a),className:_.default.container,onClick:d,a8nText:u,"aria-label":o.default._("Open map location",null,{hk:"3LMZEW"}),children:[m,C]}):(0,b.jsxs)("span",{className:_.default.container,children:[m,C]})}}E.defaultProps={linkify:!0,showMarker:!0},E.contextType=C.ThemeContext,E.displayName="Map";var T=(0,m.ListenerHOC)((0,S.default)(E));t.default=T},75109:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{disabled:t}=e,a=(0,r.useModelValues)(e.chat,["unreadCount"]),s=e.onMarkUnread.bind(null,!a.unreadCount);return(0,o.jsx)(n.DropdownItem,{a8n:"mi-mark-as",action:s,disabled:t,children:a.unreadCount?i.default.t(754):i.default.t(755)},"MarkUnreadMenuItem")};var n=a(71174),i=s(a(43725)),r=a(49082),o=a(85893)},96205:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.intersect=function(e,t,a,s,n,i,r,o){const l={x:null,y:null,onLine1:!1,onLine2:!1},d=(o-i)*(a-e)-(r-n)*(s-t);if(0===d)return l;let u=t-i,c=e-n;const h=(a-e)*u-(s-t)*c;u=((r-n)*u-(o-i)*c)/d,c=h/d,l.x=e+u*(a-e),l.y=t+u*(s-t),u>0&&u<1&&(l.onLine1=!0);c>0&&c<1&&(l.onLine2=!0);return l},t.roundUp10thPercentage=function(e,t){if(0===e||0===t)return 0;const a=e/t*100;return a%10==0?a:10*(parseInt(a/10,10)+1)}},41124:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.Download=function(e){let{filesize:t=0,onClick:a}=e;return t>0?(0,d.jsx)("div",{className:r.default.controls,"data-testid":"media-state-download",children:(0,d.jsxs)("button",{className:(0,n.default)(r.default.btnMeta,r.default.cursorPointer),onClick:a,children:[(0,d.jsx)(l.default,{name:"media-download",className:r.default.iconMeta}),(0,d.jsx)("span",{children:i.default.filesize(t)})]})}):(0,d.jsx)("div",{className:r.default.controls,"data-testid":"media-state-download",children:(0,d.jsx)("button",{className:(0,n.default)(r.default.button,r.default.cursorPointer),onClick:a,children:(0,d.jsx)(l.default,{name:"media-download"})})})},t.GifIcon=function(e){let{onClick:t}=e;return(0,d.jsx)("div",{role:"button",className:r.default.controls,onClick:t,"data-testid":"media-state-gif-icon",children:(0,d.jsx)("div",{className:r.default.button,children:(0,d.jsx)(l.default,{name:"media-gif"})})})},t.Pending=function(e){const{cancelable:t}=e,a=(0,n.default)(r.default.icon,t?r.default.cursorPointer:null);return(0,d.jsx)("div",{className:r.default.controls,"data-testid":"media-state-pending",children:(0,d.jsxs)("div",{className:a,children:[(0,d.jsx)("div",{className:r.default.spinner,children:(0,d.jsx)(o.Spinner,{size:50,stroke:3,color:"white"})}),t?(0,d.jsx)("div",{className:r.default.cancel,children:(0,d.jsx)(l.default,{name:"media-cancel"})}):null]})})},t.Play=function(){return(0,d.jsx)("div",{className:r.default.controls,children:(0,d.jsx)("div",{className:r.default.button,children:(0,d.jsx)(l.default,{name:"media-play",className:r.default.play})})})},t.Upload=function(e){let{filesize:t=0}=e;return t>0?(0,d.jsx)("div",{className:r.default.controls,"data-testid":"media-state-upload",children:(0,d.jsxs)("button",{className:(0,n.default)(r.default.btnMeta,r.default.cursorPointer),children:[(0,d.jsx)(l.default,{name:"media-upload",className:r.default.iconMeta}),(0,d.jsx)("span",{children:i.default.filesize(t)})]})}):(0,d.jsx)("div",{className:r.default.controls,"data-testid":"media-state-upload",children:(0,d.jsx)("div",{className:r.default.button,children:(0,d.jsx)(l.default,{name:"media-upload"})})})};var n=s(a(94184)),i=s(a(43725)),r=s(a(11323)),o=a(11054),l=s(a(23217)),d=a(85893)},4293:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{msg:t,thumbnailPlaceholder:a}=e,s=(0,i.default)(e,h),{mediaData:r}=(0,u.useModelValues)(t,["mediaData"]);if(null==r){return null!=a?(0,c.jsx)(p,{className:s.containerClassName,children:a}):null}return(0,c.jsx)(f,(0,n.default)({mediaData:r,thumbnailPlaceholder:a},s))};var n=s(a(81109)),i=s(a(6479)),r=s(a(94184)),o=a(67294),l=s(a(30299)),d=s(a(34949)),u=a(49082),c=a(85893);const h=["msg","thumbnailPlaceholder"];function f(e){const{containerClassName:t,childClassName:a,mediaData:s,thumbnailPlaceholder:n}=e,{preview:i,fullPreviewData:r}=(0,u.useModelValues)(s,["preview","fullPreviewData"]),o=[];if(null!=i&&o.push({opaque:i,key:"preview"}),null!=r&&o.push({opaque:r,key:"fullPreviewData"}),0===o.length){return null!=n?(0,c.jsx)(p,{className:t,children:n}):null}return(0,c.jsx)(p,{className:t,children:o.map((e=>{let{key:t,opaque:s}=e;return s instanceof d.default?(0,c.jsx)(m,{className:a,opaque:s},t):null})).filter(Boolean)})}function p(e){const{className:t,children:a}=e;return(0,c.jsx)("div",{className:(0,r.default)(l.default.container,t),children:a})}function m(e){const{className:t,opaque:a}=e;return(0,o.useEffect)((()=>{if(null!=a)return a.retain(),()=>{a.autorelease()}}),[a]),(0,c.jsx)("div",{className:(0,r.default)(l.default.child,t),style:a?{backgroundImage:`url("${a.url()}")`}:null})}},46346:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.MenuBar=function(e){const t=(0,r.default)(l.default.menu,{[l.default.menuDefault]:!e.theme,[l.default.menuStrong]:"strong"===e.theme,[l.default.menuInverse]:"inverse"===e.theme,[l.default.menuMediaEditor]:"media-editor"===e.theme});return(0,p.jsx)("div",{className:t,children:e.children})},t.MenuBarItem=function(e){const{text:t,transitionName:a="dropdown",disabled:s=!1,children:m,icon:_,title:g,selected:v}=e,[C,S]=(0,o.useState)(!1),y=null!=m&&C?(0,p.jsx)(d.UIE,{displayName:"MenuBarMenuItem",escapable:!0,popable:!0,requestDismiss:()=>{S(!1)},children:m}):null,b=(0,r.default)(l.default.item,{[l.default.selected]:v,[l.default.active]:C,[l.default.disabled]:s}),[E,T]=(0,h.default)((t=>{e.onClick&&e.onClick(t),t.isDefaultPrevented()||(t.preventDefault(),C||null!=m&&S(!0))}),{disabled:s}),[x,M]=(0,u.default)(),P=(0,c.default)(E,x);return(0,p.jsxs)("div",{"data-a8n":i.default.key(e.a8nText),className:b,children:[(0,p.jsxs)("div",(0,n.default)((0,n.default)({},T),{},{className:(0,r.default)(l.default.button,M&&l.default.itemFocused),"data-tab":s?void 0:e.tabOrder,title:g,"aria-label":g,ref:P,children:[_,t&&(0,p.jsx)("span",{className:l.default.itemText,children:t})]})),(0,p.jsx)(f.default,{transitionName:a,children:y})]})};var n=s(a(81109)),i=s(a(99964)),r=s(a(94184)),o=a(67294),l=s(a(471)),d=a(18644),u=s(a(97056)),c=s(a(41104)),h=s(a(60265)),f=s(a(41956)),p=a(85893)},63538:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(94184)),i=a(67294),r=a(88102),o=s(a(43725)),l=a(47809),d=s(a(78487)),u=s(a(23217)),c=s(a(59909)),h=a(19529),f=s(a(83800)),p=a(85893);function m(e,t){const{labelEditEnabled:a,onRemoveLabel:s,selectedModels:u,onCancel:m,onDelete:g}=e,v=(0,c.default)(),C=(0,i.useRef)(null),S=u.getSelected(),y=S.length,b=()=>{r.Cmd.openModal((0,p.jsx)(l.ManageLabelFlowLoadable,{onLabelUpdateComplete:m,modelsToUpdate:S}))},E=()=>C.current;(0,i.useImperativeHandle)(t,(()=>({getElement:E})));const T=(0,f.default)(m);(0,i.useEffect)((()=>{0===y&&T()}),[y,T]),(0,h.useListener)(u,"all",v);const x=S.length;let M,P,A;a&&x>0&&(M=(0,p.jsx)(_,{name:"label",disabled:!x,title:o.default.t(1569),onClick:b})),s&&x>0&&(A=(0,p.jsx)(_,{name:"label-delete",disabled:!x,title:o.default.t(1571),onClick:s})),g&&x>0&&(P=(0,p.jsx)(_,{name:"delete",disabled:!x,title:o.default.t(1570),onClick:g}));const I=(0,n.default)(d.default.multiControls,{[d.default.drawerHeader]:"drawer-header"===e.theme,[d.default.chatListPanel]:"chatlist-panel"===e.theme});return(0,p.jsxs)("div",{className:I,ref:C,children:[(0,p.jsx)(_,{name:"x",onClick:e.onCancel}),(0,p.jsx)("div",{className:d.default.multiCount,children:o.default.t(1226,{count:x,_plural:x})}),M,P,A]})}const _=e=>{let{name:t,title:a,onClick:s,directional:n,disabled:i}=e;return(0,p.jsx)("button",{className:d.default.multiselectIcon,title:a,onClick:s,disabled:i?"disabled":void 0,children:(0,p.jsx)(u.default,{name:t,directional:n})})};var g=(0,i.forwardRef)(m);t.default=g},92218:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(81109)),i=s(a(59854)),r=s(a(18446)),o=s(a(78718)),l=s(a(23279)),d=s(a(45095)),u=a(57319),c=s(a(94184)),h=a(67294),f=a(88102),p=a(84387),m=s(a(39200)),_=s(a(23217)),g=s(a(90012)),v=s(a(75426)),C=a(85893);const S=parseInt(m.default["-move-resize-component-border-radius"],10),y=a(54302).Mirrored(["TOP","BOTTOM","LEFT","RIGHT","TOP_RIGHT","TOP_LEFT","BOTTOM_RIGHT","BOTTOM_LEFT"]),b=[y.LEFT,y.RIGHT],E=[y.TOP,y.TOP_LEFT,y.TOP_RIGHT].concat(b),T=[y.BOTTOM,y.BOTTOM_LEFT,y.BOTTOM_RIGHT].concat(b),x=a(54302).Mirrored(["IDLE","RESIZE","MOVE"]);function M(e){switch(e){case y.LEFT:return m.default.leftResizer;case y.BOTTOM:return m.default.bottomResizer;case y.RIGHT:return m.default.rightResizer;case y.TOP:return m.default.topResizer;case y.TOP_LEFT:return m.default.topLeftResizer;case y.TOP_RIGHT:return m.default.topRightResizer;case y.BOTTOM_LEFT:return m.default.bottomLeftResizer;case y.BOTTOM_RIGHT:return m.default.bottomRightResizer}}function P(e){let{getResizeCallback:t,currentAction:a,directions:s=Array.from(y.members())}=e;return s.map((e=>(0,C.jsx)("div",{"data-testid":`move_resize_component_resizer_${e}`,className:(0,c.default)(M(e),m.default.resizer,{[m.default.defaultCursor]:a===x.RESIZE}),onMouseDown:t(e)},e)))}function A(e){return e.disabled?e.children:(0,C.jsx)("div",{className:(0,c.default)(m.default.moveable,{[m.default.defaultCursor]:e.currentAction===x.RESIZE}),onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,grab:e.currentAction===x.MOVE?"true":"supported",children:e.children})}class I extends h.Component{constructor(e){let t;super(e),this._setStateTimer=new u.ShiftTimer((e=>{this.setState(e)})),this._setRefComponent=e=>{this._refComponent=e},this._setRefBottomContent=e=>{this._refBottomContent=e},this._setRefTopContent=e=>{this._refTopContent=e},this.addListeners=()=>{window.addEventListener("mousemove",this.handleMouseMove),window.addEventListener("mouseup",this.handleMouseUp),window.addEventListener("resize",this.handleResize),this.props.listeners.add(f.Cmd,"floater_escape_overlap",this._escapeOverlapMove)},this._getInitialStyle=()=>this.props.initialStyle?{width:this.props.initialStyle.width,left:this.props.initialStyle.left,bottom:this.props.initialStyle.bottom}:{width:this.props.minWidth,left:this.props.margin.x,bottom:this.props.margin.y},this._getResizerCallback=e=>t=>{0===t.button&&this.setState({resizeDirection:e,currentAction:x.RESIZE,resizeStartPiPStyle:{width:this.state.width,left:this.state.left,bottom:this.state.bottom},resizeStartMousePosition:{x:t.clientX,y:t.clientY}}),t.stopPropagation()},this.handleMoveStart=e=>{0===e.button&&this.setState({currentAction:x.MOVE,moveStartPositionStyle:{left:this.state.left,bottom:this.state.bottom},moveStartMousePosition:{x:e.clientX,y:e.clientY}}),e.stopPropagation()},this.handleMoveStop=()=>{const e=this._getRect();this.props.onMoveStop&&this.props.onMoveStop(e)},this.handleResize=(0,l.default)((()=>{const{extraTopContentHeight:e,extraBottomContentHeight:t}=this._getExtraContentHeight(),a=window.innerHeight-2*this.props.margin.y-e-t,s=window.innerWidth-2*this.props.margin.x;let n=this.state.width,i=n/this.props.aspectRatio,l=this.state.bottom,d=this.state.left;i>a&&(i=a,n=a*this.props.aspectRatio),n>s&&(i=s/this.props.aspectRatio,n=s),l+i>a+this.props.margin.y+t&&(l=a+this.props.margin.y+t-i),d+n>s+this.props.margin.x&&(d=s+this.props.margin.x-n),this.state.previousWindowSize.width<d+n+this.props.margin.x+3&&(d=s+this.props.margin.x-n),this.state.previousWindowSize.height<l+i+this.props.margin.y+t+3&&(l=a+this.props.margin.y+t-i);const u=null!=this.state.previousConvPanelRightBorder&&this.state.previousConvPanelRightBorder>0&&Math.abs(this.state.left+n+this.props.margin.x-this.state.previousConvPanelRightBorder)<3;let c;this.props.escapeConversationHeader&&f.Cmd.getConversationHeaderOffset((e=>{c=e.right}));const h=c&&c<window.innerWidth;u&&null!=c&&0!==c&&h&&(d=c-this.props.margin.x-n);const p={bottom:Math.max(this.props.margin.y,l),left:Math.max(this.props.margin.x,d),width:Math.max(this.props.minWidth,n),previousWindowSize:{height:window.innerHeight,width:window.innerWidth},previousConvPanelRightBorder:c},m=(0,o.default)(this.state,["bottom","left","width","previousWindowSize","previousConvPanelRightBorder"]);(0,r.default)(p,m)||this.setState(p)}),50),this._validateMoveResize=(e,t,a,s)=>{let n=e,r=t,o=a,l=0,d=0,u=0;switch(s){case x.RESIZE:l=this.state.resizeStartPiPStyle.width,d=this.state.resizeStartPiPStyle.left,u=this.state.resizeStartPiPStyle.bottom;break;case x.MOVE:l=this.state.width,d=this.state.moveStartPositionStyle.left,u=this.state.moveStartPositionStyle.bottom}const c=window.innerHeight,h=window.innerWidth,{extraTopContentHeight:f,extraBottomContentHeight:p}=this._getExtraContentHeight(),m=l+n,_=m/this.props.aspectRatio,g=u+o,v=(0,i.default)(g,2),C=d+r,S=(0,i.default)(C,2),y=this.props.minWidth,b=(0,i.default)(this.props.margin.y+p,2),E=(0,i.default)(c-_-this.props.margin.y-f,2),T=(0,i.default)(this.props.margin.x,2),M=(0,i.default)(h-m-this.props.margin.x,2);if(b>v||v>E)switch(s){case x.RESIZE:o=0,r=0,n=0;break;case x.MOVE:o=0}if(T>S||S>M)switch(s){case x.RESIZE:o=0,r=0,n=0;break;case x.MOVE:r=0}if(n&&g+_+this.props.margin.y>c)switch(s){case x.RESIZE:o=0,r=0,n=0}if(n&&C+m+this.props.margin.x>h)switch(s){case x.RESIZE:o=0,r=0,n=0}return(m<y||_+2*this.props.margin.y>c||m+2*this.props.margin.x>h)&&(o=0,r=0,n=0),{deltaWidth:n,deltaBottom:o,deltaLeft:r}},this.handleMouseMove=e=>{let t,a=0,s=0,n=0,i=0;const{extraTopContentHeight:r,extraBottomContentHeight:o}=this._getExtraContentHeight();switch(this.state.currentAction){case x.IDLE:return;case x.RESIZE:switch(this.state.resizeDirection){case y.TOP:s=this.state.resizeStartMousePosition.y-e.clientY,a=s*this.props.aspectRatio;break;case y.BOTTOM:s=e.clientY-this.state.resizeStartMousePosition.y,a=s*this.props.aspectRatio,i=-s;break;case y.RIGHT:a=e.clientX-this.state.resizeStartMousePosition.x,s=a/this.props.aspectRatio,i=-s;break;case y.LEFT:a=this.state.resizeStartMousePosition.x-e.clientX,s=a/this.props.aspectRatio,i=-s,n=-a;break;case y.TOP_RIGHT:a=Math.max(e.clientX-this.state.resizeStartMousePosition.x,this.props.aspectRatio*(this.state.resizeStartMousePosition.y-e.clientY)),s=a/this.props.aspectRatio;break;case y.TOP_LEFT:a=Math.max(this.state.resizeStartMousePosition.x-e.clientX,this.props.aspectRatio*(this.state.resizeStartMousePosition.y-e.clientY)),s=a/this.props.aspectRatio,n=-a;break;case y.BOTTOM_RIGHT:a=Math.max(e.clientX-this.state.resizeStartMousePosition.x,this.props.aspectRatio*(e.clientY-this.state.resizeStartMousePosition.y)),s=a/this.props.aspectRatio,i=-s;break;case y.BOTTOM_LEFT:a=Math.max(this.state.resizeStartMousePosition.x-e.clientX,this.props.aspectRatio*(e.clientY-this.state.resizeStartMousePosition.y)),s=a/this.props.aspectRatio,i=-s,n=-a}t=this._validateMoveResize(a,n,i,x.RESIZE);let l=0,d=0,u=0;if(0===t.deltaWidth&&0===t.deltaLeft&&0===t.deltaBottom){if(a<0)switch(this.state.resizeDirection){case y.TOP:case y.TOP_RIGHT:a=this.props.minWidth-this.state.resizeStartPiPStyle.width,i=0,n=0;break;case y.TOP_LEFT:a=this.props.minWidth-this.state.resizeStartPiPStyle.width,n=-a,i=0;break;case y.BOTTOM:case y.RIGHT:case y.BOTTOM_RIGHT:a=this.props.minWidth-this.state.resizeStartPiPStyle.width,s=a/this.props.aspectRatio,i=-s,n=0;break;case y.LEFT:case y.BOTTOM_LEFT:a=this.props.minWidth-this.state.resizeStartPiPStyle.width,s=a/this.props.aspectRatio,i=-s,n=-a}else if(a>0){const e=this.state.resizeStartPiPStyle.width/this.props.aspectRatio;switch(this.state.resizeDirection){case y.TOP:case y.TOP_RIGHT:a=Math.min(window.innerWidth-this.props.margin.x-r-this.state.resizeStartPiPStyle.width-this.state.resizeStartPiPStyle.left,this.props.aspectRatio*(window.innerHeight-this.props.margin.y-r-e-this.state.resizeStartPiPStyle.bottom))-.1;break;case y.TOP_LEFT:a=Math.min(this.state.resizeStartPiPStyle.left-this.props.margin.x,this.props.aspectRatio*(window.innerHeight-this.props.margin.y-r-e-this.state.resizeStartPiPStyle.bottom))-.1,s=a/this.props.aspectRatio,n=-a;break;case y.BOTTOM:case y.RIGHT:case y.BOTTOM_RIGHT:a=Math.min(window.innerWidth-this.props.margin.x-this.state.resizeStartPiPStyle.width-this.state.resizeStartPiPStyle.left,this.props.aspectRatio*(this.state.resizeStartPiPStyle.bottom-this.props.margin.y-o))-.1,s=a/this.props.aspectRatio,i=-s;break;case y.LEFT:case y.BOTTOM_LEFT:a=Math.min(this.state.resizeStartPiPStyle.left-this.props.margin.x,this.props.aspectRatio*(this.state.resizeStartPiPStyle.bottom-this.props.margin.y-o))-.1,s=a/this.props.aspectRatio,i=-s,n=-a}}l=this.state.resizeStartPiPStyle.width+a,d=this.state.resizeStartPiPStyle.left+n,u=this.state.resizeStartPiPStyle.bottom+i,this.setState({width:l,left:d,bottom:u})}else l=this.state.resizeStartPiPStyle.width+t.deltaWidth,d=this.state.resizeStartPiPStyle.left+t.deltaLeft,u=this.state.resizeStartPiPStyle.bottom+t.deltaBottom,this.setState({width:l,left:d,bottom:u});this.props.onResize&&this.props.onResize(l,d,u);break;case x.MOVE:n=e.clientX-this.state.moveStartMousePosition.x,i=this.state.moveStartMousePosition.y-e.clientY,t=this._validateMoveResize(a,n,i,x.MOVE);let c=0,h=0;c=0!==n&&0===t.deltaLeft?n>0?window.innerWidth-this.state.width-this.props.margin.x:this.props.margin.x:this.state.moveStartPositionStyle.left+t.deltaLeft,h=0!==i&&0===t.deltaBottom?i>0?window.innerHeight-this.state.width/this.props.aspectRatio-this.props.margin.y-r-.1:this.props.margin.y+o:this.state.moveStartPositionStyle.bottom+t.deltaBottom,this.setState({left:c,bottom:h}),this.props.onMove&&this.props.onMove(c,h)}},this.handleMouseUp=()=>{this.setState({currentAction:x.IDLE})},this._getRect=()=>({top:window.innerHeight-this.state.bottom-this.state.width/this.props.aspectRatio,left:this.state.left,bottom:window.innerHeight-this.state.bottom,right:this.state.left+this.state.width}),this._escapeOverlapMove=(e,t)=>{const a=e.getBoundingClientRect(),s={left:a.left-t,top:a.top-t,right:a.right+t,bottom:a.bottom+t},n=this._getRect();if(!this._doOverlap(n,s))return;const i=this._escapeDistance(n,s);let r,o;if(this._isTranslationOutOfBound(-i.toLeftDistance,0)||(void 0===r||i.toLeftDistance<r)&&(r=i.toLeftDistance,o=y.LEFT),this._isTranslationOutOfBound(0,-i.toBottomDistance)||(void 0===r||i.toBottomDistance<r)&&(r=i.toBottomDistance,o=y.BOTTOM),this._isTranslationOutOfBound(i.toRightDistance,0)||(void 0===r||i.toRightDistance<r)&&(r=i.toRightDistance,o=y.RIGHT),this._isTranslationOutOfBound(0,i.toTopDistance)||(void 0===r||i.toTopDistance<r)&&(r=i.toTopDistance,o=y.TOP),void 0===r||null==o)return;let l={};switch(o){case y.LEFT:l={left:this.state.left-i.toLeftDistance};break;case y.BOTTOM:l={bottom:this.state.bottom-i.toBottomDistance};break;case y.RIGHT:l={left:this.state.left+i.toRightDistance};break;case y.TOP:l={bottom:this.state.bottom+i.toTopDistance}}const u=this.props.getUnmountSignal();(0,v.default)((0,d.default)(this._refComponent,"this._refComponent"),l,{duration:200}).then((()=>{u.aborted||this.setState(l)}))},this.props.escapeConversationHeader&&f.Cmd.getConversationHeaderOffset((e=>{t=e.right}));const a={resizeDirection:y.TOP,currentAction:x.IDLE,resizeStartMousePosition:{x:0,y:0},resizeStartPiPStyle:{width:0,bottom:0,left:0},moveStartMousePosition:{x:0,y:0},moveStartPositionStyle:{left:0,bottom:0},previousWindowSize:{height:window.innerHeight,width:window.innerWidth},previousConvPanelRightBorder:t};this.props.animationStartStyle?this.state=(0,n.default)((0,n.default)({},a),this.props.animationStartStyle):this.state=(0,n.default)((0,n.default)({},a),this._getInitialStyle())}componentWillUnmount(){this.handleResize.cancel(),this._setStateTimer.cancel(),window.removeEventListener("mousemove",this.handleMouseMove),window.removeEventListener("mouseup",this.handleMouseUp),window.removeEventListener("resize",this.handleResize)}componentDidMount(){if(!this.props.animationStartStyle)return this.addListeners(),void this.handleResize();const e=this.props.animationStartStyle,t=this._getInitialStyle(),a=e.width/this.props.aspectRatio,s=e.height,i=s/a,r=(0,n.default)((0,n.default)({},t),{},{height:t.width/this.props.aspectRatio,scaleY:[1,i],translateY:[0,(a-s)/2/i]}),o=(0,v.default)((0,d.default)(this._refComponent,"this._refComponent"),r,{easing:"easeInOutQuart",duration:400}),l=this.props.getUnmountSignal();this._initialAnimationPromise=o.then((()=>{l.aborted||(this._initialAnimationPromise=null,this.setState(t),this.addListeners(),this.handleResize())}))}componentDidUpdate(e){if(this.props.aspectRatio!==e.aspectRatio&&this.props.initialStyle){if(this._initialAnimationPromise)return void this._setStateTimer.onOrAfter(400,this.props.initialStyle);const e=this.props.initialStyle.width,t=this.props.initialStyle.left+e-(this.state.width+this.state.left),a=this.props.initialStyle.bottom+e/this.props.aspectRatio-(this.state.bottom+this.state.width/this.props.aspectRatio);Math.abs(t)<.1&&Math.abs(a)<.1?this.setState(this.props.initialStyle):this.setState({width:e})}}_getDimensions(){return{width:this.state.width,height:this.state.width/this.props.aspectRatio}}_getExtraContentHeight(){var e,t;return{extraTopContentHeight:0+(null!=(null===(e=this._refTopContent)||void 0===e?void 0:e.offsetHeight)?this._refTopContent.offsetHeight-S:0),extraBottomContentHeight:null!=(null===(t=this._refBottomContent)||void 0===t?void 0:t.offsetHeight)?this._refBottomContent.offsetHeight-S:0}}_doOverlap(e,t){return!(e.right<=t.left||e.left>=t.right)&&!(e.bottom<=t.top||e.top>=t.bottom)}_escapeDistance(e,t){return{toLeftDistance:e.right-t.left,toBottomDistance:t.bottom-e.top,toRightDistance:t.right-e.left,toTopDistance:e.bottom-t.top}}_isTranslationOutOfBound(e,t){const a=window.innerWidth,s=window.innerHeight,n=this.state.left+e,i=this.state.bottom+t,r=this.state.width,o=r/this.props.aspectRatio,l=this.props.margin.x,d=a-r-this.props.margin.x,u=this.props.margin.y,c=s-o-this.props.margin.y;return u>i||i>c||(l>n||n>d)}render(){const e=this._getDimensions(),t={width:e.width,height:e.height,bottom:this.state.bottom+"px",left:this.state.left+"px"};return(0,C.jsxs)("div",{"data-testid":"move_resize_component",ref:this._setRefComponent,className:(0,c.default)(m.default.moveResizeComponentContainer),style:t,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,children:[this.props.enableDragBar||null!=this.props.topContent?(0,C.jsxs)("div",{ref:this._setRefTopContent,className:(0,c.default)(m.default.extraContent,m.default.topContent,{[m.default.extraContentVisible]:this.props.extraContentVisible}),children:[this.props.enableDragBar?(0,C.jsx)(A,{onMouseDown:this.handleMoveStart,onMouseUp:this.handleMoveStop,currentAction:this.state.currentAction,children:(0,C.jsx)(_.default,{className:m.default.dragBar,name:"drag-texture"})}):null,this.props.topContent,(0,C.jsx)(P,{getResizeCallback:this._getResizerCallback,currentAction:this.state.currentAction,directions:E})]}):null,null!=this.props.bottomContent?(0,C.jsxs)("div",{ref:this._setRefBottomContent,style:{top:!this.props.extraContentVisible&&this._refBottomContent?`calc(100% - ${this._refBottomContent.offsetHeight}px)`:null},className:(0,c.default)(m.default.extraContent,m.default.bottomContent,{[m.default.extraContentVisible]:this.props.extraContentVisible}),children:[(0,C.jsx)("div",{className:(0,c.default)(m.default.blurryBackground)}),this.props.bottomContent,(0,C.jsx)(P,{getResizeCallback:this._getResizerCallback,currentAction:this.state.currentAction,directions:T})]}):null,this.props.disableResize?null:(0,C.jsx)(P,{getResizeCallback:this._getResizerCallback,currentAction:this.state.currentAction,directions:null!=this.props.topContent?b:void 0}),(0,C.jsx)("div",{className:(0,c.default)(m.default.moveResizeComponentInnerContainer,this.props.className),children:(0,C.jsxs)(A,{onMouseDown:this.handleMoveStart,onMouseUp:this.handleMoveStop,currentAction:this.state.currentAction,disabled:this.props.enableDragBar,children:[this.props.children,this.state.currentAction!==x.IDLE?(0,C.jsx)("div",{className:m.default.overlay}):null]})})]})}}I.displayName="MoveResizeComponent";var w=(0,p.ListenerHOC)((0,g.default)(I));t.default=w},16351:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{selectedMessages:t,chat:a,toastPosition:s,onCancel:b,disableRevoke:A,noSortOnForward:I,downloadButton:w=!0}=e,k=(0,T.default)(),j=(0,l.useRef)(null),N=()=>{const e=t.getSelected();a&&d.Cmd.sendStarMsgs(a,e,null,s),b()},O=()=>{const e=t.getSelected();a&&d.Cmd.sendUnstarMsgs(a,e,null,s),b()},R=()=>{const e=(0,i.default)(t.getSelected(),(e=>e.mediaData));if(!e.length)return;const a=(0,i.default)(e,(e=>!e.mediaData.isDownloadable()));a.length>0?(d.Cmd.openToast((0,M.jsx)(E.Toast,{msg:o.default._("Downloading",null,{hk:"2sMvu6"}),id:(0,E.genId)()})),Promise.all((0,n.default)(a,(e=>e.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:v.default.WEBC_RMR_REASON_CODE.MULTI_SELECT_DOWNLOAD,isUserInitiated:!0})))).then((()=>{const t=(0,i.default)(e,(e=>e.mediaData.isDownloadable()));e.length>t.length&&d.Cmd.openToast((0,M.jsx)(E.Toast,{msg:_.default.t(471,{_plural:e.length-t.length,count:e.length-t.length}),id:(0,E.genId)()})),t.length&&f.FileSaver.initDownload(t)}))):f.FileSaver.initDownload(e),b()};(0,x.useListeners)(t.getSelected().map((e=>({source:e,eventOrEvents:"change:star",callback:k})))),(0,x.useListener)(t,"all",k),(0,x.useListener)(C.MsgCollection,"change:star",(e=>{t.isSelected(e)&&k()}));const D=e.selectedMessages.getSelected(),L=D.length,B=D.every((e=>e.canForward())),F=D.every((e=>e.canStar())),G=D.every((e=>e.mediaData)),U=D.every((e=>!e.asRevoked)),V=(0,M.jsx)(P,{disabled:!L||!B,name:"forward",onClick:()=>{let e=t.getSelected();!I&&a&&(e=a.sortMsgs(e));const s=e.length,n=()=>{b()},r=(0,i.default)(e,(e=>e.canForward()));r.length?s!==r.length?d.Cmd.openModal((0,M.jsx)(u.default,{title:_.default.t(358),onOK:()=>{d.Cmd.openModal((0,M.jsx)(p.ForwardMessageFlowLoadable,{msgs:r,pushTransition:"none",popTransition:"none",onForward:n}),{transition:"modal-flow"})},okText:_.default.t(479),onCancel:()=>d.Cmd.closeModal(),cancelText:_.default.t(1574),children:_.default.t(357)})):d.Cmd.openModal((0,M.jsx)(p.ForwardMessageFlowLoadable,{msgs:e,pushTransition:"none",popTransition:"none",onForward:n}),{transition:"modal-flow"}):d.Cmd.openModal((0,M.jsx)(u.default,{title:_.default.t(468),onOK:()=>d.Cmd.closeModal(),okText:_.default.t(1765),children:_.default.t(465,{_plural:s})}))},title:_.default.t(482,{_plural:L})}),H=(0,M.jsx)(P,{name:"delete",disabled:!L,title:_.default.t(389,{_plural:L}),onClick:()=>{const e=t.getSelected();let n;A||(e.every((e=>e.canSenderRevoke()))?n=h.RevokePrompt.Sender:1===e.length&&e[0].canAdminRevoke()&&(n=h.RevokePrompt.Admin)),a&&d.Cmd.openModal((0,M.jsx)(c.default,{chat:a,msgList:e.map(y.unproxy),deletePrompt:!0,revokePrompt:n,toastPosition:s,onCancel:b}))}});let K,q,W;L&&D.every((e=>e.star))?(K=O,q="unstar-btn",W=_.default.t(1377,{_plural:L})):(K=N,q="star-btn",W=_.default.t(1276,{_plural:L}));const Y=(0,M.jsx)(P,{name:q,disabled:!L||!F,title:W,onClick:K}),z=(0,m.canEditLabelAssociation)()&&(0,M.jsx)(P,{disabled:!L||!U,name:"label",onClick:()=>{const e=t.getSelected();d.Cmd.openModal((0,M.jsx)(g.ManageLabelFlowLoadable,{onLabelUpdateComplete:b,modelsToUpdate:e}))},title:_.default.t(680)});let Q;Modernizr.adownload&&w&&G&&(Q=(0,M.jsx)(P,{name:"download",disabled:!L,title:_.default.t(1568),onClick:R}));const $=(0,r.default)(S.default.multiControls,{[S.default.mediaGalleryTheme]:"mediaGallery"===e.theme});return(0,M.jsxs)("div",{className:$,ref:j,children:[(0,M.jsx)(P,{name:"x",onClick:e.onCancel}),(0,M.jsx)("span",{className:S.default.multiCount,children:_.default.t(1226,{count:L,_plural:L})}),z,Y,H,V,Q]})};var n=s(a(35161)),i=s(a(63105)),r=s(a(94184)),o=s(a(48360)),l=a(67294),d=a(88102),u=s(a(52665)),c=s(a(99131)),h=a(80226),f=a(77811),p=a(75362),m=a(57701),_=s(a(43725)),g=a(47809),v=s(a(11339)),C=a(59871),S=s(a(31430)),y=a(31019),b=s(a(23217)),E=a(50452),T=s(a(59909)),x=a(19529),M=a(85893);const P=e=>{let{name:t,title:a,onClick:s,directional:n,disabled:i}=e;return(0,M.jsx)("button",{className:S.default.multiselectIcon,title:a,onClick:s,disabled:i?"disabled":void 0,children:(0,M.jsx)(b.default,{name:t,directional:n})})}},90922:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{disabled:t}=e,a=(0,d.useModelValues)(e.mute,["isMuted"]),s=(0,d.useModelValues)(e.chat,["archive"]),h=(0,d.useModelValues)(e.settings,["showArchiveV2"]),f=e.onMute.bind(null,!a.isMuted);let p,m,_,g;s.archive&&(0,r.archiveV2Supported)()&&h.showArchiveV2?(p=c,g=o.default.t(1747),m=i.ThemeOptions.MUTED,_=(0,u.jsx)(l.Tooltip,{anchor:l.TooltipAnchor.Left,children:n.default._("Archived chats are muted",null,{hk:"31ZVD"})})):(g=a.isMuted?o.default.t(1747):o.default.t(1746),p=f);return(0,u.jsx)(i.DropdownItem,{action:p,disabled:t,theme:m,tooltip:_,children:g})};var n=s(a(48360)),i=a(71174),r=a(57701),o=s(a(43725)),l=a(2712),d=a(49082),u=a(85893);const c=()=>{}},12176:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ContactAndGroupName=function(e){const{chat:t,contact:a,xstyle:s}=e;return(0,g.jsxs)("span",{className:(0,l.default)(s),children:[(0,g.jsx)(E,{contact:a,useShortName:!0}),(0,g.jsx)("span",{children:""}),(0,g.jsx)(b,{chat:t,groupMetadata:t.groupMetadata})]})},t.ContactName=y,t.GroupName=b,t.Name=E;var n=s(a(81109)),i=s(a(6479)),r=s(a(63116)),o=s(a(94184)),l=s(a(56720)),d=a(65417),u=a(7293),c=a(5124),h=a(84543),f=s(a(37151)),p=s(a(39680)),m=s(a(23217)),_=a(49082),g=a(85893);const v=["chat"],C=["chat"],S=["contact"];function y(e){const{element:t="span",highlightText:a,titlify:s,ellipsify:n,breakWord:i,you:l,selectable:v,useShortName:C,useDisplayName:S,onClick:y,showLabel:b,showBusinessCheckmark:E,showNotifyName:T,useVerifiedName:x,firstLabel:M,xstyle:P}=e,A=(0,_.useModelValues)(e.contact,["isPSA","formattedUser","formattedName","formattedShortName","displayName","labels","name","notifyName","isMe","verifiedName"]);let I,w;if(a&&(I=c.Configuration.SearchName({terms:[a]})),w=S&&A.displayName?A.displayName:C&&A.formattedShortName?A.formattedShortName:x&&A.verifiedName?A.verifiedName:l&&A.isMe?A.formattedName:T&&!A.name&&A.notifyName?`~${A.notifyName}`:A.formattedUser,!w)return __LOG__(4,void 0,new Error,!0)`displayName:${w},
formattedName:${A.formattedName},
name:${A.name},
formattedShortName:${A.formattedShortName},
formattedUser:${A.formattedUser}`,SEND_LOGS("display name is null or undefined"),"";const k=(0,g.jsx)(d.EmojiText,{text:(0,p.default)(w),element:t,className:(0,o.default)(A.isPSA?f.default.psa:null,e.className),formatters:I,titlify:s,ellipsify:n,breakWord:i,direction:"auto",selectable:v,inlineblock:!0,onClick:y,xstyle:P}),j=e.labels||A.labels;j&&M&&(0,r.default)(j,M);const N=b&&j&&(0,g.jsx)("div",{className:f.default.labels,children:(0,g.jsx)(h.Labels,{labels:j,showName:!1})});return A.isPSA||u.GK.supportsFeature(u.GK.F.VNAME_V_2)&&E?(0,g.jsxs)("span",{className:f.default.verified,children:[k,(0,g.jsx)("div",{className:f.default.icon,children:(0,g.jsx)(m.default,{name:"psa-verified"})}),N]}):N?(0,g.jsxs)("span",{className:f.default.hasLabels,children:[k,N]}):k}function b(e){const{element:t,highlightText:a,titlify:s,ellipsify:n,breakWord:i,onClick:u,showLabel:v,firstLabel:C,className:S,xstyle:y}=e;let b;const E=(0,_.useModelValues)(e.chat,["formattedTitle","labels"]),T=(0,_.useModelValues)(e.groupMetadata,["support"]);a&&(b=c.Configuration.SearchName({terms:[a]}));const x=e.labels||E.labels;x&&C&&(0,r.default)(x,C);const M=v&&x?(0,g.jsx)("div",{className:f.default.labels,children:(0,g.jsx)(h.Labels,{labels:x,showName:!1})}):null,P=(0,g.jsx)(d.EmojiText,{text:(0,p.default)(E.title()),element:t,className:(0,o.default)(S,(0,l.default)(y)),formatters:b,titlify:s,ellipsify:n,breakWord:i,direction:"auto",inlineblock:!0,onClick:u});return T.support?(0,g.jsxs)("div",{className:(0,o.default)({[f.default.verified]:!0,[f.default.hasLabels]:!!M}),children:[P,(0,g.jsx)("div",{className:f.default.icon,children:(0,g.jsx)(m.default,{name:"psa-verified"})}),M]}):M?(0,g.jsxs)("div",{className:f.default.hasLabels,children:[P,M]}):P}function E(e){if(e.chat&&!e.chat.isUser){const{chat:t}=e,a=(0,i.default)(e,v);return(0,g.jsx)(b,(0,n.default)({chat:t,groupMetadata:t.groupMetadata},a))}let t,a;if(e.chat){const{chat:s}=e,n=(0,i.default)(e,C);t=s.contact,a=n}else{const{contact:s}=e;t=s,a=(0,i.default)(e,S)}return(0,g.jsx)(y,(0,n.default)({contact:t},a))}},91526:(e,t,a)=>{"use strict";var s=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const e=(0,n.useRef)(null),t=()=>{let t;t=d.Stream.displayInfo===d.StreamInfo.OFFLINE||d.Stream.displayInfo===d.StreamInfo.TIMEOUT?-1:i.ChatCollection.filter((e=>e.shouldShowUnreadInTitle)).length,e.current!==t&&(e.current=t,(0,l.setTitleAndIcon)(t))};return(0,n.useEffect)((()=>{t()}),[]),(0,u.useListener)(r.Cmd,"alert_new_msg",(e=>o.showMsgNotification(e))),(0,u.useListener)(r.Cmd,"alert_new_reaction_msg",(e=>o.showReactionNotification(e))),(0,u.useListener)(r.Cmd,"alert_call",o.showCallNotification),(0,u.useListener)(r.Cmd,"cancel_call",o.cancelCallNotification),(0,u.useListener)(i.ChatCollection,"add remove reset change:archive change:optimisticUnreadCount change:muteExpiration",t),(0,u.useListener)(i.ChatCollection,"change:hasUnread",o.closeNotifications),(0,u.useListener)(d.Stream,"change:displayInfo",t),null};var n=a(67294),i=a(69951),r=a(88102),o=s(a(96669)),l=a(1933),d=a(8080),u=a(19529)},11791:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(23493)),i=s(a(94184)),r=a(67294),o=s(a(58866)),l=a(85893);const d="transform 300ms cubic-bezier(.1,.82,.25,1)";function u(e,t){const a=(0,r.useRef)(),s=(0,r.useRef)();(0,r.useImperativeHandle)(t,(()=>({get insideContainer(){return s.current},get outsideContainer(){return a.current}})));const{objectPosition:u,onObjectLoad:c,position:f,size:p,type:m,zoomIn:_}=e,g=null==p?void 0:p.width,v=null==p?void 0:p.height,C=null==_?void 0:_.factor,S=null==_?void 0:_.translateX,y=null==_?void 0:_.translateY,b=(0,r.useCallback)((()=>{null!=c&&null!=s.current&&c(s.current.firstChild)}),[c]),E=(0,r.useCallback)((()=>{if(null==g||null==v)return;const e=a.current,t=s.current;if(!e||!t)return;let n;switch(m){case"contain":n=function(e,t,a){const s=e.clientWidth,n=e.clientHeight;let r=t,l=a,d=0,u=0;r/s>l/n?(l*=s/r,r=s,l<n&&(d=n/2-l/2)):(r*=n/l,l=n,r<s&&(u=s/2-r/2));return{style:{width:r,height:l,top:d,left:u,position:"absolute"},className:(0,i.default)(o.default.fit)}}(e,g,v);break;case"cover":n=function(e,t,a){const s=e.clientWidth,n=e.clientHeight;let r=t,l=a,d=0,u=0;r!==s&&(l*=s/r,r=s,l>n&&(d=n/2-l/2));l<n&&(r*=n/l,l=n,r>s&&(u=s/2-r/2));return{style:{width:r,height:l,top:d,left:u,position:"absolute"},className:(0,i.default)(o.default.fit)}}(e,g,v);break;case"scaleDown":n=h(e,g,v);break;case"zoomIn":n=function(e,t,a,s){const n=h(e,t,a).style;let r;r=s?{width:n.width,height:n.height,transition:d,transform:`translateX(${s.translateX}px) translateY(${s.translateY}px) scale(${s.factor})`}:{width:n.width,height:n.height,transition:d};return{style:r,className:(0,i.default)(o.default.fit,o.default.fitScaledown,o.default.fitZoomin)}}(e,g,v,null!=C&&null!=S&&null!=y?{factor:C,translateX:S,translateY:y}:null);break;default:return __LOG__(4,void 0,new Error,!0)`unrecognized type ${m}`,void SEND_LOGS("object-fit")}e.removeAttribute("class"),t.removeAttribute("style"),e.classList.add(...n.className.split(" ")),"relative"===f&&e.classList.add(o.default.fitRelative);const r=null!=u?u:n.style.position;t.style.setProperty("position",r);for(const e of Object.keys(n.style)){const a=n.style[e];null==a||Number.isNaN(a)||t.style.setProperty(e,"number"==typeof a?a+"px":a)}b()}),[b,u,f,v,g,m,C,S,y]);return(0,r.useEffect)((()=>{const e=(0,n.default)((()=>{E()}));return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[E]),(0,r.useLayoutEffect)((()=>{E()}),[E]),(0,l.jsx)("div",{className:(0,i.default)({[o.default.fit]:!0,[o.default.fitRelative]:"relative"===f}),ref:a,children:(0,l.jsx)("div",{style:{visibility:"hidden"},ref:s,children:e.children})})}var c=(0,r.forwardRef)(u);function h(e,t,a){const s=e.clientWidth,n=e.clientHeight;let r=a,l=t;return r>n&&(r=n,l=t*(n/a)),l>s&&(l=s,r=a*(s/t)),{style:{width:l,height:r},className:(0,i.default)(o.default.fit,o.default.fitScaledown)}}t.default=c},73437:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(57319),i=a(67294),r=s(a(32161)),o=s(a(32756)),l=s(a(43725)),d=a(10435),u=a(84387),c=s(a(65932)),h=a(85893);const f="sort remove reset add";class p extends i.PureComponent{constructor(e){super(e),this._onParticipantsUpdate=()=>{this._recalculateParticipantsTimer.debounce(100)},this._recalculateParticipantsTimer=new n.ShiftTimer((()=>{this.setState({participants:m(this.props.groupMetadata)})}));const{listeners:t,groupMetadata:{participants:a}}=e;this.state={participants:m(e.groupMetadata)},t.add(a,f,this._onParticipantsUpdate)}componentDidMount(){this.ensureParticipantsSorted()}componentDidUpdate(e){this.ensureParticipantsSorted();const t=e.groupMetadata.participants,a=this.props.groupMetadata.participants;if(a!==t){const e=this.props.listeners;e.remove(t,f,this._onParticipantsUpdate),e.add(a,f,this._onParticipantsUpdate),this._recalculateParticipantsTimer.cancel(),this.setState({participants:m(this.props.groupMetadata)})}}componentWillUnmount(){this._recalculateParticipantsTimer.cancel()}ensureParticipantsSorted(){this.props.groupMetadata.participants.ensureSorted()}render(){const e=this.props.groupMetadata.support?l.default.t(1325):this.props.overridingText||this.state.participants.join(l.default.t(420))||this.props.placeholder;return e?(0,h.jsx)(o.default,{text:e,location:this.props.location}):null}}function m(e){return(0,d.isDropLastNameEnabled)()?e.participants.map((t=>{const a=t.contact;return e.hasUniqueShortNameMention(a)?a.formattedShortNameWithNonBreakingSpaces:a.formattedName.replace(/\s/g," ")})):e.participants.map((e=>{const t=e.contact.formattedShortNameWithNonBreakingSpaces,[a]=t.split(/\s/);return r.default.exec(a)?a:t}))}p.CONCERNS={groupMetadata:["participants","support"]},p.displayName="ParticipantsListClass";var _=(0,u.ListenerHOC)((0,c.default)(p,p.CONCERNS));t.default=_},43556:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(54302).Mirrored(["GROUP","PROFILE","COMMUNITY"]);t.default=s},15246:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{disabled:t,onPinOrUnpin:a}=e,s=(0,r.useModelValues)(e.chat,["pin"]);return(0,o.jsx)(n.DropdownItem,{a8n:"mi-pin",action:()=>{a(!s.pin)},disabled:t,children:null!=s.pin&&0!==s.pin?i.default.t(1368):i.default.t(1041)},"PinChat")};var n=a(71174),i=s(a(43725)),r=a(49082),o=a(85893)},56190:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.PttButton=void 0;var n=s(a(45095)),i=s(a(99964)),r=s(a(52013)),o=s(a(94184)),l=a(67294),d=s(a(56720)),u=s(a(69618)),c=s(a(8908)),h=a(85893);const f=(0,l.forwardRef)(((e,t)=>{const{a8nKey:a,ariaLabel:s,children:f,xstyle:p,confirmOnMouseUp:m,disabled:_,onConfirm:g,dataTab:v}=e,C=(0,l.useRef)(null);(0,l.useImperativeHandle)(t,(()=>({focus:()=>r.default.focus((0,n.default)(C.current,"buttonRef.current"))})));const S=(0,l.useRef)(!1);let y,b,E;return _||(b=()=>{S.current=!0,window.addEventListener("mouseup",(()=>{S.current=!1}),{once:!0})},y=e=>{m&&(S.current||0===e.button&&g(e))},E=g),(0,h.jsx)("button",{ref:C,"data-a8n":i.default.key(a),"data-tab":null!=v?v:u.default.TAB_ORDERS.PTT_BUTTON,className:(0,o.default)((0,d.default)(p),c.default.clipFix),onClick:E,onMouseUp:y,onMouseDown:b,"aria-label":s,"aria-disabled":_,children:f})}));t.PttButton=f,f.displayName="PttButton"},50270:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.PttCancelButton=void 0;var n=s(a(48360)),i=a(67294),r=s(a(56720)),o=a(56190),l=a(85893);const d={pttCancelButton:{display:"p357zi0d",alignItems:"gndfcl4n",justifyContent:"ac2vgrno",width:"mgp6u6um",height:"j8e73hjv",color:"r8quorc8",":hover":{color:"mtber8f9"}},svg:{width:"i0x3nve6"}},u=(0,i.forwardRef)(((e,t)=>{const{onConfirm:a,confirmOnMouseUp:s,disabled:i}=e;return(0,l.jsx)(o.PttButton,{ref:t,xstyle:d.pttCancelButton,a8nKey:"ptt-cancel-btn",ariaLabel:n.default._("Cancel",null,{hk:"3jOaUM"}),confirmOnMouseUp:s,onConfirm:a,disabled:i,children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 22",className:(0,r.default)(d.svg),children:(0,l.jsx)("path",{d:"M5,0,3,2H0V4H16V2H13L11,0ZM15,5H1V19.5A2.5,2.5,0,0,0,3.5,22h9A2.5,2.5,0,0,0,15,19.5Z",fill:"currentColor"})})})}));t.PttCancelButton=u,u.displayName="PttCancelButton"},68400:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.PttCloseButton=void 0;var n=s(a(48360)),i=a(67294),r=(s(a(56720)),a(56190)),o=a(85893);const l={base:{width:"i0x3nve6",height:"hpdpob1j"},outOfChat:{width:"mgp6u6um",height:"j8e73hjv",marginStart:"p3lsiedt",marginTop:"b9l0eqez",display:"p357zi0d",justifyContent:"ac2vgrno",alignItems:"gndfcl4n",color:"bsd0t79a"},outOfChatEnabled:{":hover":{opacity:"gnd3v8n5"}}},d=(0,i.forwardRef)(((e,t)=>{const{onConfirm:a,dataTab:s,theme:i,disabled:d=!1}=e,u="out-of-chat-playback"===i;return(0,o.jsx)(r.PttButton,{ref:t,xstyle:[l.base,u&&l.outOfChat,u&&!d&&l.outOfChatEnabled],a8nKey:"ptt-player-close-button",onConfirm:a,confirmOnMouseUp:!1,dataTab:s,disabled:d,ariaLabel:n.default._("Close",null,{hk:"2TV3vP"}),children:(0,o.jsx)("svg",{width:"15.6",height:"15.6",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{d:"M15.8002 1.80001L14.2002 0.200012L8.0002 6.40001L1.8002 0.200012L0.200195 1.80001L6.4002 8.00001L0.200195 14.2L1.8002 15.8L8.0002 9.60001L14.2002 15.8L15.8002 14.2L9.6002 8.00001L15.8002 1.80001Z",fill:"white"})})})}));t.PttCloseButton=d,d.displayName="PttCloseButton"},90601:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.PttPauseAndResumeRecordingButton=void 0;var n=s(a(48360)),i=a(67294),r=s(a(56720)),o=a(56190),l=a(85893);const d={pttPauseAndResumeRecordingButton:{position:"g0rxnol2",width:"tknnhhou",height:"sai7fuui",color:"odoy9p39"},pttPauseAndResumeRecordingButtonEnabled:{":hover":{color:"qpj2ed6z"}},growOnHover:{transition:"iwt3stqw",transformOrigin:"s79hpmcy"},growOnHoverEnabled:{":hover":{transform:"ksz6vod1"}},icon:{position:"lhggkp7q",top:"qq0sjtgm",start:"tkdu00h0",width:"ln8gz9je",height:"ppled2lx",opacity:"axi1ht8l",transition:"odkvbdo1",transform:"sqzaidt6"},iconActive:{opacity:"bs7a17vp",transform:"b4xm8rjh"}},u=(0,i.forwardRef)(((e,t)=>{const{recording:a,onConfirm:s,confirmOnMouseUp:i,disabled:u=!1}=e,c=a?n.default._("Pause recording",null,{hk:"2x8PGf"}):n.default._("Resume recording",null,{hk:"4nMHh3"}),h=(0,r.default)(d.growOnHover,!u&&d.growOnHoverEnabled);return(0,l.jsxs)(o.PttButton,{ref:t,xstyle:[d.pttPauseAndResumeRecordingButton,!u&&d.pttPauseAndResumeRecordingButtonEnabled],a8nKey:"ptt-pause-and-resume-recording-button",ariaLabel:c,confirmOnMouseUp:i,onConfirm:s,disabled:u,children:[(0,l.jsx)("div",{className:(0,r.default)(d.icon,a&&d.iconActive),children:(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:[(0,l.jsx)("circle",{cx:"16",cy:"16",r:"14.75",fill:"none",stroke:"currentColor",strokeWidth:"2.5"}),(0,l.jsx)("path",{className:h,d:"M20.65,21.69V10.25H17.31V21.69Zm-9.3-11.44V21.69h3.34V10.25Z",fill:"currentColor"})]})}),(0,l.jsx)("div",{className:(0,r.default)(d.icon,!a&&d.iconActive),children:(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",className:h,children:[(0,l.jsx)("path",{fill:"currentColor",d:"M16,4c1.9,0,3.4,1.4,3.4,3.1v8.6c0,1.7-1.5,3.1-3.4,3.1 c-1.9,0-3.4-1.4-3.4-3.1V7.1C12.6,5.4,14.1,4,16,4"}),(0,l.jsx)("path",{fill:"currentColor",d:"M16.3,23.4c-0.2,0-0.6,0-0.9,0l-0.3,0c-3.7-0.4-6.6-3.7-7.1-7.8 L8,15.2c0-0.5,0.3-0.9,0.8-0.9h0.4c0.5,0,0.8,0.4,0.9,0.9l0.1,0.4c0.5,3.1,3,5.5,5.9,5.5c2.9,0,5.3-2.3,5.9-5.4l0.1-0.4 c0-0.5,0.4-0.9,0.9-0.9h0.4c0.4,0,0.8,0.4,0.8,0.9c0,0,0,0.1-0.1,0.6c-0.6,4.1-3.7,7.3-7.4,7.6L16.3,23.4z"}),(0,l.jsx)("path",{fill:"currentColor",d:"M17.1,27.3c0,0.4-0.4,0.7-0.9,0.7h-0.5c-0.5,0-0.9-0.3-0.9-0.7V23 c0-0.4,0.4-0.7,0.9-0.7h0.5c0.5,0,0.9,0.3,0.9,0.7V27.3z"})]})})]})}));t.PttPauseAndResumeRecordingButton=u,u.displayName="PttPauseAndResumeRecordingButton"},16538:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.PttPlayPauseButton=void 0;var n=s(a(48360)),i=a(67294),r=s(a(56720)),o=a(56190),l=a(85893);const d={base:{width:"i0x3nve6",height:"hpdpob1j"},composeBox:{color:"a95u9rhs"},composeBoxEnabled:{":hover":{color:"sao4npu1"}},outOfChat:{width:"mgp6u6um",height:"j8e73hjv",marginStart:"pmmx02fg",marginTop:"b9l0eqez",display:"p357zi0d",justifyContent:"ac2vgrno",alignItems:"gndfcl4n",color:"bsd0t79a"},outOfChatEnabled:{":hover":{opacity:"gnd3v8n5"}}},u={transform:"d7dzraxg"},c=(0,i.forwardRef)(((e,t)=>{const{paused:a,onConfirm:s,disabled:i=!1,theme:c,dataTab:h}=e,f=a?(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16px",height:"18px",viewBox:"0 0 16 18",className:(0,r.default)(u),children:(0,l.jsx)("path",{d:"M15.05,8.39,2,.32a1,1,0,0,0-1.53.85V16.83A1,1,0,0,0,2,17.7L15,10.1A1,1,0,0,0,15.05,8.39Z",fill:"currentColor"})}):(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16px",height:"18px",viewBox:"0 0 16 18",children:[(0,l.jsx)("path",{fill:"currentColor",d:"M1.9,1c-0.6,0-1,0.4-1,1v14c0,0.6,0.4,1,1,1H5c0.6,0,1-0.4,1-1V2c0-0.6-0.4-1-1-1H1.9z"}),(0,l.jsx)("path",{fill:"currentColor",d:"M10.9,1c-0.6,0-1,0.4-1,1v14c0,0.6,0.4,1,1,1h3.1c0.6,0,1-0.4,1-1V2c0-0.6-0.4-1-1-1H10.9z"})]});return(0,l.jsx)(o.PttButton,{ref:t,xstyle:[d.base,"compose-box"===c&&d.composeBox,"compose-box"===c&&!i&&d.composeBoxEnabled,"out-of-chat-playback"===c&&d.outOfChat,"out-of-chat-playback"===c&&!i&&d.outOfChatEnabled],a8nKey:"ptt-play-pause-button",onConfirm:s,confirmOnMouseUp:!1,disabled:i,dataTab:h,ariaLabel:a?n.default._("Play",null,{hk:"4CjEWt"}):n.default._("Pause",null,{hk:"1kvbzt"}),children:f})}));t.PttPlayPauseButton=c,c.displayName="PttPlayPauseButton"},91921:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.PttSendButton=void 0;var n=s(a(48360)),i=a(67294),r=s(a(56720)),o=s(a(43725)),l=a(56190),d=a(85893);const u={pttSendButton:{width:"mgp6u6um",minWidth:"c59meja3",height:"j8e73hjv",color:"i8t1ujht"},pttSendButtonEnabled:{":hover":{color:"fiyt298h"}},growOnHover:{transition:"iwt3stqw",transformOrigin:"s79hpmcy"},growOnHoverEnabled:{":hover":{transform:"ksz6vod1"}},pttSendButtonIconRTL:{transform:"n4o0o7gj"}},c=(0,i.forwardRef)(((e,t)=>{const{disabled:a=!1,confirmOnMouseUp:s,onConfirm:i}=e;return(0,d.jsx)(l.PttButton,{ref:t,xstyle:[u.pttSendButton,!a&&u.pttSendButtonEnabled],a8nKey:"ptt-send-btn",ariaLabel:n.default._("Send",null,{hk:"4xIWBB"}),confirmOnMouseUp:s,onConfirm:i,disabled:a,children:(0,d.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 35 35",className:(0,r.default)(o.default.isRTL()&&u.pttSendButtonIconRTL),children:[(0,d.jsx)("path",{d:"M17.5,0h0A17.51,17.51,0,0,1,35,17.5h0A17.51,17.51,0,0,1,17.5,35h0A17.51,17.51,0,0,1,0,17.5H0A17.51,17.51,0,0,1,17.5,0Z",fill:"currentColor"}),(0,d.jsx)("path",{className:(0,r.default)(u.growOnHover,!a&&u.growOnHoverEnabled),d:"M25.64,18.55,11.2,24.93a.86.86,0,0,1-1.13-.44.83.83,0,0,1-.06-.44l.48-4.11a1.36,1.36,0,0,1,1.24-1.19l7.51-.6a.16.16,0,0,0,.14-.16.16.16,0,0,0-.14-.14l-7.51-.6a1.36,1.36,0,0,1-1.24-1.19L10,12a.84.84,0,0,1,.74-.94.87.87,0,0,1,.45.06l14.44,6.38a.61.61,0,0,1,.31.79A.59.59,0,0,1,25.64,18.55Z",fill:"#fff"})]})})}));t.PttSendButton=c,c.displayName="PttSendButton"},22234:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.PttStopButton=void 0;var n=s(a(48360)),i=a(67294),r=s(a(56720)),o=a(56190),l=a(85893);const d={pttStopButton:{width:"tknnhhou",height:"sai7fuui",color:"odoy9p39"},pttStopButtonEnabled:{":hover":{color:"qpj2ed6z"}},growOnHover:{transition:"iwt3stqw",transformOrigin:"s79hpmcy"},growOnHoverEnabled:{":hover":{transform:"ksz6vod1"}}},u=(0,i.forwardRef)(((e,t)=>{const{onConfirm:a,confirmOnMouseUp:s,disabled:i=!1}=e;return(0,l.jsx)(o.PttButton,{ref:t,xstyle:[d.pttStopButton,!i&&d.pttStopButtonEnabled],a8nKey:"ptt-stop-button",ariaLabel:n.default._("Stop",null,{hk:"3e89E3"}),confirmOnMouseUp:s,onConfirm:a,disabled:i,children:(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:[(0,l.jsx)("path",{fill:"currentColor",d:"M16,0C7.2,0,0,7.2,0,16s7.2,16,16,16s16-7.2,16-16S24.8,0,16,0z M16,30C8.3,30,2,23.7,2,16S8.3,2,16,2 s14,6.3,14,14S23.7,30,16,30z"}),(0,l.jsx)("path",{className:(0,r.default)(d.growOnHover,!i&&d.growOnHoverEnabled),fill:"currentColor",d:"M13,11c-1.1,0-2,0.9-2,2v6c0,1.1,0.9,2,2,2h6c1.1,0,2-0.9,2-2v-6c0-1.1-0.9-2-2-2H13z"})]})})}));t.PttStopButton=u,u.displayName="PttStopButton"},80132:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.Radio=h,t.RadioWithLabel=function(e){const{label:t,isHovered:a}=e,s=(0,i.default)(e,u),[l,f]=(0,r.useState)(a),p=()=>{f(!0)},m=()=>{f(!1)};return(0,d.jsxs)("label",{className:(0,o.default)(c.option),onMouseOver:p,onMouseOut:m,onFocus:p,onBlur:m,children:[(0,d.jsx)(h,(0,n.default)((0,n.default)({},s),{},{isHovered:l})),(0,d.jsx)("span",{className:(0,o.default)(c.optionText),children:t})]})};var n=s(a(81109)),i=s(a(6479)),r=a(67294),o=s(a(56720)),l=s(a(23217)),d=a(85893);const u=["label","isHovered"],c={container:{display:"p357zi0d"},a11yHidden:{position:"lhggkp7q",width:"cxec7x23",height:"kanlod6e",overflowX:"gfz4du6o",overflowY:"r7fjleex",clip:"nmeg1xfo",clipPath:"okm7a8wg",whiteSpace:"le5p0ye3"},option:{display:"p357zi0d",paddingTop:"a71rq12o",paddingEnd:"f9ovudaz",paddingBottom:"pcbmd69e",paddingStart:"gx1rr48f",cursor:"ajgl1lbb"},optionText:{fontSize:"enbbiyaj",lineHeight:"htjsae3x",display:"l7jjieqr",paddingStart:"khscay3k"},svg:{opacity:"brh521k9",fill:"h9l086de"},svgOver:{opacity:"bs7a17vp"}};function h(e){let t;t=!0===e.checked?"checkbox-round-radio-checked":"checkbox-round-passive";const a=(0,r.useRef)(),s=(0,o.default)(c.svg,(!0===e.checked||e.isHovered)&&c.svgOver);return(0,d.jsxs)("div",{className:(0,o.default)(c.container),children:[(0,d.jsx)("input",{type:"radio",ref:a,name:e.name,value:e.value,checked:e.checked,onChange:e.onChange,className:(0,o.default)(c.a11yHidden),"data-testid":"radio-input",tabIndex:"-1"}),(0,d.jsx)("div",{className:s,onClick:function(){var e,t;null===(e=a.current)||void 0===e||e.click(),null===(t=a.current)||void 0===t||t.focus()},"data-testid":"radio-input-ui",tabIndex:"-1","aria-hidden":"true","aria-checked":e.checked,role:"radio",children:(0,d.jsx)(l.default,{name:t})})]})}},8694:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(81109)),i=s(a(6479)),r=s(a(94184)),o=a(67294),l=s(a(31693)),d=s(a(88738)),u=s(a(41104)),c=s(a(41502)),h=s(a(83800)),f=a(85893);const p=["children","className","onResize"];function m(e,t){const{children:a,className:s,onResize:m}=e,_=(0,i.default)(e,p),g=(0,h.default)(m),[v,C]=(0,d.default)(),S=(0,u.default)(v,t),y=(0,c.default)(C);return(0,o.useEffect)((()=>{if(null!=y&&(C.width!==y.width||C.height!==y.height)){const{width:e,height:t}=C;g({width:e,height:t})}}),[C,y,g]),(0,f.jsx)("div",(0,n.default)((0,n.default)({className:(0,r.default)(l.default.container,s),ref:S},_),{},{children:a}))}var _=(0,o.forwardRef)(m);t.default=_},91665:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getObserverMap=o,t.getResizeObserver=l,t.observe=function(e,t){const a=l(),s=o();if(s.has(e))throw new Error("You can't observe the same element twice.");return s.set(e,t),a.observe(e),()=>{a.unobserve(e),s.delete(e)}};var n=s(a(91033));let i,r;function o(){return null==i&&(i=new WeakMap),i}function l(){return null==r&&(r=new n.default((e=>{for(const t of e){const e=o().get(t.target),a=t.contentRect,{x:s,y:n,width:i,height:r,top:l,left:d,bottom:u,right:c}=a;null!=e&&e({x:s,y:n,width:i,height:r,top:l,left:d,bottom:u,right:c})}}))),r}},61146:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{width:t,height:a,rgbaBuffer:i}=e,r=(0,s.useRef)(null),o=(0,s.useRef)(null);return(0,s.useEffect)((()=>{const e=r.current,t=o.current;e&&t&&i&&(t.data.set(new Uint8Array(i)),e.putImageData(t,0,0))}),[i]),(0,n.jsx)("canvas",{role:"button",className:e.className,width:e.width,height:e.height,onClick:e.onClick,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,ref:e=>{e?(r.current=e.getContext("2d"),o.current=r.current.createImageData(t,a)):(r.current=null,o.current=null)}})};var s=a(67294),n=a(85893)},62101:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BasePlugin=void 0,t.pluginContext=function(){return Symbol("rte-plugin")};t.BasePlugin=class{constructor(){this._internalHandlers=new Map}initialize(e){this.ctx=e}registerHandler(e,t,a){const s=this._internalHandlers.get(t)||new Map;s.set(e,a),this._internalHandlers.set(t,s)}unregisterHandler(e,t){const a=this._internalHandlers.get(t);a&&(a.delete(e),a.size||this._internalHandlers.delete(t))}handle(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const a=this._internalHandlers.get(e);return!!a&&function(e){const t=[];return e.forEach((e=>t.push(e))),t}(a).some((e=>e.apply(null,t)))}}},31079:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(1769)),i=a(52835),r=a(18609),o=s(a(70527)),l=a(72761),d=s(a(9180)),u=s(a(8103)),c=s(a(15196)),h=a(16477),f=s(a(65894)),p=s(a(68662));const m=new o.default,_=new n.default;class g extends((0,l.PluggableInput)([i.EmojiPlugin,_,u.default,m,c.default,d.default])){}t.default=g,g.Suggestions=(0,p.default)(h.Suggestions,{plugin:m}),g.EmojiSuggestions=(0,p.default)(r.EmojiSuggestions,{plugin:_}),g.QuickRepliesSuggestions=(0,p.default)(f.default,{plugin:d.default})},18888:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t;const a=new n.default,s=(0,o.PluggableInput)([i.EmojiPlugin,a,l.default]);return t=e=class extends s{},e.EmojiSuggestions=(0,d.default)(r.EmojiSuggestions,{plugin:a}),t};var n=s(a(1769)),i=a(52835),r=a(18609),o=a(72761),l=s(a(8103)),d=s(a(68662))},8932:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{base:t,unicode:a,action:s,children:d}=e;return(0,l.jsxs)("div",{className:r.default.gridContainer,children:[(0,l.jsx)("span",{className:r.default.baseEmoji,children:(0,l.jsx)(n.DropdownItem,{type:"emoji-grid",a8n:"mi-emoji-variant",action:e=>s(e,a,t),children:(0,l.jsx)(i.EmojiText,{text:t,formatters:o.Configuration.LargeEmojiOnly(),tabIndex:"-1"})},"base")}),(0,l.jsx)("div",{className:r.default.options,children:d})]})};var n=a(71174),i=a(65417),r=s(a(5538)),o=a(5124),l=a(85893)},1791:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const a=e.reduce(((e,t)=>{const{handlers:a}=t;return a?(Object.keys(a).forEach((s=>{e[s]||(e[s]=[]);const n=a[s];null!=n&&e[s].push([t,n])})),e):e}),{});return Object.keys(a).reduce(((e,s)=>{const n=a[s];return e[s]=function(e,t){return a=>{e.some((e=>{let[s,n]=e;const i=n.call(s,a,t);return!!a.defaultPrevented||!0===i&&(a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),!0)}))}}(n,t),e}),{})}},82958:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const a=e.reduce(((e,t)=>{const{hooks:a}=t;return a?(Object.keys(a).forEach((s=>{e[s]||(e[s]=[]),e[s].push([t,a[s]])})),e):e}),{});return Object.keys(a).reduce(((e,s)=>(e[s]=function(e,t){return function(){for(var a=arguments.length,s=new Array(a),n=0;n<a;n++)s[n]=arguments[n];e.forEach((e=>{let[a,n]=e;return n.call(a,...s,t)}))}}(a[s],t),e)),{})}},70411:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const a=e.reduce(((e,t)=>{const{hotkeys:a}=t;return a?(Object.keys(a).forEach((s=>{e[s]||(e[s]=[]),e[s].push([t,a[s]])})),e):e}),{});return Object.keys(a).reduce(((e,s)=>(e[s]=function(e,t){return a=>{e.some((e=>{let[s,n]=e;const i=n.call(s,a,t);return!!a.defaultPrevented||!0===i&&(a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),!0)}))}}(a[s],t),e)),{})}},72473:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.Direction=void 0,t.getSelectionSibling=function(e,t){const a=window.getSelection();if(!a||!a.rangeCount)return null;const s=a.getRangeAt(0);if(!s.collapsed)return null;const{startContainer:i,startOffset:r}=s;if(i===e){const{childNodes:e}=i,{length:a}=e;if(t===n.FORWARD&&r>a||t===n.BACKWARD&&!r)return null;const s=t===n.BACKWARD?1:0,o=e[r-s];return o instanceof Element?o:null}{const e=i.length===r;if(t===n.BACKWARD&&r)return null;if(t===n.FORWARD&&!e)return null;const a=t===n.BACKWARD?"previousSibling":"nextSibling",s=i[a];return s instanceof Element?s:null}};const n=(0,s(a(59891)).default)({FORWARD:void 0,BACKWARD:void 0});t.Direction=n},81472:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return!e.getModifierState("Shift")&&!e.getModifierState("Alt")&&!e.getModifierState("Control")}},42107:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e instanceof HTMLElement&&Boolean(e.dataset.mentionJid)}},27666:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.metaKey||e.shiftKey||e.altKey||e.ctrlKey}},12062:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return function(a,s){let o="",l=!1,d=!0;return(0,i.default)(a,s,(a=>{return l?(s=a,d=n.EmojiUtil.isEmoji(s)||r.test(s),!0):o.length>e||(l=a===t,void(l||(o=a+o)));var s})),l&&d?o:null}};var n=a(70449),i=s(a(37773));const r=/\W/},37773:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){if(1!==t.rangeCount)return;if(!t.getRangeAt(0).collapsed)return;let{anchorNode:s,anchorOffset:d}=t;if(s&&s===e.refInput){if(d-=1,-1===d)return;if(s=s.childNodes[d],null==s)return;d=s.textContent.length}s=(0,o.default)(s)?l(s):s,(0,n.default)(s,(e=>{const t=l(e);return t?[t]:[]}),(e=>{let t,n;if((0,r.isEmojiEl)(e))return t=i.Clipboard.fromNode(e,!0).toPlainString(),a(t,0,t);n=e===s?e.textContent.slice(0,d):e.textContent;const o=n.lastIndexOf("\n"),l=o>=0;let u;l&&(n=n.slice(o+1));for(let e=n.length-1;e>=0;e--)if(t=n.charAt(e),u=a(t,e,n),u)return!0;return!!l||void 0}))};var n=s(a(72781)),i=a(11933),r=a(52835),o=s(a(56244));function l(e){let t=e;do{var a;if(t=null===(a=t)||void 0===a?void 0:a.previousSibling,t&&t.nodeType!==Node.TEXT_NODE&&!(0,r.isEmojiEl)(t))return null}while(t&&(0,o.default)(t));return t}},51577:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){let a=t;for(;a>0;)e.modify("extend","backward","character"),a--}},66065:(e,t)=>{"use strict";function a(e,t){return e.msMatchesSelector?e.msMatchesSelector(t):e.webkitMatchesSelector?e.webkitMatchesSelector(t):e.matches(t)}function s(e,t){for(let s=0;s<t.length;++s){const{serializers:n}=t[s];if(n)for(let t=0;t<n.length;++t){const[s,i]=n[t];if(a(e,s))return i}}return null}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const a=[];let r=e.cloneNode(!0).firstChild;for(;r;){switch(r.nodeType){case n:{const e=s(r,t);if(e){a.push(e(r));break}switch(r.tagName){case"P":case"BR":case"PRE":a.push("\n");break;case"DIV":r.firstChild&&3!==r.firstChild.nodeType||a.push("\n")}break}case i:a.push(r.nodeValue)}if(r.hasChildNodes())r=r.firstChild;else{for(;r&&!r.nextSibling;)if(r=r.parentNode,r===e){r=null;break}r&&(r=r.nextSibling)}}return a.join("")};const n=1,i=3},748:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(66065));var i=(e,t)=>{t.focusNode||(__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("serializeTextBeforeCursor requires selection.focusNode"));const a=document.createRange();a.setStart(e,0),a.setEnd(t.focusNode,t.focusOffset);const s=a.cloneContents();return(0,n.default)(s,[])};t.default=i},95605:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return t.reduce(((e,t)=>{let{parsers:a}=t;return a?a.reduce(((e,t)=>t(e)),e):e}),(0,n.default)(e))};var n=s(a(7187))},68662:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(81109)),i=a(85893);var r=(e,t)=>{var a,s;function r(a){return(0,i.jsx)(e,(0,n.default)((0,n.default)({},a),t))}return r.displayName=`Wrapper(${null!==(a=null!==(s=e.displayName)&&void 0!==s?s:e.name)&&void 0!==a?a:"Component"})`,r};t.default=r},7057:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=(0,s(a(59891)).default)({CHANGE:void 0,MOUNT:void 0,INPUT:void 0});t.default=n},69995:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(98913)),i=s(a(74691)),r=a(67294),o=s(a(56720)),l=s(a(49357)),d=a(55414),u=s(a(63824)),c=s(a(43725)),h=s(a(8694)),f=s(a(23217)),p=a(93353),m=s(a(89256)),_=s(a(1784)),g=a(85893);const v={button:{position:"lhggkp7q",zIndex:"jnl3jror",display:"p357zi0d",alignItems:"gndfcl4n",justifyContent:"ac2vgrno",height:"ppled2lx",backgroundColor:"jfnhg5wd"},buttonIcon:{color:"a633jkfz"},floatRight:{top:"qq0sjtgm",right:"grt5ktjy"},floatLeft:{top:"qq0sjtgm",left:"tukmaf4q"},resizeContainer:{height:"ppled2lx",width:"ln8gz9je",backgroundColor:"jfnhg5wd"},tabItem:{display:"l7jjieqr",marginLeft:"lalctav4",marginRight:"lyrceosr"},tabContainer:{overflowX:"gfz4du6o",overflowY:"r7fjleex",whiteSpace:"le5p0ye3"},tabList:{transitionProperty:"bo8jc6qi",transitionDuration:"p4t1lx4y",transitionTimingFunction:"pu4k07i0"}},C=(e,t,a,s)=>{if(!e||!t)return!1;const n=e.getBoundingClientRect(),i=t.getBoundingClientRect(),r=(null==a?void 0:a.clientWidth)||0,o=(null==s?void 0:s.clientWidth)||0;return i.right>n.right-(c.default.isRTL()?o:r)||i.left<n.left+(c.default.isRTL()?r:o)};function S(e,t){const[a,s]=(0,r.useState)(0),[S,y]=(0,r.useState)(0),[b,E]=(0,r.useState)(0),[T,x]=(0,r.useState)(!1),[M,P]=(0,r.useState)(0),[A,I]=(0,r.useState)(0),w=(0,r.useContext)(u.default),{className:k,onItemClick:j,numItems:N,renderItem:O,selectedIndex:R,buttonStyle:D}=e,L=(0,r.useRef)([]),B=(0,r.useRef)([]),F=(0,r.useRef)(null),G=(0,r.useRef)(null),U=(0,r.useRef)(null);(0,r.useEffect)((()=>{if(!j)return;const e=(0,i.default)(R,0,N);e!==R&&(j(e),__LOG__(4,void 0,new Error,!0)`Selection out of bounds`,SEND_LOGS(`auto_carousel_menu: selectedIndex (${R}) is out of bounds (0-${N})`)),R>N?j(N):R<0&&j(0)}),[R,N,j]),(0,r.useLayoutEffect)((()=>{var e;const t=e=>e?c.default.isRTL()?a-e.offsetLeft-e.clientWidth:e.offsetLeft:0,s=L.current[R],n=L.current[S],i=L.current[L.current.length-1],r=t(n),o=((e,a)=>e?t(e)+e.clientWidth-a:0)(i,r);P((null==s?void 0:s.clientWidth)||0),I((null==s?void 0:s.offsetLeft)||0),E(r),x(o<=a),null===(e=B.current[R])||void 0===e||e.focus()}),[L,R,S,a,N]);const V=(e,t)=>{j&&j(e,t)},H=()=>{T||y((0,i.default)(S+3,0,N))},K=()=>{0!==S&&y((0,i.default)(S-3,0,N))},q=(0,r.useCallback)((()=>{var e;null===(e=B.current[R])||void 0===e||e.focus()}),[R]),W=(e,t)=>(0,g.jsx)("div",{className:(0,o.default)(v.tabItem),ref:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((t=>{L.current[e]=t})),children:(0,g.jsx)(p.MenuTab,{role:"tab",onRef:t=>{B.current[e]=t},onClick:V,sectionId:e,selected:t,showFocusIndicator:w,theme:p.THEMES.NONE,children:O(e)},e)},e),Y=(e,t,a,s)=>(0,g.jsx)(_.default,{onRef:s,xstyle:[v.button,e,D],onClick:a,children:(0,g.jsx)(f.default,{className:(0,o.default)(v.buttonIcon),name:t})});let z,Q;c.default.isRTL()?(z=Y(v.floatRight,"chevron-right",K,(e=>{U.current=e})),Q=Y(v.floatLeft,"chevron-left",H,(e=>{G.current=e}))):(z=Y(v.floatLeft,"chevron-left",K,(e=>{U.current=e})),Q=Y(v.floatRight,"chevron-right",H,(e=>{G.current=e})));const $=(c.default.isRTL()?1:-1)*b,X=()=>{var e;return(null===(e=F.current)||void 0===e?void 0:e.contains(document.activeElement))||!1};return(0,r.useImperativeHandle)(t,(()=>({focus:q,hasFocus:X}))),(0,g.jsx)(l.default,{className:k,children:(0,g.jsxs)(h.default,{className:(0,o.default)(v.resizeContainer),onResize:e=>{let{width:t}=e;s(t)},children:[!(S<=0)&&z,(0,g.jsx)("div",{ref:F,className:(0,o.default)(v.tabContainer),children:(0,g.jsxs)(d.HotKeys,{className:(0,o.default)(v.tabList),style:{transform:"translateX("+$+"px)"},role:"tablist",handlers:{left:e=>{const t=c.default.isRTL()?1:-1,a=(0,i.default)(R+t,0,N-1),s=B.current[a];C(F.current,s,G.current,U.current)&&(c.default.isRTL()?H():K()),V(a,e),e.preventDefault()},right:e=>{const t=c.default.isRTL()?-1:1,a=(0,i.default)(R+t,0,N-1),s=B.current[a];C(F.current,s,G.current,U.current)&&(c.default.isRTL()?K():H()),V(a,e),e.preventDefault()}},tabIndex:null,children:[(0,n.default)(N,(e=>W(e,R===e))),(0,g.jsx)(m.default,{selectedTabIndex:R,width:M,offsetPx:A,hide:!1,animate:!0})]})}),!T&&Q]})})}var y=(0,r.forwardRef)(S);t.default=y},89256:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(67294),i=s(a(56720)),r=s(a(41502)),o=a(85893);const l={menuTabsMarker:{position:"lhggkp7q",bottom:"jxacihee",left:"tukmaf4q",backgroundColor:"futycye9",opacity:"bs7a17vp",transitionProperty:"p3nha244",transitionDuration:"p4t1lx4y",transitionTimingFunction:"ijehb8ro"},animate:{transitionProperty:"ej4zaygv",transitionDuration:"p4t1lx4y",transitionTimingFunction:"ijehb8ro"},animateWithTransform:{transitionProperty:"egl74e4l",transitionDuration:"p4t1lx4y",transitionTimingFunction:"ijehb8ro"},hide:{opacity:"axi1ht8l"}};function d(e){const{hide:t,selectedTabIndex:a,width:s,offsetPx:n,animate:d}=e,u=(0,r.default)(a);let c,h,f;return f=(-1!==u||a===u)&&Boolean(d),-1!==a?(h=`translateX(${n}px)`,c="2px"):-1!==u&&-1===a&&(c="0px"),(0,o.jsx)("div",{className:(0,i.default)(l.menuTabsMarker,t&&l.hide,!f&&d&&l.animate,f&&l.animateWithTransform),style:{width:s,transform:h,height:c}})}var u=(0,n.memo)(d);t.default=u},35330:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{numColumns:t,numItems:a,selectedIndex:s,onItemClick:g,renderItem:v}=e,[C,S]=(0,i.useState)(null),[y,b]=(0,i.useState)(0),E=(0,i.useCallback)((e=>{let{onItemClick:t,numItems:a,selectedIndex:s}=e;if(!t||0===a)return;s<0&&(__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("carousel_menu: selectedIndex is smaller than 0"));const n=a-1;s>n&&t(n)}),[]);(0,i.useEffect)((()=>{E(e)}),[E,e]);const T=(e,t)=>{g&&g(e,t)},x=()=>{"number"!=typeof a||y+t>a||b(y+1)},M=e=>{let a,{className:s,icon:i,onClick:r,id:l}=e;return a=null!=C&&0!==C?`${Math.round(C/t)}px`:100/t+"%",(0,m.jsx)("div",{className:(0,n.default)(o.default.button,s),style:{width:a},onClick:r,role:"button","data-testid":l,children:(0,m.jsx)(h.default,{className:o.default.buttonIcon,name:i})})};let P;P=s<y?-1:s>=y+t?t-1+1:(s-y)%t;return(0,m.jsx)(r.default,{className:e.className,children:(0,m.jsxs)(c.default,{className:o.default.resizeContainer,onResize:e=>{let{width:t}=e;S(t)},children:[(0,m.jsx)(p.default,{children:(0,m.jsx)(_,{offset:y,handlePrevClick:()=>{0!==y&&b(y-1)},renderButton:M})}),(0,m.jsx)(d.default,{menuWidth:C,numColumns:t,numItems:a,offset:y,renderItem:(e,s,n)=>"number"==typeof a&&e>=a?null:(0,m.jsx)(l.default,{column:e-y,carouselNumColumns:t,menuWidth:n,onClick:T,index:e,selected:s,children:v(e)},e),selectedIndex:s}),(0,m.jsx)(p.default,{children:(()=>{if("number"!=typeof a)return null;if(y+t>=a)return null;const e=u.default.isRTL()?"chevron-left":"chevron-right";return M({className:o.default.nextButton,icon:e,onClick:x,id:"next-button"})})()}),(0,m.jsx)(f.default,{numTabs:t,selectedTabIndex:P,hide:-1===P||0===P&&y>0||P===t,animate:!0})]})})};var n=s(a(94184)),i=a(67294),r=s(a(49357)),o=s(a(54262)),l=s(a(72092)),d=s(a(60160)),u=s(a(43725)),c=s(a(8694)),h=s(a(23217)),f=s(a(24649)),p=s(a(41956)),m=a(85893);function _(e){let{offset:t,handlePrevClick:a,renderButton:s}=e;if(0===t)return null;const n=u.default.isRTL()?"chevron-right":"chevron-left";return s({className:o.default.prevButton,icon:n,onClick:a,id:"prev-button"})}},72092:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{column:t,carouselNumColumns:a,index:s,menuWidth:l}=e,d=(0,n.useRef)(null);let u;u=null!=l&&0!==l?`${Math.round(l/a)}px`:100/a+"%";const c=i.default.isRTL()?-1:1;return(0,o.jsx)(r.MenuTab,{onRef:e=>{d.current=e},onClick:e.onClick,sectionId:s,selected:e.selected,theme:0!==s&&(t<=0||t>=a)?r.THEMES.CAROUSEL_END:r.THEMES.CAROUSEL,transform:`translateX(${100*t*c}%)`,width:u,children:e.children})};var n=a(67294),i=s(a(43725)),r=a(93353),o=a(85893)},60160:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{numItems:t,offset:a,renderItem:s,selectedIndex:r,menuWidth:o}=e;let{numColumns:l}=e;return(0,i.jsx)(i.Fragment,{children:(()=>{let e=0;const i=t-l;return 1===a&&(l+=1,e=-1),a===i-1&&(l+=1),(0,n.default)(l,(n=>{const i=n+e+a;return i<0||i<1&&a>0||i>=t?null:s(i,i===r,o)}))})()})};var n=s(a(98913)),i=a(85893)},57297:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertTabToMood=t.ValidMoods=t.StickerTabs=t.SCROLL_THROTTLE_TIME=t.SCROLL_CLICK_TIME_GAP=t.MINIMUM_LOADING_TIME=t.INPUT_SHOW_POINT=t.INPUT_HIDE_POINT=t.INPUT_BAR_TOTAL_HEIGHT=t.INPUT_BAR_SCROLL_SENSITIVITY=t.INPUT_BAR_SCROLL_FAST=void 0;t.SCROLL_CLICK_TIME_GAP=1e3;t.SCROLL_THROTTLE_TIME=100;t.INPUT_BAR_TOTAL_HEIGHT=63;t.INPUT_BAR_SCROLL_SENSITIVITY=5;t.INPUT_BAR_SCROLL_FAST=15;t.INPUT_HIDE_POINT=44.099999999999994;t.INPUT_SHOW_POINT=94.5;const s=a(54302).Mirrored(["LOVE","GREETINGS","HAPPY","SAD","ANGRY","CELEBRATE"]);t.ValidMoods=s;const n=a(54302).Mirrored(["RECENTS","FAVORITES","LOVE","GREETINGS","HAPPY","SAD","ANGRY","CELEBRATE","STORE"]);t.StickerTabs=n;t.convertTabToMood=e=>{const t=e;return s.isValid(t)?s.cast(t):null};t.MINIMUM_LOADING_TIME=1500},28325:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DisplayLocation=void 0;const s=a(54302).Mirrored(["ComposeBox","StatusV3ComposeBox","Dropdown"]);t.DisplayLocation=s},19290:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(67134));var i=(0,s(a(59891)).default)(n.default);t.default=i},1823:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.SIDE_MARGIN=t.EmojiRow=t.EMOJI_WIDTH=t.EMOJI_HEIGHT=void 0;var n=s(a(52013)),i=a(67294),r=a(88102),o=a(60811),l=a(70449),d=s(a(84636)),u=s(a(22399)),c=a(13185),h=a(55414),f=s(a(43725)),p=a(84387),m=s(a(45260)),_=a(18644),g=s(a(46780)),v=a(85893);const C=parseInt(u.default["-side-margin"],10);t.SIDE_MARGIN=C;const S=parseInt(u.default["-emoji-height"],10);t.EMOJI_HEIGHT=S;const y=parseInt(u.default["-emoji-width"],10);t.EMOJI_WIDTH=y;class b extends i.Component{constructor(){super(...arguments),this.state={skinTonePicker:null},this._lastFocusedElement=null,this._closeSkinTonePicker=()=>{var e;const t=null===(e=this.state.skinTonePicker)||void 0===e?void 0:e.anchor;t&&t instanceof HTMLElement&&this._focusElement(t),this.setState({skinTonePicker:null})},this._setEmojiVariant=(e,t,a)=>{T(e),c.EmojiVariantCollection.setVariant(t,a),this._handleEmoji(t)},this._clearPickerTimer=()=>{this._pickerTimer&&clearTimeout(this._pickerTimer)},this._showContextMenu=(e,t,a)=>{const s=l.EmojiUtil.getSkinToneBase(e);s&&this.setState({skinTonePicker:{menu:(0,v.jsx)(m.default,{base:s,action:this._setEmojiVariant,unicode:e}),anchor:t,type:"picker",dirX:o.DirX.RIGHT,dirY:o.DirY.TOP,horizontal:!0,autoFocus:a,findFirstItem:!0}})},this._handleEmoji=e=>{let t=e;if(l.EmojiUtil.getSkinToneBase(t)){const e=c.EmojiVariantCollection.getVariantIfExists(t);if(null!=e)t=e;else if(this.props.allowVariantPrompt)return!0}this.props.onEmoji(t)},this._handleEmojiArrowDown=e=>{T(e);const t=x(e);null!=t&&this.props.focusBelow&&this.props.focusBelow(t)},this._handleEmojiArrowLeft=e=>{f.default.isRTL()?this._focusEmojiRight(e):this._focusEmojiLeft(e)},this._handleEmojiArrowRight=e=>{f.default.isRTL()?this._focusEmojiLeft(e):this._focusEmojiRight(e)},this._focusEmojiLeft=e=>{T(e);const t=x(e);if(null==t)return;const a=t-1;a<0?this.props.focusAbove(this.props.numColumns-1):this.focusEmojiAt(a)},this._focusEmojiRight=e=>{T(e);const t=x(e);if(null==t)return;const a=t+1;a>=this.props.emojis.length?this.props.focusBelow&&this.props.focusBelow(0):this.focusEmojiAt(a)},this._handleEmojiArrowUp=e=>{T(e);const t=x(e);null!=t&&this.props.focusAbove(t)},this._handleEmojiEnter=e=>{T(e);const t=x(e);this._selectEmojiAt(t)},this._handleClick=e=>{T(e);const t=x(e);this._selectEmojiAt(t)},this._handleContextMenu=e=>{T(e);const t=this._getEmojiUnicode(e);t&&e.target instanceof HTMLElement&&this._showContextMenu(t,e.target)},this._handleMouseDown=e=>{T(e),this.state.skinTonePicker&&this.setState({skinTonePicker:null});const t=e.target;if(!(t instanceof HTMLElement))return;const a=this._getEmojiUnicode(e);a&&this._startPickerTimer(a,t)},this._setRefEmojis=e=>{this._refEmojis=e}}shouldComponentUpdate(e,t){return this.props.emojis!==e.emojis||this.state.skinTonePicker!==t.skinTonePicker}componentDidMount(){this.props.listeners.add(c.EmojiVariantCollection,"add remove change:variant",(()=>this.forceUpdate()))}componentDidUpdate(e,t){t.skinTonePicker&&this.state.skinTonePicker&&this._closeSkinTonePicker()}focusEmojiAt(e){const t=this._getRefEmojiAt(e);t&&this._focusElement(t)}selectFirstEmoji(){this._selectEmojiAt(0)}restoreFocus(){this._lastFocusedElement&&this._focusElement(this._lastFocusedElement)}_focusElement(e){const t=parseInt(e.dataset.emojiIndex,10);isNaN(t)||(n.default.focus(e,{preventScroll:!0}),this.props.onEmojiFocus(e),this._lastFocusedElement=e)}_selectEmojiAt(e){if(null==e)return;const t=this.props.emojis[e];if(!t)return;const a=this._getRefEmojiAt(e);if(!a)return;this._clearPickerTimer();this._handleEmoji(t)&&this._showContextMenu(t,a,!0)}_getEmojiUnicode(e){const t=x(e);if(null==t)return;const a=this.props.emojis[t];return a||null}_getRefEmojiAt(e){const t=this.props.emojis.length-1,a=Math.max(Math.min(e,t),0);if(null!=this._refEmojis)return this._refEmojis.children[a]}_startPickerTimer(e,t){this._clearPickerTimer(),this._pickerTimer=setTimeout((()=>{delete this._pickerTimer,this.props.listeners.addOnce(r.Cmd,"window_click",T),this._showContextMenu(e,t)}),250),this.props.listeners.addOnce(window,"mouseup",this._clearPickerTimer,{capture:!0})}render(){let e;this.state.skinTonePicker&&(e=(0,v.jsx)(_.UIE,{displayName:"SkinTonePicker",popable:!0,escapable:!0,requestDismiss:this._closeSkinTonePicker,requestRecentFocusOnUnmount:!1,children:(0,v.jsx)(g.default,{tooltip:this.state.skinTonePicker})}));const{emojis:t}=this.props;return t.length?(0,v.jsxs)("div",{className:u.default.panel,children:[(0,v.jsx)(h.HotKeys,{onMouseDown:this._handleMouseDown,onClick:this._handleClick,onContextMenu:this._handleContextMenu,handlers:{up:this._handleEmojiArrowUp,down:this._handleEmojiArrowDown,left:this._handleEmojiArrowLeft,right:this._handleEmojiArrowRight,enter:this._handleEmojiEnter,space:this._handleEmojiEnter},children:(0,v.jsx)("div",{ref:this._setRefEmojis,className:u.default.section,children:t.map(((e,t)=>{const a=c.EmojiVariantCollection.getVariantIfExists(e);return(0,v.jsx)(d.default,{element:"span",emoji:a||e,size:"large",tabIndex:"-1","data-emoji-index":t},e)}))})}),e]}):null}}b.displayName="EmojiRowImpl";const E=(0,p.ListenerHOC)(b);function T(e){e.preventDefault(),e.stopPropagation()}function x(e){if(!(e.target instanceof HTMLElement))return null;const t=parseInt(e.target.dataset.emojiIndex,10);return isNaN(t)?null:t}t.EmojiRow=class extends E{focusEmojiAt(e){this.getComponent().focusEmojiAt(e)}selectFirstEmoji(){this.getComponent().selectFirstEmoji()}restoreFocus(){this.getComponent().restoreFocus()}}},55547:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(48926)),i=s(a(44908)),r=s(a(10691)),o=s(a(18446)),l=s(a(74691)),d=s(a(94184)),u=a(67294),c=a(70449),h=s(a(61064)),f=a(57741),p=a(55414),m=s(a(70446)),_=s(a(43725)),g=s(a(30071)),v=a(92671),C=a(54222),S=a(455),y=s(a(41956)),b=a(85893);class E extends u.PureComponent{constructor(){super(...arguments),this._fastScroll=!1,this._scrollFromAnimation=!1,this._scrollFromFocus=!1,this._lastScrollTop=this.props.displayCache.scrollTop,this._lastSectionId=this.props.displayCache.sectionId,this.state={scrolledToTop:0===this.props.displayCache.scrollTop,searchText:this.props.defaultSearchText||"",showSearchInput:this.props.displayCache.showSearchInput},this._handleEmojiFocus=(e,t)=>{this._scrollFromFocus=!0,this._scrollFromFocusHandlerTimeoutID&&clearTimeout(this._scrollFromFocusHandlerTimeoutID),this._scrollFromFocusHandlerTimeoutID=setTimeout((()=>{this._scrollFromFocus=!1}),200);const a=t.scrollTop,s=e.getBoundingClientRect().top-t.getBoundingClientRect().top+a,n=s-t.clientHeight+e.clientHeight+2,i=this.state.showSearchInput?s-S.TOTAL_SEARCH_HEIGHT:s-2;t.scrollTop=(0,l.default)(a,n,i)},this._handleListFocusAbove=()=>{this._focusSearchAndScrollToTop()},this._handleListScroll=e=>{const t=e-this._lastScrollTop;if(this._lastScrollTop=e,this._scrollFromFocus)return;if(this._scrollFromAnimation)return;if(this._checkScrollTop())return;const a=Math.abs(t);this._fastScroll=a>15;const s=t>=0?1:-1,n=0===e;e<S.TOTAL_SEARCH_HEIGHT?this.setState({scrolledToTop:n,showSearchInput:!0}):a<5||(this.state.showSearchInput?1===s&&this.setState({scrolledToTop:n,showSearchInput:!1}):-1===s&&this.setState({scrolledToTop:n,showSearchInput:!0}))},this._handleListSection=e=>{this._scrollFromAnimation||(this._lastSectionId=e,this.props.onSection(e))},this._handleSearchResultsFocusAbove=()=>{this._focusSearchAndScrollToTop()},this._handleSearchChange=(e,t)=>{this.props.onChange&&this.props.onChange(e,t),this.setState({searchText:e})},this._handleScrollListFocusUp=()=>{this._focusSearchAndScrollToTop()},this._handleSearchDownKey=()=>{if(this.state.searchText){if(!this._refSearchResults)return;this._refSearchResults.focusFirstVisibleEmoji()}else this._refScrollList&&this._refScrollList.focusFirstVisibleEmoji(S.TOTAL_SEARCH_HEIGHT)},this._handleSearchEnterKey=()=>{this.state.searchText&&this._refSearchResults&&this._refSearchResults.selectFirstVisibleEmoji()},this._handleShiftTabKey=e=>{var t,a;if(e.preventDefault(),e.stopPropagation(),this._refSearchInput)return this._refSearchInput.hasFocus()?void(null===(t=(a=this.props).onFocusPrev)||void 0===t||t.call(a)):this.focusSearchInput()},this._handleTabKey=e=>{var t,a;if(e.preventDefault(),e.stopPropagation(),this._refSearchInput)return this._refSearchInput.hasFocus()?void(null===(t=(a=this.props).onFocusNext)||void 0===t||t.call(a)):this.focusSearchInput()},this._setRefSearchInput=e=>{this._refSearchInput=e},this._setRefScrollList=e=>{this._refScrollList=e},this._setRefSearchResults=e=>{this._refSearchResults=e},this._handleContainerClick=e=>{this._stopEvent(e),this.focusSearchInput()},this._getSectionListDataMemoized=(0,g.default)((e=>{let{sectionIds:t}=e;return t.map((e=>({sectionId:e,emojis:"RECENT"===e?(0,i.default)(v.RecentEmojiCollection.reduce(((e,t)=>{const a=c.EmojiUtil.getSkinToneBase(t.id)||t.id;return null!=c.EmojiUtil.getGlyphId(a)&&e.push(a),e}),[])):c.EmojiUtil.getEmojisInCategory(e)})))}),((e,t)=>e.sectionIds===t.sectionIds||(0,o.default)(e.sectionIds,t.sectionIds))),this._getSearchResultsDataMemoized=(0,g.default)((e=>{let{searchText:t}=e;return[{sectionId:f.SECTIONS.SEARCH_RESULT,emojis:(0,h.default)((0,r.default)(t))}]}))}componentWillUnmount(){this.props.onDisplayCache&&this.props.onDisplayCache({scrollTop:this._lastScrollTop,sectionId:this._lastSectionId,showSearchInput:this.state.showSearchInput})}focusSearchInput(e){if(!this._refSearchInput)return this._fastScroll=!0,void this.setState({showSearchInput:!0},(()=>this.focusSearchInput(!0)));this._refSearchInput.focus(e)}scrollToSection(e){var t=this;return(0,n.default)((function*(){t._lastSectionId=e,yield new Promise((e=>{t._fastScroll=!0,t.setState({searchText:"",showSearchInput:!0},e)})),t._scrollFromAnimation=!0;const a=t._refScrollList?t._refScrollList.scrollToSection(e,0-S.TOTAL_SEARCH_HEIGHT):Promise.resolve();return a.finally((()=>{a===t._animationPromise&&(t._scrollFromAnimation=!1,t._checkScrollTop()||t.state.showSearchInput&&t.setState({scrolledToTop:0===t._lastScrollTop}))})),t._animationPromise=a,a}))()}_checkScrollTop(){const e=0===this._lastScrollTop;return e&&this.setState({scrolledToTop:e,showSearchInput:!0}),e}_focusSearchAndScrollToTop(){this._scrollFromFocus=!0,this._scrollFromFocusHandlerTimeoutID&&clearTimeout(this._scrollFromFocusHandlerTimeoutID),this._scrollFromFocusHandlerTimeoutID=setTimeout((()=>{this._scrollFromFocus=!1}),200),this.focusSearchInput(),this._refScrollList&&this._refScrollList.scrollToTop()}_stopEvent(e){e.preventDefault(),e.stopPropagation()}render(){return(0,b.jsx)(p.HotKeys,{handlers:{tab:this._handleTabKey,"shift+tab":this._handleShiftTabKey},onClick:this._handleContainerClick,children:(0,b.jsxs)("div",{className:m.default.bodyContainer,children:[this._renderSearchInput(),this._renderSearchResults(),(0,b.jsx)("div",{className:(0,d.default)(m.default.list,{[m.default.hidden]:!!this.state.searchText}),children:(0,b.jsx)(S.EmojiSectionScrollList,{data:this._getSectionListData(),width:this.props.width,onFocusUp:this._handleScrollListFocusUp,initialScrollTop:this.props.displayCache.scrollTop,searchInputVisible:this.state.showSearchInput,focusAbove:this._handleListFocusAbove,onEmoji:this.props.onEmoji,onEmojiFocus:this._handleEmojiFocus,onScroll:this._handleListScroll,onSection:this._handleListSection,ref:this._setRefScrollList,showTitles:!0})})]})})}_renderSearchInput(){let e=null;this.state.showSearchInput&&(e=(0,b.jsx)(C.PanelSearchInput,{label:_.default.t(1193),onChange:this._handleSearchChange,onUpKey:this.props.onFocusUp,onDownKey:this._handleSearchDownKey,onEnterKey:this._handleSearchEnterKey,ref:this._setRefSearchInput,shadow:!this.state.scrolledToTop,value:this.state.searchText||""}));const t=this._fastScroll?"emoji-search-slide-away-fast":"emoji-search-slide-away";return(0,b.jsx)(y.default,{transitionName:t,className:m.default.search,children:e})}_renderSearchResults(){return this.state.searchText?(0,b.jsx)("div",{className:m.default.list,children:(0,b.jsx)(S.EmojiSectionScrollList,{data:this._getSearchResultsData(),width:this.props.width,initialScrollTop:0,searchInputVisible:!0,focusAbove:this._handleSearchResultsFocusAbove,onEmoji:this.props.onEmoji,onEmojiFocus:this._handleEmojiFocus,ref:this._setRefSearchResults,showTitles:!1})}):null}_getSectionListData(){return this._getSectionListDataMemoized({sectionIds:this.props.sectionIds})}_getSearchResultsData(){const e=(this.state.searchText||"").replace(/^\s+/,"");return this._getSearchResultsDataMemoized({searchText:e})}}t.default=E,E.displayName="EmojiPanelContent"},455:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.TOTAL_SEARCH_HEIGHT=t.EmojiSectionScrollList=void 0,t.findEmojiRowAt=T,t.getNumColumns=x;var n=a(13959),i=s(a(6258)),r=s(a(48360)),o=a(67294),l=s(a(19290)),d=a(1823),u=a(57741),c=a(47915),h=s(a(44942)),f=s(a(30855)),p=s(a(43725)),m=s(a(30071)),_=s(a(6067)),g=s(a(75426)),v=a(85893);const C=parseInt(_.default["-total-search-height"],10);t.TOTAL_SEARCH_HEIGHT=C;const S=parseInt(_.default["-title-height"],10),y={[u.SECTIONS.SEARCH_RESULT]:()=>{throw new Error("Search results should not be shown with a title.")},[u.SECTIONS.RECENT]:()=>p.default.t(1025),[l.default.SMILEYS_PEOPLE]:()=>r.default._("Smileys & People",null,{hk:"15kkb2"}),[l.default.ANIMALS_NATURE]:()=>r.default._("Animals & Nature",null,{hk:"2YsDed"}),[l.default.FOOD_DRINK]:()=>r.default._("Food & Drink",null,{hk:"1Xtk7P"}),[l.default.ACTIVITY]:()=>r.default._("Activity",null,{hk:"242snN"}),[l.default.TRAVEL_PLACES]:()=>r.default._("Travel & Places",null,{hk:"1vozFD"}),[l.default.OBJECTS]:()=>r.default._("Objects",null,{hk:"2McHxt"}),[l.default.SYMBOLS]:()=>r.default._("Symbols",null,{hk:"1WHqbc"}),[l.default.FLAGS]:()=>r.default._("Flags",null,{hk:"15Xohs"})};let b=0;b=parseInt(_.default["-scrollbar-width"].replace(/px$/,""),10);class E extends o.PureComponent{constructor(e){super(e),this._rowComponents=new Map,this._flatListController=new f.default,this._renderBlanks=!1,this._getRowsAndSectionDataMemoized=(0,m.default)((e=>{const{numColumns:t,data:a,showTitles:s}=e;let n=C;const r={},o=[];return a.forEach(((e,l)=>{let{sectionId:u,emojis:c}=e,h=0;const f=n;if(0===c.length)return;s&&(o.push({kind:"title",itemKey:`section_${u}_title`,index:o.length,title:y[u](),sectionId:u,height:S,offsetTop:n}),h+=S,n+=S);const p=(0,i.default)(c,t),m=l===a.length-1;p.forEach(((e,t)=>{const a=t===p.length-1&&!m?d.EMOJI_HEIGHT+parseInt(_.default["-section-bottom-margin"],10):d.EMOJI_HEIGHT;o.push({kind:"emojis",itemKey:`section_${u}_emoji_${t}`,index:o.length,emojis:e,sectionId:u,height:a,offsetTop:n}),h+=a,n+=a})),r[u]={height:h,offsetTop:f}})),{rows:o,sectionData:r}})),this._handleEmojiFocus=e=>{const t=this._refScrollContainer;t&&this.props.onEmojiFocus(e,t)},this._handleScroll=()=>{this._animationFrameID||(this._animationFrameID=requestAnimationFrame(this._handleScrollOnAnimationFrame))},this._handleScrollOnAnimationFrame=()=>{if(delete this._animationFrameID,!this._refScrollContainer)return;const e=this._refScrollContainer.scrollTop;this.props.onScroll&&this.props.onScroll(e);const t=this._getSectionIdFromScrollTop(e);t&&this.props.onSection&&this.props.onSection(t)},this._setRefScrollContainer=e=>{this._refScrollContainer=e},this._renderRow=e=>{switch(e.kind){case"title":return(0,v.jsx)("div",{className:_.default.title,children:e.title});case"emojis":return(0,v.jsx)(d.EmojiRow,{emojis:e.emojis,focusAbove:t=>{var a,s;1===e.index&&(null===(a=(s=this.props).onFocusUp)||void 0===a||a.call(s)),this._focusEmojiAt(e.index,-1,t)},focusBelow:t=>{this._focusEmojiAt(e.index,1,t)},numColumns:this._getNumColumns(),onEmoji:this.props.onEmoji,onEmojiFocus:this._handleEmojiFocus,ref:t=>{t?this._rowComponents.set(e.itemKey,t):this._rowComponents.delete(e.itemKey)},allowVariantPrompt:e.sectionId!==u.SECTIONS.RECENT});default:throw e.kind,new Error(`Invalid row kind: ${e.kind}`)}},this._getRowsAndSectionData()}componentDidMount(){this._refScrollContainer&&this._refScrollContainer.scrollTop!==this.props.initialScrollTop&&(this._refScrollContainer.scrollTop=this.props.initialScrollTop)}focusFirstVisibleEmoji(e){const t=this._getFirstVisibleEmojiRowComponent(e||0);t&&t.focusEmojiAt(0)}scrollToSection(e,t){const a=this._refScrollContainer;if(!a)return Promise.resolve();const{sectionData:s}=this._getRowsAndSectionData(),i=s[e];if(!i)return Promise.resolve();const r=i.offsetTop;if(a.scrollTop===r)return Promise.resolve();if(this._activeAnimation){if(this._activeAnimation.sectionId===e)return this._activeAnimation.promise;(0,g.default)(this._activeAnimation.scrollTarget,"stop")}if(a.scrollTop===r)return Promise.resolve();const o=document.createElement("div");o.style.position="absolute",o.style.top=`${r+(t||0)}px`,o.style.left="0px",a.appendChild(o);const l=(0,g.default)(o,"scroll",{container:a,duration:300,easing:[.99,.13,.13,.99]}).then((()=>{})).then((()=>(0,n.delayMs)(100)));return this._activeAnimation={promise:l,sectionId:e,scrollTarget:o},l.finally((()=>{a.removeChild(o),this._activeAnimation&&this._activeAnimation.promise===l&&delete this._activeAnimation})),l}scrollToTop(){this._refScrollContainer&&(this._refScrollContainer.scrollTop=0)}selectFirstVisibleEmoji(e){const t=this._getFirstVisibleEmojiRowComponent(e||0);t&&t.selectFirstEmoji()}_getCurrentSearchInputHeight(){return this.props.searchInputVisible?C:0}_getNumColumns(){return x(this.props.width)}_getRowsAndSectionData(){return this._getRowsAndSectionDataMemoized({numColumns:this._getNumColumns(),data:this.props.data,showTitles:this.props.showTitles})}_getFirstVisibleEmojiRowComponent(e){if(!this._refScrollContainer)return;const t=this._refScrollContainer.scrollTop+e,a=this._getEmojiRowFromScrollTop(t);if(!a)return;return this._rowComponents.get(a.itemKey)}_getEmojiRowFromScrollTop(e){const{rows:t}=this._getRowsAndSectionData();return t.map((e=>"emojis"===e.kind?e:null)).filter(Boolean).find((t=>t.offsetTop+t.height>e))}_getSectionIdFromScrollTop(e){const t=this._getEmojiRowFromScrollTop(e+this._getCurrentSearchInputHeight());if(t)return t.sectionId}_focusEmojiAt(e,t,a){const{rows:s}=this._getRowsAndSectionData(),n=T(s,e,t);if(!n)return;const i=this._rowComponents.get(n.itemKey);i&&i.focusEmojiAt(a)}render(){const{rows:e}=this._getRowsAndSectionData(),t=Math.min(e.length,2);let a;return(this.props.onScroll||this.props.onSection)&&(a=this._handleScroll),(0,v.jsx)(h.default,{onScroll:a,className:_.default.container,onRef:this._setRefScrollContainer,flatListControllers:[this._flatListController],children:(0,v.jsx)(c.FlatList,{data:e,reorderAnimationsEnabled:!1,forceConsistentRenderCount:!1,flatListController:this._flatListController,direction:"vertical",extraItems:t,initialScrollFromStart:this.props.initialScrollTop,renderItem:this._renderRow})})}}function T(e,t,a){const s=a<0?-1:1;let n=t+a;for(;n>=0&&n<e.length;){const t=e[n];if("emojis"===t.kind)return t;n+=s}}function x(e){const t=e-2*d.SIDE_MARGIN-b;return Math.floor(t/d.EMOJI_WIDTH)}t.EmojiSectionScrollList=E,E.displayName="EmojiSectionScrollList"},27924:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.EmojiSectionIcon=function(e){return(0,r.jsx)(i.default,{name:o[e.sectionId]})},t.sectionIdToIcon=void 0;var n=a(57741),i=s(a(23217)),r=a(85893);const o={[n.SECTIONS.RECENT]:"panel-recent",[n.SECTIONS.SMILEYS_PEOPLE]:"panel-emoji-people",[n.SECTIONS.ANIMALS_NATURE]:"panel-emoji-nature",[n.SECTIONS.FOOD_DRINK]:"panel-emoji-food",[n.SECTIONS.ACTIVITY]:"panel-emoji-activity",[n.SECTIONS.TRAVEL_PLACES]:"panel-emoji-travel",[n.SECTIONS.OBJECTS]:"panel-emoji-objects",[n.SECTIONS.SYMBOLS]:"panel-emoji-symbols",[n.SECTIONS.FLAGS]:"panel-emoji-flags"};t.sectionIdToIcon=o},24633:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t={[i.SECTIONS.RECENT]:r.default.t(1025),[i.SECTIONS.SMILEYS_PEOPLE]:n.default._("Smileys & People",null,{hk:"15kkb2"}),[i.SECTIONS.ANIMALS_NATURE]:n.default._("Animals & Nature",null,{hk:"2YsDed"}),[i.SECTIONS.FOOD_DRINK]:n.default._("Food & Drink",null,{hk:"1Xtk7P"}),[i.SECTIONS.ACTIVITY]:n.default._("Activity",null,{hk:"242snN"}),[i.SECTIONS.TRAVEL_PLACES]:n.default._("Travel & Places",null,{hk:"1vozFD"}),[i.SECTIONS.OBJECTS]:n.default._("Objects",null,{hk:"2McHxt"}),[i.SECTIONS.SYMBOLS]:n.default._("Symbols",null,{hk:"1WHqbc"}),[i.SECTIONS.FLAGS]:n.default._("Flags",null,{hk:"15Xohs"})},{sectionId:a}=e,s=t[a];return(0,d.jsx)(l.MenuTab,{onClick:e.onClick,sectionId:a,selected:e.selected,showFocusIndicator:e.showFocusIndicator,theme:l.THEMES.MENU,title:s,onRef:e.onRef,children:(0,d.jsx)(o.EmojiSectionIcon,{sectionId:a})})};var n=s(a(48360)),i=a(57741),r=s(a(43725)),o=a(27924),l=a(93353),d=a(85893)},57741:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.SECTIONS=t.ORDERED_TAB_SECTION_IDS=void 0;var n=s(a(81109)),i=s(a(69618));const{EMOJI:{CATEGORIES:r,ORDERED_CATEGORY_IDS:o}}=i.default,l=(0,n.default)((0,n.default)({RECENT:"RECENT"},r),{},{SEARCH_RESULT:"SEARCH_RESULT"});t.SECTIONS=l;const d=[{[l.RECENT]:l.RECENT,[l.SMILEYS_PEOPLE]:l.SMILEYS_PEOPLE,[l.ANIMALS_NATURE]:l.ANIMALS_NATURE,[l.FOOD_DRINK]:l.FOOD_DRINK,[l.ACTIVITY]:l.ACTIVITY,[l.TRAVEL_PLACES]:l.TRAVEL_PLACES,[l.OBJECTS]:l.OBJECTS,[l.SYMBOLS]:l.SYMBOLS,[l.FLAGS]:l.FLAGS}.RECENT,...o];t.ORDERED_TAB_SECTION_IDS=d},82709:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.EmojiSuggestionsPanel=t.EMOJI_WIDTH=void 0;var n=s(a(35161)),i=s(a(45095)),r=a(67294),o=a(88102),l=a(60811),d=a(70449),u=s(a(84636)),c=s(a(95118)),h=a(13185),f=s(a(3222)),p=a(55414),m=a(84387),_=s(a(45260)),g=s(a(4478)),v=a(18644),C=s(a(46780)),S=a(85893);const y=parseInt(c.default["-emoji-width"].replace(/px$/,""),10);t.EMOJI_WIDTH=y;class b extends r.Component{constructor(){super(...arguments),this.state={selectedIndex:0,skinTonePicker:null},this.emojiList=null,this._rowLength=0,this._emojiPanelRef=(0,r.createRef)(),this._emojisRef=(0,r.createRef)(),this._windowResized=()=>{const e=this._getEmojiRowLength();if(this._rowLength!==e){this._rowLength=e;const t=this.state.selectedIndex>=e?e-1:this.state.selectedIndex;this.setState({selectedIndex:t})}},this._handleEmojiClick=e=>{if(T(e),!(e.target instanceof HTMLElement))return;const t=e.target.dataset.unicode;if(t)if(d.EmojiUtil.getSkinToneBase(t)){const a=this._getEmojiVariant(t);a?this.handleEmoji(a):this.handleContextMenu(e)}else this.handleEmoji(t)},this._handleEmojiMouseDown=e=>{if(T(e),!(e.target instanceof HTMLElement))return;const t=e.target.dataset.unicode;t&&d.EmojiUtil.getSkinToneBase(t)&&this._startPickerTimer(e)},this.handleEmoji=e=>{this.props.onEmoji(e),this.releaseFocus()},this.releaseFocus=()=>{this.props.onFocusRelease&&this.props.onFocusRelease()},this._getEmojiVariant=e=>d.EmojiUtil.getSkinToneBase(e)?h.EmojiVariantCollection.getVariant(e):null,this._setEmojiVariant=(e,t,a)=>{T(e),this.handleEmoji(a),h.EmojiVariantCollection.setVariant(t,a);const s=this.props.uim;return s&&(s.pop(!1,!1),s.uie.requestDismiss()),!1},this.handleContextMenu=e=>{T(e);const t=e.target;if(!(t instanceof HTMLElement))return;const a=t.dataset.unicode;a&&d.EmojiUtil.getSkinToneBase(a)&&this._handleContextMenu(a,t)},this._handleContextMenu=(e,t,a)=>{this._clearPickerTimer();const s=(0,i.default)(d.EmojiUtil.getSkinToneBase(e),"Emoji.getSkinToneBase(unicode)");this.setState({skinTonePicker:{menu:(0,S.jsx)(_.default,{base:s,action:this._setEmojiVariant,unicode:e}),anchor:t,type:"picker",dirX:l.DirX.RIGHT,dirY:l.DirY.TOP,horizontal:!0,autoFocus:a,findFirstItem:!0}},(()=>{const{onSkinTonePicker:e}=this.props;e&&e(!0)}))},this._closeSkinTonePicker=()=>{this.setState({skinTonePicker:null},(()=>{const{onSkinTonePicker:e}=this.props;e&&e(!1)}))},this._clearPickerTimer=()=>{null!=this._pickerTimer&&(this.props.clearTimeout(this._pickerTimer),this._pickerTimer=null)},this._startPickerTimer=e=>{T(e),this._clearPickerTimer();const t=e.target;if(!(t instanceof HTMLElement))return;const a=t.dataset.unicode;this._pickerTimer=this.props.setTimeout((()=>{this.props.listeners.addOnce(o.Cmd,"window_click",T),this._handleContextMenu(a,t)}),250),this.props.listeners.addOnce(window,"mouseup",this._clearPickerTimer,{capture:!0})},this._getEmojiRowLength=()=>{var e;const t=null===(e=this._emojiPanelRef.current)||void 0===e?void 0:e.offsetWidth;return null==t?8:Math.floor(t/y)},this.handleEmojiArrowLeft=e=>{this._handleEmojiArrow(e,"left")},this.handleEmojiArrowRight=e=>{this._handleEmojiArrow(e,"right")},this._handleEmojiArrow=(e,t)=>{if(T(e),!(e.target instanceof HTMLElement))return;let a=e.target.dataset.emojiIndex;if(!a)return;a=Number(a);const s=this.props.emojiList;let n=a;switch(t){case"left":a>0&&(n=a-1);break;case"right":if(a+1>=s.length)return;n=a+1}this.setState({selectedIndex:n})},this._renderEmojiList=e=>{let t=e;const a=this._getEmojiRowLength();t&&t.length>a&&(t=t.slice(0,a));const s=(0,n.default)(t,((e,t)=>{const a=this._getEmojiVariant(e),s=this.state.selectedIndex===t&&!this.state.skinTonePicker;return(0,S.jsx)(u.default,{element:"span",emoji:a||e,size:"large","data-unicode":e,"data-variant":a,tabIndex:"-1","data-emoji-index":t,selected:s},e)}));return(0,S.jsx)(p.HotKeys,{onMouseDown:this._handleEmojiMouseDown,onClick:this._handleEmojiClick,onContextMenu:this.handleContextMenu,children:(0,S.jsx)("div",{className:c.default.panel,ref:this._emojisRef,children:s})})},this.handleEmojiEnter=e=>{if(T(e),!(e.target instanceof HTMLElement))return;const t=e.target.dataset.emojiIndex;if(t&&this.props.emojiList){const a=this.props.emojiList[Number(t)];this._keyboardSelectEmoji(e,a)}},this._keyboardSelectEmoji=(e,t)=>{if(d.EmojiUtil.getSkinToneBase(t)){const a=this._getEmojiVariant(t);if(a)this.handleEmoji(a);else{if(T(e),!(e.target instanceof HTMLElement))return;this._handleContextMenu(t,e.target,!0)}}else this.handleEmoji(t)}}static getDerivedStateFromProps(e,t){return{selectedIndex:Math.min(t.selectedIndex,e.emojiList.length-1)}}componentDidUpdate(e,t){this.state.skinTonePicker&&this.state.skinTonePicker===t.skinTonePicker&&this._closeSkinTonePicker()}componentDidMount(){this.props.listeners.add(h.EmojiVariantCollection,"add remove change:variant",(()=>this.forceUpdate()));const e=this.props.debounce(this._windowResized,100);this.props.listeners.add(window,"resize",e),this._windowResized()}_getEmojiAtIndex(e){var t;return null!==(t=this.props.emojiList[e])&&void 0!==t?t:null}_getEmojiElement(e){if(e<0)return;if(!this._emojisRef.current)return;const t=this._emojisRef.current.children;return e>=t.length?void 0:t[e]}render(){let e;return this.state.skinTonePicker&&(e=(0,S.jsx)(v.UIE,{displayName:"SkinTonePicker",popable:!0,escapable:!0,requestDismiss:this._closeSkinTonePicker,children:(0,S.jsx)(C.default,{tooltip:this.state.skinTonePicker})})),(0,S.jsxs)("div",{ref:this._emojiPanelRef,children:[this._renderEmojiList(this.props.emojiList),e]})}moveSelectionLeft(){this.setState({selectedIndex:Math.max(this.state.selectedIndex-1,0)})}moveSelectionRight(){this.setState({selectedIndex:Math.min(this.state.selectedIndex+1,this._getEmojiRowLength()-1,this.props.emojiList.length-1)})}pickSelectedEmoji(){const e=this._getEmojiAtIndex(this.state.selectedIndex);if(e)if(d.EmojiUtil.getSkinToneBase(e)){const t=this._getEmojiVariant(e);if(t)this.handleEmoji(t);else{const t=this._getEmojiElement(this.state.selectedIndex);t&&this._handleContextMenu(e,t,!0)}}else this.handleEmoji(e)}}b.displayName="BaseEmojiSuggestionsPanel";const E=(0,f.default)((0,m.ListenerHOC)((0,g.default)(b)));function T(e){e&&(e.preventDefault(),e.stopPropagation())}t.EmojiSuggestionsPanel=class extends E{moveSelectionLeft(){this.getComponent().moveSelectionLeft()}moveSelectionRight(){this.getComponent().moveSelectionRight()}pickSelectedEmoji(){this.getComponent().pickSelectedEmoji()}}},30424:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.EmojiPanel=void 0;var n=s(a(94184)),i=a(67294),r=a(28325),o=a(60811),l=s(a(55547)),d=a(57741),u=s(a(30787)),c=a(84387),h=s(a(50725)),f=a(92671),p=s(a(24633)),m=a(85893);class _ extends i.PureComponent{constructor(e){let t;super(e),this._refDiv=(0,i.createRef)(),this.getElement=()=>this._refDiv.current,this._sectionIds=0===f.RecentEmojiCollection.length?d.ORDERED_TAB_SECTION_IDS.filter((e=>e!==d.SECTIONS.RECENT)):d.ORDERED_TAB_SECTION_IDS,this._refMenuTabs=new Map,this._handleEmojiPanelFocusUp=()=>{var e;null===(e=this._refMenuTabs.get(this.state.selectedSectionId))||void 0===e||e.focus(),this.setState({focusedTabIndex:this._sectionIds.indexOf(this.state.selectedSectionId)})},this._handleEmojiPanelFocusEnter=e=>{null==e||e.preventDefault();const t=this._sectionIds[this.state.focusedTabIndex];this.setState({focusedTabIndex:-1}),this._handleMenuTabClick(t)},this._handleEmojiPanelFocusNext=()=>{var e;const t=(this.state.focusedTabIndex+1)%this._sectionIds.length,a=this._sectionIds[t];null===(e=this._refMenuTabs.get(a))||void 0===e||e.focus(),this.setState({focusedTabIndex:t})},this._handleEmojiPanelFocusPrev=()=>{var e;const t=(this._sectionIds.length+this.state.focusedTabIndex-1)%this._sectionIds.length,a=this._sectionIds[t];null===(e=this._refMenuTabs.get(a))||void 0===e||e.focus(),this.setState({focusedTabIndex:t})},this._handleFocusLeave=()=>{this.setState({focusedTabIndex:-1}),this._focusSearchInput()},this._handleMenuTabClick=(e,t)=>{var a,s;this._selectSection(e),null===(a=(s=this.props).onChange)||void 0===a||a.call(s,""),this._focusSearchInput(),null==t||t.preventDefault()},this._handlePanelSection=e=>{this._animationPromise||this.state.selectedSectionId!==e&&this.setState({selectedSectionId:e})},this._onEmoji=e=>{f.RecentEmojiCollection.increment(e),this.props.onEmoji(e)},this._onChange=(e,t)=>{var a,s;null===(a=(s=this.props).onChange)||void 0===a||a.call(s,e,t),this.setState({})},this._setRefContent=e=>{this._refContent=e},this._renderEmojiTab=(e,t)=>(0,m.jsx)(p.default,{onClick:this._handleMenuTabClick,sectionId:e,selected:t,showFocusIndicator:-1!==this.state.focusedTabIndex,onRef:t=>{this._refMenuTabs.set(e,t)}},e),this._scrollSectionIds=this._sectionIds,t=this.props.displayCache?this.props.displayCache:{scrollTop:0,sectionId:this._sectionIds[0],showSearchInput:!0},this._displayCache=t,this.state={selectedSectionId:t.sectionId,focusedTabIndex:-1}}componentDidMount(){this.props.listeners.uiIdle((()=>{this.restoreFocus()}))}restoreFocus(e){this._focusSearchInput(e)}_focusSearchInput(e){this._refContent&&this._refContent.focusSearchInput(e)}_selectSection(e){this.state.selectedSectionId!==e&&(this.setState({selectedSectionId:e}),this._scrollToSection(e))}_scrollToSection(e){if(!this._refContent)return;const t=this._refContent.scrollToSection(e);this._animationPromise=t,t.finally((()=>{t===this._animationPromise&&delete this._animationPromise}))}render(){var e;const t=(0,n.default)(u.default.emojiPanel,{[u.default.panelDropdown]:this.props.displayLocation===r.DisplayLocation.Dropdown}),{width:a=o.EMOJI_PICKER_WIDTH}=this.props;return(0,m.jsxs)("div",{className:t,ref:this._refDiv,children:[(0,m.jsx)(h.default,{selectedSectionId:this.state.selectedSectionId,sectionIds:this._sectionIds,renderSectionTab:this._renderEmojiTab,showTabHighlight:!(null===(e=this.props.defaultSearchText)||void 0===e?void 0:e.trim()),onFocusPrev:this._handleEmojiPanelFocusPrev,onFocusNext:this._handleEmojiPanelFocusNext,onFocusLeave:this._handleFocusLeave,onEnter:this._handleEmojiPanelFocusEnter}),(0,m.jsx)(l.default,{displayCache:this._displayCache,width:a,onDisplayCache:this.props.onDisplayCache,onFocusUp:this._handleEmojiPanelFocusUp,onFocusPrev:this.props.onFocusPrev,onFocusNext:this.props.onFocusNext,onEmoji:this._onEmoji,onSection:this._handlePanelSection,ref:this._setRefContent,sectionIds:this._scrollSectionIds,onChange:this._onChange,defaultSearchText:this.props.defaultSearchText})]})}}_.defaultProps={displayLocation:r.DisplayLocation.Dropdown},_.displayName="EmojiPanelImpl";const g=(0,c.ListenerHOC)(_);t.EmojiPanel=class extends g{restoreFocus(e){this.getComponent().restoreFocus(e)}}},89964:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SKIN_TONE_VARIATIONS=void 0;var s=a(70449);const n=[""].concat(s.EmojiUtil.skinToneVariations);t.SKIN_TONE_VARIATIONS=n},49777:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={TRENDING:"TRENDING",HAHA:"HAHA",SAD:"SAD",LOVE:"LOVE",REACTIONS:"REACTIONS",SPORTS:"SPORTS",TV:"TV"};t.default=a},59927:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TENOR=t.TARGET_GIF_HEIGHT=t.GifInfo=t.GIPHY_LOCALES=t.GIPHY=t.GAP_SIZE=t.BRAND_NAMES=void 0,t.gifProvider=function(){switch(s.ServerProps.gifSearch){case"giphy":return n;case"tenor":default:return i}};var s=a(64551);t.TARGET_GIF_HEIGHT=130;t.GAP_SIZE=6;const n="giphy";t.GIPHY=n;const i="tenor";t.TENOR=i;let r=0;t.GifInfo=class{constructor(e,t,a,s,n,i,o,l){this.rank=e,this.gifId=++r,this.url=t,this.size=a,this.previewUrl=s||t,this.nonVideoUrl=n,this.width=i,this.widthStr=`${i}px`,this.ratioStr=`${Math.ceil(13e3/i)}%`,this.attribution=o,this.trending=l}};t.BRAND_NAMES={giphy:"GIPHY",tenor:"Tenor"};t.GIPHY_LOCALES=["en","es","pt","id","fr","ar","tr","th","vi","de","it","ja","zh-CN","zh-TW","ru","ko","pl","nl","ro","hu","sv","cs","hi","bn","da","fa","tl","fi","iw","ms","no","uk"]},56698:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(e.sectionId&&e.sectionId===n.SECTIONS.FAVORITES)return(0,o.jsx)(r.default,{name:"panel-starred"});return(0,o.jsx)("span",{className:i.default.text,children:e.sectionTitle})};var n=a(40910),i=s(a(98616)),r=s(a(23217)),o=a(85893)},80077:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t={[i.SECTIONS.FAVORITES]:n.default._("Favorites",null,{hk:"1DfDuo"}),[i.SECTIONS.TRENDING]:r.default.t(495),[i.SECTIONS.HAHA]:n.default._("Haha",null,{hk:"4B9bsP"}),[i.SECTIONS.SAD]:r.default.t(493),[i.SECTIONS.LOVE]:n.default._("Love",null,{hk:"2FLkDv"}),[i.SECTIONS.REACTIONS]:n.default._("Reactions",null,{hk:"pMe2Q"}),[i.SECTIONS.SPORTS]:r.default.t(494),[i.SECTIONS.TV]:r.default.t(496)},{sectionId:a}=e,s=t[a];return(0,d.jsx)(l.MenuTab,{onClick:e.onClick,sectionId:a,selected:e.selected,showFocusIndicator:e.showFocusIndicator,title:s,theme:l.THEMES.MENU,onRef:e.onRef,children:(0,d.jsx)(o.default,{sectionId:a,sectionTitle:s})})};var n=s(a(48360)),i=a(40910),r=s(a(43725)),o=s(a(56698)),l=a(93353),d=a(85893)},53638:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(89385),i=a(67294),r=s(a(43487)),o=s(a(23217)),l=a(65127),d=a(85893);function u(e,t){const{onSend:a,gif:s}=e,[u,c]=(0,i.useState)(null),h=(0,i.useRef)(null),[f,p]=(0,i.useState)(!1),[m,_]=(0,i.useState)(!1),[g,v]=(0,i.useState)(!1);(0,i.useEffect)((()=>{null!=u&&(f?u.paused&&u.play().catch((0,n.catchAbort)((()=>{}))):u.paused||(u.pause(),u.currentTime=0))}),[u,f]);const C=e=>{f===e&&m||(p(e),_(!0))},S=()=>{a(s)};(0,i.useImperativeHandle)(t,(()=>({setShouldAnimate:C})));let y,b=null;return m&&(b=l.UA.troublesWithLotsOfVideos&&s.nonVideoUrl?(0,d.jsx)("img",{className:r.default.body,onClick:S,src:s.nonVideoUrl}):(0,d.jsx)("video",{className:r.default.body,onClick:S,controls:!1,autoPlay:f,loop:!0,muted:!0,ref:c,src:s.previewUrl})),e.isStarred&&e.onUnstarMsg&&(y=(0,d.jsx)("button",{className:r.default.icon,onClick:e.onUnstarMsg,children:(0,d.jsx)(o.default,{name:"star"})})),(0,d.jsxs)("div",{ref:e=>{h.current=e},className:r.default.preview,tabIndex:"-1",onFocus:e=>{e.preventDefault(),e.stopPropagation(),v(!0)},onBlur:e=>{e.preventDefault(),e.stopPropagation(),v(!1)},style:{flexBasis:s.widthStr},children:[g&&(0,d.jsx)("div",{style:{flexBasis:s.widthStr},className:r.default.focusBorder}),(0,d.jsx)("div",{style:{width:s.widthStr},className:r.default.wrapper,children:(0,d.jsx)("div",{style:{paddingBottom:s.ratioStr},className:r.default.container,children:b})}),y]})}var c=(0,i.forwardRef)(u);t.default=c},28362:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.GifSearch=void 0,t.getGifDimensions=G,t.giphyResultsToGifs=U;var n=s(a(48926)),i=a(89385),r=a(4352),o=a(57319),l=s(a(52013)),d=a(67294),u=s(a(70714)),c=a(24808),h=a(85600),f=s(a(18561)),p=a(59927),m=s(a(53638)),_=s(a(85633)),g=a(40910),v=a(55414),C=s(a(43725)),S=s(a(11339)),y=s(a(57220)),b=s(a(68161)),E=s(a(59578)),T=s(a(48692)),x=s(a(90012)),M=a(2541),P=s(a(17072)),A=a(85893);const I="3o85xmWDYKgihhIKSA",w="DLAQBEYLJJIM",k={giphy:S.default.GIF_SEARCH_PROVIDER.GIPHY,tenor:S.default.GIF_SEARCH_PROVIDER.TENOR},j={giphy:c.VideoMessageAttribution.GIPHY,tenor:c.VideoMessageAttribution.TENOR},N=new b.default((function(e){switch((0,p.gifProvider)()){case"giphy":return function(){return F.apply(this,arguments)}(e);case"tenor":return function(){return V.apply(this,arguments)}(e);default:throw new Error(`Unrecognized provider ${(0,p.gifProvider)()}`)}}),{maxCached:6,maxAge:36e4,shouldCache:e=>!!(null==e?void 0:e.length)}),O="UP",R="DOWN",D="LEFT",L="RIGHT";class B extends d.Component{constructor(e){var t;super(e),t=this,this._scrollTop=0,this._didSendGif=!1,this._onlineRestarter=null,this._pendingQuery=null,this._refGifs={},this._refGifsBySectionId={},this.setRefGif=(e,t)=>{const[a,s]=e;t?(this._refGifs[a]=t,this._refGifsBySectionId[s]=t):(delete this._refGifs[a],delete this._refGifsBySectionId[s])},this._setRefGifCache=new E.default(this.setRefGif),this.handleSend=e=>{const t=k[e.attribution];new S.default.GifFromProviderSent({gifSearchProvider:t}).commit(),e.trending||"number"!=typeof e.rank||new S.default.GifSearchResultTapped({gifSearchProvider:t,rank:e.rank}).commit(),this._didSendGif=!0,this.props.onGif(e.url,j[e.attribution])},this.animateGif=()=>{const e=this._animatingRow;let t=this._scrollTop+p.GAP_SIZE;this._starredGifs&&(t-=this._starredGifs.getClientHeight()||0);const a=Math.round(t/(p.TARGET_GIF_HEIGHT+p.GAP_SIZE)),s=this.state.gifRows[a];if((null==s?void 0:s.gifs.length)&&s!==e){if(this._animatingRow=s,e)for(let t=0;t<e.gifs.length;t++)this._setGifAnimating(e.gifs[t].gifId,!1);for(let e=0;e<s.gifs.length;e++)this._setGifAnimating(s.gifs[e].gifId,!0)}[a+1,a-1].forEach((e=>{if(this.state.gifRows[e]){const t=this.state.gifRows[e].gifs;for(let e=0;e<t.length;e++)this._setGifAnimating(t[e].gifId,!1)}}))},this._searchForAndSetGifs=()=>{const e=k[(0,p.gifProvider)()],t=this.props.searchText||this.props.selectedSectionId||g.SECTIONS.TRENDING;let a=N.getOrRun(t);a=a.then(),this._pendingQuery=a,this.props.setIsFetching(!0);const s=this.props.getUnmountSignal();a.then((t=>{var n;if(s.aborted)return;if(t&&0===t.length&&new S.default.GifSearchNoResults({gifSearchProvider:e}).commit(),a!==this._pendingQuery)return;if(this._pendingQuery=null,this.props.setIsFetching(!1),!t)return;let i=(null===(n=this._containerDom)||void 0===n?void 0:n.clientWidth)||0;i-=2*p.GAP_SIZE,this._resetScroll=!0,this._animateTimer.debounce(0),this.setState({gifRows:K(t,i),width:i})})).catch((0,i.catchAbort)((()=>{})))},this._handleStarredGifsMount=e=>{this._starredGifs=e},this._handleContainerMount=e=>{this._containerDom=e,null!=e&&e&&this._resetScroll&&(e.scrollTop=0)},this.initSelection=function(){var e;let a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const s=null===(e=t._starredGifs)||void 0===e?void 0:e.hasGifs();var n;s&&!a?null===(n=t._starredGifs)||void 0===n||n.initSelection():(t.selection=[0,0],t._focusGif())},this._getNewColPostion=e=>{const{gifRows:t}=this.state,[a,s,n,i,r]=[this.selection[0],this.selection[1],t[Math.min(this.selection[0],t.length-1)].gifs.length-1,t[Math.min(this.selection[0]+1,t.length-1)].gifs.length-1,t[Math.max(this.selection[0]-1,0)].gifs.length-1],o=s/n;switch(e){case O:const e=Math.floor(r*o);return[Math.max(a-1,0),e];case R:return[a+1,Math.floor(i*o)]}return[0,0]},this.contains=e=>!!this._containerDom&&this._containerDom.contains(e),this.getStarredGifsRef=()=>this._starredGifs,this._handleArrowKeys=(e,t)=>{const{gifRows:a}=this.state,[s,n]=[this.selection[0],this.selection[1]];switch(t){case O:if(0===s)return;this.selection=this._getNewColPostion(O);break;case R:if(s===a.length-1)return;this.selection=this._getNewColPostion(R);break;case D:if(0===n&&0===s)return;this.selection=0===n?this._getNewSelection(s-1,a[s-1].gifs.length-1):this._getNewSelection(s,n-1);break;case L:a[s]?a[s].gifs.length===n+1?this.selection=this._getNewSelection(s+1,0):this.selection=this._getNewSelection(s,n+1):this.selection=[0,0]}this.stopEvent(e),this._focusGif()},this.stopEvent=e=>{e&&(e.preventDefault(),e.stopPropagation())},this.restoreFocus=()=>{},this._focusGif=()=>{const e=this.selection.join("_"),t=this._refGifsBySectionId[e];if(t){const e=t.messagePreviewRef;e&&(l.default.focus(e),this.props.scrollGifIntoViewIfNeeded(e))}},this._handleUpArrow=e=>{this._handleArrowKeys(e,O)},this.handleDownArrow=e=>{this._handleArrowKeys(e,R)},this.handleLeftArrow=e=>{this._handleArrowKeys(e,D)},this.handleRightArrow=e=>{this._handleArrowKeys(e,L)},this.handleEnter=e=>{this.stopEvent(e);const{gifRows:t}=this.state,[a,s]=[this.selection[0],this.selection[1],this.selection[2]];this.handleSend(t[a].gifs[s])},this._scrollTop=0,this._animatingRow=null,this._containerDom=null,this._didSendGif=!1,this.state={gifRows:[],width:0}}componentDidUpdate(e){e.searchText!==this.props.searchText&&this._scheduleQuery()}shouldComponentUpdate(e,t){return e.onGif!==this.props.onGif||t.gifRows!==this.state.gifRows||e.selectedSectionId!==this.props.selectedSectionId||e.searchText!==this.props.searchText}componentDidMount(){this._searchTimer=new o.ShiftTimer(this._searchForAndSetGifs),this._animateTimer=new o.ShiftTimer(this.animateGif);const e=new u.default,t=e.signal,a=(0,r.promiseLoop)((()=>{if(t.aborted)throw new i.AbortError;return(0,P.default)(y.default,"change:online",(()=>y.default.online),t).then((()=>this._scheduleQuery()))}));this._onlineRestarter={promise:a,controller:e},this._onlineRestarter.promise.catch((0,i.catchAbort)((()=>{}))),this._searchForAndSetGifs(),new S.default.GifSearchSessionStarted({gifSearchProvider:k[(0,p.gifProvider)()]}).commit()}componentWillUnmount(){this._animateTimer.cancel(),this._searchTimer.cancel(),this._onlineRestarter&&this._onlineRestarter.controller.abort(),this._didSendGif||new S.default.GifSearchCancelled({gifSearchProvider:k[(0,p.gifProvider)()]}).commit()}_scheduleQuery(){this._searchTimer.debounceAndCap(200,2e3)}animateOnScroll(e){this._scrollTop=e.scrollTop,this._animateTimer.debounce(200)}_setGifAnimating(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const a=this._refGifs[String(e)];a&&a.setShouldAnimate(t)}_getNewSelection(e,t){return[Math.max(0,e),Math.max(0,t)]}render(){const{gifRows:e}=this.state,t={up:this._handleUpArrow,down:this.handleDownArrow,left:this.handleLeftArrow,right:this.handleRightArrow,enter:this.handleEnter},a=e.map(((e,t)=>{const a=e.gifs.map(((e,a)=>(0,A.jsx)(m.default,{ref:this._setRefGifCache.getRefSetter([`${e.gifId}`,`${t}_${a}`]),gif:e,onSend:this.handleSend},e.gifId)));let s=null;return e.blankStr&&(s=(0,A.jsx)("div",{className:_.default.blank,style:{flexBasis:e.blankStr}})),(0,A.jsxs)("div",{className:_.default.row,children:[a,s]},t)})),s=this.props.selectedSectionId!==g.SECTIONS.FAVORITES&&(0===a.length?(0,A.jsx)("div",{className:_.default.noResults,children:this.props.searchText?(0,A.jsx)(h.SearchWithoutKeyword,{}):(0,A.jsx)(h.Loading,{})}):(0,A.jsx)(v.HotKeys,{className:_.default.section,handlers:t,children:a})),n=!this.props.searchText&&this.props.selectedSectionId===g.SECTIONS.FAVORITES&&(0,A.jsx)(T.default,{onSend:this.handleSend,ref:this._handleStarredGifsMount});return(0,A.jsxs)("div",{className:_.default.searchContainer,ref:this._handleContainerMount,children:[s,n]})}}function F(){return(F=(0,n.default)((function*(e){const t=e===g.SECTIONS.TRENDING;let a;if(t)a=M.URL.build("https://api.giphy.com/v1/gifs/trending",{api_key:I,limit:100,rating:"pg-13"});else{const t=C.default.getLocale();let s=t;switch(t){case"zh-HK":s="zh-TW";break;case"pt-BR":s="pt"}let n="";p.GIPHY_LOCALES.includes(s)&&(n=s),a=M.URL.build("https://api.giphy.com/v1/gifs/search",{q:e,api_key:I,limit:100,rating:"pg-13",lang:n})}try{const e=yield(0,f.default)(a);if(!e.ok)throw new Error(e.statusText);return U(yield e.json(),t)}catch(e){return __LOG__(4,void 0,new Error)`gif_search:searchGiphy fetch failed with an error : ${e}`,null}}))).apply(this,arguments)}function G(e,t){if(e){const t=parseInt(e.width,10),a=parseInt(e.height,10);if(t&&a)return{width:t,height:a};__LOG__(4,void 0,new Error,!0)`gif_search:getGifDimensions fullContent does not have valid dimensions'`,SEND_LOGS("gif_search:getGifDimensions fullContent does not have valid dimensions")}if(t){const e=parseInt(t.width,10),a=parseInt(t.height,10);if(e&&a)return{width:p.TARGET_GIF_HEIGHT*e/a,height:p.TARGET_GIF_HEIGHT};__LOG__(4,void 0,new Error,!0)`gif_search:getGifDimensions original does not have valid dimensions`,SEND_LOGS("gif_search:getGifDimensions original does not have valid dimensions")}return{width:p.TARGET_GIF_HEIGHT,height:p.TARGET_GIF_HEIGHT}}function U(e,t){if(!e||!Array.isArray(e.data))return[];if(!e.data.length&&t)return[];const a=e.data,s=[];for(let e=0;e<a.length;e++){const n=a[e].images;if(!n)continue;const{original:i,preview:r,downsized_small:o,preview_webp:l,preview_gif:d}=n;if(!o)continue;const u=o.mp4;if(!u)continue;const{width:c,height:h}=G(o,i);s.push(new p.GifInfo(s.length,u,parseInt(o.mp4_size,10),(null==r?void 0:r.mp4)||void 0,(null==l?void 0:l.url)||(null==d?void 0:d.url)||void 0,Math.round(c*p.TARGET_GIF_HEIGHT/h),p.GIPHY,t))}return 0===s.length&&a.length>0&&(__LOG__(4,void 0,new Error,!0)`gif_search: All the gifs were skipped, check if there is a change in giphys response`,SEND_LOGS("gif_search: All the gifs were skipped, check if there is a change in giphys response")),s}function V(){return(V=(0,n.default)((function*(e){const t=e===g.SECTIONS.TRENDING,a=C.default.getLocale().replace("-","_");let s;s=t?M.URL.build("https://wa.tenor.co/v1/trending",{key:w,limit:50,contentfilter:"high",locale:a}):M.URL.build("https://wa.tenor.co/v1/search",{q:e,key:w,limit:50,contentfilter:"high",locale:a});try{const e=yield(0,f.default)(s);if(!e.ok)throw new Error(e.statusText);return H(yield e.json())}catch(e){return __LOG__(4,void 0,new Error)`gif_search:searchTenor fetch failed with an error : ${e}`,null}}))).apply(this,arguments)}function H(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e||!Array.isArray(e.results))return[];const a=e.results,s=[];for(let e=0;e<a.length;e++){const n=a[e];if(!n||!n.media||!n.media[0])continue;const{tinymp4:i,previewmp4:r,previewgif:o}=n.media[0];if(!i)continue;const[l,d]=i.dims;s.push(new p.GifInfo(s.length,i.url,i.size,(null==r?void 0:r.url)||void 0,(null==o?void 0:o.url)||void 0,Math.round(l*p.TARGET_GIF_HEIGHT/d),p.TENOR,t))}return s}function K(e,t){const a=[],s=.9*t;let n=e,i=null;for(let e=.05;e<1&&n.length;e+=.05){n.sort(((e,t)=>{const a=e.rank-t.rank;return Math.abs(a)>8?a:t.width-e.width}));const r=(1+e)*t,o=[],l=[];for(let e=0;e<n.length;e++){const t=n[e];let a=!1;const i=Math.min(r-t.width,s);for(let e=0;!a&&e<o.length;e++)o[e]<i&&(o[e]+=t.width+p.GAP_SIZE,l[e].push(t),a=!0);a||(o.push(t.width),l.push([t]))}if(1===l.length){n=[];const e=t-o[0]-p.GAP_SIZE;i={gifs:l[0],blankStr:e>0?`${e}px`:void 0}}else{n=[];for(let e=0;e<l.length;e++)o[e]>s?a.push(l[e]):n.push.apply(n,l[e])}}a.forEach((e=>e.sort(((e,t)=>e.rank-t.rank)))),a.sort(((e,t)=>e[0].rank-t[0].rank));const r=a.map((e=>({gifs:e,blankStr:void 0})));return i&&r.push(i),r}B.displayName="GifSearchImpl";const q=(0,x.default)(B);t.GifSearch=class extends q{constructor(){super(...arguments),this.initSelection=e=>{this.getComponent().initSelection(e)},this.animateOnScroll=e=>{this.getComponent().animateOnScroll(e)},this.getStarredGifsRef=()=>this.getComponent().getStarredGifsRef()}contains(e){return this.getComponent().contains(e)}}},40910:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.SECTIONS=t.ORDERED_TAB_SECTION_IDS=void 0;var n=s(a(49777));const i={FAVORITES:"FAVORITES",[n.default.TRENDING]:n.default.TRENDING,[n.default.HAHA]:n.default.HAHA,[n.default.SAD]:n.default.SAD,[n.default.LOVE]:n.default.LOVE,[n.default.REACTIONS]:n.default.REACTIONS,[n.default.SPORTS]:n.default.SPORTS,[n.default.TV]:n.default.TV};t.SECTIONS=i;const r={[i.FAVORITES]:i.FAVORITES,[i.TRENDING]:i.TRENDING,[i.HAHA]:i.HAHA,[i.SAD]:i.SAD,[i.LOVE]:i.LOVE,[i.REACTIONS]:i.REACTIONS,[i.SPORTS]:i.SPORTS,[i.TV]:i.TV},o=[r.FAVORITES,r.TRENDING,r.HAHA,r.SAD,r.LOVE,r.REACTIONS,r.SPORTS,r.TV];t.ORDERED_TAB_SECTION_IDS=o},30524:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.GifPanelImpl=t.GifPanel=void 0;var i=n(a(41609)),r=n(a(23493)),o=n(a(91747)),l=n(a(45095)),d=a(67294),u=a(57297),c=s(a(32303)),h=a(59927),f=a(28362),p=a(40910),m=a(7293),_=a(55414),g=n(a(50725)),v=n(a(98952)),C=n(a(43725)),S=a(84387),y=n(a(99951)),b=n(a(11339)),E=a(54222),T=n(a(80077)),x=n(a(41956)),M=a(85893);class P extends d.PureComponent{constructor(e){super(e),this._refMenuTabs=new Map,this.getElement=()=>this._refContainer,this._setRefContainer=e=>{this._refContainer=e},this._lastScrollTop=0,this._fastScroll=!1,this._lastFetchStart=0,this._lastClickTime=0,this._setGifPanelRef=e=>{this._gifPanelRef=e},this._refScrollContainer=(0,d.createRef)(),this._sectionIds=p.ORDERED_TAB_SECTION_IDS,this.handleScroll=(0,r.default)((()=>{const e=this._refScrollContainer.current;if(null==this.state.selectedSectionId&&this.state.searchText&&e&&this._gifPanelRef)return void this._gifPanelRef.animateOnScroll(e);if(Date.now()-this._lastClickTime<u.SCROLL_CLICK_TIME_GAP)return;const t={};if(this.state.isPreview&&(t.isPreview=!1),!e)return;const a=e.scrollTop,s=a<=0;s!==this.state.scrolledToTop&&(t.scrolledToTop=s);const n=this._lastScrollTop-a,r=Math.abs(n)>u.INPUT_BAR_SCROLL_SENSITIVITY;this._fastScroll=Math.abs(n)>u.INPUT_BAR_SCROLL_FAST,n<0?this.state.showSearchInput&&(a>u.INPUT_HIDE_POINT&&r||this._lastScrollTop<u.INPUT_HIDE_POINT&&a>=u.INPUT_HIDE_POINT)&&(t.showSearchInput=!1):this.state.showSearchInput||(r||a<u.INPUT_SHOW_POINT)&&(t.showSearchInput=!0),this._gifPanelRef&&this._gifPanelRef.animateOnScroll(e),this._lastScrollTop=a,(0,i.default)(t)||this.setState(t)}),u.SCROLL_THROTTLE_TIME),this._setRefSearchInput=e=>{this._searchInput=e},this.restoreFocus=e=>{this.focusSearchInput(e)},this.onRotateFocus=e=>{this.stopEvent(e),this._searchInputHasFocus()?this.props.onFocusRelease&&this.props.onFocusRelease():this.focusSearchInput()},this.stopEvent=e=>{e&&(e.preventDefault(),e.stopPropagation())},this.scrollGifIntoViewIfNeeded=e=>{const t=this._refScrollContainer.current;t&&e.offsetTop-t.scrollTop<u.INPUT_BAR_TOTAL_HEIGHT&&c.scrollIntoView(e,!0,t)},this._searchInputHasFocus=()=>!!this._searchInput&&this._searchInput.hasFocus(),this.focusSearchInput=e=>{if(!this._searchInput)return this._fastScroll=!0,void this.setState({showSearchInput:!0},(()=>this.focusSearchInput(!0)));this._searchInput.focus(e)},this._onGifSearchDown=e=>{this.stopEvent(e),this._gifPanelRef&&this._gifPanelRef.initSelection()},this._getSearchBox=()=>{let e=null;this.state.showSearchInput&&(e=(0,M.jsx)(E.PanelSearchInput,{label:C.default.t(1194,{service:h.BRAND_NAMES[(0,h.gifProvider)()]}),onChange:this.onSearch,onUpKey:this._handleFocusUp,onDownKey:this._onGifSearchDown,ref:this._setRefSearchInput,shadow:!this.state.scrolledToTop,tabFocused:this.state.tabFocused,value:this.state.searchText||""}));const t=this._fastScroll?"emoji-search-slide-away-fast":"emoji-search-slide-away";return(0,M.jsx)(x.default,{transitionName:t,children:e})},this.onSearch=(e,t)=>{var a;(this.stopEvent(t),null==this.state.searchText)&&(this._scrollTopBeforeSearch=null===(a=this._refScrollContainer.current)||void 0===a?void 0:a.scrollTop);this.props.onChange&&this.props.onChange(e,t),this.setState({searchText:e,tabFocused:!1})},this.preventBlur=e=>{this.stopEvent(e),this.restoreFocus()},this._handleIsFetching=()=>{if(this.state.isFetching){const e=Date.now()-this._lastFetchStart;e<u.MINIMUM_LOADING_TIME?window.setTimeout((()=>this.setState({isFetching:!1})),u.MINIMUM_LOADING_TIME-e):this.setState({isFetching:!1})}else this.setState({isFetching:!0}),this._lastFetchStart=Date.now()},this._handleParentContainerUp=e=>{var t;const a=null==e?void 0:e.nativeEvent.target,s=null===(t=this._gifPanelRef)||void 0===t?void 0:t.getStarredGifsRef(),n=a instanceof HTMLElement&&(null==s?void 0:s.isStarredGif(a)),i=a instanceof HTMLElement&&!!this._gifPanelRef&&this._gifPanelRef.contains(a);n?(this.focusSearchInput(),this.stopEvent(e)):i&&(null==s?void 0:s.hasGifs())?(this._gifPanelRef&&this._gifPanelRef.initSelection(!1),this.stopEvent(e)):i&&(this.focusSearchInput(),this.stopEvent(e))},this.handleDownArrow=e=>{var t;const a=null==e?void 0:e.nativeEvent.target,s=null===(t=this._gifPanelRef)||void 0===t?void 0:t.getStarredGifsRef();a instanceof HTMLElement&&(null==s?void 0:s.isStarredGif(a))?(this._gifPanelRef&&this._gifPanelRef.initSelection(!0),this.stopEvent(e)):a instanceof Node&&this._gifPanelRef&&this._gifPanelRef.contains(a)&&(this._gifPanelRef&&this._gifPanelRef.initSelection(!1),this.stopEvent(e))},this._handleTabKey=e=>{if(e.preventDefault(),e.stopPropagation(),this._searchInput)return this._searchInput.hasFocus()?void(this.props.onFocusNext&&this.props.onFocusNext()):this.focusSearchInput()},this._handleShiftTabKey=e=>{if(e.preventDefault(),e.stopPropagation(),this._searchInput)return this._searchInput.hasFocus()?void(this.props.onFocusPrev&&this.props.onFocusPrev()):this.focusSearchInput()},this._handleFocusUp=()=>{var e,t;const a=null!==(e=this.state.selectedSectionId)&&void 0!==e?e:this._sectionIds[0];null===(t=this._refMenuTabs.get(a))||void 0===t||t.focus(),this.setState({focusedTabIndex:this._sectionIds.indexOf(this.state.selectedSectionId)})},this._handleFocusEnter=()=>{const e=this._sectionIds[this.state.focusedTabIndex];this.setState({focusedTabIndex:-1}),this._handleMenuTabClick(e)},this._handleMenuFocusNext=()=>{var e;const t=(this.state.focusedTabIndex+1)%this._sectionIds.length,a=this._sectionIds[t];null===(e=this._refMenuTabs.get(a))||void 0===e||e.focus(),this.setState({focusedTabIndex:t})},this._handleMenuFocusPrev=()=>{var e;const t=(this._sectionIds.length+this.state.focusedTabIndex-1)%this._sectionIds.length,a=this._sectionIds[t];null===(e=this._refMenuTabs.get(a))||void 0===e||e.focus(),this.setState({focusedTabIndex:t})},this._handleFocusLeave=()=>{this.restoreFocus(),this.setState({focusedTabIndex:-1})},this._handleMenuTabClick=e=>{var t,a,s;e===p.SECTIONS.FAVORITES?this.setState({showSearchInput:!0,selectedSectionId:e,searchText:null,tabFocused:!0}):this.setState({showSearchInput:!0,selectedSectionId:e,searchText:e,tabFocused:!0}),null===(t=(a=this.props).onChange)||void 0===t||t.call(a,""),null===(s=this._searchInput)||void 0===s||s.focus(!1)},this._renderGifTab=(e,t)=>(0,M.jsx)(T.default,{onClick:this._handleMenuTabClick,sectionId:e,selected:t,showFocusIndicator:-1!==this.state.focusedTabIndex,onRef:t=>{this._refMenuTabs.set(e,t)}},e);const t=(0,o.default)(this.props.displayCache||{},{scrollTop:0,showSearchInput:!0});m.GK.supportsFeature(m.GK.F.STARRED_GIFS)||(this._sectionIds=this._sectionIds.filter((e=>e!==p.SECTIONS.FAVORITES))),this.state={isPreview:!t.scrollTop,scrolledToTop:0===t.scrollTop,searchText:this.props.defaultSearchText||null,searchResults:null,showSearchInput:t.showSearchInput,selectedSectionId:t.selectedSectionId||p.SECTIONS.TRENDING,tabFocused:!1,focusedTabIndex:-1,isFetching:!1}}componentDidMount(){var e;this._lastClickTime=Date.now();const t=null===(e=this.props.displayCache)||void 0===e?void 0:e.scrollTop,a=this._refScrollContainer.current;a&&null!=t&&0!==t&&(a.scrollTop=t),this.props.listeners.uiIdle((()=>{this.restoreFocus(),new b.default.WebcEmojiOpen({webcEmojiOpenTab:"GIF"}).commit(),this.setState({isPreview:!1})}))}componentWillUnmount(){var e;const t=this._refScrollContainer.current;this.props.onDisplayCache({scrollTop:null!==(e=null==t?void 0:t.scrollTop)&&void 0!==e?e:0,showSearchInput:this.state.showSearchInput,selectedSectionId:this.state.selectedSectionId}),this.handleScroll.cancel()}componentDidUpdate(e,t){const a=this._refScrollContainer.current;if(t.searchText!==this.state.searchText){if(!a)return;this.state.searchText?a.scrollTop=0:null!=this._scrollTopBeforeSearch&&0!==this._scrollTopBeforeSearch&&(a.scrollTop=this._scrollTopBeforeSearch)}}render(){var e;const t=this._getSearchBox(),a=(this.state.searchText||"").replace(/^\s+/,"");return(0,M.jsxs)(_.HotKeys,{onRef:this._setRefContainer,handlers:{tab:this._handleTabKey,"shift+tab":this._handleShiftTabKey,up:this._handleParentContainerUp,down:this.handleDownArrow},children:[(0,M.jsx)(g.default,{selectedSectionId:this.state.selectedSectionId,sectionIds:this._sectionIds,renderSectionTab:this._renderGifTab,showTabHighlight:!(null===(e=this.props.defaultSearchText)||void 0===e?void 0:e.trim()),onFocusPrev:this._handleMenuFocusPrev,onFocusNext:this._handleMenuFocusNext,onEnter:this._handleFocusEnter,onFocusLeave:this._handleFocusLeave}),(0,M.jsxs)("div",{className:v.default.gifPanel,children:[(0,M.jsx)(y.default,{loading:this.state.isFetching}),(0,M.jsxs)("div",{className:v.default.bodyContainer,onMouseDown:this.preventBlur,children:[t,(0,M.jsx)("div",{className:v.default.panelBody,onScroll:this.handleScroll,ref:this._refScrollContainer,children:(0,M.jsx)(f.GifSearch,{ref:this._setGifPanelRef,onGif:(0,l.default)(this.props.onGif,"this.props.onGif"),searchText:a,scrollGifIntoViewIfNeeded:this.scrollGifIntoViewIfNeeded,selectedSectionId:this.state.selectedSectionId,setIsFetching:this._handleIsFetching})})]})]})]})}}t.GifPanelImpl=P,P.displayName="GifPanelImpl";const A=(0,S.ListenerHOC)(P);t.GifPanel=class extends A{focusSearchInput(e){this.getComponent().focusSearchInput(e)}restoreFocus(e){this.getComponent().restoreFocus(e)}}},87642:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(94184)),r=a(67294),o=a(88102),l=n(a(52665)),d=a(24808),u=a(59927),c=n(a(53638)),h=n(a(43725)),f=s(a(41124)),p=a(58668),m=n(a(34949)),_=n(a(11810)),g=n(a(7566)),v=n(a(23217)),C=n(a(59909)),S=a(19529),y=n(a(83542)),b=a(85893);function E(e,t){const{msg:a}=e,s=(0,C.default)(),n=(0,y.default)(),E=(0,r.useRef)(null);(0,S.useListener)(a,"change:mediaData.mediaStage",(()=>{s()}));const T=(0,r.useCallback)((()=>{n((()=>{var e;null===(e=E.current)||void 0===e||e.setShouldAnimate(!0)}))}),[n]);(0,r.useEffect)((()=>{T()}),[]);const x=e=>{e.stopPropagation();switch(a.mediaData.mediaStage){case p.MEDIA_DATA_STAGE.NEED_POKE:a.forceDownloadMediaEvenIfExpensive();break;case p.MEDIA_DATA_STAGE.FETCHING:a.cancelDownload();break;case p.MEDIA_DATA_STAGE.UPLOADING:a.cancelUpload();break;case p.MEDIA_DATA_STAGE.ERROR_MISSING:o.Cmd.openModal((0,b.jsx)(l.default,{title:h.default.t(860),onOK:()=>o.Cmd.closeModal(),okText:h.default.t(1765),children:h.default.t(859)}))}},M=()=>{_.default.remove(a)};(0,r.useEffect)((()=>{T()}),[T,e]);const P=()=>E.current;(0,r.useImperativeHandle)(t,(()=>({getGifRef:P})));const A=a.mediaData,I=new u.GifInfo(void 0,A.renderableUrl,void 0,void 0,void 0,Math.round(A.aspectRatio*u.TARGET_GIF_HEIGHT),(()=>{switch(a.gifAttribution){case d.VideoMessageAttribution.GIPHY:return u.GIPHY;case d.VideoMessageAttribution.TENOR:return u.TENOR;default:return""}})(),!1);if(A.mediaStage===p.MEDIA_DATA_STAGE.RESOLVED)return(0,b.jsx)(c.default,{ref:E,gif:I,onSend:e.onSend,isStarred:!0,onUnstarMsg:M},a.filehash);if(A.preview instanceof m.default){const e=A.preview.url();let t;switch(A.mediaStage){case p.MEDIA_DATA_STAGE.ERROR_MISSING:break;case p.MEDIA_DATA_STAGE.NEED_POKE:t=(0,b.jsx)(f.Download,{});break;case p.MEDIA_DATA_STAGE.FETCHING:case p.MEDIA_DATA_STAGE.UPLOADING:t=(0,b.jsx)(f.Pending,{cancelable:!0});break;default:t=(0,b.jsx)(f.Pending,{})}const s=(0,i.default)(g.default.thumb,{[g.default.blur]:A.mediaStage===p.MEDIA_DATA_STAGE.ERROR_MISSING}),n=(0,b.jsx)("div",{className:s,style:{backgroundImage:`url(${e})`,height:`${u.TARGET_GIF_HEIGHT}px`}});return(0,b.jsxs)("div",{className:g.default.container,style:{flexBasis:I.widthStr},children:[(0,b.jsx)("div",{className:g.default.wrapper,style:{width:I.widthStr},onClick:x,children:(0,b.jsxs)("div",{className:g.default.innerWrapper,style:{paddingBottom:I.ratioStr},children:[t,n]})}),(0,b.jsx)("button",{className:g.default.starIcon,onClick:M,children:(0,b.jsx)(v.default,{name:"star"})})]},a.filehash)}return null}var T=(0,r.forwardRef)(E);t.default=T},48692:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(45578)),i=s(a(52013)),r=s(a(94184)),o=a(67294),l=a(59927),d=a(55414),u=s(a(11810)),c=s(a(87642)),h=s(a(29123)),f=s(a(23217)),p=s(a(59909)),m=a(19529),_=a(85893);function g(e,t){const a=(0,p.default)(),s=(0,o.useRef)(null),g=(0,o.useRef)({}),v=(0,o.useRef)(0),C=(0,o.useRef)(0),[S,y]=(0,o.useState)(0);(0,o.useEffect)((()=>{u.default.isSynced||u.default.sync()}),[]),(0,m.useListener)(u.default,"add remove reset",a);const b=()=>{var e;return null===(e=s.current)||void 0===e?void 0:e.clientHeight},E=()=>{var e;return Boolean(null===(e=s.current)||void 0===e?void 0:e.childNodes.length)},T=e=>!!e&&(!!s.current&&s.current.contains(e)),x=()=>{var e,t;const a=null===(e=g.current[C.current])||void 0===e||null===(t=e.getGifRef())||void 0===t?void 0:t.messagePreviewRef;a&&i.default.focus(a)},M=()=>{C.current=0,x()};(0,o.useImperativeHandle)(t,(()=>({getClientHeight:b,hasGifs:E,isStarredGif:T,initSelection:M})));const P=()=>S>0,A=()=>P()?new Promise((e=>{y(S-1),e(!0)})):Promise.resolve(!1),I=()=>S+4<v.current,w=()=>I()?new Promise((e=>{y(S+1),e(!0)})):Promise.resolve(!1),k=e=>{e&&(e.preventDefault(),e.stopPropagation())},j={left:e=>{A().then((t=>{C.current=t?C.current:C.current-1,C.current<0?k(e):(k(e),x())}))},right:e=>{w().then((t=>{C.current=t?C.current-1:C.current;const a=Object.keys(g.current).length;if(C.current<3&&C.current<a-1)C.current=C.current+1;else{if(!I())return void k(e);C.current=3}k(e),x()}))},enter:e=>{var t;k(e),null===(t=g.current[C.current])||void 0===t||t.getGifRef().handleClick()}},N=(0,n.default)(u.default.toArray(),"filehash");if(v.current=N.length,0===N.length)return(0,_.jsx)("div",{});if(N.length<=4){let t=0;const a=N.map(((a,s)=>(t+=Math.round(a.mediaData.aspectRatio*l.TARGET_GIF_HEIGHT),(0,_.jsx)(c.default,{ref:e=>g.current[s]=e,msg:a,onSend:e.onSend},a.filehash))));return t+=(a.length-1)*l.GAP_SIZE,(0,_.jsx)(d.HotKeys,{className:h.default.section,handlers:j,children:(0,_.jsx)("div",{ref:s,className:h.default.searchRow,style:{maxWidth:`${t}px`},children:a})})}{const t=P(),a=I(),n=t?A:null,i=a?w:null,o=(0,r.default)(h.default.pager,h.default.pagerLeft,{[h.default.pagerDisabled]:!t}),l=(0,r.default)(h.default.pager,h.default.pagerRight,{[h.default.pagerDisabled]:!a}),u=(0,_.jsx)("div",{className:o,onClick:n,children:(0,_.jsx)(f.default,{name:"chevron-left-alt"})}),p=(0,_.jsx)("div",{className:l,onClick:i,children:(0,_.jsx)(f.default,{name:"chevron-right-alt"})}),m=N.slice(S,S+4).map(((t,a)=>(0,_.jsx)(c.default,{ref:e=>g.current[a]=e,msg:t,onSend:e.onSend},t.filehash)));return(0,_.jsx)("div",{className:h.default.section,children:(0,_.jsxs)(d.HotKeys,{onRef:e=>{s.current=e},className:h.default.searchRow,handlers:j,children:[u,(0,_.jsx)("div",{className:h.default.body,children:m}),p]})})}}var v=(0,o.forwardRef)(g);t.default=v},99951:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.jsx)("div",{className:n.default.barContainer,role:"progressbar",children:e.loading&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:n.default.movingBar1}),(0,i.jsx)("span",{className:n.default.movingBar2})]})})};var n=s(a(75228)),i=a(85893)},49357:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,r.jsx)("div",{role:e.role,className:(0,n.default)(i.default.container,e.className),onMouseDown:e=>{e.stopPropagation()},children:e.children})};var n=s(a(94184)),i=s(a(40870)),r=a(85893)},50725:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;let a=-1;const s=e.sectionIds.map(((t,s)=>{let n=!1;return t===e.selectedSectionId&&(e.showTabHighlight?(a=s,n=!0):a=-1),e.renderSectionTab(t,n)}));return(0,d.jsx)(r.HotKeys,{component:"div",handlers:(0,i.default)({"shift+tab":e.onFocusPrev,tab:e.onFocusNext,down:e.onFocusLeave,left:()=>{var t,a;o.default.isRTL()?null===(t=e.onFocusNext)||void 0===t||t.call(e):null===(a=e.onFocusPrev)||void 0===a||a.call(e)},right:()=>{var t,a;o.default.isRTL()?null===(t=e.onFocusPrev)||void 0===t||t.call(e):null===(a=e.onFocusNext)||void 0===a||a.call(e)},enter:e.onEnter,space:e.onEnter}),children:(0,d.jsxs)(n.default,{children:[(0,d.jsx)(l.default,{numTabs:e.sectionIds.length,selectedTabIndex:a,animate:null===(t=e.showTabHighlight)||void 0===t||t}),s]})})};var n=s(a(49357)),i=s(a(21790)),r=a(55414),o=s(a(43725)),l=s(a(24649)),d=a(85893)},93353:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.THEMES=t.MenuTab=void 0;var n=s(a(18446)),i=s(a(99964)),r=s(a(52013)),o=s(a(94184)),l=a(67294),d=s(a(92466)),u=a(85893);const c={CAROUSEL:"CAROUSEL",CAROUSEL_END:"CAROUSEL_END",MENU:"MENU",NONE:"NONE"};t.THEMES=c;class h extends l.PureComponent{constructor(){super(...arguments),this._setRefTab=e=>{var t,a;this._refTab=e,null===(t=(a=this.props).onRef)||void 0===t||t.call(a,e)},this._handleClick=e=>{this.props.onClick&&this.props.onClick(this.props.sectionId,e)}}focus(){this._refTab&&(this.hasFocus()||r.default.focus(this._refTab))}hasFocus(){return!!document.activeElement&&this._refTab===document.activeElement}_getStyle(e){return(0,n.default)(this._style,e)||(this._style=e),this._style}render(){const{theme:e,title:t,a8n:a,role:s="button"}=this.props;return(0,u.jsx)("div",{ref:this._setRefTab,role:s,className:(0,o.default)(d.default.tab,{[d.default.menu]:e===c.MENU,[d.default.carousel]:e===c.CAROUSEL||e===c.CAROUSEL_END,[d.default.carouselEnd]:e===c.CAROUSEL_END,[d.default.selected]:this.props.selected,[d.default.highlightOnFocus]:this.props.showFocusIndicator}),onClick:this._handleClick,style:this._getStyle({width:this.props.width,transform:this.props.transform}),title:t,tabIndex:"0","data-a8n":i.default.key(a),children:this.props.children})}}t.MenuTab=h,h.displayName="MenuTab"},24649:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(94184)),i=a(67294),r=s(a(43725)),o=s(a(33607)),l=s(a(59552)),d=s(a(41502)),u=a(85893);function c(e){const t=(0,l.default)((()=>r.default.isRTL()?-1:1)),a=(0,d.default)(e.selectedTabIndex);let s,i,c;return c=(-1!==a||e.selectedTabIndex===a)&&Boolean(e.animate),-1!==e.selectedTabIndex?(i=`translateX(${100*e.selectedTabIndex*t.current}%)`,s="4px"):-1!==a&&-1===e.selectedTabIndex&&(s="0px"),(0,u.jsx)("div",{className:(0,n.default)(o.default.menuTabsMarker,{[o.default.hide]:e.hide,[o.default.animate]:!c&&e.animate,[o.default.animateWithTransform]:c}),style:{width:100/e.numTabs+"%",transform:i,height:s}})}var h=(0,i.memo)(c);t.default=h},54222:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.PanelSearchInput=t.HEIGHT=void 0;var n=s(a(99964)),i=s(a(45120)),r=s(a(52013)),o=s(a(94184)),l=a(67294),d=s(a(69618)),u=a(55414),c=s(a(43725)),h=s(a(74760)),f=a(52596),p=s(a(23217)),m=a(65127),_=a(85893);t.HEIGHT=56;const g=(0,l.forwardRef)(((e,t)=>{const a=(0,l.useRef)(),s=(0,l.useRef)(),[g,v]=(0,l.useState)(e.value||"");null!=e.value&&e.value!==g&&v(e.value);const C=()=>!!document.activeElement&&a.current===document.activeElement,S=e=>{const t=a.current;t&&(C()||(r.default.focus(t),e&&i.default.indicateFocus(s.current)))};(0,l.useImperativeHandle)(t,(()=>({focus:S,hasFocus:C})));const y=t=>{var a;v(""),null===(a=e.onChange)||void 0===a||a.call(e,"",t)};let b=null;return g&&!e.tabFocused&&(b=(0,_.jsx)("button",{className:h.default.cancelIcon,onClick:y,children:(0,_.jsx)(p.default,{name:"x-alt-small"})})),(0,_.jsx)(u.HotKeys,{handlers:{enter:t=>{var a;t.preventDefault(),t.stopPropagation(),null===(a=e.onEnterKey)||void 0===a||a.call(e,t)},up:t=>{var a;t.stopPropagation(),t.preventDefault(),null===(a=e.onUpKey)||void 0===a||a.call(e,t)},down:t=>{var a;t.stopPropagation(),t.preventDefault(),null===(a=e.onDownKey)||void 0===a||a.call(e,t)}},"data-tab":d.default.TAB_ORDERS.PANEL_SEARCH_INPUT,className:(0,o.default)(h.default.searchRow,{[h.default.ffFix]:m.UA.isGecko,[h.default.rowShadow]:e.shadow}),onFocus:()=>S(),children:(0,_.jsx)("label",{ref:s,className:h.default.rowInput,children:(0,_.jsxs)("div",{className:h.default.inputContainer,children:[(0,_.jsx)("input",{"data-a8n":n.default.key("input-emoji-search"),ref:a,className:(0,o.default)(h.default.inputEmojiSearch,f.SELECTABLE_INPUT_CSS_CLASS),type:"text",role:"searchbox",dir:c.default.isRTL()?"rtl":"ltr",value:e.tabFocused?"":g,title:e.label,placeholder:e.label,onMouseDown:e=>{e.stopPropagation()},onChange:t=>{var a;v(t.target.value),null===(a=e.onChange)||void 0===a||a.call(e,t.target.value,t)}}),b]})})},"search-input")}));t.PanelSearchInput=g},64894:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(52013)),i=s(a(94184)),r=a(67294),o=a(28325),l=a(7293),d=s(a(57379)),u=a(84387),c=a(66299),h=a(5446),f=s(a(24315)),p=a(85893);class m extends r.PureComponent{constructor(){super(...arguments),this._refDiv=(0,r.createRef)(),this.getElement=()=>this._refDiv.current,this.state={hasFetchedData:c.StickerPackCollection.hasFetchedData(),hasStickers:c.StickerPackCollection.length>0,menuShadow:!1,selectedStickerPackIndex:this._getInitialStickerPackIndex()},this._setRefEmptyContent=e=>{this._refEmptyContent=e},this._setRefContent=e=>{this._refContent=e},this._setRefMenu=e=>{this._refMenu=e},this._handleContainerClick=e=>{this._stopEvent(e),this.restoreFocus()},this._handleContentFocusNext=e=>{this._stopEvent(e),this._refMenu&&this._refMenu.focus()},this._handleContentFocusPrev=e=>{this._stopEvent(e),this._refMenu&&this._refMenu.focus()},this._handleEmptyFocusPrev=e=>{this._stopEvent(e),this._focusPrev()},this._handleEmptyFocusNext=e=>{this._stopEvent(e),this._focusNext()},this._handleItemClick=e=>{this.setState({selectedStickerPackIndex:e})},this._handleMenuFocusBelow=e=>{this._stopEvent(e),this._refContent&&this._refContent.focus()},this._handleMenuFocusNext=e=>{this._stopEvent(e),this._focusNext()},this._handleMenuFocusPrev=e=>{this._stopEvent(e),this._focusPrev()},this._handleScroll=e=>{let{scrollTop:t}=e;this._lastScrollTop=t,this.setState({menuShadow:t>0})},this._handleStickerPacksChange=()=>{this.setState({hasFetchedData:c.StickerPackCollection.hasFetchedData(),hasStickers:c.StickerPackCollection.length>0})}}_getInitialStickerPackIndex(){const{displayCache:e}=this.props;return e&&null!=e.selectedStickerPackIndex?e.selectedStickerPackIndex:0}componentDidMount(){this.props.listeners.add(c.StickerPackCollection,"change:length",this._handleStickerPacksChange),this.props.listeners.add(c.StickerPackCollection,"change:pageFetchStates",this._handleStickerPacksChange),this.props.listeners.uiIdle((()=>{this.restoreFocus(),c.StickerPackCollection.fetchAt(0)}))}componentWillUnmount(){this.props.onDisplayCache&&this.props.onDisplayCache({scrollTop:this._lastScrollTop,selectedStickerPackIndex:this.state.selectedStickerPackIndex})}restoreFocus(){this.props.listeners.uiIdle((()=>{if(this._refEmptyContent){if(document.activeElement===this._refEmptyContent)return;n.default.focus(this._refEmptyContent)}else this._refMenu&&this._refMenu.focus()}))}_focusPrev(){this.props.onFocusPrev()}_focusNext(){this.props.onFocusNext()}_stopEvent(e){e&&(e.preventDefault(),e.stopPropagation())}render(){const e=l.GK.isRecentStickersEnabled(),t=l.GK.isStarredStickersEnabled(),a=(e?1:0)+(t?1:0),{selectedStickerPackIndex:s}=this.state;if(!e&&this.state.hasFetchedData&&!this.state.hasStickers)return(0,p.jsx)(h.StickerPanelEmpty,{containerClassName:d.default.panelContainer,onClick:this._handleContainerClick,onFocusPrev:this._handleEmptyFocusPrev,onFocusNext:this._handleEmptyFocusNext,onRef:this._setRefEmptyContent});const{displayLocation:n}=this.props,r=(0,i.default)(d.default.panelContainer,{[d.default.panelDropdown]:n===o.DisplayLocation.Dropdown});return(0,p.jsxs)("div",{className:r,onClick:this._handleContainerClick,ref:this._refDiv,children:[(0,p.jsx)(f.default,{ref:this._setRefMenu,displayLocation:n,onFocusBelow:this._handleMenuFocusBelow,onFocusNext:this._handleMenuFocusNext,onFocusPrev:this._handleMenuFocusPrev,onItemClick:this._handleItemClick,selectedStickerPackIndex:s,shadow:this.state.menuShadow,recentStickersEnabled:e,starredStickersEnabled:t,specialItemsCount:a}),(0,p.jsx)(h.StickerPanelContent,{ref:this._setRefContent,displayLocation:n,onFocusNext:this._handleContentFocusNext,onFocusPrev:this._handleContentFocusPrev,onScroll:this._handleScroll,onSticker:this.props.onSticker,selectedStickerPackIndex:s,recentStickersEnabled:e,starredStickersEnabled:t,specialItemsCount:a})]})}}m.defaultProps={displayLocation:o.DisplayLocation.Dropdown},m.displayName="StickerPanel";const _=(0,u.ListenerHOC)(m);t.default=class extends _{restoreFocus(){this.getComponent().restoreFocus()}}},7380:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(94184)),i=a(67294),r=(a(86945),a(88102)),o=a(57297),l=a(28325),d=s(a(57379)),u=s(a(50725)),c=s(a(98374)),h=s(a(52411)),f=s(a(14048)),p=s(a(43725)),m=a(44333),_=a(76626),g=s(a(23217)),v=a(93353),C=s(a(59552)),S=s(a(84215)),y=s(a(83542)),b=s(a(59147)),E=a(85893);var T=(0,i.forwardRef)(((e,t)=>{var a,s;const{displayLocation:p=l.DisplayLocation.Dropdown}=e,T=(0,b.default)(),P=p===l.DisplayLocation.ComposeBox&&(0,f.default)();const A=(0,i.useMemo)((()=>{const e=[];return e.push(o.StickerTabs.RECENTS),e.push(o.StickerTabs.LOVE,o.StickerTabs.GREETINGS,o.StickerTabs.HAPPY,o.StickerTabs.SAD,o.StickerTabs.ANGRY,o.StickerTabs.CELEBRATE),P&&e.push(o.StickerTabs.STORE),e}),[P]),I=(0,i.useRef)(),w=(0,i.useRef)(),k=(0,i.useRef)(),j=(0,C.default)((()=>new Map)),[N,O]=(0,i.useState)((null===(a=e.displayCache)||void 0===a?void 0:a.selectedTab)||o.StickerTabs.RECENTS),[R,D]=(0,i.useState)(-1);(0,S.default)((()=>{var t;null===(t=e.onDisplayCache)||void 0===t||t.call(e,{scrollTop:w.current,selectedTab:N})}));const L=(0,y.default)(),B=()=>L((()=>{const e=k.current;e&&e.focus()}));(0,i.useImperativeHandle)(t,(()=>({restoreFocus:B,getElement:()=>I.current})));const F=(0,y.default)(),G=(t,a)=>{var s,n,i;if(null==a||a.preventDefault(),t===o.StickerTabs.STORE)return r.Cmd.openDrawerRight((0,E.jsx)(_.StickerStoreFlowLoadable,{onSticker:e.onSticker}),"slide-left",T),void F((()=>{m.StickerPackCollectionMd.fetch()}));O(t),null===(s=k.current)||void 0===s||s.clearSearchText(),null===(n=e.onChange)||void 0===n||n.call(e,""),null===(i=k.current)||void 0===i||i.focus()},U=(0,n.default)(d.default.panelContainer,{[d.default.panelDropdown]:p===l.DisplayLocation.Dropdown});return(0,E.jsxs)("div",{className:U,ref:I,children:[(0,E.jsx)(u.default,{selectedSectionId:N,sectionIds:A,renderSectionTab:(e,t)=>{const a=x(e),s=function(e){switch(e){case o.StickerTabs.FAVORITES:return(0,E.jsx)(g.default,{name:"panel-starred"});case o.StickerTabs.RECENTS:return(0,E.jsx)(g.default,{name:"panel-recent"});case o.StickerTabs.STORE:return(0,E.jsx)(g.default,{name:"panel-add"});default:return x(e)}}(e),n=function(e){switch(e){case o.StickerTabs.STORE:return"sticker-store";default:return null}}(e);return(0,E.jsx)(v.MenuTab,{onClick:G,sectionId:e,selected:t,showFocusIndicator:-1!==R,title:a,theme:v.THEMES.MENU,a8n:n,onRef:t=>{j.current.set(e,t)},children:(0,E.jsx)("span",{className:c.default.tabIconOrText,children:s})},a)},showTabHighlight:!(null===(s=e.defaultSearchText)||void 0===s?void 0:s.trim()),onFocusPrev:e=>{var t;M(e);const a=(A.length+R-1)%A.length,s=A[a];null===(t=j.current.get(s))||void 0===t||t.focus(),D(a)},onFocusNext:e=>{var t;M(e);const a=(R+1)%A.length,s=A[a];null===(t=j.current.get(s))||void 0===t||t.focus(),D(a)},onEnter:()=>{D(-1),G(A[R])},onFocusLeave:e=>{M(e),B(),D(-1)}}),(0,E.jsx)(h.default,{ref:k,onFocusUp:e=>{var t;M(e),null===(t=j.current.get(N))||void 0===t||t.focus(),D(A.indexOf(N))},onFocusNext:t=>{M(t),e.onFocusNext()},onFocusPrev:t=>{M(t),e.onFocusPrev()},onScroll:e=>{let{scrollTop:t}=e;w.current=t},onChange:e.onChange,onSticker:e.onSticker,defaultSearchText:e.defaultSearchText,selectedTab:N,displayLocation:p})]})}));function x(e){switch(e){case o.StickerTabs.FAVORITES:return p.default.t(1024);case o.StickerTabs.RECENTS:return p.default.t(1025);case o.StickerTabs.LOVE:return p.default.t(1303);case o.StickerTabs.GREETINGS:return p.default.t(1301);case o.StickerTabs.HAPPY:return p.default.t(1302);case o.StickerTabs.SAD:return p.default.t(1304);case o.StickerTabs.ANGRY:return p.default.t(1299);case o.StickerTabs.CELEBRATE:return p.default.t(1300);case o.StickerTabs.STORE:return p.default.t(1307)}}function M(e){e&&(e.preventDefault(),e.stopPropagation())}t.default=T},5446:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.StickerPanelContent=void 0,t.StickerPanelEmpty=function(e){let{containerClassName:t,onClick:a,onFocusPrev:s,onFocusNext:i,onRef:r}=e;return(0,m.jsxs)("div",{className:(0,n.default)(t,l.default.emptyContainer),onClick:a,children:[(0,m.jsx)("div",{className:l.default.emptySticker,style:{backgroundImage:`url(${c.default})`}}),(0,m.jsx)(o.HotKeys,{handlers:{"shift+tab":s,tab:i},onRef:r,children:(0,m.jsx)("p",{className:l.default.emptyText,children:d.default.t(1298)})})]})};var n=s(a(94184)),i=a(67294),r=s(a(21790)),o=a(55414),l=s(a(49972)),d=s(a(43725)),u=s(a(11339)),c=s(a(46023)),h=s(a(17385)),f=s(a(98178)),p=s(a(86319)),m=a(85893);function _(e,t){const{onFocusPrev:a,onSticker:s,recentStickersEnabled:d,selectedStickerPackIndex:c,onScroll:_,displayLocation:g,starredStickersEnabled:v,specialItemsCount:C}=e,S=(0,i.useRef)(null),y=()=>{a()},b=e=>{s(e,u.default.STICKER_SEND_ORIGIN_TYPE.STICKER_PICKER_TAB_RECENTS)},E=e=>{s(e,u.default.STICKER_SEND_ORIGIN_TYPE.STICKER_PICKER_TAB_FAVORITES)},T=()=>{S.current&&S.current.focus()};(0,i.useImperativeHandle)(t,(()=>({focus:T})));const x=(0,n.default)(l.default.container);return(0,m.jsx)(o.HotKeys,{className:x,handlers:(0,r.default)({"shift+tab":e.onFocusPrev,tab:e.onFocusNext}),children:d&&0===c?(0,m.jsx)(h.default,{ref:S,onFocusPrev:y,onScroll:_,onStickerClick:b,onStickerEnter:b,displayLocation:g}):v&&1===c?(0,m.jsx)(p.default,{ref:S,onFocusPrev:y,onScroll:_,onStickerClick:E,onStickerEnter:E}):(0,m.jsx)(f.default,{ref:S,onFocusPrev:y,onScroll:_,onStickerClick:s,onStickerEnter:s,selectedStickerPackIndex:c-C})})}const g=(0,i.forwardRef)(_);t.StickerPanelContent=g},52411:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(48926)),i=s(a(94184)),r=a(67294),o=a(57297),l=s(a(21790)),d=a(55414),u=s(a(49972)),c=s(a(43725)),h=s(a(99951)),f=s(a(11339)),p=a(54222),m=s(a(95885)),_=s(a(91864)),g=s(a(52444)),v=a(45068),C=a(80367),S=s(a(81559)),y=a(19529),b=s(a(88857)),E=a(99935),T=s(a(41956)),x=a(85893);const M=(0,r.forwardRef)(((e,t)=>{if(e.searchText)return(0,x.jsx)(C.StickerPackStickersScrollGrid,{ref:t,onFocusPrev:e.onFocusPrev,onStickerClick:e.onStickerClick,searchText:e.searchText,resetScroll:e.resetScroll});if(e.selectedTab===o.StickerTabs.FAVORITES)return(0,x.jsx)(_.default,{ref:t,onFocusPrev:e.onFocusPrev,onStickerClick:e.onStickerClick,resetScroll:e.resetScroll});if(e.selectedTab===o.StickerTabs.RECENTS)return(0,x.jsx)(g.default,{ref:t,onFocusPrev:e.onFocusPrev,onStickerClick:e.onStickerClick,resetScroll:e.resetScroll,displayLocation:e.displayLocation});return null!=(0,o.convertTabToMood)(e.selectedTab)?(0,x.jsx)(C.StickerPackStickersScrollGrid,{ref:t,selectedTab:e.selectedTab,onFocusPrev:e.onFocusPrev,onStickerClick:e.onStickerClick,searchText:e.searchText,resetScroll:e.resetScroll}):(__LOG__(4,void 0,new Error,!0)`_renderStickerScrollGrid attempted with an invalid selectedTab: ${e.selectedTab}`,SEND_LOGS("_renderStickerScrollGrid attempted with an invalid selectedTab"),null)}));var P=(0,r.forwardRef)(((e,t)=>{const{defaultSearchText:a,selectedTab:s}=e,_=function(){const[e,t]=(0,r.useState)(!1),[a,s]=(0,r.useState)(!0),[n]=(0,E.useTimeout)((()=>{s(!0)}),o.MINIMUM_LOADING_TIME);return(0,y.useListener)(v.StickerSearchCollection,"start_fetching",(()=>{t(!0),s(!1),n()})),(0,y.useListener)(v.StickerSearchCollection,"stop_fetching",(()=>{t(!1)})),e||!a}(),g=(0,r.useRef)(!1),C=(0,r.useRef)(),P=(0,r.useRef)(0),A=(0,r.useRef)(0),I=(0,r.useRef)(),[w,k]=(0,r.useState)(!0),j=()=>{const e=C.current;null!=e&&(e.scrollTop=0,A.current=0,P.current=0,k(!0))},[N,O]=(0,r.useState)(a||""),R=(0,r.useRef)(!1);(0,r.useEffect)((()=>{R.current?O(""):R.current=!0}),[s]);const D=function(){var e=(0,n.default)((function*(e){j();try{yield v.StickerSearchCollection.search(e)}catch(e){__LOG__(4,void 0,new Error,!0)`Sticker search promise failed`,SEND_LOGS(e)}}));return function(){return e.apply(this,arguments)}}(),L=(0,S.default)(D,250),B=()=>{const e=I.current;if(!e)return g.current=!0,void k(!0);e.focus(!1)};(0,r.useEffect)((()=>{B(),a&&D(a)}),[]),(0,r.useImperativeHandle)(t,(()=>({focus(){var e;null===(e=I.current)||void 0===e||e.focus()},clearSearchText(){O("")}})));const[F,G]=(0,r.useState)(!0),U=(0,b.default)((()=>{var t;const a=C.current;if(!a)return;null===(t=e.onScroll)||void 0===t||t.call(e,a);const{scrollTop:s}=a,n=A.current-s;if(n===o.INPUT_BAR_TOTAL_HEIGHT)return P.current=n,void(A.current=s);const i=Math.abs(n)>o.INPUT_BAR_SCROLL_SENSITIVITY;if(g.current=Math.abs(n)>o.INPUT_BAR_SCROLL_FAST,n<0)w&&(s>o.INPUT_HIDE_POINT&&i||A.current<o.INPUT_HIDE_POINT&&s>=o.INPUT_HIDE_POINT)&&k(!1);else if(!w){var r;!(null===(r=document.activeElement)||void 0===r?void 0:r.classList.contains(m.default.container))&&(i||s<o.INPUT_SHOW_POINT)&&k(!0)}A.current=s,P.current=n,G(s<=0)}),o.SCROLL_THROTTLE_TIME),V=(0,r.useRef)(),H=g.current?"emoji-search-slide-away-fast":"emoji-search-slide-away",K=(0,x.jsx)(T.default,{transitionName:H,children:w&&(0,x.jsx)(p.PanelSearchInput,{label:c.default.t(1205),onChange:(t,a)=>{var s;null===(s=e.onChange)||void 0===s||s.call(e,t,a),O(t),""!==t?L(t):L.cancel()},value:N||"",shadow:!F,ref:I,onUpKey:e.onFocusUp,onDownKey:()=>{var e;null===(e=V.current)||void 0===e||e.focus()}})}),q=(0,i.default)(u.default.containerSearch);return(0,x.jsxs)(d.HotKeys,{className:q,handlers:(0,l.default)({"shift+tab":e.onFocusPrev,tab:e.onFocusNext}),onClick:e=>{!function(e){if(!e)return;e.preventDefault(),e.stopPropagation()}(e),B()},children:[(0,x.jsx)(h.default,{loading:_}),(0,x.jsxs)("div",{className:u.default.bodyContainer,children:[K,(0,x.jsx)("div",{className:(0,i.default)(u.default.contentContainer,u.default.contentContainerSearch),onScroll:U,ref:C,children:(0,x.jsx)(M,{ref:V,onFocusPrev:B,onStickerClick:t=>{var a;let n;n=N?f.default.STICKER_SEND_ORIGIN_TYPE.STICKER_SEARCH:s===o.StickerTabs.RECENTS?f.default.STICKER_SEND_ORIGIN_TYPE.STICKER_PICKER_TAB_RECENTS:s===o.StickerTabs.FAVORITES?f.default.STICKER_SEND_ORIGIN_TYPE.STICKER_PICKER_TAB_FAVORITES:f.default.STICKER_SEND_ORIGIN_TYPE.STICKER_PICKER_TAB_EMOTION,e.onSticker(t,n),N&&(null===(a=I.current)||void 0===a||a.focus())},searchText:N.trim(),selectedTab:e.selectedTab,resetScroll:j,displayLocation:e.displayLocation})})]})]})}));t.default=P},52146:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(48926)),i=s(a(51463)),r=s(a(99964)),o=s(a(52013)),l=s(a(94184)),d=s(a(48360)),u=a(67294),c=a(86945),h=a(88102),f=a(67911),p=a(71174),m=a(83610),_=a(7293),g=a(55414),v=s(a(14048)),C=s(a(43725)),S=a(84866),y=a(31019),b=s(a(12064)),E=s(a(95885)),T=a(18644),x=s(a(24717)),M=s(a(6914)),P=a(49082),A=a(85893);var I=(0,u.forwardRef)(((e,t)=>{const{onDownload:a,theme:s="stickerPanel"}=e,I=(0,P.useModelValues)(e.sticker,["id","filehash","mediaData","isPlaceholder","isCreateButton"]),w=(0,u.useRef)(),k=(0,u.useMemo)((()=>(0,i.default)((0,n.default)((function*(){yield I.downloadMedia(),null==a||a(I.id)})))),[I,a]),[j,N]=(0,u.useState)(),O=()=>!!w.current&&w.current===document.activeElement,R=()=>{w.current&&(O()||o.default.focus(w.current))},D=()=>w.current?w.current.offsetTop:0;(0,u.useImperativeHandle)(t,(()=>({hasFocus:O,focus:R,getOffsetTop:D})));const L=e.onClick?t=>{const a=e.onClick;a&&a((0,y.unproxy)(I),t)}:void 0,[B,{isIntersecting:F}]=(0,M.default)({root:null,rootMargin:"10px",threshold:0});let G,U;return(0,u.useEffect)((()=>{F&&k()}),[F,k]),"stickerDetails"!==s&&(G=t=>{const a=[];if(!_.GK.supportsFeature(_.GK.F.MD_BACKEND)||I.isPlaceholder||I.isCreateButton)return;t.preventDefault(),t.stopPropagation(),(0,c.getABPropConfigValue)("sticker_md_favorite_stickers_enabled")&&((0,m.isStickerFilehashFavorited)(I.filehash)?a.push((0,A.jsx)(p.DropdownItem,{a8n:"mi-remove-favorite-sticker",action:()=>{(0,m.removeStickerFromFavorites)(e.sticker)},children:C.default.t(1140)},"remove-favorite-sticker")):a.push((0,A.jsx)(p.DropdownItem,{a8n:"mi-add-favorite-sticker",action:()=>{(0,m.addStickerToFavorites)(e.sticker)},children:d.default._("Add to favorites",null,{hk:"2ODf78"})},"add-favorite-sticker")));const s=S.MediaBlobCache.get(e.sticker.filehash);null!=s&&(0,f.supportsCopyImageToClipboard)()&&a.push((0,A.jsx)(p.DropdownItem,{a8n:"mi-copy-favorite-sticker",action:()=>{(0,f.copyImageToClipboard)(s)},children:d.default._("Copy Sticker Image",null,{hk:"2hsnNe"})},"copy-favorite-sticker"));const{stickerPackId:n}=I.mediaData,{dontShowViewPack:i=!1}=e;(0,v.default)()&&!1===i&&n&&a.push((0,A.jsx)(p.DropdownItem,{a8n:"mi-open-sticker-pack",action:()=>h.Cmd.openStickerPack(n),children:C.default.t(1455)},"open-sticker-pack")),N({menu:a,event:t})},j&&(U=(0,A.jsx)(T.UIE,{displayName:"ChatContextMenu",escapable:!0,popable:!0,requestDismiss:()=>N(null),children:(0,A.jsx)(x.default,{contextMenu:j})}))),(0,A.jsxs)(g.HotKeys,{onRef:e=>{e&&(w.current=e,B(e))},className:(0,l.default)(E.default.container,{[E.default.stickerPanel]:"stickerPanel"===s}),handlers:{enter:t=>{const a=e.onEnter;a&&a((0,y.unproxy)(I),t)}},onContextMenu:G,children:[(0,A.jsx)("div",{className:E.default.border,"data-a8n":r.default.key("sticker-item"),children:F&&(0,A.jsx)(b.default,{mediaData:I.mediaData,onClick:L,theme:s,loopAnimation:!0,downloadMedia:k,isCreateButton:I.isCreateButton})}),U]})}));t.default=I},91864:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(67294),i=s(a(70723)),r=s(a(43725)),o=s(a(91981)),l=s(a(27632)),d=a(19529),u=a(85893);var c=(0,n.forwardRef)(((e,t)=>{const a=(0,n.useRef)(),s=function(e){const[t,a]=(0,n.useState)([]),s=()=>{const t=i.default.toArray();a(t.map((e=>e.sticker))),null==e||e()};return(0,n.useEffect)((()=>{s()}),[]),(0,d.useListener)(i.default,"add remove change sort",s),t}(e.resetScroll);return(0,n.useImperativeHandle)(t,(()=>({focus(e){var t;null===(t=a.current)||void 0===t||t.focus(e)}}))),0===s.length?(0,u.jsx)(o.default,{text:r.default.t(1306)}):(0,u.jsx)(l.default,{ref:a,onFocusPrev:e.onFocusPrev,onScroll:e.onScroll,onStickerClick:e.onStickerClick,onStickerEnter:e.onStickerClick,stickers:s,theme:"searchable",loadOneRow:!0})}));t.default=c},17385:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(67294),i=a(28325),r=s(a(43725)),o=a(91692),l=a(89867),d=s(a(91981)),u=s(a(52884)),c=s(a(27632)),h=a(85893);function f(e,t){const a=(0,n.useRef)(null),[s,f]=(0,n.useState)((()=>o.RecentStickerCollection.isSynced()));(0,n.useEffect)((()=>{s||o.RecentStickerCollection.sync().then((()=>{f(!0)}))}),[]);const p=e=>{var t;null===(t=a.current)||void 0===t||t.focus(e)};(0,n.useImperativeHandle)(t,(()=>({focus:p})));const m=o.RecentStickerCollection.toArray(),_=e.displayLocation===i.DisplayLocation.ComposeBox?[l.Sticker.getCreateButton(),...m]:m;return s?0===_.length?(0,h.jsx)(d.default,{text:r.default.t(1305)}):(0,h.jsx)(c.default,{ref:a,onFocusPrev:e.onFocusPrev,onScroll:e.onScroll,onStickerClick:e.onStickerClick,onStickerEnter:e.onStickerEnter,stickers:_}):(0,h.jsx)(u.default,{quantity:o.RECENT_STICKERS_LIMIT})}var p=(0,n.forwardRef)(f);t.default=p},52444:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(67294),i=a(28325),r=s(a(43725)),o=a(49264),l=a(89867),d=s(a(91981)),u=s(a(27632)),c=a(19529),h=a(85893);var f=(0,n.forwardRef)(((e,t)=>{const a=(0,n.useRef)(),s=function(e){const[t,a]=(0,n.useState)([]),s=()=>{const t=o.RecentStickerCollectionMd.toArray();a(t.map((e=>e.sticker))),null==e||e()};return(0,n.useEffect)((()=>{s()}),[]),(0,c.useListener)(o.RecentStickerCollectionMd,"add remove change sort",s),t}(e.resetScroll),f=e.displayLocation===i.DisplayLocation.ComposeBox?[l.Sticker.getCreateButton(),...s]:s;return(0,n.useImperativeHandle)(t,(()=>({focus(e){var t;null===(t=a.current)||void 0===t||t.focus(e)}}))),0===f.length?(0,h.jsx)(d.default,{text:r.default.t(1305)}):(0,h.jsx)(u.default,{ref:a,onFocusPrev:e.onFocusPrev,onScroll:e.onScroll,onStickerClick:e.onStickerClick,onStickerEnter:e.onStickerClick,stickers:f,theme:"searchable"})}));t.default=f},98178:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(67294),i=s(a(43725)),r=s(a(11339)),o=a(66299),l=s(a(93881)),d=s(a(21300)),u=s(a(59909)),c=a(19529),h=a(85893);function f(e){let{onRetryClick:t}=e;return(0,h.jsxs)("div",{className:l.default.container,children:[(0,h.jsx)("div",{children:i.default.t(750)}),(0,h.jsx)("div",{"data-id":"retry",className:l.default.retryButton,onClick:t,children:i.default.t(1180).toUpperCase()})]})}function p(e,t){const{selectedStickerPackIndex:a}=e,s=(0,u.default)(),i=(0,n.useRef)(null);(0,n.useEffect)((()=>{o.StickerPackCollection.fetchAt(a)}),[]);const l=()=>{o.StickerPackCollection.fetchAt(a,!0)};(0,n.useEffect)((()=>{const e=o.StickerPackCollection.pageWithIndex(a);o.StickerPackCollection.pageFetchStates[e]===o.PAGE_FETCH_STATE.ERROR&&o.StickerPackCollection.fetchAt(a,!0)}),[a]);const p=e=>{i.current&&i.current.focus(e)};(0,n.useImperativeHandle)(t,(()=>({focus:p}))),(0,c.useListener)(o.StickerPackCollection,"change:pageFetchStates",((e,t)=>{o.StickerPackCollection.pageWithIndex(a)===e&&(t?s():o.StickerPackCollection.fetchAt(a))}));const m=o.StickerPackCollection.at(e.selectedStickerPackIndex);if(!m)return null;const _=o.StickerPackCollection.pageWithIndex(e.selectedStickerPackIndex);if(o.StickerPackCollection.pageFetchStates[_]===o.PAGE_FETCH_STATE.ERROR)return(0,h.jsx)(f,{onRetryClick:l});const g=r.default.STICKER_SEND_ORIGIN_TYPE.STICKER_PICKER_TAB_PACK;return(0,h.jsx)(d.default,{ref:i,onFocusPrev:e.onFocusPrev,onScroll:e.onScroll,onStickerClick:t=>e.onStickerClick(t,g),onStickerEnter:t=>e.onStickerEnter(t,g),stickers:m.stickers,renderError:()=>(0,h.jsx)(f,{onRetryClick:l})})}var m=(0,n.forwardRef)(p);t.default=m},86319:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(98913)),i=a(89385),r=a(67294),o=s(a(43725)),l=s(a(84644)),d=a(16774),u=a(89867),c=s(a(91981)),h=s(a(52884)),f=s(a(27632)),p=a(19529),m=s(a(38080)),_=a(85893);var g=(0,r.forwardRef)(((e,t)=>{const{onScroll:a}=e,[s,g]=(0,r.useState)((()=>d.StarredStickerCollection.isSynced())),[v,C]=(0,r.useState)((()=>d.StarredStickerCollection.toArray())),[S,y]=(0,r.useState)(!1),b=(0,m.default)();(0,r.useEffect)((()=>{s||(0,l.default)(d.StarredStickerCollection.sync(),b).then((()=>g(!0))).catch((0,i.catchAbort)((()=>{})))}),[]),(0,p.useListener)(d.StarredStickerCollection,"add remove",(()=>C(d.StarredStickerCollection.toArray()))),(0,p.useListener)(d.StarredStickerCollection,"sync",(()=>{C(d.StarredStickerCollection.toArray()),g(!0)})),(0,p.useListener)(d.StarredStickerCollection,"next_page_sync",(()=>{C(d.StarredStickerCollection.toArray()),y(!1)}));const E=(0,r.useCallback)((e=>{const{scrollTop:t,clientHeight:s,scrollHeight:i}=e;if(null==a||a(e),i-s-t<200&&!S&&d.StarredStickerCollection.canLoadMore()){const e=d.StarredStickerCollection.getRemaining(),t=Math.min(d.STARRED_STICKERS_PAGE_SIZE,e),a=(0,n.default)(t,(()=>u.StickerModel.getPlaceholder()));y(!0),C((e=>e.concat(a))),d.StarredStickerCollection.syncNextPage()}}),[S,a]),T=(0,r.useRef)();return(0,r.useImperativeHandle)(t,(()=>({focus:e=>{var t;return null===(t=T.current)||void 0===t?void 0:t.focus(e)}}))),s?0===d.StarredStickerCollection.length?(0,_.jsx)(c.default,{text:o.default.t(1306)}):(0,_.jsx)(f.default,{ref:T,onFocusPrev:e.onFocusPrev,onScroll:E,onStickerClick:e.onStickerClick,onStickerEnter:e.onStickerEnter,stickers:v}):(0,_.jsx)(h.default,{quantity:d.STARRED_STICKERS_PAGE_SIZE})}));t.default=g},91981:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(94184)),i=s(a(49972)),r=s(a(46023)),o=a(85893);var l=e=>{let{text:t}=e;return(0,o.jsxs)("div",{className:(0,n.default)(i.default.emptyContainer,i.default.panelHeight),children:[(0,o.jsx)("div",{className:i.default.emptySticker,style:{backgroundImage:`url(${r.default})`}}),(0,o.jsx)("p",{className:i.default.emptyText,children:t})]})};t.default=l},52884:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(98913)),i=a(89867),r=s(a(52146)),o=s(a(13822)),l=a(85893);var d=e=>{let{quantity:t}=e;const a=i.StickerModel.getPlaceholder();return(0,l.jsx)("div",{className:o.default.container,children:(0,n.default)(t,(e=>(0,l.jsx)(r.default,{sticker:a},e)))})};t.default=d},80367:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.StickerPackStickersScrollGrid=void 0,t.StickerPanelNoResults=m;var n=a(67294),i=a(57297),r=s(a(43725)),o=s(a(46023)),l=a(45068),d=s(a(70193)),u=s(a(27632)),c=s(a(81559)),h=a(19529),f=a(85893);const p=(0,n.forwardRef)(((e,t)=>{const{selectedTab:a}=e,[s,r]=(0,n.useState)((()=>l.StickerSearchCollection.toArray())),o=()=>{r(l.StickerSearchCollection.toArray()),e.resetScroll()},d=(0,c.default)(o,250);(0,h.useListener)(l.StickerSearchCollection,"add remove reset",d),(0,n.useEffect)((()=>{if(a){const e=(0,i.convertTabToMood)(a);null!=e&&l.StickerSearchCollection.searchMood(e),l.StickerSearchCollection.hasFetchedData()&&o()}}),[a]);const p=(0,n.useRef)();return(0,n.useImperativeHandle)(t,(()=>({focus(e){const t=p.current;t&&t.focus(e)}}))),e.searchText&&!1===l.StickerSearchCollection.isFetchingData()&&0===l.StickerSearchCollection.length?(0,f.jsx)(m,{}):(0,f.jsx)(u.default,{ref:p,onFocusPrev:e.onFocusPrev,onScroll:e.onScroll,resetScroll:e.resetScroll,onStickerClick:e.onStickerClick,onStickerEnter:e.onStickerClick,stickers:s,theme:"searchable",loadOneRow:!0})}));function m(){return(0,f.jsxs)("div",{className:d.default.emptyContainer,children:[(0,f.jsx)("div",{className:d.default.emptySticker,style:{backgroundImage:`url(${o.default})`}}),(0,f.jsx)("p",{className:d.default.emptyText,children:r.default.t(955)})]})}t.StickerPackStickersScrollGrid=p},21300:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(67294),i=a(67963),r=s(a(52884)),o=s(a(27632)),l=s(a(59909)),d=a(19529),u=a(85893);function c(e,t){const{stickers:a}=e,s=(0,n.useRef)(null),c=(0,l.default)();(0,d.useListener)(a,"change:fetchState",c),(0,n.useEffect)((()=>{var e;const t=a.fetchState===i.FETCH_STATE.ERROR;a.fetch(t),null===(e=s.current)||void 0===e||e.scrollToTop()}),[a]),(0,n.useImperativeHandle)(t,(()=>({focus(e){var t;null===(t=s.current)||void 0===t||t.focus(e)}})));const h=()=>{a.fetch(!0)};return a.fetchState===i.FETCH_STATE.ERROR?e.renderError(h):a.fetchState&&a.fetchState!==i.FETCH_STATE.PENDING?(0,u.jsx)(o.default,{ref:s,onFocusPrev:e.onFocusPrev,onScroll:e.onScroll,onStickerClick:e.onStickerClick,onStickerEnter:e.onStickerEnter,stickers:e.stickers.toArray()}):(0,u.jsx)(r.default,{quantity:24})}var h=(0,n.forwardRef)(c);t.default=h},27632:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(94184)),i=a(67294),r=s(a(51099)),o=a(55414),l=s(a(8694)),d=s(a(52146)),u=a(74470),c=s(a(13822)),h=s(a(59552)),f=s(a(41502)),p=a(85893);var m=(0,i.forwardRef)(((e,t)=>{let{onFocusPrev:a,onScroll:s,resetScroll:m,onStickerClick:_,onStickerEnter:g,stickers:v,theme:C,loadOneRow:S=!1}=e;const y=(0,i.useRef)(),b=(0,h.default)((()=>new Map)),E=(0,i.useRef)(new Set),[T,x]=(0,i.useState)(2),[M,P]=(0,i.useState)(6),A=(0,f.default)(v);(0,i.useImperativeHandle)(t,(()=>({focus(e){const t=b.current;let a=e||0;a=Math.min(a,t.size),a=Math.max(a,0);const s=t.get(a);s&&s.focus()},scrollToTop(){const e=y.current;e&&(e.scrollTop=0)}})));const I=(0,i.useCallback)((()=>{const e=b.current,t=e.get(0);if(null==t)return void P(1);const a=t.getOffsetTop(),s=e.size;for(let t=0;t<s;t++){const s=e.get(t);if(s&&s.getOffsetTop()!==a)return void P(t)}P(e.size)}),[b]);(0,i.useEffect)((()=>I),[v,I,b]),(0,i.useEffect)((()=>{A!==v&&(E.current=new Set,x(2))}),[v,A]);const w=()=>{const e=b.current,t=e.size;for(let a=0;a<t;a++){const t=e.get(a);if(t&&t.hasFocus())return a}return-1},k=e=>{var t;if(0===e)return;const s=w();if(-1===s)return;let n=s+e;if(n<0)return void(null==a||a());const i=null===(t=y.current)||void 0===t?void 0:t.parentElement;n<M&&i&&(i.scrollTop=0,null==m||m());const r=b.current;n=Math.min(n,r.size-1);const o=r.get(n);o&&o.focus()},j=e=>{k(0-e)},N=e=>{E.current.add(e),E.current.size===T*M&&x(T+2)},O=v.map(((e,t)=>{const a=b.current,s=e.isPlaceholder||e.isCreateButton?`${u.PRE_PLACEHOLDER_ID}${t}`:e.id;return(0,p.jsx)(r.default,{reason:"sticker-item",children:(0,p.jsx)(d.default,{onClick:_,onEnter:g,onDownload:N,ref:e=>{e?a.set(t,e):a.delete(t)},sticker:e})},s)})),R=(0,n.default)(c.default.container,"searchable"===C&&c.default.unscrollable);return(0,p.jsx)(l.default,{onResize:I,className:c.default.resizeContainer,children:(0,p.jsx)(o.HotKeys,{onRef:e=>{y.current=e},className:R,handlers:{up:e=>{e.stopPropagation(),e.preventDefault(),j(M)},down:e=>{e.stopPropagation(),e.preventDefault();const t=w(),a=b.current,s=Math.min(t+M,a.size-1);Math.floor(t/M)!==Math.floor(s/M)&&k(M)},left:e=>{e.stopPropagation(),e.preventDefault(),j(1)},right:e=>{e.stopPropagation(),e.preventDefault(),k(1)}},onScroll:()=>{const e=y.current;e&&(null==s||s(e))},children:O})})}));t.default=m},24315:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(52013)),i=s(a(94184)),r=a(67294),o=s(a(35330)),l=a(28325),d=s(a(21790)),u=a(55414),c=s(a(40194)),h=a(66299),f=s(a(3593)),p=s(a(23217)),m=a(19529),_=a(85893);function g(e,t){const{displayLocation:a,specialItemsCount:s,recentStickersEnabled:g,starredStickersEnabled:v}=e,C=(0,r.useRef)(null),[S,y]=(0,r.useState)(s+h.StickerPackCollection.length),b=()=>{y(s+h.StickerPackCollection.length)},E=()=>!!C.current&&C.current===document.activeElement,T=()=>{C.current&&(E()||n.default.focus(C.current))};(0,r.useImperativeHandle)(t,(()=>({focus:T,hasFocus:E}))),(0,r.useEffect)((()=>{b()}),[]),(0,m.useListener)(h.StickerPackCollection,["change:length"],b);let x=h.PAGE_SIZE_COMPOSE_BOX;return a===l.DisplayLocation.Dropdown&&(x=h.PAGE_SIZE_POPUP),(0,_.jsx)(u.HotKeys,{onRef:e=>{C.current=e},handlers:(0,d.default)({down:e.onFocusBelow,"shift+tab":e.onFocusPrev,tab:e.onFocusNext}),children:(0,_.jsx)(o.default,{className:(0,i.default)({[c.default.shadow]:e.shadow}),numItems:S,numColumns:x,onItemClick:e.onItemClick,renderItem:e=>g&&0===e?(0,_.jsx)(p.default,{name:"panel-recent"}):v&&1===e?(0,_.jsx)(p.default,{name:"panel-starred"}):(0,_.jsx)(f.default,{index:e-s}),selectedIndex:e.selectedStickerPackIndex})})}var v=(0,r.forwardRef)(g);t.default=v},14591:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{id:t,name:a,url:s}=e;return(0,r.jsx)("div",{className:i.default.container,"data-id":t,children:(0,r.jsx)(n.ImgWithFallback,{fallbackSVG:"sticker",wrapOptions:{wrapperClassName:i.default.stickerPackIconWrapper,centerWrapperChild:!0},className:i.default.stickerPackContainer,size:"NONE",roundContainer:!1,imgProps:{src:s||"",alt:a,draggable:!1}})})};var n=a(50981),i=s(a(43177)),r=a(85893)},3593:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{index:t}=e,a=(0,d.default)(),[s,h]=(0,n.useState)((()=>i.StickerPackCollection.at(t)));if((0,n.useEffect)((()=>{i.StickerPackCollection.fetchAt(t)}),[]),(0,u.useListener)(i.StickerPackCollection,"change:pageFetchStates",((e,s)=>{if(!a())return;i.StickerPackCollection.pageWithIndex(t)===e&&(s||i.StickerPackCollection.fetchAt(t),h(i.StickerPackCollection.at(t)))})),!s)return null;if(s.isPlaceholder)return(0,c.jsx)(l.default,{name:"sticker"});if(s.isFirstParty)return(0,c.jsx)(r.default,{stickerPack:s});return(0,c.jsx)(o.default,{stickerPack:s,mediaData:s.mediaData})};var n=a(67294),i=a(66299),r=s(a(53314)),o=s(a(48642)),l=s(a(23217)),d=s(a(88624)),u=a(19529),c=a(85893)},53314:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,i.useModelValues)(e.stickerPack,["id","name","url"]),{id:a,name:s,url:o}=t;return(0,r.jsx)(n.default,{id:a,name:s,url:o})};var n=s(a(14591)),i=a(49082),r=a(85893)},48642:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,o.useModelValues)(e.stickerPack,["id","name"]),a=(0,o.useModelValues)(e.mediaData,["renderableUrl","mediaStage"]),s=()=>t.downloadMedia();(0,n.useEffect)((()=>{s()}),[]);const d=e=>{const{id:a,name:s}=t;return(0,l.jsx)(r.default,{id:a,name:s,url:e})};return(0,l.jsx)(i.default,{mediaData:a,placeholderRenderer:function(){return d(null)},downloadMedia:s,children:d})};var n=a(67294),i=s(a(20553)),r=s(a(14591)),o=a(49082),l=a(85893)},72761:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.PluggableInput=t.BaseInput=void 0;var i=n(a(81109)),r=s(a(93131)),o=n(a(45095)),l=n(a(99964)),d=n(a(52013)),u=n(a(94184)),c=a(67294),h=a(62101),f=n(a(69618)),p=n(a(1791)),m=n(a(82958)),_=n(a(70411)),g=n(a(11825)),v=n(a(17307)),C=n(a(56792)),S=a(7293),y=n(a(7057)),b=a(55414),E=n(a(43725)),T=a(98715),x=n(a(42532)),M=a(52596),P=n(a(66065)),A=n(a(748)),I=n(a(95605)),w=a(3940),k=a(85893);class j extends c.Component{constructor(){var e,t;super(...arguments),t=this,this.__changeDueToReset=!1,this.__isMounted=!0,this.__isComposing=!1,this.containerRef=null,this.selection=this.props.initialSelection,this.state={direction:O(this.props.initialValue||""),focused:!1,value:(null===(e=this.props.initialValue)||void 0===e?void 0:e.toString())||"",theme:this.props.theme||null},this.trigger=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const s=t._hookMap[e];s&&s(...a)},this.serializeTextBeforeCursor=()=>(0,A.default)(this.refInput||document.createElement("span"),window.getSelection()),this._hasFocus=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.refInput;if(!e)return!1;const{activeElement:a}=document;return!!a&&(a===e||e.contains(a))},this.forceFocus=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(t.props.readOnly||!t.__isMounted)return;const{refInput:a}=t;if(!a)return;const s=t._hasFocus(a);if(!s||e)if(s||d.default.focus(a),!e&&t.selection)t._restoreSelection(t.selection);else{const e=window.getSelection();e.rangeCount&&(e.selectAllChildren(a),e.collapseToEnd())}},this.focus=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t._hasFocus()&&!e||setTimeout((()=>{t.forceFocus(e)}),0)},this.reset=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t.__changeDueToReset=!0,t.selection=null,t._setValue(e)},this._setValue=e=>{if(e===this.state.value)return;const t=e||"";this.setState({value:t,direction:O(t)},(()=>{this.trigger(y.default.CHANGE,[t]),this.props.onChange&&this.props.onChange(t)}))},this.onSelect=()=>{this.selection=this.getSelection(),this.props.onSelect&&this.props.onSelect(this.selection)},this.shouldComponentUpdate=(e,t)=>{let{value:a,focused:s,direction:n,theme:i}=t;null!=this.refInput&&this.props.readOnly!==e.readOnly&&this.refInput.setAttribute("contentEditable",String(!e.readOnly));const r=R(e);null!=this.refInput&&r!==R(this.props)&&(null==r?this.refInput.removeAttribute("data-tab"):this.refInput.setAttribute("data-tab",r.toString()));s!==this.state.focused&&this.containerRef&&(s?this.containerRef.classList.add("focused"):this.containerRef.classList.remove("focused"));if(i!==this.state.theme&&this.containerRef){var o,l;const e=this._getInputClassname(this.state.theme,this.props.size,this.props.lineHeight).split(" "),t=this._getInputClassname(i,this.props.size,this.props.lineHeight).split(" ");null===(o=this.containerRef)||void 0===o||o.classList.remove(...e),null===(l=this.containerRef)||void 0===l||l.classList.add(...t)}if(n!==this.state.direction&&this.refInput&&this.refInput.setAttribute("dir",n),this.__changeDueToReset){this.__changeDueToReset=!1;const e=(0,I.default)(a,this._plugins);this.refInput&&(this.refInput.innerHTML=e)}const d=!a.length&&!!this.state.value.length,u=!!a.length&&!this.state.value.length;if(!u&&!d)return!1;const c=u?"hidden":"visible";return this._refPlaceholder&&this._refPlaceholder.setAttribute("style",`visibility: ${c}`),!1},this.componentWillUnmount=()=>{this.__isMounted=!1,this.refInput&&(this.refInput.restoreFocus=null)},this.onInput=()=>{const{refInput:e}=this,t=e?(0,P.default)(e,this._plugins):"",a=this.props.multiline&&"\n"!==t?t:t.replace(/\n$/,""),{maxLength:s}=this.props;if(null!=s&&(0,w.numCodepoints)(a)>s){const t=this.selection;return e&&(e.innerHTML=(0,I.default)(this.state.value,this._plugins)),void(t&&this._restoreSelection(t))}this.trigger(y.default.INPUT),this._setValue(a)},this.onPaste=e=>{e.preventDefault(),e.stopPropagation();const t=new C.default(e.clipboardData),{onFiles:a,onTextPaste:s}=this.props;t.hasFiles()&&a&&a(t)||t.hasText()&&t.getText(this.props.textPasteMimePriority).then((e=>{if(!e)return;if(s&&s(e))return;const t=this.length-this._selectionLength,{maxLength:a}=this.props;if(null!=a&&t+(0,w.numCodepoints)(e)>a){const{onMaxPasteExceeded:e}=this.props;return e&&e()}this.replaceSelection(e)}))},this._onBeforeInput=e=>{if(this.props.readOnly)return!0;const{maxLength:t}=this.props;if(null==t)return!1;const a=e.data.charCodeAt(0);if(8===a||127===a)return!1;const s=t+this._selectionLength-this.length;return(0,w.numCodepoints)(e.data)>s},this.onKeyDown=e=>!(!this.props.onKeyDown||!this.props.onKeyDown(e))||13===e.which&&(this.props.multiline&&function(e){return 13===e.which&&(e.shiftKey||e.altKey||e.ctrlKey)}(e)?!(""!==this.state.value.trim()||!this.cursorIsAtStart())||(S.GK.supportsFeature(S.GK.F.FORMAT_BULLETED_MSG)&&this._cursorIsOnListItem()?(this._insertNewLineAtSelection(T.LIST_ITEM_DELIMITER),!0):(this._insertNewLineAtSelection(),!0)):(this.props.onEnter&&this.props.onEnter(e),!0)),this.componentDidMount=()=>{this.refInput&&(this.refInput.restoreFocus=this.focus),this.trigger(y.default.MOUNT)},this.onBlur=e=>{this.setState({focused:!1}),this.props.onBlur&&this.props.onBlur(e)},this.onFocus=e=>{this.setState({focused:!0}),this.props.onFocus&&this.props.onFocus(e)},this._onCompositionStart=()=>!(this.__isComposing=!0),this._onCompositionEnd=()=>this.__isComposing=!1,this.setRefContainer=e=>{this.containerRef=e},this._setRefPlaceholder=e=>{this._refPlaceholder=e},this.setRefInput=e=>{this.refInput=e},this.getRefInput=()=>this.refInput,this._getInputClassname=(e,t,a)=>(0,u.default)(x.default.input,{[x.default.compose]:"compose"===e,[x.default.default]:"default"===e||"media-caption"===e||"text-input"===e||"status-reply"===e||"rich-status-reply"===e,[x.default.large]:"large"===e,[x.default.media]:"media-caption"===e,[x.default.invite]:"v4-invite-caption"===e,[x.default.small]:"small"===e,[x.default.status]:"status-reply"===e,[x.default.richStatusReply]:"rich-status-reply"===e,[x.default["list-search"]]:"list-search"===e,[x.default.textInput]:"text-input"===e,[x.default.mediaEditorTextInput]:"media-editor-text-input"===e},t?x.default[`size-${t}`]:null,a?x.default[`line-height-${a}`]:null)}get value(){return this.state.value}get _selectionLength(){if(this.props.readOnly)return 0;this._hasFocus(this.refInput)||d.default.focus(this.refInput);const e=window.getSelection();return e.rangeCount?(0,w.numCodepoints)((0,P.default)(e.getRangeAt(0).cloneContents(),this._plugins)):0}get length(){return(0,w.numCodepoints)(this.state.value)}serialize(e){const t=e||this.state.value;return this._plugins.reduce(((e,t)=>{let[a,s]=e;return t.serialize?t.serialize(a,s):[a,s]}),[t,{}])}_adjustScrollAfterModification(e,t,a){const{scrollHeight:s,clientHeight:n}=e;s<=n||(e.scrollTop=(a||0)+(s-t))}_ensureFocus(e){this._hasFocus(e)||(d.default.focus(e),this.selection&&this._restoreSelection(this.selection))}replaceSelection(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{refInput:a}=this;if(this.props.readOnly||null==a)return;this._ensureFocus(a);let s=this._trimToFit(e);if(!s.length&&!t)return;this.props.multiline||(s=s.replace(/\r?\n/g,""));const n=window.getSelection().getRangeAt(0);(function(e,t){let{startOffset:a,startContainer:s}=e;return 0===a&&s!==t&&(!(!s||!s.previousSibling)&&"\n"===s.previousSibling.textContent.slice(-1))})(n,a)&&(s=`\n${s}`),n.deleteContents();const{scrollHeight:i,scrollTop:r}=a;document.execCommand("insertHTML",!1,(0,I.default)(s,this._plugins)),this.onSelect(),this._adjustScrollAfterModification(a,i,r)}_insertNewLineAtSelection(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.props.multiline&&this._insertTextAtSelection("\n"+e)}_insertTextAtSelection(e){const{refInput:t}=this;if(!this.props.multiline||this.props.readOnly||null==t)return;this._ensureFocus(t);const{scrollHeight:a,scrollTop:s}=t,n=this.cursorIsAtEnd(),i=document.createTextNode(e),r=window.getSelection(),o=r.getRangeAt(0);o.deleteContents(),o.insertNode(i);if(/^\n/.test(e)&&a===t.scrollHeight&&n){o.setStartBefore(i);const e=document.createTextNode("\n");o.insertNode(e)}o.setStartAfter(i),o.setEndAfter(i),o.collapse(!1),r.removeAllRanges(),r.addRange(o),t.normalize(),this._adjustScrollAfterModification(t,a,s),t.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!0}))}deleteSelection(){this.replaceSelection("",!0)}_restoreSelection(e){const{refInput:t}=this;if(!t)return;const{anchorIndex:a,focusIndex:s}=e;let{anchorOffset:n,focusOffset:i}=e;const{childNodes:r}=t,o=-1===a?t:r[a],l=-1===s?t:r[s];if(o&&l)try{o===l&&n>i&&([n,i]=[i,n]);const e=document.createRange();e.setStart(o,n),e.setEnd(l,i);const t=window.getSelection();t.removeAllRanges(),t.addRange(e);try{const e=document.createRange();e.setStart(l,i),e.setEnd(l,i);const t=e.getBoundingClientRect(),{bottom:a,top:s}=t,n=this.refInput&&this.refInput.getBoundingClientRect(),{bottom:r,top:o}=n||{};if(s>=o&&a<=r)return;this.refInput&&(this.refInput.scrollTop+=a<o?s-o:a-r)}catch(e){}}catch(e){this.focus(!0)}}getSelection(){const{refInput:e}=this;if(!e||document.activeElement!==e)return null;const t=window.getSelection(),{anchorNode:a,anchorOffset:s,focusNode:n,focusOffset:i}=t,r=e.childNodes;let o,l=-1,d=-1,u=0;for(;(l<0||d<0)&&(o=r[u++]);)a===o&&(l=u-1),n===o&&(d=u-1);return{anchorIndex:l,anchorOffset:s,focusIndex:d,focusOffset:i}}_trimToFit(e){const{maxLength:t}=this.props;if(null==t)return e;const a=t+this._selectionLength-this.length;return a<=0?"":(0,w.substring)(String(e),0,a)}_cursorIsOnListItem(){return S.GK.supportsFeature(S.GK.F.FORMAT_BULLETED_MSG)&&T.LAST_LIST_ITEM_REGEX.test(this.serializeTextBeforeCursor())}cursorIsAtEnd(){return null!=this.refInput&&(!(!this.state.focused||""!==this.state.value)||(0,g.default)(this.refInput))}cursorIsAtStart(){return!(!this.state.focused||""!==this.state.value)||(0,v.default)(this.refInput)}isFocused(){return this.state.focused}get isComposing(){return this.__isComposing}blur(){(0,o.default)(this.refInput,"this.refInput").blur()}select(){const e=(0,o.default)(this.refInput,"this.refInput"),t=document.createRange();t.selectNodeContents(e);const a=window.getSelection();a.removeAllRanges(),a.addRange(t)}setTheme(e){this.setState({theme:e})}render(){var e;const{props:{placeholder:t},state:{value:a,direction:s}}=this,n=a.length>0?"hidden":"visible",r=this._getInputClassname(this.props.theme,this.props.size,this.props.lineHeight),o=null!==(e=this.props.a8n)&&void 0!==e?e:"pluggable-input-body";return(0,k.jsxs)(b.HotKeys,{className:r,handlers:this._hotKeyMap,onRef:this.setRefContainer,children:[(0,k.jsx)("div",{"data-a8n":l.default.key("pluggable-input-placeholder"),className:(0,u.default)(x.default.placeholder,{[x.default.mediaEditorTextInputPlaceholder]:"media-editor-text-input"===this.props.theme}),ref:this._setRefPlaceholder,style:{visibility:n},children:t}),(0,k.jsx)("div",(0,i.default)((0,i.default)({},this._handlerMap),{},{"data-a8n":l.default.key(o),title:this.props.title,"aria-required":this.props.required,role:"textbox",className:(0,u.default)(x.default.body,M.SELECTABLE_INPUT_CSS_CLASS),contentEditable:!this.props.readOnly,dangerouslySetInnerHTML:{__html:(0,I.default)(a,this._plugins)},"data-tab":R(this.props),dir:s,ref:this.setRefInput,spellCheck:this.props.spellCheck,style:this.props.style}))]})}}t.BaseInput=j,j.displayName="BaseInput";t.PluggableInput=e=>class extends j{constructor(){var t,a,s;super(...arguments),this._plugins=[...e.map((e=>(e instanceof h.BasePlugin&&e.initialize(this),e))),(s=this,{handlers:(t=s,a=N,a.reduce(((e,a)=>(Array.isArray(a)?e[a[0]]=t[a[1]]:e[a]=t[a],e)),{}))})],this._handlerMap=(0,p.default)(this._plugins,this),this._hookMap=(0,m.default)(this._plugins,this),this._hotKeyMap=(0,_.default)(this._plugins,this)}};const N=["onBeforeInput","onBlur","onCompositionEnd","onCompositionStart","onFocus","onInput","onKeyDown","onPaste","onSelect"];function O(e){return r.dir(e.toString())||E.default.LR("ltr","rtl")}function R(e){let{tabOrder:t,readOnly:a}=e;return null!=t?t:a?null:f.default.TAB_ORDERS.COMPOSE_BOX_INPUT}},18609:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ThemeOptions=t.EmojiSuggestions=void 0;var n=s(a(94184)),i=a(67294),r=a(88102),o=s(a(61064)),l=s(a(41757)),d=a(82709),u=s(a(66798)),c=s(a(27666)),h=s(a(59891)),f=a(92671),p=a(18644),m=s(a(26898)),_=s(a(41956)),g=a(85893);const v=(0,h.default)({MEDIA_CAPTION:null,EMOJI_INPUT:null});t.ThemeOptions=v;t.EmojiSuggestions=e=>{const[t,a]=(0,i.useState)(""),[s,h]=(0,i.useState)(""),[C,S]=(0,i.useState)(null),y=(0,i.useRef)(),b=()=>{a(""),h(""),S(null)},E=e=>{if((0,c.default)(e))return;const t=y.current;return t?(e.preventDefault(),e.stopPropagation(),t.pickSelectedEmoji(),!1):void 0};(0,m.default)(e.plugin,u.default.EMOJI_SEARCH,(t=>{const n=t?t.trim():t,i=s,r=e.chat;if((null==r?void 0:r.isGroup)&&n&&n.includes("@"))return S(null),void a("");if(!i||!n.startsWith(i))if(n.length<2){if(!C)return;a(n),S(""===n?null:(0,o.default)(n))}else{const e=(0,o.default)(n);e.length?(a(n),h(null),S(e)):(a(n),S(null))}})),(0,m.default)(e.plugin,u.default.EMOJI_INACTIVE,b),(0,m.default)(e.plugin,u.default.EMOJI_ENTER,E),(0,m.default)(e.plugin,u.default.EMOJI_LEFT,(e=>{if((0,c.default)(e))return;const t=y.current;t&&(e.preventDefault(),e.stopPropagation(),t.moveSelectionLeft())})),(0,m.default)(e.plugin,u.default.EMOJI_RIGHT,(e=>{if((0,c.default)(e))return;const t=y.current;t&&(e.preventDefault(),e.stopPropagation(),t.moveSelectionRight())})),(0,m.default)(e.plugin,u.default.EMOJI_TAB,E);const T=C?(0,g.jsx)(p.UIE,{displayName:"EmojiSuggestions",escapable:!0,requestDismiss:()=>{a(""),h(t),S(null)},requestFocus:()=>{e.plugin.ctx.focus()},children:(0,g.jsx)("div",{className:(0,n.default)(l.default.overlayContainer,{[l.default.mediaCaption]:e.theme===v.MEDIA_CAPTION,[l.default.emojiInput]:e.theme===v.EMOJI_INPUT}),children:(0,g.jsx)("div",{className:l.default.resultsContainer,"data-list-scroll-container":"false",children:(0,g.jsx)("div",{className:l.default.emojiSearch,onKeyPress:t=>{t.preventDefault();const{chat:a}=e;a&&r.Cmd.pasteChatTextInput(a,String.fromCharCode(t.charCode))},onKeyDown:t=>("Backspace"===t.key&&(t.preventDefault(),document.execCommand("delete"),e.plugin.ctx.focus()),!1),children:(0,g.jsx)("div",{className:l.default.searchBody,children:(0,g.jsx)(d.EmojiSuggestionsPanel,{ref:y,onEmoji:t=>{f.RecentEmojiCollection.increment(t),e.plugin.handleSelect(t)},onFocusRelease:b,onSkinTonePicker:e.onSkinTonePicker,emojiList:C},t)},"RECENT")})})})}):null;return(0,g.jsx)(_.default,{component:"div",className:l.default.positioningContainer,transitionName:"emoji-search-panel-slide-up",children:T})}},66798:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=(0,s(a(59891)).default)({EMOJI_ENTER:void 0,EMOJI_INACTIVE:void 0,EMOJI_LEFT:void 0,EMOJI_RIGHT:void 0,EMOJI_SEARCH:void 0,EMOJI_TAB:void 0});t.default=n},1769:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(62101),i=a(70449),r=s(a(66798)),o=s(a(7057)),l=s(a(37773)),d=s(a(51577));const u={ArrowLeft:r.default.EMOJI_LEFT,ArrowRight:r.default.EMOJI_RIGHT,Enter:r.default.EMOJI_ENTER,Tab:r.default.EMOJI_TAB};class c extends n.BasePlugin{constructor(){super(...arguments),this.hooks={[o.default.CHANGE](e,t){let{refInput:a}=t;""===a.textContent&&this.handle(r.default.EMOJI_INACTIVE)}},this.handlers={onKeyDown(e,t){8!==e.keyCode&&e.repeat&&(this._lastSyncKeyDownWasRepeat=!0,setTimeout((()=>{delete this._lastSyncKeyDownWasRepeat}),0));const a=u[e.key];return!!a&&this.handle(a,[e,t])},onSelect(e,t){if(this.ctx.isComposing)return!1;if(this._lastSyncKeyDownWasRepeat)return!1;const a=window.getSelection();if(!a.modify)return!1;let s=h(t,a);return s?(s=s.slice(1),this.handle(r.default.EMOJI_SEARCH,[s]),!1):this.handle(r.default.EMOJI_INACTIVE)}}}handleSelect(e){this.ctx.forceFocus(),h(this.ctx,window.getSelection(),!0)&&(this.ctx.replaceSelection(e),this.handle(r.default.EMOJI_INACTIVE))}}function h(e,t){var a;let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=null,r=null,o="",u=0,c=null;return(0,l.default)(e,t,((e,t,a)=>{if("@"===e||" "===e&&" "===r)return!0;if(":"===r)if(" "===n);else{if(i.EmojiUtil.isEmoji(e))return c=o,!0;if(/\W/.test(e))return c=a.slice(t+1)+o,!0}return 0===t&&(o=a+o),n=r,r=e,u+=1,u>=50||void 0})),!c&&u<50&&":"===r&&(c=o),s&&(null===(a=c)||void 0===a?void 0:a.length)&&(0,d.default)(t,c.length),c}t.default=c},52835:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.EmojiPlugin=void 0,t.isEmojiEl=function(e){return!!e&&(e instanceof HTMLElement&&!!e.dataset.isEmoji)};var n=a(13959),i=s(a(94184)),r=a(88102),o=s(a(69618)),l=a(70449),d=s(a(7057)),u=a(52596);let c=!1;const h={serializers:[["img.emoji",e=>e.getAttribute("alt")||""]],parsers:[e=>e.replace(l.EmojiUtil.emojiRegex(),((e,t)=>{const a=(e=>{const t=l.EmojiUtil.getGlyphId(e);if(null==t)return null;const a=(0,u.createSelectableElement)("img",e);a.setAttribute("alt",e),a.setAttribute("draggable","false"),a.setAttribute("class",(0,i.default)(a.getAttribute("class"),l.EmojiUtil.getCssClasses(t)));const s=l.EmojiUtil.getStyle(t);return Object.assign(a.style,s),a.setAttribute("src",o.default.ONE_BY_ONE_TRANS_GIF),a.dataset.isEmoji="true",a})(t);return a?a.outerHTML:""}))],hooks:{[d.default.MOUNT](){c||(c=!0,new Promise((e=>{0===r.Cmd.uiBusy&&e(),r.Cmd.once("ui_idle",(()=>{e()}))})).then((()=>(0,n.delayMs)(0))).then((()=>{document.execCommand("enableObjectResizing",!1,!1)})).catch((()=>{})))}},handlers:{onBeforeInput(e,t){const a=l.EmojiUtil.emojiRegex().exec(e.data);return!!a&&(e.cancelable&&t.replaceSelection(a[0]),!0)},onClick(e){if(!e.target)return!1;const t=e.target.getAttribute("class");if(!t||!~t.indexOf("emoji"))return!1;const a=window.getSelection(),s=new Range;return e.pageX<e.target.x+e.target.width/2?(s.setStartBefore(e.target),s.setEndBefore(e.target)):(s.setStartAfter(e.target),s.setEndAfter(e.target)),a.removeAllRanges(),a.addRange(s),!0}}};t.EmojiPlugin=h},99574:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=(0,s(a(59891)).default)({SEARCH:void 0,INACTIVE:void 0,ENTER:void 0,TAB:void 0,DOWN:void 0,UP:void 0});t.default=n},70527:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(93131),i=a(62101),r=s(a(72781)),o=a(69951),l=s(a(69618)),d=a(19380),u=a(70449),c=s(a(99574)),h=a(15714),f=a(72473),p=s(a(7057)),m=s(a(29447)),_=s(a(96377)),g=s(a(95697)),v=s(a(81472)),C=s(a(42107)),S=s(a(2673)),y=s(a(6589)),b=a(10435),E=s(a(68590)),T=s(a(594)),x=s(a(37773)),M=s(a(51577)),P=a(52596),A=a(65127),I=a(58021);const w=2*l.default.MAX_PUSHNAME_LENGTH,k=/\u200B((\d+)@c\.us)\u200B/g,j={Enter:c.default.ENTER,Tab:c.default.TAB,ArrowUp:c.default.UP,ArrowDown:c.default.DOWN};class N extends i.BasePlugin{constructor(){super(...arguments),this.serializers=[["span[data-mention-jid]",e=>(function(e){if(!e.hasChildNodes())return;for(;e.childNodes.length;)e.removeChild(e.childNodes[0])}(e),`${e.getAttribute("data-mention-jid")||""}`)]],this.parsers=[e=>e.replace(k,((e,t)=>{const a=d.ContactCollection.get(t);if(!a)return t;let s=!a.isMyContact&&a.notifyName?a.notifyName:a.formattedName;const i=`@${s}`,r=o.ChatCollection.getActive();if(null==r||!r.isGroup)return i;if(!(null!=r.groupMetadata&&r.groupMetadata.participants.get(t)))return i;(0,b.isDropLastNameEnabled)()&&r.groupMetadata&&r.groupMetadata.hasUniqueShortNameMention(a)&&(s=a.shortName);const l=(0,P.createSelectableElement)("span");l.dataset.mentionJid=a.id.toString();const u=document.createElement("span");u.className="at-symbol",u.appendChild(document.createTextNode("@"));const c=document.createElement("span");return c.setAttribute("dir",(0,n.dir)(s)||"auto"),c.appendChild(document.createTextNode(s)),l.appendChild(u),l.appendChild(c),l.dataset.originalName=l.textContent||"",l.dataset.plainText=l.textContent||"",l.dataset.appTextTemplate=`${t}`,l.outerHTML}))],this.serialize=(e,t)=>{t.mentionedJidList=[];return[e.replace(k,((e,a,s)=>(t.mentionedJidList.push((0,I.createWid)(a)),`@${s}`))),t]},this.handleSelect=e=>{let t=window.getSelection();if(function(e,t){let{anchorNode:a,anchorOffset:s}=t;a&&a===e.containerRef&&(a=a.childNodes[s],s=a.textContent.length);if(!a||a&&a.nodeType!==Node.TEXT_NODE)return!1;let n=a.textContent.slice(s),i=a;for(;0===n.length;){if(i=i.nextSibling,!i||i.nodeType!==Node.TEXT_NODE)return!1;n=i.textContent}return" "===n.charAt(0)}(this.ctx,t)&&t.modify("move","forward","character"),!F(this.ctx,t,!0))return;t=window.getSelection();const{refInput:a}=this.ctx,{mentionAfterEnd:s}=a?O(a):{};s&&B(s),this.ctx.replaceSelection(`${e.id.toString()} `),this.handle(c.default.INACTIVE)},this.hooks={[p.default.CHANGE](e,t){let{refInput:a}=t;if(A.UA.isGecko)if(""===e){for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(document.createElement("br"))}else{const e=a.querySelectorAll("[data-mention-jid]");for(let t=0;t<e.length;++t){const{nextSibling:a}=e[t];a&&(a instanceof Element&&"BR"===a.tagName&&"_moz"===a.getAttribute("type")&&a.remove())}}},[p.default.INPUT](e){let{refInput:t}=e;const a=t.querySelectorAll("[data-mention-jid]");if(a.length)for(let e=0;e<a.length;++e){var s,n;const t=a[e];if(null==t||t.textContent===t.getAttribute("data-original-name"))continue;const i=t.querySelector(".at-symbol"),r=t.querySelector("span [dir]"),o=window.getSelection();let l=o.focusOffset;const d=null===(s=o.focusNode)||void 0===s||null===(n=s.parentNode)||void 0===n?void 0:n.className,u=t.parentNode,c=document.createDocumentFragment();i&&c.appendChild(document.createTextNode(i.textContent)),r&&c.appendChild(document.createTextNode(r.textContent));const h="at-symbol"===d?c.firstChild:c.lastChild;if(1===c.childNodes.length&&c.lastChild&&(l="@"===c.lastChild.textContent?1:0),u.replaceChild(c,t),o.rangeCount<=0)return;const f=o.getRangeAt(0);f.setEnd(h,l),f.collapse(!1),o.removeAllRanges(),o.addRange(f)}}},this.handlers={onKeyDown(e,t){const{key:a}=e;if(!this.ctx.isComposing&&("Backspace"===a||"Delete"===a&&(0,v.default)(e))){const e=window.getSelection();if(e.isCollapsed){const{mentionBeforeStart:t,mentionAfterEnd:s}=O(this.ctx.refInput);let n=null;if("Delete"===a&&s&&(n=s),"Backspace"===a&&t&&(n=t),n){e.removeAllRanges();const t=document.createRange();t.selectNode(n),e.addRange(t),R(this.ctx.refInput),window.setTimeout((()=>{(0,T.default)()}),0)}}else R(this.ctx.refInput)}const s=j[e.key];return!!s&&this.handle(s,[e,t])},onKeyPress(){return this.ctx.isComposing||R(this.ctx.refInput),!1},onBlur(){return this.handle(c.default.INACTIVE),!1},onSelect(e,t){var a;if(A.UA.isTrident||this.ctx.isComposing)return!1;const s=window.getSelection();s.isCollapsed&&s.rangeCount>0&&s.anchorNode&&function(e,t){let{anchorNode:a,anchorOffset:s}=t;if(a&&a===e.refInput){if(0===s)return!0;a=a.childNodes[t.getRangeAt(0).startOffset],s=(0,y.default)(a)?a.textContent.length:0}if((0,g.default)(a,"br"))return!0;if(!a)return!1;if(!(0,y.default)(a))return!1;if("\n"===a.textContent)return!0;let n=a.textContent.slice(0,s);if(""===n){const e=(0,h.findNonEmptySibling)(a,h.DIR.PREV);if(!e)return!0;if(!(0,y.default)(e))return!1;n=e.textContent}return"\n"===n.charAt(n.length-1)}(t,s)&&(0,T.default)();const n=F(this.ctx,s);if(!n||(null===(a=s.focusNode)||void 0===a?void 0:a.parentElement)&&(0,C.default)(s.focusNode.parentElement.parentElement))return this.handle(c.default.INACTIVE),!1;const i=n.slice(1);return this.handle(c.default.SEARCH,[i]),!1},onPaste(){return R(this.ctx.refInput),!1}}}}function O(e){const t=window.getSelection();if(0===t.rangeCount)return{};const a=t.getRangeAt(0),{startContainer:s,startOffset:n,endContainer:i,endOffset:o}=a,l=i instanceof HTMLElement?i.childNodes.length===o:i.textContent&&i.textContent.length===o;let d,u,c,f,p,m;0===n&&(d=s===e?e.childNodes[n]:(0,r.default)(s,(t=>t&&t!==e&&(t.parentElement===e||(0,S.default)(t,0))?[t.parentElement]:[]),(t=>t&&t.parentElement===e))),l&&(u=i===e?e.childNodes[o]:(0,r.default)(i,(t=>t&&t!==e&&(t.parentElement===e||(0,S.default)(t,-1))?[t.parentElement]:[]),(t=>t&&t.parentElement===e)));const _=(0,h.findNonEmptySibling)(d,h.DIR.PREV);(0,C.default)(_)&&(c=_),(0,C.default)(d)&&(f=d),(0,C.default)(u)&&(p=u,a.collapsed&&(c=c||p));const g=(0,h.findNonEmptySibling)(u,h.DIR.NEXT);return(0,C.default)(g)&&(m=g,a.collapsed&&(f=f||m)),{mentionBeforeStart:c,mentionAfterStart:f,mentionBeforeEnd:p,mentionAfterEnd:m}}function R(e){const{mentionBeforeStart:t,mentionAfterStart:a,mentionBeforeEnd:s,mentionAfterEnd:n}=O(e);if(!(t||a||s||n))return;const i=window.getSelection(),r=i.getRangeAt(0),o=r.collapsed;let l=!1;if(t){const e=L(t);l=!0,r.setStartAfter(e),r.collapsed&&r.setEndAfter(e)}if(a){const e=B(a);l=!0,r.setStartBefore(e),o&&r.setEndBefore(e)}if(!o){if(s){const e=L(s);l=!0,r.setEndAfter(e)}if(n){const e=B(n);l=!0,r.setEndBefore(e)}}l&&(i.removeAllRanges(),i.addRange(r))}function D(){const e=document.createElement("span");return e.textContent="",e.contentEditable="false",setTimeout((()=>(0,E.default)(e)),0),e}function L(e){const t=D();return(0,m.default)(t,e),t}function B(e){const t=D();return(0,_.default)(t,e),t}function F(e,t){var a;let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=(0,f.getSelectionSibling)(e.refInput,"BACKWARD");if((0,C.default)(n))return"";let i=null,r="",o=0,l=null;return(0,x.default)(e,t,((e,t,a)=>{if("@"===i){if(u.EmojiUtil.isEmoji(e))return l=r,!0;if(/\W/.test(e))return l=a.slice(t+1)+r,!0}if(0===t&&(r=a+r),i=e,o+=1,o>=w)return!0})),!l&&o<w&&"@"===i&&(l=r),s&&(null===(a=l)||void 0===a?void 0:a.length)&&(0,M.default)(t,l.length),l}t.default=N},45367:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{theme:t,contact:{id:a,formattedName:s,isMyContact:c,notifyName:h},onMouseDown:f,onMouseUp:p,onMouseEnter:m,term:_,selected:g}=e;const v=l.Configuration.Search({terms:_?[_]:[],boundary:!0});return(0,u.jsxs)("div",{className:(0,i.default)(d.default.mentionsResult,{[d.default.mediaCaption]:"mediaCaption"===t,[d.default.selected]:!0===g}),"data-a8n":n.default.key(`contact-mention-list-item-${null!=h?h:"null"}`),onMouseDown:f,onMouseUp:p,onMouseEnter:m,children:[(0,u.jsx)("div",{className:d.default.resultImage,children:(0,u.jsx)(r.DetailImage,{id:a,size:32})}),(0,u.jsx)("div",{className:d.default.textContact,dir:"auto",children:(0,u.jsx)(o.EmojiText,{text:s,formatters:v})}),(0,u.jsx)("div",{className:d.default.textPushname,dir:"auto",children:!c&&h?(0,u.jsx)(o.EmojiText,{text:`~${h}`,formatters:v}):null}),null]})};var n=s(a(99964)),i=s(a(94184)),r=a(88984),o=a(65417),l=a(5124),d=s(a(74019)),u=a(85893)},16477:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ThemeOptions=t.Suggestions=void 0;var n=s(a(94184)),i=a(67294),r=s(a(99574)),o=a(47915),l=s(a(44942)),d=s(a(30855)),u=s(a(27666)),c=s(a(59891)),h=a(78454),f=s(a(45367)),p=s(a(75311)),m=a(18644),_=s(a(59552)),g=a(49082),v=s(a(26898)),C=s(a(41956)),S=a(85893);const y=(0,c.default)({MEDIA_CAPTION:null});t.ThemeOptions=y;t.Suggestions=e=>{const{theme:t,plugin:a}=e,s=(0,g.useModelValues)(e.chat,["groupMetadata","isGroup"]),c=(0,_.default)((()=>new d.default)),[b,E]=(0,i.useState)(!1),[T,x]=(0,i.useState)(0),[M,P]=(0,i.useState)(""),[A,I]=(0,i.useState)(""),[w,k]=(0,i.useState)([]),j=(0,i.useRef)(),N=e=>(t,a)=>!(!b||!w.length)&&((!t||!(0,u.default)(t))&&(e(t,a),!0)),O=e=>{const t=w[e];if(!t||!t.id)return;const n=s.assignedColor(t.id);a.handleSelect(t,n+"")},R=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return x((a=>{var s;return t||a===e||null===(s=j.current)||void 0===s||s.scrollIntoViewIfNeeded(T),e}))},D=N((()=>O(T))),L=N((()=>{E(!1),x(0),P(""),I(""),k([])})),B=N((()=>R(Math.max(T-1,0)))),F=N((()=>{const e=w.length-1;R(Math.min(T+1,e))}));if((0,v.default)(a,r.default.ENTER,D),(0,v.default)(a,r.default.TAB,D),(0,v.default)(a,r.default.SEARCH,(e=>{if(M&&e.startsWith(M))return;if(!s||!s.isGroup)return;const{groupMetadata:t}=s,{participants:a}=null!=t?t:{};E(!0),x(0),P(null),I(e),k((0,h.getResults)(e,a))})),(0,v.default)(a,r.default.INACTIVE,L),(0,v.default)(a,r.default.UP,B),(0,v.default)(a,r.default.DOWN,F),!b||!w.length)return null;const G=w.map(((e,t)=>({height:52,itemKey:e.id.toString(),contentKey:`${A}${t===T?"-selected":""}`,index:t,contact:e})));return(0,S.jsx)(C.default,{component:"div",className:p.default.positioningContainer,transitionName:"slide-up",children:(0,S.jsx)(m.UIE,{displayName:"MentionSuggestions",escapable:!0,requestDismiss:()=>{E(!1),x(0),P(A),I(""),k([])},requestRecentFocusOnUnmount:!1,children:(0,S.jsx)("div",{className:(0,n.default)(p.default.overlayContainer,{[p.default.mediaCaption]:t===y.MEDIA_CAPTION}),children:(0,S.jsx)(l.default,{className:p.default.resultsContainer,flatListControllers:[c.current],children:(0,S.jsx)(o.FlatList,{ref:j,data:G,a8nKey:"contact-mention-list",flatListController:c.current,direction:"vertical",renderItem:e=>{const{index:a,contact:s}=e;return(0,S.jsx)(f.default,{contact:s,term:A,selected:a===T,theme:t===y.MEDIA_CAPTION?"mediaCaption":null,onMouseDown:e=>e.preventDefault(),onMouseUp:()=>O(a),onMouseEnter:()=>R(a,!0)},s.id.toString())}})})})})})}},7915:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=(0,s(a(59891)).default)({FILTER:void 0,INACTIVE:void 0,ENTER:void 0,TAB:void 0,DOWN:void 0,UP:void 0,BACKSPACE:void 0,CLOSE:void 0});t.default=n},9180:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(62101),i=a(93581),r=a(69951),o=a(19380),l=s(a(7915)),d=a(65563),u=a(99234),c=s(a(12062)),h=s(a(51577)),f=s(a(60356)),p=s(a(28224)),m=a(5524),_=a(31515),g=a(65127);const v=(0,c.default)(25,"/"),C={Enter:l.default.ENTER,Tab:l.default.TAB,ArrowUp:l.default.UP,ArrowDown:l.default.DOWN,Backspace:l.default.BACKSPACE};class S extends n.BasePlugin{constructor(){super(...arguments),this.handleSelect=e=>{switch(e.type){case d.QuickReplyTypes.PROFILE_SMART_DEFAULT:this._handleProfileQuickReply(e);break;case d.QuickReplyTypes.ADDRESS_SMART_DEFAULT:this._handleAddressQuickReply(e);break;case d.QuickReplyTypes.HOURS_SMART_DEFAULT:this._handleHoursQuickReply(e);break;default:this._handleTextQuickReply(e)}},this._handleTextQuickReply=e=>{e.useOnce();const t=window.getSelection(),a=v(this.ctx,t);null!=a&&((0,h.default)(t,a.length+1),this.ctx.replaceSelection(e.message),(0,h.default)(t,e.message.length),this.handle(l.default.INACTIVE))},this._handleHoursQuickReply=e=>{const t=r.ChatCollection.getActive();if(!t)return;const a=window.getSelection(),s=v(this.ctx,a);null!=s&&((0,h.default)(a,s.length+1),this.ctx.deleteSelection(),this.handle(l.default.INACTIVE),(0,m.sendTextMsgToChat)(t,e.message),e.useOnce())},this._handleProfileQuickReply=e=>{const t=r.ChatCollection.getActive(),a=o.ContactCollection.get((0,u.getMaybeMeUser)());if(!t||!a)return;const s=window.getSelection(),n=v(this.ctx,s);null!=n&&((0,h.default)(s,n.length+1),this.ctx.deleteSelection(),this.handle(l.default.INACTIVE),(0,f.default)([a],t),e.useOnce())},this._handleAddressQuickReply=e=>{const t=r.ChatCollection.getActive(),a=(0,u.getMaybeMeUser)(),s=i.BusinessProfileCollection.get(a),n=o.ContactCollection.get(a);if(!t||!s)return;const{latitude:d,longitude:c,address:f}=s,g=window.getSelection(),C=v(this.ctx,g);if(null!=C){if((0,_.isNumber)(d)&&(0,_.isNumber)(c)&&n){(0,h.default)(g,C.length+1),this.ctx.deleteSelection();let e=n.displayName;s.address&&(e+=`\n${s.address}`),s&&(0,p.default)(t,d,c,e)}else f&&((0,h.default)(g,C.length+1),this.ctx.deleteSelection(),(0,m.sendTextMsgToChat)(t,f));this.handle(l.default.INACTIVE),e.useOnce()}},this.handlers={onKeyDown(e,t){const a=C[e.key];return!!a&&this.handle(a,[e,t])},onSelect(){if(g.UA.isTrident)return!1;if(this.ctx.isComposing)return!1;const e=window.getSelection(),t=v(this.ctx,e);return null==t?(this.handle(l.default.CLOSE),this.handle(l.default.INACTIVE),!1):(this.handle(l.default.FILTER,[t]),!1)},onBlur(){return this.handle(l.default.INACTIVE),!1}}}}var y=new S;t.default=y},26152:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.logCancelEvent=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=new n.default.QuickReply({quickReplyAction:n.default.QUICK_REPLY_ACTION.ACTION_CHAT_CLICK_CANCEL,quickReplyEntryPoint:e?n.default.QUICK_REPLY_ENTRY_POINT.QUICK_REPLY_ENTRY_POINT_ATTACHMENT_PANEL:n.default.QUICK_REPLY_ENTRY_POINT.QUICK_REPLY_ENTRY_POINT_KEYBOARD});t.commit()},t.logFilterEvent=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const a=new n.default.QuickReply({quickReplyAction:n.default.QUICK_REPLY_ACTION.ACTION_CHAT_IMPRESSION,quickReplyCount:e,quickReplyEntryPoint:t?n.default.QUICK_REPLY_ENTRY_POINT.QUICK_REPLY_ENTRY_POINT_ATTACHMENT_PANEL:n.default.QUICK_REPLY_ENTRY_POINT.QUICK_REPLY_ENTRY_POINT_KEYBOARD});a.commit()},t.logSelectEvent=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=new n.default.QuickReply({quickReplyAction:n.default.QUICK_REPLY_ACTION.ACTION_CHAT_CLICK,quickReplyKeywordMatched:!1,quickReplyEntryPoint:e?n.default.QUICK_REPLY_ENTRY_POINT.QUICK_REPLY_ENTRY_POINT_ATTACHMENT_PANEL:n.default.QUICK_REPLY_ENTRY_POINT.QUICK_REPLY_ENTRY_POINT_KEYBOARD});t.commit()},t.logSmartDefaultSelectEvent=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=new n.default.QuickReply({quickReplyAction:n.default.QUICK_REPLY_ACTION.ACTION_SMART_DEFAULT_CLICK,quickReplyKeywordMatched:!1,quickReplyEntryPoint:e?n.default.QUICK_REPLY_ENTRY_POINT.QUICK_REPLY_ENTRY_POINT_ATTACHMENT_PANEL:n.default.QUICK_REPLY_ENTRY_POINT.QUICK_REPLY_ENTRY_POINT_KEYBOARD});t.commit()};var n=s(a(11339))},97327:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{shortcut:t,message:a}=(0,l.useModelValues)(e.quickReply,["shortcut","message"]),{query:s,selected:u,onMouseDown:c,onMouseEnter:h,onMouseUp:f}=e,p=t.slice(s.length);return(0,d.jsxs)("div",{className:(0,n.default)(o.default.result,{[o.default.selected]:u}),onMouseDown:c,onMouseUp:f,onMouseEnter:h,children:[(0,d.jsx)("span",{className:o.default.slash,children:"/"}),(0,d.jsx)(i.EmojiText,{className:o.default.shortcutPrefix,text:s}),(0,d.jsx)(i.EmojiText,{className:o.default.shortcutSuffix,text:p}),(0,d.jsx)(i.EmojiText,{className:o.default.message,a8n:"quick-reply-message",ellipsify:!0,text:a,formatters:r.Configuration.QuickReply()})]})};var n=s(a(94184)),i=a(65417),r=a(5124),o=s(a(63293)),l=a(49082),d=a(85893)},65894:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{plugin:t,isOpenFromMenu:a,onClose:s}=e,[n,o]=(0,i.useState)(""),[l,m]=(0,i.useState)([]),[E,T]=(0,i.useState)(!1),[x,M]=(0,i.useState)(0),P=(0,_.default)((()=>new d.default)),A=(0,i.useRef)(null),I=(0,i.useRef)(null),w=e=>(t,a)=>!(!E||!l.length)&&((!t||!(0,u.default)(t))&&(e(t,a),!0)),k=()=>{o(""),m([]),T(!1),M(0)},j=(0,C.default)((()=>{h.QuickReplyCollection.synced()||h.QuickReplyCollection.sync()})),N=e=>{h.QuickReplyCollection.synced()||j();const t=h.QuickReplyCollection.filterShortcuts(e);t.length&&!E&&(0,c.logFilterEvent)(t.length,a),o(e),m(t),T(!0),M(0)},O=w((()=>N(n))),R=e=>{const s=l[e];s&&s.id&&(I.current=s.message,s.isSmartDefault()?(0,c.logSmartDefaultSelectEvent)(a):(0,c.logSelectEvent)(a),t.handleSelect(s))},D=w((()=>R(x))),L=w((()=>{k()})),B=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e!==x&&(M(e),!t&&A.current&&A.current.scrollIntoViewIfNeeded(x))},F=w((()=>{const e=Math.max(x-1,0);B(e)})),G=w((()=>{const e=l.length-1,t=Math.min(x+1,e);B(t)}));return(0,g.useListener)(h.QuickReplyCollection,"add remove change:shortcut",O),(0,v.default)(t,r.default.ENTER,D),(0,v.default)(t,r.default.TAB,D),(0,v.default)(t,r.default.FILTER,N),(0,v.default)(t,r.default.INACTIVE,L),(0,v.default)(t,r.default.UP,F),(0,v.default)(t,r.default.DOWN,G),(0,v.default)(t,r.default.BACKSPACE,(()=>{const t=window.getSelection().toString();I.current&&t===I.current&&(0,c.logCancelEvent)(e.isOpenFromMenu)})),(0,v.default)(t,r.default.CLOSE,(()=>{s()})),(0,i.useEffect)((()=>()=>{j.cancel()}),[]),(0,y.jsx)(S.default,{component:"div",className:p.default.positioningContainer,transitionName:"slide-up",children:(0,y.jsx)(b,{results:l,query:n,offset:x,handleEscape:()=>{k()},flatListController:P.current,flatListRef:A,renderItem:e=>{const{index:t,quickReply:a}=e;return(0,y.jsx)(f.default,{quickReply:a,query:n,selected:t===x,onMouseDown:e=>e.preventDefault(),onMouseUp:()=>R(t),onMouseEnter:()=>B(t,!0)},a.id)}})})};var n=s(a(94184)),i=a(67294),r=s(a(7915)),o=a(47915),l=s(a(44942)),d=s(a(30855)),u=s(a(27666)),c=a(26152),h=a(99662),f=s(a(97327)),p=s(a(91162)),m=a(18644),_=s(a(59552)),g=a(19529),v=s(a(26898)),C=s(a(88857)),S=s(a(41956)),y=a(85893);function b(e){let{results:t,query:a,offset:s,handleEscape:i,flatListController:r,flatListRef:d,renderItem:u}=e;const c=t.map(((e,t)=>({height:52,itemKey:e.id,contentKey:`${a}${t===s?"-selected":""}`,index:t,quickReply:e})));return t.length?(0,y.jsx)(m.UIE,{displayName:"QuickReplySuggestions",escapable:!0,requestDismiss:i,children:(0,y.jsx)("div",{className:(0,n.default)(p.default.overlayContainer),children:(0,y.jsx)(l.default,{className:p.default.resultsContainer,flatListControllers:[r],children:(0,y.jsx)(o.FlatList,{ref:d,data:c,flatListController:r,direction:"vertical",renderItem:u})})})}):null}},87859:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(t.isComposing)return!1;const a=window.getSelection();return function(e,t,a){if(!t.modify)return!1;if(1!==t.rangeCount)return!1;let s=d.backwardsEmojiTextsTrie;const u=e.data||"";if(s=s.get(u),!s)return!1;if(!t.getRangeAt(0).collapsed)return!1;let c=u,h=null,f=null;if((0,o.default)(a,t,((e,t,a)=>((0,n.default)(s,"Trie ptr somehow not set"),s=s.get(e),!s||(s.hasChildren()?void(0===t&&(c=a+c)):(c=a.slice(t)+c,f=(0,d.textToEmoji)(c),f&&(h=c),!0))))),!h)return!1;const p=a.serializeTextBeforeCursor();if((0,i.isInsideCodeBlock)(p))return!1;(0,l.default)(t,h.length-1),a.replaceSelection(f||"");const{refInput:m}=a,_=(0,r.getSelectionSibling)(m,r.Direction.BACKWARD);if(!_)return!0;return _.dataset.replacedEmojiText=h,!0}(e,a,t)};var n=s(a(41143)),i=a(19773),r=a(72473),o=s(a(37773)),l=s(a(51577)),d=a(80509)},73123:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(8===e.keyCode)return function(e,t){if(t.isComposing)return!1;const a=window.getSelection();return function(e,t,a){if(!t.modify)return!1;const{refInput:n}=a,i=(0,s.getSelectionSibling)(n,s.Direction.BACKWARD);if(!i)return!1;if(r=i,!Boolean(r.dataset.replacedEmojiText))return!1;var r;t.modify("extend","backward","character"),t.modify("move","backward","character");const o=i.dataset.replacedEmojiText,l=i.parentNode;if(!l)return!1;l.replaceChild(document.createTextNode(o+" "),i);const d=o.length;for(let e=0;e<d+1;e++)t.modify("extend","forward","character"),t.modify("move","forward","character");return!1}(0,a,t)}(0,t);return!1};var s=a(72473)},8103:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(62101),i=s(a(87859)),r=s(a(73123));class o extends n.BasePlugin{constructor(){super(...arguments),this.handlers={onBeforeInput:i.default,onKeyDown:r.default}}}var l=new o;t.default=l},80509:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.backwardsEmojiTextsTrie=void 0,t.textToEmoji=function(e){const t=o[e];let a;t&&(a=i.EmojiUtil.getSkinToneBase(t)&&r.EmojiVariantCollection.getVariant(t));return a||t};var n=s(a(55205)),i=a(70449),r=a(13185);const o={"(y)":"","(Y)":"","(n)":"","(N)":"",":-)":"",":-(":"",":-p":"",":-P":"",":-|":"",":-\\":"",":-D":"",":-*":"",":-o":"","<3":"","^_^":"",">_<":"",";-)":""};const l=Object.keys(o),d=n.default.fromBackwardsStrings(l);t.backwardsEmojiTextsTrie=d},15196:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(62101),i=a(88102),r=s(a(81472));class o extends n.BasePlugin{constructor(){super(...arguments),this.handlers={onKeyDown(e){return!this.ctx.isComposing&&(!(" "!==e.key||!(0,r.default)(e))&&(!this.ctx.value.length&&(i.Cmd.scrollMessages(),!0)))}}}}var l=new o;t.default=l},64947:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{children:t}=e;return(0,i.jsxs)("div",{className:n.default.container,children:[" ",t," "]})};var n=s(a(60576)),i=a(85893)},45260:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{base:t,unicode:a,action:s}=e,h=(0,i.isBaseCoupleEmoji)(t),f=h?(0,i.getPermutations)(u.SKIN_TONE_VARIATIONS.slice(1),2):u.SKIN_TONE_VARIATIONS.map((e=>[e])),p=f.reduce(((e,a)=>{const s=i.EmojiUtil.getSkinToneVariant(t,a);return s?(e.push(s),e):e}),[]).filter((e=>i.EmojiUtil.isEmoji(e))).map(((e,t)=>(0,c.jsx)(n.DropdownItem,{type:h?"emoji-grid":"emoji",a8n:"mi-emoji-variant",action:t=>s(t,a,e),children:(0,c.jsx)(r.EmojiText,{text:e,formatters:l.Configuration.LargeEmojiOnly(),tabIndex:"-1"})},e+t)));return h?(0,c.jsx)(o.default,{base:t,action:s,unicode:a,children:p}):(0,c.jsx)(d.default,{children:p})};var n=a(71174),i=a(70449),r=a(65417),o=s(a(8932)),l=a(5124),d=s(a(64947)),u=a(89964),c=a(85893)},26898:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){const s=(0,r.default)(i.pluginContext),o=(0,n.useRef)(a);o.current=a,(0,n.useEffect)((()=>{const a=s.current;return e.registerHandler(a,t,(function(){return o.current(...arguments)})),()=>e.unregisterHandler(a,t)}),[e,t,s])};var n=a(67294),i=a(62101),r=s(a(59552))},82857:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.RoundTheme=t.Round=void 0;var n=s(a(81109)),i=s(a(99964)),r=s(a(94184)),o=s(a(81654)),l=s(a(59071)),d=s(a(60265)),u=a(85893);const c=a(54302).Mirrored(["Default","Small","Large","Inverted"]);t.RoundTheme=c;t.Round=e=>{let{large:t,small:a,inverted:s,theme:h,a8nText:f,label:p,onClick:m,onKeyDown:_,className:g,children:v,disabled:C,dataTab:S,hideBackground:y}=e;const b=(0,r.default)(g,l.default.btn,{[l.default.large]:t||h===c.Large,[l.default.small]:a||h===c.Small,[l.default.inverted]:s||h===c.Inverted,[l.default.disabled]:C,[l.default.hideBackground]:!0===y}),[E,T]=(0,d.default)(m,{disabled:C}),x=_?e=>{(0,o.default)(e)&&(e.preventDefault(),C||_(e))}:T.onKeyPress;return(0,u.jsx)("div",(0,n.default)((0,n.default)({},T),{},{"data-a8n":i.default.key(f),role:"button","aria-label":p,tabIndex:"0",className:b,onKeyDown:x,onMouseDown:e=>{e.stopPropagation(),e.preventDefault()},ref:E,"data-tab":S,children:v}))}},53145:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(81109)),i=s(a(94184)),r=s(a(76708)),o=s(a(60265)),l=a(85893);var d=e=>{let{children:t,side:a,ellipsify:s,onClick:d,"aria-label":u}=e;const c=(0,i.default)({[r.default.clickable]:d}),h=(0,i.default)(r.default.main,{[r.default.mainEllipsify]:s}),f=null!=a?(0,l.jsx)("div",{className:r.default.side,children:a}):null;let p={};const[m,_]=(0,o.default)(d);return null!=d&&(p=(0,n.default)({ref:m},_)),(0,l.jsx)("div",(0,n.default)((0,n.default)({className:c,"aria-label":u},p),{},{children:(0,l.jsxs)("div",{className:r.default.body,children:[(0,l.jsx)("div",{className:h,children:t}),f]})}))};t.default=d},11497:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(29766)),i=a(85893);var r=e=>{let{header:t}=e;return(0,i.jsx)("div",{className:n.default.container,children:t})};t.default=r},87541:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(25389),n=a(11290);a(97335);var i=a(80134),r=a(8080);t.default=class{constructor(e,t,a,n){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.componentName=e,this.name=t,this._isStrong=n,this.keys=a;const o=i.ProxyStates[t];o||(__LOG__(4,void 0,new Error,!0)`Unknown StateHOC concern type "${t}"`,SEND_LOGS("state-hoc-error")),this._proxyClass=o,this._limitedAccessProxyClass=function(e,t,a,n){const i={$ProxyState$ComponentName:{value:e},proxyBitMask:{value:(0,s.genBitMask)(t.prototype.mirrorMask,a)}};for(const t of a){const a={enumerable:!0};a.get=function(){return this.$ProxyState$state.get(t)},a.set=function(){__LOG__(4,void 0,new Error)`READ ONLY: Cannot write to proxied property "${t}", created in <${e} />, it is not writable.`},n||(a.set=function(e){this.$ProxyState$state.set(t,e)}),i[t]=a}function r(e){t.call(this,e)}return r.prototype=Object.create(t.prototype,i),r.prototype.constructor=r,r}(e,o,a,r)}getModel(e){return e instanceof this._proxyClass?e.$ProxyState$state:e}getModelAndValidate(e){const t=e instanceof this._proxyClass?e.$ProxyState$state:e;return t?t instanceof n.BaseModel?t:(__LOG__(4,void 0,new Error,!0)`${this.componentName} given invalid object for ${this.name}: ${a=t,"string"==typeof a?a:a.toString?a.toString():"Invalid Object"}`,SEND_LOGS("state-hoc-error"),null):(r.Stream.mode===r.StreamMode.MAIN&&(__LOG__(4,void 0,new Error,!0)`${this.componentName} was not supplied the ${this.name} model with keys ${String(this.keys)}.`,SEND_LOGS("state-hoc-error")),null);var a}createProxy(e){return new this._limitedAccessProxyClass(e)}attachConcern(e,t,a){e.incObservers(!this._isStrong),e.mirror.addListener(a,t,this)}detachConcern(e,t){e.decObservers(),e.mirror.removeListener(t)}}},60899:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{animationFrames:t,signal:a,onFrameChange:n,shouldStop:i}=e;if(a.aborted)return Promise.reject(new s.AbortError);if(0===t.length)return Promise.resolve();const r=(new Date).getTime();let o=0,l=0,d=r,u=()=>{};return new Promise(((e,r)=>{const c=()=>{0!==o&&window.cancelAnimationFrame(o),r(new s.AbortError)};a.addEventListener("abort",c),u=()=>{a.removeEventListener("abort",c)};const h=()=>{const a=(new Date).getTime();if(a<d)return void(o=window.requestAnimationFrame(h));const{duration:s,rgbaBuffer:r}=t[l];n(r),l=(l+1)%t.length,d=a+s,1===l&&i()?e():o=window.requestAnimationFrame(h)};o=window.requestAnimationFrame(h)})).finally((()=>{u()}))};var s=a(89385)},88461:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{blob:t}=e,[a,s]=(0,n.useState)(null);if((0,n.useEffect)((()=>{(0,r.blobToArrayBuffer)(t).then(o.default).then((e=>{s(e)})).catch((e=>{__LOG__(3)`AnimationCanvas error: ${e}`}))}),[]),!a)return e.renderPreview();const{width:d,height:u,frames:c}=a;return(0,l.jsx)(i.default,{className:e.className,width:d,height:u,animationFrames:c,startAnimation:Boolean(e.loopAnimation||e.startAnimation),maxLoops:e.maxLoops,onClick:e.onClick})};var n=a(67294),i=s(a(3285)),r=a(1063),o=s(a(36123)),l=a(85893)},41481:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(45095)),i=a(67294),r=s(a(97869)),o=s(a(6914)),l=a(19529),d=a(29193),u=a(99935),c=a(85893);var h=(0,i.forwardRef)(((e,t)=>{const a=(0,i.useRef)(),s=(0,i.useRef)(),h=(0,i.useRef)(),f=(0,i.useRef)(),[p,{isIntersecting:m}]=(0,o.default)({root:null,rootMargin:"25px",threshold:.99}),[_,g]=(0,i.useState)(e.startAnimation),[v,C]=(0,i.useState)(!1),[S,y]=(0,u.useManualTimeout)((()=>{const e=h.current;null==e||e.refreshBlob(),g(!1),f.current=null})),b=()=>{const t=(0,n.default)(e.mediaData.singleLoopDuration,"props.mediaData.singleLoopDuration"),a=(Date.now()-(0,n.default)(f.current,"startedAtRef.current"))%t,s=e.mediaData.animationDuration-a;S(s)},E=()=>{y(),null==f.current&&(f.current=Date.now()),g(!0)};(0,l.useListener)(document,"visibilitychange",(()=>{const e="visible"===document.visibilityState;m&&e?(E(),b()):g(!1)})),(0,i.useEffect)((()=>{m?(E(),b()):null!=f.current&&b()}),[m]);const T=(0,d.useSetModelValue)(e.mediaData,"animatedAsNewMsg"),x=()=>{if(v)return;const t=a.current,n=s.current;t&&n&&(t.width=n.naturalWidth/2,t.height=n.naturalHeight/2,t.getContext("2d").drawImage(n,0,0,t.width,t.height)),e.startAnimation&&(f.current=Date.now(),b(),T(!0)),C(!0)};(0,i.useImperativeHandle)(t,(()=>({startAnimation:E})));const M=!v||_;return(0,c.jsxs)("div",{className:e.className,onMouseEnter:E,onMouseLeave:()=>{null!=f.current&&b()},onClick:e.onClick,ref:p,children:[(0,c.jsx)(r.default,{ref:h,mediaData:e.mediaData,placeholderRenderer:e.placeholderRenderer,downloadMedia:e.downloadMedia,children:t=>(0,c.jsx)("img",{alt:e.label,className:e.className,style:{display:M?"block":"none"},draggable:"false",src:t,ref:s,onLoad:x})}),(0,c.jsx)("canvas",{className:e.className,style:{display:M?"none":"block"},draggable:"false",ref:a})]})}));t.default=h},3285:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{startAnimation:t,animationFrames:a,maxLoops:s}=e,u=(0,l.default)(),c=(0,i.useRef)(!1),h=(0,i.useRef)(0),f=(0,i.useRef)(!1),[p,m]=(0,i.useState)(null),_=()=>{c.current||(c.current=!0,(0,r.default)({animationFrames:a,signal:u,onFrameChange:e=>m(e),shouldStop:()=>h.current>=s||(f.current||h.current++,!1)}).catch((e=>{if(e.name!==n.ABORT_ERROR)throw e})).finally((()=>{c.current=!1})))};return(0,i.useEffect)((()=>{t?_():(()=>{if(0===a.length)return;m(a[0].rgbaBuffer)})()}),[]),p?(0,d.jsx)(o.default,{rgbaBuffer:p,className:e.className,width:e.width,height:e.height,onClick:e.onClick,onMouseEnter:()=>{s!==1/0&&(f.current=!0,h.current=1,_())},onMouseLeave:()=>{f.current=!1}}):null};var n=a(89385),i=a(67294),r=s(a(60899)),o=s(a(61146)),l=s(a(38080)),d=a(85893)},30106:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,l.jsx)(o.default,{xstyle:[d.button],onClick:t=>{var a;null===(a=e.onClick)||void 0===a||a.call(e,t)},children:(0,l.jsxs)("div",{className:(0,i.default)(d.container),children:[(0,l.jsx)(r.default,{xstyle:d.icon,name:"plus-large"}),(0,l.jsx)("span",{children:n.default._("Create",null,{hk:"1lqA1O"})})]})})};var n=s(a(48360)),i=s(a(56720)),r=s(a(23217)),o=s(a(1784)),l=a(85893);const d={button:{width:"ywgftmbl",height:"b1lctrli",display:"p357zi0d",justifyContent:"ac2vgrno",alignItems:"gndfcl4n"},container:{width:"fi5r6efy",height:"tl6iuc6d",backgroundColor:"f7wxzknn",color:"t7i5gvrw",fontSize:"ovllcyds",borderTop:"oosapc3q",borderEnd:"fefz13mk",borderBottom:"ob9ouq0z",borderStart:"tntx47yo",borderTopStartRadius:"g1jn521u",borderTopEndRadius:"mrnekr2l",borderBottomEndRadius:"wu0i2wpa",borderBottomStartRadius:"bbs9k8l5",marginTop:"bddvio20",marginBottom:"du8bjn1j",":hover":{transform:"sl8qjjwd"},transitionProperty:"bo8jc6qi",transitionDuration:"slppp3mo",transitionTimingFunction:"pu4k07i0",willChange:"exvbdj68",display:"p357zi0d",flexDirection:"f8m0rgwh",alignItems:"gndfcl4n",justifyContent:"ac2vgrno"},icon:{marginBottom:"inww9tbj"}}},12064:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(89385),i=s(a(45095)),r=s(a(94184)),o=s(a(48360)),l=a(67294),d=s(a(88461)),u=s(a(41481)),c=s(a(30106)),h=a(44365),f=a(7293),p=s(a(32243)),m=s(a(43725)),_=s(a(63793)),g=a(58668),v=s(a(20553)),C=s(a(34949)),S=s(a(60325)),y=s(a(84644)),b=s(a(61146)),E=s(a(59552)),T=a(49082),x=s(a(38080)),M=a(85893);const P=(0,l.forwardRef)(((e,t)=>{let{className:a,loopAnimation:s,mediaData:n,startAnimation:i,renderPreview:r,downloadMedia:o,onClick:l,label:d}=e;return n.animationDuration>0&&!s?(0,M.jsx)(u.default,{className:a,mediaData:n,startAnimation:i,onClick:l,placeholderRenderer:r,downloadMedia:o,ref:t,label:d}):(0,M.jsx)(v.default,{mediaData:n,placeholderRenderer:r,downloadMedia:o,children:e=>(0,M.jsx)("img",{className:a,draggable:"false",onClick:l,src:e,alt:d})})}));function A(e){let{className:t,loopAnimation:a,mediaData:s,startAnimation:n,renderPreview:r,downloadMedia:o,onClick:l}=e;if(s.animationDuration>0){const e=a?1/0:s.animationDuration/(0,i.default)(s.singleLoopDuration,"mediaData.singleLoopDuration");return(0,M.jsx)(_.default,{mediaData:s,render:s=>(0,M.jsx)(d.default,{className:t,loopAnimation:a,maxLoops:e,blob:s,renderPreview:r,startAnimation:n,onClick:l}),renderPlaceholder:r,downloadMedia:o})}return s.rgbaBuffer?(0,M.jsx)(b.default,{className:t,height:s.rgbaHeight,onClick:l,rgbaBuffer:s.rgbaBuffer,width:s.rgbaWidth}):r()}P.displayName="StickerWithWebp";const I=(e,t)=>{const a=(0,T.useModelValues)(e.mediaData,["animatedAsNewMsg","animationDuration","singleLoopDuration","mediaBlob","preview","renderableUrl","rgbaBuffer","rgbaHeight","rgbaWidth","emojis","mediaStage"]),s=(0,E.default)((()=>a.animatedAsNewMsg)).current,i=function(){const[e,t]=(0,l.useState)(h.getCachedWebpSupport),a=(0,x.default)();return(0,l.useEffect)((()=>{null==e&&(0,y.default)((0,h.detectWebpSupport)(),a).then(t).catch((e=>{if(e.name!==n.ABORT_ERROR)throw e}))}),[]),e}(),d=(0,l.useRef)(),u=(0,l.useRef)();(0,l.useImperativeHandle)(t,(()=>({startAnimation(){var e;null===(e=u.current)||void 0===e||e.startAnimation()},getImgNode:()=>d.current})));const _=(0,r.default)({[p.default.conversation]:"conversation"===e.theme,[p.default.quoted]:"quoted"===e.theme,[p.default.composeBoxQuoted]:"composeBoxQuoted"===e.theme,[p.default.stickerPanel]:"stickerPanel"===e.theme,[p.default.stickerStore]:"stickerStore"===e.theme,[p.default.stickerDetails]:"stickerDetails"===e.theme,[p.default.clickable]:Boolean(e.onClick),[p.default.large]:f.GK.supportsFeature(f.GK.F.LARGE_STICKERS)}),v=()=>{var t;const s=a.preview,n=s instanceof C.default?s.url():null,i=null===(t=a.emojis)||void 0===t?void 0:t.join(" "),l=i?m.default.t(10,{emojis:i}):o.default._("Sticker with no label",null,{hk:"1aw5TF"});return n?(0,M.jsx)("img",{className:_,draggable:"false",onClick:e.onClick,src:n,alt:l}):e.isCreateButton?(0,M.jsx)(c.default,{onClick:e.onClick}):(0,M.jsx)(S.default,{className:(0,r.default)(p.default.placeholder,_)})};return(0,M.jsx)("span",{ref:d,className:(0,r.default)(p.default.container,{[p.default.showSticker]:a.mediaStage===g.MEDIA_DATA_STAGE.RESOLVED,[p.default.large]:f.GK.supportsFeature(f.GK.F.LARGE_STICKERS)}),children:(()=>{var t;if(null==i)return v();const n=null===(t=a.emojis)||void 0===t?void 0:t.join(" "),r=n?m.default.t(10,{emojis:n}):o.default._("Sticker with no label",null,{hk:"1aw5TF"}),l=Boolean(e.animateOnView||e.isNewMsg&&!s),d=Boolean(e.loopAnimation);return i?(0,M.jsx)(P,{ref:u,className:_,mediaData:a,loopAnimation:d,startAnimation:l,renderPreview:v,onClick:e.onClick,downloadMedia:e.downloadMedia,label:r}):(0,M.jsx)(A,{className:_,mediaData:a,loopAnimation:d,startAnimation:l,renderPreview:v,onClick:e.onClick,downloadMedia:e.downloadMedia,label:r})})()})};var w=(0,l.forwardRef)(I);t.default=w},60325:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{className:t,size:a}=e;return(0,i.jsx)(n.default,{className:t,xstyle:r.container,name:"sticker-placeholder",width:a,height:a})};s(a(56720));var n=s(a(23217)),i=a(85893);const r={container:{display:"p357zi0d",alignItems:"gndfcl4n",justifyContent:"ac2vgrno",color:"r7focko8"}}},38932:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{disabled:t,onClick:a,type:s,title:c,"aria-label":h}=e,f=(0,i.default)(e,d);return(0,l.jsx)(o.default,{xstyle:t&&u.disabled,disabled:t,onClick:a,"aria-label":h,title:c,type:s,children:(0,l.jsx)(r.default,(0,n.default)({},f))})};var n=s(a(81109)),i=s(a(6479)),r=(s(a(56720)),s(a(23217))),o=s(a(1784)),l=a(85893);const d=["disabled","onClick","type","title","aria-label"],u={disabled:{opacity:"aiwu9bi8"}}},90011:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.TextInputCustomStyleThemes=t.TextInput=void 0;var n=s(a(52013)),i=s(a(94184)),r=s(a(48360)),o=a(67294),l=(s(a(56720)),a(60811)),d=s(a(18888)),u=a(30424),c=a(18609),h=a(65417),f=a(55414),p=s(a(59891)),m=s(a(43725)),_=a(11054),g=s(a(23217)),v=s(a(8082)),C=a(18644),S=s(a(24717)),y=a(3940),b=s(a(1784)),E=s(a(59552)),T=s(a(41502)),x=s(a(83800)),M=s(a(41956)),P=a(85893);const A=(0,p.default)({groupInfoName:null,desaturated:null,noErrorInfo:null,newChatInfoDefaultText:null,newChatInfoLargeText:null,disabledLabel:null});t.TextInputCustomStyleThemes=A;const I={iconMain:{position:"lhggkp7q",top:"jgz0asyo",right:"grt5ktjy",color:"gtscxtjd",cursor:"ajgl1lbb",":focus":{boxShadow:"esbo3we0"}},emojiBtn:{marginEnd:"kjemk6od",marginStart:"p3lsiedt",color:"gtscxtjd",cursor:"ajgl1lbb",":focus":{boxShadow:"esbo3we0"}}};function w(e,t){var a;const{customStyleThemes:s=[],focusOnMount:p,lockable:w,onEnter:k,multiline:j,onChange:N,onFocus:O,onBlur:R,onBeginEdit:D,lowProfile:L,error:B,validate:F,value:G,onSave:U,onError:V,onCancel:H,emptyValuePlaceholder:K,editable:q=!0,renderEmojiTextInLockMode:W,pending:Y,blockFocusOnLock:z,managed:Q,managedError:$}=e,X=(0,E.default)(d.default),J=(0,o.useRef)(!1),Z=(0,o.useRef)(null),ee=(0,o.useRef)(null),te=(0,o.useRef)(null),[ae,se]=(0,o.useState)(e.startActive||!1),[ne,ie]=(0,o.useState)(!e.startActive&&!!w),[re,oe]=(0,o.useState)(null),le=(0,T.default)(ne),de=(0,T.default)(q),ue=(0,T.default)(Y),ce=()=>{var e;null===(e=Z.current)||void 0===e||e.focus()};(0,o.useEffect)((()=>{p&&ce()}),[]);const he=e=>{var t;null===(t=Z.current)||void 0===t||t.replaceSelection(e)},fe=()=>{oe(null)},pe=()=>{var e;null===(e=ee.current)||void 0===e||e.restoreFocus()},me=()=>{let e=!(!L&&B);F&&e&&(e=F(G)),e?(U&&U(),ie(!0)):V&&V()},_e=e=>{e.stopPropagation(),O&&O(e)},ge=()=>{D&&D(),ie(!1)},ve=(0,x.default)((()=>{H&&H(),ie(!0)})),Ce=(0,x.default)((()=>q&&!ne));(0,o.useEffect)((()=>{le||!de||q||ve(),te.current&&!z&&(!le&&ne||ue&&!Y)&&n.default.focus(te.current);const e=Z.current;Ce()&&!Q||(null==e?void 0:e.value)===G||null==e||e.reset(G||""),$&&B&&ne&&ie(!1)}),[z,q,B,ve,Ce,ne,Q,$,Y,de,le,ue,G]),(0,o.useImperativeHandle)(t,(()=>({restoreFocus:ce})));const Se=null!==(a=e.maxLength)&&void 0!==a?a:25,ye=Ce()&&!!e.error&&!e.lowProfile,be={container:(0,i.default)(v.default.textInput,s&&s.map((e=>v.default[e])),{[v.default.noPlaceholder]:!e.placeholder,[v.default.invite]:"v4-invite-caption"===e.theme,[v.default.active]:Ce(),[v.default.small]:"small"===e.theme,[v.default.inputLarge]:"large"===e.theme,[v.default.editOnHover]:e.showEditOnHover,[v.default.editable]:q,[v.default.highlightOnHover]:e.showHighlightOnHover}),label:(0,i.default)(v.default.labelText,{[v.default.float]:!!e.value,[v.default.hideFloatingLabel]:!!e.hideFloatingLabel}),inputWrapper:(0,i.default)(v.default.wrapper,{[v.default.textError]:ye,[v.default.invite]:"v4-invite-caption"===e.theme,[v.default.textActive]:ae,[v.default.locked]:ne,[v.default.editing]:Ce()}),infoWrapper:(0,i.default)(v.default.infoStrip,{[v.default.textError]:ye,[v.default.textActive]:ae})};let Ee,Te;if(e.lockable){if(e.pending)Te=(0,P.jsx)("div",{className:(0,i.default)(v.default.iconSpinner,v.default.iconMain),children:(0,P.jsx)(_.Spinner,{size:18,stroke:6,color:"highlight"})},"spinner");else if(ne)if(q){var xe;Te=(0,P.jsx)("button",{className:v.default.iconMain,onClick:ge,title:m.default.t(2,{fieldName:null!==(xe=e.fieldName)&&void 0!==xe?xe:""}),ref:te.current,children:(0,P.jsx)(g.default,{className:v.default.icon,name:"pencil",directional:!0})},"btn-edit")}else e.editRestrictionInfo&&!q&&(Te=(0,P.jsx)("div",{className:v.default.iconMain,onClick:e.editRestrictionInfo,children:(0,P.jsx)(g.default,{className:v.default.icon,name:"info"})},"btn-info"));else Te=(0,P.jsx)(b.default,{xstyle:I.iconMain,onClick:me,title:m.default.t(302),children:(0,P.jsx)(g.default,{className:v.default.icon,name:"checkmark"})},"btn-done");e.lockable&&(Ee=(0,P.jsx)(M.default,{transitionLeave:!e.showEditOnHover,transitionEnter:!e.showEditOnHover||!ne,className:v.default.iconMainContainer,transitionName:"pop",children:Te}))}const Me=Ce()&&e.supportsEmoji?(0,P.jsx)(b.default,{xstyle:I.emojiBtn,onClick:e=>{e&&(e.preventDefault(),e.stopPropagation());const t=(0,P.jsx)(u.EmojiPanel,{onEmoji:he,onFocusNext:ce,onFocusPrev:ce});oe({menu:t,dirY:l.DirY.TOP,type:"emoji_picker",anchor:e.target}),ce()},onFocus:()=>{re&&pe()},title:r.default._("Open emojis panel",null,{hk:"3IEMY6"}),children:(0,P.jsx)(g.default,{className:v.default.icon,name:"emoji-input"})},"emoji-btn"):null;let Pe;if(e.showRemaining){const t=(0,y.numCodepoints)(e.value||"");Pe=Se-t<50&&Ce()?(0,P.jsx)("div",{className:(0,i.default)(v.default.charCounter),children:m.default.n(Se-t)},"counter"):null}const Ae=e.supportsEmoji||e.showRemaining?(0,P.jsxs)(M.default,{className:v.default.iconsEditContainer,transitionLeave:!e.showEditOnHover,transitionName:"pop",children:[Pe,Me]}):null,Ie=e.error?(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("div",{className:v.default.errorText,children:ye?e.error:null}),(0,P.jsx)("div",{className:v.default.visiblyHidden,role:"alert",children:m.default.t(3,{error:e.error})})]}):null,we=e.lowProfile?null:(0,P.jsx)("div",{className:be.infoWrapper,children:Ie});let ke;if(e.lockable&&!ne){let e;re&&(e=(0,P.jsx)(C.UIE,{displayName:"EmojiPicker",escapable:!0,popable:!0,requestDismiss:fe,requestFocus:pe,children:(0,P.jsx)(S.default,{contextMenu:re})})),ke=(0,P.jsx)(C.UIE,{displayName:"TextInput",escapable:!0,requestFocus:ce,requestDismiss:ve,children:(0,P.jsx)("div",{children:e})})}else!e.lockable&&re&&(ke=(0,P.jsx)(C.UIE,{displayName:"EmojiPicker",escapable:!0,popable:!0,requestDismiss:fe,requestFocus:pe,children:(0,P.jsx)(S.default,{contextMenu:re})}));const je=q&&!ne,Ne=X.current,Oe=je||!W,Re=e.theme||"default",De=e.showHighlightOnHover&&ne?{margin:0}:null;let Le,Be;s.includes(A.newChatInfoLargeText)?(Le=24,Be=28):s.includes(A.newChatInfoDefaultText)&&(Le=16,Be=24);const Fe=Oe?(0,P.jsx)("div",{className:(0,i.default)(v.default.inputWrapper,{[v.default.constrainedWidth]:e.constrainedWidth}),children:(0,P.jsx)(Ne,{a8n:e.a8n,ref:Z,initialValue:e.value,theme:Re,multiline:e.multiline,onChange:e=>{N&&N(e)},onFocus:_e,onBlur:e=>{J.current||(ae&&se(!1),R&&R(e))},onEnter:e=>{w&&me(),k&&!j&&k(e)},onKeyDown:e.onKeyDown,onFiles:e.onFiles,spellCheck:e.spellCheck,maxLength:e.maxLength,readOnly:!je,title:e.title,placeholder:e.inputPlaceholder,style:De,size:Le,lineHeight:Be})}):(()=>{if(!W||!G)return;const{textLimit:e,readMoreText:t,onReadMore:a,formatters:s}=W;return(0,P.jsxs)("div",{className:v.default.emojiText,children:[(0,P.jsx)(h.EmojiText,{text:G,selectable:!0,emojiSize:h.EMOJI_SIZE.SMALL,textLimit:e,formatters:s}),(0,y.numCodepoints)(G)>e&&(0,P.jsx)(b.default,{onClick:a,children:(0,P.jsx)("span",{className:v.default.more,children:` ${t}`})})]})})();let Ge,Ue;return e.placeholder&&(Ge=(!e.value||!e.hideFloatingLabel)&&(0,P.jsx)("span",{className:be.label,children:e.placeholder}),Ue=(0,P.jsx)("div",{className:v.default.spacer})),(0,P.jsxs)(f.HotKeys,{className:be.container,onFocus:_e,children:[Ge,Ue,(0,P.jsxs)("div",{className:be.inputWrapper,children:[Fe,(!G||""===G)&&K&&ne&&(0,P.jsx)("div",{className:v.default.emptyValPlaceholder,children:K}),Ae,Ee]}),Oe&&(0,P.jsx)(Ne.EmojiSuggestions,{theme:c.ThemeOptions.EMOJI_INPUT,onSkinTonePicker:e=>{J.current=e}}),we,ke]})}const k=(0,o.forwardRef)(w);t.TextInput=k},71688:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a;const s=e.maxLines,f=null===(t=e.style)||void 0===t?void 0:t.singleLine,p=null===(a=e.style)||void 0===a?void 0:a.multipleLine,[m,_]=(0,r.useState)(f),g=(0,d.default)(m),{width:v}=(0,u.default)(),C=(0,d.default)(v),S=(0,r.useCallback)((e=>{if(null==e||!(v>0))return;if(1===s||null==p)return;const t=(0,l.getNumberOfLines)(e);m===f&&g===p&&t>1||m!==p&&(null==C||v<C)&&t>1?_(p):m!==f&&(null==C||v>C)&&1===t&&_(f)}),[s,f,p,m,g,v,C]);let y;(0,i.default)(s>=1,"expect lines to be >= 1"),y=1===s?{display:"block",textOverflow:"ellipsis",whiteSpace:"nowrap"}:{display:"-webkit-box",overflow:"hidden",WebkitBoxOrient:"vertical",WebkitLineClamp:s};return(0,c.jsx)("span",{ref:S,className:(0,n.default)((0,o.default)(h),m),style:y,dir:e.dir,children:e.children})};var n=s(a(94184)),i=s(a(41143)),r=a(67294),o=s(a(56720)),l=a(33811),d=s(a(41502)),u=s(a(54534)),c=a(85893);const h={position:"g0rxnol2",overflowX:"gfz4du6o",overflowY:"r7fjleex"}},2712:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.TooltipAnchor=t.Tooltip=void 0;var n=s(a(99964)),i=s(a(56720)),r=a(85893);const o=a(54302).Mirrored(["Left","Right","Top","Bottom"]);t.TooltipAnchor=o;const l={position:"lhggkp7q",zIndex:"qwzl264q",display:"l7jjieqr",maxWidth:"b1w2sqt8",paddingTop:"fbgy3m38",paddingEnd:"kyc7k6mt",paddingBottom:"oq31bsqd",paddingStart:"f78eapp6",fontSize:"ovllcyds",color:"gt1inm12",textAlign:"qfejxiq4",textOverflow:"lhj4utae",textShadow:"s52zzds6",whiteSpace:"le5p0ye3",backgroundColor:"puskumha",borderTopStartRadius:"ajyz1gl2",borderTopEndRadius:"y4d21rkf",borderBottomEndRadius:"aznl1635",borderBottomStartRadius:"n3l3zu01",animationName:"n0uige08",animationDuration:"ijnr8jqx",animationTimingFunction:"gaqnkt02"},d={top:"myeiuhv9",left:"eej3x5sv",transform:"btgdcgtm"},u={top:"myeiuhv9",right:"f6un2avg",transform:"teu70ee9"},c={top:"cy13c0w7",right:"j3as33wi",transform:"h442i0ze"},h={right:"j3as33wi",bottom:"iibwf64q",transform:"hvx74mdw"};function f(e){switch(e){case o.Left:return d;case o.Right:return u;case o.Top:return c;case o.Bottom:return h}}t.Tooltip=e=>{let{children:t,anchor:a=o.Right}=e;return(0,r.jsx)("div",{"data-a8n":n.default.key("tooltip"),className:(0,i.default)(l,f(a)),children:t})}},24717:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(81109)),i=s(a(45095)),r=a(67294),o=a(88102),l=s(a(59147));function d(e,t){const{contextMenu:a}=e,s=(0,l.default)(),d=(0,r.useRef)(null);(0,r.useEffect)((()=>{const e=(0,n.default)((0,n.default)({},a),{},{uim:(0,i.default)(s,"uim")});return o.Cmd.openContextMenu(e,(e=>{d.current=e})),()=>{o.Cmd.closeContextMenu(s)}}),[]);const u=()=>d.current;return(0,r.useImperativeHandle)(t,(()=>({getElement:u}))),null}var u=(0,r.forwardRef)(d);t.default=u},46780:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(81109)),i=a(67294),r=a(88102),o=s(a(59147));function l(e,t){const{tooltip:a}=e,s=(0,i.useRef)(null),l=(0,o.default)();(0,i.useEffect)((()=>{if(null==l)return;const e=(0,n.default)((0,n.default)({},a),{},{uim:l});return r.Cmd.openTooltip(e,(e=>{s.current=e})),()=>{r.Cmd.closeTooltip(l)}}),[]);const d=()=>s.current;return(0,i.useImperativeHandle)(t,(()=>({getElement:d}))),null}var d=(0,i.forwardRef)(l);t.default=d},59147:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return(0,n.useContext)(i.default)};var n=a(67294),i=s(a(2773))},1784:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{a8nText:t,children:a,dataTab:s,disabled:h,onClick:f,onMouseEnter:p,onMouseDown:m,title:_,type:g="button",onFocus:v,xstyle:C,onRef:S}=e,y=(0,i.default)(e,u);const[b,E]=(0,l.default)(),T={};null!=y["aria-label"]&&(T["aria-label"]=y["aria-label"]);null!=y["aria-pressed"]&&(T["aria-pressed"]=y["aria-pressed"]);return(0,d.jsx)("button",(0,n.default)((0,n.default)({className:(0,o.default)(c.button,E&&c.focused,h&&c.disabled,C),"data-tab":null!=s?s:void 0,"data-a8n":r.default.key(t),disabled:!0===h,onClick:f,onMouseEnter:p,onMouseDown:m,onFocus:v,ref:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((e=>{null==S||S(e),b(e)})),title:_,type:g},T),{},{children:a}))};var n=s(a(81109)),i=s(a(6479)),r=s(a(99964)),o=s(a(56720)),l=s(a(97056)),d=a(85893);const u=["a8nText","children","dataTab","disabled","onClick","onMouseEnter","onMouseDown","title","type","onFocus","xstyle","onRef"],c={button:{paddingTop:"i5tg98hk",paddingEnd:"f9ovudaz",paddingBottom:"przvwfww",paddingStart:"gx1rr48f",fontFamily:"shdiholb",fontSize:"phqmzxqs",color:"gtscxtjd",cursor:"ajgl1lbb",backgroundColor:"thr4l2wc",borderTop:"cc8mgx9x",borderEnd:"eta5aym1",borderBottom:"d9802myq",borderStart:"e4xiuwjv"},focused:{borderTopStartRadius:"dntxsmpk",borderTopEndRadius:"ixn6u0rb",borderBottomEndRadius:"s2vc4xk1",borderBottomStartRadius:"o0wkt7aw",boxShadow:"lgxs6e1q"},disabled:{cursor:"rcg4vxlo"}}},35148:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=o.default.t(299),a=o.default.t(1352),s=(0,u.useModelValues)(e.contact,["name","verifiedName"]),f=(0,u.useModelValues)(e.presence,["withholdDisplayStage","forceDisplay","hasData"]);(0,u.useModelValues)(e.chatstate,["type","deny","t"]);const{location:p,showBusinessCheckmark:m}=e;let _,g;_="list"===p||"info"===p?f.getUserSubtitleText():f.withholdDisplayStage===l.WithholdDisplayStage.Info?t:f.withholdDisplayStage===l.WithholdDisplayStage.Business?a:f.getUserSubtitleText()||(f.forceDisplay?"":t);_&&(g=(0,h.jsx)(n.default,{text:_,location:p}));if("title"===p&&r.GK.supportsFeature(r.GK.F.VNAME_V_2)&&_!==t&&_!==a&&m)return(0,h.jsxs)("div",{className:c.default.wrapper,children:[(0,h.jsx)(i.EmojiText,{text:s.verifiedName,className:c.default.verifiedText,direction:"auto",ellipsify:!0,titlify:!0}),(0,h.jsx)("div",{className:c.default.icon,children:(0,h.jsx)(d.default,{name:"psa-verified"})}),g&&(0,h.jsx)("span",{className:c.default.divider,children:""}),g]});return g||null};var n=s(a(32756)),i=a(65417),r=a(7293),o=s(a(43725)),l=a(42931),d=s(a(23217)),u=a(49082),c=s(a(23992)),h=a(85893)},23425:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(94184)),i=a(67294),r=a(76716),o=a(84387),l=s(a(92741)),d=a(85893);class u extends i.PureComponent{constructor(){super(...arguments),this._videoRef=null,this._onPlayTriggered=!1,this.setRefVideo=e=>{const t=this._videoRef;t&&(this.props.listeners.remove(t,"playing",this.onPlay),this.props.listeners.remove(t,"pause",this._handlePause)),this._videoRef=e,e&&("srcObject"in e&&this.props.srcObject?e.srcObject=this.props.srcObject:this.props.src&&(e.src=this.props.src),this.props.listeners.add(e,"playing",this.onPlay),this.props.listeners.add(e,"pause",this._handlePause),this.props.autoPlay&&e.play())},this._handlePause=()=>{var e;null===(e=this._releaseAudioChannelClaim)||void 0===e||e.call(this)},this.onPlay=()=>{const e=this._videoRef;e&&(!0!==this.props.muted&&(this._releaseAudioChannelClaim=r.MainAudioChannel.claim(this,(()=>{!0===this.props.controls&&e.pause()}))),e.videoHeight&&e.videoWidth||this._onPlayTriggered||(this._onPlayTriggered=!0,e.pause(),e.play(),__LOG__(4,void 0,new Error,!0)`Neither the height nor the width of video should have zero value`,SEND_LOGS("non-zero height and width")),e.videoHeight&&e.videoWidth&&this.props.onPlay&&(this.props.onPlay(e),this._onPlayTriggered=!1))},this.onLoadedMetadata=e=>{this.props.onLoadedMetadata&&this.props.onLoadedMetadata(e)}}componentWillUnmount(){var e;null===(e=this._releaseAudioChannelClaim)||void 0===e||e.call(this)}underlyingVideo(){return this._videoRef}play(){const e=this._videoRef;(null==e?void 0:e.paused)&&e.play()}pauseAndReset(){const e=this._videoRef;e&&(e.currentTime=0,e.paused||e.pause())}getDuration(){return null==this._videoRef?null:this._videoRef.duration}render(){const e=this.props;return(0,d.jsx)("video",{ref:this.setRefVideo,className:(0,n.default)(l.default.video,e.className),muted:e.muted,controls:e.controls,controlsList:e.controlsList,width:e.width,height:e.height,loop:e.loop,onClick:e.onClick,onEnded:e.onEnded,onLoadedMetadata:this.onLoadedMetadata,style:e.style,children:e.children})}}u.displayName="Video";const c=(0,o.ListenerHOC)(u);t.default=class extends c{pauseAndReset(){return this.getComponent().pauseAndReset()}underlyingVideo(){return this.getComponent().underlyingVideo()}play(){return this.getComponent().play()}getDuration(){return this.getComponent().getDuration()}}},38090:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerState=void 0,t.YouTube=h;var n=s(a(48926)),i=s(a(81109)),r=s(a(18446)),o=a(67294),l=s(a(11062)),d=a(85893);function u(e){return(0,i.default)((0,i.default)({},e),{},{playerVars:(0,i.default)((0,i.default)({},e.playerVars),{},{autoplay:0,start:0,end:0})})}const c={UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3,CUED:5};function h(e){const{onReady:t,onError:a,onStateChange:s,onEnd:h,onPlay:f,onPause:p,onPlaybackRateChange:m,onPlaybackQualityChange:_,opts:g,videoId:v,id:C,className:S}=e,y=(0,o.useRef)(null),b=(0,o.useRef)(null),E=(0,o.useRef)([]),T=(0,o.useRef)(e),x=(0,o.useCallback)((e=>t(e)),[t]),M=(0,o.useCallback)((e=>a(e)),[a]),P=(0,o.useCallback)((e=>{switch(s(e),e.data){case c.ENDED:h(e);break;case c.PLAYING:f(e);break;case c.PAUSED:p(e)}}),[h,p,f,s]),A=(0,o.useCallback)((e=>m(e)),[m]),I=(0,o.useCallback)((e=>_(e)),[_]),w=(0,o.useCallback)((()=>{var e,t,a,s;const n=(0,i.default)((0,i.default)({},g),{},{videoId:v});b.current=(0,l.default)(y.current,n),E.current.push(b.current.on("ready",x),null===(e=b.current)||void 0===e?void 0:e.on("error",M),null===(t=b.current)||void 0===t?void 0:t.on("stateChange",P),null===(a=b.current)||void 0===a?void 0:a.on("playbackRateChange",A),null===(s=b.current)||void 0===s?void 0:s.on("playbackQualityChange",I))}),[M,I,A,x,P,g,v]);(0,o.useEffect)((()=>(w(),()=>{var e;E.current.filter(Boolean).forEach((e=>{var t;null===(t=b.current)||void 0===t||t.off(e)})),null===(e=b.current)||void 0===e||e.destroy()})),[]);const k=(0,o.useCallback)((()=>{var e,t;return null!==(e=null===(t=b.current)||void 0===t?void 0:t.destroy().then(w))&&void 0!==e?e:Promise.resolve()}),[w]),j=(0,o.useCallback)((0,n.default)((function*(){var e;const t=yield null===(e=b.current)||void 0===e?void 0:e.getIframe();C?null==t||t.setAttribute("id",C):null==t||t.removeAttribute("id"),S?null==t||t.setAttribute("class",S):null==t||t.removeAttribute("class")})),[S,C]),N=(0,o.useCallback)((()=>{var e,t;if(null==v)return void(null===(t=b.current)||void 0===t||t.stopVideo());let a,s,n=!1;"playerVars"in g&&(n=1===g.playerVars.autoplay,"start"in g.playerVars&&(a=g.playerVars.start),"end"in g.playerVars&&(s=g.playerVars.end));const i={videoId:v,startSeconds:a,endSeconds:s};var r;n?null===(r=b.current)||void 0===r||r.loadVideoById(i):null===(e=b.current)||void 0===e||e.cueVideoById(i)}),[g,v]);return(0,o.useEffect)((()=>{const t=T.current;(function(e,t){return e.id===t.id||e.className===t.className})(t,e)&&j(),function(e,t){return!(0,r.default)(u(e.opts),u(t.opts))}(t,e)&&k(),function(e,t){if(e.videoId!==t.videoId)return!0;const a=e.opts.playerVars||{},s=t.opts.playerVars||{};return a.start!==s.start||a.end!==s.end}(t,e)&&N(),T.current=e}),[e,k,j,N]),(0,d.jsx)("span",{className:e.containerClassName,children:(0,d.jsx)("div",{id:e.id,className:e.className,ref:y})})}t.PlayerState=c,h.defaultProps={id:null,className:null,opts:{playerVars:{}},containerClassName:"",onReady:()=>{},onError:()=>{},onPlay:()=>{},onPause:()=>{},onEnd:()=>{},onStateChange:()=>{},onPlaybackRateChange:()=>{},onPlaybackQualityChange:()=>{}}},48708:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,c.useModelValues)(e.mute,["isMuted"]);const t=(0,c.useModelValues)(e.chat,["id"]),a=(0,c.useModelValues)(e.groupMetadata,["participants"]),s=e=>{const t=a.participants.get(e.id);return!!(null==t?void 0:t.isAdmin)},f=e=>{(0,l.findChat)(e).then((e=>{e.quotedMsgAdminGroupJid=t.id,r.Cmd.openChatBottom(e)}))},p=e=>{f(e.id),r.Cmd.closeModal()},m=(0,h.jsx)("span",{role:"button",onClick:()=>{const e=a.participants.getAdmins();1!==e.length?r.Cmd.openModal((0,h.jsx)(o.default,{title:d.default.t(824),filter:s,onCancel:()=>r.Cmd.closeModal(),onSelect:p})):f(e[0].id)},className:i.default.adminBtn,children:n.default._("admins",null,{hk:"2HQmrC"})});return(0,h.jsx)(u.default,{id:151,params:{admins:m}})};var n=s(a(48360)),i=s(a(14237)),r=a(88102),o=s(a(29234)),l=a(50101),d=s(a(43725)),u=s(a(56074)),c=a(49082),h=a(85893)},36707:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.OrderDescription=p,t.OrderPreview=function(e){const{msg:t,onClick:a,theme:s}=e,{thumbnail:n,isSentByMe:r}=t;let o;n&&(o=(0,h.jsx)("div",{className:d.default.media,style:{backgroundImage:`url("data:image/jpeg;base64,${n}")`}}));const l=(0,i.default)(d.default.preview,{[d.default.bubbleIn]:!r&&"quoted"!==s,[d.default.bubbleOut]:r||"quoted"===s,[d.default.quoted]:"quoted"===s});return(0,h.jsxs)("div",{className:l,onClick:a,children:[o,(0,h.jsxs)("div",{className:d.default.body,children:[(0,h.jsx)(f,{msg:t}),(0,h.jsx)(p,{msg:t})]})]})},t.OrderTitle=f;var i=n(a(94184)),r=s(a(74764)),o=a(65417),l=n(a(43725)),d=n(a(72815)),u=a(64551),c=n(a(23217)),h=a(85893);function f(e){const{msg:t}=e;let a;if(u.ServerProps.webCartV11OrderMessageChanges){const e=l.default.t(679,{count:t.itemCount||0,_plural:t.itemCount||0});a=(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(c.default,{className:d.default.titleIcon,name:"shopping-cart"}),(0,h.jsx)(o.EmojiText,{text:e})]})}else a=(0,h.jsx)(o.EmojiText,{text:t.orderTitle});return(0,h.jsx)("div",{className:d.default.title,children:a})}function p(e){const{msg:t,showMessage:a}=e,{totalAmount1000:s,totalCurrencyCode:n,itemCount:i}=t;let f=null;if(u.ServerProps.webCartV11OrderMessageChanges&&null!=s&&null!=n&&""!==n){const e=l.default.t(1010,{total:r.formatAmount1000(n,s)});f=(0,h.jsx)(o.EmojiText,{text:e})}else if(!u.ServerProps.webCartV11OrderMessageChanges){const e=l.default.t(679,{count:i||0,_plural:i||0});f=(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(c.default,{className:d.default.descriptionIcon,name:"shopping-cart"}),(0,h.jsx)(o.EmojiText,{text:e})]})}const p=!0===a?(0,h.jsx)(o.EmojiText,{text:t.message}):null;return(0,h.jsxs)("div",{children:[(0,h.jsx)("div",{className:d.default.description,children:f}),p]})}},24667:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{msg:t,onClick:a}=e;const{list:s,isSentByMe:f,dir:p,productListHeaderImage:m}=(0,u.useModelValues)(t,["list","isSentByMe","dir","productListHeaderImage"]),[_,g]=(0,c.default)(a);if(null==s)return null;const v=null!=m?(0,h.jsx)("div",{alt:"",className:d.default.media,style:{backgroundImage:`url(${(0,l.convertToDataURI)(m)})`}}):null,C=(0,h.jsx)("div",{className:d.default.title,children:(0,h.jsx)(r.EmojiText,{text:s.title,ellipsify:!0})}),S=o.default.t(679,{count:t.productListItemCount||0,_plural:t.productListItemCount||0}),y=(0,h.jsx)(r.EmojiText,{text:S,direction:p,ellipsify:!0}),b=(0,i.default)(d.default.preview,{[d.default.bubbleOut]:f});return(0,h.jsxs)("div",(0,n.default)((0,n.default)({},g),{},{className:b,ref:_,children:[v,(0,h.jsxs)("div",{className:d.default.body,children:[C,(0,h.jsx)("div",{className:d.default.description,children:y})]})]}))};var n=s(a(81109)),i=s(a(94184)),r=a(65417),o=s(a(43725)),l=a(81309),d=s(a(16193)),u=a(49082),c=s(a(60265)),h=a(85893)},58660:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,c.useModelValues)(e.contact,["id","verifiedLevel","formattedName"]),a=(0,c.useModelValues)(e.businessProfile,["stale","structuredAddress","description"]),{id:s,formattedName:f,verifiedLevel:p}=t;let m,_,g,v;if(a.stale)g=(0,h.jsx)("div",{children:(0,h.jsx)(d.Spinner,{size:20,stroke:5})});else{const e=a.structuredAddress&&(e=>{const{streetAddress:t,localizedCityName:a,zipCode:s}=e;return t&&a&&s?o.default.t(256,{streetAddress:t,city:a,zipCode:s}):t&&a?o.default.t(255,{streetAddress:t,city:a}):t})(a.structuredAddress);e&&(m=(0,h.jsx)("div",{className:l.default.address,children:(0,h.jsx)(r.EmojiText,{selectable:!0,direction:"auto",text:e})})),a.description&&(_=(0,h.jsx)("div",{className:l.default.description,title:a.description,children:(0,h.jsx)(r.EmojiText,{selectable:!0,direction:"auto",text:a.description})}))}p===n.default.VERIFIED_LEVEL.HIGH&&(v=(0,h.jsx)("div",{className:l.default.badge,children:(0,h.jsx)(u.default,{name:"psa-verified"})}));return(0,h.jsxs)("div",{className:l.default.container,onClick:e.onClick,children:[(0,h.jsxs)("div",{className:l.default.image,children:[(0,h.jsx)(i.DetailImage,{id:s,size:55}),v]}),(0,h.jsxs)("div",{className:l.default.body,children:[(0,h.jsx)("div",{className:l.default.name,children:f}),g,m,_]})]})};var n=s(a(69618)),i=a(88984),r=a(65417),o=s(a(43725)),l=s(a(64628)),d=a(11054),u=s(a(23217)),c=a(49082),h=a(85893)},72345:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ChangeNumberNotification=function(e){const t=(0,m.useModelValues)(e.chat,["changeNumberOldJid","changeNumberNewJid","id","showChangeNumberNotification"]),a=()=>{const{changeNumberNewJid:e}=t,a=t.id;C((0,n.default)(e,"changeNumberNewJid"),a)},s=()=>{t.sendDismissChangeNumber()},{changeNumberOldJid:d,changeNumberNewJid:u,id:S}=t,y=void 0===d&&void 0!==u,b=void 0!==d&&void 0===u,E=(0,r.useMemo)((()=>{const e=d||S,t=c.ContactCollection.get(e),a=(null==t?void 0:t.isMyContact)?t.formattedName:(0,g.default)(e);return b?f.default.t(288,{name:a}):f.default.t(289,{name:a})}),[d,S,b]);let T=null;if(t.showChangeNumberNotification){const e=y?(0,v.jsx)("div",{className:l.default.messageNewNumberButton,children:(0,v.jsx)(o.default,{onClick:a,type:"plain-white",nowrap:!0,children:i.default._("Message new number",null,{hk:"4pjpb0"})})}):null;T=(0,v.jsx)(h.default,{onClose:s,children:(0,v.jsxs)("div",{className:l.default.container,children:[(0,v.jsx)(p.TextSpan,{theme:"plain",className:l.default.text,children:E}),e]})})}return(0,v.jsx)(_.default,{transitionName:"butterbar",children:T})},t.onChangeNumberNotificationClick=C;var n=s(a(45095)),i=s(a(48360)),r=a(67294),o=s(a(39770)),l=s(a(80475)),d=a(69951),u=a(88102),c=a(19380),h=s(a(84518)),f=s(a(43725)),p=a(13923),m=a(49082),_=s(a(41956)),g=s(a(39938)),v=a(85893);function C(e,t){const a=d.ChatCollection.gadd(e);a.changeNumberOldJid||(a.changeNumberOldJid=t),a.changeNumberNewJid=void 0,u.Cmd.openChatFromUnread(a).then((e=>{e&&u.Cmd.focusChatTextInput(a)}))}},29250:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasText=function(){return a},t.setHasText=function(e){a=e};let a=!1},21518:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(48926)),r=n(a(81109)),o=a(89385),l=a(50796),d=n(a(45095)),u=a(57319),c=n(a(99964)),h=n(a(45120)),f=n(a(94184)),p=a(67294),m=n(a(70714)),_=n(a(91962)),g=n(a(79013)),v=n(a(44395)),C=a(32826),S=a(11933),y=a(88102),b=a(19773),E=n(a(31079)),T=a(56512),x=n(a(52665)),M=n(a(69618)),P=n(a(77365)),A=n(a(5354)),I=n(a(94908)),w=a(24808),k=a(65100),j=s(a(64103)),N=n(a(18561)),O=a(1063),R=n(a(54995)),D=a(99234),L=n(a(46220)),B=n(a(72451)),F=a(7293),G=a(57701),U=a(29250),V=a(55414),H=s(a(36638)),K=n(a(56165)),q=n(a(43725)),W=n(a(51845)),Y=n(a(75820)),z=s(a(86688)),Q=a(84387),$=a(61596),X=n(a(11339)),J=n(a(34949)),Z=a(24264),ee=n(a(81880)),te=a(92157),ae=a(371),se=n(a(24317)),ne=n(a(63639)),ie=a(35863),re=n(a(35072)),oe=a(51906),le=n(a(15554)),de=a(99960),ue=a(70597),ce=n(a(8694)),he=n(a(51577)),fe=a(85330),pe=a(5524),me=n(a(40639)),_e=n(a(65932)),ge=a(31019),ve=n(a(23217)),Ce=a(97628),Se=n(a(4478)),ye=a(50452),be=a(18644),Ee=n(a(74460)),Te=a(2541),xe=a(19529),Me=n(a(64099)),Pe=n(a(41956)),Ae=a(77591),Ie=a(85893);const we=/^https?:\/\/media\.giphy\.com\/media\/([a-zA-Z0-9]+)/,ke=parseInt(K.default["-overlay-border-left"].replace(/px$/,""),10);class je extends p.PureComponent{constructor(e){var t;super(e),t=this,this._height=0,this._pendingLinkPreviewPromises=[],this._pendingPreviewsAbortController=new m.default,this._pasteTriggeredOnChange=!1,this._wasCleared=!1,this._refUie=(0,p.createRef)(),this._refContainer=(0,p.createRef)(),this._refComposeBlock=(0,p.createRef)(),this._refInputHotkey=(0,p.createRef)(),this._refComposeBoxInput=(0,p.createRef)(),this._refPanels=(0,p.createRef)(),this._refStickerFilePicker=(0,p.createRef)(),this._dismissVcardPanel=()=>{(0,ge.unproxy)(this.props.chat).dismissVcard()},this._saveComposeContent=()=>{this.props.chat.setComposeContents({text:this._text,selection:this._selection,omittedURL:this._omittedURL,ctwaContextLinkData:this.state.ctwaContextLinkData,ctwaContext:this.state.ctwaContextData,editorStateJSON:null})},this._onTextSizeChange=e=>{this.setState({textsize:e})},this._pasteEmojiInput=e=>{if(" "===e&&!this._hasText())return y.Cmd.scrollMessages();this._focusInput(!0),this._replaceInputSelection(e)},this._handleRoutedPaste=e=>{var t;this._focusInput(!0),null===(t=this._refComposeBoxInput.current)||void 0===t||t.onPaste(e)},this._handleQuickRepliesToggle=()=>{this.setState({isQuickRepliesMenu:!0});const e=this._refComposeBoxInput.current,{chat:t}=this.props,a=t.getComposeContents().text||"";if(t&&e)if(a.length&&"/"===a.slice(-1)){const t=window.getSelection();this._focusInput(!0),(0,he.default)(t,1),e.deleteSelection()}else a.length&&" "===a.slice(-1)||y.Cmd.pasteChatTextInput(t," "),y.Cmd.pasteChatTextInput(t,"/")},this._onQuickRepliesClose=()=>{this.setState({isQuickRepliesMenu:!1})},this._onMaxPasteExceeded=()=>{y.Cmd.openModal((0,Ie.jsx)(x.default,{title:q.default.t(846),onOK:()=>{y.Cmd.closeModal()},okText:q.default.t(1765),children:q.default.t(845)}))},this._focusInput=e=>{var t;null===(t=this._refComposeBoxInput.current)||void 0===t||t.focus(e)},this._resetInput=()=>{var e;null===(e=this._refComposeBoxInput.current)||void 0===e||e.reset()},this._replaceInputSelection=e=>{var t;null===(t=this._refComposeBoxInput.current)||void 0===t||t.replaceSelection(e)},this._restoreFocus=()=>{this._focusInput()},this._clearLinkPreview=()=>{this._preview=null,this._omitLinkPreview()},this._cancelPendingLinkPreviews=()=>{this._pendingLinkPreviewPromises=[],this._pendingPreviewsAbortController.abort(),this._pendingPreviewsAbortController=new m.default,!0===this.state.isLoadingLinkPreview&&this.setState({isLoadingLinkPreview:!1})},this._omitLinkPreview=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!0!==e&&t.state.linkPreview&&(t._omittedURL=t._preview,t.setState({linkPreview:null}))},this._omitQuotedPreview=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!0!==e&&(t.props.chat.composeQuotedMsg=null)},this._omitQuotedMsgAdminGroupNamePreview=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!0!==e&&(t.props.chat.quotedMsgAdminGroupJid=null)},this._findFirstWebLink=()=>{const e=(0,b.removeCodeBlocks)(this._text);return z.findLinks(e,!0)[0]},this._uploadHQPreview=(e,t)=>{const{thumbnailHQ:a}=e.data;return a?J.default.createFromBase64Jpeg(a).then((e=>(0,Ee.default)({thumbnail:e,mediaType:$.MEDIA_TYPES.THUMBNAIL_LINK,mediaKeyInfo:(0,le.default)(),uploadOrigin:(0,L.default)(this.props.chat),forwardedFromWeb:!1,signal:t,timeout:M.default.MMS_THUMBNAIL_UPLOAD_TIMEOUT}))).then((t=>{const a=t.mediaEntry;if(!a)return;const s={mediaKey:a.mediaKey,mediaKeyTimestamp:a.mediaKeyTimestamp,thumbnailDirectPath:a.directPath,thumbnailSha256:t.filehash,thumbnailEncSha256:a.encFilehash};if(this.state.linkPreview&&this.state.linkPreview.url===e.url){const t=(0,r.default)((0,r.default)({},e),{},{data:(0,r.default)((0,r.default)({},e.data),s)});this.setState({linkPreview:t})}})).catch((0,o.catchAbort)((()=>{}))).catch((()=>{__LOG__(2)`Full preview upload has failed: `})):Promise.resolve()},this._scanForLinksTimer=new u.ShiftTimer((()=>{if(!this.state.hasText||this.state.ctwaContextLinkData)return void this._clearLinkPreview();const e=this._findFirstWebLink();if(!e)return void this._clearLinkPreview();const t=e.url;if(this._preview&&this._preview===t)return;this._preview=t,this._omittedURL=null;const a=this._pendingPreviewsAbortController.signal,s=(0,Y.default)(t,!0).then((e=>{if(a.aborted)throw new o.AbortError;if(e&&this._preview&&this._preview===e.url&&e.data&&(e.data.title||e.data.description))return this.setState({linkPreview:e}),this._uploadHQPreview(e,a)}));this._pendingLinkPreviewPromises.push(s),s.catch((0,l.filteredCatch)([j.Unmount,Ae.WebdDrop],(()=>{}))).catch((0,o.catchAbort)((()=>{})))})),this._onInputFocus=()=>{this._indicateFocus(),this._addEmojisToTouchBar()},this._onInputBlur=()=>{this._removeEmojisFromTouchBar()},this._onVoiceRecordingSent=()=>{this._omitCtwa()},this._setChatCtwaContextLinkData=e=>{this.setState({ctwaContextLinkData:e,ctwaContextData:null},(()=>{this._updateCtwaContextState(e)}))},this._setChatMsgSentLogAttributes=e=>{this.setState({msgSentLoggingAttributes:e})},this._omitCtwa=()=>{this.setState({ctwaContextLinkData:null,ctwaContextData:null},(()=>{this._saveComposeContent(),this._scanForLinksTimer.onOrBefore(1)}))},this._indicateFocus=()=>{var e;null===(e=this._refUie.current)||void 0===e||e.activate(),h.default.maybeIndicateFocus(this._refInputHotkey.current,K.default.focusAnimation),this._focusInput(!1)},this._addEmojisToTouchBar=()=>{},this._removeEmojisFromTouchBar=()=>{},this._onPageUpDown=e=>{this.props.onPageUpDown&&(e.stopPropagation(),this.props.onPageUpDown(e),this._restoreFocusTimer.debounce(0))},this._restoreFocusTimer=new u.ShiftTimer((()=>{this._focusInput(!1)})),this._handleEmoji=e=>{this._replaceInputSelection(e)},this._handleGif=(e,t,a)=>{const s=(0,N.default)(e,{headers:{Accept:"video/mp4"}}).then((e=>{if(!e.ok)throw __LOG__(3)`failed loading gif (status: ${e.status})`,new j.MediaFileFailedLoad;return e.blob()})).then(function(){var e=(0,i.default)((function*(e){const{thumbs:[s],duration:n}=yield H.generateVideoThumbsAndDuration({file:e,maxDimensions:[M.default.IMG_THUMB_MAX_EDGE],debugHint:"handleGif"});return{file:e,filename:t,mimetype:e.type,isGif:!0,gifAttribution:a,fullPreview:window.URL.createObjectURL(e),fullPreviewSize:{width:s.fullWidth,height:s.fullHeight},preview:Te.URL.parseDataURL(s.url).data,duration:n}}));return function(){return e.apply(this,arguments)}}());return this.saveComposeContentDebounced.flush(),y.Cmd.attachMediaDrawer({chat:this.props.chat,attachments:[s],initCaption:this.getCurrentComposeContent(),fileOrigin:X.default.MEDIA_PICKER_ORIGIN_TYPE.CHAT_GIF_INAPP,onComplete:(e,t)=>{this.updateTextAfterMediaDrawerClose(e,t),e&&this._closeEmojiPanel()}}),s.catch((()=>{})),s},this._handlePanelsDisplayCache=e=>{this._panelsDisplayCache=e},this._handlePanelsGif=(e,t)=>{this._handleGif(e,e,t)},this._handlePanelsSticker=(e,t)=>{if(e.isCreateButton){var a;new X.default.WebcStickerMakerEvents({stickerMakerEventName:X.default.WEBC_STICKER_MAKER_EVENT_NAME_TYPE.STICKER_MAKER_BUTTON_TAP}).commit(),null===(a=this._refStickerFilePicker.current)||void 0===a||a.open()}else{const{chat:a}=this.props,s=a.composeQuotedMsg,n=(0,te.prepareCtwaContextSend)(this.state.ctwaContextLinkData,this.state.ctwaContextData);(0,fe.sendStickerToChat)(a,e,{stickerSendOrigin:t,quotedMsg:s,ctwaContext:n}),a.composeQuotedMsg=null,this._omitCtwa()}},this._handlePanelsStickerFilePick=e=>{if(!e)return;e.stopPropagation();const t=null==e.target.files?[]:Array.from(e.target.files);t.length&&(new X.default.WebcStickerMakerEvents({stickerMakerEventName:X.default.WEBC_STICKER_MAKER_EVENT_NAME_TYPE.IMAGE_UPLOADED}).commit(),y.Cmd.attachMediaDrawer({chat:this.props.chat,attachments:t.map((e=>({file:e,stickerMaker:!0}))),fileOrigin:X.default.MEDIA_PICKER_ORIGIN_TYPE.CHAT_PHOTO_LIBRARY,sendAsSticker:!0}))},this._handlePanelsFocusRelease=()=>{h.default.shouldIndicateFocus(),this._restoreFocus()},this._closeEmojiPanel=()=>{this._setSelectedPanelId(null),this._restoreFocus()},this._onPTTRecState=e=>{this.setState({recording:e})},this._preventBlur=e=>{var t;let{target:a}=e;const s=null===(t=this._refComposeBoxInput.current)||void 0===t?void 0:t.getRefInput(),n=(0,d.default)(this._refContainer.current,"this._refContainer.current");do{if(a===s)return}while(a!==n&&a instanceof HTMLElement&&(a=a.parentNode));Re(e),this._focusInput(!1)},this._onChange=e=>{let t=!1;{const a=(0,d.default)(this._refComposeBlock.current,"this._refComposeBlock.current").clientHeight,s=a-this._height;s&&this.props.onComposeHeightChange({input:s},!1),this._height=a;const n=this._hasText();this._text=e||"",""===e&&(this._wasCleared=!0),t=this._hasText(),t!==n&&this.setState({hasText:t})}t?(this.props.chat.presence.subscribe().catch((0,l.filteredCatch)(Ae.WebdDrop,(()=>{}))),(0,ae.markComposing)(this.props.chat),(0,k.eagerlyEstablishE2EESessionWhenTyping)(this.props.chat)):(0,ae.markPaused)(this.props.chat);const a=this._findFirstWebLink();(!a&&this._preview||a&&a.url!==this._preview)&&this._clearLinkPreview(),this._pasteTriggeredOnChange?this._scanForLinksTimer.onOrBefore(1):this._scanForLinksTimer.debounce(700),this._pasteTriggeredOnChange=!1,this.saveComposeContentDebounced()},this._startRecording=(0,i.default)((function*(){var e;const a=null!==(e=t.props.chat.pttRecordingSession)&&void 0!==e?e:(0,ue.createRecordingSession)({chat:(0,ge.unproxy)(t.props.chat)});let s;t.setState({recordingSession:a,pttComposerActive:!1});try{s=yield a.start()}finally{const e=s?a:null;t.props.chat.pttRecordingSession=e,t.setState({recordingSession:e,pttComposerActive:null!=e})}})),this._renderSendButton=()=>{const e=B.default&&window.AudioContext,{hasText:t}=this.state;return!t&&e?(0,Ie.jsx)(ne.default,{disabled:null!=this.state.recordingSession,onConfirm:()=>{this._startRecording()}}):(0,Ie.jsx)("button",{"data-a8n":c.default.key("compose-btn-send"),className:K.default.btnSend,onClick:this._onSendText,disabled:!t,children:(0,Ie.jsx)(ve.default,{name:"send",directional:!0})})},this._renderPopupPanel=()=>{let e;if(this.state.linkPreview){const{title:t,canonicalUrl:a,description:s,thumbnail:n}=this.state.linkPreview.data;e=(0,Ie.jsx)(g.default,{children:(0,Ie.jsx)(be.UIE,{displayName:"ComposeBoxLinkPreview",escapable:!0,requestDismiss:this._omitLinkPreview,children:(0,Ie.jsx)(ee.default,{onOmit:this._omitLinkPreview,children:(0,Ie.jsx)(W.default,{title:t,compose:!0,canonicalUrl:a,description:s,thumbnailJpeg:n})})})})}const t=this.props.chat.composeQuotedMsg,a=this.props.chat.quotedMsgAdminGroupJid,s=this.props.chat.composeQuotedMsgRemoteJid;let n;t?n=(0,Ie.jsx)(g.default,{children:(0,Ie.jsx)(be.UIE,{displayName:"ComposeBoxQuotedMsg",escapable:!0,requestFocus:this._restoreFocus,requestDismiss:this._omitQuotedPreview,children:(0,Ie.jsx)(ee.default,{onOmit:this._omitQuotedPreview,children:(0,Ie.jsx)(re.default,{msg:t.safe(),composeQuotedMsgRemoteJid:s,theme:"composeBox",chat:t.chat},t.id.toString())})})}):a&&(n=(0,Ie.jsx)(g.default,{children:(0,Ie.jsx)(be.UIE,{displayName:"QuotedMsgAdminGroupName",escapable:!0,requestFocus:this._restoreFocus,requestDismiss:this._omitQuotedPreview,children:(0,Ie.jsx)(ee.default,{onOmit:this._omitQuotedMsgAdminGroupNamePreview,children:(0,Ie.jsx)(oe.QuotedMsgAdminGroupName,{isComposePreview:!0,quotedGroupJid:a},a.toString())})})}));const i=(0,ge.unproxy)(this.props.chat),r=!i.isPSA&&i.shouldAppearInList&&i.msgs&&i.msgs.length>0;let o=null;if(r){const e=C.BlocklistCollection.get(i.id),t=i.getReceivedVcardMsgs();Boolean(!e&&(null==t?void 0:t.length)&&!i.vcardDismissed)&&(o=(0,Ie.jsx)(g.default,{children:(0,Ie.jsx)(Me.default,{chat:i,dismissVcardPanel:this._dismissVcardPanel})}))}let l=null;!i.trusted&&r&&null==o&&(l=(0,Ie.jsx)(g.default,{children:(0,Ie.jsx)(me.default,{chat:i,contact:i.contact})}));let d,u=null;return this.state.selectedPanelId&&null!=this.state.width&&(u=(0,Ie.jsx)(g.default,{children:(0,Ie.jsxs)(ce.default,{onResize:this._handleResize,children:[(0,Ie.jsx)(T.ComposeBoxPanelsLoadable,{displayCache:this._panelsDisplayCache,width:this.state.width,onDisplayCache:this._handlePanelsDisplayCache,onEmoji:this._handleEmoji,onFocusRelease:this._handlePanelsFocusRelease,onGif:this._handlePanelsGif,onPanelChange:this._handlePanelChange,onSticker:this._handlePanelsSticker,requestDismiss:this._closeEmojiPanel,forwardedRef:e=>{this._refPanels.current=e},selectedPanelId:this.state.selectedPanelId,theme:Z.PanelsMenuTheme.ChatComposeBox}),(0,Ie.jsx)(R.default,{ref:this._refStickerFilePicker,mimes:M.default.IMAGE_MIMES,onChange:this._handlePanelsStickerFilePick,multiple:!1})]})})),this.state.ctwaContextLinkData&&(d=(0,Ie.jsx)(g.default,{children:(0,Ie.jsx)(be.UIE,{displayName:"ComposeBoxCtwaContextPreview",escapable:!0,requestDismiss:this._omitCtwa,children:(0,Ie.jsx)(ee.default,{onOmit:this._omitCtwa,children:(0,Ie.jsx)(I.default,{context:this.state.ctwaContextData,sourceUrl:this.state.ctwaContextLinkData.sourceUrl,compose:!0})})})})),(0,Ie.jsx)("div",{className:K.default.positioningContainer,children:(0,Ie.jsx)("div",{className:K.default.overlayContainer,children:(0,Ie.jsxs)(_.default,{onHeightChange:this._onHeightChange,children:[l,o,u,n,e,d]})})})},this._onHeightChange=function(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.props.onComposeHeightChange({overlay:e},a)},this._onFiles=e=>{const t=e.getFiles().filter((e=>{const t=(0,O.typeFromMimetype)(e.type);return"image"===t||"video"===t}));if(e.hasType("text/html")){const t=e.getData("text/html");if(t){if(t.includes("<meta name=ProgId content=PowerPoint.Slide>"))return!1;const e=t.includes("urn:schemas-microsoft-com:office"),a=t.includes("urn:schemas-microsoft-com:office:excel");if(e&&!a)return!1}}if(t.length)return this.saveComposeContentDebounced.flush(),y.Cmd.attachMediaDrawer({chat:this.props.chat,attachments:t.map((e=>({file:e}))),fileOrigin:X.default.MEDIA_PICKER_ORIGIN_TYPE.PASTE,initCaption:this.getCurrentComposeContent(),onComplete:this.updateTextAfterMediaDrawerClose}),!0},this.updateTextAfterMediaDrawerClose=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{initCaptionUsed:s}=a;e&&s&&t._resetInput(),e&&t._omitCtwa()},this.getCurrentComposeContent=()=>this.props.chat.getComposeContents(),this._onTextPaste=e=>{const t=we.exec(e);if(t){const a=`https://media.giphy.com/media/${t[1]}/200w.mp4`;return this._handleGif(a,e,w.VideoMessageAttribution.GIPHY).catch((()=>{var t;y.Cmd.closeDrawerMid(),this._focusInput(!0),null===(t=this._refComposeBoxInput.current)||void 0===t||t.replaceSelection(e),y.Cmd.openToast((0,Ie.jsx)(ye.Toast,{msg:q.default.t(799),id:(0,ye.genId)()}))})),!0}return this._pasteTriggeredOnChange=!0,!1},this._onSelectionChange=e=>{this._selection=e},this._hasText=()=>{const e=this._text.trim().length>0;return(0,U.setHasText)(e),e},this._onEnter=e=>{e.repeat||this._onSendText()},this._onSendText=()=>{var e;(0,de.reconnect)();const t=this._refComposeBoxInput.current,{chat:a}=this.props;if(!t)return;const s=t.serialize(),[n,i]=[s[0].trim(),s[1]];if(0===n.length&&!this.state.ctwaContextLinkData)return;this._cancelPendingLinkPreviews();const r=a.composeQuotedMsg,o=a.quotedMsgAdminGroupJid;let l,d;(0,G.communitiesEnabled)()&&(l=void 0,d=void 0);const u=null===(e=this.state.linkPreview)||void 0===e?void 0:e.data,c=i.mentionedJidList||[],h=(0,te.prepareCtwaContextSend)(this.state.ctwaContextLinkData,this.state.ctwaContextData),f=this._wasCleared;this._setSelectedPanelId(null),this.setState({hasText:!1,linkPreview:null},(()=>{if(f){const e=(0,ge.unproxy)(a);e.urlText&&(e.urlText=void 0)}(0,pe.sendTextMsgToChat)(a,n,{linkPreview:u,quotedMsg:r,mentionedJidList:c,quotedMsgAdminGroupJid:o,quotedMsgAdminGroupSubject:l,quotedMsgAdminParentGroupJid:d,ctwaContext:h}),this._wasCleared=!1})),this._omitCtwa(),null!=this.state.msgSentLoggingAttributes&&(0,G.smbClickToChatLoggingEnabled)()&&(new X.default.DeepLinkMsgSent({deepLinkAction:X.default.DEEP_LINK_ACTION.MSG_SENT,deepLinkSessionId:this.state.msgSentLoggingAttributes.sessionId}).commit(),this.setState({msgSentLoggingAttributes:void 0})),a.composeQuotedMsg=null,a.quotedMsgAdminGroupJid=null,a.composeQuotedMsgRemoteJid=null,a.setComposeContents({}),this._resetInput(),this._text="",this._hasText()},this._handlePanelChange=e=>{this._setSelectedPanelId(e),null!=e&&(0,D.setLastComposeBoxPanel)(e)},this._handleTab=e=>{var t;this.state.selectedPanelId&&(null===(t=this._refPanels.current)||void 0===t||t.restoreFocus(!0),Re(e))},this._handleResize=e=>{let{width:t}=e;this.state.width!==t&&this.setState({width:t})},this._closePttComposer=()=>{this.props.chat.pttRecordingSession=null,this.setState({recordingSession:null,pttComposerActive:!1},(()=>{this._restoreFocus()}))};const{chat:a}=e,s=a.getComposeContents();this._text=s.text||"",this._selection=s.selection,this._preview=this._omittedURL=s.omittedURL,this.saveComposeContentDebounced=this.props.debounce(this._saveComposeContent,200),this.state={hasText:!!this._text,recording:!1,linkPreview:null,isLoadingLinkPreview:!1,recordingSession:a.pttRecordingSession,pttComposerActive:null!=a.pttRecordingSession,selectedPanelId:null,isQuickRepliesMenu:!1,textsize:P.default.get().textsize,width:null,ctwaContextLinkData:s.ctwaContextLinkData,ctwaContextData:s.ctwaContext}}componentDidMount(){const{listeners:e,chat:t}=this.props;if(this.props.listeners.add(C.BlocklistCollection,"add remove reset",(()=>{this.forceUpdate()})),F.GK.supportsFeature(F.GK.F.INDEX_RECEIVED_VCARD)){const a=t.getReceivedVcardMsgs();a&&e.add(a,"add remove reset",(()=>{this.forceUpdate()}))}this._height=(0,d.default)(this._refComposeBlock.current,"this._refComposeBlock.current").clientHeight,this._scanForLinksTimer.debounceAndCap(50,50);const{ctwaContextLinkData:a}=this.state;!a||this.state.ctwaContextData&&this.state.ctwaContextData.sourceUrl===a.sourceUrl||this.setState({ctwaContextData:null},(()=>{this._updateCtwaContextState(a)}))}componentWillUnmount(){this._scanForLinksTimer.cancel(),this._pendingLinkPreviewPromises=[],this._pendingPreviewsAbortController.abort(),this._restoreFocusTimer.cancel(),this._saveComposeContent(),this._removeEmojisFromTouchBar()}_updateCtwaContextState(e){this._saveComposeContent(),this._clearLinkPreview();e.sourceUrl&&(0,ie.fetchCtwaContextData)(e).then((e=>{this.setState({ctwaContextData:e},(()=>{this._saveComposeContent()}))})).catch((e=>{__LOG__(3)`Unable to retrieve CTWA context data, error: ${e}`}))}_setSelectedPanelId(e){const t=null==this.state.selectedPanelId&&null!=e;this.setState({selectedPanelId:e,width:t&&null!=this._refComposeBlock.current?this._refComposeBlock.current.offsetWidth-ke:this.state.width})}_renderInput(){return(0,Ie.jsx)(E.default,{a8n:"conversation-compose-box-input",placeholder:q.default.t(1361),readOnly:null!=this.state.recordingSession,ref:this._refComposeBoxInput,initialValue:this._text,initialSelection:this._selection,spellCheck:!0,multiline:!0,maxLength:M.default.MAX_TXT_MSG_SIZE,onMaxPasteExceeded:this._onMaxPasteExceeded,onEnter:this._onEnter,onFiles:this._onFiles,onTextPaste:this._onTextPaste,onChange:this._onChange,onSelect:this._onSelectionChange,textPasteMimePriority:[S.APP_TEXT_MIMETYPE,"text/plain"],theme:"compose",title:q.default.t(1361)})}_renderPttComposer(){return this.state.pttComposerActive?(0,Ie.jsx)("div",{className:K.default.pttComposerContainer,children:(0,Ie.jsx)(se.default,{recordingSession:(0,d.default)(this.state.recordingSession,"this.state.recordingSession"),onComplete:this._closePttComposer})}):null}_renderMessageComposer(){return this.state.pttComposerActive?null:(0,Ie.jsxs)("div",{className:K.default.textMessageComposerContainer,children:[(0,Ie.jsxs)("div",{className:(0,f.default)(K.default.childPadding,K.default.boxPanelWrapper),children:[(0,Ie.jsx)(Z.ComposeBoxPanelsMenu,{selectedPanelId:this.state.selectedPanelId,onChange:this._handlePanelChange,theme:Z.PanelsMenuTheme.ChatComposeBox}),(0,Ie.jsx)("div",{className:K.default.attachButtonContainer,children:(0,Ie.jsx)(v.default,{chat:(0,ge.unproxy)(this.props.chat),getComposeContents:this.getCurrentComposeContent,onMenuComplete:this.updateTextAfterMediaDrawerClose})})]}),(0,Ie.jsxs)("div",{className:K.default.textMessageComposerInputContainer,children:[(0,Ie.jsx)(V.HotKeys,{onRef:e=>{this._refInputHotkey.current=e},className:(0,f.default)(K.default.inputContainer,{[K.default.disabled]:this.state.recording}),handlers:{tab:this._handleTab,"shift+tab":this._handleTab},onFocus:this._onInputFocus,onBlur:this._onInputBlur,children:this._renderInput()}),(0,Ie.jsx)("div",{className:(0,f.default)(K.default.childPadding,K.default.sendButtonContainer),children:this._renderSendButton()})]})]})}render(){return(0,Ie.jsx)(be.UIE,{displayName:"ComposeBox",ref:this._refUie,uimState:be.UIE.State.PASSIVE,requestFocus:this._restoreFocus,children:(0,Ie.jsxs)(V.HotKeys,{component:"footer",tabIndex:null,handlers:{pagedown:this._onPageUpDown,pageup:this._onPageUpDown},className:(0,f.default)(K.default.footer,{[K.default.pttComposerActive]:this.state.pttComposerActive}),onRef:e=>{this._refContainer.current=e},onContextMenu:this._preventBlur,onMouseDown:this._preventBlur,children:[null,(0,Ie.jsx)(A.default,{canCut:!0,className:(0,f.default)(K.default.blockCompose,De(this.state.textsize)),ref:this._refComposeBlock,children:(0,Ie.jsxs)("div",{className:K.default.mainContentContainer,children:[(0,Ie.jsx)(Pe.default,{transitionName:"pttComposer",children:this._renderPttComposer()}),(0,Ie.jsx)(Pe.default,{transitionName:"messageComposer",children:this._renderMessageComposer()})]})}),this._renderPopupPanel(),(0,Ie.jsx)(E.default.EmojiSuggestions,{chat:(0,ge.unproxy)(this.props.chat)}),(0,Ie.jsx)(Oe,{chatId:this.props.chat.id,restoreFocus:this._restoreFocus,pasteEmojiInput:this._pasteEmojiInput,handleRoutedPaste:this._handleRoutedPaste,onSendText:this._onSendText,onTextSizeChange:this._onTextSizeChange,setChatCtwaContextLinkData:this._setChatCtwaContextLinkData,setChatMsgSentLogAttributes:this._setChatMsgSentLogAttributes,handleQuickRepliesToggle:this._handleQuickRepliesToggle},this.props.chat.id.toString()),(0,Ie.jsx)(E.default.Suggestions,{chat:(0,ge.unproxy)(this.props.chat)}),(0,G.canSendQuickReply)()&&(0,Ie.jsx)(E.default.QuickRepliesSuggestions,{chat:(0,ge.unproxy)(this.props.chat),isOpenFromMenu:this.state.isQuickRepliesMenu,onClose:this._onQuickRepliesClose})]})})}}je.CONCERNS={chat:["id","trusted","composeContents","composeQuotedMsg","isPSA","isGroup","pttRecordingSession","shouldAppearInList","presence","contact","attachMediaContents","quotedMsgAdminGroupJid","receivedVcardMsgs","vcardDismissed","composeQuotedMsgRemoteJid"]},je.contextType=Ce.ThemeContext,je.displayName="ComposeBox";const Ne=(0,Se.default)((0,Q.ListenerHOC)((0,_e.default)(je,je.CONCERNS)));function Oe(e){const{chatId:t}=e;return(0,xe.useListener)(y.Cmd,`focus_chat_text_input_${t.toString()}`,e.restoreFocus),(0,xe.useListener)(y.Cmd,`paste_chat_text_input_${t.toString()}`,e.pasteEmojiInput),(0,xe.useListener)(y.Cmd,`send_paste_to_compose_${t.toString()}`,e.handleRoutedPaste),(0,xe.useListener)(y.Cmd,`enter_chat_text_input_${t.toString()}`,e.onSendText),(0,xe.useListener)(y.Cmd,`chat_set_sending_log_attributes_${t.toString()}`,e.setChatMsgSentLogAttributes),(0,xe.useListener)(y.Cmd,`chat_set_ctwa_context_link_data_${t.toString()}`,e.setChatCtwaContextLinkData),(0,xe.useListener)(y.Cmd,"focus_chat_text_input",e.restoreFocus),(0,xe.useListener)(y.Cmd,"textsize_change",e.onTextSizeChange),(0,xe.useListener)(y.Cmd,"quick_replies_toggle",e.handleQuickRepliesToggle),null}function Re(e){e&&(e.preventDefault(),e.stopPropagation())}function De(e){const t=M.default.TEXTSIZE_CLASS_MAP;for(let a=0;a<t.length;a++)if(t[a].scale===e)return t[a].classname}t.default=class extends Ne{constructor(){super(...arguments),this.updateTextAfterMediaDrawerClose=(e,t)=>{this.getComponent().updateTextAfterMediaDrawerClose(e,t)}}flushSaveComposeContentDebounced(){this.getComponent().saveComposeContentDebounced.flush()}getCurrentComposeContent(){return this.getComponent().getCurrentComposeContent()}}},8936:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PANELS=void 0;t.PANELS={EMOJI:"EMOJI",GIF:"GIF",STICKER:"STICKER"}},60425:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{forwardedRef:t}=e,a=(0,i.default)(e,v);return(0,g.jsx)(C,(0,n.default)({ref:t},a))};var n=s(a(81109)),i=s(a(6479)),r=a(67294),o=(a(57297),a(28325)),l=a(30424),d=a(30524),u=a(7293),c=s(a(7380)),h=a(8936),f=a(24264),p=a(64551),m=s(a(64894)),_=a(18644),g=a(85893);const v=["forwardedRef"];class C extends r.PureComponent{constructor(e){super(e),this.restoreFocus=e=>{switch(this.props.selectedPanelId){case h.PANELS.STICKER:this._refStickerPanel&&this._refStickerPanel.restoreFocus();break;case h.PANELS.GIF:this._refGifPanel&&this._refGifPanel.restoreFocus(e);break;case h.PANELS.EMOJI:default:this._refEmojiPanel&&this._refEmojiPanel.restoreFocus(e)}},this._setRefEmojiPanel=e=>{this._refEmojiPanel=e},this._setRefGifPanel=e=>{this._refGifPanel=e},this._setRefStickerPanel=e=>{this._refStickerPanel=e},this._setRefStickerPanelMd=e=>{this._refStickerPanel=e},this._handleEmojiPanelDisplayCache=e=>{this._emojiPanelDisplayCache=e,this._triggerDisplayCache()},this._handleEmojiPanelFocusNext=()=>{const e=this._isStatusReplyTheme?h.PANELS.STICKER:h.PANELS.GIF;this.props.onPanelChange(e)},this._handleEmojiPanelFocusPrev=()=>{this.props.onFocusRelease()},this._handleGifPanelDisplayCache=e=>{this._gifPanelDisplayCache=e,this._triggerDisplayCache()},this._handleTextChange=e=>{this.setState({searchText:e})},this._handleGifPanelFocusNext=()=>{this.props.onPanelChange(h.PANELS.STICKER)},this._handleGifPanelFocusPrev=()=>{this.props.onPanelChange(h.PANELS.EMOJI)},this._handleRequestFocus=()=>{this.restoreFocus(!1)},this._handleStickerPanelDisplayCache=e=>{this._stickerPanelDisplayCache=e,this._triggerDisplayCache()},this._handleStickerPanelFocusNext=()=>{this.props.onFocusRelease()},this._handleStickerPanelFocusPrev=()=>{const e=this._isStatusReplyTheme?h.PANELS.EMOJI:h.PANELS.GIF;this.props.onPanelChange(e)},e.displayCache&&(this._emojiPanelDisplayCache=e.displayCache.emojiPanel,this._gifPanelDisplayCache=e.displayCache.gifPanel,this._stickerPanelDisplayCache=e.displayCache.stickerPanel),this._isStatusReplyTheme=e.theme===f.PanelsMenuTheme.StatusReplyComposeBox,this.state={searchText:""}}_triggerDisplayCache(){this.props.onDisplayCache({emojiPanel:this._emojiPanelDisplayCache,gifPanel:this._gifPanelDisplayCache,stickerPanel:this._stickerPanelDisplayCache})}render(){let e=null;const t=this._isStatusReplyTheme?o.DisplayLocation.StatusV3ComposeBox:o.DisplayLocation.ComposeBox;switch(this.props.selectedPanelId){case h.PANELS.STICKER:u.GK.supportsFeature(u.GK.F.MD_BACKEND)?p.ServerProps.webServerStickerPanel&&(e=(0,g.jsx)(c.default,{ref:this._setRefStickerPanelMd,displayLocation:t,displayCache:this._stickerPanelDisplayCache,onChange:this._handleTextChange,defaultSearchText:this.state.searchText,onDisplayCache:this._handleStickerPanelDisplayCache,onFocusPrev:this._handleStickerPanelFocusPrev,onFocusNext:this._handleStickerPanelFocusNext,onSticker:this.props.onSticker})):e=(0,g.jsx)(m.default,{ref:this._setRefStickerPanel,displayCache:this._stickerPanelDisplayCache,displayLocation:t,onChange:this._handleTextChange,defaultSearchText:this.state.searchText,onDisplayCache:this._handleStickerPanelDisplayCache,onFocusPrev:this._handleStickerPanelFocusPrev,onFocusNext:this._handleStickerPanelFocusNext,onSticker:this.props.onSticker});break;case h.PANELS.EMOJI:default:e=(0,g.jsx)(l.EmojiPanel,{ref:this._setRefEmojiPanel,displayCache:this._emojiPanelDisplayCache,width:this.props.width,displayLocation:t,onChange:this._handleTextChange,defaultSearchText:this.state.searchText,onDisplayCache:this._handleEmojiPanelDisplayCache,onEmoji:this.props.onEmoji,onFocusPrev:this._handleEmojiPanelFocusPrev,onFocusNext:this._handleEmojiPanelFocusNext});break;case h.PANELS.GIF:e=(0,g.jsx)(d.GifPanel,{ref:this._setRefGifPanel,displayCache:this._gifPanelDisplayCache,onChange:this._handleTextChange,defaultSearchText:this.state.searchText,onDisplayCache:this._handleGifPanelDisplayCache,onFocusRelease:this.props.onFocusRelease,onFocusNext:this._handleGifPanelFocusNext,onFocusPrev:this._handleGifPanelFocusPrev,onGif:this.props.onGif})}return e&&(0,g.jsx)(_.UIE,{displayName:"ComposeBoxPanels",escapable:!0,requestDismiss:this.props.requestDismiss,requestFocus:this._handleRequestFocus,children:e})}}C.displayName="ComposeBoxPanels"},24264:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ComposeBoxPanelsMenu=function(e){const t=(0,r.useRef)(),a=(0,r.useRef)(),s=(0,r.useRef)(),h=(0,r.useRef)(),b=(0,r.useRef)(),E=e.theme===C.StatusReplyComposeBox,T=t=>{e.onChange(t)};(0,_.useListener)(l.Cmd,"open_compose_box_panel",T);const{readOnly:x}=e,M=Boolean(e.selectedPanelId),P=!c.GK.supportsFeature(c.GK.F.MD_BACKEND)||m.ServerProps.webServerStickerPanel,A=[v.button,e.buttonStyle];return(0,g.jsxs)("div",{"data-state":M?"open":"closed",ref:e=>{b.current=e},className:(0,o.default)(v.menu,S(e.theme,M,P)),children:[(0,g.jsx)(p.PanelsMenuButton,{"aria-label":i.default._("Close panel",null,{hk:"3ofbOg"}),xstyle:[A,M?v.visible:v.invisible],"data-tab":M&&!x?d.default.TAB_ORDERS.COMPOSE_BOX_MENU_BUTTON:null,icon:"x",onClick:()=>{e.onChange(null)},ref:t,size:p.SIZES.SQUARE24}),(0,g.jsx)(p.PanelsMenuButton,{"aria-label":i.default._("Open emojis panel",null,{hk:"3IEMY6"}),xstyle:[A],"data-a8n":n.default.key("compose-btn-emoji"),"data-tab":M||x?null:d.default.TAB_ORDERS.COMPOSE_BOX_MENU_BUTTON,icon:"smiley",isActive:e.selectedPanelId===f.PANELS.EMOJI,isMain:!0,onClick:()=>{Boolean(e.selectedPanelId)||E?T(f.PANELS.EMOJI):e.onChange((0,u.getLastComposeBoxPanel)()||f.PANELS.EMOJI)},ref:a,size:p.SIZES.SQUARE26,style:y(f.PANELS.EMOJI,M,e.theme)}),!E&&(0,g.jsx)(p.PanelsMenuButton,{"aria-label":i.default._("Open gif panel",null,{hk:"NE5Dz"}),xstyle:[v.button,M?v.visible:v.invisible],icon:"gif",isActive:e.selectedPanelId===f.PANELS.GIF,onClick:()=>T(f.PANELS.GIF),ref:s,size:p.SIZES.SQUARE26,style:y(f.PANELS.GIF,M,e.theme)}),P&&(0,g.jsx)(p.PanelsMenuButton,{"aria-label":i.default._("Open sticker panel",null,{hk:"1MfILW"}),xstyle:[A,M||E?v.visible:v.invisible],"data-a8n":n.default.key("compose-btn-sticker"),icon:"sticker",isActive:e.selectedPanelId===f.PANELS.STICKER,onClick:()=>T(f.PANELS.STICKER),ref:h,size:p.SIZES.SQUARE26,style:y(f.PANELS.STICKER,M,e.theme)})]})},t.PanelsMenuTheme=void 0;var n=s(a(99964)),i=s(a(48360)),r=a(67294),o=s(a(56720)),l=a(88102),d=s(a(69618)),u=a(99234),c=a(7293),h=s(a(43725)),f=a(8936),p=a(35251),m=a(64551),_=a(19529),g=a(85893);const v={menu:{position:"g0rxnol2",display:"p357zi0d",height:"d1pdhp1p",marginEnd:"bugiwsl0",transition:"rj4tx0cq",":hover":{willChange:"cx8fzybs"}},menuOpenStatusReply:{width:"cosm3z4q"},menuOpen:{width:"huo8y3a1"},menuFull:{width:"n73lgpzo"},menuClosedStatusReply:{width:"mu5rq31i"},menuClosed:{width:"fyy3ld6e"},button:{transition:"qizq0yyl",transform:"t1844p82"},visible:{opacity:"bs7a17vp"},invisible:{opacity:"axi1ht8l"}},C=a(54302).Mirrored(["ChatComposeBox","StatusReplyComposeBox"]);t.PanelsMenuTheme=C;const S=(e,t,a)=>{switch(e){case C.ChatComposeBox:return t?a?v.menuFull:v.menuOpen:v.menuClosed;case C.StatusReplyComposeBox:return t?v.menuOpenStatusReply:v.menuClosedStatusReply}},y=(e,t,a)=>{let s=0;switch(e){case f.PANELS.EMOJI:s=t?42:0;break;case f.PANELS.GIF:s=t?84:0;break;case f.PANELS.STICKER:switch(a){case C.ChatComposeBox:s=t?126:0;break;case C.StatusReplyComposeBox:s=t?84:42}}return{transform:"translateX("+(h.default.isRTL()?-1:1)*s+"px)"}}},35251:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.SIZES=t.PanelsMenuButton=void 0;var n=a(67294),i=s(a(56720)),r=a(55414),o=s(a(23217)),l=s(a(22353)),d=a(85893);const u={SQUARE24:"SQUARE24",SQUARE26:"SQUARE26"};t.SIZES=u;const c={container:{position:"lhggkp7q",bottom:"mvj9yovn",display:"f804f6gw",width:"fyy3ld6e",color:"svlsagor",borderTopStartRadius:"dntxsmpk",borderTopEndRadius:"ixn6u0rb",borderBottomEndRadius:"s2vc4xk1",borderBottomStartRadius:"o0wkt7aw",transform:"bxpi4b5r",":focus":{boxShadow:"esbo3we0"}},containerActive:{color:"jq3rn4u7"},square24Svg:{marginTop:"b9l0eqez",marginEnd:"ojci89ib",marginBottom:"inogquss",marginStart:"akljc1zx"},square26Svg:{width:"ekdr8vow",height:"dhq51u3o"},containerTop:{zIndex:"b9fczbqn"},containerPadding:{position:"g0rxnol2",bottom:"jxacihee",display:"p357zi0d"},containerPaddingSquare24:{top:"eg0stril"},containerPaddingSquare26:{top:"oybnjv0e"}},h=(e,t)=>{const a=t=>{t.stopPropagation(),t.preventDefault(),e.onClick()},s=(0,l.default)(t);return(0,d.jsx)(r.HotKeys,{component:"button",className:(0,i.default)(c.container,e.xstyle,e.isActive&&c.containerActive,(e.isMain||e.singleButton)&&c.containerTop,e.singleButton&&c.containerPadding,e.size===u.SQUARE24?c.containerPaddingSquare24:c.containerPaddingSquare26),"aria-label":e["aria-label"],"data-tab":e["data-tab"],"data-a8n":e["data-a8n"],onClick:t=>{t.stopPropagation(),t.preventDefault(),e.onClick()},onRef:s,handlers:{enter:a,space:a},style:e.style,children:(0,d.jsx)("div",{className:(0,i.default)(e.size===u.SQUARE24&&c.square24Svg),children:(0,d.jsx)(o.default,{name:e.icon,iconXstyle:e.size===u.SQUARE26&&c.square26Svg})})})},f=(0,n.memo)((0,n.forwardRef)(h));t.PanelsMenuButton=f},81880:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(67294),i=s(a(86667)),r=s(a(23217)),o=a(85893);var l=(0,n.forwardRef)(((e,t)=>{const a=(0,n.useRef)();return(0,n.useImperativeHandle)(t,(()=>({getElement:()=>a.current}))),(0,o.jsxs)("div",{className:i.default.panel,ref:a,children:[(0,o.jsx)("div",{className:i.default.body,children:e.children}),(0,o.jsx)("div",{className:i.default.cancelButton,children:(0,o.jsx)("div",{role:"button",onClick:e.onOmit,children:(0,o.jsx)(r.default,{name:"x"})})})]})}));t.default=l},23409:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onSelectMessages:t}=e,a=(0,T.default)(),s=(0,M.useModelValues)(e.chat,["isPSA","mute"]),A=(0,M.useModelValues)(e.contact,["id","isBusiness","name","isContactBlocked"]),I=(0,i.useRef)(null);(0,x.useListener)(E.Stream,"change:displayInfo",a);const w=()=>{(0,r.blockContact)(A),l.Cmd.closeModal()},k=()=>{(0,r.unblockContact)(A),l.Cmd.closeModal()},j=()=>{(0,S.sendSpamReport)(s,b.SpamFlow.Dropdown),l.Cmd.closeModal()},N=()=>{(0,S.sendSpamReport)(s,b.SpamFlow.Block),(0,r.blockContact)(A),l.Cmd.closeModal()},O=()=>{(0,S.sendSpamBlockClear)(s,b.SpamFlow.Block),l.Cmd.closeModal()},R=()=>{l.Cmd.openModal((0,P.jsx)(C.default,{isBusiness:A.isBusiness,isGroupChat:!1,onReport:j,onReportBlockClear:O,onCancel:()=>l.Cmd.closeModal()}))},D=()=>{l.Cmd.openModal((0,P.jsx)(o.default,{contact:A,onCancel:()=>l.Cmd.closeModal(),onBlock:w,onReportSpamBlock:N}))},L=()=>{const e=(0,P.jsx)(v.Name,{contact:A});l.Cmd.openModal((0,P.jsx)(d.default,{okText:p.default.t(1364),onOK:k,cancelText:p.default.t(1574),onCancel:()=>l.Cmd.closeModal(),children:(0,P.jsx)(m.default,{id:1365,params:{contact:e}})}))},B=()=>{const e=[];return s.isPSA||e.push((0,P.jsx)(h.DropdownItem,{a8n:"mi-contact",action:()=>{A.isBusiness&&(0,_.qplStartProfileView)("ToolsMenu"),l.Cmd.chatInfoDrawer(s)},children:p.default.t(1586)},"info")),A.isBusiness&&((0,f.canSeeECommerceComplianceIndiaSoftEnforcement)(A.id.user)&&e.push((0,P.jsx)(h.DropdownItem,{a8n:"merchant-details",action:()=>l.Cmd.merchantDetailsDrawer(A.id),children:n.default._("Business details",null,{hk:"m9xzp"})},"merchantDetails")),e.push((0,P.jsx)(h.DropdownItem,{a8n:"report",action:R,children:p.default.t(1148)},"report"),(0,P.jsx)(h.DropdownItem,{a8n:"block",action:A.isBlocked()?L:D,children:A.isBlocked()?p.default.t(1364):p.default.t(181)},"block"))),e.push((0,P.jsx)(h.DropdownItem,{a8n:"mi-select-messages",action:t,children:p.default.t(1835)},"select")),e.push((0,P.jsx)(h.DropdownItem,{a8n:"mi-close-chat",action:()=>l.Cmd.closeChat(s),children:p.default.t(304)},"close")),s.mute.canMute()&&e.push((0,P.jsx)(g.default,{onMute:e=>l.Cmd.muteChat(s,e),mute:s.mute,chat:s,settings:y.default},"mute")),e.push((0,P.jsx)(h.DropdownItem,{a8n:"mi-clear",action:()=>l.Cmd.clearChat(s),children:p.default.t(297)},"clear")),e.push((0,P.jsx)(u.default,{onDeleteOrExit:()=>l.Cmd.deleteOrExitChat(s),chat:s},"delete")),e};return e.toContextMenuManager?(0,P.jsx)("div",{ref:I,children:B()}):(0,P.jsx)(c.Dropdown,{onRef:e=>{I.current=e},type:"dropdown_menu",flipOnRTL:!0,dirX:c.DirX.LEFT,children:B()},"ContactMenuDropdown")};var n=s(a(48360)),i=a(67294),r=a(80140),o=s(a(58836)),l=a(88102),d=s(a(52665)),u=s(a(39424)),c=a(60811),h=a(71174),f=(a(99234),a(57701)),p=(a(97048),s(a(43725))),m=s(a(56074)),_=a(56057),g=s(a(90922)),v=a(12176),C=s(a(30934)),S=a(19569),y=s(a(68132)),b=a(38839),E=a(8080),T=s(a(59909)),x=a(19529),M=a(49082),P=(s(a(89345)),s(a(46167)),a(85893))},83001:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(41609)),i=a(50796),r=a(67294),o=a(93581),l=s(a(66034)),d=a(88102),u=s(a(69618)),c=s(a(7031)),h=s(a(97759)),f=a(84387),p=s(a(96876)),m=a(59871),_=a(64551),g=a(8080),v=s(a(4478)),C=a(77591),S=a(85893);class y extends r.Component{constructor(){super(...arguments),this._refContainer=(0,r.createRef)(),this._msgCollectionChanged=(e,t,a,s)=>{const n=this.state.msgCollection;n!==e&&n!==t||this.setState({msgCollection:a,focusCtx:s&&(s.msg||s.collection)?s:this.state.focusCtx})},this._windowGainedFocus=()=>{g.Stream.markAvailable();const e=this.state.chat;(null==e?void 0:e.isUser)&&e.presence.subscribe().catch((0,i.filteredCatch)(C.WebdDrop,(()=>{})))},this._windowLostFocus=()=>{g.Stream.markUnavailable(u.default.SEND_UNAVAILABLE_WAIT)},this._handleCloseChat=e=>{this.state.chat===e&&this.setState({chat:void 0,msgCollection:void 0,focusCtx:void 0})},this._handleOpenChatId=0,this._handleOpenChat=(e,t,a)=>{var s;d.Cmd.updateChatlistSelection(e);const n=this._openedChatInfo,i={};this._openedChatInfo=i;const r=t?t.collection:e.msgs;this._handleOpenChatId++;const o=this._handleOpenChatId,l=()=>o===this._handleOpenChatId;let u=!1;const c=()=>{l()&&(u=!0,a(this._newChatScrollInfo(n,t)))},h=(null==t||null===(s=t.msg)||void 0===s?void 0:s.id)||(null==t?void 0:t.key);this.setState({chat:e,msgCollection:r,focusCtx:t,notifyChatRendered:e=>{if(u||!l())return;if(!h)return void c();e.some((e=>e.id.equals(h)))&&c()},updateOpenedChatInfo:e=>{Object.assign(i,e)}})},this._newChatScrollInfo=(e,t)=>{const a=t?t.msg||m.MsgCollection.get(t.key):void 0;if(t&&a&&e){const{chat:t,renderedMsgsInfo:s,visibleMsgOrder:i}=e;if(t&&s&&i&&!(0,n.default)(s)&&!(0,n.default)(i)){const e=s[i[0].toString()],n=Object.keys(s).find((e=>e===a.id.toString())),r=n?s[n]:null;if(r)return{wasVisible:!0,offset:r.offset};if(t===a.chat)return e&&a.t<e.t?{wasVisible:!1,alignAt:"top"}:{wasVisible:!1,alignAt:"bottom"}}}return{wasVisible:!1,alignAt:"center"}},this.state={chat:void 0,msgCollection:void 0,focusCtx:void 0,showConversationPreview:!1,animate:void 0}}componentDidMount(){this.props.listeners.add(d.Cmd,"open_chat",this._handleOpenChat),this.props.listeners.add(d.Cmd,"close_chat",this._handleCloseChat),this.props.listeners.add(window,"focus",this._windowGainedFocus),this.props.listeners.add(window,"blur",this._windowLostFocus),_.ServerProps.wallpapersV2&&(this.props.listeners.add(l.default,"wallpaper_drawer_open",(()=>{this.setState({showConversationPreview:!0})})),this.props.listeners.add(l.default,"wallpaper_drawer_close",(()=>{this.setState({showConversationPreview:!1})})))}shouldComponentUpdate(e,t){return t!==this.state||e.animate!==this.props.animate}componentDidUpdate(e,t){const a=this.state.chat,s=t.chat;a&&s!==a&&(this.props.listeners.add(a,"change:cmc:merge",this._msgCollectionChanged),s&&this.props.listeners.remove(s,"change:cmc:merge",this._msgCollectionChanged),a.contact.isBusiness&&o.BusinessProfileCollection.find(a.id))}animatePanel(e,t){return!!this._refContainer.current&&this._refContainer.current.animatePanel(e,t)}containsDOMNode(e){return!!this._refContainer.current&&this._refContainer.current.containsDOMNode(e)}static getDerivedStateFromProps(e,t){return null==t.animate?{animate:e.animate}:!1!==t.animate?{animate:!1}:null}render(){const{chat:e,msgCollection:t,focusCtx:a,showConversationPreview:s,animate:n}=this.state;return e&&t||s?(0,S.jsx)(c.default,{chat:e,groupMetadata:null==e?void 0:e.groupMetadata,chatPreference:l.default.assertGet("defaultPreference"),focusCtx:a,msgCollection:t,notifyChatRendered:this.state.notifyChatRendered||(()=>{}),updateOpenedChatInfo:this.state.updateOpenedChatInfo||(()=>{}),ref:this._refContainer,showPreview:s},null==e?void 0:e.id.toString()):(0,S.jsx)(h.default,{animate:n,ref:this._refContainer,mdOptInDeadline:p.default})}}y.displayName="Conversation";const b=(0,f.ListenerHOC)((0,v.default)(y));t.default=class extends b{animatePanel(e,t){return super.getComponent().animatePanel(e,t)}containsDOMNode(e){return this.getComponent().containsDOMNode(e)}}},91050:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{wallpaperColor:t,showDoodle:a}=e;const{theme:s}=(0,i.useContext)(d.ThemeContext);let h;h=l.ServerProps.wallpapersV2?a:t===r.default.DEFAULT_CHAT_WALLPAPER;if(h&&(0,u.colorExistsInTheme)(t,s)){const e={opacity:(0,u.getDoodleOpacity)(t,s)},a=(0,u.getDoodleAssetName)(t,s),i={};return i[a]=!0,(0,c.jsx)("div",(0,n.default)((0,n.default)({className:o.default.tile},i),{},{style:e}))}return null};var n=s(a(81109)),i=a(67294),r=s(a(69618)),o=s(a(8937)),l=a(64551),d=a(97628),u=a(96984),c=a(85893)},83028:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(6479)),i=s(a(81109)),r=s(a(41609)),o=s(a(52353)),l=s(a(23279)),d=s(a(23493)),u=a(89385),c=s(a(33693)),h=a(50796),f=s(a(45095)),p=a(57319),m=s(a(52013)),_=s(a(94184)),g=s(a(48360)),v=a(67294),C=s(a(73935)),S=s(a(96774)),y=s(a(70714)),b=a(63183),E=a(22683),T=a(88102),x=s(a(69618)),M=s(a(23409)),P=s(a(77365)),A=s(a(71352)),I=s(a(5354)),w=a(92200),k=a(7293),j=s(a(43725)),N=a(10435),O=a(84387),R=a(96688),D=a(96205),L=a(52684),B=s(a(6272)),F=s(a(11339)),G=a(59871),U=s(a(32219)),V=s(a(86243)),H=s(a(55708)),K=a(82857),q=s(a(39812)),W=s(a(23217)),Y=a(50452),z=a(65127),Q=a(18644),$=s(a(24717)),X=s(a(90012)),J=s(a(72994)),Z=a(9609),ee=s(a(75426)),te=s(a(41956)),ae=a(77591),se=a(85893);const ne=["msgLoadState"],ie=["msgLoadState"];class re extends v.Component{constructor(e){var t;super(e),t=this,this._chatOpenScrollTimestamp=0,this._renderedMsgCache=new Map,this._visibleMsgOrder=[],this._loadEarlierScrollThreshold=300,this._mdHistorySyncStatusContentPlaceholderShown=!1,this._blockAdditionalLoadEalierRequest=!1,this._setScrollContainer=e=>this.scrollContainer=e,this._refStickyDateMarker=(0,v.createRef)(),this._refMessageList=(0,v.createRef)(),this._handleHistorySyncStateUpdate=e=>{e.has(this.props.chat.id.toString())&&(__LOG__(2,void 0,void 0,void 0,["Conversaion msgs"])`_onHistorySyncStateUpdate called, attempt to load earlier`,this._blockAdditionalLoadEalierRequest=!1,this.loadEarlierMsgs())},this.handlePanesWillChange=()=>{const e=this._visibleMsgOrder[this._visibleMsgOrder.length-1];if(!e)return;const t=e.toString(),a=this._refMessageList.current;if(t&&a){var s;const e=null===(s=a.getMsgWrapperRef(t))||void 0===s?void 0:s.getContainerElement();if(e){const t=this.scrollContainer;if(!t)return;const a=this._getMsgBottom(t,e);this._panesChanging={msg:e,container:t,msgBottom:a}}}},this.handlePanesDidChange=()=>{if(!this._panesChanging)return;const{msg:e,container:t,msgBottom:a}=this._panesChanging;this._setMsgBottom(t,e,a),this._panesChanging=void 0},this._attachMsgCollectionObservers=e=>{const{listeners:t,chat:a,msgCollection:s}=this.props,{focusCtx:n,chat:i,msgCollection:r}=e;var o,l;(s&&(t.remove(s,"remove_msgs insert_msgs",this._handleMsgsUpdate),t.remove(a.msgs,"change:last",this._handleLastMsgChanged)),t.remove(a,"change:unreadCount",this._handleUnreadCount),null!=this._msgLoadStateChangeUnsubscribe&&this._msgLoadStateChangeUnsubscribe(),this._msgLoadStateChangeUnsubscribe=r.onMsgLoadStateChange(this._handleMsgLoadStateChange),(0,N.isGroupCatchUpEnabled)())&&(a.isGroup&&(null===(o=a.groupMetadata)||void 0===o?void 0:o.unreadMentionMetadata.unreadMentionCollection)&&t.remove(a.groupMetadata.unreadMentionMetadata.unreadMentionCollection,"add remove reset",this._handleUnreadMentionCount),i.isGroup&&(null===(l=i.groupMetadata)||void 0===l?void 0:l.unreadMentionMetadata.unreadMentionCollection)&&t.add(i.groupMetadata.unreadMentionMetadata.unreadMentionCollection,"add remove reset",this._handleUnreadMentionCount));t.add(i,"change:unreadCount",this._handleUnreadCount),t.add(i.msgs,"change:last",this._handleLastMsgChanged),t.add(r,"remove_msgs insert_msgs",this._handleMsgsUpdate),n&&r.loadAroundPromise&&r.loadAroundPromise.catch((0,h.filteredCatch)(ae.E404,(()=>{T.Cmd.openToast((0,se.jsx)(Y.Toast,{msg:j.default.t(844),id:(0,Y.genId)()}))})))},this._updateForCurrentPosition=(0,d.default)((()=>{const e=this.props.getUnmountSignal();(0,w.documentFlushed)({signal:e}).then((()=>{if(e.aborted)throw new u.AbortError;this._updateRenderedMsgCache(),C.default.unstable_batchedUpdates((()=>{if(e.aborted)return;const{scrollContainer:t}=this;if(null==t)return;if(this._blockAdditionalLoadEalierRequest&&t.scrollTop<80)return;t.scrollTop>80&&(this._blockAdditionalLoadEalierRequest=!1),t.scrollTop<300&&this.loadEarlierMsgs();const{isNearBottom:a,cursor:s}=this.state,n=this._nearBottom();n?(this._maybeSendSeen(!0),fe(this.props)&&a!==n&&this.setState({isNearBottom:n,newUnread:0}),(s.getEnd(this.props.msgCollection)<this.props.msgCollection.length||!fe(this.props))&&this._loadRecentMsgs()):a!==n&&this.setState({isNearBottom:n})}))})).catch((0,h.filteredCatch)(u.AbortError,(()=>{})))}),100),this._handleMsgLoadStateChange=()=>{const e=this.state.msgLoadState,t=de(this.props.msgCollection);let a={msgLoadState:t};if(e.isLoadingAroundMsgs&&!t.isLoadingAroundMsgs){const e=le(this.props.focusCtx),t=null==e?void 0:e.msg;t&&(a=(0,i.default)((0,i.default)({},a),{},{cursor:this.state.cursor.init(t.id,this.props.msgCollection),focusCtx:e}))}this.setState(a)},this._handleResizeThrottle=(0,d.default)((()=>{this._updateRenderedMsgCache()}),100),this.handleMsgKeyChange=e=>{let{newKey:t,oldKey:a}=e;const s=a.toString(),n=t.toString(),i=this._renderedMsgCache.get(s);i&&(this._renderedMsgCache.delete(s),this._renderedMsgCache.set(n,i));for(let e=0;e<this._visibleMsgOrder.length;++e)if(this._visibleMsgOrder[e]===a){this._visibleMsgOrder[e]=t;break}},this._handleResizeDebounce=(0,l.default)((()=>{const e=this._nearBottom();this._nearBottom!==e&&this.setState({isNearBottom:e})}),100),this.loadEarlierMsgs=()=>{const{chat:e,msgCollection:t}=this.props,{cursor:a,msgLoadState:s}=this.state;if(a.getStart(t)>0)a.hasBefore(t)&&this.setState({cursor:a.loadBefore(t)});else{if(s.isLoadingEarlierMsgs||s.isLoadingAroundMsgs)return;if(ue(e,fe(this.props),s)&&(t.msgLoadState.noEarlierMsgs=!1),t.msgLoadState.noEarlierMsgs)return;const n=this.props.getUnmountSignal();e.loadEarlierMsgs(t).then((e=>{if(n.aborted)return;!k.GK.supportsFeature(k.GK.F.MD_BACKEND)||e&&0!==e.length||(this._blockAdditionalLoadEalierRequest=!0);const s={};this.state.focusCtx||(s.focusCtx=he(this.props,this.state.unreadCount)),a.hasBefore(t)?(s.cursor=a.loadBefore(t),this.setState(s)):this.setState(s)})).catch((e=>{__LOG__(2)`ConversationMsgs:loadEarlierMsgs failed\n${e}`}))}},this._loadRecentMsgs=()=>{const{chat:e,msgCollection:t}=this.props,{cursor:a,msgLoadState:s}=this.state;if(a.getEnd(t)<t.length)return void this.setState({cursor:a.loadAfter(t)});if(s.isLoadingRecentMsgs||s.isLoadingAroundMsgs)return;const n=new y.default,i=n.signal,r=this.props.getUnmountSignal(),o=(0,V.default)([i,r],(s=>e.loadRecentMsgs(t,s).then((()=>{if(s.aborted)throw new u.AbortError;a.hasAfter(t)?this.setState({cursor:a.loadAfter(t)}):this.state.cursor.getEnd(t)>=t.length&&fe(this.props)&&this.forceUpdate()})))).catch((0,u.catchAbort)((()=>{}))).catch((e=>{__LOG__(2)`ConversationMsgs:loadRecentMsgs failed\n${e}`})).finally((()=>{this._loadRecentMsgsPromise=null}));this._loadRecentMsgsPromise={promise:o,controller:n}},this.handleComposeHeightChange=e=>{const t=this.scrollContainer;if(t)if(e){if(t&&e<0&&t.scrollTop===t.scrollHeight-t.clientHeight)return;this._setScrollTop(t,t.scrollTop+e)}else{const e=t.scrollHeight-(t.scrollTop+t.clientHeight);(0,ee.default)(t,{tween:18},{progress:()=>{this._setScrollTop(t,t.scrollHeight-e-t.clientHeight)},duration:300},[.1,.82,.25,1])}},this._getScrollContainer=()=>(0,f.default)(this.scrollContainer,"this.scrollContainer"),this.getScrollBottom=()=>{const e=this.scrollContainer;return e?e.scrollHeight-(e.scrollTop+e.clientHeight):0},this._hideStickyDateMarker=new p.ShiftTimer((()=>{var e;null===(e=this._refStickyDateMarker.current)||void 0===e||e.setVisibility(!1)})),this._updateStickyDateMarker=new p.ShiftTimer((e=>{const{dateMarkerIdx:t,silent:a=!1}=e||{},s=this._refMessageList.current;if(!s||"number"!=typeof t)return;a||Date.now()-(this._programmaticScroll||0)<200||this._showStickyDateMarker();const n=s.getDateMarkerRef(t);var i;if(-1===t)null===(i=this._refStickyDateMarker.current)||void 0===i||i.updateDateMarkerText();else if(n){var r;const e=n.getTimestamp(),t=E.Clock.relativeDateStr(e).toUpperCase();null===(r=this._refStickyDateMarker.current)||void 0===r||r.updateDateMarkerText(t)}if(this._dateMarkerIdx!==t){const e=s.getDateMarkerRef(this._dateMarkerIdx);e&&e.show(),n&&n.hide()}})),this._removeViewedMentions=()=>{this._renderedMsgCache.forEach(((e,t)=>{var a,s;(null===(a=this.props.chat.groupMetadata)||void 0===a?void 0:a.unreadMentionMetadata.hasMentionId(t))&&(null===(s=this.props.chat.groupMetadata)||void 0===s||s.unreadMentionMetadata.removeUnreadMentions(t))}))},this.isMsgVisible=function(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t._renderedMsgCache.has(e.toString())&&(!!a||t.getMsgComponent(e))},this.getSequentialMsg=e=>{const t=this.getMsgs();return t?(0,c.default)(t,(t=>e.equals(t.id))):null},this.handleScroll=()=>{this._updateForCurrentPosition()},this.handleWindowGainedFocus=()=>{const e=this.props.chat;!this._clearUnreadTimer&&e.isDirty()&&(this._clearUnreadTimer=setTimeout((()=>{delete this._clearUnreadTimer,this._maybeSendSeen()}),x.default.CLEAR_CHAT_DIRTY_WAIT))},this.handleWindowLostFocus=()=>{if(!this.state.unreadCount||!fe(this.props))return;const e=this.props.chat;0===e.unreadCount&&this.setState({unreadCount:0}),e.markedUnread=!1},this._jumpToBottom=()=>{const{msgCollection:e}=this.props;fe(this.props)&&this.state.cursor.getEnd(e)>=e.length?this._scrollToBottom():T.Cmd.openChatBottom(this.props.chat).then((e=>{e&&T.Cmd.focusChatTextInput(this.props.chat)}))},this._jumpToMention=()=>{if((0,N.isGroupCatchUpEnabled)()){var e;const t=this.props.chat,a=null===(e=t.groupMetadata)||void 0===e?void 0:e.unreadMentionMetadata;if(a){const e=a.pendingUnreadMentionCount,s=(0,D.roundUp10thPercentage)(e,a.getUnreadMentionCount());if(new F.default.GroupCatchUp({mentionsCountPendingPercentage:s}).commit(),e>0){const t=j.default.t(1369,{count:j.default.n(e),_plural:e});return T.Cmd.openToast((0,se.jsx)(Y.Toast,{msg:t,id:(0,Y.genId)()})),a.pendingUnreadMentionCount=0,void this.setState({unreadMentionCount:a.getUnreadMentionCount()})}if(a.unreadMentionCollection.length){const e=a.oldestUnreadMention(),s=U.default.fromString(null==e?void 0:e.id),n=G.MsgCollection.get(s.toString()),i=t.getSearchContext(n||s);i.highlightMentionMsg=!0,i.enableAnimation=!1,i&&T.Cmd.openChatAt(this.props.chat,i)}}}},this._scrollToBottom=e=>{const t=this.scrollContainer;t&&this._setScrollTop(t,t.scrollHeight),e&&e();const a=this.props.getUnmountSignal();(0,w.documentFlushed)({signal:a}).then((()=>{a.aborted||this.setState({cursor:this.state.cursor.resetBeforeCursor(this.props.msgCollection)})})).catch((0,h.filteredCatch)(u.AbortError,(()=>{})))},this._handleLastMsgChanged=(e,t)=>{const{msgCollection:a}=this.props,{focusCtx:s}=this.state;let{cursor:n}=this.state;const i=a.last();if(!fe(this.props))return void(t&&(null==e?void 0:e.isSentByMe)&&this._jumpToBottom());const o={},l=document.hasFocus(),d=this._nearBottom();let u=d;l&&d?(o.unreadCount=0,o.focusCtx=void 0,n=n.setFocusedMsgKey(a)):(null==i?void 0:i.isSentByMe)&&t&&(u=!0,this.state.unreadCount&&(o.unreadCount=0,o.focusCtx=void 0,n=n.setFocusedMsgKey(a)),this._jumpToBottom()),n=s&&!o.hasOwnProperty("focusCtx")?n.loadAfter(a,{count:1}):n.loadBeforeCapped(a,{count:1}),n!==this.state.cursor&&(o.cursor=n),(0,r.default)(o)||this.setState(o,(()=>{u&&this._scrollToBottom()}))},this._reactionOnLastMessage=()=>{this.state.isNearBottom&&this._scrollToBottom()},this._handleUnreadMentionCount=()=>{var e,t;const{chat:a}=this.props,s=null!==(e=null===(t=a.groupMetadata)||void 0===t?void 0:t.unreadMentionMetadata.getUnreadMentionCount())&&void 0!==e?e:0;this.setState({unreadMentionCount:s})},this._handleUnreadCount=()=>{const{chat:e}=this.props,t=this._nearBottom(),a=document.hasFocus();this._maybeSendSeen(t,a);const s={};if(e.unreadCount&&!e.pendingSeenCount&&fe(this.props)){s.unreadCount=e.unreadCount;const t=he(this.props,this.state.unreadCount);var n;if(t)s.focusCtx=t,s.cursor=this.state.cursor.setFocusedMsgKey(this.props.msgCollection,null===(n=t.msg)||void 0===n?void 0:n.id)}const i=t&&s.unreadCount-this.state.unreadCount==1;(!t&&fe(this.props)||!e.pendingSeenCount&&this.state.newUnread!==e.unreadCount)&&(s.newUnread=e.unreadCount),(0,r.default)(s)||this.setState(s,(()=>{i&&this._scrollToBottom()}))},this._handleMsgsUpdate=()=>{const e=this.state.cursor.ensureValidFocus(this.props.msgCollection);this.state.cursor!==e?this.setState({cursor:e}):this.forceUpdate()},this.handlePageUpDown=()=>{m.default.focus(this.scrollContainer)},this.scrollMessages=()=>{var e;const t=this._visibleMsgOrder[this._visibleMsgOrder.length-1];if(!t)return;const a=this._refMessageList.current;if(!a)return;const s=null===(e=a.getMsgWrapperRef(t.toString()))||void 0===e?void 0:e.getContainerElement();if(!s)return;const n=1===this._visibleMsgOrder.length?s.clientHeight:0,i=this.scrollContainer;(0,ee.default)(s,"stop"),i&&(0,ee.default)(i,"stop"),(0,ee.default)(s,"scroll",{duration:300,container:i,offset:n})},this.handleKeyPress=e=>{e.metaKey||e.ctrlKey||(e.preventDefault(),"Enter"!==e.key||e.shiftKey?T.Cmd.pasteChatTextInput(this.props.chat,String.fromCharCode(e.charCode)):T.Cmd.enterChatTextInput(this.props.chat))},this.handleContextMenu=e=>{const t=this.props.chat,a=this.props.onSelectMessages;let s;if(t.isUser)s=(0,se.jsx)(M.default,{chat:t,toContextMenuManager:!0,contact:t.contact,onSelectMessages:a});else if(t.isGroup)s=(0,L.groupMenu)(t,a);else{if(!t.isBroadcast)return;s=(0,L.broadcastMenu)(t,a)}e.preventDefault(),e.stopPropagation(),this.setState({contextMenu:{menu:s,event:e}})},this.handleContextClose=()=>{this.setState({contextMenu:null})},this.handlePaste=e=>{e.preventDefault(),T.Cmd.sendPasteToCompose(this.props.chat,e)},this._notifyChatRendered=()=>{this.props.notifyChatRendered&&this.props.notifyChatRendered(this.getMsgs())};const{chat:a}=e,s=a.pendingSeenCount?0:a.unreadCount;let n=0;var o,_;(0,N.isGroupCatchUpEnabled)()&&a.isGroup&&(n=null!==(o=null===(_=a.groupMetadata)||void 0===_?void 0:_.unreadMentionMetadata.getUnreadMentionCount())&&void 0!==o?o:0);this.state=(0,i.default)((0,i.default)({},ce(e,s)),{},{unreadCount:s,unreadMentionCount:n,isNearBottom:!0,newUnread:0,contextMenu:null,textsize:P.default.get().textsize,msgLoadState:de(e.msgCollection),lastSelectable:e.selectable,lastChat:e.chat,lastMsgCollection:e.msgCollection,lastFocusCtx:e.focusCtx})}componentWillUnmount(){var e;(null!=this._msgLoadStateChangeUnsubscribe&&this._msgLoadStateChangeUnsubscribe(),this._updateStickyDateMarker.cancel(),this._updateForCurrentPosition.cancel(),this._handleResizeThrottle.cancel(),this._handleResizeDebounce.cancel(),this._hideStickyDateMarker.cancel(),this._clearUnreadTimer&&clearTimeout(this._clearUnreadTimer),this._maybeSendSeen(),this.props.chat.markedUnread=!1,(0,N.isGroupCatchUpEnabled)()&&this.props.chat.isGroup)&&(null===(e=this.props.chat.groupMetadata)||void 0===e||e.unreadMentionMetadata.reset())}componentDidMount(){const{chat:e,listeners:t}=this.props;t.add(T.Cmd,"scroll_chat_to_bottom",(e=>{this._scrollToBottom(e)})),t.add(T.Cmd,"scroll_messages",this.scrollMessages),t.add(T.Cmd,"textsize_change",(e=>this.setState({textsize:e}))),t.add(T.Cmd,"panes_will_change",this.handlePanesWillChange),t.add(T.Cmd,"panes_did_change",this.handlePanesDidChange),t.add(T.Cmd,"scroll_to_focused_msg",(()=>{this._chatOpenScrollTimestamp=Date.now()})),t.add(T.Cmd,"reaction_changed_last_msg",this._reactionOnLastMessage),t.add(window,"focus",this.handleWindowGainedFocus),t.add(window,"blur",this.handleWindowLostFocus),t.add(window,"resize",this._handleResizeThrottle),t.add(window,"resize",this._handleResizeDebounce),t.add(G.MsgCollection,"change:msgKey",this.handleMsgKeyChange),t.add(T.Cmd,"new_history_sync_chunk_processed",this._handleHistorySyncStateUpdate),this._attachMsgCollectionObservers(this.props);const a=this.props.getUnmountSignal();(0,w.documentFlushed)({signal:a}).then((()=>{a.aborted||this._showStickyDateMarker()})).catch((0,h.filteredCatch)(u.AbortError,(()=>{}))),this.props.updateOpenedChatInfo({chat:e}),(0,Z.sendSeen)(e),this._updateForCurrentPosition(),this._notifyChatRendered()}static getDerivedStateFromProps(e,t){let a={lastSelectable:e.selectable,lastChat:e.chat,lastMsgCollection:e.msgCollection,lastFocusCtx:e.focusCtx};return e.selectable!==t.lastSelectable||e.chat===t.lastChat&&e.msgCollection===t.lastMsgCollection&&e.focusCtx===t.lastFocusCtx||(a=(0,i.default)((0,i.default)({},a),{},{msgLoadState:de(e.msgCollection)},ce(e,t.unreadCount))),a}shouldComponentUpdate(e,t){if(!(0,S.default)(e,this.props))return!0;const a=this.state,{msgLoadState:s}=a,i=(0,n.default)(a,ne),{msgLoadState:r}=t,o=(0,n.default)(t,ie);return!(0,S.default)(r,s)||!(0,S.default)(o,i)}componentDidUpdate(e){e.selectable!==this.props.selectable||e.chat===this.props.chat&&e.msgCollection===this.props.msgCollection&&e.focusCtx===this.props.focusCtx||(this._loadRecentMsgsPromise&&this._loadRecentMsgsPromise.controller.abort(),this._attachMsgCollectionObservers(this.props));const{chat:t}=this.props;this._updateRenderedMsgCache(e.chat===t),this.props.updateOpenedChatInfo({chat:t}),e.msgCollection!==this.props.msgCollection&&this._updateForCurrentPosition(),this._notifyChatRendered()}_getMsgBottom(e,t){const a=e.scrollTop,s=e.scrollHeight,n=e.clientHeight;return s-(t.offsetTop+t.clientHeight+(s-(a+n)))}_setMsgBottom(e,t,a){const s=t.offsetTop+t.clientHeight+a-e.clientHeight;this._setScrollTop(e,s)}getRenderedMessageCount(){return this.getMsgs().length}setScrollBottom(e){const t=this.scrollContainer;t&&this._setScrollTop(t,t.scrollHeight-e-t.clientHeight)}_setScrollTop(e,t){this._programmaticScroll=Date.now(),e&&(e.scrollTop=t)}_showStickyDateMarker(){var e;null===(e=this._refStickyDateMarker.current)||void 0===e||e.setVisibility(!0),this._hideStickyDateMarker.debounce(3e3)}_nearBottom(){const e=this.scrollContainer;return!!e&&e.scrollTop+x.default.SCROLL_FUDGE>e.scrollHeight-e.clientHeight}getMsgs(){const{focusCtx:e,msgCollection:t}=this.props,{cursor:a,msgLoadState:s}=this.state;return e&&s.isLoadingAroundMsgs?[]:t.toArray().slice(a.getStart(t),a.getEnd(t)).map((e=>e.safe()))}_updateRenderedMsgCache(e){const t=this._refMessageList.current;if(!t)return void this._renderedMsgCache.clear();const a=[],s=t.props.msgs,n=new Map,i={};let r=0,o=s.length-1;for(;r<o;){const e=Math.floor((r+o)/2),a=s[e].id.toString(),n=t.getMsgWrapperRef(a);t.getMsgVisibility(n).visibility===x.default.VISIBILITY.ABOVE?r=e+1:o=e}for(let e=r;e<s.length;e++){const r=s[e].id.toString(),o=t.getMsgWrapperRef(r);if(!o)throw new Error("msgRef not found!");const l=t.getMsgVisibility(o);if(l.visibility!==x.default.VISIBILITY.VISIBLE)break;i[r]={offset:l.offset,t:s[e].t},n.set(r,o),a.push(s[e].id)}if(!this.scrollContainer)return;const l=this.scrollContainer.scrollTop;r=0,o=Object.keys(t.getRenderedDateMarkers()).length-1;const d=t.getDateMarkerRef(0),u=d&&d.getElement();if(u&&u.offsetTop<=l+8.5)for(;r<o;){const e=Math.ceil((r+o)/2),a=t.getDateMarkerRef(e);if(!a)throw new Error(`DateMarkerRef: ${e} not found. ${Object.keys(t.getRenderedDateMarkers()).toString()}}`);(0,f.default)(a.getElement(),"midDateMarkerRef.getElement()").offsetTop>l+8.5?o=e-1:r=e}else r=-1;this._updateStickyDateMarker.onOrBefore(0,{dateMarkerIdx:r,silent:e}),this._dateMarkerIdx=r,this.pauseHiddenGifs(this._renderedMsgCache,n),this._renderedMsgCache=n,this._visibleMsgOrder=a,(0,N.isGroupCatchUpEnabled)()&&this.props.chat.isGroup&&this._removeViewedMentions(),this.props.updateOpenedChatInfo({renderedMsgsInfo:i,visibleMsgOrder:a,clientHeight:this.scrollContainer?this.scrollContainer.clientHeight:0})}getMsgComponent(e){const t=this._refMessageList.current;if(t)return t.getMsgComponentRef(e.toString())}pauseHiddenGifs(e,t){e.forEach(((e,a)=>{if(t.has(a))return;const s=this.props.msgCollection.get(a),n=this._refMessageList.current,i=null==n?void 0:n.getMsgComponentRef(a);(null==s?void 0:s.isGif)&&(null==i||i.pause())}))}_maybeSendSeen(e,t){let a=e,s=t;const{chat:n,msgCollection:i}=this.props,{cursor:r}=this.state;if(n.isDirty()&&fe(this.props)&&r.getEnd(i)>=i.length&&((0,o.default)(s)&&(s=document.hasFocus()),s&&((0,o.default)(a)&&(a=this._nearBottom()),a)))return(0,Z.sendSeen)(n),!0}render(){const{chat:e,msgCollection:t,selectable:a,onMessageSelect:s}=this.props,{focusCtx:n,msgLoadState:i,unreadMentionCount:r}=this.state,o=(0,_.default)(A.default.pane,{[A.default.selectable]:a});let l;const d=x.default.TEXTSIZE_CLASS_MAP.find((e=>e.scale===this.state.textsize));d&&(l=d.classname);const u=this.getMsgs(),c=(0,se.jsx)(B.default,{ref:this._refMessageList,getScrollContainer:this._getScrollContainer,chat:e,unreadCount:this.state.unreadCount,selectable:a,onMessageSelect:s,msgs:u,focusedMsgCtx:n,selectedMessages:this.props.selectedMessages,isMsgVisible:this.isMsgVisible,getSequentialMsg:this.getSequentialMsg,isLoadingEarlierMsgs:i.isLoadingEarlierMsgs});let h,f,p,m,v=(0,se.jsx)(R.LoadMoreMessages,{direction:"around",isMostRecentCMC:fe(this.props),loadMoreMsgs:()=>{},isLoadingEarlierMsgs:i.isLoadingEarlierMsgs,isLoadingRecentMsgs:i.isLoadingRecentMsgs,isLoadingAroundMsgs:i.isLoadingAroundMsgs});(this.state.cursor.getStart(t)>0||!i.noEarlierMsgs||e.endOfHistoryTransferType===b.ConversationEndOfHistoryTransferModelPropType.COMPLETE_BUT_MORE_MESSAGES_REMAIN_ON_PRIMARY||ue(e,fe(this.props),i))&&(h=(0,se.jsx)(R.LoadMoreMessages,{direction:"earlier",isMostRecentCMC:fe(this.props),loadMoreMsgs:this.loadEarlierMsgs,isLoadingEarlierMsgs:i.isLoadingEarlierMsgs,isLoadingRecentMsgs:i.isLoadingRecentMsgs,isLoadingAroundMsgs:i.isLoadingAroundMsgs,mdHistorySyncTransferState:e.endOfHistoryTransferType})),(this.state.cursor.getEnd(t)<t.length||!fe(this.props))&&(f=(0,se.jsx)(R.LoadMoreMessages,{direction:"recent",isMostRecentCMC:fe(this.props),loadMoreMsgs:this._loadRecentMsgs,isLoadingEarlierMsgs:i.isLoadingEarlierMsgs,isLoadingRecentMsgs:i.isLoadingRecentMsgs,isLoadingAroundMsgs:i.isLoadingAroundMsgs})),n&&i.isLoadingAroundMsgs?(f=void 0,h=void 0):v=void 0;const{isNearBottom:C,newUnread:S}=this.state;if(!C||!i.isLoadingAroundMsgs&&!fe(this.props)){S&&e.unreadCount&&(m=(0,se.jsx)(J.default,{count:this.state.newUnread},"icon-unread"));const t=(0,_.default)(A.default.incoming,{[A.default.ffFix]:z.UA.isGecko});p=(0,se.jsxs)(K.Round,{className:t,dataTab:x.default.TAB_ORDERS.MESSAGE_LIST_SCROLL_BUTTON,onClick:this._jumpToBottom,label:g.default._("Scroll to bottom",null,{hk:"3UK0Wq"}),children:[(0,se.jsx)(te.default,{transitionName:"pop",className:A.default.unread,children:m}),(0,se.jsx)(W.default,{name:"down",className:A.default.iconDown})]})}let y,E=null;if((0,N.isGroupCatchUpEnabled)()&&e.isGroup&&r>0){const e=(0,_.default)(A.default.atMentions,{[A.default.ffFix]:z.UA.isGecko,[A.default.buttonGap]:p,[A.default.buttonGapRemove]:!p}),t=j.default.t(11,{count:j.default.n(r),_plural:r}),a=(0,se.jsxs)(K.Round,{className:e,onClick:this._jumpToMention,dataTab:x.default.TAB_ORDERS.MESSAGE_LIST_SCROLL_BUTTON,children:[(0,se.jsx)(te.default,{transitionName:"pop",className:A.default.unread,children:(0,se.jsx)(J.default,{count:r,ariaLabel:t})}),(0,se.jsx)(W.default,{name:"mentions",className:A.default.iconMentions})]});E=C?a:(0,se.jsx)(te.default,{transitionName:"pop",children:a})}return this.state.contextMenu&&(y=(0,se.jsx)(Q.UIE,{displayName:"ConversationContextMenu",escapable:!0,popable:!0,requestDismiss:this.handleContextClose,children:(0,se.jsx)($.default,{contextMenu:this.state.contextMenu})})),(0,se.jsxs)(I.default,{className:l,children:[(0,se.jsx)(q.default,{ref:this._refStickyDateMarker}),(0,se.jsxs)("div",{className:A.default.incomingContainer,children:[E,(0,se.jsx)(te.default,{transitionName:"pop",children:p})]}),(0,se.jsxs)("div",{className:o,ref:this._setScrollContainer,onScroll:this.handleScroll,onKeyPress:this.handleKeyPress,onContextMenu:a?null:this.handleContextMenu,onPaste:this.handlePaste,tabIndex:"0",children:[(0,se.jsx)("div",{className:A.default.empty}),v,h,c,f]}),y]})}}re.displayName="ConversationMsgs";const oe=(0,X.default)((0,O.ListenerHOC)(re));function le(e){return null==e?null:null!=e.key?(0,i.default)((0,i.default)({},e),{},{msg:G.MsgCollection.get(e.key)}):e}function de(e){const{msgLoadState:t}=e;return{noEarlierMsgs:t.noEarlierMsgs,isLoadingEarlierMsgs:t.isLoadingEarlierMsgs,isLoadingRecentMsgs:t.isLoadingRecentMsgs,isLoadingAroundMsgs:t.isLoadingAroundMsgs,contextLoaded:t.contextLoaded}}function ue(e,t,a){const s=a.noEarlierMsgs&&e.shouldAppearInList&&t&&e.msgChunks.filter((e=>e.filter((t=>t.msgChunk===e)).length>0)).length>0;return s&&(__LOG__(4,void 0,new Error,!0)`MRM noEarlierMsgs on chat ${String(e.id)} is true but chat.msgChunks has length: ${e.msgChunks.length},
and chat.msgs.length: ${e.msgs.length}`,SEND_LOGS("noEarlierMsgs-error")),s}function ce(e,t){const{focusCtx:a,chat:s,msgCollection:n}=e,i=le(a)||he(e,t),r=null==i?void 0:i.msg,o=null==r?void 0:r.id;return{cursor:H.default.create({msgCollection:n,focusedMsgKey:o,type:s.isGroup?x.default.RENDER_CURSOR.GROUP_CONVERSATION:x.default.RENDER_CURSOR.CONVERSATION}),focusCtx:i}}function he(e,t){const{chat:a,msgCollection:s,focusCtx:n}=e;let i;if(i=a.unreadCount?a.unreadCount:t,n&&!fe(e)||!i)return;let r=s.filter((e=>e.isUnreadType)).reverse().slice(0,i);return r.length===i?(r=r[r.length-1],{msg:r,isUnreadDivider:a.shouldShowUnreadDivider,highlightMsg:!1}):void 0}function fe(e){return e.chat.msgs===e.msgCollection}t.default=class extends oe{getRenderedMessageCount(){return this.getComponent().getRenderedMessageCount()}getScrollBottom(){return this.getComponent().getScrollBottom()}onComposeHeightChange(e){this.getComponent().handleComposeHeightChange(e)}onPageUpDown(e){this.getComponent().handlePageUpDown(e)}setScrollBottom(e){this.getComponent().setScrollBottom(e)}}},63009:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{chat:t,msgCollection:a,focusCtx:s,groupMetadata:n}=e,$=(0,W.default)(),X=(0,H.default)(),[J,Z]=(0,u.useState)((()=>t.canSend&&!t.isSuspendedGroup())),[ee,te]=(0,u.useState)(!1),[ae,se]=(0,u.useState)((()=>t.isGroup&&!(!(I.GK.supportsFeature(I.GK.F.GROUPS_V_3)&&L.ServerProps.groupDescLength>0)||(0,P.getSeenGroupDesc)(t.id)||((0,P.setSeenGroupDesc)(t.id),0===t.unreadCount?t.msgs.some((e=>e.type!==v.default.MSG_TYPE.E2E_NOTIFICATION&&e.type!==v.default.MSG_TYPE.GP2)):t.shouldShowUnreadDivider)))),ne=(0,u.useRef)(0),ie=(0,K.default)((()=>new R.default([],(e=>e.id.toString())))),re=(0,K.default)((()=>new N.default.WebcChatOpen({webcUnreadCount:t.unreadCount,webcWindowHeightFloat:(0,A.default)()}))),oe=(0,K.default)((()=>new N.default.UiAction({uiActionType:N.default.UI_ACTION_TYPE.CHAT_OPEN,uiActionPreloaded:!0}))),le=(0,u.useRef)(!1),de=(0,u.useRef)(),ue=(0,u.useRef)(!1),ce=(0,u.useRef)(null),he=(0,u.useRef)(null),fe=(0,u.useRef)(null),pe=(0,u.useRef)(null),me=(0,u.useRef)(null),_e=(0,u.useRef)(null),ge=()=>{if((0,E.shouldBlockByCountry)(t.contact)){var e;m.Cmd.openModal((0,Q.jsx)(g.default,{onOK:()=>m.Cmd.closeModal(),okText:j.default.t(977),children:j.default.t(1614)}),{transition:"modal-flow"});const a=null===(e=t.previewMessage)||void 0===e?void 0:e.isSentByMe;new N.default.GatedChatOpened({chatGatedReason:N.default.CHAT_GATED_REASON.COUNTRY,selfInitiated:a}).commit()}else if((0,U.shouldBlockByTos)(t.contact)){const e=(0,U.shouldBlockByTosB2C)(t.contact,t.previewMessage);m.Cmd.openModal((0,Q.jsx)(G.default,{contact:t.contact,isB2C:e}),{transition:"modal-flow"});new N.default.GatedChatOpened({chatGatedReason:N.default.CHAT_GATED_REASON.TOS3,selfInitiated:!e}).commit()}},ve=()=>{const e=t.canSend&&!t.isSuspendedGroup();e!==J&&(e||(ne.current=0),Z(e),ge())},Ce=()=>{ee||te(!0)},Se=(e,t,s)=>{Ce();const n=ie.current.getSelected().pop(),i=null==s?void 0:s.shiftKey;ie.current.setVal(e,t,!0),i&&((e,t,s)=>{if(!e||!a)return;const n=a.indexOf(e);if(!n)return;let i=a.indexOf(t);const r=i>n?-1:1,o=n+(s?r:i<n?0:2*r);for(;i!==o;)ie.current.setVal((0,l.default)(a.at(i),"msgCollection.at(currentSelectedIndex)").safe(),s,!0),i+=r})(n,e,t)};(0,q.useListener)(t,"change:canSend",ve),(0,q.useListener)(t.groupMetadata,"change:suspended",ve),(0,q.useListener)(t,"change:isReadOnly change:isAnnounceGrpRestrict",(()=>{X()})),(0,q.useListener)(m.Cmd,"get_conversation_header_offset",(e=>{if(pe.current){const t=pe.current.getBoundingClientRect();e((0,i.default)(t,["right","bottom"]))}else e(null)})),(0,q.useListener)(t.msgs,"remove",(e=>{ie.current.isSelected(e)&&Se(e,!1)})),(0,q.useListener)(null,"change:archive",(e=>{KeyboardManager.menuBatchRenderWith((()=>{KeyboardManager.trigger(`${KC.Event}:${KC.Events.ARCHIVE}`,e.archive)}))})),(0,q.useListener)(null,"change:isReadOnly",(e=>{KeyboardManager.menuBatchRenderWith((()=>{KeyboardManager.trigger(`${KC.Event}:${KC.Events.READ_ONLY}`,e.isReadOnly)}))})),(0,q.useListener)(null,"change:hasUnread",(e=>{KeyboardManager.menuBatchRenderWith((()=>{KeyboardManager.trigger(`${KC.Event}:${KC.Events.READ}`,!e.hasUnread)}))})),(0,q.useListener)(null,"change:mute.isMuted",(e=>{KeyboardManager.menuBatchRenderWith((()=>{KeyboardManager.trigger(`${KC.Event}:${KC.Events.MUTE}`,e.isMuted)}))}));let ye=null;(0,P.shouldShowNUX)(v.default.NUX.EPHEMERAL)&&(t.isGroup&&null!=t.groupMetadata?ye=t.groupMetadata:t.isUser&&(ye=t));(0,q.useListener)(ye,"change:ephemeralDuration",(()=>{})),(0,q.useListener)(null,"change:pin",(e=>{KeyboardManager.menuBatchRenderWith((()=>{KeyboardManager.trigger(`${KC.Event}:${KC.Events.PIN}`,Boolean(e.pin))}))})),(0,u.useEffect)((()=>{const e=t.getReceivedVcardMsgs();e&&!e.isSynced&&e.sync(t),t.active=!0,ge();const a=re.current;a&&(re.current=null,_e.current&&(a.webcRenderedMessageCount=_e.current.getRenderedMessageCount()),a.markWebcChatOpenT(),me.current=requestAnimationFrame((()=>{me.current=null,a.markWebcChatOpenBeforePaintT()})),(0,x.documentFlushed)({signal:$}).then((()=>{$.aborted||(_e.current&&(a.webcFinalRenderedMessageCount=_e.current.getRenderedMessageCount()),a.markWebcChatOpenPaintedT(),a.commit())})).catch((0,o.filteredCatch)(r.AbortError,(()=>{}))));const s=oe.current;var n;s&&(t.isGroup&&null!=(null===(n=t.groupMetadata)||void 0===n?void 0:n.cachedDeviceSizeBucket)&&(s.sizeBucket=t.groupMetadata.cachedDeviceSizeBucket),s.markUiActionT(),s.commit(),oe.current=void 0);if(t.attachMediaContents){const e=t.attachMediaContents.isStickerMaker;m.Cmd.attachMediaDrawer({chat:t,animationName:"noop",sendAsSticker:e})}return(0,P.shouldShowNUX)(v.default.NUX.EPHEMERAL)&&t.isEphemeralSettingOn()&&m.Cmd.ephemeralDrawer(t,!0),t.isSuspendedGroup()&&F.default.openModal(),()=>{t.urlText&&(t.urlText=void 0),t.urlNumber&&(t.urlNumber=void 0),t.active=!1,null!=me.current&&cancelAnimationFrame(me.current)}}),[]);const be=()=>Math.max(0,ne.current),Ee=()=>{const e=be();he.current&&(he.current.style.height=`${e}px`)},Te=(e,t)=>{var a;let{input:s,overlay:n=0}=e;const i=fe.current,l=_e.current;if(!i||!l)return;const d=l.getScrollBottom();if(void 0!==s)return void l.onComposeHeightChange(s);if(t)return ne.current=n,Ee(),void l.setScrollBottom(d);var u;(ne.current+=n,n<0&&(Ee(),l.setScrollBottom(d)),de.current)&&(le.current=!0,null===(u=de.current)||void 0===u||u.controller.abort());const h=new c.default,f=h.signal,p=((null===(a=de.current)||void 0===a?void 0:a.promise)||Promise.resolve()).then((()=>(0,Y.default)(i,{translateY:n>0?[-n,0]:[0,n]},{duration:300,easing:[.1,.82,.25,1]}))),m=(0,D.default)(p,f).catch((0,o.filteredCatch)(M.Unmount,(()=>{}))).then((()=>{if(f.aborted)throw new r.AbortError;n>0&&Ee(),i.style.transform="";const e=_e.current;n>0&&(null==e||e.setScrollBottom(d))})).catch((0,r.catchAbort)((()=>{(0,Y.default)(i,"finish",!0)}))).then((()=>{le.current?le.current=!1:de.current=void 0}));de.current={promise:m,controller:h}},xe=()=>{ee&&(ie.current.unsetAll(),te(!1))},Me=e=>{var t;null===(t=_e.current)||void 0===t||t.onPageUpDown(e)},Pe=()=>{se(!1)};let Ae,Ie,we,ke;ae&&(null==n?void 0:n.desc)&&(ke=(0,Q.jsx)(V.UIE,{displayName:"GroupDesc",escapable:!0,requestDismiss:Pe,children:(0,Q.jsx)(b.default,{onClose:Pe,children:(0,Q.jsx)(w.default,{chat:t,groupMetadata:n})})}));if(ee)Ie=(0,Q.jsx)(V.UIE,{displayName:"MultiSelect",escapable:!0,requestDismiss:xe,children:(0,Q.jsx)(O.default,{chat:t,selectedMessages:ie.current,disableRevoke:!1,noSortOnForward:!1,onCancel:xe})}),Ae=(0,Q.jsx)("footer",{className:y.default.footer}),we=(0,Q.jsx)("div",{ref:he,className:y.default.filler});else if(J)Ae=(0,Q.jsx)(_.default,{chat:t,ref:ce,onComposeHeightChange:Te,onPageUpDown:Me}),we=(0,Q.jsx)("div",{ref:he,style:{height:`${be()}px`},className:y.default.filler});else{let e,a;(0,E.shouldBlockByCountry)(t.contact)?a=j.default.t(1615):(0,U.shouldBlockByTos)(t.contact)?a=j.default.t(1877,{contact:t.contact.formattedName}):t.isGroup&&!n.participants.iAmMember()?a=j.default.t(1575):t.isSuspendedGroup()?e=(0,Q.jsx)(B.default,{}):t.isGroup&&!t.isReadOnly&&t.isAnnounceGrpRestrict&&n?e=(0,Q.jsx)(h.default,{chat:t,groupMetadata:n,mute:t.mute}):a=t.isGroup&&n.support?j.default.t(1575):t.isPSA?j.default.t(1820):j.default.t(1576,{contact:t.contact.formattedName}),Ae=(0,Q.jsx)("footer",{className:y.default.footer,children:(0,Q.jsx)("div",{"data-a8n":d.default.key("block-message"),className:y.default.footerMessage,children:e||a})})}return(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(C.default,{wallpaperColor:e.wallpaperColor,showDoodle:e.chatPreference.showDoodle}),(0,Q.jsx)(k.default,{chat:t,contact:t.contact,onSelectMessages:Ce,onRef:e=>{pe.current=e}}),(0,Q.jsx)(z.default,{transitionName:"butterbar",className:y.default.subheader,children:ke}),(0,Q.jsx)("div",{className:y.default.subheader,children:(0,Q.jsx)(f.ChangeNumberNotification,{chat:t})}),(0,Q.jsx)("div",{className:y.default.body,ref:fe,onDragStart:()=>{J&&(ue.current=!0)},onDragEnd:()=>{J&&(ue.current=!1)},onDragEnter:e=>{if(!J)return;xe();const a=new T.default(e.dataTransfer),s=ce.current;null!=s&&!ue.current&&(a.hasType("Files")||a.hasType("text/uri-list")||a.hasType("text/html"))&&(s.flushSaveComposeContentDebounced(),m.Cmd.attachMediaDrawer({chat:t,initCaption:s.getCurrentComposeContent(),onComplete:s.updateTextAfterMediaDrawerClose}),e.stopPropagation(),e.preventDefault())},children:(0,Q.jsx)(S.default,{ref:_e,chat:t,selectable:ee,onMessageSelect:Se,msgCollection:a,onSelectMessages:Ce,focusCtx:s,selectedMessages:ie.current,notifyChatRendered:e.notifyChatRendered,updateOpenedChatInfo:e.updateOpenedChatInfo})}),we,Ae,(0,Q.jsx)(z.default,{transitionName:"slide-up",children:Ie}),(0,Q.jsx)(p.default,{})]})};var i=n(a(78718)),r=a(89385),o=a(50796),l=n(a(45095)),d=n(a(99964)),u=a(67294),c=n(a(70714)),h=n(a(48708)),f=a(72345),p=n(a(80891)),m=a(88102),_=n(a(21518)),g=n(a(52665)),v=n(a(69618)),C=n(a(91050)),S=n(a(83028)),y=n(a(38038)),b=n(a(84518)),E=a(47473),T=n(a(56792)),x=a(92200),M=s(a(64103)),P=a(99234),A=n(a(24732)),I=a(7293),w=n(a(404)),k=n(a(48948)),j=n(a(43725)),N=n(a(11339)),O=n(a(16351)),R=n(a(26757)),D=n(a(84644)),L=a(64551),B=n(a(87234)),F=n(a(43745)),G=n(a(64807)),U=a(37894),V=a(18644),H=n(a(59909)),K=n(a(59552)),q=a(19529),W=n(a(38080)),Y=n(a(75426)),z=n(a(41956)),Q=a(85893)},7031:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(81109)),i=s(a(94184)),r=a(67294),o=a(98516),l=s(a(66034)),d=s(a(69618)),u=s(a(91050)),c=s(a(38038)),h=s(a(63009)),f=s(a(99890)),p=s(a(98229)),m=s(a(43725)),_=a(84387),g=s(a(65932)),v=a(18644),C=a(85893);class S extends r.Component{constructor(e){super(e),this._setRefContainer=e=>{this._refContainer=e},this._handleWallpaperColorPreview=e=>{e?this.state.wallpaperColor!==e&&this.setState({wallpaperColor:e}):this.setState({wallpaperColor:l.default.assertGet("defaultPreference").wallpaperColor})},this.state={wallpaperColor:this.props.chatPreference.wallpaperColor,prevWallpaperColor:this.props.chatPreference.wallpaperColor}}static getDerivedStateFromProps(e,t){return e.chatPreference.wallpaperColor!==t.prevWallpaperColor?(0,n.default)((0,n.default)({},t),{},{wallpaperColor:e.chatPreference.wallpaperColor,prevWallpaperColor:e.chatPreference.wallpaperColor}):null}componentDidMount(){this.props.listeners.add(l.default,"wallpaper_color_preview",this._handleWallpaperColorPreview)}animatePanel(e,t){var a;const s=null===(a=this._refContainer)||void 0===a?void 0:a.clientWidth;return null!=s&&e!==t&&(0,o.animateConversationPanel)(this._refContainer,s/(e-t))}containsDOMNode(e){return!!this._refContainer&&this._refContainer.contains(e)}render(){let e,t={};this.state.wallpaperColor!==d.default.DEFAULT_CHAT_WALLPAPER&&(t={backgroundColor:this.state.wallpaperColor});const{chat:a,msgCollection:s,focusCtx:n,notifyChatRendered:r,updateOpenedChatInfo:o,showPreview:_}=this.props;return a&&s?e=(0,C.jsx)(h.default,{chat:a,groupMetadata:a.groupMetadata,chatPreference:l.default.assertGet("defaultPreference"),focusCtx:n,msgCollection:s,notifyChatRendered:r,updateOpenedChatInfo:o,wallpaperColor:this.state.wallpaperColor},a.id.toString()):_&&(e=(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("header",{className:(0,i.default)(p.default.chatHeader,f.default.header),children:(0,C.jsx)("span",{className:(0,i.default)(f.default.title,p.default.chatTitle),children:m.default.t(1553)})}),(0,C.jsx)(u.default,{wallpaperColor:this.state.wallpaperColor,showDoodle:this.props.chatPreference.showDoodle}),(0,C.jsx)("footer",{className:c.default.footer})]})),(0,C.jsx)(v.UIE,{displayName:"ConversationPanel",uimState:v.UIE.State.INACTIVE,children:(0,C.jsx)("div",{id:"main",className:(0,i.default)(f.default.pane,{[f.default.previewPane]:this.props.showPreview}),style:t,ref:this._setRefContainer,children:e})})}}S.CONCERNS={chatPreference:["wallpaperColor","showDoodle"]},S.displayName="ConversationPreviewPanel";const y=(0,_.ListenerHOC)((0,g.default)(S,S.CONCERNS));t.default=class extends y{animatePanel(e,t){return super.getComponent().animatePanel(e,t)}containsDOMNode(e){return this.getComponent().containsDOMNode(e)}}},84518:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(67294),i=s(a(89827)),r=s(a(23217)),o=a(85893);function l(e,t){const a=(0,n.useRef)(null),s=e.onClose?(0,o.jsx)("div",{className:i.default.closeBtn,role:"button",onClick:e.onClose,children:(0,o.jsx)(r.default,{name:"x"})}):null,l=()=>a.current;return(0,n.useImperativeHandle)(t,(()=>({getElement:l}))),(0,o.jsxs)("div",{className:i.default.subheader,ref:a,children:[(0,o.jsx)("div",{className:i.default.main,children:e.children}),s]})}var d=(0,n.forwardRef)(l);t.default=d},404:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(94184)),r=a(67294),o=a(88102),l=a(65417),d=n(a(77063)),u=a(5124),c=n(a(43725)),h=s(a(86688)),f=n(a(8694)),p=n(a(65932)),m=a(13923),_=a(85893);class g extends r.Component{constructor(e){super(e),this._setBodyRef=e=>{this._bodyRef=e},this._setDescRef=e=>{this._descRef=e},this.handleResize=e=>{let{width:t}=e;const{descWidth:a}=this.state;a<=0||this.setState({truncated:t<a})},this.handleReadMore=()=>{const{chat:e}=this.props;o.Cmd.chatInfoDrawer(e,!0)},this.state={desc:C(e.groupMetadata),descWidth:0,truncated:!1,hidden:!0}}componentDidMount(){this._handleDescWidthObtained()}static getDerivedStateFromProps(e,t){const a=C(e.groupMetadata);return a===t.desc?null:{desc:a,descWidth:0,truncated:!1,hidden:!0}}componentDidUpdate(e,t){t.desc!==this.state.desc&&this._handleDescWidthObtained()}_handleDescWidthObtained(){const{_bodyRef:e,_descRef:t}=this;if(!e||!t)return;const a=e.clientWidth,s=t.getWidth();this.setState({descWidth:s,truncated:a<s,hidden:!1})}render(){const{desc:e}=this.state;if(!e)return null;const{truncated:t,hidden:a}=this.state,s=this.props.chat.isTrusted()?u.Configuration.TrustedGroupDesc({links:h.findLinks(e)}):u.Configuration.UntrustedGroupDesc();return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(m.TextDiv,{theme:"title",children:c.default.t(1657)}),(0,_.jsx)(f.default,{ref:this._setBodyRef,onResize:this.handleResize,className:d.default.body,children:(0,_.jsxs)(m.TextSpan,{theme:"small",className:(0,i.default)(d.default.text,{[d.default.hidden]:a}),children:[(0,_.jsx)(l.EmojiText,{ref:this._setDescRef,text:e,selectable:!0,formatters:s,className:d.default.desc}),t&&(0,_.jsx)("div",{className:d.default.more,role:"button",onClick:this.handleReadMore,children:c.default.t(1136)})]})})]})}}g.CONCERNS={groupMetadata:["desc"]},g.displayName="GroupDescriptionBar";var v=(0,p.default)(g,g.CONCERNS);function C(e){return null==e?void 0:e.desc}t.default=v},55800:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.GrowthLockedModal=function(){return(0,u.jsx)(o.default,{title:l.default.t(537),onLearnMoreClicked:h,onOkClicked:c,children:l.default.t(536)})},t.openGrowthLockedModal=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e){const e=l.default.t(538);return void n.Cmd.openToast((0,u.jsx)(d.Toast,{msg:e,id:(0,d.genId)()}))}const a=t?l.default.t(562):l.default.t(564),s=t?l.default.t(561):l.default.t(563);n.Cmd.openModal((0,u.jsx)(o.default,{title:a,onLearnMoreClicked:h,onOkClicked:c,children:s}),{transition:"modal-flow"})};var n=a(88102),i=a(12591),r=a(96384),o=s(a(52780)),l=s(a(43725)),d=a(50452),u=a(85893);const c=()=>{n.Cmd.closeModal()},h=()=>{(0,i.openExternalLink)((0,r.getGroupInviteGrowthLockedFaqUrl)())}},98295:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(48360)),i=a(67294),r=s(a(64809)),o=a(62044),l=a(7156),d=a(93581),u=a(94010),c=a(88102),h=a(17239),f=s(a(69618)),p=a(60811),m=a(71174),_=a(65100),g=a(1063),v=s(a(54995)),C=a(99234),S=s(a(72451)),y=a(7293),b=a(57701),E=s(a(3222)),T=s(a(43725)),x=a(84387),M=a(77975),P=a(82145),A=s(a(11339)),I=a(43257),w=s(a(67700)),k=a(9153),j=a(64551),N=s(a(23217)),O=a(2712),R=a(85893);function D(e){return(0,R.jsxs)("button",{"aria-label":e.ariaLabel,className:r.default.iconsItem,"data-animate-menu-icons-item":!0,children:[(0,R.jsx)(N.default,{name:e.svgName,className:r.default.iconImage}),e.children]})}class L extends i.Component{constructor(){super(...arguments),this._refContainer=(0,i.createRef)(),this._setDocPicker=e=>this._docPicker=e,this._setMediaPicker=e=>this._mediaPicker=e,this._refStickerPicker=(0,i.createRef)(),this._tooltipPosition=T.default.isRTL()?O.TooltipAnchor.Left:O.TooltipAnchor.Right,this._handleDocumentPick=e=>{if(!e)return void this.dismiss();e.stopPropagation();const t=null==e.target.files?[]:Array.from(e.target.files);if(this.dismiss(),!t.length)return;const a=t.map((e=>({file:e,type:g.FILETYPE.DOCUMENT})));this.attachMediaDrawer(a)},this._handleMediaPick=e=>{if(!e)return void this.dismiss();e.stopPropagation();const t=null==e.target.files?[]:Array.from(e.target.files);this.dismiss(),t.length&&this.attachMediaDrawer(t.map((e=>({file:e}))))},this._handleMediaClick=e=>{if(e.preventDefault(),this._mediaPicker)return this._mediaPicker.open(),B(this.props.chat),!1},this._handleStickerPick=e=>{if(!e)return void this.dismiss();e.stopPropagation();const t=null==e.target.files?[]:Array.from(e.target.files);this.dismiss(),t.length&&(new A.default.WebcStickerMakerEvents({stickerMakerEventName:A.default.WEBC_STICKER_MAKER_EVENT_NAME_TYPE.IMAGE_UPLOADED}).commit(),this.attachMediaDrawer(t.map((e=>({file:e,stickerMaker:!0}))),!0))},this._handleStickerClick=e=>{e.preventDefault();const t=this._refStickerPicker.current;if(t)return new A.default.WebcStickerMakerEvents({stickerMakerEventName:A.default.WEBC_STICKER_MAKER_EVENT_NAME_TYPE.STICKER_MAKER_BUTTON_TAP}).commit(),t.open(),B(this.props.chat),!1},this._handleQuickRepliesClick=e=>{e.preventDefault(),c.Cmd.toggleQuickReplies()},this._handleDocumentClick=e=>{if(e.preventDefault(),this._docPicker)return this._docPicker.open(),B(this.props.chat),!1},this.handleContactClick=e=>{e.preventDefault(),c.Cmd.openModal((0,R.jsx)(l.AttachVcardsFlowLoadable,{chat:this.props.chat,onContactsSent:()=>{this.props.onMenuComplete&&this.props.onMenuComplete(!0,{initCaptionUsed:!1})}})),B(this.props.chat)},this._handleProductCatalogClick=e=>{e.preventDefault();const t=this._productCatalogSession.toString();(0,M.logCatalogAttachmentButtonClick)(t),(0,P.qplStartCatalogView)("Attachment"),c.Cmd.openModal((0,R.jsx)(o.AttachProductsFlowLoadable,{chat:this.props.chat,sessionId:t})),B(this.props.chat)},this._handleOrderClick=()=>{c.Cmd.openDrawerRight((0,R.jsx)(w.default,{}),"slide-left")}}getElement(){return this._refContainer.current}componentDidMount(){this._productCatalogSession=new k.ProductCatalogSession;const e=d.BusinessProfileCollection.get((0,C.getMaybeMeUser)());e&&this.props.listeners.add(e,"change:profileOptions",(()=>{this.forceUpdate()}))}_canSendProductCatalog(){if(!h.Conn.isSMB)return!1;if(!j.ServerProps.shopsHideCatalogAttachmentEntrypoint)return!0;const e=d.BusinessProfileCollection.get((0,C.getMaybeMeUser)());return!(0,u.hasShop)(e)}_canSendOrder(){if(!h.Conn.isSMB)return!1;if((0,b.orderDetailsCustomItemEnabled)())return!0;const e=d.BusinessProfileCollection.get((0,C.getMaybeMeUser)());return(0,b.orderDetailsFromCatalogEnabled)()&&(0,u.hasCatalog)(e)}dismiss(){const{uim:e}=this.props;e&&e.uie.requestDismiss()}attachMediaDrawer(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];c.Cmd.attachMediaDrawer({chat:this.props.chat,attachments:e,fileOrigin:A.default.MEDIA_PICKER_ORIGIN_TYPE.CHAT_PHOTO_LIBRARY,initCaption:this.props.getComposeContents&&this.props.getComposeContents(),onComplete:(e,t)=>{this.props.onMenuComplete&&this.props.onMenuComplete(e,t)},sendAsSticker:t})}_renderAttachDocDropdownItem(){return(0,R.jsx)(m.DropdownItem,{type:"icon",tooltip:(0,R.jsx)(O.Tooltip,{anchor:this._tooltipPosition,children:T.default.t(155)}),a8n:"mi-attach-document",action:this._handleDocumentClick,children:(0,R.jsx)(D,{ariaLabel:T.default.t(155),svgName:"attach-document",children:(0,R.jsx)(v.default,{ref:this._setDocPicker,mimes:I.DOC_MIMES,onChange:this._handleDocumentPick})})})}_renderAttachProductCatalogDropdownItem(){const e=d.BusinessProfileCollection.get((0,C.getMaybeMeUser)());return!this._canSendProductCatalog()||(0,b.blockCatalogCreationECommerceComplianceIndia)(e)?null:(0,R.jsx)(m.DropdownItem,{type:"icon",tooltip:(0,R.jsx)(O.Tooltip,{anchor:this._tooltipPosition,children:n.default._("Catalog",null,{hk:"4o6ci2"})}),a8n:"mi-attach-product-catalog",action:this._handleProductCatalogClick,children:(0,R.jsx)(D,{ariaLabel:n.default._("Catalog",null,{hk:"4o6ci2"}),svgName:"attach-product"})})}_renderAttachStickerDropdownItem(){return(0,R.jsx)(m.DropdownItem,{type:"icon",tooltip:(0,R.jsx)(O.Tooltip,{anchor:this._tooltipPosition,children:n.default._("Sticker",null,{hk:"zXZ2C"})}),a8n:"mi-attach-sticker",action:this._handleStickerClick,children:(0,R.jsx)(D,{ariaLabel:n.default._("Sticker",null,{hk:"zXZ2C"}),svgName:"attach-sticker",children:(0,R.jsx)(v.default,{ref:this._refStickerPicker,mimes:f.default.IMAGE_MIMES,onChange:this._handleStickerPick,multiple:!1})})})}_renderAttachOrderDropdownItem(){if(!this._canSendOrder())return null;const e=String(n.default._("Order",null,{hk:"1oAcE0"}));return(0,R.jsx)(m.DropdownItem,{type:"icon",tooltip:(0,R.jsx)(O.Tooltip,{anchor:this._tooltipPosition,children:e}),a8n:"mi-attach-order",action:this._handleOrderClick,children:(0,R.jsx)(D,{ariaLabel:e,svgName:"attach-order"})})}_renderAttachQuickRepliesDropdownItem(){return(0,b.quickRepliesV2Enabled)()?(0,R.jsx)(m.DropdownItem,{type:"icon",tooltip:(0,R.jsx)(O.Tooltip,{anchor:this._tooltipPosition,children:n.default._("Quick Replies",null,{hk:"3VBzfb"})}),a8n:"mi-attach-quick-replies",action:this._handleQuickRepliesClick,children:(0,R.jsx)(D,{ariaLabel:n.default._("Quick Replies",null,{hk:"3VBzfb"}),svgName:"attach-quick-replies"})}):null}render(){return(0,R.jsxs)("div",{className:r.default.attachMenuContainer,ref:this._refContainer,children:[(0,R.jsx)(N.default,{name:"attach-shadow"}),(0,R.jsxs)(p.Dropdown,{type:"menu",children:[(0,R.jsx)(m.DropdownItem,{type:"icon",tooltip:(0,R.jsx)(O.Tooltip,{anchor:this._tooltipPosition,children:n.default._("Photos & Videos",null,{hk:"ZW4y9"})}),a8n:"mi-attach-media",action:this._handleMediaClick,children:(0,R.jsx)(D,{ariaLabel:n.default._("Photos & Videos",null,{hk:"ZW4y9"}),svgName:"attach-image",children:(0,R.jsx)(v.default,{ref:this._setMediaPicker,mimes:[f.default.IMAGE_MIMES,f.default.VIDEO_MIMES].join(","),onChange:this._handleMediaPick})})}),this._renderAttachOrderDropdownItem(),this._renderAttachStickerDropdownItem(),(0,R.jsx)(m.DropdownItem,{type:"icon",tooltip:(0,R.jsx)(O.Tooltip,{anchor:this._tooltipPosition,children:n.default._("Camera",null,{hk:"1AmyYx"})}),a8n:"mi-attach-camera",action:this.props.onCaptureClick,disabled:!S.default,children:(0,R.jsx)(D,{ariaLabel:n.default._("Camera",null,{hk:"1AmyYx"}),svgName:"attach-camera"})}),this._renderAttachDocDropdownItem(),(0,R.jsx)(m.DropdownItem,{type:"icon",tooltip:(0,R.jsx)(O.Tooltip,{anchor:this._tooltipPosition,children:T.default.t(157)}),a8n:"mi-attach-contact",action:this.handleContactClick,children:(0,R.jsx)(D,{ariaLabel:T.default.t(157),svgName:"attach-contact"})}),this._renderAttachProductCatalogDropdownItem(),this._renderAttachQuickRepliesDropdownItem()]},"AttachMenuDropdown")]})}}function B(e){y.GK.supportsFeature(y.GK.F.MD_BACKEND)&&(0,_.eagerlyEstablishE2EESessionForMedia)(e)}L.displayName="AttachMenuDropdown";var F=(0,x.ListenerHOC)((0,E.default)(L));t.default=F},44395:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{chat:t,onMenuComplete:a}=e,s=(0,b.default)(),n=(0,r.useRef)(null),T=(0,y.default)();(0,r.useEffect)((()=>()=>{var e;null===(e=n.current)||void 0===e||e.call(n),d.Cmd.closeDrawerMid()}),[]);return(0,E.jsx)(g.MenuBarItem,{a8nText:"conversation-clip",icon:(0,E.jsx)(S.default,{name:"clip"}),tabOrder:u.default.TAB_ORDERS.COMPOSE_BOX_ATTACH_BUTTON,title:m.default.t(821),transitionName:"menu",onClick:e=>{(e=>{d.Cmd.existsDrawerMid((t=>{t&&e.preventDefault()}))})(e)},children:(0,E.jsx)(o.default,{chat:e.chat,onCaptureClick:()=>{(()=>{const{asyncStream:e,disposeStream:r}=_.start("camera");n.current=r,(0,v.default)(e,s).then((e=>{e&&d.Cmd.openDrawerMid((0,E.jsx)(l.CaptureFlowLoadable,{chat:(0,C.unproxy)(t),stream:e,disposeStream:n.current,onCaptureSent:()=>{a&&a(!0,{initCaptionUsed:!1})}}),"slide-up",T,{noFocus:!0})})).catch((0,i.filteredCatch)(h.GUM.NotAllowedError,(()=>{d.Cmd.openModal((0,E.jsx)(p.GuidePopup,{messaging:p.Messaging.CAMERA_FAIL,type:p.TYPE.GUIDE_UNBLOCK}))}))).catch((0,i.filteredCatch)(h.GUM.GUMError,(()=>{d.Cmd.openModal((0,E.jsx)(p.GuidePopup,{messaging:p.Messaging.CAMERA_MISSING,type:p.TYPE.GUIDE_NONE}))})))})(),f.GK.supportsFeature(f.GK.F.MD_BACKEND)&&(0,c.eagerlyEstablishE2EESessionForMedia)(t)},getComposeContents:e.getComposeContents,onMenuComplete:e.onMenuComplete})})};var i=a(50796),r=a(67294),o=n(a(98295)),l=a(71989),d=a(88102),u=n(a(69618)),c=a(65100),h=s(a(64103)),f=a(7293),p=a(18671),m=n(a(43725)),_=s(a(58254)),g=a(46346),v=n(a(84644)),C=a(31019),S=n(a(23217)),y=n(a(59147)),b=n(a(38080)),E=a(85893)},28460:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(67294),n=a(60811),i=a(52684),r=a(85893);function o(e,t){const{chat:a,onSelectMessages:o,toContextMenuManager:l=!1}=e,d=(0,s.useRef)(null);(0,s.useImperativeHandle)(t,(()=>({getElement:()=>d.current})));const u=(0,i.broadcastMenu)(a,o);return l?(0,r.jsx)("div",{ref:d,children:u}):(0,r.jsx)(n.Dropdown,{onRef:e=>{d.current=e},type:"dropdown_menu",flipOnRTL:!0,dirX:n.DirX.LEFT,children:u},"BroadcastMenuDropdown")}var l=(0,s.forwardRef)(o);t.default=l},77003:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(67294),n=a(60811),i=a(52684),r=a(85893);function o(e,t){const{chat:a,onSelectMessages:o}=e,l=(0,s.useRef)(null),d=()=>l.current;(0,s.useImperativeHandle)(t,(()=>({getElement:d})));const u=(0,i.groupMenu)(a,o);return e.toContextMenuManager?(0,r.jsx)("div",{ref:l,children:u}):(0,r.jsx)(n.Dropdown,{onRef:e=>{l.current=e},type:"dropdown_menu",flipOnRTL:!0,dirX:n.DirX.LEFT,children:u},"GroupMenuDropdown")}var l=(0,s.forwardRef)(o);t.default=l},48948:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onRef:t}=e,a=(0,V.default)(),s=(0,B.default)(),q=((0,r.useRef)(!1),(0,r.useRef)(!1)),W=(0,r.useRef)(null),Y=(0,G.useModelValues)(e.chat,["id","formattedTitle","presence","isUser","isGroup","isBroadcast","groupMetadata","isPSA","contact","name"]),z=(0,G.useModelValues)(e.contact,["showBusinessCheckmarkAsPrimary","showBusinessCheckmarkAsSecondary","shouldForceBusinessUpdate"]),[Q,$]=(0,r.useState)(!1),[X,J]=(0,r.useState)(f.Conn.isVoipInitialized),[Z,ee]=(0,r.useState)(null);(0,r.useEffect)((()=>{function e(){return(e=(0,n.default)((function*(){yield l.BusinessProfileCollection.find(Y.contact.id),s()}))).apply(this,arguments)}z.shouldForceBusinessUpdate&&function(){e.apply(this,arguments)}()}),[]);const[te]=(0,U.useTimeout)((()=>$(!1)),100),ae=()=>{},se=()=>{Y.contact.isBusiness&&(0,x.qplStartProfileView)("Header"),!Y.isPSA&&(Y.isUser||Y.isBroadcast||Y.isGroup)&&h.Cmd.openDrawerRight((0,K.jsx)(b.InfoFlowLoadable,{chat:(0,R.unproxy)(Y),profileEntryPoint:P.default.PROFILE_ENTRY_POINT.CHAT_HEADER},`info-${Y.id.toString()}`),"slide-left",a)},ne=e=>{e.preventDefault(),(0,v.canViewCollections)()&&j.QPL.markerStart(N.QuickLogMarkerId.WHATSAPP_CATALOG_COLLECTIONS_VIEW,{string:{EntryPoint:"ChatHeader"}});const t=(0,I.buildProductCatalogContext)(new w.ProductCatalogSession,P.default.BIZ_PLATFORM.SMB,P.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_CHAT),s=Y.contact.id;(0,T.logChatCatalogView)({catalogOwnerWid:s,catalogContext:t}),h.Cmd.openDrawerRight((0,K.jsx)(k.ProductDetailsFlowLoadable,{chat:Y,catalogOwnerJid:s.toJid()}),"slide-left",a,t)},ie=e=>{e.preventDefault(),(0,u.goToShop)(Y.contact.businessProfile)};let re,oe,le;if((0,F.useListener)(window.Native,["BrowserWindow:focus"],ae),(0,F.useListener)(Y.contact.businessProfile,["change:profileOptions","change:catalogStatus"],s),(0,F.useListener)(null,"BrowserWindow:focus",ae),(0,F.useListener)(null,"change:activeCall",s),(0,F.useListener)(null,"BrowserWindow:move",(()=>{q.current=!0})),(0,F.useListener)(null,"change:participants",s),(0,F.useListener)(f.Conn,"change:isVoipInitialized",(()=>{J(f.Conn.isVoipInitialized)})),Y.isUser)re=(0,K.jsx)(m.default,{chat:Y,contact:Y.contact,onSelectMessages:e.onSelectMessages,toContextMenuManager:!0}),oe=(0,K.jsx)(H.default,{contact:Y.contact,presence:Y.presence,chatstate:Y.presence.chatstate,location:"title",showBusinessCheckmark:z.showBusinessCheckmarkAsSecondary});else if(Y.isBroadcast)re=(0,K.jsx)(o.default,{chat:(0,R.unproxy)(Y),onSelectMessages:e.onSelectMessages,toContextMenuManager:!0}),oe=null;else if(Y.isGroup){var de;re=(0,K.jsx)(C.default,{chat:(0,R.unproxy)(Y),onSelectMessages:e.onSelectMessages,toContextMenuManager:!0});const t=(null===(de=Y.groupMetadata)||void 0===de?void 0:de.participants)&&Y.groupMetadata.participants.iAmAdmin()&&Y.groupMetadata.announce?i.default._("Only admins can send messages",null,{hk:"4vOQrI"}):E.default.t(298);oe=(0,K.jsx)(S.default,{chatstate:Y.presence.chatstate,groupMetadata:Y.groupMetadata,presence:Y.presence,placeholder:t,location:"title"})}if(Z&&re){const e={menu:re,anchor:Z,autoFocus:!0,dirX:E.default.isRTL()?g.DirX.RIGHT:g.DirX.LEFT,dirY:g.DirY.BOTTOM,offsetY:5,type:"dropdown_menu"};le=(0,K.jsx)(L.default,{contextMenu:e})}let ue;0;const ce=(0,K.jsx)(M.MenuBarItem,{tabOrder:p.default.TAB_ORDERS.CHAT_HEADER_BUTTON,a8nText:"search-button",icon:(0,K.jsx)(D.default,{name:"search-alt"}),title:E.default.t(1191),onClick:e=>{e.preventDefault(),h.Cmd.existsDrawerMid((e=>{e||h.Cmd.openDrawerRight((0,K.jsx)(c.default,{chat:(0,R.unproxy)(Y)},`chat-search-${Y.id.toString()}`),"slide-left",a)}))}});Y.isPSA&&(oe=null);return(0,K.jsxs)("header",{ref:e=>{W.current=e,t(e)},className:y.default.chatHeader,onClickCapture:()=>{},onMouseDown:()=>{},children:[(0,K.jsx)("div",{className:y.default.chatAvatar,onClick:se,title:i.default._("Profile Details",null,{hk:"22n3V4"}),role:Y.isPSA?null:"button",children:(0,K.jsx)(_.DetailImage,{id:Y.id,size:40,ephemeralIcon:"conversation-header"})}),(0,K.jsxs)("div",{className:y.default.chatBody,onClick:se,role:Y.isPSA?null:"button",children:[(0,K.jsx)("div",{className:y.default.chatMain,children:(0,K.jsx)("div",{className:y.default.chatTitle,children:(0,K.jsx)(A.Name,{chat:Y,titlify:!0,ellipsify:!0,showBusinessCheckmark:z.showBusinessCheckmarkAsPrimary})})}),oe]}),(0,K.jsx)("div",{className:y.default.chatControls,children:(0,K.jsxs)(M.MenuBar,{children:[null,null,ue,(()=>{var e;const{businessProfile:t}=Y.contact;return O.ServerProps.webShopsChatHeaderButtonEnabled&&(0,u.hasShop)(t)?(0,v.bannedShopsEnabled)()&&(0,u.isShopBanned)(t)?null:(0,K.jsx)(M.MenuBarItem,{tabOrder:p.default.TAB_ORDERS.CHAT_HEADER_BUTTON,a8nText:"shop-button",icon:(0,K.jsx)(D.default,{name:"shop"}),title:E.default.t(1258),onClick:ie}):(null==t||null===(e=t.profileOptions)||void 0===e?void 0:e.commerceExperience)===d.COMMERCE_EXPERIENCE_TYPES.CATALOG||(null==t?void 0:t.catalogStatus)===l.CATALOG_EXISTS?(0,K.jsx)(M.MenuBarItem,{tabOrder:p.default.TAB_ORDERS.CHAT_HEADER_BUTTON,a8nText:"product_catalog-button",icon:(0,K.jsx)(D.default,{name:"catalog-entrypoint"}),title:E.default.t(1068),onClick:ne}):null})(),ce,(0,K.jsx)("div",{ref:ee,children:(0,K.jsx)(M.MenuBarItem,{tabOrder:p.default.TAB_ORDERS.CHAT_HEADER_BUTTON,a8nText:"conversation-menu",icon:(0,K.jsx)(D.default,{name:"menu"}),title:E.default.t(822),onClick:e=>{h.Cmd.existsDrawerMid((t=>{t&&e.preventDefault()}))},children:le})})]},"conversation-header")})]})};var n=s(a(48926)),i=s(a(48360)),r=a(67294),o=s(a(28460)),l=a(93581),d=a(93170),u=a(94010),c=s(a(60235)),h=a(88102),f=a(17239),p=s(a(69618)),m=s(a(23409)),_=a(88984),g=a(60811),v=a(57701),C=s(a(77003)),S=s(a(30140)),y=s(a(98229)),b=a(23831),E=s(a(43725)),T=a(77975),x=a(56057),M=a(46346),P=s(a(11339)),A=a(12176),I=a(97567),w=a(9153),k=a(67455),j=a(48870),N=a(27798),O=a(64551),R=(s(a(84091)),a(31019)),D=s(a(23217)),L=s(a(24717)),B=s(a(59909)),F=a(19529),G=a(49082),U=a(99935),V=s(a(59147)),H=s(a(35148)),K=a(85893);a(84356).Voip,a(46167).default},96688:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.HistorySyncLoadMoreUiState=void 0,t.LoadMoreMessages=function(e){let{direction:t,loadMoreMsgs:a,isLoadingEarlierMsgs:s,isLoadingRecentMsgs:f,isLoadingAroundMsgs:p,mdHistorySyncTransferState:m}=e;const _="earlier"===t&&s||"recent"===t&&f||"around"===t&&p,g=null!=m&&!_,v=m===r.ConversationEndOfHistoryTransferModelPropType.INCOMPLETE;let C,S,y;if(_)C=(0,h.jsx)(u.Spinner,{stroke:6,size:24,color:"highlight"}),S=l.default.t(733);else if(o.GK.supportsFeature(o.GK.F.MD_BACKEND)&&g){let e;e=v?i.default._("Chat history sync in progress. This may take a while.",null,{hk:"2ZazaX"}):i.default._("Use WhatsApp on your phone to see older chat messages.",null,{hk:"442sJJ"}),C=(0,h.jsxs)("div",{className:d.default.historySyncStateContainerBody,children:[v&&(0,h.jsx)("div",{className:d.default.historySyncSpinner,children:(0,h.jsx)(u.Spinner,{stroke:6,size:20,color:"highlight"})}),(0,h.jsx)("div",{className:d.default.historySyncStatusText,children:e})]}),S=e}else{switch(t){case"earlier":S=l.default.t(730);break;case"recent":S=l.default.t(731);break;default:S=l.default.t(733)}C=(0,h.jsx)(c.default,{name:"refresh"}),y=a}const b=(0,n.default)(d.default.wrapper,{[d.default.historySyncStatusWrapper]:g}),E=(0,n.default)(d.default.historySyncStateContainer,{[d.default.historySyncSystemMsg]:!v,[d.default.historySyncLoadingIndicator]:v}),T=g?(0,h.jsx)("div",{className:E,children:C}):(0,h.jsx)("div",{className:d.default.button,title:S,onClick:y,children:C});return(0,h.jsx)("div",{className:b,children:T})},t.MessageListButton=function(e){let{children:t,onClick:a,title:s}=e;return(0,h.jsx)("div",{className:d.default.wrapper,children:(0,h.jsx)("div",{className:d.default.button,title:s,onClick:a,children:t})})};var n=s(a(94184)),i=s(a(48360)),r=a(63183),o=a(7293),l=s(a(43725)),d=s(a(1051)),u=a(11054),c=s(a(23217)),h=a(85893);const f=a(54302).Mirrored(["SYNC_IN_PROGRESS","SYNC_COMPLETE_BUT_MORE_MSG_ON_PHONE"]);t.HistorySyncLoadMoreUiState=f},52684:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.broadcastMenu=function(e,t){const a=[];return a.push((0,u.jsx)(r.DropdownItem,{a8n:"mi-broadcast-info",action:()=>n.Cmd.chatInfoDrawer(e),children:o.default.t(1712)},"info")),a.push((0,u.jsx)(r.DropdownItem,{a8n:"mi-select-messages",action:t,children:o.default.t(1835)},"select")),a.push((0,u.jsx)(r.DropdownItem,{a8n:"mi-clear",action:()=>n.Cmd.clearChat(e),children:o.default.t(297)},"clear")),a.push((0,u.jsx)(i.default,{onDeleteOrExit:()=>n.Cmd.deleteOrExitChat(e),chat:e},"delete")),a},t.groupMenu=function(e,t){const a=[];a.push((0,u.jsx)(r.DropdownItem,{a8n:"mi-group-info",action:()=>n.Cmd.chatInfoDrawer(e),children:o.default.t(1659)},"info")),a.push((0,u.jsx)(r.DropdownItem,{a8n:"mi-select-messages",action:t,children:o.default.t(1835)},"select")),e.mute.canMute()&&a.push((0,u.jsx)(l.default,{onMute:t=>n.Cmd.muteChat(e,t),mute:e.mute,chat:e,settings:d.default},"mute"));return a.push((0,u.jsx)(r.DropdownItem,{a8n:"mi-clear",action:()=>n.Cmd.clearChat(e),children:o.default.t(297)},"clear")),a.push((0,u.jsx)(i.default,{onDeleteOrExit:()=>n.Cmd.deleteOrExitChat(e),chat:e},"delete")),a};var n=a(88102),i=s(a(39424)),r=a(71174),o=s(a(43725)),l=s(a(90922)),d=s(a(68132)),u=a(85893)},12285:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(45095)),i=s(a(45120)),r=s(a(52013)),o=s(a(94184)),l=s(a(48360)),d=s(a(41143)),u=a(67294),c=s(a(96774)),h=s(a(62087)),f=a(13738),p=s(a(72655)),m=a(16593),_=a(88102),g=s(a(52665)),v=s(a(69618)),C=s(a(99131)),S=a(80226),y=a(32303),b=a(71174),E=a(77811),T=a(75362),x=s(a(14703)),M=a(7293),P=a(57701),A=s(a(67745)),I=s(a(20568)),w=s(a(63824)),k=s(a(43725)),j=a(74511),N=a(78986),O=s(a(34377)),R=a(87931),D=s(a(20485)),L=a(63132),B=s(a(52500)),F=s(a(6088)),G=a(57793),U=a(31019),V=s(a(23217)),H=a(18644),K=s(a(24717)),q=s(a(41956)),W=s(a(33947)),Y=a(58827),z=a(72179),Q=a(85893);class $ extends u.Component{getContainerElement(){return this._refAlbumWrapper.current}constructor(e){super(e),this._refAlbumWrapper=(0,u.createRef)(),this.refAlbumComponents={},this.setRefContext=e=>{this.refContext=e},this._refTail=(0,u.createRef)(),this.setRefBubble=e=>{this.refBubble=e},this._setRefLeftStickerBubble=e=>{this._refLeftStickerBubble=e},this._setRefRightStickerBubble=e=>{this._refRightStickerBubble=e},this._firstStickerRef=(0,u.createRef)(),this._secondStickerRef=(0,u.createRef)(),this.mouseOver=e=>{e.buttons||this.state.hover||this.setState({hover:!0})},this.mouseDown=()=>{this.state.hover&&this.setState({hover:!1})},this.contextMenu=e=>{e.stopPropagation()},this.openForwardFlow=(e,t)=>{const{msgs:a}=this.props;let s;for(let e=0;e<a.length;e++)if(a[e].isUnsentMedia){s=k.default.t(465,{_plural:1});break}s?_.Cmd.openModal((0,Q.jsx)(g.default,{title:k.default.t(468),onOK:()=>_.Cmd.closeModal(),okText:k.default.t(1765),children:s})):e?this.handleSelectClick({selectedMsg:t}):_.Cmd.openModal((0,Q.jsx)(T.ForwardMessageFlowLoadable,{msgs:a.map((e=>e.unsafe()))}),{transition:"modal-flow"})},this.handleStar=()=>{const{msgs:e}=this.props;_.Cmd.sendStarMsgs(e[0].chat,e)},this.handleUnstar=()=>{const{msgs:e}=this.props;_.Cmd.sendUnstarMsgs(e[0].chat,e)},this.handleSelectClick=e=>{const{selectedMsg:t,event:a}=e;if(a&&a.stopPropagation(),t)return void this.props.onMessageSelect((0,U.unproxy)(t.unsafe()),!this.props.selectedMessages.isSelected((0,U.unproxy)(t)),a);const s=0===this.state.selectedCount;this.props.msgs.forEach((e=>{this.props.onMessageSelect((0,U.unproxy)(e.unsafe()),s,a)}))},this._computeSelectedCount=()=>{const{msgs:e,selectedMessages:t}=this.props;let a=0;return e.forEach((e=>{t.isSelected((0,U.unproxy)(e.unsafe()))&&a++})),a},this.handleDownload=()=>{E.FileSaver.initDownload(this.props.msgs.map((e=>e.unsafe())))},this.handleDeleteMessage=()=>{const{msgs:e}=this.props;let t;e[0].canSenderRevoke()?t=S.RevokePrompt.Sender:e[0].canAdminRevoke()&&(t=S.RevokePrompt.Admin),_.Cmd.openModal((0,Q.jsx)(C.default,{chat:e[0].chat,msgList:e.map((e=>e.unsafe())),deletePrompt:!0,revokePrompt:t,isMsgVisible:this.props.isMsgVisible}))},this._getMenuRefContext=()=>{if(this.refContext)return this.refContext.getComponent().refContext},this.handleMenu=(e,t)=>{const{msgs:a}=this.props;if(t&&this.state.contextMenu)return void this.setState({contextMenu:null});const s=t?this._getMenuRefContext():e,n=[];a.every((e=>e.mediaData&&e.mediaData.isDownloadable()))&&n.push((0,Q.jsx)(b.DropdownItem,{a8n:"mi-msg-download",action:this.handleDownload,children:l.default._("Download all",null,{hk:"22A8O7"})},"download"));a.every((e=>e.canForward()))&&n.push((0,Q.jsx)(b.DropdownItem,{a8n:"mi-msg-forward",action:()=>{this.openForwardFlow(!0)},children:l.default._("Forward all",null,{hk:"1iWm4D"})},"forward"));if(a.every((e=>e.canStar()))){a.every((e=>e.star))?n.push((0,Q.jsx)(b.DropdownItem,{a8n:"mi-msg-unstar",action:()=>{this.handleUnstar()},children:k.default.t(1376)},"star")):n.push((0,Q.jsx)(b.DropdownItem,{a8n:"mi-msg-star",action:()=>{this.handleStar()},children:k.default.t(1275)},"star"))}n.push((0,Q.jsx)(b.DropdownItem,{a8n:"mi-msg-delete",action:this.handleDeleteMessage,children:l.default._("Delete all",null,{hk:"4FG8uO"})},"delete")),this.setState({contextMenu:{menu:n,anchor:s,theme:b.ThemeOptions.COMPACT}})},this.openContextMenu=()=>{this.state.hover?this.handleMenu(void 0,!0):this.setState({hover:!0},(()=>{this.handleMenu(void 0,!0)}))},this.closeContextMenu=()=>{const e={contextMenu:null};this._isKeyboardUser()&&(e.hover=!1),this.setState(e)},this._handleAlbumGridRendered=(e,t)=>{e?this.refAlbumComponents[t.id.toString()]=e:delete this.refAlbumComponents[t.id.toString()]},this.scrollMsg=(e,t)=>{const a=this._refAlbumWrapper.current;if(!a)return;const s=a.offsetParent;s&&((0,d.default)(s instanceof HTMLElement,"DOM offset parent is not a valid HTMLElement"),(0,y.scrollAt)(a,s,t).then(e))},this.highlight=()=>{const e=this._refTail.current;let t;this.isGroupedSticker()?0===this.props.focusedMsgIndex?t=this._refLeftStickerBubble:1===this.props.focusedMsgIndex&&(t=this._refRightStickerBubble):t=this.refBubble,t&&(i.default.indicateFocus(t,W.default.highlightAnimation),i.default.indicateFocus(e,W.default.highlightAnimation),this.props.isFocusable&&this.focus({preventScroll:!0}))},this._handleReactionChange=()=>{const e=this.props.msgs.map((e=>e.id.toString()));(0,G.lastMessageReactionChange)(e)};const t=this._computeSelectedCount();this.state={contextMenu:null,hover:!1,selectedCount:t}}componentDidMount(){M.GK.supportsFeature(M.GK.F.MEDIA_EXISTENCE_CHECK)&&this.props.msgs.map((e=>e.asAlbumAsset)).filter(Boolean).forEach((e=>{(0,N.checkExistence)(e)}))}componentDidUpdate(e){if(this.props.msgs!==e.msgs&&M.GK.supportsFeature(M.GK.F.MEDIA_EXISTENCE_CHECK)){const t=new Set(e.msgs);this.props.msgs.map((e=>e.asAlbumAsset)).filter(Boolean).filter((e=>!t.has(e))).forEach((e=>{(0,N.checkExistence)(e)}))}}shouldComponentUpdate(e,t){if(!(0,c.default)(t,this.state))return!0;return!(0,c.default)(e,this.props,((e,t,a)=>{if("msgs"===a)return(0,c.default)(e,t)}))}onSelectChange(e){let t;t=this.isGroupedSticker()?this._computeSelectedCount():e?this.props.msgs.length:0,this.state.selectedCount!==t&&this.setState({selectedCount:t})}_isKeyboardUser(){return this.context}isGroupedSticker(){const[e,t]=this.props.msgs;return null!=e.asGroupedSticker&&null!=t.asGroupedSticker}focus(e){var t;(null===(t=this._refAlbumWrapper)||void 0===t?void 0:t.current)&&r.default.focus(this._refAlbumWrapper.current,e)}render(){const{msgs:e,position:t,isMsgVisible:a,albumId:s,isFocusedAlbum:i,focusedMsgIndex:r,selectedMessages:l,isFocusable:d,displayType:u}=this.props,c=e[0],_=e[1],g=c.isSentByMe,C=c.isGroupMsg,S=this.isGroupedSticker(),y=e.length>v.default.ALBUM_MIN_SIZE?e.length-v.default.ALBUM_MIN_SIZE+1:null,b=t===R.MsgPosition.FRONT||t===R.MsgPosition.SINGLE||S,E=(0,o.default)(W.default.msg,{[W.default.msgContinuation]:t===R.MsgPosition.FRONT||t===R.MsgPosition.MID,"message-out":g,"message-in":!g,[j.LIST_FOCUSABLE_ITEM_CLASS_NAME]:d}),T=!g&&C;let M;if(T){const t=(0,o.default)(W.default.author,{[W.default.groupStickerAuthor]:S});M=(0,Q.jsx)("div",{className:t,children:(0,Q.jsx)(p.default,{msg:e[0],contact:e[0].senderObj,albumId:s})})}const w=(0,o.default)(W.default.message,{[W.default.messageTransparent]:S,[W.default.hasTail]:b,[W.default.tailOverrideHide]:S&&b&&(g||!C),[W.default.hasAuthor]:!this.isGroupedSticker()&&T,[W.default.forwarded]:!this.isGroupedSticker()&&(0,L.showForwarded)(e[0])}),k=(0,o.default)(W.default.albumBubbleContainer,{[W.default.messageBackground]:!S,[W.default.hasBorderBox]:!S});let N,G,$,X,J;b&&(N=(0,Q.jsx)(V.default,{name:(0,Y.getTailName)(g),className:W.default.tail,containerRef:this._refTail})),c.canQuickForward()&&(G=(0,Q.jsx)("div",{className:(0,o.default)(W.default.quickActionButton,{[W.default.authorForward]:T}),onClick:()=>{this.openForwardFlow(!1)},role:"button",children:(0,Q.jsx)(V.default,{name:"forward-chat"})})),(this.state.hover||this.state.contextMenu)&&($=(0,Q.jsx)(O.default,{msg:c.unsafe(),hasAuthor:T,position:t,ref:this.setRefContext,onToggle:e=>{this.handleMenu(e)}},"icon-context")),X=this.state.contextMenu?"none":c.isRTL?"pop-fast-reverse":"pop-fast",this.state.contextMenu&&(J=(0,Q.jsx)(H.UIE,{displayName:"MsgContextMenu",escapable:!0,popable:!0,requestDismiss:this.closeContextMenu,children:(0,Q.jsx)(K.default,{contextMenu:this.state.contextMenu})}));const Z=this.props.selectable?(0,Q.jsx)(D.default,{checked:this.state.selectedCount>0,theme:this.state.selectedCount>0&&this.state.selectedCount<e.length?m.CHECKBOX_THEME.PARTIAL:void 0,onClick:e=>{this.handleSelectClick({event:e})}}):null;let ee;if(this.props.isFocusedAlbum&&(ee=(0,Q.jsx)(z.WhileFocusedListener,{parent:this})),S){var te,ae;const t=e.map((e=>(0,Q.jsx)(z.SelectionListener,{parent:this,msgId:e.id.toString(),selectedMessages:l},e.id.toString()))),o=this.props.selectable?(0,Q.jsx)(I.default,{checked:this.props.selectedMessages.isSelected((0,U.unproxy)(c.unsafe())),onClick:()=>{this.handleSelectClick({selectedMsg:c.unsafe()})}}):null,d=this.props.selectable?(0,Q.jsx)(I.default,{checked:this.props.selectedMessages.isSelected((0,U.unproxy)(_.unsafe())),onClick:()=>{this.handleSelectClick({selectedMsg:_.unsafe()})}}):null,h=e.map((e=>e.id.toString()));return(0,Q.jsxs)("div",{className:E,"data-id":s,ref:this._refAlbumWrapper,tabIndex:-1,children:[(0,Q.jsx)(q.default,{transitionName:"delay-leave",children:Z}),(0,Q.jsxs)("div",{className:w,onContextMenu:this.contextMenu,children:[N,M,(0,Q.jsxs)("div",{className:W.default.groupStickerContainer,children:[(0,Q.jsxs)("div",{onMouseEnter:null===(te=this._firstStickerRef.current)||void 0===te?void 0:te.startAnimation,className:W.default.singleGroupedStickerContainer,ref:this._setRefLeftStickerBubble,children:[(0,Q.jsx)(q.default,{transitionName:"delay-leave",children:o}),(0,Q.jsx)(A.default,{msg:(0,n.default)(c.asGroupedSticker,"firstMsg.asGroupedSticker"),menuTransition:X,onOpenForwardFlow:this.openForwardFlow,isMsgVisible:a,scrollMsg:this.scrollMsg,highlight:this.highlight,isFocused:i&&0===r,forwardRef:this._firstStickerRef,displayType:u})]}),(0,Q.jsxs)("div",{onMouseEnter:null===(ae=this._secondStickerRef.current)||void 0===ae?void 0:ae.startAnimation,className:W.default.singleGroupedStickerContainer,ref:this._setRefRightStickerBubble,children:[(0,Q.jsx)(q.default,{transitionName:"delay-leave",children:d}),(0,Q.jsx)(A.default,{msg:(0,n.default)(_.asGroupedSticker,"secondMsg.asGroupedSticker"),menuTransition:X,onOpenForwardFlow:this.openForwardFlow,isMsgVisible:a,scrollMsg:this.scrollMsg,highlight:this.highlight,isFocused:i&&1===r,forwardRef:this._secondStickerRef,displayType:u})]}),(0,P.receiveReactionsEnabled)()&&(0,Q.jsx)(F.default,{msgIds:h,onReactionChange:this._handleReactionChange})]})]}),t]})}{const t=e.map((e=>e.asAlbumAsset)).filter(Boolean);t.length!==e.length&&(__LOG__(4,void 0,new Error,!0)`Only ${t.length}/${e.length} were valid album messages`,SEND_LOGS("invalid-album-grid"));let i=null;if((0,P.receiveReactionsEnabled)()&&t.length>0){const e=t.map((e=>e.id.toString())),a=t.some((e=>!0===e.hasReaction));i=(0,Q.jsx)(B.default,{msgIds:e,isSentByMe:g,hasReaction:a})}const r=t.length>v.default.ALBUM_MIN_SIZE?t[0]:null,o=(0,L.showForwarded)(e[0])?(0,Q.jsx)(x.default,{msg:e[0].unsafe(),className:W.default.forwardedIndicator}):null;return(0,Q.jsxs)("div",{className:E,"data-id":s,ref:this._refAlbumWrapper,tabIndex:-1,children:[(0,Q.jsx)(q.default,{transitionName:"delay-leave",children:Z}),(0,Q.jsxs)("div",{className:w,onContextMenu:this.contextMenu,onMouseOver:this.mouseOver,onMouseDown:this.mouseDown,onMouseUp:this.mouseOver,onMouseLeave:this.mouseDown,children:[N,(0,Q.jsxs)("div",{className:k,ref:this.setRefBubble,children:[M,o,(0,Q.jsxs)("div",{className:W.default.gridContainer,children:[(0,Q.jsx)(h.default,{msg:(0,n.default)(e[0].asAlbumAsset,"msgs[0].asAlbumAsset"),albumMsgs:t,albumPosition:f.AlbumPosition.TOP_LEFT,isMsgVisible:a,ref:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((t=>{this._handleAlbumGridRendered(t,e[0])}))}),(0,Q.jsx)(h.default,{msg:(0,n.default)(e[1].asAlbumAsset,"msgs[1].asAlbumAsset"),albumMsgs:t,albumPosition:f.AlbumPosition.TOP_RIGHT,isMsgVisible:a,ref:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((t=>{this._handleAlbumGridRendered(t,e[1])}))}),(0,Q.jsx)(h.default,{msg:(0,n.default)(e[2].asAlbumAsset,"msgs[2].asAlbumAsset"),albumMsgs:t,albumPosition:f.AlbumPosition.BOTTOM_LEFT,isMsgVisible:a,ref:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((t=>{this._handleAlbumGridRendered(t,e[2])}))}),(0,Q.jsx)(h.default,{msg:(0,n.default)(e[3].asAlbumAsset,"msgs[3].asAlbumAsset"),albumMsgs:t,albumPosition:f.AlbumPosition.BOTTOM_RIGHT,isMsgVisible:a,zoomMsg:r,numAdditionalMedia:y,ref:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((t=>{this._handleAlbumGridRendered(t,e[3])}))})]})]}),(0,Q.jsx)(q.default,{transitionName:X,children:$}),G,i]}),J,ee,(0,Q.jsx)(z.SelectionListener,{parent:this,msgId:e[0].id.toString(),selectedMessages:l})]})}}}t.default=$,$.contextType=w.default,$.displayName="AlbumWrapper"},1195:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(48360)),i=a(67294),r=a(41036),o=a(88102),l=s(a(69618)),d=s(a(20668)),u=a(58668),c=a(31019),h=s(a(23217)),f=a(49082),p=a(85893);var m=(0,i.forwardRef)(((e,t)=>{const a=(0,f.useModelValues)(e.msg,["ack","isSentByMe","type"]),s=(0,f.useModelValues)(e.mediaData,["mediaStage","size"]),m=(0,i.useRef)(null),_=()=>{e.msg.forceDownloadMediaEvenIfExpensive()},g=()=>{e.msg.resumeUpload()},v=()=>{e.msg.resumeRemoteUpload()},C=()=>{o.Cmd.openModal((0,p.jsx)(d.default,{msg:e.msg.unsafe()}))},S=()=>{e.msg.cancelUpload()};switch((0,i.useImperativeHandle)(t,(()=>({handleKeyActivation:e=>{var t;null===(t=m.current)||void 0===t||t.handleKeyActivation(e)}}))),s.mediaStage){case u.MEDIA_DATA_STAGE.RESOLVED:return(0,p.jsx)(r.WrappedAudioPlayer,{ref:m,mediaData:(0,c.unproxy)(e.mediaData),outgoingMsg:a.isSentByMe,played:"ptt"!==a.type||a.ack===l.default.ACK.PLAYED,displayType:e.displayType,getSequentialMsg:e.getSequentialMsg,msg:(0,c.unproxy)(a)});case u.MEDIA_DATA_STAGE.NEED_POKE:return(0,p.jsx)(r.AudioPlayerFrame,{icon:(0,p.jsx)(h.default,{name:"audio-download"}),ariaLabel:n.default._("Download voice message",null,{hk:"1IMhGA"}),outgoingMsg:a.isSentByMe,action:_,msg:"ptt"===a.type?(0,c.unproxy)(a):void 0});case u.MEDIA_DATA_STAGE.NEED_UPLOAD:return(0,p.jsx)(r.AudioPlayerFrame,{icon:(0,p.jsx)(h.default,{name:"audio-upload"}),ariaLabel:n.default._("Upload voice message",null,{hk:"GMghs"}),outgoingMsg:a.isSentByMe,action:g,msg:"ptt"===a.type?(0,c.unproxy)(a):void 0});case u.MEDIA_DATA_STAGE.REMOTE_NEED_UPLOAD:return(0,p.jsx)(r.AudioPlayerFrame,{icon:(0,p.jsx)(h.default,{name:"audio-upload"}),ariaLabel:n.default._("Upload voice message",null,{hk:"GMghs"}),outgoingMsg:a.isSentByMe,action:v,msg:"ptt"===a.type?(0,c.unproxy)(a):void 0});case u.MEDIA_DATA_STAGE.ERROR_MISSING:return(0,p.jsx)(r.AudioPlayerFrame,{icon:(0,p.jsx)(h.default,{name:"audio-play",directional:!0}),ariaLabel:n.default._("Play voice message",null,{hk:"1IoAqS"}),outgoingMsg:a.isSentByMe,action:C,msg:"ptt"===a.type?(0,c.unproxy)(a):void 0});case u.MEDIA_DATA_STAGE.UPLOADING:case u.MEDIA_DATA_STAGE.SENDING:const t=s.mediaStage===u.MEDIA_DATA_STAGE.UPLOADING;return(0,p.jsx)(r.AudioPlayerFrame,{action:t?S:void 0,canCancel:t,fileSize:s.size,outgoingMsg:a.isSentByMe,spinner:!0,msg:"ptt"===a.type?(0,c.unproxy)(a):void 0});default:return(0,p.jsx)(r.AudioPlayerFrame,{spinner:!0,outgoingMsg:a.isSentByMe,msg:"ptt"===a.type?(0,c.unproxy)(a):void 0})}}));t.default=m},72655:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{chat:t,disableClick:a,displaySelf:s,quotedRemoteJid:r,albumId:m}=e,_=(0,c.useModelValues)(e.msg,["sender","chat","type","isLive","isStatusV3","id","quotedMsg"]),g=(0,c.useModelValues)(e.contact,["id","name","notifyName","pushname","verifiedName"]),v=t||_.chat;v||(__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("author-with-no-chat"));const C=v?v.assignedColor(_.sender):1,S=a?null:()=>{(0,d.findChat)(_.sender).then((e=>{o.Cmd.openChatFromUnread(e).then((t=>{t&&o.Cmd.focusChatTextInput(e)}))}))},y=(0,n.default)(i.default.author,`color-${C}`,{[i.default.hoverable]:S});let b;if(s)b=(0,f.jsx)(l.EmojiText,{text:p(u.default.t(1911),_.isStatusV3,r)});else if(g.name||g.verifiedName){var E;b=[(0,f.jsx)(l.EmojiText,{text:p(null!==(E=g.name)&&void 0!==E?E:g.verifiedName,_.isStatusV3,r),className:i.default.name,onClick:S},"author")]}else{b=[(0,f.jsx)("span",{className:i.default.number,role:S?"button":null,onClick:S,children:p((0,h.default)(g.id),_.isStatusV3,r)},`${_.id.toString()}-number`)];const e=b;if(!_.isStatusV3){const t=m?`${m}-push-name`:`${_.id.toString()}-push-name`;let a;a=g.notifyName?g.notifyName:g.pushname,e.push((0,f.jsx)(l.EmojiText,{className:i.default.screenName,onClick:S,direction:"auto",ellipsify:!0,text:a},t))}}return(0,f.jsx)("div",{className:y,role:e.role||"",children:b})};var n=s(a(94184)),i=s(a(78923)),r=a(69951),o=a(88102),l=a(65417),d=a(50101),u=s(a(43725)),c=a(49082),h=s(a(39938)),f=a(85893);function p(e,t,a){let s;if(a){const e=r.ChatCollection.get(a);s=e?e.formattedTitle:u.default.t(515)}return t?`${e}  ${u.default.t(1280)}`:s?`${e}  ${s}`:e}},18941:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,r.useModelValues)(e.msg,["thumbnail","title","description","matchedText","isSentByMe","star"]);return(0,o.jsx)(i.default,{title:t.title,description:t.description,thumbnailJpeg:t.thumbnail,onClick:()=>{const e=t.matchedText;(0,n.openExternalLink)(e)},isSentByMe:t.isSentByMe,star:t.star})};var n=a(12591),i=s(a(51845)),r=a(49082),o=a(85893)},11740:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,o.unproxy)(e.msg);if(t.ctwaContext){const a=t.ctwaContext.mediaType!==r.ExternalAdReplyInfoMediaType.VIDEO||t.ctwaContext.isSuspiciousLink?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(l.SuspiciousLabel,{msg:t}),(0,d.jsx)(n.default,{context:t.ctwaContext,isSentByMe:t.isSentByMe,compose:!1})]}):(0,d.jsx)(i.default,{msg:t,context:t.ctwaContext});return(0,d.jsx)("div",{className:e.wrapperClass,children:a})}return null};var n=s(a(94908)),i=s(a(71604)),r=a(24808),o=a(31019),l=a(7538),d=a(85893)},94908:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let t,{sourceUrl:a,context:s,isSentByMe:m,compose:_}=e;t=(null==s?void 0:s.isSuspiciousLink)||!(null==s?void 0:s.thumbnailUrl)&&!(null==s?void 0:s.thumbnail)?(0,p.jsx)("div",{className:o.default.noThumbContainer,children:(0,p.jsx)(h.default,{className:o.default.noThumbIcon,name:"link"})}):(0,p.jsx)("img",{alt:"",className:o.default.media,src:s.thumbnailUrl?s.thumbnailUrl:`data:image/jpeg;base64,${s.thumbnail||""}`});const g=null!=(null==s?void 0:s.description)&&!s.isSuspiciousLink&&(0,p.jsx)("div",{className:o.default.description,children:(0,p.jsx)(l.EmojiText,{text:s.description,titlify:!0})});let v=a;if(s&&(v=s.sourceUrl,!s.isSuspiciousLink&&(s.title||s.thumbnailUrl||s.thumbnail))){v=f.URL.hostname(v);try{v=i.default.toUnicode(v)}catch(e){}}const C=v&&(0,p.jsx)("div",{className:o.default.source,children:(0,p.jsx)(l.EmojiText,{text:v})}),S=(null==s?void 0:s.isSuspiciousLink)?null:null==s?void 0:s.title,y=(0,n.default)(o.default.preview,{[o.default.isCompose]:_,[o.default.bubbleIn]:!_&&!m,[o.default.bubbleOut]:m});return(0,p.jsxs)("div",{className:y,onClick:()=>{if(!_)if(null==s?void 0:s.isSuspiciousLink){const e=(0,u.findLink)(s.sourceUrl);e&&r.Cmd.openModal((0,p.jsx)(c.default,{link:e}))}else(null==s?void 0:s.sourceUrl)&&(0,d.openExternalLink)(s.sourceUrl)},children:[t,(0,p.jsxs)("div",{className:o.default.body,children:[(0,p.jsx)("div",{className:o.default.title,title:S,children:(0,p.jsx)(l.EmojiText,{text:S})}),g,C]})]})};var n=s(a(94184)),i=s(a(3689)),r=a(88102),o=s(a(23932)),l=a(65417),d=a(12591),u=a(86688),c=s(a(82791)),h=s(a(23217)),f=a(2541),p=a(85893)},71604:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const{context:a}=e,s=(0,r.useMemo)((()=>{if(e.msg.type===l.default.MSG_TYPE.VIDEO){const t=e.msg.toJSON(),a=new g.default({fromMe:e.msg.id.fromMe,remote:e.msg.id.remote,id:(0,S.newTag)()});return t.id=a,new _.Msg(t)}return e.msg}),[e.msg]),n=(0,r.useRef)(null),[w,k]=(0,r.useState)((()=>v.default.isOpened(s)?I:A));(0,T.useListener)(v.default,`${s.id.toString()}_pip_did_open`,(()=>{k(I)})),(0,T.useListener)(v.default,`${s.id.toString()}_pip_did_close`,(()=>{w!==A&&k(A)}));const j=e=>{e.preventDefault(),e.stopPropagation(),(0,h.openExternalLink)(a.sourceUrl)},N=E.URL.withoutWww(E.URL.hostname(e.context.sourceUrl)),O=(0,P.jsx)("div",{className:x.default.source,children:(0,P.jsx)(c.EmojiText,{text:N})}),R=(0,i.default)(x.default.body,{[x.default.noThumb]:!e.context.thumbnail}),D=a.description?(0,P.jsx)("div",{className:x.default.description,title:e.context.description,children:(0,P.jsx)(c.EmojiText,{text:e.context.description})}):null,L=(0,i.default)(x.default.preview,{[x.default.bubbleIn]:!s.isSentByMe,[x.default.bubbleOut]:s.isSentByMe}),B=w!==A||f.GK.supportsFeature(f.GK.F.MD_BACKEND)?null:(0,P.jsx)("div",{className:x.default.mediaStateControlsWrapper,children:(0,P.jsx)(m.Play,{})}),F=w===I?(0,P.jsx)(C.default,{icon:(0,P.jsx)(y.default,{name:"video-pip-large"}),children:p.default.t(1039)}):null;let G;G=e.context.thumbnail||e.context.thumbnailUrl?(0,P.jsx)("img",{alt:"",className:(0,i.default)(x.default.thumbnail,{[x.default.youtubeThumbnail]:!1}),src:e.context.thumbnail?`data:image/jpeg;base64,${e.context.thumbnail}`:e.context.thumbnailUrl}):(0,P.jsx)("div",{className:x.default.thumbnailPlaceholder});const U=(0,P.jsx)("div",{className:(0,i.default)(x.default.attribution,u.default.clickable),onClick:j,children:(0,P.jsx)(y.default,{name:null!==(t=d.ATTRIBUTION_ICONS[N])&&void 0!==t?t:"logo-facebook"})});return(0,P.jsxs)("div",{className:L,children:[(0,P.jsxs)("div",{ref:n,className:x.default.thumbnailWrapper,onClick:f.GK.supportsFeature(f.GK.F.MD_BACKEND)?j:()=>{var t,a;v.default.openOgVideoPiP("",e.context.thumbnail||"",s,0,null!==(t=null===(a=n.current)||void 0===a?void 0:a.getBoundingClientRect())&&void 0!==t?t:null),M.default.queryVideoPlaybackUrl(e.context.mediaUrl).then((t=>{if(v.default.isOpened(s)){if(!t.url)throw new Error("Url is missing in response.");v.default.openOgVideoPiP(t.url,e.context.thumbnail||"",s,0,null)}})).catch((()=>{v.default.closePiP(),o.Cmd.openToast((0,P.jsx)(b.Toast,{id:(0,b.genId)(),msg:p.default.t(1037),action:{actionText:p.default.t(1038),onAction:()=>{(0,h.openExternalLink)(e.context.sourceUrl)}}}))}))},children:[U,G,B,F]}),(0,P.jsxs)(h.ExternalLink,{className:R,href:a.sourceUrl,children:[(0,P.jsx)("div",{className:x.default.title,title:a.title,children:(0,P.jsx)(c.EmojiText,{text:a.title})}),D,O]})]})};var i=n(a(94184)),r=a(67294),o=a(88102),l=n(a(69618)),d=a(40875),u=n(a(16710)),c=a(65417),h=a(12591),f=a(7293),p=n(a(43725)),m=s(a(41124)),_=a(17304),g=n(a(32219)),v=n(a(77912)),C=n(a(27557)),S=a(15860),y=n(a(23217)),b=a(50452),E=a(2541),T=a(19529),x=n(a(91881)),M=n(a(56891)),P=a(85893);const A="PREVIEW",I="FLOATER"},75343:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{displayAuthor:t,msg:a}=e;const s=(0,l.getMaybeMeUser)(),T=a.sender.equals(s),x=(0,b.default)(),M=e=>{e&&e.stopPropagation();const{orderId:t,sellerJid:s,token:n}=a;if(null!=t&&null!=s&&null!=n){const e=(0,v.buildProductCatalogContext)(new C.ProductCatalogSession,(0,r.getMaybeBizPlatformForLogging)(s),p.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_ORDER_MESSAGE);(0,u.logOrderMessageClick)({catalogContext:e,catalogOwnerJid:s,orderId:t}),null!=a.orderId&&((0,c.qplStartOrderView)(!!_.OrderCollection.get(t)),i.Cmd.openDrawerRight((0,E.jsx)(S.ProductDetailsFlowLoadable,{chat:a.chat,orderMessage:a,orderId:t,token:n,userIsCartOwner:T,sellerJid:s}),"slide-left",x,e))}},P=(0,E.jsx)(o.EmojiText,{text:a.message,dirMismatch:a.rtl!==d.default.isRTL(),direction:a.dir,inferLinesDirection:!0}),A=(0,E.jsx)("div",{className:m.default.meta,children:(0,E.jsx)(f.Meta,{msg:a})}),I=(0,E.jsx)(n.default,{items:[{label:T?d.default.t(1020):d.default.t(1019),a8nKey:"view-cart-button",onClick:M}]});return(0,E.jsxs)(y.default,{msg:a,displayAuthor:t,hideMeta:!0,children:[(0,E.jsx)("div",{className:m.default.orderPreview,children:(0,E.jsx)(g.OrderPreview,{msg:a.unsafe(),onClick:M})}),(0,E.jsxs)(h.default,{msg:a.unsafe(),"data-id":a.id,className:m.default.messageText,children:[P,A]}),I]})};var n=s(a(58286)),i=a(88102),r=a(62632),o=a(65417),l=a(99234),d=s(a(43725)),u=a(79544),c=a(56057),h=s(a(54703)),f=a(42316),p=s(a(11339)),m=s(a(62913)),_=a(84312),g=a(36707),v=a(97567),C=a(9153),S=a(67455),y=s(a(75618)),b=s(a(59147)),E=a(85893)},93135:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onProductClick:t,trusted:a,displayAuthor:s,quotedMsg:k}=e,j=(0,P.default)(),[N]=(0,i.useState)((()=>new b.ProductCatalogSession));(0,i.useEffect)((()=>{const{msg:t}=e;t.businessOwnerJid&&(0,A.createWid)(t.businessOwnerJid)&&l.CatalogCollection.addMsgAsProduct((0,x.unproxy)(t.unsafe()))}),[]);const O=(0,M.useModelValues)(e.msg,["businessOwnerJid","caption","chat","dir","footer","id","isGroupMsg","asProductInquiry","mediaData","productId","productImageCount","retailerId","rtl","senderObj","t","title","type","url"]),{productId:R,businessOwnerJid:D,t:L,chat:B}=O,F=(0,i.useCallback)((e=>{if(e&&e.stopPropagation(),!R||!D)return;(0,_.qplStartProductView)("Message");const a=(0,f.default)({productId:R,businessOwnerJid:D,msgT:L});if(!a)return void(0,_.qplDropProductView)();const s=(0,y.buildProductCatalogContext)(N,(0,c.getMaybeBizPlatformForLogging)(D),C.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_MESSAGE);(0,m.logProductMsgClick)({product:(0,x.unproxy)(a),catalogContext:s});const n=b.ProductCatalogSession.toString();t?t(a,n):d.Cmd.openDrawerRight((0,I.jsx)(E.ProductDetailsFlowLoadable,{refreshCarousel:!0,chat:B,product:a}),"slide-left",j,s)}),[R,D,t,L,B,N,j]),G=Boolean(O.caption||O.footer);let U;if(G){const t={selectable:a,dirMismatch:O.rtl!==p.default.isRTL(),direction:O.dir,inferLinesDirection:!0};U=(0,I.jsxs)("div",{className:(0,r.default)([w.content,p.default.isRTL()&&w.contentRTL]),children:[O.caption?(0,I.jsx)(g.default,{msg:e.msg.unsafe(),spacer:!1,children:(0,I.jsx)(h.EmojiText,(0,n.default)((0,n.default)({},t),{},{text:O.caption,xstyle:w.caption,element:"p"}))}):null,O.footer?(0,I.jsx)(h.EmojiText,(0,n.default)((0,n.default)({},t),{},{text:O.footer,formatters:(0,u.Conversation)({links:O.getFooterLinks(),trusted:a}),xstyle:[w.footer,O.caption&&w.footerMargin]})):null,(0,I.jsx)("div",{className:(0,r.default)([w.meta,p.default.isRTL()&&w.metaRTL]),children:(0,I.jsx)(v.Meta,{msg:e.msg})})]})}const V=s?(0,I.jsx)("div",{className:(0,r.default)(w.author),children:(0,I.jsx)(o.default,{msg:O,contact:O.senderObj})}):null;return(0,I.jsxs)("div",{className:(0,r.default)(w.bubble),children:[V,(0,I.jsx)(S.default,{msg:e.msg,mediaData:O.mediaData,hideMeta:G,trusted:a,displayAuthor:!1,contentContainerClassName:(0,r.default)(w.productContainer),captionComponent:(0,I.jsx)(T.ProductInfo,{trusted:a,onClick:F,msg:e.msg}),thumbClassName:(0,r.default)(w.thumb),onThumbClick:F,quotedMsg:k}),U,(0,I.jsx)(h.EmojiText,{xstyle:[w.productCta,G&&w.btnBorder],onClick:F,text:p.default.t(1102)})]})};var n=s(a(81109)),i=a(67294),r=s(a(56720)),o=s(a(72655)),l=a(99989),d=a(88102),u=a(10233),c=a(62632),h=a(65417),f=s(a(26218)),p=s(a(43725)),m=a(77975),_=a(82145),g=s(a(54703)),v=a(42316),C=s(a(11339)),S=s(a(74790)),y=a(97567),b=a(9153),E=a(67455),T=a(75737),x=a(31019),M=a(49082),P=s(a(59147)),A=a(58021),I=a(85893);const w={bubble:{position:"g0rxnol2",zIndex:"jnl3jror",boxSizing:"cm280p3y",maxWidth:"f4q7vbcz"},author:{paddingTop:"ocd2b0bc",paddingEnd:"f9ovudaz",paddingBottom:"bxcbqipq",paddingStart:"mhcwslh8"},thumb:{position:"g0rxnol2",display:"p357zi0d",alignItems:"gndfcl4n",justifyContent:"ac2vgrno",maxWidth:"laorhtua",overflowX:"gfz4du6o",overflowY:"r7fjleex",cursor:"ajgl1lbb",borderTopStartRadius:"l8fojup5",borderTopEndRadius:"paxyh2gw"},productContainer:{position:"g0rxnol2",overflowX:"gfz4du6o",overflowY:"r7fjleex"},productCta:{display:"f804f6gw",paddingTop:"esbfogcw",paddingBottom:"aiput80m",fontSize:"f8jlpxt4",fontWeight:"hnx8ox4h",color:"o0rubyzf",textAlign:"qfejxiq4",cursor:"ajgl1lbb",":hover":{textDecoration:"o69d8n2f"}},btnBorder:{borderTop:"ei53l81b"},content:{position:"g0rxnol2",marginTop:"dj1c3cmq",marginEnd:"bugiwsl0",marginBottom:"or9x5nie",marginStart:"fooq7fky"},contentRTL:{textAlign:"cb8ormfa"},caption:{fontSize:"f8jlpxt4"},footer:{display:"f804f6gw",fontSize:"ovllcyds",lineHeight:"q6wg26sa",color:"hp667wtd"},footerMargin:{marginTop:"qt60bha0"},meta:{position:"lhggkp7q",end:"ebjesfe0",bottom:"pgz13gmm"},metaRTL:{right:"ryab0j1q"}}},75737:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ProductInfo=function(e){const{trusted:t,onClick:a}=e,{description:s,currencyCode:f,isSentByMe:p,priceAmount1000:m,salePriceAmount1000:_,title:g}=(0,u.useModelValues)(e.msg,["currencyCode","description","isSentByMe","priceAmount1000","salePriceAmount1000","title"]),v=(0,i.Conversation)({mentions:e.msg.mentionMap(),links:e.msg.getLinks(),selectable:!0,trusted:!0===t});let C;null!=m&&f?C=(0,c.jsx)(l.default,{product:{currency:f,priceAmount1000:m,salePriceAmount1000:_},direction:"inherit",selectable:!0}):s&&(C=(0,c.jsx)(o.EmojiText,{direction:"inherit",selectable:!0,text:s,formatters:v,textLimit:r.default.MAX_PRODUCT_SUBTITLE_LENGTH}));return(0,c.jsxs)("div",{className:(0,n.default)(h.productInfo,p&&h.bubbleOut,!p&&h.bubbleIn),onClick:a,children:[(0,c.jsx)(o.EmojiText,{direction:"inherit",selectable:!0,text:g,formatters:v,ellipsify:!0,xstyle:h.title}),C?(0,c.jsx)(d.default,{msg:e.msg.unsafe(),xstyle:h.subtitle,children:C}):null]})};var n=s(a(56720)),i=a(10233),r=s(a(69618)),o=a(65417),l=s(a(62089)),d=s(a(21595)),u=a(49082),c=a(85893);const h={productInfo:{boxSizing:"cm280p3y",display:"p357zi0d",flexDirection:"f8m0rgwh",paddingTop:"n1yiu2zv",paddingEnd:"ft2m32mm",paddingBottom:"eb4rp10x",paddingStart:"nu34rnf1",cursor:"ajgl1lbb",borderBottomStartRadius:"cqsf3vkf",borderBottomEndRadius:"sfeitywo"},bubbleIn:{backgroundColor:"rrq4r3yd"},bubbleOut:{backgroundColor:"s0eflmyh"},title:{fontSize:"f8jlpxt4"},subtitle:{marginTop:"kiiy14zj",fontSize:"dsh4tgtl",color:"hp667wtd",overflowWrap:"fd365im1"}}},7538:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.SuspiciousLabel=function(e){var t;const a=u(e);return null==a?null:(0,d.jsxs)("div",{className:(0,n.default)(o.default.container,{[o.default.isLinkMsg]:Boolean(e.link),[o.default.ctwaContainer]:null!=(null===(t=e.msg)||void 0===t?void 0:t.ctwaContext)}),children:[(0,d.jsx)(l.default,{name:"alert",display:"inline",className:o.default.icon}),(0,d.jsx)("span",{className:o.default.text,children:a})]})},t.getSuspiciousLabel=u;var n=s(a(94184)),i=s(a(69618)),r=s(a(43725)),o=s(a(55758)),l=s(a(23217)),d=a(85893);function u(e){var t;let a,{msg:s,link:n,displayType:o}=e;if(s||n){if(null==s||null===(t=s.ctwaContext)||void 0===t?void 0:t.isSuspiciousLink)a=r.default.t(1333);else if(n){var l;(null===(l=n.suspiciousCharacters)||void 0===l?void 0:l.size)&&(a=r.default.t(1333))}else if(s){const e=s.getSuspiciousLinks().length;if(e){a=1===s.getLinks().length||o===i.default.DISP_TYPE.GALLERY?r.default.t(1333):r.default.t(1334,{count:e,_plural:e})}}return a}}},257:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(94184)),i=s(a(48360)),r=a(67294),o=s(a(39770)),l=a(88102),d=s(a(69618)),u=a(12591),c=s(a(43725)),h=a(86688),f=a(84387),p=a(57224),m=a(5524),_=s(a(65932)),g=a(31019),v=s(a(82791)),C=s(a(23217)),S=s(a(110)),y=a(85893);const{QUICK_REPLY:b,URL:E,CALL:T}=d.default.TEMPLATE_BUTTON_SUBTYPE;function x(e,t){const a=(0,h.findLink)(e,!1,t.from);if(null==a?void 0:a.suspiciousCharacters)return l.Cmd.openModal((0,y.jsx)(v.default,{link:a}));const s=(0,y.jsx)(o.default,{a8nText:"popup-controls-go",type:"primary",onClick:()=>function(e){(0,u.openExternalLink)(e),l.Cmd.closeModal()}(e),children:c.default.t(1624)},0),n=(0,y.jsx)(o.default,{a8nText:"popup-controls-cancel",type:"secondary",onClick:()=>l.Cmd.closeModal(),children:c.default.t(1574)},1),i=d.default.TEMPLATE_URL_START+d.default.TEMPLATE_URL_END;l.Cmd.openModal((0,y.jsxs)(p.Modal,{title:c.default.t(979),actions:[n,s],children:[(0,y.jsx)("div",{children:c.default.t(980)}),(0,y.jsx)(u.ExternalLink,{href:e,isLongTemplateUrl:e.length>i,children:e})]}))}class M extends r.PureComponent{constructor(){super(...arguments),this.handleClick=e=>{const{subtype:t,url:a,displayText:s,selectionId:n,id:r}=e;t===T?function(){const e=(0,y.jsx)(o.default,{a8nText:"popup-controls-ok",type:"primary",onClick:()=>l.Cmd.closeModal(),children:c.default.t(1765)},0);l.Cmd.openModal((0,y.jsx)(p.Modal,{actions:[e],children:i.default._("Calls are not supported on WhatsApp Web. Open WhatsApp on your phone to call this business.",null,{hk:"2GJELE"})}))}():t===E&&a?x(a,this.props.msg):t===b&&(0,m.sendTextMsgToChat)(this.props.chat,s,{quotedMsg:(0,g.unproxy)(this.props.msg),selectedIndex:parseInt(r,10),selectedId:n}).then((()=>{e.selected=!0}))}}componentDidMount(){const{msg:e}=this.props;e.buttons&&e.buttons.length&&e.buttons.forEach((e=>this.props.listeners.add(e,"change:selected",(()=>this.forceUpdate()))))}render(){const{msg:e}=this.props;let t;return e.buttons&&(t=e.buttons.map((e=>{let t;switch(e.subtype){case T:t=(0,y.jsx)(C.default,{name:"hsm-call",className:S.default.icon});break;case E:t=(0,y.jsx)(C.default,{name:"hsm-link",className:S.default.icon})}const a=e.selected?void 0:()=>this.handleClick(e);return(0,y.jsxs)("button",{className:(0,n.default)(S.default.actionButton,{[S.default.firstButton]:0===parseInt(e.id,10)&&e.subtype!==b,[S.default.disabled]:e.selected}),onClick:a,children:[t,(0,y.jsx)("span",{className:S.default.actionText,children:e.displayText})]},e.id)}))),(0,y.jsx)("div",{className:(0,n.default)({[S.default.quickReply]:e.isQuickReply,[S.default.callUrl]:!e.isQuickReply}),children:(0,y.jsx)("div",{className:S.default.buttonContainer,children:t})})}}M.CONCERNS={msg:["buttons","isQuickReply","from"]},M.displayName="TemplateButtons";var P=(0,f.ListenerHOC)((0,_.default)(M,M.CONCERNS));t.default=P},95839:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{dir:t,footer:a,isShown:s,msg:h,rtl:f,type:p,trusted:m}=e,_=f!==l.default.isRTL();if(s&&a){const e=(0,n.default)(u.default.footer,{[u.default.isMedia]:p!==i.default.MSG_TYPE.CHAT,[u.default.dirMismatch]:_}),{formatters:s,selectable:l}=h.isDynamicReplyButtonsMsg?(0,o.enableHeaderAndFooterFormatting)(h.getFooterLinks(),!0===m):{};return(0,c.jsx)(d.default,{className:e,spacer:!f,msg:h,children:(0,c.jsx)(r.EmojiText,{text:a,direction:t,dirMismatch:_,selectable:l,formatters:s})})}return null};var n=s(a(94184)),i=s(a(69618)),r=a(65417),o=a(38649),l=s(a(43725)),d=s(a(54703)),u=s(a(78362)),c=a(85893)},27295:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,r.useModelValues)(e.msg,["type","subtype","body","recipients"]),{subtype:a,body:s,recipients:l}=t;if("create"===a){const e=parseInt(s,10);return(0,o.jsx)(i.default,{id:1912,params:{count:e},plural:e,wrapInHiddenToken:!0})}if("add"===a)return(0,o.jsx)(i.default,{id:1713,params:{name:(0,n.getFormattedNames)(l,!0)},plural:l.length,wrapInHiddenToken:!0});if("remove"===a)return(0,o.jsx)(i.default,{id:1714,params:{name:(0,n.getFormattedNames)(l,!0)},plural:l.length,wrapInHiddenToken:!0});return null};var n=a(83288),i=s(a(56074)),r=a(49082),o=a(85893)},58286:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let t;t=e.placeholder?(0,d.jsx)("div",{className:r.default.actionsBtn,children:""}):e.items.map(((e,t)=>(0,d.jsxs)("div",{"data-a8n":n.default.key(e.a8nKey),className:(0,i.default)(r.default.actionsBtn,{[r.default.disabled]:e.disabled}),"aria-disabled":e.disabled,onClick:!0===e.disabled?void 0:e.onClick,role:"button",title:e.title||e.label,children:[e.icon?(0,d.jsx)(l.default,{name:e.icon,className:r.default.icon}):null,e.label]},t)));return(0,d.jsx)(o.FlexRow,{className:(0,i.default)(r.default.actions,{[r.default.noDivider]:"no-divider"===e.theme}),align:"center",justify:"evenly",children:t})};var n=s(a(99964)),i=s(a(94184)),r=s(a(22319)),o=a(29623),l=s(a(23217)),d=a(85893)},85559:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{children:t,className:a,contact:l,msg:d,onClick:u,style:c}=e,{isMe:h,formattedUser:f}=(0,r.useModelValues)(l,["formattedUser","name","isMe"]),{t:p}=(0,r.useModelValues)(d,["senderObj","t"]),m=s.Clock.timeStr(p),_=function(e,t){const a=null!=t?t:"";return e&&n.Conn.pushname?n.Conn.pushname:a}(h,f);return(0,o.jsx)(i.CopyableDiv,{className:a,onClick:u,prePlainText:`[${m}] ${_}: `,style:c,children:t})};var s=a(22683),n=a(17239),i=a(9964),r=a(49082),o=a(85893)},28414:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{msg:t}=e;const{replyButtons:a}=t;if(null==a||0===a.length)return null;const s=a.some((e=>e.displayText.length>10));return(0,h.jsx)("div",{className:(0,i.default)(r.default.buttonContainer,{[r.default.stacked]:a.length>=3||s,[r.default.withLargeButtonsSpace]:s}),children:a.map(((e,a)=>(0,h.jsx)(f,{msg:t,replyButton:e},a)))})};var n=s(a(81109)),i=s(a(94184)),r=s(a(41946)),o=s(a(22540)),l=a(13705),d=a(49082),u=a(29193),c=s(a(60265)),h=a(85893);function f(e){let{msg:t,replyButton:a}=e;const{chat:s,isSentByMe:f}=(0,d.useModelValues)(t,["chat","isSentByMe"]),p=(0,d.useModelValues)(a,["selected","displayText","id"]),m=(0,u.useSetModelValue)(a,"selected"),{selected:_,displayText:g}=a,[v,C]=(0,c.default)((()=>{m(!0),(0,o.default)(t,p,s).then((e=>{e!==l.SendMsgResult.OK&&m(!1)})).catch((()=>{m(!1)}))}),{disabled:_});return g?(0,h.jsx)("div",(0,n.default)((0,n.default)({ref:v,className:(0,i.default)(r.default.buttonWrapper,{[r.default.disabled]:_})},C),{},{children:(0,h.jsx)("div",{className:(0,i.default)(r.default.buttonLabel,{[r.default.sentByMe]:f}),children:(0,h.jsx)("span",{children:g})})})):null}},6725:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{spacer:t,trusted:a}=e,s=(0,u.useModelValues)(e.msg,["t","id","dir","rtl","text","initialPageSize","footer","ctwaContext"]),h=s.text;if(!h)return null;const f=!(!s.dir||s.rtl===o.default.isRTL());return(0,c.jsxs)(c.Fragment,{children:[!s.ctwaContext&&(0,c.jsx)(d.SuspiciousLabel,{msg:s}),(0,c.jsx)(l.default,{msg:s,"data-id":s.id,spacer:t,children:(0,c.jsx)(r.default,{text:h,textLimit:s.initialPageSize,children:e=>{let{textLimit:t}=e;const r=(0,n.Conversation)({mentions:s.mentionMap(),links:s.getLinks(t),selectable:true,trusted:!0===a});return(0,c.jsx)(i.EmojiText,{direction:s.dir,dirMismatch:f,formatters:r,inferLinesDirection:!0,selectable:true,text:s.text,textLimit:t})}})})]})};var n=a(10233),i=a(65417),r=s(a(17080)),o=s(a(43725)),l=s(a(54703)),d=a(7538),u=a(49082),c=a(85893)},98886:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,h.useModelValues)(e.msg,["isSentByMe","isGroupMsg","senderObj","subtype"]);let a,s;"fanout"===t.subtype?(a=n.default._("Waiting for this message. Check your phone.",null,{hk:"3bM8te"}),s=(0,o.getFanoutPlaceholderFaqUrl)()):(a=l.default.t(1042),s=(0,o.getCiphertextFaqUrl)());return(0,f.jsx)(c.default,{msg:(0,u.unproxy)(t),displayAuthor:e.displayAuthor,children:(0,f.jsxs)(d.default,{iconName:"ciphertext",msg:t.unsafe(),children:[a," ",(0,f.jsx)("span",{className:(0,i.default)(p),role:"button",onClick:()=>{(e=>{(0,r.openExternalLink)(e)})(s)},children:l.default.t(690)})]})})};var n=s(a(48360)),i=s(a(56720)),r=a(12591),o=a(96384),l=s(a(43725)),d=s(a(99422)),u=a(31019),c=s(a(75618)),h=a(49082),f=a(85893);const p={color:"seuajalt"}},21504:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.canUseCustomCropping=h,t.getBubbleDimension=function(e,t,a,s,d,u,f){const p=u&&a<1?1:a,m=function(e,t,a,s){const i=h(e,t,a)?l:o;return(0,n.default)((0,n.default)({},i),{},{width:null!=s&&s<=i.width?s:i.width})}(e,s,d,f);let _,g;s===r.DisplayTheme.Album?(_=i.default.ALBUM_MAX_HEIGHT-i.default.ALBUM_PADDING,g=i.default.ALBUM_MAX_HEIGHT):(_=p<1?m.portraitWidth:m.width,g=function(e,t,a,s){if(s&&t<=i.default.HSM_ASPECT_RATIO)return c(i.default.HSM_ASPECT_RATIO,e,a);return c(t,e,a)}(m,p,e,t));return{bubbleWidth:_,bubbleHeight:g}},t.getImgStyle=function(e,t,a,s){if(null==e||0===e||null==t||0===t||null==a||0===a||null==s||0===s)return{width:"100%",height:"100%"};return e/t>a/s?{height:"100%"}:{width:"100%"}};var n=s(a(81109)),i=s(a(69618)),r=a(29565);const o={width:330,portraitWidth:330,minAspectRatio:1,maxAspectRatio:2.4},l=(0,n.default)((0,n.default)({},o),{},{portraitWidth:240,minAspectRatio:.71,maxAspectRatio:4}),d=new Set([i.default.MSG_TYPE.IMAGE,i.default.MSG_TYPE.VIDEO]),u=new Set([i.default.DISP_TYPE.CONVERSATION,i.default.DISP_TYPE.MSG_INFO,i.default.DISP_TYPE.STARRED_MSGS]);function c(e,t,a){if(null==e)return a===i.default.MSG_TYPE.VIDEO?240:330;let s;return s=e<t.minAspectRatio?t.portraitWidth/t.minAspectRatio:e<1?t.portraitWidth/e:e<=t.maxAspectRatio?t.width/e:t.width/t.maxAspectRatio,s}function h(e,t,a){return d.has(e)&&u.has(a)&&t!==r.DisplayTheme.Album}},3154:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(30381)),i=a(67294),r=a(22683),o=a(88102),l=a(65417),d=s(a(59909)),u=a(19529),c=a(58827),h=a(85893);function f(e,t){const{isFocusable:a,timestamp:s}=e,f=(0,d.default)(),p=(0,i.useRef)(null),[m,_]=(0,i.useState)(!1),g=(0,i.useMemo)((()=>s>=(0,n.default)().startOf("day").subtract(7,"day").unix()),[s]);(0,u.useListener)(g?o.Cmd:null,"midnight",f);const v=()=>s,C=()=>{m&&_(!1)},S=()=>{m||_(!0)},y=()=>p.current;let b;if((0,i.useImperativeHandle)(t,(()=>({getTimestamp:v,show:C,hide:S,getElement:y}))),!m)try{const t=r.Clock.relativeDateStr(e.timestamp);b=(0,h.jsx)(l.EmojiText,{direction:"auto",text:t.toUpperCase()})}catch(e){__LOG__(4,void 0,new Error,void 0,["date_marker"])`Clock.relativeDateStr threw with error ${null==e?void 0:e.name}, stack: ${null==e?void 0:e.stack}`}return(0,h.jsx)(c.SystemBubble,{ref:p,hidden:m,isFocusable:a,children:b})}var p=(0,i.forwardRef)(f);t.default=p},68466:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{className:t,children:a,direction:s="horizontal",outgoingMsg:o,position:l}=e;return(0,i.jsx)("div",{className:(0,n.default)(r.wrapper,"bottom"===l&&r.posBottom,"top"===l&&r.posTop,!o&&r.wrapperIn,o&&r.wrapperOut),children:a})};var n=s(a(56720)),i=a(85893);const r={posBottom:{borderTopStartRadius:"bi2mdrpt",borderTopEndRadius:"hsk1pqkj"},posTop:{borderBottomStartRadius:"a0vc5f8u",borderBottomEndRadius:"e3yfz9gx"},wrapper:{borderTopStartRadius:"l8fojup5",borderTopEndRadius:"paxyh2gw",borderBottomEndRadius:"sfeitywo",borderBottomStartRadius:"cqsf3vkf",cursor:"ajgl1lbb",overflowX:"gfz4du6o",overflowY:"r7fjleex",textDecoration:"aja0x350",width:"ln8gz9je"},wrapperIn:{backgroundColor:"rrq4r3yd"},wrapperOut:{backgroundColor:"s0eflmyh"}}},87350:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const[t,a]=(0,r.useState)(!1);let s;const[f,p]=(0,c.default)(e.onClick);null!=e.onClick&&(s=p);return(0,h.jsxs)("div",{className:(0,i.default)(d.default.container,{[d.default.compact]:e.displayType===o.default.DISP_TYPE.MSG_INFO}),onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),"data-testid":"fail-container",children:[t?(0,h.jsx)(l.default,{children:e.tooltip}):null,(0,h.jsx)("div",(0,n.default)((0,n.default)({className:d.default.error,ref:f},s),{},{children:(0,h.jsx)(u.default,{name:"error"})}))]})};var n=s(a(81109)),i=s(a(94184)),r=a(67294),o=s(a(69618)),l=s(a(36075)),d=s(a(29667)),u=s(a(23217)),c=s(a(60265)),h=a(85893)},94638:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{msg:t,displayType:a,mdDowngrade:s}=e,{isFailed:u,to:c}=(0,l.useModelValues)(t,["isFailed","to"]);if(!u)return null;return(0,d.jsx)(i.default,{displayType:a,tooltip:r.default.t(1752),onClick:()=>{n.Cmd.openModal((0,d.jsx)(o.default,{to:c,participant:s,msg:t}))}})};var n=a(88102),i=(s(a(69618)),s(a(87350))),r=s(a(43725)),o=s(a(56227)),l=a(49082),d=a(85893)},70367:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{msg:t,displayType:a}=e,{isFailed:s}=(0,l.useModelValues)(t,["isFailed"]);if(!s)return null;return(0,d.jsx)(i.default,{displayType:a,tooltip:r.default.t(1752),onClick:()=>{n.Cmd.openModal((0,d.jsx)(o.default,{msg:t}))}})};var n=a(88102),i=(s(a(69618)),s(a(87350))),r=s(a(43725)),o=s(a(72434)),l=a(49082),d=a(85893)},8235:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{displayType:t,msg:a}=e,{mediaData:s,mdDowngrade:c,isSendFailure:h}=(0,d.useModelValues)(a,["mediaData","mdDowngrade","isSendFailure"]);if(s)return(0,u.jsx)(o.default,{displayType:t,msg:a});if(n.GK.supportsFeature(n.GK.F.MD_BACKEND)){if(c)return(0,u.jsx)(i.default,{msg:a,displayType:t,mdDowngrade:c});if(h)return(0,u.jsx)(r.default,{msg:a,displayType:t})}return(0,u.jsx)(l.default,{msg:a,displayType:t})};s(a(69618));var n=a(7293),i=s(a(94638)),r=s(a(70367)),o=s(a(72021)),l=s(a(26760)),d=a(49082),u=a(85893)},72021:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{displayType:t,msg:a}=e,{isFailed:s,type:f,isUnsentMedia:p}=(0,u.useModelValues)(a,["isFailed","type","isUnsentMedia"]),{mediaStage:m,type:_}=(0,u.useModelValues)(a.mediaData,["mediaStage","type"]),g=t===n.default.DISP_TYPE.CONVERSATION;if(f===n.default.MSG_TYPE.REVOKED)return null;if(m===l.MEDIA_DATA_STAGE.ERROR_TOO_LARGE)return(0,c.jsx)(d.default,{displayType:t,mediaType:_});if(p&&(m===l.MEDIA_DATA_STAGE.ERROR_MISSING||m===l.MEDIA_DATA_STAGE.ERROR_UNSUPPORTED))return(0,c.jsx)(i.default,{displayType:t,tooltip:o.default.t(1230)});if(s)return m===l.MEDIA_DATA_STAGE.ERROR_MISSING?(0,c.jsx)(i.default,{displayType:t,tooltip:o.default.t(1372)}):f===n.default.MSG_TYPE.PTT&&m===l.MEDIA_DATA_STAGE.PREPARING?(0,c.jsx)(i.default,{displayType:t,tooltip:o.default.t(1123)}):r.GK.supportsFeature(r.GK.F.RESEND_ICON)&&g&&m!==l.MEDIA_DATA_STAGE.REMOTE_UPLOADING?(0,c.jsx)(i.default,{displayType:t,onClick:h.bind(null,a),tooltip:o.default.t(1178)}):(0,c.jsx)(i.default,{displayType:t,tooltip:o.default.t(1230)});return null};var n=s(a(69618)),i=s(a(87350)),r=a(7293),o=s(a(43725)),l=a(58668),d=s(a(82787)),u=a(49082),c=a(85893);function h(e){e.resend().catch((function(e){__LOG__(2)`msg_media_fail_icon:resend failure: ${e}`}))}},82787:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=function(e){const t={maxSize:l.default.filesize(d.ServerProps.media)},a={maxSize:l.default.filesize((0,d.getMaxFilesSizeServerProp)())};switch(e){case r.default.MSG_TYPE.AUDIO:case r.default.MSG_TYPE.PTT:return l.default.t(825,t);case r.default.MSG_TYPE.IMAGE:return l.default.t(829,t);case r.default.MSG_TYPE.VIDEO:return l.default.t(847,t);case r.default.MSG_TYPE.DOCUMENT:return l.default.t(827,a);case r.default.MSG_TYPE.UNKNOWN:default:return l.default.t(828,a)}}(e.mediaType);return(0,u.jsx)(o.default,{displayType:e.displayType,onClick:c.bind(null,t),tooltip:t})};var n=a(88102),i=s(a(52665)),r=s(a(69618)),o=s(a(87350)),l=s(a(43725)),d=a(64551),u=a(85893);function c(e){n.Cmd.openModal((0,u.jsx)(i.default,{onOK:()=>n.Cmd.closeModal(),children:e}))}},26760:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{msg:t,displayType:a}=e,{isFailed:s}=(0,r.useModelValues)(t,["isFailed"]);if(!s)return null;return(0,o.jsx)(n.default,{displayType:a,tooltip:i.default.t(1178),onClick:()=>{t.resend().catch((()=>{__LOG__(2)`PlainMsgFailIcon: failed to resend message`}))}})};s(a(69618));var n=s(a(87350)),i=s(a(43725)),r=a(49082),o=a(85893)},14703:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{className:t}=e,a=(0,u.useModelValues)(e.msg,["isForwarded","forwardingScore","numTimesForwarded","isFrequentlyForwarded"]);if(!(0,o.showForwarded)(a))return null;const s=a.isFrequentlyForwarded,h=l.ServerProps.hfmStringChanges?"highly-forwarded-v2":"highly-forwarded",f=s?h:"forwarded",p=(0,n.default)(r.default.icon,{[r.default.iconHighlyForwarded]:s&&!l.ServerProps.hfmStringChanges}),m=l.ServerProps.hfmStringChanges?i.default._("Forwarded many times",null,{hk:"3LRhTn"}):i.default._("Forwarded",null,{hk:"VlL2I"}),_=s?m:i.default._("Forwarded",null,{hk:"VlL2I"});return(0,c.jsxs)("div",{className:(0,n.default)(r.default.container,t),children:[(0,c.jsx)(d.default,{name:f,display:"inline",className:p}),(0,c.jsx)("span",{className:r.default.text,children:_})]})};var n=s(a(94184)),i=s(a(48360)),r=s(a(90477)),o=a(63132),l=a(64551),d=s(a(23217)),u=a(49082),c=a(85893)},23296:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(45120)),i=s(a(94184)),r=a(67294),o=s(a(31211)),l=a(85893);function d(e,t){const a=(0,r.useRef)(null),s=(0,i.default)(o.default.msg,{[o.default.hover]:e.hover,[o.default.current]:e.current,[o.default.active]:e.active}),d=()=>{n.default.maybeIndicateFocus(a.current,o.default.focusAnimation)};return(0,r.useImperativeHandle)(t,(()=>({indicateFocus:d}))),(0,l.jsx)("div",{ref:a,className:s,onClick:e.onClick,onMouseEnter:e.onMouseEnter,onMouseOver:e.onMouseOver,onMouseLeave:e.onMouseLeave,children:e.children})}var u=(0,r.forwardRef)(d);t.default=u},10455:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.WrappedGif=t.MAX_DIM=t.BUBBLE_PADDING=void 0;var n=s(a(99964)),i=a(8248),r=s(a(94184)),o=a(67294),l=s(a(72655)),d=s(a(85559)),u=s(a(6725)),c=a(88102),h=s(a(69618)),f=s(a(11740)),p=a(24808),m=s(a(14703)),_=s(a(49155)),g=s(a(22358)),v=s(a(43725)),C=s(a(20668)),S=a(58668),y=a(42316),b=s(a(11339)),E=a(63132),T=s(a(34949)),x=a(31019),M=s(a(23217)),P=s(a(2749)),A=a(49082),I=s(a(23425)),w=a(85893);const k=(0,i.getIntFromStylesProp)(_.default,"-width-picture-bubble-inner");t.MAX_DIM=k;const j=(0,i.getIntFromStylesProp)(_.default,"-padding-picture-bubble");t.BUBBLE_PADDING=j;const N=k/4;function O(e,t){const{isMsgVisible:a}=e,s=(0,A.useModelValues)(e.msg,["id","ack","caption","isFailed","isPSA","isSentByMe","isGroupMsg","gifAttribution","senderObj"]),i=(0,A.useModelValues)(e.mediaData,["aspectRatio","preview","duration","type","mediaStage","renderableUrl","fullWidth","fullHeight","size"]),O=i,D=(0,o.useRef)(null),L=(0,o.useRef)(0),B=(0,o.useRef)(null),[F,G]=(0,o.useState)(!1);(0,o.useEffect)((()=>{s.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:b.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1})}),[]);const U=()=>{var e;L.current=0,G(!1),null===(e=D.current)||void 0===e||e.pauseAndReset()},V=()=>{const e=D.current;e&&(L.current<=0?U():(L.current-=1,F||G(!0),e.play()))},H=e=>{var t;if(!a)return null;const s=a(e);return s?null===(t=s.getImgNode)||void 0===t?void 0:t.call(s):null},K=()=>!F&&L.current!==1/0,q=e=>{e&&e.stopPropagation(),c.Cmd.mediaViewerModal({msg:(0,x.unproxy)(s.unsafe()),getZoomNode:H})},W=e=>{switch(O.mediaStage){case S.MEDIA_DATA_STAGE.RESOLVED:K()?(e=>{const t=D.current;if(i.mediaStage===S.MEDIA_DATA_STAGE.RESOLVED&&t){if(e&&e.stopPropagation(),null==B.current||0===B.current){const e=t.getDuration();null!=e?B.current=e:i.duration&&"0"!==i.duration&&(B.current=parseInt(i.duration,10))}if(null!=B.current&&0!==B.current){const e=Math.ceil(6/B.current);L.current=Math.max(e,3)}else L.current=3;V()}})(e):q(e);break;case S.MEDIA_DATA_STAGE.INIT:q(e);break;case S.MEDIA_DATA_STAGE.FETCHING:s.cancelDownload();break;case S.MEDIA_DATA_STAGE.NEED_POKE:s.forceDownloadMediaEvenIfExpensive();break;case S.MEDIA_DATA_STAGE.UPLOADING:s.cancelUpload();break;case S.MEDIA_DATA_STAGE.NEED_UPLOAD:s.resumeUpload();break;case S.MEDIA_DATA_STAGE.REMOTE_NEED_UPLOAD:s.resumeRemoteUpload();break;case S.MEDIA_DATA_STAGE.ERROR_MISSING:c.Cmd.openModal((0,w.jsx)(C.default,{msg:s.unsafe()}))}},Y=e=>{e.stopPropagation(),e.preventDefault(),W(e)},z=()=>{var e;return null===(e=D.current)||void 0===e?void 0:e.underlyingVideo()},Q=()=>L.current;(0,o.useImperativeHandle)(t,(()=>({getImgNode:z,handleKeyActivation:Y,pause:U,getPlayCount:Q})));const $=O.preview instanceof T.default?O.preview.url():void 0;let X=null,J=(()=>{const e=O.aspectRatio||O.fullWidth/O.fullHeight;if(!e)return{bubbleWidth:k,bubbleHeight:"100%",contentWidth:k,contentHeight:"100%"};let t,a;e<=1/4?(a=k,t=1.2*N):e<1?(a=k,t=k*e):e<4?(t=k,a=k/e):(t=k,a=N);let s=O.renderableUrl&&O.fullWidth||t,n=O.renderableUrl&&O.fullHeight||a;return s/n>t/a?(s=s*a/n,n=a):(n=n*t/s,s=t),n>k&&(n=k),{bubbleWidth:t,bubbleHeight:a,contentWidth:s,contentHeight:n}})();null!=e.maxWidth&&e.maxWidth<J.bubbleWidth&&(J=(e=>{const t=O.aspectRatio||O.fullWidth/O.fullHeight;let a,s;const n=1.2*N;t>=1?e<k?(a=e,s=a/t,s<N&&(s=N)):(a=k,s=a/t,s<N&&(s=N)):(s=k,a=s*t,a<n&&(a=n),e<k&&a>e&&(a=e));let i=a,r=s;return i/r>a/s?(i=i*s/r,r=s):(r=r*a/i,i=a),{bubbleWidth:a,bubbleHeight:s,contentWidth:i,contentHeight:r}})(e.maxWidth));const{bubbleWidth:Z,contentWidth:ee,contentHeight:te}=J;if(O.mediaStage===S.MEDIA_DATA_STAGE.RESOLVED){const e=O.aspectRatio>=1?{width:"auto",height:te}:{width:ee,height:"auto"};X=(0,w.jsx)("div",{className:_.default.thumbVideo,children:(0,w.jsx)(I.default,{ref:D,src:O.renderableUrl,style:e,onEnded:V,muted:!0,children:v.default.t(1432)})})}const ae=$?(0,w.jsx)("div",{className:_.default.thumbImage,style:{backgroundImage:`url(${$})`}}):null,se=s.caption?(0,w.jsx)("div",{className:_.default.caption,style:{maxWidth:Z},children:(0,w.jsx)(u.default,{msg:s.unsafe(),trusted:e.trusted})}):null,ne=se?null:(0,w.jsx)(P.default,{}),ie=(0,E.showForwarded)(s),re=(0,r.default)(_.default.bubble,{[_.default.hasCaption]:s.caption,[_.default.hasAuthor]:e.displayAuthor,[_.default.forwarded]:ie,[_.default.isPSA]:s.isPSA,[_.default.isGallery]:e.displayType===h.default.DISP_TYPE.STARRED_MSGS||e.displayType===h.default.DISP_TYPE.GALLERY,[_.default.isInfo]:e.displayType===h.default.DISP_TYPE.MSG_INFO}),oe=e.displayAuthor?(0,w.jsx)("div",{className:_.default.author,children:(0,w.jsx)(l.default,{msg:s,contact:s.senderObj})}):null,le=ie?(0,w.jsx)(m.default,{msg:s.unsafe(),className:_.default.forwardedIndicator}):null;let de;switch(s.gifAttribution){case p.VideoMessageAttribution.GIPHY:de=(0,w.jsx)("div",{className:_.default.vendor,children:(0,w.jsx)(M.default,{name:"giphy"})});break;case p.VideoMessageAttribution.TENOR:de=(0,w.jsx)("div",{className:_.default.vendor,children:(0,w.jsx)(M.default,{name:"tenor"})});break;default:de=null}const ue=e.quotedMsg?(0,w.jsx)("div",{className:_.default.quote,children:e.quotedMsg}):null,ce=(0,w.jsxs)(w.Fragment,{children:[oe,le,ue,(0,w.jsx)(f.default,{msg:s.unsafe(),wrapperClass:_.default.ctwaContext}),(0,w.jsxs)("div",{"data-a8n":n.default.key("image-thumb-gif"),className:_.default.thumb,onClick:W,style:{width:ee,height:te},children:[(0,w.jsx)(g.default,{mediaStage:O.mediaStage,mediaDataFileSize:O.size,isFailed:s.isFailed,shouldPlay:K(),onClick:W}),ae,X,ne,de]}),se,(0,w.jsx)("div",{className:_.default.meta,children:(0,w.jsx)(y.Meta,{msg:s})})]});return se?(0,w.jsx)(d.default,{contact:s.senderObj,msg:s.unsafe(),className:re,onClick:R,style:{width:Z},children:ce}):(0,w.jsx)("div",{className:re,onClick:R,style:{width:Z+2*j},children:ce})}function R(e){e.stopPropagation()}const D=(0,o.forwardRef)(O);t.WrappedGif=D},22358:(e,t,a)=>{"use strict";var s=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{mediaStage:t,isFailed:a,mediaDataFileSize:s,shouldPlay:o,onClick:l}=e;switch(t){case i.MEDIA_DATA_STAGE.INIT:case i.MEDIA_DATA_STAGE.EXISTS:return null;case i.MEDIA_DATA_STAGE.RESOLVED:return o?(0,r.jsx)(n.GifIcon,{onClick:l}):null;case i.MEDIA_DATA_STAGE.FETCHING:case i.MEDIA_DATA_STAGE.UPLOADING:case i.MEDIA_DATA_STAGE.REUPLOADING:case i.MEDIA_DATA_STAGE.DECRYPTING:return(0,r.jsx)(n.Pending,{cancelable:!0});case i.MEDIA_DATA_STAGE.NEED_POKE:return(0,r.jsx)(n.Download,{filesize:s});case i.MEDIA_DATA_STAGE.NEED_UPLOAD:case i.MEDIA_DATA_STAGE.REMOTE_NEED_UPLOAD:return(0,r.jsx)(n.Upload,{filesize:s});case i.MEDIA_DATA_STAGE.SENDING:return a?null:(0,r.jsx)(n.Pending,{cancelable:!0});default:return(0,r.jsx)(n.Pending,{})}};var n=s(a(41124)),i=a(58668),r=a(85893)},48089:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(94184)),i=a(67294),r=a(88102),o=a(65417),l=a(99234),d=a(83288),u=a(55800),c=s(a(22510)),h=s(a(3222)),f=a(24505),p=s(a(56074)),m=a(84387),_=s(a(11339)),g=s(a(65932)),v=s(a(23217)),C=s(a(39546)),S=s(a(39938)),y=a(85893);class b extends i.PureComponent{constructor(){super(...arguments),this._ref=(0,i.createRef)()}handleKeyActivation(){var e;null===(e=this._ref.current)||void 0===e||e.click()}componentDidMount(){const{groupMetadata:e}=this.props.msg.chat;null!=e&&this.props.listeners.add(e,"change:support",(()=>this.forceUpdate()))}stopEvent(e){e.stopPropagation(),e.preventDefault()}openInfoDrawer(){return e=>{this.stopEvent(e),r.Cmd.chatInfoDrawer(this.props.msg.chat)}}_openGroupInviteLinkDrawer(){return e=>{this.stopEvent(e);const t=this.props.msg.chat,{GroupInviteLinkDrawerLoadable:s}=a(88280);r.Cmd.openDrawerRight((0,y.jsx)(s,{chat:t,groupMetadata:t.groupMetadata,onBack:()=>r.Cmd.closeDrawerRight()}),"slide-left",this.props.uim)}}_openExpandedGroupDesc(e){return t=>{this.stopEvent(t);const a=this.props.msg.chat;r.Cmd.chatInfoDrawer(a,!0,e)}}_openEphemeralSetting(){return e=>{this.stopEvent(e);const t=this.props.msg.chat;r.Cmd.ephemeralDrawer(t,!1,_.default.EPHEMERAL_SETTING_ENTRY_POINT_TYPE.SYSTEM_MESSAGE)}}_openGrowthInviteLocked(){return e=>{var t;this.stopEvent(e);const{chat:a}=this.props.msg,s=!!(null===(t=a.groupMetadata)||void 0===t?void 0:t.participants.iAmAdmin()),n=a.isInviteGrowthLockedGroup();(0,u.openGrowthLockedModal)(s,n)}}_openGrowthInviteUnlocked(){return e=>{var t;this.stopEvent(e);const s=this.props.msg.chat,n=!!(null===(t=s.groupMetadata)||void 0===t?void 0:t.participants.iAmAdmin()),i=s.isInviteGrowthLockedGroup();if(n&&!i){const{GroupInviteLinkDrawerLoadable:e}=a(88280);r.Cmd.openDrawerRight((0,y.jsx)(e,{chat:s,groupMetadata:s.groupMetadata,onBack:()=>r.Cmd.closeDrawerRight()}),"slide-left",this.props.uim)}else(0,u.openGrowthLockedModal)(n,i)}}_getFormattedText(e){return(0,y.jsx)(o.EmojiText,{direction:"auto",text:e})}_getEphemeralDuration(){var e;const t=null===(e=this.props.msg.templateParams)||void 0===e?void 0:e[0];return t&&parseInt(t,10)||0}isMe(e){return C.default.equals(e,(0,l.getMaybeMeUser)())}_renderGroupNotificationL10n(e,t,a,s){const n=t?(0,d.getFormattedName)(t,!this.props.clickable):null;switch(e){case"add":return this.isMe(t)?(0,y.jsx)(p.default,{id:1674}):(0,y.jsx)(p.default,{id:1673,params:{name:n}});case"remove":return this.isMe(t)?(0,y.jsx)(p.default,{id:1686}):(0,y.jsx)(p.default,{id:1685,params:{name:n}});case"leave":return this.isMe(t)?(0,y.jsx)(p.default,{id:1682}):(0,y.jsx)(p.default,{id:1681,params:{name:n}});case"picture":return"remove"===s?this.isMe(t)?(0,y.jsx)(p.default,{id:1818}):(0,y.jsx)(p.default,{id:1817,params:{name:n}}):this.isMe(t)?(0,y.jsx)(p.default,{id:1816}):(0,y.jsx)(p.default,{id:1815,params:{name:n}});case"subject":{const e=this._getFormattedText(s);return this.isMe(t)?(0,y.jsx)(p.default,{id:1704,params:{subject:e}}):null!=n?(0,y.jsx)(p.default,{id:1702,params:{subject:e,name:n}}):(0,y.jsx)(p.default,{id:1703,params:{subject:e}})}case"modify":if(this.isMe(t)){const e=(0,S.default)(s);return(0,y.jsx)(p.default,{id:1676,params:{new_number:e,name:n}})}return(0,y.jsx)(p.default,{id:1675,params:{name:n}});default:__LOG__(2)`wa:groupNotification:unknown message subtype: ${e}`}}_renderGp2L10n(e,t,a,s,n,i){var r;const o=t?(0,d.getFormattedName)(t,!this.props.clickable):null,l=n?n[0]:void 0,u=l?(0,d.getFormattedName)(l,!this.props.clickable):null,c=(0,d.getFormattedNames)(n,!this.props.clickable);switch(e){case"add":return t?this.isMe(t)?(0,y.jsx)(p.default,{id:1695,params:{participants:c}}):this.isMe(l)?null!=o?(0,y.jsx)(p.default,{id:1688,params:{name:o}}):(0,y.jsx)(p.default,{id:1692}):null!=o?(0,y.jsx)(p.default,{id:1687,params:{participants:c,name:o}}):(0,y.jsx)(p.default,{id:1691,params:{participants:c}}):this.isMe(l)?(0,y.jsx)(p.default,{id:1674}):(0,y.jsx)(p.default,{id:1673,params:{name:u}});case"remove":return t?C.default.equals(t,l)?(0,y.jsx)(p.default,{id:1686}):this.isMe(t)?(0,y.jsx)(p.default,{id:1696,params:{participants:c}}):this.isMe(l)?null!=o?(0,y.jsx)(p.default,{id:1690,params:{name:o}}):(0,y.jsx)(p.default,{id:1694}):null!=o?(0,y.jsx)(p.default,{id:1689,params:{participants:c,name:o}}):(0,y.jsx)(p.default,{id:1693,params:{participants:c}}):this.isMe(l)?(0,y.jsx)(p.default,{id:1686}):(0,y.jsx)(p.default,{id:1685,params:{name:u}});case"leave":return this.isMe(l)?(0,y.jsx)(p.default,{id:1682}):(0,y.jsx)(p.default,{id:1681,params:{name:c}});case"picture":return"remove"===s?this.isMe(t)?(0,y.jsx)(p.default,{id:1818}):(0,y.jsx)(p.default,{id:1817,params:{name:o}}):this.isMe(t)?(0,y.jsx)(p.default,{id:1816}):(0,y.jsx)(p.default,{id:1815,params:{name:o}});case"subject":{const e=this._getFormattedText(s);return this.isMe(t)?(0,y.jsx)(p.default,{id:1704,params:{subject:e}}):null!=o?(0,y.jsx)(p.default,{id:1702,params:{name:o,subject:e}}):(0,y.jsx)(p.default,{id:1703,params:{subject:e}})}case"modify":{const e=(0,S.default)(t),s=(0,S.default)(l);return e===a?(0,y.jsx)(p.default,{id:1676,params:{name:a,new_number:s}}):(0,y.jsx)(p.default,{id:1675,params:{name:a}})}case"create":if(this.isMe(t))return s?(0,y.jsx)(p.default,{id:1636,params:{subject:this._getFormattedText(s)}}):(0,y.jsx)(p.default,{id:1637});if(s)return null!=o?(0,y.jsx)(p.default,{id:1633,params:{subject:this._getFormattedText(s),name:o}}):(0,y.jsx)(p.default,{id:1635,params:{subject:this._getFormattedText(s)}});if(null!=o){const e=i.title();return""===e.trim()?(0,y.jsx)(p.default,{id:1634,params:{name:o}}):(0,y.jsx)(p.default,{id:1633,params:{name:o,subject:e}})}return(0,y.jsx)(p.default,{id:1632});case"delete":return i.isSupportGroup()?(0,y.jsx)(p.default,{id:1313}):(0,y.jsx)(p.default,{id:1658});case"promote":{const e=n.length;return 1===e&&this.isMe(l)?(0,y.jsx)(p.default,{id:1684}):(0,y.jsx)(p.default,{id:1683,params:{count:e,participants:c},plural:e})}case"demote":{const e=n.length;return 1===e&&this.isMe(l)?(0,y.jsx)(p.default,{id:1678}):(0,y.jsx)(p.default,{id:1677,params:{count:e,participants:c},plural:e})}case"invite":return this.isMe(l)?(0,y.jsx)(p.default,{id:1680}):(0,y.jsx)(p.default,{id:1679,params:{name:u}});case"revoke_invite":return this.isMe(t)?(0,y.jsx)(p.default,{id:1668}):(0,y.jsx)(p.default,{id:1667,params:{name:o}});case"description":return this.isMe(t)?(0,y.jsx)(p.default,{id:1656}):null!=o?(0,y.jsx)(p.default,{id:1652,params:{name:o}}):(0,y.jsx)(p.default,{id:1654});case"announce":return"on"===s?this.isMe(t)?(0,y.jsx)(p.default,{id:1631}):(0,y.jsx)(p.default,{id:1630,params:{name:o}}):this.isMe(t)?(0,y.jsx)(p.default,{id:1629}):(0,y.jsx)(p.default,{id:1628,params:{name:o}});case"restrict":return"on"===s?this.isMe(t)?(0,y.jsx)(p.default,{id:1700}):(0,y.jsx)(p.default,{id:1699,params:{name:o}}):this.isMe(t)?(0,y.jsx)(p.default,{id:1698}):(0,y.jsx)(p.default,{id:1697,params:{name:o}});case"no_frequently_forwarded":return"on"===s?this.isMe(t)?(0,y.jsx)(p.default,{id:1672}):(0,y.jsx)(p.default,{id:1671,params:{name:o}}):this.isMe(t)?(0,y.jsx)(p.default,{id:1670}):(0,y.jsx)(p.default,{id:1669,params:{name:o}});case"announce_msg_bounce":return(0,y.jsx)(p.default,{id:1627});case"v4_add_invite_sent":return(0,y.jsx)(p.default,{id:1408,params:{participants:c,count:n.length}});case"v4_add_invite_join":return(0,y.jsx)(p.default,{id:1407,params:{participants:c,count:n.length}});case"ephemeral":const d=null===(r=i.groupMetadata)||void 0===r?void 0:r.canSetEphemeralSetting(),h=this._getEphemeralDuration();return t?this.isMe(t)?d?(0,y.jsx)(f.EphemeralL10n,{type:f.EphemeralStringType.SettingChangeByYouAsAdmin,numSeconds:h}):(0,y.jsx)(f.EphemeralL10n,{type:f.EphemeralStringType.SettingChangeByYou,numSeconds:h}):d?(0,y.jsx)(f.EphemeralL10n,{type:f.EphemeralStringType.SettingChangeByOthersAsAdmin,numSeconds:h,name:o}):(0,y.jsx)(f.EphemeralL10n,{type:f.EphemeralStringType.SettingChangeByOthers,numSeconds:h,name:o}):d?(0,y.jsx)(f.EphemeralL10n,{type:f.EphemeralStringType.SettingChangeByUnknownAsAdmin,numSeconds:h}):(0,y.jsx)(f.EphemeralL10n,{type:f.EphemeralStringType.SettingChangeByUnknown,numSeconds:h});case"initial_pHash_mismatch":return(0,y.jsx)(p.default,{id:1666});case"growth_locked":return(0,y.jsx)(p.default,{id:534});case"growth_unlocked":return(0,y.jsx)(p.default,{id:535});default:__LOG__(2)`wa:groupNotification:unknown message subtype: ${e}`}}_renderIcon(e,t){if("gp2"===e){if("announce"===t)return(0,y.jsx)("div",{className:(0,n.default)(c.default.icon,c.default.iconMegaphone),children:(0,y.jsx)(v.default,{name:"megaphone"})});if("ephemeral"===t&&this.props.clickable)return(0,y.jsx)("div",{className:(0,n.default)(c.default.icon,c.default.iconDisappearing),children:(0,y.jsx)(v.default,{name:"disappearing"})})}}_getClickHandler(e,t){if(this.props.clickable)switch(t){case"picture":case"subject":return this.openInfoDrawer();case"revoke_invite":return this._openGroupInviteLinkDrawer();case"description":return this._openExpandedGroupDesc();case"ephemeral":{var a;const{chat:e}=this.props.msg;if(null===(a=e.groupMetadata)||void 0===a?void 0:a.canSetEphemeralSetting())return this._openEphemeralSetting();break}case"initial_pHash_mismatch":return this._openExpandedGroupDesc(!0);case"growth_unlocked":return this._openGrowthInviteUnlocked();case"growth_locked":return this._openGrowthInviteLocked()}}render(){const{msg:e}=this.props,{type:t,subtype:a,author:s,body:n,recipients:i,chat:r,templateParams:o}=e,l=e.displayName();if("group_notification"!==t&&"gp2"!==t)return null;const d="gp2"===t?this._renderGp2L10n(a,s,l,n,i,r,o):this._renderGroupNotificationL10n(a,s,l,n);if(!d)return null;const u=this._getClickHandler(t,a);return(0,y.jsxs)("div",{ref:u?this._ref:void 0,role:u?"button":void 0,className:c.default.notification,onClick:u,children:[this._renderIcon(t,a),d]})}}b.CONCERNS={msg:["author","body","chat","recipients","subtype","templateParams","type"]},b.displayName="GroupNotification";const E=(0,h.default)((0,m.ListenerHOC)((0,g.default)(b,b.CONCERNS)));t.default=class extends E{handleKeyActivation(){return this.getComponent().handleKeyActivation()}}},67745:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(48360)),i=a(67294),r=a(86945),o=a(88102),l=(s(a(69618)),a(67911)),d=s(a(99131)),u=a(80226),c=a(71174),h=a(83610),f=a(50101),p=a(7293),m=s(a(66513)),_=s(a(14048)),g=s(a(43725)),v=a(84866),C=s(a(34377)),S=a(87931),y=s(a(32231)),b=a(31019),E=s(a(1539)),T=a(18644),x=s(a(24717)),M=a(19529),P=s(a(41956)),A=a(72179),I=a(85893);function w(e,t){const{msg:a,menuTransition:s,isMsgVisible:w,onOpenForwardFlow:k}=e,j=(0,i.useRef)(null),[N,O]=(0,i.useState)(null),[R,D]=(0,i.useState)(!1);(0,M.useListener)(a,"change:asRevoked",(()=>{o.Cmd.refreshMessages()}));const L=e=>{e.buttons||R||D(!0)},B=()=>{R&&D(!1)},F=()=>{o.Cmd.msgInfoDrawer((0,b.unproxy)(a.unsafe()))},G=()=>{const e=(0,b.unproxy)(a.unsafe()),t=e.chat;t.composeQuotedMsg=e,o.Cmd.focusChatTextInput(t)},U=()=>{const e=(0,b.unproxy)(a.unsafe());(0,y.default)(e)},V=()=>{const e=(0,b.unproxy)(a.unsafe());o.Cmd.sendStarMsgs(e.chat,[e])},H=()=>{const e=(0,b.unproxy)(a.unsafe());o.Cmd.sendUnstarMsgs(e.chat,[e])},K=()=>{o.Cmd.addFavoriteSticker((0,b.unproxy)(a.unsafe()))},q=()=>{o.Cmd.removeFavoriteSticker((0,b.unproxy)(a.unsafe()))},W=()=>{let e;a.canSenderRevoke()?e=u.RevokePrompt.Sender:a.canAdminRevoke()&&(e=u.RevokePrompt.Admin),o.Cmd.openModal((0,I.jsx)(d.default,{chat:a.chat,msgList:[(0,b.unproxy)(a.unsafe())],deletePrompt:!0,revokePrompt:e,isMsgVisible:w}))},Y=()=>{(0,f.findChat)(a.author).then((e=>{o.Cmd.openChatFromUnread(e).then((t=>{t&&o.Cmd.focusChatTextInput(e)}))}))},z=(e,t)=>{if(t&&N)return void O(null);const s=t?(()=>{if(j.current)return j.current.getComponent().refContext})():e,i=(0,b.unproxy)(a),d=[];if(i.isSentByMe&&!i.asRevoked&&d.push((0,I.jsx)(c.DropdownItem,{a8n:"mi-msg-info",action:F,children:g.default.t(830)},"info")),i.canReply()&&d.push((0,I.jsx)(c.DropdownItem,{a8n:"mi-msg-reply",action:G,children:g.default.t(1145)},"reply")),(i.canPrivateReply()||i.canPrivateReplyInRestrictedGrp())&&d.push((0,I.jsx)(c.DropdownItem,{a8n:"mi-msg-reply",action:U,children:g.default.t(1065)},"private_reply")),i.canForward()&&d.push((0,I.jsx)(c.DropdownItem,{a8n:"mi-msg-forward",action:()=>{k(!0,a.unsafe())},children:g.default.t(482)},"forward")),i.canStar()&&(i.star?d.push((0,I.jsx)(c.DropdownItem,{a8n:"mi-msg-unstar",action:H,children:g.default.t(1377)},"star")):d.push((0,I.jsx)(c.DropdownItem,{a8n:"mi-msg-star",action:V,children:g.default.t(1276)},"star"))),p.GK.supportsFeature(p.GK.F.MD_BACKEND)&&(0,r.getABPropConfigValue)("sticker_md_favorite_stickers_enabled")&&((0,h.isStickerFilehashFavorited)(a.filehash)?d.push((0,I.jsx)(c.DropdownItem,{a8n:"mi-remove-favorite-sticker",action:q,children:g.default.t(1140)},"remove-favorite-sticker")):d.push((0,I.jsx)(c.DropdownItem,{a8n:"mi-favorite-sticker",action:K,children:n.default._("Add to favorites",null,{hk:"2ODf78"})},"favorite-sticker"))),p.GK.supportsFeature(p.GK.F.MD_BACKEND)){const{stickerPackId:e}=a.mediaData;(0,_.default)()&&e&&d.push((0,I.jsx)(c.DropdownItem,{a8n:"mi-open-sticker-pack",action:()=>o.Cmd.openStickerPack(e),children:g.default.t(1455)},"open-sticker-pack"))}const u=v.MediaBlobCache.get(a.filehash);null!=u&&(0,l.supportsCopyImageToClipboard)()&&d.push((0,I.jsx)(c.DropdownItem,{a8n:"mi-copy-favorite-sticker",action:()=>{(0,l.copyImageToClipboard)(u)},children:n.default._("Copy Sticker Image",null,{hk:"2hsnNe"})},"copy-favorite-sticker")),d.push((0,I.jsx)(c.DropdownItem,{a8n:"mi-msg-delete",action:W,children:g.default.t(389)},"delete")),a.isGroupMsg&&a.author&&!a.isSentByMe&&d.push((0,I.jsx)(c.DropdownItem,{a8n:"mi-msg-author",action:Y,children:g.default.t(826,{author:a.displayName()})},"author")),O({menu:d,anchor:s,theme:c.ThemeOptions.COMPACT})},Q=()=>{O(null)},$={scrollMsg:(t,a)=>{e.scrollMsg(t,a)}};let X,J,Z;return(0,i.useImperativeHandle)(t,(()=>$)),(R||N)&&(X=(0,I.jsx)(C.default,{msg:a.unsafe(),hasAuthor:!1,position:S.MsgPosition.SINGLE,ref:j,onToggle:e=>{z(e)},isGroupedSticker:!0},"icon-context")),e.isFocused&&(J=(0,I.jsx)(A.WhileFocusedListener,{parent:$})),N&&(Z=(0,I.jsx)(T.UIE,{displayName:"MsgContextMenu",escapable:!0,popable:!0,requestDismiss:Q,children:(0,I.jsx)(x.default,{contextMenu:N})})),(0,I.jsxs)("div",{className:m.default.stickerItem,onMouseOver:L,onMouseDown:B,onMouseUp:L,onMouseLeave:B,children:[(0,I.jsx)(E.default,{mediaData:a.mediaData,msg:a,displayAuthor:!1,forwardRef:e.forwardRef,animateOnView:!0,displayType:e.displayType}),(0,I.jsx)("div",{className:m.default.stickerMenu,children:(0,I.jsx)(P.default,{transitionName:s,children:X})}),Z,J]})}var k=(0,i.forwardRef)(w);t.default=k},20568:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,r.jsx)("div",{className:i.default.outerContainer,onClick:e.onClick,children:(0,r.jsx)("div",{className:i.default.innerContainer,children:(0,r.jsx)(n.CheckBox,{onChange:e.onClick,checked:e.checked})})})};var n=a(16593),i=s(a(9587)),r=a(85893)},82903:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{displayAuthor:t}=e,a=(0,S.useModelValues)(e.msg,["id","inviteCode","inviteCodeExp","inviteGrp","inviteGrpName","inviteGrpJpegThum","senderObj","comment","isSentByMe","isGroupMsg","isPSA","isGroupsV4InviteExpired"]),s=()=>{l.Cmd.openModal((0,y.jsx)(u.default,{msg:a}))},b=a.isGroupsV4InviteExpired,E=a.inviteGrpName;if(!d.GK.supportsFeature(d.GK.F.GROUPS_V_4_JOIN_PERMISSION))return(0,y.jsx)(h.default,{msg:(0,v.unproxy)(a),displayAuthor:t});const T=(0,y.jsx)(_.default,{size:49,thumb:a.inviteGrpJpegThum}),x=a.comment?(0,y.jsx)("div",{className:c.default.caption,children:(0,y.jsx)(o.default,{msg:a.unsafe(),spacer:!0,trusted:a.isTrusted()})}):null,M=b?null:(0,y.jsx)(i.default,{items:[{label:a.isSentByMe?f.default.t(590):f.default.t(531),onClick:s}],theme:a.comment?void 0:"no-divider"}),P=!b||!x,A=P?(0,y.jsx)("div",{className:c.default.meta,children:(0,y.jsx)(m.Meta,{msg:a})}):null,I=a.comment?f.default.t(588):(0,y.jsx)(g.default,{msg:a.unsafe(),children:f.default.t(588)});let w;if(b){const e=x?f.default.t(585):(0,y.jsx)(g.default,{msg:a.unsafe(),children:f.default.t(585)});w=(0,y.jsx)("div",{className:c.default.status,children:e})}return(0,y.jsxs)(C.default,{msg:a,displayAuthor:t,hideMeta:P,children:[(0,y.jsxs)(r.default,{contact:a.senderObj,msg:a.unsafe(),className:(0,n.default)(c.default.container,{[c.default.expired]:b,[c.default.noCaption]:!x}),children:[(0,y.jsx)("div",{className:c.default.linkPreview,children:(0,y.jsx)(p.default,{description:I,invite:!0,isSentByMe:a.isSentByMe,onClick:b?void 0:s,thumbnail:T,title:E,theme:b?"extended":void 0})}),w,x,A]}),M]})};var n=s(a(94184)),i=s(a(58286)),r=s(a(85559)),o=s(a(6725)),l=a(88102),d=a(7293),u=s(a(98073)),c=s(a(9027)),h=s(a(9555)),f=s(a(43725)),p=s(a(51845)),m=a(42316),_=s(a(87543)),g=s(a(21595)),v=a(31019),C=s(a(75618)),S=a(49082),y=a(85893)},9555:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{msg:t,displayAuthor:a}=e;return(0,o.jsx)(r.default,{msg:t,displayAuthor:a,children:(0,o.jsx)(i.default,{iconName:"unknown",msg:t.unsafe(),children:n.default._("Group invite message. Open WhatsApp on your phone to view.",null,{hk:"2yUG2r"})})})};var n=s(a(48360)),i=s(a(99422)),r=s(a(75618)),o=a(85893)},41381:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{msg:t,displayAuthor:a,displayType:s,displayFooter:y=!0,header:b,actions:E}=e;const T=t.isTrusted(),x={selectable:T,dirMismatch:t.rtl!==f.default.isRTL(),direction:t.dir,inferLinesDirection:!0},M=t.text,P=M?(0,C.jsx)(p.default,{msg:t.unsafe(),"data-id":t.id,spacer:!1,children:(0,C.jsx)(c.default,{text:M,textLimit:t.initialPageSize,children:e=>{let{textLimit:a}=e;return(0,C.jsx)(u.EmojiText,(0,n.default)((0,n.default)({},x),{},{text:M,formatters:(0,l.Conversation)({links:t.getLinks(a),trusted:T,selectable:T}),textLimit:a}))}})}):null,A=y&&t.footer?(0,C.jsx)(u.EmojiText,(0,n.default)((0,n.default)({},x),{},{text:t.footer,formatters:(0,l.Conversation)({links:t.getFooterLinks(),selectable:T,trusted:T}),xstyle:[S.footer,i.uiMargin.top6]})):null,I=(null==E?void 0:E.length)&&s!==d.default.DISP_TYPE.STARRED_MSGS?(0,C.jsx)("div",{className:(0,r.default)(S.actionRow),children:(0,C.jsx)(o.default,{items:E.map((e=>{var t;return{label:e.label,onClick:null!==(t=e.onClick)&&void 0!==t?t:()=>(0,_.default)(),disabled:e.disabled}}))})}):null,w=Boolean((0,g.getSuspiciousLabel)({msg:t.unsafe(),displayType:s})),k=!1!==a?!t.isSentByMe&&t.isGroupMsg:null,j=(0,m.showForwarded)(t)||k||w;return(0,C.jsxs)(h.FlexColumn,{align:"stretch",xstyle:S.bubble,children:[(0,C.jsxs)(v.default,{msg:t,displayAuthor:a,children:[w?(0,C.jsx)(g.SuspiciousLabel,{msg:t.unsafe()}):null,(0,C.jsxs)("div",{className:(0,r.default)([i.uiMargin.bottom10,j&&i.uiMargin.top5]),children:[b,P,A]})]}),I]})};var n=s(a(81109)),i=a(28298),r=s(a(56720)),o=s(a(58286)),l=a(10233),d=s(a(69618)),u=a(65417),c=s(a(17080)),h=a(29623),f=s(a(43725)),p=s(a(54703)),m=a(63132),_=s(a(56635)),g=a(7538),v=s(a(75618)),C=a(85893);const S={bubble:{width:"nwuq7i8t",maxWidth:"laorhtua"},footer:{display:"f804f6gw",fontSize:"ovllcyds",lineHeight:"q6wg26sa",overflowWrap:"fd365im1",whiteSpace:"bbv8nyr4",color:"hp667wtd"},actionRow:{paddingBottom:"oq31bsqd",paddingLeft:"t6kbzwdk",paddingRight:"thbdkvv5",marginTop:"aliwjmjd"}}},40719:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{msg:t,quotedMsg:a,displayType:s}=e;const C=(0,m.default)(),{interactiveHeader:S}=t;let y,b;if(null==S?void 0:S.mediaType)switch(S.mediaType){case d.InteractiveMessageHeaderMediaType.IMAGE:b=(0,g.jsx)(l.default,{msg:t,displayType:s});break;case d.InteractiveMessageHeaderMediaType.DOCUMENT:b=(0,g.jsx)(r.default,{msg:t});break;case d.InteractiveMessageHeaderMediaType.VIDEO:b=(0,g.jsx)(_.default,{msg:t,mediaData:t.mediaData,displayType:s})}t.nativeFlowName===h.default.ORDER_DETAILS||t.nativeFlowName===h.default.ORDER_STATUS?y=(0,g.jsx)(f.default,{msg:t,quotedMsg:a,displayType:s}):S&&(t.interactiveType===u.default.SHOPS_STOREFRONT?y=(0,g.jsx)(p.default,{msg:t}):null==S.title&&null==S.subtitle||(y=b?(0,g.jsx)(c.default,{msg:t}):(0,g.jsx)("div",{className:(0,i.default)(n.uiMargin.top6),children:(0,g.jsx)(c.default,{msg:t})})));if(y){const e=(0,o.default)({msg:t,uimContext:C});e&&(y=(0,g.jsx)("div",{role:"button",onClick:e.onClick,children:y}))}return null==y&&null==b?null:(0,g.jsxs)("div",{className:(0,i.default)(v),children:[y&&b?(0,g.jsx)("div",{className:(0,i.default)(n.uiMargin.bottom6),children:b}):b,y]})};var n=a(28298),i=s(a(56720)),r=(s(a(69618)),s(a(11465))),o=s(a(62352)),l=s(a(516)),d=a(34535),u=s(a(84064)),c=s(a(42112)),h=s(a(5165)),f=s(a(96251)),p=s(a(97364)),m=s(a(59147)),_=s(a(50253)),g=a(85893);const v={marginTop:"if44n927",marginEnd:"isg5rw3j",marginBottom:"ngycyvoj",marginStart:"heai6z19"}},516:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{msg:t,displayType:a}=e;const s=t.isTrusted();return(0,r.jsx)(i.default,{contentContainerClassName:(0,n.default)(o),displayAuthor:!1,mediaData:t.mediaData,displayType:a,msg:t,hideMeta:!0,trusted:s})};var n=s(a(56720)),i=(s(a(69618)),s(a(74790))),r=a(85893);const o={marginTop:"if44n927",marginEnd:"ryaohf54",marginBottom:"f6aumy9w",marginStart:"sd2p8cyi"}},89808:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{msg:t,quotedMsg:a,displayAuthor:s,displayType:c}=e;const h=(0,d.default)(),f=(0,n.default)({msg:t,uimContext:h}),p=null==f?void 0:f.map((e=>{var t;return{label:e.label,disabled:e.disabled,onClick:null!==(t=e.onClick)&&void 0!==t?t:()=>(0,l.default)()}}));return(0,u.jsx)(i.default,{msg:t,displayAuthor:s,displayType:c,displayFooter:t.nativeFlowName!==o.default.ORDER_STATUS,header:(0,u.jsx)(r.default,{msg:t,quotedMsg:a,displayType:c}),actions:p})};s(a(69618));var n=s(a(17830)),i=s(a(41381)),r=s(a(40719)),o=s(a(5165)),l=s(a(56635)),d=s(a(59147)),u=a(85893)},88191:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;let{msg:a,captionEndElement:s}=e;const{title:f,subtitle:p,thumbnail:m}=null!==(t=a.interactiveHeader)&&void 0!==t?t:{},_={selectable:a.isTrusted(),dirMismatch:a.rtl!==d.default.isRTL(),direction:a.dir,inferLinesDirection:!0};return(0,c.jsxs)(l.FlexRow,{align:"stretch",xstyle:[h.container,!a.isSentByMe&&h.bubbleIn,a.isSentByMe&&h.bubbleOut],children:[m?(0,c.jsx)("img",{alt:"",className:(0,r.default)(h.media),src:`data:image/jpeg;base64,${m}`}):null,(0,c.jsxs)(l.FlexColumn,{xstyle:[h.body,i.uiPadding.vert6,i.uiPadding.horiz9],children:[f?(0,c.jsx)(u.default,{maxLines:2,children:(0,c.jsx)(o.EmojiText,(0,n.default)((0,n.default)({},_),{},{text:f,xstyle:h.title}))}):null,p?(0,c.jsx)(l.FlexItem,{shrink:10,xstyle:h.subtitle,children:(0,c.jsx)(u.default,{maxLines:1,children:(0,c.jsx)(o.EmojiText,(0,n.default)((0,n.default)({},_),{},{text:p}))})}):null,s]})]})};var n=s(a(81109)),i=a(28298),r=s(a(56720)),o=a(65417),l=a(29623),d=s(a(43725)),u=s(a(71688)),c=a(85893);const h={container:{borderTopStartRadius:"l147y7tb",borderTopEndRadius:"mjscftrx",borderBottomEndRadius:"fqwk616h",borderBottomStartRadius:"pkud3j3x",overflowX:"gfz4du6o",overflowY:"r7fjleex",position:"g0rxnol2"},bubbleIn:{backgroundColor:"rrq4r3yd"},bubbleOut:{backgroundColor:"s0eflmyh"},media:{width:"sgifyl94",height:"pydpkpus",objectFit:"jpthtbts",flexShrink:"oq44ahr5"},body:{boxSizing:"cm280p3y",maxHeight:"o0vrdr7e"},title:{fontSize:"bze30y65",fontWeight:"hnx8ox4h"},subtitle:{fontSize:"ovllcyds",color:"pm5hny62",overflowX:"gfz4du6o",overflowY:"r7fjleex",width:"ln8gz9je"}}},42112:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;let{msg:a}=e;const{title:s,subtitle:n}=null!==(t=a.interactiveHeader)&&void 0!==t?t:{},r=a.isTrusted();return(0,h.jsxs)(d.FlexColumn,{xstyle:[o.uiMargin.end4,o.uiMargin.start6],children:[null!=s?(0,h.jsx)(l.EmojiText,(0,i.default)((0,i.default)((0,i.default)({},p(s)),(0,u.enableHeaderAndFooterFormatting)(a.getHeaderLinks(),r)),{},{text:s,xstyle:f.title,inferLinesDirection:!0})):null,null!=n?(0,h.jsx)(l.EmojiText,(0,i.default)((0,i.default)({},p(n)),{},{selectable:r,text:n,xstyle:f.subtitle,inferLinesDirection:!0})):null]})};var i=n(a(81109)),r=s(a(93131)),o=a(28298),l=(n(a(56720)),a(65417)),d=a(29623),u=a(38649),c=n(a(43725)),h=a(85893);const f={title:{fontSize:"bze30y65",fontWeight:"hnx8ox4h",overflowWrap:"fd365im1",whiteSpace:"bbv8nyr4",width:"ln8gz9je"},subtitle:{color:"hp667wtd"}};function p(e){const t=r.dir(e);return{direction:t,dirMismatch:"rtl"===t!==c.default.isRTL()}}},96251:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let t=null;const{msg:a}=e;if(a.nativeFlowName===r.default.ORDER_DETAILS){const e=(0,d.getOrderInfo)(a);var s;if(e)t=(0,f.jsx)(u.default,{amount:(0,i.formatAmount)(e.currency,e.totalAmount),quantity:e.quantity,orderId:e.referenceId,text:(0,l.getOrderDetailProductLabel)(e.items),numberOfItems:e.items.length,isSentByMe:a.isSentByMe,thumbnail:null!==(s=p(a))&&void 0!==s?s:void 0})}else a.nativeFlowName===r.default.ORDER_STATUS&&(t=function(e){let{msg:t,quotedMsg:a,displayType:s}=e;if(a)return a;const n=(0,c.getOrderMessage)(t);if(n)return(0,f.jsx)(h.default,{msg:n,chat:t.chat,rootMsg:t,displayType:s});return null}(e));return t};var n=s(a(69618)),i=a(74764),r=s(a(5165)),o=s(a(34949)),l=a(30699),d=a(34841),u=s(a(81624)),c=a(88998),h=s(a(35072)),f=a(85893);const p=e=>{var t;if(e.type===n.default.MSG_TYPE.INTERACTIVE&&null!=(null===(t=e.interactiveHeader)||void 0===t?void 0:t.thumbnail))return`data:image/jpeg;base64,${e.interactiveHeader.thumbnail}`;if(e.mediaData){const{preview:t}=e.mediaData;if(t instanceof o.default)return t.url()}}},97364:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{msg:t}=e;return(0,d.jsx)(r.default,{msg:t,captionEndElement:(0,d.jsx)(i.FlexColumn,{justify:"end",xstyle:u.logoContainer,children:(0,d.jsxs)(i.FlexRow,{align:"center",children:[(0,d.jsx)(l.default,{color:"secondary",width:13,height:14,xstyle:[u.shopsIcon,n.uiMargin.end6],name:"shop-filled"}),o.default.t(1259)]})})})};var n=a(28298),i=(s(a(56720)),a(29623)),r=s(a(88191)),o=s(a(43725)),l=s(a(23217)),d=a(85893);const u={logoContainer:{fontSize:"ovllcyds",color:"pm5hny62",flexGrow:"bk1nl7o2"},shopsIcon:{display:"l7jjieqr"}}},73770:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.LargeEmoji=T,t.SIZE=void 0;var n=s(a(94184)),i=a(67294),r=s(a(56720)),o=s(a(69618)),l=s(a(3309)),d=s(a(84636)),u=a(70449),c=a(25647),h=s(a(47065)),f=s(a(30157)),p=a(52596),m=a(19529),_=a(85893);const{getGlyphId:g,getGlyphPath:v,markGlyphCached:C,isGlyphCached:S}=u.EmojiUtil,y=c.LARGE_EMOJI_SIZE;t.SIZE=y;const b="large",E="xlarge";function T(e){const{emoji:t,size:a,animation:s,element:u,selectable:c,xstyle:T}=e,x=()=>{const t=g(e.emoji);return Boolean(null!=t&&S(t))},[M,P]=(0,i.useState)(x);(0,m.useListener)(window,"dpichange",(()=>{P(x())}));const A=g(t);if(null==A)return null;const I=(0,n.default)({[f.default.medium]:a===y.MEDIUM,[f.default.large]:a===y.LARGE,[f.default.xlarge]:a===y.XLARGE});let w;w=a===y.XLARGE?E:b;const k=v(A,w)[l.default.currentRes];if(M&&s)return(0,_.jsxs)(u,{className:(0,n.default)(f.default.animation,(0,r.default)(T)),children:[(0,_.jsx)(p.SelectableImg,{alt:t,className:(0,n.default)(f.default.highRes,I),draggable:!1,plainText:t,selectable:Boolean(c),src:o.default.ONE_BY_ONE_TRANS_GIF}),(0,_.jsx)(h.default,{className:(0,n.default)(f.default.highRes,I,f.default.heartbeat),draggable:!1,selectable:!1,src:k})]});const j=M?void 0:(0,_.jsx)(d.default,{className:(0,n.default)(f.default.lowRes,I),emoji:t,xstyle:T,selectable:c},"low-res"),N=(0,_.jsx)(d.default,{className:(0,n.default)(f.default.highRes,I,{[f.default.invisible]:!M}),emoji:t,xstyle:T,selectable:c,src:k,onLoad:()=>{const e=g(t);null!=e&&C(e),P(!0)}},"high-res");return(0,_.jsxs)("span",{className:f.default.wrapper,children:[j,N]})}T.defaultProps={animation:!1,element:"div",size:y.MEDIUM}},99940:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const{displayAuthor:a,msg:s}=e,o=s.list,f=(0,x.default)();if(!o)return null;const _={selectable:!0,dirMismatch:s.rtl!==c.default.isRTL(),direction:s.dir,inferLinesDirection:!0},g=(0,l.Conversation)({links:s.getHeaderLinks(),selectable:!0,trusted:s.isTrusted()}),v=(0,l.Conversation)({mentions:s.mentionMap(),links:s.getLinks(),selectable:!0,trusted:s.isTrusted()}),C=(0,l.Conversation)({links:s.getFooterLinks(),selectable:!0,trusted:s.isTrusted()}),y=o.listType===d.ListMessageListType.PRODUCT_LIST?(0,M.jsx)("div",{className:(0,i.default)(h.default.productListPreview,{[h.default.productListPreviewForwarded]:s.isForwarded}),children:(0,M.jsx)(S.default,{msg:s,onClick:e=>{e&&e.stopPropagation(),P(s,f)}})}):null,b=o.listType!==d.ListMessageListType.PRODUCT_LIST?(0,M.jsx)(u.EmojiText,(0,n.default)((0,n.default)({},_),{},{className:h.default.title,text:o.title,formatters:g,ellipsify:!0})):null,E=(0,M.jsx)(u.EmojiText,(0,n.default)((0,n.default)({},_),{},{text:o.description,formatters:v})),w=(0,M.jsx)(u.EmojiText,(0,n.default)((0,n.default)({},_),{},{className:h.default.footer,text:s.footer,formatters:C})),k=(0,M.jsx)("div",{className:h.default.meta,children:(0,M.jsx)(m.Meta,{msg:s})}),j=(0,M.jsx)(r.default,{items:[{label:null!==(t=A(o))&&void 0!==t?t:"",icon:I(o),onClick:e=>{e&&e.stopPropagation(),P(s,f)}}]});return(0,M.jsx)("div",{className:h.default.bubble,children:(0,M.jsxs)(T.default,{msg:s,displayAuthor:a,hideMeta:!0,children:[y,b,(0,M.jsxs)(p.default,{msg:s.unsafe(),"data-id":s.id,children:[E,s.footer?w:null,k]}),j]})})};var n=s(a(81109)),i=s(a(94184)),r=s(a(58286)),o=a(88102),l=a(10233),d=a(24808),u=a(65417),c=s(a(43725)),h=s(a(90373)),f=s(a(14828)),p=s(a(54703)),m=a(42316),_=s(a(11339)),g=a(97567),v=a(9153),C=a(67455),S=s(a(24667)),y=a(18952),b=a(48870),E=a(27798),T=s(a(75618)),x=s(a(59147)),M=a(85893);function P(e,t){const{list:{listType:a}}=e;if(null!=a)switch(a){case d.ListMessageListType.SINGLE_SELECT:o.Cmd.openModal((0,M.jsx)(f.default,{msg:e}));break;case d.ListMessageListType.PRODUCT_LIST:!function(e,t){const a=e.requiresDirectConnection,s=e.isForwarded?e.businessOwnerJid:e.from.toString({legacy:!0});if(null==e.list.productListInfo||null==s)return;const n=!!y.ProductMessageListCollection.get(e.id);b.QPL.markerStart(E.QuickLogMarkerId.WHATSAPP_PLM_DETAILS_VIEW,{bool:{IsCached:n}});const i=y.ProductMessageListCollection.getOrAdd(e.id,e.list.productListInfo,a,s,e.list.title);null!=i?o.Cmd.openDrawerRight((0,M.jsx)(C.ProductDetailsFlowLoadable,{chat:e.chat,catalogOwnerJid:s,productListId:i.id}),"slide-left",t,(0,g.buildProductCatalogContext)(new v.ProductCatalogSession,_.default.BIZ_PLATFORM.ENT,_.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_PRODUCT_LIST_MESSAGE)):b.QPL.markerDrop(E.QuickLogMarkerId.WHATSAPP_PLM_DETAILS_VIEW)}(e,t)}}function A(e){const{listType:t}=e;return t===d.ListMessageListType.PRODUCT_LIST?c.default.t(1098):e.buttonText}function I(e){const{listType:t}=e;if(t!==d.ListMessageListType.PRODUCT_LIST)return"list-msg-icon"}},19795:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.LiveLocation=function(e){const{trusted:t,displayAuthor:a,quotedMsg:s}=e,x=(0,b.useModelValues)(e.msg,["chat","comment","dir","finalLat","finalLng","isGroupMsg","isPSA","isSentByMe","lat","lng","rtl","sender","senderObj","shareDuration","t"]),[M,P]=(0,i.useState)(!1),{chat:A,sender:I,t:w,shareDuration:k}=x,j=()=>{c.Cmd.liveLocationDrawer(A,I)},N=()=>{c.Cmd.openModal((0,E.jsx)(h.default,{okText:m.default.t(1765),onOK:()=>c.Cmd.closeModal(),children:m.default.t(710)}))},O=()=>{c.Cmd.expiredLocationDrawer(x.unsafe())},R=()=>{c.Cmd.openModal((0,E.jsx)(g.default,{chat:A}))},D=()=>{P(!0)},L=()=>null==k?w:w+k;if(p.GK.supportsFeature(p.GK.F.LIVE_LOCATIONS)){const e=!!x.comment,i=a?(0,E.jsx)("div",{className:(0,r.default)(T.author),children:(0,E.jsx)(o.default,{msg:x,contact:x.senderObj})}):null,c=s?(0,E.jsx)("div",{className:(0,r.default)(T.quote),children:s}):null,h=u.Clock.globalUnixTime()>=L(),_=h&&void 0!==x.finalLat&&void 0!==x.finalLng;let g=x.lat,b=x.lng,P=h?void 0:j;p.GK.supportsFeature(p.GK.F.LIVE_LOCATIONS_FINAL)&&(P||(P=O),_&&(g=x.finalLat,b=x.finalLng)),p.GK.supportsFeature(p.GK.F.MD_BACKEND)&&(P=N);const A=(0,E.jsxs)("div",{className:(0,r.default)(T.thumb),onClick:P,style:{height:150},children:[(0,E.jsx)("div",{className:(0,r.default)(T.map),children:(0,E.jsx)(v.default,{lat:g,lng:b,width:270,height:150,className:(0,r.default)(T.thumbBody),linkify:!1,showMarker:!1,onLoad:D})}),(0,E.jsx)("div",{className:(0,r.default)(T.avatar,!M&&T.hidden),children:(0,E.jsx)(f.DetailImage,{id:x.sender,size:40,border:!0})}),h&&(0,E.jsx)("div",{className:(0,r.default)(T.overlay)})]}),I=L();let w=h?m.default.t(698):m.default.t(704,{time:u.Clock.timestampStr(I),_plural:u.Clock.timestampHour(I)});p.GK.supportsFeature(p.GK.F.MD_BACKEND)&&(w=n.default._("Live Location not available",null,{hk:"1yZJG7"}));const k=(0,E.jsxs)("div",{className:(0,r.default)(T.status),onClick:P,children:[(0,E.jsx)("span",{className:(0,r.default)(T.statusIcon),children:(0,E.jsx)(y.default,{name:(0,S.liveLocationIcon)(!h),display:"inline"})}),(0,E.jsx)("span",{className:(0,r.default)(T.statusText),children:w})]}),B=x.comment?(0,E.jsx)("div",{className:(0,r.default)(T.caption),children:(0,E.jsx)(d.default,{msg:x.unsafe(),trusted:t})}):null,F=(0,E.jsx)("div",{className:(0,r.default)(T.meta,e&&T.metaWithCaption),children:(0,E.jsx)(C.Meta,{msg:x})});let G;if(!h){let t,a,s;x.isSentByMe?(t=R,a=(0,r.default)(T.stopLocation),s=m.default.t(722)):(t=j,a=(0,r.default)(T.viewLocation),s=m.default.t(729)),G=(0,E.jsx)("div",{className:(0,r.default)(T.actionButton,e&&T.actionButtonWithCaption),onClick:t,children:(0,E.jsx)("span",{className:a,children:s})})}return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)(l.default,{className:(0,r.default)(T.container,Boolean(P)&&T.clickable),contact:x.senderObj,msg:x.unsafe(),children:[i,c,A,k,B,F]}),G]})}return(0,E.jsx)(_.default,{msg:x,displayAuthor:a,quotedMsg:s})},t.MSG_HEIGHT=void 0;var n=s(a(48360)),i=a(67294),r=s(a(56720)),o=s(a(72655)),l=s(a(85559)),d=s(a(6725)),u=a(22683),c=a(88102),h=s(a(52665)),f=a(88984),p=a(7293),m=s(a(43725)),_=s(a(1675)),g=s(a(79834)),v=s(a(83452)),C=a(42316),S=a(64658),y=s(a(23217)),b=a(49082),E=a(85893);const T={container:{position:"g0rxnol2",maxWidth:"dld5k21c",paddingTop:"ocd2b0bc",paddingEnd:"folpon7g",paddingBottom:"aa0kojfi",paddingStart:"snweb893",cursor:"bx7g2weo"},clickable:{cursor:"ajgl1lbb"},caption:{boxSizing:"cm280p3y",maxWidth:"dld5k21c",paddingTop:"esbfogcw",paddingEnd:"jfqm35v0",paddingBottom:"bxcbqipq",paddingStart:"mhcwslh8"},author:{paddingTop:"ocd2b0bc",paddingBottom:"bxcbqipq",paddingLeft:"rrbwxby4"},meta:{position:"lhggkp7q",right:"bfbxj8tr",bottom:"dpkuihx7",zIndex:"b9fczbqn"},thumb:{position:"g0rxnol2",display:"p357zi0d",alignItems:"gndfcl4n",justifyContent:"ac2vgrno",overflowX:"gfz4du6o",overflowY:"r7fjleex",borderTopStartRadius:"l8fojup5",borderTopEndRadius:"paxyh2gw"},avatar:{position:"lhggkp7q",top:"qq0sjtgm",right:"grt5ktjy",bottom:"jxacihee",left:"tukmaf4q",width:"hj839x6e",height:"rd228egi",marginTop:"m3ct2rho",marginEnd:"k1jo73ug",marginBottom:"ec1z5skj",marginStart:"isfiuinm",filter:"shq0pg4y"},map:{position:"g0rxnol2"},overlay:{position:"lhggkp7q",top:"qq0sjtgm",bottom:"jxacihee",left:"tukmaf4q",width:"ln8gz9je",height:"ppled2lx",display:"f804f6gw",backgroundColor:"fmhufpvf"},thumbBody:{zIndex:"jnl3jror",flexGrow:"tvf2evcx",flexShrink:"oq44ahr5",flexBasis:"lb5m6g5c",WebkitTransition:"o9wlm8ph"},quote:{marginBottom:"kzyzudjh"},status:{position:"g0rxnol2",bottom:"jxacihee",left:"tukmaf4q",height:"fs6hn1up",paddingTop:"i5tg98hk",paddingEnd:"folpon7g",paddingBottom:"przvwfww",paddingStart:"snweb893",backgroundColor:"g9q9estb",borderBottomStartRadius:"cqsf3vkf",borderBottomEndRadius:"sfeitywo"},statusIcon:{position:"g0rxnol2",top:"jgz0asyo",marginRight:"j69yk9hm",marginLeft:"sx18v0w4",color:"cs9t9or5"},statusText:{position:"g0rxnol2",top:"agi2at81",fontSize:"dsh4tgtl",color:"pm5hny62",verticalAlign:"neme6l2y"},actionButton:{display:"p357zi0d",alignItems:"gndfcl4n",justifyContent:"ac2vgrno",height:"iauwx4jv",paddingBottom:"aa0kojfi",fontWeight:"hnx8ox4h",textAlign:"qfejxiq4",cursor:"ajgl1lbb"},stopLocation:{color:"mvxzr2tb"},viewLocation:{color:"o0rubyzf"},hidden:{visibility:"kojwoqec"},actionButtonWithCaption:{borderTop:"ei53l81b"},metaWithCaption:{right:"ou6eaia9",bottom:"lrw9n60e"}};t.MSG_HEIGHT=220},1675:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(94184)),i=s(a(48360)),r=a(10233),o=a(65417),l=s(a(43725)),d=s(a(94563)),u=s(a(54703)),c=s(a(99422)),h=a(63132),f=a(64658),p=s(a(75618)),m=a(85893);var _=e=>{const{msg:t}=e,a=(0,r.Conversation)({mentions:t.mentionMap(),links:t.getLinks(),selectable:!0,trusted:t.isTrusted()}),s=t.comment?(0,m.jsx)(u.default,{msg:t.unsafe(),children:(0,m.jsx)(o.EmojiText,{text:t.comment,formatters:a,selectable:!0,dirMismatch:t.rtl!==l.default.isRTL(),direction:t.dir})}):null;let _;if(e.quotedMsg){const a=(0,n.default)(d.default.quote,{[d.default.hasAuthor]:e.displayAuthor,[d.default.forwarded]:(0,h.showForwarded)(t)});_=(0,m.jsx)("div",{className:a,children:e.quotedMsg})}return(0,m.jsxs)(p.default,{msg:t,displayAuthor:e.displayAuthor,children:[_,(0,m.jsx)("div",{className:s?d.default.hasText:d.default.noText,children:(0,m.jsx)(c.default,{hasCaption:!!s,iconName:(0,f.liveLocationIcon)(!1),msg:e.msg.unsafe(),theme:"small-icon",children:i.default._("Sharing live location. Open WhatsApp on your phone to view.",null,{hk:"3de18x"})})}),s]})};t.default=_},27863:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.Location=function(e){const t=(0,y.useModelValues)(e.msg,["caption","clientUrl","dir","footer","id","isGroupMsg","isSentByMe","lat","lng","rtl","senderObj","type","ctwaContext","supportsMessageFooter","isDynamicReplyButtonsMsg","hasBodyOrFooter"]),a=()=>{let e=t.get("loc");if(t.get("loc"))return e=e.split("\n"),2===e.length?{name:e[0],addr:e[1]}:{name:e}},s=a(),T=null==s?void 0:s.name,x=t,{lat:M,lng:P}=x,A=(0,f.getMapUrl)(M,P,T),I=x.isDynamicReplyButtonsMsg?null:(e=>{const r=a(),o=t.clientUrl||e;let l,d,u;const h=S.URL.hostname(o),f=(0,n.default)(E.filter((e=>h.includes(e)))),m=f?(0,b.jsx)("span",{className:c.default.link,children:h}):null,_=S.URL.isHttps(o);if(!_)return o.toLowerCase().startsWith("javascript:")&&(__LOG__(4,void 0,new Error,!0)`Bad url: ${o}`,SEND_LOGS("URL error")),null;if(!f&&_&&r&&!o.includes("javascript")){l=r.name?(0,b.jsx)(g.SelectableLink,{className:c.default.title,dir:"auto",href:o,plainText:`${r.name}\n${o}`,selectable:!0,target:"_blank",title:r.name,children:r.name}):null;const e=(0,i.default)(c.default.address,{[c.default.hasURL]:m});d=(null==s?void 0:s.addr)?(0,b.jsx)(g.SelectableDiv,{className:e,selectable:!0,title:s.addr,children:s.addr}):null}return(l||d||m)&&(u=(0,b.jsx)("div",{className:c.default.text,children:(0,b.jsxs)(p.default,{msg:t.unsafe(),"data-id":t.id,children:[l,d,m]})})),u})(A),w=null!=I||x.supportsMessageFooter&&x.hasBodyOrFooter?null:(0,b.jsx)(C.default,{}),k=(0,_.showForwarded)(x),j=e.displayAuthor?(0,b.jsx)("div",{className:c.default.author,children:(0,b.jsx)(r.default,{msg:x,contact:x.senderObj})}):null,N=k?(0,b.jsx)(u.default,{msg:x.unsafe(),className:c.default.forwardedIndicator}):null,O=(0,i.default)(c.default.container,{[c.default.hasCaption]:I,[c.default.hasAuthor]:e.displayAuthor,[c.default.forwarded]:k,[c.default.ctwaContainerWidth]:null!=x.ctwaContext}),R=e.quotedMsg?(0,b.jsx)("div",{className:c.default.quote,children:e.quotedMsg}):null;let D,L;x.supportsMessageFooter&&(D=x.caption?(0,b.jsx)("div",{className:c.default.caption,children:(0,b.jsx)(l.default,{msg:x.unsafe(),spacer:!x.footer,trusted:e.trusted})}):null,L=(0,b.jsx)(v.default,{dir:x.dir,footer:x.footer,isShown:x.supportsMessageFooter,msg:x.unsafe(),rtl:x.rtl,type:x.type,trusted:e.trusted}));return(0,b.jsx)("div",{children:(0,b.jsxs)(o.default,{className:O,contact:x.senderObj,msg:x.unsafe(),children:[j,N,R,(0,b.jsx)(d.default,{msg:x.unsafe(),wrapperClass:c.default.ctwaContext}),(0,b.jsxs)(g.SelectableDiv,{className:c.default.thumb,onClick:e=>{e.stopPropagation()},plainText:A,selectable:!0,style:{height:150},children:[(0,b.jsx)(h.default,{lat:x.lat,lng:x.lng,width:x.ctwaContext?330:270,height:150,name:T,className:c.default.thumbBody}),w]}),I,D,L,(0,b.jsx)("div",{className:c.default.meta,children:(0,b.jsx)(m.Meta,{msg:x})})]})})},t.PREVIEW_HEIGHT=void 0;var n=s(a(41609)),i=s(a(94184)),r=s(a(72655)),o=s(a(85559)),l=s(a(6725)),d=s(a(11740)),u=s(a(14703)),c=s(a(1696)),h=s(a(83452)),f=a(54586),p=s(a(54703)),m=a(42316),_=a(63132),g=a(52596),v=s(a(95839)),C=s(a(2749)),S=a(2541),y=a(49082),b=a(85893);t.PREVIEW_HEIGHT=150;const E=["foursquare.com","facebook.com","maps.google.com"]},56057:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.qplEndProfileView=function(e){s.QPL.markerEnd(n.QuickLogMarkerId.WHATSAPP_PROFILE_VIEW,e)},t.qplStartOrderView=function(e){s.QPL.markerStart(n.QuickLogMarkerId.WHATSAPP_ORDER_VIEW,{bool:{IsCached:e}})},t.qplStartProfileView=function(e){s.QPL.markerStart(n.QuickLogMarkerId.WHATSAPP_PROFILE_VIEW,{string:{EntryPoint:e}})};var s=a(48870),n=a(27798)},62087:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(45095)),i=s(a(94184)),r=a(67294),o=s(a(46633)),l=a(13738),d=a(88102),u=s(a(69618)),c=s(a(43725)),h=a(29565),f=s(a(74790)),p=a(13923),m=a(19529),_=s(a(97507)),g=a(85893);function v(e,t){const{msg:a,albumMsgs:s,albumPosition:v,isMsgVisible:C,zoomMsg:S,numAdditionalMedia:y}=e,b=(0,r.useRef)(null),E=(0,r.useRef)(null);(0,m.useListener)(a,"change:asRevoked",(()=>{d.Cmd.refreshMessages()}));const T=()=>E.current,x=()=>(0,n.default)(b.current,"containerRef.current");(0,r.useImperativeHandle)(t,(()=>({getRef:T,getContainerElement:x})));const M=(0,i.default)({[o.default.albumTopLeft]:v===l.AlbumPosition.TOP_LEFT,[o.default.albumTopRight]:v===l.AlbumPosition.TOP_RIGHT,[o.default.albumBottomLeft]:v===l.AlbumPosition.BOTTOM_LEFT,[o.default.albumBottomRight]:v===l.AlbumPosition.BOTTOM_RIGHT});let P,A;if(null!=y&&0!==y&&(P=(0,g.jsx)(p.TextSpan,{theme:"large",className:(0,i.default)(o.default.numberText),children:c.default.t(963,{number:y})})),a.type===u.default.MSG_TYPE.IMAGE)A=(0,g.jsx)(f.default,{theme:h.DisplayTheme.Album,albumMsgs:s,msg:a,mediaData:a.mediaData,ref:E,isMsgVisible:C,zoomMsg:S,overlayContent:P,displayAuthor:!1});else{if(a.type!==u.default.MSG_TYPE.VIDEO)throw new Error("Unexpected Album Type: "+a.type);A=(0,g.jsx)(_.default,{theme:h.DisplayTheme.Album,albumMsgs:s,msg:a,ref:E,zoomMsg:S,displayAuthor:!1,overlayContent:P})}return(0,g.jsx)("div",{ref:b,className:o.default.albumGridClass,children:(0,g.jsx)("div",{className:M,children:A})})}var C=(0,r.forwardRef)(v);t.default=C},13738:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AlbumPosition=void 0;t.AlbumPosition={TOP_LEFT:"TOP_LEFT",TOP_RIGHT:"TOP_RIGHT",BOTTOM_LEFT:"BOTTOM_LEFT",BOTTOM_RIGHT:"BOTTOM_RIGHT"}},41942:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(67294),i=s(a(19651)),r=s(a(90850)),o=s(a(1195)),l=s(a(72655)),d=(s(a(69618)),s(a(11339))),u=s(a(23217)),c=a(49082),h=a(85893);const f=(e,t)=>{const a=(0,c.useModelValues)(e.msg,["ack","isSentByMe","senderObj"]),s=(0,n.useRef)(null);(0,n.useEffect)((()=>{e.msg.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:d.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1})}),[e.msg]),(0,n.useImperativeHandle)(t,(()=>({handleKeyActivation:e=>{var t;null===(t=s.current)||void 0===t||t.handleKeyActivation(e)}})));const f=e.displayAuthor?(0,h.jsx)(l.default,{msg:a,contact:a.senderObj}):null;return(0,h.jsx)(r.default,{msg:a,quotedMsg:e.quotedMsg,author:f,player:(0,h.jsx)(o.default,{ref:s,msg:e.msg,mediaData:e.mediaData,displayType:e.displayType}),avatar:(0,h.jsx)("div",{className:i.default.icon,children:(0,h.jsx)(u.default,{name:a.shouldBeDisplayedAsPtt()?"ptt-file":"audio-file"})}),displayType:e.displayType})};var p=(0,n.forwardRef)(f);t.default=p},90850:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(94184)),i=s(a(8958)),r=s(a(69618)),o=s(a(11740)),l=s(a(14703)),d=s(a(43725)),u=a(42316),c=a(63132),h=s(a(19218)),f=a(56989),p=a(64551),m=a(49082),_=a(85893);var g=e=>{const{msg:t}=e,{id:a,ack:s,isSentByMe:g}=(0,m.useModelValues)(t,["id","ack","isSentByMe"]),v=d.default.isRTL()?!g:g,C=(0,n.default)(i.default.bubble,{[i.default.bubbleRightAvatar]:!v,[i.default.bubbleLeftAvatar]:v,[i.default.hasAuthor]:e.author,[i.default.hasQuote]:e.quotedMsg,[i.default.isGallery]:e.displayType===r.default.DISP_TYPE.STARRED_MSGS||e.displayType===r.default.DISP_TYPE.GALLERY,[i.default.isForwarded]:(0,c.showForwarded)(t)}),S=e.status?(0,_.jsx)("div",{className:i.default.status,children:e.status}):null,y=null!=e.author?(0,_.jsx)("div",{className:i.default.author,children:e.author}):null,b=(0,c.showForwarded)(t)?(0,_.jsx)(l.default,{msg:t.unsafe(),className:i.default.forwardedIndicator}):null,E=e.quotedMsg?(0,_.jsx)("div",{className:i.default.quote,children:e.quotedMsg}):null,{playbackRate:T,playbackControlMessageId:x}=(0,m.useModelValues)(f.PttPrefs,["playbackRate","playbackControlMessageId"]);let M,P=!1;if(p.ServerProps.pttPlaybackSpeedEnabled&&t.shouldBeDisplayedAsPtt()){P=x===a.toString();const e=(0,n.default)(i.default.playbackRateButtonContainer,{[i.default.playbackRateButtonContainerVisible]:P});M=(0,_.jsx)("div",{className:e,children:(0,_.jsx)(h.default,{playbackRate:T,onClick:()=>{f.PttPrefs.advancePlaybackRateFor(a)},isSentByMe:g,played:s===r.default.ACK.PLAYED})})}const A=(0,n.default)(i.default.avatar,{[i.default.avatarVisible]:!P});return(0,_.jsxs)("div",{className:C,children:[y,b,E,(0,_.jsx)(o.default,{msg:t.unsafe(),wrapperClass:i.default.ctwaContext}),(0,_.jsxs)("div",{className:i.default.body,children:[(0,_.jsx)("div",{className:i.default.player,children:e.player}),(0,_.jsxs)("div",{className:i.default.avatarContainer,children:[M,(0,_.jsxs)("div",{className:A,children:[e.avatar,S]})]})]}),(0,_.jsx)("div",{className:i.default.meta,children:(0,_.jsx)(u.Meta,{msg:t})})]})};t.default=g},41036:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.AudioPlayerFrame=D,t.WrappedAudioPlayer=void 0;var n=a(89385),i=s(a(99964)),r=s(a(94184)),o=s(a(48360)),l=a(67294),d=s(a(70714)),u=a(55712),c=a(76716),h=s(a(20810)),f=a(22683),p=a(88102),m=s(a(69618)),_=a(71093),g=a(52134),v=s(a(39749)),C=s(a(95271)),S=s(a(43725)),y=s(a(97098)),b=s(a(86806)),E=a(98113),T=a(56989),x=s(a(56060)),M=a(64551),P=s(a(23217)),A=s(a(43420)),I=a(19529),w=a(49082),k=s(a(84215)),j=a(85893);function N(e,t){var a;const{displayType:s,msg:i,outgoingMsg:u,played:f,getSequentialMsg:_,mediaData:S}=e,b=(0,w.useModelValues)(null!==(a=e.pttPrefs)&&void 0!==a?a:T.PttPrefs,["playbackRate"]),{playbackRate:x}=b,N=(0,l.useRef)(x),O=(0,l.useRef)(0),B=(0,l.useRef)(null),[F,G]=(0,l.useState)((()=>y.default.acquireAudio(i))),[U,V]=(0,l.useState)(i);U!==i&&(V(i),G((e=>{const t=y.default.acquireAudio(i);return e.dispose(),t})));const{audio:H,pttPlaybackLogger:K}=F,q=(0,l.useRef)(null),[W,Y]=(0,l.useState)((()=>H.currentTime)),[z,Q]=(0,l.useState)((()=>(0,g.getDurationFromAudioOrProtobuf)(H,S))),[$,X]=(0,l.useState)(f),[J,Z]=(0,l.useState)(!1),[ee,te]=(0,l.useState)(!H.paused),[ae,se]=(0,l.useState)(null),ne=()=>{const{currentTime:e}=H;e!==W&&Y(e)};(0,A.default)(ne,{active:ee}),(0,k.default)((()=>{M.ServerProps.pttOotPlayback&&T.PttPrefs.outOfChatPlayerMessage||(K.commit({isSequentialPlayback:J,success:!0}),H.pause()),H.paused&&T.PttPrefs.clearOutOfChatMessage(i),F.dispose()}));const ie=e=>{const t="ptt"===i.type?x:1;H.playbackRate=t,H.defaultPlaybackRate=t,H.currentTime=e?0:W,H.play()},re=()=>{B.current&&(O.current=B.current.getBoundingClientRect().top),ee?H.pause():ie(!1)},oe=e=>new Promise((t=>setInterval(t,e))),le=()=>{const e=z;return null!=e||null!=e?e:(0,g.getDurationFromProto)(S)};(0,l.useEffect)((()=>{const e=N.current;x!==e&&(H.playbackRate=x,H.defaultPlaybackRate=x,N.current=x)}),[H,x]),(0,I.useListener)(H,"playing",(()=>{te(!H.paused)})),(0,I.useListener)(c.MainAudioChannel,"paused_DEPRECATED_DO_NOT_USE",(e=>{var t;e===H&&(null===(t=q.current)||void 0===t||t.controller.abort())})),(0,I.useListener)(H,"pause",(()=>{T.PttPrefs.clearOutOfChatMessage(),te(!H.paused)})),(0,I.useListener)(H,"ended",(()=>{H.currentTime=0,H.load(),ne(),(()=>{let e=J;const t=i.id;if("ptt"!==i.type||!_||!t)return;const a=_(t),s=new d.default,r=s.signal;if(a&&(0,C.default)({currentMsg:i,nextMsg:a,playedBefore:$})){const e=oe(m.default.PTT_PLAYBACK_DELAY).then((()=>{var e;if(r.aborted)throw new n.AbortError;(0,E.playMidPttTone)();const t=null===(e=B.current)||void 0===e?void 0:e.getBoundingClientRect().top;null!=t&&O.current===t&&p.Cmd.scrollToPtt(a.unsafe()),p.Cmd.autoplayPTT(a.id)})).catch((0,n.catchAbort)((()=>{}))).catch((e=>{__LOG__(3)`AudioPlayer:maybePlayNextPTT (with next message) error: ${e}`})).finally((()=>{q.current=null}));q.current={promise:e,controller:s}}else if(J){const t=oe(m.default.PTT_PLAYBACK_DELAY).then((()=>{if(r.aborted)throw new n.AbortError;(0,E.playEndPttTone)()})).catch((0,n.catchAbort)((()=>{}))).catch((e=>{__LOG__(3)`AudioPlayer:maybePlayNextPTT (last message) error: ${e}`})).finally((()=>{q.current=null}));q.current={promise:t,controller:s},e=!1}X(!0),Z(e)})(),K.commit({isSequentialPlayback:J,success:!0}),T.PttPrefs.clearOutOfChatMessage(),te(!H.paused)})),(0,I.useListener)(H,"timeupdate",ne),(0,I.useListener)(H,"durationchange",(()=>{const e=(0,v.default)(H),t=le();null!=e&&e!==t&&Q(e)})),(0,I.useListener)(H,"error",(()=>{K.commit({isSequentialPlayback:J,success:!1})})),(0,I.useListener)(p.Cmd,"sequential_playback_ptt",(e=>{if(i.id!==e)return;Z(!0),Y(0),B.current&&(O.current=B.current.getBoundingClientRect().top);const t=new d.default,a=t.signal,s=oe(m.default.PTT_PLAYBACK_DELAY).then((()=>{if(a.aborted)throw new n.AbortError;ie(!0)})).catch((0,n.catchAbort)((()=>{}))).catch((e=>{__LOG__(3)`AudioPlayer:onPttPlayback error: ${e}`})).finally((()=>{q.current=null}));q.current={promise:s,controller:t}}));const de=e=>{e.preventDefault(),re()};(0,l.useImperativeHandle)(t,(()=>({handleKeyActivation:de})));const ue=ee?"audio-pause":"audio-play",ce=ee?o.default._("Pause voice message",null,{hk:"4aYHr6"}):o.default._("Play voice message",null,{hk:"1IoAqS"}),he=(0,r.default)(h.default.button,{[h.default.outgoing]:u,[h.default.incoming]:!u,[h.default.conversationWaveformEnabled]:M.ServerProps.pttConversationWaveform}),fe=(0,j.jsx)("button",{className:he,onClick:re,"aria-label":ce,children:(0,j.jsx)(P.default,{name:ue})}),pe=(0,j.jsx)("div",{ref:B,className:h.default.scrollPositionDetector});return(0,j.jsxs)(D,{button:fe,played:f,outgoingMsg:u,displayType:s,msg:i.asPtt,children:[pe,(0,j.jsx)(R,{duration:ee?W:(0,g.getDurationFromProto)(S),seekingTime:ae}),(0,j.jsx)(L,{msg:i,currentTime:W,duration:le(),onSeek:e=>{se(e)},onSeekEnd:e=>{const{duration:t}=H,a=e!==t||ee?e:0;Y(a),se(null),H.currentTime=a},outgoing:u,played:null!=f&&f,waveform:S.waveform})]})}const O=(0,l.forwardRef)(N);function R(e){let{duration:t,seekingTime:a}=e;const s=null!=a?a:t;return null==s?null:(0,j.jsx)("div",{className:h.default.metadata,"aria-hidden":!0,children:f.Clock.durationStr(s)})}function D(e){var t,a,s;const n=e.spinner&&null==e.button?(0,j.jsx)("button",{className:h.default.button,onClick:e.action,"data-a8n":i.default.key("audio-player-frame-spinner"),"aria-label":e.ariaLabel,children:(0,j.jsx)("div",{className:h.default.spinner,children:(0,j.jsx)(_.Pending,{outgoingMsg:e.outgoingMsg,canCancel:e.canCancel})})}):null,l=null==e.icon||null!=e.button||e.spinner?null:(0,j.jsx)("button",{className:h.default.button,onClick:e.action,"aria-label":e.ariaLabel,children:e.icon}),d=null!=e.fileSize&&0!==e.fileSize?(0,j.jsx)("div",{className:h.default.metadata,children:S.default.filesize(e.fileSize)}):null,c=(0,r.default)(h.default.audio,{[h.default.isGallery]:e.displayType===m.default.DISP_TYPE.STARRED_MSGS||e.displayType===m.default.DISP_TYPE.GALLERY});return(0,j.jsxs)("div",{className:c,children:[(0,j.jsxs)("div",{className:h.default.controls,children:[e.button,n,l]}),(0,j.jsxs)("div",{className:h.default.body,children:[(0,j.jsx)(u.InvisibleLabel,{children:o.default._("Voice message",null,{hk:"1ac0rl"})}),null!==(t=e.children)&&void 0!==t?t:(0,j.jsx)(L,{msg:e.msg,currentTime:0,duration:100,onSeek:()=>{},onSeekEnd:()=>{},outgoing:e.outgoingMsg,played:null!==(a=e.played)&&void 0!==a&&a,waveform:null===(s=e.msg)||void 0===s?void 0:s.mediaData.waveform,disabled:!0}),d]})]})}function L(e){let{msg:t,currentTime:a,duration:s,onSeek:n,onSeekEnd:i,outgoing:r,played:o,waveform:l,disabled:d}=e;return M.ServerProps.pttConversationWaveform&&(null==t?void 0:t.shouldBeDisplayedAsPtt())&&null!=l?(0,j.jsx)(b.default,{currentTime:a,duration:s,onSeek:n,onSeekEnd:i,outgoing:r,played:o,waveform:l,disabled:d,skipThumb:d}):(0,j.jsx)(x.default,{currentTime:a,duration:s,onSeek:n,onCommit:i,outgoing:r,played:o,disabled:d})}t.WrappedAudioPlayer=O},7847:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(94184)),i=a(67294),r=s(a(69618)),o=s(a(11740)),l=s(a(24686)),d=s(a(11465)),u=s(a(43725)),c=s(a(47049)),h=a(64551),f=s(a(67037)),p=a(49082),m=a(85893);function _(e){let{size:t}=e;if(null==t||t<=0)return null;const a=u.default.filesize(t);return(0,m.jsx)("span",{className:l.default.metaValue,title:a,children:a})}function g(e){let{count:t}=e;if(null==t||t<=0)return null;const a=u.default.t(1605,{count:t,_plural:t});return(0,m.jsx)("span",{className:l.default.metaValue,title:a,children:a})}function v(e){let{ext:t}=e;if(null==t)return null;const a=t.toUpperCase();return(0,m.jsx)("span",{"data-meta-key":"type","data-testid":"type",className:l.default.metaValue,title:a,children:a})}function C(e,t){const{displayAuthor:a,displayType:s,quotedMsg:i,trusted:u}=e,C=h.ServerProps.webLargeFilesUi,S=(0,p.useModelValues)(e.msg,["ack","caption","dir","isFromTemplate","isFailed","isSentByMe","rtl","senderObj","subtype","type","isVcardOverMmsDocument","mediaData","isDynamicReplyButtonsMsg"]),y=(0,p.useModelValues)(e.msg.mediaData,["mediaStage","filename","pageCount","size","mimetype","preview","fullPreviewData"].concat(C?["loadedSize"]:[])),b=(0,f.default)({mimetype:y.mimetype,filename:y.filename}),E=(S.isFromTemplate||S.isDynamicReplyButtonsMsg)&&S.caption,T=E?null:(0,m.jsxs)("div",{className:l.default.docMeta,children:[(0,m.jsx)(g,{count:y.pageCount}),(0,m.jsx)(v,{ext:b.ext}),(0,m.jsx)(_,{size:y.size})]});return(0,m.jsx)("div",{ref:t,className:(0,n.default)({[l.default.bubble]:!E,[l.default.templateBubble]:E,[l.default.isPreview]:s===r.default.DISP_TYPE.MSG_INFO,[l.default.isGallery]:s===r.default.DISP_TYPE.STARRED_MSGS||s===r.default.DISP_TYPE.GALLERY}),children:(0,m.jsxs)(c.default,{displayType:s,msg:S,quotedMsg:i,showAuthor:a,hideCaption:!(S.isFromTemplate||S.isDynamicReplyButtonsMsg),trusted:u,children:[(0,m.jsx)(o.default,{msg:S.unsafe(),wrapperClass:l.default.ctwaContext}),(0,m.jsx)(d.default,{msg:S}),T]})})}var S=(0,i.forwardRef)(C);t.default=S},11465:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const a=E.ServerProps.webLargeFilesUi,[s,R]=(0,r.useState)(a),D=e.msg.isTrusted(),L=(0,I.useModelValues)(e.msg,["ack","caption","dir","isFromTemplate","isFailed","isSentByMe","rtl","senderObj","subtype","type","isVcardOverMmsDocument","mediaData","isDynamicReplyButtonsMsg"]),B=(0,I.useModelValues)(e.msg.mediaData,["mediaStage","filename","pageCount","size","mimetype","preview","fullPreviewData"].concat(a?["loadedSize","filehash"]:[])),F=(0,A.default)({mimetype:B.mimetype,filename:B.filename}),G=a?B.filehash:null;(0,r.useEffect)((()=>{null!=G&&a&&B.mediaStage===y.MEDIA_DATA_STAGE.INIT&&v.LruMediaStore.get(G).then((e=>{R(null!=e)}))}),[G,B.mediaStage,a]),(0,r.useEffect)((()=>{B.fullPreviewData||E.ServerProps.webDownloadDocumentThumbMmsEnabled&&(0,f.default)({msg:(0,x.unproxy)(L),isPreload:!1})}),[]);const U=e=>{j(e),l.Cmd.openModal((0,k.jsx)(C.default,{msg:L.unsafe()}))},V=e=>{if(j(e),Modernizr.adownload)L.downloadMedia({downloadEvenIfExpensive:B.size<=104857600,rmrReason:b.default.WEBC_RMR_REASON_CODE.MSG_CLICK,isUserInitiated:!0}).catch((()=>{})).then((()=>{switch(B.mediaStage){case y.MEDIA_DATA_STAGE.RESOLVED:case y.MEDIA_DATA_STAGE.ERROR_UNSUPPORTED:L.isVcardOverMmsDocument||((()=>{{const e=B.filename||g.default.t(1391);l.Cmd.openToast((0,k.jsx)(w.Toast,{msg:g.default.t(411,{name:e}),id:(0,w.genId)()}))}})(),m.FileSaver.initDownload((0,x.unproxy)(L.unsafe())));break;case y.MEDIA_DATA_STAGE.NEED_POKE:case y.MEDIA_DATA_STAGE.ERROR_MISSING:U()}}));else{const e=g.default.t(1924,{chrome_homepage:u.default.BROWSER_LINK.CHROME,firefox_homepage:u.default.BROWSER_LINK.FIREFOX,opera_homepage:u.default.BROWSER_LINK.OPERA});l.Cmd.openModal((0,k.jsx)(d.default,{onOK:()=>l.Cmd.closeModal(),okText:g.default.t(1765),children:(0,k.jsx)("div",{dangerouslySetInnerHTML:{__html:e}})}))}},H=e=>{j(e),L.cancelDownload()},K=e=>{j(e),L.cancelUpload()},q=e=>{j(e),L.resumeUpload()},W=e=>{j(e),L.resumeRemoteUpload()},Y=(0,i.default)((0,o.default)(N.filetypeIcon),F.icon),z=B.filename||g.default.t(1391);let Q=null;const $={onClick:()=>{}};switch(B.mediaStage){case y.MEDIA_DATA_STAGE.RESOLVED:case y.MEDIA_DATA_STAGE.ERROR_UNSUPPORTED:case y.MEDIA_DATA_STAGE.NEED_POKE:case y.MEDIA_DATA_STAGE.INIT:$.onClick=V,$.title=g.default.t(1619,{name:z}),Q=(B.mediaStage===y.MEDIA_DATA_STAGE.RESOLVED||B.mediaStage===y.MEDIA_DATA_STAGE.INIT&&s)&&a?null:(0,k.jsx)(h.Download,{onClick:$.onClick});break;case y.MEDIA_DATA_STAGE.UPLOADING:case y.MEDIA_DATA_STAGE.FETCHING:Q=(0,k.jsx)(h.Pending,{outgoingMsg:L.isSentByMe,canCancel:!0,value:a&&null!=B.loadedSize&&null!=B.size&&B.size>0?Math.ceil(B.loadedSize/B.size*100):void 0}),$.onClick=B.mediaStage===y.MEDIA_DATA_STAGE.FETCHING?H:K;break;case y.MEDIA_DATA_STAGE.NEED_UPLOAD:Q=(0,k.jsx)(h.Upload,{}),$.onClick=q;break;case y.MEDIA_DATA_STAGE.REMOTE_NEED_UPLOAD:Q=(0,k.jsx)(h.Upload,{}),$.onClick=W;break;case y.MEDIA_DATA_STAGE.ERROR_TOO_LARGE:break;case y.MEDIA_DATA_STAGE.ERROR_FILE_NOT_READABLE:$.onClick=T.default;break;case y.MEDIA_DATA_STAGE.ERROR_MISSING:$.onClick=U;break;case y.MEDIA_DATA_STAGE.SENDING:Q=L.isFailed?null:(0,k.jsx)(h.Pending,{outgoingMsg:L.isSentByMe});break;default:Q=(0,k.jsx)(h.Pending,{outgoingMsg:L.isSentByMe})}const X=null!=(null!==(t=B.preview)&&void 0!==t?t:B.fullPreviewData);return(0,k.jsxs)(P.default,(0,n.default)((0,n.default)({xstyle:N.buttonContainer,a8nText:"document-thumb"},$),{},{children:[D?(0,k.jsx)(S.default,{msg:L.unsafe(),containerClassName:(0,o.default)(N.thumbContainer),childClassName:(0,o.default)(N.thumb)}):null,(0,k.jsx)(c.default,{outgoingMsg:L.isSentByMe,position:X?"bottom":void 0,children:(0,k.jsxs)(_.FlexRow,{xstyle:N.deepContainerContent,align:"center",children:[(0,k.jsx)(_.FlexItem,{xstyle:N.icon,shrink:0,children:(0,k.jsx)("div",{className:Y})}),(0,k.jsxs)(_.FlexItem,{xstyle:[N.text,g.default.isRTL()&&N.textRTL],grow:1,children:[(0,k.jsx)(p.EmojiText,{text:z,dirMismatch:L.rtl!==g.default.isRTL(),direction:"auto"}),a&&O.has(B.mediaStage)?(0,k.jsx)(M.TimeLeftEta,{size:B.size,loadedSize:B.loadedSize,sampling:3}):null]}),(0,k.jsx)(_.FlexItem,{grow:0,shrink:0,children:Q})]})})]}))};var n=s(a(81109)),i=s(a(94184)),r=a(67294),o=s(a(56720)),l=a(88102),d=s(a(52665)),u=s(a(69618)),c=s(a(68466)),h=a(71093),f=s(a(61516)),p=a(65417),m=a(77811),_=a(29623),g=s(a(43725)),v=a(55975),C=s(a(20668)),S=s(a(4293)),y=a(58668),b=s(a(11339)),E=a(64551),T=s(a(75315)),x=a(31019),M=a(41492),P=s(a(1784)),A=s(a(67037)),I=a(49082),w=a(50452),k=a(85893);function j(e){e&&(e.stopPropagation(),e.preventDefault())}const N={buttonContainer:{boxSizing:"cm280p3y",display:"p357zi0d",flexDirection:"f8m0rgwh",alignItems:"elxb2u3l",width:"ln8gz9je",overflowX:"gfz4du6o",overflowY:"r7fjleex",color:"gtscxtjd",textAlign:"tffp5ko5",cursor:"ajgl1lbb",borderTopStartRadius:"l8fojup5",borderTopEndRadius:"paxyh2gw"},text:{position:"g0rxnol2",top:"g3ewzqzm",marginTop:"tt8xd2xn",marginBottom:"mpdn4nr2",marginEnd:"spjzgwxb",marginStart:"a3oefunm",overflowX:"gfz4du6o",overflowY:"r7fjleex",textOverflow:"lhj4utae",whiteSpace:"le5p0ye3"},textRTL:{textAlign:"cb8ormfa"},icon:{marginTop:"o9i7y497"},deepContainerContent:{height:"jbxl65f1",paddingTop:"lqdozo90",paddingEnd:"igb3k0ri",paddingBottom:"bavixdlz",paddingStart:"nntdgyy8"},filetypeIcon:{backgroundRepeat:"sxl192xd",backgroundSize:"hbhfgwk1",height:"fs6hn1up",width:"ekdr8vow"},thumb:{backgroundPosition:"hrdw4pet",backgroundRepeat:"sxl192xd",backgroundSize:"qnwaluaf",borderBottom:"qj9nvfuq",height:"ppled2lx",position:"lhggkp7q",width:"ln8gz9je"},thumbContainer:{height:"fe3aadhc",position:"g0rxnol2",width:"ln8gz9je"}},O=new Set([y.MEDIA_DATA_STAGE.FETCHING,y.MEDIA_DATA_STAGE.UPLOADING])},51845:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{canonicalUrl:t,compose:a,description:s,displayType:n,invite:r,onClick:d,isSentByMe:_,star:g,thumbnail:v,thumbnailJpeg:C,thumbnailJpegHQ:S,thumbnailJpegDirectPath:y,thumbnailJpegHeight:b,thumbnailJpegWidth:E,title:T,theme:x}=e;const M=n===o.default.DISP_TYPE.GALLERY,P=("high-quality"===x||"high-quality-extended"===x)&&!M,A=!a&&!M&&(I=t,!!I&&m.some((e=>e.test(I))));var I;let w,k;if(null!=v)k=(0,h.jsx)("div",{"data-testid":"link-preview-thumbnail",className:u.default.media,children:v});else if(C||S){const e=S&&!M?S:C;if(e&&(k=(0,h.jsx)("img",{"data-testid":"link-preview-thumbnail-jpeg",alt:"",className:u.default.media,src:`data:image/jpeg;base64,${e}`}),(y||S)&&null!=b&&null!=E&&!M))if(P){const e=Math.min(Math.max(b/E,.25),1),t=e<1?330:240;k=(0,h.jsx)("div",{"data-testid":"high-quality-layout",className:(0,i.default)(u.default.thumbnailContainer,{[u.default.blurred]:!S}),style:{height:t*e},children:k})}else{const e=Math.min(Math.max(b/E,1),1.4),t=90;k=(0,h.jsx)("div",{"data-testid":"standard-quality-layout",className:(0,i.default)(u.default.thumbnailContainer,{[u.default.blurred]:!S}),style:{width:t/e,minWidth:t/e},children:k})}}else n===o.default.DISP_TYPE.GALLERY&&(k=(0,h.jsx)("div",{"data-testid":"link-preview-no-thumb",className:u.default.noThumbContainer,children:(0,h.jsx)(c.default,{className:u.default.noThumbIcon,name:"link"})}));if(n===o.default.DISP_TYPE.GALLERY){const e=g?(0,h.jsx)(c.default,{className:u.default.iconStar,name:"star"}):null;w=(0,h.jsxs)("div",{"data-testid":"icon-star",className:u.default.galleryContainer,children:[k,e]})}else w=k;const j=f(T),N=p(j),O="string"==typeof s?f(s):void 0,R=p(O),D=A&&!P?280:void 0,L=null!=s?(0,h.jsx)("div",{"data-testid":"link-description",className:u.default.description,children:"string"==typeof s?(0,h.jsx)(l.EmojiText,{text:s,textLimit:D,titlify:!0,direction:O,dirMismatch:R}):s}):null,B=t?(0,h.jsx)("div",{"data-testid":"url-element",className:u.default.source,children:(0,h.jsx)(l.EmojiText,{text:t,direction:j,dirMismatch:N})}):null,F=(0,i.default)(u.default.preview,{[u.default.isInvite]:n!==o.default.DISP_TYPE.GALLERY&&r,[u.default.isCompose]:a,[u.default.bubbleIn]:!_,[u.default.bubbleOut]:_,[u.default.extended]:"extended"===x,[u.default.highQualityLayout]:P,[u.default.fullPreview]:A,[u.default.withoutDescription]:null==s});return(0,h.jsxs)("div",{className:F,onClick:d,children:[w,(0,h.jsxs)("div",{className:u.default.body,children:[(0,h.jsx)("div",{className:u.default.title,title:T,children:(0,h.jsx)(l.EmojiText,{text:T,direction:j,dirMismatch:N})}),L,B]})]})};var i=n(a(94184)),r=s(a(93131)),o=n(a(69618)),l=a(65417),d=n(a(43725)),u=n(a(72098)),c=n(a(23217)),h=a(85893);function f(e){return e?r.dir(e):void 0}function p(e){return"rtl"===e!==d.default.isRTL()}const m=[/^(www.)?twitter.com$/i]},36588:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(3689)),i=a(67294),r=a(88102),o=(s(a(69618)),s(a(61516))),l=a(12591),d=s(a(51845)),u=a(32554),c=s(a(82791)),h=a(2541),f=a(49082),p=a(85893);function m(e){const{msg:t,displayType:a,invite:s,theme:m}=e,_=(0,f.useModelValues)(t,["t","thumbnail","thumbnailHQ","thumbnailDirectPath","thumbnailHeight","thumbnailWidth","title","description","canonicalUrl","matchedText","isSentByMe","star","asUrl"]);(0,i.useEffect)((()=>{const e=_.asUrl;!e||(0,u.hqLinkPreviewExpired)(_.t)||e.thumbnailHQ||(0,o.default)({msg:e,isPreload:!1})}),[_]);let g=null;if(!s){g=h.URL.hostname(_.canonicalUrl||_.matchedText);try{g=n.default.toUnicode(g)}catch(e){}}const v=_.getSuspiciousLinks().filter((e=>{let{url:t}=e;return _.matchedText===t}));let C,S,y,b,E,T,x;return v.length?x=()=>{const e=v[0];r.Cmd.openModal((0,p.jsx)(c.default,{link:e}))}:(x=()=>{const e=_.matchedText;(0,l.openExternalLink)(e)},C=_.description,S=_.thumbnail,(0,u.hqLinkPreviewExpired)(_.t)||(y=_.thumbnailHQ,b=_.thumbnailDirectPath,E=_.thumbnailHeight,T=_.thumbnailWidth)),(0,p.jsx)(d.default,{canonicalUrl:g,description:C,displayType:a,invite:s,onClick:x,isSentByMe:_.isSentByMe,thumbnailJpeg:S,thumbnailJpegHQ:y,thumbnailJpegDirectPath:b,thumbnailJpegHeight:E,thumbnailJpegWidth:T,title:_.title,star:_.star,theme:m})}var _=(0,i.memo)(m);t.default=_},1238:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,u.showForwarded)(e.msg),a=e.displayAuthor?(0,c.jsx)("div",{className:l.default.author,children:(0,c.jsx)(i.default,{msg:e.msg,contact:e.msg.senderObj})}):null,s=e.displayType===r.default.DISP_TYPE.GALLERY||e.hideMeta?null:(0,c.jsx)("div",{className:l.default.meta,children:(0,c.jsx)(d.Meta,{msg:e.msg})}),h=t?(0,c.jsx)(o.default,{msg:e.msg.unsafe(),className:l.default.forwardedIndicator}):null,f=e.quotedMsg?(0,c.jsx)("div",{className:l.default.quote,children:e.quotedMsg}):null,p=(0,n.default)(l.default.bubble,{[l.default.forwarded]:t,[l.default.hasAuthor]:e.displayAuthor,[l.default.hasCaption]:e.hasCaption,[l.default.isPSA]:e.msg.isPSA});return(0,c.jsxs)("div",{className:p,children:[a,h,f,e.children,s]})};var n=s(a(94184)),i=s(a(72655)),r=s(a(69618)),o=s(a(14703)),l=s(a(97349)),d=a(42316),u=a(63132),c=a(85893)},63547:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.MediaMsgPreview=function(e){const t=(0,l.useModelValues)(e.mediaData,["filehash","fullPreviewData","mediaStage","preview","type"]),a=()=>{var e,a;const s=[],n=t.preview instanceof o.default?t.preview.url():null;n&&s.push((0,d.jsx)(h,{url:n},"preview"));const i=null===(e=t.fullPreviewData)||void 0===e||null===(a=e.url)||void 0===a?void 0:a.call(e);return i&&s.push((0,d.jsx)(h,{url:i},"fullPreview")),s.length?s:null};if(!c(t.type))return a();return(0,d.jsx)(r.default,{mediaData:t,placeholderRenderer:a,renderProgressively:!0,children:e=>(0,d.jsx)(h,{url:e})},t.filehash)},t.isMediaTypeWithImage=c;var n=s(a(69618)),i=s(a(36363)),r=s(a(20553)),o=s(a(34949)),l=a(49082),d=a(85893);const u=new Set([n.default.MSG_TYPE.IMAGE,n.default.MSG_TYPE.PRODUCT]);function c(e){return u.has(e)}function h(e){let{url:t}=e;return(0,d.jsx)("div",{className:i.default.preview,style:{backgroundImage:`url(${t})`}})}},81309:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertToBase64=n,t.convertToDataURI=function(e){return`data:image/jpeg;base64,${n(e)}`};var s=a(8584);function n(e){return btoa(String.fromCharCode.apply(null,s.Binary.build(e).readByteArray()))}},41492:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.TimeLeftEta=function(e){let{size:t,loadedSize:a,sampling:s=1}=e;const c=(0,n.useRef)(!1),h=(0,n.useRef)(0),f=(0,l.useTimeLeftMs)(a,t);!c.current&&++h.current>=s&&null!=f&&f>=1e4&&(c.current=!0);const p=!1===c.current||null==t||null==a||a>=t||null==f||0===f?null:(0,u.jsx)("div",{"data-testid":"time-left-eta",children:(0,u.jsx)(o.TextDiv,{theme:"small",children:r.default.t(469,{progress:Math.floor(a/t*100),eta:i.Clock.timeLeftStr(Math.ceil(f/1e3))})})});return(0,u.jsx)(d.default,{transitionName:"slide-up-fade-in-eta",children:p})};var n=a(67294),i=a(22683),r=s(a(43725)),o=a(13923),l=a(98567),d=s(a(41956)),u=a(85893)},67037:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{mimetype:t,filename:a}=e;return(0,s.useMemo)((()=>{var e;let s,r;var o,l;i.DOCUMENT_MIMETYPES.hasOwnProperty(t)&&(s=null===(o=i.DOCUMENT_MIMETYPES[t])||void 0===o||null===(l=o.ext)||void 0===l?void 0:l.toLowerCase(),r=t);const d=a?(0,n.getFileExtension)(a):null;var u;(null==s||null!=d&&s!==d)&&(s=d,r=null!=s&&null!==(u=null===i.EXT_TO_MIME||void 0===i.EXT_TO_MIME?void 0:i.EXT_TO_MIME[s])&&void 0!==u?u:null);return{ext:s,mime:r,icon:null!=r&&(null===(e=i.DOCUMENT_MIMETYPES[r])||void 0===e?void 0:e.icon)||"icon-doc-generic"}}),[t,a])};var s=a(67294),n=a(1063),i=a(43257)},98567:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.useTimeLeftMs=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;const s=(0,i.default)((()=>Date.now())),o=(0,n.useRef)(0),l=(0,r.default)((()=>{if(null==s.current||null==o.current||null==t||null==e)return null;const a=Date.now(),n=e-o.current,i=a-s.current;return o.current=e,s.current=a,0===i?null:(t-e)/n*i}),a,{trailing:!1,leading:!0});return l()};var n=a(67294),i=s(a(59552)),r=s(a(88857))},77807:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=s.GK.supportsFeature(s.GK.F.MD_BACKEND)?n.isParsableYouTubeVideoUrl:n.isParsableOnlineVideoURL;return null!=e.matchedText&&""!==e.matchedText&&t(e.richPreviewType,e.matchedText,e.doNotPlayInline)};var s=a(7293),n=a(20427)},75315:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(function(e){if(!e)return;e.stopPropagation(),e.preventDefault()})(e),n.Cmd.openModal((0,r.jsx)(i.default,{}))};var n=a(88102),i=s(a(98707)),r=a(85893)},42798:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseYoutubeVideoId=function(e){const t=s.URL_PATTERNS.ONLINE_VIDEO_URL.YOUTUBE;for(let a=0;a<t.length;a++){const s=n.URL.withoutWww(e).match(t[a]);if(s)return s[s.length-1]}return null};var s=a(40875),n=a(2541)},97507:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(94184)),i=a(67294),r=s(a(72655)),o=s(a(85559)),l=s(a(6725)),d=s(a(69618)),u=a(21504),c=s(a(11740)),h=s(a(14703)),f=a(29565),p=a(42316),m=a(63132),_=s(a(95839)),g=a(3940),v=a(49082),C=s(a(56883)),S=s(a(50253)),y=a(85893);function b(e){e.stopPropagation()}function E(e,t){var a;const{theme:s,overlayContent:i,displayType:E,displayAuthor:T}=e,x=(0,v.useModelValues)(e.msg,["ack","caption","dir","footer","id","isGroupMsg","isPSA","isSentByMe","isUnsentMedia","rtl","senderObj","type","isFailed","ctwaContext","supportsMessageFooter","text"]),M=(0,v.useModelValues)(e.msg.mediaData,["aspectRatio"]),P=(0,g.numCodepoints)(null!==(a=x.text)&&void 0!==a?a:"")>d.default.MAX_PORTRAIT_MEDIA_CAPTION_LENGTH,{bubbleWidth:A,bubbleHeight:I}=(0,u.getBubbleDimension)(x.type,!1,M.aspectRatio,s,E,P),w=T?(0,y.jsx)("div",{className:C.default.author,children:(0,y.jsx)(r.default,{msg:x,contact:x.senderObj})}):null,k=(0,m.showForwarded)(x)&&e.theme!==f.DisplayTheme.Album,j=k?(0,y.jsx)(h.default,{msg:x.unsafe(),className:C.default.forwardedIndicator}):null,N=x.caption?(0,y.jsx)("div",{className:C.default.caption,children:(0,y.jsx)(l.default,{msg:x.unsafe(),trusted:e.trusted,spacer:!(x.supportsMessageFooter&&x.footer)})}):null,O=(0,n.default)(C.default.bubble,{[C.default.nonAlbumBubble]:!s||s!==f.DisplayTheme.Album,[C.default.portrait]:A<I&&(0,u.canUseCustomCropping)(x.type,s,E)}),R=(0,n.default)(O,{[C.default.hasCaption]:N,[C.default.hasAuthor]:T,[C.default.forwarded]:k,[C.default.isPSA]:x.isPSA,[C.default.ctwaContainerWidth]:null!=x.ctwaContext}),D=e.quotedMsg?(0,y.jsx)("div",{className:C.default.quote,children:e.quotedMsg}):null;let L;null==i&&(L=(0,y.jsx)("div",{className:C.default.meta,children:(0,y.jsx)(p.Meta,{msg:x})}));let B=(0,y.jsxs)("div",{className:R,children:[w,j,D,(0,y.jsx)(c.default,{msg:x.unsafe(),wrapperClass:C.default.ctwaContext}),(0,y.jsx)(S.default,{albumMsgs:e.albumMsgs,displayType:E,hasOverlay:Boolean(i),hover:e.hover,msg:x,mediaData:e.msg.mediaData,theme:s,zoomMsg:e.zoomMsg}),N,(0,y.jsx)(_.default,{dir:x.dir,footer:x.footer,isShown:x.supportsMessageFooter,msg:x.unsafe(),rtl:x.rtl,type:x.type,trusted:e.trusted}),L]});return N?(0,y.jsx)(o.default,{contact:x.senderObj,msg:x.unsafe(),onClick:b,children:B}):(null!=i&&(B=(0,y.jsxs)("div",{className:C.default.overlayAlbumText,children:[B,i]})),(0,y.jsx)("div",{onClick:b,ref:t,children:B}))}var T=(0,i.forwardRef)(E);t.default=T},72377:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{msg:t}=e,a=(0,o.useRef)(null),[s,n]=(0,o.useState)((()=>g.default.isOpened((0,C.unproxy)(t))?w:I));(0,T.useListener)(g.default,`${t.id.toString()}_pip_did_open`,(()=>{s!==w&&n(w)})),(0,T.useListener)(g.default,`${t.id.toString()}_pip_did_close`,(()=>{s!==I&&n(I)}));const j=()=>a.current?a.current.getBoundingClientRect():null,N=t.description?(0,A.jsx)("div",{className:x.default.description,title:t.description,children:(0,A.jsx)(c.EmojiText,{text:t.description})}):null;let O=b.URL.hostname(e.msg.canonicalUrl||e.msg.matchedText);O=b.URL.withoutWww(O),O===d.default.HOSTNAME.YOUTUBE_SHORTENED&&(O=d.default.HOSTNAME.YOUTUBE);const R=(0,A.jsx)("div",{className:x.default.source,children:(0,A.jsx)(c.EmojiText,{text:O})}),D=(0,r.default)(x.default.body,{[x.default.noThumb]:!e.msg.thumbnail}),L=(0,m.hqLinkPreviewExpired)(t.t),B=!L&&e.msg.thumbnailHQ?e.msg.thumbnailHQ:e.msg.thumbnail;let F;if(s===I)switch(O){case d.default.HOSTNAME.YOUTUBE:case d.default.HOSTNAME.YOUTUBE_MOBILE:const t=(0,P.parseYoutubeVideoId)(e.msg.matchedText);if(t){const a=(e=>{const t=e.split("?");if(2!==t.length)return 0;const a=t[1],s=new E.default(a).get(u.YOUTUBE_URL_TIME_PARAM_NAME);if(!s)return 0;const n=s.match(u.YOUTUBE_URL_TIME_PARAM_PATTERN);let i=0;if(null==n?void 0:n.length)for(let e=1;e<n.length;e++){const t=n[e];if(!t)continue;const a=parseInt(t,10);if(Number.isNaN(a))return 0;t.endsWith("h")&&(i+=3600*a),t.endsWith("m")&&(i+=60*a),t.endsWith("s")&&(i+=a),/^\d+$/.test(t)&&(i+=a)}return i})(e.msg.matchedText);F=s=>{s&&s.stopPropagation(),g.default.openYoutubePiP(t,e.msg,a,j())}}break;case d.default.HOSTNAME.INSTAGRAM:case d.default.HOSTNAME.STREAMABLE:case d.default.HOSTNAME.FACEBOOK:case d.default.HOSTNAME.FBWATCH:case d.default.HOSTNAME.FBWATCH_ALT:case d.default.HOSTNAME.LASSOVIDEOS:case d.default.HOSTNAME.LASSO_SHORTENED:case d.default.HOSTNAME.SHARECHAT:f.GK.supportsFeature(f.GK.F.VIDEO_PLAYBACK_URL)&&(F=()=>{if(g.default.openOgVideoPiP("",B,e.msg,0,j()),f.GK.supportsFeature(f.GK.F.MD_BACKEND))throw new Error("This call is only supported in non-MD mode");const t=b.URL.build(e.msg.matchedText,{wa_logging_event:"video_play_open"});M.default.queryVideoPlaybackUrl(t).then((t=>{if(g.default.isOpened(e.msg)){if(!t.url)throw new Error("Url is missing in response.");g.default.openOgVideoPiP(t.url,B,e.msg,0,null)}})).catch((t=>{__LOG__(3)`handlePiPLauncherClick: queryVideoPlaybackUrl has failed with error ${t}`,g.default.closePiP(),l.Cmd.openToast((0,A.jsx)(y.Toast,{id:(0,y.genId)(),msg:p.default.t(1037),action:{actionText:p.default.t(1038),onAction:()=>{(0,h.openExternalLink)(e.msg.matchedText)}}}))}))});break;default:return null}const G=(0,r.default)(x.default.preview,{[x.default.bubbleIn]:!e.msg.isSentByMe,[x.default.bubbleOut]:e.msg.isSentByMe}),U=s===I?(0,A.jsx)("div",{className:x.default.mediaStateControlsWrapper,children:(0,A.jsx)(_.Play,{})}):null,V=s===w?(0,A.jsx)(v.default,{icon:(0,A.jsx)(S.default,{name:"video-pip-large"}),children:p.default.t(1039)}):null;let H,K;if(B&&(0,i.default)(d.default.HOSTNAME).includes(O)){var q;const t=function(e){return k.includes(e)}(O);H=(0,A.jsx)("img",{alt:"",className:(0,r.default)(x.default.thumbnail,{[x.default.youtubeThumbnail]:t,[x.default.noBlur]:t&&f.GK.supportsFeature(f.GK.F.YOUTUBE_VIDEO_PREVIEW_WITHOUT_BLUR)||!L&&!!e.msg.thumbnailHQ}),src:`data:image/jpeg;base64,${B}`});const a=null!==(q=u.ATTRIBUTION_ICONS[O])&&void 0!==q?q:null;a&&(K=(0,A.jsx)("div",{className:x.default.attribution,children:(0,A.jsx)(S.default,{name:a})}))}else H=(0,A.jsx)("div",{className:x.default.thumbnailPlaceholder});return(0,A.jsxs)("div",{className:G,children:[(0,A.jsxs)("div",{ref:a,className:x.default.thumbnailWrapper,onClick:F,children:[K,H,U,V]}),(0,A.jsxs)(h.ExternalLink,{className:D,href:e.msg.matchedText,children:[(0,A.jsx)("div",{className:x.default.title,title:e.msg.title,children:(0,A.jsx)(c.EmojiText,{text:e.msg.title})}),N,R]})]})};var i=n(a(52628)),r=n(a(94184)),o=a(67294),l=a(88102),d=n(a(69618)),u=a(40875),c=a(65417),h=a(12591),f=a(7293),p=n(a(43725)),m=a(32554),_=s(a(41124)),g=n(a(77912)),v=n(a(27557)),C=a(31019),S=n(a(23217)),y=a(50452),b=a(2541),E=n(a(23082)),T=a(19529),x=n(a(91881)),M=n(a(56891)),P=a(42798),A=a(85893);const I="PREVIEW",w="FLOATER",k=[d.default.HOSTNAME.YOUTUBE,d.default.HOSTNAME.YOUTUBE_MOBILE,d.default.HOSTNAME.YOUTUBE_SHORTENED]},85476:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(67294),i=s(a(61516)),r=a(32554),o=a(49082),l=s(a(72377)),d=a(85893);function u(e){const t=(0,o.useModelValues)(e.msg,["t","thumbnailHQ","asUrl","isSentByMe"]);return(0,n.useEffect)((()=>{const e=t.asUrl;!e||(0,r.hqLinkPreviewExpired)(t.t)||e.thumbnailHQ||(0,i.default)({msg:e,isPreload:!1})}),[t]),(0,d.jsx)(l.default,{msg:t.unsafe()})}var c=(0,n.memo)(u);t.default=c},50253:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a;const{theme:s,hasOverlay:n,displayType:D,albumMsgs:L}=e,B=(0,k.useModelValues)(e.msg,["ack","caption","dir","footer","gifAttribution","id","isGroupMsg","isPSA","isSentByMe","isUnsentMedia","rtl","senderObj","type","isFailed","ctwaContext","supportsMessageFooter","text"]);(0,k.useModelValues)(e.mediaData,["aspectRatio","preview","fullPreviewData","duration","mediaStage","fullWidth","fullHeight","size"]);const F=(0,o.useRef)(null),[G,U]=(0,o.useState)((()=>b.default.isOpened((0,x.unproxy)(B.unsafe()))?R:O));(0,o.useEffect)((()=>{h.GK.supportsFeature(h.GK.F.MEDIA_EXISTENCE_CHECK)&&(0,p.checkExistence)((0,x.unproxy)(B)),h.GK.isHighQualityVideoThumbnailsEnabled()&&(0,p.downloadVideoThumbnail)({msg:(0,x.unproxy)(B)})}),[]);const V=()=>{d.Cmd.openModal((0,N.jsx)(_.default,{msg:B.unsafe()}))},H=()=>{B.forceDownloadMediaEvenIfExpensive()},K=()=>{B.cancelDownload()},q=()=>{B.cancelUpload()},W=()=>{B.resumeUpload()},Y=()=>{B.resumeRemoteUpload()},z=e=>{e&&e.stopPropagation(),d.Cmd.openModal((0,N.jsx)(C.default,{msg:(0,x.unproxy)(B.unsafe())}))},Q=t=>{if(t&&t.stopPropagation(),s===m.DisplayTheme.Album){const t=e.zoomMsg||B,a=new Set((L||[]).map((e=>e.id.toString())));d.Cmd.mediaViewerModal({msg:(0,x.unproxy)(t.unsafe()),highlightedMsgIds:a})}else d.Cmd.mediaViewerModal({msg:(0,x.unproxy)(B.unsafe())})},$=e=>{e&&e.stopPropagation();const t=F.current?F.current.getBoundingClientRect():null;b.default.openPiP((0,x.unproxy)(B.unsafe()),0,t)};(0,w.useListener)(b.default,`${B.id.toString()}_pip_did_open`,(()=>{G!==R&&U(R)})),(0,w.useListener)(b.default,`${B.id.toString()}_pip_did_close`,(()=>{G!==O&&U(O)}));const X=B,J=e.mediaData;let Z=null,ee=null;switch(J.mediaStage){case v.MEDIA_DATA_STAGE.RESOLVED:case v.MEDIA_DATA_STAGE.INIT:case v.MEDIA_DATA_STAGE.EXISTS:Z=(0,N.jsx)(g.Play,{}),ee=Q;break;case v.MEDIA_DATA_STAGE.NEED_POKE:Z=(0,N.jsx)(g.Download,{filesize:J.size}),ee=H;break;case v.MEDIA_DATA_STAGE.UPLOADING:Z=(0,N.jsx)(g.Pending,{cancelable:!0}),ee=q;break;case v.MEDIA_DATA_STAGE.FETCHING:Z=(0,N.jsx)(g.Pending,{cancelable:!0}),ee=K;break;case v.MEDIA_DATA_STAGE.NEED_UPLOAD:Z=(0,N.jsx)(g.Upload,{filesize:J.size}),ee=W;break;case v.MEDIA_DATA_STAGE.REMOTE_NEED_UPLOAD:Z=(0,N.jsx)(g.Upload,{filesize:J.size}),ee=Y;break;case v.MEDIA_DATA_STAGE.ERROR_MISSING:ee=V;break;case v.MEDIA_DATA_STAGE.ERROR_UNSUPPORTED:X.isUnsentMedia||(Z=(0,N.jsx)(g.Download,{filesize:J.size}),ee=z);break;case v.MEDIA_DATA_STAGE.SENDING:X.isFailed||(Z=(0,N.jsx)(g.Pending,{}));break;case v.MEDIA_DATA_STAGE.ERROR_FILE_NOT_READABLE:__LOG__(4,void 0,new Error,!0)`Videos should be copied in memory when selected`,SEND_LOGS("media-image-not-readable-error"),ee=T.default;break;case v.MEDIA_DATA_STAGE.DECRYPTING:case v.MEDIA_DATA_STAGE.ERROR_TOO_LARGE:case v.MEDIA_DATA_STAGE.PREPARING:case v.MEDIA_DATA_STAGE.PROGRESSIVE_READY:case v.MEDIA_DATA_STAGE.REMOTE_UPLOADING:case v.MEDIA_DATA_STAGE.REUPLOADING:Z=(0,N.jsx)(g.Pending,{})}const te=parseInt(J.duration,10)?l.Clock.durationStr(J.duration):null,ae=te?(0,N.jsxs)("span",{className:j.default.duration,children:[(0,N.jsx)("div",{className:j.default.icon,children:(0,N.jsx)(M.default,{name:"msg-video"})}),te]}):null,se=(0,A.numCodepoints)(null!==(t=X.text)&&void 0!==t?t:"")>u.default.MAX_PORTRAIT_MEDIA_CAPTION_LENGTH,{bubbleWidth:ne,bubbleHeight:ie}=(0,c.getBubbleDimension)(X.type,!1,J.aspectRatio,s,D,se),re=J.fullHeight||ie,oe=J.fullWidth||ne,le=(0,c.getImgStyle)(oe,re,ne,ie),de=null!==(a=J.fullPreviewData)&&void 0!==a?a:J.preview,ue=null!=J.fullPreviewData,ce=de instanceof S.default?(0,i.default)({backgroundImage:I.URL.thumbAsBackgroundImage(de.url()).backgroundImage},le):void 0,he=(0,N.jsx)("div",{className:(0,r.default)(j.default.thumbBody,{[j.default.thumbBodyLowQuality]:!ue}),style:ce});let fe,pe;switch(J.mediaStage){case v.MEDIA_DATA_STAGE.INIT:case v.MEDIA_DATA_STAGE.RESOLVED:fe=(0,N.jsx)("div",{className:(0,r.default)(j.default.pipBtn,{[j.default.isHover]:!!e.hover}),children:(0,N.jsx)(y.PiPButton,{onClick:$,theme:y.PIP_BUTTON_THEME.PREVIEW})});break;default:fe=null}switch(G){case O:pe=(0,N.jsxs)(N.Fragment,{children:[fe,Z]});break;case R:pe=(0,N.jsx)(E.default,{icon:(0,N.jsx)(M.default,{name:"video-pip-large"}),children:f.default.t(1039)})}const me=(0,r.default)(j.default.thumb,{[j.default.inAlbum]:s===m.DisplayTheme.Album});return(0,N.jsxs)("div",{ref:F,"data-testid":"video-content",className:(0,r.default)(me,{[j.default.cursorPointer]:G===O,[j.default.overlay]:n,[j.default.ctwaThumbWidth]:null!=X.ctwaContext}),onClick:ee,style:{width:ne,height:ie},children:[n?null:pe,he,(0,N.jsx)(P.default,{}),n?null:ae]})};var i=n(a(81109)),r=n(a(94184)),o=a(67294),l=a(22683),d=a(88102),u=n(a(69618)),c=a(21504),h=a(7293),f=n(a(43725)),p=a(78986),m=a(29565),_=n(a(20668)),g=s(a(41124)),v=a(58668),C=n(a(19451)),S=n(a(34949)),y=a(19656),b=n(a(77912)),E=n(a(27557)),T=n(a(75315)),x=a(31019),M=n(a(23217)),P=n(a(2749)),A=a(3940),I=a(2541),w=a(19529),k=a(49082),j=n(a(29698)),N=a(85893);const O="PREVIEW",R="FLOATER"},34377:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(99964)),i=s(a(94184)),r=a(67294),o=s(a(66034)),l=s(a(69618)),d=a(24808),u=a(34535),c=a(20427),h=s(a(43725)),f=a(32554),p=s(a(61276)),m=a(63132),_=s(a(5165)),g=a(31019),v=s(a(23217)),C=a(97628),S=a(49082),y=a(84728),b=a(96984),E=a(85893);function T(e,t){var a,s,T;const{isGroupedSticker:x,hasAuthor:M,onToggle:P}=e,A=(0,r.useRef)(null),I=(0,r.useContext)(C.ThemeContext),w=(0,S.useModelValues)(e.msg,["ack","linkPreview","matchedText","dir","rtl","isMedia","isSentByMe","isGroupMsg","isViewOnce","interactiveHeader","type","quotedMsg","body","quotedRemoteJid","richPreviewType","doNotPlayInline","ctwaContext","list","nativeFlowName","thumbnailDirectPath","thumbnailHeight","thumbnailWidth","text"]);(0,r.useImperativeHandle)(t,(()=>({getComponent:()=>({refContext:A.current})})));const{isSentByMe:k,type:j}=w,N=!!w.quotedMsg,O=N&&!!w.quotedRemoteJid,R=(0,m.showForwarded)(w),D=O?null:k?p.default.contextOut:p.default.contextIn,L=j===l.default.MSG_TYPE.DOCUMENT||(null===(a=w.interactiveHeader)||void 0===a?void 0:a.mediaType)===u.InteractiveMessageHeaderMediaType.DOCUMENT,B=L&&!w.body,F=L&&w.body,G=j===l.default.MSG_TYPE.LOCATION,U=w.linkPreview&&(0,c.isParsableOnlineVideoURL)(w.richPreviewType,w.matchedText,w.doNotPlayInline),V=j===l.default.MSG_TYPE.LIST&&(null===(s=w.list)||void 0===s?void 0:s.listType)===d.ListMessageListType.PRODUCT_LIST,H=w.isMedia||[u.InteractiveMessageHeaderMediaType.IMAGE,u.InteractiveMessageHeaderMediaType.VIDEO].includes(null===(T=w.interactiveHeader)||void 0===T?void 0:T.mediaType),K=F||G||N||V||j===l.default.MSG_TYPE.PAYMENT||U||j===l.default.MSG_TYPE.PRODUCT||w.nativeFlowName===_.default.ORDER_STATUS||w.ctwaContext||H&&!w.isViewOnce&&j!==l.default.MSG_TYPE.AUDIO||w.isViewOnce&&!k&&!(0,y.isViewed)(w.safe()),q=w.getSuspiciousLinks().length>0,W=j===l.default.MSG_TYPE.CHAT&&w.linkPreview&&!U&&!M&&!R&&!q&&w.isTrusted(),Y=(0,f.displayHighQualityLinkPreview)((0,g.unproxy)(w.unsafe())),z=K&&!M&&!q&&!R||W&&Y,Q=(0,i.default)(z?p.default.contextIconMedia:p.default.contextIcon),$=j===l.default.MSG_TYPE.PTT||j===l.default.MSG_TYPE.AUDIO,X=w.type===l.default.MSG_TYPE.MULTI_VCARD&&!N&&!M&&!R,J=j===l.default.MSG_TYPE.GROUPS_V4_INVITE,Z=j===l.default.MSG_TYPE.ORDER,ee=(W&&!Y||B||J||Z)&&!M&&!R&&!N,te=j===l.default.MSG_TYPE.STICKER&&!w.ctwaContext&&!N&&(x||!w.isGroupMsg||w.isGroupMsg&&w.isSentByMe);let ae,se;if(te){const e=o.default.get("defaultPreference"),t=e?e.wallpaperColor:l.default.DEFAULT_CHAT_WALLPAPER;se=(0,E.jsx)("div",{className:p.default.badge,style:{backgroundColor:t,opacity:.9}}),ae=(0,b.invertTransparentWallpaperColors)(I.theme,t)}const ne=!(j!==l.default.MSG_TYPE.CHAT||N||M||R||U||!w.dir||w.rtl===h.default.isRTL()),ie=(j===l.default.MSG_TYPE.PTT||j===l.default.MSG_TYPE.AUDIO)&&h.default.isRTL()&&!M,re=(0,i.default)(D,z?h.default.isRTL()?p.default.contextMediaRtl:p.default.contextMediaLtr:null,{[p.default.context]:!(z||W)||ee,[p.default.contextMedia]:z,[p.default.contextPtt]:$,[p.default.contextPttFix]:$&&!N&&!M,[p.default.contextSpecial]:ee,[p.default.contextDoc]:B&&!M&&!R&&!N,[p.default.contextMediaDocument]:F,[p.default.contextMultiVcard]:X,[p.default.contextInverse]:ne||ie,[p.default.contextStickerAuthor]:j===l.default.MSG_TYPE.STICKER&&!te,[p.default.contextStickerTransparent]:te,[p.default.contextStickerInverse]:te&&ae});return(0,E.jsxs)("div",{className:re,children:[(0,E.jsx)("div",{"data-a8n":n.default.key("icon-down-context"),"data-js-context-icon":!0,className:Q,ref:A,onMouseDown:e=>{e.stopPropagation()},onClick:e=>{P(e.target)},children:(0,E.jsx)(v.default,{name:"down-context"})}),se]})}var x=(0,r.forwardRef)(T);t.default=x},47049:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{children:t,displayType:a,hideCaption:s=!1,hideMeta:m=!1,msg:_,quotedMsg:g,showAuthor:v=!1,trusted:C}=e;const{caption:S,dir:y,footer:b,isSentByMe:E,isGroupMsg:T,rtl:x,senderObj:M,supportsMessageFooter:P,type:A}=(0,f.useModelValues)(_,["caption","dir","footer","isFromTemplate","isSentByMe","isGroupMsg","rtl","senderObj","supportsMessageFooter","type"]),I=v&&!E&&T,w=!s&&S,k=(0,c.showForwarded)(_);return(0,p.jsxs)(p.Fragment,{children:[I?(0,p.jsx)("div",{className:(0,n.default)(d.default.author,{[d.default.hasForwarded]:k}),children:(0,p.jsx)(i.default,{msg:_,contact:M})}):null,k?(0,p.jsx)(l.default,{msg:_.unsafe(),className:(0,n.default)(d.default.forwardedIndicator,{[d.default.hasAuthor]:I})}):null,null!=g?(0,p.jsx)("div",{className:d.default.quote,children:g}):null,t,w?(0,p.jsx)("div",{className:d.default.caption,children:(0,p.jsx)(r.default,{msg:_.unsafe(),trusted:C,spacer:!b})}):null,P?(0,p.jsx)(h.default,{dir:y,footer:b,isShown:P,msg:_.unsafe(),rtl:x,type:A,trusted:C}):null,!m&&(0,p.jsx)("div",{className:(0,n.default)(d.default.meta,{[d.default.hasCaption]:w}),children:(0,p.jsx)(u.Meta,{msg:_,theme:a===o.default.DISP_TYPE.GALLERY?"date":void 0})})]})};var n=s(a(94184)),i=s(a(72655)),r=s(a(6725)),o=s(a(69618)),l=s(a(14703)),d=s(a(25153)),u=a(42316),c=a(63132),h=s(a(95839)),f=a(49082),p=a(85893)},87931:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MsgPosition=void 0;t.MsgPosition={FRONT:"FRONT",MID:"MID",END:"END",SINGLE:"SINGLE"}},54703:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const{broadcast:a,isFromTemplate:s,isSentByMe:u,labels:c,star:h,type:f}=(0,l.useModelValues)(e.msg,["broadcast","isFromTemplate","isSentByMe","labels","star","type"]);let p={};const m=null===(t=e.spacer)||void 0===t||t;if(m){let e;switch(f){case i.default.MSG_TYPE.REVOKED:e=[a,(null==c?void 0:c.length)&&(0,r.canDisplayLabel)()];break;default:e=[a,u,(null==c?void 0:c.length)&&(0,r.canDisplayLabel)(),h]}const t=e.filter(Boolean).length;t>0&&(p={[o.default.icons1]:1===t,[o.default.icons2]:2===t,[o.default.icons3]:3===t,[o.default.icons4]:t>=4})}return(0,d.jsxs)("div",{className:(0,n.default)(e.className,{[o.default.text]:!0,[o.default.placeholder]:"placeholder"===e.theme,[o.default.template]:s}),children:[e.children,m&&(0,d.jsx)("span",{className:(0,n.default)(o.default.spacer,p)})]})};var n=s(a(94184)),i=s(a(69618)),r=a(57701),o=s(a(57155)),l=a(49082),d=a(85893)},42316:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.Meta=function(e){let{msg:t,theme:a}=e;const{broadcast:s,caption:n,isLive:o,asRevoked:u,isMdHistoryMsg:f,isSentByMe:g,isViewOnce:b,labels:T,loc:x,star:M,t:P,type:A,subtype:I,isSendFailure:w}=(0,C.useModelValues)(t.unsafe(),["broadcast","caption","isLive","asRevoked","isMdHistoryMsg","isSentByMe","isViewOnce","labels","loc","star","t","type","subtype","isSendFailure"]),[k,j]=(0,r.useState)(!1);(0,v.useListener)(l.Clock,l.HOUR24_FORMAT_CHANGE_EVENT,(()=>{j(!k)}));const N=[],O=(A===y.IMAGE||A===y.VIDEO)&&!n&&!b||A===y.LOCATION&&!o&&!x;M&&!u&&N.push((0,S.jsx)(_.default,{name:"star","aria-label":` ${i.default._("Starred messages",null,{hk:"uqtIq"}).toString()} `}));s&&N.push((0,S.jsx)(_.default,{name:"broadcast"}));const R=g&&A!==y.REVOKED;let D=null;R&&(D=(0,S.jsx)(m.default,{msg:t.unsafe()}));c.GK.supportsFeature(c.GK.F.MD_BACKEND)&&(A===y.UNKNOWN&&"fanout"===I||w)&&(D=null);const L=T&&T.length>0?(0,S.jsx)(h.Labels,{labels:T,showName:!1}):null;return(0,S.jsx)(E,{icons:N,labels:L,light:O,onClick:R&&!f?()=>{d.Cmd.msgInfoDrawer((0,p.unproxy)(t.unsafe()))}:null,status:D,children:"date"!==a?P?l.Clock.timestampStr(P):null:P?l.Clock.relativeStr(P):null})},t.MetaFrame=E;var n=s(a(94184)),i=s(a(48360)),r=a(67294),o=s(a(56720)),l=a(22683),d=a(88102),u=s(a(69618)),c=a(7293),h=a(84543),f=s(a(18981)),p=a(31019),m=s(a(24871)),_=s(a(23217)),g=a(65127),v=a(19529),C=a(49082),S=a(85893);const y=u.default.MSG_TYPE,b={meta:{color:"gq1t1y46",fontSize:"lak21jic",height:"e4p1bexh",lineHeight:"cr2cog7z",whiteSpace:"le5p0ye3"},metaLight:{color:"pp8r7oc8"},chromeFix:{lineHeight:"sid27bd6"},labels:{alignItems:"gndfcl4n",display:"i86elurf",height:"e4p1bexh",marginStart:"akljc1zx",marginEnd:"om6y7gxh",verticalAlign:"fewfhwl7"},icon:{color:"do8e0lj9",display:"l7jjieqr",marginEnd:"om6y7gxh"},iconLight:{color:"k17s6i4e"},status:{color:"do8e0lj9",display:"l7jjieqr",marginStart:"k6y3xtnu"},timestamp:{display:"l7jjieqr",verticalAlign:"fewfhwl7"}};function E(e){const t=e.icons&&e.icons.length>0?e.icons.map(((t,a)=>(0,S.jsx)("div",{className:(0,o.default)(b.icon,e.light&&b.iconLight),children:t},`icon-${a}`))):null,a=e.labels?(0,S.jsx)("div",{className:(0,o.default)(b.labels),"data-testid":"meta-labels",children:e.labels}):null,s=e.status?(0,S.jsx)("div",{className:(0,o.default)(b.status),children:e.status}):null,i=(0,n.default)((0,o.default)(b.meta,e.light&&b.metaLight,g.UA.os===u.default.OS_TYPE.MAC&&g.UA.browser===u.default.BROWSER_TYPE.CHROME&&g.UA.osVersion.includes("10.15")&&b.chromeFix),f.default.metaOverrides);return(0,S.jsxs)("div",{className:i,"data-testid":"msg-meta",onClick:e.onClick,role:e.onClick?"button":null,children:[t,a,(0,S.jsx)("span",{className:(0,o.default)(b.timestamp),dir:"auto",children:e.children}),s]})}},20485:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,n.default)(r.default.container,{[r.default.isChecked]:e.checked,[r.default.gallery]:"gallery"===e.msgTheme});return(0,o.jsx)("div",{className:t,onClick:e.onClick,children:(0,o.jsx)(i.CheckBox,{onChange:e.onClick,checked:e.checked,theme:e.theme})})};var n=s(a(94184)),i=a(16593),r=s(a(21123)),o=a(85893)},23512:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.WrappedMsgComponent=t.MsgComponent=void 0;var n=s(a(81109)),i=a(67294),r=s(a(41942)),o=s(a(27295)),l=s(a(98886)),d=s(a(69618)),u=s(a(7847)),c=a(10455),h=s(a(48089)),f=s(a(82903)),p=s(a(89808)),m=s(a(99940)),_=a(19795),g=a(27863),v=s(a(30071)),C=a(54676),S=s(a(85851)),y=s(a(30946)),b=s(a(16785)),E=s(a(75343)),T=s(a(41826)),x=s(a(54806)),M=s(a(74790)),P=s(a(93135)),A=s(a(32570)),I=s(a(35072)),w=a(51906),k=s(a(1662)),j=s(a(65932)),N=a(31019),O=s(a(1539)),R=s(a(2284)),D=s(a(83236)),L=s(a(93137)),B=s(a(98723)),F=a(78521),G=s(a(97507)),U=s(a(83681)),V=a(85893);class H extends i.PureComponent{constructor(){super(...arguments),this.ref=(0,i.createRef)(),this._getParsedVcardList=(0,v.default)((e=>{let{vcardList:t}=e;return t?t.map((e=>(0,n.default)((0,n.default)({},e),{},{parsedVcard:(0,F.parseVcard)(e.vcard)}))):[]}))}getQuotedMsg(){const{displayType:e,msg:t,chat:a}=this.props;let s;if(e!==d.default.DISP_TYPE.GALLERY){const n=t.quotedMsgObj();if(n)s=(0,V.jsx)(I.default,{msg:n,rootMsg:(0,N.unproxy)(t.safe()),displayType:e,theme:"conversation",chat:(0,N.unproxy)(a),t:t.t},n.id.toString());else{const e=t.getQuotedMsgAdminGroupJid(),a=t.getQuotedMsgAdminGroupSubject(),n=t.getQuotedMsgAdminParentGroupJid();e&&(s=(0,V.jsx)(w.QuotedMsgAdminGroupName,{quotedGroupJid:e,quotedGroupSubject:a,quotedParentGroupJid:n}))}}return s}getRef(){return this.ref.current}render(){const{chat:e,displayAuthor:t,displayType:a,isMsgVisible:s,msg:n}=this.props,i=n.safe();if(null!=i.asViewOnce){const e=i.asViewOnce;return(0,V.jsx)(U.default,{displayType:a,displayAuthor:t,mediaData:e.mediaData,msg:e,quotedMsg:this.getQuotedMsg(),ref:this.ref,trusted:n.isTrusted()})}switch(i.type){case d.default.MSG_TYPE.NATIVE_FLOW:return(0,V.jsx)(y.default,{msg:(0,N.unproxy)(i),displayAuthor:t,displayType:a});case d.default.MSG_TYPE.CHAT:case d.default.MSG_TYPE.LIST_RESPONSE:case d.default.MSG_TYPE.BUTTONS_RESPONSE:return(0,V.jsx)(R.default,{msg:(0,N.unproxy)(i),contact:i.senderObj,quotedMsg:this.getQuotedMsg(),trusted:i.isTrusted(),displayType:a,displayAuthor:t});case d.default.MSG_TYPE.IMAGE:return(0,V.jsx)(M.default,{msg:i,displayType:a,mediaData:i.mediaData,ref:this.ref,quotedMsg:this.getQuotedMsg(),maxWidth:this.props.maxWidth,isMsgVisible:s,trusted:i.isTrusted(),displayAuthor:t});case d.default.MSG_TYPE.PRODUCT:return(0,V.jsx)(P.default,{msg:i,displayAuthor:t,trusted:i.isTrusted(),onProductClick:this.props.onProductClick,quotedMsg:this.getQuotedMsg()});case d.default.MSG_TYPE.GROUP_NOTIFICATION:case d.default.MSG_TYPE.GP2:return(0,V.jsx)(h.default,{msg:i,ref:this.ref,clickable:!0});case d.default.MSG_TYPE.BROADCAST_NOTIFICATION:return(0,V.jsx)(o.default,{msg:i,ref:this.ref,clickable:!0});case d.default.MSG_TYPE.NOTIFICATION:case d.default.MSG_TYPE.NOTIFICATION_TEMPLATE:case d.default.MSG_TYPE.E2E_NOTIFICATION:case d.default.MSG_TYPE.CALL_LOG:return(0,V.jsx)(b.default,{contact:(0,N.unproxy)(e).contact,msg:i,ref:this.ref});case d.default.MSG_TYPE.AUDIO:return(0,V.jsx)(r.default,{msg:i,mediaData:i.mediaData,quotedMsg:this.getQuotedMsg(),displayAuthor:t,displayType:a,ref:this.ref});case d.default.MSG_TYPE.VIDEO:return!0===i.isGif?(0,V.jsx)(c.WrappedGif,{displayAuthor:t,displayType:a,isMsgVisible:s,maxWidth:this.props.maxWidth,mediaData:i.mediaData,msg:i,quotedMsg:this.getQuotedMsg(),ref:this.ref,trusted:i.isTrusted()}):(0,V.jsx)(G.default,{displayAuthor:t,displayType:a,hover:this.props.hover,msg:i,quotedMsg:this.getQuotedMsg(),ref:this.ref,trusted:i.isTrusted()});case d.default.MSG_TYPE.VCARD:return(0,V.jsx)(L.default,{msg:i,vcard:i.vcard,ref:this.ref,quotedMsg:this.getQuotedMsg(),displayType:a,displayAuthor:t,onMessageClick:this.props.onMessageClick});case d.default.MSG_TYPE.MULTI_VCARD:return(0,V.jsx)(S.default,{msg:i,vcardList:this._getParsedVcardList({vcardList:this.props.msg.vcardList}),ref:this.ref,quotedMsg:this.getQuotedMsg(),displayType:a,displayAuthor:t});case d.default.MSG_TYPE.GROUPS_V4_INVITE:return(0,V.jsx)(f.default,{msg:i,ref:this.ref,displayAuthor:t});case d.default.MSG_TYPE.LOCATION:return!0===i.isLive?(0,V.jsx)(_.LiveLocation,{msg:(0,N.unproxy)(i),ref:this.ref,quotedMsg:this.getQuotedMsg(),trusted:i.isTrusted(),displayAuthor:t}):(0,V.jsx)(g.Location,{msg:(0,N.unproxy)(i),ref:this.ref,quotedMsg:this.getQuotedMsg(),trusted:i.isTrusted(),displayAuthor:t});case d.default.MSG_TYPE.PAYMENT:return(0,V.jsx)(x.default,{msg:i,ref:this.ref,quotedMsg:this.getQuotedMsg(),displayAuthor:t});case d.default.MSG_TYPE.PTT:return(0,V.jsx)(A.default,{msg:i,mediaData:i.mediaData,quotedMsg:this.getQuotedMsg(),displayAuthor:t,displayType:a,ref:this.ref,getSequentialMsg:this.props.getSequentialMsg});case d.default.MSG_TYPE.STICKER:return(0,V.jsx)(O.default,{msg:i,mediaData:i.mediaData,quotedMsg:this.getQuotedMsg(),displayAuthor:t,position:this.props.position,forwardRef:this.props.forwardStickerRef,displayType:a,animateOnView:!0});case d.default.MSG_TYPE.DOCUMENT:return n.isVcardOverMmsDocument?(0,V.jsx)(B.default,{chat:e,msg:i,mediaData:n.mediaData,displayAuthor:t,displayType:a,getQuotedMsg:()=>this.getQuotedMsg(),onMessageClick:this.props.onMessageClick}):(0,V.jsx)(u.default,{msg:i,displayType:a,ref:this.ref,quotedMsg:this.getQuotedMsg(),trusted:i.isTrusted(),displayAuthor:t});case d.default.MSG_TYPE.UNKNOWN:return(0,V.jsx)(D.default,{msg:(0,N.unproxy)(i),displayAuthor:t,hideUpdateButton:"phone_only_feature"===i.subtype});case d.default.MSG_TYPE.CIPHERTEXT:return(0,V.jsx)(l.default,{msg:i,ref:this.ref,displayAuthor:t});case d.default.MSG_TYPE.REVOKED:return this.ref.current=null,(0,V.jsx)(k.default,{msg:(0,N.unproxy)(i)});case d.default.MSG_TYPE.OVERSIZED:return(0,V.jsx)(T.default,{msg:(0,N.unproxy)(i),displayAuthor:t});case d.default.MSG_TYPE.HSM:case d.default.MSG_TYPE.TEMPLATE_BUTTON_REPLY:return(0,V.jsx)(R.default,{msg:(0,N.unproxy)(i),contact:i.senderObj,ref:this.ref,quotedMsg:this.getQuotedMsg(),trusted:i.isTrusted(),displayType:a,displayAuthor:t});case d.default.MSG_TYPE.PROTOCOL:return"ephemeral_setting"===n.subtype?(0,V.jsx)(b.default,{contact:(0,N.unproxy)(e).contact,msg:i,ref:this.ref}):(0,V.jsx)(D.default,{msg:(0,N.unproxy)(i),ref:this.ref,displayAuthor:t});case d.default.MSG_TYPE.ORDER:return(0,V.jsx)(E.default,{displayAuthor:t,msg:(0,N.unproxy)(i)});case d.default.MSG_TYPE.LIST:if((0,C.listMsgCanRender)(i))return(0,V.jsx)(m.default,{msg:(0,N.unproxy)(i),displayAuthor:t});break;case d.default.MSG_TYPE.INTERACTIVE:return(0,V.jsx)(p.default,{msg:(0,N.unproxy)(i),quotedMsg:this.getQuotedMsg(),displayAuthor:t,displayType:a})}return __LOG__(2)`messageList:render Unknown message type: ${n.type}`,(0,V.jsx)(D.default,{msg:(0,N.unproxy)(i),ref:this.ref,displayAuthor:t})}}t.MsgComponent=H,H.CONCERNS={msg:["body","caption","rtl","dir","isSentByMe","isPSA","isViewOnce","ctwaContext","initialPageSize","hasTemplateButtons","thumbnail","orderTitle","totalAmount1000","totalCurrencyCode","itemCount","isGif","isLive","isVcardOverMmsDocument","mediaData","nativeFlowName","nativeFlowButtons","senderObj","subtype","type","t","id","title","isFromTemplate","vcard","vcardList"],chat:["trusted"]},H.displayName="MsgComponent";const K=(0,j.default)(H,H.CONCERNS);t.WrappedMsgComponent=class extends K{getRef(){return this.getComponent().getRef()}}},99422:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(94184)),i=s(a(54703)),r=s(a(87581)),o=s(a(23217)),l=a(85893);var d=e=>{const t=e.hasCaption?e.children:(0,l.jsx)("div",{className:r.default.text,children:(0,l.jsx)(i.default,{msg:e.msg,theme:"placeholder",children:e.children})}),a=e.iconName?(0,l.jsx)("div",{className:r.default.icon,children:(0,l.jsx)(o.default,{name:e.iconName})}):null;return(0,l.jsxs)("div",{className:(0,n.default)(r.default.container,{[r.default.containerSmallIcon]:"small-icon"===e.theme}),children:[a,t]})};t.default=d},86806:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{currentTime:t,disabled:a,skipThumb:s,duration:u,onSeek:c,onSeekEnd:h,outgoing:f,played:p,waveform:m}=e,_=(0,n.useCallback)((()=>null!=t?t:0),[t]),g=(0,n.useCallback)((()=>[...m].map((e=>e/100))),[m]),v=(0,n.useCallback)((()=>u),[u]);return(0,o.jsx)("div",{className:(0,i.default)(l),children:(0,o.jsx)(r.Waveform,{location:d(f,p),sampleRate:6,getSamples:g,getCurrentTime:_,getDuration:v,live:!1,mode:r.WaveformMode.PREVIEW,onSeek:c,onSeekEnd:h,disabled:a,skipThumb:s})})};var n=a(67294),i=s(a(56720)),r=a(89470),o=a(85893);const l={display:"p357zi0d",height:"bmot90v7"};function d(e,t){switch(e){case!0:return t?r.WaveformLocation.OUTGOING_PLAYED_MESSAGE:r.WaveformLocation.OUTGOING_UNPLAYED_MESSAGE;case!1:return t?r.WaveformLocation.INCOMING_PLAYED_MESSAGE:r.WaveformLocation.INCOMING_UNPLAYED_MESSAGE}}},68272:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{emojis:t,animation:a}=e;const s=t?t.length:0;if(0===s)return null;let l;switch(s){default:case 3:l=n.SIZE.MEDIUM;break;case 2:l=n.SIZE.LARGE;break;case 1:l=n.SIZE.XLARGE}const d=t.map(((e,t)=>(0,o.jsx)(n.LargeEmoji,{animation:a,size:l,emoji:e,selectable:!0},e+t)));return(0,o.jsx)(r.SelectableDiv,{selectable:!0,className:i.default.wrapper,children:d})};var n=a(73770),i=s(a(54777)),r=a(52596),o=a(85893)},85851:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(13959),i=a(67294),r=s(a(56720)),o=s(a(72655)),l=s(a(58286)),d=a(88102),u=s(a(69618)),c=a(65417),h=s(a(43725)),f=s(a(30071)),p=a(42316),m=s(a(69238)),_=s(a(87543)),g=a(82039),v=s(a(65932)),C=a(78521),S=a(85893);const y={vcard:{position:"g0rxnol2",display:"p357zi0d",alignItems:"gndfcl4n",height:"k45dudtp",marginStart:"oz0g9ue8",marginEnd:"bugiwsl0"},author:{borderBottom:"j4zbmt6h",marginBottom:"ngycyvoj",paddingBottom:"bxcbqipq"},authorWithQuote:{borderBottom:"thn59n0e",marginBottom:"mpdn4nr2"},avatar:{flexShrink:"oq44ahr5",flexGrow:"tvf2evcx",flexBasis:"lb5m6g5c",marginEnd:"b021xdil"},body:{flexShrink:"m0h2a7mj",flexGrow:"ggj6brxn",flexBasis:"lb5m6g5c",maxHeight:"djhxrpsl",overflowX:"gfz4du6o",overflowY:"r7fjleex"},bubble:{boxSizing:"cm280p3y",paddingTop:"n1yiu2zv",paddingEnd:"atp9n7ve",paddingBottom:"oq31bsqd",paddingStart:"e1yunedv",width:"nikcn1dq"},galleryBubble:{maxWidth:"osjza8ju",width:"ln8gz9je"},previewBubble:{maxWidth:"osjza8ju",width:"ln8gz9je"},image:{position:"g0rxnol2",zIndex:"mb8var44",display:"l7jjieqr"},image2:{zIndex:"s5lidh1j",marginStart:"sxwtddgj"},image3:{zIndex:"jevcxcag",marginStart:"sxwtddgj"},meta:{bottom:"pgz13gmm",position:"lhggkp7q",end:"s7jcu7x1"},name:{color:"k2bacm8l",fontSize:"f8jlpxt4",fontWeight:"sy6s5v3r",lineHeight:"e4qy2s3t",textAlign:"ljrqcn24"},quote:{marginTop:"if44n927",marginEnd:"isg5rw3j",marginBottom:"njub1g37",marginStart:"heai6z19"},quoteWithAuthor:{marginTop:"tt8xd2xn"},emoji:{verticalAlign:"mr0xwlll"}};class b extends i.PureComponent{constructor(e){super(e),this._getUnsortedVcardDisplayDataMemo=(0,f.default)((e=>{let{vcardList:t}=e;return t.map((e=>{let{displayName:t,parsedVcard:a}=e;return{displayName:t,wids:(0,C.vcardWids)(a),thumbnail:(0,C.vcardThumbnail)(a)}}))})),this._showContactsModal=()=>{const{vcardList:e}=this.props;if(e){const t=e.map((e=>e.parsedVcard));d.Cmd.openModal((0,S.jsx)(m.default,{vcards:t}))}},this.state={loading:!0,sortedVcardData:null,vcardList:e.vcardList}}componentDidMount(){this._loadProfilePics()}static getDerivedStateFromProps(e,t){return t.vcardList!==e.vcardList?{loading:!0,sortedVcardData:null,vcardList:e.vcardList}:null}componentDidUpdate(e){e.vcardList!==this.props.vcardList&&this._loadProfilePics()}_getUnsortedVcardDisplayData(){return this._getUnsortedVcardDisplayDataMemo({vcardList:this.props.vcardList})}_loadProfilePics(){const e=this.props.vcardList,t=this._getUnsortedVcardDisplayData(),a=[].concat(...t.map((e=>{let{wids:t}=e;return t}))).slice(0,10);Promise.all(a.map((e=>g.ProfilePicThumbCollection.find(e)))).then((()=>(0,n.delayMs)(0))).then((()=>{var a;this.props.vcardList===e&&this.setState({loading:!1,sortedVcardData:(a=t,[...a].sort(((e,t)=>{const a=T(e),s=T(t);return a&&!s?-1:!a&&s?1:e.displayName<t.displayName?-1:e.displayName>t.displayName?1:0})))})}))}_renderProfilePics(e){const t=Math.min(e.length,3),a=[];for(let s=0;s<t;s++){const{wids:t,thumbnail:n}=e[s],i=g.ProfilePicThumbCollection.findThumbnailWid(t),o=(0,r.default)(y.image,1===s&&y.image2,2===s&&y.image3);this.state.loading||!i&&!n?a.push((0,S.jsx)("div",{className:o,children:(0,S.jsx)(_.default,{size:39,border:!0})},`default-pic-${s}`)):a.push((0,S.jsx)("div",{className:o,children:(0,S.jsx)(_.default,{wid:i,thumb:n,size:39,border:!0})},`profile-pic-${s}`))}return a}render(){const{msg:e}=this.props,t=this.props.displayAuthor?(0,S.jsx)("div",{className:(0,r.default)(y.author,this.props.quotedMsg&&y.authorWithQuote),children:(0,S.jsx)(o.default,{msg:e,contact:e.senderObj})}):null,a=this.state.sortedVcardData||this._getUnsortedVcardDisplayData(),s=a.map((e=>{let{displayName:t}=e;return t})),n=(0,C.getNameStringFromNames)(s),i=this._renderProfilePics(a),d=this.props.vcardList||e.chat.isTrusted(),f=this.props.quotedMsg?(0,S.jsx)("div",{className:(0,r.default)(y.quote,t&&y.quoteWithAuthor),children:this.props.quotedMsg}):null,m=(0,r.default)(y.bubble,this.props.displayType===u.default.DISP_TYPE.MSG_INFO&&y.previewBubble,(this.props.displayType===u.default.DISP_TYPE.STARRED_MSGS||this.props.displayType===u.default.DISP_TYPE.GALLERY||this.props.displayType===u.default.DISP_TYPE.CONTACT_CARD)&&y.galleryBubble);return(0,S.jsxs)("div",{className:m,children:[t,f,(0,S.jsxs)("div",{className:(0,r.default)(y.vcard),role:d?"button":null,title:n,onClick:this._showContactsModal,children:[(0,S.jsx)("div",{className:(0,r.default)(y.avatar),children:i}),(0,S.jsx)("div",{className:(0,r.default)(y.body),children:(0,S.jsx)(c.EmojiText,{text:n,element:"div",xstyle:y.name,emojiXstyle:y.emoji,dirMismatch:e.rtl!==h.default.isRTL(),direction:e.dir,wbr:15})}),(0,S.jsx)("div",{className:(0,r.default)(y.meta),children:(0,S.jsx)(p.Meta,{msg:e})})]}),(0,S.jsx)(l.default,{items:[{label:h.default.t(873),onClick:this._showContactsModal}]})]})}}b.CONCERNS={msg:["rtl","dir","senderObj","isSentByMe","isGroupMsg","chat"]},b.displayName="MultiVcard";var E=(0,v.default)(b,b.CONCERNS);function T(e){return Boolean(g.ProfilePicThumbCollection.findThumbnailWid(e.wids)||e.thumbnail)}t.default=E},30946:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let t,a,{msg:s,displayAuthor:p,displayType:m}=e;if(s.nativeFlowName===d.default.ORDER_DETAILS)t=(0,h.jsx)("div",{className:(0,i.default)(f.headerSpacing),children:(0,h.jsx)(u.default,{msg:s,displayType:m})}),a=[{label:l.default.t(1007),onClick:()=>(0,c.default)({title:l.default.t(1012),body:l.default.t(1011)})}];else if(s.nativeFlowName===d.default.ORDER_STATUS)t=(0,h.jsx)("div",{className:(0,i.default)(f.headerSpacing),children:(0,h.jsx)(u.default,{msg:s,displayType:m})});else{var _;t=s.title?(0,h.jsx)(r.EmojiText,{text:s.title,selectable:s.isTrusted(),direction:s.dir,dirMismatch:s.rtl!==l.default.isRTL(),inferLinesDirection:!0,xstyle:[n.uiMargin.bottom6,f.headerTitle]}):null,a=null===(_=s.nativeFlowButtons)||void 0===_?void 0:_.map((e=>{var t,a;return{label:null!==(t=null===(a=e.buttonText)||void 0===a?void 0:a.displayText)&&void 0!==t?t:"",onClick:()=>(0,c.default)()}}))}return(0,h.jsx)(o.default,{msg:s,displayAuthor:p,displayFooter:s.nativeFlowName!==d.default.ORDER_STATUS,header:t,displayType:m,actions:a})};var n=a(28298),i=s(a(56720)),r=(s(a(69618)),a(65417)),o=s(a(41381)),l=s(a(43725)),d=s(a(5165)),u=s(a(96251)),c=s(a(56635)),h=a(85893);const f={headerSpacing:{marginTop:"if44n927",marginEnd:"isg5rw3j",marginBottom:"ngycyvoj",marginStart:"heai6z19"},headerTitle:{fontSize:"bze30y65",fontWeight:"hnx8ox4h"}}},47248:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{msg:t}=e;if(t.nativeFlowName===r.default.ORDER_DETAILS)return(0,d.jsx)(o.default,{msg:t});const a=i.Configuration.QuotedMention({mentions:t.mentionMap()});return(0,d.jsx)(n.EmojiText,{formatters:a,className:"quoted-mention",text:(0,l.formatQuotedMsg)(t),textLimit:t.initialPageSize,direction:"auto"},"status")};var n=a(65417),i=a(5124),r=s(a(5165)),o=s(a(34283)),l=a(65510),d=a(85893)},81624:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{amount:t,quantity:a,orderId:s,thumbnail:f,text:p,isSentByMe:m,xstyle:_,numberOfItems:g}=e;return(0,c.jsxs)(r.FlexColumn,{xstyle:[h.header,n.uiPadding.vert12,n.uiPadding.horiz8,m?h.bubbleOut:h.bubbleIn,_],children:[(0,c.jsx)(d.TextDiv,{color:"secondary",weight:"medium",xstyle:h.orderId,size:"10",children:o.default.t(1028,{order:s})}),(0,c.jsx)("div",{className:(0,i.default)(h.hr,n.uiMargin.vert12)}),(0,c.jsxs)(r.FlexRow,{align:"center",className:(0,i.default)(h.orderInfoWrapper),children:[f?(0,c.jsx)("div",{className:(0,i.default)(h.media,n.uiMargin.end8),style:{backgroundImage:`url(${f})`}}):null,(0,c.jsxs)("div",{className:(0,i.default)(h.orderInfo),children:[(0,c.jsx)(u.default,{maxLines:1,children:p}),(0,c.jsx)(d.TextParagraph,{size:"12",color:"secondary",children:(0,l.getOrderDetailItemLabel)(g,a)})]})]}),(0,c.jsx)("div",{className:(0,i.default)(h.hr,n.uiMargin.vert12)}),(0,c.jsxs)(r.FlexRow,{xstyle:h.total,justify:"all",children:[(0,c.jsx)(d.TextParagraph,{size:"15",children:o.default.t(1029)}),(0,c.jsx)(d.TextParagraph,{size:"15",weight:"medium",children:t})]})]})};var n=a(28298),i=s(a(56720)),r=a(29623),o=s(a(43725)),l=a(30699),d=a(13923),u=s(a(71688)),c=a(85893);const h={header:{boxSizing:"cm280p3y",borderTopStartRadius:"l8fojup5",borderTopEndRadius:"paxyh2gw",borderBottomEndRadius:"sfeitywo",borderBottomStartRadius:"cqsf3vkf"},bubbleIn:{backgroundColor:"rrq4r3yd"},bubbleOut:{backgroundColor:"s0eflmyh"},orderId:{textTransform:"ofejerhi",letterSpacing:"nlxcpvin"},orderInfo:{overflowX:"gfz4du6o",overflowY:"r7fjleex"},orderInfoWrapper:{width:"ln8gz9je"},hr:{width:"ln8gz9je",borderTop:"g0j88qvc"},media:{minWidth:"byvcucqk",height:"lniyxyh2",maxHeight:"ibyb1pgl",backgroundPosition:"t3g6t33p",backgroundSize:"qnwaluaf"},total:{width:"ln8gz9je"}}},34283:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let t,{msg:a}=e;a.nativeFlowName===r.default.ORDER_DETAILS&&(t=a);a.nativeFlowName===r.default.ORDER_STATUS&&(t=(0,l.getOrderMessage)(a));const s=t?(0,o.getOrderInfo)(t):null;return s?(0,h.jsxs)("div",{children:[(0,h.jsxs)(i.FlexRow,{align:"center",children:[(0,h.jsx)(d.default,{name:"receipt"}),(0,h.jsx)(c.default,{maxLines:1,children:(0,h.jsxs)(u.TextDiv,{children:["",s.title]})})]}),(0,h.jsx)(u.TextDiv,{children:(0,n.formatAmount)(s.currency,s.totalAmount)})]}):null};var n=a(74764),i=a(29623),r=s(a(5165)),o=a(34841),l=a(88998),d=s(a(23217)),u=a(13923),c=s(a(71688)),h=a(85893)},16785:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(67294),i=s(a(56720)),r=a(72345),o=a(69951),l=a(88102),d=s(a(69618)),u=a(19380),c=s(a(4061)),h=a(65417),f=s(a(84793)),p=s(a(36519)),m=s(a(50549)),_=a(44894),g=s(a(42011)),v=s(a(43725)),C=s(a(11339)),S=s(a(71040)),y=s(a(70666)),b=s(a(32162)),E=a(31019),T=s(a(23217)),x=a(49082),M=s(a(39546)),P=s(a(39938)),A=a(58021),I=a(85893);const w={icon:{display:"l7jjieqr",marginEnd:"mw4yctpw",verticalAlign:"mr0xwlll"},iconE2EIconSupportGroupbizInfo:{display:"l7jjieqr",marginTop:"qt60bha0",marginEnd:"mw4yctpw",verticalAlign:"fewfhwl7"},iconE2EColor:{color:"kzrzzy77"},notificationInfoIconColor:{color:"m35p33ho"},iconMissColor:{color:"mvxzr2tb"}};function k(e,t){(0,x.useOptionalModelValues)(e.contact,["id","isEnterprise","isContactBlocked","verifiedLevel","verifiedName"]);const a=(0,n.useRef)(null),s=(0,x.useModelValues)(e.msg,["id","body","chat","from","type","subtype","templateParams","ephemeralDuration"]),k=()=>{var e;null===(e=a.current)||void 0===e||e.click()};let j,O,R,D;switch((0,n.useImperativeHandle)(t,(()=>({handleKeyActivation:k}))),s.type){case d.default.MSG_TYPE.NOTIFICATION:O=s.body;break;case d.default.MSG_TYPE.E2E_NOTIFICATION:const e=(0,E.unproxy)(s);O=(0,p.default)(e);const t=s.subtype,a=s.body?(0,A.createWid)(s.body):null,n=s.id.remote;D=()=>{!function(e,t,a,s){"e2e_identity_unavailable"!==e&&l.Cmd.openModal((0,I.jsx)(c.default,{e2eSubtype:e,jid:t,chatId:a,msg:s}))}(t,a,n,s)},j=function(e){if("encrypt"===e.subtype&&e.chat.isSupportGroupOrSupportAdmin())return(0,I.jsx)("div",{className:(0,i.default)(w.iconE2EIconSupportGroupbizInfo,w.notificationInfoIconColor),children:(0,I.jsx)(T.default,{name:"info-filled",width:12,height:15})});if("encrypt"===e.subtype||"encrypt_now"===e.subtype)return(0,I.jsx)("div",{className:(0,i.default)(w.iconE2EIconSupportGroupbizInfo,w.iconE2EColor),children:(0,I.jsx)(T.default,{name:"lock-small"})})}(e);break;case d.default.MSG_TYPE.CALL_LOG:const h="miss_video"===s.subtype||"miss_group_video"===s.subtype;j=(0,I.jsx)("div",{className:(0,i.default)(w.icon),children:h?(0,I.jsx)(T.default,{name:"miss_video",xstyle:w.iconMissColor}):(0,I.jsx)(T.default,{name:"miss",xstyle:w.iconMissColor})}),O=(0,f.default)((0,E.unproxy)(s.unsafe()),!0);break;case d.default.MSG_TYPE.NOTIFICATION_TEMPLATE:if("change_number"===s.subtype){const e=s.templateParams[0],t=s.templateParams[1],a=u.ContactCollection.get(e),n=(null==a?void 0:a.isMyContact)?a.formattedName:(0,P.default)(e),i=M.default.equals(s.chat.id,e);O=i?v.default.t(290,{name:n}):v.default.t(288,{name:n}),i&&(D=()=>function(e,t){(0,r.onChangeNumberNotificationClick)(e,t)}(t,e))}else if(O=(0,g.default)((0,E.unproxy)(s.unsafe())),"disappearing_mode"===s.subtype)D=()=>{(0,y.default)()},j=(0,I.jsx)("div",{className:(0,i.default)(w.icon),children:(0,I.jsx)(T.default,{name:"disappearing",width:16,height:16})});else if(R=(0,_.formatNotificationTemplateModalText)((0,E.unproxy)(s.unsafe())),null!=R){const e=(0,S.default)(s.subtype);D=()=>{(0,b.default)(R,e)}}B=s.type,F=s.subtype,B===d.default.MSG_TYPE.NOTIFICATION_TEMPLATE&&N.has(F)&&(j=(0,I.jsx)("div",{className:(0,i.default)(w.iconE2EIconSupportGroupbizInfo,w.notificationInfoIconColor),children:(0,I.jsx)(T.default,{name:"info-filled",width:12,height:15})}));break;case d.default.MSG_TYPE.PROTOCOL:if("ephemeral_setting"===s.subtype){var L;const e=s.from,t=s.id.remote,a=o.ChatCollection.gadd(t),n=null!==(L=s.ephemeralDuration)&&void 0!==L?L:0;O=(0,m.default)(n,e,t),D=()=>{!function(e){l.Cmd.ephemeralDrawer(e,!1,C.default.EPHEMERAL_SETTING_ENTRY_POINT_TYPE.SYSTEM_MESSAGE)}(a)},j=(0,I.jsx)("div",{className:(0,i.default)(w.icon),children:(0,I.jsx)(T.default,{name:"disappearing",width:16,height:16})})}}var B,F;const G=(0,I.jsxs)("span",{children:[j,(0,I.jsx)(h.EmojiText,{direction:v.default.isRTL()?"rtl":"ltr",text:O})]});return D?(0,I.jsx)("div",{role:"button",ref:a,onClick:D,children:G}):(0,I.jsx)("span",{children:G})}var j=(0,n.forwardRef)(k);t.default=j;const N=new Set(["blue_msg_bsp_fb_unverified","blue_msg_bsp_fb_verified","blue_msg_bsp_premise_unverified","blue_msg_bsp_premise_verified","blue_msg_self_fb_unverified","blue_msg_self_fb_verified","biz_privacy_mode_init_fb","biz_privacy_mode_init_bsp","biz_privacy_mode_to_fb","biz_privacy_mode_to_bsp"])},70666:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const e=(0,l.jsx)(r.default,{onOK:()=>i.Cmd.closeModal(),okText:o.default.t(1585),children:n.default._("Setting your default message timer from web/desktop is not yet available. You can set this timer from your mobile device by going to Settings > Privacy > Disappearing messages.",null,{hk:"1ChROe"})});i.Cmd.openModal(e)};var n=s(a(48360)),i=a(88102),r=s(a(52665)),o=s(a(43725)),l=a(85893)},32162:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){const s=(0,u.jsx)(n.default,{href:t,onClick:e=>{e.preventDefault(),i.Cmd.closeModal("none"),setTimeout((()=>(0,o.openExternalLink)(t)),10)},children:null!=a?a:l.default.t(690)}),c=(0,u.jsxs)(r.default,{onOK:()=>i.Cmd.closeModal(),okText:l.default.t(1765),type:d.ModalTheme.Multiline,children:[e,"",s]});i.Cmd.openModal(c)};var n=s(a(99360)),i=a(88102),r=s(a(52665)),o=a(12591),l=s(a(43725)),d=a(57224),u=a(85893)},41826:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{msg:t,displayAuthor:a}=e;return(0,d.jsxs)(l.default,{msg:t,displayAuthor:a,children:[(0,d.jsx)("div",{className:(0,n.default)(u),children:(0,d.jsx)(o.default,{name:"unknown"})}),(0,d.jsx)("div",{className:(0,n.default)(c),children:(0,d.jsx)(r.default,{msg:t.unsafe(),theme:"placeholder",children:(0,i.default)(t.unsafe())})})]})};var n=s(a(56720)),i=s(a(89422)),r=s(a(54703)),o=s(a(23217)),l=s(a(75618)),d=a(85893);const u={display:"l7jjieqr",float:"kpdgp91a",marginRight:"efjhou1r",color:"o3jcrxmo"},c={marginTop:"kiiy14zj",marginLeft:"aga1he8v"}},16369:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,i.formatAmount1000ToParts)(e.currency,e.amount1000);return(0,o.jsxs)("div",{className:(0,n.default)(r.default.amount,{[r.default.isQuoted]:e.isQuoted}),children:[(0,o.jsx)("span",{className:r.default.amountCurrency,children:t.symbol}),(0,o.jsx)("span",{className:r.default.amountInteger,children:t.integer}),(0,o.jsx)("span",{className:r.default.amountDecimal,children:t.decimal})]})};var n=s(a(94184)),i=a(74764),r=s(a(36246)),o=a(85893)},31729:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,i.paymentBackgroundEnabled)()?((e,t)=>{if(!e)return null;const a=l(e.placeholderArgb),s=l(e.textArgb);if(a&&s){const n={backgroundColor:a,color:s};return n.backgroundColor=a,t||(null!=e.width&&(n.minWidth=e.width),null!=e.height&&(n.minHeight=e.height)),n}return null})(e.background,e.isQuoted):null;return(0,o.jsx)("div",{className:(0,n.default)(r.default.container,{[r.default.isQuoted]:e.isQuoted,[r.default.isQuotedInComposeBox]:e.isQuotedInComposeBox}),children:(0,o.jsx)("div",{"data-testid":"payment-background-thumb",className:(0,n.default)(r.default.thumb,{"bg-payments":!e.isQuoted}),style:t,children:e.children})})};var n=s(a(94184)),i=a(57701),r=s(a(42325)),o=a(85893);const l=e=>null==e?null:`rgba(${e>>16&255}, ${e>>8&255}, ${255&e}, ${e>>24&255})`},43309:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{currency:t,subtype:a,paymentStatus:s,paymentTxnStatus:u,isCompact:c}=e;const h=(0,i.formatLocalSymbol)(t),f=null!=u?function(e){switch(null!=e?e:l.PaymentInfoTxnStatus.UNKNOWN){case l.PaymentInfoTxnStatus.SUCCESS:case l.PaymentInfoTxnStatus.COMPLETED:return r.default.success;case l.PaymentInfoTxnStatus.FAILED:case l.PaymentInfoTxnStatus.FAILED_RISK:case l.PaymentInfoTxnStatus.FAILED_DA_FINAL:case l.PaymentInfoTxnStatus.REFUNDED_TXN:case l.PaymentInfoTxnStatus.REFUND_FAILED:case l.PaymentInfoTxnStatus.REFUND_FAILED_PROCESSING:case l.PaymentInfoTxnStatus.REFUND_FAILED_DA:case l.PaymentInfoTxnStatus.AUTH_CANCELED:case l.PaymentInfoTxnStatus.AUTH_CANCEL_FAILED_PROCESSING:case l.PaymentInfoTxnStatus.AUTH_CANCEL_FAILED:case l.PaymentInfoTxnStatus.COLLECT_FAILED:case l.PaymentInfoTxnStatus.COLLECT_FAILED_RISK:return r.default.failed;default:return r.default.pending}}(u):function(e){switch(null!=e?e:l.PaymentInfoStatus.UNKNOWN_STATUS){case l.PaymentInfoStatus.COMPLETE:return r.default.success;case l.PaymentInfoStatus.CANCELLED:case l.PaymentInfoStatus.COULD_NOT_COMPLETE:case l.PaymentInfoStatus.REFUNDED:case l.PaymentInfoStatus.EXPIRED:case l.PaymentInfoStatus.REJECTED:return r.default.failed;default:return r.default.pending}}(s),p="send"===a?(0,d.jsx)(o.default,{name:"payment-send"}):(0,d.jsx)(o.default,{name:"payment-request"});return(0,d.jsxs)("div",{"data-testid":"payment-icon-container",className:(0,n.default)(r.default.icon,f,{[r.default.compact]:c}),children:[(0,d.jsx)("div",{className:(0,n.default)(r.default.iconSymbol,r.default[t]),children:h}),p]})};var n=s(a(94184)),i=a(74764),r=s(a(26225)),o=s(a(23217)),l=a(21224),d=a(85893)},15292:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a;const{paymentStatus:s,paymentTxnStatus:_,expiryTimestamp:g}=e,[v,C]=(0,i.useState)(!1),S=e=>{e&&C(e.getBoundingClientRect().height>20)},y=(0,n.default)({[d.default.bubbleOut]:e.isSentByMe,[d.default.bubbleIn]:!e.isSentByMe}),b=null!=_&&_!==p.PaymentInfoTxnStatus.UNKNOWN||null!=s&&s!==p.PaymentInfoStatus.UNKNOWN_STATUS;let E;if(e.hasCaption)E=(0,m.jsxs)("div",{ref:S,children:[(0,m.jsx)("div",{children:(0,m.jsx)(h.default,{subtype:e.subtype,receiverJid:e.receiverJid})}),(0,m.jsx)(c.default,{paymentStatus:s,paymentTxnStatus:_,expiryTimestamp:g})]});else if(b){var T;E=(0,m.jsxs)("div",{ref:S,children:[(0,m.jsx)("div",{children:(0,m.jsx)(h.default,{subtype:e.subtype,receiverJid:e.receiverJid})}),(0,m.jsx)(f.default,{msg:null===(T=e.msg)||void 0===T?void 0:T.unsafe(),children:(0,m.jsx)(c.default,{paymentStatus:s,paymentTxnStatus:_,expiryTimestamp:g})})]})}else{var x;E=(0,m.jsx)(f.default,{msg:null===(x=e.msg)||void 0===x?void 0:x.unsafe(),children:(0,m.jsx)("span",{ref:S,children:(0,m.jsx)(h.default,{subtype:e.subtype,receiverJid:e.receiverJid})})})}return(0,m.jsxs)("div",{className:y,children:[(0,m.jsx)(o.default,{background:null===(t=e.msg)||void 0===t?void 0:t.paymentBackground,children:(0,m.jsx)(r.default,{currency:e.currency,amount1000:e.amount1000})}),(0,m.jsxs)("div",{className:d.default.body,children:[(0,m.jsx)("div",{className:(0,n.default)(d.default.bodyIcon,{[d.default.bodyIconMultiline]:v}),children:(0,m.jsx)(l.default,{currency:e.currency,subtype:e.subtype,paymentStatus:s,paymentTxnStatus:_})}),(0,m.jsx)("div",{className:d.default.bodyText,children:E})]}),(null===(a=e.msg)||void 0===a?void 0:a.paymentNoteMsg)?(0,m.jsx)(u.default,{msg:e.msg}):null]})};var n=s(a(94184)),i=a(67294),r=s(a(16369)),o=s(a(31729)),l=s(a(43309)),d=s(a(37291)),u=s(a(49073)),c=s(a(64557)),h=s(a(74066)),f=s(a(21595)),p=a(21224),m=a(85893)},49073:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{msg:t}=e;if(t.paymentNoteMsg&&t.paymentNoteMsg.type===r.default.MSG_TYPE.STICKER){const e=t.paymentNoteMsg;if(e){const t=new o.Sticker((0,n.default)({},e));return(0,d.jsx)("div",{className:(0,i.default)(u),children:(0,d.jsx)(l.default,{sticker:t})})}}return null};var n=s(a(81109)),i=s(a(56720)),r=s(a(69618)),o=a(89867),l=s(a(52146)),d=a(85893);const u={alignSelf:"o2es7gts",textAlign:"qfejxiq4"}},64557:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let t,a,{paymentStatus:s,paymentTxnStatus:i,expiryTimestamp:o}=e;(function(){const e=(0,u.default)();(0,c.default)(e,1e3,{immediate:!0})})(),({str:t,themeClassName:a}=null!=i?function(e,t){let a=null,s=null;if(null!=e)switch(e){case h.PaymentInfoTxnStatus.UNKNOWN:a=null,s=null;break;case h.PaymentInfoTxnStatus.PENDING_SETUP:a=m(t),s="pending";break;case h.PaymentInfoTxnStatus.PENDING_RECEIVER_SETUP:case h.PaymentInfoTxnStatus.COLLECT_INIT:a=l.default.t(1796),s="pending";break;case h.PaymentInfoTxnStatus.INIT:case h.PaymentInfoTxnStatus.FAILED_PROCESSING:case h.PaymentInfoTxnStatus.FAILED_RECEIVER_PROCESSING:case h.PaymentInfoTxnStatus.FAILED_DA:a=l.default.t(1800),s="pending";break;case h.PaymentInfoTxnStatus.SUCCESS:case h.PaymentInfoTxnStatus.COMPLETED:a=l.default.t(1792),s="success";break;case h.PaymentInfoTxnStatus.FAILED:case h.PaymentInfoTxnStatus.FAILED_RISK:case h.PaymentInfoTxnStatus.FAILED_DA_FINAL:case h.PaymentInfoTxnStatus.REFUNDED_TXN:case h.PaymentInfoTxnStatus.REFUND_FAILED:case h.PaymentInfoTxnStatus.REFUND_FAILED_PROCESSING:case h.PaymentInfoTxnStatus.REFUND_FAILED_DA:case h.PaymentInfoTxnStatus.AUTH_CANCELED:case h.PaymentInfoTxnStatus.AUTH_CANCEL_FAILED_PROCESSING:case h.PaymentInfoTxnStatus.AUTH_CANCEL_FAILED:case h.PaymentInfoTxnStatus.COLLECT_FAILED:case h.PaymentInfoTxnStatus.COLLECT_FAILED_RISK:a=l.default.t(1793),s="failed";break;case h.PaymentInfoTxnStatus.EXPIRED_TXN:case h.PaymentInfoTxnStatus.COLLECT_EXPIRED:a=l.default.t(1794),s="pending";break;case h.PaymentInfoTxnStatus.COLLECT_SUCCESS:a=m(t),s="pending";break;case h.PaymentInfoTxnStatus.COLLECT_REJECTED:a=l.default.t(1803),s="pending";break;case h.PaymentInfoTxnStatus.COLLECT_CANCELED:case h.PaymentInfoTxnStatus.COLLECT_CANCELLING:a=l.default.t(1791),s="pending";break;case h.PaymentInfoTxnStatus.IN_REVIEW:a=l.default.t(1795),s="pending"}return{str:a,themeClassName:s}}(i,o):function(e,t){let a=null,s=null;if(null!=e)switch(e){case h.PaymentInfoStatus.PROCESSING:a=l.default.t(1800),s="pending";break;case h.PaymentInfoStatus.COMPLETE:a=l.default.t(1792),s="success";break;case h.PaymentInfoStatus.SENT:a=l.default.t(1796),s="pending";break;case h.PaymentInfoStatus.NEED_TO_ACCEPT:a=m(t),s="pending";break;case h.PaymentInfoStatus.COULD_NOT_COMPLETE:case h.PaymentInfoStatus.REFUNDED:a=l.default.t(1793),s="failed";break;case h.PaymentInfoStatus.EXPIRED:a=l.default.t(1794),s="failed";break;case h.PaymentInfoStatus.REJECTED:a=l.default.t(1803),s="failed";break;case h.PaymentInfoStatus.CANCELLED:a=l.default.t(1791),s="failed";break;case h.PaymentInfoStatus.WAITING_FOR_PAYER:case h.PaymentInfoStatus.WAITING:a=m(t),s="pending";break;case h.PaymentInfoStatus.UNKNOWN_STATUS:a=null,s=null}return{str:a,themeClassName:s}}(s,o));if(null==t)return null;const _=!!a&&p[a];return(0,f.jsx)("span",{"data-testid":"payment-status","data-a8n":n.default.key(a),className:(0,r.default)(p.status,d.hasEdgeFix&&p.statusEdgeFix,_),children:t})};var n=s(a(99964)),i=s(a(30381)),r=s(a(56720)),o=a(22683),l=s(a(43725)),d=a(12209),u=s(a(59909)),c=s(a(98007)),h=a(21224),f=a(85893);const p={status:{fontWeight:"hnx8ox4h"},statusEdgeFix:{fontWeight:"sy6s5v3r"},failed:{color:"g0bfn8tw"},pending:{color:"de33c33s"},success:{color:"hb09shpw"}};function m(e){if(null==e)return l.default.t(1796);const t=1e3*o.Clock.globalUnixTime(),a=1e3*e;if(a-t>6e4){const e=(0,i.default)(t).to((0,i.default)(a));return l.default.t(1798,{timeSpan:e})}return a-t>0?l.default.t(1799):l.default.t(1797)}},74066:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let t;if("invite"===e.subtype&&e.msgKey)t=(0,r.formatPaymentInviteMessageText)(e.msgKey);else if("send"===e.subtype){const a=f(e.receiverJid);null!=a&&(t=(0,h.jsx)(l.default,{id:1790,params:{receiverName:a}}))}else if("request"===e.subtype){const a=f(e.receiverJid);null!=a&&(t=(0,h.jsx)(l.default,{id:1783,params:{receiverName:a}}))}return t?(0,h.jsx)("span",{className:(0,n.default)(u.default.container,{[u.default.isQuoted]:e.isQuoted}),children:t}):null};var n=s(a(94184)),i=a(19380),r=a(14833),o=s(a(43725)),l=s(a(56074)),d=a(12176),u=s(a(17468)),c=s(a(39938)),h=a(85893);function f(e){if(!e)return null;const t=i.ContactCollection.get(e);return(0,h.jsx)("span",{className:u.default.name,children:t?t.isMe?o.default.t(1913):(0,h.jsx)(d.Name,{contact:t,showNotifyName:!0}):(0,c.default)(e)})}},54806:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{displayAuthor:t,displayType:a,quotedMsg:s}=e,h=(0,u.useModelValues)(e.msg,["paymentAmount1000","paymentCurrency","id","isSentByMe","paymentNoteMsg","paymentStatus","paymentTxnStatus","paymentExpiryTimestamp","paymentInviteServiceType","paymentMessageReceiverJid","paymentBackground","subtype"]);if(!n.GK.supportsFeature(n.GK.F.PAYMENTS))return(0,c.jsx)(l.default,{msg:h,displayAuthor:t,displayType:a,quotedMsg:s});{var f;const e=!!(null===(f=h.paymentNoteMsg)||void 0===f?void 0:f.body);if("invite"===h.subtype&&null!=h.paymentInviteServiceType)return(0,c.jsx)(o.default,{msg:h,displayAuthor:t,displayType:a,serviceType:h.paymentInviteServiceType});if(!(h.paymentAmount1000&&h.paymentCurrency))return(0,c.jsx)(l.default,{msg:h,displayAuthor:t,displayType:a,quotedMsg:s});const n=(0,c.jsx)(r.default,{isSentByMe:h.isSentByMe,currency:h.paymentCurrency,amount1000:h.paymentAmount1000,receiverJid:h.paymentMessageReceiverJid,paymentStatus:h.paymentStatus,paymentTxnStatus:h.paymentTxnStatus,expiryTimestamp:h.paymentExpiryTimestamp,subtype:h.subtype,hasCaption:e,msg:h});switch(h.subtype){case"ciphertext":return(0,c.jsx)(l.default,{msg:h,displayAuthor:t,displayType:a,quotedMsg:s,paymentInfo:n,placeholderText:i.default.t(1777)});case"futureproof":return(0,c.jsx)(l.default,{msg:h,displayAuthor:t,displayType:a,quotedMsg:s,paymentInfo:n,placeholderText:i.default.t(1779)});case"send":case"request":return(0,c.jsx)(d.default,{msg:h,displayAuthor:t,displayType:a,quotedMsg:s,paymentInfo:n});default:return(0,c.jsx)(l.default,{msg:h,displayAuthor:t,displayType:a,quotedMsg:s})}}};s(a(69618));var n=a(7293),i=s(a(43725)),r=s(a(15292)),o=s(a(82230)),l=s(a(81076)),d=s(a(86123)),u=a(49082),c=a(85893)},82230:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,h.useModelValues)(e.msg,["rtl","dir","isSentByMe","paymentInviteServiceType","isGroupMsg","isPSA","senderObj","paymentNoteMsg","id","to","from"]),a=(0,n.default)({[c.default.bubbleOut]:t.isSentByMe,[c.default.bubbleIn]:!t.isSentByMe}),s=(0,f.jsx)("div",{className:c.default.caption,children:(0,f.jsx)(u.default,{msg:t.unsafe(),children:(0,f.jsx)(r.EmojiText,{text:(0,o.formatPaymentInviteMessageText)(t.id),selectable:!0,dirMismatch:t.rtl!==l.default.isRTL(),direction:t.dir})})});return(0,f.jsx)(d.default,{displayAuthor:e.displayAuthor,displayType:e.displayType,hasCaption:!!s,msg:t,children:(0,f.jsxs)("div",{className:a,children:[(0,f.jsx)("div",{className:(0,n.default)(c.default.inviteBackground,"bg-payments"),children:(0,f.jsx)("div",{className:(0,n.default)(c.default.inviteImage,p(t.paymentInviteServiceType))})}),(0,f.jsx)("div",{className:c.default.body,children:(0,f.jsx)("div",{className:c.default.bodyText,children:s})})]})})};var n=s(a(94184)),i=(s(a(69618)),a(24808)),r=a(65417),o=a(14833),l=s(a(43725)),d=s(a(1238)),u=s(a(54703)),c=s(a(82179)),h=a(49082),f=a(85893);const p=e=>{if(null==e)return"";switch(e){case i.PaymentInviteMessageServiceType.UPI:return"payments-invite-upi";default:return""}}},81076:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const a=(0,f.useModelValues)(e.msg,["rtl","dir","isSentByMe","isGroupMsg","isPSA","senderObj","paymentNoteMsg"]);let s;const m=null===(t=a.paymentNoteMsg)||void 0===t?void 0:t.body;if(m){const e=(0,i.Conversation)({mentions:a.mentionMap(),links:a.getLinks(),trusted:a.isTrusted()});s=(0,p.jsx)(l.default,{msg:a.unsafe(),children:(0,p.jsx)(r.EmojiText,{text:m,selectable:!0,formatters:e,dirMismatch:a.rtl!==o.default.isRTL(),direction:a.dir})})}let _,g;if(e.quotedMsg){const t=(0,n.default)(c.default.quote,{[c.default.hasAuthor]:e.displayAuthor,[c.default.forwarded]:(0,u.showForwarded)(a)});_=(0,p.jsx)("div",{className:t,children:e.quotedMsg})}let v=o.default.t(1778);e.placeholderText&&(g="ciphertext",v=e.placeholderText);const C=(0,n.default)({[c.default.hasText]:s,[c.default.noText]:!s});return(0,p.jsxs)(h.default,{msg:a,displayAuthor:e.displayAuthor,children:[_,e.paymentInfo,(0,p.jsx)("div",{className:C,children:(0,p.jsx)(d.default,{hasCaption:!!s,iconName:g,msg:a.unsafe(),children:v})}),s]})};var n=s(a(94184)),i=a(10233),r=(s(a(69618)),a(65417)),o=s(a(43725)),l=s(a(54703)),d=s(a(99422)),u=a(63132),c=s(a(83662)),h=s(a(75618)),f=a(49082),p=a(85893)},74790:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(99964)),r=n(a(94184)),o=a(67294),l=n(a(56720)),d=n(a(72655)),u=n(a(85559)),c=n(a(6725)),h=a(88102),f=n(a(69618)),p=a(21504),m=n(a(11740)),_=n(a(14703)),g=a(29565),v=n(a(20668)),C=s(a(41124)),S=a(58668),y=n(a(20553)),b=a(42316),E=n(a(11339)),T=a(63132),x=n(a(34949)),M=n(a(75315)),P=a(31019),A=n(a(95839)),I=n(a(2749)),w=a(3940),k=a(49082),j=a(85893);function N(e){e.stopPropagation()}const O={bubble:{boxSizing:"cm280p3y",maxWidth:"f4q7vbcz",paddingTop:"ocd2b0bc",paddingEnd:"folpon7g",paddingBottom:"aa0kojfi",paddingStart:"snweb893",position:"g0rxnol2",zIndex:"jnl3jror"},bubbleAlumb:{paddingTop:"i5tg98hk",paddingEnd:"f9ovudaz",paddingBottom:"przvwfww",paddingStart:"gx1rr48f"},bubblePortrait:{maxWidth:"kbtdaxqp"},bubblePreview:{maxWidth:"laorhtua"},thumbBody:{transition:"jciay5ix",flexGrow:"tvf2evcx",flexShrink:"oq44ahr5",flexBasis:"lb5m6g5c"},thumbBodyPreview:{filter:"fsmudgz7"},ctwaContext:{marginTop:"tt8xd2xn",marginEnd:"jnwc1y2a",marginBottom:"kzyzudjh",marginStart:"svoq16ka"},author:{paddingBottom:"bxcbqipq",paddingStart:"mhcwslh8",paddingTop:"ocd2b0bc"},authorForwared:{paddingBottom:"przvwfww"},forwardedIndicator:{paddingTop:"ocd2b0bc",paddingEnd:"f9ovudaz",paddingBottom:"aa0kojfi",paddingStart:"mhcwslh8"},forwardedIndicatorHasAuthor:{paddingTop:"i5tg98hk"},overlay:{marginTop:"tt8xd2xn",marginEnd:"jnwc1y2a",marginBottom:"mpdn4nr2",marginStart:"svoq16ka",maxWidth:"tthqcax0",position:"g0rxnol2","::before":{background:"rnzbggcn",borderTopStartRadius:"gaz0s4oj",borderTopEndRadius:"faao65il",borderBottomEndRadius:"o9exb5zn",borderBottomStartRadius:"bl44g9bl",content:"ckfn5qle",height:"flcm9zni",position:"jiaumjzp",width:"evuypb09",zIndex:"dgw4ccbq"}},overlayAlbumText:{alignItems:"gndfcl4n",borderTopStartRadius:"l8fojup5",borderTopEndRadius:"paxyh2gw",borderBottomEndRadius:"sfeitywo",borderBottomStartRadius:"cqsf3vkf",cursor:"ajgl1lbb",display:"p357zi0d",flexGrow:"ggj6brxn",flexShrink:"m0h2a7mj",flexBasis:"rjo8vgbg",justifyContent:"ac2vgrno",maxWidth:"tthqcax0",overflowX:"gfz4du6o",overflowY:"r7fjleex",position:"g0rxnol2"},meta:{bottom:"dpkuihx7",position:"lhggkp7q",end:"j2mzdvlq",zIndex:"b9fczbqn"},metaHasCaption:{end:"fz4q5utg",bottom:"lrw9n60e"},metaAlbum:{end:"en6yos0k",bottom:"lrw9n60e"},caption:{boxSizing:"cm280p3y",maxWidth:"cbjz30lg",paddingTop:"esbfogcw",paddingEnd:"jfqm35v0",paddingBottom:"bxcbqipq",paddingStart:"mhcwslh8"},captionPortrait:{maxWidth:"r1vzeywj"},captionPSA:{paddingBottom:"l5xxxszt"},quote:{boxSizing:"cm280p3y",marginBottom:"kzyzudjh",maxWidth:"cbjz30lg"},quotePortrait:{maxWidth:"r1vzeywj"},thumb:{alignItems:"gndfcl4n",borderTopStartRadius:"l8fojup5",borderTopEndRadius:"paxyh2gw",borderBottomEndRadius:"sfeitywo",borderBottomStartRadius:"cqsf3vkf",cursor:"ajgl1lbb",display:"p357zi0d",justifyContent:"ac2vgrno",maxWidth:"laorhtua",overflowX:"gfz4du6o",overflowY:"r7fjleex",position:"g0rxnol2"},thumbAlbum:{maxHeight:"fgslzg21",minHeight:"ofrvpfun",position:"g0rxnol2"},thumbGallery:{maxHeight:"tvsw1x19"}};function R(e,t){var a;const{contentContainerClassName:s,captionComponent:n,thumbClassName:R,onThumbClick:D,theme:L,overlayContent:B,displayType:F,displayAuthor:G,isMsgVisible:U,albumMsgs:V,zoomMsg:H,hideMeta:K,maxWidth:q}=e,W=(0,o.useRef)(null),Y=(0,k.useModelValues)(e.msg,["ack","caption","dir","footer","isFromTemplate","id","isFailed","isGroupMsg","isPSA","isSentByMe","rtl","senderObj","type","supportsMessageFooter","text"]),z=(0,k.useModelValues)(e.mediaData,["aspectRatio","preview","mediaStage","fullWidth","fullHeight","size","progressiveStage"]),Q=()=>Y.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:E.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1});(0,o.useEffect)((()=>{Q()}),[]);const $=()=>{h.Cmd.openModal((0,j.jsx)(v.default,{msg:Y.unsafe()}))},X=e=>{if(!U)return null;const t=U(e);return t?t.getImgNode&&t.getImgNode():null},J=()=>{Y.forceDownloadMediaEvenIfExpensive()},Z=()=>{Y.cancelDownload()},ee=()=>{Y.cancelUpload()},te=()=>{Y.resumeUpload()},ae=()=>{Y.resumeRemoteUpload()},se=()=>Y.type===f.default.MSG_TYPE.IMAGE&&Y.caption?Y.caption:void 0,ne=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;const{fullHeight:n,fullWidth:i}=z,r=(0,l.default)(O.thumbBody,t&&O.thumbBodyPreview),o=(0,p.getImgStyle)(i||a,n||s,a,s);return(0,j.jsx)("img",{alt:se(),src:e,className:r,style:o,ref:W})},ie=()=>W.current;(0,o.useImperativeHandle)(t,(()=>({getImgNode:ie})));const re=e=>{if(e&&e.stopPropagation(),L===g.DisplayTheme.Album){const e=new Set((V||[]).map((e=>e.id.toString())));h.Cmd.mediaViewerModal({msg:(0,P.unproxy)((H||Y).unsafe()),getZoomNode:X,highlightedMsgIds:e})}else h.Cmd.mediaViewerModal({msg:(0,P.unproxy)(Y.unsafe()),getZoomNode:X})},oe=(0,w.numCodepoints)(null!==(a=Y.text)&&void 0!==a?a:"")>f.default.MAX_PORTRAIT_MEDIA_CAPTION_LENGTH,{bubbleWidth:le,bubbleHeight:de}=(0,p.getBubbleDimension)(Y.type,Y.isFromTemplate,z.aspectRatio,L,F,oe,q),ue=se(),ce=ue?null:(0,j.jsx)(I.default,{}),he=le<de&&(0,p.canUseCustomCropping)(Y.type,L,F),fe=ue?(0,j.jsx)("div",{className:(0,l.default)(O.caption,he&&O.captionPortrait,Y.isPSA&&O.captionPSA),children:(0,j.jsx)(c.default,{msg:Y.unsafe(),trusted:e.trusted,spacer:!(Y.supportsMessageFooter&&Y.footer)})}):null;let pe=null,me=null;if(null!=B)me=D||re;else{const{mediaStage:e,progressiveStage:t}=z;switch(e){case S.MEDIA_DATA_STAGE.RESOLVED:case S.MEDIA_DATA_STAGE.PROGRESSIVE_READY:me=D||re;break;case S.MEDIA_DATA_STAGE.FETCHING:pe=(0,j.jsx)(C.Pending,{cancelable:!0}),me=Z;break;case S.MEDIA_DATA_STAGE.NEED_POKE:pe=(0,j.jsx)(C.Download,{filesize:z.size}),me=J;break;case S.MEDIA_DATA_STAGE.UPLOADING:case S.MEDIA_DATA_STAGE.REUPLOADING:pe=(0,j.jsx)(C.Pending,{cancelable:!0}),me=ee;break;case S.MEDIA_DATA_STAGE.NEED_UPLOAD:pe=(0,j.jsx)(C.Upload,{filesize:z.size}),me=te;break;case S.MEDIA_DATA_STAGE.REMOTE_NEED_UPLOAD:pe=(0,j.jsx)(C.Upload,{filesize:z.size}),me=ae;break;case S.MEDIA_DATA_STAGE.ERROR_MISSING:me=D||$;break;case S.MEDIA_DATA_STAGE.ERROR_UNSUPPORTED:pe=(0,j.jsx)(C.Download,{filesize:z.size}),me=D||re;break;case S.MEDIA_DATA_STAGE.SENDING:Y.isFailed||(pe=(0,j.jsx)(C.Pending,{}));break;case S.MEDIA_DATA_STAGE.DECRYPTING:null==t&&(pe=(0,j.jsx)(C.Pending,{cancelable:!0}));break;case S.MEDIA_DATA_STAGE.INIT:case S.MEDIA_DATA_STAGE.EXISTS:break;case S.MEDIA_DATA_STAGE.ERROR_FILE_NOT_READABLE:__LOG__(4,void 0,new Error,!0)`Images should be copied in memory when selected`,SEND_LOGS("media-image-not-readable-error"),me=M.default;break;case S.MEDIA_DATA_STAGE.ERROR_TOO_LARGE:case S.MEDIA_DATA_STAGE.PREPARING:case S.MEDIA_DATA_STAGE.REMOTE_UPLOADING:pe=(0,j.jsx)(C.Pending,{})}}const _e=(0,T.showForwarded)(Y)&&e.theme!==g.DisplayTheme.Album,ge=L===g.DisplayTheme.Album,ve=(0,l.default)(O.bubble,he&&O.bubblePortrait,ge&&O.bubbleAlumb),Ce=e.displayType===f.default.DISP_TYPE.MSG_INFO||e.displayType===f.default.DISP_TYPE.STARRED_MSGS,Se=(0,r.default)(ve,(0,l.default)(Ce&&O.bubblePreview)),ye=G?(0,j.jsx)("div",{className:(0,l.default)(O.author,_e&&O.authorForwared),children:(0,j.jsx)(d.default,{msg:Y,contact:Y.senderObj})}):null,be=_e?(0,j.jsx)(_.default,{msg:Y.unsafe(),className:(0,l.default)(O.forwardedIndicator,G&&O.forwardedIndicatorHasAuthor)}):null,Ee=e.quotedMsg?(0,j.jsx)("div",{className:(0,l.default)(O.quote,he&&O.quotePortrait),children:e.quotedMsg}):null,Te=e.displayType===f.default.DISP_TYPE.GALLERY,xe=(0,l.default)(O.thumb,Boolean(B)&&O.overlay,ge&&O.thumbAlbum,Te&&O.thumbGallery);let Me;null!=B||K||(Me=(0,j.jsx)("div",{className:(0,l.default)(O.meta,Boolean(ue)&&O.metaHasCaption,ge&&O.metaAlbum),children:(0,j.jsx)(b.Meta,{msg:Y})}));let Pe=(0,j.jsxs)("div",{className:s,children:[ye,be,Ee,(0,j.jsx)(m.default,{msg:Y.unsafe(),wrapperClass:(0,l.default)(O.ctwaContext)}),(0,j.jsxs)("div",{role:"button","data-a8n":i.default.key("image-thumb"),className:R||xe,onClick:me,style:{width:le,height:de},children:[pe,(0,j.jsx)(y.default,{mediaData:z,placeholderRenderer:()=>((e,t)=>ne(z.preview instanceof x.default?z.preview.url():null,!0,e,t))(le,de),downloadMedia:Q,renderProgressively:!0,children:(e,t)=>ne(e,t,le,de)}),ce]}),n||fe,(0,j.jsx)(A.default,{dir:Y.dir,footer:Y.footer,isShown:Y.supportsMessageFooter,msg:Y.unsafe(),rtl:Y.rtl,trusted:e.trusted,type:Y.type}),Me]});return fe?(0,j.jsx)(u.default,{contact:Y.senderObj,msg:Y.unsafe(),className:Se,onClick:N,children:Pe}):(null!=B&&(Pe=(0,j.jsxs)("div",{className:(0,l.default)(O.overlayAlbumText),children:[Pe,B]})),(0,j.jsx)("div",{className:Se,onClick:N,children:Pe}))}var D=(0,o.forwardRef)(R);t.default=D},19218:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{playbackRate:t,onClick:a}=e,s=()=>{o.PttPrefs.delayClearPlaybackRateControl(),a()};return(0,l.jsx)("div",{role:"button","aria-hidden":!0,className:(0,i.default)(u),tabIndex:"0",onClick:s,onKeyPress:e=>{e.key!==d.ENTER&&e.key!==d.SPACE||(e.preventDefault(),e.stopPropagation(),s())},children:(0,l.jsx)("div",{className:(0,i.default)(c),children:h(t)})})};var n=s(a(48360)),i=s(a(56720)),r=s(a(54392)),o=a(56989),l=a(85893);const{KEYBOARD_EVENT_KEY_VALUE:d}=r.default,u={position:"lhggkp7q",display:"p357zi0d",alignItems:"gndfcl4n",justifyContent:"ac2vgrno",width:"ln8gz9je",height:"ppled2lx",userSelect:"rkxvyd19"},c={boxSizing:"cm280p3y",minWidth:"nucpke6t",paddingTop:"ppypbuwx",paddingEnd:"lnjlmjd6",paddingBottom:"s8gyl5p1",paddingStart:"mc6o24uu",fontSize:"ovllcyds",fontWeight:"hnx8ox4h",color:"kuml4n87",textAlign:"qfejxiq4",backgroundColor:"pbzwqulz",borderTopStartRadius:"oer0kere",borderTopEndRadius:"ikqwvqb4",borderBottomEndRadius:"afb5cxhb",borderBottomStartRadius:"nlio6qai",transform:"etdxpurf"};function h(e){switch(e){case 1:return n.default._("1",null,{hk:"P4fmA"});case 1.5:return n.default._("1.5",null,{hk:"6zgHM"});case 2:return n.default._("2",null,{hk:"4wp8yT"})}}},87543:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(13959),i=s(a(94184)),r=a(67294),o=a(88984),l=a(29623),d=a(84387),u=s(a(88137)),c=a(82039),h=s(a(23217)),f=s(a(90012)),p=a(85893);class m extends r.PureComponent{constructor(e){var t;super(e),t=this,this._handleImageChange=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.setState({img:e.img})},this.state={img:null}}componentDidMount(){const e=this.props.wid;if(!e)return;const t=this.props.getUnmountSignal();c.ProfilePicThumbCollection.find(e).then((e=>(0,n.delayMs)(0).then((()=>e)))).then((e=>{t.aborted||(this.props.listeners.add(e,"change:img",this._handleImageChange),this._handleImageChange(e))})).catch((()=>{}))}render(){const{theme:e}=this.props;if(this.state.img&&this.props.wid)return(0,p.jsx)(o.DetailImage,{id:this.props.wid,quoted:this.props.quoted,size:this.props.size,square:this.props.square,border:this.props.border});let t;t="number"==typeof this.props.size&&0!==this.props.size||"number"!=typeof this.props.size&&null!=this.props.size?this.props.size:o.DETAIL_IMAGE_SIZE.SMALL;const a=(0,o.getSize)(t)||void 0,s=this.props.thumbs?this.props.thumbs:[this.props.thumb],n=s.map(((e,t)=>{if(e)return(0,p.jsx)("img",{className:u.default.image,src:e,alt:""},t);{const e=a&&a/(s.length>2&&t>0?2:1);return(0,p.jsx)(l.FlexRow,{className:u.default.default,justify:"center",align:"center",children:(0,p.jsx)(h.default,{name:this.props.quoted?"default-user-square":"default-user",style:{width:e,height:e},className:u.default.icon})},t)}}));let r;return r=1===n.length?n[0]:2===n.length?(0,p.jsxs)(l.FlexRow,{className:u.default.row,justify:"stretch",align:"stretch",children:[n[0],n[1]]}):(0,p.jsxs)(l.FlexRow,{className:u.default.row,justify:"stretch",align:"stretch",children:[n[0],(0,p.jsxs)(l.FlexColumn,{className:u.default.col,justify:"stretch",align:"stretch",children:[n[1],n[2]]})]}),(0,p.jsx)(l.FlexRow,{className:(0,i.default)(u.default.container,{[u.default.square]:this.props.square,[u.default.hasBorder]:this.props.border,[u.default.hasInnerBorder]:"voip"===e||"voip-dimmed"===e,[u.default.hasLargeInnerBorder]:"voip-large"===e||"voip-large-dimmed"===e,[u.default.dimmed]:"voip-dimmed"===e||"voip-large-dimmed"===e}),style:{width:a,height:a},children:r})}}m.displayName="ProfileImage";var _=(0,d.ListenerHOC)((0,f.default)(m));t.default=_},32570:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(67294),i=s(a(90850)),r=s(a(1195)),o=s(a(72655)),l=s(a(69618)),d=a(88984),u=s(a(11339)),c=s(a(6507)),h=a(49082),f=a(85893);const p=(e,t)=>{const a=(0,h.useModelValues)(e.msg,["ack","isSentByMe","senderObj","id"]),s=(0,n.useRef)(null);(0,n.useEffect)((()=>{e.msg.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:u.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1})}),[e.msg]),(0,n.useImperativeHandle)(t,(()=>({handleKeyActivation:e=>{var t;null===(t=s.current)||void 0===t||t.handleKeyActivation(e)}})));const p=e.displayAuthor?(0,f.jsx)(o.default,{msg:a,contact:a.senderObj}):null;return(0,f.jsx)(i.default,{msg:a,quotedMsg:e.quotedMsg,author:p,status:(0,f.jsx)(c.default,{played:a.ack===l.default.ACK.PLAYED,isSentByMe:a.isSentByMe}),player:(0,f.jsx)(r.default,{ref:s,msg:e.msg,mediaData:e.mediaData,displayType:e.displayType,getSequentialMsg:e.getSequentialMsg}),avatar:(0,f.jsx)(d.DetailImage,{id:a.senderObj.id,size:55}),displayType:e.displayType})};var m=(0,n.forwardRef)(p);t.default=m},98113:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.playEndPttTone=function(){l(o)},t.playMidPttTone=function(){l(r)};var n=s(a(69618)),i=a(72472);const r=new window.Audio(n.default.PTT_MIDDLE_TONE_PATH),o=new window.Audio(n.default.PTT_END_TONE_PATH);function l(e){i.MuteCollection.getGlobalSounds()&&e.play()}},6507:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,n.default)(l.icon,function(e){let{played:t,isSentByMe:a}=e;return t?l.blue:a?l.gray:l.green}(e),{[l.outgoing]:e.isSentByMe,[l.incoming]:!e.isSentByMe});return(0,o.jsx)("div",{className:i.default.wrapper,children:(0,o.jsx)("div",{className:t,children:(0,o.jsx)(r.default,{name:"ptt-status"})})})};var n=s(a(94184)),i=s(a(24378)),r=s(a(23217)),o=a(85893);const l={incoming:i.default.incoming,outgoing:i.default.outgoing,green:i.default.green,blue:i.default.blue,gray:i.default.gray,icon:i.default.icon}},20559:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{msg:t,theme:a}=e,{type:s,productListHeaderImage:r}=(0,m.useModelValues)(t,["type","productListHeaderImage"]);if(t.isViewOnce)return null;let N;switch(t.type){case C:case S:case b:case x:const n=(0,l.isMediaTypeWithImage)(s),{preview:m,fullPreviewData:O}=t.mediaData;(n||null!=m||null!=O)&&(N=(0,g.jsx)(l.MediaMsgPreview,{mediaData:t.mediaData}));break;case w:if(t.headerType===o.ButtonsMessageHeaderType.IMAGE){const{mediaData:e}=t;null==e.preview&&null==e.fullPreviewData||(N=(0,g.jsx)(l.MediaMsgPreview,{mediaData:e}))}break;case y:t.body&&(N=(0,g.jsx)(j,{source:t.body}));break;case v:t.thumbnail&&(N=(0,g.jsx)(j,{source:t.thumbnail}));break;case I:const{mediaType:R,thumbnail:D}=t.interactiveHeader||{};if(null!=R){const{mediaData:e}=t;null==e.preview&&null==e.fullPreviewData||(N=(0,g.jsx)(l.MediaMsgPreview,{mediaData:t.mediaData}))}else null!=D&&(N=(0,g.jsx)(j,{source:D}));break;case E:N=(0,g.jsx)(h.default,{wid:f.ProfilePicThumbCollection.getThumbnailWidFromVcard(t.vcard),thumb:(0,_.vcardThumbnail)(t.vcard),quoted:!0,square:!0,size:k(e.theme)});break;case T:N=(0,g.jsx)(h.default,{size:k(e.theme),square:!0,quoted:!0});break;case M:(0,i.isNonZeroNumber)(t.paymentAmount1000)&&t.paymentCurrency&&(N=(0,g.jsx)(c.default,{background:t.paymentBackground,isQuoted:!0,isQuotedInComposeBox:"composeBox"===a,children:(0,g.jsx)(u.default,{currency:t.paymentCurrency,amount1000:t.paymentAmount1000,isQuoted:!0})}));break;case P:t.thumbnail&&(N=(0,g.jsx)("div",{className:p.default.image,style:{backgroundImage:`url("data:image/jpeg;base64,${t.thumbnail}")`}}));break;case A:r&&(N=(0,g.jsx)("div",{className:p.default.image,style:{backgroundImage:`url("${(0,d.convertToDataURI)(r)}")`}}))}const O=(0,n.default)(p.default.imageWrapper,{[p.default.composeBox]:"composeBox"===a,[p.default.statusV3]:"statusV3"===a,[p.default.isPayment]:t.type===M});return N?(0,g.jsx)("div",{className:O,children:(0,g.jsx)("div",{className:p.default.msgImage,children:N})}):null};var n=s(a(94184)),i=a(29984),r=s(a(69618)),o=a(24808),l=a(63547),d=a(81309),u=s(a(16369)),c=s(a(31729)),h=s(a(87543)),f=a(82039),p=s(a(97900)),m=a(49082),_=a(78521),g=a(85893);const{CHAT:v,IMAGE:C,VIDEO:S,LOCATION:y,DOCUMENT:b,VCARD:E,MULTI_VCARD:T,PRODUCT:x,PAYMENT:M,ORDER:P,LIST:A,INTERACTIVE:I,NATIVE_FLOW:w}=r.default.MSG_TYPE;function k(e){return["conversation","starred","msgInfo"].includes(e)?58:79}function j(e){let{source:t}=e;return(0,g.jsx)("div",{"data-testid":"msgImage",style:{backgroundImage:`url(data:image/jpeg;base64,${t})`},className:p.default.image})}},35072:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{msg:t,displayType:s,chat:R,rootMsg:D,composeQuotedMsgRemoteJid:L,t:B}=e,F=(0,w.default)(),G=(0,I.default)((()=>new y.ProductCatalogSession)),[U,V]=(0,l.useState)(!1),H=!U&&!!D;(0,l.useEffect)((()=>{const e=t.asProductInquiry;if(null==e)return;e.businessOwnerJid&&(0,N.createWid)(e.businessOwnerJid)&&(null!=B&&(e.t=B),u.CatalogCollection.addMsgAsProduct((0,M.unproxy)(e.unsafe())))}),[]);const K=R.assignedColor(t.sender),q=[h.default.DISP_TYPE.CONVERSATION,h.default.DISP_TYPE.STARRED_MSGS].includes(s),W=L||(null==D?void 0:D.quotedRemoteJid),Y=q?"button":null,z=(0,O.jsx)(d.default,{msg:t,contact:t.senderObj,role:Y,chat:R,displaySelf:j.default.equals(t.sender,(0,p.getMaybeMeUser)()),quotedRemoteJid:W,disableClick:!0}),Q=(0,o.default)(T.default.quotedMsg,{[T.default.statusV3QuotedMsg]:"statusV3"===e.theme,[T.default.composeBoxQuotedMsg]:"composeBox"===e.theme,[T.default.hover]:U}),$=(0,O.jsxs)("div",{className:T.default.msgText,children:[z,(0,O.jsx)(x.default,{msg:t,theme:e.theme})]}),X=s===h.default.DISP_TYPE.STARRED_MSGS?"starred":e.theme;return(0,O.jsx)("div",{"data-a8n":r.default.key("quotted-message"),className:T.default.container,onMouseOver:q?()=>{H&&V(!0)}:null,onMouseEnter:q?()=>{H&&V(!0)}:null,onMouseLeave:q?()=>{U&&V(!1)}:null,children:(0,O.jsxs)("div",{className:Q,role:Y,onClick:q?()=>{if(t.isStatusV3)return void(D&&D.isQuotedMsgAvailable?P.StatusV3Collection.find(t.sender).then((e=>{const{QuotedStatusV3FlowLoadable:s}=a(98633);c.Cmd.openModalMedia((0,O.jsx)(s,{removeTopDrawer:!1,statusV3:e,msgKey:t.id,onMsgNotFound:()=>{D&&(D.isQuotedMsgAvailable=!1)}}),{transition:"quoted-status-v3-modal"})})):c.Cmd.openToast((0,O.jsx)(A.Toast,{msg:m.default.t(1284),id:(0,A.genId)()})));if(null!=t.asProductInquiry)return(e=>{const t=e.businessOwnerJid&&(0,N.createWid)(e.businessOwnerJid);if(!t)return;const a=u.CatalogCollection.get(t);if(!a)return;const s=e.productId&&a.productCollection.get(e.productId),n=e.productId&&a.msgProductCollection.get(e.productId);if(!s&&!n)return;let i=n;if(s&&null!=B&&s.t>=B&&(i=s,n&&a.productCollection.remove(n)),!i)return;const r=(0,S.buildProductCatalogContext)(G.current,(0,f.getMaybeBizPlatformForLogging)(e.businessOwnerJid),v.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_MESSAGE);return(0,_.logProductInquiryClick)({product:(0,M.unproxy)(i),catalogContext:r}),(0,g.qplStartProductView)("Message"),c.Cmd.openDrawerRight((0,O.jsx)(b.ProductDetailsFlowLoadable,{product:i,chat:e.chat,refreshCarousel:!0}),"slide-left",F,r)})(t.asProductInquiry);if(D&&!D.isQuotedMsgAvailable)return void c.Cmd.openToast((0,O.jsx)(A.Toast,{msg:m.default.t(844),id:(0,A.genId)()}));const e=t.id,s=t.chat,r=C.MsgCollection.get(e),o=s.getSearchContext(r||e,null==D?void 0:D.unsafe());o&&(o.slideToMsg=!0),c.Cmd.openChatAt(s,o).then((e=>{if(!e)return;const a=C.MsgCollection.get(t.id);a&&(0,i.delayMs)(500).then((()=>{c.Cmd.openMediaViewerForAlbumMedia((0,M.unproxy)(a))}))})),r||o.collection.loadAroundPromise.catch((0,n.filteredCatch)(k.E404,(()=>{const e=null==D?void 0:D.unsafe(),t=null==e?void 0:e.chat;null!=e&&null!=t&&c.Cmd.openChatAt(t,t.getSearchContext(e))})))}:null,children:[(0,O.jsx)("span",{className:(0,o.default)(`bg-color-${K}`,T.default.colorBar)}),(0,O.jsx)("div",{className:T.default.msgBody,dir:q?null:t.dir,children:$}),(0,O.jsx)(E.default,{msg:t.unsafe(),theme:X})]})})};var n=a(50796),i=a(13959),r=s(a(99964)),o=s(a(94184)),l=a(67294),d=s(a(72655)),u=a(99989),c=a(88102),h=s(a(69618)),f=a(62632),p=a(99234),m=s(a(43725)),_=a(77975),g=a(82145),v=s(a(11339)),C=a(59871),S=a(97567),y=a(9153),b=a(67455),E=s(a(20559)),T=s(a(16679)),x=s(a(74729)),M=a(31019),P=a(59387),A=a(50452),I=s(a(59552)),w=s(a(59147)),k=a(77591),j=s(a(39546)),N=a(58021),O=a(85893)},74729:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{msg:t,theme:a}=e,s=(0,E.default)();(0,o.useEffect)((()=>{t.type===w&&t.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:p.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1}),t.type===d.default.MSG_TYPE.DOCUMENT&&t.isVcardOverMmsDocument&&(!t.mediaData||!t.mediaData.mediaBlob)&&t.isTrusted()&&t.size<=1024*y.ServerProps.mmsVcardAutodownloadSizeKb&&t.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:p.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1}).then((()=>(0,n.delayMs)(0)))}),[]),(0,T.useListener)(t.type===d.default.MSG_TYPE.DOCUMENT&&t.mediaData&&t.isVcardOverMmsDocument?t.mediaData:null,"change:parsedVcards",(()=>{s()}));const O=()=>t.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:p.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1}),R=[];t.hasSymbol()&&t.type!==w&&t.type!==j&&R.push((0,x.jsx)(m.default,{msg:t.unsafe(),viewOnceStatic:!0},"msg-symbol"));(t.type!==A||t.isGif||t.caption||t.isViewOnce)&&t.type!==I||R.push(l.Clock.durationStr(Number(t.duration))+" ");const D=h.Configuration.QuotedMention({mentions:t.mentionMap()});if(t.type===M||t.type===P||t.type===A||t.isFromTemplate||t.isDynamicReplyButtonsMsg){var L;let e;e=(null===(L=t.asViewOnce)||void 0===L?void 0:L.isViewOnce)?t.type===P?f.default.t(1443):f.default.t(1450):t.isFromTemplate&&t.type===d.default.MSG_TYPE.CHAT&&t.title?"*"+t.title+"*\n"+t.body:(0,c.default)(t.unsafe(),{stripFormatting:!1}),R.push((0,x.jsx)(u.EmojiText,{formatters:D,className:"quoted-mention",text:e,textLimit:t.initialPageSize,direction:"auto"},"status"))}else if(w===t.type){const a="composeBox"===e.theme?"composeBoxQuoted":"quoted";R.push((0,x.jsx)(b.default,{mediaData:t.mediaData,theme:a,downloadMedia:O},"sticker"))}else t.type===k?(0,r.isNonZeroNumber)(t.paymentAmount1000)&&t.paymentCurrency||"invite"===t.subtype?R.push((0,x.jsx)(v.default,{msgKey:t.id,subtype:t.subtype,receiverJid:t.paymentMessageReceiverJid,isQuoted:!0},"payment")):R.push(f.default.t(1778)):t.type===j?R.push((0,x.jsx)(g.OrderDescription,{msg:t.unsafe(),showMessage:!0},"order")):t.type===N?R.push((0,x.jsx)(_.default,{msg:t},"native_flow")):R.push((0,x.jsx)(u.EmojiText,{formatters:D,className:"quoted-mention",text:(0,S.formatQuotedMsg)(t),textLimit:t.initialPageSize,direction:"auto"},"status"));const B=(0,i.default)(C.default.messageText,{[C.default.composeBoxQuotedMsg]:"composeBox"===e.theme}),F="conversation"===a||"starred"===a?"button":null;return(0,x.jsx)("div",{className:B,dir:t.dir,role:F,children:R})};var n=a(13959),i=s(a(94184)),r=a(29984),o=a(67294),l=a(22683),d=s(a(69618)),u=a(65417),c=s(a(89422)),h=a(5124),f=s(a(43725)),p=s(a(11339)),m=s(a(32281)),_=s(a(47248)),g=a(36707),v=s(a(74066)),C=s(a(33595)),S=a(65510),y=a(64551),b=s(a(12064)),E=s(a(59909)),T=a(19529),x=a(85893);const{CHAT:M,IMAGE:P,VIDEO:A,AUDIO:I,STICKER:w,PAYMENT:k,ORDER:j,NATIVE_FLOW:N}=d.default.MSG_TYPE},65510:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.formatMultiVcardText=f,t.formatProductText=m,t.formatQuotedMsg=function(e){const{MSG_TYPE:t}=r.default;switch(e.type){case t.DOCUMENT:return e.isVcardOverMmsDocument?p(e):(0,l.default)(e.unsafe());case t.MULTI_VCARD:return f(e);case t.PRODUCT:return m(e);case t.INTERACTIVE:return e.nativeFlowName===u.default.ORDER_DETAILS?function(e){const t=(0,c.getOrderInfo)(e);if(null==t)return"";return t.title+"\n"+o.formatAmount(t.currency,t.totalAmount)}(e):(0,l.default)(e.unsafe());default:return(0,l.default)(e.unsafe())}},t.formatVcardOverMmsText=p;var i=n(a(39138)),r=n(a(69618)),o=s(a(74764)),l=n(a(89422)),d=n(a(43725)),u=n(a(5165)),c=a(34841),h=a(78521);function f(e){const t=e.vcardList.length;return t>0?d.default.t(871,{count:t,_plural:t}):d.default.t(870)}function p(e){var t;if(e.mediaData.parsedVcards){const{parsedVcards:t}=e.mediaData;return t.length>1?d.default.t(871,{count:t.length,_plural:t.length}):(0,h.vcardGetNameFromParsed)(t[0])||d.default.t(1604)}return null!=e.pageCount?d.default.t(871,{count:e.pageCount,_plural:e.pageCount}):(null===(t=e.mediaData)||void 0===t?void 0:t.filename)||d.default.t(1606)}function m(e){let t,{title:a,description:s,currencyCode:n,priceAmount1000:l,salePriceAmount1000:d}=e;if(null!=n&&null!=l){const e=e=>o.formatAmount1000(n,e);t=null!=d?`${e(d)} ~${e(l)}~`:e(l)}else s&&(t=(0,i.default)(s,{length:r.default.MAX_REPLY_PRODUCT_DESC_LENGTH}));return[(0,i.default)(a,{length:r.default.MAX_REPLY_PRODUCT_TITLE_LENGTH}),t].filter(Boolean).join("\n")}},51906:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.QuotedMsgAdminGroupName=void 0;var n=s(a(94184)),i=a(67294),r=a(69951),o=a(88102),l=a(65417),d=a(50101),u=s(a(43725)),c=s(a(85098)),h=a(85893);function f(e,t){const{isComposePreview:a,quotedGroupJid:s,quotedGroupSubject:f}=e,[p,m]=(0,i.useState)(!1),_=()=>!p&&!a;(0,i.useImperativeHandle)(t,(()=>({hoverable:_})));const g=null!=f?f:(()=>{const e=r.ChatCollection.get(s);return null==e?void 0:e.formattedTitle})();if(!g)return null;const v=(0,n.default)(c.default.quotedMsg,{[c.default.hover]:p,[c.default.composeBoxQuotedMsg]:!!a});return(0,h.jsx)("div",{onMouseOver:()=>{m(!0)},onMouseEnter:()=>{m(!0)},onMouseLeave:()=>{m(!1)},className:v,children:(0,h.jsxs)("div",{className:c.default.msg,role:a?"none":"button",onClick:()=>{(0,d.findChat)(s).then((e=>o.Cmd.openChatBottom(e)))},children:[(0,h.jsx)("span",{className:c.default.colorBar}),(0,h.jsx)("div",{className:c.default.msgBody,children:(0,h.jsx)(l.EmojiText,{className:"quoted-mention",text:u.default.t(1132,{groupName:g}),direction:"auto"},"status")})]})})}const p=(0,i.forwardRef)(f);t.QuotedMsgAdminGroupName=p},27339:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(52013)),i=s(a(48360)),r=a(67294),o=s(a(56720)),l=s(a(44356)),d=a(88984),u=a(65417),c=a(55414),h=a(9157),f=a(57793),p=a(21357),m=a(49082),_=a(85893);const g={"::before":{content:"f76rftwh"}};function v(e,t){let{reaction:a}=e;const s=(0,r.useRef)(null),[v,C]=(0,r.useState)(!1),S=()=>{var e;n.default.focus(null===(e=s.current)||void 0===e?void 0:e.getElement()),C(!0)},{parentMsg:y,reactionText:b,senderObj:E}=a;(0,r.useImperativeHandle)(t,(()=>({focus:S})));const T=(0,m.useModelValues)(E,["id","isMe","name","formattedName","notifyName"]),{id:x,isMe:M,name:P,formattedName:A,notifyName:I}=T,w=()=>{(0,f.canRevokeReaction)()&&M&&(0,p.sendReactionToMsg)(y,"").catch((e=>{__LOG__(4,void 0,new Error)`sendReactionMsg: error ${e}`}))};let k=null;!P&&I&&(k=(0,_.jsx)(u.EmojiText,{className:(0,o.default)(g),direction:"auto",text:I}));let j=(0,f.reactionBubbleAriaLabelOneReaction)(A,b);return M&&(j=`${j.toString()} ${i.default._("Click to remove",null,{hk:"oSIOf"}).toString()}`),(0,_.jsx)(c.HotKeys,{role:M?"button":"listitem","aria-label":j,handlers:{enter:w,space:w},ref:s,onBlur:()=>{C(!1)},children:(0,_.jsx)(l.default,{idle:!M,image:(0,_.jsx)(d.DetailImage,{id:x,size:40}),primary:A,onClick:w,detail:(0,_.jsx)(h.ReactionEmoji,{scale:"list",size:"large",reaction:b}),secondary:M?i.default._("Click to remove",null,{hk:"oSIOf"}):k,theme:"reaction",active:v})})}var C=(0,r.forwardRef)(v);t.default=C},67112:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(74691)),i=a(67294),r=s(a(56720)),o=a(47915),l=s(a(44942)),d=a(55414),u=s(a(27339)),c=a(85893);const h={width:"ln8gz9je",maxHeight:"iod7fm94",minHeight:"o404977b",overflowX:"i44ccddp",overflowY:"ag5g9lrv",paddingTop:"fbgy3m38"};function f(e,t){const a=(0,i.useRef)(new Map),s=(0,i.useRef)(null),[f,p]=(0,i.useState)(0),m=t=>{const s=e.senders[t];if(s){var n;const e=s.id.toString(),t=a.current.get(e);null==t||null===(n=t.current)||void 0===n||n.focus()}},_=t=>(0,n.default)(t,0,e.senders.length-1),g=()=>{m(_(f))},v=()=>{var e;return(null===(e=s.current)||void 0===e?void 0:e.contains(document.activeElement))||!1};return(0,i.useImperativeHandle)(t,(()=>({focus:g,hasFocus:v}))),(0,i.useEffect)((()=>{p(0)}),[e.senders]),(0,c.jsx)(l.default,{onRef:e=>{s.current=e},className:(0,r.default)(h),flatListControllers:[e.flatListController],children:(0,c.jsx)(d.HotKeys,{role:"list",tabIndex:null,handlers:{up:e=>{e.preventDefault();const t=_(f-1);p(t),m(t)},down:e=>{const t=_(f+1);e.preventDefault(),p(t),m(t)}},children:(0,c.jsx)(o.FlatList,{flatListController:e.flatListController,direction:"vertical",defaultItemHeight:53,data:e.senders.map((e=>({itemKey:e.id.toString(),sender:e}))),renderItem:e=>{const t=(0,i.createRef)();return a.current.set(e.itemKey,t),(0,c.jsx)(u.default,{ref:t,reaction:e.sender},e.itemKey)},forceConsistentRenderCount:!1})})})}var p=(0,i.forwardRef)(f);t.default=p},3816:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(82729)),i=s(a(29521)),r=s(a(33856)),o=a(67294),l=s(a(56720)),d=s(a(40870)),u=a(70449),c=a(65417),h=s(a(30855)),f=a(29623),p=a(48846),m=a(55414),_=s(a(43725)),g=s(a(69995)),v=s(a(67112)),C=a(9157),S=(a(31592),a(57793)),y=s(a(43557)),b=s(a(59552)),E=a(96213),T=a(85893);const x={divider:{backgroundColor:"n45ix5k8",height:"kanlod6e"},emojiCount:{marginTop:"tt8xd2xn",marginEnd:"jnwc1y2a",marginBottom:"mpdn4nr2",marginStart:"svoq16ka",display:"l7jjieqr",height:"bvcnfjzh",fontSize:"bze30y65",lineHeight:"r5qsrrlp"},emoji:{color:"tviruh8d",marginEnd:"kjemk6od"},all:{color:"tviruh8d",marginEnd:"claouzo6"},count:{color:"pm5hny62",marginEnd:"cgpjrhzi"},buttonStyle:{width:"hj839x6e"}},M="_all_",P=(e,t)=>{var a,s,n;(null===(a=e.current)||void 0===a?void 0:a.hasFocus())?null===(s=t.current)||void 0===s||s.focus():null===(n=e.current)||void 0===n||n.focus()},A=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;const a=(0,r.default)(e,t,((e,t)=>e.isEqual(t))),s=(0,i.default)(t,e,((e,t)=>e.isEqual(t)));return a.concat(...s)};var I=function(e){const[t,a]=(0,o.useState)(0),[s,i]=(0,o.useState)(0),r=(0,b.default)((()=>new h.default)),I=(0,o.useRef)(null),w=(0,o.useRef)(null),k=(0,o.useRef)(null),j=(0,y.default)();(0,o.useEffect)((()=>{var e,t;i(null!==(e=null===(t=k.current)||void 0===t?void 0:t.clientHeight)&&void 0!==e?e:0)}),[]);const N=(e,t)=>{var a;const s=(0,S.getReactionAggregates)(e),i=[],r=[],o=[],l=(e,t)=>{const{reactionSenders:a,reactionAggregate:s}=e;if(a.length){const e=A(t,a);e.forEach((e=>{(0,S.isReactionByMe)(e.senderUserJid)?r.push(e):i.push(e)})),o.push({emoji:s,reactions:e})}};null==t||t.forEach((e=>{const t=(0,n.default)(s,(t=>t.reactionAggregate===e.emoji))[0];t&&l(t,e.reactions)})),s.forEach((e=>{l(e)}));const d=A(null!==(a=null==t?void 0:t[0].reactions)&&void 0!==a?a:[],i);return d.unshift(...r),d.length&&o.unshift({emoji:M,reactions:d}),o},[O,R]=(0,o.useState)(N(e.reactionsModels));if((0,E.useReactions)(e.msgIds,(e=>{var s;const n=j&&!!(null===(s=I.current)||void 0===s?void 0:s.hasFocus()),i=N(e,O);var r;(i.length<O.length&&a(Math.max(0,t-1)),R(i),n)&&(null===(r=I.current)||void 0===r||r.focus())})),(0,o.useEffect)((()=>{var t;0===O.length&&(null===(t=e.onEmpty)||void 0===t||t.call(e))}),[e,O]),0===O.length)return null;const D=O[t].reactions,L={};return s&&(L.height=s),(0,T.jsxs)(m.HotKeys,{handlers:{"shift+tab":e=>{e.preventDefault(),P(w,I)},tab:e=>{e.preventDefault(),P(w,I)}},tabIndex:null,children:[(0,T.jsx)(g.default,{ref:w,numItems:O.length,onItemClick:e=>{a(e),r.current.setScrollFromStart(0)},renderItem:e=>{const{emoji:t,reactions:a}=O[e];return(0,T.jsx)(f.FlexRow,{align:"center",justify:"center",children:(0,T.jsxs)(p.FlexItem,{children:[t===M?(0,T.jsx)("div",{className:(0,l.default)(x.emojiCount,x.all),children:(0,T.jsx)(c.EmojiText,{text:_.default.t(1133,{_plural:a.length})})}):(0,T.jsx)("div",{className:(0,l.default)(x.emojiCount,x.emoji,C.tabScale),children:(0,T.jsx)(c.EmojiText,{text:u.EmojiUtil.getNormalizedOrTofu(t)})}),(0,T.jsx)("div",{className:(0,l.default)(x.emojiCount,x.count),children:a.length})]})})},selectedIndex:t,className:d.default.reaction,buttonStyle:x.buttonStyle}),(0,T.jsx)("div",{className:(0,l.default)(x.divider)}),(0,T.jsx)(f.FlexColumn,{ref:k,style:L,children:(0,T.jsx)(v.default,{ref:I,senders:D,flatListController:r.current})})]})};t.default=I},9157:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.tabScale=t.ReactionEmoji=void 0;var n=s(a(56720)),i=a(70449),r=s(a(84636)),o=a(85893);const l={tofu:{color:"tviruh8d"},listScale:{transform:"hda1r0l0"},bubbleScale:{transform:"eipqoq80"},tabScale:{transform:"rbxsf3hm"}},d=l.tabScale;t.tabScale=d;t.ReactionEmoji=e=>{let{reaction:t,size:a,scale:s}=e;const d=i.EmojiUtil.normalizeEmojiFromString(t);return d?(0,o.jsx)(r.default,{className:(0,n.default)("list"===s&&l.listScale,"bubble"===s&&l.bubbleScale),size:a,emoji:d},"low-res"):(0,o.jsx)("span",{className:(0,n.default)(l.tofu),children:i.OPEN_BOX_CHAR})}},18366:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{reactions:t,reactionsAgregateCount:a,showReactionCounter:s}=e;const d=t.map(((e,a)=>(0,o.jsx)(i.FlexItem,{xstyle:[l.reactionItem,a!==t.length-1&&l.reactionItemSpacing],children:(0,o.jsx)(r.ReactionEmoji,{reaction:e,scale:"bubble"})},a))),u=s?(0,o.jsx)(i.FlexItem,{align:"center",children:(0,o.jsx)("span",{className:(0,n.default)(l.reactionCounter),children:a>999?"999+":a})},"reactionCounter"):null;return(0,o.jsxs)(i.FlexRow,{className:(0,n.default)(l.reactionContainer),align:"center",justify:"center",children:[d,u]})};var n=s(a(56720)),i=a(29623),r=a(9157),o=a(85893);const l={reactionContainer:{height:"qgpfrw6h",paddingTop:"i5tg98hk",paddingEnd:"abxuf49s",paddingBottom:"przvwfww",paddingStart:"mhcwslh8",borderTopStartRadius:"r18xjin9",borderTopEndRadius:"pz6oj2k2",borderBottomEndRadius:"sa2xs5zj",borderBottomStartRadius:"n58sa971",backgroundColor:"jht8oeb6",boxShadow:"fahkg6u0",borderTop:"hcpeg58q",borderEnd:"p6ubcsnv",borderBottom:"avd5zzxf",borderStart:"qqik71jn"},reactionItem:{textAlign:"qfejxiq4",fontSize:"enbbiyaj",lineHeight:"r5qsrrlp"},reactionItemSpacing:{marginEnd:"ojci89ib"},reactionCounter:{textAlign:"qfejxiq4",marginStart:"oz0g9ue8",color:"ce5kru2g"}}},52500:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(18446)),i=s(a(94184)),r=a(67294),o=s(a(56720)),l=s(a(69618)),d=a(60811),u=a(55414),c=s(a(43725)),h=a(74511),f=a(59871),p=s(a(3816)),m=a(76332),_=s(a(18366)),g=a(94270),v=a(57793),C=a(18644),S=s(a(24717)),y=a(96213),b=a(85893);const E={reactionBubbleContainer:{position:"g0rxnol2",bottom:"blj1rie1",zIndex:"px10qoeu",width:"ltyqj8pj",maxWidth:"n8sohn9f",height:"bmot90v7"},reactionBubbleLeft:{left:"qpocut9d",float:"kpdgp91a"},reactionBubbleRight:{right:"bfbxj8tr",float:"faxx4fbg"},reactionBubbleOverrideLeft:{left:"ptatjang",right:"gy96ms01"},reactionBubbleOverrideRight:{right:"ackpuwnh",left:"fe33t0ud"},reactionBubbleAlbumItemLeft:{position:"lhggkp7q",right:"ackpuwnh",bottom:"cogk65jn",left:"fe33t0ud"},reactionBubbleAlbumItemRight:{position:"lhggkp7q",left:"ptatjang",bottom:"cogk65jn",right:"gy96ms01"},reactionContainerRelative:{position:"g0rxnol2"},reactionEmptyContainer:{height:"bmot90v7"},reactionImagePosition:{bottom:"cvsrm5e1"}};function T(e){let{msgIds:t,isSentByMe:a,reactionBubbleType:s,reactionBubbleVisible:n=!0,hasReaction:T}=e;const[x,M]=(0,r.useState)(),{reactionArrayEmojis:P,numberOfSenderReactions:A,reactionsModels:I}=(0,y.useReactions)(t,(e=>{e.forEach((e=>{(0,m.markReactionsAsRead)(e.unreadSenders())})),s!==g.ReactionBubbleType.MEDIA_ITEM&&(0,v.lastMessageReactionChange)(t)}));let w=c.default.isRTL()?E.reactionBubbleRight:E.reactionBubbleLeft;a&&(w=c.default.isRTL()?E.reactionBubbleLeft:E.reactionBubbleRight);const k=c.default.isRTL()?E.reactionBubbleOverrideLeft:E.reactionBubbleOverrideRight,j=c.default.isRTL()?E.reactionBubbleAlbumItemRight:E.reactionBubbleAlbumItemLeft;if(0===A||!n)return null!=T&&!0===T?(0,b.jsx)("div",{className:(0,o.default)(E.reactionEmptyContainer)}):null;let N=null;if(1===t.length){const e=f.MsgCollection.get(t[0]);if(null!=e&&!(0,v.canHaveReactions)(e.type))return null;(null==e?void 0:e.type)===l.default.MSG_TYPE.IMAGE&&g.ReactionBubbleType.MEDIA_ITEM!==s&&(N=E.reactionImagePosition)}const O=()=>{M(null)},R=e=>{e.preventDefault(),e.stopPropagation();const s=(0,b.jsx)(p.default,{onEmpty:O,msgIds:t,reactionsModels:I});M({menu:s,dirY:d.DirY.BOTTOM,dirX:a?d.DirX.LEFT:d.DirX.RIGHT,type:"reaction_details_pane",anchor:e.target,flipOnRtl:!0})},D=(0,v.reactionBubbleAriaLabelString)(A,P);return(0,b.jsxs)("div",{className:(0,o.default)(E.reactionContainerRelative),children:[(0,b.jsx)(u.HotKeys,{onClick:R,onDoubleClick:e=>{e.preventDefault(),e.stopPropagation()},handlers:{enter:R,space:R},component:"button","aria-haspopup":!0,"aria-label":D,className:(0,i.default)((0,o.default)([E.reactionBubbleContainer,w,g.ReactionBubbleType.STICKER===s&&k,g.ReactionBubbleType.MEDIA_ITEM===s&&j,N]),h.LIST_FOCUSABLE_ITEM_CLASS_NAME),children:(0,b.jsx)(_.default,{reactions:P,reactionsAgregateCount:A,showReactionCounter:A>=2})}),x&&(0,b.jsx)(C.UIE,{displayName:"DetailsPane",escapable:!0,popable:!0,requestDismiss:O,children:(0,b.jsx)(S.default,{contextMenu:x})})]})}function x(e,t){return(0,n.default)(e,t)}var M=(0,r.memo)(T,x);t.default=M},6088:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{msgIds:t,onReactionChange:a}=e;return(0,s.useReactions)(t,a),null};var s=a(96213)},96213:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.useReactions=function(e,t){const[a,s]=(0,i.useState)([]),[c,h]=(0,i.useState)([]),[f,p]=(0,i.useState)(0),m=(0,d.default)(t),_=(0,u.default)(),g=(0,i.useCallback)((e=>{const t=(0,o.getReactionEmojisAndSum)(e);h(t.reactionArrayEmojis),p(t.numberOfSenderReactions),m(e)}),[m]),v=null==e?void 0:e.join("-");return(0,i.useEffect)((()=>{(0,n.default)((function*(){if(!e)return;const t=[],a=e.map((e=>r.ReactionsCollection.find(e).then((e=>{null!=e&&t.push(e)})).catch((e=>{__LOG__(3)`Could not get reactions for message: ${e}`}))));yield Promise.all(a),_.aborted||(s(t),g(t))}))()}),[v,g]),(0,l.useListeners)(a.map((e=>{let{reactions:t}=e;return{source:t,eventOrEvents:"add remove reset change:senders",callback:()=>g(a)}}))),{reactionArrayEmojis:c,numberOfSenderReactions:f,reactionsModels:a}};var n=s(a(48926)),i=a(67294),r=(a(31592),a(31464)),o=a(57793),l=a(19529),d=s(a(83800)),u=s(a(38080))},1662:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{msg:t}=e,a=(0,u.default)(n.ContactCollection,["add","remove","change:name"],(()=>(0,r.formatRevokedMsg)(t)));return(0,c.jsx)(d.default,{msg:t,displayAuthor:!t.isSentByMe&&t.isGroupMsg,children:(0,c.jsxs)(i.FlexRow,{children:[(0,c.jsx)(i.FlexItem,{xstyle:h.icon,children:(0,c.jsx)(l.default,{name:"recalled"})}),(0,c.jsx)(i.FlexItem,{children:(0,c.jsx)(o.default,{msg:t.unsafe(),theme:"placeholder",children:a})})]})})};s(a(56720)),s(a(69618));var n=a(19380),i=a(29623),r=a(47861),o=s(a(54703)),l=s(a(23217)),d=s(a(75618)),u=s(a(16704)),c=a(85893);const h={icon:{display:"l7jjieqr",marginEnd:"mw4yctpw",color:"a6r0u4sv",minWidth:"mhp1pqu9"}}},56060:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=s.Clock.durationStr(e.currentTime)+" / "+s.Clock.durationStr(e.duration);return(0,i.jsx)(n.SmoothRangeInput,{value:e.currentTime,valueText:t,min:0,max:e.duration,smallSkip:1,largeSkip:10,onChange:e.onSeek,onCommit:e.onCommit,disabled:e.disabled,theme:r(e)})};var s=a(22683),n=a(95739),i=a(85893);function r(e){let{outgoing:t,played:a}=e;return t?a?n.SmoothRangeInputTheme.AUDIO_OUTGOING_PLAYED:n.SmoothRangeInputTheme.AUDIO_OUTGOING_UNPLAYED:a?n.SmoothRangeInputTheme.AUDIO_INCOMING_PLAYED:n.SmoothRangeInputTheme.AUDIO_INCOMING_UNPLAYED}},86123:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const a=(0,c.useModelValues)(e.msg,["rtl","dir","isGroupMsg","isPSA","isSentByMe","senderObj","paymentNoteMsg"]),s=null===(t=a.paymentNoteMsg)||void 0===t?void 0:t.body;let f,p=null;if(s){const e=(0,n.Conversation)({mentions:a.mentionMap(),links:a.getLinks(),trusted:a.isTrusted()});p=(0,h.jsx)("div",{className:u.default.caption,children:(0,h.jsx)(l.default,{msg:a.unsafe(),children:(0,h.jsx)(i.EmojiText,{text:s,selectable:!0,formatters:e,dirMismatch:a.rtl!==r.default.isRTL(),direction:a.dir})})})}else f=(0,h.jsx)("div",{className:u.default.meta,children:(0,h.jsx)(d.Meta,{msg:a})});return(0,h.jsxs)(o.default,{displayAuthor:e.displayAuthor,displayType:e.displayType,hasCaption:!!p,msg:a,quotedMsg:e.quotedMsg,hideMeta:!s,children:[e.paymentInfo,f,p]})};var n=a(10233),i=(s(a(69618)),a(65417)),r=s(a(43725)),o=s(a(1238)),l=s(a(54703)),d=a(42316),u=s(a(18041)),c=a(49082),h=a(85893)},95739:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.SmoothRangeInput=function(e){const{value:t,valueText:a,min:s,max:c,smallSkip:h,largeSkip:f,onChange:p,onCommit:m,disabled:_,theme:g}=e,[v,C]=(0,r.useState)(null),S=(0,r.useCallback)((e=>{C(e),null==p||p(e)}),[C,p]),y=(0,r.useCallback)((e=>{C(null),null==m||m(e)}),[C,m]),b=null!=v?v:t,E=100*(0,n.default)((b-s)/(c-s),0,1),T=(0,i.default)(l.default.container,function(e){switch(e){case u.AUDIO_OUTGOING_UNPLAYED:return l.default.containerOutgoingUnplayed;case u.AUDIO_OUTGOING_PLAYED:return l.default.containerOutgoingPlayed;case u.AUDIO_INCOMING_UNPLAYED:return l.default.containerIncomingUnplayed;case u.AUDIO_INCOMING_PLAYED:return l.default.containerIncomingPlayed}}(g),{[l.default.containerDisabled]:_});return(0,d.jsx)(o.default,{value:t,valueText:a,min:0,max:c,smallSkip:h,largeSkip:f,onChange:S,onCommit:y,disabled:_,children:(0,d.jsxs)("div",{className:T,children:[(0,d.jsx)("div",{className:l.default.track}),(0,d.jsx)("span",{className:l.default.progress,style:{width:`${E}%`}}),(0,d.jsx)("div",{className:l.default.thumbTravelContainer,children:(0,d.jsx)("div",{className:l.default.thumbContainer,style:{transform:`translateX(${E}%)`},children:(0,d.jsx)("div",{className:l.default.thumb})})})]})})},t.SmoothRangeInputTheme=void 0;var n=s(a(74691)),i=s(a(94184)),r=a(67294),o=s(a(46239)),l=s(a(97103)),d=a(85893);const u=a(54302).Mirrored(["AUDIO_OUTGOING_UNPLAYED","AUDIO_OUTGOING_PLAYED","AUDIO_INCOMING_UNPLAYED","AUDIO_INCOMING_PLAYED"]);t.SmoothRangeInputTheme=u},21595:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{className:t,xstyle:a,children:s}=e,u=(0,l.useOptionalModelValues)(e.msg,["broadcast","isEphemeral","isSentByMe","labels","star"]);if(!u)return __LOG__(4,void 0,new Error,!0)`Missing msg model for SpacerText component`,SEND_LOGS("missing-msg-model"),(0,d.jsx)(d.Fragment,{children:s});const c=[u.broadcast,u.isSentByMe,u.labels&&u.labels.length>0&&(0,r.canDisplayLabel)(),u.star].filter(Boolean).length,h=[o.default.icons1,o.default.icons2,o.default.icons3,o.default.icons4],f=c>0?h[c-1]:"";return(0,d.jsxs)("span",{className:(0,n.default)(t,(0,i.default)(a)),children:[s,(0,d.jsx)("span",{className:(0,n.default)(o.default.spacer,f)})]})};var n=s(a(94184)),i=s(a(56720)),r=a(57701),o=s(a(57155)),l=a(49082),d=a(85893)},35563:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(45095)),i=s(a(52013)),r=a(67294),o=a(22683),l=s(a(69618)),d=a(19380),u=a(88984),c=a(32303),h=a(65417),f=s(a(23296)),p=a(55414),m=s(a(43725)),_=a(87931),g=s(a(27238)),v=s(a(23217)),C=a(19529),S=s(a(39938)),y=a(58827),b=a(85893);function E(e,t){const{msg:a,selectedMessages:s,displayType:E,currSelection:T,activeSelection:x,onClickMsg:M}=e,P=(0,r.useRef)(null),A=(0,r.useRef)(null),I=(0,r.useRef)(null),[w,k]=(0,r.useState)(!1),[j,N]=(0,r.useState)((()=>!!T&&T.value===a)),[O,R]=(0,r.useState)((()=>!!x&&x.value===a)),[D,L]=(0,r.useState)(!1);(0,C.useListener)(T,a.id.toString(),((e,t)=>{const a="focus"===e;if(a){const e=I.current;e&&(i.default.focus(e),t&&(0,c.scrollIntoViewIfNeeded)(e))}N(a)})),(0,C.useListener)(x,a.id.toString(),((e,t)=>{if("focus"===e){const e=I.current;e&&(i.default.focus(e),t&&(0,c.scrollIntoViewIfNeeded)(e))}R(!!e)}));const B=()=>P.current,F=()=>(0,n.default)(I.current,"hotKeysRef.current");(0,r.useImperativeHandle)(t,(()=>({getContainerElement:F,getWrapperRef:B})));const G=a.senderObj.formattedName,U=a.chat.isUser?d.ContactCollection.assertGet(a.to).formattedName?d.ContactCollection.assertGet(a.to).formattedName:(0,S.default)(a.to):a.chat.title(),V=E===l.default.DISP_TYPE.GALLERY?null:(0,b.jsxs)("div",{className:g.default.title,children:[(0,b.jsxs)("div",{className:g.default.titleMain,children:[(0,b.jsx)("div",{className:g.default.avatar,children:(0,b.jsx)(u.DetailImage,{id:a.senderObj.id,size:26})}),(0,b.jsx)(h.EmojiText,{className:g.default.author,text:G,direction:"auto",titlify:!0}),(0,b.jsx)("span",{className:g.default.divider}),(0,b.jsx)(h.EmojiText,{className:g.default.chat,text:U,direction:"auto",titlify:!0})]}),(0,b.jsx)("div",{className:g.default.meta,dir:"auto",children:o.Clock.relativeStr(a.t)}),(0,b.jsx)("div",{className:g.default.chevron,children:(0,b.jsx)(v.default,{name:"chevron-right-alt",directional:!0})})]}),H={enter:e=>{e.stopPropagation(),e.preventDefault(),null==M||M(a)}};H[m.default.LR("right","left")]=()=>{var e;null===(e=P.current)||void 0===e||e.openContextMenu()};const K=e.selectable||w&&E===l.default.DISP_TYPE.GALLERY;return(0,b.jsx)(p.HotKeys,{onRef:e=>{I.current=e},handlers:H,onFocus:()=>{var e;L(!0),null===(e=A.current)||void 0===e||e.indicateFocus()},onBlur:()=>{L(!1)},children:(0,b.jsxs)(f.default,{ref:A,hover:w,current:j&&D,active:O,onClick:()=>e.onClickMsg&&e.onClickMsg(a,s&&!s.isSelected(a)),onMouseEnter:w?null:()=>{w||k(!0)},onMouseOver:w?null:()=>{w||k(!0)},onMouseLeave:w?()=>{w&&k(!1)}:null,children:[V,(0,b.jsx)(y.Wrapper,{msg:a,ref:P,current:j&&D,displayType:E||l.default.DISP_TYPE.STARRED_MSGS,isMsgVisible:e.isMsgVisible,selectable:K,selectedMessages:s,onMessageSelect:e.onMessageSelect,position:_.MsgPosition.END,tailOverride:"left",onProductClick:e.onProductClick,onMessageClick:e.onMessageClick},a.id.toString())]})})}var T=(0,r.forwardRef)(E);t.default=T},24871:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{msg:t}=e;const{ack:a,isMedia:s,isViewOnce:h,caption:f,type:p,loc:m,isLive:_}=(0,d.useModelValues)(t,["ack","isMedia","isViewOnce","caption","type","loc","isLive"]),g=s&&!f&&!h&&p!==c.AUDIO||p===c.LOCATION&&!m&&!_;let v,C,S;a<r.default.ACK.SENT?(v="msg-time",C=i.default._("Pending",null,{hk:"3rTXIk"})):a===r.default.ACK.SENT?(v="msg-check",C=i.default._("Sent",null,{hk:"xgkjk"})):a===r.default.ACK.RECEIVED?(v="msg-dblcheck",C=i.default._("Delivered",null,{hk:"2VFqLn"})):(v="msg-dblcheck",C=i.default._("Read",null,{hk:"45eIFk"}),S=o.default.ackBlue);return(0,u.jsx)(l.default,{"aria-label":` ${C.toString()} `,name:v,className:(0,n.default)(S,{[o.default.light]:g})})};var n=s(a(94184)),i=s(a(48360)),r=s(a(69618)),o=s(a(54669)),l=s(a(23217)),d=a(49082),u=a(85893);const c=r.default.MSG_TYPE},1539:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,b.useModelValues)(e.msg,["id","isNewMsg","isSentByMe","isGroupMsg","senderObj","quotedMsg","ctwaContext","hasReaction"]);let a;(0,i.useEffect)((()=>{t.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:m.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1})}),[]),c.GK.supportsFeature(c.GK.F.STICKER_MEDIA_VIEWER)&&(a=a=>{a.stopPropagation(),o.Cmd.mediaViewerModal({msg:(0,v.unproxy)(t.unsafe()),getZoomNode:()=>{var t,a;return null===(t=e.forwardRef)||void 0===t||null===(a=t.current)||void 0===a?void 0:a.getImgNode()}})});const s=e.displayAuthor?(0,E.jsx)("div",{className:S.default.author,children:(0,E.jsx)(r.default,{msg:t,contact:t.senderObj})}):null,T=e.quotedMsg?(0,E.jsx)("div",{className:S.default.quote,children:e.quotedMsg}):null,x=(0,n.default)(S.default.bubble,{[S.default.hasAuthor]:e.displayAuthor,[S.default.isFirst]:e.position===f.MsgPosition.FRONT||e.position===f.MsgPosition.SINGLE,[S.default.isTransparent]:!t.quotedMsg&&!t.ctwaContext});let M=null;(0,h.receiveReactionsEnabled)()&&!e.quotedMsg&&e.displayType===l.default.DISP_TYPE.CONVERSATION&&(M=(0,E.jsx)("div",{className:S.default.reactionBubbleContainer,children:(0,E.jsx)(_.default,{msgIds:[t.id.toString()],isSentByMe:t.isSentByMe,reactionBubbleType:g.ReactionBubbleType.STICKER,hasReaction:t.hasReaction})}));return(0,E.jsxs)("div",{className:x,onClick:e=>{e.stopPropagation()},children:[s,T,(0,E.jsx)(d.default,{msg:t.unsafe(),wrapperClass:S.default.ctwaContext}),(0,E.jsxs)("div",{className:S.default.body,children:[(0,E.jsx)(y.default,{mediaData:e.mediaData,msg:t,children:(0,E.jsx)(C.default,{ref:e.forwardRef,mediaData:e.mediaData,theme:"conversation",isNewMsg:t.isNewMsg,downloadMedia:()=>t.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:m.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1}),animateOnView:e.animateOnView,onClick:a})}),(0,E.jsxs)(u.FlexColumn,{children:[(0,E.jsx)("div",{className:S.default.meta,children:(0,E.jsx)(p.Meta,{msg:t})}),M]})]})]})};var n=s(a(94184)),i=a(67294),r=s(a(72655)),o=a(88102),l=s(a(69618)),d=s(a(11740)),u=a(29623),c=a(7293),h=a(57701),f=a(87931),p=a(42316),m=s(a(11339)),_=s(a(52500)),g=a(94270),v=a(31019),C=s(a(12064)),S=s(a(56734)),y=s(a(67014)),b=a(49082),E=a(85893)},67014:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{msg:t}=e,a=(0,h.useModelValues)(e.mediaData,["mediaStage","size"]),s=()=>{o.Cmd.openModal((0,f.jsx)(l.default,{msg:t.unsafe()}))},n=()=>{t.forceDownloadMediaEvenIfExpensive()},m=()=>{t.cancelDownload()},_=()=>{t.cancelUpload()},g=()=>{t.resumeUpload()},v=()=>{t.resumeRemoteUpload()};let C,S;const{mediaStage:y}=a;switch(y){case u.MEDIA_DATA_STAGE.RESOLVED:C=null,S=null;break;case u.MEDIA_DATA_STAGE.FETCHING:C=m,S=(0,f.jsx)(d.Pending,{cancelable:!0});break;case u.MEDIA_DATA_STAGE.NEED_POKE:C=n,S=(0,f.jsx)(d.Download,{filesize:a.size});break;case u.MEDIA_DATA_STAGE.UPLOADING:C=_,S=(0,f.jsx)(d.Pending,{cancelable:!0});break;case u.MEDIA_DATA_STAGE.NEED_UPLOAD:C=g,S=(0,f.jsx)(d.Upload,{filesize:a.size});break;case u.MEDIA_DATA_STAGE.REMOTE_NEED_UPLOAD:C=v,S=(0,f.jsx)(d.Upload,{filesize:a.size});break;case u.MEDIA_DATA_STAGE.ERROR_MISSING:C=s,S=(0,f.jsx)(d.Upload,{filesize:a.size});break;case u.MEDIA_DATA_STAGE.ERROR_UNSUPPORTED:C=s,S=(0,f.jsx)(d.Download,{filesize:a.size});break;case u.MEDIA_DATA_STAGE.SENDING:case u.MEDIA_DATA_STAGE.DECRYPTING:case u.MEDIA_DATA_STAGE.ERROR_TOO_LARGE:case u.MEDIA_DATA_STAGE.INIT:case u.MEDIA_DATA_STAGE.PREPARING:case u.MEDIA_DATA_STAGE.REMOTE_UPLOADING:case u.MEDIA_DATA_STAGE.REUPLOADING:case u.MEDIA_DATA_STAGE.EXISTS:S=(0,f.jsx)(d.Pending,{});break;case u.MEDIA_DATA_STAGE.ERROR_FILE_NOT_READABLE:case u.MEDIA_DATA_STAGE.PROGRESSIVE_READY:throw new Error(`invalid value for sticker mediaStage '${y}'`)}return(0,f.jsxs)("div",{className:(0,i.default)((0,r.default)(p),c.default.container),onClick:C,children:[S,e.children]})};var i=n(a(94184)),r=n(a(56720)),o=a(88102),l=n(a(20668)),d=s(a(41124)),u=a(58668),c=n(a(86542)),h=a(49082),f=a(85893);const p={alignItems:"gndfcl4n",borderTopStartRadius:"l8fojup5",borderTopEndRadius:"paxyh2gw",borderBottomEndRadius:"sfeitywo",borderBottomStartRadius:"cqsf3vkf",cursor:"ajgl1lbb",display:"p357zi0d",justifyContent:"ac2vgrno",maxWidth:"laorhtua",overflowX:"gfz4du6o",overflowY:"r7fjleex",position:"g0rxnol2"}},39812:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(67294),i=a(65417),r=s(a(11706)),o=s(a(41956)),l=a(58827),d=a(85893);function u(e,t){let a;const[s,u]=(0,n.useState)(void 0),[c,h]=(0,n.useState)(!0),f=e=>{u(e)},p=e=>{h(e)};return(0,n.useImperativeHandle)(t,(()=>({updateDateMarkerText:f,setVisibility:p}))),s&&c&&(a=(0,d.jsx)("div",{className:r.default.sticky,children:(0,d.jsx)(l.SystemBubble,{theme:"sticky",children:(0,d.jsx)(i.EmojiText,{direction:"auto",text:s})})})),(0,d.jsx)(o.default,{transitionName:"slide-down-date",children:a})}var c=(0,n.forwardRef)(u);t.default=c},2284:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let t,a,s,j,N,{msg:O,displayAuthor:R,trusted:D,displayType:L,quotedMsg:B}=e;if(D&&(O.linkPreview||O.ctwaContext)){const e=(0,x.default)(O);if(O.ctwaContext)t=(0,k.jsx)(c.default,{msg:O.unsafe(),wrapperClass:A.default.linkPreview});else if(e)t=(0,k.jsx)("div",{className:A.default.linkPreview,children:(0,k.jsx)(w.default,{msg:O.unsafe()})});else{const e=(0,T.parseAPICmd)(O.matchedText);if(e.resultType===i.APICmd.GROUP_INVITE){if(t=(0,k.jsx)("div",{className:A.default.linkPreview,children:(0,k.jsx)(v.default,{msg:O.unsafe(),displayType:L,invite:!0})}),L!==u.default.DISP_TYPE.GALLERY){const e=O.isSentByMe?g.default.t(565):g.default.t(531);a=(0,k.jsx)(r.default,{items:[{label:e,onClick:()=>{const e=O.matchedText;(0,m.openExternalLink)(e)}}]})}}else if(e.resultType===i.APICmd.CATALOG){if(t=(0,k.jsx)("div",{className:A.default.linkPreview,children:(0,k.jsx)(l.default,{msg:O.unsafe()})}),L!==u.default.DISP_TYPE.GALLERY){const e=g.default.t(1074);a=(0,k.jsx)(r.default,{items:[{label:e,onClick:()=>{const e=O.matchedText;(0,m.openExternalLink)(e)}}]})}}else{const e=O.asUrl;if(e){let a;if((0,C.displayHighQualityLinkPreview)(O.unsafe(),L)&&null!=e.thumbnailHeight&&null!=e.thumbnailWidth){const t=e.thumbnailHeight/e.thumbnailWidth;s=t>=1?"portrait":"landscape",a="high-quality"}t=(0,k.jsx)("div",{className:A.default.linkPreview,children:(0,k.jsx)(v.default,{msg:O.unsafe(),displayType:L,theme:a})})}}}}const F=h.EmojiUtil.matchLargeEmojiPattern(O.body);if(F){const e=1===F.length&&h.EmojiUtil.getHeartEmojis().some((e=>h.EmojiUtil.normalizeEmoji(e)===h.EmojiUtil.normalizeEmoji(F[0])));j=(0,k.jsx)(E.default,{animation:e,emojis:F}),N=!0}else{const e=!0;j=(0,k.jsx)(p.default,{text:O.body,textLimit:O.initialPageSize,children:t=>{let{textLimit:a}=t;const s=(0,d.Conversation)({mentions:O.mentionMap(),links:O.getLinks(a),selectable:e,trusted:!0===D});return(0,k.jsx)(f.EmojiText,{text:O.body,className:L===u.default.DISP_TYPE.GALLERY?"message-text-link":"",dirMismatch:O.rtl!==g.default.isRTL(),direction:O.dir,inferLinesDirection:!0,formatters:s,selectable:e,textLimit:a})}})}let G,U;if(O.supportsMessageFooter){const{formatters:e,selectable:t}=O.isDynamicReplyButtonsMsg?(0,_.enableHeaderAndFooterFormatting)(O.getHeaderLinks(),!0===D):{};G=O.title?(0,k.jsx)("div",{className:A.default.title,children:(0,k.jsx)(f.EmojiText,{text:O.title,dirMismatch:O.rtl!==g.default.isRTL(),direction:O.dir,selectable:t,formatters:e})}):null,U=(0,k.jsx)(P.default,{dir:O.dir,footer:O.footer,isShown:O.supportsMessageFooter,msg:O.unsafe(),rtl:O.rtl,trusted:D,type:O.type})}const V=L!==u.default.DISP_TYPE.GALLERY&&!O.isPSA&&!N;let H;B&&(H=(0,k.jsx)("div",{className:A.default.quote,children:B}));const K=(0,b.showForwarded)(O),q=O.getSuspiciousLinks().length>0,W=!!a||!!O.hasTemplateButtons||!!O.isDynamicReplyButtonsMsg;let Y;W&&(Y=(0,k.jsx)("div",{className:A.default.meta,children:(0,k.jsx)(y.Meta,{msg:O})}));return(0,k.jsx)(I.default,{msg:O,displayType:L,displayAuthor:R,hideMeta:W,theme:s,children:(0,k.jsxs)(o.default,{className:(0,n.default)({[A.default.hasAuthor]:R,[A.default.forwarded]:K,[A.default.hasSuspiciousLinks]:q}),contact:O.senderObj,msg:O.unsafe(),children:[H,!O.ctwaContext&&(0,k.jsx)(M.SuspiciousLabel,{msg:O.unsafe(),displayType:L}),t,(0,k.jsxs)(S.default,{msg:O.unsafe(),spacer:O.isFromTemplate||O.isDynamicReplyButtonsMsg?V&&!O.footer:V,"data-id":O.id,children:[G,j,U,Y]}),a]})})};var n=s(a(94184)),i=a(88711),r=s(a(58286)),o=s(a(85559)),l=s(a(18941)),d=a(10233),u=s(a(69618)),c=s(a(11740)),h=a(70449),f=a(65417),p=s(a(17080)),m=a(12591),_=a(38649),g=s(a(43725)),v=s(a(36588)),C=a(32554),S=s(a(54703)),y=a(42316),b=a(63132),E=s(a(68272)),T=a(7111),x=s(a(77807)),M=a(7538),P=s(a(95839)),A=s(a(79901)),I=s(a(75618)),w=s(a(85476)),k=a(85893)},75618:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,n.default)(u.default.bubble,{[u.default.isPSA]:e.msg.isPSA,[u.default.portrait]:"portrait"===e.theme,[u.default.landscape]:"landscape"===e.theme}),a=!1!==e.displayAuthor&&(!e.msg.isSentByMe&&e.msg.isGroupMsg)?(0,c.jsx)(i.default,{msg:e.msg,contact:e.msg.senderObj}):null,s=(0,d.showForwarded)(e.msg)?(0,c.jsx)(o.default,{msg:e.msg.unsafe()}):null,h=e.displayType===r.default.DISP_TYPE.GALLERY||e.hideMeta?null:(0,c.jsx)("div",{className:u.default.meta,children:(0,c.jsx)(l.Meta,{msg:e.msg})});return(0,c.jsxs)("div",{className:t,children:[a,s,e.children,h]})};var n=s(a(94184)),i=s(a(72655)),r=s(a(69618)),o=s(a(14703)),l=a(42316),d=a(63132),u=s(a(14390)),c=a(85893)},2749:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return(0,i.jsx)("div",{className:n.default.shade})};var n=s(a(25861)),i=a(85893)},29565:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DisplayTheme=void 0;const s=a(54302).Mirrored(["Album"]);t.DisplayTheme=s},35953:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(94184)),i=s(a(43725)),r=a(74511),o=s(a(81661)),l=a(85893);t.default=e=>{let{count:t,textContainerRef:a}=e;const s=i.default.t(1370,{count:i.default.n(t),_plural:t});return(0,l.jsx)("div",{className:(0,n.default)(o.default.msgUnread,r.LIST_FOCUSABLE_ITEM_CLASS_NAME),ref:a,tabIndex:-1,children:(0,l.jsx)("span",{className:o.default.msgUnreadBody,"aria-live":"polite",children:s})})}},83236:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{msg:t,displayAuthor:a,displayType:s,hideUpdateButton:n=!1}=e;return(0,p.jsx)(c.default,{msg:t,displayAuthor:a,children:(0,p.jsxs)(u.default,{iconName:"unknown",msg:t.unsafe(),children:[(0,o.default)(t.unsafe())," ",n?null:(0,p.jsx)(g,{msg:t})]})})};var n=s(a(56720)),i=a(41629),r=a(88102),o=(s(a(69618)),s(a(89422))),l=a(7293),d=s(a(43725)),u=s(a(99422)),c=s(a(75618)),h=a(50452),f=a(29898),p=a(85893);const m={color:"seuajalt"};function _(){r.Cmd.openToast((0,p.jsx)(h.Toast,{msg:d.default.t(1397),id:(0,h.genId)()})),f.Updater.update().then((e=>{e===i.DownloadState.UPDATE_NOT_AVAILABLE?(__LOG__(3)`Got unsupported message but no newer release found`,r.Cmd.openToast((0,p.jsx)(h.Toast,{msg:d.default.t(958),id:(0,h.genId)()}))):e===i.DownloadState.UPDATE_DOWNLOADED?f.Updater.restart():__LOG__(3)`Got unsupported message but updater errored`}))}function g(e){let{msg:t}=e;return l.GK.supportsFeature(l.GK.F.MD_BACKEND)&&"fanout"===t.subtype?null:t.isSentByMe||!t.subtype?(0,p.jsx)("span",{className:(0,n.default)(m),role:"button",onClick:_,children:d.default.t(1385)}):null}window.updater=f.Updater},93137:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(81109)),i=s(a(39138)),r=s(a(99964)),o=s(a(94184)),l=s(a(48360)),d=a(67294),u=a(40936),c=s(a(72655)),h=s(a(58286)),f=s(a(85559)),p=a(88102),m=s(a(52665)),_=s(a(69618)),g=a(19380),v=s(a(4317)),C=s(a(11740)),S=a(65417),y=a(77811),b=a(50101),E=a(5124),T=s(a(43725)),x=a(56057),M=s(a(20668)),P=a(58668),A=a(42316),I=s(a(11339)),w=s(a(87543)),k=a(82039),j=a(48870),N=s(a(65932)),O=a(31019),R=s(a(38932)),D=s(a(23217)),L=a(89618),B=s(a(39029)),F=a(78521),G=s(a(21915)),U=a(85893);class V extends d.Component{constructor(){super(...arguments),this.handleMessageClick=e=>{const{vcard:t}=this.props;if(!t)return;const a=(0,F.vcardWids)(t),s=(0,F.vcardIsBiz)(t);a.length>1?p.Cmd.openModal((0,U.jsx)(G.default,{icon:(0,U.jsx)(D.default,{name:"chat",className:B.default.icon,directional:!0}),vcard:t,onCancel:()=>p.Cmd.closeModal(),onSelect:t=>this.openContactChat(t,e,s)})):a.length>0&&this.openContactChat(a[0],e,s)},this.openContactChat=(e,t,s)=>{const n=s&&t;n&&(0,x.qplStartProfileView)("VCard"),(0,b.findChat)(e,s).then((e=>{this.props.onMessageClick&&this.props.onMessageClick(),p.Cmd.closeModal(),p.Cmd.openChatFromUnread(e).then((s=>{if(s){if(t){const{InfoFlowLoadable:t}=a(23831);p.Cmd.openDrawerRight((0,U.jsx)(t,{chat:e,profileEntryPoint:I.default.PROFILE_ENTRY_POINT.CONTACT_CARD},`info-${e.id.toString()}`),"slide-left",L.UIM.Manager.top)}p.Cmd.focusChatTextInput(e)}else n&&(0,x.qplEndProfileView)(j.QuickLogActionType.FAIL)})).catch((()=>{n&&(0,x.qplEndProfileView)(j.QuickLogActionType.FAIL)}))})).catch((()=>{n&&(0,x.qplEndProfileView)(j.QuickLogActionType.FAIL)}))},this.handleViewContact=()=>{const{msg:e,vcard:t}=this.props;t?p.Cmd.openModal((0,U.jsx)(v.default,{vcard:t})):p.Cmd.openModal((0,U.jsx)(m.default,{onCancel:()=>p.Cmd.closeModal(),onOK:()=>{p.Cmd.closeModal(),y.FileSaver.initDownload((0,O.unproxy)(e.unsafe()))},okText:T.default.t(1568),cancelText:T.default.t(1574),title:l.default._("Download contact?",null,{hk:"THELh"}),children:l.default._("This contact can't be displayed in WhatsApp Web. Download it to open it with another app on your computer?",null,{hk:"3Ii3sv"})}))},this._handleAddToGroupClick=()=>{const e=(0,F.vcardWids)(this.props.vcard),{vcard:t}=this.props;e.length>1&&t?p.Cmd.openModal((0,U.jsx)(G.default,{icon:(0,U.jsx)(D.default,{name:"add-user",directional:!0}),vcard:t,onCancel:()=>p.Cmd.closeModal(),onSelect:this._addContactToGroup})):e.length>0&&this._addContactToGroup(e[0])},this._showMediaMissing=()=>{p.Cmd.openModal((0,U.jsx)(M.default,{msg:this.props.msg.unsafe()}))},this._getBubbleActionItems=(e,t)=>{const a={label:T.default.t(823),onClick:()=>this.handleMessageClick(!1),title:e?T.default.t(826,{author:e}):T.default.t(823)};if(t){return[a,{label:T.default.t(1434),onClick:()=>this.handleMessageClick(!0)}]}return[a,{label:T.default.t(147),onClick:this._handleAddToGroupClick}]}}_addContactToGroup(e){g.ContactCollection.find(e).then((e=>{p.Cmd.openModal((0,U.jsx)(u.AddContactToGroupFlowLoadable,{contact:e,pushTransition:"none",popTransition:"none"}),{transition:"modal-flow"})}))}render(){const{downloadMedia:e,mediaStage:t,msg:a,vcard:s}=this.props;let l,d,u;if(s){l=(0,F.vcardWids)(s);const e=a.type===_.default.MSG_TYPE.VCARD?a.vcardFormattedName:null;d=(0,i.default)(e||(0,F.vcardGetNameFromParsed)(s)||T.default.t(157),{length:120,omission:T.default.t(1124)}),l.length>0&&(u=(0,U.jsx)(h.default,{items:this._getBubbleActionItems(d,(0,F.vcardIsBiz)(s))}))}const p=this.props.displayAuthor?(0,U.jsx)("div",{className:B.default.author,children:(0,U.jsx)(c.default,{msg:a,contact:a.senderObj})}):null,m=this.props.quotedMsg?(0,U.jsx)("div",{className:B.default.quote,children:this.props.quotedMsg}):null,g=(0,o.default)(B.default.bubble,{[B.default.hasAuthor]:p,[B.default.hasQuote]:m,[B.default.isPreview]:this.props.displayType===_.default.DISP_TYPE.MSG_INFO,[B.default.isGallery]:this.props.displayType===_.default.DISP_TYPE.STARRED_MSGS||this.props.displayType===_.default.DISP_TYPE.CONTACT_CARD||this.props.displayType===_.default.DISP_TYPE.GALLERY}),v=a.type===_.default.MSG_TYPE.DOCUMENT&&a.isVcardOverMmsDocument&&t===P.MEDIA_DATA_STAGE.ERROR_MISSING,y=v||!this.props.placeholder&&(s||a.chat.isTrusted()),b=y?v?this._showMediaMissing:this.handleViewContact:()=>{},x=E.Configuration.Compatibility({selectable:true}),M=this.props.placeholder?(0,U.jsx)(H,{downloadMedia:e,mediaStage:t}):(0,U.jsx)(w.default,{size:49,thumb:(0,F.vcardThumbnail)(s),wid:k.ProfilePicThumbCollection.getThumbnailWidFromVcard(s)}),I=this.props.placeholder?(0,U.jsx)(K,{mediaStage:t}):(0,U.jsx)(S.EmojiText,{text:d,element:"div",className:B.default.name,selectable:true,dirMismatch:a.rtl!==T.default.isRTL(),direction:a.dir,formatters:x});return this.props.placeholder&&(u=t===P.MEDIA_DATA_STAGE.ERROR_MISSING?(0,U.jsx)(h.default,{items:this._getBubbleActionItems().map((e=>(0,n.default)((0,n.default)({},e),{},{onClick:this._showMediaMissing})))}):(0,U.jsx)(h.default,{items:[],placeholder:!0})),(0,U.jsxs)(f.default,{className:g,contact:a.senderObj,msg:a.unsafe(),children:[p,m,(0,U.jsx)(C.default,{msg:a.unsafe(),wrapperClass:B.default.ctwaContext}),(0,U.jsxs)("div",{className:B.default.vcard,"data-a8n":r.default.key("vcard-msg"),role:y?"button":null,onClick:b,children:[(0,U.jsx)("div",{className:B.default.avatar,children:M}),(0,U.jsx)("div",{className:B.default.body,children:I}),(0,U.jsx)("div",{className:B.default.meta,children:(0,U.jsx)(A.Meta,{msg:a})})]}),u]})}}function H(e){const{downloadMedia:t,mediaStage:a}=e;if(!a)return(0,U.jsx)(W,{downloadMedia:t});switch(a){case P.MEDIA_DATA_STAGE.NEED_POKE:case P.MEDIA_DATA_STAGE.INIT:return(0,U.jsx)(W,{downloadMedia:t});case P.MEDIA_DATA_STAGE.FETCHING:case P.MEDIA_DATA_STAGE.REUPLOADING:case P.MEDIA_DATA_STAGE.DECRYPTING:return(0,U.jsx)(q,{animate:!0,type:"profileImage"});case P.MEDIA_DATA_STAGE.RESOLVED:return(0,U.jsx)(q,{type:"profileImage"});case P.MEDIA_DATA_STAGE.ERROR_MISSING:return(0,U.jsx)(W,{downloadMedia:()=>{}});default:return(0,U.jsx)(q,{animate:!0,type:"profileImage"})}}function K(e){const{mediaStage:t}=e;if(!t)return(0,U.jsx)(q,{type:"body"});switch(t){case P.MEDIA_DATA_STAGE.NEED_POKE:case P.MEDIA_DATA_STAGE.INIT:return(0,U.jsx)(q,{type:"body"});case P.MEDIA_DATA_STAGE.FETCHING:case P.MEDIA_DATA_STAGE.REUPLOADING:case P.MEDIA_DATA_STAGE.DECRYPTING:return(0,U.jsx)(q,{animate:!0,type:"body"});case P.MEDIA_DATA_STAGE.RESOLVED:case P.MEDIA_DATA_STAGE.ERROR_MISSING:default:return(0,U.jsx)(q,{type:"body"})}}function q(e){const{animate:t,type:a}=e,s=[B.default.placeholder,"profileImage"===a?B.default.placeholderImage:B.default.placeholderText,t?B.default.placeholderAnimation:null].filter(Boolean);return(0,U.jsx)("div",{className:(0,o.default)(s)})}function W(e){const{downloadMedia:t}=e;return(0,U.jsx)(R.default,{"aria-label":T.default.t(1568),name:"audio-download",className:B.default.vcardDownloadStageIcon,onClick:()=>{t&&t()}})}V.CONCERNS={msg:["vcardFormattedName","rtl","dir","isSentByMe","isGroupMsg","senderObj","chat","isVcardOverMmsDocument","type"]},V.displayName="Vcard";var Y=(0,N.default)(V,V.CONCERNS);t.default=Y},98723:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const{displayAuthor:a,displayType:s,onMessageClick:p,msg:m}=e,_=(0,u.useModelValues)(e.mediaData,["mediaBlob","mediaStage","parsedVcards","size"]),g=()=>{m.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:o.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1})};(0,n.useEffect)((()=>{m.isTrusted()&&_.size<=1024*d.ServerProps.mmsVcardAutodownloadSizeKb&&g()}),[]);const v=(0,r.default)((e=>{let{parsedVcards:t}=e;return t?t.map((e=>({parsedVcard:e,displayName:(0,h.vcardGetNameFromParsed)(e)||i.default.t(157),isMultiVcard:!1,vcard:""}))):[]})),{parsedVcards:C}=_;if(C)return C.length>1?(0,f.jsx)(l.default,{msg:m,vcardList:v({parsedVcards:C}),quotedMsg:e.getQuotedMsg(),displayType:s,displayAuthor:a}):(0,f.jsx)(c.default,{msg:m,vcard:C[0],quotedMsg:e.getQuotedMsg(),displayType:s,displayAuthor:a,onMessageClick:p});return(0,f.jsx)(c.default,{mediaStage:null===(t=m.mediaData)||void 0===t?void 0:t.mediaStage,msg:m,vcard:null,quotedMsg:e.getQuotedMsg(),displayType:s,displayAuthor:a,onMessageClick:p,downloadMedia:m.isTrusted()?g:null,placeholder:!0})};var n=a(67294),i=(s(a(69618)),s(a(43725))),r=s(a(30071)),o=s(a(11339)),l=s(a(85851)),d=a(64551),u=a(49082),c=s(a(93137)),h=a(78521),f=a(85893)},83681:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(99964)),i=s(a(48360)),r=a(67294),o=s(a(56720)),l=a(88102),d=s(a(52665)),u=(s(a(69618)),s(a(68466))),c=a(29623),h=s(a(43725)),f=a(58668),p=s(a(47049)),m=s(a(54703)),_=s(a(57155)),g=a(42316),v=s(a(11339)),C=a(31019),S=s(a(38932)),y=s(a(23217)),b=a(13923),E=s(a(75618)),T=s(a(1784)),x=a(49082),M=s(a(72306)),P=a(84728),A=a(85893);const I={buttonContainer:{position:"g0rxnol2",display:"p357zi0d",alignItems:"elxb2u3l",minWidth:"llkbrke6",height:"smoo1fur",color:"gtscxtjd",textAlign:"tffp5ko5",cursor:"ajgl1lbb"},statusIcon:{color:"mymavskd",height:"bmot90v7"},statusDone:{color:"a6r0u4sv"},content:{display:"p357zi0d",flexDirection:"f8m0rgwh",alignItems:"r15c9g6i",maxHeight:"ruh8h8mp",paddingEnd:"btzf6ewn"},unviewedBubble:{boxSizing:"cm280p3y",paddingTop:"eujn52yf",paddingEnd:"jfqm35v0",paddingBottom:"ckm995li",paddingStart:"bdbt56hn"},deepContainerContent:{boxSizing:"cm280p3y",minWidth:"hwyr1eu5",height:"smoo1fur",paddingTop:"i5tg98hk",paddingEnd:"abxuf49s",paddingBottom:"przvwfww",paddingStart:"rppts313",overflowX:"gfz4du6o",overflowY:"r7fjleex"},accentIconSvg:{color:"crm5a8gb"},nonSpinnerIcon:{display:"l7jjieqr",minWidth:"mhp1pqu9",marginTop:"tt8xd2xn",marginEnd:"mw4yctpw",marginBottom:"mpdn4nr2",marginStart:"bx0vhl82"},nonSpinnerIconSvg:{width:"i94gqilv",height:"bmot90v7"},contentMeta:{color:"hp667wtd"},labelContainer:{minWidth:"kr606f8j"},labelText:{userSelect:"rkxvyd19"},labelActive:{color:"pm5hny62"},labelInactive:{fontStyle:"h432zind",color:"hp667wtd"},labelRetry:{fontWeight:"hnx8ox4h",color:"pm5hny62"},quote:{marginTop:"if44n927",marginEnd:"isg5rw3j",marginBottom:"ngycyvoj",marginStart:"heai6z19"},meta:{position:"lhggkp7q",end:"b4u6kxhc",bottom:"blj1rie1"},dialogTitle:{marginBottom:"or9x5nie"}};function w(e){e.stopPropagation(),e.preventDefault()}function k(e,t){let{displayAuthor:a,displayType:s,mediaData:k,msg:j,trusted:N,quotedMsg:O}=e;const{mediaStage:R,size:D}=(0,x.useModelValues)(k,["mediaStage","size"]),L=(0,x.useModelValues)(j,["ack","isGroupMsg","isFailed","isPSA","isSentByMe","senderObj","type"]),B=function(e,t){return(0,r.useMemo)((()=>{const a=t.type===f.OUTWARD_TYPES.IMAGE,s=a?h.default.t(1443):h.default.t(1450);if((0,P.isViewed)(t))return{type:"complete",icon:(0,A.jsx)(y.default,{xstyle:I.nonSpinnerIcon,iconXstyle:I.nonSpinnerIconSvg,name:"view-once-viewed"}),label:h.default.t(1451),labelStyle:I.labelInactive};if((0,P.isExpired)(t)&&!t.isSentByMe)return{type:"unviewed",icon:(0,A.jsx)(y.default,{xstyle:I.nonSpinnerIcon,iconXstyle:[I.accentIconSvg,I.nonSpinnerIconSvg],name:"view-once"}),handleClick:()=>{const e=t.senderObj.displayName,s=a?h.default.t(1439):h.default.t(1440),n=a?h.default.t(1437,{name:e}):h.default.t(1438,{name:e});l.Cmd.openModal((0,A.jsx)(d.default,{onOK:()=>l.Cmd.closeModal(),children:(0,A.jsxs)(c.FlexColumn,{children:[(0,A.jsx)(b.TextHeader,{xstyle:I.dialogTitle,theme:"popup-title",children:s}),(0,A.jsx)(b.TextParagraph,{color:"secondary",children:n})]})}))},label:s};switch(e){case f.MEDIA_DATA_STAGE.RESOLVED:case f.MEDIA_DATA_STAGE.PROGRESSIVE_READY:return t.isSentByMe?{type:"complete",icon:(0,A.jsx)(y.default,{xstyle:I.nonSpinnerIcon,iconXstyle:I.nonSpinnerIconSvg,name:"view-once"}),label:s,labelStyle:I.labelActive}:{type:"unviewed",icon:(0,A.jsx)(y.default,{xstyle:I.nonSpinnerIcon,iconXstyle:[I.accentIconSvg,I.nonSpinnerIconSvg],name:"view-once"}),handleClick:function(){l.Cmd.mediaViewerModal({msg:(0,C.unproxy)(t.unsafe())})},label:s};case f.MEDIA_DATA_STAGE.FETCHING:return t.isSentByMe?{type:"complete",icon:(0,A.jsx)(y.default,{xstyle:I.nonSpinnerIcon,iconXstyle:I.nonSpinnerIconSvg,name:"view-once"}),label:s,labelStyle:I.labelActive}:{type:"unviewed",icon:(0,A.jsx)(M.default,{}),handleClick:e=>{w(e),t.cancelDownload()},label:s};case f.MEDIA_DATA_STAGE.NEED_POKE:return{type:"unviewed",icon:(0,A.jsx)(y.default,{xstyle:I.nonSpinnerIcon,iconXstyle:[I.accentIconSvg,I.nonSpinnerIconSvg],name:"view-once-download"}),handleClick:e=>{w(e),t.forceDownloadMediaEvenIfExpensive()},label:s};case f.MEDIA_DATA_STAGE.UPLOADING:return{type:"complete",icon:(0,A.jsx)(M.default,{onClick:e=>{w(e),t.cancelUpload()}}),label:s,labelStyle:I.labelActive};case f.MEDIA_DATA_STAGE.NEED_UPLOAD:return{type:"complete",icon:(0,A.jsx)(S.default,{xstyle:I.nonSpinnerIcon,iconXstyle:[I.accentIconSvg,I.nonSpinnerIconSvg],name:"view-once-retry",onClick:e=>{w(e),t.resumeUpload()},"aria-label":h.default.t(1180)}),label:h.default.t(1180),labelStyle:I.labelRetry};case f.MEDIA_DATA_STAGE.REMOTE_NEED_UPLOAD:return{type:"complete",icon:(0,A.jsx)(S.default,{xstyle:I.nonSpinnerIcon,iconXstyle:[I.accentIconSvg,I.nonSpinnerIconSvg],name:"view-once-retry",onClick:e=>{w(e),t.resumeRemoteUpload()},"aria-label":h.default.t(1180)}),label:h.default.t(1180),labelStyle:I.labelRetry};case f.MEDIA_DATA_STAGE.SENDING:return{type:"complete",icon:(0,A.jsx)(M.default,{}),label:s,labelStyle:I.labelActive};case f.MEDIA_DATA_STAGE.ERROR_MISSING:return{type:"complete",icon:(0,A.jsx)(y.default,{xstyle:I.nonSpinnerIcon,iconXstyle:I.nonSpinnerIconSvg,name:"view-once-viewed"}),label:h.default.t(1436),labelStyle:I.labelInactive};case f.MEDIA_DATA_STAGE.ERROR_UNSUPPORTED:case f.MEDIA_DATA_STAGE.ERROR_TOO_LARGE:case f.MEDIA_DATA_STAGE.ERROR_FILE_NOT_READABLE:return __LOG__(4,void 0,new Error,!0)`Unsupported/too large/not readable view once media message`,SEND_LOGS("view-once-hook-error"),{type:"complete",icon:(0,A.jsx)(y.default,{xstyle:I.nonSpinnerIcon,iconXstyle:I.nonSpinnerIconSvg,name:"view-once-viewed"}),label:s,labelStyle:I.labelActive};case f.MEDIA_DATA_STAGE.INIT:case f.MEDIA_DATA_STAGE.PREPARING:case f.MEDIA_DATA_STAGE.DECRYPTING:case f.MEDIA_DATA_STAGE.EXISTS:if(!t.isSentByMe)return{type:"unviewed",icon:(0,A.jsx)(M.default,{}),handleClick:w,label:s};case f.MEDIA_DATA_STAGE.REMOTE_UPLOADING:case f.MEDIA_DATA_STAGE.REUPLOADING:return{type:"complete",icon:(0,A.jsx)(y.default,{xstyle:I.nonSpinnerIcon,iconXstyle:I.nonSpinnerIconSvg,name:"view-once"}),label:s,labelStyle:I.labelActive}}}),[e,t])}(R,L);(0,r.useImperativeHandle)(t,(()=>({handleKeyActivation(e){N&&null!=B.handleClick&&B.handleClick(e)}}))),(0,r.useEffect)((()=>{!L.isSentByMe&&(0,P.isUnviewed)(L)&&L.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:v.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1})}),[L]);const F=j.type===f.OUTWARD_TYPES.IMAGE?i.default._("View once photo",null,{hk:"2obYts"}):i.default._("View once video",null,{hk:"3nw2h1"});let G;if("complete"===B.type){const{label:e,labelStyle:t,icon:s}=B,i=(0,P.isUnviewed)(j)?F:[e,F].join(" - ");G=(0,A.jsxs)(E.default,{msg:j,displayAuthor:a,children:[null!=O?(0,A.jsx)("div",{className:(0,o.default)(I.quote),children:O}):null,(0,A.jsxs)(c.FlexRow,{align:"center",xstyle:I.labelContainer,a8nText:n.default.key("view-once-complete"),"aria-label":i,children:[(0,A.jsx)(c.FlexItem,{xstyle:[I.statusIcon,(0,P.isViewed)(L)&&I.statusDone],grow:0,children:s}),(0,A.jsx)(c.FlexItem,{grow:1,children:(0,A.jsx)(m.default,{className:(0,o.default)(t,I.labelText),msg:L.unsafe(),children:e})})]})]})}else{const{handleClick:e,label:t,icon:i}=B,r=R===f.MEDIA_DATA_STAGE.NEED_POKE||R===f.MEDIA_DATA_STAGE.FETCHING?h.default.filesize(D):null;G=(0,A.jsx)(p.default,{displayType:s,hideCaption:!0,hideMeta:!0,msg:j,quotedMsg:O,showAuthor:a,trusted:N,children:(0,A.jsx)(T.default,{a8nText:n.default.key("view-once-unviewed"),xstyle:I.buttonContainer,onClick:N?e:()=>{},"aria-label":F,children:(0,A.jsx)(u.default,{outgoingMsg:L.isSentByMe,children:(0,A.jsxs)(c.FlexRow,{xstyle:I.deepContainerContent,align:"center",children:[(0,A.jsx)(c.FlexItem,{xstyle:I.statusIcon,grow:0,children:i}),(0,A.jsxs)(c.FlexItem,{xstyle:I.content,grow:1,children:[(0,A.jsx)(b.TextHeader,{color:"secondary",level:"3",weight:"medium",size:"15",children:t}),null!=r?(0,A.jsx)(b.TextParagraph,{xstyle:I.contentMeta,size:"10",children:r}):null]}),(0,A.jsx)(c.FlexItem,{grow:0,children:(0,A.jsx)("div",{className:_.default.spacer,children:(0,A.jsx)("div",{className:(0,o.default)(I.meta),children:(0,A.jsx)(g.Meta,{msg:j})})})})]})})})})}return(0,A.jsx)("div",{className:(0,o.default)("unviewed"===B.type&&I.unviewedBubble),children:G})}var j=(0,r.forwardRef)(k);t.default=j},72306:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{onClick:t}=e;const[a,s]=(0,u.default)(t),f=null!=t?s:{};return(0,h.jsxs)("div",(0,n.default)((0,n.default)({className:(0,i.default)({[c.default.container]:!0,[c.default.inactive]:null==t}),ref:a,"aria-label":o.default.t(1574)},f),{},{children:[(0,h.jsx)("div",{className:c.default.icon,children:(0,h.jsx)(d.default,{name:"x-soft"})}),(0,h.jsx)(r.FlexRow,{className:c.default.spinner,align:"center",justify:"center",children:(0,h.jsx)(l.Spinner,{color:"accent",size:18,stroke:5})})]}))};var n=s(a(81109)),i=s(a(94184)),r=a(29623),o=s(a(43725)),l=a(11054),d=s(a(23217)),u=s(a(60265)),c=s(a(93831)),h=a(85893)},58827:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.MessageContainer=function(e){const t=(0,l.default)(fe.default.msgContainer,{"message-out":e.isSentByMe,"message-in":!e.isSentByMe}),a=(0,l.default)(fe.default.message,fe.default.hasTail,"tail-override-left");return(0,me.jsx)("div",{className:t,children:(0,me.jsx)("div",{className:a,children:(0,me.jsxs)("div",{className:fe.default.messageBackground,children:[(0,me.jsx)("div",{className:fe.default.tail,children:(0,me.jsx)(oe.default,{name:Ee(_e)})}),e.children]})})})},t.WrapperImpl=t.Wrapper=t.SystemBubble=void 0,t.getTailName=Ee;var n=s(a(45095)),i=s(a(99964)),r=s(a(45120)),o=s(a(52013)),l=s(a(94184)),d=s(a(48360)),u=a(67294),c=a(86945),h=a(55712),f=a(42262),p=s(a(28414)),m=a(69951),_=a(88102),g=a(19773),v=s(a(52665)),C=s(a(69618)),S=a(67911),y=s(a(99131)),b=a(80226),E=a(32303),T=a(60811),x=a(71174),M=a(30424),P=s(a(51099)),A=a(83610),I=a(77811),w=a(50101),k=a(75362),j=a(7293),N=a(57701),O=s(a(45152)),R=a(55414),D=a(20427),L=s(a(14048)),B=s(a(63824)),F=a(24505),G=s(a(43725)),U=a(74511),V=a(84387),H=a(47809),K=a(84866),q=s(a(34377)),W=a(87931),Y=s(a(20485)),z=a(23512),Q=s(a(8235)),$=a(54676),X=a(56989),J=s(a(52500)),Z=a(94270),ee=a(57793),te=s(a(32231)),ae=a(21357),se=a(64551),ne=s(a(77807)),ie=s(a(65932)),re=a(31019),oe=s(a(23217)),le=s(a(257)),de=a(18644),ue=s(a(24717)),ce=s(a(41956)),he=s(a(25033)),fe=s(a(33947)),pe=a(72179),me=a(85893);const _e=!1,ge=!0;class ve extends u.PureComponent{getContainerElement(){return(0,n.default)(this._refContainer,"this._refContainer")}constructor(e){super(e),this.setRefMsgComponent=e=>this.refMsgComponent=e,this.setRefContext=e=>this.refContext=e,this._refTail=(0,u.createRef)(),this.setRefBubble=e=>this.refBubble=e,this._sizeMismatch=!1,this._stickerRef=(0,u.createRef)(),this._setRefContainer=e=>{this._refContainer=e},this.resend=()=>{this.props.msg.resend().catch((function(e){__LOG__(2)`wrapper:resend failure: ${e}`}))},this._handleMsgInfoClick=()=>{_.Cmd.msgInfoDrawer((0,re.unproxy)(this.props.msg))},this.openContactChat=()=>{(0,w.findChat)(this.props.msg.author).then((function(e){_.Cmd.openChatFromUnread(e).then((t=>{t&&_.Cmd.focusChatTextInput(e)}))}))},this._openWebSearchFlow=()=>{const e=this.props.msg;_.Cmd.openModal((0,me.jsx)(he.default,{messageText:e.body}),{transition:"modal-flow"})},this._openEphemeralInfoPopup=()=>{const e=this.props.msg.ephemeralDuration||0;_.Cmd.openModal((0,me.jsx)(v.default,{onOK:()=>{_.Cmd.closeModal()},children:(0,F.getDisappearingMessageOutOfSyncInfoString)(e)}),{transition:"modal-flow"})},this._openBizPrivacyInfoPopup=()=>{const e=this.props.msg,{bizPrivacyStatus:t}=e;null!=t&&_.Cmd.openModal((0,me.jsx)(v.default,{onOK:()=>{_.Cmd.closeModal()},children:(0,f.getBizPrivacyInfoString)(t)}),{transition:"modal-flow"})},this._handleMouseEnter=e=>{e.buttons||this.state.hover||!this._hasContextMenu()||this.setState({hover:!0})},this._handleMouseLeave=()=>{this._hasContextMenu()&&this._unsetHover()},this._unsetHover=()=>{this.state.hover&&this.setState({hover:!1})},this._handleMouseContextMenu=e=>{e.stopPropagation()},this._handleMessageDeleteClick=()=>{const{msg:e,isMsgVisible:t}=this.props;let a;e.canSenderRevoke()?a=b.RevokePrompt.Sender:e.canAdminRevoke()&&(a=b.RevokePrompt.Admin),_.Cmd.openModal((0,me.jsx)(y.default,{chat:e.chat,msgList:[e].map(re.unproxy),deletePrompt:!0,revokePrompt:a,isMsgVisible:t}))},this._handleMessageReplyClick=()=>{const e=(0,re.unproxy)(this.props.msg),t=e.chat;t.composeQuotedMsg=e,t===m.ChatCollection.getActive()?_.Cmd.focusChatTextInput(t):_.Cmd.openChatBottom(t)},this._handleMessagePrivateReplyClick=()=>{const e=(0,re.unproxy)(this.props.msg);(0,te.default)(e)},this._handleMessageDownloadClick=()=>{I.FileSaver.initDownload((0,re.unproxy)(this.props.msg))},this._handleMessageStarClick=()=>{const e=(0,re.unproxy)(this.props.msg);_.Cmd.sendStarMsgs(e.chat,[e])},this._handleMessageUnstarClick=()=>{const e=(0,re.unproxy)(this.props.msg);_.Cmd.sendUnstarMsgs(e.chat,[e])},this._handleFavoriteStickerClick=()=>{_.Cmd.addFavoriteSticker((0,re.unproxy)(this.props.msg))},this._handleUnfavoriteStickerClick=()=>{_.Cmd.removeFavoriteSticker((0,re.unproxy)(this.props.msg))},this._getMenuRefContext=()=>{if(this.refContext)return this.refContext.getComponent().refContext},this._handleMenuClick=(e,t)=>{if(t&&this.state.contextMenu)return void this.setState({contextMenu:null,reactionPicker:null});const a=t?this._getMenuRefContext():e,s=(0,re.unproxy)(this.props.msg),n=[];!s.isSentByMe||this.props.displayType===C.default.DISP_TYPE.MSG_INFO||s.asRevoked||s.isMdHistoryMsg||n.push((0,me.jsx)(x.DropdownItem,{a8n:"mi-msg-info",action:this._handleMsgInfoClick,children:G.default.t(830)},"info")),s.canReply()&&n.push((0,me.jsx)(x.DropdownItem,{a8n:"mi-msg-reply",action:this._handleMessageReplyClick,children:G.default.t(1145)},"reply")),(s.canPrivateReply()||s.canPrivateReplyInRestrictedGrp())&&n.push((0,me.jsx)(x.DropdownItem,{a8n:"mi-msg-reply",action:this._handleMessagePrivateReplyClick,children:G.default.t(1065)},"private_reply")),s.isDownloadable()&&n.push((0,me.jsx)(x.DropdownItem,{a8n:"mi-msg-download",action:this._handleMessageDownloadClick,children:G.default.t(1568)},"download")),s.canForward()&&n.push((0,me.jsx)(x.DropdownItem,{a8n:"mi-msg-forward",action:()=>{this.openForwardFlow(!0)},children:G.default.t(482)},"forward")),(0,N.canEditLabelAssociation)()&&!s.asRevoked&&n.push((0,me.jsx)(x.DropdownItem,{a8n:"mi-edit-label",action:()=>{this._openEditLabelFlow()},children:d.default._("Edit label",null,{hk:"3QX44B"})},"editLabel")),s.canStar()&&(s.star?n.push((0,me.jsx)(x.DropdownItem,{a8n:"mi-msg-unstar",action:this._handleMessageUnstarClick,children:G.default.t(1377)},"star")):n.push((0,me.jsx)(x.DropdownItem,{a8n:"mi-msg-star",action:this._handleMessageStarClick,children:G.default.t(1276)},"star"))),j.GK.supportsFeature(j.GK.F.MD_BACKEND)&&s.type===C.default.MSG_TYPE.STICKER&&(0,c.getABPropConfigValue)("sticker_md_favorite_stickers_enabled")&&((0,A.isStickerFilehashFavorited)(this.props.msg.filehash)?n.push((0,me.jsx)(x.DropdownItem,{a8n:"mi-remove-favorite-sticker",action:this._handleUnfavoriteStickerClick,children:G.default.t(1140)},"remove-favorite-sticker")):n.push((0,me.jsx)(x.DropdownItem,{a8n:"mi-favorite-sticker",action:this._handleFavoriteStickerClick,children:d.default._("Add to favorites",null,{hk:"2ODf78"})},"favorite-sticker")));const i=K.MediaBlobCache.get(this.props.msg.filehash);if(s.type===C.default.MSG_TYPE.STICKER&&null!=i&&(0,S.supportsCopyImageToClipboard)()&&n.push((0,me.jsx)(x.DropdownItem,{a8n:"mi-copy-favorite-sticker",action:()=>(0,S.copyImageToClipboard)(i),children:d.default._("Copy Sticker Image",null,{hk:"2hsnNe"})},"copy-favorite-sticker")),j.GK.supportsFeature(j.GK.F.MD_BACKEND)&&s.type===C.default.MSG_TYPE.STICKER&&(0,L.default)()){const{stickerPackId:e}=this.props.msg.mediaData;e&&n.push((0,me.jsx)(x.DropdownItem,{a8n:"mi-open-sticker-pack",action:()=>_.Cmd.openStickerPack(e),children:G.default.t(1455)},"open-sticker-pack"))}n.push((0,me.jsx)(x.DropdownItem,{a8n:"mi-msg-delete",action:this._handleMessageDeleteClick,children:G.default.t(389)},"delete")),s.isGroupMsg&&s.author&&!s.isSentByMe&&n.push((0,me.jsx)(x.DropdownItem,{a8n:"mi-msg-author",action:this.openContactChat,children:G.default.t(826,{author:s.displayName()})},"author")),this.setState({contextMenu:{menu:n,anchor:a,theme:x.ThemeOptions.COMPACT,autoFocus:this._isKeyboardUser()}})},this.openContextMenu=()=>{this._hasContextMenu()&&(this.state.hover?this._handleMenuClick(void 0,!0):this.setState({hover:!0},(()=>{this._handleMenuClick(void 0,!0)})))},this.closeContextMenu=()=>{const e={contextMenu:null};this._isKeyboardUser()&&(e.hover=!1),this.setState(e)},this.closeReactionPicker=()=>{const e={reactionPicker:null};this._isKeyboardUser()&&(e.hover=!1),this.setState(e)},this._handleSelectClick=e=>{e&&e.stopPropagation();const t=this.props.onMessageSelect;t?t((0,re.unproxy)(this.props.msg),!this.state.selected,e):(__LOG__(4,void 0,new Error,!0)`no onMessageSelect`,SEND_LOGS("wrapper-onSelectClick"))},this._handleDoubleClick=e=>{const{displayType:t}=this.props,a=(0,re.unproxy)(this.props.msg);!a.canReply()||this.props.selectable||t!==C.default.DISP_TYPE.CONVERSATION||this.state.contextMenu||e.target instanceof HTMLElement&&((e,t)=>{let a=t;for(;a;){if(a===e)return!0;a=a.parentNode}return!1})(this.refBubble,e.target)||(a.chat.composeQuotedMsg=a,_.Cmd.focusChatTextInput(a.chat),this.highlight())},this._handleWindowResize=()=>{this.forceUpdate()},this._handleKeyActivation=e=>{var t,a;null===(t=this.getMsgComponentRef())||void 0===t||null===(a=t.handleKeyActivation)||void 0===a||a.call(t,e)},this.state={canQuickForward:e.msg.canQuickForward(),contextMenu:null,reactionPicker:null,hover:!1,highlighting:!1,selected:!!e.selectedMessages&&e.selectedMessages.isSelected((0,re.unproxy)(e.msg)),isRevoked:Boolean(e.msg.asRevoked),isViewOncePeeking:!1};const t=this.props.displayType===C.default.DISP_TYPE.STARRED_MSGS||this.props.displayType===C.default.DISP_TYPE.GALLERY||this.props.displayType===C.default.DISP_TYPE.MSG_INFO||this.props.displayType===C.default.DISP_TYPE.CONTACT_CARD;this._sizeMismatch=t&&(this.props.msg.isGif||this.props.msg.type===C.default.MSG_TYPE.IMAGE)}componentDidMount(){this._sizeMismatch&&this.refBubble&&(this.maxWidth=this.refBubble.offsetWidth,this.forceUpdate(),window.addEventListener("resize",this._handleWindowResize)),this.props.listeners.add(this.props.msg,"change",(()=>{const e=this.props.msg.canQuickForward();e!==this.state.canQuickForward&&this.setState({canQuickForward:e});const t=Boolean(this.props.msg.asRevoked);t!==this.state.isRevoked&&this.setState({isRevoked:t})})),this.props.listeners.add(document,"selectionchange",(()=>{var e,t;""!==(null!==(e=null===(t=document.getSelection())||void 0===t?void 0:t.toString())&&void 0!==e?e:"")&&this._unsetHover()})),this.props.listeners.add(_.Cmd,"media_viewer_modal",this._unsetHover)}componentWillUnmount(){this._sizeMismatch&&window.removeEventListener("resize",this._handleWindowResize)}componentDidUpdate(e,t){this.state.contextMenu&&t.isRevoked!==this.state.isRevoked&&this.closeContextMenu(),this.state.reactionPicker&&t.isRevoked!==this.state.isRevoked&&this.closeReactionPicker()}scrollMsg(e,t){this._refContainer&&(0,E.scrollAt)(this._refContainer,void 0,t).then(e)}highlight(){const e=this.refBubble,t=this._refTail.current;e&&(this.setState({highlighting:!0}),r.default.indicateFocus(e,fe.default.highlightAnimation),r.default.indicateFocus(t,fe.default.highlightAnimation),this.props.listeners.addOnce(e,"animationend",(()=>{this.setState({highlighting:!1})})),this.props.isFocusable&&this.focus({preventScroll:!0}))}highlightMention(){this._refContainer&&r.default.indicateFocus(this._refContainer,fe.default.highlightMentionAnimation)}openForwardFlow(e){const t=this.props.msg;let a;t.type===C.default.MSG_TYPE.CIPHERTEXT?a=G.default.t(466):t.asRevoked?a=G.default.t(467):t.isUnsentMedia&&(a=G.default.t(465,{_plural:1})),a?_.Cmd.openModal((0,me.jsx)(v.default,{title:G.default.t(468),onOK:()=>_.Cmd.closeModal(),okText:G.default.t(1765),children:a})):e&&this.props.displayType===C.default.DISP_TYPE.CONVERSATION?this._handleSelectClick():_.Cmd.openModal((0,me.jsx)(k.ForwardMessageFlowLoadable,{msgs:[(0,re.unproxy)(t)]}),{transition:"modal-flow"})}_openEditLabelFlow(){this.props.displayType===C.default.DISP_TYPE.CONVERSATION?this._handleSelectClick():_.Cmd.openModal((0,me.jsx)(H.ManageLabelFlowLoadable,{modelsToUpdate:[(0,re.unproxy)(this.props.msg)]}))}_openReactionPicker(e,t){this.setState({reactionPicker:{dirY:T.DirY.BOTTOM,dirX:e.isSentByMe?T.DirX.LEFT:T.DirX.RIGHT,type:"emoji_picker",menu:(0,me.jsx)(M.EmojiPanel,{onEmoji:t=>{(0,ae.sendReactionToMsg)(e,t).catch((e=>{__LOG__(4,void 0,new Error)`sendReactionMsg: error ${e}`})),this.closeReactionPicker()}}),flipOnRTL:!0,anchor:t}})}_isKeyboardUser(){return this.context}getMsgComponent(e){const{msg:t,position:a,displayType:s,isMsgVisible:n,getSequentialMsg:i}=this.props;return(0,me.jsx)(P.default,{reason:"msg",children:(0,me.jsx)(O.default.Provider,{value:t.chat.groupMetadata,children:(0,me.jsx)(z.WrappedMsgComponent,{chat:t.chat,displayAuthor:e,displayType:s,hover:this.state.hover,isMsgVisible:n,maxWidth:this.maxWidth,msg:t,ref:this.setRefMsgComponent,position:a,getSequentialMsg:i,onProductClick:this.props.onProductClick,onMessageClick:this.props.onMessageClick,forwardStickerRef:this._stickerRef})})})}getMsgComponentRef(){return this.refMsgComponent&&this.refMsgComponent.getRef()}onSelectChange(e){this.state.selected!==e&&this.setState({selected:e})}focus(e){this._refContainer&&o.default.focus(this._refContainer,e)}_hasContextMenu(){const{msg:e,displayType:t}=this.props;return!e.isNotification&&t!==C.default.DISP_TYPE.GALLERY&&t!==C.default.DISP_TYPE.CONTACT_CARD}_shouldShowMenuButton(){return this._hasContextMenu()&&!this.props.selectable&&(this.state.hover&&!this.state.highlighting||!!this.props.current||!!this.state.contextMenu)}_getHotkeysHandlers(){const{msg:e}=this.props;let t,a;return"ptt"===e.type&&se.ServerProps.pttPlaybackSpeedEnabled&&(t=t=>{t.preventDefault(),t.stopPropagation(),X.PttPrefs.increasePlaybackRateFor(e.id)},a=t=>{t.preventDefault(),t.stopPropagation(),X.PttPrefs.decreasePlaybackRateFor(e.id)}),{enter:this._handleKeyActivation,space:this._handleKeyActivation,"shift+>":t,"shift+<":a}}render(){var e;const{msg:t,position:a,displayType:s,selectedMessages:n,isFocusable:r}=this.props,o=s===C.default.DISP_TYPE.CONVERSATION,u=function(e){let{msg:t,position:a,displayType:s}=e;if(t.isSentByMe||!t.isGroupMsg)return!1;if(t.type===C.default.MSG_TYPE.CHAT)return!(s===C.default.DISP_TYPE.STARRED_MSGS||!t.quotedMsg)||(a!==W.MsgPosition.MID&&a!==W.MsgPosition.END||(s===C.default.DISP_TYPE.GALLERY||(!!t.linkPreview||!!(0,D.isParsableOnlineVideoURL)(t.richPreviewType,t.matchedText,t.doNotPlayInline))));return!0}({msg:t,position:a,displayType:s});let c;this._shouldShowMenuButton()&&(c=(0,me.jsx)(q.default,{msg:t,hasAuthor:u,position:a,ref:this.setRefContext,onToggle:e=>{this._handleMenuClick(e)}},"icon-context"));let f=null;if(!t.isNotification&&this.props.selectable){const e=s===C.default.DISP_TYPE.GALLERY?"gallery":null;f=(0,me.jsx)(Y.default,{checked:!!this.state.selected,onClick:this._handleSelectClick,msgTheme:e})}let m=null;var _;t.type===C.default.MSG_TYPE.STICKER&&this.props.selectable&&(m=(0,me.jsx)("span",{children:(0,me.jsx)("div",{className:fe.default.stickerWrapperContainer,onMouseEnter:null===(_=this._stickerRef.current)||void 0===_?void 0:_.startAnimation,onClick:this._handleSelectClick})}));let v=!1;if(t.type===C.default.MSG_TYPE.CHAT){const e=g.Code.match(t.body);v=1===e.length&&e[0][4][0].length===t.body.length}const S=null===(e=t.chat)||void 0===e?void 0:e.isPSA,y=!S&&!t.isNotification&&!this.props.tailOverride&&(a===W.MsgPosition.FRONT||a===W.MsgPosition.SINGLE)||s===C.default.DISP_TYPE.MSG_INFO||this.props.tailOverride,b=be(t)&&(!u||t.isSentByMe||!t.isGroupMsg&&!t.quotedMsg)&&(o&&(a===W.MsgPosition.FRONT||a===W.MsgPosition.SINGLE)||!o),E=!this.props.selectable&&(s===C.default.DISP_TYPE.CONVERSATION||s===C.default.DISP_TYPE.MSG_INFO||s===C.default.DISP_TYPE.STARRED_MSGS),T=t.ephemeralOutOfSync&&!t.isNotification&&!t.isFutureproof,x=E&&this.state.canQuickForward,M=E&&t.isFrequentlyForwarded&&t.type===C.default.MSG_TYPE.CHAT,P=null!=t.bizPrivacyStatus;let A=null;const I=o?Z.ReactionBubbleType.DEFAULT:Z.ReactionBubbleType.NON_CONVERSATION;!be(t)&&t&&(0,ee.shouldShowReactionBubble)(t,I)&&(A=(0,me.jsx)(J.default,{msgIds:[t.id.toString()],isSentByMe:t.isSentByMe,hasReaction:t.hasReaction}));const w=(0,l.default)(fe.default.msg,{[fe.default.msgContinuation]:!(a!==W.MsgPosition.FRONT&&a!==W.MsgPosition.MID||t.isFromTemplate&&t.isQuickReply),[fe.default.msgPSA]:s!==C.default.DISP_TYPE.STARRED_MSGS&&S,[fe.default.msgSystem]:t.isNotification,[fe.default.msgGallery]:s===C.default.DISP_TYPE.STARRED_MSGS||s===C.default.DISP_TYPE.CONTACT_CARD||s===C.default.DISP_TYPE.GALLERY,[fe.default.msgInfo]:s===C.default.DISP_TYPE.MSG_INFO,[fe.default.msgWithQuickAction]:P||T||x||M,"message-out":!t.isNotification&&t.isSentByMe||s===C.default.DISP_TYPE.MSG_INFO,"message-in":!t.isNotification&&!t.isSentByMe,[U.LIST_FOCUSABLE_ITEM_CLASS_NAME]:r}),k=(0,l.default)(fe.default.message,function(e){if(e.isViewOnce)return fe.default.messageChat;switch(e.type){case C.default.MSG_TYPE.NOTIFICATION_TEMPLATE:return Se.includes(e.subtype)?fe.default.messageNonE2ENotification:e.isBizNotification?fe.default.messageBizNotification:void 0;case C.default.MSG_TYPE.E2E_NOTIFICATION:return"encrypt"===e.subtype&&e.chat.isSupportGroupOrSupportAdmin()?fe.default.messageNonE2ENotification:fe.default.messageE2ENotification;case C.default.MSG_TYPE.GROUPS_V4_INVITE:return fe.default.messageChat;case C.default.MSG_TYPE.CHAT:return(0,ne.default)(e)?fe.default.messageVideoLinkPreview:fe.default.messageChat;case C.default.MSG_TYPE.LOCATION:return e.isLive?fe.default.messageLiveLocation:fe.default.messageLocation;case C.default.MSG_TYPE.VCARD:return fe.default.messageVcard;case C.default.MSG_TYPE.CIPHERTEXT:return(0,l.default)(fe.default.messageChat,fe.default.messagePlaceholder);case C.default.MSG_TYPE.MULTI_VCARD:return fe.default.messageMultiVcard;case C.default.MSG_TYPE.IMAGE:return fe.default.messageImage;case C.default.MSG_TYPE.PRODUCT:return fe.default.messageProduct;case C.default.MSG_TYPE.STICKER:return be(e)?fe.default.messageTransparent:fe.default.messageSticker;case C.default.MSG_TYPE.VIDEO:return e.mediaData.isGif?fe.default.messageGif:fe.default.messageVideo;case C.default.MSG_TYPE.AUDIO:return fe.default.messageAudio;case C.default.MSG_TYPE.PTT:return fe.default.messagePTT;case C.default.MSG_TYPE.DOCUMENT:return fe.default.messageDocument;case C.default.MSG_TYPE.TEMPLATE_BUTTON_REPLY:case C.default.MSG_TYPE.BUTTONS_RESPONSE:case C.default.MSG_TYPE.LIST_RESPONSE:return fe.default.messageChat;case C.default.MSG_TYPE.ORDER:return fe.default.messageProduct;case C.default.MSG_TYPE.LIST:if((0,$.listMsgCanRender)(e))return fe.default.messageList;case C.default.MSG_TYPE.UNKNOWN:return(0,l.default)(fe.default.messageChat,fe.default.messagePlaceholder);default:return}}(t),{[fe.default.messageSystem]:t.isNotification,[fe.default.messageCode]:v,[fe.default.hasTail]:y,"tail-override-left":"left"===this.props.tailOverride,"tail-override-right":"right"===this.props.tailOverride,[fe.default.tailOverrideHide]:b}),j=(0,l.default)({[fe.default.messageBackground]:!be(t),[fe.default.hasBorderBox]:!t.isNotification&&!be(t),[fe.default.hasUrlCallButtons]:t.isFromTemplate&&t.hasTemplateButtons&&!t.isQuickReply});if(this._sizeMismatch&&!this.refBubble)return(0,me.jsx)("div",{className:fe.default.placeholder,ref:this.setRefBubble});let N,O,L,B,F,V,H;N=this.state.contextMenu?"none":t.isRTL?"pop-fast-reverse":"pop-fast",this.state.contextMenu&&(O=(0,me.jsx)(de.UIE,{displayName:"MsgContextMenu",escapable:!0,popable:!0,requestDismiss:this.closeContextMenu,children:(0,me.jsx)(ue.default,{contextMenu:this.state.contextMenu})})),this.state.reactionPicker&&(L=(0,me.jsx)(de.UIE,{displayName:"MsgReaction",escapable:!0,popable:!0,requestDismiss:this.closeReactionPicker,children:(0,me.jsx)(ue.default,{contextMenu:this.state.reactionPicker})})),this.props.isFocusedMsg&&(B=(0,me.jsx)(pe.WhileFocusedListener,{parent:this})),n&&(F=(0,me.jsx)(pe.SelectionListener,{parent:this,msgId:t.id.toString(),selectedMessages:n})),T?V=(0,me.jsx)("div",{className:fe.default.quickActionButton,onClick:this._openEphemeralInfoPopup,role:"button",children:(0,me.jsx)(oe.default,{name:"info-alt"})}):P?V=(0,me.jsx)("div",{className:fe.default.quickActionButton,onClick:this._openBizPrivacyInfoPopup,role:"button",children:(0,me.jsx)(oe.default,{name:"info-alt"})}):x?V=(0,me.jsx)("div",{className:fe.default.quickActionButton,onClick:()=>this.openForwardFlow(!1),role:"button",children:(0,me.jsx)(oe.default,{name:"forward-chat"})}):M&&(V=(0,me.jsx)("div",{className:fe.default.quickActionButton,onClick:this._openWebSearchFlow,role:"button",children:(0,me.jsx)(oe.default,{name:"search"})})),t.mediaData&&(H=(0,me.jsx)(pe.MediaListener,{parent:this,mediaData:t.mediaData}));let K,z,X,te="msg-container";if(t.isNotification&&(te="msg-notification-container"),y){let e;e="left"===this.props.tailOverride?Ee(_e):"right"===this.props.tailOverride?Ee(ge):Ee(t.isSentByMe),K=(0,me.jsx)(oe.default,{name:e,className:fe.default.tail,containerRef:this._refTail})}t.isFromTemplate&&t.hasTemplateButtons?z=(0,me.jsx)(le.default,{msg:t,chat:t.chat}):null!=t.dynamicReplyButtons&&t.dynamicReplyButtons.length>0&&s!==C.default.DISP_TYPE.STARRED_MSGS&&(z=(0,me.jsx)(p.default,{msg:t})),t.isNotification||a===W.MsgPosition.MID?X=null:t.isSentByMe?X=(0,me.jsx)(h.InvisibleLabel,{children:d.default._("You:",null,{hk:"23aeBt"})}):t.isGroupMsg||(X=(0,me.jsx)(h.InvisibleLabel,{children:G.default.t(4,{author:t.displayName()})}));let ae=null;return t.isEphemeral&&(ae=(0,me.jsx)(h.InvisibleLabel,{children:d.default._("This is a disappearing message",null,{hk:"2ZKFVj"})})),(0,me.jsxs)(R.HotKeys,{className:w,"data-id":t.id.toString(),handlers:this._getHotkeysHandlers(),onDoubleClick:this._handleDoubleClick,onRef:this._setRefContainer,tabIndex:-1,children:[(0,me.jsx)(ce.default,{transitionName:"delay-leave",children:f}),(0,me.jsxs)("div",{"data-a8n":i.default.key(te),className:k,onContextMenu:this._handleMouseContextMenu,onMouseOver:this._handleMouseEnter,onMouseEnter:this._handleMouseEnter,onMouseLeave:this._handleMouseLeave,children:[K,(0,me.jsx)(Q.default,{displayType:s,msg:t}),m,(0,me.jsxs)("div",{className:j,ref:this.setRefBubble,children:[X,this.getMsgComponent(u),(0,me.jsx)(ce.default,{transitionName:N,children:c})]}),V,z,ae,A]}),L,O,B,F,H]})}}t.WrapperImpl=ve,ve.defaultProps={displayType:C.default.DISP_TYPE.CONVERSATION},ve.CONCERNS={msg:["asMms","asRevoked","author","body","chat","dir","ephemeralDuration","ephemeralOutOfSync","filehash","id","isBizNotification","isEphemeral","isFailed","isFrequentlyForwarded","isFutureproof","isGif","isGroupMsg","isLive","isMedia","isNotification","isRTL","isSentByMe","isUnsentMedia","isViewOnce","linkPreview","list","mediaData","matchedText","quotedMsg","richPreviewType","sender","star","subtype","type","title","hasTemplateButtons","isQuickReply","isFromTemplate","doNotPlayInline","ctwaContext","bizPrivacyStatus","verifiedBizName","templateParams","dynamicReplyButtons","replyButtons","hasReaction"]},ve.contextType=B.default,ve.displayName="WrapperImpl";const Ce=(0,V.ListenerHOC)((0,ie.default)(ve,ve.CONCERNS));t.Wrapper=class extends Ce{focus(e){this.getComponent().focus(e)}openContextMenu(){this.getComponent().openContextMenu()}getContainerElement(){return this.getComponent().getContainerElement()}getMsgComponentRef(){return this.getComponent().getMsgComponentRef()}};const Se=["biz_privacy_mode_init_fb","biz_privacy_mode_init_bsp","biz_privacy_mode_to_fb","biz_privacy_mode_to_bsp"];const ye=(0,u.forwardRef)((function(e,t){const a=e.theme?fe.default[e.theme]:null,s=(0,l.default)(fe.default.msg,fe.default.msgSystem,a,{[U.LIST_FOCUSABLE_ITEM_CLASS_NAME]:e.isFocusable}),n=(0,l.default)(fe.default.message,fe.default.messageSystem,{[fe.default.messageHidden]:e.hidden});return(0,me.jsx)("div",{className:s,tabIndex:-1,ref:t,children:(0,me.jsx)("div",{className:n,children:e.children})})}));function be(e){return e.type===C.default.MSG_TYPE.STICKER&&!e.quotedMsg&&!e.ctwaContext}function Ee(e){return e?G.default.isRTL()?"tail-in":"tail-out":G.default.isRTL()?"tail-out":"tail-in"}t.SystemBubble=ye},6272:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(6479)),i=s(a(48926)),r=s(a(13752)),o=s(a(45095)),l=s(a(94184)),d=s(a(48360)),u=a(67294),c=s(a(96774)),h=s(a(12285)),f=a(88102),p=s(a(69618)),m=s(a(3154)),_=s(a(50686)),g=s(a(43725)),v=a(74511),C=a(84387),S=s(a(61748)),y=a(87931),b=a(59871),E=s(a(35953)),T=a(58827),x=a(85893);const M=["msgs"],P=["msgs"];class A extends u.Component{constructor(e){var t;super(e),t=this,this._renderedMsgs={},this._renderedDateMarkers={},this._renderedAlbums={},this._renderedMsgToAlbum={},this._refUnread=(0,u.createRef)(),this._getRefUnread=()=>this._refUnread.current,this._handleRefreshMessages=()=>{this.forceUpdate()},this._handleOpenMediaViewerForAlbumMedia=e=>{const t=this._renderedMsgToAlbum[e.id.toString()];if(!t)return;if(t.isGroupedSticker())return;const a=t.props.msgs,s=new Set((a||[]).map((e=>e.id.toString()))),n=()=>{const a=t.refAlbumComponents[e.id.toString()];return null==a?void 0:a.getContainerElement()};this._renderedMsgToAlbum[e.id.toString()]&&f.Cmd.mediaViewerModal({msg:e,getZoomNode:n,highlightedMsgIds:s})},this.handleMsgKeyChange=e=>{let{newKey:t,oldKey:a}=e;const s=t.toString(),n=a.toString(),i=this._renderedMsgs[n];i&&(delete this._renderedMsgs[n],this._renderedMsgs[s]=i)},this._handleMsgRendered=(e,t)=>{e?this._renderedMsgs[t]=e:delete this._renderedMsgs[t]},this._rowRenderers={msg:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(((e,t,a,s)=>{const n=this.props;let i;i=s&&!a?y.MsgPosition.FRONT:s&&a?y.MsgPosition.MID:!s&&a?y.MsgPosition.END:y.MsgPosition.SINGLE;const r=e.type===p.default.MSG_TYPE.IMAGE||e.type===p.default.MSG_TYPE.VIDEO||e.type===p.default.MSG_TYPE.AUDIO;return(0,x.jsx)(T.Wrapper,{ref:t=>{this._handleMsgRendered(t,e.id.toString())},msg:e.unsafe(),displayType:p.default.DISP_TYPE.CONVERSATION,isMsgVisible:r?n.isMsgVisible:()=>{},selectable:n.selectable,selectedMessages:n.selectedMessages,onMessageSelect:n.onMessageSelect,position:i,isFocusedMsg:t,getSequentialMsg:this.props.getSequentialMsg,isFocusable:!0},"msg-"+e.id.toString())})),album:(e,t,a,s,n,i)=>{const r=this.props;let o;return o=s&&!a?y.MsgPosition.FRONT:s&&a?y.MsgPosition.MID:!s&&a?y.MsgPosition.END:y.MsgPosition.SINGLE,(0,x.jsx)(h.default,{msgs:e,ref:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((a=>{this._handleAlbumRendered(a,t,e)})),position:o,isMsgVisible:r.isMsgVisible,selectable:r.selectable,selectedMessages:r.selectedMessages,onMessageSelect:r.onMessageSelect,albumId:t,isFocusedAlbum:n,focusedMsgIndex:i,displayType:p.default.DISP_TYPE.CONVERSATION,isFocusable:!0},"album-"+t)},date:(e,t)=>{const{isLoadingEarlierMsgs:a}=this.props;return(0,x.jsx)(m.default,{ref:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((e=>{this._handleDateMarkerRendered(t,e)})),timestamp:e.t,isFocusable:!a||0!==t},"msg-"+e.id.toString()+"-date")},unread:()=>(0,x.jsx)(E.default,{count:this.props.unreadCount,textContainerRef:this._refUnread},"msg-unread")},this._openMsgContextMenu=e=>{if(e.target instanceof HTMLElement){var t,a;const s=null===(t=e.target.dataset)||void 0===t?void 0:t.id,n=this._renderedMsgs[s]||this._renderedAlbums[s];null==n||null===(a=n.openContextMenu)||void 0===a||a.call(n)}},this._handleBeforeEnd=(0,i.default)((function*(){yield f.Cmd.openChatBottom(t.props.chat)}));const{msgs:a}=e;this._latestMsgWhenChatOpen=a.length>0?a[a.length-1]:null}shouldComponentUpdate(e){const{msgs:t}=e,a=(0,n.default)(e,M),s=this.props,{msgs:i}=s,o=(0,n.default)(s,P);return!(0,c.default)(a,o)||!(0,r.default)(t,i)}getSnapshotBeforeUpdate(){var e;const t=this.props.getScrollContainer(),a=this.props.msgs.find((e=>this._renderedMsgs.hasOwnProperty(e.id)));if(null==a)return null;const s=a.id.toString();return{commonMessageId:s,commonMessageTop:(0,o.default)(null===(e=this.getMsgWrapperRef(s))||void 0===e?void 0:e.getContainerElement(),"this.getMsgWrapperRef(commonMessageId)?.getContainerElement()").offsetTop-t.scrollTop}}componentDidMount(){this.props.listeners.add(b.MsgCollection,"change:msgKey",this.handleMsgKeyChange),this.props.listeners.add(f.Cmd,"refresh_messages",this._handleRefreshMessages),this.props.listeners.add(f.Cmd,"open_media_viewer_for_album_media",this._handleOpenMediaViewerForAlbumMedia)}componentDidUpdate(e,t,a){const s=this.props.getScrollContainer();if(null!=a){var n;const{commonMessageId:e,commonMessageTop:t}=a,i=(0,o.default)(null===(n=this.getMsgWrapperRef(e))||void 0===n?void 0:n.getContainerElement(),"this.getMsgWrapperRef(commonMessageId)?.getContainerElement()");s.scrollTop=i.offsetTop-t}}getMsgVisibility(e){const t=this.props.getScrollContainer(),a=t.scrollTop,s=a+t.clientHeight,n=null==e?void 0:e.getContainerElement();return n?n.offsetTop+n.clientHeight<=a?{visibility:p.default.VISIBILITY.ABOVE,offset:n.offsetTop-a}:n.offsetTop>=s?{visibility:p.default.VISIBILITY.BELOW,offset:n.offsetTop-a}:{visibility:p.default.VISIBILITY.VISIBLE,offset:n.offsetTop-a}:(__LOG__(3)`getMsgVisibility on invalid ref: ${e}`,{visibility:p.default.VISIBILITY.VISIBLE,offset:0})}getMsgWrapperRef(e){return this._renderedMsgs[e]||this._renderedMsgToAlbum[e]}getMsgComponentRef(e){return this._renderedMsgs[e]?this._renderedMsgs[e].getMsgComponentRef():this._renderedMsgToAlbum[e]?this._renderedMsgToAlbum[e].refAlbumComponents[e]&&this._renderedMsgToAlbum[e].refAlbumComponents[e].getRef():void 0}getDateMarkerRef(e){return this._renderedDateMarkers[e]}_handleDateMarkerRendered(e,t){t?this._renderedDateMarkers[e]=t:delete this._renderedDateMarkers[e]}getRenderedDateMarkers(){return this._renderedDateMarkers}_handleAlbumRendered(e,t,a){e?(this._renderedAlbums[t]=e,a.forEach((t=>{this._renderedMsgToAlbum[t.id.toString()]=e}))):delete this._renderedAlbums[t]}render(){var e,t;const{msgs:a,focusedMsgCtx:s,unreadCount:n}=this.props;let i,r;s&&(i=s.msg,s.isUnreadDivider&&n>0&&(r=s.msg));const o=(0,l.default)(S.default.messageList,{[S.default.messageListSelectable]:this.props.selectable}),u={[`${g.default.LR("right","left")}`]:this._openMsgContextMenu},c=g.default.LR(d.default._("Message list. Press right arrow key on a message to open message context menu.",null,{hk:"liGkN"}),d.default._("Message list. Press left arrow key on a message to open message context menu.",null,{hk:"4FnAYZ"}));return(0,x.jsx)(v.ListHotKeys,{dataTab:p.default.TAB_ORDERS.MESSAGE_LIST,className:o,getPriorityFocusItem:this._getRefUnread,onBeforeEnd:this._handleBeforeEnd,handlers:u,role:"region","aria-label":c,children:(0,_.default)(this._rowRenderers,a,null===(e=i)||void 0===e?void 0:e.safe(),null===(t=r)||void 0===t?void 0:t.safe(),n,this._latestMsgWhenChatOpen)})}}A.displayName="MessageList";const I=(0,C.ListenerHOC)(A);t.default=class extends I{getDateMarkerRef(e){return this.getComponent().getDateMarkerRef(e)}getMsgComponentRef(e){return this.getComponent().getMsgComponentRef(e)}getMsgWrapperRef(e){return this.getComponent().getMsgWrapperRef(e)}getMsgVisibility(e){return this.getComponent().getMsgVisibility(e)}getRenderedDateMarkers(){return this.getComponent().getRenderedDateMarkers()}}},24317:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{recordingSession:t,onComplete:a}=e,s=(0,r.useRef)(),[l,k]=(0,r.useState)((()=>{switch(t.state){case m.RecordingSessionState.PAUSED:return x.PREVIEW;case m.RecordingSessionState.RECORDING:return x.RECORDER;default:throw new Error(`Invalid recording session state: ${t.state}`)}})),[O,R]=(0,r.useState)((()=>l===x.PREVIEW?t.getAudioForPlayback():null)),D=()=>{R(null),null==O||O.dispose()},L=null==O?void 0:O.getAudio(),B=(0,r.useRef)(),F=(0,r.useRef)(),G=(0,r.useRef)(t);G.current=t;const U=(0,g.default)(t,"change:duration",(()=>Math.floor(t.duration))),[V,H]=(0,r.useState)((()=>Math.floor((null==L?void 0:L.currentTime)||0))),[K,q]=(0,r.useState)((()=>0===((null==L?void 0:L.currentTime)||0))),W=e=>{H(Math.floor(e)),q(0===e)};(0,v.useListener)(L,"timeupdate",(()=>{var e;W(null!==(e=null==L?void 0:L.currentTime)&&void 0!==e?e:0)}));const[Y,z]=(0,r.useState)(null),{exceedsMinDuration:Q,isRecording:$}=(0,C.useModelValues)(t,["exceedsMinDuration","isRecording"]);(0,v.useListener)(t,"change:state",(()=>{t.state!==m.RecordingSessionState.STOPPED&&t.state!==m.RecordingSessionState.ERROR||a()}));const X=(0,g.default)(L,["play","pause"],(()=>null!=L&&!L.paused)),J=function(){const[e,t]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{const e=setTimeout((()=>{t(!0)}),250),a=()=>{t(!1),s()};window.addEventListener("mouseup",a);const s=()=>{window.removeEventListener("mouseup",a),clearTimeout(e)};return s}),[]),e}();(0,r.useEffect)((()=>{$&&setTimeout((()=>{var e;null===(e=B.current)||void 0===e||e.focus()}),100)}),[$]),(0,r.useEffect)((()=>{l===x.PREVIEW&&(G.current.markDraftPreviewSeen(),setTimeout((()=>{var e;null===(e=F.current)||void 0===e||e.focus()}),100))}),[l]),(0,S.default)((()=>{null==L||L.pause(),D(),t.pause()})),(0,v.useListener)(t,"change:isRecording",(()=>{if(t.isRecording)return;if(t.state!==m.RecordingSessionState.PAUSED)return;D();const e=t.getAudioForPlayback();R(e),W(0),k(x.PREVIEW)}));const Z=()=>{t.incrementPauseButtonCount(),t.pause()},ee=()=>{t.incrementPauseButtonCount(),t.pause()},te=()=>{(0,n.default)((function*(){null==L||L.pause(),k(x.RECORDER);(yield t.resume())||k(x.PREVIEW)}))()};(0,v.useListener)(L,"ended",(()=>{(0,i.default)(L,"audio").load()}));const ae=(0,r.useCallback)((()=>{var e;return null!==(e=null==L?void 0:L.currentTime)&&void 0!==e?e:0}),[L]),se=(0,y.default)((()=>t.getPreciseDuration())),ne=(0,y.default)((()=>t.duration)),ie=(0,y.default)((()=>t.getLiveWaveformSamples())),re=(0,y.default)((()=>t.getCorrectedWaveformSamples())),oe=(0,y.default)((e=>{W(e),z(null),(0,i.default)(L,"audio").currentTime=e,t.incrementDraftSeekCount()})),le=(0,y.default)((e=>{z(Math.floor(e))})),de=e=>{const[a,s,n,i]=e===E.WaveformMode.RECORDER?[j.recorderWaveformContainer,ie,se,$]:[j.previewWaveformContainer,re,ne,X];return(0,T.jsx)("div",{className:(0,o.default)(j.shared,a),children:(0,T.jsx)(E.Waveform,{location:E.WaveformLocation.DRAFT_PREVIEW,sampleRate:t.getWaveformSampleRate(),getSamples:s,getCurrentTime:ae,getDuration:n,live:i,mode:e,onSeek:le,onSeekEnd:oe,tabIndex:d.default.TAB_ORDERS.PTT_BUTTON})})};let ue,ce;_.ServerProps.pttPausableEnabled?ce=(0,T.jsx)("div",{className:(0,o.default)(A),children:(0,T.jsx)(c.PttPauseAndResumeRecordingButton,{recording:l===x.RECORDER,confirmOnMouseUp:J,onConfirm:l===x.RECORDER?ee:te})}):ue=(0,T.jsx)("div",{className:(0,o.default)(A),children:(0,T.jsx)(p.PttStopButton,{confirmOnMouseUp:J,onConfirm:Z})});const he=(0,T.jsxs)("div",{className:(0,o.default)(I),children:[(0,T.jsx)(N,{time:U}),de(E.WaveformMode.RECORDER),ue]}),fe=null!=Y?Y:K?U:V,pe=(0,T.jsxs)("div",{className:(0,o.default)(w),children:[(0,T.jsx)(h.PttPlayPauseButton,{ref:F,theme:"compose-box",paused:!X,onConfirm:()=>{const e=(0,i.default)(L,"audio");e.paused?(e.play(),t.incrementDraftPlayCount()):e.pause()}}),de(E.WaveformMode.PREVIEW),(0,T.jsx)(N,{time:fe})]});return(0,T.jsxs)("div",{ref:s,className:(0,o.default)(M),children:[(0,T.jsx)(u.PttCancelButton,{ref:B,confirmOnMouseUp:J,onConfirm:()=>{t.stop(m.RecordingSessionStopReason.CANCEL_BUTTON)}}),(0,T.jsx)("div",{className:(0,o.default)(P),children:(0,T.jsxs)(b.default,{transitionName:"fade",children:[l===x.RECORDER?he:null,l===x.PREVIEW?pe:null]})}),ce,(0,T.jsx)(f.PttSendButton,{disabled:!Q,confirmOnMouseUp:J,onConfirm:()=>{t.send()}})]})};var n=s(a(48926)),i=s(a(45095)),r=a(67294),o=s(a(56720)),l=a(22683),d=s(a(69618)),u=a(50270),c=a(90601),h=a(16538),f=a(91921),p=a(22234),m=a(70597),_=a(64551),g=s(a(16704)),v=a(19529),C=a(49082),S=s(a(84215)),y=s(a(83800)),b=s(a(41956)),E=a(89470),T=a(85893);const x=a(54302).Mirrored(["RECORDER","PREVIEW"]),M={display:"p357zi0d",alignItems:"gndfcl4n",width:"ln8gz9je",maxWidth:"ba1bgrqy"},P={position:"g0rxnol2",display:"p357zi0d",flexGrow:"ggj6brxn",flexShrink:"m0h2a7mj",flexBasis:"rjo8vgbg",alignItems:"gndfcl4n",height:"db4qzak4"},A={display:"p357zi0d",marginEnd:"oz083wsx"},I={position:"lhggkp7q",top:"qq0sjtgm",end:"ebjesfe0",bottom:"jxacihee",start:"tkdu00h0",display:"p357zi0d",alignItems:"gndfcl4n",marginStart:"g9zvcdbd"},w={position:"lhggkp7q",top:"qq0sjtgm",end:"ebjesfe0",bottom:"jxacihee",start:"tkdu00h0",display:"p357zi0d",alignItems:"gndfcl4n",marginEnd:"oz083wsx",marginStart:"tigrmefi",backgroundColor:"lbzzw5jd",borderTop:"b16c6ymn",borderEnd:"q1alctvk",borderBottom:"at9xyjjq",borderStart:"q568nw76",borderTopStartRadius:"tt8exp03",borderTopEndRadius:"jdimvq34",borderBottomEndRadius:"nnr224yo",borderBottomStartRadius:"g0zx2qg0",direction:"btzd6xh9",paddingRight:"n9ozkf7y",paddingLeft:"osvl0z4i"},k={minWidth:"rgvqn4sm",fontSize:"p9fp32ui"},j={shared:{display:"p357zi0d",flexGrow:"ggj6brxn",flexShrink:"m0h2a7mj",flexBasis:"rjo8vgbg",height:"stnyektq"},recorderWaveformContainer:{marginEnd:"spjzgwxb",marginStart:"qnz2jpws"},previewWaveformContainer:{marginRight:"b0ysteiu",marginLeft:"ro9hr2xy"}};function N(e){return(0,T.jsx)("div",{className:(0,o.default)(k),role:"timer",children:l.Clock.durationStr(e.time)})}},46239:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{ariaLabel:t,value:a,valueText:s,min:l,max:h,smallSkip:f,largeSkip:p,onChange:m,onCommit:_,disabled:g,children:v,tabIndex:C,inset:S=[0,0]}=e,[y,b]=(0,o.useState)(!1),E=(0,o.useCallback)((()=>{b(!0)}),[b]),T=(0,o.useCallback)((()=>{b(!1)}),[b]),x=(0,o.useRef)(),M=(0,o.useRef)(),P=(0,o.useRef)(),A=(0,o.useCallback)((e=>{const t=(0,i.default)(M.current,"minPxRef.current"),a=(0,i.default)(P.current,"maxPxRef.current"),s=e.clientX,r=(0,n.default)((s-t)/(a-t),0,1);return l+r*(h-l)}),[l,h]),I=(0,o.useCallback)((e=>{e.preventDefault(),0!==e.buttons?null==m||m(A(e)):T()}),[T,m,A]),w=(0,o.useCallback)((e=>{if(0!==e.button)return;T();const t=A(e);null==m||m(t),_(t)}),[A,T,m,_]);return(0,o.useEffect)((()=>{if(y)return window.addEventListener("mousemove",I),window.addEventListener("mouseup",w),()=>{window.removeEventListener("mousemove",I),window.removeEventListener("mouseup",w)}}),[I,w,y]),(0,u.jsx)("div",{ref:x,className:(0,r.default)(d.default.container,{[d.default.disabled]:g}),role:"slider","aria-label":t,"aria-valuenow":a,"aria-valuetext":s,"aria-valuemin":l,"aria-valuemax":h,"data-tab":C,tabIndex:"0",onMouseDown:e=>{var t;if(0!==e.button)return;if(g)return;e.preventDefault();const a=(0,i.default)(null===(t=x.current)||void 0===t?void 0:t.getBoundingClientRect(),"containerRef.current?.getBoundingClientRect()"),[s,n]=S;M.current=a.left+s,P.current=a.left+a.width-n,E(),null==m||m(A(e))},onKeyDown:e=>{if(g)return;let t;switch(e.key){case c.ARROW_RIGHT:case c.ARROW_UP:t=f;break;case c.ARROW_LEFT:case c.ARROW_DOWN:t=-f;break;case c.PAGE_UP:t=p;break;case c.PAGE_DOWN:t=-p}if(null!=t){e.preventDefault();const s=(0,n.default)(a+t,l,h);_(s)}},children:v})};var n=s(a(74691)),i=s(a(45095)),r=s(a(94184)),o=a(67294),l=s(a(54392)),d=s(a(36496)),u=a(85893);const{KEYBOARD_EVENT_KEY_VALUE:c}=l.default},44693:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.OpusRecorderState=t.OpusRecorder=void 0;var n=s(a(81109)),i=s(a(48926)),r=s(a(45095)),o=s(a(70714)),l=s(a(72451)),d=s(a(42372));const u={bitRate:16e3,bufferLength:4096,numberOfChannels:1,encoderSampleRate:16e3,maxBuffersPerPage:40,encoderApplication:2048,encoderFrameSize:20,streamOptions:{optional:[],mandatory:{googEchoCancellation:!1,googAutoGainControl:!1,googNoiseSuppression:!1,googHighpassFilter:!1}}},c=a(54302).Mirrored(["INACTIVE","RECORDING","PAUSED","STOPPED"]);t.OpusRecorderState=c;function h(e){const t=e.reduce(((e,t)=>e+t.length),0),a=new Uint8Array(t);let s=0;for(const t of e)a.set(t,s),s+=t.length;return new Blob([a],{type:"audio/ogg; codecs=opus"})}function f(){return(f=(0,i.default)((function*(e,t,a,s){const n=yield e(s);if(s.aborted||null==n)return!1;const i=t.createMediaStreamSource(n);return a.forEach((e=>{i.connect(e)})),s.addEventListener("abort",(()=>{n.getTracks().forEach((e=>{e.stop()})),i.disconnect()}),{once:!0}),!0}))).apply(this,arguments)}t.OpusRecorder=class{constructor(e){if(this._duration=0,this._recordedPages=[],this._state=c.INACTIVE,this._isFirstBuffer=!1,this._requestCount=0,this._pendingFlushResolvers=new Map,this._handleEncoderMessage=e=>{const{data:t}=e;switch(t.message){case"page":this._storePage(t.page);break;case"flushed":this._handleFlushed(t.requestId);break;default:throw new Error(`Invalid message event type: ${t.message}`)}},!Boolean(window.AudioContext&&l.default))throw new Error("Recording is not supported in this browser");this._createStream=e.createStream,this._onDuration=e.onDuration,this._onPause=e.onPause,this._onResume=e.onResume,this._onStart=e.onStart,this._onStop=e.onStop,this._completeRecordingPromise=new Promise((e=>{this._resolveCompleteRecordingPromise=e})),this._audioContext=new AudioContext,this._encoderNode=this._audioContext.createScriptProcessor(u.bufferLength,u.numberOfChannels,u.numberOfChannels),this._encoderNode.onaudioprocess=e=>{this._encodeBuffers(e.inputBuffer)},this._monitorNode=this._audioContext.createGain()}getState(){return this._state}start(){var e=this;return(0,i.default)((function*(){var t,a;switch(e._state){case c.RECORDING:return!0;case c.STOPPED:return!1;case c.PAUSED:return e.resume();case c.INACTIVE:}e._recordedPages=[],e._isFirstBuffer=!0,e._duration=0;const s=new d.default;e._encoder=s,s.addEventListener("message",e._handleEncoderMessage);return!!(yield e._startRecording())&&(null===(t=e._onStart)||void 0===t||t.call(e),null===(a=e._onDuration)||void 0===a||a.call(e,e._duration),s.postMessage({command:"encode-init",config:(0,n.default)((0,n.default)({},u),{},{originalSampleRate:e._audioContext.sampleRate})}),e._encoderNode.connect(e._audioContext.destination),!0)}))()}stop(){var e,t;this._state!==c.STOPPED&&(this._state=c.STOPPED,null===(e=this._recordingAbortController)||void 0===e||e.abort(),this._audioContext.close&&this._audioContext.close(),this._monitorNode.disconnect(),this._encoderNode.disconnect(),null===(t=this._encoder)||void 0===t||t.postMessage({command:"encode-done"}))}pause(){var e,t;this._state===c.RECORDING&&(this._state=c.PAUSED,null===(e=this._recordingAbortController)||void 0===e||e.abort(),null===(t=this._onPause)||void 0===t||t.call(this))}resume(){var e=this;return(0,i.default)((function*(){var t;switch(e._state){case c.RECORDING:return!0;case c.STOPPED:return!1;case c.INACTIVE:throw new Error("Attempting to resume recording that hasn't started");case c.PAUSED:}return!!(yield e._startRecording())&&(null===(t=e._onResume)||void 0===t||t.call(e),!0)}))()}getDuration(){return this._duration}getMonitorNode(){return this._monitorNode}_encodeBuffers(e){var t;if(this._isFirstBuffer)return void(this._isFirstBuffer=!1);if(this._state!==c.RECORDING)return;const a=[];for(let t=0;t<e.numberOfChannels;t++)a[t]=e.getChannelData(t);(0,r.default)(this._encoder,"this._encoder").postMessage({command:"encode",buffers:a}),this._duration+=e.duration,null===(t=this._onDuration)||void 0===t||t.call(this,this._duration)}_getNextRequestId(){return this._requestCount++,this._requestCount}_startRecording(){var e=this;return(0,i.default)((function*(){e._state=c.RECORDING,e._recordingAbortController=new o.default;return!!(yield function(){return f.apply(this,arguments)}(e._createStream,e._audioContext,[e._encoderNode,e._monitorNode],e._recordingAbortController.signal))||(e.stop(),!1)}))()}_storePage(e){if(this._recordedPages.push(e),4&e[5]){var t;(0,r.default)(this._encoder,"this._encoder").removeEventListener("message",this._handleEncoderMessage),this._resolveCompleteRecordingPromise(h(this._recordedPages)),this._recordedPages=[],null===(t=this._onStop)||void 0===t||t.call(this)}}_handleFlushed(e){const t=(0,r.default)(this._pendingFlushResolvers.get(e),"this._pendingFlushResolvers.get(requestId)");this._pendingFlushResolvers.delete(e),t(h(this._recordedPages))}getPartialRecording(){const e=this._getNextRequestId(),t=new Promise((t=>{this._pendingFlushResolvers.set(e,t)}));return(0,r.default)(this._encoder,"this._encoder").postMessage({command:"flush",requestId:e}),t}getCompleteRecording(){return this._completeRecordingPromise}}},52039:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=class{start(){this._startTime=Date.now()}stop(){this._stopTime=Date.now()}pause(){this.stop()}resume(){this._startTime=Date.now()-this.getTime(),this._stopTime=null}getTime(){var e;const t=this._startTime;if(null==t)return 0;return(null!==(e=this._stopTime)&&void 0!==e?e:Date.now())-t}}},69547:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(48926)),i=a(44693),r=s(a(27574));t.default=class{constructor(e){this._handleOpusRecorderDuration=()=>{var e;this._waveformRecorder.commitSamples(this.getDuration()),null===(e=this._onDuration)||void 0===e||e.call(this,this.getDuration())},this._onDuration=e.onDuration,this._opusRecorder=new i.OpusRecorder({createStream:e.createStream,onDuration:this._handleOpusRecorderDuration}),this._waveformRecorder=new r.default(this._opusRecorder.getMonitorNode(),e.waveformSampleRate)}start(){var e=this;return(0,n.default)((function*(){return!!(yield e._opusRecorder.start())&&(e._waveformRecorder.start(),!0)}))()}stop(){this._opusRecorder.stop(),this._waveformRecorder.stop()}pause(){this._opusRecorder.pause(),this._waveformRecorder.pause()}resume(){var e=this;return(0,n.default)((function*(){return!!(yield e._opusRecorder.resume())&&(e._waveformRecorder.resume(),!0)}))()}getDuration(){return this._opusRecorder.getDuration()}getPreciseDuration(){var e;return null!==(e=this._waveformRecorder.getDuration())&&void 0!==e?e:0}getLiveWaveformSamples(){return this._waveformRecorder.getSamples()}getCorrectedWaveformSamples(){return this._waveformRecorder.getCorrectedSamples()}getPartialRecording(){return this._opusRecorder.getPartialRecording()}getCompleteRecording(){return this._opusRecorder.getCompleteRecording()}}},27574:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(45095)),i=s(a(52039)),r=s(a(40958)),o=s(a(70242));t.default=class{constructor(e,t){this._durationTimer=new i.default,this._samples=[],this._correctedSamples=[],this._pendingAmplitude=0,this._updateSamples=()=>{this._pendingAmplitude=Math.max(this._pendingAmplitude,this._getCurrentAmplitude());const e=this._samples.length/this._sampleRate,t=Math.floor((this.getDuration()-e)*this._sampleRate);if(0!==t){for(let e=0;e<t;e++)this._samples.push(this._pendingAmplitude);this._pendingAmplitude=0}},this._committedSamplesRangeEnd=0,this._analyserNode=function(e){const t=e.context.createAnalyser();return t.fftSize=32,t.smoothingTimeConstant=0,t.minDecibels=-60,t.maxDecibels=-10,t}(e),e.connect(this._analyserNode),this._sampleRate=t}start(){this._durationTimer.start(),this._startSamplesUpdater()}stop(){var e;this._durationTimer.stop(),null===(e=this._stopSamplesUpdater)||void 0===e||e.call(this)}pause(){var e;this._durationTimer.pause(),null===(e=this._stopSamplesUpdater)||void 0===e||e.call(this)}resume(){this._durationTimer.resume(),this._startSamplesUpdater()}_startSamplesUpdater(){this._stopSamplesUpdater=(0,o.default)(this._updateSamples)}_getCurrentAmplitude(){var e;const t=(0,n.default)(this._analyserNode,"this._analyserNode");this._analyserData=null!==(e=this._analyserData)&&void 0!==e?e:new Uint8Array(t.frequencyBinCount);const a=this._analyserData;return t.getByteFrequencyData(a),Math.max(...a)/255}commitSamples(e){const t=Math.floor(e*this._sampleRate)-this._correctedSamples.length,a=this._samples.length-this._committedSamplesRangeEnd;if(0===t||0===a)return;const s=this._samples.slice(this._committedSamplesRangeEnd,this._samples.length),n=(0,r.default)(s,t);for(const e of n)this._correctedSamples.push(e);this._committedSamplesRangeEnd=this._samples.length}getSamples(){return this._samples}getDuration(){var e;return(null!==(e=this._durationTimer.getTime())&&void 0!==e?e:0)/1e3}getCorrectedSamples(){return this._correctedSamples}}},70597:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.RecordingSessionStopReason=t.RecordingSessionState=t.RecordingSession=t.AudioResource=void 0,t.createRecordingSession=function(e){return new F({_chat:e.chat})};var i=n(a(48926)),r=n(a(59854)),o=a(89385),l=a(50796),d=n(a(45095)),u=n(a(41143)),c=a(76716),h=a(97278),f=a(11290),p=a(31218),m=a(88102),_=n(a(52665)),g=s(a(64103)),v=a(18671),C=n(a(43725)),S=a(78986),y=s(a(58254)),b=a(97692),E=n(a(11339)),T=n(a(34949)),x=a(371),M=a(67880),P=n(a(84644)),A=n(a(69547)),I=n(a(40958)),w=n(a(28245)),k=a(64551),j=a(77591),N=a(85893);const O=a(54302).Mirrored(["NOT_STARTED","RECORDING","PAUSED","STOPPED","ERROR"]);t.RecordingSessionState=O;const R=a(54302).Mirrored(["CANCEL_BUTTON","PTT_TOO_SHORT","SENT","OTHER"]);t.RecordingSessionStopReason=R;class D extends f.BaseModel{constructor(){super(...arguments),this.duration=(0,f.prop)(0),this.exceedsMinDuration=(0,f.prop)(!1),this.state=(0,f.prop)(O.NOT_STARTED),this._draftPreviewSeen=(0,f.prop)(!1),this._draftPlayCount=(0,f.prop)(0),this._draftSeekCount=(0,f.prop)(0),this._pauseCount=(0,f.prop)(0),this._stopTapCount=(0,f.prop)(0),this.isRecording=(0,f.derived)(this._isRecording,["state"])}initialize(){super.initialize();let e=null;this.on("change:isRecording",(()=>{var t;this.isRecording?(e=c.MainAudioChannel.claim(this,(()=>{this.pause()})),(0,x.markRecording)(this._chat)):(null===(t=e)||void 0===t||t(),(0,x.markPaused)(this._chat))}))}_isRecording(){return this.state===O.RECORDING}start(){var e=this;return(0,i.default)((function*(){switch(e.state){case O.NOT_STARTED:break;case O.RECORDING:return!0;case O.PAUSED:return e.resume();case O.STOPPED:case O.ERROR:throw new Error(`Can't start recording from state ${e.state}`)}e.state=O.RECORDING;try{e._recorder=new A.default({createStream:G,waveformSampleRate:e.getWaveformSampleRate(),onDuration:t=>{e.duration=t,e.exceedsMinDuration=t>=1}});if(yield e._recorder.start())return a(68315).PresenceCollection.update(e._chat.presence.id).catch((0,l.filteredCatch)(j.WebdDrop,(()=>{}))),(0,M.incrementPttDailyCount)(M.PttDailyCountKind.RECORD,(0,d.default)(e._chat.kind,"_this._chat.kind")),!0}catch(e){__LOG__(4,void 0,new Error)`PTT Recording Error\n${(0,w.default)(e)}`}return e._endSession(),e.state=O.ERROR,!1}))()}getLiveWaveformSamples(){var e,t;return null!==(e=null===(t=this._recorder)||void 0===t?void 0:t.getLiveWaveformSamples())&&void 0!==e?e:[]}getCorrectedWaveformSamples(){var e,t;return null!==(e=null===(t=this._recorder)||void 0===t?void 0:t.getCorrectedWaveformSamples())&&void 0!==e?e:[]}getScaledWaveformSamples(){return(0,I.default)(this.getCorrectedWaveformSamples(),64).map((e=>Math.floor(100*e)))}getPreciseDuration(){var e,t;return null!==(e=null===(t=this._recorder)||void 0===t?void 0:t.getPreciseDuration())&&void 0!==e?e:0}_endSession(){var e;null===(e=this._recorder)||void 0===e||e.stop()}pause(){if(this.state!==O.RECORDING)return;if(!this.exceedsMinDuration)return void this.stop(R.PTT_TOO_SHORT);this.state=O.PAUSED;(0,d.default)(this._recorder,"this._recorder").pause()}resume(){var e=this;return(0,i.default)((function*(){switch(e.state){case O.RECORDING:return!0;case O.PAUSED:break;case O.NOT_STARTED:case O.STOPPED:case O.ERROR:throw new Error(`Can't resume recording from state ${e.state}`)}e.state=O.RECORDING;try{const t=(0,d.default)(e._recorder,"_this2._recorder");return!!(yield t.resume())||(e.state=O.PAUSED,!1)}catch(t){return e.state=O.ERROR,__LOG__(4,void 0,new Error)`Error resuming recording session\n${(0,w.default)(t)}`,!1}}))()}stop(e){if(this.state===O.STOPPED)return;if(this.state=O.STOPPED,this._endSession(),null==this._recorder)return;e===R.SENT?(0,M.incrementPttDailyCount)(M.PttDailyCountKind.SEND,(0,d.default)(this._chat.kind,"this._chat.kind")):this.duration>1&&(0,M.incrementPttDailyCount)(M.PttDailyCountKind.CANCEL,(0,d.default)(this._chat.kind,"this._chat.kind"));const t=function(e){switch(e){case R.SENT:return E.default.PTT_RESULT_TYPE.SENT;case R.PTT_TOO_SHORT:return E.default.PTT_RESULT_TYPE.TOO_SHORT;case R.CANCEL_BUTTON:return E.default.PTT_RESULT_TYPE.CANCELLED;case R.OTHER:return null}}(e);null!=t&&this._sendPttWamEvent(t)}_getDataForSending(){var e=this;return(0,i.default)((function*(){const t=(0,d.default)(e._recorder,"_this3._recorder"),a=yield t.getCompleteRecording();return T.default.createFromData(a,a.type)}))()}_getDataForPlayback(){var e=this;return(0,i.default)((function*(){const t=(0,d.default)(e._recorder,"_this4._recorder"),a=yield t.getPartialRecording(),s=yield(0,b.transcode)(a);return T.default.createFromData(s,s.type)}))()}getAudioForPlayback(){return new V((()=>this._getDataForPlayback()))}getWaveformSampleRate(){return 8.5}send(){var e=this;return(0,i.default)((function*(){const t=(0,d.default)(e._recorder,"_this5._recorder"),a=e._chat,s=(0,P.default)(e._getDataForSending(),a.deleteSignal),n=a.getComposeContents().ctwaContext||void 0;(0,S.prepRawMedia)(s,{isPtt:!0,precomputedFields:{duration:Math.floor(t.getDuration()),waveform:new Uint8Array(e.getScaledWaveformSamples())}}).sendToChat(a,{quotedMsg:a.composeQuotedMsg||void 0,addEvenWhilePreparing:!0,ctwaContext:n}),a.composeQuotedMsg=null,e.stop(R.SENT),yield s.catch((0,o.catchAbort)((()=>{})))}))()}_sendPttWamEvent(e){var t=this;return(0,i.default)((function*(){var a;const s=(0,d.default)(t._recorder,"_this6._recorder"),n=yield s.getCompleteRecording();new E.default.Ptt({pttSource:E.default.PTT_SOURCE_TYPE.FROM_CONVERSATION,pttResult:e,pttDuration:1e3*Math.round(t.duration),pttSize:(0,r.default)(null!==(a=n.size)&&void 0!==a?a:0,-3),pttStop:t._draftPreviewSeen,pttDraftPlayCnt:t._draftPlayCount,pttDraftSeekCnt:t._draftSeekCount,pttPauseCnt:t._pauseCount,pttStopTapCnt:t._stopTapCount}).commit()}))()}markDraftPreviewSeen(){this._draftPreviewSeen||(this._draftPreviewSeen=!0,(0,M.incrementPttDailyCount)(M.PttDailyCountKind.DRAFT_REVIEW,(0,d.default)(this._chat.kind,"this._chat.kind")))}incrementDraftPlayCount(){this._draftPlayCount++}incrementDraftSeekCount(){this._draftSeekCount++}incrementPauseButtonCount(){k.ServerProps.pttPausableEnabled?(this._pauseCount++,1===this._pauseCount&&(0,M.incrementPttDailyCount)(M.PttDailyCountKind.PAUSED_RECORD,(0,d.default)(this._chat.kind,"this._chat.kind"))):(this._stopTapCount++,(0,u.default)(1===this._stopTapCount,"User interaction should stop the recording a max of one time"),(0,M.incrementPttDailyCount)(M.PttDailyCountKind.STOP_TAP,(0,d.default)(this._chat.kind,"this._chat.kind")))}}function L(){return B.apply(this,arguments)}function B(){return(B=(0,i.default)((function*(){return!0}))).apply(this,arguments)}D.Proxy="recordingSession";const F=(0,f.defineModel)(D);function G(){return U.apply(this,arguments)}function U(){return(U=(0,i.default)((function*(e){if(!(yield L())||e.aborted)return null;if(p.CallCollection.activeCall)return m.Cmd.openModal((0,N.jsx)(_.default,{onOK:()=>m.Cmd.closeModal(),children:C.default.t(614)})),null;const{disposeStream:t,asyncStream:a}=y.start("microphone");e.addEventListener("abort",(()=>{t()}),{once:!0});try{return yield a}catch(e){if(e instanceof g.GUM.NotAllowedError)return m.Cmd.openModal((0,N.jsx)(v.GuidePopup,{messaging:v.Messaging.MIC_FAIL,type:v.TYPE.GUIDE_UNBLOCK})),null;if(e instanceof g.GUM.GUMError)return m.Cmd.openModal((0,N.jsx)(v.GuidePopup,{messaging:v.Messaging.MIC_MISSING,type:v.TYPE.GUIDE_NONE})),null;throw e}}))).apply(this,arguments)}t.RecordingSession=F;class V{constructor(e){var t=this;this._opaqueDataPromise=e();const a=h.AudioManager.createAudioProxy();this._audio=a,this._unregisterFromAudioChannel=c.MainAudioChannel.registerMedia(a),(0,i.default)((function*(){const e=yield t._opaqueDataPromise,a=t._audio;null!=a&&(a.src=e.url())}))()}getAudio(){return(0,u.default)(null!=this._audio,"Audio used after disposal"),this._audio}dispose(){var e=this;null!=this._audio&&(this._unregisterFromAudioChannel(),this._audio=null,(0,i.default)((function*(){(yield e._opaqueDataPromise).autorelease()}))())}}t.AudioResource=V},40958:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return t===e.length?e:0===t?[]:0===e.length?new Array(t).fill(0):t>e.length?function(e,t){let a;if((0,n.default)(t>e.length,`${t} not greater than ${e.length}`),1===e.length)a=0;else{const s=(t-e.length)/(e.length-1);a=1/(1+s)}const s=[];t>=1&&s.push(e[0]);for(let n=1;n<t-1;n++){const t=n*a,o=Math.floor(t);s.push((i=e[o],r=e[Math.ceil(t)],i+(r-i)*(t-o)))}var i,r;t>=2&&s.push(e[e.length-1]);return s}(e,t):function(e,t){(0,n.default)(t<e.length,`${t} not less than ${e.length}`);const a=[],s=t/e.length;let i=0,r=0,o=0;for(const t of e)i+=t,o+=1,r+=s,r>=1&&(a.push(i/o),o=0,i=0,r-=1);o>0&&a.push(i/o);return a}(e,t)};var n=s(a(41143))},89470:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.Waveform=function(e){const[t,{width:a,height:s}]=(0,g.default)(),i=0===a||0===s?null:(0,C.jsx)(b,(0,n.default)((0,n.default)({},e),{},{width:a,height:s}));return(0,C.jsx)("div",{ref:t,className:v.default.container,children:(0,C.jsx)("div",{className:v.default.containerInner,children:i})})},t.WaveformMode=t.WaveformLocation=void 0;var n=s(a(81109)),i=s(a(88306)),r=s(a(45095)),o=a(67294),l=a(22683),d=s(a(30071)),u=s(a(46239)),c=s(a(40958)),h=a(97628),f=s(a(43420)),p=s(a(81559)),m=s(a(88310)),_=s(a(59552)),g=s(a(88738)),v=s(a(4643)),C=a(85893);const S=a(54302).Mirrored(["DRAFT_PREVIEW","INCOMING_UNPLAYED_MESSAGE","INCOMING_PLAYED_MESSAGE","OUTGOING_UNPLAYED_MESSAGE","OUTGOING_PLAYED_MESSAGE"]);t.WaveformLocation=S;const y=a(54302).Mirrored(["RECORDER","PREVIEW"]);t.WaveformMode=y;const b=e=>{const t=(0,o.useRef)(),{getSamples:a,sampleRate:s,width:n,height:i,getCurrentTime:g,getDuration:v,live:S,location:b,mode:j,onSeek:N,onSeekEnd:O,disabled:R,tabIndex:D,skipThumb:L}=e,B=(0,m.default)(),{theme:F}=(0,o.useContext)(h.ThemeContext),G=k(F,b),[U,V]=(0,o.useState)(null),[H,K]=(0,o.useState)({value:g(),max:v()}),q=(0,p.default)((()=>{K({value:g(),max:v()})}),500),W=(0,o.useCallback)((()=>{q(),q.flush()}),[q]);(0,o.useEffect)((()=>{j===y.PREVIEW&&W()}),[j,W]);const Y=(0,_.default)((()=>{const e=(0,d.default)((e=>{let{samples:t,inputSize:a,desiredSize:s}=e;return(0,c.default)(t,s)}));return(t,a)=>e({samples:t,inputSize:t.length,desiredSize:a})})),z=(0,o.useCallback)((()=>{q(),function(e){const{canvas:t,width:a,height:s,currentTime:n,duration:i,sampleRate:r,colors:o,mode:l,pixelRatio:d,scaleSamples:u}=e;let c,h,f,p;const m=0===i?0:n/i;if(l===y.RECORDER){c=e.samples;const t=a-i*r*x;h=t>0?0:Math.floor(-t/x),f=t+h*x,p=a}else{c=u(e.samples,I(a));const[t,s]=w(a);f=t-1.25-T,h=0;const n=t-1.25;p=n+m*(a-s+1.25-n)}const _=t.getContext("2d");_.lineCap="round",_.setTransform(d,0,0,d,0,0),_.clearRect(0,0,a,s);for(let e=h;e<c.length;e++){const t=f+(e-h)*x+T;let n;if(l===y.PREVIEW)n=1;else{const e=t,s=a-(t+E);n=A(e<s?Math.min(1,e/7):Math.min(1,s/14))}const i=Math.max(0,n*(M+c[e]*(s-M)));P(_,o,t,(s-i)/2,E,i,p)}if(l===y.PREVIEW&&!e.skipThumb){const[e,t]=w(a);!function(e,t,a,s){e.beginPath(),e.arc(t,a,6,0,2*Math.PI,!1),e.fillStyle=s,e.fill()}(_,e+m*(a-t-e),s/2,o.thumb)}}({canvas:(0,r.default)(t.current,"canvasRef.current"),samples:a(),width:n,height:i,currentTime:null!=U?U:g(),duration:v(),sampleRate:s,colors:G,mode:j,pixelRatio:B,scaleSamples:Y.current,skipThumb:null!=L&&L})}),[t,a,n,i,g,U,v,s,G,j,q,B,Y,L]);(0,f.default)(z,{active:S}),(0,o.useEffect)((()=>{S||z()}),[S,z]);const Q=(0,o.useCallback)((e=>{null==N||N(e),V(e),z()}),[V,N,z]),$=(0,o.useCallback)((e=>{V(null),null==N||N(e),O(e),z(),W()}),[V,N,O,z,W]),X=(0,C.jsx)("canvas",{ref:t,width:B*n,height:B*i,style:{width:`${n}px`,height:`${i}px`}});if(j===y.RECORDER)return X;const{value:J,max:Z}=H,ee=l.Clock.durationStr(J)+"/"+l.Clock.durationStr(Z);return(0,C.jsx)(u.default,{value:J,valueText:ee,min:0,max:Z,smallSkip:1,largeSkip:10,onChange:Q,onCommit:$,disabled:R,tabIndex:D,inset:w(n),children:X})},E=2.5,T=.9,x=4.3,M=E;function P(e,t,a,s,n,i,r){if(0===n||0===i)return;const o=Math.min(n/2,i/2),l=r>=a+n?t.barColorPlayed:t.barColorUnplayed;i<=n?(e.fillStyle=l,e.beginPath(),e.arc(a+n/2,s+i/2,o,0,2*Math.PI),e.fill()):(e.strokeStyle=l,e.lineWidth=2*o,e.beginPath(),e.moveTo(a+n/2,s+o),e.lineTo(a+n/2,s+i-o),e.stroke()),r>a&&r<a+n&&(e.globalCompositeOperation="source-atop",e.fillStyle=t.barColorPlayed,e.rect(a,s,r-a,i),e.fill(),e.globalCompositeOperation="source-over")}function A(e){return e<.5?4*e*e*e:1-(-2*e+2)**3/2}function I(e){return Math.floor((e-12)/x)}function w(e){const t=(e-x*(I(e)-1))/2;return[t,t]}const k=(0,i.default)(((e,t)=>({barColorUnplayed:j("barColorUnplayed",t),barColorPlayed:j("barColorPlayed",t),thumb:j("thumb",t)})),((e,t)=>`${e} ${t}`));function j(e,t){return getComputedStyle((0,r.default)(document.body,"document.body")).getPropertyValue((0,r.default)(N.get(t),"CSS_VARIABLE_NAMES.get(location)")[e]).trim()}const N=new Map([[S.DRAFT_PREVIEW,{barColorUnplayed:"--ptt-waveform-preview-unplayed",barColorPlayed:"--ptt-waveform-preview-played",thumb:"--ptt-draft-thumb"}],[S.INCOMING_UNPLAYED_MESSAGE,{barColorUnplayed:"--ptt-waveform-incoming-unplayed",barColorPlayed:"--ptt-waveform-incoming-played",thumb:"--ptt-thumb-incoming-unplayed"}],[S.INCOMING_PLAYED_MESSAGE,{barColorUnplayed:"--ptt-waveform-incoming-unplayed",barColorPlayed:"--ptt-waveform-incoming-played",thumb:"--ptt-thumb-incoming-played"}],[S.OUTGOING_UNPLAYED_MESSAGE,{barColorUnplayed:"--ptt-waveform-outgoing-unplayed",barColorPlayed:"--ptt-waveform-outgoing-played",thumb:"--ptt-thumb-outgoing-unplayed"}],[S.OUTGOING_PLAYED_MESSAGE,{barColorUnplayed:"--ptt-waveform-outgoing-unplayed",barColorPlayed:"--ptt-waveform-outgoing-played",thumb:"--ptt-thumb-outgoing-played"}]])},63639:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const{onConfirm:a}=e,s=null!==(t=e.disabled)&&void 0!==t&&t;return(0,u.jsx)("button",{"data-a8n":n.default.key("ptt-ready-btn"),className:l.default.btnPtt,onMouseDown:e=>{0===e.button&&a()},onKeyPress:e=>{e.key!==c.ENTER&&e.key!==c.SPACE||(e.preventDefault(),e.stopPropagation(),a())},disabled:s,"aria-label":i.default._("Voice message",null,{hk:"3xevvy"}),"data-tab":s?void 0:r.default.TAB_ORDERS.PTT_BUTTON,children:(0,u.jsx)(d.default,{name:"ptt"})})};var n=s(a(99964)),i=s(a(48360)),r=s(a(69618)),o=s(a(54392)),l=s(a(66967)),d=s(a(23217)),u=a(85893);const{KEYBOARD_EVENT_KEY_VALUE:c}=o.default},40639:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,y.default)(),a=(0,E.useModelValues)(e.chat,["id","isPSA","shouldAppearInList","trusted","isGroup","vcardDismissed"]),s=(0,E.useModelValues)(e.contact,["id","isBusiness","verifiedLevel","formattedName","businessProfile"]),M=(0,T.default)();(0,b.useListener)(r.BlocklistCollection,["add","remove","reset"],t);const P=()=>{(0,_.sendSpamReport)(a,v.SpamFlow.Chat),l.Cmd.closeModal()},A=()=>{(0,_.sendSpamExitClear)(a,v.SpamFlow.Block),l.Cmd.closeModal()},I=()=>{(0,_.sendSpamBlockClear)(a,v.SpamFlow.Block),l.Cmd.closeModal()},w=()=>{l.Cmd.openModal((0,x.jsx)(m.default,{isGroupChat:!0,onReport:P,onReportExitClear:A,onCancel:()=>l.Cmd.closeModal()}))},k=()=>{l.Cmd.deleteOrExitChat(a)},j=()=>{l.Cmd.openModal((0,x.jsx)(m.default,{isBusiness:s.isBusiness,isGroupChat:!1,onReport:P,onReportBlockClear:I,onCancel:()=>l.Cmd.closeModal()}))},N=()=>{(0,n.blockContact)(s).catch((()=>{})),l.Cmd.closeModal()},O=()=>{(0,_.sendSpamReport)(a,v.SpamFlow.Block),(0,n.blockContact)(s).catch((()=>{})),l.Cmd.closeModal()},R=()=>{(0,_.sendNotSpam)(a,!0).catch((()=>{}))},D=()=>{l.Cmd.openModal((0,x.jsx)(i.default,{contact:s,onCancel:()=>l.Cmd.closeModal(),onBlock:N,onReportSpamBlock:O}))},L=()=>{(0,n.unblockContact)(s).catch((()=>{})),l.Cmd.closeModal()},B=()=>{l.Cmd.openModal((0,x.jsx)(d.default,{okText:f.default.t(1364),onOK:L,cancelText:f.default.t(1574),onCancel:()=>l.Cmd.closeModal(),children:f.default.t(1365,{contact:s.formattedName})}))},F=()=>(0,x.jsx)("div",{className:g.default.button,children:(0,x.jsx)(o.default,{onClick:R,type:"plain-white",children:f.default.t(1765)})},"not_spam"),G=()=>{l.Cmd.openDrawerRight((0,x.jsx)(h.InfoFlowLoadable,{chat:(0,S.unproxy)(a),profileEntryPoint:p.default.PROFILE_ENTRY_POINT.SPAM_BLOCK},`info-${a.id.toString()}`),"slide-left",M)};if(a.isPSA||!a.shouldAppearInList||a.trusted)return null;const U=r.BlocklistCollection.get(a.id);let V;const H=[];if(a.isGroup)V=f.default.t(516),H.push((0,x.jsx)("div",{className:g.default.button,children:(0,x.jsx)(o.default,{type:"plain-white",onClick:w,children:f.default.t(1146)})},"report_spam")),H.push((0,x.jsx)("div",{className:g.default.button,children:(0,x.jsx)(o.default,{type:"plain-white",onClick:k,children:f.default.t(1622)})},"exit_group")),H.push(F());else{if(V=(0,x.jsx)("div",{className:g.default.text,children:f.default.t(1256)}),s.isBusiness)if(c.GK.supportsFeature(c.GK.F.VNAME_V_2)){const e=s.verifiedLevel===u.default.VERIFIED_LEVEL.HIGH?f.default.t(976):f.default.t(747);V=(0,x.jsx)("div",{className:g.default.text,children:e})}else s.verifiedLevel>u.default.VERIFIED_LEVEL.UNKNOWN&&s.businessProfile&&(V=(0,x.jsx)(C.default,{contact:s,businessProfile:s.businessProfile,onClick:G}));H.push((0,x.jsx)("div",{className:g.default.button,children:(0,x.jsx)(o.default,{type:"plain-white",onClick:j,children:f.default.t(1146)})},"report_spam")),U?H.push((0,x.jsx)("div",{className:g.default.button,children:(0,x.jsx)(o.default,{onClick:B,type:"plain-white",children:f.default.t(1364)})},"unblock")):H.push((0,x.jsx)("div",{className:g.default.button,children:(0,x.jsx)(o.default,{onClick:D,type:"plain-white",children:f.default.t(181)})},"block")),H.push(F())}return(0,x.jsxs)("div",{className:g.default.spam,children:[V,(0,x.jsx)("div",{className:g.default.controls,children:H})]})};var n=a(80140),i=s(a(58836)),r=a(32826),o=s(a(39770)),l=a(88102),d=s(a(52665)),u=s(a(69618)),c=a(7293),h=a(23831),f=s(a(43725)),p=s(a(11339)),m=s(a(30934)),_=a(19569),g=s(a(82478)),v=a(38839),C=s(a(58660)),S=a(31019),y=s(a(59909)),b=a(19529),E=a(49082),T=s(a(59147)),x=a(85893)},87234:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const e=(0,u.jsx)("span",{role:"button",onClick:()=>{i.Cmd.closeModal(),i.Cmd.openModal((0,u.jsx)(r.default,{onCancel:c,onSend:h,supportTag:d.default.SUSPENDED_GROUP_SUPPORT_TAG}),{transition:"modal-flow"})},className:n.default.adminBtn,children:o.default.t(1332)});return(0,u.jsx)(l.default,{id:1331,params:{support:e}})};var n=s(a(14237)),i=a(88102),r=s(a(50485)),o=s(a(43725)),l=s(a(56074)),d=s(a(43745)),u=a(85893);const c=()=>{},h=()=>{}},43745:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(88102),i=s(a(50485)),r=a(12591),o=a(96384),l=s(a(43725)),d=s(a(56074)),u=s(a(23515)),c=a(85893);const h="group-suspend-appeal";var f={openModal:function(){const e=(0,c.jsx)(r.ExternalLink,{href:`${o.FAQ_BASE_URL}/cxt/?entrypointid=group-no-longer-available&platform=web&lang=${l.default.getLocale()}`,children:l.default.t(1327)}),t=()=>{},a=()=>{};n.Cmd.openModal((0,c.jsxs)(u.default,{title:l.default.t(1330),onSupportClicked:()=>{n.Cmd.closeModal(),n.Cmd.openModal((0,c.jsx)(i.default,{onCancel:t,onSend:a,supportTag:h}),{transition:"modal-flow"})},onDismissClicked:()=>{n.Cmd.closeModal()},children:[(0,c.jsx)(d.default,{id:1328})," ",e]}),{transition:"modal-flow"})},SUSPENDED_GROUP_SUPPORT_TAG:h};t.default=f},64099:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{dismissVcardPanel:t}=e,a=(0,l.useModelValues)(e.chat,["receivedVcardMsgs"]),s=(0,d.default)(),h=a.receivedVcardMsgs;return(0,c.jsxs)("div",{className:u.default.vcard,children:[(0,c.jsx)(o.default,{id:485,plural:h.length}),(0,c.jsxs)("div",{className:u.default.controls,children:[(0,c.jsx)(n.default,{onClick:()=>{i.Cmd.openDrawerRight((0,c.jsx)(r.default,{chat:a}),"slide-left",s)},type:"plain-white",children:(0,c.jsx)(o.default,{id:1435,plural:h.length})}),(0,c.jsx)(n.default,{onClick:t,type:"plain-white",children:(0,c.jsx)(o.default,{id:957})})]})]})};var n=s(a(39770)),i=a(88102),r=s(a(96464)),o=s(a(56074)),l=a(49082),d=s(a(59147)),u=s(a(88797)),c=a(85893)},61585:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.OpenChatFlow=void 0,t.clearChatIdCorrectionCache=function(){S.clear()};var i=n(a(48926)),r=a(89385),o=a(13959),l=n(a(70714)),d=a(88102),u=n(a(52665)),c=a(50101),h=n(a(32973)),f=a(99234),p=n(a(43725)),m=s(a(86688)),_=n(a(57681)),g=n(a(69722)),v=a(11054),C=a(85893);const S=new Map;function y(){return(y=(0,i.default)((function*(e){if(!e.isUser())return e;const t=S.get(e.user);if(t)return t;const a=yield(0,g.default)(e),s=null==a?e:a.wid;return S.set(e.user,s),s}))).apply(this,arguments)}class b extends h.default{constructor(){super(...arguments),this._cancel=()=>{this._queryChat&&this._queryChat.controller.abort(),this._queryChat=void 0,this.end()},this.error=()=>{this.push((0,C.jsx)(u.default,{onOK:()=>this.end(),okText:p.default.t(1765),children:p.default.t(866)}))}}componentDidMount(){var e=this;let t=!1;const a=new l.default;(0,o.delayMs)(250).then((()=>{if(a.signal.aborted)throw new r.AbortError;t=!0,this.push((0,C.jsx)(u.default,{title:p.default.t(1279),onCancel:this._cancel,cancelText:p.default.t(1574),children:(0,C.jsx)("div",{className:_.default.spinner,children:(0,C.jsx)(v.Spinner,{stroke:6,size:24})})}))})).catch((0,r.catchAbort)((()=>{})));const s=Date.now(),n=new l.default,d=n.signal,h=function(){return y.apply(this,arguments)}(this.props.chatId).then((e=>(0,c.findChat)(e,!0))).then(function(){var n=(0,i.default)((function*(n){if(d.aborted)throw new r.AbortError;t||a.abort();const i=Date.now()-s,l=t?Math.max(750-i,0):0;e.openChat(n),yield(0,o.delayMs)(l),e.end(),e.props.onSuccess(n)}));return function(){return n.apply(this,arguments)}}()).catch((0,r.catchAbort)((()=>{}))).catch((e=>{a.abort(),this.error(e)}));this._queryChat={controller:n,promise:h}}openChat(e){let{msgText:t}=this.props,a=this.props.ctwaContextLinkData;if(a){const e=m.findLink(a.sourceUrl||"",!1,(0,f.getMaybeMeUser)());(null==e?void 0:e.suspiciousCharacters)&&e.suspiciousCharacters.size>0&&(a=null)}a&&(t=a.icebreaker),e.active&&t?(d.Cmd.pasteChatTextInput(e,t),a&&d.Cmd.setChatCtwaContextLinkData(e,a)):(t&&e.setComposeContents({text:t}),d.Cmd.openChatFromUnread(e).then((t=>{t&&(d.Cmd.focusChatTextInput(e),a&&d.Cmd.setChatCtwaContextLinkData(e,a))}))),null!=this.props.sendLogAttributes&&d.Cmd.setChatMsgSentLogAttributes(e,this.props.sendLogAttributes)}}t.OpenChatFlow=b,b.defaultProps={removeTopDrawer:!0,pushTransition:"none",popTransition:"none"}},84091:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(88102),i=s(a(69618)),r=s(a(32973)),o=s(a(43725)),l=a(56728),d=a(18963),u=a(85893);class c extends r.default{constructor(){super(...arguments),this._onStartGroupCall=e=>{this.props.onStartGroupCall(e.map((e=>e.id))),n.Cmd.closeModal()},this.contactFilter=e=>!this.props.groupParticipants||!!this.props.groupParticipants.find((t=>t.equals(e.id)))&&!e.isMe,this._pop=()=>{this.pop()}}componentDidMount(){this.push((0,u.jsx)(l.SelectModal,{title:this.props.isVideo?o.default.t(591):o.default.t(592),filter:this.contactFilter,onCancel:this._pop,onConfirm:this._onStartGroupCall,listType:l.ListType.PARTICIPANT_MANAGE_MODAL,useAllContacts:null!=this.props.groupParticipants,maxItems:i.default.VOIP_MAX_GROUP_CALL_PARTICIPANTS-1,maxItemsExceedErrorMsg:o.default.t(1508,{count:i.default.VOIP_MAX_GROUP_CALL_PARTICIPANTS-1,_plural:i.default.VOIP_MAX_GROUP_CALL_PARTICIPANTS-1}),singleSelectionFooterType:this.props.isVideo?d.FooterType.VIDEO_CALL:d.FooterType.VOICE_CALL,multipleSelectionFooterType:this.props.isVideo?d.FooterType.VIDEO_CALL:d.FooterType.VOICE_CALL,allowBlockedContacts:!1}))}}t.default=c},32973:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(45095)),i=a(67294),r=s(a(54257)),o=a(18644),l=s(a(2773)),d=s(a(41956)),u=a(85893);class c extends i.Component{constructor(){var e;super(...arguments),e=this,this.state={_stack:[],_transition:"default",_activeKey:0,_ended:!1,isPushed:!1},this.setRefUIE=e=>{this.refUIE=e},this.popAndUpdate=(e,t)=>{const a=this.state._stack;if(a.length<2)return void this.pop(t);const s=(0,i.cloneElement)(a[a.length-2],e);a[a.length-2]=s,this.pop(t)},this.push=function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.props.pushTransition;e.setState((e=>({_stack:e._stack.concat(t),_transition:a,_activeKey:++e._activeKey,_ended:!1,isPushed:!0})))},this.pop=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props.popTransition;const a=e.state._stack.slice(0,-1);a.length?e.setState((e=>({_stack:a,_transition:t,_activeKey:--e._activeKey,isPushed:!1}))):e.state._ended||e.setState({_ended:!0},e.end)},this.end=e=>{this.props.onEnd?this.props.onEnd(e):(0,n.default)(this.context,"this.context").uie.requestDismiss(e)},this.stackSize=()=>this.state._stack.length,this.requestFocus=()=>{this.props.requestFocus&&this.props.requestFocus()}}handleRequestDismiss(){this.pop()}render(){const{_stack:e,_transition:t,_activeKey:a,isPushed:s}=this.state;if(0===e.length)return null;let n=e[e.length-1];return n=(0,i.cloneElement)(n,{isPushed:s}),n=(0,u.jsx)(o.UIE,{displayName:`FlowDrawer${a}`,escapable:!0,ref:this.setRefUIE,requestFocus:this.requestFocus,requestDismiss:this.handleRequestDismiss.bind(this),children:n},a),(0,u.jsx)(d.default,{transitionName:t,className:r.default.container,children:this.props.removeTopDrawer?n:e})}}t.default=c,c.contextType=l.default,c.defaultProps={removeTopDrawer:!0,pushTransition:"flow-transition-drawer-push",popTransition:"flow-transition-drawer-pop"},c.displayName="FlowComponent"},16932:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a,s;return a=t=class extends l.WrappedComponent{constructor(){super(...arguments),this._isUnmounted=!1,this.rejectOnUnmount=()=>(this._rejectPromise||(this._rejectPromise=new Promise(((e,t)=>{this._rejector=t})),this._rejectPromise.catch((()=>{})),this._isUnmounted&&this._rejector(new r.Unmount)),this._rejectPromise)}componentWillUnmount(){this._isUnmounted=!0,this._rejectPromise&&this._rejector(new r.Unmount)}_getComponent(){return l._getComponent.call(this)}render(){return this.state.hasError?null:(0,d.jsx)(e,(0,i.default)({ref:this.setComponent,rejectOnUnmount:this.rejectOnUnmount},this.props))}},t.defaultProps=null!==(s=e.defaultProps)&&void 0!==s?s:void 0,t.displayName=`Promise(${(0,o.default)(e)})`,t.wrappedComponent=null,a};var i=n(a(81109)),r=s(a(64103)),o=n(a(38701)),l=a(7128),d=a(85893)},65932:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){var s,d;const u=(0,r.default)(e);t||a||(__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS(`StateHOC wrapping class with no concerns, check ${u}`));const c=[];if(t)for(const e in t)c.push(new i.default(u,e,t[e],!0));if(a)for(const e in a)t&&t.hasOwnProperty(e)&&(__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS(`Component has marked "${e}" as both a normal and weak concern, check ${u}`)),c.push(new i.default(u,e,a[e],!1));return d=s=class t extends o.WrappedComponent{constructor(e){super(e),this._rr=(e,t)=>{this.setState((a=>({proxies:(0,n.default)((0,n.default)({},a.proxies),{},{[e.name]:e.createProxy(t)})})))};const a={};let s=!1;for(let n=0;n<c.length;n++){const i=c[n],r=i.name,o=i.getModelAndValidate(t._getModelOrProxy(r,e));if(o){const e=i.createProxy(o);i.attachConcern(o,e.proxyBitMask,this._rr),a[r]=e}else s=!0}this.state={props:e,proxies:a,hasBroken:s}}static _getModelOrProxy(e,t){return t[e]}static getDerivedStateFromProps(e,a){const s=(0,n.default)({},a.proxies);let i=!1;if(!a.hasBroken){const n=a.props;for(let a=0;a<c.length;a++){const r=c[a],o=r.name,l=r.getModel(t._getModelOrProxy(o,n)),d=r.getModelAndValidate(t._getModelOrProxy(o,e));l!==d&&(d?s[o]=r.createProxy(d):i=!0)}}return{props:e,proxies:s,hasBroken:i}}componentDidUpdate(e){if(!this.state.hasBroken)for(let a=0;a<c.length;a++){const s=c[a],n=s.name,i=s.getModel(t._getModelOrProxy(n,e)),r=s.getModelAndValidate(t._getModelOrProxy(n,this.props));if(i!==r&&(s.detachConcern(i,this._rr),r)){const e=this.state.proxies[n];s.attachConcern(r,e.proxyBitMask,this._rr)}}}componentWillUnmount(){if(!this.state.hasBroken)for(let e=0;e<c.length;e++){const a=c[e];a.detachConcern(a.getModel(t._getModelOrProxy(a.name,this.props)),this._rr)}}_getComponent(){return o._getComponent.call(this)}render(){const{proxies:t,hasBroken:a,hasError:s}=this.state;return a||s?null:(0,l.jsx)(e,(0,n.default)((0,n.default)({ref:this.setComponent},this.props),t))}},s.displayName=`State(${u})`,s.wrappedComponent=null,d};var n=s(a(81109)),i=s(a(87541)),r=s(a(38701)),o=a(7128),l=a(85893)},40936:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.requireBundle=t.AddContactToGroupFlowLoadable=void 0;var n=s(a(48926)),i=s(a(68356)),r=s(a(69618)),o=s(a(43725)),l=s(a(50860)),d=s(a(15334)),u=a(85893);const c=(0,d.default)((0,n.default)((function*(){return(yield Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,83192))).default})),"AddContactToGroupFlow");t.requireBundle=c;const h=(0,i.default)({loader:c,loading:e=>(0,u.jsx)(l.default,{title:o.default.t(1708),error:Boolean(e.error)}),delay:r.default.LOADABLE_DELAY});t.AddContactToGroupFlowLoadable=h},78457:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.requireBundle=t.ArchivedFlowLoadable=void 0;var n=s(a(48926)),i=s(a(68356)),r=s(a(69618)),o=s(a(16866)),l=s(a(15334)),d=a(85893);const u=(0,l.default)((0,n.default)((function*(){return(yield Promise.all([a.e(8295),a.e(9488),a.e(7205)]).then(a.bind(a,42237))).default})),"ArchivedFlow");t.requireBundle=u;const c=(0,i.default)({loader:u,loading:e=>(0,d.jsx)(o.default,{error:Boolean(e.error)}),delay:r.default.LOADABLE_DELAY});t.ArchivedFlowLoadable=c},30087:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.requireBundle=t.AttachMediaFlowLoadable=void 0;var n=s(a(48926)),i=s(a(68356)),r=s(a(69618)),o=s(a(16866)),l=s(a(15334)),d=a(85893);const u=(0,l.default)((0,n.default)((function*(){return(yield Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,93259))).default})),"AttachMediaFlow");t.requireBundle=u;const c=(0,i.default)({loader:u,loading:e=>(0,d.jsx)(o.default,{error:Boolean(e.error)}),delay:r.default.LOADABLE_DELAY});t.AttachMediaFlowLoadable=c},7156:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.requireBundle=t.AttachVcardsFlowLoadable=void 0;var n=s(a(48926)),i=s(a(68356)),r=s(a(69618)),o=s(a(43725)),l=s(a(50860)),d=s(a(15334)),u=a(85893);const c=(0,d.default)((0,n.default)((function*(){return(yield Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,91037))).default})),"AttachVcardsFlow");t.requireBundle=c;const h=(0,i.default)({loader:c,loading:e=>(0,u.jsx)(l.default,{title:o.default.t(1229),error:Boolean(e.error)}),delay:r.default.LOADABLE_DELAY});t.AttachVcardsFlowLoadable=h},62044:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.requireBundle=t.AttachProductsFlowLoadable=void 0;var n=s(a(48926)),i=s(a(68356)),r=s(a(69618)),o=s(a(43725)),l=s(a(50860)),d=s(a(15334)),u=a(85893);const c=(0,d.default)((0,n.default)((function*(){return(yield Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,97669))).default})),"AttachProductsFlow");t.requireBundle=c;const h=(0,i.default)({loader:c,loading:e=>(0,u.jsx)(l.default,{title:o.default.t(1255),error:Boolean(e.error)}),delay:r.default.LOADABLE_DELAY});t.AttachProductsFlowLoadable=h},95568:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.requireBundle=t.CartFlowLoadable=void 0;var n=s(a(48926)),i=s(a(68356)),r=s(a(69618)),o=s(a(58267)),l=s(a(15334)),d=a(85893);const u=(0,l.default)((0,n.default)((function*(){return(yield Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,92246))).default})),"CartFlowLoadable");t.requireBundle=u;const c=(0,i.default)({loader:u,loading:e=>(0,d.jsx)(o.default,{error:Boolean(e.error)}),delay:r.default.LOADABLE_DELAY});t.CartFlowLoadable=c},87912:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.CatalogManagementFlowLoadable=void 0,t.createCatalogManagementFlowObject=S,t.openCatalogManagementFlow=function(e,t){S(((a,s)=>{const n=(0,f.buildProductCatalogContext)(new p.ProductCatalogSession,(0,d.getMaybeBizPlatformForLogging)(a.toString()),t);o.Cmd.openDrawerLeft((0,g.jsx)(C,{catalog:s,catalogId:a,product:e}),void 0,void 0,n,_.FocusType.TABBABLE)}))},t.requireBundle=void 0;var n=s(a(48926)),i=s(a(68356)),r=a(99989),o=a(88102),l=s(a(69618)),d=a(62632),u=a(99234),c=s(a(43725)),h=s(a(16866)),f=a(97567),p=a(9153),m=s(a(15334)),_=a(87956),g=a(85893);const v=(0,m.default)((0,n.default)((function*(){return(yield Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,86704))).default})),"CatalogManagementFlow");t.requireBundle=v;const C=(0,i.default)({loader:v,loading:e=>(0,g.jsx)(h.default,{title:c.default.t(675),error:Boolean(e.error)}),delay:l.default.LOADABLE_DELAY});function S(e){const t=(0,u.getMeUser)(),a=r.CatalogCollection.get(t);null==a?r.CatalogCollection.find(t).then((a=>{e(t,a)})).catch((()=>{e(t)})):(a.stale=!0,a.markProductCollectionOld(),e(t,a))}t.CatalogManagementFlowLoadable=C},90878:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.requireBundle=t.LabelFlowLoadable=void 0;var n=s(a(48926)),i=s(a(68356)),r=s(a(69618)),o=s(a(43725)),l=s(a(16866)),d=s(a(15334)),u=a(85893);const c=(0,d.default)((0,n.default)((function*(){return(yield Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,77467))).default})),"LabelFlow");t.requireBundle=c;const h=(0,i.default)({loader:c,loading:e=>(0,u.jsx)(l.default,{title:o.default.t(688),error:Boolean(e.error)}),delay:r.default.LOADABLE_DELAY});t.LabelFlowLoadable=h},47809:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.requireBundle=t.ManageLabelFlowLoadable=void 0;var n=s(a(48926)),i=s(a(68356)),r=s(a(69618)),o=s(a(43725)),l=s(a(50860)),d=s(a(15334)),u=a(85893);const c=(0,d.default)((0,n.default)((function*(){return(yield Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,51095))).default})),"ManageLabelFlow");t.requireBundle=c;const h=(0,i.default)({loader:c,loading:e=>(0,u.jsx)(l.default,{title:o.default.t(680),error:Boolean(e.error)}),delay:r.default.LOADABLE_DELAY});t.ManageLabelFlowLoadable=h},28629:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.requireBundle=t.MerchantDetailsFlowLoadable=void 0;var n=s(a(48926)),i=s(a(68356)),r=s(a(69618)),o=s(a(16866)),l=s(a(15334)),d=a(85893);const u=(0,l.default)((0,n.default)((function*(){return(yield Promise.all([a.e(8295),a.e(9488),a.e(7205)]).then(a.bind(a,90727))).default})),"MerchantDetails");t.requireBundle=u;const c=(0,i.default)({loader:u,loading:e=>(0,d.jsx)(o.default,{error:Boolean(e.error)}),delay:r.default.LOADABLE_DELAY});t.MerchantDetailsFlowLoadable=c},67700:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(48926)),i=s(a(68356)),r=s(a(69618)),o=s(a(16866)),l=s(a(15334)),d=a(85893);const u=(0,l.default)((0,n.default)((function*(){return(yield a.e(3770).then(a.bind(a,63770))).default})),"OrderCreationFlow");var c=(0,i.default)({loader:u,loading:e=>(0,d.jsx)(o.default,{error:Boolean(e.error)}),delay:r.default.LOADABLE_DELAY});t.default=c},17085:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(48926)),i=s(a(68356)),r=s(a(69618)),o=s(a(16866)),l=s(a(15334)),d=a(85893);const u=(0,l.default)((0,n.default)((function*(){return(yield Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,62643))).default})),"OrderManagementFlow");var c=(0,i.default)({loader:u,loading:e=>(0,d.jsx)(o.default,{error:Boolean(e.error)}),delay:r.default.LOADABLE_DELAY});t.default=c},67455:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.requireBundle=t.ProductDetailsFlowLoadable=void 0;var n=s(a(48926)),i=s(a(68356)),r=s(a(69618)),o=s(a(43725)),l=s(a(16866)),d=s(a(15334)),u=a(85893);const c=(0,d.default)((0,n.default)((function*(){return(yield Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,82554))).default})),"ProductDetailsFlow");t.requireBundle=c;const h=(0,i.default)({loader:c,loading:e=>(0,u.jsx)(l.default,{title:o.default.t(1095),error:Boolean(e.error)}),delay:r.default.LOADABLE_DELAY});t.ProductDetailsFlowLoadable=h},68303:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.requireBundle=t.SendProductFlowLoadable=void 0;var n=s(a(48926)),i=s(a(68356)),r=s(a(69618)),o=s(a(43725)),l=s(a(50860)),d=s(a(15334)),u=a(85893);const c=(0,d.default)((0,n.default)((function*(){return(yield Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,83753))).default})),"SendProductFlow");t.requireBundle=c;const h=(0,i.default)({loader:c,loading:e=>(0,u.jsx)(l.default,{title:o.default.t(867),error:Boolean(e.error)}),delay:r.default.LOADABLE_DELAY});t.SendProductFlowLoadable=h},71989:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.requireBundle=t.CaptureFlowLoadable=void 0;var n=s(a(48926)),i=s(a(68356)),r=s(a(69618)),o=s(a(16866)),l=s(a(15334)),d=a(85893);const u=(0,l.default)((0,n.default)((function*(){return(yield Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,74671))).default})),"CaptureFlow");t.requireBundle=u;const c=(0,i.default)({loader:u,loading:e=>(0,d.jsx)(o.default,{error:Boolean(e.error)}),delay:r.default.LOADABLE_DELAY});t.CaptureFlowLoadable=c},56512:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.requireBundle=t.ComposeBoxPanelsLoadable=void 0;var n=s(a(48926)),i=s(a(68356)),r=s(a(69618)),o=s(a(49575)),l=s(a(15334)),d=s(a(60425)),u=a(85893);const c=(0,l.default)((0,n.default)((function*(){return(yield Promise.all([a.e(8295),a.e(9488),a.e(7205)]).then(a.bind(a,60425))).default})),"ComposeBoxPanels");t.requireBundle=c;(0,i.default)({loader:c,loading:e=>(0,u.jsx)(o.default,{error:Boolean(e.error)}),delay:r.default.LOADABLE_DELAY});const h=d.default;t.ComposeBoxPanelsLoadable=h},63463:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.requireBundle=t.ContactMsgInfoFlowLoadable=void 0;var n=s(a(48926)),i=s(a(68356)),r=s(a(69618)),o=s(a(43725)),l=s(a(16866)),d=s(a(15334)),u=a(85893);const c=(0,d.default)((0,n.default)((function*(){return(yield Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,87971))).default})),"ContactMsgInfoFlow");t.requireBundle=c;const h=(0,i.default)({loader:c,loading:e=>(0,u.jsx)(l.default,{title:o.default.t(830),error:Boolean(e.error)}),delay:r.default.LOADABLE_DELAY});t.ContactMsgInfoFlowLoadable=h},24390:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.requireBundle=t.ContactUsModalLoadable=void 0;var n=s(a(48926)),i=s(a(68356)),r=s(a(69618)),o=s(a(43725)),l=s(a(81791)),d=s(a(15334)),u=a(85893);const c=(0,d.default)((0,n.default)((function*(){return(yield Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,42769))).default})),"ContactUsModal");t.requireBundle=c;const h=(0,i.default)({loader:c,loading:e=>(0,u.jsx)(l.default,{title:o.default.t(1318),okText:o.default.t(1232),error:Boolean(e.error)}),delay:r.default.LOADABLE_DELAY});t.ContactUsModalLoadable=h},70174:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.requireBundle=t.EditCaptureFlowLoadable=void 0;var n=s(a(48926)),i=s(a(68356)),r=s(a(69618)),o=s(a(16866)),l=s(a(15334)),d=a(85893);const u=(0,l.default)((0,n.default)((function*(){return(yield Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,53135))).default})),"EditCaptureFlow");t.requireBundle=u;const c=(0,i.default)({loader:u,loading:e=>(0,d.jsx)(o.default,{error:Boolean(e.error)}),delay:r.default.LOADABLE_DELAY});t.EditCaptureFlowLoadable=c},75362:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.requireBundle=t.ForwardMessageFlowLoadable=void 0;var n=s(a(48926)),i=s(a(68356)),r=s(a(69618)),o=s(a(43725)),l=s(a(50860)),d=s(a(15334)),u=a(85893);const c=(0,d.default)((0,n.default)((function*(){return(yield Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,22587))).default})),"ForwardMessageFlow");t.requireBundle=c;const h=(0,i.default)({loader:c,loading:e=>(0,u.jsx)(l.default,{title:o.default.t(483,{_plural:1}),error:Boolean(e.error)}),delay:r.default.LOADABLE_DELAY});t.ForwardMessageFlowLoadable=h},88280:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.requireBundle=t.GroupInviteLinkDrawerLoadable=void 0;var n=s(a(48926)),i=s(a(68356)),r=s(a(69618)),o=s(a(43725)),l=s(a(16866)),d=s(a(15334)),u=a(85893);const c=(0,d.default)((0,n.default)((function*(){return(yield Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,90089))).default})),"GroupInviteLinkDrawer");t.requireBundle=c;const h=(0,i.default)({loader:c,loading:e=>(0,u.jsx)(l.default,{title:o.default.t(532),error:Boolean(e.error)}),delay:r.default.LOADABLE_DELAY});t.GroupInviteLinkDrawerLoadable=h},64326:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.requireBundle=t.GroupMsgInfoFlowLoadable=void 0;var n=s(a(48926)),i=s(a(68356)),r=s(a(69618)),o=s(a(16866)),l=s(a(15334)),d=a(85893);const u=(0,l.default)((0,n.default)((function*(){return(yield Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,85916))).default})),"GroupMsgInfoFlow");t.requireBundle=u;const c=(0,i.default)({loader:u,loading:e=>(0,d.jsx)(o.default,{error:Boolean(e.error)}),delay:r.default.LOADABLE_DELAY});t.GroupMsgInfoFlowLoadable=c},18685:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.requireBundle=t.GroupV4InviteFlowLoadable=void 0;var n=s(a(48926)),i=s(a(68356)),r=s(a(69618)),o=s(a(43725)),l=s(a(81791)),d=s(a(15334)),u=a(85893);const c=(0,d.default)((0,n.default)((function*(){return(yield Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,7335))).default})),"GroupV4InviteFlow");t.requireBundle=c;const h=(0,i.default)({loader:c,loading:e=>(0,u.jsx)(l.default,{okText:o.default.t(1705),error:Boolean(e.error)}),delay:r.default.LOADABLE_DELAY});t.GroupV4InviteFlowLoadable=h},23831:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.requireBundle=t.InfoFlowLoadable=void 0;var n=s(a(48926)),i=s(a(68356)),r=s(a(69618)),o=s(a(16866)),l=s(a(15334)),d=a(85893);const u=(0,l.default)((0,n.default)((function*(){return(yield Promise.all([a.e(8295),a.e(9488),a.e(7205)]).then(a.bind(a,4782))).default})),"InfoFlow");t.requireBundle=u;const c=(0,i.default)({loader:u,loading:e=>(0,d.jsx)(o.default,{error:Boolean(e.error)}),delay:r.default.LOADABLE_DELAY});t.InfoFlowLoadable=c},88240:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.requireBundle=t.LicensesPopupLoadable=void 0;var n=s(a(48926)),i=s(a(68356)),r=s(a(69618)),o=s(a(43725)),l=s(a(81791)),d=s(a(15334)),u=a(85893);const c=(0,d.default)((0,n.default)((function*(){return(yield Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,87027))).default})),"LicensesPopup");t.requireBundle=c;const h=(0,i.default)({loader:c,loading:e=>(0,u.jsx)(l.default,{title:o.default.t(691),okText:o.default.t(1765),error:Boolean(e.error)}),delay:r.default.LOADABLE_DELAY});t.LicensesPopupLoadable=h},74429:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.requireBundle=t.LiveLocationDrawerLoadable=t.ExpiredLocationDrawerLoadable=void 0;var n=s(a(48926)),i=s(a(68356)),r=s(a(69618)),o=s(a(43725)),l=s(a(16866)),d=s(a(15334)),u=a(85893);const c=(0,d.default)((0,n.default)((function*(){const e=yield Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,85905));return{LiveLocationDrawer:e.LiveLocationDrawer,ExpiredLocationDrawer:e.ExpiredLocationDrawer}})),"LiveLocationDrawer");t.requireBundle=c;const h=(0,i.default)({loader:(f=(0,n.default)((function*(){return(yield c()).LiveLocationDrawer})),function(){return f.apply(this,arguments)}),loading:e=>(0,u.jsx)(l.default,{title:o.default.t(724),error:Boolean(e.error)}),delay:r.default.LOADABLE_DELAY});var f;t.LiveLocationDrawerLoadable=h;const p=(0,i.default)({loader:(m=(0,n.default)((function*(){return(yield c()).ExpiredLocationDrawer})),function(){return m.apply(this,arguments)}),loading:e=>(0,u.jsx)(l.default,{title:o.default.t(699),error:Boolean(e.error),retry:e.retry}),delay:r.default.LOADABLE_DELAY});var m;t.ExpiredLocationDrawerLoadable=p},67019:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requireVoipCommonDisabled=t.requireVoip=t.requireStickerPackCollection=t.requireStatusV3Collection=t.requireSetHandlers=t.requireMsgCollection=t.requireMain=t.requireLoadProtoVersions=t.requireLabelCollection=t.requireHandleVideoStreamingRequest=t.requireHandleSocketMessage=t.requireEmojiConfig=t.requireEmojiAssetMapCreator=t.requireContactCollection=t.requireClearAppStates=t.requireChatCollection=t.requireCallCollection=void 0;t.requireMain=()=>a(73481).Z;t.requireContactCollection=()=>a(19380).ContactCollection;t.requireLoadProtoVersions=()=>({features:a(76342).Z,17:a(90826).Z});t.requireHandleSocketMessage=()=>a(67938).default;t.requireEmojiConfig=()=>({APPLE:{UNICODE_TO_EMOJI:a(19229).Z,SELECTOR:"apple"},WHATSAPP:{UNICODE_TO_EMOJI:a(63966).Z,SELECTOR:"wa"}});t.requireEmojiAssetMapCreator=()=>a(14315).emojiAssetMapCreator;t.requireStatusV3Collection=()=>a(59387).StatusV3Collection;t.requireClearAppStates=()=>a(4641).Z;t.requireHandleVideoStreamingRequest=()=>a(54325).D;t.requireLabelCollection=()=>a(16770).LabelCollection;t.requireChatCollection=()=>a(69951).ChatCollection;t.requireMsgCollection=()=>a(59871).MsgCollection;t.requireStickerPackCollection=()=>a(66299).StickerPackCollection;t.requireCallCollection=()=>a(31218).CallCollection;t.requireVoip=()=>a(84356).Voip;t.requireVoipCommonDisabled=()=>a(73867);t.requireSetHandlers=()=>a(99058).y},58267:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.jsx)("div",{children:(0,i.jsx)(n.default,{error:e.error})})};var n=s(a(2875)),i=a(85893)},2875:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(85600),i=s(a(43725)),r=s(a(67224)),o=s(a(23217)),l=a(85893);function d(e){return(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:r.default.circle,children:(0,l.jsx)(o.default,{name:"live-location-refresh"})}),(0,l.jsx)("div",{className:r.default.text,children:e.text})]})}function u(e){const{error:t,text:a,retry:s}=e;return(0,l.jsx)("div",{className:r.default.container,onClick:t?s:null,children:t?(0,l.jsx)(d,{text:a}):(0,l.jsx)(n.Loading,{})})}u.defaultProps={text:i.default.t(689),retry:()=>window.location.reload()};var c=u;t.default=c},49575:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,i.default)({[l.default.panelBodyError]:e.error},l.default.panelBody);return(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{className:r.default.container}),(0,c.jsxs)("div",{className:l.default.gifPanel,children:[(0,c.jsx)("div",{className:u.default.barContainer}),(0,c.jsx)("div",{className:l.default.bodyContainer,children:(0,c.jsx)("div",{className:t,children:(0,c.jsx)("div",{className:o.default.noResults,children:(0,c.jsx)(d.default,(0,n.default)({},e))})})})]})]})};var n=s(a(81109)),i=s(a(94184)),r=s(a(40870)),o=s(a(85633)),l=s(a(98952)),d=s(a(2875)),u=s(a(75228)),c=a(85893)},81791:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,l.jsx)(i.default,{title:e.title,onOK:()=>{},okText:e.okText,okDisabled:!0,onCancel:()=>n.Cmd.closeModal(),children:(0,l.jsx)("div",{className:o.default.container,children:(0,l.jsx)(r.default,{error:e.error})})})};var n=a(88102),i=s(a(52665)),r=s(a(2875)),o=s(a(76067)),l=a(85893)},16866:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{title:t,headerType:a=l.DRAWER_HEADER_TYPE.SMALL}=e,s=(0,i.default)(e,h),f=(0,u.default)();return(0,c.jsxs)(r.default,{children:[(0,c.jsx)(l.DrawerHeader,{title:t,type:a,onCancel:()=>{null==f||f.uie.requestDismiss()}}),(0,c.jsx)(o.default,{children:(0,c.jsx)(d.default,(0,n.default)({},s))})]})};var n=s(a(81109)),i=s(a(6479)),r=s(a(60453)),o=s(a(69637)),l=a(94790),d=s(a(2875)),u=s(a(59147)),c=a(85893);const h=["title","headerType"]},92350:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,n.default)("overlay",d.default.mediaViewer),a=()=>i.Cmd.closeModalMedia();return(0,h.jsx)("div",{children:(0,h.jsxs)("div",{className:t,"data-animate-media-viewer":!0,children:[(0,h.jsxs)("div",{className:l.default.mediaPanelHeader,children:[(0,h.jsx)("div",{className:l.default.info}),(0,h.jsx)("div",{className:l.default.mediaPanelTools,children:(0,h.jsx)(u.MenuBar,{theme:"strong",children:(0,h.jsx)(u.MenuBarItem,{a8nText:"btn-close",icon:(0,h.jsx)(c.default,{name:"x-viewer"}),title:r.default.t(1585),onClick:a})},"media-panel-header")})]}),(0,h.jsx)("div",{className:d.default.mediaContent,dir:"ltr",onClick:a,children:(0,h.jsx)("div",{className:d.default.media,children:(0,h.jsx)(o.default,{error:e.error})})})]})})};var n=s(a(94184)),i=a(88102),r=s(a(43725)),o=s(a(2875)),l=s(a(42784)),d=s(a(7674)),u=a(46346),c=s(a(23217)),h=a(85893)},50860:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,l.jsx)(o.Modal,{type:o.ModalTheme.Tower,children:(0,l.jsx)(r.default,(0,n.default)({headerType:i.DRAWER_HEADER_TYPE.POPUP},e))})};var n=s(a(81109)),i=a(94790),r=s(a(16866)),o=a(57224),l=a(85893)},77148:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,l.jsx)("div",{className:r.default.container,children:(0,l.jsxs)("div",{className:r.default.body,dir:"ltr",children:[(0,l.jsx)("div",{className:r.default.imageContainer,children:(0,l.jsx)("div",{className:r.default.defaultIcon,children:(0,l.jsx)(o.default,{name:e.svgName})})}),e.error?(0,l.jsx)(i.LazyLoadRetry,{xstyle:d.lazyLoadRetry,onClick:e.retry}):(0,l.jsx)(n.default,{})]})})};s(a(56720));var n=s(a(46918)),i=a(85600),r=s(a(5582)),o=s(a(23217)),l=a(85893);const d={lazyLoadRetry:{position:"lhggkp7q",top:"qq0sjtgm",left:"tukmaf4q",zIndex:"g2bpp9au",display:"p357zi0d",alignItems:"gndfcl4n",justifyContent:"ac2vgrno",width:"ln8gz9je",height:"ppled2lx",color:"k17s6i4e",backgroundColor:"epdck8xl",borderTopStartRadius:"g9p5wyxn",borderTopEndRadius:"i0tg5vk9",borderBottomEndRadius:"aoogvgrq",borderBottomStartRadius:"o2zu3hjb"}}},19572:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{error:t,text:a,retry:s}=e,c=(0,n.default)(o.default.closeButton,l.default.v3X,{}),h=(0,n.default)(o.default.closeButton,l.default.backIcon,{}),f=()=>i.Cmd.closeModalMedia();return(0,u.jsxs)("div",{className:l.default.viewer,"data-animate-status-v3-viewer":!0,children:[(0,u.jsx)("button",{className:c,onClick:f,children:(0,u.jsx)(d.default,{name:"x-viewer"})}),(0,u.jsx)("button",{className:h,onClick:f,children:(0,u.jsx)(d.default,{name:"back",directional:!0})}),(0,u.jsx)(r.default,{error:t,text:a,retry:s})]})};var n=s(a(94184)),i=a(88102),r=s(a(2875)),o=s(a(78611)),l=s(a(46209)),d=s(a(23217)),u=a(85893)},20910:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,i.default)(d.default.closeButton,c.default.v3_x,{});return(0,p.jsx)("div",{className:c.default.modalBackground,"data-animate-status-v3-modal-background":!0,children:(0,p.jsxs)("div",{className:c.default.mainWrapper,children:[(0,p.jsx)("div",{className:u.default.listPanel,children:(0,p.jsxs)("div",{className:u.default.panelHeader,children:[(0,p.jsx)("div",{className:u.default.headerButtonsPrimary}),(0,p.jsx)("div",{className:u.default.headerText,children:(0,p.jsx)("span",{className:u.default.primaryHeaderText,children:o.default.t(1286)})}),(0,p.jsx)("div",{className:u.default.headerButtonsSecondary})]})}),(0,p.jsx)("div",{className:h.default.outStatusPanel,children:(0,p.jsx)(l.default,(0,n.default)({},e))}),(0,p.jsx)("button",{className:t,onClick:()=>r.Cmd.closeModalMedia(),children:(0,p.jsx)(f.default,{name:"x-viewer"})})]})})};var n=s(a(81109)),i=s(a(94184)),r=a(88102),o=s(a(43725)),l=s(a(2875)),d=s(a(78611)),u=s(a(66246)),c=s(a(82616)),h=s(a(15617)),f=s(a(23217)),p=a(85893)},47645:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.requireBundle=t.LottieAnimation=void 0;var n=s(a(68356)),i=s(a(69618)),r=s(a(2875)),o=s(a(15334)),l=a(85893);const d=(0,o.default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,60195)).then((e=>e.default))),"LottieAnimation");t.requireBundle=d;const u=(0,n.default)({loader:d,loading:e=>(0,l.jsx)(r.default,{error:Boolean(e.error)}),delay:i.default.LOADABLE_DELAY});t.LottieAnimation=u},11603:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.requireBundle=t.MediaViewerFlowLoadable=void 0;var n=s(a(48926)),i=s(a(68356)),r=s(a(69618)),o=s(a(92350)),l=s(a(15334)),d=a(85893);const u=(0,l.default)((0,n.default)((function*(){return(yield Promise.all([a.e(8295),a.e(9488),a.e(7205)]).then(a.bind(a,12642))).default})),"MediaViewerFlow");t.requireBundle=u;const c=(0,i.default)({loader:u,loading:e=>(0,d.jsx)(o.default,{error:Boolean(e.error)}),delay:r.default.LOADABLE_DELAY});t.MediaViewerFlowLoadable=c},92507:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.requireBundle=t.NewChatFlowLoadable=void 0;var n=s(a(48926)),i=s(a(68356)),r=s(a(69618)),o=s(a(16866)),l=s(a(15334)),d=a(85893);const u=(0,l.default)((0,n.default)((function*(){return(yield Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,3884))).default})),"NewChatFlow");t.requireBundle=u;const c=(0,i.default)({loader:u,loading:e=>(0,d.jsx)(o.default,{error:Boolean(e.error)}),delay:r.default.LOADABLE_DELAY});t.NewChatFlowLoadable=c},23620:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.requireBundle=t.NewCommunityFlowLoadable=void 0;var n=s(a(48926)),i=s(a(68356)),r=s(a(69618)),o=s(a(16866)),l=s(a(15334)),d=a(85893);const u=(0,l.default)((0,n.default)((function*(){return(yield Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,81971))).default})),"NewCommunityFlow");t.requireBundle=u;const c=(0,i.default)({loader:u,loading:e=>(0,d.jsx)(o.default,{error:Boolean(e.error)}),delay:r.default.LOADABLE_DELAY});t.NewCommunityFlowLoadable=c},26489:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.requireBundle=t.NewGroupFlowLoadable=void 0;var n=s(a(48926)),i=s(a(68356)),r=s(a(69618)),o=s(a(16866)),l=s(a(15334)),d=a(85893);const u=(0,l.default)((0,n.default)((function*(){return(yield Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,66960))).default})),"NewGroupFlow");t.requireBundle=u;const c=(0,i.default)({loader:u,loading:e=>(0,d.jsx)(o.default,{error:Boolean(e.error)}),delay:r.default.LOADABLE_DELAY});t.NewGroupFlowLoadable=c},33646:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.PhotoPickerLoadable=function(e){switch(e.type){case d.default.GROUP:return(0,c.jsx)(p,(0,n.default)((0,n.default)({},e),{},{a8nText:"group-pic-picker"}));case d.default.COMMUNITY:return(0,c.jsx)(m,(0,n.default)((0,n.default)({},e),{},{a8nText:"community-pic-picker"}));case d.default.PROFILE:return(0,c.jsx)(f,(0,n.default)((0,n.default)({},e),{},{a8nText:"profile-pic-picker"}))}},t.requireBundle=void 0;var n=s(a(81109)),i=s(a(48926)),r=s(a(68356)),o=s(a(69618)),l=s(a(77148)),d=s(a(43556)),u=s(a(15334)),c=a(85893);const h=(0,u.default)((0,i.default)((function*(){return(yield Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,82541))).default})),"PhotoPicker");t.requireBundle=h;const f=(0,r.default)({loader:h,loading:e=>(0,c.jsx)(l.default,{svgName:"default-user",error:Boolean(e.error),retry:e.retry}),delay:o.default.LOADABLE_DELAY}),p=(0,r.default)({loader:h,loading:e=>(0,c.jsx)(l.default,{svgName:"default-group",error:Boolean(e.error),retry:e.retry}),delay:o.default.LOADABLE_DELAY}),m=(0,r.default)({loader:h,loading:e=>(0,c.jsx)(l.default,{svgName:"default-group",error:Boolean(e.error),retry:e.retry}),delay:o.default.LOADABLE_DELAY})},46588:(e,t,a)=>{"use strict";var s=a(95318);t.Z=function(){return B.apply(this,arguments)};var n=s(a(48926)),i=a(40936),r=a(78457),o=a(30087),l=a(62044),d=a(7156),u=a(71989),c=a(95568),h=a(63463),f=a(70174),p=a(75362),m=a(88280),_=a(64326),g=a(18685),v=a(23831),C=a(90878),S=a(74429),y=a(47645),b=a(47809),E=a(11603),T=a(92507),x=a(23620),M=a(26489),P=a(33646),A=a(67455),I=a(77117),w=a(98633),k=a(11234),j=a(66040),N=a(15303),O=a(68303),R=a(45383),D=a(82364),L=a(78781);function B(){return(B=(0,n.default)((function*(){try{const e=[(0,E.requireBundle)(),(0,v.requireBundle)()];yield Promise.all(e);const t=[(0,I.requireBundle)(),(0,P.requireBundle)(),(0,S.requireBundle)(),(0,D.requireBundle)(),(0,o.requireBundle)(),(0,u.requireBundle)(),(0,f.requireBundle)(),(0,_.requireBundle)(),(0,T.requireBundle)(),(0,M.requireBundle)(),(0,x.requireBundle)(),(0,O.requireBundle)(),(0,l.requireBundle)(),(0,k.requireBundle)(),(0,N.requireBundle)(),(0,p.requireBundle)(),(0,d.requireBundle)(),(0,A.requireBundle)(),(0,c.requireBundle)(),(0,C.requireBundle)(),(0,b.requireBundle)(),(0,i.requireBundle)(),(0,R.requireBundle)(),(0,m.requireBundle)(),(0,L.requireBundle)(),(0,w.requireBundle)(),(0,h.requireBundle)(),(0,j.requireBundle)(),(0,g.requireBundle)(),(0,r.requireBundle)(),(0,y.requireBundle)()];yield Promise.all(t)}catch(e){__LOG__(3)`Error prefetching loadables: ${e.stack}`}}))).apply(this,arguments)}},77117:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.requireBundle=t.ProfileDrawerFlowLoadable=void 0;var n=s(a(48926)),i=s(a(68356)),r=s(a(69618)),o=s(a(16866)),l=s(a(15334)),d=a(85893);const u=(0,l.default)((0,n.default)((function*(){return(yield Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,30579))).default})),"ProfileDrawer");t.requireBundle=u;const c=(0,i.default)({loader:u,loading:e=>(0,d.jsx)(o.default,{error:Boolean(e.error)}),delay:r.default.LOADABLE_DELAY});t.ProfileDrawerFlowLoadable=c},15334:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const a=function(e){return(t,a)=>{__LOG__(3)`Loadable error: ${t.stack}`;const s=a>1?"s":"";__LOG__(4,void 0,new Error,!0)`Failed to load a component`,SEND_LOGS(`loadable:${e} failed to load after [${a}] attempt${s}`)}}(t);let s,o="INIT",l=0;return function d(){switch(o){case"INIT":case"FAILURE":return o="INFLIGHT",s=e().then((e=>(e||a(new Error("Lazyload response is empty"),l),o="SUCCESS",e))).catch(function(){var e=(0,n.default)((function*(e){if(__LOG__(3)`Lazyload failure for component ${t}`,o="FAILURE",l++,l<=10)return yield(0,r.delayMs)(1e3*l),d();throw a(e,l),e}));return function(){return e.apply(this,arguments)}}()),s;case"INFLIGHT":case"SUCCESS":return(0,i.default)(s,"inflightPromise");default:return Promise.reject(new Error("retriable_promise_hoc:promiseStatus is invalid"))}}};var n=s(a(48926)),i=s(a(45095)),r=a(13959)},11234:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.requireBundle=t.SendGroupInviteFlowLoadable=void 0;var n=s(a(48926)),i=s(a(68356)),r=s(a(69618)),o=s(a(43725)),l=s(a(50860)),d=s(a(15334)),u=a(85893);const c=(0,d.default)((0,n.default)((function*(){return(yield Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,89495))).default})),"SendGroupInviteFlow");t.requireBundle=c;const h=(0,i.default)({loader:c,loading:e=>(0,u.jsx)(l.default,{title:o.default.t(553),error:Boolean(e.error)}),delay:r.default.LOADABLE_DELAY});t.SendGroupInviteFlowLoadable=h},66040:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.requireBundle=t.SendLogsPopupLoadable=void 0;var n=s(a(48926)),i=s(a(68356)),r=s(a(69618)),o=s(a(43725)),l=s(a(81791)),d=s(a(15334)),u=a(85893);const c=(0,d.default)((0,n.default)((function*(){return(yield Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,74943))).default})),"SendLogsPopup");t.requireBundle=c;const h=(0,i.default)({loader:c,loading:e=>(0,u.jsx)(l.default,{title:o.default.t(1246),okText:o.default.t(1232),error:Boolean(e.error)}),delay:r.default.LOADABLE_DELAY});t.SendLogsPopupLoadable=h},15303:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.requireBundle=t.SendMsgMultiFlowLoadable=void 0;var n=s(a(48926)),i=s(a(68356)),r=s(a(69618)),o=s(a(43725)),l=s(a(50860)),d=s(a(15334)),u=a(85893);const c=(0,d.default)((0,n.default)((function*(){return(yield Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,64232))).default})),"SendMsgMultiFlow");t.requireBundle=c;const h=(0,i.default)({loader:c,loading:e=>(0,u.jsx)(l.default,{title:o.default.t(867),error:Boolean(e.error)}),delay:r.default.LOADABLE_DELAY});t.SendMsgMultiFlowLoadable=h},45383:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.requireBundle=t.SettingsFlowLoadable=void 0;var n=s(a(48926)),i=s(a(68356)),r=s(a(69618)),o=s(a(43725)),l=s(a(16866)),d=s(a(15334)),u=a(85893);const c=(0,d.default)((0,n.default)((function*(){return(yield Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,77248))).default})),"SettingsFlow");t.requireBundle=c;const h=(0,i.default)({loader:c,loading:e=>(0,u.jsx)(l.default,{title:o.default.t(1257),error:Boolean(e.error)}),delay:r.default.LOADABLE_DELAY});t.SettingsFlowLoadable=h},82364:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.requireBundle=t.StarredDrawerLoadable=void 0;var n=s(a(48926)),i=s(a(68356)),r=s(a(69618)),o=s(a(16866)),l=s(a(15334)),d=a(85893);const u=(0,l.default)((0,n.default)((function*(){return(yield Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,53033))).default})),"StarredDrawer");t.requireBundle=u;const c=(0,i.default)({loader:u,loading:e=>(0,d.jsx)(o.default,{error:Boolean(e.error)}),delay:r.default.LOADABLE_DELAY});t.StarredDrawerLoadable=c},98633:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.requireBundle=t.QuotedStatusV3FlowLoadable=void 0;var n=s(a(48926)),i=s(a(68356)),r=s(a(69618)),o=s(a(19572)),l=s(a(15334)),d=a(85893);const u=(0,l.default)((0,n.default)((function*(){return(yield Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,10121))).default})),"QuotedStatusV3Flow");t.requireBundle=u;const c=(0,i.default)({loader:u,loading:e=>(0,d.jsx)(o.default,{error:Boolean(e.error)}),delay:r.default.LOADABLE_DELAY});t.QuotedStatusV3FlowLoadable=c},78781:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.requireBundle=t.StatusV3FlowLoadable=void 0;var n=s(a(48926)),i=s(a(68356)),r=s(a(69618)),o=s(a(20910)),l=s(a(15334)),d=a(85893);const u=(0,l.default)((0,n.default)((function*(){return(yield Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,540))).default})),"StatusV3Flow");t.requireBundle=u;const c=(0,i.default)({loader:u,loading:e=>(0,d.jsx)(o.default,{error:Boolean(e.error)}),delay:r.default.LOADABLE_DELAY});t.StatusV3FlowLoadable=c},76626:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.requireBundle=t.StickerStoreFlowLoadable=void 0;var n=s(a(48926)),i=s(a(68356)),r=s(a(69618)),o=s(a(16866)),l=s(a(15334)),d=a(85893);const u=(0,l.default)((0,n.default)((function*(){return(yield Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,86245))).default})),"StickerStoreFlow");t.requireBundle=u;const c=(0,i.default)({loader:u,loading:e=>(0,d.jsx)(o.default,{error:Boolean(e.error)}),delay:r.default.LOADABLE_DELAY});t.StickerStoreFlowLoadable=c},49376:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.requireBundle=t.VerificationDrawerLoadable=void 0;var n=s(a(48926)),i=s(a(68356)),r=s(a(69618)),o=s(a(43725)),l=s(a(16866)),d=s(a(15334));a(17040);var u=a(85893);const c=(0,d.default)((0,n.default)((function*(){return(yield Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,45925))).default})),"VerificationDrawer");t.requireBundle=c;const h=(0,i.default)({loader:c,loading:e=>(0,u.jsx)(l.default,{title:o.default.t(1901),error:Boolean(e.error)}),delay:r.default.LOADABLE_DELAY});t.VerificationDrawerLoadable=h},14828:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const[t,a]=(0,n.useState)(null),s=()=>{i.Cmd.closeModal()},v=e=>{a(e)},C=e.msg.list;if(!C)return null;const S=()=>{t&&((0,p.default)(e.msg,t),s())};let y;t&&(y=(0,g.jsxs)("div",{className:u.default.controlsSummary,children:[t.title,(0,g.jsx)("div",{className:u.default.btnActive,children:(0,g.jsx)(f.Round,{large:!0,onClick:S,children:(0,g.jsx)(m.default,{directional:!0,name:"send"})})})]}));return(0,g.jsx)(h.Modal,{type:h.ModalTheme.Tower,children:(0,g.jsxs)(r.default,{theme:"products",children:[(0,g.jsx)(l.DrawerHeader,{title:C.buttonText,type:l.DRAWER_HEADER_TYPE.POPUP,onCancel:s}),(0,g.jsx)(o.default,{theme:"padding",children:C.sections.map(((e,a)=>(0,g.jsx)(d.default,{title:e.title,theme:"list-section",shadow:!1,children:e.rows.map(((e,a)=>(0,g.jsx)(c.default,{row:e,onSelect:v.bind(null,e),selected:e===t},a)))},a)))}),(0,g.jsx)(_.default,{transitionName:"slide-up-down-footer",className:u.default.container,children:y})]})})};var n=a(67294),i=a(88102),r=s(a(60453)),o=s(a(69637)),l=a(94790),d=s(a(33308)),u=s(a(17050)),c=s(a(86506)),h=a(57224),f=a(82857),p=s(a(13164)),m=s(a(23217)),_=s(a(41956)),g=a(85893)},86506:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,r.jsx)(n.default,{primary:e.row.title,secondary:e.row.description,theme:"list-msg",onClick:e.onSelect,detail:(0,r.jsx)(i.default,{checked:e.selected,hover:!1,radio:!0,onChange:e.onSelect,systemUncheckedColor:!0})})};var n=s(a(44356)),i=s(a(9275)),r=a(85893)},82145:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.qplAnnotateCartView=function(e,t){s.QPL.markerAnnotate(n.QuickLogMarkerId.WHATSAPP_CART_VIEW,{bool:{IsConsumer:e},int:{ProductsCount:t}})},t.qplAnnotateCatalogView=function(e){s.QPL.markerAnnotate(n.QuickLogMarkerId.WHATSAPP_CATALOG_VIEW,{bool:{IsCached:e}})},t.qplAnnotateOrderView=function(e){s.QPL.markerAnnotate(n.QuickLogMarkerId.WHATSAPP_ORDER_VIEW,{int:{ProductsCount:e}})},t.qplAnnotateProductView=function(e){s.QPL.markerAnnotate(n.QuickLogMarkerId.WHATSAPP_PRODUCT_VIEW,{bool:{IsConsumer:e}})},t.qplAnnotateProfileCatsView=function(e){s.QPL.markerAnnotate(n.QuickLogMarkerId.WHATSAPP_PROFILE_CATS_VIEW,{int:{CategoryCount:e}})},t.qplDropCatalogView=function(){s.QPL.markerDrop(n.QuickLogMarkerId.WHATSAPP_CATALOG_VIEW)},t.qplDropOrderView=function(){s.QPL.markerDrop(n.QuickLogMarkerId.WHATSAPP_ORDER_VIEW)},t.qplDropProductView=function(){s.QPL.markerDrop(n.QuickLogMarkerId.WHATSAPP_PRODUCT_VIEW)},t.qplEndCartView=function(e){s.QPL.markerEnd(n.QuickLogMarkerId.WHATSAPP_CART_VIEW,e)},t.qplEndCatalogView=function(e){s.QPL.markerEnd(n.QuickLogMarkerId.WHATSAPP_CATALOG_VIEW,e)},t.qplEndOrderCreate=function(e){s.QPL.markerEnd(n.QuickLogMarkerId.WHATSAPP_ORDER_CREATE,e)},t.qplEndOrderView=function(e){s.QPL.markerEnd(n.QuickLogMarkerId.WHATSAPP_ORDER_VIEW,e)},t.qplEndProductView=function(e){s.QPL.markerEnd(n.QuickLogMarkerId.WHATSAPP_PRODUCT_VIEW,e)},t.qplEndProfileCatsView=function(e){s.QPL.markerEnd(n.QuickLogMarkerId.WHATSAPP_PROFILE_CATS_VIEW,e)},t.qplEndProfileSave=function(e){s.QPL.markerEnd(n.QuickLogMarkerId.WHATSAPP_PROFILE_SAVE,e)},t.qplStartCartView=function(e){s.QPL.markerStart(n.QuickLogMarkerId.WHATSAPP_CART_VIEW,{string:{EntryPoint:e}})},t.qplStartCatalogView=function(e){s.QPL.markerStart(n.QuickLogMarkerId.WHATSAPP_CATALOG_VIEW,{string:{EntryPoint:e}})},t.qplStartCollectionViewAll=function(e){s.QPL.markerStart(n.QuickLogMarkerId.WHATSAPP_COLLECTION_VIEW_ALL,{string:{EntryPoint:e}})},t.qplStartOrderCreate=function(e){s.QPL.markerStart(n.QuickLogMarkerId.WHATSAPP_ORDER_CREATE,{int:{ProductsCount:e}})},t.qplStartProductView=function(e){s.QPL.markerStart(n.QuickLogMarkerId.WHATSAPP_PRODUCT_VIEW,{string:{EntryPoint:e}})},t.qplStartProfileCatsView=function(e){s.QPL.markerStart(n.QuickLogMarkerId.WHATSAPP_PROFILE_CATS_VIEW,{string:{EntryPoint:e}})},t.qplStartProfileSave=function(e){s.QPL.markerStart(n.QuickLogMarkerId.WHATSAPP_PROFILE_SAVE,{string:{Field:e}})};var s=a(48870),n=a(27798)},52805:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.MainComponent=void 0,t.hasPending=function(){if(!k.GK.supportsFeature(k.GK.F.MD_BACKEND)&&!T.Conn.connected)return!1;const e=a(29250).hasText,t=B.MsgCollection.some((e=>e.ack===x.default.ACK.CLOCK&&e.local&&e.isSentByMe)),s=v.ChatCollection.some((e=>!!e.composeContents.text));return t||s||e()};var n=s(a(48926)),i=s(a(59854)),r=a(89385),o=a(13959),l=a(4352),d=a(57319),u=s(a(94184)),c=a(29984),h=s(a(30381)),f=a(67294),p=s(a(70714)),m=s(a(22402)),_=s(a(15421)),g=a(89721),v=a(69951),C=a(33929),S=s(a(66034)),y=s(a(47488)),b=a(88102),E=s(a(52665)),T=a(17239),x=s(a(69618)),M=s(a(83001)),P=a(53277),A=a(14315),I=a(99234),w=s(a(72451)),k=a(7293),j=s(a(73580)),N=s(a(35896)),O=s(a(43725)),R=a(84387),D=s(a(37236)),L=s(a(11339)),B=a(59871),F=s(a(51783)),G=s(a(91526)),U=a(92298),V=s(a(16932)),H=a(47569),K=a(64551),q=s(a(68132)),W=s(a(97172)),Y=s(a(68862)),z=a(8080),Q=a(97628),$=s(a(35166)),X=s(a(33048)),J=s(a(22502)),Z=a(65127),ee=a(18644),te=a(89618),ae=a(2541),se=s(a(26132)),ne=s(a(54937)),ie=a(96984),re=a(65044),oe=s(a(57302)),le=s(a(5882)),de=s(a(37362)),ue=s(a(79485)),ce=a(85893);const he=[[document,"mousemove"],[document,"scroll"],[document,"keydown"],[window,"focus"],[window,"resize"]];function fe(){window.history.pushState({},"",window.location.href)}const pe=Math.random()<.001?a(49934).I:null;class me extends f.PureComponent{constructor(e){super(e),this.state={drawerActive:!1,drawerAnimating:!1,isVoipInitialized:T.Conn.isVoipInitialized},this._idleMonitorController=null,this._serverPropsQueryLoop=null,this._rightDrawerOut=!1,this._setRefContainer=e=>{this._refContainer=e},this._refChatlistPanel=(0,f.createRef)(),this._refConversation=(0,f.createRef)(),this._onBlurTimer=new d.ShiftTimer((()=>{if(document.activeElement!==document.body)return;const{top:e}=te.UIM.Manager;e&&e.uie.requestFocus()})),this.onBlur=()=>{this._onBlurTimer.debounce(10)},this._onRightDrawerIn=()=>{this._rightDrawerOut=!1,b.Cmd.onPanesWillChange(3),this.setState({drawerActive:!0,drawerAnimating:!0},(()=>{b.Cmd.onPanesDidChange(3)})),this._animateConversationPanel()},this._onRightDrawerOut=()=>{this._rightDrawerOut=!0;const e={drawerActive:this.state.drawerActive,drawerAnimating:!0};this._animateConversationPanel()?(b.Cmd.onPanesWillChange(2),e.drawerActive=!1,this.setState(e,b.Cmd.onPanesDidChange.bind(b.Cmd,2))):this.setState(e)},this._onRightDrawerAnimationComplete=()=>{const e={drawerActive:this.state.drawerActive,drawerAnimating:!1};this.state.drawerActive&&this._rightDrawerOut&&(e.drawerActive=!1),this.setState(e)},this._skipNode=e=>{let t=!1;return b.Cmd.existsDrawerLeft((a=>{var s;const n=null===(s=this._refChatlistPanel)||void 0===s?void 0:s.current;t=t||a&&Boolean(null==n?void 0:n.containsDOMNode(e))})),b.Cmd.existsDrawerMid((a=>{var s;const n=null===(s=this._refConversation)||void 0===s?void 0:s.current;t=t||a&&Boolean(null==n?void 0:n.containsDOMNode(e))})),t},this._updateVoip=()=>{this.setState({isVoipInitialized:T.Conn.isVoipInitialized})},this._showTOS=()=>{switch(T.Conn.tos){case 1:case 2:b.Cmd.openModal((0,ce.jsx)(J.default,{}),{blockClose:!0});break;case 3:__LOG__(2)`TOS (terms of service) stage number 3, logging out`,re.Socket.logout()}},this._showSmbTos=()=>{T.Conn.smbTos&&b.Cmd.openModal((0,ce.jsx)(Y.default,{}),{blockClose:!0})},this._showUserNotice=()=>{k.GK.supportsFeature(k.GK.F.USER_NOTICE)&&(0,c.isNonZeroNumber)(F.default.noticeId)&&!0===F.default.blocking&&b.Cmd.openModal((0,ce.jsx)(se.default,{notice:F.default}),{blockClose:!0})},this.showKeyboardShortcuts=e=>{let{target:t}=e;for(let e=0;e<5;e++){if((a=t)&&a.getAttribute("contentEditable")||a instanceof HTMLInputElement)return;t=t.parentNode}var a;b.Cmd.openModal((0,ce.jsx)(oe.default,{})),e.preventDefault()},z.Stream.uiActive=!0,z.Stream.markAvailable();const{platform:t}=T.Conn;(0,W.default)((0,A.getEmojiTypeFromPlatform)(t)),g.AssetLoader.setPlatform(t)}componentWillUnmount(){var e;this._onBlurTimer.cancel(),N.default.menuBatchRenderWith((()=>{N.default.trigger(`${j.default.Event}:${j.default.Events.LOGGED_OUT}`)})),ae.URL.canMuckHistory()&&window.history.back(),z.Stream.uiActive=!1,this._clearIdleMonitor(),this._clearServerPropsQueryLoop(),null===(e=this._stopTrackingFPS)||void 0===e||e.call(this)}componentDidMount(){const{listeners:e}=this.props;if(N.default.menuBatchRenderWith((()=>{N.default.trigger(`${j.default.Event}:${j.default.Events.LOGGED_IN}`)})),ae.URL.canMuckHistory()&&(window.history.pushState({},"",window.location.href),e.add(window,"popstate",fe)),this._beginIdleMonitor(!0),this._beginServerPropsQueryLoop(),e.add(T.Conn,"change:isVoipInitialized",this._updateVoip),e.add(T.Conn,"change:tos",this._showTOS),this._showTOS(),T.Conn.isSMB&&(e.add(T.Conn,"change:smbTos",this._showSmbTos),this._showSmbTos()),e.add(F.default,"change:blocking change:noticeId",this._showUserNotice),this._showUserNotice(),Z.UA.isSafari&&!w.default&&(0,I.shouldShowNUX)(x.default.NUX.SAFARI_LIMITED_SUPPORT)&&(setTimeout((()=>{const e=O.default.t(1924,{chrome_homepage:x.default.BROWSER_LINK.CHROME,firefox_homepage:x.default.BROWSER_LINK.FIREFOX,opera_homepage:x.default.BROWSER_LINK.OPERA});b.Cmd.openModal((0,ce.jsx)(E.default,{onOK:()=>b.Cmd.closeModal(),okText:O.default.t(977),children:(0,ce.jsx)("div",{dangerouslySetInnerHTML:{__html:e}})}))}),250),(0,I.setNUX)(x.default.NUX.SAFARI_LIMITED_SUPPORT,{views:1,maxViews:1})),this._stopTrackingFPS=null==pe?void 0:pe.whenLessThan(1,((e,t)=>{new L.default.WebcUiFreeze({webcUiFreezeFps:e,webcUiFreezeT:(0,i.default)(t,0)}).commit(),__LOG__(2)`Low FPS Tracker: ${(0,i.default)(e,2)}fps, ${(0,i.default)(t,3)/1e3}s since page open.`})),le.default.supported){const e=navigator.serviceWorker;(null==e?void 0:e.controller)&&ue.default.request(e.controller,de.default.PRELOAD_LAZY_LOADED_BUNDLES).catch((()=>{}))}if(K.ServerProps.wallpapersV2){const e=S.default.get(C.DEFAULT_PREFERENCE);if(e&&x.default.DEFAULT_CHAT_WALLPAPER!==e.wallpaperColor){const t=this.context.theme;if(!(0,ie.colorExistsInTheme)(e.wallpaperColor,t)){const a="light"===t?"dark":"light";if((0,ie.colorExistsInTheme)(e.wallpaperColor,a)){const t=(0,ie.toggleWallpaperColor)(e.wallpaperColor,a);e.set("wallpaperColor",t)}}}}}_beginIdleMonitor(e){var t=this;let a=e?x.default.IDLE_TIMEOUT:0;this._idleMonitorController=new p.default;const s=this._idleMonitorController.signal;(0,l.promiseLoop)(function(){var e=(0,n.default)((function*(e){try{if(yield(0,o.delayMs)(a),s.aborted)throw new r.AbortError;if(z.Stream.markUnavailable(3e4),yield new Promise((e=>{const a=()=>{he.forEach((e=>{let[s,n]=e;t.props.listeners.remove(s,n,a)})),e()};he.forEach((e=>{let[s,n]=e;t.props.listeners.add(s,n,a)}))})),s.aborted)throw new r.AbortError;document.hasFocus()&&z.Stream.markAvailable(),a=x.default.IDLE_TIMEOUT}catch(t){if(t.name!==r.ABORT_ERROR)throw t;e()}}));return function(){return e.apply(this,arguments)}}()).finally((()=>{this._idleMonitorController=null}))}_clearIdleMonitor(){var e;null===(e=this._idleMonitorController)||void 0===e||e.abort()}_beginServerPropsQueryLoop(){this._serverPropsQueryLoop=_.default.setLocalTimeout((()=>{(0,H.queryServerProps)(),this._beginServerPropsQueryLoop()}),(0,h.default)().add(1,"days").valueOf())}_clearServerPropsQueryLoop(){_.default.clearTimeout(this._serverPropsQueryLoop)}_animateConversationPanel(){var e,t,a,s;const n=null===(e=this._refChatlistPanel)||void 0===e||null===(t=e.current)||void 0===t?void 0:t.getClientWidth();if(null==n)return!1;const i=null===(a=this._refContainer)||void 0===a?void 0:a.clientWidth;return null!=i&&(!!(null===(s=this._refConversation)||void 0===s?void 0:s.current)&&this._refConversation.current.animatePanel(i,n))}render(){const e=(0,u.default)(D.default.app,{three:this.state.drawerActive,two:!this.state.drawerActive,"app-animating":this.state.drawerAnimating,[D.default.noAnimation]:!this.props.animate});let t=(0,ce.jsx)(ne.default,{});return(0,ce.jsx)(ee.UIE,{uimState:ee.UIE.State.INACTIVE,displayName:"Main",children:(0,ce.jsxs)(X.default,{className:e,onBlur:this.onBlur,onRef:this._setRefContainer,onShowKeyboardShortcuts:this.showKeyboardShortcuts,skipNode:this._skipNode,children:[(0,ce.jsx)(G.default,{}),(0,ce.jsx)(m.default,{}),(0,ce.jsx)(U.PiPManager,{}),(0,ce.jsx)($.default,{}),t,undefined,(0,ce.jsxs)("div",{className:D.default.drawerManager,children:[(0,ce.jsx)("div",{className:(0,u.default)(D.default.pane,D.default.paneOne),children:(0,ce.jsx)(P.DrawerManager,{direction:P.Dir.LEFT})}),(0,ce.jsx)("div",{className:(0,u.default)(D.default.pane,D.default.paneTwo),children:(0,ce.jsx)(P.DrawerManager,{direction:P.Dir.MID})}),(0,ce.jsx)("div",{className:(0,u.default)(D.default.pane,D.default.paneThree),children:(0,ce.jsx)(P.DrawerManager,{direction:P.Dir.RIGHT,onDrawerIn:this._onRightDrawerIn,onDrawerOut:this._onRightDrawerOut,onDrawerAnimationComplete:this._onRightDrawerAnimationComplete})})]}),(0,ce.jsx)("div",{className:(0,u.default)(D.default.pane,D.default.paneOne),children:(0,ce.jsx)(y.default,{ref:this._refChatlistPanel,settings:q.default})}),(0,ce.jsx)("div",{className:(0,u.default)(D.default.pane,D.default.paneTwo),children:(0,ce.jsx)(M.default,{animate:this.props.animate,ref:this._refConversation})}),!1]})})}}me.contextType=Q.ThemeContext,me.displayName="Main";const _e=(0,R.ListenerHOC)((0,V.default)(me));t.MainComponent=_e},87868:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{legalEntityDetails:t,onSave:a}=e;const[s,b]=(0,i.useState)(null==t?void 0:t.entityType),[E,T]=(0,i.useState)(null==t?void 0:t.entityTypeCustom),[x,M]=(0,i.useState)(null==t?void 0:t.isRegistered);(0,i.useEffect)((()=>{s!==(null==t?void 0:t.entityType)&&(T(""),M(!1))}),[s,null==t?void 0:t.entityType]);const P=(0,i.useCallback)((()=>{d.Cmd.closeModal(),a(s,E,x)}),[s,E,x,a]),A=(0,i.useCallback)((e=>{b(e.target.value)}),[]),I=(0,i.useCallback)((e=>M(e.target.checked)),[]),w=(0,C.jsx)(y,{value:x,label:n.default._("Registered Business",null,{hk:"3N1x9I"}),inputType:"checkbox",xstyle:S.indentedOption,onChange:I,"data-testid":"registered"});return(0,C.jsx)(g.Modal,{type:g.ModalTheme.Box,children:(0,C.jsxs)(h.default,{theme:"settings",children:[(0,C.jsx)(p.DrawerHeader,{title:n.default._("Business Type",null,{hk:"48J73B"}),type:p.DRAWER_HEADER_TYPE.POPUP,onCancel:()=>d.Cmd.closeModal()}),(0,C.jsx)(f.default,{children:(0,C.jsx)("form",{className:(0,r.default)(S.form),children:(0,C.jsxs)("ol",{children:[(0,C.jsx)(y,{id:o.businessTypeOptions.limitedLiabilityPartnership,value:s,label:n.default._("Limited liability partnership",null,{hk:"2dwmwU"}),onChange:A,"data-testid":"limited-liability-partnership"}),(0,C.jsx)(y,{id:o.businessTypeOptions.soleProprietorship,value:s,label:n.default._("Sole proprietorship",null,{hk:"2N7jks"}),onChange:A,"data-testid":"sole-proprietorship"}),(0,C.jsx)(y,{id:o.businessTypeOptions.partnership,value:s,label:n.default._("Partnership",null,{hk:"ZeckL"}),onChange:A,"data-testid":"partnership"}),s===o.businessTypeOptions.partnership&&w,(0,C.jsx)(y,{id:o.businessTypeOptions.publicCompany,value:s,label:n.default._("Public Company",null,{hk:"1YuMvC"}),onChange:A,"data-testid":"public-company"}),(0,C.jsx)(y,{id:o.businessTypeOptions.privateCompany,value:s,label:n.default._("Private Company",null,{hk:"WL0uU"}),onChange:A,"data-testid":"private-company"}),(0,C.jsx)(y,{id:o.businessTypeOptions.other,value:s,label:n.default._("Other",null,{hk:"3zua5D"}),onChange:A,"data-testid":"other"}),s===o.businessTypeOptions.other&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{className:(0,r.default)(S.indentedOption),"data-testid":"other-input",children:(0,C.jsx)(v.TextInput,{value:E,editable:!0,maxLength:c.default.COMPLIANCE_INFO_LENGTH.ENTITY_TYPE_CUSTOM,inputPlaceholder:n.default._("Label",null,{hk:"3MRMvC"}),showRemaining:!0,onChange:T,theme:"text-input",lowProfile:!0})}),w]})]})})}),(0,C.jsx)(m.FlexRow,{justify:"end",xstyle:S.footer,children:(0,C.jsx)(m.FlexItem,{children:(0,C.jsx)(l.default,{type:"primary",onClick:P,disabled:s===o.businessTypeOptions.other&&!(0,u.existsFieldIgnoreHardEnforcement)(E),className:(0,r.default)(S.submitButton),children:_.default.t(1189)})})})]})})};var n=s(a(48360)),i=a(67294),r=s(a(56720)),o=a(93170),l=s(a(39770)),d=a(88102),u=a(95176),c=s(a(69618)),h=s(a(60453)),f=s(a(69637)),p=a(94790),m=a(29623),_=s(a(43725)),g=a(57224),v=a(90011),C=a(85893);const S={inputWrapper:{display:"p357zi0d",alignSelf:"o2es7gts",paddingEnd:"iffbo4e8"},form:{paddingTop:"pxvlsfnc",paddingEnd:"bcymb0na",paddingBottom:"n3bptxsn",paddingStart:"e8k79tju"},label:{display:"f804f6gw",paddingTop:"emrlamx0",paddingEnd:"f9ovudaz",paddingBottom:"aiput80m",paddingStart:"gx1rr48f",fontSize:"fe5nidar"},footer:{paddingTop:"emrlamx0",paddingEnd:"itegkywt",paddingBottom:"aiput80m",paddingStart:"rppts313",backgroundColor:"lkjmyc96",borderTop:"swyb62mu"},submitButton:{marginTop:"tt8xd2xn",marginEnd:"jnwc1y2a",marginBottom:"mpdn4nr2",marginStart:"svoq16ka"},indentedOption:{marginStart:"dl2ettod"},cursorPointer:{cursor:"ajgl1lbb"}};function y(e){let{id:t,value:a,label:s,inputType:n="radio",xstyle:i,onChange:o,"data-testid":l="merchant-details-entity-type-option-popup"}=e;const d=t||s;return(0,C.jsx)("li",{className:(0,r.default)(S.cursorPointer,i),children:(0,C.jsxs)(m.FlexRow,{align:"center",children:[(0,C.jsx)(m.FlexItem,{xstyle:S.inputWrapper,children:(0,C.jsx)("input",{id:d,value:d,type:n,name:"entityType",checked:"radio"===n?a===d:a,className:(0,r.default)(S.cursorPointer),onChange:o})}),(0,C.jsx)(m.FlexItem,{grow:1,children:(0,C.jsx)("label",{htmlFor:d,className:(0,r.default)(S.label,S.cursorPointer),"data-testid":`${l}-label`,children:s})})]})})}},39376:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(86945),i=a(94010),r=a(88102),o=a(17239),l=a(19380),d=s(a(95993)),u=a(99234),c=s(a(43725)),h=s(a(11339)),f=a(61653),p=s(a(25550)),m=a(1710),_=a(77117),g=a(82039),v=a(46133),C=a(85893);const S=f.NuxKeyTypes.COOL_OFF_NUX.INCOMPLETE_BUSINESS_PROFILE_BANNER;class y extends p.default{render(){const{onInteract:e}=this.props,t=new m.CoolOffNux(S,h.default.BANNER_TYPES.SMB_EDIT_PROFILE);return(0,C.jsx)(d.default,{title:c.default.t(965),actionText:c.default.t(964),onDismiss:e,onClick:()=>{!function(){const e=(0,u.getMaybeMeUser)(),t=v.StatusCollection.assertGet(e),a=g.ProfilePicThumbCollection.assertGet(e),s=l.ContactCollection.assertGet(e);r.Cmd.openDrawerLeft((0,C.jsx)(_.ProfileDrawerFlowLoadable,{status:t,profilePicThumb:a,contact:s,conn:o.Conn}))}(),e&&e()},nuxManager:t,theme:"nuxGreen"})}static shouldShow(){const e=(0,u.getMaybeMeUser)(),t=l.ContactCollection.assertGet(e).businessProfile;return!!t&&(0,n.getABPropConfigValue)("web_abprop_business_profile_incomplete_nux_banner")&&o.Conn.isSMB&&!(0,i.isCompleteBizProfile)(t)&&(0,m.shouldShowNUX)(S)}}t.default=y,y.displayName="BusinessProfileBanner"},67161:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const e=(0,c.default)(),t=(0,n.useMemo)((()=>r.BusinessProfileCollection.get((0,l.getMaybeMeUser)())),[]),[a,s]=(0,n.useState)((()=>null!=r.BusinessProfileCollection.getValid((0,l.getMaybeMeUser)())));(0,h.useListener)(o.Conn.isSMB?t:null,"change",(()=>{s(!0)}));const p=()=>{e()};return a&&(0,f.jsxs)(d.default,{children:[(0,f.jsx)(i.default,{onInteract:p}),(0,f.jsx)(u.default,{onInteract:p})]})};var n=a(67294),i=s(a(39376)),r=a(93581),o=a(17239),l=a(99234),d=s(a(26293)),u=s(a(47955)),c=s(a(59909)),h=a(19529),f=a(85893)},95993:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{title:t,subtitle:a,onDismiss:s,onClick:l,nuxManager:d,theme:u,actionText:c}=e;const[h,f]=(0,n.useState)(!0);d.show();const p=(0,o.jsxs)(o.Fragment,{children:[a," ",c&&(0,o.jsx)(i.default,{inline:!0,children:c})]});return(0,o.jsx)(o.Fragment,{children:h&&(0,o.jsx)(r.default,{type:u,title:t,text:p,onDismiss:e=>{e.preventDefault(),e.stopPropagation(),d.dismiss(),s&&s(),f(!1)},action:()=>{d.click(),l&&l()}})})};var n=a(67294),i=s(a(29237)),r=s(a(30508)),o=a(85893)},25550:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(67294);class n extends s.Component{static shouldShow(){return!1}}t.default=n},26293:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{children:t}=e;const a=n.Children.toArray(t).find((e=>e.type.shouldShow()));return(0,r.jsx)(i.default,{transitionName:"butterbar",children:a})};var n=a(67294),i=(s(a(25550)),s(a(41956))),r=a(85893)},47955:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(86945),i=a(93581),r=a(94010),o=a(87912),l=a(17239),d=s(a(95993)),u=a(99234),c=s(a(43725)),h=s(a(11339)),f=a(61653),p=s(a(25550)),m=a(1710),_=a(64551),g=a(85893);const v=f.NuxKeyTypes.COOL_OFF_NUX.PRODUCT_CATALOG_BANNER;class C extends p.default{render(){const{onInteract:e}=this.props,t=new m.CoolOffNux(v,h.default.BANNER_TYPES.SMB_CATALOG);return(0,g.jsx)(d.default,{title:c.default.t(970),actionText:c.default.t(969),onDismiss:e,onClick:()=>{(0,o.openCatalogManagementFlow)(null,h.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_NUX),e&&e()},nuxManager:t,theme:"nuxGreen"})}static shouldShow(){const e=(0,u.getMaybeMeUser)(),t=i.BusinessProfileCollection.get(e);return(0,n.getABPropConfigValue)("web_abprop_product_catalog_nux_banner")&&l.Conn.isSMB&&!function(){if(!l.Conn.isSMB||!_.ServerProps.shopsHeaderDropdownMenuItem)return!1;const e=i.BusinessProfileCollection.get((0,u.getMaybeMeUser)());return(0,r.hasShop)(e)}()&&!(0,r.hasCatalog)(t)&&(0,m.shouldShowNUX)(v)}}t.default=C,C.displayName="ProductCatalogBanner"},95042:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(){const t=i.BusinessProfileCollection.get((0,u.getMaybeMeUser)());(0,r.goToCommerceManager)(t),e.onCommerceManagerClick&&e.onCommerceManagerClick()}function a(){d.Cmd.closeModal(),e.onCancelClick&&e.onCancelClick()}if((0,c.bannedShopsEnabled)()){const e=i.BusinessProfileCollection.get((0,u.getMaybeMeUser)());if((0,r.isShopBanned)(e))return(0,p.jsx)(l.default,{type:f.ModalTheme.ColumnButtons,title:h.default.t(1934),onCancel:a,actions:(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(o.default,{type:"primary",onClick:t,children:n.default._("Commerce Manager",null,{hk:"2ZKedl"})})}),children:h.default.t(1935)})}return(0,p.jsx)(l.default,{type:f.ModalTheme.ColumnButtons,title:h.default.t(1937),onCancel:a,actions:(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(o.default,{type:"primary",onClick:function(){const t=i.BusinessProfileCollection.get((0,u.getMaybeMeUser)());(0,r.goToShop)(t),e.onViewShopClick&&e.onViewShopClick()},children:h.default.t(1454)}),(0,p.jsx)(o.default,{type:"primary",onClick:t,children:n.default._("Commerce Manager",null,{hk:"2ZKedl"})})]}),children:h.default.t(1938)})};var n=s(a(48360)),i=a(93581),r=a(94010),o=s(a(39770)),l=s(a(40944)),d=a(88102),u=a(99234),c=a(57701),h=s(a(43725)),f=a(57224),p=a(85893)},68862:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const e=o.default.t(1846);(0,d.useListener)(r.Conn,"change:smbTos",(()=>{r.Conn.smbTos||n.Cmd.closeModal()}));const t=o.default.t(808);return(0,c.jsxs)(i.default,{onOK:()=>{__LOG__(2)`SMB: terms of service modal, user clicked logout`,n.Cmd.closeModal(),u.Socket.logout()},okText:t,children:[e,"",(0,c.jsx)(l.default,{})]})};var n=a(88102),i=s(a(52665)),r=a(17239),o=s(a(43725)),l=s(a(31703)),d=a(19529),u=a(65044),c=a(85893)},58836:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onBlock:t,onCancel:a,onReportSpamBlock:s}=e,c=e=>{e.stopPropagation(),e.preventDefault(),t()},h=e=>{e.stopPropagation(),e.preventDefault(),a()},f=(0,u.jsx)(n.default,{a8nText:"popup-controls-block",type:"primary",onClick:c,children:r.default.t(181)},0),p=(0,u.jsx)(n.default,{a8nText:"popup-controls-report-spam",type:"secondary",onClick:e=>{e.stopPropagation(),e.preventDefault(),s()},children:r.default.t(1147)},1),m=(0,u.jsx)(n.default,{a8nText:"popup-controls-cancel",type:"secondary",onClick:h,children:r.default.t(1574)},2),_=(0,u.jsx)(d.Name,{contact:e.contact}),g=(0,u.jsx)(o.default,{id:182,params:{contact:_}});return(0,u.jsx)(i.HotKeys,{handlers:{enter:c,escape:h},children:(0,u.jsx)(l.Modal,{children:g,actions:[p,f,m]})})};var n=s(a(39770)),i=a(55414),r=s(a(43725)),o=s(a(56074)),l=a(57224),d=a(12176),u=a(85893)},40944:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(t){t.stopPropagation(),t.preventDefault(),e.onCancel&&e.onCancel()}const a=n.Children.count(e.actions)>0,s=e.onCancel?(0,d.jsx)(i.default,{a8nText:"popup-controls-cancel",type:a?"secondary":"primary",onClick:t,children:e.cancelText||o.default.t(1574)}):null,u={escape:e.onCancel?t:()=>{}},c=(0,d.jsxs)(d.Fragment,{children:[e.actions,s]});return(0,d.jsx)(r.HotKeys,{handlers:u,children:(0,d.jsx)(l.Modal,{actions:c,children:e.children,cover:e.cover,onDragChange:e.onDragChange,onDrop:e.onDrop,type:e.type,title:e.title})})};var n=a(67294),i=s(a(39770)),r=a(55414),o=s(a(43725)),l=a(57224),d=a(85893)},62857:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(23279)),i=s(a(23493)),r=a(89385),o=a(57319),l=s(a(45120)),d=s(a(52013)),u=a(67294),c=s(a(70714)),h=a(63183),f=s(a(22719)),p=a(22683),m=a(88102),_=s(a(69618)),g=s(a(58654)),v=s(a(60453)),C=s(a(69637)),S=a(94790),y=a(85600),b=a(47915),E=s(a(30855)),T=s(a(84937)),x=a(99234),M=a(7293),P=s(a(3222)),A=a(55414),I=s(a(41955)),w=s(a(43725)),k=s(a(48837)),j=a(84387),N=s(a(99104)),O=s(a(84644)),R=s(a(87481)),D=a(11054),L=a(3940),B=s(a(90012)),F=a(77591),G=a(85893);class U extends u.Component{constructor(e){var t;super(e),t=this,this.flatListController=new E.default,this.state={searchText:"",searching:!1,resultsUnavailable:!1},this.setSearch=e=>{this.search=e},this.selection=new R.default([],(e=>e.id.toString())),this.pending=!1,this._batchRenderState={},this._handleScroll=e=>{this.shouldFTSSearch(e)&&(this.fts(),this.pending=!0)},this.handleScroll=(0,i.default)(this._handleScroll,100),this._debounceSetState=new o.ShiftTimer((()=>{this.setState(this._batchRenderState),this._batchRenderState={}})),this._batchSetState=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:75;Object.assign(t._batchRenderState,e),t._debounceSetState.debounce(a)},this.fts=(0,n.default)((()=>{var e;this.pending=!1;const t=(this.state.searchText||"").trim();if(!(0,I.default)(t))return;null===(e=this._ftsAbortController)||void 0===e||e.abort(),this._ftsAbortController=new c.default;const a=this._ftsAbortController.signal,s=Promise.resolve().then((()=>{this.isFTSSearching()||this._batchSetState({searching:!0})})).then((()=>this.ftsMsgs.search({chat:this.props.chat,count:this._getSearchCount(),searchTerm:t})));this._ftsPromise=(0,O.default)(s,a).then((e=>{if(this.props.getUnmountSignal().aborted)throw new r.AbortError;e&&!e.canceled&&t===this.state.searchText.trim()&&this._batchSetState({searching:!1,resultsUnavailable:!1})})).catch((0,r.catchAbort)((()=>{}))).finally((()=>{this._ftsPromise=void 0,this._ftsAbortController=void 0})).catch((e=>{this.pending||this._batchSetState({searching:!1,resultsUnavailable:e instanceof F.E404})}))}),_.default.FTS_TYPING_DELAY),this.fullTextSearch=e=>{const t=e.trim();var a;(0,I.default)(t)?(this.fts(),this.pending=!0,this.state.searching||this._batchSetState({searching:!0})):(this.fts.cancel(),this.ftsMsgs.resetSearch(),this.ftsMsgs.delete(),null===(a=this._ftsAbortController)||void 0===a||a.abort(),this.pending=!1,this.state.searching&&this._batchSetState({searching:!1,resultsUnavailable:!1}))},this.shouldFTSSearch=e=>!(!this.ftsMsgs.hasMoreMsgs||this.pending||this.state.searching||this.ftsMsgs.searchPromise||(0,L.numCodepoints)(this.state.searchText||"")<_.default.FTS_MIN_CHARS)&&e.scrollTop+_.default.SCROLL_FUDGE>e.scrollHeight-e.clientHeight,this.isFTSSearching=()=>{const e=this._batchRenderState;return"searching"in e?e.searching:this.state.searching},this.handleSearch=e=>{if(!e)return void this.handleStopSearch();e!==this.state.searchText&&(this.fullTextSearch(e),this.setState({searchText:e}),this._batchSetState({searchText:e,resultsUnavailable:!1}))},this.handleStopSearch=()=>{var e;this.fts.cancel(),this.ftsMsgs.resetSearch(),this.ftsMsgs.delete(),null===(e=this._ftsAbortController)||void 0===e||e.abort(),this.pending=!1,this.setState({searchText:"",searching:!1})},this.handleFocusList=e=>{e.repeat||this._refMsglist&&(this.search&&!this.search.cursorIsAtEnd()||(e.preventDefault(),e.stopPropagation(),l.default.shouldIndicateFocus(),this._refMsglist&&this._refMsglist.focusFirst()))},this.handleOpenFirst=e=>{e.preventDefault();const t=this.ftsMsgs.head();if(!t)return;const a=t.chat,s=a.getSearchContext(t);m.Cmd.focusChatTextInput(a),m.Cmd.openChatAt(a,s)},this.handleFocusSearch=()=>{l.default.shouldIndicateFocus(),d.default.focus(this.search)},this.handleClose=()=>{this.props.uim.uie.requestDismiss()},this.indicateFocus=()=>{l.default.maybeIndicateFocus(this.refInputHotkey)},this.onScroll=e=>{this.handleScroll(e.currentTarget)},this.getEmptyChatlistState=e=>{if(e.length)return null;const t=(this.state.searchText||"").trim();return(0,L.numCodepoints)(t)>=_.default.FTS_MIN_CHARS?this.state.searching?(0,G.jsx)(y.SearchingMessages,{}):this.state.resultsUnavailable?(0,G.jsx)(y.SearchMessagesUnavailable,{}):(0,G.jsx)(y.SearchMessages,{}):(0,y.BeforeSearchMessages)(this.props.chat.title(),this.props.chat.isGroup)},this._setRefMsglist=e=>{this._refMsglist=e},this._setInputHotkey=e=>{this.refInputHotkey=e},this.ftsMsgs=new T.default(e.chat)}componentDidMount(){this.handleFocusSearch(),this.props.listeners.add(this.ftsMsgs,"bulk_remove",(()=>{this.forceUpdate()}))}componentWillUnmount(){var e;this.handleScroll.cancel(),this.fts.cancel(),this.ftsMsgs.delete(!0),null===(e=this._ftsAbortController)||void 0===e||e.abort(),this._debounceSetState.cancel()}_getSearchCount(){return Math.round(window.innerHeight/b.DEFAULT_ITEM_HEIGHT)+1}render(){const e=this.ftsMsgs.toArray();let t=this.getEmptyChatlistState(e);if(null==t){const a=this.state.searchText?this.state.searchText.trim():null;t=(0,G.jsx)(N.default,{ref:this._setRefMsglist,flatListController:this.flatListController,isSearching:!!this.state.searchText,searchText:a,ftsResult:e,selection:this.selection,onFocusSearch:this.handleFocusSearch})}const a={down:this.handleFocusList},s=this.state.searching&&e.length?(0,G.jsx)("div",{className:f.default.searchSpinner,children:(0,G.jsx)(D.Spinner,{stroke:6,size:24})}):null;let n;if(M.GK.supportsFeature(M.GK.F.MD_BACKEND)&&this.props.chat.endOfHistoryTransferType===h.ConversationEndOfHistoryTransferModelPropType.COMPLETE_BUT_MORE_MESSAGES_REMAIN_ON_PRIMARY){const e=(this.state.searchText||"").trim();if((0,L.numCodepoints)(e)>=_.default.FTS_MIN_CHARS){const e=p.Clock.relativeDateStr((0,x.getHistorySyncEarliestDate)());n=(0,G.jsx)(g.default,{theme:"md-chat-search-list",children:w.default.t(382,{date:e})})}}return(0,G.jsxs)(v.default,{children:[(0,G.jsx)(S.DrawerHeader,{title:w.default.t(1196),type:S.DRAWER_HEADER_TYPE.SMALL,onCancel:this.handleClose}),(0,G.jsx)(A.HotKeys,{handlers:a,onFocus:this.indicateFocus,onRef:this._setInputHotkey,className:f.default.panelSearch,children:(0,G.jsx)(k.default,{ref:this.setSearch,type:"chat-msg-search",onSearch:this.handleSearch,onEnter:this.handleOpenFirst,placeholder:w.default.t(1191),loading:this.state.searching})}),(0,G.jsxs)(C.default,{flatListControllers:[this.flatListController],className:f.default.panelBody,onScroll:this.onScroll,id:"pane-side",children:[t,s,n]})]},"search-modal")}}U.displayName="ChatSearch";var V=(0,P.default)((0,j.ListenerHOC)((0,B.default)(U)));t.default=V},60235:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n.default}});var n=s(a(62857))},13243:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.Message=function(e){const{author:t,onClick:a}=e,s=(0,m.useModelValues)(e.msg,["id","chat","isSentByMe","senderObj","rtl","dir","type","t"]),g=(0,r.useRef)(null),v=(0,r.useRef)(null),[C,S]=(0,r.useState)((()=>!!e.active&&e.active.value===s));(0,p.useListener)(e.active,s.id.toString(),((e,t)=>{if("focus"===e){const e=v.current;i.default.focus(e),t&&e&&(0,l.scrollIntoViewIfNeeded)(e)}S(!!e)}));const y=e=>{if((0,f.isFunction)(a)){const t=s.chat,n=t.getSearchContext((0,c.unproxy)(s));n.msg=s,a(e,t,n)}},b=(0,_.jsx)(h.default,{msg:s}),E=(0,_.jsx)(u.default,{msg:s.safe(),msgType:"Search",author:t,searchQuery:e.searchText?[e.searchText]:[]});return(0,_.jsx)(d.HotKeys,{handlers:{enter:e=>{e.preventDefault(),e.stopPropagation(),n.default.shouldIndicateFocus(),y(e)}},onFocus:()=>{var e;null===(e=g.current)||void 0===e||e.indicateFocus()},onRef:e=>{v.current=e},children:(0,_.jsx)(o.default,{ref:g,contextEnabled:()=>!1,theme:"chat-search",active:!!C,primaryDetail:b,secondary:E,primary:void 0,onClick:y})})};var n=s(a(45120)),i=s(a(52013)),r=a(67294),o=s(a(49107)),l=a(32303),d=a(55414),u=s(a(3982)),c=a(31019),h=s(a(55364)),f=a(31515),p=a(19529),m=a(49082),_=a(85893)},35109:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,n.useModelValues)(e.msg,["id","chat"]),a=(0,n.useModelValues)(e.contact,["formattedShortName"]);return(0,i.jsx)(s.Message,{msg:t,chat:t.chat,author:a.formattedShortName,searchText:e.searchText,onClick:e.onClick,active:e.active},t.id.toString())};var s=a(13243),n=a(49082),i=a(85893)},99104:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(67294),i=a(88102),r=s(a(47620)),o=s(a(69618)),l=a(50101),d=a(47915),u=a(55414),c=a(13243),h=s(a(35109)),f=s(a(59147)),p=a(85893);function m(e,t){const{selection:a,ftsResult:s,searchText:m,onFocusSearch:_}=e,g=(0,f.default)(),v=(0,n.useRef)(null),C=(e,t,a)=>{e.preventDefault(),e.stopPropagation(),(0,l.findChat)(t.id).then((e=>{2===r.default.column&&(null==g||g.uie.requestDismiss()),i.Cmd.focusChatTextInput(e),i.Cmd.openChatAt(e,a)}))},S=()=>{a.reset(!0)},y=()=>{a.setFirst(!0)};return(0,n.useEffect)((()=>{a.init(s||[])}),[]),(0,n.useImperativeHandle)(t,(()=>({focusFirst:y,restoreFocus:S}))),(0,p.jsx)(u.HotKeys,{handlers:{down:e=>(e=>{e&&(e.preventDefault(),e.stopPropagation());const t=a.next();a.index!==t&&a.setNext(!0)})(e),up:e=>{return(t=e)&&(t.stopPropagation(),t.preventDefault()),void(a.prev()>-1?a.setPrev(!0):_());var t}},onFocus:e=>{e.target===v.current&&(a.index<0?y():a.reset(!0))},"data-tab":o.default.TAB_ORDERS.CHAT_SEARCH_MSG_LIST,onRef:e=>{v.current=e},children:(0,p.jsx)(d.FlatList,{flatListController:e.flatListController,direction:"vertical",data:s.map((e=>({itemKey:e.id.toString(),msg:e}))),renderItem:e=>{const{msg:t}=e;return t.sender&&t.isGroupMsg&&!t.isNotification&&!t.isSentByMe?(0,p.jsx)(h.default,{contact:t.senderObj,msg:t,chat:t.chat,searchText:m,onClick:C,active:a},t.id.toString()):(0,p.jsx)(c.Message,{msg:t,chat:t.chat,searchText:m,onClick:C,active:a},t.id.toString())},forceConsistentRenderCount:!1})})}var _=(0,n.forwardRef)(m);t.default=_},90233:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{children:t,disabled:a,tabIndex:s,selections:u,model:c,checked:h}=e,[f,p]=(0,i.useState)((()=>u.isSelected(c)||!!h));return(0,l.useListener)(u,c.id.toString(),(e=>{e!==f&&p(e)})),(0,d.jsxs)("div",{className:o.default.checkboxSelectableWrapper,children:[(0,d.jsx)("div",{className:o.default.checkboxSelectableControl,"data-a8n":n.default.key(e.a8nKey),children:(0,d.jsx)(r.CheckBox,{onChange:()=>{},checked:f,disabled:a,tabIndex:s})}),t]})};var n=s(a(99964)),i=a(67294),r=a(16593),o=s(a(66103)),l=a(19529),d=a(85893)},9712:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{chat:t}=e,[a,s]=(0,r.useState)((()=>!f.GK.supportsFeature(f.GK.F.MD_BACKEND))),C=()=>{u.Cmd.closeModal()},S=()=>{t.pendingAction++,(0,_.sendClear)(t,a).finally((()=>{t.pendingAction--})),u.Cmd.closeModal()},y=(0,r.useMemo)((()=>{switch(t.kind){case o.CHAT_KIND.GROUP:return i.default._("Clear this chat?",null,{hk:"2L0fh7"});case o.CHAT_KIND.CHAT:return i.default._("Clear this chat?",null,{hk:"RFq4U"});case o.CHAT_KIND.BROADCAST:return i.default._("Clear this chat?",null,{hk:"1TyQoK"});default:return""}}),[t.kind]),b=(0,v.jsxs)("div",{className:d.default.section,children:[(0,v.jsx)("div",{"data-a8n":n.default.key("menu-icon-clear-chat"),className:d.default.control,children:(0,v.jsx)(l.CheckBox,{onChange:()=>{s(!a)},checked:a,id:"menu-icon-clear-chat"})}),(0,v.jsx)("label",{htmlFor:"menu-icon-clear-chat",className:d.default.label,children:m.default.t(670)})]});if(f.GK.supportsFeature(f.GK.F.MD_BACKEND)){const e=(0,p.clearOrDeleteChatSyncEnabled)()?(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{className:d.default.note,children:(0,v.jsx)(g.TextParagraph,{theme:"muted",children:m.default.t(1717)})}),b]}):(0,v.jsx)("div",{className:d.default.note,children:(0,v.jsx)(g.TextParagraph,{theme:"muted",children:m.default.t(1726)})});return(0,v.jsx)(c.default,{title:y,onOK:S,okText:i.default._("Clear chat",null,{hk:"46a4GH"}),onCancel:C,children:e})}return(0,v.jsx)(c.default,{onOK:S,okText:i.default._("Clear chat",null,{hk:"46a4GH"}),onCancel:C,children:(0,v.jsxs)("div",{children:[(0,v.jsx)(h.EmojiText,{text:y}),b]})})};var n=s(a(99964)),i=s(a(48360)),r=a(67294),o=a(63183),l=a(16593),d=s(a(28931)),u=a(88102),c=s(a(52665)),h=a(65417),f=a(7293),p=a(57701),m=s(a(43725)),_=a(83802),g=a(13923),v=a(85893)},96464:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(67294),i=s(a(69618)),r=s(a(55944)),o=s(a(60453)),l=s(a(69637)),d=a(94790),u=s(a(35563)),c=s(a(59147)),h=a(85893);function f(e,t){var a;const{onClose:s}=e,n=(0,c.default)(),f=()=>{s?s():null==n||n.uie.requestDismiss()},p=e.chat.getReceivedVcardMsgs(),m=null!==(a=null==p?void 0:p.map((e=>(0,h.jsx)(u.default,{msg:e,displayType:i.default.DISP_TYPE.CONTACT_CARD,onMessageClick:f},e.id.toString()))))&&void 0!==a?a:[];return(0,h.jsxs)(o.default,{ref:t,children:[(0,h.jsx)(d.DrawerHeader,{title:(0,h.jsx)(r.default,{count:p?p.length:0}),onBack:f,type:d.DRAWER_HEADER_TYPE.LARGE}),(0,h.jsx)(l.default,{children:m})]})}var p=(0,n.forwardRef)(f);t.default=p},55944:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{count:t}=e;return n.default._({"*":"Contact cards",_1:"Contact card"},[n.default._plural(t)],{hk:"SuHZi"})};var n=s(a(48360))},50485:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onCancel:t,onSend:a,supportTag:d}=e,u=(0,s.useCallback)((e=>{n.Cmd.openModal((0,l.jsx)(o.SendLogsPopupLoadable,{onCancel:t,onSend:a,description:null==e?void 0:e.description,supportTag:d}))}),[t,a,d]);if((0,r.isInAppSupportEnabled)())return(0,l.jsx)(i.ContactUsModalLoadable,{onEmail:u,onCancel:t,onFailure:u,supportTag:d});return(0,l.jsx)(o.SendLogsPopupLoadable,{onCancel:t,onSend:a,supportTag:d})};var s=a(67294),n=a(88102),i=a(24390),r=a(10435),o=a(66040),l=a(85893)},4317:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(88102),i=s(a(60453)),r=s(a(69637)),o=a(94790),l=a(55414),d=s(a(43725)),u=a(57224),c=s(a(11976)),h=a(78521),f=a(85893);t.default=e=>{const{vcard:t}=e;return(0,f.jsx)(u.Modal,{type:u.ModalTheme.Box,children:(0,f.jsxs)(i.default,{children:[(0,f.jsx)(o.DrawerHeader,{title:d.default.t(378),type:o.DRAWER_HEADER_TYPE.POPUP,onCancel:()=>n.Cmd.closeModal()}),(0,f.jsx)(r.default,{children:(0,f.jsx)(l.HotKeys,{children:(0,f.jsx)(c.default,{parsedVcard:t,thumbnail:(0,h.vcardThumbnail)(t)})})})]},"vcard-modal")})}},29234:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(81109)),i=a(67294),r=a(2732),o=a(19380),l=a(85600),d=a(47915),u=s(a(43725)),c=s(a(67568)),h=s(a(48690)),f=s(a(11497)),p=s(a(87481)),m=a(31515),_=s(a(81559)),g=s(a(59909)),v=s(a(59552)),C=a(19529),S=a(85893);const y="HEADER",b="ROW";function E(e){const{title:t,onCancel:a,contacts:s,filter:E,onSelect:T,onContext:x,contextEnabled:M,contextMenu:P,openContextOnClick:A,showNotifyName:I,participantCollection:w,listenForAdminChange:k}=e,j=(0,v.default)((()=>new p.default([],(e=>e.id)))),[N,O]=(0,i.useState)(void 0),R=(0,g.default)();(0,C.useListener)(o.ContactCollection,"add remove change:name",(()=>{s||R()}));const D=(0,_.default)((e=>{O(e)}),100);return(0,S.jsx)(c.default,{title:t,data:(()=>{const e=u.default.accentFold(N),t=(0,h.default)(e),a=(s||o.ContactCollection).filter((a=>E(a)&&(!e||e&&a.searchMatch(e,t))));j.current.init(a.filter((e=>!0===E(e))));const n=[];if(!a.length)return n;let i,r;const l=a.length>10;for(let e=0;e<a.length;e++)i=a[e],l&&i.header!==r&&n.push({type:y,header:i.header,itemKey:`${i.header||""}_${e}`}),n.push({type:b,contact:i,itemKey:`${i.id.toString()}_${e}`}),r=i.header;return n})(),renderItem:e=>{var t;switch(e.type){case y:return(0,S.jsx)(f.default,{header:null!==(t=e.header)&&void 0!==t?t:""});case b:const a=(0,m.isString)(E(e.contact)),s=a?"group-modal":null,i=a?E(e.contact):null,o=x&&P?{contextEnabled:M,contextMenu:P(e.contact.id),onContext:x}:{};return(0,S.jsx)(r.Contact,(0,n.default)({contact:e.contact,active:j.current,theme:s,secondary:i,onClick:A&&x?x:a?void 0:T?()=>{T(e.contact)}:()=>{},waitIdle:!0,showNotifyName:I,listenForAdminChange:k,participantCollection:w},o));default:throw new d.UnknownDataError(e)}},emptyState:(0,S.jsx)(l.SearchContacts,{}),selection:j.current,onSearch:D,searchPlaceholder:u.default.t(1192),onSelect:(e,t)=>{if(t.type!==b)return;const a=t.contact;!0===E(a)&&T&&T(a)},onCancel:a})}E.defaultProps={filter:e=>o.ContactCollection.isFilteredContact(e)};var T=E;t.default=T},77835:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{title:t,countryCode:a,countries:s,onSave:C}=e;const[S,y]=(0,n.useState)(""),[b,E]=(0,n.useState)(a||""),T=(0,n.useCallback)((()=>{o.Cmd.closeModal(),C(b)}),[b,C]),x=(0,n.useCallback)((e=>{E(e.target.value)}),[]);return(0,_.jsx)(p.Modal,{type:p.ModalTheme.Box,children:(0,_.jsxs)(l.default,{theme:"settings",children:[(0,_.jsx)(u.DrawerHeader,{title:t,type:u.DRAWER_HEADER_TYPE.POPUP,onCancel:()=>o.Cmd.closeModal()}),(0,_.jsx)(d.default,{children:(0,_.jsxs)(c.FlexColumn,{align:"stretch",children:[(0,_.jsx)(c.FlexItem,{shrink:0,xstyle:g.search,children:(0,_.jsx)(h.IconSection,{icon:"search",theme:h.IconSectionTheme.NoMarginSmallGutter,content:(0,_.jsx)(m.TextInput,{value:S,editable:!0,inputPlaceholder:f.default.t(1191),onChange:y,focusOnMount:!0,theme:"text-input",lowProfile:!0})})}),(0,_.jsx)(c.FlexItem,{xstyle:g.formWrapper,grow:1,children:(0,_.jsx)("form",{className:(0,i.default)(g.form),children:(0,_.jsx)("ol",{children:s.filter((e=>{let[t,a]=e;return t.toLowerCase().includes(S.toLowerCase())||a.toLowerCase().includes(S.toLowerCase())})).map((e=>{let[t,a,s,n]=e;return(0,_.jsx)(v,{selectedCountryCode:b,countryCode:t,label:a,description:s,xstyle:n,onChange:x},t)}))})})})]})}),(0,_.jsx)(c.FlexRow,{justify:"end",xstyle:g.footer,children:(0,_.jsx)(c.FlexItem,{children:(0,_.jsx)(r.default,{type:"primary",onClick:T,className:(0,i.default)(g.submitButton),children:f.default.t(1189)})})})]})})};var n=a(67294),i=s(a(56720)),r=s(a(39770)),o=a(88102),l=s(a(60453)),d=s(a(69637)),u=a(94790),c=a(29623),h=a(84287),f=s(a(43725)),p=a(57224),m=a(90011),_=a(85893);const g={inputWrapper:{display:"p357zi0d",alignSelf:"o2es7gts",paddingEnd:"iffbo4e8"},formWrapper:{overflowY:"ag5g9lrv"},form:{paddingTop:"qomlamqu",paddingEnd:"f9ovudaz",paddingBottom:"bxcbqipq",paddingStart:"gx1rr48f"},search:{backgroundColor:"amaavye1",paddingTop:"emrlamx0",paddingEnd:"bcymb0na",paddingBottom:"aiput80m",paddingStart:"e8k79tju"},option:{paddingTop:"emrlamx0",paddingEnd:"bcymb0na",paddingBottom:"aiput80m",paddingStart:"e8k79tju"},label:{display:"f804f6gw",fontSize:"fe5nidar"},description:{color:"hp667wtd",fontSize:"enbbiyaj"},footer:{paddingTop:"emrlamx0",paddingEnd:"itegkywt",paddingBottom:"aiput80m",paddingStart:"rppts313",backgroundColor:"lkjmyc96",borderTop:"swyb62mu"},submitButton:{marginTop:"tt8xd2xn",marginEnd:"jnwc1y2a",marginBottom:"mpdn4nr2",marginStart:"svoq16ka"},cursorPointer:{cursor:"ajgl1lbb"}};function v(e){let{selectedCountryCode:t,countryCode:a,label:s,description:n,xstyle:r,"data-testid":o="country-selector-popup-option",onChange:l}=e;return(0,_.jsx)("li",{className:(0,i.default)(g.option,g.cursorPointer,r),children:(0,_.jsxs)(c.FlexRow,{align:"center",children:[(0,_.jsx)(c.FlexItem,{xstyle:g.inputWrapper,children:(0,_.jsx)("input",{id:a,value:a,type:"radio",name:"countryCode",checked:a===t,className:(0,i.default)(g.cursorPointer),onChange:l})}),(0,_.jsxs)(c.FlexItem,{grow:1,children:[(0,_.jsx)("label",{htmlFor:a,className:(0,i.default)(g.label,g.cursorPointer),"data-testid":`${o}-label`,children:s}),void 0!==n?(0,_.jsx)("label",{htmlFor:a,className:(0,i.default)(g.description,g.cursorPointer),children:n}):null]})]})})}},43250:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(48360)),i=a(67294),r=s(a(56720)),o=a(22683),l=a(88102),d=s(a(58184)),u=s(a(60453)),c=s(a(69637)),h=a(94790),f=s(a(33308)),p=a(12591),m=a(96384),_=a(29623),g=a(99234),v=a(87470),C=a(242),S=s(a(11339)),y=a(80132),b=a(65376),E=a(13923),T=a(50452),x=a(85893);const M={banner:{height:"ptxfukc7",width:"ln8gz9je",marginTop:"nylzjxre",marginEnd:"jnwc1y2a",marginBottom:"bvhm1occ",marginStart:"svoq16ka",backgroundSize:"hbhfgwk1",backgroundRepeat:"sxl192xd",backgroundPosition:"t3g6t33p"},header:{marginTop:"eg3lofc5",marginEnd:"jnwc1y2a",marginBottom:"pz0xruzv",marginStart:"svoq16ka",fontSize:"f8jlpxt4",lineHeight:"jgi8eev7",color:"j3oq2rgp"},paragraph:{marginTop:"eg3lofc5",marginEnd:"jnwc1y2a",marginBottom:"pz0xruzv",marginStart:"svoq16ka",fontSize:"f8jlpxt4",lineHeight:"jgi8eev7",color:"pm5hny62"}};function P(e,t){let{onClose:a,entryPoint:s}=e;const[P,A]=(0,i.useState)((()=>{var e,t,a,s;let n;const i=(0,g.getMaybeMeUser)();return i&&(n=(0,C.getDisappearingModeSettingForUser)(i)),{duration:null!==(e=null===(t=n)||void 0===t?void 0:t.duration)&&void 0!==e?e:0,settingTimestamp:null!==(a=null===(s=n)||void 0===s?void 0:s.settingTimestamp)&&void 0!==a?a:0}}));return(0,x.jsxs)(u.default,{ref:t,children:[(0,x.jsx)(h.DrawerHeader,{a8n:"drawer-title-emphemerality",title:n.default._("Default message timer",null,{hk:"8GLek"}),onBack:a,type:h.DRAWER_HEADER_TYPE.LARGE}),(0,x.jsx)(c.default,{children:(0,x.jsxs)(f.default,{theme:"padding-no-vertical",animation:!1,children:[(0,x.jsx)(_.FlexRow,{align:"center",justify:"center",children:(0,x.jsx)("div",{style:{backgroundImage:`url(${d.default})`},className:(0,r.default)(M.banner)})}),(0,x.jsx)(E.TextHeader,{xstyle:M.header,children:n.default._("Start new chats with disappearing messages",null,{hk:"HDpit"})}),(0,v.getAllDurations)().map((e=>{let{value:t,label:a}=e;return(0,x.jsx)(y.RadioWithLabel,{name:"duration",value:t,label:a,checked:t===P.duration,onChange:()=>function(e){const t=P.duration,a=P.settingTimestamp;e!==t&&(A({duration:e,settingTimestamp:o.Clock.globalUnixTime()}),(0,b.setDisappearingMode)(e).then((()=>{new S.default.DisappearingModeSettingChange({disappearingModeEntryPoint:s,lastToggleTimestamp:a,newEphemeralityDuration:e,previousEphemeralityDuration:t}).commit()})).catch((()=>{__LOG__(4,void 0,new Error,!0)`DDM duration change failed. Entry: ${s} Previous: ${t} New: ${e}`,SEND_LOGS("DDM-change-fail"),A({duration:t,settingTimestamp:a}),l.Cmd.openToast((0,x.jsx)(T.Toast,{id:(0,T.genId)(),msg:n.default._("Failed to change disappearing messages duration",null,{hk:"1KZn3u"})}))})))}(t)},t)})),(0,x.jsxs)(E.TextParagraph,{xstyle:M.paragraph,children:[n.default._("When enabled, all new individual chats will start with disappearing messages set to the selected duration. This setting will not affect your existing chats.",null,{hk:"4oZdgb"})," ",(0,x.jsx)(p.ExternalLink,{href:(0,m.getEphemeralFaqUrl)(),children:n.default._("Learn more",null,{hk:"1XDEfh"})})]})]})})]})}var A=(0,i.forwardRef)(P);t.default=A},65640:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onCancel:t,onDeleteOrExit:a}=e,s=(0,m.useModelValues)(e.chat,["isReadOnly","isGroup","isUser","isBroadcast"]),g=()=>s.isGroup?s.isReadOnly?n.default._("Delete this group?",null,{hk:"2PlADN"}):n.default._("Exit this group?",null,{hk:"2sYjV0"}):s.isUser?n.default._("Delete this chat?",null,{hk:"3v4QBf"}):s.isBroadcast?n.default._("Delete broadcast list?",null,{hk:"Xp84E"}):void 0,v=()=>s.isGroup?s.isReadOnly?n.default._("Delete group",null,{hk:"Raajp"}):n.default._("Exit group",null,{hk:"wnp71"}):s.isUser||s.isBroadcast?n.default._("Delete chat",null,{hk:"w3dKM"}):void 0,C=()=>{i.Cmd.closeModal(),t&&(0,p.isFunction)(t)&&t()},S=()=>{let e;s.isGroup?e=s.isReadOnly?(0,o.sendDelete)(s):(0,d.sendExitGroup)(s):s.isUser||s.isBroadcast?e=(0,o.sendDelete)(s):__LOG__(3)`deleteChatPopup:onDelete Unsupported chat type`,(0,p.isFunction)(a)&&e&&a(e),i.Cmd.closeModal()};if(u.GK.supportsFeature(u.GK.F.MD_BACKEND)&&e.isDelete){const e=(0,c.clearOrDeleteChatSyncEnabled)()?h.default.t(1718):h.default.t(1727);return(0,_.jsx)(r.default,{title:g(),onOK:S,okText:v(),onCancel:C,children:(0,_.jsx)(f.TextDiv,{theme:"muted",children:e})})}return(0,_.jsx)(r.default,{onOK:S,okText:v(),onCancel:C,children:(0,_.jsx)(l.EmojiText,{text:g()})})};var n=s(a(48360)),i=a(88102),r=s(a(52665)),o=a(20052),l=a(65417),d=a(5501),u=a(7293),c=a(57701),h=s(a(43725)),f=a(13923),p=a(31515),m=a(49082),_=a(85893)},99131:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(39770)),i=s(a(69618)),r=s(a(68077)),o=a(80226),l=a(12591),d=a(96384),u=s(a(32973)),c=a(99234),h=a(55414),f=s(a(43725)),p=a(57224),m=a(18644),_=a(85893);class g extends u.default{constructor(){super(),this.onDelete=()=>{var e,t;null===(e=(t=this.props).onDelete)||void 0===e||e.call(t),this.end()},this.onRevoke=()=>{this._showRevokeNux?(this.push(this._renderRevokeNux(),"none"),(0,c.setNUX)(i.default.NUX.REVOKE_LEGAL_DISCLAIMER_NUX,{views:1,maxViews:1})):this.end()},this.onPopupCancel=()=>{this.end()},this.onCancel=()=>{this.end()},this._openRevokeLearnMore=()=>{(0,l.openExternalLink)((0,d.getRevokeFaqUrl)())},this._onRevokeNuxClicked=()=>{this.end()},this._renderRevokeNux=()=>{const e=[(0,_.jsx)(n.default,{type:"secondary",onClick:this._openRevokeLearnMore,children:f.default.t(690)},1),(0,_.jsx)(n.default,{type:"primary",onClick:this._onRevokeNuxClicked,children:f.default.t(1765)},0)];return(0,_.jsx)(m.UIE,{displayName:"MsgRevokeNuxModal",escapable:!1,children:(0,_.jsx)(h.HotKeys,{handlers:{enter:this._onRevokeNuxClicked},children:(0,_.jsx)(p.Modal,{actions:e,children:(0,_.jsx)("div",{className:r.default.label,children:f.default.t(1188)})})})})},this._showRevokeNux=(0,c.shouldShowNUX)(i.default.NUX.REVOKE_LEGAL_DISCLAIMER_NUX)}componentDidMount(){const{chat:e,msgList:t,deletePrompt:a,revokePrompt:s,toastPosition:n,onCancel:i,isMsgVisible:r}=this.props;this.push((0,_.jsx)(o.DeleteRevokeMsgPopup,{chat:e,msgList:t,deletePrompt:a,revokePrompt:s,toastPosition:n,onDelete:this.onDelete,onRevoke:this.onRevoke,onPopupCancel:this.onPopupCancel,onCancel:i,isMsgVisible:r}))}}t.default=g},80226:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteRevokeMsgPopup=function(e){const{msgList:t,deletePrompt:a,revokePrompt:s,onPopupCancel:g,chat:v,toastPosition:C,onCancel:S,onRevoke:y,onDelete:b,isMsgVisible:E}=e,[T,x]=(0,o.useState)(!0),M=()=>{g()},P=()=>{const e=t.filter((e=>e.type!==c.default.MSG_TYPE.REVOKED));e.length>0&&u.Cmd.sendRevokeMsgs(v,e,{type:(0,n.default)(s,"revokePrompt"),clearMedia:T,toastPosition:C}),y(),S&&S()},A=()=>{u.Cmd.sendDeleteMsgs(v,t,T,null,C),b(),S&&S(),u.Cmd.existsDrawerRight((e=>{e&&E&&t.forEach((e=>{E(e.id,!0)&&u.Cmd.closeDrawerRight()}))}))},I=()=>{x(!T)};let w;t.some((e=>e.asMms&&e.type!==c.default.MSG_TYPE.STICKER))&&(w=(0,_.jsxs)("div",{className:h.default.container,onClick:I,children:[(0,_.jsx)("div",{"data-a8n":i.default.key("menu-icon-revoke-message"),className:h.default.control,children:(0,_.jsx)(d.CheckBox,{onChange:I,checked:T})}),(0,_.jsx)("div",{className:h.default.label,children:r.default._("Delete file from your phone",null,{hk:"3kXkNc"})})]},0));const k=(0,_.jsx)(l.default,{type:"secondary",onClick:M,children:p.default.t(1574)},0);let j=null,N=null,O=null,R=()=>{};const D=t.length,L=p.default.t(390,{_plural:D});s&&(j=(0,_.jsx)(l.default,{a8nText:"popup-controls-revoke",type:"secondary",onClick:P,children:p.default.t(1186)},1),R=P);a&&(N=(0,_.jsx)(l.default,{a8nText:"popup-controls-delete",type:s?"secondary":"primary",onClick:A,children:r.default._("Delete for me",null,{hk:"2vYbDY"})},2),R=A);const B={enter:R,escape:M};N&&(O=j?(0,_.jsxs)("div",{className:h.default.buttons,children:[(0,_.jsx)("div",{className:h.default.button,children:N}),(0,_.jsx)("div",{className:h.default.button,children:k}),(0,_.jsx)("div",{className:h.default.button,children:j})]}):[k,N]);return(0,_.jsx)(f.HotKeys,{handlers:B,children:(0,_.jsx)(m.Modal,{title:L,actions:O,children:[w]})})},t.RevokePrompt=void 0;var n=s(a(45095)),i=s(a(99964)),r=s(a(48360)),o=a(67294),l=s(a(39770)),d=a(16593),u=a(88102),c=s(a(69618)),h=s(a(68077)),f=a(55414),p=s(a(43725)),m=a(57224),_=a(85893);const g=u.Revoke;t.RevokePrompt=g},60453:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(67294),i=s(a(56720)),r=s(a(5354)),o=s(a(79592)),l=a(85893);const d={belowHeader:{height:"sh5ccnuw",marginTop:"dn3ua38v",position:"lhggkp7q",width:"ln8gz9je"},drawer:{backgroundColor:"g6kkip0l",display:"p357zi0d",flexDirection:"f8m0rgwh",height:"ppled2lx",start:"tkdu00h0",overflowX:"gfz4du6o",overflowY:"r7fjleex",pointerEvents:"jv8uhy2r",position:"lhggkp7q",top:"qq0sjtgm",width:"ln8gz9je"},drawerCapture:{backgroundColor:"ej3x2ktq"},drawerCatalog:{backgroundColor:"svpeipy5"},drawerEdit:{backgroundColor:"ej3x2ktq"},drawerGallery:{backgroundColor:"cumqsjf0"},drawerMedia:{backgroundColor:"ej3x2ktq"},striped:{backgroundColor:"se2m7z6i"},white:{backgroundColor:"ihvf49ua"}};function u(e,t){const{children:a,onDrop:s,onDragChange:u,theme:c}=e,h=(0,n.useRef)(null),f=(0,n.useRef)(null);(0,n.useImperativeHandle)(t,(()=>({getElement:()=>h.current})));const p=(0,i.default)(d.drawer,("invite"===c||"products"===c||"labels"===c||"settings"===c||"archived"===c||"sticker-store"===c)&&d.white,("capture-contain"===c||"capture-cover"===c)&&d.drawerCapture,"edit"===c&&d.drawerEdit,"media"===c&&d.drawerMedia,"gallery"===c&&d.drawerGallery,"catalog"===c&&d.drawerCatalog,"striped"===c&&d.striped,("capture-contain"===c||"media"===c)&&d.belowHeader,e.xstyle);return(0,l.jsxs)(r.default,{ref:h,className:p,style:e.style,onDragOver:e=>{var t;null===(t=f.current)||void 0===t||t.onDragOver(e)},onDragStart:e=>{var t;null===(t=f.current)||void 0===t||t.onDragStart(e)},onDragEnd:e=>{var t;null===(t=f.current)||void 0===t||t.onDragEnd(e)},children:[s&&(0,l.jsx)(o.default,{ref:f,disableFromWithin:!0,onDragChange:u,onDrop:s}),a]})}var c=(0,n.forwardRef)(u);t.default=c},69637:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(81109)),i=s(a(6479)),r=s(a(94184)),o=a(67294),l=s(a(79634)),d=s(a(44942)),u=a(85893);const c=["overflow","flatListControllers","children","theme"];function h(e,t){const{overflow:a,flatListControllers:s,children:o,theme:h}=e,f=(0,i.default)(e,c),p=(0,r.default)(l.default.container,{[l.default.noscroll]:"hidden"===a,[l.default.centerItem]:"center-content"===h,[l.default.padding]:"padding"===h,[l.default.centerColumn]:"center-column"===h});return s&&s.length>0?(0,u.jsx)(d.default,(0,n.default)((0,n.default)({flatListControllers:s,className:p},f),{},{children:o})):(0,u.jsx)("div",(0,n.default)((0,n.default)({className:p,ref:t},f),{},{children:o}))}var f=(0,o.forwardRef)(h);t.default=f},27394:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DrawerContext=void 0;const s=(0,a(67294).createContext)({type:null});t.DrawerContext=s},94790:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.DrawerHeader=t.DRAWER_HEADER_TYPE=void 0;var n=s(a(99964)),i=s(a(52013)),r=s(a(94184)),o=s(a(48360)),l=a(67294),d=s(a(74324)),u=a(46346),c=s(a(23217)),h=a(13923),f=s(a(41956)),p=a(85893);const m={SMALL:"small",LARGE:"large",POPUP:"popup",OFFSET:"offset",MULTI_MEDIA_GALLERY:"multiMediaGallery",LABELS:"labels"};t.DRAWER_HEADER_TYPE=m;t.DrawerHeader=e=>{var t;const{title:a,onBack:s,onCancel:_,type:g,children:v,menu:C,headingLevel:S,focusBackOrCancel:y}=e,b=(0,l.useRef)(null);(0,l.useEffect)((()=>{y&&b.current&&i.default.focus(b.current)}),[y]);const E=s?(0,p.jsx)("button",{className:d.default.btnCloseDrawer,"data-a8n":n.default.key("btn-closer-drawer"),onClick:s,"aria-label":o.default._("Back",null,{hk:"JgQC7"}),ref:b,children:(0,p.jsx)(c.default,{name:"back",directional:!0})}):null,T=_?(0,p.jsx)("button",{className:d.default.btnCloseDrawer,"data-a8n":n.default.key("btn-closer-drawer"),onClick:_,"aria-label":o.default._("Close",null,{hk:"17RE2w"}),ref:b,children:(0,p.jsx)(c.default,{name:"x"})}):null,x=null!=C?(0,p.jsx)("span",{className:d.default.paneListControls,children:(0,p.jsx)(u.MenuBar,{theme:g!==m.SMALL?"inverse":null,children:(0,p.jsx)(f.default,{transitionName:"btn",children:C})},"drawer-header")}):null,M=(0,r.default)({[d.default.multiMediaGallery]:g===m.MULTI_MEDIA_GALLERY,[d.default.labels]:g===m.LABELS,[d.default.drawerHeader]:g===m.LARGE||g===m.MULTI_MEDIA_GALLERY||g===m.LABELS,[d.default.drawerHeaderSmall]:g===m.SMALL,[d.default.drawerHeaderOffset]:g===m.OFFSET||g===m.POPUP,[d.default.drawerHeaderPopup]:g===m.POPUP}),P=a&&null!=v?(0,p.jsx)("div",{className:d.default.side,children:v}):null;return(0,p.jsx)("header",{className:M,children:(0,p.jsxs)("div",{className:d.default.drawerTitle,"data-animate-drawer-title":!0,children:[(0,p.jsxs)("div",{className:d.default.drawerTitleAction,children:[E,T]}),(0,p.jsx)("div",{"data-a8n":n.default.key(null!==(t=e.a8n)&&void 0!==t?t:"drawer-title-body"),className:d.default.drawerTitleBody,children:(0,p.jsx)(h.TextHeader,{level:S,weight:"inherit",customSize:"inherit",children:a||v})}),P,x]})})}},70835:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(56720)),i=s(a(43725)),r=a(52596),o=a(85893);const l={item:{lineHeight:"r5qsrrlp",minHeight:"g4oj0cdv",paddingTop:"gaujl5hk"},itemBody:{borderBottom:"daad4uqs",paddingBottom:"p9a4hubg",textAlign:"ml4r5409"},itemBodyRTL:{textAlign:"cb8ormfa"},lastItemBody:{borderBottom:"thn59n0e"},main:{flex:"a1m9qzja"},primary:{color:"tviruh8d",fontSize:"bze30y65"},row:{alignItems:"gndfcl4n",display:"p357zi0d"},secondary:{color:"jq3rn4u7",fontSize:"f8jlpxt4",fontWeight:"bcr6az0x",lineHeight:"g2xi8p6r"},secondaryPrivacy:{color:"g4ti3y4y"},side:{color:"svlsagor",flex:"kk3akd72"}};var d=e=>{let{title:t,icon:a,onClick:s,children:d,isLastItem:u,theme:c="default"}=e;const h=(0,n.default)(l.itemBody,i.default.isRTL()&&l.itemBodyRTL,null!=a&&l.row,u&&l.lastItemBody),f=(0,n.default)(null!=a&&l.main),p=(0,n.default)(null!=a&&l.side);return(0,o.jsx)("div",{className:(0,n.default)(l.item),onClick:s,role:s?"button":"",children:(0,o.jsxs)("div",{className:h,children:[(0,o.jsxs)("div",{className:f,dir:"auto",children:[(0,o.jsx)(r.SelectableDiv,{className:(0,n.default)(l.primary),selectable:!0,children:t}),(0,o.jsx)("div",{className:(0,n.default)(l.secondary,"privacy"===c&&l.secondaryPrivacy),children:d})]}),(0,o.jsx)("div",{className:p,children:a})]})})};t.default=d},53277:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.Dir=void 0,t.DrawerManager=function(e){const{direction:t,onDrawerIn:a,onDrawerOut:s,onDrawerAnimationComplete:E}=e,T=(0,v.default)(),x=(0,l.useRef)(null),M=(0,l.useRef)(null),P=(0,l.useRef)(!1),[A,I]=(0,l.useState)(void 0),[w,k]=(0,l.useState)(null),[j,N]=(0,l.useState)((()=>b(e.direction))),[O,R]=(0,l.useState)(void 0),[D,L]=(0,l.useState)(void 0),[B,F]=(0,l.useState)(void 0),[G,U]=(0,l.useState)(f.FocusType.CUSTOM),V=e=>{e&&w!==e||A&&(s&&s(),P.current=!0,I(void 0),F(void 0),T((()=>{P.current=!1})))},H=()=>{if(!x.current)return;const e=x.current.getNode();e&&!e.contains(document.activeElement)&&o.default.focus(e)};(0,g.useListener)(u.Cmd,`open_drawer_${t}`,(function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b(t),n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,l=arguments.length>4?arguments[4]:void 0,u=arguments.length>5?arguments[5]:void 0;const c=(0,r.default)(`DrawerManager${t}`);if(!P.current&&A){if(null!=A.key&&(0,i.default)(A.key,e.key))return;M.current=y.NONE,d.default.unstable_batchedUpdates((()=>{I(e),k(c),N(s),R(n),L(o),F(l),U(u)})),T((()=>{M.current=s}))}else a&&a(),d.default.unstable_batchedUpdates((()=>{I(e),k(c),N(s),R(n),L(o),F(l),U(u)}))})),(0,g.useListener)(u.Cmd,`exists_drawer_${t}`,(e=>{e(!0!==P.current&&!!A)})),(0,g.useListener)(u.Cmd,`close_drawer_${t}`,V),(0,g.useListener)(u.Cmd,`update_context_${t}`,(e=>{F(e)}));const K=M.current||j;let q;A&&(q=(0,S.jsx)(m.UIE,{displayName:`Drawer${(0,n.default)(t)}`,escapable:!0,ref:x,requestFocus:(null==D?void 0:D.noFocus)?null:H,requestDismiss:V.bind(null,w),children:(0,S.jsx)(f.RotateFocus,{style:{height:"100%"},focusType:G,children:B?(0,S.jsx)(c.DrawerContext.Provider,{value:B,children:A}):(0,S.jsx)(S.Fragment,{children:A})})},w));return(0,S.jsx)(_.default.Consumer,{children:e=>(0,S.jsx)(_.default.Provider,{value:O||e,children:(0,S.jsx)(C.default,{className:h.default.container,transitionName:K,onAnimationComplete:()=>{return e=w,E&&E(),void(D&&A&&e===w&&(0,p.isFunction)(D.onEnterAnimationComplete)&&D.onEnterAnimationComplete());var e},children:q})})})},t.Transition=void 0;var n=s(a(11700)),i=s(a(18446)),r=s(a(73955)),o=s(a(52013)),l=a(67294),d=s(a(73935)),u=a(88102),c=a(27394),h=s(a(34166)),f=a(87956),p=a(31515),m=a(18644),_=s(a(2773)),g=a(19529),v=s(a(83542)),C=s(a(41956)),S=a(85893);const y={LEFT:"drawer-left",MID:"slide-up",NONE:"none",RIGHT:"slide-left"};t.Transition=y;t.Dir={LEFT:"left",MID:"mid",RIGHT:"right"};const b=e=>y[e.toUpperCase()]},33308:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{children:t,title:a,titleXStyle:s,titleTextXStyle:h,subtitle:f,titleOnClick:p,a8nText:m,"data-list-scroll-offset":_,theme:g,animation:v=!0,className:C,xstyle:S,onRef:y,ellipsify:b=!0,shadow:E=!0}=e;const T=g?o.default[g]:null,x=(0,i.default)(o.default.container,{[o.default.animate]:v,[o.default.shadow]:E},T,C,(0,r.default)(S));let M;null!=a&&(M=(0,u.jsx)("div",{className:(0,i.default)(o.default.title,(0,r.default)(c,s)),"data-a8n":n.default.key(m),role:p?"button":null,onClick:p,children:(0,u.jsx)(l.default,{side:f,ellipsify:b,children:(0,u.jsx)(d.TextSpan,{xstyle:h,theme:"list-section"===g||"title-larger"===g?"section-title-larger":"section-title",children:a})})}));return(0,u.jsxs)("div",{ref:y,className:x,"data-list-scroll-offset":_,children:[M,t]})};var n=s(a(99964)),i=s(a(94184)),r=s(a(56720)),o=s(a(61422)),l=s(a(53145)),d=a(13923),u=a(85893);const c={paddingTop:"gaujl5hk",paddingEnd:"bcymb0na",paddingBottom:"p9a4hubg",paddingStart:"e8k79tju"}},4061:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{e2eSubtype:t,chatId:a,chat:s,msg:A,jid:I}=e;(0,r.useEffect)((()=>{if(g.GK.supportsFeature(g.GK.F.MD_BACKEND)){const e=(0,m.assertGetMe)(),t=I?[(0,M.createWid)(I.toString()),e]:[e];(0,u.getFanOutListJob)(t).then((e=>{(0,C.ensureE2ESessions)(e)}))}}),[]);const w=()=>{if(!I)return;const e=I.equals((0,m.getMeUser)())?a:I;o.Cmd.closeModal(),o.Cmd.verificationDrawer(e)};let k,j,N=null,O=null,R=null,D=null,L=v.default.t(690),B=null;switch(R=()=>o.Cmd.closeModal(),D=v.default.t(1765),t){case"info_encrypted":j=(0,h.getE2EFaqUrl)(),T.default.isGroup(a)?(null==s?void 0:s.isSupportGroup())?(k=v.default.t(1320),L=v.default.t(1321),j=(0,h.getSupportChatSafetyFaqUrl)()):k=E.default.isGroupCallEnabled()?v.default.t(1664):v.default.t(1663):T.default.isBroadcast(a)&&(k=v.default.t(1563));break;case"identity":{const t=I&&d.ContactCollection.get(I);if(null==t?void 0:t.isMe)if(__LOG__(4,void 0,new Error,!0)`formatE2ENotification: receive identity notification of self`,SEND_LOGS("SelfIdentityNotificationError"),T.default.isGroup(a))k=v.default.t(1834);else if(T.default.isBroadcast(a))k=v.default.t(1832);else{const e=d.ContactCollection.get(a),t=e?e.formattedName:(0,x.default)(a);k=v.default.t(1833,{name:t})}else{const a=t?t.formattedName:(0,x.default)(e.jid);k=v.default.t(1831,{name:a})}g.GK.supportsFeature(g.GK.F.MD_BACKEND)?(N=R,O=D,R=w,D=v.default.t(1893),j=(0,h.getMDCodeChangeFaqUrl)()):(N=R,O=v.default.t(1574),j=(0,h.getCodeChangeFaqUrl)());break}case"device":{(0,i.default)(null!=A,"msg shouldn't be null");const e=(0,y.unproxy)(A);if(k=(0,f.default)(e,!0),g.GK.supportsFeature(g.GK.F.MD_BACKEND)){N=R,O=D;const t=e.body?d.ContactCollection.get(e.body):null;(null==t?void 0:t.isMe)&&(a.isGroup()||a.isBroadcast())?(R=void 0,D=void 0):(R=w,D=v.default.t(1893)),j=(0,h.getMDCodeChangeFaqUrl)()}else N=R,O=v.default.t(1574),j=(0,h.getCodeChangeFaqUrl)();break}case"encrypt":case"encrypt_now":default:if(j=(0,b.securityUrl)(),T.default.isGroup(a))(null==A?void 0:A.chat.isSupportGroup())?(k=v.default.t(1320),L=v.default.t(1321),j=(0,h.getSupportChatSafetyFaqUrl)()):k=E.default.isGroupCallEnabled()?v.default.t(1582):v.default.t(1581);else if((0,_.default)(a.user))k=v.default.t(1320),L=v.default.t(1321),j=(0,h.getSupportChatSafetyFaqUrl)();else if(T.default.isBroadcast(a))k=v.default.t(1581);else{const e=E.default.isVoiceCallEnabled()||E.default.isVideoCallEnabled();if(S.ServerProps.bspSystemMessageEnabled)B=n.default._("WhatsApp secures your conversations with end-to-end encryption.",null,{hk:"1y1wzm"}),k=e?n.default._("Your messages and calls stay between you and the people and businesses you choose. Not even WhatsApp can read or listen to them.",null,{hk:"1QdXdG"}):n.default._("Your messages stay between you and the people and businesses you choose. Not even WhatsApp can read or listen to them.",null,{hk:"4a0dhC"});else{const t=d.ContactCollection.get(a);if(null==t?void 0:t.isEnterprise){const e=(0,p.default)(t);k=v.default.t(1710,{businessName:e}),j=(0,h.getE2EEnterpriseFaqUrl)()}else k=e?v.default.t(1582):v.default.t(1581)}}}const F=(0,P.jsx)(c.ExternalLink,{href:j,children:L});return(0,P.jsxs)(l.default,{title:B,onOK:R,okText:D,onCancel:N,cancelText:O,children:[k,"",F]})};var n=s(a(48360)),i=s(a(41143)),r=a(67294),o=a(88102),l=s(a(52665)),d=a(19380),u=a(26409),c=a(12591),h=a(96384),f=s(a(51787)),p=s(a(73628)),m=a(99234),_=s(a(24238)),g=a(7293),v=s(a(43725)),C=a(97398),S=a(64551),y=a(31019),b=a(32217),E=s(a(69594)),T=s(a(39546)),x=s(a(39938)),M=a(58021),P=a(85893)},30305:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(48360)),i=a(67294),r=s(a(56720)),o=s(a(39770)),l=s(a(99360)),d=a(88102),u=s(a(69618)),c=s(a(60453)),h=s(a(69637)),f=a(94790),p=s(a(33308)),m=a(29179),_=s(a(70263)),g=s(a(92744)),v=a(12591),C=a(96384),S=a(29623),y=a(99234),b=a(87470),E=s(a(43725)),T=a(10435),x=a(47645),M=s(a(11339)),P=s(a(57220)),A=s(a(87759)),I=a(80132),w=a(54646),k=a(13923),j=a(50452),N=s(a(84215)),O=s(a(59147)),R=a(85893);const D={animation:{height:"ptxfukc7",width:"hp5m5kpu",marginTop:"nylzjxre",marginEnd:"jnwc1y2a",marginBottom:"bvhm1occ",marginStart:"svoq16ka"},ddmLink:{marginTop:"eg3lofc5",marginEnd:"jnwc1y2a",marginBottom:"pz0xruzv",marginStart:"svoq16ka",fontSize:"f8jlpxt4",lineHeight:"jgi8eev7",color:"pm5hny62"},nux:{marginTop:"nylzjxre",marginEnd:"lfum0007",marginBottom:"bvhm1occ",marginStart:"r6x3u63k",fontSize:"f8jlpxt4",lineHeight:"jgi8eev7"},nuxAction:{paddingTop:"emrlamx0",paddingEnd:"bcymb0na",paddingBottom:"aiput80m",paddingStart:"e8k79tju",marginBottom:"du8bjn1j",textAlign:"qfejxiq4"},header:{marginTop:"eg3lofc5",marginEnd:"jnwc1y2a",marginBottom:"pz0xruzv",marginStart:"svoq16ka",fontSize:"f8jlpxt4",lineHeight:"jgi8eev7",color:"j3oq2rgp"},paragraph:{marginTop:"eg3lofc5",marginEnd:"jnwc1y2a",marginBottom:"pz0xruzv",marginStart:"svoq16ka",fontSize:"f8jlpxt4",lineHeight:"jgi8eev7",color:"pm5hny62"}};function L(e,t){const{chat:a,entryPoint:s,showNux:L,onClose:B,onDDMSettingsClick:F}=e,G=(0,O.default)(),U=e=>e.getEphemeralSetting()||0,[V,H]=(0,i.useState)((()=>U(a))),K=()=>{const e=U(a);if(V===e)return;if(!P.default.online)return void d.Cmd.openToast((0,R.jsx)(j.Toast,{msg:n.default._("You can't change this setting because you're not connected to the Internet. Check your Internet and try again.",null,{hk:"3r2v54"}),id:(0,j.genId)()}));const t={chatEphemeralityDuration:V,previousEphemeralityDuration:e};if(null!=s&&(t.ephemeralSettingEntryPoint=s),a.isGroup){var i,r;(0,w.setGroupProperty)(a,u.default.GROUP_SETTING_TYPE.EPHEMERAL,V).catch((()=>()=>{__LOG__(2)`EphemeralDrawer:unable to set ephemeral setting for ${a.id.toString()}`}));const e=(0,A.default)(null!==(i=null===(r=a.groupMetadata)||void 0===r?void 0:r.participants.length)&&void 0!==i?i:0);t.ephemeralSettingGroupSize=e}else(0,m.changeEphemeralDuration)(a,V);new M.default.EphemeralSettingChange(t).commit()},q=()=>{L||K(),B?B():null==G||G.uie.requestDismiss()},W=e=>{const t=parseInt(e.target.value,10);H(t)};(0,N.default)((()=>{(0,y.shouldShowNUX)(u.default.NUX.EPHEMERAL)&&(0,y.setNUX)(u.default.NUX.EPHEMERAL,{views:1,maxViews:1})}));const Y=(0,T.isDefaultDisappearingMessagesEnabled)();return(0,R.jsxs)(c.default,{theme:"gallery",ref:t,children:[(0,R.jsx)(f.DrawerHeader,{title:E.default.t(571),onBack:q,type:f.DRAWER_HEADER_TYPE.LARGE}),(0,R.jsx)(h.default,{children:e.showNux?(0,R.jsxs)(p.default,{animation:!1,children:[(0,R.jsx)("div",{className:(0,r.default)(D.nux),children:(0,R.jsx)(_.default,{fromMe:!1})}),(0,R.jsx)("div",{className:(0,r.default)(D.nuxAction),children:(0,R.jsx)(o.default,{type:"primary",onClick:q,children:E.default.t(1765)})})]}):(0,R.jsxs)(p.default,{animation:!1,theme:"padding-no-vertical",children:[(0,R.jsxs)("div",{children:[(0,R.jsx)(S.FlexRow,{align:"center",justify:"center",children:(0,R.jsx)(x.LottieAnimation,{loop:!0,autoplay:!0,data:g.default,xstyle:D.animation})}),(0,R.jsx)(k.TextHeader,{xstyle:D.header,children:n.default._("Make messages in this chat disappear",null,{hk:"2yBwQo"})}),(0,R.jsxs)(k.TextParagraph,{xstyle:D.paragraph,children:[a.isGroup?n.default._("For more privacy and storage, all new messages will disappear from this chat for everyone after the selected duration. Group admins control who can change this setting.",null,{hk:"2wzKCv"}):n.default._("For more privacy and storage, all new messages will disappear from this chat for everyone after the selected duration. Anyone in the chat can change this setting.",null,{hk:"3pYSKY"})," ",(0,R.jsx)(v.ExternalLink,{href:(0,C.getEphemeralFaqUrl)(),children:E.default.t(690)})]})]}),(0,b.getAllDurations)().map((e=>{let{value:t,label:a}=e;return(0,R.jsx)(I.RadioWithLabel,{name:"duration",value:t,label:a,checked:t===V,onChange:W},t)})),Y&&(0,R.jsx)(k.TextParagraph,{xstyle:D.ddmLink,children:n.default._("Update your {=default message timer} in Settings",[n.default._param("=default message timer",(0,R.jsx)(l.default,{onClick:F,children:n.default._("default message timer",null,{hk:"nymT1"})}))],{hk:"3TiNlj"})})]})})]})}var B=(0,i.forwardRef)(L);t.default=B},70263:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=e.fromMe?n.default._("Get Started With Disappearing Messages",null,{hk:"293cLq"}):n.default._("Disappearing messages are turned on in this chat",null,{hk:"GfWv5"}),a=n.default._("For more privacy and storage, all new messages will disappear for everyone in this chat after the selected duration.",null,{hk:"1QYhZP"});let s;s=e.fromMe?n.default._("This setting does not affect your existing chats or any messages already saved to your device. Remember, people may find other ways to save messages.",null,{hk:"Lj7oV"}):(0,h.jsxs)(h.Fragment,{children:[n.default._("This setting does not affect your existing chats or any messages already saved to your device. Remember, people may find other ways to save messages.",null,{hk:"Lj7oV"})," ",(0,h.jsx)(r.ExternalLink,{href:(0,o.getEphemeralFaqUrl)(),children:d.default.t(690)})]});return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(l.FlexRow,{align:"center",justify:"center",children:(0,h.jsx)(u.LottieAnimation,{loop:!0,autoplay:!0,data:i.default,xstyle:f.animation})}),(0,h.jsx)(l.FlexRow,{align:"center",justify:"center",children:(0,h.jsx)(l.FlexItem,{xstyle:f.badge,children:n.default._("NEW",null,{hk:"zkHRf"})})}),(0,h.jsx)(c.TextHeader,{xstyle:f.header,children:t}),(0,h.jsx)(c.TextParagraph,{xstyle:f.paragraph,children:a}),(0,h.jsx)(c.TextParagraph,{xstyle:f.paragraph,children:s})]})};var n=s(a(48360)),i=(s(a(56720)),s(a(92744))),r=a(12591),o=a(96384),l=a(29623),d=s(a(43725)),u=a(47645),c=a(13923),h=a(85893);const f={badge:{backgroundColor:"aquyuamc",borderTopStartRadius:"boajuire",borderTopEndRadius:"o93wvyfv",borderBottomEndRadius:"i5w8n1e6",borderBottomStartRadius:"cnpay6qi",color:"qiqvuef5",fontSize:"dsh4tgtl",marginTop:"iy2cu22y",paddingTop:"eujn52yf",paddingEnd:"abxuf49s",paddingBottom:"ckm995li",paddingStart:"mhcwslh8",textTransform:"ofejerhi"},header:{fontSize:"p9fp32ui",lineHeight:"pvbam5uh",marginTop:"iy2cu22y"},animation:{height:"ptxfukc7",width:"hp5m5kpu"},paragraph:{marginTop:"iy2cu22y"}}},52780:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=t=>{var a;t.stopPropagation(),t.preventDefault(),null===(a=e.onLearnMoreClicked)||void 0===a||a.call(e)},a=(0,l.jsx)(n.default,{a8nText:"popup-controls-learn-more",type:"secondary",onClick:t,children:r.default.t(690)}),s=(0,l.jsx)(n.default,{a8nText:"popup-controls-ok",type:"primary",onClick:t=>{var a;t.stopPropagation(),t.preventDefault(),null===(a=e.onOkClicked)||void 0===a||a.call(e)},children:r.default.t(1765)}),d={escape:e.onLearnMoreClicked?t:()=>{}},u=(0,l.jsxs)(l.Fragment,{children:[a,s]});return(0,l.jsx)(i.HotKeys,{handlers:d,children:(0,l.jsx)(o.Modal,{actions:u,children:e.children,title:e.title})})};var n=s(a(39770)),i=a(55414),r=s(a(43725)),o=a(57224),l=a(85893)},19861:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{groupCode:t}=e,[a,s]=(0,o.useState)(P),[w,k]=(0,o.useState)(void 0),[j,N]=(0,o.useState)(void 0),[O,R]=(0,o.useState)(void 0),D=(0,T.default)(),L=e=>{let t;e?t=e:j&&(t=j.id),t&&d.Cmd.openChatFromUnread(l.ChatCollection.assertGet(t)),d.Cmd.closeModal()};let B=!1;(0,o.useEffect)((()=>{(0,E.default)((0,b.queryGroupInviteInfo)(t),D).then((e=>{const{inGroup:t}=e;t?L(e.groupMetadata.id):(k(e.status),N(e.groupMetadata),R(e.subject),s(A))})).catch((0,i.filteredCatch)(x.ServerStatusCodeError,(e=>{k(e.status),s(I)}))).catch((0,n.catchAbort)((()=>{})))}),[]);const F=()=>{(0,E.default)((0,_.joinGroupViaInvite)(t),D).then((e=>{d.Cmd.openChatFromUnread(e).then((t=>{t&&d.Cmd.focusChatTextInput(e)})),d.Cmd.closeModal()})).catch((0,n.catchAbort)((()=>{}))).catch((0,i.filteredCatch)(x.ServerStatusCodeError,(e=>{s(I),k(e.status)})))},G={cancelText:S.default.t(527),onCancel:()=>{d.Cmd.closeModal()},onOK:void 0,okText:void 0};let U,V;if(a===P)U=(0,M.jsx)(m.LoadingWithText,{text:S.default.t(528)});else if(a===A&&j){const e=j.participants,a=j.size||e.length,s=e.filter((e=>!!h.ContactCollection.assertGet(e.id).name));let n;const i=j.desc?(0,M.jsx)("div",{className:g.default.metadataDesc,children:j.desc}):null;n=s.length?(0,M.jsxs)("div",{className:g.default.participantList,children:[(0,M.jsxs)("div",{className:g.default.participantsTitle,children:[S.default.t(539,{count:a,_plural:a})," ",""," ",S.default.t(529,{count:s.length,_plural:s.length})]}),(0,M.jsx)("div",{className:g.default.participantsContainer,children:s.map((e=>(0,M.jsxs)("div",{className:g.default.participantWrapper,children:[(0,M.jsx)(f.DetailImage,{id:e.id}),(0,M.jsx)(p.EmojiText,{className:g.default.participantText,text:e.contact.formattedName})]},e.id.toString())))})]}):(0,M.jsxs)("div",{className:g.default.emptyContentContainer,children:[(0,M.jsx)("span",{className:g.default.participantsText,children:S.default.t(539,{count:a,_plural:a})}),(0,M.jsxs)("span",{className:g.default.contactsText,children:[" ",""," ",S.default.t(529,{count:s.length,_plural:s.length})]})]});const o=`${(0,r.default)(c.default.GROUP_INVITE_URL,"CONST.GROUP_INVITE_URL")}${t}`;U=(0,M.jsxs)("div",{className:g.default.container,children:[(0,M.jsxs)("div",{className:g.default.metadataContainer,children:[(0,M.jsx)(C.ImgWithFallback,{fallbackSVG:"default-group",size:82,imgProps:{src:o}}),(0,M.jsxs)("div",{className:g.default.metadataText,children:[(0,M.jsx)(p.EmojiText,{className:g.default.metadataTitle,text:O}),i]})]}),n]});const d=l.ChatCollection.get(j.id),u=!!d&&!d.isReadOnly;G.onOK=u?L:F,G.okText=u?S.default.t(565):S.default.t(531),V=y.ModalTheme.Flex}else{let e;switch(w){case 401:e=S.default.t(520);break;case 404:e=S.default.t(521);break;case 410:e=S.default.t(523);break;case 436:e=S.default.t(525),B=!0;break;case 419:e=S.default.t(524);break;default:e=S.default.t(526)}G.cancelText=S.default.t(1765),U=(0,M.jsx)("div",{children:e})}return B?(0,M.jsx)(v.GrowthLockedModal,{}):(0,M.jsx)(u.default,{cancelText:G.cancelText,onCancel:G.onCancel,onOK:G.onOK,okText:G.okText,type:V,children:U})};var n=a(89385),i=a(50796),r=s(a(45095)),o=a(67294),l=a(69951),d=a(88102),u=s(a(52665)),c=s(a(69618)),h=a(19380),f=a(88984),p=a(65417),m=a(85600),_=a(73058),g=s(a(49896)),v=a(55800),C=a(50981),S=s(a(43725)),y=a(57224),b=a(96269),E=s(a(84644)),T=s(a(38080)),x=a(77591),M=a(85893);const P=0,A=1,I=2},98073:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const[t,a]=(0,l.useState)(D),[s,n]=(0,l.useState)(void 0),[o,G]=(0,l.useState)(void 0),[U,V]=(0,l.useState)(void 0),[H,K]=(0,l.useState)(void 0),q=(0,k.useModelValues)(e.msg,["id","to","inviteCode","inviteCodeExp","inviteGrp","isGroupsV4InviteExpired","from","chat","isSentByMe"]),{inviteGrp:W,inviteCodeExp:Y,inviteCode:z,isGroupsV4InviteExpired:Q,from:$,isSentByMe:X}=q,J=e=>{switch(e){case 400:return x.default.t(519);case 401:return x.default.t(520);case 404:return x.default.t(521);case 409:return x.default.t(522);case 410:return x.default.t(523);case 419:return x.default.t(524);default:return x.default.t(526)}};(0,l.useEffect)((()=>{if(X){const e=d.ChatCollection.assertGet((0,O.createWid)(W));return void(e.groupMetadata&&b.default.find(e.id).catch((0,i.filteredCatch)([N.WebdDrop,g.ProtoVersionUndefined],(()=>{}))).finally((()=>{n(200),V(e.groupMetadata),K(e.formattedTitle||e.name),a(L)})))}let e=Promise.resolve();e=S.GK.supportsFeature(S.GK.F.MD_BACKEND)?(0,A.queryGroupInviteV4Info)(z,Y.toString(),W,q.from.toString()):j.default.groupV4InviteRequestMetadataFind((0,C.getMaybeMeUser)().toString(),q.from.toString(),z,String(Y),W),e.then((e=>{if(null!=e.status&&e.status>=400)n(e.status),a(B),G(J(e.status));else if(e.id){const t=new y.default({id:e.id,owner:e.owner,creation:e.creation,desc:e.desc,descId:e.descId,descOwner:e.descOwner,descTime:e.descTime,restrict:e.restrict,announce:e.announce,participants:e.participants});n(200),V(t),K(e.subject),a(L)}else n(e.status),a(B),G(J(e.status))})).catch((0,i.filteredCatch)(g.Unmount,(()=>{})))}),[]);const Z=e=>{let t;e?t=e:U&&(t=U.id),t&&u.Cmd.openChatFromUnread(d.ChatCollection.assertGet(t)),u.Cmd.closeModal()},ee=e=>{switch(e){case 400:return x.default.t(545);case 401:return x.default.t(546);case 403:return x.default.t(547);case 404:return x.default.t(548);default:return x.default.t(549)}},te=()=>{const e=d.ChatCollection.assertGet((0,O.createWid)(W)).groupMetadata;u.Cmd.openModal((0,R.jsx)(c.default,{onOK:()=>{u.Cmd.closeModal(),null==e||e.revokeGroupV4AddInvite([q.to.toString()]).then((e=>{u.Cmd.openToast((0,R.jsx)(w.Toast,{msg:null!=e&&e>=400?ee(e):x.default.t(1707),id:(0,w.genId)()}))}))},okText:x.default.t(1828),onCancel:()=>u.Cmd.closeModal(),cancelText:x.default.t(1574),children:(0,R.jsx)(m.EmojiText,{text:x.default.t(594,{participant:q.chat.contact.formattedName})})}))},ae=()=>{let e=Promise.resolve();e=S.GK.supportsFeature(S.GK.F.MD_BACKEND)?(0,A.joinGroupViaInviteV4)(z,Y.toString(),W,$.toString()):j.default.acceptGroupV4Invite(W,$.toString(),z,String(Y),(0,C.getMaybeMeUser)().toString()),e.then((e=>{if(200===e.status)return(0,v.findChat)((0,O.createWid)(W));throw e.status})).then((e=>{u.Cmd.openChatFromUnread(e).then((t=>{t&&u.Cmd.focusChatTextInput(e)})),u.Cmd.closeModal()})).catch((0,i.filteredCatch)(g.Unmount,(()=>{}))).catch((e=>{a(B),n(e),G(J(e))}))},se={cancelText:x.default.t(527),onCancel:()=>{u.Cmd.closeModal()},onOK:void 0,okText:void 0};let ne,ie;if(t===D)ne=(0,R.jsx)(_.Loading,{});else if(t===L&&U){const e=U.participants,t=U.size||e.length,a=e.filter((e=>!!f.ContactCollection.assertGet(e.id).name));let s;const n=U.desc?(0,R.jsx)("div",{className:E.default.metadataDesc,children:(0,R.jsx)(m.EmojiText,{text:U.desc})}):null;s=a.length?(0,R.jsxs)("div",{className:E.default.participantList,children:[(0,R.jsxs)("div",{className:E.default.participantsTitle,children:[x.default.t(539,{count:t,_plural:t})," ",""," ",x.default.t(529,{count:a.length,_plural:a.length})]}),(0,R.jsx)("div",{className:E.default.participantsContainer,children:a.map((e=>(0,R.jsxs)("div",{className:E.default.participantWrapper,children:[(0,R.jsx)(p.DetailImage,{id:e.id}),(0,R.jsx)(m.EmojiText,{className:E.default.participantText,text:e.contact.formattedName})]},e.id.toString())))})]}):(0,R.jsxs)("div",{className:E.default.emptyContentContainer,children:[(0,R.jsx)("span",{className:E.default.participantsText,children:x.default.t(539,{count:t,_plural:t})}),(0,R.jsxs)("span",{className:E.default.contactsText,children:[" ",""," ",x.default.t(529,{count:a.length,_plural:a.length})]})]});const i=`w=${encodeURIComponent((0,C.getMaybeMeUser)().toString())}&g=${encodeURIComponent(W)}&c=${encodeURIComponent(z)}&e=${encodeURIComponent(String(Y))}&a=${encodeURIComponent($.toString())}`,o=`${(0,r.default)(h.default.GROUP_V4_INVITE_ICON_URL,"CONST.GROUP_V4_INVITE_ICON_URL")}?${i}`;ne=(0,R.jsxs)("div",{className:E.default.container,children:[(0,R.jsxs)("div",{className:E.default.metadataContainer,children:[X?(0,R.jsx)(P.default,{size:82,wid:(0,O.createWid)(W)}):(0,R.jsx)(T.ImgWithFallback,{fallbackSVG:"default-group",size:82,imgProps:{src:o}}),(0,R.jsxs)("div",{className:E.default.metadataText,children:[(0,R.jsx)(m.EmojiText,{className:E.default.metadataTitle,text:H}),n]})]}),s]});const l=d.ChatCollection.get(U.id),u=!!l&&!l.isReadOnly;q.isSentByMe?(se.onOK=te,se.okText=x.default.t(1187)):u?(se.onOK=Z,se.okText=x.default.t(565)):Q||(se.onOK=ae,se.okText=x.default.t(531)),ie=M.ModalTheme.Flex}else se.cancelText=x.default.t(1765),ne=(0,R.jsx)("div",{children:o});const re=t===L?(0,R.jsxs)("div",{className:E.default.inviteExpiration,children:[(0,R.jsx)(I.default,{name:"panel-recent",display:"inline",className:E.default.inviteExpirationIcon}),(0,R.jsx)("span",{children:F(parseInt(Y,10))})]}):null;return(0,R.jsxs)(c.default,{cancelText:se.cancelText,onCancel:se.onCancel,onOK:se.onOK,okText:se.okText,type:ie,children:[ne,re]})};var i=a(50796),r=n(a(45095)),o=n(a(30381)),l=a(67294),d=a(69951),u=a(88102),c=n(a(52665)),h=n(a(69618)),f=a(19380),p=a(88984),m=a(65417),_=a(85600),g=s(a(64103)),v=a(50101),C=a(99234),S=a(7293),y=n(a(14423)),b=n(a(63928)),E=n(a(20845)),T=a(50981),x=n(a(43725)),M=a(57224),P=n(a(87543)),A=a(48537),I=n(a(23217)),w=a(50452),k=a(49082),j=n(a(56891)),N=a(77591),O=a(58021),R=a(85893);const D=0,L=1,B=2;function F(e){const t=(0,o.default)(1e3*e).diff((0,o.default)()),a=Math.floor(t/36e5);return t<=0?x.default.t(669):a<12?x.default.t(667,{time:(0,o.default)().local().format("LT")}):a<24?x.default.t(668,{number:1,_plural:1}):a<48?x.default.t(668,{number:2,_plural:2}):x.default.t(668,{number:3,_plural:3})}},18671:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.GuidePopup=S,t.TYPE=t.Messaging=void 0;var n=s(a(94184)),i=s(a(39770)),r=a(88102),o=s(a(52665)),l=s(a(69618)),d=s(a(87390)),u=s(a(43725)),c=s(a(56074)),h=a(57224),f=s(a(23217)),p=a(65127),m=a(85893);t.Messaging={NOTIFICATIONS:"NOTIFICATIONS",CAMERA_FAIL:"CAMERA_FAIL",CAMERA_MISSING:"CAMERA_MISSING",MIC_FAIL:"MIC_FAIL",MIC_MISSING:"MIC_MISSING",CAMERA:"CAMERA",MIC:"MIC"};const _=a(54302)({GUIDE_ALLOW:"guide-allow",GUIDE_UNBLOCK:"guide-unblock",GUIDE_NONE:"guide-none"});t.TYPE=_;const g="chrome_media_error",v="firefox_lock",C="opera_media";function S(e){const{type:t,onCancel:a,onConfirm:s,messaging:r}=e,c=(0,m.jsx)(b,{messaging:r});if(t===_.GUIDE_ALLOW){let e;switch(p.UA.browser){case l.default.BROWSER_TYPE.CHROME:case l.default.BROWSER_TYPE.FIREFOX:e=d.default.topLeft;break;case l.default.BROWSER_TYPE.EDGE:e=d.default.bottomCenter;break;default:e=d.default.topCenter}return(0,m.jsx)(h.Modal,{type:h.ModalTheme.Guide,children:(0,m.jsxs)("div",{className:(0,n.default)(d.default.containerAllow,e),children:[(0,m.jsx)("div",{className:d.default.icon,children:(0,m.jsx)(f.default,{name:"back",directional:!0})}),(0,m.jsx)("div",{className:d.default.title,children:(0,m.jsx)(y,{messaging:r})}),(0,m.jsx)("div",{className:d.default.description,children:c}),(0,m.jsx)("div",{className:d.default.controls,children:(0,m.jsx)(i.default,{onClick:s,type:"primary",children:u.default.t(977)})})]})})}return(0,m.jsx)(o.default,{title:(0,m.jsx)(y,{messaging:r}),onOK:s,okText:u.default.t(977),onCancel:a,cancelText:a?u.default.t(690):void 0,children:(0,m.jsx)("div",{className:d.default.description,children:c})})}function y(e){const{messaging:t}=e;switch(t){case"NOTIFICATIONS":return(0,m.jsx)(c.default,{id:619});case"CAMERA_FAIL":return(0,m.jsx)(c.default,{id:604});case"CAMERA_MISSING":return(0,m.jsx)(c.default,{id:603});case"MIC_MISSING":return(0,m.jsx)(c.default,{id:613});case"CAMERA":return(0,m.jsx)(c.default,{id:604});case"MIC_FAIL":case"MIC":return(0,m.jsx)(c.default,{id:615});default:throw new Error(`Invalid messaging: ${t}`)}}function b(e){const{messaging:t}=e,{browser:a}=p.UA,s={[g]:(0,m.jsx)("span",{className:"chrome-media-icon"}),[v]:(0,m.jsx)("span",{className:"firefox-lock-icon"}),[C]:(0,m.jsx)("span",{className:"opera-media-icon"})};switch(t){case"NOTIFICATIONS":return"edge"===a?(0,m.jsx)(c.default,{id:617,params:s}):"firefox"===a?(0,m.jsx)(c.default,{id:618,params:s}):(0,m.jsx)(c.default,{id:616,params:s});case"CAMERA_FAIL":return"edge"===a?(0,m.jsx)(c.default,{id:598,params:s}):"firefox"===a?(0,m.jsx)(c.default,{id:599,params:s}):"safari"===a?(0,m.jsx)(c.default,{id:601,params:s}):"opera"===a?(0,m.jsx)(c.default,{id:600,params:s}):(0,m.jsx)(c.default,{id:597,params:s});case"CAMERA_MISSING":return(0,m.jsx)(c.default,{id:602,params:s});case"MIC_FAIL":return"edge"===a?(0,m.jsx)(c.default,{id:608,params:s}):"firefox"===a?(0,m.jsx)(c.default,{id:609,params:s}):"safari"===a?(0,m.jsx)(c.default,{id:611,params:s}):"opera"===a?(0,m.jsx)(c.default,{id:610,params:s}):(0,m.jsx)(c.default,{id:607,params:s});case"MIC_MISSING":return(0,m.jsx)(c.default,{id:612,params:s});case"CAMERA":return"edge"===a?(0,m.jsx)(c.default,{id:596,params:s}):(0,m.jsx)(c.default,{id:595,params:s});case"MIC":return"edge"===a?(0,m.jsx)(c.default,{id:606,params:s}):(0,m.jsx)(c.default,{id:605,params:s});default:throw new Error(`Invalid messaging type: ${t}`)}}S.defaultProps={type:_.GUIDE_NONE,onConfirm:()=>r.Cmd.closeModal()}},97759:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(81109)),i=(s(a(45095)),s(a(99964))),r=s(a(48360)),o=a(67294),l=a(86945),d=a(98516),u=s(a(39770)),c=s(a(69618)),h=a(12591),f=a(96384),p=a(7293),m=a(57701),_=s(a(65384)),g=s(a(43725)),v=s(a(56074)),C=(a(52596),a(97628)),S=a(31515),y=a(19866),b=a(49082),E=s(a(75426)),T=a(65127),x=a(85893);const M=a(23217).default;function P(e,t){const{animate:a}=e,s={[`data-asset-intro-image-${(0,o.useContext)(C.ThemeContext).theme}`]:!0},c=(0,o.useRef)(null),T=(0,o.useRef)(null),P=(0,b.useModelValues)(e.mdOptInDeadline,["showCountDownMsg","daysLeftTillDeadline","expirationTime"]);(0,o.useEffect)((()=>{const e=c.current,t=T.current;a?((0,E.default)(e,{scale:[1,0],opacity:[1,0]},{delay:1340,duration:180,easing:[.05,1.02,0,1.01]}),(0,E.default)(t,{translateY:[0,80],opacity:[1,0]},{delay:1300,duration:140,easing:[.05,1.02,0,1.01]})):(e&&(e.style.opacity="1"),t&&(t.style.opacity="1"))}),[]);const I=(0,o.useRef)(null),w=(e,t)=>{var a;const s=null===(a=I.current)||void 0===a?void 0:a.clientWidth;return null!=s&&e!==t&&(0,d.animateConversationPanel)(I.current,s/(e-t))},k=e=>!!I.current&&I.current.contains(e);let j,N,O;(0,o.useImperativeHandle)(t,(()=>({animatePanel:w,containsDOMNode:k})));let R=!0,D=!1,L=_.default.textContainer;if(p.GK.supportsFeature(p.GK.F.MD_BACKEND))if(D=!0,L=_.default.mdTextContainer,j=(0,x.jsx)("div",{ref:c,className:_.default.mdImageWrapper,children:(0,x.jsx)(M,{className:_.default.mdBetaImage,width:360,name:"light"===(0,C.getTheme)()?"intro-md-beta-logo-light":"intro-md-beta-logo-dark"})}),2===(0,l.getABPropConfigValue)("md_migration_experience")){const e=(0,x.jsx)("div",{className:_.default.betaIcon,children:(0,x.jsx)("b",{className:_.default.betaIconText,children:g.default.t(941)})});N=(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:_.default.betaTitle,children:[(0,x.jsx)("h1",{"data-a8n":i.default.key("intro-title"),children:g.default.t(646)}),e]}),(0,x.jsxs)("div",{"data-a8n":i.default.key("intro-text"),className:_.default.betaText,children:[g.default.t(656),(0,x.jsx)("br",{}),g.default.t(657)]})]})}else{const e=(0,x.jsx)("div",{className:_.default.betaIcon,children:(0,x.jsx)("b",{className:_.default.betaIconText,children:r.default._("BETA",null,{hk:"23OBCm"})})});N=(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:_.default.betaTitle,children:[(0,x.jsx)("h1",{"data-a8n":i.default.key("intro-title"),children:g.default.t(646)}),e]}),(0,x.jsxs)("div",{"data-a8n":i.default.key("intro-text"),className:_.default.betaText,children:[g.default.t(644),(0,x.jsx)("br",{}),g.default.t(645)]})]})}else if(p.GK.supportsFeature(p.GK.F.EXTERNAL_MD_OPT_IN_AVAILABLE)){R=!1,j=(0,x.jsx)("div",{ref:c,className:_.default.mdImageWrapper,children:(0,x.jsx)(M,{className:_.default.mdBetaImage,name:"light"===(0,C.getTheme)()?"intro-md-beta-logo-light":"intro-md-beta-logo-dark"})});const e=(0,x.jsx)(h.ExternalLink,{href:(0,f.getMdOptInFaqUrl)(),children:g.default.t(1711)});let t,a=g.default.t(664);if(P.showCountDownMsg){const s=P.daysLeftTillDeadline;if(a=g.default.t(765),(0,S.isNumber)(s)&&s>0)t=(0,m.mdMigrationExperience)()?(0,x.jsx)(v.default,{id:651,params:{num_days:s.toString(),learn_more:e},plural:s}):(0,x.jsx)(v.default,{id:650,params:{num_days:s.toString(),learn_more:e},plural:s});else if(P.expirationTime){const a=P.expirationTime;t=(0,m.mdMigrationExperience)()?(0,x.jsx)(v.default,{id:653,params:{time:a,learn_more:e}}):(0,x.jsx)(v.default,{id:652,params:{time:a,learn_more:e}})}}else t=(0,m.mdMigrationExperience)()?(0,x.jsx)(v.default,{id:649,params:{learn_more:e}}):(0,x.jsx)(v.default,{id:648,params:{learn_more:e}});N=(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("h1",{"data-a8n":i.default.key("intro-title"),className:_.default.title,children:a}),(0,x.jsx)("div",{"data-a8n":i.default.key("intro-text"),className:_.default.text,children:t})]}),O=(0,x.jsx)("div",{className:_.default.upgradeBtn,children:(0,x.jsx)(u.default,{type:"strong-primary",onClick:()=>(0,y.upgradeToMD)(!1),a8nText:"product-info-drawer edit-button",children:g.default.t(666)})})}else j=(0,x.jsx)("div",(0,n.default)({ref:c,className:_.default.image},s)),N=(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("h1",{"data-a8n":i.default.key("intro-title"),className:_.default.title,children:g.default.t(663)}),(0,x.jsx)("div",{"data-a8n":i.default.key("intro-text"),className:_.default.text,children:g.default.t(647)})]});return(0,x.jsx)("div",{className:_.default.intro,ref:I,children:(0,x.jsxs)("div",{className:_.default.body,children:[j,(0,x.jsxs)("div",{ref:T,className:L,children:[N,O,R&&(0,x.jsx)(A,{}),null,null]}),D&&(0,x.jsxs)("div",{className:_.default.encrypted,children:[(0,x.jsx)(M,{name:"lock-small"})," ",g.default.t(414)]})]})})}const A=()=>{{let e;const t=`<a href="https://www.whatsapp.com/download" target="_blank">${g.default.t(658)}</a>`;switch(T.UA.os){case c.default.OS_TYPE.MAC:e=g.default.t(660,{get_it_here:t});break;case c.default.OS_TYPE.WINDOWS:e=g.default.t(662,{get_it_here:t})}if(e)return(0,x.jsxs)(I,{children:[(0,x.jsx)("span",{className:_.default.secondaryIcon,children:(0,x.jsx)(M,{name:"laptop"})}),(0,x.jsx)("div",{dangerouslySetInnerHTML:{__html:e},className:_.default.secondaryTextBody})]})}return null},I=e=>{let{children:t}=e;return(0,x.jsxs)("div",{className:_.default.secondary,children:[(0,x.jsx)("div",{className:_.default.divider}),(0,x.jsx)("div",{className:_.default.secondaryText,children:t})]})};var w=(0,o.forwardRef)(P);t.default=w},57302:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const e=function(){const e=h.ServerProps.pttPlaybackSpeedEnabled?m:[];return[[u.default.t(894),i.default.TOGGLE_UNREAD],[u.default.t(926),i.default.TOGGLE_MUTE],[u.default.t(885),i.default.TOGGLE_ARCHIVE],[u.default.t(889),i.default.DELETE_OR_EXIT_CHAT],[u.default.t(929),i.default.TOGGLE_PIN],[u.default.t(911),i.default.SEARCH],[u.default.t(914),i.default.SEARCH_IN_CHAT],[u.default.t(927),i.default.OPEN_NEW_CHAT],[u.default.t(912),i.default.GO_TO_NEXT_CHAT],[u.default.t(913),i.default.GO_TO_PREV_CHAT],[u.default.t(928),i.default.OPEN_NEW_GROUP],[u.default.t(930),i.default.OPEN_PROFILE],...e,[u.default.t(817),i.default.OPEN_SETTINGS],[u.default.t(671),i.default.OPEN_EMOJI_PANEL],[u.default.t(672),i.default.OPEN_GIF_PANEL],[u.default.t(673),i.default.OPEN_STICKER_PANEL]]}().map(((e,t)=>{let[a,s,n=!0]=e;const i=(0,p.jsx)(l.KeyboardShortcut,{action:s,addModifiers:n});if(i)return(0,p.jsxs)("div",{className:d.default.section,children:[(0,p.jsx)("div",{className:d.default.action,title:a,children:a}),(0,p.jsx)("div",{className:d.default.shortcut,children:i})]},t)}));return(0,p.jsx)(o.default,{onOK:()=>{r.Cmd.closeModal()},okText:u.default.t(1765),type:c.ModalTheme.Flex,children:(0,p.jsxs)("div",{className:d.default.container,children:[(0,p.jsx)(f.TextSpan,{theme:"popup-title",children:u.default.t(674)}),(0,p.jsx)("div",{className:d.default.list,children:e})]})})};var n=s(a(48360)),i=s(a(82816)),r=a(88102),o=s(a(52665)),l=a(28141),d=s(a(90975)),u=s(a(43725)),c=a(57224),h=a(64551),f=a(13923),p=a(85893);const m=[[u.default.t(643),i.default.INCREASE_PTT_SPEED,!1],[n.default._("Decrease Speed of Selected Voice Message",null,{hk:"uHTZ8"}),i.default.DECREASE_PTT_SPEED,!1]]},67568:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{title:t,onCancel:a,onSearch:s,onRef:v,searchPlaceholder:C,renderItem:S,data:y,emptyState:b,selection:E,onSelect:T}=e,x=(0,_.default)((()=>new c.default)),M=(0,r.useRef)(null),P=(0,r.useRef)(null);(0,r.useEffect)((()=>{i.default.focus(P.current)}),[]);const A=e=>{e.preventDefault(),e.stopPropagation();const t=y[0];t&&T(e,t)},I=e=>{s(e)},w=e=>{const t=e.relatedTarget;return t instanceof HTMLElement&&e.currentTarget instanceof HTMLElement&&!e.currentTarget.contains(t)},k={down:e=>{M.current&&(e.preventDefault(),e.stopPropagation(),n.default.shouldIndicateFocus(),E.setFirst(!0))}};let j;s&&(j=(0,g.jsx)(h.HotKeys,{handlers:k,children:(0,g.jsx)(p.default,{ref:P,onSearch:I,onEnter:A,placeholder:C||f.default.t(1191)})}));const N=y.length?(0,g.jsx)(h.HotKeys,{handlers:{down:e=>{e.preventDefault(),e.stopPropagation(),E&&E.setNext(!0)},up:e=>{if(!E)return;e.preventDefault(),e.stopPropagation();E.prev()>-1?E.setPrev(!0):(E.unset(),n.default.shouldIndicateFocus(),i.default.focus(P.current))}},onFocus:e=>{w(e)&&E.setFirst(!0)},onBlur:e=>{w(e)&&E.unset()},tabIndex:0,children:(0,g.jsx)(u.FlatList,{data:y,ref:M,flatListController:x.current,direction:"vertical",renderItem:S})}):b;return(0,g.jsx)(m.Modal,{type:m.ModalTheme.Tower,onRef:v,children:(0,g.jsxs)(o.default,{children:[(0,g.jsx)(d.DrawerHeader,{title:t,type:d.DRAWER_HEADER_TYPE.POPUP,onCancel:a}),j,(0,g.jsx)(l.default,{flatListControllers:[x.current],children:N})]},"contact-modal")})};var n=s(a(45120)),i=s(a(52013)),r=a(67294),o=s(a(60453)),l=s(a(69637)),d=a(94790),u=a(47915),c=s(a(30855)),h=a(55414),f=s(a(43725)),p=s(a(48837)),m=a(57224),_=s(a(59552)),g=a(85893)},79834:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,l.useModelValues)(e.chat,["name","isGroup","liveLocation"]),{name:a,isGroup:s}=t,u=s?o.default.t(84,{name:a}):o.default.t(85,{name:a});return(0,d.jsx)(i.default,{onOK:()=>{const{liveLocation:e}=t;e&&e.stopMyLiveLocation(),n.Cmd.closeModal()},okText:o.default.t(722),onCancel:()=>{n.Cmd.closeModal()},children:(0,d.jsx)(r.EmojiText,{text:u})})};var n=a(88102),i=s(a(52665)),r=a(65417),o=s(a(43725)),l=a(49082),d=a(85893)},93045:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.logSessionEvent=function(e,t,a){const s=new n.default.ContactUsSession({contactUsExitState:e,contactUsT:Math.ceil(performance.now()-t)});a&&(s.contactUsAutomaticEmail=!0,s.contactUsProblemDescription=a.subject,s.contactUsScreenshotC=a.numScreenshots);s.commit()};var n=s(a(11339))},56227:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{to:t,participant:a,msg:s}=e;let f;if(t.isUser()){const e=r.ContactCollection.get(t),a=e?e.formattedName:(0,u.default)(t);f=o.default.t(1722,{name:a})}else if("string"==typeof a&&d.default.isUser(a)){const e=r.ContactCollection.get((0,c.createWid)(a)),t=e?e.formattedName:(0,u.default)(a);f=o.default.t(1720,{name:d.default.user(t)})}else f=o.default.t(1719);return(0,h.jsx)(i.default,{onOK:()=>{s.resend().then((e=>{e===l.SendMsgResult.ERROR_UNKNOWN&&__LOG__(2,void 0,void 0,void 0,["messaging"])`MdDowngradeModal:resend: failure with SendMsgResult.ERROR_UNKNOWN`})).catch((function(e){__LOG__(2,void 0,void 0,void 0,["messaging"])`MdDowngradeModal:resend: resend failure ${e}`})),n.Cmd.closeModal()},okText:o.default.t(1882),cancelText:o.default.t(1574),onCancel:()=>{n.Cmd.closeModal()},title:o.default.t(1752),children:f})};var n=a(88102),i=s(a(52665)),r=a(19380),o=s(a(43725)),l=a(13705),d=s(a(39546)),u=s(a(39938)),c=a(58021),h=a(85893)},72434:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{msg:t}=e;return(0,l.jsx)(i.default,{onOK:()=>{t.resend().then((e=>{e===o.SendMsgResult.ERROR_UNKNOWN&&__LOG__(2,void 0,void 0,void 0,["messaging"])`MdSendRetryModal:resend: failure with SendMsgResult.ERROR_UNKNOWN`})).catch((function(e){__LOG__(2,void 0,void 0,void 0,["messaging"])`MdSendRetryModal:resend: resend failure ${e}`})),n.Cmd.closeModal()},okText:r.default.t(1882),cancelText:r.default.t(1574),onCancel:()=>n.Cmd.closeModal(),children:r.default.t(1752)})};var n=a(88102),i=s(a(52665)),r=s(a(43725)),o=a(13705),l=a(85893)},20668:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,l.useModelValues)(e.msg,["type","isVcardOverMmsDocument"]),a=(e=>{try{return(0,o.getMsgMediaType)(e)}catch(e){return null}})(e.msg);let s,u;switch(a){case o.MEDIA_TYPES.VIDEO:s=r.default.t(864),u=r.default.t(863);break;case o.MEDIA_TYPES.GIF:s=r.default.t(857),u=r.default.t(856);break;case o.MEDIA_TYPES.AUDIO:s=r.default.t(851),u=r.default.t(850);break;case o.MEDIA_TYPES.IMAGE:s=r.default.t(860),u=r.default.t(859);break;case o.MEDIA_TYPES.DOCUMENT:if(t.isVcardOverMmsDocument){s=r.default.t(853),u=r.default.t(852);break}s=r.default.t(855),u=r.default.t(854);break;case o.MEDIA_TYPES.STICKER:s=r.default.t(862),u=r.default.t(861);break;default:s=r.default.t(858),__LOG__(4,void 0,new Error,!0)`type: ${a}`,SEND_LOGS("MediaMissingModal: unexpected message type")}return(0,d.jsx)(i.default,{title:s,onOK:()=>{n.Cmd.closeModal()},okText:r.default.t(1765),children:u})};var n=a(88102),i=s(a(52665)),r=s(a(43725)),o=a(61596),l=a(49082),d=a(85893)},97157:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,l.useModelValues)(e.msg,["type","isGif"]);let a;switch(t.type){case r.default.MSG_TYPE.VIDEO:t.isGif||(a=o.default.t(937))}return(0,d.jsx)(i.default,{onOK:()=>{n.Cmd.closeModal()},okText:o.default.t(1765),children:a})};var n=a(88102),i=s(a(52665)),r=s(a(69618)),o=s(a(43725)),l=a(49082),d=a(85893)},98707:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return(0,l.jsx)(r.default,{title:n.default._("Can't Send Changed File",null,{hk:"ntbaL"}),onOK:()=>{i.Cmd.closeModal()},okText:o.default.t(1765),children:n.default._("This document has changed since you tried to send it. Please try again.",null,{hk:"3fUbmQ"})})};var n=s(a(48360)),i=a(88102),r=s(a(52665)),o=s(a(43725)),l=a(85893)},19451:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{msg:t}=e;return(0,d.jsx)(r.default,{onCancel:()=>i.Cmd.closeModal(),onOK:()=>{i.Cmd.closeModal(),o.FileSaver.initDownload(t)},okText:l.default.t(1568),cancelText:l.default.t(1574),title:n.default._("Download Unsupported File?",null,{hk:"Xh7Km"}),children:n.default._("This file can't be opened in WhatsApp Web. Download it to open it with another app on your computer?",null,{hk:"1DOus2"})})};var n=s(a(48360)),i=a(88102),r=s(a(52665)),o=a(77811),l=s(a(43725)),d=a(85893)},15407:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{altText:t,mediaData:a}=e;const{preview:s}=(0,r.useModelValues)(a,["preview"]),d=s instanceof i.default?s.url():null;return(0,o.jsx)("div",{className:n.default.mediaViewerBlurCrop,onClick:l,children:(0,o.jsx)("img",{className:n.default.mediaViewerBlurImg,src:d,alt:t})})};var n=s(a(66921)),i=s(a(34949)),r=a(49082),o=a(85893);function l(e){e.stopPropagation()}},76530:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(67294),i=s(a(56720)),r=s(a(62190)),o=s(a(15407)),l=s(a(47065)),d=a(58668),u=s(a(20553)),c=s(a(39040)),h=s(a(37015)),f=s(a(11339)),p=s(a(11791)),m=s(a(41104)),_=a(49082),g=a(85893);const v={isDownloadPrevented:{pointerEvents:"m62443ks"}},C=(e,t)=>{const{msg:a,preventDownload:s}=e,C=(0,_.useModelValues)(e.mediaData,["mediaStage","fullWidth","fullHeight","renderableUrl","progressiveStage"]),S=(0,n.useRef)(),y=(0,m.default)(t,S);(0,n.useEffect)((()=>{if(a)return a.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:f.default.WEBC_RMR_REASON_CODE.MEDIA_VIEWER,isUserInitiated:!0}),()=>{a.mediaObject&&a.cancelDownload()}}),[a]);const b=e=>{var t;null===(t=S.current)||void 0===t||t.onClick(e)},E=()=>(0,g.jsx)(p.default,{type:"scaleDown",size:{width:C.fullWidth,height:C.fullHeight},position:"relative",objectPosition:"relative",children:(0,g.jsx)(o.default,{altText:"",mediaData:C})}),T=e=>(0,g.jsx)(l.default,{className:(0,i.default)(c.default.content,s&&v.isDownloadPrevented),draggable:!s,onClick:b,disableContextMenu:s,src:e});switch(C.mediaStage){case d.MEDIA_DATA_STAGE.DECRYPTING:if(null==C.progressiveStage)return E();break;case d.MEDIA_DATA_STAGE.RESOLVED:case d.MEDIA_DATA_STAGE.PROGRESSIVE_READY:break;default:return E()}const x=s?e=>(0,g.jsx)("figure",{className:(0,i.default)(c.default.content),draggable:"false",onClick:b,onContextMenu:e=>e.preventDefault(),children:T(e)}):T,M=null!=a?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(u.default,{mediaData:C,placeholderRenderer:E,downloadMedia:()=>{if(null!=a.mediaObject)return a.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:f.default.WEBC_RMR_REASON_CODE.MEDIA_VIEWER,isUserInitiated:!0})},renderProgressively:!0,children:x}),a.interactiveAnnotations&&a.interactiveAnnotations.length>0&&(0,g.jsx)(r.default,{annotations:a.interactiveAnnotations,onTooltipDisplay:e.onAnnotationTooltipDisplay,onTooltipDismiss:e.onAnnotationTooltipDismiss})]}):x(C.renderableUrl);return(0,g.jsx)(h.default,{ref:y,width:C.fullWidth,height:C.fullHeight,onZoomIn:e.onImgZoomIn,onLoad:e.onLoad,msg:a,children:M})};var S=(0,n.forwardRef)(C);t.default=S},81136:(e,t,a)=>{"use strict";var s=a(95318),n=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{msg:t,mediaData:a}=e,{mediaStage:s,size:n,streamable:f}=(0,c.useModelValues)(a,["mediaStage","size","streamable"]);if(f&&a.isStreamable())return null;switch(s){case o.MEDIA_DATA_STAGE.INIT:case o.MEDIA_DATA_STAGE.EXISTS:case o.MEDIA_DATA_STAGE.RESOLVED:case o.MEDIA_DATA_STAGE.ERROR_MISSING:case o.MEDIA_DATA_STAGE.NEED_UPLOAD:case o.MEDIA_DATA_STAGE.ERROR_TOO_LARGE:case o.MEDIA_DATA_STAGE.PROGRESSIVE_READY:case o.MEDIA_DATA_STAGE.REMOTE_NEED_UPLOAD:case o.MEDIA_DATA_STAGE.ERROR_FILE_NOT_READABLE:return null;case o.MEDIA_DATA_STAGE.NEED_POKE:return(0,h.jsx)(r.Download,{filesize:n,onClick:e=>function(e,t){e.stopPropagation(),t.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:d.default.WEBC_RMR_REASON_CODE.MEDIA_VIEWER,isUserInitiated:!0})}(e,t)});case o.MEDIA_DATA_STAGE.FETCHING:case o.MEDIA_DATA_STAGE.PREPARING:case o.MEDIA_DATA_STAGE.UPLOADING:case o.MEDIA_DATA_STAGE.REUPLOADING:case o.MEDIA_DATA_STAGE.REMOTE_UPLOADING:case o.MEDIA_DATA_STAGE.DECRYPTING:case o.MEDIA_DATA_STAGE.SENDING:return(0,h.jsx)("div",{onClick:e=>function(e,t){e.stopPropagation(),t.cancelDownload()}(e,t),children:(0,h.jsx)(r.Pending,{cancelable:!0})});case o.MEDIA_DATA_STAGE.ERROR_UNSUPPORTED:return(0,h.jsx)(r.Download,{filesize:n,onClick:e=>function(e,t){e.stopPropagation(),i.Cmd.openModal((0,h.jsx)(l.default,{msg:(0,u.unproxy)(t)}))}(e,t)})}};var i=a(88102),r=n(a(41124)),o=a(58668),l=s(a(19451)),d=s(a(11339)),u=a(31019),c=a(49082),h=a(85893)},39040:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;s(a(56720));t.default={content:{alignItems:"gndfcl4n",display:"p357zi0d",height:"ppled2lx",justifyContent:"ac2vgrno",overflowX:"gfz4du6o",overflowY:"r7fjleex",position:"g0rxnol2",width:"ln8gz9je",zIndex:"b9fczbqn"}}},37015:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(67294),i=s(a(56720)),r=s(a(69618)),o=s(a(39040)),l=s(a(11791)),d=s(a(52500)),u=a(94270),c=a(57793),h=a(18644),f=a(85893);const p={cursorZoomIn:{cursor:"bn05jr7j"}},m=(e,t)=>{const{children:a,onZoomIn:s,width:m,height:_,msg:g,onLoad:v}=e,[C,S]=(0,n.useState)(null),[y,b]=(0,n.useState)(!0),E=(0,n.useRef)(0),T=(0,n.useRef)(0),x=(0,n.useRef)(),M=()=>{var e;return null===(e=x.current)||void 0===e?void 0:e.outsideContainer},P=()=>{var e;return null===(e=x.current)||void 0===e?void 0:e.insideContainer},A=()=>{b(!1)},I=(e,t,a)=>{const s=T.current,n=E.current,i=window.innerWidth/2-t,r=window.innerHeight/2-a;return{translateX:s>0?Math.round(1.2*i*s/e.clientWidth):0,translateY:n>0?Math.round(1.2*r*n/e.clientHeight):0}},w=()=>{s(!1),S(null)},k=(e,t)=>{if(C)return void w();const a=P(),n=M();if(!(a instanceof HTMLElement&&n instanceof HTMLElement))return;E.current=a.clientHeight*r.default.MEDIA_VIEWER.ZOOM_IN_FACTOR-n.clientHeight,T.current=a.clientWidth*r.default.MEDIA_VIEWER.ZOOM_IN_FACTOR-n.clientWidth;const{translateX:i,translateY:o}=I(n,e,t);s(!0),S({factor:r.default.MEDIA_VIEWER.ZOOM_IN_FACTOR,translateX:i,translateY:o}),b(!1)},j=e=>{e.stopPropagation(),k(e.pageX,e.pageY)},N=e=>{e.stopPropagation(),k(window.innerWidth/2,window.innerHeight/2)};(0,n.useImperativeHandle)(t,(()=>({get heightOverflow(){return E.current},get widthOverflow(){return T.current},onClick:j,onKeyboardZoom:N,getTranslatePosition:I,getOutsideContainer:M,getInsideContainer:P,closingMediaZoomable:A})));let O=(0,f.jsx)("div",{className:(0,i.default)(o.default.content,!C&&p.cursorZoomIn),"data-testid":"media-zoomable",children:a});C&&(O=(0,f.jsx)(h.UIE,{displayName:"ZoomInImage",escapable:!0,requestDismiss:w,children:O}));const R=u.ReactionBubbleType.MEDIA_ITEM;return(0,f.jsxs)(l.default,{type:"zoomIn",size:{width:m,height:_},position:"relative",objectPosition:"relative",zoomIn:C,onObjectLoad:v,ref:x,children:[O,g&&(0,c.shouldShowReactionBubble)(g,R)&&(0,f.jsx)(d.default,{msgIds:[g.id.toString()],reactionBubbleVisible:y,reactionBubbleType:R})]})};var _=(0,n.forwardRef)(m);t.default=_},77864:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(48360)),i=a(67294),r=a(63183),o=a(65511),l=a(69951),d=s(a(90233)),u=a(88102),c=a(19380),h=a(47473),f=a(85600),p=a(12591),m=a(96384),_=a(47915),g=s(a(43725)),v=s(a(62425)),C=s(a(48690)),S=s(a(11497)),y=a(64551),b=a(50452),E=a(37894),T=s(a(14421)),x=s(a(41502)),M=s(a(83800)),P=a(85893);const A="SEC_FREQUENT_CONTACTS",I="SEC_CHATS",w="SEC_CONTACTS",k="ROW_FREQUENT_CONTACTS",j="ROW_CHATS",N="ROW_CONTACTS";function O(e,t){const{active:a,getInitialItems:s,selections:O,maxChats:R,onSelectionChanged:D,hasFrequentlyForwarded:L,ephemeralIcon:B,searchText:F,msgType:G,excludeChat:U,excludeBroadcast:V,flatListController:H}=e,K=(0,x.default)(F),q=e=>e.filter((e=>!(0,E.shouldBlockByTos)(e)&&!(0,h.shouldBlockByCountry)(e))),W=(0,M.default)((e=>{const t={};return{frequentContacts:q((e=>e?[]:c.ContactCollection.frequentContacts(G,U))(e)).map((e=>{if(V&&e.isBroadcast)return null;const a=e.isGroup||e.isBroadcast?l.ChatCollection.get(e.id):e;return a&&(t[a.id]=!0),a})).filter(Boolean),chats:(e=>{let t=e;if(t){t=g.default.accentFold(t);const e=(0,C.default)(t);return l.ChatCollection.filter((function(a){return a.canSend&&a.shouldAppearInList&&a.contact.searchMatch(t,e)}))}return l.ChatCollection.filter((function(e){return e.canSend&&e.shouldAppearInList}))})(e).map((e=>{if(V&&e.isBroadcast)return null;if(e.isSuspendedGroup())return null;const a=e.isGroup||e.isBroadcast?e:e.contact;return t[a.id]?null:(t[a.id]=!0,a)})).filter(Boolean),contacts:q((e=>{let t=e;const a=c.ContactCollection.getFilteredContacts();if(!t)return a;t=g.default.accentFold(t);const s=(0,C.default)(t);return a.filter((function(e){return e.searchMatch(t,s)}))})(e)).map((e=>t[e.id]?null:e)).filter(Boolean)}})),[Y,z]=(0,i.useState)((()=>W(F))),Q=(0,i.useRef)(null),$=(0,i.useRef)(null),X=e=>{const{frequentContacts:t,chats:a,contacts:s}=e;return t.concat(a,s)};(0,i.useEffect)((()=>{a.init(X(Y)),s&&s().forEach((e=>O.setVal(e,!0)))}),[]);const J=(e,t,s)=>{if(t&&"number"==typeof R&&O.getSelected().length>=R){let e,t;return L?(e=y.ServerProps.hfmStringChanges?n.default._({"*":"Messages forwarded many times can only be shared with up to {count} chats at a time.",_1:"Messages forwarded many times can only be shared with up to 1 chat at a time."},[n.default._plural(R,"count")],{hk:"3nuqz2"}):g.default.t(481,{count:R,_plural:R}),t={actionText:g.default.t(690),onAction:()=>(0,p.openExternalLink)((0,m.getFrequentlyForwardedFaqUrl)())}):e=g.default.t(480,{count:R,_plural:R}),void u.Cmd.openToast((0,P.jsx)(b.Toast,{id:(0,b.genId)(),msg:e,action:t}))}O.setVal(e,t,s),a.setVal(e,s),D&&D(e,t)},Z=t=>{var s;switch(t.type){case A:return(0,P.jsx)(S.default,{header:g.default.t(1623)});case I:return(0,P.jsx)(S.default,{header:g.default.t(1821)});case w:return(0,P.jsx)(S.default,{header:g.default.t(1766)});case k:case j:case N:const{data:i}=t,l=!!e.hasFrequentlyForwarded,u=!!(null===(s=i.groupMetadata)||void 0===s?void 0:s.noFrequentlyForwarded);let c,h=!1;l&&u&&(h=!0,c=n.default._("Can't send messages that have been forwarded many times",null,{hk:"1lDDZg"}));const f=()=>(e=>{const t=O.isSelected(e);J(e,!t,!1)})(i);return(0,P.jsx)(d.default,{model:i,selections:O,tabIndex:-1,disabled:h,children:i instanceof r.Chat?(0,P.jsx)(o.Chat,{theme:h?"chat-checkbox-no-delete":"chat-checkbox",active:a,chat:i,mode:o.Mode.INFO,noContext:!0,onClick:h?()=>{}:f,secondary:c,ephemeralIcon:B}):(0,P.jsx)(T.default,{contact:i,onSelect:f,customSecondaryText:c,active:a,ephemeralIcon:B})},i.id.toString());default:throw new _.UnknownDataError(t)}};(0,i.useEffect)((()=>{if(F!==K){const e=W(F);z(e),a.init(X(e))}}),[a,W,K,F]);const ee=()=>{const e=[],{frequentContacts:t,chats:a,contacts:s}=Y;return t.length&&(e.push({itemKey:A,type:A}),e.push(...t.map((e=>({itemKey:e.id.toString(),type:k,data:e}))))),a.length&&(e.push({itemKey:I,type:I}),e.push(...a.map((e=>({itemKey:e.id.toString(),type:j,data:e}))))),s.length&&(e.push({itemKey:w,type:w}),e.push(...s.map((e=>({itemKey:e.id.toString(),type:N,data:e}))))),e},te=e=>{const{frequentContacts:t,chats:a,contacts:s}=Y;let n;if(t.length)n=t[0];else if(a.length)n=a[0];else{if(!s.length)return;n=s[0]}const i=!O.isSelected(n);J(n,i,e)};return(0,i.useImperativeHandle)(t,(()=>({toggleFirst:te}))),(0,P.jsx)(v.default,{active:e.active,onLeave:e.onLeaveList,onRef:e=>{Q.current=e},onIndexChange:e=>{var t;null===(t=$.current)||void 0===t||t.scrollIntoViewIfNeeded(e)},children:(()=>{const{frequentContacts:e,chats:t,contacts:a}=Y;return!e.length&&!t.length&&!a.length})()?F?(0,P.jsx)(f.Search,{}):(0,P.jsx)(f.ListChats,{}):(0,P.jsx)(_.FlatList,{ref:$,flatListController:H,direction:"vertical",forceConsistentRenderCount:!1,data:ee(),renderItem:Z})})}var R=(0,i.forwardRef)(O);t.default=R},97473:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(52013)),i=a(67294),r=s(a(90233)),o=a(88102),l=a(19380),d=a(85600),u=a(47915),c=s(a(43725)),h=s(a(62425)),f=s(a(48690)),p=s(a(11497)),m=a(50452),_=s(a(14421)),g=a(85893);const v="SEC_CONTACTS",C="ROW_CONTACTS";class S extends i.Component{constructor(e){super(e),this.setList=e=>{this.list=e},this._handleRef=e=>{this._refHotKey=e},this._handleSelect=(e,t,a)=>{const{selections:s,maxContacts:n,active:i,onSelectionChanged:r}=this.props;t&&"number"==typeof n&&s.getSelected().length>=n?o.Cmd.openToast((0,g.jsx)(m.Toast,{id:(0,m.genId)(),msg:this.props.maxContactsExceedErrorMsg?this.props.maxContactsExceedErrorMsg:c.default.t(872,{count:n,_plural:n})})):(s.setVal(e,t,a),i.setVal(e,a),r&&r(e,t))},this._handleIndexChange=e=>{var t;null===(t=this.list)||void 0===t||t.scrollIntoViewIfNeeded(e)},this._renderItem=e=>{switch(e.type){case v:return(0,g.jsx)(p.default,{header:c.default.t(1592)});case C:const{data:t}=e,{isDisabled:a,customSecondaryText:s}=this.props;return(0,g.jsx)(r.default,{model:t,selections:this.props.selections,checked:!!this.props.isSelected&&this.props.isSelected(t.id),a8nKey:`multi-select-contact-list-item-${t.id.toString()}`,children:(0,g.jsx)(_.default,{contact:t,disabled:a&&a(t.id),onSelect:()=>this._handleContactClick(t),customSecondaryText:s&&s(t.id),active:this.props.active,allowBlockedContacts:this.props.allowBlockedContacts})},t.id.toString());default:throw new u.UnknownDataError(e)}},this.state={filteredData:S.calculateFilteredData(e)},this.props.active.init(this._flattenData(this.state.filteredData)),this.props.getInitialItems&&this.props.getInitialItems().forEach((e=>this.props.selections.setVal(e,!0)))}static getDerivedStateFromProps(e){return{filteredData:S.calculateFilteredData(e)}}static calculateFilteredData(e){return{contacts:S.calculateFilteredContacts(e)}}static calculateFilteredContacts(e){let{filter:t,useAllContacts:a,searchText:s}=e;const n=S.calculateContacts({filter:t,useAllContacts:a});if(!s)return n;const i=c.default.accentFold(s),r=(0,f.default)(i);return n.filter((e=>e.searchMatch(i,r)))}static calculateContacts(e){let{filter:t,useAllContacts:a}=e;const s=a?l.ContactCollection.toArray():l.ContactCollection.getFilteredContacts();return t?s.filter(t):s}componentDidUpdate(e){this.props.searchText!==e.searchText&&this.props.active.init(this._flattenData(this.state.filteredData))}_flattenData(e){return e.contacts}_isEmpty(){return!this.state.filteredData.contacts.length}_getData(){const e=[],{contacts:t}=this.state.filteredData;return t.length&&(e.push({itemKey:v,type:v}),e.push(...t.map((e=>({itemKey:e.id.toString(),type:C,data:e}))))),e}toggleFirst(e){if(this.state.filteredData.contacts.length){const t=this.state.filteredData.contacts[0],a=!this.props.selections.isSelected(t);this._handleSelect(t,a,e)}}focus(){this._refHotKey&&n.default.focus(this._refHotKey)}selectAll(){const e=S.calculateContacts({filter:this.props.filter,useAllContacts:this.props.useAllContacts});this.props.selections.getSelected().length===e.length?this.props.selections.unsetAll():e.forEach((e=>{this.props.selections.setVal(e,!0,!1)}))}_clearActive(){this.props.active.unset()}_handleContactClick(e){const{isDisabled:t}=this.props;if(t&&t(e.id))return;const a=this.props.selections.isSelected(e);this._handleSelect(e,!a,!1)}_renderList(){return this._isEmpty()?this.props.searchText?(0,g.jsx)(d.Search,{}):(0,g.jsx)(d.ListChats,{}):(0,g.jsx)(u.FlatList,{ref:this.setList,flatListController:this.props.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:this._getData(),renderItem:this._renderItem})}render(){return(0,g.jsx)(h.default,{active:this.props.active,onLeave:this.props.onLeaveList,onRef:this._handleRef,onIndexChange:this._handleIndexChange,children:this._renderList()})}}t.default=S,S.displayName="MultiSelectContactList"},62425:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{active:t,onIndexChange:a,onLeave:i,onEnter:r}=e,o=e=>{null==r||r(e)},l=e=>{const t=e.relatedTarget;return t instanceof HTMLElement&&e.currentTarget instanceof HTMLElement&&!e.currentTarget.contains(t)};return(0,n.jsx)(s.HotKeys,{handlers:{down:e=>{e.preventDefault(),e.stopPropagation(),t.setNext(!0),null==a||a(t.index)},up:e=>{e.stopPropagation(),e.preventDefault();t.prev()>-1?(t.setPrev(!0),null==a||a(t.index)):i&&(i(e),t.unset())},enter:o,space:o},onRef:e.onRef,onFocus:e=>{l(e)&&t.setFirst(!0)},onBlur:e=>{l(e)&&t.unset()},tabIndex:0,children:e.children})};var s=a(55414),n=a(85893)},46292:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(50796),i=s(a(52013)),r=a(67294),o=a(99989),l=s(a(69618)),d=a(85600),u=a(47915),c=s(a(29796)),h=a(99234),f=a(82145),p=s(a(62425)),m=a(48870),_=s(a(84644)),g=s(a(60809)),v=a(31515),C=s(a(38080)),S=a(77591),y=a(58021),b=a(85893);function E(e,t){const{active:a,selections:s,onSelectionChanged:E,onProductsLoaded:T,flatListController:x}=e,M=(0,C.default)(),P=(0,r.useRef)(null),A=(0,r.useRef)(null),I=()=>{const e=(0,h.getMaybeMeUser)(),t=(0,v.isString)(e)?(0,y.createWid)(e):e;return o.CatalogCollection.get(t)},w=()=>{const e=I();return null!=e?e.productCollection.getProductModels():[]},[k,j]=(0,r.useState)(w),[N,O]=(0,r.useState)(!1),[R,D]=(0,r.useState)((()=>w().length)),[L,B]=(0,r.useState)(!0),[F,G]=(0,r.useState)(!0),U=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=I();if(!t)return;const s=!t.afterCursor||!L;if(e&&(0,f.qplAnnotateCatalogView)(s),s){const a=t.productCollection.getProductModels();j(a),O(!1),B(!1),T&&T(a),e&&(0,f.qplEndCatalogView)(m.QuickLogActionType.SUCCESS)}else O(!0),(0,_.default)(o.CatalogCollection.findNextProductPage(t.id,e),M).then((t=>{const s=t.length;j(t),O(!1),D(s),B(R!==s),T&&T(t),a.init(t),e&&(0,f.qplEndCatalogView)(m.QuickLogActionType.SUCCESS)})).catch((()=>{O(!1),B(!0),e&&(0,f.qplEndCatalogView)(m.QuickLogActionType.FAIL)}))};(0,r.useEffect)((()=>{a.init(k),O(!0),o.CatalogCollection.find((0,h.getMaybeMeUser)()).catch((0,n.filteredCatch)(S.ServerStatusCodeError,(()=>{O(!1),B(!1),G(!1),(0,f.qplDropCatalogView)()}))).then((()=>U(!0)))}),[]);const V=e=>{const t=e.currentTarget,{scrollTop:a,clientHeight:s,scrollHeight:n}=t;n-s-a<l.default.SCROLL_FUDGE&&!N&&U()},H=(e,t,n)=>{s.setVal(e,t,n),a.setVal(e,n),E&&E(e,t)},K=e=>{const t=s.isSelected(e);H(e,!t,!1)},q=e=>{const{data:t}=e;return(0,b.jsx)(g.default,{product:t,selections:s,onClick:()=>K(t),active:a},t.id.toString())},W=e=>{if(0===k.length)return;const t=k[0],a=!s.isSelected(t);H(t,a,e)},Y=()=>{P.current&&i.default.focus(P.current)};return(0,r.useImperativeHandle)(t,(()=>({focus:Y,toggleFirst:W,updateForScrollEvent:V}))),(0,b.jsxs)(p.default,{active:e.active,onEnter:e=>{e.stopPropagation(),e.preventDefault(),a.value&&K(a.value)},onLeave:e.onLeaveList,onRef:e=>{P.current=e},onIndexChange:e=>{var t;null===(t=A.current)||void 0===t||t.scrollIntoViewIfNeeded(e)},children:[(()=>{if(0===k.length&&!N&&!L)return(0,b.jsx)(d.ListProducts,{hasCatalog:F});const e=k.map((e=>({itemKey:e.id.toString(),data:e})));return(0,b.jsx)(u.FlatList,{ref:A,direction:"vertical",forceConsistentRenderCount:!1,data:e,renderItem:q,flatListController:x,defaultItemHeight:l.default.PRODUCT_LIST_ITEM_HEIGHT})})(),N&&(0,b.jsx)(c.default,{})]})}var T=(0,r.forwardRef)(E);t.default=T},69238:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{vcards:t}=e;return(0,p.jsx)(u.Modal,{type:u.ModalTheme.Box,children:(0,p.jsxs)(i.default,{children:[(0,p.jsx)(o.DrawerHeader,{title:d.default.t(871,{count:t.length,_plural:t.length}),type:o.DRAWER_HEADER_TYPE.POPUP,onCancel:()=>n.Cmd.closeModal()}),(0,p.jsx)(r.default,{children:(0,p.jsx)(l.HotKeys,{children:(0,p.jsx)("div",{className:c.default.body,children:t.map(((e,t)=>e?(0,p.jsx)("div",{className:c.default.vcardWrapper,children:(0,p.jsx)(h.default,{parsedVcard:e,thumbnail:(0,f.vcardThumbnail)(e)})},t):null))})})})]})})};var n=a(88102),i=s(a(60453)),r=s(a(69637)),o=a(94790),l=a(55414),d=s(a(43725)),u=a(57224),c=s(a(67504)),h=s(a(11976)),f=a(78521),p=a(85893)},21398:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onMute:t}=e,a=(0,h.useModelValues)(e.mute,["id","expiration","callExpiration"]),[s,m]=(0,n.useState)(null),_=e=>{let{target:t}=e;t instanceof HTMLInputElement&&m(parseFloat(t.value))},g=()=>null!=s&&0!==s?s:(0,l.getLastChatMuteDuration)()||(0,u.getDefaultMuteDuration)();(0,n.useEffect)((()=>{null!=a.expiration&&0!==a.expiration&&null!=a.callExpiration&&0!==a.callExpiration&&p()}),[a.callExpiration,a.expiration,e]);const v=e.onCancel||p,C=g(),S=(0,u.getAllMuteDurations)().map((e=>{let{label:t,duration:a}=e;const s=`duration-${a}`;return(0,f.jsxs)("li",{children:[(0,f.jsx)("input",{id:s,type:"radio",name:"duration",className:c.default.input,value:a,checked:C===a,onChange:_}),(0,f.jsx)("label",{htmlFor:s,className:c.default.label,children:t})]},"mute-"+a)}));return(0,f.jsx)(r.default,{title:(0,f.jsx)(o.EmojiText,{text:e.title}),okText:d.default.t(1746),onOK:()=>{i.Cmd.closeModal();const e=g();(0,l.setLastChatMuteDuration)(e),t((0,u.calculateMuteExpiration)(e),e)},onCancel:v,children:(0,f.jsx)("form",{children:(0,f.jsx)("ol",{children:S})})})};var n=a(67294),i=a(88102),r=s(a(52665)),o=a(65417),l=a(99234),d=s(a(43725)),u=a(59779),c=s(a(25232)),h=a(49082),f=a(85893);function p(){i.Cmd.closeModal()}},30934:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onReport:t}=e,[a,s]=(0,r.useState)(!0),m=()=>{a?e.isGroupChat?e.onReportExitClear():e.onReportBlockClear():t()};let _,g,v,C;e.isGroupChat?(_=c.default.t(1157),g=c.default.t(1156),C=c.default.t(1172),v=d.GK.supportsFeature(d.GK.F.MD_BACKEND)?(0,u.clearOrDeleteChatSyncEnabled)()?c.default.t(1732):c.default.t(1733):c.default.t(1171)):e.isBusiness?(_=c.default.t(1150),g=c.default.t(1149),C=c.default.t(1176),v=d.GK.supportsFeature(d.GK.F.MD_BACKEND)?(0,u.clearOrDeleteChatSyncEnabled)()?c.default.t(1736):c.default.t(1737):c.default.t(1175)):(_=c.default.t(1153),g=c.default.t(1152),C=c.default.t(1174),v=d.GK.supportsFeature(d.GK.F.MD_BACKEND)?(0,u.clearOrDeleteChatSyncEnabled)()?c.default.t(1734):c.default.t(1735):c.default.t(1173));const S=(0,p.jsx)("div",{"data-a8n":n.default.key("menu-icon-report-spam"),className:h.default.control,children:(0,p.jsx)(o.CheckBox,{onChange:()=>{s(!a)},checked:a,id:"menu-icon-report-spam"})}),y=(0,p.jsx)("label",{htmlFor:"menu-icon-report-spam",className:h.default.label,children:g});return d.GK.supportsFeature(d.GK.F.MD_BACKEND)?(0,p.jsxs)(l.default,{title:_,onOK:m,okText:c.default.t(1146),onCancel:e.onCancel,children:[(0,p.jsxs)("div",{className:(0,i.default)(h.default.section,h.default.border),children:[S,y]}),(0,p.jsx)(f.TextParagraph,{className:h.default.mdMetaText,theme:"muted",children:v}),(0,p.jsx)(f.TextParagraph,{className:h.default.mdMetaText,theme:"muted",children:C})]}):(0,p.jsxs)(l.default,{onOK:m,okText:c.default.t(1146),onCancel:e.onCancel,children:[_,(0,p.jsx)(f.TextDiv,{className:h.default.metaText,theme:"muted",children:v}),(0,p.jsx)(f.TextDiv,{className:h.default.metaText,theme:"muted",children:C}),(0,p.jsxs)("div",{className:h.default.section,children:[S,y]})]})};var n=s(a(99964)),i=s(a(94184)),r=a(67294),o=a(16593),l=s(a(52665)),d=a(7293),u=a(57701),c=s(a(43725)),h=s(a(86638)),f=a(13923),p=a(85893)},16844:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{onClick:t}=e;return(0,o.jsx)(i.MenuBarItem,{a8nText:"menu-bar-select-all",icon:(0,o.jsx)(r.default,{name:"select-all"}),title:n.default.t(1225),onClick:t})};var n=s(a(43725)),i=a(46346),r=s(a(23217)),o=a(85893)},56728:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.SelectModal=t.ListType=void 0;var n=s(a(45120)),i=s(a(52013)),r=a(67294),o=a(88102),l=s(a(121)),d=s(a(35375)),u=s(a(60453)),c=s(a(69637)),h=a(94790),f=a(50101),p=s(a(30855)),m=a(57224),_=s(a(77864)),g=s(a(97473)),v=s(a(46292)),C=s(a(26757)),S=s(a(16844)),y=a(18963),b=s(a(32127)),E=s(a(87481)),T=s(a(59552)),x=a(85893);const M={CHAT_SELECT_MODAL:"CHAT_SELECT_MODAL",CONTACT_SELECT_MODAL:"CONTACT_SELECT_MODAL",PARTICIPANT_MANAGE_MODAL:"PARTICIPANT_MANAGE_MODAL",PRODUCT_SELECT_MODAL:"PRODUCT_SELECT_MODAL"};t.ListType=M;const P=(0,r.forwardRef)(((e,t)=>{const{listType:a,useShortName:s,singleSelectionFooterType:P,multipleSelectionFooterType:A,onConfirm:I,onSelectionChanged:w,getInitialItems:k,msgType:j,excludeChat:N,excludeBroadcast:O,maxItems:R,hasFrequentlyForwarded:D,useAllContacts:L,maxItemsExceedErrorMsg:B,isDisabled:F,isSelected:G,customSecondaryText:U,filter:V,allowBlockedContacts:H,onDataLoaded:K,getSelectionSummary:q,shouldShowSelectionSummary:W,activeWithoutSelection:Y,enableSelectAll:z}=e,Q=(0,r.useRef)(null),$=(0,r.useRef)(null),X=(0,T.default)((()=>new E.default([],(e=>e.id.toString())))),J=(0,T.default)((()=>new C.default([],(e=>e.id.toString())))),Z=(0,T.default)((()=>new p.default)),[ee,te]=(0,r.useState)("");(0,r.useEffect)((()=>{i.default.focus(Q.current)}),[]);const ae=!!e.getInitialItems&&0!==e.getInitialItems().length,se=e=>{e&&(e.preventDefault(),e.stopPropagation())};(0,r.useImperativeHandle)(t,(()=>({handleFocusList:se})));const ne=()=>{n.default.shouldIndicateFocus(),i.default.focus(Q.current)},ie=(e,t)=>{var a;if(null===(a=Q.current)||void 0===a||a.select(),null!=w){const a=J.current.getSelected();w(e,t,a)}},re=()=>{$.current instanceof g.default&&$.current.selectAll()},oe=a===M.PARTICIPANT_MANAGE_MODAL?(0,x.jsx)(d.default,{selections:J.current,useShortName:s,onDelete:(e,t)=>{J.current.setVal(t,!1)},isDisabled:e.isDisabled}):null;return(0,x.jsx)(m.Modal,{type:m.ModalTheme.Tower,children:(0,x.jsxs)(u.default,{children:[(0,x.jsx)(h.DrawerHeader,{menu:(()=>{if(!0!==z)return null;if(a!==M.CONTACT_SELECT_MODAL)return null;const e=g.default.calculateContacts({filter:V,useAllContacts:L}).length;return null!=R&&e>R?null:(0,x.jsx)(S.default,{onClick:re})})(),title:e.title,type:h.DRAWER_HEADER_TYPE.POPUP,onCancel:e.onCancel?e.onCancel:()=>o.Cmd.closeModal()}),(0,x.jsx)(b.default,{searchRef:e=>{Q.current=e},setSearchText:te,onDown:()=>{X.current.setFirst(!0)},onEnter:()=>{var e;null===(e=$.current)||void 0===e||e.toggleFirst(!1)},onFocus:()=>{var e;X.current.unset(),null===(e=Q.current)||void 0===e||e.indicateFocus()},enabled:e.enableSearchBox}),e.customHeader,oe,(0,x.jsx)(c.default,{flatListControllers:[Z.current],onScroll:e=>{var t;(null===(t=$.current)||void 0===t?void 0:t.updateForScrollEvent)&&$.current.updateForScrollEvent(e)},children:(()=>{switch(a){case M.CHAT_SELECT_MODAL:{const e=J.current;return(0,x.jsx)(_.default,{ref:$,msgType:j,excludeChat:N,excludeBroadcast:O,getInitialItems:k,searchText:ee,active:X.current,selections:e,maxChats:R,onLeaveList:ne,onSelectionChanged:ie,hasFrequentlyForwarded:D,flatListController:Z.current})}case M.PARTICIPANT_MANAGE_MODAL:case M.CONTACT_SELECT_MODAL:{const e=J.current;return(0,x.jsx)(g.default,{ref:$,useAllContacts:L,getInitialItems:k,searchText:ee,active:X.current,selections:e,maxContacts:R,maxContactsExceedErrorMsg:B,onLeaveList:ne,onSelectionChanged:ie,isDisabled:F,isSelected:G,customSecondaryText:U,filter:V,allowBlockedContacts:H,flatListController:Z.current})}case M.PRODUCT_SELECT_MODAL:{const e=J.current;return(0,x.jsx)(v.default,{ref:$,flatListController:Z.current,active:X.current,selections:e,onSelectionChanged:ie,onProductsLoaded:K})}default:throw new Error(`Invalid list type: ${a}`)}})()}),(0,x.jsx)(y.SelectModalFooter,{singleSelectionType:P,multipleSelectionType:A,selections:J.current,onForward:()=>{const e=J.current.getSelected();a===M.CONTACT_SELECT_MODAL||a===M.PARTICIPANT_MANAGE_MODAL||a===M.PRODUCT_SELECT_MODAL?I(e):Promise.all(e.map((e=>e instanceof l.default?(0,f.findChat)(e.id):e))).then((e=>{I(e)}))},startActive:ae,getSelectionSummary:q,shouldShowSelectionSummary:W,activeWithoutSelection:Y})]},"chat-modal")})}));t.SelectModal=P,P.displayName="SelectModal"},18963:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.FooterType=void 0,t.SelectModalFooter=S;var n=s(a(35161)),i=s(a(25325)),r=s(a(91966)),o=s(a(94184)),l=a(67294),d=a(63183),u=a(65417),c=s(a(43725)),h=a(9468),f=a(82857),p=s(a(33868)),m=s(a(23217)),_=a(19529),g=s(a(41956)),v=a(85893);const C={CONFIRM:"CONFIRM",NEXT:"NEXT",SEND:"SEND",VOICE_CALL:"VOICE_CALL",VIDEO_CALL:"VIDEO_CALL"};function S(e){const{getSelectionSummary:t,shouldShowSelectionSummary:a,selections:s,activeWithoutSelection:n,onForward:i,startActive:r}=e,d=(0,l.useRef)(!0===n||!0===r),u=(0,l.useRef)(!0),[c,h]=(0,l.useState)([]);(0,_.useListener)(s,"all",(()=>{h(s.getSelected())})),(0,l.useEffect)((()=>{const e=s.getSelected();h(e)}),[]);const S=()=>{u.current&&(u.current=!1,i())},b=(0,l.useMemo)((()=>!0===n||c.length>0),[n,c]);let E;if((0,l.useEffect)((()=>{b||(d.current=!1)}),[b]),b){let s;switch(1===c.length?e.singleSelectionType:e.multipleSelectionType){case C.CONFIRM:s=(0,v.jsx)(m.default,{name:"checkmark-medium"});break;case C.NEXT:s=(0,v.jsx)(m.default,{name:"arrow-forward"});break;case C.VOICE_CALL:s=(0,v.jsx)(m.default,{name:"voice-call"});break;case C.VIDEO_CALL:s=(0,v.jsx)(m.default,{name:"video-call"});break;case C.SEND:default:s=(0,v.jsx)(m.default,{directional:!0,name:"send"})}const n=a?(0,v.jsx)(y,{items:c,getSelectionSummary:t}):null;E=(0,v.jsxs)("div",{className:(0,o.default)(p.default.controlsSummary,{[p.default.noSummary]:!a}),children:[n,(0,v.jsx)("div",{"data-animate-btn":!0,className:d.current?p.default.btnActive:p.default.btnAction,children:(0,v.jsx)(f.Round,{large:!0,onClick:S,children:s})})]})}return(0,v.jsx)(g.default,{transitionName:"slide-up-down-footer",className:p.default.container,children:E})}t.FooterType=C,S.defaultProps={singleSelectionType:C.SEND,multipleSelectionType:C.SEND,shouldShowSelectionSummary:!0};class y extends l.Component{constructor(e){super(e),this.state={items:this.props.items}}static getDerivedStateFromProps(e,t){let a=t.items;const s=e.items;return a=s&&s.length>a.length?a.concat((0,r.default)(s,a)):(0,i.default)(a,s),{items:a}}render(){const e=(0,n.default)(this.state.items,(e=>e instanceof d.Chat?e.formattedTitle:e instanceof h.Product?e.name:e.formattedShortNameWithNonBreakingSpaces)),t=[];for(let a=e.length-1;a>=0;a--)t.push((0,v.jsx)(u.EmojiText,{className:p.default.item,text:e[a]},a)),a>0&&t.push((0,v.jsx)("span",{children:c.default.t(420)},`comma-${a}`));const{getSelectionSummary:a}=this.props,s=null==a?t:(0,v.jsx)("span",{children:a(this.state.items)});return(0,v.jsx)(g.default,{transitionName:"pop",className:p.default.summaryText,children:s})}}y.displayName="SelectionSummary"},32127:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{enabled:t=!0,setSearchText:a,searchRef:s,onEnter:d}=e,u=(0,o.default)((e=>{a(e)}),100);return t?(0,l.jsx)(n.HotKeys,{handlers:{down:e.onDown},onFocus:e.onFocus,children:(0,l.jsx)(r.default,{ref:s,onSearch:u,onEnter:d,placeholder:i.default.t(1191)})}):null};var n=a(55414),i=s(a(43725)),r=s(a(48837)),o=s(a(81559)),l=a(85893)},74943:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(41609)),r=a(40277),o=n(a(94184)),l=a(67294),d=a(85965),u=a(88102),c=n(a(52665)),h=a(17239),f=n(a(69618)),p=a(60769),m=a(99234),_=a(55414),g=n(a(43725)),v=s(a(86688)),C=n(a(10044)),S=n(a(23217)),y=a(90011),b=a(50452),E=a(85893);const{SEND_LOGS_MAX_EMAIL_LENGTH:T,SEND_LOGS_MAX_SUBJECT_LENGTH:x,SEND_LOGS_MIN_DESC_LENGTH:M,SEND_LOGS_MAX_DESC_LENGTH:P,SEND_LOGS_MAX_SCREENSHOTS:A,SEND_LOGS_MAX_SCREENSHOT_SIZE:I}=f.default;class w extends l.Component{constructor(){var e;super(...arguments),this.state={email:"",emailError:void 0,confirmEmail:"",confirmEmailError:void 0,subject:h.Conn.isSMB?g.default.t(1249):g.default.t(1250),subjectError:void 0,description:null!==(e=this.props.description)&&void 0!==e?e:"",descriptionError:void 0,screenshots:[],isDragging:!1},this._setAttachButton=e=>{this._attachButton=e},this._setEmailAddr=e=>{this._emailAddrInput=e},this.handleSend=()=>{const e={},{email:t,confirmEmail:a,subject:s,description:n,screenshots:o}=this.state,l=t.trim(),c=a.trim(),h=this.props.supportTag;if(this._validateEmail(l)||(e.emailError=g.default.t(1236)),this._validateConfirmEmail(c)||(e.confirmEmailError=g.default.t(1237)),this.validateDescription(n)||(e.descriptionError=g.default.t(1248)),this._validateSubject(s)||(e.subjectError=g.default.t(1245)),(0,i.default)(e)){this.setState({email:l,confirmEmail:c,emailError:void 0,confirmEmailError:void 0,descriptionError:void 0,subjectError:void 0}),o.map((e=>{e.url&&(URL.revokeObjectURL(e.url),delete e.url)}));const e=(0,m.getMaybeMeUser)(),t=e?(0,r.formatPhone)(e.user):null,a=s.trim()||g.default.t(1233);(0,d.uploadUserReport)(t,l,a,n,o,h),this.props.onSend&&this.props.onSend({subject:a,description:n,numScreenshots:o.length}),u.Cmd.closeModal(),u.Cmd.openToast((0,E.jsx)(b.Toast,{msg:g.default.t(1244),id:(0,b.genId)()}))}else e.email=l,e.confirmEmail=c,this.setState(e)},this.handleCancel=()=>{this.props.onCancel&&this.props.onCancel(),u.Cmd.closeModal()},this.handleSubjectChange=e=>{const t={subject:e,subjectError:this.state.subjectError};this.state.subjectError&&this._validateSubject(t.subject)&&(t.subjectError=void 0),this.setState(t)},this._handleSubjectBlur=()=>{let e;this._validateSubject(this.state.subject)||(e=g.default.t(1245)),this.state.subjectError!==e&&this.setState({subjectError:e})},this.handleDescriptionChange=e=>{const t={description:e,descriptionError:this.state.descriptionError};this.state.descriptionError&&this.validateDescription(t.description)&&(t.descriptionError=void 0),this.setState(t)},this._handleDescriptionBlur=()=>{let e;!this.state.description&&!this.state.descriptionError||this.validateDescription(this.state.description)||(e=g.default.t(1248)),this.state.descriptionError!==e&&this.setState({descriptionError:e})},this._handleEmailChange=e=>{const t={email:e,emailError:this.state.emailError};this.state.emailError&&this._validateEmail(t.email)&&(t.emailError=void 0),this.setState(t)},this._handleEmailBlur=()=>{let e;const t=this.state.email.trim(),a={};!this.state.email&&!this.state.emailError||this._validateEmail(t)||(e=g.default.t(1236)),this.state.emailError!==e&&(a.emailError=e),this.state.email!==t&&(a.email=t),(0,i.default)(a)||this.setState(a)},this._handleConfirmEmailChange=e=>{const t={confirmEmail:e,confirmEmailError:this.state.confirmEmailError};this.state.confirmEmailError&&this._validateConfirmEmail(t.confirmEmail)&&(t.confirmEmailError=void 0),this.setState(t)},this._handleConfirmEmailBlur=()=>{let e;const t=this.state.confirmEmail.trim(),a={};!this.state.confirmEmail&&!this.state.confirmEmailError||this._validateConfirmEmail(t)||(e=g.default.t(1237)),this.state.confirmEmailError!==e&&(a.confirmEmailError=e),this.state.confirmEmail!==t&&(a.confirmEmail=t),(0,i.default)(a)||this.setState(a)},this._validateEmail=e=>v.validateEmail(e),this._validateConfirmEmail=e=>this.state.email===e,this.validateDescription=e=>e.length>M,this._validateSubject=()=>!0,this.handleFilePick=e=>{e.preventDefault(),e.stopPropagation(),this._reachMaxScreenshots()||(0,p.getFiles)(e,"image/*").then((e=>{this._attachButton&&(this._attachButton.value="");const t=e.filter((e=>e.size<=I));t.length<e.length&&u.Cmd.openToast((0,E.jsx)(b.Toast,{msg:g.default.t(1239),id:(0,b.genId)()}));const a=this.state.screenshots.concat(t).slice(0,A);a.map((e=>{e.url||(e.url=URL.createObjectURL(e))})),this.setState({screenshots:a})}))},this.handleDragChange=e=>{this.setState({isDragging:e})},this._handleAttachClick=()=>{this._attachButton&&!this._reachMaxScreenshots()&&this._attachButton.click()},this.stopPropagation=e=>{e.stopPropagation()}}componentDidMount(){this._emailAddrInput&&this._emailAddrInput.restoreFocus()}componentWillUnmount(){this.state.screenshots.map((e=>{let{url:t}=e;return t&&URL.revokeObjectURL(t)}))}_reachMaxScreenshots(){return this.state.screenshots.length>=A}_deleteScreenshot(e){const t=this.state.screenshots.slice(),[a]=t.splice(e,1);a.url&&URL.revokeObjectURL(a.url),this.setState({screenshots:t})}_getScreenshotsList(){const e=this.state.screenshots.map(((e,t)=>{if(!e.url)return null;const a=`url(${e.url})`;return(0,E.jsx)("div",{className:C.default.screenshotsImg,style:{backgroundImage:a},children:(0,E.jsx)("button",{className:C.default.btnDelete,onClick:()=>{this._deleteScreenshot(t)},children:(0,E.jsx)(S.default,{name:"x-alt"})})},`screenshot-${t}`)}));return e.length?(0,E.jsx)("div",{className:C.default.screenshotPreview,children:e}):null}_getScreenshotAction(){if(this._reachMaxScreenshots()){const e=A;return(0,E.jsx)("div",{className:(0,o.default)(C.default.action,C.default.disabled),children:g.default.t(1247,{count:e,_plural:e})})}return this.state.isDragging?(0,E.jsx)("div",{className:C.default.action,children:g.default.t(1242)}):(0,E.jsx)("div",{className:C.default.action,onClick:this._handleAttachClick,children:g.default.t(1243)})}render(){const e={enter:this.stopPropagation},t=(0,E.jsxs)("div",{className:C.default.screenshots,children:[this._getScreenshotsList(),this._getScreenshotAction(),(0,E.jsx)("input",{accept:"image/*",type:"file",multiple:!0,onClick:this.stopPropagation,onChange:this.handleFilePick,ref:this._setAttachButton,disabled:this._reachMaxScreenshots()})]});return(0,E.jsx)(c.default,{title:g.default.t(1246),okText:g.default.t(1232),onOK:this.handleSend,onCancel:this.handleCancel,onDrop:this.handleFilePick,onDragChange:this.handleDragChange,children:(0,E.jsxs)(_.HotKeys,{handlers:e,children:[(0,E.jsx)(y.TextInput,{ref:this._setEmailAddr,value:this.state.email,error:this.state.emailError,maxLength:T,onChange:this._handleEmailChange,onBlur:this._handleEmailBlur,placeholder:g.default.t(1234)}),(0,E.jsx)(y.TextInput,{editable:!0,value:this.state.confirmEmail,error:this.state.confirmEmailError,maxLength:T,onChange:this._handleConfirmEmailChange,onBlur:this._handleConfirmEmailBlur,placeholder:g.default.t(1235)}),(0,E.jsx)(y.TextInput,{value:this.state.subject,error:this.state.subjectError,maxLength:x,onChange:this.handleSubjectChange,onBlur:this._handleSubjectBlur,placeholder:g.default.t(1238)}),(0,E.jsx)(y.TextInput,{value:this.state.description,error:this.state.descriptionError,maxLength:P,onChange:this.handleDescriptionChange,onBlur:this._handleDescriptionBlur,placeholder:g.default.t(391),multiline:!0}),t]})})}}t.default=w,w.displayName="SendLogsPopup"},23515:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=t=>{var a;t.stopPropagation(),t.preventDefault(),null===(a=e.onDismissClicked)||void 0===a||a.call(e)},a=(0,l.jsx)(n.default,{a8nText:"popup-controls-support",type:"secondary",onClick:t=>{var a;t.stopPropagation(),t.preventDefault(),null===(a=e.onSupportClicked)||void 0===a||a.call(e)},children:r.default.t(1329)}),s=(0,l.jsx)(n.default,{a8nText:"popup-controls-dismiss",type:"primary",onClick:t,children:r.default.t(1326)}),d={escape:e.onDismissClicked?t:()=>{}},u=(0,l.jsxs)(l.Fragment,{children:[a,s]});return(0,l.jsx)(i.HotKeys,{handlers:d,children:(0,l.jsx)(o.Modal,{actions:u,children:e.children,title:e.title})})};var n=s(a(39770)),i=a(55414),r=s(a(43725)),o=a(57224),l=a(85893)},82791:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{link:t}=e,{suspiciousCharacters:a,domain:s,href:f}=t,p=s.split("."),m=p.map(((e,t)=>{let s=!1;const i=e.split("").map(((e,n)=>{const i=a&&a.has(e);s=i||s;const r=i?u.default.suspiciousCharacter:void 0;return(0,c.jsx)("span",{className:r,children:e},`${t}-${n}-${e}`)})),r=s?u.default.suspiciousHostname:void 0;return(0,c.jsxs)(n.Fragment,{children:[(0,c.jsx)("span",{className:r,children:i}),t+1!==p.length?(0,c.jsx)("span",{children:"."}):null]},`${t}-${e}`)})),[_,g]=f.split(s);return(0,c.jsxs)(r.default,{title:d.default.t(1333),okText:d.default.t(1574),cancelText:d.default.t(1335),onOK:h,onCancel:()=>{const{href:e}=t;(0,o.openExternalLink)(e),i.Cmd.closeModal()},children:[(0,c.jsxs)("div",{className:u.default.explanation,children:[d.default.t(1336)+" ",(0,c.jsx)(o.ExternalLink,{href:(0,l.getSuspiciousLinkFaqUrl)(),children:d.default.t(690)})]}),(0,c.jsxs)("div",{className:u.default.url,children:[_,m,g]})]})};var n=a(67294),i=a(88102),r=s(a(52665)),o=a(12591),l=a(96384),d=s(a(43725)),u=s(a(89042)),c=a(85893);const h=()=>{i.Cmd.closeModal()}},64807:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{contact:t,isB2C:a}=e;const s=()=>{(0,l.shouldBlockByTos)(t)||n.Cmd.closeModal()};(0,d.useListener)(t,"change:privacyMode",s),(0,d.useListener)(o.TosManager,"change",s);const c=a?r.default.t(1874):r.default.t(1876);return(0,u.jsx)(i.default,{onOK:()=>n.Cmd.closeModal(),okText:r.default.t(977),title:r.default.t(1875),children:c})};var n=a(88102),i=s(a(52665)),r=s(a(43725)),o=a(70768),l=a(37894),d=a(19529),u=a(85893)},22502:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){let e,t,a;switch((0,l.useListener)(r.Conn,"change:tos",c),r.Conn.tos){default:case 1:e=o.default.t(1872),t=o.default.t(977),a=()=>n.Cmd.closeModal();break;case 2:e=o.default.t(1873),t=o.default.t(808),a=h}return(0,u.jsx)(i.default,{onOK:a,okText:t,children:e})};var n=a(88102),i=s(a(52665)),r=a(17239),o=s(a(43725)),l=a(19529),d=a(65044),u=a(85893);function c(){0===r.Conn.tos&&n.Cmd.closeModal()}function h(){n.Cmd.closeModal(),d.Socket.logout()}},26132:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,v.useModelValues)(e.notice,["noticeId","blocking","blockingModal"]),a=(0,n.useContext)(_.ThemeContext),{blockingModal:s}=t,[i,T]=(0,n.useState)(!1);(0,g.useListener)(f.default,"change:blocking",(()=>{f.default.blocking||r.Cmd.closeModal()}));const x=()=>null!=f.default.noticeId&&null!=f.default.blockingModal&&!0===f.default.blocking,M=()=>{if(x()&&!i){new c.default.UserNotice({userNoticeId:f.default.noticeId,userNoticeContentVersion:f.default.policyVersion,userNoticeEvent:c.default.USER_NOTICE_EVENT.BLOCKING_MODAL_APPEAR}).commit(),T(!0)}};(0,g.useListener)(f.default,"change:noticeId",(()=>{T(!1)})),(0,g.useListener)(f.default,"change:blockingModal change:blocking",M),(0,n.useEffect)((()=>{M()}),[]);const P=()=>{__LOG__(2)`user notice modal, user clicked logout`,r.Cmd.closeModal(),S.Socket.logout()},A=()=>{location.reload()},I=e=>{if(e){if("logout"===e.action)return P;if("refresh"===e.action)return A}return b};if(!s||!x())return null;const{iconSvg:w,iconDescription:k="",title:j,body:N,primaryButton:O,secondaryButton:R}=s;let D;w&&(D="light"===a.theme?w.light:w.dark);const L=(0,y.jsx)(p.default,{name:"alert-notice","aria-label":k}),B=D&&(0,l.sanitizeNoticeSVG)(D),F=B?(0,y.jsx)("span",{"aria-label":k,dangerouslySetInnerHTML:{__html:B}}):L,G=(0,y.jsx)(E,{btn:R,onClick:I(R)}),U=(0,y.jsx)(E,{btn:O,primary:!0,onClick:I(O)}),V={enter:I(O)},H=j?(0,l.sanitizeNoticeText)(j):null,K=N?(0,l.sanitizeNoticeText)(N):null;return(0,y.jsx)(u.HotKeys,{handlers:V,children:(0,y.jsx)("div",{className:o.Conn.isSMB?C.default.noticeSmbContainer:C.default.noticeContainer,children:(0,y.jsx)(h.Modal,{actions:[G,U],type:h.ModalTheme.Flex,children:(0,y.jsxs)("div",{className:C.default.noticeModalContentWrapper,children:[(0,y.jsx)(d.FlexRow,{className:C.default.noticeSvgWrapper,align:"center",justify:"center",children:F}),(0,y.jsx)(m.TextDiv,{theme:"popup-title",className:C.default.headerText,children:(0,y.jsx)("div",{dangerouslySetInnerHTML:{__html:H}})}),(0,y.jsx)(m.TextDiv,{theme:"plain",className:C.default.bodyText,children:(0,y.jsx)("div",{dangerouslySetInnerHTML:{__html:K}})})]})})})})};var n=a(67294),i=s(a(39770)),r=a(88102),o=a(17239),l=a(32303),d=a(29623),u=a(55414),c=s(a(11339)),h=a(57224),f=s(a(51783)),p=s(a(23217)),m=a(13923),_=a(97628),g=a(19529),v=a(49082),C=s(a(17490)),S=a(65044),y=a(85893);const b=()=>{};function E(e){let{btn:t,primary:a=!1,onClick:s}=e;if(null==t)return null;const n=`UserNoticeModalPopup-${t.action}Btn`,r=`popup-controls-${t.action}`;return(0,y.jsx)(i.default,{a8nText:r,type:a?"primary":"secondary",onClick:s,children:t.label},n)}},11976:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{parsedVcard:t,thumbnail:a}=e,s=e.parsedVcard,x=(0,n.default)(s.TEL,(e=>e.properties.waid)),M=(0,n.default)(s.TEL,(e=>!e.properties.waid)),P=(0,i.default)(x,(e=>{const t=e.properties.waid[0],a=(0,T.jsx)(C.default,{onClick:()=>(e=>{l.Cmd.closeModal(),(0,f.findChat)((0,E.createUserWid)(e)).then((e=>{l.Cmd.openChatFromUnread(e).then((t=>{t&&l.Cmd.focusChatTextInput(e)}))}))})(t),children:(0,T.jsx)(v.default,{name:"chat",className:S.default.icon})}),s=(0,T.jsx)(g.SelectableSpan,{selectable:!0,children:(0,b.default)(t)});return(0,T.jsx)(u.default,{title:s,icon:a,children:(0,y.vcardGetType)(e)},`vCard-${String(e.index)}`)})),A=(0,i.default)(s.EMAIL,(e=>(0,T.jsx)(u.default,{title:p.default.forceLTR(e.value),onClick:()=>{return t=e.value,void(0,h.openExternalLink)(`mailto:${t}`);var t},children:(0,y.vcardGetType)(e)},`vCard-${String(e.index)}`))),I=(0,i.default)(s.ADR,(e=>{const t=e.value.join(" ");return(0,T.jsx)(u.default,{title:t,onClick:()=>(e=>{const t=`https://maps.google.com/maps/search/${(0,i.default)((0,n.default)(e),encodeURIComponent).join(", ")}?hl=${p.default.getLocale()}`;(0,h.openExternalLink)(t)})(e.value),children:(0,y.vcardGetType)(e)},`vCard-${String(e.index)}`)})),w=(0,i.default)(M,(e=>(0,T.jsx)(u.default,{title:p.default.forceLTR(e.value),children:(0,y.vcardGetType)(e)},`vCard-${String(e.index)}`))),k=(0,i.default)(s.SERVICE,(e=>(0,T.jsx)(u.default,{title:e.value,children:(0,y.vcardGetType)(e)},`vCard-${String(e.index)}`))),j=(0,i.default)(s.BDAY,(e=>(0,T.jsx)(u.default,{title:(0,y.vcardGetDate)(e.value),children:p.default.t(1410)},`vCard-${String(e.index)}`))),N=(0,i.default)(s.NICKNAME,(e=>(0,T.jsx)(u.default,{title:e.value,children:p.default.t(1422)},`vCard-${String(e.index)}`))),O=(()=>{const e=(0,y.vcardWids)(t),s=(0,T.jsx)(c.EmojiText,{text:(0,y.vcardGetNameFromParsed)(t),direction:"auto",titlify:!0,ellipsify:!0,selectable:!0}),n=(0,y.vcardGetOrganizationString)(t),i=(0,T.jsx)(m.default,{thumb:a,size:d.DETAIL_IMAGE_SIZE.SMALL,wid:_.ProfilePicThumbCollection.findThumbnailWid(e)});return(0,T.jsx)(o.default,{image:i,theme:"plain",primary:s,secondary:n})})(),R=[...P,...A,...I,...w,...j,...N,...k],D=R[R.length-1];null!=D&&(R[R.length-1]=(0,r.cloneElement)(D,{isLastItem:!0}));return(0,T.jsxs)("div",{children:[O,(0,T.jsx)("div",{className:S.default.content,children:R})]})};var n=s(a(63105)),i=s(a(35161)),r=a(67294),o=s(a(44356)),l=a(88102),d=a(88984),u=s(a(70835)),c=a(65417),h=a(12591),f=a(50101),p=s(a(43725)),m=s(a(87543)),_=a(82039),g=a(52596),v=s(a(23217)),C=s(a(1784)),S=s(a(42694)),y=a(78521),b=s(a(39938)),E=a(58021),T=a(85893)},21915:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onSelect:t,vcard:a}=e,s=(0,r.useMemo)((()=>{const s=e=>{t(e)};return(0,n.default)(a.TEL,(e=>e.properties.waid)).map((t=>{const a=(0,_.createUserWid)(t.properties.waid[0]);let n=e.icon;return n&&(n=(0,g.jsx)(h.default,{onClick:e=>{((e,t)=>{e.stopPropagation(),s(t)})(e,a)},children:n})),(0,g.jsx)("div",{className:p.default.container,children:(0,g.jsx)(u.default,{title:(0,m.default)(a),onClick:()=>s(a),isLastItem:!0,icon:n,children:(0,f.vcardGetType)(t)})},`vCard-${t.value}`)}))}),[a.TEL,t,e.icon]);return(0,g.jsx)(c.Modal,{type:c.ModalTheme.Box,children:(0,g.jsxs)(o.default,{children:[(0,g.jsx)(d.DrawerHeader,{onCancel:e.onCancel,type:d.DRAWER_HEADER_TYPE.POPUP,title:i.default._("Choose a phone number",null,{hk:"2Mbr64"})}),(0,g.jsx)(l.default,{children:s})]})})};var n=s(a(63105)),i=s(a(48360)),r=a(67294),o=s(a(60453)),l=s(a(69637)),d=a(94790),u=s(a(70835)),c=a(57224),h=s(a(1784)),f=a(78521),p=s(a(54585)),m=s(a(39938)),_=a(58021),g=a(85893)},25033:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{messageText:t}=e,a=()=>{const e=(0,c.firstNEncodedBytes)(t,2e3),a=5===u.ServerProps.frequentlyForwardedThreshold?"wa":`wa${u.ServerProps.frequentlyForwardedThreshold}`,s=h.URL.build("https://www.google.com/search",{ctx:a,q:e});(0,r.openExternalLink)(s),(new l.default.HfmTextSearchComplete).commit(),n.Cmd.closeModal()},s=()=>{n.Cmd.closeModal()};return d.default.online?(0,f.jsx)(i.default,{cancelText:o.default.t(1574),onCancel:s,okText:o.default.t(1206),onOK:a,children:o.default.t(1208)}):(0,f.jsx)(i.default,{okText:o.default.t(1765),onOK:s,children:o.default.t(1207)})};var n=a(88102),i=s(a(52665)),r=a(12591),o=s(a(43725)),l=s(a(11339)),d=s(a(57220)),u=a(64551),c=a(3940),h=a(2541),f=a(85893)},84819:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=i.ServerProps.webPipRedesign,a=t?16:void 0,s=e.isFullscreenMode?34:a;return(0,l.jsx)(o.default,{xstyle:[d.closeBtn,e.isFullscreenMode&&d.fullscreen,t&&d.closeBtnNew,e.isStatic&&d.static],onClick:e.onClick,children:(0,l.jsx)(r.default,{"aria-label":n.default.t(1585),name:"video-x",height:s,width:s})})};s(a(56720));var n=s(a(43725)),i=a(64551),r=s(a(23217)),o=s(a(1784)),l=a(85893);const d={closeBtn:{position:"lhggkp7q",top:"r8dd7jr1",end:"ohq8n1fk",zIndex:"mb8var44",cursor:"ajgl1lbb"},closeBtnNew:{top:"jgz0asyo",end:"b4u6kxhc"},static:{position:"gire0wgi"},fullscreen:{top:"a70a3vn1",end:"h223g3sc"}}},72930:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.jsx)("div",{className:(0,n.default)(i.default.button,{[i.default.fullscreen]:e.isFullscreenMode}),onClick:e.onClick,children:(0,o.jsx)(r.default,{name:e.isInstagram?"logo-instagram":"logo-facebook"})})};var n=s(a(94184)),i=s(a(59029)),r=s(a(23217)),o=a(85893)},51582:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.jsx)(r.default,{xstyle:[l.button,e.isFullscreenMode&&l.fullscreen,e.isStatic&&l.static],onClick:e.onClick,children:e.isFullscreenMode?(0,o.jsx)(i.default,{"aria-label":n.default._("Exit full screen",null,{hk:"45Doy3"}),name:"video-exit-fullscreen"}):(0,o.jsx)(i.default,{"aria-label":n.default._("Full screen",null,{hk:"38YTtz"}),name:"video-fullscreen"})})};var n=s(a(48360)),i=(s(a(56720)),s(a(23217))),r=s(a(1784)),o=a(85893);const l={button:{position:"lhggkp7q",top:"r8dd7jr1",start:"sxdjimme",zIndex:"mb8var44",cursor:"ajgl1lbb"},static:{position:"gire0wgi"},fullscreen:{top:"ba95y10t",start:"guo0zu0m"}}},19656:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.PIP_BUTTON_THEME=void 0,t.PiPButton=function(e){return(0,o.jsx)("button",{className:(0,n.default)(i.default.pipBtn,{[i.default.player]:e.theme===l.PLAYER,[i.default.preview]:e.theme===l.PREVIEW}),onClick:e.onClick,children:(0,o.jsx)(r.default,{name:"video-pip"})})};var n=s(a(94184)),i=s(a(7893)),r=s(a(23217)),o=a(85893);const l={PLAYER:"PLAYER",PREVIEW:"PREVIEW"};t.PIP_BUTTON_THEME=l},27557:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=e.icon?(0,i.jsx)("div",{className:n.default.icon,children:e.icon}):null;return(0,i.jsxs)("div",{className:n.default.note,children:[t,(0,i.jsx)("div",{className:n.default.noteBody,children:e.children})]})};var n=s(a(18230)),i=a(85893)},22433:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let t=null;switch(e.theme){case"upper":t=(0,r.jsx)("div",{className:(0,n.default)(i.default.fullWidthShade,i.default.stripHeightShade,i.default.upperShade)},"upper-shade");break;case"lower":t=(0,r.jsx)("div",{className:(0,n.default)(i.default.fullWidthShade,i.default.stripHeightShade,i.default.lowerShade)},"lower-shade");break;case"full-rounded":t=(0,r.jsx)("div",{className:(0,n.default)(i.default.fullWidthShade,i.default.fullHeightShade,i.default.roundedCorners)},"full-rounded-shade");break;case"full-sharp":t=(0,r.jsx)("div",{className:(0,n.default)(i.default.fullWidthShade,i.default.fullHeightShade)},"full-sharp-shade")}return t};var n=s(a(94184)),i=s(a(92825)),r=a(85893)},40875:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.YOUTUBE_VIDEO_DEFAULT_ASPECT_RATIO=t.YOUTUBE_URL_TIME_PARAM_PATTERN=t.YOUTUBE_URL_TIME_PARAM_NAME=t.URL_PATTERNS=t.PiPVideoType=t.PLAYER_TYPE=t.ATTRIBUTION_ICONS=void 0;var n=s(a(69618));const i=a(54302).Mirrored(["FLOATER","OG_FLOATER","MEDIA_VIEWER"]);t.PLAYER_TYPE=i;const r=a(54302).Mirrored(["OG","YOUTUBE","MSG"]);t.PiPVideoType=r;t.YOUTUBE_VIDEO_DEFAULT_ASPECT_RATIO=16/9;t.URL_PATTERNS={ONLINE_VIDEO_URL:{YOUTUBE:[/^https?:\/\/youtu\.be\/(.{11})/,/^https?:\/\/(m\.)?youtube\.com\/watch\?v=(.{11})/,/^https?:\/\/(m\.)?youtube\.com\/shorts\/(.{11})/]}};const o={[n.default.HOSTNAME.YOUTUBE]:"logo-youtube",[n.default.HOSTNAME.YOUTUBE_MOBILE]:"logo-youtube",[n.default.HOSTNAME.YOUTUBE_SHORTENED]:"logo-youtube",[n.default.HOSTNAME.INSTAGRAM]:"logo-instagram",[n.default.HOSTNAME.FACEBOOK]:"logo-facebook",[n.default.HOSTNAME.LASSOVIDEOS]:"logo-lasso"};t.ATTRIBUTION_ICONS=o;t.YOUTUBE_URL_TIME_PARAM_NAME="t";t.YOUTUBE_URL_TIME_PARAM_PATTERN=/^(\d+h)?(\d+m)?(\d+s)?(\d+)?$/},32808:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,l.useModelValues)(e.mediaData,["preview","aspectRatio"]),a=t.preview instanceof o.default?`url(${t.preview.url()})`:void 0;return(0,d.jsx)(i.FloatingVideoPlayer,{aspectRatio:t.aspectRatio,previewUrl:a,animationStartStyle:e.animationStartStyle,bottomContent:e.bottomContent,topContent:e.topContent,enableDragBar:e.enableDragBar,children:(0,d.jsx)(r.WrappedMsgVideoPlayer,{msg:e.msg,mediaData:t,startTime:e.startTime,onClose:e.onClose,onError:e.onError,onOpenMediaViewer:e.onOpenMediaViewer,onMissingMedia:e.onMissingMedia,onUnsupportedMedia:e.onUnsupportedMedia,autoPlay:e.autoPlay,type:n.PLAYER_TYPE.FLOATER,disablePiPControls:e.disablePiPControls,onRefSet:e.onRefSet,onVideoMetadataChange:e.onVideoMetadataChange,onSetFullscreenToggleCallback:e.onSetFullscreenToggleCallback})})};var n=a(40875),i=a(4522),r=a(99875),o=s(a(34949)),l=a(49082),d=a(85893)},84321:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const[t,a]=(0,i.useState)((()=>function(e){const{width:t,height:a}=(0,o.default)(e);return(0,n.isNonZeroNumber)(t)&&(0,n.isNonZeroNumber)(a)?t/a:void 0}(e.ogVideoInfo.previewUrl)));return(0,d.jsx)(r.FloatingVideoPlayer,{aspectRatio:t,previewUrl:e.ogVideoInfo.previewUrl,animationStartStyle:e.animationStartStyle,bottomContent:e.bottomContent,topContent:e.topContent,enableDragBar:e.enableDragBar,children:(0,d.jsx)(l.default,{ogVideoInfo:e.ogVideoInfo,startTime:e.startTime,onClose:e.onClose,onError:e.onError,onAspectRatio:e=>{e&&(null==t||0===t||Math.abs(e-t)>.01)&&a(e)},autoPlay:!0,disablePiPControls:e.disablePiPControls,onRefSet:e.onRefSet,onVideoMetadataChange:e.onVideoMetadataChange,onSetFullscreenToggleCallback:e.onSetFullscreenToggleCallback})})};var n=a(29984),i=a(67294),r=a(4522),o=s(a(79806)),l=s(a(5399)),d=a(85893)},4522:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.FloatingVideoPlayer=function(e){var t;const[a,s]=(0,i.useState)(!1),v=(0,i.useRef)(null);(0,i.useEffect)((()=>()=>clearTimeout(v.current)),[v]);const C=(0,d.default)((()=>{clearTimeout(v.current),s(!0)}),50),S=(0,d.default)((()=>{v.current=setTimeout((()=>{s(!1)}),3e3)}),50),y=null!=e.bottomContent||null!=e.topContent||e.enableDragBar,b=function(e){if(null==e)return 1;switch(!0){case e<p:return p;case e>m:return m;default:return e}}(e.aspectRatio),E=null!==(t=e.initialPiPStyle)&&void 0!==t?t:function(e){const{initialWidth:t,initialHeight:a}=function(e){if(e>1)return{initialWidth:h,initialHeight:h/e};return{initialHeight:h,initialWidth:h*e}}(e),s=function(){var e;let t;return r.Cmd.getConversationHeaderOffset((e=>{t=e})),null!==(e=t)&&void 0!==e?e:{right:window.innerWidth,bottom:0}}(),n=s.right<window.innerWidth?s.right-t-c:window.innerWidth-t-c,i=window.innerHeight-10-a-s.bottom;return{width:t,left:n,bottom:i}}(b),T=145*b,x=f<T?T:f;return(0,u.jsxs)(l.default,{aspectRatio:b,margin:g,minWidth:x,className:(0,n.default)(o.default.videoFloater,{[o.default.redesign]:y}),initialStyle:E,animationStartStyle:e.animationStartStyle,escapeConversationHeader:!0,topContent:e.topContent,bottomContent:e.bottomContent,onMouseEnter:y?C:void 0,onMouseLeave:y?S:void 0,extraContentVisible:a,enableDragBar:e.enableDragBar,children:[(0,u.jsx)(_,{aspectRatio:b,originalAspectRatio:e.aspectRatio,backgroundImage:e.previewUrl}),e.children]})},t.MIN_WIDTH=t.MIN_HEIGHT=t.MIN_ASPECT_RATIO=t.MAX_ASPECT_RATIO=t.MARGIN_Y=t.MARGIN_X=t.LONGER_SIDE_DEFAULT_LENGTH=void 0;var n=s(a(94184)),i=a(67294),r=a(88102),o=s(a(86950)),l=s(a(92218)),d=s(a(81559)),u=a(85893);const c=10;t.MARGIN_X=c;t.MARGIN_Y=10;const h=330;t.LONGER_SIDE_DEFAULT_LENGTH=h;t.MIN_HEIGHT=145;const f=145;t.MIN_WIDTH=f;const p=.4393939393939394;t.MIN_ASPECT_RATIO=p;const m=2.2758620689655173;function _(e){let{aspectRatio:t,originalAspectRatio:a,backgroundImage:s}=e;if(null==a||0===a)return null;if(!(t===p&&t>a||t===m&&t<a))return null;const n=s?(0,u.jsx)("div",{className:o.default.bgImg,style:{backgroundImage:s}}):null;return(0,u.jsx)("div",{className:o.default.bottomLayer,children:n})}t.MAX_ASPECT_RATIO=m;const g={x:c,y:10}},79806:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=document.createElement("img");return t.src=e,{width:t.naturalWidth,height:t.naturalHeight}}},20427:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.isParsableOnlineVideoURL=function(e,t,a){if(!o.GK.supportsFeature(o.GK.F.VIDEO_PLAYBACK_URL))return!1;if(null==t||""===t)return!1;if(!0===a)return!1;if(e===r.ExtendedTextMessagePreviewType.VIDEO){const e=l.URL.withoutWww(l.URL.hostname(t));if(d.has(e))return!0}const s=l.URL.withoutWww(t);return Object.keys(n.URL_PATTERNS.ONLINE_VIDEO_URL).some((e=>{var t;return(null!==(t=n.URL_PATTERNS.ONLINE_VIDEO_URL[e])&&void 0!==t?t:[]).some((e=>e.test(s)))}))},t.isParsableYouTubeVideoUrl=function(e,t,a){if(!o.GK.supportsFeature(o.GK.F.VIDEO_PLAYBACK_URL))return!1;if(null==t||""===t)return!1;if(!0===a)return!1;const s=n.URL_PATTERNS.ONLINE_VIDEO_URL.YOUTUBE,i=l.URL.withoutWww(t);return s.some((e=>e.test(i)))};var n=a(40875),i=s(a(69618)),r=a(24808),o=a(7293),l=a(2541);const d=new Set([i.default.HOSTNAME.INSTAGRAM,i.default.HOSTNAME.STREAMABLE,i.default.HOSTNAME.FACEBOOK,i.default.HOSTNAME.FBWATCH,i.default.HOSTNAME.FBWATCH_ALT,i.default.HOSTNAME.LASSOVIDEOS,i.default.HOSTNAME.LASSO_SHORTENED,i.default.HOSTNAME.SHARECHAT])},99875:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.WrappedMsgVideoPlayer=t.FULLSCREEN_CONTROLS_DISPLAY_TIMEOUT=void 0;var n=a(67294),i=a(88102),r=s(a(20668)),o=s(a(97157)),l=a(58668),d=s(a(19451)),u=s(a(77912)),c=a(55389),h=a(31019),f=a(49082),p=s(a(83800)),m=a(85893);function _(e,t){const{onOpenMediaViewer:a,onOpenVideoFloater:s,onMissingMedia:_,onClose:g,onUnsupportedMedia:v,onNeedPokeMedia:C,onLoadedMetadata:S}=e,y=(0,n.useRef)(null),b=(0,f.useModelValues)(e.msg,["id"]),E=(0,f.useModelValues)(e.mediaData,["mediaStage","preview","streamable"]),T=()=>y.current?y.current.getCurrentTimeFromVideo():0,x=(0,p.default)((()=>{_&&_(),i.Cmd.openModal((0,m.jsx)(r.default,{msg:b})),g()})),M=(0,p.default)((()=>{v&&v(),i.Cmd.openModal((0,m.jsx)(d.default,{msg:b})),g()})),P=(0,p.default)((()=>{C&&C(),i.Cmd.openModal((0,m.jsx)(o.default,{msg:b})),g()})),A=()=>{var e;return null===(e=y.current)||void 0===e?void 0:e.getContainerElement()};return(0,n.useImperativeHandle)(t,(()=>({getContainerElement:A}))),(0,n.useEffect)((()=>{switch(E.mediaStage){case l.MEDIA_DATA_STAGE.ERROR_MISSING:x();break;case l.MEDIA_DATA_STAGE.ERROR_UNSUPPORTED:M();break;case l.MEDIA_DATA_STAGE.NEED_POKE:P()}}),[x,P,M,E.mediaStage]),(0,m.jsx)(c.WrappedSharedVideoPlayer,{ref:y,type:e.type,msgVideoInfo:{msg:b,mediaData:E},startTime:e.startTime,onClose:e.onClose,onVideoEnded:e.onVideoEnded,onError:e.onError,onOpenMediaViewer:()=>{a&&a(),i.Cmd.mediaViewerModal({msg:(0,h.unproxy)(b),currentTime:T()})},onOpenVideoFloater:()=>{s&&s(),u.default.openPiP((0,h.unproxy)(b),T(),null)},onMissingMedia:x,onUnsupportedMedia:M,onLoadedMetadata:e=>{S&&S(e)},onFullscreenToggle:e.onFullscreenToggle,autoPlay:e.autoPlay,overlays:e.overlays,noPip:e.noPip,disablePiPControls:e.disablePiPControls,onRefSet:e.onRefSet,onVideoMetadataChange:e.onVideoMetadataChange,onSetFullscreenToggleCallback:e.onSetFullscreenToggleCallback})}t.FULLSCREEN_CONTROLS_DISPLAY_TIMEOUT=3e3;const g=(0,n.forwardRef)(_);t.WrappedMsgVideoPlayer=g},54987:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(67294),i=s(a(69618)),r=a(99234),o=s(a(34949)),l=s(a(81375)),d=a(49082),u=a(85893);function c(e,t){const{onLoadedMetadata:a}=e,s=(0,d.useModelValues)(e.msg,["id"]),c=(0,d.useModelValues)(e.mediaData,["mediaBlob","streamable","aspectRatio"]),h=(0,n.useRef)(null),f=(0,n.useRef)(Boolean(c.mediaBlob)),p=(0,n.useCallback)((e=>{if(h.current!==e&&(h.current=e,e)){const t=(0,r.getVideoVolumeSettings)();t&&("number"==typeof t.volume&&e.setVolume(t.volume),"boolean"==typeof t.muted&&e.setMuted(t.muted))}}),[]),m=(0,n.useCallback)(((e,t)=>{const s=c.aspectRatio,n=0!==e.videoWidth&&0!==e.videoHeight?e.videoWidth/e.videoHeight:void 0;(!s&&null!=n&&0!==n||s&&null!=n&&0!==n&&Math.abs(n-s)>.01)&&c.set({aspectRatio:n}),a(e,t)}),[c,a]),_=(0,n.useCallback)((()=>{const e=h.current;e&&e.getPaused()&&e.play()}),[]),g=(0,n.useCallback)((()=>{const e=h.current;e&&(e.getPaused()||e.pause())}),[]),v=(0,n.useCallback)((()=>!h.current||h.current.getPaused()),[]),C=(0,n.useCallback)((()=>h.current?h.current.getCurrentTime():0),[]),S=(0,n.useCallback)((e=>{h.current&&h.current.setCurrentTime(e)}),[]),y=(0,n.useCallback)((()=>h.current?h.current.getDuration():0),[]),b=(0,n.useCallback)((()=>h.current?h.current.getVolume():0),[]),E=(0,n.useCallback)((e=>{h.current&&h.current.setVolume(e)}),[]),T=(0,n.useCallback)((()=>!!h.current&&h.current.getMuted()),[]),x=(0,n.useCallback)((e=>{h.current&&h.current.setMuted(e)}),[]);(0,n.useImperativeHandle)(t,(()=>({play:_,pause:g,getPaused:v,getCurrentTime:C,setCurrentTime:S,getDuration:y,getVolume:b,setVolume:E,getMuted:T,setMuted:x})),[C,y,T,v,b,g,_,S,x,E]);const M=c.mediaBlob;let P;const A=c.streamable&&c.isStreamable();return P=(f.current||!A)&&M instanceof o.default?M.url():c.streamable&&c.isStreamable()?`${i.default.VIDEO_STREAM_URL}?key=${s.id.toString()}`:void 0,(0,u.jsx)(l.default,{ref:p,url:P,startTime:e.startTime,poster:e.poster,className:e.className,onVolumeChange:e.onVolumeChange,onEnded:e.onEnded,onError:e.onError,onPause:e.onPause,onPlaying:e.onPlaying,onProgress:e.onProgress,onTimeUpdate:e.onTimeUpdate,onLoadedMetadata:m,autoPlay:e.autoPlay,children:e.children})}var h=(0,n.forwardRef)(c);t.default=h},5399:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.jsx)(n.WrappedSharedVideoPlayer,{type:s.PLAYER_TYPE.OG_FLOATER,ogVideoInfo:e.ogVideoInfo,startTime:e.startTime,onClose:e.onClose,onVideoEnded:e.onVideoEnded,onError:e.onError,onAspectRatio:e.onAspectRatio,autoPlay:e.autoPlay,disablePiPControls:e.disablePiPControls,onRefSet:e.onRefSet,onVideoMetadataChange:e.onVideoMetadataChange,onSetFullscreenToggleCallback:e.onSetFullscreenToggleCallback})};var s=a(40875),n=a(55389),i=a(85893)},77912:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(40875),i=s(a(34342));class r extends i.default{constructor(){super(...arguments),this.openPiP=(e,t,a)=>{var s;null===(s=this.manager)||void 0===s||s.openPiP(n.PiPVideoType.MSG,{msg:e,startTime:t,zoomRect:a,videoSrc:null,preview:null})},this.closePiP=()=>{this.manager&&this.manager.closePiP()},this._pausePiP=()=>{this.manager&&this.manager.pausePiP()},this.openYoutubePiP=(e,t,a,s)=>{var i;null===(i=this.manager)||void 0===i||i.openPiP(n.PiPVideoType.YOUTUBE,{msg:t,startTime:a,zoomRect:s,videoSrc:e,preview:null})},this.openOgVideoPiP=(e,t,a,s,i)=>{var r;null===(r=this.manager)||void 0===r||r.openPiP(n.PiPVideoType.OG,{videoSrc:e,preview:t,msg:a,startTime:s,zoomRect:i})},this.isOpened=e=>{var t,a;return null!==(t=null===(a=this.manager)||void 0===a?void 0:a.isOpened(e))&&void 0!==t&&t}}register(e){this.manager=e}unregister(){this.manager=null}didOpen(e){this.trigger(`${e.id.toString()}_pip_did_open`)}didClose(e){this.trigger(`${e.id.toString()}_pip_did_close`)}didError(e){this.trigger(`${e.id.toString()}_pip_did_error`)}}var o=new r;t.default=o},92298:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.PiPManager=void 0;var n=s(a(81109)),i=a(67294),r=s(a(84819)),o=a(88102),l=a(40875),d=s(a(36022)),u=s(a(88266)),c=s(a(43725)),h=s(a(11339)),f=a(59871),p=s(a(77912)),m=s(a(37640)),_=a(64551),g=a(50452),v=a(19529),C=s(a(41956)),S=a(80010),y=s(a(98397)),b=a(85893);const E={msg:null,startTime:null,zoomRect:null,videoMetadata:null,videoRef:null,isVideoPlaying:!1,videoType:l.PiPVideoType.MSG,previewUrl:null,videoSrc:null},T=new Map;function x(e,t){var a;const[s,d]=(0,i.useState)(E.msg),[u,y]=(0,i.useState)(E.startTime),[x,M]=(0,i.useState)(E.zoomRect),[P,A]=(0,i.useState)(E.videoMetadata),[I,w]=(0,i.useState)(E.videoRef),[k,j]=(0,i.useState)(E.isVideoPlaying),[N,O]=(0,i.useState)(E.videoType),[R,D]=(0,i.useState)(E.previewUrl),[L,B]=(0,i.useState)(E.videoSrc),[F,G]=(0,i.useState)(null),U=e=>{G((()=>e))},V=(e,t)=>{A(e),j(t)},H=()=>{s&&p.default.didClose(s),d(E.msg),y(E.startTime),M(E.zoomRect),A(E.videoMetadata),w(E.videoRef),j(E.isVideoPlaying),O(E.videoType),D(E.previewUrl),B(E.videoSrc)},K=e=>{e.id.equals(null==s?void 0:s.id)&&H()},q=()=>{s&&p.default.didError(s)};(0,v.useListener)(o.Cmd,["media_viewer_modal"],(e=>{K(e.msg)})),(0,v.useListener)(f.MsgCollection,["remove"],(e=>{K(e)})),(0,v.useListener)(null!==(a=null==s?void 0:s.chat.msgs)&&void 0!==a?a:f.MsgCollection,"remove_msgs",(e=>{e.forEach(K)})),(0,v.useListener)(f.MsgCollection,["change:asRevoked"],(e=>{e.asRevoked&&(!e.isSentByMe&&(null==s?void 0:s.id.equals(e.id))&&o.Cmd.openToast((0,b.jsx)(g.Toast,{id:(0,g.genId)(),msg:c.default.t(1040)})),K(e))}));const W={isOpened:e=>{var t;return null!==(t=null==s?void 0:s.id.equals(e.id))&&void 0!==t&&t},pausePiP:()=>{},openPiP:(e,t)=>{s&&p.default.didClose(s),p.default.didOpen(t.msg),e===l.PiPVideoType.MSG&&t.msg.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:h.default.WEBC_RMR_REASON_CODE.PIP,isUserInitiated:!0}),d(t.msg),y(t.startTime),M(t.zoomRect),A(E.videoMetadata),w(E.videoRef),j(E.isVideoPlaying),O(e),D(null!=t.preview?`data:image/jpeg;base64,${t.preview}`:null),B(t.videoSrc)},closePiP:H};(0,i.useImperativeHandle)(t,(()=>W)),(0,i.useEffect)((()=>(p.default.register(W),()=>{p.default.unregister()})),[]);const Y=T.get(N);return(0,b.jsx)(C.default,{transitionName:"pip",className:m.default.playerWrapper,component:"div",children:null!=Y?(0,b.jsx)(Y,(0,n.default)({},(0,n.default)((0,n.default)({msg:s,startTime:u,zoomRect:x,videoMetadata:P,videoRef:I,isVideoPlaying:k,videoType:N,previewUrl:R,videoSrc:L},(()=>{const e=_.ServerProps.webPipRedesign;return e?{enableDragBar:e,bottomContent:null!=P&&null!=I?(0,b.jsx)(S.VideoRefControls,{refVideo:I,videoMetadata:P,isFullscreenMode:!1,isVideoPlaying:k,newPiPStyle:!0,onFullscreenToggle:null!=F?F:void 0}):null,topContent:(0,b.jsx)(r.default,{isFullscreenMode:!1,onClick:H})}:Object.freeze({})})()),{},{animationStartStyle:x?{height:x.bottom-x.top,width:x.right-x.left,left:x.left,bottom:window.innerHeight-x.bottom}:null,onClose:H,onError:q,autoPlay:!0,onRefSet:w,onVideoMetadataChange:V,onSetFullscreenToggleCallback:U}))):null})}T.set(l.PiPVideoType.MSG,d.default),T.set(l.PiPVideoType.YOUTUBE,y.default),T.set(l.PiPVideoType.OG,u.default);const M=(0,i.forwardRef)(x);t.PiPManager=M},36022:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{msg:t}=e,a=(0,n.default)(e,o);if(null==t)return null;return(0,r.jsx)(i.default,{msg:t,mediaData:t.mediaData,animationStartStyle:a.animationStartStyle,startTime:a.startTime,onClose:a.onClose,onError:a.onError,onOpenMediaViewer:a.onClose,onMissingMedia:a.onClose,onUnsupportedMedia:a.onClose,autoPlay:a.autoPlay,enableDragBar:a.enableDragBar,topContent:a.topContent,bottomContent:a.bottomContent,disablePiPControls:a.enableDragBar,onRefSet:a.onRefSet,onVideoMetadataChange:a.onVideoMetadataChange,onSetFullscreenToggleCallback:a.onSetFullscreenToggleCallback})};var n=s(a(6479)),i=s(a(32808)),r=a(85893);const o=["msg"]},88266:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{msg:t,videoSrc:a,previewUrl:s}=e,l=(0,n.default)(e,o);if(null==t||null==a||null==s)return null;return(0,r.jsx)(i.default,{ogVideoInfo:{videoMsg:t,videoUrl:a,previewUrl:s},startTime:l.startTime,onClose:l.onClose,onError:l.onError,animationStartStyle:l.animationStartStyle,autoPlay:l.autoPlay,enableDragBar:l.enableDragBar,topContent:l.topContent,bottomContent:l.bottomContent,disablePiPControls:l.enableDragBar,onRefSet:l.onRefSet,onVideoMetadataChange:l.onVideoMetadataChange,onSetFullscreenToggleCallback:l.onSetFullscreenToggleCallback})};var n=s(a(6479)),i=s(a(84321)),r=a(85893);const o=["msg","videoSrc","previewUrl"]},98397:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{videoSrc:t}=e,a=(0,n.default)(e,d);if(null==t)return null;return(0,l.jsx)(r.FloatingVideoPlayer,{aspectRatio:i.YOUTUBE_VIDEO_DEFAULT_ASPECT_RATIO,animationStartStyle:a.animationStartStyle,enableDragBar:a.enableDragBar,topContent:a.topContent,bottomContent:a.bottomContent,children:(0,l.jsx)(o.default,{youtubeVideoId:t,startTime:a.startTime,onClose:a.onClose,disablePiPControls:a.enableDragBar,onRefSet:a.onRefSet,onVideoMetadataChange:a.onVideoMetadataChange,autoPlay:a.autoPlay,onSetFullscreenToggleCallback:a.onSetFullscreenToggleCallback,exposeIframeInPiP:a.enableDragBar},t)},t)};var n=s(a(6479)),i=a(40875),r=a(4522),o=s(a(48560)),l=a(85893);const d=["videoSrc"]},55389:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.WrappedSharedVideoPlayer=t.FULLSCREEN_CONTROLS_DISPLAY_TIMEOUT=void 0;var i=n(a(81109)),r=n(a(18446)),o=n(a(94184)),l=a(67294),d=n(a(84819)),u=a(40875),c=a(12591),h=n(a(27621)),f=n(a(51582)),p=n(a(43725)),m=n(a(81136)),_=s(a(41124)),g=a(58668),v=n(a(54987)),C=n(a(34949)),S=a(19656),y=n(a(27557)),b=a(64551),E=n(a(22433)),T=n(a(11644)),x=n(a(23217)),M=a(65127),P=n(a(81375)),A=n(a(81559)),I=a(19529),w=n(a(41502)),k=n(a(83800)),j=n(a(41956)),N=a(80010),O=a(85893);function R(e){let{children:t}=e;return(0,O.jsxs)(y.default,{children:[p.default.t(1037),t]})}function D(e,t){const{onFullscreenToggle:a,onSetFullscreenToggleCallback:s,onRefSet:n,startTime:y,onAspectRatio:D,onLoadedMetadata:L,onVideoEnded:B,onError:F,onVideoMetadataChange:G,type:U,ogVideoInfo:V,autoPlay:H,msgVideoInfo:K,onClose:q}=e,W=(0,l.useRef)(null),Y=(0,l.useRef)(null),z=(0,l.useRef)([]),[Q,$]=(0,l.useState)(null),[X,J]=(0,l.useState)(!1),[Z,ee]=(0,l.useState)(!1),[te,ae]=(0,l.useState)(!1),[se,ne]=(0,l.useState)(!1),[ie,re]=(0,l.useState)(h.default.isFullscreenMode),oe=(0,w.default)(Q),le=(0,w.default)(X),de=(0,k.default)((e=>{null==a||a(e)}));(0,l.useEffect)((()=>{de(ie)}),[ie,de]),(0,I.useListener)(h.default,"fullscreen_change",(()=>{h.default.isFullscreenMode&&h.default.fullscreenElement===Y.current?re(!0):h.default.isFullscreenMode||re(!1)}));const ue=(0,A.default)((()=>{ne(!1)}),3e3),ce=e=>{ie?(e=>{e.stopPropagation(),h.default.exitFullscreen()})(e):(e=>{e.stopPropagation(),h.default.requestFullscreen(Y.current)})(e)};(0,l.useEffect)((()=>{null==s||s(ce)}),[]);const he=(0,k.default)((e=>{W.current=e,null!=e&&(null==n||n(e))})),fe=(e,t)=>{const a=null!=y?y:0;$({duration:e.duration,currentTime:a,volume:e.volume,muted:e.muted,bufferedTime:0}),D&&e.videoWidth&&e.videoHeight&&D(e.videoWidth/e.videoHeight),L&&L(t)},pe=(e,t)=>{let a=0;for(let s=0;s<e.length;s++)if(t>=e[s][0]&&t<e[s][1]){a=e[s][1];break}return a},me=e=>{let t=null;if(Q){const a=pe(z.current,e);t=(0,i.default)((0,i.default)({},Q),{},{currentTime:e,bufferedTime:a})}$(t)},_e=e=>{let t=null;Q&&(t=(0,i.default)((0,i.default)({},Q),{},{volume:e.volume,muted:e.muted})),$(t)},ge=()=>{B&&B(),J(!1)},ve=e=>{20!==e?(ee(!0),F&&F()):J(!1)},Ce=()=>{J(!1)},Se=()=>{J(!0)},ye=e=>{if(!Q)return;const t=Q.currentTime,a=pe(e,t),s=(0,i.default)((0,i.default)({},Q),{},{bufferedTime:a});$(s)},be=()=>b.ServerProps.webPipRedesign&&ie,Ee=()=>Y.current;(0,l.useEffect)((()=>{le===X&&(0,r.default)(oe,Q)||null==G||G(Q,X)}),[X,G,le,oe,Q]);const Te=()=>W.current?W.current.getCurrentTime():0,xe=()=>{switch(U){case u.PLAYER_TYPE.FLOATER:case u.PLAYER_TYPE.MEDIA_VIEWER:if(!K)return!1;const e=K.mediaData;return e.mediaStage===g.MEDIA_DATA_STAGE.RESOLVED||e.streamable&&e.isStreamable();case u.PLAYER_TYPE.OG_FLOATER:return!0}return!0};let Me,Pe,Ae;(0,l.useImperativeHandle)(t,(()=>({getContainerElement:Ee,getCurrentTimeFromVideo:Te})));const Ie=xe(),we=be();Ie&&!we&&(Pe=(0,O.jsx)(f.default,{isFullscreenMode:ie,onClick:ce}));const ke=we?null:(0,O.jsx)(d.default,{isFullscreenMode:ie,onClick:t=>{t.stopPropagation(),e.onClose()}});switch(e.type){case u.PLAYER_TYPE.OG_FLOATER:case u.PLAYER_TYPE.FLOATER:Me=(0,O.jsxs)(O.Fragment,{children:[M.UA.isSafari?null:Pe,ke]});break;case u.PLAYER_TYPE.MEDIA_VIEWER:let t;t=ie?ke:!e.noPip&&Ie?(0,O.jsx)(S.PiPButton,{onClick:t=>{t.stopPropagation(),e.onClose&&e.onClose(),e.onOpenVideoFloater&&e.onOpenVideoFloater()},theme:S.PIP_BUTTON_THEME.PLAYER}):null,Me=(0,O.jsxs)(O.Fragment,{children:[Pe,t]}),Ae=e=>{e.stopPropagation(),W.current&&(X?W.current.pause():W.current.play())}}let je;je=ie?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(E.default,{theme:"upper"}),(0,O.jsx)(E.default,{theme:"lower"})]}):e.type===u.PLAYER_TYPE.MEDIA_VIEWER?(0,O.jsx)(E.default,{theme:"full-sharp"}):(0,O.jsx)(E.default,{theme:"full-rounded"});const Ne=Z?(0,O.jsxs)(R,{children:[(()=>{var e,t;if(U!==u.PLAYER_TYPE.OG_FLOATER)return null;if(!V)return null;const a=null!==(e=null===(t=V.videoMsg.ctwaContext)||void 0===t?void 0:t.sourceUrl)&&void 0!==e?e:V.videoMsg.matchedText;return(0,O.jsxs)(c.ExternalLink,{className:T.default.errorLink,href:a,children:[(0,O.jsx)("span",{children:p.default.t(1038)}),(0,O.jsx)(x.default,{directional:!0,display:"inline",name:"chevron-right-text",className:T.default.errorLinkChevron})]})})()," "]}):null,Oe=e.disablePiPControls&&!ie;return(0,O.jsxs)("div",{ref:Y,className:(0,o.default)(T.default.container,{[T.default.fullscreen]:ie}),onMouseEnter:()=>{ae(!0)},onMouseLeave:()=>{ae(!1)},onMouseDown:e=>{ie&&e.stopPropagation()},onMouseMove:()=>{te||ae(!0),se||ne(!0),ue()},onClick:Ae,children:[(0,O.jsx)("div",{className:(0,o.default)(T.default.videoFloaterMedia,{[T.default.fullScreenRedesign]:we}),children:(()=>{switch(U){case u.PLAYER_TYPE.FLOATER:case u.PLAYER_TYPE.MEDIA_VIEWER:return(()=>{if(!K)return null;const{preview:e}=K.mediaData;if(xe()){const t=e instanceof C.default?{backgroundImage:`url(${e.url()})`}:void 0;return(0,O.jsxs)(O.Fragment,{children:[ie||U!==u.PLAYER_TYPE.FLOATER?null:(0,O.jsx)("div",{className:T.default.preview,style:t}),(0,O.jsx)(v.default,{ref:he,msg:K.msg,mediaData:K.mediaData,className:T.default.videoTag,startTime:y,onEnded:ge,onError:ve,onLoadedMetadata:fe,onPause:Ce,onPlaying:Se,onProgress:ye,onTimeUpdate:me,onVolumeChange:_e,autoPlay:H,children:p.default.t(1432)},"floating-media")]})}return e instanceof C.default?(0,O.jsx)("img",{alt:p.default.t(1819),src:e.url(),draggable:"false"},"floating-media"):null})();case u.PLAYER_TYPE.OG_FLOATER:return(()=>{if(!V)return null;const e={backgroundImage:`url(${V.previewUrl})`};return(0,O.jsxs)(O.Fragment,{children:[ie?null:(0,O.jsx)("div",{className:T.default.preview,style:e}),""!==V.videoUrl?(0,O.jsx)(P.default,{ref:he,url:V.videoUrl,startTime:y,onEnded:ge,onError:ve,onLoadedMetadata:fe,onPause:Ce,onPlaying:Se,onProgress:ye,onTimeUpdate:me,onVolumeChange:_e,autoPlay:H,children:p.default.t(1432)},"floating-media"):null]})})()}return null})()}),(()=>{switch(U){case u.PLAYER_TYPE.FLOATER:case u.PLAYER_TYPE.MEDIA_VIEWER:return K?(0,O.jsx)("div",{className:T.default.mediaStageWrapper,children:(0,O.jsx)(m.default,{msg:K.msg,mediaData:K.mediaData})}):null;case u.PLAYER_TYPE.OG_FLOATER:return V&&""===V.videoUrl?(0,O.jsx)("div",{className:T.default.mediaStageWrapper,children:(0,O.jsx)(_.Pending,{})}):null}return null})(),Ne,e.overlays,(0,O.jsx)(j.default,{transitionName:"fade-fast",children:te&&se&&!Oe?(0,O.jsxs)(O.Fragment,{children:[je,(()=>{var e;if(!xe())return null;if(!Q)return null;const t=be();return(0,O.jsx)(N.VideoRefControls,{refVideo:W.current,videoMetadata:Q,isFullscreenMode:ie,isVideoPlaying:X,ctwaSourceUrl:null==V||null===(e=V.videoMsg.ctwaContext)||void 0===e?void 0:e.sourceUrl,newPiPStyle:t,onFullscreenToggle:t?ce:void 0,onClose:t?q:void 0})})(),Me]}):null})]},"elementsWrapped")}t.FULLSCREEN_CONTROLS_DISPLAY_TIMEOUT=3e3;const L=(0,l.forwardRef)(D);t.WrappedSharedVideoPlayer=L},81375:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(78718)),i=s(a(23279)),r=a(67294),o=s(a(96021)),l=a(99234),d=a(84387),u=a(85893);const c=(0,i.default)(((e,t)=>{(0,l.setVideoVolumeSettings)(e,t)}),500);class h extends r.PureComponent{constructor(){super(...arguments),this.videoRef=null,this.setRefVideo=e=>{if(this.videoRef!==e&&(this.videoRef=e,e)){const t=(0,l.getVideoVolumeSettings)();t&&("number"==typeof t.volume&&e.setVolume(t.volume),"boolean"==typeof t.muted&&e.setMuted(t.muted))}},this.onVolumeChange=()=>{const e=this.videoRef;if(e){const t=e.getVolume(),a=e.getMuted();c(t,a),this.props.onVolumeChange({volume:t,muted:a})}},this.onPlaying=()=>{this.props.onPlaying()},this.setStartTime=()=>{this.videoRef&&"number"==typeof this.props.startTime&&this.videoRef.setCurrentTime(this.props.startTime)},this.play=()=>{const e=this.videoRef;e&&e.getPaused()&&e.play()},this.pause=()=>{const e=this.videoRef;e&&(e.getPaused()||e.pause())},this.getPaused=()=>!this.videoRef||this.videoRef.getPaused(),this.onLoadedMetadata=e=>{null!=this.props.startTime&&this.setStartTime();const t=(0,n.default)(e.target,["duration","volume","muted","videoWidth","videoHeight"]);this.props.onLoadedMetadata(t,e)},this.getCurrentTime=()=>this.videoRef?this.videoRef.getCurrentTime():0,this.setCurrentTime=e=>{this.videoRef&&this.videoRef.setCurrentTime(e)},this.getDuration=()=>this.videoRef?this.videoRef.getDuration():0,this.getVolume=()=>this.videoRef?this.videoRef.getVolume():0,this.setVolume=e=>{this.videoRef&&this.videoRef.setVolume(e)},this.getMuted=()=>!!this.videoRef&&this.videoRef.getMuted(),this.setMuted=e=>{this.videoRef&&this.videoRef.setMuted(e)},this.onProgress=()=>{if(!this.videoRef)return;const e=this.videoRef.getBuffered(),t=[];if(e)for(let a=0;a<e.length;a++)t.push([e.start(a),e.end(a)]);this.props.onProgress(t)},this.onTimeUpdate=e=>{const t=e.target.currentTime;this.props.onTimeUpdate(t)},this.onError=e=>{var t,a;const s=(null===(t=this.videoRef)||void 0===t||null===(a=t.refVideo)||void 0===a?void 0:a.error)?this.videoRef.refVideo.error.code:null;null!=s||null==e.code?this.props.onError(s):this.props.onError(e.code)}}componentWillUnmount(){c.flush()}componentDidUpdate(e){e.startTime!==this.props.startTime&&this.setStartTime()}render(){return(0,u.jsx)(o.default,{ref:this.setRefVideo,src:this.props.url,poster:this.props.poster,className:this.props.className,onVolumeChange:this.onVolumeChange,onEnded:this.props.onEnded,onError:this.onError,onPause:this.props.onPause,onPlaying:this.onPlaying,onProgress:this.onProgress,onTimeUpdate:this.onTimeUpdate,onLoadedMetadata:this.onLoadedMetadata,autoPlay:this.props.autoPlay,children:this.props.children})}}h.displayName="UrlVideoTag";const f=(0,d.ListenerHOC)(h);t.default=class extends f{constructor(){super(...arguments),this.play=()=>{this.getComponent().play()},this.pause=()=>{this.getComponent().pause()},this.getPaused=()=>this.getComponent().getPaused(),this.getCurrentTime=()=>this.getComponent().getCurrentTime(),this.setCurrentTime=e=>{this.getComponent().setCurrentTime(e)},this.getDuration=()=>this.getComponent().getDuration(),this.getVolume=()=>this.getComponent().getVolume(),this.setVolume=e=>{this.getComponent().setVolume(e)},this.getMuted=()=>this.getComponent().getMuted(),this.setMuted=e=>{this.getComponent().setMuted(e)}}}},61110:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.VideoControls=t.THUMB_RADIUS_WINDOW=t.THUMB_RADIUS_FULLSCREEN=void 0;var n=s(a(5558)),i=s(a(94184)),r=s(a(48360)),o=a(67294),l=a(22683),d=s(a(84819)),u=s(a(69618)),c=s(a(72930)),h=a(12591),f=s(a(51582)),p=s(a(38932)),m=a(65127),_=a(2541),g=s(a(18840)),v=a(85893);const C=parseFloat(g.default["-thumb-radius-window"].replace(/px$/,""));t.THUMB_RADIUS_WINDOW=C;const S=parseFloat(g.default["-thumb-radius-fullscreen"].replace(/px$/,""));t.THUMB_RADIUS_FULLSCREEN=S;function y(e,t){switch(!0){case t:return"video-volume-muted";case e<.5:return"video-volume-1";case e>=1:return"video-volume"}return"video-volume-2"}class b extends o.PureComponent{constructor(e){super(e),this.handlePause=()=>{this.props.onPause()},this._handlePlay=()=>{this.props.onPlay()},this._isVideoPlayingBeforeDrag=null,this._handleProgressChange=e=>{const t=parseFloat(e.target.value);this.props.onProgressChange(t);const a=Math.abs(this.state.bufferedTime-this.props.duration)<.1?this.state.bufferedTime:0;this.setState({progress:t,bufferedTime:a})},this._handleProgressMouseUp=()=>{this.setState({isDraggingProgress:!1}),null!=this._isVideoPlayingBeforeDrag&&(this._isVideoPlayingBeforeDrag&&this._handlePlay(),this._isVideoPlayingBeforeDrag=null)},this._handleProgressMouseDown=()=>{this.setState({isDraggingProgress:!0}),this._isVideoPlayingBeforeDrag=this.props.isVideoPlaying,this._isVideoPlayingBeforeDrag&&this.handlePause()},this._handleVolumeValueChange=e=>{const t=parseFloat(e.target.value);this.props.onVolumeValueChange(t),this.setState({volume:t})},this._handleMute=()=>{this.props.onMutedValueChange(!0),this.setState({muted:!0})},this._handleUnmute=()=>{this.props.onMutedValueChange(!1),this.setState({muted:!1})},this._stopEventPropagation=e=>{e.stopPropagation()},this._renderTooltip=()=>{const e=this.state.mouseOverProgressRatio;if(void 0===e)return(0,v.jsx)("div",{className:g.default.tooltipWrapper});const t=l.Clock.durationStr(e*this.props.duration);return(0,v.jsx)("div",{className:g.default.tooltipWrapper,style:{left:100*e+"%"},children:(0,v.jsx)("div",{className:(0,i.default)(g.default.tooltipTextBoxGeneral,g.default.tooltipTextBoxPosAndSize),children:t})})},this._renderVolume=()=>{const e=this.state.muted||0===this.state.volume,t=(0,v.jsx)(p.default,{"aria-label":e?r.default._("Unmute",null,{hk:"aQpZx"}):r.default._("Mute",null,{hk:"1C7Sjw"}),name:y(this.state.volume,e),display:"inline",onClick:()=>{e?this._handleUnmute():this._handleMute(),0===this.props.volume&&this.props.onVolumeValueChange(.25)}}),a={width:100*this.state.volume+"%"},s=this.state.isMouseOverVolumeControl&&!this.state.muted,n=(0,v.jsxs)("div",{className:(0,i.default)(g.default.volumeBarContainer,{[g.default.visible]:s}),children:[(0,v.jsx)("div",{className:(0,i.default)(g.default.volumeLowerTrack,{[g.default.lowerTrackLongest]:1===this.state.volume,[g.default.firefoxFix]:m.UA.isGecko}),style:a}),(0,v.jsx)("input",{className:g.default.volumeBar,dir:"ltr",onChange:this._handleVolumeValueChange,type:"range",min:"0",max:1,step:"any",value:this.state.volume})]});return(0,v.jsxs)("div",{className:(0,i.default)(g.default.volumeContainer),onClick:this._stopEventPropagation,onMouseEnter:()=>{this.setState({isMouseOverVolumeControl:!0})},onMouseLeave:()=>{this.setState({isMouseOverVolumeControl:!1}),0!==this.props.volume||this.state.muted||this._handleMute()},onMouseDown:this._stopEventPropagation,children:[t,n]})},this._renderFullscreenToggle=()=>{const{onFullscreenToggle:e}=this.props;return null==e?null:(0,v.jsx)("div",{className:(0,i.default)(g.default.fullscreenBtn),children:(0,v.jsx)(f.default,{isFullscreenMode:this.props.isFullscreenMode,onClick:e,isStatic:!0})})},this._renderCloseButton=()=>{const{onClose:e}=this.props;return null==e?null:(0,v.jsx)("div",{className:(0,i.default)(g.default.closeBtn),children:(0,v.jsx)(d.default,{isFullscreenMode:this.props.isFullscreenMode,onClick:e,isStatic:!0})})},this._renderProgress=()=>{let e=this.state.progress/this.props.duration;e>1&&(e=1);const t=100*e+"%";let a=this.state.bufferedTime/this.props.duration;a>1&&(a=1);const s=100*a+"%";return(0,v.jsxs)("div",{className:(0,i.default)(g.default.progressBarContainer),onClick:this._stopEventPropagation,onMouseDown:this._stopEventPropagation,onMouseEnter:()=>{this.setState({isMouseOverProgressBar:!0})},onMouseLeave:()=>{this.setState({isMouseOverProgressBar:!1,mouseOverProgressRatio:void 0})},onMouseMove:e=>{const t=this.props.isFullscreenMode?S:C,a=e.currentTarget.getBoundingClientRect().left,s=e.pageX,n=e.currentTarget.offsetWidth-2*t;let i=(s-a-t)/n;const r=n*(this.state.progress/this.props.duration),o=Math.abs(s-a-t-r)<=t;i<0?i=o?0:void 0:i>1&&(i=o?1:void 0),this.setState({mouseOverProgressRatio:i})},children:[(0,v.jsx)("input",{"data-testid":"progress",className:g.default.hiddenProgressBar,dir:"ltr",onChange:this._handleProgressChange,onMouseDown:this._handleProgressMouseDown,onMouseUp:this._handleProgressMouseUp,type:"range",min:"0",max:(0,n.default)(this.props.duration,2),step:"any",value:this.state.progress}),(0,v.jsxs)("div",{className:g.default.displayedProgressBar,children:[(0,v.jsx)("div",{className:(0,i.default)(g.default.progressItem,g.default.displayedTrack)}),(0,v.jsx)("div",{className:(0,i.default)(g.default.progressItem,g.default.displayedBuffer,{[g.default.lowerTrackLongest]:1===a}),style:{width:s}}),(0,v.jsx)("div",{className:(0,i.default)(g.default.progressItem,g.default.displayedProgress,{[g.default.lowerTrackLongest]:1===e}),style:{width:t}}),(0,v.jsx)("div",{className:(0,i.default)(g.default.thumb,{[g.default.hideThumb]:!this.state.isMouseOverProgressBar}),style:{left:t}}),this._renderTooltip()]})]})},this.handleCtwaSourceButtonClick=e=>{e.preventDefault(),e.stopPropagation(),this.props.ctwaSourceUrl&&(0,h.openExternalLink)(this.props.ctwaSourceUrl)},this.state={progress:this.props.progress,volume:this.props.volume,muted:this.props.muted,bufferedTime:this.props.bufferedTime,isMouseOverVolumeControl:!1,isMouseOverProgressBar:!1,mouseOverProgressRatio:void 0,isDraggingProgress:!1,prevPropProgress:this.props.progress,prevPropVolume:this.props.volume,prevPropMuted:this.props.muted,prevPropBufferedTime:this.props.bufferedTime}}componentDidMount(){0!==this.props.volume||this.props.muted||this._handleMute()}static getDerivedStateFromProps(e,t){const a={};return t.prevPropProgress===e.progress||t.isDraggingProgress||(a.progress=e.progress,a.prevPropProgress=e.progress),t.prevPropVolume!==e.volume&&(a.volume=e.volume,a.prevPropVolume=e.volume),t.prevPropMuted!==e.muted&&(a.muted=e.muted,a.prevPropMuted=e.muted),t.prevPropBufferedTime!==e.bufferedTime&&(a.bufferedTime=e.bufferedTime,a.prevPropBufferedTime=e.bufferedTime),a}_renderCtwaSourceIcon(){if(!(this.state.isMouseOverVolumeControl&&!this.state.muted)&&this.props.ctwaSourceUrl){const e=_.URL.withoutWww(_.URL.hostname(this.props.ctwaSourceUrl));return(0,v.jsx)(c.default,{isFullscreenMode:this.props.isFullscreenMode,onClick:this.handleCtwaSourceButtonClick,isInstagram:e===u.default.HOSTNAME.INSTAGRAM})}return null}render(){const e=this.props.isFullscreenMode,t=e?(0,v.jsx)("div",{className:(0,i.default)(g.default.timeText,g.default.currentTime),onClick:this._stopEventPropagation,children:l.Clock.durationStr(this.state.progress)}):null,a=e?(0,v.jsx)("div",{className:(0,i.default)(g.default.timeText,g.default.duration),onClick:this._stopEventPropagation,children:l.Clock.durationStr(this.props.duration)}):null,s=this.props.className?this.props.className:g.default.controls,n=this.props.newPiPStyle&&Math.ceil(this.state.progress)>=this.props.duration,o=n?"refresh":"video-play",d=n?r.default._("Replay",null,{hk:"3rMdow"}):r.default._("Play",null,{hk:"4CjEWt"});return(0,v.jsxs)("div",{className:(0,i.default)(s,{[g.default.fullscreen]:e,[g.default.pipContainer]:this.props.newPiPStyle}),children:[(0,v.jsx)("div",{className:g.default.playpauseBtnContainer,onClick:this._stopEventPropagation,onMouseDown:this._stopEventPropagation,onMouseUp:this._stopEventPropagation,children:(0,v.jsx)(p.default,{"aria-label":this.props.isVideoPlaying?r.default._("Pause",null,{hk:"1kvbzt"}):d,name:this.props.isVideoPlaying?"video-pause":o,display:"inline",onClick:this.props.isVideoPlaying?this.handlePause:this._handlePlay})}),this._renderProgress(),this._renderVolume(),t,a,this._renderFullscreenToggle(),this._renderCloseButton(),this._renderCtwaSourceIcon()]})}}t.VideoControls=b,b.displayName="VideoControls"},80010:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VideoRefControls=function(e){const{refVideo:t}=e;if(!e.refVideo)return null;const a=e.videoMetadata;if(!a)return null;return(0,n.jsx)(s.VideoControls,{duration:a.duration,progress:a.currentTime,volume:a.volume,muted:a.muted,bufferedTime:a.bufferedTime,onPlay:()=>{null==t||t.play()},onPause:()=>{null==t||t.pause()},onProgressChange:e.handleSetCurrentTimeByControls?e.handleSetCurrentTimeByControls:e=>{null==t||t.setCurrentTime(e)},onVolumeValueChange:e=>{null==t||t.setVolume(e)},onMutedValueChange:e=>{null==t||t.setMuted(e)},isVideoPlaying:e.isVideoPlaying,isFullscreenMode:e.isFullscreenMode,className:e.controlsClassName,ctwaSourceUrl:e.ctwaSourceUrl,newPiPStyle:e.newPiPStyle,onFullscreenToggle:e.onFullscreenToggle,onClose:e.onClose})};var s=a(61110),n=a(85893)},48560:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onSetFullscreenToggleCallback:t,onRefSet:a,onVideoEnded:s,onError:T,startTime:x,onVideoMetadataChange:M,onClose:P}=e,A=(0,o.useRef)(null),I=(0,o.useRef)(null),w=(0,o.useRef)(null),k=(0,o.useRef)(c.ServerProps.webPipRedesign),j=(0,o.useRef)(null),[N,O]=(0,o.useState)(void 0),[R,D]=(0,o.useState)(!1),[L,B]=(0,o.useState)(!1),[F,G]=(0,o.useState)(!1),[U,V]=(0,o.useState)(!1),[H,K]=(0,o.useState)(!1),q=(0,g.default)(R),W=(0,g.default)(N);(0,_.useListener)(d.default,"fullscreen_change",(()=>{d.default.isFullscreenMode&&d.default.fullscreenElement===A.current?V(!0):d.default.isFullscreenMode||V(!1)}));const Y=e=>{e.stopPropagation(),U?d.default.exitFullscreen():d.default.requestFullscreen(A.current)},z=(0,m.default)((()=>{G(!1)}),f.FULLSCREEN_CONTROLS_DISPLAY_TIMEOUT);(0,o.useEffect)((()=>{null==t||t(Y)}),[]);const Q=(0,v.default)((e=>{I.current=e,null!=e&&(null==a||a(e))})),$=e=>{if(I.current){let t=e;N&&e>=N.duration-1&&N.duration>1&&(t=N.duration-1),I.current.setCurrentTime(t)}};(0,o.useEffect)((()=>{q===R&&(0,i.default)(W,N)||null==M||M(N,R)}),[R,q,M,N,W]);const X=e.exposeIframeInPiP||H||U?null:(0,E.jsx)("div",{className:y.default.blockYoutube}),J=(0,E.jsxs)("div",{className:(0,r.default)(y.default.youtubeContainer,{[y.default.fullscreen]:U}),children:[X,(0,E.jsx)(b.default,{ref:Q,youtubeVideoId:e.youtubeVideoId,startTime:e.startTime,onEnded:()=>{s&&s();const e=I.current;e&&!c.ServerProps.webPipRedesign&&(e.play(),e.pause()),D(!1)},onError:()=>{T&&T()},onLoadedMetadata:e=>{const t=null!=x?x:0;O({duration:e.duration,currentTime:t,volume:e.volume,muted:e.muted,bufferedTime:0})},onPause:()=>{const e=I.current?I.current.getCurrentTime():null;let t=null;N&&null!=e&&(t=(0,n.default)((0,n.default)({},N),{},{currentTime:e})),O(t),D(!1),w.current=!0},onPlaying:()=>{const e=I.current?I.current.getCurrentTime():null;let t=null;N&&null!=e&&(t=(0,n.default)((0,n.default)({},N),{},{currentTime:e})),O(t),D(!0),w.current=!0},onProgress:e=>{const t=e[0][1];let a=null;N&&(a=(0,n.default)((0,n.default)({},N),{},{bufferedTime:t})),O(a)},onTimeUpdate:e=>{if(w.current)return void(w.current=!1);let t=null;N&&(t=(0,n.default)((0,n.default)({},N),{},{currentTime:e})),O(t)},onVolumeChange:e=>{let t=null;N&&(t=(0,n.default)((0,n.default)({},N),{},{volume:e.volume,muted:e.muted})),O(t)},autoPlay:e.autoPlay})]}),Z=!e.disablePiPControls||U?(()=>{let e=null;if(N){const t=k.current,a=j.current,s=(0,r.default)(y.default.strippedVideoControls,y.default.opacityTransition,{[y.default.dimmed]:!F});e=(0,E.jsx)(S.VideoRefControls,{refVideo:I.current,videoMetadata:N,isFullscreenMode:U,isVideoPlaying:R,handleSetCurrentTimeByControls:$,controlsClassName:U?s:void 0,onFullscreenToggle:t?Y:void 0,onClose:t?P:void 0,newPiPStyle:t}),U||(e=(0,E.jsx)("div",{className:y.default.videoControlsWrapper,onMouseDown:e=>{j.current={x:e.clientX,y:e.clientY}},onMouseUp:e=>{const t=e.clientX,s=e.clientY,n=a?a.x:void 0,i=a?a.y:void 0;null!=n&&null!=i&&Math.abs(t-n)+Math.abs(s-i)<4&&K(!0)},children:e}))}return e})():null;let ee;p.UA.isSafari||(ee=(0,E.jsx)(u.default,{isFullscreenMode:U,onClick:Y}));const te=(0,E.jsx)(h.default,{theme:"full-rounded"}),ae=U?(0,E.jsxs)(E.Fragment,{children:[J,Z,k.current?null:(0,E.jsxs)("div",{className:(0,r.default)(y.default.widgetsWrapper,y.default.opacityTransition,{[y.default.dimmed]:!F}),children:[ee,(0,E.jsx)(l.default,{isFullscreenMode:U,onClick:t=>{t.stopPropagation(),e.onClose()}})]})]}):(0,E.jsxs)(E.Fragment,{children:[J,(0,E.jsx)(C.default,{transitionName:"fade-fast",children:L&&F&&!H&&!e.disablePiPControls?(0,E.jsxs)(E.Fragment,{children:[te,Z,ee,(0,E.jsx)(l.default,{isFullscreenMode:U,onClick:t=>{t.stopPropagation(),e.onClose()}})]}):null})]});return(0,E.jsx)("div",{ref:A,className:(0,r.default)(y.default.container,{[y.default.fullscreen]:U,[y.default.redesign]:k.current}),onMouseEnter:()=>{if(H){if(p.UA.isGecko&&L)return;K(!1)}B(!0)},onMouseLeave:()=>{B(!1)},onMouseDown:e=>{U&&e.stopPropagation()},onMouseMove:()=>{L||B(!0),F||G(!0),z()},children:ae},"elementsWrapped")};var n=s(a(81109)),i=s(a(18446)),r=s(a(94184)),o=a(67294),l=s(a(84819)),d=s(a(27621)),u=s(a(51582)),c=a(64551),h=s(a(22433)),f=a(55389),p=a(65127),m=s(a(81559)),_=a(19529),g=s(a(41502)),v=s(a(83800)),C=s(a(41956)),S=a(80010),y=s(a(37326)),b=s(a(42425)),E=a(85893)},42425:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(81109)),i=s(a(82492)),r=s(a(23279)),o=a(67294),l=a(76716),d=s(a(69618)),u=a(99234),c=a(84387),h=a(64551),f=a(38090),p=a(85893);const m=(0,r.default)((e=>{(0,u.setVideoVolumeSetting)(e)}),500),_=(0,r.default)((e=>{(0,u.setVideoMutedSetting)(e)}),500),g=1,v={width:"100%",height:"100%",playerVars:{cc_load_policy:1,iv_load_policy:3,controls:0,playsinline:1,rel:0,modestbranding:0,autoplay:0}};class C extends o.PureComponent{constructor(){super(...arguments),this.updateInterval=null,this.player=null,this.currentTime=0,this.videoLoadedFraction=0,this.getPlayerState=()=>this.player?this.player.getPlayerState():void 0,this.setStartTime=()=>{this.player&&"number"==typeof this.props.startTime&&this.player.seekTo(this.props.startTime,!0)},this.onOtherPlaying=e=>{e!==this&&this.player&&this.player.pauseVideo()},this.onReady=e=>{this.player=e.target;const t=this.player,a=(0,u.getVideoVolumeSettings)();let s,n;a&&("number"==typeof a.volume&&(s=a.volume),"boolean"==typeof a.muted&&(n=a.muted));const i=t.getDuration(),r=null!=s?s:.01*t.getVolume(),o=null!=n?n:t.isMuted(),l=t.getIframe().getBoundingClientRect(),d=l.width,c=l.height;this.videoTagMetadata={duration:i,volume:r,muted:o,videoWidth:d,videoHeight:c},this.props.onLoadedMetadata(this.videoTagMetadata),this.currentTime=t.getCurrentTime(),this.updateInterval=setInterval(this.update,250),null!=this.props.startTime&&this.setStartTime(),null!=s&&this.setVolume(s),null!=n&&this.setMuted(n)},this.update=()=>{const e=this.player;if(e){const t=e.getCurrentTime();t!==this.currentTime&&(this.currentTime=t,this.props.onTimeUpdate(t));const a=e.getVideoLoadedFraction();if(a!==this.videoLoadedFraction){this.videoLoadedFraction=a;const e=this.videoTagMetadata?this.videoTagMetadata.duration*a:0;this.props.onProgress([[0,e]])}const s=this.videoTagMetadata;if(s){const t=.01*e.getVolume(),a=e.isMuted();t===s.volume&&a===s.muted||(this.videoTagMetadata=(0,n.default)((0,n.default)({},s),{},{volume:t,muted:a}),this.props.onVolumeChange({volume:t,muted:a}))}}},this.onPlay=()=>{this._releaseAudioChannelClaim=l.MainAudioChannel.claim(this,(()=>{this.pause()})),this.props.onPlaying()},this.onPause=()=>{var e;null===(e=this._releaseAudioChannelClaim)||void 0===e||e.call(this),this.props.onPause()},this.onEnd=()=>{this.props.onEnded();const e=this.player;e&&!h.ServerProps.webPipRedesign&&(e.playVideo(),e.pauseVideo())},this.onError=()=>{this.props.onError()},this.onStateChange=e=>{e.target.getPlayerState()!==g&&this.props.onPause()},this.play=()=>{this.player&&this.player.playVideo()},this.pause=()=>{this.player&&this.player.pauseVideo()},this.getPaused=()=>!this.player||this.getPlayerState()!==g,this.getCurrentTime=()=>this.player?this.player.getCurrentTime():0,this.setCurrentTime=e=>{this.player&&this.player.seekTo(e,!0)},this.getDuration=()=>this.player?this.player.getDuration():0,this.getVolume=()=>this.player?.01*this.player.getVolume():0,this.setVolume=e=>{this.player&&(this.player.setVolume(100*e),m(e))},this.getMuted=()=>!!this.player&&this.player.isMuted(),this.setMuted=e=>{const t=this.player;t&&(e?t.mute():t.unMute(),_(e))}}componentWillUnmount(){var e;this.player=null,null===(e=this._releaseAudioChannelClaim)||void 0===e||e.call(this),this.updateInterval&&clearInterval(this.updateInterval)}componentDidUpdate(e){e.startTime!==this.props.startTime&&this.setStartTime()}render(){const e=(0,i.default)({},v,{playerVars:{autoplay:this.props.autoPlay?1:0,widget_referrer:d.default.WHATSAPP_ORIGIN,origin:window.location.origin}});return(0,p.jsx)(f.YouTube,{videoId:this.props.youtubeVideoId,opts:e,onReady:this.onReady,onPlay:this.onPlay,onPause:this.onPause,onEnd:this.onEnd,onError:this.onError,onStateChange:this.onStateChange})}}C.displayName="YoutubeVideoTag";const S=(0,c.ListenerHOC)(C);t.default=class extends S{constructor(){super(...arguments),this.play=()=>{this.getComponent().play()},this.pause=()=>{this.getComponent().pause()},this.getPaused=()=>this.getComponent().getPaused(),this.getCurrentTime=()=>this.getComponent().getCurrentTime(),this.setCurrentTime=e=>{this.getComponent().setCurrentTime(e)},this.getDuration=()=>this.getComponent().getDuration(),this.getVolume=()=>this.getComponent().getVolume(),this.setVolume=e=>{this.getComponent().setVolume(e)},this.getMuted=()=>this.getComponent().getMuted(),this.setMuted=e=>{this.getComponent().setMuted(e)}}}},36190:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const[e,t]=(0,n.useState)((()=>u.StatusV3Collection.getUnexpired(!0).some((e=>e.unreadCount>0&&!e.contact.statusMute)))),a=(0,n.useRef)({}),s=()=>{const s=u.StatusV3Collection.getUnexpired(!0).some((e=>{const t=a.current[e.id.toString()],s=!t||e.t>t;return!e.contact.statusMute&&e.unreadCount>0&&s}));s!==e&&t(s)};(0,f.useListener)(o.ContactCollection,r.default.COLLECTION_HAS_SYNCED,s),(0,f.useListener)(u.StatusV3Collection,"add remove change:unreadCount change:t",s);const m=()=>{u.StatusV3Collection.getUnexpired(!0).forEach((e=>{a.current[e.id.toString()]=e.t})),t(!1)},_=e?(0,p.jsx)(h.default,{name:"status-v3-unread",directional:!0}):(0,p.jsx)(h.default,{name:"status-v3"});return(0,p.jsx)(d.MenuBarItem,{a8nText:"menu-bar-status",icon:_,title:l.default.t(1751),onClick:e=>{e.preventDefault(),i.Cmd.openModalMedia((0,p.jsx)(c.StatusV3FlowLoadable,{onFlowEnd:m,removeTopDrawer:!1}),{transition:"status-v3-modal"})}})};var n=a(67294),i=a(88102),r=s(a(69618)),o=a(19380),l=s(a(43725)),d=a(46346),u=a(59387),c=a(78781),h=s(a(23217)),f=a(19529),p=a(85893)},8248:(e,t)=>{"use strict";function a(e,t){return e[t]}Object.defineProperty(t,"__esModule",{value:!0}),t.getFloatFromStylesProp=function(e,t){return parseFloat(a(e,t))},t.getIntFromStylesProp=function(e,t){return parseInt(a(e,t),10)},t.getValueFromStylesProp=a},55228:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{initialStyle:t,children:a}=e,s=(0,n.useMemo)((()=>{if(t)return t;let e;i.Cmd.getConversationHeaderOffset((t=>{e=t}));const a=330*.67;e||(e={right:window.innerWidth,bottom:0});return{width:a,left:e.right<window.innerWidth?e.right-a-10:window.innerWidth-a-10,bottom:window.innerHeight-10-330-e.bottom}}),[t]);return(0,l.jsx)(o.default,{aspectRatio:.67,margin:{x:10,y:10},minWidth:145,className:r.default.voipFloater,initialStyle:s,escapeConversationHeader:!0,children:a})};var n=a(67294),i=a(88102),r=s(a(97881)),o=s(a(92218)),l=a(85893)},54937:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(67294),i=s(a(55228)),r=a(7293),o=a(97048),l=a(84387),d=s(a(41956)),u=s(a(89345)),c=s(a(34999)),h=s(a(11220)),f=a(85893);class p extends n.Component{constructor(){super(...arguments),this.state={isOpen:!1},this.openVoipWindow=()=>{r.GK.supportsFeature(r.GK.F.WEB_VOIP_VOICE_CALL)&&this.setState({isOpen:!0})},this.closeVoipWindow=()=>{this.setState({isOpen:!1})},this.handleCallAccept=()=>{},this.handleCallReject=()=>{this.setState({isOpen:!1})},this.handleCallEnd=()=>{this.setState({isOpen:!1})}}componentDidMount(){u.default.register(this)}componentWillUnmount(){u.default.unregister()}render(){return this.state.isOpen?(0,f.jsx)(d.default,{transitionName:"voip",className:c.default.wrapper,component:"div",children:(0,f.jsx)(i.default,{children:(0,f.jsx)(h.default,{callUi:o.CallUi,onCallAccept:this.handleCallAccept,onCallReject:this.handleCallReject,onCallEnd:this.handleCallEnd})})}):null}}p.displayName="VoipModalManager";var m=(0,l.ListenerHOC)(p);t.default=m},11220:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(67294),i=a(19380),r=a(88984),o=s(a(27621)),l=s(a(51582)),d=s(a(43725)),u=a(84387),c=a(12176),h=s(a(65932)),f=a(84356),p=s(a(30099)),m=a(49835),_=a(85893);class g extends n.PureComponent{constructor(){super(...arguments),this.state={isMouseOver:!1,isFullscreenMode:o.default.isFullscreenMode},this.setRefContainer=e=>{this.refContainer=e},this._toggleMute=()=>{this.props.callUi.muted=!this.props.callUi.muted,f.Voip.mute(this.props.callUi.muted)},this.handleEnterFullscreen=e=>{e.stopPropagation(),o.default.requestFullscreen(this.refContainer)},this.handleExitFullscreen=e=>{e.stopPropagation(),o.default.exitFullscreen()},this.handleFullscreenToggleButtonClick=e=>{this.state.isFullscreenMode?this.handleExitFullscreen(e):this.handleEnterFullscreen(e)},this._onWebrtcStop=()=>{f.Voip.endCall(),this.props.onCallEnd()},this._onWebrtcStart=()=>{const e=this.props.callUi.to,t=this.props.callUi.type;if(!e)throw new Error("Callee is null.");f.Voip.callStart(e,"video"===t)}}componentDidMount(){this.props.listeners.add(o.default,"fullscreen_change",(()=>{o.default.isFullscreenMode&&o.default.fullscreenElement===this.refContainer?this.setState({isFullscreenMode:!0}):o.default.isFullscreenMode||this.setState({isFullscreenMode:!1})})),f.Voip.registerWebRTCCallback((e=>{const t=e.type,a=e.data,s=this.props.callUi.type;switch(t){case m.WEB_CALL_EVENTS.AUDIO_TRACK_RECEIVED:this._refAudioElement&&(this._refAudioElement.srcObject=a);break;case m.WEB_CALL_EVENTS.VIDEO_TRACK_RECEIVED:this._refVideoElement&&"video"===s&&(this._refVideoElement.srcObject=a);break;case m.WEB_CALL_EVENTS.MEDIA_READY:"video"===s&&this._refVideoPreviewElement&&(this._refVideoPreviewElement.srcObject=a);break;default:throw new Error(`VoipWindow:registerWebRTCCallback unsupported webrtc event type: ${t}`)}}))}render(){const{onCallAccept:e,onCallReject:t,onCallEnd:s}=this.props,{state:n,outgoing:o,from:u,to:h,type:f}=this.props.callUi,g=o?h:u,v=i.ContactCollection.get(g||""),C=v?(0,_.jsx)("div",{className:p.default.participantName,children:(0,_.jsx)(c.Name,{contact:v,titlify:!0,ellipsify:!0})}):null,S=v?(0,_.jsx)(r.DetailImage,{id:v.id,size:82,quality:r.DETAIL_IMAGE_QUALITY.HIGH}):null,y=(0,_.jsx)("div",{className:p.default.actionRow,children:(0,_.jsxs)("div",{className:p.default.btnGroup,children:[(0,_.jsx)("button",{className:p.default.btnReject,onClick:t}),(0,_.jsx)("button",{className:p.default.btnAccept,onClick:e})]})}),b=(0,_.jsx)("div",{className:p.default.actionRow,children:(0,_.jsxs)("div",{className:p.default.btnGroup,children:[(0,_.jsx)("button",{className:p.default.btnMute,onClick:this._toggleMute}),(0,_.jsx)("button",{className:p.default.btnEnd,onClick:s})]})});let E,T=(0,_.jsx)("div",{className:p.default.actionRow,children:(0,_.jsx)("div",{className:p.default.btnGroup,children:(0,_.jsx)("button",{className:p.default.btnEnd,onClick:s})})});const x=a(7293).GK;if(x.supportsAnyFeature(x.F.WEB_VOIP_VOICE_CALL,x.F.WEB_VOIP_VIDEO_CALL)){T=(0,_.jsx)("div",{className:p.default.actionRow,children:(0,_.jsxs)("div",{className:p.default.btnGroup,children:[(0,_.jsx)("button",{className:p.default.btnEnd,onClick:this._onWebrtcStop}),(0,_.jsx)("button",{className:p.default.btnAccept,onClick:this._onWebrtcStart})]})});const e=x.supportsFeature(x.F.WEB_VOIP_VIDEO_CALL)&&"video"===f?(0,_.jsx)("video",{className:p.default.webrtcVideo,id:"webRtcVideo",autoPlay:!0,ref:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((e=>{this._refVideoElement=e}))}):null,t=x.supportsFeature(x.F.WEB_VOIP_VIDEO_CALL)&&"video"===f?(0,_.jsx)("video",{className:p.default.webrtcVideoPreview,id:"webRtcVideoPreview",autoPlay:!0,ref:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((e=>{this._refVideoPreviewElement=e}))}):null;E=(0,_.jsxs)("div",{className:p.default.webrtcCanvas,children:[e,t,(0,_.jsx)("audio",{className:p.default.webrtcAudio,id:"webRtcAudio",controls:!0,autoPlay:!0,ref:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((e=>{this._refAudioElement=e}))})]})}let M;switch(n){case m.CALL_STATES.INCOMING_RING:M=y;break;case m.CALL_STATES.ACTIVE:M=b;break;default:M=T}const P=(0,_.jsx)("div",{className:p.default.callTitle,children:"video"===f?d.default.t(1906):d.default.t(1907)}),A=(0,_.jsx)(l.default,{isFullscreenMode:this.state.isFullscreenMode,onClick:this.handleFullscreenToggleButtonClick});return(0,_.jsxs)("div",{className:p.default.body,ref:this.setRefContainer,onMouseEnter:()=>{this.setState({isMouseOver:!0})},onMouseLeave:()=>{this.setState({isMouseOver:!1})},children:[P,C,S,E,this.state.isMouseOver&&A,M]})}}g.CONCERNS={callUi:["state","muted","speaker","outgoing","from","to","type"]},g.displayName="VoipWindowWeb";var v=(0,u.ListenerHOC)((0,h.default)(g,g.CONCERNS));t.default=v},48221:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.AvDevices=void 0;var n=a(42874),i=s(a(19065)),r=a(11290);class o extends r.BaseModel{constructor(){super(...arguments),this.isMicrophoneAvailable=(0,r.prop)(!1),this.isSpeakerAvailable=(0,r.prop)(!1),this.isVideoAvailable=(0,r.prop)(!1)}initialize(){super.initialize()}refreshDeviceList(e){this._deviceList=e,this.isVideoAvailable=i.default.getAvailableDevices(e,n.AVDeviceType.Video).length>0,this.isMicrophoneAvailable=i.default.getAvailableDevices(e,n.AVDeviceType.AudioInput).length>0,this.isSpeakerAvailable=i.default.getAvailableDevices(e,n.AVDeviceType.AudioOutput).length>0}}const l=new((0,r.defineModel)(o));t.AvDevices=l},86761:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(81109)),i=a(11290),r=s(a(52822)),o=a(23412);class l extends i.BaseModel{constructor(){super(...arguments),this.id=(0,i.prop)(),this.products=(0,i.prop)(),this.itemCount=(0,i.prop)(),this.subtotal=(0,i.prop)(),this.tax=(0,i.prop)(),this.total=(0,i.prop)(),this.currency=(0,i.prop)(),this.createdAt=(0,i.prop)(),this.sellerJid=(0,i.prop)(),this.totalItemCount=(0,i.derived)(this._totalItemCount,["products"])}_totalItemCount(){return this.products.reduce(((e,t)=>e+t.quantity),0)}initialize(){super.initialize(),this.orderItemCollection=new o.OrderItemCollection,this.listenTo(this,"change:cartItemCollection",this.triggerItemCollectionUpdate),this.triggerItemCollectionUpdate()}triggerItemCollectionUpdate(){this.orderItemCollection.add(this.products.map((e=>new r.default((0,n.default)({},e)))),{merge:!0})}getCollection(){return a(84312).OrderCollection}}l.Proxy="order";var d=(0,i.defineModel)(l);t.default=d},84312:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.OrderCollectionImpl=t.OrderCollection=void 0;var n=s(a(81109)),i=s(a(48926)),r=a(1255),o=s(a(86761)),l=a(9538),d=a(58021);class u extends r.BaseCollection{constructor(e,t){super(),this.width=80,this.height=80,null!=e&&(this.width=e),null!=t&&(this.height=t)}findOrder(e,t,a){const s=this.get(e);return null!=s?Promise.resolve(s):this._queryOrder(e,t,a)}_queryOrder(e,t,a){var s=()=>super.add,r=this;return(0,i.default)((function*(){const i=yield(0,l.queryOrder)((0,d.createWid)(t),e,r.width,r.height,a);s().call(r,(0,n.default)({id:e,fetchedFromServer:!0,sellerJid:t},i));const o=r.get(e);if(null!=o)return Promise.resolve(o)}))()}}t.OrderCollectionImpl=u,u.model=o.default,u.staleCollection=!0;const c=new u;t.OrderCollection=c},52822:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(11290),i=s(a(2320)),r=a(58668);class o extends n.BaseModel{constructor(){super(...arguments),this.id=(0,n.prop)(),this.price=(0,n.prop)(),this.currency=(0,n.prop)(),this.name=(0,n.prop)(),this.quantity=(0,n.prop)(),this.thumbnailId=(0,n.prop)(),this.thumbnailUrl=(0,n.prop)(),this.mediaData=(0,n.derived)(this._mediaData,["thumbnailUrl"])}_mediaData(){return new i.default({mediaStage:null!=this.thumbnailUrl?r.MEDIA_DATA_STAGE.RESOLVED:r.MEDIA_DATA_STAGE.PREPARING,renderableUrl:null!=this.thumbnailUrl?`${this.thumbnailUrl}`:null})}getCollection(){return a(84312).OrderCollection}}o.Proxy="order-item";var l=(0,n.defineModel)(o);t.default=l},23412:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.OrderItemCollection=void 0;var n=a(1255),i=s(a(52822));class r extends n.BaseCollection{}t.OrderItemCollection=r,r.model=i.default},4641:(e,t,a)=>{"use strict";var s=a(95318);t.Z=function(){!l.GK.supportsFeature(l.GK.F.MD_BACKEND)&&r.Conn.protoVersion&&y.default.clearBPQueue().catch((()=>{}));(0,c.clearAllMemoizeCache)(),(0,f.clearChatIdCorrectionCache)(),r.Conn.delete(),h.default.delete(),_.default.delete(),m.ServerProps.delete(),p.PrimaryFeatures.delete(),C.Stream.delete(),b.default.delete(),y.default.delete(),E(n.ChatCollection),E(g.StatusV3Collection),v.StickerPackCollection.forEach((e=>{E(e.stickers)})),E(v.StickerPackCollection);const e=["Chat","StatusV3","StickerPack","Sticker"];Object.keys(i.default).forEach((t=>{e.includes(t)||E(i.default[t])})),(0,u.delistAndDeleteAllMedia)(),(0,o.clearAllTemporaryStorageData)(),d.MediaBlobCache.clear(),r.Conn.blockStoreAdds=!0};var n=a(69951),i=s(a(97335)),r=a(17239),o=a(99234),l=a(7293),d=a(84866),u=a(88297),c=a(70634),h=s(a(51783)),f=a(61585),p=a(34771),m=a(64551),_=s(a(68132)),g=a(59387),v=a(66299),C=a(8080),S=a(31515),y=s(a(56891)),b=s(a(19037));function E(e){const t=[...e.models];e.reset(),t.forEach((e=>{(0,S.isFunction)(e.delete)&&e.delete()})),e.delete()}},97335:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(32826),i=a(3754),r=a(93581),o=a(31218),l=a(99989),d=a(69951),u=s(a(66034)),c=a(19380),h=s(a(35667)),f=a(66423),p=a(13185),m=s(a(70723)),_=s(a(63928)),g=a(16770),v=a(85865),C=a(59871),S=a(17972),y=a(72472),b=a(84312),E=a(68315),T=a(82039),x=a(99662),M=a(31464),P=a(92671),A=a(91692),I=a(49264),w=s(a(11810)),k=a(19011),j=a(16774),N=a(46133),O=a(59387),R=a(67963),D=a(44333),L=a(45068),B={Blocklist:n.BlocklistCollection,BusinessCategoryResult:i.BusinessCategoriesResultCollection,BusinessProfile:r.BusinessProfileCollection,Call:o.CallCollection,Catalog:l.CatalogCollection,Chat:d.ChatCollection,ChatPreference:u.default,Contact:c.ContactCollection,ConversionTuple:h.default,DailyAggregatedStats:f.DailyAggregatedStatsCollection,EmojiVariant:p.EmojiVariantCollection,GroupMetadata:_.default,Label:g.LabelCollection,LiveLocation:v.LiveLocationCollection,Msg:C.MsgCollection,MsgInfo:S.MsgInfoCollection,Mute:y.MuteCollection,Order:b.OrderCollection,Presence:E.PresenceCollection,ProfilePicThumb:T.ProfilePicThumbCollection,QuickReply:x.QuickReplyCollection,RecentEmoji:P.RecentEmojiCollection,RecentSticker:A.RecentStickerCollection,StarredGifMsg:w.default,StarredMsg:k.AllStarredMsgsCollection,StarredSticker:j.StarredStickerCollection,Status:N.StatusCollection,StatusV3:O.StatusV3Collection,Sticker:R.StickerCollection,StickerSearch:L.StickerSearchCollection,RecentStickerMD:I.RecentStickerCollectionMd,StickerPackCollectionMD:D.StickerPackCollectionMd,FavoriteSticker:m.default,Reactions:M.ReactionsCollection};t.default=B},89265:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(1255),i=a(63183),r=a(69951),o=s(a(42265)),l=a(99234),d=s(a(63928)),u=a(65044);class c extends n.BaseCollection{constructor(e,t){super(),this.stale=!1,this.add(e,{silent:!0}),this.contact=t,this.listenTo(d.default,`group_participant_change_${(0,l.getMaybeMeUser)().toString()}`,this.updateCommonGroups),this.listenTo(d.default,`group_participant_change_${this.contact.toString()}`,this.updateCommonGroups),this.listenTo(u.Socket,"change:stream",(()=>{u.Socket.stream===u.STREAM.DISCONNECTED&&(this.stale=!0)}))}updateCommonGroups(e){const t=d.default.assertGet(e).participants,a=(0,l.getMaybeMeUser)();this.get(e)?t.get(this.contact)&&t.get(a)||this.remove(e):t.get(this.contact)&&t.get(a)&&this.add(r.ChatCollection.assertGet(e))}}t.default=c,c.model=i.Chat,c.comparator=o.default},62632:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getMaybeBizPlatformForLogging=function(e){if(null==e)return i.default.BIZ_PLATFORM.UNKNOWN;const t=n.ContactCollection.get((0,r.createWid)(e));if(null==t||!t.isBusiness)return i.default.BIZ_PLATFORM.UNKNOWN;return t.isEnterprise?i.default.BIZ_PLATFORM.ENT:i.default.BIZ_PLATFORM.SMB};var n=a(19380),i=s(a(11339)),r=a(58021)},67880:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PttDailyCountKind=void 0,t.incrementPttDailyCount=function(e,t){const a=s.DailyAggregatedStatsCollection.gaddForToday();switch(t){case"chat":if(e===n.CANCEL)a.pttCancelIndividual++;else if(e===n.SEND)a.pttSendIndividual++;else if(e===n.RECORD)a.pttRecordIndividual++;else if(e===n.DRAFT_REVIEW)a.pttDraftReviewIndividual++;else if(e===n.PLAYBACK)a.pttPlaybackIndividual++;else if(e===n.FAST_PLAYBACK)a.pttFastplaybackIndividual++;else if(e===n.PAUSED_RECORD)a.pttPausedRecordIndividual++;else if(e===n.STOP_TAP)a.pttStopTapIndividual++;else{if(e!==n.OOC_PLAYBACK)throw new Error(`Invalid count kind ${e}`);a.pttOutOfChatIndividual++}break;case"group":if(e===n.CANCEL)a.pttCancelGroup++;else if(e===n.SEND)a.pttSendGroup++;else if(e===n.RECORD)a.pttRecordGroup++;else if(e===n.DRAFT_REVIEW)a.pttDraftReviewGroup++;else if(e===n.PLAYBACK)a.pttPlaybackGroup++;else if(e===n.FAST_PLAYBACK)a.pttFastplaybackGroup++;else if(e===n.PAUSED_RECORD)a.pttPausedRecordGroup++;else if(e===n.STOP_TAP)a.pttStopTapGroup++;else{if(e!==n.OOC_PLAYBACK)throw new Error(`Invalid count kind ${e}`);a.pttOutOfChatGroup++}break;case"broadcast":if(e===n.CANCEL)a.pttCancelBroadcast++;else if(e===n.SEND)a.pttSendBroadcast++;else if(e===n.RECORD)a.pttRecordBroadcast++;else if(e===n.DRAFT_REVIEW)a.pttDraftReviewBroadcast++;else if(e===n.PLAYBACK)a.pttPlaybackBroadcast++;else if(e===n.FAST_PLAYBACK)a.pttFastplaybackBroadcast++;else if(e===n.PAUSED_RECORD)a.pttPausedRecordBroadcast++;else if(e===n.STOP_TAP)a.pttStopTapBroadcast++;else{if(e!==n.OOC_PLAYBACK)throw new Error(`Invalid count kind ${e}`);a.pttOutOfChatBroadcast++}break;default:throw new Error(`Invalid chat kind ${t}`)}};var s=a(66423);const n=a(54302).Mirrored(["CANCEL","SEND","RECORD","DRAFT_REVIEW","PLAYBACK","FAST_PLAYBACK","PAUSED_RECORD","STOP_TAP","OOC_PLAYBACK"]);t.PttDailyCountKind=n},20472:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(11290);class n extends s.BaseModel{constructor(){super(...arguments),this.id=(0,s.prop)(),this.variant=(0,s.prop)()}}n.Proxy="emojiVariant";var i=(0,s.defineModel)(n);t.default=i},13185:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.EmojiVariantCollectionImpl=t.EmojiVariantCollection=void 0;var n=a(1255),i=s(a(69618)),r=a(70449),o=s(a(20472));class l extends n.BaseCollection{setVariant(e,t){const a=r.EmojiUtil.getSkinToneBase(e);if(!a)throw new Error("attempt to store variantless emoji");this.gadd({id:a,variant:t})}getVariant(e){if(r.EmojiUtil.getSkinToneBase(e)){const t=this.get(e);return t?r.EmojiUtil.normalizeEmoji(t.variant):null}throw new Error("attempt to get variantless emoji")}getVariantIfExists(e){if(r.EmojiUtil.getSkinToneBase(e)){const t=this.get(e);return t?r.EmojiUtil.normalizeEmoji(t.variant):null}return null}}t.EmojiVariantCollectionImpl=l,l.model=o.default,l.cachePolicy={id:i.default.KEY_EMOJI_VARIANT_COLLECTION,policy:n.CACHE_POLICY.LOAD,delay:1e3};const d=new l;t.EmojiVariantCollection=d},84937:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(89385),i=a(50796),r=s(a(70714)),o=a(1255),l=a(69951),d=s(a(11339)),u=a(17304),c=a(59871),h=s(a(84644)),f=a(77591);class p extends o.BaseCollection{constructor(e){super(),this.hasMoreMsgs=!0,this.resultPage=0,this.searchPromise=null,this.searchAbortController=null,this.searchTerm=null,this.searchLabel=null,this.updateFtsAfterMsgLabelUpdate=()=>{if(!this.currentLabelSearch)return;const e=this.filter((e=>!e.labels||!e.labels.includes(this.currentLabelSearch)));this.remove(e,{silent:!0})};const t=e?e.msgs:c.MsgCollection;this.listenTo(t,"remove_msgs",(e=>{this.remove(e,{silent:!0}).filter((e=>!!e)).length&&this.trigger("bulk_remove")})),this.listenTo(l.ChatCollection,"remove",(e=>{const t=[];this.forEach((a=>{a.chat===e&&t.push(a)}));this.remove(t,{silent:!0}).filter((e=>!!e)).length&&this.trigger("bulk_remove")}))}delete(e){e&&this.stopListening(),super.delete()}resetSearch(){var e;this.hasMoreMsgs=!0,this.resultPage=0,this.searchTerm=null,null===(e=this.searchAbortController)||void 0===e||e.abort()}search(e){let{chat:t,count:a,filter:s={},searchTerm:o}=e;const l=`${o}__${s.label||s.kind||""}`;this.currentLabelSearch=s.label;let u=!1;this.searchTerm!==l?(this.searchTerm&&0===o.indexOf(this.searchTerm)?u=!0:(this.searchTerm=l,this.delete()),this.resultPage=0,this.hasMoreMsgs=!0):u=!0;const p=new d.default.UiAction({uiActionType:d.default.UI_ACTION_TYPE.FIRST_FTS_RESULT,uiActionPreloaded:u});if(this.searchPromise){var m;if(this.searchTerm===l)return this.searchPromise;null===(m=this.searchAbortController)||void 0===m||m.abort()}this.searchAbortController=new r.default;const _=this.searchAbortController.signal;let g;return g=t?t.fts(o,++this.resultPage,a):c.MsgCollection.search(o,++this.resultPage,a,void 0,s),this.searchPromise=(0,h.default)(g,_).then((e=>(e.eof&&(this.hasMoreMsgs=!1),this.searchTerm!==l&&this.delete(),this.searchTerm=l,e.messages&&("contact"!==s.kind&&"non_contact"!==s.kind&&"unread"!==s.kind||(e.messages=e.messages.filter((e=>e.chat&&e.chat.matchFilter(s)))),this.add(e.messages.filter((e=>!e.asRevoked)))),p.markUiActionT(),p.commit(),e))).catch((0,i.filteredCatch)(f.WebdDrop,(()=>{}))).catch((0,n.catchAbort)((()=>{}))).finally((()=>{this.searchPromise=null,this.searchAbortController=null,this.trigger("searchPromise_update")})),this.trigger("searchPromise_update"),this.searchPromise}}t.default=p,p.model=u.Msg},45152:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=(0,a(67294).createContext)(null);t.default=s},56989:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.PttPrefsImpl=t.PttPrefs=void 0;var n=s(a(74691)),i=a(57319),r=a(11290),o=a(99234),l=a(64551);const d=[1,1.5,2];class u extends r.BaseModel{constructor(){super(...arguments),this.id=(0,r.prop)(),this.playbackRate=(0,r.prop)(1),this.outOfChatPlayerMessage=(0,r.prop)(null),this.playbackControlMessageId=(0,r.prop)(null),this.isOocPlayerClosedByUser=(0,r.prop)(!1)}closeOocPlayer(){this.isOocPlayerClosedByUser=!0}initialize(){r.BaseModel.prototype.initialize.call(this),this._restorePlaybackRate(),this.listenTo(l.ServerProps,"change:pttPlaybackSpeedEnabled",(()=>{this._restorePlaybackRate()})),this.on("change:playbackRate",((e,t)=>{(0,o.setPttPlaybackRate)(t)}))}setPlayingMessage(e){this._setPlayingMessage(e);let t=()=>{this._playingMessage===e&&this._setPlayingMessage(null)};return()=>{var e;null===(e=t)||void 0===e||e(),t=null}}_setPlayingMessage(e){var t;this._playingMessage=null!=e?e:null,e&&(this.outOfChatPlayerMessage=e,this.isOocPlayerClosedByUser=!1),null!=this._playingMessage?(c.cancel(),this.playbackControlMessageId=null===(t=this._playingMessage)||void 0===t?void 0:t.id.toString()):this._scheduleClearPlaybackRateControl()}_restorePlaybackRate(){this.playbackRate=l.ServerProps.pttPlaybackSpeedEnabled?(0,o.getPttPlaybackRate)():1}advancePlaybackRateFor(e){this._changePlaybackRateFor(e,1,!0)}increasePlaybackRateFor(e){this._changePlaybackRateFor(e,1,!1)}decreasePlaybackRateFor(e){this._changePlaybackRateFor(e,-1,!1)}_changePlaybackRateFor(e,t,a){const s=d.indexOf(this.playbackRate),i=a?(s+t+d.length)%d.length:(0,n.default)(s+t,0,d.length-1);this.playbackRate=d[i],null==this._playingMessage&&(this.playbackControlMessageId=e.toString(),this._scheduleClearPlaybackRateControl())}_scheduleClearPlaybackRateControl(){const{playbackControlMessageId:e}=this;null!=e&&c.onOrAfter(l.ServerProps.pttPlaybackSpeedHideDelay,e)}delayClearPlaybackRateControl(){if(!c.isScheduled())return;const{playbackControlMessageId:e}=this;null!=e&&c.onOrAfter(l.ServerProps.pttPlaybackSpeedHideDelay,e)}clearOutOfChatMessage(e){null!=e&&this.outOfChatPlayerMessage!==e||(this.outOfChatPlayerMessage=null)}}t.PttPrefsImpl=u,u.Proxy="pttPrefs";const c=new i.ShiftTimer((e=>{e===h.playbackControlMessageId&&(h.playbackControlMessageId=null)})),h=new((0,r.defineModel)(u))({id:"1"});t.PttPrefs=h},17830:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{msg:t,uimContext:a}=e;const{interactiveType:s,interactivePayload:c,nativeFlowName:h}=t;if(!c)return null;const f=[];switch(s){case i.default.SHOPS_STOREFRONT:f.push(function(e){let{id:t}=e;return{label:r.default.t(1454),onClick(){null!=t?(0,d.openShopStorefront)(t):(0,u.default)()}}}(c));break;case i.default.NATIVE_FLOW:h===o.default.ORDER_DETAILS?f.push(function(e,t){return{label:e.isSentByMe?n.default._("Order details",null,{hk:"7OMHv"}):r.default.t(1006),onClick(){e.isSentByMe?(0,l.openOrderDetailDrawer)(e,t):(0,u.default)({title:r.default.t(1012),body:r.default.t(1011)})}}}(t,a)):c.buttons&&h!==o.default.ORDER_STATUS&&f.push(...c.buttons.map((e=>{var t;return{label:null!==(t=e.name)&&void 0!==t?t:"",onClick:()=>(0,u.default)()}})))}return f};var n=s(a(48360)),i=s(a(84064)),r=s(a(43725)),o=s(a(5165)),l=a(96866),d=a(50218),u=s(a(56635))},62352:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;switch(e.msg.interactiveType){case i.default.SHOPS_STOREFRONT:return null===(t=(0,n.default)(e))||void 0===t?void 0:t[0];default:return null}};var n=s(a(17830)),i=s(a(84064))},63132:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showForwarded=function(e){const t=(0,s.unproxy)(e);return t.numTimesForwarded>0&&!t.asRevoked};var s=a(31019)},44333:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.StickerPackCollectionMd=t.StickerPackCollection=t.FETCH_STATE=void 0;var n=s(a(48926)),i=a(89385),r=s(a(70714)),o=a(1255),l=a(22683),d=s(a(69618)),u=a(79991),c=s(a(43725)),h=a(32873);const f=a(54302).Mirrored(["INITIAL","PENDING","SUCCESS","ERROR"]);t.FETCH_STATE=f;class p extends o.BaseCollection{constructor(){super(),this.fetchState=f.INITIAL,this.packFetchState=new Map,this._fetchTimestamp=null,this._packFetchTimestamp=new Map,this._abortController=null,this._packAbortController=new Map,this.listenTo(c.default,"locale_change",(()=>this._resetState()))}_resetState(){this._resetStickerPacksFetchState(),this.reset()}_resetStickerPacksFetchState(){var e;null===(e=this._abortController)||void 0===e||e.abort(),this._abortController=null,this._packAbortController.forEach((e=>e.abort())),this._packAbortController.clear(),this._resetFetchState(),this._resetPackFetchState(),this._fetchTimestamp=null,this._packFetchTimestamp.clear()}_setFetchState(e){e!==this.fetchState&&(this.fetchState=e,this.trigger("change:fetchState",e))}_resetFetchState(){this._setFetchState(f.INITIAL)}_setPackFetchState(e,t){t!==this.packFetchState.get(e)&&(this.packFetchState.set(e,t),this.trigger("change:packFetchState",e,t))}_resetPackFetchState(){this.packFetchState.clear(),this.trigger("change:packFetchState")}_resetRange(e,t,a){this._forEachInRange(e,t,((t,s)=>{const n=a[s-e];if(t)if(n)t.id!==n.id||t.imageDataHash===n.imageDataHash&&t.index===n.index?(this.remove(t),this.add(n)):(this.remove(t,{silent:!0}),this.add(n));else{let e=t;for(;e;)this.remove(e),e=this.at(s)}else n&&this.add(n)})),this._resetPackFetchState(),this._packFetchTimestamp.clear()}_forEachInRange(e,t,a){for(let s=e;s<t;s++){a(this.at(s),s)}}fetch(){var e=this;return(0,n.default)((function*(){var t;if(!(e.fetchState===f.PENDING||e.fetchState===f.SUCCESS&&l.Clock.globalUnixTime()-(null!==(t=e._fetchTimestamp)&&void 0!==t?t:0)<d.default.STICKER_PACK_FETCH_TIMEOUT)){e._setFetchState(f.PENDING),e._fetchTimestamp=l.Clock.globalUnixTime(),e._abortController=new r.default;try{const t=yield(0,u.fetchFirstPartyStickerPacks)({signal:e._abortController.signal}),a=Math.max(e.length,t.length);e._resetRange(0,a,t),e._setFetchState(f.SUCCESS)}catch(t){if(e._setFetchState(f.ERROR),t.name===i.ABORT_ERROR)return void __LOG__(2)`First party sticker packs request cancelled`;__LOG__(3,void 0,void 0,!0)`First party sticker packs request failed: error: ${t}`,SEND_LOGS("sticker-packs-fetch-request-failed")}}}))()}fetchStickerPack(e){var t=this;return(0,n.default)((function*(){var a;if(!e)return;if(t.get(e))return;const s=t.packFetchState.get(e),n=null!==(a=t._packFetchTimestamp.get(e))&&void 0!==a?a:0;if(s===f.PENDING||s===f.SUCCESS&&l.Clock.globalUnixTime()-n<d.default.STICKER_PACK_FETCH_TIMEOUT)return;t._setPackFetchState(e,f.PENDING),t._packFetchTimestamp.set(e,l.Clock.globalUnixTime());const o=new r.default;t._packAbortController.set(e,o);try{const a=yield(0,u.fetchFirstPartyStickerPack)({id:e,signal:o.signal});t._setPackFetchState(e,f.SUCCESS),t.add(a)}catch(a){if(t._setPackFetchState(e,f.ERROR),a.name===i.ABORT_ERROR)return void __LOG__(2)`First party sticker pack request cancelled`;__LOG__(3,void 0,void 0,!0)`First party sticker pack request failed: error: ${a}`,SEND_LOGS("sticker-packs-fetch-request-failed")}}))()}delete(){super.delete(),this.stopListening(),this._resetStickerPacksFetchState()}}t.StickerPackCollection=p,p.model=h.StickerPackModel,p.comparator=(e,t)=>e.index<t.index?-1:e.index>t.index?1:0;const m=new p;t.StickerPackCollectionMd=m},32873:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StickerPackModel=t.StickerPack=void 0;var s=a(11290),n=a(63488);class i extends s.BaseModel{constructor(){super(...arguments),this.index=(0,s.prop)(),this.id=(0,s.prop)(),this.name=(0,s.prop)(),this.publisher=(0,s.prop)(),this.description=(0,s.prop)(),this.fileSize=(0,s.prop)(),this.imageDataHash=(0,s.prop)(),this.animated=(0,s.prop)(),this.previewImageIds=(0,s.prop)(),this.trayImageId=(0,s.prop)(),this.trayImagePreview=(0,s.prop)(),this.stickers=(0,s.derived)(this._getStickersCollection,["id"])}_getStickersCollection(){const e=this.id;return this._stickers=this._stickers||new n.StickerPackStickerCollection(e,!0),this._stickers}}t.StickerPack=i,i.Proxy="stickerPackMd";const r=(0,s.defineModel)(i);t.StickerPackModel=r},45068:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.StickerSearchCollectionImpl=t.StickerSearchCollection=void 0;var n=s(a(48926)),i=a(1255),r=(a(57297),a(70449)),o=s(a(61064)),l=a(88577),d=a(89867);const u={HAPPY:["","","","","","","","","",""],LOVE:["","","","","","","","","","","","","","","","","","","","","",""],GREETINGS:["","","","","","","","","","","","","","","","","","","","","",""],SAD:["","","","","","","","","","","","","","","","","",""],ANGRY:["","","","","","",""],CELEBRATE:["","","","",""]};class c extends i.BaseCollection{constructor(){super(...arguments),this._cache=new Map,this._hasFetched=!1,this._isFetching=!0}isFetchingData(){return this._isFetching}hasFetchedData(){return this._hasFetched}setStartFetching(){this._isFetching=!0,this.trigger("start_fetching")}setStopFetching(){this._isFetching=!1,this.trigger("stop_fetching")}search(e){var t=()=>super.delete,a=this;return(0,n.default)((function*(){a._lastQuery!==e&&a._hasFetched&&t().call(a);const s=e.trim().toUpperCase();if(a._cache.has(e)){const t=a._cache.get(e);if(null!=t)return a.add(t),void(a._lastQuery=e);__LOG__(2)`StickerMoodCollection cache was invalid, re-searching.`}const n=[];if(u.hasOwnProperty(s))n.push(...u[s]);else{const i=r.EmojiUtil.containsOnlyEmoji(s)?r.EmojiUtil.splitEmojis(s):(0,o.default)(s);if(null==i||0===i.length)return a._lastQuery=e,a.setStopFetching(),void t().call(a);n.push(...i)}a.setStartFetching();let i=[];try{i=yield(0,l.searchFirstPartyStickers)(n)}catch(e){return __LOG__(3,void 0,void 0,!0)`Sticker search request failed: error: ${e}`,SEND_LOGS("sticker-search-request-failed"),void a.setStopFetching()}a._cache.set(e,i),a._hasFetched=!0,a._lastQuery=e,a.add(i),a.setStopFetching()}))()}searchMood(e){return this.search(e)}delete(){super.delete(),this._cache=new Map,this._hasFetched=!1,this._isFetching=!1}}t.StickerSearchCollectionImpl=c,c.model=d.StickerModel;const h=new c;t.StickerSearchCollection=h},93602:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.canBeGroupedAsAlbum=function(e,t){return(e.isGroupMsg?i.default.equals(e.author,t.author):i.default.equals(e.from,t.from))&&e.isForwarded===t.isForwarded&&t.t-e.t<=n.default.ALBUM_DIFF_INTERVAL},t.canBeGroupedWithNext=function(e,t){if(e.isNotification||t.isNotification)return!1;return e.isGroupMsg?i.default.equals(e.author,t.author)&&e.isSentByMe===t.isSentByMe:i.default.equals(e.from,t.from)};var n=s(a(69618)),i=s(a(39546))},98516:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.animateConversationPanel=function(e,t){return(0,n.default)(e,{scaleX:[1,t]},{duration:300,easing:[.1,.82,.25,1]}),1!==t};var n=s(a(75426))},61661:(e,t,a)=>{"use strict";var s=a(95318);t.Z=function(e){let{cmd:t,untypedData:a,isExternal:s,sessionId:M}=e;const P=s?p.default.DEEP_LINK_OPEN_FROM.DEEP_LINK_EXTERNAL:p.default.DEEP_LINK_OPEN_FROM.DEEP_LINK_WA_LINK_CLICK;switch(t){case c.APICmd.GROUP_INVITE:return r.Cmd.closeStatusViewer(),r.Cmd.openModal((0,x.jsx)(u.default,{groupCode:a.code})),new p.default.DeepLinkOpen({deepLinkOpenFrom:P,deepLinkType:p.default.DEEP_LINK_TYPE.DEEP_LINK_GROUP_INVITE}).commit(),!0;case c.APICmd.CATALOG:{const{catalogOwnerJid:e}=a;return function(e){r.Cmd.openModal((0,x.jsx)(m.OpenChatFlow,{chatId:(0,T.createWid)(e),onSuccess:t=>{window.setTimeout((()=>{(0,d.canViewCollections)()&&C.QPL.markerStart(S.QuickLogMarkerId.WHATSAPP_CATALOG_COLLECTIONS_VIEW,{string:{EntryPoint:"Deeplink"}}),r.Cmd.openDrawerRight((0,x.jsx)(v.ProductDetailsFlowLoadable,{chat:t,catalogOwnerJid:e}),"slide-left",E.UIM.Manager.top,(0,_.buildProductCatalogContext)())}),100)},msgText:null}),{transition:"modal-flow"})}(e),new p.default.DeepLinkOpen({deepLinkOpenFrom:P,deepLinkType:p.default.DEEP_LINK_TYPE.DEEP_LINK_CATALOG}).commit(),!0}case c.APICmd.PRODUCT:{const{businessOwnerJid:e,productId:t}=a;return function(e,t){const a=(0,_.buildProductCatalogContext)(new g.ProductCatalogSession,(0,o.getMaybeBizPlatformForLogging)(e),p.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_DEEPLINK);(0,h.logProductDeepLinkOpen)({catalogOwnerJid:e,catalogContext:a}),r.Cmd.openModal((0,x.jsx)(m.OpenChatFlow,{chatId:(0,T.createWid)(e),onSuccess:s=>{window.setTimeout((()=>{(0,f.qplStartProductView)("Deeplink"),r.Cmd.openDrawerRight((0,x.jsx)(v.ProductDetailsFlowLoadable,{chat:s,productInfo:{productId:t,businessOwnerJid:e},refreshCarousel:!0}),"slide-left",E.UIM.Manager.top,a)}),100)},msgText:null}),{transition:"modal-flow"})}(e,t),new p.default.DeepLinkOpen({deepLinkOpenFrom:P,deepLinkType:p.default.DEEP_LINK_TYPE.DEEP_LINK_PRODUCT}).commit(),!0}case c.APICmd.MSG_SEND:r.Cmd.closeStatusViewer();const e=a,{text:t,phone:s,conversionTuple:A}=e,I=b.ServerProps.ctwaContextCompose?e.ctwaContextLinkData:void 0;if(s){const e=null!=M?{sessionId:M}:void 0;r.Cmd.openModal((0,x.jsx)(m.OpenChatFlow,{chatId:(0,T.createWid)(s),msgText:t,onSuccess:e=>{A&&l.default.add((0,n.default)((0,n.default)({},A),{},{id:e.id,timestamp:i.Clock.globalUnixTime()}),{merge:!0}),t&&(e.urlText=!0),e.urlNumber=!0},ctwaContextLinkData:I,sendLogAttributes:e}),{transition:"modal-flow"}),new p.default.DeepLinkOpen({deepLinkOpenFrom:P,deepLinkType:I?p.default.DEEP_LINK_TYPE.DEEP_LINK_CTWA:p.default.DEEP_LINK_TYPE.DEEP_LINK_CHAT,deepLinkSessionId:M}).commit()}else r.Cmd.openModal((0,x.jsx)(y.SendMsgMultiFlowLoadable,{msgText:t,urlText:!0}),{transition:"modal-flow"}),new p.default.DeepLinkOpen({deepLinkOpenFrom:P,deepLinkType:p.default.DEEP_LINK_TYPE.DEEP_LINK_MSG_FORWARD}).commit();return!0;default:return!1}};var n=s(a(81109)),i=a(22683),r=a(88102),o=a(62632),l=s(a(35667)),d=a(57701),u=s(a(19861)),c=a(88711),h=a(77975),f=a(82145),p=s(a(11339)),m=a(61585),_=a(97567),g=a(9153),v=a(67455),C=a(48870),S=a(27798),y=a(15303),b=a(64551),E=a(89618),T=a(58021),x=a(85893)},90154:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.AudioPlaybackController=void 0;var n=s(a(54595)),i=a(30734),r=a(26705),o=a(56989);const l="playing",d="timeupdate",u="ended";t.AudioPlaybackController=class{constructor(e){this._handleMarkPlayed=()=>{(0,i.canMarkPlayed)(this._msg.unsafe())&&(0,i.markPlayed)(this._msg.unsafe())},this._handlePlaybackProgress=()=>{this._msg.updateLastPlaybackProgress((0,n.default)(this.audio,this._msg.mediaData))},this._handlePlayingMessage=()=>{this._clearPlayingMessage=o.PttPrefs.setPlayingMessage(this._msg)},this._handleEnded=()=>{var e;null===(e=this._clearPlayingMessage)||void 0===e||e.call(this),this._clearPlayingMessage=null,this.audio.currentTime=0},this.audio=e.audio,this.pttPlaybackLogger=new r.PttPlaybackLogger(e.msg,e.audio),this._msg=e.msg,this.audio.addEventListener(l,this._handlePlayingMessage),this.audio.addEventListener(u,this._handleEnded),"ptt"===this._msg.type&&this.audio.addEventListener(l,this._handleMarkPlayed),this.audio.addEventListener(d,this._handlePlaybackProgress)}dispose(){var e;"ptt"===this._msg.type&&this.audio.removeEventListener(l,this._handleMarkPlayed),this.audio.removeEventListener(d,this._handlePlaybackProgress),this.audio.removeEventListener(l,this._handlePlayingMessage),this.audio.removeEventListener(u,this._handleEnded),this.pttPlaybackLogger.dispose(),null===(e=this._clearPlayingMessage)||void 0===e||e.call(this)}}},54595:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const{currentTime:a}=e,s=t?(0,i.getDurationFromAudioOrProtobuf)(e,t):(0,r.default)(e);return null==s||0===s?0:(0,n.default)(a/s,0,1)};var n=s(a(74691)),i=a(52134),r=s(a(39749))},52134:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getDurationFromAudioOrProtobuf=function(e,t){var a;return null!==(a=(0,n.default)(e))&&void 0!==a?a:i(t)},t.getDurationFromProto=i;var n=s(a(39749));function i(e){const t=parseFloat(e.duration);return Number.isFinite(t)?t:0}},39749:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=e.duration;return Number.isFinite(t)?t:null}},95271:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{currentMsg:t,nextMsg:a,playedBefore:s}=e;return a.type===n.default.MSG_TYPE.PTT&&(!a.isSentByMe||(!!t.isSentByMe||Boolean(s)))};var n=s(a(69618))},97098:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(45095)),i=s(a(41143)),r=a(76716),o=a(97278),l=a(90154),d=a(52134),u=a(84866),c=(a(26705),a(64551));function h(e){let t=!1;return()=>{(0,i.default)(!t,"Dispose cannot be called more than once for the same audio"),t=!0,e()}}var f=new class{constructor(){this._msgIdToAudioEntry=new Map}_createResource(e,t){const{mediaData:a}=e,s=o.AudioManager.createAudioProxy(),i=r.MainAudioChannel.registerMedia(s),h=function(e){let{filehash:t}=e;if(!u.MediaBlobCache.has(t))return null;const a=u.MediaBlobCache.getOrCreateURL(t);return u.MediaBlobCache.increaseUsageCount(t),{url:a,dispose:()=>u.MediaBlobCache.decreaseUsageCount(t)}}(a);if(h){s.src=h.url;const t=(0,d.getDurationFromAudioOrProtobuf)(s,e.mediaData);c.ServerProps.pttRememberPlayPosition&&null!=e.lastPlaybackProgress&&null!=t&&(s.currentTime=t*e.lastPlaybackProgress)}const f=new l.AudioPlaybackController({msg:e,audio:s});return{playbackController:f,refCount:1,dispose:()=>{const e=(0,n.default)(this._msgIdToAudioEntry.get(t),"this._msgIdToAudioEntry.get(key)");e.refCount--,0===e.refCount&&(i(),this._msgIdToAudioEntry.delete(t),null==h||h.dispose(),f.dispose())}}}acquireAudio(e){const t=function(e){return e.id.id}(e);let a=this._msgIdToAudioEntry.get(t);a?a.refCount++:(a=this._createResource(e,t),this._msgIdToAudioEntry.set(t,a));const{playbackController:s,dispose:n}=a;return{audio:s.audio,pttPlaybackLogger:s.pttPlaybackLogger,dispose:h(n)}}};t.default=f},26705:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.PttPlaybackLogger=void 0;var n=s(a(54595)),i=a(52134),r=s(a(11339)),o=a(59871),l=a(67880),d=a(56989);t.PttPlaybackLogger=class{constructor(e,t){this._pttPlaybackSpeedCnt=0,this._pttSeekCnt=0,this._pttPlayedPct=0,this._hasStartedPlayback=!1,this._pttPlayedOutOfChat=!1,this._pttMiniPlayerPauseCnt=0,this._pttMiniPlayerClose=!1,this._pttMiniPlayerClick=0,this._handlePlaying=()=>{this._hasStartedPlayback=!0},this._handleRateChange=()=>{this._audio.playbackRate!==this._currentPlaybackRate&&(this._currentPlaybackRate=this._audio.playbackRate,this._pttPlaybackSpeedCnt+=1)},this._handleTimeupdate=()=>{const e=(0,n.default)(this._audio);this._pttPlayedPct=Math.max(e,this._pttPlayedPct)},this._msg=e,this._audio=t,this._currentPlaybackRate=this._audio.playbackRate,this._audio.addEventListener("playing",this._handlePlaying),this._audio.addEventListener("ratechange",this._handleRateChange),this._audio.addEventListener("timeupdate",this._handleTimeupdate)}dispose(){this._audio.removeEventListener("playing",this._handlePlaying),this._audio.removeEventListener("ratechange",this._handleRateChange),this._audio.removeEventListener("timeupdate",this._handleTimeupdate)}_reset(){this._pttPlaybackSpeedCnt=0,this._pttSeekCnt=0,this._pttPlayedPct=0,this._hasStartedPlayback=!1,this._pttPlayedOutOfChat=!1,this._pttMiniPlayerPauseCnt=0,this._pttMiniPlayerClose=!1,this._pttMiniPlayerClick=0}commit(e){var t;let{isSequentialPlayback:a,success:s}=e;if(!this._hasStartedPlayback)return;if("ptt"!==this._msg.type)return;const{playbackRate:n}=d.PttPrefs,{mediaData:u}=this._msg,c=new r.default.PttPlayback({pttSeekCnt:0,pttPlaybackSpeedCnt:0,pttTrigger:a?r.default.PTT_TRIGGER_TYPE.SEQUENTIAL:r.default.PTT_TRIGGER_TYPE.MANUAL});c.pttPlaybackFailed=!s,c.pttType=function(e){switch(null==e?void 0:e.split(";")[0]){case"audio/ogg":return r.default.PTT_STREAM_TYPE.OPUS;case"audio/aac":return r.default.PTT_STREAM_TYPE.AAC;case"audio/mpeg":return r.default.PTT_STREAM_TYPE.MP3;case"audio/amr-wb":return r.default.PTT_STREAM_TYPE.AMR_WB;case"audio/amr":case"audio/3gpp2":return r.default.PTT_STREAM_TYPE.AMR_NB;case"audio/3gpp":default:return r.default.PTT_STREAM_TYPE.UNKNOWN}}(u.mimetype),c.pttPlaybackSpeed=function(e){switch(e){case 1:return r.default.PTT_PLAYBACK_SPEED_TYPE.SPEED_1;case 1.5:return r.default.PTT_PLAYBACK_SPEED_TYPE.SPEED_1_5;case 2:return r.default.PTT_PLAYBACK_SPEED_TYPE.SPEED_2;default:throw new Error(`Invalid playback rate: ${e}`)}}(n);const h=(0,i.getDurationFromAudioOrProtobuf)(this._audio,u);c.pttDuration=1e3*Math.round(h),c.pttPlaybackSpeedCnt=this._pttPlaybackSpeedCnt,c.pttSeekCnt=this._pttSeekCnt,c.pttPlayedPct=this._pttPlayedPct,c.pttPlayedOutOfChat=this._pttPlayedOutOfChat,c.pttMiniPlayerPauseCnt=this._pttMiniPlayerPauseCnt,c.pttMiniPlayerClose=this._pttMiniPlayerClose,c.pttMiniPlayerClick=this._pttMiniPlayerClick,c.commit(),this._reset();const f=this._msg.id,p=null==f?null:null===(t=o.MsgCollection.get(f))||void 0===t?void 0:t.chat.kind;null!=p&&((0,l.incrementPttDailyCount)(l.PttDailyCountKind.PLAYBACK,p),n>1&&(0,l.incrementPttDailyCount)(l.PttDailyCountKind.FAST_PLAYBACK,p))}increasePttSeekCount(){this._pttSeekCnt+=1}markAsPlayedInOoc(){this._pttPlayedOutOfChat=!0}increaseOocPauseCount(){this._pttMiniPlayerPauseCnt+=1}markAsOocClosedByUser(){this._pttMiniPlayerClose=!0}increaseOocClickToChatCount(){this._pttMiniPlayerClick+=1}}},5551:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.useMsgAudioPlaybackController=function(e){const t=()=>null==e?null:i.default.acquireAudio(e),[a,s]=(0,n.useState)(t),[o,l]=(0,n.useState)(e);o!==e&&(l(e),null==a||a.dispose(),s(t()));return(0,r.default)((()=>{null==a||a.dispose()})),a};var n=a(67294),i=s(a(97098)),r=s(a(84215))},42262:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getBizPrivacyInfoString=function(e){switch(e){case i.WebMessageInfoBizPrivacyStatus.E2EE:return n.default._("This message was secured with end-to-end encryption.",null,{hk:"23E1FN"});case i.WebMessageInfoBizPrivacyStatus.BSP:return n.default._("This business worked with other companies to manage this message.",null,{hk:"1COrne"});case i.WebMessageInfoBizPrivacyStatus.BSP_AND_FB:case i.WebMessageInfoBizPrivacyStatus.FB:return n.default._("This business used a secure service from the Facebook company to manage this message.",null,{hk:"3qtygA"})}};var n=s(a(48360)),i=a(21224)},71599:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.SingleCollectionDataSource=t.CollectionsDataSource=t.CollectionsContentDataSource=t.CatalogWithCollectionsDataSource=t.CatalogListItemScrollHelper=void 0,t.getProductStatsInFetched=function(e,t,a){const s=i.CatalogCollection.get(e);let n,r;if(!s)return;if(!t&&a){const e=s.productCollection.get(a.id);return n=e&&s.productCollection.indexOf(e),{productIndex:(0,u.isNumber)(n)&&n>-1?n.toString():void 0}}if(t){const e=t&&s.collections.get(t);r=e&&s.collections.indexOf(e);const i=a&&(null==e?void 0:e.productCollection.get(a.id));n=i&&(null==e?void 0:e.productCollection.indexOf(i))}return{collectionIndex:(0,u.isNumber)(r)&&r>-1?r.toString():void 0,productIndex:(0,u.isNumber)(n)&&n>-1?n.toString():void 0}};var n=s(a(48926)),i=a(99989),r=s(a(69618)),o=a(99234),l=a(48870),d=a(27798),u=a(31515);function c(){return h.apply(this,arguments)}function h(){return(h=(0,n.default)((function*(e,t){const a=e.getData().length||0,s=!e.getCanLoadMore()||!f(a,e.listItemHeight),n=(0,o.getMaybeMeUser)();if(t&&l.QPL.markerAnnotate(t,{bool:{IsCached:s,IsConsumer:!n.equals(e.catalog.id)}}),s)return!0;yield e.loadMore(!0);return!f(e.getData().length||0,e.listItemHeight)||e.loadInitialItems()}))).apply(this,arguments)}t.SingleCollectionDataSource=class{constructor(e,t,a,s){var n;(this.loading=null,this.catalog=e,this.collectionId=t,this.forCatalogManager=a,this.listItemHeight=s,t)?this.canLoadMoreCollectionItems=!(e.collections.length>0)||""!==(null===(n=this.catalog.collections.get(t))||void 0===n?void 0:n.afterCursor):this.canLoadMoreAllItems=!(e.productCollection.length>0)||!!this.catalog.afterCursor}loadMore(e){if(this.loading)return this.loading;if(!this.getCanLoadMore())return Promise.resolve();const t=this.collectionId;if(t){const a=e?d.QuickLogMarkerId.WHATSAPP_COLLECTION_VIEW_ALL:void 0;this.loading=this.catalog.collections.findCollectionProducts(this.catalog.id,t,!1,a).then((()=>{var e;this.canLoadMoreCollectionItems=!!(null===(e=this.catalog.collections.get(t))||void 0===e?void 0:e.afterCursor),this.loading=null}))}else this.loading=i.CatalogCollection.update(this.catalog.id).then((()=>{this.canLoadMoreAllItems=!!this.catalog.afterCursor,this.loading=null}));return this.loading}loadInitialItems(){return c(this,d.QuickLogMarkerId.WHATSAPP_COLLECTION_VIEW_ALL)}getCanLoadMore(){return this.canLoadMoreCollectionItems||this.canLoadMoreAllItems}getData(){const e=this.collectionId;let t;var a;e?t=(null===(a=this.catalog.collections.get(e))||void 0===a?void 0:a.productCollection.getProductModels(this.forCatalogManager))||[]:t=this.catalog.productCollection.getProductModels(this.forCatalogManager)||[];return t.map((e=>({product:e,collection:void 0})))}};t.CatalogWithCollectionsDataSource=class{constructor(e,t,a,s){this.loading=null,this.catalog=e,this.forCatalogManager=t,this.listItemHeight=a,this.canLoadMoreCollections=!(e.collections.length>0)||!!this.catalog.collections.afterCursor,this.canLoadMoreCatalog=!(e.productCollection.length>0)||!!this.catalog.afterCursor,this.canLogQpl=s}loadMore(e){if(this.loading)return this.loading;if(!this.getCanLoadMore())return Promise.resolve();if(this.canLoadMoreCollections){const t=this.canLogQpl&&!0===e?d.QuickLogMarkerId.WHATSAPP_CATALOG_COLLECTIONS_VIEW:void 0;this.loading=this.catalog.collections.findCollectionsList(this.catalog.id,3,this.forCatalogManager,t).then((()=>{this.canLoadMoreCollections=!!this.catalog.collections.afterCursor,this.loading=null}))}else this.loading=i.CatalogCollection.update(this.catalog.id).then((()=>{this.canLoadMoreCatalog=!!this.catalog.afterCursor,this.loading=null}));return this.loading}loadInitialItems(){return c(this,this.canLogQpl?d.QuickLogMarkerId.WHATSAPP_CATALOG_COLLECTIONS_VIEW:void 0)}getCanLoadMore(){return this.canLoadMoreCollections||this.canLoadMoreCatalog}getData(){var e=this;const t=this.catalog.collections.getCollectionModels(this.forCatalogManager),a=t.length>0,s=t.reduce((function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0;t.push({collection:a,product:void 0});const s=a.productCollection.getProductModels(e.forCatalogManager)||[];return s.length>3&&(s.length=3),t.push(...s.map((e=>({product:e,collection:a})))),t}),[]);if(this.canLoadMoreCollections)return s;a&&s.push({allItems:{totalItemsCount:s.length}});const n=this.catalog.productCollection.getProductModels(this.forCatalogManager).map((e=>({product:e,collection:void 0})));return s.push(...n),s}};t.CollectionsDataSource=class{constructor(e,t,a,s){this.loading=null,this.canLoadMoreCollections=!0,this.catalog=e,this.forCatalogManager=t,this.listItemHeight=a,this.canLogQpl=s}loadMore(e){if(this.loading)return this.loading;if(!this.getCanLoadMore())return Promise.resolve();if(this.canLoadMoreCollections){const t=this.canLogQpl&&!0===e?d.QuickLogMarkerId.WHATSAPP_COLLECTIONS_MANAGEMENT_VIEW:void 0;this.loading=this.catalog.collections.findCollectionsList(this.catalog.id,3,this.forCatalogManager,t).then((()=>{this.canLoadMoreCollections=!!this.catalog.collections.afterCursor,this.loading=null}))}return this.loading||Promise.resolve()}loadInitialItems(){return c(this,this.canLogQpl?d.QuickLogMarkerId.WHATSAPP_COLLECTIONS_MANAGEMENT_VIEW:void 0)}getCanLoadMore(){return this.canLoadMoreCollections}getData(){return this.catalog.collections.getCollectionModels(this.forCatalogManager).map((e=>({collection:e,product:void 0})))}};function f(e,t){return e*t<window.innerHeight}t.CollectionsContentDataSource=class{constructor(e,t,a){this.loading=null,this.canLoadMore=!0,this.catalog=e,this.catalog.stale=!0,this.catalog.markProductCollectionOld(),this.catalog.productCollection.reset(),this.listItemHeight=t,this.collectionId=a}loadMore(){return this.loading?this.loading:this.getCanLoadMore()?(this.canLoadMore&&(this.collectionId?this.loading=i.CatalogCollection.findCollectionMembership(this.catalog.id,this.collectionId).then((()=>{this.canLoadMore=!!this.catalog.afterCursor,this.loading=null})):this.loading=i.CatalogCollection.update(this.catalog.id).then((()=>{this.canLoadMore=!!this.catalog.afterCursor,this.loading=null}))),this.loading||Promise.resolve()):Promise.resolve()}loadInitialItems(){return c(this)}getCanLoadMore(){return this.canLoadMore}getData(){return this.catalog.productCollection.getProductModels(!0).map((e=>({product:e,collection:void 0})))}};t.CatalogListItemScrollHelper=class{constructor(e){this.dataSource=e}isScrollAtBottom(e){return e.scrollTop+r.default.SCROLL_FUDGE>=e.scrollHeight-e.clientHeight}willLoadMore(e){return Boolean(this.dataSource.loading||this.isScrollAtBottom(e))}onScroll(e,t){var a=this;return(0,n.default)((function*(){return a.dataSource.loading?(yield a.dataSource.loading,!0):!!a.isScrollAtBottom(t)&&(yield a.dataSource.loadMore(),!0)}))()}}},32621:(e,t,a)=>{"use strict";var s=a(95318),n=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.formatInteractive=function(e){var t,a;let{formatAsSearchResult:s=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;if(e.interactiveType===r.default.SHOPS_STOREFRONT)return e.caption||(null===(n=e.interactiveHeader)||void 0===n?void 0:n.title)||"";if(e.nativeFlowName===o.default.ORDER_DETAILS){const t=d(e);if(null!=t)return t}return[null===(t=e.interactiveHeader)||void 0===t?void 0:t.title,s?null===(a=e.interactiveHeader)||void 0===a?void 0:a.subtitle:null,e.caption,e.footer].filter(Boolean).join("\n")},t.formatOrderDetailsMessagePreview=d;var i=n(a(74764)),r=s(a(84064)),o=s(a(5165)),l=a(34841);function d(e){const t=(0,l.getOrderInfo)(e);if(null==t)return null;const{items:a,totalAmount:s,currency:n}=t,r=i.formatAmount(n,s);return a[0].name+"  "+r}},90657:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getProductOrCatalogLinkPreview=function(){return g.apply(this,arguments)};var n=s(a(48926)),i=s(a(48360)),r=a(99989),o=a(19380),l=a(74764),d=a(24808),u=a(99234),c=s(a(75888)),h=s(a(43725)),f=a(56406),p=s(a(39546)),m=a(58021);const _=100;function g(){return(g=(0,n.default)((function*(e,t,a){var s,n,g,v;if(!p.default.isWid(t))return null;const C=(0,m.createWid)(t);let S;try{S=yield r.CatalogCollection.find(C)}catch(e){return null}const y=a?S.productCollection.get(a):S.productCollection.getProductModels().find((e=>"APPROVED"===e.reviewStatus&&!e.isHidden));if(null==y||"APPROVED"!==y.reviewStatus||y.isHidden)return null;const b=y.getPreviewImage();let E,T,x,M;if(b&&([E]=yield(0,f.getResizedThumbData)(b.mediaUrl,[{width:_,height:_,imageFormat:"image/jpeg",imageFormatOptions:.75}])),null===(s=(0,u.getMaybeMeUser)())||void 0===s?void 0:s.equals(C)){const e=o.ContactCollection.get(C);if(null==e)return null;T=e.displayName}else{var P;T=null===(P=(yield(0,c.default)(C)).bizInfo)||void 0===P?void 0:P.verifiedName.name}a?(x=h.default.t(285,{productName:y.name,catalogOwnerName:T}),y.description&&null!=y.priceAmount1000&&y.currency?M=`${y.description}  ${(0,l.formatAmount1000)(y.currency,y.priceAmount1000)}`:y.description?M=y.description:null!=y.priceAmount1000&&y.currency&&(M=(0,l.formatAmount1000)(y.currency,y.priceAmount1000))):(x=h.default.t(284,{catalogOwnerName:T}),M=i.default._("Learn more about their products & services",null,{hk:"W8MSB"}));return{url:e,data:{title:x,description:M||void 0,canonicalUrl:e,matchedText:e,richPreviewType:d.ExtendedTextMessagePreviewType.NONE,thumbnail:null===(n=E)||void 0===n?void 0:n.dataUrl,thumbnailHeight:null===(g=E)||void 0===g?void 0:g.height,thumbnailWidth:null===(v=E)||void 0===v?void 0:v.width,doNotPlayInline:!0}}}))).apply(this,arguments)}},55631:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.logShopsManagementEvent=function(e,t){const{shouldLogJid:a=!0,isShopsProductPreviewVisible:s}=null!=t?t:{};new r.default.WaShopsManagement({shopsManagementAction:e,shopsSellerJid:a?o():void 0,isShopsProductPreviewVisible:s}).commit()};var n=a(17239),i=a(99234),r=s(a(11339));function o(){const e=n.Conn.isSMB?(0,i.getMaybeMeUser)():void 0;return null==e?void 0:e.user}},72781:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){if(!e)return;let s=[];s.push(e);for(;s.length;){const e=s.shift();if(a(e))return e;s=s.concat(t(e))}}},47620:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(69618));const i=window.matchMedia(`\nonly screen and (max-width: ${n.default.LAYOUT_2COLUMNS_MAX_WIDTH}px)\n`),r={column:i.matches?2:3};i.addListener((function(e){const t=e.matches?2:3;if(r.column===t)return;r.column=t;const a=document.createEvent("Event");a.initEvent("columnChange",!0,!0),window.dispatchEvent(a)}));var o=r;t.default=o},77365:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=new class{init(){}get(){return{textsize:0}}set(){}};t.default=a},67911:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.copyImageToClipboard=function(e){if(!r())throw new Error("Clipboard API not supported");if("image/png"===e.type){const t=new window.ClipboardItem({"image/png":e});navigator.clipboard.write([t])}else{const t=new Image;t.onload=e=>{let{target:t}=e;const a=document.createElement("canvas"),s=a.getContext("2d");a.width=t.naturalWidth,a.height=t.naturalHeight,s.drawImage(t,0,0),a.toBlob((e=>{const t=new window.ClipboardItem({[e.type]:e});try{navigator.clipboard.write([t])}catch(e){__LOG__(2,void 0,void 0,!0)`Write image to clipboard failed`,SEND_LOGS(e)}}),"image/png",1)},t.src=URL.createObjectURL(e)}},t.supportsCopyImageToClipboard=r;var n=s(a(69618)),i=a(65127);function r(){return"clipboard"in navigator&&"ClipboardItem"in window&&i.UA.browser!==n.default.BROWSER_TYPE.SAFARI}},82628:(e,t)=>{"use strict";t.Y=function(){}},36090:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const a=3988292384,s=4294967295;let n;function i(e,t){let s=t;for(n||(n=function(){const e=new Uint32Array(256);for(let t=0,s=0,n=0;t<256;s=++t){for(n=0;n<8;++n)s=1&s?s>>>1^a:s>>>1;e[t]=s}return e}());e.size();)s=n[255&(s^e.readUint8())]^s>>>8;return~s>>>0}t.default=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s;return e.peek(i,t)}},74764:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.currencyForCountryShortcode=function(e){const t=i.REGION_TO_CURRENCY[e.toUpperCase()];return(null==t?void 0:t.length)>0?t[0]:i.DEFAULT_CURRENCY},t.formatAmount1000=t.formatAmount=void 0,t.formatAmount1000ToParts=function(e,t){const a=d(),s=h(a),n=f(a,e),i=c(e,t).replace(n,"").trim(),r=i.indexOf(s),o=-1===r?i:i.substring(0,r),l=-1===r?"":i.substring(r);return{symbol:n,integer:o,decimal:l}},t.formatLocalSymbol=function(e){return f(o[e],e)},t.isSupportedCurrency=function(e){return l.has(e)},t.parseValueFromString=m,t.validatePriceString=function(e,t,a,s){const n=d(),r=void 0!==i.CURRENCY_DIGITS[e]?i.CURRENCY_DIGITS[e]:i.DEFAULT_DIGITS,o=p(e,t);if(null!=a&&o<a)return!1;if(null!=s&&o>s)return!1;const l=t.replace(/\D+$/g,""),u=h(n);if(Number.isNaN(o)||l!==t||(t.split(u)[1]||"").length>r)return!1;return!0},t.valueFromString=p;var n=s(a(81109)),i=a(96630),r=s(a(43725));const o={IDR:"in-ID",MXN:"es-MX",INR:"en-IN"},l=new Set(["DZD","ARS","AUD","BDT","BOB","BRL","GBP","CAD","CLP","CNY","COP","CRC","CZK","DKK","EGP","EUR","GTQ","HNL","HKD","HUF","ISK","INR","IDR","ILS","JPY","KES","KRW","MOP","MYR","MXN","NZD","NIO","NGN","NOK","PKR","PYG","PEN","PHP","PLN","QAR","RON","RUB","SAR","SGD","ZAR","SEK","CHF","TWD","THB","TRY","AED","USD","UYU","VEF","VND"]),d=()=>[r.default.getFullLocale(),r.default.getLocale()].filter(Boolean),u=function(e,t,a){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d();return new Intl.NumberFormat(s,(0,n.default)({style:"currency",currency:e},a)).format(t)};t.formatAmount=u;const c=(e,t,a,s)=>u(e,t/1e3,a,s);function h(e){return new Intl.NumberFormat(e).format(1.1).substring(1,2)}function f(e,t){return c(t,0,{},e).replace(/\d+([,.]\d+)?/g,"").trim()}function p(e,t){const a=d(),s=f(a,e),n=function(e){return new Intl.NumberFormat(e).format(1e4).substring(2,3)}(a);return m(t,s,h(a),n)}function m(e,t,a,s){const n=e.replace(t,"").trim().split(s).join(""),i=parseFloat(n.replace(a,".")||"0");return Math.round(1e3*i)}t.formatAmount1000=c},96630:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.REGION_TO_CURRENCY=t.MAX_FRACTION_DIGITS=t.DEFAULT_DIGITS=t.DEFAULT_CURRENCY=t.CURRENCY_DIGITS=void 0;t.DEFAULT_CURRENCY="USD";t.MAX_FRACTION_DIGITS=4;t.DEFAULT_DIGITS=2;t.CURRENCY_DIGITS={ADP:0,AFN:0,ALL:0,BHD:3,BIF:0,BYR:0,CLF:4,CLP:0,DJF:0,ESP:0,GNF:0,IQD:0,IRR:0,ISK:0,ITL:0,JOD:3,JPY:0,KMF:0,KPW:0,KRW:0,KWD:3,LAK:0,LBP:0,LUF:0,LYD:3,MGA:0,MGF:0,MMK:0,MRO:0,OMR:3,PYG:0,RSD:0,RWF:0,SLL:0,SOS:0,STD:0,SYP:0,TMM:0,TND:3,TRL:0,UGX:0,UYI:0,UYW:4,VND:0,VUV:0,XAF:0,XOF:0,XPF:0,YER:0,ZMK:0,ZWD:0};t.REGION_TO_CURRENCY={AC:["SHP"],AD:["EUR"],AE:["AED"],AF:["AFN"],AG:["XCD"],AI:["XCD"],AL:["ALL"],AM:["AMD"],AO:["AOA"],AR:["ARS"],AS:["USD"],AT:["EUR"],AU:["AUD"],AW:["AWG"],AX:["EUR"],AZ:["AZN"],BA:["BAM"],BB:["BBD"],BD:["BDT"],BE:["EUR"],BF:["XOF"],BG:["BGN"],BH:["BHD"],BI:["BIF"],BJ:["XOF"],BL:["EUR"],BM:["BMD"],BN:["BND"],BO:["BOB"],BQ:["USD"],BR:["BRL"],BS:["BSD"],BT:["BTN","INR"],BV:["NOK"],BW:["BWP"],BY:["BYN"],BZ:["BZD"],CA:["CAD"],CC:["AUD"],CD:["CDF"],CF:["XAF"],CG:["XAF"],CH:["CHF"],CI:["XOF"],CK:["NZD"],CL:["CLP"],CM:["XAF"],CN:["CNY"],CO:["COP"],CR:["CRC"],CU:["CUP","CUC"],CV:["CVE"],CW:["ANG"],CX:["AUD"],CY:["EUR"],CZ:["CZK"],DE:["EUR"],DG:["USD"],DJ:["DJF"],DK:["DKK"],DM:["XCD"],DO:["DOP"],DZ:["DZD"],EA:["EUR"],EC:["USD"],EE:["EUR"],EG:["EGP"],EH:["MAD"],ER:["ERN"],ES:["EUR"],ET:["ETB"],EU:["EUR"],FI:["EUR"],FJ:["FJD"],FK:["FKP"],FM:["USD"],FO:["DKK"],FR:["EUR"],GA:["XAF"],GB:["GBP"],GD:["XCD"],GE:["GEL"],GF:["EUR"],GG:["GBP"],GH:["GHS"],GI:["GIP"],GL:["DKK"],GM:["GMD"],GN:["GNF"],GP:["EUR"],GQ:["XAF"],GR:["EUR"],GS:["GBP"],GT:["GTQ"],GU:["USD"],GW:["XOF"],GY:["GYD"],HK:["HKD"],HM:["AUD"],HN:["HNL"],HR:["HRK"],HT:["HTG","USD"],HU:["HUF"],IC:["EUR"],ID:["IDR"],IE:["EUR"],IL:["ILS"],IM:["GBP"],IN:["INR"],IO:["USD"],IQ:["IQD"],IR:["IRR"],IS:["ISK"],IT:["EUR"],JE:["GBP"],JM:["JMD"],JO:["JOD"],JP:["JPY"],KE:["KES"],KG:["KGS"],KH:["KHR"],KI:["AUD"],KM:["KMF"],KN:["XCD"],KP:["KPW"],KR:["KRW"],KW:["KWD"],KY:["KYD"],KZ:["KZT"],LA:["LAK"],LB:["LBP"],LC:["XCD"],LI:["CHF"],LK:["LKR"],LR:["LRD"],LS:["ZAR","LSL"],LT:["EUR"],LU:["EUR"],LV:["EUR"],LY:["LYD"],MA:["MAD"],MC:["EUR"],MD:["MDL"],ME:["EUR"],MF:["EUR"],MG:["MGA"],MH:["USD"],MK:["MKD"],ML:["XOF"],MM:["MMK"],MN:["MNT"],MO:["MOP"],MP:["USD"],MQ:["EUR"],MR:["MRU"],MS:["XCD"],MT:["EUR"],MU:["MUR"],MV:["MVR"],MW:["MWK"],MX:["MXN"],MY:["MYR"],MZ:["MZN"],NA:["NAD","ZAR"],NC:["XPF"],NE:["XOF"],NF:["AUD"],NG:["NGN"],NI:["NIO"],NL:["EUR"],NO:["NOK"],NP:["NPR"],NR:["AUD"],NU:["NZD"],NZ:["NZD"],OM:["OMR"],PA:["PAB","USD"],PE:["PEN"],PF:["XPF"],PG:["PGK"],PH:["PHP"],PK:["PKR"],PL:["PLN"],PM:["EUR"],PN:["NZD"],PR:["USD"],PS:["ILS","JOD"],PT:["EUR"],PW:["USD"],PY:["PYG"],QA:["QAR"],RE:["EUR"],RO:["RON"],RS:["RSD"],RU:["RUB"],RW:["RWF"],SA:["SAR"],SB:["SBD"],SC:["SCR"],SD:["SDG"],SE:["SEK"],SG:["SGD"],SH:["SHP"],SI:["EUR"],SJ:["NOK"],SK:["EUR"],SL:["SLL"],SM:["EUR"],SN:["XOF"],SO:["SOS"],SR:["SRD"],SS:["SSP"],ST:["STN"],SV:["USD"],SX:["ANG"],SY:["SYP"],SZ:["SZL"],TA:["GBP"],TC:["USD"],TD:["XAF"],TF:["EUR"],TG:["XOF"],TH:["THB"],TJ:["TJS"],TK:["NZD"],TL:["USD"],TM:["TMT"],TN:["TND"],TO:["TOP"],TR:["TRY"],TT:["TTD"],TV:["AUD"],TW:["TWD"],TZ:["TZS"],UA:["UAH"],UG:["UGX"],UM:["USD"],US:["USD"],UY:["UYU"],UZ:["UZS"],VA:["EUR"],VC:["XCD"],VE:["VES"],VG:["USD"],VI:["USD"],VN:["VND"],VU:["VUV"],WF:["XPF"],WS:["WST"],XK:["EUR"],YE:["YER"],YT:["EUR"],ZA:["ZAR"],ZM:["ZMW"],ZW:["USD"]}},56792:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(48926));const i=/\r\n/g;t.default=class{constructor(e){this.hasText=()=>this.hasType("text/plain"),this.hasType=e=>this.types.includes(e),this.data=e,this.types=e.types?Array.isArray(e.types)?e.types:Object.keys(e.types).map((t=>e.types[t])):[]}getItems(){if(this.data.items)return Array.prototype.slice.call(this.data.items);const e=this._getFileTypes();return this.types.map((t=>({type:t,data:this.data.getData(t),kind:e.includes(t)?"string":"file"})))}_getFileTypes(){return Array.prototype.slice.call(this.data.files).map((e=>{let{type:t}=e;return t}))}getText(e){var t=this;return(0,n.default)((function*(){const a=yield t._getText(e);return a?a.replace(i,"\n"):null}))()}_getText(e){var t=this;return(0,n.default)((function*(){const a=e||[];0===a.length&&a.push("text/plain");const{data:s}=t;if(s.getData){let e;return a.some((t=>{if(s.getData(t))return e=s.getData(t),!0})),Promise.resolve(e)}const n=function(e,t){const a=Array.from(e);return t.reduce(((e,t)=>{const s=a.find((e=>e.type===t));return s&&e.push(s),e}),[])}(t.data.items,a);if(!n.length)return;const i=Promise.all(n.map((e=>new Promise((t=>e.getAsString(t))))));return(yield i).find((e=>e.length))}))()}getFiles(){return this.data.items?Array.prototype.slice.call(this.data.items).filter((e=>{let{kind:t}=e;return"file"===t})).map((e=>e.getAsFile())).filter((e=>!!e)):Array.prototype.slice.call(this.data.files||[])}getData(e){return this.data.getData(e)}hasFiles(){return this.data.items?Array.prototype.slice.call(this.data.items).some((e=>{let{kind:t}=e;return"file"===t})):!!Array.prototype.slice.call(this.data.files||[]).length}}},50532:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=e.startOfDaySkew;if(void 0!==t&&t>i.Clock.skew-30&&t<i.Clock.skew+30)return e.startOfDay;return e.startOfDaySkew=i.Clock.skew,e.startOfDay=n.default.unix(e.t+i.Clock.skew).startOf("day").unix()};var n=s(a(30381)),i=a(22683)},32303:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sanitizeNoticeSVG=function(e){return n.default.sanitize(e,{USE_PROFILES:{svg:!0,svgFilters:!0}})},t.sanitizeNoticeText=function(e){return n.default.sanitize(e,{ALLOWED_TAGS:["b","i","a","#text"],ALLOWED_ATTR:["href"],KEEP_CONTENT:!1})},t.scrollAt=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=o(t||e.offsetParent),n=a.pos||"center",i=null!=a.duration&&0!==a.duration?a.duration:1e3,l=a.offset||0;switch(n){case"top":return s.scrollTop=e.offsetTop+l,Promise.resolve();case"bottom":return s.scrollTop=e.offsetTop+e.clientHeight-s.clientHeight,Promise.resolve();case"center":return a.animate?((0,r.default)(e,"stop"),(0,r.default)(s,"stop"),(0,r.default)(e,"scroll",{duration:i,container:s,offset:(e.clientHeight-s.clientHeight)/2,easing:a.easing})):(s.scrollTop=e.offsetTop+e.clientHeight/2-s.clientHeight/2,Promise.resolve());case"offset":return a.animate?((0,r.default)(e,"stop"),(0,r.default)(s,"stop"),(0,r.default)(e,"scroll",{duration:i,container:s,offset:-l,easing:a.easing})):(s.scrollTop=e.offsetTop-l,Promise.resolve())}return Promise.resolve()},t.scrollIntoView=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2?arguments[2]:void 0;const s=o(a||e.parentNode),n=window.getComputedStyle(s,null),i=parseInt(n.getPropertyValue("border-top-width"),10),r=e.offsetTop-s.offsetTop<s.scrollTop,l=e.offsetTop-s.offsetTop+e.clientHeight-i>s.scrollTop+s.clientHeight;t?s.scrollTop=e.offsetTop-s.offsetTop-s.clientHeight/2-i+e.clientHeight/2:e.scrollIntoView(r&&!l);return!(r||l)},t.scrollIntoViewIfNeeded=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2?arguments[2]:void 0;if(e.scrollIntoViewIfNeeded&&(0,i.isFunction)(e.scrollIntoViewIfNeeded))return e.scrollIntoViewIfNeeded(t);const s=o(a||e.parentNode),n=window.getComputedStyle(s,null),r=parseInt(n.getPropertyValue("border-top-width"),10),l=e.offsetTop-s.offsetTop<s.scrollTop,d=e.offsetTop-s.offsetTop+e.clientHeight-r>s.scrollTop+s.clientHeight;(l||d)&&t&&(s.scrollTop=e.offsetTop-s.offsetTop-s.clientHeight/2-r+e.clientHeight/2);!l&&!d||t||e.scrollIntoView(l&&!d);return!(l||d)};var n=s(a(77482)),i=a(31515),r=s(a(75426));function o(e){if(e&&e instanceof HTMLElement)return e;throw new Error("utils:DOM parent not defined or is not a valid HTMLElement")}},27621:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(34342));const i={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5},r=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror"],o=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror"],l=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","msfullscreenchange","msfullscreenerror"];let d,u;class c extends n.default{constructor(){if(super(),this.requestFullscreen=e=>{e?d?e[d[i.requestFullscreen]]():__LOG__(3)`Your browser does not support fullscreen API.`:__LOG__(3)`The element requesting fullscreen is null or undefined.`},this._fullscreenChangeTrigger=e=>{this.trigger("fullscreen_change",e)},this._fullscreenErrorTrigger=e=>{this.trigger("fullscreen_error",e)},"object"!=typeof window||"object"!=typeof window.document)return void __LOG__(3)`document object does not exist`;u=window.document;const e=u;if("fullscreenEnabled"in u?d=Object.keys(i):r[i.fullscreenEnabled]in u?d=r:o[i.fullscreenEnabled]in u?d=o:l[i.fullscreenEnabled]in u&&(d=l),!d)return void __LOG__(3)`Your browser does not support fullscreen API.`;const t=d;e.addEventListener(t[i.fullscreenchange],this._fullscreenChangeTrigger),e.addEventListener(t[i.fullscreenerror],this._fullscreenErrorTrigger)}get exitFullscreen(){return u?d?u[d[i.exitFullscreen]].bind(u):(__LOG__(3)`Your browser does not support fullscreen API.`,()=>{}):(__LOG__(3)`document object does not exist`,()=>{})}get isFullscreenMode(){return u?d?!!u[d[i.fullscreenElement]]:(__LOG__(3)`Your browser does not support fullscreen API.`,!1):(__LOG__(3)`document object does not exist`,!1)}get fullscreenEnabled(){return u?d?Boolean(u[d[i.fullscreenEnabled]]):(__LOG__(3)`Your browser does not support fullscreen API.`,!1):(__LOG__(3)`document object does not exist`,!1)}get fullscreenElement(){if(u){if(d)return u[d[i.fullscreenElement]];__LOG__(3)`Your browser does not support fullscreen API.`}else __LOG__(3)`document object does not exist`}}var h=new c;t.default=h},29447:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const a=t.parentNode;if(!a)return;if(t.nextSibling)return void a.insertBefore(e,t.nextSibling);return a.appendChild(e),e}},96377:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(!t.parentNode)return;return t.parentNode.insertBefore(e,t),e}},2673:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(!e)return!1;const a=e.parentElement;if(!a)return!1;const s=t>=0?t:a.childNodes.length+t;return e===a.childNodes[s]}},56244:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return!!e&&(e.nodeType===Node.TEXT_NODE&&0===e.textContent.length)}},68590:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e.parentNode)return;e.parentNode.removeChild(e)}},11825:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e)return!1;const t=window.getSelection();if(1!==t.rangeCount)return!1;const a=t.getRangeAt(0);if(!a.collapsed)return!1;const s=a.endContainer;if(a.startOffset!==function(e){return(0,n.default)(e)?e.textContent.length:e.childNodes.length}(s))return!1;if(e===s)return!0;if(!e.contains(s))return!1;let i=s;do{if(i.nextSibling)return!1;i=i.parentNode}while(i!==e);return!0};var n=s(a(6589))},17307:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e)return!1;const t=window.getSelection();if(1!==t.rangeCount)return!1;const a=t.getRangeAt(0);if(!a.collapsed||0!==a.startOffset)return!1;const s=a.startContainer;if(e===s)return!0;if(!e.contains(s))return!1;let n=s;do{if(n.previousSibling)return!1;n=n.parentNode}while(n!==e);return!0}},594:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const e=window.getSelection();if(1!==e.rangeCount)return!1;const t=e.getRangeAt(0);return!!t.collapsed&&(e.removeAllRanges(),e.addRange(t),!0)}},15714:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.DIR=void 0,t.findNonEmptySibling=function(e,t){let a=e;if(!a)return;do{a=t===i.NEXT?a.nextSibling:a.previousSibling}while(a&&(0,n.default)(a));return a};var n=s(a(56244));const i={NEXT:"NEXT",PREV:"PREV"};t.DIR=i},32709:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(e.__playPromise)return e.__playPromise;const t=new Promise(((t,a)=>{function s(a){e.removeEventListener("playing",s),e.removeEventListener("error",n),e.videoHeight&&e.videoWidth||s(a),delete e.__playPromise,t(a)}function n(t){e.removeEventListener("playing",s),e.removeEventListener("error",n),delete e.__playPromise,a(t)}e.addEventListener("playing",s),e.addEventListener("error",n);const i=e.play();var r;(r=i)&&"function"==typeof r.then&&(e.removeEventListener("playing",s),e.removeEventListener("error",n),i.then((()=>{delete e.__playPromise,t()})).catch((t=>{delete e.__playPromise,a(t)})))}));return e.__playPromise=t,t}},67134:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={SMILEYS_PEOPLE:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],ANIMALS_NATURE:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],FOOD_DRINK:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],ACTIVITY:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],TRAVEL_PLACES:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],OBJECTS:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],SYMBOLS:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","0","1","2","3","4","5","6","7","8","9","","","#","*","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],FLAGS:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]}},44776:(e,t)=>{"use strict";t.Z=void 0;t.Z={"#":1,"":1,"*":2,"0":3,"":3,"1":4,"":4,"2":5,"":5,"3":6,"":6,"4":7,"":7,"5":8,"":8,"6":9,"":9,"7":10,"":10,"8":11,"":11,"9":12,"":12,"":13,"":14,"":17,"":21,"":22,"":23,"":24,"":31,"":32,"":48,"":49,"":54,"":55,"":59,"":61,"":62,"":69,"":79,"":80,"":81,"":82,"":83,"":84,"":85,"":86,"":87,"":88,"":89,"":90,"":91,"":93,"":94,"":95,"":96,"":97,"":100,"":109,"":110,"":116,"":117,"":118,"":121,"":127,"":130,"":131,"":133,"":154,"":155,"":156,"":158,"":160,"":166,"":177,"":190,"":191,"":192,"":195,"":197,"":198,"":199,"":200,"":202,"":208,"":210,"":213,"":214,"":215,"":218,"":219,"":221,"":222,"":223,"":224,"":226,"":227,"":228,"":229,"":230,"":232,"":234,"":235,"":237,"":239,"":240,"":289,"":299,"":312,"":320,"":322,"":356,"":360,"":368,"":437,"":481,"":481,"":499,"":500,"":501,"":502,"":504,"":506,"":507,"":508,"":509,"":510,"":511,"":512,"":514,"":516,"":517,"":518,"":519,"":520,"":521,"":522,"":524,"":539,"":545,"":564,"":565,"":567,"":568,"":569,"":570,"":571,"":574,"":576,"":577,"":578,"":579,"":581,"":582,"":585,"":586,"":590,"":595,"":596,"":600,"":601,"":602,"":603,"":604,"":605,"":606,"":607,"":609,"":610,"":611,"":614,"":615,"":624,"":625,"":626,"":627,"":628,"":629,"":630,"":632,"":634,"":635,"":640,"":641,"":642,"":643,"":644,"":645,"":651,"":652,"":653,"":654,"":657,"":658,"":659,"":660,"":661,"":662,"":663,"":664,"":673,"":674,"":676,"":677,"":678,"":679,"":680,"":681,"":683,"":684,"":687,"":688,"":689,"":693,"":694,"":695,"":696,"":698,"":702,"":703,"":704,"":705,"":712,"":730,"":749,"":756,"":758,"":831,"":833,"":834,"":836,"":837,"":838,"":839,"":840,"":841,"":842,"":843,"":844,"":846,"":847,"":853,"":854,"":855,"":880,"":881,"":884,"":885,"":887,"":891,"":892,"":893,"":894,"":895,"":899,"":900,"":904,"":906,"":907,"":908,"":911,"":912,"":913,"":914,"":915,"":916,"":917,"":919,"":920,"":921,"":922,"":923,"":924,"":925,"":926,"":927,"":933,"":936,"":942,"":948,"":950,"":956,"":962,"":968,"":974,"":980,"":986,"":992,"":998,"":1004,"":1010,"":1016,"":1017,"":1019,"":1020,"":1022,"":1023,"":1024,"":1027,"":1030,"":1031,"":1032,"":1033,"":1034,"":1037,"":1043,"":1049,"":1286,"":1591,"":1609,"":1627,"":1648,"":1666,"":1672,"":1690,"":1696,"":1702,"":1708,"":1726,"":1734,"":1735,"":1741,"":1742,"":1743,"":1744,"":1745,"":1763,"":1781,"":1787,"":1788,"":1794,"":1812,"":1830,"":1831,"":1832,"":1833,"":1835,"":1836,"":1837,"":1843,"":1844,"":1850,"":1851,"":1852,"":1855,"":1856,"":1857,"":1858,"":1859,"":1860,"":1861,"":1863,"":1865,"":1866,"":1867,"":1868,"":1870,"":1872,"":1873,"":1874,"":1885,"":1886,"":1894,"":1895,"":1896,"":1897,"":1898,"":1900,"":1901,"":1923,"":1930,"":1933,"":1934,"":1935,"":1936,"":1942,"":1944,"":1947,"":1950,"":1951,"":1952,"":1953,"":1955,"":1956,"":1959,"":1960,"":1961,"":1974,"":1977,"":1981,"":1982,"":1983,"":1984,"":1993,"":1994,"":2001,"":2004,"":2007,"":2011,"":2012,"":2013,"":2014,"":2015,"":2016,"":2032,"":2033,"":2034,"":2035,"":2036,"":2037,"":2038,"":2039,"":2040,"":2041,"":2042,"":2043,"":2137,"":2138,"":2139,"":2143,"":2144,"":2145,"":2146,"":2151,"":2152,"":2154,"":2155,"":2157,"":2160,"":2161,"":2162,"":2164,"":2166,"":2168,"":2170,"":2171,"":2172,"":2174,"":2175,"":2176,"":2177,"":2179,"":2182,"":2184,"":2187,"":2191,"":2192,"":2193,"":2194,"":2200,"":2214,"":2232,"":2250,"":2289,"":2331,"":2337,"":2340,"":2341,"":2342,"":2344,"":2346,"":2349,"":2352,"":2354,"":2355,"":2356,"":2358,"":2360,"":2362,"":2363,"":2371,"":2390,"":2391,"":2393,"":2398,"":2399,"":2404,"":2442,"":2462,"":2463,"":2464,"":2465,"":2466,"":2467,"":2469}},19229:(e,t)=>{"use strict";t.Z=void 0;t.Z=["","#","*","0","1","2","3","4","5","6","7","8","9","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},37525:(e,t)=>{"use strict";t.Z=void 0;t.Z={SMILEYS_PEOPLE:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],ANIMALS_NATURE:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],FOOD_DRINK:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],ACTIVITY:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],TRAVEL_PLACES:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],OBJECTS:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],SYMBOLS:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","0","1","2","3","4","5","6","7","8","9","","","#","*","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],FLAGS:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]}},6145:(e,t)=>{"use strict";t.Z=void 0;t.Z={"#":1,"":1,"*":2,"0":3,"":3,"1":4,"":4,"2":5,"":5,"3":6,"":6,"4":7,"":7,"5":8,"":8,"6":9,"":9,"7":10,"":10,"8":11,"":11,"9":12,"":12,"":13,"":14,"":17,"":21,"":22,"":23,"":24,"":31,"":32,"":48,"":49,"":54,"":55,"":59,"":61,"":62,"":69,"":79,"":82,"":83,"":84,"":85,"":86,"":87,"":88,"":89,"":90,"":91,"":92,"":93,"":95,"":96,"":97,"":98,"":99,"":102,"":112,"":113,"":119,"":120,"":121,"":124,"":130,"":133,"":134,"":136,"":152,"":153,"":154,"":156,"":158,"":164,"":175,"":188,"":189,"":190,"":193,"":195,"":196,"":197,"":198,"":200,"":206,"":208,"":211,"":212,"":213,"":216,"":217,"":219,"":220,"":221,"":222,"":224,"":225,"":226,"":227,"":228,"":230,"":232,"":233,"":235,"":237,"":238,"":287,"":297,"":310,"":318,"":320,"":354,"":358,"":366,"":435,"":479,"":479,"":497,"":498,"":499,"":500,"":502,"":504,"":505,"":506,"":507,"":508,"":509,"":510,"":512,"":514,"":515,"":516,"":517,"":518,"":519,"":520,"":522,"":537,"":543,"":562,"":563,"":565,"":566,"":567,"":568,"":569,"":572,"":574,"":575,"":576,"":577,"":579,"":580,"":583,"":584,"":588,"":593,"":594,"":598,"":599,"":600,"":601,"":602,"":603,"":604,"":605,"":607,"":608,"":609,"":612,"":613,"":622,"":623,"":624,"":625,"":626,"":627,"":628,"":630,"":632,"":633,"":638,"":639,"":640,"":641,"":642,"":643,"":649,"":650,"":651,"":652,"":655,"":656,"":657,"":658,"":659,"":660,"":661,"":662,"":671,"":672,"":674,"":675,"":676,"":677,"":678,"":679,"":681,"":682,"":685,"":686,"":687,"":691,"":692,"":693,"":694,"":696,"":700,"":701,"":702,"":703,"":705,"":718,"":732,"":739,"":741,"":798,"":800,"":801,"":803,"":804,"":805,"":806,"":807,"":808,"":809,"":810,"":811,"":813,"":814,"":821,"":822,"":823,"":824,"":849,"":850,"":853,"":854,"":856,"":860,"":861,"":862,"":863,"":864,"":868,"":869,"":873,"":875,"":876,"":877,"":880,"":881,"":882,"":883,"":884,"":885,"":886,"":888,"":889,"":890,"":891,"":892,"":893,"":894,"":895,"":896,"":902,"":905,"":911,"":917,"":919,"":925,"":931,"":937,"":943,"":949,"":955,"":961,"":967,"":973,"":979,"":985,"":986,"":988,"":989,"":991,"":992,"":993,"":996,"":999,"":1e3,"":1001,"":1002,"":1003,"":1006,"":1012,"":1018,"":1245,"":1540,"":1612,"":1630,"":1636,"":1642,"":1660,"":1668,"":1669,"":1675,"":1676,"":1677,"":1678,"":1703,"":1709,"":1710,"":1740,"":1741,"":1742,"":1743,"":1745,"":1746,"":1747,"":1753,"":1754,"":1760,"":1761,"":1762,"":1765,"":1766,"":1767,"":1768,"":1769,"":1770,"":1771,"":1773,"":1775,"":1776,"":1777,"":1778,"":1780,"":1782,"":1783,"":1784,"":1795,"":1796,"":1804,"":1805,"":1806,"":1807,"":1808,"":1810,"":1811,"":1833,"":1840,"":1843,"":1844,"":1845,"":1846,"":1852,"":1854,"":1857,"":1860,"":1861,"":1862,"":1863,"":1865,"":1866,"":1869,"":1870,"":1871,"":1884,"":1887,"":1891,"":1892,"":1893,"":1894,"":1903,"":1904,"":1911,"":1914,"":1917,"":1921,"":1922,"":1923,"":1924,"":1925,"":1926,"":1942,"":1943,"":1944,"":1945,"":1946,"":1947,"":1948,"":1949,"":1950,"":1951,"":1952,"":1953,"":2041,"":2042,"":2043,"":2047,"":2048,"":2049,"":2050,"":2055,"":2056,"":2058,"":2059,"":2061,"":2064,"":2065,"":2066,"":2068,"":2070,"":2072,"":2074,"":2075,"":2076,"":2078,"":2079,"":2080,"":2081,"":2083,"":2086,"":2088,"":2091,"":2095,"":2096,"":2097,"":2098,"":2104,"":2169,"":2199,"":2205,"":2208,"":2209,"":2210,"":2212,"":2214,"":2217,"":2220,"":2222,"":2223,"":2224,"":2226,"":2228,"":2230,"":2231,"":2239,"":2253,"":2254,"":2256,"":2261,"":2262,"":2267,"":2295,"":2310,"":2311,"":2312,"":2313,"":2314,"":2315,"":2317,"":1559,"":1570,"":1601,"":1619,"":1649,"":1679,"":1692,"":1716,"":1728,"":2118,"":2130,"":2143}},63966:(e,t)=>{"use strict";t.Z=void 0;t.Z=["","#","*","0","1","2","3","4","5","6","7","8","9","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","","","","","","","","","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","","","","","","","","","","","","","","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","","","","","","","","","","","","","","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","","","","","","","","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","","","","","","","","","","","","","","","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","","","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],["",""],"",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},61064:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,c.emojiSearch)(e,(0,l.default)(g,"Emoji Trie expected to be loaded."))};var i=n(a(48926)),r=n(a(44908)),o=n(a(13752)),l=n(a(45095)),d=a(13959),u=a(4352),c=a(94147),h=n(a(43725)),f=a(8080),p=s(a(22906)),m=n(a(17072));const _=new Set(["ar","bn","cs","de","en","es","fa","fr","gu","he","hi","hu","id","it","mr","ms","nl","pl","pt","pt-BR","ro","ru","sk","th","tr","uk","ur","zh-CN","zh-TW","zh-HK"]);let g=null;let v=null,C=[];function S(){const e=(0,r.default)(["en",h.default.getLocale()]).filter((e=>_.has(e)));if((0,o.default)(C,e))return;C=e;const t=Promise.all(e.map((e=>function(e){return(0,u.promiseLoop)(function(){var t=(0,i.default)((function*(t,s,n){const i=(0,d.delayMs)(p.expBackoff(n,12e4,1e3,.1));let r=yield a(26299)(`./${e}`);try{const[,,e]=yield r.default();return t(e)}catch(e){return i}}));return function(){return t.apply(this,arguments)}}()).catch((()=>({})))}(e)))).then((e=>{v===t&&(g=(0,c.emojiLocaleDictsToTrie)(e))})).catch((()=>{})).finally((()=>{v===t&&(v=null)}));v=t}h.default.on("locale_change",(()=>{S()})),(0,m.default)(f.Stream,"change:mode",(()=>f.Stream.mode===f.StreamMode.MAIN)).then((()=>{S()}))},94147:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.emojiLocaleDictsToTrie=function(e){let t=e[0];e.length>1&&(t=(0,n.default)((0,n.default)({},t),e[1]));return function(e,t){const a=f.default.fromForwardsStrings(e.map((e=>e[t])),e);return{getMatches:e=>a.search(e)}}((0,i.default)(t,((e,t)=>{const a=t.toLowerCase(),s=a.substring(0,5);return{value:e,keyword:a,shortKeyword:s}})),"shortKeyword")},t.emojiSearch=function(e,t){let a=[];if(e){const s=function(e,t){const a=function(e,t){if(!t)return[];if(e.length<=5)return t.getMatches(e);const a=e.substring(0,5).trim();let s=t.getMatches(a);return s=(0,u.default)(s,(t=>t.keyword.startsWith(e))),s}(e,t),s=g((0,d.default)(a,(e=>e.value))),n=g((0,d.default)(a.filter((t=>t.keyword===e)),(e=>e.value))),i=(0,l.default)(g(p.RecentEmojiCollection.map((e=>e.id))),s),r=(0,l.default)(g(m),s),c=(0,l.default)((0,o.default)(i,r),n);return(0,o.default)(c,C(n),i,r,C(s))}(e.toLowerCase(),t);a=(0,c.default)(s)}return a};var n=s(a(81109)),i=s(a(35161)),r=s(a(51463)),o=s(a(93386)),l=s(a(25325)),d=s(a(94654)),u=s(a(63105)),c=s(a(44908)),h=a(70449),f=s(a(55205)),p=a(92671);const m=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],_=["SMILEYS_PEOPLE","ANIMALS_NATURE","FOOD_DRINK","ACTIVITY","TRAVEL_PLACES","OBJECTS","SYMBOLS","FLAGS","VARIATION"];function g(e){return e.map(h.EmojiUtil.normalizeEmoji).filter(Boolean)}const v=(0,r.default)((()=>{const e=new Map;let t=0;for(const a of _){const s=h.EmojiUtil.getEmojisInCategory(a);for(const a of s)e.set(a,t),t++}return e}));function C(e){const t=v();return[...e].sort(((e,a)=>{var s,n;return(null!==(s=t.get(e))&&void 0!==s?s:Number.MAX_SAFE_INTEGER)-(null!==(n=t.get(a))&&void 0!==n?n:Number.MAX_SAFE_INTEGER)}))}},97172:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(e===i)return;i=e;const[t,r,o]=e===s.EMOJI_TYPE.APPLE?[a(19229).Z,a(44776).Z,a(67134).default]:[a(63966).Z,a(6145).Z,a(37525).Z];n.EmojiUtil.configure({emojiType:e,orderedEmojis:t,legacyToEmoji:r,categorizedEmojis:o})};var s=a(25647),n=a(70449);let i},87470:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getAllDurations=function(){const e=[];(0,r.isEphemeral24HDurationEnabled)()?(e.push({value:24*n.HOUR_SECONDS,label:i.default.t(462,{number:24,_plural:24})}),e.push({value:7*n.DAY_SECONDS,label:i.default.t(461,{number:7,_plural:7})}),e.push({value:90*n.DAY_SECONDS,label:i.default.t(461,{number:90,_plural:90})})):e.push({value:7*n.DAY_SECONDS,label:i.default.t(460)});return e.push({value:0,label:i.default.t(459)}),e};var n=a(92844),i=s(a(43725)),r=a(10435)},24505:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.EphemeralL10n=function(e){const{type:t,numSeconds:a=0,name:s}=e;if(a<0)return __LOG__(4,void 0,new Error,!0)`getEphemeralL10nComponent ${t} is given invalid duration ${a}`,SEND_LOGS("invalid-duration"),null;if(0===a)return function(e,t){return e===l.SettingChangeByOthers&&null!=t?(0,o.jsx)(r.default,{id:429,params:{name:t}}):e===l.SettingChangeByYou?n.default._("You turned off disappearing messages.",null,{hk:"CJJkP"}):e===l.SettingChangeByUnknown?n.default._("Disappearing messages were turned off.",null,{hk:"2o9H09"}):e===l.SettingChangeByOthersAsAdmin&&null!=t?(0,o.jsx)(r.default,{id:442,params:{name:t}}):e===l.SettingChangeByYouAsAdmin?n.default._("You turned off disappearing messages. Click to change.",null,{hk:"ULdpU"}):e===l.SettingChangeByUnknownAsAdmin?n.default._("Disappearing messages were turned off. Click to change.",null,{hk:"1M6kFu"}):e===l.Duration?(0,o.jsx)(r.default,{id:459}):e===l.OutOfSyncInfo?n.default._("This message will not disappear from the chat. The sender may be on an old version of WhatsApp.",null,{hk:"2d4xYQ"}):(__LOG__(4,void 0,new Error,!0)`getEphemeralOffL10nComponent is given invalid type ${e}`,SEND_LOGS("invalid-ephemeral-string-type"),null)}(t,s);if(a<=60)return function(e,t,a){return e===l.SettingChangeByOthers&&null!=a?(0,o.jsx)(r.default,{id:433,params:{name:a,number:t},plural:t}):e===l.SettingChangeByYou?(0,o.jsx)(r.default,{id:428,params:{number:t},plural:t}):e===l.SettingChangeByUnknown?(0,o.jsx)(r.default,{id:424,params:{number:t},plural:t}):e===l.SettingChangeByOthersAsAdmin&&null!=a?(0,o.jsx)(r.default,{id:446,params:{name:a,number:t},plural:t}):e===l.SettingChangeByYouAsAdmin?(0,o.jsx)(r.default,{id:441,params:{number:t},plural:t}):e===l.SettingChangeByUnknownAsAdmin?(0,o.jsx)(r.default,{id:437,params:{number:t},plural:t}):e===l.Duration?(0,o.jsx)(r.default,{id:464,params:{number:t},plural:t}):e===l.OutOfSyncInfo?(0,o.jsx)(r.default,{id:458,params:{number:t},plural:t}):e===l.Explanation?(0,o.jsx)(r.default,{id:452,params:{number:t},plural:t}):e===l.ModeChangeByOthers&&null!=a?(0,o.jsx)(r.default,{id:403,params:{name:a,number:t},plural:t}):e===l.ModeChangeByYou?(0,o.jsx)(r.default,{id:407,params:{number:t},plural:t}):(__LOG__(4,void 0,new Error,!0)`getEphemeralOnSecondsL10nComponent is given type ${e} and name ${a}`,SEND_LOGS("invalid-ephemeral-string-type"),null)}(t,a,s);if(a<=3600){const e=Math.floor(a/60);return function(e,t,a){return e===l.SettingChangeByOthers&&null!=a?(0,o.jsx)(r.default,{id:432,params:{name:a,number:t},plural:t}):e===l.SettingChangeByYou?(0,o.jsx)(r.default,{id:427,params:{number:t},plural:t}):e===l.SettingChangeByUnknown?(0,o.jsx)(r.default,{id:423,params:{number:t},plural:t}):e===l.SettingChangeByOthersAsAdmin&&null!=a?(0,o.jsx)(r.default,{id:445,params:{name:a,number:t},plural:t}):e===l.SettingChangeByYouAsAdmin?(0,o.jsx)(r.default,{id:440,params:{number:t},plural:t}):e===l.SettingChangeByUnknownAsAdmin?(0,o.jsx)(r.default,{id:436,params:{number:t},plural:t}):e===l.Duration?(0,o.jsx)(r.default,{id:463,params:{number:t},plural:t}):e===l.OutOfSyncInfo?(0,o.jsx)(r.default,{id:457,params:{number:t},plural:t}):e===l.Explanation?(0,o.jsx)(r.default,{id:451,params:{number:t},plural:t}):e===l.ModeChangeByOthers&&null!=a?(0,o.jsx)(r.default,{id:402,params:{name:a,number:t},plural:t}):e===l.ModeChangeByYou?(0,o.jsx)(r.default,{id:406,params:{number:t},plural:t}):(__LOG__(4,void 0,new Error,!0)`getEphemeralOnMinutesL10nComponent is given type ${e} and name ${a}`,SEND_LOGS("invalid-ephemeral-string-type"),null)}(t,e,s)}if(a<=86400){const e=Math.floor(a/60/60);return function(e,t,a){return e===l.SettingChangeByOthers&&null!=a?(0,o.jsx)(r.default,{id:431,params:{name:a,number:t},plural:t}):e===l.SettingChangeByYou?(0,o.jsx)(r.default,{id:426,params:{number:t},plural:t}):e===l.SettingChangeByUnknown?(0,o.jsx)(r.default,{id:422,params:{number:t},plural:t}):e===l.SettingChangeByOthersAsAdmin&&null!=a?(0,o.jsx)(r.default,{id:444,params:{name:a,number:t},plural:t}):e===l.SettingChangeByYouAsAdmin?(0,o.jsx)(r.default,{id:439,params:{number:t},plural:t}):e===l.SettingChangeByUnknownAsAdmin?(0,o.jsx)(r.default,{id:435,params:{number:t},plural:t}):e===l.Duration?(0,o.jsx)(r.default,{id:462,params:{number:t},plural:t}):e===l.OutOfSyncInfo?(0,o.jsx)(r.default,{id:456,params:{number:t},plural:t}):e===l.Explanation?(0,o.jsx)(r.default,{id:450,params:{number:t},plural:t}):e===l.ModeChangeByOthers&&null!=a?(0,o.jsx)(r.default,{id:401,params:{name:a,number:t},plural:t}):e===l.ModeChangeByYou?(0,o.jsx)(r.default,{id:405,params:{number:t},plural:t}):(__LOG__(4,void 0,new Error,!0)`getEphemeralOnHoursL10nComponent is given type ${e} and name ${a}`,SEND_LOGS("invalid-ephemeral-string-type"),null)}(t,e,s)}{const e=Math.floor(a/24/60/60);return function(e,t,a){return e===l.SettingChangeByOthers&&null!=a?(0,o.jsx)(r.default,{id:430,params:{name:a,number:t},plural:t}):e===l.SettingChangeByYou?(0,o.jsx)(r.default,{id:425,params:{number:t},plural:t}):e===l.SettingChangeByUnknown?(0,o.jsx)(r.default,{id:421,params:{number:t},plural:t}):e===l.SettingChangeByOthersAsAdmin&&null!=a?(0,o.jsx)(r.default,{id:443,params:{name:a,number:t},plural:t}):e===l.SettingChangeByYouAsAdmin?(0,o.jsx)(r.default,{id:438,params:{number:t},plural:t}):e===l.SettingChangeByUnknownAsAdmin?(0,o.jsx)(r.default,{id:434,params:{number:t},plural:t}):e===l.Duration?(0,o.jsx)(r.default,{id:461,params:{number:t},plural:t}):e===l.OutOfSyncInfo?(0,o.jsx)(r.default,{id:455,params:{number:t},plural:t}):e===l.Explanation?(0,o.jsx)(r.default,{id:449,params:{number:t},plural:t}):e===l.ModeChangeByOthers&&null!=a?(0,o.jsx)(r.default,{id:400,params:{name:a,number:t},plural:t}):e===l.ModeChangeByYou?(0,o.jsx)(r.default,{id:404,params:{number:t},plural:t}):(__LOG__(4,void 0,new Error,!0)`getEphemeralOnDaysL10nComponent is given type ${e} and name ${a}`,SEND_LOGS("invalid-ephemeral-string-type"),null)}(t,e,s)}},t.EphemeralStringType=void 0,t.getDisappearingMessageDurationString=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return d(l.Duration,e)},t.getDisappearingMessageExplanationString=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return d(l.Explanation,e)},t.getDisappearingMessageOutOfSyncInfoString=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return d(l.OutOfSyncInfo,e)},t.getDisappearingMessageSettingOthersAsAdminString=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return d(l.SettingChangeByOthersAsAdmin,e,t)},t.getDisappearingMessageSettingOthersString=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return d(l.SettingChangeByOthers,e,t)},t.getDisappearingMessageSettingUnknownAsAdminString=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return d(l.SettingChangeByUnknownAsAdmin,e)},t.getDisappearingMessageSettingUnknownString=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return d(l.SettingChangeByUnknown,e)},t.getDisappearingMessageSettingYouAsAdminString=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return d(l.SettingChangeByYouAsAdmin,e)},t.getDisappearingMessageSettingYouString=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return d(l.SettingChangeByYou,e)},t.getDisappearingModeOtherString=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return d(l.ModeChangeByOthers,e,t)},t.getDisappearingModeYouString=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return d(l.ModeChangeByYou,e)};var n=s(a(48360)),i=s(a(43725)),r=s(a(56074)),o=a(85893);const l=a(54302).Mirrored(["SettingChangeByOthers","SettingChangeByYou","SettingChangeByUnknown","SettingChangeByOthersAsAdmin","SettingChangeByYouAsAdmin","SettingChangeByUnknownAsAdmin","Duration","OutOfSyncInfo","Explanation","ModeChangeByOthers","ModeChangeByYou"]);function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0;if(t<0)return __LOG__(4,void 0,new Error,!0)`getEphemeralString ${e} is given invalid duration ${t}`,SEND_LOGS("invalid-duration"),"";if(0===t)return u(e,a);if(t<=60)return c(e,t,a);if(t<=3600){return h(e,Math.floor(t/60),a)}if(t<=86400){return f(e,Math.floor(t/60/60),a)}return p(e,Math.floor(t/24/60/60),a)}function u(e,t){return e===l.SettingChangeByOthers&&null!=t?i.default.t(429,{name:t}):e===l.SettingChangeByYou?n.default._("You turned off disappearing messages.",null,{hk:"CJJkP"}):e===l.SettingChangeByUnknown?n.default._("Disappearing messages were turned off.",null,{hk:"2o9H09"}):e===l.SettingChangeByOthersAsAdmin&&null!=t?i.default.t(442,{name:t}):e===l.SettingChangeByYouAsAdmin?n.default._("You turned off disappearing messages. Click to change.",null,{hk:"ULdpU"}):e===l.SettingChangeByUnknownAsAdmin?n.default._("Disappearing messages were turned off. Click to change.",null,{hk:"1M6kFu"}):e===l.Duration?i.default.t(459):e===l.OutOfSyncInfo?n.default._("This message will not disappear from the chat. The sender may be on an old version of WhatsApp.",null,{hk:"2d4xYQ"}):(__LOG__(4,void 0,new Error,!0)`getEphemeralOffString is given invalid type ${e}`,SEND_LOGS("invalid-ephemeral-string-type"),"")}function c(e,t,a){return e===l.SettingChangeByOthers&&null!=a?i.default.t(433,{name:a,number:t,_plural:t}):e===l.SettingChangeByYou?i.default.t(428,{number:t,_plural:t}):e===l.SettingChangeByUnknown?i.default.t(424,{number:t,_plural:t}):e===l.SettingChangeByOthersAsAdmin&&null!=a?i.default.t(446,{name:a,number:t,_plural:t}):e===l.SettingChangeByYouAsAdmin?i.default.t(441,{number:t,_plural:t}):e===l.SettingChangeByUnknownAsAdmin?i.default.t(437,{number:t,_plural:t}):e===l.Duration?i.default.t(464,{number:t,_plural:t}):e===l.OutOfSyncInfo?i.default.t(458,{number:t,_plural:t}):e===l.Explanation?i.default.t(452,{number:t,_plural:t}):e===l.ModeChangeByOthers?i.default.t(403,{name:a,number:t,_plural:t}):e===l.ModeChangeByYou?i.default.t(407,{number:t,_plural:t}):(__LOG__(4,void 0,new Error,!0)`getEphemeralOnSecondsString is given type ${e} and name ${a}`,SEND_LOGS("invalid-ephemeral-string-type"),"")}function h(e,t,a){return e===l.SettingChangeByOthers&&null!=a?i.default.t(432,{name:a,number:t,_plural:t}):e===l.SettingChangeByYou?i.default.t(427,{number:t,_plural:t}):e===l.SettingChangeByUnknown?i.default.t(423,{number:t,_plural:t}):e===l.SettingChangeByOthersAsAdmin&&null!=a?i.default.t(445,{name:a,number:t,_plural:t}):e===l.SettingChangeByYouAsAdmin?i.default.t(440,{number:t,_plural:t}):e===l.SettingChangeByUnknownAsAdmin?i.default.t(436,{number:t,_plural:t}):e===l.Duration?i.default.t(463,{number:t,_plural:t}):e===l.OutOfSyncInfo?i.default.t(457,{number:t,_plural:t}):e===l.Explanation?i.default.t(451,{number:t,_plural:t}):e===l.ModeChangeByOthers?i.default.t(402,{name:a,number:t,_plural:t}):e===l.ModeChangeByYou?i.default.t(406,{number:t,_plural:t}):(__LOG__(4,void 0,new Error,!0)`getEphemeralOnMinutesString is given type ${e} and name ${a}`,SEND_LOGS("invalid-ephemeral-string-type"),"")}function f(e,t,a){return e===l.SettingChangeByOthers&&null!=a?i.default.t(431,{name:a,number:t,_plural:t}):e===l.SettingChangeByYou?i.default.t(426,{number:t,_plural:t}):e===l.SettingChangeByUnknown?i.default.t(422,{number:t,_plural:t}):e===l.SettingChangeByOthersAsAdmin&&null!=a?i.default.t(444,{name:a,number:t,_plural:t}):e===l.SettingChangeByYouAsAdmin?i.default.t(439,{number:t,_plural:t}):e===l.SettingChangeByUnknownAsAdmin?i.default.t(435,{number:t,_plural:t}):e===l.Duration?i.default.t(462,{number:t,_plural:t}):e===l.OutOfSyncInfo?i.default.t(456,{number:t,_plural:t}):e===l.Explanation?i.default.t(450,{number:t,_plural:t}):e===l.ModeChangeByOthers?i.default.t(401,{name:a,number:t,_plural:t}):e===l.ModeChangeByYou?i.default.t(405,{number:t,_plural:t}):(__LOG__(4,void 0,new Error,!0)`getEphemeralOnHoursString is given type ${e} and name ${a}`,SEND_LOGS("invalid-ephemeral-string-type"),"")}function p(e,t,a){return e===l.SettingChangeByOthers&&null!=a?i.default.t(430,{name:a,number:t,_plural:t}):e===l.SettingChangeByYou?i.default.t(425,{number:t,_plural:t}):e===l.SettingChangeByUnknown?i.default.t(421,{number:t,_plural:t}):e===l.SettingChangeByOthersAsAdmin&&null!=a?i.default.t(443,{name:a,number:t,_plural:t}):e===l.SettingChangeByYouAsAdmin?i.default.t(438,{number:t,_plural:t}):e===l.SettingChangeByUnknownAsAdmin?i.default.t(434,{number:t,_plural:t}):e===l.Duration?i.default.t(461,{number:t,_plural:t}):e===l.OutOfSyncInfo?i.default.t(455,{number:t,_plural:t}):e===l.Explanation?i.default.t(449,{number:t,_plural:t}):e===l.ModeChangeByOthers?i.default.t(400,{name:a,number:t,_plural:t}):e===l.ModeChangeByYou?i.default.t(404,{number:t,_plural:t}):(__LOG__(4,void 0,new Error,!0)`getEphemeralOnDaysString is given type ${e} and name ${a}`,SEND_LOGS("invalid-ephemeral-string-type"),"")}t.EphemeralStringType=l},60769:(e,t,a)=>{"use strict";var s=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.getFiles=function(e,t){var a;const s=e.target.files||(null===(a=e.dataTransfer)||void 0===a?void 0:a.files);let o=s?Array.from(s):[];if(t){const e=("string"==typeof t?[t]:t).map((e=>new RegExp(e)));o=o.filter((t=>e.some((e=>t.type.match(e)))))}if(o.length)return Promise.resolve(o);const l=e.dataTransfer;if(l&&l.getData("text/uri-list"))return r.urlToFile(l.getData("text/uri-list")).then((e=>[(0,i.createFile)([e],"",{type:e.type})]));if(l&&l.getData("text/html")){const e=(new DOMParser).parseFromString(l.getData("text/html"),"text/html");if(e.createNodeIterator(e.childNodes[0],NodeFilter.SHOW_TEXT).nextNode()){if(l.getData("text/plain"))return Promise.reject(new n.MediaDragDropError("dropped html has text nodes"))}else{const t=e.getElementsByTagName("img");if(t.length)return r.urlToFile(t[0].src).then((e=>[(0,i.createFile)([e],"",{type:e.type})]))}}return Promise.resolve([])};var n=s(a(64103)),i=a(1063),r=s(a(36638))},77811:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AllowedFileExtensions",{enumerable:!0,get:function(){return f.AllowedFileExtensions}}),t.FileSaver=void 0;var n=a(13959),i=s(a(87045)),r=a(88102),o=s(a(52665)),l=s(a(69618)),d=a(21535),u=a(24032),c=s(a(43725)),h=a(85893),f=a(66846);const p=new class{downloadData(e,t,a){const s=window.URL.createObjectURL(e),i=(0,d.createDataLink)(s);return i.style.display="none",i.download=`${t}${a}`,document.body&&document.body.appendChild(i),i.click(),document.body&&document.body.removeChild(i),(0,n.delayMs)(100).then((()=>{window.URL.revokeObjectURL(i.href)})),Promise.resolve()}initDownload(e){let t=e;if(!window.Modernizr.adownload){const e=c.default.t(1924,{chrome_homepage:l.default.BROWSER_LINK.CHROME,firefox_homepage:l.default.BROWSER_LINK.FIREFOX,opera_homepage:l.default.BROWSER_LINK.OPERA});return r.Cmd.openModal((0,h.jsx)(o.default,{onOK:()=>r.Cmd.closeModal(),okText:c.default.t(1765),children:e})),__LOG__(4,void 0,new Error,!0)`Assertion failed!`,void SEND_LOGS("safari, adownload is false in download mgr")}i.default.startDownloading(),(0,u.getMultiMsgDownloadData)(t).then((e=>{e.url||e.blob||(__LOG__(4,void 0,new Error,!0)`Assertion failed! ${Array.isArray(t)?"download a zip file":`download ${t.id.toString()} type ${t.type} with state ${t.mediaData&&t.mediaData.mediaStage}`}`,SEND_LOGS("download-url-creation-error"));const a=e.url||window.URL.createObjectURL(e.blob),s=(0,d.createDataLink)(a);s.download=e.name,s.style.display="none",Array.isArray(t)&&1===t.length&&(t=t[0]),s.href||(__LOG__(4,void 0,new Error,!0)`Assertion failed! ${Array.isArray(t)?"download a zip file":`download ${t.id.toString()} type ${t.type} with state ${t.mediaData&&t.mediaData.mediaStage}`}`,SEND_LOGS("no-download-url")),document.body&&document.body.appendChild(s),s.click(),document.body&&document.body.removeChild(s),e.url||(0,n.delayMs)(100).then((()=>{window.URL.revokeObjectURL(s.href)}))})).catch((e=>{__LOG__(3)`Download failed, error: ${String(e)}`}))}};t.FileSaver=p},66846:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AllowedFileExtensions=void 0;const s=a(54302)({PNG:".png",TXT:".txt",ZIP:".zip"});t.AllowedFileExtensions=s},37842:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(48403)),i=s(a(30381)),r=a(22683),o=s(a(69618)),l=s(a(43725)),d=a(43257),u=a(78521),c={getDefaultName(e){let t;if(e.type===o.default.MSG_TYPE.DOCUMENT){const a=(e.filename||"").trim();t=a||(e.caption||"").trim()||l.default.t(1391),a&&function(e){return/[\.].{1,4}$/.test(e)}(a)||(t=h(t,e))}else e.type===o.default.MSG_TYPE.VCARD?(t=(e.vcardFormattedName||"").trim()||f(e),t=h(t,e)):e.type===o.default.MSG_TYPE.MULTI_VCARD?(t=e.vcardList?(0,u.getNameString)(e.vcardList):f(e),t=h(t,e)):(t=f(e),t=h(t,e));return t}};function h(e,t){let a=e;const s=t.type===o.default.MSG_TYPE.VCARD||t.type===o.default.MSG_TYPE.MULTI_VCARD?"text/vcard":t.mimetype,n=(0,d.getExtension)(s);return a.endsWith(n)||(a+=n),a}function f(e){const t=i.default.unix(e.t).locale("en"),a=`${t.format("YYYY-MM-DD")} at ${t.format(r.Clock.getIs24Hour()?"HH.mm.ss":"h.mm.ss A")}`;return`WhatsApp ${(0,n.default)(e.type)} ${a}`}t.default=c},10233:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UntrustedGroupDesc=t.TrustedGroupDesc=t.StatusV3Text=t.StatusV3Caption=t.SearchName=t.Search=t.RawNotification=t.RawGroupNotification=t.QuotedMention=t.QuickReply=t.LastMessage=t.LargeEmojiOnly=t.HeaderAndFooter=t.FormattedNotification=t.FormattedGroupNotification=t.Format=t.FTSMessage=t.EmojiOnly=t.Conversation=t.ComposeBox=t.Compatibility=t.BoldedContactName=void 0;a(7293);var s=a(69541);t.EmojiOnly=function(){let{selectable:e,emojiXstyle:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[[[s.Emoji,{selectable:e,emojiXstyle:t}]]]};t.LargeEmojiOnly=function(){let{selectable:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[[[s.Emoji,{selectable:e,size:"large"}]]]};t.StatusV3Text=function(){let{links:e,selectable:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[[[s.Code,{selectable:t}]],[[s.Link,{links:e,selectable:t}]],[[s.Bold,{selectable:t}],[s.Italic,{selectable:t}],[s.Strikethrough,{selectable:t}]],[[s.Emoji,{selectable:t,size:"xlarge"}]]]};t.StatusV3Caption=function(){let{selectable:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[[[s.Code,{selectable:e}]],[[s.Bold,{selectable:e}],[s.Italic,{selectable:e}],[s.Strikethrough,{selectable:e}]],[[s.Emoji,{selectable:e}]]]};t.Compatibility=function(){let{selectable:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[[[s.Emoji,{selectable:e}]]]};t.Conversation=function(){let{mentions:e,links:t,selectable:a,trusted:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[[[s.Code,{selectable:a}]],null,null,n?[[s.Link,{links:t,selectable:a}]]:null,e?[[s.Mention,{mentions:e,selectable:a}]]:null,[[s.Bold,{selectable:a}],[s.Italic,{selectable:a}],[s.Strikethrough,{selectable:a}]],null,[[s.Emoji,{selectable:a}]]].filter(Boolean)};t.Search=e=>{let{boundary:t,terms:a,selectable:n,mentions:i}=e;return[[[s.TextMention,{mentions:i,selectable:n}]],[[s.Bold,{selectable:n}],[s.Italic,{selectable:n}],[s.Strikethrough,{selectable:n}]],[[s.Highlight,{terms:a,boundary:t,selectable:n,ignoreDiacritics:!0}]],[[s.Emoji,{selectable:n}]]]};t.SearchName=e=>{let{terms:t}=e;return[[[s.Highlight,{terms:t,ignoreDiacritics:!0}]],[[s.Emoji,{selectable:!1}]]]};t.LastMessage=function(){let{mentions:e,selectable:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[[[s.Code,{selectable:t}]],null,null,e?[[s.TextMention,{mentions:e,selectable:t}]]:null,[[s.Bold,{selectable:t}],[s.Italic,{selectable:t}],[s.Strikethrough,{selectable:t}]],[[s.Emoji,{selectable:t}]]].filter(Boolean)};t.FTSMessage=e=>{let{boundary:t,mentions:a,terms:n,selectable:i}=e;return[[[s.Code,{selectable:i}]],[[s.TextMention,{mentions:a,selectable:i}]],[[s.Bold,{selectable:i}],[s.Italic,{selectable:i}],[s.Strikethrough,{selectable:i}]],[[s.Highlight,{terms:n,boundary:t,selectable:i}]],[[s.Emoji,{selectable:i}]]]};t.QuickReply=function(){let{selectable:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[[[s.Code,{selectable:e}]],[[s.Bold,{selectable:e}],[s.Italic,{selectable:e}],[s.Strikethrough,{selectable:e}]],[[s.Emoji,{selectable:e}]]]};t.Format=e=>{let{mentions:t,selectable:a}=e;return[[[s.Code,{selectable:a}]],null,null,[[s.TextMention,{mentions:t,selectable:a}]],[[s.Bold,{selectable:a}],[s.Italic,{selectable:a}],[s.Strikethrough,{selectable:a}]],[[s.Emoji,{selectable:a}]]].filter(Boolean)};t.QuotedMention=e=>{let{mentions:t,selectable:a}=e;return[[[s.Code,{selectable:a}]],null,null,[[s.TextMention,{mentions:t,selectable:a,theme:{quoted:!0}}]],[[s.Bold,{selectable:a}],[s.Italic,{selectable:a}],[s.Strikethrough,{selectable:a}]],[[s.Emoji,{selectable:a}]]].filter(Boolean)};t.ComposeBox=function(){let{selectable:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[[[s.Code,{selectable:e}]],[[s.Link,{selectable:e}]],[[s.Bold,{selectable:e}],[s.Italic,{selectable:e}],[s.Strikethrough,{selectable:e}]],[[s.Emoticon,{selectable:e}]]]};t.RawNotification=e=>{let{mentions:t,selectable:a}=e;return[[[s.RawMention,{mentions:t,selectable:a}]]]};t.FormattedNotification=e=>{let{mentions:t,selectable:a}=e;return[[[s.Code,{selectable:a}]],null,null,[[s.RawMention,{mentions:t,selectable:a}]],[[s.Bold,{selectable:a}],[s.Italic,{selectable:a}],[s.Strikethrough,{selectable:a}]]].filter(Boolean)};t.RawGroupNotification=e=>{let{mentions:t,selectable:a,groupMetadata:n}=e;return[[[s.RawGroupMention,{mentions:t,selectable:a,groupMetadata:n}]]]};t.FormattedGroupNotification=e=>{let{mentions:t,selectable:a,groupMetadata:n}=e;return[[[s.Code,{selectable:a}]],null,null,[[s.RawGroupMention,{mentions:t,selectable:a,groupMetadata:n}]],[[s.Bold,{selectable:a}],[s.Italic,{selectable:a}],[s.Strikethrough,{selectable:a}]]].filter(Boolean)};t.TrustedGroupDesc=e=>{let{links:t}=e;const a=!0;return[[[s.Code,{selectable:a}]],[[s.Link,{links:t,selectable:a}]],[[s.Bold,{selectable:a}],[s.Italic,{selectable:a}],[s.Strikethrough,{selectable:a}]],null,[[s.Emoji,{selectable:a}]]].filter(Boolean)};t.UntrustedGroupDesc=()=>{const e=!0;return[[[s.Code,{selectable:e}]],[[s.Bold,{selectable:e}],[s.Italic,{selectable:e}],[s.Strikethrough,{selectable:e}]],null,[[s.Emoji,{selectable:e}]]].filter(Boolean)};t.HeaderAndFooter=function(){let{links:e,selectable:t,trusted:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[a?[[s.Link,{links:e,selectable:t}]]:null,[[s.Emoji,{selectable:t}]]].filter(Boolean)};t.BoldedContactName=e=>{let{selectable:t}=e;return[[[s.BoldFirstWord,{selectable:t}]],[[s.Emoji,{selectable:t}]]]}},57705:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,s){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0;return(0,i.default)(a,(0,n.parse)(e,t,r),s)};var n=a(85571),i=s(a(83410))},37488:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t,a){const s=2*e.length+t[1].length,n=t[0].length-s;return n>0&&(t.index+=n,t[0]=t[0].slice(n)),a.lastIndex--,t}}},38649:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enableHeaderAndFooterFormatting=function(e,t){return{formatters:(0,s.HeaderAndFooter)({links:e,selectable:!0,trusted:t}),selectable:!0}};var s=a(10233)},61727:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0;return class extends i.default{static match(s){return(0,n.default)(s,e,t,a)}}};var n=s(a(16981)),i=s(a(26921))},73064:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const{index:a}=e,[s]=e,n=a+s.length-1,i=[a,a,n,n,e];if(t){const n=e[t];i[1]=a+s.indexOf(n),i[2]=i[1]+n.length-1}return i}},16981:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3?arguments[3]:void 0;const i=[];let r;t.lastIndex=0;for(;(r=t.exec(e))&&t.lastIndex>0;)s&&(r=s(r,t)),r&&i.push((0,n.default)(r,a));return i};var n=s(a(73064))},5124:(e,t,a)=>{"use strict";var s=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.Configuration=void 0;const n=s(a(10233));t.Configuration=n},26921:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;class a{static match(){throw new Error("Subclasses of `Mutator` must override `match()`")}static mutate(e){return e}}t.default=a,a.nestable=()=>!0,a.format=!0,a.fragment=!1,a.compatibility=!1,a.mutates=!1},54540:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(37488)),i=s(a(37991)),r=s(a(61727)),o=a(85893);const l=(0,n.default)("*"),d=(0,r.default)(/(?:^|[\s\W_])\*([^\s\u20e3]|[^\s\u20e3][^\n]*?\S)\*(?=$|[[\s\W_])/g,1,l);t.default=class extends d{static jsx(e,t,a){let{selectable:s=!1}=a;return(0,o.jsx)(i.default,{selectable:s,children:e})}}},46495:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(37991)),i=s(a(61727)),r=a(85893);const o=(0,i.default)(/^(\w*)\b/g);t.default=class extends o{static jsx(e,t,a){let{selectable:s=!1}=a;return(0,r.jsx)(n.default,{selectable:s,children:e})}}},19773:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.removeCodeBlocks=t.isInsideCodeBlock=t.Code=void 0;var n=s(a(86102)),i=s(a(61727)),r=a(85893);const o=/```([\s\S]*?\S[\s\S]*?)```/g,l=(0,i.default)(o,1),d=new Set(["ListItem","List"]);class u extends l{static jsx(e,t,a){let{selectable:s=!1}=a;return(0,r.jsx)(n.default,{selectable:s,children:e})}}t.Code=u,u.nestable=e=>d.has(e),u.format=!1;t.isInsideCodeBlock=e=>{const t=e.split(o).pop();return/```/.test(t)};t.removeCodeBlocks=e=>e.replace(o," ")},37991:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(52596),n=a(85893);function i(e){let{children:t,selectable:a}=e;return(0,n.jsx)(s.SelectableStrong,{selectable:a,appTextTemplate:"*${appText}*",children:t})}i.defaultProps={children:""};var r=i;t.default=r},89534:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onClick:t,theme:a,selectable:s}=e,h=(0,u.useModelValues)(e.contact,["id","displayName"]),f=h.id,p=!!a&&a.quoted,m=h.displayName,_=(0,n.dir)(m)||"auto",g=(0,o.default)(m,[[[r.default,{selectable:s}]]],d.JSXSerializer,void 0,1/0);return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)(l.SelectableSpan,{"data-jid":f.toString(),"data-display":m,className:(0,i.default)("matched-mention",{"quoted-mention":p,"inactive-mention":!t||p}),onClick:t,plainText:`@${m}`,selectable:s,selectAll:!0,appTextTemplate:`${f.toString()}`,children:[(0,c.jsx)("span",{className:"at-symbol",children:"@"}),(0,c.jsx)("span",{dir:_,children:g})]})})};var n=a(93131),i=s(a(94184)),r=s(a(64488)),o=s(a(57705)),l=a(52596),d=a(11731),u=a(49082),c=a(85893)},86102:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{children:t="",selectable:a}=e;return(0,n.jsx)(s.SelectableCode,{selectable:a,appTextTemplate:"```${appText}```",children:t})};var s=a(52596),n=a(85893)},1410:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(84636)),i=a(73770),r=a(85893);t.default=e=>{let{emoji:t,selectable:a,size:s,xstyle:o}=e;return"xlarge"===s?(0,r.jsx)(i.LargeEmoji,{emoji:t,xstyle:o,size:i.SIZE.XLARGE,element:"span",selectable:a}):(0,r.jsx)(n.default,{emoji:t,xstyle:o,selectable:a,size:s})}},25609:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onClick:t,theme:a,selectable:s}=e,f=(0,c.useModelValues)(e.contact,["id","displayName","shortName","isMyContact"]),p=(0,c.useModelValues)(e.groupMetadata,["uniqueShortNameMap"]),m=f.id,_=!!a&&a.quoted,g=(0,l.isDropLastNameEnabled)()&&p&&p.hasUniqueShortNameMention(f)?f.shortName:f.displayName,v=(0,n.dir)(g)||"auto",C=(0,o.default)(g,[[[r.default,{selectable:s}]]],u.JSXSerializer,void 0,1/0);return(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)(d.SelectableSpan,{"data-jid":m.toString(),"data-display":g,className:(0,i.default)("matched-mention",{"quoted-mention":_,"inactive-mention":!t||_}),onClick:t,plainText:`@${g}`,selectable:s,selectAll:!0,appTextTemplate:`${m.toString()}`,children:[(0,h.jsx)("span",{className:"at-symbol",children:"@"}),(0,h.jsx)("span",{dir:v,children:C})]})})};var n=a(93131),i=s(a(94184)),r=s(a(64488)),o=s(a(57705)),l=a(10435),d=a(52596),u=a(11731),c=a(49082),h=a(85893)},69280:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(52596),n=a(85893);function i(e){let{children:t,selectable:a}=e;return(0,n.jsx)(s.SelectableSpan,{className:"matched-text",selectable:a,children:t})}i.defaultProps={children:""};var r=i;t.default=r},36362:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,r.jsx)(i.default,(0,n.default)((0,n.default)({},e),{},{children:e.children}))};var n=s(a(81109)),i=s(a(88095)),r=a(85893)},55373:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(52596),n=a(85893);function i(e){let{children:t,selectable:a}=e;return(0,n.jsx)(s.SelectableEm,{selectable:a,appTextTemplate:"_${appText}_",children:t})}i.defaultProps={children:""};var r=i;t.default=r},88095:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(52596),n=a(85893);function i(e){let{href:t,children:a,selectable:i}=e;return(0,n.jsx)(s.SelectableLink,{href:t,title:t,target:"_blank",rel:"noopener noreferrer",selectable:i,children:a})}i.defaultProps={children:""};var r=i;t.default=r},99581:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{children:t="",inline:a,isAtStart:s,selectable:l}=e;return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(r.SelectableUl,{appTextTemplate:s?"${appText}":"\n${appText}",className:(0,n.default)({[i.default.inline]:a},i.default.ul),selectable:l,children:t})})};var n=s(a(94184)),i=s(a(52552)),r=a(52596),o=a(85893)},56194:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{children:t="",inline:a,selectable:s}=e;return(0,o.jsx)("li",{className:(0,n.default)({[i.default.inline]:a}),children:(0,o.jsx)(r.SelectableSpan,{selectable:s,appTextTemplate:"* ${appText}",children:t})})};var n=s(a(94184)),i=s(a(6778)),r=a(52596),o=a(85893)},32157:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{mentionMeta:t,theme:a,selectable:s}=e;return(0,i.jsx)(n.default,{contact:t.contact,theme:a,selectable:s})};var n=s(a(8593)),i=a(85893)},41868:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(52596),n=a(85893);function i(e){let{children:t,selectable:a}=e;return(0,n.jsx)(s.SelectableDel,{selectable:a,appTextTemplate:"~${appText}~",children:t})}i.defaultProps={children:""};var r=i;t.default=r},78275:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(88102),i=a(52596),r=s(a(82791)),o=a(85893);function l(e){let{link:t,children:a,selectable:s}=e;return(0,o.jsx)(i.SelectableLink,{onClick:()=>n.Cmd.openModal((0,o.jsx)(r.default,{link:t})),selectable:s,style:{cursor:"pointer"},children:a})}l.defaultProps={children:""};var d=l;t.default=d},98650:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,i.useContext)(o.default);if((0,d.isDropLastNameEnabled)()&&t)return(0,u.jsx)(l.default,(0,n.default)((0,n.default)({},e),{},{groupMetadata:t}));return(0,u.jsx)(r.default,(0,n.default)({},e))};var n=s(a(81109)),i=a(67294),r=s(a(89534)),o=s(a(45152)),l=s(a(25609)),d=a(10435),u=a(85893)},8593:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{contact:t,theme:a,selectable:s}=e;const{isMe:d}=(0,o.useModelValues)(t,["id","isMe"]),u=d?void 0:()=>{(0,i.findChat)(t.id).then((e=>n.Cmd.openChatBottom(e)))};return(0,l.jsx)(r.default,{contact:t,theme:a,selectable:s,onClick:u})};var n=a(88102),i=a(50101),r=s(a(98650)),o=a(49082),l=a(85893)},64488:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(70449),i=s(a(1410)),r=s(a(16981)),o=s(a(26921)),l=a(3940),d=a(85893);class u extends o.default{static jsx(e,t,a){let[s]=t,{size:n,selectable:r=!1,emojiXstyle:o}=a;return(0,d.jsx)(i.default,{emoji:s,size:n,selectable:r,xstyle:o})}static match(e,t,a){const s=null!=a&&0!==a?a:e.length,i=(0,l.firstNCodepoints)(e,s);return(0,r.default)(i,n.EmojiUtil.emojiRegex(),0,c)}}function c(e){return n.EmojiUtil.getGlyphId(e[0])?e:null}t.default=u,u.compatibility=!0},28885:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(3522)),i=s(a(61727)),r=a(70449),o=a(13185);const l={"(y)":"","(n)":"",":-)":"",":-(":"",":-p":"",":-|":"",":-\\":"",":-d":"",":-*":"","<3":"","^_^":"",">_<":"",";-)":""},d=Object.keys(l).map(n.default).join("|"),u=new RegExp(`(^|\\s|\`\`\`|[*_~])((?:${d})+)(?=$|\\s|\`\`\`|[*_~])`,"ig"),c=new RegExp(`(${d})`,"i"),h=(0,i.default)(u,2,(function(e){const[,t]=e;t&&(e.index+=t.length,e[0]=e[0].slice(t.length));return e}));class f extends h{static mutate(e){return e.split(c).map((e=>{const t=l[e.toLowerCase()];return t?r.EmojiUtil.getSkinToneBase(t)&&o.EmojiVariantCollection.getVariant(t)||t:e})).join("")}}t.default=f,f.fragment=!0,f.mutates=!0},59686:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(3522)),i=s(a(16981)),r=s(a(69280)),o=s(a(43725)),l=s(a(26921)),d=a(85893);class u extends l.default{static match(e,t){if(!t)return[];const{terms:a,boundary:s=!1,ignoreDiacritics:r=!1}=t;if(!a.length)return[];const l=r&&o.default.isLatinAlphabetLanguage(e)&&a.every((e=>o.default.isLatinAlphabetLanguage(e)))&&!o.default.isRTL(),d=l?o.default.removeAccents(e):e;return(0,i.default)(d,function(e,t,a){const s=(a?e.map((e=>o.default.removeAccents(e))):e).map(n.default).join("|");if(o.default.isRTL())return new RegExp(`${t?"(?:^|\\b)":""}(\\S+)?(${s})(\\S+)?`,"ig");return new RegExp(`${t?"(?:^|\\b)":""}(${s})`,"ig")}(a,s,l))}}t.default=u,u.jsx=(e,t,a)=>{let{selectable:s}=a;return(0,d.jsx)(r.default,{selectable:s,children:e})}},69541:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Bold",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"BoldFirstWord",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"Code",{enumerable:!0,get:function(){return r.Code}}),Object.defineProperty(t,"Emoji",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"Emoticon",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"Highlight",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"Intern",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"Italic",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"Link",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"List",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"ListItem",{enumerable:!0,get:function(){return p.ListItem}}),Object.defineProperty(t,"Mention",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(t,"RawGroupMention",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(t,"RawMention",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(t,"Strikethrough",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(t,"TextMention",{enumerable:!0,get:function(){return v.default}});var n=s(a(46495)),i=s(a(54540)),r=a(19773),o=s(a(64488)),l=s(a(28885)),d=s(a(59686)),u=s(a(98039)),c=s(a(88817)),h=s(a(22597)),f=s(a(3346)),p=a(98715),m=s(a(85241)),_=s(a(99344)),g=s(a(54283)),v=s(a(55883)),C=s(a(52037))},98039:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(61727)),i=s(a(36362)),r=a(85893);const o=(0,n.default)(/(^|\b|\s)(((#|t|T|d|D|p|P|s|S)([0-9]{3,16}))|([0-9a-fA-F]{8,40}))(?=$|\b)/g,2,(function(e){const[,t,,,,,a]=e;if(a&&(!l.test(a)||!d.test(a)))return null;t&&(e.index+=t.length,e[0]=e[0].slice(t.length));return e}));t.default=class extends o{static jsx(e,t,a){let{selectable:s=!1}=a;const n=function(e){let[,,,,t,a,s]=e;if(s)return`${u}${s.toLowerCase()}`;switch(t){case"T":case"t":case"#":return`${c}${a}`;case"D":case"d":return`${h}${a}`;case"P":case"p":return`${f}${a}`;case"S":case"s":return`${p}${a}`;default:return`${m}${t}${a}`}}(t);return(0,r.jsx)(i.default,{href:n,selectable:s,children:e})}};const l=/[a-fA-F]/,d=/[0-9]/;const u="https://internalfb.com/intern/bunny/?q=hash%20",c="https://internalfb.com/intern/tasks/?t=",h="https://internalfb.com/intern/diff/D",f="https://internalfb.com/intern/paste/P",p="https://internalfb.com/intern/sevmanager/view/s/",m="https://internalfb.com/intern/"},88817:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(37488)),i=s(a(61727)),r=s(a(55373)),o=a(85893);const l=(0,n.default)("_"),d=(0,i.default)(/(?:^|\s|_|[^\w\\])_(\S|\S[^\n]*?\S)_(?=$|[[\s\W_])/g,1,l);t.default=class extends d{static jsx(e,t,a){let{selectable:s=!1}=a;return(0,o.jsx)(r.default,{selectable:s,children:e})}}},22597:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(54540)),i=s(a(88817)),r=s(a(88095)),o=s(a(26921)),l=s(a(54283)),d=s(a(78275)),u=a(85893);class c extends o.default{static jsx(e,t,a){let{selectable:s=!1}=a;const{href:n,suspiciousCharacters:i}=t;return(null==i?void 0:i.size)?(0,u.jsx)(d.default,{link:t,selectable:s,children:e}):(0,u.jsx)(r.default,{href:n,selectable:s,children:e})}}function h(e){const{index:t,url:a}=e,s=t+a.length-1;return[t,t,s,s,e]}function f(e,t){let a=0,s=0;for(;a<e.length&&s<t.length;){const n=t[s][3]-e[a][3];if(n>0)a++;else if(n<0)s++;else{e[a][2]--,e[a][3]--;const t=e[a][5];t.href=t.href.slice(0,-1),t.path=t.path&&t.path.slice(0,-1),t.url=t.url.slice(0,-1),s++,a++}}}t.default=c,c.format=!1,c.match=(e,t)=>{if(!t)return[];const{links:a=[]}=t;return a.map(h)},c.conflictResolvers=new Map([[n.default,f],[i.default,f],[l.default,f]])},3346:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(61727)),i=s(a(99581)),r=a(85893);const o=(0,n.default)(/((?:^)(?:\* (?:[^\n]+)(?:\n(?:\* [^\n]+)){0,})(?:\n|$))/gm,0);class l extends o{static jsx(e,t,a){let{selectable:s=!1,inline:n}=a;const o=0===t.index;return(0,r.jsx)(i.default,{inline:n,isAtStart:o,selectable:s,children:e})}}t.default=l,l.nestable=()=>!1},98715:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ListItem=t.LIST_ITEM_DELIMITER=t.LAST_LIST_ITEM_REGEX=void 0;var n=s(a(61727)),i=s(a(56194)),r=a(85893);t.LIST_ITEM_DELIMITER="* ";t.LAST_LIST_ITEM_REGEX=/(?:^|\n)\* [^\n]+$/;const o=(0,n.default)(/(?:^)\* ([^\n]+(?:$))/gm,1),l=new Set(["List"]);class d extends o{static jsx(e,t,a){let{selectable:s=!1,inline:n}=a;return(0,r.jsx)(i.default,{inline:n,selectable:s,children:e})}}t.ListItem=d,d.nestable=e=>l.has(e),d.unformatDecorations={pre:" "}},85241:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(3522)),i=s(a(41609)),r=s(a(16981)),o=s(a(32157)),l=s(a(26921)),d=a(85893);class u extends l.default{static match(e,t){if(!t)return[];const{mentions:a,groupMetadata:s}=t;if(!a||(0,i.default)(a))return[];const o=function(e){const t=Object.keys(e).map(n.default).join("|");return new RegExp(`(${t})`,"g")}(a),l=(0,r.default)(e,o);for(let e=0;e<l.length;++e)l[e][4]={contact:a[l[e][4][0]],groupMetadata:s};return l}static jsx(e,t,a){let{selectable:s}=a;return(0,d.jsx)(o.default,{mentionMeta:t,selectable:s})}}t.default=u,u.format=!1},52037:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(10435),i=s(a(85241));class r extends i.default{}t.default=r,r.mutates=!0,r.mutate=(e,t)=>{const{contact:a,groupMetadata:s}=t;return(0,n.isDropLastNameEnabled)()&&s&&s.hasUniqueShortNameMention(a)?`@${a.shortName}`:`@${a.displayName}`}},99344:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(85241));class i extends n.default{}t.default=i,i.mutates=!0,i.mutate=(e,t)=>{let{contact:a}=t;return`@${a.displayName}`}},54283:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(37488)),i=s(a(61727)),r=s(a(41868)),o=a(85893);const l=(0,n.default)("_"),d=(0,i.default)(/(?:^|[\s\W_])~(\S|\S[^\n]*?\S)~(?=$|[[\s\W_])/g,1,l);t.default=class extends d{static jsx(e,t,a){let{selectable:s}=a;return(0,o.jsx)(r.default,{selectable:s,children:e})}}},55883:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(85241)),i=s(a(98650)),r=a(85893);class o extends n.default{static jsx(e,t,a){let{contact:s}=t,{selectable:n,theme:o}=a;return(0,r.jsx)(i.default,{contact:s,selectable:n,theme:o})}}t.default=o},92013:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(1===e.length)return e;const a=[];let s;for(;s=e.pop();){const[e,,,n,i]=s,[{nestable:r,compatibility:o},,l]=t[i];let d=!0;const{length:u}=a;for(let s=u-1;s>=0;--s){const[,,i,u,c]=a[s];if(e>u)break;const[{mutates:h,format:f,compatibility:p,name:m},,_]=t[c];if(n>i){if(l<_&&a.splice(s,1))continue;d=!1;break}if(h&&!(d=!1))break;if(o)break;if((r(m)||p||!(l<_)||!a.splice(s,1))&&(!o&&!f)){d=!1;break}}d&&a.push(s)}return a}},24601:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=[];for(let a=0;a<e.length;++a)for(let s=0;s<e[a].length;++s){const[n,i]=e[a][s];t.push([n,i,a])}return t}},85571:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t._parse=d,t.parse=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;return d(e,(0,i.default)(t),a)};var n=s(a(92013)),i=s(a(24601)),r=s(a(67385)),o=s(a(56319)),l=a(3940);function d(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;const s=(0,r.default)(e,t,a),i=s.length?(0,o.default)(e,(0,n.default)(s,t),t):{children:[{type:"text",value:e}]},d=(0,l.numCodepoints)(e);return a<d&&u(i,{limit:a}),i}function u(e,t){if(t.limit<=0)return;if(e.type&&"text"===e.type){if(e.value.length>=t.limit){let a=(0,l.toArray)(e.value);a.length>=t.limit&&(a=a.slice(0,t.limit)),e.value=a.join(""),t.limit=t.limit-a.length}else t.limit=t.limit-e.value.length;return}if(e.type&&"delimiter"===e.type)return;let a=0;for(;a<e.children.length&&(u(e.children[a],t),!(t.limit<=0));)a++;e.children=e.children.slice(0,a+1)}},67385:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;const s=[];for(let n=0;n<t.length;++n){const[i,r]=t[n],o=i.match(e,r,a),l=[],{length:d}=o;for(let e=0,t=o[e];e<d;t=o[++e])l[e]=[t[0],t[1],t[2],t[3],n,t[4]];l.length&&s.push(l)}for(let e=0;e<s.length;e++){const{conflictResolvers:a}=t[s[e][0][4]][0];if(a)for(let n=0;n<s.length;n++){const i=t[s[n][0][4]][0],r=a.get(i);r&&r(s[e],s[n])}}const n=[];for(let e=0;e<s.length;++e)n[e]=s[e].length-1;const i=[];let r=0;for(;s.length;){for(let e=0,t=-1;e<s.length;++e)s[e][n[e]][0]>t&&(r=e,t=s[e][n[e]][0]);i.push(s[r][n[r]]),--n[r]<0&&(s.splice(r,1),n.splice(r,1))}return i}},56319:(e,t,a)=>{"use strict";function s(e,t,a){let{format:s}=e;const n=[],i=function(e){let t=e;const a=[];do{t.mutator&&a.push(t.mutator)}while(t.parent&&(t=t.parent));return a}(a);for(let e=0;e<t.length;++e)(s||t[e][0].compatibility)&&(i.includes(t[e][0])||n.push(t[e]));return n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){const i={children:[]};let r=0,o=i,l=0;for(let i=0;i<t.length;++i){const d=t[i],[u,c]=d;for(;o.parent&&u>(l=o.match[2]);){if(r<=l&&o.children.push({type:"text",value:e.substring(r,l+1)}),r=o.match[3]+1,o.mutator.fragment){const{children:e}=o.parent;e.pop(),e.push.apply(e,o.children)}l!==o.match[3]&&o.parent.children.push({type:"delimiter",value:e.substring(l+1,r)}),o=o.parent}r<u&&o.children.push({type:"text",value:e.substring(r,u)});const[h,f]=n[d[4]],{mutates:p}=h;r=c,u!==c&&o.children.push({type:"delimiter",value:e.substring(u,c)});const m={children:[],match:d,mutator:h,opts:f,parent:o};if(p){const t=e.substring(d[1],d[2]+1),i=h.mutate(t,d[5]),o=s(h,n,m),l=(0,a(85571)._parse)(i,o);m.children=l.children,r=d[2]+1}o.children.push(m),o=m}do{if(!o.match)continue;const[,,t,a]=o.match;if(r<=t&&o.children.push({type:"text",value:e.substring(r,t+1)}),r=a+1,o.mutator.fragment){const{children:e}=o.parent;e.pop(),e.push.apply(e,o.children)}t!==a&&o.parent.children.push({type:"delimiter",value:e.substring(t+1,r)})}while(o.parent&&(o=o.parent)&&o.parent);r!==e.length&&o.children.push({type:"text",value:e.substring(r)});return i}},83410:(e,t)=>{"use strict";function a(e,t,s){return t.reduce(((t,n)=>(t.push(function(e,t,s){if(t.type){const{value:a}=t;switch(t.type){case"text":return e.onText(a,s);case"delimiter":return e.onDelimiter(a,s);default:throw new Error("Invalid node type")}}return e.onMutator(t.mutator,a(e,t.children,s),t.match[5],t.opts,s)}(e,n,s)),t)),[])}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,s){return e.onRoot(a(e,t.children,s),s)}},89656:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=class{static onMutator(){throw new Error("Subclasses of `Serializer` must override `onMutator()`")}static onRoot(){throw new Error("Subclasses of `Serializer` must override `onRoot()`")}static onText(){throw new Error("Subclasses of `Serializer` must override `onText()`")}static onDelimiter(){throw new Error("Subclasses of `Serializer` must override `onDelimiter()`")}}},11731:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"JSXSerializer",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"TextSerializer",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"UnformatSerializer",{enumerable:!0,get:function(){return r.default}});var n=s(a(61789)),i=s(a(19116)),r=s(a(19046))},61789:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(67294),i=s(a(60615)),r=s(a(89656));class o extends r.default{}function l(e){const t=[];for(let a=0;a<e.length;a++){const s=e[a];if(void 0===s)continue;if("string"==typeof s){t.push(s);continue}const i=`jsx-child-${a}`;t.push((0,n.cloneElement)(s,{key:i}))}return t}t.default=o,o.onText=i.default,o.onDelimiter=()=>{},o.onRoot=e=>l(e),o.onMutator=(e,t,a,s)=>e.jsx(l(t),a,s)},60615:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=e=>e},19116:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(89656));class i extends n.default{}t.default=i,i.onDelimiter=e=>e,i.onMutator=(e,t)=>t.join(""),i.onRoot=e=>e.join(""),i.onText=e=>e},19046:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(89656));class i extends n.default{}function r(e){return e.filter(Boolean).join("")}t.default=i,i.onDelimiter=()=>{},i.onMutator=(e,t)=>null!=e.unformatDecorations?r([e.unformatDecorations.pre,...t,e.unformatDecorations.post]):r(t),i.onRoot=e=>r(e),i.onText=e=>e},89422:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a;let{stripFormatting:s=!0,formatAsLastMsg:n=!1,formatAsSearchResult:l=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const d=e.safe();if(b.GK.supportsFeature(b.GK.F.MD_BACKEND)&&e.mdDowngrade&&n)return T.default.t(1721);switch(d.type){case I.BUTTONS_RESPONSE:case I.TEMPLATE_BUTTON_REPLY:case I.HSM:return s?(0,M.default)(e,e.body):e.body;case I.CIPHERTEXT:return"fanout"===e.subtype?r.default._("Waiting for this message. Check your phone.",null,{hk:"3bM8te"}):T.default.t(1042);case I.REVOKED:return(0,S.formatRevokedMsg)(d).toString();case I.CHAT:if(e.isFromTemplate)return e.title?s?(0,M.default)(e,e.title+" "+e.body):"*"+e.title+"* "+e.body:s?(0,M.default)(e,e.body):e.body;if(e.isDynamicReplyButtonsMsg&&e.title){const t=w(e.body,e);if(null!=t)return s?(0,M.default)(e,e.title+"\n"+t):`*${e.title}*\n${t}`}return s?(0,M.default)(e,e.body):e.body;case I.IMAGE:if(d.isViewOnce)return(0,A.isViewed)(d)?T.default.t(1451):T.default.t(1443);const O=w(e.caption,e);return null!=O?s?(0,M.default)(e,O):O:T.default.t(1607);case I.VIDEO:if(d.isViewOnce)return(0,A.isViewed)(d)?T.default.t(1451):T.default.t(1450);const R=w(e.caption,e);return null!=R?s?(0,M.default)(e,R):R:e.isGif?"GIF":T.default.t(1612);case I.STICKER:return T.default.t(1611);case I.PTT:const D=o.Clock.durationStr(e.duration);return D||T.default.t(1613);case I.AUDIO:return T.default.t(1603);case I.LOCATION:if(e.isFromTemplate||e.isDynamicReplyButtonsMsg){const t=w(e.caption,e);return null!=t?s?(0,M.default)(e,t):t:e.loc||T.default.t(1609)}return e.isLive?e.comment||T.default.t(1608):e.loc||T.default.t(1609);case I.GROUP_NOTIFICATION:case I.GP2:return(0,p.default)(e,n);case I.BROADCAST_NOTIFICATION:return(0,u.default)(e);case I.NOTIFICATION:return e.body;case I.VCARD:return e.vcardFormattedName||T.default.t(1604);case I.GROUPS_V4_INVITE:return b.GK.supportsFeature(b.GK.F.GROUPS_V_4_JOIN_PERMISSION)?T.default.t(588):r.default._("Group invite message. Open WhatsApp on your phone to view.",null,{hk:"2yUG2r"});case I.MULTI_VCARD:return(0,P.getNameString)(e.vcardList);case I.DOCUMENT:if(e.isFromTemplate||e.isDynamicReplyButtonsMsg){const t=e.pageCount>0?T.default.t(1605,{count:e.pageCount+"",_plural:e.pageCount}):null,a=w(e.caption,e);return null!=a?s?(0,M.default)(e,a):a:(0,i.default)([a||T.default.t(1606),t]).join("  ")}if(e.isVcardOverMmsDocument&&e.mediaData.parsedVcards)return j(e.mediaData.parsedVcards);const L=e.pageCount>0?T.default.t(1605,{count:e.pageCount+"",_plural:e.pageCount}):null;return(0,i.default)([e.mediaData.filename||T.default.t(1606),L]).join("  ");case I.E2E_NOTIFICATION:return(0,h.default)(d);case I.CALL_LOG:return(0,c.default)(e,!1);case I.PRODUCT:const B=[e.text,e.caption,e.footer].filter(Boolean).join(" ");return B.length?s?(0,M.default)(e,B):B:T.default.t(1610);case I.OVERSIZED:return(0,v.formatOversizedMsgText)(e);case I.INTERACTIVE:return(0,m.formatInteractive)(e,{formatAsSearchResult:l});case I.UNKNOWN:return(0,y.formatUnknownMsgText)(e);case I.PAYMENT:return k(e);case I.NOTIFICATION_TEMPLATE:return(0,g.default)(e).toString();case I.PROTOCOL:return"ephemeral_setting"===e.subtype?(0,f.default)(e.ephemeralDuration||0,e.from,e.id.remote):"";case I.ORDER:return e.message||"";case I.LIST:var C,N;return(0,x.listMsgCanRender)(e)?[null===(C=e.list)||void 0===C?void 0:C.title,null===(N=e.list)||void 0===N?void 0:N.description,e.footer].filter(Boolean).join("\n"):(0,y.formatUnknownMsgText)(e);case I.LIST_RESPONSE:return`${(null===(t=e.listResponse)||void 0===t?void 0:t.title)||""} ${(null===(a=e.listResponse)||void 0===a?void 0:a.description)||""}`;case I.REACTION:return(0,E.sendReactionsEnabled)(),(0,y.formatUnknownMsgText)(e);case I.NATIVE_FLOW:return(0,_.formatNFMText)(e);default:return""}};var i=n(a(39693)),r=n(a(48360)),o=a(22683),l=n(a(69618)),d=s(a(74764)),u=n(a(66544)),c=n(a(84793)),h=n(a(36519)),f=n(a(50549)),p=n(a(31966)),m=a(32621),_=a(70014),g=n(a(42011)),v=a(92761),C=a(14833),S=a(47861),y=a(82733),b=a(7293),E=a(57701),T=n(a(43725)),x=a(54676),M=n(a(85644)),P=a(78521),A=a(84728);const I=l.default.MSG_TYPE;function w(e,t){if(null==e)return null;const a=!0===t.isDynamicReplyButtonsMsg;return t.footer&&a?`${e}\n${t.footer}`:e}function k(e){var t,a;switch(e.subtype){case"ciphertext":return T.default.t(1777);case"futureproof":return T.default.t(1779);case"send":const s=(null===(t=e.paymentNoteMsg)||void 0===t?void 0:t.body)?" - "+e.paymentNoteMsg.body:"";return(e.paymentCurrency&&e.paymentAmount1000?d.formatAmount1000(e.paymentCurrency,e.paymentAmount1000):T.default.t(1027))+s;case"request":const n=(null===(a=e.paymentNoteMsg)||void 0===a?void 0:a.body)?" - "+e.paymentNoteMsg.body:"";return(e.paymentCurrency&&e.paymentAmount1000?d.formatAmount1000(e.paymentCurrency,e.paymentAmount1000):T.default.t(1027))+n;case"invite":return(0,C.formatPaymentInviteMessageText)(e.id);default:return r.default._("Payment message. Open WhatsApp on your phone to view.",null,{hk:"3VcAwk"})}}function j(e){if(e.length>1){const t=e.map((e=>(0,P.vcardGetNameFromParsed)(e))).filter(Boolean);return(0,P.getNameStringFromNames)(t)}return(0,P.vcardGetNameFromParsed)(e[0])||T.default.t(157)}},92761:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.formatOversizedMsgNotification=function(){return n.default.t(1023)},t.formatOversizedMsgText=function(){return i.UA.isElectron?n.default.t(1022):n.default.t(1023)};var n=s(a(43725)),i=a(65127)},14833:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.formatPaymentInviteMessageText=function(e){const t=(0,i.default)(e.remote);return e.fromMe?n.default.t(1781,{otherUser:t}):n.default.t(1782,{otherUser:t})};var n=s(a(43725)),i=s(a(18521))},47861:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.formatRevokedMsg=function(e){var t;switch(null!==(t=e.subtype)&&void 0!==t?t:"sender"){case"sender":return e.isSentByMe?n.default._("You deleted this message",null,{hk:"2ARvQT"}):n.default._("This message was deleted",null,{hk:"2LpmOe"});case"admin":return e.isRevokedByMe?n.default._("You deleted this message",null,{hk:"2ARvQT"}):null==e.revokeSender?n.default._("This message was deleted by an admin",null,{hk:"1ieozV"}):n.default._("This message was deleted by an admin, {admin}",[n.default._param("admin",o(e.revokeSender))],{hk:"cyzPX"})}};var n=s(a(48360)),i=a(19380),r=s(a(39938));const o=e=>{const t=i.ContactCollection.get(e);return t?t.shortName||t.name||t.displayName:(0,r.default)(e)}},88820:(e,t,a)=>{"use strict";var s=a(95318),n=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){var s,n,l,D;let L,B,F,G="";const U=e.dir,V=e.safe(),H=!(null===(s=V.asViewOnce)||void 0===s?void 0:s.isViewOnce)&&P.MuteCollection.getGlobalPreviews();!(0,y.getMaybeMeUser)().equals(e.from)&&e.isGroupMsg&&(G=e.displayName());if((0,E.receiveReactionsEnabled)()&&e.isGroupMsg&&a&&t){const t=I.ReactionsCollection.get(e.id.toString());if(t){const{reactionSenderModel:e}=I.ReactionsCollection.getAggregateEmojiAndSender(t,a),s=null==e?void 0:e.senderObj;var K;if(s)G=null!==(K=s.name)&&void 0!==K?K:(0,N.default)(s.id)}else __LOG__(3)`as_desktop_notification: Reaction model not found`}switch(V.type){case R.CHAT:if(H)L=(0,k.default)(e,e.body);else if(e.isGroupMsg)L=G?x.default.t(622,{author:G}):x.default.t(621),G="";else{const t=e.chat;L=x.default.t(623,{unreadCount:x.default.n(t.unreadCount),_plural:t.unreadCount})}break;case R.IMAGE:B="",w.UA.hasEmoji&&(B=V.isViewOnce?"1 ":" "),L=B+(H&&(0,k.default)(e,e.caption)||x.default.t(1607));break;case R.PRODUCT:B=w.UA.hasEmoji?" ":"",L=B+(e.text&&(0,k.default)(e,e.text)||x.default.t(1610));break;case R.INTERACTIVE:if(e.interactiveType===T.default.SHOPS_STOREFRONT){var q;B=w.UA.hasEmoji?"  ":"",L=B+(0,k.default)(e,e.body||(null===(q=e.interactiveHeader)||void 0===q?void 0:q.title))||"";break}if(e.interactiveType===T.default.NATIVE_FLOW&&e.nativeFlowName===A.default.ORDER_DETAILS){var W;B=w.UA.hasEmoji?"  ":"",L=B+((0,_.formatOrderDetailsMessagePreview)(e)||(null!==(W=e.caption)&&void 0!==W?W:""));break}return __LOG__(3)`asDesktopNotification: Unrecognized type ${e.type}`,"";case R.STICKER:B=w.UA.hasEmoji?" ":"",L=B+x.default.t(1611);break;case R.VIDEO:e.isGif?(B=w.UA.hasEmoji?" ":"",F=H&&(0,k.default)(e,e.caption)||"GIF"):(B="",w.UA.hasEmoji&&(B=V.isViewOnce?"1 ":" "),F=H&&(0,k.default)(e,e.caption)||x.default.t(1612),V.isViewOnce||(F=`${F} (${o.Clock.durationStr(e.duration)})`)),L=`${B}${F}`;break;case R.PTT:B=w.UA.hasEmoji?" ":"",L=`${B} ${x.default.t(1613)} (${o.Clock.durationStr(e.duration)})`;break;case R.AUDIO:B=w.UA.hasEmoji?" ":"",L=`${B} ${x.default.t(1603)} (${o.Clock.durationStr(e.duration)})`;break;case R.LOCATION:B=w.UA.hasEmoji?" ":"",F=e.isLive?H&&(0,k.default)(e,e.comment)||x.default.t(1608):H&&e.loc||x.default.t(1609),L=`${B} ${F}`;break;case R.GROUPS_V4_INVITE:L=b.GK.supportsFeature(b.GK.F.GROUPS_V_4_JOIN_PERMISSION)?x.default.t(588):r.default._("Group invite message. Open WhatsApp on your phone to view.",null,{hk:"2yUG2r"});break;case R.GROUP_NOTIFICATION:case R.GP2:L=(0,m.default)(e,!0),G="";break;case R.BROADCAST_NOTIFICATION:L=(0,h.default)(e);break;case R.NOTIFICATION:L=e.body;break;case R.VCARD:B=w.UA.hasEmoji?" ":"",L=B+(e.subtype||x.default.t(1604));break;case R.MULTI_VCARD:B=w.UA.hasEmoji?" ":"",L=B+(0,j.getNameString)(e.vcardList);break;case R.DOCUMENT:if(e.isVcardOverMmsDocument){B=w.UA.hasEmoji?" ":"",L=B+(e.filename||x.default.t(871,{count:e.pageCount,_plural:e.pageCount}));break}B=w.UA.hasEmoji?" ":"",L=B+(e.subtype||x.default.t(1606));break;case R.E2E_NOTIFICATION:L=(0,p.default)(V);break;case R.CALL_LOG:L=(0,f.default)(e,!1);break;case R.CIPHERTEXT:L=x.default.t(1042);break;case R.REVOKED:L=(0,C.formatRevokedMsg)(V).toString();break;case R.PAYMENT:L=function(e){if("invite"===e.subtype)return(0,v.formatPaymentInviteMessageText)(e.id);if(!e.paymentCurrency||!e.paymentAmount1000)return x.default.t(1778);if("send"!==e.subtype&&"request"!==e.subtype)return r.default._("Payment message. Open WhatsApp on your phone to view.",null,{hk:"3VcAwk"}).toString();let t;const a=u.formatAmount1000(e.paymentCurrency,e.paymentAmount1000),s=(0,O.default)(e.sender),n=(0,O.default)(e.paymentMessageReceiverJid),i=d.ContactCollection.get(e.paymentMessageReceiverJid),o={senderName:s,receiverName:n,amount:a,_plural:e.paymentAmount1000/1e3};t="send"===e.subtype?e.isGroupMsg?(null==i?void 0:i.isMe)?x.default.t(1788,o):x.default.t(1789,o):x.default.t(1787,o):e.isGroupMsg?(null==i?void 0:i.isMe)?x.default.t(1785,o):x.default.t(1786,o):x.default.t(1784,o);return t}(e);break;case R.OVERSIZED:L=(0,g.formatOversizedMsgNotification)(e);break;case R.UNKNOWN:L=(0,S.formatUnknownMsgNotification)(e);break;case R.LIST:if((0,M.listMsgCanRender)(V)){var Y,z;L=`${(null===(Y=e.list)||void 0===Y?void 0:Y.title)||""} ${(null===(z=e.list)||void 0===z?void 0:z.description)||""}`;break}return __LOG__(3)`asDesktopNotification: Unrecognized type ${e.type}`,"";case R.LIST_RESPONSE:L=`${(null===(n=e.listResponse)||void 0===n?void 0:n.title)||""} ${(null===(l=e.listResponse)||void 0===l?void 0:l.description)||""}`;break;default:return __LOG__(3)`asDesktopNotification: Unrecognized type ${e.type}`,""}if(L=String(null!==(D=L)&&void 0!==D?D:""),(0,E.receiveReactionsEnabled)()&&a&&t){var Q;const e=null!==(Q=c.EmojiUtil.normalizeEmojiFromString(t))&&void 0!==Q?Q:c.OPEN_BOX_CHAR;L=`${x.default.t(1135,{reaction:e})} "${L}"`}const $=x.default.isRTL()?"rtl":"ltr";let X=o.Clock.relativeStr(e.t);if(G){const e=i.dir(G);return"ltr"!==$||U&&"ltr"!==U||e&&"ltr"!==e?"ltr"!==$||U&&"ltr"!==U?"ltr"!==$||e&&"ltr"!==e?"ltr"===$?(X&&(X=`- ${X}`),`${G}: ${L}${X}`):U&&"rtl"!==U||e&&"rtl"!==e?U&&"rtl"!==U?e&&"rtl"!==e?(X&&(X=`- ${X}`),`${G}: ${L}${X}`):(X&&(X=` - ${X}`),`${G}: ${L}`):(X&&(X=` - ${X}`),`${G}: ${L}`):(X&&(X=` - ${X}`),`${G}: ${L}`):(X&&(X=` - ${X}`),`${G}: ${L}`):(X&&(X=` - ${X}`),`${G}: ${L}`):(X&&(X=` - ${X}`),`${G}: ${L}`)}return X?"ltr"===$?`${L} - ${X}`:`${L} - ${X}`:L};var i=n(a(93131)),r=s(a(48360)),o=a(22683),l=s(a(69618)),d=a(19380),u=n(a(74764)),c=a(70449),h=s(a(66544)),f=s(a(84793)),p=s(a(36519)),m=s(a(31966)),_=a(32621),g=a(92761),v=a(14833),C=a(47861),S=a(82733),y=a(99234),b=a(7293),E=a(57701),T=s(a(84064)),x=s(a(43725)),M=a(54676),P=a(72472),A=s(a(5165)),I=a(31464),w=a(65127),k=s(a(85644)),j=a(78521),N=s(a(39938)),O=s(a(18521));const R=l.default.MSG_TYPE},77245:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const a=s.ContactCollection.get(e),n=null==a?void 0:a.name;return!n||n===t};var s=a(19380)},66544:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{subtype:t,body:a,recipients:s}=e;if("create"===t){const e=parseInt(a,10);return i.default.t(1912,{_plural:e,count:e})}if("add"===t){const e=s.length;return i.default.t(1713,{_plural:e,name:(0,n.getFormattedNames)(s,!0)})}if("remove"===t){const e=s.length;return i.default.t(1714,{_plural:e,name:(0,n.getFormattedNames)(s,!0)})}return""};var n=a(83288),i=s(a(43725))},84793:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){let a="";switch(e.subtype){case"miss":a=t?i.default.t(1761,{time:n.Clock.timestampStr(e.t),_plural:n.Clock.timestampHour(e.t)}):i.default.t(1760);break;case"miss_video":a=t?i.default.t(1759,{time:n.Clock.timestampStr(e.t),_plural:n.Clock.timestampHour(e.t)}):i.default.t(1758);break;case"miss_group":a=t?i.default.t(1757,{time:n.Clock.timestampStr(e.t),_plural:n.Clock.timestampHour(e.t)}):i.default.t(1756);break;case"miss_group_video":a=t?i.default.t(1755,{time:n.Clock.timestampStr(e.t),_plural:n.Clock.timestampHour(e.t)}):i.default.t(1754)}return a};var n=a(22683),i=s(a(43725))},36519:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){switch(e.subtype){case"identity":{const t=null==e.body?null:n.ContactCollection.get(e.body);if(null==t?void 0:t.isMe){__LOG__(4,void 0,new Error,!0)`formatE2ENotification: receive identity notification of self`,SEND_LOGS("SelfIdentityNotificationError");const t=e.chat;if(t.isUser){const e=t.contact?t.contact.formattedName:(0,h.default)(t.id);return l.default.t(1830,{contactName:e})}return t.isGroup?l.default.t(1701):t.isBroadcast?l.default.t(1564):""}{const a=t?t.formattedName:(0,h.default)(e.body);return l.default.t(1830,{contactName:a})}}case"device":return(0,i.default)(e);case"encrypt":{const t=e.id.remote;if(c.default.isGroup(t))return e.chat.isSupportGroup()?l.default.t(1324):u.default.isGroupCallEnabled()?l.default.t(1665):l.default.t(1662);if((0,o.default)(t.user))return l.default.t(1324);if(c.default.isBroadcast(t))return l.default.t(1562);{const e=u.default.isVoiceCallEnabled()||u.default.isVideoCallEnabled()?l.default.t(1591):l.default.t(1587),a=n.ContactCollection.get(t);if(null==a?void 0:a.isEnterprise){const t=(0,r.default)(a);return d.ServerProps.bspSystemMessageEnabled?e:l.default.t(1588,{businessName:t})}return e}}case"encrypt_now":return l.default.t(512);case"e2e_identity_unavailable":return l.default.t(1212);default:return""}};var n=a(19380),i=s(a(51787)),r=s(a(73628)),o=s(a(24238)),l=s(a(43725)),d=a(64551),u=s(a(69594)),c=s(a(39546)),h=s(a(39938))},51787:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,n.default)("device"===e.subtype,"Shouldn't call this function if msg is not a device notification msg");let s,l=e.body?i.ContactCollection.get(e.body):null;const d=1===e.devicesAdded&&0===e.devicesRemoved,u=0===e.devicesAdded&&1===e.devicesRemoved,c=!d&&!u;if(null===(t=l)||void 0===t?void 0:t.isMe){const t=e.chat;if(t.isUser){const n=t.contact.formattedName;a?d?s=e.isThisDeviceAdded?r.default.t(1559,{contactName:n}):r.default.t(1557,{contactName:n}):u?s=r.default.t(1826,{contactName:n}):c&&(s=r.default.t(1579,{contactName:n})):s=r.default.t(1830,{contactName:n})}else t.isGroup?a?d?s=e.isThisDeviceAdded?r.default.t(1625):r.default.t(1558):u?s=r.default.t(1827):c&&(s=r.default.t(1580)):s=r.default.t(1701):t.isBroadcast&&(a?d?s=e.isThisDeviceAdded?r.default.t(1560):r.default.t(1556):u?s=r.default.t(1825):c&&(s=r.default.t(1578)):s=r.default.t(1564))}else{const t=e.body;l=null==t?null:i.ContactCollection.get(t);const n=l?l.formattedName:(0,o.default)(t);a?d?s=r.default.t(1554,{contactName:n}):u?s=r.default.t(1824,{contactName:n}):c&&(s=r.default.t(1577,{contactName:n})):s=r.default.t(1830,{contactName:n})}return(0,n.default)(null!=s,"text shouldn't be null in the end"),s};var n=s(a(41143)),i=a(19380),r=s(a(43725)),o=s(a(39938))},73628:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.verifiedLevel===n.default.VERIFIED_LEVEL.HIGH?e.verifiedName:e.formattedName};var n=s(a(69618))},50549:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){var s;const u=n.ChatCollection.gadd(a),c=l.default.isUser(a)||(null==u||null===(s=u.groupMetadata)||void 0===s?void 0:s.canSetEphemeralSetting());if(!t)return c?(0,o.getDisappearingMessageSettingUnknownAsAdminString)(e):(0,o.getDisappearingMessageSettingUnknownString)(e);const h=i.ContactCollection.gadd(t);if(l.default.equals(t,(0,r.getMaybeMeUser)()))return c?(0,o.getDisappearingMessageSettingYouAsAdminString)(e):(0,o.getDisappearingMessageSettingYouString)(e);const f=(null==h?void 0:h.isMyContact)?h.formattedName:(0,d.default)(t);if(c)return(0,o.getDisappearingMessageSettingOthersAsAdminString)(e,f);return(0,o.getDisappearingMessageSettingOthersString)(e,f)};var n=a(69951),i=a(19380),r=a(99234),o=a(24505),l=s(a(39546)),d=s(a(39938))},31966:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){let a="";const s=e.get("type"),c=e.get("subtype"),h=e.displayName(),f=e.get("author"),p=e.get("body");let m,_;const g=""===h||null==h;if("group_notification"===s){const t=(0,r.getMaybeMeUser)();switch(c){case"add":a=d.default.equals(f,t)?l.default.t(1674):l.default.t(1673,{name:h});break;case"remove":a=d.default.equals(f,t)?l.default.t(1686):l.default.t(1685,{name:h});break;case"leave":a=d.default.equals(f,t)?l.default.t(1682):l.default.t(1681,{name:h});break;case"picture":a="remove"===p?d.default.equals(f,t)?l.default.t(1818):l.default.t(1817,{name:h}):d.default.equals(f,t)?l.default.t(1816):l.default.t(1815,{name:h});break;case"subject":a=d.default.equals(f,t)?l.default.t(1704,{subject:p}):g?l.default.t(1703,{subject:p}):l.default.t(1702,{name:h,subject:p});break;case"modify":m=(0,u.default)(e.get("author")),_=(0,u.default)(p),a=m===h?l.default.t(1676,{name:h,new_number:_}):l.default.t(1675,{name:h});break;default:__LOG__(2)`wa:formatGroupNotification:unknown message subtype: ${c}`}}else if("gp2"===s){const s=e.recipients,v=s?(0,o.getFormattedNames)(s,!0):"",C=s?s[0]:void 0,S=C?n.ContactCollection.get(C):void 0,y=S?S.get("formattedName"):C?(0,u.default)(C):"";let b;const E=(0,r.getMaybeMeUser)();switch(c){case"add":a=f?d.default.equals(f,E)?l.default.t(1695,{participants:v}):d.default.equals(C,E)?g?l.default.t(1692):l.default.t(1688,{name:h}):g?l.default.t(1691,{participants:v}):l.default.t(1687,{name:h,participants:v}):d.default.equals(C,E)?l.default.t(1674):l.default.t(1673,{name:y});break;case"remove":a=!d.default.equals(C,E)||!d.default.equals(f,E)&&f?d.default.equals(C,E)&&f?g?l.default.t(1694):l.default.t(1690,{name:h}):d.default.equals(f,E)?l.default.t(1696,{participants:v}):f?g?l.default.t(1693,{participants:v}):l.default.t(1689,{name:h,participants:v}):l.default.t(1685,{name:y}):l.default.t(1686);break;case"leave":a=d.default.equals(C,E)?l.default.t(1682):l.default.t(1681,{name:v});break;case"picture":a="remove"===p?d.default.equals(f,E)?l.default.t(1818):l.default.t(1817,{name:h}):d.default.equals(f,E)?l.default.t(1816):l.default.t(1815,{name:h});break;case"subject":a=d.default.equals(f,E)?l.default.t(1704,{subject:p}):g?l.default.t(1703,{subject:p}):l.default.t(1702,{name:h,subject:p});break;case"modify":m=(0,u.default)(f),_=(0,u.default)(C),a=m===h?l.default.t(1676,{name:h,new_number:_}):l.default.t(1675,{name:h});break;case"create":a=d.default.equals(f,E)?p?l.default.t(1636,{subject:p}):l.default.t(1637):p?g?l.default.t(1635,{subject:p}):l.default.t(1633,{name:h,subject:p}):g?l.default.t(1632):l.default.t(1634,{name:h});break;case"delete":a=e.chat.isSupportGroup()?l.default.t(1313):l.default.t(1658);break;case"promote":b=s.length,a=1===b&&d.default.equals(C,E)?l.default.t(1684):l.default.t(1683,{participants:v,_plural:b});break;case"demote":b=s.length,a=1===b&&d.default.equals(C,E)?l.default.t(1678):l.default.t(1677,{participants:v,_plural:b});break;case"invite":a=d.default.equals(C,E)?l.default.t(1680):l.default.t(1679,{name:y});break;case"revoke_invite":a=d.default.equals(f,E)?l.default.t(1668):l.default.t(1667,{name:h});break;case"description":const n=t?g?l.default.t(1655):l.default.t(1653,{name:h}):g?l.default.t(1654):l.default.t(1652,{name:h});a=d.default.equals(f,E)?l.default.t(1656):n;break;case"announce":a="on"===p?d.default.equals(f,E)?l.default.t(1631):l.default.t(1630,{name:h}):d.default.equals(f,E)?l.default.t(1629):l.default.t(1628,{name:h});break;case"restrict":a="on"===p?d.default.equals(f,E)?l.default.t(1700):l.default.t(1699,{name:h}):d.default.equals(f,E)?l.default.t(1698):l.default.t(1697,{name:h});break;case"no_frequently_forwarded":a="on"===p?d.default.equals(f,E)?l.default.t(1672):l.default.t(1671,{name:h}):d.default.equals(f,E)?l.default.t(1670):l.default.t(1669,{name:h});break;case"announce_msg_bounce":a=l.default.t(1627);break;case"v4_add_invite_sent":a=l.default.t(1408,{participants:v,_plural:s.length});break;case"v4_add_invite_join":a=l.default.t(1407,{participants:v,_plural:s.length});break;case"ephemeral":const r=parseInt(e.templateParams[0],10)||0,o=e.templateParams[1],S=e.id.remote;return(0,i.default)(r,o,S);default:__LOG__(2)`wa:formatGroupNotification:unknown message subtype: ${c}`}}l.default.isRTL()&&(a=l.default.forceRTL(a));return a};var n=a(19380),i=s(a(50549)),r=a(99234),o=a(83288),l=s(a(43725)),d=s(a(39546)),u=s(a(39938))},44894:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.formatBspModalText=f,t.formatFbModalText=h,t.formatNotificationTemplateModalText=function(e){const{id:t}=e;switch(e.subtype){case"non_verified_transition":return l.default.t(1763,{businessName:(0,r.default)(e)});case"unverified_transition":return l.default.t(1885,{businessName:(0,r.default)(e)});case"verified_transition":return l.default.t(1891,{businessName:(0,r.default)(e)});case"verified_low_unknown":return l.default.t(1889,{businessName:(0,r.default)(e)});case"verified_high":return l.default.t(1887,{businessName:(0,r.default)(e)});case"verified_initial_unknown":return l.default.t(1855,{businessName:e.displayName()});case"verified_initial_low":return l.default.t(1853);case"verified_initial_high":return l.default.t(1851);case"verified_transition_any_to_none":return l.default.t(1859);case"verified_transition_any_to_high":return l.default.t(1857);case"verified_transition_high_to_low":return l.default.t(1861,{businessName:(0,r.default)(e)});case"verified_transition_high_to_unknown":return l.default.t(1863,{businessName:(0,r.default)(e)});case"verified_transition_unknown_to_low":return l.default.t(1871);case"verified_transition_low_to_unknown":return l.default.t(1865,{businessName:(0,r.default)(e)});case"verified_transition_none_to_low":return l.default.t(1867,{businessName:(0,r.default)(e)});case"verified_transition_none_to_unknown":return l.default.t(1869,{businessName:e.displayName()});case"biz_verified_transition_top_to_bottom":return l.default.t(180,{businessName:(0,r.default)(e)});case"biz_verified_transition_bottom_to_top":return l.default.t(178,{businessName:(0,r.default)(e)});case"biz_intro_top":{const a=(0,r.default)(e),s=d.default.isOfficialBizAccount(t.remote);return(0,i.default)(t.remote,a)?s?l.default.t(974):l.default.t(164,{businessName:a}):s?l.default.t(975):l.default.t(165,{businessName:a})}case"biz_intro_bottom":return l.default.t(162,{businessName:(0,u.default)(t.remote)});case"biz_name_change":return l.default.t(167,{businessName:(0,r.default)(e)});case"biz_move_to_consumer_app":return n.default._("This account was previously a business account but has now registered as a standard account and may no longer belong to the business.",null,{hk:"nbUPf"});case"biz_two_tier_migration_top":{const a=(0,r.default)(e);return(0,i.default)(t.remote,a)?l.default.t(175,{businessName:a}):l.default.t(176,{businessName:a})}case"biz_two_tier_migration_bottom":return l.default.t(173,{businessName:(0,u.default)(t.remote)});case"blue_msg_bsp_fb_to_bsp_premise":case"blue_msg_bsp_fb_unverified_to_bsp_premise_verified":case"blue_msg_bsp_fb_verified_to_bsp_premise_unverified":case"blue_msg_bsp_premise_unverified":case"blue_msg_bsp_premise_verified":case"blue_msg_consumer_to_bsp_premise_unverified":case"blue_msg_self_fb_to_bsp_premise":case"blue_msg_self_fb_unverified_to_bsp_premise_verified":case"blue_msg_self_fb_verified_to_bsp_premise_unverified":case"blue_msg_self_premise_to_bsp_premise":case"blue_msg_unverified_to_bsp_premise_verified":case"blue_msg_verified_to_bsp_premise_unverified":return l.default.t(186,{businessName:(0,r.default)(e)});case"blue_msg_consumer_to_self_premise_unverified":return n.default._("This chat is with a business account.",null,{hk:"39HnTA"});case"blue_msg_bsp_fb_to_self_fb":case"blue_msg_bsp_fb_unverified":case"blue_msg_bsp_fb_unverified_to_self_fb_verified":case"blue_msg_bsp_fb_verified":case"blue_msg_bsp_fb_verified_to_self_fb_unverified":case"blue_msg_consumer_to_bsp_fb_unverified":case"blue_msg_consumer_to_self_fb_unverified":case"blue_msg_self_fb_unverified":case"blue_msg_to_bsp_fb":case"blue_msg_to_self_fb":case"blue_msg_unverified_to_bsp_fb_verified":case"blue_msg_unverified_to_self_fb_verified":case"blue_msg_verified_to_bsp_fb_unverified":case"blue_msg_verified_to_self_fb_unverified":return l.default.t(187,{businessName:(0,r.default)(e)});case"blue_msg_self_fb_verified":const a=(0,o.getIsInternalNumber)(e.chat.id.user),s=(0,r.default)(e);return a?l.default.t(188,{businessName:s}):l.default.t(187,{businessName:s});case"blue_msg_self_premise_unverified":return l.default.t(189,{businessName:(0,r.default)(e)});case"blue_msg_self_premise_verified":{const a=(0,r.default)(e);return(0,i.default)(t.remote,a)?l.default.t(190,{businessName:a}):l.default.t(191,{businessName:a})}case"blue_msg_bsp_fb_verified_to_self_premise_unverified":case"blue_msg_bsp_premise_verified_to_self_premise_unverified":case"blue_msg_self_fb_verified_to_self_premise_unverified":case"blue_msg_verified_to_unverified":return l.default.t(194,{businessName:(0,r.default)(e)});case"blue_msg_bsp_fb_unverified_to_self_premise_verified":case"blue_msg_bsp_premise_unverified_to_self_premise_verified":case"blue_msg_self_fb_unverified_to_self_premise_verified":case"blue_msg_unverified_to_verified":{const a=(0,r.default)(e);return(0,i.default)(t.remote,a)?l.default.t(192,{businessName:a}):l.default.t(193,{businessName:a})}case"biz_privacy_mode_init_fb":case"biz_privacy_mode_to_fb":return h();case"biz_privacy_mode_init_bsp":case"biz_privacy_mode_to_bsp":return f();default:return null}};var n=s(a(48360)),i=s(a(77245)),r=s(a(58671)),o=a(32990),l=s(a(43725)),d=s(a(39546)),u=s(a(18521)),c=a(85893);function h(){return(0,c.jsxs)(c.Fragment,{children:[n.default._("You are always in control of the conversation. You can stop chatting with this business or block them at any time.",null,{hk:"47gPiG"}),(0,c.jsx)("br",{}),(0,c.jsx)("br",{}),n.default._("WhatsApp secures your messages and calls with this business.",null,{hk:"3dAXlL"}),n.default._("The Facebook company will never show this chat in anyones personal Facebook account.",null,{hk:"2c6YmD"}),(0,c.jsx)("br",{}),(0,c.jsx)("br",{}),n.default._("For details about how this chat is secured, click Learn More.",null,{hk:"1yOc3i"})]})}function f(){return(0,c.jsxs)(c.Fragment,{children:[n.default._("You are always in control of the conversation. You can stop chatting with this business or block them at any time.",null,{hk:"47gPiG"}),(0,c.jsx)("br",{}),(0,c.jsx)("br",{}),n.default._("WhatsApp secures your messages and calls with this business.",null,{hk:"3dAXlL"}),(0,c.jsx)("br",{}),(0,c.jsx)("br",{}),n.default._("For details about how this chat is secured, click Learn More.",null,{hk:"1yOc3i"})]})}},42011:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{templateParams:t,id:a}=e;switch(e.subtype){case"non_verified_transition":return f.default.t(1764);case"unverified_transition":return f.default.t(1886);case"verified_transition":return f.default.t(1892);case"verified_low_unknown":return f.default.t(1890);case"verified_high":return f.default.t(1888);case"verified_initial_unknown":return f.default.t(1854);case"verified_initial_low":return f.default.t(1852,{businessName:(0,c.default)(e)});case"verified_initial_high":return f.default.t(1850,{businessName:(0,c.default)(e)});case"verified_transition_any_to_none":return f.default.t(1858);case"verified_transition_any_to_high":return f.default.t(1856,{businessName:(0,c.default)(e)});case"verified_transition_high_to_low":return f.default.t(1860,{businessName:(0,c.default)(e)});case"verified_transition_high_to_unknown":return f.default.t(1862,{businessName:(0,c.default)(e)});case"verified_transition_unknown_to_low":return f.default.t(1870,{businessName:(0,c.default)(e)});case"verified_transition_low_to_unknown":return f.default.t(1864,{businessName:(0,c.default)(e)});case"verified_transition_none_to_low":return f.default.t(1866);case"verified_transition_none_to_unknown":return f.default.t(1868);case"change_number":const s=t[0],n=o.ContactCollection.get(s),C=(null==n?void 0:n.isMyContact)?n.formattedName:(0,g.default)(s);return _.default.equals(e.chat.id,s)?f.default.t(289,{name:C}):f.default.t(288,{name:C});case"payment_transaction_status_update_failed":return f.default.t(1804,{receiverName:(0,v.default)(t[0]),relativeTime:r.Clock.paymentTimestampStr(e.t)});case"payment_transaction_request_cancelled":{const a=t[0],s=(0,v.default)(a),n=t[1],i=parseInt(t[2],10),r=l.formatAmount1000(n,i),o={contactName:s,currencyAndAmount:r,_plural:i/1e3};return e.id.fromMe?f.default.t(1770,o):f.default.t(1769,o)}case"payment_transaction_status_update_refunded":return f.default.t(1806,{receiverName:(0,v.default)(t[0]),relativeTime:r.Clock.paymentTimestampStr(e.t)});case"payment_transaction_status_update_refund_failed":return f.default.t(1805,{receiverName:(0,v.default)(t[0]),relativeTime:r.Clock.paymentTimestampStr(e.t)});case"payment_transaction_status_receiver_pending_setup":{const e=t[0],a=(0,v.default)(e),s=t[1],n=parseInt(t[2],10),i=l.formatAmount1000(s,n);return f.default.t(1801,{senderName:a,currencyAndAmount:i,_plural:n/1e3})}case"payment_transaction_status_receiver_success_after_hiccup":return f.default.t(1802,{senderName:(0,v.default)(t[0]),relativeTime:r.Clock.paymentTimestampStr(e.t)});case"payment_action_account_setup_reminder":return f.default.t(1768,{senderName:(0,v.default)(t[0])});case"payment_action_send_payment_reminder":return f.default.t(1776,{receiverName:(0,v.default)(t[0])});case"payment_action_send_payment_invitation":return f.default.t(1775,{receiverName:(0,v.default)(t[0])});case"payment_action_request_declined":{const a=t[0],s=(0,v.default)(a),n=t[1],i=parseInt(t[2],10),r=l.formatAmount1000(n,i),o={contactName:s,currencyAndAmount:r,_plural:i/1e3};return e.id.fromMe?f.default.t(1772,o):f.default.t(1771,o)}case"payment_action_request_expired":{const e=t[0],a=(0,v.default)(e),s=t[1],n=(0,v.default)(s),i=t[2],r=parseInt(t[3],10),o=l.formatAmount1000(i,r);return _.default.equals(e,(0,u.getMaybeMeUser)())?f.default.t(1774,{receiverName:n,currencyAndAmount:o,_plural:r/1e3}):f.default.t(1773,{senderName:a,currencyAndAmount:o,_plural:r/1e3})}case"payment_invite_account_set_up":const S=t[0];return f.default.t(1780,{invitee:(0,v.default)(S)});case"biz_verified_transition_top_to_bottom":return f.default.t(179,{businessName:(0,c.default)(e)});case"biz_verified_transition_bottom_to_top":return f.default.t(177,{businessName:(0,c.default)(e)});case"biz_intro_top":const y=e.id.remote;return _.default.isOfficialBizAccount(y)?f.default.t(973):f.default.t(163,{businessName:(0,c.default)(e)});case"biz_intro_bottom":return i.default._("This chat is with a business account. Click for more info.",null,{hk:"NOsnP"});case"biz_name_change":return f.default.t(166,{businessName:(0,c.default)(e)});case"biz_move_to_consumer_app":return i.default._("This business account has now registered as a standard account. Click for more info.",null,{hk:"1k39GT"});case"biz_two_tier_migration_top":return f.default.t(174,{businessName:(0,c.default)(e)});case"biz_two_tier_migration_bottom":return i.default._("This chat is with a business account. Click for more info.",null,{hk:"jSYUU"});case"blue_msg_bsp_fb_to_bsp_premise":return f.default.t(195,{businessName:(0,c.default)(e)});case"blue_msg_bsp_fb_to_self_fb":return f.default.t(196,{businessName:(0,c.default)(e)});case"blue_msg_bsp_fb_to_self_premise":return f.default.t(197,{businessName:(0,c.default)(e)});case"blue_msg_bsp_fb_unverified":return i.default._("This chat is with a business account that uses Facebook and other companies to manage its WhatsApp conversations. Click to learn more about privacy in this chat.",null,{hk:"2xddIM"});case"blue_msg_bsp_fb_unverified_to_bsp_premise_verified":{const t=(0,c.default)(e);return(0,d.default)(a.remote,t)?f.default.t(198,{businessName:t}):f.default.t(199,{businessName:t})}case"blue_msg_bsp_fb_unverified_to_self_fb_verified":{const t=(0,c.default)(e);return(0,d.default)(a.remote,t)?f.default.t(200,{businessName:t}):f.default.t(201,{businessName:t})}case"blue_msg_bsp_fb_unverified_to_self_premise_verified":return f.default.t(202,{businessName:(0,c.default)(e)});case"blue_msg_bsp_fb_verified":{const t=(0,c.default)(e);return(0,d.default)(a.remote,t)?f.default.t(203,{businessName:t}):f.default.t(204,{businessName:t})}case"blue_msg_bsp_fb_verified_to_bsp_premise_unverified":return f.default.t(205,{businessName:(0,c.default)(e)});case"blue_msg_bsp_fb_verified_to_self_fb_unverified":return f.default.t(206,{businessName:(0,c.default)(e)});case"blue_msg_bsp_fb_verified_to_self_premise_unverified":return f.default.t(207,{businessName:(0,c.default)(e)});case"blue_msg_bsp_premise_to_self_premise":return f.default.t(208,{businessName:(0,c.default)(e)});case"blue_msg_bsp_premise_unverified":return i.default._("This chat is with a business account that uses other companies to manage its WhatsApp conversations. Click to learn more about privacy in this chat.",null,{hk:"196kMD"});case"blue_msg_bsp_premise_unverified_to_self_premise_verified":return f.default.t(209,{businessName:(0,c.default)(e)});case"blue_msg_bsp_premise_verified":{const t=(0,c.default)(e);return(0,d.default)(a.remote,t)?f.default.t(210,{businessName:t}):f.default.t(211,{businessName:t})}case"blue_msg_bsp_premise_verified_to_self_premise_unverified":return f.default.t(212,{businessName:(0,c.default)(e)});case"blue_msg_consumer_to_bsp_fb_unverified":return f.default.t(213,{businessName:(0,c.default)(e)});case"blue_msg_consumer_to_bsp_premise_unverified":return f.default.t(214,{businessName:(0,c.default)(e)});case"blue_msg_consumer_to_self_fb_unverified":return f.default.t(215,{businessName:(0,c.default)(e)});case"blue_msg_consumer_to_self_premise_unverified":return f.default.t(216,{businessName:(0,c.default)(e)});case"blue_msg_self_fb_to_bsp_premise":return f.default.t(217,{businessName:(0,c.default)(e)});case"blue_msg_self_fb_to_self_premise":return f.default.t(218,{businessName:(0,c.default)(e)});case"blue_msg_self_fb_unverified":return i.default._("This chat is with a business account that uses Facebook to manage its WhatsApp conversations. Click to learn more about privacy in this chat.",null,{hk:"BnVcY"});case"blue_msg_self_fb_unverified_to_bsp_premise_verified":{const t=(0,c.default)(e);return(0,d.default)(a.remote,t)?f.default.t(219,{businessName:t}):f.default.t(220,{businessName:t})}case"blue_msg_self_fb_unverified_to_self_premise_verified":return f.default.t(221,{businessName:(0,c.default)(e)});case"blue_msg_self_fb_verified":{const t=(0,c.default)(e),s=(0,h.getIsInternalNumber)(e.chat.id.user);return(0,d.default)(a.remote,t)?s?f.default.t(225,{businessName:t}):f.default.t(222,{businessName:t}):s?f.default.t(224,{businessName:t}):f.default.t(223,{businessName:t})}case"blue_msg_self_fb_verified_to_bsp_premise_unverified":return f.default.t(226,{businessName:(0,c.default)(e)});case"blue_msg_self_fb_verified_to_self_premise_unverified":return f.default.t(227,{businessName:(0,c.default)(e)});case"blue_msg_self_premise_to_bsp_premise":return f.default.t(228,{businessName:(0,c.default)(e)});case"blue_msg_self_premise_unverified":return i.default._("This chat is with a business account. Click to learn more.",null,{hk:"2dhxdN"});case"blue_msg_self_premise_verified":return f.default.t(229,{businessName:(0,c.default)(e)});case"blue_msg_to_bsp_fb":return f.default.t(230,{businessName:(0,c.default)(e)});case"blue_msg_to_consumer":return f.default.t(231,{businessName:(0,c.default)(e)});case"blue_msg_to_self_fb":return f.default.t(232,{businessName:(0,c.default)(e)});case"blue_msg_unverified_to_bsp_fb_verified":{const t=(0,c.default)(e);return(0,d.default)(a.remote,t)?f.default.t(233,{businessName:t}):f.default.t(234,{businessName:t})}case"blue_msg_unverified_to_bsp_premise_verified":{const t=(0,c.default)(e);return(0,d.default)(a.remote,t)?f.default.t(235,{businessName:t}):f.default.t(236,{businessName:t})}case"blue_msg_unverified_to_self_fb_verified":{const t=(0,c.default)(e);return(0,d.default)(a.remote,t)?f.default.t(237,{businessName:t}):f.default.t(238,{businessName:t})}case"blue_msg_unverified_to_verified":return f.default.t(239,{businessName:(0,c.default)(e)});case"blue_msg_verified_to_bsp_fb_unverified":return f.default.t(240,{businessName:(0,c.default)(e)});case"blue_msg_verified_to_bsp_premise_unverified":return f.default.t(241,{businessName:(0,c.default)(e)});case"blue_msg_verified_to_self_fb_unverified":return f.default.t(242,{businessName:(0,c.default)(e)});case"blue_msg_verified_to_unverified":return f.default.t(243,{businessName:(0,c.default)(e)});case"biz_privacy_mode_init_fb":return i.default._("This business uses a secure service from the Facebook company to manage this chat. Click to learn more.",null,{hk:"1kUjsv"});case"biz_privacy_mode_to_fb":return i.default._("This business is now using a secure service from the Facebook company to manage this chat. Click to learn more.",null,{hk:"1JCL40"});case"biz_privacy_mode_init_bsp":return i.default._("This business works with other companies to manage this chat. Click to learn more.",null,{hk:"VbOOZ"});case"biz_privacy_mode_to_bsp":return i.default._("This business is now working with other companies to manage this chat. Click to learn more.",null,{hk:"2vEnTy"});case"block_contact":return"true"===t[0]?i.default._("You blocked this contact",null,{hk:"4GeKEc"}):i.default._("You unblocked this contact",null,{hk:"1cRMeM"});case"disappearing_mode":const b=t[0],E=parseInt(b,10)||0,T=t[1];if(_.default.equals(T,(0,u.getMaybeMeUser)()))return(0,p.getDisappearingModeYouString)(E);{const e=o.ContactCollection.gadd(T);return(0,p.getDisappearingModeOtherString)(E,e.formattedName)}default:return m.UA.isElectron?f.default.t(1378):f.default.t(1384)}};var i=n(a(48360)),r=a(22683),o=a(19380),l=s(a(74764)),d=n(a(77245)),u=a(99234),c=n(a(58671)),h=a(32990),f=n(a(43725)),p=a(24505),m=a(65127),_=n(a(39546)),g=n(a(39938)),v=n(a(18521))},58671:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a;return null!==(t=null===(a=e.templateParams[0])||void 0===a?void 0:a.toString())&&void 0!==t?t:(0,n.default)(e.id.remote)};var n=s(a(18521))},71040:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){switch(e){case"non_verified_transition":return(0,s.getNonVerifiedTransitionFaqUrl)();case"unverified_transition":return(0,s.getUnverifiedTransitionFaqUrl)();case"verified_transition":return(0,s.getVerifiedTransitionFaqUrl)();case"verified_low_unknown":return(0,s.getVerifiedLowUnknownFaqUrl)();case"verified_high":return(0,s.getVerifiedHighFaqUrl)();case"biz_intro_top":case"biz_intro_bottom":case"biz_two_tier_migration_bottom":case"biz_name_change":case"biz_verified_transition_top_to_bottom":case"verified_initial_unknown":case"verified_initial_low":case"verified_initial_high":case"verified_transition_any_to_none":case"verified_transition_any_to_high":case"verified_transition_high_to_low":case"verified_transition_high_to_unknown":case"verified_transition_unknown_to_low":case"verified_transition_low_to_unknown":case"verified_transition_none_to_low":case"verified_transition_none_to_unknown":return(0,s.getBusinessFaqUrl)();case"blue_msg_bsp_fb_to_bsp_premise":case"blue_msg_bsp_fb_to_self_fb":case"blue_msg_bsp_fb_to_self_premise":case"blue_msg_bsp_fb_unverified":case"blue_msg_bsp_fb_unverified_to_bsp_premise_verified":case"blue_msg_bsp_fb_unverified_to_self_fb_verified":case"blue_msg_bsp_fb_unverified_to_self_premise_verified":case"blue_msg_bsp_fb_verified":case"blue_msg_bsp_fb_verified_to_bsp_premise_unverified":case"blue_msg_bsp_fb_verified_to_self_fb_unverified":case"blue_msg_bsp_fb_verified_to_self_premise_unverified":case"blue_msg_bsp_premise_to_self_premise":case"blue_msg_bsp_premise_unverified":case"blue_msg_bsp_premise_unverified_to_self_premise_verified":case"blue_msg_bsp_premise_verified":case"blue_msg_bsp_premise_verified_to_self_premise_unverified":case"blue_msg_consumer_to_bsp_fb_unverified":case"blue_msg_consumer_to_bsp_premise_unverified":case"blue_msg_consumer_to_self_fb_unverified":case"blue_msg_consumer_to_self_premise_unverified":case"blue_msg_self_fb_to_bsp_premise":case"blue_msg_self_fb_to_self_premise":case"blue_msg_self_fb_unverified":case"blue_msg_self_fb_unverified_to_bsp_premise_verified":case"blue_msg_self_fb_unverified_to_self_premise_verified":case"blue_msg_self_fb_verified":case"blue_msg_self_fb_verified_to_bsp_premise_unverified":case"blue_msg_self_fb_verified_to_self_premise_unverified":case"blue_msg_self_premise_to_bsp_premise":case"blue_msg_self_premise_unverified":case"blue_msg_self_premise_verified":case"blue_msg_to_bsp_fb":case"blue_msg_to_consumer":case"blue_msg_to_self_fb":case"blue_msg_unverified_to_bsp_fb_verified":case"blue_msg_unverified_to_bsp_premise_verified":case"blue_msg_unverified_to_self_fb_verified":case"blue_msg_unverified_to_verified":case"blue_msg_verified_to_bsp_fb_unverified":case"blue_msg_verified_to_bsp_premise_unverified":case"blue_msg_verified_to_self_fb_unverified":case"blue_msg_verified_to_unverified":return(0,s.getE2EEnterpriseFaqUrl)();case"biz_privacy_mode_init_fb":case"biz_privacy_mode_to_fb":case"biz_privacy_mode_init_bsp":case"biz_privacy_mode_to_bsp":return(0,s.getE2EEnterpriseFaqUrl)();default:return(0,s.getFaqUrl)()}};var s=a(96384)},85644:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const a=null!=t?t:"",s=e.mentionMap();if(!s)return function(e){return i.GK.supportsFeature(i.GK.F.RICH_TEXT)?(0,n.default)(e,d,l.UnformatSerializer):e}(a);if((0,o.isDropLastNameEnabled)()&&e.chat.groupMetadata){const t=e.chat.groupMetadata,o=i.GK.supportsFeature(i.GK.F.RICH_TEXT)?r.Configuration.FormattedGroupNotification({mentions:s,groupMetadata:t}):r.Configuration.RawGroupNotification({mentions:s,groupMetadata:t});return(0,n.default)(a,o,l.UnformatSerializer)}const u=i.GK.supportsFeature(i.GK.F.RICH_TEXT)?r.Configuration.FormattedNotification({mentions:s}):r.Configuration.RawNotification({mentions:s});return(0,n.default)(a,u,l.UnformatSerializer)};var n=s(a(57705)),i=a(7293),r=a(5124),o=a(10435),l=a(11731);const d=r.Configuration.Format({mentions:{}})},18521:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=n.ContactCollection.get(e);return t?t.formattedName:(0,i.default)(e)};var n=a(19380),i=s(a(39938))},82733:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.formatUnknownMsgNotification=function(e){switch(e.subtype){case"phone":return n.default.t(1380);case"phone_only_feature":return n.default.t(1386);case"reaction":return n.default.t(1381);default:return n.default.t(1384)}},t.formatUnknownMsgText=function(e){if(e.isSentByMe)switch(e.type){case"reaction":return n.default.t(1382);default:switch(e.subtype){case"reaction":return n.default.t(1382);default:return n.default.t(1383)}}switch(e.subtype){case"phone":return n.default.t(1380);case"phone_only_feature":return i.UA.isElectron?n.default.t(1379):n.default.t(1386);case"reaction":return n.default.t(1381);default:return i.UA.isElectron?n.default.t(1378):n.default.t(1384)}};var n=s(a(43725)),i=a(65127)},49934:(e,t,a)=>{"use strict";t.I=void 0;var s=a(53485);const n=new class{constructor(){this._trackers=[],this._currFPS=0,this._numSamples=0,this._totalTime=0,this._startTracking=()=>{this._frameId||(this._prevFrameTS=this._prevUpdateTS=window.performance.now(),this._frameId=requestAnimationFrame(this._handleFrame))},this._stopTracking=()=>{this._frameId&&(this._prevFrameTS=this._prevUpdateTS=void 0,cancelAnimationFrame(this._frameId),this._frameId=void 0)},this._handleFrame=()=>{if(!this._trackers.length)return;const e=this._prevFrameTS,t=this._prevUpdateTS;if(null==e||null==t)return;const a=window.performance.now();this._numSamples+=1,this._totalTime+=a-e,a-t>=500&&this._update(a),this._prevFrameTS=a,this._frameId=requestAnimationFrame(this._handleFrame)}}whenLessThan(e,t){if(e<0||e>60)throw new RangeError("fps must be between 0 and 60");return this._insertTracker([e,t]),()=>{this._removeTracker(t)}}_insertTracker(e){const t=e[0],a=function(e,t){let a=0,s=e.length-1,n=Math.floor((a+s)/2);for(;e[n]!==t&&a<s;)t<e[n]?s=n-1:a=n+1,n=Math.floor((a+s)/2);if(e[n]<t)return n+1;return n}(this._trackers.map((e=>e[0])),t);this._trackers.splice(a,0,e),1===this._trackers.length&&(this._addEventListeners(),this._startTracking())}_removeTracker(e){const t=this._trackers.length;for(let a=0;a<t;a++)if(e===this._trackers[a][1]){this._trackers.splice(a,1),0===this._trackers.length&&(this._removeEventListeners(),this._stopTracking());break}}_update(e){const t=1e3/(this._totalTime/this._numSamples),a=Math.min(t,60);if(Math.abs(a-this._currFPS)>1){this._currFPS=a;const e=this._filterCallbacks();e.length&&this._triggerCallbacks(e,a)}this._numSamples=0,this._totalTime=0,this._prevUpdateTS=e}_filterCallbacks(){const e=[];for(let t=this._trackers.length-1;t>=0;t--){const[a,s]=this._trackers[t];if(a<=this._currFPS)break;e.push(s)}return e}_triggerCallbacks(e,t){const a=window.performance.now();(0,s.requestIdleCallback)((()=>{e.forEach((e=>e(t,a)))}))}_addEventListeners(){window.addEventListener("focus",this._startTracking),window.addEventListener("blur",this._stopTracking)}_removeEventListeners(){window.removeEventListener("focus",this._startTracking),window.removeEventListener("blur",this._stopTracking)}};t.I=n},50686:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,s,d,u){let{msg:c,date:h,unread:f,album:p}=e;const m=[];let _,g=0;for(g=0;!_&&g<t.length;g++)_=t[g];g--;let v=!1,C=!1,S=_?(0,r.default)(_):0,y=0,b=g;for(;_;){const e=_;let T;C||m.push(h(e,y++)),e===s&&f&&m.push(f(d));let x,M,P,A=g+1;for(;!T&&A<t.length;A++)T=t[A];const I=[];let w,k=!1,j=!1,N=null;if(e.asGroupedSticker&&!o(e,u)){I.push(e.asGroupedSticker),j=e===a,N=0,b=g+1;const i=t[b];(null==i?void 0:i.asGroupedSticker)&&(0,n.canBeGroupedAsAlbum)(e,i)&&i!==s&&!o(i,u)&&(I.push(i.asGroupedSticker),T=t[b+1],k=!0,w=!0,i===a&&(j=!0,N=1))}if(e.asAlbumAsset&&!o(e,u)){I.push(e.asAlbumAsset);let r,l=_;for(j=_===a,b=g;b<t.length-1&&I.length<i.default.ALBUM_MAX_SIZE;b++){var E;if(l=t[b],r=t[b+1],!(null===(E=r)||void 0===E?void 0:E.asAlbumAsset)||!(0,n.canBeGroupedAsAlbum)(l,r)||r===s||o(r,u))break;I.push(r.asAlbumAsset),r===a&&(j=!0)}I.length>=i.default.ALBUM_MIN_SIZE&&(k=!0,w=!1,T=t[b+1])}if(T){const t=T;P=(0,r.default)(T),M=P===S,x=M&&(0,n.canBeGroupedWithNext)(e,t)&&T!==s}else x=!1,M=!1,P=0;if(k){let e;e=w?I.reduce(((e,t)=>`${e}-${t.id.toString()}`),"grouped-sticker-"):l(I),m.push(p(I,e,v,x,j,N)),g=b+1,_=t[g],v=x,C=M,S=P}else m.push(c(e,e===a,v,x)),g++,v=x,C=M,S=P,_=T}return m};var n=a(93602),i=s(a(69618)),r=s(a(50532));function o(e,t){return null==t||e.t>t.t}function l(e){const t=e.length;return`album-${e[0]?e[0].id.toString():""}-${e[t-1]?e[t-1].id.toString():""}-${t}`}},83288:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getFormattedName=u,t.getFormattedNames=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!Array.isArray(e))return u(e,t);const a=e.map((e=>u(e,t)));return(0,o.default)(a,t)};var n=a(88102),i=a(19380),r=a(50101),o=s(a(88793)),l=a(85893);function d(e){return t=>{t&&(t.preventDefault(),t.stopPropagation()),(0,r.findChat)(e).then((e=>{n.Cmd.openChatFromUnread(e).then((t=>{t&&n.Cmd.focusChatTextInput(e)}))}))}}function u(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const s=i.ContactCollection.gadd(e,{silent:!0}),n=t?void 0:d(e),{Name:r}=a(12176);return t?s.formattedUser:(0,l.jsx)(r,{contact:s,onClick:n})}},24032:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getMsgDownloadData=h,t.getMultiMsgDownloadData=function(){return c.apply(this,arguments)};var n=s(a(48926)),i=s(a(69618)),r=s(a(37842)),o=a(84866),l=s(a(11339)),d=s(a(34949)),u=s(a(87740));function c(){return(c=(0,n.default)((function*(e){const t=Array.isArray(e)?e:[e];try{const e=yield Promise.all(t.map((e=>h(e))));if(e.length>1){return{blob:yield(0,u.default)(e),name:r.default.getDefaultName({t:Math.round(Date.now()/1e3),type:"unknown",mimetype:"application/zip",isVcardOverMmsDocument:!1,filename:"",vcardList:[]})}}return e[0]}catch(e){throw __LOG__(4,void 0,new Error,!0)`Failed to get msg download data: ${e.message}`,SEND_LOGS("msg-download-data-failed"),e}}))).apply(this,arguments)}function h(){return f.apply(this,arguments)}function f(){return(f=(0,n.default)((function*(e){const t="text/vcard";if(e.type===i.default.MSG_TYPE.VCARD)return{name:r.default.getDefaultName(e),blob:new Blob([e.body],{type:t})};if(e.type===i.default.MSG_TYPE.MULTI_VCARD)return{name:r.default.getDefaultName(e),blob:new Blob([e.vcardList.map((e=>e.vcard)).join("\n")],{type:t})};const a=p(e);if(a)return a;yield e.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:l.default.WEBC_RMR_REASON_CODE.DOCUMENT_DOWNLOAD,isUserInitiated:!0});const s=p(e);if(s)return s;throw new Error("Unable to download because blob cannot be found")}))).apply(this,arguments)}function p(e){const{filehash:t,mediaBlob:a,renderableUrl:s}=e.mediaData;if(a instanceof d.default)return{name:r.default.getDefaultName(e),url:s,blob:a.forceToBlob()};const n=o.MediaBlobCache.get(t);return n?{blob:n,name:r.default.getDefaultName(e),url:o.MediaBlobCache.getOrCreateURL(t)}:null}},24732:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return i};var n=s(a(23279));let i=window.innerHeight;const r=(0,n.default)((()=>{i=window.innerHeight}),500);window.addEventListener("resize",r)},38271:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a;let s=0;if(!e)return s;e.quotedMsg&&(s+=54);e.caption&&(s+=31);switch(e.type){case l.NOTIFICATION:case l.GROUP_NOTIFICATION:case l.GP2:case l.BROADCAST_NOTIFICATION:case l.E2E_NOTIFICATION:case l.CALL_LOG:case l.CIPHERTEXT:case l.REVOKED:case l.CHAT:e.linkPreview&&(s+=53);const n=(0,o.numCodepoints)(e.body&&e.body.toString());return s+19*Math.ceil(n/100)+13;case l.IMAGE:return s+((null===(t=e.mediaData)||void 0===t?void 0:t.fullWidth)&&(null===(a=e.mediaData)||void 0===a?void 0:a.fullHeight)||0)?Math.floor(Math.min(330/e.mediaData.fullWidth*e.mediaData.fullHeight,330)):330;case l.VIDEO:case l.AUDIO:return e.isGif?s+137:s+166;case l.LOCATION:return s+e.isLive?i.MSG_HEIGHT:r.PREVIEW_HEIGHT;case l.PTT:return s+67;case l.VCARD:return s+74;case l.DOCUMENT:return s+188;case l.STICKER:return s+125;case l.UNKNOWN:default:return s}};var n=s(a(69618)),i=a(19795),r=a(27863),o=a(3940);const{MSG_TYPE:l}=n.default},82816:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(54302).Mirrored(["CONTACT_US","LICENSES","DECREASE_PTT_SPEED","DELETE_OR_EXIT_CHAT","GO_TO_NEXT_CHAT","GO_TO_PREV_CHAT","INCREASE_PTT_SPEED","LOGOUT","OPEN_NEW_CHAT","OPEN_NEW_GROUP","OPEN_PROFILE","OPEN_SETTINGS","SEARCH","SEARCH_IN_CHAT","TOGGLE_ARCHIVE","TOGGLE_MUTE","TOGGLE_PIN","TOGGLE_UNREAD","ZOOM_IN","ZOOM_OUT","ZOOM_RESET","OPEN_EMOJI_PANEL","OPEN_GIF_PANEL","OPEN_STICKER_PANEL","TOGGLE_STICKER_MAKER"]);t.default=s},73580:e=>{e.exports={Action:"keyboard_action",Event:"keyboard_event",Events:{LOGGED_IN:"logged_in",LOGGED_OUT:"logged_out",ARCHIVE:"archived",MUTE:"muted",PIN:"pinned",READ:"read",READ_ONLY:"read_only",CHAT_KIND:"chat_kind",ZOOM:"zoom",LAUNCH:"launch",BATCH_RENDER:"batch_render"}}},35896:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(4766)),i=a(8524);var r=new class{constructor(){document.addEventListener("keydown",(e=>{const t=(0,i.getAction)(e);t&&(0,n.default)(t)}))}trigger(){}menuBatchRenderWith(){}};t.default=r},74511:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.LIST_FOCUSABLE_ITEM_CLASS_NAME=void 0,t.ListHotKeys=function(e){const{"aria-label":t,className:a,children:s,dataTab:f,handlers:p,role:m,onBeforeEnd:_,getPriorityFocusItem:g}=e,v=(0,u.default)(),C=(0,o.useRef)(null),S=(0,o.useRef)(null),y=(0,o.useRef)(null),b=(0,o.useRef)(!1),E=(0,o.useRef)(!1),T=(0,o.useRef)(!1),x=()=>C.current?Array.from(C.current.getElementsByClassName(h)):[],M=e=>{const t=null==g?void 0:g();t&&t===e&&(T.current=!0),r.default.focus(e,{preventScroll:!1})},P=e=>{const t=x();if(0===t.length)return;let a;if(y.current){const s=t.indexOf(y.current);-1!==s&&(a=s+e<0?t[0]:t[s+e])}a||(a=t[t.length-1]);const s=a;s.hasAttribute("tabIndex")||(__LOG__(3)`Focusable list items should have \`tabIndex\` attribute (that makes it programmatically focusable), but this element did not have it:`,function(e){e.setAttribute("tabIndex","-1")}(s)),M(s)},A=function(){var e=(0,i.default)((function*(){_&&(yield _());const e=(()=>{const e=x();return e.length>0?e[e.length-1]:null})(),t=null==g?void 0:g();t&&!T.current?M(t):e&&M(e)}));return function(){return e.apply(this,arguments)}}(),I=e=>{e.preventDefault(),A()};(0,o.useEffect)((()=>{T.current=!1,b.current&&y.current&&C.current&&!C.current.contains(y.current)&&r.default.focus(C.current)}),[]);const w=(0,n.default)((0,n.default)({},p),{},{up:e=>{e.preventDefault(),P(-1)},down:e=>{e.preventDefault(),P(1)},end:I,"command+down":I});return(0,c.jsx)(d.UIE,{displayName:"ListHotKeys",ref:S,uimState:d.UIE.State.PASSIVE,requestFocus:()=>{C.current&&!C.current.contains(document.activeElement)&&r.default.focus(C.current)},children:(0,c.jsx)(l.HotKeys,{handlers:w,className:a,"data-tab":f,onFocus:e=>{if(C.current===e.target){var t;if(v){const e=null==g?void 0:g();!E.current&&e?M(e):P(0)}null===(t=S.current)||void 0===t||t.activate()}else e.target instanceof HTMLElement&&e.target.classList.contains(h)&&((a=e.target).setAttribute("tabIndex","0"),y.current&&y.current!==a&&y.current.setAttribute("tabIndex","-1"),y.current=a);var a;b.current=!0,E.current=!0},onBlur:()=>{b.current=!1},onRef:e=>{C.current=e},role:m,"aria-label":t,children:s})})};var n=s(a(81109)),i=s(a(48926)),r=s(a(52013)),o=a(67294),l=a(55414),d=a(18644),u=s(a(43557)),c=a(85893);const h="focusable-list-item";t.LIST_FOCUSABLE_ITEM_CLASS_NAME=h},4766:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=function(e){switch(e){case n.default.CONTACT_US:return G;case n.default.LICENSES:return U;case n.default.DELETE_OR_EXIT_CHAT:return L;case n.default.GO_TO_NEXT_CHAT:return B;case n.default.GO_TO_PREV_CHAT:return F;case n.default.LOGOUT:return w;case n.default.OPEN_NEW_CHAT:return P;case n.default.OPEN_NEW_GROUP:return A;case n.default.OPEN_PROFILE:return I;case n.default.OPEN_SETTINGS:return M;case n.default.SEARCH:return k;case n.default.SEARCH_IN_CHAT:return D;case n.default.TOGGLE_ARCHIVE:return j;case n.default.TOGGLE_MUTE:return N;case n.default.TOGGLE_PIN:return O;case n.default.TOGGLE_UNREAD:return R;case n.default.ZOOM_IN:return V;case n.default.ZOOM_OUT:return H;case n.default.ZOOM_RESET:return K;case n.default.OPEN_EMOJI_PANEL:return q;case n.default.OPEN_GIF_PANEL:return W;case n.default.OPEN_STICKER_PANEL:return Y;case n.default.TOGGLE_STICKER_MAKER:return z;case n.default.INCREASE_PTT_SPEED:case n.default.DECREASE_PTT_SPEED:return null}}(e);if(!t)return;try{t()}catch(t){__LOG__(3)`keyboard:error occurred running action ${e}.`}};var n=s(a(82816)),i=a(69951),r=a(88102),o=s(a(52665)),l=a(17239),d=s(a(69618)),u=a(19380),c=a(99234),h=s(a(43725)),f=a(88240),p=a(59871),m=a(92507),_=a(26489),g=a(8936),v=a(77117),C=a(82039),S=a(66040),y=a(64551),b=a(45383),E=a(46133),T=a(65044),x=a(85893);function M(){r.Cmd.existsDrawerLeft((e=>{e&&r.Cmd.closeDrawerLeft(),r.Cmd.openDrawerLeft((0,x.jsx)(b.SettingsFlowLoadable,{}))}))}function P(){r.Cmd.existsDrawerLeft((e=>{e&&r.Cmd.closeDrawerLeft(),r.Cmd.openDrawerLeft((0,x.jsx)(m.NewChatFlowLoadable,{}))}))}function A(){r.Cmd.existsDrawerLeft((e=>{e&&r.Cmd.closeDrawerLeft(),r.Cmd.openDrawerLeft((0,x.jsx)(_.NewGroupFlowLoadable,{}))}))}function I(){r.Cmd.existsDrawerLeft((e=>{e&&r.Cmd.closeDrawerLeft();const t=(0,c.getMaybeMeUser)(),a=E.StatusCollection.assertGet(t),s=C.ProfilePicThumbCollection.assertGet(t),n=u.ContactCollection.assertGet(t);r.Cmd.openDrawerLeft((0,x.jsx)(v.ProfileDrawerFlowLoadable,{status:a,profilePicThumb:s,contact:n,conn:l.Conn}))}))}function w(){if(!p.MsgCollection.some((e=>e.ack===d.default.ACK.CLOCK&&e.local&&e.isSentByMe)))return T.Socket.logout();r.Cmd.openModal((0,x.jsx)(o.default,{title:h.default.t(360),onOK:()=>{__LOG__(2)`Keyboard: user inputs logout`,T.Socket.logout()},okText:h.default.t(808),onCancel:()=>r.Cmd.closeModal(),cancelText:h.default.t(1574),children:h.default.t(1274)}))}function k(){r.Cmd.focusChatSearch()}function j(){const e=i.ChatCollection.getActive();if(e&&e.canArchive()){const t=e.archive;r.Cmd.archiveChat(e,!t)}}function N(){const e=i.ChatCollection.getActive();if(e&&e.mute.canMute()){const t=e.mute.isMuted;r.Cmd.muteChat(e,!t)}}function O(){const e=i.ChatCollection.getActive();if(e&&(null!=e.pin||i.ChatCollection.filter((e=>e.pin)).length<3)){const t=Boolean(e.pin);r.Cmd.pinChat(e,!t)}}function R(){const e=i.ChatCollection.getActive();if(e){const t=e.markedUnread;r.Cmd.markChatUnread(e,!t)}}function D(){const e=i.ChatCollection.getActive();e&&r.Cmd.chatSearch(e)}function L(){const e=i.ChatCollection.getActive();e&&r.Cmd.deleteOrExitChat(e)}function B(){r.Cmd.focusNextChat(!0)}function F(){r.Cmd.focusPrevChat(!0)}function G(){r.Cmd.openModal((0,x.jsx)(S.SendLogsPopupLoadable,{}))}function U(){r.Cmd.openModal((0,x.jsx)(f.LicensesPopupLoadable,{}))}function V(){}function H(){}function K(){}function q(){r.Cmd.openComposeBoxPanel(g.PANELS.EMOJI)}function W(){r.Cmd.openComposeBoxPanel(g.PANELS.GIF)}function Y(){r.Cmd.openComposeBoxPanel(g.PANELS.STICKER)}function z(){y.ServerProps.stickerMaker&&r.Cmd.toggleStickerMaker()}},8524:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getAction=function(e){const{key:t,ctrlKey:a,metaKey:s,altKey:n,shiftKey:i}=e;if("Control"===t||"Meta"===t||"Alt"===t||"Shift"===t)return;return a&&s||a&&n?o[function(e,t){if(t&&("Tab"===e||"Enter"===e||"Backspace"===e||" "===e))return`Shift+${e}`;return e}(t,i)]:void 0},t.getAdditionalShortcuts=function(){const e={};return[...i.default.members()].forEach((t=>{const a=r(t);a.length<=1||a.slice(1).forEach((a=>{let{key:s,nativeKey:n,nativeModifier:i}=a;const r=n||s;r&&(e[l(r,i)]=t)}))})),e},t.getKey=function(e){const t=r(e);if(!t.length)return;const{key:a,nativeKey:s,nativeModifier:n}=t[0],i=s||a;return i?l(i,n):void 0},t.getShortcutKey=function(e){const t=r(e);if(t.length){const{key:e,nativeKey:a,webKey:s}=t[0];return s||e}return};var n=s(a(11700)),i=s(a(82816));function r(e){switch(e){case i.default.CONTACT_US:return[{key:"H"}];case i.default.DELETE_OR_EXIT_CHAT:return[{key:"Backspace",nativeKey:"D"}];case i.default.GO_TO_NEXT_CHAT:return[{key:"Tab",nativeModifier:"Ctrl"},{key:"}"}];case i.default.GO_TO_PREV_CHAT:return[{key:"Shift+Tab",nativeModifier:"Ctrl"},{key:"{"}];case i.default.LOGOUT:return[];case i.default.OPEN_NEW_CHAT:return[{key:"n"}];case i.default.OPEN_NEW_GROUP:return[{key:"N"}];case i.default.OPEN_PROFILE:return[{key:"p"}];case i.default.OPEN_SETTINGS:return[{key:","}];case i.default.SEARCH:return[{webKey:"/",nativeKey:"f"}];case i.default.SEARCH_IN_CHAT:return[{key:"F"}];case i.default.TOGGLE_ARCHIVE:return[{key:"E"}];case i.default.TOGGLE_MUTE:return[{key:"M"}];case i.default.TOGGLE_PIN:return[{key:"P"}];case i.default.TOGGLE_UNREAD:return[{key:"U"}];case i.default.ZOOM_IN:return[{key:"+"},{key:"="}];case i.default.ZOOM_OUT:return[{key:"-"}];case i.default.ZOOM_RESET:return[{key:"0"}];case i.default.INCREASE_PTT_SPEED:return[{key:">"}];case i.default.DECREASE_PTT_SPEED:return[{key:"<"}];case i.default.OPEN_EMOJI_PANEL:return[{key:"e"}];case i.default.OPEN_GIF_PANEL:return[{key:"g"}];case i.default.OPEN_STICKER_PANEL:return[{key:"s"}];case i.default.TOGGLE_STICKER_MAKER:return[{key:"S"}];default:return[]}}const o=function(){const e={};return[...i.default.members()].forEach((t=>{r(t).forEach((a=>{let{key:s,webKey:n}=a;const i=n||s;i&&(e[i]=t)}))})),e}();function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"CmdOrCtrl";const a="+"!==e?e:"Plus",s=1===a.length&&a.match(/[a-z]/i);if(!s)return`${t}+${(0,n.default)(a)}`;const i=a.match(/[a-z]/);return i?`${t}+${(0,n.default)(a)}`:`Shift+${t}+${a}`}},43557:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return(0,n.useContext)(i.default)};var n=a(67294),i=s(a(63824))},75820:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(48926)),i=s(a(88306)),r=a(88711),o=a(24808),l=a(7293),d=a(90657),u=a(7111),c=s(a(56891));function h(){return(h=(0,n.default)((function*(e){if(l.GK.supportsFeature(l.GK.F.MD_BACKEND)){const t=(0,u.parseAPICmd)(e);return t.resultType===r.APICmd.CATALOG?(0,d.getProductOrCatalogLinkPreview)(e,t.data.catalogOwnerJid):t.resultType===r.APICmd.PRODUCT?(0,d.getProductOrCatalogLinkPreview)(e,t.data.businessOwnerJid,t.data.productId):null}const{title:t,description:a,canonicalUrl:s,matchedText:n,preview:i,thumbnail:h,doNotPlayInline:f}=yield c.default.queryLinkPreview(e);return n&&(t||a)?{url:e,data:{title:t||void 0,description:a||void 0,canonicalUrl:s||void 0,matchedText:n,richPreviewType:"video"===i?o.ExtendedTextMessagePreviewType.VIDEO:o.ExtendedTextMessagePreviewType.NONE,thumbnail:h||void 0,doNotPlayInline:f}}:null}))).apply(this,arguments)}var f=(0,i.default)((function(){return h.apply(this,arguments)}));t.default=f},54586:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getDirectionUrl=function(e,t){const a=i.default.getLocale();return`${o}//${e},${t}?hl=${a}`},t.getMapUrl=function(e,t,a){const s=i.default.getLocale();return a?`${l}/${encodeURIComponent(a)}/@${e},${t},${u}z?hl=${s}`:r.URL.build(d,{q:`${e},${t}`,z:u,hl:s})},t.getSearchUrl=function(e){const t=i.default.getLocale();return`${l}/${encodeURIComponent(e)}/z?hl=${t}`};var n=s(a(69618)),i=s(a(43725)),r=a(2541);const{G_MAPS_DIR_URL:o,G_MAPS_SEARCH_URL:l,G_MAPS_URL:d,SEARCH_ZOOM:u}=n.default},58254:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.isSrcObjectInVideoElement=function(){void 0===f&&(f="srcObject"in document.createElement("video"));return f},t.start=function(e,t){let a,s=!1,d=0,f=!1;function p(){d&&clearTimeout(d),d=setTimeout((()=>{t?t():(!function(e){"camera"===e?n.Cmd.openModal((0,u.jsx)(o.GuidePopup,{messaging:o.Messaging.CAMERA,type:o.TYPE.GUIDE_ALLOW})):n.Cmd.openModal((0,u.jsx)(o.GuidePopup,{messaging:o.Messaging.MIC,type:o.TYPE.GUIDE_ALLOW}))}(e),f=!0)}),1e3)}return{asyncStream:(0,l.default)((t=>{let{retry:n,failCount:o}=t;return new Promise(((t,l)=>{p(),r.default?(0,r.default)(c[e][o]).then((e=>s?void h(e):(a=e,e))).then(t).catch((t=>{"NotReadableError"===t.name&&c[e][o+1]?n():l(t)})):(__LOG__(2)`MediaCapture:start() no ability to capture media`,l(new i.GUM.GUMError))}))})).catch((e=>{const t=(null==e?void 0:e.name)||e;throw new(i.GUM[t]||i.GUM.GUMError)})).finally((()=>{f&&n.Cmd.closeModal(),d&&clearTimeout(d)})),disposeStream:()=>{s=!0,a&&h(a)}}},t.stop=h;var n=a(88102),i=a(64103),r=s(a(72451)),o=a(18671),l=s(a(18586)),d=a(64551),u=a(85893);const c={camera:[{video:{width:d.ServerProps.imageMaxEdge,height:d.ServerProps.imageMaxEdge}},{video:{width:Math.min(1280,d.ServerProps.imageMaxEdge),height:Math.min(720,d.ServerProps.imageMaxEdge)}},{video:!0}],microphone:[{audio:!0}]};function h(e){if("function"==typeof e.stop)e.stop();else{const t=e.getTracks();for(let e=0;e<t.length;e++)t[e].stop()}}let f},75728:(e,t,a)=>{"use strict";var s=a(95318);t.yj=function(){if(!c())return;setInterval((()=>{new o.default.WebcMemoryStat((0,n.default)((0,n.default)({},(0,i.default)(c(),"getMemoryInfo()")),{},{hasVerifiedNumber:d.Stream.mode===d.StreamMode.MAIN,numMessages:l.MsgCollection.length})).commit()}),r.default.MEMORY_METRIC_INTERVAL)};var n=s(a(81109)),i=s(a(45095)),r=s(a(69618)),o=s(a(11339)),l=a(59871),d=a(8080);const u=Date.now();function c(){var e;const t=null===(e=performance)||void 0===e?void 0:e.memory;if(t)return{uptime:(Date.now()-u)/1e3,jsHeapSizeLimit:t.jsHeapSizeLimit,totalJsHeapSize:t.totalJSHeapSize,usedJsHeapSize:t.usedJSHeapSize}}},78454:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getResults=function(e,t){const a=t.map((e=>{let{contact:t}=e;return t})),s=(e||"").toLowerCase();return a.filter((e=>function(e,t){if(t.isMe)return!1;const a=[t.searchName||t.formattedName];!t.isMyContact&&t.notifyName&&a.push(t.notifyName.toLowerCase());return a.some((t=>function(e,t){let a=-1;do{if(t.indexOf(e,a+1)===a+1)return!0}while(-1!==(a=t.indexOf(" ",a+1)));return!1}(e,t)))}(s,e)))}},26757:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(2525)),i=s(a(41609)),r=s(a(34342));class o extends r.default{constructor(e,t){super(),this.list=e,this.selected=e.reduce(((e,t,a)=>(e[a]=!1,e)),{}),this.getter=t}init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(0,i.default)(this.selected)||((0,i.default)(e)?this.unsetAll():(this.selected=e.reduce(((e,t,a)=>{const s=this.list.indexOf(t);return e[a]=s>-1&&this.selected[s],e}),{}),this.list=e))}unsetAll(){(0,n.default)(this.selected,((e,t)=>{e&&this.set(t,!1)}))}reset(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];(0,n.default)(this.selected,((t,a)=>{t&&this.trigger(this.getter(this.list[a]),!0,!0,e)}))}set(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!this.list.length)return;const s=Math.min(Math.max(e,-1),this.list.length-1),n=s>-1?this.list[s]:void 0;n&&(this.selected[s]&&!t||!this.selected[s]&&t)&&(this.selected[s]=t,this.trigger(this.getter(n),t,a))}setVal(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=this.list.indexOf(e);-1===s&&(s=this.list.length,this.list.push(e),this.selected[s]=!1),this.set(s,t,a)}setFirst(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];(0,i.default)(this.list)||this.set(0,!0,e)}setLast(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];(0,i.default)(this.list)||this.set(this.list.length-1,!0,e)}getSelected(){return this.list.reduce(((e,t,a)=>(this.selected[a]&&e.push(t),e)),[])}isSelected(e){return!!this.selected[this.list.indexOf(e)]}isInList(e){return this.list.includes(e)}}t.default=o},59779:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.calculateMuteExpiration=function(e){if(e===Number.POSITIVE_INFINITY)return i.default.MUTE_ALWAYS_EXPIRATION_SENTINEL;return 60*e*60+(0,n.default)().unix()},t.getAllMuteDurations=l,t.getDefaultMuteDuration=function(){return l()[0].duration};var n=s(a(30381)),i=s(a(69618)),r=s(a(43725)),o=a(64551);function l(e){return e?[{label:r.default.t(875),duration:1},{label:r.default.t(878),duration:8},{label:r.default.t(874),duration:24},{label:r.default.t(876),duration:168}]:[{label:r.default.t(878),duration:8},{label:r.default.t(876),duration:168},o.ServerProps.muteAlways?{label:r.default.t(879),duration:Number.POSITIVE_INFINITY}:{label:r.default.t(877),duration:8760}]}},59335:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(81109)),i=s(a(6479)),r=a(31218),o=a(69951),l=a(88102),d=s(a(69618)),u=a(57701),c=s(a(43725)),h=a(59871),f=a(31464),p=a(31515);const m=["title","notification"];t.default=class{constructor(e,t,a,s){if(this.close=()=>{this.notification&&this._waitForInteractionStop().then((()=>{this.notification&&(0,p.isFunction)(this.notification.close)&&this.notification.close()})).catch((()=>{}))},this._onClose=()=>{var e;(this.waitingPromise.resolver(),window.removeEventListener("beforeunload",this.close),this.notification&&(this.notification.removeEventListener("click",this._onClick),this.notification.removeEventListener("close",this._onClose)),this.msg&&this.msg.off("change:type",this._onRevoke),(0,u.receiveReactionsEnabled)()&&this.reactionSender)&&(this.reactionSender.off("revoked change:read",this._onReactionRemove),null===(e=this.chat)||void 0===e||e.off("change:reactionSquelch",this._onChatOpenUpdateMsgLevelSquelch))},this._onClick=()=>{window.focus(),this.onClick();const e=this.chat,t=this.msg;if(!e)return;const a=t&&t!==e.msgs.last()?e.getSearchContext(t):void 0;l.Cmd.openChatAt(e,a).then((t=>{t&&l.Cmd.focusChatTextInput(e)})),l.Cmd.closeModalMedia(),this.close()},this._onRevoke=()=>{this.msg&&this.msg.type===d.default.MSG_TYPE.REVOKED&&this.close()},this._onReactionRemove=()=>{this.close()},this._onChatOpenUpdateMsgLevelSquelch=()=>{null!=this.chat&&null!=this.msg&&this.chat.reactionSquelch===d.default.SQUELCH_RESET_VALUE&&(this.msg.squelch=d.default.SQUELCH_RESET_VALUE)},this.msg=h.MsgCollection.get(t),this.chat=o.ChatCollection.get(e),(0,u.receiveReactionsEnabled)()&&a){const e=f.ReactionsCollection.get(t);if(e){const{reactionSenderModel:t}=f.ReactionsCollection.getAggregateEmojiAndSender(e,a);this.reactionSender=t}else __LOG__(3)`base_notification_wrapper:constructor Reaction model not found`}const _=new Promise((e=>{this.waitingPromise={resolver:e}}));this.waitingPromise.promise=_;const{title:g,notification:v}=s,C=(0,i.default)(s,m),S=!!r.CallCollection.get(t);let y=e.toString();(S||(0,u.receiveReactionsEnabled)()&&this.reactionSender)&&(y=t);try{var b;if(this.notification=new v(g,(0,n.default)({tag:y,renotify:!0,dir:"auto",lang:c.default.getLocale(),silent:!0},C)),this.notification.addEventListener("click",this._onClick),this.notification.addEventListener("close",this._onClose),this.msg&&this.msg.on("change:type",this._onRevoke),(0,u.receiveReactionsEnabled)()&&null!=this.reactionSender)this.reactionSender.on("revoked change:read",this._onReactionRemove),null===(b=this.chat)||void 0===b||b.on("change:reactionSquelch",this._onChatOpenUpdateMsgLevelSquelch);window.addEventListener("beforeunload",this.close)}catch(e){__LOG__(2)`Failed to create notification: ${e.name}:${e.message}`,this.waitingPromise.resolver()}}onClick(){}_waitForInteractionStop(){return Promise.resolve()}waitForClose(){return this.waitingPromise.promise}detach(){this._onClose()}}},96669:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.cancelCallNotification=function(e){e&&Y(j,e.toString())},t.closeNotifications=function(e){if(!e||!e.id)return;Y(k,e.id.toString()),Y(j,e.id.toString())},t.isArchivedAndNotMentioned=K,t.isMeUserMentionedOrQuoted=V,t.shouldNotify=L,t.shouldNotifyForType=B,t.showCallNotification=function(e,t,a,s){if(!e||!t||E.MuteCollection.globalMute().isMuted)return;if(window.Notification&&window.Notification.permission===f.default.PERMISSION_ALLOWED&&E.MuteCollection.getGlobalNotifications()){const n=p.ContactCollection.get(e),i=n?n.formattedName:(0,w.default)(e);let r;r=s?a?S.default.t(639,{name:i}):S.default.t(640,{name:i}):a?S.default.t(641,{name:i}):S.default.t(642,{name:i});const o=S.default.t(638);q({map:j,key:e.toString(),wid:e,mid:t,defaultIcon:f.default.USER_DEFAULT_ICON,title:r,text:o})}var n;E.MuteCollection.getGlobalSounds()&&((null===(n=j.get(e.toString()))||void 0===n?void 0:n.promise)||Promise.resolve()).then(T.playNotification).catch((()=>{}))},t.showMsgNotification=function(e){const t=e.chat;if(document.hasFocus()&&t.active)return;if(E.MuteCollection.globalMute().isMuted)return;if(F(t))return;if(!L(e))return;if(_.GK.supportsFeature(_.GK.F.MD_BACKEND)&&C.OfflineMessageHandler.isResumeOnSocketDisconnectInProgress())return;if(window.Notification&&window.Notification.permission===f.default.PERMISSION_ALLOWED&&E.MuteCollection.getGlobalNotifications()){let a=(0,c.default)(e);a&&a.charCodeAt(0)>=128&&(a=" "+a);let s=f.default.USER_DEFAULT_ICON;t.isGroup&&(s=f.default.GROUP_DEFAULT_ICON),e.isProductListMessage&&(s=(0,y.convertToDataURI)(e.productListHeaderImage));const n=t.isGroup?d.default._("WhatsApp group message",null,{hk:"2updyb"}):S.default.t(385),i=t.contact.formattedName||n.toString();q({map:k,key:t.id.toString(),wid:t.id,mid:e.id.toString(),defaultIcon:s,title:i,text:a,canReply:t.canSend&&!t.isSuspendedGroup()})}var a;E.MuteCollection.getGlobalSounds()&&(t.id&&(null===(a=k.get(t.id.toString()))||void 0===a?void 0:a.promise)||Promise.resolve()).then(T.playNotification).catch((()=>{}))},t.showReactionNotification=function(){return D.apply(this,arguments)},t.shutdownAsNeeded=function(){k.forEach(((e,t)=>{Y(k,t)})),j.forEach(((e,t)=>{Y(j,t)}))};var n=s(a(48926)),i=a(89385),r=a(40265),o=a(50796),l=a(38284),d=s(a(48360)),u=s(a(70714)),c=s(a(88820)),h=a(69951),f=s(a(69618)),p=a(19380),m=a(99234),_=a(7293),g=a(57701),v=s(a(63928)),C=a(28237),S=s(a(43725)),y=a(81309),b=a(84886),E=a(72472),T=a(32956),x=s(a(49544)),M=a(82039),P=s(a(84644)),A=s(a(68132)),I=a(77591),w=s(a(39938));const k=new Map,j=new Map,N=new Map,O=6e4;function R(e,t){return N.has(t)}function D(){return(D=(0,n.default)((function*(e){const t=yield(0,b.getMsgByMsgKey)(e.parentMsgKey),s=new(0,a(17304).Msg)(t);if(null==t)return void __LOG__(3)`showReactionNotification: parentMsg is not present in the MsgCollection`;const n=s.chat,i=`${s.id.toString()}-${e.senderUserJid}`,r=R(0,i);if((!document.hasFocus()||!n.active)&&!E.MuteCollection.globalMute().isMuted&&!E.MuteCollection.globalReactionsMute().isMuted&&(r||!F(n,!1))&&(r||!U(n,s))&&!n.mute.isMuted&&!(H(n)||_.GK.supportsFeature(_.GK.F.MD_BACKEND)&&C.OfflineMessageHandler.isResumeOnSocketDisconnectInProgress())){if(window.Notification&&window.Notification.permission===f.default.PERMISSION_ALLOWED&&E.MuteCollection.getGlobalNotifications()){let t=(0,c.default)(s,e.reactionText,e.senderUserJid);t&&t.charCodeAt(0)>=128&&(t=" "+t);const a=n.isGroup?f.default.GROUP_DEFAULT_ICON:f.default.USER_DEFAULT_ICON,r=n.isGroup?d.default._("WhatsApp group message",null,{hk:"2updyb"}):S.default.t(385),o=n.contact.formattedName||r.toString();q({map:N,key:i,wid:n.id,mid:s.id.toString(),defaultIcon:a,title:o,text:t,reactionSenderJid:e.senderUserJid,canReply:!1,canMarkAsRead:!1})}var o;if(E.MuteCollection.getGlobalSounds())(i&&(null===(o=N.get(i))||void 0===o?void 0:o.promise)||Promise.resolve()).then(T.playNotification).catch((()=>{}))}}))).apply(this,arguments)}function L(e){return!function(e){const t=e.chat;if(!t.mute.isMuted)return!1;if(!t.isGroup)return!0;if(V(e)){const t=h.ChatCollection.get(e.sender);return!0===(null==t?void 0:t.mute.isMuted)}return!0}(e)&&(!K(e)&&B(e))}function B(e){return!e.isFutureproof}function F(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e.isGroup)return!1;if(e.isGroup&&e.isReadOnly)return!1;const a=Date.now(),s=e.squelch||0;return!(a>s)||!!t&&(v.default.find(e.id).then((t=>{if(null!=t){const a=G(e.id,t);e.squelch=Date.now()+a}})).catch((0,o.filteredCatch)(I.WebdDrop,(function(){e.squelch=Date.now()+O}))),!1)}function G(e,t){const a=t.participants.length;return 1e3*Math.min(120,30+5*a)}function U(e,t){if(!e.isGroup)return!1;return!(Date.now()>(t.squelch||0))||(v.default.find(e.id).then((a=>{if(null!=a){const s=G(e.id,a),n=Date.now()+s;t.squelch=n,e.reactionSquelch===f.default.SQUELCH_RESET_VALUE&&(e.reactionSquelch=n)}})).catch((0,o.filteredCatch)(I.WebdDrop,(function(){t.squelch=Date.now()+O,e.reactionSquelch===f.default.SQUELCH_RESET_VALUE&&(e.reactionSquelch=Date.now()+O)}))),!1)}function V(e){const t=(0,m.getMaybeMeUser)();return e.isMentioned(t)||e.isQuoted(t)}function H(e){return!!(0,g.archiveV2Supported)()&&(!!A.default.showArchiveV2&&!!e.archive)}function K(e){const t=e.chat;if(!(0,g.archiveV2Supported)())return!1;if(!A.default.showArchiveV2)return!1;if(!t.archive)return!1;if(!t.isGroup)return!0;if(V(e)){const t=h.ChatCollection.get(e.sender);return!0===(null==t?void 0:t.mute.isMuted)}return!0}function q(e){let{map:t,key:a,wid:s,mid:n,defaultIcon:d,title:c,text:h,reactionSenderJid:p,canReply:m,canMarkAsRead:_}=e;const g=new u.default,v=g.signal,C=(0,l.promiseTimeout)((0,P.default)(M.ProfilePicThumbCollection.find(s),v),1500,"showNotificationTimeout").then((function(e){var t;if(v.aborted)throw new i.AbortError;const a=null!==(t=null==e?void 0:e.img)&&void 0!==t?t:d;return(0,T.cachePath)(a)})).catch((0,o.filteredCatch)([I.WebdDrop,r.TimeoutError],(function(){return __LOG__(2)`NotificationBackend:IconLoadTimeoutError:${s.toString()}`,(0,T.cachePath)(d)}))).then((e=>{if(v.aborted)throw new i.AbortError;if(window.Notification.permission!==f.default.PERMISSION_ALLOWED)throw new i.AbortError("Permission Denied");const r=new x.default(s,n,p,c,h,e,m,_);return r.waitForClose().then((()=>{W(t,a,r)})),r}));return C.then((e=>{const s=t.get(a);s&&(s.value=e)})).catch((0,i.catchAbort)((function(){W(t,a)}))),t.set(a,{promise:C,controller:g}),C}function W(e,t,a){const s=e.get(t);if(s){if(a){if(!s.value)return;if(a!==s.value)return}e.delete(t)}}function Y(e,t){const a=e.get(t);if(a){if(a.value){a.value.close()}else a.controller.abort();e.delete(t)}}},32956:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.cachePath=function(e){return Promise.resolve(e)},t.playNotification=function(){i.play().catch((()=>{}))};var n=s(a(69618));const i=new window.Audio(n.default.NOTIFICATION_TONE_PATH)},49544:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(59335)),i=a(70449),r=a(2541);class o extends n.default{constructor(e,t,a,s,n,o){super(e,t,a,{title:i.EmojiUtil.normalizeAllEmojis(s),notification:window.Notification,body:i.EmojiUtil.normalizeAllEmojis(n),icon:r.URL.relToAbs(o)})}}t.default=o},48690:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return a.test(e)?e.replace(/[^0-9]/g,""):null};const a=/^[0-9+()\- ]+$/},64658:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.liveLocationIcon=function(e){let t="live-location";e&&(t+="-active");const a=function(){switch(s.Conn.platform){case s.PLATFORMS.ANDROID:case s.PLATFORMS.SMBA:return"android";case s.PLATFORMS.IPHONE:case s.PLATFORMS.SMBI:case s.PLATFORMS.IPAD:case s.PLATFORMS.IPOD:return"iphone";case s.PLATFORMS.WP7:return"wp";default:return""}}();a&&(t+="-"+a);return t};var s=a(17239)},92157:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.prepareCtwaContextSend=function(e,t){if(t)return(0,i.default)({},t);if(null==e?void 0:e.sourceUrl){var a,s;const t=e.sourceUrl;if(null==t||""===t)return;const n=l.findLink(e.sourceUrl,!1,(0,o.getMaybeMeUser)());return{sourceUrl:t,sourceType:"",sourceId:"",mediaType:r.ExternalAdReplyInfoMediaType.NONE,isSuspiciousLink:!(null===(a=null==n||null===(s=n.suspiciousCharacters)||void 0===s?void 0:s.size)||void 0===a||!a)}}return};var i=n(a(81109)),r=a(24808),o=a(99234),l=s(a(86688))},68161:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;class a{constructor(e){this.promise=e,this.lastUsedTime=this.createdTime=+Date.now()}}t.default=class{constructor(e,t){let{maxCached:a=10,maxAge:s=1/0,shouldCache:n}=t;this._cache={},this._maxCached=a,this._maxAge=s,this._createPromiseFunc=e,this._shouldCacheFunc=n}getOrRun(e){const t=this._cache;if(this._maxAge!==1/0){const e=Date.now()-this._maxAge,a=Object.keys(t);for(let s=0;s<a.length;s++){const n=a[s];t[n].createdTime<e&&delete t[n]}}const s=t[e];if(s)return s.lastUsedTime=+Date.now(),s.promise;const n=Object.keys(t);if(n.length>=this._maxCached){let e,a;for(let s=0;s<n.length;s++){const i=n[s],r=t[i];(null==a||r.lastUsedTime<a)&&(a=r.lastUsedTime,e=i)}e&&delete t[e]}for(var i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];const l=this._createPromiseFunc.apply(void 0,[e,...r]);return t[e]=new a(l),l.then((t=>{const a=this._shouldCacheFunc;a&&this._cache[e]===l&&!a(t)&&delete this._cache[e]})).catch((()=>{this._cache[e]===l&&delete this._cache[e]})),l}}},55708:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(81109)),i=a(93602),r=s(a(69618)),o=a(99234),l=s(a(24732)),d=s(a(38271));const u="before",c="after",h=12;function f(e,t,a){let s=t;const n=e.toArray(),i=a===u?-1:1;return{hasNext:()=>s>=0&&s<n.length,next(){const e=n[s];return e||__LOG__(3)`Invalid cursor at ${s}, array.length = ${n.length}, element = ${e}`,s+=i,e}}}function p(e,t,a){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,n=arguments.length>4?arguments[4]:void 0;const o=(0,l.default)()*s,u=f(e,t,a);let c,p=0,m=0;for(;u.hasNext();){const e=u.next(),t=(0,d.default)(e),a=2*(e.isNotification?1:0)+e.isSentByMe;if(p+=t+(a&&a===c?2:h),m++,p>o)break;if(m>=n)break;const s=e.asGroupedSticker,l=null!=e.asAlbumAsset;if(s||l){const t=[];let a=!1,c=1;if(s){let s;if(u.hasNext()){if(s=u.next(),t.push(s),m++,m>=n)break;(0,i.canBeGroupedAsAlbum)(e.safe(),s.safe())&&s.asGroupedSticker&&(a=!0)}}if(l){let a,s=e;for(;u.hasNext()&&c<r.default.ALBUM_MAX_SIZE&&(a=u.next(),t.push(a),m++,!(m>=n))&&(0,i.canBeGroupedAsAlbum)(s.safe(),a.safe())&&a.asAlbumAsset;)c++,s=a}if(s&&!a||l&&c<r.default.ALBUM_MIN_SIZE){if(p+=t.reduce(((e,t)=>e+(0,d.default)(t)),0),p>o)break}}c=a}return m}function m(e,t,a){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,n=arguments.length>4?arguments[4]:void 0;const u=(0,l.default)()*s,c=f(e,t,a);let p,m=0,_=0;for(;c.hasNext();){const e=c.next(),t=(0,d.default)(e),a=e.author||(e.isSentByMe?(0,o.getMaybeMeUser)():void 0);if(m+=t+(a&&!e.isSentByMe&&a!==p?19:0)+(a&&a===p?2:h),_++,m>u)break;if(_>=n)break;const s=e.asGroupedSticker,l=null!=e.asAlbumAsset;if(s||l){const t=[];let a=!1,o=1;if(s){let s;if(c.hasNext()){if(s=c.next(),t.push(s),_++,_>=n)break;(0,i.canBeGroupedAsAlbum)(e.safe(),s.safe())&&s.asGroupedSticker&&(a=!0)}}if(l){let a,s=e;for(;c.hasNext()&&o<r.default.ALBUM_MAX_SIZE&&(a=c.next(),t.push(a),_++,!(_>=n))&&(0,i.canBeGroupedAsAlbum)(s.safe(),a.safe())&&null!=a.asAlbumAsset;)o++,s=a}if(s&&!a||l&&o<r.default.ALBUM_MIN_SIZE){if(m+=t.reduce(((e,t)=>e+(0,d.default)(t)),0),m>u)break}}p=a}return _}function _(e,t,a){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,n=arguments.length>4?arguments[4]:void 0;const i=(0,l.default)()*s,r=f(e,t,a);let o=0,u=0;for(;r.hasNext();){const e=r.next();if(o+=(0,d.default)(e)+65,u++,o>i)break;if(u>=n)break}return u}function g(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c;const s=2*(0,l.default)(),n=f(e,t,a);let[i,r,o]=[0,!0,null];for(;n.hasNext();){const e=n.next(),t=(0,d.default)(e),a=2*(e.isNotification?1:0)+e.isSentByMe;if(i+=t+(a&&a===o?2:h),i>s){r=!1;break}o=a}return r}class v{static create(e){const{msgCollection:t,focusedMsgKey:a,type:s,maxInitialCount:n=Number.MAX_SAFE_INTEGER}=e;return new v({type:s}).init(a,t,n)}constructor(e){const{type:t,before:a,after:s,focusedMsgKey:n,prevFocusedMsgKey:i}=e;this._type=t,this._focusedMsgKey=n,this._prevFocusedMsgKey=i,this.before=a||0,this.after=s||0}_cloneWith(e){return new v((0,n.default)({type:this._type,before:this.before,after:this.after,focusedMsgKey:this._focusedMsgKey,prevFocusedMsgKey:this._prevFocusedMsgKey},e))}_getCursorSize(e,t,a,s,n){return function(e){switch(e){case r.default.RENDER_CURSOR.CONVERSATION:return p;case r.default.RENDER_CURSOR.GROUP_CONVERSATION:return m;case r.default.RENDER_CURSOR.STARRED_DRAWER:return _;default:return p}}(this._type)(e,t,a,s,n)}getStart(e){return Math.max(C(this._focusedMsgKey,e,this._type)-this.before,0)}getEnd(e){return Math.min(C(this._focusedMsgKey,e,this._type)+this.after+1,e.length)}hasBefore(e){return C(this._focusedMsgKey,e,this._type)-this.before>0}hasAfter(e){return C(this._focusedMsgKey,e,this._type)+this.after<e.length-1}init(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_SAFE_INTEGER;return new v({type:this._type,before:0,after:0,focusedMsgKey:e}).loadBefore(t,{factor:1,maxCount:a}).loadAfter(t,{factor:1,maxCount:a})}setFocusedMsgKey(e,t){const a=C(this._focusedMsgKey,e,this._type),s=C(t,e,this._type);let n,i;return t?(i=this.after-(s-a),n=this.before+(s-a)):(n=this.before+this.after,i=0),this._cloneWith({focusedMsgKey:t,before:n,after:i})._updatePrev(e)}ensureValidFocus(e){const t=null!=this._prevFocusedMsgKey&&null==e.get(this._prevFocusedMsgKey),a=null!=this._focusedMsgKey&&null==e.get(this._focusedMsgKey);let s=this;return t&&(s=s._updatePrev(e)),a&&(s=s.focusBefore(e)),s}_updatePrev(e){const t=C(this._focusedMsgKey,e,this._type);return this._cloneWith({prevFocusedMsgKey:t>0?e.at(t-1).id:void 0})}focusBefore(e){return this._cloneWith({focusedMsgKey:this._prevFocusedMsgKey})._updatePrev(e)}loadBefore(e,t){const{count:a,maxCount:s=Number.MAX_SAFE_INTEGER,factor:n=2}=t||{},i=null!=a&&0!==a?a:this._getCursorSize(e,Math.max(0,this.getStart(e)-1),u,n,s);return this._cloneWith({before:this.before+i})}loadAfter(e,t){const{count:a,maxCount:s=Number.MAX_SAFE_INTEGER,factor:n=2}=t||{},i=null!=a&&0!==a?a:this._getCursorSize(e,this.getEnd(e),c,n,s);return this._cloneWith({after:this.after+i})}loadBeforeCapped(e,t){const{count:a,factor:s=2}=t||{};return g(e,this.getStart(e),c)?this.loadBefore(e,{count:a,factor:s}):this}resetBeforeCursor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_SAFE_INTEGER;if(!g(e,this.getStart(e),c)){const a=Math.max(0,this.getEnd(e)-1),s=this._getCursorSize(e,a,u,2,t);return this._cloneWith({before:Math.min(this.before,s)})}return this}}function C(e,t,a){if(e){const a=t.get(e),s=t.indexOf(a);if(-1!==s)return s}return function(e){switch(e){case r.default.RENDER_CURSOR.CONVERSATION:case r.default.RENDER_CURSOR.GROUP_CONVERSATION:return r.default.RENDER_CURSOR.RECENT_AT_BOTTOM;case r.default.RENDER_CURSOR.STARRED_DRAWER:return r.default.RENDER_CURSOR.RECENT_AT_TOP;default:return r.default.RENDER_CURSOR.RECENT_AT_BOTTOM}}(a)===r.default.RENDER_CURSOR.RECENT_AT_TOP?0:t.length-1}t.default=v},39680:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return/\s\s+/.test(e)?e.replace(/\s\s+/g,(e=>{let a="";for(let s=0;s<e.length;s++)a+=t&&"\n"===e[s]?"\n":"";return a})):e}},49905:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(34342));class i extends n.default{constructor(e){super(),this.isSelectable=e}setSelectable(e){return this.isSelectable=e,this.trigger("update-selectable",e),this.isSelectable}}t.default=i},64645:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=class{constructor(){this.initSessionId()}initSessionId(){this.sessionId=this.newSessionId()}newSessionId(){return this.sessionId=Math.floor(2147483648*Math.random()),this.sessionId}}},99960:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reconnect=void 0;var s=a(8080),n=a(65044);const i=(new class{constructor(){this.isReconnecting=!1,this.reconnectIfDisconnected=()=>{this.isReconnecting||s.Stream.displayInfo!==s.StreamInfo.OFFLINE||(this.isReconnecting=!0,n.Socket.poke(),n.Socket.summary(),setTimeout((()=>this.isReconnecting=!1),3e3))}}}).reconnectIfDisconnected;t.reconnect=i},70242:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const{delay:a=0}=null!=t?t:{};let s,n,i;const r=t=>{(null==i||t-i>=a)&&(e(t),i=t),n||(s=requestAnimationFrame(r))};return s=requestAnimationFrame(r),()=>{n=!0,cancelAnimationFrame(s)}}},32217:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.requestAccountInfoUrl=function(){return r.URL.build(n.default.REQUEST_ACCOUNT_INFO_LINK,{lg:i.default.getLocale()})},t.securityUrl=function(){return r.URL.build(n.default.SECURITY_LINK,{lg:i.default.getLocale()})};var n=s(a(69618)),i=s(a(43725)),r=a(2541)},54325:(e,t,a)=>{"use strict";var s=a(95318);t.D=function(e){let{action:t,message:s}=e;switch(t){case r.default.REQUEST_STREAMING_INFO:return function(e){const t=d.MsgCollection.get(e);return t?(0,o.videoStreamingInfo)(t):null}(s.key);case r.default.EXP_BACKOFF:return a(22906).expDelaySec(s.generation,60).then((()=>u.default.waitIfOffline({signal:(new i.default).signal})));case r.default.REQUEST_RMR:return function(){return h.apply(this,arguments)}(s);case r.default.SEND_STREAMING_CHUNK:const e=s.msgKey,t=d.MsgCollection.get(e);if(!t)return void delete f[e.toString()];let n;f.hasOwnProperty(e)?n=f[e.toString()]:f[e.toString()]=n=new c(t.size),n.push(s.data),n.isComplete()&&((0,o.manuallySetMedia)({msg:t,media:n.serialize(),rmrReason:l.default.WEBC_RMR_REASON_CODE.VIDEO_STREAMING}),delete f[e.toString()]);break;default:return Promise.reject(new Error("Invalid Video Streaming Action"))}};var n=s(a(48926)),i=s(a(70714)),r=s(a(37362)),o=a(78986),l=s(a(11339)),d=a(59871),u=s(a(57220));class c{constructor(e){this.ranges=[],this.buffer=[],this.size=e,e||__LOG__(3)`video buffer falsy size: ${e}`}push(e){this.buffer.push(e),this.add(e.start,e.end)}add(e,t){let a=e;const s=this.ranges;for(let e=0;e<s.length;e++){let[n,i]=s[e];if(!(a>i+1)){if(t+1<n)return s.splice(e,0,[a,t]);for(;e+1<s.length;){const[r,o]=s[e+1];if(t+1<r)break;a=Math.min(a,n),s.splice(e,1),n=r,i=o}return void(s[e]=[Math.min(a,n),Math.max(t,i)])}}return s.push([a,t])}isComplete(){const e=this.ranges,t=this.size;return!!t&&(1===e.length&&0===e[0][0]&&e[0][1]===t-1)}serialize(){const e=new Uint8Array(this.size),t=this.buffer;for(let a=0;a<t.length;a++){const{start:s,buffer:n}=t[a];e.set(new Uint8Array(n),s)}return e}}function h(){return(h=(0,n.default)((function*(e){const t=d.MsgCollection.get(e.key);if(!t)return null;throw yield t.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:l.default.WEBC_RMR_REASON_CODE.VIDEO_STREAMING,isUserInitiated:!0}),new Error("downloaded media instead of streaming")}))).apply(this,arguments)}const f={}},36123:(e,t,a)=>{"use strict";var s=a(20862),n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return new Promise(((t,a)=>{const s=new i.default;s.onerror=function(e){s.terminate(),a(new r.DecodeWebpResultsError("worker error",e))},s.onmessageerror=function(e){s.terminate(),a(new r.DecodeWebpResultsError("worker message error",e))},s.onmessage=e=>{s.terminate();const a=e.data;t(a)},s.postMessage({webpBuffer:e},[e])}))};var i=n(a(25304)),r=s(a(64103))},72179:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MediaListener=function(e){const{parent:t}=e,a=(0,r.useModelValues)(e.mediaData,["isGif"]);return(0,s.useEffect)((()=>{t.forceUpdate()}),[t,a]),null},t.SelectionListener=function(e){const{msgId:t,selectedMessages:a,parent:s}=e;return(0,i.useListener)(a,t,(e=>{s.onSelectChange(e)})),null},t.WhileFocusedListener=function(e){const{parent:t}=e;return(0,i.useListener)(n.Cmd,"scroll_to_focused_msg",((e,a)=>{t.scrollMsg(e,a)})),(0,i.useListener)(n.Cmd,"flash_focused_msg",(()=>{var e;null===(e=t.highlight)||void 0===e||e.call(t)})),(0,i.useListener)(n.Cmd,"flash_mention_msg",(()=>{var e;null===(e=t.highlightMention)||void 0===e||e.call(t)})),null};var s=a(67294),n=a(88102),i=a(19529),r=a(49082)},2818:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(8584),i=s(a(36090));function r(e){return(e.getHours()<<6|e.getMinutes())<<5|e.getSeconds()/2}function o(e){return(e.getFullYear()-1980<<4|e.getMonth()+1)<<5|e.getDate()}const l=/[^\x00-\x7F]/g;t.default=class{constructor(){this.files=[],this.filenameCount={}}add(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date,s=function(e){return e.replace(/\\/,"/").replace(l,"")}(t);this.filenameCount[s]>=0?(this.filenameCount[s]+=1,s=s.replace(/\.(\w+)$/," ("+this.filenameCount[s]+").$1")):this.filenameCount[s]=0,this.files.push([e,{crc:(0,i.default)(e),path:s,date:a}])}create(){let e=0,t=0,a=0;const s=[],i=[];this.files.forEach((l=>{const[d]=l,u=d.size(),c=function(e){let[t,{path:a,crc:s,date:i}]=e;const l=new n.Binary(void 0,!0);return l.ensureCapacity(30+a.length),l.writeUint32(67324752),l.writeUint8(10),l.writeUint8(0),l.writeUint16(0),l.writeUint16(0),l.writeUint16(r(i)),l.writeUint16(o(i)),l.writeUint32(s),l.writeUint32(t.size()),l.writeUint32(t.size()),l.writeUint16(a.length),l.writeUint16(0),l.writeString(a),l}(l),h=function(e,t){let[a,{path:s,crc:i,date:l}]=e;const d=new n.Binary(void 0,!0);return d.ensureCapacity(46+s.length),d.writeUint32(33639248),d.writeUint8(10),d.writeUint8(0),d.writeUint8(10),d.writeUint8(0),d.writeUint16(0),d.writeUint16(0),d.writeUint16(r(l)),d.writeUint16(o(l)),d.writeUint32(i),d.writeUint32(a.size()),d.writeUint32(a.size()),d.writeUint16(s.length),d.writeUint16(0),d.writeUint16(0),d.writeUint16(0),d.writeUint16(0),d.writeUint32(0),d.writeUint32(t),d.writeString(s),d}(l,a),f=c.size()+u;a+=f,e+=f+h.size(),t+=h.size(),i.push(c,d),s.push(h)}));const l=function(e,t,a){const s=new n.Binary(void 0,!0);return s.ensureCapacity(22),s.writeUint32(101010256),s.writeUint16(0),s.writeUint16(0),s.writeUint16(e),s.writeUint16(e),s.writeUint32(t),s.writeUint32(a),s.writeUint16(0),s}(this.files.length,t,a),d=new n.Binary(void 0,!0);return d.ensureCapacity(e+l.size()),d.write(...i,...s,l),d}}},87740:(e,t,a)=>{"use strict";var s=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return o.apply(this,arguments)};var n=s(a(48926)),i=a(8584),r=s(a(2818));function o(){return(o=(0,n.default)((function*(e){const t=yield Promise.all(e.map((e=>{let{blob:t}=e;return d(t)}))),a=new r.default;return t.forEach(((t,s)=>a.add(t,e[s].name))),l(a.create())}))).apply(this,arguments)}function l(e){return new Blob([e.readByteArray()],{type:"application/zip"})}function d(e){let t;return new Promise(((a,s)=>{t=new FileReader,t.addEventListener("loadend",(()=>{a(i.Binary.build(t.result))})),t.addEventListener("error",(()=>{const e=t.error;s(e)})),t.readAsArrayBuffer(e)}))}},6258:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const a=[];let s=0;for(;e.length>s;)a.push(e.slice(s,s+t)),s+=t;return a}},58184:(e,t,a)=>{e.exports=a.p+"img/ddm-banner_3366b2917468dd7a8fcd062fdbaadda8.png"},46023:(e,t,a)=>{e.exports=a.p+"img/sticker-empty_9d7feb47a66ef5b59cc731acafd02266.png"},73465:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={container:"_1bJJV",child:"_3IfUe"}},87853:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={editPencil:"_3zzj0",section:"_1CtGf",smallMargin:"_2kdzY",noMargin:"_4qzs-",sectionPrimaryIcon:"_1um9l",noMarginSmallGutter:"_3PzU9",fieldPrimaryIcon:"_1PxZK",sectionMain:"_35MnE",sectionContainerMain:"_2K7Vn",sectionEmptyText:"_2-kkk"}},4990:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={addToCartIcon:"qjoMT"}},158:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={container:"Zu0md",containerFull:"_2wJ6P",icon:"_2FjqD",containerCircleIconFull:"_1jy-1",name:"_3gkyZ",labelFilter:"E_3Ky",iconContainer:"yHoVW",drawerTitle:"_1xeSZ",circleIcon:"l_tuI"}},67326:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={description:"_3tH91",price:"_1Hmzo",shareButton:"blTBG",detailContainer:"_3XGJS",catalogListItem:"_3DpBF"}},77068:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={thumbsContainer:"_1SQLC",scrollContainer:"_2Pvh-",viewerThumbs:"_2sa0m",thumbPadding:"_1F2ck"}},83407:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={mediaPanelHeader:"_2G-71",info:"_3Pus2",productNameIcon:"_1K1Tj",productName:"_3Qr5g",mediaPanelTools:"LrQrj",infoName:"_1xr5Z"}},4976:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={mediaViewerAnimate:"_10kVl","media-viewer-animate":"_10kVl",cursorZoomOut:"_3UVmf",mediaViewer:"i93sZ",mediaContent:"_12Vwz",btnMediaNext:"_3AcYv",btnMediaPrev:"_23jn_",media:"_7JDGB",mediaWithCaption:"_2GyNb",mediaCaption:"_30vHf",captionHidden:"_10alZ"}},57822:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={mediaCanvas:"_39mHA",mediaCanvasClickable:"O7PYw",canvasBody:"_2qgkN",list:"_2FQIP",listWrapper:"eps5j",canvasComponent:"_3CwTq",canvasComponentLarge:"_1paeH",canvasSecondRow:"-z5j7",canvasComponentLargeGallerySpacing:"_17gTu",viewerFlow:"_3tci9",active:"_24-j7",overlay:"_1otWK",placeholder:"_3cAxP",squareThumb:"_11pnn",gradient:"UHL6h"}},75089:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={archivedIcon:"_3u7yy",unreadCountWrapper:"hlFup",wrapper:"_3hD9c",iconMentions:"TPCLW"}},65615:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={container:"_3z9_h"}},58137:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={block:"Hbbsz",chevron:"gGn1n",actionText:"_3jR9Y"}},48651:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={action:"_1-SiY",wrapper:"_2XcXo",butterbar:"_22XJC",icon:"_384go",body:"_1Yy79",controls:"_3UDm1",controlsIcon:"_1K1wg",title:"_2z7gr",text:"_2BxMU",notification:"_2C_7j",update:"xx0PQ",computer:"f2_qc",phone:"_3C1U5",battery:"_1sNMG",notice:"_3izPF",noticeSmb:"_1d_P-",noticeSvgWrapper:"_2JUqz",fatalSvgWrapper:"afTH_",fatal:"cwVT9",nuxGreenSvgWrapper:"_3aqmZ",nuxGreen:"_3Olve",nuxBlueSvgWrapper:"_2Abc7",nuxBlue:"_3tjOE",mdOptInAwareness:"_3EMDj",mdOptInLink:"_1OdW7",mdOptInCountdown:"ZklOu"}},92297:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={chatstateTyping:"_16h0X",loadingIndicate:"_32N7I"}},29713:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={markerAdmin:"_3bTNW",markerInvited:"_3Vyb8",chatControls:"_2NICU",screenName:"_1ux8Y",contactSmall:"_2cL8h"}},59405:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={icon:"_1pJ9J",iconPinned:"_2XH9R",archived:"_3f7yK",iconMentions:"_2ky6D"}},23771:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={italic:"_1ZqY2",product:"JZX9V",last:"Hy9nV"}},34769:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={ack:"_2qo4q",ackBlue:"_3NIfV"}},44597:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={symbol:"_2tHs0",margin:"_3Bn0t",miss:"_3HpRC",pttBlue:"_1ujr9",pttGreen:"_3ryBz"}},49072:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={statusLoading:"_1E3Vj"}},78076:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={listUser:"YtmXM",listUserBeta:"_1X8rk",betaIcon:"_2BYrr",betaIconText:"_3hcUV",commerceIconContainer:"_1e4Bn",withCommerceIcon:"_1atcO",header:"_1G3Wr",listControls:"_3yZPA",shopsIcon:"_2sN2H"}},42620:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={chatListPanel:"_1KDb8",panelBody:"_20c87",panelSearch:"uwk68",spinner:"t7NWw",unreadContainer:"_2Pcmr",unread:"_2ZNpT",unreadBody:"_1tQ8u",unreadIcon:"_1SNuR"}},39709:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={checkboxChatWrapper:"_1Oe6M",checkboxChatControl:"_1-gER",labelSelection:"_2OHxv"}},51322:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={selectedListContainer:"iH7Ic",bottomDiv:"_1WEqd"}},76414:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={iconSpinner:"_1A60C",iconCloseSearch:"_3GYfN",iconLabelSelect:"iy1jQ",iconMorph:"_1KJ7A",inputPlaceholder:"_3Qnsr",labelSearchPlaceholder:"_2S-ZM",listSearch:"_3yWey",contInputSearch:"_1Jn3C",active:"XKmj6",iconSearchMorph:"_28-cz",iconMorphSearch:"bHvlO",iconMorphBack:"_2nifA",kind:"_3mVPR",labels:"_1YvFX",kindName:"_26c7g",filterTitle:"_3lIPP"}},98676:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={badge:"_3zy8i",icon:"_3cYWo",pending:"_2UImM",warning:"_2Jofj"}},22301:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={border:"bSwEu"}},80031:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={chat:"_2nY6U",chatInteractive:"vq6sj",chatAvatar:"HONz8",image:"_2EU3r",chatBody:"_3OvU8",chatDetails:"_1BgCC",chatMain:"_3vPI2",noDelete:"_3k68H",chatSecondary:"_37FrU",chatTitle:"zoWT4",chatStatus:"_1qB8f",chatMeta:"_1i_wG",active:"_2_TVt",unread:"_3C4Vf",chatDrag:"_2Oquw",idle:"_1ws0F",themeReaction:"_3knDg",isMuted:"_3Xgye",themeMessage:"_7qwtH",themeSearch:"_3VUnw",themeDrawerList:"_3A-iD",themeNewChatInfo:"_qREt",themeRadioButtonRow:"_16zEN",themeStatus:"_1q2v5",themeCheckbox:"_2OR6D",themeIdentity:"BdOK7",themePlain:"_2gbXd",themeAddItem:"_3xRmF",themeAddItemPlaceholder:"_2ildA",themeListNames:"_3Y0ff",member:"_1Bc31",disabled:"_2bypq",themeLabel:"CujId",groupV4Invite:"_1p-UT",cartProduct:"V-2Ax",orderProduct:"_1SM19",product:"_16m7g",stickerPack:"_1dQJ1",media:"_1IYWo",listButton:"_3zMLK",productOfCollection:"_2nU2J",collectionEdit:"_2KLau",collectionHeader:"_17-Rm",productOutOfStock:"_3NZY0",listMsg:"_2eixh",archivePanel:"_1frFQ"}},98150:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={chatSubtitle:"zzgSd",chatSubtitleHeader:"_3e6xi",chatSubtitleText:"_2YPr_"}},25363:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={btn:"_23JDg",overMedia:"_3HNBm",btnMediaPrev:"_3jb3a",btnMediaNext:"_3x1a0",disabledBtn:"_2_1tu"}},38743:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={container:"_2XifE",defaultWallpaper:"_31Spn",icon:"fxStU",body:"pJIFJ",main:"m9hHr",secondary:"_3oWGj",inConversation:"_3yL8P",inList:"_1WKb_",mdChatSearchList:"_2YGcU",newChatInfo:"vlWi6"}},31680:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={avatar:"_3GlyB",avatarDefault:"_1lPgH",avatarImage:"_8hzr9",isLoaded:"M0JmA",avatarSquare:"_3eYBS",avatarBorder:"_32GIw",status_v3:"_1DSb6",statusV3:"_1DSb6",wrapper:"_36VU6",badge:"JUffF",chatList:"Vu6GJ",conversationHeader:"_1FnbI",badgeIcon:"_1D5Hn"}},50687:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={item:"_2qR8G",text:"_18oo2",hover:"_19zgN",action:"dJxPU",compact:"_3gcnK",icon:"_26nDl",emoji:"_17jhh",emojiGrid:"_34jUG",ellipsify:"_2oldI",disabled:"_3BFHH",shortcut:"_1wMaz"}},70772:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={tooltip:"_1y99G","tooltip-left-ltr":"YpTYF",tooltipLeftLtr:"YpTYF","tooltip-left-rtl":"_31yGq",tooltipLeftRtl:"_31yGq"}},50798:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={read_more:"_208p2",readMore:"_208p2"}},9297:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={avatar:"_2ji7x",roundBorder:"_2QeZT",avatarWrapper:"_2urgy",avatarSvgWrapper:"srmST",avatarImageWrapper:"Pipu6",transition:"Ao5N0",isLoaded:"_15kIa",centerChild:"_3yoVb",avatarImage:"zlBZO",transparent:"ez3ry"}},87120:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={key:"_3XnBm"}},40954:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={viewport:"_3uIPm",verticalListViewport:"WYyr1",horizontalListViewport:"_1iA0_"}},59230:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={loadingSpinner:"_1L0jz"}},12544:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={item:"_3m_Xw"}},23131:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={hidden:"_3BWgW",container:"_2RbXT"}},11323:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={controls:"_2Afm5","progress-container":"_3j4HD",progressContainer:"_3j4HD",spinner:"_3o4t-",btnMeta:"_1ZhO6",button:"_1Op2_",icon:"_1Id0W",cancel:"MVKjw",disabled:"SBvMI",cursorPointer:"e1p1w",play:"_3t4l4",iconMeta:"_3sdHY"}},30299:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={container:"iC94K",child:"_3JKxw"}},471:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={menu:"_1QVfy",menuDefault:"_3UaCz",menuStrong:"_2aN_u",menuInverse:"_1s6XL",item:"_2cNrC",active:"_1CTfw",selected:"_2V9Ss",disabled:"_2YC8z",itemText:"_2eqEq",menuMediaEditor:"_2rY6b",itemFocused:"M43gW",button:"_26lC3"}},78487:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={multiControls:"_37jUe",chatListPanel:"_3pRIl",drawerHeader:"_1ok6W",multiselectIcon:"Pd4jb",multiCount:"_3sYvo",mediaGalleryTheme:"hFRPE"}},39200:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={"-move-resize-component-border-radius":"12px",moveResizeComponentBorderRadius:"12px","-move-resize-component-correction":"59px",moveResizeComponentCorrection:"59px",moveResizeComponentContainer:"_5h2Mi",moveResizeComponentInnerContainer:"_32d1N",overlay:"_3WOen",resizer:"_3Ikyy",topResizer:"_1tDOX",bottomResizer:"_3ErRI",leftResizer:"sDbQK",rightResizer:"_2HQO5",topRightResizer:"_3BmU0",topLeftResizer:"Hzoas",bottomRightResizer:"_3F8SQ",bottomLeftResizer:"_1auhr",moveable:"Bjqxx",defaultCursor:"_2OoF8",extraContent:"_3VQEm",extraContentVisible:"_3FNw6",blurryBackground:"_3GVtj",bottomContent:"_1BIBj",topContent:"_2A-Ve",dragBar:"_1XQxk"}},31430:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={multiControls:"OVz7E",multiselectIcon:"_1fimr",multiCount:"_2k8WS",mediaGalleryTheme:"wdgqh"}},37151:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={verified:"_3vLho",psa:"_2A4wP",icon:"_1M6Ay",hasLabels:"_3q9s6",labels:"_3dulN"}},58866:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={fit:"_1Lu8G",fitRelative:"Rwf_x",fitScaledown:"_1p0Ic",fitZoomin:"_3n6Y4",nativeCover:"_2rdv3",nativeScaleDown:"_3pDwe"}},5582:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={container:"_3yg5l",body:"_1TGpC",imageContainer:"_2VMR2",defaultIcon:"_1Jya3"}},8908:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={clipFix:"_1Yqrp"}},31693:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={container:"_3Bc7H"}},5538:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={gridContainer:"_2aoOW",baseEmoji:"yz0X-",options:"watw2"}},54262:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={button:"ynx4l",buttonIcon:"_17WeP",nextButton:"RMIjM",prevButton:"_27Ool",resizeContainer:"_1MNGY"}},22399:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={"-emoji-width":"44px",emojiWidth:"44px","-emoji-height":"44px",emojiHeight:"44px","-side-margin":"12px",sideMargin:"12px",panel:"_2Wd6U",section:"_27GWS"}},70446:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={bodyContainer:"_2bgh7",list:"_3Cc11",search:"_1Kk5B",hidden:"VaOo_"}},6067:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={"-total-search-height":"62px",totalSearchHeight:"62px","-scrollbar-width":"6px",scrollbarWidth:"6px","-windows-scrollbar-width":"8px",windowsScrollbarWidth:"8px","-section-bottom-margin":"12px",sectionBottomMargin:"12px","-title-height":"27px",titleHeight:"27px",container:"_1rtUb",title:"xfDtH"}},95118:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={"-emoji-width":"44px",emojiWidth:"44px",panel:"_2ikL3"}},30787:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={emojiPanel:"_1DP8V",panelBody:"_2Gmvm",panelDropdown:"_30SX6"}},98616:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={text:"_1YMR5"}},43487:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={body:"VNeTl",icon:"_38Dyo",wrapper:"_137vP",container:"_1VzGk",focusBorder:"_7-H4u",preview:"_1iDDZ"}},85633:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={searchContainer:"_2uZmp",section:"_10r3b",blank:"_1EQNa",row:"_1ISLd",noResults:"_1YG-A"}},98952:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={bodyContainer:"_1TdPb",gifPanel:"_4_8s1",panelBody:"Jcl24",panelBodyError:"_1Z21u"}},7566:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={container:"_2eA1Q",wrapper:"_1feSF",innerWrapper:"_1jisR",starIcon:"_3Wz0y",thumb:"_2RmLM",blur:"_32XHJ"}},29123:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={pager:"_29Hr8",pagerLeft:"_1ZIOd",pagerRight:"AczAh",pagerDisabled:"_3f1Qz",body:"dA_JN",section:"_21CMd",searchRow:"_3YSFd"}},75228:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={barContainer:"_2i-wM",movingBar1:"_13HVn",movingBar2:"rgmWD","indeterminate1-ltr":"_2nkMC",indeterminate1Ltr:"_2nkMC","indeterminate1-rtl":"_1R6n4",indeterminate1Rtl:"_1R6n4","indeterminate2-ltr":"KjuiJ",indeterminate2Ltr:"KjuiJ","indeterminate2-rtl":"_3bSf2",indeterminate2Rtl:"_3bSf2"}},40870:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={container:"_16kef",reaction:"dKzIw"}},92466:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={tab:"_1zlQ1",highlightOnFocus:"JRJYO",menu:"_-2oTK",carousel:"_3hl6E",carouselEnd:"_3GM_s",selected:"_1v2yz"}},33607:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={menuTabsMarker:"NCirl",animate:"_1PHGw",animateWithTransform:"_2TG0r",hide:"_3gVEQ"}},74760:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={cancelIcon:"_3pgom",inputContainer:"M1or0",inputEmojiSearch:"_3K9QW",searchRow:"_10mnt",ffFix:"_3KMMv",rowShadow:"_3wgrR",rowInput:"_2VSMU"}},57379:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={panelContainer:"_3x7O3",panelDropdown:"_1m0Ug"}},98374:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={tabIconOrText:"vwr6Y"}},49972:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={container:"_1rX68",containerSearch:"_2-e_h",panelHeight:"_3i8Zn",contentContainer:"_2XY3B",contentContainerSearch:"_3ijFX",bodyContainer:"_1NPzg",emptyContainer:"_2YslO",emptySticker:"_1xgRn",emptyText:"_255pA"}},95885:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={container:"_2elZc",stickerPanel:"_1wurn",border:"_1QpHK"}},93881:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={container:"_1u3Az",retryButton:"ek3q4"}},70193:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={emptyContainer:"tX668",emptySticker:"_3eX8j",emptyText:"_1ENK0"}},13822:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={container:"_268Mf",resizeContainer:"_2HfVy",unscrollable:"nnnSk"}},40194:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={shadow:"_1qMTr"}},43177:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={container:"_2yXP9",stickerPackContainer:"ez5TU",stickerPackIconWrapper:"_1qoGD"}},42532:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={input:"_1UWac",placeholder:"_2vbn4",mediaEditorTextInputPlaceholder:"_2it_2",body:"_13NKt",default:"Z2O8p",compose:"_1LbR4",large:"czcZD",status:"_23wR2",richStatusReply:"_3fdtK",media:"oHEu9",invite:"y2xeH",mediaEditorTextInput:"_3pH28",small:"_9SNTl","list-search":"_3hKpJ",listSearch:"_3hKpJ",textInput:"_1aweH","size-16":"R4ZCx",size16:"R4ZCx","size-24":"_2-Uy3",size24:"_2-Uy3","line-height-16":"i1BGy",lineHeight16:"i1BGy","line-height-24":"_1beSb",lineHeight24:"_1beSb"}},41757:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={emojiSearch:"yY6AE",searchBody:"dVelf",positioningContainer:"_57r8B",overlayContainer:"_3gMHK",resultsContainer:"ECdkZ",mediaCaption:"_1TBzR",emojiInput:"_30wt2"}},74019:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={mentionsResult:"_12x9I",selected:"xVUcj",mediaCaption:"aspBo",textContact:"_1IiiX",textPushname:"_2nhlG",resultImage:"KWld3"}},75311:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={positioningContainer:"_3lPuS",resultsContainer:"_3I-Ax",overlayContainer:"_2ERUw",mediaCaption:"_356RS"}},63293:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={result:"_5oJyH",selected:"e800t",slash:"_2uNxr",shortcutPrefix:"_3G7pN",shortcutSuffix:"_1hpAY",message:"K_laH"}},91162:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={positioningContainer:"_1fzlS",resultsContainer:"_3Jarj",overlayContainer:"_3zovQ"}},60576:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={container:"_1Y6d8"}},59071:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={btn:"_165_h",disabled:"_20QIU",large:"_2HL9j",small:"_3KkV3",inverted:"p0cPs",hideBackground:"_2B5gg"}},76708:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={clickable:"Hme-t",body:"_2l7bQ",main:"_25m4C",mainEllipsify:"_3weqn",side:"qqWrX"}},29766:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={container:"YGe90"}},32243:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={conversation:"_3mPXD",placeholder:"_28a19",large:"_1V-dP",composeBoxQuoted:"_3QSK-",quoted:"_2xrJ4",stickerDetails:"_2uvSJ",stickerPanel:"PD3sk",stickerStore:"_2Bqm9",clickable:"_9QB_N",container:"_35qAh",showSticker:"_2afZN",fadeIn:"_37JBw"}},8082:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={textInput:"_10Mbz",labelText:"_2Pq6r",hideFloatingLabel:"_1RVBL",float:"_3zbxJ",spacer:"X2s7w",noPlaceholder:"q_gDO",wrapper:"_3mpG7",inputWrapper:"_3ZVCn",locked:"_1M8UY",errorText:"_1SeZ5",textError:"_1PQrR",textActive:"_23KyQ",iconMainContainer:"hS9Jh",iconsEditContainer:"_27Wz_",icon:"_27Yui",invite:"_1misX",charCounter:"_17PfY",iconSpinner:"_2NNpn",noErrorInfo:"_1JgEV",infoStrip:"_37xeC",inputLarge:"_1pGaf",active:"_2fOd_",emptyValPlaceholder:"_12vlY",more:"_2mPox",emojiText:"_3-H1x",groupInfoName:"_2KoKm",small:"_3skxK",iconMain:"_8o4MO",desaturated:"bIGyp",visiblyHidden:"_2Ny8c",editOnHover:"_2LpLk",editing:"_1Fvon",highlightOnHover:"_1UtFD",editable:"_1spDM",newChatInfoDefaultText:"_2QPBk",newChatInfoLargeText:"_2IoGa",disabledLabel:"_3w74u",constrainedWidth:"_2-B71"}},23992:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={wrapper:"_3DzYC",icon:"bElHk",verifiedText:"_2N5II",divider:"rFHB8"}},92741:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={video:"LHFBt"}},14237:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={adminBtn:"_3J8YW"}},72815:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={preview:"_2I8Lo",media:"_3Dfal",bubbleIn:"_2mjlL",bubbleOut:"_2rKdO",title:"_2oKnO",description:"_1RcAo",body:"_5Pbpr",descriptionIcon:"_2r9Jm",titleIcon:"_2Mpzy",quoted:"_2Xvp0"}},16193:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={preview:"pUwVJ",bubbleOut:"_3qhzU",media:"_3-IEF",title:"_1WfUi",description:"_294vA",body:"_270IN"}},64628:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={container:"_2ZB0w",image:"_2axXz",body:"_1u5EW",badge:"_1wAcb",name:"AOE-B",address:"_2UOFk",description:"_3YcC3"}},80475:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={container:"D7_Sl",text:"_2bjNw",messageNewNumberButton:"_1SKXZ"}},56165:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={"-overlay-border-right":"1px",overlayBorderRight:"1px","-overlay-border-left":"1px",overlayBorderLeft:"1px",footer:"_2cYbV",positioningContainer:"_3A_K1",overlayContainer:"_33f6r",blockCompose:"_2BU3P",inputContainer:"p3_M1",boxPanelWrapper:"_1un-p",pttComposerActive:"_18OWa",attachButtonContainer:"_2jitM",mainContentContainer:"_1SEwr",textMessageComposerContainer:"_6h3Ps",textMessageComposerInputContainer:"_2lMWa",pttComposerContainer:"_2tiyZ",childPadding:"_3HQNh",sendButtonContainer:"_1Ae7k",disabled:"_1g8Im",btnSend:"_4sWnG",focusAnimation:"_1YbbN",focusAnimationKeyframes:"_3RoZE"}},86667:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={panel:"a-HbF",body:"_1IN0t",cancelButton:"_1Hccy"}},8937:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={tile:"_1PzAL"}},71352:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={pane:"_33LGR",selectable:"_1HzbD",empty:"_2AL2u",atMentions:"_1cQWN",incoming:"_1GLVO",buttonGap:"_37rpp",buttonGapRemove:"_1YWBB",iconDown:"_3K42l",iconMentions:"_1ec6v",ffFix:"EnLWz",unread:"_38VQ8",incomingContainer:"_27Uai"}},38038:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={footer:"_1YfMk",body:"_1LcQK",filler:"VjtCX",footerMessage:"_31enr",subheader:"_2K2u4"}},99890:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={pane:"_1fqrG",previewPane:"M_3Ni",header:"_4KLAo",title:"y67RY"}},89827:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={subheader:"_1GHsB",main:"ee09o",closeBtn:"_1_fE7"}},77063:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={body:"_1v2iU",text:"QoGDK",hidden:"_1JfIG",desc:"_26wVQ",more:"_2SaOr"}},64809:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={attachMenuContainer:"_3iTtj",iconsItem:"_2t8DP",iconImage:"_2QbRL"}},98229:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={chatControls:"_1yNrt",chatAvatar:"_2YnE3",divider:"qR2GF",chatHeader:"_23P3O",chatBody:"_24-Ff",chatMain:"_2rlF7",chatTitle:"_21nHd"}},1051:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={wrapper:"_3M3aq",historySyncStatusWrapper:"_3KRR6",historySyncSystemMsg:"_314Zr",historySyncLoadingIndicator:"_1LCeI",button:"PWkc7",historySyncStateContainer:"i_Uj-",historySyncStateContainerBody:"_3Nclq",historySyncSpinner:"_3Gd6U",historySyncStatusText:"_3AJEj"}},78923:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={author:"hooVq",name:"a71At",number:"_1BUvv",screenName:"_1u3M2",verifiedIcon:"_1_7Ir",hoverable:"_1B9Rc"}},23932:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={preview:"_34dK8",bubbleIn:"_3YWPm",bubbleOut:"_3YuXJ",isCompose:"_3YX4K",noThumbContainer:"fYgLf",noThumbIcon:"_2L4U9",media:"_2nY62",title:"_1UzBI",description:"_1PT2L",source:"TVNwj",body:"X0ZBt"}},16710:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={clickable:"_2Bemp"}},62913:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={orderPreview:"_2_hNe",meta:"_36Lxo",messageText:"_2_CxJ"}},55758:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={container:"_22ELr",isLinkMsg:"spIPR",icon:"_12BYL",text:"_2xo7P",ctwaContainer:"_1LxYk"}},110:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={actionButton:"_2q8R8",actionText:"_23N3x",disabled:"_1R-AA",buttonContainer:"_1tvcI",firstButton:"_3J1L3",quickReply:"_1mj_T",callUrl:"_2C7Hy",icon:"_25Ljw"}},78362:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={footer:"uahP3",isMedia:"_2maqW",dirMismatch:"XMOWB"}},22319:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={actions:"_38sw1",actionsBtn:"_2qiMb",disabled:"_3jGuf",noDivider:"oUwuU",icon:"_1Nz4r"}},41946:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={buttonContainer:"rn1U_",withLargeButtonsSpace:"_3bcUY",buttonWrapper:"_31pvq",disabled:"_2BLmN",stacked:"_3R6jb",buttonLabel:"_1U18t",sentByMe:"tLcVC"}},29667:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={container:"_2UGGA",error:"_9CNbN",compact:"eKlTB"}},90477:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={container:"_2tsYl",icon:"_2suca",iconHighlyForwarded:"_1sxwa",text:"_25ont"}},31211:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={msg:"_36BuW",hover:"_2ZoZ2",current:"_3dZYx",active:"_1GjPw",focusAnimation:"_2AQt_",focusAnimationKeyframes:"-fZFX"}},49155:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={"-width-picture-bubble-inner":"330px",widthPictureBubbleInner:"330px","-padding-picture-bubble":"3px",paddingPictureBubble:"3px",bubble:"_1FpDI",vendor:"Z3Htq",meta:"zE8pI",hasCaption:"_2_tMn",author:"_1E1x2",forwarded:"_1niOx",forwardedIndicator:"_1CzZV",hasAuthor:"qS_dv",quote:"_2cHQo",thumb:"_1HqS9",caption:"_3mTJL",isPSA:"_366kD",isPsa:"_366kD",thumbVideo:"_2ugLp",thumbImage:"-tfJt",isGallery:"CGrlN",isInfo:"_3AcU2",ctwaContext:"_1-1zI"}},22510:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={notification:"_2ad1k",icon:"zjSQ_",iconMegaphone:"_1e6_g",iconDisappearing:"wF4tz"}},66513:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={stickerItem:"_1EoEw",stickerMenu:"_38YQn"}},9587:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={outerContainer:"_3cBW5",innerContainer:"bcn_I"}},9027:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={container:"_3wB0E",status:"_3DThG",caption:"FvmtX",linkPreview:"_3ccZe",expired:"fW561",noCaption:"_3Dr0h",meta:"_1crxl"}},30157:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={highRes:"_2UdhN",wrapper:"_3R6rC",large:"_3zyju",lowRes:"_2LodA",medium:"_3Ci02",xlarge:"_1xeoG",animation:"KPHJD",invisible:"_1gSQr",heartbeat:"_1jJBG"}},90373:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={bubble:"_34_Xq",title:"_2kYWh",meta:"_2R4Kk",footer:"_2o9mS",productListPreview:"_2rvnm",productListPreviewForwarded:"_2qh_q"}},94563:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={hasText:"_3pk8n",noText:"ayWBM",quote:"_1PXpa",forwarded:"_3j_MG",hasAuthor:"_3cXIV"}},1696:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={container:"_1O7Qw",link:"_2NMzP",title:"a5x1L",address:"_16GEO",hasURL:"_1uGHA",hasUrl:"_1uGHA",text:"_10e3n",author:"_38kO0",forwarded:"_2F595",forwardedIndicator:"_1Ui2Y",hasAuthor:"_3xqkd",meta:"PWnOL",thumb:"_2dClC",thumbBody:"_1cPOs",quote:"mZtXF",hasCaption:"_1cDYl",caption:"_1Kl0h",ctwaContext:"s6NhA",ctwaContainerWidth:"_21LuH"}},46633:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={albumGridClass:"_1r0Sc",albumTopLeft:"_1i9bZ",albumTopRight:"_1e_c_",albumBottomLeft:"_26YFZ",albumBottomRight:"_18Wbo",numberText:"_2exe3"}},19651:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={icon:"_296q_"}},8958:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={bubble:"_3EZ_R",hasAuthor:"Tf_TY",forwardedIndicator:"_5dQv2",hasQuote:"_3C47v",author:"_3hIEb",isForwarded:"_1g2ik",quote:"_2uK7i",isGallery:"PQyDX",ctwaContext:"YIN_l",meta:"_3IkMh",bubbleLeftAvatar:"_3Jitl",bubbleRightAvatar:"_3ojyC",body:"_2Lwe3",player:"_2h6Ot",avatarContainer:"_201K0",playbackRateButtonContainer:"_3Ki9D",playbackRateButtonContainerVisible:"_2CTcc",avatar:"_3j52x",avatarVisible:"_2U7HB",status:"_1TDZ6"}},20810:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={audio:"Y-J7e",controls:"XcEdc",body:"etT8r",scrollPositionDetector:"_34O9x",button:"_1cZGZ",conversationWaveformEnabled:"_3qpRg",incoming:"_1pKnn",outgoing:"_1CpyA",spinner:"LhELL",metadata:"buoZm",isGallery:"_5nQq"}},24686:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={bubble:"M_gdf",templateBubble:"_1OakK",isPreview:"_3j7_t",isGallery:"_3lPPG",docMeta:"_2MC4u",metaValue:"eJAcX",ctwaContext:"_2MVQU"}},72098:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={preview:"CHSLU",fullPreview:"kLeWm",highQualityLayout:"_3YMqT",bubbleIn:"_2E-ai",bubbleOut:"sIvFa",extended:"_1m-Rn",thumbnailContainer:"_2Z0B3",noThumbContainer:"_1jc8q",galleryContainer:"Wq-cT",noThumbIcon:"_1qAsV",media:"_23xzQ",blurred:"_3-eMt",withoutDescription:"_4LkCX",iconStar:"_33ddF",isInvite:"_3SyGZ",title:"_15Qyv",description:"_3xo87",source:"_4-vbh",body:"_2mAiW",isCompose:"_193H_"}},97349:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={bubble:"Vwbn7",hasCaption:"_1cAZT",meta:"_2DfCi",isPSA:"_2oilq",isPsa:"_2oilq",author:"WrWNg",forwarded:"R5aCU",forwardedIndicator:"_1QK9M",hasAuthor:"_3seQo",quote:"_2eRTf"}},36363:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={preview:"_1RPCB"}},56883:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={bubble:"qkl8S",portrait:"gZn4L",nonAlbumBubble:"_2HVTy",author:"_20vwF",forwarded:"GFf0v",forwardedIndicator:"_1unVB",hasAuthor:"_12l1S",meta:"_19jKW",hasCaption:"_37jeB",caption:"_3k89y",isPSA:"_3x3JW",isPsa:"_3x3JW",quote:"Slllz",overlayAlbumText:"_2JLqr",ctwaContext:"uL0UX",ctwaContainerWidth:"_1dkib"}},91881:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={preview:"_3eN_4",bubbleIn:"_2bnwv",bubbleOut:"_1MXop",title:"_18Fco",description:"_2WawW",source:"sSoEC",body:"_2rFNH",noThumb:"_2ZfWa",thumbnailWrapper:"_1EO9-",thumbnail:"_2sNsc",noBlur:"_1Tab5",thumbnailPlaceholder:"_2UiKF",youtubeThumbnail:"_32nNg",mediaStateControlsWrapper:"_1nUWH",attribution:"_202q-"}},29698:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={thumb:"_3vRLq",inAlbum:"_2Hm2q",cursorPointer:"_2wwif",thumbBody:"_22dVC",thumbBodyLowQuality:"_1Ifkz",duration:"_21bgy",icon:"_3VJSq",pipBtn:"AL7nc",isHover:"_3kKPC",overlay:"_3C9j-",ctwaThumbWidth:"_1KzRH"}},61276:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={context:"_18oGY",contextIn:"_2copG",contextOut:"_1UyGr",contextIcon:"_3e9My",contextSpecial:"_3U8t1",contextInverse:"MAFpw",contextMedia:"_3I4pa",contextMediaLtr:"_3snhK",contextMediaRtl:"u5x7Z",contextMediaDocument:"fsbrQ",contextIconMedia:"_3sryO",contextDoc:"_2t2UT",contextPtt:"_1SfBg",contextPttFix:"_1qLtS",contextMultiVcard:"_3Zf7E",contextStickerAuthor:"_3QvcT",contextStickerTransparent:"fL8od",badge:"_3Vg32",contextStickerInverse:"sXuJ5"}},25153:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={author:"_1aJWo",hasForwarded:"_12iIz",caption:"_1WihM",forwardedIndicator:"_1bT9q",hasAuthor:"uStkE",meta:"_1a1gY",hasCaption:"_2L1FC",quote:"_26Orz"}},57155:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={text:"_1Gy50",template:"_36bJ3",placeholder:"_3TjU1",spacer:"_20bHr",icons1:"_2ui2p",icons2:"_2k1_e",icons3:"_2c6ge",icons4:"_29c8S"}},18981:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={metaOverrides:"_1WSmF"}},21123:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={container:"_3BK98",isChecked:"_3vy-1",gallery:"_3b_q4"}},87581:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={container:"_1x75M",icon:"_3TQyU",text:"fGkSE",containerSmallIcon:"_2GaDw"}},54777:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={wrapper:"JwMbj"}},36246:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={amount:"_2sFh6",amountCurrency:"_2v-Oh",amountInteger:"dnINe",amountDecimal:"_15T9I",isQuoted:"vmShS"}},42325:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={container:"_2BaFO",thumb:"_1WBof",isQuoted:"_2adWC",isQuotedInComposeBox:"_1j5KI"}},26225:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={icon:"_2N4Gy",success:"_3aNyY",failed:"_1VIdA",pending:"_1SRza",iconSymbol:"_2xEyu",compact:"_156-W"}},37291:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={body:"_2oQsk",bubbleIn:"_25qjo",bubbleOut:"_1nlBk",bodyIcon:"_2F85q",bodyIconMultiline:"_31jNG",bodyText:"_11BDX"}},17468:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={container:"_14JTW",isQuoted:"_2C1pR",name:"_32Z_R"}},82179:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={body:"_gF4S",bodyText:"_2YIWi",caption:"_2QlpF",inviteBackground:"nIV2o",bubbleIn:"_1FTrp",bubbleOut:"_2Riu-",inviteImage:"_2GAPD"}},83662:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={hasText:"_1SeXE",noText:"UF5lM",quote:"_3Q47_",forwarded:"_2Qbk-",hasAuthor:"_3ERBM"}},88137:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={image:"_3mSTX",default:"LacDz",icon:"_3TcVw",container:"_1JhMF",hasBorder:"_374fh",dimmed:"Qrclb",hasInnerBorder:"_1HLgI",hasLargeInnerBorder:"_2OuQU",square:"_1avFe",col:"_3UWjv",row:"_3nYfM"}},24378:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={icon:"_2sFz4",incoming:"_3NyWk",outgoing:"_1TKVr",blue:"_1_lrh",gray:"_1k-_q",green:"_2PvBP",outOfChat:"_2wjh8",forwardedOutOfChat:"_3Zcta",wrapper:"i87tO"}},97900:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={imageWrapper:"_3yqEq",msgImage:"_2W5Qi",composeBox:"NdQ5u",statusV3:"_2CyOs",isPayment:"_3RjjZ",image:"_1HKX6"}},16679:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={container:"_3hPBO",quotedMsg:"_3o5fT",statusV3QuotedMsg:"_2stdY",composeBoxQuotedMsg:"_3XUNQ",hover:"O_MMl",colorBar:"_3jrlM",msgBody:"-gKwI",msgText:"E_Te0"}},33595:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={messageText:"eWQsx",composeBoxQuotedMsg:"_2fkyH"}},85098:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={hover:"_2Kajt",quotedMsg:"_1apSG",msg:"_3hnu6",colorBar:"_37TOd",msgBody:"_2saPi",composeBoxQuotedMsg:"_3e9sI"}},18041:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={caption:"kbh9x",meta:"L-lId"}},97103:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={container:"_3kxQ0",track:"_1tYaO",containerIncomingPlayed:"_3AEe_",containerIncomingUnplayed:"_2Dnx-",containerOutgoingPlayed:"_3-AGg",containerOutgoingUnplayed:"_1tsJt",thumbTravelContainer:"_2ujFr",thumbContainer:"_2Ni3Y",thumb:"_2yqJw",containerDisabled:"_3P77p",progress:"_9Zdab"}},27238:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={title:"_2g2jh",titleMain:"_2PElp",meta:"Ow8Il",chat:"_2NNvx",divider:"_7VvVk",chevron:"_2conS",avatar:"_2BgQo",author:"_19E70"}},54669:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={light:"N4ItZ",ackBlue:"_3l4_3"}},56734:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={hasAuthor:"_1u9qp",quote:"O2yv0",bubble:"_26F99",meta:"_3Lby7",isTransparent:"_2JUrU",body:"_3BGWx",author:"_3OC33",isFirst:"_2ecOY",ctwaContext:"_1BMHI",reactionBubbleContainer:"_2HiQn"}},86542:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={container:"_263uA"}},11706:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={sticky:"_3Iosq"}},79901:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={quote:"_2Fo6S",forwarded:"_3HH9A",hasAuthor:"_2jGOb",hasSuspiciousLinks:"_2bdeW",linkPreview:"GAiYx",meta:"_3GEz5",title:"to3eh"}},14390:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={bubble:"_22Msk",portrait:"_24PSW",landscape:"_2T1i2",meta:"_1beEj",isPSA:"_2kk7U",isPsa:"_2kk7U"}},25861:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={shade:"_23IDz"}},81661:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={msgUnread:"_5ML0C",msgUnreadBody:"_3cOAM"}},39029:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={bubble:"_1tfap",isGallery:"_2WYy8",isPreview:"_2GU93",quote:"_35w8x",hasAuthor:"_3QaM3",vcard:"_2GhDW",author:"_1tStr",hasQuote:"_2iCgE",body:"_26nhK",avatar:"_1DYXt",meta:"_2YJfd",name:"Wx25u",ctwaContext:"_3sss8",placeholder:"_1eaPn",placeholderAnimation:"_2dH4k","gradient-ltr":"_3Ghom",gradientLtr:"_3Ghom","gradient-rtl":"_1r4eb",gradientRtl:"_1r4eb",placeholderImage:"_1gIrs",placeholderText:"_1RBL5",vcardDownloadStageIcon:"_3Us45",icon:"_37K6A"}},93831:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={container:"_9RSth",inactive:"Uo1hc",icon:"lwwpK",spinner:"bjI3o"}},33947:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={msg:"_2wUmf",msgContinuation:"_21bY5",msgSystem:"V-zSs",sticky:"_1bp3Q",message:"cvjcv",hasTail:"_8YVHI",messageBackground:"Nm1g1",tail:"_3nrYb",tailHighlight:"_33ElR",messageTransparent:"_1S-gg",tailOverrideHide:"fe1wa",messageSystem:"EtBAv",messageChat:"_1Ilru",messageCode:"NuMBJ",messageDebugNotification:"b9OGT",messageE2ENotification:"_1p8Qv",messageBizNotification:"EkgRd",messageNonE2ENotification:"tokhT",messagePlaceholder:"_2i2ot",msgGallery:"_1JOu_",messageAudio:"_2G-o1",messageDocument:"_1CJ4I",messageList:"IdKDv",messageMultiVcard:"_1BUp2",messageProduct:"TV0H8",messagePTT:"JZd-w",messagePtt:"JZd-w",messageSticker:"XWVkh",messageVcard:"_3Q9cR",messageGif:"_29jDW",messageImage:"_3QK-g",messageLiveLocation:"_3zfPb",messageLocation:"_3Y4UU",messageVideo:"_3bxPY",msgInfo:"_1fwLN",msgWithQuickAction:"_1q25n",messageHidden:"_2o1bS",msgContainer:"_16Lhn",quickActionButton:"_3JXTQ",msgPSA:"mwr1_",msgPsa:"mwr1_",messageVideoLinkPreview:"R5FJb",placeholder:"_1r2Rq",gridContainer:"_1LCu0",author:"_3Hxe_",forwarded:"_18j3q",albumBubbleContainer:"_3dSQU",forwardedIndicator:"_3Ldzf",hasAuthor:"_3muY2",authorForward:"_3Pc1A",groupStickerContainer:"_1p8l-",singleGroupedStickerContainer:"_3tRFQ",groupStickerAuthor:"_1xswm",transparent:"_14jRh",hasBorderBox:"_22AX6",hasUrlCallButtons:"_3Bwen",stickerWrapperContainer:"_3fAhg",highlightAnimation:"_2Mxoz",highlightAnimationDarkIn:"_24_ZS",highlightAnimationDark:"oT5bl",highlightMentionAnimation:"jvg4k"}},61748:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={messageList:"y8WcF",messageListSelectable:"_1RYqc"}},36496:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={container:"_2CkHc",disabled:"_8IpdG"}},4643:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={container:"_22WF5",containerInner:"_3GUzQ"}},66967:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={btnPtt:"_30ggS"}},82478:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={spam:"_3ImlL",text:"nyOSn",controls:"_3E-9Z",button:"_12bMD"}},88797:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={vcard:"_1q9Fo",controls:"_1FIfN"}},57681:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={spinner:"_3_EXz"}},54257:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={container:"_2J8hu"}},67224:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={container:"_2qwDL",circle:"JHRtT",text:"_1FOpn"}},76067:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={container:"_1ExdJ"}},78611:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={closeButton:"_3BkBf"}},17050:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={controlsSummary:"_2tvYd",container:"uyolZ",btnActive:"_7Q6yp"}},37236:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={app:"_1XkO3","app-enter":"_2xtgz",appEnter:"_2xtgz",noAnimation:"_22rDB",drawerManager:"_3ArsE",pane:"ldL67",paneTwo:"_3sh5K",paneThree:"_1bLj8",paneOne:"_2i3T7"}},22719:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={"-color-bg-light":'color("panel-background-lighter")',colorBgLight:'color("panel-background-lighter")',panelBody:"pXnLN",searchSpinner:"_3hEhb",panelSearch:"_3K-bg"}},66103:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={checkboxSelectableWrapper:"_1Ux09",checkboxSelectableControl:"_1f5_O"}},28931:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={section:"_1Y2N1",control:"ovk9m",label:"_1CKaR",note:"_2K2OR"}},68077:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={container:"gyxUD",control:"_2xfkv",label:"_2Xa9G",buttons:"_1zS9w",button:"_311E8"}},79634:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={container:"KPJpj",noscroll:"_2M_x0",centerItem:"_1-EIp",padding:"_3jVZG",centerColumn:"GiGr9"}},74324:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={drawerHeader:"_1PGhQ",drawerTitle:"_1Yy4I",drawerTitleBody:"_1FrBz",side:"_3sr6g",drawerTitleAction:"_2-1k7",multiMediaGallery:"_3ov47",drawerHeaderSmall:"_2mQtw",drawerHeaderOffset:"-bGGW",drawerHeaderPopup:"_1S5wN",btnCloseDrawer:"_18eKe",paneListControls:"_2zjLK",labels:"_1bXem"}},34166:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={container:"vXLk5"}},61422:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={container:"_2P1rL",shadow:"ZIBLv","padding-large":"RVTrW",paddingLarge:"RVTrW","padding-small":"_1dqt0",paddingSmall:"_1dqt0","padding-no-margin":"_2FcG4",paddingNoMargin:"_2FcG4",refresh:"BnR7O",title:"_10vh8","refresh-padding-title":"_3sBQd",refreshPaddingTitle:"_3sBQd",padding:"_1zkaQ","padding-no-vertical":"_10t53",paddingNoVertical:"_10t53","group-desc-padding":"mf5g4",groupDescPadding:"mf5g4","no-padding":"_36WbZ",noPadding:"_36WbZ","padding-product":"_2ROcQ",paddingProduct:"_2ROcQ","center-column-fixed-width":"_1-HQq",centerColumnFixedWidth:"_1-HQq",animate:"_1is6W","well-animation2":"_1sr9L",wellAnimation2:"_1sr9L","list-section":"_3-Bxb",listSection:"_3-Bxb","title-larger":"_2zE_D",titleLarger:"_2zE_D","sticky-button-section":"_37pL9",stickyButtonSection:"_37pL9"}},49896:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={container:"_1q9_k",metadataContainer:"_2a2H4",metadataText:"R3UG9",metadataTitle:"_1gPl9",metadataDesc:"_1PYAC",participantList:"_2zMeO",participantsTitle:"_1A6yW",participantsContainer:"ThClE",participantWrapper:"_19Pam",emptyContentContainer:"_2I2QE",participantsText:"_124as",contactsText:"_3-Rac",participantText:"_52dzE"}},20845:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={container:"wkMfH",metadataContainer:"_1-GpK",metadataText:"Ju06N",metadataTitle:"_2Ilb2",metadataDesc:"_3ssy9",participantList:"_3qUpq",participantsTitle:"_1NaaQ",participantsContainer:"_4ULH-",participantWrapper:"oN3jd",emptyContentContainer:"_1n8L6",participantsText:"_2b4hy",contactsText:"_1B4j_",participantText:"_2UPqr",inviteExpiration:"_1iSLZ",inviteExpirationIcon:"TlapI"}},87390:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={description:"_2FqEP",containerAllow:"_2BTU8",icon:"_1kXIp",title:"_2hxax",controls:"mtD53",topCenter:"_2ySXX",topLeft:"J0OBZ",bottomCenter:"_361JZ"}},65384:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={intro:"zaKsw",body:"_1RAKT",title:"_1vPMT",text:"_2-IT7",betaTitle:"_1vjYt",betaText:"_1y6Yk",betaIcon:"mDUle",betaIconText:"_3Lm9O",mdTextContainer:"_3q5qB",textContainer:"_35HSa",secondary:"_11TMV",divider:"_1_9wz",image:"_2JIth",mdImageWrapper:"WM0_u",mdBetaImage:"IVxyB",mdImage:"wuLkd",secondaryText:"_3ZJFu",secondaryTextBody:"_3yRMq",secondaryIcon:"_33d9M",upgradeBtn:"_1ReCe",upgradeModalTitle:"_1SMVi",upgradeModalText:"_2PkCn",upgradeModalErrorText:"_2t0jp",encrypted:"_2v0ig"}},90975:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={container:"Ph7CX",list:"_3_bJS",section:"_3FmxE",action:"_1rse8",shortcut:"_1Cbf3"}},66921:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={mediaViewerBlurCrop:"_29V76",mediaViewerBlurImg:"_3lbCb"}},42784:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={mediaPanelHeader:"_1w-Ol",mediaPanelTools:"_2OBzR",info:"_3ii0l",voIcon:"_3DT5C",highlightClose:"_3tWb8","highlight-ltr":"MOdnb",highlightLtr:"MOdnb","highlight-rtl":"U56ii",highlightRtl:"U56ii"}},7674:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={mediaViewerAnimate:"_1DmUx","media-viewer-animate":"_1DmUx",cursorZoomOut:"ls2-S",mediaViewer:"_3IBSU",noThumbnails:"_2R5pX",mediaContent:"zMiDB",sticker:"_3c8Xy",btnMediaNext:"_3jdhc",btnMediaPrev:"_1vA6Y",media:"_2E0wf",mediaWithCaption:"_32hvM",captionWrapper:"_2A70N",captionWrapperExpandable:"_1JNVL",mediaCaption:"_2Naut",captionHidden:"EQKPE",expanded:"Y9XL1",mediaCaptionExpanded:"_2p2gD",captionExpanded:"_1aBpn"}},67504:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={body:"_1nYgI",vcardWrapper:"_3loXS"}},25232:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={label:"_1F1Ky",input:"_39gup"}},86638:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={section:"_3BpxF",control:"JS6_m",label:"oZdoE",metaText:"_3Zvr1",border:"_2C05p",mdMetaText:"_3DIQo"}},33868:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={container:"_26NER",btnActive:"_2q5ng",btnAction:"oyWr7",controlsSummary:"_235xA",noSummary:"ZhYPx",summaryText:"_3WxsF",item:"_2fNoI"}},10044:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={screenshots:"_2N-Sr",action:"_2Z00h",disabled:"_1dCWS",screenshotPreview:"_1aNKD",screenshotsImg:"_1vJ4T",btnDelete:"_1J6XW"}},66246:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={listPanel:"_2HUCB",listBody:"_3GWRQ",listSectionSep:"kGnIz",listSectionText:"_3wpcn",listSectionAction:"_1BWui",panelHeader:"_3bqa4",headerText:"_2spF9",primaryHeaderText:"yMGDV",secondaryHeaderText:"_2XN6O",headerButtonsPrimary:"_3Pwon",headerButtonsSecondary:"PfNbf"}},82616:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={mainWrapper:"_1iwk6",v3_x:"_1jtVV",v3X:"_1jtVV",v3_x_mac:"_23R7_",v3XMac:"_23R7_",modalBackground:"_3Hudz"}},15617:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={updateWrapper:"_2oCtb",updateTitle:"_1fuU6",uploadButtons:"_1AsnD",buttonContainer:"_1gz1L",buttonIcon:"_2L1Bh",outStatusPanel:"_2v5gS",outDetail:"_3f_JQ",seen:"_1qoMb",timestamp:"fVMYC",placeholderIcon:"_2pKFU",placeholderText:"_1BqjL",viewWrapper:"_13bJQ",viewTitle:"_3Qbfr",viewUpdates:"_2U1fI"}},46209:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={chevronLeftBg:"ap7RN",chevronRightBg:"Yh0e0",chevronLeft:"_3SZ5F",chevronRight:"_10Rlz",playerContainer:"_1v-aX",mediaStateControls:"_1xYIR",viewer:"_3zyLV",v3X:"XNDC5",v3X_mac:"_2akvM",v3XMac:"_2akvM",backIcon:"bmJTq",backIcon_mac:"_3mfFO",backIconMac:"_3mfFO"}},89042:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={suspiciousHostname:"_1xz_9",suspiciousCharacter:"_2x-Eg",explanation:"_3eYuR",url:"_6nRAy"}},17490:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={headerText:"_2T4uY",bodyText:"MClO-",noticeSvgWrapper:"_2xtg4",noticeModalContentWrapper:"gWDq0",noticeSmbContainer:"_3Sqbv",noticeContainer:"_2AgSI"}},42694:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={content:"_2x3kE",icon:"_2cPNo"}},54585:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={container:"_3vLeQ"}},17040:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={form:"_1_psp",section:"S4s9L","well-animation2":"_3PdLd",wellAnimation2:"_3PdLd",circle:"_1C64q",spinner:"_3Ea-7",container:"xvgoq",show:"_2FUyH",circleContainer:"_28mPV",checkmarkContainer:"_1TMgk",errorContainer:"_1ScAm",checkmark:"qlZ5I",error:"_3Fr6b",errorBanner:"_3PYWJ",code:"xYqL-",row:"hsOn4",block:"_3WPv2",digit:"_3Muc-",explanation:"_37tSc",dragAndDropExplanation:"Lbmtf",photo:"_1Ua6g","drawer-scale":"_2OqK6",drawerScale:"_2OqK6",webcam:"_17NcY",webcamVideo:"PKLd7",btnClose:"_35Nbq",overlay:"_3APck"}},59029:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={button:"_1krwj",fullscreen:"_3kq_J"}},7893:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={pipBtn:"_1lwah",player:"_3SImV",preview:"_2Wc_a"}},18230:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={note:"JnYV-",icon:"_3UuEL",noteBody:"r9R96"}},92825:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={fullWidthShade:"_1jlME",stripHeightShade:"_2hBQZ",lowerShade:"_7fWf0",upperShade:"_2I5Pn",fullHeightShade:"_26m2r",roundedCorners:"_11aOe"}},86950:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={videoFloater:"_1yCOB",redesign:"_3V80e",bgImg:"_3KBRF",bottomLayer:"_3U70F"}},37640:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={playerWrapper:"_3DJrq"}},11644:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={container:"_1GTRd",fullscreen:"_2agWE",videoFloaterMedia:"_1L9_f",fullScreenRedesign:"_3Ctk9",mediaStageWrapper:"YEIj6",videoTag:"Nu3Wb",preview:"_1U2GK",errorLink:"_1pC8H",errorLinkChevron:"_1Wl8F"}},18840:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={"-thumb-radius-window":"4.5px",thumbRadiusWindow:"4.5px","-thumb-radius-fullscreen":"5px",thumbRadiusFullscreen:"5px",controls:"JoCWT",fullscreen:"_3xiak",pipContainer:"R3QyF",closeBtn:"_3IFz7",duration:"_16nh8",fullscreenBtn:"_2bdZG",playpauseBtnContainer:"_12yJA",volumeContainer:"_2VCkS",currentTime:"_2_4KF",timeText:"_3uSsO",progressBarContainer:"_3jydI",hiddenProgressBar:"_3pwnf",displayedProgressBar:"_21ku_",progressItem:"_3KsQN",displayedProgress:"_3BMKG",displayedBuffer:"_30H64",displayedTrack:"hSz6i",thumb:"al2Th",hideThumb:"_3F6-u",volumeBarContainer:"_1HuQo",visible:"_3MSTc",volumeLowerTrack:"_1doUo",firefoxFix:"_--MFl",lowerTrackLongest:"_2Ui3v",volumeBar:"R14Al",tooltipWrapper:"_2q2Ao",tooltipTextBoxPosAndSize:"_3QlVv",tooltipTextBoxGeneral:"sbESo"}},37326:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={container:"_3zkWT",fullscreen:"_2vZwf",youtubeContainer:"_1V2K3",blockYoutube:"_1x9uu",videoControlsWrapper:"_1U1Mw",strippedVideoControls:"_2HmZV",redesign:"_2f5jE",opacityTransition:"_1gTDs",widgetsWrapper:"_3gJPS",dimmed:"_1DumA"}},97881:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={voipFloater:"_1O6Us"}},34999:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={wrapper:"_3xKYi"}},30099:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={body:"IHGZG",callTitle:"_3dgg6",participantName:"_3Y4xy",actionRow:"VBnae",btnGroup:"_1UTAJ",btnAccept:"x24Wk",btnReject:"_2OWwK",btnEnd:"_2N43F",btnMute:"_2cngH",webrtcCanvas:"TA3bw",webrtcVideo:"_3eyg5",webrtcVideoPreview:"Nk6pN",webrtcAudio:"_3y1ot"}},52552:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={ul:"LP6da",inline:"_1VtNw"}},6778:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={inline:"_2ZEMa"}},25304:(e,t,a)=>{"use strict";function s(){return new Worker(a.p+"webp_to_animation_frames.worker.6ad81f05baa68f36ee66.worker.js")}a.r(t),a.d(t,{default:()=>s})}}]);
//# sourceMappingURL=https://web.whatsapp.com/bootstrap_main.f3cf069364d5f0eb9536.js.map
