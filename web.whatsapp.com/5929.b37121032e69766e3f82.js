/*! Copyright (c) 2021 WhatsApp Inc. All Rights Reserved. */
(self.webpackChunkbuild=self.webpackChunkbuild||[]).push([[5929],{98532:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defineWebPersistedJob=function(e){return(0,d.definePersistedJob)(e)};var d=r(75987)},85929:(e,t,r)=>{"use strict";var d=r(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(35773),a=r(7017),s=r(98532),u=r(33576),n=d(r(45521)),l=d(r(30504)),o=r(72008),c=r(29020),p=r(25054),h=new n.default("productListResponse",(e=>{e.assertTag("iq"),e.assertFromServer();var t=e.child("product_list"),r=[];return t.forEachChildWithTag("product",(e=>{var t=e.maybeChild("id");if(t){var d=e.maybeChild("status");(null==d?void 0:d.contentString())===o.INVALID_PRODUCT_TOKEN?r.push({id:t.contentString(),status:o.INVALID_PRODUCT_TOKEN}):r.push((0,l.default)(e))}})),r})),f=(0,s.defineWebPersistedJob)("queryProductList").finalStep("sendStanza",(({catalogWid:e,productIds:t,width:r,height:d})=>{var s=(0,i.wap)("iq",{to:i.S_WHATSAPP_NET,type:"get",smax_id:"21",xmlns:"w:biz:catalog",id:(0,i.generateId)()},(0,i.wap)("product_list",{jid:(0,c.USER_JID)((0,p.createWid)(e))},t.map((e=>(0,i.wap)("product",null,(0,i.wap)("id",null,e)))).concat([(0,i.wap)("width",null,r.toString()),(0,i.wap)("height",null,d.toString())])));return(0,a.sendIq)(s,h).then((e=>{if(e.success)return e.result;throw new u.ServerStatusCodeError(e.errorCode)}))})).end();t.default=f}}]);