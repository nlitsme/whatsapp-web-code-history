/*! Copyright (c) 2021 WhatsApp Inc. All Rights Reserved. */
(self.webpackChunkwhatsapp_web_client=self.webpackChunkwhatsapp_web_client||[]).push([[9488],{85636:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.formatRemoveResult=function(e,t){return s(e,f,h,p,t)},t.formatResult=s,t.formatParticipantActionString=d,t.formatGroupStatusReasonString=u,t.formatParticipantStatusReasonString=c,t.addSuccessString=function(e,t){return o.default.t(165,{participantNames:e,_plural:t})},t.addFailedString=function(e,t){return o.default.t(163,{participantNames:e,_plural:t})},t.addPartialFailedString=function(){return o.default.t(164)},t.removeSuccessString=f,t.removeFailedString=h,t.removePartialFailedString=p,t.promoteSuccessString=function(e,t){return o.default.t(178,{participantNames:e,_plural:t})},t.promoteFailedString=function(e,t){return o.default.t(176,{participantNames:e,_plural:t})},t.promotePartialFailedString=function(){return o.default.t(177)},t.demoteFailedString=function(e,t,a){switch(a){case 406:return o.default.t(168,{participant:e});default:return o.default.t(167,{participantNames:e,_plural:t})}},t.demoteSuccessString=function(e,t){return o.default.t(170,{participantNames:e,_plural:t})},t.demotePartialFailedString=function(){return o.default.t(169)};var l=r(a(69107)),n=r(a(60246)),o=r(a(66761)),i=r(a(43501));function s(e,t,a,r,o){var s;if(207===e.status){var f={};for(var h in e)if(i.default.isWid(h)){var p=e[h];if((403!==p||!n.default.supportsFeature(n.default.F.GROUPS_V_4_JOIN_PERMISSION))&&207!==p){f[p]||(f[p]=[]);var m=l.default.get(h);m&&f[p].push(m)}}var g=[];for(var _ in f){var v=d(t,a,c,parseInt(_,10),f[_]);v&&g.push(v)}s=g.length>0?g.join("\n"):r()}else s=d(t,a,u,e.status,o);return s}function d(e,t,a,r,l){var n=l.map((e=>e.formattedShortName)).join(o.default.t(672)),i=200===r;return(i?e(n,l.length):t(n,l.length,r))+(i?"":a(r,l.length))}function u(e){var t="";switch(e){case 403:t=" "+o.default.t(113);break;case 408:t=" "+o.default.t(173);break;case 404:t=" "+o.default.t(114);break;case 429:t=" "+o.default.t(115)}return t}function c(e,t){var a="";switch(e){case 401:case 406:case 409:break;case 404:a=" "+o.default.t(172,{_plural:t});break;case 408:a=" "+o.default.t(173,{_plural:t});break;case 500:a=" "+o.default.t(174);break;default:a=" "+o.default.t(175)}return a}function f(e,t){return o.default.t(183,{participantNames:e,_plural:t})}function h(e,t,a){switch(a){case 406:return o.default.t(182,{participant:e});default:return o.default.t(180,{participantNames:e,_plural:t})}}function p(){return o.default.t(181)}},47494:(e,t,a)=>{"use strict";var r=a(20862),l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addParticipants=function(e,t){return h((0,f.unproxy)(e),t)},t.removeParticipants=function(e,t){return p((0,f.unproxy)(e),t)},t.promoteParticipants=function(e,t){return m((0,f.unproxy)(e),t)},t.demoteParticipants=function(e,t){return g((0,f.unproxy)(e),t)};var n=l(a(67294)),o=a(96440),i=l(a(97420)),s=r(a(92246)),d=r(a(85636)),u=l(a(66761)),c=a(43825),f=a(79665);function h(e,t,a=(0,o.genId)()){var r,l=null===(r=e.groupMetadata)||void 0===r?void 0:r.participants;if(null==l)return Promise.reject(new s.ActionError);if(t.some((e=>l.get(e.id))))return __LOG__(3)`models:groupMetadata:participantCollection:addParticipants already a group member`,Promise.reject(new s.ActionError);if(!l.canAdd())return Promise.reject(new s.ActionError);var f=(0,c.sendAddParticipants)(e.id,t.map((e=>e.id))),p=t.map((e=>e.formattedShortName)).join(u.default.t(672)),m=new o.ActionType(u.default.t(166,{participantNames:p,_plural:t.length})),g=f.then((e=>{l.sendForNeededAddRequest(e);var a=d.formatResult(e,d.addSuccessString,d.addFailedString,d.addPartialFailedString,t);return new o.ActionType(a)})).catch((()=>(__LOG__(3)`models:groupMetadata:participantCollection:addParticipants dropped`,new o.ActionType(u.default.t(163,{participantNames:p,_plural:t.length}),{actionText:u.default.t(203),actionHandler:()=>h(e,t,a)}))));return i.default.openToast(n.default.createElement(o.ActionToast,{id:a,initialAction:m,pendingAction:g})),f.then((()=>{}))}function p(e,t,a=(0,o.genId)()){var r,l=null===(r=e.groupMetadata)||void 0===r?void 0:r.participants;if(null==l)return Promise.reject(new s.ActionError);if(t.some((e=>!l.canRemove(e))))return Promise.reject(new s.ActionError);var f=(0,c.sendRemoveParticipants)(e.id,t.map((e=>e.id))),h=t.map((e=>e.contact.formattedShortName)).join(u.default.t(672)),m=new o.ActionType(u.default.t(184,{participantNames:h,_plural:t.length})),g=f.then((e=>{var a=d.formatRemoveResult(e,t.map((e=>e.contact)));return new o.ActionType(a)})).catch((()=>(__LOG__(3)`models:groupMetadata:participantCollection:removeParticipants dropped`,new o.ActionType(u.default.t(180,{participantNames:h,_plural:t.length}),{actionText:u.default.t(203),actionHandler:()=>p(e,t,a)}))));return i.default.openToast(n.default.createElement(o.ActionToast,{id:a,initialAction:m,pendingAction:g})),f.then((()=>{}))}function m(e,t,a=(0,o.genId)()){var r,l=null===(r=e.groupMetadata)||void 0===r?void 0:r.participants;if(null==l)return Promise.reject(new s.ActionError);if(t.some((e=>!l.canPromote(e))))return Promise.reject(new s.ActionError);var f=(0,c.sendPromoteParticipants)(e.id,t.map((e=>e.id))),h=t.map((e=>e.contact.formattedShortName)).join(u.default.t(672)),p=new o.ActionType(u.default.t(179,{participantNames:h,_plural:t.length})),g=f.then((e=>{var a=d.formatResult(e,d.promoteSuccessString,d.promoteFailedString,d.promotePartialFailedString,t.map((e=>e.contact)));return new o.ActionType(a)})).catch((()=>(__LOG__(3)`models:groupMetadata:participantCollection:removeParticipants dropped`,new o.ActionType(u.default.t(176,{participantNames:h,_plural:t.length}),{actionText:u.default.t(203),actionHandler:()=>m(e,t,a)}))));return i.default.openToast(n.default.createElement(o.ActionToast,{id:a,initialAction:p,pendingAction:g})),f.then((()=>{}))}function g(e,t,a=(0,o.genId)()){var r,l=null===(r=e.groupMetadata)||void 0===r?void 0:r.participants;if(null==l)return Promise.reject(new s.ActionError);if(t.some((e=>!l.canDemote(e))))return Promise.reject(new s.ActionError);var f=(0,c.sendDemoteParticipants)(e.id,t.map((e=>e.id))),h=t.map((e=>e.contact.formattedShortName)).join(u.default.t(672)),p=new o.ActionType(u.default.t(171,{participantNames:h,_plural:t.length})),m=f.then((e=>{var a=d.formatResult(e,d.demoteSuccessString,d.demoteFailedString,d.demotePartialFailedString,t.map((e=>e.contact)));return new o.ActionType(a)})).catch((()=>(__LOG__(3)`models:groupMetadata:participantCollection:demoteParticipants dropped`,new o.ActionType(u.default.t(167,{participantNames:h,_plural:t.length}),{actionText:u.default.t(203),actionHandler:()=>g(e,t,a)}))));return i.default.openToast(n.default.createElement(o.ActionToast,{id:a,initialAction:p,pendingAction:m})),f.then((()=>{}))}},43104:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.removeGroupParticipants=function(e,t){return p(e,t,u).catch((e=>{__LOG__(3)`error sending removing group participants iq: ${e}`}))},t.addGroupParticipants=function(e,t){return p(e,t,c).catchType(i.ServerStatusCodeError,(e=>({status:e.statusCode})))},t.demoteGroupParticipants=function(e,t){return p(e,t,f).catch((e=>{__LOG__(3)`error sending demoting group participants iq: ${e}`}))},t.promoteGroupParticipants=function(e,t){return p(e,t,h).catch((e=>{__LOG__(3)`error sending promoting group participants iq: ${e}`}))};var l=r(a(81109)),n=a(24488),o=a(10378),i=a(66274),s=r(a(79112)),d=a(78209),u="remove",c="add",f="demote",h="promote";function p(e,t,a){var r,p=t.map((e=>(0,n.wap)("participant",{jid:(0,d.JID)(e)})));switch(a){case c:r=(0,n.wap)("add",null,p);break;case u:r=(0,n.wap)("remove",null,p);break;case f:r=(0,n.wap)("demote",null,p);break;case h:r=(0,n.wap)("promote",null,p);break;default:return Promise.reject(new Error(`invalid group operation ${a}`))}var m=(0,n.wap)("iq",{to:(0,d.GROUP_JID)(e),type:"set",xmlns:"w:g2",id:(0,n.generateId)()},r);return(0,o.sendIq)(m,function(e){return new s.default(`${e}GroupParticipantsReplyParser`,(t=>({id:t.attrString("id"),participants:t.child(e).mapChildren((e=>({wid:e.attrUserWid("jid"),error:e.hasAttr("error")?e.attrInt("error"):null})))})))}(a)).then((e=>{if(e.success){var{participants:t}=e.result,a={};return t.forEach((e=>{Object.assign(a,{[e.wid.toString()]:null!=e.error?e.error:200})})),(0,l.default)((0,l.default)({},a),{},{status:207,participants:t.map((e=>({[e.wid.toString()]:{code:null!=e.error&&e.error.toString()||"200"}})))})}return Promise.reject(new i.ServerStatusCodeError(e.errorCode,e.errorText))}))}},43825:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendAddParticipants=function(e,t){var a;if(l.default.supportsFeature(l.default.F.MD_BACKEND)){if(!(a=(0,o.addGroupParticipants)(e,t)))return Promise.reject(new Error("addParticipants: not supported when not build with MD_BACKEND"))}else a=n.default.addParticipants(e,t);return a},t.sendRemoveParticipants=function(e,t){var a;if(l.default.supportsFeature(l.default.F.MD_BACKEND)){if(!(a=(0,o.removeGroupParticipants)(e,t)))return Promise.reject(new Error("sendRemoveParticipants: not supported when not build with MD_BACKEND"))}else a=n.default.removeParticipants(e,t);return a},t.sendDemoteParticipants=function(e,t){var a;if(l.default.supportsFeature(l.default.F.MD_BACKEND)){if(!(a=(0,o.demoteGroupParticipants)(e,t)))return Promise.reject(new Error("sendDemoteParticipants: not supported when not build with MD_BACKEND"))}else a=n.default.demoteParticipants(e,t);return a},t.sendPromoteParticipants=function(e,t){var a;if(l.default.supportsFeature(l.default.F.MD_BACKEND)){if(!(a=(0,o.promoteGroupParticipants)(e,t)))return Promise.reject(new Error("sendPromoteParticipants: not supported when not build with MD_BACKEND"))}else a=n.default.promoteParticipants(e,t);return a};var l=r(a(60246)),n=r(a(7682)),o=a(43104)},22204:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoadType=t.EditType=void 0;var r=a(54302).Mirrored(["EDITING","PENDING","DONE","ERROR"]);t.EditType=r;var l=a(54302).Mirrored(["PENDING","DONE","ERROR"]);t.LoadType=l},74600:(e,t,a)=>{"use strict";var r=a(20862),l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({contact:e,editable:t,profilePicThumb:a,onClick:r,onOpenStatus:l,onLoad:S,hideStatusV3:P}){var[y,T]=C(window.innerWidth),[I,M]=C(null);E((()=>{function e(){T(window.innerWidth)}return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)}),[]);var w=y>1300?152:122,N=!(0,c.canSeeStatusV3OnContact)()||e.statusMute||P?null:m.default.get(e.id);function O(){N&&(i.default.openModalMedia(o.default.createElement(p.default,{removeTopDrawer:!1,statusV3:N}),{transition:"status-v3-modal"}),l&&l())}var k=null;I&&(k=o.default.createElement(_.default,{displayName:"ContextMenu",escapable:!0,popable:!0,requestDismiss:()=>{M(null)}},o.default.createElement(v.default,{contextMenu:I})));var D,b=null,R=s.default.noStatusBorder;null!=N&&(b=o.default.createElement(g.default,{statusV3:N,size:w+24,stroke:3,theme:g.RingTheme.BUSINESS_CONTACT_INFO}),R=s.default.hasStatusBorder);D=t&&null!=a?o.default.createElement(h.default,{profilePicThumb:a,size:w}):o.default.createElement(d.default,{id:e.id,size:w,loader:!0,onLoad:S,onClick:function(e){if(r)if(null!=N){e.stopPropagation(),e.preventDefault();var t=[o.default.createElement(u.default,{a8n:"mi-view-photo",key:"view-photo",action:()=>{r(e)}},f.default.t(1580)),o.default.createElement(u.default,{a8n:"mi-view-status",key:"view-status",action:O},f.default.t(1450))];e.persist(),M({menu:t,event:e})}else r(e)},quality:d.DETAIL_IMAGE_QUALITY.HIGH});return o.default.createElement(o.default.Fragment,null,o.default.createElement("div",{className:(0,n.default)(s.default.coverPhoto,{[s.default.isEditable]:t})}),o.default.createElement("div",{className:s.default.avatar},b,o.default.createElement("div",{className:R},D)),k)};var n=l(a(94184)),o=l(a(67294)),i=l(a(97420)),s=l(a(68862)),d=r(a(27890)),u=l(a(59474)),c=a(53615),f=l(a(66761)),h=l(a(8092)),p=l(a(53095)),m=l(a(23519)),g=r(a(784)),_=l(a(47469)),v=l(a(1869)),{useState:C,useEffect:E}=o.default},17236:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RawBusinessProfile",{enumerable:!0,get:function(){return r.RawBusinessProfile}}),Object.defineProperty(t,"BUSINESS_HOUR_MODES",{enumerable:!0,get:function(){return l.BUSINESS_HOUR_MODES}}),Object.defineProperty(t,"DAYS_OF_WEEK",{enumerable:!0,get:function(){return l.DAYS_OF_WEEK}});var r=a(85920),l=a(72203)},30449:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBusinessOpenState=function(e,t){var a,n;if(null==e.timezone)return{status:"unknown"};var o=t||new Date,d=new Date(o.toLocaleString("en-US",{timeZone:e.timezone})),u=(o.getTime()-d.getTime())/1e3/60,c=e.config[r.DAYS_OF_WEEK[o.getDay()]];if(!c)return{status:i.CLOSED_TODAY};switch(c.mode){case l.BUSINESS_HOUR_MODES.OPEN_24H:if(c)return{status:i.OPEN_24H};break;case l.BUSINESS_HOUR_MODES.APPOINTMENT_ONLY:if(c)return{status:i.OPEN_APPOINTMENT};break;case l.BUSINESS_HOUR_MODES.SPECIFIC_HOURS:var f=60*o.getHours()+o.getMinutes();if(1===(null===(a=c.hours)||void 0===a?void 0:a.length)){var h=c.hours[0][0],p=c.hours[0][1];return f>=h&&f<=p?{status:i.OPEN,openUntil:s(u+p)}:f<=h?{status:i.CLOSED,opensAt:s(u+h)}:{status:i.CLOSED}}if(2===(null===(n=c.hours)||void 0===n?void 0:n.length)){var m=c.hours[0][0],g=c.hours[0][1],_=c.hours[1][0],v=c.hours[1][1];return f>=m&&f<=g?{status:i.OPEN,openUntil:s(u+g),additionalOpen:s(u+_),additionalClose:s(u+v)}:f<m?{status:i.CLOSED,opensAt:s(u+m),additionalOpen:s(u+_),additionalClose:s(u+v)}:f>=_&&f<=v?{status:i.OPEN,openUntil:s(u+v)}:f<_?{status:i.CLOSED,opensAt:s(u+_)}:{status:i.CLOSED}}}return{status:"unknown"}},Object.defineProperty(t,"minutesToTime",{enumerable:!0,get:function(){return n.minutesToTime}}),Object.defineProperty(t,"timeStringToMinutes",{enumerable:!0,get:function(){return n.timeStringToMinutes}}),t.BUSINESS_OPEN_STATUS=t.convertToRawBusinessProfile=t.isValidBusinessHours=t.isValidTime=void 0;var r=a(72203),l=a(17236),n=a(46822),o=e=>void 0!==(0,n.timeStringToMinutes)(e);t.isValidTime=o;t.isValidBusinessHours=(e,t)=>{if(e===l.BUSINESS_HOUR_MODES.SPECIFIC_HOURS)for(var a in t){var r=t[a],{closed:n,hours:i}=r;if(!n)for(var[s,d]of i)if(!o(s)||!o(d))return!1}return!0};t.convertToRawBusinessProfile=({mode:e,dayValues:t,note:a,timezone:r})=>{var o={};for(var i in t){var s=t[i],{closed:d,hours:u}=s;if(!d){var c={mode:e};e===l.BUSINESS_HOUR_MODES.SPECIFIC_HOURS&&(c.hours=u.map((([e,t])=>[(0,n.timeStringToMinutes)(e)||0,(0,n.timeStringToMinutes)(t)||0]))),o[i]=c}}return{businessHours:{config:o,note:a,timezone:r||Intl.DateTimeFormat().resolvedOptions().timeZone}}};var i={OPEN:"open",CLOSED:"closed",OPEN_TODAY:"open_today",CLOSED_TODAY:"closed_today",OPEN_APPOINTMENT:"open_appointment",OPEN_24H:"open_24h",UNKNOWN:"unknown"};function s(e){var t=new Date,a=Math.floor(e/60);return t.setHours(a),t.setMinutes(e%60),t.setSeconds(0),t}t.BUSINESS_OPEN_STATUS=i},85920:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"EditType",{enumerable:!0,get:function(){return r.EditType}}),Object.defineProperty(t,"LoadType",{enumerable:!0,get:function(){return r.LoadType}});var r=a(22204)},84816:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return n.default.createElement(i.default,{name:"shopping-cart",className:(0,l.default)(o.default.cartIcon,{[o.default.inheritColor]:"inherit-color"===e.theme})})};var l=r(a(94184)),n=r(a(67294)),o=r(a(91378)),i=r(a(62745))},75715:(e,t,a)=>{"use strict";var r=a(20862),l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var[a,r]=(0,i.useState)(null),l=()=>{r(null)};return(0,i.useEffect)((()=>{if(l(),e){var a=new s.default,i=a.signal;return(0,o.default)((function*(){try{var a=yield(0,v.default)((0,h.default)(e),i),l=null==a?void 0:a.data;if(!l)return;if(r(l),!f.default.supportsFeature(f.default.F.HIGH_QUALITY_LINK_PREVIEWS)||!E.default.webUploadLinkThumbMmsEnabled||!l.thumbnailHQ)return;var o=yield function(){return P.apply(this,arguments)}(l.thumbnailHQ,i,t);if(!o)return;r((0,n.default)((0,n.default)({},l),o))}catch(e){if(e.name===d.ABORT_ERROR)return;__LOG__(2)`useLinkPreview: error`}}))(),()=>{a.signal.aborted||a.abort()}}}),[e,t]),{linkPreview:a,clearLinkPreview:l}},t.findFirstWebLink=void 0;var n=l(a(81109)),o=l(a(48926)),i=a(67294),s=l(a(34233)),d=a(63229),u=a(98658),c=l(a(46274)),f=l(a(60246)),h=l(a(65976)),p=r(a(31667)),m=a(2893),g=l(a(6648)),_=l(a(97962)),v=l(a(39122)),C=l(a(18509)),E=l(a(86981)),S=l(a(63362));function P(){return(P=(0,o.default)((function*(e,t,a){try{var r=yield(0,v.default)(_.default.createFromBase64Jpeg(e),t),l=yield(0,S.default)({thumbnail:r,mediaType:g.default.THUMBNAIL_LINK,mediaKeyInfo:(0,C.default)(),uploadOrigin:(0,m.getUploadOriginForChat)(a),forwardedFromWeb:!1,signal:t,timeout:c.default.MMS_THUMBNAIL_UPLOAD_TIMEOUT}),n=l.mediaEntry;if(!n)return;return{mediaKey:n.mediaKey,mediaKeyTimestamp:n.mediaKeyTimestamp,thumbnailDirectPath:n.directPath,thumbnailSha256:l.filehash,thumbnailEncSha256:n.encFilehash}}catch(e){if(e.name===d.ABORT_ERROR)return;__LOG__(2)`useLinkPreview.uploadHQPreview: error`}}))).apply(this,arguments)}t.findFirstWebLink=e=>{var t=(0,u.removeCodeBlocks)(e),a=p.findLinks(t,!0)[0];if(a)return a.url}},5365:(e,t,a)=>{"use strict";var r=a(20862),l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{images:t,renderFallback:a,fallbackMediaData:r,fetching:l,onClick:i}=e,g=(0,o.useRef)(null),_=(0,o.useRef)(null),v=(0,o.useRef)(null),C=(0,o.useRef)(null),E=(0,o.useRef)(null),[S,P]=(0,o.useState)(null),[y,T]=(0,o.useState)(t.filter((e=>e.mediaData.mediaStage===c.MEDIA_DATA_STAGE.RESOLVED)).length),[I,M]=(0,o.useState)(!1),w=y===t.length,N=()=>T((e=>e+1));(0,o.useEffect)((()=>{if(!w&&!a){var e,t=_.current;if(!t)return;null===(e=v.current)||void 0===e||e.cancel(),v.current=(v.current||Promise.resolve()).then((()=>(0,m.default)(t,{opacity:[1,0]},{delay:75,duration:50}))).cancellable().then((()=>{M(!0)})).catchType(Promise.CancellationError,(()=>{(0,m.default)(t,"stop",!0)})).finally((()=>{v.current=null}))}return()=>{var e;null===(e=v.current)||void 0===e||e.cancel()}}),[w,a]);var O,k,D,b=()=>{var e;return(null===(e=g.current)||void 0===e?void 0:e.children)?g.current.scrollWidth===g.current.offsetWidth?null:0===g.current.scrollLeft?"next":g.current.scrollWidth-1<=g.current.scrollLeft+g.current.offsetWidth?"prev":"both":null};if((0,o.useEffect)((()=>{P(b())}),[w]),a&&0===t.length)return o.default.createElement("div",{className:d.default.carousel,dir:"ltr"},o.default.createElement("div",{className:(0,n.default)(d.default.contentContainer,d.default.slidesContainer)},r&&o.default.createElement(u.default,{altText:"",mediaData:r,renderFallback:!0,singleSlide:!0})));var R=()=>{C.current=null;var e=b();S!==e&&P(e)};if(t.length>1){var x=()=>{var e=g.current;if(null!=e&&("prev"===S||"both"===S)){for(var t=0,a=e.scrollLeft+Math.floor(e.offsetWidth/2),r=e.lastElementChild;r instanceof HTMLElement&&0===t;){var l=r.offsetLeft+Math.floor(r.offsetWidth/2);l<a&&(t=l-a),r=r.previousElementSibling}0!==t&&e.scrollBy({left:t,behavior:"smooth"})}},L=()=>{var e=g.current;if(null!=e&&("next"===S||"both"===S)){for(var t=0,a=e.scrollLeft+Math.floor(e.offsetWidth/2),r=e.firstElementChild;r instanceof HTMLElement&&0===t;){var l=r.offsetLeft+Math.floor(r.offsetWidth/2);a<l&&(t=l-a),r=r.nextElementSibling}0!==t&&e.scrollBy({left:t,behavior:"smooth"})}},A=()=>{E.current=null;var e=b();S!==e&&P(e)};D=()=>{null==E.current&&(E.current=requestAnimationFrame(A))},w&&null!=S&&(O=o.default.createElement(s.default,{type:s.ButtonType.Prev,onClick:x,onKeyDown:x,disabled:"prev"!==S&&"both"!==S,theme:h.RoundTheme.Small,overMedia:!0}),k=o.default.createElement(s.default,{type:s.ButtonType.Next,onClick:L,onKeyDown:L,disabled:"next"!==S&&"both"!==S,theme:h.RoundTheme.Small,overMedia:!0}))}var F=1===t.length,U=t.map(((e,t)=>o.default.createElement(u.default,{key:t,altText:"",image:e,singleSlide:F,mediaData:e.mediaData,onClick:i,onLoad:N}))),V=w?null:o.default.createElement("div",{className:(0,n.default)(d.default.contentContainer,d.default.spinnerContainer)},o.default.createElement("div",{className:d.default.spinner,ref:_},o.default.createElement(p.default,{color:"default",size:50,stroke:4}))),B=(0,n.default)(d.default.carousel,{[d.default.loaded]:!l&&w,[d.default.fadeIn]:I});return o.default.createElement("div",{className:B,dir:"ltr"},V,o.default.createElement("div",{ref:g,className:(0,n.default)(d.default.contentContainer,d.default.slidesContainer),onScroll:D},U),O,k,o.default.createElement(f.default,{onResize:()=>{null==C.current&&(C.current=requestAnimationFrame(R))}}))};var n=l(a(94184)),o=r(a(67294)),i=l(a(30523)),s=r(a(82921)),d=l(a(63696)),u=l(a(92113)),c=a(46072),f=l(a(58505)),h=a(92120),p=l(a(17363)),m=l(a(36708));i.default.polyfill()},92113:(e,t,a)=>{"use strict";var r=a(95318),l=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a(67294)),o=r(a(89882)),i=a(46072),s=r(a(53233)),d=({mediaData:e,altText:t,image:a,singleSlide:r,renderFallback:l,onClick:d,onLoad:u,forwardRef:c})=>{var{fullHeight:f,fullWidth:h,mediaStage:p,renderableUrl:m}=(0,s.default)(e,["fullHeight","fullWidth","mediaStage","renderableUrl"]),g=(0,n.useRef)(null),_=(0,n.useRef)(p===i.MEDIA_DATA_STAGE.RESOLVED);(0,n.useEffect)((()=>{!u||_.current||l||p!==i.MEDIA_DATA_STAGE.RESOLVED||(u(),_.current=!0)}),[u,l,p]);var v=h&&f?h/f:.8;v<.8&&(v=.8),v>1.91&&(v=1.91),v>1&&!r&&(v=1);var C={width:r&&v<1?100*v+"%":1!==v||r?null:"100%"},E={paddingTop:`${Math.floor(100/v)}%`},S={cursor:""+(d?"pointer":"auto")};return n.default.createElement("div",{ref:c?e=>c(e):null,className:o.default.slide,style:C},n.default.createElement("div",{className:o.default.slideInnerContainer,style:E},n.default.createElement("img",{ref:g,alt:t,src:m,className:o.default.image,style:S,draggable:"false",onClick:()=>{d&&g.current&&a&&d(g.current,a)}})))};t.default=d},39950:(e,t,a)=>{"use strict";var r=a(20862),l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.Gallery=k,t.default=void 0;var n=l(a(23493)),o=l(a(94184)),i=r(a(67294)),s=l(a(62067)),d=a(6653),u=l(a(97420)),c=l(a(46274)),f=l(a(25508)),h=a(4404),p=l(a(60246)),m=l(a(66761)),g=l(a(48878)),_=l(a(23223)),v=l(a(86281)),C=l(a(82536)),E=l(a(63284)),S=a(46072),P=l(a(86981)),y=l(a(17363)),T=l(a(82286)),I=a(79665),M=l(a(62745));class w extends i.Component{constructor(...e){super(...e),this.handleScroll=e=>{this._handleScroll(e.currentTarget)},this._handleScroll=(0,n.default)((e=>{var t=this.props.mediaMsgs;t.hasMediaBefore&&e.scrollTop+c.default.SCROLL_FUDGE>e.scrollHeight-e.clientHeight&&this._scheduleMediaQuery(t.head())}),100)}componentDidMount(){this.props.mediaMsgs.hasMediaBefore&&this._scheduleMediaQuery(),this.props.listeners.add(this.props.mediaMsgs,"add",(()=>{this.forceUpdate()})),this.props.listeners.add(this.props.mediaMsgs,"remove",(e=>{var t=this.props.selectedMessages;t&&t.isSelected(e)&&t.setVal(e,!1),this.forceUpdate()})),this.props.listeners.add(this.props.mediaMsgs,"reset",(()=>{this.props.selectedMessages&&this.props.selectedMessages.unsetAll(),this.forceUpdate()})),this.props.listeners.add(this.props.mediaMsgs,"query_media_before",(()=>{this.forceUpdate()}))}componentWillUnmount(){this._handleScroll.cancel()}_scheduleMediaQuery(e){var t=this.props.mediaMsgs;t.hasMediaBefore&&this.props.listeners.uiIdle((()=>{t.queryMedia({chat:(0,I.unproxy)(this.props.chat),msg:e})}))}render(){var e,{fullCollection:t,selectedMessages:a,chat:r,mediaMsgs:l,selectable:n,onMessageSelect:o}=this.props,s=l.map(((e,r)=>{var s;return!t&&r>=l.length-6&&r<=l.length-4&&(s="hideableSecondRow"),i.default.createElement(O,{msg:e,hoverEvent:t,selectable:n,selectedMessages:a,onMessageSelect:o,theme:s,key:e.id.toString()})}));s.reverse(),t||(s=s.slice(0,6));var u=!1;return p.default.supportsFeature(p.default.F.MD_BACKEND)&&r.endOfHistoryTransferType===d.ConversationEndOfHistoryTransferModelPropType.COMPLETE_BUT_MORE_MESSAGES_REMAIN_ON_PRIMARY&&(u=!0,t?e=m.default.t(591):0===l.length&&0===r.docCount&&0===r.linkCount&&0===r.productCount&&(e=m.default.t(589))),i.default.createElement(i.default.Fragment,null,i.default.createElement(k,{medias:s,mediaCollection:l,fullCollection:t,chat:(0,I.unproxy)(r),onScroll:this.handleScroll}),u?i.default.createElement(f.default,{icon:i.default.createElement(M.default,{name:"content-chat"}),theme:"list",secondary:m.default.t(587)},e):null)}}w.CONCERNS={chat:["linkCount","docCount","productCount","endOfHistoryTransferType"]},w.displayName="MediaGallery";class N extends i.Component{constructor(){super(...arguments),this.setRefImg=e=>{this.img=e},this._handleSelectChange=e=>{this.state.selected!==e&&this.setState({selected:e})},this.handleClick=e=>{var{msg:t,selectable:a,onMessageSelect:r}=this.props,l=t.mediaData;if(a&&r)r(t,!this.state.selected);else if(l.mediaStage!==S.MEDIA_DATA_STAGE.ERROR_MISSING){var n;e&&e.stopPropagation();var o=t.id;if(l.isGif||l.type===_.default.TYPE.IMAGE){var s=this.img;n=e=>o.equals(e)&&s?s:null}u.default.mediaViewerModal({msg:(0,I.unproxy)(t),getZoomNode:n})}else u.default.openModal(i.default.createElement(C.default,{msg:t}))},this.handleDragStart=e=>{e.nativeEvent.dataTransfer.setData("text/uri-list",this.props.msg.mediaData.renderableUrl)};var{msg:e,selectedMessages:t}=this.props;this.state={selected:!(!t||!t.isSelected(e))}}componentDidMount(){this.props.selectedMessages&&this.props.listeners.add(this.props.selectedMessages,this.props.msg.id.toString(),this._handleSelectChange)}render(){var{msg:e,hoverEvent:t,selectable:a,onMessageSelect:r,theme:l,className:n}=this.props,s=e.mediaData,d=s.type===_.default.TYPE.IMAGE&&s.renderableUrl?this.handleDragStart:null,u=(0,o.default)(n);return i.default.createElement(E.default,{classes:u,onClick:this.handleClick,hoverEvent:t,selectable:a,selected:this.state.selected,onMessageSelect:r,onDragStart:d,msg:e,theme:l,imgRef:this.setRefImg})}}N.displayName="MediaCanvas";var O=(0,g.default)(N);function k(e){var{mediaCollection:t,fullCollection:a,chat:r,onScroll:l,justify:n}=e,d=e.medias||e.productMedias;if(!d)return null;var u,c,f,p,g=(0,o.default)(v.default.container,{[v.default.drawer]:a,[v.default.galleryEmpty]:0===t.length,[v.default.justifySpaceBetween]:"space-between"===n}),_=[...d];if(t.queryMediaBefore&&(a||_.length<6)){var C=(0,o.default)(v.default.more,v.default.canvasComponent,{[v.default.canvasSecondRow]:!a&&_.length>=3,[v.default.canvasFirst]:0===t.length});_.push(i.default.createElement("div",{className:C,key:"spinner"},i.default.createElement(y.default,{stroke:6,size:24})))}if(0===t.length){if(a)return t.queryMediaBefore?i.default.createElement("div",{className:(0,o.default)(v.default.drawer,v.default.drawerBody)},i.default.createElement(h.Loading,null)):i.default.createElement(h.MediaMsgs,null);t.queryMediaBefore||t.hasMediaBefore||(g=(0,o.default)(g,v.default.galleryEmpty),_=[(u=Math.max(r?r.docCount:0,0),c=Math.max(r?r.linkCount:0,0),f=Math.max(r?r.productCount:0,0),p=[],null!=u&&u>0&&p.push(m.default.t(640,{count:u,_plural:u})),null!=c&&c>0&&p.push(m.default.t(941,{count:c,_plural:c})),P.default.productMediaAttachments&&null!=f&&f>0&&p.push(m.default.t(1301,{count:f,_plural:f})),p.length>0?p.join(m.default.t(672)):P.default.productMediaAttachments?m.default.t(1199):m.default.t(1198))])}else for(var E=0;E<6;E++)_.push(i.default.createElement("div",{className:v.default.canvasEmpty,key:"empty"+E}));return i.default.createElement("div",{onScroll:l,"data-a8n":s.default.key("media-gallery"),className:g},_)}var D=(0,g.default)((0,T.default)(w,w.CONCERNS));t.default=D},63284:(e,t,a)=>{"use strict";var r=a(20862),l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.hasThumbnail=C,t.default=t.MediaThumb=void 0;var n=l(a(94184)),o=r(a(67294)),i=l(a(8906)),s=l(a(56656)),d=l(a(48878)),u=l(a(23223)),c=l(a(20720)),f=l(a(18263)),h=l(a(5148)),p=l(a(62745)),m=l(a(31492)),g=a(46072);class _ extends o.Component{constructor(...e){super(...e),this.state={hover:!1},this._setRefImg=e=>{this._img=e},this._setRefContainer=e=>{this._container=e},this._handleSelectClick=()=>{this.props.onMessageSelect&&this.props.onMessageSelect(this.props.msg,!this.props.selected)},this._handleMouseOver=()=>{this.state.hover||this.setState({hover:!0})},this._handleMouseEnter=()=>{this.state.hover||this.setState({hover:!0})},this._handleMouseLeave=()=>{this.state.hover&&this.setState({hover:!1})},this.maybeDownloadMediaMD=()=>{var{msg:e}=this.props;e.mediaData.preview||e.mediaData.fullPreviewData||e.mediaData.type!==u.default.TYPE.IMAGE&&e.mediaData.type!==u.default.TYPE.VIDEO||e.downloadMedia({downloadEvenIfExpensive:!1,isUserInitiated:!1,rmrReason:h.default.WEBC_RMR_REASON_CODE.MEDIA_VIEWER})},this._renderImgNode=(e,t,a,r)=>{var l=a?o.default.createElement("div",{className:c.default.shade}):null,n=t?{backgroundImage:`url(${t})`}:null;return o.default.createElement("div",{className:e,style:n,onClick:this.props.onClick,ref:this._setRefImg,onDragStart:this.props.onDragStart,draggable:null!=this.props.onDragStart||null},r,l)},this._downloadMedia=()=>{this.props.msg.downloadMedia({downloadEvenIfExpensive:!1,isUserInitiated:!1,rmrReason:h.default.WEBC_RMR_REASON_CODE.MEDIA_VIEWER})},this._renderImg=()=>{var e,{msg:{mediaData:t},preferPreview:a}=this.props;switch(t.type){case u.default.TYPE.AUDIO:return this._renderImgNode(`${c.default.mediaCanvas} attach-media-audio-thumb`);case u.default.TYPE.VIDEO:var r=(0,n.default)(c.default.mediaCanvas,{"media-video-thumb":t.isGif&&!t.preview}),l=null===(e=t.preview)||void 0===e?void 0:e.url();return this._renderImgNode(r,l,!0);case u.default.TYPE.IMAGE:var i=e=>{var a,r=null!=e?o.default.createElement("div",{className:c.default.mediaCanvas,style:{backgroundImage:`url(${e})`}}):null;return this._renderImgNode(c.default.mediaCanvas,null===(a=t.preview)||void 0===a?void 0:a.url(),this.props.msg.star,r)},s=()=>t.preview?i(null):this._renderImgNode(c.default.mediaCanvas,null,this.props.msg.star);return a?s():o.default.createElement("div",{className:c.default.mediaCanvas},o.default.createElement(f.default,{mediaData:t,placeholderRenderer:s,renderProgressively:!0,downloadMedia:this._downloadMedia},i));default:return this._renderImgNode(null,null,this.props.msg.star)}},this._renderIcon=()=>{var e,{mediaData:t}=this.props.msg;if(!t)return null;switch(t.type){case u.default.TYPE.AUDIO:e="msg-audio";break;case u.default.TYPE.VIDEO:e=t.isGif?"msg-gif":"msg-video"}return null==e?null:o.default.createElement("div",{className:c.default.iconType},o.default.createElement(p.default,{name:e}))},this._renderDuration=()=>{var{mediaData:e}=this.props.msg;switch(e.type){case u.default.TYPE.AUDIO:return o.default.createElement(v,{duration:e.duration});case u.default.TYPE.VIDEO:return e.isGif?null:o.default.createElement(v,{duration:e.duration});default:return null}}}componentDidMount(){this.props.listeners.add(this.props.msg.mediaData,"change:preview",(()=>{this.forceUpdate()})),this.props.listeners.add(this.props.msg,"change:star",(()=>{this.forceUpdate()})),this.props.imgRef&&this.props.imgRef(this._img),this.props.containerRef&&this.props.containerRef(this._container),this.maybeDownloadMediaMD(),this.props.listeners.add(this.props.msg.mediaData,"change:mediaStage",(()=>{this.props.msg.mediaData.mediaStage===g.MEDIA_DATA_STAGE.RESOLVED&&this.forceUpdate()}))}componentDidUpdate(){this.props.imgRef&&this.props.imgRef(this._img),this.props.containerRef&&this.props.containerRef(this._container)}componentWillUnmount(){this.props.imgRef&&this.props.imgRef(null),this.props.containerRef&&this.props.containerRef(null)}render(){var e,{msg:t,selectable:a,theme:r,active:l}=this.props,s=this.props.selected||!1;(a||this.state.hover)&&(e=o.default.createElement("div",{className:c.default.mediaSelect},o.default.createElement("div",{className:c.default.shadeTop,onClick:this.props.onClick}),o.default.createElement(i.default,{onChange:this._handleSelectClick,hover:this.state.hover,checked:s})));var d=null,u=null,f=null;this.props.hoverEvent&&(d=this._handleMouseOver,u=this._handleMouseEnter,f=this._handleMouseLeave);var h=(0,n.default)(this.props.classes,c.default.canvasComponent,{[c.default.canvasSelected]:s,[c.default.canvasSecondRow]:"hideableSecondRow"===r,[c.default.viewerFlow]:"viewerFlow"===r||"viewerFlowTransparent"===r,[c.default.viewerFlowTransparent]:"viewerFlowTransparent"===r,[c.default.active]:l}),m=t.star?o.default.createElement("div",{className:c.default.iconStar},o.default.createElement(p.default,{name:"star"})):null;return!0,C(t.mediaData)?o.default.createElement("div",{ref:this._setRefContainer,className:h,onMouseOver:d,onMouseEnter:u,onMouseLeave:f},e,o.default.createElement("div",{className:c.default.canvasBody},this._renderIcon(),this._renderDuration(),m),this._renderImg()):null}}function v({duration:e}){var t=s.default.durationStr(e);return t?o.default.createElement("span",{className:c.default.mediaCanvasDuration},t):null}function C(e){switch(e.type){case u.default.TYPE.VIDEO:case u.default.TYPE.IMAGE:if(e.preview||e.fullPreviewData||e.mediaStage===g.MEDIA_DATA_STAGE.RESOLVED)return!0;if(m.default.has(e.filehash)){try{m.default.getOrCreateURL(e.filehash)}catch(e){return!1}return!0}return!1;default:return!0}}t.MediaThumb=_,_.displayName="MediaThumb";var E=(0,d.default)(_);t.default=E},51432:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return n.default.createElement("div",{className:(0,l.default)(o.default.icon,{[o.default.transparent]:e.theme&&"transparent"===e.theme,[o.default.compact]:e.theme&&"compact"===e.theme,[o.default.disabled]:e.disabled})},e.children)};var l=r(a(94184)),n=r(a(67294)),o=r(a(34435))},8235:(e,t,a)=>{"use strict";var r=a(20862),l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a(23279)),o=r(a(67294)),i=l(a(97420)),s=l(a(46274)),d=l(a(95506)),u=a(56726),c=l(a(48878)),f=l(a(82286)),h=l(a(44843)),p=r(a(11774)),m=(0,n.default)(((e,t)=>{(0,u.setVideoVolumeSettings)(e,t)}),500);class g extends o.PureComponent{constructor(...e){super(...e),this.checkIteration=0,this.checkForSuccessInterval=0,this.hasCalledPlaying=!1,this.mediaBlobWasDownloadedBeforeMount=Boolean(this.props.mediaData.mediaBlob),this.refVideo=(0,o.createRef)(),this.onVolumeChange=()=>{var e=this.refVideo&&this.refVideo.current;e&&m(e.volume,e.muted)},this.startCheckForSuccess=()=>{this.checkIteration=0,this.checkForSuccessInterval||(this.checkForSuccessInterval=setInterval(this.checkForSuccess,250))},this.clearCheckForSuccess=()=>{this.checkForSuccessInterval&&(clearInterval(this.checkForSuccessInterval),this.checkIteration=0,this.checkForSuccessInterval=0)},this.checkForSuccess=()=>{if(p.default.state===p.STATE.CONNECTED){this.checkIteration++;var e=this.refVideo&&this.refVideo.current,t=e&&e.buffered;t&&t.length&&t.end(0)>0?this.onPlaying():this.checkIteration>240&&this.clearCheckForSuccess()}},this.onPlayerError=()=>{this.clearCheckForSuccess()},this.onOtherPlaying=e=>{e!==this&&this.pause()},this.pause=()=>{var e=this.refVideo&&this.refVideo.current;e&&(e.paused||e.pause())},this.onPlaying=()=>{this.clearCheckForSuccess(),i.default.mediaPlaying(this)},this.onLoadedMetadata=e=>{this.setStartTime();var{onLoadedMetadata:t}=this.props;t&&t(e)},this.setStartTime=()=>{var e=this.refVideo&&this.refVideo.current;null!=this.props.startTime&&0!==this.props.startTime&&e&&(e.currentTime=this.props.startTime)},this.onContextMenu=e=>{this.props.disableContextMenu&&e.preventDefault()}}componentDidMount(){this.props.listeners.add(i.default,"mediaPlaying",this.onOtherPlaying),this.props.listeners.add(i.default,"pttRecording",this.pause),this._updateVideoUserPrefs(),this.props.refVideo&&this.props.refVideo(this.refVideo)}componentWillUnmount(){m.flush(),this.clearCheckForSuccess(),this.pause(),h.default.isBlink&&this.refVideo.current&&(0,d.default)(this.refVideo.current)}componentDidUpdate(e){this._updateVideoUserPrefs(),e.startTime!==this.props.startTime&&this.setStartTime(),this.props.refVideo&&this.props.refVideo(this.refVideo)}_updateVideoUserPrefs(){var e=this.refVideo&&this.refVideo.current;if(e){var t=(0,u.getVideoVolumeSettings)();t&&("number"==typeof t.volume&&(e.volume=t.volume),"boolean"==typeof t.muted&&(e.muted=t.muted)),v()&&this.props.autoPlay&&this.startCheckForSuccess()}}render(){var e,t=this.props,{mediaData:a}=t,r=a.mediaBlob,l=a.streamable&&a.isStreamable();if(!this.mediaBlobWasDownloadedBeforeMount&&l||!r){if(!a.streamable||!a.isStreamable())return null;e=`${s.default.VIDEO_STREAM_URL}?key=${this.props.msg.id.toString()}`}else e=r.url();var n=v()&&!t.autoPlay?this.startCheckForSuccess:void 0;return o.default.createElement("video",{ref:this.refVideo,src:e,poster:t.poster,className:t.className,controls:t.controls,autoPlay:t.autoPlay,onClick:t.onClick,onDoubleClick:t.onDoubleClick,onVolumeChange:this.onVolumeChange,onLoadedMetadata:this.onLoadedMetadata,onPlay:n,onPlaying:this.onPlaying,onError:this.clearCheckForSuccess,onContextMenu:this.onContextMenu},t.children)}}g.CONCERNS={msg:["id"],mediaData:["mediaBlob","streamable"]},g.displayName="VideoTag";var _=(0,c.default)((0,f.default)(g,g.CONCERNS));function v(){return h.default.isGecko||h.default.isSafari}t.default=_},53095:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(a(67294)),n=r(a(21681)),o=r(a(77389));class i extends n.default{constructor(...e){super(...e),this.closeStatusViewer=()=>{this.end()}}componentDidMount(){this.push(l.default.createElement(o.default,{initialStatusV3:this.props.statusV3,quotedMsgKey:this.props.msgKey,closeStatusViewer:this.closeStatusViewer,onMsgNotFound:this.props.onMsgNotFound}),"none")}}t.default=i},51051:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{catalog:t,onSend:a}=e,r=(0,s.createCatalogLink)(t.id.user),d=t.id.equals((0,n.getMaybeMeUser)())?`${o.default.t(1270)} ${r}`:r;return l.default.createElement(i.default,{text:d,pushTransition:"none",popTransition:"none",onSend:a})};var l=r(a(67294)),n=a(56726),o=r(a(66761)),i=r(a(34751)),s=a(42473)},87443:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{product:t,onSend:a}=e,r=(0,s.createProductLink)(t.catalogWid.user,t.id.toString()),d=t.catalogWid.equals((0,n.getMaybeMeUser)())?`${o.default.t(1298)} ${r}`:r;return l.default.createElement(i.default,{text:d,pushTransition:"none",popTransition:"none",onSend:a})};var l=r(a(67294)),n=a(56726),o=r(a(66761)),i=r(a(34751)),s=a(42473)},34751:(e,t,a)=>{"use strict";var r=a(20862),l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a(48926)),o=l(a(67294)),i=a(87577),s=a(65627),d=l(a(97420)),u=l(a(46274)),c=l(a(21681)),f=l(a(66761)),h=r(a(30399)),p=a(49993),m=l(a(86981)),g=l(a(93154));class _ extends c.default{constructor(...e){var t;super(...e),t=this,this._selected=[],this._getSelected=()=>this._selected,this._handleSelectionChange=(e,t,a)=>{this._selected=a},this._handleForwardConfirmed=e=>{this._send(e)},this._handleCancel=()=>{this.end()},this._send=function(){var e=(0,n.default)((function*(e){var{text:a,title:r,onSend:l}=t.props;if(1===e.length){var n=e[0];yield t._pasteText(n,a),t.end(),window.innerWidth<=u.default.LAYOUT_2COLUMNS_MAX_WIDTH&&d.default.closeDrawerRight()}else t.push(o.default.createElement(g.default,{defaultText:a,title:r||f.default.t(1098),onSend:(a,r)=>t._handleSend(e,a,r),onBack:t._handleBack}));l&&l()}));return function(){return e.apply(this,arguments)}}(),this._handleSend=(e,t,a)=>{this._sendText(e,t,a),this.end()},this._handleBack=()=>{this.pop()},this._pasteText=function(){var e=(0,n.default)((function*(e,a){yield t._ensureContactUnblocked(e),e.active?d.default.pasteChatTextInput(e,a):(e.setComposeContents({text:a}),d.default.openChatFromUnread(e).then((t=>{t&&d.default.focusChatTextInput(e)})))}));return function(){return e.apply(this,arguments)}}(),this._sendText=(e,a,r)=>{e.forEach(function(){var e=(0,n.default)((function*(e){yield t._ensureContactUnblocked(e),d.default.once("ui_idle",(()=>{(0,p.sendTextMsgToChat)(e,a,{linkPreview:r})}))}));return function(){return e.apply(this,arguments)}}())},this._ensureContactUnblocked=function(){var e=(0,n.default)((function*(e){e.isUser&&e.contact.isBlocked()&&(yield(0,i.unblockContact)(e.contact))}));return function(){return e.apply(this,arguments)}}()}componentDidMount(){this.push(o.default.createElement(h.default,{title:this.props.title||f.default.t(1098),listType:h.ListType.CHAT_SELECT_MODAL,getInitialItems:this._getSelected,maxItems:m.default.multicastLimitGlobal,onConfirm:this._handleForwardConfirmed,onCancel:this._handleCancel,onSelectionChanged:this._handleSelectionChange,singleSelectionFooterType:s.FooterType.NEXT,multipleSelectionFooterType:s.FooterType.NEXT}))}}t.default=_},44216:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{labels:t,theme:a}=e;return t&&(0,o.canDisplayLabel)()?n.default.createElement("div",{className:(0,l.default)(i.default.labelContainer,{[i.default.standaloneLabelContainer]:"standalone"===a})},(()=>{if(t)return t.map(((e,t)=>n.default.createElement("div",{key:t,className:(0,l.default)(i.default.labelRow,{[i.default.standaloneLabelRow]:"standalone"===a})},n.default.createElement(s.default,{labels:[e],showName:!0}))))})()):null};var l=r(a(94184)),n=r(a(67294)),o=a(53615),i=r(a(18310)),s=r(a(28113))},73636:(e,t,a)=>{"use strict";var r=a(95318),l=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a(67294)),o=r(a(62067)),i=r(a(39935)),s=r(a(73132)),d=r(a(3395)),u=r(a(34727)),c=l(a(85002)),f=r(a(66761)),h=a(2633),p=a(45739),m=r(a(53233)),g=(0,n.forwardRef)(((e,t)=>{var{settings:a,onClose:r}=e,{archive:l}=(0,m.default)(a,["archive"]),g=!l.classic;return n.default.createElement(d.default,{ref:t},n.default.createElement(c.default,{title:f.default.t(237),type:c.DRAWER_HEADER_TYPE.LARGE,onBack:r}),n.default.createElement(u.default,null,n.default.createElement("div",{className:i.default.section},n.default.createElement("div",{"data-a8n":o.default.key("auto-unarchive-setting"),className:i.default.control},n.default.createElement(s.default,{onChange:()=>{var e=!l.classic;(0,h.setArchiveClassicSetting)(e)},checked:g})),n.default.createElement("div",{"data-a8n":o.default.key("auto-unarchive-setting-text")},f.default.t(257),n.default.createElement(p.TextDiv,{theme:"muted"},f.default.t(256))))))}));t.default=g},42699:(e,t,a)=>{"use strict";var r=a(20862),l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({elementId:e,onClick:t}){return document.queryCommandSupported("copy")?n.default.createElement(d.default,{a8nText:"li-copy-link",icon:n.default.createElement(c.default,{name:"copy",className:i.default.icon}),onClick:()=>function(e,t){(0,s.default)(e)?o.default.openToast(n.default.createElement(f.default,{msg:u.default.t(939),id:(0,f.genId)()})):o.default.openToast(n.default.createElement(f.default,{msg:u.default.t(938),id:(0,f.genId)()}));null!=t&&t()}(e,t)},u.default.t(599)):null};var n=l(a(67294)),o=l(a(97420)),i=l(a(16115)),s=l(a(38923)),d=l(a(61376)),u=l(a(66761)),c=l(a(62745)),f=r(a(9931))},61376:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{children:t,onClick:a,icon:r,className:c,color:f,theme:h}=e,[p,m]=(0,u.default)(a),g=null!=r?o.default.createElement("div",{className:(0,n.default)(s.default.icon,{[s.default.danger]:"danger"===f,[s.default.success]:"success"===f})},r):null,_=(0,n.default)(s.default.container,c,{[s.default.containerNoIcon]:!r,[s.default.containerListAligned]:"list-aligned"===h}),v="string"==typeof t?t:null;return o.default.createElement("div",(0,l.default)({},m,{className:_,"data-a8n":i.default.key(e.a8nText),"data-ignore-capture":"any",ref:p,title:v}),g,o.default.createElement("div",{className:s.default.bodyContainer},o.default.createElement("div",{className:s.default.body},o.default.createElement(d.TextSpan,{theme:"title",color:f},t))))};var l=r(a(67154)),n=r(a(94184)),o=r(a(67294)),i=r(a(62067)),s=r(a(89600)),d=a(45739),u=r(a(29490))},50514:(e,t,a)=>{"use strict";var r=a(20862),l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a(67294)),o=a(7453),i=l(a(57984)),s=l(a(18482)),d=l(a(3243)),u=l(a(42590)),c=a(56726),f=l(a(66761)),h=l(a(5148)),p=a(79435),m=l(a(20597)),g=r(a(13392)),_=p.NuxKeyTypes.COOL_OFF_NUX.COLLECTIONS,v={COOL_OFF_DURATION_IN_DAYS:2,VIEWS_BEFORE_COOL_OFF_IN_DAYS:1,CLICKS_BEFORE_COOL_OFF:1,MAX_VIEWS_IN_DAYS:2,COOL_OFF_START_STORAGE_KEY:p.CoolOffPeriodKeys.COLLECTIONS};class C extends m.default{render(){var{onClick:e}=this.props,t=new g.default(_,h.default.BANNER_TYPES.SMB_COLLECTION_CREATION,v),a=n.default.createElement("span",{className:s.default.actionText},f.default.t(1212));return n.default.createElement(u.default,{title:f.default.t(1214),subtitle:f.default.t(1213),actionText:a,onClick:e,nuxManager:t,theme:"nuxBlue"})}static shouldShow(){return(0,o.getABPropConfigValue)("web_abprop_collections_nux_banner")&&d.default.isSMB&&function(){var e=i.default.get((0,c.getMeUser)());if(e&&e.collections){var t=e.collections.getCollectionModels(!0);return 0!==e.productCollection.getProductModels(!0).length&&0===t.length}return!1}()&&(0,g.shouldShowNUX)(_,v)}}t.default=C,C.displayName="CollectionsBanner"},20254:(e,t,a)=>{"use strict";var r=a(20862),l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a(94184)),o=l(a(96391)),i=r(a(67294)),s=l(a(79274)),d=l(a(97420)),u=l(a(27890)),c=l(a(98712)),f=l(a(84150)),h=l(a(66761)),p=a(3875),m=l(a(53852)),g=l(a(99597)),_=l(a(82286)),v=l(a(62745)),C=l(a(47469)),E=l(a(36708));class S extends i.Component{constructor(...e){super(...e),this.state={style:{visibility:"hidden"}},this.handleScroll=e=>{Math.abs(e.deltaY)>3&&this.handleClose()},this.handleClose=()=>{if(!this.closing){var e;if(this.closing=!0,this.props.getZoomNode((t=>{e=t})),!e)return d.default.closeModalMedia();var t=this._refImage;if(t){this.props.animateBorderRadius&&(t.style.transition="border-radius 500ms cubic-bezier(.1,.82,.25,1)",t.style.borderRadius="50%");var a=(0,o.default)(e,"start"),r=t.getBoundingClientRect(),l=a.getBoundingClientRect(),n=l.top-r.top,i=l.left-r.left,s=a.clientWidth/t.clientWidth;(0,E.default)(t,{translateX:[i,0],translateY:[n,0],scale:[s,1]},{duration:200,easing:[.1,.82,.25,1]}).then((()=>{d.default.closeModalMedia()}))}}},this.handleImageLoad=e=>{var t=e.target;this.setState({size:{width:t.naturalWidth,height:t.naturalHeight}},(()=>{this.props.getZoomNode((e=>{var a=t.getBoundingClientRect(),r=e.getBoundingClientRect(),l=r.top-a.top,n={visibility:"hidden",transform:`translateX(${r.left-a.left}px) translateY(${l}px) scale(${e.clientWidth/t.clientWidth})`,transition:"transform 0s",borderRadius:void 0};this.props.animateBorderRadius&&(n.borderRadius="50%"),this.setState({style:n},(()=>{var e={transform:"translateX(0px) translateY(0px) scale(1)",transition:"transform 500ms cubic-bezier(.1,.82,.25,1)"};this.props.animateBorderRadius&&(e={transform:"translateX(0px) translateY(0px) scale(1)",borderRadius:"0%",transition:"transform 500ms cubic-bezier(.1,.82,.25,1),\n                                         border-radius 500ms cubic-bezier(.1,.82,.25,1)"}),this.setState({style:e})}))}))}))},this.setRefImage=e=>{this._refImage=e}}shouldComponentUpdate(e){return!!e.profilePicThumb.imgFull||(this.handleClose(),!1)}render(){var e,{contact:t,profilePicThumb:a}=this.props;return a.imgFull&&(e=i.default.createElement(f.default,{src:a.imgFull,hasPrivacyChecks:!0,onLoad:this.handleImageLoad,className:g.default.profileViewerImg})),i.default.createElement(C.default,{displayName:"PhotoViewer",escapable:!0,requestDismiss:this.handleClose},i.default.createElement("div",{className:(0,n.default)("overlay",g.default.container),onWheel:this.handleScroll,onClick:this.handleClose},i.default.createElement("div",{className:g.default.headerContainer},i.default.createElement("div",{className:g.default.profileThumb},i.default.createElement(s.default,{image:i.default.createElement(u.default,{id:t.id,size:40}),theme:"plain",primary:i.default.createElement(c.default,{text:t.formattedUser})})),i.default.createElement("div",{className:g.default.mediaPanelTools},i.default.createElement(p.MenuBar,{key:"media-panel-header",theme:"strong"},i.default.createElement(p.MenuBarItem,{a8nText:"btn-close",icon:i.default.createElement(v.default,{name:"x-viewer"}),title:h.default.t(1705),onClick:this.handleClose})))),i.default.createElement("div",{className:g.default.profileContainer,dir:"ltr"},i.default.createElement("div",{className:g.default.media},i.default.createElement(m.default,{type:"scaleDown",size:this.state.size},i.default.createElement("div",{className:g.default.profileViewer,"data-animate-profile-viewer":!0,ref:this.setRefImage,style:this.state.style},e))))))}}S.CONCERNS={contact:["formattedUser","id"],profilePicThumb:["imgFull"]},S.displayName="PhotoViewerModal";var P=(0,_.default)(S,S.CONCERNS);t.default=P},8092:(e,t,a)=>{"use strict";var r=a(20862),l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{profilePicThumb:t,size:a}=e,r=!t.canSet()&&!t.canDelete(),[l,p]=h(!1),m=(0,f.default)();return n.default.createElement(s.default,{type:d.default.PROFILE,id:t.id,attachToChat:!1,pending:l,startImage:t.imgFull,readOnly:r,onImageSet:(t,a)=>{var r,l=e.profilePicThumb;p(!0),r=t&&a?(0,u.setProfilePic)(l,t,a):(0,u.deleteProfilePic)(l),(0,c.default)(r,m).catchType(i.ActionError,(()=>{__LOG__(3)`ProfileDrawer: failed to set/delete profile image`})).catch((e=>{if(e.name!==o.ABORT_ERROR)throw e})).finally((()=>{p(!1)}))},size:a})};var n=l(a(67294)),o=a(63229),i=r(a(92246)),s=l(a(40794)),d=l(a(10839)),u=a(24285),c=l(a(39122)),f=l(a(76621)),{useState:h}=n.default},36350:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return l.default.createElement(n.default,{a8nText:"li-share-link",icon:l.default.createElement(s.default,{name:"forward",className:i.default.icon}),onClick:e.onClick},o.default.t(1396))};var l=r(a(67294)),n=r(a(61376)),o=r(a(66761)),i=r(a(17932)),s=r(a(62745))},88003:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return l.default.createElement(n.default,{a8nText:"li-share-link",icon:l.default.createElement(s.default,{name:"forward",className:i.default.icon}),onClick:e.onClick},o.default.t(1419))};var l=r(a(67294)),n=r(a(61376)),o=r(a(66761)),i=r(a(7200)),s=r(a(62745))},78711:(e,t,a)=>{"use strict";var r=a(95318),l=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a(67294)),o=r(a(18917)),i=r(a(97420)),s=r(a(98429)),d=a(68770),u=r(a(77864)),c=r(a(49204)),f=a(38178),h=r(a(29594)),p=r(a(66761)),m=r(a(52206)),g=r(a(86878)),_=a(49993),v=r(a(78654)),C=r(a(62745)),E=l(a(9931)),S=r(a(47469)),P=r(a(1869)),y=r(a(77923));class T extends n.Component{constructor(){super(...arguments),this.emojiInputComponent=(0,u.default)(),this._refEmojiPanel=(0,n.createRef)(),this.isSkinTonePickerOpen=!1,this.handleSend=e=>{var t;if(e.preventDefault(),this._refInputLine){var a=this._refInputLine.value.trim();if(a.length){var r=(0,E.genId)();o.default.find(this.props.msg.sender).then((e=>(i.default.openToast(n.default.createElement(E.default,{msg:p.default.t(1446),id:r})),(0,_.sendTextMsgToChat)(e,(0,h.default)(a),{quotedMsg:this.props.msg})))).then((()=>{this.props.onSend()})).catchType(s.default,(()=>{var{chat:e}=this.state;e&&i.default.openToast(n.default.createElement(E.default,{msg:p.default.t(1696,{contact:e.contact.formattedName}),id:r}))})),null===(t=this._refInputLine)||void 0===t||t.reset(),this._emojiPickerClose(),this.props.dismissReply()}}},this.handleFocus=()=>{this.setState({focused:!0})},this.handleBlur=()=>{this.isSkinTonePickerOpen||document.activeElement===document.body&&this.setState({focused:!1})},this.handleSkinTonePicker=e=>{this.isSkinTonePickerOpen=e},this.isFocused=()=>this.state.focused,this.handleEmojiPicker=e=>{e&&(e.preventDefault(),e.stopPropagation());var t=n.default.createElement(c.default,{ref:this._refEmojiPanel,onEmoji:this.handleEmoji,onFocusNext:this.restoreFocus,onFocusPrev:this.restoreFocus});this.setState({emojiPicker:{menu:t,dirY:d.DirY.TOP,type:"emoji_picker",anchor:e.target}})},this.handleEmoji=e=>{this._refInputLine&&this._refInputLine.replaceSelection(e)},this.restoreFocus=()=>{this._refInputLine&&this._refInputLine.focus()},this._restoreEmojiPickerFocus=()=>{var e;null===(e=this._refEmojiPanel.current)||void 0===e||e.restoreFocus()},this._emojiPickerClose=()=>{this.setState({emojiPicker:void 0}),this.restoreFocus()},this.state={replyCaption:"",focused:!1,emojiPicker:void 0,chat:void 0},o.default.find(this.props.msg.sender).checkpoint(this.props.rejectOnUnmount()).then((e=>{this.setState({chat:e})}))}componentDidUpdate(e,t){this._shouldPausePlayback(t)&&!this._shouldPausePlayback(this.state)?this.props.play():!this._shouldPausePlayback(t)&&this._shouldPausePlayback(this.state)&&this.props.pause()}_shouldPausePlayback(e){return Boolean(e.emojiPicker)||e.focused}isPaused(){return this._shouldPausePlayback(this.state)}render(){var e,t,a;this.state.emojiPicker&&(e=n.default.createElement(S.default,{displayName:"EmojiPicker",escapable:!0,popable:!0,requestDismiss:this._emojiPickerClose,requestFocus:this._restoreEmojiPickerFocus},n.default.createElement(P.default,{contextMenu:this.state.emojiPicker})),t=n.default.createElement(S.default,{displayName:"EmojiPicker",escapable:!0,requestFocus:this._restoreEmojiPickerFocus},n.default.createElement("div",null,e)));var{chat:r}=this.state;r&&this.state.focused&&!this.state.emojiPicker&&(a=n.default.createElement(S.default,{displayName:"StatusV3Reply",escapable:!0,requestDismiss:this.props.dismissReply},n.default.createElement("div",{className:v.default.popupPanel},n.default.createElement(g.default,{msg:this.props.msg.safe(),theme:"statusV3",key:this.props.msg.id.toString(),chat:r}))));var l=this.emojiInputComponent;return n.default.createElement("div",{className:v.default.container},n.default.createElement(y.default,{transitionName:"status-v3-quoted-msg",transitionAppear:!0},a),n.default.createElement("div",{className:v.default.wrapper},n.default.createElement("button",{className:v.default.emojiIcon,onClick:this.handleEmojiPicker},n.default.createElement(C.default,{name:"smiley"})),n.default.createElement("div",{className:v.default.lineWrapper},n.default.createElement(l.EmojiSuggestions,{theme:f.ThemeOptions.EMOJI_INPUT,onSkinTonePicker:this.handleSkinTonePicker}),n.default.createElement(l,{ref:e=>{this._refInputLine=e},theme:"status-reply",spellCheck:!0,onFocus:this.handleFocus,onBlur:this.handleBlur,onEnter:this.handleSend,placeholder:p.default.t(1498),editable:!0,multiline:!0})),n.default.createElement("button",{className:v.default.sendIcon,onClick:this.handleSend},n.default.createElement(C.default,{name:"send",directional:!0})),t))}}T.displayName="StatusV3ComposeBox";var I=(0,m.default)(T);t.default=class extends I{isFocused(){return!0===this.getComponent().isFocused()}isPaused(){return this.getComponent().isPaused()}restoreFocus(){this.getComponent().restoreFocus()}}},79522:(e,t,a)=>{"use strict";var r=a(20862),l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.StatusV3Text=t.default=void 0;var n=l(a(23279)),o=l(a(94184)),i=r(a(67294)),s=l(a(60969)),d=l(a(18917)),u=l(a(56656)),c=l(a(97420)),f=l(a(46274)),h=l(a(27890)),p=l(a(98712)),m=a(66274),g=r(a(92246)),_=l(a(47312)),v=l(a(63030)),C=l(a(60246)),E=l(a(79766)),S=l(a(84150)),P=a(85371),y=l(a(66761)),T=l(a(48878)),I=l(a(23223)),M=a(46072),w=l(a(18263)),N=l(a(5148)),O=l(a(43174)),k=l(a(53852)),D=l(a(52206)),b=l(a(17363)),R=l(a(82286)),x=l(a(78711)),L=a(30122),A=l(a(11780)),F=l(a(62568)),U=l(a(83154)),V=l(a(47469)),B=a(93215),j=l(a(53233)),H=l(a(8235));class W extends i.Component{constructor(){super(...arguments),this._refProgressBar=(0,i.createRef)(),this._refProgressBarComponent=(0,i.createRef)(),this._refMeasuringProfile=(0,i.createRef)(),this._refWrapper=(0,i.createRef)(),this.componentWillUnmount=()=>{if(this._playbackController.removeListeners(),null!=this.props.sessionId){var e=Math.round(this._playbackController.duration||0);this._statusViewEvent.webcStatusPlaybackT=e;var t=this._playStartTime;null!=t&&(this._statusViewEvent.webcStatusViewT+=Math.round(window.performance.now()-t),this._playStartTime=void 0),this._statusViewEvent.commit()}},this._updateStatusViewers=()=>{O.default.find(this.props.msg.id).checkpoint(this.props.rejectOnUnmount()).then((e=>{this.setState({seenBy:e.read})})).catchType(g.Unmount,(()=>{})).catchType(m.EphemeralDrop,(()=>{}))},this._handleWindowResize=()=>{var e=this._refMeasuringProfile&&this._refMeasuringProfile.current,t=this._refProgressBar&&this._refProgressBar.current;if(e&&t){var a=e.getBoundingClientRect(),r=t.getBoundingClientRect();!y.default.isRTL()&&a.right>r.left-5||y.default.isRTL()&&a.left<r.right+5?this.setState({narrow:!0}):this.setState({narrow:!1})}},this._handleTab=e=>{var t;(e&&(e.stopPropagation(),e.preventDefault()),this.props.statusV3.contact.isMe)||((null===(t=this._refComposeBox)||void 0===t?void 0:t.isFocused())?this.dismissReply():this._startReply())},this.handleWindowGainedFocus=()=>{this._windowFocused=!0,this.play()},this.handleWindowLostFocus=()=>{this._windowFocused=!1,this.pause()},this._handleClickProfile=()=>{var e=this.props.statusV3.contact.id;d.default.find(e).then((e=>c.default.openChatBottom(e))).then((()=>{this.props.closeStatusViewer(!0)}))},this.play=()=>{var e,t=this.props.mediaData;if(t){if(t.mediaStage!==M.MEDIA_DATA_STAGE.RESOLVED)return;this._statusViewEvent.webcStatusLoadT||(this._statusViewEvent.markWebcStatusLoadT(),this._statusViewEvent.webcStatusLoaded=!0)}(null===(e=this._refComposeBox)||void 0===e?void 0:e.isPaused())||this._windowFocused&&(this._playStartTime=window.performance.now(),this._playbackController.resume())},this.pause=()=>{var e=this.props.mediaData;if(!e||e.mediaStage===M.MEDIA_DATA_STAGE.RESOLVED){var t=this._playStartTime;null!=t&&(this._statusViewEvent.webcStatusViewT+=Math.round(window.performance.now()-t),this._playStartTime=void 0),this._playbackController.pause()}},this.handleMouseDown=()=>{this.pause()},this.handleMouseUp=()=>{this.play()},this.dismissReply=()=>{var e=this._refWrapper&&this._refWrapper.current;e&&_.default.focus(e)},this._startReply=()=>{var e;null===(e=this._refComposeBox)||void 0===e||e.restoreFocus()},this.handleSend=()=>{this._statusViewEvent.webcStatusReplyCount++},this.state={chat:void 0,narrow:!1},this._windowFocused=!0,this._playbackController=(0,L.setupStatusV3Controller)(this.props.mediaData,this.props.msg),this._statusViewEvent=new N.default.WebcStatusView({webcStatusLoaded:!1,webcStatusReplyCount:0,webcStatusViewT:0})}componentDidMount(){var{statusV3:e,msg:t,mediaData:a,msgIdx:r,sessionId:l}=this.props;if(null!=l){var o;e.contact.isMe?(o=N.default.WEBC_STATUS_ROW_SECTION.MY,this._updateStatusViewers()):o=e.contact.statusMute?N.default.WEBC_STATUS_ROW_SECTION.MUTED:e.hasUnread?N.default.WEBC_STATUS_ROW_SECTION.RECENT:N.default.WEBC_STATUS_ROW_SECTION.VIEWED;var i,s=this.props.rowIdx||0,d=e.msgs.length-1-r<e.unreadCount;a?i=a.isGif?N.default.WEBC_STATUS_MEDIA_TYPE.GIF:"video"===a.type?N.default.WEBC_STATUS_MEDIA_TYPE.VIDEO:N.default.WEBC_STATUS_MEDIA_TYPE.IMAGE:(i=t.getLinks().length?N.default.WEBC_STATUS_MEDIA_TYPE.URL:N.default.WEBC_STATUS_MEDIA_TYPE.TEXT,this._statusViewEvent.markWebcStatusLoadT(),this._statusViewEvent.webcStatusLoaded=!0),this._statusViewEvent.webcStatusSessionId=l,this._statusViewEvent.webcStatusRowSection=o,this._statusViewEvent.webcStatusRowIndex=s,this._statusViewEvent.webcStatusMediaType=i,this._statusViewEvent.webcStatusUnread=d}this._refProgressBarComponent&&this._refProgressBarComponent.current&&this._playbackController.addListeners(((e,t)=>{var a=this._refProgressBarComponent&&this._refProgressBarComponent.current;a&&a.handleStart(e,t)}),(()=>{var e=this._refProgressBarComponent&&this._refProgressBarComponent.current;e&&e.handlePause()}),(()=>{var e=this._refProgressBarComponent&&this._refProgressBarComponent.current;e&&e.handleEnded().checkpoint(this.props.rejectOnUnmount()).then((()=>{this.props.onNext()})).catchType(g.Unmount,(()=>{}))})),a?(this.play(),a&&a.mediaStage===M.MEDIA_DATA_STAGE.RESOLVED&&this.props.markRead(this.props.statusV3,this.props.msg)):(this.props.msg.type,f.default.MSG_TYPE.CHAT,this.play(),this.props.markRead(this.props.statusV3,this.props.msg));var u=this._refWrapper&&this._refWrapper.current;u&&u.focus();var c=this.props.listeners;c.add(window,"focus",this.handleWindowGainedFocus),c.add(window,"blur",this.handleWindowLostFocus),c.add(window,"resize",(0,n.default)(this._handleWindowResize)),this._handleWindowResize()}render(){var e,t,{msg:a,mediaData:r,statusV3:l}=this.props;if(r){var n=X(r);n&&(e={backgroundImage:`url(${n})`})}else if(a.type===f.default.MSG_TYPE.CHAT){e={backgroundColor:a.statusV3TextBg}}if(r)switch(r.type){case I.default.TYPE.IMAGE:t=i.default.createElement(Y,{msg:a,statusV3:l,mediaData:r,markRead:this.props.markRead,play:this.play,pause:this.pause,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp});break;case I.default.TYPE.VIDEO:t=i.default.createElement(z,{msg:a,statusV3:l,mediaData:r,markRead:this.props.markRead,play:this.play,pause:this.pause,playbackController:this._playbackController,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp});break;default:__LOG__(3)`Invalid status v3 image type: ${r.type}`}else t=a.type===f.default.MSG_TYPE.CHAT?i.default.createElement($,{msg:a,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp}):i.default.createElement(q,{onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp});var s,d=i.default.createElement("div",{ref:this._refProgressBar},i.default.createElement(F.default,{ref:this._refProgressBarComponent,current:this.props.msgIdx,total:this.props.totalMsgs,onClick:this.props.onClickProgressBar}));a.type!==f.default.MSG_TYPE.CHAT&&(s=i.default.createElement("div",{className:A.default.captionBackdrop},i.default.createElement(p.default,{className:A.default.mediaCaption,text:a.caption,formatters:P.Configuration.StatusV3Caption()})));var c,m,g=(0,o.default)(A.default.profile,{[A.default.nonClickProfile]:a.isSentByMe,[A.default.profileNarrow]:this.state.narrow}),_=(0,o.default)(A.default.profile,A.default.measuringProfile,{}),v=i.default.createElement("div",{className:g,onClick:a.isSentByMe?null:this._handleClickProfile},i.default.createElement("div",{className:A.default.playerAvatar},i.default.createElement(h.default,{id:l.contact.id,theme:"status_v3",size:40})),i.default.createElement("div",{className:A.default.msgInfo},i.default.createElement(p.default,{className:A.default.msgInfoName,text:l.contact.formattedName}),i.default.createElement("div",{className:A.default.timestamp},u.default.relativeDateAndTimeStr(a.t)))),S=i.default.createElement("div",{ref:this._refMeasuringProfile,className:_},i.default.createElement("div",{className:A.default.playerAvatar},i.default.createElement(h.default,{id:l.contact.id,theme:"status_v3",size:40})),i.default.createElement("div",{className:A.default.msgInfo},i.default.createElement(p.default,{className:A.default.msgInfoName,text:l.contact.formattedName}),i.default.createElement("div",{className:A.default.timestamp},u.default.relativeDateAndTimeStr(a.t)))),y={tab:this._handleTab,"shift+tab":this._handleTab},T=e=>e.stopPropagation();r&&(c=i.default.createElement(Z,{mediaData:r}));var M=this.props.statusV3.contact;M.isMe||M.isPSA||(m=i.default.createElement(E.default,{handlers:{left:T,right:T}},i.default.createElement(x.default,{msg:this.props.msg,dismissReply:this.dismissReply,onSend:this.handleSend,pause:this.pause,play:this.play,ref:e=>{this._refComposeBox=e}})));var w,N=C.default.supportsFeature(C.default.F.SEE_STATUS_VIEWERS)&&M.isMe&&this.state.seenBy?i.default.createElement("div",{className:A.default.seen},i.default.createElement(U.default,{seenCount:this.state.seenBy.length})):null,O=(0,o.default)(A.default.playerBackground,{[A.default.media]:r}),k=(0,o.default)(A.default.progressBackdrop,{[A.default.progressBarBackdropNarrow]:this.state.narrow});return a.type!==f.default.MSG_TYPE.CHAT&&(w=i.default.createElement("div",{className:k})),i.default.createElement(V.default,{displayName:"StatusV3Player",escapable:!0,requestDismiss:e=>{e||this.props.closeStatusViewer()},requestFocus:this.dismissReply},i.default.createElement(E.default,{handlers:y},i.default.createElement("div",{className:A.default.playerWrapper,key:a.id.toString(),tabIndex:-1,ref:this._refWrapper},S,v,w,d,s,i.default.createElement("div",{className:O,style:e}),t,c,N,m)))}}W.displayName="_StatusV3Player";class G extends i.PureComponent{constructor(...e){super(...e),this._renderImage=e=>{var{msg:t,mediaData:a}=this.props,r=(0,o.default)(A.default.playerContent,A.default.v3Image);return i.default.createElement("div",{className:r,onMouseDown:this.props.onMouseDown,onMouseUp:this.props.onMouseUp,onDragEnd:this.props.onMouseUp},i.default.createElement(k.default,{type:"contain",size:{width:a.fullWidth,height:a.fullHeight}},i.default.createElement("div",{className:A.default.mediaViewer},i.default.createElement(S.default,{src:e,disableContextMenu:!0}),t&&t.interactiveAnnotations&&t.interactiveAnnotations.length>0&&i.default.createElement(s.default,{annotations:t.interactiveAnnotations,onTooltipDisplay:this.props.onMouseDown,onTooltipDismiss:this.props.onMouseUp}))))},this._renderPreviewImage=()=>{var e,{mediaData:t}=this.props,a=(0,o.default)(A.default.playerContent,A.default.v3Image,A.default.loading);return i.default.createElement("div",{className:a,onMouseDown:this.props.onMouseDown,onMouseUp:this.props.onMouseUp},i.default.createElement(k.default,{type:"contain",size:{width:t.aspectRatio,height:1}},i.default.createElement(S.default,{src:null!==(e=X(t))&&void 0!==e?e:""})))},this._downloadMedia=()=>this.props.msg.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:N.default.WEBC_RMR_REASON_CODE.STATUS_V3,isUserInitiated:!0})}componentDidMount(){this.props.mediaData.mediaStage!==M.MEDIA_DATA_STAGE.RESOLVED&&this.props.msg.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:N.default.WEBC_RMR_REASON_CODE.STATUS_V3,isUserInitiated:!0})}componentDidUpdate(){this.props.play();var e=this.props.mediaData;e&&e.mediaStage===M.MEDIA_DATA_STAGE.RESOLVED&&this.props.markRead(this.props.statusV3,this.props.msg)}componentWillUnmount(){this.props.pause()}render(){return i.default.createElement(w.default,{mediaData:this.props.mediaData,placeholderRenderer:this._renderPreviewImage,downloadMedia:this._downloadMedia,renderProgressively:!0},this._renderImage)}}G.CONCERNS={mediaData:["mediaStage","renderableUrl","preview","fullWidth","fullHeight","aspectRatio","fullPreviewData"]},G.displayName="_StatusV3Img";var Y=(0,R.default)(G,G.CONCERNS);class K extends i.PureComponent{constructor(...e){super(...e),this.refVideo=(0,i.createRef)(),this.setRefVideo=e=>{this.refVideo=e,this.props.playbackController.setVideo(this.refVideo.current)}}componentDidMount(){var e=this.props.mediaData;e.streamable||e.isStreamable()||this.props.msg.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:N.default.WEBC_RMR_REASON_CODE.STATUS_V3,isUserInitiated:!0})}componentDidUpdate(){this.props.play();var e=this.props.mediaData;e&&e.mediaStage===M.MEDIA_DATA_STAGE.RESOLVED&&this.props.markRead(this.props.statusV3,this.props.msg)}componentWillUnmount(){this.props.pause()}render(){var e,{msg:t,mediaData:a,onMouseDown:r,onMouseUp:l}=this.props,n=a.mediaStage!==M.MEDIA_DATA_STAGE.RESOLVED,d=(0,o.default)(A.default.playerContent,A.default.v3Video,{loading:n});return i.default.createElement("div",{className:d,onMouseDown:r,onMouseUp:l},i.default.createElement(k.default,{type:"contain",size:{width:a.fullWidth,height:a.fullHeight}},i.default.createElement("div",{className:A.default.mediaViewer},i.default.createElement(H.default,{msg:t,mediaData:a,autoPlay:!0,refVideo:this.setRefVideo,poster:null!==(e=X(a))&&void 0!==e?e:"",disableContextMenu:!0},y.default.t(1559)),t&&t.interactiveAnnotations&&t.interactiveAnnotations.length>0&&i.default.createElement(s.default,{annotations:t.interactiveAnnotations,onTooltipDisplay:this.props.onMouseDown,onTooltipDismiss:this.props.onMouseUp}))))}}K.CONCERNS={mediaData:["preview","mediaStage","fullWidth","fullHeight","streamable","fullPreviewData"]},K.displayName="_StatusV3Video";var z=(0,R.default)(K,K.CONCERNS);class $ extends i.PureComponent{componentDidMount(){v.default.load(this.props.msg.font).catch((()=>{}))}render(){var e,t,a=(0,B.numCodepoints)(this.props.msg.body),r={[A.default[`font_${this.props.msg.font}`]]:!0};return a<=60?(e=(0,o.default)(A.default.text,A.default.textLarge,r),t=P.Configuration.StatusV3Text({links:this.props.msg.getLinks()})):a<=240?(e=(0,o.default)(A.default.text,A.default.textMedium,r),t=P.Configuration.StatusV3Text({links:this.props.msg.getLinks()})):e=(0,o.default)(A.default.text,A.default.textSmall,r),i.default.createElement("div",{className:(0,o.default)(A.default.playerContent,{[A.default.statusPanelPlayerContent]:"status-panel"===this.props.theme,[A.default.statusThumbnailPlayerContent]:"status-thumbnail"===this.props.theme,[A.default.textThumbnailPlayerContent]:"text-thumb"===this.props.theme}),onMouseDown:this.props.onMouseDown,onMouseUp:this.props.onMouseUp},i.default.createElement("div",{className:e},i.default.createElement(p.default,{text:this.props.msg.body,formatters:t})))}}function q(e){return i.default.createElement("div",{className:A.default.playerContent,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp},i.default.createElement("div",{className:A.default.unknown},y.default.t(1447)))}function X(e){return e?e.fullPreviewData?e.fullPreviewData.url():e.preview?e.preview.url():null:null}t.StatusV3Text=$,$.displayName="StatusV3Text";var Z=function(e){return(0,j.default)(e.mediaData,["mediaStage"]).mediaStage!==M.MEDIA_DATA_STAGE.RESOLVED?i.default.createElement("div",{className:A.default.mediaStateControls},i.default.createElement("button",{className:"icon-media-disabled"},i.default.createElement(b.default,{size:50,stroke:4,color:"white"}))):null},J=(0,D.default)((0,T.default)(W));t.default=J},77389:(e,t,a)=>{"use strict";var r=a(20862),l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a(94184)),o=a(73591),i=r(a(67294)),s=l(a(97420)),d=l(a(46274)),u=a(66274),c=r(a(92246)),f=l(a(63030)),h=l(a(79766)),p=l(a(66761)),m=a(46072),g=l(a(5148)),_=l(a(52206)),v=l(a(17363)),C=l(a(79522)),E=r(a(32532)),S=l(a(44704)),P=l(a(62745)),y=r(a(9931)),T=l(a(77923));class I extends i.Component{constructor(){super(...arguments),this.handleClickProgressBar=e=>{var t=this.state.iterator;if((!t||e!==t.msgIdx)&&t){var a=this._statusV3Snapshot.statusAt(t,e);a.isFulfilled()||this.setState({loading:!0}),a.checkpoint(this.props.rejectOnUnmount()).then((e=>{this.setState({iterator:e})})).catchType(c.Unmount,(()=>{})).catchType(u.EphemeralDrop,(()=>{})).catchType(E.InvalidStatusV3Iterator,(()=>{__LOG__(3)`Invalid iterator while getting next status msg`})).catchType(E.StatusV3LoadingError,(()=>{__LOG__(3)`No more status v3 while preloading next status`})).finally((()=>{this.setState({loading:!1})}))}},this._preloadNextStatus=()=>{var e=this.state.iterator;e&&this._statusV3Snapshot.hasNext(e)&&this._statusV3Snapshot.getNext(e).checkpoint(this.props.rejectOnUnmount()).then((e=>{var t=this._statusV3Snapshot.statuses[e.statusIdx].msgs[e.msgIdx];if(!t)throw new E.StatusV3MsgNotFound;if(t.type===d.default.MSG_TYPE.CHAT)f.default.load(t.font).catch((()=>{}));else{var a=t.mediaData;a&&a.mediaStage!==m.MEDIA_DATA_STAGE.RESOLVED&&t.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:g.default.WEBC_RMR_REASON_CODE.STATUS_V3,isUserInitiated:!1})}})).catchType(c.Unmount,(()=>{})).catchType(u.EphemeralDrop,(()=>{})).catchType(E.InvalidStatusV3Iterator,(()=>{__LOG__(3)`Invalid iterator while preloading next status`})).catchType(E.StatusV3MsgNotFound,(()=>{__LOG__(3)`Error finding next status while preloading next status`})).catchType(E.StatusV3LoadingError,(()=>{__LOG__(3)`No more status v3 while preloading next status`}))},this.handlePrev=()=>{var e=this.state.iterator;if(e&&this._statusV3Snapshot.hasPrev(e)){var t=e.statusIdx;this._statusV3Snapshot.getPrev(e).checkpoint(this.props.rejectOnUnmount()).then((e=>{e.statusIdx===t?this.setState({iterator:e}):(this.setState({transitioning:!0}),(0,o.delayMs)(200).checkpoint(this.props.rejectOnUnmount()).then((()=>{this.setState({iterator:e,transitioning:!1})})).catchType(c.Unmount,(()=>{})))})).catchType(c.Unmount,(()=>{})).catchType(u.EphemeralDrop,(()=>{})).catchType(E.InvalidStatusV3Iterator,(()=>{__LOG__(3)`Invalid iterator while getting previous status msg`})).catchType(E.StatusV3LoadingError,(()=>{__LOG__(3)`No more status v3 while preloading next status`}))}},this.handleNext=()=>{var e=this.state.iterator;if(e&&this._statusV3Snapshot.hasNext(e)){var t=e.statusIdx,a=this._statusV3Snapshot.getNext(e);a.isFulfilled()||this.setState({loading:!0}),a.checkpoint(this.props.rejectOnUnmount()).then((e=>{e.statusIdx===t?this.setState({iterator:e}):(this.setState({transitioning:!0,loading:!1}),(0,o.delayMs)(200).checkpoint(this.props.rejectOnUnmount()).then((()=>{this.setState({iterator:e,transitioning:!1})})).catchType(c.Unmount,(()=>{})))})).catchType(c.Unmount,(()=>{})).catchType(u.EphemeralDrop,(()=>{})).catchType(E.InvalidStatusV3Iterator,(()=>{__LOG__(3)`Invalid iterator while getting next status msg`,this.closeStatusViewer()})).catchType(E.StatusV3LoadingError,(()=>{__LOG__(3)`No more status v3 while preloading next status`})).finally((()=>{this.setState({loading:!1})}))}else this.closeStatusViewer()},this.markRead=(e,t)=>{if(t){var a=e.unreadCount,r=e.totalCount;e.msgs.getModelsArray().findIndex((e=>e===t))>=r-a&&e.sendReadStatus(t.id,t.author);var l=this._statusV3Snapshot.statuses.find((t=>t.statusV3===e));l&&l.readMsgKeys.push(t.id.toString())}},this.closeStatusViewer=e=>{this.setState({transitioning:!0}),(0,o.delayMs)(200).checkpoint(this.props.rejectOnUnmount()).then((()=>{this.props.closeStatusViewer(e)})).catchType(c.Unmount,(()=>{}))};var e=this.props.initialStatusV3;if(this.props.quotedMsgKey){this.state={};var t=this.props.quotedMsgKey;if(-1!==e.msgs.getModelsArray().findIndex((e=>e.id.toString()===t.toString())))this._statusV3Snapshot=new E.default(e,t),this._statusV3Snapshot.getFirstUnread(e,!0,t).checkpoint(this.props.rejectOnUnmount()).then((e=>{this.setState({iterator:e,loading:!1})})).catchType(c.Unmount,(()=>{})).catchType(u.EphemeralDrop,(()=>{})).catchType(E.InvalidStatusV3Iterator,(()=>{__LOG__(3)`Invalid iterator while loading first unread msg`,s.default.openToast(i.default.createElement(y.default,{msg:p.default.t(1440),id:(0,y.genId)()})),this.props.closeStatusViewer()}));else this.state={loading:!0},e.loadMore(e.totalCount).then((()=>{(this.setState({loading:!1}),-1!==e.msgs.getModelsArray().findIndex((e=>e.id.toString()===t.toString())))?(this._statusV3Snapshot=new E.default(e,t),this._statusV3Snapshot.getFirstUnread(e,!0,t).checkpoint(this.props.rejectOnUnmount()).then((e=>{this.setState({iterator:e,loading:!1})})).catchType(c.Unmount,(()=>{})).catchType(u.EphemeralDrop,(()=>{})).catchType(E.InvalidStatusV3Iterator,(()=>{__LOG__(3)`Invalid iterator while loading first unread msg`,s.default.openToast(i.default.createElement(y.default,{msg:p.default.t(1440),id:(0,y.genId)()})),this.props.closeStatusViewer()}))):(this.props.onMsgNotFound&&this.props.onMsgNotFound(),s.default.openToast(i.default.createElement(y.default,{msg:p.default.t(1440),id:(0,y.genId)()})),this.props.closeStatusViewer())})).catch((()=>{s.default.openToast(i.default.createElement(y.default,{msg:p.default.t(1440),id:(0,y.genId)()})),this.props.closeStatusViewer()})).finally((()=>{this.setState({loading:!1})}))}else{var a=this.props.initialStatusMsg;this._statusV3Snapshot=new E.default(e);var r=this._statusV3Snapshot.getFirstUnread(e,!0,a&&a.id);r.isFulfilled()?this.state={}:this.state={loading:!0},r.checkpoint(this.props.rejectOnUnmount()).then((e=>{this.setState({iterator:e,loading:!1})})).catchType(c.Unmount,(()=>{})).catchType(u.EphemeralDrop,(()=>{})).catchType(E.InvalidStatusV3Iterator,(()=>{__LOG__(3)`Invalid iterator while loading first unread msg`,s.default.openToast(i.default.createElement(y.default,{msg:p.default.t(1440),id:(0,y.genId)()})),this.props.closeStatusViewer()}))}}componentDidMount(){this._preloadNextStatus()}componentDidUpdate(){this._preloadNextStatus()}render(){var e,t,a,r,l,o,s,d,u=this.state.iterator;u&&(o=(l=this._statusV3Snapshot).statuses[u.statusIdx],s=o.statusV3,d=o.msgs[u.msgIdx],l.hasPrev(u)&&(a=i.default.createElement("div",{className:S.default.chevronLeft},i.default.createElement(P.default,{name:"chevron-left"})),r=i.default.createElement("div",{className:S.default.chevronLeftBg,onClick:this.handlePrev})),l.hasNext(u)&&(e=i.default.createElement("div",{className:S.default.chevronRight},i.default.createElement(P.default,{name:"chevron-right"})),t=i.default.createElement("div",{className:S.default.chevronRightBg,onClick:()=>{this.handleNext(),this.markRead(s,d)}})));var c,f={left:this.handlePrev,right:this.handleNext};!this.state.transitioning&&!this.state.loading&&d&&u&&o&&s&&(c=i.default.createElement("div",{className:S.default.playerContainer,key:d.id},i.default.createElement(C.default,{key:d.id,statusV3:s,msg:d,mediaData:d.mediaData,msgIdx:u.msgIdx,totalMsgs:o.totalCount,markRead:this.markRead,closeStatusViewer:this.closeStatusViewer,onClickProgressBar:this.handleClickProgressBar,onNext:this.handleNext,onPrev:this.handlePrev,sessionId:this.props.sessionId,rowIdx:this.props.rowIdx})));var p,m=(0,n.default)(S.default.v3X,{}),g=i.default.createElement("button",{className:m,onClick:()=>this.props.closeStatusViewer(!0)},i.default.createElement(P.default,{name:"x-viewer"})),_=(0,n.default)(S.default.backIcon,{}),E=i.default.createElement("button",{className:_,onClick:()=>this.props.closeStatusViewer()},i.default.createElement(P.default,{name:"back",directional:!0}));return this.state.loading&&(p=i.default.createElement("div",{className:S.default.mediaStateControls},i.default.createElement("button",null,i.default.createElement(v.default,{size:50,stroke:4,color:"white"})))),i.default.createElement(h.default,{handlers:f},i.default.createElement("div",{className:S.default.viewer,"data-animate-status-v3-viewer":!0},g,E,r,a,t,e,p,i.default.createElement(T.default,{transitionName:"status-v3-player",transitionAppear:!0},c)))}}I.displayName="StatusV3Viewer";var M=(0,_.default)(I);t.default=M},93154:(e,t,a)=>{"use strict";var r=a(95318),l=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a(67294)),o=r(a(46274)),i=r(a(3395)),s=r(a(34727)),d=l(a(85002)),u=r(a(98712)),c=r(a(79766)),f=r(a(98880)),h=l(a(18467)),p=r(a(13900)),m=r(a(92120)),g=r(a(62745)),_=r(a(51231)),v=r(a(18914)),C=r(a(47469)),E=l(a(75715)),S=(e,t)=>{var{defaultText:a,title:r,onSend:l,onBack:S}=e,[P,y]=(0,n.useState)(a),T=(0,E.findFirstWebLink)(P),{linkPreview:I,clearLinkPreview:M}=(0,E.default)(T),w=r?n.default.createElement(u.default,{text:r,direction:"auto",titlify:!0,ellipsify:!0}):null,{title:N,canonicalUrl:O,description:k,thumbnail:D}=I||{},b=I?n.default.createElement(C.default,{displayName:"ComposeBoxLinkPreview",escapable:!0,requestDismiss:M},n.default.createElement(p.default,{onOmit:M},n.default.createElement(f.default,{title:N,compose:!0,canonicalUrl:O,description:k,thumbnailJpeg:D}))):null;return n.default.createElement(h.default,{type:h.BoxModalType,ref:t},n.default.createElement(i.default,null,n.default.createElement(d.default,{type:d.DRAWER_HEADER_TYPE.POPUP,onBack:S},w),n.default.createElement(s.default,null,n.default.createElement(c.default,{className:v.default.container},n.default.createElement("div",{className:v.default.inputContainer},n.default.createElement(_.default,{a8n:"text-message-modal-text-unput",value:P,maxLength:o.default.MAX_TXT_MSG_SIZE,onChange:e=>{y(e)},supportsEmoji:!0,multiline:!0,spellCheck:!0,showRemaining:!0,focusOnMount:!0,theme:"small"})),b)),n.default.createElement("div",{className:v.default.btnContainer},n.default.createElement("div",{className:v.default.btnPosition},n.default.createElement(m.default,{large:!0,onClick:()=>{P.length&&l(P,I)}},n.default.createElement(g.default,{name:"send",directional:!0}))))))},P=(0,n.forwardRef)(S);t.default=P},54337:(e,t,a)=>{"use strict";var r=a(95318),l=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a(67294)),o=r(a(84816)),i=r(a(31763)),s=r(a(68770)),d=r(a(59474)),u=a(53615),c=r(a(66761)),f=r(a(77246)),h=a(94804),p=a(3875),m=a(66248),g=r(a(62745)),_=a(16241);class v extends n.PureComponent{_getCartIcon(){var{onCartClick:e,cartCount:t,catalogId:a}=this.props;if(e&&a){var r=(0,_.isNumber)(t)&&t>0?t.toString():void 0,l=(0,h.getOnCartClickWithLog)(e,a,(0,m.getProductCatalogContext)(this.context));return n.default.createElement(p.MenuBarItem,{a8nText:"menu-bar-cart-link",icon:n.default.createElement(o.default,{theme:"inherit-color"}),text:r,title:c.default.t(424),onClick:l})}return null}_getMenuItems(){var{canManageCatalog:e,onSendCatalog:t,onOpenCollections:a,onOpenSettings:r}=this.props;return e?n.default.createElement(p.MenuBarItem,{a8nText:"menu-bar-menu",icon:n.default.createElement(g.default,{name:"menu"}),title:c.default.t(1046)},n.default.createElement(s.default,{type:"dropdown_menu",flipOnRTL:!0,key:"CatalogDetailHeader",dirX:"LEFT"},n.default.createElement(d.default,{a8n:"mi-foward menu-item",action:t},c.default.t(761)),a&&n.default.createElement(d.default,{a8n:"mi-collections menu-item",action:a},c.default.t(548)),(0,u.canToggleCartOnOff)()&&r&&n.default.createElement(d.default,{a8n:"mi-settings menu-item",action:r},c.default.t(488)))):n.default.createElement(p.MenuBarItem,{a8nText:"menu-bar-catalog-link",icon:n.default.createElement(f.default,null),title:c.default.t(482),onClick:t})}render(){return n.default.createElement(n.default.Fragment,null,this._getCartIcon(),this._getMenuItems())}}t.default=v,v.contextType=i.default,v.displayName="DetailDrawerMenu"},19049:(e,t,a)=>{"use strict";var r=a(20862),l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a(94184)),o=r(a(67294)),i=l(a(27306)),s=l(a(71801)),d=l(a(31763)),u=l(a(25404)),c=a(67052),f=a(53615),h=l(a(66761)),p=a(58635),m=a(39950),g=a(66248),_=l(a(116)),v=l(a(38924)),C=a(79665),E=l(a(62745)),S=l(a(87120));class P extends o.Component{constructor(...e){super(...e),this.handleProductDetail=e=>{var{onProductDetail:t,shouldLog:a}=this.props;a&&(0,p.logProfileProductClick)({product:(0,C.unproxy)(e),catalogContext:(0,g.getProductCatalogContext)(this.context)}),t(e)}}componentDidMount(){var{shouldLog:e,catalog:t}=this.props;e&&null!=t&&(0,p.logBusinessProfileCatalogView)({catalogOwnerWid:t.id,catalogContext:(0,g.getProductCatalogContext)(this.context)})}_renderGallery(){var e,{catalog:t,filterProductId:a,productsToShow:r,hideIncompleteRows:l,onProductCatalog:i,showProductPlaceholders:d,seeMoreOverlay:u}=this.props,c=[],p=r,C=void 0;if((0,f.canSeeBizProfileV3)()&&(C="largeGallerySpacing"),null!=t?(e=t.productCollection,c=t.productCollection.getProductModels(),l&&c.length>3&&(p=Math.min(r,c.length-c.length%3)),c=(c=c.slice(0,p+1)).filter((e=>e.id.toString()!==a)).map(((e,a)=>{var r,l,n=null===(r=e.getPreviewImage())||void 0===r?void 0:r.mediaData;return n?(u&&a===p-1&&t.productCollection.length>p-1&&(l=h.default.t(1391)),o.default.createElement(v.default,{key:e.id.toString(),onClick:()=>this.handleProductDetail(e),mediaData:n,overlayContent:l,theme:C})):o.default.createElement(o.default.Fragment,null)})).slice(0,p)):(e=new _.default).add({id:"_ph"}),!c.length&&!d)return null;for(var E,P=s.default.addIcon;d&&c.length<p;)c.push(o.default.createElement(S.default,{key:`_ph${c.length}`,onClick:i.bind(this,(0,g.getProductCatalogContext)(this.context)),className:(0,n.default)(P,{[s.default.largeGallerySpacing]:"largeGallerySpacing"===C}),title:h.default.t(2)},o.default.createElement(o.default.Fragment,null))),P=s.default.placeholderThumb;return(0,f.canSeeBizProfileV3)()&&(E="space-between"),o.default.createElement(m.Gallery,{productMedias:c,mediaCollection:e,justify:E})}_renderCatalogEntryButton(){var{onProductCatalog:e,catalogEntryLabel:t}=this.props;return null==t?null:o.default.createElement("div",{className:s.default.catalogEntryButton},o.default.createElement(i.default,{a8nText:"catalog-entry-button",type:"secondary",onClick:e.bind(this,(0,g.getProductCatalogContext)(this.context))},t))}_renderShopsLogo(){return this.props.showShopsLogo?o.default.createElement("div",{className:s.default.shopsLogo},o.default.createElement(E.default,{name:"fbshops",display:"inline"})):null}render(){var{onProductCatalog:e,title:t,subtitle:a,animation:r,sectionTheme:l}=this.props,n=this._renderCatalogEntryButton(),i=this._renderGallery(),d=a?o.default.createElement(c.FlexItem,{className:s.default.subtitle},a):null,f=o.default.createElement(c.FlexRow,{align:"center"},d,o.default.createElement(c.FlexItem,null,o.default.createElement(E.default,{className:s.default.chevron,name:"chevron-right-alt",directional:!0})));return o.default.createElement(u.default,{title:t||h.default.t(1300),titleOnClick:e.bind(this,(0,g.getProductCatalogContext)(this.context)),subtitle:f,theme:l,animation:r},i,n,this._renderShopsLogo())}}t.default=P,P.contextType=d.default,P.defaultProps={productsToShow:6,sectionTheme:"padding",hideIncompleteRows:!1},P.displayName="CatalogDrawerSection"},9506:(e,t,a)=>{"use strict";var r=a(95318),l=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a(67294)),o=r(a(56107)),i=r(a(79274)),s=r(a(97420)),d=r(a(42699)),u=l(a(27890)),c=r(a(3395)),f=r(a(34727)),h=r(a(31763)),p=l(a(85002)),m=r(a(66761)),g=r(a(84366)),_=a(58635),v=r(a(23045)),C=a(66248),E=r(a(51051)),S=r(a(36350)),P=a(42473),y="catalog-link-anchor";class T extends n.Component{constructor(...e){super(...e),this._handleCatalogLinkClick=e=>{e.preventDefault(),this._handleSendCatalogLinkClick()},this._handleSendCatalogLinkClick=()=>{var{catalog:e,onSend:t}=this.props;s.default.openModal(n.default.createElement(E.default,{catalog:e,onSend:t}),{transition:"modal-flow"}),(0,_.logShareCatalogViaWALinkClick)({catalogOwnerWid:e.id,catalogContext:(0,C.getProductCatalogContext)(this.context)})},this._handleCopyLinkClick=()=>{var{catalog:e}=this.props;(0,_.logShareCatalogCopyLinkClick)({catalogOwnerWid:e.id,catalogContext:(0,C.getProductCatalogContext)(this.context)})}}render(){var e,t,{onBack:a,onCancel:r,catalog:l,contact:s,prompt:h,centerDrawer:_}=this.props,C=n.default.createElement(u.default,{id:s.id,size:82,quality:u.DETAIL_IMAGE_QUALITY.HIGH});return _&&(e="labels",t="center-column"),n.default.createElement(c.default,{key:"catalog-link-drawer",theme:e},n.default.createElement(p.default,{a8n:"catalog-link-title",title:m.default.t(482),onBack:a,onCancel:r,type:p.DRAWER_HEADER_TYPE.SMALL}),n.default.createElement(f.default,{theme:t},n.default.createElement("div",{className:o.default.prompt},h),n.default.createElement(i.default,{image:C,primary:n.default.createElement(v.default,{contact:s,useVerifiedName:!0}),theme:"identity",secondary:n.default.createElement(g.default,{id:y,href:(0,P.createCatalogLink)(l.id.user),onClick:this._handleCatalogLinkClick,noHandle:!0})}),n.default.createElement(S.default,{onClick:this._handleSendCatalogLinkClick}),n.default.createElement(d.default,{elementId:y,onClick:this._handleCopyLinkClick})))}}t.default=T,T.contextType=h.default,T.displayName="CatalogLinkDrawer"},87655:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return i.apply(this,arguments)};var l=r(a(48926)),n=r(a(99420)),o=a(53615);function i(){return(i=(0,l.default)((function*(e){var t;if(!(0,o.cartPropEnabled)())return!1;var a=n.default.get(e);if(!a||a.stale){var r=yield n.default.update(e);a=Array.isArray(r)?r[0]:r}return(null===(t=a.profileOptions)||void 0===t?void 0:t.cartEnabled)||!1}))).apply(this,arguments)}},57066:(e,t,a)=>{"use strict";var r=a(95318),l=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a(67294)),o=r(a(84816)),i=r(a(31763)),s=r(a(68770)),d=r(a(59474)),u=r(a(66761)),c=r(a(77246)),f=a(94804),h=a(3875),p=a(66248),m=r(a(62745)),g=a(16241);class _ extends n.PureComponent{_getCartIcon(){var{onCartClick:e,cartCount:t,catalogId:a}=this.props;if(e&&a){var r=(0,g.isNumber)(t)&&t>0?t.toString():void 0,l=(0,f.getOnCartClickWithLog)(e,a,(0,p.getProductCatalogContext)(this.context));return n.default.createElement(h.MenuBarItem,{a8nText:"menu-bar-cart-link",icon:n.default.createElement(o.default,null),text:r,title:u.default.t(424),onClick:l})}return null}render(){var{onSendProduct:e,onReportProduct:t,onProductLinkClick:a}=this.props;return n.default.createElement(n.default.Fragment,null,this._getCartIcon(),n.default.createElement(h.MenuBarItem,{a8nText:"menu-bar-product-link",icon:n.default.createElement(c.default,null),title:u.default.t(1277),onClick:a}),n.default.createElement(h.MenuBarItem,{a8nText:"menu-bar-menu",icon:n.default.createElement(m.default,{name:"menu"}),title:u.default.t(1046)},n.default.createElement(s.default,{type:"dropdown_menu",flipOnRTL:!0,key:"ProductDetailHeader",dirX:"LEFT"},n.default.createElement(d.default,{a8n:"mi-send menu-item",action:e},u.default.t(1419)),n.default.createElement(d.default,{a8n:"mi-report menu-item",action:t},u.default.t(1328)))))}}t.default=_,_.contextType=i.default,_.displayName="DetailDrawerMenu"},84710:(e,t,a)=>{"use strict";var r=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.parseErrorState=function(e,t){if(e instanceof n.Unmount);else if(e instanceof l.ServerStatusCodeError)"not_found"===e.status||404===e.status?t("NOT_FOUND"):(t("ERROR"),__LOG__(3)`parseErrorState:Failed to fetch from server`);else{if(!(e instanceof l.WebdDrop))throw t("ERROR"),e;t("ERROR"),__LOG__(3)`parseErrorState:Failed to fetch due to WebdDrop`}};var l=a(66274),n=r(a(92246))},95598:(e,t,a)=>{"use strict";var r=a(20862),l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({fetchState:e}){switch(e){case"NONE":case"SUCCESS":return null;case"PENDING":return o.default.createElement("div",{className:(0,n.default)(s.default.loadingContainer)},o.default.createElement(d.default,{size:14,color:d.colorOptions.highlight}),o.default.createElement(u.TextSpan,{className:(0,n.default)(s.default.text,s.default.loadingText),theme:"small"},i.default.t(1299)));case"NOT_FOUND":case"ERROR":return o.default.createElement("div",{className:(0,n.default)(s.default.loadingContainer)},o.default.createElement(u.TextSpan,{className:s.default.text,theme:"small",color:"danger"},"NOT_FOUND"===e?i.default.t(1285):i.default.t(1271)));default:throw new Error(`invalid fetchState ${e}`)}};var n=l(a(94184)),o=l(a(67294)),i=l(a(66761)),s=l(a(44134)),d=r(a(17363)),u=a(45739)},77246:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return n.default.createElement(i.default,{name:"link",className:(0,l.default)(o.default.linkIcon,{[o.default.inheritColor]:"inherit-color"===e.theme})})};var l=r(a(94184)),n=r(a(67294)),o=r(a(93277)),i=r(a(62745))},84366:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({id:e,href:t,onClick:a,noHandle:r}){return l.default.createElement("span",{className:n.default.linkContainer},l.default.createElement(o.SelectableLink,{id:e,href:t,className:n.default.activeLink,selectable:!0,onClick:a,"data-nohandle":r},t))};var l=r(a(67294)),n=r(a(36074)),o=a(80493)},71509:(e,t,a)=>{"use strict";var r=a(20862),l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleProductDelete=function(e,t,a){return(0,c.logDeleteProductClick)(t,1,a),new Promise(((r,l)=>{i.default.openModal(o.default.createElement(s.default,{title:u.default.t(459),okText:u.default.t(1865),cancelText:u.default.t(1694),onOK:()=>{i.default.closeModal(),function(e,t,a){return(0,h.deleteProducts)([t.id.toString()]).then((()=>((0,c.logDeleteProductSuccess)(t,1,a),e.productCollection.evictImagesFromCache(t.id.toString()),e.productCollection.remove(t.id.toString()),e.collections.forEach((e=>e.productCollection.remove(t.id.toString()))),!0))).catchType(d.ServerStatusCodeError,(e=>((0,c.logDeleteProductFailed)(t,1,a,e.statusCode),i.default.openToast(o.default.createElement(_.default,{msg:u.default.t(460),id:(0,_.genId)("catalog_delete_product_failed")})),!1)))}(e,t,a).then((e=>r(e))).catch((e=>l(e)))},onCancel:()=>{i.default.closeModal(),r(!1)}},o.default.createElement("div",null,u.default.t(458))))}))},t.handleProductVisibilityChange=function(e,t,a){var r=t.id.toString(),l=!t.isHidden;l?(0,c.logCatalogProductHideClick)(r,a):(0,c.logCatalogProductShowClick)(r,a);return new Promise(((n,d)=>{var f=t.isHidden?u.default.t(479):u.default.t(470);i.default.openModal(o.default.createElement(s.default,{okText:u.default.t(1865),cancelText:u.default.t(1694),onOK:()=>{i.default.closeModal(),function(){return v.apply(this,arguments)}(e,t).then((()=>{l?(0,c.logCatalogProductHideSuccess)(r,a):(0,c.logCatalogProductShowSuccess)(r,a),n(!0)})).catch((e=>{l?(0,c.logCatalogProductHideFailed)(r,a):(0,c.logCatalogProductShowFailed)(r,a),d(e)}))},onCancel:()=>{i.default.closeModal(),l?(0,c.logCatalogProductHideCancelled)(r,a):(0,c.logCatalogProductShowCancelled)(r,a),n(!1)}},o.default.createElement("div",null,f)))}))},t.handleCollectionDelete=function(e,t,a){return new Promise(((r,l)=>{i.default.openModal(o.default.createElement(s.default,{title:u.default.t(447),okText:u.default.t(1865),cancelText:u.default.t(1694),onOK:()=>{i.default.closeModal(),function(e,t,a){return(0,g.deleteCollection)(t.id.toString(),a.session.sessionId.toString()).then((()=>(e.collections.remove(t.id.toString()),(0,f.logCollectionDeleted)({catalogContext:a,collectionId:t.id}),!0))).catchType(d.ServerStatusCodeError,(()=>(i.default.openToast(o.default.createElement(_.default,{msg:u.default.t(444),id:(0,_.genId)("catalog_delete_product_failed")})),!1)))}(e,t,a).then((e=>r(e))).catch((e=>l(e)))},onCancel:()=>{i.default.closeModal(),r(!1)}},o.default.createElement("div",null,u.default.t(445))))}))},t.handleCollectionSave=function(e,t,a,r,l,n){return(t?(0,g.editCollection)(t.id.toString()||"",a===t.name?void 0:a,!1,r.map((e=>e.id.toString())),l.map((e=>e.id.toString())),"").then((l=>(t.name=a,t.reviewStatus=l.reviewStatus,t.productCollection.reset(),t.productCollection.add(r),e.collections.replaceId(t.id,l.id),!0))):(0,g.createCollection)(a,r.map((e=>e.id.toString())),"").then((t=>{(0,f.logCollectionCreated)({catalogContext:n,collectionId:t.id,productCount:r.length});var l=new m.default;return l.id=t.id,l.reviewStatus=t.reviewStatus,l.isHidden=!1,l.name=a,l.totalItemsCount=r.length,l.productCollection.add(r,{merge:!0}),e.collections.add(l),!0}))).catch((e=>{var t=u.default.t(457);return"not-acceptable"===e.text&&"products"===e.fieldName&&"duplicate"===e.fieldReason&&(t=u.default.t(456)),i.default.openToast(o.default.createElement(_.default,{msg:t,id:(0,_.genId)("catalog_save_collection_failed")})),!1}))};var n=l(a(48926)),o=l(a(67294)),i=l(a(97420)),s=l(a(58743)),d=a(66274),u=l(a(66761)),c=a(58635),f=a(29004),h=a(86989),p=a(4014),m=l(a(30859)),g=a(60301),_=r(a(9931));function v(){return(v=(0,n.default)((function*(e,t){yield(0,p.productVisibilitySet)([{productId:t.id.toString(),isHidden:!t.isHidden}]),t.isHidden=!t.isHidden,[e.productCollection,...(e.collections||[]).map((e=>e.productCollection))].forEach((e=>{var a=e.get(t.id);a&&(a.isHidden=t.isHidden)}))}))).apply(this,arguments)}},12772:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{onClick:t}=e,a=(0,l.default)(o.default.addItemButton,{[o.default.themeDefault]:"default"===e.theme,[o.default.themeInList]:"in-list"===e.theme,[o.default.themeCollections]:"collections"===e.theme});return n.default.createElement(i.default,{theme:"add-item",image:n.default.createElement("div",{className:o.default.addIcon}),customImage:!0,primary:e.title||s.default.t(440),className:a,onClick:t,idle:e.idle,a8n:"add-item"})};var l=r(a(94184)),n=r(a(67294)),o=r(a(79184)),i=r(a(79274)),s=r(a(66761))},97737:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{collection:t}=e;switch(t.reviewStatus){case s.PRODUCT_REVIEW_STATUS.PENDING:return l.default.createElement("div",{className:o.default.pendingBanner},i.default.t(547),l.default.createElement("div",{className:o.default.iconContainerPending},l.default.createElement(d.default,{name:"info"})));case s.PRODUCT_REVIEW_STATUS.REJECTED:return l.default.createElement("div",{className:o.default.rejectedBanner},i.default.t(549),l.default.createElement(n.default,{onClick:()=>{e.onEditCollection&&e.onEditCollection(e.collection)}},i.default.t(550)),l.default.createElement("div",{className:o.default.iconContainerRejected},l.default.createElement(d.default,{name:"info"})));default:return null}};var l=r(a(67294)),n=r(a(53318)),o=r(a(65491)),i=r(a(66761)),s=a(116),d=r(a(62745))},47361:(e,t,a)=>{"use strict";var r=a(95318),l=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a(67294)),o=a(71509),i=r(a(97420)),s=r(a(46274)),d=r(a(31763)),u=r(a(47060)),c=r(a(3152)),f=a(58635),h=a(66248),p=r(a(89709)),m=r(a(82286)),g=a(79665);class _ extends n.Component{constructor(...e){super(...e),this.state={openedProductId:void 0},this.handleProductDetail=(e,t)=>{var{onProductDetail:a}=this.props;return(0,f.logCatalogListDetailClick)({product:(0,g.unproxy)(e),catalogContext:t}),this.setState({openedProductId:e.id.toString()}),a(e)},this.handleProductShare=e=>{var{onProductShare:t}=this.props;t&&t(e)},this.handleProductDelete=(e,t)=>{var{catalog:a}=this.props;(0,o.handleProductDelete)(a,e,t).then((()=>{e.id===this.state.openedProductId&&(i.default.closeDrawerMid(),this.setState({openedProductId:void 0}))}))},this.handleProductHideShow=(e,t)=>{var{catalog:a}=this.props;(0,o.handleProductVisibilityChange)(a,e,t)},this.renderItem=e=>{var{product:t}=e,{onCartOpen:a,shareLinks:r}=this.props;return n.default.createElement(d.default.Consumer,null,(e=>{var l=(0,h.getProductCatalogContext)(e);return n.default.createElement(p.default,{product:t,onCartOpen:a,onClick:()=>this.handleProductDetail(t,l),onProductShare:r?this.handleProductShare:null,onProductDelete:e=>this.handleProductDelete(e,l),onProductHideShow:e=>this.handleProductHideShow(e,l),canManageCatalog:this.props.canManageCatalog})}))}}getData(){var{catalog:e,onCartOpen:t}=this.props,a=void 0!==t;return e.productCollection.getProductModels(this.props.canManageCatalog).map((e=>({itemKey:`${e.id.toString()}_${a.toString()}`,product:e})))}render(){var{catalog:e}=this.props;return e.productCollection&&e.productCollection.getProductModels(this.props.canManageCatalog).length?n.default.createElement(c.default,{flatListControllers:[this.props.flatListController]},n.default.createElement(u.default,{flatListController:this.props.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:this.getData(),renderItem:this.renderItem,defaultItemHeight:s.default.PRODUCT_LIST_ITEM_HEIGHT})):null}}_.CONCERNS={catalog:["productCollection","afterCursor","id","index"]},_.displayName="ProductCatalogList";var v=(0,m.default)(_,_.CONCERNS);t.default=v},3504:(e,t,a)=>{"use strict";var r=a(20862),l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CatalogViewDrawer=void 0;var n=l(a(48926)),o=l(a(23493)),i=l(a(23279)),s=r(a(67294)),d=l(a(12772)),u=l(a(66281)),c=l(a(57984)),f=l(a(54337)),h=a(94360),p=l(a(56538)),m=l(a(87655)),g=l(a(50514)),_=l(a(46274)),v=l(a(3395)),C=l(a(34727)),E=r(a(85002)),S=a(84710),P=l(a(95598)),y=l(a(12063)),T=l(a(98607)),I=l(a(60246)),M=l(a(66761)),w=l(a(48878)),N=l(a(82686)),O=l(a(44511)),k=l(a(30401)),D=l(a(52206)),b=l(a(82286));class R extends s.Component{constructor(e){super(e),this._catalogFlatListController=new y.default,this._handleScroll=(e,t)=>{var a,r;this.props.setScrollOffset&&this.props.setScrollOffset(t.scrollTop),(null===(a=this.state.scrollHelper)||void 0===a?void 0:a.willLoadMore(t))&&this.setState({loadingMore:!0}),null===(r=this.state.scrollHelper)||void 0===r||r.onScroll(e,t).then((e=>{e&&this.setState({loadingMore:!1})})).catch((e=>{throw this.setState({loadingMore:!1}),e}))},this.handleScroll=(0,o.default)(this._handleScroll,100),this.onScroll=e=>{this.handleScroll(e,e.currentTarget)},this._handleCartChange=()=>{var e=this.state.cart.itemCount;this.state.cartCount!==e&&this.setState({cartCount:e})},this._handleCartClick=()=>{var{contact:e,onCartClick:t}=this.props;t&&t(e.id.toString())},this._handleCatalogLinkClick=()=>{var{catalog:e}=this.state,{onCatalogLinkClick:t,contact:a}=this.props;e&&t(e,a)};var t=u.default.findCart(this.props.contact.id.toString());this.state={cartEnabled:!1,catalog:null,cartCount:t.itemCount,catalogFetchState:"NONE",dataSource:null,scrollHelper:null,loadingMore:!0,cart:t}}componentDidMount(){var{catalogId:e,listeners:t}=this.props;this._setupCatalog(),(0,m.default)(e).then((e=>{this.setState({cartEnabled:e}),e&&t.add(this.state.cart,"all",this._handleCartChange)}))}_setupCatalog(){var{catalogId:e,rejectOnUnmount:t,canManageCatalog:a,scrollOffset:r}=this.props;c.default.find(e).checkpoint(t()).then((e=>{var t=new h.CatalogWithCollectionsDataSource(e,a||!1,_.default.PRODUCT_LIST_ITEM_HEIGHT),l=new h.CatalogListItemScrollHelper(t);this.setState({catalog:e,dataSource:t,scrollHelper:l,catalogFetchState:"SUCCESS"},(()=>{this.loadInitialItems(),this._watchProductCollection(),void 0!==r&&this._catalogFlatListController.setScrollFromStart(r)}))})).catch((e=>{(0,S.parseErrorState)(e,(e=>this.setState({catalogFetchState:e,loadingMore:!1})))}))}_watchProductCollection(){var{catalog:e}=this.state;this.props.autoUpdate&&null!=e&&(e.productCollection.on("add",(0,i.default)((()=>this.forceUpdate()),100)),e.productCollection.on("remove",(0,i.default)((()=>this.forceUpdate()),100)),e.collections.on("add",(0,i.default)((()=>this.forceUpdate()),100)),e.collections.on("remove",(0,i.default)((()=>this.forceUpdate()),100)))}_getDrawerContent(){var e,t,a,{catalog:r,cartEnabled:l,dataSource:n}=this.state,{contact:o,businessProfile:i,canManageCatalog:u,onAddProduct:c,onCartClick:f}=this.props,h=l&&f?this._handleCartClick:void 0;return u&&c&&(e=s.default.createElement(d.default,{onClick:()=>c(),theme:"collections"})),r&&n?(t=s.default.createElement(O.default,{onCartOpen:h,onProductDetail:this.props.onProductDetail,flatListController:this._catalogFlatListController,catalog:r,canManageCatalog:this.props.canManageCatalog,shareLinks:this.props.canManageCatalog,onProductShare:this.props.onProductShare,onCollectionSeeAll:this.props.onCollectionSeeAll,data:n.getData(),onEditCollection:this.props.onEditCollection}),I.default.supportsFeature(I.default.F.MD_BACKEND)&&(a=s.default.createElement(N.default,null,s.default.createElement(g.default,{onClick:this.props.onOpenCollections})))):t=s.default.createElement(P.default,{fetchState:this.state.catalogFetchState}),s.default.createElement(s.default.Fragment,null,i&&s.default.createElement("div",{className:p.default.header},s.default.createElement(k.default,{profilePicThumb:o.getProfilePicThumb(),contact:o,businessProfile:i})),s.default.createElement("div",{className:p.default.list},a,e,t,this.state.loadingMore&&s.default.createElement(T.default,null)))}loadInitialItems(){var e=this;return(0,n.default)((function*(){var{dataSource:t}=e.state;yield null==t?void 0:t.loadInitialItems(),e.setState({loadingMore:!1})}))()}_renderDrawerMenu(){var e=this.state.cartEnabled?this._handleCartClick:void 0;return s.default.createElement(f.default,{onSendCatalog:this._handleCatalogLinkClick,onCartClick:e,cartCount:this.state.cart.itemCount,catalogId:this.props.catalogId.toString(),canManageCatalog:this.props.canManageCatalog,onOpenCollections:this.props.onOpenCollections,onOpenSettings:this.props.onOpenSettings})}render(){return s.default.createElement(v.default,{theme:"products",onDrop:this.props.onBack},s.default.createElement(E.default,{title:M.default.t(1272),type:this.props.headerType||E.DRAWER_HEADER_TYPE.SMALL,onBack:this.props.onBack,menu:this._renderDrawerMenu()}),s.default.createElement(C.default,{onScroll:this.onScroll,flatListControllers:[this._catalogFlatListController]},this._getDrawerContent()))}}t.CatalogViewDrawer=R,R.CONCERNS={contact:["id"]},R.displayName="CatalogViewDrawer";var x=(0,D.default)((0,w.default)((0,b.default)(R,R.CONCERNS)));t.default=x},10303:(e,t,a)=>{"use strict";var r=a(20862),l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CollectionContentDrawer=void 0;var n=l(a(48926)),o=l(a(23493)),i=r(a(67294)),s=l(a(12772)),d=l(a(66281)),u=l(a(57984)),c=l(a(54337)),f=a(94360),h=l(a(87655)),p=l(a(80092)),m=l(a(97737)),g=l(a(46274)),_=l(a(3395)),v=l(a(34727)),C=l(a(31763)),E=r(a(85002)),S=a(84710),P=l(a(95598)),y=l(a(12063)),T=l(a(98607)),I=l(a(66761)),M=l(a(48878)),w=a(29004),N=a(66248),O=l(a(44511)),k=l(a(52206)),D=l(a(82286));class b extends i.Component{constructor(e){super(e),this._collectionFlatListController=new y.default,this._handleCartChange=()=>{var e=this.state.cart.itemCount;this.state.cartCount!==e&&this.setState({cartCount:e})},this._handleCartClick=()=>{var{contact:e,onCartClick:t}=this.props;t&&t(e.id.toString())},this._handleCatalogLinkClick=()=>{var{catalog:e}=this.state;if(e){var{onCatalogLinkClick:t,contact:a}=this.props;t(e,a)}},this._handleScroll=(e,t)=>{var a,r;this.props.setScrollOffset&&this.props.setScrollOffset(t.scrollTop),(null===(a=this.state.scrollHelper)||void 0===a?void 0:a.willLoadMore(t))&&this.setState({loadingMore:!0}),null===(r=this.state.scrollHelper)||void 0===r||r.onScroll(e,t).then((e=>{e&&this.setState({loadingMore:!1})})).catch((e=>{throw this.setState({loadingMore:!1}),e}))},this.handleScroll=(0,o.default)(this._handleScroll,100),this.onScroll=e=>{this.handleScroll(e,e.currentTarget)};var t=d.default.findCart(this.props.contact.id.toString());this.state={cartEnabled:!1,catalog:null,cartCount:t.itemCount,catalogFetchState:"NONE",dataSource:null,scrollHelper:null,loadingMore:!0,cart:t}}componentDidMount(){var{catalogId:e,listeners:t}=this.props;this._setupCatalog(),(0,h.default)(e).then((e=>{this.setState({cartEnabled:e}),e&&t.add(this.state.cart,"all",this._handleCartChange)}))}_setupCatalog(){var{canManageCatalog:e,catalogId:t,rejectOnUnmount:a,scrollOffset:r}=this.props;u.default.find(t).then((t=>{var a;this.setState({catalog:t,catalogFetchState:"SUCCESS"});var l=new f.SingleCollectionDataSource(t,null===(a=this.props.collection)||void 0===a?void 0:a.id.toString(),e||!1,g.default.PRODUCT_LIST_ITEM_HEIGHT),n=new f.CatalogListItemScrollHelper(l);this.setState({dataSource:l,scrollHelper:n},(()=>{this.loadInitialItems(),this._watchProductCollection(),void 0!==r&&this._collectionFlatListController.setScrollFromStart(r)}))})).checkpoint(a()).catch((e=>{(0,S.parseErrorState)(e,(e=>this.setState({catalogFetchState:e,loadingMore:!1})))}))}_watchProductCollection(){var{collection:e}=this.props,{catalog:t}=this.state;null!=e&&(e.productCollection.on("add",(()=>this.forceUpdate())),e.productCollection.on("remove",(()=>this.forceUpdate())),this.props.listeners.add(e,"change:reviewStatus",(()=>this.forceUpdate()))),null!=t&&(t.productCollection.on("add",(()=>this.forceUpdate())),t.productCollection.on("remove",(()=>this.forceUpdate())),t.collections.on("add",(()=>this.forceUpdate())),t.collections.on("remove",(()=>this.forceUpdate())))}_getDrawerContent(){var e,{catalog:t,cartEnabled:a,dataSource:r,catalogFetchState:l,loadingMore:n}=this.state,{canManageCatalog:o,onCartClick:d,onProductDetail:u,onProductShare:c,collection:f}=this.props,h=a&&d?this._handleCartClick:void 0;if(!t||!r)return i.default.createElement(P.default,{fetchState:l});var g=r.getData();if(0===g.length&&!n&&o&&f)return i.default.createElement(i.default.Fragment,null,i.default.createElement("div",{className:p.default.list},i.default.createElement(s.default,{theme:"collections",onClick:()=>{this.props.onEditCollection&&this.props.onEditCollection(f)}}),i.default.createElement("div",{className:p.default.addItemsNotice},I.default.t(453))));var _=i.default.createElement(O.default,{onCartOpen:h,onProductDetail:u,flatListController:this._collectionFlatListController,catalog:t,canManageCatalog:o,shareLinks:o,onProductShare:c,collectionId:null===(e=this.props.collection)||void 0===e?void 0:e.id.toString(),data:g}),v=this.props.collection?i.default.createElement(m.default,{collection:this.props.collection,onEditCollection:this.props.onEditCollection}):void 0;return i.default.createElement(i.default.Fragment,null,i.default.createElement("div",{className:p.default.list},v,_,n&&i.default.createElement(T.default,null)))}loadInitialItems(){var e=this;return(0,n.default)((function*(){var{dataSource:t}=e.state;yield null==t?void 0:t.loadInitialItems(),e.setState({loadingMore:!1}),(0,w.logCollectionSeeAllView)({catalogOwnerJid:e.props.catalogId.toString(),catalogContext:(0,N.getProductCatalogContext)(e.context),collectionId:null==t?void 0:t.collectionId})}))()}_renderDrawerMenu(){var e=this.state.cartEnabled?this._handleCartClick:void 0;return i.default.createElement(c.default,{onSendCatalog:this._handleCatalogLinkClick,onCartClick:e,cartCount:this.state.cart.itemCount,catalogId:this.props.catalogId.toString(),canManageCatalog:this.props.canManageCatalog})}render(){var e,t=(null===(e=this.props.collection)||void 0===e?void 0:e.name)||I.default.t(543);return i.default.createElement(_.default,{theme:"products",onDrop:this.props.onBack},i.default.createElement(E.default,{title:t,type:this.props.headerType||E.DRAWER_HEADER_TYPE.SMALL,onBack:this.props.onBack,menu:this._renderDrawerMenu()}),i.default.createElement(v.default,{flatListControllers:[this._collectionFlatListController],onScroll:this.onScroll},this._getDrawerContent()))}}t.CollectionContentDrawer=b,b.contextType=C.default,b.CONCERNS={contact:["id"]},b.displayName="CollectionContentDrawer";var R=(0,k.default)((0,M.default)((0,D.default)(b,b.CONCERNS)));t.default=R},55446:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a,{collection:r,onSeeAll:f,allItems:h}=e;r?({name:t,id:a}=r):h&&(t=d.default.t(543));var p=l.default.createElement(c.TextDiv,{theme:"title"},l.default.createElement(s.default,{text:t,ellipsify:!0,titlify:!0}));function m(e){!function(e){e.preventDefault(),e.stopPropagation()}(e),f&&r?f(r):f&&f()}var g=void 0;if(r)switch(r.reviewStatus){case u.PRODUCT_REVIEW_STATUS.REJECTED:g=l.default.createElement("span",{className:i.default.reviewStateRejected},d.default.t(545))}return l.default.createElement(n.default,{key:a,primary:p,secondary:g,detail:l.default.createElement(o.default,{onClick:m},d.default.t(546)),theme:"collection-header",idle:!0,className:i.default.collectionListItem})};var l=r(a(67294)),n=r(a(79274)),o=r(a(53318)),i=r(a(97076)),s=r(a(98712)),d=r(a(66761)),u=a(116),c=a(45739)},29004:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.logCollectionSeeAllView=function({catalogOwnerJid:e,catalogContext:t,collectionId:a}){var r=(0,n.getProductStatsInFetched)(e,a),d=null==r?void 0:r.productIndex,u=null==r?void 0:r.collectionIndex;(0,s.createCatalogViewEvent)((0,l.default)({isOwner:(0,s.isCatalogOwner)({catalogOwnerJid:e}),catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_COLLECTION_IMPRESSION,catalogViewAction:o.default.CATALOG_VIEW_ACTION.ACTION_COLLECTION_IMPRESSION,productIndex:d,collectionIndex:u},(0,i.toDataForCatalogViewEvents)(t))).commit()},t.logCollectionItemsAssignment=function({catalogContext:e,collectionId:t,addedCount:a,removedCount:r}){a>0&&new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_COLLECTION_ASSIGN_ITEMS,catalogEntryPoint:e.entryPoint,catalogSessionId:e.session.toString(),productCount:a,collectionId:t}).commit();r>0&&new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_COLLECTION_UNASSIGN_ITEMS,catalogEntryPoint:e.entryPoint,catalogSessionId:e.session.toString(),productCount:r,collectionId:t}).commit()},t.logCollectionDeleted=function({catalogContext:e,collectionId:t}){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_COLLECTION_DELETED,catalogEntryPoint:e.entryPoint,catalogSessionId:e.session.toString(),collectionId:t}).commit()},t.logCollectionRenamed=function({catalogContext:e,collectionId:t}){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_COLLECTION_DELETED,catalogEntryPoint:e.entryPoint,catalogSessionId:e.session.toString(),collectionId:t}).commit()},t.logCollectionMenuClicked=function(e){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_MENU_COLLECTIONS_CLICK,catalogEntryPoint:e.entryPoint,catalogSessionId:e.session.toString()}).commit()},t.logCollectionCreated=function({catalogContext:e,collectionId:t,productCount:a}){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_COLLECTION_CREATED,catalogEntryPoint:e.entryPoint,catalogSessionId:e.session.toString(),productCount:a}).commit()},t.logCollectionCreateClicked=function(e){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_COLLECTION_CREATE_CLICKED,catalogEntryPoint:e.entryPoint,catalogSessionId:e.session.toString()}).commit()};var l=r(a(81109)),n=a(94360),o=r(a(5148)),i=a(66248),s=a(72401)},44511:(e,t,a)=>{"use strict";var r=a(95318),l=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a(67294)),o=a(71509),i=r(a(97420)),s=r(a(97737)),d=r(a(55446)),u=r(a(46274)),c=r(a(31763)),f=r(a(47060)),h=r(a(3152)),p=r(a(12063)),m=r(a(48878)),g=a(58635),_=a(66248),v=r(a(89709)),C=a(116),E=r(a(52206)),S=r(a(82286)),P=a(79665);class y extends n.Component{constructor(e){super(e),this.attachedListeners=new Set,this._catalogFlatListController=new p.default,this.handleProductDetail=(e,t)=>{var{onProductDetail:a}=this.props;return(0,g.logCatalogListDetailClick)({product:(0,P.unproxy)(e),catalogContext:(0,_.getProductCatalogContext)(this.context)}),this.setState({openedProductId:e.id.toString()}),a(e,t)},this.handleProductShare=e=>{var{onProductShare:t}=this.props;t&&t(e)},this.handleProductDelete=e=>{var{catalog:t}=this.props;(0,o.handleProductDelete)(t,e,(0,_.getProductCatalogContext)(this.context)).then((()=>{e.id===this.state.openedProductId&&(i.default.closeDrawerMid(),this.setState({openedProductId:void 0}))}))},this.handleProductHideShow=e=>{var{catalog:t}=this.props;(0,o.handleProductVisibilityChange)(t,e,(0,_.getProductCatalogContext)(this.context))},this.renderItem=e=>{var{collection:t,product:a,allItems:r,reviewBanner:l,collectionId:o}=e,{onCartOpen:i,shareLinks:u}=this.props;return t?l?n.default.createElement(s.default,{collection:t,onEditCollection:this.props.onEditCollection}):n.default.createElement(d.default,{collection:t,onSeeAll:this.props.onCollectionSeeAll}):r?n.default.createElement(d.default,{allItems:r,onSeeAll:this.props.onCollectionSeeAll}):a?n.default.createElement(v.default,{collectionId:o,product:a,onCartOpen:i,onClick:()=>this.handleProductDetail(a,o),onProductShare:u?this.handleProductShare:null,onProductDelete:this.handleProductDelete,onProductHideShow:this.handleProductHideShow,theme:"product-of-collection",canManageCatalog:this.props.canManageCatalog}):null},this.state={openedProductId:void 0,loadingMore:!1,stopLoading:!1,catalogFetchState:e.catalog?"SUCCESS":"NONE"}}getData(){var{onCartOpen:e}=this.props,t=void 0!==e,a=this.props.data||[],r=[];return a.forEach((e=>{var a=e.collection,l=e.product,n=e.allItems;if(a&&l){var o=a.id;r.push({itemKey:`${o.toString()}_${l.id.toString()}_${t.toString()}`,product:l,collectionId:o})}else if(a)this.attachedListeners.has(a.id)||(this.attachedListeners.add(a.id),this.props.listeners.add(a,"change:reviewStatus",(()=>{this.forceUpdate()}))),r.push({itemKey:a.id.toString(),collection:a}),a.reviewStatus!==C.PRODUCT_REVIEW_STATUS.PENDING&&a.reviewStatus!==C.PRODUCT_REVIEW_STATUS.REJECTED||r.push({itemKey:`${a.id.toString()}_reviewBanner`,collection:a,reviewBanner:!0});else if(n)r.push({itemKey:"view_all",allItems:n});else if(l){var i=this.props.collectionId||void 0;r.push({itemKey:`${l.id.toString()}_${t.toString()}`,product:l,collectionId:i})}})),r}render(){var e=this.getData();return n.default.createElement(n.default.Fragment,null,n.default.createElement(h.default,{flatListControllers:[this._catalogFlatListController]},n.default.createElement(f.default,{flatListController:this._catalogFlatListController,direction:"vertical",forceConsistentRenderCount:!1,data:e,renderItem:this.renderItem,defaultItemHeight:u.default.PRODUCT_LIST_ITEM_HEIGHT})))}}y.CONCERNS={catalog:["productCollection","collections","afterCursor","id","index"]},y.contextType=c.default,y.displayName="ProductCollectionsList";var T=(0,E.default)((0,m.default)((0,S.default)(y,y.CONCERNS)));t.default=T},77453:(e,t,a)=>{"use strict";var r=a(20862),l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a(94184)),o=r(a(67294)),i=l(a(99420)),s=a(84442),d=l(a(66281)),u=l(a(57984)),c=l(a(19049)),f=l(a(87655)),h=l(a(97420)),p=l(a(57066)),m=l(a(3395)),g=l(a(34727)),_=l(a(31763)),v=r(a(85002)),C=a(66274),E=r(a(92246)),S=l(a(66761)),P=l(a(48878)),y=a(58635),T=a(86989),I=a(66248),M=a(116),w=l(a(44134)),N=l(a(32770)),O=l(a(20395)),k=a(73006),D=l(a(52206)),b=l(a(32682)),R=r(a(17363)),x=l(a(82286)),L=a(79665),A=a(45739);class F extends o.Component{constructor(e){super(e),this.handleCartClick=()=>{var{product:e,onCartClick:t}=this.props;t&&t(e.catalogWid.toString())},this._handleReportProduct=()=>{var{product:e}=this.props;h.default.openModal(o.default.createElement(b.default,{product:e,sessionId:(0,I.getProductCatalogSessionId)(this.context)}))},this.handleProductLinkClick=()=>{var{product:e}=this.props;this.props.onProductLinkClick(e)},this.handleSendChat=()=>{var{product:e}=this.props,t=u.default.get(e.catalogWid);(0,T.sendProductToChat)(e,t,(0,I.getProductCatalogContext)(this.context)),(0,y.logProductMessageBusinessClick)(e,(0,I.getProductCatalogContext)(this.context))},this._handleSendProduct=()=>{var{product:e}=this.props,{catalogWid:t}=e,a=u.default.get(t);if(a){var r=a.productCollection.get(e.id),l=r?(0,L.unproxy)(r):(0,L.unproxy)(e);h.default.attachProduct({product:l})}},this.handleBack=()=>{var{onBack:e}=this.props;if(e)return e()},this.handleProductCatalog=()=>{var{onProductCatalog:e,product:t}=this.props;e&&e(t.catalogWid,(0,I.getProductCatalogContext)(this.context))},this.handleProductDetail=e=>{var{onProductDetail:t}=this.props;if(t)return t(e)},this.isRejected=()=>{var{reviewStatus:e}=this.props.product;return e===M.PRODUCT_REVIEW_STATUS.REJECTED},this._isAvailable=()=>{var{productFetchState:e}=this.state;return"ERROR"!==e&&"NOT_FOUND"!==e&&!this.isRejected()};var t=e.product.fetchedFromServer?"SUCCESS":"PENDING",a=null,r="NONE";e.refreshCarousel&&((a=u.default.get(e.product.catalogWid))&&a.productCollection&&a.fetchedFromServer?r="SUCCESS":(a=null,r="PENDING"));var l=d.default.findCart(this.props.product.catalogWid.toString());this.state={businessProfile:null,cartEnabled:!1,productCatalog:a,productFetchState:t,productCatalogFetchState:r,cart:l}}componentDidMount(){var{product:e,listeners:t,collectionId:a}=this.props,r=this.state.cart,l=e.catalogWid,n=e.id.toString();l&&n&&(this._fetchData(),t.add(r,"change:cartItemCollection",(()=>{this.forceUpdate()})),(0,f.default)(l).then((e=>{this.setState({cartEnabled:e})})),(0,y.logProductDetailView)({product:(0,L.unproxy)(e),catalogContext:(0,I.getProductCatalogContext)(this.context),cartToggle:this.state.cartEnabled,collectionId:a}))}_fetchData(){var{product:e,rejectOnUnmount:t}=this.props,a=e.catalogWid,r=e.id.toString(),l=u.default.findProduct({catalogWid:a,productId:r,productMsgMediaData:(0,L.unproxy)(e).productMsgMediaData}),n=i.default.find(a);return Promise.all([n,l]).checkpoint(t()).then((([e])=>(this.setState({productFetchState:"SUCCESS",businessProfile:e}),e))).then((e=>{(0,s.hasCatalog)(e)&&"PENDING"===this.state.productCatalogFetchState&&this._fetchProductCatalog()})).catchType(C.E404,(()=>{this.setState({productFetchState:"NOT_FOUND"})})).catchType(E.Unmount,(()=>{})).catchType(C.ServerStatusCodeError,(()=>{this.setState({productFetchState:"ERROR"}),__LOG__(3)`Failed to fetch product from server`})).catchType(C.WebdDrop,(()=>{this.setState({productFetchState:"ERROR"}),__LOG__(3)`Failed to fetch product`}))}_fetchProductCatalog(){var{product:e,rejectOnUnmount:t}=this.props,a=e.catalogWid;u.default.findCarouselCatalog(a).checkpoint(t()).then((e=>{var t=Array.isArray(e)?e[0]:e;this.setState({productCatalog:t||null,productCatalogFetchState:t?"SUCCESS":"NONE"})})).catchType(E.Unmount,(()=>{})).catchType(C.ServerStatusCodeError,(e=>{"not_found"===e.status||404===e.status?this.setState({productCatalog:null,productCatalogFetchState:"NOT_FOUND"}):(this.setState({productCatalog:null,productCatalogFetchState:"ERROR"}),__LOG__(3)`Failed to fetch product catalog from server`)})).catchType(C.WebdDrop,(()=>{this.setState({productCatalog:null,productCatalogFetchState:"ERROR"}),__LOG__(3)`Failed to fetch product catalog`}))}componentWillUnmount(){var{product:e}=this.props,t=e.catalogWid,a=e.id.toString();if(t&&a){var r=u.default.get(t),l=r&&r.msgProductCollection.get(a);l&&l.fetchedFromServer&&r&&r.msgProductCollection.remove(l)}}_renderTopBar(){var e,{productFetchState:t,productCatalogFetchState:a}=this.state,r=this._isAvailable();e="ERROR"===t?o.default.createElement(A.TextSpan,{className:w.default.text,theme:"small",color:"danger"},S.default.t(1271)):r?[o.default.createElement(R.default,{size:14,color:R.colorOptions.highlight,key:"DetailDrawer-loadingBar-spinner"}),o.default.createElement(A.TextSpan,{className:(0,n.default)(w.default.text,w.default.loadingText),theme:"small",key:"DetailDrawer-loadingBar-msg"},S.default.t(1299))]:o.default.createElement(A.TextSpan,{className:w.default.text,theme:"small",color:"danger"},S.default.t(1285));var l="PENDING"===t||"PENDING"===a||!r;return o.default.createElement("div",{className:(0,n.default)({[w.default.loadingContainer]:l,[w.default.shiftUp]:!l})},e)}_renderDrawerMenu(){if(!this._isAvailable())return null;var e=this.state.cartEnabled?this.handleCartClick:void 0;return o.default.createElement(p.default,{onSendProduct:this._handleSendProduct,onReportProduct:this._handleReportProduct,onProductLinkClick:this.handleProductLinkClick,onCartClick:e,cartCount:this.state.cart.itemCount,catalogId:this.props.product.catalogWid.toString()})}_renderDrawerHeader(){return o.default.createElement(v.default,{a8n:"drawer-title-profile",title:S.default.t(1275),onBack:this.handleBack,type:v.DRAWER_HEADER_TYPE.SMALL,menu:this._renderDrawerMenu()})}render(){var{product:e,collectionId:t}=this.props,{productCatalog:a,productFetchState:r}=this.state,l=this._isAvailable(),n=(0,s.hasCatalog)(this.state.businessProfile);return o.default.createElement(m.default,{onDrop:this.handleBack,theme:"striped",key:"product-details-drawer"},this._renderDrawerHeader(),o.default.createElement(g.default,null,o.default.createElement("div",{className:w.default.body},this._renderTopBar(),o.default.createElement(O.default,{product:e,isAvailable:l,fetching:"PENDING"===r}),e.availability===k.ProductAvailability.OUT_OF_STOCK?o.default.createElement("div",{className:w.default.availabilityBanner},S.default.t(1274)):null,o.default.createElement(N.default,{product:e,collectionId:t,onSendChat:this.handleSendChat,isAvailable:l}),n&&a?o.default.createElement(c.default,{catalog:a,onProductCatalog:this.handleProductCatalog,onProductDetail:this.handleProductDetail,filterProductId:e.id.toString(),title:S.default.t(1268),animation:!1}):null)))}}F.CONCERNS={product:["id","catalogWid","productImageCollection","fetchedFromServer","name","availability","reviewStatus"]},F.contextType=_.default,F.displayName="ProductDetails";var U=(0,D.default)((0,P.default)((0,x.default)(F,F.CONCERNS)));t.default=U},32770:(e,t,a)=>{"use strict";var r=a(20862),l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a(94184)),o=r(a(67294)),i=l(a(57117)),s=l(a(95780)),d=l(a(27306)),u=l(a(87655)),c=l(a(46274)),f=l(a(31763)),h=l(a(25404)),p=l(a(98712)),m=a(91072),g=a(85371),_=l(a(66761)),v=r(a(31667)),C=a(58635),E=a(66248),S=a(116),P=l(a(55675)),y=l(a(48709)),T=a(73006),I=l(a(82286)),M=a(79665),w=a(45739);class N extends o.Component{constructor(e){super(e),this.handleAddToCart=e=>{var{product:t,collectionId:a}=this.props;(0,i.default)(t,(0,E.getProductCatalogContext)(this.context),a),e.stopPropagation()},this.handleReadMore=()=>{this.setState({isDescExpanded:!0})},this._handleClickUrl=(e,t)=>{e.stopPropagation();var{product:a}=this.props;(0,C.logDetailLinkClick)({product:(0,M.unproxy)(a),catalogContext:(0,E.getProductCatalogContext)(this.context)});var r=t&&v.findLink(t);r&&(0,m.openExternalLink)(r.url)},this.state={isDescExpanded:!1,cartEnabled:!1}}componentDidMount(){(0,u.default)(this.props.product.catalogWid).then((e=>{this.setState({cartEnabled:e})}))}_renderMessageBusinessButton(){var{onSendChat:e,product:t,isAvailable:a}=this.props;if(!e||!t.fetchedFromServer||!a||t.reviewStatus!==S.PRODUCT_REVIEW_STATUS.APPROVED)return null;var r=_.default.t(1280);return o.default.createElement("div",{className:P.default.buttonContainer,title:r},o.default.createElement(d.default,{className:P.default.button,onClick:e,type:"secondary"},r))}_renderAddToCartButton(){var{product:e,isAvailable:t}=this.props;if(!this.state.cartEnabled||!e.fetchedFromServer||!t||e.reviewStatus!==S.PRODUCT_REVIEW_STATUS.APPROVED)return null;var a=_.default.t(1265),r=e.availability===T.ProductAvailability.OUT_OF_STOCK;return o.default.createElement("div",{className:P.default.buttonContainer,title:a},o.default.createElement(d.default,{className:(0,n.default)(P.default.button,P.default.addToCartButton),onClick:this.handleAddToCart,type:"secondary",disabled:r},o.default.createElement("span",{className:P.default.addToCartContainer},o.default.createElement(s.default,{className:(0,n.default)(P.default.addToCartIcon,{[P.default.addToCartIconDisabled]:r})}),a)))}_renderLink(e){var{product:t,isAvailable:a}=this.props;if(!t.fetchedFromServer||!e||!a)return null;var r=g.Configuration.TrustedGroupDesc({links:v.findLinks(e)});return o.default.createElement("div",{className:P.default.descBlock},o.default.createElement(p.default,{selectable:!0,formatters:r,text:e,onClick:t=>this._handleClickUrl(t,e)}))}_renderDesc(){var{product:e}=this.props,{isDescExpanded:t}=this.state;if(!e.description&&!e.url&&!e.retailerId)return null;var a,r=!(!e||!e.description)&&e.description.length>c.default.GROUP_DESCRIPTION_INFO_PANEL_TRUNC_LENGTH;return e.description&&(a=o.default.createElement("div",{className:P.default.descBlock},o.default.createElement(p.default,{selectable:!0,multiline:!0,text:e.description,textLimit:t?1/0:c.default.GROUP_DESCRIPTION_INFO_PANEL_TRUNC_LENGTH}),r&&!t?o.default.createElement("span",{className:P.default.more,role:"button",onClick:this.handleReadMore},` ${_.default.t(1308)}`):null)),o.default.createElement(w.TextDiv,{theme:"plain",className:P.default.description},a,this._renderLink(e.url),e.retailerId?o.default.createElement("div",{className:P.default.descBlock},o.default.createElement(p.default,{text:e.retailerId,selectable:!0,direction:"inherit"})):null)}render(){var{product:e}=this.props;return o.default.createElement(h.default,{theme:"padding-product",animation:!1},o.default.createElement(w.TextDiv,{theme:"title",className:P.default.name},o.default.createElement(p.default,{text:e.name,selectable:!0})),null!=e.priceAmount1000?o.default.createElement(w.TextDiv,{className:P.default.price,color:"dark",theme:"plain"},o.default.createElement(y.default,{product:e,selectable:!0,direction:"inherit"})):null,this._renderDesc(),this._renderMessageBusinessButton(),this._renderAddToCartButton())}}N.contextType=f.default,N.CONCERNS={product:["name","url","description","availability","currency","priceAmount1000","salePriceAmount1000","salePriceStartDate","salePriceEndDate","fetchedFromServer","retailerId","catalogWid","productImageCollection","imageHash","reviewStatus","imageCdnUrl","id"]},N.displayName="ProductDetailsInfo";var O=(0,I.default)(N,N.CONCERNS);t.default=O},64349:(e,t,a)=>{"use strict";var r=a(20862),l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ProductDetailsForDeepLink=void 0;var n=l(a(96391)),o=r(a(67294)),i=l(a(57984)),s=l(a(3395)),d=l(a(34727)),u=r(a(85002)),c=a(84710),f=l(a(95598)),h=l(a(64774)),p=l(a(66761)),m=l(a(77453)),g=l(a(52206)),_=a(32991);class v extends o.PureComponent{constructor(e){super(e),this.state={product:null,productFetchState:"NONE"};var{productId:t,businessOwnerJid:a}=this.props.productInfo,r=(0,h.default)({productId:t,businessOwnerJid:a});this.state=r?{product:r,productFetchState:"NONE"}:{product:r,productFetchState:"PENDING"}}componentDidMount(){this.state.product||this._fetchProduct()}_fetchProduct(){var{productId:e,businessOwnerJid:t}=this.props.productInfo,a=(0,_.createWid)(t);i.default.findProduct({catalogWid:a,productId:e}).checkpoint(this.props.rejectOnUnmount()).then((()=>{var t=i.default.get(a),r=(0,n.default)(t,"catalog").productCollection.get(e);this.setState({product:r,productFetchState:"SUCCESS"})})).catch((e=>{(0,c.parseErrorState)(e,(e=>this.setState({productFetchState:e})))}))}render(){return this.state.product?o.default.createElement(m.default,{product:this.state.product,onEnd:this.props.onEnd,onBack:this.props.onBack,onProductDetail:this.props.onProductDetail,onProductCatalog:this.props.onProductCatalog,refreshCarousel:!0,onProductLinkClick:this.props.onProductLinkClick,onCartClick:this.props.onCartClick}):o.default.createElement(s.default,{onDrop:this.props.onBack,key:"product-details-drawer"},o.default.createElement(u.default,{a8n:"drawer-title-profile",title:p.default.t(1275),onBack:this.props.onBack,type:u.DRAWER_HEADER_TYPE.SMALL}),o.default.createElement(d.default,null,o.default.createElement(f.default,{fetchState:this.state.productFetchState})))}}t.ProductDetailsForDeepLink=v,v.displayName="ProductDetailsForDeepLink";var C=(0,g.default)(v);t.default=C},37091:(e,t,a)=>{"use strict";var r=a(20862),l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a(94184)),o=r(a(67294)),i=l(a(79274)),s=l(a(97420)),d=l(a(42699)),u=l(a(3395)),c=l(a(34727)),f=l(a(31763)),h=r(a(85002)),p=l(a(98712)),m=l(a(66761)),g=l(a(84366)),_=a(58635),v=a(66248),C=l(a(13906)),E=r(a(38924)),S=l(a(36350)),P=l(a(88003)),y=l(a(87443)),T=a(42473),I=a(79665),M="product-link-anchor";function w(e){var t=e.productImageCollection.head();return t?o.default.createElement(E.default,{className:(0,n.default)(C.default.productImage,C.default.productImageContainer),mediaData:t.mediaData}):o.default.createElement(E.ProductThumbPlaceholder,{className:(0,n.default)(C.default.productThumb,C.default.productThumbContainer)})}class N extends o.Component{constructor(...e){super(...e),this._handleProductLinkClick=e=>{e.preventDefault(),this._handleSendProductLinkClick()},this._handleSendProductLinkClick=()=>{var{product:e,onSend:t}=this.props;s.default.openModal(o.default.createElement(y.default,{product:e,onSend:t}),{transition:"modal-flow"}),(0,_.logShareProductViaWALinkClick)({product:e,catalogContext:(0,v.getProductCatalogContext)(this.context)})},this._handleCopyLinkClick=()=>{var{product:e}=this.props;(0,_.logShareProductCopyLinkClick)({product:e,catalogContext:(0,v.getProductCatalogContext)(this.context)})},this._handleSendProduct=()=>{var{product:e,onSend:t}=this.props;s.default.attachProduct({product:(0,I.unproxy)(e),onSend:t})}}render(){var e,t,a,{onBack:r,onCancel:l,product:n,prompt:s,centerDrawer:f,sendProductMsg:_}=this.props,v=(0,T.createProductLink)(n.catalogWid.user,n.id.toString());return f&&(e="labels",t="center-column"),a=null!=_?o.default.createElement(P.default,{onClick:this._handleSendProduct}):o.default.createElement(S.default,{onClick:this._handleSendProductLinkClick}),o.default.createElement(u.default,{key:"product-link-drawer",theme:e},o.default.createElement(h.default,{a8n:"product-link-title",title:m.default.t(1277),onBack:r,onCancel:l,type:h.DRAWER_HEADER_TYPE.SMALL}),o.default.createElement(c.default,{theme:t},o.default.createElement("div",{className:C.default.prompt},s),o.default.createElement(i.default,{image:w(n),primary:o.default.createElement(p.default,{text:n.name,direction:"auto"}),theme:"identity",secondary:o.default.createElement(g.default,{id:M,href:v,onClick:this._handleProductLinkClick,noHandle:!0})}),a,o.default.createElement(d.default,{elementId:M,onClick:this._handleCopyLinkClick})))}}t.default=N,N.contextType=f.default,N.displayName="ProductLinkDrawer"},28187:(e,t,a)=>{"use strict";var r=a(20862),l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ProductListDrawer=void 0;var n=l(a(23493)),o=l(a(23279)),i=r(a(67294)),s=l(a(12772)),d=l(a(66281)),u=l(a(84816)),c=l(a(57984)),f=l(a(87655)),h=l(a(46274)),p=l(a(3395)),m=l(a(34727)),g=l(a(31763)),_=r(a(85002)),v=l(a(68770)),C=l(a(59474)),E=a(66274),S=r(a(92246)),P=a(84710),y=l(a(95598)),T=l(a(12063)),I=l(a(98607)),M=a(53615),w=l(a(66761)),N=l(a(77246)),O=l(a(48878)),k=a(58635),D=a(94804),b=a(3875),R=a(66248),x=l(a(47361)),L=l(a(8685)),A=l(a(30401)),F=l(a(52206)),U=l(a(82286)),V=l(a(62745)),B=a(16241);class j extends i.Component{constructor(e){super(e),this._catalogFlatListController=new T.default,this._handleScroll=e=>{this.state.loadingMore||e.scrollTop+h.default.SCROLL_FUDGE>e.scrollHeight-e.clientHeight&&this._loadMoreProduct()},this.handleScroll=(0,n.default)(this._handleScroll,100),this._loadMoreProduct=()=>{var{catalogId:e}=this.props,{stopLoading:t,loadedProducts:a}=this.state;if(!t){var r=c.default.assertGet(e);if(r.afterCursor){var l=r.productCollection.getProductModels().length;this.setState({loadingMore:!0,loadedProducts:l}),c.default.update(e).checkpoint(this.props.rejectOnUnmount()).then((e=>{this.setState({loadingMore:!1}),(Array.isArray(e)?e[0]:e).productCollection.getProductModels().length===a&&this.setState({stopLoading:!0}),l*h.default.PRODUCT_LIST_ITEM_HEIGHT<window.innerHeight&&this._loadMoreProduct()})).catchType(S.Unmount,(()=>{})).catch((()=>{this.setState({loadingMore:!1,stopLoading:!0})}))}}},this.onScroll=e=>{this.handleScroll(e.currentTarget),this.props.setScrollOffset&&this.props.setScrollOffset(e.currentTarget.scrollTop)},this._handleCartChange=()=>{var e=this.state.cart.itemCount;this.state.cartCount!==e&&this.setState({cartCount:e})},this._handleCartClick=()=>{var{contact:e,onCartClick:t}=this.props;t&&t(e.id.toString())},this._handleCatalogLinkClick=()=>{var{catalog:e}=this.state;if(e){var{onCatalogLinkClick:t,contact:a,catalogId:r}=this.props;t(e,a),(0,k.logCatalogShareLinkClick)({catalogOwnerWid:r,catalogContext:(0,R.getProductCatalogContext)(this.context)})}};var t=c.default.get(this.props.catalogId),a=!t||t.stale?null:t,r=d.default.findCart(this.props.contact.id.toString());this.state={loadingMore:!1,loadedProducts:0,stopLoading:!1,cartEnabled:!1,catalog:a,cart:r,cartCount:r.itemCount,catalogFetchState:a?"SUCCESS":"NONE"}}componentDidMount(){var{catalogId:e,listeners:t}=this.props;t.add(this.state.cart,"all",this._handleCartChange),(0,k.logCatalogListView)({catalogOwnerWid:e,catalogContext:(0,R.getProductCatalogContext)(this.context),cartToggle:this.state.cartEnabled}),this.state.catalog?(this._loadMoreProduct(),this._watchProductCollection()):this._findCatalog(),(0,f.default)(e).then((e=>{this.setState({cartEnabled:e})}))}_findCatalog(){return c.default.find(this.props.catalogId).checkpoint(this.props.rejectOnUnmount()).then((e=>{this.setState({catalog:e,catalogFetchState:"SUCCESS"}),this._loadMoreProduct(),this._watchProductCollection()})).catchType(E.ServerStatusCodeError,(e=>{403!==e.status&&404!==e.status||this.setState({catalog:null,catalogFetchState:"NOT_FOUND"})})).catch((e=>{(0,P.parseErrorState)(e,(e=>this.setState({catalogFetchState:e})))}))}_watchProductCollection(){var{catalog:e}=this.state;this.props.autoUpdate&&null!=e&&(e.productCollection.on("add",(0,o.default)((()=>this.forceUpdate()),100)),e.productCollection.on("remove",(0,o.default)((()=>this.forceUpdate()),100)))}_getDrawerContent(){var e,{catalog:t,cartEnabled:a}=this.state,{contact:r,businessProfile:l,canManageCatalog:n,onAddProduct:o,onCartClick:d}=this.props,u=a&&d?this._handleCartClick:void 0;return t?(n&&o&&(e=i.default.createElement(s.default,{onClick:()=>o(),theme:"in-list"})),i.default.createElement(i.default.Fragment,null,l&&i.default.createElement("div",{className:L.default.header},i.default.createElement(A.default,{profilePicThumb:r.getProfilePicThumb(),contact:r,businessProfile:l})),i.default.createElement("div",{className:L.default.list},e,i.default.createElement(x.default,{onCartOpen:u,onProductDetail:this.props.onProductDetail,flatListController:this._catalogFlatListController,catalog:t,canManageCatalog:this.props.canManageCatalog,shareLinks:this.props.canManageCatalog,onProductShare:this.props.onProductShare}),this.state.loadingMore&&i.default.createElement(I.default,null)))):i.default.createElement(y.default,{fetchState:this.state.catalogFetchState})}_getCartIcon(){var{onCartClick:e,headerType:t,catalogId:a}=this.props;if(this.state.cartEnabled&&e){var r=this.state.cartCount,l=(0,B.isNumber)(r)&&r>0?r.toString():void 0,n=(0,D.getOnCartClickWithLog)(this._handleCartClick,a.toString(),(0,R.getProductCatalogContext)(this.context));return i.default.createElement(b.MenuBarItem,{a8nText:"menu-bar-cart-link",icon:i.default.createElement(u.default,{theme:t===_.DRAWER_HEADER_TYPE.LARGE?"inherit-color":null}),text:l,title:w.default.t(424),onClick:n})}return null}_getDrawerHeaderMenu(){var{canManageCatalog:e,onOpenSettings:t}=this.props,a=e&&(0,M.canToggleCartOnOff)()?i.default.createElement(b.MenuBarItem,{a8nText:"menu-bar-menu",icon:i.default.createElement(V.default,{name:"menu"}),title:w.default.t(1046)},i.default.createElement(v.default,{type:"dropdown_menu",flipOnRTL:!0,key:"CatalogDetailHeader",dirX:"LEFT"},i.default.createElement(C.default,{a8n:"mi-foward menu-item",action:this._handleCatalogLinkClick},w.default.t(761)),t&&i.default.createElement(C.default,{a8n:"mi-settings menu-item",action:t},w.default.t(488)))):i.default.createElement(b.MenuBarItem,{a8nText:"menu-bar-catalog-link",icon:i.default.createElement(N.default,{theme:this.props.headerType===_.DRAWER_HEADER_TYPE.LARGE?"inherit-color":null}),title:w.default.t(482),onClick:this._handleCatalogLinkClick});return i.default.createElement(i.default.Fragment,null,this._getCartIcon(),a)}render(){return i.default.createElement(p.default,{theme:"products",onDrop:this.props.onBack},i.default.createElement(_.default,{title:w.default.t(1272),type:this.props.headerType||_.DRAWER_HEADER_TYPE.SMALL,onBack:this.props.onBack,menu:this._getDrawerHeaderMenu()}),i.default.createElement(m.default,{onScroll:this.onScroll,flatListControllers:[this._catalogFlatListController],scrollOffset:this.props.scrollOffset},this._getDrawerContent()))}}t.ProductListDrawer=j,j.CONCERNS={contact:["id"]},j.contextType=g.default,j.displayName="ProductListDrawer";var H=(0,F.default)((0,O.default)((0,U.default)(j,j.CONCERNS)));t.default=H},30401:(e,t,a)=>{"use strict";var r=a(95318),l=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a(67294)),o=a(27890),i=r(a(98712)),s=r(a(23045)),d=r(a(77440)),u=r(a(82286)),c=a(45739);class f extends n.Component{_renderDescription(){var{businessProfile:e}=this.props;return e&&e.description?n.default.createElement("div",{className:d.default.description},n.default.createElement(i.default,{text:e.description,direction:"auto",selectable:!0,titlify:!0})):null}_renderPicture(){var{profilePicThumb:e,contact:t}=this.props;if(!e)return null;var a=(0,o.getDefaultIcon)(t.id);return n.default.createElement("div",{className:d.default.photo},n.default.createElement(o.DetailImageCommon,{profilePicThumb:e,loader:!0,defaultIcon:a,profilePicThumbImg:e.imgFull,spinnerClassName:d.default.spinner,imgClassName:d.default.img,theme:"business"}))}render(){var{contact:e}=this.props;return n.default.createElement("div",{className:d.default.header,"data-testid":"product-list-header"},this._renderPicture(),n.default.createElement("div",{className:d.default.text},n.default.createElement(c.TextDiv,{className:d.default.name,theme:"large"},n.default.createElement(s.default,{contact:e,selectable:!0,useVerifiedName:!0})),this._renderDescription()))}}f.CONCERNS={profilePicThumb:["imgFull"],contact:["id","isMe"],businessProfile:["description"]},f.displayName="ProductListDrawerHeader";var h=(0,u.default)(f,f.CONCERNS);t.default=h},20395:(e,t,a)=>{"use strict";var r=a(95318),l=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a(67294)),o=r(a(97420)),i=r(a(31763)),s=r(a(5365)),d=a(58635),u=a(66248),c=r(a(53584)),f=r(a(82286)),h=a(79665);class p extends n.Component{constructor(...e){super(...e),this.handleClick=(e,t)=>{var{product:a}=this.props;(0,d.logDetailImageClick)({product:(0,h.unproxy)(a),catalogContext:(0,u.getProductCatalogContext)(this.context)});var r={activeProductImage:t,productImageCollection:a.productImageCollection,getZoomNode:()=>e,product:a};o.default.productImageViewerModal(r,(0,u.getProductCatalogSessionId)(this.context))}}render(){var{product:e,isAvailable:t,fetching:a}=this.props,r=e.productImageCollection.toArray();return n.default.createElement("div",{className:c.default.imageCarouselContainer},n.default.createElement(s.default,{images:r,fetching:a,onClick:t?this.handleClick:null,renderFallback:!t,fallbackMediaData:e.productMsgMediaData}))}}p.contextType=i.default,p.CONCERNS={product:["productImageCollection","productMsgMediaData","catalogWid","imageCdnUrl"]},p.displayName="ProductTile";var m=(0,f.default)(p,p.CONCERNS);t.default=m},45454:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{onPopupCancel:t,onReport:a,onTellUsMore:r}=e,u=()=>{t()},c=i.default.t(1332),f=l.default.createElement("div",{key:"ReportProductChoicePopup-desc"},i.default.t(1330)),h=l.default.createElement(n.default,{a8nText:"popup-controls-more",type:"secondary",onClick:()=>{r()},key:"ReportProductChoicePopup-moreBtn"},i.default.t(1333)),p=l.default.createElement(n.default,{a8nText:"popup-controls-report",type:"secondary",onClick:()=>{a()},key:"ReportProductChoicePopup-reportBtn"},i.default.t(1329)),m=l.default.createElement(n.default,{type:"secondary",onClick:u,key:0},i.default.t(1694)),g=l.default.createElement("div",{className:d.default.buttons},l.default.createElement("div",{className:d.default.button},h),l.default.createElement("div",{className:d.default.button},p),l.default.createElement("div",{className:d.default.button},m));return l.default.createElement(o.default,{handlers:{escape:u}},l.default.createElement(s.default,{title:c,actions:g,children:f}))};var l=r(a(67294)),n=r(a(27306)),o=r(a(79766)),i=r(a(66761)),s=r(a(18467)),d=r(a(63665))},32682:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(a(67294)),n=a(96440),o=r(a(97420)),i=r(a(21681)),s=r(a(66761)),d=a(58635),u=a(86989),c=r(a(45454)),f=r(a(94327)),h=a(79665);class p extends i.default{constructor(...e){super(...e),this._submitReason=e=>{var{product:t,sessionId:a}=this.props;return(0,d.logReportProduct)({product:(0,h.unproxy)(t),catalogSessionId:a}),(0,u.reportProduct)(t.catalogWid,t.id.toString(),e)},this.onDelete=()=>{this.end()},this.onReport=e=>{this._onShowSubmittedToast(e)},this.onTellUsMore=()=>{this.push(l.default.createElement(f.default,{onTellUsMoreSubmit:this.onReport,onCancel:this.onCancel}),"none")},this.onPopupCancel=()=>{this.end()},this.onCancel=()=>{this.end()},this._onReportSubmitted=()=>{this.end()},this._onShowSubmittedToast=(e,t=(0,n.genId)())=>{var{product:a,sessionId:r}=this.props,i=this._submitReason(e),u=new n.ActionType(s.default.t(1296)),c=i.then((()=>((0,d.logReportProductSuccess)({product:(0,h.unproxy)(a),catalogSessionId:r}),new n.ActionType(`${s.default.t(1295)}. ${s.default.t(1331)}`)))).catch((()=>((0,d.logReportProductFailure)({product:(0,h.unproxy)(a),catalogSessionId:r}),__LOG__(3)`error submitting product report`,new n.ActionType(s.default.t(1294),{actionText:s.default.t(1347),actionHandler:()=>this._onShowSubmittedToast(e,t)}))));return o.default.openToast(l.default.createElement(n.ActionToast,{id:t,initialAction:u,pendingAction:c})),this._onReportSubmitted(),i}}componentDidMount(){this.push(l.default.createElement(c.default,{onTellUsMore:this.onTellUsMore,onReport:this.onReport,onPopupCancel:this.onPopupCancel,onCancel:this.onCancel}))}}t.default=p},94327:(e,t,a)=>{"use strict";var r=a(20862),l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a(94184)),o=r(a(67294)),i=l(a(27306)),s=l(a(97420)),d=l(a(79766)),u=l(a(66761)),c=l(a(93883)),f=l(a(18467)),h=l(a(22883)),p=r(a(9931)),m=["NO_MATCH","SPAM","ILLEGAL","SCAM","KNOCKOFF","OTHER"];class g extends o.Component{constructor(...e){super(...e),this.state={reason:null},this.handleCancel=()=>{var{onCancel:e}=this.props;e&&e()},this._handleSubmit=()=>{if(!this.state.reason)return this._noSelectionToast();this.props.onTellUsMoreSubmit(this.state.reason)},this._handleReasonChange=e=>{e.target&&e.target.value&&this.setState({reason:e.target.value})}}_noSelectionToast(){s.default.openToast(o.default.createElement(p.default,{msg:u.default.t(1297),id:(0,p.genId)()}))}_renderRadioOptions(){var{reason:e}=this.state;return m.map((t=>o.default.createElement("li",{key:`ReportProductReasonPopup-${t}-option`},o.default.createElement("label",{className:h.default.label},o.default.createElement("input",{type:"radio",name:t,value:t,onChange:this._handleReasonChange,className:h.default.input,checked:e===t}),o.default.createElement(_,{reason:t})))))}render(){var e=u.default.t(1290),t=o.default.createElement("div",{className:(0,n.default)(h.default.section)},o.default.createElement("ul",{className:h.default.reasonList},this._renderRadioOptions())),a=o.default.createElement(i.default,{a8nText:"popup-controls-submit",type:"primary",onClick:this._handleSubmit,key:"ReportProductReasonPopup-submitButton",disabled:!this.state.reason},u.default.t(1293)),r=o.default.createElement(i.default,{type:"secondary",a8nText:"popup-controls-cancel",onClick:this.handleCancel,key:"ReportProductReasonPopup-cancelButton"},u.default.t(1694)),l={escape:this.handleCancel},s=o.default.createElement("div",{className:h.default.buttons},r,a);return o.default.createElement(d.default,{handlers:l},o.default.createElement(f.default,{title:e,actions:s,children:t}))}}function _(e){var{reason:t}=e;switch(t){case"NO_MATCH":return o.default.createElement(c.default,{id:1288});case"SPAM":return o.default.createElement(c.default,{id:1292});case"ILLEGAL":return o.default.createElement(c.default,{id:1286});case"SCAM":return o.default.createElement(c.default,{id:1291});case"KNOCKOFF":return o.default.createElement(c.default,{id:1287});case"OTHER":return o.default.createElement(c.default,{id:1289});default:throw new Error(`Invalid reason: ${t}`)}}t.default=g,g.displayName="ReportProductReasonPopup"},4631:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({isEditMode:e,catalog:t,subtitle:a,hideIncompleteRows:r,productsToShow:f,businessProfile:h}){return l.default.createElement(i.default,{onProductDetail:function(t){if(e)s.default.openModal(l.default.createElement(c.default,null));else{var a=new URL((0,u.default)(t.url,"product.url"),`https://${d.default.HOSTNAME.FACEBOOK}`);n.default.open(String(a))}},onProductCatalog:function(){e?s.default.openModal(l.default.createElement(c.default,null)):(0,o.goToShop)(h)},catalog:t,subtitle:a,hideIncompleteRows:r,productsToShow:f,showShopsLogo:!0})};var l=r(a(67294)),n=r(a(90075)),o=a(84442),i=r(a(19049)),s=r(a(97420)),d=r(a(46274)),u=r(a(43745)),c=r(a(12546))},784:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.RingTheme=void 0;var l=r(a(67154)),n=r(a(94184)),o=r(a(67294)),i=r(a(42138)),s=r(a(53233)),d=a(54302).Mirrored(["STATUS_V3_PANEL","BUSINESS_CONTACT_INFO"]);t.RingTheme=d;function u(e){var{stroke:t,size:a}=e,r=(0,s.default)(e.statusV3,["unreadCount","totalCount","contact"]),u=e=>{var a=100+t;return o.default.createElement("circle",(0,l.default)({cx:a/2,cy:a/2,r:50,fill:"none",strokeLinecap:"round",strokeWidth:t},e))},c=(e,t,a,r)=>{for(var l="",n=0;n<e;n++)l+=n===e-1?`${t} ${a-e*(r+t)+r} `:`${t} ${r} `;return l},f=100+t,h=r.totalCount,p=10,m=50*Math.PI*2;m-10*h<1&&(p=m/h/1.2);var g,_,v=(m-p*h)/h,C=m/4-p/2,E=r.contact.isMe?0:r.unreadCount,S=h-E;if(E){var P,y=C+h*(p+v);1!==h&&(P=c(E,v,m,p)),g=u({strokeDashoffset:y,strokeDasharray:P,className:i.default.unread})}if(S){var T,I=C+S*(p+v);1!==h&&(T=c(S,v,m,p)),_=u({strokeDashoffset:I,strokeDasharray:T,className:i.default.read})}return o.default.createElement("svg",{className:(0,n.default)({[i.default.statusV3PanelRing]:e.theme===d.STATUS_V3_PANEL,[i.default.businessContactInfoRing]:e.theme===d.BUSINESS_CONTACT_INFO}),width:a,height:a,viewBox:`0 0 ${f} ${f}`},g,_)}u.defaultProps={size:48,stroke:4,theme:d.STATUS_V3_PANEL};var c=u;t.default=c},30122:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.setupStatusV3Controller=function(e,t){if(e){if(e.type===o.default.TYPE.IMAGE){var a=4500;return(0,l.default)(t.caption)||(a+=2e3*Math.min(t.caption.length/150,1)),new s(a)}return e.type===o.default.TYPE.VIDEO?t.isGif?new u:new i.default:new s(3e3)}if(t.type===n.default.MSG_TYPE.CHAT){var r=2e3+60*Math.min(t.body.length,1e3);return new s(r)}return new s(3e3)},t.StatusV3GifController=t.StatusV3CountdownController=void 0;var l=r(a(41609)),n=r(a(46274)),o=r(a(23223)),i=r(a(12990));class s{constructor(e){this.addListeners=(e,t,a)=>{this._onStart=e,this._onPause=t,this._onEnded=a},this.removeListeners=()=>{this._onStart=void 0,this._onPause=void 0,this._onEnded=void 0},this.play=()=>{if(this._timer)__LOG__(2)`Duplicate timer start`;else{this._timer=setTimeout(this._onTimeup,this._timeout),this._start=(new Date).getTime();var e=this._onStart;e&&e(this._timeout,this._duration)}},this.stop=()=>{if(this._timer){clearTimeout(this._timer),this._timer=null;var e=(new Date).getTime();this._timeout-=e-this._start;var t=this._onPause;t&&t()}else __LOG__(2)`Timer stop called on stopped timer`},this.resume=()=>{this.play()},this.pause=()=>{this.stop()},this._onTimeup=()=>{var e=this._onEnded;e&&e()},this._duration=e,this._timeout=this._duration,this._start=0}get duration(){return this._duration}}t.StatusV3CountdownController=s;var d=6e3;class u{constructor(){this.removeListeners=()=>{this._onStart=void 0,this._onPause=void 0,this._onEnded=void 0,this._videoController.removeListeners(),this._countdownController.removeListeners()},this.setVideo=(e,t)=>{this._video!==e&&(this._video=e,null!=t&&(this._duration=t),this._videoController.setVideo(e))},this._onVideoStartHandler=()=>{var e=this._video;if(null!=e){var t=this._onStart,a=e.duration||this._duration,r=Math.max(3*a*1e3,d);t&&t(r-1e3*a*this._playCounter-1e3*e.currentTime,r)}},this._onVideoPauseHandler=()=>{var e=this._onPause;e&&e()},this._onVideoEndedHandler=()=>{var e=this._video;if(null!=e){this._playCounter++;var t=this._onEnded;3===this._playCounter&&(this._videoEnded=!0,this._timerEnded&&t&&t()),e.currentTime=0,this._videoEnded&&this._timerEnded||setTimeout((()=>{this._videoController.play()}),0)}},this._onTimerEndedHandler=()=>{var e=this._onEnded;this._timerEnded=!0,e&&this._videoEnded&&e()},this.play=()=>{this._videoController.play(),this._countdownController.play()},this.stop=()=>{this._videoController.stop(),this._countdownController.stop()},this.resume=()=>{this._videoController.resume(),this._countdownController.resume()},this.pause=()=>{this._videoController.pause(),this._countdownController.pause()},this._playCounter=0,this._timerEnded=!1,this._videoEnded=!1,this._videoController=new i.default,this._countdownController=new s(d),this._videoController.addListeners(this._onVideoStartHandler,this._onVideoPauseHandler,this._onVideoEndedHandler),this._countdownController.addListeners(void 0,void 0,this._onTimerEndedHandler)}addListeners(e,t,a){this._onStart=e,this._onPause=t,this._onEnded=a}get duration(){return Math.max(3*(this._video&&this._video.duration||this._duration)*1e3,d)}}t.StatusV3GifController=u},62568:(e,t,a)=>{"use strict";var r=a(20862),l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a(94184)),o=r(a(67294)),i=l(a(86981)),s=l(a(34466)),d=l(a(36708));class u extends o.Component{constructor(){super(...arguments),this._setRefBar=e=>{this._refBar=e},this.handleClick=e=>{this.props.onClick&&this.props.onClick(e)},this.handleStart=(e,t)=>{if(this._refBar){var a=1e3*i.default.statusVideoMaxDuration,r=Math.min(e,a),l=Math.min(t,a);(0,d.default)(this._refBar,"stop"),this._barAnimation=(0,d.default)(this._refBar,{translateX:["0%",`-${r/l*100}%`]},{duration:r,easing:"linear"})}},this.handlePause=()=>{this._refBar&&(0,d.default)(this._refBar,"stop")},this.handleEnded=()=>this._barAnimation?this._barAnimation:Promise.resolve(),__LOG__(2)`Current index: ${this.props.current}, total count: ${this.props.total}`,this.props.current>=0&&this.props.current<this.props.total||(__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("bad current status v3 index"))}render(){for(var e=this,t=[],a=100/this.props.total+"%",r=function(r){var l=(0,n.default)(s.default.foreground,{[s.default.filled]:r<e.props.current,[s.default.empty]:r>e.props.current,[s.default.active]:r===e.props.current}),i=o.default.createElement("div",{className:s.default.wrapper,style:{width:a},key:r,onClick:()=>e.handleClick(r)},o.default.createElement("div",{className:s.default.bg}),o.default.createElement("div",{className:s.default.mask},o.default.createElement("div",{className:l,ref:r===e.props.current?e._setRefBar:()=>{}})));t.push(i)},l=0;l<this.props.total;++l)r(l);return o.default.createElement("div",{className:s.default.container},t)}}t.default=u,u.displayName="StatusV3ProgressBar"},83154:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({seenCount:e}){if(null!=e)return l.default.createElement("div",{className:o.default.container},l.default.createElement(i.default,{name:"status-v3-seen",className:o.default.iconSeen}),l.default.createElement("div",{className:o.default.seenCount},e));return l.default.createElement(n.default,{stroke:3,size:12})};var l=r(a(67294)),n=r(a(17363)),o=r(a(38074)),i=r(a(62745))},32532:(e,t,a)=>{"use strict";var r=a(20862),l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.StatusV3MsgNotFound=t.StatusV3LoadingError=t.InvalidStatusV3Iterator=void 0;var n=l(a(57043)),o=l(a(44908)),i=l(a(35161)),s=a(73591),d=a(60561),u=a(37776),c=l(a(23519)),f=r(a(19931));class h extends((0,u.customError)("InvalidStatusV3Iterator")){}t.InvalidStatusV3Iterator=h;class p extends((0,u.customError)("StatusV3LoadingError")){}t.StatusV3LoadingError=p;class m extends((0,u.customError)("StatusV3MsgNotFound")){}t.StatusV3MsgNotFound=m;t.default=class{constructor(e,t){if(this._printInfo=()=>{this.statuses.forEach((e=>{__LOG__(2)`Total count: ${e.totalCount}, unread count: ${e.unreadCount}, msgs length: ${e.msgs.length}`}))},this.getFirstUnread=(e,t,a)=>{var r=this.statuses.findIndex((t=>t.statusV3===e));if(-1!==r){var l,n=this.statuses[r],o=n.readMsgKeys;return a?(l=n.msgs?n.msgs.findIndex((e=>a&&e.id.toString()===a.toString())):-1)>=0?Promise.resolve({msgIdx:l,statusIdx:r}):Promise.reject(new h):-1===(l=n.msgs?n.msgs.findIndex((e=>!o.includes(e.id.toString()))):-1)&&e.msgs.msgLoadState.noEarlierMsgs?(l=t?0:n.msgs.length-1,Promise.resolve({msgIdx:l,statusIdx:r})):-1!==l?Promise.resolve({msgIdx:l,statusIdx:r}):0===n.unreadCount&&t&&n.msgs.length>0?Promise.resolve({msgIdx:0,statusIdx:r}):this._fetchMore(e).then((()=>this.getFirstUnread(e,t,a))).catch((e=>(__LOG__(3)`error while getting first unread status: ${String(e)}`,Promise.reject(new h))))}return Promise.reject(new h)},this.hasNext=e=>{var t=this.statuses[e.statusIdx];return e.msgIdx+1<t.totalCount||e.statusIdx+1<this.statuses.length},this.getNext=e=>{var t=this.statuses[e.statusIdx],a=t.statusV3;if(e.msgIdx+1<t.totalCount&&e.msgIdx+1<t.msgs.length)return Promise.resolve({msgIdx:e.msgIdx+1,statusIdx:e.statusIdx});if(e.msgIdx+1<t.totalCount)return a.msgs.msgLoadState.noEarlierMsgs?(__LOG__(3)`Loaded ${t.msgs.length} messages with total count ${t.totalCount}, but noEarlierMsgs set`,Promise.reject(new h)):this._fetchMore(a).then((()=>this.getNext(e))).catch((t=>{if(__LOG__(3)`error while loading more status msgs: ${String(t)}`,e.statusIdx+1<this.statuses.length){var a=this.statuses[e.statusIdx+1].statusV3;return this.getFirstUnread(a,!0)}return Promise.reject(new h)}));if(e.statusIdx+1<this.statuses.length){var r=this.statuses[e.statusIdx+1].statusV3;return this.getFirstUnread(r,!0)}return Promise.reject(new h)},this.hasPrev=e=>e.msgIdx>0||e.statusIdx>0,this.getPrev=e=>{if(e.msgIdx>0)return Promise.resolve({msgIdx:e.msgIdx-1,statusIdx:e.statusIdx});if(e.statusIdx>0){var t=this.statuses[e.statusIdx-1].statusV3;return this.getFirstUnread(t,!1)}return Promise.reject(new h)},this.statusAt=(e,t)=>{var a=this.statuses[e.statusIdx],r=a.statusV3;return t<a.msgs.length?Promise.resolve({msgIdx:t,statusIdx:e.statusIdx}):r.msgs.msgLoadState.noEarlierMsgs?Promise.reject(new h):this._fetchMore(r).then((()=>this.statusAt(e,t))).catch((e=>(__LOG__(3)`error while loading more status msgs: ${String(e)}`,Promise.reject(new h))))},this._fetchMore=e=>(0,d.promiseLoop)(((t,a,r)=>{var l=(0,s.delayMs)(f.expBackoff(r,12e4,1e3,.1));return e.loadMore().then((()=>{var a=this.statuses.findIndex((t=>t.statusV3===e));if(-1!==a){var s=this.statuses[a],d=s.totalCount,u=s.unreadCount,c=e.msgs.getModelsArray().slice(0,d),f=c.slice(0,d-u),h=(0,i.default)(f,(e=>e.id.toString()));s.msgs=c,s.readMsgKeys=(0,o.default)((0,n.default)(s.readMsgKeys,h)),t(!0)}else{if(!(r>=4))return l;t(!1)}})).catch((()=>{if(!(r>=4))return l;t(!1)}))})).then((e=>{if(!e)throw new p})),t){var a=e.msgs.getModelsArray().find((e=>t&&e.id.toString()===t.toString()));if(!a)throw new m;this.statuses=[{statusV3:e,totalCount:1,unreadCount:0,msgs:[a],readMsgKeys:[a.id.toString()]}]}else if(e.unreadCount>0&&!e.contact.isMe&&!e.contact.statusMute){var r=c.default.getUnexpired(!0),l=[];r.forEach((e=>{if(!e.contact.statusMute){var t=e.msgs.getModelsArray(),a=e.totalCount-e.unreadCount,r=t.slice(0,a),n=(0,i.default)(r,(e=>e.id.toString()));l.push({statusV3:e,totalCount:e.totalCount,unreadCount:e.unreadCount,msgs:t,readMsgKeys:n})}})),this.statuses=l}else{var u=e.msgs.getModelsArray(),g=e.totalCount-e.unreadCount,_=u.slice(0,g),v=(0,i.default)(_,(e=>e.id.toString())),C=[{statusV3:e,totalCount:e.totalCount,unreadCount:e.unreadCount,msgs:u,readMsgKeys:v}];this.statuses=C}this._printInfo()}}},12990:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(a(86981));function n(e){return Math.min(e,l.default.statusVideoMaxDuration)}var o=class{constructor(){this.addListeners=(e,t,a)=>{this._onStart=e,this._onPause=t,this._onEnded=a},this.setVideo=e=>{this._video!==e&&(this._unsetVideo(),this._video=e,null!=e&&(e.addEventListener("playing",this._onPlayingHandler),e.addEventListener("pause",this._onPauseHandler),e.addEventListener("ended",this._onEndedHandler),e.addEventListener("timeupdate",this._onTimeUpdate)))},this._unsetVideo=()=>{var e=this._video;e&&(this.stop(),e.removeEventListener("playing",this._onPlayingHandler),e.removeEventListener("pause",this._onPauseHandler),e.removeEventListener("ended",this._onEndedHandler),e.removeEventListener("timeupdate",this._onTimeUpdate))},this.play=()=>{this._video&&this._video.play()},this.pause=()=>{this._video&&!this._video.paused&&this._video.pause()},this.resume=()=>{this._video&&this._video.play()},this.stop=()=>{this._video&&!this._video.paused&&this._video.pause()},this._onPlayingHandler=()=>{var e=this._video;if(null!=e){var t=this._onStart;if(t){var a=n(e.duration);t(1e3*(a-e.currentTime),1e3*a)}}},this._onPauseHandler=()=>{var e=this._onPause;e&&e()},this._onEndedHandler=()=>{var e=this._onEnded;e&&e()},this._onTimeUpdate=()=>{var e,t=null===(e=this._video)||void 0===e?void 0:e.currentTime;if(null!=t&&t>=l.default.statusVideoMaxDuration){this.stop(),this._onEndedHandler();var a=this._video;a&&(a.removeEventListener("timeupdate",this._onTimeUpdate),a.removeEventListener("ended",this._onEndedHandler))}},this.removeListeners=()=>{this.stop(),this._onStart=void 0,this._onPause=void 0,this._onEnded=void 0}}get duration(){return null==this._video?0:1e3*n(this._video.duration)}};t.default=o},38923:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){window.getSelection().removeAllRanges();var t=document.getElementById(e),a=document.createRange();t&&a.selectNode(t),window.getSelection().addRange(a);try{var r=document.execCommand("copy");return window.getSelection().removeAllRanges(),r}catch(e){return!1}}},63030:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(a(81109)),n=a(78980),o=a(28757),i={};i[n.ExtendedTextMessageFontType.SERIF]={google:{families:["Roboto"]}},i[n.ExtendedTextMessageFontType.SANS_SERIF]={google:{families:["Droid Serif"]}},i[n.ExtendedTextMessageFontType.NORICAN_REGULAR]={google:{families:["Norican"]}},i[n.ExtendedTextMessageFontType.BRYNDAN_WRITE]={custom:{families:["Bryndan-Write"]}},i[n.ExtendedTextMessageFontType.OSWALD_HEAVY]={google:{families:["Oswald:bold"]}};var s={};s[n.ExtendedTextMessageFontType.BRYNDAN_WRITE]=`@font-face {font-family:"Bryndan-Write"; src:url("${o}") format("truetype");}`;var d=new class{constructor(){this.loadedFonts={},this.loadingPromise={}}load(e){if(this.loadedFonts[e])return Promise.resolve();if(this.loadingPromise[e])return this.loadingPromise[e];var t=i[e],a=s[e],r=(a?new Promise(((e,t)=>{var r=document.createElement("style");r.appendChild(document.createTextNode(a)),r.onload=e,r.onerror=t,document.head&&document.head.appendChild(r)})):Promise.resolve()).then((()=>new Promise(((a,r)=>{var n=(0,l.default)((0,l.default)({},t),{},{active:()=>{this.loadedFonts[e]=!0,a()},inactive:()=>{this.loadingPromise[e]=void 0,r("Failed to load font: "+e)}});WebFont.load(n)}))));return this.loadingPromise[e]=r,r}loadAllFonts(){return Promise.all(Array.from(n.ExtendedTextMessageFontType.members()).map((e=>this.load(e))))}};t.default=d},29594:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return n.default.supportsFeature(n.default.F.RICH_TEXT)?(0,l.default)(e,s,i.TextSerializer):e};var l=r(a(69256)),n=r(a(60246)),o=a(85371),i=a(51035),s=o.Configuration.ComposeBox()},42473:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createProductLink=function(e,t){return`https://wa.me/p/${t}/${e}`},t.createCatalogLink=function(e){return`https://wa.me/c/${e}`}},46822:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.dayToWeekday=s,t.businessHoursFromConfig=d,t.getWebsiteLink=function(e){return`https://l.wl.co/l?u=${encodeURIComponent(e)}`},t.getBusinessHours=function(e){var{config:t}=e,a=(new Date).getDay();return n.DAYS_OF_WEEK.map(((e,r)=>{var l=(a+r)%n.DAYS_OF_WEEK.length,o=n.DAYS_OF_WEEK[l];return{day:s(l),hours:d(t[o]),first:0===r}}))},t.getBusinessHoursForEdit=function(e){var t,a=null==e?{}:e.config,{note:r,timezone:o}=e||{},s=n.DAYS_OF_WEEK.map(((e,r)=>{var n,o=a[e],s=l.default.weekdays(r);return o&&(t=o.mode,o.hours&&(n=o.hours.map((([e,t])=>[(0,i.minutesToTime)(e),(0,i.minutesToTime)(t)])))),{dayName:s,dayKey:e,closed:!o,hours:n}})),d=l.default.weekdays(!0,0),u=l.default.weekdays().indexOf(d),c=s.splice(u);return{mode:t,days:[...c,...s],timezone:o,note:r}},Object.defineProperty(t,"minutesToTime",{enumerable:!0,get:function(){return i.minutesToTime}}),Object.defineProperty(t,"timeStringToMinutes",{enumerable:!0,get:function(){return i.timeStringToMinutes}});var l=r(a(30381)),n=a(72203),o=r(a(66761)),i=a(63265);function s(e){return l.default.weekdays(e)}function d(e){switch(e&&e.mode){case n.BUSINESS_HOUR_MODES.SPECIFIC_HOURS:return e&&e.hours?e.hours.map((e=>e.map(i.minutesToTime).join(" - "))).join("\n"):"";case n.BUSINESS_HOUR_MODES.APPOINTMENT_ONLY:return o.default.t(358);case n.BUSINESS_HOUR_MODES.OPEN_24H:return o.default.t(370);default:return o.default.t(359)}}},63265:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.minutesToTime=function(e){return l.default.utc().startOf("day").add(e,"minutes").format(n.default.timestampStrFormat())},t.timeStringToMinutes=void 0;var l=r(a(30381)),n=r(a(56656)),o=["h:mm A","h:mmA","HH:mm","HH.mm","H:mm","H.mm"];t.timeStringToMinutes=e=>{var t,a=e.trim();if(a){for(var r of o){var n=(0,l.default)(a,r,!0);if(n.isValid()){t=n;break}}if(t){var i=t,s=(0,l.default)().startOf("day"),d=i.diff(s);return l.default.duration(d).asMinutes()}}}},28757:(e,t,a)=>{e.exports=a.p+"bryndan_write_20e48b2ec8c64b2a1ceb5b28d9bcc9d0.ttf"},68862:(e,t,a)=>{"use strict";a.r(t),t.default={coverPhoto:"_3_2za",isEditable:"_1aFdX",avatar:"_3RULU",noStatusBorder:"_3xp59",hasStatusBorder:"IYr2u"}},91378:(e,t,a)=>{"use strict";a.r(t),t.default={cartIcon:"PKmps",inheritColor:"qM2C3"}},63696:(e,t,a)=>{"use strict";a.r(t),t.default={carousel:"alksS",contentContainer:"OkAlG",slidesContainer:"_1w5W1",loaded:"j1J2j",fadeIn:"_2QkLV",spinnerContainer:"_1kDDe",spinner:"_3j4fM"}},89882:(e,t,a)=>{"use strict";a.r(t),t.default={slide:"_2MjCA",slideInnerContainer:"_2cG76",image:"ubkU5"}},86281:(e,t,a)=>{"use strict";a.r(t),t.default={canvasComponent:"_2hvhy",canvasEmpty:"K5agt",canvasSecondRow:"_1oFnY",canvasFirst:"_35MQv",more:"_1s12y",container:"BPtzo",justifySpaceBetween:"_1BP_C",galleryEmpty:"_3l3Pp",drawer:"_3rdfe",drawerBody:"_3COK4"}},20720:(e,t,a)=>{"use strict";a.r(t),t.default={mediaCanvas:"_7xcOR",shade:"_3t-Dc",iconType:"_3SfD8",iconStar:"qSojz",mediaCanvasDuration:"_2ENh_",shadeTop:"kt7p8",canvasBody:"_2pnVj",canvasSelected:"xRcWX",mediaSelect:"_2GKAW",canvasComponent:"_3_8JL",canvasSecondRow:"_2j2vv",viewerFlow:"q0PwG",active:"_2IToT",viewerFlowTransparent:"_1Brnl"}},34435:(e,t,a)=>{"use strict";a.r(t),t.default={icon:"_23QTJ",disabled:"iP9Fm",transparent:"_2HMfd",compact:"_25tj-"}},18310:(e,t,a)=>{"use strict";a.r(t),t.default={labelRow:"_1_9J2",standaloneLabelRow:"_2Lv1o",labelContainer:"_3A-ba",standaloneLabelContainer:"_34ojr"}},39935:(e,t,a)=>{"use strict";a.r(t),t.default={section:"_17dED",control:"_3T0RE"}},16115:(e,t,a)=>{"use strict";a.r(t),t.default={icon:"_2I7Gg"}},89600:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_2QzJd",containerNoIcon:"_1EaD-",containerListAligned:"_1I4H7",icon:"_13qOF",danger:"_1O1hL",success:"x8B-w",bodyContainer:"_36Lzk",body:"Qy5WW"}},18482:(e,t,a)=>{"use strict";a.r(t),t.default={actionText:"_3nrbz"}},99597:(e,t,a)=>{"use strict";a.r(t),t.default={mediaPanelTools:"f3Dup",profileThumb:"_2xUs5",profileContainer:"Cq6XJ",media:"_1_TZb",profileViewer:"_3OWRM",profileViewerImg:"_2hH_e",container:"_9-YHG","media-viewer-animate":"_7DTuk",mediaViewerAnimate:"_7DTuk",headerContainer:"_1U_13"}},17932:(e,t,a)=>{"use strict";a.r(t),t.default={icon:"woEzZ"}},7200:(e,t,a)=>{"use strict";a.r(t),t.default={icon:"_1eLBZ"}},78654:(e,t,a)=>{"use strict";a.r(t),t.default={container:"xWfq_",popupPanel:"B7YnW",wrapper:"_35Bca",emojiIcon:"_1nsaN",sendIcon:"dJI7Y",lineWrapper:"_2X8K7"}},11780:(e,t,a)=>{"use strict";a.r(t),t.default={playerWrapper:"_1E241",mediaViewer:"_19K91",mediaStateControls:"_12QEi",playerBackground:"_20Ki1",media:"Kr9Tk",captionBackdrop:"_43j_5",mediaCaption:"_3yP6V",progressBackdrop:"_21bEk",progressBarBackdropNarrow:"_2paot",profile:"_1Oh7Z",nonClickProfile:"_3AuES",profileNarrow:"_2iahT",playerAvatar:"_19BWt",measuringProfile:"nF1-N",profileMac:"_1At-O",msgInfo:"_2LKvA",msgInfoName:"_3VYz8",timestamp:"_2tXxE",playerContent:"_2MwhR",statusPanelPlayerContent:"_2HrM5",statusThumbnailPlayerContent:"_1CbQs",loading:"_3e8Or",v3Image:"_1pf64",v3Video:"_3uHZH",text:"ecFHI",textLarge:"nRSvd",textMedium:"_1WIYL",textSmall:"_1PvQk",font_1:"_2b6no",font1:"_2b6no",font_2:"_3KLoY",font2:"_3KLoY",font_3:"_2LoU3",font3:"_2LoU3",font_5:"wQ88j",font5:"wQ88j",unknown:"_3-Nhy",seen:"_1PF3_",textThumbnailPlayerContent:"_3wxAA"}},18914:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_1ufTj",inputContainer:"_1rO5S",btnContainer:"_3KRZ3",btnPosition:"D6yuB"}},71801:(e,t,a)=>{"use strict";a.r(t),t.default={chevron:"_23hMF",catalogEntryButton:"_3GuCY",subtitle:"_3nHWT",addIcon:"_2bk1N",placeholderThumb:"_1yVu_",largeGallerySpacing:"_2VRfc",shopsLogo:"taQA_"}},56107:(e,t,a)=>{"use strict";a.r(t),t.default={prompt:"_1MKrR"}},93277:(e,t,a)=>{"use strict";a.r(t),t.default={linkIcon:"_3n54f",inheritColor:"dF0c_"}},36074:(e,t,a)=>{"use strict";a.r(t),t.default={linkContainer:"_36niN",activeLink:"_218Ww"}},79184:(e,t,a)=>{"use strict";a.r(t),t.default={addItemButton:"_2e394",themeInList:"_2tMVN",themeCollections:"_1AeNq",themeDefault:"_28K_k",addIcon:"_3UMBX"}},65491:(e,t,a)=>{"use strict";a.r(t),t.default={pendingBanner:"_3oeDZ",iconContainerPending:"_1lkig",iconContainerRejected:"NHVOL",rejectedBanner:"_14t2G"}},56538:(e,t,a)=>{"use strict";a.r(t),t.default={header:"_361SI",list:"_300on"}},80092:(e,t,a)=>{"use strict";a.r(t),t.default={list:"_1x_gj",addItemsNotice:"_3uGr0"}},97076:(e,t,a)=>{"use strict";a.r(t),t.default={collectionListItem:"V0C2k",reviewStateRejected:"_22_86"}},44134:(e,t,a)=>{"use strict";a.r(t),t.default={body:"_3I775",loadingContainer:"AOdvD",text:"_2yxqg",loadingText:"_38kp2",shiftUp:"_1gMAq",availabilityBanner:"_32wIk"}},55675:(e,t,a)=>{"use strict";a.r(t),t.default={buttonContainer:"_1IcSo",button:"_2I8rD",addToCartButton:"_1jLhq",addToCartIcon:"PoXRl",addToCartIconDisabled:"_3l5-l",addToCartContainer:"_3shFG",name:"_1l7n8",price:"_27spI",originalPrice:"_1DYEx",description:"_2f0i8",more:"Jjucz",descBlock:"_2IFFX"}},13906:(e,t,a)=>{"use strict";a.r(t),t.default={productImage:"_3rmhv",productImageContainer:"_1E8LA",productThumb:"_3HQ90",productThumbContainer:"_6O-Qy",prompt:"_3K3du"}},8685:(e,t,a)=>{"use strict";a.r(t),t.default={header:"_9UV-x",list:"_8UHUF"}},77440:(e,t,a)=>{"use strict";a.r(t),t.default={header:"_1fhXS",photo:"_1XF90",text:"_3oXCf",name:"_3o6p1",description:"_2OTQS",spinner:"_2Fceq",img:"sz61d"}},53584:(e,t,a)=>{"use strict";a.r(t),t.default={imageCarouselContainer:"_33-Dh"}},63665:(e,t,a)=>{"use strict";a.r(t),t.default={buttons:"wH7Ij",button:"_2Na0-"}},22883:(e,t,a)=>{"use strict";a.r(t),t.default={section:"_3KLwP",reasonList:"CsJ_u",label:"KvCZU",input:"_3uXLe",buttons:"_1VUcX"}},42138:(e,t,a)=>{"use strict";a.r(t),t.default={statusV3PanelRing:"cFfKt",businessContactInfoRing:"_3EL6s",read:"_3tgk6",unread:"_1min4"}},34466:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_3b17O",wrapper:"sZBni",mask:"_3CRhO",bg:"_3r7AV",foreground:"_3f8oh",filled:"_3t0iC",empty:"_1A2HZ",active:"_2gskD"}},38074:(e,t,a)=>{"use strict";a.r(t),t.default={iconSeen:"_1VGOo",seenCount:"_1QbZj",container:"PP_R1"}}}]);