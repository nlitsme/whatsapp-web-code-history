/*! Copyright (c) 2022 WhatsApp Inc. All Rights Reserved. */
(self.webpackChunkwhatsapp_web_client=self.webpackChunkwhatsapp_web_client||[]).push([[6673],{158114:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JobBuilder=void 0,t.definePersistedJob=function(){return new i([])};var r=n(247901),s=n(892844);class i{constructor(e){this.steps=e}step(e,t){return this._stepWithOptions(e,"function"==typeof t?{code:t}:t)}_stepWithOptions(e,t){const{stopRetryIf:n,requirements:a,code:d}=t;let p=u(a,d,n);if(n){const{timePassedSeconds:e,appCrashed:t,onStopRetry:i}=n,a=u(null,function(e){return(t,n,s)=>Promise.resolve(e(t,n,s)).then((e=>e instanceof r.InterruptJob?e:new r.InterruptJob(e)))}(i),n);null!=e&&(p=o(((t,n,r)=>{let{jobStartTime:i}=r;return(0,s.happenedWithin)(i,e)}),p,a)),t&&(p=o(((e,t,n)=>{let{afterCrash:r}=n;return!r}),p,a))}return new i([...this.steps,{stepName:e,info:p}])}finalStep(e,t){const n=this.step(e,t);return{end:()=>n.steps}}}function o(e,t,n){return(r,s,i)=>e(r,s,i)?t(r,s,i):n(r,s,i)}function u(e,t,n){const r={requirements:e,code:t,stopRetryIf:n};return()=>r}t.JobBuilder=i},647292:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defineWebPersistedJob=function(){return(0,r.definePersistedJob)()};var r=n(158114)},446673:(e,t,n)=>{"use strict";var r=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.QueryGetSignedUserInfo=void 0;var s=r(n(348926)),i=n(736184),o=n(831914),u=n(471914),a=n(492574),d=n(696055),p=n(647292),c=n(745454);function l(e,t){var n;return null==e||null===(n=e.maybeChild(t))||void 0===n?void 0:n.contentString()}const f=new u.WapParser("getSignedUserInfoResponse",(e=>{e.assertTag("iq"),e.assertFromServer();const t=e.maybeChild("signed_user_info");return{phoneNumber:l(t,"phone_number"),phoneNumberSignatureExpiration:l(t,"ttl_timestamp"),phoneNumberSignature:l(t,"phone_number_signature"),businessDomain:l(t,"business_domain")}})),b=(0,p.defineWebPersistedJob)().finalStep("sendStanza",function(){var e=(0,s.default)((function*(e){let{businessJid:t}=e;const n=(0,o.wap)("iq",{to:o.S_WHATSAPP_NET,type:"get",xmlns:"w:biz:catalog",id:(0,o.generateId)()},(0,o.wap)("signed_user_info",{biz_jid:(0,d.USER_JID)((0,c.createWid)(t))})),r=yield(0,i.sendIq)(n,f);if(!r.success)throw new a.ServerStatusCodeError(r.errorCode);return r.result}));return function(){return e.apply(this,arguments)}}()).end();t.QueryGetSignedUserInfo=b}}]);
//# sourceMappingURL=https://web.whatsapp.com/6673.bba28ee1044ebb33bc8d.js.map
