/*! Copyright (c) 2022 WhatsApp Inc. All Rights Reserved. */
(self.webpackChunkwhatsapp_web_client=self.webpackChunkwhatsapp_web_client||[]).push([[275],{199701:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findArrayDiff=void 0;const n=function(e,t){return function(e,t,n){let a=t.length,r=n.length;const o={sequence:[],indices1:[],indices2:[]};for(;0!==a&&0!==r;)t[a-1]===n[r-1]?(o.sequence.unshift(t[a-1]),o.indices1.unshift(a-1),o.indices2.unshift(r-1),--a,--r):e[a][r-1]>e[a-1][r]?--r:--a;return o}(function(e,t){const n=e.length,a=t.length,r=Array(n+1).fill().map((()=>Array(a+1).fill(0)));for(let o=1;o<n+1;o++)for(let n=1;n<a+1;n++)e[o-1]===t[n-1]?r[o][n]=r[o-1][n-1]+1:r[o][n]=Math.max(r[o-1][n],r[o][n-1]);return r}(e,t),e,t)};t.findArrayDiff=function(e,t){const a={moved:[],inserted:[],removed:[]},r=e.length,o=t.length,{commonHead:i,commonTail:l}=function(e,t){let n=0,a=0;const r=e.length,o=t.length;for(;n<r&&n<o&&e[n]===t[n];)n++;for(;a+n<r&&a+n<o&&e[r-1-a]===t[o-1-a];)a++;return{commonHead:n,commonTail:a}}(e,t);if(i+l===r){if(r===o)return a;for(let e=i;e<o-l;e++)a.inserted.push([t[e],e]);return a}if(i+l===o){for(let t=i;t<r-l;t++)a.removed.push([e[t],t]);return a}const s=n(e.slice(i,r-l),t.slice(i,o-l));for(let t=i;t<r-l;t++)s.indices1.indexOf(t-i)<0&&a.removed.push([e[t],t]);for(let n=i;n<o-l;n++){if(s.indices2.indexOf(n-i)<0){let r=!1;a.removed.forEach(((o,i,l)=>{let[s,d]=o;if(e[d]===t[n])return a.moved.push([s,d,n]),l.splice(i,1),void(r=!0)})),r||a.inserted.push([t[n],n])}}return a}},121692:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.trimStart=t.trimEnd=t.trim=void 0;const n=new Set(["\0","\t","\n","\v","\f","\r"," ",""," "," "," "," "," "," "," "," "," "," "," "," "," ","​","\u2028","\u2029"," "," ","　"]);t.trim=e=>a(e,!0,!0);t.trimStart=e=>a(e,!0,!1);function a(e,t,a){let r=0,o=e.length;if(t)for(;r<o&&n.has(e.charAt(r));)r++;if(a){const a=t?r:-1;for(;o-1>a&&n.has(e.charAt(o-1));)o--}return r===o?"":0===r&&o===e.length?e:e.slice(r,o)}t.trimEnd=e=>a(e,!1,!0)},793021:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.addQuickReply=function(e){e.id=(0,o.default)();const t=i.QuickReplyCollection.add(e)[0];return Promise.resolve((0,r.default)(t,"addedQuickReply"))},t.deleteQuickReply=function(e){const t=i.QuickReplyCollection.remove(e.id)[0];return Promise.resolve((0,r.default)(t,"deletedQuickReply"))},t.editQuickReply=function(e){const t=i.QuickReplyCollection.add(e,{merge:!0})[0];return Promise.resolve((0,r.default)(t,"updatedQuickReply"))};var r=a(n(145095)),o=a(n(265597)),i=n(999662)},643327:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.cartItemCollection.reset(),e.set("message",void 0),e.trigger("change:cartItemCollection"),(0,r.default)(e)};var r=a(n(886877))},733993:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.createProductFromRefreshCartItem=y,t.isPriceMatch=C,t.matchCartItemsToProducts=function(e,t){const n=f.CatalogCollection.get((0,d.createWid)(e.id)),a=[],r=[];let u=!0;n&&e.cartItemCollection.forEach((i=>{const l=n.productCollection.get(i.id);let s=t&&t.products.find((e=>e.id===i.id));if(s=function(e,t){if(e&&"deleted"===e.status)return void t.productCollection.remove(e.id);return e}(s,n),!t&&l){const e=function(e,t){const n=function(e,t){return e.priceAmount1000===(0,h.getActivePrice)(t)&&e.currency===t.currency&&e.name===t.name&&e.imageHash===t.imageHash&&e.maxAvailable===t.maxAvailable}(e,t);n||e.set({priceAmount1000:(0,h.getActivePrice)(t),currency:t.currency,name:t.name,imageHash:t.imageHash,maxAvailable:t.maxAvailable},{silent:!0});return n}(i,l);u=u&&e,a.push({product:l,cartItem:i})}else if(s){const t=function(e,t){const n=!t||function(e,t){var n,a;const r=(0,h.getActivePrice)(v(t));return C(e.priceAmount1000,r)&&(!(0,o.isString)(e.currency)&&!(0,o.isString)(t.currency)||e.currency===t.currency)&&e.name===t.name&&e.imageHash===(null===(n=t.media)||void 0===n||null===(a=n.image)||void 0===a?void 0:a.id)}(e,t);if(!n&&t){const n=v(t);e.set({priceAmount1000:(0,h.getActivePrice)(n),currency:n.currency,name:n.name,imageHash:n.imageHash,maxAvailable:n.maxAvailable},{silent:!0})}return n}(i,s);u=u&&t,a.push({product:y(s,e.id),cartItem:i})}else u=!1,r.push(i.id)})),n||(0,i.default)(e);u||(r.length&&e.cartItemCollection.remove(r),e.trigger("change:cartItemCollection"),s.ModalManager.open((0,g.jsx)(c.default,{onOK:()=>{s.ModalManager.close()},children:m.fbt._("One or more items in your cart have been updated",null,{hk:"1jr9xE"})})));return(0,l.default)(e),a},t.parsePrice=x;var r=a(n(81109)),o=n(551737),i=a(n(643327)),l=a(n(886877)),s=n(914597),d=n(745454),u=n(621374),c=a(n(452665)),f=n(599989),p=n(509468),h=n(713151),m=n(548360),g=n(785893);function v(e){var t,n,a,r,o,i,l,s;return{id:e.id,name:null!==(t=e.name)&&void 0!==t?t:"",imageCdnUrl:null===(n=e.media)||void 0===n||null===(a=n.image)||void 0===a?void 0:a.request_image_url,imageHash:null===(r=e.media)||void 0===r||null===(o=r.image)||void 0===o?void 0:o.id,currency:e.currency,priceAmount1000:x(e.price),salePriceAmount1000:x(null===(i=e.sale_price)||void 0===i?void 0:i.price),salePriceStartDate:(0,u.parseDateValue)(null===(l=e.sale_price)||void 0===l?void 0:l.start_date),salePriceEndDate:(0,u.parseDateValue)(null===(s=e.sale_price)||void 0===s?void 0:s.end_date),maxAvailable:e.max_available}}function x(e){return"string"==typeof e?e.length>0?parseInt(e,10):null:e}function C(e,t){const n=x(e),a=x(t);return(0,o.isNumber)(n)&&(0,o.isNumber)(a)?n===a:!(0,o.isNumber)(n)&&!(0,o.isNumber)(a)}function y(e,t){return new p.Product((0,r.default)((0,r.default)({},v(e)),{},{catalogWid:(0,d.createWid)(t),productMsgMediaData:null,imageCount:1,fetchedFromServer:!0,t:Date.now()/1e3,old:!1}))}},662554:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(0===e.cartItemCollection.length)return Promise.resolve({products:[],price:{}});const n=e.cartItemCollection.map((e=>e.id));return(0,r.refreshCart)((0,a.createWid)(e.id),n,o.CartCollection.imageWidth,o.CartCollection.imageHeight,t)};var a=n(745454),r=n(906878),o=n(612392)},481136:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return f.apply(this,arguments)};var r=a(n(348926)),o=n(802331),i=a(n(886877)),l=a(n(680127)),s=n(745454),d=a(n(534949)),u=n(599989);function c(e){var t,n;const a=e.cartItemCollection.at(0);if(null==a)return"";const r=u.CatalogCollection.get((0,s.createWid)(e.id)),o=null==r?void 0:r.productCollection.get(a.id),i=null==o||null===(t=o.getProductImageCollectionHead())||void 0===t?void 0:t.mediaData;return null==i?"":i.preview instanceof d.default&&null!==(n=i.preview.getBase64())&&void 0!==n?n:""}function f(){return(f=(0,r.default)((function*(e,t){const n=yield(0,o.createOrder)(t.id,e.cartItemCollection.toArray());return yield(0,l.default)(t,n,e.itemCount,c(e),e.message),(0,i.default)(e),n.id}))).apply(this,arguments)}},428578:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){e.set("message",t),(0,r.default)(e)};var r=a(n(886877))},680127:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return c.apply(this,arguments)};var r=a(n(348926)),o=n(535470),i=n(40234),l=a(n(465212)),s=n(623631),d=n(20551),u=n(978820);function c(){return(c=(0,r.default)((function*(e,t,n,a,r){const o=f(e,t,n,a,r);if((0,u.isMeAccount)(e.id))return(0,s.addAndSendMsgToChat)(e,o)[0].then((()=>{})).catch((e=>{throw __LOG__(3)`Order message send to chat failure: ${e}`,e}));try{const t=yield(0,s.addAndSendMsgToChat)(e,o)[1];if(!t||t!==d.SendMsgResult.OK)throw new Error("Order message SendMsgResult failure status")}catch(e){throw __LOG__(3)`Order message send to chat failure: ${e}`,e}}))).apply(this,arguments)}function f(e,t,n,a,r){const s=(0,u.getMaybeMeUser)(),d={type:"order",ack:o.ACK.CLOCK,from:s,id:new l.default({from:s,to:e.id,id:l.default.newId(),participant:void 0,selfDir:"out"}),local:!0,isNewMsg:!0,self:"out",t:i.Clock.globalUnixTime(),to:e.id,orderId:t.id,token:t.token,orderTitle:e.name||e.formattedTitle,sellerJid:e.id.toString({legacy:!0}),thumbnail:a,itemCount:n,message:r},c=t.price.total;return c&&c.length>0&&(d.totalAmount1000=parseInt(c,10)),t.price.currency&&t.price.currency.length>0&&(d.totalCurrencyCode=t.price.currency),d}},275866:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return y.apply(this,arguments)};var r=a(n(348926)),o=n(389385),i=n(450796),l=n(492574),s=n(833601),d=n(634552),u=n(914597),c=n(300016),f=n(694816),p=n(745454),h=n(446331),m=n(950452),g=n(453849),v=n(582039),x=n(548360),C=n(785893);function y(){return(y=(0,r.default)((function*(e){let{name:t,desc:n,icon:a,existingGroups:y,newGroups:_}=e;const b=(0,d.sendCreateCommunity)({name:t,desc:n}),E=(0,r.default)((function*(){try{return yield b,new h.ActionType(x.fbt._("Community created",null,{hk:"xIcPS"}))}catch(e){throw __LOG__(3,!0,void 0,!0)`Community creation failed`,SEND_LOGS("community-creation-failed"),new o.AbortError}}))(),S=new h.ActionType(x.fbt._("Creating community",null,{hk:"riXxC"}));f.ToastManager.open((0,C.jsx)(h.ActionToast,{id:(0,h.genId)(),initialAction:S,pendingAction:E}));try{const e=(yield b).wid;if(null!=a){const t=v.ProfilePicThumbCollection.gadd(e);yield(0,c.setProfilePic)(t,a,a)}let t=[];if(_.length>0&&(t=_.map((t=>{let{subject:n,icon:a,ephemeralDuration:r}=t;return(0,s.createGroup)(n,a,a,[],r,e)}))),yield Promise.all(t),y.length){const t=yield(0,d.sendLinkSubgroups)({parentGroupId:e,subgroupIds:y.map((e=>e.id))});t.failedGroups.length>0&&u.ModalManager.open((0,C.jsx)(g.LinkingFailedModal,{parentGroupId:e,failedGroups:t.failedGroups.map((e=>(0,p.createWid)(e.jid)))}))}return e}catch(e){f.ToastManager.open((0,C.jsx)(m.Toast,{id:(0,h.genId)(),msg:x.fbt._("Community could not be created. Check your internet connection and try again.",null,{hk:"2qApNs"})})),(0,i.filteredCatch)(l.ServerStatusCodeError,(()=>{}))(e)}}))).apply(this,arguments)}},688577:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return g.apply(this,arguments)};var r=a(n(348926)),o=n(450796),i=n(492574),l=n(141455),s=n(634552),d=a(n(681602)),u=n(694816),c=n(446331),f=n(950452),p=n(381178),h=n(548360),m=n(785893);function g(){return(g=(0,r.default)((function*(e){if(!d.default.online)return void u.ToastManager.open((0,m.jsx)(f.Toast,{id:(0,c.genId)(),msg:h.fbt._("Community was not deactivated. Check your connection and try again.",null,{hk:"3P15KK"})}));const t=e.id,n=(0,s.sendDeactivateCommunity)({parentGroupId:t}),a=(0,r.default)((function*(){return yield n,new c.ActionType(h.fbt._('"{community-name}" was deactivated',[h.fbt._param("community-name",e.formattedTitle)],{hk:"3q7YBe"}))}))(),g=new c.ActionType(h.fbt._("Deactivating community ...",null,{hk:"141Rtg"}));u.ToastManager.open((0,m.jsx)(c.ActionToast,{id:(0,c.genId)(),initialAction:g,pendingAction:a}));try{yield n,l.DrawerManager.closeDrawerLeft(),l.DrawerManager.openDrawerLeft((0,m.jsx)(p.CommunityTabFlowLoadable,{}))}catch(e){(0,o.filteredCatch)(i.ServerStatusCodeError,(()=>{}))(e)}}))).apply(this,arguments)}},338723:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return f.apply(this,arguments)};var r=a(n(348926)),o=n(450796),i=n(492574),l=n(634552),s=n(694816),d=n(446331),u=n(548360),c=n(785893);function f(){return(f=(0,r.default)((function*(e,t){const n=(0,l.sendLinkSubgroups)({parentGroupId:e,subgroupIds:t}),a=(0,r.default)((function*(){return yield n,new d.ActionType(u.fbt._({"*":"Groups linked",_1:"Group linked"},[u.fbt._plural(t.length)],{hk:"2NDR70"}))}))(),f=new d.ActionType(u.fbt._({"*":"Linking groups",_1:"Linking group"},[u.fbt._plural(t.length)],{hk:"3sVN59"}));s.ToastManager.open((0,c.jsx)(d.ActionToast,{id:(0,d.genId)(),initialAction:f,pendingAction:a}));try{yield n}catch(e){(0,o.filteredCatch)(i.ServerStatusCodeError,(()=>{}))(e)}}))).apply(this,arguments)}},335873:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.setPushname=function(e){return h(e)};var r=a(n(348926)),o=n(450796),i=n(492574),l=a(n(568064)),s=n(476195),d=n(694816),u=a(n(654947)),c=n(446331),f=n(317239),p=n(785893);function h(){return m.apply(this,arguments)}function m(){return(m=(0,r.default)((function*(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,c.genId)(),n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a=(0,u.default)(e),r=new c.ActionType(l.default.t(114)),m=f.Conn.pushname,g=a.then((()=>{const e=n?void 0:{actionText:l.default.t(126),actionHandler:()=>h(m,t,!0)};return new c.ActionType(l.default.t(112),e)})).catch((0,o.filteredCatch)(i.ServerStatusCodeError,(e=>{if(e.status>=400)return new c.ActionType(l.default.t(113))}))).catch((()=>{throw __LOG__(3)`models:conn:setPushname dropped`,new c.ActionType(l.default.t(113),{actionText:l.default.t(122),actionHandler:()=>h(status,t)})}));d.ToastManager.open((0,p.jsx)(c.ActionToast,{id:t,initialAction:r,pendingAction:g}));const v=yield a;v._duplicate||(0,s.setPushnameLocally)(e)}))).apply(this,arguments)}},56901:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){a.ToastManager.open((0,i.jsx)(r.Toast,{msg:o.fbt._("Something went wrong",null,{hk:"2TMztB"}),duration:6e3,id:(0,r.genId)()}))};var a=n(694816),r=n(950452),o=n(548360),i=n(785893)},353118:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useGdprDelete=function(){return(0,o.useSendIq)((0,a.wap)("iq",{xmlns:"urn:xmpp:whatsapp:account",to:a.S_WHATSAPP_NET,type:"get",id:(0,a.generateId)()},(0,a.wap)("gdpr",{action:"delete"})),r.GdprStatusWapParser)};var a=n(831914),r=n(541002),o=n(522246)},681925:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.useGdprDownload=function(){const[e,t]=(0,d.useState)(!1);return[e,e=>{t(!0),(0,l.gdprDownloadMedia)(e).then((e=>o.FileSaver.downloadData((0,r.default)(e.mediaBlob,"mediaObject.mediaBlob").formData(),String(s.fbt._("My Account Info",null,{hk:"IqRu3"})),i.AllowedFileExtensions.ZIP))).finally((()=>t(!1)))}]};var r=a(n(145095)),o=n(21634),i=n(211586),l=n(661647),s=n(548360),d=n(667294)},962553:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useGdprRequest=function(){return(0,o.useSendIq)((0,a.wap)("iq",{xmlns:"urn:xmpp:whatsapp:account",to:a.S_WHATSAPP_NET,type:"get",id:(0,a.generateId)()},(0,a.wap)("gdpr",{action:"request"})),r.GdprStatusWapParser)};var a=n(831914),r=n(541002),o=n(522246)},541002:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.GdprStatusWapParser=void 0,t.useGdprStatus=function(){const[e,t]=function(e){(0,c.default)((()=>{p=(0,o.generateId)()}));const[t,n]=(0,u.useState)(p),a=(0,u.useMemo)((()=>e(t)),[e,t]);return[(0,l.sendSuspensefulIq)(a,f),()=>n((0,o.generateId)())]}((e=>(0,o.wap)("iq",{xmlns:"urn:xmpp:whatsapp:account",to:o.S_WHATSAPP_NET,type:"get",id:e},(0,o.wap)("gdpr",{action:"status"}))));return[e.result,t]};var r=a(n(145095)),o=n(831914),i=n(471914),l=n(301555),s=n(970016),d=n(484902),u=n(667294),c=a(n(955010));const f=new i.WapParser("parseStatus",(e=>{if(!e.hasChild("gdpr"))return null;const t=e.child("gdpr");if(t.hasChild("document")){const e=t.child("document");return{creation:e.attrTime("creation"),documentMessage:(0,r.default)((0,d.decodeProtobuf)(s.MessageSpec,e.contentBytes()).documentMessage,"decodeProtobuf(MessageSpec, document.contentBytes()).documentMessage"),expiration:e.attrTime("expiration"),type:"GdprAvailableStatusResponse"}}return{timestamp:t.attrTime("timestamp"),type:"GdprPendingStatusResponse"}}));t.GdprStatusWapParser=f;let p=(0,o.generateId)()},266992:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.getTwoFactor=function(){return l.apply(this,arguments)},t.setTwoFactor=function(){return s.apply(this,arguments)};var r=a(n(348926)),o=n(768097),i=a(n(598063));function l(){return(l=(0,r.default)((function*(){try{var e,t;const n=yield(0,o.getTwoFactor)();return{code:null!==(e=null==n?void 0:n.code)&&void 0!==e&&e,email:null!==(t=null==n?void 0:n.email)&&void 0!==t&&t}}catch(e){return __LOG__(3,!0,void 0,!0)`get2FA failed - ${e}`,SEND_LOGS("get-2FA-failed"),{code:!1,email:!1}}}))).apply(this,arguments)}function s(){return(s=(0,r.default)((function*(e,t){try{yield(0,i.default)(e,t)}catch(e){throw __LOG__(3,!0,void 0,!0)`set2FA failed -${e}`,SEND_LOGS("set-2FA-failed"),e}}))).apply(this,arguments)}},301555:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendSuspensefulIq=function(e,t){const n=e.attrs.id;if(r.has(n)){const e=r.get(n);if(e instanceof Promise)throw e;return e}const o=(0,a.deprecatedSendIq)(e,t);throw r.set(n,o),o.then((e=>r.set(n,e))),o};var a=n(736184);const r=new Map},338409:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendSupportRequest=function(){return p.apply(this,arguments)};var r=a(n(348926)),o=n(736184),i=n(831914),l=n(471914),s=n(696055),d=n(386374),u=n(978820);function c(e,t){__LOG__(3,void 0,void 0,!0)`supportRequest error: code=${e} message=${null!=t?t:""}`,SEND_LOGS("supportRequest")}const f=new l.WapParser("supportResponse",(e=>{const t=e.child("response");if(t.hasAttr("error_code")){return{type:"error",errorCode:t.attrInt("error_code",0,1e3)}}t.assertAttr("status","ok");return{type:"success",message:t.child("message").contentString(),ticketId:t.child("ticket_id").contentString()}}));function p(){return(p=(0,r.default)((function*(e,t){const n=(0,i.wap)("iq",{from:(0,s.USER_JID)((0,u.getMeUser)()),id:(0,i.generateId)(),smax_id:"3",to:i.S_WHATSAPP_NET,type:"set",xmlns:"fb:thrift_iq"},(0,i.wap)("description",null,e),null!=t?(0,i.wap)("debug_information_json",null,t):null),a=yield(0,o.deprecatedSendIq)(n,f);let r;if(a.success){var l;const{result:e}=a;return"success"===e.type?(null!=t&&(__LOG__(2)`InAppSupport: Uploading logs for ticketId=${e.ticketId}`,(0,d.upload)({reason:"user-report",immediate:!0,force:!0,persist:!0,ticketId:e.ticketId}).then((t=>{__LOG__(2)`InAppSupport: Logs upload complete for ticketId=${e.ticketId}, logsId=${t}`}))),{type:"success",message:e.message,ticketId:e.ticketId}):(r=null!==(l=e.errorCode)&&void 0!==l?l:400,c(r),{type:"error",errorCode:r})}return c(a.errorCode,a.errorText),{type:"error",errorCode:a.errorCode}}))).apply(this,arguments)}},183944:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getIdentityVerificationDataJob=function(e){return(0,o.NonPersistJob)("getIdentityVerificationData",(e=>(0,r.getIdentityVerificationData)(e)),{priority:a.JOB_PRIORITY.SKIP}).waitUntilCompleted({jid:e})};var a=n(524674),r=n(194994),o=n(879274)},768097:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.getTwoFactor=function(){return c.apply(this,arguments)};var r=a(n(348926)),o=n(108584),i=n(736184),l=n(831914),s=n(471914),d=n(492574);const u=new s.WapParser("getTwoFactor",(e=>{if(e.hasChild("2fa"))return{code:e.child("2fa").hasChild("code"),email:e.child("2fa").hasChild("email")}}));function c(){return(c=(0,r.default)((function*(e){const t=yield(0,i.deprecatedSendIq)(f(e),u);if(!t.success)throw new d.ServerStatusCodeError(t.errorCode,t.errorText);return t.result}))).apply(this,arguments)}function f(e){const t=[];return null!=e&&t.push(new l.WapNode("code",void 0,o.Binary.build(e).readByteArray())),(0,l.wap)("iq",{to:l.S_WHATSAPP_NET,type:"get",xmlns:"urn:xmpp:whatsapp:account",id:(0,l.generateId)()},new l.WapNode("2fa",void 0,t))}},598063:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return c.apply(this,arguments)};var r=a(n(348926)),o=n(108584),i=n(736184),l=n(831914),s=n(471914),d=n(492574);const u=new s.WapParser("set2FA",(e=>({stanzaId:e.attrString("id")})));function c(){return(c=(0,r.default)((function*(e,t){const n=[new l.WapNode("code",void 0,o.Binary.build(e).readByteArray())];null!=t&&n.push(new l.WapNode("email",void 0,o.Binary.build(t).readByteArray()));const a=yield(0,i.deprecatedSendIq)((0,l.wap)("iq",{to:l.S_WHATSAPP_NET,type:"set",xmlns:"urn:xmpp:whatsapp:account",id:(0,l.generateId)()},new l.WapNode("2fa",void 0,n)),u);if(!a.success)throw new d.ServerStatusCodeError(a.errorCode,a.errorText)}))).apply(this,arguments)}},194994:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.getIdentityVerificationData=function(){return _.apply(this,arguments)};var r=a(n(348926)),o=n(108584),i=n(742704),l=n(466863),s=n(117789),d=n(767336),u=n(978820),c=a(n(876883)),f=n(760980);const p=/^([17]|2[07]|3[0123469]|4[013456789]|5[12345678]|6[0123456]|8[1246]|9[0123458]|\d{3})\d*?(\d{4,6})$/;function h(e){const t=p.exec(function(e){return e.user.split("@")[0]}(e));return o.Binary.build(t?t[1]+t[2]:e.toString()).readByteArray()}function m(e,t){return`00000${256*e.getUint32(t,!1)+e.getUint8(t+4)}`.slice(-5)}function g(){return v.apply(this,arguments)}function v(){return(v=(0,r.default)((function*(e,t){let n=Promise.resolve(o.Binary.build(0,0,t,e).readByteArray());for(let e=0;e<5200;e++)n=n.then((e=>self.crypto.subtle.digest({name:"SHA-512"},o.Binary.build(e,t).readByteArray())));const a=yield n,r=new DataView(a instanceof ArrayBuffer?a.slice(0,30):a.slice(0,30).buffer);return[m(r,0),m(r,5),m(r,10),m(r,15),m(r,20),m(r,25)].join("")}))).apply(this,arguments)}function x(){return C.apply(this,arguments)}function C(){return(C=(0,r.default)((function*(e,t,n,a){return(yield Promise.all([g(e,t),g(n,a)])).sort().join("")}))).apply(this,arguments)}function y(e,t,n,a){const r=new o.Binary;return(0,f.encodeProtobuf)(s.CombinedFingerprintSpec,{version:0,localFingerprint:{publicKey:t,identifier:e},remoteFingerprint:{publicKey:a,identifier:n}},r),r.readBuffer()}function _(){return(_=(0,r.default)((function*(e){let{jid:t}=e;const n=(0,u.assertGetMe)(),a=yield(0,d.getFanOutListJob)([t,n]);try{yield(0,l.ensureE2ESessions)(a)}catch(e){__LOG__(4,void 0,new Error)`ensureE2ESessions with error`}const r=[],o=[];a.forEach((e=>{e.user===n.user?o.push(e):r.push(e)}));try{const e=yield(0,i.getAllIdentityKeysBytesOrThrow)(r),n=yield(0,i.getAllIdentityKeysBytesOrThrow)(o),a=yield c.default.getIdentityKeyPair();if(!a)return __LOG__(3)`getIdentityVerificationData: missing identity for device verification`,null;n.push(new Uint8Array(a.pubKey));const l=(0,i.identityKeysToBinary)(n),s=(0,i.identityKeysToBinary)(e),d=h((0,u.getMeUser)()),f=h(t),p=yield Promise.all([x(d,l,f,s),y(d,l,f,s)]);if(null==p)return null;const[m,g]=p;return{binary:g,string:m}}catch(e){return __LOG__(3)`getIdentityVerificationData: error ${e} when trying to generate identtiy QR code`,null}}))).apply(this,arguments)}},933866:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.editBusinessProfile=t.editBusinessCompliance=void 0;var r=n(88555),o=n(669545),i=n(461561),l=n(51486),s=n(646277),d=a(n(656891));t.editBusinessProfile=e=>{let t;return(0,o.qplPointProfileSave)("datasource_start"),t=(0,r.isMDBackend)()?(0,i.editBusinessProfile)(e):(0,s.editBusinessProfile)(e),t.then((()=>{(0,o.qplPointProfileSave)("datasource_end")})),t};t.editBusinessCompliance=e=>{let t;return(0,r.isMDBackend)()?(t=(0,l.setMerchantCompliance)(e),t||(t=Promise.reject(new Error("md business compliance profile called from a non-md build")))):t=d.default.editBusinessComplianceWebd(e),t}},646277:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.editBusinessProfile=t.convertProfileToRequestData=void 0;var r=a(n(81109)),o=a(n(348926)),i=n(492574),l=a(n(134842)),s=n(765044);function d(e){if(!e)return;return{category:e.map((e=>{let{id:t}=e;return{id:t}}))}}function u(e){if(!e)return;const{note:t,timezone:n,config:a}=e,r=[];for(const e in a){const t=a[e],{mode:n,hours:o}=t;if(o)for(const[t,a]of o)r.push({day_of_week:e,mode:n,open_time:t,close_time:a});else r.push({day_of_week:e,mode:n})}return{timezone:n,business_hours_note:t,business_hours_config:r}}const c=e=>{let{address:t,description:n,email:a,website:r,businessHours:o,categories:i}=e;const s=(0,l.default)({address:t,description:n,email:a,website:r,business_hours:u(o),categories:d(i)});return Object.keys(s).length>0?s:void 0};t.convertProfileToRequestData=c;const f=function(){var e=(0,o.default)((function*(e){const t=c(e);if(!t)return void __LOG__(3)`empty profile received, ignoring save`;const n=(0,r.default)({v:2},t);try{const e=yield s.Socket.send2({data:["action","editBusinessProfile",n],retryOn5xx:!0}),{status:t}=e;if((e=>e>=200&&e<=299)(t))return;throw __LOG__(3)`error editing business profile webd: ${t}`,new i.ServerStatusCodeError(t,"edit business profile")}catch(e){const t=e;throw __LOG__(3)`error editing business profile: ${t}`,t}}));return function(){return e.apply(this,arguments)}}();t.editBusinessProfile=f},654947:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return f.apply(this,arguments)};var r=a(n(348926)),o=n(892844),i=n(492574),l=n(88555),s=a(n(445150)),d=a(n(942339)),u=n(238804),c=a(n(656891));function f(){return(f=(0,r.default)((function*(e){if((0,l.isMDBackend)()&&e){const t=(0,o.unixTimeMs)(),n=d.default.getPushnameMutation(t,e);return(0,s.default)(e),(0,u.lockForSync)([],[n],(()=>Promise.resolve())).then((()=>({_duplicate:null})))}const t=yield c.default.setPushname(e);if(t.status&&200!==t.status)throw new i.ServerStatusCodeError(t.status);return{_duplicate:t._duplicate}}))).apply(this,arguments)}},661647:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.gdprDownloadMedia=function(e){const t=(0,d.getOrCreateMediaObject)((0,o.encodeB64)((0,i.default)(e.fileSha256,"documentMessage.fileSha256"))),n={debugHint:"setMediaObjectValues",deprecatedMms3Url:(0,i.default)(e.directPath,"documentMessage.directPath"),encFilehash:(0,o.encodeB64)((0,i.default)(e.fileEncSha256,"documentMessage.fileEncSha256")),mediaKey:(0,o.encodeB64)((0,i.default)(e.mediaKey,"documentMessage.mediaKey")),mediaKeyTimestamp:(0,l.unixTime)(),type:f.MEDIA_TYPES.DOCUMENT};return t.entries.addEntry(n),t.consolidate((0,r.default)((0,r.default)({},n),{},{filehash:(0,o.encodeB64)((0,i.default)(e.fileSha256,"documentMessage.fileSha256")),type:u.TYPE.DOCUMENT})),(0,c.downloadMedia)({downloadEvenIfExpensive:!0,downloadOrigin:s.default.DOWNLOAD_ORIGIN_TYPE.GDPR,mediaObject:t,mediaType:f.MEDIA_TYPES.DOCUMENT,mimetype:"application/zip",rmrReason:s.default.WEBC_RMR_REASON_CODE.DOCUMENT_DOWNLOAD}).then((()=>t))};var r=a(n(81109)),o=n(615688),i=a(n(145095)),l=n(892844),s=a(n(471410)),d=(n(721009),n(988297)),u=n(58668),c=n(209329),f=n(661596)},117789:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.FingerprintDataSpec=t.CombinedFingerprintSpec=void 0;var r=a(n(81109)),o=n(401390);const i=(0,r.default)({},null);t.FingerprintDataSpec=i;const l=(0,r.default)({},null);t.CombinedFingerprintSpec=l,i.internalSpec={publicKey:[1,o.TYPES.BYTES],identifier:[2,o.TYPES.BYTES]},l.internalSpec={version:[1,o.TYPES.UINT32],localFingerprint:[2,o.TYPES.MESSAGE,i],remoteFingerprint:[3,o.TYPES.MESSAGE,i]}},532528:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OrderStatusLabels=void 0;var a=n(511853),r=n(548360);const o={[String(a.OrderStatus.Pending)]:r.fbt._("Pending",null,{hk:"4GysRv"}),[String(a.OrderStatus.Processing)]:r.fbt._("Processing",null,{hk:"42EV23"}),[String(a.OrderStatus.PartiallyShipped)]:r.fbt._("Partially shipped",null,{hk:"2GgHwQ"}),[String(a.OrderStatus.Shipped)]:r.fbt._("Shipped",null,{hk:"30IDPY"}),[String(a.OrderStatus.Complete)]:r.fbt._("Completed",null,{hk:"1e4PVy"}),[String(a.OrderStatus.Canceled)]:r.fbt._("Canceled",null,{hk:"TK9cs"})};t.OrderStatusLabels=o},501474:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.validateURL=t.validateEmail=t.EMAIL_REGEX=void 0;var r=a(n(376139));const o=new RegExp(/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/);t.EMAIL_REGEX=o;t.validateEmail=e=>!e||o.test(e);t.validateURL=e=>!e||r.default.URL_REGEX.test(e)},260479:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.createPollCreationMsg=_,t.sendPollCreation=function(){return y.apply(this,arguments)};var r=a(n(81109)),o=a(n(348926)),i=a(n(145095)),l=n(535470),s=n(40234),d=n(785974),u=a(n(465212)),c=n(115461),f=n(645925),p=n(182493),h=n(623631),m=n(978820),g=a(n(471410)),v=n(745454),x=n(121692),C=a(n(441143));function y(){return(y=(0,o.default)((function*(e,t){(0,C.default)((0,p.isPollsCreationEnabled)(),"Poll creation is disabled");const[n]=yield Promise.all((0,h.addAndSendMsgToChat)(t,_(e,t)));(0,f.commitPollsActionsMetric)({action:g.default.POLL_ACTION_TYPE.CREATE_POLL,chat:t,creationDateInSeconds:n.t,pollOptionsCount:e.options.length})}))).apply(this,arguments)}function _(e,t){const n=t.id,a=(0,i.default)((0,m.getMaybeMeUser)(),"getMaybeMeUser()");return(0,r.default)({id:new u.default({from:a,to:n,id:u.default.newId(),participant:t.isGroup?(0,v.toUserWid)(a):void 0,selfDir:"out"}),type:c.MSG_TYPE.POLL_CREATION,t:s.Clock.globalUnixTime(),from:a,to:n,self:"out",isNewMsg:!0,local:!0,ack:l.ACK.CLOCK,pollName:(0,x.trim)(e.name),pollOptions:e.options.map(((e,t)=>{let{name:n}=e;return{name:(0,x.trim)(n),localId:t}})),messageSecret:self.crypto.getRandomValues(new Uint8Array(32)),pollSelectableOptionsCount:0},(0,d.getEphemeralFields)(t))}},197230:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{chat:t}=e;const[n,a]=(0,C.useState)(""),[k,I]=(0,C.useState)([{name:"",key:T()},{name:"",key:T()}]),M=(0,C.useRef)(new Map),P=(0,s.getMaxPollOptionCount)(),A=(0,C.useRef)(null),[O,R]=(0,C.useState)(null),L=e=>{R(k),I(e)};(0,C.useEffect)((()=>{(0,l.commitPollOpenCreationModal)(t)}),[]),(0,C.useLayoutEffect)((()=>{const e=A.current;O&&O.length<k.length&&e&&e.scroll({top:e.scrollHeight,behavior:"smooth"})}),[k,O]);const N=e=>{var t;const n=k[e];n&&(null===(t=M.current.get(n.key))||void 0===t||t.restoreFocus())},F=k.filter((e=>!D(e))),B=(0,C.useMemo)((()=>function(e){const t=new Set,n=new Map;for(const a of e){const e=(0,c.trim)(a.name);""!==e&&(t.has(e)?n.set(a.key,x.fbt._("This is already an option",null,{hk:"1qZNjV"})):t.add(e))}return n}(k)),[k]),U=n.length>0&&F.length>=2&&0===B.size;(0,C.useEffect)((()=>{t.isComposingPoll=n.length>0||k.some((e=>e.name.length>0))}),[t,n,k]),(0,E.default)((()=>{t.isComposingPoll=!1}));const H=(0,C.useCallback)(((e,t)=>{const n=k[e],a=k[t],r=[...k];r[e]=a,r[t]=n,I(r)}),[k]),G=(0,C.useCallback)((()=>{I([...k].map((e=>(0,r.default)((0,r.default)({},e),{},{key:T()}))))}),[k]),z=k[P-2],q=k[P-1],W=k.length===P&&!D(z)&&D(q);return(0,S.jsx)(v.Modal,{type:v.ModalTheme.Tower,children:(0,S.jsxs)(h.default,{children:[(0,S.jsx)(g.DrawerHeader,{title:x.fbt._("Create Poll",null,{hk:"2ScJhR"}),type:g.DRAWER_HEADER_TYPE.POPUP,onCancel:()=>i.ModalManager.close()}),(0,S.jsx)(m.default,{children:(0,S.jsx)(y.DndProvider,{backend:_.HTML5Backend,children:(0,S.jsxs)("div",{className:(0,b.default)(j.bodyContainer),children:[(0,S.jsx)("h2",{className:(0,b.default)(j.sectionTitle),children:x.fbt._("Question",null,{hk:"rWgSd"})}),(0,S.jsx)(p.TextInput,{testid:"poll-question-input",focusOnMount:!0,hideFloatingLabel:!0,showRemaining:!0,supportsEmoji:!0,value:n,error:"",maxLength:(0,s.getMaxPollNameLength)(),onChange:e=>{a(e)},onEnter:()=>{},placeholder:x.fbt._("Ask question",null,{hk:"19SopM"})}),(0,S.jsx)("h2",{className:(0,b.default)(j.sectionTitle,j.optionsSection),children:x.fbt._("Options",null,{hk:"x7mkv"})}),(0,S.jsx)("div",{ref:A,className:(0,b.default)(j.optionsContainer),children:k.map(((e,t)=>(0,S.jsx)(d.OptionInput,{option:e,index:t,error:B.get(e.key),onTextInputRef:t=>{t?M.current.set(e.key,t):M.current.delete(e.key)},onChange:n=>{const a=[...k];a[t]=(0,r.default)((0,r.default)({},e),{},{name:n}),L(function(e,t){if(e.length<2||e.length<t&&""!==e[e.length-1].name)return[...e,{name:"",key:T()}];return e}(a,P))},onKeyDown:n=>{if(""!==e.name)return!1;switch(n.key){case o.KEYBOARD_EVENT_KEY_VALUE.BACKSPACE:N(t-1),L(w(k,e));break;case o.KEYBOARD_EVENT_KEY_VALUE.DELETE:N(t+1),L(w(k,e))}return!1},onBlur:()=>{L(w(k,e))},onMoveOption:H,onDragEnd:G},e.key)))}),(0,S.jsx)("h3",{className:(0,b.default)(j.maxOptionsHint,!W&&j.maxOptionsHintHidden),children:x.fbt._("You can add one more option.",null,{hk:"AU2jc"})}),(0,S.jsx)("div",{className:(0,b.default)(j.createPollButtonContainer),children:(0,S.jsx)(f.default,{disabled:!U,onClick:()=>{(0,u.sendPollCreation)({name:n,options:k.filter((e=>!D(e))).map((e=>{let{name:t}=e;return{name:t}}))},t),i.ModalManager.close()},type:"primary",children:x.fbt._("Send",null,{hk:"46NU43"})})})]})})})]})})};var r=a(n(81109)),o=n(538069),i=n(914597),l=n(645925),s=n(182493),d=n(576906),u=n(260479),c=n(121692),f=a(n(39770)),p=n(990011),h=a(n(60453)),m=a(n(69637)),g=n(994790),v=n(857224),x=n(548360),C=n(667294),y=n(555480),_=n(245418),b=a(n(156720)),E=a(n(955010)),S=n(785893);const j={bodyContainer:{boxSizing:"cm280p3y",width:"nhajnb67",paddingTop:"byg5ndfj",paddingStart:"lyvj5e2u",paddingEnd:"l9g3jx6n",maxHeight:"ibyb1pgl",display:"p357zi0d",flexDirection:"f8m0rgwh"},sectionTitle:{fontSize:"iqrewfee",fontWeight:"nbipi2bn"},optionsSection:{marginTop:"bddvio20"},maxOptionsHint:{fontSize:"ovllcyds"},maxOptionsHintHidden:{visibility:"kojwoqec"},createPollButtonContainer:{width:"ln8gz9je",marginTop:"iy2cu22y",marginBottom:"iyjcf3gk",display:"p357zi0d",justifyContent:"kcgo1i74"},optionsContainer:{overflowX:"i44ccddp",overflowY:"ag5g9lrv",marginTop:"kiiy14zj",marginBottom:"brac1wpa"}};let k=0;function T(){const e=k.toString();return k++,e}function w(e,t){return""!==t.name||e.length<=2?e:e.filter(((n,a)=>n!==t||a===e.length-1))}function D(e){return""===(0,c.trim)(e.name)}},576906:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.OptionInput=function(e){let{option:t,index:n,error:a,onChange:p,onKeyDown:h,onBlur:m,onTextInputRef:g,onMoveOption:v,onDragEnd:x}=e;const C=(0,l.useRef)(null),[{handlerId:y},_]=(0,s.useDrop)({accept:f,collect:e=>({handlerId:e.getHandlerId()}),hover(e,t){var a;if(!C.current)return;const r=e.index,o=n;if(r===o)return;const i=null===(a=C.current)||void 0===a?void 0:a.getBoundingClientRect(),l=(i.bottom-i.top)/2,s=t.getClientOffset().y-i.top;r<o&&s<l||r>o&&s>l||(v(r,o),e.index=o)},drop(){x()}}),[{isDragging:b},E,S]=(0,s.useDrag)({type:f,item:()=>({id:t.key,index:n}),options:{dropEffect:"move"},collect:e=>({isDragging:e.isDragging()})});return(0,u.jsx)("div",{className:(0,d.default)(c.draggableDiv),children:(0,u.jsx)("div",{"data-handler-id":y,ref:e=>{C.current=e,_(C.current),S(C.current)},className:(0,d.default)(c.preview,b&&c.dragging),children:(0,u.jsx)("div",{className:(0,d.default)(c.inputContainer),children:(0,u.jsx)(o.TextInput,{ref:e=>{g(e)},testid:"poll-question-input",hideFloatingLabel:!0,showRemaining:!0,supportsEmoji:!0,value:t.name,error:null!=a?a:"",maxLength:(0,r.getMaxPollOptionLength)(),onChange:p,onKeyDown:h,onBlur:m,onEnter:()=>{},placeholder:i.fbt._("Add",null,{hk:"H8KgK"}),onDragRef:e=>{E(e)}})})})})};var r=n(182493),o=n(990011),i=n(548360),l=n(667294),s=n(555480),d=a(n(156720)),u=n(785893);const c={draggableDiv:{width:"ln8gz9je"},preview:{width:"ln8gz9je",display:"p357zi0d",alignItems:"gndfcl4n"},dragging:{opacity:"axi1ht8l"},inputContainer:{width:"ln8gz9je"}},f="option"},479686:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.BusinessAddressField=function(e){let{businessProfile:t,activeField:n,rawBusinessProfile:a,sessionId:l,value:d,validate:c,error:f,lowProfile:p=!0,onActive:m,onChange:g,onSaveBusinessProfile:v,onError:x,onCancel:C}=e;const y=(0,u.jsx)(o.BusinessProfileFormField,{activeField:n,fieldKey:"address",fieldMetric:r.default.BUSINESS_PROFILE_FIELD.ADDRESS,formatForSave:()=>({address:d}),lowProfile:p,originalValue:t.address,placeholder:s.fbt._("Business Address",null,{hk:"HF4CB"}),rawBusinessProfile:a,sessionId:l,textFieldConfig:{maxLength:i.BUSINESS_PROFILE_FIELDS_LENGTH.ADDRESS},value:d,validate:c,error:f,onActive:m,onChange:g,onSaveBusinessProfile:v,onError:x,onCancel:C}),{latitude:_,longitude:b}=t,E=null!=_&&null!=b?(0,u.jsx)(h,{activeField:n,value:d,latitude:_,longitude:b}):null;return(0,u.jsxs)(u.Fragment,{children:[y,E]})};var r=a(n(471410)),o=n(957597),i=n(53668),l=a(n(183452)),s=n(548360),d=a(n(156720)),u=n(785893);const c={position:"g0rxnol2",display:"p357zi0d",alignItems:"gndfcl4n",justifyContent:"ac2vgrno",paddingTop:"ppypbuwx",paddingEnd:"fhfm09ip",paddingBottom:"s8gyl5p1",paddingStart:"mjn2akup",marginTop:"c6axuxzh",marginEnd:"jnwc1y2a",marginBottom:"mpdn4nr2",marginStart:"svoq16ka"},f={position:"lhggkp7q",top:"qq0sjtgm",right:"grt5ktjy",bottom:"jxacihee",left:"tukmaf4q",display:"p357zi0d",alignItems:"gndfcl4n",justifyContent:"ac2vgrno"},p={paddingTop:"fbgy3m38",paddingEnd:"bcymb0na",paddingBottom:"oq31bsqd",paddingStart:"e8k79tju",fontSize:"f8jlpxt4",color:"o4oavg8t",textTransform:"ofejerhi",backgroundColor:"o8fg3bdd",borderTop:"dl47i6rc",borderEnd:"pdo9fnbd",borderBottom:"n8n2xqzm",borderStart:"hqx4twni",borderTopStartRadius:"g1jn521u",borderTopEndRadius:"mrnekr2l",borderBottomEndRadius:"wu0i2wpa",borderBottomStartRadius:"bbs9k8l5"};function h(e){let{activeField:t,latitude:n,longitude:a,value:r}=e;const o="address"===(null==t?void 0:t.fieldKey)?(0,u.jsx)("div",{className:(0,d.default)(f),children:(0,u.jsx)("div",{className:(0,d.default)(p),children:s.fbt._("Edit map on mobile",null,{hk:"3AK8Fa"})})}):null;return(0,u.jsxs)("div",{style:{height:96},className:(0,d.default)(c),children:[o,(0,u.jsx)(l.default,{lat:n,lng:a,name:r,width:312,height:96})]})}},863702:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.DayEdit=function(e){let{day:t,mode:n,updateDayValue:a}=e;const{dayName:r,dayKey:o,closed:i}=t,l=E(t);return(0,h.jsxs)("div",{className:(0,p.default)(y),children:[(0,h.jsx)(S,{day:t,onChange:()=>{a({closed:!i})}}),(0,h.jsxs)("div",{className:(0,p.default)(_),children:[(0,h.jsx)("label",{htmlFor:l,children:r}),(0,h.jsx)(D,{day:t,mode:n,onHoursChange:e=>{a({hours:e})}})]})]},`day-${o}`)};var r=a(n(568064)),o=n(224190),i=n(233572),l=n(53668),s=n(316593),d=a(n(972332)),u=a(n(438932)),c=n(990011),f=n(548360),p=a(n(156720)),h=n(785893);const m={paddingTop:"hc2u0oym",paddingEnd:"h1a80dm5",paddingBottom:"myel2vfb",paddingStart:"sta02ykp"},g={display:"l7jjieqr",marginStart:"bv1sdm6y",":first-child":{marginStart:"nadoev3v"}},v={marginStart:"bv1sdm6y",color:"g4ti3y4y"},x={display:"p357zi0d",alignItems:"gndfcl4n"},C={color:"pm5hny62"},y={display:"p357zi0d"},_={flexGrow:"ggj6brxn",paddingTop:"lqdozo90",paddingEnd:"f9ovudaz",paddingBottom:"bavixdlz",paddingStart:"gx1rr48f"},b=n(76672).Mirrored(["START","END"]),E=e=>{let{dayKey:t}=e;return`${t}_business_hours`};function S(e){let{day:t,onChange:n}=e;const{closed:a}=t,r=E(t);return(0,h.jsx)("div",{className:(0,p.default)(m),children:(0,h.jsx)(s.CheckBox,{id:r,checked:!a,onChange:n})})}function j(e){let{onClick:t}=e;return(0,h.jsx)("div",{className:(0,p.default)(g),children:(0,h.jsx)(u.default,{title:r.default.t(552),"aria-label":r.default.t(552),name:"x-alt",onClick:t})})}function k(e){let{onClick:t}=e;return(0,h.jsx)("div",{className:(0,p.default)(g),children:(0,h.jsx)(d.default,{"aria-label":f.fbt._("Add additional hours",null,{hk:"1RUQxq"}),label:f.fbt._("Add set of hours",null,{hk:"XYa8r"}),onClick:t,prefixIcon:"status-clock",iconTheme:"padded-svg"})})}function T(e){let{value:t,onChange:n,onBlur:a}=e;const r=(0,i.isValidTime)(t)?null:" ";return(0,h.jsx)("div",{className:(0,p.default)(g),children:(0,h.jsx)(c.TextInput,{managed:!0,value:t,theme:"small",maxLength:15,customStyleThemes:["desaturated","noErrorInfo"],error:r,onChange:n,onBlur:a})})}function w(e){let{hours:t,onHoursChange:n}=e;const a=(e,n,a)=>{const r=[...t],o=a===b.START?0:1,i=[...r[n]];return i[o]=e,r[n]=i,r},r=(e,n)=>{const r=n===b.START?0:1,i=t[e][r],l=(0,o.timeStringToMinutes)(i);if(void 0!==l)return a((0,o.minutesToTime)(l),e,n)},l=[],s=t.length>=2?(0,h.jsx)(j,{onClick:()=>{n(t.slice(0,-1))}}):(0,h.jsx)(k,{onClick:()=>{n([...t,(0,i.getDefaultHoursPair)()])}});return t.forEach(((e,t)=>{let[o,i]=e;t>0&&l.push((0,h.jsx)("div",{className:(0,p.default)(v),children:f.fbt._("and",null,{hk:"280Z25"})},`AND-${t}`)),l.push((0,h.jsx)(T,{value:o,onChange:e=>{n(a(e,t,b.START))},onBlur:()=>{const e=r(t,b.START);e&&n(e)}},`${b.START}-${t}`),(0,h.jsx)(T,{value:i,onChange:e=>{n(a(e,t,b.END))},onBlur:()=>{const e=r(t,b.END);e&&n(e)}},`${b.END}-${t}`))})),(0,h.jsxs)("div",{className:(0,p.default)(x),children:[l,s]})}function D(e){let{day:t,mode:n,onHoursChange:a}=e;const{closed:r,hours:o}=t;let i;return r?i=f.fbt._("Closed",null,{hk:"3IRgct"}):n===l.BUSINESS_HOUR_MODES.APPOINTMENT_ONLY?i=f.fbt._("By appointment only",null,{hk:"e1vew"}):n===l.BUSINESS_HOUR_MODES.OPEN_24H&&(i=f.fbt._("Open 24 hours",null,{hk:"1AlfF5"})),i?(0,h.jsx)("div",{className:(0,p.default)(C),children:i}):l.BUSINESS_HOUR_MODES.SPECIFIC_HOURS&&!r?(0,h.jsx)(w,{hours:o,onHoursChange:a}):null}},814124:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{businessHours:{note:t,timezone:n,days:a}}=e,[o,i]=(0,p.useState)(e.businessHours.mode||v),[s,u]=(0,p.useState)((()=>{const e={};for(const{dayKey:t,closed:n,hours:r,dayName:o}of a)e[t]={closed:n,hours:r||[(0,l.getDefaultHoursPair)()],dayKey:t,dayName:o};return e})),h=a.map((e=>e.dayKey));return(0,m.jsx)(d.default,{title:f.fbt._("Edit Business Hours",null,{hk:"2zl0Ai"}),isValid:(0,l.isValidBusinessHours)(o,s),doSave:(0,r.default)((function*(){(0,c.qplStartProfileSave)("bizHours"),yield e.saveBusinessProfile((0,l.convertToRawBusinessProfile)({mode:o,dayValues:s,note:t,timezone:n}))})),afterSave:e.afterSave,onCancel:e.onCancel,children:(0,m.jsx)(C,{selectedMode:o,onModeChange:i,days:s,onDayValuesChange:u,daysOrder:h})})};var r=a(n(348926)),o=a(n(81109)),i=n(863702),l=n(233572),s=n(53668),d=a(n(434544)),u=a(n(138801)),c=n(582145),f=n(548360),p=n(667294),h=a(n(156720));n(224190);var m=n(785893);const g={width:"hblzrxh7",height:"e5sv7owa",paddingTop:"n1yiu2zv",paddingEnd:"abxuf49s",paddingBottom:"eb4rp10x",paddingStart:"mhcwslh8",overflowY:"ag5g9lrv",borderBottom:"qmxv8cnq"},v=(n(76672).Mirrored(["START","END"]),s.BUSINESS_HOUR_MODES.SPECIFIC_HOURS);function x(e){let{selectedMode:t,onSelect:n}=e;return(0,m.jsx)(u.default,{onSelect:n,selectedId:t,tabConfigs:[{title:f.fbt._("Selected Hours",null,{hk:"1EI8CI"}),id:s.BUSINESS_HOUR_MODES.SPECIFIC_HOURS},{title:f.fbt._("Always Open",null,{hk:"W2gxH"}),id:s.BUSINESS_HOUR_MODES.OPEN_24H},{title:f.fbt._("By Appointment",null,{hk:"nN1q9"}),id:s.BUSINESS_HOUR_MODES.APPOINTMENT_ONLY}]})}function C(e){let{selectedMode:t,onModeChange:n,days:a,onDayValuesChange:r,daysOrder:l}=e;return(0,m.jsxs)("div",{children:[(0,m.jsx)(x,{selectedMode:t,onSelect:e=>{if(n(e),e===s.BUSINESS_HOUR_MODES.OPEN_24H){const e={};for(const[t,n]of Object.entries(a))e[t]=(0,o.default)((0,o.default)({},n),{},{closed:!1});r(e)}}}),(0,m.jsx)("div",{className:(0,h.default)(g),children:l.map((e=>{const n=a[e];return(0,m.jsx)(i.DayEdit,{day:n,mode:t,updateDayValue:t=>((e,t)=>{const n=a[e],i=(0,o.default)((0,o.default)({},a),{},{[e]:(0,o.default)((0,o.default)({},n),t)});r(i)})(e,t)},e)}))})]})}},233572:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isValidTime=t.isValidBusinessHours=t.getDefaultHoursPair=t.convertToRawBusinessProfile=void 0;var a=n(224190),r=n(53668);const o=e=>void 0!==(0,a.timeStringToMinutes)(e);t.isValidTime=o;t.isValidBusinessHours=(e,t)=>{if(e===r.BUSINESS_HOUR_MODES.SPECIFIC_HOURS)for(const e in t){const n=t[e],{closed:a,hours:r}=n;if(!a)for(const[e,t]of r)if(!o(e)||!o(t))return!1}return!0};t.convertToRawBusinessProfile=e=>{let{mode:t,dayValues:n,note:o,timezone:i}=e;const l={};for(const e in n){const o=n[e],{closed:i,hours:s}=o;if(!i){const n={mode:t};t===r.BUSINESS_HOUR_MODES.SPECIFIC_HOURS&&(n.hours=s.map((e=>{let[t,n]=e;return[(0,a.timeStringToMinutes)(t)||0,(0,a.timeStringToMinutes)(n)||0]}))),l[e]=n}}return{businessHours:{config:l,note:o,timezone:i||Intl.DateTimeFormat().resolvedOptions().timeZone}}};t.getDefaultHoursPair=()=>[(0,a.minutesToTime)(540),(0,a.minutesToTime)(1080)]},957597:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.BusinessProfileFormField=function(e){let{activeField:t,error:n,fieldKey:a,fieldMetric:u,formatForSave:c,lowProfile:f,originalValue:p,placeholder:h,rawBusinessProfile:m,sessionId:g,startActive:v,textFieldConfig:x,validate:C,value:y,onActive:_,onChange:b,onError:E,onSaveBusinessProfile:S,onCancel:j}=e;const k=(null==t?void 0:t.fieldKey)===a,T=y?void 0:h;return(0,d.jsx)(l.TextInput,(0,r.default)({value:y,editable:!t||k,pending:k&&(null==t?void 0:t.editType)===o.EditType.PENDING,showRemaining:!0,onBeginEdit:()=>{null!=g&&(0,i.logProfileFieldOpen)(u,m,g),_({fieldKey:a,editType:o.EditType.EDITING})},onChange:b,onSave:()=>{(0,s.qplStartProfileSave)(a),null!=g&&(0,i.logProfileFieldSave)(u,m,g),_({fieldKey:a,editType:o.EditType.PENDING}),S(c()).then((()=>{_()}),(()=>{_()}))},onCancel:()=>{null!=g&&(0,i.logProfileFieldDiscard)(u,m,g),b(p),_(),null==j||j()},lockable:!0,lowProfile:f,multiline:!0,inputPlaceholder:T,theme:"text-input",validate:C,onError:E,error:n,testid:`biz-profile-${a}-input`,fieldName:h,startActive:v},x))};var r=a(n(81109)),o=(a(n(471410)),n(226777)),i=n(630426),l=n(990011),s=n(582145),d=n(785893)},670656:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const[t,n]=(0,E.useState)(e.initialCategories),[a,r]=(0,E.useState)(!1),[u,c]=(0,E.useState)(!1),[f,p]=(0,E.useState)([]),[m,_]=(0,E.useState)(""),S=()=>{l.ToastManager.open((0,j.jsx)(g.Toast,{id:(0,g.genId)(),msg:b.fbt._('You cannot select categories when you have selected "Not a Business"',null,{hk:"12A4L0"})}))},k=e=>{for(let n=0;n<t.length;n++)if(t[n].id===e)return!0;return!1},T=e=>{const a=t.find((e=>e.id===m));let r=t;t.length>0&&(e.not_a_biz&&!a?(r=[],S()):!e.not_a_biz&&a&&(r=t.filter((e=>e.id!==a.id)),S())),k(e.id)?n(r.filter((t=>t.id!==e.id))):n([...r,e])},D=t=>{c(!0),e.searchCategories(t||C.BUSINESS_CATEGORY_EMPTY_STR_ID).then((e=>{let n=e.categories;""!==t&&(n=n.filter((e=>!e.not_a_biz))),c(!1),p(n),_(e.notABizId),(0,v.qplAnnotateProfileCatsView)(n.length),(0,v.qplEndProfileCatsView)(i.QuickLogActionType.SUCCESS)})).catch((()=>{l.ToastManager.open((0,j.jsx)(g.Toast,{id:(0,g.genId)(),msg:b.fbt._("Something went wrong.",null,{hk:"2Cx5Nt"})})),c(!1),p([]),_(""),(0,v.qplEndProfileCatsView)(i.QuickLogActionType.FAIL)}))};return(0,E.useEffect)((()=>{D("")}),[]),(0,j.jsxs)(h.default,{title:b.fbt._("Choose up to three categories",null,{hk:"17Tmht"}),isValid:t.length>0,doSave:(0,o.default)((function*(){(0,v.qplStartProfileSave)("categories"),yield e.saveBusinessProfile({categories:t})})),afterSave:()=>{r(!0),e.afterSave()},onCancel:()=>{r(!0),e.onCancel()},children:[(0,j.jsx)("div",{className:s.default.searchBackground,children:(0,j.jsx)(d.default,{onSearch:e=>{u||a||((0,v.qplStartProfileCatsView)("Search"),D(e))},placeholder:b.fbt._("Search categories",null,{hk:"4zfNoj"})})}),(0,j.jsxs)("div",{className:s.default.editMain,children:[(0,j.jsx)("div",{className:s.default.list,children:(0,j.jsx)(w,{isLoading:u,results:f,isSelected:k,isDisabled:e=>!e.not_a_biz&&!k(e.id)&&t.length>=y.MAX_BUSINESS_CATEGORIES,toggleResultById:e=>{const t=f.filter((t=>t.id===e))[0];t&&T(t)}})}),t&&(0,j.jsx)(x.default,{categories:t,onRemoveItem:e=>{const n=t.filter((t=>t.id===e))[0];n&&T(n)}})]})]})};var r=a(n(81109)),o=a(n(348926)),i=n(451897),l=n(694816),s=a(n(704830)),d=a(n(248837)),u=n(316593),c=n(747915),f=a(n(944942)),p=a(n(630855)),h=a(n(434544)),m=n(111054),g=n(950452),v=n(582145),x=a(n(298001)),C=n(132742),y=n(348018),_=a(n(294184)),b=n(548360),E=n(667294),S=a(n(616223)),j=n(785893);function k(e){let{category:t,toggleResultById:n}=e;return(0,j.jsxs)("div",{className:s.default.rowMain,children:[(0,j.jsx)("div",{className:s.default.rowCheckbox,children:(0,j.jsx)(u.CheckBox,{id:`${t.id}`,onChange:()=>{!t.disabled&&n(t.id)},checked:t.selected,disabled:t.disabled})}),(0,j.jsx)("label",{"data-testid":"category-list-item",className:(0,_.default)(s.default.rowLabel,{[s.default.disabled]:t.disabled}),htmlFor:t.id,children:t.localized_display_name})]})}function T(e){let{label:t}=e;return(0,j.jsxs)("div",{className:s.default.rowMain,children:[(0,j.jsx)("div",{className:s.default.rowCheckbox}),t]})}function w(e){let{isLoading:t,results:n,isSelected:a,isDisabled:o,toggleResultById:i}=e;const l=(0,S.default)((()=>new p.default));if(t)return(0,j.jsx)("div",{className:s.default.loadingSpinner,children:(0,j.jsx)(m.Spinner,{color:"highlight",size:44,stroke:6})});if(!n||0===n.length)return(0,j.jsx)(T,{label:b.fbt._("No categories found",null,{hk:"2xfbJX"})});const d=n.map((e=>(0,r.default)((0,r.default)({},e),{},{id:e.id,itemKey:e.id.toString(),disabled:o(e),selected:a(e.id)})));return(0,j.jsx)(f.default,{flatListControllers:[l.current],children:(0,j.jsx)(c.FlatList,{data:d,flatListController:l.current,direction:"vertical",renderItem:e=>(0,j.jsx)(k,{category:e,toggleResultById:i}),defaultItemHeight:48})})}},330923:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{businessProfile:t,saveBusinessProfile:n,sessionId:a}=e;const[r,i]=(0,M.useState)(),[d,j]=(0,M.useState)(),[D,A]=(0,M.useState)(),[N,G]=(0,M.useState)(),[z,q]=(0,M.useState)(),[W,V]=(0,M.useState)(),[Y,K]=(0,M.useState)(),[X,Q]=(0,M.useState)(),[J,$]=(0,M.useState)(),[Z,ee]=(0,M.useState)(!1),te=(0,c.getMeUser)(),ne=(0,l.canSeeECommerceComplianceIndiaHardEnforcementBusinessJourney)(te.user),[ae,re]=(0,M.useState)();(0,M.useEffect)((()=>{const e=(0,y.convertRawBusinessProfile)(t);i(e.description),A(e.email),j(e.address),G(e.primaryWebsite),q(e.secondaryWebsite),V(Boolean(e.primaryWebsite&&!e.secondaryWebsite))}),[t]),(0,M.useEffect)((()=>{(0,f.validateEmail)(D)&&K(null)}),[D]),(0,M.useEffect)((()=>{(0,f.validateURL)(N)&&Q(null)}),[N]),(0,M.useEffect)((()=>{(0,f.validateURL)(z)&&$(null)}),[z]);const oe=()=>{const e=[];return N&&e.push(N),z&&e.push(z),{website:e.map(((e,t)=>{if(!u.default.isHttps(e)&&!u.default.isHttp(e)){const n=`https://${e}`;return 0===t?G(n):q(n),n}return e}))}},ie=(0,M.useCallback)((()=>ne?(0,S.default)():void 0),[ne]),le=(0,y.convertRawBusinessProfile)(t);let se,de,ue=I.fbt._("Business Information",null,{hk:"36RGyI"});(0,l.canSeeBizProfileV3)()&&(ue=null,se=x.default.noPaddingTop);null!=t.customUrlPaths&&t.customUrlPaths.length>0&&(0,l.isSmbMelonDisplayEnabled)()&&(de=(0,O.jsx)(H,{url:`${w.BUSINESS_URL_DOMAIN}${t.customUrlPaths[0]}`,activeField:ae}));return(0,O.jsxs)(k.default,{title:ue,theme:"refresh",className:se,children:[(0,O.jsx)(U,{activeField:ae}),de,(0,O.jsx)(B,{config:{icon:"business-description",content:(0,O.jsx)(g.BusinessProfileFormField,{activeField:ae,fieldKey:"description",fieldMetric:p.default.BUSINESS_PROFILE_FIELD.DESCRIPTION,formatForSave:()=>({description:r}),lowProfile:!0,originalValue:le.description,placeholder:I.fbt._("Business Description",null,{hk:"2Q2DP8"}),rawBusinessProfile:t,sessionId:a,textFieldConfig:{maxLength:_.BUSINESS_PROFILE_FIELDS_LENGTH.DESCRIPTION,supportsEmoji:!0},value:r,onActive:re,onChange:i,onSaveBusinessProfile:n})},activeField:ae}),(0,O.jsx)(B,{config:{icon:"business-category",type:"container",emptyText:I.fbt._("Categories",null,{hk:"2YgYDL"}),content:0===le.categories.length?null:(0,O.jsx)(F,{categories:le.categories}),fieldName:I.fbt._("Categories",null,{hk:"2YgYDL"}),onEdit:()=>{(0,E.qplStartProfileCatsView)("Profile"),(0,C.logProfileFieldOpen)(p.default.BUSINESS_PROFILE_FIELD.CATEGORY,t,a),s.ModalManager.open((0,O.jsx)(v.default,{initialCategories:le.categories,saveBusinessProfile:n,searchCategories:e=>T.BusinessCategoriesResultCollection.find(e),afterSave:()=>(0,C.logProfileFieldSave)(p.default.BUSINESS_PROFILE_FIELD.CATEGORY,t,a),onCancel:()=>{(0,C.logProfileFieldDiscard)(p.default.BUSINESS_PROFILE_FIELD.CATEGORY,t,a)}}))}},activeField:ae}),(0,O.jsx)(B,{config:{icon:"business-address",content:(0,O.jsx)(h.BusinessAddressField,{businessProfile:le,activeField:ae,rawBusinessProfile:t,sessionId:a,value:d,onActive:re,onChange:j,onSaveBusinessProfile:n,validate:e=>(0,o.existsField)(e,te),onError:ie})},activeField:ae}),(0,O.jsx)(B,{config:{icon:"business-hours",type:"container",emptyText:I.fbt._("Business Hours",null,{hk:"1bV20v"}),content:null==le.hours.mode?null:(0,O.jsx)(L,{hours:le.hours}),fieldName:I.fbt._("Business Hours",null,{hk:"1bV20v"}),onEdit:()=>{(0,C.logProfileFieldOpen)(p.default.BUSINESS_PROFILE_FIELD.HOURS,t,a),s.ModalManager.open((0,O.jsx)(m.default,{businessHours:le.hours,saveBusinessProfile:n,onCancel:()=>{(0,C.logProfileFieldDiscard)(p.default.BUSINESS_PROFILE_FIELD.HOURS,t,a)},afterSave:()=>(0,C.logProfileFieldSave)(p.default.BUSINESS_PROFILE_FIELD.HOURS,t,a)}))}},activeField:ae}),(0,O.jsx)(B,{config:{icon:"business-email",content:(0,O.jsx)(g.BusinessProfileFormField,{activeField:ae,error:Y,fieldKey:"email",fieldMetric:p.default.BUSINESS_PROFILE_FIELD.EMAIL,formatForSave:()=>({email:D}),lowProfile:!1,originalValue:le.email,placeholder:I.fbt._("Email Address",null,{hk:"5tSKT"}),rawBusinessProfile:t,sessionId:a,textFieldConfig:{maxLength:_.BUSINESS_PROFILE_FIELDS_LENGTH.EMAIL},validate:e=>(0,f.validateEmail)(e),value:D,onActive:re,onChange:A,onError:()=>{K(I.fbt._("Incorrect email address format",null,{hk:"1KuwvT"}))},onSaveBusinessProfile:n})},activeField:ae}),(0,O.jsx)(B,{config:{icon:"business-website",theme:b.IconSectionTheme.SmallMargin,content:(0,O.jsx)("div",{children:(0,O.jsx)(g.BusinessProfileFormField,{activeField:ae,error:X,fieldKey:"primaryWebsite",fieldMetric:p.default.BUSINESS_PROFILE_FIELD.WEBSITE,formatForSave:oe,lowProfile:!1,originalValue:le.primaryWebsite,placeholder:I.fbt._("Website",null,{hk:"2HRvqj"}),rawBusinessProfile:t,sessionId:a,textFieldConfig:{maxLength:_.BUSINESS_PROFILE_FIELDS_LENGTH.WEBSITE},validate:f.validateURL,value:N,onActive:re,onChange:G,onError:()=>{Q(I.fbt._("URL is incorrect",null,{hk:"xiOtm"}))},onSaveBusinessProfile:n})})},activeField:ae}),le.primaryWebsite&&(z||!W?(0,O.jsx)(B,{config:{icon:"business-website",theme:b.IconSectionTheme.NoMargin,content:(0,O.jsx)("div",{children:(0,O.jsx)(g.BusinessProfileFormField,{activeField:ae,error:J,fieldKey:"secondaryWebsite",fieldMetric:p.default.BUSINESS_PROFILE_FIELD.WEBSITE,formatForSave:oe,lowProfile:!1,originalValue:le.secondaryWebsite,placeholder:I.fbt._("Website",null,{hk:"2HRvqj"}),rawBusinessProfile:t,sessionId:a,startActive:Z,textFieldConfig:{maxLength:_.BUSINESS_PROFILE_FIELDS_LENGTH.WEBSITE},validate:f.validateURL,value:z,onActive:re,onChange:q,onError:()=>{$(I.fbt._("URL is incorrect",null,{hk:"xiOtm"}))},onSaveBusinessProfile:n})})},activeField:ae}):(0,O.jsx)(B,{config:{icon:"business-website",theme:b.IconSectionTheme.NoMargin,content:(0,O.jsx)("div",{children:(0,O.jsx)("button",{className:(0,P.default)(R.addAnotherWebsite),onClick:()=>{V(!1),ee(!0)},children:I.fbt._("Add another website",null,{hk:"1HOyZt"})})})},activeField:ae}))]})};var r=a(n(81109)),o=n(374316),i=a(n(568064)),l=n(408139),s=n(914597),d=n(128298),u=a(n(376139)),c=n(978820),f=n(501474),p=a(n(471410)),h=n(479686),m=a(n(814124)),g=n(957597),v=a(n(670656)),x=a(n(573308)),C=n(630426),y=n(328826),_=n(53668),b=n(584287),E=n(582145),S=a(n(422635)),j=a(n(452665)),k=a(n(833308)),T=n(203754),w=n(348018),D=n(317239),I=n(548360),M=n(667294),P=a(n(156720)),A=n(735461),O=n(785893);const R={addAnotherWebsite:{color:"ky3f94nk",fontSize:"f8jlpxt4",textTransform:"ofejerhi"},businessHoursDayColumn:{flexGrow:"gj6qtt9u",flexShrink:"m0h2a7mj",flexBasis:"rjo8vgbg",textTransform:"aprpv14t"},businessHoursSection:{display:"p357zi0d"},businessHoursTimeColumn:{flexGrow:"a6lcuizr",flexShrink:"m0h2a7mj",flexBasis:"rjo8vgbg"},infoText:{color:"t35qvd06",fontSize:"dsh4tgtl",lineHeight:"jgi8eev7",marginTop:"dkeqio29"},bizUrl:{wordBreak:"m1c2hokz"}};function L(e){let{hours:{mode:t,days:n}}=e;return null==t?null:(0,O.jsx)("div",{children:n.map(((e,n)=>{let{dayName:a,dayKey:r,closed:o,hours:i}=e;return(0,O.jsxs)("div",{className:(0,P.default)(R.businessHoursSection,0!==n&&d.uiMargin.top28),"data-testid":"business-hours-section-row",children:[(0,O.jsx)("div",{className:(0,P.default)(R.businessHoursDayColumn),children:a}),(0,O.jsx)("div",{className:(0,P.default)(R.businessHoursTimeColumn),children:(0,O.jsx)(N,{mode:t,closed:o,hours:i})})]},r)}))})}function N(e){let{mode:t,closed:n,hours:a}=e;if(n)return I.fbt._("Closed",null,{hk:"3IRgct"});switch(t){case _.BUSINESS_HOUR_MODES.SPECIFIC_HOURS:return(0,O.jsx)(O.Fragment,{children:a&&a.map(((e,t)=>{let[n,a]=e;return(0,O.jsxs)("div",{className:(0,P.default)(0!==t&&d.uiMargin.top16),"data-testid":"business-hours-time",children:[n," - ",a]},t)}))});case _.BUSINESS_HOUR_MODES.APPOINTMENT_ONLY:return I.fbt._("By appointment only",null,{hk:"e1vew"});case _.BUSINESS_HOUR_MODES.OPEN_24H:return I.fbt._("Open 24 hours",null,{hk:"1AlfF5"});default:return null}}function F(e){let{categories:t}=e;return 0===t.length?null:(0,O.jsx)("div",{"data-testid":"biz-profile-category-input",children:t.map((e=>e.localized_display_name)).join(i.default.t(254))})}function B(e){let{config:t,activeField:n}=e;return(0,O.jsx)(b.IconSection,(0,r.default)((0,r.default)({},t),{},{hideEditIcon:Boolean(n)}))}function U(e){let{activeField:t}=e;const{pushname:n}=(0,A.useModelValues)(D.Conn,["pushname"]);if(null==n)return null;const a=(0,l.canSeeBizProfileV3)()?b.IconSectionTheme.NoMargin:void 0;return(0,O.jsx)(B,{config:{theme:a,icon:"account-box",iconClass:x.default.verifiedNameIcon,content:(0,O.jsxs)("div",{children:[(0,O.jsx)("div",{children:n}),(0,O.jsx)("div",{className:(0,P.default)(R.infoText),children:I.fbt._("This name will be visible to your WhatsApp customers and can be edited from the app on your mobile device.",null,{hk:"1y9lc"})})]})},activeField:t})}function H(e){let{url:t,activeField:n}=e;return null==t?null:(0,O.jsx)(B,{config:{icon:"business-website",iconClass:x.default.verifiedNameIcon,onEdit:()=>{s.ModalManager.open((0,O.jsx)(j.default,{okText:I.fbt._("OK",null,{hk:"2KEeHb"}),onOK:()=>s.ModalManager.close(),children:I.fbt._("This url will be visible to your WhatsApp customers and can be edited from the app on your mobile device.",null,{hk:"rhTNH"})}))},content:(0,O.jsx)("div",{className:R.bizUrl,children:t}),fieldName:I.fbt._("Custom URL",null,{hk:"FmWY1"})},activeField:n})}},226777:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoadType=t.EditType=void 0;const a=n(76672).Mirrored(["EDITING","PENDING","DONE","ERROR"]);t.EditType=a;const r=n(76672).Mirrored(["PENDING","DONE","ERROR"]);t.LoadType=r},744281:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const[e,t]=(0,_.useState)(d.LoadType.PENDING),[n,a]=(0,_.useState)(),l=(0,_.useRef)(Math.floor(2147483648*Math.random()).toString()),C=function(){var e=(0,r.default)((function*(){t(d.LoadType.PENDING);try{const e=yield j();a(e),t(d.LoadType.DONE),(0,u.logProfileOpen)(e,l.current)}catch(e){t(d.LoadType.ERROR)}}));return function(){return e.apply(this,arguments)}}();if((0,_.useEffect)((()=>{C()}),[]),e===d.LoadType.PENDING)return(0,E.jsx)("div",{className:(0,b.default)(S.loadingSpinner),children:(0,E.jsx)(g.Spinner,{color:"default",size:24,stroke:6})});if(e===d.LoadType.ERROR)return(0,E.jsx)(x.default,{title:y.fbt._("Business Information",null,{hk:"36RGyI"}),theme:"refresh",children:(0,E.jsxs)(h.FlexRow,{align:"center",justify:"center",children:[(0,E.jsx)(m.default,{children:i.default.t(159)}),(0,E.jsx)(m.default,{xstyle:S.retryButton,children:(0,E.jsx)(p.default,{onClick:()=>{C()},type:"simplified",children:y.fbt._("Retry",null,{hk:"2jS9Tg"})})})]})});if(e===d.LoadType.DONE&&n)return(0,E.jsx)(s.default,{sessionId:l.current,businessProfile:n,saveBusinessProfile:function(){var e=(0,r.default)((function*(e){try{yield(0,f.editBusinessProfile)(e)}catch(e){throw(0,c.showError)(i.default.t(160)),(0,v.qplEndProfileSave)(o.QuickLogActionType.FAIL),__LOG__(3,void 0,void 0,!0)`business_profile:edit_form save failed`,SEND_LOGS(`businessProfile edit handled server error - ${e.status}`),e}try{const e=yield k();return a(e),(0,v.qplEndProfileSave)(o.QuickLogActionType.SUCCESS),e}catch(e){throw(0,c.showError)(i.default.t(159)),(0,v.qplEndProfileSave)(o.QuickLogActionType.FAIL),e}}));return function(){return e.apply(this,arguments)}}()});return null};var r=a(n(348926)),o=n(451897),i=a(n(568064)),l=n(978820),s=a(n(330923)),d=n(226777),u=n(630426),c=n(729283),f=n(933866),p=a(n(39770)),h=n(429623),m=a(n(748846)),g=n(111054),v=n(582145),x=a(n(833308)),C=n(493581),y=n(548360),_=n(667294),b=a(n(156720)),E=n(785893);const S={retryButton:{height:"epwkujcx",marginStart:"nzcjdldu"},loadingSpinner:{display:"p357zi0d",alignItems:"gndfcl4n",justifyContent:"ac2vgrno",height:"ppled2lx",paddingTop:"i5tg98hk",paddingEnd:"f9ovudaz",paddingBottom:"przvwfww",paddingStart:"gx1rr48f"}},j=function(){var e=(0,r.default)((function*(){const e=(0,l.getMeUser)(),t=C.BusinessProfileCollection.get(e);t&&t.markStale();return(yield C.BusinessProfileCollection.find(e)).serialize()}));return function(){return e.apply(this,arguments)}}(),k=function(){var e=(0,r.default)((function*(){const e=(0,l.getMeUser)(),t=yield C.BusinessProfileCollection.update(e);return(Array.isArray(t)?t[0]:t).serialize()}));return function(){return e.apply(this,arguments)}}()},328826:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertRawBusinessProfile=void 0;var a=n(319496);t.convertRawBusinessProfile=e=>{const{description:t,email:n,address:r,website:o,categories:i,businessHours:l,latitude:s,longitude:d}=e,[u,c]=o||[];return{description:t,email:n,address:r,primaryWebsite:u,secondaryWebsite:c,hours:(0,a.getBusinessHoursForEdit)(l),categories:i||[],latitude:s,longitude:d}}},729283:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showError=void 0;var a=n(694816),r=n(950452),o=n(785893);t.showError=e=>{a.ToastManager.open((0,o.jsx)(r.Toast,{msg:e,duration:6e3,id:(0,r.genId)()}))}},944189:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.CartDetailDrawer=function(e){const{onBack:t,sellerJid:n,chat:a,closeDrawerRightOnSend:s,onProductCatalog:h,onProductDetail:m,isPushed:v=!0}=e,_=(0,X.useContext)(G.DrawerContext),b=(0,q.useIsDarkTheme)(),E=(0,X.useMemo)((()=>Y.CartCollection.findCart(n)),[n]),k=(0,X.useRef)(null),I=(0,X.useRef)(null),M=(0,J.default)((()=>new o.PromiseQueue)),O=(0,J.default)((()=>new P.default)),[R,ee]=(0,X.useState)(!0),[ne,ae]=(0,X.useState)(void 0),[re,oe]=(0,X.useState)([]),[ie,le]=(0,X.useState)(E.message),de=function(){var e=(0,r.default)((function*(e){const[t,n]=yield Promise.all([e?(0,c.default)(E,v):Promise.resolve(),W.BusinessProfileCollection.find(a.id)]);t&&(I.current=t);const r=(0,u.matchCartItemsToProducts)(E,I.current);ee(!1),ae(n),oe(r)}));return function(){return e.apply(this,arguments)}}();(0,$.useListener)(E,"change:cartItemCollection",(()=>{M.current.enqueue((()=>de()))})),(0,X.useEffect)((()=>{let e=!0;v&&(0,F.qplAnnotateCartView)(E.id.toString()!==n,E.itemCount),de(!0,v).then((()=>{e=!1,v&&(0,F.qplEndCartView)(i.QuickLogActionType.SUCCESS),(0,S.logCartListImpression)(E.id.toString(),(0,w.getProductCatalogContext)(_))})).catch((()=>{__LOG__(4,!0,new Error,!0)`Unable to open the cart`,SEND_LOGS("openCart: failed to open the cart"),(0,y.default)(),(0,d.default)(E)})).finally((()=>{e&&v&&(0,F.qplEndCartView)(i.QuickLogActionType.FAIL),ee(!1)}))}),[]);const ue=R?(0,Z.jsx)(A.default,{}):(0,Z.jsx)(se,{cart:E,messageInputRef:k,chat:a,onSend:()=>{ee(!0),(0,F.qplStartOrderCreate)(re.length),(0,f.default)(E,a).then((e=>{const n=Boolean(E.message);(0,T.logSendOrderMessage)({orderId:e,catalogOwnerJid:E.id,catalogContext:(0,w.getProductCatalogContext)(_),isOrderMsgAttached:n,quantity:E.itemCount}),(0,x.commerceThreadsLoggingEnabled)()&&(0,j.addChatThreadLoggingActivities)([{activityType:"ordersSent",ts:(0,l.unixTime)(),chatId:a.id}]),t(),(0,d.default)(E),E.message=void 0,s&&g.DrawerManager.existsDrawerRight((e=>{e&&g.DrawerManager.closeDrawerRight()})),(0,F.qplEndOrderCreate)(i.QuickLogActionType.SUCCESS)})).catch((()=>{__LOG__(4,!0,new Error,!0)`Unable to create catalog order`,SEND_LOGS("submitOrder: order creation or order message send error"),(0,y.default)(),de(!0),(0,F.qplEndOrderCreate)(i.QuickLogActionType.FAIL)})).finally((()=>{ee(!1)}))},onChange:e=>{le(e),(0,p.default)(E,e)},onMaxPasteExceeded:()=>{C.ModalManager.open((0,Z.jsx)(B.default,{title:K.fbt._("Message Too Long",null,{hk:"3CMbLA"}),onOK:()=>{C.ModalManager.close()},okText:K.fbt._("OK",null,{hk:"2KEeHb"}),children:K.fbt._("The message you’re pasting is too long. Try shortening it or sending it as a separate message.",null,{hk:"9VR0L"})}))},cartMessage:ie,emptyCartContent:()=>(0,Z.jsxs)("div",{className:(0,Q.default)(te.emptyCartContainer),children:[(0,Z.jsx)(L.default,{name:"shopping-cart-empty"}),(0,Z.jsx)(N.TextDiv,{xstyle:te.emptyCardHeader,theme:"large",children:K.fbt._("Add items to your cart",null,{hk:"411bLF"})}),(0,Z.jsx)(N.TextDiv,{xstyle:te.emptyCardText,theme:"plain",children:K.fbt._("Collect all the items you're interested in here and then send them to the business. Use your cart to ask about buying, customizing, delivery, or anything you want.",null,{hk:"2L1JTk"})}),(0,V.hasCatalog)(ne)&&(0,Z.jsx)(D.default,{onClick:h,type:"primary",children:K.fbt._("View catalog",null,{hk:"1bDXja"})})]}),cartFlatListControllerRef:O,onProductDetail:m,onProductCatalog:h,sellerJid:n,cartProductItems:re,isDarkTheme:b,isDirectConnection:Boolean(null==ne?void 0:ne.isBusinessDirectConnection())});return(0,Z.jsxs)(U.default,{onDrop:t,theme:"striped",children:[(0,Z.jsx)(z.DrawerHeader,{title:K.fbt._("Your cart",null,{hk:"Sn66V"}),type:z.DRAWER_HEADER_TYPE.SMALL,onBack:t}),(0,Z.jsx)(H.default,{flatListControllers:[O.current],children:ue})]})};var r=a(n(348926)),o=n(927870),i=n(451897),l=n(892844),s=n(257243),d=a(n(643327)),u=n(733993),c=a(n(662554)),f=a(n(481136)),p=a(n(428578)),h=a(n(364369)),m=n(471682),g=n(141455),v=n(221310),x=n(408139),C=n(914597),y=a(n(56901)),_=n(128298),b=a(n(540436)),E=a(n(238778)),S=n(441868),j=n(932107),k=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=ee(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(n(939519)),T=n(379544),w=n(397567),D=a(n(39770)),I=n(912591),M=n(429623),P=a(n(630855)),A=a(n(329796)),O=a(n(784518)),R=n(482857),L=a(n(23217)),N=n(113923),F=n(582145),B=a(n(452665)),U=a(n(60453)),H=a(n(69637)),G=n(427394),z=n(994790),q=n(597628),W=n(493581),V=n(794010),Y=n(612392),K=n(548360),X=n(667294),Q=a(n(156720)),J=a(n(616223)),$=n(587550),Z=n(785893);function ee(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(ee=function(e){return e?n:t})(e)}const te={emptyCartContainer:{display:"p357zi0d",flexDirection:"f8m0rgwh",alignItems:"gndfcl4n",height:"ppled2lx",paddingTop:"gq7nj7y3",paddingEnd:"td5bf8pq",paddingBottom:"eynyaxvo",paddingStart:"l3k7h4x6",backgroundColor:"ihvf49ua"},emptyCardHeader:{marginTop:"nylzjxre",marginEnd:"jnwc1y2a",marginBottom:"pz0xruzv",marginStart:"svoq16ka"},emptyCardText:{marginBottom:"bvhm1occ",textAlign:"qfejxiq4"},cartMessage:{zIndex:"mb8var44",display:"p357zi0d",flexDirection:"f8m0rgwh",width:"ln8gz9je",marginBottom:"mggyuyyy"},btnSend:{position:"lhggkp7q",end:"h223g3sc",bottom:"kyr91zaj",zIndex:"b9fczbqn",paddingTop:"i5tg98hk",paddingEnd:"f9ovudaz",paddingBottom:"przvwfww",paddingStart:"gx1rr48f",marginTop:"tt8xd2xn",marginEnd:"jnwc1y2a",marginBottom:"mpdn4nr2",marginStart:"svoq16ka",color:"svlsagor",textAlign:"qfejxiq4",opacity:"axi1ht8l"},contentBackground:{backgroundColor:"ihvf49ua"},addMoreBtn:{marginBottom:"pel5o5rz"},footer:{position:"g0rxnol2",zIndex:"b9fczbqn",boxSizing:"cm280p3y",backgroundColor:"ihvf49ua"},footerDark:{backgroundColor:"emqjox7q"},footerBorder:{borderTop:"swyb62mu"}},ne=e=>{const t=e.cart.itemCount;return null==t||0===t?null:(0,Z.jsx)(N.TextDiv,{theme:"title",children:K.fbt._({"*":"{cart-number-of-items} items",_1:"1 item"},[K.fbt._plural(t,"cart-number-of-items")],{hk:"3Xysc4"})})},ae=e=>{let{cart:t}=e;return null!=t.total&&null!=t.currency?(0,Z.jsx)(N.TextDiv,{theme:"muted-small",children:K.fbt._("{cart-total-price}",[K.fbt._param("cart-total-price",k.formatAmount1000(t.currency,t.total))],{hk:"2h7QB7"})}):t.itemCount>0?(0,Z.jsx)(N.TextDiv,{theme:"muted-small",children:K.fbt._("Ask for total",null,{hk:"3aS7XJ"})}):null},re=e=>{const{messageInputRef:t,chat:n,onSend:a,onChange:r,onMaxPasteExceeded:o,cartMessage:i,isDirectConnection:l}=e;return l&&(0,m.supportsDirectConnection)()&&(0,s.getABPropConfigValue)("share_phone_number_on_cart_send_to_direct_connection_biz_enabled")?(0,Z.jsxs)(M.FlexColumn,{xstyle:[te.footerBorder,_.uiPadding.all16],children:[(0,Z.jsxs)(N.TextDiv,{color:"secondary",xstyle:_.uiMargin.bottom15,theme:"plain",children:[K.fbt._("By continuing, you agree to share your cart and phone number with the business so it can confirm your order and total price, including any tax, fees and discounts.",null,{hk:"a2Yd0"})," ",(0,Z.jsx)(I.ExternalLink,{href:(0,v.getJioMartPostcodeChangeLearnMoreLink)(),children:K.fbt._("Learn More",null,{hk:"281Gd"})})]}),(0,Z.jsx)(D.default,{type:"primary",onClick:a,children:K.fbt._("Send to business",null,{hk:"309iQm"})})]}):(0,Z.jsxs)(M.FlexRow,{align:"center",justify:"center",xstyle:[_.uiPadding.vert6,_.uiPadding.horiz20],children:[(0,Z.jsx)(b.default,{transitionName:"media-caption",className:(0,Q.default)(te.cartMessage),children:(0,Z.jsx)(O.default,{ref:t,chat:n,maxLength:h.default.MAX_CART_MESSAGE_LENGTH,multiline:!0,onEnter:a,onChange:r,onMaxPasteExceeded:o,placeholder:K.fbt._("Add a message",null,{hk:"4drJT1"}),showRemaining:!0,spellCheck:!0,supportsEmoji:!0,value:i})}),(0,Z.jsx)(b.default,{transitionAppear:!0,transitionName:"btn",children:(0,Z.jsx)("button",{"data-testid":"cart-send-button",className:(0,Q.default)(te.btnSend),tabIndex:"-1",onClick:a,title:K.fbt._("Send a cart",null,{hk:"37qP8u"}),children:(0,Z.jsx)(R.Round,{large:!0,children:(0,Z.jsx)(L.default,{name:"send",directional:!0})})})})]})},oe=e=>{let{onProductCatalog:t}=e;return(0,Z.jsx)(D.default,{testid:"cart-add-more-button",type:"secondary",xstyle:te.addMoreBtn,onClick:t,children:K.fbt._("Add More",null,{hk:"2QM3jH"})})},ie=e=>{let{cart:t}=e;return(0,Z.jsxs)("div",{className:(0,Q.default)(_.uiPadding.all18,te.contentBackground),children:[(0,Z.jsx)(ne,{cart:t}),(0,Z.jsx)(ae,{cart:t})]})},le=e=>{let{cart:t,onProductCatalog:n}=e;return(0,Z.jsxs)(M.FlexRow,{justify:"all",align:"center",xstyle:[_.uiPadding.all16,te.contentBackground],children:[(0,Z.jsx)(ne,{cart:t}),(0,Z.jsx)(oe,{onProductCatalog:n})]})};function se(e){const{cart:t,messageInputRef:n,chat:a,onSend:r,onChange:o,onMaxPasteExceeded:i,cartMessage:l,emptyCartContent:s,cartFlatListControllerRef:d,onProductDetail:u,sellerJid:c,cartProductItems:f,isDarkTheme:p,isDirectConnection:h,onProductCatalog:m}=e;if(!(t.itemCount>0))return s();const g=(0,x.isSendCartCTAEnabled)()?(0,Z.jsx)(le,{cart:t,onProductCatalog:m}):(0,Z.jsx)(ie,{cart:t});return(0,Z.jsxs)(Z.Fragment,{children:[g,(0,Z.jsx)(E.default,{flatListController:d.current,onProductDetail:u,cart:t,sellerJid:c,cartProductItems:f}),(0,Z.jsx)("div",{className:(0,Q.default)(te.footer,p&&te.footerDark),children:(0,Z.jsx)(re,{messageInputRef:n,chat:a,onSend:r,onChange:o,onMaxPasteExceeded:i,cartMessage:l,isDirectConnection:h})})]})}},238778:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{cartProductItems:t,onProductDetail:n,sellerJid:a}=e,f=(0,o.isSendCartCTAEnabled)()?s.CART_PRODUCT_LIST_ITEM_HEIGHT:s.PRODUCT_LIST_ITEM_HEIGHT;return(0,c.jsx)(u.default,{flatListControllers:[e.flatListController],children:(0,c.jsx)(d.FlatList,{flatListController:e.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:t.map((e=>({itemKey:e.cartItem.id,contentKey:(0,r.default)("cartItem"),product:e.product,cartItem:e.cartItem}))),renderItem:e=>{const t=(0,o.isSendCartCTAEnabled)()?l.default:i.default;return(0,c.jsx)(t,{cartId:a,product:e.product,quantity:e.cartItem.quantity,onClick:()=>n({productId:e.cartItem.id,businessOwnerJid:a})})},defaultItemHeight:f})})};var r=a(n(873955)),o=n(408139),i=a(n(230068)),l=a(n(284437)),s=n(364481),d=n(747915),u=a(n(944942)),c=n(785893)},230068:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const{cartId:n,product:a,quantity:r,onClick:o}=e,i=(0,_.jsx)(m.EmojiText,{text:a.name,ellipsify:!0,titlify:!0}),l=null===(t=a.getPreviewImage())||void 0===t?void 0:t.mediaData;let s;s=l?(0,_.jsx)(p.ProductThumb,{theme:"list",mediaData:l}):(0,_.jsx)(_.Fragment,{});const{isHovered:d,onMouseEnter:u,onMouseLeave:c}=(0,y.default)(),g=(0,_.jsx)(f.default,{className:(0,C.default)(j),product:a,fallback:v.fbt._("Ask for price",null,{hk:"2Rtbeg"})}),x=(0,_.jsx)(k,{isHovered:d,cartId:n,cartProduct:a,quantity:r});return(0,_.jsx)(h.default,{onMouseEnter:u,onMouseLeave:c,image:s,customImage:!0,primary:i,secondary:g,theme:"cart-product",onClick:o,detail:x},a.id.toString())};var r=a(n(899805)),o=a(n(659214)),i=n(408139),l=a(n(239864)),s=a(n(556016)),d=a(n(552814)),u=n(441868),c=n(397567),f=a(n(962089)),p=n(303013),h=a(n(744356)),m=n(965417),g=n(427394),v=n(548360),x=n(667294),C=a(n(156720)),y=a(n(168419)),_=n(785893);const b={visibility:"kojwoqec"},E={paddingTop:"qomlamqu",visibility:"g5crjs6l"},S={display:"p357zi0d",marginEnd:"q471nw87"},j={marginEnd:"claouzo6",alignItems:"gndfcl4n",display:"p357zi0d"};function k(e){let{cartId:t,cartProduct:n,quantity:a,isHovered:f}=e;const p=(0,x.useContext)(g.DrawerContext),h=(0,c.getProductCatalogContext)(p);const m=f?(0,C.default)(E):(0,C.default)(b),v=(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(l.default,{testid:"productQuantityDropdown",quantity:a,onChange:e=>function(e,t){(0,o.default)(n,e),(0,u.logEditProduct)(n,t,e)}(e,h)}),(0,_.jsx)("div",{className:m,children:(0,_.jsx)(d.default,{onClick:e=>function(e,a){const o=(0,r.default)(t,n.id.toString());(0,r.default)(t,n.id.toString()),(0,u.logDeleteProduct)(n,a),0===o&&(0,u.logCartAbandon)(n.catalogWid.toString(),a),function(e){e.preventDefault(),e.stopPropagation()}(e)}(e,h)})})]}),y=(0,_.jsx)(s.default,{product:n,context:p});return(0,_.jsx)("div",{className:(0,C.default)(S),children:(0,i.isQuantityControlsFeatureEnabled)()?y:v})}},284437:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const{cartId:n,product:a,quantity:r,onClick:o}=e,i=(0,y.jsx)(m.EmojiText,{text:a.name,ellipsify:!0,titlify:!0}),l=null===(t=a.getPreviewImage())||void 0===t?void 0:t.mediaData,s=l?(0,y.jsx)(p.ProductThumb,{theme:"cart-list",mediaData:l}):null,{isHovered:d,onMouseEnter:u,onMouseLeave:c}=(0,C.default)(),g=(0,y.jsx)(f.default,{className:(0,x.default)(S),showTotalPrice:!0,product:a}),v=(0,y.jsx)(j,{isHovered:d,cartId:n,cartProduct:a,quantity:r});return(0,y.jsx)(h.default,{onMouseEnter:u,onMouseLeave:c,image:s,customImage:!0,primary:i,secondary:v,theme:"cart-product-v2",onClick:o,detail:g},a.id.toString())};var r=a(n(899805)),o=a(n(659214)),i=n(408139),l=a(n(239864)),s=a(n(556016)),d=a(n(552814)),u=n(441868),c=n(397567),f=a(n(962089)),p=n(303013),h=a(n(744356)),m=n(965417),g=n(427394),v=n(667294),x=a(n(156720)),C=a(n(168419)),y=n(785893);const _={visibility:"kojwoqec"},b={paddingTop:"qomlamqu",visibility:"g5crjs6l"},E={display:"p357zi0d",marginEnd:"q471nw87"},S={alignItems:"gndfcl4n",display:"p357zi0d"};function j(e){let{cartId:t,cartProduct:n,quantity:a,isHovered:f}=e;const p=(0,v.useContext)(g.DrawerContext),h=(0,c.getProductCatalogContext)(p);const m=f?(0,x.default)(b):(0,x.default)(_),C=(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(l.default,{testid:"productQuantityDropdown",quantity:a,onChange:e=>function(e,t){(0,o.default)(n,e),(0,u.logEditProduct)(n,t,e)}(e,h)}),(0,y.jsx)("div",{className:m,children:(0,y.jsx)(d.default,{onClick:e=>function(e,a){const o=(0,r.default)(t,n.id.toString());(0,r.default)(t,n.id.toString()),(0,u.logDeleteProduct)(n,a),0===o&&(0,u.logCartAbandon)(n.catalogWid.toString(),a),function(e){e.preventDefault(),e.stopPropagation()}(e)}(e,h)})})]}),S=(0,y.jsx)(s.default,{product:n,context:p});return(0,y.jsx)("div",{className:(0,x.default)(E),children:(0,i.isQuantityControlsFeatureEnabled)()?S:C})}},239864:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,l.jsxs)("div",{className:(0,i.default)(s),"data-testid":e.testid,children:[(0,l.jsx)("span",{className:(0,i.default)(u),children:"▾"}),(0,l.jsx)("select",{className:(0,i.default)(d,r.uiPadding.horiz10),onClick:function(e){e.preventDefault(),e.stopPropagation()},value:e.quantity,onChange:function(t){const n=t.target;n instanceof HTMLSelectElement&&e.onChange(parseInt(n.value,10))},children:(0,l.jsx)(c,{})})]})};var r=n(128298),o=n(109581),i=a(n(156720)),l=n(785893);const s={position:"g0rxnol2",flexGrow:"ggj6brxn",flexShrink:"m0h2a7mj",flexBasis:"l07amlnk",width:"b6qzmhfs"},d={fontFamily:"shdiholb"},u={position:"lhggkp7q",top:"jgz0asyo",end:"j2mzdvlq",zIndex:"mb8var44",display:"f804f6gw",height:"hpdpob1j",fontSize:"cqiun4t2",lineHeight:"gz7w46tb",color:"hp667wtd",pointerEvents:"m62443ks",backgroundRepeat:"sxl192xd"};function c(){const e=[];for(let t=1;t<=o.MAX_QUANTITY;t++)e.push((0,l.jsx)("option",{value:t,children:t},t));return e}},126383:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{label:t,label:n}=e,a=(0,u.default)();(0,c.useListener)(d.LabelCollection,`label_updated_${n}`,(()=>{a()}));const p=d.LabelCollection.get(t);if(!p||!p.name)return null;if("label-list"===e.theme){const n=(0,f.jsx)(i.Labels,{renderAsCircle:"label-list"===e.theme,theme:e.theme,labels:[t]}),a=(0,f.jsx)(s.EmojiText,{text:p.name,ellipsify:!0,titlify:!0});return(0,f.jsx)(l.default,{theme:(0,o.canEditLabel)()?"chat-checkbox":void 0,image:n,primary:a,secondary:r.default.t(392,{count:parseInt(p.count||0,10),_plural:parseInt(p.count||0,10)})})}const h=(0,i.renderLabelSvg)(p.hexColor),m=(0,f.jsx)(s.EmojiText,{text:p.name,ellipsify:!0,titlify:!0});return(0,f.jsx)(l.default,{theme:"label-selection",image:h,primary:m})};var r=a(n(568064)),o=n(408139),i=n(384543),l=a(n(744356)),s=n(965417),d=n(316770),u=a(n(859312)),c=n(587550),f=n(785893)},267901:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{shouldScrollIntoViewAndSelect:t,selectedLabels:n,onMultiSelect:a,renderContext:o,onLabelClick:i,initialLabelState:l={}}=e,[h,m]=(0,u.useState)((()=>d.LabelCollection.toArray())),g=(0,u.useRef)(null),v=(e,t,r)=>{null==n||n.setVal(e,t,r),null==a||a(e.id)};(0,c.useListener)(d.LabelCollection,"add remove",((e,n,a)=>{if(m(d.LabelCollection.toArray()),a.add&&t){var r;const{shouldScrollIntoView:n,shouldSelect:a}=t(e.name);n&&(null===(r=g.current)||void 0===r||r.scrollIntoView({behavior:"smooth"})),a&&v(e,!0,!1)}}));const x=(0,u.useMemo)((()=>(0,r.isMDBackend)()?[...h].sort(((e,t)=>{const n=parseInt(e.id,10),a=parseInt(t.id,10);return isNaN(n)||isNaN(a)?0:n-a})):h),[h]);return(0,f.jsx)("div",{children:x.map(((t,a)=>(0,f.jsx)(p,{selectedLabels:n,renderContext:o,onLabelClick:i,initialLabelState:l,onMultiSelect:v,label:t,selectableState:e.SelectableState||new s.default(!0),ref:e=>{a===h.length-1&&(g.current=e)}},t.id)))})};var r=n(88555),o=n(408139),i=a(n(126383)),l=a(n(761837)),s=a(n(886365)),d=n(316770),u=n(667294),c=n(587550),f=n(785893);const p=(0,u.forwardRef)(((e,t)=>{let{label:n,selectedLabels:a,renderContext:r,onLabelClick:s,initialLabelState:u,onMultiSelect:c,selectableState:p}=e;if(!n.name)return null;const h=d.LabelCollection.assertGet(n.id),m="label-selection"===r||(0,o.canEditLabel)()?(0,f.jsx)(l.default,{theme:r,model:h,initialSelection:u[n.id]||0,multiSelection:a,selectableState:p,onSelect:c,children:(0,f.jsx)(i.default,{label:n.id})}):(0,f.jsx)(i.default,{label:n.id,theme:r});return(0,f.jsx)("div",{ref:t,onClick:s?s.bind(null,n.id):void 0,children:m},`label_item_${n.id}`)}));p.displayName="LabelRow"},677338:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(450796),o=a(n(145095)),i=n(451897),l=n(492574),s=n(40234),d=n(781572),u=n(141455),c=a(n(568064)),f=n(408139),p=n(914597),h=n(781845),m=n(128298),g=n(978820),v=a(n(471410)),x=n(745454),C=a(n(996152)),y=a(n(433865)),_=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=z(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(n(939519)),b=a(n(961055)),E=a(n(630855)),S=n(113923),j=n(582145),k=a(n(452665)),T=a(n(60453)),w=a(n(69637)),D=a(n(464738)),I=n(994790),M=a(n(833308)),P=n(493581),A=n(794010),O=n(584312),R=a(n(699604)),L=n(17304),N=a(n(661944)),F=n(548360),B=n(667294),U=a(n(156720)),H=a(n(616223)),G=n(785893);function z(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(z=function(e){return e?n:t})(e)}const q={backgroundColor:"ihvf49ua"};function W(e){let{chat:t,value:n,onSubmit:a,onChange:r}=e;return(0,G.jsx)("div",{className:(0,U.default)(m.uiPadding.vert0,m.uiPadding.horiz18),children:(0,G.jsx)(C.default,{chat:t,onChange:r,onSubmit:a,value:n,placeholder:F.fbt._("Add a cancelation note",null,{hk:"22DPGj"})})})}function V(e){let{sellerJid:t,order:n,onCreateOrderClick:a,onDeclineOrderClick:r}=e;return(0,x.createUserWid)(t).equals((0,g.getMaybeMeUser)())?(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(M.default,{children:(0,G.jsx)(D.default,{testid:"order-create",color:"dark",onClick:a,children:F.fbt._("Create order",null,{hk:"1S0Pla"})})}),(0,G.jsx)(M.default,{children:(0,G.jsx)(D.default,{testid:"order-decline",color:"dark",onClick:r,children:F.fbt._("Decline order",null,{hk:"1YQsHY"})})})]}):null}function Y(e){let{cancellationMessage:t,chat:n,fetchState:a,flatListController:r,isLoading:i,onOrderCancel:l,onOrderCreate:d,onProductDetail:u,order:p,ownerHasReviewed:h,sellerJid:g,sendCancelMessage:v,setCancellationMessage:x}=e;if(i||null==p)return(0,G.jsx)(b.default,{fetchState:a});let C="";C=p.products.length>0?c.default.t(392,{count:p.totalItemCount||0,_plural:p.totalItemCount||0}):F.fbt._("No Items",null,{hk:"3x8YcR"});const E=(0,G.jsx)(S.TextDiv,{theme:"title",children:C});let j=null;const k=p.products.reduce(((e,t)=>null==t.price?e:(e||0)+t.price*t.quantity),null),T=p.products.reduce(((e,t)=>null==t.currency?e:t.currency),null);j=null!=k&&null!=T?c.default.t(532,{subtotal:_.formatAmount1000(T,k)}):F.fbt._("No price entered",null,{hk:"1vzCQg"});const w=(0,G.jsx)(S.TextDiv,{theme:"muted-small",children:j});let D=null;if(null!=p.createdAt){const e=s.Clock.timeStr(p.createdAt);D=(0,G.jsx)(S.TextSpan,{theme:"muted-small",children:`${e}`})}return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(M.default,{children:[(0,G.jsx)(b.default,{fetchState:a}),(0,G.jsxs)("div",{className:(0,U.default)(q,m.uiPadding.all18),children:[E,w]}),(0,G.jsx)(y.default,{flatListController:r,onProductDetail:u,order:p,sellerJid:g}),(0,G.jsx)("div",{className:(0,U.default)(q,m.uiPadding.all18),children:D}),h?(0,G.jsx)(W,{chat:n,value:t,onSubmit:v,onChange:x}):null]}),(0,f.orderDetailsFromCartEnabled)()&&!h?(0,G.jsx)(V,{sellerJid:g,order:p,onCreateOrderClick:()=>d((0,o.default)(p,"order")),onDeclineOrderClick:l}):null]})}function K(e,t){const{userIsCartOwner:n,orderId:a,token:o,sellerJid:s,onProductDetail:f,onOrderCreate:m,ownerHasReviewed:x,chat:C,orderMessage:y,onOrderCancel:_,isPushed:b=!0}=e,[S,D]=(0,B.useState)(!0),[M,U]=(0,B.useState)("PENDING"),[z,q]=(0,B.useState)(null),[W,V]=(0,B.useState)(""),K=(0,H.default)((()=>new E.default));(0,B.useEffect)((()=>{O.OrderCollection.findOrder(a,s,o).then((e=>{D(!1),U("SUCCESS"),q(e),b&&((0,j.qplAnnotateOrderView)((null==e?void 0:e.products.length)||0),(0,j.qplEndOrderView)(i.QuickLogActionType.SUCCESS))})).catch((0,r.filteredCatch)(l.E404,(()=>{p.ModalManager.open((0,G.jsx)(k.default,{onOK:()=>{p.ModalManager.close()},okText:F.fbt._("OK",null,{hk:"12cb4U"}),children:F.fbt._("The seller has deleted your sent cart. Contact the seller for more information.",null,{hk:"1bBDJ6"})})),D(!1),U("ERROR"),(0,j.qplDropOrderView)()}))).catch((()=>{D(!1),U("ERROR"),__LOG__(4,!0,new Error,!0)`Catalog Order Display failed`,SEND_LOGS("OrderDetails: failed to display"),b&&(0,j.qplEndOrderView)(i.QuickLogActionType.FAIL)}))}),[]);const X=()=>{u.DrawerManager.closeDrawerRight()};return(0,G.jsxs)(T.default,{ref:t,theme:"striped",onDrop:X,children:[(0,G.jsx)(I.DrawerHeader,{title:n?F.fbt._("Your sent cart",null,{hk:"2rB2j3"}):c.default.t(169),type:I.DRAWER_HEADER_TYPE.SMALL,onBack:X}),(0,G.jsx)(w.default,{flatListControllers:[K.current],children:(0,G.jsx)(Y,{cancellationMessage:W,chat:C,fetchState:M,flatListController:K.current,isLoading:S,onOrderCancel:_,onOrderCreate:m,onProductDetail:f,ownerHasReviewed:x,order:z,sellerJid:s,sendCancelMessage:()=>{if(X(),null!=y){new v.default.OrderDetailsActionsSmb({orderDetailsCreationAction:v.default.ORDER_DETAILS_CREATION_ACTION.SEND_DECLINE_CART,actionCategory:String(N.default.RECEIVED_CART),orderDetailEntryPoint:String(R.default.FROM_CART),hasNote:Boolean(W),hasCatalog:(0,A.hasCatalog)(P.BusinessProfileCollection.get((0,g.getMaybeMeUser)()))}).commit();const e=F.fbt._("We have canceled your order.",null,{hk:"3cbQBD"}).toString()+"\n"+W;(0,h.sendTextMsgToChat)(C,e,{quotedMsg:new L.Msg(y)})}d.Cmd.openChatFromUnread(C)},setCancellationMessage:V})})]})}var X=(0,B.forwardRef)(K);t.default=X},344049:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.useLazyOrders=void 0;var r=n(941906),o=n(667294),i=a(n(290886));t.useLazyOrders=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;const[a,l]=(0,o.useState)(0),s=(0,o.useMemo)((()=>e.slice(0,a)),[e,a]),d=(0,o.useCallback)((t=>{l((n=>{const a=t(n)||n;return a>-1&&a<e.length?a:e.length}))}),[e]),u=e=>e.scrollTop+r.SCROLL_FUDGE>=e.scrollHeight-e.clientHeight,c=(0,i.default)((e=>{u(e)&&d((e=>e+2))}),100),f=(0,o.useCallback)((e=>{c(e.currentTarget)}),[c]),p=(0,o.useCallback)((e=>{if(e){const n=Math.round(e.clientHeight/t)+2;t>0&&a<n&&d((()=>n))}}),[d,t,a]);return(0,o.useEffect)((()=>{const e=n.current;return e&&(e.addEventListener("scroll",f),p(e)),()=>{null==e||e.removeEventListener("scroll",f)}}),[n,p,f]),{ordersLazylist:s,scrollToTop:()=>{var e;null===(e=n.current)||void 0===e||e.scroll({top:0,behavior:"smooth"})}}}},618085:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.useGetOrders=function(e,t){const[n,a]=(0,d.useState)({contactAndOrderInfoMap:{},orderStatusInfoMap:{}}),[c,f]=(0,d.useState)(!0),p=(0,d.useCallback)((e=>{a((t=>{const{contactAndOrderInfoMap:n,orderStatusInfoMap:a}=t,{contactsAndOrdersInfo:r,ordersStatusInfo:o}=e;return{contactAndOrderInfoMap:(0,l.getMergedContactAndOrderInfoMap)(n,r),orderStatusInfoMap:(0,l.getMergedOrderStatusInfoMap)(a,o)}}))}),[]),h=(0,d.useCallback)(function(){var e=(0,o.default)((function*(e,t){const{fetcher:n}=(0,l.getCachedOrdersInfoFromChat)(t),o=yield n;a((t=>(0,r.default)((0,r.default)({},t),{},{orderStatusInfoMap:(0,l.removeOrderStatusInfoFromMap)(o,e,t)})))}));return function(){return e.apply(this,arguments)}}(),[]),m=(0,d.useCallback)((e=>{a((t=>{const{contactAndOrderInfoMap:n}=t,{contactsAndOrdersInfo:a}=e;return(0,r.default)((0,r.default)({},t),{},{contactAndOrderInfoMap:(0,l.removeContactAndOrdersInfoFromMap)(n,a)})}))}),[]);(0,d.useEffect)((()=>{const e=[],t=[];return s.ChatCollection.toArray().forEach((n=>{const a=n.msgs.msgLoadState.noEarlierMsgs?l.getCachedOrdersInfoFromChat:l.getNotCachedOrdersInfoFromChat,{fetcher:r,unsubscribe:o}=a(n);r.then(p),e.push(r),t.push(o)})),Promise.all(e).finally((()=>f(!1))),()=>{t.forEach((e=>e()))}}),[p]);const{contactAndOrderInfoMap:g}=n,v=(0,d.useMemo)((()=>[...Object.keys(g).sort(((e,t)=>g[t].timestamp-g[e].timestamp))]),[g]),{ordersLazylist:x,scrollToTop:C}=(0,i.useLazyOrders)(v,t,e);return(0,u.useListener)(s.ChatCollection,"add",function(){var e=(0,o.default)((function*(e){const{fetcher:t}=(0,l.getCachedOrdersInfoFromChat)(e),n=yield t;p(n),n.contactsAndOrdersInfo.length&&C()}));return function(){return e.apply(this,arguments)}}()),(0,u.useListeners)(s.ChatCollection.toArray().map((e=>({source:e.msgs,eventOrEvents:"remove",callback:t=>{const n=(0,l.getOrdersInfoFromMsgs)([t],e.contact);n.contactsAndOrdersInfo.length?m(n):n.ordersStatusInfo.length&&h(n,t.chat)}})))),(0,u.useListeners)(s.ChatCollection.toArray().map((e=>({source:e.msgs,eventOrEvents:"add",callback:t=>{const n=(0,l.getOrdersInfoFromMsgs)([t],e.contact);p(n),n.contactsAndOrdersInfo.length&&C()}})))),{ordersInfoMap:n,isLoading:c,ordersLazylist:x}};var r=a(n(81109)),o=a(n(348926)),i=n(344049),l=n(818878),s=n(669951),d=n(667294),u=n(587550)},880456:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(128298),o=n(978820),i=a(n(471410)),l=a(n(579550)),s=n(859789),d=a(n(518985)),u=a(n(342116)),c=a(n(982240)),f=n(152604),p=a(n(108135)),h=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=P(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(n(939519)),m=n(511853),g=n(429623),v=a(n(748846)),x=n(111054),C=a(n(23217)),y=n(113923),_=a(n(60453)),b=a(n(69637)),E=a(n(464738)),S=n(994790),j=a(n(833308)),k=n(493581),T=n(794010),w=a(n(661944)),D=n(548360),I=n(667294),M=n(785893);function P(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(P=function(e){return e?n:t})(e)}function A(e,t){const n=(0,o.getMeUser)(),{chat:a,orderInfo:v,sellerWid:x}=e,{referenceId:P,discount:A,tax:R,shipping:L,subtotal:N,totalAmount:F}=v,{orderItems:B,isLoading:U}=(0,p.default)(v,x),H=(0,I.useMemo)((()=>(0,m.findOrderStatus)(a,P)),[a,P]);return(0,I.useEffect)((()=>{new i.default.OrderDetailsActionsSmb({orderDetailsCreationAction:i.default.ORDER_DETAILS_CREATION_ACTION.VIEW_ORDER_DETAILS,actionCategory:String(w.default.ORDER_DETAILS_MANAGEMENT),orderDetailEntryPoint:String(e.entryPoint),hasCatalog:(0,T.hasCatalog)(k.BusinessProfileCollection.get((0,o.getMaybeMeUser)()))}).commit()}),[e.entryPoint]),null==N?null:(0,M.jsxs)(_.default,{onDrop:e.onBack,ref:t,children:[(0,M.jsx)(S.DrawerHeader,{title:D.fbt._("Order details",null,{hk:"2HeBLz"}),onBack:e.onBack,type:S.DRAWER_HEADER_TYPE.SMALL}),(0,M.jsx)(b.default,{theme:U?"center-content":void 0,children:U?(0,M.jsx)(O,{}):(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(j.default,{xstyle:[r.uiPadding.top20,r.uiPadding.bottom15],children:(0,M.jsxs)(d.default,{children:[(0,M.jsx)(u.default,{testid:"order-status-container",orderId:v.referenceId,sellerWid:x,orderStatus:(0,M.jsx)(c.default,{orderStatus:H})}),(0,M.jsx)(l.default,{details:!0,currency:v.currency,items:B}),(0,M.jsx)(f.OrderValues,{tax:null!=R?R*s.DEFAULT_OFFSET:null,discount:null!=A?A*s.DEFAULT_OFFSET:null,shipping:null!=L?L*s.DEFAULT_OFFSET:null,subtotal:N*s.DEFAULT_OFFSET,currency:v.currency,canDisplayAdditionalCharges:!0}),(0,M.jsxs)(g.FlexRow,{justify:"all",xstyle:r.uiPadding.horiz16,testid:"order-details-total-row",children:[(0,M.jsx)(y.TextSpan,{theme:"title",children:D.fbt._("Total",null,{hk:"7xRrT"})}),(0,M.jsx)(y.TextSpan,{theme:"title",children:h.formatAmount(v.currency,F)})]})]})}),[m.OrderStatus.Canceled,m.OrderStatus.Complete].every((e=>H!==e))&&n.user===x.user&&(0,M.jsx)(j.default,{children:(0,M.jsx)(E.default,{icon:(0,M.jsx)(C.default,{color:"teal",width:20,name:"status-clock"}),testid:"order-status-update",color:"dark",onClick:()=>{var t;null===(t=e.onOrderStatusUpdateClick)||void 0===t||t.call(e)},children:D.fbt._("Update order status",null,{hk:"4j4YaZ"})})})]})})]})}function O(){return(0,M.jsx)(g.FlexRow,{align:"center",justify:"center",testid:"order-detail-drawer-loading",children:(0,M.jsx)(v.default,{children:(0,M.jsx)(x.Spinner,{})})})}var R=(0,I.forwardRef)(A);t.default=R},39049:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{productItems:t}=e,n=t.map((e=>({itemKey:e.id.toString(),product:e})));return(0,l.jsx)(i.default,{flatListControllers:[e.flatListController],children:(0,l.jsx)(o.FlatList,{testid:"order-detail-product-list",flatListController:e.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:n,renderItem:e=>{let{product:t}=e;return(0,l.jsx)(r.default,{product:t})},defaultItemHeight:60})})};var r=a(n(220329)),o=n(747915),i=a(n(944942)),l=n(785893)},332488:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(39049)),o=a(n(630855)),i=a(n(60453)),l=a(n(69637)),s=n(994790),d=a(n(833308)),u=n(548360),c=n(667294),f=(a(n(156720)),a(n(616223))),p=n(785893);const h={container:{paddingTop:"emrlamx0",paddingEnd:"folpon7g",paddingBottom:"aiput80m",paddingStart:"lyvj5e2u"}};function m(e,t){const{productItems:n}=e,a=(0,f.default)((()=>new o.default));return(0,p.jsxs)(i.default,{onDrop:e.onBack,ref:t,children:[(0,p.jsx)(s.DrawerHeader,{title:u.fbt._("Items",null,{hk:"3B8pMI"}),onBack:e.onBack,type:s.DRAWER_HEADER_TYPE.SMALL}),(0,p.jsx)(l.default,{flatListControllers:[a.current],children:(0,p.jsx)(d.default,{xstyle:h.container,theme:"refresh-padding-title",children:(0,p.jsx)(r.default,{flatListController:a.current,productItems:n})})})]})}var g=(0,c.forwardRef)(m);t.default=g},220329:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const{product:n}=e,a=(0,f.jsx)(s.EmojiText,{text:n.name,ellipsify:!0,titlify:!0}),p=(0,f.jsx)(o.OrderItemIcon,{useCustomIcon:!1===Boolean(n.mediaData),mediaData:null!==(t=n.mediaData)&&void 0!==t?t:null});let h=null;if(n.quantity){const e=r.default.t(533,{quantity:n.quantity.toString()});h=(0,f.jsx)(d.TextSpan,{children:e})}let m=null;m=(0,c.isNonZeroNumber)(n.price)?i.formatAmount1000(n.currency,n.price):u.fbt._("Ask for price",null,{hk:"3t7lv2"});const g=(0,f.jsx)(d.TextSpan,{children:m});return(0,f.jsx)(l.default,{image:p,customImage:!0,primary:a,secondary:h,detail:g,theme:"media"})};var r=a(n(568064)),o=n(545395),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(n(939519)),l=a(n(744356)),s=n(965417),d=n(113923),u=n(548360),c=n(729984),f=n(785893);function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}},259322:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{testid:t,label:n,isCanceled:a,checked:u,onClick:c}=e;return(0,s.jsx)(i.default,{onClick:c,testid:null!=t?t:"",children:(0,s.jsxs)(o.FlexRow,{children:[(0,s.jsx)(o.FlexColumn,{xstyle:d.checkboxContainer,children:(0,s.jsx)(r.default,{checked:u,radio:!0,hover:!1,systemUncheckedColor:!0,onChange:()=>{c()}})}),(0,s.jsx)("div",{className:a?(0,l.default)(d.canceledStyle):null,children:n})]})})};var r=a(n(309275)),o=n(429623),i=a(n(701784)),l=a(n(156720)),s=n(785893);const d={canceledStyle:{color:"mvxzr2tb"},checkboxContainer:{paddingStart:"nqtxkp62",paddingEnd:"h1a80dm5"}}},996152:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o.default,{transitionName:"media-caption",className:(0,d.default)(c),children:(0,u.jsx)(i.default,{chat:e.chat,maxLength:r.default.MAX_CART_MESSAGE_LENGTH,placeholder:e.placeholder,value:e.value,onEnter:()=>{!0!==e.disabled&&e.onSubmit()},onChange:t=>{e.onChange(t)},multiline:!0,showRemaining:!0,spellCheck:!0,supportsEmoji:!0})}),(0,u.jsx)(o.default,{transitionAppear:!0,transitionName:"btn",children:(0,u.jsx)("button",{disabled:e.disabled,"data-testid":e.testid,className:(0,d.default)(f),tabIndex:"-1",onClick:()=>e.onSubmit(),title:e.buttonTitle,children:(0,u.jsx)(l.Round,{disabled:e.disabled,children:(0,u.jsx)(s.default,{width:18,name:"send",directional:!0})})})})]})};var r=a(n(364369)),o=a(n(540436)),i=a(n(784518)),l=n(482857),s=a(n(23217)),d=a(n(156720)),u=n(785893);const c={display:"p357zi0d",flexDirection:"f8m0rgwh",width:"ln8gz9je",zIndex:"mb8var44",position:"g0rxnol2",marginBottom:"mggyuyyy"},f={color:"svlsagor",marginTop:"tt8xd2xn",marginEnd:"jnwc1y2a",marginBottom:"mpdn4nr2",marginStart:"svoq16ka",opacity:"axi1ht8l",paddingTop:"i5tg98hk",paddingEnd:"f9ovudaz",paddingBottom:"przvwfww",paddingStart:"gx1rr48f",position:"lhggkp7q",right:"q82cfhbg",bottom:"efio351b",textAlign:"qfejxiq4"}},433865:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{order:t,onProductDetail:n,sellerJid:a}=e,p=e=>{const n=t.orderItemCollection.toArray();return(0,r.logOrderListImpression)({catalogContext:e,orderId:t.id,productCount:n.length,catalogOwnerJid:a}),n.map((e=>({itemKey:e.id.toString(),product:e})))};return(0,f.jsx)(c.DrawerContext.Consumer,{children:t=>{const c=(0,l.getProductCatalogContext)(t);return(0,f.jsx)(d.default,{flatListControllers:[e.flatListController],children:(0,f.jsx)(s.FlatList,{testid:"order-product-list",flatListController:e.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:p(c),renderItem:t=>(0,f.jsx)(o.default,{product:t.product,onClick:()=>((t,o)=>{const i={productId:t.product.id,businessOwnerJid:a};(0,u.qplStartProductView)("Order"),(0,r.logOrderListItemClick)({catalogContext:o,orderId:e.order.id,catalogOwnerJid:a}),n(i)})(t,c)}),defaultItemHeight:i.PRODUCT_LIST_ITEM_HEIGHT})})}})};var r=n(379544),o=a(n(907714)),i=n(364481),l=n(397567),s=n(747915),d=a(n(944942)),u=n(582145),c=n(427394),f=n(785893)},907714:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{product:t,onClick:n}=e,a=(0,p.jsx)(s.EmojiText,{text:t.name,ellipsify:!0,titlify:!0}),h=(0,p.jsx)(i.ProductThumb,{mediaData:t.mediaData,theme:"list"}),m=u.fbt._("Quantity {item-quantity}",[u.fbt._param("item-quantity",t.quantity)],{hk:"102wGk"});let g=null;t.quantity&&(g=(0,p.jsx)(d.TextSpan,{className:(0,f.default)(r.uiMargin.vert0,r.uiMargin.start0,r.uiMargin.end6),children:m}));let v=null;(0,c.isNonZeroNumber)(t.price)&&(v=(0,p.jsx)(d.TextSpan,{className:(0,f.default)(r.uiMargin.vert0,r.uiMargin.start0,r.uiMargin.end6),children:o.formatAmount1000(t.currency,t.price)}));let x=null;null!=v&&(x=(0,p.jsx)("span",{className:(0,f.default)(r.uiMargin.vert0,r.uiMargin.start0,r.uiMargin.end6),children:"•"}));const C=(0,p.jsxs)("div",{children:[v,x,g]});return(0,p.jsx)(l.default,{image:h,customImage:!0,primary:a,secondary:C,theme:"order-product",onClick:n},t.id.toString())};var r=n(128298),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(n(939519)),i=n(303013),l=a(n(744356)),s=n(965417),d=n(113923),u=n(548360),c=n(729984),f=a(n(156720)),p=n(785893);function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}},203607:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(532528),o=n(274912),i=n(781572),l=n(141455),s=n(914597),d=n(128298),u=n(978820),c=a(n(471410)),f=n(859789),p=a(n(259322)),h=a(n(996152)),m=n(511853),g=n(429623),v=a(n(452665)),x=a(n(60453)),C=a(n(69637)),y=n(994790),_=a(n(833308)),b=n(493581),E=n(794010),S=a(n(661944)),j=n(548360),k=n(667294),T=(a(n(156720)),n(785893));const w=[m.OrderStatus.Processing,m.OrderStatus.Shipped,m.OrderStatus.Complete,m.OrderStatus.Canceled],D={checkboxContainer:{gap:"n8lfltvd"}};function I(e,t){const[n,a]=(0,k.useState)(""),I=(0,k.useMemo)((()=>(0,m.findOrderStatus)(e.chat,e.orderInfo.referenceId)),[e.chat,e.orderInfo.referenceId]),[M,P]=(0,k.useState)(I),{chat:A,sellerJid:O,orderInfo:R}=e;function L(){l.DrawerManager.closeDrawerRight(),new c.default.OrderDetailsActionsSmb({orderDetailsCreationAction:c.default.ORDER_DETAILS_CREATION_ACTION.SEND_ORDER_STATUS,actionCategory:String(S.default.ORDER_DETAILS_MANAGEMENT),orderDetailEntryPoint:String(e.entryPoint),hasCatalog:(0,E.hasCatalog)(b.BusinessProfileCollection.get((0,u.getMaybeMeUser)())),hasNote:Boolean(n)}).commit(),(0,o.sendOrderStatusMessageAsMerchant)({chat:A,sellerJid:O,orderInfo:R,orderNote:n,orderStatus:M,offset:f.DEFAULT_OFFSET}),i.Cmd.openChatFromUnread(A)}function N(e){return w.findIndex((t=>t===e))}const F=j.fbt._("Add a note",null,{hk:"37dHqT"});return(0,T.jsxs)(x.default,{onDrop:e.onBack,ref:t,children:[(0,T.jsx)(y.DrawerHeader,{title:j.fbt._("Update order status",null,{hk:"2pK0VF"}),onBack:e.onBack,type:y.DRAWER_HEADER_TYPE.SMALL}),(0,T.jsxs)(C.default,{children:[(0,T.jsx)(_.default,{xstyle:[d.uiPadding.vert20,d.uiPadding.horiz16],theme:"refresh-padding-title",children:(0,T.jsx)(g.FlexColumn,{xstyle:D.checkboxContainer,children:w.map((e=>(0,T.jsx)(p.default,{testid:"order-status-select-option",label:r.OrderStatusLabels[e],isCanceled:e===m.OrderStatus.Canceled,checked:M===e,onClick:()=>{P(e)}},e)))})}),(0,T.jsx)(_.default,{xstyle:[d.uiPadding.top8,d.uiPadding.horiz16],theme:"refresh-padding-title",children:(0,T.jsx)(h.default,{chat:e.chat,placeholder:F,value:n,onChange:a,onSubmit:function(){const e=N(M),t=N(I);e===t?s.ModalManager.open((0,T.jsx)(v.default,{title:j.fbt._("Status already sent",null,{hk:"3GmLDK"}),okText:j.fbt._("OK",null,{hk:"4oTrfy"}),onOK:()=>{s.ModalManager.close()},children:j.fbt._("Your have already updated this order to {originalOrderStatus}",[j.fbt._param("originalOrderStatus",r.OrderStatusLabels[I])],{hk:"1C6myK"})})):e<t?s.ModalManager.open((0,T.jsx)(v.default,{title:j.fbt._("Update sent status?",null,{hk:"Vz57T"}),okText:j.fbt._("Update",null,{hk:"1b5vbz"}),onOK:()=>{L(),s.ModalManager.close()},cancelText:j.fbt._("Cancel",null,{hk:"9jDpn"}),onCancel:()=>{s.ModalManager.close()},children:j.fbt._("Your customer has already seen this order marked as {originalOrderStatus}. Do you want update it to {orderStatus}?",[j.fbt._param("originalOrderStatus",r.OrderStatusLabels[I]),j.fbt._param("orderStatus",r.OrderStatusLabels[M])],{hk:"3MuiJd"})})):L()},buttonTitle:F,testid:"order-status-update-button"})})]})]})}var M=(0,k.forwardRef)(I);t.default=M},108135:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const n=(0,l.default)(t),[a,f]=(0,u.useState)([]),[p,h]=(0,u.useState)(!0),m=(0,c.default)(),g=(0,u.useCallback)((()=>null==n?new Map:n.productCollection.getProductModels().reduce(((e,t)=>{var n;return e.set(t.id.toString(),null===(n=t.getPreviewImage())||void 0===n?void 0:n.mediaUrl)}),new Map)),[n]),v=(0,u.useCallback)((t=>{if(null==n)return Promise.resolve([]);const a=e.items.reduce(((e,a)=>{if(a.isCustomItem||null!=t.get(a.id))return e;const r=d.CatalogCollection.findProduct({catalogWid:n.id,productId:a.id});return e.concat(r)}),[]);return Promise.all(a)}),[n,e.items]),x=(0,u.useCallback)(((t,n)=>{var a;return new s.default((0,o.default)((0,o.default)({},t),{},{price:(null!==(a=t.amount)&&void 0!==a?a:0)*i.DEFAULT_OFFSET,currency:e.currency,thumbnailUrl:n.get(t.id)}))}),[e.currency]),C=(0,u.useCallback)((t=>e.items.map((e=>x(e,t)))),[e.items,x]);return(0,u.useEffect)((()=>{(0,r.default)((function*(){const e=g();if(h(!0),yield v(e),m.aborted)return;h(!1);const t=g();f(C(t))}))()}),[n,m,v,g,C]),{orderItems:a,isLoading:p}};var r=a(n(348926)),o=a(n(81109)),i=n(859789),l=a(n(827968)),s=a(n(852822)),d=n(599989),u=(n(509468),n(667294)),c=a(n(803409))},391545:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.CatalogSettingsDrawer=void 0;var r=n(389385),o=a(n(747259)),i=n(990553),l=n(221310),s=a(n(568064)),d=n(694816),u=n(978820),c=a(n(499360)),f=n(912591),p=n(111054),h=n(113923),m=n(950452),g=a(n(60453)),v=a(n(69637)),x=n(994790),C=a(n(833308)),y=a(n(625421)),_=n(493581),b=n(548360),E=n(667294),S=a(n(973935)),j=a(n(156720)),k=a(n(803409)),T=n(785893);const w={paddingTop:"nlnf8xo7",paddingEnd:"rmtqb32e",paddingBottom:"r219jyu0",paddingStart:"hmkl5ysc"},D={display:"p357zi0d",alignItems:"gndfcl4n",justifyContent:"ac2vgrno",height:"ppled2lx",paddingTop:"i5tg98hk",paddingEnd:"f9ovudaz",paddingBottom:"przvwfww",paddingStart:"gx1rr48f"};function I(e){let{cartEnabled:t,setCartEnabled:n}=e;const a=e=>{n(e),(0,i.updateCartEnabled)(e).catch((()=>{__LOG__(4,!0,new Error,!0)`Failed to update cartEnabled value`,SEND_LOGS("updateCartEnabled: cartEnabled toggle error"),d.ToastManager.open((0,T.jsx)(m.Toast,{msg:b.fbt._("Failed to update the setting.",null,{hk:"RZBg9"}),duration:6e3,id:(0,m.genId)()})),n(t)}))},r=(0,l.getCatalogCartOnOffFaqUrl)(),o=(0,T.jsx)(c.default,{href:r,onClick:e=>{e.preventDefault(),(0,f.openExternalLink)(r)},children:s.default.t(394)}),u=b.fbt._("Turn this on to let customers add items to a cart when shopping in your catalog. Turning this off won't affect carts you've already received. {learn_more_link}",[b.fbt._param("learn_more_link",o)],{hk:"iTzgD"});return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)(C.default,{title:b.fbt._("Add to cart",null,{hk:"1mbCt1"}),theme:"title-larger",animation:!1,children:[(0,T.jsx)(y.default,{isChosen:t,onChoose:()=>{a(!0)},choiceText:b.fbt._("On",null,{hk:"2m7e5W"})}),(0,T.jsx)(y.default,{isChosen:!t,onChoose:()=>{a(!1)},choiceText:b.fbt._("Off",null,{hk:"1l0P5X"})})]}),(0,T.jsx)(h.TextDiv,{theme:"plain",className:(0,j.default)(w),children:u})]})}const M=(0,E.forwardRef)(((e,t)=>{const{onBack:n}=e,[a,i]=(0,E.useState)(!0),[l,s]=(0,E.useState)(!1),c=(0,k.default)();return(0,E.useEffect)((()=>{(0,o.default)(_.BusinessProfileCollection.fetchBizProfile((0,u.getMeUser)()),c).then((e=>{const t=e.profileOptions;S.default.unstable_batchedUpdates((()=>{s(null!=t&&t.cartEnabled),i(!1)}))})).catch((0,r.catchAbort)((()=>{}))).catch((()=>{__LOG__(4,!0,new Error)`Error fetching the business profile.`,d.ToastManager.open((0,T.jsx)(m.Toast,{msg:b.fbt._("Failed to load catalog settings.",null,{hk:"2UxoQh"}),duration:6e3,id:(0,m.genId)()})),n()}))}),[]),(0,T.jsxs)(g.default,{ref:t,theme:"catalog",onDrop:e.onBack,children:[(0,T.jsx)(x.DrawerHeader,{title:b.fbt._("Settings",null,{hk:"2RmHUB"}),type:x.DRAWER_HEADER_TYPE.LARGE,onBack:e.onBack,focusBackOrCancel:!0}),(0,T.jsx)(v.default,{children:a?(0,T.jsx)("div",{className:(0,j.default)(D),children:(0,T.jsx)(p.Spinner,{})}):(0,T.jsx)(I,{cartEnabled:l,setCartEnabled:e=>{s(e)}})})]})}));t.CatalogSettingsDrawer=M},827968:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const[t,n]=(0,i.useState)((()=>o.CatalogCollection.get(e))),a=(0,l.default)();return(0,i.useEffect)((()=>{const i=o.CatalogCollection.get(e);i!==t&&(null!=i?n(i):(0,r.default)((function*(){const t=yield o.CatalogCollection.find(e);a.aborted||n(t)}))())}),[e,t,a]),t};var r=a(n(348926)),o=n(599989),i=n(667294),l=a(n(803409))},865656:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{selections:t,active:n,onSelectionChanged:a,catalog:d}=e,u=e=>{((e,r,o)=>{t.setVal(e,r,o),n.setVal(e,o),a()})(e,!t.isSelected(e),!1)};return(0,s.jsx)(l.default,{flatListControllers:[e.flatListController],children:(0,s.jsx)(i.FlatList,{flatListController:e.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:d.productCollection.getProductModels(!0).map((e=>({itemKey:e.id.toString(),product:e}))),renderItem:e=>{let{product:a}=e;return(0,s.jsx)(o.default,{product:a,selections:t,onClick:()=>u(a),active:n},a.id.toString())},defaultItemHeight:r.PRODUCT_LIST_ITEM_HEIGHT})})};var r=n(364481),o=a(n(960809)),i=n(747915),l=a(n(944942)),s=n(785893)},793870:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(348926)),o=n(389385),i=n(451897),l=n(634245),s=a(n(568064)),d=a(n(578931)),u=n(665397),c=n(669393),f=n(547217),p=a(n(865656)),h=n(364481),m=n(397567),g=n(435054),v=a(n(630855)),x=a(n(329796)),C=n(482857),y=a(n(188406)),_=n(111054),b=a(n(23217)),E=n(990011),S=a(n(60453)),j=a(n(69637)),k=n(427394),T=n(994790),w=n(548360),D=n(667294),I=a(n(156720)),M=a(n(859312)),P=a(n(616223)),A=a(n(290886)),O=a(n(803409)),R=n(785893);const L={container:{position:"g0rxnol2",zIndex:"thghmljt",display:"p357zi0d",flex:"a1m9qzja",flexDirection:"f8m0rgwh",overflowX:"gfz4du6o",overflowY:"ag5g9lrv"},isSending:{pointerEvents:"m62443ks",opacity:"n791o4v8"},footer:{zIndex:"ercejckq",boxSizing:"cm280p3y",display:"p357zi0d",alignItems:"gndfcl4n",justifyContent:"o4u7okr9",width:"ln8gz9je",height:"fe3aadhc",paddingEnd:"h1a80dm5",paddingStart:"sta02ykp",color:"k17s6i4e",backgroundColor:"gulicvea"},saveButton:{paddingTop:"b7n2qyd4",paddingEnd:"btzf6ewn",paddingBottom:"ekpn4oxx",paddingStart:"nqtxkp62"},spinner:{position:"lhggkp7q",top:"kfa44f3y",start:"m7kgcvyw",zIndex:"thghmljt",transform:"qk2y3tb3"},nameContainer:{position:"g0rxnol2"},nameIcon:{position:"g0rxnol2",top:"fcxg0yzc",display:"l7jjieqr",width:"jgly3g7g",marginStart:"lhp4ctto",transform:"mdse5hul"},nameEdit:{display:"l7jjieqr",width:"p56o3wws",height:"q7zw29cd",paddingTop:"emrlamx0",verticalAlign:"fewfhwl7"},operation:{paddingTop:"qomlamqu",paddingEnd:"f9ovudaz",paddingBottom:"r219jyu0",paddingStart:"rppts313",marginStart:"bv1sdm6y",color:"jq3rn4u7"},listContainer:{height:"cbqxid7y",overflowX:"i44ccddp",overflowY:"ag5g9lrv"},loadingSpinner:{display:"btb1m7bk",justifyContent:"ac2vgrno",height:"jdwybkuq"}};function N(e){let{value:t,errorName:n,onChange:a}=e;return(0,R.jsx)(E.TextInput,{editable:!0,focusOnMount:!0,showRemaining:!0,value:t,onChange:a,inputPlaceholder:w.fbt._("New collection",null,{hk:"2NAI33"}),theme:"text-input",error:n,maxLength:30})}function F(e){let{onClick:t,updated:n}=e;const a=s.default.t(170,{updated:n,_plural:n});return(0,R.jsxs)("div",{className:(0,I.default)(L.footer),children:[a,(0,R.jsx)("div",{className:(0,I.default)(L.saveButton),children:(0,R.jsx)(C.Round,{large:!0,onClick:t,children:(0,R.jsx)(b.default,{name:"checkmark-medium"})})})]})}function B(e){let{nameInfo:t,collection:n,selectionList:a,syncInfo:r}=e;const{name:o,errorName:i,handleNameChange:l}=t,{isUpdating:s,loadingMore:d,syncSelection:u,handleSave:c}=r,f=s?(0,R.jsx)("div",{className:(0,I.default)(L.spinner),children:(0,R.jsx)(_.Spinner,{size:50,stroke:3})}):null,p=u();return(0,R.jsx)(k.DrawerContext.Consumer,{children:e=>{const t=(0,m.getProductCatalogContext)(e);return(0,R.jsxs)(R.Fragment,{children:[f,(0,R.jsxs)("div",{className:(0,I.default)(L.nameContainer),children:[(0,R.jsx)("span",{className:(0,I.default)(L.nameIcon),children:(0,R.jsx)(b.default,{name:"collections_folder"})}),(0,R.jsx)("span",{className:(0,I.default)(L.nameEdit),children:(0,R.jsx)(N,{onChange:l,value:o,errorName:i})})]}),(0,R.jsx)("div",{className:(0,I.default)(L.operation),children:n?w.fbt._("Update Items",null,{hk:"2dT3Pu"}):w.fbt._("Add Items",null,{hk:"3NRr27"})}),(0,R.jsxs)("div",{className:(0,I.default)(L.listContainer),children:[a,d&&(0,R.jsx)("div",{className:(0,I.default)(L.loadingSpinner),children:(0,R.jsx)(x.default,{})})]}),p>0||n&&o!==n.name?(0,R.jsx)(F,{updated:p,onClick:()=>{c(t)}}):null]})}})}function U(e,t){var n;const{catalog:a,collection:s,onBack:x}=e,C=(0,P.default)((()=>new y.default([],(e=>e.id.toString())))),_=(0,P.default)((()=>new d.default([],(e=>e.id.toString())))),b=(0,P.default)((()=>new v.default)),E=(0,M.default)(),k=(0,O.default)(),[N,F]=(0,D.useState)(null),[U,H]=(0,D.useState)(null==s?void 0:s.name),[G,z]=(0,D.useState)(null==s?void 0:s.name),[q,W]=(0,D.useState)(null),[V,Y]=(0,D.useState)(!1),[K,X]=(0,D.useState)(!0);(0,D.useEffect)((()=>{(()=>{const e=new l.CollectionsContentDataSource(a,h.PRODUCT_LIST_ITEM_HEIGHT,null==s?void 0:s.id),t=new l.CatalogListItemScrollHelper(e);F(t),e.loadInitialItems().then((()=>{if(k.aborted)throw new o.AbortError;X(!1),E()})).catch((0,o.catchAbort)((()=>{})))})()}),[]);const Q=(0,A.default)((e=>{const t=e.currentTarget;(null==N?void 0:N.willLoadMore(t))&&X(!0),null==N||N.onScroll(e,t).then((e=>{X(!1),e&&X(!1)})).catch((e=>{throw X(!1),e}))}),100),J=function(){var e=(0,r.default)((function*(e){const t=(0,m.getProductCatalogContext)(e);if(U&&""!==U.trim()){c.QPL.markerStart(u.QuickLogMarkerId.WHATSAPP_COLLECTION_EDIT),Y(!0);const{added:e,removed:n}=(()=>{const e=a.productCollection.getProductModels(!0),t=[],n=[];return e.forEach((e=>{const a=_.current.isSelected(e);e.checkmark!==a&&(a?n.push(e):t.push(e))})),{added:n,removed:t}})(),r=U!==G;c.QPL.markerAnnotate(u.QuickLogMarkerId.WHATSAPP_COLLECTION_EDIT,{bool:{IsNew:!s},int:{ProductsAdded:e.length}}),s&&c.QPL.markerAnnotate(u.QuickLogMarkerId.WHATSAPP_COLLECTION_EDIT,{bool:{Renamed:r},int:{ProductsDeleted:n.length}});try{if(yield(0,f.handleCollectionSave)(a,s,U||"",e,n,t)){x();const a=null==s?void 0:s.id;a&&r&&((0,g.logCollectionRenamed)({catalogContext:t,collectionId:a}),z(U)),s&&(0,g.logCollectionItemsAssignment)({collectionId:s.id,addedCount:e.length,removedCount:n.length,catalogContext:t}),c.QPL.markerEnd(u.QuickLogMarkerId.WHATSAPP_COLLECTION_EDIT,i.QuickLogActionType.SUCCESS)}else Y(!1),c.QPL.markerDrop(u.QuickLogMarkerId.WHATSAPP_COLLECTION_EDIT)}catch(e){Y(!1),c.QPL.markerEnd(u.QuickLogMarkerId.WHATSAPP_COLLECTION_EDIT,i.QuickLogActionType.FAIL)}}else W(w.fbt._("Name required",null,{hk:"1pvj2p"}))}));return function(){return e.apply(this,arguments)}}(),$=(0,I.default)(L.container,V&&L.isSending),Z=(null===(n=e.collection)||void 0===n?void 0:n.name)||w.fbt._("New collection",null,{hk:"4dusPd"});return(0,R.jsxs)(S.default,{ref:t,theme:"products",onDrop:e.onBack,children:[(0,R.jsx)(T.DrawerHeader,{title:Z,type:T.DRAWER_HEADER_TYPE.LARGE,onBack:e.onBack,menu:(0,R.jsx)(R.Fragment,{})}),(0,R.jsx)(j.default,{className:$,flatListControllers:[b.current],onScroll:Q,children:(0,R.jsx)(B,{nameInfo:{name:U,errorName:q,handleNameChange:e=>{H(e),W(q&&e?null:q)}},syncInfo:{isUpdating:V,loadingMore:K,syncSelection:()=>{const e=a.productCollection.getProductModels(!0);let t=0;return e.forEach((e=>{_.current.isInList(e)?e.checkmark!==_.current.isSelected(e)&&t++:_.current.setVal(e,e.checkmark)})),t},handleSave:e=>{J(e)}},collection:s,selectionList:(0,R.jsx)(p.default,{catalog:a,flatListController:b.current,active:C.current,selections:_.current,onSelectionChanged:()=>E()})})})]})}var H=(0,D.forwardRef)(U);t.default=H},465303:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.ComplianceInfoFields=$,t.EditProductDrawer=function(e){const{catalog:t,onBack:n,onCancel:a,newProduct:c,onDelete:I,onEditSuccess:M,onCreate:P}=e,Q=(0,W.useContext)(U.DrawerContext),Z=(0,W.useRef)(null),ee=(0,K.useModelValues)(e.product,["id","additionalImageCdnUrl","name","priceAmount1000","description","productImageCollection","reviewStatus","url","imageCdnUrl","retailerId","currency","isHidden","complianceInfo"]),te=e=>!(0,m.hideUnsupportedCurrency)()||E.isSupportedCurrency(e),ne=null!=ee.currency?ee.currency:E.currencyForCountryShortcode((0,h.getCountryShortcodeByPhone)((0,y.getMeUser)().user)),ae=te(ne),[re,oe]=(0,W.useState)(ee.name||""),[ie,le]=(0,W.useState)(ae?ee.priceAmount1000:null),[se,de]=(0,W.useState)(ee.description||""),[ue,ce]=(0,W.useState)(ee.url||""),[fe,pe]=(0,W.useState)(ee.retailerId||""),[he,me]=(0,W.useState)((()=>{if(null!=ee.priceAmount1000&&null!=ne&&ae){const e=E.formatAmount1000ToParts(ne,ee.priceAmount1000);return`${e.integer}${e.decimal}`}return""})),ge=ae?ne:"",[ve,xe]=(0,W.useState)(!1),[Ce,ye]=(0,W.useState)(""),[_e,be]=(0,W.useState)(""),[Ee,Se]=(0,W.useState)(""),[je,ke]=(0,W.useState)(""),[Te,we]=(0,W.useState)(""),[De,Ie]=(0,W.useState)(!!ee.imageCdnUrl),[Me,Pe]=(0,W.useState)(!1),[Ae,Oe]=(0,W.useState)(ee.isHidden),[Re,Le]=(0,W.useState)(!!ae),[Ne,Fe]=(0,W.useState)(!1),[Be,Ue]=(0,W.useState)(void 0);(0,Y.useListener)(ee,"change:isHidden",(()=>{Oe(ee.isHidden)}));const He=function(){var e=(0,o.default)((function*(){if(c)Fe(!0);else{yield G.CatalogCollection.findProduct({catalogWid:t.id,productId:ee.id.toString(),shouldFetchComplianceFields:!0});const e=(0,l.default)(t,"catalog").productCollection.get(ee.id),{countryCodeOrigin:n,importerName:a,importerAddress:r}=(null==e?void 0:e.complianceInfo)||{},o=n===String(S.SyntheticCountryCode.NotApplicable)?q.fbt._("Not Applicable",null,{hk:"2k1klN"}).toString():n&&(yield(0,S.getCountryName)(n)),i=(null==r?void 0:r.countryCode)&&(yield(0,S.getCountryName)(r.countryCode));Fe(!0),Ue({countryCodeOrigin:n,countryNameOrigin:o,countryCodeOriginError:"",importerName:a,importerNameError:"",importerAddress:{street1:null==r?void 0:r.street1,street1Error:"",street2:null==r?void 0:r.street2,postalCode:null==r?void 0:r.postalCode,city:null==r?void 0:r.city,cityError:"",region:null==r?void 0:r.region,countryCode:null==r?void 0:r.countryCode,countryName:i,countryCodeError:""}})}}));return function(){return e.apply(this,arguments)}}();(0,W.useEffect)((()=>{(0,m.canSeeECommerceComplianceIndiaSoftEnforcement)(t.id.user)&&He()}),[]);const Ge=(e,t,n)=>{const{importerAddress:a}=Be||{};return t===e?n:a[e]},ze=()=>{const e=null==Be?void 0:Be.countryCodeOrigin;return!!e&&![f.COMPLIANCE_INFO_CODES.INDIA,S.SyntheticCountryCode.NotApplicable].includes(e)},qe=()=>(0,m.canSeeECommerceComplianceIndiaHardEnforcementBusinessJourney)(t.id.user),We=(e,t)=>{c?(0,j.logAddProductFailed)((0,k.getProductCatalogContext)(Q)):(0,j.logEditProductFailed)(ee,(0,k.getProductCatalogContext)(Q),e.statusCode);let n=q.fbt._("Failed to save changes",null,{hk:"1rgjJH"});null!=e.errors&&(e.errors.filter((e=>"duplicate"===e.reason)).length>0?v.QPL.markerDrop(t):v.QPL.markerEnd(t,s.QuickLogActionType.FAIL),e.errors.map((e=>{"media"===e.name&&"duplicate"===e.reason&&we(q.fbt._("Two or more images are the same. Delete any duplicates and try again.",null,{hk:"3qIMS6"})),"retailer_id"!==e.name&&"retailer-id"!==e.name||"duplicate"!==e.reason||ke(q.fbt._("Item code must be unique.",null,{hk:"2T0KbL"})),(0,m.hideUnsupportedCurrency)()&&"currency"===e.name&&"invalid-data"===e.reason&&(n=q.fbt._("Price can’t be shown in your country. Delete the price you entered.",null,{hk:"3qXNEI"}))}))),x.ToastManager.open((0,X.jsx)(L.Toast,{msg:n,id:(0,L.genId)("catalog_save_item_failed")}))},Ve=e=>{t.productCollection.add(e,{merge:!0}),c?(0,j.logAddProductSuccess)((0,k.getProductCatalogContext)(Q)):(0,j.logEditProductSuccess)(ee,(0,k.getProductCatalogContext)(Q)),x.ToastManager.open((0,X.jsx)(L.Toast,{msg:q.fbt._("Changes saved",null,{hk:"fmK60"}),id:(0,L.genId)("catalog_item_saved")})),M(e),null!=c&&(null==P||P())},Ye=function(){var e=(0,o.default)((function*(e,t){const n=Ge("street1",e,t),a=Ge("street2",e,t),o=Ge("postalCode",e,t),i=Ge("city",e,t),l=Ge("region",e,t),s=Ge("countryCode",e,t),d=[n,a,o,i,l,s].some((e=>e))||qe(),c=(0,r.default)((0,r.default)({},Be),{},{importerAddress:(0,r.default)({},null==Be?void 0:Be.importerAddress)});"countryCode"===e&&(c.importerAddress.countryName=(yield(0,S.getCountryName)(t))||void 0),c.importerAddress[e]=t||void 0,c.importerAddress.street1Error=d&&!(0,u.existsFieldIgnoreHardEnforcement)(n)?q.fbt._("Add an importer address line 1",null,{hk:"3HSMmN"}):"",c.importerAddress.cityError=d&&!(0,u.existsFieldIgnoreHardEnforcement)(i)?q.fbt._("Add an importer city",null,{hk:"1nq7dA"}):"",c.importerAddress.countryCodeError=d&&!(0,u.existsFieldIgnoreHardEnforcement)(s)?q.fbt._("Add an importer country",null,{hk:"3VmDTh"}):"",Le(!0),Ue(c)}));return function(){return e.apply(this,arguments)}}(),Ke=function(){var e=(0,o.default)((function*(e,t){let n;const a=(0,r.default)((0,r.default)({},Be),{},{importerAddress:(0,r.default)({},null==Be?void 0:Be.importerAddress)});"countryCodeOrigin"===e&&(n=t===String(S.SyntheticCountryCode.NotApplicable)?q.fbt._("Not Applicable",null,{hk:"2k1klN"}).toString():yield(0,S.getCountryName)(t),a.countryNameOrigin=n,a.countryCodeOriginError=""),"importerName"===e&&(a.importerNameError=(0,u.existsField)(t,(0,y.getMeUser)())||!qe()?"":q.fbt._("Add an importer name",null,{hk:"3UwP1T"})),a[e]=t||void 0,Le(!0),Ue(a)}));return function(){return e.apply(this,arguments)}}(),Xe=(0,X.jsx)(w.default,{type:"primary",onClick:()=>{let e=!0;const n=new z.Product({id:ee.id,priceAmount1000:ie,currency:ge,description:se||"",imageCdnUrl:ee.imageCdnUrl,additionalImageCdnUrl:ee.additionalImageCdnUrl,name:re,retailerId:fe,url:ue,isHidden:Ae,complianceInfo:(0,m.canSeeECommerceComplianceIndiaSoftEnforcement)(t.id.user)?{countryCodeOrigin:null==Be?void 0:Be.countryCodeOrigin,importerName:null==Be?void 0:Be.importerName,importerAddress:{street1:null==Be?void 0:Be.importerAddress.street1,street2:null==Be?void 0:Be.importerAddress.street2,postalCode:null==Be?void 0:Be.importerAddress.postalCode,city:null==Be?void 0:Be.importerAddress.city,region:null==Be?void 0:Be.importerAddress.region,countryCode:null==Be?void 0:Be.importerAddress.countryCode}}:void 0});var a;(()=>{const e=(0,y.getMeUser)();if(!qe()||!Ne)return!1;const t=(0,r.default)((0,r.default)({},Be),{},{importerAddress:(0,r.default)({},null==Be?void 0:Be.importerAddress)});if(!(0,u.existsField)(t.countryCodeOrigin,e))return t.countryCodeOriginError=q.fbt._("Add a country of origin",null,{hk:"3WA7X9"}),Ue(t),!0;if(!ze())return!1;const{importerName:n,importerAddress:{street1:a,city:o,countryCode:i}}=t;let l=!1;return(0,u.existsField)(n,e)||(t.importerNameError=q.fbt._("Add an importer name",null,{hk:"3UwP1T"}),l=!0),(0,u.existsFieldIgnoreHardEnforcement)(a)||(t.importerAddress.street1Error=q.fbt._("Add an importer address line 1",null,{hk:"3HSMmN"}),l=!0),(0,u.existsFieldIgnoreHardEnforcement)(o)||(t.importerAddress.cityError=q.fbt._("Add an importer city",null,{hk:"1nq7dA"}),l=!0),(0,u.existsFieldIgnoreHardEnforcement)(i)||(t.importerAddress.countryCodeError=q.fbt._("Add an importer country",null,{hk:"3VmDTh"}),l=!0),!!l&&(Ue(t),!0)})()||(c?(0,j.logAddProductClick)((0,k.getProductCatalogContext)(Q)):(0,j.logEditProductClick)(ee,(0,k.getProductCatalogContext)(Q)),xe(!0),c||Re?(v.QPL.markerStart(g.QuickLogMarkerId.WHATSAPP_PRODUCT_SAVE,{annotations:{bool:{IsNewProduct:!!c}}}),null===(a=Z.current)||void 0===a||a.uploadImages().then((a=>{n.imageCdnUrl=a[0],n.additionalImageCdnUrl=a.slice(1);(c?t.addProduct:t.editProduct).call(t,n).then((t=>{Ve(t),e=!1,v.QPL.markerEnd(g.QuickLogMarkerId.WHATSAPP_PRODUCT_SAVE,s.QuickLogActionType.SUCCESS)})).catch((0,i.filteredCatch)(d.CatalogEditServerError,(t=>{e=!1,We(t,g.QuickLogMarkerId.WHATSAPP_PRODUCT_SAVE)}))).finally((()=>{e&&v.QPL.markerEnd(g.QuickLogMarkerId.WHATSAPP_PRODUCT_SAVE,s.QuickLogActionType.FAIL),xe(!1)}))})).catch((e=>{throw v.QPL.markerEnd(g.QuickLogMarkerId.WHATSAPP_PRODUCT_SAVE,s.QuickLogActionType.FAIL),xe(!1),e}))):(v.QPL.markerStart(g.QuickLogMarkerId.WHATSAPP_PRODUCT_SET_VISIBLE,{annotations:{string:{EntryPoint:"Product"}}}),(0,b.productVisibilitySet)([{productId:ee.id.toString(),isHidden:n.isHidden}]).then((()=>{ee.isHidden=n.isHidden,Ve(ee),e=!1,v.QPL.markerEnd(g.QuickLogMarkerId.WHATSAPP_PRODUCT_SET_VISIBLE,s.QuickLogActionType.SUCCESS)})).catch((0,i.filteredCatch)(d.CatalogEditServerError,(t=>{e=!1,We(t,g.QuickLogMarkerId.WHATSAPP_PRODUCT_SET_VISIBLE)}))).finally((()=>{e&&v.QPL.markerEnd(g.QuickLogMarkerId.WHATSAPP_PRODUCT_SET_VISIBLE,s.QuickLogActionType.FAIL),xe(!1)}))))},disabled:!(()=>{if(""===re.trim()||!1===De)return!1;const e=[Ce,_e,Ee,je,Te];return ze()&&e.push(null==Be?void 0:Be.importerNameError,null==Be?void 0:Be.importerAddress.street1Error,null==Be?void 0:Be.importerAddress.cityError,null==Be?void 0:Be.importerAddress.countryCodeError),qe()&&e.push(null==Be?void 0:Be.countryCodeOriginError),e.every((e=>!e))})(),testid:"product-edit-drawer-save-button",children:c?q.fbt._("Add to catalog",null,{hk:"3Dku2o"}):q.fbt._("Save",null,{hk:"44asBM"})}),Qe=(0,X.jsxs)("div",{className:(0,V.default)(J.drawerHeader),children:[(0,X.jsx)(O.TextHeader,{level:"2",weight:"normal",customSize:"inherit",children:c?q.fbt._("Add new item",null,{hk:"3DqBBM"}):q.fbt._("Edit item",null,{hk:"2qzKLB"})}),(0,X.jsx)("div",{className:(0,V.default)(J.drawerHeaderButtonContainer),children:Xe})]}),Je=c?null:(0,X.jsx)("div",{className:(0,V.default)(J.deleteButtonContainer),children:(0,X.jsx)(w.default,{type:"warning",onClick:()=>{(0,_.handleProductDelete)(t,ee,(0,k.getProductCatalogContext)(Q),"Product").then((e=>{e&&(p.DrawerManager.closeDrawerMid(),null==I||I(ee))}))},testid:"product-edit-drawer-delete-button",children:q.fbt._("Delete Item",null,{hk:"Frzv9"})})}),$e=(0,V.default)(J.productWrapper,ve&&J.isSending),Ze=Me?(0,X.jsx)(N.default,{}):null,et=ve?(0,X.jsx)("div",{className:(0,V.default)(J.spinner),children:(0,X.jsx)(A.Spinner,{size:50,stroke:3})}):null,tt=(0,X.jsxs)("div",{className:(0,V.default)(J.hiddenContainer),children:[(0,X.jsx)(D.CheckBox,{id:"product-hidden-check",onChange:()=>{Oe((e=>!e))},checked:Ae,disabled:!1}),(0,X.jsx)("label",{className:(0,V.default)(J.hiddenLabel),htmlFor:"product-hidden-check",children:q.fbt._("Hide item",null,{hk:"GjLlA"})}),(0,X.jsx)("div",{className:(0,V.default)(J.hiddenDescr),children:q.fbt._("When you hide an item, customers won’t see it in your catalog.",null,{hk:"1crP8q"})})]}),nt=(0,W.useMemo)((()=>{const e=E.formatAmount1000ToParts(ge,0).symbol;return q.fbt._("Price {currencySymbol} (Recommended)",[q.fbt._param("currencySymbol",e)],{hk:"3kOjhT"})}),[ge]);return(0,X.jsxs)(F.default,{theme:"catalog",onDrop:e=>{var t;null===(t=Z.current)||void 0===t||t.handleFilePick(e)},onDragChange:e=>{Pe(e)},children:[Ze,(0,X.jsx)(H.DrawerHeader,{testid:"catalog-link-title",title:Qe,type:H.DRAWER_HEADER_TYPE.SMALL,onBack:n,onCancel:a,focusBackOrCancel:!0}),(0,X.jsx)(B.default,{children:(0,X.jsxs)("div",{className:$e,children:[et,(0,X.jsx)(T.default,{product:ee,maxImageCount:z.MAX_PRODUCT_IMAGES,onChange:e=>{let t="";0===e.length&&(t=q.fbt._("Add at least one image",null,{hk:"4tbVYS"})),we(t),Ie(e.length>0),Le(!0)},ref:Z,error:Te}),(0,X.jsx)(R.TextInput,{testid:"product-edit-drawer-name-input",value:re,placeholder:q.fbt._("Name",null,{hk:"46mqET"}),onChange:e=>{oe(e),ye(""===e.trim()?q.fbt._("Add a title",null,{hk:"3QauyV"}):""),Le(!0)},theme:"small",showRemaining:!0,customStyleThemes:["desaturated"],maxLength:150,error:Ce,title:q.fbt._("Name",null,{hk:"47pzCN"})}),te(ge)&&(0,X.jsx)(R.TextInput,{testid:"product-edit-drawer-price-input",value:he,placeholder:nt,onChange:e=>{const t=E.valueFromString(ge,e);let n="";""===e||E.validatePriceString(ge,e,z.MIN_PRICE,z.MAX_PRICE)||(n=q.fbt._("Enter a valid price",null,{hk:"3JgcXg"})),le(""===e?null:t),me(`${e}`),be(n),Le(!0)},theme:"small",maxLength:30,customStyleThemes:["desaturated"],error:_e,title:q.fbt._("Price",null,{hk:"1q6KRK"})}),(0,X.jsx)(R.TextInput,{testid:"product-edit-drawer-description-input",value:se,placeholder:q.fbt._("Description (Optional)",null,{hk:"38PzGH"}),onChange:e=>{de(e),Le(!0)},theme:"small",maxLength:5e3,customStyleThemes:["desaturated"],multiline:!0,title:q.fbt._("Description",null,{hk:"2sGitZ"})}),(0,X.jsx)(R.TextInput,{testid:"product-edit-drawer-link-input",value:ue,placeholder:q.fbt._("Link (Optional)",null,{hk:"18F36s"}),onChange:e=>{let t="";""===e||C.default.isValid(e)||(t=q.fbt._("URL is incorrect",null,{hk:"xiOtm"})),ce(e),Se(t),Le(!0)},onBlur:()=>{""===ue||C.default.isHttps(ue)||C.default.isHttp(ue)||ce(`https://${ue}`)},theme:"small",customStyleThemes:["desaturated"],maxLength:75,error:Ee,managed:!0,title:q.fbt._("Link",null,{hk:"1yLSRM"})}),(0,X.jsx)(R.TextInput,{testid:"product-edit-drawer-retailer-id-input",value:fe,placeholder:q.fbt._("Item Code (Optional)",null,{hk:"MWG64"}),onChange:e=>{pe(e),ke(""),Le(!0)},theme:"small",customStyleThemes:["desaturated"],maxLength:100,error:je,title:q.fbt._("Item code",null,{hk:"6trPE"})}),(0,m.canSeeECommerceComplianceIndiaSoftEnforcement)(t.id.user)?(0,X.jsx)($,{isComplianceHardEnforced:qe(),isComplianceInfoAvailable:Ne,showComplianceInfoImporterAddress:ze(),complianceInfo:Be,onComplianceInfoChange:Ke,onComplianceInfoImporterAddressChange:Ye}):null,tt,Je]})})]},"catalog-link-drawer")};var r=a(n(81109)),o=a(n(348926)),i=n(450796),l=a(n(145095)),s=n(451897),d=n(492574),u=n(374316),c=n(781572),f=n(715127),p=n(141455),h=n(203024),m=n(408139),g=n(665397),v=n(669393),x=n(694816),C=a(n(376139)),y=n(978820),_=n(547217),b=n(621374),E=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=Q(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(n(939519)),S=n(509978),j=n(277975),k=n(397567),T=a(n(330327)),w=a(n(39770)),D=n(316593),I=n(227105),M=n(429623),P=a(n(748846)),A=n(111054),O=n(113923),R=n(990011),L=n(950452),N=a(n(854896)),F=a(n(60453)),B=a(n(69637)),U=n(427394),H=n(994790),G=n(599989),z=n(509468),q=n(548360),W=n(667294),V=a(n(156720)),Y=n(587550),K=n(735461),X=n(785893);function Q(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(Q=function(e){return e?n:t})(e)}const J={complianceInfoHelpCenterBanner:{paddingTop:"nlnf8xo7",paddingEnd:"f9ovudaz",paddingBottom:"jzp2c175",paddingStart:"gx1rr48f"},productWrapper:{position:"g0rxnol2",width:"dlt2z1m8",paddingTop:"gq7nj7y3",paddingEnd:"f9ovudaz",paddingBottom:"eynyaxvo",paddingStart:"gx1rr48f",marginTop:"tt8xd2xn",marginEnd:"k1jo73ug",marginBottom:"mpdn4nr2",marginStart:"isfiuinm"},isSending:{pointerEvents:"m62443ks",opacity:"n791o4v8"},drawerHeader:{display:"p357zi0d",alignItems:"gndfcl4n"},drawerHeaderButtonContainer:{marginStart:"isfiuinm"},deleteButtonContainer:{marginTop:"dkeqio29",marginEnd:"jnwc1y2a",marginBottom:"ofb4x1dx",marginStart:"svoq16ka",textAlign:"qfejxiq4"},spinner:{position:"lhggkp7q",top:"kfa44f3y",start:"m7kgcvyw",zIndex:"thghmljt",transform:"qk2y3tb3"},hiddenContainer:{marginTop:"opp68qpq",marginEnd:"jnwc1y2a",marginBottom:"mpdn4nr2",marginStart:"svoq16ka"},hiddenLabel:{position:"g0rxnol2",top:"hd6b059k",marginStart:"a3oefunm"},hiddenDescr:{marginTop:"hymafltn",marginBottom:"bvhm1occ",marginStart:"gv7ona1m",fontSize:"f8jlpxt4",lineHeight:"r5qsrrlp",color:"pp1m8hwk"}};function $(e){let{isComplianceInfoAvailable:t,isComplianceHardEnforced:n,showComplianceInfoImporterAddress:a,complianceInfo:r,onComplianceInfoChange:i,onComplianceInfoImporterAddressChange:l}=e;const[s,d]=(0,W.useState)([]),u=(0,W.useMemo)((()=>{const e=(0,y.getMeUser)().user;return s.length>0&&(0,m.canSeeECommerceComplianceIndiaCountryOriginExemptBusinessJourney)(e)?(0,S.bubbleCountryOnListOfCountries)(s,f.COMPLIANCE_INFO_CODES.INDIA,!0):s}),[s]),p=(0,W.useMemo)((()=>{const e=(0,y.getMeUser)().user;if(s.length>0&&(0,m.canSeeECommerceComplianceIndiaCountryOriginExemptBusinessJourney)(e)){let e=f.COMPLIANCE_INFO_CODES.INDIA;return"string"==typeof(null==r?void 0:r.countryCodeOrigin)&&""!==r.countryCodeOrigin&&(e=r.countryCodeOrigin),(0,S.formatCountriesOfOrigin)(s,e)}return s}),[s,null==r?void 0:r.countryCodeOrigin]),h=e=>`${e.toString()} (${q.fbt._("Optional",null,{hk:"4vf9yI"}).toString()})`,g=e=>!r||Object.values(r.importerAddress).every((e=>!e))?h(e):e;return(0,W.useEffect)((()=>{let e=!0;return(0,o.default)((function*(){const t=(0,y.getMeUser)().user;if((0,m.canSeeECommerceComplianceIndiaSoftEnforcement)(t)){const t=yield(0,S.getCountries)();e&&d(t)}}))(),()=>{e=!1}}),[]),t&&s.length?(0,X.jsxs)("div",{"data-testid":"product-edit-drawer-compliance",children:[(0,X.jsx)(R.TextInput,{testid:"product-edit-drawer-compliance-country-of-origin-input",value:null==r?void 0:r.countryNameOrigin,placeholder:q.fbt._("Country of Origin",null,{hk:"2yl0F7"}),onChange:()=>{},theme:"small",customStyleThemes:["desaturated"],managed:!0,onFocus:()=>c.Cmd.showCountrySelector(q.fbt._("Country of Origin",null,{hk:"2yl0F7"}),null==r?void 0:r.countryCodeOrigin,p,(e=>{i("countryCodeOrigin",e)})),error:null==r?void 0:r.countryCodeOriginError}),a&&(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(R.TextInput,{testid:"product-edit-drawer-compliance-importer-name-input",value:null==r?void 0:r.importerName,placeholder:g(q.fbt._("Importer Name",null,{hk:"3DW3Nn"})),onChange:e=>{i("importerName",e)},theme:"small",customStyleThemes:["desaturated"],maxLength:f.COMPLIANCE_INFO_LENGTH.IMPORTER_NAME,error:null==r?void 0:r.importerNameError}),(0,X.jsx)(R.TextInput,{testid:"product-edit-drawer-compliance-importer-address-street-1-input",value:null==r?void 0:r.importerAddress.street1,placeholder:g(q.fbt._("Importer Address Line 1",null,{hk:"1ORfyh"})),onChange:e=>{l("street1",e)},theme:"small",customStyleThemes:["desaturated"],maxLength:f.COMPLIANCE_INFO_LENGTH.STREET1,error:null==r?void 0:r.importerAddress.street1Error}),(0,X.jsx)(R.TextInput,{testid:"product-edit-drawer-compliance-importer-address-street-2-input",value:null==r?void 0:r.importerAddress.street2,placeholder:h(q.fbt._("Importer Address Line 2",null,{hk:"2pYt7Y"})),onChange:e=>{l("street2",e)},theme:"small",customStyleThemes:["desaturated"],maxLength:f.COMPLIANCE_INFO_LENGTH.STREET2}),(0,X.jsx)(R.TextInput,{testid:"product-edit-drawer-compliance-importer-address-city-input",value:null==r?void 0:r.importerAddress.city,placeholder:g(q.fbt._("Importer City",null,{hk:"4c06Q3"})),onChange:e=>{l("city",e)},theme:"small",customStyleThemes:["desaturated"],maxLength:f.COMPLIANCE_INFO_LENGTH.CITY,error:null==r?void 0:r.importerAddress.cityError}),(0,X.jsx)(R.TextInput,{testid:"product-edit-drawer-compliance-importer-address-region-input",value:null==r?void 0:r.importerAddress.region,placeholder:h(q.fbt._("Importer Region",null,{hk:"3MkbQD"})),onChange:e=>{l("region",e)},theme:"small",customStyleThemes:["desaturated"],maxLength:f.COMPLIANCE_INFO_LENGTH.REGION}),(0,X.jsx)(R.TextInput,{testid:"product-edit-drawer-compliance-importer-address-country-code-input",value:null==r?void 0:r.importerAddress.countryName,placeholder:g(q.fbt._("Importer Country",null,{hk:"3ar6sr"})),onChange:()=>{},theme:"small",customStyleThemes:["desaturated"],managed:!0,onFocus:()=>c.Cmd.showCountrySelector(q.fbt._("Importer Country",null,{hk:"3ar6sr"}),null==r?void 0:r.importerAddress.countryCode,u,(e=>{l("countryCode",e)})),error:null==r?void 0:r.importerAddress.countryCodeError}),(0,X.jsx)(R.TextInput,{testid:"product-edit-drawer-compliance-importer-address-postal-code-input",value:null==r?void 0:r.importerAddress.postalCode,placeholder:h(q.fbt._("Importer Zip/Postal Code",null,{hk:"Bbhqf"})),onChange:e=>{l("postalCode",e)},theme:"small",customStyleThemes:["desaturated"],maxLength:f.COMPLIANCE_INFO_LENGTH.POSTAL_CODE}),(0,X.jsx)(I.ComplianceInfoHelpCenterBanner,{xstyle:J.complianceInfoHelpCenterBanner})]})]}):(0,X.jsx)(M.FlexRow,{align:"center",justify:"center",children:(0,X.jsx)(P.default,{children:(0,X.jsx)(A.Spinner,{})})})}},863935:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(364369)),o=a(n(33889)),i=a(n(744356)),l=a(n(499360)),s=n(912591),d=n(111054),u=n(113923),c=a(n(60453)),f=a(n(69637)),p=n(427394),h=n(994790),m=a(n(833308)),g=n(548360),v=n(667294),x=a(n(156720)),C=n(785893);const y={isLoading:{pointerEvents:"m62443ks",opacity:"n791o4v8"},placeholderIcon:{position:"g0rxnol2",width:"dxy1asz1",height:"q7zw29cd",background:"tqd5if5z",borderTopStartRadius:"l147y7tb",borderTopEndRadius:"mjscftrx",borderBottomEndRadius:"fqwk616h",borderBottomStartRadius:"pkud3j3x"},spinner:{position:"lhggkp7q",top:"kfa44f3y",start:"m7kgcvyw",zIndex:"thghmljt",transform:"qk2y3tb3"},placeholderContainer:{width:"ln8gz9je",paddingTop:"emrlamx0",paddingEnd:"f9ovudaz",paddingBottom:"przvwfww",paddingStart:"gx1rr48f",marginTop:"c46o30wg",marginEnd:"jnwc1y2a",marginBottom:"du8bjn1j",marginStart:"svoq16ka",borderTop:"lufur1ix"},addItemPlaceholder:{marginTop:"eg3lofc5",marginEnd:"jnwc1y2a",marginBottom:"pz0xruzv",marginStart:"svoq16ka",borderTop:"q4zabkcz"},divider:{width:"jpfst8ig",marginStart:"ia9wx81j",borderTop:"lufur1ix"}},_="https://www.facebook.com/legal/terms",b="https://www.facebook.com/policies/commerce";function E(e,t){const{onBack:n,onAddProductClick:a,isCreatingCatalogFn:v}=e,E=v(),S=(0,C.jsx)("div",{className:(0,x.default)(y.placeholderIcon)}),j=(0,C.jsx)(l.default,{href:_,onClick:e=>{e.preventDefault(),(0,s.openExternalLink)(_)},children:g.fbt._("Facebook Product",null,{hk:"3JyFEa"})}),k=(0,C.jsx)(l.default,{href:b,onClick:e=>{e.preventDefault(),(0,s.openExternalLink)(b)},children:g.fbt._("Facebook Commercial Terms",null,{hk:"3LS54M"})}),T=(0,C.jsx)(l.default,{href:r.default.WA_COMMERCE_POLICY_URL,onClick:e=>{e.preventDefault(),(0,s.openExternalLink)(r.default.WA_COMMERCE_POLICY_URL)},children:g.fbt._("WhatsApp Commerce Policies",null,{hk:"2wf95I"})}),w=g.fbt._("By using this feature, you're using a {fb_product_link} and agree that the {fb_commerce_link} and {wa_commerce_policy_link} apply.",[g.fbt._param("fb_product_link",j),g.fbt._param("fb_commerce_link",k),g.fbt._param("wa_commerce_policy_link",T)],{hk:"14xbJv"}),D=(0,x.default)(E&&y.isLoading),I=E?(0,C.jsx)("div",{className:(0,x.default)(y.spinner),children:(0,C.jsx)(d.Spinner,{size:50,stroke:3})}):null,M=E?(0,C.jsx)(o.default,{onClick:()=>{},theme:"default",idle:!!E,testid:"add-item"}):(0,C.jsx)(p.DrawerContext.Consumer,{children:()=>(0,C.jsx)(o.default,{onClick:()=>{a()},theme:"default",idle:!1,testid:"add-item"})});return(0,C.jsxs)(c.default,{ref:t,children:[(0,C.jsx)(h.DrawerHeader,{title:g.fbt._("Catalog",null,{hk:"3YVOSV"}),type:h.DRAWER_HEADER_TYPE.LARGE,onBack:n}),(0,C.jsx)(f.default,{className:D,children:(0,C.jsxs)(m.default,{theme:"padding-small",animation:!1,children:[I,(0,C.jsx)(u.TextDiv,{theme:"title",children:g.fbt._("Add items to your catalog so customers can see what you're offering",null,{hk:"3z35i1"})}),M,(0,C.jsx)(u.TextDiv,{theme:"plain",children:w}),(0,C.jsxs)("div",{className:(0,x.default)(y.placeholderContainer),children:[(0,C.jsx)(i.default,{theme:"add-item-placeholder",image:S,customImage:!0,className:(0,x.default)(y.addItemPlaceholder),primary:"",secondary:"",idle:!0}),(0,C.jsx)("div",{className:(0,x.default)(y.divider)}),(0,C.jsx)(i.default,{theme:"add-item-placeholder",image:S,customImage:!0,className:(0,x.default)(y.addItemPlaceholder),primary:"",secondary:"",idle:!0}),(0,C.jsx)("div",{className:(0,x.default)(y.divider)})]})]})})]},"catalog-link-drawer")}var S=(0,v.forwardRef)(E);t.default=S},314746:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.ProductInfoDrawer=function(e){const{onCancel:t,collectionId:n,catalog:a,onEditProduct:M,onShareProduct:P,isPushed:A=!0}=e,O=(0,k.useContext)(y.DrawerContext),R=(0,w.useModelValues)(e.product,["id","catalogWid","name","priceAmount1000","description","productImageCollection","reviewStatus","url","canAppeal","imageCdnUrl","retailerId","currency","isHidden"]),[L,N]=(0,k.useState)(!0);(0,k.useEffect)((()=>{const e=(0,l.getMaybeMeUser)();A&&(0,v.qplAnnotateProductView)(!(null==e?void 0:e.equals(R.catalogWid))),a.pullProduct(R.id.toString(),A).then((()=>{A&&(0,v.qplEndProductView)(r.QuickLogActionType.SUCCESS)})).catch((()=>{A&&(0,v.qplEndProductView)(r.QuickLogActionType.FAIL)})).finally((()=>{N(!1)})),(0,u.logProductDetailView)({product:R,catalogContext:(0,c.getProductCatalogContext)(O),collectionId:n})}),[]);const F=(0,l.getMaybeMeUser)(),B=S.StatusCollection.get(F),U=(0,D.jsx)(g.TextDiv,{theme:"muted",xstyle:[I.businessInfoTitle,i.uiPadding.vert10,i.uiPadding.horiz20],children:j.fbt._("Business Info",null,{hk:"20HLtr"})}),H=R.reviewStatus!==E.PRODUCT_REVIEW_STATUS.APPROVED||R.isHidden,G=(0,D.jsxs)("div",{children:[(0,D.jsx)("div",{className:(0,T.default)(I.buttonSeparator,i.uiPadding.all0,i.uiPadding.top3,i.uiMargin.end32),children:(0,D.jsx)(h.default,{type:"strong",onClick:()=>{M&&M(R)},testid:"product-info-drawer edit-button",children:j.fbt._("Edit",null,{hk:"4aIVNd"})})}),(0,D.jsx)(h.default,{type:"strong-primary",onClick:()=>{P&&P(R)},disabled:H,testid:"product-info-drawer share-button",children:j.fbt._("Share",null,{hk:"3RmUA"})})]}),z=(0,D.jsxs)("div",{className:(0,T.default)(I.drawerHeader),children:[(0,D.jsx)("div",{className:(0,T.default)(I.productName),children:R.name}),(0,D.jsx)("div",{className:(0,T.default)(I.drawerHeaderButtonContainer,i.uiPadding.all0,i.uiPadding.end10),children:G})]}),q=B?(0,D.jsx)(b.default,{title:U,theme:"no-padding",children:(0,D.jsx)(d.default,{status:B})}):null,W=L?(0,D.jsx)(m.default,{}):(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(p.default,{product:R,isAvailable:!0,fetching:!1}),(0,D.jsx)(s.default,{product:R}),(0,D.jsx)(f.default,{product:R,collectionId:n,onSendChat:()=>{t(),(0,o.sendProductToChat)(R,a),(0,u.logProductMessageBusinessClick)(R,(0,c.getProductCatalogContext)(O))},isAvailable:!0})]});return(0,D.jsxs)(x.default,{theme:"catalog",children:[(0,D.jsx)(_.DrawerHeader,{testid:"catalog-product-title",title:z,type:_.DRAWER_HEADER_TYPE.SMALL,onCancel:t,headingLevel:"2",focusBackOrCancel:!0}),(0,D.jsxs)(C.default,{children:[(0,D.jsx)(b.default,{theme:"center-column-fixed-width",children:W}),(0,D.jsx)("div",{className:(0,T.default)(I.productWrapper),children:q})]})]},"catalog-link-drawer")};var r=n(451897),o=n(895697),i=n(128298),l=n(978820),s=a(n(11956)),d=a(n(37867)),u=n(277975),c=n(397567),f=a(n(16481)),p=a(n(233382)),h=a(n(39770)),m=a(n(329796)),g=n(113923),v=n(582145),x=a(n(60453)),C=a(n(69637)),y=n(427394),_=n(994790),b=a(n(833308)),E=n(105641),S=n(46133),j=n(548360),k=n(667294),T=a(n(156720)),w=n(735461),D=n(785893);const I={drawerHeader:{display:"p357zi0d",alignItems:"gndfcl4n"},productName:{overflowX:"gfz4du6o",overflowY:"r7fjleex",fontSize:"cqiun4t2",fontWeight:"hnx8ox4h",textOverflow:"lhj4utae"},buttonSeparator:{display:"l7jjieqr"},drawerHeaderButtonContainer:{marginStart:"isfiuinm"},productWrapper:{width:"tcisnlar",marginTop:"tt8xd2xn",marginEnd:"k1jo73ug",marginBottom:"mpdn4nr2",marginStart:"isfiuinm"},businessInfoTitle:{color:"izlvswng"}}},11956:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{product:t}=e;const n=(0,v.jsx)(s.default,{href:r.default.WA_COMMERCE_POLICY_URL,onClick:e=>{e.preventDefault(),(0,d.openExternalLink)(r.default.WA_COMMERCE_POLICY_URL)},children:o.default.t(394)});if(t.reviewStatus===h.PRODUCT_REVIEW_STATUS.APPROVED)return t.isHidden?(0,v.jsxs)("div",{className:(0,g.default)(x),children:[(0,v.jsx)("div",{className:(0,g.default)(C),children:(0,v.jsx)(u.default,{name:"visibility-off"})}),(0,v.jsx)("div",{className:(0,g.default)(y),children:(0,v.jsx)(c.TextDiv,{children:m.fbt._("You hid this item. Your customers can't see it in your catalog",null,{hk:"28Rw4y"})})})]}):null;if(t.reviewStatus===h.PRODUCT_REVIEW_STATUS.REJECTED){if(!0===t.canAppeal){const e=m.fbt._("This item wasn't approved because it doesn't follow our product or service guidelines. {learn_more_link}.",[m.fbt._param("learn_more_link",n)],{hk:"3r1bOw"}),a=(0,v.jsx)(s.default,{onClick:function(){i.ModalManager.open((0,v.jsx)(p.DrawerContext.Consumer,{children:e=>(0,v.jsx)(f.default,{product:t,sessionId:(0,l.getProductCatalogSessionId)(e)})}))},testid:"product-appeal-button",children:m.fbt._("request another review",null,{hk:"1edAPz"})}),r=(0,v.jsx)("span",{className:(0,g.default)(_),tabIndex:"0",children:m.fbt._("If you feel this is not correct, you can {request_review_link}.",[m.fbt._param("request_review_link",a)],{hk:"2Vozbp"})});return(0,v.jsxs)("div",{className:(0,g.default)(x),"data-testid":"product-appeal-rejected-initial-review",children:[(0,v.jsx)("div",{className:(0,g.default)(C),children:(0,v.jsx)(u.default,{name:"info"})}),(0,v.jsxs)("div",{className:(0,g.default)(y),children:[e,r]})]})}const e=m.fbt._("We reviewed this item again and found it didn't follow product or service guidelines. {learn_more_link}.",[m.fbt._param("learn_more_link",n)],{hk:"4yu8I0"});return(0,v.jsx)("div",{className:(0,g.default)(x),"data-testid":"product-appeal-rejected-final",children:e})}if(t.reviewStatus===h.PRODUCT_REVIEW_STATUS.NO_REVIEW||t.reviewStatus===h.PRODUCT_REVIEW_STATUS.OUTDATED){const e=t.isHidden?m.fbt._("This item is being reviewed. You hid it, so customers won’t see it in your catalog when it’s approved. {learn_more_link}.",[m.fbt._param("learn_more_link",n)],{hk:"mqMRu"}):m.fbt._("This item is being reviewed. If it’s been approved, your customers will be able to see it on your profile. {learn_more_link}.",[m.fbt._param("learn_more_link",n)],{hk:"1sk3Z"});return(0,v.jsx)("div",{className:(0,g.default)(x),"data-testid":"product-appeal-pending-initial-review",children:e})}if(!1===t.canAppeal){const e=m.fbt._("Your appeal was submitted. If it’s approved, your item will be added to your catalog. If it’s not approved, you’ll be notified.",null,{hk:"4aNdXt"});return(0,v.jsx)("div",{className:(0,g.default)(x),"data-testid":"product-appeal-pending-appeal",children:e})}return null};var r=a(n(364369)),o=a(n(568064)),i=n(914597),l=n(397567),s=a(n(499360)),d=n(912591),u=a(n(23217)),c=n(113923),f=a(n(343318)),p=n(427394),h=n(105641),m=n(548360),g=a(n(156720)),v=n(785893);const x={display:"p357zi0d",paddingTop:"a71rq12o",paddingEnd:"bcymb0na",paddingBottom:"pcbmd69e",paddingStart:"e8k79tju",marginBottom:"mpdn4nr2",lineHeight:"r5qsrrlp",backgroundColor:"ronsgs3n"},C={display:"p357zi0d",flex:"n5hs2j7m",alignItems:"gndfcl4n"},y={marginStart:"r6x3u63k"},_={display:"l7jjieqr",marginTop:"a4rz4n5c",fontSize:"f8jlpxt4"}},37867:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,s.useModelValues)(e.status,["status"]);return(0,d.jsx)(o.default,{image:(0,d.jsx)(i.DetailImage,{id:(0,r.getMaybeMeUser)()}),primary:l.Conn.pushname,secondary:t.status,idle:!0})};var r=n(978820),o=a(n(744356)),i=n(288984),l=n(317239),s=n(735461),d=n(785893)},987728:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{businessProfile:t,catalog:n,openCatalog:a=m}=e;const d=(0,u.hasShop)(t),g=Boolean(d&&c.ServerProps.shopsProductGrid);if((0,p.useEffect)((()=>{(0,o.logShopsManagementEvent)(i.default.SHOPS_MANAGEMENT_ACTION.ACTION_SHOPS_PRODUCT_PREVIEW_VISIBLE,{shouldLogJid:!1,isShopsProductPreviewVisible:g})}),[g]),d)return g?(0,h.jsx)(s.default,{isEditMode:!0,subtitle:r.default.t(431),businessProfile:t,catalog:n,productsToShow:3}):null;return(0,h.jsx)(l.default,{catalog:n,onProductDetail:a,onProductCatalog:()=>{a()},productsToShow:3,catalogEntryLabel:null==n?f.fbt._("Add catalog",null,{hk:"2iihM5"}):f.fbt._("View or edit catalog",null,{hk:"354QjL"}),showProductPlaceholders:!0,seeMoreOverlay:!0,sectionTheme:"refresh"})};var r=a(n(568064)),o=n(144262),i=a(n(471410)),l=a(n(542953)),s=a(n(696222)),d=n(87912),u=n(794010),c=n(964551),f=n(548360),p=n(667294),h=n(785893);function m(e){(0,d.openCatalogManagementFlow)(e,i.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_PROFILE)}},575260:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{collection:t,theme:n="collection-edit",onDelete:a,onEdit:r,onSeeCollection:s,canManage:C,isReorder:y}=e,[_]=(0,p.useState)(!1),[b,E]=(0,p.useState)(null),S=e=>{e.preventDefault(),e.stopPropagation(),a&&a(t)},j=e=>{e.preventDefault(),e.stopPropagation(),r&&r(t)},k=()=>{E(null)},T=(0,m.jsx)("div",{className:(0,h.default)(g),children:(0,m.jsx)("div",{className:(0,h.default)(v),children:(0,m.jsx)(d.default,{name:"collections_folder"})})}),w=(0,m.jsx)(l.EmojiText,{text:t.name,ellipsify:!0,titlify:!0});let D;b&&(D=(0,m.jsx)(u.UIE,{displayName:"CollectionContextMenu",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:k,children:(0,m.jsx)(c.default,{contextMenu:b})}));return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(o.default,{customImage:!0,image:T,primary:w,theme:n,detail:y?(0,m.jsx)(x,{}):void 0,active:_,contextEnabled:()=>e.canManage&&!y,onContext:e=>{if(b)return void E(null);const t=[];C&&(t.push((0,m.jsx)(i.DropdownItem,{testid:"mi-edit-collection",action:j,children:f.fbt._("Edit",null,{hk:"Xow6E"})},"EditLabel")),t.push((0,m.jsx)(i.DropdownItem,{testid:"mi-delete-collection",action:S,children:f.fbt._("Delete",null,{hk:"1rLhBB"})},"DeleteLabel"))),E({menu:t,event:e.event,anchor:e.anchor})},onClick:e=>{e.preventDefault(),e.stopPropagation(),y||s&&s(t)}},t.id.toString()),D]})};var r=n(128298),o=a(n(49107)),i=n(471174),l=n(965417),s=n(429623),d=a(n(23217)),u=n(718644),c=a(n(624717)),f=n(548360),p=n(667294),h=a(n(156720)),m=n(785893);const g={zIndex:"thghmljt",display:"p357zi0d",alignItems:"gndfcl4n",justifyContent:"ac2vgrno",width:"h4dw90qs",marginTop:"dj1c3cmq",marginEnd:"ds60debm",marginBottom:"or9x5nie",marginStart:"svoq16ka",color:"bot80yxp",pointerEvents:"m62443ks",backgroundColor:"ddl5anf2",borderTopStartRadius:"r18xjin9",borderTopEndRadius:"pz6oj2k2",borderBottomEndRadius:"sa2xs5zj",borderBottomStartRadius:"n58sa971"},v={transform:"t21h2yns"},x=()=>(0,m.jsx)(s.FlexColumn,{xstyle:r.uiMargin.end15,justify:"center",align:"center",children:(0,m.jsx)(d.default,{name:"draggable_item"})})},92625:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{data:t,canManage:n,onEditCollection:a,onSeeCollection:g,isReorder:v,handleReorderMove:x,containerRef:C,onFinalDropOfItem:y}=e,_=(0,h.useModelValues)(e.catalog,["collections"]),b=(0,p.useMemo)((()=>t.map(((e,t)=>e.collection?{itemKey:e.collection.id,catalogListItem:e,order:t}:null)).filter(Boolean)),[t]),E=(0,p.useContext)(c.DrawerContext),S=e=>e?(0,m.jsx)(r.default,{collection:e,canManage:n,onDelete:()=>((e,t)=>{(0,i.handleCollectionDelete)((0,f.unproxy)(_),e,t)})(e,(0,l.getProductCatalogContext)(E)),onEdit:a,onSeeCollection:g,isReorder:v}):null;return(0,m.jsx)(u.default,{flatListControllers:[e.flatListController],children:(0,m.jsx)(s.DragAndDropWrapper,{containerRef:C,children:(0,m.jsx)(d.FlatList,{flatListController:e.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:b,renderItem:e=>{let{catalogListItem:{collection:t},order:n}=e;return v?(0,m.jsx)(s.DragAndDropItem,{index:n,onMove:x,onFinalDrop:y,children:S(t)}):S(t)},defaultItemHeight:o.PRODUCT_LIST_ITEM_HEIGHT})})})};var r=a(n(575260)),o=n(364481),i=n(547217),l=n(397567),s=n(705092),d=n(747915),u=a(n(944942)),c=n(427394),f=n(118146),p=n(667294),h=n(735461),m=n(785893)},95416:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(348926)),o=n(199701),i=n(348206),l=a(n(713752)),s=n(451897),d=n(634245),u=n(665397),c=n(669393),f=n(26741),p=n(128298),h=n(978820),m=a(n(92625)),g=a(n(527143)),v=n(364481),x=n(547217),C=a(n(33889)),y=n(397567),_=a(n(39770)),b=n(429623),E=a(n(748846)),S=a(n(630855)),j=a(n(329796)),k=n(111054),T=a(n(60453)),w=a(n(69637)),D=n(427394),I=n(994790),M=n(599989),P=n(548360),A=n(667294),O=a(n(156720)),R=a(n(616223)),L=a(n(955010)),N=a(n(389113)),F=a(n(290886)),B=n(785893);const U={loadingSpinner:{display:"btb1m7bk",justifyContent:"ac2vgrno",height:"jdwybkuq"},footer:{backgroundColor:"rv6u8h8g"},reorderLoadingScreen:{minWidth:"llkbrke6",minHeight:"sdfuwbjb",position:"lhggkp7q",zIndex:"bgigc5s4",backgroundColor:"rz1eta6h",transitionProperty:"ariinwu3",transitionDuration:"p4t1lx4y",transitionTimingFunction:"pu4k07i0"}};function H(e){let{onClick:t,disableBtn:n=!1,isLoading:a}=e;return(0,B.jsx)(b.FlexContainer,{xstyle:[U.footer,p.uiPadding.bottom8],direction:"horizontal",justify:"end",children:(0,B.jsx)(_.default,{xstyle:p.uiMargin.all12,onClick:t,disabled:n,spinner:a,type:"primary",children:P.fbt._("Save",null,{hk:"4EgenI"})})})}function G(){return(0,B.jsx)(b.FlexRow,{xstyle:[U.reorderLoadingScreen],align:"center",justify:"center",testid:"collection-reorder-updating-loading",children:(0,B.jsx)(E.default,{children:(0,B.jsx)(k.Spinner,{size:50,stroke:4,color:k.colorOptions.accent})})})}function z(e,t){const{setScrollOffset:n,editCollection:a,onSeeCollection:p,onReorderCollection:_,isReorder:b=!1,onBack:E}=e,k=(0,R.default)((()=>new S.default)),z=(0,A.useRef)(null),[q,W]=(0,A.useState)(!0),V=(0,A.useRef)(null),[Y,K]=(0,A.useState)(null),[X,Q]=(0,A.useState)([]),[J,$]=(0,A.useState)(!1),[Z,ee]=(0,A.useState)(!1),te=(0,A.useRef)(!0),ne=(0,A.useContext)(D.DrawerContext),ae=(0,A.useMemo)((()=>{const e=(0,h.getMeUser)();return M.CatalogCollection.get(e)}),[]),re=(0,A.useCallback)((e=>{(function(){var t=(0,r.default)((function*(){if(ae)try{const t=new d.CollectionsDataSource(ae,!0,v.PRODUCT_LIST_ITEM_HEIGHT,e);if(yield null==t?void 0:t.loadInitialItems(),!te.current||!t)return;const n=new d.CatalogListItemScrollHelper(t);V.current=t,K(n),Q(t.getData()),W(!1),e&&c.QPL.markerEnd(u.QuickLogMarkerId.WHATSAPP_COLLECTIONS_MANAGEMENT_VIEW,s.QuickLogActionType.SUCCESS)}catch(t){e&&c.QPL.markerEnd(u.QuickLogMarkerId.WHATSAPP_COLLECTIONS_MANAGEMENT_VIEW,s.QuickLogActionType.FAIL)}}));return function(){return t.apply(this,arguments)}})()()}),[ae]);(0,A.useEffect)((()=>{if(!ae)return;const{isPushed:t=!0}=e;ae.collections.on("add remove",(()=>{te.current&&V.current&&Q((e=>{var t;const n=(null===(t=V.current)||void 0===t?void 0:t.getData())||[];return b?[...e,...n.slice(e.length)]:n}))})),re(t&&!b)}),[]);const oe=(0,F.default)(((e,t)=>{null==n||n(t.scrollTop),(null==Y?void 0:Y.willLoadMore(t))&&W(!0),null==Y||Y.onScroll(e,t).then((e=>{e&&W(!1)})).catch((e=>{throw W(!1),e}))}),100),ie=(0,A.useCallback)(((e,t)=>{Q((n=>(0,i.arrayMove)(n,e,t)))}),[]),le=(0,N.default)((()=>{const e=(null==ae?void 0:ae.collections.map((e=>e.id)))||[],t=X.reduce(((e,t)=>t.collection?[...e,t.collection.id]:e),[]);$(!(0,l.default)(e,t))}));(0,L.default)((()=>{te.current=!1}));const se=(0,A.useCallback)((()=>{(function(){var e=(0,r.default)((function*(){try{var e;if(!ae)return;ee(!0);const t=(0,y.getProductCatalogContext)(ne),n=(null==ae?void 0:ae.collections.map((e=>e.id)))||[],a=X.reduce(((e,t)=>t.collection?[...e,t.collection.id]:e),[]),{moved:r}=(0,o.findArrayDiff)(n,a);if(!r.length)return ee(!1),void $(!1);const i=yield(0,x.handleCollectionReorder)(r,t);if(!te.current||!V.current)return;if(null===(e=V.current)||void 0===e||e.resetData(),i)return void E();yield re(!1),$(!1)}finally{te.current&&ee(!1)}}));return function(){return e.apply(this,arguments)}})()()}),[X,ae,E,ne,re]);return(0,B.jsxs)(T.default,{ref:t,theme:"products",children:[(0,B.jsx)(I.DrawerHeader,{title:b?P.fbt._("Reorder",null,{hk:"41Tp0M"}):P.fbt._("Collections",null,{hk:"I9pEH"}),type:I.DRAWER_HEADER_TYPE.LARGE,onBack:e.onBack,menu:(0,B.jsx)(g.default,{isReorderEnabled:!f.UA.isSafari&&!b&&X.length>1,onReorder:_})}),(0,B.jsx)(w.default,{ref:z,onScroll:e=>{e.currentTarget&&oe(e,e.currentTarget)},flatListControllers:[k.current],scrollOffset:e.scrollOffset,children:ae?(0,B.jsxs)("div",{children:[!b&&(0,B.jsx)(C.default,{onClick:()=>{a(null)},theme:"collections",title:P.fbt._("New collection",null,{hk:"2Q4UnS"})}),0!==X.length&&(0,B.jsx)(m.default,{canManage:!0,catalog:ae,onEditCollection:a,data:X,flatListController:k.current,onSeeCollection:p,isReorder:b,handleReorderMove:ie,containerRef:z.current,onFinalDropOfItem:le}),q&&(0,B.jsx)("div",{className:(0,O.default)(U.loadingSpinner),children:(0,B.jsx)(j.default,{})})]}):null}),b&&(0,B.jsx)(H,{disableBtn:!J||Z,isLoading:Z,onClick:()=>{se()}}),Z&&(0,B.jsx)(G,{})]})}var q=(0,A.forwardRef)(z);t.default=q},527143:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{isReorderEnabled:t,onReorder:n=(()=>{})}=e;const a=[];t&&(0,r.isCollectionReorderingEnabled)()&&a.push((0,u.jsx)(i.DropdownItem,{testid:"menu-item",action:n,children:d.fbt._("Reorder",null,{hk:"2EAZAN"})},"reorder-button"));if(0===a.length)return null;return(0,u.jsx)(l.MenuBarItem,{testid:"menu-bar-menu",icon:(0,u.jsx)(s.default,{name:"menu"}),title:d.fbt._("Menu",null,{hk:"1WeEwR"}),children:(0,u.jsx)(o.Dropdown,{type:o.MenuType.DropdownMenu,flipOnRTL:!0,dirX:o.DirX.LEFT,children:a},"CatalogDetailHeader")})};var r=n(408139),o=n(160811),i=n(471174),l=n(646346),s=a(n(23217)),d=n(548360),u=n(785893)},330327:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(272312),o=n(115461),i=n(665397),l=n(669393),s=n(694816),d=a(n(540436)),u=a(n(839658)),c=n(303013),f=a(n(534949)),p=n(778986),h=n(58668),m=n(843257),g=a(n(23217)),v=n(950452),x=a(n(701784)),C=n(480666),y=n(548360),_=n(667294),b=(a(n(156720)),n(785893));const E={btnDelete:{position:"lhggkp7q",top:"hdpg1tjz",end:"ltcz4qz9",zIndex:"mb8var44",color:"k17s6i4e",filter:"rhe1kc9j"},btnAdd:{display:"p357zi0d",flexDirection:"f8m0rgwh",alignItems:"gndfcl4n",justifyContent:"ac2vgrno",width:"jkv2xdwy",height:"sptw4ec9",fontSize:"lak21jic",fontWeight:"hnx8ox4h",lineHeight:"gz7w46tb",letterSpacing:"hql59cr1"}};function S(e){let{images:t,deleteImage:n}=e;return t.filter((e=>e.mediaData)).map(((e,t)=>(0,b.jsxs)("div",{className:u.default.imageTile,children:[(0,b.jsx)(x.default,{xstyle:E.btnDelete,"aria-label":y.fbt._("Remove image number {imageNumber}",[y.fbt._param("imageNumber",t+1)],{hk:"11vQtK"}),testid:"delete-image",onClick:()=>n(e),children:(0,b.jsx)(g.default,{className:u.default.deleteIcon,name:"x-alt"})}),(0,b.jsx)(c.ProductThumb,{mediaData:e.mediaData,className:u.default.imageThumb})]},e.mediaData.filehash)))}function j(e){let{inputRef:t,handleFilePick:n}=e;return(0,b.jsx)("input",{ref:t,type:"file",accept:m.IMAGE_MIMES,style:{display:"none"},onChange:n,multiple:!0})}function k(e){let{onAddFileClick:t}=e;return(0,b.jsx)("div",{className:u.default.btnAddContainer,children:(0,b.jsxs)(x.default,{xstyle:E.btnAdd,"aria-label":y.fbt._("Add additional image",null,{hk:"1zIuu3"}),onClick:t,testid:"add-image",children:[(0,b.jsx)(g.default,{name:"camera"}),(0,b.jsx)("div",{className:u.default.btnAddText,children:y.fbt._("Add Images",null,{hk:"3yrGBr"})})]})})}function T(e){let{error:t}=e;return(0,b.jsx)("div",{className:u.default.errorMessage,role:"alert",children:t})}function w(e,t){const{maxImageCount:n,onChange:a,error:c,product:g}=e,x=(0,_.useRef)(null),[E,w]=(0,_.useState)((()=>g.productImageCollection.filter((e=>!e.old)).map((e=>({url:e.mediaUrl,mediaData:e.mediaData}))))),D=e=>{e.mediaPrep.waitForPrep().then((t=>{if(!(e=>!(E.filter((t=>t.mediaData.filehash===e.filehash)).length>0&&(s.ToastManager.open((0,b.jsx)(v.Toast,{id:(0,v.genId)(),msg:y.fbt._("Two or more images are the same. Delete any duplicates and try again.",null,{hk:"3qIMS6"})})),1)))(t))return;t.mediaStage=h.MEDIA_DATA_STAGE.RESOLVED,t.renderableUrl=e.fullPreview;const n=t.mediaBlob;!n||n instanceof f.default||f.default.createFromData(n,n.type).then((e=>{t.mediaBlob=e})),w((e=>[...e,{url:null,mediaData:t}])),null==a||a([...E,{url:null,mediaData:t}])}))},I=e=>{(0,r.getFiles)(e,m.IMAGE_MIMES).then((e=>{const t=n-E.length;e.length>t&&s.ToastManager.open((0,b.jsx)(v.Toast,{msg:y.fbt._("You've reached the maximum number of images to add.",null,{hk:"2ra3Nx"}),duration:6e3,action:{onAction:()=>{},actionText:y.fbt._("GOT IT",null,{hk:"175geM"}),dismiss:!0,theme:"success"},id:(0,v.genId)()})),e.slice(0,n-E.length).map((e=>({file:e,filename:e.name,mimetype:e.type,type:o.MSG_TYPE.PRODUCT}))).map((e=>{var t;const n=new C.AttachMedia({file:Promise.resolve(e)});return null===(t=n.processPromise)||void 0===t?void 0:t.then((()=>{D(n)}))}))})),e.target.value&&(e.target.value="")},M=()=>{const e=E.filter((e=>null==e.url)).length;l.QPL.markerAnnotate(i.QuickLogMarkerId.WHATSAPP_PRODUCT_SAVE,{int:{ImagesCount:e}}),l.QPL.markerPoint(i.QuickLogMarkerId.WHATSAPP_PRODUCT_SAVE,"images_upload_start");const t=E.filter((e=>null==e.url)).map((e=>{const{mediaData:{mediaBlob:t,filehash:n}}=e;return t instanceof f.default?(0,p.uploadProductImage)(t,n).then((t=>{e.url=t})):null})).filter(Boolean);return Promise.all(t).then((()=>(l.QPL.markerPoint(i.QuickLogMarkerId.WHATSAPP_PRODUCT_SAVE,"images_upload_end"),E.map((e=>e.url||"")))))};return(0,_.useImperativeHandle)(t,(()=>({uploadImages:M,handleFilePick:I}))),(0,b.jsxs)("div",{className:u.default.panel,children:[(0,b.jsxs)("div",{className:u.default.tileContainer,children:[(0,b.jsxs)(d.default,{transitionAppear:!0,transitionName:"thumb-scale-flex",children:[(0,b.jsx)(S,{images:E,deleteImage:e=>{const t=E.filter((t=>t!==e));w(t),null==a||a(t)}}),E.length<n?(0,b.jsx)(k,{onAddFileClick:()=>{if(x.current){x.current.click()}}}):null]}),(0,b.jsx)(j,{inputRef:x,handleFilePick:I})]}),(0,b.jsx)(T,{error:c})]})}var D=(0,_.forwardRef)(w);t.default=D},346767:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{flatListController:t,onProductDetail:n,productMessageList:a}=e;const l=a.productCollection.getProductModels(),s=a.getSections(),d=a.getSectionsCount()>0,h=a.getTotalProductsFetchedOrFailed(),m=a.getProductSize()===h&&0===l.length,g=[];return s.forEach(((e,t)=>{let{title:n,products:a}=e;const r=[];a.forEach((e=>{let{productId:n}=e;const a=l.find((e=>e.id===n));null!=a&&r.push({itemKey:`section-${t}-${a.id.toString()}`,product:a,type:"product",height:i.PRODUCT_LIST_ITEM_HEIGHT})})),r.length>0&&(null!=n&&""!==n&&g.push({itemKey:`header-${t}-${n}`,label:n,type:"section",height:72}),g.push(...r))})),(0,C.useEffect)((()=>{m&&o.ModalManager.open((0,y.jsx)(u.default,{onConfirm:()=>{r.DrawerManager.closeDrawerRight(),o.ModalManager.close()}}))}),[m]),(0,y.jsx)("div",{className:(0,x.default)({[c.default.list]:!0,[c.default.noSections]:!d}),children:(0,y.jsx)(p.default,{flatListControllers:[t],children:(0,y.jsx)(f.FlatList,{flatListController:t,direction:"vertical",forceConsistentRenderCount:!1,data:g,renderItem:e=>(0,y.jsx)(_,{item:e,onProductDetail:n}),itemEnterAnimationsEnabled:!0})})})};var r=n(141455),o=n(914597),i=n(364481),l=n(277975),s=n(397567),d=a(n(188990)),u=a(n(508714)),c=a(n(231516)),f=n(747915),p=a(n(944942)),h=a(n(11497)),m=n(582145),g=n(427394),v=n(118146),x=a(n(294184)),C=n(667294),y=n(785893);function _(e){let{item:t,onProductDetail:n}=e;const a=(0,C.useCallback)(((e,t)=>((0,l.logCatalogListDetailClick)({product:(0,v.unproxy)(e),catalogContext:t}),(0,m.qplStartProductView)("PLM"),n(e))),[n]);let r=null;switch(t.type){case"section":const{label:e}=t;r=(0,y.jsx)(h.default,{header:e});break;case"product":const{product:n}=t;r=(0,y.jsx)(g.DrawerContext.Consumer,{children:e=>(0,y.jsx)(d.default,{product:n,onClick:()=>a(n,(0,s.getProductCatalogContext)(e)),canManageCatalog:!1})})}return r}},791695:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.ProductMessageListDrawer=void 0;var r=a(n(348926)),o=n(451897),i=n(551737),l=n(941906),s=n(665397),d=n(669393),u=n(364481),c=a(n(217986)),f=n(414375),p=a(n(961055)),h=a(n(346767)),m=n(925840),g=n(965417),v=a(n(630855)),x=a(n(329796)),C=n(582145),y=a(n(60453)),_=a(n(69637)),b=n(994790),E=n(612392),S=n(18952),j=n(667294),k=a(n(156720)),T=a(n(616223)),w=n(587550),D=n(735461),I=a(n(803409)),M=n(785893);const P={display:"p357zi0d"},A=(0,j.forwardRef)(((e,t)=>{const{productListId:n,setScrollOffset:a,onCartClick:A,onProductDetail:O}=e,R=(0,I.default)(),L=(0,T.default)((()=>new v.default)),N=(0,D.useModelValues)(e.contact,["id"]),[F,B]=(0,j.useState)(!1),[U,H]=(0,j.useState)(0),[G,z]=(0,j.useState)(!1),[q,W]=(0,j.useState)((()=>S.ProductMessageListCollection.get(n))),[V]=(0,j.useState)((()=>E.CartCollection.findCart(N.id.toString()))),[Y,K]=(0,j.useState)(V.itemCount),[X,Q]=(0,j.useState)(!1),[J,$]=(0,j.useState)(q?"SUCCESS":"NONE"),Z=t=>{const{isPushed:a=!0}=e,r=a&&!0===t,i=S.ProductMessageListCollection.assertGet(n),l=i.getTotalProductsFetchedOrFailed(),c=i.getProductSize();if(G||l===c)return r&&(d.QPL.markerAnnotate(s.QuickLogMarkerId.WHATSAPP_PLM_DETAILS_VIEW,{int:{ProductsCount:l}}),d.QPL.markerEnd(s.QuickLogMarkerId.WHATSAPP_PLM_DETAILS_VIEW,o.QuickLogActionType.SUCCESS)),void z(!0);B(!0),H(l);const f=r?s.QuickLogMarkerId.WHATSAPP_PLM_DETAILS_VIEW:void 0;S.ProductMessageListCollection.update(n,{markerId:f}).then((e=>{if(R.aborted)return void(r&&d.QPL.markerDrop(s.QuickLogMarkerId.WHATSAPP_PLM_DETAILS_VIEW));B(!1);const t=(Array.isArray(e)?e[0]:e).getTotalProductsFetchedOrFailed();t===U&&z(!0),r&&(d.QPL.markerAnnotate(s.QuickLogMarkerId.WHATSAPP_PLM_DETAILS_VIEW,{int:{ProductsCount:t}}),d.QPL.markerEnd(s.QuickLogMarkerId.WHATSAPP_PLM_DETAILS_VIEW,o.QuickLogActionType.SUCCESS)),l*u.PRODUCT_LIST_ITEM_HEIGHT<window.innerHeight&&Z()})).catch((()=>{B(!1),z(!0),r&&d.QPL.markerEnd(s.QuickLogMarkerId.WHATSAPP_PLM_DETAILS_VIEW,o.QuickLogActionType.FAIL)}))},ee=function(){var t=(0,r.default)((function*(){const{isPushed:t=!0}=e;try{const e=yield S.ProductMessageListCollection.find(n);if(R.aborted)return void(t&&d.QPL.markerDrop(s.QuickLogMarkerId.WHATSAPP_PLM_DETAILS_VIEW));W(e),$("SUCCESS"),Z(!0)}catch(e){(0,f.parseErrorState)(e,(e=>$(e))),t&&d.QPL.markerEnd(s.QuickLogMarkerId.WHATSAPP_PLM_DETAILS_VIEW,o.QuickLogActionType.FAIL)}}));return function(){return t.apply(this,arguments)}}();(0,j.useEffect)((()=>{q?Z():ee(),(0,c.default)(N.id).then((e=>{R.aborted||Q(e)}))}),[]),(0,w.useListener)(V,"all",(()=>{K(V.itemCount)}));const te=null!=A&&X?(0,M.jsx)(m.CartIconMenuBarItem,{cartCountText:(0,i.isNumber)(Y)&&Y>0?Y.toString():void 0,onClick:()=>{(0,C.qplStartCartView)("PLM"),null==A||A(N.id.toString())},catalogOwnerJid:N.id.toString()}):null;return(0,M.jsxs)(y.default,{ref:t,theme:"products",onDrop:e.onBack,children:[(0,M.jsx)(b.DrawerHeader,{title:(0,M.jsx)("div",{className:(0,k.default)(P),children:(0,M.jsx)(g.EmojiText,{text:null==q?void 0:q.title,ellipsify:!0})}),type:b.DRAWER_HEADER_TYPE.SMALL,onBack:e.onBack,menu:te}),(0,M.jsx)(_.default,{onScroll:e=>{var t;t=e.currentTarget,F||t.scrollTop+l.SCROLL_FUDGE>t.scrollHeight-t.clientHeight&&Z(),null==a||a(e.currentTarget.scrollTop)},flatListControllers:[L.current],scrollOffset:e.scrollOffset,children:q?(0,M.jsx)(M.Fragment,{children:(0,M.jsxs)("div",{children:[(0,M.jsx)(h.default,{productMessageList:q,flatListController:L.current,onProductDetail:O}),F&&(0,M.jsx)(x.default,{})]})}):(0,M.jsx)(p.default,{fetchState:J})})]})}));t.ProductMessageListDrawer=A,A.displayName="ProductMessageListDrawer"},508714:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{onConfirm:t}=e;return(0,l.jsx)(o.default,{onOK:t,okText:i.fbt._("OK",null,{hk:"2KEeHb"}),children:(0,l.jsx)(r.EmojiText,{text:i.fbt._("Items in this message are no longer available",null,{hk:"1MclQl"})})})};var r=n(965417),o=a(n(452665)),i=n(548360),l=n(785893)},605537:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(145095)),o=a(n(829861)),i=n(756728),l=n(599989),s=n(548360),d=n(667294),u=n(785893);const c=(e,t)=>{const[n,a]=(0,d.useState)(!1),[c,f]=(0,d.useState)([]),p=(0,u.jsx)(o.default,{disabled:!n,onClick:()=>{var t;const n=(0,r.default)(null===(t=c[0])||void 0===t?void 0:t.catalogWid,"products[0]?.catalogWid"),a=(0,r.default)(l.CatalogCollection.get(n),"CatalogCollection.get(catalogWid)");e.onShare(a)}});return(0,u.jsx)(i.SelectModal,{ref:t,title:s.fbt._("Send products",null,{hk:"3C7pQj"}),onCancel:e.onCancel,onConfirm:e.onConfirm,listType:i.ListType.PRODUCT_SELECT_MODAL,enableSearchBox:!1,customHeader:p,onSelectionChanged:(e,t,n)=>{a(0===n.length)},onDataLoaded:e=>{const t=e;f(t),a(t.length>0)}})};var f=(0,d.forwardRef)(c);t.default=f},829861:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=e.disabled?"bx7g2weo":"",n=e.disabled?"hp667wtd":"",a=e.disabled?null:e.onClick,d=(0,s.jsx)("span",{className:n,children:l.fbt._("Send catalog",null,{hk:"BiYcl"})}),u=(0,s.jsx)(o.default,{theme:"compact",disabled:e.disabled,children:(0,s.jsx)(i.default,{name:"catalog"})});return(0,s.jsx)(r.default,{image:u,onClick:a,primary:d,theme:"list-button-compact",className:t})};var r=a(n(744356)),o=a(n(852711)),i=a(n(23217)),l=n(548360),s=(a(n(156720)),n(785893))},314220:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{quickReply:t}=e,[n,a]=(0,C.useState)(!1),[_,b]=(0,C.useState)(null),E=(0,C.useRef)(null),S=(0,C.useRef)(null),j=l.default.isRTL()?"left":"right",k=()=>{s.ModalManager.open((0,y.jsx)(g.default,{quickReply:t}))},T=function(){var e=(0,r.default)((function*(){try{yield(0,o.deleteQuickReply)(t),d.ToastManager.open((0,y.jsx)(p.Toast,{id:(0,p.genId)(),msg:x.fbt._("Quick reply deleted",null,{hk:"gXzTG"})}))}catch(e){d.ToastManager.open((0,y.jsx)(p.Toast,{id:(0,p.genId)(),msg:x.fbt._("Failed to delete the quick reply",null,{hk:"3yXE4I"})}))}finally{s.ModalManager.close()}}));return function(){return e.apply(this,arguments)}}(),w=()=>{s.ModalManager.open((0,y.jsx)(v.default,{title:x.fbt._("Delete quick reply",null,{hk:"26SlCG"}),onOK:T,onCancel:()=>{s.ModalManager.close()},children:x.fbt._("Are you sure you want to delete the quick reply?",null,{hk:"38ji3u"})}))},D=_&&(0,y.jsx)(h.UIE,{displayName:"QuickReplyContextMenu",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:()=>{b(null),i.default.focus(E.current)},children:(0,y.jsx)(m.default,{contextMenu:_})});return(0,y.jsxs)(f.HotKeys,{ref:E,handlers:{[j]:()=>{var e;null===(e=S.current)||void 0===e||e.focusOnContextMenuButton()}},tabIndex:0,onFocus:()=>{var e;null===(e=S.current)||void 0===e||e.mouseOver(),a(!0)},onBlur:()=>{var e;null===(e=S.current)||void 0===e||e.mouseLeave(),a(!1)},children:[(0,y.jsx)(u.default,{ref:S,active:n||!!_,contextEnabled:()=>!0,contextMenuControlled:!0,onContext:e=>{if(_)return void b(null);const t=[];t.push((0,y.jsx)(c.DropdownItem,{testid:"mi-edit-quick_reply",action:k,children:x.fbt._("Edit",null,{hk:"O1WFg"})},"mi-edit-quick_reply")),t.push((0,y.jsx)(c.DropdownItem,{testid:"mi-delete-quick-reply",action:w,children:x.fbt._("Delete",null,{hk:"1XMCRZ"})},"mi-delete-quick-reply")),b({menu:t,event:e.event,anchor:e.anchor})},theme:"quick-replies-drawer-item",primary:t.shortcut,secondary:t.message,testid:"quick-replies-drawer-item"}),D]})};var r=a(n(348926)),o=n(793021),i=a(n(352013)),l=a(n(568064)),s=n(914597),d=n(694816),u=a(n(49107)),c=n(471174),f=n(729424),p=n(950452),h=n(718644),m=a(n(624717)),g=a(n(176538)),v=a(n(452665)),x=n(548360),C=n(667294),y=n(785893)},932074:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,d.useModelValues)(e.msg,["from","t"]),n=r.Clock.relativeDateAndTimeStr(t.t),a=(0,i.getSize)(i.DetailImageSize.Small);return(0,u.jsx)(o.default,{contextEnabled:()=>!1,image:(0,u.jsx)("div",{className:(0,s.default)(c),style:{height:a,width:a},children:(0,u.jsx)(i.DefaultIcon,{id:t.from})}),primary:(0,u.jsx)(l.EmojiText,{direction:"auto",text:e.agentName,titlify:!0,ellipsify:!0}),secondary:(0,u.jsx)("span",{title:n,children:n}),className:(0,s.default)(f),theme:e.theme,idle:!0})};var r=n(40234),o=a(n(49107)),i=n(288984),l=n(965417),s=a(n(156720)),d=n(735461),u=n(785893);const c={position:"g0rxnol2"},f={cursor:"okw0zzku",boxShadow:"tio0brup"}},156790:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{title:t,icon:n,t:a}=e;const d=null!=a?r.Clock.relativeDateAndTimeStr(a):"-",u=(0,s.jsxs)("div",{className:o.default.title,"data-testid":"msg-info-title",children:[n,(0,s.jsx)(l.EmojiText,{direction:"auto",text:t,titlify:!0,ellipsify:!0})]});return(0,s.jsx)(i.default,{primary:u,secondary:d,theme:"plain",idle:!0})};var r=n(40234),o=a(n(4389)),i=a(n(744356)),l=n(965417),s=n(785893)},362326:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,d.useModelValues)(e.contact,["id","name","formattedName","notifyName"]),n=(0,u.jsx)(i.DetailImage,{id:t.id});let a;null!=e.kicTimestampMs&&(a=r.Clock.relativeDateAndTimeStr(e.kicTimestampMs/1e3));const p=(0,u.jsx)("span",{title:a,children:a});let h;!t.name&&t.notifyName&&(h=(0,u.jsx)(l.EmojiText,{className:(0,s.default)(c),direction:"auto",text:t.notifyName}));return(0,u.jsx)(o.default,{contextEnabled:()=>!1,image:n,primary:(0,u.jsx)(l.EmojiText,{direction:"auto",text:t.formattedName,titlify:!0,ellipsify:!0}),secondary:p,secondaryDetail:h,style:(0,s.default)(f),theme:e.theme,idle:!0})};var r=n(40234),o=a(n(49107)),i=n(288984),l=n(965417),s=a(n(156720)),d=n(735461),u=n(785893);const c={"::before":{content:"f76rftwh"}},f={cursor:"okw0zzku",boxShadow:"tio0brup"}},82678:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,s.useModelValues)(e.msg,["numTimesForwarded","isFrequentlyForwarded"]),{numTimesForwarded:n,isFrequentlyForwarded:a}=t;if(n<=0||a)return null;const u=(0,d.jsx)(i.default,{name:"forwarded",display:"inline",className:o.default.icon}),c=r.default.t(317,{count:n,_plural:n});return(0,d.jsxs)("div",{className:o.default.title,children:[u,(0,d.jsx)(l.TextSpan,{theme:"title",className:o.default.text,children:c})]})};var r=a(n(568064)),o=a(n(770180)),i=a(n(23217)),l=n(113923),s=n(735461),d=n(785893)},935487:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(568064)),o=n(355715),i=n(865511),l=n(402732),s=a(n(22245)),d=n(729424),u=n(747915),c=a(n(11497)),f=a(n(188406)),p=n(669951),h=n(548360),m=n(667294),g=a(n(156720)),v=a(n(616223)),x=a(n(389113)),C=n(785893);const y={height:"ttegvvei",overflowX:"gfz4du6o",overflowY:"r7fjleex",backgroundColor:"ihvf49ua"};function _(e,t){const{contacts:n,frequentContacts:a,onFocusSearch:r,onClick:i,showPersonGroupDivisionHeader:s,disabled:c}=e,g=(0,m.useRef)(null),y=(0,v.default)((()=>new f.default([],(e=>e.id.toString())))),_=()=>{y.current.setFirst(!0)};(0,m.useImperativeHandle)(t,(()=>({focusFirst:_})));const b=(e,t)=>{const n=(t?l.FREQUENT_PREFIX:"")+e.id.toString();if(e.isGroup){const a=p.ChatCollection.get(e.id);return a?{itemKey:n,data:a,type:3,frequent:t}:null}return{itemKey:n,data:e,type:2,frequent:t}},S=(0,m.useMemo)((()=>{const e=[];return null==a||a.forEach((t=>{const n=b(t,!0);n&&e.push(n)})),e}),[a]),j=(0,x.default)((e=>{if(0===e.length)return[];const t=e[0].isGroup?"group":"contact",n=[],a=e.length>10;let r="XXX";for(let o=0;o<e.length;o++){const i=e[o];if(a&&i.header){const a=i.header;if(a!==r){const i=o<e.length-1&&a!==e[o+1].header;n.push({itemKey:`header-${t}-${a}`,data:a,separator:i,type:1}),r=a}}const l=b(i);l&&n.push(l)}return n})),k=(0,m.useMemo)((()=>{const t=[],a=[],r=[];S.length&&(t.push({itemKey:"frequent-contacts-header",type:0}),t.push(...S)),n.forEach((e=>{e.isGroup?r.push(e):a.push(e)}));const o=j(a),i=j(r);if(s&&o.length>0){const e=h.fbt._("Contacts",null,{hk:"2jWpt9"});t.push({itemKey:`header-${e.toString()}`,data:e.toString(),separator:!0,type:1})}if(t.push(...o),s&&i.length>0){let n;n=!0===e.isCommunityCreation?h.fbt._("Groups you're an admin of",null,{hk:"YrVyI"}).toString():h.fbt._("Groups",null,{hk:"4bUoVs"}).toString(),t.push({itemKey:`header-${n}`,data:n,separator:!0,type:1})}return t.push(...i),t}),[n,S,j,s,e.isCommunityCreation]);return y.current.init((()=>{const e=[],t=[];return n.forEach((n=>{if(n.isGroup){const e=p.ChatCollection.get(n.id);e&&t.push(e)}else e.push(n)})),(a||[]).concat(e).concat(t)})()),(0,C.jsx)(d.HotKeys,{ref:g,handlers:{down:e=>{e.preventDefault(),e.stopPropagation(),y.current.setNext(!0)},up:e=>{e.preventDefault(),e.stopPropagation();const t=y.current;t.prev()>-1?t.setPrev(!0):(t.unset(),r(e))}},onFocus:e=>{if(e.target!==g.current)return;const t=y.current;t.index<0?_():t.reset(!0)},"data-tab":o.TAB_ORDER.CHAT_CONTACT_LIST,"data-testid":"contact-list-key",children:(0,C.jsx)(u.FlatList,{data:k,renderItem:e=>(0,C.jsx)(E,{data:e,disabled:c,active:y.current,onClick:i}),flatListController:e.flatListController,direction:"vertical"})})}var b=(0,m.forwardRef)(_);function E(e){let{data:t,disabled:n,active:a,onClick:o}=e;switch(t.type){case 0:return(0,C.jsx)(c.default,{header:r.default.t(716)},"frequent-contacts-header");case 3:const{data:e,frequent:d}=t;return!0===n?(0,C.jsx)(i.Chat,{chat:e,mode:i.Mode.INFO,noContext:!0,frequent:d,theme:"disabled"}):(0,C.jsx)(i.Chat,{active:a,chat:e,mode:i.Mode.INFO,noContext:!0,onClick:o,frequent:d});case 2:const{data:f,frequent:p}=t;return(0,C.jsx)(l.Contact,{active:a,contact:f,onClick:o,secondary:f.isBlocked()?h.fbt._("Contact is blocked",null,{hk:"284Coh"}):void 0,hideStatus:f.isMe,frequent:p,waitIdle:!0});case 1:const{data:m,separator:v}=t;return(0,C.jsxs)("div",{className:(0,g.default)(y),children:[v?(0,C.jsx)(s.default,{},`separator-${m}`):null,(0,C.jsx)(c.default,{header:m})]});default:throw new u.UnknownDataError(t)}}t.default=b},653153:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(435161)),o=a(n(568064)),i=n(402732),l=n(729424),s=a(n(188406)),d=n(667294),u=a(n(616223)),c=n(785893);function f(e,t){const{contacts:n,onFocusSearch:a,onDelete:f}=e,p=(0,u.default)((()=>new s.default(n,(e=>e.id.toString())))),h=()=>{(null==n?void 0:n.length)&&p.current.setLast(!0)},m=e=>{e.preventDefault(),e.stopPropagation();p.current.prev()>-1&&p.current.setPrev(!0)},g=e=>{e.preventDefault(),e.stopPropagation();const t=p.current.next();p.current.index===t?(p.current.unset(),null==a||a(e)):p.current.setNext(!0)},v=e=>{e.preventDefault(),e.stopPropagation();const t=p.current.getVal();if(t){const a=n.find((e=>e===t));a&&f&&f(e,a)}},x=(e,t)=>{p.current.setVal(t)};if((0,d.useEffect)((()=>{p.current.init(n,!0)}),[n,p]),(0,d.useImperativeHandle)(t,(()=>({focusLast:h}))),!n)return null;const C=n.length?(0,r.default)(n,(t=>(0,c.jsx)(i.Contact,{contact:t,active:p.current,onDelete:e.onDelete,onClick:x,type:i.Type.SMALL,theme:e.theme,waitIdle:!0},t.id.toString()))):null,y={up:m,down:g};e.onDelete&&(y[o.default.LR("left","right")]=m,y[o.default.LR("right","left")]=g,y.backspace=v);const _=(0,c.jsx)("ul",{children:C});return(0,c.jsx)(l.HotKeys,{handlers:y,children:_})}var p=(0,d.forwardRef)(f);t.default=p},757850:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{ids:t,size:n,onClick:a,showCount:s,shape:d,border:u}=e,c=t.length;if(0===c)return null;if(1===c)return(0,l.jsx)(o.DetailImage,{id:t[0],size:40,onClick:a,border:u});const f=t.slice(0,4).map(((e,t)=>(0,l.jsx)("div",{className:(0,i.default)(r.default.avatar,{[r.default.first]:0===t,[r.default.second]:1===t,[r.default.third]:2===t,[r.default.fourth]:3===t}),children:(0,l.jsx)(o.DetailImage,{id:e,size:n,shape:d})},`avatar-combo-image-${t}`))),p=(0,i.default)(r.default.container,{[r.default.square]:d===o.DetailImageShape.Square,[r.default.border]:u},{[r.default.two]:2===c,[r.default.three]:3===c,[r.default.four]:c>=4}),h=(0,o.getSize)(n),m={height:h,width:h,cursor:a?"pointer":void 0},g=s?(0,l.jsx)("div",{className:r.default.count,style:m,children:t.length}):null;return(0,l.jsxs)("div",{className:p,style:m,onClick:a,children:[f,g]})};var r=a(n(487240)),o=n(288984),i=a(n(294184)),l=n(785893)},850514:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.AvatarOverlay=function(e){return(0,o.jsxs)("div",{className:(0,r.default)([l.overlay,e.theme===i.COMMUNITY&&l.noBorderRadius]),children:[(0,o.jsx)("div",{className:(0,r.default)(l.icon),children:e.icon}),(0,o.jsx)("div",{"data-testid":"avatar-text",className:(0,r.default)(l.text),children:e.text})]},"avatar-overlay")},t.AvatarOverlayTheme=void 0;var r=a(n(156720)),o=n(785893);const i=n(76672).Mirrored(["DEFAULT","COMMUNITY"]);t.AvatarOverlayTheme=i;const l={overlay:{position:"lhggkp7q",top:"qq0sjtgm",start:"tkdu00h0",zIndex:"ercejckq",boxSizing:"cm280p3y",display:"p357zi0d",flexDirection:"f8m0rgwh",alignItems:"gndfcl4n",justifyContent:"ac2vgrno",width:"ln8gz9je",height:"ppled2lx",paddingTop:"pxvlsfnc",fontSize:"ovllcyds",lineHeight:"tkq7s68q",color:"k239c91b",textTransform:"ofejerhi",backgroundColor:"epdck8xl",borderTopStartRadius:"g9p5wyxn",borderTopEndRadius:"i0tg5vk9",borderBottomEndRadius:"aoogvgrq",borderBottomStartRadius:"o2zu3hjb"},noBorderRadius:{borderTopStartRadius:"bi2mdrpt",borderTopEndRadius:"hsk1pqkj",borderBottomEndRadius:"e3yfz9gx",borderBottomStartRadius:"a0vc5f8u"},icon:{color:"k17s6i4e"},text:{width:"gbtdc75f",marginTop:"opp68qpq",textAlign:"qfejxiq4",overflowWrap:"fd365im1"}}},808334:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(81109)),o=a(n(506479)),i=n(667294),l=a(n(156720)),s=n(785893);const d=["breakpoint","inverseToContainer","maxWidth","minWidth","xstyle"],u={boxSizing:"cm280p3y",flexShrink:"oq44ahr5",position:"g0rxnol2"};function c(e,t){let{breakpoint:n,inverseToContainer:a=!1,maxWidth:i,minWidth:c,xstyle:f}=e,p=(0,o.default)(e,d);return(0,s.jsx)("div",(0,r.default)((0,r.default)({},p),{},{className:(0,l.default)(u,f),ref:t,style:{maxWidth:i,minWidth:c,width:a?`calc((${n}px - 100%) * 9999)`:`calc((100% - ${n-.1}px) * 9999)`}}))}var f=(0,i.forwardRef)(c);t.default=f},294509:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const n=t.parentNode;if(!n)return;if(t.nextSibling)return void n.insertBefore(e,t.nextSibling);return n.appendChild(e),e}},236717:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(!t.parentNode)return;return t.parentNode.insertBefore(e,t),e}},264875:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(!e)return!1;const n=e.parentElement;if(!n)return!1;const a=t>=0?t:n.childNodes.length+t;return e===n.childNodes[a]}},269975:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e.parentNode)return;e.parentNode.removeChild(e)}},980708:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const e=window.getSelection();if(1!==e.rangeCount)return!1;const t=e.getRangeAt(0);return!!t.collapsed&&(e.removeAllRanges(),e.addRange(t),!0)}},894259:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.DIR=void 0,t.findNonEmptySibling=function(e,t){let n=e;if(!n)return;do{n=t===o.NEXT?n.nextSibling:n.previousSibling}while(n&&(0,r.default)(n));return n};var r=a(n(529958));const o={NEXT:"NEXT",PREV:"PREV"};t.DIR=o},716194:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{children:t,download:n,file:a,extension:s}=e;return(0,i.jsx)(o.default,{xstyle:l.button,onClick:()=>{null!=a&&r.FileSaver.downloadData(a,n,s)},children:t})};var r=n(21634),o=(n(211586),a(n(701784))),i=(a(n(156720)),n(785893));const l={button:{display:"f804f6gw"}}},369385:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,u.useRef)(null),n=(0,u.useRef)([]);e.refs&&e.tabConfigs.forEach(((t,n)=>(0,r.default)(e.refs,"props.refs")[n]={current:(0,r.default)(document.body,"document.body")}));return(0,f.jsx)(s.HotKeys,{role:"tablist",handlers:{right:()=>{var a,r;const o=null!==(a=t.current)&&void 0!==a?a:e.tabConfigs.length-1,i=o===e.tabConfigs.length-1?0:o+1;null===(r=n.current[i])||void 0===r||r.focus()},left:()=>{var a,r;const o=null!==(a=t.current)&&void 0!==a?a:0,i=0===o?e.tabConfigs.length-1:o-1;null===(r=n.current[i])||void 0===r||r.focus()}},children:(0,f.jsx)(i.FlexRow,{children:e.tabConfigs.map(((a,r)=>{let{svgName:i,iconStyle:s}=a;const u=e.selectedIndex===r,h=0===r,m=r===e.tabConfigs.length-1;return(0,f.jsx)(l.default,{align:"stretch",children:(0,f.jsx)("button",{role:"tab",ref:e=>n.current[r]=e,tabIndex:null==e.selectedIndex&&h||u?0:-1,"aria-selected":u,className:(0,c.default)(u&&p.selected,p.tab,h&&p.firstTab,m&&p.lastTab),onClick:()=>e.onSelect(r),onFocus:()=>t.current=r,children:(0,f.jsx)(d.default,{name:i,containerRef:e.refs?e.refs[r]:void 0,iconXstyle:[p.icon,s],className:(0,c.default)(h&&p.firstIconContainer,m&&p.lastIconContainer,!0===e.popupAtLuanch&&p.popupAnim,o.UA.isElectron&&p.electronIconsPerspective),style:{animationDuration:"0.6s",animationDelay:.5+.3*r+"s"}})})},r)}))})})};var r=a(n(145095)),o=n(26741),i=n(429623),l=a(n(748846)),s=n(729424),d=a(n(23217)),u=n(667294),c=a(n(156720)),f=n(785893);const p={selected:{backgroundColor:"f7wxzknn"},tab:{display:"p357zi0d",justifyContent:"ac2vgrno",alignItems:"gndfcl4n",width:"dq3evca1",height:"epwkujcx",boxSizing:"cm280p3y",borderTop:"lbsrbgll",borderEnd:"q49csmvs",borderBottom:"bh3h7g0c",borderStart:"tqxyxngt",borderStartWidth:"ldwklxfk",borderEndWidth:"gwvgr1ja"},firstTab:{borderTopStartRadius:"g1jn521u",borderBottomStartRadius:"bbs9k8l5",borderStartWidth:"mzoqfcbu",":focus":{borderTopStartRadius:"oyztl3ar",borderBottomStartRadius:"h6r5aqpz"}},lastTab:{borderTopEndRadius:"mrnekr2l",borderBottomEndRadius:"wu0i2wpa",borderEndWidth:"p7waza29",":focus":{borderTopEndRadius:"kq55ehwl",borderBottomEndRadius:"t2hfvjzt"}},icon:{color:"svlsagor",width:"hgg0ttet",height:"qgpfrw6h"},firstIconContainer:{marginStart:"fooq7fky"},lastIconContainer:{marginEnd:"bugiwsl0"},popupAnim:{animationName:"j6t0p44n"},electronIconsPerspective:{transform:"j8qkm4ft"}}},431469:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(435161)),o=a(n(145095)),i=a(n(145120)),l=a(n(352013)),s=n(941906),d=n(355715),u=n(278756),c=a(n(134531)),f=n(729424),p=a(n(309294)),h=a(n(188406)),m=n(111054),g=a(n(701784)),v=a(n(294184)),x=n(548360),C=n(667294),y=a(n(616223)),_=a(n(290886)),b=n(785893);function E(e,t){const{onImageClick:n,isLoadingMore:a,canLoadMore:E,onRequestMoreImages:S,onFocusPrev:j,thumbnails:k}=e,T=(0,C.useRef)(null),w=(0,y.default)((()=>new Map)),D=(0,C.useRef)(null),I=(0,y.default)((()=>new h.default(k,(e=>e.id)))),[M,P]=(0,C.useState)(null),A=(0,C.useCallback)((function(){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const t=I.current,n=t.getVal();if(n&&M!==n&&(P(n),t.index>-1)){const n=w.current.get(`${t.index}`);l.default.focus(n),e&&n&&(0,u.scrollIntoViewIfNeeded)(n,!1)}}),[w,M,I]),O=new p.default(((e,t)=>{t?w.current.set(e,t):w.current.delete(e)})),R=e=>{const t=e.target;n&&1===t.nodeType&&"IMG"===t.tagName&&n(t.src)},L=(0,C.useCallback)((()=>{if(!a&&E&&S){if(!T.current)throw new Error("Requesting more images when body not rendered");T.current.scrollTop+s.SCROLL_FUDGE>T.current.scrollHeight-T.current.clientHeight&&S()}}),[E,a,S]),N=(0,_.default)(L,100),F=()=>{I.current.unset(),P(void 0)};(0,C.useEffect)((()=>{L(),I.current.init(k,!1),A()}),[L,I,k,A]);const B=()=>{D.current&&D.current.focus()};(0,C.useImperativeHandle)(t,(()=>({focus:B,handleRequestDismiss:F})));const U=(0,r.default)(e.thumbnails,((e,t)=>{let{id:n,name:a,thumbUrl:r}=e;const o=!!M&&M.id===n,i=(0,v.default)(c.default.imageGalleryItem,{[c.default.selected]:o}),l=(0,b.jsx)("div",{className:c.default.imageGalleryItemOverlay});return(0,b.jsxs)("div",{ref:O.getRefSetter(`${t}`),className:i,tabIndex:-1,children:[l,(0,b.jsx)(g.default,{onClick:R,children:(0,b.jsx)("img",{alt:x.fbt._("Result: {name}",[x.fbt._param("name",a)],{hk:"1u9YJJ"}),className:c.default.imageGalleryItemImage,src:r})})]},n)})),H=e.isLoadingMore?(0,b.jsx)("div",{tabIndex:-1,className:c.default.imageGalleryFooter,children:(0,b.jsx)(m.Spinner,{stroke:6,size:24})}):null;return(0,b.jsx)(f.HotKeys,{className:c.default.imageGallery,"data-tab":d.TAB_ORDER.CHAT_IMAGE_GALLERY,handlers:{down:e=>{e.preventDefault(),e.stopPropagation(),I.current.set(I.current.index+3,!1,!1),A(!0,!0)},enter:()=>{const e=I.current.getVal();e||(__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("No value selected, but enter clicked")),n&&e&&n(e.thumbUrl)},left:e=>{e.preventDefault(),e.stopPropagation(),I.current.setPrev(!1),A(!0,!0)},right:e=>{e.preventDefault(),e.stopPropagation(),I.current.setNext(!1),A(!0,!0)},up:e=>{if(e.preventDefault(),e.stopPropagation(),0===I.current.index&&j)j();else{const e=Math.max(I.current.index-3,0);I.current.set(e,!1,!1),A(!0,!0)}}},onFocus:e=>{e.stopPropagation(),e.preventDefault(),(null==I.current.index||I.current.index<0)&&I.current.setFirst(!1),A(!0,!1);const t=(0,o.default)(w.current.get(`${I.current.index}`),"imagesRef.current.get(`${selectionRef.current.index}`)").getElementsByClassName(c.default.imageGalleryItemOverlay);if(1!==t.length)throw new Error(`Unexpected number of overlay elements ${t.length}`);i.default.maybeIndicateFocus(t[0],c.default.focusAnimation)},onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},ref:D,children:(0,b.jsxs)("div",{ref:T,className:c.default.imageGalleryList,onScroll:N,children:[U,(0,b.jsx)("div",{tabIndex:-1,className:c.default.imageGalleryItemSpacer}),(0,b.jsx)("div",{tabIndex:-1,className:c.default.imageGalleryItemSpacer}),(0,b.jsx)("div",{tabIndex:-1,className:c.default.imageGalleryItemSpacer}),H]})})}var S=(0,C.forwardRef)(E);t.default=S},705092:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.DragAndDropItem=void 0,t.DragAndDropWrapper=function(e){let{children:t,containerRef:n}=e;if(r.UA.isSafari&&n)return(0,u.jsx)(g,{containerRef:n,children:t});return(0,u.jsx)(p.Provider,{value:o.EMPTY_SCROLL_EVENTS,children:(0,u.jsx)(l.DndProvider,{backend:s.HTML5Backend,children:t})})};var r=n(26741),o=n(278793),i=n(667294),l=n(555480),s=n(245418),d=a(n(156720)),u=n(785893);const c={draggableDiv:{cursor:"n25td99q"},dragging:{opacity:"axi1ht8l"}},f="item",p=(0,i.createContext)(o.EMPTY_SCROLL_EVENTS);function h(e){let{index:t,children:n,onMove:a,onFinalDrop:r}=e;const o=(0,i.useRef)(null),{addDragScroll:s,removeDragScroll:h}=(0,i.useContext)(p),[{handlerId:m},g]=(0,l.useDrop)({accept:f,collect:e=>({handlerId:e.getHandlerId()}),hover(e,n){var r;if(!o.current)return;const i=e.index,l=t;if(i===l)return;const s=null===(r=o.current)||void 0===r?void 0:r.getBoundingClientRect(),d=(s.bottom-s.top)/2,u=n.getClientOffset().y-s.top;i<l&&u<d||i>l&&u>d||(a(i,l),e.index=l)}}),[{isDragging:v},x]=(0,l.useDrag)({type:f,item:()=>(null==s||s(),{index:t}),end:()=>{null==h||h(),null==r||r()},collect:e=>({handlerId:e.getHandlerId(),isDragging:e.isDragging()})});return(0,u.jsx)("div",{ref:x(g(o)),className:(0,d.default)(c.draggableDiv,v&&c.dragging),"data-handler-id":m,children:n})}const m=(0,i.memo)(h);function g(e){let{children:t,containerRef:n}=e;const a=(0,o.useDragAndAutoScrollForSafari)(n);return(0,u.jsx)(p.Provider,{value:a,children:(0,u.jsx)(l.DndProvider,{backend:s.HTML5Backend,children:t})})}t.DragAndDropItem=m},278793:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.EMPTY_SCROLL_EVENTS=void 0,t.useDragAndAutoScrollForSafari=function(e){const t=(0,o.useMemo)((()=>function(e){const{bottom:t,top:n}=e.getBoundingClientRect();let a,o=0,i=!1;const l=()=>{var t;(o-=6,e.scrollTop=o,!i||o<=0)&&(null===(t=a)||void 0===t||t())},s=()=>{var t;(o+=6,e.scrollTop=o,!i||o>e.scrollHeight)&&(null===(t=a)||void 0===t||t())};return{handleDragOver:d=>{const u=o>=0&&d.clientY>n&&d.clientY<n+50,c=o<=e.scrollHeight&&d.clientY>t-50&&d.clientY<=t;i||!u&&!c?u||c||(i=!1):(i=!0,o=e.scrollTop,a=(0,r.default)(u?l:s))},forceStop:()=>{var e;i=!1,null===(e=a)||void 0===e||e()}}}(e)),[e]),n=(0,l.default)(t.handleDragOver,150),a=(0,i.default)((()=>{e.addEventListener("dragover",n)})),s=(0,i.default)((()=>{e.removeEventListener("dragover",n),n.cancel(),t.forceStop()}));return(0,o.useEffect)((()=>s),[s]),{removeDragScroll:s,addDragScroll:a}};var r=a(n(573540)),o=n(667294),i=a(n(389113)),l=a(n(290886));t.EMPTY_SCROLL_EVENTS={addDragScroll:null,removeDragScroll:null}},460195:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(614330),r=n(667294);const o=(e,t)=>{const[n,o]=(0,a.useLottie)(e);return(0,r.useImperativeHandle)(t,(()=>o)),n};var i=(0,r.forwardRef)(o);t.default=i},614330:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.Renderer=void 0,t.useLottie=function(e){let{autoplay:t=!1,data:n,direction:a=1,fallback:u=null,loop:c=!1,path:f,placeholder:p=null,renderer:h=d.SVG,speed:m=1,xstyle:g}=e;(0,r.default)(null==n&&null!=f||null!=n&&null==f,"These opts are mutually exclusive");const v=(0,i.useRef)(),x=(0,i.useRef)(),[C,y]=(0,i.useState)(!0),[_,b]=(0,i.useState)(!1),E=(0,i.useCallback)((()=>{var e;null===(e=v.current)||void 0===e||e.play()}),[]),S=(0,i.useCallback)((()=>{var e;null===(e=v.current)||void 0===e||e.stop()}),[]),j=(0,i.useCallback)((()=>{var e;null===(e=v.current)||void 0===e||e.pause()}),[]),k=(0,i.useCallback)(((e,t)=>{var n;null===(n=v.current)||void 0===n||n.goToAndPlay(e,t)}),[]),T=(0,i.useCallback)(((e,t)=>{var n;null===(n=v.current)||void 0===n||n.goToAndStop(e,t)}),[]),w=(0,i.useCallback)((e=>{var t;null===(t=v.current)||void 0===t||t.getDuration(e)}),[]);(0,i.useEffect)((()=>{const e=o.default.loadAnimation({container:x.current,animationData:n,path:f,renderer:h,loop:c,autoplay:t});v.current=e;const a=[{name:"data_ready",handler:()=>y(!1)},{name:"data_failed",handler:()=>b(!0)}].map((t=>(e.addEventListener(t.name,t.handler),()=>e.removeEventListener(t.name,t.handler))));return()=>{a.forEach((e=>e())),e.destroy()}}),[n,f,h,c,t]),(0,i.useEffect)((()=>{var e;null===(e=v.current)||void 0===e||e.setSpeed(m)}),[m]),(0,i.useEffect)((()=>{var e;null===(e=v.current)||void 0===e||e.setDirection(a)}),[a]);return[(0,s.jsxs)("div",{className:(0,l.default)(g),ref:x,children:[C&&!_?p:null,_?u:null]}),{play:E,stop:S,pause:j,goToAndPlay:k,goToAndStop:T,getDuration:w}]};var r=a(n(441143)),o=a(n(211248)),i=n(667294),l=a(n(156720)),s=n(785893);const d=n(76672)({SVG:"svg",Canvas:"canvas"});t.Renderer=d},784518:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(164331),o=a(n(568064)),i=n(914597),l=n(128298),s=a(n(540436)),d=n(160811),u=n(729424),c=a(n(643698)),f=n(930424),p=n(18609),h=n(216477),m=a(n(23217)),g=n(718644),v=a(n(624717)),x=a(n(452665)),C=n(548360),y=n(667294),_=a(n(156720)),b=n(785893);const E=()=>{i.ModalManager.open((0,b.jsx)(x.default,{title:C.fbt._("Text Too Long",null,{hk:"47kLbx"}),onOK:()=>{i.ModalManager.close()},okText:C.fbt._("OK",null,{hk:"2KEeHb"}),children:C.fbt._("The text you’re pasting is too long. Try shortening it or sending it as a separate message.",null,{hk:"22uGmM"})}))},S={wrapper:{display:"p357zi0d",alignItems:"r15c9g6i",borderBottom:"tf4adjai"},activeWrapper:{borderBottom:"ggdspdaz"},inputControls:{position:"g0rxnol2",flexGrow:"tvf2evcx",flexShrink:"oq44ahr5",flexBasis:"rjo8vgbg",marginTop:"b9l0eqez"},buttonContainer:{position:"g0rxnol2",display:"l7jjieqr",float:"ivui8b66",width:"r0at9tra"},suggestionsPositioner:{position:"lhggkp7q",bottom:"c5zpj14d",start:"dkaqw61n",width:"ln8gz9je",height:"smvc51u0",overflowX:"gfz4du6o",overflowY:"r7fjleex",pointerEvents:"m62443ks"},spacer:{position:"g0rxnol2",height:"bmot90v7"},noPlaceholderSpacer:{position:"g0rxnol2",height:"bbl9m3t3"},textInput:{position:"g0rxnol2",flexGrow:"ggj6brxn",wordWrap:"b6f1x6w7"},charCounter:{position:"lhggkp7q",top:"jgz0asyo",width:"cxkis295",fontSize:"bze30y65",lineHeight:"iv396pab",color:"t3rh7lfs",textAlign:"e65innqk"},charCounterWithClearBtn:{top:"qq0sjtgm",end:"rezueyon"},labelText:{position:"lhggkp7q",width:"ln8gz9je",fontSize:"enbbiyaj",lineHeight:"q6wg26sa",color:"hp667wtd",transitionDuration:"p4t1lx4y",transform:"e79a4tva"},labelTextFloat:{fontSize:"dsh4tgtl",lineHeight:"jgi8eev7",transform:"qdd0en2n"},inputEmoji:{position:"lhggkp7q",top:"jgz0asyo",end:"ebjesfe0",color:"cs9t9or5"},clearInput:{position:"lhggkp7q",top:"mvf5n2qr",end:"ia5k4ep2",color:"s4k44ver"},suggestionsContainer:{position:"lhggkp7q",end:"citmgm7b",bottom:"jxacihee",start:"cheugonp"}};function j(e,t){const{value:n,focusOnMount:a,onBlur:i,onFocus:x,maxLength:j=25,onMaxPasteExceeded:k=E}=e,T=(0,y.useRef)(null),w=(0,y.useRef)(null),D=(0,y.useRef)(null),[I,M]=(0,y.useState)(!1),[P,A]=(0,y.useState)(null),O=(0,r.numCodepoints)(e.value||""),R=()=>{var e;null===(e=T.current)||void 0===e||e.focus()};(0,y.useEffect)((()=>{!0===a&&R()}),[]);const L=()=>{A(null)},N=e=>{const t=T.current;t&&(t.focus(!1),t.replaceSelection(e)),L()},F=()=>{var e;null===(e=D.current)||void 0===e||e.restoreFocus()},B=e=>{M(!1),i&&i(e)},U=e=>{e.stopPropagation(),M(!0),x&&x(e)};(0,y.useImperativeHandle)(t,(()=>({handleBlur:B,handleFocus:U,refInput:T.current})));const H=e.supportsEmoji?(0,b.jsx)("button",{className:(0,_.default)(S.inputEmoji),onClick:e=>{e&&(e.preventDefault(),e.stopPropagation());const t=(0,b.jsx)(f.EmojiPanel,{ref:D,onEmoji:N,onFocusNext:R,onFocusPrev:R});A({menu:t,dirY:d.DirY.TOP,type:d.MenuType.EmojiPicker,anchor:e.target}),R()},children:(0,b.jsx)(m.default,{"aria-label":C.fbt._("Open emojis panel",null,{hk:"3IEMY6"}),name:"emoji-input"})}):void 0;let G=null;G=null!=n&&""!==n?(0,b.jsx)("button",{className:(0,_.default)(S.clearInput),onClick:()=>{var e;null===(e=T.current)||void 0===e||e.reset()},children:(0,b.jsx)(m.default,{name:"x-alt"})}):null;const z=!0===e.showRemaining?(0,b.jsx)("div",{className:(0,_.default)(S.buttonContainer,l.uiMargin.horiz4,l.uiPadding.bottom20,S.charCounter,l.uiPadding.bottom0,null!=G&&S.charCounterWithClearBtn),children:(0,b.jsx)("div",{className:(0,_.default)(S.charCounter,l.uiPadding.bottom0),children:j-O<50?o.default.n(j-O):null})}):null;let q;P&&(q=(0,b.jsx)(g.UIE,{displayName:"EmojiPicker",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:L,requestFocus:F,children:(0,b.jsx)(v.default,{contextMenu:P})}));const W=(0,_.default)(S.textInput),V=(0,_.default)(S.labelText,l.uiPadding.top8,null!=e.value&&""!==e.value&&S.labelTextFloat);return(0,b.jsxs)(u.HotKeys,{className:W,onFocus:R,children:[(0,b.jsx)("span",{className:V,children:e.placeholder}),(0,b.jsx)("div",{className:(0,_.default)(""===e.placeholder?S.noPlaceholderSpacer:S.spacer)}),(0,b.jsx)("div",{className:(0,_.default)(!o.default.isRTL()&&[S.suggestionsPositioner,l.uiPadding.horiz10]),children:(0,b.jsxs)("div",{className:(0,_.default)(!o.default.isRTL()&&S.suggestionsContainer),children:[(0,b.jsx)(c.default.MentionSuggestions,{chat:e.chat,theme:h.ThemeOptions.MEDIA_CAPTION}),(0,b.jsx)(c.default.EmojiSuggestions,{chat:e.chat,theme:p.ThemeOptions.MEDIA_CAPTION})]})}),(0,b.jsxs)("div",{className:(0,_.default)(S.wrapper,S.activeWrapper,I&&l.uiPadding.bottom0),children:[(0,b.jsx)(c.default,{ref:T,initialValue:e.value,initialSelection:w.current,readOnly:!1,spellCheck:e.spellCheck,multiline:e.multiline,maxLength:e.maxLength,onEnter:e.onEnter,onMaxPasteExceeded:k,onFiles:e.onFiles,onChange:e.onChange,onSelect:e=>{w.current=e},theme:"media-caption"}),(0,b.jsxs)("div",{className:(0,_.default)(S.inputControls),children:[(0,b.jsxs)(s.default,{transitionName:"pop",component:"div",className:(0,_.default)(S.buttonContainer,l.uiMargin.horiz4,l.uiPadding.bottom20),children:[G,H]}),z]})]}),q]})}var k=(0,y.forwardRef)(j);t.default=k},201697:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(478123),o=a(n(591050)),i=n(667294),l=a(n(156720)),s=n(735461),d=n(785893);const u={maxHeight:"gixhl6f9",overflowX:"gfz4du6o",overflowY:"ag5g9lrv"},c={position:"g0rxnol2",paddingTop:"nlnf8xo7",paddingEnd:"h1a80dm5",paddingBottom:"r219jyu0",paddingStart:"hxjsrjta",backgroundColor:"gmjkez2w",transitionProperty:"ariinwu3",transitionDuration:"p4t1lx4y",transitionTimingFunction:"pu4k07i0"};function f(e,t){const n=(0,i.useRef)(null),a=(0,s.useModelValues)(e.chatPreference,["wallpaperColor","showDoodle"]);(0,i.useImperativeHandle)(t,(()=>({getContainer:()=>n.current})));const{wallpaperColor:f,showDoodle:p}=a;let h={};return f!==r.DEFAULT_CHAT_WALLPAPER&&(h={backgroundColor:f}),(0,d.jsx)("div",{className:(0,l.default)(u),ref:n,children:(0,d.jsxs)("div",{className:(0,l.default)(c),style:h,children:[(0,d.jsx)(o.default,{wallpaperColor:f,showDoodle:p}),e.children]})})}var p=(0,i.forwardRef)(f);t.default=p},82541:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{startImage:t="",type:n,attachToChat:a,id:z,pending:Y=!1,readOnly:K=!1,onImageSet:X,size:Q,testid:J,theme:$,dimmed:Z=!1,sendGroupProfilePictureLoggingEvent:ee}=e;const[te,ne]=(0,B.useState)(null!=t?t:""),[ae,re]=(0,B.useState)(!1),[oe,ie]=(0,B.useState)(null),[le,se]=(0,B.useState)(),de=(0,H.default)(),ue=(0,B.useRef)(null),ce=(0,B.useRef)(null);(null!=t?t:"")!==te&&(ne(null!=t?t:""),ie(""===t?null:oe));const fe=!Y&&(null!=oe||""===te&&!K),pe=e=>{n===y.default.GROUP&&(null==ee||ee(e,!!t))},he=e=>{n===y.default.GROUP&&null!=ee&&ee(f.default.GROUP_PROFILE_ACTION_TYPE.PROFILE_PIC_UPDATED,!!t,e)},me=e=>{n===y.default.GROUP&&null!=ee&&ee(f.default.GROUP_PROFILE_ACTION_TYPE[`${String(e)}_PANEL_OPEN`],!!t)},ge=()=>{pe(f.default.GROUP_PROFILE_ACTION_TYPE.TAP_ACTION_ITEM_UPLOAD_PHOTO);const e=ce.current;if(e)return e.click(),!0},ve=()=>{se(null)},xe=e=>{const t=e.currentTarget.clientWidth,n=e.currentTarget.clientHeight;ie({width:t,height:n})},Ce=()=>{re(!1)},ye=()=>{re(!0)},_e=(e,t)=>{if(!e)return ne(""),void ie(null);T.loadImage(e).then((()=>{ne(e),X(e,t)})).catch((e=>{let t;switch(__LOG__(3)`PhotoPicker:onImageReceived failed to load image: ${String(e)}`,n){case y.default.GROUP:t=F.fbt._("Couldn't set group icon.",null,{hk:"1Yy6JI"});break;case y.default.COMMUNITY:t=F.fbt._("Couldn't set community icon.",null,{hk:"4bEr1Y"});break;case y.default.PROFILE:t=F.fbt._("Couldn't set profile photo.",null,{hk:"28vVyZ"});break;case y.default.DEFAULT_ANNOUNCEMENT_GROUP:case y.default.COVER_PHOTO:}s.ModalManager.open((0,G.jsx)(D.default,{onOK:()=>s.ModalManager.close(),children:t}))}))},be=e=>{const t=URL.createObjectURL(e);T.loadImage(t).then((t=>{if(t&&(t.width<M.PROF_PIC_MIN_SIDE||t.height<M.PROF_PIC_MIN_SIDE))s.ModalManager.open((0,G.jsx)(D.default,{onOK:()=>s.ModalManager.close(),children:F.fbt._({"*":"This photo is too small. Please select a photo with height and width of at least {number_of_pixels} pixels.",_1:"This photo is too small. Please select a photo with height and width of at least 1 pixel."},[F.fbt._plural(M.PROF_PIC_MIN_SIDE,"number_of_pixels")],{hk:"yLtJE"})}));else{const t=n===y.default.COVER_PHOTO?O.ModalTheme.BoxLarge:O.ModalTheme.Box;let a;a=n===y.default.COVER_PHOTO?P.CropShapeType.RECT:n===y.default.COMMUNITY?P.CropShapeType.SQUIRCLE:P.CropShapeType.CIRCLE,s.ModalManager.open((0,G.jsx)(A.default,{img:e,onFinished:(e,t)=>{he(f.default.PROFILE_PICTURE_TYPE.PHOTO_UPLOAD),_e(e,t)},onRetake:ge,cropShape:a,theme:t}))}})).catch((()=>{let e;switch(n){case y.default.GROUP:e=F.fbt._("Couldn't set group icon.",null,{hk:"1Yy6JI"});break;case y.default.COMMUNITY:e=F.fbt._("Couldn't set community icon.",null,{hk:"4bEr1Y"});break;case y.default.PROFILE:e=F.fbt._("Couldn't set profile photo.",null,{hk:"28vVyZ"});break;case y.default.DEFAULT_ANNOUNCEMENT_GROUP:case y.default.COVER_PHOTO:}s.ModalManager.open((0,G.jsx)(D.default,{onOK:()=>s.ModalManager.close(),children:e}))})).finally((()=>{URL.revokeObjectURL(t)}))},Ee=()=>{pe(f.default.GROUP_PROFILE_ACTION_TYPE.TAP_ACTION_ITEM_WEB_SEARCH),s.ModalManager.open((0,G.jsx)(O.Modal,{type:O.ModalTheme.Box,children:(0,G.jsx)(w.default,{onFinished:(e,t)=>{he(f.default.PROFILE_PICTURE_TYPE.WEB_SEARCH),_e(e,t)}})}))},Se=()=>{pe(f.default.GROUP_PROFILE_ACTION_TYPE.TAP_ACTION_ITEM_VIEW_PHOTO);const e=ue.current;if(!e||!z)return;const t=L.ContactCollection.assertGet(z),r={transition:"profile-viewer"};a&&(r.uim=de),s.ModalManager.openMedia((0,G.jsx)(R.default,{contact:t,profilePicThumb:t.getProfilePicThumb(),animateBorderRadius:n!==y.default.COMMUNITY,getZoomNode:t=>{t(e)}}),r)},je=()=>{X(),s.ModalManager.close(),he(f.default.PROFILE_PICTURE_TYPE.REMOVE_PHOTO)},ke=()=>{let e;switch(pe(f.default.GROUP_PROFILE_ACTION_TYPE.TAP_ACTION_ITEM_REMOVE_PHOTO),n){case y.default.GROUP:e=F.fbt._("Remove this group's icon?",null,{hk:"3upRnn"});break;case y.default.COMMUNITY:e=F.fbt._("Remove this community's icon?",null,{hk:"3ejOXd"});break;case y.default.PROFILE:e=F.fbt._("Remove your profile photo?",null,{hk:"zHH3L"});break;case y.default.DEFAULT_ANNOUNCEMENT_GROUP:break;case y.default.COVER_PHOTO:e=F.fbt._("Remove your cover photo?",null,{hk:"1XkdPH"})}s.ModalManager.open((0,G.jsx)(D.default,{onOK:je,okText:F.fbt._("Remove",null,{hk:"4uz2xw"}),onCancel:()=>s.ModalManager.close(),cancelText:F.fbt._("Cancel",null,{hk:"H0gNq"}),children:e}))},Te=()=>{pe(f.default.GROUP_PROFILE_ACTION_TYPE.TAP_ACTION_ITEM_EMOJI_STICKER),s.ModalManager.open((0,G.jsx)(O.Modal,{type:O.ModalTheme.Box,children:(0,G.jsx)(I.EditGroupProfileDrawer,{onCancel:()=>s.ModalManager.close(),onFinished:(e,t,n)=>{he(f.default.PROFILE_PICTURE_TYPE[String(n)]),_e(e,t),s.ModalManager.close()},sendEmojiStickerPanelOpenLoggingEvent:me})}))},we=()=>{const e=[];if(null!=z&&""!==te&&e.push((0,G.jsx)(g.DropdownItem,{testid:"mi-view-photo",action:Se,children:F.fbt._("View Photo",null,{hk:"zwVoK"})},"view")),d.default){const t=n===y.default.COVER_PHOTO?P.CropShapeType.RECT:P.CropShapeType.CIRCLE,a=n===y.default.COVER_PHOTO?O.ModalTheme.BoxLarge:O.ModalTheme.Box;e.push((0,G.jsx)(S.default,{onImageTake:(e,t)=>{he(f.default.PROFILE_PICTURE_TYPE.PHOTO_CAMERA),_e(e,t)},editCropShape:t,modalTheme:a,action:()=>{pe(f.default.GROUP_PROFILE_ACTION_TYPE.TAP_ACTION_ITEM_TAKE_PHOTO)}},"take"))}return e.push((0,G.jsx)(g.DropdownItem,{testid:"mi-upload-photo",action:ge,children:F.fbt._("Upload Photo",null,{hk:"40ixzs"})},"upload")),!(0,l.groupProfileEditorEnabled)()||n!==y.default.GROUP&&n!==y.default.COMMUNITY||e.push((0,G.jsx)(g.DropdownItem,{testid:"mi-edit-group-profile-picture",action:Te,children:F.fbt._("Emoji & sticker",null,{hk:"255zwo"})},"edit")),u.UA.isElectron&&(n!==y.default.GROUP&&n!==y.default.COMMUNITY||e.push((0,G.jsx)(g.DropdownItem,{testid:"mi-search-photo",action:Ee,children:F.fbt._("Web Search",null,{hk:"3otQk8"})},"search"))),""!==te&&e.push((0,G.jsx)(g.DropdownItem,{testid:"mi-remove-photo",action:ke,children:F.fbt._("Remove Photo",null,{hk:"4ujmK7"})},"remove")),e},De=()=>{const e=we();se({menu:e,anchor:ue.current})};let Ie,Me;""!==te&&(Ie=(0,G.jsx)(C.default,{type:"cover",size:oe,children:(0,G.jsx)(v.default,{src:te,crossOrigin:!1,style:{height:"100%",width:"100%"},onLoad:xe})}));(Y||""!==te&&!oe)&&(Me=n===y.default.COVER_PHOTO?(0,G.jsx)("div",{className:(0,U.default)(W),children:(0,G.jsx)("div",{className:(0,U.default)(q),children:(0,G.jsx)(b.Spinner,{size:24,stroke:3,color:"solidwhite"})})}):(0,G.jsx)(h.default,{}));let Pe,Ae,Oe=null;if(!Y&&!K&&(""===te||oe)&&(""===te||le||ae)){let e="";switch(n){case y.default.GROUP:e=""!==te?F.fbt._("Change group icon",null,{hk:"DhTFI"}):F.fbt._("Add group icon",null,{hk:"eTjnN"});break;case y.default.COMMUNITY:e=""!==te?F.fbt._("Change community icon",null,{hk:"pg4UZ"}):F.fbt._("Add community icon",null,{hk:"3djWDS"});break;case y.default.PROFILE:e=""!==te?F.fbt._("Change profile photo",null,{hk:"1TRs18"}):F.fbt._("Add profile photo",null,{hk:"4zeUKC"});break;case y.default.DEFAULT_ANNOUNCEMENT_GROUP:case y.default.COVER_PHOTO:}n!==y.default.COVER_PHOTO&&(Oe=(0,G.jsx)(p.AvatarOverlay,{icon:(0,G.jsx)(E.default,{name:"camera"}),text:e,theme:n===y.default.COMMUNITY?p.AvatarOverlayTheme.COMMUNITY:p.AvatarOverlayTheme.DEFAULT}))}le&&(Pe=(0,G.jsx)(j.UIE,{displayName:"PhotoPickerContextMenu",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:ve,children:(0,G.jsx)(k.default,{contextMenu:le})}));if(Y||""===te||!oe){let e;switch(n){case y.default.PROFILE:e="default-user";break;case y.default.COMMUNITY:e="community-squircle";break;case y.default.DEFAULT_ANNOUNCEMENT_GROUP:e="announcement-speaker";break;case y.default.COVER_PHOTO:e=null;break;default:e="default-group"}null!=e&&(Ae=(0,G.jsx)("div",{className:(0,N.default)(_.default.defaultIcon,{[_.default.defaultAnnouncementGroupIcon]:n===y.default.DEFAULT_ANNOUNCEMENT_GROUP}),children:(0,G.jsx)(E.default,{name:e})}))}return(0,G.jsxs)(x.HotKeys,{className:(0,N.default)(_.default.container,{[_.default.coverPhoto]:"coverPhoto"===$}),style:null!=Q?{width:Q,height:Q}:void 0,handlers:{space:De,enter:De},children:[(0,G.jsxs)("div",{className:(0,N.default)(_.default.body,{[_.default.squircleBackground]:n===y.default.COMMUNITY,[_.default.clickable]:fe}),onClick:e=>{if(!fe)return;if(K)return void(""!==te&&Se());e.stopPropagation(),e.preventDefault();const a=we();se({menu:a,event:e}),n===y.default.GROUP&&null!=ee&&ee(f.default.GROUP_PROFILE_ACTION_TYPE.CHANGE_PROFILE_PHOTO,!!t)},onMouseOver:()=>{re(!0)},onMouseEnter:ye,onMouseLeave:Ce,onPaste:e=>{if(!le)return;const t=new m.default(e.clipboardData),n=(0,r.default)(t.getFiles(),(e=>"image"===(0,o.typeFromMimetype)(e.type)));if(!n.length)return;e.preventDefault(),e.stopPropagation(),ve();const a=n[0];be(a)},onFocus:ye,onBlur:Ce,ref:ue,title:F.fbt._("Photo Picker",null,{hk:"3TURye"}),dir:"ltr",tabIndex:fe?0:-1,role:fe?"button":"none","data-testid":J,children:[(0,G.jsxs)("div",{className:(0,N.default)(_.default.imageContainer,{[(0,U.default)(V)]:Z}),children:[Ie,Ae]}),(0,G.jsxs)(c.default,{transitionName:"fade",children:[Me,Oe]})]}),(0,G.jsx)("input",{ref:ce,type:"file",accept:"image/gif,image/jpeg,image/jpg,image/png",style:{display:"none"},onChange:e=>{ve();const t=e.target.files[0];if(!t)return!1;be(t),e.target.value="",ue.current&&i.default.focus(ue.current)}}),Pe]})};var r=a(n(763105)),o=n(565885),i=a(n(352013)),l=n(408139),s=n(914597),d=a(n(544254)),u=n(26741),c=a(n(540436)),f=a(n(471410)),p=n(850514),h=a(n(746918)),m=a(n(692726)),g=n(471174),v=a(n(247065)),x=n(729424),C=a(n(311791)),y=a(n(243556)),_=a(n(140134)),b=n(111054),E=a(n(23217)),S=a(n(481499)),j=n(718644),k=a(n(624717)),T=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=z(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(n(216737)),w=a(n(589936)),D=a(n(452665)),I=n(601161),M=n(558),P=n(329958),A=a(n(340241)),O=n(857224),R=a(n(871528)),L=n(719380),N=a(n(294184)),F=n(548360),B=n(667294),U=a(n(156720)),H=a(n(895402)),G=n(785893);function z(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(z=function(e){return e?n:t})(e)}const q={position:"lhggkp7q",start:"qo25nl7o",top:"bqmxb3s7",zIndex:"lqxtw3mz",pointerEvents:"m62443ks"},W={position:"lhggkp7q",top:"qq0sjtgm",start:"tkdu00h0",end:"ebjesfe0",bottom:"jxacihee",backgroundColor:"s9lgn3x7",zIndex:"jnl3jror"},V={opacity:"kaq19mkm"}},381472:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return!e.getModifierState("Shift")&&!e.getModifierState("Alt")&&!e.getModifierState("Control")}},742107:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e instanceof HTMLElement&&Boolean(e.dataset.mentionJid)}},643698:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(968662)),o=n(672761),i=a(n(601769)),l=n(652835),s=n(18609),d=a(n(70527)),u=n(216477),c=a(n(408103));const f=new d.default,p=new i.default;class h extends((0,o.PluggableInput)([l.EmojiPlugin,p,f,c.default])){}t.default=h,h.MentionSuggestions=(0,r.default)(u.Suggestions,{plugin:f}),h.EmojiSuggestions=(0,r.default)(s.EmojiSuggestions,{plugin:p})},499574:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(0,a(n(566919)).default)({SEARCH:void 0,INACTIVE:void 0,ENTER:void 0,TAB:void 0,DOWN:void 0,UP:void 0});t.default=r},70527:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(293131),o=a(n(52047)),i=n(227101),l=a(n(364369)),s=n(795720),d=n(26741),u=n(745454),c=a(n(499574)),f=n(552596),p=a(n(556695)),h=a(n(294509)),m=a(n(236717)),g=a(n(264875)),v=a(n(848442)),x=a(n(269975)),C=a(n(980708)),y=n(894259),_=n(162101),b=n(972473),E=a(n(381472)),S=a(n(742107)),j=a(n(137773)),k=a(n(600264)),T=a(n(807057)),w=n(767247),D=n(669951),I=n(719380);const M=2*l.default.MAX_PUSHNAME_LENGTH,P=/\u200B((\d+)@c\.us)\u200B/g,A={Enter:c.default.ENTER,Tab:c.default.TAB,ArrowUp:c.default.UP,ArrowDown:c.default.DOWN};class O extends _.BasePlugin{constructor(){super(...arguments),this.serializers=[["span[data-mention-jid]",e=>(function(e){if(!e.hasChildNodes())return;for(;e.childNodes.length;)e.removeChild(e.childNodes[0])}(e),`​${e.getAttribute("data-mention-jid")||""}​`)]],this.parsers=[e=>e.replace(P,((e,t)=>{var n;const a=I.ContactCollection.get(t);if(!a)return t;let o=!a.isMyContact&&a.notifyName?a.notifyName:a.formattedName;const l=`@${o}`,d=D.ChatCollection.getActive();if(null==d||!d.isGroup||(null==d||null===(n=d.groupMetadata)||void 0===n?void 0:n.groupType)===s.GroupType.DEFAULT_ANNOUNCEMENT_GROUP)return l;if(!(null!=d.groupMetadata&&d.groupMetadata.participants.get(t)))return l;(0,i.isDropLastNameEnabled)()&&d.groupMetadata&&d.groupMetadata.hasUniqueShortNameMention(a)&&(o=a.shortName);const u=(0,f.createSelectableElement)("span");u.dataset.mentionJid=a.id.toString();const c=document.createElement("span");c.className="at-symbol",c.appendChild(document.createTextNode("@"));const p=document.createElement("span");return p.setAttribute("dir",(0,r.dir)(o)||"auto"),p.appendChild(document.createTextNode(o)),u.appendChild(c),u.appendChild(p),u.dataset.originalName=u.textContent||"",u.dataset.plainText=u.textContent||"",u.dataset.appTextTemplate=`​${t}​`,u.outerHTML}))],this.serialize=(e,t)=>{t.mentionedJidList=[];return[e.replace(P,((e,n,a)=>(t.mentionedJidList.push((0,u.createWid)(n)),`@${a}`))),t]},this.handleSelect=e=>{let t=window.getSelection();if(function(e,t){let{anchorNode:n,anchorOffset:a}=t;n&&n===e.containerRef&&(n=n.childNodes[a],a=n.textContent.length);if(!n||n&&n.nodeType!==Node.TEXT_NODE)return!1;let r=n.textContent.slice(a),o=n;for(;0===r.length;){if(o=o.nextSibling,!o||o.nodeType!==Node.TEXT_NODE)return!1;r=o.textContent}return" "===r.charAt(0)}(this.ctx,t)&&t.modify("move","forward","character"),!U(this.ctx,t,!0))return;t=window.getSelection();const{refInput:n}=this.ctx,{mentionAfterEnd:a}=n?R(n):{};a&&B(a),this.ctx.replaceSelection(`​${e.id.toString()}​ `),this.handle(c.default.INACTIVE)},this.hooks={[T.default.CHANGE](e,t){let{refInput:n}=t;if(d.UA.isGecko)if(""===e){for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createElement("br"))}else{const e=n.querySelectorAll("[data-mention-jid]");for(let t=0;t<e.length;++t){const{nextSibling:n}=e[t];n&&(n instanceof Element&&"BR"===n.tagName&&"_moz"===n.getAttribute("type")&&n.remove())}}},[T.default.INPUT](e){let{refInput:t}=e;const n=t.querySelectorAll("[data-mention-jid]");if(n.length)for(let e=0;e<n.length;++e){var a,r;const t=n[e];if(null==t||t.textContent===t.getAttribute("data-original-name"))continue;const o=t.querySelector(".at-symbol"),i=t.querySelector("span [dir]"),l=window.getSelection();let s=l.focusOffset;const d=null===(a=l.focusNode)||void 0===a||null===(r=a.parentNode)||void 0===r?void 0:r.className,u=t.parentNode,c=document.createDocumentFragment();o&&c.appendChild(document.createTextNode(o.textContent)),i&&c.appendChild(document.createTextNode(i.textContent));const f="at-symbol"===d?c.firstChild:c.lastChild;if(1===c.childNodes.length&&c.lastChild&&(s="@"===c.lastChild.textContent?1:0),u.replaceChild(c,t),l.rangeCount<=0)return;const p=l.getRangeAt(0);p.setEnd(f,s),p.collapse(!1),l.removeAllRanges(),l.addRange(p)}}},this.handlers={onKeyDown(e,t){const{key:n}=e;if(!this.ctx.isComposing()&&("Backspace"===n||"Delete"===n&&(0,E.default)(e))){const e=window.getSelection();if(e.isCollapsed){const{mentionBeforeStart:t,mentionAfterEnd:a}=R(this.ctx.refInput);let r=null;if("Delete"===n&&a&&(r=a),"Backspace"===n&&t&&(r=t),r){e.removeAllRanges();const t=document.createRange();t.selectNode(r),e.addRange(t),L(this.ctx.refInput),window.setTimeout((()=>{(0,C.default)()}),0)}}else L(this.ctx.refInput)}const a=A[e.key];return!!a&&this.handle(a,[e,t])},onKeyPress(){return this.ctx.isComposing()||L(this.ctx.refInput),!1},onBlur(){return this.handle(c.default.INACTIVE),!1},onSelect(e,t){var n;if(d.UA.isTrident||this.ctx.isComposing())return!1;const a=window.getSelection();a.isCollapsed&&a.rangeCount>0&&a.anchorNode&&function(e,t){let{anchorNode:n,anchorOffset:a}=t;if(n&&n===e.refInput){if(0===a)return!0;n=n.childNodes[t.getRangeAt(0).startOffset],a=(0,v.default)(n)?n.textContent.length:0}if((0,p.default)(n,"br"))return!0;if(!n)return!1;if(!(0,v.default)(n))return!1;if("\n"===n.textContent)return!0;let r=n.textContent.slice(0,a);if(""===r){const e=(0,y.findNonEmptySibling)(n,y.DIR.PREV);if(!e)return!0;if(!(0,v.default)(e))return!1;r=e.textContent}return"\n"===r.charAt(r.length-1)}(t,a)&&(0,C.default)();const r=U(this.ctx,a);if(!r||(null===(n=a.focusNode)||void 0===n?void 0:n.parentElement)&&(0,S.default)(a.focusNode.parentElement.parentElement))return this.handle(c.default.INACTIVE),!1;const o=r.slice(1);return this.handle(c.default.SEARCH,[o]),!1},onPaste(){return L(this.ctx.refInput),!1}}}}function R(e){const t=window.getSelection();if(0===t.rangeCount)return{};const n=t.getRangeAt(0),{startContainer:a,startOffset:r,endContainer:i,endOffset:l}=n,s=i instanceof HTMLElement?i.childNodes.length===l:i.textContent&&i.textContent.length===l;let d,u,c,f,p,h;0===r&&(d=a===e?e.childNodes[r]:(0,o.default)(a,(t=>t&&t!==e&&(t.parentElement===e||(0,g.default)(t,0))?[t.parentElement]:[]),(t=>t&&t.parentElement===e))),s&&(u=i===e?e.childNodes[l]:(0,o.default)(i,(t=>t&&t!==e&&(t.parentElement===e||(0,g.default)(t,-1))?[t.parentElement]:[]),(t=>t&&t.parentElement===e)));const m=(0,y.findNonEmptySibling)(d,y.DIR.PREV);(0,S.default)(m)&&(c=m),(0,S.default)(d)&&(f=d),(0,S.default)(u)&&(p=u,n.collapsed&&(c=c||p));const v=(0,y.findNonEmptySibling)(u,y.DIR.NEXT);return(0,S.default)(v)&&(h=v,n.collapsed&&(f=f||h)),{mentionBeforeStart:c,mentionAfterStart:f,mentionBeforeEnd:p,mentionAfterEnd:h}}function L(e){const{mentionBeforeStart:t,mentionAfterStart:n,mentionBeforeEnd:a,mentionAfterEnd:r}=R(e);if(!(t||n||a||r))return;const o=window.getSelection(),i=o.getRangeAt(0),l=i.collapsed;let s=!1;if(t){const e=F(t);s=!0,i.setStartAfter(e),i.collapsed&&i.setEndAfter(e)}if(n){const e=B(n);s=!0,i.setStartBefore(e),l&&i.setEndBefore(e)}if(!l){if(a){const e=F(a);s=!0,i.setEndAfter(e)}if(r){const e=B(r);s=!0,i.setEndBefore(e)}}s&&(o.removeAllRanges(),o.addRange(i))}function N(){const e=document.createElement("span");return e.textContent="​",e.contentEditable="false",setTimeout((()=>(0,x.default)(e)),0),e}function F(e){const t=N();return(0,h.default)(t,e),t}function B(e){const t=N();return(0,m.default)(t,e),t}function U(e,t){var n;let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=(0,b.getSelectionSibling)(e.refInput,"BACKWARD");if((0,S.default)(r))return"";let o=null,i="",l=0,s=null;return(0,j.default)(e,t,((e,t,n)=>{if("@"===o){if(w.EmojiUtil.isEmoji(e))return s=i,!0;if(/\W/.test(e))return s=n.slice(t+1)+i,!0}if(0===t&&(i=n+i),o=e,l+=1,l>=M)return!0})),!s&&l<M&&"@"===o&&(s=i),a&&(null===(n=s)||void 0===n?void 0:n.length)&&(0,k.default)(t,s.length),s}t.default=O},216477:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.Suggestions=function(e){var t;const{theme:n,plugin:a}=e,C=(0,b.useModelValues)(e.chat,["groupMetadata","isGroup"]),j=(0,_.default)((()=>new p.default)),[k,T]=(0,y.useState)(!1),[w,D]=(0,y.useState)(0),[I,M]=(0,y.useState)(""),[P,A]=(0,y.useState)(""),[O,R]=(0,y.useState)([]),L=(0,y.useRef)(),N=e=>(t,n)=>!(!k||!O.length)&&((!t||!(0,h.default)(t))&&(e(t,n),!0)),F=e=>{const t=O[e];if(!t||!t.id)return;const n=(0,r.getAssignedColor)(C,t.id);a.handleSelect(t,n+"")},B=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return D((n=>{var a;return t||n===e||null===(a=L.current)||void 0===a||a.scrollIntoViewIfNeeded(w),e}))},U=N((()=>F(w))),H=N((()=>{T(!1),D(0),M(""),A(""),R([])})),G=N((()=>B(Math.max(w-1,0)))),z=N((()=>{const e=O.length-1;B(Math.min(w+1,e))}));if((0,m.default)(a,l.default.ENTER,U),(0,m.default)(a,l.default.TAB,U),(0,m.default)(a,l.default.SEARCH,(e=>{if(I&&e.startsWith(I))return;if(!C||!C.isGroup)return;const{groupMetadata:t}=C,{participants:n}=null!=t?t:{};T(!0),D(0),M(null),A(e),R((0,s.getResults)(e,n))})),(0,m.default)(a,l.default.INACTIVE,H),(0,m.default)(a,l.default.UP,G),(0,m.default)(a,l.default.DOWN,z),!k||!O.length)return null;const q=v.ChatCollection.getActive();if((null==q||null===(t=q.groupMetadata)||void 0===t?void 0:t.groupType)===o.GroupType.DEFAULT_ANNOUNCEMENT_GROUP)return null;const W=O.map(((e,t)=>({height:52,itemKey:e.id.toString(),contentKey:`${P}${t===w?"-selected":""}`,index:t,contact:e})));return(0,E.jsx)(i.default,{component:"div",className:u.default.positioningContainer,transitionName:"slide-up",children:(0,E.jsx)(g.UIE,{displayName:"MentionSuggestions",escapable:!0,requestDismiss:()=>{T(!1),D(0),M(P),A(""),R([])},requestRecentFocusOnUnmount:!1,children:(0,E.jsx)("div",{className:(0,x.default)(u.default.overlayContainer,{[u.default.mediaCaption]:n===S.MEDIA_CAPTION}),children:(0,E.jsx)(f.default,{className:u.default.resultsContainer,flatListControllers:[j.current],children:(0,E.jsx)(c.FlatList,{ref:L,data:W,testid:"contact-mention-list",flatListController:j.current,direction:"vertical",renderItem:e=>{const{index:t,contact:a}=e;return(0,E.jsx)(d.default,{contact:a,term:P,selected:t===w,theme:n===S.MEDIA_CAPTION?"mediaCaption":null,onMouseDown:e=>e.preventDefault(),onMouseUp:()=>F(t),onMouseEnter:()=>B(t,!0)},a.id.toString())}})})})})})},t.ThemeOptions=void 0;var r=n(139814),o=n(795720),i=a(n(540436)),l=a(n(499574)),s=n(944904),d=a(n(345367)),u=a(n(254794)),c=n(747915),f=a(n(944942)),p=a(n(630855)),h=a(n(27666)),m=a(n(526898)),g=n(718644),v=n(669951),x=a(n(294184)),C=a(n(566919)),y=n(667294),_=a(n(616223)),b=n(735461),E=n(785893);const S=(0,C.default)({MEDIA_CAPTION:null});t.ThemeOptions=S},725324:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(482857),o=a(n(685747)),i=a(n(294184)),l=n(785893);var s=e=>{let{ariaLabel:t,large:n,testid:a,onClick:s,icon:d,count:u,disabled:c}=e;return(0,l.jsxs)("div",{className:(0,i.default)(o.default.container,{[o.default.disabled]:c}),children:[(0,l.jsx)(r.Round,{label:t,large:n,testid:a,onClick:s,disabled:c,children:d}),null!=u&&(0,l.jsx)("div",{className:(0,i.default)(o.default.count,{[o.default.large]:n}),children:(0,l.jsx)("span",{children:u})})]})};t.default=s},434544:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(81109)),o=a(n(568064)),i=n(914597),l=n(226777),s=a(n(452665)),d=n(994790),u=n(857224),c=n(667294),f=n(785893);t.default=e=>{let{doSave:t,afterSave:n,isValid:a,children:p,modalConfig:h,onError:m,title:g,onCancel:v}=e;const[x,C]=(0,c.useState)(l.EditType.EDITING),y=(0,f.jsx)(d.DrawerHeader,{title:g,type:d.DRAWER_HEADER_TYPE.POPUP,onCancel:()=>{i.ModalManager.close(),null==v||v()}});return(0,f.jsx)(s.default,(0,r.default)({children:p,okText:o.default.t(563),type:u.ModalTheme.Auto,onOK:()=>{C(l.EditType.PENDING),t().then((()=>{C(l.EditType.DONE),n&&n(),i.ModalManager.close()}),(e=>{C(l.EditType.ERROR),m&&m(e)}))},okSpinner:x===l.EditType.PENDING,okDisabled:x===l.EditType.PENDING||!a,title:y},h))}},829595:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{displayValue:t=!1}=e,n=(0,r.default)(e,d);const a=(0,i.useRef)(!1);return(0,s.jsxs)(o.FlexRow,{align:"center",children:[(0,s.jsx)("input",{type:"range",className:(0,l.default)(u),min:n.min,max:n.max,value:n.value,onMouseDown:()=>{a.current=!0},onMouseUp:()=>{a.current=!1},onChange:e=>{e.preventDefault(),n.onChange(parseInt(e.target.value,10),a.current),a.current=!1}}),t?(0,s.jsx)("span",{className:(0,l.default)(c),children:n.value}):null]})};var r=a(n(506479)),o=n(429623),i=n(667294),l=a(n(156720)),s=n(785893);const d=["displayValue"],u={WebkitAppearance:"rc6mlzu0",backgroundColor:"lmoo7qev",width:"jkv2xdwy",height:"itoi26wd",borderTopStartRadius:"boajuire",borderTopEndRadius:"o93wvyfv",borderBottomEndRadius:"i5w8n1e6",borderBottomStartRadius:"cnpay6qi",outline:"gk6igrwd","::-webkit-slider-thumb":{WebkitAppearance:"lhcc0jp6",backgroundColor:"f8t368tc",width:"t68znmxb",height:"adibp37i",borderTopStartRadius:"dyphzmav",borderTopEndRadius:"cpexef3b",borderBottomEndRadius:"mdwvbymx",borderBottomStartRadius:"d1bl3yr6"},"::-moz-range-thumb":{backgroundColor:"eg5obqgd",width:"j09sh4ga",height:"q2g3zwp2",borderTopStartRadius:"f0tdcqsg",borderTopEndRadius:"ox1qo7wz",borderBottomEndRadius:"csvggiwl",borderBottomStartRadius:"s849znjx"},"::-ms-thumb":{backgroundColor:"h67vyybg",width:"dn131129",height:"cstjocha",borderTopStartRadius:"dowrn9ox",borderTopEndRadius:"f9qgu6hk",borderBottomEndRadius:"a9153urd",borderBottomStartRadius:"aa14nhyp"}},c={width:"i94gqilv",marginStart:"a3oefunm",marginBottom:"inogquss",fontSize:"f8jlpxt4",color:"j8jyn9yl"}},138801:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(729424),o=n(667294),i=a(n(156720)),l=a(n(885647)),s=a(n(778506)),d=n(785893);const u={tabContainer:{display:"p357zi0d",backgroundColor:"rv6u8h8g"},tab:{boxSizing:"cm280p3y",display:"p357zi0d",flexGrow:"ggj6brxn",flexDirection:"f8m0rgwh",alignItems:"gndfcl4n",justifyContent:"ac2vgrno",height:"qmp0wt83",color:"a633jkfz",textTransform:"ofejerhi"},focused:{boxShadow:"lgn58c33"},selected:{paddingTop:"eujn52yf",color:"ky3f94nk",borderBottom:"qldwl5fi"}};var c=e=>{let{tabConfigs:t,selectedId:n,onSelect:a,tabXstyle:l,xstyle:s}=e;const c=(0,o.useRef)(n),p=(0,o.useRef)([]),h=t.map((e=>{let{id:t}=e;return t})),m=h.length-1;return(0,d.jsx)(r.HotKeys,{handlers:{right:()=>{const e=h.indexOf(c.current),t=e===m?0:e+1,n=p.current[t];n&&n.focus()},left:()=>{const e=h.indexOf(c.current),t=0===e?m:e-1,n=p.current[t];n&&n.focus()}},children:(0,d.jsx)("div",{role:"tablist",className:(0,i.default)(u.tabContainer,s),children:t.map(((e,t)=>{let{title:r,id:o}=e;return(0,d.jsx)(f,{ref:e=>{p.current[t]=e},selected:o===n,onSelect:()=>a(o),onFocus:()=>{c.current=o},xstyle:l,children:r},r)}))})})};t.default=c;const f=(0,o.forwardRef)(((e,t)=>{let{selected:n,onSelect:a,onFocus:r,children:o,xstyle:c}=e;const[f,p]=(0,l.default)(),h=(0,s.default)(t,f);return(0,d.jsx)("button",{ref:h,role:"tab",tabIndex:n?0:-1,"aria-selected":Boolean(n),title:o,className:(0,i.default)(u.tab,p&&u.focused,n&&u.selected,c),onClick:()=>{n||a()},onFocus:r,children:o})}))},481499:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onImageTake:t,editCropShape:n,modalTheme:a}=e;return(0,u.jsx)(i.DropdownItem,{action:r=>{null!=e.action&&e.action(r),o.ModalManager.open((0,u.jsx)(l.EditCaptureFlowLoadable,{onFinished:t,editCropShape:n||s.CropShapeType.CIRCLE,modalTheme:a||d.ModalTheme.Box}))},testid:"mi-take-photo",disabled:e.disabled,children:r.default.t(613)})};var r=a(n(568064)),o=n(914597),i=n(471174),l=n(170174),s=n(329958),d=n(857224),u=n(785893)},3222:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n;return(t=class extends s.WrappedComponent{render(){return this.state.hasError?null:(0,d.jsx)(i.default.Consumer,{children:t=>(0,d.jsx)(e,(0,r.default)((0,r.default)({ref:this.setComponent},this.props),{},{uim:(0,o.default)(t,"uim")}))})}}).defaultProps=null!==(n=e.defaultProps)&&void 0!==n?n:void 0,t.displayName=`UIM(${(0,l.default)(e)})`,t.wrappedComponent=e,t};var r=a(n(81109)),o=a(n(145095)),i=a(n(502773)),l=a(n(538701)),s=n(407128),d=n(785893)},356204:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return(0,l.jsxs)(o.SelectableDiv,{"data-testid":"version",className:(0,i.default)(s),selectable:!0,children:[r.default.t(646,{version:""}),(0,l.jsx)("span",{dir:"LTR",children:"2.2234.8"}),null,null]})};var r=a(n(568064)),o=(a(n(493587)),n(552596)),i=(n(912591),a(n(730381)),a(n(156720))),l=n(785893);const s={alignSelf:"o2es7gts",fontSize:"f8jlpxt4",lineHeight:"r5qsrrlp",color:"pm5hny62",textAlign:"qfejxiq4"}},883192:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const[t,n]=(0,g.useFlow)(x.SelectGroup,{pushTransition:"none",popTransition:"none"}),[a,C]=(0,m.useState)(),y=t=>{const n=t.groupMetadata;return!(!t.isGroup||t.isGroup&&!(null==n?void 0:n.participants.iAmMember()))&&((null==n?void 0:n.participants.get(e.contact.id))?h.fbt._("Already added to group",null,{hk:"4hdDHF"}).toString():!!(null==n?void 0:n.participants.iAmAdmin())||l.default.t(176))},_=(0,m.useRef)(null),b=e=>{(()=>{if(!_.current)return;const e=_.current.getNode();e&&!e.contains(document.activeElement)&&i.default.focus(e)})(),C(e),n.push(x.Confirm)};if(null==n.step)return null;let E=null;switch(n.step){case x.SelectGroup:E=(0,v.jsx)(f.default,{chats:p.ChatCollection.filter((e=>e.isGroup)),filter:y,onCancel:()=>n.pop(),onGroup:b});break;case x.Confirm:E=(0,v.jsx)(c.default,{cancelText:h.fbt._("Cancel",null,{hk:"H0gNq"}),okText:h.fbt._("Add participant",null,{hk:"48ECfz"}),onOK:()=>{return t=(0,r.default)(a,"group"),(0,s.addParticipants)(t,[e.contact]).then((()=>{o.Cmd.openChatFromUnread(t).then((e=>{e&&u.ComposeBoxActions.focus(t)}))})).catch((()=>{})),void n.end();var t},onCancel:()=>n.pop(),children:(0,v.jsx)(d.EmojiText,{text:l.default.t(191,{participant:e.contact.formattedName,subject:(0,r.default)(a,"group").contact.name})})})}return(0,v.jsx)(t,{ref:_,flow:n,children:E})};var r=a(n(145095)),o=n(781572),i=a(n(352013)),l=a(n(568064)),s=n(815562),d=n(965417),u=n(188172),c=a(n(452665)),f=a(n(619317)),p=n(669951),h=n(548360),m=n(667294),g=n(159083),v=n(785893);const x=n(76672).Mirrored(["SelectGroup","Confirm"])},512326:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(781629)),o=a(n(751463)),i=n(781572),l=n(382545),s=n(26741),d=n(244651),u=n(188172),c=a(n(832973)),f=n(14500),p=n(480666),h=n(785893);class m extends c.default{constructor(){var e;super(...arguments),e=this,this._setRefMediaEditor=e=>{this._refMediaEditor=e},this._handleCancel=()=>{this.props.onComplete&&this.props.onComplete(!1),this._clearAttachMedia(),this.props.mediaCollection.mediaPickerStatsLogger.logCancel(),this.end()},this._handleFailedMedias=e=>{const t=e.filter((e=>e.isGif));if(t.length>0){const e=t.map((e=>e.filename));i.Cmd.once("ui_idle",(()=>{u.ComposeBoxActions.paste(this.props.chat,e.join(" "))})),this.props.onComplete&&this.props.onComplete(!1),this._clearAttachMedia(),this.props.mediaCollection.mediaPickerStatsLogger.logCancel(),this.end()}},this._sendMediaWithMentions=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{initCaptionUsed:a,isViewOnce:r}=n,{chat:o}=e.props;i.Cmd.once("ui_idle",(()=>{t.forEach(((t,n)=>{var a;const i=t.media,l={};if(0===n&&(l.quotedMsg=o.composeQuotedMsg,o.composeQuotedMsg=null),l.isViewOnce=r,l.mentionedJidList=t.mentionedJidList,l.caption=i.caption,l.addEvenWhilePreparing=i.previewable&&i.state===p.ATTACH_MEDIA_STATE.PROCESSING,null===(a=e.props.initCaption)||void 0===a?void 0:a.ctwaContextLinkData){const{ctwaContextLinkData:t,ctwaContext:n}=e.props.initCaption;l.ctwaContext=(0,d.prepareCtwaContextSend)(t,n)}i.sendToChat(o,l)})),e._clearAttachMedia()})),e.props.onComplete&&e.props.onComplete(!0,{initCaptionUsed:a}),e.props.mediaCollection.mediaPickerStatsLogger.logSend({isViewOnce:!!r}),e.end()},this.setText=e=>{null!=e&&i.Cmd.once("ui_idle",(()=>{u.ComposeBoxActions.paste(this.props.chat,e)})),this.end()},this._clearAttachMedia=()=>{this.props.chat&&this.props.chat.setAttachMediaContents(null)},this.handleRequestDismiss=e=>{var t;(null===(t=this._refMediaEditor)||void 0===t?void 0:t.handleRequestDismiss())&&(!1===e&&this._handleCancel(),super.handleRequestDismiss())}}componentDidMount(){i.Cmd.closeContextMenu(),i.Cmd.closeTooltip(),this.push((0,h.jsx)(f.MediaEditor,{theme:f.MediaTheme.ATTACH,ref:this._setRefMediaEditor,chat:this.props.chat,onClose:this._handleCancel,initCaption:this.props.initCaption,onSendMedia:(0,o.default)(this._sendMediaWithMentions),mediaCollection:this.props.mediaCollection,onDropText:(0,o.default)(this.setText),sendAsSticker:this.props.sendAsSticker})),(0,l.eagerlyEstablishE2EESession)(this.props.chat)}componentWillUnmount(){s.UA.isGecko?(0,r.default)((()=>u.ComposeBoxActions.focus(this.props.chat))):u.ComposeBoxActions.focus(this.props.chat)}}t.default=m},891037:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const[t,n]=(0,u.useFlow)(f.Select,{pushTransition:"none",popTransition:"none"}),a=(0,d.useRef)([]);if(null==n.step)return null;let p;switch(n.step){case f.Select:const t=l.ServerProps.maxParticipants;p=(0,c.jsx)(o.SelectModal,{title:s.fbt._("Send contacts",null,{hk:"9ZMyz"}),onCancel:()=>{n.pop()},onConfirm:e=>{n.push(f.Confirm),a.current=e},getInitialItems:()=>a.current,listType:o.ListType.CONTACT_SELECT_MODAL,maxItems:t,allowBlockedContacts:!0});break;case f.Confirm:const d=t=>{const{chat:a}=e,o=a.composeQuotedMsg,i=a.getComposeContents().ctwaContext||void 0;(0,r.default)(t,a,o,i),a.composeQuotedMsg=null,e.onContactsSent(),n.end()};p=(0,c.jsx)(i.default,{contactList:a.current,onSend:()=>d(a.current),onBack:()=>{n.pop()},chat:e.chat})}return(0,c.jsx)(t,{flow:n,children:p})};var r=a(n(486925)),o=n(756728),i=a(n(393110)),l=n(964551),s=n(548360),d=n(667294),u=n(159083),c=n(785893);const f=n(76672).Mirrored(["Select","Confirm"])},392246:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(141455),o=n(408139),i=n(665397),l=n(669393),s=a(n(471410)),d=n(944189),u=n(397567),c=a(n(832973)),f=n(967455),p=n(582145),h=n(427394),m=n(785893);class g extends c.default{constructor(){super(...arguments),this._handleProductCatalog=()=>{const{sellerJid:e,chat:t}=this.props;(0,o.canViewCollections)()&&l.QPL.markerStart(i.QuickLogMarkerId.WHATSAPP_CATALOG_COLLECTIONS_VIEW,{annotations:{string:{EntryPoint:"Cart"}}}),this.push((0,m.jsx)(f.ProductDetailsFlowLoadable,{chat:t,catalogOwnerJid:e}))},this._handleProductDetail=e=>{const{chat:t}=this.props;(0,p.qplStartProductView)("Cart"),this.push((0,m.jsx)(f.ProductDetailsFlowLoadable,{refreshCarousel:!0,chat:t,productInfo:e,onEnd:this._pop}))},this._end=()=>{this.end(!0)},this._pop=()=>{this.pop()}}componentDidMount(){const{sellerJid:e,chat:t}=this.props;this.push((0,m.jsx)(h.DrawerContext.Consumer,{children:n=>{const{entryPoint:a}=(0,u.getProductCatalogContext)(n),{isPushed:r}=this.state;return(0,m.jsx)(d.CartDetailDrawer,{chat:t,sellerJid:e,onProductDetail:this._handleProductDetail,onProductCatalog:this._handleProductCatalog,onBack:this._end,closeDrawerRightOnSend:a===s.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_PRODUCT_LIST_MESSAGE,isPushed:r})}})),r.DrawerManager.existsDrawerLeft((e=>{e&&r.DrawerManager.closeDrawerLeft()})),r.DrawerManager.existsDrawerMid((e=>{e&&r.DrawerManager.closeDrawerMid()}))}}t.default=g},386704:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=Q;var r=a(n(81109)),o=a(n(348926)),i=n(450796),l=n(451897),s=n(492574),d=n(374316),u=a(n(706996)),c=n(141455),f=n(408139),p=n(665397),h=n(669393),m=n(694816),g=n(978820),v=a(n(912290)),x=n(621374),C=a(n(7532)),y=n(391545),_=n(277975),b=a(n(793870)),E=a(n(863935)),S=n(397567),j=a(n(54414)),k=n(919829),T=a(n(95416)),w=n(435054),D=a(n(754050)),I=n(11395),M=n(227105),P=n(387956),A=n(950452),O=a(n(832973)),R=n(492557),L=n(582145),N=a(n(60453)),F=a(n(69637)),B=n(427394),U=n(994790),H=n(493581),G=n(599989),z=n(509468),q=n(719380),W=n(548360),V=n(667294),Y=n(785893);const K=n(76672).Mirrored(["YES","NO","PENDING"]);class X extends O.default{constructor(){var e;super(...arguments),e=this,this._isComplianceFormVisible=!1,this._isProductListVisible=!1,this._blockCartInterstitial=()=>this.props.mustCompleteCompliance!==K.NO,this._isCreatingCatalog=()=>this.props.isCreatingCatalog,this._showProductList=e=>{const t=(0,f.canManageCollections)()?(0,Y.jsx)(j.default,{contact:this.props.contact,onCatalogLinkClick:this._handleCatalogShare,onProductShare:this._handleProductShare,onProductDetail:this._handleEditProduct,onAddProduct:this._handleAddProduct,onRemoveProduct:this._handleRemoveProduct,catalogId:this.props.catalogId,onBack:this._end,onCartClick:this._handleCartClick,businessProfile:null,headerType:U.DRAWER_HEADER_TYPE.LARGE,onCollectionSeeAll:this._handleCollectionSeeAll,canManageCatalog:!0,autoUpdate:!0,onOpenCollections:this._handleOpenCollections,onOpenMerchantDetailsForm:this._handleOpenMerchantDetailsForm,onEditCollection:this._handleEditCollection,onOpenSettings:this._handleOpenSettings,blockCartInterstitialFn:this._blockCartInterstitial,canLogQpl:e}):(0,Y.jsx)(I.ProductListDrawer,{contact:this.props.contact,onCatalogLinkClick:this._handleCatalogShare,onProductShare:this._handleProductShare,onProductDetail:this._handleEditProduct,onAddProduct:this._handleAddProduct,onRemoveProduct:this._handleRemoveProduct,catalogId:this.props.catalogId,onBack:this._end,onCartClick:this._handleCartClick,businessProfile:null,headerType:U.DRAWER_HEADER_TYPE.LARGE,canManageCatalog:!0,autoUpdate:!0,onOpenSettings:this._handleOpenSettings,blockCartInterstitialFn:this._blockCartInterstitial});this.push(t)},this._handleOpenMerchantDetailsForm=()=>{const e=(0,g.getMeUser)();this.push((0,Y.jsx)(R.MerchantDetailsFormFlowLoadable,{contactId:e,onBack:this.pop}))},this._handleEditProduct=e=>{const t=G.CatalogCollection.assertGet(this.props.catalogId);c.DrawerManager.openDrawerMid((0,Y.jsx)(v.default,{catalog:t,product:e}),"slide-left",void 0,void 0,this.props.context,P.FocusType.TABBABLE)},this._handleCartClick=e=>{(0,u.default)(e,void 0,this.props.context)},this._handleCollectionSeeAll=e=>{this.push((0,Y.jsx)(k.CollectionContentDrawer,{contact:this.props.contact,onProductDetail:this._handleEditProduct,onProductShare:this._handleProductShare,catalogId:this.props.catalogId,onBack:this._pop,onCatalogLinkClick:this._handleCatalogShare,onCartClick:this._handleCartClick,collection:e,canManageCatalog:!0,headerType:U.DRAWER_HEADER_TYPE.LARGE,onEditCollection:this._handleEditCollection}))},this._handleEditCollection=e=>{const t=G.CatalogCollection.get(this.props.catalogId);e||(0,w.logCollectionCreateClicked)((0,S.getProductCatalogContext)(this.props.context)),t&&this.push((0,Y.jsx)(b.default,{onBack:this._pop,collection:e,catalog:t}))},this._handleCatalogShare=(e,t)=>{c.DrawerManager.openDrawerMid((0,Y.jsx)(C.default,{onCancel:()=>{c.DrawerManager.closeDrawerMid()},catalog:e,contact:t,prompt:W.fbt._("Anyone with WhatsApp can follow this link to browse catalog",null,{hk:"1Lofnu"}),onSend:()=>c.DrawerManager.closeDrawerMid(),centerDrawer:!0}),"slide-left",void 0,void 0,this.props.context,P.FocusType.TABBABLE)},this._handleProductShare=e=>{c.DrawerManager.openDrawerMid((0,Y.jsx)(D.default,{onCancel:()=>{c.DrawerManager.closeDrawerMid()},product:e,prompt:W.fbt._("Anyone with WhatsApp can follow this link to browse catalog",null,{hk:"1Lofnu"}),onSend:()=>c.DrawerManager.closeDrawerMid(),centerDrawer:!0,sendProductMsg:!0}),"slide-left",void 0,void 0,this.props.context,P.FocusType.TABBABLE)},this._handleOpenCollections=()=>{h.QPL.markerStart(p.QuickLogMarkerId.WHATSAPP_COLLECTIONS_MANAGEMENT_VIEW),this.push((0,Y.jsx)(T.default,{onBack:this._pop,editCollection:this.editCollection,onSeeCollection:this._handleSeeCollection,onReorderCollection:this._handleReorderCollections})),(0,w.logCollectionMenuClicked)((0,S.getProductCatalogContext)(this.props.context))},this._handleReorderCollections=()=>{this.push((0,Y.jsx)(T.default,{onBack:this._pop,editCollection:this.editCollection,onSeeCollection:this._handleSeeCollection,isReorder:!0}))},this._handleSeeCollection=e=>{(0,L.qplStartCollectionViewAll)("Collection"),this.push((0,Y.jsx)(Q,{catalogId:this.props.catalogId,collection:e,product:null}))},this.editCollection=e=>{const t=G.CatalogCollection.get(this.props.catalogId);e||(0,w.logCollectionCreateClicked)((0,S.getProductCatalogContext)(this.props.context)),t&&this.push((0,Y.jsx)(b.default,{onBack:this._pop,collection:e,catalog:t}))},this._handleOpenSettings=()=>{this.push((0,Y.jsx)(y.CatalogSettingsDrawer,{onBack:this._pop}))},this._handleAddProduct=()=>this.props.onAddProduct(),this._handleAddFirstProduct=()=>this.props.onAddFirstProduct(),this._handleRemoveProduct=()=>this.props.onRemoveProduct(),this._handleAddProductFromBusinessDetails=(0,o.default)((function*(){e._pop(),e._isComplianceFormVisible=!1,yield e.props.onComplianceFormClosed();G.CatalogCollection.get(e.props.catalogId)?e._handleAddProduct():e._handleAddFirstProduct()})),this._pop=()=>{this.pop(),c.DrawerManager.closeDrawerMid()},this._end=()=>{this.end(!0),c.DrawerManager.closeDrawerMid()}}componentDidMount(){null!=this.props.collection?this._handleCollectionSeeAll(this.props.collection):null!=this.props.catalog?(this._showProductList(!0),null!=this.props.product&&this._handleEditProduct(this.props.product)):(h.QPL.markerDrop(p.QuickLogMarkerId.WHATSAPP_CATALOG_COLLECTIONS_VIEW),this._showNewCatalog())}componentDidUpdate(){this.props.showComplianceForm&&!this._isComplianceFormVisible?(this._isComplianceFormVisible=!0,this._showComplianceForm()):this.props.showProductList&&!this._isProductListVisible&&(this._isProductListVisible=!0,this._showProductList(!1))}_showNewCatalog(){this.push((0,Y.jsx)(E.default,{isCreatingCatalogFn:this._isCreatingCatalog,onBack:this._pop,onAddProductClick:this._handleAddFirstProduct}))}_showComplianceForm(){this.push((0,Y.jsx)(R.MerchantDetailsFormFlowLoadable,{contactId:this.props.contact.id,enableCatalogCreationContext:!0,enableBusinessProfileAddress:!0,onAddProduct:this._handleAddProductFromBusinessDetails,onBack:()=>{this._pop(),this._isComplianceFormVisible=!1,this.props.onComplianceFormClosed()},onUnmount:()=>{this._isComplianceFormVisible=!1,this.props.onComplianceFormClosed()}}))}}function Q(e){const t=(0,V.useContext)(B.DrawerContext),[n,a]=(0,V.useState)(K.PENDING),u=q.ContactCollection.get(e.catalogId),[g,C]=(0,V.useState)(!1),[y,b]=(0,V.useState)(!1),[E,j]=(0,V.useState)(!1),[k,T]=(0,V.useState)(!1),w=(0,V.useCallback)((()=>G.CatalogCollection.get(e.catalogId)),[e.catalogId]),D=(0,V.useCallback)((0,o.default)((function*(){var e;if(!u)return __LOG__(4,void 0,new Error,!0)`Cannot update compliance for non existing user`,void SEND_LOGS("catalog-management-flow-compliance-no-contact-error");a(K.PENDING);const t=null===(e=H.BusinessProfileCollection.get(u.id))||void 0===e?void 0:e.address;let n=K.NO;const r=w();!(0,f.canSeeECommerceComplianceIndiaHardEnforcementBusinessJourney)(u.id.user)||r&&r.productCollection.length||(0,d.isBusinessCompliant)(t,yield(0,M.getLegalEntityDetails)(u.id),u.id)||(n=K.YES),a(n)})),[u,w]),I=(0,V.useCallback)((()=>{const e=w();if(n===K.YES)C(!0);else if(n===K.PENDING)j(!0);else if(e){const n=new z.Product({catalogWid:e.id,additionalImageCdnUrl:[]});c.DrawerManager.openDrawerMid((0,Y.jsx)(v.default,{catalog:e,product:n,onCreate:n=>{c.DrawerManager.openDrawerMid((0,Y.jsx)(v.default,{catalog:e,product:n}),"slide-left",void 0,void 0,t,P.FocusType.TABBABLE)},newProduct:!0}),"slide-left",void 0,void 0,t,P.FocusType.TABBABLE)}}),[n,t,w]),O=(0,V.useCallback)((0,o.default)((function*(){T(!0);const n=(0,S.getProductCatalogContext)(t);(0,_.logCreateProductCatalogClick)(n),h.QPL.markerStart(p.QuickLogMarkerId.WHATSAPP_CATALOG_CREATE);let a=!0;try{yield(0,x.createCatalog)(),(0,_.logCreateProductCatalogSuccess)(n),a=!1,h.QPL.markerEnd(p.QuickLogMarkerId.WHATSAPP_CATALOG_CREATE,l.QuickLogActionType.SUCCESS);try{yield G.CatalogCollection.find(e.catalogId),b(!0),I()}catch(e){(0,i.filteredCatch)(s.ServerStatusCodeError,(()=>{__LOG__(3)`Failed to fetch product catalog from server`}))}}catch(e){(0,i.filteredCatch)(s.ServerStatusCodeError,(e=>{(0,_.logCreateProductCatalogFailed)(n,e.statusCode),m.ToastManager.open((0,Y.jsx)(A.Toast,{msg:W.fbt._("Catalog already created.",null,{hk:"1s2DFD"}),id:(0,A.genId)("err_catalog_already_created")})),b(!0)}))}finally{a&&h.QPL.markerEnd(p.QuickLogMarkerId.WHATSAPP_CATALOG_CREATE,l.QuickLogActionType.FAIL)}T(!1)})),[e.catalogId,t,I]),R=(0,V.useCallback)((0,o.default)((function*(){n===K.YES?C(!0):n===K.PENDING?j(!0):yield O()})),[n,O]),L=(0,V.useCallback)((0,o.default)((function*(){yield D()})),[D]);return(0,V.useEffect)((()=>{D()}),[]),(0,V.useEffect)((()=>{const e=w();E&&n!==K.PENDING&&(j(!1),n===K.YES?C(!0):e?I():O()),n===K.YES&&c.DrawerManager.closeDrawerMid()}),[E,n,w,O,I]),u?E?(0,Y.jsxs)(N.default,{children:[(0,Y.jsx)(U.DrawerHeader,{title:W.fbt._("Add new item",null,{hk:"2Tc6p3"}),onCancel:()=>{C(!1),j(!1)},type:U.DRAWER_HEADER_TYPE.LARGE}),(0,Y.jsx)(F.default,{theme:"center-content",children:(0,Y.jsx)(M.ComplianceInfoLoading,{})})]}):(0,Y.jsx)(B.DrawerContext.Consumer,{children:t=>(0,Y.jsx)(X,(0,r.default)({contact:u,context:t,mustCompleteCompliance:n,showComplianceForm:g,showProductList:y,isCreatingCatalog:k,onAddProduct:I,onAddFirstProduct:R,onRemoveProduct:L,onComplianceFormClosed:()=>(C(!1),D())},e))}):null}},912290:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(141455),o=n(465303),i=n(314746),l=a(n(754050)),s=a(n(832973)),d=n(582145),u=n(548360),c=n(785893);class f extends s.default{constructor(){super(...arguments),this._handleEditSuccess=e=>{(0,d.qplStartProductView)("EditProduct"),this._showInfoDrawer(e)},this._showInfoDrawer=e=>{const{catalog:t}=this.props;this.push((0,c.jsx)(i.ProductInfoDrawer,{catalog:t,product:e,onCancel:this.end,onEditProduct:this._handleProductEdit,onShareProduct:this._handleShareProduct}))},this._handleShareProduct=e=>{this.push((0,c.jsx)(l.default,{onBack:this._pop,product:e,prompt:(0,c.jsx)("div",{children:u.fbt._("Anyone with WhatsApp can follow this link to browse catalog",null,{hk:"1Lofnu"})}),onSend:()=>r.DrawerManager.closeDrawerMid(),centerDrawer:!0,sendProductMsg:!0}))},this._handleProductEdit=e=>{this.push((0,c.jsx)(o.EditProductDrawer,{catalog:this.props.catalog,onBack:this._pop,onEditSuccess:this._handleEditSuccess,product:e,onDelete:this._handleDelete}))},this._handleDelete=e=>{var t,n;const{product:a}=this.props;a.id===e.id&&r.DrawerManager.closeDrawerMid(),null===(t=(n=this.props).onDelete)||void 0===t||t.call(n)},this._pop=()=>{this.pop()},this._end=()=>{this.end(!0)}}componentDidMount(){const{catalog:e,product:t,onCreate:n,newProduct:a}=this.props;e.productCollection.on("remove",this._handleDelete),a?this.push((0,c.jsx)(o.EditProductDrawer,{onCancel:this._pop,onEditSuccess:e=>n?n(e):this._handleEditSuccess(t),catalog:e,product:t,newProduct:!0})):this._showInfoDrawer(t)}componentWillUnmount(){this.props.catalog.productCollection.off("remove",this._handleDelete)}}t.default=f},177467:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const[e,t]=(0,h.useFlow)(g.Labels),[a,v]=(0,p.useState)(""),[x,C]=(0,p.useState)();if(null==t.step)return null;const y=(e,t)=>{f.LabelCollection.updateLabel(e,t)};let _;switch(t.step){case g.Labels:_=(0,m.jsx)(u.default,{onDeleteLabel:e=>{e.forEach((e=>{let{id:t}=e;f.LabelCollection.deleteLabel(t)}))},onLabelClick:e=>{v(e),t.push(g.LabelItem)},onClose:()=>t.pop(),openAddLabel:()=>{f.LabelCollection.toArray().length>=r.default.MAX_SMB_LABEL_COUNT?i.ModalManager.open((0,m.jsx)(c.default,{okText:o.default.t(528),onOK:()=>i.ModalManager.close(),children:o.default.t(875,{count:r.default.MAX_SMB_LABEL_COUNT})})):i.ModalManager.open((0,m.jsx)(s.default,{onAddLabel:(e,t)=>{f.LabelCollection.addNewLabel(e,t)},onCancel:()=>i.ModalManager.close()}))}});break;case g.LabelItem:const e=n(641885).Z;_=(0,m.jsx)(e,{openLabelColorDrawer:(e,n)=>{v(e),C(n),t.push(g.LabelColor)},labelId:a,onManageLabels:e=>{i.ModalManager.open((0,m.jsx)(l.ManageLabelFlowLoadable,{modelsToUpdate:e}))},onClose:()=>t.pop(),onRemoveLabel:(e,t)=>{f.LabelCollection.addOrRemoveLabels([{id:e,type:"remove"}],t)},onEditLabel:e=>{i.ModalManager.open((0,m.jsx)(s.default,{labelId:e,onUpdateLabel:y,onCancel:i.ModalManager.close()}))}});break;case g.LabelColor:_=(0,m.jsx)(d.default,{labelId:a,onClose:()=>t.pop(),onUpdateColor:y,currentColor:x})}return(0,m.jsx)(e,{flow:t,children:_})};var r=a(n(364369)),o=a(n(568064)),i=n(914597),l=n(47809),s=a(n(610403)),d=a(n(676419)),u=a(n(819446)),c=a(n(452665)),f=n(316770),p=n(667294),h=n(159083),m=n(785893);const g=n(76672).Mirrored(["Labels","LabelItem","LabelColor"])},951095:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const[t,n]=(0,m.useFlow)(x.ManageLabel,{pushTransition:"none",popTransition:"none"}),a=(0,g.default)((()=>new Set)),C=(0,h.useRef)();if((0,h.useEffect)((()=>{const t=e.modelsToUpdate.length;C.current=1===t?e.modelsToUpdate[0]instanceof p.Chat?s.default.LABEL_TARGETS.LABEL_CHAT_DIALOG:s.default.LABEL_TARGETS.LABEL_MESSAGE_DIALOG:s.default.LABEL_TARGETS.LABEL_COMBINED_DIALOG,(0,l.logLabelOperationEvent)(s.default.LABEL_OPERATIONS.VIEW,t,C.current)}),[]),null==n.step)return null;let y;switch(n.step){case x.ManageLabel:y=(0,v.jsx)(u.default,{shouldScrollIntoViewAndSelect:e=>a.current.has(e)?(a.current.delete(e),{shouldScrollIntoView:!0,shouldSelect:!0}):{shouldScrollIntoView:!1,shouldSelect:!1},onAddNewLabel:()=>{f.LabelCollection.toArray().length>=r.default.MAX_SMB_LABEL_COUNT?i.ModalManager.open((0,v.jsx)(c.default,{okText:o.default.t(528),onOK:()=>i.ModalManager.close(),children:o.default.t(875,{count:r.default.MAX_SMB_LABEL_COUNT})})):n.push(x.AddOrEditLabel)},onLabelUpdateComplete:()=>{var t;null===(t=e.onLabelUpdateComplete)||void 0===t||t.call(e),n.pop()},onCancel:()=>{C.current&&(0,l.logLabelOperationEvent)(s.default.LABEL_OPERATIONS.CLICK_NEGATIVE,e.modelsToUpdate.length,C.current),n.pop()},modelsToUpdate:e.modelsToUpdate});break;case x.AddOrEditLabel:y=(0,v.jsx)(d.default,{onAddLabel:(e,t)=>{f.LabelCollection.addNewLabel(e,t).then((()=>{a.current.add(e)}))},onCancel:()=>n.pop()})}return(0,v.jsx)(t,{flow:n,children:y})};var r=a(n(364369)),o=a(n(568064)),i=n(914597),l=n(265433),s=a(n(471410)),d=a(n(610403)),u=a(n(794981)),c=a(n(452665)),f=n(316770),p=n(63183),h=n(667294),m=n(159083),g=a(n(616223)),v=n(785893);const x=n(76672).Mirrored(["ManageLabel","AddOrEditLabel"])},311753:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(81109)),o=a(n(348926)),i=n(240277),l=n(374316),s=n(781572),d=n(715127),u=n(408139),c=n(978820),f=n(501474),p=n(933866),h=n(479686),m=n(584287),g=n(227105),v=n(113923),x=n(990011),C=a(n(832973)),y=a(n(748517)),_=a(n(60453)),b=a(n(69637)),E=n(994790),S=a(n(833308)),j=a(n(871520)),k=n(493581),T=n(548360),w=n(667294),D=(a(n(156720)),n(785893));const I={complianceInfoHelpCenterBanner:{color:"hp667wtd",paddingTop:"nlnf8xo7",paddingEnd:"bcymb0na",paddingBottom:"r219jyu0",paddingStart:"e8k79tju"},formContainer:{paddingTop:"a4bywxmn",paddingEnd:"bcymb0na",paddingBottom:"ekpn4oxx",paddingStart:"e8k79tju",marginBottom:"brac1wpa"},formTitle:{paddingTop:"i5tg98hk",paddingEnd:"f9ovudaz",paddingBottom:"przvwfww",paddingStart:"gx1rr48f",marginBottom:"oqp0d33z"},formTitleWithSubtitle:{paddingTop:"i5tg98hk",paddingEnd:"f9ovudaz",paddingBottom:"przvwfww",paddingStart:"gx1rr48f",marginBottom:"inww9tbj"},subtitle:{color:"hp667wtd",marginBottom:"oqp0d33z"},containingBlock:{transform:"cgi16xlc"}};class M extends C.default{componentDidMount(){this.push((0,D.jsx)(B,{contactId:this.props.contactId,enableCatalogCreationContext:this.props.enableCatalogCreationContext,enableBusinessProfileAddress:this.props.enableBusinessProfileAddress,onBack:()=>{this.props.onBack()},onAddProduct:this.props.onAddProduct}))}componentWillUnmount(){var e,t;null===(e=(t=this.props).onUnmount)||void 0===e||e.call(t)}}t.default=M;const P=e=>e?I.formTitleWithSubtitle:I.formTitle,A=()=>T.fbt._("Add a legal name of business",null,{hk:"1Dgk4f"}),O=()=>T.fbt._("Add a business address",null,{hk:"2x7w3h"}),R=e=>e?T.fbt._("Incorrect email address format",null,{hk:"1KuwvT"}):T.fbt._("Add an email address",null,{hk:"KeJaU"}),L=()=>T.fbt._("Add a grievance officer name",null,{hk:"29OUSc"}),N=e=>!e||(0,i.isPotentiallyPhoneNumber)(e),F=(0,c.getMeUser)(),B=(0,w.forwardRef)(((e,t)=>{let{contactId:n,onBack:a,enableCatalogCreationContext:i,enableBusinessProfileAddress:c,onAddProduct:h}=e;const[m,x]=(0,w.useState)({}),[C,M]=(0,w.useState)({}),[B,H]=(0,w.useState)({}),[z,q]=(0,w.useState)(!0),[W,V]=(0,w.useState)(!1),[Y,K]=(0,w.useState)(),[X,Q]=(0,w.useState)(!1);(0,w.useEffect)((()=>{let e=!0;return(0,o.default)((function*(){const[t,a]=yield Promise.all([(0,g.getLegalEntityDetails)(n),k.BusinessProfileCollection.find(n)]);e&&(x(t),K(a.serialize()),q(!1))}))(),()=>{e=!1}}),[n]),(0,w.useEffect)((()=>{Q(!Object.keys(B).length&&!Object.keys(C).length&&(0,l.isBusinessCompliant)(null==Y?void 0:Y.address,m,n))}),[m,C,null==Y?void 0:Y.address,n,B]);const J=function(){var e=(0,o.default)((function*(e){yield(0,p.editBusinessCompliance)(e);const t=yield k.BusinessProfileCollection.update(F,{getMerchantCompliance:!0});return(Array.isArray(t)?t[0]:t).serialize().legalEntityDetails}));return function(){return e.apply(this,arguments)}}(),$=(0,w.useCallback)((e=>{H((t=>(0,r.default)((0,r.default)({},t),{},{[e]:!0})))}),[]),Z=(0,w.useCallback)((e=>{H((t=>{const n=(0,r.default)({},t);return n.hasOwnProperty(e)&&delete n[e],n}))}),[]),ee=(0,w.useCallback)(function(){var e=(0,o.default)((function*(e,t){const n={[e]:t,isRegistered:null==m?void 0:m.isRegistered};Z(e),x((0,r.default)((0,r.default)({},m),n));const a=yield J(n);x(a)}));return function(){return e.apply(this,arguments)}}(),[m,Z]),te=(0,w.useCallback)(((e,t)=>{M((n=>(0,r.default)((0,r.default)({},n),{},{[`${e}.${t}`]:!0})))}),[]),ne=(0,w.useCallback)(((e,t)=>{M((n=>{const a=(0,r.default)({},n);return delete a[`${e}.${t}`],a}))}),[]),ae=(0,w.useCallback)(function(){var e=(0,o.default)((function*(e,t,n){const a={[e]:{[t]:n},isRegistered:null==m?void 0:m.isRegistered};x((0,r.default)((0,r.default)({},m),{},{[e]:(0,r.default)((0,r.default)({},null==m?void 0:m[e]),a[e])}));try{te(e,t);const n=yield J(a);x(n),ne(e,t),Z(`${e}.${t}`)}catch(e){throw new Error(e)}}));return function(){return e.apply(this,arguments)}}(),[m,te,ne,Z]),re=(0,w.useCallback)(function(){var e=(0,o.default)((function*(e){K(e),Z("businessAddress"),yield k.BusinessProfileCollection.update(F)}));return function(){return e.apply(this,arguments)}}(),[Z]),oe=(0,w.useCallback)(function(){var e=(0,o.default)((function*(e,t){x(yield(0,g.getLegalEntityDetails)(n)),ne(e,t)}));return function(){return e.apply(this,arguments)}}(),[n,ne]),ie=(0,w.useCallback)(function(){var e=(0,o.default)((function*(e,t,n){if(e||t){V(!0);const a=yield J({entityType:e,entityTypeCustom:t,isRegistered:n});V(!1),x(a)}}));return function(){return e.apply(this,arguments)}}(),[]),{entityName:le,customerCareDetails:se,grievanceOfficerDetails:de}=m||{},ue=(0,w.useMemo)((()=>(0,l.getEntityTypeText)(m)),[m]),ce=(0,w.useCallback)((e=>(0,l.existsField)(e,n)),[n]),fe=(0,w.useRef)(null),pe=(0,u.canSeeECommerceComplianceIndiaHardEnforcementBusinessJourney)(F.user);return(0,D.jsx)("div",{ref:t,children:(0,D.jsxs)(_.default,{xstyle:I.containingBlock,children:[(0,D.jsx)(E.DrawerHeader,{title:T.fbt._("Business details",null,{hk:"m9xzp"}),onBack:a,type:E.DRAWER_HEADER_TYPE.LARGE}),(0,D.jsx)(b.default,{theme:z?"center-content":void 0,ref:fe,children:z?(0,D.jsx)(g.ComplianceInfoLoading,{}):(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(g.ComplianceInfoHelpCenterBanner,{xstyle:I.complianceInfoHelpCenterBanner}),(0,D.jsxs)(S.default,{titleXStyle:I.formTitle,xstyle:[I.formContainer],children:[(0,D.jsx)(U,{value:le,maxLength:d.COMPLIANCE_INFO_LENGTH.ENTITY_NAME,placeholder:T.fbt._("Legal Name of Business",null,{hk:"2s9jD"}),icon:"info",validate:ce,errorFn:A,onSave:e=>ee("entityName",e),onError:()=>$("entityName")}),(0,D.jsx)(U,{value:ue,placeholder:T.fbt._("Business Type",null,{hk:"48J73B"}),icon:"account-balance",onFocus:()=>s.Cmd.showMerchantDetailsEntityTypePopup(m,ie),isLoading:W}),pe?(0,D.jsx)(G,{rawBusinessProfile:Y,validate:ce,onAfterSave:re,errorFn:O,onError:()=>$("businessAddress")}):null]}),(0,D.jsxs)(S.default,{title:T.fbt._("Customer Care Information",null,{hk:"qlYos"}),titleXStyle:P(pe),xstyle:[I.formContainer],children:[pe?(0,D.jsx)(v.TextDiv,{xstyle:I.subtitle,children:T.fbt._("Provide at least one phone number and email address",null,{hk:"IKXYK"})}):null,(0,D.jsx)(U,{value:null==se?void 0:se.mobileNumber,maxLength:d.COMPLIANCE_INFO_LENGTH.MOBILE_NUMBER,placeholder:T.fbt._("Mobile Phone Number",null,{hk:"PMTTg"}),icon:"phone",validate:e=>(0,l.existsCustomerCareDetailsContact)(se,n,"mobileNumber",e)&&N(e),onSave:e=>ae("customerCareDetails","mobileNumber",e),onCancel:()=>oe("customerCareDetails","mobileNumber"),onError:e=>(0,g.handleCustomerCareDetailsError)(se,n,"mobileNumber",e),errorFn:e=>(0,l.getCustomerCareDetailsError)(se,"mobileNumber",e,T.fbt._("Incorrect phone number format",null,{hk:"3lFQ1f"}),n)}),(0,D.jsx)(U,{value:null==se?void 0:se.landlineNumber,maxLength:d.COMPLIANCE_INFO_LENGTH.LANDLINE_NUMBER,placeholder:T.fbt._("Landline Phone Number",null,{hk:"tXYaf"}),icon:"phone",validate:e=>(0,l.existsCustomerCareDetailsContact)(se,n,"landlineNumber",e)&&N(e),onSave:e=>ae("customerCareDetails","landlineNumber",e),onCancel:()=>oe("customerCareDetails","landlineNumber"),onError:e=>(0,g.handleCustomerCareDetailsError)(se,n,"landlineNumber",e),errorFn:e=>(0,l.getCustomerCareDetailsError)(se,"landlineNumber",e,T.fbt._("Incorrect landline phone number format",null,{hk:"4zXlsw"}),n)}),(0,D.jsx)(U,{value:null==se?void 0:se.email,maxLength:d.COMPLIANCE_INFO_LENGTH.EMAIL,placeholder:T.fbt._("Email Address",null,{hk:"2jYxR1"}),icon:"business-email",validate:e=>ce(e)&&(0,f.validateEmail)(e),onSave:e=>ae("customerCareDetails","email",e),errorFn:R,onError:()=>$("customerCareDetails.email")})]}),(0,D.jsxs)(S.default,{title:T.fbt._("Grievance Officer Information",null,{hk:"3emd7I"}),titleXStyle:P(pe),xstyle:[I.formContainer],children:[pe?(0,D.jsx)(v.TextDiv,{xstyle:I.subtitle,children:T.fbt._("Provide name and at least one contact method",null,{hk:"2Fjw3Y"})}):null,(0,D.jsx)(U,{value:null==de?void 0:de.name,maxLength:d.COMPLIANCE_INFO_LENGTH.GRIEVANCE_OFFICER_NAME,placeholder:T.fbt._("Name",null,{hk:"2vEs6r"}),validate:ce,icon:"assignment-ind",onSave:e=>ae("grievanceOfficerDetails","name",e),errorFn:L,onError:()=>$("grievanceOfficerDetails.name")}),(0,D.jsx)(U,{value:null==de?void 0:de.mobileNumber,maxLength:d.COMPLIANCE_INFO_LENGTH.MOBILE_NUMBER,placeholder:T.fbt._("Mobile Phone Number",null,{hk:"3kk5I"}),icon:"phone",validate:e=>(0,l.existsGrievanceOfficerDetailsContact)(de,n,"mobileNumber",e)&&N(e),onSave:e=>ae("grievanceOfficerDetails","mobileNumber",e),onCancel:()=>oe("grievanceOfficerDetails","mobileNumber"),onError:e=>(0,g.handleGrievanceOfficerDetailsError)(de,n,"mobileNumber",e),errorFn:e=>(0,l.getGrievanceOfficerDetailsError)(de,"mobileNumber",e,T.fbt._("Incorrect phone number format",null,{hk:"3lFQ1f"}),n)}),(0,D.jsx)(U,{value:null==de?void 0:de.landlineNumber,maxLength:d.COMPLIANCE_INFO_LENGTH.LANDLINE_NUMBER,placeholder:T.fbt._("Landline Phone Number",null,{hk:"4GBzF0"}),icon:"phone",validate:e=>(0,l.existsGrievanceOfficerDetailsContact)(de,n,"landlineNumber",e)&&N(e),onSave:e=>ae("grievanceOfficerDetails","landlineNumber",e),onCancel:()=>oe("grievanceOfficerDetails","landlineNumber"),onError:e=>(0,g.handleGrievanceOfficerDetailsError)(de,n,"landlineNumber",e),errorFn:e=>(0,l.getGrievanceOfficerDetailsError)(de,"landlineNumber",e,T.fbt._("Incorrect landline phone number format",null,{hk:"4zXlsw"}),n)}),(0,D.jsx)(U,{value:null==de?void 0:de.email,maxLength:d.COMPLIANCE_INFO_LENGTH.EMAIL,placeholder:T.fbt._("Email Address",null,{hk:"3SvbLl"}),icon:"business-email",validate:e=>(0,l.existsGrievanceOfficerDetailsContact)(de,n,"email",e)&&(0,f.validateEmail)(e),onSave:e=>ae("grievanceOfficerDetails","email",e),onError:e=>{$("grievanceOfficerDetails.email"),(0,g.handleGrievanceOfficerDetailsError)(de,n,"email",e)},errorFn:e=>(0,l.getGrievanceOfficerDetailsError)(de,"email",e,T.fbt._("Incorrect email address format",null,{hk:"1KuwvT"}),n)})]}),null!=i&&null!=h?(0,D.jsx)(j.default,{disabled:!X,rootRef:fe.current,onClick:()=>(0,y.default)(h),children:T.fbt._("Next: Add Items",null,{hk:"4gxzId"})}):null]})})]})})}));function U(e){let{value:t="",maxLength:n,placeholder:a,icon:r,isLoading:i=!1,validate:l,errorFn:s,onChange:d,onSave:u,onCancel:c,onError:f,onFocus:p}=e;const[h,g]=(0,w.useState)(t),[v,C]=(0,w.useState)(),[y,_]=(0,w.useState)(i);return(0,w.useEffect)((()=>{g(t)}),[t]),(0,w.useEffect)((()=>{(null==l?void 0:l(h))&&C(null)}),[h,l,s]),(0,w.useEffect)((()=>{_(i)}),[i]),(0,D.jsx)(m.IconSection,{icon:r,theme:m.IconSectionTheme.NoMargin,content:(0,D.jsx)(x.TextInput,{value:h,editable:!0,maxLength:n,pending:y,inputPlaceholder:a,showRemaining:!0,managedError:!0,validate:l,error:v,onChange:g,onSave:(0,o.default)((function*(){_(!0);try{yield null==u?void 0:u(h)}catch(e){s&&C(s(h))}_(!1)})),onCancel:()=>{g(t),C(null),null==c||c()},onError:()=>{s&&C(s(h)),null==f||f(h)},theme:"text-input",onFocus:p,blockFocusOnLock:!!p,lockable:!0})})}function H(e,t,n){return{address:e,categories:[],hours:{days:[]},longitude:t,latitude:n}}function G(e){let{rawBusinessProfile:t,validate:n,onAfterSave:a,errorFn:i,onError:l}=e;const[s,d]=(0,w.useState)(),[u,c]=(0,w.useState)(null==t?void 0:t.address),[f,g]=(0,w.useState)(),{longitude:v,latitude:x}=t||{},[C,y]=(0,w.useState)(H(u,v,x));return(0,w.useEffect)((()=>y(H(u,v,x))),[u,v,x]),(0,w.useEffect)((()=>{n(u)&&g(null)}),[u,n]),null==t||null==C?null:(0,D.jsx)(m.IconSection,{icon:"business-address",theme:m.IconSectionTheme.NoMargin,content:(0,D.jsx)(h.BusinessAddressField,{businessProfile:C,activeField:s,rawBusinessProfile:t,value:u,validate:n,error:f,lowProfile:!1,onActive:d,onChange:c,onCancel:()=>{c(t.address)},onSaveBusinessProfile:(0,o.default)((function*(){yield(0,p.editBusinessProfile)({address:u}),yield a((0,r.default)((0,r.default)({},t),{},{address:u}))})),onError:()=>{i&&g(i(u)),null==l||l()}})})}},62643:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(851288),o=n(532528),i=n(781572),l=n(128298),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=T(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(n(939519)),d=n(511853),u=n(618085),c=n(288984),f=n(429623),p=n(812176),h=n(111054),m=a(n(23217)),g=a(n(832973)),v=a(n(60453)),x=a(n(69637)),C=n(994790),y=n(818878),_=a(n(699604)),b=n(548360),E=n(667294),S=a(n(156720)),j=a(n(895402)),k=n(785893);function T(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(T=function(e){return e?n:t})(e)}class w extends g.default{componentDidMount(){this.push((0,k.jsx)(A,{onBack:this.end}))}}t.default=w;const D={orderButton:{display:"p357zi0d",alignItems:"gndfcl4n",textAlign:"ljrqcn24",height:"b82nm36r",width:"ln8gz9je"},orderManagementDrawerBody:{backgroundColor:"ihvf49ua",overflowX:"i44ccddp",overflowY:"ag5g9lrv",height:"ppled2lx"},orderInfo:{borderBottom:"qmxv8cnq",flexGrow:"ggj6brxn",overflowX:"gfz4du6o",overflowY:"r7fjleex"},flexGrow:{flexGrow:"ggj6brxn"},orderSubDetails:{color:"re3l9645",fontSize:"f8jlpxt4",lineHeight:"jgi8eev7"},canceled:{color:"mvxzr2tb"},completed:{color:"jq3rn4u7"},infoRow:{color:"re3l9645",fontWeight:"hnx8ox4h",fontSize:"f8jlpxt4",lineHeight:"t4tp0euv"},orderStatusLabel:{fontWeight:"hnx8ox4h"},title:{color:"edisrohx",lineHeight:"a4ywakfo",fontSize:"enbbiyaj"},subTitle:{color:"re3l9645"},orderItemLabel:{whiteSpace:"le5p0ye3",overflowX:"gfz4du6o",overflowY:"r7fjleex",textOverflow:"lhj4utae"}},I=e=>{let{orderStatusInfo:t=(0,d.getDefaultOrderStatus)()}=e;const n=o.OrderStatusLabels[t];return(0,k.jsx)("span",{className:(0,S.default)(D.orderStatusLabel,D[String(t)]),children:n})},M=e=>{let{items:t=[]}=e;if(0===t.length)return null;const[n,...a]=t,r=String(b.fbt._({"*":"{number_of_items} items",_1:"1 item"},[b.fbt._plural(a.length,"number_of_items")],{hk:"4kR0HP"})),o=a.length>0?`${String(b.fbt._("and",null,{hk:"1nijDn"}))} ${1===a.length?a[0].name:r}`:"",i=`${n.name} ${o}`;return(0,k.jsx)("span",{title:i,className:(0,S.default)(D.orderItemLabel,D.flexGrow),children:i})},P=()=>(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{className:(0,S.default)(D.infoRow,l.uiPadding.horiz16,l.uiPadding.vert10),children:b.fbt._("History",null,{hk:"YpPUW"})}),(0,k.jsxs)(f.FlexColumn,{align:"center",xstyle:l.uiPadding.top9,children:[(0,k.jsx)(m.default,{name:"payment-history-empty"}),(0,k.jsx)("div",{className:(0,S.default)(D.subTitle,l.uiPadding.all16),children:b.fbt._("No order history",null,{hk:"38B6xg"})})]})]}),A=(0,E.forwardRef)((e=>{const t=(0,E.useRef)(null),{ordersInfoMap:{contactAndOrderInfoMap:n,orderStatusInfoMap:a},isLoading:r,ordersLazylist:o}=(0,u.useGetOrders)(t,65);return(0,k.jsxs)(v.default,{children:[(0,k.jsx)(C.DrawerHeader,{title:b.fbt._("Orders",null,{hk:"lWP2b"}),type:C.DRAWER_HEADER_TYPE.LARGE,onBack:e.onBack}),(0,k.jsxs)(x.default,{ref:t,className:(0,S.default)(D.orderManagementDrawerBody),children:[o.map(((e,t)=>(0,k.jsxs)(E.Fragment,{children:[(0,k.jsx)(R,{date:(0,y.getOrderDisplayDate)(n,o,t)}),(0,k.jsx)(O,{contactAndOrderInfo:n[e],orderStatusInfo:a[e]?a[e].status:(0,d.getDefaultOrderStatus)()})]},e))),r&&(0,k.jsx)(f.FlexRow,{justify:"center",xstyle:l.uiPadding.all16,children:(0,k.jsx)(h.Spinner,{color:"default",size:24,stroke:6})}),!r&&!o.length&&(0,k.jsx)(P,{})]})]})})),O=e=>{var t;let{contactAndOrderInfo:n,orderStatusInfo:a}=e;const o=(0,j.default)();return(0,k.jsxs)("button",{"data-testid":"order-management-order-button",onClick:()=>{const{interactiveMsg:e}=n;e&&(i.Cmd.openChatFromUnread(e.chat),(0,r.openOrderDetailDrawer)(e,o,_.default.FROM_BUSINESS_TOOLS))},className:(0,S.default)(D.orderButton),children:[(0,k.jsx)("div",{className:(0,S.default)(l.uiPadding.vert12,l.uiPadding.horiz16),children:(0,k.jsx)(c.DetailImage,{id:n.contact.id,size:40})}),(0,k.jsxs)("div",{className:(0,S.default)(D.orderInfo,l.uiPadding.vert10,l.uiPadding.end16),children:[(0,k.jsxs)(f.FlexRow,{xstyle:D.title,children:[(0,k.jsx)(p.Name,{titlify:!0,ellipsify:!0,className:(0,S.default)(D.flexGrow),contact:n.contact}),(0,k.jsx)("span",{children:s.formatAmount(n.orderInfo.currency,null!==(t=n.orderInfo.totalAmount)&&void 0!==t?t:0)})]}),(0,k.jsxs)(f.FlexRow,{xstyle:D.orderSubDetails,children:[(0,k.jsx)(M,{items:n.orderInfo.items}),(0,k.jsx)(I,{orderStatusInfo:a})]})]})]})},R=e=>{let{date:t=""}=e;return t&&(0,k.jsx)("div",{className:(0,S.default)(D.infoRow,l.uiPadding.horiz16,l.uiPadding.vert10),children:t.toUpperCase()})}},282554:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(81109)),o=a(n(348926)),i=n(892844),l=a(n(706996)),s=n(408139),d=n(914597),u=n(978820),c=a(n(471410)),f=n(745454),p=n(932107),h=a(n(677338)),m=a(n(880456)),g=a(n(332488)),v=a(n(203607)),x=a(n(7532)),C=n(277975),y=n(397567),_=a(n(54414)),b=n(919829),E=a(n(170107)),S=n(679188),j=a(n(754050)),k=n(11395),T=n(791695),w=a(n(277776)),D=a(n(832973)),I=a(n(767700)),M=a(n(452665)),P=n(427394),A=n(493581),O=n(794010),R=n(719380),L=a(n(699604)),N=a(n(661944)),F=n(548360),B=n(667294),U=n(785893);class H extends D.default{constructor(){var e;super(...arguments),e=this,this.scrollOffset=0,this.setScrollOffset=e=>{this.scrollOffset=e},this._handleCollectionSeeAll=e=>{const{catalogOwnerJid:t,chat:n,product:a,productInfo:r,sellerJid:o}=this.props,i=t||(null==a?void 0:a.catalogWid.toString())||(null==r?void 0:r.businessOwnerJid)||o;this.push((0,U.jsx)(G,{chat:n,catalogOwnerJid:i,collection:e,isAllItems:!e}))},this._pushProductDetails=(e,t)=>{const{chat:n,refreshCarousel:a}=this.props,r=(0,U.jsx)(E.default,{chat:n,product:e,onEnd:this._end,onBack:this._popAndUpdate,onProductDetail:this._handleProductDetail,onProductCatalog:this._handleProductCatalogHeaderClick,onProductLinkClick:this._handleProductLinkClick,onProductMoreInformation:this._handleProductMoreInformation,refreshCarousel:a,onCartClick:this._handleCartClick,collectionId:t});this.push(r)},this._pushProductMoreInformation=e=>{const t=(0,U.jsx)(w.default,{product:e,onBack:this._popAndUpdate});this.push(t)},this._pushProductDetailsWithDeepLink=e=>{const t=(0,U.jsx)(S.ProductDetailsWithDeepLink,{chat:this.props.chat,productInfo:e,onEnd:this._end,onBack:this._pop,onProductDetail:this._handleProductDetail,onProductCatalog:this._handleProductCatalogHeaderClick,onProductLinkClick:this._handleProductLinkClick,onProductMoreInformation:this._handleProductMoreInformation,onCartClick:this._handleCartClick});this.push(t)},this.pushProductCatalog=function(){var t=(0,o.default)((function*(t){const n=R.ContactCollection.gadd(t),a=yield A.BusinessProfileCollection.find(t),r=(0,O.hasCatalog)(a)&&(0,s.canViewCollections)()?(0,U.jsx)(_.default,{contact:n,onProductDetail:e._handleProductDetail,catalogId:t,onBack:e._pop,businessProfile:a,scrollOffset:e.scrollOffset,setScrollOffset:e.setScrollOffset,onCatalogLinkClick:e._handleCatalogLinkClick,onCartClick:e._handleCartClick,onCollectionSeeAll:e._handleCollectionSeeAll}):(0,U.jsx)(k.ProductListDrawer,{contact:n,onProductDetail:e._handleProductDetail,catalogId:t,onBack:e._pop,businessProfile:a,setScrollOffset:e.setScrollOffset,onCatalogLinkClick:e._handleCatalogLinkClick,onCartClick:e._handleCartClick});e.push(r)}));return function(){return t.apply(this,arguments)}}(),this._pushCartOrderDetail=(e,t,n,a,r,o,i)=>{const l=(0,U.jsx)(h.default,{orderId:e,token:t,sellerJid:n,userIsCartOwner:a,onProductDetail:this._handleProductDetailFromInfo,onOrderCreate:this._handleOrderCreate,onOrderCancel:this._handleOrderCancel,ownerHasReviewed:r,orderMessage:o,chat:i});this.push(l)},this._pushProductList=(e,t)=>{const n=R.ContactCollection.gadd(t),a=(0,U.jsx)(T.ProductMessageListDrawer,{contact:n,productListId:e,onProductDetail:this._handleProductDetail,onCartClick:this._handleCartClick,onBack:this._pop,onEnd:this._end,setScrollOffset:this.setScrollOffset});this.push(a)},this._handleProductSummaryClick=e=>{this._pushOrderDetailProductList(e)},this._handleOrderStatusUpdateClick=()=>{new c.default.OrderDetailsActionsSmb({orderDetailsCreationAction:c.default.ORDER_DETAILS_CREATION_ACTION.CLICK_UPDATE_ORDER_STATUS,actionCategory:String(N.default.ORDER_DETAILS_MANAGEMENT),orderDetailEntryPoint:String(this.props.entryPoint),hasCatalog:(0,O.hasCatalog)(A.BusinessProfileCollection.get((0,u.getMaybeMeUser)()))}).commit(),this._pushOrderStatusUpdate()},this._handleOrderCreate=e=>{new c.default.OrderDetailsActionsSmb({orderDetailsCreationAction:c.default.ORDER_DETAILS_CREATION_ACTION.CLICK_CREATE_ORDER_DETAILS_FROM_CART,actionCategory:String(N.default.RECEIVED_CART),orderDetailEntryPoint:String(L.default.FROM_CART),hasCatalog:(0,O.hasCatalog)(A.BusinessProfileCollection.get((0,u.getMaybeMeUser)()))}).commit(),this._pushOrderCreate(e)},this.cancelOrder=()=>{const{orderId:e,token:t,sellerJid:n,userIsCartOwner:a,orderMessage:r,chat:o}=this.props;null!=e&&null!=t&&null!=n&&null!=a&&this._pushCartOrderDetail(e,t,n,a,!0,r,o),d.ModalManager.close()},this._handleOrderCancel=()=>{d.ModalManager.open((0,U.jsx)(M.default,{onCancel:()=>{d.ModalManager.close()},cancelText:F.fbt._("Do not decline",null,{hk:"1GLBjf"}),onOK:this.cancelOrder,okText:F.fbt._("Decline",null,{hk:"thsKi"}),title:F.fbt._("Decline this order?",null,{hk:"2hlAzX"}),children:F.fbt._("You can include a note with the cancelation message.",null,{hk:"3M6G2k"})}))},this._handleProductDetail=(e,t)=>{this._pushProductDetails(e,t)},this._handleProductMoreInformation=e=>{this._pushProductMoreInformation(e)},this._handleProductDetailFromInfo=e=>{this._pushProductDetailsWithDeepLink(e)},this._handleProductCatalogHeaderClick=(e,t)=>{(0,C.logCarouselViewMoreClick)({catalogOwnerWid:e,catalogContext:t}),this.pushProductCatalog(e)},this._handleProductLinkClick=e=>{this.push((0,U.jsx)(j.default,{product:e,onBack:this._pop}))},this._handleCatalogLinkClick=(e,t)=>{this.push((0,U.jsx)(x.default,{catalog:e,contact:t,onBack:this._pop}))},this._handleCartClick=e=>{const t=(0,y.getProductCatalogContext)(this.props.context),n=(0,l.default)(e,this.props.chat,t);n&&this.push(n)},this._pop=()=>{this.pop()},this._end=()=>{this.end(!0)},this._popAndUpdate=()=>{this.popAndUpdate({scrollOffset:this.scrollOffset})}}componentDidMount(){const{catalogOwnerJid:e,orderId:t,product:n,productInfo:a,productListId:r,collection:o,collectionId:l,isAllItems:d,token:u,sellerJid:c,userIsCartOwner:h,orderMessage:m,chat:g,orderInfo:v}=this.props;if((0,s.commerceThreadsLoggingEnabled)()&&(0,p.addChatThreadLoggingActivities)([{activityType:"isCommerceViewed",ts:(0,i.unixTime)(),chatId:g.id}]),e)o||d?this.pushCollectionContent((0,f.createWid)(e)):null!=r?this._pushProductList(r,(0,f.createWid)(e)):this.pushProductCatalog((0,f.createWid)(e));else if(n)this._pushProductDetails(n,l);else if(a)this._pushProductDetailsWithDeepLink(a);else if(t)null!=u&&null!=c&&null!=h&&this._pushCartOrderDetail(t,u,c,h,!1,m,g);else{if(null==v||null==c)throw new Error("ProductDetailsFlow:no-product");this._pushOrderDetail(g,v,(0,f.createWid)(c))}}pushCollectionContent(e){const t=R.ContactCollection.gadd(e);this.push((0,U.jsx)(b.CollectionContentDrawer,{contact:t,onProductDetail:this._handleProductDetail,catalogId:e,onBack:this._pop,onCatalogLinkClick:this._handleCatalogLinkClick,onCartClick:this._handleCartClick,scrollOffset:this.scrollOffset,setScrollOffset:this.setScrollOffset,collection:this.props.collection}))}_pushOrderCreate(e){this.push((0,U.jsx)(I.default,{entryPoint:L.default.FROM_CART,onBack:this._pop,order:e,chat:this.props.chat}))}_pushOrderDetailProductList(e){this.push((0,U.jsx)(g.default,{onBack:this._pop,productItems:e}))}_pushOrderDetail(e,t,n){this.push((0,U.jsx)(m.default,{entryPoint:this.props.entryPoint,onBack:this._pop,orderInfo:t,sellerWid:n,chat:e,onProductSummaryClick:this._handleProductSummaryClick,onOrderStatusUpdateClick:this._handleOrderStatusUpdateClick}))}_pushOrderStatusUpdate(){const{orderInfo:e,sellerJid:t}=this.props;null!=e&&null!=t&&this.push((0,U.jsx)(v.default,{entryPoint:this.props.entryPoint,chat:this.props.chat,onBack:this._pop,orderInfo:e,sellerJid:t}))}}const G=(0,B.forwardRef)(((e,t)=>{const n=(0,B.useContext)(P.DrawerContext);return(0,U.jsx)(H,(0,r.default)({ref:t,context:n},e))}));var z=G;t.default=z},5620:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const[e,t]=(0,o.useFlow)(l.QuickRepliesList);if(null==t.step)return null;let n;switch(t.step){case l.QuickRepliesList:n=(0,i.jsx)(r.default,{onBack:()=>t.pop()})}return(0,i.jsx)(e,{flow:t,children:n})};var r=a(n(476439)),o=n(159083),i=n(785893);const l=n(76672).Mirrored(["QuickRepliesList"])},766123:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,h.useEffect)((()=>{i.Cmd.closeContextMenu(),i.Cmd.closeTooltip()}),[]);return(0,m.jsx)(c.SelectModal,{onConfirm:t=>{var n;(0,u.qplStartProductSendMessage)("Forward",void 0,t.length);const a=t.map(function(){var t=(0,r.default)((function*(t){return t.isUser&&t.contact.isBlocked()&&(yield(0,o.unblockContact)(t.contact)),(t=>{const{product:n}=e;return new Promise(((e,a)=>{i.Cmd.once("ui_idle",(()=>{t.sendProductMessage(n).then((()=>e())).catch((e=>a(e)))}))}))})(t)}));return function(){return t.apply(this,arguments)}}());(0,u.qplEndProductMessageSend)(Promise.all(a)),d.ModalManager.close(),1===t.length&&(i.Cmd.openChatFromUnread(t[0]),window.innerWidth<=s.LAYOUT_2COLUMNS_MAX_WIDTH&&l.DrawerManager.closeDrawerRight()),null===(n=e.onSend)||void 0===n||n.call(e)},maxItems:f.ServerProps.multicastLimitGlobal,title:p.fbt._("Send message to",null,{hk:"2kkuQs"}),listType:c.ListType.CHAT_SELECT_MODAL,onCancel:()=>{d.ModalManager.close()}})};var r=a(n(348926)),o=n(48826),i=n(781572),l=n(141455),s=n(941906),d=n(914597),u=n(424064),c=n(756728),f=n(964551),p=n(548360),h=n(667294),m=n(785893)},872357:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{communityMetadata:t}=e,n=(0,i.getCommunityAdminPromotionNuxKey)(t.id.toString()),[,,a]=(0,m.default)(n),[x,C]=(0,h.useFlow)(v.PromotionNotification,{pushTransition:"none",popTransition:"none"});if(null==C.step)return null;let y;switch(C.step){case v.PromotionNotification:y=(0,g.jsx)(d.default,{onDemote:()=>{C.push(v.Demote)},onContinue:()=>{a(),C.end()}});break;case v.Demote:const e=(0,l.isMeAccount)(t.owner),n=n=>{(0,f.logCadminDemoteEvent)(s.default.CADMIN_DEMOTE_ORIGIN_TYPE.PROMOTION_NOTIFICATION,n,1===t.participants.getAdmins().length||e)},i=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];n(e?s.default.CADMIN_DEMOTE_RESULT_TYPE.RETRY_CANCEL:s.default.CADMIN_DEMOTE_RESULT_TYPE.CANCEL),e?r.ModalManager.close():C.pop()},h=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];a();const l=t.participants.getMeParticipant(),d=p.ChatCollection.get(t.id);l&&d&&(l.contact.pendingAction++,(0,o.demoteCommunityParticipants)(d,[l]).then((()=>{n(e?s.default.CADMIN_DEMOTE_RESULT_TYPE.RETRY_SUCCESS:s.default.CADMIN_DEMOTE_RESULT_TYPE.SUCCESS)})).catch((t=>{__LOG__(3)`error sending demote community participants iq: ${t}`,n(e?s.default.CADMIN_DEMOTE_RESULT_TYPE.RETRY_FAILURE:s.default.CADMIN_DEMOTE_RESULT_TYPE.FAILURE),r.ModalManager.open((0,g.jsx)(c.CommunityAdminDemoteErrorPopup,{onParticipantDemote:()=>h(!0),onCancel:()=>i(!0),isMe:!0}))})).finally((()=>{l.contact.pendingAction--}))),e?r.ModalManager.close():C.end()};y=(0,g.jsx)(u.default,{onDemote:h,onCancel:i,onFailure:()=>{n(s.default.CADMIN_DEMOTE_RESULT_TYPE.FAILURE),C.pop()},isCommunityOwner:e})}return(0,g.jsx)(x,{flow:C,children:y})};var r=n(914597),o=n(815562),i=n(871579),l=n(978820),s=a(n(471410)),d=a(n(282059)),u=a(n(737297)),c=n(748935),f=n(671687),p=n(669951),h=n(159083),m=a(n(259732)),g=n(785893);const v=n(76672).Mirrored(["PromotionNotification","Demote"])},594070:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const n=(0,T.useRef)(!0),a=()=>{n.current&&(0,s.incrementCommunityTabEvent)(s.CommunityDailyTabMetricsType.NO_ACTION_TAB_VIEWS);const t=S.default.filter((e=>e.type===E.ActivityTypeType.NEW_COMMUNITY));S.default.remove(t),e.onBack?e.onBack():d.DrawerManager.closeDrawerLeft()},[A,O]=(0,D.useFlow)(P.COMMUNITY_TAB,{onEnd:a}),R=(0,w.default)(j.default,["add","remove","change"],(()=>j.default.filter((e=>!0===e.isParentGroup&&e.hasJoined())))),[L,N]=(0,T.useState)(null===(t=R[0])||void 0===t?void 0:t.id),[F,B]=(0,T.useState)([]),U=(0,I.default)(),H=(0,T.useRef)((0,c.default)());function G(){return(G=(0,r.default)((function*(e){const t=yield e;O.pop(),null==t||U.aborted||(0,u.findChat)(t).then((e=>{l.Cmd.openChatBottom(e).then((t=>{t&&h.ComposeBoxActions.focus(e)}))}))}))).apply(this,arguments)}if((0,T.useEffect)((()=>{(0,f.setCommunityTabLastSeenTimestamp)(i.Clock.globalUnixTime()),S.default.trigger("community_tab_view")}),[]),(0,T.useEffect)((()=>{(0,k.restoreUnjoinedSubgroups)(R.map((e=>e.id.toString())))}),[R]),null==O.step)return null;let z;switch(O.step){case P.COMMUNITY_TAB:z=(0,M.jsx)(_.default,{parentGroups:R,onBack:a,onNewCommunity:()=>{n.current=!1,O.push(P.NEW_COMMUNITY_FLOW),new p.default.CommunityCreation({communityCreationSessionId:H.current,communityCreationActionTaken:p.default.COMMUNITY_CREATION_ACTION_TAKEN_TYPE.ENTER,communityCreationCurrentScreen:p.default.COMMUNITY_CREATION_CURRENT_SCREEN_TYPE.COMMUNITIES_TAB}).commit()},onActivityCell:(e,t)=>{B(t),N(e),O.push(P.A_COMMUNITY_HOME)},onCommunityHome:e=>{n.current=!1,(0,s.incrementCommunityTabEvent)(s.CommunityDailyTabMetricsType.TAB_TO_HOME_VIEWS),(0,s.incrementCommunityHomeEvent)(e,s.CommunityDailyHomeMetricsType.HOME_VIEWS),N(e),O.push(P.A_COMMUNITY_HOME)}});break;case P.A_COMMUNITY_HOME:{const e=(0,o.default)(L,"selectedCommunity");z=(0,M.jsx)(y.CommunityHome,{jid:e,callbacks:{onBack:()=>{B([]),O.pop()},onManageCommunityGroupsClick:()=>O.push(P.MANAGE_GROUPS_FLOW),onInviteMembersClick:()=>O.push(P.INVITE_MEMBERS_FLOW),onAddNewGroupClick:()=>O.push(P.NEW_GROUP_FLOW),onDeactivateCommunity:()=>O.push(P.DEACTIVATE_COMMUNITY_FLOW)},highlightedSubgroups:F});break}case P.NEW_COMMUNITY_FLOW:z=(0,M.jsx)(x.NewCommunityFlowLoadable,{onBack:()=>O.pop(),loggingSessionId:H.current});break;case P.DEACTIVATE_COMMUNITY_FLOW:{const e=(0,o.default)(L,"selectedCommunity"),t=b.ChatCollection.assertGet(e);z=(0,M.jsx)(m.DeactivateCommunityDrawerLoadable,{onBack:()=>O.pop(),chat:t});break}case P.MANAGE_GROUPS_FLOW:{const e=(0,o.default)(L,"selectedCommunity"),t=j.default.assertGet(e);z=(0,M.jsx)(v.ManageCommunityGroupsFlowLoadable,{parentGroupMetadata:t,onBack:()=>O.pop()});break}case P.INVITE_MEMBERS_FLOW:{const e=(0,o.default)(L,"selectedCommunity"),t=b.ChatCollection.assertGet(e);z=(0,M.jsx)(g.GroupInviteLinkDrawerLoadable,{chat:t,groupMetadata:t.groupMetadata,onBack:()=>O.pop(),useLargeHeader:!0});break}case P.NEW_GROUP_FLOW:{const e=(0,o.default)(L,"selectedCommunity");z=(0,M.jsx)(C.NewGroupFlowLoadable,{onCreateGroup:function(){return G.apply(this,arguments)},parentGroupWid:e,onEnd:()=>O.pop()});break}}return(0,M.jsx)(A,{flow:O,children:z})};var r=a(n(348926)),o=a(n(145095)),i=n(40234),l=n(781572),s=n(257507),d=n(141455),u=n(211739),c=a(n(265597)),f=n(711597),p=a(n(471410)),h=n(188172),m=n(945744),g=n(388280),v=n(194205),x=n(223620),C=n(26489),y=n(704903),_=a(n(89309)),b=n(669951),E=n(883508),S=a(n(600709)),j=a(n(963928)),k=n(736163),T=n(667294),w=a(n(196570)),D=n(159083),I=a(n(803409)),M=n(785893);const P=n(76672).Mirrored(["COMMUNITY_TAB","A_COMMUNITY_HOME","NEW_COMMUNITY_FLOW","MANAGE_GROUPS_FLOW","INVITE_MEMBERS_FLOW","NEW_GROUP_FLOW","DEACTIVATE_COMMUNITY_FLOW"])},387971:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(832973)),o=n(967455),i=a(n(467873)),l=n(785893);class s extends r.default{constructor(){super(...arguments),this._handleProductClick=e=>{this.push((0,l.jsx)(o.ProductDetailsFlowLoadable,{refreshCarousel:!0,chat:this.props.msg.chat,product:e,onEnd:this._pop}))},this._pop=()=>{this.pop()}}componentDidMount(){this.push((0,l.jsx)(i.default,{msg:this.props.msg,onProductClick:this._handleProductClick}))}}t.default=s},553135:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const[t,n]=(0,p.useState)(null),a=(0,p.useRef)(null),g=(0,p.useRef)(),[v,C]=(0,h.useFlow)(x.Capture),y=()=>{var e;null===(e=g.current)||void 0===e||e.call(g);const{asyncStream:t,disposeStream:n}=s.start("camera",(()=>C.push(x.Guide,"modal")));g.current=n,t.then((e=>{a.current||C.pop("modal"),e&&a.current&&a.current.loadNewStream(e,n)})).catch((0,r.filteredCatch)(i.GUM.NotAllowedError,(()=>{C.end(),l.ModalManager.open((0,m.jsx)(c.GuidePopup,{messaging:c.Messaging.CAMERA_FAIL,type:c.TYPE.GUIDE_UNBLOCK}))}))).catch((0,r.filteredCatch)(i.GUM.GUMError,(()=>{C.end(),l.ModalManager.open((0,m.jsx)(c.GuidePopup,{messaging:c.Messaging.CAMERA_MISSING,type:c.TYPE.GUIDE_NONE}))})))};if((0,p.useEffect)((()=>(y(),()=>{var e;null===(e=g.current)||void 0===e||e.call(g)})),[]),null==C.step)return null;let _;switch(C.step){case x.Capture:_=(0,m.jsx)(f.Modal,{type:e.modalTheme||f.ModalTheme.Box,children:(0,m.jsx)(d.default,{ref:a,stream:void 0,disposeStream:void 0,caption:!1,theme:"capture-cover",onBack:()=>C.end(),onSend:null,onCaptured:e=>{n(e),C.push(x.EditImage,"flow-transition-box-size-drawer-push")},chat:void 0})});break;case x.Guide:_=(0,m.jsx)(c.GuidePopup,{messaging:c.Messaging.CAMERA,type:c.TYPE.GUIDE_ALLOW,onConfirm:()=>C.pop("modal")});break;case x.EditImage:_=(0,m.jsx)(f.Modal,{type:e.modalTheme||f.ModalTheme.Box,children:(0,m.jsx)(u.EditImageDrawer,{onRetake:()=>{C.pop("flow-transition-box-size-drawer-pop"),y()},retryText:u.RETRY_OPTIONS.RETAKE,onFinished:(t,n)=>{e.onFinished(t,n),C.end()},onCancel:()=>C.end(),img:(0,o.default)(t,"blob"),cropShape:e.editCropShape})})}return(0,m.jsx)(v,{flow:C,children:_})};var r=n(450796),o=a(n(145095)),i=v(n(435232)),l=n(914597),s=v(n(161849)),d=a(n(137409)),u=n(350025),c=(n(329958),n(818671)),f=n(857224),p=n(667294),h=n(159083),m=n(785893);function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function v(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}const x=n(76672).Mirrored(["Capture","Guide","EditImage"])},585916:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(832973)),o=n(967455),i=a(n(721024)),l=n(785893);class s extends r.default{constructor(){super(...arguments),this._handleProductClick=e=>{this.push((0,l.jsx)(o.ProductDetailsFlowLoadable,{refreshCarousel:!0,chat:this.props.msg.chat,product:e,onEnd:this._pop}))},this._pop=()=>{this.pop()}}componentDidMount(){this.push((0,l.jsx)(i.default,{msg:this.props.msg,onProductClick:this._handleProductClick}))}}t.default=s},7335:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(348926)),o=n(254907),i=n(211739),l=a(n(568064)),s=n(914597),d=n(20551),u=n(694816),c=a(n(488793)),f=n(812176),p=n(950452),h=a(n(832973)),m=a(n(452665)),g=a(n(772696)),v=a(n(963928)),x=n(548360),C=n(785893);class y extends h.default{constructor(){var e;super(...arguments),e=this,this._handleSendInvite=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;s.ModalManager.close(),Promise.all(e.props.participantNeedInvite.map(function(){var a=(0,r.default)((function*(a){const{contact:r,invite_code:l,invite_code_exp:s}=a,u=yield(0,i.findChat)(r.id),c=e.props.groupGid.toString(),f=v.default.assertGet(c);return(yield(0,o.sendGroupInviteMessage)(u,c,e.props.subject,l||"",s,t,n))===d.SendMsgResult.OK&&(f.pendingParticipants.add({id:r.id}),!0)}));return function(){return a.apply(this,arguments)}}())).then((e=>{const t=e.filter(Boolean).length;u.ToastManager.open((0,C.jsx)(p.Toast,{msg:l.default.t(765,{num:t,_plural:t}),id:(0,p.genId)()}))}))},this._addInviteCommment=e=>{this.push((0,C.jsx)(g.default,{participants:e,gid:this.props.groupGid,subject:this.props.subject,groupDesc:this.props.groupDesc,onClose:this._pop,onSend:this._handleSendInvite}))},this._pop=()=>{this.pop()}}componentDidMount(){const{participantNeedInvite:e}=this.props,t=this._getFormattedNames(e.map((e=>e.contact)),!0),n=l.default.t(359,{participant:t,_plural:e.length});this.push((0,C.jsx)(m.default,{onOK:this._addInviteCommment.bind(this,e),okText:x.fbt._("Invite to group",null,{hk:"FbMSO"}),onCancel:this._pop,cancelText:x.fbt._("Cancel",null,{hk:"H0gNq"}),children:n}))}_getFormattedName(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?e.formattedUser:(0,C.jsx)(f.Name,{contact:e})}_getFormattedNames(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!Array.isArray(e))return this._getFormattedName(e,t);const n=e.map((e=>this._getFormattedName(e,t)));return(0,c.default)(n,t)}}t.default=y,y.defaultProps={removeTopDrawer:!0,pushTransition:"none",popTransition:"none"}},589936:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const[t,n]=(0,l.useFlow)(d.ImageSearch),[a,u]=(0,i.useState)(),[c,f]=(0,i.useState)();if(null==n.step)return null;let p;switch(n.step){case d.ImageSearch:p=(0,s.jsx)(o.default,{onCancel:()=>n.pop(),onImageSelected:(e,t)=>{u(e),f(t),n.push(d.ImageEdit)}});break;case d.ImageEdit:a&&null!=c&&(p=(0,s.jsx)(r.EditImageDrawer,{onCancel:()=>n.end(),attributionUrl:c,onFinished:(t,a)=>{e.onFinished(t,a),n.end()},onRetake:()=>n.pop(),retryText:r.RETRY_OPTIONS.NONE,img:a}))}return(0,s.jsx)(t,{flow:n,children:p})};var r=n(350025),o=a(n(290312)),i=n(667294),l=n(159083),s=n(785893);const d=n(76672).Mirrored(["ImageSearch","ImageEdit"])},424064:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.qplEndProductMessageSend=function(e){const t=r.QuickLogMarkerId.WHATSAPP_PRODUCT_MESSAGE_SEND;e.then((()=>{o.QPL.markerEnd(t,a.QuickLogActionType.SUCCESS)})).catch((()=>{o.QPL.markerEnd(t,a.QuickLogActionType.FAIL)}))},t.qplStartProductSendMessage=function(e,t,n){const a=r.QuickLogMarkerId.WHATSAPP_PRODUCT_MESSAGE_SEND;o.QPL.markerStart(a,{annotations:{string:{EntryPoint:e}}}),void 0!==t&&o.QPL.markerAnnotate(a,{int:{ProductCount:t}}),void 0!==n&&o.QPL.markerAnnotate(a,{int:{ContactCount:n}})};var a=n(451897),r=n(665397),o=n(669393)},137926:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(348926)),o=n(781572),i=n(141455),l=n(211739),s=a(n(338723)),d=a(n(471410)),u=n(793249),c=n(188172),f=n(26489),p=a(n(182187)),h=a(n(868122)),m=a(n(943626)),g=n(667294),v=a(n(616031)),x=n(159083),C=a(n(803409)),y=n(785893);const _=n(76672).Mirrored(["GROUPS_MANAGER","NEW_GROUP","EXISTING_GROUP"]);function b(e,t){const{joinedSubgroups:n,unjoinedSubgroups:a,subgroupCount:b}=(0,m.default)(e.parentGroupMetadata),E=(0,C.default)(),S=(0,g.useRef)(null);(0,g.useImperativeHandle)(t,(()=>({getElement:()=>{var e;return null===(e=S.current)||void 0===e?void 0:e.getNode()}})));const j=(0,v.default)((()=>{e.onBack?e.onBack():i.DrawerManager.closeDrawerRight()})),[k,T]=(0,x.useFlow)(_.GROUPS_MANAGER,{onEnd:j});function w(){return(w=(0,r.default)((function*(e){const t=yield e;T.pop(),null==t||E.aborted||(0,l.findChat)(t).then((e=>{o.Cmd.openChatBottom(e).then((t=>{t&&c.ComposeBoxActions.focus(e)}))}))}))).apply(this,arguments)}if(null==T.step)return null;let D;switch(T.step){case _.GROUPS_MANAGER:D=(0,y.jsx)(h.default,{joinedSubgroups:n,unjoinedSubgroups:a,currentSubgroupCount:b,onBack:j,onNewGroupFlow:()=>T.push(_.NEW_GROUP),onExistingGroupFlow:()=>T.push(_.EXISTING_GROUP),parentId:e.parentGroupMetadata.id});break;case _.NEW_GROUP:D=(0,y.jsx)(f.NewGroupFlowLoadable,{onCreateGroup:function(){return w.apply(this,arguments)},onEnd:()=>T.pop(),parentGroupWid:e.parentGroupMetadata.id});break;case _.EXISTING_GROUP:D=(0,y.jsx)(p.default,{onBack:()=>T.pop(),onSubmit:function(t){const r=new Set([...a,...n]),o=t.filter((e=>!r.has(e.id)));if(o.length){const t=new d.default.UiAction({uiActionType:d.default.UI_ACTION_TYPE.COMMUNITY_LINK,uiActionPreloaded:!1});(0,s.default)(e.parentGroupMetadata.id,o.map((e=>e.id))).then((()=>{t.markUiActionT(),t.commit(),(0,u.logUiActionShadowPrivateStatsTestEvents)()}))}T.pop()},onCreateNewGroup:()=>T.push(_.NEW_GROUP),currentSubgroupCount:b})}return(0,y.jsx)(k,{flow:T,ref:S,children:D})}var E=(0,g.forwardRef)(b);t.default=E},503884:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{onEnd:t}=e;p.ContactCollection.ensureSorted();const[n,a]=(0,g.useFlow)(x.ContactDrawer,{onEnd:t}),[C,y]=(0,m.useState)([]),[_,b]=(0,m.useState)(""),E=(e,t)=>{(0,i.findChat)(t.id).then(r.Cmd.openChatFromUnread.bind(r.Cmd)),a.end()},S=()=>{a.push(x.NewGroupParticipantsDrawer)},j=()=>{const e=(0,l.default)();b(e),a.push(x.NewCommunityFlow),new s.default.CommunityCreation({communityCreationSessionId:_,communityCreationActionTaken:s.default.COMMUNITY_CREATION_ACTION_TAKEN_TYPE.ENTER,communityCreationCurrentScreen:s.default.COMMUNITY_CREATION_CURRENT_SCREEN_TYPE.CHATS_TAB}).commit()},k=(e,t,n,r,i)=>{(0,o.createGroup)(e,t,n,null!=i?i:[],r),a.end()},T=e=>{y(e),a.push(x.NewGroupDrawer)};if(null==a.step)return null;let w=null;switch(a.step){case x.ContactDrawer:w=(0,v.jsx)(u.default,{title:h.fbt._("New chat",null,{hk:"36lSV2"}),onBack:a.end,onClick:E,onNewGroup:S,onNewCommunity:j});break;case x.NewGroupParticipantsDrawer:w=(0,v.jsx)(f.default,{participants:C,onBack:a.pop,onContinue:T});break;case x.NewCommunityFlow:w=(0,v.jsx)(d.NewCommunityFlowLoadable,{onBack:a.pop,loggingSessionId:_});break;case x.NewGroupDrawer:w=(0,v.jsx)(c.default,{participants:C,onBack:()=>a.pop(),onSubmit:k})}return(0,v.jsx)(n,{flow:a,children:w})};var r=n(781572),o=n(833601),i=n(211739),l=a(n(265597)),s=a(n(471410)),d=n(223620),u=a(n(881411)),c=a(n(987679)),f=a(n(785201)),p=n(719380),h=n(548360),m=n(667294),g=n(159083),v=n(785893);const x=n(76672).Mirrored(["ContactDrawer","NewGroupParticipantsDrawer","NewCommunityFlow","NewGroupDrawer"])},381971:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(348926)),o=n(787614),i=a(n(145095)),l=n(781572),s=a(n(275866)),d=n(141455),u=n(795720),c=n(871579),f=a(n(471410)),p=n(793249),h=a(n(182187)),m=a(n(330730)),g=a(n(863232)),v=a(n(198600)),x=a(n(987679)),C=n(669951),y=a(n(963928)),_=n(667294),b=a(n(616031)),E=n(159083),S=a(n(259732)),j=n(785893);const k=n(76672).Mirrored(["Info","GroupsManager","NewGroup","ExistingGroup"]);function T(e){const[t,n]=(0,_.useState)(""),[a,T]=(0,_.useState)(),[w,D]=(0,_.useState)(),[I,M]=(0,S.default)(c.NUX.COMMUNITY),P=(0,_.useRef)(!1),[A,O]=(0,_.useState)([]),[R,L]=(0,_.useState)([]),N=(0,b.default)((()=>{U(),I?new f.default.CommunityCreation({communityCreationSessionId:e.loggingSessionId,communityCreationActionTaken:f.default.COMMUNITY_CREATION_ACTION_TAKEN_TYPE.DISMISS,communityCreationCurrentScreen:f.default.COMMUNITY_CREATION_CURRENT_SCREEN_TYPE.COMMUNITY_NUX}).commit():!1===P.current&&new f.default.CommunityCreation({communityCreationSessionId:e.loggingSessionId,communityCreationActionTaken:f.default.COMMUNITY_CREATION_ACTION_TAKEN_TYPE.EXIT,communityCreationCurrentScreen:f.default.COMMUNITY_CREATION_CURRENT_SCREEN_TYPE.COMMUNITY_INFO}).commit(),e.onBack?e.onBack():!1===P.current&&d.DrawerManager.closeDrawerLeft()})),[F,B]=(0,E.useFlow)(k.Info,{onEnd:N}),U=()=>{const t=(n=B.step,I?f.default.COMMUNITY_CREATION_CURRENT_SCREEN_TYPE.COMMUNITY_NUX:n===k.Info?f.default.COMMUNITY_CREATION_CURRENT_SCREEN_TYPE.COMMUNITY_INFO:f.default.COMMUNITY_CREATION_CURRENT_SCREEN_TYPE.COMMUNITY_GROUPS_SUMMARY);var n;R.length&&new f.default.CommunityCreation({communityCreationActionTaken:f.default.COMMUNITY_CREATION_ACTION_TAKEN_TYPE.CREATE_GROUP,communityCreationActionCount:R.length,communityCreationSessionId:e.loggingSessionId,communityCreationCurrentScreen:t}).commit(),A.length&&new f.default.CommunityCreation({communityCreationActionTaken:f.default.COMMUNITY_CREATION_ACTION_TAKEN_TYPE.LINK_GROUP,communityCreationActionCount:A.length,communityCreationSessionId:e.loggingSessionId,communityCreationCurrentScreen:t}).commit()};if(I)return(0,j.jsx)(m.default,{onContinue:()=>{new f.default.CommunityCreation({communityCreationSessionId:e.loggingSessionId,communityCreationActionTaken:f.default.COMMUNITY_CREATION_ACTION_TAKEN_TYPE.GET_STARTED,communityCreationCurrentScreen:f.default.COMMUNITY_CREATION_CURRENT_SCREEN_TYPE.COMMUNITY_NUX}).commit(),M()},onBack:N});function H(){return(H=(0,r.default)((function*(){const n=new f.default.UiAction({uiActionType:f.default.UI_ACTION_TYPE.COMMUNITY_CREATE,uiActionPreloaded:!1}),r=yield(0,s.default)({name:t,desc:a,icon:w,existingGroups:A,newGroups:R});P.current=!0,n.markUiActionT(),n.commit(),(0,p.logUiActionShadowPrivateStatsTestEvents)(),null!=r&&l.Cmd.openCommunityHome(r),yield new f.default.CommunityCreation({communityCreationActionTaken:f.default.COMMUNITY_CREATION_ACTION_TAKEN_TYPE.CREATE_COMMUNITY,communityCreationSessionId:e.loggingSessionId,communityCreationCurrentScreen:f.default.COMMUNITY_CREATION_CURRENT_SCREEN_TYPE.COMMUNITY_GROUPS_SUMMARY}).commit()}))).apply(this,arguments)}if(null==B.step)return null;let G=null;switch(B.step){case k.Info:G=(0,j.jsx)(v.default,{name:t,description:a,imgBlob:w,onBack:N,onContinue:(t,a,r)=>{n(t),T(a),D(r),B.push(k.GroupsManager),new f.default.CommunityCreation({communityCreationActionTaken:f.default.COMMUNITY_CREATION_ACTION_TAKEN_TYPE.NEXT,communityCreationCurrentScreen:f.default.COMMUNITY_CREATION_CURRENT_SCREEN_TYPE.COMMUNITY_INFO,communityCreationSessionId:e.loggingSessionId}).commit()}});break;case k.GroupsManager:G=(0,j.jsx)(g.default,{name:t,description:a,imgBlob:w,onBack:()=>B.pop(),onNewGroupFlow:()=>B.push(k.NewGroup),onExistingGroupFlow:()=>B.push(k.ExistingGroup),onRemoveGroup:function(e){const t=R.filter((t=>t.tempId!==e)),n=A.filter((t=>t.id.toString()!==e));R.length!==t&&L(t),A.length!==n&&O(n)},onCreateCommunity:function(){return H.apply(this,arguments)},groups:[...A,...R]});break;case k.NewGroup:G=(0,j.jsx)(x.default,{onBack:()=>B.pop(),onSubmit:function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const r=(0,o.randomHex)(8);L((t=>[{tempId:r,subject:e,icon:n,ephemeralDuration:a},...t])),B.pop()},communityName:t});break;case k.ExistingGroup:const r=new Set(A.filter((e=>{let{id:t}=e;const n=y.default.get(t.toString());return(null==n?void 0:n.groupType)!==u.GroupType.DEFAULT_ANNOUNCEMENT_GROUP})).map((e=>{let{id:t}=e;return t})));G=(0,j.jsx)(h.default,{onBack:()=>B.pop(),onSubmit:function(e){const t=e.map((e=>{var t;const n=(0,i.default)(C.ChatCollection.get(e.id.toString()),"ChatCollection.get(contact.id.toString())");return{id:e.id,subject:n.title(),participants:null===(t=n.groupMetadata)||void 0===t?void 0:t.participants,contact:e}}));O([...A,...t]),B.pop()},addedExistingGroups:r,currentSubgroupCount:A.length+R.length+1,onCreateNewGroup:()=>B.push(k.NewGroup),isCommunityCreation:!0})}return(0,j.jsx)(F,{flow:B,children:G})}var w=(0,_.forwardRef)(T);t.default=w},566960:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(833601),o=a(n(987679)),i=a(n(785201)),l=n(669951),s=n(719380),d=n(667294),u=n(159083),c=n(785893);const f=n(76672).Mirrored(["ADD_PARTICIPANTS_DRAWER","SET_GROUP_INFO_DRAWER"]);var p=(0,d.forwardRef)((e=>{var t;const{parentGroupWid:n}=e,[a,p]=(0,u.useFlow)(f.ADD_PARTICIPANTS_DRAWER,{onEnd:e.onEnd}),[h,m]=(0,d.useState)([]);(0,d.useEffect)((()=>{s.ContactCollection.ensureSorted()}),[]);const g=function(t,a,o,i){let l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];const s=(0,r.createGroup)(t,a,o,l,i,n);e.onCreateGroup&&e.onCreateGroup(s)},v=e=>{m(e),p.push(f.SET_GROUP_INFO_DRAWER)};if(null==p.step)return null;let x;switch(p.step){case f.SET_GROUP_INFO_DRAWER:const e=n?null===(t=l.ChatCollection.get(n.toString()))||void 0===t?void 0:t.formattedTitle:null;x=(0,c.jsx)(o.default,{participants:h,onBack:()=>p.pop(),onSubmit:g,communityName:e});break;case f.ADD_PARTICIPANTS_DRAWER:x=(0,c.jsx)(i.default,{onBack:()=>p.pop(),onContinue:v,participants:h})}return(0,c.jsx)(a,{flow:p,children:x})}));t.default=p},489495:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n;const{chat:a}=e,u=(0,r.default)(null===(t=a.groupMetadata)||void 0===t?void 0:t.groupInviteLink,"chat.groupMetadata?.groupInviteLink"),c=(null===(n=a.groupMetadata)||void 0===n?void 0:n.groupType)===o.GroupType.COMMUNITY?`${s.fbt._("Follow this link to join my WhatsApp community:",null,{hk:"1ezDlv"}).toString()} ${u}`:`${s.fbt._("Follow this link to join my WhatsApp group:",null,{hk:"4FZHrC"}).toString()} ${u}`;return(0,d.jsx)(l.default,{title:i.default.t(341),text:c})};var r=a(n(145095)),o=n(795720),i=a(n(568064)),l=a(n(24158)),s=n(548360),d=n(785893)},277248:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{initialStep:t=s.SettingsSteps.Settings,onEnd:n}=e,[a,K]=(0,W.useFlow)(t,{onEnd:n}),[X,Q]=(0,q.useState)(null),J=(0,V.useModelValues)((0,B.getHistorySyncProgress)(),["inProgress","paused","progress"]);if(null==K.step)return null;const $=()=>{K.pop()};let Z;switch(K.step){case s.SettingsSteps.Settings:const e=[function(){const e=J.progress;if(!J.inProgress)return null;if(J.paused)return{testid:"li-history-sync-paused",children:(0,i.SYNCING_PAUSED_GLOBAL_SETTINGS_TITLE)(),secondaryChildren:(0,i.SYNCING_PAUSED_GLOBAL_SETTINGS_SUBTITLE)(),onClick:()=>{l.ModalManager.open((0,Y.jsx)(D.default,{}))},icon:(0,Y.jsx)(f.default,{name:"alert-sync-paused",width:24,height:24}),key:"historySyncProgress"};return{testid:"li-history-sync-in-progress",children:(0,i.SYNCING_OLDER_MESSAGES_SETTINGS_TITLE)(),secondaryChildren:null==e?null:(0,i.SYNCING_OLDER_MESSAGES_SETTINGS_PERCENT_COMPLETE)(e),icon:(0,Y.jsx)(f.default,{name:"sync-in-progress"}),key:"historySyncProgress",onClick:()=>{l.ModalManager.open((0,Y.jsx)(w.default,{}))}}}(),{testid:"li-notifications",children:(0,s.getLabel)(s.SettingsSteps.Notifications),key:s.SettingsSteps.Notifications,icon:(0,Y.jsx)(c.SettingsIcon,{setting:s.SettingsSteps.Notifications}),onClick:()=>{K.push(s.SettingsSteps.Notifications)}},(0,s.isSettingAvailable)(s.SettingsSteps.PrivacySettings)?{children:(0,s.getLabel)(s.SettingsSteps.PrivacySettings),icon:(0,Y.jsx)(c.SettingsIcon,{setting:s.SettingsSteps.PrivacySettings}),key:s.SettingsSteps.PrivacySettings,onClick:()=>{K.push(s.SettingsSteps.PrivacySettings)},testid:"settings-drawer-item-privacy"}:null,(0,s.isSettingAvailable)(s.SettingsSteps.Security)?{testid:"li-security",children:(0,s.getLabel)(s.SettingsSteps.Security),icon:(0,Y.jsx)(c.SettingsIcon,{setting:s.SettingsSteps.Security}),key:s.SettingsSteps.Security,onClick:()=>{K.push(s.SettingsSteps.Security)}}:null,(0,s.isSettingAvailable)(s.SettingsSteps.TwoFactorAuthentication)?{testid:"li-two-factor",children:(0,s.getLabel)(s.SettingsSteps.TwoFactorAuthentication),icon:(0,Y.jsx)(c.SettingsIcon,{setting:s.SettingsSteps.TwoFactorAuthentication}),key:s.SettingsSteps.TwoFactorAuthentication,onClick:()=>{K.push(s.SettingsSteps.TwoFactorAuthentication)}}:null,{children:z.fbt._("Theme",null,{hk:"4zgi0L"}),icon:(0,Y.jsx)(f.default,{name:"settings-theme"}),key:"ThemePopup",onClick:()=>{l.ModalManager.open((0,Y.jsx)(I.default,{}))}},{children:(0,s.getLabel)(s.SettingsSteps.Wallpaper),icon:(0,Y.jsx)(c.SettingsIcon,{setting:s.SettingsSteps.Wallpaper}),key:s.SettingsSteps.Wallpaper,onClick:()=>{K.push(s.SettingsSteps.Wallpaper)}},(0,s.isSettingAvailable)(s.SettingsSteps.ArchiveSettings)?{children:(0,s.getLabel)(s.SettingsSteps.ArchiveSettings),icon:(0,Y.jsx)(c.SettingsIcon,{setting:s.SettingsSteps.ArchiveSettings}),key:s.SettingsSteps.ArchiveSettings,onClick:()=>{K.push(s.SettingsSteps.ArchiveSettings)}}:null,(0,s.isSettingAvailable)(s.SettingsSteps.Blocked)?null:{testid:"li-blocked",children:(0,s.getLabel)(s.SettingsSteps.Blocked),icon:(0,Y.jsx)(c.SettingsIcon,{setting:s.SettingsSteps.Blocked}),key:s.SettingsSteps.Blocked,onClick:()=>{K.push(s.SettingsSteps.Blocked)}},(0,s.isSettingAvailable)(s.SettingsSteps.MediaAutoDownload)?{testid:"li-media-auto-download",children:(0,s.getLabel)(s.SettingsSteps.MediaAutoDownload),icon:(0,Y.jsx)(c.SettingsIcon,{setting:s.SettingsSteps.MediaAutoDownload}),key:s.SettingsSteps.MediaAutoDownload,onClick:()=>{K.push(s.SettingsSteps.MediaAutoDownload)}}:null,{children:(0,s.getLabel)(s.SettingsSteps.RequestAccountInfoSettings),icon:(0,Y.jsx)(c.SettingsIcon,{setting:s.SettingsSteps.RequestAccountInfoSettings}),key:s.SettingsSteps.RequestAccountInfoSettings,onClick:()=>{K.push(s.SettingsSteps.RequestAccountInfoSettings)}},(0,s.isSettingAvailable)(s.SettingsSteps.DesktopSettings)?{testid:"li-desktop",children:(0,s.getLabel)(s.SettingsSteps.DesktopSettings),icon:(0,Y.jsx)(f.default,{name:"settings-desktop"}),key:s.SettingsSteps.DesktopSettings,onClick:()=>{}}:null,{testid:"li-keyboard-shortcuts",children:z.fbt._("Keyboard shortcuts",null,{hk:"1uFFXP"}),icon:(0,Y.jsx)(f.default,{name:"settings-keyboard"}),key:"KeyboardShortcuts",onClick:()=>{l.ModalManager.open((0,Y.jsx)(C.KeyboardShortcutsPopup,{}))}},{testid:"li-help",children:(0,s.getLabel)(s.SettingsSteps.Help),icon:(0,Y.jsx)(c.SettingsIcon,{setting:s.SettingsSteps.Help}),key:s.SettingsSteps.Help,onClick:()=>{o.upload({reason:"help-page-opened",isHighPri:!0}),K.push(s.SettingsSteps.Help)}},(0,s.isSettingAvailable)(s.SettingsSteps.Developer)?{testid:"li-developer",children:(0,s.getLabel)(s.SettingsSteps.Developer),icon:(0,Y.jsx)(c.SettingsIcon,{setting:s.SettingsSteps.Developer}),key:s.SettingsSteps.Developer,onClick:()=>K.push(s.SettingsSteps.Developer)}:null].filter(Boolean);Z=(0,Y.jsx)(T.default,{items:e,profileId:(0,d.getMaybeMeUser)(),onProfile:()=>{K.push(s.SettingsSteps.Profile)},onClose:$});break;case s.SettingsSteps.Wallpaper:Z=(0,Y.jsx)(L.default,{onClose:$});break;case s.SettingsSteps.ArchiveSettings:Z=(0,Y.jsx)(h.default,{settings:H.default,onClose:$});break;case s.SettingsSteps.RequestAccountInfoSettings:Z=(0,Y.jsx)(v.default,{settings:H.default,onClose:$});break;case s.SettingsSteps.Blocked:Z=(0,Y.jsx)(m.default,{onClose:$});break;case s.SettingsSteps.Profile:const t=(0,d.getMaybeMeUser)(),n=G.StatusCollection.assertGet(t),a=U.ProfilePicThumbCollection.assertGet(t),B=F.ContactCollection.assertGet(t);Z=(0,Y.jsx)(p.ProfileDrawerFlowLoadable,{status:n,profilePicThumb:a,contact:B,conn:N.Conn,onClose:$});break;case s.SettingsSteps.Notifications:Z=(0,Y.jsx)(_.default,{onClose:$});break;case s.SettingsSteps.TwoFactorAuthentication:Z=(0,Y.jsx)(M.default,{onClose:$,onOpenUpdateEmailDrawer:()=>{K.push(s.SettingsSteps.TwoFactorUpdateEmail)},onOpenUpdatePinDrawer:()=>{K.push(s.SettingsSteps.TwoFactorUpdatePin)},onOpenRegistrationDrawer:()=>{K.push(s.SettingsSteps.TwoFactorRegistration)},onOpenDisableDrawer:()=>{K.push(s.SettingsSteps.TwoFactorDisable)}});break;case s.SettingsSteps.TwoFactorUpdateEmail:Z=(0,Y.jsx)(O.default,{onClose:$});break;case s.SettingsSteps.TwoFactorUpdatePin:Z=(0,Y.jsx)(R.default,{onClose:$});break;case s.SettingsSteps.TwoFactorRegistration:Z=(0,Y.jsx)(A.default,{onClose:$});break;case s.SettingsSteps.TwoFactorDisable:Z=(0,Y.jsx)(P.default,{onClose:$});break;case s.SettingsSteps.MediaAutoDownload:Z=(0,Y.jsx)(y.default,{onClose:$});break;case s.SettingsSteps.Security:Z=(0,Y.jsx)(k.default,{onClose:$});break;case s.SettingsSteps.PrivacyVisiblityEdit:Z=null,"lastSeen"===X&&(0,r.isOnlinePresenceEnabled)()?Z=(0,Y.jsx)(E.default,{onClose:$}):null!=X&&(Z=(0,Y.jsx)(S.default,{onClose:$,category:X}));break;case s.SettingsSteps.PrivacySettings:Z=(0,Y.jsx)(b.default,{onClose:$,onOpenVisibilityEditDrawer:e=>{Q(e),K.push(s.SettingsSteps.PrivacyVisiblityEdit)},onOpenBlockedContacts:()=>{K.push(s.SettingsSteps.Blocked)},onOpenEphemeralityDrawer:()=>{K.push(s.SettingsSteps.DefaultEphemerality)},onOpenScreenLockDrawer:()=>{K.push(s.SettingsSteps.ScreenLock)}});break;case s.SettingsSteps.DefaultEphemerality:Z=(0,Y.jsx)(g.default,{onClose:$,entryPoint:u.default.DISAPPEARING_MODE_ENTRY_POINT_TYPE.ACCOUNT_SETTINGS});break;case s.SettingsSteps.DesktopSettings:break;case s.SettingsSteps.Help:Z=(0,Y.jsx)(x.default,{onClose:$});break;case s.SettingsSteps.Developer:break;case s.SettingsSteps.ScreenLock:Z=(0,Y.jsx)(j.default,{onBack:$})}return(0,Y.jsx)(a,{flow:K,children:Z})};var r=n(227101),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=K(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(n(386374)),i=n(221651),l=n(914597),s=n(119311),d=n(978820),u=a(n(471410)),c=n(988611),f=a(n(23217)),p=n(377117),h=a(n(462921)),m=a(n(551731)),g=a(n(443250)),v=a(n(652468)),x=a(n(415048)),C=n(757302),y=a(n(431839)),_=a(n(646385)),b=a(n(822082)),E=a(n(330097)),S=a(n(939828)),j=a(n(488409)),k=a(n(285553)),T=a(n(774265)),w=a(n(87659)),D=a(n(124089)),I=a(n(907693)),M=a(n(987023)),P=a(n(136486)),A=a(n(492857)),O=a(n(689932)),R=a(n(124098)),L=a(n(514551)),N=n(317239),F=n(719380),B=n(725109),U=n(582039),H=a(n(268132)),G=n(46133),z=n(548360),q=n(667294),W=n(159083),V=n(735461),Y=n(785893);function K(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(K=function(e){return e?n:t})(e)}},200540:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const[e,t]=(0,d.useFlow)(p.StatusV3Main),[n,a]=(0,s.useState)(null),[h,m]=(0,s.useState)(null),[g,v]=(0,s.useState)(void 0),[x,C]=(0,s.useState)(void 0),y=(0,u.default)((()=>Math.round(1e9*Math.random()))),_=e=>{e?t.end():t.pop()},b=(e,n,r,o)=>{a(e),m(n),v(r),C(o),t.push(p.StatusV3Viewer,"none")};if((0,c.useListener)(r.Cmd,"close_status_viewer",(()=>{_(!0)})),null==t.step)return null;let E=null;switch(t.step){case p.StatusV3Main:E=(0,f.jsx)(o.default,{onOpenStatus:b,closeStatusViewer:_,sessionId:y.current});break;case p.StatusV3Viewer:(0,l.default)(null!=n,"This will never be null"),E=(0,f.jsx)(i.default,{initialStatusV3:n,initialStatusMsg:h,closeStatusViewer:_,sessionId:y.current,rowIdx:g,rowSection:x,continuousPlay:!0})}return(0,f.jsx)(e,{flow:t,children:E})};var r=n(781572),o=(a(n(471410)),a(n(578985))),i=a(n(61752)),l=a(n(441143)),s=n(667294),d=n(159083),u=a(n(616223)),c=n(587550),f=n(785893);const p=n(76672).Mirrored(["StatusV3Main","StatusV3Viewer"])},186245:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const[t,n]=(0,u.useFlow)(null==e.stickerPackId?f.StickerStore:f.StickerPackDetails),[a,p]=(0,d.useState)(null),[h,m]=(0,d.useState)(null),g=(0,d.useRef)(0),v=e=>{g.current=e},x=e=>{p(e),n.push(f.StickerPackDetails)},C=(e,t)=>{m(e),t&&p(t),n.push(f.StickerDetails)},y=()=>{n.pop()},_=()=>{n.pop(),h&&r.Cmd.once("ui_idle",(()=>{e.onSticker(h,o.default.STICKER_SEND_ORIGIN_TYPE.STICKER_STORE)}))};if(null==n.step)return null;let b=null;switch(n.step){case f.StickerStore:b=(0,c.jsx)(s.default,{onStickerPackDetails:x,onClose:()=>n.pop(),onScrollOffsetChange:v,scrollOffset:g.current});break;case f.StickerPackDetails:b=null==e.stickerPackId?null!=a?(0,c.jsx)(l.default,{stickerPack:a,onStickerClick:C,onStickerEnter:C,onBack:y}):null:(0,c.jsx)(l.default,{stickerPackId:e.stickerPackId,onStickerClick:C,onStickerEnter:C,onClose:()=>n.end(!0)});break;case f.StickerDetails:b=null!=h&&null!=a?(0,c.jsx)(i.default,{sticker:h,stickerPack:a,onSend:_,onBack:()=>n.pop()}):null}return(0,c.jsx)(t,{flow:n,children:b})};var r=n(781572),o=a(n(471410)),i=a(n(39822)),l=a(n(874066)),s=a(n(237968)),d=n(667294),u=n(159083),c=n(785893);const f=n(76672).Mirrored(["StickerStore","StickerPackDetails","StickerDetails"])},655098:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;const n=(0,a.useRef)(null);(0,r.useListener)(t,"mousedown",(()=>{n.current=performance.now()})),(0,r.useListener)(t,"mouseup",(()=>{n.current=null}));const o=(0,a.useCallback)((()=>{const t=n.current;return null!=t&&performance.now()-t>=e}),[e]);return o};var a=n(667294),r=n(587550)},801770:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,a.useRef)(null),n=(0,a.useRef)(!1);return(0,a.useEffect)((()=>{if(null==e)return;function a(e){const n=t.current;return!!n&&(e instanceof Node&&!n.contains(e))}function r(e){if(e.isPrimary){const t=a(e.target);n.current=t}}function o(e){"touch"!==e.pointerType&&"pen"!==e.pointerType||(n.current=!1)}function i(t){const r=a(t.target);n.current&&r&&t.isPrimary&&e(t),n.current=!1}function l(t){a(t.target)&&e(t)}const s="PointerEvent"in window;return s?(document.addEventListener("pointerdown",r),document.addEventListener("pointermove",o),document.addEventListener("pointerup",i)):document.addEventListener("click",l),()=>{s?(document.removeEventListener("pointerdown",r),document.removeEventListener("pointermove",o),document.removeEventListener("pointerup",i)):document.removeEventListener("click",l)}}),[e]),t};var a=n(667294)},522246:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useSendIq=function(e,t){const[n,o]=(0,r.useState)(!1);return[n,()=>(o(!0),(0,a.deprecatedSendIq)(e,t).finally((()=>o(!1))))]};var a=n(736184),r=n(667294)},492557:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.MerchantDetailsFormFlowLoadable=void 0;var r=a(n(348926)),o=a(n(416866)),i=a(n(815334)),l=a(n(268356)),s=n(785893);const d=(0,i.default)((0,r.default)((function*(){return(yield Promise.all([n.e(8295),n.e(1702),n.e(9488),n.e(2790),n.e(275)]).then(n.bind(n,311753))).default})),"MerchantDetailsFormFlow"),u=(0,l.default)({loader:d,loading:e=>(0,s.jsx)(o.default,{error:Boolean(e.error)})});t.MerchantDetailsFormFlowLoadable=u},422433:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ExpiredLocationDrawer",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"LiveLocationDrawer",{enumerable:!0,get:function(){return r.default}});var r=a(n(111399)),o=a(n(374717))},372443:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(585582),o=a(n(9996)),i=n(33262),l=n(490669),s=n(199282),d=n(667294),u=n(785893);function c(e,t){let{layer:n,outlineLayer:a,dimension:c,removeBackground:f,scale:p,visible:h}=e;const m=(0,d.useRef)(),g=(0,d.useRef)();if((0,d.useImperativeHandle)(t,(()=>({toCanvas(){var e;const t=null===(e=g.current)||void 0===e?void 0:e.getBoundingRect(),n=m.current;if(!t||!n||t.size.isEmpty())return;const{x:a,y:o,width:i,height:s}=t;var d;null===(d=g.current)||void 0===d||d.show();const u=n.toCanvas({x:a,y:o,width:i,height:s,pixelRatio:1/p});var c;null===(c=g.current)||void 0===c||c.hide();const f=Math.max(u.width,u.height),h=Math.max(Math.ceil(l.STICKER_BORDER_WIDTH*(f/l.STICKER_DIMENSION)),2),v=(0,r.addBorder)(u,h);return(0,r.trim)(v)}}))),!n||!a)return null;const v=n.frame.getCenter();return(0,u.jsxs)(s.Group,{ref:m,visible:h,children:[(0,u.jsx)(s.Group,{x:v.x,y:v.y,offsetX:n.width/2,offsetY:n.height/2,width:n.width,height:n.height,rotation:n.rotation,scaleX:n.scale,scaleY:n.scale,children:(0,u.jsx)(o.default,{layer:n})}),(0,u.jsx)(i.Outline,{ref:g,layer:a,dimension:c})]})}var f=(0,d.forwardRef)(c);t.default=f},454621:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n,a,d,u,c;let{layer:f,scale:p,frame:h,selectedNodeRef:m,showPadding:g,onTransformStart:v,onTransformEnd:x,onTransform:C}=e;const y=(0,l.useRef)();(0,l.useEffect)((()=>{var e;null==y||null===(e=y.current)||void 0===e||e.cache({pixelRatio:.4,imageSmoothingEnabled:!1})}),[f.image]);const _=g?50:0,b=null!==(t=null==h?void 0:h.x)&&void 0!==t?t:f.x,E=null!==(n=null==h?void 0:h.y)&&void 0!==n?n:f.y,S=null!==(a=null==h?void 0:h.width)&&void 0!==a?a:f.width,j=null!==(d=null==h?void 0:h.height)&&void 0!==d?d:f.height,k=(null!=p?p:1)*f.backgroundFrame.scale*3/.4,T=-b+f.backgroundFrame.width/2+f.backgroundFrame.x,w=-E+f.backgroundFrame.height/2+f.backgroundFrame.y,D=f.backgroundFrame.width+_/f.backgroundFrame.scale*2,I=f.backgroundFrame.height+_/f.backgroundFrame.scale*2;return(0,s.jsxs)(o.Group,{width:S,height:j,clipX:0,clipY:0,clipWidth:S,clipHeight:j,children:[(0,s.jsx)(o.Image,{ref:y,x:T,y:w,width:D,height:I,offsetX:D/2,offsetY:I/2,fillPatternImage:f.image,fillPatternOffsetX:-_/f.backgroundFrame.scale,fillPatternOffsetY:-_/f.backgroundFrame.scale,fillPatternRepeat:"no-repeat",scaleX:f.backgroundFrame.scale,scaleY:f.backgroundFrame.scale,rotation:null!==(u=null===(c=f.backgroundFrame)||void 0===c?void 0:c.rotation)&&void 0!==u?u:0,perfectDrawEnabled:!1,filters:[f.mode===r.BlurMode.Smooth?i.default.Filters.Blur:i.default.Filters.Pixelate],blurRadius:f.radius/k,pixelSize:f.radius/k}),(0,s.jsx)(o.Rect,{ref:m,x:0,y:0,width:S,height:j,fill:"transparent",onTransformStart:v,onTransformEnd:x,onTransform:C})]})};var r=n(934855),o=n(199282),i=a(n(820185)),l=n(667294),s=n(785893)},39239:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasContext=void 0;const a={transforming:!1,dragging:!1,editing:!1,canEditBackground:!1},r=(0,n(667294).createContext)(a);t.CanvasContext=r},989797:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasLayer=function(e){var t,n,a,S;let{layer:j,scale:k,canvasRotation:T,editing:w,selected:D,editable:I,hidden:M,textBackgroundShadow:P,dimension:A,selectedGroupRef:O,selectedNodeRef:R,transformerRef:L,stageWidth:N,stageHeight:F,onSelect:B,onDoubleClick:U,onDragStart:H,onDragEnd:G,onDragMove:z,onTransformStart:q,onTransformEnd:W}=e;const[V,Y]=(0,y.useState)(!1),[K,X]=(0,y.useState)(null),Q=(0,y.useContext)(o.CanvasContext),J=(0,_.default)(O,R),$=j instanceof p.BlurLayer,Z=j instanceof m.ImageLayer&&(j.isSticker()||j.isBackground()),ee=j.frame.getCenter(),te=null!==(t=null==K?void 0:K.x)&&void 0!==t?t:j.x,ne=null!==(n=null==K?void 0:K.y)&&void 0!==n?n:j.y,ae=null!==(a=null==K?void 0:K.width)&&void 0!==a?a:j.width,re=null!==(S=null==K?void 0:K.height)&&void 0!==S?S:j.height;let oe=5;Z&&(oe=40);$&&(oe=0);const ie=e=>{if(!D)return;const t=(0,v.getRotationFromGroup)(e),n=(0,v.getScaleFromGroup)(e);W(j,t,n,K),$&&X(null)},le=e=>{if(!D||!$)return;const t=e.target;t.width(t.width()*t.scaleX()),t.height(t.height()*t.scaleY()),t.scaleX(1),t.scaleY(1);const n=f.default.create({x:te+t.x(),y:ne+t.y(),width:t.width(),height:t.height(),rotation:t.rotation(),scale:j.scale});t.x(0),t.y(0),X(n)};let se,de,ue,ce;I&&D&&!w&&(de=(0,b.jsx)(u.default,{layer:j,borderRadius:oe,frame:K}),ce=(0,b.jsx)(x.Transformer,{ref:L,anchorStroke:"blue",anchorFill:"white",anchorSize:8,anchorCornerRadius:4,borderEnabled:!1,centeredScaling:!$,enabledAnchors:$?["top-left","top-center","top-right","middle-left","middle-right","bottom-left","bottom-center","bottom-right"]:["bottom-right"],resizeEnabled:!0,rotateAnchorOffset:12,rotateEnabled:!$,rotationSnaps:E,ignoreStroke:!0,rotationSnapTolerance:10,boundBoxFunc:(e,t)=>{const n=t.width/k,a=t.height/k;if(j instanceof g.TextLayer&&(n<=18||a<=18)||n<=36||a<=36)return e;if($){(0,C.default)(t,T),(0,C.default)(e,T);const n={x:{min:0,max:N-t.width},y:{min:0,max:F-t.height}};t.x<n.x.min?(t.width-=n.x.min-t.x,t.x=n.x.min):t.x>n.x.max&&(t.width-=t.x-n.x.max),t.y<n.y.min?(t.height-=n.y.min-t.y,t.y=n.y.min):t.y>n.y.max&&(t.height-=t.y-n.y.max),(0,C.default)(t,T,!0),(0,C.default)(e,T,!0)}return t},keepRatio:!$},"transformer"));I&&V&&!D&&(ue=(0,b.jsx)(i.default,{layer:j,borderRadius:oe}));j instanceof m.ImageLayer?se=(0,b.jsx)(l.default,{layer:j}):j instanceof p.BlurLayer?se=(0,b.jsx)(r.default,{layer:j,scale:k,frame:K,selectedNodeRef:D?R:null,showPadding:Q.canEditBackground,onTransformStart:()=>q(j),onTransformEnd:ie,onTransform:le}):j instanceof h.DrawLayer?j.type===h.DrawLayerType.Paint?se=(0,b.jsx)(d.default,{layer:j}):j.type===h.DrawLayerType.Outline&&(se=(0,b.jsx)(s.Outline,{layer:j,dimension:A})):j instanceof g.TextLayer&&!w&&(se=(0,b.jsx)(c.default,{layer:j,shadow:P}));M&&(se=(0,b.jsx)(x.Rect,{width:j.width,height:j.height}));(0,y.useEffect)((()=>{w&&Y(!1)}),[w,Y]);let fe=null;D&&(fe=$?O:J);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(x.Group,{ref:fe,x:$?te:ee.x,y:$?ne:ee.y,offsetX:$?0:ae/2,offsetY:$?0:re/2,width:ae,height:re,rotation:j.rotation,scaleX:j.scale,scaleY:j.scale,draggable:I,dragBoundFunc:e=>{const t={x:{min:0,max:N},y:{min:0,max:F}};return $&&(0===T?(t.x.max-=ae*k,t.y.max-=re*k):90===T?(t.x.min+=re*k,t.y.max-=ae*k):180===T?(t.x.min+=ae*k,t.y.min+=re*k):(t.x.max-=re*k,t.y.min+=ae*k)),e.x<t.x.min?e.x=t.x.min:e.x>t.x.max&&(e.x=t.x.max),e.y<t.y.min?e.y=t.y.min:e.y>t.y.max&&(e.y=t.y.max),e},onMouseEnter:e=>{!j.editable||Q.dragging||Q.transforming||(e.cancelBubble=!0,Y(!0))},onMouseLeave:e=>{j.editable&&(e.cancelBubble=!0,Y(!1))},onMouseDown:e=>{j.editable&&(e.cancelBubble=!0,B(j))},onDblClick:()=>U(j),onDragStart:()=>H(j),onDragEnd:e=>{const t=(0,v.getPointFromGroup)(e);G(j,t),$&&X(null)},onDragMove:e=>{if($){const t=e.target;X(f.default.create({x:t.x(),y:t.y(),width:j.width,height:j.height,rotation:j.rotation,scale:j.scale}))}else z(j,e)},onTransformStart:()=>q(j),onTransformEnd:ie,onTransform:le,children:[se,de,ue]}),ce]})};var r=a(n(454621)),o=n(39239),i=a(n(867101)),l=a(n(9996)),s=n(33262),d=a(n(707029)),u=a(n(474554)),c=a(n(763933)),f=a(n(124055)),p=n(934855),h=n(350833),m=n(839989),g=n(881829),v=n(91788),x=n(199282),C=a(n(515513)),y=n(667294),_=a(n(778506)),b=n(785893);const E=[0,45,90,135,180,225,270,315]},306801:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.EditableText=void 0;var r=a(n(81109)),o=a(n(618446)),i=a(n(52144)),l=n(160811),s=a(n(418888)),d=n(930424),u=a(n(23217)),c=n(718644),f=a(n(624717)),p=n(39581),h=n(451234),m=n(548360),g=n(667294),v=a(n(801770)),x=a(n(837453)),C=a(n(734470)),y=n(785893);const _=(0,s.default)(),b=(0,g.forwardRef)(((e,t)=>{let{text:n,layer:a,layerCenter:s,scale:h,onSave:b,onUnselect:j,onOutsideClick:k}=e;const[T,w]=(0,g.useState)(n),[D,I]=(0,g.useState)(),M=(0,g.useRef)(),P=(0,g.useCallback)((()=>{b(T.replace(/^\n+/,"").replace(/\n+$/,""))}),[b,T]);(0,g.useImperativeHandle)(t,(()=>({save:()=>{P(),j()}})),[P,j]);const A=(0,v.default)((e=>{D||!1===(null==k?void 0:k(e))||(P(),j())})),O=e=>{const t=M.current;t&&t.replaceSelection(e)},R=()=>{I(null)},[L,N]=(0,C.default)((e=>{I({menu:(0,y.jsx)(d.EmojiPanel,{onEmoji:O,onFocusNext:R,onFocusPrev:R}),anchor:e.target})}));(0,g.useEffect)((()=>{var e,t;null===(e=M.current)||void 0===e||null===(t=e.refInput)||void 0===t||t.focus()}),[]);const F=Math.max(a.scale*h,1.2),B={borderWidth:2/F,padding:a.styles.layerPadding-2,transform:`scale(${F})`},U={left:s.x*h,top:s.y*h},H={color:a.textColor.toHex(),fontFamily:(0,p.getFontStyle)(a.font).fontFamily,fontSize:a.fontSize,lineHeight:`${a.lineHeight+2*a.styles.lineVerticalPadding}px`,textAlign:E(a.alignment),paddingLeft:a.styles.lineHorizontalPadding+1,paddingRight:a.styles.lineHorizontalPadding+1,paddingTop:1,paddingBottom:1,borderWidth:0,borderRadius:6,margin:0,boxSizing:"border-box",backgroundColor:a.textBackground?a.textBackgroundColor.toHex():void 0},G=a.styles.backgroundShadow,z={boxShadow:a.textBackground?`${G.offsetX}px ${G.offsetY}px ${G.radius}px ${G.spread}px ${G.color.toRgbaString()}`:void 0},q=function(e){const t=(0,x.default)(e),n=(0,g.useRef)(0);t&&!(0,o.default)(t,e)&&(n.current+=1);return n.current}(H),W=(0,r.default)((0,r.default)({},H),{},{fontSize:15,paddingRight:8,fontFamily:void 0}),V=20-a.fontSize,Y=a.styles.lineVerticalPadding-V,K=`\n    .${i.default.inputContainer} .emoji.emoji.emoji {\n      margin: ${Y}px ${-V/2}px 0 ${-V/2}px;\n      transform: scale(${a.fontSize/20});\n    }\n  `;return(0,y.jsxs)("div",{className:i.default.positioner,style:U,children:[(0,y.jsxs)("div",{className:i.default.container,style:B,children:[(0,y.jsx)("style",{children:K}),(0,y.jsxs)("div",{className:i.default.resizableInput,ref:A,children:[(0,y.jsx)("div",(0,r.default)((0,r.default)({className:i.default.emojiButton},N),{},{ref:L,style:{transform:`scale(${1/F}) translateX(-${50*F}%)`,top:28*(1-1/F)/2-40},children:(0,y.jsx)("div",{className:i.default.buttonIconWrapper,children:(0,y.jsx)(u.default,{name:"smiley"})})})),(0,y.jsx)("div",{className:i.default.inputContainer,style:z,children:(0,y.jsx)(_,{style:H,ref:M,initialValue:T,onChange:e=>{let t=e;t=e.match(/\n\n$/)?t.replace(/\n\n$/,"\n"):t.replace(/\n$/,""),w(t)},onEnter:P,multiline:!0,theme:"media-editor-text-input",placeholder:m.fbt._("Type something",null,{hk:"15NglL"})},q)}),(0,y.jsx)(S,{layer:a,text:T||m.fbt._("Type something",null,{hk:"15NglL"}).toString(),style:T?H:W})]})]}),D&&(0,y.jsx)(c.UIE,{displayName:"EmojiPicker",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:R,children:(0,y.jsx)(f.default,{contextMenu:(0,r.default)({dirY:l.DirY.TOP,type:l.MenuType.EmojiPicker},D)})})]})}));function E(e){switch(e){case p.TextAlignment.LEFT:return"left";case p.TextAlignment.CENTER:return"center";case p.TextAlignment.RIGHT:return"right"}}function S(e){let{text:t,style:n,layer:a}=e;return(0,y.jsx)("div",{className:i.default.hiddenText,style:n,children:(0,h.getLines)(t,a.font,a.fontSize,0).map(((e,t)=>(0,y.jsx)("div",{className:i.default.hiddenTextLine,children:0===e.words.length?" ":e.words.map(((e,t)=>e.emojiPath?(0,y.jsx)("span",{className:i.default.emojiPlaceholder},t):e.text))},t)))})}t.EditableText=b},867101:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{layer:t,borderRadius:n}=e;return(0,o.jsx)(r.Rect,{width:t.width,height:t.height,stroke:i.toRgbaString(),strokeWidth:2,cornerRadius:n,strokeScaleEnabled:!1})};var a=n(316241),r=n(199282),o=n(785893);const i=new a.Color(82,248,24,1)},9996:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{layer:t}=e;return(0,r.jsx)(a.Image,{width:t.width,height:t.height,image:t.image})};var a=n(199282),r=n(785893)},135344:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(81109)),o=a(n(618446)),i=a(n(372443)),l=n(39239),s=n(989797),d=n(306801),u=a(n(588564)),c=a(n(960541)),f=a(n(171328)),p=n(554274),h=n(934855),m=n(881829),g=n(316241),v=n(91788),x=n(199282),C=n(667294),y=n(785893);const _="#52F818";function b(e){let{canEditBackground:t,data:n,scale:a,canvasContextRef:r,isEditingBackground:o,canEditLayer:i,dragging:l,inPaintMode:s,inOutlineMode:d,currentlyEditingTextLayer:u,selectedGroupRef:c,selectedNodeRef:f,transformerRef:p,onSelect:m,onDoubleClick:g,onDragMove:v,onDragStart:x,onDragEnd:C,onTransformStart:_,onTransformEnd:b}=e;const E=!1;return(0,y.jsxs)(y.Fragment,{children:[t&&n.background&&(0,y.jsx)(S,{layer:n.background,hidden:!o(),data:n,scale:a,dragging:l,canEditLayer:i,inPaintMode:s,inOutlineMode:d,currentlyEditingTextLayer:u,selectedGroupRef:c,selectedNodeRef:f,transformerRef:p,onSelect:m,onDoubleClick:g,onDragMove:v,onDragStart:x,onDragEnd:C,onTransformStart:_,onTransformEnd:b}),!o()&&n.layers.filter((e=>e instanceof h.BlurLayer)).map((e=>(0,y.jsx)(S,{layer:e,hidden:E,data:n,scale:a,dragging:l,canEditLayer:i,inPaintMode:s,inOutlineMode:d,currentlyEditingTextLayer:u,selectedGroupRef:c,selectedNodeRef:f,transformerRef:p,onSelect:m,onDoubleClick:g,onDragMove:v,onDragStart:x,onDragEnd:C,onTransformStart:_,onTransformEnd:b},String(e.id)))),n.paintLayer&&(0,y.jsx)(S,{layer:n.paintLayer,hidden:E,data:n,scale:a,dragging:l,canEditLayer:i,inPaintMode:s,inOutlineMode:d,currentlyEditingTextLayer:u,selectedGroupRef:c,selectedNodeRef:f,transformerRef:p,onSelect:m,onDoubleClick:g,onDragMove:v,onDragStart:x,onDragEnd:C,onTransformStart:_,onTransformEnd:b}),n.layers.filter((e=>!(e instanceof h.BlurLayer))).map((e=>(0,y.jsx)(S,{layer:e,hidden:E,data:n,scale:a,dragging:l,canEditLayer:i,inPaintMode:s,inOutlineMode:d,currentlyEditingTextLayer:u,selectedGroupRef:c,selectedNodeRef:f,transformerRef:p,onSelect:m,onDoubleClick:g,onDragMove:v,onDragStart:x,onDragEnd:C,onTransformStart:_,onTransformEnd:b},String(e.id))))]})}function E(e){let{guides:t,scale:n,guidesLayerRef:a,getStage:r}=e;const{vertical:o,horizontal:i}=t;if(!o&&!i)return null;const l=r();return(0,y.jsxs)(x.Layer,{ref:a,children:[o&&(0,y.jsx)(x.Line,{x:o.position/n,y:0,points:[0,0,0,l.height()/n],stroke:_,strokeWidth:1,strokeScaleEnabled:!1},"vertical"),i&&(0,y.jsx)(x.Line,{x:0,y:i.position/n,points:[0,0,l.width()/n,0],stroke:_,strokeWidth:1,strokeScaleEnabled:!1},"horizontal")]},"guides")}function S(e){let{layer:t,hidden:n,data:a,scale:r,dragging:o,canEditLayer:i,inPaintMode:l,inOutlineMode:d,currentlyEditingTextLayer:u,selectedGroupRef:c,selectedNodeRef:f,transformerRef:p,onSelect:h,onDoubleClick:m,onDragMove:g,onDragStart:v,onDragEnd:x,onTransformStart:C,onTransformEnd:_}=e;const b=a.selectedLayer===t&&u!==t,E=a.screenWidth*r,S=a.screenHeight*r,j=a.cropSize.dimension,k=t.editable&&i&&!l&&!d&&!u;return(0,y.jsx)(s.CanvasLayer,{layer:t,scale:r,canvasRotation:a.rotation,textBackgroundShadow:!o,dimension:j,editing:u===t,selected:b,editable:k,stageHeight:S,stageWidth:E,selectedGroupRef:e=>{c.current=e},selectedNodeRef:e=>{f.current=e},transformerRef:e=>{p.current=e},onSelect:h,onDoubleClick:m,onDragMove:g,onDragStart:v,onDragEnd:x,onTransformStart:C,onTransformEnd:_,hidden:n},String(t.id))}function j(e){let{draftTextLayer:t,data:n,editableTextRef:a,scale:r,onTextSave:o,onLayerUnselect:i,onTextInputOutsideClick:l}=e;if(!t)return null;const s=n.toScreenPoint(t.frame.getCenter());return(0,y.jsx)(d.EditableText,{ref:a,layer:t,layerCenter:s,text:t.text,scale:r,onSave:o,onUnselect:i,onOutsideClick:l})}function k(e,t){var n;const{inPaintMode:a=!1,inOutlineMode:s=!1,paintColor:d=g.Color.White,paintThickness:h=p.THICKNESS.MEDIUM,outlineSmoothing:_=!0,canEditLayer:S=!0,canEditBackground:k=!1,outlineEnabled:T=!1,currentlyEditingTextLayer:w=null,draftTextLayer:D=null,onLayerSelect:I=(()=>{}),onLayerUnselect:M=(()=>{}),onLayerTranslate:P=(()=>{}),onLayerTransform:A=(()=>{}),onTextEditingStart:O=(()=>{}),onTextEditingEnd:R=(()=>{}),onTextInputOutsideClick:L=(()=>!0),onPaintDrawEnd:N=(()=>{}),onOutlineDrawEnd:F=(()=>{}),onOutlineDone:B=(()=>{}),scale:U,data:H}=e,G=(0,C.useRef)(null),z=(0,C.useRef)(null),q=(0,C.useRef)(null),W=(0,C.useRef)(null),V=(0,C.useRef)(null),Y=(0,C.useRef)(null),K=(0,C.useRef)(null),X=(0,C.useRef)(null),Q=(0,C.useRef)(null),J=(0,C.useRef)(null),$=(0,C.useRef)({dragging:!1,transforming:!1,editing:!1,canEditBackground:k}),[Z,ee]=(0,C.useState)({horizontal:null,vertical:null}),[te,ne]=(0,C.useState)(!1),[ae,re]=(0,C.useState)(!1),[oe,ie]=(0,C.useState)("crosshair"),le=()=>{if(!G.current)throw new Error("MediaEditorCanvas:stage is not initialized");return G.current.getStage()};(0,C.useEffect)((()=>{var e,t,n;q.current&&(null===(e=W.current)||void 0===e||e.nodes([q.current]),null===(t=W.current)||void 0===t||null===(n=t.getLayer())||void 0===n||n.batchDraw())}));const se=()=>{var e,t,n,a,r,o,i,l,s,d,u;null===(e=W.current)||void 0===e||e.hide(),null===(t=z.current)||void 0===t||null===(n=t.getChildren()[1])||void 0===n||n.hide(),null===(a=z.current)||void 0===a||null===(r=a.getChildren()[2])||void 0===r||r.hide(),null===(o=V.current)||void 0===o||o.hide(),null===(i=K.current)||void 0===i||i.toggleCursor(!1),null===(l=X.current)||void 0===l||l.hide(),null===(s=W.current)||void 0===s||null===(d=s.getLayer())||void 0===d||d.batchDraw(),null===(u=Y.current)||void 0===u||u.hide();const c=le().toDataURL({mimeType:"image/png",quality:1,pixelRatio:1/U});var f,p,h,m,g,v,x,C,y,_,b;return null===(f=W.current)||void 0===f||f.show(),null===(p=z.current)||void 0===p||null===(h=p.getChildren()[1])||void 0===h||h.show(),null===(m=z.current)||void 0===m||null===(g=m.getChildren()[2])||void 0===g||g.show(),null===(v=V.current)||void 0===v||v.show(),null===(x=K.current)||void 0===x||x.toggleCursor(!0),null===(C=X.current)||void 0===C||C.show(),null===(y=W.current)||void 0===y||null===(_=y.getLayer())||void 0===_||_.batchDraw(),null===(b=Y.current)||void 0===b||b.show(),c},de=()=>{var e;return null===(e=J.current)||void 0===e?void 0:e.toCanvas()},ue=()=>{var e;null===(e=Q.current)||void 0===e||e.save()},ce=()=>(te||ae)&&H.selectedLayer===H.background;(0,C.useImperativeHandle)(t,(()=>({getStage:le,getDataUrl:se,endTextEditing:ue,getBackground:de})));const fe=H.screenWidth/2,pe=H.screenHeight/2,he=H.toScreenPoint(H.cropCenter),me=H.toScreenPoint(H.canvasCenter),ge=fe-(he.x-me.x),ve=pe-(he.y-me.y),xe=H.cropSize.dimension;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(x.Stage,{ref:G,width:H.screenWidth*U,height:H.screenHeight*U,onMouseDown:e=>{w||(0,v.isEventOnAnchor)(e)||M()},scaleX:U,scaleY:U,style:(0,r.default)({cursor:a?"none":s?oe:"default"},null!==(n=e.style)&&void 0!==n?n:{}),children:(0,y.jsxs)(l.CanvasContext.Provider,{value:$.current,children:[T&&(0,y.jsx)(x.Layer,{x:ge,y:ve,offsetX:H.width/2,offsetY:H.height/2,rotation:H.rotation,children:(0,y.jsx)(f.default,{ref:Y,width:H.width,height:H.height})},"transparent"),(0,y.jsx)(x.Layer,{x:ge,y:ve,offsetX:H.width/2,offsetY:H.height/2,rotation:H.rotation,children:(0,y.jsx)(i.default,{ref:J,layer:H.background,outlineLayer:H.outlineLayer,dimension:xe,removeBackground:T&&!s,scale:U,visible:!ce()})},"background"),(0,y.jsx)(x.Layer,{x:ge,y:ve,offsetX:H.width/2,offsetY:H.height/2,rotation:H.rotation,children:(0,y.jsx)(b,{canEditBackground:k,data:H,scale:U,canvasContextRef:$,isEditingBackground:ce,canEditLayer:S,dragging:te,inPaintMode:a,inOutlineMode:s,currentlyEditingTextLayer:w,selectedGroupRef:z,selectedNodeRef:q,transformerRef:W,onSelect:e=>{I(e)},onDoubleClick:e=>{e instanceof m.TextLayer&&O(e)},onDragMove:(e,t)=>{var n,a,r,i;const l=[{position:le().width()/2,orientation:"v"},{position:le().height()/2,orientation:"h"}],s=t.target,d=s.absolutePosition(),u=[{position:d.y,orientation:"h"},{position:d.x,orientation:"v"}],c=[];for(const e of u)for(const t of l){if(e.orientation!==t.orientation)continue;const n=Math.abs(t.position-e.position);n<=15&&c.push({guide:t,distance:n})}c.sort(((e,t)=>e.distance-t.distance));let f=null,p=null;for(const{guide:e}of c)"v"!==e.orientation||f?"h"!==e.orientation||p||(p=e):f=e;s.absolutePosition({x:null!==(n=null===(a=f)||void 0===a?void 0:a.position)&&void 0!==n?n:d.x,y:null!==(r=null===(i=p)||void 0===i?void 0:i.position)&&void 0!==r?r:d.y});const h={horizontal:p,vertical:f};(0,o.default)(Z,h)||ee(h)},onDragStart:()=>{$.current.dragging=!0,ne(!0)},onDragEnd:(e,t)=>{$.current.dragging=!1,P(e,t),ee({vertical:null,horizontal:null}),ne(!1)},onTransformStart:()=>{$.current.transforming=!0,re(!0)},onTransformEnd:(e,t,n,a)=>{$.current.transforming=!1,A(e,t,n,a),re(!1)}})},"edits"),(0,y.jsx)(E,{guides:Z,scale:U,guidesLayerRef:V,getStage:le}),a&&(0,y.jsx)(c.default,{ref:K,width:H.screenWidth,height:H.screenHeight,scale:U,pathStyle:{color:d,thickness:(0,p.getThicknessValue)(h),smoothing:!1},data:H,onDrawEnd:N}),s&&(0,y.jsx)(u.default,{ref:X,width:H.screenWidth,height:H.screenHeight,scale:U,data:H,smoothing:_,onDrawEnd:F,onDone:B,onCursorChange:e=>{ie(e)}})]})}),(0,y.jsx)(j,{draftTextLayer:D,data:H,editableTextRef:Q,scale:U,onTextSave:e=>{D&&R(D,e)},onLayerUnselect:M,onTextInputOutsideClick:L})]})}var T=(0,C.forwardRef)(k);t.default=T},33262:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.Outline=void 0;var r=a(n(594654)),o=a(n(364369)),i=a(n(124055)),l=n(199282),s=n(667294),d=n(785893);function u(e,t){let{layer:n,dimension:a}=e;const u=(0,s.useRef)(),c=(0,s.useRef)();(0,s.useImperativeHandle)(t,(()=>({show(){var e;null===(e=u.current)||void 0===e||e.show()},hide(){var e;null===(e=u.current)||void 0===e||e.hide()},getBoundingRect(){const e=c.current;if(!e)return;const{x:t,y:a,width:r,height:o}=e.getClientRect();return i.default.create({x:t,y:a,width:r,height:o,rotation:n.rotation,scale:n.scale})}})));const f=(0,r.default)(n.getAllPoints(),(e=>[e.x,e.y]));return(0,d.jsx)(l.Group,{ref:u,width:n.width,height:n.height,visible:!1,children:(0,d.jsx)(l.Line,{ref:c,points:f,closed:!0,fill:"white",lineCap:"round",lineJoin:"round",tension:o.default.MEDIA_EDITOR_OUTLINE_TENSION,globalCompositeOperation:"destination-in"})})}const c=(0,s.forwardRef)(u);t.Outline=c},588564:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(81109)),o=a(n(594654)),i=a(n(364369)),l=a(n(285313)),s=n(316241),d=n(199282),u=n(667294),c=n(785893);const f="dot-first",p="dot-last";function h(e,t){var n;let{width:a,height:h,scale:m,data:v,smoothing:x,onDrawEnd:C,onDone:y,onCursorChange:_}=e;const b=(0,u.useRef)(),E=(0,u.useRef)(!1),S=(0,u.useRef)("crosshair");(0,u.useEffect)((()=>{_("crosshair")}),[]),(0,u.useImperativeHandle)(t,(()=>({show(){var e;null===(e=b.current)||void 0===e||e.show()},hide(){var e;null===(e=b.current)||void 0===e||e.hide()}})));const{cursorPosition:j,points:k,handlers:T}=(0,l.default)({onDrawStart:()=>{E.current=!0},onDrawEnd:e=>{E.current=!1,C(e)},onDone:y,onMouseMove:e=>{const t=e.target.name()===f,n=E.current,a=t&&!n?"pointer":"crosshair";a!==S.current&&(S.current=a,_(a))},data:v,stage:null===(n=b.current)||void 0===n?void 0:n.getStage(),minPointDistance:12/m,clickThreshold:200,boundToStage:!0,doneTargets:{mousedown:[f,p],mouseup:[f]},pathStyle:{color:s.Color.White,thickness:0,smoothing:x}}),w=v.outlineLayer.getAllPoints().map((e=>v.toScreenPoint(e)));!x&&w.length&&w.push(w[w.length-1]);Boolean(k.length)&&w.push(k[0]),w.push(...k);const D=[...w];!x&&D.length&&D.push(D[D.length-1]),j&&D.push(j);const I=(0,o.default)(D,(e=>[e.x,e.y]));return(0,c.jsxs)(d.Layer,(0,r.default)((0,r.default)({ref:b},T),{},{width:a,height:h,children:[(0,c.jsx)(d.Rect,{x:0,y:0,width:a,height:h,fill:"rgba(0,0,0,0)"}),(0,c.jsx)(d.Line,{points:I,lineCap:"round",lineJoin:"round",stroke:"#FA6533",strokeWidth:3/m,dash:[12/m,6/m],tension:i.default.MEDIA_EDITOR_OUTLINE_TENSION}),(0,c.jsx)(g,{points:w,scale:m})]}),"paintCursor")}var m=(0,u.forwardRef)(h);function g(e){let{points:t,scale:n}=e;if(!t.length)return null;const a=t[0],r=t[t.length-1],o=3/n;return(0,c.jsxs)(c.Fragment,{children:[undefined,(0,c.jsx)(d.Circle,{name:p,x:r.x,y:r.y,radius:o}),(0,c.jsx)(d.Circle,{x:a.x,y:a.y,radius:o,stroke:"white"}),(0,c.jsx)(d.Circle,{name:f,x:a.x,y:a.y,radius:4*o})]})}t.default=m},707029:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{layer:t}=e;const n=(0,r.useMemo)((()=>{const e=document.createElement("canvas");return e.width=Math.max(t.width,1),e.height=Math.max(t.height,1),e}),[t.width,t.height]),i=(0,r.useRef)();return(0,r.useEffect)((()=>{var e,a;n.getContext("2d").clearRect(0,0,n.width,n.height),t.paths.forEach((e=>function(e,t){const{points:n}=t;if(!n.length)return;const a=e.getContext("2d"),r={color:t.color,thickness:t.thickness,smoothing:!1};(function(e,t){e.lineCap="round",e.lineJoin="round",e.lineWidth=t.thickness,e.strokeStyle=t.color.toHex()})(a,r),a.beginPath(),a.moveTo(n[0].x,n[0].y),n.forEach((e=>a.lineTo(e.x,e.y))),a.stroke()}(n,e))),null===(e=i.current)||void 0===e||null===(a=e.getLayer())||void 0===a||a.batchDraw()}),[t.paths,n]),(0,o.jsx)(a.Image,{ref:i,width:t.width,height:t.height,image:n,listening:!1})};var a=n(199282),r=n(667294),o=n(785893)},960541:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(81109)),o=a(n(594654)),i=a(n(285313)),l=n(199282),s=n(667294),d=n(785893);const u=(e,t)=>{var n;let{width:a,height:u,scale:c,pathStyle:f,data:p,onDrawEnd:h}=e;const m=(0,s.useRef)(),g=(0,s.useRef)();(0,s.useImperativeHandle)(t,(()=>({toggleCursor(e){const t=g.current;t&&(e?t.show():t.hide())}})));const{cursorPosition:v,points:x,handlers:C}=(0,i.default)({onDrawEnd:h,data:p,pathStyle:f,stage:null===(n=m.current)||void 0===n?void 0:n.getStage()}),y=(0,o.default)(x,(e=>[e.x,e.y]));return(0,d.jsxs)(l.Layer,(0,r.default)((0,r.default)({ref:m},C),{},{width:a,height:u,children:[(0,d.jsx)(l.Rect,{width:a,height:u,fill:"rgba(0, 0, 0, 0)"}),v&&(0,d.jsx)(l.Circle,{ref:g,x:v.x,y:v.y,radius:f.thickness/2,fill:f.color.toRgbaString()}),(0,d.jsx)(l.Line,{points:y,lineCap:"round",lineJoin:"round",stroke:f.color.toRgbaString(),strokeWidth:f.thickness})]}),"paintCursor")};var c=(0,s.forwardRef)(u);t.default=c},474554:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n;let{layer:r,borderRadius:u,frame:c}=e;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(o.Rect,{width:null!==(t=null==c?void 0:c.width)&&void 0!==t?t:r.width,height:null!==(n=null==c?void 0:c.height)&&void 0!==n?n:r.height,fill:(r instanceof a.BlurLayer?d:s).toRgbaString(),stroke:l.toRgbaString(),strokeWidth:2,cornerRadius:u,strokeScaleEnabled:!1})})};var a=n(934855),r=n(316241),o=n(199282),i=n(785893);const l=new r.Color(82,248,24,1),s=new r.Color(82,248,24,.1),d=new r.Color(0,0,0,0)},763933:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{layer:t,shadow:n}=e;const a=function(e){const t=[];for(const n of e)for(const{emojiPath:e}of n.words)e&&t.push(e);return function(e){const t=Array.from(new Set(e)),n=t.join(""),a=(0,i.useRef)({}),[,r]=(0,i.useState)(0);return(0,i.useEffect)((()=>{a.current={},r(0),t.forEach((e=>{const t=new Image;t.onload=()=>{a.current[e]=t,r(Object.keys(a.current).length)},t.src=e}))}),[r,n]),a.current}(t)}(t.lines),o=t.lines.map(((e,n)=>{const o=e.width+2*t.styles.lineHorizontalPadding,i=t.lineHeight+2*t.styles.lineVerticalPadding;return(0,l.jsx)(r.Group,{width:o,height:i,y:n*i,children:(0,l.jsx)(s,{line:e,layer:t,emojiImages:a})},n)})),{backgroundShadow:d}=t.styles;return(0,l.jsx)(r.Group,{visible:0!==t.width,width:t.width,height:t.height,children:(0,l.jsxs)(r.Group,{x:t.styles.layerPadding,y:t.styles.layerPadding,children:[t.textBackground&&(n?(0,l.jsx)(r.Path,{data:t.backgroundPath,stroke:t.textBackgroundColor.toHex(),fill:t.textBackgroundColor.toHex(),shadowColor:d.color.toHex(),shadowBlur:d.radius,shadowOffset:{x:d.offsetX,y:d.offsetY},shadowOpacity:d.color.alpha},"1"):(0,l.jsx)(r.Path,{data:t.backgroundPath,stroke:t.textBackgroundColor.toHex(),fill:t.textBackgroundColor.toHex()},"2")),o]})})};var a=n(39581),r=n(199282),o=n(451234),i=n(667294),l=n(785893);function s(e){let{line:t,layer:n,emojiImages:i}=e;const s=Math.max(...n.lineWidths);let d=0;switch(n.alignment){case a.TextAlignment.LEFT:d=0;break;case a.TextAlignment.CENTER:d=(s-t.width)/2;break;case a.TextAlignment.RIGHT:d=s-t.width}let u=0;return t.words.map(((e,t)=>{let{text:s,emojiPath:c,width:f}=e;const p=d+n.styles.lineHorizontalPadding+u,h=n.styles.lineVerticalPadding;let m;if(c){const e=i[c];m=e?(0,l.jsx)(r.Image,{x:p,y:h,width:n.lineHeight,height:n.lineHeight,image:e},t):(0,l.jsx)(r.Rect,{x:p,y:h,width:n.lineHeight,height:n.lineHeight,fill:"rgba(0,0,0,0)"},t)}else{const e=(0,o.getTextBounds)(n.font,n.fontSize);m=(0,l.jsx)(r.Text,{x:p,y:h-e.top+(e.top+e.bottom)/2,width:f,height:n.lineHeight,text:s,fill:n.textColor.toHex(),fontFamily:(0,a.getFontStyle)(n.font).fontFamily,fontSize:n.fontSize},t)}return u+=f,m}))}},171328:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(316241),r=n(199282),o=n(667294),i=n(785893);const l=new a.Color(230,230,230).toRgbString(),s=new a.Color(255,255,255).toRgbString();function d(e,t){let{width:n,height:a}=e;const d=(0,o.useRef)();(0,o.useImperativeHandle)(t,(()=>({hide(){var e;null===(e=d.current)||void 0===e||e.hide()},show(){var e;null===(e=d.current)||void 0===e||e.show()}})));const u=(0,o.useMemo)((()=>{const e=document.createElement("canvas");return e.width=Math.max(n,1),e.height=Math.max(a,1),e}),[n,a]);return(0,o.useEffect)((()=>{var e,t;const r=u.getContext("2d");r.clearRect(0,0,u.width,u.height);const o=20,i=Math.ceil(n/o),c=Math.ceil(a/o);for(let e=0;e<c;e++)for(let t=0;t<i;t++){const n=(e+t)%2==0?s:l;r.beginPath(),r.rect(t*o,e*o,o,o),r.fillStyle=n,r.fill()}null===(e=d.current)||void 0===e||null===(t=e.getLayer())||void 0===t||t.batchDraw()}),[u,n,a]),(0,i.jsx)(r.Image,{ref:d,width:n,height:a,image:u})}var u=(0,o.forwardRef)(d);t.default=u},285313:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{onDrawStart:t,onDrawEnd:n,onDone:a,onMouseMove:u,data:c,endOnMouseLeave:f=!0,minPointDistance:p=0,clickThreshold:h=0,boundToStage:m=!1,pathStyle:g={},stage:v,doneTargets:x={}}=e;const[C,y]=(0,i.useState)(),_=(0,i.useRef)([]),b=(0,i.useRef)(!1),E=(0,l.default)(),S=(0,s.default)(h),j=(0,i.useRef)(!1);return(0,d.useListener)(window,"mouseup",(()=>{if(b.current=!1,0!==_.current.length){const e=_.current.map((e=>c.toCanvasPoint(e)));n((0,r.default)({points:e},g)),_.current=[],E()}})),(0,d.useListener)(window,"mousemove",(e=>{const t=(0,o.getPointFromStage)(e,v,m),n=m&&b.current;if(y(n?(0,o.getPointFromStage)(e,v,!0):t),b.current){const e=_.current,n=e[e.length-1];(!n||n.distance(t)>=p&&S()||(0,o.isStageCorner)(t,v))&&e.push(t)}})),(0,i.useEffect)((()=>{j.current&&(null==a||a(),j.current=!1)})),{cursorPosition:C,points:_.current,handlers:{onMouseDown:e=>{var n;if(null==t||t(),null===(n=x.mousedown)||void 0===n?void 0:n.includes(e.target.name()))return void(null==a||a());const r=(0,o.getPointFromStage)(e.evt,v,m);_.current.push(r),b.current=!0,E()},onMouseUp:e=>{var t;const n=null===(t=x.mouseup)||void 0===t?void 0:t.includes(e.target.name()),a=1===_.current.length;n&&!a&&(j.current=!0)},onMouseMove:e=>{null==u||u(e)}}}};var r=a(n(81109)),o=n(91788),i=n(667294),l=a(n(859312)),s=a(n(655098)),d=n(587550)},369613:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{caption:t,setCaptionInputRef:n,setNewCaptionInputRef:a,onEnter:k}=e,T=(0,E.useRef)(null),w=(0,E.useRef)(null),D=(0,E.useRef)(null),[I,M]=(0,E.useState)(null),P=()=>{var e,t;(0,l.newMediaCaptionInputEnabled)()?null===(e=w.current)||void 0===e||e.focus():null===(t=T.current)||void 0===t||t.focus()};(0,E.useEffect)((()=>{P()}),[]);const A=e=>{T.current=e,n(e)},O=e=>{w.current=e,null==a||a(e)},R=()=>{M(null)},L=e=>{let t;(0,l.newMediaCaptionInputEnabled)()?(t=w.current,t&&(t.focus(),t.replaceSelection(e))):(t=T.current,t&&(t.focus(!1),t.replaceSelection(e)))},N=e=>{var t;(null===(t=T.current)||void 0===t?void 0:t.isFocused())?k(e):k()},F=(0,r.numCodepoints)(e.caption||""),B=o.default.MAX_CAPTION_LENGTH-F<50,U=(0,S.jsx)("div",{role:"button",className:s.default.inputEmoji,onClick:e=>{e.preventDefault(),e.stopPropagation();const t=(0,S.jsx)(m.EmojiPanel,{onEmoji:L,onFocusNext:P,onFocusPrev:P});M({menu:t,dirY:d.DirY.TOP,type:d.MenuType.EmojiPicker,anchor:e.target}),P()},title:b.fbt._("Open emojis panel",null,{hk:"2MKtLP"}),children:(0,S.jsx)(v.default,{name:"emoji-input"})}),H=t&&""!==t?(0,S.jsx)("div",{role:"button",className:s.default.clearBtn,onClick:()=>{var e,t;(0,l.newMediaCaptionInputEnabled)()?null===(e=w.current)||void 0===e||e.reset():null===(t=T.current)||void 0===t||t.reset();P()},children:(0,S.jsx)(v.default,{name:"x-alt"})}):null,G=B&&(0,S.jsx)("div",{className:s.default.charCounter,children:i.default.n(o.default.MAX_CAPTION_LENGTH-F)});let z=null;I&&(z=(0,S.jsx)(x.UIE,{displayName:"EmojiPicker",escapable:!0,popable:!0,dismissOnWindowResize:!0,ref:D,requestDismiss:R,children:(0,S.jsx)(C.default,{contextMenu:I})}));let q,W,V=null;"document"===e.theme||(0,l.isViewOnceSunsetEnabled)()||(V=(0,S.jsx)("div",{className:s.default.secondaryButtonContainer,children:(0,S.jsx)(y.default,{disabled:e.viewOnceDisabled,isOn:Boolean(e.viewOnce),mediaType:e.msgType,onChange:e.onToggleViewOnce,noMargin:!0})}));if((0,l.newMediaCaptionInputEnabled)()){var Y;W=(0,S.jsx)(c.RichTextInput,{ref:O,xstyle:j.mediaCaptionInputContainer,testid:"media-caption-input-container",initialText:t,placeholder:b.fbt._("Type a message",null,{hk:"4chl4F"}),title:b.fbt._("Type a message",null,{hk:"4chl4F"}),onChange:t=>e.onChange(t.parsableText),onEnter:N,onFiles:e.onFiles,maxLength:o.default.MAX_CAPTION_LENGTH,multiline:!0,spellCheck:!0,groupMetadata:e.chat.groupMetadata,placeholderXStyle:j.captionPlaceholder});const n=null===(Y=w.current)||void 0===Y?void 0:Y.editor;null!=n&&(q=(0,S.jsx)("div",{className:s.default.suggestionsPositioner,children:(0,S.jsxs)("div",{className:s.default.suggestionsContainer,children:[(0,S.jsx)(p.MentionSuggestions,{editor:n,groupMetadata:e.chat.groupMetadata}),(0,S.jsx)(f.EmojiSuggestions,{editor:n})]})}))}else W=(0,S.jsx)(h.default,{ref:A,initialValue:t,testid:"media-caption-input-container",placeholder:b.fbt._("Type a message",null,{hk:"3h5KZB"}),onChange:e.onChange,onEnter:N,onFiles:e.onFiles,theme:"media-caption",maxLength:o.default.MAX_CAPTION_LENGTH,multiline:!0,spellCheck:!0}),q=(0,S.jsx)("div",{className:s.default.suggestionsPositioner,children:(0,S.jsxs)("div",{className:s.default.suggestionsContainer,children:[(0,S.jsx)(h.default.MentionSuggestions,{chat:e.chat,theme:g.ThemeOptions.MEDIA_CAPTION}),(0,S.jsx)(h.default.EmojiSuggestions,{chat:e.chat,theme:g.ThemeOptions.MEDIA_CAPTION})]})});return(0,S.jsxs)(u.FlexRow,{className:(0,_.default)(s.default.container,{[s.default.documentCaption]:"document"===e.theme,[s.default.videoCaption]:"video"===e.theme}),align:"center",justify:"center",children:[q,(0,S.jsxs)(u.FlexRow,{align:"start",className:s.default.inputContainer,children:[W,(0,S.jsxs)(u.FlexRow,{className:s.default.buttonContainer,align:"center",children:[G,H,U]})]}),V,z]})};var r=n(164331),o=a(n(364369)),i=a(n(568064)),l=n(408139),s=a(n(250907)),d=n(160811),u=n(429623),c=n(405200),f=n(421423),p=n(846371),h=a(n(643698)),m=n(930424),g=n(216477),v=a(n(23217)),x=n(718644),C=a(n(624717)),y=a(n(675680)),_=a(n(294184)),b=n(548360),E=n(667294),S=(a(n(156720)),n(785893));const j={mediaCaptionInputContainer:{width:"ln8gz9je",marginTop:"iin4x6c7",marginEnd:"jnwc1y2a",marginBottom:"ngycyvoj",marginStart:"svoq16ka",minHeight:"g4oj0cdv",fontSize:"fe5nidar",color:"tviruh8d",wordWrap:"b6f1x6w7",whiteSpace:"bbv8nyr4",userSelect:"to2l77zo",lineHeight:"jgi8eev7"},captionPlaceholder:{paddingBottom:"aa0kojfi"}}},554274:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.THICKNESS=void 0,t.getAllThicknesses=function(){return Object.keys(n)},t.getThicknessValue=function(e){return a[e]};const n=Object.freeze({SMALL:"SMALL",MEDIUM:"MEDIUM",LARGE:"LARGE",XLARGE:"XLARGE"});t.THICKNESS=n;const a={[n.SMALL]:8,[n.MEDIUM]:12,[n.LARGE]:18,[n.XLARGE]:24}},577890:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(535937)),o=a(n(568064)),i=n(115461),l=a(n(630635)),s=n(843257),d=a(n(23217)),u=n(118146),c=a(n(294184)),f=n(548360),p=n(667294),h=n(735461),m=n(785893);const{IMAGE:g,VIDEO:v}=i.MSG_TYPE,x=(0,r.default)(s.MIMETYPES,(e=>"document"===(null==e?void 0:e.msgType)));function C(e){const t=(0,h.useModelValues)(e.attachMedia,["mimetype","preview","type","fullPreview","fullPreviewSize","documentPageCount"]);let n;if(t.type===g)n=t.preview;else if(t.type===v)n=`data:image/jpeg;base64,${t.preview}`;else if("pdf"===(0,s.previewType)(t.mimetype)){t.fullPreview&&t.fullPreviewSize&&null!=t.documentPageCount&&t.documentPageCount>0&&(n=t.fullPreview)}if(n)return(0,m.jsx)("div",{className:l.default.body,children:(0,m.jsx)("img",{src:n,alt:o.default.t(819)})});const a=(0,c.default)(l.default.body,l.default.bodyIcon,x[t.mimetype]?x[t.mimetype].icon:"icon-doc-generic");return(0,m.jsx)("div",{className:a})}function y(e,t){const{attachMedia:n,onClick:a,onClose:r}=e;return(0,m.jsxs)("button",{className:(0,c.default)(l.default.thumb,{[l.default.active]:e.active}),onClick:e=>{a((0,u.unproxy)(n),e)},"aria-label":f.fbt._("Image Thumbnail",null,{hk:"1KyQD6"}),ref:t,children:[(0,m.jsx)("div",{className:l.default.btnDelete,onClick:e=>{r((0,u.unproxy)(n),e)},role:"button",children:(0,m.jsx)(d.default,{name:"x-alt"})}),(0,m.jsx)("div",{className:l.default.bodyWrapper,children:(0,m.jsx)(C,{attachMedia:n})})]})}var _=(0,p.forwardRef)(y);t.default=_},463727:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(115461),o=a(n(577890)),i=n(667294),l=n(299420),s=n(785893);const d=(0,l.SortableElement)((e=>{let{children:t}=e;return t})),u=(0,l.SortableContainer)((e=>{let{children:t}=e;return t}));class c extends i.Component{constructor(e){super(e),this._handleSortEnd=e=>{let{oldIndex:t,newIndex:n}=e;const{mediaCollection:a}=this.props,r=a.reorder(t,n);this.setState({medias:r})},this.state={medias:this.props.mediaCollection.getPreviewableMedias()}}static getDerivedStateFromProps(e){return{medias:e.mediaCollection.getPreviewableMedias()}}render(){const{mediaCollection:e,className:t,onElementRef:n}=this.props,a=this.state.medias;return(0,s.jsx)(u,{onSortEnd:this._handleSortEnd,axis:"x",helperClass:"SortableHelper",distance:10,children:(0,s.jsx)("div",{className:t,children:a.map(((t,a)=>{var i;return(0,s.jsx)(d,{index:a,children:(0,s.jsx)(o.default,{attachMedia:t,active:t===e.getActive(),previewMode:(null===(i=e.getActive())||void 0===i?void 0:i.type)!==r.MSG_TYPE.IMAGE,onClick:this.props.onClick,onClose:this.props.onClose,ref:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((e=>n(t.id,e)))})},t.id)}))})})}}t.default=c,c.displayName="DragAndDrop"},706327:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.ImageBody=void 0;var r=n(115461),o=n(87364),i=a(n(376139)),l=a(n(135344)),s=a(n(369613)),d=n(992320),u=n(39581),c=n(554274),f=a(n(216186)),p=a(n(46668)),h=a(n(90388)),m=n(934855),g=n(839989),v=n(881829),x=a(n(613057)),C=n(175481),y=a(n(188262)),_=a(n(966430)),b=n(30383),E=n(866747),S=a(n(254277)),j=n(105807),k=a(n(977268)),T=a(n(609165)),w=n(579230),D=n(429623),I=a(n(23217)),M=a(n(701784)),P=n(480666),A=a(n(294184)),O=n(548360),R=n(667294),L=a(n(651799)),N=a(n(859312)),F=n(587550),B=n(735461),U=n(785893);const H=new p.default({width:200,height:200}),G=(0,R.forwardRef)((function(e,t){const{paintColor:n,paintThickness:a,outlineSmoothing:G,onLayerDelete:z,onTextEditingStart:q,onTextEditingEnd:W,onOutlineDone:V,draftTextLayer:Y,onLayerUnselect:K,onPaintSelect:X,onCropRotateCanvas:Q,onOutlineSelect:J}=e,$=(0,B.useModelValues)(e.attachMedia,["mediaEditorData","caption","id"]),Z=(0,R.useRef)(null),ee=(0,R.useRef)(null),te=(0,R.useRef)(null),ne=(0,R.useRef)(null),ae=(0,R.useRef)(null),re=(0,R.useRef)(null),oe=(0,R.useRef)(null),ie=(0,R.useRef)(null),[le,se]=(0,R.useState)(p.default.empty()),[de,ue]=(0,R.useState)(!1),[ce,fe]=(0,R.useState)(!1),[pe,he]=(0,R.useState)(!1),[me,ge]=(0,R.useState)(!1),[ve,xe]=(0,R.useState)(!1),Ce=()=>{ue((e=>!e))},ye=()=>$.mediaEditorData,_e=()=>{if(!Z.current)return;const e=Z.current.getBoundingClientRect(),t=new p.default({width:e.width-40,height:e.height-40});se(t)},be=()=>{!ce&&ye().selectedLayer&&K(),fe((e=>!e)),_e()},Ee=()=>pe,Se=()=>{he((e=>!e))},je=()=>{if(de)Ce();else if(ce)be();else if(Ee())V(),Se();else{if(!$.mediaEditorData.selectedLayer||Y)return!1;K()}return!0};(0,F.useListener)(window,"mousedown",(e=>{ie.current=e.target})),(0,F.useListener)(window,"click",(()=>{const e=ie.current;e!==Z.current&&e!==te.current&&e!==ee.current||je()}));const ke=()=>{const{selectedLayer:e}=$.mediaEditorData;e&&z(e)},Te=e=>{"Backspace"!==e.code||e.target instanceof HTMLInputElement||e.target instanceof HTMLDivElement&&"true"===e.target.contentEditable||ce||ke()},we=()=>{const e=(()=>{if(!ne.current)throw new Error("MediaEditor:canvas is not initialized");return ne.current.getDataUrl()})();return i.default.dataURLtoFile(e)},De=()=>{if(null!=ne.current){const{width:e,height:t}=ne.current.getStage().attrs;if(0!==e&&0!==t){const e=we(),t=window.URL.createObjectURL(e);$.updateEditedFile(e),$.updatePreview(t),$.updateFullPreview(t)}}},Ie=(0,L.default)((()=>{oe.current&&((0,o.cancelIdleCallback)(oe.current),oe.current=null),oe.current=(0,o.requestIdleCallback)(De)}),1e3),Me=e=>{(null==e?void 0:e.immediately)?De():Ie()};(0,R.useEffect)((()=>(window.addEventListener("resize",_e),window.addEventListener("keydown",Te),_e(),()=>{window.removeEventListener("resize",_e),window.removeEventListener("keydown",Te),Me({immediately:!0})})),[]);const Pe=(0,N.default)(),Ae=()=>{if(ce)be();else if(de)Ce();else if(pe)V(),Se();else if(Y){var e;null===(e=ne.current)||void 0===e||e.endTextEditing()}else ye().selectedLayer&&K()},Oe=e=>{Q(ye().rotation+e,ye().cropOrigin,ye().cropSize)},Re=()=>{Q(0,new f.default({x:0,y:0}),ye().size)},Le=(e,t)=>{Q(ye().rotation,e,t)},Ne=(e,t)=>{e===P.MediaEditorAction.OutlineDone?(je(),Se()):e===P.MediaEditorAction.Outline?(Ee()&&Se(),t===P.MediaEditorAction.Outline&&Se()):e===P.MediaEditorAction.CropRotateCanvas&&(je(),t===P.MediaEditorAction.CropRotateCanvas&&be())},Fe=(e,t)=>{e===P.MediaEditorAction.OutlineDone?je():e===P.MediaEditorAction.Outline?Ee()||Se():e===P.MediaEditorAction.CropRotateCanvas?(je(),be()):t===P.MediaEditorAction.CropRotateCanvas&&e!==P.MediaEditorAction.CropRotateCanvas&&je()},Be=()=>{const e=$.mediaEditorData;return(0,w.calculateContainScale)(e.screenWidth,e.screenHeight,le,H)},Ue=()=>{const e=$.mediaEditorData;return new p.default({width:e.screenWidth,height:e.screenHeight})},He=()=>{var e;return null===(e=ne.current)||void 0===e?void 0:e.getBackground()};(0,R.useImperativeHandle)(t,(()=>({updatePreview:Me,undoAction:Ne,redoAction:Fe,getCanvasScale:Be,getCanvasSize:Ue,resetUIState:je,getBackground:He})));const Ge=$.mediaEditorData,ze=e.draftTextLayer||Ge.selectedLayer;let qe;if(ce)qe=(0,U.jsx)(b.CropRotateToolbar,{canReset:Ge.isRotated()||Ge.isCropped(),onRotateCanvas:Oe,onReset:Re});else if(pe)qe=(0,U.jsx)(j.OutlineToolbar,{smoothing:e.outlineSmoothing,onSmoothingToggle:e.onOutlineSmoothingToggle,canReset:Ge.isOutlined(),onReset:e.onOutlineReset});else if(ze){const t=ze instanceof g.ImageLayer&&ze.isBackground();if(ze instanceof v.TextLayer){const t=(0,d.getAllColors)().map((e=>{const t=(0,d.getColorValue)(e),n=(0,d.getColorValue)(t.isLight()?d.COLORS.BLACK:d.COLORS.WHITE);return{primaryColor:t,secondaryColor:n}}));qe=(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(_.default,{ref:ae,colors:t,onColorSelect:e.onTextColorSelect,selectedColor:ze.textColor}),(0,U.jsx)(E.Font,{ref:re,fonts:(0,u.getAllFonts)(),selectedFont:ze.font,selectedAlignment:ze.alignment,onFontSelect:e.onFontSelect,onAlignmentSelect:e.onAlignmentSelect}),(0,U.jsx)(k.default,{checked:ze.textBackground,onBackgroundToggle:e.onTextBackgroundToggle}),(0,U.jsx)(y.default,{icon:"delete",title:O.fbt._("Delete",null,{hk:"1XGJJN"}),onClick:ke})]})}else t||(qe=(0,U.jsxs)(U.Fragment,{children:[ze instanceof m.BlurLayer?(0,U.jsx)(C.BlurToolbar,{blurMode:ze.mode,blurRadius:ze.radius,onBlurModeChange:e.onBlurModeChange,onBlurRadiusChange:e.onBlurRadiusChange}):null,(0,U.jsx)(y.default,{icon:"delete",title:O.fbt._("Delete",null,{hk:"1XGJJN"}),onClick:ke})]}))}else de&&(qe=(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(_.default,{colors:(0,d.getAllColors)().map((e=>({primaryColor:(0,d.getColorValue)(e)}))),onColorSelect:e.onPaintColorSelect,selectedColor:n}),(0,U.jsx)(T.default,{thicknesses:(0,c.getAllThicknesses)(),onThicknessSelect:e.onPaintThicknessSelect,selectedThickness:a})]}));const We=!qe&&!e.draftTextLayer&&!e.sendAsSticker,Ve=(0,U.jsx)(D.FlexRow,{className:(0,A.default)(h.default.captionInputContainer,{[h.default.captionInputHidden]:!We}),justify:"center",children:(0,U.jsx)(s.default,{chat:e.chat,caption:$.caption,viewOnce:e.viewOnce,viewOnceDisabled:e.viewOnceDisabled,msgType:r.MSG_TYPE.IMAGE,theme:"image",onToggleViewOnce:e.onToggleViewOnce,onChange:e.onCaptionChange,onEnter:e.onEnter,onFiles:e.onFiles,setCaptionInputRef:t=>{e.setCaptionInputRef($.id,t)},setNewCaptionInputRef:t=>{e.setNewCaptionInputRef($.id,t)}},$.id)}),Ye=(0,U.jsxs)(D.FlexRow,{justify:"center",align:"center",className:h.default.footer,ref:te,children:[qe&&(0,U.jsx)(D.FlexRow,{justify:"center",align:"center",className:h.default.bottomToolbar,children:qe}),Ve]});let Ke=null;ce&&(Ke=(0,U.jsx)(x.default,{data:Ge,rotation:ye().rotation,cropOrigin:ye().cropOrigin,cropSize:ye().cropSize,onCropChange:Le,containerSize:le,keepRatio:e.sendAsSticker,sendAsSticker:e.sendAsSticker}));const Xe=ce||de||pe||me||ve||Boolean(e.draftTextLayer)||Boolean(ye().selectedLayer);return(0,U.jsxs)("div",{className:h.default.container,children:[(0,U.jsxs)(D.FlexRow,{className:h.default.header,ref:ee,children:[e.onClose?(0,U.jsx)("div",{className:h.default.closeButton,children:(0,U.jsx)(M.default,{onClick:e.onClose,"aria-label":O.fbt._("Close",null,{hk:"gQq3k"}),children:(0,U.jsx)(I.default,{name:"x"})})}):(0,U.jsx)("div",{className:h.default.closeButtonPlaceholder}),(0,U.jsx)(S.default,{selectedLayer:ze,inPaintMode:de,inCropRotateMode:ce,inTextEditingMode:Boolean(e.draftTextLayer),inOutlineMode:pe,canUndo:e.canUndo,canRedo:e.canRedo,onPaintSelect:()=>{Ce(),X()},onCropRotateSelect:()=>{be()},onOutlineSelect:()=>{Se(),J()},onTextSelect:e.onTextSelect,onEmojiSelect:e.onEmojiSelect,onStickerSelect:e.onStickerSelect,onToggleEmojiPanel:e=>{ge(e)},onToggleStickerPanel:e=>{xe(e)},onBlurSelect:e.onBlurSelect,onUndo:e.onUndo,onRedo:e.onRedo,showOutline:e.sendAsSticker}),(0,U.jsx)(D.FlexRow,{className:h.default.headerRight,justify:"end",children:Xe&&(0,U.jsx)(y.default,{onClick:Ae,children:O.fbt._("Done",null,{hk:"2nVR7W"})})})]}),(0,U.jsxs)("div",{ref:Z,className:(0,A.default)(h.default.canvasContainer,{[h.default.cropRotateContainer]:ce}),children:[(0,U.jsx)("div",{className:h.default.canvas,style:{display:ce?"none":"unset"},children:(0,U.jsx)(l.default,{ref:ne,data:Ge,inPaintMode:de,inOutlineMode:pe,paintColor:n,paintThickness:a,outlineSmoothing:G,currentlyEditingTextLayer:e.currentlyEditingTextLayer,draftTextLayer:e.draftTextLayer,scale:Be(),onLayerSelect:e.onLayerSelect,onLayerUnselect:e.onLayerUnselect,onLayerTranslate:e.onLayerTranslate,onLayerTransform:e.onLayerTransform,onTextEditingStart:e=>{Pe(),q(e)},onTextEditingEnd:(e,t)=>{Pe(),W(e,t)},onTextInputOutsideClick:e=>{var t,n;const a=e.target;return!(a instanceof HTMLElement&&a.closest(`.${h.default.footer}`)&&a!==te.current||(null===(t=ae.current)||void 0===t?void 0:t.isPanelVisible())||(null===(n=re.current)||void 0===n?void 0:n.isMenuVisible()))},onPaintDrawEnd:e.onPaintDrawEnd,onOutlineDrawEnd:e.onOutlineDrawEnd,onOutlineDone:Ae,canEditBackground:e.sendAsSticker,outlineEnabled:e.sendAsSticker})}),Ke]}),Ye]})}));t.ImageBody=G},14500:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.MediaTheme=t.MediaEditor=void 0;var r=a(n(348926)),o=n(450796),i=a(n(145095)),l=n(781572),s=a(n(364369)),d=n(272312),u=n(565885),c=a(n(352013)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=ne(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(n(435232)),p=n(408139),h=n(115461),m=n(694816),g=a(n(471410)),v=a(n(565273)),x=n(992320),C=n(39581),y=n(554274),_=a(n(463727)),b=a(n(216186)),E=a(n(46668)),S=n(706327),j=a(n(979334)),k=n(934855),T=n(839989),w=n(881829),D=a(n(537793)),I=a(n(350580)),M=a(n(87618)),P=a(n(265235)),A=n(175481),O=n(492202),R=n(843257),L=a(n(692726)),N=n(429623),F=n(729424),B=a(n(725324)),U=n(111054),H=n(490669),G=a(n(438932)),z=a(n(23217)),q=n(950452),W=a(n(60453)),V=a(n(69637)),Y=n(480666),K=a(n(294184)),X=n(548360),Q=n(667294),J=(a(n(156720)),a(n(859312))),$=a(n(616223)),Z=n(587550),ee=a(n(803409)),te=n(785893);function ne(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(ne=function(e){return e?n:t})(e)}const{IMAGE:ae,VIDEO:re,AUDIO:oe,STICKER:ie,DOCUMENT:le}=h.MSG_TYPE,se=3*w.DEFAULT_FONT_SIZE,de=n(76672).Mirrored(["ATTACH","CAPTURE"]);function ue(e,t){var n,a;const{onClose:h=(()=>{}),theme:ne=de.ATTACH,sendAsSticker:ue=!1,chat:ce,mediaCollection:fe,initCaption:pe,onDropText:he,onSendMedia:me}=e,[ge,ve]=(0,Q.useState)((()=>(0,x.getColorValue)(x.COLORS.BLUE))),[xe,Ce]=(0,Q.useState)(null!=ue&&ue?y.THICKNESS.XLARGE:y.THICKNESS.SMALL),[ye,_e]=(0,Q.useState)(!0),[be,Ee]=(0,Q.useState)((()=>(0,x.getColorValue)(x.COLORS.BLACK))),[Se,je]=(0,Q.useState)(C.FONTS.SANS_SERIF),[ke,Te]=(0,Q.useState)(C.TextAlignment.CENTER),[we,De]=(0,Q.useState)(!0),[Ie,Me]=(0,Q.useState)(!1),[Pe,Ae]=(0,Q.useState)(!1),[Oe,Re]=(0,Q.useState)(!1),[Le,Ne]=(0,Q.useState)(null),[Fe,Be]=(0,Q.useState)(null),[Ue,He]=(0,Q.useState)(!1),[Ge,ze]=(0,Q.useState)(null),[qe,We]=(0,Q.useState)(null),[Ve,Ye]=(0,Q.useState)(!1),[Ke,Xe]=(0,Q.useState)(null!=ue&&ue),Qe=(0,Q.useRef)(),Je=(0,Q.useRef)(),$e=(0,Q.useRef)(),Ze=(0,Q.useRef)(),et=(0,Q.useRef)(null==pe?void 0:pe.text),tt=(0,Q.useRef)(),nt=(0,Q.useRef)(A.BLUR_DEFAULT_MODE),at=(0,Q.useRef)(A.BLUR_DEFAULT_RADIUS),rt=(0,$.default)((()=>new Map)),ot=(e,t)=>{rt.current.set(e,t)},it=(0,$.default)((()=>new Map)),lt=(e,t)=>{it.current.set(e,t)},st=(0,$.default)((()=>new Map)),dt=(0,$.default)((()=>new Map)),ut=(e,t)=>{dt.current.set(e,t)},ct=(0,J.default)(),ft=(0,ee.default)();fe.isStickerMaker=Ke,(0,Z.useListener)(fe,["add","remove","reset"],ct),(0,Z.useListener)(fe,["active-change","change:state","change:previewable"],(()=>{if(!fe.canSend())return;const{errorMsgs:e}=fe.uiProcessMsgs();e&&(m.ToastManager.open((0,te.jsx)(q.Toast,{msg:e,id:(0,q.genId)()})),0===fe.getPreviewableMedias().length&&h()),ct()}));(0,Z.useListener)(l.Cmd,"toggle_sticker_maker",(()=>{const e=!Ke&&1===fe.length&&(null===(t=fe.at(0))||void 0===t?void 0:t.type)===ae;var t;Xe(e),Ce(e?y.THICKNESS.XLARGE:y.THICKNESS.SMALL)})),(0,Q.useEffect)((()=>{var e;return null===(e=Ze.current)||void 0===e||e.focus(),()=>{tt.current&&clearTimeout(tt.current)}}),[]),(0,Q.useEffect)((()=>{fe.isStickerMaker=Ke}));const pt=()=>Ze.current,ht=()=>{var e;return!(null===(e=Qe.current)||void 0===e?void 0:e.resetUIState())&&(!qe||(ze(null),We(null),!1))};(0,Q.useImperativeHandle)(t,(()=>({getElement:pt,handleRequestDismiss:ht})));const mt=fe.getActive(),gt=et.current;let vt=Ue;vt||Le||null==gt||""===gt||!mt||mt.type!==ae&&mt.type!==re&&mt.type!==le||(mt.caption=gt,vt=!0);const xt=null!==(n=null==mt?void 0:mt.canUndoMediaEditorData())&&void 0!==n&&n,Ct=null!==(a=null==mt?void 0:mt.canRedoMediaEditorData())&&void 0!==a&&a;mt!==Fe&&(Be(mt),Ne(mt),Ae(xt),Re(Ct),He(vt));const yt=()=>null==Le?v.default.create():Le.mediaEditorData,_t=()=>{var e,t;Ae(null!==(e=null==Le?void 0:Le.canUndoMediaEditorData())&&void 0!==e&&e),Re(null!==(t=null==Le?void 0:Le.canRedoMediaEditorData())&&void 0!==t&&t)},bt=(e,t)=>{if(e!==yt()){var n,a,r;if(Le)Le.updateMediaEditorData(e,{undoable:null!==(n=null==t?void 0:t.undoable)&&void 0!==n&&n,lastAction:null!==(a=null==t?void 0:t.lastAction)&&void 0!==a?a:null}),_t();if(null==t?void 0:t.updatePreview)null===(r=Qe.current)||void 0===r||r.updatePreview();__LOG__(2)`MediaEditor: Updated MediaEditorData`}},Et=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(Le&&Le.canUndoMediaEditorData()){var t,n;const a=Le.lastMediaEditorAction;Le.undoMediaEditorData(e);const r=Le.lastMediaEditorAction;_t(),null===(t=Qe.current)||void 0===t||t.updatePreview(),null===(n=Qe.current)||void 0===n||n.undoAction(a,r)}},St=()=>{if(Le&&Le.canRedoMediaEditorData()){var e,t;const n=Le.lastMediaEditorAction;Le.redoMediaEditorData();const a=Le.lastMediaEditorAction;_t(),null===(e=Qe.current)||void 0===e||e.updatePreview(),null===(t=Qe.current)||void 0===t||t.redoAction(a,n)}},jt=(e,t,n,a)=>{const r=(0,i.default)(Qe.current,"imageBodyRef.current").getCanvasScale(),o=t.width*r,l=t.height*r,s=Math.min(n/o,a/l),d=yt().addImageLayerToCenter({type:e,image:t,editable:!0,scale:s});bt(d,{updatePreview:!0,undoable:!0})},kt=function(){var e=(0,r.default)((function*(e){try{const t=yield(0,O.createImageFromEmoji)(e);if(!t)return;const n=Ke?128:64;jt(T.ImageLayerType.Emoji,t,n,n),Ke&&new g.default.WebcStickerMakerEvents({stickerMakerEventName:g.default.WEBC_STICKER_MAKER_EVENT_NAME_TYPE.EMOJI_ADDED}).commit()}catch(e){m.ToastManager.open((0,te.jsx)(q.Toast,{msg:X.fbt._("Failed to add image",null,{hk:"1e7nnp"}),id:(0,q.genId)()}))}}));return function(){return e.apply(this,arguments)}}(),Tt=function(){var e=(0,r.default)((function*(e){try{const t=yield(0,O.createImageFromSticker)(e);jt(T.ImageLayerType.Sticker,t,128,128),Ke&&new g.default.WebcStickerMakerEvents({stickerMakerEventName:g.default.WEBC_STICKER_MAKER_EVENT_NAME_TYPE.STICKER_ADDED}).commit()}catch(e){m.ToastManager.open((0,te.jsx)(q.Toast,{msg:X.fbt._("Failed to add image",null,{hk:"1e7nnp"}),id:(0,q.genId)()}))}}));return function(){return e.apply(this,arguments)}}(),wt=()=>{const e=yt().clearSelectedLayer();bt(e)},Dt=()=>{const e=yt().clearSelectedLayer();bt(e)},It=()=>{const e=null===(t=Qe.current)||void 0===t?void 0:t.getBackground();var t;const n=yt();if(!e||n.outlineLayer.isEmpty())return;const a=n.cropCenter,{width:r,height:o}=e,i=new b.default({x:a.x-r/2,y:a.y-o/2}),l=-n.rotation,s=Math.max(r,o),d=n.cropSize.dimension,u=n.updateBackground(e,i,l,d*((H.STICKER_DIMENSION-2*H.STICKER_PADDING)/H.STICKER_DIMENSION)/s).clearOutlinePaths();bt(u,{undoable:!0,updatePreview:!0,lastAction:Y.MediaEditorAction.OutlineDone}),Ke&&new g.default.WebcStickerMakerEvents({stickerMakerEventName:g.default.WEBC_STICKER_MAKER_EVENT_NAME_TYPE.IMAGE_OUTLINED}).commit()},Mt=()=>{const e=yt().clearOutlinePaths();bt(e,{undoable:!0,updatePreview:!0})},Pt=(e,t,n)=>{const a=yt().setRotation(e).setCrop(t,n);bt(a,{undoable:!0,updatePreview:!0,lastAction:Y.MediaEditorAction.CropRotateCanvas}),Ke&&new g.default.WebcStickerMakerEvents({stickerMakerEventName:g.default.WEBC_STICKER_MAKER_EVENT_NAME_TYPE.IMAGE_CROPPED}).commit()},At=e=>{const{selectedLayer:t}=yt();if(t instanceof k.BlurLayer){const n=yt().setBlurMode(t,e);bt(n,{updatePreview:!0,undoable:!0}),nt.current=e}},Ot=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{selectedLayer:n}=yt();if(n instanceof k.BlurLayer){const a=yt().setBlurRadius(n,e);bt(a,{updatePreview:!0,undoable:t}),at.current=e}},Rt=()=>{const e=yt().selectedLayer;if(e instanceof k.BlurLayer&&!e.confirmed)Et(!1);else{var t,n;const e=yt().clearSelectedLayer();bt(e),((e,t,n,a)=>{const r=(0,i.default)(Qe.current,"imageBodyRef.current").getCanvasScale(),o=(0,i.default)(Qe.current,"imageBodyRef.current").getCanvasSize(),l=Math.min(o.width,200/r),s=Math.min(o.height,100/r),d=yt().addBlurLayerToCenter({image:e,size:new E.default({width:l,height:s}),mode:t,radius:n,backgroundFrame:a});bt(d,{updatePreview:!0,undoable:!0})})((0,i.default)(null===(t=yt().background)||void 0===t?void 0:t.image,"getData().background?.image"),nt.current,at.current,(0,i.default)(null===(n=yt().background)||void 0===n?void 0:n.frame,"getData().background?.frame"))}},Lt=e=>{ve(e)},Nt=e=>{Ce(e)},Ft=e=>{_e(e)},Bt=()=>{bt(yt().clearSelectedLayer())},Ut=()=>{if(Ge)return;Bt();let e=1.2/(0,i.default)(Qe.current,"imageBodyRef.current").getCanvasScale();if(Ke){const t=yt().cropSize.dimension;e=se*t/H.STICKER_DIMENSION/w.DEFAULT_FONT_SIZE}const t={origin:yt().cropCenter,text:"",textColor:be,textBackground:we,alignment:ke,font:Se,scale:e},n=yt().addTextLayer(t),a=(0,i.default)(n.lastTextLayer,"data.lastTextLayer");We(a),ze(null)},Ht=e=>{je(e);const{selectedLayer:t}=yt();if(qe)We(qe.setFont(e));else if(t&&t instanceof w.TextLayer){const n=yt().setFont(t,e);bt(n,{updatePreview:!0,undoable:!0})}},Gt=e=>{Te(e);const{selectedLayer:t}=yt();if(qe)We(qe.setAlignment(e));else if(t&&t instanceof w.TextLayer){const n=yt().setAlignment(t,e);bt(n,{updatePreview:!0,undoable:!0})}},zt=e=>{Ee(e);const{selectedLayer:t}=yt();if(qe)We(qe.setTextColor(e));else if(t&&t instanceof w.TextLayer){const n=yt().setTextColor(t,e);bt(n,{updatePreview:!0,undoable:!0})}},qt=()=>{const e=!we;De(e);const{selectedLayer:t}=yt();if(qe)We(qe.setTextBackground(e));else if(t&&t instanceof w.TextLayer){const n=yt().setTextBackground(t,e);bt(n,{updatePreview:!0,undoable:!0})}},Wt=e=>{We(e),ze(e)},Vt=(e,t)=>{var n;if(t){let e=yt();const n=(0,i.default)(qe,"draftTextLayer").setText(t);Ge?e=e.updateLayer((0,i.default)(Ge,"currentlyEditingTextLayer"),n):(e=e.addTextLayer(n),Ke&&new g.default.WebcStickerMakerEvents({stickerMakerEventName:g.default.WEBC_STICKER_MAKER_EVENT_NAME_TYPE.TEXT_ADDED}).commit()),bt(e,{updatePreview:!0,undoable:!0})}else Ge&&bt(yt().deleteLayer(Ge),{updatePreview:!0,undoable:Boolean(e.text)});setTimeout((()=>{We(null),ze(null)}),0),null===(n=Ze.current)||void 0===n||n.focus()},Yt=e=>{bt(yt().addPaintPath(e),{undoable:!0,updatePreview:!0})},Kt=e=>{bt(yt().addOutlinePath(e),{undoable:!0,updatePreview:!0,lastAction:Y.MediaEditorAction.Outline})},Xt=e=>{if(!e.editable)return;let t=yt().setSelectedLayer(e);e instanceof k.BlurLayer&&(e.confirmed||(t=t.updateLayer(e,e.setConfirmed())),nt.current=e.mode,at.current=e.radius),bt(t),e instanceof w.TextLayer&&(Ee(e.textColor),De(e.textBackground),je(e.font))},Qt=(e,t)=>{const n=e instanceof T.ImageLayer&&e.isBackground();bt(n?yt().translateBackground(t):yt().translateLayer(e,t),{updatePreview:!0,undoable:!0})},Jt=(e,t,n,a)=>{const r=e instanceof T.ImageLayer&&e.isBackground();bt(r?yt().transformBackground(t,n):yt().transformLayer(e,t,n,a),{updatePreview:!0,undoable:!0})},$t=e=>{const t=yt().deleteLayer(e);bt(t,{updatePreview:!0,undoable:!0})},Zt=e=>{(0,d.getFiles)(e).then((t=>{if(ft.aborted)return;let n;return e.shiftKey&&e.altKey&&1===t.length&&(Xe(!0),Ce(y.THICKNESS.XLARGE),n=!0),fe.processAttachments(t.map((e=>({file:e,stickerMaker:n}))),g.default.MEDIA_PICKER_ORIGIN_TYPE.CHAT_PHOTO_LIBRARY)})).catch((0,o.filteredCatch)(f.MediaDragDropError,(e=>{fe.length||he(e.src)}))),e.target.value&&(e.target.value="")},en=e=>{Ve||Ke||Zt(e)},tn=(e,t)=>{Ve||Ke||(Me(e),e||t||fe.length||h())},nn=e=>{if(!Le)return;const t=fe.indexOf(Le);Le.updateCaption(e),0===t&&""===e&&Ue&&He(!1);const n=dt.current.get(Le.id);n&&st.current.set(Le.id,n.editorContent())},an=e=>{const t=e.getFiles().filter((e=>{const t=(0,u.typeFromMimetype)(e.type);return"image"===t||"video"===t})).map((e=>({file:e})));fe.processAttachments(t,g.default.MEDIA_PICKER_ORIGIN_TYPE.PASTE)},rn=e=>{e.preventDefault(),e.stopPropagation();const t=new L.default(e.clipboardData);t.hasFiles()&&an(t)},on=()=>{if(Je.current){Je.current.click()}},ln=()=>{var e;const t=ce.contact.isEnterprise;return 1===fe.length&&!0===(null===(e=fe.at(0))||void 0===e?void 0:e.isViewableOnce())&&!t&&!ue},sn=e=>{if(null==e||e.preventDefault(),null==e||e.stopPropagation(),!fe.canSend())return;const t=fe.getPreviewableMedias();if(0===t.length)return void h();var n;((null==Le?void 0:Le.mediaEditorData.hasEdits())||Ke)&&(null===(n=Qe.current)||void 0===n||n.updatePreview({immediately:!0}));const a=[];t.forEach((e=>{if(e.editedFile&&(e.mediaEditorData.hasEdits()||Ke)){const t=fe.replace(e.id,{file:e.editedFile,asSticker:Ke});a.push(t)}})),Promise.all(a).then((()=>{const e=fe.getPreviewableMedias();if(0===e.length)return;const n=e.map((e=>{var t,n;let a=null===(t=e.caption)||void 0===t?void 0:t.trim(),r=[];const o=it.current.get(e.id),i=st.current.get(e.id);if(o){const e=o.serialize(a);if(e){const[t,n]=[e[0].trim(),e[1]];t.length&&(a=t,r=n.mentionedJidList||[])}}else if(i){const{text:e,data:t}=i;e.length&&(a=e,r=t.mentionedJidList||[])}return e.caption=null!==(n=a)&&void 0!==n?n:void 0,{media:e,mentionedJidList:r}}));me(n,{initCaptionUsed:Ue,isViewOnce:ln()&&Ve}),(e=>{if(Ke)return new g.default.StickerSend({stickerSendOrigin:g.default.STICKER_SEND_ORIGIN_TYPE.STICKER_MAKER,stickerIsAnimated:!1,stickerIsFirstParty:!1,stickerIsFromStickerMaker:!0}).commit(),void new g.default.WebcStickerMakerEvents({stickerMakerEventName:g.default.WEBC_STICKER_MAKER_EVENT_NAME_TYPE.SEND_STICKER}).commit();let t=0,n=0,a=0,r=0,o=0,i=0;e.forEach((e=>{const l=e.mediaEditorData;e.type===ae&&(t++,l.hasEdits()&&n++,l.paintLayer.paths.length>0&&a++),l.layers.forEach((e=>{e instanceof T.ImageLayer?(e.isEmoji()&&r++,e.isSticker()&&o++):e instanceof w.TextLayer&&i++}))})),new g.default.WebcMediaEditorSend({imageCount:t,editedImageCount:n,paintedImageCount:a,emojiLayerCount:r,stickerLayerCount:o,textLayerCount:i}).commit()})(t)}))},dn=()=>{if(!Le)return;const e=rt.current.get(Le.id);e&&e.scrollIntoView()},un=(e,t)=>{if(!Le||t.repeat||qe)return;const n=Le&&!Le.caption,a=it.current.get(Le.id);(n||a&&!a.isFocused()||a&&(a.cursorIsAtStart()&&"left"===e||a.cursorIsAtEnd()&&"right"===e))&&("left"===e?fe.setPrevAsActive()&&dn():fe.setNextAsActive()&&dn())},cn=e=>{fe.setActive(e)},fn=(e,t)=>{t.stopPropagation(),t.preventDefault(),fe.remove(e),0===fe.getValidMedias().length?tt.current=setTimeout((()=>{h()}),200):$e.current&&c.default.focus($e.current)},pn=e=>{Ye(e)};let hn,mn=fe.getPreviewableMedias();mn.length>s.default.MAX_FILES&&(mn=mn.slice(0,s.default.MAX_FILES)),fe.canSend()?Le&&(hn=(e=>{let t=null;switch(e.type){case ie:case ae:t=(0,te.jsx)(S.ImageBody,{ref:Qe,attachMedia:e,chat:ce,onCaptionChange:nn,onClose:ne===de.CAPTURE?null:h,onEnter:sn,setCaptionInputRef:lt,setNewCaptionInputRef:ut,paintColor:ge,paintThickness:xe,outlineSmoothing:ye,canUndo:Pe,canRedo:Oe,currentlyEditingTextLayer:Ge,draftTextLayer:qe,viewOnce:Ve,viewOnceDisabled:!ln(),sendAsSticker:Ke,onPaintSelect:wt,onOutlineSelect:Dt,onOutlineDone:It,onOutlineReset:Mt,onTextSelect:Ut,onTextBackgroundToggle:qt,onEmojiSelect:kt,onStickerSelect:Tt,onLayerSelect:Xt,onLayerUnselect:Bt,onLayerDelete:$t,onLayerTranslate:Qt,onLayerTransform:Jt,onTextEditingStart:Wt,onTextEditingEnd:Vt,onTextColorSelect:zt,onFontSelect:Ht,onAlignmentSelect:Gt,onPaintColorSelect:Lt,onPaintThicknessSelect:Nt,onOutlineSmoothingToggle:Ft,onCropRotateCanvas:Pt,onBlurModeChange:At,onBlurRadiusChange:Ot,onBlurSelect:Rt,onUndo:Et,onRedo:St,onPaintDrawEnd:Yt,onOutlineDrawEnd:Kt,onToggleViewOnce:pn,onFiles:an},e.mediaEditorData.id);break;case re:t=(0,te.jsx)(P.default,{attachMedia:e,chat:ce,viewOnce:Ve,viewOnceDisabled:!ln(),setCaptionInputRef:lt,setNewCaptionInputRef:ut,onCaptionChange:nn,onClose:h,onEnter:sn,onToggleViewOnce:pn,onFiles:an},e.id);break;case oe:t=(0,te.jsx)(D.default,{item:e,onClose:h},e.id);break;default:t="pdf"===(0,R.previewType)(e.mimetype)?(0,te.jsx)(M.default,{item:e,onClose:h,attachMedia:e,chat:ce,setCaptionInputRef:lt,setNewCaptionInputRef:ut,onCaptionChange:nn,onEnter:sn,onToggleViewOnce:pn,onFiles:an},e.id):(0,te.jsx)(I.default,{mimeType:e.mimetype,filesize:e.filesize,filename:e.filename,fileExt:e.fileExt,onClose:h,attachMedia:e,chat:ce,setCaptionInputRef:lt,setNewCaptionInputRef:ut,onCaptionChange:nn,onEnter:sn,onToggleViewOnce:pn,onFiles:an},e.id)}return t})(Le)):hn=(0,te.jsx)("div",{className:j.default.spinner,children:(0,te.jsx)(U.Spinner,{color:"highlight"},"processing")});const gn=Ie?(0,te.jsx)("div",{className:j.default.dropOverlay,children:(0,te.jsx)("div",{className:j.default.dropOverlayOutline,children:X.fbt._("Drag file here",null,{hk:"y9aHs"})})},"container"):null,vn="*"===R.DOC_MIMES?"*":[R.IMAGE_MIMES].join();let xn;if(null!=hn){let e;if(mn.length>0&&(e=(0,te.jsx)("div",{className:j.default.sendButton,tabIndex:"-1",ref:$e,onKeyPress:e=>e.preventDefault(),children:(0,te.jsx)(B.default,{ariaLabel:X.fbt._("Send",null,{hk:"2JJUaP"}),large:!0,icon:(0,te.jsx)(z.default,{name:"send",directional:!0}),count:1===mn.length?null:mn.length,onClick:sn,disabled:!fe.canSend()})})),ne===de.CAPTURE)xn=(0,te.jsx)("div",{className:j.default.captureFooter,children:e});else{const t=!Ve&&!Ke&&mn.length<s.default.MAX_FILES,n="add-alt",a=Ke?null:(0,te.jsx)(G.default,{className:(0,K.default)(j.default.addMediaButton,{[j.default.addMediaButtonDisabled]:!t}),disabled:!t,name:n,title:X.fbt._("Add file",null,{hk:"4Gvj3D"}),onClick:on,"aria-label":X.fbt._("Add file",null,{hk:"4Gvj3D"})},"media-more");let r;mn.length>0&&(r=(0,te.jsxs)(N.FlexRow,{className:j.default.filmstripContainer,justify:"center",align:"start",children:[(0,te.jsx)(_.default,{className:j.default.thumbs,mediaCollection:fe,onClick:cn,onClose:fn,onElementRef:ot}),a]})),xn=(0,te.jsxs)("div",{className:j.default.footer,children:[r,e]})}}const Cn=(0,K.default)(j.default.container,{[j.default.previewOnly]:(null==Le?void 0:Le.type)!==ae,[j.default.documentPreview]:(0,p.documentWithCaptionsSendEnabled)()&&(null==Le?void 0:Le.type)===le});let yn=(0,te.jsxs)(N.FlexColumn,{className:Cn,align:"stretch",children:[gn,hn,xn,(0,te.jsx)("input",{ref:Je,type:"file",accept:vn,style:{display:"none"},onChange:Zt,multiple:!0})]});ne===de.ATTACH&&(yn=(0,te.jsx)(W.default,{theme:"media",onDrop:en,onDragChange:tn,children:(0,te.jsx)(V.default,{tabIndex:"-1",overflow:"hidden",onPaste:rn,children:yn})},"attach-image-modal"));const _n=ne===de.CAPTURE?"ppled2lx ln8gz9je":"";return(0,te.jsx)(F.HotKeys,{className:_n,handlers:{enter:e=>{var t;if(!Le)return;if(e.repeat)return;if(e.shiftKey)return;if(qe)return;const{selectedLayer:n}=yt();if(n instanceof w.TextLayer)return e.preventDefault(),e.stopPropagation(),void Wt(n);(null===(t=Qe.current)||void 0===t?void 0:t.resetUIState())||sn()},left:e=>un("left",e),right:e=>un("right",e)},ref:Ze,children:yn})}t.MediaTheme=de;const ce=(0,Q.forwardRef)(ue);t.MediaEditor=ce},537793:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{onClose:t,item:n}=e;const{mimetype:a,fullPreview:s}=n;return(0,l.jsxs)("div",{className:o.default.container,children:[(0,l.jsx)(r.default,{onClose:t}),(0,l.jsx)(i.default,{mimeType:a,url:s})]})};var r=a(n(821454)),o=a(n(858099)),i=a(n(674252)),l=n(785893)},613057:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{data:t,rotation:n,cropOrigin:a,cropSize:g,containerSize:v,keepRatio:x,onCropChange:C,sendAsSticker:y}=e;const _=t.resetCropRotate().setRotation(n),b=(0,u.useRef)(),E=(0,u.useRef)(),{width:S,height:j}=g,{x:k,y:T}=a,w=(0,u.useRef)(g),D=S/w.current.width,I=j/w.current.height,M=t.width,P=t.height,{width:A,height:O}=h(M,P,n),R=new l.default({width:v.width-20,height:v.height-20}),L=(0,d.calculateContainScale)(n%180?P:M,n%180?M:P,R,f),N=p/L,F=new l.default({width:M+2*N,height:P+2*N}),{width:B,height:U}=h(F.width,F.height,n),H=F.width/2,G=F.height/2;(0,u.useEffect)((()=>{const e=b.current,t=E.current;var n;e&&t&&0===e.nodes().length&&(e.nodes([t]),null===(n=t.getLayer())||void 0===n||n.batchDraw())}));const z=e=>{const{target:t}=e,n=Math.round(t.x()),a=Math.round(t.y()),r=Math.min(Math.round(t.width()*t.scaleX()),M-n),o=Math.min(Math.round(t.height()*t.scaleY()),P-a);C(new i.default({x:n,y:a}),new l.default({width:r,height:o}))},q=["top-left","top-right","bottom-left","bottom-right"];x||q.push("top-center","middle-right","middle-left","bottom-center");return(0,c.jsxs)("div",{className:r.default.container,children:[(0,c.jsx)(o.default,{data:_,scale:L,canEditLayer:!1,style:{padding:p},outlineEnabled:y}),(0,c.jsx)(s.Stage,{className:r.default.cropperContainer,width:Math.round(B*L),height:Math.round(U*L),scaleX:L,scaleY:L,children:(0,c.jsx)(s.Layer,{rotation:n,offsetX:H,offsetY:G,x:B/2,y:U/2,children:(0,c.jsxs)(s.Group,{x:N,y:N,children:[(0,c.jsx)(s.Rect,{x:0,y:0,width:M,height:P,fill:"black",opacity:.6}),(0,c.jsx)(s.Rect,{ref:E,fill:"red",x:k,y:T,width:w.current.width,height:w.current.height,scaleX:D,scaleY:I,draggable:!0,dragBoundFunc:e=>{const{width:t,height:a}=h(S,j,n);let{x:r,y:o}=function(e,t,n,a,r){switch((r%360+360)%360){case 0:return{x:e,y:t};case 90:return{x:e-n,y:t};case 180:return{y:t-a,x:e-n};case 270:return{x:e,y:t-a};default:throw new Error("Unsupported angle")}}(e.x,e.y,t*L,a*L,n);r<p?r=p:(r-p)/L+t>A&&(r=Math.round(A-t+N)*L),o<p?o=p:(o-p)/L+a>O&&(o=Math.round(O-a+N)*L);return function(e,t,n,a,r){switch((r%360+360)%360){case 0:return{x:e,y:t};case 90:return{x:e+n,y:t};case 180:return{y:t+a,x:e+n};case 270:return{x:e,y:t+a};default:throw new Error("Unsupported angle")}}(r,o,t*L,a*L,n)},onTransformEnd:z,onDragEnd:z,globalCompositeOperation:"destination-out"}),(0,c.jsx)(s.Transformer,{ref:b,anchorStroke:"blue",anchorFill:"white",anchorSize:10,anchorCornerRadius:5,borderEnabled:!1,centeredScaling:!1,resizeEnabled:!0,rotateEnabled:!1,ignoreStroke:!0,boundBoxFunc:(e,t)=>{const a=M*L+20,r=P*L+20,o=m(e,a,r,n,-n),i=m(t,a,r,n,-n);return Math.round(i.x)<p?(i.x=p,i.width=o.width+(o.x-p)):Math.round(i.width)<20?(i.x=o.x,i.width=o.width):Math.round(i.x+i.width)>Math.round(a)-p&&(i.width=a-i.x-p),Math.round(i.y)<p?(i.y=p,i.height=o.height+(o.y-p)):Math.round(i.height)<20?(i.y=o.y,i.height=o.height):Math.round(i.y+i.height)>Math.round(r)-p&&(i.height=r-i.y-p),m(i,a,r,0,n)},keepRatio:x,enabledAnchors:q},"transformer")]})},"cropper")})]})};var r=a(n(610706)),o=a(n(135344)),i=a(n(216186)),l=a(n(46668)),s=n(199282),d=n(579230),u=n(667294),c=n(785893);const f=new l.default({width:200,height:200}),p=10;function h(e,t,n){return{width:n%180==0?e:t,height:n%180==0?t:e}}function m(e,t,n,a,r){const o=Math.max(t,n),l=h(t,n,a),s=(o-l.width)/2,d=(o-l.height)/2,u=new i.default({x:e.x+s,y:e.y+d}),c=new i.default({x:o/2,y:o/2}),f=u.rotate(c,r),p=h(t,n,a+r),m=(o-p.width)/2,g=(o-p.height)/2;return{x:f.x-m,y:f.y-g,width:e.width,height:e.height,rotation:e.rotation}}},350580:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;let{onClose:n,attachMedia:a,filename:x,filesize:C,fileExt:y,mimeType:_,chat:b,onCaptionChange:E,onEnter:S,setCaptionInputRef:j,setNewCaptionInputRef:k,onToggleViewOnce:T,onFiles:w}=e;const{caption:D}=(0,h.useModelValues)(a,["caption"]);let I;const M=null!=C?r.default.filesize(C):"",P=null!==(t=v.get(_))&&void 0!==t?t:"preview-generic";(0,o.documentWithCaptionsSendEnabled)()&&(I=(0,m.jsx)("div",{className:(0,p.default)(g.footer),children:(0,m.jsx)(c.default,{chat:b,caption:D,viewOnce:!1,viewOnceDisabled:!0,msgType:i.MSG_TYPE.DOCUMENT,theme:"document",onToggleViewOnce:T,onChange:E,onEnter:S,onFiles:w,setCaptionInputRef:e=>{j(a.id,e)},setNewCaptionInputRef:e=>{k(a.id,e)}},a.id)}));return(0,m.jsxs)("div",{className:s.default.container,children:[(0,m.jsx)(l.default,{onClose:n,filename:x}),(0,m.jsx)(d.FlexColumn,{xstyle:g.body,align:"center",justify:"center",children:(0,m.jsxs)(d.FlexColumn,{className:(0,p.default)(g.previewContainer),align:"center",justify:"center",children:[(0,m.jsx)("div",{className:(0,p.default)(g.previewIcon),children:(0,m.jsx)(u.default,{name:P})}),(0,m.jsx)("div",{className:(0,p.default)(g.header),children:f.fbt._("No preview available",null,{hk:"3NAVbb"})}),(0,m.jsxs)("div",{className:(0,p.default)(g.metadata),children:[M,null!=y&&""!==y?` - ${y.toUpperCase()}`:null]})]})}),I]})};var r=a(n(568064)),o=n(408139),i=n(115461),l=a(n(821454)),s=a(n(858099)),d=n(429623),u=a(n(23217)),c=a(n(369613)),f=n(548360),p=a(n(156720)),h=n(735461),m=n(785893);const g={body:{flexGrow:"ggj6brxn",width:"ln8gz9je"},previewContainer:{boxSizing:"cm280p3y",paddingTop:"gq7nj7y3",paddingEnd:"ij4mqf17",paddingBottom:"eynyaxvo",paddingStart:"emy6cf64",color:"jmly3brn",backgroundColor:"qqs366u4",borderTopStartRadius:"ikqdvm1y",borderTopEndRadius:"m3qqxsiz",borderBottomEndRadius:"r1ncx0sg",borderBottomStartRadius:"mmj7r7ye"},previewIcon:{marginBottom:"du8bjn1j"},header:{marginTop:"opp68qpq",marginEnd:"jnwc1y2a",marginBottom:"brac1wpa",marginStart:"svoq16ka",fontSize:"q9lllk4z"},metadata:{fontSize:"f8jlpxt4"},footer:{position:"g0rxnol2",display:"p357zi0d",alignItems:"gndfcl4n",justifyContent:"ac2vgrno",minHeight:"pazt69qo",paddingTop:"fbgy3m38",paddingEnd:"l9g3jx6n",paddingBottom:"oq31bsqd",paddingStart:"lyvj5e2u"}},v=new Map([["text/plain","preview-txt"],["text/rtf","preview-doc"],["application/msword","preview-doc"],["application/vnd.openxmlformats-officedocument.wordprocessingml.document","preview-doc"],["text/csv","preview-sheet"],["application/vnd.ms-excel","preview-sheet"],["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","preview-sheet"],["application/vnd.ms-powerpoint","preview-slides"],["application/vnd.openxmlformats-officedocument.presentationml.presentation","preview-slides"],["audio/aac","preview-audio"],["audio/mp4","preview-audio"],["audio/amr","preview-audio"],["audio/mpeg","preview-audio"],["audio/ogg; codecs=opus","preview-audio"],["audio/wav","preview-audio"],["application/zip","preview-compressed"]])},821454:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{filename:t,pageCount:n}=e;let a=null;null!=n&&n>0&&(a=r.default.t(138,{count:n,_plural:n}));return(0,s.jsxs)("div",{className:(0,l.default)(d),children:[(0,s.jsx)("button",{"aria-label":i.fbt._("Close",null,{hk:"17RE2w"}),onClick:e.onClose,className:(0,l.default)(p),children:(0,s.jsx)(o.default,{"aria-hidden":!0,color:"secondary",name:"x"})}),(0,s.jsxs)("div",{className:(0,l.default)(u),children:[t&&(0,s.jsx)("span",{className:(0,l.default)(c),children:t}),null!=a&&(0,s.jsx)("span",{className:(0,l.default)(f),children:a})]})]})};var r=a(n(568064)),o=a(n(23217)),i=n(548360),l=a(n(156720)),s=n(785893);const d={display:"p357zi0d",alignItems:"gndfcl4n",justifyContent:"o4u7okr9",minHeight:"cl7oiv0o",paddingTop:"fbgy3m38",paddingEnd:"l9g3jx6n",paddingBottom:"oq31bsqd",paddingStart:"lyvj5e2u",backgroundColor:"ej3x2ktq"},u={display:"p357zi0d",flexGrow:"ggj6brxn",flexShrink:"m0h2a7mj",flexBasis:"rjo8vgbg",flexDirection:"f8m0rgwh",alignItems:"gndfcl4n"},c={fontSize:"f8jlpxt4",color:"tl2vja3b"},f={marginTop:"hymafltn",fontSize:"dsh4tgtl",color:"pm5hny62"},p={cursor:"ajgl1lbb"}},87618:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{onClose:t,item:n,attachMedia:a,chat:m,onCaptionChange:g,onEnter:v,setCaptionInputRef:x,setNewCaptionInputRef:C,onToggleViewOnce:y,onFiles:_}=e;const{mimetype:b,fullPreview:E,fullPreviewSize:S,documentPageCount:j,filename:k}=n,{caption:T}=(0,f.useModelValues)(a,["caption"]);if(!(E&&S&&null!=j&&j>0))return(0,p.jsx)(i.default,{mimeType:n.mimetype,filesize:n.filesize,filename:n.filename,fileExt:n.fileExt,onClose:t,attachMedia:n,chat:m,onCaptionChange:g,onEnter:v,setCaptionInputRef:x,setNewCaptionInputRef:C,onToggleViewOnce:y,onFiles:_});let w;(0,r.documentWithCaptionsSendEnabled)()&&(w=(0,p.jsx)(u.default,{chat:m,caption:T,viewOnce:!1,viewOnceDisabled:!0,msgType:o.MSG_TYPE.DOCUMENT,theme:"document",onToggleViewOnce:y,onChange:g,onEnter:v,onFiles:_,setCaptionInputRef:e=>{x(a.id,e)},setNewCaptionInputRef:e=>{C(a.id,e)}},a.id));return(0,p.jsxs)(s.FlexColumn,{xstyle:h.container,justify:"all",align:"center",children:[(0,p.jsx)(d.default,{xstyle:h.containerElements,children:(0,p.jsx)(l.default,{onClose:t,filename:k,pageCount:j})}),(0,p.jsx)(c.default,{fullPreview:E,fullPreviewSize:S,pageCount:j,showPageCount:!1,showBorder:!0,mimeType:b,filename:k}),(0,p.jsx)(s.FlexRow,{xstyle:[h.footer,h.containerElements],justify:"center",align:"center",children:w})]})};var r=n(408139),o=n(115461),i=a(n(350580)),l=a(n(821454)),s=n(429623),d=a(n(748846)),u=a(n(369613)),c=a(n(235137)),f=(a(n(156720)),n(735461)),p=n(785893);const h={container:{position:"g0rxnol2",overflowX:"gfz4du6o",overflowY:"r7fjleex",height:"ppled2lx"},containerElements:{width:"ln8gz9je"},footer:{position:"g0rxnol2",minHeight:"pazt69qo",paddingTop:"fbgy3m38",paddingEnd:"l9g3jx6n",paddingBottom:"oq31bsqd",paddingStart:"lyvj5e2u"}}},265235:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{attachMedia:t,onClose:n,chat:a,viewOnce:d,viewOnceDisabled:p,onCaptionChange:h,onEnter:m,setCaptionInputRef:g,setNewCaptionInputRef:v,onToggleViewOnce:x,onFiles:C}=e;const{caption:y}=(0,u.useModelValues)(t,["caption"]);return(0,c.jsxs)("div",{className:i.default.container,children:[(0,c.jsx)(o.default,{onClose:n}),(0,c.jsx)(s.default,{mimeType:t.mimetype,url:t.fullPreview,isGif:t.isGif,size:t.fullPreviewSize,processing:t.state===f,preview:t.preview}),(0,c.jsx)("div",{className:i.default.footer,children:(0,c.jsx)(l.default,{chat:a,caption:y,viewOnce:d,viewOnceDisabled:p,msgType:r.MSG_TYPE.VIDEO,theme:"video",onToggleViewOnce:x,onChange:h,onEnter:m,onFiles:C,setCaptionInputRef:e=>{g(t.id,e)},setNewCaptionInputRef:e=>{v(t.id,e)}},t.id)})]})};var r=n(115461),o=a(n(821454)),i=a(n(891976)),l=a(n(369613)),s=a(n(284124)),d=n(480666),u=n(735461),c=n(785893);const{PROCESSING:f}=d.ATTACH_MEDIA_STATE},175481:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.BlurToolbar=t.BLUR_MIN_RADIUS=t.BLUR_MAX_RADIUS=t.BLUR_DEFAULT_RADIUS=t.BLUR_DEFAULT_MODE=void 0;var r=a(n(145095)),o=a(n(188262)),i=n(160811),l=n(471174),s=n(429623),d=a(n(829595)),u=a(n(23217)),c=n(718644),f=a(n(624717)),p=n(934855),h=n(548360),m=n(667294),g=a(n(156720)),v=n(785893);t.BLUR_MIN_RADIUS=10;t.BLUR_MAX_RADIUS=100;t.BLUR_DEFAULT_RADIUS=50;const x=p.BlurMode.Pixelate;t.BLUR_DEFAULT_MODE=x;const C={blurModeBtn:{paddingTop:"gaujl5hk",paddingBottom:"p9a4hubg",paddingStart:"kjjye8e3",paddingEnd:"tcyu26xv",":hover":{backgroundColor:"cjq3wztw"}},blurModeBtnDivider:{width:"c97dh06e",paddingTop:"i5tg98hk",paddingEnd:"f9ovudaz",paddingBottom:"przvwfww",paddingStart:"gx1rr48f",marginTop:"tt8xd2xn",marginEnd:"jnwc1y2a",marginBottom:"mpdn4nr2",marginStart:"svoq16ka"},blurModeIconContainer:{marginEnd:"rvlagp7p"},blurModeIcon:{width:"i94gqilv",height:"bmot90v7"},checkmarkIcon:{width:"i0x3nve6",height:"ilf8vifs"},slider:{paddingStart:"sta02ykp",paddingEnd:"a5i9q28d"}};function y(e,t){let{blurMode:n,blurRadius:a,onBlurModeChange:x,onBlurRadiusChange:y}=e;const[_,b]=(0,m.useState)(null),E=(0,m.useRef)(null),S=()=>Boolean(_);return(0,m.useImperativeHandle)(t,(()=>({isPanelVisible:S}))),(0,v.jsxs)(s.FlexRow,{align:"center",children:[(0,v.jsx)(o.default,{ref:E,onClick:e=>{e.preventDefault();const t={menu:Array.from(p.BlurMode.members()).map((e=>(0,v.jsx)(l.DropdownItem,{testid:`${String(e).toLowerCase()}-mode-button`,action:t=>((e,t)=>{e.preventDefault(),x(t)})(t,e),children:(0,v.jsxs)(s.FlexRow,{align:"center",className:(0,g.default)(C.blurModeBtn),children:[(0,v.jsx)(u.default,{className:(0,g.default)(C.blurModeIconContainer),iconXstyle:C.blurModeIcon,name:e===p.BlurMode.Smooth?"media-editor-blur-smooth":"media-editor-blur-pixelate"}),e===n&&(0,v.jsx)(u.default,{iconXstyle:C.checkmarkIcon,name:"checkmark-medium"})]})},e))),dirX:i.DirX.CENTER,dirY:i.DirY.TOP,offsetY:-5,anchor:(0,r.default)(E.current,"blurModePickerButtonRef.current")};b(t)},caret:_?"down":"up",icon:(0,v.jsx)(u.default,{iconXstyle:C.blurModeIcon,name:n===p.BlurMode.Smooth?"media-editor-blur-smooth":"media-editor-blur-pixelate",display:"inline"}),title:h.fbt._("Blur Mode",null,{hk:"a35qL"}),children:(0,v.jsx)("div",{className:(0,g.default)(C.blurModeBtnDivider)})}),(0,v.jsx)("div",{className:(0,g.default)(C.slider),children:(0,v.jsx)(d.default,{min:10,max:100,value:a,onChange:(e,t)=>{y(e,t)},displayValue:!0})}),_&&(0,v.jsx)(c.UIE,{displayName:"BlurModePicker",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:()=>{b(null)},children:(0,v.jsx)(f.default,{contextMenu:_})})]})}const _=(0,m.forwardRef)(y);t.BlurToolbar=_},188262:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(286382)),o=n(429623),i=a(n(23217)),l=a(n(294184)),s=n(667294),d=n(785893);var u=(0,s.forwardRef)(((e,t)=>{const{children:n,onClick:a,icon:s,caret:u,disabled:c,title:f,selected:p}=e;let h,m;if("string"==typeof s)switch(s){case"sans-serif":h=(0,d.jsx)(i.default,{name:"panel-emoji-flags",display:"inline"});break;case"checked":h=(0,d.jsx)(i.default,{name:"checkmark",display:"inline"});break;case"unchecked":h=(0,d.jsx)(i.default,{name:"x",display:"inline"});break;default:s&&(h=(0,d.jsx)(i.default,{name:s,display:"inline"}))}else s&&(h=s);if(u)switch(u){case"up":m=(0,d.jsx)(i.default,{name:"chevron-down-alt",display:"inline",className:r.default.rotate});break;case"down":m=(0,d.jsx)(i.default,{name:"chevron-down-alt",display:"inline"})}return(0,d.jsxs)("div",{ref:t,role:"button",tabIndex:"-1",onClick:a,className:(0,l.default)(r.default.container,e.className,{[r.default.disabled]:c,[r.default.selected]:p}),title:f,children:[h&&(0,d.jsx)(o.FlexRow,{align:"center",justify:"center",className:r.default.icon,children:h}),n&&(0,d.jsx)("span",{className:r.default.body,children:n}),m&&(0,d.jsx)("span",{className:r.default.caret,children:m})]})}));t.default=u},966430:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(568064)),o=a(n(188262)),i=a(n(431488)),l=a(n(229598)),s=a(n(104837)),d=n(160811),u=n(429623),c=n(718644),f=a(n(624717)),p=n(667294),h=n(785893);function m(e,t){const{colors:n,onColorSelect:a,selectedColor:m}=e,[g,v]=(0,p.useState)(null),x=()=>{v(null)},C=()=>Boolean(g);(0,p.useImperativeHandle)(t,(()=>({isPanelVisible:C})));const y=n.map((e=>{let{primaryColor:t,secondaryColor:n}=e;return(0,h.jsx)(i.default,{primaryColor:t,onSelect:()=>a(t),selected:Boolean(m&&m.equals(t))},t.toString())}));let _=null;return g&&(_=(0,h.jsx)(c.UIE,{displayName:"ColorPicker",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:x,children:(0,h.jsx)(f.default,{contextMenu:g})})),(0,h.jsxs)("div",{className:s.default.container,children:[(0,h.jsx)(u.FlexRow,{className:s.default.colorChipsContainer,children:y}),(0,h.jsx)(o.default,{onClick:e=>{e.preventDefault(),e.stopPropagation();const t={menu:(0,h.jsx)(l.default,{onColorSelect:a,selectedColor:m,onColorPickerClose:x}),dirX:r.default.isRTL()?d.DirX.RIGHT:d.DirX.LEFT,dirY:d.DirY.BOTTOM,type:d.MenuType.ColorPicker,anchor:e.target};v(t)},caret:g?"down":"up"}),_]})}var g=(0,p.forwardRef)(m);t.default=g},431488:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{primaryColor:t,secondaryColor:n,onSelect:a,selected:s,withBorder:d}=e,[u,c]=(0,i.useState)(!1),[f,p]=(0,i.useState)(!1);return(0,l.jsx)("div",{onClick:a,onMouseEnter:()=>{c(!0)},onMouseLeave:()=>{c(!1)},onMouseDown:()=>{p(!0)},onMouseUp:()=>{p(!1)},className:(0,o.default)(r.default.colorButton,{[r.default.selected]:s,[r.default.hover]:u,[r.default.active]:f}),style:{backgroundColor:f&&!s?t.withAlpha(.2).toRgbaString():"transparent"},children:(0,l.jsx)("div",{className:(0,o.default)(r.default.primaryColorChip,{[r.default.colorChipWithBorder]:d&&t.isWhite(),[r.default.primaryColorChipMedium]:"medium"===e.theme}),style:{backgroundColor:t.toRgbaString()},children:n&&s&&(0,l.jsx)("div",{className:r.default.secondaryColorChip,style:{backgroundColor:n.toRgbaString()}})})})};var r=a(n(388501)),o=a(n(294184)),i=n(667294),l=n(785893)},360753:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{color:t,onColorPickerClose:n,onChangeColor:a}=e,h=(0,d.useRef)(null),[m,g]=(0,d.useState)(t.toHex());return(0,c.jsxs)("div",{className:(0,u.default)(f),style:{width:r.CONTAINER_WIDTH,height:r.INPUT_HEIGHT},children:[(0,c.jsx)(l.default,{withBorder:!0,primaryColor:t,selected:!1,theme:"medium"}),(0,c.jsx)(i.HotKeys,{handlers:{enter:n},children:(0,c.jsx)(o.SelectableDiv,{selectable:!0,children:(0,c.jsx)("input",{type:"text",ref:h,className:(0,u.default)(p),value:m,onChange:e=>{const t=e.target.value;if(g(t),!t||!(0,s.isValidHex)(t))return;const n=s.Color.fromHex(t);a(n)}})})})]})};var r=n(698254),o=n(552596),i=n(729424),l=a(n(431488)),s=n(316241),d=n(667294),u=a(n(156720)),c=n(785893);const f={alignItems:"gndfcl4n",boxSizing:"cm280p3y",display:"p357zi0d",justifyContent:"fhf7t426",minHeight:"t2ljgofx",paddingTop:"i5tg98hk",paddingEnd:"ft2m32mm",paddingBottom:"przvwfww",paddingStart:"nu34rnf1"},p={backgroundColor:"thr4l2wc",borderTop:"q4zabkcz",borderEnd:"jkanexlp",borderBottom:"thn59n0e",borderStart:"nsmrnv0a",color:"tviruh8d",fontSize:"bze30y65",lineHeight:"r5qsrrlp",outline:"gk6igrwd",paddingTop:"emrlamx0",paddingEnd:"ft2m32mm",paddingBottom:"aiput80m",paddingStart:"nu34rnf1"}},326162:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{color:t,onChangeSelectedColor:n,onChangeCanvasColor:a}=e,p=(0,l.useRef)(null),[h,m]=(0,l.useState)(!1);(0,l.useEffect)((()=>{const e=p.current;if(!e)return;const t=e.getContext("2d");let n=t.createLinearGradient(0,0,e.width,0);n.addColorStop(0,"#ff0000"),n.addColorStop(1/6,"#ffff00"),n.addColorStop(1/6*2,"#00ff00"),n.addColorStop(.5,"#00ffff"),n.addColorStop(1/6*4,"#0000ff"),n.addColorStop(1/6*5,"#ff00ff"),n.addColorStop(1,"#ff0000"),t.fillStyle=n,t.fillRect(0,0,e.width,e.height),n=t.createLinearGradient(0,0,0,e.height),n.addColorStop(0,"rgba(255, 255, 255, 1)"),n.addColorStop(.5,"rgba(255, 255, 255, 0)"),n.addColorStop(1,"rgba(255, 255, 255, 0)"),t.fillStyle=n,t.fillRect(0,0,e.width,e.height),n=t.createLinearGradient(0,0,0,e.height),n.addColorStop(0,"rgba(0, 0, 0, 0)"),n.addColorStop(.5,"rgba(0, 0, 0, 0)"),n.addColorStop(1,"rgba(0, 0, 0, 1)"),t.fillStyle=n,t.fillRect(0,0,e.width,e.height)}),[]);const g=(0,i.getPositionFromColor)(t),v=(0,d.default)(n,r.THROTTLE_WAIT_TIME),x=(e,t)=>{null!=t&&m(t);const{x:n,y:i}=(e=>{const t=p.current;if(!t)return{x:0,y:0};const n=t.getBoundingClientRect();let a=e.clientX-n.left,o=e.clientY-n.top;return a>n.width&&(a=n.width-.1),a<0&&(a=0),o>n.height&&(o=n.height),o<0&&(o=.1),a-=r.CURSOR_SIZE/2,o-=r.CURSOR_SIZE/2,{x:a,y:o}})(e),l=(e=>{const t=p.current;if(!t)return new o.Color(0,0,0);const n=e.x+r.CURSOR_SIZE/2,a=e.y+r.CURSOR_SIZE/2,i=t.getContext("2d").getImageData(n,a,1,1).data;return new o.Color(i[0],i[1],i[2])})({x:n,y:i});v(l),a(l)};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("canvas",{width:r.CONTAINER_WIDTH,height:r.CANVAS_HEIGHT,className:(0,s.default)(c),ref:p,onMouseDown:e=>{x(e,!0)},onMouseMove:e=>{h&&(e.stopPropagation(),e.preventDefault(),x(e))},onMouseUp:e=>{x(e,!1)}}),(0,u.jsx)("div",{className:(0,s.default)(f),style:{width:r.CURSOR_SIZE,height:r.CURSOR_SIZE,left:g.x,top:g.y,backgroundColor:t.toRgbaString()}})]})};var r=n(698254),o=n(316241),i=n(573473),l=n(667294),s=a(n(156720)),d=a(n(290886)),u=n(785893);const c={borderTopStartRadius:"llnowng2",borderTopEndRadius:"ap6veyk2",boxSizing:"cm280p3y",paddingTop:"i5tg98hk",paddingEnd:"f9ovudaz",paddingBottom:"przvwfww",paddingStart:"gx1rr48f",position:"g0rxnol2"},f={borderTop:"omlynucm",borderEnd:"a0tvyxpe",borderBottom:"se50n2qd",borderStart:"o8ek0a1j",borderTopStartRadius:"pap8jtso",borderTopEndRadius:"fptqv7l3",borderBottomEndRadius:"gygahxu2",borderBottomStartRadius:"hm7f711o",boxShadow:"aejjokna",boxSizing:"cm280p3y",cursor:"bx7g2weo",pointerEvents:"m62443ks",position:"lhggkp7q"}},698254:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.THROTTLE_WAIT_TIME=t.INPUT_HEIGHT=t.DEFAULT_COLOR=t.CURSOR_SIZE=t.CONTAINER_WIDTH=t.CONTAINER_HEIGHT=t.CANVAS_HEIGHT=void 0;var a=n(316241);t.CONTAINER_WIDTH=334;t.CONTAINER_HEIGHT=203;const r=150.22;t.CANVAS_HEIGHT=r;t.INPUT_HEIGHT=52.78;t.CURSOR_SIZE=20;const o=new a.Color(210,252,86);t.DEFAULT_COLOR=o;t.THROTTLE_WAIT_TIME=900},229598:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{selectedColor:t,onColorSelect:n}=e,[a,c]=(0,l.useState)(null!=t?t:i.DEFAULT_COLOR),f=e=>{c(e)},p=e=>{n(e)};return(0,d.jsxs)("div",{className:(0,s.default)(u),style:{width:i.CONTAINER_WIDTH,height:i.CONTAINER_HEIGHT},children:[(0,d.jsx)(o.default,{color:a,onChangeCanvasColor:f,onChangeSelectedColor:p}),(0,d.jsx)(r.default,{color:a,onChangeColor:e=>{f(e),p(e)},onColorPickerClose:e.onColorPickerClose})]})};var r=a(n(360753)),o=a(n(326162)),i=n(698254),l=n(667294),s=a(n(156720)),d=n(785893);const u={position:"g0rxnol2"}},30383:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.CropRotateToolbar=function(e){let{canReset:t,onRotateCanvas:n,onReset:a}=e;return(0,s.jsxs)(i.FlexRow,{className:o.default.container,children:[(0,s.jsx)(r.default,{className:o.default.rotateLeftButton,icon:"media-editor-rotate-left",title:l.fbt._("Rotate left",null,{hk:"2t86bC"}),onClick:()=>n(-90)}),(0,s.jsx)(r.default,{icon:"media-editor-rotate-right",title:l.fbt._("Rotate right",null,{hk:"XqQCf"}),onClick:()=>n(90)}),(0,s.jsx)(r.default,{onClick:a,disabled:!t,children:l.fbt._("Reset",null,{hk:"1aUuOP"})})]})};var r=a(n(188262)),o=a(n(752418)),i=n(429623),l=n(548360),s=n(785893)},866747:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.Font=void 0;var r=a(n(81109)),o=a(n(540436)),i=a(n(188262)),l=a(n(179563)),s=a(n(943384)),d=n(429623),u=n(718644),c=a(n(624717)),f=n(39581),p=n(667294),h=n(785893);function m(e,t){const{selectedFont:n,fonts:a,onFontSelect:r,onAlignmentSelect:d,selectedAlignment:m}=e,g=(0,p.useRef)(null),[x,C]=(0,p.useState)(null),y=()=>{C(null)},_=()=>Boolean(x);(0,p.useImperativeHandle)(t,(()=>({isMenuVisible:_})));const b=Boolean(x);let E;return x&&(E=(0,h.jsx)(u.UIE,{displayName:"MediaEditorFontDropdown",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:y,children:(0,h.jsx)(c.default,{contextMenu:x})})),(0,h.jsxs)("div",{ref:g,className:s.default.container,children:[(0,h.jsx)(i.default,{onClick:()=>{if(x)return;if(!g.current)return;const e=(0,h.jsx)(l.default,{fonts:a,selectedFont:n,selectedAlignment:m,onFontSelect:r,onAlignmentSelect:d});C({menu:e,anchor:g.current})},icon:(0,h.jsx)(v,{font:n}),selected:b,caret:b?"down":"up",children:(0,h.jsx)("span",{className:s.default.fontLabel,children:(0,f.getFontTranslation)(n)})}),(0,h.jsx)(o.default,{transitionName:"dropdown",children:E})]})}const g=(0,p.forwardRef)(m);function v(e){let{font:t}=e;return(0,h.jsx)(d.FlexRow,{className:s.default.icon,style:(0,r.default)({},(0,f.getFontStyle)(t)),justify:"center",align:"center",children:(0,h.jsx)("div",{"aria-hidden":"true",children:"A"})})}t.Font=g},179563:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onFontSelect:t,onAlignmentSelect:n,selectedFont:a,selectedAlignment:r}=e;(0,f.useEffect)((()=>{s.FontLoader.loadAllFonts()}),[]);const o=(e,n)=>{e.stopPropagation(),t(n)};return(0,p.jsxs)("div",{children:[e.fonts.map((e=>(0,p.jsx)(m,{font:e,isSelectedFont:a===e,onAction:o},e))),(0,p.jsx)(g,{selectedAlignment:r,onAction:(e,t)=>{e.stopPropagation(),n(t)}},"alignment")]})};var r=a(n(216702)),o=n(471174),i=n(429623),l=a(n(748846)),s=n(999267),d=a(n(23217)),u=n(39581),c=a(n(294184)),f=n(667294),p=n(785893);const h=[{alignment:u.TextAlignment.LEFT,icon:"align-left"},{alignment:u.TextAlignment.CENTER,icon:"align-center"},{alignment:u.TextAlignment.RIGHT,icon:"align-right"}];function m(e){let t,{isSelectedFont:n,font:a,onAction:i}=e;n&&(t=(0,p.jsx)("span",{className:r.default.selected,children:(0,p.jsx)(d.default,{name:"checkmark",display:"inline"})}));const l=(0,u.getFontTranslation)(a);let s;switch(a){case u.FONTS.SANS_SERIF:s=r.default.sansSerif;break;case u.FONTS.SERIF:s=r.default.serif;break;case u.FONTS.NORICAN_REGULAR:s=r.default.noricanRegular;break;case u.FONTS.BRYNDAN_WRITE:s=r.default.bryndanWrite;break;case u.FONTS.OSWALD_HEAVY:s=r.default.oswaldHeavy}return(0,p.jsx)(o.DropdownItem,{action:e=>i(e,a),children:(0,p.jsxs)("div",{role:"button",className:r.default.item,style:(0,u.getFontStyle)(a),children:[(0,p.jsx)("span",{className:s,children:l}),t]})})}function g(e){let{selectedAlignment:t,onAction:n}=e;return(0,p.jsx)(i.FlexRow,{className:r.default.alignmentContainer,justify:"around",align:"center",children:h.map((e=>{let{alignment:a,icon:i}=e;return(0,p.jsx)(l.default,{children:(0,p.jsx)(o.DropdownItem,{action:e=>n(e,a),children:(0,p.jsx)(d.default,{name:i,className:(0,c.default)(r.default.alignmentIcon,{[r.default.alignmentIconSelected]:t})})})},i)}))})}},254277:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{selectedLayer:t,inPaintMode:n,inCropRotateMode:a,inTextEditingMode:C,inOutlineMode:y,canUndo:_,canRedo:b,onPaintSelect:E,onCropRotateSelect:S,onTextSelect:j,onEmojiSelect:k,onToggleEmojiPanel:T,onStickerSelect:w,onToggleStickerPanel:D,onOutlineSelect:I,onBlurSelect:M,onUndo:P,onRedo:A,showOutline:O}=e;const[R,L]=(0,v.useState)(),[N,F]=(0,v.useState)(),B=(0,v.useRef)({});B.current={inPaintMode:n,onEmojiSelect:k,onStickerSelect:w,onPaintSelect:E};const U=()=>{a?S():n?E():y&&I()},H=()=>{L(null),T(!1)},G=()=>{F(null),D(!1)};return(0,x.jsxs)(i.MenuBar,{theme:"media-editor",children:[O&&(0,x.jsx)(i.MenuBarItem,{icon:(0,x.jsx)(u.default,{name:"scissors"}),testid:"outline-button",title:g.fbt._("Outline",null,{hk:"47JwiV"}),onClick:e=>{e.preventDefault(),y||U(),I()},selected:y},"outline"),(0,x.jsx)(i.MenuBarItem,{icon:(0,x.jsx)(u.default,{name:"media-editor-emoji"}),testid:"emoji-button",title:g.fbt._("Emoji",null,{hk:"3f1gtD"}),onClick:e=>{e.preventDefault(),e.stopPropagation(),U();const t=(0,x.jsx)(l.EmojiPanel,{onEmoji:e=>{B.current.inPaintMode&&B.current.onPaintSelect(),B.current.onEmojiSelect(e),H()},onFocusNext:H,onFocusPrev:H});L({menu:t,dirY:o.DirY.TOP,type:o.MenuType.EmojiPicker,anchor:e.target}),T(!0)},selected:Boolean(R)||t instanceof p.ImageLayer&&t.isEmoji()},"emoji"),(0,x.jsx)(i.MenuBarItem,{icon:(0,x.jsx)(u.default,{name:"media-editor-sticker"}),testid:"sticker-button",title:g.fbt._("Sticker",null,{hk:"4342bb"}),onClick:e=>{e.preventDefault(),e.stopPropagation(),U();const t=e=>{B.current.inPaintMode&&B.current.onPaintSelect(),B.current.onStickerSelect(e),G()};let n;(0,r.isMDBackend)()?m.ServerProps.webServerStickerPanel&&(n=(0,x.jsx)(d.default,{onSticker:t,onFocusNext:G,onFocusPrev:G})):n=(0,x.jsx)(s.default,{onSticker:t,onFocusNext:G,onFocusPrev:G}),n&&(F({menu:n,dirY:o.DirY.TOP,type:o.MenuType.StickerPicker,anchor:e.target}),D(!0))},selected:Boolean(N)||t instanceof p.ImageLayer&&t.isSticker()},"sticker"),(0,x.jsx)(i.MenuBarItem,{icon:(0,x.jsx)(u.default,{name:"media-editor-text"}),testid:"text-button",title:g.fbt._("Text",null,{hk:"12XnGO"}),onClick:e=>{e.preventDefault(),U(),j()},selected:C||t instanceof h.TextLayer},"text"),(0,x.jsx)(i.MenuBarItem,{icon:(0,x.jsx)(u.default,{name:"media-editor-drawing"}),testid:"paint-button",title:g.fbt._("Paint",null,{hk:"U5v5P"}),onClick:e=>{e.preventDefault(),n||U(),E()},selected:n},"paint"),null,(0,x.jsx)(i.MenuBarItem,{icon:(0,x.jsx)(u.default,{name:"media-editor-crop-rotate"}),testid:"crop-rotate-button",title:g.fbt._("Crop & Rotate",null,{hk:"3WqVhk"}),onClick:e=>{e.preventDefault(),a||U(),S()},selected:a},"crop-rotate"),(0,x.jsx)(i.MenuBarItem,{icon:(0,x.jsx)(u.default,{name:"media-editor-undo"}),testid:"undo-button",title:g.fbt._("Undo",null,{hk:"12qsD9"}),disabled:!_,onClick:P},"undo"),(0,x.jsx)(i.MenuBarItem,{icon:(0,x.jsx)(u.default,{name:"media-editor-redo"}),testid:"redo-button",title:g.fbt._("Redo",null,{hk:"39SiUc"}),disabled:!b,onClick:A},"redo"),N&&(0,x.jsx)(c.UIE,{displayName:"StickerPicker",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:G,children:(0,x.jsx)(f.default,{contextMenu:N})}),R&&(0,x.jsx)(c.UIE,{displayName:"EmojiPicker",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:H,children:(0,x.jsx)(f.default,{contextMenu:R})})]})};var r=n(88555),o=(n(408139),n(160811)),i=n(646346),l=n(930424),s=a(n(764894)),d=a(n(607380)),u=a(n(23217)),c=n(718644),f=a(n(624717)),p=(n(934855),n(839989)),h=n(881829),m=n(964551),g=n(548360),v=n(667294),x=n(785893)},105807:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.OutlineToolbar=function(e){let{smoothing:t,onSmoothingToggle:n,canReset:a,onReset:u}=e;return(0,s.jsxs)(o.FlexRow,{children:[(0,s.jsx)(r.default,{className:(0,l.default)(d),icon:"outline-smooth",title:i.fbt._("Smooth",null,{hk:"4vwxxi"}),selected:t,onClick:()=>n(!0)}),(0,s.jsx)(r.default,{className:(0,l.default)(d),icon:"outline-straight",title:i.fbt._("Straight",null,{hk:"3KyC8d"}),selected:!t,onClick:()=>n(!1)}),(0,s.jsx)(r.default,{className:(0,l.default)(d),onClick:u,disabled:!a,children:i.fbt._("Reset",null,{hk:"1aUuOP"})})]})};var r=a(n(188262)),o=n(429623),i=n(548360),l=a(n(156720)),s=n(785893);const d={marginTop:"tt8xd2xn",marginEnd:"bugiwsl0",marginBottom:"mpdn4nr2",marginStart:"fooq7fky"}},977268:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{checked:t,onBackgroundToggle:n}=e;const a=(0,d.jsx)("div",{className:(0,l.default)(o.default.cirle,{[o.default.circleFilled]:t}),children:t?(0,d.jsx)("div",{className:o.default.checked,children:(0,d.jsx)(i.default,{name:"checkmark"})}):(0,d.jsx)("div",{className:o.default.unchecked})});return(0,d.jsx)(r.default,{icon:a,onClick:n,children:s.fbt._("Background",null,{hk:"3Y8odq"})})};var r=a(n(188262)),o=a(n(189046)),i=a(n(23217)),l=a(n(294184)),s=n(548360),d=n(785893)},609165:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=e.thicknesses.map(((t,n)=>(0,l.jsx)(s,{thickness:t,onThicknessSelect:e.onThicknessSelect,selectedThickness:e.selectedThickness},n)));return(0,l.jsx)("div",{className:r.default.container,children:t})};var r=a(n(560349)),o=n(554274),i=a(n(294184)),l=n(785893);function s(e){return(0,l.jsx)("div",{onClick:()=>e.onThicknessSelect(e.thickness),className:(0,i.default)(r.default.thicknessButton,{[r.default.selected]:e.selectedThickness&&e.selectedThickness===e.thickness}),children:(0,l.jsx)("div",{className:r.default.thicknessChip,style:{height:(0,o.getThicknessValue)(e.thickness),width:(0,o.getThicknessValue)(e.thickness)}})},e.thickness.toString())}},492202:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.createCanvasFromSticker=u,t.createImageFromEmoji=function(){return p.apply(this,arguments)},t.createImageFromSticker=function(){return h.apply(this,arguments)},t.createImageFromUrl=f;var r=a(n(348926)),o=n(431645),i=n(565885),l=a(n(427678)),s=n(284866),d=n(767247);function u(){return c.apply(this,arguments)}function c(){return(c=(0,r.default)((function*(e){let t=e.rgbaBuffer;if(!t){const n=s.MediaBlobCache.get(e.filehash);if(!n)throw new Error("Failed to get media blob");const a=yield(0,i.blobToArrayBuffer)(n),r=(yield(0,l.default)(a)).frames[0];if(!r)throw new Error("Failed to get sticker first frame.");t=r.rgbaBuffer}const n=e.fullWidth,a=e.fullHeight,r=document.createElement("canvas");r.width=n,r.height=a;const o=r.getContext("2d"),d=o.createImageData(n,a);return d.data.set(new Uint8Array(t)),o.putImageData(d,0,0),r}))).apply(this,arguments)}function f(e){return new Promise(((t,n)=>{const a=new Image;a.crossOrigin="anonymous",a.onload=()=>{t(a)},a.onerror=n,a.src=e}))}function p(){return(p=(0,r.default)((function*(e){const t=d.EmojiUtil.getGlyphPath(e,160);if(null==t)return;return yield f(t)}))).apply(this,arguments)}function h(){return(h=(0,r.default)((function*(e){let t;if(yield(0,o.detectWebpSupport)()){const n=e.mediaData.filehash,a=s.MediaBlobCache.getOrCreateURL(n);t=yield f(a)}else t=yield u(e.mediaData);return t}))).apply(this,arguments)}},573473:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPositionFromColor=function(e){const t=e.toHsl(),n=a.CONTAINER_WIDTH*t.hue-a.CURSOR_SIZE/2,r=a.CANVAS_HEIGHT*(1-t.lightness)-a.CURSOR_SIZE/2;return{x:n,y:r}};var a=n(698254)},91788:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.getPointFromGroup=function(e){return new r.default({x:e.target.x()-e.target.offsetX(),y:e.target.y()-e.target.offsetY()})},t.getPointFromStage=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!t)return new r.default({x:0,y:0});const{x:a,y:o}=t.getAbsoluteScale(),i=t.content.getBoundingClientRect();let l=e.clientX-i.left,s=e.clientY-i.top;n&&(l=Math.min(Math.max(0,l),i.width),s=Math.min(Math.max(0,s),i.height));return new r.default({x:l/a,y:s/o})},t.getRotationFromGroup=function(e){return e.target.rotation()},t.getScaleFromGroup=function(e){return e.target.scaleX()},t.isEventOnAnchor=function(e){var t,n;return null!==(t=null===(n=e.target.attrs.name)||void 0===n?void 0:n.includes("anchor"))&&void 0!==t&&t},t.isStageCorner=function(e,t){if(!t)return!1;const{x:n,y:a}=t.getAbsoluteScale(),{width:r,height:o}=t.content.getBoundingClientRect();return 0===e.x&&0===e.y||0===e.x&&e.y===o/a||e.x===r/n&&0===e.y||e.x===r/n&&e.y===o/a};var r=a(n(216186))},199282:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Circle",{enumerable:!0,get:function(){return a.Circle}}),Object.defineProperty(t,"Group",{enumerable:!0,get:function(){return a.Group}}),Object.defineProperty(t,"Image",{enumerable:!0,get:function(){return a.Image}}),Object.defineProperty(t,"Layer",{enumerable:!0,get:function(){return a.Layer}}),Object.defineProperty(t,"Line",{enumerable:!0,get:function(){return a.Line}}),Object.defineProperty(t,"Path",{enumerable:!0,get:function(){return a.Path}}),Object.defineProperty(t,"Rect",{enumerable:!0,get:function(){return a.Rect}}),Object.defineProperty(t,"Stage",{enumerable:!0,get:function(){return a.Stage}}),Object.defineProperty(t,"Text",{enumerable:!0,get:function(){return a.Text}}),Object.defineProperty(t,"Transformer",{enumerable:!0,get:function(){return a.Transformer}});var a=n(577201);n(907643),n(671298),n(227149),n(87339),n(275244),n(723787),n(229516)},515513:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a=(t+360)%360;if(!n&&(90===a||270===a)){const t=e.height;e.height=e.width,e.width=t}90!==a&&180!==a||(n?e.x+=e.width:e.x-=e.width);180!==a&&270!==a||(n?e.y+=e.height:e.y-=e.height);if(n&&(90===a||270===a)){const t=e.height;e.height=e.width,e.width=t}}},579230:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateContainScale=function(e,t,n,a){if(0===e||0===t)return 1;if(!n.isEmpty()&&(e>n.width||t>n.height))return Math.min(n.width/e,n.height/t);if(!a.isEmpty()&&e<a.width&&t<a.height)return Math.min(a.width/e,a.height/t);return 1}},674252:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{mimeType:t,url:n}=e;return(0,o.jsx)("div",{className:r.default.container,"data-animate-attach-media":!0,children:(0,o.jsx)("div",{className:r.default.media,children:(0,o.jsx)("audio",{controls:!0,type:t,src:n})})})};var r=a(n(877046)),o=n(785893)},539414:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n;let{mimeType:a,filename:s}=e;const d=(0,i.default)(r.default.icon,null!==(t=null===(n=o.DOCUMENT_MIMETYPES[a])||void 0===n?void 0:n.icon)&&void 0!==t?t:"icon-doc-generic");return(0,l.jsx)("div",{className:r.default.container,"data-animate-attach-media":!0,children:(0,l.jsx)("div",{className:r.default.media,children:(0,l.jsxs)("div",{className:r.default.document,children:[(0,l.jsx)("div",{className:d}),(0,l.jsx)("div",{className:r.default.text,children:s})]})})})};var r=a(n(271003)),o=n(843257),i=a(n(294184)),l=n(785893)},284124:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let t,{mimeType:n,url:a,isGif:o,size:s,processing:m,preview:g}=e;switch(h[n].msgType){case"image":t=(0,p.jsx)("img",{alt:i.default.t(819),src:a,className:l.default.img});break;case"video":const e=o?{loop:!m,autoPlay:!m,muted:!1,controls:!1}:{},s=m?(0,p.jsx)("div",{className:l.default.spinner,children:(0,p.jsx)(u.Spinner,{color:u.colorOptions.white,size:50,stroke:3})}):null,d=g?(0,p.jsx)("img",{alt:i.default.t(819),className:l.default.staticPreview,src:`data:image/jpeg;base64,${g}`}):null,h=m?null:(0,p.jsx)(c.default,(0,r.default)((0,r.default)({controls:!0,controlsList:"nodownload nofullscreen",className:l.default.video},e),{},{src:a}));t=(0,p.jsxs)("div",{className:(0,f.default)(l.default.img,l.default.videoContainer),children:[s,h,d]});break;case"audio":t=(0,p.jsx)("audio",{controls:!0,className:l.default.audio,type:n,src:a})}return(0,p.jsx)("div",{className:l.default.container,"data-animate-attach-media":!0,children:(0,p.jsx)("div",{className:l.default.media,children:(0,p.jsx)(d.default,{type:"scaleDown",size:s,children:t})})})};var r=a(n(81109)),o=a(n(535937)),i=a(n(568064)),l=a(n(358523)),s=n(843257),d=a(n(311791)),u=n(111054),c=a(n(523425)),f=a(n(294184)),p=n(785893);const h=(0,o.default)(s.MIMETYPES,(e=>"image"===(null==e?void 0:e.msgType)||"video"===(null==e?void 0:e.msgType)))},235137:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{fullPreview:t,fullPreviewSize:n,pageCount:a,mimeType:u,filename:c,showPageCount:f=!0,showBorder:p=!1}=e;if(t&&n&&null!=a&&a>0){const e=r.default.t(138,{count:a,_plural:a});return(0,d.jsxs)("div",{className:i.default.container,"data-js-attach-preview":!0,children:[(0,d.jsx)("div",{className:i.default.preview,children:(0,d.jsx)(l.default,{type:"scaleDown",size:n,children:(0,d.jsx)("img",{alt:r.default.t(819),src:t,className:(0,s.default)(i.default.img,{[i.default.imgBorder]:p})})})}),f&&(0,d.jsx)("div",{className:i.default.caption,children:e})]})}return(0,d.jsx)(o.default,{mimeType:u,filename:c})};var r=a(n(568064)),o=a(n(539414)),i=a(n(738728)),l=a(n(311791)),s=a(n(294184)),d=n(785893)},675680:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{disabled:t,isOn:n,mediaType:a,onChange:v,noMargin:x}=e;const[C,y]=(0,h.default)(i.NUX.EPHEMERAL_VIEW_ONCE);return(0,p.useEffect)((()=>{if(!n)return;if(C){const e=(0,m.jsx)(s.default,{onOkClick:()=>{y(),r.ModalManager.close()}});return void r.ModalManager.open(e)}const e=a===o.MSG_TYPE.VIDEO?f.fbt._("Video set to view once",null,{hk:"2L7ZJW"}):f.fbt._("Photo set to view once",null,{hk:"1jN7IR"}),t=(0,u.genId)("view-once-toast"),i=(0,m.jsx)(u.Toast,{msg:e,id:t});return l.ToastManager.open(i),()=>{l.ToastManager.close(t)}}),[C,y,a,n]),(0,m.jsx)(c.default,{testid:"view-once-toggle",xstyle:[g.btnViewOnce,x&&g.btnNoMargin,t&&g.btnDisabled],disabled:t,onClick:()=>v(!n),"aria-pressed":n,children:(0,m.jsx)(d.default,{"aria-label":n?f.fbt._("Turn off view once",null,{hk:"3cl8Dn"}):f.fbt._("Turn on view once",null,{hk:"3pd2lD"}),name:n?"view-once-media-select-on":"view-once-media-select",height:26,width:26})})};var r=n(914597),o=n(115461),i=n(871579),l=n(694816),s=a(n(822594)),d=a(n(23217)),u=n(950452),c=a(n(701784)),f=n(548360),p=n(667294),h=(a(n(156720)),a(n(259732))),m=n(785893);const g={btnViewOnce:{display:"f804f6gw",marginTop:"c46o30wg",marginEnd:"bugiwsl0",marginStart:"eab7llgz",color:"svlsagor"},btnNoMargin:{marginTop:"tt8xd2xn",marginEnd:"jnwc1y2a",marginBottom:"mpdn4nr2",marginStart:"svoq16ka"},btnDisabled:{cursor:"h2qzpyga",opacity:"notw83rv"}}},822594:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onOkClick:t}=e;return(0,h.jsx)(i.default,{onOK:t,cancelText:o.default.t(394),onCancel:()=>{(0,l.openExternalLink)((0,r.getViewOnceFaqUrl)())},children:(0,h.jsxs)(s.FlexColumn,{children:[(0,h.jsx)(d.default,{xstyle:m.graphic,align:"center",children:(0,h.jsx)(u.default,{name:"view-once-sender-nux",width:195,height:177})}),(0,h.jsx)(c.TextHeader,{className:(0,p.default)(m.text),theme:"popup-title",children:f.fbt._("Send photos and videos that can be viewed only once",null,{hk:"t5MUO"})}),(0,h.jsx)(c.TextParagraph,{className:(0,p.default)(m.text),color:"secondary",children:f.fbt._("For more privacy, your photo or video will disappear from the chat after the recipient opens it once. Remember, people can always take screenshots.",null,{hk:"Y4e8s"})})]})})};var r=n(221310),o=a(n(568064)),i=a(n(452665)),l=n(912591),s=n(429623),d=a(n(748846)),u=a(n(23217)),c=n(113923),f=n(548360),p=a(n(156720)),h=n(785893);const m={text:{marginBottom:"or9x5nie"},graphic:{marginBottom:"t4zgqcuo"}}},872758:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const[e,t]=(0,s.default)(r.getAutoDownloadPhotos,r.setAutoDownloadPhotos),[n,a]=(0,s.default)(r.getAutoDownloadAudio,r.setAutoDownloadAudio),[u,c]=(0,s.default)(r.getAutoDownloadVideos,r.setAutoDownloadVideos),[f,p]=(0,s.default)(r.getAutoDownloadDocuments,r.setAutoDownloadDocuments);return(0,d.jsxs)(o.SettingsCheckList,{children:[(0,d.jsx)(o.SettingsCheckListItem,{testid:"option-photos",id:"photos",checked:e,onChange:t,children:l.fbt._("Photos",null,{hk:"4wPArA"})}),(0,d.jsx)(o.SettingsCheckListItem,{testid:"option-audio",id:"audio",checked:n,onChange:a,children:l.fbt._("Audio",null,{hk:"eXaYA"})}),(0,d.jsx)(o.SettingsCheckListItem,{testid:"option-videos",id:"videos",checked:u,onChange:c,children:l.fbt._("Videos",null,{hk:"4yB3QY"})}),(0,d.jsx)(o.SettingsCheckListItem,{testid:"option-documents",id:"documents",checked:f,onChange:p,children:l.fbt._("Documents",null,{hk:"1UBrPi"})}),(0,d.jsx)(o.SettingsCheckListSection,{children:(0,d.jsx)(i.TextDiv,{theme:"muted",children:l.fbt._("Voice Messages are always automatically downloaded for the best communication experience",null,{hk:"jmuCZ"})})})]})};var r=n(555452),o=n(640015),i=n(113923),l=n(548360),s=a(n(627698)),d=n(785893)},610403:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{labelId:t,onAddLabel:n,onUpdateLabel:a,onCancel:E}=e,S=(0,v.default)((()=>t?f.LabelCollection.assertGet(t):void 0)),[j,k]=(0,m.useState)((()=>{var e;return(null===(e=S.current)||void 0===e?void 0:e.color)||void 0})),[T,w]=(0,m.useState)((()=>{var e;return(null===(e=S.current)||void 0===e?void 0:e.name)||""})),[D,I]=(0,m.useState)(void 0),M=e=>{let t=!0,n=null;return e&&""!==e.trim()||(t=!1),S.current&&S.current.name===e||0===f.LabelCollection.where({name:e}).length||(t=!1,n=h.fbt._("Label name already exists",null,{hk:"3du3mm"})),{passed:t,error:n}};(0,m.useEffect)((()=>{n?(f.LabelCollection.getNewLabelColor().then((e=>{k(e||"#d6d7d7")})),(0,o.logLabelOperationEvent)(i.default.LABEL_OPERATIONS.VIEW,1,i.default.LABEL_TARGETS.ADD_LABEL_DIALOG)):a&&(0,o.logLabelOperationEvent)(i.default.LABEL_OPERATIONS.VIEW,1,i.default.LABEL_TARGETS.EDIT_LABEL_DIALOG)}),[]);const P=()=>{if(D)return;(0,o.logLabelOperationEvent)(i.default.LABEL_OPERATIONS.CLICK_POSITIVE,1,n?i.default.LABEL_TARGETS.ADD_LABEL_DIALOG:i.default.LABEL_TARGETS.EDIT_LABEL_DIALOG);const e=T&&T.trim(),l=M(e||"");l.passed?(t&&a?a({id:t,color:j,name:T},p.LABEL_PROPERTIES.NAME):null==n||n(T||"",j),E?E():r.ModalManager.close()):I(l.error)},A=!M(T.trim()).passed;return(0,x.jsx)(u.default,{title:e.onUpdateLabel?h.fbt._("Edit label",null,{hk:"3QX44B"}):h.fbt._("Add new label",null,{hk:"2JFfTv"}),okText:h.fbt._("OK",null,{hk:"2KEeHb"}),onOK:P,okDisabled:A,onCancel:()=>{(0,o.logLabelOperationEvent)(i.default.LABEL_OPERATIONS.CLICK_NEGATIVE,1,n?i.default.LABEL_TARGETS.ADD_LABEL_DIALOG:i.default.LABEL_TARGETS.EDIT_LABEL_DIALOG),E?E():r.ModalManager.close()},children:(0,x.jsxs)("div",{className:(0,g.default)(C),children:[(0,x.jsx)("div",{className:(0,g.default)(y),children:j?(0,l.renderLabelSvg)((0,c.intColorToHex)(j),_):(0,x.jsx)(s.Spinner,{stroke:5,size:20})}),(0,x.jsx)("div",{className:(0,g.default)(b),children:(0,x.jsx)(d.TextInput,{testid:"add-new-label-name-input",focusOnMount:!0,hideFloatingLabel:!0,showRemaining:!0,supportsEmoji:!0,value:T,error:D,maxLength:100,onChange:e=>{const t=M(e);w(e),I(t.passed?void 0:t.error)},onEnter:e=>{e.stopPropagation(),P()},placeholder:h.fbt._("New label",null,{hk:"33ueym"})})})]})})};var r=n(914597),o=n(265433),i=a(n(471410)),l=n(384543),s=n(111054),d=n(990011),u=a(n(452665)),c=n(208803),f=n(316770),p=n(859846),h=n(548360),m=n(667294),g=a(n(156720)),v=a(n(616223)),x=n(785893);const C={display:"p357zi0d"},y={display:"p357zi0d",flexGrow:"tvf2evcx",flexShrink:"oq44ahr5",flexBasis:"gxu21ubf",alignItems:"gndfcl4n",justifyContent:"ac2vgrno",height:"rqm6ogl5",paddingTop:"msavwer2",marginEnd:"spjzgwxb"},_={width:"cxkis295",height:"hpdpob1j"},b={flexGrow:"ggj6brxn",flexShrink:"m0h2a7mj",flexBasis:"lb5m6g5c",overflowX:"gfz4du6o",overflowY:"r7fjleex"}},343318:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{product:t,sessionId:n}=e,[a,E]=(0,_.useState)(!1),[S,j]=(0,_.useState)(!1),[k,T]=(0,_.useState)(""),w=()=>{d.ModalManager.close()};if(S)return(0,b.jsx)(x.default,{title:y.fbt._("Request review",null,{hk:"1Rp2pL"}),onOK:w,children:(0,b.jsx)(m.TextDiv,{children:y.fbt._("We will review the item and if it meets our guidelines, it will be added to your catalog.",null,{hk:"4tmhbu"})})});const D=k.length<1||a;return(0,b.jsx)(x.default,{title:y.fbt._("Request review",null,{hk:"1Rp2pL"}),onOK:()=>{(0,p.logAppealProductCatalogClick)(n),E(!0);let e=!0;c.QPL.markerStart(u.QuickLogMarkerId.WHATSAPP_PRODUCT_APPEAL),(0,l.appealProduct)(t.id.toString(),k).then((()=>{t.canAppeal=!1,t.reviewStatus=C.PRODUCT_REVIEW_STATUS.PENDING,(0,p.logAppealProductCatalogSuccess)(n),E(!1),j(!0),e=!1,c.QPL.markerEnd(u.QuickLogMarkerId.WHATSAPP_PRODUCT_APPEAL,o.QuickLogActionType.SUCCESS)})).catch((0,r.filteredCatch)(i.ServerStatusCodeError,(e=>{f.ToastManager.open((0,b.jsx)(v.Toast,{msg:y.fbt._("Failed to send review request.",null,{hk:"1MNBtG"}),id:(0,v.genId)("catalog_appeal_submission_failed")})),(0,p.logAppealProductCatalogFailed)(n,e.status),E(!1)}))).finally((()=>{e&&c.QPL.markerEnd(u.QuickLogMarkerId.WHATSAPP_PRODUCT_APPEAL,o.QuickLogActionType.FAIL)}))},onCancel:w,okDisabled:D,children:(0,b.jsxs)("form",{children:[(0,b.jsx)(g.TextInput,{testid:"confirm-popup-text-input",placeholder:y.fbt._("Enter reason for this request...",null,{hk:"49sHMz"}),onChange:e=>{T(e)},value:k,maxLength:1e3}),(0,b.jsx)(h.ExternalLink,{href:s.default.WA_COMMERCE_POLICY_URL,children:y.fbt._("Learn more",null,{hk:"2S4fxr"})})]})})};var r=n(450796),o=n(451897),i=n(492574),l=n(895697),s=a(n(364369)),d=n(914597),u=n(665397),c=n(669393),f=n(694816),p=n(277975),h=n(912591),m=n(113923),g=n(990011),v=n(950452),x=a(n(452665)),C=n(105641),y=n(548360),_=n(667294),b=n(785893)},744090:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,c.jsx)(l.default,{onCancel:()=>o.ModalManager.close(),onConfirm:t=>{const{chat:n,sessionId:a}=e;(0,d.qplStartProductSendMessage)("Attachment",t.length);const r=t.map(((e,t)=>{const r=0===t?n.composeQuotedMsg:null;return n.sendProductMessage(e,r).then((()=>{(0,i.logProductMessageSent)({product:e,catalogSessionId:a})}))}));(0,d.qplEndProductMessageSend)(Promise.all(r)),n.composeQuotedMsg=null,o.ModalManager.close()},onShare:t=>{const{chat:n,sessionId:a}=e,l=(0,r.createCatalogLink)(t.id.user),d=u.fbt._("Follow this link to view our catalog on WhatsApp: {catalogUrl}",[u.fbt._param("catalogUrl",l)],{hk:"2XU3Oe"}).toString();s.ComposeBoxActions.paste(n,d),(0,i.logSendCatalogClick)({catalogOwnerWid:t.id,catalogSessionId:a}),o.ModalManager.close()}})};var r=n(32266),o=n(914597),i=n(277975),l=a(n(605537)),s=n(188172),d=n(424064),u=n(548360),c=n(785893)},422635:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(914597),o=n(227105),i=a(n(452665)),l=n(548360),s=n(785893);var d=()=>{r.ModalManager.open((0,s.jsx)(i.default,{okText:l.fbt._("OK",null,{hk:"2KEeHb"}),onOK:()=>r.ModalManager.close(),children:(0,s.jsx)(o.ComplianceInfoHelpCenterBanner,{})}))};t.default=d},748517:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(914597),o=a(n(452665)),i=n(548360),l=n(785893);var s=e=>{r.ModalManager.open((0,l.jsx)(o.default,{title:i.fbt._("Information accuracy",null,{hk:"1IkKdC"}),okText:i.fbt._("OK",null,{hk:"2KEeHb"}),onOK:()=>{null==e||e(),r.ModalManager.close()},cancelText:i.fbt._("Go back",null,{hk:"3k17TN"}),onCancel:()=>r.ModalManager.close(),children:(0,l.jsxs)(l.Fragment,{children:[i.fbt._("By continuing, you confirm that all information you have provided is correct and current.",null,{hk:"3VB7Ib"}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),i.fbt._("You are required by law to update this info on WhatsApp if it ever changes.",null,{hk:"3FF6ZU"})]})}))};t.default=s},676419:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const n=(0,v.default)(),[a,l]=(0,m.useState)(null===(t=f.LabelCollection.labelColorPalette)||void 0===t?void 0:t.colors);(0,m.useEffect)((()=>{(0,o.default)(f.LabelCollection.getLabelColorPalette(),n).then((e=>{l(e)})).catch((0,r.catchAbort)((()=>{})))}),[]);let c=(0,x.jsx)(i.Spinner,{stroke:6,size:24});a&&(c=(0,x.jsx)(_,{labelId:e.labelId,onBack:e.onClose,onUpdateColor:e.onUpdateColor,colors:a,currentColor:e.currentColor}));return(0,x.jsxs)(s.default,{children:[(0,x.jsx)(u.DrawerHeader,{title:h.fbt._("Choose color",null,{hk:"16haXO"}),onBack:e.onClose,type:u.DRAWER_HEADER_TYPE.LARGE}),(0,x.jsx)(d.default,{children:(0,x.jsx)("div",{className:(0,g.default)(C.container),children:c})})]})};var r=n(389385),o=a(n(747259)),i=n(111054),l=a(n(23217)),s=a(n(60453)),d=a(n(69637)),u=n(994790),c=n(208803),f=n(316770),p=n(859846),h=n(548360),m=n(667294),g=a(n(156720)),v=a(n(803409)),x=n(785893);const C={wallpaperColorCanvas:{boxSizing:"cm280p3y",display:"p357zi0d",alignItems:"gndfcl4n",justifyContent:"ac2vgrno",float:"e4n4g5wb",width:"idnewlvo",height:"ffyh53uw",marginBottom:"pz0xruzv",marginStart:"htq1q0kf",fontSize:"dsh4tgtl",textAlign:"qfejxiq4",borderTop:"mcq5gaun",borderEnd:"fg094308",borderBottom:"jzfpk5uu",borderStart:"h826kv5n",borderTopStartRadius:"g9p5wyxn",borderTopEndRadius:"i0tg5vk9",borderBottomEndRadius:"aoogvgrq",borderBottomStartRadius:"o2zu3hjb"},canvasHover:{cursor:"ajgl1lbb",borderTop:"tpkuw0xv",borderEnd:"femjv38p",borderBottom:"jl194bqt",borderStart:"lll8t7px"},canvasActive:{position:"g0rxnol2",color:"k17s6i4e",borderTop:"f2vo98sp",borderEnd:"g5xlzzjq",borderBottom:"inlya0ko",borderStart:"krn0l44i",boxShadow:"f9dkde2y","::after":{position:"tkubpkrc",top:"a83sq2ph",start:"nrbk08ob",zIndex:"eglpomy2",boxSizing:"s8o24zke",display:"l1wvjj35",width:"s4y2fk9h",height:"ffcfminx",content:"lw9p9708",borderTop:"h5n1mx1r",borderEnd:"oxr79dxs",borderBottom:"nz84ehyz",borderStart:"ehkk8km3",borderTopStartRadius:"nuykgz0k",borderTopEndRadius:"affkug9a",borderBottomEndRadius:"cjjm5daf",borderBottomStartRadius:"h1m5ryc4"}},wallpaperColorEmpty:{width:"idnewlvo",height:"bbl9m3t3",marginStart:"htq1q0kf",borderTopStartRadius:"g9p5wyxn",borderTopEndRadius:"i0tg5vk9",borderBottomEndRadius:"aoogvgrq",borderBottomStartRadius:"o2zu3hjb"},container:{display:"p357zi0d",flexDirection:"sap93d0t",flexWrap:"lkhkxwyq",justifyContent:"ac2vgrno",paddingTop:"msavwer2",paddingStart:"f78eapp6",paddingEnd:"bcymb0na"}};function y(e){const{onUpdateColor:t,labelId:n,colorInt:a,onBack:r}=e,[o,i]=(0,m.useState)(!1),s=e.isSelected?(0,x.jsx)(l.default,{name:"checkmark-medium"}):null,d=()=>{o||i(!0)},u=(0,g.default)(C.wallpaperColorCanvas,o&&C.canvasHover,e.isSelected&&C.canvasActive);return(0,x.jsx)("span",{className:u,style:{backgroundColor:(0,c.intColorToHex)(e.colorInt)},onMouseOver:d,onMouseEnter:d,onMouseLeave:()=>{o&&i(!1)},onClick:()=>{t({id:n,color:a},p.LABEL_PROPERTIES.COLOR),r()},children:s})}function _(e){const{currentColor:t,colors:n}=e,a=n.map((n=>(0,x.jsx)(y,{onUpdateColor:e.onUpdateColor,colorInt:n,onBack:e.onBack,labelId:e.labelId,isSelected:t===n},n)));for(let e=0;e<2;e++)a.push((0,x.jsx)("div",{className:(0,g.default)(C.wallpaperColorEmpty)},"emptyEl"+e));return a}},819446:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onDeleteLabel:t}=e,[n,a]=(0,C.useState)(0),S=(0,_.default)((()=>new l.default([],(e=>e.id))));(0,C.useEffect)((()=>{(0,s.logLabelOperationEvent)(d.default.LABEL_OPERATIONS.VIEW,void 0,d.default.LABEL_TARGETS.LABELS_SCREEN)}),[]);const j=()=>{const e=S.current.getSelected();(0,s.logLabelOperationEvent)(d.default.LABEL_OPERATIONS.VIEW,e.length,d.default.LABEL_TARGETS.DELETE_LABEL_DIALOG),i.ModalManager.open((0,b.jsx)(h.default,{okText:x.fbt._("Yes",null,{hk:"12b9aE"}),cancelText:x.fbt._("No",null,{hk:"4G38V6"}),onCancel:()=>{(0,s.logLabelOperationEvent)(d.default.LABEL_OPERATIONS.CLICK_NEGATIVE,1,d.default.LABEL_TARGETS.DELETE_LABEL_DIALOG),i.ModalManager.close()},onOK:()=>{(0,s.logLabelOperationEvent)(d.default.LABEL_OPERATIONS.CLICK_POSITIVE,1,d.default.LABEL_TARGETS.DELETE_LABEL_DIALOG),(e=>{i.ModalManager.close(),S.current.unsetAll(),t(e)})(e)},children:r.default.t(223,{_plural:e.length})}))},k=()=>{S.current.unsetAll(),a(0)};let T=null;T=n>0?(0,b.jsx)(c.default,{selectedModels:S.current,onCancel:k,onDelete:j,theme:"drawer-header"}):(0,b.jsx)(v.DrawerHeader,{title:x.fbt._("Labels",null,{hk:"t1hII"}),onBack:e.onClose,type:v.DRAWER_HEADER_TYPE.LARGE});const w=(0,o.canEditLabel)()&&(0,b.jsx)("div",{className:(0,y.default)(E),children:(0,b.jsx)(f.Round,{large:!0,onClick:e.openAddLabel,children:(0,b.jsx)(p.default,{name:"plus-large"})})});return(0,b.jsxs)(m.default,{theme:"settings",children:[T,(0,b.jsx)(g.default,{children:(0,b.jsx)(u.default,{shouldScrollIntoViewAndSelect:()=>({shouldScrollIntoView:!0,shouldSelect:!1}),selectedLabels:S.current,renderContext:"label-list",onMultiSelect:()=>{const e=S.current.getSelected().length;a(e)},onLabelClick:e.onLabelClick})}),w]})};var r=a(n(568064)),o=n(408139),i=n(914597),l=a(n(578931)),s=n(265433),d=a(n(471410)),u=a(n(267901)),c=a(n(263538)),f=n(482857),p=a(n(23217)),h=a(n(452665)),m=a(n(60453)),g=a(n(69637)),v=n(994790),x=n(548360),C=n(667294),y=a(n(156720)),_=a(n(616223)),b=n(785893);const E={position:"lhggkp7q",end:"druapeav",bottom:"k2umuq2k",zIndex:"ncl55kzk"}},641885:(e,t,n)=>{"use strict";var a=n(595318);t.Z=function(e){const{labelId:t,openLabelColorDrawer:n,onEditLabel:a,onRemoveLabel:o}=e,p=(0,T.default)(),h=(0,w.default)((()=>new l.default([],(e=>e.id.toString())))).current;(0,D.useListener)(h,"all",(()=>p())),(0,k.useEffect)((()=>{(0,s.logLabelOperationEvent)(d.default.LABEL_OPERATIONS.VIEW,void 0,d.default.LABEL_TARGETS.LABEL_DETAILS_SCREEN)}),[]);const m=()=>{h.unsetAll()},v=()=>{const e=h.getSelected();(0,s.logLabelOperationEvent)(d.default.LABEL_OPERATIONS.CLICK_NEGATIVE,e.length,d.default.LABEL_TARGETS.BULK_UNLABEL_DIALOG),i.ModalManager.close()},P=(e=>{let t,n;for(let a=0;a<e.length;a++){if(e[a]instanceof E.Msg?n=!0:t=!0,t&&n)return!0}return!1})(h.getSelected()),A=h.getSelected().length>0?(0,I.jsx)(g.default,{labelEditEnabled:!P,onRemoveLabel:()=>{const e=h.getSelected();if(!o)return;const n=b.LabelCollection.assertGet(t);(0,s.logLabelOperationEvent)(d.default.LABEL_OPERATIONS.VIEW,e.length,d.default.LABEL_TARGETS.BULK_UNLABEL_DIALOG),i.ModalManager.open((0,I.jsx)(x.default,{title:r.default.t(554,{count:e.length,labelName:n.name,_plural:e.length}),okText:j.fbt._("OK",null,{hk:"2KEeHb"}),cancelText:j.fbt._("Cancel",null,{hk:"H0gNq"}),onCancel:v,onOK:()=>((e,t)=>{i.ModalManager.close(),m(),o(e,t),(0,s.logLabelOperationEvent)(d.default.LABEL_OPERATIONS.CLICK_POSITIVE,t.length,d.default.LABEL_TARGETS.BULK_UNLABEL_DIALOG)})(t,e)}))},selectedModels:h,onCancel:m,theme:"drawer-header"}):(0,I.jsx)(_.DrawerHeader,{onBack:e.onClose,menu:(0,I.jsx)(M,{openColorPicker:()=>{const e=b.LabelCollection.assertGet(t);n(t,e.color)},openEditLabel:()=>{null==a||a(t)}}),type:_.DRAWER_HEADER_TYPE.LABELS,children:(0,I.jsx)(u.Labels,{labels:[e.labelId],renderAsCircle:!0,showName:!0,theme:"drawer-title"})});return(0,I.jsxs)(C.default,{theme:"settings",children:[A,(0,I.jsx)(y.default,{children:(0,I.jsx)(c.ChatlistPanel,{hideMultiSelectBar:!0,multiSelection:h,labelFilter:e.labelId,settings:S.default,mode:f.default.Chatlist,selectable:!0})})]})};var r=a(n(568064)),o=n(408139),i=n(914597),l=a(n(578931)),s=n(265433),d=a(n(471410)),u=n(384543),c=n(347488),f=a(n(359726)),p=n(160811),h=n(471174),m=n(646346),g=a(n(263538)),v=a(n(23217)),x=a(n(452665)),C=a(n(60453)),y=a(n(69637)),_=n(994790),b=n(316770),E=n(17304),S=a(n(268132)),j=n(548360),k=n(667294),T=a(n(859312)),w=a(n(616223)),D=n(587550),I=n(785893);function M(e){let{openColorPicker:t,openEditLabel:n}=e;return(0,o.canEditLabel)()?(0,I.jsx)(m.MenuBarItem,{testid:"starred-menu",icon:(0,I.jsx)(v.default,{name:"menu"}),title:r.default.t(451),children:(0,I.jsxs)(p.Dropdown,{type:p.MenuType.DropdownMenu,flipOnRTL:!0,dirX:p.DirX.LEFT,children:[(0,I.jsx)(h.DropdownItem,{testid:"menu-item-color",action:t,children:j.fbt._("Choose color",null,{hk:"16haXO"})}),(0,I.jsx)(h.DropdownItem,{testid:"menu-item-edit-label",action:n,children:j.fbt._("Edit label",null,{hk:"3QX44B"})})]},"labelChooseColor")}):null}},794981:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{modelsToUpdate:t,onLabelUpdateComplete:n}=e,a=(0,E.default)((()=>new l.default([],(e=>e.id)))),M=(0,y.useRef)(new Set),P=a.current,A=M.current,O=(0,b.default)(),R=(0,y.useMemo)((()=>{const e=(()=>{const e={};return t.forEach((t=>{const n=(0,x.unproxy)(t);n.labels&&n.labels.forEach((t=>{e[t]=e[t]?++e[t]:1}))})),e})();return(0,r.default)(e,(e=>e===t.length?D:e>0?I:w))}),[]),L=(0,S.jsx)(c.default,{testid:"popup-controls-ok",type:"primary",disabled:0===A.size,onClick:()=>{(0,s.logLabelOperationEvent)(d.default.LABEL_OPERATIONS.CLICK_POSITIVE,t.length,d.default.LABEL_TARGETS.LABEL_COMBINED_DIALOG);const e=P.list,a=P.selected,r=e.map(((e,t)=>({id:e.id,type:a[t]?"add":"remove"})));v.LabelCollection.addOrRemoveLabels(r,t),n()},children:o.default.t(563)},1),N=(0,S.jsx)(c.default,{testid:"popup-controls-cancel",type:"secondary",onClick:e.onCancel,children:C.fbt._("Cancel",null,{hk:"H0gNq"})},0),F=(0,i.canEditLabel)()&&(0,S.jsx)("div",{className:(0,_.default)(j),children:(0,S.jsxs)(c.default,{testid:"popup-controls-cancel",type:"simplified",onClick:e.onAddNewLabel,children:[(0,S.jsx)(f.default,{name:"plus-large",className:(0,_.default)(k),display:"inline"}),C.fbt._("NEW LABEL",null,{hk:"4xjp4I"})]},2)});return(0,S.jsx)(g.Modal,{type:g.ModalTheme.Tower,children:(0,S.jsxs)(p.default,{theme:"labels",children:[(0,S.jsx)(m.DrawerHeader,{title:C.fbt._("Label items",null,{hk:"2xOVMD"}),type:m.DRAWER_HEADER_TYPE.POPUP,onCancel:e.onCancel}),(0,S.jsx)(h.default,{"data-list-scroll-container":!0,theme:"padding",children:(0,S.jsx)(u.default,{shouldScrollIntoViewAndSelect:e.shouldScrollIntoViewAndSelect,initialLabelState:R,selectedLabels:P,renderContext:"label-selection",onLabelClick:e.onLabelClick,onMultiSelect:e=>{e&&(R[e]===I?A.add("{labelId}_changed"):A.has(e)?A.delete(e):A.add(e),O())}})}),F,(0,S.jsxs)("div",{className:(0,_.default)(T),children:[N,L]})]},"mange_label_modal")})};var r=a(n(66604)),o=a(n(568064)),i=n(408139),l=a(n(578931)),s=n(265433),d=a(n(471410)),u=a(n(267901)),c=a(n(39770)),f=a(n(23217)),p=a(n(60453)),h=a(n(69637)),m=n(994790),g=n(857224),v=n(316770),x=n(118146),C=n(548360),y=n(667294),_=a(n(156720)),b=a(n(859312)),E=a(n(616223)),S=n(785893);const j={marginBottom:"brac1wpa",marginStart:"g888flyt"},k={marginEnd:"spjzgwxb",color:"o2v2jkg7",verticalAlign:"fewfhwl7"},T={display:"p357zi0d",justifyContent:"kcgo1i74",paddingTop:"i5tg98hk",paddingEnd:"lk91ofgv",paddingBottom:"r219jyu0",paddingStart:"gx1rr48f"},w=0,D=1,I=2},476439:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(914597),o=a(n(176538)),i=a(n(314220)),l=n(685600),s=n(747915),d=a(n(630855)),u=n(243882),c=n(482857),f=a(n(23217)),p=a(n(60453)),h=a(n(69637)),m=n(994790),g=n(865563),v=n(999662),x=n(548360),C=n(667294),y=a(n(156720)),_=a(n(616223)),b=n(587550),E=n(785893);const S={position:"lhggkp7q",bottom:"n803nsoz",end:"l5wf47vo",zIndex:"nbczt5ty"};function j(e,t){const n=()=>v.QuickReplyCollection.filter((e=>e.type===g.QuickReplyTypes.TEXT)).map((e=>({itemKey:e.id,quickReply:e}))),[a,j]=(0,C.useState)(n);(0,b.useListener)(v.QuickReplyCollection,"add change remove",(()=>{j(n())}));const k=x.fbt._("Quick Replies",null,{hk:"2sLQo1"}),T=(0,_.default)((()=>new d.default)),w=a.length>0?(0,E.jsx)(s.FlatList,{data:a,direction:"vertical",flatListController:T.current,renderItem:e=>(0,E.jsx)(i.default,{quickReply:e.quickReply}),keyOrder:u.KeyOrder.INVERSE}):(0,E.jsx)(l.NoQuickReplies,{}),D=(0,E.jsx)(c.Round,{onClick:()=>{r.ModalManager.open((0,E.jsx)(o.default,{quickReply:null}))},className:(0,y.default)(S),large:!0,testid:"quick-replies-drawer-add-button",children:(0,E.jsx)(f.default,{name:"add-alt-2"})});return(0,E.jsxs)(p.default,{ref:t,children:[(0,E.jsx)(m.DrawerHeader,{title:k,onBack:e.onBack,type:m.DRAWER_HEADER_TYPE.LARGE,focusBackOrCancel:!0}),(0,E.jsx)(h.default,{flatListControllers:[T.current],children:w}),D]})}var k=(0,C.forwardRef)(j);t.default=k},176538:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n;const{quickReply:a}=e,[_,b]=(0,g.useState)(null!==(t=null==a?void 0:a.shortcut)&&void 0!==t?t:""),[E,S]=(0,g.useState)(null!==(n=null==a?void 0:a.message)&&void 0!==n?n:""),[j,k]=(0,g.useState)(null),[T,w]=(0,g.useState)(null),D=function(){var e=(0,r.default)((function*(){if(_!==(null==a?void 0:a.shortcut)&&h.QuickReplyCollection.some((e=>_===e.shortcut)))throw new Error(x.ShortcutAlreadyInUse);if(a){const e={id:a.id,shortcut:_,message:E,count:0,keywords:a.keywords};yield(0,o.editQuickReply)(e)}else yield(0,o.addQuickReply)({shortcut:_,message:E,count:0,keywords:[]})}));return function(){return e.apply(this,arguments)}}();return(0,v.jsx)(d.default,{title:m.fbt._("Add quick reply",null,{hk:"1nJfz0"}),doSave:D,afterSave:()=>{i.ToastManager.open((0,v.jsx)(f.Toast,{id:(0,f.genId)(),msg:m.fbt._("Quick reply saved",null,{hk:"3akZvv"})}))},onError:e=>{var t;const n=null!==(t=x.cast(e.message))&&void 0!==t?t:x.SaveFailed;i.ToastManager.open((0,v.jsx)(f.Toast,{id:(0,f.genId)(),msg:y(n)}))},isValid:[_,E].every((e=>e))&&![j,T].some((e=>e)),modalConfig:{type:p.ModalTheme.QuickReplies},children:(0,v.jsxs)(s.FlexColumn,{align:"stretch",xstyle:l.uiPadding.all30,children:[(0,v.jsx)(c.TextInput,{maxLength:25,placeholder:m.fbt._("Shortcut",null,{hk:"2NZG9y"}),value:_,error:j,onChange:e=>{const t=function(e){if(""===e.trim())return x.ShortcutEmpty;if(!C.test(e))return x.ShortcutInvalid;return null}(e);b(e),k(t?y(t):null)},showRemaining:!0,focusOnMount:!0,testid:"quick-replies-modal-shortcut"}),(0,v.jsx)(c.TextInput,{placeholder:m.fbt._("Reply message",null,{hk:"3VBHqV"}),value:E,error:T,multiline:!0,supportsEmoji:!0,onChange:e=>{const t=function(e){if(""===e.trim())return x.MessageEmpty;return null}(e);S(e),w(t?y(t):null)},theme:"contact-us",testid:"quick-replies-modal-message"}),(0,v.jsx)(u.TextParagraph,{theme:"muted-small",children:m.fbt._("Disclaimer about the lack of support for media, pointing user to primary device",null,{hk:"1wXB1C"})})]})})};var r=a(n(348926)),o=n(793021),i=n(694816),l=n(128298),s=n(429623),d=a(n(434544)),u=n(113923),c=n(990011),f=n(950452),p=n(857224),h=n(999662),m=n(548360),g=n(667294),v=n(785893);const x=n(76672).Mirrored(["ShortcutAlreadyInUse","ShortcutEmpty","ShortcutInvalid","MessageEmpty","SaveFailed"]),C=/^(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08C7\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BEF\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C66-\u0C6F\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D66-\u0D6F\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F29\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\u9FFC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7CA\uA7F5-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD30-\uDD39\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC66-\uDC6F\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF39]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCE9\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDD\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])+$/;function y(e){switch(e){case x.ShortcutAlreadyInUse:return m.fbt._("Shortcut is already in use",null,{hk:"4EExzT"});case x.ShortcutEmpty:return m.fbt._("Shortcut can't be empty",null,{hk:"4FkhD"});case x.ShortcutInvalid:return m.fbt._("Shortcut may not contain spaces or any punctuations or emojis",null,{hk:"1v2jRR"});case x.MessageEmpty:return m.fbt._("Add a message before saving",null,{hk:"1Xk3Ib"});case x.SaveFailed:return m.fbt._("Failed to save the quick reply",null,{hk:"3ssSB7"})}}},551731:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(48826),o=a(n(568064)),i=n(914597),l=n(587988),s=a(n(452665)),d=a(n(629234)),u=a(n(60453)),c=a(n(69637)),f=a(n(464738)),p=n(994790),h=n(402732),m=n(685600),g=n(747915),v=a(n(944942)),x=a(n(630855)),C=a(n(23217)),y=n(132826),_=n(669951),b=n(719380),E=n(548360),S=n(667294),j=a(n(156720)),k=a(n(859312)),T=a(n(616223)),w=n(587550),D=n(785893);const I={overflowX:"gfz4du6o",overflowY:"ag5g9lrv"},M={flex:"kk3akd72",paddingTop:"a71rq12o",paddingEnd:"iffbo4e8",paddingBottom:"s9fl9ege",paddingStart:"iy3dfvyp",fontSize:"f8jlpxt4",lineHeight:"r5qsrrlp",color:"hp667wtd"},P={borderBottom:"daad4uqs"};function A(e){let{data:t,onClick:n,onDelete:a}=e;const{blocklist:r}=t,o=r.contact();return(0,D.jsx)(h.Contact,{contact:o,onClick:n,onDelete:a,waitIdle:!0},o.id.toString())}function O(e){const t=(0,S.useRef)(null),n=(0,k.default)();(0,w.useListener)(y.BlocklistCollection,["add","remove"],n);const a=(0,T.default)((()=>new x.default)),h=()=>{i.ModalManager.close()},O=(e,t)=>{i.ModalManager.open((0,D.jsx)(s.default,{okText:E.fbt._("Unblock",null,{hk:"hnS4w"}),onOK:()=>{(e=>{const t=_.ChatCollection.get(e.id);if(null==t?void 0:t.isPSA){const e=t.msgs.last();(0,l.logChatPSARemove)(e,2,5)}(0,r.unblockContact)(e).catch((()=>{})),i.ModalManager.close()})(t)},onCancel:h,title:E.fbt._("Unblock {contact_name}?",[E.fbt._param("contact_name",t.formattedName)],{hk:"13BuiO"})}))},R=e=>{const t=_.ChatCollection.get(e.id);if(null==t?void 0:t.isPSA){const e=t.msgs.last();(0,l.logChatPSARemove)(e,1,1)}(0,r.blockContact)(e).catch((()=>{})),i.ModalManager.close()},L=y.BlocklistCollection.length>0?(0,D.jsx)(v.default,{flatListControllers:[a.current],className:(0,j.default)(I),children:(0,D.jsx)(g.FlatList,{flatListController:a.current,direction:"vertical",data:y.BlocklistCollection.map((e=>({itemKey:e.id.toString(),blocklist:e}))),renderItem:e=>(0,D.jsx)(A,{data:e,onClick:O,onDelete:O})})}):(0,D.jsx)(m.Blocked,{}),N=y.BlocklistCollection.length>0?(0,D.jsx)("div",{"data-testid":"blocked-description",className:(0,j.default)(M),children:o.default.t(128)}):null;return(0,D.jsxs)(u.default,{ref:t,children:[(0,D.jsx)(p.DrawerHeader,{title:o.default.t(150),onBack:e.onClose,type:p.DRAWER_HEADER_TYPE.LARGE}),(0,D.jsx)("div",{className:(0,j.default)(P),children:(0,D.jsx)(f.default,{testid:"li-add-blocked",onClick:()=>{i.ModalManager.open((0,D.jsx)(d.default,{title:o.default.t(129),filter:function(e){return!!b.ContactCollection.isFilteredContact(e)&&(!y.BlocklistCollection.get(e.id)||o.default.t(535))},onCancel:()=>i.ModalManager.close(),onSelect:R}))},icon:(0,D.jsx)(C.default,{name:"add-user",directional:!0}),children:o.default.t(129)})}),(0,D.jsxs)(c.default,{children:[L,N]})]})}var R=(0,S.forwardRef)(O);t.default=R},137409:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(450796),o=a(n(145095)),i=n(657319),l=n(585582),s=a(n(364369)),d=n(241931),u=n(565885),c=a(n(568064)),f=B(n(435232)),p=n(914597),h=a(n(376139)),m=a(n(540436)),g=n(567507),v=a(n(471410)),x=a(n(675680)),C=a(n(60453)),y=a(n(69637)),_=n(994790),b=n(818671),E=a(n(534949)),S=a(n(784518)),j=B(n(161849)),k=a(n(311791)),T=n(482857),w=n(111054),D=a(n(23217)),I=a(n(523425)),M=n(14500),P=a(n(314075)),A=n(548360),O=n(667294),R=a(n(156720)),L=a(n(616223)),N=n(785893);function F(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(F=function(e){return e?n:t})(e)}function B(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=F(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}const U={video:{width:"ln8gz9je",height:"ppled2lx",opacity:"bs7a17vp",transitionProperty:"cr6d9hz6",transitionDuration:"p4t1lx4y",transitionTimingFunction:"o4rj4sfy",transform:"n4o0o7gj",transformOrigin:"sx61ek5s"},videoInactive:{opacity:"axi1ht8l"},btn:{position:"lhggkp7q",top:"rl8piizt",start:"m7kgcvyw",marginStart:"avk8rzj1",opacity:"axi1ht8l"},btnSend:{end:"l5wf47vo",start:"cw6dh6i2"},image:{position:"lhggkp7q",width:"ln8gz9je",height:"ppled2lx",animationName:"n0uige08",animationDuration:"hcuw515p"},retakeBtn:{display:"p357zi0d",alignItems:"gndfcl4n",cursor:"ajgl1lbb"},retakeIcon:{flexShrink:"oq44ahr5",marginEnd:"claouzo6",color:"k17s6i4e"},captionInput:{zIndex:"thghmljt",display:"p357zi0d",flexDirection:"sap93d0t"},caption:{flexShrink:"oq44ahr5",width:"hqec7i8t"},footer:{position:"g0rxnol2",zIndex:"b9fczbqn",boxSizing:"cm280p3y",display:"p357zi0d",alignItems:"gndfcl4n",justifyContent:"ac2vgrno",minHeight:"tvjloe4n",paddingTop:"i5tg98hk",paddingEnd:"iffbo4e8",paddingBottom:"eb4rp10x",paddingStart:"khscay3k",backgroundColor:"emqjox7q"},container:{position:"g0rxnol2",display:"p357zi0d",flexGrow:"ggj6brxn",alignItems:"gndfcl4n",justifyContent:"ac2vgrno",width:"ln8gz9je"},body:{position:"lhggkp7q",top:"qq0sjtgm",start:"tkdu00h0",display:"p357zi0d",flexDirection:"f8m0rgwh",alignItems:"gndfcl4n",width:"ln8gz9je",height:"ppled2lx"},videoContainer:{zIndex:"b9fczbqn",width:"ln8gz9je",height:"ppled2lx"},webcamContainer:{width:"ln8gz9je",height:"ppled2lx"}},H="ANIMATING",G="LOADING",z="RECORDING",q="SENDING";function W(e,t){const{chat:n,disposeStream:a,onCaptured:F,onBack:B,onSend:W}=e,V=(0,O.useRef)(null),Y=(0,O.useRef)(null),K=(0,O.useRef)(null),X=(0,O.useRef)(null),Q=(0,O.useRef)(null),[J,$]=(0,O.useState)(void 0),[Z,ee]=(0,O.useState)(void 0),[te,ne]=(0,O.useState)(!1),[ae,re]=(0,O.useState)(void 0),[oe,ie]=(0,O.useState)(H),[le,se]=(0,O.useState)(void 0),de=(e,t)=>{var n;e?(null===(n=Y.current)||void 0===n||n.call(Y),Y.current=t,ie(G),se(e),(0,j.isSrcObjectInVideoElement)()||(e?(window.URL.revokeObjectURL(K.current),K.current=window.URL.createObjectURL(e)):(window.URL.revokeObjectURL(K.current),K.current=void 0))):oe===H&&ie(G)},ue=(0,L.default)((()=>new i.ShiftTimer((e=>{let{stream:t,disposeStream:n}=e;de(t,n)})))),ce=(0,L.default)((()=>new i.ShiftTimer((e=>{let{stream:t,disposeStream:n}=e;var a;t&&n&&(null===(a=Y.current)||void 0===a||a.call(Y));(0,j.isSrcObjectInVideoElement)()||(K.current=window.URL.revokeObjectURL(K.current))})))),fe=()=>{n&&n.setAttachMediaContents(null)};(0,O.useEffect)((()=>(ue.current.onOrBefore(300,{stream:e.stream,disposeStream:e.disposeStream}),()=>{ue.current.cancel(),K.current&&window.URL.revokeObjectURL(K.current),null==a||a(),V.current&&V.current.logCancel(),fe()})),[]);const pe=(e,t)=>{ue.current.forceRunNow({stream:e,disposeStream:t})};(0,O.useImperativeHandle)(t,(()=>({loadNewStreamTimerUpdate:pe,loadNewStream:de})));const he=()=>{var e;const t=null===(e=Q.current)||void 0===e?void 0:e.underlyingVideo();if(!t)return;const r=document.createElement("canvas");r.height=t.videoHeight,r.width=t.videoWidth;const i=r.getContext("2d");if(i)if(i.translate(r.width,0),i.scale(-1,1),i.drawImage(t,0,0,t.videoWidth,t.videoHeight),F)(0,l.canvasToBlob)(r).then((e=>{F(e)}));else{ce.current.onOrBefore(500,{stream:le,disposeStream:a});const e=new g.MediaPickerStatsLogger;e.logAdd("CAPTURE_MEDIA","image",v.default.MEDIA_PICKER_ORIGIN_TYPE.MENU_CAMERA_CAPTURE),e.chatRecipients=(null==n?void 0:n.groupMetadata)?n.groupMetadata.participants.length:1,V.current=e;const t=r.toDataURL("image/jpeg"),i=(0,d.dataURLtoBlob)(t);if(n){n.attachMediaContents||n.setAttachMediaContents(new P.default({chatParticipantCount:n.getParticipantCount()}));(0,o.default)(n.attachMediaContents,"chat.attachMediaContents").processAttachments([{file:(0,u.createFile)([i],"",{type:"image/jpeg"})}])}ee(t),ie(q),se(void 0)}else __LOG__(3)`CaptureDrawer:onCapture can not get 2d context`},me=e=>{ie(z),re({width:e.videoWidth,height:e.videoHeight})},ge=()=>{$(void 0),ie(G),fe();const{asyncStream:e,disposeStream:t}=j.start("camera");Y.current=t,e.then((e=>{e&&((0,j.isSrcObjectInVideoElement)()||(K.current=window.URL.createObjectURL(e)),se(e))})).catch((0,r.filteredCatch)(f.GUM.NotAllowedError,(()=>{B(),p.ModalManager.open((0,N.jsx)(b.GuidePopup,{messaging:b.Messaging.CAMERA_FAIL,type:b.TYPE.GUIDE_UNBLOCK}))}))).catch((0,r.filteredCatch)(f.GUM.GUMError,(()=>{B(),p.ModalManager.open((0,N.jsx)(b.GuidePopup,{messaging:b.Messaging.CAMERA_MISSING,type:b.TYPE.GUIDE_NONE}))})))},ve=()=>{let e=J;if(W)if(Z){var t,n;const a=null===(t=X.current)||void 0===t?void 0:t.refInput;let r=[];if(J&&a){const t=a.serialize(J),[n,o]=[t[0].trim(),t[1]];n.length&&(e=n,r=o.mentionedJidList||[])}W({caption:e,getImg:E.default.createFromBase64Jpeg(h.default.parseDataURL(Z).data),isViewOnce:te,mentionedJidList:r}),null===(n=V.current)||void 0===n||n.logSend({isViewOnce:te})}else __LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("capture-drawer-no-img");else __LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("capture-drawer-no-onSend")},xe=e=>{$(e)},Ce=e=>{ne(e)},ye=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{isViewOnce:n}=t;if(W)if(0===e.length)__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("capture-drawer-no-img");else{const{media:t,mentionedJidList:i}=(0,o.default)(e[0],"medias[0]"),l=t.file;var a,r;if(l instanceof Blob)W({getImg:E.default.createFromData(l,l.type),caption:null!==(a=t.caption)&&void 0!==a?a:void 0,isViewOnce:!!n,mentionedJidList:i}),null===(r=V.current)||void 0===r||r.logSend({isViewOnce:!!n});fe()}else __LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("capture-drawer-no-onSend")};let _e,be,Ee,Se,je;const ke="capture-cover"===e.theme?"cover":"contain";switch(oe){case H:case G:if(je=(0,N.jsx)(w.Spinner,{stroke:4,size:50}),oe===H)break;case z:const e=(0,R.default)(U.video,le&&oe===G&&U.videoInactive),t=le?(0,N.jsx)(I.default,{autoPlay:!0,ref:Q,onPlay:me,src:K.current?K.current:void 0,srcObject:K.current?void 0:le}):null;Ee=le?(0,N.jsx)("div",{className:(0,R.default)(U.webcamContainer),children:(0,N.jsx)(k.default,{type:ke,size:ae,children:(0,N.jsx)("div",{className:e,"data-animage-capture-webcam":!0,children:t})})},"webcam"):null,_e=oe===z?(0,N.jsx)("div",{className:(0,R.default)(U.btn),children:(0,N.jsx)(T.Round,{large:!0,onClick:he,children:(0,N.jsx)(D.default,{name:"camera"})})},"btn-capture"):null;break;case q:if(Ee=(0,N.jsx)(k.default,{type:ke,size:ae,children:(0,N.jsx)("img",{alt:"",className:(0,R.default)(U.image),"data-animate-capture-snapshot":!0,src:Z})}),n){const e=(0,o.default)(n.attachMediaContents,"chat.attachMediaContents");Ee=(0,N.jsx)(M.MediaEditor,{theme:M.MediaTheme.CAPTURE,chat:n,initCaption:null,mediaCollection:e,onDropText:()=>{},onSendMedia:ye})}_e=(0,N.jsx)("div",{className:(0,R.default)(U.btn,U.btnSend),children:(0,N.jsx)(T.Round,{large:!0,onClick:ve,children:(0,N.jsx)(D.default,{name:"send",directional:!0})})},"btn-send"),be=(0,N.jsxs)("div",{className:(0,R.default)(U.retakeBtn),onClick:ge,children:[(0,N.jsx)("div",{className:(0,R.default)(U.retakeIcon),children:(0,N.jsx)(D.default,{name:"return"})}),A.fbt._("Retake",null,{hk:"tGeQz"})]}),Se=n?(0,N.jsxs)("div",{className:(0,R.default)(U.captionInput),children:[(0,N.jsx)(S.default,{ref:X,chat:n,maxLength:s.default.MAX_CAPTION_LENGTH,multiline:!0,onEnter:ve,onChange:xe,placeholder:c.default.t(127),showRemaining:!0,spellCheck:!0,supportsEmoji:!0,value:J}),(0,N.jsx)(x.default,{disabled:!!(null==n?void 0:n.contact.isEnterprise),isOn:te,mediaType:"image",onChange:Ce})]}):null;break;default:__LOG__(2)`captureDrawer:render Unhandled video capture state ${oe}`}const Te=!0===e.caption?(0,N.jsx)(m.default,{transitionName:"media-caption",className:(0,R.default)(U.caption),children:Se}):null;let we=(0,N.jsxs)("div",{className:(0,R.default)(U.footer),children:[Te,(0,N.jsx)(m.default,{transitionName:"pop_delay",children:_e})]});return oe===q&&(we=null),(0,N.jsxs)(C.default,{theme:e.theme,children:[(0,N.jsx)(_.DrawerHeader,{title:c.default.t(613),type:_.DRAWER_HEADER_TYPE.OFFSET,onCancel:e.onBack,children:be}),(0,N.jsxs)(y.default,{overflow:"hidden",children:[(0,N.jsxs)("div",{className:(0,R.default)(U.container),children:[je,(0,N.jsx)("div",{className:(0,R.default)(U.body),children:(0,N.jsx)(m.default,{transitionName:"capture",className:(0,R.default)(U.videoContainer),children:Ee})})]}),we]})]},"attach-capture-modal")}var V=(0,O.forwardRef)(W);t.default=V},333704:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.jsx)(r.default,{onBack:()=>{e.onClose()},chat:e.chat,caption:!0,theme:"capture-contain",onSend:t=>{let{getImg:n,caption:a,isViewOnce:r,mentionedJidList:i}=t;const l=e.chat,s=l.composeQuotedMsg;l.composeQuotedMsg=null;const d=l.getComposeContents().ctwaContext||void 0;(0,o.prepRawMedia)(n,{}).sendToChat(l,{caption:a,mentionedJidList:i,quotedMsg:s,ctwaContext:d,isViewOnce:r}),e.onCaptureSent(),e.onClose()},stream:e.stream,disposeStream:e.disposeStream})};var r=a(n(137409)),o=n(778986),i=n(785893)},405969:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=null==e.maxItems?l.ServerProps.maxParticipants:e.maxItems;return(0,d.jsx)(i.SelectModal,{onConfirm:t=>{0===t.length&&r.ModalManager.close(),(t=>{for(const n of t)(0,o.default)(e.contacts,n),n.composeQuotedMsg=null;e.onContactsSent(t[0]),r.ModalManager.close()})(t)},maxItems:t,title:s.fbt._("Send contacts",null,{hk:"9ZMyz"}),listType:i.ListType.CHAT_SELECT_MODAL,onCancel:()=>{r.ModalManager.close()}})};var r=n(914597),o=a(n(486925)),i=n(756728),l=n(964551),s=n(548360),d=n(785893)},298001:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=r.default.isRTL();return(0,d.jsx)("div",{className:(0,l.default)(u.container),children:(0,d.jsx)(i.FlexRow,{align:"start",justify:"start",wrap:"wrap",children:e.categories.map((n=>(0,d.jsx)(o.default,{"aria-label":s.fbt._("Unselect category",null,{hk:"2Swokr"}),onClick:()=>e.onRemoveItem(n.id),label:n.localized_display_name,postfixIcon:t?void 0:"round-x-inv",prefixIcon:t?"round-x-inv":void 0,xstyle:u.chip},n.id.toString())))})})};var r=a(n(568064)),o=a(n(972332)),i=n(429623),l=a(n(294184)),s=n(548360),d=(a(n(156720)),n(785893));const u={container:{paddingTop:"b7n2qyd4",paddingEnd:"iffbo4e8",paddingBottom:"s8gyl5p1",paddingStart:"khscay3k",backgroundColor:"sjyhwr5o",borderTop:"dl47i6rc"},chip:{marginTop:"dj1c3cmq",marginEnd:"bugiwsl0",marginBottom:"mpdn4nr2",marginStart:"svoq16ka"}}},282059:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(221310),o=a(n(39770)),i=n(965417),l=n(912591),s=n(729424),d=a(n(23217)),u=n(857224),c=n(597628),f=n(548360),p=n(667294),h=a(n(156720)),m=n(785893);const g={display:"p357zi0d",flexDirection:"f8m0rgwh",alignItems:"gndfcl4n",backgroundColor:"b19fvycv"},v={marginBottom:"dblt22a0"},x={marginBottom:"dblt22a0"},C={fontSize:"p9fp32ui",lineHeight:"tkq7s68q",fontWeight:"hnx8ox4h"},y={marginBottom:"mdtr2l4m"},_={fontSize:"f8jlpxt4"};function b(e,t){const n=t=>{t.stopPropagation(),t.preventDefault(),e.onContinue()},a=(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(o.default,{testid:"popup-controls-demote",type:"secondary",onClick:t=>{t.stopPropagation(),t.preventDefault(),e.onDemote()},children:f.fbt._("Dismiss yourself as admin",null,{hk:"2576jl"})},"popup-controls-demote"),(0,m.jsx)(o.default,{testid:"popup-controls-continue",type:"primary",onClick:n,children:f.fbt._("Continue",null,{hk:"tefLH"})},"popup-controls-continue")]});return(0,m.jsx)(s.HotKeys,{ref:t,handlers:{enter:n,escape:n},children:(0,m.jsx)(u.Modal,{type:u.ModalTheme.Promote,actions:a,children:(0,m.jsxs)("div",{className:(0,h.default)(g),children:[(0,m.jsx)("div",{className:(0,h.default)(v),children:(0,m.jsx)(d.default,{name:"light"===(0,c.getTheme)()?"community-admin-light":"community-admin-dark",width:130})}),(0,m.jsx)("div",{className:(0,h.default)(x),children:(0,m.jsx)(i.EmojiText,{className:(0,h.default)(C),text:f.fbt._("You’re now a community admin",null,{hk:"4OI8X"})})}),(0,m.jsxs)("div",{className:(0,h.default)(y),children:[(0,m.jsx)(i.EmojiText,{className:(0,h.default)(_),text:f.fbt._("You can send announcements, manage groups, edit community information and use admin tools to help keep this community safe.",null,{hk:"2Arr9O"})})," ",(0,m.jsx)(l.ExternalLink,{href:(0,r.getCommunitiesLearningCenterUrl)(),children:f.fbt._("Learn more",null,{hk:"4ys1Kk"})})]})]})})})}var E=(0,p.forwardRef)(b);t.default=E},731497:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,_.useModelValues)(e.chat.contact,["id","name"]),{theme:n}=(0,C.useContext)(v.ThemeContext),a="dark"===n?"deactivate_badge_dark":"deactivate_badge",S=x.fbt._('Deactivate "{community-name}"?',[x.fbt._param("community-name",(0,b.jsx)(d.EmojiText,{text:t.name}))],{hk:"2Stocg"}),j=x.fbt._("This action cannot be undone.",null,{hk:"4xj20P"}),k=x.fbt._("Groups will be disconnected",null,{hk:"37z2Qi"}),T=x.fbt._("Groups won’t be in this community but will still work as usual.",null,{hk:"36c3rr"}),w=x.fbt._("Announcement group will be closed",null,{hk:"4cG9Zj"}),D=x.fbt._("Past admins won’t be able to message this community.",null,{hk:"4CCz3A"}),I=x.fbt._("Community info will be deleted",null,{hk:"3fnH2z"}),M=x.fbt._("Members won’t have access to past info, like admins and groups.",null,{hk:"1kYs62"}),P=(0,b.jsx)(c.default,{name:"link-crossed",width:24,height:24,iconXstyle:E.iconColor}),A=(0,b.jsx)(c.default,{name:"speaker-crossed",width:24,height:24,iconXstyle:E.iconColor}),O=(0,b.jsx)(c.default,{name:"trash-active",width:24,height:24,iconXstyle:E.iconColor});return(0,b.jsxs)(p.default,{children:[(0,b.jsx)(m.DrawerHeader,{title:x.fbt._("Deactivate community",null,{hk:"LRCf4"}),type:m.DRAWER_HEADER_TYPE.LARGE,onBack:e.onBack}),(0,b.jsx)(h.default,{children:(0,b.jsxs)(g.default,{animation:!1,xstyle:E.container,children:[(0,b.jsxs)(u.FlexRow,{align:"center",justify:"center",children:[(0,b.jsx)(s.DetailImage,{id:e.chat.id,size:104,quality:s.DetailImageQuality.High,shape:s.DetailImageShape.Squircle}),(0,b.jsx)(c.default,{name:a,width:36,height:36,className:(0,y.default)(E.badge)})]}),(0,b.jsx)(u.FlexRow,{align:"center",justify:"center",children:(0,b.jsx)(f.TextHeader,{xstyle:E.header,size:"24",color:"dark",weight:"bold",children:S})}),(0,b.jsx)(u.FlexRow,{align:"center",justify:"center",children:(0,b.jsx)(f.TextHeader,{theme:"title",children:j})}),(0,b.jsx)(i.default,{icon:P,title:k,description:T}),(0,b.jsx)(i.default,{icon:A,title:w,description:D}),(0,b.jsx)(i.default,{icon:O,title:I,description:M}),(0,b.jsx)("div",{className:(0,y.default)(E.buttonContainer),children:(0,b.jsx)(l.default,{type:"solidWarning",onClick:()=>{r.ModalManager.open((0,b.jsx)(o.default,{chat:e.chat}))},children:x.fbt._("DEACTIVATE",null,{hk:"4hf2y1"})})})]})})]})};var r=n(914597),o=a(n(928040)),i=a(n(281857)),l=a(n(39770)),s=n(288984),d=n(965417),u=n(429623),c=a(n(23217)),f=n(113923),p=a(n(60453)),h=a(n(69637)),m=n(994790),g=a(n(833308)),v=n(597628),x=n(548360),C=n(667294),y=a(n(156720)),_=n(735461),b=n(785893);const E={container:{paddingTop:"byg5ndfj",paddingEnd:"gv1bfy1o",paddingBottom:"l7ubuiw1",paddingStart:"qt3358re"},buttonContainer:{marginTop:"e3miq1pi",textAlign:"qfejxiq4"},header:{marginTop:"lxsc1wef",marginBottom:"dblt22a0",textAlign:"qfejxiq4"},iconColor:{color:"pm5hny62"},badge:{zIndex:"b9fczbqn",bottom:"kwjb00gf",end:"n642r0m2",position:"g0rxnol2",marginEnd:"febin9tk"}}},928040:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,s.useModelValues)(e.chat,["id","formattedTitle"]),n=l.fbt._("Deactivate {community-name}",[l.fbt._param("community-name",t.formattedTitle)],{hk:"3qzJmw"}),a=l.fbt._('Are you sure you want to deactivate the community "{community-name}"? This action cannot be undone.',[l.fbt._param("community-name",t.formattedTitle)],{hk:"Qgbfe"});return(0,d.jsx)(i.default,{title:n,onOK:()=>{(0,r.default)(t),o.ModalManager.close()},onCancel:()=>{o.ModalManager.close()},okButtonType:"solidWarning",okText:l.fbt._("Deactivate",null,{hk:"3kZPYS"}),children:a})};var r=a(n(688577)),o=n(914597),i=a(n(452665)),l=n(548360),s=n(735461),d=n(785893)},182187:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(29521)),o=a(n(145120)),i=a(n(352013)),l=n(795720),s=a(n(568064)),d=n(408139),u=n(914597),c=a(n(578931)),f=a(n(540436)),p=a(n(656110)),h=a(n(653153)),m=n(552596),g=a(n(944942)),v=a(n(630855)),x=n(482857),C=a(n(188406)),y=n(111054),_=a(n(23217)),b=n(113923),E=a(n(701784)),S=a(n(60453)),j=a(n(69637)),k=n(994790),T=a(n(177864)),w=n(669951),D=n(719380),I=a(n(963928)),M=a(n(294184)),P=n(548360),A=n(667294),O=a(n(156720)),R=a(n(616223)),L=n(785893);const N={search:{paddingTop:"mw9hwy0h",paddingEnd:"ixsqo53d",paddingBottom:"ekpn4oxx",paddingStart:"iy3dfvyp",marginTop:"s15egc35",marginEnd:"r67mms0c",marginBottom:"pel5o5rz",marginStart:"m0ig7u5t",backgroundColor:"ihvf49ua"},inputArea:{display:"l7jjieqr",width:"ln8gz9je",height:"bvcnfjzh",paddingTop:"ppypbuwx",paddingEnd:"f9ovudaz",paddingBottom:"s8gyl5p1",paddingStart:"gx1rr48f",marginTop:"tt8xd2xn",marginEnd:"jnwc1y2a",marginBottom:"mpdn4nr2",marginStart:"svoq16ka",fontSize:"bze30y65",lineHeight:"jgi8eev7",color:"mfzfak1c",verticalAlign:"fewfhwl7",backgroundColor:"thr4l2wc",borderTop:"q4zabkcz",borderEnd:"jkanexlp",borderBottom:"thn59n0e",borderStart:"nsmrnv0a",outline:"gk6igrwd"},inputLine:{position:"g0rxnol2",width:"ln8gz9je",minHeight:"g4oj0cdv",maxHeight:"f0mh0h6e",paddingTop:"n1yiu2zv",paddingEnd:"f9ovudaz",paddingBottom:"przvwfww",paddingStart:"mjn2akup",overflowY:"ag5g9lrv",fontSize:"bze30y65",fontWeight:"e1gr2w1z",lineHeight:"htjsae3x",backgroundColor:"thr4l2wc",borderTop:"q4zabkcz",borderEnd:"jkanexlp",borderStart:"nsmrnv0a",borderBottom:"ob9ouq0z",outline:"gk6igrwd",transition:"qbtd8e50"},drawerSection:{zIndex:"b9fczbqn",display:"p357zi0d",justifyContent:"j1p1mz06",paddingBottom:"hjz8m82x",marginTop:"ignnouf6",textAlign:"qfejxiq4"},inputAreaSizer:{position:"snyj76hw",visibility:"kojwoqec"},contacts:{position:"g0rxnol2",flexGrow:"ggj6brxn",flexShrink:"m0h2a7mj",flexBasis:"l07amlnk",overflowX:"gfz4du6o",overflowY:"ag5g9lrv",backgroundColor:"ihvf49ua"},paragraph:{paddingTop:"b8cdf3jl",paddingEnd:"h5uqwbaf",paddingBottom:"q1tx93la",paddingStart:"kjjye8e3",fontSize:"f8jlpxt4",lineHeight:"jgi8eev7",textAlign:"qfejxiq4",color:"pm5hny62",backgroundColor:"ihvf49ua",borderBottom:"daad4uqs",overflowWrap:"fd365im1"},spinner:{backgroundColor:"ihvf49ua",display:"p357zi0d",justifyContent:"ac2vgrno",paddingTop:"gzqlv4l6",paddingEnd:"f9ovudaz",paddingBottom:"lhcgb2gc",paddingStart:"gx1rr48f"},createNewGroupText:{color:"e1vllz7m"}};var F=(0,A.forwardRef)((e=>{var t;const n=!0===e.isCommunityCreation?(0,d.getParentGroupLinkLimitCommunityCreation)():(0,d.getParentGroupLinkLimit)(),a=n-e.currentSubgroupCount,F=Array.from(null!==(t=e.addedExistingGroups)&&void 0!==t?t:[]),[B,U]=(0,A.useState)(""),H=(0,R.default)((()=>new c.default([],(e=>e.id.toString())))),G=(0,R.default)((()=>new C.default([],(e=>e.id.toString())))),z=(0,A.useRef)(null),[q,W]=(0,A.useState)([]),[V,Y]=(0,A.useState)([]),[K,X]=(0,A.useState)(!0),Q=(0,A.useRef)(new v.default),J=(0,A.useRef)();(0,A.useEffect)((()=>{i.default.focus(J.current)}));(0,A.useEffect)((()=>{(()=>{X(!0);const t=D.ContactCollection.getGroupContacts().filter((e=>{var t,n;const a=w.ChatCollection.get(e.id.toString());if((null==a||null===(t=a.groupMetadata)||void 0===t?void 0:t.groupType)!==l.GroupType.DEFAULT)return!1;const r=null==a||null===(n=a.groupMetadata)||void 0===n?void 0:n.participants;return null!=r&&r.iAmAdmin()})).filter((t=>{var n;if(null===(n=e.addedExistingGroups)||void 0===n?void 0:n.has(t.id))return!1;const a=I.default.get(t.id.toString());return(null==a?void 0:a.groupType)===l.GroupType.DEFAULT}));Y(t),X(!1)})()}),[]);const $=()=>{o.default.shouldIndicateFocus(),i.default.focus(J.current)},Z=()=>{e.onSubmit(q)};let ee;q.length>0&&(ee=(0,L.jsx)(x.Round,{testid:"group-participants-btn",onClick:Z,children:(0,L.jsx)(_.default,{name:"checkmark"})}));const te=(0,r.default)(V,F,((e,t)=>e.id.equals(t))),ne=(0,L.jsx)(T.default,{ref:z,active:G.current,selections:H.current,flatListController:Q.current,msgType:"message",onLeaveList:$,searchText:B,maxChats:a,onSelectionChanged:(t,r)=>{q.length>=a&&r?u.ModalManager.open((0,L.jsx)(p.default,{maxSubgroups:n,isCommunityCreation:e.isCommunityCreation})):(W(H.current.getSelected()),U(""))},chatFilter:e=>te.some((t=>t.id.equals(e.id))),excludeBroadcast:!0,excludeContacts:!0,isCommunityExistingGroupsDrawer:!0}),ae=V.length>0?P.fbt._("Everyone in the group will be added to the community and community members will be able to find it.",null,{hk:"31qvn5"}):(0,L.jsxs)(L.Fragment,{children:[P.fbt._("All groups you're an admin of have already been added to other communities.",null,{hk:"23m9Tz"})," ",(0,L.jsx)(E.default,{xstyle:N.createNewGroupText,onClick:e.onCreateNewGroup,children:P.fbt._("Create new group",null,{hk:"2j5qDf"})})]}),re=P.fbt._("Add existing groups ({groupcount}{=m2}{subgroups-left-to-max})",[P.fbt._param("groupcount",s.default.n(q.length)),P.fbt._param("subgroups-left-to-max",s.default.n(a)),P.fbt._implicitParam("=m2",(0,L.jsx)("span",{children:P.fbt._("/",null,{hk:"7CI9K"})}))],{hk:"3IHerQ"});return(0,L.jsxs)(S.default,{children:[(0,L.jsx)(k.DrawerHeader,{title:re,type:k.DRAWER_HEADER_TYPE.LARGE,onBack:e.onBack}),(0,L.jsxs)(j.default,{children:[(0,L.jsx)(b.TextParagraph,{xstyle:N.paragraph,children:ae}),K?(0,L.jsx)("div",{className:(0,O.default)(N.spinner),children:(0,L.jsx)(y.Spinner,{})}):(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("div",{className:(0,O.default)(N.search),children:(0,L.jsxs)("div",{className:(0,O.default)(N.inputLine),children:[(0,L.jsx)("div",{"data-list-scroll-container":!0,children:(0,L.jsx)(h.default,{theme:"list-names",contacts:q,onDelete:(e,t)=>{(e=>{H.current.setVal(e,!1),W(H.current.getSelected()),U("")})(t)},onFocusSearch:$})}),(0,L.jsx)("input",{"data-testid":"inputarea",className:(0,M.default)((0,O.default)(N.inputArea),m.SELECTABLE_INPUT_CSS_CLASS),ref:J,placeholder:P.fbt._("Type group name",null,{hk:"4EQeB2"}),onChange:e=>U(e.target.value),value:B,type:"text"}),(0,L.jsx)("span",{className:(0,O.default)(N.inputAreaSizer),children:B})]})}),(0,L.jsx)(g.default,{className:(0,O.default)(N.contacts),flatListControllers:[Q.current],children:ne})]}),(0,L.jsx)(f.default,{transitionName:"btn",className:(0,O.default)(N.drawerSection),children:ee})]})]})}));t.default=F},868122:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(145095)),o=a(n(568064)),i=n(408139),l=n(914597),s=a(n(540436)),d=a(n(744356)),u=n(288984),c=n(965417),f=n(747915),p=a(n(944942)),h=a(n(630855)),m=a(n(852711)),g=n(111054),v=a(n(23217)),x=n(662664),C=a(n(656110)),y=a(n(961684)),_=n(273093),b=a(n(60453)),E=a(n(69637)),S=n(994790),j=a(n(833308)),k=n(669951),T=a(n(873213)),w=n(548360),D=n(667294),I=a(n(156720)),M=n(735461),P=n(785893);const A={panelBody:{zIndex:"jnl3jror",display:"p357zi0d",flexDirection:"f8m0rgwh",flexGrow:"ggj6brxn",overflowY:"ag5g9lrv",backgroundColor:"ihvf49ua"},roundIcon:{height:"brqbuz94",width:"nfc7olq2",overflowX:"gfz4du6o",overflowY:"r7fjleex"},announcementIcon:{backgroundColor:"se52eggw"},announcementSpeaker:{color:"jn5oezdz"},btnRemove:{color:"s4k44ver",verticalAlign:"fewfhwl7",cursor:"ajgl1lbb"},xColor:{color:"hp667wtd"}},O=(0,P.jsx)(m.default,{children:(0,P.jsx)(v.default,{name:"people"})}),R=(0,P.jsx)(m.default,{children:(0,P.jsx)(v.default,{name:"plus"})}),L=(0,P.jsx)(m.default,{xstyle:[A.roundIcon,A.announcementIcon],theme:"transparent",children:(0,P.jsx)(v.default,{name:"announcement-speaker",directional:!0,height:40,width:40,iconXstyle:A.announcementSpeaker})});function N(e){let{onClick:t}=e;return(0,P.jsx)("button",{className:(0,I.default)(A.btnRemove),"data-testid":"btn-remove-group",onClick:t,"aria-label":w.fbt._("Remove group",null,{hk:"2Tr8uh"}),children:(0,P.jsx)(v.default,{name:"x",iconXstyle:A.xColor})})}function F(e){let{data:t}=e;const[n,a]=(0,D.useState)(!1),r=k.ChatCollection.get(t.itemKey),o=(0,M.useOptionalModelValues)(r,["formattedTitle"]),i=null==o?void 0:o.formattedTitle;return(0,P.jsx)(d.default,{primary:(0,P.jsx)(c.EmojiText,{text:null!=i?i:t.name,ellipsify:!0}),image:t.icon,secondary:t.secondary,detail:t.showRemove&&(n?(0,P.jsx)(s.default,{transitionName:"fade",children:(0,P.jsx)(g.Spinner,{size:18,stroke:6,color:"highlight"})}):(0,P.jsx)(s.default,{transitionName:"fade",children:(0,P.jsx)(N,{onClick:()=>{var e;null===(e=t.handleRemove)||void 0===e||e.call(t,t.subgroupWid,null!=i?i:t.name,a)}})}))})}var B=(0,D.forwardRef)(((e,t)=>{const{joinedSubgroups:n,unjoinedSubgroups:a,currentSubgroupCount:s,onNewGroupFlow:c,onExistingGroupFlow:g,onBack:v,parentId:M}=e,N=(0,i.getParentGroupLinkLimit)(),B=(0,D.useRef)(null),U=(0,D.useRef)(new h.default),H=()=>{l.ModalManager.open((0,P.jsx)(C.default,{maxSubgroups:N}))},G=(e,t,n)=>{(0,x.handleRemoveGroup)(M,s,e,t,n)},z=[...n,...a].map((e=>{const[t,n]=(e=>{let t,n;const a=k.ChatCollection.get(e.toString());return a?(t=(0,r.default)(a.groupMetadata,"groupChat.groupMetadata"),n=a.title()):(t=T.default.assertGet(e.toString()),n=t.subject),[t,n]})(e);if(!0===t.defaultSubgroup)return{itemKey:e.toString(),subgroupWid:e,parentId:M,name:n,icon:L,secondary:w.fbt._("Announcement group",null,{hk:"1YLlbO"}),announcementGroup:!0,showRemove:!1};const a=(0,P.jsx)(u.DetailImage,{id:e});let o;return o=null!=t.participants?(0,y.default)(t.participants):w.fbt._("You created group {subject}",[w.fbt._param("subject",n)],{hk:"2nJMx9"}),{name:n,subgroupWid:e,parentId:M,itemKey:e.toString(),icon:(0,P.jsx)(m.default,{xstyle:A.roundIcon,theme:"transparent",children:a}),secondary:o,announcementGroup:!1,showRemove:!0,handleRemove:G}})).sort(_.SubgroupComparator);(0,D.useImperativeHandle)(t,(()=>({restoreFocus:()=>{var e;return null===(e=B.current)||void 0===e?void 0:e.focus()},getElement:()=>B.current})));const q=w.fbt._("Manage groups ({groupcount}{=m2}{maxsubgroups})",[w.fbt._param("groupcount",o.default.n(s)),w.fbt._param("maxsubgroups",o.default.n(N)),w.fbt._implicitParam("=m2",(0,P.jsx)("span",{children:w.fbt._("/",null,{hk:"1j0TgB"})}))],{hk:"2JF0vw"});return(0,P.jsxs)(b.default,{children:[(0,P.jsx)(S.DrawerHeader,{title:q,type:S.DRAWER_HEADER_TYPE.LARGE,onBack:v}),(0,P.jsxs)(E.default,{children:[(0,P.jsxs)(j.default,{children:[(0,P.jsx)("div",{"data-list-scroll-offset":!0,ref:B,children:(0,P.jsx)(d.default,{testid:"create-new-group-row",image:O,primary:w.fbt._("Create new group",null,{hk:"4hNxJp"}),onClick:()=>{s>=N?H():c()}})}),(0,P.jsx)("div",{"data-list-scroll-offset":!0,children:(0,P.jsx)(d.default,{testid:"add-existing-group-row",image:R,primary:w.fbt._("Add existing group",null,{hk:"zy8Cr"}),onClick:()=>{s>=N?H():g()}})})]}),(0,P.jsx)(j.default,{title:w.fbt._("GROUPS IN THIS COMMUNITY",null,{hk:"1kTWJn"}),containerTestId:"groups-in-community",children:(0,P.jsx)(p.default,{flatListControllers:[U.current],className:(0,I.default)(A.panelBody),id:"pane-side",children:(0,P.jsx)(f.FlatList,{flatListController:U.current,direction:"vertical",data:z,renderItem:e=>(0,P.jsx)(F,{data:e})})})})]})]})}));t.default=B},704548:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(141455),o=a(n(731497)),i=n(667294),l=a(n(616031)),s=n(785893);var d=(0,i.forwardRef)((e=>{const t=(0,l.default)((()=>{e.onBack?e.onBack():r.DrawerManager.closeDrawerLeft()}));return(0,s.jsx)(o.default,{onBack:t,chat:e.chat})}));t.default=d},453849:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.LinkingFailedModal=function(e){let{parentGroupId:t,failedGroups:n}=e;const a=(0,c.jsx)(l.default,{type:"primary",onClick:()=>{r.Cmd.openCommunityHomeManageGroups(t),o.ModalManager.close()},children:u.fbt._("Add Groups",null,{hk:"fDoqm"})}),f=(0,c.jsx)(l.default,{type:"secondary",onClick:()=>o.ModalManager.close(),children:u.fbt._("Cancel",null,{hk:"2g51G7"})}),p=(0,s.getFormattedGroupListForCommunity)((0,i.flattenPairList)(n.map((e=>[e,""]))));return(0,c.jsx)(d.Modal,{actions:[f,a],children:(0,c.jsx)("div",{children:u.fbt._({"*":"{groups} could not be added to the community. Try adding them again.",_1:"{groups} could not be added to the community. Try adding it again."},[u.fbt._plural(n.length),u.fbt._param("groups",p)],{hk:"1jqcZt"})})})};var r=n(781572),o=n(914597),i=n(556952),l=a(n(39770)),s=n(516961),d=n(857224),u=n(548360),c=n(785893)},330730:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,m.default)(e.onContinue),n=p.fbt._("Start your community",null,{hk:"2NyNXg"}),a=(0,g.jsx)(l.default,{name:"communities-nux"}),x=p.fbt._("Organize related groups",null,{hk:"26vJsW"}),C=p.fbt._("Manage groups from one space",null,{hk:"2HiC7q"}),y=(0,g.jsx)(l.default,{name:"subgroups-nux",width:24,height:24,iconXstyle:v.iconStroke}),_=p.fbt._("Keep chats focused",null,{hk:"1Lncqy"}),b=p.fbt._("Create groups for different topics",null,{hk:"2PW1yI"}),E=(0,g.jsx)(l.default,{name:"chat",width:24,height:24,iconXstyle:v.iconColor}),S=p.fbt._("Reach everyone at once",null,{hk:"2kpfZa"}),j=p.fbt._("Send announcements to members",null,{hk:"2z3GIY"}),k=(0,g.jsx)(l.default,{name:"announcement-speaker",width:24,height:24,viewBox:{x:26,y:26,width:160,height:160},iconXstyle:v.iconColor});return(0,g.jsxs)(d.default,{children:[(0,g.jsx)(c.DrawerHeader,{title:p.fbt._("New community",null,{hk:"2fzGYI"}),type:c.DRAWER_HEADER_TYPE.LARGE,onBack:e.onBack}),(0,g.jsx)(u.default,{children:(0,g.jsxs)(f.default,{animation:!1,theme:"full-height",children:[(0,g.jsx)(r.FlexRow,{align:"center",justify:"center",children:(0,g.jsx)(o.default,{xstyle:v.badge,children:a})}),(0,g.jsx)(r.FlexRow,{align:"center",justify:"center",children:(0,g.jsx)(s.TextHeader,{level:"2",xstyle:v.header,size:"24",color:"dark",weight:"bold",children:n})}),(0,g.jsxs)("div",{className:(0,h.default)(v.section),children:[(0,g.jsx)(r.FlexColumn,{xstyle:v.icon,children:y}),(0,g.jsxs)(r.FlexColumn,{xstyle:v.content,children:[(0,g.jsx)(s.TextHeader,{level:"3",theme:"title",xstyle:v.headerText,children:x}),(0,g.jsx)(s.TextParagraph,{theme:"muted",xstyle:v.paragraphText,children:C})]})]}),(0,g.jsxs)("div",{className:(0,h.default)(v.section),children:[(0,g.jsx)(r.FlexColumn,{xstyle:v.icon,children:E}),(0,g.jsxs)(r.FlexColumn,{xstyle:v.content,children:[(0,g.jsx)(s.TextHeader,{level:"3",theme:"title",xstyle:v.headerText,children:_}),(0,g.jsx)(s.TextParagraph,{theme:"muted",xstyle:v.paragraphText,children:b})]})]}),(0,g.jsxs)("div",{className:(0,h.default)(v.section),children:[(0,g.jsx)(r.FlexColumn,{xstyle:v.icon,children:k}),(0,g.jsxs)(r.FlexColumn,{xstyle:v.content,children:[(0,g.jsx)(s.TextHeader,{level:"3",theme:"title",xstyle:v.headerText,children:S}),(0,g.jsx)(s.TextParagraph,{theme:"muted",xstyle:v.paragraphText,children:j})]})]}),(0,g.jsx)("div",{className:(0,h.default)(v.nextButton),children:(0,g.jsx)(i.Round,{testid:"nux-continue-btn",onClick:t,children:(0,g.jsx)(l.default,{name:"arrow-forward",directional:!0})})})]})})]})};var r=n(429623),o=a(n(748846)),i=n(482857),l=a(n(23217)),s=n(113923),d=a(n(60453)),u=a(n(69637)),c=n(994790),f=a(n(833308)),p=n(548360),h=a(n(156720)),m=a(n(616031)),g=n(785893);const v={badge:{marginTop:"mnhq3yws"},header:{marginTop:"rek1qe2c",marginEnd:"k1jo73ug",marginBottom:"mpdn4nr2",marginStart:"isfiuinm",maxWidth:"dknb6df3",textAlign:"qfejxiq4",lineHeight:"a4ywakfo"},section:{display:"p357zi0d",marginTop:"mnhq3yws",marginEnd:"k1jo73ug",marginBottom:"mpdn4nr2",marginStart:"isfiuinm",maxWidth:"dknb6df3"},icon:{paddingTop:"i5tg98hk"},iconStroke:{color:"h6rxrygl"},iconColor:{color:"s4k44ver"},content:{paddingStart:"bmj4fdax"},headerText:{lineHeight:"pvbam5uh"},paragraphText:{paddingTop:"tspiaou6"},nextButton:{display:"p357zi0d",justifyContent:"j1p1mz06",paddingTop:"gfh9adf5",paddingEnd:"p98qe3cq",paddingBottom:"lnhl94cj",paddingStart:"q8b7qhal",textAlign:"qfejxiq4"}}},89309:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(288306)),o=n(153492),i=n(408139),l=a(n(265597)),s=n(233080),d=a(n(39770)),u=n(429623),c=a(n(748846)),f=n(747915),p=a(n(630855)),h=a(n(23217)),m=n(113923),g=a(n(60453)),v=a(n(69637)),x=n(994790),C=a(n(833308)),y=n(669951),_=n(883508),b=a(n(600709)),E=n(548360),S=n(667294),j=a(n(156720)),k=a(n(616031)),T=a(n(859312)),w=a(n(616223)),D=n(587550),I=n(785893);const M="NEW_COMMUNITY_CELL",P="COMMUNITY_HEADER",A="ACTIVITY_CELL",O="SUBGROUP_CHAT_CELL",R="SEE_ALL_CELL",L="GUTTER",N={drawer:{backgroundColor:"se2m7z6i"},container:{paddingTop:"i5tg98hk",paddingEnd:"qkgcnfab",paddingBottom:"przvwfww",paddingStart:"ly84yby8"},emptyTabBadge:{marginTop:"mnhq3yws"},emptyTabHeader:{marginTop:"rek1qe2c",marginEnd:"k1jo73ug",marginBottom:"mpdn4nr2",marginStart:"isfiuinm",lineHeight:"a4ywakfo",textAlign:"qfejxiq4"},emptyTabDescription:{marginTop:"rek1qe2c",marginEnd:"k1jo73ug",marginBottom:"ndlvrqf7",marginStart:"isfiuinm",color:"gro5s87f",lineHeight:"a4ywakfo",textAlign:"qfejxiq4"},emptyTabButton:{marginBottom:"ndlvrqf7"},gutter:{backgroundColor:"se2m7z6i",height:"g965lu3b"}},F=e=>(0,I.jsxs)(C.default,{theme:"full-height",xstyle:N.container,children:[(0,I.jsx)(u.FlexRow,{align:"center",justify:"center",children:(0,I.jsx)(c.default,{xstyle:N.emptyTabBadge,children:(0,I.jsx)(h.default,{name:"community-tab-nux"})})}),(0,I.jsx)(m.TextHeader,{level:"2",size:"24",color:"dark",weight:"bold",xstyle:N.emptyTabHeader,children:E.fbt._("Introducing communities",null,{hk:"3jmmoW"})}),(0,I.jsx)(m.TextParagraph,{xstyle:N.emptyTabDescription,children:E.fbt._("Easily organize your related groups and send announcements. Now, your communities, like neighborhoods or schools, can have their own space.",null,{hk:"1EdNCP"})}),(0,i.communityCreationEnabled)()?(0,I.jsx)(u.FlexRow,{align:"center",justify:"center",children:(0,I.jsx)(c.default,{xstyle:N.emptyTabButton,children:(0,I.jsx)(d.default,{testid:"start-a-community",type:"primary",onClick:e.onNewCommunity,children:E.fbt._("Start a community",null,{hk:"1QHYDb"})})})}):null]}),B=()=>(0,I.jsx)("div",{className:(0,j.default)(N.gutter)}),U=(0,r.default)((e=>{var t,n,a,r;const o=e.joinedSubgroups.map((e=>y.ChatCollection.get(e))).sort(((e,t)=>{var n,a;return(null!==(n=null==t?void 0:t.t)&&void 0!==n?n:Number.MAX_SAFE_INTEGER)-(null!==(a=null==e?void 0:e.t)&&void 0!==a?a:Number.MAX_SAFE_INTEGER)})),i=null!==(t=null===(n=y.ChatCollection.get(e.id))||void 0===n?void 0:n.t)&&void 0!==t?t:Number.MAX_SAFE_INTEGER,l=null!==(a=null===(r=o[0])||void 0===r?void 0:r.t)&&void 0!==a?a:Number.MAX_SAFE_INTEGER;return l<i?l:i}));var H=(0,S.forwardRef)(((e,t)=>{const n=(0,w.default)((()=>new p.default)),a=(0,S.useRef)(),r=(0,k.default)((t=>{e.onCommunityHome(t)})),d=(0,T.default)();(0,D.useListener)(b.default,"add remove change",d);const u=(0,k.default)(((t,n)=>{(0,o.updateLastSeenTimestamp)(n),b.default.remove(t);const a=t.map((e=>{let{subgroupId:t}=e;return t}));e.onActivityCell(n.id,a)}));return(0,I.jsxs)(g.default,{ref:t,xstyle:N.drawer,children:[(0,I.jsx)(x.DrawerHeader,{title:E.fbt._("Communities",null,{hk:"2zqZTi"}),type:x.DRAWER_HEADER_TYPE.LARGE,onBack:e.onBack}),e.parentGroups.length>0?(0,I.jsx)(v.default,{flatListControllers:[n.current],children:(0,I.jsx)(f.FlatList,{ref:a,data:(()=>{const t=e.parentGroups.filter((e=>null!=y.ChatCollection.get(e.id))).sort(((e,t)=>U(t)-U(e))),n=(0,i.communityCreationEnabled)()?[{itemKey:"new-community-btn",type:M},{itemKey:(0,l.default)(),type:L,height:10}]:[];return t.forEach((e=>{const t=[],a=e.id.toString(),r=y.ChatCollection.assertGet(e.id),o=e.joinedSubgroups.map((e=>y.ChatCollection.assertGet(e))).sort(((e,t)=>{var n,a;return(null!==(n=null==t?void 0:t.t)&&void 0!==n?n:Number.MAX_SAFE_INTEGER)-(null!==(a=null==e?void 0:e.t)&&void 0!==a?a:Number.MAX_SAFE_INTEGER)})),i=b.default.getActivityFor(e.id),l=i.some((e=>e.type===_.ActivityTypeType.NEW_COMMUNITY));t.push({itemKey:`community-header-${a}`,type:P,parentGroupMetadata:e,parentGroupChat:r,isNewCommunity:l});const s=i.filter((e=>e.type!==_.ActivityTypeType.NEW_COMMUNITY));s.length&&t.push({itemKey:`community-activity-${a}`,type:A,activities:s,parentGroupMetadata:e});const d=o.find((e=>{var t;return null===(t=e.groupMetadata)||void 0===t?void 0:t.defaultSubgroup}));null!=d&&t.push({itemKey:`community-cag-${a}`,type:O,subgroup:d});const u=o.filter((e=>e!==d));null!=u[0]&&t.push({itemKey:`community-subgroup-${u[0].id.toString()}`,type:O,subgroup:u[0]}),s.length||null==u[1]||t.push({itemKey:`community-subgroup-${u[1].id.toString()}`,type:O,subgroup:u[1]}),t.length>1&&t.push({itemKey:`community-see-all-${a}`,type:R,parentGroupWid:e.id}),t.push({itemKey:`community-gutter-${a}`,type:L,height:10}),n.push(...t)})),n})(),renderItem:t=>{switch(t.type){case M:return(0,I.jsx)(C.default,{animation:!1,children:(0,I.jsx)(s.NewCommunityCell,{onNewCommunity:e.onNewCommunity})});case P:return(0,I.jsx)(C.default,{animation:!1,children:(0,I.jsx)(s.CommunityCell,{parentGroupMetadata:t.parentGroupMetadata,parentGroupChat:t.parentGroupChat,onClick:()=>r(t.parentGroupChat.id),isNew:t.isNewCommunity})});case L:return(0,I.jsx)(B,{});case A:return(0,I.jsx)(C.default,{animation:!1,children:(0,I.jsx)(s.ActivityCell,{activities:t.activities,onClick:()=>u(t.activities,t.parentGroupMetadata)})});case O:return(0,I.jsx)(C.default,{animation:!1,children:(0,I.jsx)(s.SubgroupChatCell,{subgroup:t.subgroup})});case R:return(0,I.jsx)(C.default,{animation:!1,children:(0,I.jsx)(s.ViewAllCell,{onClick:()=>r(t.parentGroupWid)})})}},flatListController:n.current,direction:"vertical"})}):(0,I.jsxs)(v.default,{children:[(0,I.jsx)(F,{onNewCommunity:e.onNewCommunity}),")}"]})]})}));t.default=H},281857:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{icon:t,title:n,description:a}=e;return(0,i.jsxs)("div",{className:(0,o.default)(l.informationCell),children:[(0,i.jsx)("div",{className:(0,o.default)(l.iconColumn),children:t}),(0,i.jsxs)("div",{className:(0,o.default)(l.textAreaColumn),children:[(0,i.jsx)(r.TextHeader,{level:"3",children:n}),(0,i.jsx)(r.TextParagraph,{theme:"muted",xstyle:l.subText,children:a})]})]})};var r=n(113923),o=a(n(156720)),i=n(785893);const l={informationCell:{display:"p357zi0d",marginTop:"e3miq1pi",marginBottom:"r2u2pyhj",width:"ln8gz9je"},textAreaColumn:{flexGrow:"ggj6brxn",marginEnd:"gqi0zhd6",marginStart:"nzcjdldu"},subText:{paddingTop:"fbgy3m38"},iconColumn:{paddingTop:"ppypbuwx",width:"i94gqilv",height:"bmot90v7"}}},863232:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(145095)),o=a(n(568064)),i=n(408139),l=n(914597),s=a(n(171878)),d=a(n(656110)),u=a(n(961684)),c=n(273093),f=a(n(39770)),p=a(n(744356)),h=n(288984),m=n(965417),g=n(747915),v=a(n(944942)),x=a(n(630855)),C=n(482857),y=a(n(852711)),_=n(111054),b=a(n(23217)),E=a(n(701784)),S=a(n(60453)),j=a(n(69637)),k=n(994790),T=a(n(833308)),w=n(857224),D=a(n(963928)),I=n(548360),M=n(667294),P=a(n(156720)),A=a(n(616031)),O=n(785893);const R={addGroupButton:{paddingBottom:"a15vwmim",marginTop:"o9i7y497"},panelBody:{zIndex:"jnl3jror",display:"p357zi0d",flexDirection:"f8m0rgwh",flexGrow:"ggj6brxn",overflowY:"ag5g9lrv",backgroundColor:"ihvf49ua"},nextButton:{zIndex:"b9fczbqn",display:"p357zi0d",justifyContent:"j1p1mz06",paddingBottom:"hjz8m82x",marginTop:"ignnouf6",textAlign:"qfejxiq4",animationName:"s0bejz76",animationDuration:"oauresqk",animationTimingFunction:"pqvv99ib"},roundIcon:{height:"brqbuz94",width:"nfc7olq2",overflowX:"gfz4du6o",overflowY:"r7fjleex"},announcementIcon:{backgroundColor:"se52eggw"},announcementSpeaker:{color:"jn5oezdz"},groupIcon:{height:"ppled2lx",width:"ln8gz9je"},xColor:{color:"hp667wtd"}},L=(0,O.jsx)(y.default,{children:(0,O.jsx)(b.default,{name:"people"})}),N=(0,O.jsx)(y.default,{children:(0,O.jsx)(b.default,{name:"plus"})}),F=(0,O.jsx)(y.default,{xstyle:[R.roundIcon,R.announcementIcon],theme:"transparent",children:(0,O.jsx)(b.default,{name:"announcement-speaker",directional:!0,height:40,width:40,iconXstyle:R.announcementSpeaker})});function B(e){let{data:t,isAnnouncementGroup:n,onRemoveGroup:a}=e;return n?(0,O.jsx)(p.default,{primary:(0,O.jsx)(m.EmojiText,{text:t.name,ellipsify:!0}),image:t.icon,secondary:(0,O.jsx)(m.EmojiText,{text:t.secondary,ellipsify:!0})}):(0,O.jsx)(p.default,{primary:(0,O.jsx)(m.EmojiText,{text:t.name,ellipsify:!0}),image:t.icon,secondary:(0,O.jsx)(m.EmojiText,{text:t.secondary,ellipsify:!0}),detail:(0,O.jsx)(E.default,{onClick:()=>a(t.itemKey),children:(0,O.jsx)(b.default,{name:"x",iconXstyle:R.xColor})})})}var U=(0,M.forwardRef)(((e,t)=>{const n=(0,i.getParentGroupLinkLimitCommunityCreation)(),a=(0,M.useRef)(null),m=(0,M.useRef)(new x.default),[E,U]=(0,M.useState)(!1),H=(0,A.default)((()=>{U(!0),e.onCreateCommunity()})),G=e.groups.map((e=>{const{subject:t,icon:n=null,id:a=null,tempId:o=null,participants:i=null}=e;let l,d;null!=a?(l=(0,O.jsx)(h.DetailImage,{id:a}),null!=i&&(d=(0,u.default)(i))):(l=null!=n?(0,O.jsx)("img",{src:n,alt:"Group icon",className:(0,P.default)(R.groupIcon)}):(0,O.jsx)(b.default,{name:"default-group",xstyle:R.groupIcon,className:s.default.defaultGroupIcon}),d=I.fbt._("You created group {subject}",[I.fbt._param("subject",t)],{hk:"2nJMx9"}).toString());return{itemKey:(0,r.default)(null!=o?o:null==a?void 0:a.toString(),"tempId ?? id?.toString()"),name:e.subject,icon:(0,O.jsx)(y.default,{xstyle:R.roundIcon,theme:"transparent",children:l}),secondary:d,announcementGroup:!1}})).sort(c.SubgroupComparator);G.unshift({itemKey:e.name,name:e.name,icon:F,announcementGroup:!0,secondary:I.fbt._("Announcement group",null,{hk:"1YLlbO"}).toString()});const z=()=>{l.ModalManager.open((0,O.jsx)(d.default,{maxSubgroups:n,isCommunityCreation:!0}))};let q;return(0,M.useImperativeHandle)(t,(()=>({restoreFocus:()=>{var e;return null===(e=a.current)||void 0===e?void 0:e.focus()},getElement:()=>a.current}))),e.groups.length>0&&(q=(0,O.jsx)(C.Round,{testid:"create-community-btn",onClick:H,children:E?(0,O.jsx)(_.Spinner,{color:_.colorOptions.white,size:30}):(0,O.jsx)(b.default,{name:"checkmark"})})),(0,O.jsxs)(S.default,{children:[(0,O.jsx)(k.DrawerHeader,{title:I.fbt._("Add groups {groupcount}",[I.fbt._param("groupcount",`(${o.default.n(e.groups.length+1)}/${o.default.n(n)})`)],{hk:"1n7sgf"}),type:k.DRAWER_HEADER_TYPE.LARGE,onBack:e.onBack}),(0,O.jsxs)(j.default,{children:[(0,O.jsxs)(T.default,{children:[(0,O.jsx)("div",{"data-list-scroll-offset":!0,children:(0,O.jsx)("div",{className:(0,P.default)(R.addGroupButton),ref:a,children:(0,O.jsx)(p.default,{testid:"create-new-group",image:L,primary:I.fbt._("Create new group",null,{hk:"4hNxJp"}),onClick:()=>{e.groups.length+1>=n?z():e.onNewGroupFlow()}})})}),(0,O.jsx)("div",{"data-list-scroll-offset":!0,children:(0,O.jsx)("div",{className:(0,P.default)(R.addGroupButton),children:(0,O.jsx)(p.default,{testid:"add-existing-group",image:N,primary:I.fbt._("Add existing group",null,{hk:"zy8Cr"}),onClick:()=>{if(e.groups.length+1>=n)z();else{if(null!=D.default.findFirst((e=>e.participants.iAmAdmin())))e.onExistingGroupFlow();else{const t=(0,O.jsx)(f.default,{type:"secondary",onClick:()=>l.ModalManager.close(),children:I.fbt._("Cancel",null,{hk:"w74ws"})},0),n=(0,O.jsx)(f.default,{type:"primary",onClick:()=>{l.ModalManager.close(),e.onNewGroupFlow()},children:I.fbt._("Create group",null,{hk:"3UOEZN"})},1);l.ModalManager.open((0,O.jsx)(w.Modal,{actions:[t,n],children:(0,O.jsx)("div",{children:I.fbt._("You can only add existing groups you’re an admin of. You’re not currently an admin of any groups, but you can create a new group.",null,{hk:"38qliv"})})}))}}}})})})]}),(0,O.jsx)(T.default,{containerTestId:"groups-in-community",title:I.fbt._("GROUPS IN THIS COMMUNITY",null,{hk:"1kTWJn"}),children:(0,O.jsx)(v.default,{flatListControllers:[m.current],className:(0,P.default)(R.panelBody),id:"pane-side",children:(0,O.jsx)(g.FlatList,{flatListController:m.current,direction:"vertical",data:G,renderItem:t=>(0,O.jsx)(B,{data:t,isAnnouncementGroup:t.itemKey===e.name,onRemoveGroup:e.onRemoveGroup})})})}),(0,O.jsx)("div",{className:(0,P.default)(R.nextButton),children:q})]})]})}));t.default=U},198600:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(540436)),o=a(n(243556)),i=n(482857),l=a(n(23217)),s=n(990011),d=a(n(513699)),u=n(533646),c=a(n(60453)),f=a(n(69637)),p=n(994790),h=a(n(833308)),m=n(964551),g=n(548360),v=n(667294),x=a(n(156720)),C=a(n(616031)),y=n(785893);const _={marginTop:"ignnouf6",marginEnd:"bcfko8ch",marginBottom:"bibl1e27",marginStart:"dl2ettod"},b={zIndex:"b9fczbqn",display:"p357zi0d",justifyContent:"j1p1mz06",paddingBottom:"hjz8m82x",marginTop:"ignnouf6",textAlign:"qfejxiq4"};var E=(0,v.forwardRef)(((e,t)=>{var n,a;const E=(0,v.useRef)(null),S=(0,v.useRef)(null),[j,k]=(0,v.useState)(null!==(n=e.name)&&void 0!==n?n:""),[T,w]=(0,v.useState)(null!==(a=e.description)&&void 0!==a?a:""),[D,I]=(0,v.useState)(e.imgBlob);(0,v.useEffect)((()=>{var e;null===(e=E.current)||void 0===e||e.restoreFocus()}),[]);const M=(0,C.default)((()=>{const t=(0,d.default)(j.trim());e.onContinue(t,T,D)}));(0,v.useImperativeHandle)(t,(()=>({restoreFocus:()=>{var e;return null===(e=E.current)||void 0===e?void 0:e.restoreFocus()},getElement:()=>S.current})));const P=j.trim().length>0,A=P?(0,y.jsx)("div",{className:(0,x.default)(b),children:(0,y.jsx)(i.Round,{testid:"new-community-info-continue-btn",onClick:M,children:(0,y.jsx)(l.default,{name:"arrow-forward",directional:!0})})}):null,O=g.fbt._("Community name",null,{hk:"3Zo7Yg"}),R=g.fbt._("Community description",null,{hk:"3IB5o5"});return(0,y.jsxs)(c.default,{children:[(0,y.jsx)(p.DrawerHeader,{title:g.fbt._("New community",null,{hk:"2fzGYI"}),type:p.DRAWER_HEADER_TYPE.LARGE,onBack:e.onBack}),(0,y.jsxs)(f.default,{children:[(0,y.jsxs)(h.default,{animation:!1,children:[(0,y.jsx)("div",{className:(0,x.default)(_),children:(0,y.jsx)(u.PhotoPickerLoadable,{type:o.default.COMMUNITY,attachToChat:!1,startImage:D,onImageSet:(e,t)=>{I(t)}})}),(0,y.jsx)("div",{"data-testid":"community-subject",className:(0,x.default)(_),ref:S,children:(0,y.jsx)(s.TextInput,{title:O,ref:e=>{E.current=e},value:j,maxLength:25,showRemaining:!0,onChange:e=>{k(e)},placeholder:O,onEnter:P?M:()=>{},supportsEmoji:!0})}),(0,y.jsx)("div",{"data-testid":"community-description",className:(0,x.default)(_),children:(0,y.jsx)(s.TextInput,{title:R,value:T,maxLength:m.ServerProps.groupDescLength,showRemaining:!0,onChange:e=>{w(e)},placeholder:R,onEnter:P?M:()=>{},supportsEmoji:!0})})]}),(0,y.jsx)(r.default,{transitionName:"btn",children:A})]})]})}));t.default=E},961684:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=e.map((e=>e.contact)).filter((e=>e.isMe||e.shortName)).sort(((e,t)=>e.isMe?-1:t.isMe?1:0)).slice(0,3),n=e.length-t.length;let a="";t.length+n<3?t.forEach(((e,n)=>{const o=e.isMe?r.default.t(853):e.shortName;0===n?a+=o:n===t.length-1?a+=` ${r.default.t(252)}${o}`:a+=`${r.default.t(254)}${o}`})):t.forEach(((e,t)=>{const n=e.isMe?r.default.t(853):e.shortName;a+=0===t?n:`${r.default.t(254)}${n}`}));if(0===n)return a;0===t.length?a+=o.fbt._({"*":"{unknown_participants_user} users",_1:"1 user"},[o.fbt._plural(n,"unknown_participants_user")],{hk:"2g0vkd"}).toString():1===t.length?a=o.fbt._({"*":"{existing_name} & {unknown_participants_other} others",_1:"{existing_name} & 1 other"},[o.fbt._plural(n,"unknown_participants_other"),o.fbt._param("existing_name",a)],{hk:"3sLtd6"}).toString():t.length>1&&(a+=o.fbt._({"*":", & {unknown_participants_other} others",_1:", & 1 other"},[o.fbt._plural(n,"unknown_participants_other")],{hk:"4bzObR"}).toString());return a};var r=a(n(568064)),o=n(548360)},273093:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SubgroupComparator=function(e,t){return!0===e.announcementGroup?-1:!0===t.announcementGroup?1:e.name.toLowerCase().localeCompare(t.name.toLowerCase())}},881411:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(257243),o=a(n(145120)),i=a(n(352013)),l=a(n(568064)),s=n(408139),d=a(n(497039)),u=n(978820),c=a(n(733621)),f=a(n(60453)),p=a(n(69637)),h=n(994790),m=n(402732),g=a(n(935487)),v=a(n(248837)),x=a(n(22245)),C=a(n(744356)),y=n(685600),_=n(729424),b=a(n(630855)),E=a(n(852711)),S=a(n(23217)),j=n(719380),k=n(548360),T=n(667294),w=a(n(156720)),D=a(n(651799)),I=n(785893);const M={paddingBottom:"a15vwmim",marginTop:"o9i7y497"};function P(e,t){const{title:n,onBack:a,onClick:P,onNewGroup:A,onNewCommunity:O}=e,[R,L]=(0,T.useState)(""),N=(0,T.useRef)(),F=(0,T.useRef)(),B=(0,T.useRef)(),U=(0,T.useMemo)((()=>j.ContactCollection.frequentContacts("message")),[j.ContactCollection.length]),H=Boolean(R),G=(0,T.useMemo)((()=>H?[]:U),[H,U]),[z]=(0,T.useState)((()=>new b.default)),q=(0,T.useCallback)((e=>{j.ContactCollection.ensureSorted();const t="string"==typeof e?e:R,n=(0,r.getABPropConfigValue)("note_to_self")&&!!t;if(!t)return j.ContactCollection.getFilteredContacts(n);const a=j.ContactCollection.getFilteredContacts(n).concat(j.ContactCollection.filter((e=>e.name&&!e.isMe&&!e.isPSA&&!e.isWAContact))),o=l.default.accentFold(t),i=(0,d.default)(o);return a.filter((function(e){return e.searchMatch(o,i)}))}),[R]);(0,T.useEffect)((()=>{i.default.focus(N.current)}),[]);const W=(0,T.useCallback)((()=>{o.default.shouldIndicateFocus(),i.default.focus(N.current)}),[]),V=(0,T.useCallback)((e=>{const t=F.current;null!=t&&(e.preventDefault(),e.stopPropagation(),o.default.shouldIndicateFocus(),t.focusFirst())}),[]),Y=(0,D.default)((e=>L(e)),100),K=(0,T.useCallback)((e=>{B.current=e,Y(e)}),[Y]),X=(0,T.useCallback)((e=>{e.preventDefault(),e.stopPropagation();const t=G[0];if(t)return o.default.shouldIndicateFocus(),void P(e,t);const n=q(B.current)[0];n&&(o.default.shouldIndicateFocus(),P(e,n))}),[P,q,G]);let Q;const J=(0,u.getMeUser)(),$=j.ContactCollection.assertGet(J),Z=q();Q=0===Z.length?R?(0,y.SearchWithKeyword)(R):(0,y.SearchWithoutKeyword)():(0,I.jsx)(g.default,{ref:F,contacts:Z,flatListController:z,frequentContacts:G,onClick:P,onFocusSearch:W,showPersonGroupDivisionHeader:!!R});const ee=[];if(!R){const e=(0,I.jsx)(E.default,{children:(0,I.jsx)(S.default,{name:"default-group",height:36,width:36,directional:!0,className:c.default.defaultGroupIcon})}),t=(0,I.jsx)(E.default,{children:(0,I.jsx)(S.default,{name:"community-group",directional:!0})});ee.push((0,I.jsx)(C.default,{image:e,primary:k.fbt._("New group",null,{hk:"43A4qP"}),onClick:A})),(0,s.communityCreationEnabled)()&&ee.push((0,I.jsx)(C.default,{image:t,primary:k.fbt._("New community",null,{hk:"2fzGYI"}),onClick:O})),(0,r.getABPropConfigValue)("note_to_self")&&ee.push((0,I.jsx)(m.Contact,{contact:$,onClick:P,secondary:k.fbt._("Send messages to yourself",null,{hk:"1005uE"})}))}return(0,I.jsxs)(f.default,{ref:t,children:[(0,I.jsx)(h.DrawerHeader,{title:n,type:h.DRAWER_HEADER_TYPE.LARGE,onBack:a}),(0,I.jsx)(_.HotKeys,{handlers:{down:V},children:(0,I.jsx)(v.default,{ref:N,onSearch:K,onEnter:X,placeholder:k.fbt._("Search contacts",null,{hk:"22cmrf"})})}),(0,I.jsxs)(p.default,{flatListControllers:[z],children:[ee.map(((e,t)=>{const n=t===ee.length-1;return(0,I.jsx)("div",{"data-list-scroll-offset":!0,children:(0,I.jsxs)("div",{className:(0,w.default)(M),children:[e,n&&(0,I.jsx)(x.default,{})]})},t)})),Q]})]},"contact-modal")}var A=(0,T.forwardRef)(P);t.default=A},467873:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,U.useModelValues)(e.msg,["id","star","type","isGif","isViewOnce","labels","numTimesForwarded","isFrequentlyForwarded","chat","agentId","t","isMdHistoryMsg","kicSender","kicTimestampMs","isKept"]),n=(0,H.default)(),a=(0,G.default)(),W=(0,R.useRef)(null),V=(0,R.useRef)(null),Y=(0,F.default)((()=>new c.default.UiAction({uiActionType:c.default.UI_ACTION_TYPE.MSG_INFO_OPEN,uiActionPreloaded:!0}))),[K,X]=(0,R.useState)(void 0),[Q,J]=(0,R.useState)(!1),$=(0,N.default)();(0,B.useListener)(null==K?void 0:K.played,["add","remove"],$),(0,B.useListener)(null==K?void 0:K.read,["add","remove"],$),(0,B.useListener)(null==K?void 0:K.delivery,["add","remove"],$),(0,B.useListener)(t,["remove"],((e,t)=>{t===M.MsgCollection&&(null==n||n.requestDismiss())})),(0,R.useEffect)((()=>{var e;P.MsgInfoCollection.find(t.id).then((e=>{a.aborted||X(e)})).catch((()=>{J(!0),d.ToastManager.open((0,z.jsx)(j.Toast,{msg:O.fbt._("Couldn't display message info. Try again later.",null,{hk:"mRFf6"}),id:(0,j.genId)("msg_info_failed")}))}));const n=null===(e=W.current)||void 0===e?void 0:e.getContainer();t.type===s.MSG_TYPE.IMAGE&&n&&(n.scrollTop=n.scrollHeight)}),[]),(0,R.useEffect)((()=>{const e=Y.current;var n;e&&(Object.assign(e,(0,u.getGroupCountMetricsFromChatWid)(null===(n=t.chat)||void 0===n?void 0:n.id)),e.markUiActionT(),e.commit(),Y.current=void 0);(0,f.logUiActionShadowPrivateStatsTestEvents)(),(0,r.logMessageInfo)(t.agentId)}),[]);const Z=(0,D.default)("MD_EXTENSION"),ee=()=>{var e;return null===(e=V.current)||void 0===e?void 0:e.getMsgComponentRef()};let te,ne,ae;if(K){const e=[];if((0,x.isKeepInChatReadEnabled)()&&t.isKept&&null!=t.kicSender&&null!=t.kicTimestampMs){const n=t.kicTimestampMs/1e3,a=(0,v.getKeptByString)(t.kicSender),r=(0,z.jsx)("span",{className:(0,L.default)(q.icon),children:(0,z.jsx)(S.default,{name:"keep-in-chat",iconXstyle:q.svg})});e.push((0,z.jsx)(y.default,{title:a,t:n,icon:r},"keep-in-chat"))}if(!t.isMdHistoryMsg){var re;const n=t.type===s.MSG_TYPE.PTT;if(n||t.isViewOnce){ne=n?O.fbt._("Seen",null,{hk:"2XnbT5"}):O.fbt._("Seen",null,{hk:"n9K7N"});const t=K.played.head(),a=null==t?void 0:t.t,r=(0,z.jsx)("span",{className:(0,L.default)(q.icon),children:(0,z.jsx)(S.default,{xstyle:q.statusBlue,iconXstyle:q.svg,name:n?"status-ptt":"view-once-viewed"})});e.push((0,z.jsx)(y.default,{title:n?i.default.t(459):O.fbt._("Opened",null,{hk:"4lUnhv"}),t:a,icon:r},"played"))}const a=K.read.head(),r=null==a?void 0:a.t,o=(0,z.jsx)("span",{className:(0,L.default)(q.icon),children:(0,z.jsx)(S.default,{name:"status-dblcheck",xstyle:q.ack,iconXstyle:q.svg})});ne=null!==(re=ne)&&void 0!==re?re:i.default.t(461),e.push((0,z.jsx)(y.default,{title:ne,t:r,icon:o},"read"));const l=K.delivery.head(),d=null==l?void 0:l.t,u=(0,z.jsx)("span",{className:(0,L.default)(q.icon),children:(0,z.jsx)(S.default,{name:"status-dblcheck",iconXstyle:q.svg})});e.push((0,z.jsx)(y.default,{title:i.default.t(457),t:d,icon:u},"delivery"))}if(Z&&(0,l.isMultiDeviceMessageAttributionEnabled)()&&null!=t.agentId){const n=(0,w.getAgentName)(t.agentId),a=t.t;e.push((0,z.jsx)(y.default,{title:n,t:a,icon:(0,z.jsx)("span",{className:(0,L.default)(q.icon),children:(0,z.jsx)(S.default,{name:"md-opt-in",iconXstyle:q.svg})})},"agent"))}!A.ServerProps.hfmStringChanges&&t.numTimesForwarded>0&&!t.isFrequentlyForwarded&&e.push((0,z.jsx)(_.default,{msg:t},"forward")),te=(0,z.jsx)(g.default,{theme:"padding",children:e})}K||Q||(ae=(0,z.jsx)("div",{className:(0,L.default)(q.spinner),children:(0,z.jsx)(E.Spinner,{size:50,stroke:4})},"spinner"));let oe=null;t.labels&&t.labels.length>0&&(0,l.canDisplayLabel)()&&(oe=(0,z.jsx)(g.default,{theme:"padding",children:(0,z.jsx)(C.default,{labels:t.labels})}));return(0,z.jsxs)(p.default,{theme:"striped",children:[(0,z.jsx)(m.DrawerHeader,{title:i.default.t(456),type:m.DRAWER_HEADER_TYPE.SMALL,rtlFixIfOnDarwin:!0,onCancel:()=>{null==n||n.requestDismiss()}}),(0,z.jsx)(b.default,{ref:W,chatPreference:I.default.assertGet("defaultPreference"),children:(0,z.jsx)(T.Wrapper,{msg:t,ref:V,displayType:o.DISPLAY_TYPE.MSG_INFO,isMsgVisible:function(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e===t.id&&(!!n||ee())},position:k.MsgPosition.END,onProductClick:e.onProductClick})}),(0,z.jsxs)(h.default,{children:[oe,(0,z.jsxs)("div",{className:(0,L.default)(q.body),children:[ae,te]})]})]},"message-info-modal")};var r=n(75396),o=n(705177),i=a(n(568064)),l=n(408139),s=n(115461),d=n(694816),u=n(500634),c=a(n(471410)),f=n(793249),p=a(n(60453)),h=a(n(69637)),m=n(994790),g=a(n(833308)),v=n(782109),x=n(161509),C=a(n(777577)),y=a(n(156790)),_=a(n(82678)),b=a(n(201697)),E=n(111054),S=a(n(23217)),j=n(950452),k=n(887931),T=n(617395),w=n(461126),D=a(n(156313)),I=a(n(366034)),M=n(559871),P=n(617972),A=n(964551),O=n(548360),R=n(667294),L=a(n(156720)),N=a(n(859312)),F=a(n(616223)),B=n(587550),U=n(735461),H=a(n(895402)),G=a(n(803409)),z=n(785893);const q={icon:{display:"l7jjieqr",width:"dh5rsm73",marginEnd:"bugiwsl0",color:"s4k44ver",textAlign:"qfejxiq4",verticalAlign:"j0vv7iav"},svg:{width:"dh5rsm73",height:"hpdpob1j"},statusBlue:{color:"sunvlxxz"},ack:{color:"ajgik1ph"},spinner:{display:"p357zi0d",alignItems:"gndfcl4n",justifyContent:"ac2vgrno",minHeight:"h2zl7k75"},body:{flexShrink:"oq44ahr5",paddingTop:"emrlamx0",paddingBottom:"s9fl9ege"}}},542769:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{supportTag:t,onSend:n,onFailure:a,onCancel:w,onEmail:D,entityId:I}=e,M=(0,j.default)(),[P,A]=(0,S.useState)(""),[O,R]=(0,S.useState)(null),[L,N]=(0,S.useState)(!0),[F,B]=(0,S.useState)(!1),U=(0,S.useRef)(null);(0,S.useEffect)((()=>{var e;null===(e=U.current)||void 0===e||e.restoreFocus()}),[]);const H=e=>e.length>=10,G=()=>{if(H(P)){const e=(0,d.getDebugInfo)({supportTag:t,convertFields:!0,addUserAgentDetails:!0,entityId:I}),i=L?JSON.stringify(e):void 0;B(!0),null==n||n({description:P}),__LOG__(2)`InAppSupport: Sending support request with deviceInfo=${L}:${null!=i?i:"n/a"}`,(0,o.default)((0,c.sendSupportRequest)(P,i),M).then((e=>{null!=e.message?(u.ModalManager.close(),f.ToastManager.open((0,k.jsx)(b.Toast,{msg:E.fbt._("Your question has been sent to WhatsApp Support. We'll respond in a WhatsApp chat shortly.",null,{hk:"2wt947"}),id:(0,b.genId)()}))):a&&a({description:P})})).catch((0,r.catchAbort)((()=>{}))).finally((()=>{B(!1)}))}else R(s.default.t(597))},z=()=>{null==w||w(),u.ModalManager.close()},q=()=>{D&&(u.ModalManager.close(),D({description:P}))},W=e=>{A(e)},V=()=>{N(!L)},Y=e=>{e.stopPropagation()},K={enter:Y};F&&(K.esc=Y);if((0,i.isMDBackend)()){const e="contact-us-include-device";return(0,k.jsx)(p.default,{title:E.fbt._("Contact us",null,{hk:"1FJ2cU"}),okDisabled:!H(P)||F,okSpinner:F,okText:s.default.t(586),onOK:G,onCancel:F?void 0:z,children:(0,k.jsx)(C.HotKeys,{handlers:K,children:(0,k.jsxs)(v.FlexColumn,{align:"stretch",children:[(0,k.jsx)(_.TextInput,{error:O,maxLength:5e3,onChange:W,placeholder:E.fbt._("Tell us how we can help",null,{hk:"1R8W3F"}),ref:U,value:P,theme:"contact-us"}),(0,k.jsx)(x.default,{xstyle:T.deviceInfo,grow:1,children:(0,k.jsx)(y.TextParagraph,{theme:"muted-small",children:E.fbt._("Include device information? (optional)",null,{hk:"1nGqHl"})})}),(0,k.jsxs)(v.FlexRow,{children:[(0,k.jsx)(x.default,{xstyle:T.deviceInfoLabel,grow:1,children:(0,k.jsx)("label",{htmlFor:e,children:(0,k.jsxs)(y.TextParagraph,{theme:"plain",children:[E.fbt._("Technical details like your model and settings can help us answer your question.",null,{hk:"1Edwn1"})," ",(0,k.jsx)(g.ExternalLink,{href:(0,l.getSupportChatFaqUrl)(),children:s.default.t(394)})]})})}),(0,k.jsx)(x.default,{xstyle:T.deviceInfoCheckbox,grow:0,children:(0,k.jsx)(h.CheckBox,{checked:L,id:e,onChange:V})})]}),(0,k.jsx)(v.FlexRow,{children:(0,k.jsx)(x.default,{xstyle:T.emailLink,grow:1,children:(0,k.jsx)(m.default,{onClick:q,children:E.fbt._("Get support via email",null,{hk:"3vajRd"})})})})]})})})}return(0,k.jsx)(p.default,{okText:E.fbt._("OK",null,{hk:"2KEeHb"}),onOK:()=>u.ModalManager.close(),title:E.fbt._("Contact us",null,{hk:"1FJ2cU"}),children:(0,k.jsx)(y.TextParagraph,{theme:"plain",children:E.fbt._("The support request form is not yet available for desktop. Use your phone to submit it.",null,{hk:"2Jk5Da"})})})};var r=n(389385),o=a(n(747259)),i=n(88555),l=n(221310),s=a(n(568064)),d=n(53658),u=n(914597),c=n(338409),f=n(694816),p=a(n(452665)),h=n(316593),m=a(n(499360)),g=n(912591),v=n(429623),x=a(n(748846)),C=n(729424),y=n(113923),_=n(990011),b=n(950452),E=n(548360),S=n(667294),j=(a(n(156720)),a(n(803409))),k=n(785893);const T={deviceInfo:{marginBottom:"t4zgqcuo",marginTop:"opp68qpq"},deviceInfoCheckbox:{minWidth:"r7yn1a4o"},deviceInfoLabel:{paddingEnd:"l9g3jx6n"},emailLink:{marginTop:"opp68qpq"}}},854896:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return(0,i.jsx)("div",{className:(0,o.default)(l),children:(0,i.jsx)("div",{className:(0,o.default)(s),children:r.fbt._("Drag file here",null,{hk:"y9aHs"})})},"container")};var r=n(548360),o=a(n(156720)),i=n(785893);const l={position:"lhggkp7q",zIndex:"q297boen",width:"ln8gz9je",height:"ppled2lx",backgroundColor:"ipp30ku8"},s={boxSizing:"cm280p3y",display:"p357zi0d",alignItems:"gndfcl4n",justifyContent:"ac2vgrno",height:"nioqejvd",marginTop:"nylzjxre",marginEnd:"lfum0007",marginBottom:"bvhm1occ",marginStart:"r6x3u63k",fontSize:"kuk548i2",color:"hn08p73j",borderTop:"joyebr9p",borderEnd:"jradjnc8",borderBottom:"opq9nt8f",borderStart:"ikkoynhc"}},871520:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{rootRef:t,disabled:n,onClick:a,children:c}=e;const[f,p,h]=function(e){const[t,n]=(0,i.useState)(),[a,r]=(0,i.useState)(),[o,{isIntersecting:l}]=(0,s.default)({root:e,rootMargin:null!=t?`-${t.offsetHeight}px`:void 0});return(0,i.useEffect)((()=>{if(null!=e&&null!=t&&null!=a){if(l)t.style.removeProperty("right");else{const n=e.offsetWidth-(e.clientWidth+2*e.clientLeft);t.style.setProperty("right",`${n}px`)}a.style.setProperty("min-height",`${t.offsetHeight}px`)}}),[l,e,t,a]),[l,e=>{o(e),r(e)},n]}(t);return(0,d.jsx)("div",{ref:p,className:(0,l.default)(u.ctaPlaceholder),children:(0,d.jsx)(r.default,{ref:h,xstyle:[f?null:u.ctaContainerSticky],theme:"sticky-button-section",children:(0,d.jsx)(o.default,{type:"primary",onClick:a,disabled:n,className:(0,l.default)(u.ctaButton),children:c})})})};var r=a(n(833308)),o=a(n(39770)),i=n(667294),l=a(n(156720)),s=a(n(844692)),d=n(785893);const u={ctaContainerSticky:{position:"ly2gu7o9",bottom:"jxacihee",left:"tukmaf4q",boxShadow:"th8ck7tu"},ctaButton:{display:"f804f6gw",marginBottom:"pel5o5rz"},ctaPlaceholder:{marginBottom:"brac1wpa"}}},21976:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.E2eChangeModal=function(e){const t=(0,s.useModelValues)(e.contact,["formattedShortName"]),n=l.fbt._("OK",null,{hk:"2KEeHb"}),a=t.formattedShortName,u=r.default.t(774,{contactName:a}),c=r.default.t(773,{contactName:a});return(0,d.jsx)(i.default,{title:u,onOK:()=>o.ModalManager.close(),okText:n,children:c})};var r=a(n(568064)),o=n(914597),i=a(n(452665)),l=n(548360),s=n(735461),d=n(785893)},891966:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{theme:t}=(0,d.useContext)(l.ThemeContext),n=(0,d.useRef)(e.selectedIndex),a=(0,d.useRef)([]),p={rows:e.colors,getNum:()=>p.rows.reduce(((e,t)=>e+t.length),0)};let h=0;return(0,c.jsx)(i.HotKeys,{role:"tablist",handlers:{right:()=>{var e;const t=n.current===p.getNum()-1?0:n.current+1;null===(e=a.current[t])||void 0===e||e.focus()},left:()=>{var e;const t=0===n.current?p.getNum()-1:n.current-1;null===(e=a.current[t])||void 0===e||e.focus()}},className:(0,s.default)(e.className),children:p.rows.map(((i,l)=>(0,c.jsx)(o.FlexRow,{className:(0,u.default)(f.row),justify:"center",children:i.map((i=>{const l=h++,s=e.selectedIndex===l;return(0,c.jsx)(o.FlexRow,{justify:"center",align:"center",children:(0,c.jsx)(o.FlexRow,{justify:"center",align:"center",className:(0,u.default)(f.btnOutline),style:{border:s?`1.5px solid ${(0,r.default)(i,"light"===t?600:300)}`:""},children:(0,c.jsx)("button",{role:"tab",ref:e=>a.current[l]=e,tabIndex:s?0:-1,"aria-selected":s,className:(0,u.default)(f.btn,s&&f.btnSelected),style:{backgroundColor:(0,r.default)(i,200)},onClick:()=>e.onSelect(l),onFocus:()=>n.current=l})})},l)}))},l)))})};var r=a(n(743691)),o=n(429623),i=n(729424),l=n(597628),s=a(n(294184)),d=n(667294),u=a(n(156720)),c=n(785893);const f={row:{marginTop:"s11ka3oa"},btnOutline:{boxSizing:"cm280p3y",width:"mgp6u6um",height:"j8e73hjv",borderTopStartRadius:"g9p5wyxn",borderTopEndRadius:"i0tg5vk9",borderBottomEndRadius:"aoogvgrq",borderBottomStartRadius:"o2zu3hjb",marginStart:"o1cmhq28",marginEnd:"itgzszx5"},btn:{width:"tknnhhou",height:"sai7fuui",borderTopStartRadius:"g9p5wyxn",borderTopEndRadius:"i0tg5vk9",borderBottomEndRadius:"aoogvgrq",borderBottomStartRadius:"o2zu3hjb",":focus":{borderTopStartRadius:"mn9o3mn1",borderTopEndRadius:"xthzmdyy",borderBottomEndRadius:"jzps8tg2",borderBottomStartRadius:"jbikg389"}},btnSelected:{width:"jabl2ek9",height:"t1nufmh4"}}},601161:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.EditGroupProfileDrawer=function(e){var t,n;const[a,M]=(0,S.useState)(null),[P,A]=(0,S.useState)(null),[O,R]=(0,S.useState)(null),[L,N]=(0,S.useState)(0),F=(0,S.useRef)(null),B=(0,S.useRef)(null),U=(0,S.useRef)(!1),H={EMOJI:0,STICKER:1},G=(0,S.useRef)({[H.EMOJI]:()=>{},[H.STICKER]:()=>{}}),z=(0,S.useRef)([]),q=160,W={width:90,height:48},V=104;(0,S.useEffect)((()=>{var e;null===(e=B.current)||void 0===e||e.cache()}),[a]);const Y=(0,k.jsx)(x.Stage,{width:q,height:q,className:(0,j.default)(w.photoContainer),ref:F,onClick:()=>{null==a&&null==O&&R(0)},children:(0,k.jsxs)(x.Layer,{children:[(0,k.jsx)(x.Rect,{width:q,height:q,fill:(0,d.default)(I.flat()[L],200)}),null==a?(0,k.jsx)(x.Text,{x:80,y:80,width:W.width,height:W.height,offset:{x:W.width/2,y:W.height/2},lineHeight:1.14,align:"center",verticalAlign:"middle",ellipsis:!0,text:E.fbt._("CHOOSE AN EMOJI OR STICKER",null,{hk:"2wW3mU"}).toString(),fontSize:14,fontFamily:'"SF Pro Text", "SF Pro Icons", system, -apple-system, system-ui, "system-ui", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", "Kohinoor Devanagari", sans-serif',fill:(0,d.default)("cool-gray-alpha",50)}):(0,k.jsx)(x.Image,{ref:B,width:V,height:V,offset:{x:52,y:52},x:80,y:80,image:a,filters:P===T.EMOJI&&U.current?[u.default]:[]})]})});Object.values(H).forEach((e=>{"number"==typeof e&&(G.current[e]=()=>{O===e&&R(null)})}));const K=function(){var e=(0,r.default)((function*(e,t){try{if(null!=e){const t=yield(0,v.createImageFromEmoji)(e);t&&(M(t),U.current=t.naturalWidth<=64&&t.naturalHeight<=64,A(T.EMOJI))}else{if(null==t)throw new Error("Neither emoji nor sticker is provided in handleEmojiStickerSelect()");{const e=yield(0,v.createImageFromSticker)(t);M(e),A(T.STICKER)}}}catch(e){i.ToastManager.open((0,k.jsx)(g.Toast,{msg:E.fbt._("Failed to add image",null,{hk:"4BUTOp"}),id:(0,g.genId)()}))}}));return function(){return e.apply(this,arguments)}}(),X=(0,k.jsx)("div",{className:(0,j.default)(w.btn),children:(0,k.jsx)(h.Round,{large:!0,onClick:()=>{if(null==a)i.ToastManager.open((0,k.jsx)(g.Toast,{msg:E.fbt._("Choose an emoji or sticker to continue",null,{hk:"4i6xej"}),id:"ChooseAnEmojiOrStickerToContinueToast"}),i.ToastPosition.CENTER);else{var t,n,r,l;const a=null!==(t=null===(n=F.current)||void 0===n?void 0:n.toDataURL({mimeType:"image/jpeg",pixelRatio:b.PROF_PIC_THUMB_SIDE/q,quality:0,width:q,height:q}))&&void 0!==t?t:"",i=null!==(r=null===(l=F.current)||void 0===l?void 0:l.toDataURL({mimeType:"image/jpeg",pixelRatio:2*b.PROF_PIC_MIN_SIDE/q,quality:1,width:q,height:q}))&&void 0!==r?r:"";e.onFinished(a,i,(0,o.default)(P,"selectedImageType"))}},theme:null==a?h.RoundTheme.Disabled:void 0,label:E.fbt._("Submit picture",null,{hk:"Kgb4U"}),children:(0,k.jsx)(m.default,{name:"checkmark-large"})})},"btn-submit");return(0,k.jsxs)(C.default,{theme:"products",children:[(0,k.jsx)(_.DrawerHeader,{title:E.fbt._("Emoji and sticker",null,{hk:"TUqHK"}),type:"multiMediaGallery",onCancel:e.onCancel}),(0,k.jsxs)(y.default,{overflow:"hidden",children:[(0,k.jsxs)(c.FlexColumn,{className:(0,j.default)(w.container),align:"center",justify:"center",children:[(0,k.jsx)(f.default,{grow:1,xstyle:w.body,children:(0,k.jsxs)(c.FlexColumn,{align:"center",children:[(0,k.jsx)(f.default,{children:Y}),(0,k.jsx)(f.default,{children:(0,k.jsx)(p.default,{refs:z.current,selectedIndex:O,onSelect:t=>{var n;t!==O&&(R(t),n=t===H.EMOJI?T.EMOJI:T.STICKER,null!=e.sendEmojiStickerPanelOpenLoggingEvent&&e.sendEmojiStickerPanelOpenLoggingEvent(n))},tabConfigs:[{svgName:"media-editor-emoji",iconStyle:D.emojiIcon},{svgName:"media-editor-sticker",iconStyle:D.stickerIcon}],popupAtLuanch:!0})}),(0,k.jsx)(f.default,{children:(0,k.jsx)(l.default,{className:(0,j.default)(w.colorPanel),colors:I,selectedIndex:L,onSelect:e=>{N(e)}})})]})}),(0,k.jsx)(f.default,{grow:0,xstyle:w.footer,children:X})]}),O===H.EMOJI&&(0,k.jsx)(s.EmojiPanelPopup,{anchor:(0,o.default)(null===(t=z.current[H.EMOJI])||void 0===t?void 0:t.current,"iconTabRefs.current[tabsIndex.EMOJI]?.current"),onSelect:K,onClose:()=>G.current[H.EMOJI]()}),O===H.STICKER&&(0,k.jsx)(s.StickerPanelPopup,{anchor:(0,o.default)(null===(n=z.current[H.STICKER])||void 0===n?void 0:n.current,"iconTabRefs.current[tabsIndex.STICKER]?.current"),onSelect:e=>K(null,e),onClose:()=>G.current[H.STICKER]()})]})]},"attach-edit-group-profile-modal")},t.ImageType=void 0;var r=a(n(348926)),o=a(n(145095)),i=n(694816),l=a(n(891966)),s=n(964724),d=a(n(743691)),u=a(n(154435)),c=n(429623),f=a(n(748846)),p=a(n(369385)),h=n(482857),m=a(n(23217)),g=n(950452),v=n(492202),x=n(199282),C=a(n(60453)),y=a(n(69637)),_=n(994790),b=n(558),E=n(548360),S=n(667294),j=a(n(156720)),k=n(785893);const T=n(76672).Mirrored(["EMOJI","STICKER"]);t.ImageType=T;const w={container:{backgroundColor:"p1zdgkh6",position:"g0rxnol2",width:"ln8gz9je",height:"ppled2lx"},body:{flexGrow:"ggj6brxn"},footer:{display:"p357zi0d",position:"g0rxnol2",width:"ln8gz9je",height:"db4qzak4",zIndex:"b9fczbqn",alignItems:"gpmkiw74",justifyContent:"ac2vgrno",backgroundColor:"rrq4r3yd"},btn:{transform:"m7vo9q63"},photoContainer:{marginTop:"lxsc1wef",marginEnd:"poiibwu2",marginBottom:"iyjcf3gk",marginStart:"hqw9ulo5",borderTopStartRadius:"g9p5wyxn",borderTopEndRadius:"i0tg5vk9",borderBottomEndRadius:"aoogvgrq",borderBottomStartRadius:"o2zu3hjb",overflowX:"gfz4du6o",overflowY:"r7fjleex",isolation:"mge1ni6g"},colorPanel:{marginTop:"etgvethi"}},D={emojiIcon:{width:"hgg0ttet",height:"qgpfrw6h"},stickerIcon:{width:"oimozejp",height:"f2o2jtpu"}},I=[["purple","sky-blue","green","yellow","orange","pink"],["cool-gray","cobalt","teal","red","sand"]]},964724:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.EmojiPanelPopup=function(e){const t=(0,f.jsx)(i.EmojiPanel,{onEmoji:t=>{e.onSelect(t)},onFocusNext:e.onClose,onFocusPrev:e.onClose});return(0,f.jsx)(d.UIE,{displayName:"EmojiPicker",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:e.onClose,children:(0,f.jsx)(u.default,{contextMenu:{menu:t,dirY:o.DirY.BOTTOM,type:o.MenuType.EmojiPicker,anchor:e.anchor,dirX:o.DirX.CENTER,offsetY:10}})})},t.StickerPanelPopup=function(e){let t=null;(0,r.isMDBackend)()?c.ServerProps.webServerStickerPanel&&(t=(0,f.jsx)(s.default,{onSticker:t=>{e.onSelect(t)},onFocusNext:e.onClose,onFocusPrev:e.onClose})):t=(0,f.jsx)(l.default,{onSticker:t=>{e.onSelect(t)},onFocusNext:e.onClose,onFocusPrev:e.onClose});return t?(0,f.jsx)(d.UIE,{displayName:"StickerPicker",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:e.onClose,children:(0,f.jsx)(u.default,{contextMenu:{menu:t,dirY:o.DirY.BOTTOM,type:o.MenuType.StickerPicker,anchor:e.anchor,dirX:o.DirX.CENTER,offsetY:10}})}):void 0};var r=n(88555),o=n(160811),i=n(930424),l=a(n(764894)),s=a(n(607380)),d=n(718644),u=a(n(624717)),c=n(964551),f=n(785893)},743691:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const n="sand"===e?(0,r.default)(o.get(`${e}-${t}`),"sandColorsMap.get(`${color}-${depth}`)"):(e=>getComputedStyle((0,r.default)(document.body,"document.body")).getPropertyValue(e))(`--wds-${e}-${t}`);if(""===n)throw new Error(`Get color failed (color=${e} depth=${t}). Please check whether wds color changed or there is a typo in color name.`);return n};var r=a(n(145095));const o=new Map([["sand-200","rgb(234, 224, 214)"],["sand-300","rgb(170, 148, 125)"],["sand-600","rgb(94, 83, 72)"]])},154435:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=[0,-1,0,-1,5,-1,0,-1,0],n=Math.round(Math.sqrt(t.length)),a=.5*n|0,r=e.data,o=e.width,i=e.height,l=new Uint8ClampedArray(r);for(let e=0;e<i;e++)for(let s=0;s<o;s++){const d=s,u=e,c=4*(e*o+s),f=[0,0,0];for(let e=0;e<n;e++)for(let r=0;r<n;r++){const s=u+e-a,c=d+r-a;if(s>=0&&s<i&&c>=0&&c<o){const a=4*(s*o+c),i=t[e*n+r];f[0]+=l[a]*i,f[1]+=l[a+1]*i,f[2]+=l[a+2]*i}}r[c]=f[0],r[c+1]=f[1],r[c+2]=f[2]}}},350025:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.EditImageDrawer=function(e){var t;const{attributionUrl:n,onRetake:a,retryText:T,onFinished:w,cropShape:D}=e,I=(0,b.default)(),M=(0,_.useRef)(),P=(0,_.useRef)(null),A=(0,E.default)((()=>new u.default)),[O,R]=(0,_.useState)(!1),[L,N]=(0,_.useState)({width:500,height:361}),[F]=(0,_.useState)((()=>new s.default(e.img)));(0,S.useListener)(A.current,"change:isInitialized",(()=>{I()}));const B=(e,t)=>{var n;null===(n=M.current)||void 0===n||n.drawCanvas(e,t)},U=O?(0,j.jsx)("div",{className:l.default.btnSend,children:(0,j.jsx)(h.Round,{large:!0,onClick:()=>{var e,t;null===(t=M.current)||void 0===t||t.saveCanvas(),null===(e=P.current)||void 0===e||e.crop().then((e=>{let{thumb:t,full:n}=e;w(t,n),F.cleanUp()}))},label:y.fbt._("Submit image",null,{hk:"2x0Z1K"}),children:(0,j.jsx)(m.default,{name:"checkmark-large"})})},"btn-send"):null;let H;A.current.isInitialized&&(H=(0,j.jsx)(c.WrappedProfileCropTool,{editedMedia:F,stage:A.current.stage,cropOverlay:A.current.cropOverlay,mediaContainer:A.current.mediaContainer,drawCanvas:B,ref:P,cropShape:D||c.CropShapeType.CIRCLE}));const G=(0,j.jsx)(d.default,{className:l.default.mediaElement,editedMedia:F,mediaEditController:A.current,fitType:"cover",ref:M});let z;if(a){let e;switch(T){case k.NONE:e=null;break;case k.RETAKE:e=y.fbt._("Retake",null,{hk:"tGeQz"});break;case k.RESTART:default:e=y.fbt._("Upload",null,{hk:"3FMQvb"})}z=(0,j.jsxs)("button",{className:l.default.retake,onClick:a,children:[(0,j.jsx)("div",{className:l.default.retakeIcon,children:(0,j.jsx)(m.default,{name:"return"})}),e]})}const q=n?(0,j.jsxs)("div",{className:l.default.attribution,children:[(0,j.jsx)(f.ExternalLink,{className:l.default.attributionLink,href:n,children:o.default.hostname(n)}),(0,j.jsxs)("span",{children:[y.fbt._("Image may be subject to copyright.",null,{hk:"XoHv1"}),(0,j.jsx)(f.ExternalLink,{href:(0,C.getTosUrl)(),children:y.fbt._("Terms of Service",null,{hk:"1Lpm6J"})})]})]}):null,W=D===c.CropShapeType.RECT?(0,j.jsx)("div",{className:l.default.hintText,children:y.fbt._("Hint: Use 16:9 ratio images (eg. 1920 x 1020 or its multiples)",null,{hk:"Lt5na"})}):void 0,V=(0,j.jsxs)("div",{className:l.default.footer,children:[(0,j.jsx)(i.default,{transitionName:"btn",children:U}),q,W]}),Y=null!==(t=e.imageSize)&&void 0!==t?t:{width:500,height:361};return(0,j.jsxs)(g.default,{theme:"edit",children:[(0,j.jsx)(x.DrawerHeader,{title:r.default.t(133),type:"offset",onCancel:e.onCancel,focusBackOrCancel:!0,children:z}),(0,j.jsxs)(v.default,{overflow:"hidden",children:[(0,j.jsxs)("div",{className:l.default.mediaBody,children:[H,(0,j.jsx)("div",{className:l.default.containerBackground,children:(0,j.jsx)(i.default,{transitionName:"capture",children:(0,j.jsx)(p.default,{type:"cover",size:Y,onObjectLoad:e=>{null!=e&&e instanceof HTMLElement&&(!L||L.width===e.clientWidth&&L.height===e.clientHeight||N({width:e.clientWidth,height:e.clientHeight}),O||R(!0))},children:G})})})]}),V]})]},"attach-edit-modal")},t.RETRY_OPTIONS=void 0;var r=a(n(568064)),o=a(n(376139)),i=a(n(540436)),l=a(n(663881)),s=a(n(12199)),d=a(n(216144)),u=a(n(147739)),c=n(329958),f=n(912591),p=a(n(311791)),h=n(482857),m=a(n(23217)),g=a(n(60453)),v=a(n(69637)),x=n(994790),C=n(473953),y=n(548360),_=n(667294),b=a(n(859312)),E=a(n(616223)),S=n(587550),j=n(785893);const k={NONE:"none",RETAKE:"retake",RESTART:"restart"};t.RETRY_OPTIONS=k},12199:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(682492)),o=n(565885),i=a(n(376139));class l{constructor(e,t,n,a){this.updateEditData=e=>{this.saveEdits(),this.editData=(0,r.default)({},this.editData,e)},this.updateEditItems=(e,t)=>{this.saveEdits();const n=[];this.editData.items&&this.editData.items.forEach((e=>{e!==t&&n.push(e)})),n.push(e),this.editData.items=n},this.saveEdits=()=>{const e=new l(this.media,this.originalImage,this.editData,this.previous);this.previous=e},this.revertEdit=()=>{this.previous&&(this.editData=this.previous.editData,this.previous=this.previous.previous)},this.saveEditsFromCanvas=e=>{const t=e.toDataURL();this.editedImage||(this.editedImage=new Image),this.editedImage.src=t},this.exportEditedMedia=()=>{if(this.hasEdits()&&this.editedImage){const e=this.editedImage.src;return i.default.dataURLtoFile(e)}return this.media instanceof File?this.media:(0,o.createFile)([this.media],"",{type:this.media.type})},this.hasEdits=()=>!!this.previous&&this.editedImage,this.cleanUp=()=>{window.URL.revokeObjectURL(this.originalImage.src)},this.media=e,t?this.originalImage=t:(this.originalImage=new Image,this.originalImage.src=window.URL.createObjectURL(e)),this.previous=a,this.editData={height:0,width:0,offsetX:0,offsetY:0,rotation:0,scale:1,items:[],baseItem:null},(0,r.default)(this.editData,n)}}t.default=l},216144:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(576557)),o=a(n(311791)),i=n(576304),l=n(729984),s=n(667294),d=a(n(156720)),u=a(n(859312)),c=a(n(955010)),f=n(785893);const p={position:"lhggkp7q",zIndex:"rys9xrs2",display:"qibyn6m3",width:"kr1k453a",height:"lds9pm4u"},h={zIndex:"b9fczbqn",width:"ln8gz9je",height:"ppled2lx"};function m(e,t){const{mediaEditController:n,editedMedia:a,mediaPickerStatsLogger:m,activeMediaId:g}=e,v=(0,s.useRef)(null),x=(0,s.useRef)(null),C=(0,s.useRef)(null),y=(0,s.useRef)(null),[_,b]=(0,s.useState)({height:1,width:1}),[E,S]=(0,s.useState)(null),j=((0,u.default)(),(e,t)=>{if(!v.current)return;const r=v.current;t&&m&&m.logChange(g||-1,t);const o=a.editData,s=(e=>{let t;return E?t=E:(t=new i.Easel.Stage(e),t.enableMouseOver()),n.stage=t,t})(r);e&&(r.width=o.width,r.height=o.height),s.removeAllChildren(),null!=o.baseItem&&s.addChild(o.baseItem),o.items&&s.addChild(...o.items);const d=a.originalImage.naturalWidth,u=a.originalImage.naturalHeight;s.regX=d/2,s.regY=u/2,s.rotation=o.rotation,(0,l.isNonZeroNumber)(o.width)&&(0,l.isNonZeroNumber)(o.height)&&(s.x=o.width/2+o.scale*o.offsetX,s.y=o.height/2+o.scale*o.offsetY),s.scaleX=o.scale,s.scaleY=o.scale,s.update(),b({width:r.width,height:r.height}),S(s)}),k=()=>{const e=a.editData;a.editedImage=null;const t=a.originalImage;if(e.width||e.height||(e.width=t.naturalWidth,e.height=t.naturalHeight),!e.baseItem){const n=new i.Easel.Bitmap(t);e.baseItem=n}j(!0)},T=()=>{j(!0);const e=v.current;e&&a.saveEditsFromCanvas(e)},w=e=>{e&&(e.children.forEach((e=>{e.removeAllEventListeners()})),e.removeAllEventListeners(),e.removeAllChildren(),e.enableMouseOver(0),e.clear())};(0,s.useEffect)((()=>{(()=>{const e=a.originalImage;e.complete?k():e.onload=k})(),y.current=new i.Easel.Stage(C.current),y.current.autoClear=!1,y.current.enableMouseOver(),x.current&&(n.mediaContainer=x.current),n.cropOverlay=y.current}),[]),(0,c.default)((()=>{const e=a.originalImage;e.complete||(e.onload=void 0),T(),w(E),w(y.current)}));const D=(e,t)=>{b({width:e,height:t})};(0,s.useImperativeHandle)(t,(()=>({saveCanvas:T,drawCanvas:j,updateCanvasSize:D})));const I=(0,f.jsx)("canvas",{ref:C,className:(0,d.default)(p)});return(0,f.jsx)("div",{className:e.className,ref:x,children:(0,f.jsxs)(o.default,{type:e.fitType||"scaleDown",size:_,children:[I,(0,f.jsx)(r.default,{ref:v,className:(0,d.default)(h)})]})})}var g=(0,s.forwardRef)(m);t.default=g},147739:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(411290);class r extends a.BaseModel{constructor(){super(...arguments),this.stage=(0,a.prop)(),this.cropOverlay=(0,a.prop)(),this.mediaContainer=(0,a.prop)(),this.isInitialized=(0,a.derived)((function(){return!!this.stage&&!!this.cropOverlay&&!!this.mediaContainer}),["stage","cropOverlay","mediaContainer"])}clearStage(e){e&&(e.children.forEach((e=>{e.removeAllEventListeners()})),e.removeAllEventListeners(),e.removeAllChildren(),e.clear())}}var o=(0,a.defineModel)(r);t.default=o},558:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PROF_PIC_THUMB_SIDE=t.PROF_PIC_MIN_SIDE=t.PROF_PIC_MAX_SIDE=void 0;t.PROF_PIC_MIN_SIDE=192;t.PROF_PIC_MAX_SIDE=640;t.PROF_PIC_THUMB_SIDE=96},329958:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.WrappedProfileCropTool=t.CropShapeType=void 0;var r=a(n(348926)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(n(551428)),i=n(558),l=n(729424),s=a(n(23217)),d=a(n(701784)),u=n(576304),c=n(548360),f=n(667294),p=a(n(156720)),h=n(587550),m=n(785893);function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}const v={position:"lhggkp7q",end:"fz4q5utg",zIndex:"qjp6ryme",width:"a2hqsskl",lineHeight:"fyxtz58m",backgroundColor:"ihvf49ua",borderTopStartRadius:"f4zm7zaq",borderTopEndRadius:"aurtnaek",borderBottomEndRadius:"nsd82api",borderBottomStartRadius:"mhohgsbe",boxShadow:"d1gmyy70"},x={color:"cs9t9or5",cursor:"ajgl1lbb"},C=1.1,y=9/16,_=2.5625,b=n(76672).Mirrored(["CIRCLE","RECT","SQUIRCLE"]);function E(e,t){const{editedMedia:n,cropOverlay:a,drawCanvas:g}=e,E=(0,f.useRef)(0),S=(e,t)=>{const a=n.editData,r=E.current*_,o=(e-a.width/2)*a.scale,i=(e+a.width/2)*a.scale,l=(t+a.height/2)*a.scale,s=(t-a.height/2)*a.scale,d=r/2,u=r/2*y;return{overlapLeft:Math.min(0,-d-o)/a.scale,overlapRight:Math.min(0,i-d)/a.scale,overlapTop:Math.min(0,-u-s)/a.scale,overlapBottom:Math.min(0,l-u)/a.scale,x:o<-d&&i>d,y:s<-u&&l>u}},j=(t,a)=>{const r=n.editData,o=r.offsetX+t/r.scale,i=r.offsetY+a/r.scale,l=e.cropShape===b.RECT?S(o,i):((e,t)=>{const a=n.editData,r=E.current,o=(e-a.width/2)*a.scale,i=(e+a.width/2)*a.scale,l=(t+a.height/2)*a.scale;return{x:o<-r&&i>r,y:(t-a.height/2)*a.scale<-r&&l>r}})(o,i);l.x&&(r.offsetX=o),l.y&&(r.offsetY=i),g()},k=(e,t)=>{const n=e.stageX-t.x,a=e.stageY-t.y;j(n,a),t.x=e.stageX,t.y=e.stageY},T=t=>e.cropShape===b.RECT?(e=>{const t=E.current,a=n.editData,r=Math.max(e,t*_/a.width),o=Math.max(e,r);a.scale=o;const i=S(a.offsetX,a.offsetY);return{scale:a.scale,offsetX:a.offsetX+i.overlapLeft-i.overlapRight,offsetY:a.offsetY+i.overlapTop-i.overlapBottom}})(t):(e=>{const t=E.current,a=n.editData,r=Math.max(2*t/a.width,2*t/a.height),o=Math.max(e,r);if(a.width*e<t||a.height*e<t)return!1;const i=-t/o+a.width/2,l=t/o-a.width/2,s=-t/o+a.height/2,d=t/o-a.height/2;return{scale:o,offsetX:Math.min(Math.max(a.offsetX,l),i),offsetY:Math.min(Math.max(a.offsetY,d),s)}})(t),w=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C;const t=n.editData,a=0!==e?e:C,r=T(t.scale*a);r&&(t.scale=r.scale,t.offsetX=r.offsetX,t.offsetY=r.offsetY,g())},D=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C;const t=n.editData,a=0!==e?e:C,r=T(t.scale/a);r&&(t.scale=r.scale,t.offsetX=r.offsetX,t.offsetY=r.offsetY,g())};(0,h.useListener)(a.canvas,"mousewheel",(e=>{e.deltaY>0?w(1.02):D(1.02)})),(0,f.useEffect)((()=>{n.saveEdits();const t=n.editData,r=a.canvas;let o;o=t.baseItem?t.baseItem.getBounds():{width:0,height:0},r.style.display="block",r.width=o.width,r.height=o.height;const i=new u.Easel.Shape;i.graphics.beginFill("rgba(0, 0, 0, 0.1)"),i.graphics.drawRect(0,0,o.width,o.height),i.regX=o.width/2,i.regY=o.height/2,i.x=o.width/2,i.y=o.height/2,i.on("mousedown",(e=>{const t={x:e.stageX,y:e.stageY},n=i.on("pressmove",k,null,!1,t);i.on("pressup",(()=>{i.off("pressmove",n)}),null,!0)})),i.cursor="move";const l=r.getContext("2d"),s=r.width,d=r.height,c=s/d>500/361?d/361:s/500;E.current=Math.min(361,500)/2*.9*c;const f=E.current;let p;if(l.fillStyle="rgba(0, 0, 0, 0.5)",l.fillRect(0,0,s,d),l.globalCompositeOperation="destination-out",l.beginPath(),e.cropShape===b.CIRCLE)l.arc(s/2,d/2,f,0,2*Math.PI,!0);else if(e.cropShape===b.RECT){const e=f*_,t=f*_*y;l.fillRect(s/2-e/2,d/2-t/2,e,t)}else if(e.cropShape===b.SQUIRCLE){p=new Path2D("M90 0C0 0 0 0 0 90s0 90 90 90 90 0 90-90 0-90-90-90Z"),l.translate(s/2-f,d/2-f);const e=2*c*.9;l.scale(e,e)}l.fillStyle="#ffffff",p?l.fill(p):l.fill(),a.addChild(i),a.update()}),[]);const I=function(){var e=(0,r.default)((function*(){var e;const t=n.editData,a=null===(e=n.editedImage)||void 0===e?void 0:e.src,r=E.current;if(!a)throw new Error("empty image");const l=2*r;let s=l;l>i.PROF_PIC_MAX_SIDE?s=i.PROF_PIC_MAX_SIDE:l<i.PROF_PIC_MIN_SIDE&&(s=i.PROF_PIC_MIN_SIDE);const d=r*_,u=r*_*y,c=yield o.crop(a,t.width/2-d/2,t.height/2-u/2,d,u,s,s*y,o.DATA_URL|o.CANVAS),f=c.images.dataUrl;return{thumb:c.images.dataUrl,full:f}}));return function(){return e.apply(this,arguments)}}(),M=function(){var e=(0,r.default)((function*(){var e;const t=n.editData,a=null===(e=n.editedImage)||void 0===e?void 0:e.src,r=E.current;if(!a)throw new Error("empty image");const l=2*r;let s=l;l>i.PROF_PIC_MAX_SIDE?s=i.PROF_PIC_MAX_SIDE:l<i.PROF_PIC_MIN_SIDE&&(s=i.PROF_PIC_MIN_SIDE);const d=yield o.crop(a,(t.width-l)/2,(t.height-l)/2,l,l,s,s,o.DATA_URL|o.CANVAS),u=yield o.crop(d.images.canvas,0,0,i.PROF_PIC_THUMB_SIDE,i.PROF_PIC_THUMB_SIDE),c=d.images.dataUrl;return{thumb:u.images.dataUrl,full:c}}));return function(){return e.apply(this,arguments)}}(),P=()=>e.cropShape===b.RECT?I():M();(0,f.useImperativeHandle)(t,(()=>({crop:P})));const A=(0,f.useRef)(null);return(0,m.jsxs)("div",{className:(0,p.default)(v),children:[(0,m.jsx)(l.HotKeys,{handlers:{pageup:()=>w(),pagedown:()=>D(),down:()=>j(0,-10),up:()=>j(0,10),left:()=>j(10,0),right:()=>j(-10,0)},onFocus:e=>{if(!A.current)return;e?e.target:document.activeElement;A.current},ref:A,"aria-label":c.fbt._("Photo editor canvas widget: arrow keys move crop window, Page Up and Page Down enlarge or shrink the crop area",null,{hk:"1iV0bf"}),tabIndex:0}),(0,m.jsx)(d.default,{className:(0,p.default)(x),onClick:()=>w(),"aria-label":c.fbt._("Zoom in or shrink area of photo to be cropped",null,{hk:"20MetM"}),testid:"crop-tool-zoom-in",children:(0,m.jsx)(s.default,{name:"plus"})}),(0,m.jsx)(d.default,{className:(0,p.default)(x),onClick:()=>D(),"aria-label":c.fbt._("Zoom out or enlarge area of photo to be cropped",null,{hk:"445oiP"}),testid:"crop-tool-zoom-out",children:(0,m.jsx)(s.default,{name:"minus"})})]})}t.CropShapeType=b;const S=(0,f.forwardRef)(E);t.WrappedProfileCropTool=S},576557:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(667294),r=n(785893);function o(e,t){return(0,r.jsx)("canvas",{className:e.className,ref:t})}function i(e,t){return e.className===t.className}var l=(0,a.memo)((0,a.forwardRef)(o),i);t.default=l},340241:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.jsx)(o.Modal,{type:e.theme,children:(0,i.jsx)(r.EditImageDrawer,{onCancel:()=>{a.ModalManager.close()},onFinished:(t,n)=>{e.onFinished(t,n),a.ModalManager.close()},onRetake:e.onRetake,retryText:r.RETRY_OPTIONS.RESTART,img:e.img,cropShape:e.cropShape||void 0})})};var a=n(914597),r=n(350025),o=(n(329958),n(857224)),i=n(785893)},656318:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const[t,n]=(0,h.useState)(e.initialDuration),[a,C]=(0,g.default)(l.NUX.EPHEMERAL),y=e=>n(parseInt(e.currentTarget.value,10));let _;_=a?(0,v.jsx)(d.default,{fromMe:!0}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(f.TextParagraph,{xstyle:x.explanation,children:p.fbt._("All new messages in this chat will disappear after the selected duration.",null,{hk:"4lToiN"})}),(0,u.getEphemeralityDurations)().map((e=>{let{value:n,label:a}=e;return(0,v.jsx)("div",{className:(0,m.default)(x.option),children:(0,v.jsxs)("label",{className:(0,m.default)(x.label),children:[(0,v.jsx)("input",{type:"radio",className:(0,m.default)(x.input),value:String(n),checked:n===t,onChange:y}),a]})},`option-${n}`)}))]});return(0,v.jsx)(s.default,{title:a?void 0:p.fbt._("Disappearing messages",null,{hk:"384ocn"}),onOK:a?()=>{C()}:()=>{e.onDurationSelected(t),i.ModalManager.close()},onCancel:a?()=>{(0,c.openExternalLink)((0,r.getEphemeralFaqUrl)())}:()=>{i.ModalManager.close()},cancelText:a?o.default.t(394):p.fbt._("Cancel",null,{hk:"H0gNq"}),children:_})};var r=n(221310),o=a(n(568064)),i=n(914597),l=n(871579),s=a(n(452665)),d=a(n(670263)),u=n(751319),c=n(912591),f=n(113923),p=n(548360),h=n(667294),m=a(n(156720)),g=a(n(259732)),v=n(785893);const x={option:{display:"p357zi0d",alignItems:"gndfcl4n",height:"sai7fuui"},label:{display:"f804f6gw",cursor:"ajgl1lbb"},input:{marginEnd:"claouzo6",verticalAlign:"neme6l2y"},explanation:{marginBottom:"t4zgqcuo"}}},490810:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{msgs:t,onForward:n,onClose:a}=e;const C=s.default.t(316,{_plural:t.length||1}),y=t[0],_=y.chat;let b;b="video"!==y.type&&"image"!==y.type?"message":y.type;const E=t.some((e=>e.isFrequentlyForwarded)),S=t.some((e=>e.isForwarded)),j=t.filter((e=>!e.isFrequentlyForwarded&&e.getForwardingScoreWhenForwarded()===i.default.FREQUENTLY_FORWARDED_SENTINEL));let k;j.length&&(k=(0,x.jsx)(p.default,{frequentlyForwardedCount:j.length,totalCount:t.length}));const T=E?g.ServerProps.frequentlyForwardedMax:g.ServerProps.multicastLimitGlobal,w=t.some((e=>e.isMedia&&Boolean(e.caption)||e.type===u.MSG_TYPE.DOCUMENT&&e.isCaptionByUser));return(0,x.jsx)(h.SelectModal,{onConfirm:e=>{let i=0;for(;i<t.length;i++){const e=t[i];e.isPSA&&(0,c.logChatPSAForward)(e)}m.ChatCollection.forwardMessagesToChats(t,e).catch((0,r.filteredCatch)(l.default,(e=>{(e=>{const t=e.map((e=>{let{chat:t,reason:n}=e;return(0,x.jsxs)("p",{children:[t.formattedTitle," : ",n]},t.id.toString())}));d.ModalManager.open((0,x.jsx)(f.default,{onOK:()=>d.ModalManager.close(),okText:v.fbt._("OK",null,{hk:"2KEeHb"}),children:t}),void 0)})(e.reasons)}))),a(),n&&n(t),o.Cmd.openChatFromUnread(e[0])},maxItems:T,excludeChat:_,excludeBroadcast:!0,msgType:b,title:C,listType:h.ListType.CHAT_SELECT_MODAL,customHeader:k,hasFrequentlyForwarded:E,hasForwarded:S,ephemeralIcon:"chat-list",showMediaCaption:w,msgs:t})};var r=n(450796),o=n(781572),i=a(n(364369)),l=a(n(428233)),s=a(n(568064)),d=n(914597),u=n(115461),c=n(587988),f=a(n(452665)),p=a(n(667247)),h=n(756728),m=n(669951),g=n(964551),v=n(548360),x=n(785893)},667247:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{frequentlyForwardedCount:t,totalCount:n}=e;const a=(0,c.jsxs)("span",{className:(0,u.default)(f),children:[1===t&&1===n?d.fbt._("This message will be marked as forwarded many times.",null,{hk:"37i1m9"}):d.fbt._("One or more messages will be marked as forwarded many times.",null,{hk:"1Z8wFQ"})," ",(0,c.jsx)(l.ExternalLink,{href:(0,r.getFrequentlyForwardedFaqUrl)(),children:o.default.t(394)})]});return(0,c.jsxs)("div",{className:(0,u.default)(p),children:[(0,c.jsx)("div",{className:(0,u.default)(h),children:(0,c.jsx)(s.default,{width:24,height:24,name:"highly-forwarded"})}),(0,c.jsx)(i.default,{theme:"plain",primary:a,idle:!0})]})};var r=n(221310),o=a(n(568064)),i=a(n(744356)),l=n(912591),s=a(n(23217)),d=n(548360),u=a(n(156720)),c=n(785893);const f={lineHeight:"d53pemmv"},p={display:"p357zi0d",backgroundColor:"ihvf49ua",borderBottom:"daad4uqs"},h={display:"p357zi0d",alignItems:"gndfcl4n",marginEnd:"t9wpllip",marginStart:"hqw9ulo5",color:"tl2vja3b"}},652468:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(985449),o=n(912591),i=n(429623),l=a(n(748846)),s=n(33210),d=n(111054),u=a(n(23217)),c=n(113923),f=a(n(60453)),p=a(n(69637)),h=n(994790),m=a(n(833308)),g=n(548360),v=n(667294),x=(a(n(156720)),n(785893));const C={drawerSection:{paddingTop:"msavwer2",paddingBottom:"slgfab0f"},description:{paddingTop:"msavwer2",paddingEnd:"bcymb0na",paddingBottom:"slgfab0f",paddingStart:"e8k79tju",lineHeight:"a4ywakfo"}};function y(e,t){let{settings:n,onClose:a}=e;return(0,x.jsxs)(f.default,{ref:t,children:[(0,x.jsx)(h.DrawerHeader,{title:g.fbt._("Request Account Info",null,{hk:"2VisVV"}),onBack:a,type:h.DRAWER_HEADER_TYPE.LARGE}),(0,x.jsx)(p.default,{children:(0,x.jsxs)(m.default,{animation:!1,xstyle:C.drawerSection,children:[(0,x.jsx)(i.FlexRow,{align:"center",justify:"center",children:(0,x.jsx)(i.FlexRow,{align:"center",justify:"center",children:(0,x.jsx)(l.default,{children:(0,x.jsx)(u.default,{name:"document"})})})}),(0,x.jsxs)(c.TextDiv,{color:"secondary",size:"14",xstyle:C.description,children:[g.fbt._("Create a report of your WhatsApp account information and settings, which you can access or port to another app. This report does not include your messages.",null,{hk:"13xpse"})," ",(0,x.jsx)(o.ExternalLink,{href:(0,s.requestAccountInfoUrl)(),children:g.fbt._("Learn More",null,{hk:"bPizH"})})]}),(0,x.jsx)(v.Suspense,{fallback:(0,x.jsx)(i.FlexRow,{align:"center",justify:"center",children:(0,x.jsx)(i.FlexRow,{align:"center",justify:"center",children:(0,x.jsx)(l.default,{children:(0,x.jsx)(d.Spinner,{size:50,stroke:4})})})}),children:(0,x.jsx)(r.RequestAccountInfoSettingsDrawerBodyContent,{})})]})})]})}var _=(0,v.forwardRef)(y);t.default=_},13145:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.RequestAccountInfoSettingsDrawerAvailable=function(e){let{gdprStatus:{creation:t,documentMessage:n,expiration:a},onDeleteSuccess:x}=e;const C=(0,r.maybeNumberOrThrowIfTooLarge)(n.fileLength),[y,_]=(0,s.useGdprDownload)(),[b,E]=(0,l.useGdprDelete)();return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:(0,m.default)(v.settingsShare),children:(0,g.jsxs)(f.default,{color:"dark",disabled:y,icon:(0,g.jsx)(u.default,{name:"download"}),onClick:()=>_(n),children:[(0,g.jsx)(c.TextDiv,{children:p.fbt._("Download report",null,{hk:"24wJjF"})}),(0,g.jsx)(c.TextDiv,{theme:"muted",children:null!=C?p.fbt._("{availability_date} · {file_size}",[p.fbt._param("availability_date",h.default.unix(t).format("MMMM D, YYYY")),p.fbt._param("file_size",o.default.filesize(C))],{hk:"24AFfI"}):p.fbt._("{availability_date}",[p.fbt._param("availability_date",h.default.unix(t).format("MMMM D, YYYY"))],{hk:"1flGQw"})})]})}),(0,g.jsx)("div",{className:(0,m.default)(v.delete),children:(0,g.jsx)(f.default,{color:"dark",disabled:b,icon:(0,g.jsx)(u.default,{name:"delete"}),onClick:()=>{i.ModalManager.open((0,g.jsx)(d.RequestAccountInfoSettingsDrawerDeleteConfirmPopup,{okDisabled:b,okSpinner:b,onCancel:()=>i.ModalManager.close(),onOK:()=>E().then((e=>{e.success&&(i.ModalManager.close(),x())}))}))},children:(0,g.jsx)(c.TextDiv,{children:p.fbt._("Delete and request new report",null,{hk:"4g8Hdm"})})})}),(0,g.jsx)(c.TextDiv,{theme:"muted",xstyle:v.availability,children:p.fbt._("Your report is available to download until {availability_date}",[p.fbt._param("availability_date",h.default.unix(a).format("MMMM D, YYYY"))],{hk:"4prRdU"})})]})};var r=n(608243),o=a(n(568064)),i=n(914597),l=n(353118),s=n(681925),d=n(439394),u=a(n(23217)),c=n(113923),f=a(n(464738)),p=n(548360),h=a(n(730381)),m=(n(667294),a(n(156720))),g=n(785893);const v={availability:{marginTop:"nylzjxre",marginStart:"r6x3u63k",marginEnd:"lfum0007"},delete:{borderBottom:"n8n2xqzm"},settingsShare:{borderTop:"dl47i6rc",borderBottom:"n8n2xqzm"}}},985449:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RequestAccountInfoSettingsDrawerBodyContent=function(){const[e,t]=(0,a.useGdprStatus)();switch(null==e?void 0:e.type){case"GdprAvailableStatusResponse":return(0,l.jsx)(r.RequestAccountInfoSettingsDrawerAvailable,{gdprStatus:e,onDeleteSuccess:t});case"GdprPendingStatusResponse":return(0,l.jsx)(i.RequestAccountInfoSettingsDrawerPending,{gdprStatus:e});default:return(0,l.jsx)(o.RequestAccountInfoSettingsDrawerInitial,{onRequestSuccess:t})}};var a=n(541002),r=n(13145),o=n(779587),i=n(354181),l=n(785893)},439394:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.RequestAccountInfoSettingsDrawerDeleteConfirmPopup=function(e){let{okDisabled:t,okSpinner:n,onCancel:a,onOK:l}=e;return(0,i.jsx)(r.default,{okDisabled:t,okSpinner:n,okText:o.fbt._("Delete",null,{hk:"S1p2c"}),onCancel:a,onOK:l,children:o.fbt._("Delete report? Deleting the report will not delete any data from your account.",null,{hk:"1w4a4h"})})};var r=a(n(452665)),o=n(548360),i=n(785893)},779587:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.RequestAccountInfoSettingsDrawerInitial=function(e){let{onRequestSuccess:t}=e;const[n,a]=(0,r.useGdprRequest)();return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(l.default,{className:(0,d.default)(c),color:"dark",disabled:n,icon:(0,u.jsx)(i.default,{name:"settings-document"}),onClick:()=>{a().then((e=>{e.success&&t()}))},children:s.fbt._("Request Report",null,{hk:"2HyjPn"})}),(0,u.jsx)(o.RequestAccountInfoSettingsFooterNotice,{})]})};var r=n(962553),o=n(839264),i=a(n(23217)),l=a(n(464738)),s=n(548360),d=(n(667294),a(n(156720))),u=n(785893);const c={borderTop:"dl47i6rc",borderBottom:"n8n2xqzm"}},354181:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.RequestAccountInfoSettingsDrawerPending=function(e){let{gdprStatus:{timestamp:t}}=e;const n=r.Clock.daysDelta(r.Clock.globalUnixTime(),t);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(s.default,{color:"dark",className:(0,c.default)(p),icon:(0,f.jsx)(i.default,{name:"business-hours"}),onClick:()=>{},children:[(0,f.jsx)(l.TextDiv,{children:d.fbt._("Request sent",null,{hk:"3HaEMW"})}),(0,f.jsx)(l.TextDiv,{theme:"muted",children:d.fbt._("Ready by {availability_date}",[d.fbt._param("availability_date",u.default.unix(t).format("MMMM D, YYYY"))],{hk:"3zr2Aw"})})]}),(0,f.jsx)(o.RequestAccountInfoSettingsFooterNotice,{daysDelta:n})]})};var r=n(40234),o=n(839264),i=a(n(23217)),l=n(113923),s=a(n(464738)),d=n(548360),u=a(n(730381)),c=(n(667294),a(n(156720))),f=n(785893);const p={cursor:"bx7g2weo",borderTop:"dl47i6rc",borderBottom:"n8n2xqzm"}},839264:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.RequestAccountInfoSettingsFooterNotice=function(e){let{daysDelta:t=3}=e;return(0,l.jsxs)("div",{className:(0,i.default)(s.footer),children:[(0,l.jsx)(r.TextDiv,{theme:"muted",xstyle:s.availability,children:o.fbt._({"*":"Your report will be ready in about {number} days. You'll have a few weeks to download your report after it's available.",_1:"Your report will be ready in about 1 day. You'll have a few weeks to download your report after it's available."},[o.fbt._plural(t,"number",t)],{hk:"124kzp"})}),(0,l.jsx)(r.TextDiv,{theme:"muted",children:o.fbt._("Your request will be canceled if you make changes to your account such as changing your number or deleting your account.",null,{hk:"2OLjoV"})})]})};var r=n(113923),o=n(548360),i=a(n(156720)),l=n(785893);const s={availability:{marginBottom:"or9x5nie"},footer:{paddingTop:"msavwer2",paddingStart:"e8k79tju",paddingEnd:"bcymb0na"}}},561703:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(389385),o=n(450796),i=n(413959),l=a(n(747259)),s=n(492574),d=n(88555),u=n(942085),c=n(795720),f=a(n(568064)),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=B(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(n(435232)),h=n(914597),m=n(56080),g=n(694816),v=a(n(401686)),x=a(n(744356)),C=n(552596),y=n(288984),_=n(965417),b=n(685600),E=a(n(23217)),S=n(950452),j=n(755800),k=n(611234),T=a(n(426609)),w=a(n(60453)),D=a(n(69637)),I=a(n(464738)),M=n(994790),P=a(n(651628)),A=n(548360),O=n(667294),R=a(n(156720)),L=n(735461),N=a(n(803409)),F=n(785893);function B(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(B=function(e){return e?n:t})(e)}const U={wordWrap:"b6f1x6w7",whiteSpace:"hmy10g0s"},H={color:"e1vllz7m"},G={marginTop:"ignnouf6",marginEnd:"poiibwu2",marginBottom:"du8bjn1j",marginStart:"dl2ettod",fontSize:"f8jlpxt4",lineHeight:"jgi8eev7"},z={color:"cs9t9or5"},q="group-invite-link-anchor",W=0,V=1,Y=2;function K(e){let t,{state:n,chat:a,groupMetadata:r,onRevokeGroupInviteClick:o,onSendLinkButtonClick:i}=e;if(n===W)t=(0,F.jsx)(b.LoadingWithText,{text:f.default.t(332)});else if(n===V)t=(0,F.jsx)(b.LoadingWithText,{text:f.default.t(340,{groupName:a.contact.name})});else{const e=r.groupInviteLink;let n=null;document.queryCommandSupported("copy")&&(n=(0,F.jsx)(T.default,{elementId:q}));const l=r.groupType===c.GroupType.COMMUNITY,s=(0,F.jsx)(y.DetailImage,{id:a.id,size:82,quality:y.DetailImageQuality.High,shape:l?y.DetailImageShape.Squircle:y.DetailImageShape.Circle}),d=(0,F.jsx)("span",{className:(0,R.default)(U),children:(0,F.jsx)(C.SelectableLink,{id:q,href:e,selectable:!0,children:(0,F.jsx)("span",{className:(0,R.default)(H),children:e})})}),u=l?A.fbt._("Anyone with WhatsApp can follow this link to join this community. Only share it with people you trust.",null,{hk:"1uzspN"}):A.fbt._("Anyone with WhatsApp can follow this link to join this group. Only share it with people you trust.",null,{hk:"2oXmVg"});t=(0,F.jsxs)(D.default,{children:[(0,F.jsx)(x.default,{image:s,primary:(0,F.jsx)(_.EmojiText,{text:a.contact.name,direction:"auto"}),theme:"identity",secondary:d}),(0,F.jsx)("div",{className:(0,R.default)(G),children:u}),(0,F.jsx)(P.default,{onClick:i}),n,(0,F.jsx)(I.default,{testid:"li-revoke-link",icon:(0,F.jsx)(E.default,{name:"revoke",className:(0,R.default)(z)}),onClick:o,children:A.fbt._("Reset link",null,{hk:"37cdK4"})})]})}return t}function X(e,t){const{onBack:n,chat:a,useLargeHeader:x}=e,[C,y]=(0,O.useState)(W),_=(0,N.default)(),b=(0,L.useModelValues)(e.groupMetadata,["inviteCode","groupInviteLink","groupType"]),E=e=>{switch(e){case 401:return f.default.t(337);case 403:return A.fbt._("You can't view this group's invite link because you're no longer a participant.",null,{hk:"4fEfyY"});case 404:return A.fbt._("You can't view this group's invite link because this group has ended.",null,{hk:"2fhpj0"});case 436:return A.fbt._("Invite via link is temporarily unavailable for this group.",null,{hk:"11ALNM"});default:return f.default.t(338)}};(0,O.useEffect)((()=>{(0,l.default)((0,u.queryGroupInviteCode)(b),_).then((()=>{y(Y)})).catch((0,o.filteredCatch)(s.ServerStatusCodeError,(e=>{(e=>{const t=E(e);n(),436===e&&((0,d.isMDBackend)()&&(0,m.queryAndUpdateGroupMetadataById)(a.id),(0,j.openGrowthLockedModal)(!0)),g.ToastManager.open((0,F.jsx)(S.Toast,{msg:t,id:(0,S.genId)()}))})(e.statusCode)}))).catch((0,r.catchAbort)((()=>{})))}),[]);const T=()=>{y(V);const e=(0,u.revokeGroupInvite)(b);(0,i.delayMs)(500).then((()=>e)).then((()=>{g.ToastManager.open((0,F.jsx)(S.Toast,{msg:A.fbt._("The previous invite link is now reset and a new invite link has been created.",null,{hk:"2RPI3K"}),id:(0,S.genId)()})),y(Y)})).catch((0,o.filteredCatch)(s.ServerStatusCodeError,(e=>{(e=>{const t=E(e);n(),g.ToastManager.open((0,F.jsx)(S.Toast,{msg:t,id:(0,S.genId)()}))})(e.statusCode)}))).catch((0,o.filteredCatch)(p.Unmount,(()=>{})))},D=b.groupType===c.GroupType.COMMUNITY?A.fbt._("Invite to community via link",null,{hk:"1osKQp"}):A.fbt._("Invite to group via link",null,{hk:"3vDtFL"});return(0,F.jsxs)(w.default,{ref:t,children:[(0,F.jsx)(M.DrawerHeader,{title:D,onBack:e.onBack,rtlFixIfOnDarwin:!0,type:!0===x?M.DRAWER_HEADER_TYPE.LARGE:M.DRAWER_HEADER_TYPE.SMALL}),(0,F.jsx)(K,{state:C,chat:a,groupMetadata:b,onRevokeGroupInviteClick:()=>{h.ModalManager.open((0,F.jsx)(v.default,{chat:a,onConfirm:T}),{transition:"modal-flow"})},onSendLinkButtonClick:()=>{h.ModalManager.open((0,F.jsx)(k.SendGroupInviteFlowLoadable,{chat:a}),{transition:"modal-flow"})}})]})}var Q=(0,O.forwardRef)(X);t.default=Q},401686:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onConfirm:t,chat:n}=e;return(0,d.jsx)(i.default,{title:l.fbt._("Reset link",null,{hk:"37cdK4"}),onOK:()=>{t(),r.ModalManager.close()},okText:l.fbt._("Reset link",null,{hk:"37cdK4"}),onCancel:()=>{r.ModalManager.close()},cancelText:l.fbt._("Cancel",null,{hk:"H0gNq"}),children:(0,d.jsx)("div",{className:(0,s.default)(u,o.uiPadding.top4,o.uiPadding.bottom5,o.uiPadding.horiz0),children:l.fbt._('Are you sure you want to reset the invite link for "{community}"? If you reset the link, no one will be able to use it to join this community.',[l.fbt._param("community",n.contact.name)],{hk:"3bVdQP"})})})};var r=n(914597),o=n(128298),i=a(n(452665)),l=n(548360),s=a(n(156720)),d=n(785893);const u={display:"f804f6gw",fontSize:"bze30y65",lineHeight:"r5qsrrlp",color:"tviruh8d"}},721024:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,Q.useModelValues)(e.msg,["id","star","type","isGif","isViewOnce","labels","numTimesForwarded","isFrequentlyForwarded","chat","agentId","kicSender","kicTimestampMs","isKept"]),n=(0,$.default)(),a=(0,J.default)(),r=(0,K.default)((()=>new f.default.UiAction({uiActionType:f.default.UI_ACTION_TYPE.MSG_INFO_OPEN,uiActionPreloaded:!0}))),h=(0,K.default)((()=>new S.default)),v=(0,W.useRef)(null),C=(0,W.useRef)(null),[y,_]=(0,W.useState)(void 0),[b,k]=(0,W.useState)(!1);(0,W.useEffect)((()=>{var e;G.MsgInfoCollection.find(t.id).then((e=>{n.aborted||_(e)})).catch((()=>{k(!0),u.ToastManager.open((0,Z.jsx)(I.Toast,{msg:q.fbt._("Couldn't display message info. Try again later.",null,{hk:"mRFf6"}),id:(0,I.genId)("msg_info_failed")}))}));const a=null===(e=v.current)||void 0===e?void 0:e.getContainer();t.type===d.MSG_TYPE.IMAGE&&a&&(a.scrollTop=a.scrollHeight)}),[]),(0,W.useEffect)((()=>{const e=r.current;if(e){const n=U.default.get(t.chat.id),a=null==n?void 0:n.cachedDeviceSizeBucket;null!=a&&(e.sizeBucket=a),Object.assign(e,(0,c.getGroupCountMetricsFromChatWid)(t.chat.id)),e.markUiActionT(),e.commit(),r.current=void 0}(0,p.logUiActionShadowPrivateStatsTestEvents)(),(0,o.logMessageInfo)(t.agentId)}),[]);const w=(0,F.default)("MD_EXTENSION"),D=()=>{var e;return null===(e=C.current)||void 0===e?void 0:e.getMsgComponentRef()},z=(0,Y.default)();let ne;(0,X.useListener)(null==y?void 0:y.played,["add","remove"],z),(0,X.useListener)(null==y?void 0:y.read,["add","remove"],z),(0,X.useListener)(null==y?void 0:y.delivery,["add","remove"],z),(0,X.useListener)(t,"remove",((e,t)=>{t===H.MsgCollection&&(null==a||a.requestDismiss())})),y||b||(ne=(0,Z.jsx)("div",{className:(0,V.default)(ee.spinner),children:(0,Z.jsx)(T.Spinner,{size:50,stroke:4})}));const ae=(()=>{const e=[],{kicSender:n}=t;if(y&&(0,g.isKeepInChatReadEnabled)()&&t.isKept&&null!=n&&(e.push({kind:"section",type:m.SECTIONS.KEEP_IN_CHAT_HEADER,itemKey:m.SECTIONS.KEEP_IN_CHAT_HEADER,height:50}),e.push({kind:"kept-by-row",itemKey:"kept-by-"+n.user,height:te})),w&&(0,s.isMultiDeviceMessageAttributionEnabled)()&&null!=t.agentId){const n=(0,N.getAgentName)(t.agentId);e.push({kind:"section",type:m.SECTIONS.AGENT_HEADER,itemKey:m.SECTIONS.AGENT_HEADER,height:50}),e.push({kind:"agent-row",agentName:n,itemKey:"agent-"+n.toString(),height:te})}const a=t.type===d.MSG_TYPE.PTT,r=a||t.isViewOnce;if(y&&r){let t=a?m.SECTIONS.PLAYED_HEADER:m.SECTIONS.VIEWED_HEADER;e.push({kind:"section",type:t,itemKey:t,height:50}),e.push(...y.played.map((e=>({participant:e,kind:"contact-row",itemKey:e.id.toString(),height:E.DEFAULT_ITEM_HEIGHT})))),y.playedRemaining>0&&(t=a?m.SECTIONS.PLAYED_FOOTER:m.SECTIONS.VIEWED_FOOTER,e.push({kind:"section",type:t,itemKey:t,height:50}))}return y&&(y.read.length>0||y.playedRemaining>0)&&(e.push({kind:"section",type:r?m.SECTIONS.SEEN_HEADER:m.SECTIONS.READ_HEADER,itemKey:m.SECTIONS.READ_HEADER,height:50}),e.push(...y.read.map((e=>({participant:e,kind:"contact-row",itemKey:e.id.toString(),height:E.DEFAULT_ITEM_HEIGHT})))),y.readRemaining>0&&e.push({kind:"section",type:m.SECTIONS.READ_FOOTER,itemKey:r?m.SECTIONS.SEEN_FOOTER:m.SECTIONS.READ_FOOTER,height:50})),y&&(y.delivery.length>0||y.deliveryRemaining>0)&&(e.push({kind:"section",type:m.SECTIONS.DELIVERED_HEADER,itemKey:m.SECTIONS.DELIVERED_HEADER,height:50}),e.push(...y.delivery.map((e=>({participant:e,kind:"contact-row",itemKey:e.id.toString(),height:E.DEFAULT_ITEM_HEIGHT})))),y.deliveryRemaining>0&&e.push({kind:"section",type:m.SECTIONS.DELIVERED_FOOTER,itemKey:m.SECTIONS.DELIVERED_FOOTER,height:50})),t.numTimesForwarded>0&&!t.isFrequentlyForwarded&&e.push({kind:"section",type:m.SECTIONS.FORWARD_COUNT,itemKey:m.SECTIONS.FORWARD_COUNT,height:60}),e})(),re=ae.length?(0,Z.jsx)(E.FlatList,{flatListController:h.current,direction:"vertical",forceConsistentRenderCount:!1,data:ae,renderItem:e=>(0,Z.jsx)(le,{data:e,msg:t,msgInfo:y})}):null;let oe=null;t.labels&&t.labels.length>0&&(0,s.canDisplayLabel)()&&(oe=(0,Z.jsx)(L.default,{theme:"padding",children:(0,Z.jsx)(x.default,{labels:t.labels})}));return(0,Z.jsxs)(A.default,{theme:"striped",children:[(0,Z.jsx)(R.DrawerHeader,{title:l.default.t(456),type:R.DRAWER_HEADER_TYPE.SMALL,rtlFixIfOnDarwin:!0,onCancel:()=>{null==a||a.requestDismiss()}}),(0,Z.jsx)(j.default,{ref:v,chatPreference:B.default.assertGet("defaultPreference"),children:(0,Z.jsx)(P.Wrapper,{msg:t,ref:C,displayType:i.DISPLAY_TYPE.MSG_INFO,isMsgVisible:function(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e===t.id&&(!!n||D())},position:M.MsgPosition.END,onProductClick:e.onProductClick})}),(0,Z.jsxs)(O.default,{flatListControllers:[h.current],children:[oe,ne,(0,Z.jsx)("div",{className:(0,V.default)(ee.list),children:re})]})]})};var r=a(n(145095)),o=n(75396),i=n(705177),l=a(n(568064)),s=n(408139),d=n(115461),u=n(694816),c=n(500634),f=a(n(471410)),p=n(793249),h=a(n(376231)),m=n(426551),g=n(161509),v=n(529805),x=a(n(777577)),C=a(n(932074)),y=a(n(247834)),_=a(n(362326)),b=a(n(82678)),E=n(747915),S=a(n(630855)),j=a(n(201697)),k=a(n(853145)),T=n(111054),w=a(n(23217)),D=n(113923),I=n(950452),M=n(887931),P=n(617395),A=a(n(60453)),O=a(n(69637)),R=n(994790),L=a(n(833308)),N=n(461126),F=a(n(156313)),B=a(n(366034)),U=a(n(963928)),H=n(559871),G=n(617972),z=n(964551),q=n(548360),W=n(667294),V=a(n(156720)),Y=a(n(859312)),K=a(n(616223)),X=n(587550),Q=n(735461),J=a(n(895402)),$=a(n(803409)),Z=n(785893);const ee={svg:{width:"dh5rsm73",height:"hpdpob1j"},forwardCount:{paddingTop:"i5tg98hk",paddingEnd:"bcymb0na",paddingBottom:"przvwfww",paddingStart:"e8k79tju",backgroundColor:"ihvf49ua",boxShadow:"tio0brup"},statusBlue:{color:"sunvlxxz"},ack:{color:"ajgik1ph"},titleIcon:{display:"l7jjieqr",width:"dh5rsm73",height:"jdwybkuq",color:"s4k44ver",textAlign:"qfejxiq4",verticalAlign:"fewfhwl7"},title:{paddingTop:"gaujl5hk",paddingEnd:"bcymb0na",paddingBottom:"jd93c9cp",paddingStart:"e8k79tju",backgroundColor:"ihvf49ua"},spinner:{display:"p357zi0d",alignItems:"gndfcl4n",justifyContent:"ac2vgrno",minHeight:"h2zl7k75"},list:{paddingTop:"emrlamx0",paddingBottom:"gjfcmax9"}},te=E.DEFAULT_ITEM_HEIGHT+10;function ne(e){let{msg:t}=e;return z.ServerProps.hfmStringChanges?null:(0,Z.jsx)("div",{className:(0,V.default)(ee.forwardCount),children:(0,Z.jsx)(b.default,{msg:t})})}function ae(e){let{participant:t}=e;return(0,Z.jsx)(y.default,{msgInfoParticipant:t,contact:t.contact,theme:"drawer-list"})}function re(e){let{msg:t,agentName:n}=e;return(0,Z.jsx)(C.default,{msg:t,agentName:n,theme:"drawer-list"})}function oe(e){let{msg:t}=e;if(null!=t.kicSender){const e=(0,v.getKicUserContact)(t.kicSender);return(0,Z.jsx)(_.default,{kicTimestampMs:t.kicTimestampMs,contact:e,theme:"drawer-list"})}}function ie(e){let t,n,{section:a,msg:r}=e;switch(a){case m.SECTIONS.PLAYED_HEADER:n=(0,Z.jsx)(w.default,{name:"status-ptt",xstyle:ee.statusBlue,iconXstyle:ee.svg}),t=l.default.t(460);break;case m.SECTIONS.READ_HEADER:n=(0,Z.jsx)(w.default,{name:"status-dblcheck",xstyle:ee.ack,iconXstyle:ee.svg}),t=l.default.t(462);break;case m.SECTIONS.SEEN_HEADER:n=(0,Z.jsx)(w.default,{name:"status-dblcheck",xstyle:ee.ack,iconXstyle:ee.svg}),t=r.isViewOnce?q.fbt._("Seen by",null,{hk:"3MxARC"}):q.fbt._("Seen by",null,{hk:"3vzp0U"});break;case m.SECTIONS.DELIVERED_HEADER:n=(0,Z.jsx)(w.default,{name:"status-dblcheck",iconXstyle:ee.svg}),t=l.default.t(458);break;case m.SECTIONS.VIEWED_HEADER:n=(0,Z.jsx)(w.default,{name:"view-once-viewed",xstyle:ee.statusBlue,iconXstyle:ee.svg}),t=q.fbt._("Opened by",null,{hk:"1BkoM7"});break;case m.SECTIONS.AGENT_HEADER:n=(0,Z.jsx)(w.default,{name:"md-opt-in",iconXstyle:ee.svg}),t=q.fbt._("Sent from",null,{hk:"2AvZI7"});break;case m.SECTIONS.KEEP_IN_CHAT_HEADER:n=(0,Z.jsx)(w.default,{name:"keep-in-chat",iconXstyle:ee.svg}),t=q.fbt._("Kept by",null,{hk:"3vUw1c"});break;default:return __LOG__(4,void 0,new Error)`Invalid SECTION for group message info section header`,null}return n=(0,Z.jsx)("div",{className:(0,V.default)(ee.titleIcon),children:n}),(0,Z.jsx)("div",{"data-testid":"msg-info-title",className:(0,V.default)(ee.title),children:(0,Z.jsx)(k.default,{side:n,ellipsify:!0,children:(0,Z.jsx)(D.TextSpan,{theme:"section-title",children:t})})})}function le(e){let{data:t,msg:n,msgInfo:a}=e;if("contact-row"===t.kind)return(0,Z.jsx)(ae,{participant:t.participant});if("agent-row"===t.kind)return(0,Z.jsx)(re,{msg:n,agentName:t.agentName});if(t.type===m.SECTIONS.FORWARD_COUNT)return(0,Z.jsx)(ne,{msg:n});if("kept-by-row"===t.kind)return(0,Z.jsx)(oe,{msg:n});switch(t.type){case m.SECTIONS.PLAYED_HEADER:case m.SECTIONS.READ_HEADER:case m.SECTIONS.SEEN_HEADER:case m.SECTIONS.DELIVERED_HEADER:case m.SECTIONS.VIEWED_HEADER:case m.SECTIONS.AGENT_HEADER:case m.SECTIONS.KEEP_IN_CHAT_HEADER:return(0,Z.jsx)(ie,{msg:n,section:t.type});default:return(0,Z.jsx)(h.default,{section:t.type,msgInfo:(0,r.default)(a,"msgInfo")})}}},376231:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,s.useModelValues)(e.msgInfo,["playedRemaining","readRemaining","deliveryRemaining"]);let n,a,c;switch(e.section){case o.SECTIONS.PLAYED_FOOTER:case o.SECTIONS.VIEWED_FOOTER:n=t.playedRemaining,a=t.playedRemaining;break;case o.SECTIONS.READ_FOOTER:case o.SECTIONS.SEEN_FOOTER:n=t.readRemaining,a=t.readRemaining;break;case o.SECTIONS.DELIVERED_FOOTER:n=t.deliveryRemaining,a=t.deliveryRemaining;break;default:return __LOG__(4,void 0,new Error)`Invalid SECTION for group message info section footer`,null}if(null==n||0===n)return null;c={count:n,_plural:a};const f=r.default.t(463,c);return(0,d.jsx)("div",{"data-testid":"msg-info-remaining",className:(0,l.default)(u),children:(0,d.jsx)(i.TextSpan,{theme:"muted",children:f})})};var r=a(n(568064)),o=n(426551),i=n(113923),l=a(n(156720)),s=n(735461),d=n(785893);const u={paddingTop:"n1yiu2zv",paddingEnd:"bcymb0na",paddingBottom:"p9a4hubg",paddingStart:"e8k79tju",backgroundColor:"ihvf49ua",boxShadow:"tio0brup"}},426551:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SECTIONS=void 0;const a=n(76672).Mirrored(["DELIVERED_FOOTER","DELIVERED_HEADER","FORWARD_COUNT","PLAYED_FOOTER","PLAYED_HEADER","READ_FOOTER","READ_HEADER","SEEN_FOOTER","SEEN_HEADER","VIEWED_FOOTER","VIEWED_HEADER","AGENT_HEADER","KEEP_IN_CHAT_HEADER"]);t.SECTIONS=a},772696:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onClose:t,gid:n,onSend:a}=e,T=(0,y.useRef)(null),w=(0,y.useRef)(null),[D,I]=(0,y.useState)(C.fbt._("Invitation to join my WhatsApp group",null,{hk:"2WNS77"}).toString()),M=(0,b.jsx)(c.Round,{testid:"group-participants-btn",large:!0,onClick:()=>{(()=>{const e=x.ProfilePicThumbCollection.get(n);return new Promise((t=>{e&&e.img?(0,o.default)(e.img).then((e=>{if(e.ok)return e.blob();t(void 0)})).then((e=>{if(!e)return;const n=new FileReader;n.onloadend=function(){const e=n.result;if(null==e)return void t(void 0);const a=e.toString().split(",")[1];t(a)},n.readAsDataURL(e)})).catch((()=>t(void 0))):t(void 0)}))})().then((e=>{a(D,e)}))},children:(0,b.jsx)(f.default,{name:"send",directional:!0})}),P=(0,b.jsx)(d.DetailImage,{id:e.gid}),A=(0,b.jsx)(u.EmojiText,{text:e.subject});return(0,b.jsx)(v.Modal,{type:v.ModalTheme.Invite,children:(0,b.jsxs)(h.default,{theme:"invite",children:[(0,b.jsx)(g.DrawerHeader,{type:g.DRAWER_HEADER_TYPE.POPUP,title:C.fbt._("Send invite to...",null,{hk:"2Yaa3P"}),onCancel:()=>{t()}}),(0,b.jsxs)(m.default,{children:[(0,b.jsx)("div",{className:(0,_.default)(E),children:(0,b.jsx)("div",{"data-list-scroll-container":!0,children:(0,b.jsx)(l.default,{ref:T,theme:"list-names",contacts:e.participants.map((e=>e.contact))})})}),(0,b.jsx)("div",{className:(0,_.default)(S),children:(0,b.jsx)(p.TextInput,{testid:"groups-v4-invite-add-comment-input",ref:w,value:D,showRemaining:!0,maxLength:r.default.MAX_CAPTION_LENGTH,onChange:e=>{I(e)},theme:"v4-invite-caption",supportsEmoji:!0})}),(0,b.jsx)(i.default,{transitionName:"btn",className:(0,_.default)(j),children:M}),(0,b.jsx)("div",{className:(0,_.default)(k),children:(0,b.jsx)(s.default,{idle:!0,image:P,primary:A,secondary:C.fbt._("WhatsApp group invite",null,{hk:"Yox1t"}),theme:"group_v4_invite"})})]})]})})};var r=a(n(364369)),o=a(n(506631)),i=a(n(540436)),l=a(n(653153)),s=a(n(744356)),d=n(288984),u=n(965417),c=n(482857),f=a(n(23217)),p=n(990011),h=a(n(60453)),m=a(n(69637)),g=n(994790),v=n(857224),x=n(582039),C=n(548360),y=n(667294),_=a(n(156720)),b=n(785893);const E={maxHeight:"gxpaki6b",paddingTop:"tvsr5v2h",paddingEnd:"hiez0fsc",paddingBottom:"mcwxqdig",paddingStart:"ku7dt4i2",overflowY:"ag5g9lrv",backgroundColor:"ihvf49ua",borderBottom:"daad4uqs"},S={paddingTop:"mw9hwy0h",paddingEnd:"lk91ofgv",paddingBottom:"przvwfww",paddingStart:"s9xya5d7"},j={position:"lhggkp7q",end:"druapeav",bottom:"l64xl67m",zIndex:"b9fczbqn",textAlign:"qfejxiq4"},k={position:"lhggkp7q",bottom:"jxacihee",width:"hblzrxh7",backgroundColor:"qqs366u4"}},987679:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(227101),o=a(n(568064)),i=n(914597),l=n(871579),s=n(978820),d=n(474315),u=a(n(540436)),c=n(728307),f=n(161509),p=n(779259),h=a(n(435721)),m=n(965417),g=a(n(243556)),v=n(482857),x=a(n(23217)),C=n(113923),y=n(990011),_=a(n(513699)),b=n(533646),E=a(n(60453)),S=a(n(69637)),j=n(994790),k=a(n(833308)),T=a(n(739911)),w=a(n(656318)),D=n(548360),I=n(667294),M=a(n(156720)),P=a(n(616031)),A=n(785893);const O={nextButton:{zIndex:"b9fczbqn",display:"p357zi0d",justifyContent:"j1p1mz06",paddingBottom:"gpgqxepn",marginTop:"th20vg8r",textAlign:"qfejxiq4"},section:{marginTop:"th20vg8r",marginEnd:"ramqyho6",marginBottom:"nym7wvdi",marginStart:"m51t5hoj"},header:{marginBottom:"j4enbv94"},chevronIcon:{color:"cs9t9or5"},labelDescription:{paddingTop:"g6boi0vp",paddingEnd:"lr0bazt3",paddingBottom:"ir2hfbae",paddingStart:"djc9pm98",lineHeight:"htjsae3x",color:"i8b0kslj"}};function R(e){let t,{ephemeralDuration:n,handleEphemeralDurationClick:a}=e;if(!(0,r.isDisappearingModeEnabled)())return null;t=n>0?(0,p.getDisappearingMessageDurationString)(n):o.default.t(293);const i=(0,A.jsx)(x.default,{xstyle:O.chevronIcon,name:"chevron-right-alt",directional:!0});return(0,A.jsx)(k.default,{children:(0,A.jsxs)(h.default,{onClick:a,side:i,multiline:!0,children:[(0,A.jsx)("div",{className:(0,M.default)(O.header),children:(0,A.jsx)(C.TextHeader,{level:"3",theme:"title",children:D.fbt._("Disappearing messages",null,{hk:"384ocn"})})}),(0,A.jsx)(C.TextParagraph,{theme:"muted",children:t})]})})}var L=(0,I.forwardRef)(((e,t)=>{const{participants:n=[],onSubmit:a,communityName:p}=e,h=(0,I.useRef)(null),C=(0,I.useRef)(null),[L,N]=(0,I.useState)(e.subject||""),[F,B]=(0,I.useState)(e.thumb),[U,H]=(0,I.useState)(e.full),[G,z]=(0,I.useState)((()=>{var e,t;let n;if((0,r.isDisappearingModeEnabled)()){const e=(0,s.getMaybeMeUser)();e&&(n=(0,c.getDisappearingModeSettingForUser)(e))}return null!==(e=null===(t=n)||void 0===t?void 0:t.duration)&&void 0!==e?e:0}));(0,I.useEffect)((()=>{var e;null===(e=h.current)||void 0===e||e.restoreFocus()}),[]);const q=(0,P.default)((()=>{const e=(0,_.default)(L.trim());a(e,F,U,G,n)})),W=()=>{i.ModalManager.open((0,A.jsx)(w.default,{initialDuration:G,onDurationSelected:z}))},V=L.trim().length>0;return(0,I.useImperativeHandle)(t,(()=>({restoreFocus:()=>{var e;return null===(e=h.current)||void 0===e?void 0:e.restoreFocus()},getElement:()=>C.current}))),(0,A.jsxs)(E.default,{children:[(0,A.jsx)(j.DrawerHeader,{title:o.default.t(515),type:j.DRAWER_HEADER_TYPE.LARGE,onBack:e.onBack}),(0,A.jsxs)(S.default,{children:[(0,A.jsxs)(k.default,{children:[(0,A.jsx)("div",{className:(0,M.default)(O.section),children:(0,A.jsx)(b.PhotoPickerLoadable,{type:g.default.GROUP,attachToChat:!1,startImage:U,onImageSet:(e,t)=>{B(e),H(t)}})}),(0,A.jsx)("div",{"data-testid":"group-subject",className:(0,M.default)(O.section),ref:C,children:(0,A.jsx)(y.TextInput,{ref:h,value:L,maxLength:25,showRemaining:!0,onChange:e=>{N(e)},placeholder:o.default.t(357),onEnter:V?q:()=>{},supportsEmoji:!0})})]}),(0,A.jsx)(R,{ephemeralDuration:G,handleEphemeralDurationClick:()=>{(0,d.shouldShowNUX)(l.NUX.EPHEMERAL)&&(0,f.isKeepInChatVisibleUIEnabled)()?i.ModalManager.open((0,A.jsx)(T.default,{fromMe:!0,onOk:W})):W()}}),null!=p?(0,A.jsx)(k.default,{theme:"transparent",shadow:!1,children:(0,A.jsx)(m.EmojiText,{xstyle:O.labelDescription,element:"p",text:D.fbt._('"{community-name}" community members can find and join this group',[D.fbt._param("community-name",p)],{hk:"Uslgk"})})}):null,(0,A.jsx)(u.default,{transitionName:"btn",children:!0===V&&(0,A.jsx)("div",{className:(0,M.default)(O.nextButton),children:(0,A.jsx)(v.Round,{testid:"create-group-btn",onClick:q,children:(0,A.jsx)(x.default,{name:"checkmark-medium"})})})})]})]})}));t.default=L},785201:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(291966)),o=a(n(441609)),i=a(n(763105)),l=n(48826),s=a(n(145120)),d=a(n(352013)),u=a(n(568064)),c=n(408139),f=n(914597),p=a(n(497039)),h=n(694816),m=a(n(540436)),g=a(n(935487)),v=a(n(653153)),x=n(552596),C=n(685600),y=n(729424),_=a(n(944942)),b=a(n(630855)),E=n(482857),S=n(111054),j=a(n(23217)),k=n(950452),T=a(n(452665)),w=a(n(60453)),D=a(n(69637)),I=n(994790),M=n(719380),P=a(n(294184)),A=n(548360),O=n(667294),R=a(n(156720)),L=a(n(616223)),N=a(n(803409)),F=n(785893);const B={display:"l7jjieqr",width:"ln8gz9je",height:"bvcnfjzh",paddingTop:"ppypbuwx",paddingEnd:"f9ovudaz",paddingBottom:"s8gyl5p1",paddingStart:"gx1rr48f",marginTop:"tt8xd2xn",marginEnd:"jnwc1y2a",marginBottom:"mpdn4nr2",marginStart:"svoq16ka",fontSize:"bze30y65",lineHeight:"k9cretck",color:"mfzfak1c",verticalAlign:"fewfhwl7",backgroundColor:"thr4l2wc",borderTop:"q4zabkcz",borderEnd:"jkanexlp",borderBottom:"thn59n0e",borderStart:"nsmrnv0a",outline:"gk6igrwd"},U={display:"p357zi0d",justifyContent:"ac2vgrno"},H={paddingTop:"mw9hwy0h",paddingEnd:"ixsqo53d",paddingBottom:"ekpn4oxx",paddingStart:"iy3dfvyp",marginTop:"tt8xd2xn",marginEnd:"jnwc1y2a",marginBottom:"mpdn4nr2",marginStart:"svoq16ka",backgroundColor:"ihvf49ua"},G={position:"g0rxnol2",width:"ln8gz9je",minHeight:"g4oj0cdv",maxHeight:"f0mh0h6e",paddingTop:"n1yiu2zv",paddingEnd:"f9ovudaz",paddingBottom:"przvwfww",paddingStart:"mjn2akup",overflowY:"ag5g9lrv",fontSize:"bze30y65",fontWeight:"e1gr2w1z",lineHeight:"r5qsrrlp",backgroundColor:"thr4l2wc",borderTop:"q4zabkcz",borderEnd:"jkanexlp",borderStart:"nsmrnv0a",borderBottom:"ob9ouq0z",outline:"gk6igrwd",transitionProperty:"nrvfj28n",transitionDuration:"hswow7x1",transitionTimingFunction:"bkifpc9x"},z={position:"snyj76hw",visibility:"kojwoqec"},q={position:"g0rxnol2",flexGrow:"ggj6brxn",flexShrink:"m0h2a7mj",flexBasis:"rjo8vgbg",overflowX:"gfz4du6o",overflowY:"ag5g9lrv",backgroundColor:"ihvf49ua"},W={zIndex:"b9fczbqn",display:"p357zi0d",justifyContent:"j1p1mz06",paddingBottom:"hjz8m82x",marginTop:"ignnouf6",textAlign:"qfejxiq4"},V=(0,k.genId)("max_participant_toast");function Y(e,t){const{participants:n=[],onBack:a,onContinue:Y}=e,K=(0,N.default)(),X=(0,L.default)((()=>new b.default)),Q=(0,O.useRef)(null),J=(0,O.useRef)(null),$=(0,O.useRef)(null),Z=(0,O.useRef)(null),[ee,te]=(0,O.useState)(""),[ne,ae]=(0,O.useState)(n),[re,oe]=(0,O.useState)(!0),[ie,le]=(0,O.useState)(!1),se=()=>{s.default.shouldIndicateFocus(),d.default.focus($.current)},de=e=>{var t,n;e.repeat||0!==(null===(t=$.current)||void 0===t?void 0:t.selectionStart)||Q.current&&(e.preventDefault(),e.stopPropagation(),null===(n=Q.current)||void 0===n||n.focusLast())},ue=()=>{Y(ne)},ce=e=>{const t=(0,c.getGroupSizeLimit)();if(ne.length>=t){const e=u.default.t(48,{max:t});h.ToastManager.open((0,F.jsx)(k.Toast,{msg:e,id:V}))}else te(""),ae(ne.concat(e)),oe(!0)},fe=()=>{const e=(0,r.default)(M.ContactCollection.getFilteredContacts(),ne);let t=ee;if(!t)return e;t=u.default.accentFold(t);const n=(0,p.default)(t);return e.filter((e=>e.searchMatch(t,n)))},pe=(e,t)=>{ne.find((e=>e.id.equals(t.id)))?(e=>{ae((0,i.default)(ne,(t=>!e.id.equals(t.id)))),oe(!0)})(t):t.isBlocked()?f.ModalManager.open((0,F.jsx)(T.default,{title:u.default.t(129),onOK:()=>{(e=>{le(!0),(0,l.unblockContact)(e).then((()=>{K.aborted||(ce(e),le(!1))})).catch((()=>{le(!1)}))})(t),f.ModalManager.close()},onCancel:()=>f.ModalManager.close(),okText:A.fbt._("Yes",null,{hk:"12b9aE"}),cancelText:A.fbt._("No",null,{hk:"4G38V6"}),children:A.fbt._("The contact you have selected is blocked. Would you like to unblock them and add them to the group?",null,{hk:"3i4hjJ"})})):ce(t)};let he;(0,O.useEffect)((()=>{if($.current){const e=$.current.offsetParent.offsetWidth-10,t=Z.current.offsetWidth,n=t>e?e:t;let a;$.current.style.width=n+"px",a=e-$.current.offsetLeft-n>0?e-$.current.offsetLeft:e,$.current.style.width=a+"px",re&&d.default.focus($.current)}})),ie?he=(0,F.jsx)("div",{className:(0,R.default)(U),children:(0,F.jsx)(S.Spinner,{stroke:6,size:24})}):ne.length&&(he=(0,F.jsx)(E.Round,{testid:"group-participants-btn",onClick:ue,children:(0,F.jsx)(j.default,{name:"arrow-forward",directional:!0})}));const me=ne.length?" ":u.default.t(353),ge={down:e=>{var t;J.current&&(e.preventDefault(),e.stopPropagation(),s.default.shouldIndicateFocus(),null===(t=J.current)||void 0===t||t.focusFirst())},enter:ee?e=>{e.preventDefault(),e.stopPropagation();const t=fe()[0];t&&pe(0,t)}:(null==ne?void 0:ne.length)?ue:()=>{},up:de};ge[u.default.LR("left","right")]=de;const ve=fe();let xe;return xe=0===ve.length?(0,F.jsx)(C.SearchContacts,{}):(0,F.jsx)(g.default,{ref:J,flatListController:X.current,contacts:ve,onClick:pe,onFocusSearch:se,showPersonGroupDivisionHeader:!1}),(0,F.jsxs)(w.default,{ref:t,children:[(0,F.jsx)(I.DrawerHeader,{title:A.fbt._("Add group participants",null,{hk:"24QOhm"}),type:I.DRAWER_HEADER_TYPE.LARGE,onBack:()=>{a()}}),(0,F.jsxs)(D.default,{children:[(0,F.jsx)("div",{className:(0,R.default)(H),children:(0,F.jsx)("div",{children:(0,F.jsxs)(y.HotKeys,{handlers:ge,className:(0,R.default)(G),children:[(0,F.jsx)("div",{"data-list-scroll-container":!0,children:(0,F.jsx)(v.default,{ref:Q,theme:"list-names",contacts:ne,onDelete:(e,t)=>{const n=(0,i.default)(ne,(e=>!e.id.equals(t.id)));ae(n),oe(!n.length)},onFocusSearch:se})}),(0,F.jsx)("input",{"data-testid":"inputarea",className:(0,P.default)((0,R.default)(B),x.SELECTABLE_INPUT_CSS_CLASS),ref:$,placeholder:me,onKeyDown:e=>{"Backspace"!==e.key||ee||(0,o.default)(ne)||(e.preventDefault(),ae(ne.slice(0,ne.length-1)),oe(!0))},onChange:e=>{te(e.target.value)},value:ee,type:"text"}),(0,F.jsx)("span",{className:(0,R.default)(z),ref:Z,children:ee})]})})}),(0,F.jsx)(_.default,{className:(0,R.default)(q),flatListControllers:[X.current],children:xe}),(0,F.jsx)(m.default,{transitionName:"btn",className:(0,R.default)(W),children:he})]})]})}var K=(0,O.forwardRef)(Y);t.default=K},415048:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;n(781572);var r=n(221310),o=a(n(568064)),i=n(914597),l=n(26741),s=a(n(471410)),d=a(n(450485)),u=a(n(60453)),c=a(n(69637)),f=a(n(464738)),p=n(994790),h=a(n(477798)),m=n(493045),g=n(473953),v=n(89721),x=n(441733),C=n(912591),y=a(n(23217)),_=a(n(356204)),b=n(488240),E=(n(669951),n(317239)),S=a(n(509349)),j=n(548360),k=n(667294),T=n(785893);const w={id:"animated-doodle",selectors:[`.${h.default.animation}`],low:{default:S.default},high:{default:S.default}};function D(e,t){const n=(0,k.useRef)(-1),a=(0,k.useRef)(!1),S=(e,t)=>{(0,m.logSessionEvent)(e,n.current,t),a.current=!0};(0,k.useEffect)((()=>(n.current=performance.now(),x.AssetLoader.loadAsset(w,v.LOAD_PRIORITY.HELP_ANIMATED_DOODLE),()=>{a.current||S(s.default.CONTACT_US_EXIT_STATE.CANCELLED)})),[]);const D=()=>{S(s.default.CONTACT_US_EXIT_STATE.PROBLEM_DESCRIPTION)},I=e=>{S(s.default.CONTACT_US_EXIT_STATE.EMAIL_SEND,e)},M=()=>{},P=()=>{i.ModalManager.open((0,T.jsx)(b.LicensesPopupLoadable,{onOk:M}))};let A;l.UA.isElectron&&(A=(0,T.jsx)(f.default,{testid:"li-licenses",onClick:P,icon:(0,T.jsx)(y.default,{name:"settings-document",height:24}),children:j.fbt._("Licenses",null,{hk:"39PWhp"})}));const O=E.Conn.isSMB?j.fbt._("Terms",null,{hk:"4ciB0D"}):j.fbt._("Terms and Privacy Policy",null,{hk:"3DVAn0"});return(0,T.jsxs)(u.default,{ref:t,children:[(0,T.jsx)(p.DrawerHeader,{testid:"drawer-title-help",title:o.default.t(367),onBack:e.onClose,type:p.DRAWER_HEADER_TYPE.LARGE}),(0,T.jsxs)(c.default,{children:[(0,T.jsx)("div",{className:h.default.animation}),(0,T.jsx)("div",{className:h.default.versionInfo,children:(0,T.jsx)(_.default,{})}),(0,T.jsx)(f.default,{testid:"li-faq",icon:(0,T.jsx)(y.default,{name:"settings-help"}),onClick:()=>{(0,C.openExternalLink)((0,r.getFaqUrl)()),S(s.default.CONTACT_US_EXIT_STATE.FAQ)},children:j.fbt._("Help Center",null,{hk:"22rPCE"})}),(0,T.jsx)(f.default,{testid:"li-contact-us",icon:(0,T.jsx)(y.default,{name:"group"}),onClick:()=>{i.ModalManager.open((0,T.jsx)(d.default,{onCancel:D,onSend:I}))},children:o.default.t(595)}),A,(0,T.jsx)(f.default,{testid:"li-tos",icon:(0,T.jsx)(y.default,{name:"settings-document",height:24}),onClick:()=>{a.current=!0;const e=E.Conn.isSMB?(0,g.getBizTosUrl)():(0,g.getTosUrl)();(0,C.openExternalLink)(e)},children:O}),undefined,undefined]})]})}var I=(0,k.forwardRef)(D);t.default=I},799413:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.search=function(){return m.apply(this,arguments)};var r=a(n(348926)),o=a(n(568064)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(n(435232)),l=a(n(376139)),s=a(n(511854));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}const u="https://www.bingapis.com/api/v6/images/search",c="D41D8CD98F00B204E9800998ECF8427E4F4A7492",f="Square",p="Medium",h={ar:"ar-SA",da:"da-DK",de:"de-DE",en:"en-US",es:"es-US",fi:"fi-FI",fr:"fr-FR",it:"it-IT",ko:"ko-KR",nl:"nl-NL",pl:"pl-PL","pt-BR":"pt-BR",ru:"ru-RU",sv:"sv-SE",tr:"tr-TR","zh-CN":"zh-CN","zh-TW":"zh-TW","zh-HK":"zh-HK"};function m(){return(m=(0,r.default)((function*(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30;const a={q:e,SafeSearch:"Strict",appid:c,mkt:h[o.default.getLocale()]||h.en,size:p,aspect:f,count:n,offset:t},r=l.default.build(u,a),d=yield s.default.get(r,s.default.RESP_TYPE.JSON);if(!d.response.hasOwnProperty("_type"))throw new i.InvalidServerResponseError(r,status,`Not a valid Bing response: ${JSON.stringify(d.response)}`);if("ErrorResponse"===d.response._type){const t=d.response;throw new i.BingServerError(e,d.status,t)}if("Images"!==d.response._type)throw new i.InvalidServerResponseError(r,status,`Did not receive an image search response, potentially malformed query ${JSON.stringify(d.response)}`);return d.response}))).apply(this,arguments)}},290312:(e,t,n)=>{"use strict";var a=n(280366).default,r=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onImageSelected:t}=e,n=(0,M.default)(),r=(0,D.useRef)(null),A=(0,D.useRef)(null),O=(0,D.useRef)(null),R=(0,D.useRef)(!1),L=(0,D.useRef)(null),[N,F]=(0,D.useState)({}),[B,U]=(0,D.useState)(!1),[H,G]=(0,D.useState)(0),[z,q]=(0,D.useState)(""),[W,V]=(0,D.useState)([]),[Y,K]=(0,D.useState)(0),X=(0,I.default)(((e,t)=>{R.current=!1;const n=new a,r=v.search(e,t).then((t=>{var a;if(n.signal.aborted)throw new s.AbortError;r===(null===(a=L.current)||void 0===a?void 0:a.promise)&&(((e,t)=>{const n=(0,l.default)(t.value,(e=>e.thumbnailUrl)),a=(0,i.default)(t.value,(e=>({id:e.imageId,name:e.name,thumbUrl:e.thumbnailUrl}))),r=t.value.length;var s,d;z===e?(G(t.nextOffset?t.nextOffset:H+r),V((0,o.default)(W,a)),K(null!==(s=t.totalEstimatedMatches)&&void 0!==s?s:0),F(Object.assign(n,N))):(F(n),G(t.nextOffset?t.nextOffset:H+r),q(z),V(a),K(null!==(d=t.totalEstimatedMatches)&&void 0!==d?d:0))})(e,t),U(!1))})).catch((0,s.catchAbort)((()=>{}))).catch((()=>{var e;__LOG__(3,!0)`Image search failed`,m.ToastManager.open((0,P.jsx)(S.Toast,{msg:w.fbt._("Image search failed",null,{hk:"9pHyN"}),id:(0,S.genId)()})),r===(null===(e=L.current)||void 0===e?void 0:e.promise)&&U(!1)})).finally((()=>{var e;r===(null===(e=L.current)||void 0===e?void 0:e.promise)&&(L.current=null)}));L.current={promise:r,controller:n},U(!0)}),750),Q=()=>{X.cancel(),R.current&&(R.current=!1),L.current&&L.current.controller.abort()},J=()=>{F({}),U(!1),G(0),q(""),V([]),K(0)},$=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;R.current=!0,X(e,t)},Z=()=>{R.current||L.current||!Y||H>=Y||$(z,H)},ee=e=>{const a=N[e];if(!a)return;const r=a.contentUrl;let o;if(g.UA.isElectron)o=(0,x.default)((()=>(0,h.default)(r))).then((e=>{if(200!==e.status)throw new p.ServerStatusError(null,r,e.status);return e.blob()}));else{if((0,u.isMDBackend)())throw new Error("This call is only supported in non-MD mode");o=C.default.downloadImage(r)}o.then((e=>{if(!n.aborted){if(!(e instanceof Blob))throw new p.ImageError("Server did not respond with image bytes",r);t(e,a.hostPageUrl)}})).catch((()=>{__LOG__(3,!0)`Image search failed`,m.ToastManager.open((0,P.jsx)(S.Toast,{msg:w.fbt._("Failed to load image",null,{hk:"1k5xX"}),id:(0,S.genId)()}))}))},te=()=>{c.default.shouldIndicateFocus(),f.default.focus(r.current)},ne=T.DRAWER_HEADER_TYPE.POPUP;let ae;ae=0===W.length?B?(0,P.jsx)(_.SearchingImages,{}):z?(0,P.jsx)(_.ImageSearchEmpty,{}):(0,P.jsx)(_.BeforeImageSearch,{}):(0,P.jsx)(b.default,{ref:O,canLoadMore:H<Y,isLoadingMore:B,thumbnails:W,onFocusPrev:te,onImageClick:ee,onRequestMoreImages:Z});return(0,P.jsxs)(j.default,{children:[(0,P.jsx)(T.DrawerHeader,{title:w.fbt._("Image Search",null,{hk:"p4JUz"}),type:ne,onBack:e.onBack,onCancel:e.onCancel}),(0,P.jsxs)(k.default,{children:[(0,P.jsx)(E.HotKeys,{ref:A,handlers:{down:e=>{e.repeat||O.current&&r.current&&r.current.cursorIsAtEnd()&&(e.preventDefault(),e.stopPropagation(),c.default.shouldIndicateFocus(),null!=O.current&&f.default.focus(O.current))}},onFocus:()=>{c.default.maybeIndicateFocus(A.current)},children:(0,P.jsx)(y.default,{ref:r,placeholder:w.fbt._("Enter search term here",null,{hk:"sgCKx"}),onSearch:e=>{const t=(e||"").trim();if(!t)return Q(),void J();(0,d.numCodepoints)(t)<2||t!==z&&(Q(),J(),$(t))},loading:B})}),ae]})]})};var o=r(n(957043)),i=r(n(435161)),l=r(n(224350)),s=n(389385),d=n(164331),u=n(88555),c=r(n(145120)),f=r(n(352013)),p=O(n(435232)),h=r(n(506631)),m=n(694816),g=n(26741),v=O(n(799413)),x=r(n(470047)),C=r(n(656891)),y=r(n(248837)),_=n(685600),b=r(n(431469)),E=n(729424),S=n(950452),j=r(n(60453)),k=r(n(69637)),T=n(994790),w=n(548360),D=n(667294),I=r(n(651799)),M=r(n(803409)),P=n(785893);function A(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(A=function(e){return e?n:t})(e)}function O(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=A(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}},470047:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,s.promiseLoop)(function(){var t=(0,r.default)((function*(t,n,a){const r=(0,l.delayMs)((0,i.expBackoff)(a,6e4,void 0,.1));try{yield function(){if(c.Socket.state===u.SOCKET_STATE.CONNECTED)return Promise.resolve();return(0,d.default)(c.Socket,"change:state",(0,o.default)({state:u.SOCKET_STATE.CONNECTED}))}();const n=yield e();if(n.status>=500&&n.status<600)return r;t(n)}catch(e){return r}}));return function(){return t.apply(this,arguments)}}())};var r=a(n(348926)),o=a(n(706410)),i=n(180284),l=n(413959),s=n(904352),d=a(n(312523)),u=n(662583),c=n(765044)},696347:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onOk:t}=e,[n,a]=(0,c.useState)(void 0);let p,h;(0,c.useEffect)((()=>{}),[]),n||(p=(0,f.jsx)("div",{className:o.default.spinner,children:(0,f.jsx)(i.Spinner,{size:50,stroke:4})},"spinner"));n&&(h=(0,f.jsx)("div",{className:o.default.textContainer,children:n}));return(0,f.jsx)(s.default,{okText:u.fbt._("OK",null,{hk:"2KEeHb"}),onOK:()=>{null==t||t(),r.ModalManager.close()},type:d.ModalTheme.Flex,children:(0,f.jsxs)("div",{className:o.default.container,children:[(0,f.jsx)(l.TextSpan,{theme:"popup-title",children:u.fbt._("Licenses",null,{hk:"39PWhp"})}),h,p]})})};var r=n(914597),o=a(n(423918)),i=n(111054),l=n(113923),s=a(n(452665)),d=n(857224),u=n(548360),c=n(667294),f=n(785893)},739301:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.ID_SEPARATOR=t.Cluster=void 0;var r=n(988501),o=a(n(233861));t.ID_SEPARATOR=",";t.Cluster=class{constructor(){this.participants=new o.default;for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach((e=>this.add(e)))}get id(){return this.participants.map((e=>{let{id:t}=e;return t.toString()})).join(",")}get center(){const e=this.participants.map((e=>{let{lat:t}=e;return t})),t=this.participants.map((e=>{let{lng:t}=e;return t}));return{lat:(Math.min(...e)+Math.max(...e))/2,lng:(Math.min(...t)+Math.max(...t))/2}}get lat(){return this.center.lat}get lng(){return this.center.lng}get length(){return this.participants.length}get northeast(){const e=this.participants.map((e=>{let{lat:t}=e;return t})),t=this.participants.map((e=>{let{lng:t}=e;return t}));return{lat:Math.max(...e),lng:Math.max(...t)}}get southwest(){const e=this.participants.map((e=>{let{lat:t}=e;return t})),t=this.participants.map((e=>{let{lng:t}=e;return t}));return{lat:Math.min(...e),lng:Math.min(...t)}}add(e){this.participants.add(e)}hasSingleParticipant(){return 1===this.length}fits(e,t,n){const{lat:a,lng:o}=this.center,{lat:i,lng:l}=e,s=(0,r.getMetersBetweenLatLngs)(a,o,a,l),d=(0,r.getMetersBetweenLatLngs)(a,o,i,o),u=(0,r.getMetersPerPixel)(a,t);return s/u<=n&&d/u<=n}}},351654:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onParticipantSelected:t,participants:n}=e,a=(0,m.default)((()=>new c.default)),i=(0,h.useMemo)((()=>n.map((e=>({itemKey:e.id.toString(),participant:e})))),[n]);return(0,g.jsxs)("div",{className:o.default.container,children:[(0,g.jsxs)("div",{className:o.default.header,children:[(0,g.jsx)("div",{className:o.default.left,children:(0,g.jsx)("span",{className:o.default.close,onClick:e.onClearSelected,children:(0,g.jsx)(p.default,{name:"x"})})}),(0,g.jsx)("div",{className:o.default.right,children:r.default.t(398,{count:e.participants.length,_plural:e.participants.length})})]}),(0,g.jsx)(u.default,{className:o.default.list,flatListControllers:[a.current],children:(0,g.jsx)(d.FlatList,{data:i,flatListController:a.current,direction:"vertical",defaultItemHeight:48,renderItem:e=>{let{participant:n}=e;return(0,g.jsx)(v,{participant:n,onClick:()=>t(n.contact.id.toString())})}})})]})};var r=a(n(568064)),o=a(n(50521)),i=a(n(761804)),l=n(288984),s=a(n(451099)),d=n(747915),u=a(n(944942)),c=a(n(630855)),f=n(812176),p=a(n(23217)),h=n(667294),m=a(n(616223)),g=n(785893);function v(e){let{onClick:t,participant:n}=e;const a=n.isMe?(0,g.jsx)("div",{className:o.default.time,children:(0,g.jsx)(s.default,{reason:"live-location-time",children:(0,g.jsx)(i.default,{participant:n})})}):null;return(0,g.jsxs)("div",{className:o.default.item,onClick:t,children:[(0,g.jsx)("div",{className:o.default.left,children:(0,g.jsx)(l.DetailImage,{id:n.contact.id,size:28})}),(0,g.jsxs)("div",{className:o.default.right,children:[(0,g.jsx)("div",{className:o.default.name,children:(0,g.jsx)(f.Name,{contact:n.contact,titlify:!0,ellipsify:!0,you:!0})}),a]})]})}},516641:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.cluster=function(e,t,n,a){const i=new Map;if(!e.length)return i;const l=e.filter((e=>e!==n)).sort(((e,t)=>e.lat-t.lat));for(let e=0;e<l.length;e++){const n=l[e];let s;if(i.forEach((e=>{!s&&e.fits(n,t,a)&&(s=e)})),s){const e=s,t=s.id;i.delete(t),e.add(n)}else s=new o.Cluster(n);i.set((0,r.default)(s,"clusterToAdd").id,(0,r.default)(s,"clusterToAdd"))}if(n&&e.length!==l.length){const e=new o.Cluster(n);i.set(e.id,e)}return i},t.findClusterForParticipant=function(e,t){let n;const a=e.values();for(;(n=a.next())&&!n.done;){const e=n.value;if(e.participants.get(t))return e}return null},t.participantInCluster=function(e,t){return e.split(o.ID_SEPARATOR).includes(t.toString())},t.singleParticipantClusterId=function(e){return!e.includes(o.ID_SEPARATOR)};var r=a(n(145095)),o=n(739301)},709903:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.STALE_THRESHOLD=t.PIN_SIZE=t.MARKER_SIZE=t.IMAGE_SIZE=t.IMAGE_BORDER_SIZE=t.GLOW_SIZE=t.AVATAR_SIZE=void 0,t.getSmallestElapsedTime=n,t.isStale=function(e){return n(e)>=600};t.STALE_THRESHOLD=600;t.IMAGE_SIZE=40;t.IMAGE_BORDER_SIZE=2;t.GLOW_SIZE=4;t.PIN_SIZE=4;t.AVATAR_SIZE=44;function n(e){const t=e.participants.map((e=>e.elapsedTime()));return Math.min(...t)}t.MARKER_SIZE=52},374717:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onClose:t}=e,n=(0,v.useModelValues)(e.msg,["finalLat","finalLng","finalTimeOffset","lat","lng","senderObj","t"]),[a,y]=(0,m.useState)(f.MapType.ROADMAP),[_,b]=(0,m.useState)(!1),[E,S]=(0,m.useState)(!1),j=(0,g.default)(o.default,"change:online",(()=>o.default.online)),k=(0,x.default)(),T=e=>{S(e)},w=(0,C.jsx)(p.default,{onRoadmapSelected:()=>{y(f.MapType.ROADMAP)},onSatelliteSelected:()=>{y(f.MapType.SATELLITE)},onTerrainSelected:()=>{y(f.MapType.TERRAIN)},onTrafficToggled:()=>{b((e=>!e))},showTraffic:_}),{finalLat:D,finalLng:I,finalTimeOffset:M,lat:P,lng:A,senderObj:O,t:R}=n;let L,N,F,B;void 0===D||void 0===I||void 0===M?(L=P,N=A,F=R):(L=D,N=I,F=R+M);B=j?(0,C.jsxs)("div",{className:i.default.wrapper,children:[(0,C.jsx)(l.default,{contact:O,lat:L,lng:N,mapType:a,showTraffic:_,markerSelected:E,onMarkerSelected:T}),(0,C.jsxs)("div",{className:i.default.notification,children:[(0,C.jsx)("div",{className:i.default.ended,children:h.fbt._("Live location ended",null,{hk:"1qhVqb"})}),(0,C.jsx)("div",{className:i.default.lastUpdated,children:r.Clock.liveLocationLastUpdatedStr(F)})]})]}):(0,C.jsx)("div",{className:i.default.offline,children:(0,C.jsxs)("div",{children:[(0,C.jsx)("div",{className:i.default.circle,children:(0,C.jsx)(s.default,{name:"live-location-disconnected"})}),(0,C.jsx)("div",{className:i.default.text,children:h.fbt._("Make sure your computer has an active Internet connection.",null,{hk:"49ekhp"})})]})});return(0,C.jsxs)(d.default,{children:[(0,C.jsx)(c.DrawerHeader,{title:h.fbt._("Expired Location",null,{hk:"2bVGaN"}),type:c.DRAWER_HEADER_TYPE.SMALL,menu:w,onCancel:()=>{t?t():null==k||k.requestDismiss()}}),(0,C.jsx)(u.default,{children:B})]})};var r=n(40234),o=a(n(681602)),i=a(n(394692)),l=a(n(712082)),s=a(n(23217)),d=a(n(60453)),u=a(n(69637)),c=n(994790),f=n(73098),p=a(n(327766)),h=n(548360),m=n(667294),g=a(n(196570)),v=n(735461),x=a(n(895402)),C=n(785893)},712082:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(657319),o=n(73098),i=a(n(48037)),l=n(667294),s=n(833458),d=n(785893);class u extends l.Component{constructor(e){super(e),this.setMap=e=>this.map=e,this.mapOnClick=()=>{this.dismissMarkerTimer.debounceAndCap(50,100)},this.markerOnClick=()=>{this.dismissMarkerTimer.isScheduled()&&this.dismissMarkerTimer.cancel(),this.props.onMarkerSelected(!0)},this.getPixelPositionOffset=(e,t)=>({x:-e/2,y:-t}),this.dismissMarkerTimer=new r.ShiftTimer((()=>{this.props.markerSelected&&this.props.onMarkerSelected(!1)}))}componentWillUnmount(){this.dismissMarkerTimer.isScheduled()&&this.dismissMarkerTimer.cancel()}getMapPaneName(){return s.OverlayView.OVERLAY_MOUSE_TARGET}getMarkers(){const{lat:e,lng:t,contact:n,markerSelected:a}=this.props;return(0,d.jsx)(i.default,{marker:{isLive:!1,contact:n,lat:e,lng:t,selected:a,onClick:e=>this.markerOnClick(e)}})}getTrafficLayer(){return this.props.showTraffic?(0,d.jsx)(s.TrafficLayer,{autoRefresh:!0}):null}render(){const{lat:e,lng:t}=this.props;return(0,d.jsxs)(s.GoogleMap,{ref:this.setMap,defaultCenter:{lat:e,lng:t},defaultOptions:this.props.getMapOptions(),defaultZoom:o.INITIAL_ZOOM,mapTypeId:this.props.mapType,onClick:this.mapOnClick,children:[this.getMarkers(),this.getTrafficLayer()]})}}u.displayName="ExpiredLocationMap";var c=(0,o.withConfig)((0,s.withScriptjs)((0,s.withGoogleMap)(u)));t.default=c},111399:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(81109)),o=a(n(441609)),i=a(n(823493)),l=a(n(568064)),s=n(914597),d=a(n(681602)),u=n(694816),c=a(n(389867)),f=n(745454),p=a(n(351654)),h=n(516641),m=n(709903),g=a(n(426658)),v=a(n(822163)),x=n(73098),C=a(n(327766)),y=a(n(732213)),_=a(n(86058)),b=a(n(23217)),E=n(950452),S=a(n(3222)),j=n(184387),k=a(n(65932)),T=a(n(804478)),w=a(n(60453)),D=a(n(69637)),I=n(994790),M=a(n(579834)),P=n(118146),A=a(n(294184)),O=n(548360),R=n(667294),L=n(785893);const N=["click","mousedown","mousemove","scroll"],F="ACTIVE",B="INACTIVE",U="OFFLINE";class H extends R.PureComponent{constructor(e){super(e),this._handleParticipantAdd=()=>{const{zoomLevel:e,selectedParticipantId:t}=this.state;this._updateMinZoomClusters(),this.setState({clusters:this._getClusters(e,t)})},this._handleParticipantRemove=e=>{const{selectedClusterId:t,selectedParticipantId:n,zoomLevel:a}=this.state;this._updateMinZoomClusters();let r=t,o=n;t&&(0,h.participantInCluster)(t,e.id)&&(r=null),c.default.equals(n,e.id)&&(o=null),this.setState({selectedClusterId:r,selectedParticipantId:o,clusters:this._getClusters(a,o)})},this._handleParticipantDisable=e=>{if(!e.isMe){const t=e.contact.formattedName;u.ToastManager.open((0,L.jsx)(E.Toast,{msg:l.default.t(413,{name:t}),id:(0,E.genId)()}))}},this._handleLocationChanged=()=>{const{zoomLevel:e,selectedParticipantId:t}=this.state;this._updateMinZoomClusters(),this.setState({clusters:this._getClusters(e,t)})},this._handleIdle=()=>{const{liveLocation:e}=this.props.chat;e&&(e.stopViewingMap(),this.setState({status:B}))},this.onActivity=(0,i.default)((()=>{this._removeIdleTimeout(),this._addIdleTimeout()}),250),this._handleRefresh=()=>{const{liveLocation:e}=this.props.chat;e&&(e.startViewingMap(),this.setState({status:F}))},this._handleClose=()=>{this.props.onClose?this.props.onClose():this.props.uim.requestDismiss()},this._handleMarkerSelected=e=>{e?(0,h.singleParticipantClusterId)(e)?this._handleParticipantSelected(e):this._handleClusterSelected(e):this._handleClearSelected()},this._handleClearSelected=()=>{const{selectedParticipantId:e,selectedClusterId:t,zoomLevel:n}=this.state;(e||t)&&this.setState({selectedParticipantId:null,selectedClusterId:null,clusters:this._getClusters(n)})},this._handleClusterSelected=e=>{this.state.selectedClusterId!==e&&this.setState({selectedParticipantId:null,selectedClusterId:e})},this._handleParticipantSelected=e=>{const{selectedParticipantId:t,zoomLevel:n}=this.state,a=(0,f.createWid)(e);c.default.equals(t,a)||this.setState({selectedParticipantId:a,selectedClusterId:null,clusters:this._getClusters(n,a)})},this._handleStopSharing=e=>{e.preventDefault(),e.stopPropagation();const{chat:t}=this.props;s.ModalManager.open((0,L.jsx)(M.default,{chat:t}))},this._handleRoadmapSelected=()=>{this.setState({mapType:x.MapType.ROADMAP})},this._handleSatelliteSelected=()=>{this.setState({mapType:x.MapType.SATELLITE})},this._handleTerrainSelected=()=>{this.setState({mapType:x.MapType.TERRAIN})},this._handleTrafficToggled=()=>{this.setState((e=>({showTraffic:!e.showTraffic})))},this._handleBackToCenter=()=>{this.setState({selectedParticipantId:null,selectedClusterId:null,atCenter:!0,clusters:this._getClusters(this.state.zoomLevel)})},this._handleMapMoved=(e,t)=>{this.setState((n=>{const a={};if(n.zoomLevel!==e){const t=this._getClusters(e,n.selectedParticipantId);return(0,r.default)((0,r.default)({},a),{zoomLevel:e,clusters:t})}return this._hasValidParticipants()&&n.atCenter!==t?(0,r.default)((0,r.default)({},a),{atCenter:t}):(0,o.default)(a)?null:a}))},this._updateMinZoomClusters(),this.state={clusters:this._getClusters(x.INITIAL_ZOOM),selectedClusterId:null,selectedParticipantId:null,mapType:x.MapType.ROADMAP,showTraffic:!1,zoomLevel:x.INITIAL_ZOOM,atCenter:!0,status:d.default.online?F:U}}componentDidMount(){this._listenToModelChange(),this._listenToNetworkChange(),this._startCheckingForIdle();const{liveLocation:e}=this.props.chat;e&&(e.startViewingMap(),this._addParticipantListeners(e))}componentWillUnmount(){this.onActivity.cancel();const{liveLocation:e}=this.props.chat;e&&e.stopViewingMap()}_addParticipantListeners(e){this.props.listeners.add(e.participants,"add",this._handleParticipantAdd),this.props.listeners.add(e.participants,"remove",this._handleParticipantRemove),this.props.listeners.add(e.participants,"change:disabled",this._handleParticipantDisable),this.props.listeners.add(e.participants,"change:valid",this._handleLocationChanged)}_removeParticipantListeners(e){this.props.listeners.remove(e.participants,"add",this._handleParticipantAdd),this.props.listeners.remove(e.participants,"remove",this._handleParticipantRemove),this.props.listeners.remove(e.participants,"change:disabled",this._handleParticipantDisable),this.props.listeners.remove(e.participants,"change:valid",this._handleLocationChanged)}_listenToModelChange(){const{chat:e}=this.props;this.props.listeners.add((0,P.unproxy)(e),"change:liveLocation",(()=>{const{liveLocation:t}=e;t&&(this._removeParticipantListeners(t),this._addParticipantListeners(t));const{zoomLevel:n}=this.state;this.setState({clusters:this._getClusters(n)})}))}_listenToNetworkChange(){this.props.listeners.add(d.default,"change:online",(()=>{d.default.online||this._stopCheckingForIdle(),this.setState({status:d.default.online?F:U})}))}_startCheckingForIdle(){this._addIdleTimeout(),this._addActivityListeners()}_stopCheckingForIdle(){this._removeIdleTimeout(),this._removeActivityListeners()}_addIdleTimeout(){this._idleTimeoutId=this.props.setTimeout(this._handleIdle,18e4)}_removeIdleTimeout(){null!=this._idleTimeoutId&&this.props.clearTimeout(this._idleTimeoutId),this._idleTimeoutId=null}_addActivityListeners(){N.forEach((e=>{this.props.listeners.add(document,e,this.onActivity)}))}_removeActivityListeners(){N.forEach((e=>{this.props.listeners.remove(document,e,this.onActivity)}))}_updateMinZoomClusters(){const e=this.getParticipants(),t=e?e.validLocations():[];this._minZoomClusters=(0,h.cluster)(t,x.MIN_ZOOM,null,m.MARKER_SIZE)}getParticipants(){const{liveLocation:e}=this.props.chat;return e?e.participants:null}_hasValidParticipants(){const e=this.getParticipants();return!!e&&!!e.validLocations().length}_getOpenFromCluster(){const e=this.getParticipants();if(!e||0===e.length)return null;const{openFrom:t}=this.props;let n=null;if(t)n=t;else{const t=e.at(0);t&&(n=t.id)}return n?(0,h.findClusterForParticipant)(this._minZoomClusters,n):null}_getClusters(e,t){const n=this.getParticipants();let a=null,r=[];n&&(t&&(a=n.get(t)),r=n.validLocations());let o=r,i=[];if(this._minZoomClusters.size>1){const e=this._getOpenFromCluster();if(e){const t=e.participants;o=t.validLocations(),i=r.filter((e=>{let{id:n}=e;return!t.get(n)}))}}return{primary:(0,h.cluster)(o,e,a,m.MARKER_SIZE),secondary:(0,h.cluster)(i,e,a,m.MARKER_SIZE)}}_getList(){const{clusters:e,selectedClusterId:t}=this.state,n=this.getParticipants();let a;if(null==n?void 0:n.length){if(t){const n=e.primary.get(t)||e.secondary.get(t);if(n){const e=n.participants;a=(0,L.jsx)(p.default,{participants:e,onParticipantSelected:this._handleParticipantSelected,onClearSelected:this._handleClearSelected})}}a||(a=(0,L.jsx)(y.default,{participants:n,onParticipantSelected:this._handleParticipantSelected,onStopSharing:this._handleStopSharing}))}return a}render(){let e,t;this.props.isFirstLevel?e=this._handleClose:t=this._handleClose;const{selectedParticipantId:n,selectedClusterId:a,mapType:r,showTraffic:o,atCenter:i,status:s}=this.state,d=s===F?(0,L.jsx)(C.default,{onRoadmapSelected:this._handleRoadmapSelected,onSatelliteSelected:this._handleSatelliteSelected,onTerrainSelected:this._handleTerrainSelected,onTrafficToggled:this._handleTrafficToggled,showTraffic:o}):null;let u,c;if(s===F||s===B){const e=n&&n.toString()||a;u=(0,L.jsxs)("div",{className:g.default.wrapper,children:[(0,L.jsx)("div",{className:(0,A.default)(g.default.backToCenter,{[g.default.visible]:!i}),onClick:this._handleBackToCenter,children:(0,L.jsx)(b.default,{name:"return"})}),(0,L.jsx)(v.default,{clusters:this.state.clusters.primary,secondaryClusters:this.state.clusters.secondary,selectedMarkerId:e,openFrom:this.props.openFrom,mapType:r,showTraffic:o,atCenter:i,onMarkerSelected:this._handleMarkerSelected,onClearSelected:this._handleClearSelected,onLocationChanged:this._handleLocationChanged,onMapMoved:this._handleMapMoved}),this._getList()]})}if(s===B||s===U){const e=s===B,t=e?"live-location-refresh":"live-location-disconnected",n=e?O.fbt._("Click to continue viewing live location",null,{hk:"4j5wQx"}):l.default.t(430);c=(0,L.jsx)(_.default,{inactive:e,svgName:t,text:n,onClick:e?this._handleRefresh:void 0})}return(0,L.jsxs)(w.default,{children:[(0,L.jsx)(I.DrawerHeader,{title:O.fbt._("Live Location",null,{hk:"1LvIwY"}),type:I.DRAWER_HEADER_TYPE.SMALL,menu:d,onBack:t,onCancel:e}),(0,L.jsxs)(D.default,{children:[u,c]})]})}}H.CONCERNS={chat:["id","liveLocation"]},H.displayName="LiveLocationDrawer";var G=(0,S.default)((0,T.default)((0,j.ListenerHOC)((0,k.default)(H,H.CONCERNS))));t.default=G},822163:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(23279)),o=n(657319),i=n(73098),l=a(n(48037)),s=n(988501),d=n(667294),u=n(833458),c=n(785893);const f=1e-4;class p extends d.Component{constructor(e){super(e),this.setMap=e=>this.map=e,this._handleLocationChanged=e=>{const{clusters:t,atCenter:n,selectedMarkerId:a}=this.props;if(this.props.onLocationChanged(),!a&&n)this._viewAllClusters();else if(a&&a===e){const e=t.get(a);e&&this._viewSingleCluster(e)}},this.handleIdle=(0,r.default)((()=>{const e=this.map;if(!e)return;const t=e.getZoom();if(this._zoomingToAllClusters){this._defaultZoomLevel=t,this._zoomingToAllClusters=!1;const e=this._zoomHistory;if(e.prev.preZoom===e.curr.postZoom&&e.prev.postZoom===e.curr.preZoom)return}this.props.onMapMoved(t,this.atCenter())}),100),this._handleDragStart=()=>{const e=this.map;if(!e)return;const t=e.getZoom();this.props.onMapMoved(t,!1)},this.handleResize=(0,r.default)((()=>{this._setMapLatLngDiff()}),250),this.mapOnClick=()=>{this.dismissMarkerTimer.debounceAndCap(50,100)},this.markerOnClick=(e,t)=>{this.dismissMarkerTimer.isScheduled()&&this.dismissMarkerTimer.cancel(),this.props.onMarkerSelected(t)},this.dismissMarkerTimer=new o.ShiftTimer((()=>{this.props.selectedMarkerId&&this.props.onClearSelected()})),this._defaultLatDiff=this._defaultLngDiff=.01,this._defaultZoomLevel=-1,this._zoomingToAllClusters=!1,this._zoomHistory={prev:{preZoom:-1,postZoom:-1},curr:{preZoom:-1,postZoom:-1}}}componentWillUnmount(){this.handleIdle.cancel(),this.handleResize.cancel(),window.removeEventListener("resize",this.handleResize),this.dismissMarkerTimer.isScheduled()&&this.dismissMarkerTimer.cancel()}componentDidMount(){window.addEventListener("resize",this.handleResize),this._setMapLatLngDiff(),this._viewAllClusters()}componentDidUpdate(e){const{clusters:t,secondaryClusters:n,selectedMarkerId:a,atCenter:r}=this.props,{selectedMarkerId:o}=e;if(this._setMapLatLngDiff(),t.size&&(!o||a||r))if(a&&o!==a){const e=t.get(a)||n.get(a);e&&this._viewSingleCluster(e)}else!a&&r&&this._viewAllClusters()}_viewAllClusters(){const{clusters:e}=this.props;0===e.size||this.atCenter()||(this._zoomToFitAllClusters(e),this._centerAllClusters(e))}_viewSingleCluster(e){this._zoomToFitSingleCluster(e),this._centerSingleCluster(e)}_zoomToFitAllClusters(e){const t=this.map;if(!t)return;this._zoomingToAllClusters=!0,this._zoomHistory.prev.preZoom=this._zoomHistory.curr.preZoom,this._zoomHistory.curr.preZoom=t.getZoom();const n=this.getBounds(e),a=e.entries().next();if(1!==e.size||a.done)this._boundsTooSmall(n)?t.fitBounds(this._getDefaultBounds(n.getCenter())):t.fitBounds(n);else{const[,e]=a.value;this._zoomToFitSingleCluster(e,!1)}this._zoomHistory.prev.postZoom=this._zoomHistory.curr.postZoom,this._zoomHistory.curr.postZoom=t.getZoom()}_zoomToFitSingleCluster(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.map;if(!n)return;if(t&&this._boundsTooSmall(n.getBounds()))return;const a=e.northeast,r=e.southwest,o=new google.maps.LatLng(a.lat,a.lng),i=new google.maps.LatLng(r.lat,r.lng),l=new google.maps.LatLngBounds(i,o);this._boundsTooSmall(l)?n.fitBounds(this._getDefaultBounds(l.getCenter())):n.fitBounds(l)}_centerAllClusters(e){const t=this.getBounds(e).getCenter();this._centerMap(t)}_centerSingleCluster(e){const t=new google.maps.LatLng(e.center);this._centerMap(t)}_centerMap(e){const t=this.map;t&&(t.getCenter().equals(e)||t.panTo(e))}_getInitialCenter(){return this.getBounds(this.props.clusters).getCenter()}getBounds(e){const t=new google.maps.LatLngBounds;return e.forEach((e=>{t.extend({lat:e.lat,lng:e.lng})})),t}_boundsTooSmall(e){const t=e.getNorthEast(),n=e.getSouthWest(),a=t.lat()-n.lat(),r=t.lng()-n.lng(),o=Math.abs(a)<this._defaultLatDiff,i=Math.abs(r)<this._defaultLngDiff;return o||i}_getDefaultBounds(e){const t=new google.maps.LatLng(e.lat()-this._defaultLatDiff/2,e.lng()-this._defaultLngDiff/2),n=new google.maps.LatLng(e.lat()+this._defaultLatDiff/2,e.lng()+this._defaultLngDiff/2);return new google.maps.LatLngBounds(t,n)}atCenter(){const e=this.map;if(!e)return!0;const t=e.getCenter(),n=this._getInitialCenter(),a=t.lat()-n.lat(),r=t.lng()-n.lng();return Math.abs(a)<f&&Math.abs(r)<f&&this._defaultZoomLevel===e.getZoom()}_setMapLatLngDiff(){const e=this.map;if(!e)return;const t=e.getCenter(),n=e.getDiv(),a=(0,s.getMetersPerPixel)(t.lat(),i.INITIAL_ZOOM),r=n.offsetWidth*a,o=n.offsetHeight*a;this._defaultLatDiff=(0,s.getLatDiff)(o),this._defaultLngDiff=(0,s.getLngDiff)(r,t.lat())}getMarkers(){const{clusters:e,secondaryClusters:t,selectedMarkerId:n}=this.props,a=[],r=(e,t)=>{a.push((0,c.jsx)(l.default,{marker:{isLive:!0,cluster:e,onLocationChanged:()=>this._handleLocationChanged(t),selected:n===t,onClick:e=>this.markerOnClick(e,t)}},t))};return e.forEach(r),t.forEach(r),a}getTrafficLayer(){return this.props.showTraffic?(0,c.jsx)(u.TrafficLayer,{autoRefresh:!0}):null}render(){return(0,c.jsxs)(u.GoogleMap,{ref:this.setMap,defaultCenter:this._getInitialCenter(),defaultOptions:this.props.getMapOptions(),defaultZoom:i.INITIAL_ZOOM,mapTypeId:this.props.mapType,onClick:this.mapOnClick,onDragStart:this._handleDragStart,onIdle:this.handleIdle,children:[this.getMarkers(),this.getTrafficLayer()]})}}p.displayName="LiveLocationMap";var h=(0,i.withConfig)((0,u.withScriptjs)((0,u.withGoogleMap)(p)));t.default=h},73098:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.MapType=t.MIN_ZOOM=t.INITIAL_ZOOM=void 0,t.withConfig=function(e){return class extends d.Component{constructor(){super(...arguments),this.state={authFailed:!0===window.gm_authFailed},this._onAuthFailed=()=>{window.gm_authFailed=!0,this.setState({authFailed:!0});const e=this._getUrl();__LOG__(4,void 0,new Error,!0)`url: ${e}\ntarget: ${"web"}`,SEND_LOGS("google-map-auth-failed")}}componentDidMount(){window.gm_authFailure=this._onAuthFailed}componentWillUnmount(){window.gm_authFailure=void 0}_getUrl(){const e={client:"gme-whatsappinc",v:"3",libraries:"geometry,drawing,places",t:Math.floor(Date.now()/864e5)};return o.default.build("https://maps.googleapis.com/maps/api/js",e)}getMapOptions(){return{clickableIcons:!1,fullscreenControl:!1,keyboardShortcuts:!1,mapTypeControl:!1,minZoom:3,streetViewControl:!1,zoomControl:!0,zoomControlOptions:{position:google.maps.ControlPosition.TOP_RIGHT}}}render(){if(this.state.authFailed)return(0,u.jsx)("div",{className:i.default.authFailed,children:s.fbt._("Failed to load Google Maps",null,{hk:"2k0Pgj"})});const t=this._getUrl(),n=(0,u.jsx)("div",{className:i.default.loading,children:(0,u.jsx)(l.Spinner,{color:"highlight"})}),a=(0,u.jsx)("div",{className:i.default.container}),o=(0,u.jsx)("div",{className:i.default.map});return(0,u.jsx)(e,(0,r.default)({googleMapURL:t,loadingElement:n,containerElement:a,mapElement:o,getMapOptions:this.getMapOptions},this.props))}}};var r=a(n(81109)),o=a(n(376139)),i=a(n(589332)),l=n(111054),s=n(548360),d=n(667294),u=n(785893);const c=n(76672)({ROADMAP:"roadmap",SATELLITE:"satellite",TERRAIN:"terrain"});t.MapType=c;t.INITIAL_ZOOM=15;t.MIN_ZOOM=3},48037:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(709903),o=a(n(792018)),i=a(n(768050)),l=a(n(757850)),s=a(n(502773)),d=n(184387),u=a(n(804478)),c=a(n(294184)),f=n(667294),p=n(833458),h=n(785893);class m extends f.Component{constructor(e){super(e),this._setOverlay=e=>{this.overlay=e},this._handleLocationChanged=()=>{this.props.marker.isLive&&this.props.marker.onLocationChanged()},this._handleLastUpdatedTimeChanged=()=>{if(!this.props.marker.isLive)return;null!=this.timeoutId&&(this.props.clearTimeout(this.timeoutId),this.timeoutId=null);const e=(0,r.isStale)(this.props.marker.cluster);this.state.stale!==e&&this.setState({stale:e}),e||this._setStaleTimeout()},this._getPixelPositionOffset=(e,t)=>({x:-e/2,y:-t}),this.state={stale:!e.marker.isLive||(0,r.isStale)(e.marker.cluster)}}_setStaleTimeout(){if(!this.props.marker.isLive)return;const{cluster:e}=this.props.marker,t=r.STALE_THRESHOLD-(0,r.getSmallestElapsedTime)(e);t<=0||(this.timeoutId=this.props.setTimeout((()=>this.setState({stale:!0})),1e3*t))}componentDidMount(){if(!this.props.marker.isLive)return;const{cluster:e}=this.props.marker;(0,r.isStale)(e)||this._setStaleTimeout();e.participants.forEach((e=>{this.props.listeners.add(e,"change:lat change:lng",this._handleLocationChanged),this.props.listeners.add(e,"change:lastUpdated",this._handleLastUpdatedTimeChanged)}))}_getMapPaneName(){return this.props.marker.onClick?p.OverlayView.OVERLAY_MOUSE_TARGET:p.OverlayView.OVERLAY_LAYER}render(){let e,t,n,a;const{onClick:d,selected:u}=this.props.marker,{stale:f}=this.state;if(this.props.marker.isLive){const{cluster:a}=this.props.marker;e=a.lat,t=a.lng,n=a.participants.map((e=>{let{id:t}=e;return t}))}else e=this.props.marker.lat,t=this.props.marker.lng,n=[this.props.marker.contact.id];if(u){let n,o,l;if(this.props.marker.isLive){const{cluster:e}=this.props.marker,t=e.participants,a=e.hasSingleParticipant()?t.at(0):null;a&&(n=a.id,o=a.accuracy,l=a.isMe)}else{const{contact:e}=this.props.marker;n=e.id,l=e.isMe}n&&(a=(0,h.jsx)(i.default,{id:n,lat:e,lng:t,accuracy:o,isMe:l||!1,markerSize:r.MARKER_SIZE}))}return(0,h.jsx)(p.OverlayView,{ref:this._setOverlay,position:{lat:e,lng:t},mapPaneName:this._getMapPaneName(),getPixelPositionOffset:this._getPixelPositionOffset,children:(0,h.jsx)(s.default.Provider,{value:this.context,children:(0,h.jsxs)("div",{className:(0,c.default)(o.default.container,{[o.default.selected]:u}),onClick:d,children:[a,(0,h.jsx)("div",{className:(0,c.default)(o.default.glow,{[o.default.stale]:f,[o.default.expired]:!this.props.marker.isLive}),style:{height:r.AVATAR_SIZE,width:r.AVATAR_SIZE,padding:r.GLOW_SIZE},children:(0,h.jsx)("div",{children:(0,h.jsx)(l.default,{ids:n,size:r.IMAGE_SIZE,border:!0,showCount:!0})})}),(0,h.jsx)("div",{className:(0,c.default)(o.default.pin,{[o.default.selected]:u}),style:{height:r.PIN_SIZE,width:r.PIN_SIZE,marginLeft:(r.MARKER_SIZE-r.PIN_SIZE)/2}})]})})})}}m.contextType=s.default,m.displayName="LiveLocationMarker";var g=(0,u.default)((0,d.ListenerHOC)(m));t.default=g},327766:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,u.jsx)(l.MenuBarItem,{testid:"live-location-map-menu",icon:(0,u.jsx)(s.default,{name:"menu"}),title:r.default.t(451),children:(0,u.jsxs)(o.Dropdown,{type:o.MenuType.DropdownMenu,flipOnRTL:!0,dirX:o.DirX.LEFT,dirY:o.DirY.BOTTOM,children:[(0,u.jsx)(i.DropdownItem,{testid:"mi-roadmap-view menu-item",action:e.onRoadmapSelected,children:d.fbt._("Map view",null,{hk:"2d2FOv"})}),(0,u.jsx)(i.DropdownItem,{testid:"mi-satellite-view menu-item",action:e.onSatelliteSelected,children:d.fbt._("Satellite view",null,{hk:"QnsuG"})}),(0,u.jsx)(i.DropdownItem,{testid:"mi-terrain-view menu-item",action:e.onTerrainSelected,children:d.fbt._("Terrain view",null,{hk:"3LpQsK"})}),(0,u.jsx)(i.DropdownItem,{testid:"mi-traffic menu-item",action:e.onTrafficToggled,children:e.showTraffic?d.fbt._("Hide traffic",null,{hk:"1GfpvE"}):d.fbt._("Show traffic",null,{hk:"21KWWk"})})]})})};var r=a(n(568064)),o=n(160811),i=n(471174),l=n(646346),s=a(n(23217)),d=n(548360),u=n(785893)},732213:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onParticipantSelected:t,onStopSharing:n,participants:a}=e,r=(0,h.default)((()=>new c.default)),i=(0,p.useMemo)((()=>a.map((e=>({itemKey:e.id.toString(),contentKey:e.valid?"valid":"invalid",participant:e})))),[a]);return(0,m.jsx)(u.default,{className:o.default.list,flatListControllers:[r.current],children:(0,m.jsx)(d.FlatList,{data:i,renderItem:e=>{let{participant:a}=e;return(0,m.jsx)(g,{participant:a,onStopSharing:n,onParticipantSelected:t})},flatListController:r.current,direction:"vertical"})})};var r=a(n(568064)),o=a(n(806304)),i=a(n(761804)),l=n(402732),s=a(n(451099)),d=n(747915),u=a(n(944942)),c=a(n(630855)),f=n(548360),p=n(667294),h=a(n(616223)),m=n(785893);function g(e){let{onParticipantSelected:t,onStopSharing:n,participant:a}=e;const d=a.valid?(0,m.jsx)(s.default,{reason:"live-location-time",children:(0,m.jsx)(i.default,{participant:a})}):r.default.t(419),u=a.valid?()=>t(a.contact.id.toString()):null,c=a.isMe?(0,m.jsx)("div",{onClick:n,className:o.default.stopSharingButton,children:f.fbt._("Stop Sharing",null,{hk:"14LWdj"})}):null;return(0,m.jsx)(l.Contact,{contact:a.contact,secondary:d,onClick:u,detail:c})}},768050:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{id:t,accuracy:n,isMe:a,markerSize:r,lat:o,lng:i}=e,[d,u]=(0,_.useState)(!1),[c,f]=(0,_.useState)(!1),v=()=>{d&&u(!1)},y=()=>{d||u(!0)},S=x.ContactCollection.assertGet(t),j=(0,b.jsx)("div",{className:s.default.name,children:(0,b.jsx)(p.Name,{ellipsify:!0,you:!0,contact:S})}),k=null!=n?(0,b.jsx)("div",{className:s.default.status,children:l.default.t(397,{accuracy:n,_plural:n})}):null,T=a?null:(0,b.jsx)("div",{onClick:e=>{const n=null==e?void 0:e.target;f({menu:E({id:t,lat:o,lng:i}),anchor:n})},className:s.default.menuButton,children:(0,b.jsx)(h.default,{name:"down"})}),w=(0,b.jsx)("div",{className:s.default.triangle}),D=!a&&c?(0,b.jsx)(m.UIE,{displayName:"LiveLocationPopupContextMenu",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:()=>{f(!1)},children:(0,b.jsx)(g.default,{contextMenu:c})}):null;return(0,b.jsxs)("div",{className:(0,C.default)(s.default.container,{[s.default.twoLines]:!!k}),style:{transform:`translateX(calc(-50% + ${r/2}px))`},children:[(0,b.jsxs)("div",{className:s.default.popup,onMouseOver:y,onMouseEnter:y,onMouseDown:v,onMouseUp:y,onMouseLeave:v,children:[j,k,T]}),w,D]})};var r=n(781572),o=n(141455),i=n(211739),l=a(n(568064)),s=a(n(22828)),d=n(872439),u=n(471174),c=n(912591),f=n(808384),p=n(812176),h=a(n(23217)),m=n(718644),g=a(n(624717)),v=n(188172),x=n(719380),C=a(n(294184)),y=n(548360),_=n(667294),b=n(785893);function E(e){let{id:t,lat:n,lng:a}=e;const l=[];return l.push((0,b.jsx)(u.DropdownItem,{testid:"get-directions",action:()=>{(0,c.openExternalLink)((0,f.getDirectionUrl)(n,a))},children:y.fbt._("Get directions",null,{hk:"MwnzW"})},"direction")),l.push((0,b.jsx)(u.DropdownItem,{testid:"send-message",action:()=>{(0,i.findChat)(t).then((e=>{e.active&&o.DrawerManager.existsDrawerRight((e=>{e&&2===d.Column.column&&o.DrawerManager.closeDrawerRight()})),r.Cmd.openChatFromUnread(e).then((t=>{t&&v.ComposeBoxActions.focus(e)}))}))},children:y.fbt._("Message",null,{hk:"mZ5DE"})},"message")),l}},86058:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.jsx)("div",{className:e.inactive?r.default.inactive:r.default.offline,onClick:e.onClick,children:(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:r.default.circle,children:(0,i.jsx)(o.default,{name:e.svgName})}),(0,i.jsx)("div",{className:r.default.text,children:e.text})]})})};var r=a(n(426658)),o=a(n(23217)),i=n(785893)},761804:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(568064)),o=n(548360),i=n(667294),l=a(n(970393)),s=n(587550),d=n(346428),u=n(785893);const c=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e;t&&(n+=59);const a=3600,r=Math.floor(n/a),o=n%a,i=Math.floor(o/60);return{hours:r,minutes:i}},f=e=>e.isMe?(e=>{const{hours:t,minutes:n}=c(e,!0);return t>0?n>0?r.default.t(405,{hours:t,minutes:n}):r.default.t(404,{hours:t,_plural:t}):r.default.t(406,{minutes:n,_plural:n})})(e.remainingTime()):(e=>{const{hours:t,minutes:n}=c(e);return t>0?n>0?r.default.t(415,{hours:t,minutes:n}):r.default.t(414,{hours:t,_plural:t}):n>0?r.default.t(416,{minutes:n,_plural:n}):o.fbt._("Updated just now",null,{hk:"29EIVi"})})(e.elapsedTime());var p=e=>{let{participant:t}=e;const[n,a]=(0,i.useState)((()=>f(t)));(0,s.useListener)(t,t.isMe?"change:expiration":"change:lastUpdated",(e=>a(f(e))));const[r,o]=(0,l.default)((()=>a(f(t))),6e4),[c]=(0,d.useManualTimeout)((()=>{a(f(t)),r()})),{expiration:p,lastUpdated:h}=t;return(0,i.useEffect)((()=>{const e=(e=>e.isMe?e.remainingTime():e.elapsedTime())(t)%60;o(),c(1e3*e)}),[p,h]),(0,u.jsx)("span",{children:n})};t.default=p},988501:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLatDiff=function(e){return r(e/n)},t.getLngDiff=function(e,t){const o=n*Math.cos(a(t));return r(e/o)},t.getMetersBetweenLatLngs=function(e,t,r,o){const i=a(r-e),l=a(o-t),s=Math.sin(i/2)*Math.sin(i/2)+Math.cos(a(e))*Math.cos(a(r))*Math.sin(l/2)*Math.sin(l/2),d=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));return n*d},t.getMetersPerPixel=function(e,t){return 156543.03392*Math.cos(e*Math.PI/180)*(1/2**t)};const n=6371e3;function a(e){return e*(Math.PI/180)}function r(e){return e*(180/Math.PI)}},431839:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(872758)),o=a(n(60453)),i=a(n(69637)),l=n(994790),s=n(548360),d=n(667294),u=n(785893);var c=(0,d.forwardRef)(((e,t)=>(0,u.jsxs)(o.default,{ref:t,children:[(0,u.jsx)(l.DrawerHeader,{testid:"drawer-title-auto-download",title:s.fbt._("Media Auto-Download",null,{hk:"2iFTSV"}),onBack:e.onClose,type:l.DRAWER_HEADER_TYPE.LARGE}),(0,u.jsx)(i.default,{children:(0,u.jsx)(r.default,{},"auto-download")})]})));t.default=c},822082:(e,t,n)=>{"use strict";var a=n(280366).default,r=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(81109)),i=r(n(348926)),l=r(n(145095)),s=n(257243),d=n(227101),u=n(970467),c=n(781572),f=r(n(568064)),p=n(468387),h=n(250852),m=n(694816),g=n(555452),v=n(978820),x=(n(711597),r(n(60453))),C=r(n(69637)),y=n(994790),_=r(n(970835)),b=r(n(833308)),E=n(751319),S=n(316593),j=r(n(23217)),k=n(950452),T=r(n(416866)),w=n(132826),D=n(719380),I=n(575861),M=n(548360),P=n(667294),A=r(n(156720)),O=n(587550),R=n(735461),L=n(785893);const N={drawerTitle:{paddingTop:"hc2u0oym",paddingEnd:"f9ovudaz",paddingBottom:"myel2vfb",paddingStart:"gx1rr48f"},chevronRightIcon:{color:"g4ti3y4y",height:"qgpfrw6h"},readReceiptsCheckBoxWrapper:{width:"jswlwoyz",display:"p357zi0d",justifyContent:"ac2vgrno"}};function F(e){const t=(0,E.getEphemeralityDurations)().find((t=>t.value===e));return void 0===t&&"number"==typeof e?(__LOG__(4,void 0,new Error,!0)`Could not find matching duration label for duration: "${e}"`,SEND_LOGS("No matching duration label"),M.fbt._("On",null,{hk:"1HkDTU"})):void 0===t?M.fbt._("Off",null,{hk:"1ueKlZ"}):t.label}function B(e,t){var n,r,o,h;const[E,j]=(0,P.useState)((()=>H((0,g.getUserPrivacySettings)()))),[B,q]=(0,P.useState)({status:null,groupadd:null,last:null,profile:null}),W=(0,l.default)(D.ContactCollection.get((0,v.getMaybeMeUser)()),"ContactCollection.get(getMaybeMeUser())"),V=(0,R.useModelValues)(W,["disappearingModeDuration"]).disappearingModeDuration;function Y(e){const t=H(e.privacySettings);if(null==t)throw new Error(`Incomplete privacy settings: ${Object.keys((0,g.getUserPrivacySettings)()).join(", ")}`);j(t),q((0,I.disallowedRowsToLists)(e.privacyDisallowedRows))}(0,P.useEffect)((()=>{const t=new a;return null==E&&(0,i.default)((function*(){try{const e=yield(0,u.updatePrivacySettings)();if(t.signal.aborted)return;Y(e)}catch(t){__LOG__(4,void 0,new Error,!0)`privacy_settings_drawer: get privacy settings failed ${t.stack}`,SEND_LOGS("privacy_settings_drawer: get privacy settings failed"),e.onClose(),m.ToastManager.open((0,L.jsx)(k.Toast,{id:(0,k.genId)(),msg:M.fbt._("Failed to get privacy settings, please try again.",null,{hk:"2UOq9J"})}))}}))(),()=>t.abort()}),[]),(0,P.useEffect)((()=>{const e=new a;return(0,i.default)((function*(){const t=yield(0,I.queryDisallowedLists)();e.signal.aborted||q(t)}))(),()=>e.abort()}),[]),(0,O.useListener)(c.Cmd,"account_sync_for_privacy",(e=>{Y(e)}));const K=M.fbt._("Privacy",null,{hk:"WHXuP"});if(!E)return(0,L.jsx)(T.default,{title:K,error:!1});const X=(0,d.isDefaultDisappearingMessagesEnabled)(),Q=(0,d.isOnlinePresenceEnabled)(),{lastSeen:J,online:$,profilePicture:Z,about:ee,groupAdd:te,readReceipts:ne}=E,ae=G(J,null===(n=B.last)||void 0===n?void 0:n.disallowedList.length);let re=(0,L.jsx)(U,{title:M.fbt._("Last seen",null,{hk:"4GuTlB"}),onClick:()=>{e.onOpenVisibilityEditDrawer("lastSeen")},children:(0,L.jsx)("span",{children:ae})});if(Q){const t=[ae];if(J!==p.VISIBILITY.all&&$===p.ONLINE_VISIBILITY.all){t.push(f.default.t(254));const e=G($);t.push(e)}re=(0,L.jsx)(U,{title:M.fbt._("Last seen and online",null,{hk:"3yVQIJ"}),onClick:()=>{e.onOpenVisibilityEditDrawer("lastSeen")},children:(0,L.jsxs)("span",{children:[" ",t.join("")]})})}return(0,L.jsxs)(x.default,{ref:t,theme:"striped",testid:"privacy-settings-drawer",children:[(0,L.jsx)(y.DrawerHeader,{testid:"drawer-title-privacy",title:K,onBack:e.onClose,type:y.DRAWER_HEADER_TYPE.LARGE}),(0,L.jsxs)(C.default,{children:[(0,L.jsxs)(b.default,{title:M.fbt._("Who can see my personal info",null,{hk:"2dUwwx"}),titleXStyle:N.drawerTitle,theme:"padding-no-vertical",animation:!1,ellipsify:!1,children:[re,(0,L.jsx)(U,{title:M.fbt._("Profile photo",null,{hk:"rs5RE"}),onClick:()=>{e.onOpenVisibilityEditDrawer("profilePicture")},children:(0,L.jsx)("span",{children:G(Z,null===(r=B.profile)||void 0===r?void 0:r.disallowedList.length)})}),(0,L.jsx)(U,{title:M.fbt._("About",null,{hk:"3PhlvU"}),onClick:()=>{e.onOpenVisibilityEditDrawer("about")},children:(0,L.jsx)("span",{children:G(ee,null===(o=B.status)||void 0===o?void 0:o.disallowedList.length)})}),(0,L.jsx)(_.default,{title:M.fbt._("Read receipts",null,{hk:"4p0OAK"}),icon:(0,L.jsx)("div",{className:(0,A.default)(N.readReceiptsCheckBoxWrapper),children:(0,L.jsx)(S.CheckBox,{checked:ne===p.ALL_NONE.all,onChange:()=>{}})}),theme:"privacy",isLastItem:!0,onClick:()=>{!function(){z.apply(this,arguments)}(E,j,ne)},children:(0,L.jsx)("span",{children:M.fbt._("If turned off, you won't send or receive Read receipts. Read receipts are always sent for group chats.",null,{hk:"1N51oN"})})})]}),X&&(0,L.jsx)(b.default,{theme:"padding-no-vertical",title:M.fbt._("Disappearing messages",null,{hk:"1u7uAT"}),titleXStyle:N.drawerTitle,animation:!1,children:(0,L.jsx)(U,{title:M.fbt._("Default message timer",null,{hk:"2tVUXb"}),onClick:e.onOpenEphemeralityDrawer,isLastItem:!0,testid:"ddm-settings-item",children:(0,L.jsx)("span",{"data-testid":"ddm-settings-item-value",children:F(V)})})}),(0,L.jsxs)(b.default,{theme:X?"padding":"padding-no-vertical",animation:!1,children:[(0,L.jsx)(U,{title:M.fbt._("Groups",null,{hk:"3ajQWI"}),onClick:()=>{e.onOpenVisibilityEditDrawer("groupAdd")},children:(0,L.jsx)("span",{children:G(te,null===(h=B.groupadd)||void 0===h?void 0:h.disallowedList.length)})}),(0,L.jsx)(U,{title:M.fbt._("Blocked contacts",null,{hk:"YxQ5T"}),isLastItem:!(0,s.getABPropConfigValue)("web_abprop_screen_lock_enabled"),onClick:e.onOpenBlockedContacts,children:(0,L.jsx)("span",{children:0===w.BlocklistCollection.length?M.fbt._("None",null,{hk:"3cviAo"}):w.BlocklistCollection.length})}),null]})]})]})}function U(e){let{title:t,onClick:n,isLastItem:a,children:r,testid:o}=e;return(0,L.jsx)(_.default,{title:t,theme:"privacy",icon:(0,L.jsx)(j.default,{name:f.default.isRTL()?"chevron-left":"chevron-right",iconXstyle:N.chevronRightIcon}),onClick:n,isLastItem:a,testid:o,children:r})}function H(e){const{about:t,groupAdd:n,lastSeen:a,online:r="all",profilePicture:o,readReceipts:i}=e;if(null!=t&&null!=n&&null!=a&&null!=o&&null!=i)return{about:t,groupAdd:n,lastSeen:a,online:r,profilePicture:o,readReceipts:i}}function G(e,t){switch(e){case p.VISIBILITY.all:return M.fbt._("Everyone",null,{hk:"3oWv8q"});case p.VISIBILITY.contacts:return M.fbt._("My contacts",null,{hk:"3jgOvC"});case p.VISIBILITY.contact_blacklist:return null==t?"":f.default.t(542,{count:t,_plural:t});case p.VISIBILITY.none:return M.fbt._("Nobody",null,{hk:"ghOKj"});case p.ONLINE_VISIBILITY.match_last_seen:return M.fbt._("Same as last seen",null,{hk:"myQFo"});default:return""}}function z(){return(z=(0,i.default)((function*(e,t,n){const a=n===p.ALL_NONE.all?p.ALL_NONE.none:p.ALL_NONE.all;t((0,o.default)((0,o.default)({},e),{},{readReceipts:a}));try{a===p.ALL_NONE.none?yield(0,h.setPrivacyForOneCategory)({name:"readreceipts",value:"none"}):yield(0,h.setPrivacyForOneCategory)({name:"readreceipts",value:"all"})}catch(e){__LOG__(3,void 0,void 0,!0)`privacy_settings_drawer: set readreceipts failed ${e.stack}`,SEND_LOGS("privacy_settings_drawer: set readreceipts failed"),m.ToastManager.open((0,L.jsx)(k.Toast,{id:(0,k.genId)(),msg:M.fbt._("Failed to update Read receipts, please try again.",null,{hk:"3xUfMr"})}))}}))).apply(this,arguments)}var q=(0,P.forwardRef)(B);t.default=q},330097:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(348926)),o=n(492574),i=n(914597),l=n(468387),s=n(250852),d=n(694816),u=n(555452),c=a(n(60453)),f=a(n(69637)),p=n(994790),h=a(n(833308)),m=a(n(870544)),g=n(950452),v=a(n(768706)),x=n(548360),C=n(667294),y=a(n(156720)),_=n(785893);const b={height:"jdwybkuq",borderBottom:"k8viy54k"},E={marginTop:"c46o30wg",marginEnd:"jnwc1y2a",marginBottom:"du8bjn1j",marginStart:"svoq16ka",fontSize:"enbbiyaj",color:"jq3rn4u7",lineHeight:"r5qsrrlp"},S={marginTop:"qlylaf53",marginEnd:"jnwc1y2a",marginBottom:"fhelu9n7",marginStart:"svoq16ka",fontSize:"lak21jic",color:"pm5hny62"};function j(){d.ToastManager.open((0,_.jsx)(g.Toast,{id:(0,g.genId)(),msg:x.fbt._("Failed to update privacy settings. Please try again.",null,{hk:"h89q3"})}))}function k(e,t){var n,a;let{onClose:d}=e;const g=(0,u.getUserPrivacySettings)(),[k,T]=(0,C.useState)(null!==(n=g.lastSeen)&&void 0!==n?n:l.VISIBILITY.all),[w,D]=(0,C.useState)(null!==(a=g.online)&&void 0!==a?a:l.ONLINE_VISIBILITY.all);function I(){return M.apply(this,arguments)}function M(){return(M=(0,r.default)((function*(e){if(e===w)return;D(e);const t=(0,s.privacyWebNameToServerName)("online");if("online"!==t)throw new Error("privacy_settings_last_seen_online_drawer: category can only be online");try{switch(e){case l.ONLINE_VISIBILITY.match_last_seen:return void(yield(0,s.setPrivacyForOneCategory)({name:t,value:"match_last_seen"}));case l.VISIBILITY.all:yield(0,s.setPrivacyForOneCategory)({name:t,value:"all"})}}catch(e){D(k);e instanceof o.ServerStatusCodeError&&409===e.statusCode||(__LOG__(3,void 0,void 0,!0)`visibility_edit_drawer: set visiblity option failed ${e.stack}`,SEND_LOGS("visibility_edit_drawer: set visiblity option failed")),j()}}))).apply(this,arguments)}function P(){return A.apply(this,arguments)}function A(){return(A=(0,r.default)((function*(e){if(e===k)return;T(e);const t=(0,s.privacyWebNameToServerName)("lastSeen");if("last"!==t)throw new Error("privacy_settings_last_seen_online_drawer: category can be only last");try{switch(e){case l.VISIBILITY.none:if("groupadd"===t)throw new Error("privacy_settings_last_seen_online_drawer: groupadd can not be none");return void(yield(0,s.setPrivacyForOneCategory)({name:t,value:"none"}));case l.VISIBILITY.contacts:return void(yield(0,s.setPrivacyForOneCategory)({name:t,value:"contacts"}));case l.VISIBILITY.all:yield(0,s.setPrivacyForOneCategory)({name:t,value:"all"})}}catch(e){T(k);e instanceof o.ServerStatusCodeError&&409===e.statusCode||(__LOG__(3,void 0,void 0,!0)`visibility_edit_drawer: set visiblity option failed ${e.stack}`,SEND_LOGS("visibility_edit_drawer: set visiblity option failed")),j()}}))).apply(this,arguments)}return(0,_.jsxs)(c.default,{ref:t,children:[(0,_.jsx)(p.DrawerHeader,{testid:"drawer-title",title:x.fbt._("Last seen and online",null,{hk:"3yVQIJ"}),onBack:d,type:p.DRAWER_HEADER_TYPE.LARGE}),(0,_.jsx)(f.default,{children:(0,_.jsxs)(h.default,{theme:"padding-no-vertical",animation:!1,children:[(0,_.jsx)("div",{className:(0,y.default)(E),children:x.fbt._("Who can see my last seen",null,{hk:"3BoIqk"})}),(0,_.jsxs)("div",{children:[(0,_.jsx)(m.default,{text:x.fbt._("Everyone",null,{hk:"3oWv8q"}),selected:k===l.VISIBILITY.all,onClick:()=>{P(l.VISIBILITY.all)}}),(0,_.jsx)(m.default,{text:x.fbt._("My contacts",null,{hk:"3jgOvC"}),selected:k===l.VISIBILITY.contacts,onClick:()=>{P(l.VISIBILITY.contacts)}}),(0,_.jsx)(m.default,{text:x.fbt._("My contacts except...",null,{hk:"2tCWPL"}),selected:k===l.VISIBILITY.contact_blacklist,onClick:()=>{i.ModalManager.open((0,_.jsx)(v.default,{category:"lastSeen",onConfirm:()=>{P(l.VISIBILITY.contact_blacklist)}}))}}),(0,_.jsx)(m.default,{text:x.fbt._("Nobody",null,{hk:"ghOKj"}),selected:k===l.VISIBILITY.none,onClick:()=>{P(l.VISIBILITY.none)}})]}),(0,_.jsx)("div",{className:(0,y.default)(b)}),(0,_.jsx)("div",{className:(0,y.default)(E),children:x.fbt._("Who can see when I'm online",null,{hk:"gA4QG"})}),(0,_.jsxs)("div",{children:[(0,_.jsx)(m.default,{text:x.fbt._("Everyone",null,{hk:"3oWv8q"}),selected:w===l.ONLINE_VISIBILITY.all,onClick:()=>{I(l.ONLINE_VISIBILITY.all)}}),(0,_.jsx)(m.default,{text:x.fbt._("Same as last seen",null,{hk:"myQFo"}),selected:w===l.ONLINE_VISIBILITY.match_last_seen,onClick:()=>{I(l.ONLINE_VISIBILITY.match_last_seen)}})]}),(0,_.jsx)("div",{className:(0,y.default)(S),children:x.fbt._("If you don't share your {=m1} and {=m4}, you won't be able to see other people's last seen and online.",[x.fbt._implicitParam("=m1",(0,_.jsx)("strong",{children:x.fbt._("last seen",null,{hk:"3Wj3z9"})})),x.fbt._implicitParam("=m4",(0,_.jsx)("strong",{children:x.fbt._("online",null,{hk:"1OygwI"})}))],{hk:"4wjT6"})})]})})]})}var T=(0,C.forwardRef)(k);t.default=T},530579:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const[t,n]=(0,W.useState)(),[a,r]=(0,W.useState)(),[o,i]=(0,W.useState)(),[s,c]=(0,V.useFlow)(J.Profile,{onEnd:e.onClose});if(null==c.step)return null;let f;switch(c.step){case J.Profile:f=(0,Q.jsx)(ie,{openMerchantDetailsForm:()=>{c.push(J.MerchantDetails)},openCatalogDetailsForm:e=>{(0,l.canManageCollections)()&&u.QPL.markerStart(d.QuickLogMarkerId.WHATSAPP_CATALOG_COLLECTIONS_VIEW,{annotations:{string:{EntryPoint:"Profile"}}}),(0,B.createCatalogManagementFlowObject)(((t,a)=>{n(t),r(a),i(e),c.push(J.CatalogManagement)}))},conn:e.conn,contact:e.contact,profilePicThumb:e.profilePicThumb,status:e.status,onClose:()=>c.pop()});break;case J.MerchantDetails:const s=(0,p.getMeUser)();f=(0,Q.jsx)(U.MerchantDetailsFormFlowLoadable,{contactId:s,onBack:()=>c.pop()});break;case J.CatalogManagement:if(!t)return null;f=(0,Q.jsx)(B.CatalogManagementFlowLoadable,{catalog:a,catalogId:t,product:o,onBack:()=>c.pop()})}return(0,Q.jsx)(s,{flow:c,children:f})};var r=a(n(364369)),o=n(141455),i=a(n(568064)),l=n(408139),s=n(914597),d=n(665397),u=n(669393),c=n(335873),f=n(994059),p=n(978820),h=a(n(471410)),m=n(562054),g=a(n(235580)),v=a(n(452665)),x=a(n(60453)),C=a(n(69637)),y=n(427394),_=n(994790),b=a(n(833308)),E=a(n(235456)),S=a(n(786791)),j=a(n(724697)),k=a(n(744281)),T=n(584287),w=n(397567),D=a(n(987728)),I=n(409153),M=a(n(39770)),P=n(552596),A=n(429623),O=a(n(748846)),R=a(n(23217)),L=n(113923),N=n(990011),F=a(n(513699)),B=n(87912),U=n(492557),H=n(794010),G=n(599989),z=n(317239),q=n(548360),W=n(667294),V=(a(n(156720)),n(159083)),Y=n(735461),K=a(n(895402)),X=a(n(803409)),Q=n(785893);const J=n(76672).Mirrored(["Profile","MerchantDetails","CatalogManagement"]);const $=e=>{const{businessProfile:t,catalog:n,openCatalogDetailsForm:a}=e;return(0,l.bannedShopsEnabled)()&&(0,H.hasShop)(t)&&(0,H.isShopBanned)(t)?(0,Q.jsx)(b.default,{theme:"padding-large",children:(0,Q.jsxs)("div",{className:E.default.content,children:[(0,Q.jsx)("div",{className:E.default.bannedShopInfoText,children:q.fbt._("This shop has been disabled for not complying with our Business or Commerce policies.",null,{hk:"39dpXJ"})}),(0,Q.jsx)(M.default,{type:"primary",onClick:function(){(0,l.bannedShopsEnabled)()&&(0,H.goToCommerceManager)(t)},children:q.fbt._("Commerce Manager",null,{hk:"2ZKedl"})})]})}):(0,Q.jsx)(D.default,{businessProfile:t,catalog:n,openCatalog:a})},Z=e=>{const{unmountSignal:t,aboutInput:n}=e,a=(0,W.useRef)(!1),o=(0,Y.useModelValues)(e.conn,["pushname"]),[l,d]=(0,W.useState)(o.pushname),[u,f]=(0,W.useState)(!1),p=a.current||u?l:o.pushname,h=z.Conn.isSMB?q.fbt._("This is your business name. It will be visible to your WhatsApp customers.",null,{hk:"AABda"}):i.default.t(547),m=(0,Q.jsx)(b.default,{testid:"col-main-profile",title:q.fbt._("About",null,{hk:"7nIJP"}),theme:"padding",children:n});return(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(b.default,{testid:"col-main-profile",title:q.fbt._("Your name",null,{hk:"VtujB"}),theme:"padding",children:(0,Q.jsx)(N.TextInput,{testid:"col-main-profile-input",value:p,editable:z.Conn.canSetMyPushname(),pending:u,showRemaining:!0,validate:()=>{let e,t=l;return t=(t||"").trim(),t?/[\u2714\u2705\u2611]/g.test(t)&&(e=q.fbt._("That emoji isn't allowed in your name",null,{hk:"1JrVVd"})):e=i.default.t(111),!e||(n=e,s.ModalManager.open((0,Q.jsx)(v.default,{onOK:()=>s.ModalManager.close(),okText:q.fbt._("OK",null,{hk:"2KEeHb"}),children:n})),!1);var n},maxLength:r.default.MAX_PUSHNAME_LENGTH,onBeginEdit:()=>{a.current=!0},onChange:e=>{d(e)},onSave:()=>{if(a.current=!1,!z.Conn.canSetMyPushname())return;let e=l;e=(0,F.default)((e||"").trim());e!==o.pushname&&(f(!0),(0,c.setPushname)(e).then((()=>{t.aborted||f(!1)})))},onCancel:()=>{a.current=!1,d(o.pushname)},supportsEmoji:!0,lockable:!0,lowProfile:!0,constrainedWidth:!0})}),(0,Q.jsx)("div",{"data-testid":"pushname-description",className:E.default.nameWrapper,children:(0,Q.jsx)(L.TextSpan,{theme:"muted",children:h})}),m]})},ee=e=>{const{contact:t,openMerchantDetailsForm:n,businessProfile:a,openCatalogDetailsForm:r,catalog:o,aboutInput:i}=e,s=(0,Q.jsx)(T.IconSection,{icon:"info",content:i}),d=(0,Q.jsx)(T.IconSection,{icon:"call-phone",iconClass:E.default.phoneIcon,content:(0,Q.jsxs)("div",{children:[(0,Q.jsx)(P.SelectableDiv,{className:E.default.phoneField,selectable:!0,children:(0,m.widToFormattedUser)((0,p.assertGetMe)())}),(0,Q.jsx)("div",{className:E.default.infoText,children:q.fbt._("Your phone number can be edited from the app on your mobile device.",null,{hk:"2FXNXR"})})]})}),u=(0,Q.jsxs)(b.default,{title:q.fbt._("About and Phone Number",null,{hk:"3lw6jL"}),theme:"refresh",children:[s,d]});return(0,Q.jsxs)("div",{children:[(0,Q.jsx)(k.default,{}),(0,l.canSeeECommerceComplianceIndiaSoftEnforcement)(t.id.user)&&(0,Q.jsx)(re,{onTitleClick:n}),(0,l.blockCatalogCreationECommerceComplianceIndia)(t.businessProfile)?null:(0,Q.jsx)($,{businessProfile:a,openCatalogDetailsForm:r,catalog:o}),(0,Q.jsx)(oe,{contact:t}),u]})},te={businessComplianceIconWrapper:{paddingEnd:"htg54gjl",color:"s4k44ver"},businessComplianceText:{flexGrow:"ggj6brxn",color:"tviruh8d"},businessComplianceRightAltIcon:{color:"cs9t9or5"}};function ne(e){let{contact:t,profilePicThumb:n}=e;const a=t.businessProfile?(0,Q.jsx)(j.default,{contact:t,businessProfile:t.businessProfile,editable:!0,profilePicThumb:n,hideStatusV3:!0}):null;return(0,Q.jsx)(b.default,{theme:"padding-no-margin",children:a})}function ae(e){let{profilePicThumb:t}=e;return(0,Q.jsx)("div",{className:E.default.photoPickerWrapper,children:(0,Q.jsx)(S.default,{profilePicThumb:t})})}function re(e){let{onTitleClick:t}=e;return(0,Q.jsx)(b.default,{title:(0,Q.jsxs)(A.FlexRow,{align:"center",children:[(0,Q.jsx)(O.default,{xstyle:te.businessComplianceIconWrapper,children:(0,Q.jsx)(R.default,{name:"business"})}),(0,Q.jsx)(O.default,{xstyle:te.businessComplianceText,children:q.fbt._("Business details",null,{hk:"m9xzp"})}),(0,Q.jsx)(O.default,{children:(0,Q.jsx)(R.default,{xstyle:te.businessComplianceRightAltIcon,name:"chevron-right-alt",directional:!0})})]}),theme:"refresh-padding-title",titleOnClick:t})}function oe(e){let{contact:t}=e;return(0,l.bizLinkedAccountsEnabled)()&&t.businessProfile?(0,Q.jsx)(g.default,{businessProfile:t.businessProfile,sectionTheme:"refresh-padding-title",showEditHint:!0}):null}const ie=(0,W.forwardRef)(((e,t)=>{const{onClose:n,openCatalogDetailsForm:a,openMerchantDetailsForm:r}=e,d=(0,K.default)(),u=(0,Y.useModelValues)(e.status,["status"]),[c,m]=(0,W.useState)(u.status),[g,b]=(0,W.useState)(!1),E=(0,W.useRef)(!1),S=(0,W.useContext)(y.DrawerContext),j=(0,X.default)(),k=(0,Y.useModelValues)(e.contact,["businessProfile","id","statusMute"]),T=(0,Y.useModelValues)(e.profilePicThumb,["imgFull","id"]),[D,M]=(0,W.useState)(null),{businessProfile:P}=k,{session:A}=z.Conn.isSMB?(0,w.getProductCatalogContext)(S):{};if((0,W.useEffect)((()=>{z.Conn.isSMB&&(G.CatalogCollection.findCarouselCatalog((0,p.getMeUser)()).then((e=>{const t=Array.isArray(e)?e[0]:e;M(t)})).catch((()=>{})),(null==A?void 0:A.isAccidental())&&o.DrawerManager.setDrawerContext("left",(0,w.buildProductCatalogContext)(new I.ProductCatalogSession,h.default.BIZ_PLATFORM.SMB,h.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS)))}),[]),z.Conn.isSMB&&(null==A?void 0:A.isAccidental()))return null;const O=()=>{E.current=!1,m(u.status)},R=E.current||g?c:u.status,L=(0,Q.jsx)(N.TextInput,{testid:"col-main-profile-input",value:R,editable:!0,pending:g,showRemaining:!0,validate:e=>!!(e||"").trim(),maxLength:139,onBeginEdit:()=>{E.current=!0},onChange:e=>{m(e)},onSave:()=>{if(null==c)return void O();E.current=!1;const e=u.status;(0,F.default)(c)!==e&&(b(!0),(0,f.setMyStatus)((0,F.default)(c)).then((()=>{j.aborted||b(!1)})))},onError:()=>{s.ModalManager.open((0,Q.jsx)(v.default,{onOK:()=>s.ModalManager.close(),okText:q.fbt._("OK",null,{hk:"2KEeHb"}),children:i.default.t(118)}))},onCancel:O,theme:"text-input",fieldName:q.fbt._("About",null,{hk:"2FinUX"}),supportsEmoji:!0,lockable:!0,lowProfile:!0,constrainedWidth:!0}),B=(0,l.canSeeBizProfileV3)()&&z.Conn.isSMB?(0,Q.jsx)(ne,{contact:k,profilePicThumb:T}):(0,Q.jsx)(ae,{profilePicThumb:T}),U=z.Conn.isSMB?(0,Q.jsx)(ee,{contact:k,openMerchantDetailsForm:r,businessProfile:P,openCatalogDetailsForm:a,catalog:D,aboutInput:L}):(0,Q.jsx)(Z,{conn:e.conn,aboutInput:L,unmountSignal:j}),H=i.default.t(447);return(0,Q.jsxs)(x.default,{ref:t,children:[(0,Q.jsx)(_.DrawerHeader,{testid:"drawer-title-profile",title:H,onBack:()=>{n?n():null==d||d.requestDismiss()},type:_.DRAWER_HEADER_TYPE.LARGE,focusBackOrCancel:!0}),(0,Q.jsxs)(C.default,{children:[B,U]})]})}))},625421:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.jsx)(r.default,{primary:e.choiceText,onClick:e.onChoose,theme:"radio-button-row",image:(0,i.jsx)(o.default,{checked:e.isChosen,hover:!1,radio:!0,onChange:e.onChoose,systemUncheckedColor:!0})})};var r=a(n(744356)),o=a(n(309275)),i=n(785893)},285553:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(257243),o=n(227101),i=n(221310),l=a(n(568064)),s=n(128298),d=n(555452),u=a(n(60453)),c=a(n(69637)),f=n(994790),p=a(n(833308)),h=n(316593),m=n(912591),g=n(429623),v=a(n(748846)),x=n(662657),C=n(33210),y=a(n(23217)),_=n(113923),b=n(548360),E=n(667294),S=a(n(156720)),j=a(n(627698)),k=n(785893);const T={icon:{position:"g0rxnol2",boxSizing:"cm280p3y",width:"cnprk2g9",height:"j74n1y92",paddingTop:"n1yiu2zv",marginTop:"tt8xd2xn",marginEnd:"k1jo73ug",marginBottom:"mpdn4nr2",marginStart:"isfiuinm",color:"t63vcusb",backgroundColor:"je90h8md",borderTopStartRadius:"g9p5wyxn",borderTopEndRadius:"i0tg5vk9",borderBottomEndRadius:"aoogvgrq",borderBottomStartRadius:"o2zu3hjb"},iconLock:{position:"lhggkp7q",start:"tkdu00h0",end:"ebjesfe0",top:"qq0sjtgm",bottom:"lrw9n60e",color:"ml33x45x"},controls:{paddingBottom:"sq87qsu4",marginTop:"ignnouf6"},e2eSummaryContainer:{borderBottom:"daad4uqs"},text:{marginTop:"csxx893n",fontSize:"enbbiyaj",lineHeight:"pvbam5uh"},checkbox:{flex:"kk3akd72",paddingEnd:"k3h23tga"}};function w(){return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(g.FlexColumn,{xstyle:T.icon,align:"center",justify:"center",children:[(0,k.jsx)(v.default,{children:(0,k.jsx)(y.default,{name:"security-shield"})}),(0,k.jsx)(g.FlexColumn,{xstyle:T.iconLock,align:"center",justify:"center",children:(0,k.jsx)(v.default,{children:(0,k.jsx)(y.default,{name:"security-lock"})})})]}),(0,k.jsxs)("div",{className:(0,S.default)(T.text),children:[b.fbt._("Messages and calls in end-to-end encrypted chats stay between you and the people you choose. Not even WhatsApp can read or listen to them.",null,{hk:"1MCVPM"})," ",(0,k.jsx)(m.ExternalLink,{href:(0,C.securityUrl)(),children:l.default.t(394)})]})]})}function D(e,t){const[n,a]=(0,j.default)(d.getGlobalSecurityNotifications,d.setGlobalSecurityNotifications);let C=b.fbt._("Get notified when your security code changes for a contact in an end-to-end encrypted chat. If you have multiple devices, this setting must be enabled on each device where you want to get notifications.",null,{hk:"1ByD6u"});return(0,r.getABPropConfigValue)("adv_v2_m6")&&(C=b.fbt._("Get notified when your security code changes for a contact’s phone. If you have multiple devices, this setting must be enabled on each device where you want to get notifications.",null,{hk:"JvjfY"})),(0,k.jsxs)(u.default,{ref:t,children:[(0,k.jsx)(f.DrawerHeader,{testid:"drawer-title-security",title:b.fbt._("Security",null,{hk:"2nir1E"}),onBack:e.onClose,type:f.DRAWER_HEADER_TYPE.LARGE}),(0,k.jsx)(c.default,{children:(0,k.jsxs)(p.default,{theme:"padding-large",animation:!1,children:[(0,o.isPrivacyNarrativeV1Enabled)()?(0,k.jsx)("div",{className:(0,S.default)(T.e2eSummaryContainer,s.uiPadding.bottom20),children:(0,k.jsx)(x.E2eSummarySecurityDrawer,{})}):(0,k.jsx)(w,{}),(0,k.jsxs)(g.FlexRow,{xstyle:T.controls,children:[(0,k.jsx)("div",{className:(0,S.default)(T.checkbox,s.uiMargin.top2),children:(0,k.jsx)(h.CheckBox,{onChange:a,checked:n})}),(0,k.jsxs)(v.default,{children:[(0,k.jsx)("div",{className:(0,S.default)(s.uiMargin.bottom10),children:(0,k.jsx)(_.TextSpan,{theme:"title",children:b.fbt._("Show security notifications on this computer",null,{hk:"3QRZVR"})})}),(0,k.jsxs)(_.TextDiv,{theme:"muted",children:[C," ",(0,k.jsx)(m.ExternalLink,{href:(0,i.getCodeChangeFaqUrl)(),children:l.default.t(394)})]})]})]})]})})]})}var I=(0,E.forwardRef)(D);t.default=I},439524:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,p.jsx)(d.SelectModal,{onConfirm:t=>{const n=e.msgText;if(1===t.length){let a;const l=t[0];a=l.isUser&&l.contact.isBlocked()?(0,o.unblockContact)(l.contact):Promise.resolve(!0),a.then(function(){var t=(0,r.default)((function*(){if(n){if(l.urlText=e.urlText,l.active)return void u.ComposeBoxActions.paste(l,n);l.setComposeContents({text:n})}(yield i.Cmd.openChatFromUnread(l))&&u.ComposeBoxActions.focus(l)}));return function(){return t.apply(this,arguments)}}())}else Promise.all(t.map((t=>{let a;a=t.isUser&&t.contact.isBlocked()?(0,o.unblockContact)(t.contact):Promise.resolve(!0),a.then((()=>{t.urlText=e.urlText,(0,s.sendTextMsgToChat)(t,n)}))}))),i.Cmd.openChatFromUnread(t[0]);l.ModalManager.close()},maxItems:c.ServerProps.multicastLimitGlobal,title:f.fbt._("Send message to",null,{hk:"2kkuQs"}),listType:d.ListType.CHAT_SELECT_MODAL})};var r=a(n(348926)),o=n(48826),i=n(781572),l=n(914597),s=n(781845),d=n(756728),u=n(188172),c=n(964551),f=n(548360),p=n(785893)},726:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onOK:t}=e,n=e.name||s.fbt._("Contact",null,{hk:"xBh6i"}),a=r.default.t(598,{name:n});return(0,d.jsx)(i.default,{onOK:()=>{o.ModalManager.close(),t()},okText:s.fbt._("OK",null,{hk:"2KEeHb"}),children:(0,d.jsx)("div",{children:(0,d.jsx)(l.EmojiText,{text:a})})})};var r=a(n(568064)),o=n(914597),i=a(n(452665)),l=n(965417),s=n(548360),d=n(785893)},774265:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(81109)),o=a(n(506479)),i=a(n(568064)),l=n(978820),s=a(n(60453)),d=a(n(69637)),u=a(n(464738)),c=n(994790),f=a(n(273561)),p=a(n(744356)),h=n(288984),m=n(965417),g=n(317239),v=n(667294),x=n(785893);const C=["items"],y=["key"];function _(e,t){let{items:n}=e,a=(0,o.default)(e,C);const v=(0,x.jsx)(f.default,{id:a.profileId}),_=(0,x.jsx)(h.DetailImage,{id:(0,l.getMaybeMeUser)(),size:82,quality:h.DetailImageQuality.High}),b=(0,x.jsx)(m.EmojiText,{text:g.Conn.pushname,ellipsify:!0,titlify:!0});return(0,x.jsxs)(s.default,{ref:t,theme:"settings",testid:"settings-drawer",children:[(0,x.jsx)(c.DrawerHeader,{title:i.default.t(600),onBack:a.onClose,type:c.DRAWER_HEADER_TYPE.LARGE}),(0,x.jsxs)(d.default,{children:[(0,x.jsx)(p.default,{onClick:a.onProfile,image:_,primary:b,theme:"identity",secondary:v}),n.map((e=>{let{key:t}=e,n=(0,o.default)(e,y);return(0,x.jsx)(u.default,(0,r.default)({theme:"settings-drawer"},n),t)}))]})]})}var b=(0,v.forwardRef)(_);t.default=b},350517:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(652294),o=a(n(225653)),i=a(n(320606)),l=n(685600),s=n(646346),d=a(n(23217)),u=n(548360),c=n(667294),f=n(785893);function p(e){const{starredMsgs:t,onClose:n,chat:a}=e,c=u.fbt._("Starred messages",null,{hk:"kjDwF"}),p=(0,f.jsx)(l.StarredMsgs,{}),h=null!=a?(0,f.jsx)(r.HistorySyncChatStarredMsgsPlaceholderText,{}):(0,f.jsx)(r.HistorySyncStarredMsgsPlaceholderText,{}),m=(0,f.jsx)(s.MenuBarItem,{testid:"starred-menu",icon:(0,f.jsx)(d.default,{name:"menu"}),title:u.fbt._("Menu",null,{hk:"1Kc9Wl"}),children:(0,f.jsx)(i.default,{chat:a,msgs:t.toArray()})});return(0,f.jsx)(o.default,{msgCollection:t,onClose:n,chat:a,title:c,emptyListText:p,footerText:h,headerMenu:m})}var h=(0,c.forwardRef)(p);t.default=h},320606:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(914597),o=a(n(184470)),i=n(160811),l=n(471174),s=n(548360),d=n(667294),u=n(785893);function c(e,t){const{msgs:n,chat:a}=e;return(0,u.jsx)(i.Dropdown,{ref:t,type:i.MenuType.DropdownMenu,flipOnRTL:!0,dirX:i.DirX.LEFT,children:(0,u.jsx)(l.DropdownItem,{testid:"mi-unstar-all menu-item",action:()=>{r.ModalManager.open((0,u.jsx)(o.default,{msgs:n,chat:a}))},disabled:0===n.length,children:s.fbt._("Unstar all",null,{hk:"34KaRh"})})},"StarredDrawerHeader")}var f=(0,d.forwardRef)(c);t.default=f},816569:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onOpenStatus:t}=e,n=(0,S.default)((()=>new m.default)),a=()=>{const e=_.StatusV3Collection.getUnexpired(!0),t=_.StatusV3Collection.getUnexpired(!1);return{unread:e,read:t,muted:[...e,...t].filter((e=>e.contact.statusMute))}},{unread:r,read:i,muted:l}=(0,E.useMemo)(a,[]),[s,d]=(0,E.useState)((()=>r.filter((e=>!e.contact.statusMute)))),[c,g]=(0,E.useState)((()=>i.filter((e=>!e.contact.statusMute)))),[v,x]=(0,E.useState)(l),[C,b]=(0,E.useState)((()=>_.StatusV3Collection.getMyStatus())),[O,R]=(0,E.useState)(!1);(0,j.useListener)(_.StatusV3Collection,"add remove bulk_add sort change:msgsChanged change:hasUnread",(()=>{const{unread:e,read:t,muted:n}=a();d(e.filter((e=>!e.contact.statusMute))),g(t.filter((e=>!e.contact.statusMute))),x(n),b(_.StatusV3Collection.getMyStatus())})),(0,j.useListener)(y.ContactCollection,"change:statusMute",(()=>{const{unread:e,read:t,muted:n}=a();d(e.filter((e=>!e.contact.statusMute))),g(t.filter((e=>!e.contact.statusMute))),x(n),b(_.StatusV3Collection.getMyStatus())}));const L=()=>{R(!O)},N=(0,E.useMemo)((()=>{const e=[];return s.length>0&&(e.push({type:T,itemKey:"section-unread",height:48}),e.push(...s.map(((e,t)=>({type:M,itemKey:e.id.toString(),height:64,status:e,index:t}))))),c.length>0&&(e.push({type:w,itemKey:"section-read",height:48}),e.push(...c.map(((e,t)=>({type:M,itemKey:e.id.toString(),height:64,status:e,index:t}))))),v.length>0&&(e.push({type:D,itemKey:"section-muted",height:48,expanded:O}),O&&e.push(...v.map(((e,t)=>({type:M,itemKey:e.id.toString(),height:64,status:e,index:t}))))),(0,o.isPrivacyNarrativeV1Enabled)()&&e.push({type:I,itemKey:"section-e2e-message"}),e}),[s,c,v,O]);let F;F=_.StatusV3Collection.hasSynced()&&N.length>0?(0,k.jsx)(p.FlatList,{className:"statusList",itemEnterAnimationsEnabled:!0,flatListController:n.current,direction:"vertical",data:N,renderItem:e=>(0,k.jsx)(P,{data:e,onOpenStatus:t,onToggleMute:L})}):(0,k.jsx)(f.ListStatus,{});return(0,k.jsxs)("div",{className:u.default.listPanel,children:[(0,k.jsx)(A,{statusV3:C,onOpenStatus:e.onOpenStatus}),(0,k.jsx)(h.default,{className:u.default.listBody,flatListControllers:[n.current],children:F})]})};var r=a(n(145095)),o=n(227101),i=n(40234),l=n(438184),s=n(978820),d=a(n(471410)),u=a(n(726185)),c=n(288984),f=n(685600),p=n(747915),h=a(n(944942)),m=a(n(630855)),g=n(448256),v=a(n(23217)),x=a(n(174410)),C=a(n(515265)),y=n(719380),_=n(459387),b=n(548360),E=n(667294),S=a(n(616223)),j=n(587550),k=n(785893);const T="SEC_UNREAD",w="SEC_READ",D="SEC_MUTED",I="SEC_E2E_MESSAGE",M="ROW_STATUS";function P(e){let{data:t,onOpenStatus:n,onToggleMute:a}=e;switch(t.type){case T:return(0,k.jsxs)("div",{className:u.default.listSectionSep,children:[(0,k.jsx)("hr",{}),(0,k.jsx)("div",{className:u.default.listSectionText,children:(0,k.jsx)("span",{children:b.fbt._("RECENT",null,{hk:"vPbQs"})})})]});case w:return(0,k.jsxs)("div",{className:u.default.listSectionSep,children:[(0,k.jsx)("hr",{}),(0,k.jsx)("div",{className:u.default.listSectionText,children:(0,k.jsx)("span",{children:b.fbt._("VIEWED",null,{hk:"17DrUs"})})})]});case D:return(0,k.jsxs)("div",{className:u.default.listSectionSep,children:[(0,k.jsx)("hr",{}),(0,k.jsxs)("div",{className:u.default.listSectionText,children:[(0,k.jsx)("span",{children:b.fbt._("MUTED",null,{hk:"31XgZG"})}),(0,k.jsx)("button",{className:u.default.listSectionAction,onClick:a,children:t.expanded?b.fbt._("HIDE",null,{hk:"3n6J18"}):b.fbt._("SHOW",null,{hk:"1KKhJ5"})})]})]});case M:const e=(r=t.status).contact.isMe?d.default.STATUS_ROW_SECTION.MY_STATUS:r.contact.statusMute?d.default.STATUS_ROW_SECTION.MUTED_STORIES:r.hasUnread?d.default.STATUS_ROW_SECTION.RECENT_STORIES:d.default.STATUS_ROW_SECTION.PREVIOUS_STORIES;return(0,k.jsx)(x.default,{statusV3:t.status,onClick:()=>n(t.status,void 0,t.index,e),contact:t.status.contact});case I:return(0,k.jsx)(g.E2eMessageStatusV3List,{});default:throw new p.UnknownDataError(t)}var r}function A(e){var t;let n;const a=e.statusV3;let o,f;a&&(f=a.msgs);const p=()=>{const t=null==a?void 0:a.msgs;a&&(null==t?void 0:t.length)&&e.onOpenStatus(a,t.head(),0,d.default.STATUS_ROW_SECTION.MY_STATUS)};let h,m,g,x;if(a&&(null===(t=f)||void 0===t?void 0:t.length)){n=(0,k.jsx)(C.default,{statusV3:a,contact:a.contact,onClick:p});const e=(0,r.default)(f.last(),"myMsgs.last()").t;o=(0,k.jsx)("span",{className:u.default.secondaryHeaderText,children:i.Clock.relativeDateAndTimeStr(e)}),m={cursor:"pointer"},h=p}else n=(0,k.jsx)(c.DetailImage,{id:(0,s.getMaybeMeUser)(),theme:"status_v3",size:40}),o=(0,k.jsx)("span",{"data-testid":"status-no-updates",className:u.default.secondaryHeaderText,children:b.fbt._("No updates",null,{hk:"2Fcs7d"})});l.LegacyPhoneFeatures.supportsFeature(l.LegacyPhoneFeatures.F.STATUS_V3_UI_SENDING)&&(g=(0,k.jsx)(v.default,{name:"menu"}),x=(0,k.jsx)(v.default,{name:"status-v3-create"}));const y=(0,k.jsx)("span",{"data-testid":"my-status",className:u.default.primaryHeaderText,children:b.fbt._("My Status",null,{hk:"225G1q"})});return(0,k.jsxs)("div",{className:u.default.panelHeader,style:m,onClick:h,children:[(0,k.jsx)("div",{className:u.default.headerButtonsPrimary,children:n}),(0,k.jsxs)("div",{className:u.default.headerText,children:[y,o]}),(0,k.jsxs)("div",{className:u.default.headerButtonsSecondary,children:[x,g]})]})}},578985:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(781572),o=(a(n(568064)),n(555452)),i=(a(n(471410)),a(n(816569))),l=a(n(518442)),s=a(n(878662)),d=a(n(23217)),u=n(459387),c=a(n(294184)),f=n(667294),p=n(587550),h=n(785893);function m(e,t){const{onOpenStatus:n,sessionId:a,closeStatusViewer:m}=e,[g,v]=(0,f.useState)((()=>u.StatusV3Collection.getMyStatus()));(0,f.useEffect)((()=>{(0,o.setLastStatusUsage)(),null!=a&&u.StatusV3Collection.logMetrics({type:"session",sessionId:a}),r.Cmd.onStatusViewerOpen()}),[]);const x=(0,c.default)(l.default.v3_x,!1);return(0,p.useListener)(u.StatusV3Collection,["add","remove"],(()=>{v(u.StatusV3Collection.getMyStatus())})),(0,p.useListener)(r.Cmd,["dismiss_status_v3_viewer"],(()=>{m(!0)})),(0,h.jsx)("div",{ref:t,className:l.default.modalBackground,"data-animate-status-v3-modal-background":!0,children:(0,h.jsxs)("div",{className:l.default.mainWrapper,children:[(0,h.jsx)(i.default,{onOpenStatus:n}),(0,h.jsx)(s.default,{status:g,onOpenStatus:n}),(0,h.jsx)("button",{className:x,onClick:()=>e.closeStatusViewer(!0),children:(0,h.jsx)(d.default,{name:"x-viewer"})})]})})}var g=(0,f.forwardRef)(m);t.default=g},878662:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,y.jsx)(_,{statusV3:e.status,onOpenStatus:e.onOpenStatus});let n,a;l.LegacyPhoneFeatures.supportsFeature(l.LegacyPhoneFeatures.F.STATUS_V3_UI_SENDING)&&(n=(0,y.jsxs)("div",{className:d.default.updateWrapper,children:[(0,y.jsx)("div",{className:d.default.updateTitle,children:m.fbt._("Update your status",null,{hk:"43mqpz"})}),(0,y.jsxs)("div",{className:d.default.uploadButtons,children:[(0,y.jsxs)("div",{className:d.default.buttonContainer,children:[(0,y.jsx)(c.default,{name:"status-v3-upload",className:d.default.buttonIcon}),m.fbt._("Upload",null,{hk:"2EkSQz"})]}),(0,y.jsxs)("div",{className:d.default.buttonContainer,children:[(0,y.jsx)(c.default,{name:"status-v3-camera",className:d.default.buttonIcon}),m.fbt._("Camera",null,{hk:"1QXPXc"})]})]})]}),a=(0,y.jsx)("hr",{}));return(0,y.jsxs)("div",{className:d.default.outStatusPanel,children:[n,a,t]})};var r=n(450796),o=n(492574),i=n(40234),l=n(438184),s=a(n(471410)),d=a(n(689683)),u=n(288984),c=a(n(23217)),f=a(n(721029)),p=a(n(515265)),h=(n(754311),n(617972)),m=n(548360),g=n(667294),v=a(n(859312)),x=n(587550),C=a(n(803409)),y=n(785893);function _(e){const{statusV3:t}=e,n=(0,v.default)();(0,g.useEffect)((()=>{null==t||t.loadMore(t.totalCount).catch((e=>{__LOG__(3)`error while loading all out status: ${String(e)}`}))}),[]),(0,x.useListener)(t,"change:msgsChanged",n);const a=e.statusV3;if(a&&a.msgs.length>0){const t=a.msgs.map((t=>(0,y.jsx)(b,{msg:t,status:a,onOpenStatus:e.onOpenStatus},t.id.toString())));return(0,y.jsxs)("div",{className:d.default.viewWrapper,children:[(0,y.jsx)("div",{className:d.default.viewTitle,children:m.fbt._("View your updates",null,{hk:"1DTRQt"})}),(0,y.jsx)("div",{className:d.default.viewUpdates,children:t})]})}return(0,y.jsxs)("div",{className:d.default.viewWrapper,children:[(0,y.jsx)("div",{className:d.default.placeholderIcon,children:(0,y.jsx)(c.default,{name:"status-v3-placeholder"})}),(0,y.jsx)("div",{"data-testid":"status-placeholder",className:d.default.placeholderText,children:m.fbt._("Click on a contact to view their status updates",null,{hk:"d6xUd"})})]})}function b(e){const{msg:t,status:n}=e,a=(0,C.default)(),[l,c]=(0,g.useState)(null),[m,v]=(0,g.useState)(null);(0,g.useEffect)((()=>{h.MsgInfoCollection.find(t.id).then((e=>{a.aborted||(v(e),c(e.read.length))})).catch((0,r.filteredCatch)(o.EphemeralDrop,(()=>{})))}),[]),(0,x.useListener)(null==m?void 0:m.read,["add","remove"],(()=>{c(null==m?void 0:m.read.length)}));const _=(0,y.jsx)(u.DetailImage,{id:t.sender,theme:"status_v3",size:80});return(0,y.jsxs)("div",{className:d.default.outDetail,children:[(0,y.jsx)(p.default,{statusV3:n,msg:t,onClick:()=>e.onOpenStatus(n,t,0,s.default.STATUS_ROW_SECTION.MY_STATUS),contact:n.contact,role:"button",theme:"status-panel",thumbnailPlaceholder:_}),(0,y.jsx)("div",{className:d.default.seen,children:(0,y.jsx)(f.default,{seenCount:l})}),(0,y.jsx)("div",{className:d.default.timestamp,children:i.Clock.relativeDateAndTimeStr(t.t)})]})}},39822:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(630855)),o=a(n(152146)),i=n(610595),l=a(n(839902)),s=a(n(60453)),d=a(n(69637)),u=n(994790),c=a(n(833308)),f=n(548360),p=n(667294),h=a(n(156720)),m=a(n(616223)),g=n(785893);const v={stickerContainer:{display:"p357zi0d",justifyContent:"ac2vgrno",marginTop:"hv5pdlef",marginBottom:"gdaqao4w",width:"ln8gz9je"},controlsContainer:{display:"p357zi0d",justifyContent:"ac2vgrno",marginBottom:"fhelu9n7"},controlsButton:{marginStart:"nzcjdldu",marginEnd:"gqi0zhd6"}};function x(e,t){const n=(0,m.default)((()=>new r.default)),{sticker:a,stickerPack:p,onSend:x,onBack:C}=e;return(0,g.jsxs)(s.default,{theme:"sticker-store",ref:t,children:[(0,g.jsx)(u.DrawerHeader,{title:f.fbt._("Sticker Details",null,{hk:"44A1rH"}),type:u.DRAWER_HEADER_TYPE.SMALL,onBack:C}),(0,g.jsx)(d.default,{flatListControllers:[n.current],children:(0,g.jsxs)(c.default,{animation:!1,theme:"padding-no-margin",shadow:!1,children:[(0,g.jsx)("div",{className:(0,h.default)(v.stickerContainer),children:(0,g.jsx)(o.default,{sticker:a,theme:"stickerDetails"},a.id)}),(0,g.jsx)(i.StickerDetailsStickerPackInfo,{name:p.name,publisher:p.publisher,theme:i.Theme.StickerStore}),(0,g.jsx)("div",{className:(0,h.default)(v.controlsContainer),children:(0,g.jsx)(l.default,{icon:"send",label:f.fbt._("Send to this chat",null,{hk:"3uG4Tr"}),testid:"sticker-action send-button",xstyle:v.controlsButton,onClick:()=>{x(a)}})})]})})]},"sticker-details-modal")}var C=(0,p.forwardRef)(x);t.default=C},874066:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(568064)),o=n(965417),i=a(n(630855)),l=a(n(152146)),s=n(111054),d=a(n(23217)),u=n(113923),c=a(n(60453)),f=a(n(69637)),p=n(994790),h=a(n(833308)),m=n(344333),g=a(n(310093)),v=n(548360),x=n(667294),C=a(n(156720)),y=a(n(196570)),_=a(n(616223)),b=a(n(174570)),E=n(785893);const S={titleContainer:{display:"p357zi0d",alignItems:"gndfcl4n",marginBottom:"or9x5nie"},title:{flexGrow:"tvf2evcx"},spinner:{display:"p357zi0d",alignItems:"gndfcl4n",justifyContent:"ac2vgrno",minHeight:"h2zl7k75"},animatedIcon:{marginStart:"oz0g9ue8",color:"kw851w1p"},contentContainer:{marginBottom:"dblt22a0",color:"hp667wtd",fontSize:"f8jlpxt4",lineHeight:"jgi8eev7"},stickersContainer:{display:"btb1m7bk",gridTemplateColumns:"dr6m1ylk",gridTemplateRows:"kenirpp9",gridColumnGap:"zqptfkjs",gridRowGap:"lhjw8glk",justifyContent:"o4u7okr9",width:"ln8gz9je",height:"ppled2lx"},emptyContainer:{display:"p357zi0d",justifyContent:"ac2vgrno",marginTop:"hv5pdlef",marginBottom:"gdaqao4w",width:"ln8gz9je"},emptySticker:{width:"sr23wnuw",height:"rjxfi64q",marginBottom:"dblt22a0",backgroundRepeat:"sxl192xd",backgroundSize:"hbhfgwk1"},emptyText:{textAlign:"qfejxiq4",marginBottom:"fhelu9n7"}};function j(e,t){const n=(0,_.default)((()=>new i.default)),{stickerPack:a,stickerPackId:j,onStickerClick:k,onStickerEnter:T,onBack:w,onClose:D}=e,I=function(e,t){return(0,y.default)(m.StickerPackCollectionMd,"add remove reset",(()=>e||(t?m.StickerPackCollectionMd.get(t):null)))||(null==t?null:void m.StickerPackCollectionMd.fetchStickerPack(t))}(a,j),M=function(e){return(0,y.default)(null==e?void 0:e.stickers,"add remove reset",(()=>null==e?void 0:e.stickers.toArray()))}(I),P=function(e){return(0,y.default)(m.StickerPackCollectionMd,"change:packFetchState",(()=>e?m.StickerPackCollectionMd.packFetchState.get(e):null))}(j),A=(0,b.default)();(0,x.useEffect)((()=>{A((()=>{null==I||I.stickers.fetch()}))}),[null==I?void 0:I.stickers,A]);const O=(e,t)=>{I&&k(e,I,t)},R=(e,t)=>{I&&T(e,I,t)};let L;return(j&&P===m.FETCH_STATE.PENDING||0===(null==M?void 0:M.length))&&(L=(0,E.jsx)(u.TextDiv,{theme:"plain",xstyle:S.spinner,children:(0,E.jsx)(s.Spinner,{size:50,stroke:4})})),(0,E.jsxs)(c.default,{theme:"sticker-store",ref:t,children:[(0,E.jsx)(p.DrawerHeader,{title:v.fbt._("Sticker Details",null,{hk:"44A1rH"}),type:p.DRAWER_HEADER_TYPE.SMALL,onBack:w,onCancel:D}),(0,E.jsx)(f.default,{flatListControllers:[n.current],children:(0,E.jsxs)(h.default,{animation:!1,theme:"padding-no-margin",shadow:!1,children:[I?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)(u.TextDiv,{theme:"title",xstyle:S.titleContainer,children:[(0,E.jsx)(o.EmojiText,{xstyle:S.title,text:I.name,ellipsify:!0,titlify:!0}),I.animated?(0,E.jsx)(d.default,{name:"round-play",className:(0,C.default)(S.animatedIcon),width:16,height:16}):null]}),I.publisher&&(0,E.jsx)(u.TextDiv,{theme:"plain",xstyle:S.contentContainer,children:(0,E.jsx)(o.EmojiText,{text:r.default.t(609,{name:I.publisher})})}),I.description&&(0,E.jsx)(u.TextDiv,{theme:"plain",xstyle:S.contentContainer,children:(0,E.jsx)(o.EmojiText,{text:I.description})}),L,(0,E.jsx)("div",{className:(0,C.default)(S.stickersContainer),children:null==M?void 0:M.map((e=>(0,E.jsx)(l.default,{sticker:e,theme:"stickerStore",onClick:O,onEnter:R,dontShowViewPack:!0},e.id)))})]}):null,!I&&j&&P===m.FETCH_STATE.PENDING?L:null,I||j&&P===m.FETCH_STATE.PENDING?null:(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("div",{className:(0,C.default)(S.emptyContainer),children:(0,E.jsx)("div",{className:(0,C.default)(S.emptySticker),style:{backgroundImage:`url(${g.default})`}})}),(0,E.jsx)(u.TextDiv,{theme:"plain",xstyle:[S.contentContainer,S.emptyText],children:(0,E.jsx)(o.EmojiText,{text:v.fbt._("Unable to find sticker pack",null,{hk:"3aIIxP"})})})]})]})})]},"sticker-pack-details-modal")}var k=(0,x.forwardRef)(j);t.default=k},237968:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(448820)),o=a(n(630855)),i=n(111054),l=n(113923),s=a(n(60453)),d=a(n(69637)),u=n(994790),c=a(n(833308)),f=n(344333),p=n(548360),h=n(667294),m=(a(n(156720)),a(n(196570))),g=a(n(616223)),v=n(785893);const x={spinner:{display:"p357zi0d",alignItems:"gndfcl4n",justifyContent:"ac2vgrno",minHeight:"h2zl7k75"}};function C(e,t){const n=(0,m.default)(f.StickerPackCollectionMd,"add remove reset",(()=>f.StickerPackCollectionMd.filter((e=>null!=e.index)))),a=(0,g.default)((()=>new o.default));let h;return 0===n.length&&(h=(0,v.jsx)(l.TextDiv,{theme:"plain",xstyle:x.spinner,children:(0,v.jsx)(i.Spinner,{size:50,stroke:4})})),(0,v.jsxs)(s.default,{theme:"sticker-store",ref:t,children:[(0,v.jsx)(u.DrawerHeader,{title:p.fbt._("WhatsApp Sticker Store",null,{hk:"nicpq"}),type:u.DRAWER_HEADER_TYPE.SMALL,onCancel:e.onClose}),(0,v.jsx)(d.default,{flatListControllers:[a.current],onScroll:t=>{var n;null===(n=e.onScrollOffsetChange)||void 0===n||n.call(e,t.currentTarget.scrollTop)},scrollOffset:e.scrollOffset,children:(0,v.jsxs)(c.default,{animation:!1,theme:"no-padding",shadow:!1,children:[h,(0,v.jsx)(r.default,{stickerPacks:n,onStickerPackDetails:e.onStickerPackDetails})]})})]},"sticker-store-modal")}var y=(0,h.forwardRef)(C);t.default=y},907693:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const e=(0,d.useContext)(l.ThemeContext),[t,n]=(0,d.useState)(e.systemThemeMode?"system":e.theme),a=e=>{const t=e.target.value;"light"!==t&&"dark"!==t&&"system"!==t||n(t)};return(0,c.jsx)(o.default,{title:s.fbt._("Choose theme",null,{hk:"3cnXtb"}),onOK:()=>{"system"===t?(e.setSystemThemeMode(!0),e.setTheme(i.default.getCurrentTheme())):(e.setSystemThemeMode(!1),e.setTheme(t)),r.ModalManager.close()},onCancel:()=>{r.ModalManager.close()},children:(0,c.jsx)("form",{children:(0,c.jsxs)("ol",{children:[(0,c.jsx)("li",{children:(0,c.jsxs)("label",{className:(0,u.default)(f),children:[(0,c.jsx)("input",{type:"radio",name:"theme",value:"light",className:(0,u.default)(p),checked:"light"===t,onChange:a}),s.fbt._("Light",null,{hk:"2EcNH1"})]})},"light"),(0,c.jsx)("li",{children:(0,c.jsxs)("label",{className:(0,u.default)(f),children:[(0,c.jsx)("input",{type:"radio",name:"theme",value:"dark",className:(0,u.default)(p),checked:"dark"===t,onChange:a}),s.fbt._("Dark",null,{hk:"2GGBbH"})]})},"dark"),(0,c.jsx)("li",{children:(0,c.jsxs)("label",{className:(0,u.default)(f),children:[(0,c.jsx)("input",{type:"radio",name:"theme",value:"system",className:(0,u.default)(p),checked:"system"===t,onChange:a}),s.fbt._("System default",null,{hk:"2lMytc"})]})},"system")]})})})};var r=n(914597),o=a(n(452665)),i=a(n(603137)),l=n(597628),s=n(548360),d=n(667294),u=a(n(156720)),c=n(785893);const f={display:"l7jjieqr",height:"hpdpob1j",paddingTop:"n1yiu2zv",paddingEnd:"f9ovudaz",paddingBottom:"eb4rp10x",paddingStart:"gx1rr48f",cursor:"ajgl1lbb"},p={marginEnd:"claouzo6"}},473953:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.TOS_BASE_URL=t.BIZ_TOS_BASE_URL=void 0,t.getBizTosUrl=function(){return`${i}?lg=${r.default.getLocale()}`},t.getTosUrl=function(){return`${o}?lg=${r.default.getLocale()}`};var r=a(n(568064));const o="https://www.whatsapp.com/legal/";t.TOS_BASE_URL=o;const i="https://www.whatsapp.com/legal/business-terms";t.BIZ_TOS_BASE_URL=i},987023:(e,t,n)=>{"use strict";var a=n(280366).default,r=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(348926)),i=r(n(568064)),l=n(266992),s=n(429623),d=r(n(748846)),u=n(111054),c=r(n(23217)),f=n(113923),p=r(n(60453)),h=r(n(69637)),m=r(n(464738)),g=n(994790),v=r(n(833308)),x=n(548360),C=n(667294),y=(r(n(156720)),n(785893));const _={drawerSection:{paddingTop:"msavwer2"},description:{paddingTop:"msavwer2",paddingEnd:"bcymb0na",paddingBottom:"slgfab0f",paddingStart:"e8k79tju"}};function b(e,t){const[n,r]=(0,C.useState)(null),[h,m]=(0,C.useState)(!1);if((0,C.useEffect)((()=>{const e=new a;return(0,o.default)((function*(){if(e.signal.aborted)return;const t=yield(0,l.getTwoFactor)();r(t.code),m(t.email)}))(),()=>e.abort()}),[]),null==n)return(0,y.jsx)(p.default,{ref:t,children:(0,y.jsx)(S,{onClose:e.onClose,children:(0,y.jsx)(s.FlexRow,{align:"center",justify:"center",children:(0,y.jsx)(s.FlexRow,{align:"center",justify:"center",children:(0,y.jsx)(d.default,{children:(0,y.jsx)(u.Spinner,{size:50,stroke:4})})})})})});let g,v,b;return!0===n?(g=x.fbt._("Two-step verification is enabled. You'll need to enter your PIN when registering your phone number with WhatsApp again.",null,{hk:"3YBvN9"}),v=(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(E,{onClick:e.onOpenDisableDrawer,icon:(0,y.jsx)(c.default,{name:"round-x-inv",height:24}),children:x.fbt._("Disable",null,{hk:"2NQsJG"})}),(0,y.jsx)(E,{onClick:e.onOpenUpdatePinDrawer,icon:(0,y.jsx)(c.default,{name:"settings-pin"}),children:x.fbt._("Change PIN",null,{hk:"4jxHA2"})}),(0,y.jsx)(E,{onClick:e.onOpenUpdateEmailDrawer,icon:(0,y.jsx)(c.default,{name:"business-email"}),children:!0===h?x.fbt._("Change email address",null,{hk:"2eLVB7"}):x.fbt._("Add email address",null,{hk:"K0UsJ"})})]}),b=i.default.isRTL()?"settings_2fa_done_rtl":"settings_2fa_done"):(g=x.fbt._("For added security, enable two-step verification, which will require a PIN when registering your phone number with WhatsApp again.",null,{hk:"1w6wcg"}),v=(0,y.jsx)(E,{onClick:e.onOpenRegistrationDrawer,children:x.fbt._("Enable",null,{hk:"lOVum"})}),b="settings_2fa"),(0,y.jsx)(p.default,{ref:t,children:(0,y.jsxs)(S,{onClose:e.onClose,children:[(0,y.jsx)(s.FlexRow,{align:"center",justify:"center",children:(0,y.jsx)(d.default,{children:(0,y.jsx)(c.default,{name:b})})}),(0,y.jsx)(f.TextDiv,{xstyle:_.description,children:g}),v]})})}function E(e){let{children:t,onClick:n,isLastItem:a,icon:r}=e;return(0,y.jsx)(m.default,{icon:r,onClick:n,children:t})}function S(e){let{children:t,onClose:n}=e;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(g.DrawerHeader,{title:x.fbt._("Two-Step Verification",null,{hk:"371hOo"}),onBack:n,type:g.DRAWER_HEADER_TYPE.LARGE}),(0,y.jsx)(h.default,{children:(0,y.jsx)(v.default,{animation:!1,ellipsify:!1,xstyle:_.drawerSection,children:t})})]})}var j=(0,C.forwardRef)(b);t.default=j},296626:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.TwoFactorCurrentPinItem=function(e){return(0,s.jsx)(o.default,{title:l.fbt._("Enter your existing PIN Code",null,{hk:"2fSm6a"}),children:(0,s.jsx)(r.TextInput,{onChange:e.setCurrentPin,value:e.currentPin,placeholder:l.fbt._("******",null,{hk:"12vsOT"}),hideFloatingLabel:!0,maxLength:i.PIN_LENGTH,managed:!0,managedError:!0,onKeyDown:i.isKeyFiniteAndAllowed})})};var r=n(990011),o=a(n(970835)),i=n(12348),l=n(548360),s=n(785893)},136486:(e,t,n)=>{"use strict";var a=n(280366).default,r=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(348926)),i=n(694816),l=n(266992),s=r(n(540436)),d=n(296626),u=r(n(39770)),c=n(950452),f=r(n(60453)),p=r(n(69637)),h=n(994790),m=r(n(833308)),g=n(12348),v=n(548360),x=n(667294),C=r(n(156720)),y=n(785893);const _={display:"p357zi0d",justifyContent:"j1p1mz06",paddingBottom:"hjz8m82x",marginTop:"ignnouf6",textAlign:"qfejxiq4"};function b(e){const[t,n]=(0,x.useState)(""),r=t.length===g.PIN_LENGTH,b=function(){var t=(0,o.default)((function*(){if(!(new a).signal.aborted)try{yield(0,l.setTwoFactor)(),e.onClose()}catch(e){(()=>{const e=(0,c.genId)();i.ToastManager.open((0,y.jsx)(c.Toast,{msg:v.fbt._("Error disabling two factor authentication. Please try again later",null,{hk:"1YwEW0"}),id:e}))})()}}));return function(){return t.apply(this,arguments)}}();return(0,y.jsxs)(f.default,{children:[(0,y.jsx)(h.DrawerHeader,{title:v.fbt._("Two-Step Verification",null,{hk:"4byi3k"}),onBack:e.onClose,type:h.DRAWER_HEADER_TYPE.LARGE}),(0,y.jsx)(p.default,{children:(0,y.jsxs)("form",{children:[(0,y.jsx)(m.default,{theme:"padding",children:(0,y.jsx)(d.TwoFactorCurrentPinItem,{currentPin:t,setCurrentPin:n})}),(0,y.jsx)(s.default,{transitionName:"btn",className:(0,C.default)(_),children:(0,y.jsx)(u.default,{onClick:()=>b(),disabled:!r,type:"primary",children:v.fbt._("Disable",null,{hk:"47dvb3"})})})]})})]})}var E=(0,x.forwardRef)(b);t.default=E},942072:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{email:t,onEmailChange:n,emailConfirmation:a,onEmailConfirmationChange:u}=e;const[c,f]=(0,s.useState)(!1),[p,h]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{t===a&&h(!1)}),[t,a]),(0,s.useEffect)((()=>{(0,r.validateEmail)(t)&&f(!1)}),[t]),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(i.default,{title:l.fbt._("Add an email address to your account which will be used to reset your PIN if you forget it and safeguard your account.",null,{hk:"hOoLZ"}),children:(0,d.jsx)(o.TextInput,{onChange:n,value:t,placeholder:l.fbt._("Email",null,{hk:"X6Ecg"}),onBlur:()=>{(0,r.validateEmail)(t)||f(!0)},error:c?l.fbt._("Incorrect email address format",null,{hk:"31SbGe"}):null})}),(0,d.jsx)(i.default,{title:l.fbt._("Confirm your email address",null,{hk:"3JG3wt"}),children:(0,d.jsx)(o.TextInput,{onChange:u,value:a,placeholder:l.fbt._("Email",null,{hk:"X6Ecg"}),onBlur:()=>{t!==a&&h(!0)},error:p?l.fbt._("Email addresses don't match. Try again.",null,{hk:"1aIhRJ"}):null})})]})};var r=n(501474),o=n(990011),i=a(n(970835)),l=n(548360),s=n(667294),d=n(785893)},205084:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.TwoFactorPinItem=function(e){const t=e.pinConfirmation.length===i.PIN_LENGTH&&e.pin!==e.pinConfirmation;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.default,{title:l.fbt._("Enter a six-digit PIN which you'll be asked for when you register your phone number with WhatsApp",null,{hk:"1mIPNN"}),children:(0,s.jsx)(r.TextInput,{onChange:e.setPin,value:e.pin,placeholder:l.fbt._("******",null,{hk:"12vsOT"}),hideFloatingLabel:!0,maxLength:i.PIN_LENGTH,managed:!0,managedError:!0,onKeyDown:i.isKeyFiniteAndAllowed})}),(0,s.jsx)(o.default,{title:l.fbt._("Confirm your PIN",null,{hk:"481hoK"}),children:(0,s.jsx)(r.TextInput,{onChange:e.setPinConfirmation,value:e.pinConfirmation,placeholder:l.fbt._("******",null,{hk:"12vsOT"}),hideFloatingLabel:!0,maxLength:i.PIN_LENGTH,managed:!0,managedError:!0,error:t?l.fbt._("PINs don't match. Try again.",null,{hk:"3SLhII"}):null,onKeyDown:i.isKeyFiniteAndAllowed})})]})};var r=n(990011),o=a(n(970835)),i=n(12348),l=n(548360),s=n(785893)},492857:(e,t,n)=>{"use strict";var a=n(280366).default,r=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(348926)),i=n(694816),l=n(266992),s=r(n(540436)),d=r(n(942072)),u=n(205084),c=r(n(39770)),f=n(950452),p=r(n(60453)),h=r(n(69637)),m=n(994790),g=r(n(833308)),v=n(12348),x=n(548360),C=n(667294),y=r(n(156720)),_=n(785893);const b={zIndex:"b9fczbqn",display:"p357zi0d",justifyContent:"j1p1mz06",paddingBottom:"hjz8m82x",marginTop:"ignnouf6",textAlign:"qfejxiq4"},E=n(76672)({SET_PIN_NUMBER:"set_pin_number",SET_EMAIL:"set_email"});function S(e,t){const[n,r]=(0,C.useState)(""),[s,d]=(0,C.useState)(""),[u,c]=(0,C.useState)(""),[p,h]=(0,C.useState)(""),[m,g]=(0,C.useState)(E.SET_PIN_NUMBER),v=function(){var t=(0,o.default)((function*(){const t=new a;if(u===p&&n===s&&!t.signal.aborted)try{yield(0,l.setTwoFactor)(n,u),e.onClose()}catch(e){const t=(0,f.genId)();i.ToastManager.open((0,_.jsx)(f.Toast,{msg:x.fbt._("Error changing two factor authentication email. Please try again later",null,{hk:"yc6Vh"}),id:t}))}}));return function(){return t.apply(this,arguments)}}();return m===E.SET_PIN_NUMBER?(0,_.jsx)(k,{ref:t,pin:n,setPin:r,pinConfirmation:s,setPinConfirmation:d,onClose:e.onClose,setStep:g}):(0,_.jsx)(T,{ref:t,email:u,setEmail:c,emailConfirmation:p,setEmailConfirmation:h,setStep:g,onRegisterButton:v})}const j=(0,C.forwardRef)(((e,t)=>{let{children:n,submitButton:a,onClose:r}=e;return(0,_.jsxs)(p.default,{ref:t,children:[(0,_.jsx)(m.DrawerHeader,{testid:"drawer-title-2fa",title:x.fbt._("Two-Step Verification",null,{hk:"V5WvQ"}),onBack:r,type:m.DRAWER_HEADER_TYPE.LARGE}),(0,_.jsx)(h.default,{children:(0,_.jsxs)("form",{children:[(0,_.jsx)(g.default,{theme:"padding",children:n}),(0,_.jsx)(s.default,{transitionName:"btn",className:(0,y.default)(b),children:a})]})})]})})),k=(0,C.forwardRef)(((e,t)=>{let{pin:n,setPin:a,pinConfirmation:r,setPinConfirmation:o,onClose:i,setStep:l}=e;const s=n.length===v.PIN_LENGTH&&n===r,d=(0,_.jsx)(c.default,{onClick:()=>l(E.SET_EMAIL),disabled:!s,type:"primary",children:x.fbt._("Continue",null,{hk:"1tKb7K"})});return(0,_.jsx)(j,{ref:t,onClose:i,submitButton:d,children:(0,_.jsx)(u.TwoFactorPinItem,{pin:n,setPin:a,pinConfirmation:r,setPinConfirmation:o})})})),T=(0,C.forwardRef)(((e,t)=>{let{email:n,setEmail:a,emailConfirmation:r,setEmailConfirmation:o,setStep:i,onRegisterButton:l}=e;const s=(0,_.jsx)(c.default,{onClick:l,type:"primary",children:x.fbt._("Register",null,{hk:"41O09c"})});return(0,_.jsx)(j,{ref:t,onClose:()=>i(E.SET_PIN_NUMBER),submitButton:s,children:(0,_.jsx)(d.default,{email:n,onEmailChange:a,emailConfirmation:r,onEmailConfirmationChange:o})})}));var w=(0,C.forwardRef)(S);t.default=w},689932:(e,t,n)=>{"use strict";var a=n(280366).default,r=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(348926)),i=n(694816),l=n(266992),s=r(n(540436)),d=n(296626),u=r(n(942072)),c=r(n(39770)),f=n(950452),p=r(n(60453)),h=r(n(69637)),m=n(994790),g=r(n(833308)),v=n(12348),x=n(548360),C=n(667294),y=r(n(156720)),_=n(785893);const b={display:"p357zi0d",justifyContent:"j1p1mz06",paddingBottom:"hjz8m82x",marginTop:"ignnouf6",textAlign:"qfejxiq4"};function E(e,t){const[n,r]=(0,C.useState)(""),[E,S]=(0,C.useState)(""),[j,k]=(0,C.useState)(""),[T,w]=(0,C.useState)(!1),D=n.length===v.PIN_LENGTH&&E===j&&!T,I=function(){var t=(0,o.default)((function*(){w(!0);if(!(new a).signal.aborted)try{yield(0,l.setTwoFactor)(n,E),e.onClose(),w(!1)}catch(e){w(!1);const t=(0,f.genId)();i.ToastManager.open((0,_.jsx)(f.Toast,{msg:x.fbt._("Error changing two factor authentication email. Please try again later",null,{hk:"yc6Vh"}),id:t}))}}));return function(){return t.apply(this,arguments)}}();return(0,_.jsxs)(p.default,{ref:t,children:[(0,_.jsx)(m.DrawerHeader,{title:x.fbt._("Two-Step Verification",null,{hk:"4byi3k"}),onBack:e.onClose,type:m.DRAWER_HEADER_TYPE.LARGE}),(0,_.jsx)(h.default,{children:(0,_.jsxs)("form",{children:[(0,_.jsxs)(g.default,{theme:"padding",children:[(0,_.jsx)(d.TwoFactorCurrentPinItem,{currentPin:n,setCurrentPin:r}),(0,_.jsx)(u.default,{email:E,onEmailChange:S,emailConfirmation:j,onEmailConfirmationChange:k})]}),(0,_.jsx)(s.default,{transitionName:"btn",className:(0,y.default)(b),children:(0,_.jsx)(c.default,{onClick:I,disabled:!D,type:"primary",children:x.fbt._("Update Email",null,{hk:"MepRa"})})})]})})]})}var S=(0,C.forwardRef)(E);t.default=S},124098:(e,t,n)=>{"use strict";var a=n(280366).default,r=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(348926)),i=n(694816),l=n(266992),s=r(n(540436)),d=n(296626),u=n(205084),c=r(n(39770)),f=n(950452),p=r(n(60453)),h=r(n(69637)),m=n(994790),g=r(n(833308)),v=n(12348),x=n(548360),C=n(667294),y=r(n(156720)),_=n(785893);const b={display:"p357zi0d",justifyContent:"j1p1mz06",paddingBottom:"hjz8m82x",marginTop:"ignnouf6",textAlign:"qfejxiq4"};function E(e,t){const[n,r]=(0,C.useState)(""),[E,S]=(0,C.useState)(""),[j,k]=(0,C.useState)(""),[T,w]=(0,C.useState)(!1),D=n.length===v.PIN_LENGTH&&n===E&&!T,I=function(){var t=(0,o.default)((function*(){w(!0);if(!(new a).signal.aborted)try{yield(0,l.setTwoFactor)(n),w(!1),e.onClose()}catch(e){w(!1);const t=(0,f.genId)();i.ToastManager.open((0,_.jsx)(f.Toast,{msg:x.fbt._("Error changing two factor authentication pin. Please try again later",null,{hk:"1l139k"}),id:t}))}}));return function(){return t.apply(this,arguments)}}();return(0,_.jsxs)(p.default,{ref:t,children:[(0,_.jsx)(m.DrawerHeader,{title:x.fbt._("Two-Step Verification",null,{hk:"371hOo"}),onBack:e.onClose,type:m.DRAWER_HEADER_TYPE.LARGE}),(0,_.jsx)(h.default,{children:(0,_.jsxs)("form",{children:[(0,_.jsxs)(g.default,{theme:"padding",children:[(0,_.jsx)(d.TwoFactorCurrentPinItem,{currentPin:j,setCurrentPin:k}),(0,_.jsx)(u.TwoFactorPinItem,{pin:n,setPin:r,pinConfirmation:E,setPinConfirmation:S})]}),(0,_.jsx)(s.default,{transitionName:"btn",className:(0,y.default)(b),children:(0,_.jsx)(c.default,{onClick:I,disabled:!D,type:"primary",children:x.fbt._("Save",null,{hk:"3Plca1"})})})]})})]})}var S=(0,C.forwardRef)(E);t.default=S},184470:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{chat:t,msgs:n}=e;return(0,d.jsx)(i.default,{onOK:()=>{t&&t.pendingAction++,s.ChatCollection.unstarAllMessages(n,t).finally((()=>{t&&t.pendingAction--})),o.ModalManager.close()},okText:r.default.t(626),onCancel:u,children:(0,d.jsx)("div",{children:(0,d.jsx)(l.EmojiText,{text:r.default.t(627)})})})};var r=a(n(568064)),o=n(914597),i=a(n(452665)),l=n(965417),s=n(669951),d=n(785893);const u=()=>{o.ModalManager.close()}},393110:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(461957),o=a(n(568064)),i=n(893778),l=a(n(60453)),s=a(n(69637)),d=n(994790),u=n(857224),c=a(n(555771)),f=a(n(911976)),p=n(965417),h=n(729424),m=n(482857),g=a(n(23217)),v=n(667294),x=n(785893);function C(e){let{contact:t}=e;const n=(0,i.parseVcard)(t.vcard);return n?(0,x.jsx)("div",{className:c.default.vcardWrapper,children:(0,x.jsx)(f.default,{parsedVcard:n,thumbnail:(0,i.vcardThumbnail)(n)})}):null}function y(e,t){const{contactList:n,onSend:a,onBack:f,chat:v}=e;let y;switch(v.kind){case r.CHAT_KIND.CHAT:y=o.default.t(201,{chat:v.title(),count:o.default.n(n.length),_plural:n.length});break;case r.CHAT_KIND.GROUP:y=o.default.t(202,{chat:v.title(),count:o.default.n(n.length),_plural:n.length});break;case r.CHAT_KIND.BROADCAST:y=o.default.t(200,{chat:v.title(),count:o.default.n(n.length),_plural:n.length})}const _=y?(0,x.jsx)(p.EmojiText,{text:y,direction:"auto",titlify:!0,ellipsify:!0}):null;return(0,x.jsx)(u.Modal,{ref:t,type:u.ModalTheme.Box,children:(0,x.jsxs)(l.default,{children:[(0,x.jsx)(d.DrawerHeader,{type:d.DRAWER_HEADER_TYPE.POPUP,onBack:f,children:_}),(0,x.jsx)(s.default,{children:(0,x.jsx)(h.HotKeys,{children:(0,x.jsx)("div",{className:c.default.body,children:n.map(((e,t)=>(0,x.jsx)(C,{contact:(0,i.vcardFromContactModel)(e)},t.toString())))})})}),(0,x.jsx)("div",{className:c.default.btnContainer,children:(0,x.jsx)("div",{className:c.default.btnPosition,children:(0,x.jsx)(m.Round,{large:!0,onClick:a,children:(0,x.jsx)(g.default,{name:"send",directional:!0})})})})]})})}var _=(0,v.forwardRef)(y);t.default=_},145925:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onClose:t,isFirstLevel:n=!1}=e,a=(0,J.default)(),u=(0,$.default)(),c=(0,X.useModelValues)(e.contact,["verificationBinary","verificationString","formattedUser","formattedShortName","id"]),y=(0,V.useRef)(null),b=(0,V.useRef)(null),I=(0,V.useRef)(null),[A,O]=(0,V.useState)(!0),[N,F]=(0,V.useState)(!1),[U,H]=(0,V.useState)(!1),[G,Y]=(0,V.useState)(!1),[K,ee]=(0,V.useState)(!1),[te,ne]=(0,V.useState)(null),[ae,re]=(0,V.useState)(null),[oe,ie]=(0,V.useState)(!1),[se,_e]=(0,V.useState)(null),[be,Ee]=(0,V.useState)(null),[Se,je]=(0,V.useState)(null),ke=()=>{(0,p.getIdentityVerificationDataJob)(c.id).then((e=>{u.aborted||(e?(ye(se,e.binary)&&!e.string!==be||(null!=se&&g.ModalManager.open((0,Z.jsx)(k.E2eChangeModal,{contact:c})),_e(e.binary),Ee(e.string)),De()):(Ie(),g.ModalManager.open((0,Z.jsx)(w.default,{name:c.formattedUser,onOK:()=>{t?t():null==a||a.requestDismiss()}}))))}))},[Te]=(0,Q.useTimeout)((()=>{ee(!1)}),5e3),we=e=>{O(!0),F(!1),H(!1),ee(!0),ne(e),Te()},[De,Ie]=(0,Q.useTimeout)(ke,1e3),[Me]=(0,Q.useTimeout)((()=>{F(!1)}),3e3),[Pe]=(0,Q.useTimeout)((()=>{H(!1)}),3e3),[Ae]=(0,Q.useTimeout)((()=>{G&&!K&&we(q.fbt._("Please try increasing the brightness or reducing light reflection.",null,{hk:"2uEW7v"}))}),7e3);const Oe=()=>{Y(!1),ee(!1),re(null),y.current=null},Re=e=>{const t=(e=>{let t;const n=c.formattedShortName;switch(e){case ge:t=h.default.t(851,{contact:n});break;case ve:case xe:t=h.default.t(850,{contact:n});break;case Ce:default:t=q.fbt._("The image does not contain a valid identity verification QR code.",null,{hk:"4q3XzO"})}return t})(e);we(t)},Le=(e,t)=>{(e=>new Promise(((t,n)=>{W.default.callback=(e,a)=>{if(a)n(a);else if(e.length<1)n(new Error("QR decoder did not return decoded binary"));else{const n=new Uint8Array(e[0]);t(n)}},W.default.decode(e)})))(e).then((e=>(0,z.decodeProtobuf)(C.CombinedFingerprintSpec,e))).then((e=>{const n=(e=>{var t,n,a,r,o,i,s,d,u,f,p,h;if(!e||0===!e.version||!e.localFingerprint||!e.remoteFingerprint)return Ce;let m=new ArrayBuffer(0);m=(0,l.isMDBackend)()?se:c.verificationBinary;const g=(0,z.decodeProtobuf)(C.CombinedFingerprintSpec,m);if(ye(null===(t=e.localFingerprint)||void 0===t?void 0:t.identifier,null===(n=g.localFingerprint)||void 0===n?void 0:n.identifier)&&ye(null===(a=e.remoteFingerprint)||void 0===a?void 0:a.identifier,null===(r=g.remoteFingerprint)||void 0===r?void 0:r.identifier))return he;const v=ye(null===(o=e.remoteFingerprint)||void 0===o?void 0:o.identifier,null===(i=g.localFingerprint)||void 0===i?void 0:i.identifier),x=ye(null===(s=e.localFingerprint)||void 0===s?void 0:s.identifier,null===(d=g.remoteFingerprint)||void 0===d?void 0:d.identifier);if(!v&&!x)return xe;if(!v)return ge;if(!x)return ve;const y=ye(null===(u=e.remoteFingerprint)||void 0===u?void 0:u.publicKey,null===(f=g.localFingerprint)||void 0===f?void 0:f.publicKey),_=ye(null===(p=e.localFingerprint)||void 0===p?void 0:p.publicKey,null===(h=g.remoteFingerprint)||void 0===h?void 0:h.publicKey);return y&&_?he:me})(e);n?t&&Se===Ce||(je(n),Se===me?(Oe(),O(!1),F(!1),H(!0),ee(!1),Pe()):Re(n)):(Oe(),O(!1),F(!0),H(!1),ee(!1),Me())})).catch((()=>{t||(je(Ce),Re(Ce))})).finally((()=>{window.URL.revokeObjectURL(e)}))},Ne=e=>{e.stopPropagation();const t=e.target.files||e.dataTransfer.files;if(!t||!t[0])return;const n=t[0],a=URL.createObjectURL(n);Le(a,!1);const r=b.current;r&&r.reset()},Fe=()=>{const{asyncStream:e,disposeStream:t}=L.start("camera");y.current=t,e.then((e=>(e=>{O(!0),F(!1),H(!1),Y(!0),re(e),Ae()})(e))).catch((0,r.filteredCatch)(m.GUM.NotAllowedError,(()=>{g.ModalManager.open((0,Z.jsx)(T.GuidePopup,{messaging:T.Messaging.CAMERA_FAIL,type:T.TYPE.GUIDE_UNBLOCK}))}))).catch((0,r.filteredCatch)(m.GUM.GUMError,(()=>{g.ModalManager.open((0,Z.jsx)(T.GuidePopup,{messaging:T.Messaging.CAMERA_MISSING,type:T.TYPE.GUIDE_NONE}))})))},Be=e=>{Le(e,!0)},Ue=()=>{const e=I.current;null==e||e.click()},He=()=>{t?t():null==a||a.requestDismiss()};(0,V.useEffect)((()=>{(0,l.isLegacyWebdBackend)()&&(0,f.queryIdentity)(c)}),[c]),(0,V.useEffect)((()=>((0,l.isMDBackend)()?ke():(0,f.queryIdentity)(c),(0,i.isPrivacyNarrativeV1Enabled)()&&(0,x.incrementPrinaDailyCount)(_.default.PRIVACY_HIGHLIGHT_SURFACE_ENUM.INFO_SCREEN_CONTACT,s.PrinaDailyActionType.DIALOG_APPEAR),()=>{var e;null===(e=y.current)||void 0===e||e.call(y)})),[]);let Ge,ze,qe=null,We=null,Ve=null,Ye=null,Ke=null,Xe=null,Qe=new ArrayBuffer(0),Je="";(0,l.isMDBackend)()?(Qe=se,Je=be,Xe=(0,o.getABPropConfigValue)("adv_v2_m6")?h.default.t(776,{contactName:c.formattedShortName}):h.default.t(775,{contactName:c.formattedShortName})):(Qe=c.verificationBinary,Je=c.verificationString,Xe=q.fbt._("Scan the code on your contact's phone, or ask them to scan your code, to verify your messages and calls to them are end-to-end encrypted. You can also compare the number above to verify. This is optional.",null,{hk:"1Vypk2"}));Qe&&(v.default&&(qe=(0,Z.jsx)("div",{className:D.default.section,children:(0,Z.jsx)(M.default,{type:"primary",onClick:G?Oe:Fe,children:G?q.fbt._("Turn Off Camera",null,{hk:"3OyAHl"}):q.fbt._("Scan Code",null,{hk:"170pLA"})})})),We=(0,Z.jsxs)("div",{className:D.default.section,children:[(0,Z.jsx)(M.default,{type:"primary",onClick:Ue,children:q.fbt._("Upload Code",null,{hk:"2aJIAo"})}),(0,Z.jsx)("p",{className:D.default.dragAndDropExplanation,children:oe?q.fbt._("Release to verify…",null,{hk:"2K08kb"}):null})]}),Ve=(0,Z.jsx)("form",{ref:b,children:(0,Z.jsx)("input",{ref:I,accept:"image/*",type:"file",style:{display:"none"},onChange:Ne,onClick:e=>e.stopPropagation()})}));G&&ae&&(Ye=(0,Z.jsx)(pe,{stream:ae,disposeStream:y.current,onCapture:Be,onClose:Oe}));K&&(Ke=(0,Z.jsx)(fe,{children:te}));n?Ge=He:ze=He;return(0,Z.jsxs)(E.default,{onDrop:e=>{c.verificationBinary&&c.verificationString&&Ne(e)},onDragChange:e=>{ie(e)},children:[(0,Z.jsxs)(j.DrawerHeader,{type:j.DRAWER_HEADER_TYPE.SMALL,rtlFixIfOnDarwin:!0,onBack:ze,onCancel:Ge,children:[(0,Z.jsx)(B.TextDiv,{theme:"title",children:q.fbt._("Verify Security Code",null,{hk:"1vTVgt"})}),(0,Z.jsxs)(B.TextDiv,{theme:"small",children:[h.default.t(853),h.default.t(254),c.formattedUser]})]}),Ye,Ke,(0,Z.jsx)(S.default,{children:(0,Z.jsxs)("div",{className:D.default.form,children:[(0,Z.jsxs)("div",{className:D.default.photo,children:[(0,Z.jsx)(le,{binary:Qe,contact:c,visible:A}),(0,Z.jsx)(ue,{visible:N}),(0,Z.jsx)(ce,{visible:U})]}),(0,Z.jsx)("div",{className:D.default.section,children:(0,Z.jsx)("div",{className:D.default.code,dir:"ltr",children:(0,Z.jsx)(de,{string:Je})})}),(0,Z.jsx)("div",{className:D.default.section,children:(0,Z.jsxs)("p",{className:D.default.explanation,children:[(0,Z.jsxs)("span",{children:[Xe," "]}),(0,Z.jsx)(P.default,{onClick:()=>{(0,i.isPrivacyNarrativeV1Enabled)()&&(0,x.incrementPrinaDailyCount)(_.default.PRIVACY_HIGHLIGHT_SURFACE_ENUM.INFO_SCREEN_CONTACT,s.PrinaDailyActionType.DIALOG_SELECT),(0,R.openExternalLink)((0,d.getE2EFaqUrl)())},children:h.default.t(394)})]})}),qe,We,Ve]})})]})};var r=n(450796),o=n(257243),i=n(227101),l=n(88555),s=n(407937),d=n(221310),u=n(211586),c=n(941906),f=n(961552),p=n(183944),h=a(n(568064)),m=te(n(435232)),g=n(914597),v=a(n(544254)),x=n(843020),C=n(117789),y=n(978820),_=a(n(471410)),b=a(n(637360)),E=a(n(60453)),S=a(n(69637)),j=n(994790),k=n(21976),T=n(818671),w=a(n(726)),D=a(n(42037)),I=n(850514),M=a(n(39770)),P=a(n(499360)),A=n(552596),O=a(n(716194)),R=n(912591),L=te(n(161849)),N=n(111054),F=a(n(23217)),B=n(113923),U=a(n(523425)),H=n(719380),G=a(n(294184)),z=n(484902),q=n(548360),W=a(n(731339)),V=n(667294),Y=a(n(970393)),K=n(587550),X=n(735461),Q=n(346428),J=a(n(895402)),$=a(n(803409)),Z=n(785893);function ee(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(ee=function(e){return e?n:t})(e)}function te(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=ee(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}const ne=(e,t)=>!!e&&!!t&&ye(e.publicKey,t.publicKey)&&ye(e.identifier,t.identifier),ae=(e,t)=>{if(!e&&!t)return!0;const n=(0,z.decodeProtobuf)(C.CombinedFingerprintSpec,e),a=(0,z.decodeProtobuf)(C.CombinedFingerprintSpec,t);if(!n&&!a)return!0;if(!(null!=n.version||null!=a.version||n.localFingerprint||a.localFingerprint||n.remoteFingerprint||a.remoteFingerprint))return!0;if(n.version!==a.version)return!1;const r=ne(n.localFingerprint,a.localFingerprint),o=ne(n.remoteFingerprint,a.remoteFingerprint);return r&&o};function re(e){const{binary:t=null,visible:n}=e,a=(0,V.useRef)(null),r=(0,V.useRef)(null),[o,i]=(0,V.useState)(!1),[l,s]=(0,V.useState)(null),[d,f]=(0,V.useState)(null),p=()=>{o||i(!0)},h=()=>{o||i(!0)},m=()=>{o&&i(!1)};(0,V.useEffect)((()=>{if(t){const e=a.current;if(!e||!t)return s(null),void f(null);if(ae(l,t))return;for(r.current&&(r.current=null);e.firstChild;)e.removeChild(e.firstChild);r.current=new b.default(e,{text:t,width:c.QR_EDGE/2,height:c.QR_EDGE/2,correctLevel:b.default.CorrectLevel.L}),s(t);const n=e.getElementsByTagName("canvas")[0];if(!n)return void f(null);(e=>{const t=document.createElement("canvas");t.width=e.width+10,t.height=e.height+10;const n=t.getContext("2d");n.fillStyle="white",n.fillRect(0,0,t.width,t.height),n.drawImage(e,5,5),t.toBlob((e=>f(e)),"image/png")})(n)}}),[t,l]);let g=null;if(n){let t=null;if(o&&d){const n=e.contact.formattedUser||"",a=H.ContactCollection.assertGet((0,y.getMaybeMeUser)()).formattedUser;t=(0,Z.jsx)(O.default,{file:d,download:"Verification Code between "+a+" and "+n,extension:u.AllowedFileExtensions.PNG,children:(0,Z.jsx)(I.AvatarOverlay,{text:q.fbt._("Download code",null,{hk:"uiMxK"})})})}g=(0,Z.jsxs)("div",{onMouseOver:p,onMouseEnter:h,onMouseLeave:m,children:[t,(0,Z.jsx)("div",{className:D.default.circle,ref:a})]})}return g}const oe=(0,V.memo)(re,((e,t)=>ae(t.binary,e.binary)&&t.visible===e.visible));function ie(e){let{visible:t}=e,n=null;return t&&(n=(0,Z.jsx)("div",{className:D.default.circle,children:(0,Z.jsx)("div",{className:D.default.spinner,children:(0,Z.jsx)(N.Spinner,{size:52,stroke:4})})})),n}function le(e){let{binary:t,contact:n,visible:a}=e,r=null;return a&&(r=(0,Z.jsxs)("div",{className:(0,G.default)(D.default.container,D.default.circleContainer),children:[(0,Z.jsx)(oe,{visible:!!t,binary:t,contact:n}),(0,Z.jsx)(ie,{visible:!t})]})),r}function se(e){if(!e.string)return(0,Z.jsx)("div",{children:h.default.t(419)});const t=e.string;if(60!==t.length)return __LOG__(3)`verificationString:render props.string should be ${60} characters long instead of ${t.length}.`,(0,Z.jsx)("div",{children:q.fbt._("Couldn't display security code. You can verify using the QR code instead.",null,{hk:"3yMFFL"})});const n=[];for(let e=0;e<3;e++){const a=[];for(let n=0;n<4;n++){const r=[];for(let a=0;a<5;a++){const o=t.charAt(5*e*4+5*n+a);r.push((0,Z.jsx)("span",{className:D.default.digit,children:o},a))}a.push((0,Z.jsx)("span",{className:D.default.block,children:r},n))}n.push((0,Z.jsx)(A.SelectableDiv,{className:D.default.row,selectable:!0,children:a},e))}return(0,Z.jsx)(A.SelectableDiv,{selectable:!0,children:n})}const de=(0,V.memo)(se,((e,t)=>t.string===e.string));function ue(e){let{visible:t}=e,n=null;return t&&(n=(0,Z.jsx)("div",{className:(0,G.default)(D.default.container,D.default.checkmarkContainer),children:(0,Z.jsx)("div",{className:D.default.checkmark,children:"✓ "})})),n}function ce(e){let{visible:t}=e,n=null;return t&&(n=(0,Z.jsx)("div",{className:(0,G.default)(D.default.container,D.default.errorContainer),children:(0,Z.jsx)("div",{className:D.default.error,children:"!"})})),n}function fe(e){let{children:t}=e;return(0,Z.jsx)("div",{className:D.default.errorBanner,children:t})}function pe(e){const{stream:t,onCapture:n,disposeStream:a}=e,r=(0,V.useRef)(null),o=(0,V.useRef)(!1),i=(0,V.useRef)(null),l=(0,V.useRef)(null),[s]=(0,Y.default)((()=>{var e;const t=null===(e=i.current)||void 0===e?void 0:e.underlyingVideo();if(!t)return;const a=document.createElement("canvas");a.width=t.videoWidth/2,a.height=t.videoHeight/2;a.getContext("2d").drawImage(t,a.width/2,a.height/2,a.width,a.height,0,0,a.width,a.height),a.toBlob((e=>{const t=window.URL.createObjectURL(e);__LOG__(2)`objectURL: ${t}`,n(t)}),"image/jpeg",1)}),200);(0,V.useEffect)((()=>((0,L.isSrcObjectInVideoElement)()||(r.current=window.URL.createObjectURL(t)),()=>{t&&(null==a||a(),r.current&&window.URL.revokeObjectURL(r.current))})),[]);const d=()=>{var e;const t=null===(e=i.current)||void 0===e?void 0:e.underlyingVideo(),n=l.current;if(!t||!n)return;const a=t.offsetHeight,r=t.offsetWidth,o=r/3,s=o;n.style.width=o+"px",n.style.height=s+"px",n.style.margin=(a-s)/2+"px "+(r-o)/2+"px"},u=()=>{!0!==o.current&&(d(),s())};(0,K.useListener)(window,"resize",d);let c=null;var f;e.stream&&(c=(0,Z.jsxs)("div",{className:D.default.webcam,children:[(0,Z.jsx)("div",{className:D.default.webcamVideo,children:(0,Z.jsx)(U.default,{autoPlay:!0,ref:i,onPlay:u,src:null!==(f=r.current)&&void 0!==f?f:void 0,srcObject:r.current?void 0:e.stream,width:"100%"})}),(0,Z.jsx)("div",{className:D.default.overlay,ref:l}),(0,Z.jsx)("button",{onClick:e.onClose,className:D.default.btnClose,children:(0,Z.jsx)(F.default,{name:"x-alt"})})]}));return c}const he=0,me=1,ge=2,ve=3,xe=4,Ce=5;function ye(e,t){if(!e||!t)return!1;const n=new Uint8Array(e),a=new Uint8Array(t),r=n.length;if(r!==a.length)return!1;for(let e=0;e<r;e++)if(n[e]!==a[e])return!1;return!0}},514551:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(568064)),o=n(694816),i=a(n(60453)),l=a(n(69637)),s=n(994790),d=a(n(498129)),u=n(316593),c=n(113923),f=n(950452),p=n(478123),h=n(597628),m=a(n(366034)),g=n(964551),v=a(n(294184)),x=n(548360),C=n(667294),y=n(735461),_=n(785893);function b(e){const{colorHex:t,isDefault:n}=e,[a,i]=(0,C.useState)(!1),l=()=>n?p.DEFAULT_CHAT_WALLPAPER:t,s=e.isDefault?(0,_.jsx)("span",{className:d.default.wallpaperDefaultTitle,"data-testid":"wallpaper-default-title",children:r.default.t(221)}):null,u=(0,v.default)(d.default.wallpaperColorCanvas,{[d.default.canvasHover]:a,[d.default.canvasActive]:e.isSelected,[d.default.canvasDefault]:e.isDefault});return(0,_.jsx)("span",{className:u,style:{backgroundColor:e.colorHex},onMouseOver:()=>{a||(i(!0),m.default.trigger("wallpaper_color_preview",l()))},onMouseEnter:()=>{a||(i(!0),m.default.trigger("wallpaper_color_preview",l()))},onMouseLeave:()=>{a&&(i(!1),m.default.trigger("wallpaper_color_preview"))},onClick:()=>{const e=l(),t=m.default.get("defaultPreference");t&&e!==t.wallpaperColor&&(t.set("wallpaperColor",e),o.ToastManager.open((0,_.jsx)(f.Toast,{msg:r.default.t(681),id:(0,f.genId)()})))},title:e.isDefault?r.default.t(221):null,children:s})}function E(e){let t;const{colors:n}=e,a=(0,y.useOptionalModelValues)(e.chatPreference,["wallpaperColor","showDoodle"]),r=null==a?void 0:a.wallpaperColor,i=()=>{if(a){const e=!a.showDoodle;a.set("showDoodle",e),o.ToastManager.open((0,_.jsx)(f.Toast,{msg:e?x.fbt._("Chat wallpaper doodles added",null,{hk:"4wtFSD"}):x.fbt._("Chat wallpaper doodles removed",null,{hk:"3cppZY"}),id:(0,f.genId)()}))}},l=null==a?void 0:a.showDoodle,s=n.map((e=>(0,_.jsx)(b,{colorHex:e,isSelected:r===e,isDefault:!1},e))),h=(0,_.jsx)(b,{isSelected:r===p.DEFAULT_CHAT_WALLPAPER,isDefault:!0},p.DEFAULT_CHAT_WALLPAPER);s.unshift(h);for(let e=0;e<2;e++)s.push((0,_.jsx)("div",{className:d.default.wallpaperColorEmpty},"emptyEl"+e));return g.ServerProps.wallpapersV2&&(t=(0,_.jsxs)("div",{className:d.default.wallpaperApplyDoodle,children:[(0,_.jsx)(u.CheckBox,{onChange:i,checked:!!l}),(0,_.jsx)(c.TextSpan,{className:d.default.checkboxLabel,theme:"small",children:x.fbt._("Add WhatsApp Doodles",null,{hk:"4rcSeh"})})]})),(0,_.jsxs)(_.Fragment,{children:[t,(0,_.jsx)("div",{className:d.default.wallpaperColorGrid,children:s})]})}function S(e,t){const n=(0,C.useContext)(h.ThemeContext);return(0,C.useEffect)((()=>(g.ServerProps.wallpapersV2&&m.default.trigger("wallpaper_drawer_open"),()=>{m.default.trigger("wallpaper_color_preview"),g.ServerProps.wallpapersV2&&m.default.trigger("wallpaper_drawer_close")})),[]),(0,_.jsxs)(i.default,{ref:t,children:[(0,_.jsx)(s.DrawerHeader,{title:r.default.t(682),onBack:e.onClose,type:s.DRAWER_HEADER_TYPE.LARGE}),(0,_.jsx)(l.default,{children:(0,_.jsx)(E,{colors:(0,p.getWallpaperColors)(n.theme),chatPreference:m.default.get("defaultPreference")})})]})}var j=(0,C.forwardRef)(S);t.default=j},174410:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,u.useModelValues)(e.statusV3,["id","t","hasUnread","unreadCount","totalCount","contact"]),n=(0,u.useModelValues)(e.contact,["formattedName","statusMute","isPSA"]),a=(0,d.default)({[o.default.dimmed]:n.statusMute}),f=n.isPSA?null:r.Clock.relativeDateAndTimeStr(t.t),p=n.isPSA?(0,c.jsxs)("span",{className:o.default.verified,children:[n.formattedName,(0,c.jsx)("div",{className:o.default.icon,children:(0,c.jsx)(s.default,{name:"psa-verified"})})]}):n.formattedName;return(0,c.jsx)(l.default,{className:a,customImage:!0,theme:"status-list",image:(0,c.jsx)(i.default,{statusV3:t,contact:n,onClick:e.onClick}),primary:p,secondary:f,onClick:e.onClick,contextEnabled:()=>!1},t.id.toString())};var r=n(40234),o=a(n(349787)),i=a(n(515265)),l=a(n(49107)),s=a(n(23217)),d=a(n(294184)),u=n(735461),c=n(785893)},515265:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{theme:t,thumbnailPlaceholder:n,msg:a}=e,r=(0,p.useModelValues)(e.statusV3,["lastStatus"]),i=(0,p.useModelValues)(e.contact,["statusMute"]),u=null!=a?a:r.lastStatus,c=m(t);let g;g=null!=n?n:u?(0,h.jsx)(d.DetailImage,{id:u.sender,theme:"status_v3",size:40}):null;const x=!(0,o.isStatusV3ProfilePhotoRingEnabled)();return(0,h.jsxs)("div",{className:(0,f.default)(s.default.container,c),role:e.role||"",onContextMenu:null,onClickCapture:t=>{var n;null===(n=e.onClick)||void 0===n||n.call(e),t.stopPropagation(),t.preventDefault()},children:[i.statusMute||"status-panel"===t?null:(0,h.jsx)(l.StatusV3ImageRing,{statusV3:r,breakRing:x}),(0,h.jsx)(v,{msg:u,theme:t,thumbnailPlaceholder:g})]})};var r=n(115461),o=n(263161),i=a(n(389867)),l=n(924391),s=a(n(639756)),d=n(288984),u=a(n(804293)),c=n(947786),f=(n(118146),a(n(294184))),p=n(735461),h=n(785893);function m(e){return"status-panel"===e?s.default.thumbSizeLarge:s.default.thumbSizeSmall}function g(e){const{msg:t,theme:n}=e;return(0,h.jsx)("div",{className:(0,f.default)(s.default.statusImage,m(n)),style:{backgroundColor:t.statusV3TextBg},children:(0,h.jsx)("div",{className:(0,f.default)(s.default.textThumb,m(n)),children:(0,h.jsx)(c.StatusV3Text,{msg:t,theme:null!=n?n:"status-thumbnail"})})})}function v(e){const{msg:t,theme:n,thumbnailPlaceholder:a}=e,o=m(n),l=s.default.statusImage;return t?i.default.isPSA(t.sender)?(0,h.jsx)("div",{className:(0,f.default)(s.default.thumbContainer,o,s.default.statusImageFallbackBackground),children:a}):t.type===r.MSG_TYPE.CHAT?(0,h.jsx)(g,{msg:t,theme:n}):(0,h.jsx)(u.default,{containerClassName:(0,f.default)(s.default.thumbContainer,o,s.default.statusImageFallbackBackground),childClassName:(0,f.default)(l,o),msg:t,thumbnailPlaceholder:a}):(0,h.jsx)("div",{className:(0,f.default)(l,o,s.default.statusImageFallbackBackground)})}},795627:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.StickerIcon=function(e){let{url:t,xstyle:n}=e;const[a,{isIntersecting:f}]=(0,s.default)({root:null,rootMargin:"0px",threshold:0}),p=(0,i.useRef)(f);return p.current=p.current||f,(0,d.jsx)("div",{ref:a,className:(0,l.default)(u,n),children:p.current&&(0,d.jsx)(o.ImgWithFallback,{fallbackSVG:"sticker",wrapOptions:{centerWrapperChild:!0,wrapperClassName:""},className:(0,l.default)(c),size:"NONE",shape:r.DetailImageShape.Square,imgProps:{src:t,draggable:!1},theme:o.Theme.Transparent})})};var r=n(288984),o=n(650981),i=n(667294),l=a(n(156720)),s=a(n(844692)),d=n(785893);const u={boxSizing:"cm280p3y",height:"graaj7av",width:"jgly3g7g",minHeight:"lignnmtc",minWidth:"j3e9rhaw",position:"g0rxnol2"},c={width:"ln8gz9je",height:"ppled2lx"}},448820:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{stickerPacks:t,onStickerPackDetails:n}=e,a=(0,c.default)((()=>new l.default)),p=(0,u.useMemo)((()=>t.map((e=>({itemKey:e.id,stickerPack:e})))),[t]);return(0,f.jsx)(i.default,{flatListControllers:[a.current],children:(0,f.jsx)(o.FlatList,{flatListController:a.current,direction:"vertical",forceConsistentRenderCount:!1,data:p,renderItem:e=>(0,f.jsx)(r.default,{data:e,onClick:n}),defaultItemHeight:d.STICKER_LIST_ITEM_HEIGHT,keyOrder:s.KeyOrder.INVERSE})})};var r=a(n(594310)),o=n(747915),i=a(n(944942)),l=a(n(630855)),s=n(243882),d=n(490669),u=n(667294),c=a(n(616223)),f=n(785893)},594310:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{stickerPack:t}=e.data,n=(0,c.jsxs)("div",{className:(0,u.default)(f.title),children:[(0,c.jsx)(l.EmojiText,{text:t.name,ellipsify:!0,titlify:!0}),t.animated?(0,c.jsx)(s.default,{name:"round-play",className:(0,u.default)(f.animatedIcon),width:16,height:16}):null]}),a=[],p=Math.min(6,t.previewImageIds.length);for(let e=0;e<p;e++){const n=t.previewImageIds[e];a.push((0,c.jsxs)(d.Fragment,{children:[(0,c.jsx)(i.default,{breakpoint:94*(e+1)-22,inverseToContainer:!0,maxWidth:"100%",minWidth:0}),(0,c.jsx)(r.StickerIcon,{url:`https://static.whatsapp.net/sticker?cat=sticker_preview_png&id=${n}`,xstyle:f.stickerIcon})]},n))}const h=(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(l.EmojiText,{text:t.publisher,ellipsify:!0}),(0,c.jsx)("div",{className:(0,u.default)(f.stickerIconsContainer),children:a})]});return(0,c.jsx)(o.default,{testid:"sticker-pack-list-item",theme:"sticker-pack",primary:n,secondary:h,onClick:()=>{e.onClick(t)},className:(0,u.default)(f.stickerPack),contextEnabled:()=>!1},t.id)};var r=n(795627),o=a(n(49107)),i=a(n(808334)),l=n(965417),s=a(n(23217)),d=n(667294),u=a(n(156720)),c=n(785893);const f={stickerPack:{paddingStart:"lyvj5e2u",color:"h15s16sg"},title:{display:"p357zi0d",alignItems:"gndfcl4n"},animatedIcon:{marginStart:"oz0g9ue8",color:"kw851w1p"},stickerIconsContainer:{display:"p357zi0d",flexDirection:"sap93d0t",flexWrap:"dnb887gk",marginTop:"dj1c3cmq"},stickerIcon:{marginEnd:"gwq3iy2m"}}},211586:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AllowedFileExtensions=void 0;const a=n(76672)({PNG:".png",TXT:".txt",ZIP:".zip"});t.AllowedFileExtensions=a},12348:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isKeyFiniteAndAllowed=t.PIN_LENGTH=void 0;t.PIN_LENGTH=6;const n=["Backspace","Tab"];t.isKeyFiniteAndAllowed=function(e){return!Number.isFinite(parseInt(e.key,10))&&!n.includes(e.key)}},156313:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const[t,n]=(0,r.useState)((()=>(0,a.isFeatureFlagEnabled)(e)));return(0,r.useEffect)((()=>(0,a.listen)(e,((e,t)=>{t&&n(Boolean(e&&!e.isDeactivated))}))),[]),t};var a=n(115578),r=n(667294)},818878:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.getCachedOrdersInfoFromChat=function(e){return{fetcher:Promise.resolve(p(e)),unsubscribe:()=>{}}},t.getMergedContactAndOrderInfoMap=function(e,t){return(0,r.default)((0,r.default)({},e),t.reduce(((e,t)=>(e[t.orderInfo.referenceId]=t,e)),{}))},t.getMergedOrderStatusInfoMap=f,t.getNotCachedOrdersInfoFromChat=function(e){let t,n;const a=()=>{n(),clearInterval(t)};return{fetcher:new Promise((r=>{t=setInterval((()=>{(0,o.loadEarlierMsgs)(e,e.msgs)}),200),n=e.msgs.onMsgLoadStateChange((()=>{e.msgs.msgLoadState.noEarlierMsgs&&(r(p(e)),a())}))})),unsubscribe:a}},t.getOrderDisplayDate=void 0,t.getOrdersInfoFromMsgs=h,t.removeContactAndOrdersInfoFromMap=function(e,t){const n=(0,r.default)({},e);return t.forEach((e=>{delete n[e.orderInfo.referenceId]})),n},t.removeOrderStatusInfoFromMap=function(e,t,n){const{ordersStatusInfo:a}=e,{ordersStatusInfo:[{refId:r}]}=t,{orderStatusInfoMap:o}=n;return delete o[r],f(o,a)};var r=a(n(81109)),o=n(322911),i=n(40234),l=n(115461),s=n(978820),d=a(n(355152)),u=n(847869),c=n(511853);n(17304);function f(e,t){return(0,r.default)((0,r.default)({},e),t.reduce(((e,t)=>(e[t.refId]=t,e)),{}))}function p(e){const{contact:t,msgs:n}=e;return h(n.toArray(),t)}function h(e,t){return e.reduce(((e,n)=>{var a;const[{name:r,buttonParamsJson:o}]=(null===(a=n.interactivePayload)||void 0===a?void 0:a.buttons)||[{}];return n.from.equals((0,s.getMeUser)())&&(n.nativeFlowName===d.default.ORDER_DETAILS?function(e,t,n,a,r){const o=t.t,i=(0,u.paramsJsonToOrderInfo)(a,r);i&&e.contactsAndOrdersInfo.push({contact:n,orderInfo:i,timestamp:o,interactiveMsg:m(t)})}(e,n,t,r,o):n.nativeFlowName===d.default.ORDER_STATUS&&function(e,t,n){const a=(0,c.paramsJsonToOrderStatusInfo)(t,n);a&&e.ordersStatusInfo.push(a)}(e,r,o)),e}),{contactsAndOrdersInfo:[],ordersStatusInfo:[]})}function m(e){const t=e.safe();return t.type===l.MSG_TYPE.INTERACTIVE?t:null}t.getOrderDisplayDate=(e,t,n)=>{const a=i.Clock.relativeDateStr(e[t[n]].timestamp).toString();return a===(n>0?i.Clock.relativeDateStr(e[t[n-1]].timestamp).toString():"")?"":a}},509349:(e,t,n)=>{e.exports=n.p+"img/animated-doodle_600127bdb5f7627ede5cd4ef320f55b0.png"},310093:(e,t,n)=>{e.exports=n.p+"img/sticker-pack-empty_9f0c66fc3aec33b2f78f0ae1721e053b.png"},704830:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={editMain:"_1GBQ2",list:"_2ORz2",rowMain:"_1DFmp",rowCheckbox:"_2pPkR",rowLabel:"_1NGCs",disabled:"YVobU",loadingSpinner:"_2-B6b",searchBackground:"_1Fb5R"}},573308:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={verifiedNameIcon:"_3PMWi",noPaddingTop:"_23GE5"}},839658:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={panel:"_1TOgh",tileContainer:"_1vfS7",imageTile:"_2a_Q7",imageThumb:"Cbc-m",deleteIcon:"_2WYev",btnAddContainer:"_1ar7j",btnAddText:"RAMrK",errorMessage:"_3E49Y"}},231516:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={list:"_2V4Ys",noSections:"_82KlQ"}},4389:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={title:"_3Q5hz"}},770180:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={title:"_13MJe",text:"hM3sj",icon:"_1p9YY"}},487240:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={container:"_2RE0a",border:"_3t6bN",square:"_36Gk7",avatar:"_1b8fw",count:"_1gLP4",two:"_1EzI5",first:"JOgRb",second:"_3Q0g1",three:"_33l2L",third:"_1MivT",four:"_18BoY",fourth:"_1P7KC"}},134531:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={imageGallery:"_3uMAp",imageGalleryList:"_1WX5F",imageGalleryItem:"MkTEt",imageGalleryItemSpacer:"_2ppZW",imageGalleryItemImage:"_6CxGV",imageGalleryItemOverlay:"_7mUkD",selected:"_1KnO5",imageGalleryFooter:"PYlBE",focusAnimation:"_30mp5",focusAnimationKeyframes:"_3i50e"}},254794:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={positioningContainer:"_3lPuS",resultsContainer:"_3I-Ax",overlayContainer:"_2ERUw",mediaCaption:"_356RS"}},685747:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={container:"_1w1m1",disabled:"_3Sg2g",count:"ItnCt",large:"_3OTTU"}},52144:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={positioner:"_388vZ",container:"ewANj",resizableInput:"_1L8rJ",emojiButton:"_3tKNQ",buttonIconWrapper:"_1F5dF",inputContainer:"_3DCJ3",hiddenText:"_269u7",hiddenTextLine:"_3F7_-",emojiPlaceholder:"_39TQD"}},250907:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={container:"_2nStn",inputContainer:"_1VmmK",videoCaption:"_2M4pc",documentCaption:"_33jxz",buttonContainer:"_26J91",clearBtn:"_3EUIt",inputEmoji:"I1HlI",charCounter:"_3HWI2",suggestionsPositioner:"_3-qS1",suggestionsContainer:"_1Uy4i",secondaryButtonContainer:"_3g507"}},630635:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={thumb:"_2AkjL",active:"_31gut",bodyWrapper:"_1iECW",body:"_1hZLd",bodyIcon:"_299B_",btnDelete:"_1By33"}},90388:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={container:"_34aQy",header:"qAj2u",headerRight:"_3PqRX",canvasContainer:"_1PFn9",cropRotateContainer:"_3zRbB",closeButton:"_1gvdP",closeButtonPlaceholder:"_1Ao72",canvas:"_153i9",footer:"_1nPzf",bottomToolbar:"_1nNuD",captionInputContainer:"_1iQr1",captionInputHidden:"_6dYhh"}},979334:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={container:"_1Mcu-",previewOnly:"_2NB7f",documentPreview:"_1yFH0",dropOverlay:"_1PdGl",dropOverlayOutline:"_2HexZ",spinner:"pzFG8",footer:"_1HI4Y",addMediaButton:"_1xotB",addMediaButtonDisabled:"WAMhx",filmstripContainer:"_1vAZI",thumbs:"_7Tfhi",sendButton:"_33pCO",captureFooter:"_1z1Aw"}},610706:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={container:"_3gx1m",cropperContainer:"_2mSFk"}},858099:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={container:"jcXC6"}},891976:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={container:"_2SXhH",footer:"UJ-0N"}},286382:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={container:"_2wtUo",selected:"_3z23o",disabled:"wZyqj",icon:"ZZ0GN",rotate:"_2X1cd",body:"_2O4Bw",caret:"_104hn"}},104837:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={container:"_3eK79",colorChipsContainer:"_1E-L7"}},388501:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={colorButton:"_2J8i-",primaryColorChip:"fteqj",primaryColorChipMedium:"_1Rjww",secondaryColorChip:"_1H9V5",active:"_3Jsf_",hover:"_1jiBu",selected:"_1lanH",colorChipWithBorder:"_2WYx6"}},752418:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={container:"_1LRKO",rotateLeftButton:"_3dKFO"}},943384:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={container:"QUfeO",fontLabel:"_3OMGG",icon:"_3SJCV"}},216702:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={item:"_1j1xr",selected:"_2DKLD",sansSerif:"_106wS",serif:"_1yqqW",noricanRegular:"bzq8z",bryndanWrite:"_3Pj9c",oswaldHeavy:"ah3iR",alignmentContainer:"_2lKFu",alignmentIcon:"mi3vs",alignmentIconSelected:"_1KlZW"}},189046:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={cirle:"_10ZsU",circleFilled:"_1ZATr",unchecked:"_1B4g5",checked:"_3s-4-"}},560349:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={container:"_1_bv-",thicknessButton:"_3bAiP",thicknessChip:"_3iRrK",selected:"_32C9L"}},877046:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={container:"JKr_m",media:"_3R3yC"}},271003:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={container:"_3fFxj",media:"_3lqv9",document:"hH6sl",text:"eAWMI",icon:"fDWKK"}},358523:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={container:"_1ULgK",media:"_2gN82",img:"OunMM",audio:"_3ZDt1",videoContainer:"_33jN5",spinner:"_1-L7X",video:"_2Vd8_",staticPreview:"sWhPU"}},738728:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={container:"_2nVq-",preview:"_1K_xd",caption:"_3xLDc",img:"_2zsdh",imgBorder:"_2Cuay"}},733621:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={defaultGroupIcon:"bSJ6w"}},663881:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={btnSend:"_1WEiG",attributionLink:"_4yicW",mediaBody:"_1YZ48",attribution:"_1nd00",footer:"iajo1",containerBackground:"_3rPvK",retake:"_3r-Fa",retakeIcon:"_3SS26",mediaElementBase:"_3ULIF",mediaElement:"_38bBM _3ULIF",hintText:"_1TwXp"}},477798:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={animation:"o43XS","play-ltr":"_1-zyO",playLtr:"_1-zyO","play-rtl":"_27Hce",playRtl:"_27Hce",versionInfo:"_1hWGI"}},423918:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={container:"_2BtE_",textContainer:"_2Tvyf",spinner:"HYKvS"}},50521:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={container:"_2136P",list:"C1Dd9",header:"K1c_P",item:"_16f8P",right:"DMk3i",left:"_1mO8w",close:"_38Gu8",name:"_2z4ea",time:"_4VLPt"}},394692:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={wrapper:"_9Gs_R",offline:"_3rEcJ",circle:"_2Xn1u",text:"_1nFpn",notification:"p9CjV",ended:"_2OrJW",lastUpdated:"_3VPfk"}},426658:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={wrapper:"_26J0I",inactive:"_2ZG5x",offline:"Pc7bU",circle:"_1487t",text:"_2WNWn",backToCenter:"_3LWZ9",visible:"_2Ozk7"}},589332:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={container:"_2BPRJ",map:"_312iE",authFailed:"xgGDH",loading:"L5P7F"}},792018:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={container:"_3rs7K",selected:"_10G_J",glow:"h5TUN",stale:"_3WyhQ",expired:"_1HO_K",pin:"_2JeQm"}},806304:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={list:"D0Q5P",stopSharingButton:"_8wYL"}},22828:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={popup:"_1O7kH",container:"_1qWAL",twoLines:"_2dn9y",name:"_2UN5N",status:"_1fM0V",menuButton:"_2UenO",triangle:"_1NoUg"}},235456:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={photoPickerWrapper:"_1Mc0y",scale:"_55HVY",nameWrapper:"_2LTDQ","well-animation":"_1EgwP",wellAnimation:"_1EgwP",phoneIcon:"_9P72S",phoneField:"_1zywm",infoText:"_3FDYs",bannedShopInfoText:"_1EFZ5",content:"_3XR9y"}},555771:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={body:"nWPOn",vcardWrapper:"j80SY",btnContainer:"_386ov",btnPosition:"_3o41r"}},42037:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={form:"_1_psp",section:"S4s9L","well-animation2":"_3PdLd",wellAnimation2:"_3PdLd",circle:"_1C64q",spinner:"_3Ea-7",container:"xvgoq",show:"_2FUyH",circleContainer:"_28mPV",checkmarkContainer:"_1TMgk",errorContainer:"_1ScAm",checkmark:"qlZ5I",error:"_3Fr6b",errorBanner:"_3PYWJ",code:"xYqL-",row:"hsOn4",block:"_3WPv2",digit:"_3Muc-",explanation:"_37tSc",dragAndDropExplanation:"Lbmtf",photo:"_1Ua6g","drawer-scale":"_2OqK6",drawerScale:"_2OqK6",webcam:"_17NcY",webcamVideo:"PKLd7",btnClose:"_35Nbq",overlay:"_3APck"}},498129:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={wallpaperApplyDoodle:"_1aWJq",checkboxLabel:"XvSmy",wallpaperColorGrid:"KzJy3",wallpaperColorCanvas:"Iwkc0",wallpaperDefaultTitle:"_2jzUd",wallpaperColorEmpty:"_1qqLM",canvasHover:"_3Mp8z",canvasActive:"_2MCR7",canvasDefault:"GRVkn"}},349787:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={dimmed:"khEuM",verified:"_3e7DF",icon:"_3OVY5"}},639756:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={textThumb:"qgEhU",thumbSizeSmall:"_14N8a",thumbSizeLarge:"_2dKet",statusImage:"_37ckN",statusImageFallbackBackground:"_14MS9",container:"_3xFA4",thumbContainer:"_1cDhn"}}}]);
//# sourceMappingURL=https://web.whatsapp.com/lazy_loaded_low_priority_components.17cddc996d5a16ceb2b1.js.map
