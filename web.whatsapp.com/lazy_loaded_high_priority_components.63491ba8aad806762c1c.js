/*! Copyright (c) 2021 WhatsApp Inc. All Rights Reserved. */
(self.webpackChunkwhatsapp_web_client=self.webpackChunkwhatsapp_web_client||[]).push([[7205],{16990:e=>{var t=Array.prototype.reverse;e.exports=function(e){return null==e?e:t.call(e)}},24165:(e,t,a)=>{"use strict";var l=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.setGroupDesc=function(e,t=""){return p((0,h.unproxy)(e),t)};var s=i(a(67294)),n=a(84481),r=i(a(33766)),o=a(54438),d=l(a(12536)),u=i(a(80162)),c=a(8120),f=i(a(68127)),h=a(6578);function p(e,t="",a=(0,n.genId)()){var l,i,h,m=t&&t.trim();if(m===(null===(l=e.groupMetadata)||void 0===l?void 0:l.desc))return Promise.reject(new d.ActionError);""===m&&(m=null);var E=(0,c.sendSetGroupDescription)(e.id,m,(0,f.default)(),null===(i=e.groupMetadata)||void 0===i?void 0:i.descId),g=null===(h=e.groupMetadata)||void 0===h?void 0:h.desc,v=new n.ActionType(u.default.t(111)),_=E.then((()=>new n.ActionType(u.default.t(113),{actionText:u.default.t(211),actionHandler:()=>p(e,g,a)}))).catchType(o.ServerStatusCodeError,(e=>{if(e.status>=400)return new n.ActionType(u.default.t(112))})).catch((()=>(__LOG__(3)`models:chat:setGroupDesc dropped`,new n.ActionType(u.default.t(112),{actionText:u.default.t(207),actionHandler:()=>p(e,m,a)}))));return r.default.openToast(s.default.createElement(n.ActionToast,{id:a,initialAction:v,pendingAction:_})),E.then((t=>{var a;t._duplicate||(null===(a=e.groupMetadata)||void 0===a||a.set({desc:m||""}))})).catchType(o.ServerStatusCodeError,(()=>{}))}},44682:(e,t,a)=>{"use strict";var l=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.setGroupSubject=function(e,t=""){return p((0,f.unproxy)(e),t)};var s=i(a(67294)),n=a(84481),r=i(a(33766)),o=a(54438),d=l(a(12536)),u=i(a(80162)),c=a(8120),f=a(6578),h=a(4468);function p(e,t,a=(0,n.genId)()){var l=t.trim();if(!l)return Promise.reject(new d.ActionError);if(l===e.contact.name)return Promise.reject(new d.ActionError);var i=(0,c.sendSetGroupSubject)(e.id,l),f=e.contact.name,m=new n.ActionType(u.default.t(131)),E=i.then((()=>new n.ActionType(u.default.t(130,{subject:l}),{actionText:u.default.t(211),actionHandler:()=>p(e,f,a)}))).catchType(o.ServerStatusCodeError,(e=>{if(e.status>=400)return new n.ActionType(u.default.t(129))})).catch((()=>(__LOG__(3)`models:chat:setSubject dropped`,new n.ActionType(u.default.t(129),{actionText:u.default.t(207),actionHandler:()=>p(e,l,a)}))));return r.default.openToast(s.default.createElement(n.ActionToast,{id:a,initialAction:m,pendingAction:E})),i.then((t=>{if(!t._duplicate){var a={name:l};return(0,h.updateLocal)(e.contact.id,a).then((()=>{e.contact.set(a)}))}})).catchType(o.ServerStatusCodeError,(()=>{}))}},36418:(e,t,a)=>{"use strict";var l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{contact:t,onClick:a,contextMenu:l,isPendingParticipant:r,contextEnabled:o,onContext:d}=e,u=(0,n.default)(e.participant,["isAdmin"]);return i.default.createElement(s.default,{contact:t,admin:u.isAdmin,onClick:a,theme:"drawer-list",contextEnabled:()=>null!=o&&o(t),contextMenu:l,onContext:e=>d&&d(e,t),isPendingParticipant:r,showNotifyName:!0,waitIdle:!0})};var i=l(a(67294)),s=l(a(4457)),n=l(a(95607))},55689:(e,t,a)=>{"use strict";var l=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67154)),n=i(a(6479)),r=l(a(67294)),o=a(97066),d=i(a(27122)),u=i(a(77188)),c=i(a(80162)),f=i(a(80896)),h=i(a(30070)),p=i(a(32885));class m extends r.Component{constructor(...e){super(...e),this._setGallery=e=>{this._gallery=e},this._queryCollection=(e,t)=>{var{docMsgs:a,chat:l}=this.props;this.props.listeners.uiIdle((()=>{a.queryDocs(l,t)}))}}componentDidMount(){this.props.listeners.add(this.props.docMsgs,"add remove reset",(()=>{var e;null===(e=this._gallery)||void 0===e||e.forceUpdate()})),this.props.listeners.add(this.props.docMsgs,"query_doc_before",(()=>{var e;null===(e=this._gallery)||void 0===e||e.forceUpdate()}))}render(){var e,t=this.props,{docMsgs:a,listeners:l,chat:i}=t,f=(0,n.default)(t,["docMsgs","listeners","chat"]);return u.default.supportsFeature(u.default.F.MD_BACKEND)&&i.endOfHistoryTransferType===o.ConversationEndOfHistoryTransferModelPropType.COMPLETE_BUT_MORE_MESSAGES_REMAIN_ON_PRIMARY&&(e=r.default.createElement(d.default,{icon:r.default.createElement(p.default,{name:"content-chat"}),theme:"list",secondary:c.default.t(636)},c.default.t(637))),r.default.createElement(r.default.Fragment,null,r.default.createElement(h.default,(0,s.default)({ref:this._setGallery,msgsCollection:a,queryCollection:this._queryCollection,hasBefore:a.hasDocBefore,queryBefore:a.queryDocBefore,emptyText:c.default.t(1260),chat:i},f)),e)}}m.displayName="DocGallery";var E=(0,f.default)(m);t.default=E},18248:(e,t,a)=>{"use strict";var l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=null!=e.side?s.default.createElement("div",{className:r.default.side},e.side):null,a=(0,i.default)(r.default.container,{[r.default.multiline]:e.multiline});return s.default.createElement("div",{"data-a8n":n.default.key(e.a8nText),className:a,role:e.onClick?"button":null,onClick:e.onClick},s.default.createElement("div",{className:r.default.block},s.default.createElement("div",{className:r.default.main},e.children),t))};var i=l(a(94184)),s=l(a(67294)),n=l(a(55847)),r=l(a(41323))},74397:(e,t,a)=>{"use strict";var l=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{chat:t,groupMetadata:a,onClick:l}=e;return a?s.default.createElement(C,{groupMetadata:a,onClick:l}):s.default.createElement(v,{chat:t,onClick:l})},t.BaseEphemeralSettingRow=M;var s=i(a(67294)),n=a(97308),r=l(a(33766)),o=l(a(51115)),d=l(a(18248)),u=l(a(66322)),c=l(a(77188)),f=a(29989),h=l(a(80162)),p=l(a(72765)),m=l(a(32885)),E=a(38245);class g extends s.PureComponent{constructor(...e){super(...e),this._getEphemeralDuration=()=>{var e;return null!==(e=this.props.chat.ephemeralDuration)&&void 0!==e?e:0},this._unblockContact=()=>{var{chat:e,onClick:t}=this.props;e.contact.addPendingAction((0,n.unblockContact)(e.contact)).then((()=>{t(),r.default.closeModal()})).catch((()=>{}))},this._closeModal=()=>{r.default.closeModal()},this._openUnblockContactModal=()=>{r.default.openModal(s.default.createElement(o.default,{onOK:this._unblockContact,okText:h.default.t(1574),onCancel:this._closeModal,cancelText:h.default.t(1768)},this._getEphemeralDuration()?h.default.t(785):h.default.t(786)))},this._handleClick=()=>{var{chat:e,onClick:t}=this.props;e.contact.isContactBlocked?this._openUnblockContactModal():t()}}render(){return s.default.createElement(M,{ephemeralDuration:this._getEphemeralDuration(),canChange:!0,onClick:this._handleClick})}}g.CONCERNS={chat:["contact","ephemeralDuration"]},g.displayName="ContactEphemeralSettingRow";var v=(0,p.default)(g,g.CONCERNS);class _ extends s.PureComponent{constructor(...e){super(...e),this._closeModal=()=>{r.default.closeModal()},this._openNonAdminModal=()=>{r.default.openModal(s.default.createElement(o.default,{onOK:this._closeModal,okText:h.default.t(1941)},h.default.t(725)))},this._handleClick=()=>{var{onClick:e,groupMetadata:t}=this.props;t.canSetEphemeralSetting()?e():this._openNonAdminModal()}}render(){var e,{groupMetadata:t}=this.props;return s.default.createElement(M,{ephemeralDuration:null!==(e=t.ephemeralDuration)&&void 0!==e?e:0,canChange:t.canSetEphemeralSetting(),onClick:this._handleClick})}}_.CONCERNS={groupMetadata:["ephemeralDuration","participants"]},_.displayName="GroupEphemeralSettingRow";var C=(0,p.default)(_,_.CONCERNS);function M(e){var t,{ephemeralDuration:a,canChange:l,onClick:i}=e;t=a>0?l?c.default.isEphemeral24HDurationEnabled()?(0,f.getDisappearingMessageDurationString)(a):h.default.t(780):(0,f.getDisappearingMessageExplanationString)(a):h.default.t(779);var n=s.default.createElement(m.default,{className:l?u.default.chevronIcon:u.default.ephemeralIcon,name:l?"chevron-right-alt":"disappearing",directional:!0});return s.default.createElement(d.default,{onClick:i,side:n,multiline:!0},s.default.createElement("div",{className:u.default.header},s.default.createElement(E.TextSpan,{theme:"title"},h.default.t(901))),s.default.createElement(E.TextDiv,{theme:"muted"},t))}},28271:(e,t,a)=>{"use strict";var l=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67154)),n=i(a(6479)),r=l(a(67294)),o=a(97066),d=i(a(75444)),u=i(a(27122)),c=i(a(77188)),f=i(a(80162)),h=i(a(19200)),p=i(a(80896)),m=i(a(30070)),E=i(a(3317)),g=i(a(32885));class v extends r.Component{constructor(...e){super(...e),this._setGallery=e=>{this._gallery=e},this._handleNewMsgs=e=>{if(e){var t=[],a=Array.isArray(e)?e:[e];Promise.all(a.map((e=>(e.getLinks().length&&t.push(e),Promise.resolve())))).then((()=>{t.length&&this.props.linkMsgs.add(t)}))}},this._queryCollection=(e,t)=>{var{linkMsgs:a,chat:l}=this.props;this.props.listeners.uiIdle((()=>{a.queryLinks(l,t)}))},this._renderLinks=e=>{var{linkMsgs:t,selectedMessages:a}=this.props,l=[];return t.forEach((t=>{var i=!t.isSentByMe&&t.isGroupMsg;t.getGalleryLinks().forEach(((s,n)=>{s.href!==t.matchedText&&l.push(r.default.createElement(h.default,{key:`${t.id.toString()}-${n}`,msg:t.safe(),link:s,displayAuthor:i,selectable:this.props.selectable,selectedMessages:a,onMessageSelect:this.props.onMessageSelect,onClickMsg:e}))})),t.linkPreview&&l.push(r.default.createElement(E.default,{key:t.id.toString(),msg:t,selectable:this.props.selectable,selectedMessages:a,onMessageSelect:this.props.onMessageSelect,displayType:d.default.DISP_TYPE.GALLERY,onClickMsg:e}))})),l.reverse(),l}}componentDidMount(){this.props.listeners.add(this.props.linkMsgs,"add remove reset",(()=>{var e;null===(e=this._gallery)||void 0===e||e.forceUpdate()})),this.props.listeners.add(this.props.linkMsgs,"query_link_before",(()=>{var e;null===(e=this._gallery)||void 0===e||e.forceUpdate()})),this.props.listeners.add(this.props.chat.msgs,"add bulk_add",this._handleNewMsgs)}render(){var e,t=this.props,{linkMsgs:a,listeners:l,chat:i}=t,d=(0,n.default)(t,["linkMsgs","listeners","chat"]);return c.default.supportsFeature(c.default.F.MD_BACKEND)&&i.endOfHistoryTransferType===o.ConversationEndOfHistoryTransferModelPropType.COMPLETE_BUT_MORE_MESSAGES_REMAIN_ON_PRIMARY&&(e=r.default.createElement(u.default,{icon:r.default.createElement(g.default,{name:"content-chat"}),theme:"list",secondary:f.default.t(636)},f.default.t(639))),r.default.createElement(r.default.Fragment,null,r.default.createElement(m.default,(0,s.default)({ref:this._setGallery,msgsCollection:a,queryCollection:this._queryCollection,hasBefore:a.hasLinkBefore,queryBefore:a.queryLinkBefore,renderElements:this._renderLinks,emptyText:f.default.t(1262),chat:i},d)),e)}}v.displayName="LinkGallery";var _=(0,p.default)(v);t.default=_},19200:(e,t,a)=>{"use strict";var l=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(94184)),n=l(a(67294)),r=i(a(28745)),o=a(79027),d=i(a(75444)),u=i(a(20923)),c=i(a(75252)),f=i(a(80162)),h=i(a(8767)),p=i(a(29700)),m=i(a(80896)),E=i(a(54562)),g=i(a(72765)),v=i(a(57179)),_=i(a(4328)),C=a(32692);class M extends n.Component{constructor(e){super(e),this.mouseOver=()=>{this.state.hover||this.setState({hover:!0})},this.mouseEnter=()=>{this.state.hover||this.setState({hover:!0})},this.mouseLeave=()=>{this.state.hover&&this.setState({hover:!1})},this.handleSelectChange=e=>{this.state.selected!==e&&this.setState({selected:e})},this.handleSelectClick=e=>{e&&e.stopPropagation(),this.props.onMessageSelect(this.props.msg.unsafe(),!this.state.selected)},this.handleClick=()=>{this.props.onClickMsg(this.props.msg.unsafe(),!this.state.selected)};var{msg:t,selectedMessages:a}=e;this.state={hover:!1,selected:a.isSelected(t.unsafe())}}componentDidMount(){this.props.listeners.add(this.props.selectedMessages,this.props.msg.id.toString(),this.handleSelectChange)}render(){var{msg:e,link:t,displayAuthor:a}=this.props,l=this.props.selectable||this.state.hover?n.default.createElement(E.default,{checked:this.state.selected,onClick:this.handleSelectClick,msgTheme:"gallery"}):null,i=(0,o.Conversation)({mentions:e.mentionMap(),links:e.getLinks(),selectable:true,trusted:e.isTrusted()}),m=e.body&&e.body.includes(t.url)?e.body:e.caption,g=a?n.default.createElement("div",{className:h.default.author},n.default.createElement(r.default,{msg:e,contact:e.senderObj})):null,M=e.getSuspiciousLinks().length>0;return n.default.createElement(c.default,{hover:this.state.hover,onClick:this.handleClick,onMouseEnter:this.state.hover?null:this.mouseEnter,onMouseOver:this.state.hover?null:this.mouseOver,onMouseLeave:this.state.hover?this.mouseLeave:null},n.default.createElement("div",{className:h.default.msg},n.default.createElement(_.default,{transitionName:"delay-leave"},l),n.default.createElement(C.MessageContainer,{isSentByMe:e.isSentByMe},n.default.createElement("div",{className:(0,s.default)(h.default.bubble,{[h.default.hasAuthor]:a,[h.default.hasSuspiciousLinks]:M})},g,n.default.createElement(v.default,{link:t,displayType:d.default.DISP_TYPE.GALLERY}),n.default.createElement(p.default,{title:t.url,isSentByMe:e.isSentByMe,canonicalUrl:t.domain,displayType:d.default.DISP_TYPE.GALLERY,star:e.star}),n.default.createElement(u.default,{text:m,selectable:true,className:h.default.text,dirMismatch:e.rtl!==f.default.isRTL(),direction:e.dir,formatters:i})))))}}M.CONCERNS={msg:["body","caption","dir","id","isSentByMe","mediaData","type","rtl","senderObj","star","mediaData","asRevoked"]},M.displayName="LinkMsg";var S=(0,m.default)((0,g.default)(M,M.CONCERNS));t.default=S},79411:(e,t,a)=>{"use strict";var l=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(23493)),n=i(a(98913)),r=i(a(16990)),o=l(a(67294)),d=a(97066),u=i(a(44386)),c=i(a(75444)),f=i(a(27122)),h=i(a(77188)),p=i(a(80162)),m=i(a(80896)),E=i(a(47261)),g=i(a(92304)),v=l(a(10276)),_=i(a(72765)),C=a(6578),M=i(a(32885)),S=a(81319);function T(e){return!h.default.supportsFeature(h.default.F.MD_BACKEND)||(0,S.hasThumbnail)(e.mediaData)}class P extends o.Component{constructor(...e){super(...e),this.handleScroll=e=>{this._handleScroll(e.currentTarget)},this._handleScroll=(0,s.default)((e=>{var t=this.props.mediaMsgs;t.hasMediaBefore&&e.scrollTop+c.default.SCROLL_FUDGE>e.scrollHeight-e.clientHeight&&this._scheduleMediaQuery(t.head())}),100)}componentDidMount(){this.props.mediaMsgs.hasMediaBefore&&this._scheduleMediaQuery(),this.props.listeners.add(this.props.mediaMsgs,"add",(()=>{this.forceUpdate()})),this.props.listeners.add(this.props.mediaMsgs,"remove",(e=>{var t=this.props.selectedMessages;t&&t.isSelected(e)&&t.setVal(e,!1),this.forceUpdate()})),this.props.listeners.add(this.props.mediaMsgs,"reset",(()=>{this.props.selectedMessages&&this.props.selectedMessages.unsetAll(),this.forceUpdate()})),this.props.listeners.add(this.props.mediaMsgs,"query_media_before",(()=>{this.forceUpdate()}))}componentWillUnmount(){this._handleScroll.cancel()}_scheduleMediaQuery(e){var t=this.props.mediaMsgs;t.hasMediaBefore&&this.props.listeners.uiIdle((()=>{t.queryMedia({chat:(0,C.unproxy)(this.props.chat),msg:e})}))}render(){var e,{fullCollection:t,selectedMessages:a,chat:l,mediaMsgs:i,selectable:s,onMessageSelect:c}=this.props,m=h.default.supportsFeature(h.default.F.MEDIA_GALLERY_HEADERS)?function(e,t,a,l,i){var s=null;return(0,r.default)(e).filter(T).slice(0,t?e.length:6).flatMap(((e,r)=>{var d=!t&&r>=3&&r<=5?"hideableSecondRow":void 0,c=o.default.createElement(E.default,{msg:e,hoverEvent:t,selectable:a,selectedMessages:l,onMessageSelect:i,key:e.id.toString(),theme:d});if(!t)return[c];var f=u.default.monthStr(e.t);if(f!==s){s=f;var h=o.default.createElement(g.default,{key:`header-${e.t}`},f);return[...(0,n.default)(6,(t=>o.default.createElement(v.EmptyCanvas,{key:`padding-${e.t}-${t}`}))),h,c]}return[c]}))}(i.toArray(),t,s,a,c):function(e,t,a,l,i){var s=e.map(((s,n)=>{var r;return!t&&n>=e.length-6&&n<=e.length-4&&(r="hideableSecondRow"),o.default.createElement(E.default,{msg:s,hoverEvent:t,selectable:a,selectedMessages:l,onMessageSelect:i,theme:r,key:s.id.toString()})}));return s.reverse(),t||(s=s.slice(0,6)),s}(i.toArray(),t,s,a,c),_=!1;return h.default.supportsFeature(h.default.F.MD_BACKEND)&&l.endOfHistoryTransferType===d.ConversationEndOfHistoryTransferModelPropType.COMPLETE_BUT_MORE_MESSAGES_REMAIN_ON_PRIMARY&&(_=!0,t?e=p.default.t(640):0===i.length&&0===l.docCount&&0===l.linkCount&&0===l.productCount&&(e=p.default.t(638))),o.default.createElement(o.default.Fragment,null,o.default.createElement(v.default,{medias:m,mediaCollection:i,fullCollection:t,chat:(0,C.unproxy)(l),onScroll:this.handleScroll}),_?o.default.createElement(f.default,{icon:o.default.createElement(M.default,{name:"content-chat"}),theme:"list",secondary:p.default.t(636)},e):null)}}P.CONCERNS={chat:["linkCount","docCount","productCount","endOfHistoryTransferType"]},P.displayName="MediaGallery";var b=(0,m.default)((0,_.default)(P,P.CONCERNS));t.default=b},47261:(e,t,a)=>{"use strict";var l=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(94184)),n=l(a(67294)),r=i(a(33766)),o=i(a(80896)),d=i(a(76022)),u=i(a(22039)),c=i(a(81319)),f=a(85063),h=a(6578);class p extends n.Component{constructor(){super(...arguments),this.setRefImg=e=>{this.img=e},this._handleSelectChange=e=>{this.state.selected!==e&&this.setState({selected:e})},this.handleClick=e=>{var{msg:t,selectable:a,onMessageSelect:l}=this.props,i=t.mediaData;if(a&&l)l(t,!this.state.selected);else if(i.mediaStage!==f.MEDIA_DATA_STAGE.ERROR_MISSING){var s;e&&e.stopPropagation();var o=t.id;if(i.isGif||i.type===d.default.TYPE.IMAGE){var c=this.img;s=e=>o.equals(e)&&c?c:null}r.default.mediaViewerModal({msg:(0,h.unproxy)(t),getZoomNode:s})}else r.default.openModal(n.default.createElement(u.default,{msg:t}))},this.handleDragStart=e=>{e.nativeEvent.dataTransfer.setData("text/uri-list",this.props.msg.mediaData.renderableUrl)};var{msg:e,selectedMessages:t}=this.props;this.state={selected:!(!t||!t.isSelected(e))}}componentDidMount(){this.props.selectedMessages&&this.props.listeners.add(this.props.selectedMessages,this.props.msg.id.toString(),this._handleSelectChange)}render(){var{msg:e,hoverEvent:t,selectable:a,onMessageSelect:l,theme:i,className:r}=this.props,o=e.mediaData,u=o.type===d.default.TYPE.IMAGE&&o.renderableUrl?this.handleDragStart:null,f=(0,s.default)(r);return n.default.createElement(c.default,{classes:f,onClick:this.handleClick,hoverEvent:t,selectable:a,selected:this.state.selected,onMessageSelect:l,onDragStart:u,msg:e,theme:i,imgRef:this.setRefImg})}}p.displayName="MediaCanvas";var m=(0,o.default)(p);t.default=m},92304:(e,t,a)=>{"use strict";var l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return i.default.createElement("div",{className:s.default.container},e.children)};var i=l(a(67294)),s=l(a(45494))},81319:(e,t,a)=>{"use strict";var l=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.hasThumbnail=T,t.default=t.MediaThumb=void 0;var s=i(a(94184)),n=l(a(67294)),r=i(a(65589)),o=a(44373),d=i(a(80896)),u=i(a(76022)),c=i(a(26251)),f=i(a(878)),h=i(a(89970)),p=i(a(84311)),m=i(a(89958)),E=i(a(72462)),g=i(a(32885)),v=i(a(26144)),_=i(a(30882)),C=i(a(65764)),M=a(85063);class S extends n.Component{constructor(...e){super(...e),this.state={hover:!1,tooltip:null},this._setRefImg=e=>{this._img=e},this._setRefContainer=e=>{this._container=e},this._handleSelectClick=()=>{this.props.onMessageSelect&&this.props.onMessageSelect(this.props.msg,!this.props.selected)},this._handleMouseOver=()=>{this.state.hover||this.setState({hover:!0})},this._handleMouseEnter=e=>{this.state.hover||this.setState({hover:!0,tooltip:this._getTooltip(e)})},this._handleMouseLeave=()=>{this.state.hover&&this.setState({hover:!1,tooltip:null})},this.maybeDownloadMediaMD=()=>{var{msg:e}=this.props;e.mediaData.preview||e.mediaData.fullPreviewData||e.mediaData.type!==u.default.TYPE.IMAGE&&e.mediaData.type!==u.default.TYPE.VIDEO||e.downloadMedia({downloadEvenIfExpensive:!1,isUserInitiated:!1,rmrReason:E.default.WEBC_RMR_REASON_CODE.MEDIA_VIEWER})},this._renderImgNode=(e,t,a,l)=>{var i=a?n.default.createElement("div",{className:c.default.shade}):null,s=t?{backgroundImage:`url(${t})`}:null;return n.default.createElement("div",{className:e,style:s,onClick:this.props.onClick,ref:this._setRefImg,onDragStart:this.props.onDragStart,draggable:null!=this.props.onDragStart||null},l,i)},this._downloadMedia=()=>{this.props.msg.downloadMedia({downloadEvenIfExpensive:!1,isUserInitiated:!1,rmrReason:E.default.WEBC_RMR_REASON_CODE.MEDIA_VIEWER})},this._dismissTooltip=()=>{this.setState({tooltip:null})},this._renderImg=()=>{var e,{msg:{mediaData:t},preferPreview:a}=this.props;switch(t.type){case u.default.TYPE.AUDIO:return this._renderImgNode(`${c.default.mediaCanvas} attach-media-audio-thumb`);case u.default.TYPE.VIDEO:var l=(0,s.default)(c.default.mediaCanvas,{"media-video-thumb":t.isGif&&!t.preview}),i=null===(e=t.preview)||void 0===e?void 0:e.url();return this._renderImgNode(l,i,!0);case u.default.TYPE.IMAGE:var r=e=>{var a,l=null!=e?n.default.createElement("div",{className:c.default.mediaCanvas,style:{backgroundImage:`url(${e})`}}):null;return this._renderImgNode(c.default.mediaCanvas,null===(a=t.preview)||void 0===a?void 0:a.url(),this.props.msg.star,l)},o=()=>t.preview?r(null):this._renderImgNode(c.default.mediaCanvas,null,this.props.msg.star);return a?o():n.default.createElement("div",{className:c.default.mediaCanvas},n.default.createElement(m.default,{mediaData:t,placeholderRenderer:o,renderProgressively:!0,downloadMedia:this._downloadMedia},r));default:return this._renderImgNode(null,null,this.props.msg.star)}}}componentDidMount(){this.props.listeners.add(this.props.msg.mediaData,"change:preview",(()=>{this.forceUpdate()})),this.props.listeners.add(this.props.msg,"change:star",(()=>{this.forceUpdate()})),this.props.imgRef&&this.props.imgRef(this._img),this.props.containerRef&&this.props.containerRef(this._container),this.maybeDownloadMediaMD(),this.props.listeners.add(this.props.msg.mediaData,"change:mediaStage",(()=>{this.props.msg.mediaData.mediaStage===M.MEDIA_DATA_STAGE.RESOLVED&&this.forceUpdate()}))}componentDidUpdate(){this.props.imgRef&&this.props.imgRef(this._img),this.props.containerRef&&this.props.containerRef(this._container)}componentWillUnmount(){this.props.imgRef&&this.props.imgRef(null),this.props.containerRef&&this.props.containerRef(null)}_getTooltip(e){var{target:t}=e;return this._shouldShowTooltip()&&t instanceof HTMLElement?{menu:n.default.createElement(p.default,{msg:this.props.msg}),anchor:t,dirY:o.DirY.TOP,dirX:o.DirX.RIGHT,offsetX:t.getBoundingClientRect().width/2,type:o.MenuType.tooltip}:null}_shouldShowTooltip(){return!!this.props.showTooltip&&"viewerFlowTransparent"!==this.props.theme}render(){var e,{msg:t,selectable:a,theme:l,active:i}=this.props,o=this.props.selected||!1;(a||this.state.hover&&this.props.hoverEvent)&&(e=n.default.createElement("div",{className:c.default.mediaSelect},n.default.createElement("div",{className:c.default.shadeTop,onClick:this.props.onClick}),n.default.createElement(r.default,{onChange:this._handleSelectClick,hover:this.state.hover,checked:o})));var d,u=(0,s.default)(this.props.classes,c.default.canvasComponent,{[c.default.canvasSelected]:o,[c.default.canvasSecondRow]:"hideableSecondRow"===l,[c.default.viewerFlow]:"viewerFlow"===l||"viewerFlowTransparent"===l,[c.default.viewerFlowTransparent]:"viewerFlowTransparent"===l,[c.default.active]:i}),p=t.star?n.default.createElement("div",{className:c.default.iconStar},n.default.createElement(g.default,{name:"star"})):null;d=T(t.mediaData);var m=this.state.tooltip?n.default.createElement(v.default,{displayName:"MediaThumbTitle",popable:!0,escapable:!0,requestDismiss:this._dismissTooltip,requestRecentFocusOnUnmount:!1},n.default.createElement(_.default,{tooltip:this.state.tooltip})):null;return d?n.default.createElement("div",{ref:this._setRefContainer,className:u,onMouseOver:this._handleMouseOver,onMouseEnter:this._handleMouseEnter,onMouseLeave:this._handleMouseLeave},e,n.default.createElement("div",{className:c.default.canvasBody},n.default.createElement(h.default,{mediaData:t.mediaData}),n.default.createElement(f.default,{mediaData:t.mediaData,selected:o}),p),this._renderImg(),m):null}}function T(e){switch(e.type){case u.default.TYPE.VIDEO:case u.default.TYPE.IMAGE:if(e.preview||e.fullPreviewData||e.mediaStage===M.MEDIA_DATA_STAGE.RESOLVED)return!0;if(C.default.has(e.filehash)){try{C.default.getOrCreateURL(e.filehash)}catch(e){return!1}return!0}return!1;default:return!0}}t.MediaThumb=S,S.displayName="MediaThumb";var P=(0,d.default)(S);t.default=P},878:(e,t,a)=>{"use strict";var l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{selected:t,mediaData:a}=e;switch(a.type){case r.default.TYPE.AUDIO:return s.default.createElement(d,{duration:a.duration,selected:t});case r.default.TYPE.VIDEO:return a.isGif?null:s.default.createElement(d,{duration:a.duration,selected:t});default:return null}};var i=l(a(94184)),s=l(a(67294)),n=l(a(44386)),r=l(a(76022)),o=l(a(73148));function d({duration:e,selected:t}){var a=n.default.durationStr(e);return a?s.default.createElement("span",{className:(0,i.default)(o.default.container,{[o.default.selected]:t})},a):null}},89970:(e,t,a)=>{"use strict";var l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{mediaData:t}=e;if(!t)return null;var a=function(e){switch(e.type){case s.default.TYPE.AUDIO:return"msg-audio";case s.default.TYPE.VIDEO:return e.isGif?"msg-gif":"msg-video";default:return null}}(t);return null==a?null:i.default.createElement("div",{className:n.default.iconType},i.default.createElement(r.default,{name:a}))};var i=l(a(67294)),s=l(a(76022)),n=l(a(87114)),r=l(a(32885))},84311:(e,t,a)=>{"use strict";var l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{msg:{senderObj:{formattedShortName:t}}}=e;return i.default.createElement(s.TextSpan,null,t)};var i=l(a(67294)),s=a(38245)},30070:(e,t,a)=>{"use strict";var l=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),n=l(a(33766)),r=l(a(75444)),o=a(92997),d=l(a(35128)),u=l(a(68198)),c=l(a(3317)),f=a(6578),h=l(a(8574)),p=l(a(34302));function m(e,t){var{queryBefore:a,hasBefore:l,msgsCollection:i,emptyText:m,scrollOffset:E=0,selectable:g,onMessageSelect:v,queryCollection:_,selectedMessages:C,renderElements:M,onProductDetail:S,setScrollOffset:T}=e,P=(0,h.default)();(0,s.useImperativeHandle)(t,(()=>({forceUpdate:P})));var b=(0,s.useRef)(null),I=e=>{l&&_(e)},N=(0,p.default)((e=>{var t=e.scrollHeight-e.clientHeight-e.scrollTop<r.default.SCROLL_FUDGE;l&&t&&I(i.head()),T&&T(e.scrollTop)}),100);(0,s.useEffect)((()=>{l&&I();var e=b.current;return e&&(e.scrollTop=E),()=>{N.cancel()}}),[]);var y=(e,t)=>{var a=(0,f.unproxy)(e);g&&void 0!==t?v(a,t):n.default.openChatAt(a.chat,a.chat.getSearchContext(a))},k=M?M(y):i.map(((e,t)=>s.default.createElement(c.default,{key:`${e.id.toString()}_${t}`,msg:e,selectable:g,selectedMessages:C,onMessageSelect:v,displayType:r.default.DISP_TYPE.GALLERY,onClickMsg:y,onProductClick:S}))).reverse();if(a){if(0===k.length)return s.default.createElement(o.Loading,null);k.push(s.default.createElement(d.default,null))}return 0!==i.length||a||l?s.default.createElement("div",{ref:b,onScroll:e=>{N(e.target)},className:u.default.wrapper},k):s.default.createElement(o.Empty,{text:m,a8nText:"no-elements"})}var E=(0,s.forwardRef)(m);t.default=E},33901:(e,t,a)=>{"use strict";var l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,m.default)(e.chat,["isGroup","muteExpiration","archive"]),a=(0,m.default)(e.mute,["isMuted"]),l=(0,m.default)(e.settings,["showArchiveV2"]),E=e=>{o.default.muteChat((0,h.unproxy)(t),e)},g=()=>{E(!1),o.default.closeModal()},v=a.isMuted,_=t.muteExpiration;if(t.archive&&(0,c.archiveV2Supported)()&&l.showArchiveV2)return i.default.createElement(u.default,null,i.default.createElement(p.TextSpan,{theme:"muted",size:"16"},f.default.t(245)));var C,M=v?()=>{var e=t.isGroup?f.default.t(620):f.default.t(618);o.default.openModal(i.default.createElement(d.default,{onOK:g,okText:f.default.t(91),onCancel:()=>o.default.closeModal(),cancelText:f.default.t(1768)},e))}:()=>{E(!0)},S=i.default.createElement(n.default,{checked:v,onChange:M}),T=v?f.default.t(1777):f.default.t(1922);if(v&&_){var P=r.default.untilStr(_);C=i.default.createElement(p.TextDiv,{theme:"muted"},P)}return i.default.createElement(u.default,{a8nText:s.default.key("block-mute"),side:S,onClick:M,multiline:!(!v||!_)},i.default.createElement(p.TextSpan,{theme:"title"},T),C)};var i=l(a(67294)),s=l(a(55847)),n=l(a(20451)),r=l(a(44386)),o=l(a(33766)),d=l(a(51115)),u=l(a(18248)),c=a(34605),f=l(a(80162)),h=a(6578),p=a(38245),m=l(a(95607))},61976:(e,t,a)=>{"use strict";var l=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{productMsgs:t,chat:a}=e,l=(0,n.default)(e,["productMsgs","chat"]),i=(0,r.useRef)(null);(0,p.useListener)(t,"add remove reset",(()=>{var e;null===(e=i.current)||void 0===e||e.forceUpdate()}));var E,g=(0,m.default)();u.default.supportsFeature(u.default.F.MD_BACKEND)&&a.endOfHistoryTransferType===o.ConversationEndOfHistoryTransferModelPropType.COMPLETE_BUT_MORE_MESSAGES_REMAIN_ON_PRIMARY&&(E=r.default.createElement(d.default,{icon:r.default.createElement(h.default,{name:"content-chat"}),theme:"list",secondary:c.default.t(636)},c.default.t(642)));return r.default.createElement(r.default.Fragment,null,r.default.createElement(f.default,(0,s.default)({ref:i,msgsCollection:t,queryCollection:e=>g((()=>{t.queryProducts(a,e)})),hasBefore:t.hasProductBefore,queryBefore:t.hasProductBefore?Promise.resolve():null,emptyText:c.default.t(1266),chat:a},l)),E)};var s=i(a(67154)),n=i(a(6479)),r=l(a(67294)),o=a(97066),d=i(a(27122)),u=i(a(77188)),c=i(a(80162)),f=i(a(30070)),h=i(a(32885)),p=a(54890),m=i(a(39877))},68790:(e,t,a)=>{"use strict";var l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=l(a(67294)),s=l(a(33766)),n=l(a(51115)),r=l(a(62899)),o=l(a(58738)),d=l(a(20923)),u=l(a(59986)),c=l(a(80162)),f=a(95801);class h extends u.default{constructor(...e){super(...e),this.contactFilter=e=>{var t=this.props.chat.groupMetadata;return!!r.default.isFilteredContact(e)&&(!(null==t?void 0:t.participants.get(e.id))||c.default.t(232))},this.confirmAddParticipant=e=>{var t=this.onAddParticipant.bind(this,e),a=c.default.t(602,{participant:e.formattedName,subject:this.props.chat.contact.name});this.push(i.default.createElement(n.default,{onOK:t,okText:c.default.t(221),onCancel:this._pop,cancelText:c.default.t(1768)},i.default.createElement(d.default,{text:a})))},this.onAddParticipant=e=>{(0,f.addParticipants)(this.props.chat,[e]).catch((()=>{})),s.default.closeModal()},this._pop=()=>{this.pop()}}componentDidMount(){this.push(i.default.createElement(o.default,{title:c.default.t(221),filter:this.contactFilter,onCancel:this._pop,onSelect:this.confirmAddParticipant}))}}t.default=h},39282:(e,t,a)=>{"use strict";var l=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),n=a(17938),r=i(a(33766)),o=i(a(51115)),d=i(a(62899)),u=i(a(20923)),c=i(a(59986)),f=i(a(80162)),h=a(95801),p=l(a(72352));class m extends c.default{constructor(...e){super(...e),this._isGroupParticipant=e=>{var t,{chat:a}=this.props;return!!(null===(t=a.groupMetadata)||void 0===t?void 0:t.participants.get(e))},this.customSecondaryText=e=>{var t,{chat:a}=this.props;return(null===(t=a.groupMetadata)||void 0===t?void 0:t.participants.get(e))?f.default.t(232):null},this.contactFilter=e=>{var t=this.props.chat.groupMetadata;return!!d.default.isFilteredContact(e)&&(!(null==t?void 0:t.participants.get(e.id))||f.default.t(232))},this.confirmAddParticipant=e=>{var{chat:t}=this.props;this.push(s.default.createElement(o.default,{onOK:this.onAddParticipant.bind(this,e),okText:f.default.t(221,{_plural:e.length}),onCancel:this._pop,cancelText:f.default.t(1768)},s.default.createElement(u.default,{text:this._makeNameEnumeration(e,t.contact.name)})))},this._makeNameEnumeration=(e,t)=>{var a=e.map((e=>e.formattedShortName||e.shortName)).reduce(((t,a,l)=>[...t,a,l!==e.length-1&&f.default.t(724)||""]),[]);return f.default.t(603,{participants:a.join(""),subject:t})},this.onAddParticipant=e=>{(0,h.addParticipants)(this.props.chat,e).catch((()=>{})),r.default.closeModal()},this._pop=()=>{this.pop()}}componentDidMount(){this.push(s.default.createElement(p.default,{onConfirm:this.confirmAddParticipant,filter:this.contactFilter,title:f.default.t(221),isDisabled:this._isGroupParticipant,isSelected:this._isGroupParticipant,customSecondaryText:this.customSecondaryText,listType:p.ListType.PARTICIPANT_MANAGE_MODAL,singleSelectionFooterType:n.FooterType.CONFIRM,multipleSelectionFooterType:n.FooterType.CONFIRM}))}}t.default=m},34169:(e,t,a)=>{"use strict";var l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=l(a(67294)),s=l(a(60995)),n=l(a(44226)),r=l(a(59986)),o=l(a(19826));class d extends r.default{constructor(...e){super(...e),this._showArchiveSettingsDrawer=()=>{this.push(i.default.createElement(s.default,{settings:o.default,onClose:this._pop}))},this._pop=()=>{this.pop()}}componentDidMount(){this.push(i.default.createElement(n.default,{showSettings:this._showArchiveSettingsDrawer,onClose:this._pop,settings:o.default}))}}t.default=d},65369:(e,t,a)=>{"use strict";var l=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67154)),n=i(a(67294)),r=i(a(11258)),o=i(a(75508)),d=i(a(15146)),u=i(a(33766)),c=i(a(32086)),f=i(a(23526)),h=i(a(96740)),p=a(98355),m=i(a(49589)),E=i(a(66600)),g=i(a(59986)),v=a(34605),_=i(a(92259)),C=i(a(29639)),M=i(a(15516)),S=a(495),T=a(4566),P=l(a(7827)),b=i(a(72462)),I=a(38335),N=i(a(68290)),y=i(a(96697)),k=i(a(33590)),A=i(a(48748)),O=i(a(53599)),w=i(a(13959)),R=i(a(33805)),D=i(a(25531));class x extends g.default{constructor(...e){super(...e),this._scrollOffset=0,this._setScrollOffset=e=>{this._scrollOffset=e},this.onProductDetail=(e,t)=>{var{chat:a}=this.props,l=n.default.createElement(y.default,{chat:a,collectionId:t,product:e,onEnd:this._end,onBack:this._popAndUpdate,refreshCarousel:!1,onProductLinkClick:this._onProductLinkClick,onCartClick:this._onCartClick});this.push(l)},this.onProductDetailFromInfo=e=>{var t=n.default.createElement(k.default,{chat:this.props.chat,productInfo:e,onEnd:this._end,onBack:this._pop,onProductDetail:this.onProductDetail,onProductCatalog:this.onProductCatalogHeaderClick,onProductLinkClick:this._onProductLinkClick,onCartClick:this._onCartClick});this.push(t)},this.onCollectionSeeAll=e=>{var t=this.props.chat.id;this.push(n.default.createElement(c.default,{contact:this.props.chat.contact,onProductDetail:this.onProductDetail,catalogId:t,onBack:this._pop,onCatalogLinkClick:this._onCatalogLinkClick,onCartClick:this._onCartClick,collection:e}))},this._onProductLinkClick=e=>{this.push(n.default.createElement(A.default,{product:e,onBack:this._pop}))},this._onCatalogLinkClick=(e,t)=>{this.push(n.default.createElement(o.default,{catalog:e,contact:t,onBack:this._pop}))},this._onCartClick=e=>{var t=(0,I.getProductCatalogContext)(this.props.context),a=(0,w.default)(e,this.props.chat,t);a&&this.push(a)},this.pushProductCatalog=()=>{var{chat:e}=this.props,t=(0,v.canViewCollections)()?n.default.createElement(d.default,{contact:e.contact,onProductDetail:this.onProductDetail,catalogId:e.id,onBack:this._pop,businessProfile:e.contact.businessProfile,onCatalogLinkClick:this._onCatalogLinkClick,onCartClick:this._onCartClick,onCollectionSeeAll:this.onCollectionSeeAll}):n.default.createElement(O.default,{contact:e.contact,onProductDetail:this.onProductDetail,catalogId:e.id,onBack:this._pop,businessProfile:e.contact.businessProfile,onCatalogLinkClick:this._onCatalogLinkClick,onCartClick:this._onCartClick});this.push(t)},this.onProductCatalog=e=>{var t=this.props.chat.id;(0,T.logCarouselViewMoreClick)({catalogOwnerWid:t,catalogContext:e}),this.pushProductCatalog(t)},this.onProductCatalogHeaderClick=(e,t)=>{(0,T.logCarouselViewMoreClick)({catalogOwnerWid:e,catalogContext:t}),this.onProductCatalog(t)},this.onStarred=()=>{var e=n.default.createElement(R.default,{chat:this.props.chat,starredMsgs:this.props.chat.getStarredMsgs(),onClose:this._pop});this.push(e)},this.onAdminSetting=()=>{var{chat:e}=this.props,t=n.default.createElement(M.default,{chat:e,groupMetadata:e.groupMetadata,onClose:this._pop});this.push(t)},this.onContactCard=()=>{this.push(n.default.createElement(f.default,{chat:this.props.chat,onClose:this._pop}))},this.onMediaGallery=()=>{var e=n.default.createElement(P.default,{chat:this.props.chat,onBack:this._pop,onProductDetail:this.onProductDetail,setProductsScrollOffset:this._setScrollOffset});this.push(e)},this.onGroupInviteLink=()=>{var{chat:e}=this.props,t=n.default.createElement(C.default,{chat:this.props.chat,groupMetadata:e.groupMetadata,onBack:this._pop});this.push(t)},this._pop=()=>{this.pop()},this._popAndUpdate=()=>{this.popAndUpdate({initialTab:P.TABS.PRODUCTS,productsScrollOffset:this._scrollOffset})},this._end=()=>{this.end(!0)},this.onVerification=e=>{var t=e||this.props.chat.contact,a=n.default.createElement(D.default,{contact:t,onClose:this._pop,isFirstLevel:!1});this.push(a)},this.onLiveLocation=()=>{var e=n.default.createElement(S.LiveLocationDrawerLoadable,{chat:this.props.chat,onClose:this._pop});this.push(e)},this.onEphemeral=()=>{var{chat:e}=this.props,t=n.default.createElement(E.default,{chat:e,fromInfoFlow:!0,onClose:this._pop});this.push(t)}}componentDidMount(){var e=this.onStarred,t=this.onMediaGallery,a=this.props.chat;this.props.chat.isGroup?this.push(n.default.createElement(_.default,{chat:a,showFullGroupDescription:this.props.showFullGroupDescription,scrollToParticipantList:this.props.scrollToParticipantList,groupMetadata:a.groupMetadata,contact:a.contact,profilePicThumb:a.contact.getProfilePicThumb(),onVerification:this.onVerification,onStarred:e,onMediaGallery:t,onAdminSetting:this.onAdminSetting,onGroupInviteLink:this.onGroupInviteLink,onLiveLocation:this.onLiveLocation,onEphemeral:this.onEphemeral,onClose:this._pop})):a.isBroadcast?this.push(n.default.createElement(r.default,{chat:a,contact:a.contact,onStarred:e,onMediaGallery:t,onClose:this._pop})):a.isUser&&(a.contact.isBusiness&&(0,v.canSeeBizProfileV3)()&&u.default.setDrawerContext("right",(0,I.buildProductCatalogContext)(new N.default,(0,p.getMaybeBizPlatformForLogging)(a.contact.id.toString()),b.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_PROFILE)),this.push(n.default.createElement(h.default,{contact:a.contact,onVerification:this.onVerification,onStarred:e,onContactCard:this.onContactCard,onMediaGallery:t,onProductCatalog:this.onProductCatalog,onProductDetail:this.onProductDetail,onLiveLocation:this.onLiveLocation,onEphemeral:this.onEphemeral,onClose:this._pop})))}}t.default=e=>n.default.createElement(m.default.Consumer,null,(t=>n.default.createElement(x,(0,s.default)({context:t},e))))},29656:(e,t,a)=>{"use strict";var l=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(23493)),n=i(a(63337)),r=l(a(67294)),o=i(a(33766)),d=i(a(75444)),u=l(a(12536)),c=i(a(77188)),f=i(a(80162)),h=i(a(80896)),p=a(85063),m=i(a(80989)),E=i(a(86005)),g=i(a(72462)),v=i(a(85726)),_=i(a(59979)),C=a(81319);class M extends r.Component{constructor(e){super(e),this._unmounted=!1,this._addListeners=()=>{var e=()=>this.state.activeMsg,{mediaMsgs:t}=this,{listeners:a}=this.props;a.uiIdle((()=>{var a=e();a&&t.loadMoreAroundIfNeeded(a)}));var l=e();(null==l?void 0:l.isViewOnce)?a.add(l,"revoked",(()=>{this.setState({activeMsg:null}),this.endFlow()})):(a.add(t,"remove",((a,l,i)=>{var s=e();if(t.includes(a)||null!=s&&null!=s.id&&s.id.toString()!==a.id.toString())this.forceUpdate();else{var r=i.index;0===t.length?this.endFlow():t.length===r?this.handleSelectThumb((0,n.default)(t.at(r-1),"mediaMsgs.at(index - 1)")):this.handleSelectThumb((0,n.default)(t.at(r),"mediaMsgs.at(index)"))}})),a.add(t,"reset",(()=>{this.endFlow()})),a.add(t,"query_media_after",(()=>{this.forceUpdate()})),a.add(t,"query_media_before",(()=>{var e=this._refThumbs;e&&(this._prevScrollWidth=e.scrollWidth,e instanceof HTMLElement&&this.forceUpdate())})))},this.handleKeyDown=e=>{var t=f.default.isRTL();37===e.keyCode?t?this.handleNext():this.handlePrev():39===e.keyCode&&(t?this.handlePrev():this.handleNext())},this.handleImageLoad=()=>{var{uiActionEvent:e}=this;e&&(e.markUiActionT(),e.commit(),delete this.uiActionEvent)},this.handleScroll=e=>{this._handleScrollThrottled(e.currentTarget,this.mediaMsgs,e.currentTarget.scrollLeft,this.props.listeners)},this.handleNext=e=>{if(e&&e.stopPropagation(),!this.state.imgZoomed){var t=this.state.activeMsg;if(t){var a=null;for(a=this.mediaMsgs.getAfter(t);a&&a.mediaData&&!(0,C.hasThumbnail)(a.mediaData);)a=this.mediaMsgs.getAfter(a);a?this.handleSelectThumb(a):this.mediaMsgs.hasMediaAfter&&(this._queryMediaAfter||(this._queryMediaAfter=this.mediaMsgs.queryMedia({chat:t.chat,msg:t,direction:"after"}).checkpoint(this.props.rejectOnUnmount()).then((e=>{"number"==typeof e.length&&e.length>0&&this.state.activeMsg===t&&this.handleNext()})).catchType(u.Unmount,(()=>{})).catch((()=>{__LOG__(3)`query media msgs error: `})).finally((()=>{this._queryMediaAfter=null}))))}}},this.handlePrev=e=>{if(e&&e.stopPropagation(),!this.state.imgZoomed){var t=this.state.activeMsg;if(t){var a=null;for(a=this.mediaMsgs.getBefore(t);a&&a.mediaData&&!(0,C.hasThumbnail)(a.mediaData);)a=this.mediaMsgs.getBefore(a);a?this.handleSelectThumb(a):this.mediaMsgs.hasMediaBefore&&(this._queryMediaBefore||(this._queryMediaBefore=this.mediaMsgs.queryMedia({chat:t.chat,msg:t,direction:"before"}).checkpoint(this.props.rejectOnUnmount()).then((e=>{"number"==typeof e.length&&e.length>0&&this.state.activeMsg===t&&this.handlePrev()})).catchType(u.Unmount,(()=>{})).catch((()=>{__LOG__(3)`query media msgs error: `})).finally((()=>{this._queryMediaBefore=null}))))}}},this.handleImgZoomIn=e=>{this.setState({imgZoomed:e})},this.endFlow=()=>{o.default.closeModalMedia()},this.willEndFlow=()=>{var e;(e=this._refThumbsContainer)&&(0,_.default)(e,{opacity:[0,1],translateY:["100%","0%"]},{duration:300,easing:[.1,.82,.25,1]})},this.handleSelectThumb=e=>{this.props.listeners.uiIdle((()=>{this.mediaMsgs.loadMoreAroundIfNeeded(e)})),this.setState({activeMsg:e})},this.scrollToActive=(e=!1)=>{var t=this._refThumbsContainer,a=this._refThumbs,l=this._refActiveThumb;if(t&&a&&l){var i=0;l instanceof HTMLElement&&(i=l.clientWidth/2-t.clientWidth/2),(0,_.default)(a,"stop");var s=0;e&&(s=300),(0,_.default)(l,"scroll",{duration:s,container:a,offset:i,axis:"x",easing:[.1,.82,.25,1]})}},this._setRefActiveThumb=e=>{this._refActiveThumb=e},this.setRefThumbsContainer=e=>{this._refThumbsContainer=e},this.setRefThumbs=e=>{this._refThumbs=e},this._getActiveMsgIndexInAlbum=()=>{var e=-1,{highlightedMsgIds:t}=this.props;if(!t||!this.state.activeMsg)return e;var a=this.state.activeMsg.id.toString();if(!t.has(a))return e;var l=0;return t.forEach((t=>{t===a&&(e=l),l++})),e},this._previousMediaHasThumb=()=>{var e=this.state.activeMsg;if(!e)return!1;for(var t=this.mediaMsgs.indexOf(e)-1;t>0;t--){var a=this.mediaMsgs.at(t);if(a&&(0,C.hasThumbnail)(a.mediaData))return!0}return!1},this._prevScrollWidth=null;var t=this.props.msg;this.mediaMsgs=t.chat.constructMediaMsgs(t),this._handleScrollThrottled=(0,s.default)(this._handleScroll.bind(this),100),t.type===d.default.MSG_TYPE.IMAGE&&(this.uiActionEvent=new g.default.UiAction({uiActionType:g.default.UI_ACTION_TYPE.IMAGE_OPEN,uiActionPreloaded:t.mediaData.mediaStage===p.MEDIA_DATA_STAGE.RESOLVED})),this.state={activeMsg:t,imgZoomed:!1,animatingThumbs:this._hasThumbList(t)}}componentDidMount(){this.props.listeners.add(window,"keydown",this.handleKeyDown),this._addListeners(),this.scrollToActive(),(e=>{e&&(0,_.default)(e,{opacity:[1,0],translateY:["0%","100%"]},{duration:300,delay:100,easing:[.1,.82,.25,1]}).then((()=>{this._unmounted||this.setState({animatingThumbs:!1})}))})(this._refThumbsContainer)}componentDidUpdate(e,t){if(t.activeMsg!==this.state.activeMsg)this.scrollToActive(!0);else{var a=this._refThumbs;if(!a||null==this._prevScrollWidth||0===this._prevScrollWidth)return;a instanceof HTMLElement&&(a.scrollLeft+=a.scrollWidth-this._prevScrollWidth),this._prevScrollWidth=null}}componentWillUnmount(){this._handleScrollThrottled.cancel(),this._unmounted=!0}_hasThumbList(e){return!(null==e?void 0:e.isViewOnce)}_handleScroll(e,t,a,l){if(0!==t.length&&null!=a){if(t.hasMediaBefore&&a<e.clientWidth){var i=(0,n.default)(t.head(),"mediaMsgs.head()");l.uiIdle((()=>{t.queryMedia({chat:i.chat,msg:i}),this.forceUpdate()}))}if(t.hasMediaAfter&&a+d.default.SCROLL_FUDGE>e.scrollWidth-2*e.clientWidth){var s=(0,n.default)(t.last(),"mediaMsgs.last()");l.uiIdle((()=>{t.queryMedia({chat:s.chat,msg:s,direction:"after"}),this.forceUpdate()}))}}}render(){var e,t=this.state.activeMsg;if(!t)return null;var a=this.mediaMsgs.last(),l=this.mediaMsgs.hasMediaAfter||this.state.activeMsg!==a?this.handleNext:null,i=this.mediaMsgs.head(),s=null;return s=this.mediaMsgs.hasMediaBefore||this.state.activeMsg!==i?this.handlePrev:null,c.default.supportsFeature(c.default.F.MD_BACKEND)&&(s=(this.mediaMsgs.hasMediaBefore||this.state.activeMsg!==i)&&this._previousMediaHasThumb()?this.handlePrev:null),r.default.createElement("div",{className:this.state.imgZoomed?"img-zoomed-in":null},this._hasThumbList(t)&&r.default.createElement(E.default,{activeMsg:t,mediaMsgs:this.mediaMsgs,highlightedMsgIds:this.props.highlightedMsgIds,onSelectThumb:this.handleSelectThumb,onSetActiveThumb:this._setRefActiveThumb,onScroll:this.handleScroll,setRefThumbsContainer:this.setRefThumbsContainer,setRefThumbs:this.setRefThumbs}),r.default.createElement(m.default,{msg:t,mediaData:t.mediaData,onBack:this.endFlow,onExitAnimation:this.willEndFlow,onNext:l,onPrev:s,onImgZoomIn:this.handleImgZoomIn,getZoomNode:this.props.getZoomNode,startTime:this.props.startTime,isAnimatingIn:this.state.animatingThumbs,onImageLoad:this.uiActionEvent?this.handleImageLoad:null,msgIndexInAlbum:this._getActiveMsgIndexInAlbum(),albumSize:(null===(e=this.props.highlightedMsgIds)||void 0===e?void 0:e.size)||0}))}}M.displayName="MediaViewerFlow";var S=(0,v.default)((0,h.default)(M));t.default=S},88162:(e,t,a)=>{"use strict";var l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=l(a(67294)),s=l(a(68356)),n=l(a(75444)),r=l(a(80162)),o=l(a(21024)),d=(0,l(a(21884)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,66409)).then((e=>e.default))),"SendContactFlow");t.requireBundle=d;var u=(0,s.default)({loader:d,loading:e=>i.default.createElement(o.default,{title:r.default.t(1466),error:Boolean(e.error)}),delay:n.default.LOADABLE_DELAY});t.default=u},44226:(e,t,a)=>{"use strict";var l=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),n=l(a(85967)),r=i(a(24307)),o=l(a(74798)),d=l(a(33766)),u=l(a(75444)),c=l(a(64120)),f=l(a(39490)),h=i(a(55977)),p=l(a(44373)),m=l(a(7970)),E=a(92997),g=l(a(3128)),v=l(a(59432)),_=a(57909),C=l(a(62886)),M=a(26226),S=a(34605),T=l(a(35001)),P=l(a(80162)),b=l(a(80896)),I=a(97713),N=l(a(87964)),y=l(a(72765)),k=l(a(32885)),A=l(a(38245)),O=l(a(4328));class w extends s.Component{constructor(...e){super(...e),this.flatListController=new v.default,this.selection=new N.default([],(e=>e.id.toString())),this.state={forceHideNux:!1,chats:this._getArchivedChats()},this.handleClick=(e,t)=>{d.default.openChatFromUnread(t).then((e=>{e&&d.default.focusChatTextInput(t)})),(0,S.archiveV2Supported)()&&this.props.settings.archive.enabled||this.handleClose()},this._updateSelected=e=>{this.selection.setVal(e,!1)},this.handleClose=()=>{this.props.onClose()},this.handleNextChat=e=>{e.preventDefault(),e.stopPropagation(),this.selection.setNext(!0)},this.handlePrevChat=e=>{e.preventDefault(),e.stopPropagation(),this.selection.setPrev(!0)},this.shouldShowArchiveV2=()=>(0,S.archiveV2Supported)()&&this.props.settings.showArchiveV2,this._handleCloseChat=e=>{e===this.selection.getVal()&&this.selection.unset()},this.renderItem=e=>s.default.createElement(r.default,{chat:e.chat,mode:r.Mode.LAST,active:this.selection,onClick:this.handleClick,hideArchivedIcon:(0,S.archiveV2Supported)()&&this.props.settings.archive.enabled,hideMuteIcon:this.shouldShowArchiveV2(),hideMuteOption:this.shouldShowArchiveV2(),showEphemeralIcon:!0}),this.setRefHotKeys=e=>{this.refList=e},this._handleCloseNux=()=>{(0,M.setNUX)(u.default.NUX.ARCHIVE,{views:u.default.ARCHIVE_NUX_MAX_VIEWS,maxViews:u.default.ARCHIVE_NUX_MAX_VIEWS}),this.setState({forceHideNux:!0})},this._showNux=()=>{var e=o.default.some((e=>e.archive));return this.shouldShowArchiveV2()&&e&&(0,M.shouldShowNUX)(u.default.NUX.ARCHIVE)&&!this.state.forceHideNux}}componentDidMount(){this.shouldShowArchiveV2()&&!(0,M.getNUX)(u.default.NUX.ARCHIVE)&&(0,M.setNUX)(u.default.NUX.ARCHIVE,{views:0,maxViews:u.default.ARCHIVE_NUX_MAX_VIEWS}),this._showNux()&&(0,M.viewNUX)(u.default.NUX.ARCHIVE),this.shouldShowArchiveV2()?this.props.listeners.add(o.default,"sort change:archive add remove",(()=>{this.setState({chats:this._getArchivedChats()})})):this.props.listeners.add(o.default,"change:archive add remove",(()=>{this.setState({chats:this._getArchivedChats()})})),this.refList&&C.default.focus(this.refList),this.props.listeners.add(d.default,"update_chatlist_selection",this._updateSelected),this.props.listeners.add(d.default,"close_chat",this._handleCloseChat);var e=this._getActiveArchiveChat();e&&this._updateSelected(e)}_getActiveArchiveChat(){return o.default.toArray().find((e=>e.active&&e.archive))}_getArchivedChats(){return o.default.filter((e=>e.archive))}getData(){return this.state.chats.map((e=>({itemKey:e.id.toString(),chat:e})))}render(){var e,t;if(this.selection.init(this.state.chats,!0),this._showNux()&&(t=s.default.createElement("div",{className:n.default.nuxContainer},s.default.createElement(_.FlexColumn,{align:"center"},s.default.createElement("span",{className:n.default.nuxIcon},s.default.createElement(k.default,{name:"archive-nux"})),s.default.createElement("div",{className:n.default.nuxHeader},s.default.createElement(A.default,{theme:"large",as:"h1"},P.default.t(240))),s.default.createElement("div",{className:n.default.nuxContent},s.default.createElement("div",{className:n.default.nuxText},s.default.createElement(A.default,{theme:"plain",as:"p"},P.default.t(239))))),s.default.createElement("button",{onClick:this._handleCloseNux,className:n.default.btnClose},s.default.createElement(k.default,{name:"x-alt"})))),this.state.chats.length>0){var a={down:this.handleNextChat,up:this.handlePrevChat};e=s.default.createElement(T.default,{onRef:this.setRefHotKeys,handlers:a},s.default.createElement(O.default,{transitionName:"slide"},t),s.default.createElement(g.default,{className:n.default.flatListContainer,data:this.getData(),flatListController:this.flatListController,direction:"vertical",renderItem:this.renderItem}))}else e=s.default.createElement(E.Archived,null);var l=(0,S.archiveV2Supported)()&&this.props.settings.archive.enabled?s.default.createElement(I.MenuBarItem,{a8nText:"archived-menu",icon:s.default.createElement(k.default,{name:"menu"}),title:P.default.t(1112)},s.default.createElement(p.default,{type:"dropdown_menu",flipOnRTL:!0,key:"ArchivedDrawerHeader",dirX:"LEFT"},s.default.createElement(m.default,{a8n:"open-archive-settings menu-item",action:this.props.showSettings},P.default.t(241)))):null,i=(0,S.archiveV2Supported)()&&this.props.settings.archive.enabled?P.default.t(244):P.default.t(243);return s.default.createElement(c.default,{theme:"archived"},s.default.createElement(h.default,{title:i,onBack:this.handleClose,type:h.DRAWER_HEADER_TYPE.LARGE,menu:l}),s.default.createElement(f.default,{flatListControllers:[this.flatListController]},e))}}w.CONCERNS={settings:["showArchiveV2","archive"]},w.displayName="ArchivedDrawer";var R=(0,b.default)((0,y.default)(w,w.CONCERNS));t.default=R},11258:(e,t,a)=>{"use strict";var l=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),n=l(a(83442)),r=l(a(44386)),o=l(a(33766)),d=l(a(4457)),u=l(a(62899)),c=i(a(17367)),f=l(a(64120)),h=l(a(39490)),p=l(a(75389)),m=i(a(55977)),E=l(a(68698)),g=a(77824),v=l(a(3128)),_=l(a(59432)),C=a(26226),M=l(a(83288)),S=l(a(80162)),T=l(a(80896)),P=l(a(79411)),b=l(a(72765)),I=a(6578),N=l(a(32885)),y=a(38245),k=l(a(53680)),A=l(a(77188)),O=l(a(97060)),w=l(a(40116));class R extends s.Component{constructor(...e){super(...e),this.flatListController=new _.default,this.handleParticipantClick=(e,t)=>{k.default.equals((0,C.getMaybeMeUser)(),t.id)||(0,g.findChat)(t.id).then((function(e){o.default.openChatFromUnread(e).then((t=>{t&&o.default.focusChatTextInput(e)}))}))},this.handleClose=()=>{this.props.onClose?this.props.onClose():this.props.uim.uie.requestDismiss()},this.handleDelete=()=>{o.default.deleteOrExitChat((0,I.unproxy)(this.props.chat))},this.showEncryptionInfoPopup=()=>{o.default.openModal(s.default.createElement(w.default,{chatId:this.props.chat.id,e2eSubtype:"info_encrypted"}))},this.renderItem=e=>{var{participant:t}=e,a=u.default.gadd(t.id);return s.default.createElement(d.default,{contact:a,theme:"drawer-list",admin:!!t.isAdmin,onClick:this.handleParticipantClick,key:t.id.toString(),waitIdle:!0})}}componentDidMount(){var e=this.props.chat.groupMetadata;null!=e&&this.props.listeners.add(e.participants,"add remove sort reset",(()=>{this.forceUpdate()}))}getData(){var e,t;return(null!==(e=null===(t=this.props.chat.groupMetadata)||void 0===t?void 0:t.participants)&&void 0!==e?e:[]).map((e=>({itemKey:e.id.toString(),participant:e})))}render(){var e,t,a,l=this.props.chat,i=null;if(this.props.onMediaGallery){var o=s.default.createElement(N.default,{className:n.default.chevron,name:"chevron-right-alt",directional:!0}),d=S.default.t(1092);i=s.default.createElement(E.default,{title:d,titleOnClick:this.props.onMediaGallery||(()=>{}),subtitle:o,theme:"padding"},s.default.createElement(P.default,{chat:(0,I.unproxy)(l),mediaMsgs:l.getMediaMsgs()}))}var u,g=null!==(e=null===(t=this.props.chat.groupMetadata)||void 0===t?void 0:t.participants)&&void 0!==e?e:[],_=s.default.createElement(y.TextSpan,{theme:"section-title"},S.default.n(g.length)),C=g.length?s.default.createElement(E.default,{title:S.default.t(1995),subtitle:_},s.default.createElement(v.default,{flatListController:this.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:this.getData(),renderItem:this.renderItem})):null,M=s.default.createElement(E.default,null,s.default.createElement(p.default,{a8nText:"li-delete-broadcast",icon:s.default.createElement(N.default,{name:"delete"}),color:"danger",theme:"list-aligned",onClick:this.handleDelete},S.default.t(1810)));(null===(a=l.groupMetadata)||void 0===a?void 0:a.creation)?(u=r.default.createdStr(l.groupMetadata.creation),u=s.default.createElement(y.TextDiv,{theme:"small"},u)):u=null;var T=null;A.default.supportsFeature(A.default.F.MD_BACKEND)&&(T=s.default.createElement(O.default,{onClick:this.showEncryptionInfoPopup,text:S.default.t(1757)}));var b=null;return T&&(b=s.default.createElement(E.default,null,null,T)),s.default.createElement(f.default,{key:"contact-info-modal",theme:"striped"},s.default.createElement(m.default,{type:m.DRAWER_HEADER_TYPE.SMALL,onCancel:this.handleClose},s.default.createElement(y.TextDiv,{theme:"title"},S.default.t(370)),u),s.default.createElement(h.default,{flatListControllers:[this.flatListController]},s.default.createElement("div",{className:n.default.body},s.default.createElement("div",{className:n.default.photo},s.default.createElement(c.default,{id:l.id,size:c.DETAIL_IMAGE_SIZE.LARGE})),i,b,C,M)))}}R.CONCERNS={chat:["id","groupMetadata"]},R.displayName="BroadcastInfoDrawer";var D=(0,M.default)((0,T.default)((0,b.default)(R,R.CONCERNS)));t.default=D},7013:(e,t,a)=>{"use strict";var l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a=(0,p.default)(e.contact,["name","verifiedLevel","verifiedName","formattedName"]);t=f.default.supportsFeature(f.default.F.VNAME_V_2)?(()=>{switch(a.verifiedLevel){case o.default.VERIFIED_LEVEL.HIGH:return a.name===a.verifiedName?h.default.t(1761,{businessName:a.verifiedName}):h.default.t(1762,{businessName:a.verifiedName});case o.default.VERIFIED_LEVEL.LOW:case o.default.VERIFIED_LEVEL.UNKNOWN:return h.default.t(1763)}})():(()=>{switch(a.verifiedLevel){case o.default.VERIFIED_LEVEL.HIGH:return h.default.t(2023);case o.default.VERIFIED_LEVEL.LOW:return h.default.t(2025);case o.default.VERIFIED_LEVEL.UNKNOWN:return h.default.t(2027,{businessName:a.formattedName})}})();var l=i.default.createElement(s.default,{href:(0,c.getBusinessFaqUrl)(),onClick:E},h.default.t(1002));return i.default.createElement(r.default,{onOK:m,okText:h.default.t(1289)},i.default.createElement(d.default,{text:t}),"",l)};var i=l(a(67294)),s=l(a(72853)),n=l(a(33766)),r=l(a(51115)),o=l(a(75444)),d=l(a(20923)),u=a(1886),c=a(84641),f=l(a(77188)),h=l(a(80162)),p=l(a(95607)),m=()=>{n.default.closeModal()},E=e=>{e.preventDefault(),n.default.closeModal("none"),setTimeout((()=>(0,u.openExternalLink)((0,c.getBusinessFaqUrl)())),10)}},46444:(e,t,a)=>{"use strict";var l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,{contact:a}=e,l=h.default.t(422);function m(){o.default.openModal(i.default.createElement(n.default,{contact:a}))}function E(){o.default.openModal(i.default.createElement(r.default,{contact:a}))}t=(0,f.canSeeSMBUpsell)()?i.default.createElement(d.default,{a8nText:"business-title",onClick:E,side:i.default.createElement(p.default,{display:"inline",name:"info"})},l):i.default.createElement(u.default,{a8nText:"business-title",className:s.default.businessTitleText,onClick:m},l);return i.default.createElement(c.default,{className:s.default.businessAccount},t)};var i=l(a(67294)),s=l(a(91548)),n=l(a(7013)),r=l(a(17269)),o=l(a(33766)),d=l(a(18248)),u=l(a(75389)),c=l(a(68698)),f=a(34605),h=l(a(80162)),p=l(a(32885))},26620:(e,t,a)=>{"use strict";var l=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a,l,{contact:i,onProductCatalog:s}=e,v=T(h.default),M=(0,g.getProductCatalogSessionId)(v);var P,b,I=c.default.toArray().find((e=>e.active));(null==I?void 0:I.id.equals(i.id))||((0,o.logMessageClick)(i.id,M),l=n.default.createElement(S,{icon:"chat-msg",label:E.default.t(1113),onClick:function(){(0,p.findChat)(i.id).then((function(e){f.default.openChatFromUnread(e).then((()=>{f.default.closeDrawerRight()}))}))},a8nText:"business-action chat"}));(null===(t=i.businessProfile)||void 0===t||null===(a=t.profileOptions)||void 0===a?void 0:a.commerceExperience)===d.COMMERCE_EXPERIENCE_TYPES.CATALOG&&(P=n.default.createElement(S,{icon:"catalog-filled",label:E.default.t(987),onClick:()=>{(0,o.logCatalogClick)(i.id,M),s((0,g.getProductCatalogContext)(v))},a8nText:"business-action catalog"}));(0,u.hasShop)(i.businessProfile)&&(b=n.default.createElement(S,{icon:"shop-filled",label:E.default.t(1495),onClick:function(){(0,o.logShopsClick)(i.id,M),(0,u.goToShop)(i.businessProfile)},a8nText:"business-action shop"}));var N=n.default.createElement(S,{icon:"forward-filled",label:E.default.t(813),onClick:function(){(0,o.logForwardClick)(i.id,M),f.default.openModal(n.default.createElement(_.default,{contacts:[(0,C.unproxy)(i)],onContactsSent:e=>{f.default.openChatFromUnread(e).then((()=>{}))}}))},a8nText:"business-action forward"});return n.default.createElement(m.FlexRow,{className:r.default.actionsRow,justify:"evenly"},l,undefined,P,b,N)};var s=i(a(94184)),n=l(a(67294)),r=i(a(70615)),o=a(42956),d=a(78783),u=a(95140),c=i(a(74798)),f=i(a(33766)),h=(i(a(11288)),i(a(49589))),p=a(77824),m=a(57909),E=i(a(80162)),g=a(38335),v=i(a(93227)),_=i(a(88162)),C=a(6578),M=i(a(32885));a(54890),a(17245).default,a(62924).Z;function S({a8nText:e,icon:t,label:a,disabled:l,onClick:i}){return n.default.createElement("div",{className:(0,s.default)(r.default.actionButton,{[r.default.actionDisabled]:l})},n.default.createElement(v.default,{inverted:!0,onClick:i,disabled:l,a8nText:e},n.default.createElement(M.default,{name:t,directional:!0})),n.default.createElement("div",{className:r.default.actionLabel},a))}var{useContext:T}=n.default},34670:(e,t,a)=>{"use strict";var l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{businessHours:t,contact:a}=e,l=(0,c.getProductCatalogSessionId)(g(o.default)),i=(0,m.getBusinessOpenState)(t),[n,d]=v(!0);if(null==t)return null;var h=(0,f.getBusinessHours)(t).map((e=>{var{day:t,hours:a,first:l}=e,r=t,o=a,d=!1;if(l)switch(i.status){case m.BUSINESS_OPEN_STATUS.OPEN_24H:r=u.default.t(389),o=u.default.t(385),d=!0;break;case m.BUSINESS_OPEN_STATUS.OPEN_APPOINTMENT:r=u.default.t(389),o=u.default.t(388),d=!0;break;case m.BUSINESS_OPEN_STATUS.OPEN:r=u.default.t(389),d=!0;break;case m.BUSINESS_OPEN_STATUS.CLOSED_TODAY:o=u.default.t(374)}return!l&&n?null:s.default.createElement(_,{day:r,dayIsOpen:d,key:t,hours:o,first:l,collapsed:n})}));return s.default.createElement(p.default,{xstyle:E.businessHours,onClick:()=>{(0,r.logHoursClick)(a.id,l),d(!n)},a8nText:"business-hours-expand"},h)},a(46809);var i=l(a(94184)),s=l(a(67294)),n=(l(a(56720)),l(a(46604))),r=a(42956),o=l(a(49589)),d=l(a(20923)),u=l(a(80162)),c=a(38335),f=a(48590),h=l(a(32885)),p=l(a(32759)),m=a(59753),E={businessHours:{display:"srnvb7v5",width:"m0l2qjqb",textAlign:"jj2aypdv"}},{useContext:g,useState:v}=s.default;function _(e){if(e.first){var t=s.default.createElement("div",{className:n.default.businessHoursChevron,role:"button"},s.default.createElement(h.default,{className:e.collapsed?"":n.default.flipSvg,display:"inline",name:"chevron-down-alt"}));return s.default.createElement("div",{className:(0,i.default)(n.default.businessHoursRow,{[n.default.firstRow]:e.first})},s.default.createElement("div",{className:(0,i.default)(n.default.businessHoursDay,{[n.default.dayIsOpen]:e.dayIsOpen})},s.default.createElement(d.default,{direction:"auto",text:e.day})),s.default.createElement("div",{className:n.default.businessHoursHours},s.default.createElement(d.default,{direction:"auto",text:e.hours})),t)}return s.default.createElement("div",{className:n.default.businessHoursRow},s.default.createElement("div",{className:n.default.businessHoursDay},s.default.createElement(d.default,{direction:"auto",text:e.day})),s.default.createElement("div",{className:n.default.businessHoursHours},s.default.createElement(d.default,{direction:"auto",text:e.hours})))}},62507:(e,t,a)=>{"use strict";var l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a,l,_,C,M,{businessProfile:S,contact:T}=e,{description:P,address:b,latitude:I,longitude:N,website:y,email:k,businessHours:A}=(0,g.default)(S,["description","address","latitude","longitude","website","email","businessHours"]),O=v(u.default),w=(0,E.getProductCatalogSessionId)(O);null!=P&&(t=s.default.createElement("div",{className:r.default.section},s.default.createElement(h.default,{text:P,textLimit:d.default.BUSINESS_DESCRIPTION_INFO_PANEL_TRUNC_LENGTH},(({textLimit:e})=>s.default.createElement(f.default,{className:r.default.description,selectable:!0,direction:"auto",text:P,textLimit:e})))));null!=A&&(a=s.default.createElement("div",{className:r.default.section},s.default.createElement(n.default,{businessHours:A,contact:T})));null!=b&&(l=s.default.createElement("div",{className:r.default.section},s.default.createElement(f.default,{selectable:!0,direction:"auto",text:b})));null!=I&&null!=N&&(_=s.default.createElement("div",{style:{height:132},className:(0,i.default)(r.default.section,r.default.map)},s.default.createElement(m.default,{lat:I,lng:N,name:b||"",width:590,height:132,onClick:()=>(0,o.logLocationClick)(T.id,w),a8nText:"business-info-map"})));null!=k&&(C=s.default.createElement("div",{className:r.default.section},s.default.createElement(p.default,{href:`mailto:${k}`,onClick:()=>(0,o.logEmailClick)(T.id,w),a8nText:"business-info-email"},k)));null!=y&&y.length>0&&(M=s.default.createElement("div",{className:r.default.section},y.map((e=>s.default.createElement("div",{key:e},s.default.createElement(p.default,{href:e,onClick:()=>(0,o.logWebsiteClick)(T.id,w),a8nText:"business-info-website"},e))))));return null==t&&null==a&&null==l&&null==_&&null==C&&null==M?null:s.default.createElement(c.default,{theme:"padding"},t,a,l,_,C,M)};var i=l(a(94184)),s=l(a(67294)),n=l(a(34670)),r=l(a(62260)),o=a(42956),d=l(a(75444)),u=l(a(49589)),c=l(a(68698)),f=l(a(20923)),h=l(a(36868)),p=l(a(1886)),m=l(a(55634)),E=a(38335),g=l(a(95607)),{useContext:v}=s.default},42956:(e,t,a)=>{"use strict";var l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.logProfileImpression=function(e,t){var a=new i.default.ViewBusinessProfile({businessProfileJid:e.toString(),viewBusinessProfileAction:i.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_IMPRESSION,catalogSessionId:t});a&&a.commit()},t.logProfileExit=function(e,t,a){var l=new i.default.ViewBusinessProfile({businessProfileJid:e.toString(),viewBusinessProfileAction:i.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_EXIT,catalogSessionId:t,scrollDepth:a});l&&l.commit()},t.logMessageClick=function(e,t){var a=new i.default.ViewBusinessProfile({businessProfileJid:e.toString(),viewBusinessProfileAction:i.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_MESSAGE,catalogSessionId:t});a&&a.commit()},t.logVoiceCallClick=function(e,t){var a=new i.default.ViewBusinessProfile({businessProfileJid:e.toString(),viewBusinessProfileAction:i.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_VOICE_CALL,catalogSessionId:t});a&&a.commit()},t.logShopsClick=function(e,t){var a=new i.default.ViewBusinessProfile({businessProfileJid:e.toString(),viewBusinessProfileAction:i.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_SHOPS_ICON,catalogSessionId:t});a&&a.commit()},t.logCatalogClick=function(e,t){var a=new i.default.ViewBusinessProfile({businessProfileJid:e.toString(),viewBusinessProfileAction:i.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_CATALOG_ICON,catalogSessionId:t});a&&a.commit()},t.logForwardClick=function(e,t){var a=new i.default.ViewBusinessProfile({businessProfileJid:e.toString(),viewBusinessProfileAction:i.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_FORWARD,catalogSessionId:t});a&&a.commit()},t.logEmailClick=function(e,t){var a=new i.default.ViewBusinessProfile({businessProfileJid:e.toString(),viewBusinessProfileAction:i.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_EMAIL,catalogSessionId:t});a&&a.commit()},t.logWebsiteClick=function(e,t){var a=new i.default.ViewBusinessProfile({businessProfileJid:e.toString(),viewBusinessProfileAction:i.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_WEBSITE,catalogSessionId:t});a&&a.commit()},t.logLocationClick=function(e,t){var a=new i.default.ViewBusinessProfile({businessProfileJid:e.toString(),viewBusinessProfileAction:i.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_LOCATION,catalogSessionId:t});a&&a.commit()},t.logHoursClick=function(e,t){var a=new i.default.ViewBusinessProfile({businessProfileJid:e.toString(),viewBusinessProfileAction:i.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_HOURS,catalogSessionId:t});a&&a.commit()},t.logStatusClick=function(e,t){var a=new i.default.ViewBusinessProfile({businessProfileJid:e.toString(),viewBusinessProfileAction:i.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_STATUS,catalogSessionId:t});a&&a.commit()};var i=l(a(72462))},82134:(e,t,a)=>{"use strict";var l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a,{contact:l}=e;if(l.isMyContact)if(l.name!==l.verifiedName){var d;l.showBusinessCheckmarkAsSecondary&&(d=i.default.createElement("div",{className:s.default.icon},i.default.createElement(o.default,{name:"psa-verified"}))),t=i.default.createElement(r.default,{contact:l}),a=i.default.createElement("div",{className:s.default.wrapper},i.default.createElement(n.default,{text:`~${l.verifiedName}`,className:s.default.verifiedText,direction:"auto",ellipsify:!0,titlify:!0}),d)}else t=i.default.createElement(r.default,{contact:l,showBusinessCheckmark:l.showBusinessCheckmarkAsPrimary});else t=i.default.createElement(n.default,{text:l.verifiedName,direction:"auto",ellipsify:!0,titlify:!0}),a=i.default.createElement(r.default,{contact:l,showBusinessCheckmark:l.showBusinessCheckmarkAsPrimary});return i.default.createElement("div",null,i.default.createElement("div",{className:s.default.title},t),i.default.createElement("div",{className:s.default.subtitle},a))};var i=l(a(67294)),s=l(a(67666)),n=l(a(20923)),r=l(a(39148)),o=l(a(32885))},95398:(e,t,a)=>{"use strict";var l=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BusinessProfile=void 0;var s=i(a(94184)),n=l(a(67294)),r=i(a(7013)),o=i(a(17269)),d=i(a(11582)),u=i(a(33766)),c=i(a(75444)),f=i(a(18248)),h=i(a(75389)),p=i(a(68698)),m=i(a(20923)),E=i(a(36868)),g=i(a(1886)),v=i(a(77188)),_=a(34605),C=i(a(80162)),M=i(a(41849)),S=i(a(55634)),T=a(50560),P=i(a(72462)),b=a(48590),I=i(a(69507)),N=i(a(72765)),y=i(a(32885)),{VERIFIED_LEVEL:k}=c.default;class A extends n.PureComponent{constructor(...e){super(...e),this.state={collapsedHours:!0},this._onBusinessHoursClick=()=>{this.setState({collapsedHours:!this.state.collapsedHours})},this._onBusinessInfoClick=()=>{u.default.openModal(n.default.createElement(r.default,{contact:this.props.contact}))},this._onBusinessInfoWithUpsellClick=()=>{u.default.openModal(n.default.createElement(o.default,{contact:this.props.contact}))}}componentDidMount(){new P.default.ViewBusinessProfile({viewBusinessProfileAction:P.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_IMPRESSION}).commit()}_getBusinessInfoTitle(){var e,t=this.props.contact,a=!t.name||t.name===t.verifiedName,l="psa-unverified";switch(t.verifiedLevel){case k.HIGH:l="psa-verified",a?e=n.default.createElement(m.default,{className:d.default.verifiedLabel,text:C.default.t(425)}):(e=n.default.createElement(m.default,{className:d.default.verifiedLabel,text:C.default.t(423)}),e=n.default.createElement(M.default,{id:424,params:{verified:e,businessName:t.verifiedName}}));break;case k.LOW:e=a?n.default.createElement(m.default,{text:C.default.t(402)}):C.default.t(401,{businessName:t.verifiedName});break;case k.UNKNOWN:e=C.default.t(397)}return n.default.createElement(w,{icon:l,className:d.default.businessMarker,onClick:this._onBusinessInfoClick},e)}_getBusinessInfoTitleV2(){var e;switch(this.props.contact.verifiedLevel){case k.HIGH:e=C.default.t(420);break;case k.LOW:case k.UNKNOWN:e=C.default.t(397)}return n.default.createElement(h.default,{a8nText:"business-title",className:d.default.businessTitleText,onClick:this._onBusinessInfoClick},e)}_getBusinessInfoTitleWithSMBUpsell(){var e=this.props.contact.verifiedLevel===k.HIGH?C.default.t(420):C.default.t(397);return n.default.createElement(f.default,{a8nText:"business-title",onClick:this._onBusinessInfoWithUpsellClick,side:n.default.createElement(y.default,{className:d.default.infoIcon,display:"inline",name:"info"})},e)}_getBusinessHours(e){var t=(0,b.getBusinessHours)(e).map((e=>{var{day:t,hours:a,first:l}=e;return!l&&this.state.collapsedHours?null:n.default.createElement(O,{day:t,key:t,hours:a,first:l,collapsed:this.state.collapsedHours})}));return n.default.createElement(w,{icon:"business-hours",onClick:this._onBusinessHoursClick},t)}getAddressString(e){var{streetAddress:t,localizedCityName:a,zipCode:l}=e;return t&&a&&l?C.default.t(396,{streetAddress:t,city:a,zipCode:l}):t&&a?C.default.t(395,{streetAddress:t,city:a}):t}_getAddress(e,t,a,l){var i,s,r,o=l?this.getAddressString(l):null;(null!=t&&null!=a&&(i=n.default.createElement("div",{style:{height:150},className:d.default.businessMap},n.default.createElement(S.default,{lat:t,lng:a,name:o||e,width:565,height:150}))),o)&&(r=null!=t&&null!=a?(0,T.getMapUrl)(t,a,o):(0,T.getSearchUrl)(o),s=n.default.createElement("div",{className:d.default.address},n.default.createElement(g.default,{href:r},n.default.createElement(m.default,{selectable:!0,direction:"auto",text:o}))));return s||i?n.default.createElement(w,{icon:"business-address"},s,i):null}render(){var e,t,a,l,i,s,r,o;e=(0,_.canSeeSMBUpsell)()?this._getBusinessInfoTitleWithSMBUpsell():v.default.supportsFeature(v.default.F.VNAME_V_2)?this._getBusinessInfoTitleV2():this._getBusinessInfoTitle();var u,f=this.props.businessProfile;if(f.stale)t=n.default.createElement("div",{className:d.default.contactBusinessInfoSpinner},n.default.createElement(I.default,{size:20,stroke:5}));else if(a=f.categories&&f.categories.length?n.default.createElement(w,{icon:"business-category"},n.default.createElement(m.default,{selectable:!0,direction:"auto",text:f.categories.map((e=>e.localized_display_name)).join(C.default.t(724))})):null,l=f.description?n.default.createElement(w,{icon:"business-description"},n.default.createElement(E.default,{text:f.description,textLimit:c.default.BUSINESS_DESCRIPTION_INFO_PANEL_TRUNC_LENGTH},(({textLimit:e})=>n.default.createElement(m.default,{selectable:!0,direction:"auto",breakWord:!0,text:f.description,textLimit:e})))):null,i=this._getAddress(this.props.contact.name,f.latitude,f.longitude,f.structuredAddress),f.website&&Array.isArray(f.website)&&f.website.length&&(s=f.website.map(((e,t)=>{var a=(0,b.getWebsiteLink)(e),l=n.default.createElement(m.default,{selectable:!0,direction:"auto",text:e}),i=n.default.createElement(g.default,{className:d.default.link,href:a},l);return n.default.createElement(w,{icon:"business-website",key:t},i)}))),f.businessHours&&(r=this._getBusinessHours(f.businessHours)),f.email){var h=n.default.createElement(m.default,{selectable:!0,direction:"auto",text:f.email}),M=n.default.createElement(g.default,{className:d.default.link,href:`mailto:${f.email}`},h);o=n.default.createElement(w,{icon:"business-email",dir:"auto"},M)}return(t||null!=i||a||l||null!=r||o||s)&&(u=n.default.createElement(p.default,{theme:"padding"},n.default.createElement("div",{className:d.default.contactBusinessInfo},t,i,a,l,r,o,s))),n.default.createElement(n.default.Fragment,null,n.default.createElement(p.default,null,e),u)}}t.BusinessProfile=A,A.CONCERNS={contact:["id","verifiedLevel","name","verifiedName"],businessProfile:["description","categories","website","email","stale","latitude","longitude","businessHours","structuredAddress"]},A.displayName="BusinessProfile";var O=e=>{var t=e.first?n.default.createElement("div",{className:d.default.businessHoursChevron,role:"button"},n.default.createElement(y.default,{className:e.collapsed?"":d.default.flipSvg,display:"inline",name:"chevron-down-alt"})):null;return n.default.createElement("div",{className:d.default.businessHoursRow},n.default.createElement("div",{className:d.default.businessHoursDay},n.default.createElement(m.default,{direction:"auto",text:e.day})),n.default.createElement("div",{className:d.default.businessHoursHours},n.default.createElement(m.default,{direction:"auto",text:e.hours})),t)},w=e=>n.default.createElement("div",{className:(0,s.default)(d.default.dataRow,e.className),onClick:e.onClick},n.default.createElement("div",{className:d.default.dataRowIcon},n.default.createElement(y.default,{name:e.icon})),n.default.createElement("div",{className:d.default.dataRowText},e.children)),R=(0,N.default)(A,A.CONCERNS);t.default=R},9962:(e,t,a)=>{"use strict";var l=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),n=l(a(74724)),r=i(a(24307)),o=l(a(33766)),d=l(a(75444)),u=l(a(68698)),c=a(85946),f=l(a(3128)),h=l(a(80162)),p=l(a(80896)),m=l(a(89670)),E=l(a(72765)),g=l(a(32885)),v=a(38245);class _ extends s.Component{constructor(...e){super(...e),this._commonGroupInitialized=!1,this.state={collapsed:!1,numGroups:0},this.rerender=()=>{this.forceUpdate()},this.handleClick=(e,t)=>{o.default.openChatFromUnread(t).then((e=>{e&&o.default.focusChatTextInput(t)})),this.props.onClose()},this.handleShowMore=()=>{this.setState({collapsed:!1})},this.renderItem=e=>{var{chat:t}=e;return s.default.createElement(r.default,{chat:t,theme:"drawer-list",contact:t.contact,mode:r.Mode.INFO,onClick:this.handleClick,key:t.id.toString()})}}static getDerivedStateFromProps(e,t){var{commonGroups:a}=e.contact,l=a?a.length:0;return t.numGroups<=d.default.INFO_DRAWER_MAX_ROWS&&l>d.default.INFO_DRAWER_MAX_ROWS?{numGroups:l,collapsed:!0}:{numGroups:l}}componentDidMount(){var{commonGroups:e}=this.props.contact;e&&(this.props.listeners.add(e,"add remove",this.rerender),this._commonGroupInitialized=!0),(0,c.findCommonGroups)(this.props.contact).catch((()=>{throw __LOG__(4,!0,new Error,!0)`get from participants table failed`,SEND_LOGS("get from participants table failed when finding common groups"),new Error("get from participants table failed")}))}componentDidUpdate(e){if(e.contact!==this.props.contact){var t=e.contact.commonGroups;t&&e.listeners.remove(t,"add remove",this.rerender),this._commonGroupInitialized=!1}var{commonGroups:a}=this.props.contact;a&&(this._commonGroupInitialized||(this.props.listeners.add(a,"add remove",this.rerender),this._commonGroupInitialized=!0))}componentWillUnmount(){var{commonGroups:e}=this.props.contact;e&&this._commonGroupInitialized&&(this.props.listeners.remove(e,"add remove",this.rerender),this._commonGroupInitialized=!1)}getData(){var e=this.props.contact.commonGroups;return e.length>d.default.INFO_DRAWER_MAX_ROWS&&this.state.collapsed&&(e=e.slice(0,d.default.INFO_DRAWER_MAX_ROWS)),e.map((e=>({itemKey:e.id.toString(),chat:e})))}render(){var e=this.props.contact.commonGroups;if(!e||!e.length)return null;var t,a=s.default.createElement(v.TextSpan,{theme:"section-title"},h.default.n(e.length));if(e.length>d.default.INFO_DRAWER_MAX_ROWS&&this.state.collapsed){var l=e.length-d.default.INFO_DRAWER_MAX_ROWS,i=s.default.createElement(m.default,{theme:"transparent"},s.default.createElement(g.default,{name:"down"}));t=s.default.createElement(n.default,{image:i,theme:"drawer-list",primary:h.default.t(910,{count:l,_plural:l}),onClick:this.handleShowMore})}return s.default.createElement(u.default,{a8nText:"section-common-groups",title:h.default.t(1895),subtitle:a},s.default.createElement(f.default,{flatListController:this.props.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:this.getData(),renderItem:this.renderItem}),t)}}_.CONCERNS={contact:["commonGroups"]},_.displayName="CommonGroupsWell";var C=(0,p.default)((0,E.default)(_,_.CONCERNS));t.default=C},48265:(e,t,a)=>{"use strict";var l=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(81109)),n=a(24788),r=l(a(67294)),o=a(97308),d=i(a(27809)),u=i(a(46444)),c=i(a(62507)),f=a(42956),h=i(a(95398)),p=a(95140),m=i(a(75204)),E=i(a(18824)),g=i(a(74798)),v=i(a(33766)),_=i(a(9962)),C=i(a(51115)),M=i(a(42799)),S=a(98355),T=i(a(16673)),P=l(a(17367)),b=i(a(64120)),I=i(a(18248)),N=i(a(39490)),y=i(a(75389)),k=i(a(49589)),A=l(a(55977)),O=i(a(68698)),w=i(a(20923)),R=i(a(74397)),D=a(54438),x=i(a(59432)),L=i(a(77188)),B=a(34605),F=i(a(83288)),G=i(a(52275)),V=i(a(80162)),U=i(a(41849)),H=i(a(80896)),W=i(a(17749)),j=i(a(79411)),Y=i(a(72462)),q=i(a(33901)),K=i(a(39148)),z=i(a(25954)),Z=a(38335),X=i(a(68290)),$=i(a(85726)),J=i(a(97914)),Q=a(69519),ee=a(26658),te=i(a(19826)),ae=i(a(43662)),le=a(80338),ie=i(a(72765)),se=i(a(62135)),ne=i(a(32885)),re=a(38245),oe=i(a(75919)),de=i(a(8745)),ue=i(a(43232)),ce=a(82509),fe=a(247),he=a(82508),pe=a(26226),me=i(a(97060)),Ee=i(a(64624)),ge=a(84641),ve=a(31172),_e=i(a(55766)),Ce=i(a(31170));class Me extends r.Component{constructor(e){super(e),this.flatListController=new x.default,this._handleBlocklistChange=()=>{this.state.contactIsBlocked!==!!d.default.get(this.props.contact.id)&&this.setState({contactIsBlocked:!!d.default.get(this.props.contact.id)})},this.handleVerificationClick=()=>{this.props.onVerification()},this._handleDeleteChat=()=>{var e=g.default.assertGet(this.props.contact.id);v.default.deleteOrExitChat(e)},this.handleBlockContact=()=>{var e=r.default.createElement(K.default,{contact:this.props.contact});v.default.openModal(r.default.createElement(C.default,{onOK:this.blockContact,okText:V.default.t(299),onCancel:()=>v.default.closeModal(),cancelText:V.default.t(1768)},r.default.createElement(U.default,{id:301,params:{contact:e}})))},this.handleReportSpam=()=>{v.default.openModal(r.default.createElement(J.default,{isBusiness:this.props.contact.isBusiness,isGroupChat:!1,onReport:this.reportSpam,onReportBlockClear:this.reportSpamBlockClear,onCancel:()=>v.default.closeModal()}))},this.reportSpam=()=>{var e=g.default.get(this.props.contact.id);e&&(0,ee.sendSpamReport)(e,le.SpamFlow.Account),v.default.closeModal()},this.reportSpamBlockClear=()=>{var e=g.default.get(this.props.contact.id);e&&(0,ee.sendSpamBlockClear)(e,le.SpamFlow.Block),v.default.closeModal()},this.handleUnblockContact=()=>{var e=r.default.createElement(K.default,{contact:this.props.contact});v.default.openModal(r.default.createElement(C.default,{okText:V.default.t(1574),onOK:this.unblockContact,cancelText:V.default.t(1768),onCancel:()=>v.default.closeModal()},r.default.createElement(U.default,{id:1575,params:{contact:e}})))},this.blockContact=()=>{(0,o.blockContact)(this.props.contact),v.default.closeModal()},this.unblockContact=()=>{(0,o.unblockContact)(this.props.contact),v.default.closeModal()},this.handleClose=()=>{this.props.onClose?this.props.onClose():this.props.uim.uie.requestDismiss()},this._handleViewPicture=e=>{if(this._canViewPicture){var t=e.target;v.default.openModalMedia(r.default.createElement(z.default,{contact:this.props.contact,profilePicThumb:this.props.contact.getProfilePicThumb(),animateBorderRadius:!0,getZoomNode:e=>{e(t)}}),{transition:"profile-viewer",uim:this.props.uim})}},this._handleOpenStatus=()=>{(0,f.logStatusClick)(this.props.contact.id,(0,Z.getProductCatalogSessionId)(this.context))},this._handleDetailImageLoad=()=>{this._canViewPicture=!0},this._canViewPicture=!1,this.state={contactIsBlocked:!!d.default.get(e.contact.id),scrollDepth:100}}componentDidMount(){this.props.listeners.add(d.default,"add remove reset sync",this._handleBlocklistChange);var{contact:e}=this.props;e.businessProfile&&!e.businessProfile.stale&&e.businessCatalog&&m.default.findCarouselCatalog(e.id).catch((0,n.filteredCatch)(D.ServerStatusCodeError,(()=>{__LOG__(3)`Failed to fetch product catalog in contact drawer from server`}))),L.default.supportsFeature(L.default.F.MD_BACKEND)&&(0,he.getFanOutList)([e.id,(0,pe.assertGetMe)()]).then((e=>{(0,ce.ensureE2ESessions)(e)}));var{session:t}=(0,Z.getProductCatalogContext)(this.context);t.isAccidental()?v.default.setDrawerContext("right",(0,Z.buildProductCatalogContext)(new X.default,(0,S.getMaybeBizPlatformForLogging)(e.id.toString()),Y.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_PROFILE)):e.isBusiness&&(0,B.canSeeBizProfileV3)()&&(0,f.logProfileImpression)(e.id,(0,Z.getProductCatalogSessionId)(this.context))}componentWillUnmount(){var{contact:e}=this.props,{session:t}=(0,Z.getProductCatalogContext)(this.context);t.isAccidental()||e.isBusiness&&(0,B.canSeeBizProfileV3)()&&(0,f.logProfileExit)(e.id,(0,Z.getProductCatalogSessionId)(this.context),this.state.scrollDepth)}_shouldRenderCatalog(){var{contact:e}=this.props;return!!(e&&e.isBusiness&&e.businessProfile)&&!!e.businessCatalog}_renderBusinessProfileTopCard(){return this.props.contact.businessProfile?r.default.createElement(T.default,{contact:this.props.contact,onProfilePicLoad:this._handleDetailImageLoad,onProfilePicClick:this._handleViewPicture,onOpenStatus:this._handleOpenStatus,businessProfile:this.props.contact.businessProfile,onProductCatalog:this.props.onProductCatalog}):null}_renderTopCard(){var{contact:e}=this.props;if((0,B.canSeeBizProfileV3)()&&e.isBusiness)return this._renderBusinessProfileTopCard();var t=g.default.get(e.id),a=!e.name&&e.notifyName?r.default.createElement("div",{className:M.default.nameSecondary},r.default.createElement(re.TextSpan,{theme:"muted"},r.default.createElement(w.default,{className:M.default.screenName,direction:"auto",text:e.notifyName,selectable:!0}))):null,l=e.showBusinessCheckmarkAsSecondary&&L.default.supportsFeature(L.default.F.VNAME_V_2)?r.default.createElement("div",{className:M.default.businessVname},r.default.createElement(w.default,{text:e.verifiedName,direction:"auto"}),r.default.createElement("div",{className:M.default.icon},r.default.createElement(ne.default,{name:"psa-verified"}))):null,i=t&&t.presence?r.default.createElement(oe.default,{contact:e,presence:t.presence,chatstate:t.presence.chatstate,location:"info"}):null;return r.default.createElement(O.default,{theme:"padding-large"},r.default.createElement("div",{className:M.default.avatar},r.default.createElement(P.default,{id:e.id,size:P.DETAIL_IMAGE_SIZE.LARGE,loader:!0,onLoad:this._handleDetailImageLoad,onClick:this._handleViewPicture,quality:P.DETAIL_IMAGE_QUALITY.HIGH})),r.default.createElement(re.TextHeader,{level:"2",theme:"large"},r.default.createElement(K.default,{contact:e,selectable:!0,showBusinessCheckmark:e.showBusinessCheckmarkAsPrimary})),a,r.default.createElement("div",{className:M.default.nameSecondary},r.default.createElement(re.TextSpan,{theme:"muted"},l),r.default.createElement(re.TextSpan,{theme:"muted"},i)),r.default.createElement(G.default,{labels:e.labels}))}_handleScroll(e){var t=Math.floor(100*(1+e.currentTarget.scrollTop/e.currentTarget.offsetHeight));t>this.state.scrollDepth&&this.setState({scrollDepth:t})}renderProductCatalogSection(){if(!this._shouldRenderCatalog())return null;var{contact:e,onProductCatalog:t,onProductDetail:a}=this.props,l=m.default.get(e.id);if(!l)return null;var i="",s=!1;(0,B.canSeeBizProfileV3)()&&(i=V.default.t(502),s=!0);var{session:n}=(0,Z.getProductCatalogContext)(this.context);return n.isAccidental()?null:(0,p.hasShop)(e.businessProfile)?r.default.createElement(ae.default,{businessProfile:e.businessProfile,catalog:l,subtitle:i,hideIncompleteRows:s}):r.default.createElement(E.default,{onProductDetail:a,onProductCatalog:t,catalog:l,subtitle:i,hideIncompleteRows:s,shouldLog:!0})}render(){var e,t=this.props.contact,a=r.default.createElement(_.default,{contact:this.props.contact,onClose:this.handleClose,flatListController:this.flatListController}),l=g.default.get(t.id);l&&(e=r.default.createElement(O.default,null,r.default.createElement(y.default,{a8nText:"li-delete-chat",icon:r.default.createElement(ne.default,{name:"delete"}),color:"danger",onClick:this._handleDeleteChat},V.default.t(656))));var i=null;i=this.state.contactIsBlocked?r.default.createElement(O.default,null,r.default.createElement(y.default,{a8nText:"li-unblock",color:"success",icon:r.default.createElement(ne.default,{name:"settings-blocked",directional:!0}),onClick:this.handleUnblockContact},V.default.t(1574))):r.default.createElement(O.default,null,r.default.createElement(y.default,{a8nText:"li-block",color:"danger",icon:r.default.createElement(ne.default,{name:"settings-blocked",directional:!0}),onClick:this.handleBlockContact},V.default.t(299)));var s=r.default.createElement(O.default,null,r.default.createElement(y.default,{a8nText:"li-report-spam",color:"danger",icon:r.default.createElement(ne.default,{name:"thumbs-down",directional:!0}),onClick:this.handleReportSpam},t.isBusiness?V.default.t(1390):V.default.t(1393))),n=null;if(this.props.onMediaGallery&&l){var o=this.props.onMediaGallery,d=r.default.createElement(ne.default,{className:M.default.chevron,name:"chevron-right-alt",directional:!0}),f=V.default.t(1092);n=r.default.createElement(O.default,{a8nText:"section-media",title:f,titleOnClick:o,subtitle:d,theme:"padding"},r.default.createElement(j.default,{chat:l,mediaMsgs:l.getMediaMsgs()}))}var p=null;L.default.supportsFeature(L.default.F.LIVE_LOCATIONS)&&l&&(p=r.default.createElement(W.default,{chat:l,onClick:this.props.onLiveLocation}));var m=null,E=null;(0,B.canSeeBizProfileV3)()?E=this.renderProductCatalogSection():m=this.renderProductCatalogSection();var v=l&&l.mute.canMute()?r.default.createElement(q.default,{chat:l,mute:l.mute,settings:te.default}):null,C=null;if(this.props.onStarred){var S=r.default.createElement(ne.default,{className:M.default.chevron,name:"chevron-right-alt",directional:!0});C=r.default.createElement(I.default,{a8nText:"block-starred-messages",side:S,onClick:this.props.onStarred},r.default.createElement(re.TextSpan,{theme:"title"},V.default.t(543)))}var T=l&&l.shouldShowEphemeralSetting()?r.default.createElement(R.default,{onClick:this.props.onEphemeral,chat:l}):null,P=null,k=l&&l.getReceivedVcardMsgs();if(L.default.supportsFeature(L.default.F.INDEX_RECEIVED_VCARD)&&k&&k.length){var w=r.default.createElement(ne.default,{className:M.default.chevron,name:"chevron-right-alt",directional:!0});P=r.default.createElement(I.default,{a8nText:"block-contact-card",side:w,onClick:this.props.onContactCard},r.default.createElement(re.TextSpan,{theme:"title"},V.default.t(625,{_plural:k.length})))}var D=L.default.supportsFeature(L.default.F.MD_BACKEND)?r.default.createElement(Se,{reducedPrivacyMode:(0,fe.getReducedPrivacyMode)(this.props.contact.privacyMode),onVerificationClick:this.handleVerificationClick,contactId:this.props.contact.id}):null,x=null;(v||C||T||P||D)&&(x=r.default.createElement(O.default,null,v,C,T,P,D));var F,U,H=r.default.createElement(I.default,{multiline:!0},r.default.createElement(re.TextSpan,{theme:"title"},r.default.createElement(se.default,{id:t.id}))),Y=r.default.createElement(I.default,null,r.default.createElement(Q.SelectableSpan,{dir:"auto",selectable:!0},r.default.createElement(re.TextSpan,{theme:"title"},(0,de.default)(t.id)))),K=r.default.createElement(O.default,{a8nText:"section-about-and-phone-number"},r.default.createElement("div",{className:M.default.titleAbout},r.default.createElement(re.TextSpan,{theme:"section-title"},V.default.t(626))),H,Y),z=this._renderTopCard(),Z=null,X=void 0;return t.isBusiness&&t.businessProfile&&((0,B.canSeeBizProfileV3)()&&t.businessProfile?(Z=r.default.createElement(c.default,{businessProfile:t.businessProfile,contact:t}),F=r.default.createElement(u.default,{contact:t}),t.labels&&t.labels.length>0&&(U=r.default.createElement(O.default,{theme:"padding"},r.default.createElement(G.default,{labels:t.labels,theme:"standalone"}))),X=this._handleScroll.bind(this)):t.businessProfile&&(Z=r.default.createElement(h.default,{contact:t,businessProfile:t.businessProfile}))),r.default.createElement(b.default,{key:"contact-info-modal",theme:"striped"},r.default.createElement(A.default,{title:V.default.t(1780),type:A.DRAWER_HEADER_TYPE.SMALL,onCancel:this.handleClose}),r.default.createElement(N.default,{flatListControllers:[this.flatListController],onScroll:X},r.default.createElement("section",{className:M.default.body},z,F,U,E,Z,p,m,n,x,K,null,a,i,s,e)))}}function Se({reducedPrivacyMode:e,onVerificationClick:t,contactId:a}){var l=Ee.default.isVoiceCallEnabled()||Ee.default.isVideoCallEnabled()?V.default.t(1784):V.default.t(1783);if(ue.default.bspSystemMessageEnabled){var{title:i,text:n,onClick:o}=function(e,t){if((0,Ce.default)(t.user))return{text:V.default.t(1544),title:V.default.t(628),onClick:()=>{(0,_e.default)(V.default.t(1542),(0,ge.getSupportChatSafetyFaqUrl)(),V.default.t(1543))}};switch(e){case fe.ReducedPrivacyMode.E2EE:return(0,s.default)({},null);case fe.ReducedPrivacyMode.BSP:return{text:V.default.t(282),title:V.default.t(628),onClick:()=>{(0,_e.default)((0,ve.formatBspModalText)(),(0,ge.getE2EEnterpriseFaqUrl)())}};case fe.ReducedPrivacyMode.FB:return{text:V.default.t(283),title:V.default.t(628),onClick:()=>{(0,_e.default)((0,ve.formatFbModalText)(),(0,ge.getE2EEnterpriseFaqUrl)())}}}}(e,a);return r.default.createElement(me.default,{title:i,text:null!=n?n:l,onClick:null!=o?o:t})}return r.default.createElement(me.default,{onClick:t,text:l})}Me.contextType=k.default,Me.CONCERNS={contact:["id","formattedName","formattedUser","formattedShortName","isBusiness","isEnterprise","isMyContact","commonGroups","businessProfile","showBusinessCheckmarkAsPrimary","showBusinessCheckmarkAsSecondary","verifiedName","verifiedLevel","name","notifyName","labels","businessCatalog","isContactBlocked","isMe","statusMute","privacyMode"]},Me.displayName="ContactInfoDrawer";var Te=(0,F.default)((0,$.default)((0,H.default)((0,ie.default)(Me,Me.CONCERNS))));t.default=Te},16673:(e,t,a)=>{"use strict";var l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({contact:e,businessProfile:t,onOpenStatus:a,onProductCatalog:l,onProfilePicLoad:h,onProfilePicClick:p}){var m,{businessHours:E,categories:g}=(0,f.default)(t,["businessHours","categories"]),v=i.default.createElement(n.default,{contact:e});null!=g&&g.length>0&&(m=i.default.createElement("div",{className:o.default.categories},g.map((e=>e.localized_display_name)).join(u.default.t(723))));var _=E?i.default.createElement(c.default,{hours:E}):null;return i.default.createElement(d.default,{className:o.default.noPaddingBottom,theme:"padding"},i.default.createElement(r.default,{contact:e,onClick:p,onOpenStatus:a,onLoad:h}),i.default.createElement("div",{className:o.default.info},v,m,_,i.default.createElement(s.default,{contact:e,onProductCatalog:l})))};var i=l(a(67294)),s=l(a(26620)),n=l(a(82134)),r=l(a(77953)),o=l(a(32234)),d=l(a(68698)),u=l(a(80162)),c=l(a(66585)),f=l(a(95607))},96740:(e,t,a)=>{"use strict";var l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=l(a(48265))},66585:(e,t,a)=>{"use strict";var l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{hours:t}=e,a=function(e){switch(e.status){case o.BUSINESS_OPEN_STATUS.OPEN_24H:return n.default.t(386,{open:`<span class="${r.default.open}">${n.default.t(384)}</span>`});case o.BUSINESS_OPEN_STATUS.OPEN_APPOINTMENT:return n.default.t(387,{open:`<span class="${r.default.open}">${n.default.t(384)}</span>`});case o.BUSINESS_OPEN_STATUS.OPEN:if(e.openUntil&&e.additionalOpen&&e.additionalClose)return n.default.t(391,{open:`<span class="${r.default.open}">${n.default.t(384)}</span>`,time:d(e.openUntil),additionalOpenTime:d(e.additionalOpen),additionalCloseTime:d(e.additionalClose)});if(e.openUntil)return n.default.t(390,{open:`<span class="${r.default.open}">${n.default.t(384)}</span>`,time:d(e.openUntil)});break;case o.BUSINESS_OPEN_STATUS.CLOSED:return e.opensAt?n.default.t(376,{closed:`<span class="${r.default.closed}">${n.default.t(375)}</span>`,time:d(e.opensAt)}):`<span class="${r.default.closed}">${n.default.t(375)}</span>`;case o.BUSINESS_OPEN_STATUS.CLOSED_TODAY:return`<span class="${r.default.closed}">${n.default.t(377)}</span>`}return null}((0,o.getBusinessOpenState)(t));if(null==a)return null;var l=i.default.sanitize(a);return s.default.createElement("div",{className:r.default.openStatus,dangerouslySetInnerHTML:{__html:l}})};var i=l(a(27856)),s=l(a(67294)),n=l(a(80162)),r=l(a(13916)),o=a(59753);function d(e){return null==e?"":e.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})}},97060:(e,t,a)=>{"use strict";var l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(s.default.supportsFeature(s.default.F.MD_BACKEND)){var t,{onClick:a,text:l}=e,c=i.default.createElement(r.default,{name:"lock",className:d.default.icon});return i.default.createElement(o.default,{onClick:a,side:c,multiline:!0},i.default.createElement("div",{className:d.default.header},i.default.createElement(n.TextSpan,{theme:"title"},null!==(t=e.title)&&void 0!==t?t:u.default.t(1812))),i.default.createElement(n.TextDiv,{theme:"muted"},l))}return null};var i=l(a(67294)),s=l(a(77188)),n=a(38245),r=l(a(32885)),o=l(a(18248)),d=l(a(21477)),u=l(a(80162))},92259:(e,t,a)=>{"use strict";var l=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67154)),n=i(a(48926)),r=a(24788),o=l(a(67294)),d=i(a(55847)),u=i(a(68790)),c=i(a(39282)),f=i(a(74724)),h=i(a(44386)),p=i(a(33766)),m=i(a(51115)),E=i(a(75444)),g=i(a(64120)),v=i(a(18248)),_=i(a(39490)),C=i(a(75389)),M=l(a(55977)),S=i(a(68698)),T=i(a(7970)),P=i(a(40116)),b=i(a(20923)),I=i(a(87709)),N=i(a(74397)),y=l(a(12536)),k=a(77824),A=l(a(3128)),O=i(a(59432)),w=a(26226),R=i(a(77188)),D=i(a(17847)),x=i(a(73313)),L=i(a(83288)),B=a(99375),F=i(a(52275)),G=i(a(80162)),V=l(a(66802)),U=i(a(80896)),H=i(a(17749)),W=i(a(79411)),j=a(95801),Y=i(a(33901)),q=a(39148),K=i(a(36418)),z=i(a(21668)),Z=i(a(77031)),X=a(56435),$=i(a(85726)),J=i(a(97914)),Q=i(a(89670)),ee=a(26658),te=i(a(43232)),ae=a(24165),le=a(44682),ie=i(a(19826)),se=a(80338),ne=i(a(72765)),re=a(6578),oe=i(a(9252)),de=i(a(32885)),ue=a(38245),ce=l(a(5711)),fe=l(a(48847)),he=i(a(26144)),pe=i(a(11918)),me=i(a(53680)),Ee=a(89852),ge=i(a(97060)),ve=i(a(64624)),_e=a(68002);function Ce(e){return e.length>E.default.INFO_DRAWER_MAX_ROWS_IN_COLLAPSED_LIST}var Me=(0,fe.genId)("max_participant_toast");class Se extends o.Component{constructor(e){var t;super(e),t=this,this._participantFlatListController=new O.default,this._pendingParticipantFlatListController=new O.default,this._setRefContainer=e=>{this._refContainer=e},this._updateGroupDescOnModelChange=()=>{this.props.groupMetadata&&this.setState({groupDesc:this.props.groupMetadata.desc})},this.handleImageSet=(e,t)=>{var a=this.props.profilePicThumb;this.setState({pendingPhoto:!0}),(e&&t?(0,X.setProfilePic)(a,e,t):(0,X.deleteProfilePic)(a)).checkpoint(this.props.rejectOnUnmount()).catch((0,r.filteredCatch)(y.Unmount,(()=>{}))).catch((0,r.filteredCatch)(y.ActionError,(()=>{__LOG__(3)`GroupInfoDrawer: failed to set/delete group image`,this.setState({resetPhotoPicker:!this.state.resetPhotoPicker})}))).finally((()=>{this.setState({pendingPhoto:!1})}))},this.handleParticipantClick=(e,t)=>{me.default.equals((0,w.getMaybeMeUser)(),t.id)||(0,k.findChat)(t.id).then((e=>{p.default.openChatFromUnread(e).then((t=>{t&&p.default.focusChatTextInput(e)}))}))},this._menuEnabled=e=>{var t=this.props.groupMetadata.participants,a=t.get(e.id);return!!a&&(t.canPromote(a)||t.canRemove(a)||t.canVerifyIdentity(a))},this.handleDemoteAdmin=e=>{e.contact.pendingAction++,(0,j.demoteParticipants)(this.props.chat,[e]).then((()=>{e.contact.pendingAction--})),this.setState({contextMenu:null})},this.handleParticipantMenu=(e,t)=>{var a=this.props.groupMetadata.participants,l=a.assertGet(t.id);if(this._menuEnabled(t)){var i=[];if(a.canPromote(l)){var s=this._confirmParticipantPromote.bind(this,l);i.push(o.default.createElement(T.default,{a8n:"mi-grp-promote-admin",key:"promote",action:s},G.default.t(1100)))}if(a.canRemove(l)){var n=this._confirmParticipantRemove.bind(this,l);i.push(o.default.createElement(T.default,{a8n:"mi-grp-remove-participant",key:"remove",action:n},G.default.t(1105)))}if(R.default.supportsFeature(R.default.F.GROUPS_V_3)&&a.canDemote(l)){var r=this.handleDemoteAdmin.bind(this,l);i.push(o.default.createElement(T.default,{a8n:"mi-grp-verify-identify",key:"demote-admin",action:r},G.default.t(687)))}if(R.default.supportsFeature(R.default.F.MD_BACKEND)&&a.canVerifyIdentity(l)){var d=this._handleVerifyIdentity.bind(this,l);i.push(o.default.createElement(T.default,{a8n:"mi-grp-verify-identify",key:"verify-identity",action:d},G.default.t(2069)))}e.event&&e.event.persist(),this.setState({contextMenu:{contactId:t.id,menu:i,anchor:e.anchor,event:e.event}})}},this.closeContextMenu=()=>{this.setState({contextMenu:null})},this._confirmParticipantRemove=e=>{var t=this.handleParticipantRemove.bind(this,e,!0),a=G.default.t(611,{participant:e.contact.formattedName,subject:this.props.contact.name});p.default.openModal(o.default.createElement(m.default,{onOK:t,okText:G.default.t(1382),onCancel:()=>p.default.closeModal(),cancelText:G.default.t(1768)},o.default.createElement(b.default,{text:a})))},this.handleParticipantRemove=(e,t)=>{e.contact.pendingAction++,(0,j.removeParticipants)(this.props.chat,[e]).then((()=>{e.contact.pendingAction--})),t&&p.default.closeModal()},this._confirmParticipantPromote=e=>{var t=this.handleParticipantPromote.bind(this,e,!0),a=G.default.t(610,{participant:e.contact.formattedName,subject:this.props.contact.name});p.default.openModal(o.default.createElement(m.default,{onOK:t,okText:G.default.t(1100),onCancel:()=>p.default.closeModal(),cancelText:G.default.t(1768)},o.default.createElement(b.default,{text:a})))},this.handleParticipantPromote=(e,t)=>{e.contact.pendingAction++,(0,j.promoteParticipants)(this.props.chat,[e]).then((()=>{e.contact.pendingAction--})),t&&p.default.closeModal()},this._handleVerifyIdentity=e=>{this.props.onVerification&&this.props.onVerification(e.contact)},this._openAddGroupParticipantFlow=()=>{var{chat:e}=this.props;if(this.props.groupMetadata.participants.length>=te.default.maxParticipants){var t=G.default.t(104,{max:te.default.maxParticipants});p.default.openToast(o.default.createElement(fe.default,{msg:t,id:Me}))}else{var a=R.default.supportsFeature(R.default.F.GROUPS_V_3)?o.default.createElement(c.default,{chat:(0,re.unproxy)(e),pushTransition:"none",popTransition:"none"}):o.default.createElement(u.default,{chat:(0,re.unproxy)(e),pushTransition:"none",popTransition:"none"});p.default.openModal(a,{transition:"modal-flow"})}},this._openParticpantSearch=()=>{p.default.openModal(o.default.createElement(x.default,{chat:(0,re.unproxy)(this.props.chat),onParticipantPromote:this.handleParticipantPromote,onParticipantRemove:this.handleParticipantRemove,onDemoteAdmin:this.handleDemoteAdmin}),{transition:"modal-flow"})},this.handleClose=()=>{this.props.onClose?this.props.onClose():this.props.uim.uie.requestDismiss()},this._handleExitOrDeleteGroup=()=>{p.default.deleteOrExitChat(this.props.chat)},this._handleGroupDescChange=e=>{this.setState({groupDesc:e})},this._handleSetSubject=function(){var e=(0,n.default)((function*(e){var a=(0,I.default)(e);a!==t.props.contact.name&&(yield(0,le.setGroupSubject)(t.props.chat,a).catch((0,r.filteredCatch)(y.Unmount,(()=>{}))).catch((()=>{__LOG__(3)`group_info_drawer:onSetSubject failed`})))}));return function(){return e.apply(this,arguments)}}(),this._handleSetDescription=()=>{var{chat:e,groupMetadata:t}=this.props;if(t.canSetDescription()){var a=this.state.groupDesc||"",l=a.match(/\r\n/gm)?"\r\n":"\n",i=new RegExp(`^(${l}{2,})([^\n])`,"gm");a=a.replace(i,`${l}$2`);var s=(0,I.default)(a||"");if(s===t.desc)return this.setState({groupDesc:s});this.setState({pendingDesc:!0}),(0,ae.setGroupDesc)(e,s).then((()=>{this.setState({groupDesc:t.desc,pendingDesc:!1})})).catch((0,r.filteredCatch)(y.Unmount,(()=>{}))).catch((()=>{__LOG__(3)`group_info_drawer:onSetDescription failed`,this.setState({groupDesc:this.props.groupMetadata.desc,pendingDesc:!1})}))}},this._handleCancelDesc=()=>{this.setState({groupDesc:this.props.groupMetadata.desc})},this.showEncryptionInfoPopup=()=>{p.default.openModal(o.default.createElement(P.default,{chatId:this.props.chat.id,e2eSubtype:"info_encrypted"}))},this._showSecurityInfoPopup=()=>{p.default.openModal(o.default.createElement(P.default,{chat:this.props.chat,chatId:this.props.chat.id,e2eSubtype:"info_encrypted"}))},this.handleShowMore=()=>{this.setState({participantListCollapsed:!1})},this._handleShowMorePendingParticipants=()=>{this.setState({pendingParticipantListCollapsed:!1})},this.renderItem=e=>{var{id:t}=e,a=this.props.groupMetadata.participants.get(t);if(!a)throw new A.UnknownDataError(e);var l=a.contact,i=!!this.state.contextMenu&&me.default.equals(l.id,this.state.contextMenu.contactId);return o.default.createElement(K.default,{contact:l,participant:a,key:a.id.toString(),onClick:this.handleParticipantClick,contextEnabled:this._menuEnabled.bind(this,l),contextMenu:i,onContext:e=>this.handleParticipantMenu(e,l),showNotifyName:!0,waitIdle:!0})},this.handleReportSpam=()=>{p.default.openModal(o.default.createElement(J.default,{isGroupChat:!0,onReport:this.reportSpam,onReportExitClear:this.reportSpamExitClear,onCancel:()=>p.default.closeModal()}))},this.reportSpam=()=>{(0,ee.sendSpamReport)(this.props.chat,se.SpamFlow.Group),p.default.closeModal()},this.reportSpamExitClear=()=>{(0,ee.sendSpamExitClear)(this.props.chat,se.SpamFlow.Block),p.default.closeModal()},this._handleDescriptionReadMore=()=>{this.setState({descTruncated:!1})},this._showEditRestrictionInfo=()=>{p.default.openModal(o.default.createElement(m.default,{onOK:()=>p.default.closeModal(),okText:G.default.t(1941)},G.default.t(1290)))},this.revokeGrpV4Invite=e=>{p.default.openModal(o.default.createElement(m.default,{onOK:()=>{p.default.closeModal(),this.props.groupMetadata.revokeGroupV4AddInvite([e.id.toString()]).then((()=>{p.default.openToast(o.default.createElement(fe.default,{msg:G.default.t(1893),id:(0,fe.genId)()}))}))},okText:G.default.t(2e3),onCancel:()=>p.default.closeModal(),cancelText:G.default.t(1768)},o.default.createElement(b.default,{text:G.default.t(922,{participant:e.contact.formattedName})})))},this._renderPendingParticipantItem=e=>{var{id:t}=e,a=this.props.groupMetadata.pendingParticipants.get(t);if(!a)throw new A.UnknownDataError(e);var l=a.contact;return o.default.createElement(K.default,{contact:l,participant:a,key:a.id.toString(),contextEnabled:()=>!0,contextMenu:!0,onContext:e=>this._handlePendingParticipantMenu(e,l),showNotifyName:!0,isPendingParticipant:!0,waitIdle:!0})},this._handlePendingParticipantMenu=(e,t)=>{var a=this.props.groupMetadata.pendingParticipants.assertGet(t.id),l=[o.default.createElement(T.default,{a8n:"mi-grp-promote-admin",key:"promote",action:this.revokeGrpV4Invite.bind(this,a)},G.default.t(1426))];e.event&&e.event.persist(),this.setState({contextMenu:{contactId:t.id,menu:l,anchor:e.anchor,event:e.event}})};var{groupMetadata:{desc:a,participants:l,pendingParticipants:i},showFullGroupDescription:s}=this.props;this.state={pendingDesc:!1,pendingPhoto:!1,contextMenu:null,groupDraftSubject:null,groupDesc:a,descTruncated:!s&&!!(a&&a.length>30),participantListCollapsed:Ce(l),pendingParticipantListCollapsed:Ce(i),resetPhotoPicker:!1}}componentDidMount(){var e=this.props.groupMetadata;R.default.supportsFeature(R.default.F.MD_BACKEND)&&(0,_e.queryAndUpdateGroupMetadataById)(e.id),R.default.supportsFeature(R.default.F.GROUPS_V_4_JOIN_PERMISSION)&&e.queryGroupV4PendingInvite().then((()=>{this.setState({pendingParticipantListCollapsed:Ce(e.pendingParticipants)})})),this.props.listeners.add(e.participants,"add remove reset sort change:isAdmin change:isSuperAdmin",(()=>{this.forceUpdate()})),this.props.listeners.add(e.pendingParticipants,"add remove reset",(()=>{this.forceUpdate()})),this.props.listeners.add(e,"change:desc",(()=>{this._updateGroupDescOnModelChange()})),this.ensureParticipantsSorted(),R.default.supportsFeature(R.default.F.MD_BACKEND)&&this.props.scrollToParticipantList&&this._refContainer&&(0,Ee.scrollIntoViewIfNeeded)(this._refContainer,!1)}componentDidUpdate(){this.ensureParticipantsSorted()}ensureParticipantsSorted(){this.props.groupMetadata.participants.ensureSorted(),this.props.groupMetadata.pendingParticipants.ensureSorted()}getData(){var e,t=[],a=[],l=this.props.groupMetadata.participants;l.forEach((l=>{l.contact.isMe?e=l:l.isAdmin?t.push(l):a.push(l)}));var i=[];return e&&i.push(e),i=i.concat(t,a),Ce(l)&&this.state.participantListCollapsed&&(i=i.slice(0,E.default.INFO_DRAWER_MAX_ROWS)),i.map((e=>({itemKey:e.id.toString(),id:e.id})))}_getPendingParticipantListData(){var e=this.props.groupMetadata.pendingParticipants,t=e.toArray();return Ce(e)&&this.state.pendingParticipantListCollapsed&&(t=t.slice(0,E.default.INFO_DRAWER_MAX_ROWS)),t.map((e=>({itemKey:e.id.toString(),id:e.id})))}_getTitle(){return te.default.productMediaAttachments?G.default.t(1093):G.default.t(1092)}render(){var e,t,a,l,i,s,n,{chat:r,groupMetadata:u}=this.props,c=o.default.createElement(S.default,null,o.default.createElement(C.default,{a8nText:"li-delete-group",icon:o.default.createElement(de.default,{name:"exit",directional:!0}),theme:"list-aligned",color:"danger",onClick:this._handleExitOrDeleteGroup},r.isReadOnly?G.default.t(1809):G.default.t(1814)));if(r.isReadOnly||(e=o.default.createElement(S.default,null,o.default.createElement(C.default,{a8nText:"li-report-spam",theme:"list-aligned",color:"danger",icon:o.default.createElement(de.default,{name:"thumbs-down",directional:!0}),onClick:this.handleReportSpam},G.default.t(1397)))),u.participants.canAdd()&&!u.support){var p=o.default.createElement(Q.default,null,o.default.createElement(de.default,{name:"add-user",directional:!0}));t=o.default.createElement(f.default,{image:p,theme:"drawer-list",primary:G.default.t(221),onClick:this._openAddGroupParticipantFlow})}if(u.participants.iAmAdmin()&&this.props.onGroupInviteLink&&!u.support){var m=o.default.createElement(Q.default,null,o.default.createElement(de.default,{name:"link"}));a=o.default.createElement(f.default,{image:m,theme:"drawer-list",primary:G.default.t(873),onClick:this.props.onGroupInviteLink})}if(Ce(u.participants)&&this.state.participantListCollapsed){var T=u.participants.length-E.default.INFO_DRAWER_MAX_ROWS,P=o.default.createElement(Q.default,{theme:"transparent"},o.default.createElement(de.default,{name:"down"}));l=o.default.createElement(f.default,{image:P,theme:"drawer-list",primary:G.default.t(910,{count:T,_plural:T}),onClick:this.handleShowMore})}if(Ce(u.pendingParticipants)&&this.state.pendingParticipantListCollapsed){var b=u.pendingParticipants.length-E.default.INFO_DRAWER_MAX_ROWS,I=o.default.createElement(Q.default,{theme:"transparent"},o.default.createElement(de.default,{name:"down"}));i=o.default.createElement(f.default,{image:I,theme:"drawer-list",primary:G.default.t(910,{count:b,_plural:b}),onClick:this._handleShowMorePendingParticipants})}if(u.pendingParticipants.length>0&&(s=o.default.createElement(A.default,{flatListController:this._pendingParticipantFlatListController,direction:"vertical",forceConsistentRenderCount:!1,data:this._getPendingParticipantListData(),renderItem:this._renderPendingParticipantItem})),u.participants.iAmAdmin()&&R.default.supportsFeature(R.default.F.GROUPS_V_3)&&!u.support){var y=o.default.createElement(de.default,{className:D.default.chevron,name:"chevron-right-alt",directional:!0});n=o.default.createElement(v.default,{onClick:this.props.onAdminSetting,side:y},o.default.createElement(ue.TextSpan,{theme:"title"},G.default.t(908)))}var k,O=o.default.createElement(de.default,{name:"search",className:D.default.iconSearch}),w=u.participants.length?o.default.createElement(S.default,{onRef:this._setRefContainer,a8nText:"section-participants",title:G.default.t(1943,{count:u.participants.length,_plural:u.participants.length}),titleOnClick:R.default.supportsFeature(R.default.F.GROUPS_V_3)?this._openParticpantSearch:void 0,subtitle:R.default.supportsFeature(R.default.F.GROUPS_V_3)?O:void 0},t,a,o.default.createElement(A.default,{flatListController:this._participantFlatListController,direction:"vertical",forceConsistentRenderCount:!1,data:this.getData(),renderItem:this.renderItem}),l):null;u.participants.iAmAdmin()&&u.pendingParticipants.length>0&&(k=o.default.createElement(S.default,{a8nText:"section-participants",title:G.default.t(914,{number:u.pendingParticipants.length})},s,i));var x=null;if(this.props.onMediaGallery){var L=this.props.onMediaGallery,U=o.default.createElement(de.default,{className:D.default.chevron,name:"chevron-right-alt",directional:!0}),j=this._getTitle();x=o.default.createElement(S.default,{a8nText:"section-media",title:j,titleOnClick:L,subtitle:U,theme:"padding"},o.default.createElement(W.default,{chat:(0,re.unproxy)(r),mediaMsgs:r.getMediaMsgs()}))}var K=this.props.contact.profilePicThumb,X=Z.default.GROUP,$=r.isReadOnly||!K.canDelete()&&!K.canSet()||r.isSupportGroup(),J=o.default.createElement("div",{className:D.default.avatar},o.default.createElement(z.default,{key:String(this.state.resetPhotoPicker),type:X,id:this.props.contact.id,attachToChat:!0,pending:this.state.pendingPhoto,startImage:this.props.profilePicThumb.imgFull,readOnly:$,onImageSet:this.handleImageSet})),ee=null;this.props.groupMetadata.creation&&(ee=o.default.createElement("div",{"data-a8n":d.default.key("group-created-time"),className:D.default.nameSecondary},o.default.createElement(ue.TextSpan,{theme:"muted"},h.default.createdStr(this.props.groupMetadata.creation,this.props.chat.isSupportGroup()))));var ae=null;R.default.supportsFeature(R.default.F.LIVE_LOCATIONS)&&(ae=o.default.createElement(H.default,{chat:r,onClick:this.props.onLiveLocation}));var le=r&&r.shouldShowEphemeralSetting()?o.default.createElement(N.default,{onClick:this.props.onEphemeral,chat:r,groupMetadata:u}):null,se=null;R.default.supportsFeature(R.default.F.MD_BACKEND)&&(se=o.default.createElement(ge.default,{onClick:this.showEncryptionInfoPopup,text:ve.default.isGroupCallEnabled()?G.default.t(1847):G.default.t(1846)})),this.props.chat.isSupportGroup()&&(se=o.default.createElement(oe.default,{onClick:this._showSecurityInfoPopup}));var ne,fe=r.mute.canMute()?o.default.createElement(Y.default,{chat:r,mute:r.mute,settings:ie.default}):null,me=null;if(this.props.onStarred){var Ee=o.default.createElement(de.default,{className:D.default.chevron,name:"chevron-right-alt",directional:!0});me=o.default.createElement(v.default,{side:Ee,onClick:this.props.onStarred},o.default.createElement(ue.TextSpan,{theme:"title"},G.default.t(543)))}this.state.contextMenu&&(ne=o.default.createElement(he.default,{displayName:"ChatContextMenu",escapable:!0,popable:!0,requestDismiss:this.closeContextMenu},o.default.createElement(pe.default,{contextMenu:this.state.contextMenu})));var _e,Me=null;if((fe||me||se||le)&&(Me=o.default.createElement(S.default,null,fe,me,le,se,n)),R.default.supportsFeature(R.default.F.GROUPS_V_3)&&te.default.groupDescLength>0){var Se=this.state.groupDesc||"",Pe={textLimit:this.state.descTruncated?E.default.GROUP_DESCRIPTION_INFO_PANEL_TRUNC_LENGTH:1/0,readMoreText:G.default.t(1380),onReadMore:this._handleDescriptionReadMore,formatters:this.props.chat.isTrusted()?B.Configuration.TrustedGroupDesc({links:V.findLinks(Se)}):B.Configuration.UntrustedGroupDesc()};_e=o.default.createElement(S.default,{theme:"group-desc-padding",title:G.default.t(860)},o.default.createElement("div",{className:D.default.description},o.default.createElement(ce.default,{a8n:"group-info-drawer-description-title-input",value:Se,emptyValuePlaceholder:G.default.t(219),renderEmojiTextInLockMode:Pe,editable:u.canSetDescription(),pending:this.state.pendingDesc,showRemaining:!0,maxLength:te.default.groupDescLength,onChange:this._handleGroupDescChange,onSave:this._handleSetDescription,onCancel:this._handleCancelDesc,multiline:!0,editRestrictionInfo:u.restrict?this._showEditRestrictionInfo:void 0,supportsEmoji:!0,lockable:!0,lowProfile:!0,customStyleThemes:[ce.TextInputCustomStyleThemes.groupInfoName],theme:"small"})))}return o.default.createElement(g.default,{key:"contact-info-modal",theme:"striped"},o.default.createElement(M.default,{title:G.default.t(1845),type:M.DRAWER_HEADER_TYPE.SMALL,onCancel:this.handleClose}),o.default.createElement(_.default,{flatListControllers:[this._pendingParticipantFlatListController,this._participantFlatListController]},o.default.createElement("section",{className:D.default.body},null,o.default.createElement(S.default,{theme:"padding-large"},J,u.support?o.default.createElement(ue.TextHeader,{className:D.default.title,level:"2",theme:"large"},o.default.createElement(q.GroupName,{chat:r,groupMetadata:u})):o.default.createElement(Te,{subject:this.props.contact.name,onSave:this._handleSetSubject,textInputProps:{editable:u.canSetSubject(),editRestrictionInfo:u.restrict?this._showEditRestrictionInfo:void 0}}),ee,o.default.createElement(F.default,{labels:r.labels})),_e,ae,x,Me,null,w,k,c,e)),ne)}}function Te(e){var[t,a]=(0,o.useState)(null),[l,i]=(0,o.useState)(!1),r=(0,o.useRef)(!1),d=function(){var l=(0,n.default)((function*(){if(!t||t===e.subject)return r.current=!1,void a(null);i(!0);try{yield e.onSave(t)}finally{r.current=!1,a(null),i(!1)}}));return function(){return l.apply(this,arguments)}}();return o.default.createElement(ce.default,(0,s.default)({a8n:"group-info-drawer-subject-input",value:null!=t?t:e.subject,pending:l,showRemaining:!0,validate:e=>!(!e||!e.trim()),maxLength:te.default.maxSubject,onBeginEdit:()=>{r.current=!0},onChange:e=>{r.current&&a(e)},onSave:d,onError:()=>{p.default.openModal(o.default.createElement(m.default,{onOK:()=>p.default.closeModal(),okText:G.default.t(1941)},G.default.t(132)))},onCancel:()=>{r.current=!1,a(null)},supportsEmoji:!0,lockable:!0,lowProfile:!0,theme:"large",customStyleThemes:[ce.TextInputCustomStyleThemes.groupInfoName]},e.textInputProps))}Se.CONCERNS={chat:["isReadOnly","mute","id","pendingAction","liveLocation","labels"],groupMetadata:["id","desc","participants","pendingParticipants","creation","restrict","announce","support"],contact:["name","id","profilePicThumb","pendingAction"],profilePicThumb:["imgFull"]},Se.displayName="GroupInfoDrawer";var Pe=(0,L.default)((0,$.default)((0,U.default)((0,ne.default)(Se,Se.CONCERNS))));t.default=Pe},73313:(e,t,a)=>{"use strict";var l=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),n=l(a(33766)),r=l(a(58738)),o=l(a(7970)),d=a(77824),u=a(26226),c=l(a(77188)),f=l(a(80162)),h=l(a(80896)),p=l(a(8238)),m=l(a(26144)),E=l(a(11918)),g=l(a(53680));class v extends s.Component{constructor(...e){super(...e),this.state={contextMenu:null},this.openChat=e=>{(0,d.findChat)(e).then((e=>{n.default.closeModal(),n.default.openChatFromUnread(e)}))},this.contextMenu=e=>!g.default.equals((0,u.getMaybeMeUser)(),e),this.handleParticipantMenu=(e,t)=>{var a=(0,p.default)(this.props.chat.groupMetadata,"this.props.chat.groupMetadata").participants,l=a.assertGet(t.id),i=[];if(a.canPromote(l)){var n=this.props.onParticipantPromote.bind(null,l,!1);i.push(s.default.createElement(o.default,{a8n:"mi-grp-promote-admin",key:"promote",action:n},f.default.t(1100)))}if(a.canRemove(l)){var r=this.props.onParticipantRemove.bind(null,l,!1);i.push(s.default.createElement(o.default,{a8n:"mi-grp-remove-participant",key:"remove",action:r},f.default.t(1105)))}if(c.default.supportsFeature(c.default.F.GROUPS_V_3)&&a.canDemote(l)){var d=this.props.onDemoteAdmin.bind(this,l);i.push(s.default.createElement(o.default,{a8n:"mi-grp-verify-identify",key:"demote-admin",action:d},f.default.t(687)))}g.default.equals((0,u.getMaybeMeUser)(),l.id)||i.push(s.default.createElement(o.default,{key:"message author",action:this.openChat.bind(null,l.contact.id)},f.default.t(1116,{author:l.contact.formattedName}))),e.anchor||e.event||e.persist(),this.setState({contextMenu:{contactId:t.id,menu:i,anchor:e.anchor,event:e.anchor?void 0:e}})},this.closeContextMenu=()=>{this.setState({contextMenu:null})},this.contextEnabled=()=>!1,this.cancel=()=>{n.default.closeModal()},this.isAdmin=e=>(0,p.default)(this.props.chat.groupMetadata,"this.props.chat.groupMetadata").participants.assertGet(e).isAdmin,this.contactFilter=e=>{var t=this.props.chat.groupMetadata;return!(null==t||!t.participants.get(e.id))}}componentDidMount(){var e,t=null===(e=this.props.chat.groupMetadata)||void 0===e?void 0:e.participants;null!=t&&this.props.listeners.add(t,"add remove reset",(()=>{this.forceUpdate()}))}render(){var e;return this.state.contextMenu&&(e=s.default.createElement(m.default,{displayName:"ChatContextMenu",escapable:!0,popable:!0,requestDismiss:this.closeContextMenu},s.default.createElement(E.default,{contextMenu:this.state.contextMenu}))),s.default.createElement(s.default.Fragment,null,s.default.createElement(r.default,{title:f.default.t(1443),filter:this.contactFilter,onCancel:this.cancel,openContextOnClick:!0,contextEnabled:this.contextEnabled,contextMenu:this.contextMenu,onContext:this.handleParticipantMenu,showNotifyName:!0,listenForAdminChange:!0,participantCollection:(0,p.default)(this.props.chat.groupMetadata,"this.props.chat.groupMetadata").participants}),e)}}v.displayName="GroupParticipantSearch";var _=(0,h.default)(v);t.default=_},15516:(e,t,a)=>{"use strict";var l=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(29521)),n=l(a(67294)),r=a(17938),o=i(a(33766)),d=i(a(75444)),u=i(a(64120)),c=i(a(18248)),f=i(a(39490)),h=l(a(55977)),p=i(a(68698)),m=a(26226),E=i(a(77188)),g=i(a(64287)),v=i(a(46889)),_=i(a(83288)),C=i(a(80162)),M=i(a(80896)),S=a(95801),T=l(a(72352)),P=i(a(43232)),b=i(a(72765)),I=a(38245),N=i(a(53680)),y=({isRestricted:e,onClick:t})=>n.default.createElement(c.default,{onClick:t,multiline:!0},n.default.createElement("div",{className:g.default.header},n.default.createElement(I.TextSpan,{theme:"title"},C.default.t(900))),n.default.createElement(I.TextDiv,{theme:"muted"},e?C.default.t(906):C.default.t(899))),k=({isAnnouncement:e,onClick:t})=>n.default.createElement(c.default,{onClick:t,multiline:!0},n.default.createElement("div",{className:g.default.header},n.default.createElement(I.TextSpan,{theme:"title"},C.default.t(907))),n.default.createElement(I.TextDiv,{theme:"muted"},e?C.default.t(906):C.default.t(899))),A=({isNoFrequentlyForwarded:e,onClick:t})=>{var a=P.default.hfmStringChanges?C.default.t(904):C.default.t(903);return n.default.createElement(c.default,{onClick:t,multiline:!0},n.default.createElement("div",{className:g.default.header},n.default.createElement(I.TextSpan,{theme:"title"},a)),n.default.createElement(I.TextDiv,{theme:"muted"},e?C.default.t(905):C.default.t(902)))};class O extends n.Component{constructor(...e){super(...e),this._openSettingModal=e=>{var{chat:t,groupMetadata:a}=this.props;o.default.openModal(n.default.createElement(v.default,{settingType:e,chat:t,groupMetadata:a}),{transition:"modal",uim:this.props.uim})},this._openAnnouncementSettingModal=()=>{this._openSettingModal(d.default.GROUP_SETTING_TYPE.ANNOUNCEMENT)},this._openRestrictedSettingModal=()=>{this._openSettingModal(d.default.GROUP_SETTING_TYPE.RESTRICT)},this._openNoFrequentlyForwardedSettingModal=()=>{this._openSettingModal(d.default.GROUP_SETTING_TYPE.NO_FREQUENTLY_FORWARDED)},this._getCurrentAdmins=()=>{var{groupMetadata:e}=this.props;return e.participants.filter((e=>e.isAdmin)).map((e=>e.contact))},this._filterParticipants=e=>{var{groupMetadata:t}=this.props;return!!t.participants.get(e.id)},this.isDisabled=e=>{var{groupMetadata:t}=this.props;return N.default.equals(e,t.owner)||(0,m.getMaybeMeUser)().equals(e)},this._openManageAdminModal=()=>{o.default.openModal(n.default.createElement(T.default,{onConfirm:this._updateAdmins,getInitialItems:this._getCurrentAdmins,isDisabled:this.isDisabled,isSelected:this.isDisabled,filter:this._filterParticipants,title:C.default.t(1060),useShortName:!0,useAllContacts:!0,listType:T.ListType.PARTICIPANT_MANAGE_MODAL,singleSelectionFooterType:r.FooterType.CONFIRM,multipleSelectionFooterType:r.FooterType.CONFIRM}))},this._updateAdmins=e=>{var{chat:t,groupMetadata:a}=this.props,l=a.participants,i=l.filter((e=>e.isAdmin)),n=(0,s.default)(e,i,((e,t)=>e.id.equals(t.id))).map((e=>l.assertGet(e.id))),r=(0,s.default)(i,e,((e,t)=>e.id.equals(t.id)));n.length>0&&(n.forEach((e=>{e.contact.pendingAction++})),(0,S.promoteParticipants)(t,n).finally((()=>{n.forEach((e=>{e.contact.pendingAction--}))}))),r.length>0&&(r.forEach((e=>{e.contact.pendingAction++})),(0,S.demoteParticipants)(t,r).finally((()=>{r.forEach((e=>{e.contact.pendingAction--}))}))),o.default.closeModal()}}render(){var{groupMetadata:e}=this.props;return n.default.createElement(u.default,{theme:"striped"},n.default.createElement(h.default,{title:C.default.t(908),type:h.DRAWER_HEADER_TYPE.SMALL,onBack:this.props.onClose}),n.default.createElement(f.default,null,n.default.createElement(p.default,{animation:!1},n.default.createElement(y,{onClick:this._openRestrictedSettingModal,isRestricted:e.restrict})),E.default.isEphemeralAllowGroupMembersEnabled()?n.default.createElement("div",{className:g.default.restrictText},n.default.createElement(I.TextSpan,{theme:"muted"},C.default.t(708))):null,n.default.createElement(p.default,{animation:!1},n.default.createElement(k,{onClick:this._openAnnouncementSettingModal,isAnnouncement:e.announce}),P.default.frequentlyForwardedGroupSetting&&E.default.supportsFeature(E.default.F.FREQUENTLY_FORWARDED_SETTING)?n.default.createElement(A,{onClick:this._openNoFrequentlyForwardedSettingModal,isNoFrequentlyForwarded:e.noFrequentlyForwarded}):null),n.default.createElement(p.default,{animation:!1},n.default.createElement(c.default,{onClick:this._openManageAdminModal,multiline:!0},n.default.createElement("div",{className:g.default.header},n.default.createElement(I.TextSpan,{theme:"title"},C.default.t(1060)))))))}}O.CONCERNS={chat:["id"],groupMetadata:["restrict","announce","noFrequentlyForwarded","participants","owner"]},O.displayName="GroupAdminSetting";var w=(0,_.default)((0,M.default)((0,b.default)(O,O.CONCERNS)));t.default=w},46889:(e,t,a)=>{"use strict";var l=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{settingType:t}=e,a=(0,f.default)(e.chat,["id"]),l=(0,f.default)(e.groupMetadata,["restrict","announce","noFrequentlyForwarded"]),i=(0,s.useMemo)((()=>{switch(t){case n.default.GROUP_SETTING_TYPE.ANNOUNCEMENT:case n.default.GROUP_SETTING_TYPE.RESTRICT:return[{label:o.default.t(899),value:0},{label:o.default.t(906),value:1}];case n.default.GROUP_SETTING_TYPE.NO_FREQUENTLY_FORWARDED:return[{label:o.default.t(902),value:0},{label:o.default.t(905),value:1}];default:return[]}}),[t]),h=(0,s.useMemo)((()=>{var{restrict:e,announce:a,noFrequentlyForwarded:i}=l;switch(t){case n.default.GROUP_SETTING_TYPE.ANNOUNCEMENT:return a?1:0;case n.default.GROUP_SETTING_TYPE.RESTRICT:return e?1:0;case n.default.GROUP_SETTING_TYPE.NO_FREQUENTLY_FORWARDED:return i?1:0;default:return 0}}),[t,l]),p=(0,s.useMemo)((()=>{switch(t){case n.default.GROUP_SETTING_TYPE.ANNOUNCEMENT:return o.default.t(907);case n.default.GROUP_SETTING_TYPE.RESTRICT:return o.default.t(900);case n.default.GROUP_SETTING_TYPE.NO_FREQUENTLY_FORWARDED:return d.default.hfmStringChanges?o.default.t(904):o.default.t(903);default:return""}}),[t]),m=(0,s.useMemo)((()=>t===n.default.GROUP_SETTING_TYPE.RESTRICT&&r.default.isEphemeralAllowGroupMembersEnabled()?o.default.t(708):null),[t]);return s.default.createElement(c.default,{options:i,initialValue:h,title:p,onSelect:e=>{e!==h&&(0,u.setGroupProperty)(a,t,e).catch((()=>()=>{}))},explanation:m})};var s=i(a(67294)),n=l(a(75444)),r=l(a(77188)),o=l(a(80162)),d=l(a(43232)),u=a(32282),c=l(a(12970)),f=l(a(95607))},17749:(e,t,a)=>{"use strict";var l=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),n=l(a(68698)),r=l(a(80162)),o=l(a(80896)),d=l(a(95617)),u=a(6463),c=l(a(91303)),f=l(a(72765)),h=a(6578),p=l(a(32885)),m=a(38245);class E extends s.Component{constructor(e){super(e),this._updateParticipants=()=>{this.setState({participants:this.getParticipants(this.props.chat)})},this.state={participants:this.getParticipants(e.chat)}}componentDidMount(){var{chat:e}=this.props;e.liveLocationQueried||d.default.getActive(e.id.toString()).then((()=>{e.liveLocationQueried=!0})).catch((()=>{})),this.props.listeners.add((0,h.unproxy)(e),"change:liveLocation",(()=>{var{liveLocation:t}=e;t&&(this._removeParticipantListener(t),this._addParticipantListener(t),this._updateParticipants())}));var{liveLocation:t}=e;t&&this._addParticipantListener(t)}_addParticipantListener(e){this.props.listeners.add(e.participants,"add remove",this._updateParticipants)}_removeParticipantListener(e){this.props.listeners.remove(e.participants,"add remove",this._updateParticipants)}getParticipants(e){var{liveLocation:t}=e;return t?t.participants.toArray():[]}getText(){var e,t,{chat:a}=this.props,{participants:l}=this.state,i=0;if(l.forEach((a=>{a.isMe?e=!0:(t||(t=a.contact),i++)})),a.isGroup)return e?1===l.length?r.default.t(1032):r.default.t(1031,{count:i,_plural:i}):r.default.t(1028,{count:i,_plural:i});if(e){if(1===l.length)return r.default.t(1032);if(t)return r.default.t(1030,{name:t.formattedShortNameWithNonBreakingSpaces})}else if(t)return r.default.t(1027,{name:t.formattedShortNameWithNonBreakingSpaces});return""}render(){var{onClick:e}=this.props;if(!this.state.participants.length)return null;var t=s.default.createElement(p.default,{name:(0,u.liveLocationIcon)(!0)});return s.default.createElement(n.default,{a8nText:"section-live-location",theme:"padding",title:r.default.t(1035),titleOnClick:e},s.default.createElement(c.default,{side:t,onClick:e},s.default.createElement(m.TextSpan,{theme:"title"},this.getText())))}}E.CONCERNS={chat:["id","isGroup","liveLocation","liveLocationQueried"]},E.displayName="LiveLocationRow";var g=(0,o.default)((0,f.default)(E,E.CONCERNS));t.default=g},7827:(e,t,a)=>{"use strict";var l=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.TABS=void 0;var s=i(a(52628)),n=i(a(94184)),r=l(a(67294)),o=a(84481),d=i(a(55689)),u=i(a(64120)),c=i(a(39490)),f=l(a(55977)),h=i(a(80162)),p=i(a(28271)),m=i(a(79411)),E=i(a(65636)),g=i(a(67030)),v=i(a(63611)),_=i(a(61976)),C=i(a(43232)),M=i(a(26144)),S=i(a(4328)),T={MEDIA:"media",DOCS:"docs",LINKS:"links",PRODUCTS:"products"};t.TABS=T;class P extends r.Component{constructor(){super(...arguments),this.state={selected:this.props.initialTab,direction:null,selectable:!1},this.handleSelectMessages=()=>{this.state.selectable||this.setState({selectable:!0})},this.handleCancelSelection=()=>{this.state.selectable&&(this.selectedMessages.unsetAll(),this.setState({selectable:!1}))},this.handleMessageSelect=(e,t)=>{this.handleSelectMessages(),this.selectedMessages.setVal(e,t),0===this.selectedMessages.getSelected().length&&this.handleCancelSelection()},this.selectedMessages=new v.default([],(e=>e.id.toString()))}_handleSelectTab(e){var t=(0,s.default)(T).indexOf(this.state.selected),a=(0,s.default)(T).indexOf(e);t!==a&&this.selectedMessages.unsetAll();var l=a>t?"right":"left";this.setState({selected:e,direction:l,selectable:!1})}_getTabs(){var e=[{tab:T.MEDIA,title:h.default.t(1066)},{tab:T.DOCS,title:h.default.t(688)},{tab:T.LINKS,title:h.default.t(1006)}];C.default.productMediaAttachments&&e.push({tab:T.PRODUCTS,title:h.default.t(1372)});var t=e.map((e=>{var t=(0,n.default)(E.default.menuItem,{[E.default.active]:this.state.selected===e.tab});return r.default.createElement("button",{className:t,onClick:this._handleSelectTab.bind(this,e.tab),key:e.tab,title:e.title},e.title)})),a=(0,n.default)(E.default.menuTabsLists,C.default.productMediaAttachments?E.default.fourTabs:E.default.threeTabs);return r.default.createElement("div",{className:a,"data-active-tab":this.state.selected},t)}_getContent(){var e,t=this.props.chat;switch(this.state.selected){case T.MEDIA:e=r.default.createElement(m.default,{chat:t,mediaMsgs:t.getMediaMsgs(),selectable:this.state.selectable,onMessageSelect:this.handleMessageSelect,selectedMessages:this.selectedMessages,fullCollection:!0});break;case T.LINKS:e=r.default.createElement(p.default,{chat:t,linkMsgs:t.getLinkMsgs(),selectable:this.state.selectable,onMessageSelect:this.handleMessageSelect,selectedMessages:this.selectedMessages});break;case T.DOCS:e=r.default.createElement(d.default,{chat:t,docMsgs:t.getDocMsgs(),selectable:this.state.selectable,onMessageSelect:this.handleMessageSelect,selectedMessages:this.selectedMessages});break;case T.PRODUCTS:e=r.default.createElement(_.default,{chat:t,productMsgs:t.getProductMsgs(),selectable:this.state.selectable,onMessageSelect:this.handleMessageSelect,selectedMessages:this.selectedMessages,onProductDetail:this.props.onProductDetail,setScrollOffset:this.props.setProductsScrollOffset,scrollOffset:this.props.productsScrollOffset})}return e}render(){var e=this.props.chat,t=this._getTabs(),a=this._getContent(),l=[T.MEDIA,T.DOCS].includes(this.state.selected),i=this.state.selectable?r.default.createElement(M.default,{displayName:"MediaMultiSelect",escapable:!0,requestDismiss:this.handleCancelSelection},r.default.createElement(g.default,{chat:e,noSortOnForward:!0,theme:"mediaGallery",toastPosition:o.ToastPosition.RIGHT,downloadButton:l,selectedMessages:this.selectedMessages,onCancel:this.handleCancelSelection})):null,s="right"===this.state.direction?"slide-forward":"slide-back";return r.default.createElement(u.default,{theme:"gallery"},r.default.createElement(f.default,{title:" ",onBack:this.props.onBack,type:f.DRAWER_HEADER_TYPE.MULTI_MEDIA_GALLERY}),i,t,r.default.createElement(c.default,{"data-list-scroll-container":!0},r.default.createElement(S.default,{transitionName:s,className:E.default.column},r.default.createElement("div",{className:E.default.multimediaGallery,key:this.state.selected},r.default.createElement("div",{className:E.default.column},a)))))}}t.default=P,P.defaultProps={initialTab:T.MEDIA,productsScrollOffset:0},P.displayName="MediaGalleryDrawer"},75413:(e,t,a)=>{"use strict";var l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,u.default)(e.mediaData,["mediaStage","renderableUrl"]);return s.default.createElement(d.default,{mediaData:t,placeholderRenderer:h},(e=>s.default.createElement(f,{url:e})))};var i=l(a(94184)),s=l(a(67294)),n=l(a(12001)),r=l(a(80162)),o=l(a(79741)),d=l(a(89958)),u=l(a(95607)),c=e=>{e.stopPropagation()};function f({url:e}){return s.default.createElement(n.default,{url:e,className:o.default.mediaViewerAudio,onClick:c,autoPlay:!0,controls:!0},r.default.t(254))}function h(){return s.default.createElement("div",{className:(0,i.default)(o.default.imageAudio,o.default.mediaViewerPlaceholder),onClick:c})}},61258:(e,t,a)=>{"use strict";var l=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),n=l(a(74724)),r=l(a(44386)),o=l(a(33766)),d=l(a(17367)),u=i(a(44373)),c=l(a(7970)),f=l(a(20923)),h=l(a(80162)),p=l(a(80896)),m=l(a(77375)),E=a(85063),g=a(97713),v=l(a(76806)),_=a(26658),C=a(80338),M=l(a(72765)),S=a(6578),T=l(a(32885)),P=l(a(97026));class b extends s.PureComponent{constructor(...e){super(...e),this._refCloseBtn=(0,s.createRef)(),this._getMenuBtns=()=>this.props.msg.isViewOnce?this._getViewOnceMediaMenuBtns():this.props.msgIndexInAlbum>=0?this._getAlbumMediaMenuBtns():this._getNonAlbumMediaMenuBtns(),this._getViewOnceMediaMenuBtns=()=>[s.default.createElement(g.MenuBarItem,{key:"btnViewOnceInfo",icon:s.default.createElement(T.default,{name:"view-once",className:m.default.voIcon}),title:h.default.t(40),onClick:this.props.onViewOnceInfoClick}),this._getDropdownMenuBarItem()],this._getNonAlbumMediaMenuBtns=()=>{var{msg:e}=this.props;return[s.default.createElement(g.MenuBarItem,{key:"btnGoToMsg",icon:s.default.createElement(T.default,{name:"bubble"}),title:h.default.t(853),onClick:this.props.onGoToMsgClick}),e.canStar()?this._getStarMenuBarItem():null,e.canForward()?this._getForwardMenuBarItem():null,s.default.createElement(g.MenuBarItem,{key:"btnDownload",icon:s.default.createElement(T.default,{name:"download"}),title:h.default.t(1764),disabled:!this._isMediaDownloadable(),onClick:this.props.onDownloadClick})].filter(Boolean)},this._getAlbumMediaMenuBtns=()=>{var{msg:e}=this.props;return[e.canReply()?s.default.createElement(g.MenuBarItem,{key:"btnReply",icon:s.default.createElement(T.default,{name:"reply"}),title:h.default.t(1387),onClick:this.props.onReplyClick}):null,e.canStar()?this._getStarMenuBarItem():null,s.default.createElement(g.MenuBarItem,{key:"btnDelete",icon:s.default.createElement(T.default,{name:"delete"}),title:h.default.t(1808),onClick:this.props.onDeleteClick}),e.canForward()?this._getForwardMenuBarItem():null,this._getDropdownMenuBarItem()].filter(Boolean)},this._getStarMenuBarItem=()=>{var e,t,a,{msg:l}=this.props;return l.star?(e=this.props.onUnstarClick,t="unstar-btn",a=h.default.t(1586)):(e=this.props.onStarClick,t="star-btn",a=h.default.t(1504)),s.default.createElement(g.MenuBarItem,{key:t,icon:s.default.createElement(T.default,{name:t}),title:a,onClick:e})},this._getForwardMenuBarItem=()=>s.default.createElement(g.MenuBarItem,{key:"btnForward",icon:s.default.createElement(T.default,{name:"forward"}),title:h.default.t(813),onClick:this.props.openForwardFlow}),this.handlePrivateReplyMessage=()=>{var e=(0,S.unproxy)(this.props.msg);(0,v.default)(e)},this._getDropdownMenuBarItem=()=>{var{msg:e}=this.props,t=[];return(e.canPrivateReply()||e.canPrivateReplyInRestrictedGrp())&&t.push(s.default.createElement(c.default,{key:"private_reply",a8n:"mi-msg-reply",action:this.handlePrivateReplyMessage},h.default.t(1334))),e.isViewOnce?t.push(s.default.createElement(c.default,{key:"dropdownMsgInfo",action:this._handleDropdownViewOnceReportSpam},this._getViewOnceReportTitle())):(e.isSentByMe&&t.push(s.default.createElement(c.default,{key:"dropdownMsgInfo",action:this.props.onMsgInfoClick},h.default.t(1120))),t.push(s.default.createElement(c.default,{key:"dropdownGoToMsg",action:this.props.onGoToMsgClick},h.default.t(853)),s.default.createElement(c.default,{key:"dropdownDownload",action:this.props.onDownloadClick,disabled:!this._isMediaDownloadable()},h.default.t(1764)))),s.default.createElement(g.MenuBarItem,{key:"btnMenu",icon:s.default.createElement(T.default,{name:"menu"}),title:h.default.t(1112)},s.default.createElement(u.default,{type:"dropdown_menu",key:"MediaPanelHeaderDropdown",flipOnRTL:!0,dirX:u.DirX.LEFT},t))},this._isMediaDownloadable=()=>{var{mediaData:e,msg:t}=this.props;return!t.isViewOnce&&(!!e.renderableUrl||e.mediaStage===E.MEDIA_DATA_STAGE.RESOLVED)},this._handleDropdownViewOnceReportSpam=()=>{o.default.openModal(s.default.createElement(P.default,{isBusiness:this.props.msg.senderObj.isBusiness,isGroup:this.props.msg.chat.isGroup,onReport:this._handleReport,onCancel:()=>o.default.closeModal(),title:this._getViewOnceReportTitle()}))},this._handleReport=e=>{var{chat:t}=this.props.msg;t&&(e?t.isGroup?(0,_.sendSpamExitClear)(t,C.SpamFlow.MediaViewer):(0,_.sendSpamBlockClear)(t,C.SpamFlow.MediaViewer):(0,_.sendSpamReport)(t,C.SpamFlow.MediaViewer)),o.default.closeModal()}}_getViewOnceReportTitle(){var{msg:e}=this.props;return e.chat.isGroup?h.default.t(1397):h.default.t(1396,{contactInfo:e.senderObj.displayName})}componentDidMount(){null!=this._refCloseBtn.current&&this.props.listeners.add(this._refCloseBtn.current,"animationend",(()=>{this.props.onHightlightCloseEnd()}))}render(){var e=this.props.msg,t=e.displayName(!0,!0);return e.isGroupMsg&&(t+=" @ "+e.chat.title()),s.default.createElement("div",{className:m.default.mediaPanelHeader},s.default.createElement("div",{className:m.default.info},s.default.createElement(n.default,{idle:!0,image:s.default.createElement(d.default,{id:e.sender,size:40}),primary:s.default.createElement(f.default,{ellipsify:!0,text:t}),secondary:r.default.relativeDateAndTimeStr(e.t),theme:"media"})),s.default.createElement("div",{className:m.default.mediaPanelTools},s.default.createElement(g.MenuBar,{key:"media-panel-header",theme:"strong"},this._getMenuBtns(),s.default.createElement(g.MenuBarItem,{a8nText:"btn-close",icon:s.default.createElement(T.default,{className:this.props.isHighlightClose?m.default.highlightClose:null,containerRef:this._refCloseBtn,name:"x-viewer"}),title:h.default.t(1779),onClick:this.props.onClose}))))}}b.CONCERNS={msg:["star","isGroupMsg","chat","type","isGif","isViewOnce","sender","senderObj","t","isSentByMe"],mediaData:["filehash","mediaStage","renderableUrl"]},b.displayName="MediaPanelHeader";var I=(0,p.default)((0,M.default)(b,b.CONCERNS));t.default=I},76798:(e,t,a)=>{"use strict";var l=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(74230),n=i(a(67294)),r=l(a(52087)),o=l(a(65167)),d=a(27387),u=a(49097),c=l(a(80162)),f=l(a(89805)),h=a(85063),p=l(a(72462)),m=l(a(68081)),E=l(a(51124)),g=l(a(72765)),v=l(a(63293));class _ extends n.PureComponent{constructor(...e){super(...e),this.state={played:!1,size:{width:0,height:0},isFullscreenMode:!1},this._setRefContainer=e=>{this.refContainer=e},this.stopPropagation=e=>{e.stopPropagation()},this._handleFullscreenToggle=e=>{this.setState({isFullscreenMode:e})}}static getDerivedStateFromProps(e){var{mediaData:t}=e;return(t.mediaStage===h.MEDIA_DATA_STAGE.RESOLVED||t.streamable&&t.isStreamable())&&(0,s.isNonZeroNumber)(t.fullWidth)&&(0,s.isNonZeroNumber)(t.fullHeight)?{size:_.getSize(t)}:null}static getSize(e){if(e.isGif){return e.fullWidth>=330?{width:e.fullWidth,height:e.fullHeight}:{width:330,height:330*e.fullHeight/e.fullWidth}}return e.fullWidth>=u.MIN_WIDTH?{width:e.fullWidth,height:e.fullHeight}:{width:u.MIN_WIDTH,height:e.fullHeight}}componentDidMount(){this.props.mediaData.isStreamable()||this.props.msg.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:p.default.WEBC_RMR_REASON_CODE.MEDIA_VIEWER,isUserInitiated:!0})}componentWillUnmount(){this.props.msg.mediaObject&&this.props.msg.cancelDownload()}render(){var e,{msg:t,mediaData:a}=this.props,l=a.isGif,i=a.mediaStage===h.MEDIA_DATA_STAGE.RESOLVED||a.streamable&&a.isStreamable();if(i=i||t.isForcingRMR()){var s,u,p=c.default.t(1633);return!this.state.isFullscreenMode&&t&&t.interactiveAnnotations&&t.interactiveAnnotations.length>0&&(s=n.default.createElement(r.default,{annotations:t.interactiveAnnotations})),u=l?n.default.createElement("div",{className:f.default.mediaViewerImg,ref:this._setRefContainer},n.default.createElement(v.default,{src:a.renderableUrl,onClick:this.stopPropagation,autoPlay:!0,loop:!0},p),s):n.default.createElement("div",{ref:this._setRefContainer,className:f.default.mediaViewerImg,onClick:this.stopPropagation},n.default.createElement(m.default,{msg:t,mediaData:a,startTime:this.props.startTime,onClose:this.props.onClose,onError:()=>{},onFullscreenToggle:this._handleFullscreenToggle,autoPlay:this.props.autoPlay,type:d.PLAYER_TYPE.MEDIA_VIEWER,overlays:s,noPip:t.isViewOnce})),n.default.createElement(E.default,{type:"scaleDown",position:"relative",objectPosition:"relative",size:this.state.size,onObjectLoad:this.props.onLoad},u)}return n.default.createElement(E.default,{type:"scaleDown",position:"relative",objectPosition:"relative",size:{width:this.props.mediaData.fullWidth,height:this.props.mediaData.fullHeight}},n.default.createElement(o.default,{altText:null!==(e=t.caption)&&void 0!==e?e:"",mediaData:a}))}}_.CONCERNS={mediaData:["mediaStage","fullWidth","fullHeight","isGif","isViewOnce","preview","renderableUrl","streamable"]},_.defaultProps={startTime:0},_.displayName="MediaVideo";var C=(0,g.default)(_,_.CONCERNS);t.default=class extends C{getContainerElement(){return this.getComponent().refContainer}}},80989:(e,t,a)=>{"use strict";var l=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(23493));a(93332);var n=i(a(94184)),r=a(9019),o=l(a(67294)),d=(i(a(56720)),l(a(82388))),u=i(a(33766)),c=i(a(3310)),f=i(a(51115)),h=i(a(75444)),p=i(a(38906)),m=i(a(20923)),E=i(a(61900)),g=i(a(62886)),v=i(a(74344)),_=a(26226),C=i(a(84891)),M=i(a(35001)),S=a(99375),T=i(a(80162)),P=a(88770),b=i(a(75413)),I=i(a(76022)),N=i(a(83957)),y=i(a(61258)),k=i(a(81154)),A=a(85063),O=i(a(76798)),w=i(a(80674)),R=i(a(78563)),D=a(93227),x=i(a(72765)),L=a(6578),B=a(38245),F=a(56670),G=i(a(26144)),V=i(a(32759)),U=i(a(59979)),H={captionReadMoreBtn:{position:"lk2g6yzq",end:"gpspv2f0",bottom:"dfax1a2z",paddingTop:"koxu3irx",paddingEnd:"tglscgxe",paddingBottom:"lb5xnmae",paddingStart:"dcs7ayf4",backgroundColor:"kbo5o4co",borderTopStartRadius:"qgzehwb2",borderTopEndRadius:"vj6koa9z",borderBottomEndRadius:"kzj981u0",borderBottomStartRadius:"i21uzik7",boxShadow:"b8oa6se9"},captionReadMoreBtnExpanded:{visibility:"mbh03o8f"},captionReadMoreBtnZoomed:{visibility:"fas74zes",opacity:"gzmwbfoy"}};function W(e){null==e||e.stopPropagation()}function j(e){var t=e.chat;t.composeQuotedMsg=e,u.default.focusChatTextInput(t)}class Y extends o.PureComponent{constructor(e){super(e),this._setRefMediaImage=e=>{this._refMediaImage=e},this._setRefMediaVideo=e=>{this._refMediaVideo=e},this._setRefHotKeys=e=>{this._refHotKeys=e},this._handleViewOnceInfoClick=()=>{this._showViewOnceNux()},this._showViewOnceNux=()=>{var{mediaData:e}=this.props,t=o.default.createElement(R.default,{isPhoto:e.type===I.default.TYPE.IMAGE,onOkClick:()=>{u.default.closeModal()}});u.default.openModal(t)},this._handleImageLoad=e=>{this.props.onImageLoad&&this.props.onImageLoad();var t=this.state.zoomElement;t&&e&&this.props.isAnimatingIn&&e instanceof HTMLElement&&(this._zoomed||(this._zoomed=!0,this.animateZoom(t,e)))},this.animateZoom=(e,t)=>{var a,l=t.getBoundingClientRect(),i=e.getBoundingClientRect(),s=i.top-l.top,n=i.left-l.left,r=e.clientWidth/t.clientWidth;s-=(t.clientHeight-e.clientHeight)/2,n-=(t.clientWidth-e.clientWidth)/2,(0,U.default)(t,{opacity:[1,0],translateX:[0,n],translateY:[0,s],scale:[1,r]},{duration:h.default.MEDIA_VIEWER.ANIMATION_DURATION,easing:[.1,.82,.25,1]});var o=null===(a=this._refCaption)||void 0===a?void 0:a.getContainerElement();o&&(0,U.default)(o,{opacity:[1,0]},{duration:h.default.MEDIA_VIEWER.ANIMATION_DURATION})},this.openForwardFlow=e=>{e.stopPropagation();var{msg:t}=this.props;t.isUnsentMedia?u.default.openModal(o.default.createElement(f.default,{title:T.default.t(797),onOK:()=>u.default.closeModal(),okText:T.default.t(1941)},T.default.t(794))):u.default.openModal(o.default.createElement(v.default,{msgs:[(0,L.unproxy)(t)]}),{transition:"modal-flow"})},this._handleReplyClick=()=>{this._handleClose(),(0,r.delayMs)(h.default.MEDIA_VIEWER.CLOSE_ANIMATION_DURATION).then(j.bind(null,(0,L.unproxy)(this.props.msg)))},this._handleDeleteClick=()=>{var{msg:e}=this.props;u.default.openModal(o.default.createElement(p.default,{chat:e.chat,msgList:[(0,L.unproxy)(e)],deletePrompt:!0,revokePrompt:e.canRevoke()}))},this._handleMsgInfoClick=()=>{this._handleClose(),(0,r.delayMs)(h.default.MEDIA_VIEWER.CLOSE_ANIMATION_DURATION+250).then(u.default.msgInfoDrawer.bind(u.default,(0,L.unproxy)(this.props.msg)))},this._handleImgZoomIn=e=>{var t=this._refMediaImage;e&&t&&(this._listenToMouseMove=t.heightOverflow>0||t.widthOverflow>0),this.setState({imgZoomed:e}),this.props.onImgZoomIn(e)},this._handleZoomOut=e=>{this._updateZoomPosition.cancel();var t=this._refMediaImage;t&&this.state.imgZoomed&&t.onImageClick(e)},this._handleMouseMove=e=>{this._updateZoomPosition(e.pageX,e.pageY)},this._updateZoomPosition=(0,s.default)(((e,t)=>{if(!this.state.annotationTooltipDisplayed){var a=this._refMediaImage;if(a){var l=a.getInsideContainer();if(l&&l instanceof HTMLElement){var i=a.getOutsideContainer();if(i&&i instanceof HTMLElement){var{translateX:s,translateY:n}=a.getTranslatePosition(i,e,t);(0,U.default)(l,"stop"),(0,U.default)(l,{translateX:s,translateY:n,scale:h.default.MEDIA_VIEWER.ZOOM_IN_FACTOR},{duration:0})}}}}})),this._handleKeyboardZoom=e=>{if(!this.props.isAnimatingIn){this._updateZoomPosition.cancel();var t=this._refMediaImage;null!=t&&t.onImageKeyboardZoom(e)}},this._handleDownloadClick=e=>{e.stopPropagation(),E.default.initDownload((0,L.unproxy)(this.props.msg))},this._handleStarClick=e=>{e.stopPropagation();var{msg:t}=this.props;u.default.sendStarMsgs(t.chat,[(0,L.unproxy)(t)])},this._handleUnstarClick=e=>{e.stopPropagation();var{msg:t}=this.props;u.default.sendUnstarMsgs(t.chat,[(0,L.unproxy)(t)])},this._handleGoToMsgClick=e=>{e.stopPropagation(),this._handleClose(),u.default.existsDrawerRight((e=>{e&&2===c.default.column&&u.default.closeDrawerRight()}));var{msg:t}=this.props,a=t.chat.getSearchContext((0,L.unproxy)(t));u.default.openChatAt(t.chat,a).then((e=>{e&&u.default.focusChatTextInput(t.chat)}))},this._handleClose=()=>{if(!this._closing){this._closing=!0,(0,F.isFunction)(this.props.onExitAnimation)&&this.props.onExitAnimation();var e,t=this.props.getZoomNode&&this.props.getZoomNode(this.props.msg.id);if(!t)return this.props.onBack();if(this.props.mediaData.type===I.default.TYPE.IMAGE&&this._refMediaImage?e=this._refMediaImage.getInsideContainer():this.props.mediaData.isGif&&this._refMediaVideo&&(e=this._refMediaVideo.getContainerElement()),!e)return this.props.onBack();var a,l=e,i=e.getBoundingClientRect(),s=t.getBoundingClientRect(),n=s.top-i.top,r=s.left-i.left,o=t.clientWidth/l.clientWidth;n-=(l.clientHeight-t.clientHeight)/2,r-=(l.clientWidth-t.clientWidth)/2,(0,U.default)(e,{translateX:[r,0],translateY:[n,0],scale:[o,1]},{duration:h.default.MEDIA_VIEWER.CLOSE_ANIMATION_DURATION,easing:[.1,.82,.25,1]}).then((()=>{this.props.onBack()}));var d=null===(a=this._refCaption)||void 0===a?void 0:a.getContainerElement();d&&(0,U.default)(d,{opacity:[0,1]},{duration:h.default.MEDIA_VIEWER.CLOSE_ANIMATION_DURATION,easing:[.1,.82,.25,1]})}},this._handleClickToCloseBlocked=()=>{this.setState({isHighlightClose:!0})},this._handleHighlightCloseEnd=()=>{this.setState({isHighlightClose:!1})},this._handleAnnotationTooltipDisplay=()=>this.setState({annotationTooltipDisplayed:!0}),this._handleAnnotationTooltipDismiss=()=>this.setState({annotationTooltipDisplayed:!1}),this._handleCaptionClick=e=>{e.stopPropagation(),this.setState((e=>({isCaptionExpanded:!e.isCaptionExpanded})))},this._zoomed=!1,this._closing=!1,this._listenToMouseMove=!1,this._shouldShowViewOnceNux=e.msg.isViewOnce&&(0,_.shouldShowNUX)(h.default.NUX.EPHEMERAL_VIEW_ONCE_RECEIVER);var t=e.mediaData.mediaStage===A.MEDIA_DATA_STAGE.RESOLVED&&e.isAnimatingIn&&e.getZoomNode?e.getZoomNode(e.msg.id):null;this.state={zoomElement:t,imgZoomed:!1,annotationTooltipDisplayed:!1,isCaptionVisible:!e.isAnimatingIn,isCaptionExpanded:!1,isHighlightClose:!1}}componentDidMount(){var{msg:e}=this.props;e.isViewOnce&&(0,P.canMarkPlayed)(e)&&(0,P.markPlayed)(e),this._shouldShowViewOnceNux&&this._showViewOnceNux(),g.default.focus(this._refHotKeys)}getSnapshotBeforeUpdate(){var e,t=null===(e=this._refCaption)||void 0===e?void 0:e.getContainerElement();return null!=t&&null==this._captionExpandable&&(this._captionExpandable=t.scrollHeight>t.clientHeight),null}componentDidUpdate(e){var{isCaptionVisible:t}=this.state,{isAnimatingIn:a}=this.props;a||t||!e.isAnimatingIn||this.setState({isCaptionVisible:!0})}componentWillUnmount(){this._updateZoomPosition.cancel()}render(){var e,t,a,l,i,s,{msg:r,mediaData:u}=this.props;switch(u.type){case I.default.TYPE.IMAGE:i=o.default.createElement(N.default,{key:r.id.toString(),msg:r,mediaData:u,onLoad:this._handleImageLoad,onImgZoomIn:this._handleImgZoomIn,onAnnotationTooltipDisplay:this._handleAnnotationTooltipDisplay,onAnnotationTooltipDismiss:this._handleAnnotationTooltipDismiss,preventDownload:r.isViewOnce,ref:this._setRefMediaImage});break;case I.default.TYPE.VIDEO:i=o.default.createElement(O.default,{key:r.id.toString(),autoPlay:!this._shouldShowViewOnceNux,msg:r,mediaData:u,onLoad:u.isGif?this._handleImageLoad:null,startTime:this.props.startTime,onClose:this._handleClose,ref:this._setRefMediaVideo});break;case I.default.TYPE.AUDIO:i=o.default.createElement(b.default,{mediaData:u,key:r.id.toString()});break;default:__LOG__(4,void 0,new Error,!0)`type: ${u.type}`,SEND_LOGS("MediaViewerModal: unexpected media type")}var c=this.props.msgIndexInAlbum>=0&&this.props.albumSize>=0;if(r.caption||c){var f;if(c){var h={number:this.props.msgIndexInAlbum+1,totalNumber:this.props.albumSize};f=T.default.t(1274,h)}var p=S.Configuration.Conversation({mentions:r.mentionMap(),links:r.getLinks(),trusted:!0}),E=!this.state.isCaptionVisible&&(u.isGif||u.type===I.default.TYPE.IMAGE);s=o.default.createElement(o.default.Fragment,null,o.default.createElement("p",{className:(0,n.default)(w.default.captionWrapper,this._captionExpandable&&w.default.captionWrapperExpandable),onClick:this._captionExpandable?this._handleCaptionClick:void 0,title:this._captionExpandable?T.default.t(1380):void 0,"aria-hidden":this.state.isCaptionExpanded||void 0},o.default.createElement(m.default,{className:(0,n.default)(w.default.mediaCaption,{[w.default.captionHidden]:E,[w.default.expanded]:this.state.isCaptionExpanded}),formatters:p,ref:e=>{this._refCaption=e},text:r.caption||f}),this._captionExpandable&&o.default.createElement(V.default,{xstyle:[H.captionReadMoreBtn,this.state.isCaptionExpanded&&H.captionReadMoreBtnExpanded,this.state.imgZoomed&&H.captionReadMoreBtnZoomed],onClick:this._handleCaptionClick},o.default.createElement(B.TextSpan,null,T.default.t(1380)))),this.state.isCaptionExpanded&&o.default.createElement("p",{className:(0,n.default)(w.default.captionWrapper,w.default.captionWrapperExpandable,w.default.captionExpanded),onClick:this._handleCaptionClick},o.default.createElement(m.default,{className:(0,n.default)(w.default.mediaCaption,w.default.mediaCaptionExpanded),formatters:p,text:r.caption})))}var g=(0,n.default)(w.default.media,{[w.default.mediaWithCaption]:!!s}),v=(0,n.default)("overlay",w.default.mediaViewer,{[w.default.viewOnce]:r.isViewOnce,[w.default.mediaViewerAnimate]:this.props.isAnimatingIn,[w.default.cursorZoomOut]:this.state.imgZoomed}),_=this.state.imgZoomed&&this._listenToMouseMove?this._handleMouseMove:null,P=this.state.imgZoomed?this._handleZoomOut:null,A=this.state.imgZoomed?null:this._handleClose;null!=A&&r.isViewOnce&&(A=this._handleClickToCloseBlocked);var R=!r.isViewOnce;return o.default.createElement(G.default,{displayName:"MediaViewer",escapable:!0,requestDismiss:this._handleClose},o.default.createElement(M.default,{handlers:{space:this._handleKeyboardZoom},onRef:this._setRefHotKeys},o.default.createElement("div",{className:v,"data-animate-media-viewer":!0,onClick:P,onMouseMove:_},o.default.createElement(y.default,{isHighlightClose:this.state.isHighlightClose,msg:r,mediaData:u,onClose:this._handleClose,onGoToMsgClick:this._handleGoToMsgClick,onHightlightCloseEnd:this._handleHighlightCloseEnd,onReplyClick:this._handleReplyClick,onUnstarClick:this._handleUnstarClick,onStarClick:this._handleStarClick,onDeleteClick:this._handleDeleteClick,openForwardFlow:this.openForwardFlow,onDownloadClick:this._handleDownloadClick,onMsgInfoClick:this._handleMsgInfoClick,onViewOnceInfoClick:this._handleViewOnceInfoClick,msgIndexInAlbum:this.props.msgIndexInAlbum}),o.default.createElement("div",{className:w.default.mediaContent,onClick:A},R&&o.default.createElement("div",{className:(0,n.default)(w.default.btnMediaPrev)},o.default.createElement(d.default,{type:d.ButtonType.Prev,onClick:null!==(e=this.props.onPrev)&&void 0!==e?e:W,onKeyDown:null!==(t=this.props.onPrev)&&void 0!==t?t:W,disabled:!this.props.onPrev||this.state.imgZoomed,theme:D.RoundTheme.Default})),o.default.createElement("div",{className:g},o.default.createElement(k.default,{msg:r,mediaData:u}),i,o.default.createElement(C.default.Provider,{value:r.chat.groupMetadata},s)),R&&o.default.createElement("div",{className:(0,n.default)(w.default.btnMediaNext)},o.default.createElement(d.default,{type:d.ButtonType.Next,onClick:null!==(a=this.props.onNext)&&void 0!==a?a:W,onKeyDown:null!==(l=this.props.onNext)&&void 0!==l?l:W,disabled:!this.props.onNext||this.state.imgZoomed,theme:D.RoundTheme.Default}))))))}}Y.CONCERNS={msg:["id","star","isUnsentMedia","isViewOnce","chat","caption","interactiveAnnotations"],mediaData:["mediaStage","type","isGif"]},Y.displayName="MediaViewerModal";var q=(0,x.default)(Y,Y.CONCERNS);t.default=q},86005:(e,t,a)=>{"use strict";var l=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(23493)),n=l(a(67294)),r=i(a(77188)),o=i(a(44204)),d=i(a(81319)),u=i(a(76479)),c=i(a(69507));class f extends n.Component{constructor(e){super(e),this._setThumbRef=(e,t)=>{this._thumbRefs[t]=e},this._isPreviewPreferred=e=>{var t=this._thumbRefs[e];if(!t)return!1;var a=t.getBoundingClientRect(),l=(a.left+a.right)/2;return!(l>-1*window.innerWidth&&l<2*window.innerWidth)},this._getMsgIdToPreferPreview=()=>{var e=new Map;return this.props.mediaMsgs.forEach((t=>{var a=t.id.toString();e.set(a,this._isPreviewPreferred(a))})),e},this.onScroll=e=>{this.handleScroll(),this.props.onScroll(e)},this._handleScroll=()=>{var e=this._getMsgIdToPreferPreview();(0,o.default)(this.state.msgIdToPreferPreview,e)||this.setState({msgIdToPreferPreview:e})},this.getThumbs=()=>{var{highlightedMsgIds:e}=this.props,t=e&&e.size>0&&e.has(this.props.activeMsg.id.toString()),a=[];return this.props.mediaMsgs.forEach((l=>{if(null!=l.mediaData){var i=t&&e&&!e.has(l.id.toString())?"viewerFlowTransparent":"viewerFlow",s=r.default.supportsFeature(r.default.F.GROUP_CONVERSATIONS_MEDIA_TOOLTIPS)&&l.isGroupMsg;a.push(n.default.createElement(d.default,{theme:i,active:l===this.props.activeMsg,msg:l,containerRef:e=>{this._setThumbRef(e,l.id.toString()),l===this.props.activeMsg&&this.props.onSetActiveThumb(e)},key:`media-${l.id.id}`,onClick:()=>{this.props.onSelectThumb(l)},preferPreview:!!this.state.msgIdToPreferPreview.get(l.id.toString()),showTooltip:s}))}else{var o=this.props.activeMsg;__LOG__(3,!0)`MediaViewerFlow: attempted to render a msg without mediaData: ${JSON.stringify({type:l.type,isMedia:l.isMedia,startMsgType:o.type,startMsgIsMedia:o.isMedia})}`}})),a.push(n.default.createElement("div",{className:u.default.mediaThumb,key:"spinner-right"},this.props.mediaMsgs.queryMediaAfter?n.default.createElement(c.default,{stroke:6,size:24}):null)),a.unshift(n.default.createElement("div",{className:u.default.mediaThumb,key:"spinner-left"},this.props.mediaMsgs.queryMediaBefore?n.default.createElement(c.default,{stroke:6,size:24}):null)),a.push(n.default.createElement("div",{className:u.default.thumbPadding,key:"padding-right"})),a.unshift(n.default.createElement("div",{className:u.default.thumbPadding,key:"padding-left"})),a},this._thumbRefs={},this.handleScroll=(0,s.default)(this._handleScroll,100),this.state={msgIdToPreferPreview:this._getMsgIdToPreferPreview()}}componentWillUnmount(){this.handleScroll.cancel()}render(){var e=this.getThumbs();return n.default.createElement("div",{className:u.default.thumbsContainer,ref:this.props.setRefThumbsContainer},n.default.createElement("div",{className:u.default.scrollContainer,dir:"ltr"},n.default.createElement("div",{onScroll:this.onScroll,className:u.default.viewerThumbs,ref:this.props.setRefThumbs},e)))}}t.default=f,f.displayName="MediaViewerThumbList"},78563:(e,t,a)=>{"use strict";var l=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,s.useEffect)((()=>{(0,c.setNUX)(r.default.NUX.EPHEMERAL_VIEW_ONCE_RECEIVER,{views:1,maxViews:1})}),[]),s.default.createElement(n.default,{onOK:e.onOkClick,cancelText:f.default.t(1002),onCancel:()=>{(0,o.openExternalLink)((0,d.getViewOnceFaqUrl)())}},s.default.createElement(u.FlexColumn,null,s.default.createElement(u.FlexItem,{className:h.default.graphic,align:"center"},s.default.createElement(p.default,{name:"view-once-sender-nux"})),s.default.createElement(m.TextHeader,{className:h.default.text,theme:"popup-title"},e.isPhoto?f.default.t(1647):f.default.t(1650)),s.default.createElement(m.TextParagraph,{className:h.default.text},e.isPhoto?f.default.t(1646):f.default.t(1649))))};var s=i(a(67294)),n=l(a(51115)),r=l(a(75444)),o=a(1886),d=a(84641),u=a(57909),c=a(26226),f=l(a(80162)),h=l(a(82326)),p=l(a(32885)),m=a(38245)},12970:(e,t,a)=>{"use strict";var l=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),n=l(a(33766)),r=l(a(51115)),o=l(a(80162)),d=l(a(17391)),u=a(38245);class c extends s.PureComponent{constructor(e){super(e),this._handleOK=()=>{var{selectedValue:e}=this.state;null!=e&&this.props.onSelect(e),this.closeModal()},this._handleChange=e=>{var{target:t}=e;t instanceof HTMLInputElement&&this.setState({selectedValue:parseInt(t.value,10)})},this.closeModal=()=>{n.default.closeModal()},this.state={selectedValue:e.initialValue}}render(){var{options:e,explanation:t}=this.props,a=e.map((({value:e,label:t})=>s.default.createElement("li",{key:`setting-${e}`},s.default.createElement("label",{className:d.default.label},s.default.createElement("input",{type:"radio",className:d.default.input,value:String(e),checked:e===this.state.selectedValue,onChange:this._handleChange}),t))));return s.default.createElement(r.default,{title:this.props.title,okText:o.default.t(604),onOK:this._handleOK,onCancel:this.closeModal},t?s.default.createElement(u.TextDiv,{theme:"muted",className:d.default.explanation},t):null,s.default.createElement("form",null,s.default.createElement("ol",null,a)))}}t.default=c,c.displayName="SettingsPopup"},17269:(e,t,a)=>{"use strict";var l=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({contact:e}){var{verifiedLevel:t,verifiedName:a}=(0,_.default)(e,["verifiedLevel","verifiedName"]),l=(0,p.getBusinessFaqUrl)(),i=!u.default.isSMB;(0,s.useEffect)((()=>{i&&new E.default.BannerEvent({bannerType:E.default.BANNER_TYPES.CROSS_SELL_PROFILE_INTERSTITIAL,bannerOperation:E.default.BANNER_OPERATIONS.SHOWN}).commit()}),[i]);var C=t===c.default.VERIFIED_LEVEL.HIGH?m.default.t(2011,{businessName:a}):m.default.t(2010);return s.default.createElement(d.default,{title:m.default.t(2013),onOK:()=>{o.default.closeModal(),i&&new E.default.BannerEvent({bannerType:E.default.BANNER_TYPES.CROSS_SELL_PROFILE_INTERSTITIAL,bannerOperation:E.default.BANNER_OPERATIONS.DISMISS}).commit()},okText:m.default.t(1941)},s.default.createElement(f.default,{text:C}),"",s.default.createElement(r.default,{href:l,onClick:e=>{e.preventDefault(),o.default.closeModal(),setTimeout((()=>(0,h.openExternalLink)(l)),10)}},m.default.t(1002)),i&&s.default.createElement("div",{className:n.default.footerNote},s.default.createElement(v.TextSpan,{theme:"muted",size:"13"},m.default.t(2014),s.default.createElement("br",null),s.default.createElement(r.default,{onClick:e=>{e.preventDefault(),o.default.closeModal(),new E.default.BannerEvent({bannerType:E.default.BANNER_TYPES.CROSS_SELL_PROFILE_INTERSTITIAL,bannerOperation:E.default.BANNER_OPERATIONS.CLICK}).commit(),setTimeout((()=>o.default.openModal(s.default.createElement(g.default,null))),200)},className:n.default.getTheAppLink},m.default.t(2012)))))};var s=i(a(67294)),n=l(a(75632)),r=l(a(72853)),o=l(a(33766)),d=l(a(51115)),u=l(a(11288)),c=l(a(75444)),f=l(a(20923)),h=a(1886),p=a(84641),m=l(a(80162)),E=l(a(72462)),g=l(a(19903)),v=a(38245),_=l(a(95607))},19903:(e,t,a)=>{"use strict";var l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return i.default.createElement(r.default,{title:u.default.t(2017),onOK:()=>{new c.default.BannerEvent({bannerType:c.default.BANNER_TYPES.CROSS_SELL_PROFILE_INTERSTITIAL,bannerOperation:c.default.BANNER_OPERATIONS.DISMISS}).commit(),n.default.closeModal()},okText:u.default.t(1779)},i.default.createElement(f.default,null),i.default.createElement("p",null,i.default.createElement(o.default,{text:u.default.t(2015)})),i.default.createElement("br",null),i.default.createElement("p",null,i.default.createElement(o.default,{text:u.default.t(2016)}),"",i.default.createElement(s.default,{href:h,onClick:e=>{e.preventDefault(),n.default.closeModal(),setTimeout((()=>(0,d.openExternalLink)(h)),10)}},u.default.t(1002))))},t.WHATSAPP_BUSINESS_URL=void 0;var i=l(a(67294)),s=l(a(72853)),n=l(a(33766)),r=l(a(51115)),o=l(a(20923)),d=a(1886),u=l(a(80162)),c=l(a(72462)),f=l(a(36054)),h="https://www.whatsapp.com/business";t.WHATSAPP_BUSINESS_URL=h},36054:(e,t,a)=>{"use strict";var l=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(0,n.useRef)(null),t=(0,n.useRef)(null),{theme:a}=(0,n.useContext)(u.default),l="dark"===a;return(0,n.useEffect)((()=>(null!=e.current&&(t.current=new o.default(e.current,{text:"https://www.whatsapp.com/business/download",colorDark:"#122e31",colorLight:"#ffffff",width:r.default.QR_EDGE/2,height:r.default.QR_EDGE/2,typeNumber:4,correctLevel:o.default.CorrectLevel.H})),()=>{null!=t.current&&(t.current.clear(),t.current=null,e.current=null)})),[l]),n.default.createElement("div",{className:d.default.wrapper},n.default.createElement("div",{ref:e,className:(0,s.default)(d.default.code,{[d.default.codeDarkMode]:l})},n.default.createElement(c,{theme:a})))};var s=i(a(94184)),n=l(a(67294)),r=i(a(75444)),o=i(a(31516)),d=i(a(88959)),u=i(a(7170));function c(){return n.default.createElement("div",{className:d.default.codeLogo},n.default.createElement("svg",{width:"100%",viewBox:"0 0 50 50",xmlns:"http://www.w3.org/2000/svg"},n.default.createElement("path",{d:"M42.6776 42.6779C37.9558 47.3997 31.6777 50.0001 24.9999 50.0001C21.0047 50.0001 17.0541 49.0389 13.5244 47.2141L0.601068 49.3339L2.72832 36.3645C0.941278 32.8647 0 28.9525 0 25.0001C0 18.3223 2.60042 12.0443 7.32229 7.32237C12.0442 2.6005 18.3221 0 24.9999 0C31.6777 0 37.9558 2.6005 42.6776 7.32237C47.3995 12.0443 50 18.3223 50 25.0001C50 31.678 47.3995 37.9558 42.6776 42.6779ZM24.9999 4.33778C13.6067 4.33778 4.33772 13.607 4.33772 25.0001C4.33772 28.4792 5.21935 31.9192 6.8868 34.9487L7.24853 35.6054L5.85915 44.0756L14.2959 42.6918L14.9565 43.0601C18.0107 44.7624 21.4837 45.6622 24.9999 45.6622C36.3932 45.6622 45.6622 36.3933 45.6622 25.0001C45.6622 13.607 36.3932 4.33778 24.9999 4.33778ZM31.1133 24.3614C32.4522 24.9804 34.1536 26.3725 34.1208 29.3117C34.0749 33.4266 31.2191 35.6542 27.2744 35.6542H19.4594H18.3042C17.5079 35.6542 16.8645 35.0053 16.8713 34.2092L17.0344 15.0573C17.041 14.2714 17.6794 13.6377 18.4652 13.6366L27.1493 13.6256C31.4651 13.6256 33.9598 16.039 33.9177 19.8134C33.8903 22.2579 32.2484 23.8355 31.1133 24.3614ZM26.766 17.4622H21.3643L21.3076 22.5361H26.7093C28.5347 22.5361 29.5672 21.5152 29.584 19.9992C29.6009 18.4831 28.5915 17.4622 26.766 17.4622ZM26.9444 26.4035H21.2643L21.2038 31.8178H26.884C28.8333 31.8178 29.7752 30.5802 29.792 29.0952C29.8085 27.6101 28.8939 26.4035 26.9444 26.4035Z",fill:"currentColor"})))}},9252:(e,t,a)=>{"use strict";var l=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{onClick:t}=e;return i.default.createElement(s.default,{onClick:t,side:i.default.createElement(o.default,{name:"lock",className:n.default.icon}),multiline:!0},i.default.createElement("div",{className:n.default.header},i.default.createElement(d.TextSpan,{theme:"title"},r.default.t(1545))),i.default.createElement(d.TextDiv,{theme:"muted"},r.default.t(1544)))};var i=l(a(67294)),s=l(a(18248)),n=l(a(21477)),r=l(a(80162)),o=l(a(32885)),d=a(38245)},97026:(e,t,a)=>{"use strict";var l=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var[t,a]=(0,s.useState)(!1);return s.default.createElement(r.default,{onOK:function(){e.onReport(t)},okText:d.default.t(1388),onCancel:e.onCancel,title:e.title},s.default.createElement(u.TextParagraph,{className:c.default.section,color:"muted"},e.isGroup?d.default.t(1409):d.default.t(1408)),s.default.createElement(u.TextParagraph,{className:c.default.section,color:"muted"},e.isGroup?d.default.t(1412):e.isBusiness?d.default.t(1411):d.default.t(1410)),s.default.createElement(o.FlexRow,{align:"center",justify:"start"},s.default.createElement(n.default,{onChange:()=>a((e=>!e)),checked:t,id:"menu-icon-report-spam"}),s.default.createElement(u.TextLabel,{className:c.default.checkboxLabel,htmlFor:"menu-icon-report-spam",color:"muted"},e.isGroup?d.default.t(1814):e.isBusiness?d.default.t(300):d.default.t(302))))};var s=i(a(67294)),n=l(a(20451)),r=l(a(51115)),o=a(57909),d=l(a(80162)),u=a(38245),c=l(a(56454))},44204:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a;if(e.size!==t.size)return!1;for(var[l,i]of e)if((a=t.get(l))!==i||void 0===a&&!t.has(l))return!1;return!0}},46809:(e,t,a)=>{"use strict";a.r(t)},93332:(e,t,a)=>{"use strict";a.r(t)},41323:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_36FbL",block:"_11V85",main:"_1ER5I",side:"_1YLup",multiline:"_1tPXz"}},66322:(e,t,a)=>{"use strict";a.r(t),t.default={header:"_2J_Rg",chevronIcon:"_3grvf",ephemeralIcon:"_36-dp"}},8767:(e,t,a)=>{"use strict";a.r(t),t.default={msg:"_3YiZC",text:"RmpKn",bubble:"_2z0p1",author:"XntIB",hasSuspiciousLinks:"_3bU-2",hasAuthor:"_2cFHu",suspiciousLabel:"_2tYTz"}},45494:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_2G0i8"}},26251:(e,t,a)=>{"use strict";a.r(t),t.default={mediaCanvas:"_7xcOR",shade:"_3t-Dc",iconStar:"qSojz",shadeTop:"kt7p8",canvasBody:"_2pnVj",canvasSelected:"xRcWX",mediaSelect:"_2GKAW",canvasComponent:"_3_8JL",canvasSecondRow:"_2j2vv",viewerFlow:"q0PwG",active:"_2IToT",viewerFlowTransparent:"_1Brnl"}},73148:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_3QXeb",selected:"_11w_h"}},87114:(e,t,a)=>{"use strict";a.r(t),t.default={iconType:"_1Dw5O"}},68198:(e,t,a)=>{"use strict";a.r(t),t.default={wrapper:"_11tTr"}},85967:(e,t,a)=>{"use strict";a.r(t),t.default={nuxContainer:"_2MN2b",flatListContainer:"_3P67r",btnClose:"_1rNId",nuxHeader:"_1fDhw",nuxContent:"_3CSup",nuxIcon:"wZmgd",nuxText:"_23F3I"}},83442:(e,t,a)=>{"use strict";a.r(t),t.default={body:"_2j9Df",photo:"_3wMpK",chevron:"_2o-Pp"}},91548:(e,t,a)=>{"use strict";a.r(t),t.default={businessAccount:"_3Wx0w",businessTitleText:"_3hEvS"}},70615:(e,t,a)=>{"use strict";a.r(t),t.default={actionsRow:"_2kAwJ",actionButton:"_2iUPD",actionLabel:"_2oaCg",actionDisabled:"_3GWG6"}},46604:(e,t,a)=>{"use strict";a.r(t),t.default={businessHoursRow:"_1E5MZ",firstRow:"_3qGzL",businessHoursDay:"CY6kT",businessHoursHours:"_1ujuU",dayIsOpen:"_3nRm3",businessHoursChevron:"_36zDQ",flipSvg:"_3-kwz"}},62260:(e,t,a)=>{"use strict";a.r(t),t.default={section:"_2yoR2",description:"_2COKu",map:"_2FPvQ"}},67666:(e,t,a)=>{"use strict";a.r(t),t.default={wrapper:"_-68fg",title:"_1FhZx",subtitle:"_3YwTO",verifiedText:"_25I1z",icon:"_2ie2d"}},11582:(e,t,a)=>{"use strict";a.r(t),t.default={contactBusinessInfo:"_2Qmz_",contactBusinessInfoSpinner:"_3UShD",dataRow:"_2GoqA",businessHoursRow:"T9W1E",businessHoursDay:"_1Qi8h",businessHoursHours:"_265N_",businessHoursChevron:"_235Hk",flipSvg:"sdLP_",dataRowIcon:"uj7Hl",dataRowText:"_1y-yA",businessTitleText:"_20eRR",businessMarker:"-ouoI",verifiedLabel:"_3WNAO",businessMap:"_34r-I",address:"HXkG_",link:"_3AYvg",infoIcon:"_3hzkD"}},42799:(e,t,a)=>{"use strict";a.r(t),t.default={body:"_2YEfx",avatar:"_2ALnh",nameSecondary:"_3l1_9",screenName:"_2UVLe",businessVname:"_1viks",icon:"_37Tl1",titleAbout:"Xt0cg",chevron:"_1Fclf"}},32234:(e,t,a)=>{"use strict";a.r(t),t.default={info:"_2U0ik",categories:"_2oH_b",noPaddingBottom:"_3W57d"}},13916:(e,t,a)=>{"use strict";a.r(t),t.default={open:"_25r2J",closed:"_5Xa1z",openStatus:"_1i7Je"}},21477:(e,t,a)=>{"use strict";a.r(t),t.default={header:"_2zyOo",icon:"_4aKqp"}},17847:(e,t,a)=>{"use strict";a.r(t),t.default={body:"_f0hJ",avatar:"_3zYOj",description:"_8xDKI",nameSecondary:"_3IaWU",chevron:"_1kh2B",iconSearch:"PLicp",title:"_1VJFC",dogfoodingGroupBannerInternalOnly:"_2j99K"}},64287:(e,t,a)=>{"use strict";a.r(t),t.default={header:"_3AwRc",restrictText:"_1fFgT"}},65636:(e,t,a)=>{"use strict";a.r(t),t.default={multimediaGallery:"_3M644",column:"_3nvje",menuItem:"OJuvv",active:"_KRg9",menuTabsLists:"_3CC5A",threeTabs:"_1KRHF",fourTabs:"rLX29"}},79741:(e,t,a)=>{"use strict";a.r(t),t.default={mediaViewerPlaceholder:"nehFG",imageAudio:"_2OreO",mediaViewerAudio:"_1alR8"}},76479:(e,t,a)=>{"use strict";a.r(t),t.default={thumbsContainer:"_1XWMx",scrollContainer:"_1MhXb",viewerThumbs:"_1FS45",mediaThumb:"_52crR",thumbPadding:"_1833d"}},82326:(e,t,a)=>{"use strict";a.r(t),t.default={text:"_1iOjC",graphic:"_1WxSS"}},17391:(e,t,a)=>{"use strict";a.r(t),t.default={label:"QzWWL",input:"_1LOWN",explanation:"_37J_Y"}},75632:(e,t,a)=>{"use strict";a.r(t),t.default={footerNote:"_1chRk",getTheAppLink:"_3t8G3"}},88959:(e,t,a)=>{"use strict";a.r(t),t.default={wrapper:"_2Cwyq",code:"_3LMFv",codeDarkMode:"_3-nnq",codeLogo:"_3wVH-"}},56454:(e,t,a)=>{"use strict";a.r(t),t.default={section:"_2ppks",checkboxLabel:"l2_nh"}}}]);